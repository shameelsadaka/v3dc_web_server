/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./node_modules/backo2/index.js":
/*!**************************************!*\
  !*** ./node_modules/backo2/index.js ***!
  \**************************************/
/***/ ((module) => {


/**
 * Expose `Backoff`.
 */

module.exports = Backoff;

/**
 * Initialize backoff timer with `opts`.
 *
 * - `min` initial timeout in milliseconds [100]
 * - `max` max timeout [10000]
 * - `jitter` [0]
 * - `factor` [2]
 *
 * @param {Object} opts
 * @api public
 */

function Backoff(opts) {
  opts = opts || {};
  this.ms = opts.min || 100;
  this.max = opts.max || 10000;
  this.factor = opts.factor || 2;
  this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;
  this.attempts = 0;
}

/**
 * Return the backoff duration.
 *
 * @return {Number}
 * @api public
 */

Backoff.prototype.duration = function(){
  var ms = this.ms * Math.pow(this.factor, this.attempts++);
  if (this.jitter) {
    var rand =  Math.random();
    var deviation = Math.floor(rand * this.jitter * ms);
    ms = (Math.floor(rand * 10) & 1) == 0  ? ms - deviation : ms + deviation;
  }
  return Math.min(ms, this.max) | 0;
};

/**
 * Reset the number of attempts.
 *
 * @api public
 */

Backoff.prototype.reset = function(){
  this.attempts = 0;
};

/**
 * Set the minimum duration
 *
 * @api public
 */

Backoff.prototype.setMin = function(min){
  this.ms = min;
};

/**
 * Set the maximum duration
 *
 * @api public
 */

Backoff.prototype.setMax = function(max){
  this.max = max;
};

/**
 * Set the jitter
 *
 * @api public
 */

Backoff.prototype.setJitter = function(jitter){
  this.jitter = jitter;
};



/***/ }),

/***/ "./node_modules/base64-arraybuffer/lib/base64-arraybuffer.js":
/*!*******************************************************************!*\
  !*** ./node_modules/base64-arraybuffer/lib/base64-arraybuffer.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, exports) => {

/*
 * base64-arraybuffer
 * https://github.com/niklasvh/base64-arraybuffer
 *
 * Copyright (c) 2012 Niklas von Hertzen
 * Licensed under the MIT license.
 */
(function(chars){
  "use strict";

  exports.encode = function(arraybuffer) {
    var bytes = new Uint8Array(arraybuffer),
    i, len = bytes.length, base64 = "";

    for (i = 0; i < len; i+=3) {
      base64 += chars[bytes[i] >> 2];
      base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];
      base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];
      base64 += chars[bytes[i + 2] & 63];
    }

    if ((len % 3) === 2) {
      base64 = base64.substring(0, base64.length - 1) + "=";
    } else if (len % 3 === 1) {
      base64 = base64.substring(0, base64.length - 2) + "==";
    }

    return base64;
  };

  exports.decode =  function(base64) {
    var bufferLength = base64.length * 0.75,
    len = base64.length, i, p = 0,
    encoded1, encoded2, encoded3, encoded4;

    if (base64[base64.length - 1] === "=") {
      bufferLength--;
      if (base64[base64.length - 2] === "=") {
        bufferLength--;
      }
    }

    var arraybuffer = new ArrayBuffer(bufferLength),
    bytes = new Uint8Array(arraybuffer);

    for (i = 0; i < len; i+=4) {
      encoded1 = chars.indexOf(base64[i]);
      encoded2 = chars.indexOf(base64[i+1]);
      encoded3 = chars.indexOf(base64[i+2]);
      encoded4 = chars.indexOf(base64[i+3]);

      bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);
      bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);
      bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);
    }

    return arraybuffer;
  };
})("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/");


/***/ }),

/***/ "./node_modules/component-emitter/index.js":
/*!*************************************************!*\
  !*** ./node_modules/component-emitter/index.js ***!
  \*************************************************/
/***/ ((module) => {


/**
 * Expose `Emitter`.
 */

if (true) {
  module.exports = Emitter;
}

/**
 * Initialize a new `Emitter`.
 *
 * @api public
 */

function Emitter(obj) {
  if (obj) return mixin(obj);
};

/**
 * Mixin the emitter properties.
 *
 * @param {Object} obj
 * @return {Object}
 * @api private
 */

function mixin(obj) {
  for (var key in Emitter.prototype) {
    obj[key] = Emitter.prototype[key];
  }
  return obj;
}

/**
 * Listen on the given `event` with `fn`.
 *
 * @param {String} event
 * @param {Function} fn
 * @return {Emitter}
 * @api public
 */

Emitter.prototype.on =
Emitter.prototype.addEventListener = function(event, fn){
  this._callbacks = this._callbacks || {};
  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])
    .push(fn);
  return this;
};

/**
 * Adds an `event` listener that will be invoked a single
 * time then automatically removed.
 *
 * @param {String} event
 * @param {Function} fn
 * @return {Emitter}
 * @api public
 */

Emitter.prototype.once = function(event, fn){
  function on() {
    this.off(event, on);
    fn.apply(this, arguments);
  }

  on.fn = fn;
  this.on(event, on);
  return this;
};

/**
 * Remove the given callback for `event` or all
 * registered callbacks.
 *
 * @param {String} event
 * @param {Function} fn
 * @return {Emitter}
 * @api public
 */

Emitter.prototype.off =
Emitter.prototype.removeListener =
Emitter.prototype.removeAllListeners =
Emitter.prototype.removeEventListener = function(event, fn){
  this._callbacks = this._callbacks || {};

  // all
  if (0 == arguments.length) {
    this._callbacks = {};
    return this;
  }

  // specific event
  var callbacks = this._callbacks['$' + event];
  if (!callbacks) return this;

  // remove all handlers
  if (1 == arguments.length) {
    delete this._callbacks['$' + event];
    return this;
  }

  // remove specific handler
  var cb;
  for (var i = 0; i < callbacks.length; i++) {
    cb = callbacks[i];
    if (cb === fn || cb.fn === fn) {
      callbacks.splice(i, 1);
      break;
    }
  }

  // Remove event specific arrays for event types that no
  // one is subscribed for to avoid memory leak.
  if (callbacks.length === 0) {
    delete this._callbacks['$' + event];
  }

  return this;
};

/**
 * Emit `event` with the given args.
 *
 * @param {String} event
 * @param {Mixed} ...
 * @return {Emitter}
 */

Emitter.prototype.emit = function(event){
  this._callbacks = this._callbacks || {};

  var args = new Array(arguments.length - 1)
    , callbacks = this._callbacks['$' + event];

  for (var i = 1; i < arguments.length; i++) {
    args[i - 1] = arguments[i];
  }

  if (callbacks) {
    callbacks = callbacks.slice(0);
    for (var i = 0, len = callbacks.length; i < len; ++i) {
      callbacks[i].apply(this, args);
    }
  }

  return this;
};

/**
 * Return array of callbacks for `event`.
 *
 * @param {String} event
 * @return {Array}
 * @api public
 */

Emitter.prototype.listeners = function(event){
  this._callbacks = this._callbacks || {};
  return this._callbacks['$' + event] || [];
};

/**
 * Check if this emitter has `event` handlers.
 *
 * @param {String} event
 * @return {Boolean}
 * @api public
 */

Emitter.prototype.hasListeners = function(event){
  return !! this.listeners(event).length;
};


/***/ }),

/***/ "./node_modules/enable3d/dist/index.js":
/*!*********************************************!*\
  !*** ./node_modules/enable3d/dist/index.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */
Object.defineProperty(exports, "__esModule", ({ value: true }));
var scene3d_1 = __webpack_require__(/*! ./scene3d */ "./node_modules/enable3d/dist/scene3d.js");
exports.Scene3D = scene3d_1.Scene3D;
var project_1 = __webpack_require__(/*! ./project */ "./node_modules/enable3d/dist/project.js");
exports.Project = project_1.Project;
var physicsLoader_1 = __webpack_require__(/*! @enable3d/common/dist/physicsLoader */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/physicsLoader.js");
exports.PhysicsLoader = physicsLoader_1.PhysicsLoader;
var extendedMesh_1 = __webpack_require__(/*! @enable3d/common/dist/extendedMesh */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/extendedMesh.js");
exports.ExtendedMesh = extendedMesh_1.ExtendedMesh;
var extendedObject3D_1 = __webpack_require__(/*! @enable3d/common/dist/extendedObject3D */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/extendedObject3D.js");
exports.ExtendedObject3D = extendedObject3D_1.ExtendedObject3D;
var extendedGroup_1 = __webpack_require__(/*! @enable3d/common/dist/extendedGroup */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/extendedGroup.js");
exports.ExtendedGroup = extendedGroup_1.ExtendedGroup;
const THREE = __webpack_require__(/*! @enable3d/three-wrapper/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
exports.THREE = THREE;
const Types = __webpack_require__(/*! @enable3d/common/dist/types */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/types.js");
exports.Types = Types;
var joystick_1 = __webpack_require__(/*! @enable3d/common/dist/misc/joystick */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/misc/joystick.js");
exports.JoyStick = joystick_1.JoyStick;
var thirdPersonControls_1 = __webpack_require__(/*! @enable3d/common/dist/misc/thirdPersonControls */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/misc/thirdPersonControls.js");
exports.ThirdPersonControls = thirdPersonControls_1.ThirdPersonControls;
var firstPersonControls_1 = __webpack_require__(/*! @enable3d/common/dist/misc/firstPersonControls */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/misc/firstPersonControls.js");
exports.FirstPersonControls = firstPersonControls_1.FirstPersonControls;
var pointerLock_1 = __webpack_require__(/*! @enable3d/common/dist/misc/pointerLock */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/misc/pointerLock.js");
exports.PointerLock = pointerLock_1.PointerLock;
var pointerDrag_1 = __webpack_require__(/*! @enable3d/common/dist/misc/pointerDrag */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/misc/pointerDrag.js");
exports.PointerDrag = pointerDrag_1.PointerDrag;
// post-processing
var index_1 = __webpack_require__(/*! @enable3d/three-wrapper/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
exports.EffectComposer = index_1.EffectComposer;
exports.RenderPass = index_1.RenderPass;
exports.ShaderPass = index_1.ShaderPass;
exports.GlitchPass = index_1.GlitchPass;
exports.DotScreenShader = index_1.DotScreenShader;
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./node_modules/enable3d/dist/project.js":
/*!***********************************************!*\
  !*** ./node_modules/enable3d/dist/project.js ***!
  \***********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */
Object.defineProperty(exports, "__esModule", ({ value: true }));
const index_1 = __webpack_require__(/*! @enable3d/three-graphics/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/index.js");
class Project extends index_1.ThreeGraphics {
    constructor(projectConfig) {
        var _a;
        super(projectConfig);
        this.projectConfig = projectConfig;
        this.scenes = new Map();
        this.renderer.setSize(window.innerWidth, window.innerHeight);
        if (this.projectConfig.parent)
            this.parent = document.getElementById(this.projectConfig.parent);
        else
            this.parent = document.body;
        if (!this.parent) {
            console.warn(`[enable3d] parent "${this.projectConfig.parent}" not found! Will add it to the body.`);
            this.parent = document.body;
        }
        this.parent.appendChild(this.renderer.domElement);
        this.canvas = this.renderer.domElement;
        let firstSceneKey = '';
        this.projectConfig.scenes.forEach((scene, i) => {
            const s = new scene();
            if (i === 0)
                firstSceneKey = s.sceneKey;
            const plug = {
                // scene configuration
                sceneConfig: {
                    textureAnisotropy: this.textureAnisotropy,
                    autoStart: false
                },
                // add core features from three-graphicsconfig: {
                renderer: this.renderer,
                parent: this.parent,
                canvas: this.canvas,
                scene: this.scene,
                scenes: this.scenes,
                camera: this.camera,
                cache: this.cache,
                physics: this.physics
            };
            s.initializeScene(plug);
            if (i === 0) {
                s.setSize(this.parent.clientWidth, this.parent.clientHeight);
                s.setPixelRatio(Math.max(1, window.devicePixelRatio / 2));
            }
            this.scenes.set(s.sceneKey, s);
        });
        // start the first scene
        (_a = this.scenes.get(firstSceneKey)) === null || _a === void 0 ? void 0 : _a.start(firstSceneKey);
    }
}
exports.Project = Project;
//# sourceMappingURL=project.js.map

/***/ }),

/***/ "./node_modules/enable3d/dist/scene3d.js":
/*!***********************************************!*\
  !*** ./node_modules/enable3d/dist/scene3d.js ***!
  \***********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";

/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
const index_1 = __webpack_require__(/*! @enable3d/three-wrapper/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
const Plugins = __webpack_require__(/*! @enable3d/three-graphics/dist/plugins/index */ "./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/index.js");
// https://www.typescriptlang.org/docs/handbook/utility-types.html Pick<T,K>
// export class Scene3D implements Partial<ThreeGraphics> {
class Scene3D {
    constructor(sceneConfig = {}) {
        this.sceneConfig = sceneConfig;
        // core modules from three-graphics
        this.scenes = new Map();
        this.__config = {};
        this._isRunning = false;
        this._deconstructorFunctions = [];
        const { key = Math.random().toString(), enableXR = false } = sceneConfig;
        this.__config.sceneKey = key;
        this.__config.enableXR = enableXR;
    }
    get deconstructor() {
        return {
            add: (fnc) => {
                this._deconstructorFunctions.push(fnc);
            }
        };
    }
    // @ts-ignore
    initializeScene(plugins) {
        const { renderer, parent, canvas, scene, scenes, camera, cache, physics, sceneConfig } = plugins;
        this.scene = scene;
        this.scenes = scenes;
        this.camera = camera;
        this.cache = cache;
        this.physics = physics;
        this.renderer = renderer;
        this.parent = parent;
        this.canvas = canvas;
        const { autoStart, textureAnisotropy } = sceneConfig;
        // plugins
        this.load = new Plugins.Loaders(this.cache, textureAnisotropy);
        this.lights = new Plugins.Lights(this.scene);
        this.transform = new Plugins.Transform(this.camera, this.renderer);
        this.csg = new Plugins.CSG(this.scene, this.transform);
        this.heightMap = new Plugins.HeightMap(this.scene);
        this.factories = new Plugins.Factories(this.scene);
        this.misc = new Plugins.Misc(this.scene, this.renderer, this.factories);
        this.ws = new Plugins.WarpSpeed(scene, renderer, camera, this.lights, this.physics, this.load, this.factories);
        this.mixers = new Plugins.Mixers();
        this.cameras = new Plugins.Cameras();
        this.clock = new index_1.Clock();
        // add vr camera
        if (this.__config.enableXR) {
            this.webXR = new Plugins.WebXR(this.renderer, this.scene, this.camera);
        }
        if (autoStart)
            this.start(this.__config.sceneKey);
    }
    get sceneKey() {
        return this.__config.sceneKey;
    }
    /** Destroys a object and its body. */
    destroy(obj) {
        var _a;
        (_a = this.physics) === null || _a === void 0 ? void 0 : _a.destroy(obj.body);
        this.scene.remove(obj);
        // @ts-ignore
        obj = null;
    }
    warpSpeed(...features) {
        return __awaiter(this, void 0, void 0, function* () {
            return yield this.ws.warpSpeed(...features);
        });
    }
    get animationMixers() {
        return this.mixers.mixers;
    }
    get make() {
        return this.factories.make;
    }
    get add() {
        return this.factories.add;
    }
    haveSomeFun(numberOfElements = 20) {
        Plugins.HaveSomeFun(numberOfElements, this.physics);
    }
    isRunning() {
        return this._isRunning;
    }
    start(key, data) {
        var _a;
        return __awaiter(this, void 0, void 0, function* () {
            // start another scene
            // and stop this one
            if (key && key !== this.__config.sceneKey) {
                this.stop();
                (_a = this.scenes.get(key)) === null || _a === void 0 ? void 0 : _a._start(data);
            }
            else {
                this._start(data);
            }
        });
    }
    _start(data) {
        var _a, _b;
        return __awaiter(this, void 0, void 0, function* () {
            yield ((_b = (_a = this).init) === null || _b === void 0 ? void 0 : _b.call(_a, data));
            yield this._preload();
            yield this._create();
            // console.log('start')
            this.renderer.setAnimationLoop(() => {
                this._update();
            });
            this._isRunning = true;
        });
    }
    restart(data) {
        return __awaiter(this, void 0, void 0, function* () {
            this.stop();
            this.start(this.__config.sceneKey, data);
        });
    }
    stop() {
        return __awaiter(this, void 0, void 0, function* () {
            this._isRunning = false;
            this.renderer.setAnimationLoop(null);
            // reset clock
            this.clock.start();
            for (let i = 0; i < this._deconstructorFunctions.length; i++) {
                yield this._deconstructorFunctions[i]();
            }
            this._deconstructorFunctions = [];
            // destroy all rigid bodies
            for (let i = this.physics.rigidBodies.length - 1; i >= 0; i--) {
                this.physics.destroy(this.physics.rigidBodies[i]);
            }
            // destroy all three objects
            for (let i = this.scene.children.length - 1; i >= 0; i--) {
                this.scene.remove(this.scene.children[i]);
            }
        });
    }
    setSize(width, height) {
        this.renderer.setSize(width, height);
        // @ts-ignore
        if (typeof this.camera.aspect !== 'undefined')
            this.camera.aspect = width / height;
        this.camera.updateProjectionMatrix();
    }
    setPixelRatio(ratio) {
        this.renderer.setPixelRatio(ratio);
    }
    // public get controls() {
    //   return {
    //     pointerDrag: (autoStart = true) => new PointerDrag(this.canvas, autoStart),
    //     pointerLock: (autoLock = true) => new PointerLock(this.canvas, autoLock),
    //     joystick: () => new JoyStick(),
    //     firstPerson: (target: ExtendedObject3D, config: FirstPersonControlsConfig = {}) =>
    //       new FirstPersonControls(this.camera, target, config),
    //     thirdPerson: (target: ExtendedObject3D, config: ThirdPersonControlsConfig = {}) =>
    //       new ThirdPersonControls(this.camera, target, config)
    //   }
    // }
    // @ts-ignore
    init(data = {}) { }
    preload() { }
    create() { }
    update(_time, _delta) { }
    _preload() {
        var _a, _b;
        return __awaiter(this, void 0, void 0, function* () {
            yield ((_b = (_a = this).preload) === null || _b === void 0 ? void 0 : _b.call(_a));
        });
    }
    _create() {
        var _a, _b;
        return __awaiter(this, void 0, void 0, function* () {
            yield ((_b = (_a = this).create) === null || _b === void 0 ? void 0 : _b.call(_a));
        });
    }
    _update() {
        var _a, _b, _c, _d;
        const delta = this.clock.getDelta() * 1000;
        const time = this.clock.getElapsedTime();
        (_b = (_a = this).update) === null || _b === void 0 ? void 0 : _b.call(_a, parseFloat(time.toFixed(3)), parseInt(delta.toString()));
        (_c = this.physics) === null || _c === void 0 ? void 0 : _c.update(delta);
        (_d = this.physics) === null || _d === void 0 ? void 0 : _d.updateDebugger();
        this.animationMixers.update(delta);
        if (this.composer)
            this.composer.render();
        else
            this.renderer.render(this.scene, this.camera);
    }
}
exports.Scene3D = Scene3D;
//# sourceMappingURL=scene3d.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/collisionEvents.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/collisionEvents.js ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CollisionEvents = void 0;
const eventemitter3_1 = __webpack_require__(/*! eventemitter3 */ "./node_modules/eventemitter3/index.js");
class CollisionEvents extends eventemitter3_1.EventEmitter {
    addCollider(object1, object2, eventCallback) {
        if (!object1.body || !object2.body)
            return;
        object1.body.checkCollisions = true;
        object2.body.checkCollisions = true;
        this.on('collision', (data) => {
            var _a, _b;
            const { bodies, event } = data;
            if (((_a = bodies[0]) === null || _a === void 0 ? void 0 : _a.name) && ((_b = bodies[1]) === null || _b === void 0 ? void 0 : _b.name) && (object1 === null || object1 === void 0 ? void 0 : object1.name) && (object2 === null || object2 === void 0 ? void 0 : object2.name)) {
                if (bodies[0].name === object1.name && bodies[1].name === object2.name)
                    eventCallback(event);
                else if (bodies[1].name === object1.name && bodies[0].name === object2.name)
                    eventCallback(event);
            }
        });
    }
}
exports.CollisionEvents = CollisionEvents;
//# sourceMappingURL=collisionEvents.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/constraints.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/constraints.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */
Object.defineProperty(exports, "__esModule", ({ value: true }));
class Constraints {
    constructor(worldTransform, physicsWorld) {
        this.worldTransform = worldTransform;
        this.physicsWorld = physicsWorld;
        this.tmpBtVector3 = new Ammo.btVector3();
    }
    toAmmoV3(v, d = 0) {
        return new Ammo.btVector3(typeof (v === null || v === void 0 ? void 0 : v.x) !== 'undefined' ? v.x : d, typeof (v === null || v === void 0 ? void 0 : v.y) !== 'undefined' ? v.y : d, typeof (v === null || v === void 0 ? void 0 : v.z) !== 'undefined' ? v.z : d);
    }
    get addConstraints() {
        return {
            lock: (bodyA, bodyB, disableCollisionsBetweenLinkedBodies) => this.lock(bodyA, bodyB, disableCollisionsBetweenLinkedBodies),
            fixed: (bodyA, bodyB, disableCollisionsBetweenLinkedBodies) => this.fixed(bodyA, bodyB, disableCollisionsBetweenLinkedBodies),
            pointToPoint: (bodyA, bodyB, config, disableCollisionsBetweenLinkedBodies) => this.pointToPoint(bodyA, bodyB, config, disableCollisionsBetweenLinkedBodies),
            hinge: (bodyA, bodyB, config, disableCollisionsBetweenLinkedBodies) => this.hinge(bodyA, bodyB, config, disableCollisionsBetweenLinkedBodies),
            slider: (bodyA, bodyB, config = {}, disableCollisionsBetweenLinkedBodies) => this.slider(bodyA, bodyB, config, disableCollisionsBetweenLinkedBodies),
            spring: (bodyA, bodyB, config = {}, disableCollisionsBetweenLinkedBodies) => this.spring(bodyA, bodyB, config, disableCollisionsBetweenLinkedBodies),
            coneTwist: (bodyA, bodyB, config = { frameA: {}, frameB: {} }, disableCollisionsBetweenLinkedBodies) => this.coneTwist(bodyA, bodyB, config, disableCollisionsBetweenLinkedBodies),
            dof: (bodyA, bodyB, config, disableCollisionsBetweenLinkedBodies) => this.dof(bodyA, bodyB, config, disableCollisionsBetweenLinkedBodies)
        };
    }
    getTransform(bodyA, bodyB, offset = { x: 0, y: 0, z: 0 }, center = false) {
        // @ts-ignore
        offset = Object.assign({ x: 0, y: 0, z: 0 }, offset);
        const centerVector = (v1, v2) => {
            var dx = (v1.x() - v2.x()) / 2 + offset.x;
            var dy = (v1.y() - v2.y()) / 2 + offset.y;
            var dz = (v1.z() - v2.z()) / 2 + offset.z;
            return new Ammo.btVector3(dx, dy, dz);
        };
        const transformB = new Ammo.btTransform();
        transformB.setIdentity();
        if (!center) {
            // offset
            transformB.setOrigin(new Ammo.btVector3(offset.x, offset.y, offset.z));
            const transformA = bodyA
                .getCenterOfMassTransform()
                .inverse()
                .op_mul(bodyB.getWorldTransform())
                .op_mul(transformB);
            return { transformA: transformA, transformB: transformB };
        }
        else {
            const center = centerVector(bodyA.getWorldTransform().getOrigin(), bodyB.getWorldTransform().getOrigin());
            const transformB = new Ammo.btTransform();
            transformB.setIdentity();
            transformB.setOrigin(center);
            const transformA = bodyA
                .getCenterOfMassTransform()
                .inverse()
                .op_mul(bodyB.getWorldTransform());
            transformA.op_mul(transformB);
            return { transformA: transformA, transformB: transformB };
        }
    }
    lock(bodyA, bodyB, disableCollisionsBetweenLinkedBodies = true) {
        const zero = { x: 0, y: 0, z: 0 };
        return this.dof(bodyA, bodyB, { angularLowerLimit: zero, angularUpperLimit: zero }, disableCollisionsBetweenLinkedBodies);
    }
    fixed(bodyA, bodyB, disableCollisionsBetweenLinkedBodies = true) {
        const transform = this.getTransform(bodyA.ammo, bodyB.ammo);
        transform.transformA.setRotation(bodyA.ammo.getWorldTransform().getRotation());
        transform.transformB.setRotation(bodyB.ammo.getWorldTransform().getRotation());
        const constraint = new Ammo.btFixedConstraint(bodyA.ammo, bodyB.ammo, transform.transformA, transform.transformB);
        this.physicsWorld.addConstraint(constraint, disableCollisionsBetweenLinkedBodies);
        return constraint;
    }
    pointToPoint(bodyA, bodyB, config = {}, disableCollisionsBetweenLinkedBodies = true) {
        const { pivotA, pivotB } = config;
        const pivotV3 = new Ammo.btVector3((pivotA === null || pivotA === void 0 ? void 0 : pivotA.x) || 0, (pivotA === null || pivotA === void 0 ? void 0 : pivotA.y) || 0, (pivotA === null || pivotA === void 0 ? void 0 : pivotA.z) || 0);
        const targetPivotV3 = new Ammo.btVector3((pivotB === null || pivotB === void 0 ? void 0 : pivotB.x) || 0, (pivotB === null || pivotB === void 0 ? void 0 : pivotB.y) || 0, (pivotB === null || pivotB === void 0 ? void 0 : pivotB.z) || 0);
        const constraint = new Ammo.btPoint2PointConstraint(bodyA.ammo, bodyB.ammo, pivotV3, targetPivotV3);
        this.physicsWorld.addConstraint(constraint, disableCollisionsBetweenLinkedBodies);
        return constraint;
    }
    hinge(bodyA, bodyB, config = {}, disableCollisionsBetweenLinkedBodies = true) {
        const { pivotA, pivotB, axisA, axisB } = config;
        const pivotV3 = new Ammo.btVector3((pivotA === null || pivotA === void 0 ? void 0 : pivotA.x) || 0, (pivotA === null || pivotA === void 0 ? void 0 : pivotA.y) || 0, (pivotA === null || pivotA === void 0 ? void 0 : pivotA.z) || 0);
        const targetPivotV3 = new Ammo.btVector3((pivotB === null || pivotB === void 0 ? void 0 : pivotB.x) || 0, (pivotB === null || pivotB === void 0 ? void 0 : pivotB.y) || 0, (pivotB === null || pivotB === void 0 ? void 0 : pivotB.z) || 0);
        const axisV3 = new Ammo.btVector3((axisA === null || axisA === void 0 ? void 0 : axisA.x) || 0, (axisA === null || axisA === void 0 ? void 0 : axisA.y) || 0, (axisA === null || axisA === void 0 ? void 0 : axisA.z) || 0);
        const targetAxisV3 = new Ammo.btVector3((axisB === null || axisB === void 0 ? void 0 : axisB.x) || 0, (axisB === null || axisB === void 0 ? void 0 : axisB.y) || 0, (axisB === null || axisB === void 0 ? void 0 : axisB.z) || 0);
        const constraint = new Ammo.btHingeConstraint(bodyA.ammo, bodyB.ammo, pivotV3, targetPivotV3, axisV3, targetAxisV3, true);
        this.physicsWorld.addConstraint(constraint, disableCollisionsBetweenLinkedBodies);
        return constraint;
    }
    // https://pybullet.org/Bullet/phpBB3/viewtopic.php?f=9&t=12690&p=42152&hilit=btSliderConstraint#p42152
    slider(bodyA, bodyB, config = {}, disableCollisionsBetweenLinkedBodies = true) {
        const transform = this.getTransform(bodyA.ammo, bodyB.ammo);
        const { frameA = {}, frameB = {}, linearLowerLimit: lll = 0, linearUpperLimit: lul = 0, angularLowerLimit: all = 0, angularUpperLimit: aul = 0 } = config;
        const rotationA = transform.transformA.getRotation();
        rotationA.setEulerZYX(frameA.x || 0, frameA.y || 0, frameA.z || 0);
        transform.transformA.setRotation(rotationA);
        const rotationB = transform.transformB.getRotation();
        rotationB.setEulerZYX(frameB.x || 0, frameB.y || 0, frameB.z || 0);
        transform.transformB.setRotation(rotationB);
        const constraint = new Ammo.btSliderConstraint(bodyA.ammo, bodyB.ammo, transform.transformA, transform.transformB, true);
        constraint.setLowerLinLimit(lll);
        constraint.setUpperLinLimit(lul);
        constraint.setLowerAngLimit(all);
        constraint.setUpperAngLimit(aul);
        this.physicsWorld.addConstraint(constraint, disableCollisionsBetweenLinkedBodies);
        return constraint;
    }
    spring(bodyA, bodyB, config = {}, disableCollisionsBetweenLinkedBodies = true) {
        const { stiffness = 50, damping = 0.01, angularLock = false, linearLowerLimit: lll = {}, linearUpperLimit: lul = {}, angularLowerLimit: all = {}, angularUpperLimit: aul = {}, offset = {}, center = false, enableSpring = true } = config;
        const off = Object.assign({ x: 0, y: 0, z: 0 }, offset);
        const transform = this.getTransform(bodyA.ammo, bodyB.ammo, off, center);
        const constraint = new Ammo.btGeneric6DofSpringConstraint(bodyA.ammo, bodyB.ammo, transform.transformA, transform.transformB, true);
        this.tmpBtVector3.setValue(lll.x || 0, lll.y || 0, lll.z || 0);
        constraint.setLinearLowerLimit(this.tmpBtVector3);
        this.tmpBtVector3.setValue(lul.x || 0, lul.y || 0, lul.z || 0);
        constraint.setLinearUpperLimit(this.tmpBtVector3);
        if (angularLock) {
            this.tmpBtVector3.setValue(0, 0, 0);
            constraint.setAngularLowerLimit(this.tmpBtVector3);
            constraint.setAngularUpperLimit(this.tmpBtVector3);
        }
        else {
            console.log(all, aul);
            constraint.setAngularLowerLimit(this.toAmmoV3(all, -Math.PI));
            constraint.setAngularUpperLimit(this.toAmmoV3(aul, Math.PI));
        }
        for (let i = 0; i < 3; i++) {
            constraint.enableSpring(i, enableSpring);
            constraint.setStiffness(i, stiffness);
            constraint.setDamping(i, damping);
        }
        // I have no idea what setEquilibriumPoint does :/
        // constraint.setEquilibriumPoint()
        this.physicsWorld.addConstraint(constraint, disableCollisionsBetweenLinkedBodies);
        return constraint;
    }
    coneTwist(bodyA, bodyB, config, disableCollisionsBetweenLinkedBodies = true) {
        const { frameA, frameB } = config;
        const rbAFrame = new Ammo.btTransform();
        rbAFrame.setIdentity();
        rbAFrame.getOrigin().setValue((frameA === null || frameA === void 0 ? void 0 : frameA.x) || 0, (frameA === null || frameA === void 0 ? void 0 : frameA.y) || 0, (frameA === null || frameA === void 0 ? void 0 : frameA.z) || 0);
        const rbBFrame = new Ammo.btTransform();
        rbBFrame.setIdentity();
        rbBFrame.getOrigin().setValue((frameB === null || frameB === void 0 ? void 0 : frameB.x) || 0, (frameB === null || frameB === void 0 ? void 0 : frameB.y) || 0, (frameB === null || frameB === void 0 ? void 0 : frameB.z) || 0);
        const t = this.getTransform(bodyA.ammo, bodyB.ammo);
        const constraint = new Ammo.btConeTwistConstraint(bodyB.ammo, bodyA.ammo, rbAFrame, rbBFrame);
        // does not work at all :/
        // constraint.setLimit(-Math.PI / 50, Math.PI / 50)
        constraint.setAngularOnly(true);
        this.physicsWorld.addConstraint(constraint, disableCollisionsBetweenLinkedBodies);
        return constraint;
    }
    dof(bodyA, bodyB, config = {}, disableCollisionsBetweenLinkedBodies = true) {
        const { offset, center = false } = config;
        const off = Object.assign({ x: 0, y: 0, z: 0 }, offset);
        const transform = this.getTransform(bodyA.ammo, bodyB.ammo, off, center);
        const constraint = new Ammo.btGeneric6DofConstraint(bodyA.ammo, bodyB.ammo, transform.transformA, transform.transformB, true);
        const { linearLowerLimit, linearUpperLimit, angularLowerLimit, angularUpperLimit } = config;
        const lll = this.toAmmoV3(linearLowerLimit);
        const lul = this.toAmmoV3(linearUpperLimit);
        const all = this.toAmmoV3(angularLowerLimit, -Math.PI);
        const aul = this.toAmmoV3(angularUpperLimit, Math.PI);
        constraint.setLinearLowerLimit(lll);
        constraint.setLinearUpperLimit(lul);
        constraint.setAngularLowerLimit(all);
        constraint.setAngularUpperLimit(aul);
        Ammo.destroy(lll);
        Ammo.destroy(lul);
        Ammo.destroy(all);
        Ammo.destroy(aul);
        this.physicsWorld.addConstraint(constraint, disableCollisionsBetweenLinkedBodies);
        return constraint;
    }
}
exports.default = Constraints;
//# sourceMappingURL=constraints.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/convexObjectBreaker.js":
/*!***********************************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/convexObjectBreaker.js ***!
  \***********************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

/**
 * Copied from three.js examples and added a fix
 */
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ConvexObjectBreaker = void 0;
/**
 * @author yomboprime https://github.com/yomboprime
 *
 * @fileoverview This class can be used to subdivide a convex Geometry object into pieces.
 *
 * Usage:
 *
 * Use the function prepareBreakableObject to prepare a Mesh object to be broken.
 *
 * Then, call the various functions to subdivide the object (subdivideByImpact, cutByPlane)
 *
 * Sub-objects that are product of subdivision don't need prepareBreakableObject to be called on them.
 *
 * Requisites for the object:
 *
 *  - Mesh object must have a BufferGeometry (not Geometry) and a Material
 *
 *  - Vertex normals must be planar (not smoothed)
 *
 *  - The geometry must be convex (this is not checked in the library). You can create convex
 *  geometries with ConvexBufferGeometry. The BoxBufferGeometry, SphereBufferGeometry and other convex primitives
 *  can also be used.
 *
 * Note: This lib adds member variables to object's userData member (see prepareBreakableObject function)
 * Use with caution and read the code when using with other libs.
 *
 * @param {double} minSizeForBreak Min size a debris can have to break.
 * @param {double} smallDelta Max distance to consider that a point belongs to a plane.
 *
 */
const index_1 = __webpack_require__(/*! @enable3d/three-wrapper/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
const index_2 = __webpack_require__(/*! @enable3d/three-wrapper/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
const logger_1 = __webpack_require__(/*! @enable3d/common/dist/logger */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/logger.js");
const ConvexObjectBreaker = function (minSizeForBreak, smallDelta) {
    // @ts-ignore
    this.minSizeForBreak = minSizeForBreak || 1.4;
    // @ts-ignore
    this.smallDelta = smallDelta || 0.0001;
    // @ts-ignore
    this.tempLine1 = new index_1.Line3();
    // @ts-ignore
    this.tempPlane1 = new index_1.Plane();
    // @ts-ignore
    this.tempPlane2 = new index_1.Plane();
    // @ts-ignore
    this.tempPlane_Cut = new index_1.Plane();
    // @ts-ignore
    this.tempCM1 = new index_1.Vector3();
    // @ts-ignore
    this.tempCM2 = new index_1.Vector3();
    // @ts-ignore
    this.tempVector3 = new index_1.Vector3();
    // @ts-ignore
    this.tempVector3_2 = new index_1.Vector3();
    // @ts-ignore
    this.tempVector3_3 = new index_1.Vector3();
    // @ts-ignore
    this.tempVector3_P0 = new index_1.Vector3();
    // @ts-ignore
    this.tempVector3_P1 = new index_1.Vector3();
    // @ts-ignore
    this.tempVector3_P2 = new index_1.Vector3();
    // @ts-ignore
    this.tempVector3_N0 = new index_1.Vector3();
    // @ts-ignore
    this.tempVector3_N1 = new index_1.Vector3();
    // @ts-ignore
    this.tempVector3_AB = new index_1.Vector3();
    // @ts-ignore
    this.tempVector3_CB = new index_1.Vector3();
    // @ts-ignore
    this.tempResultObjects = { object1: null, object2: null };
    // @ts-ignore
    this.segments = [];
    var n = 30 * 30;
    // @ts-ignore
    for (var i = 0; i < n; i++)
        this.segments[i] = false;
};
exports.ConvexObjectBreaker = ConvexObjectBreaker;
ConvexObjectBreaker.prototype = {
    constructor: ConvexObjectBreaker,
    prepareBreakableObject: function (object, mass, velocity, angularVelocity, breakable) {
        // object is a Object3d (normally a Mesh), must have a BufferGeometry, and it must be convex.
        // Its material property is propagated to its children (sub-pieces)
        // mass must be > 0
        if (!object.geometry.isBufferGeometry) {
            console.error('THREE.ConvexObjectBreaker.prepareBreakableObject(): Parameter object must have a BufferGeometry.');
        }
        object.userData.ammoPhysicsData = {}; // initialise our new data container - would be best to move this to ExtendedObject and not rely on userData at all for best compatibility
        var ammoPhysicsData = object.userData.ammoPhysicsData; // get reference to it
        ammoPhysicsData.mass = mass;
        ammoPhysicsData.velocity = velocity.clone();
        ammoPhysicsData.angularVelocity = angularVelocity.clone();
        ammoPhysicsData.breakable = breakable;
    },
    /*
     * @param {int} maxRadialIterations Iterations for radial cuts.
     * @param {int} maxRandomIterations Max random iterations for not-radial cuts
     *
     * Returns the array of pieces
     */
    subdivideByImpact: function (object, pointOfImpact, normal, maxRadialIterations, maxRandomIterations) {
        var debris = [];
        var tempPlane1 = this.tempPlane1;
        var tempPlane2 = this.tempPlane2;
        this.tempVector3.addVectors(pointOfImpact, normal);
        tempPlane1.setFromCoplanarPoints(pointOfImpact, object.position, this.tempVector3);
        var maxTotalIterations = maxRandomIterations + maxRadialIterations;
        var scope = this;
        function subdivideRadial(subObject, startAngle, endAngle, numIterations) {
            if (Math.random() < numIterations * 0.05 || numIterations > maxTotalIterations) {
                debris.push(subObject);
                return;
            }
            var angle = Math.PI;
            if (numIterations === 0) {
                tempPlane2.normal.copy(tempPlane1.normal);
                tempPlane2.constant = tempPlane1.constant;
            }
            else {
                if (numIterations <= maxRadialIterations) {
                    angle = (endAngle - startAngle) * (0.2 + 0.6 * Math.random()) + startAngle;
                    // Rotate tempPlane2 at impact point around normal axis and the angle
                    scope.tempVector3_2.copy(object.position).sub(pointOfImpact).applyAxisAngle(normal, angle).add(pointOfImpact);
                    tempPlane2.setFromCoplanarPoints(pointOfImpact, scope.tempVector3, scope.tempVector3_2);
                }
                else {
                    angle = (0.5 * (numIterations & 1) + 0.2 * (2 - Math.random())) * Math.PI;
                    // Rotate tempPlane2 at object position around normal axis and the angle
                    scope.tempVector3_2
                        .copy(pointOfImpact)
                        .sub(subObject.position)
                        .applyAxisAngle(normal, angle)
                        .add(subObject.position);
                    scope.tempVector3_3.copy(normal).add(subObject.position);
                    tempPlane2.setFromCoplanarPoints(subObject.position, scope.tempVector3_3, scope.tempVector3_2);
                }
            }
            // Perform the cut
            scope.cutByPlane(subObject, tempPlane2, scope.tempResultObjects);
            var obj1 = scope.tempResultObjects.object1;
            var obj2 = scope.tempResultObjects.object2;
            if (obj1) {
                subdivideRadial(obj1, startAngle, angle, numIterations + 1);
            }
            if (obj2) {
                subdivideRadial(obj2, angle, endAngle, numIterations + 1);
            }
        }
        subdivideRadial(object, 0, 2 * Math.PI, 0);
        return debris;
    },
    cutByPlane: function (object, plane, output) {
        // Returns breakable objects in output.object1 and output.object2 members, the resulting 2 pieces of the cut.
        // object2 can be null if the plane doesn't cut the object.
        // object1 can be null only in case of internal error
        // Returned value is number of pieces, 0 for error.
        var geometry = object.geometry;
        var coords = geometry.attributes.position.array;
        var normals = geometry.attributes.normal.array;
        var numPoints = coords.length / 3;
        var numFaces = numPoints / 3;
        var indices = geometry.getIndex();
        if (indices) {
            indices = indices.array;
            numFaces = indices.length / 3;
        }
        function getVertexIndex(faceIdx, vert) {
            // vert = 0, 1 or 2.
            var idx = faceIdx * 3 + vert;
            return indices ? indices[idx] : idx;
        }
        var points1 = [];
        var points2 = [];
        var delta = this.smallDelta;
        // Reset segments mark
        var numPointPairs = numPoints * numPoints;
        for (var i = 0; i < numPointPairs; i++)
            this.segments[i] = false;
        var p0 = this.tempVector3_P0;
        var p1 = this.tempVector3_P1;
        var n0 = this.tempVector3_N0;
        var n1 = this.tempVector3_N1;
        // Iterate through the faces to mark edges shared by coplanar faces
        for (var i = 0; i < numFaces - 1; i++) {
            var a1 = getVertexIndex(i, 0);
            var b1 = getVertexIndex(i, 1);
            var c1 = getVertexIndex(i, 2);
            // Assuming all 3 vertices have the same normal
            n0.set(normals[a1], normals[a1] + 1, normals[a1] + 2);
            for (var j = i + 1; j < numFaces; j++) {
                var a2 = getVertexIndex(j, 0);
                var b2 = getVertexIndex(j, 1);
                var c2 = getVertexIndex(j, 2);
                // Assuming all 3 vertices have the same normal
                n1.set(normals[a2], normals[a2] + 1, normals[a2] + 2);
                var coplanar = 1 - n0.dot(n1) < delta;
                if (coplanar) {
                    if (a1 === a2 || a1 === b2 || a1 === c2) {
                        if (b1 === a2 || b1 === b2 || b1 === c2) {
                            this.segments[a1 * numPoints + b1] = true;
                            this.segments[b1 * numPoints + a1] = true;
                        }
                        else {
                            this.segments[c1 * numPoints + a1] = true;
                            this.segments[a1 * numPoints + c1] = true;
                        }
                    }
                    else if (b1 === a2 || b1 === b2 || b1 === c2) {
                        this.segments[c1 * numPoints + b1] = true;
                        this.segments[b1 * numPoints + c1] = true;
                    }
                }
            }
        }
        // Transform the plane to object local space
        var localPlane = this.tempPlane_Cut;
        object.updateMatrix();
        ConvexObjectBreaker.transformPlaneToLocalSpace(plane, object.matrix, localPlane);
        // Iterate through the faces adding points to both pieces
        for (var i = 0; i < numFaces; i++) {
            var va = getVertexIndex(i, 0);
            var vb = getVertexIndex(i, 1);
            var vc = getVertexIndex(i, 2);
            for (var segment = 0; segment < 3; segment++) {
                var i0 = segment === 0 ? va : segment === 1 ? vb : vc;
                var i1 = segment === 0 ? vb : segment === 1 ? vc : va;
                var segmentState = this.segments[i0 * numPoints + i1];
                if (segmentState)
                    continue; // The segment already has been processed in another face
                // Mark segment as processed (also inverted segment)
                this.segments[i0 * numPoints + i1] = true;
                this.segments[i1 * numPoints + i0] = true;
                p0.set(coords[3 * i0], coords[3 * i0 + 1], coords[3 * i0 + 2]);
                p1.set(coords[3 * i1], coords[3 * i1 + 1], coords[3 * i1 + 2]);
                // mark: 1 for negative side, 2 for positive side, 3 for coplanar point
                var mark0 = 0;
                var d = localPlane.distanceToPoint(p0);
                if (d > delta) {
                    mark0 = 2;
                    points2.push(p0.clone());
                }
                else if (d < -delta) {
                    mark0 = 1;
                    points1.push(p0.clone());
                }
                else {
                    mark0 = 3;
                    points1.push(p0.clone());
                    points2.push(p0.clone());
                }
                // mark: 1 for negative side, 2 for positive side, 3 for coplanar point
                var mark1 = 0;
                var d = localPlane.distanceToPoint(p1);
                if (d > delta) {
                    mark1 = 2;
                    points2.push(p1.clone());
                }
                else if (d < -delta) {
                    mark1 = 1;
                    points1.push(p1.clone());
                }
                else {
                    mark1 = 3;
                    points1.push(p1.clone());
                    points2.push(p1.clone());
                }
                if ((mark0 === 1 && mark1 === 2) || (mark0 === 2 && mark1 === 1)) {
                    // Intersection of segment with the plane
                    this.tempLine1.start.copy(p0);
                    this.tempLine1.end.copy(p1);
                    var intersection = new index_1.Vector3();
                    intersection = localPlane.intersectLine(this.tempLine1, intersection);
                    if (intersection === undefined) {
                        // Shouldn't happen
                        console.error('Internal error: segment does not intersect plane.');
                        output.segmentedObject1 = null;
                        output.segmentedObject2 = null;
                        return 0;
                    }
                    points1.push(intersection);
                    points2.push(intersection.clone());
                }
            }
        }
        // Calculate debris mass (very fast and imprecise):
        var newMass = object.userData.ammoPhysicsData.mass * 0.5;
        // Calculate debris Center of Mass (again fast and imprecise)
        this.tempCM1.set(0, 0, 0);
        var radius1 = 0;
        var numPoints1 = points1.length;
        if (numPoints1 > 0) {
            for (var i = 0; i < numPoints1; i++)
                this.tempCM1.add(points1[i]);
            this.tempCM1.divideScalar(numPoints1);
            for (var i = 0; i < numPoints1; i++) {
                var p = points1[i];
                p.sub(this.tempCM1);
                radius1 = Math.max(radius1, p.x, p.y, p.z);
            }
            this.tempCM1.add(object.position);
        }
        this.tempCM2.set(0, 0, 0);
        var radius2 = 0;
        var numPoints2 = points2.length;
        if (numPoints2 > 0) {
            for (var i = 0; i < numPoints2; i++)
                this.tempCM2.add(points2[i]);
            this.tempCM2.divideScalar(numPoints2);
            for (var i = 0; i < numPoints2; i++) {
                var p = points2[i];
                p.sub(this.tempCM2);
                radius2 = Math.max(radius2, p.x, p.y, p.z);
            }
            this.tempCM2.add(object.position);
        }
        var object1 = null;
        var object2 = null;
        var numObjects = 0;
        /**
         * MOD: Wrapped in try catch block to avoid errors
         */
        if (numPoints1 > 4) {
            try {
                object1 = new index_1.Mesh(new index_2.ConvexBufferGeometry(points1), object.material);
                object1.position.copy(this.tempCM1);
                object1.quaternion.copy(object.quaternion);
                object1.userData = object.userData;
                this.prepareBreakableObject(object1, newMass, object.userData.ammoPhysicsData.velocity, object.userData.ammoPhysicsData.angularVelocity, 2 * radius1 > this.minSizeForBreak);
                numObjects++;
            }
            catch (error) {
                logger_1.default('Error in ConvexObjectBreaker.ts');
                logger_1.default(error);
            }
        }
        if (numPoints2 > 4) {
            try {
                object2 = new index_1.Mesh(new index_2.ConvexBufferGeometry(points2), object.material);
                object2.position.copy(this.tempCM2);
                object2.quaternion.copy(object.quaternion);
                object2.userData = object.userData;
                this.prepareBreakableObject(object2, newMass, object.userData.ammoPhysicsData.velocity, object.userData.ammoPhysicsData.angularVelocity, 2 * radius2 > this.minSizeForBreak);
                numObjects++;
            }
            catch (error) {
                logger_1.default('Error in ConvexObjectBreaker.ts');
                logger_1.default(error);
            }
        }
        output.object1 = object1;
        output.object2 = object2;
        return numObjects;
    }
};
ConvexObjectBreaker.transformFreeVector = function (v, m) {
    // input:
    // vector interpreted as a free vector
    // THREE.Matrix4 orthogonal matrix (matrix without scale)
    var x = v.x, y = v.y, z = v.z;
    var e = m.elements;
    v.x = e[0] * x + e[4] * y + e[8] * z;
    v.y = e[1] * x + e[5] * y + e[9] * z;
    v.z = e[2] * x + e[6] * y + e[10] * z;
    return v;
};
ConvexObjectBreaker.transformFreeVectorInverse = function (v, m) {
    // input:
    // vector interpreted as a free vector
    // THREE.Matrix4 orthogonal matrix (matrix without scale)
    var x = v.x, y = v.y, z = v.z;
    var e = m.elements;
    v.x = e[0] * x + e[1] * y + e[2] * z;
    v.y = e[4] * x + e[5] * y + e[6] * z;
    v.z = e[8] * x + e[9] * y + e[10] * z;
    return v;
};
ConvexObjectBreaker.transformTiedVectorInverse = function (v, m) {
    // input:
    // vector interpreted as a tied (ordinary) vector
    // THREE.Matrix4 orthogonal matrix (matrix without scale)
    var x = v.x, y = v.y, z = v.z;
    var e = m.elements;
    v.x = e[0] * x + e[1] * y + e[2] * z - e[12];
    v.y = e[4] * x + e[5] * y + e[6] * z - e[13];
    v.z = e[8] * x + e[9] * y + e[10] * z - e[14];
    return v;
};
ConvexObjectBreaker.transformPlaneToLocalSpace = (function () {
    var v1 = new index_1.Vector3();
    return function transformPlaneToLocalSpace(plane, m, resultPlane) {
        resultPlane.normal.copy(plane.normal);
        resultPlane.constant = plane.constant;
        var referencePoint = ConvexObjectBreaker.transformTiedVectorInverse(plane.coplanarPoint(v1), m);
        ConvexObjectBreaker.transformFreeVectorInverse(resultPlane.normal, m);
        // recalculate constant (like in setFromNormalAndCoplanarPoint)
        resultPlane.constant = -referencePoint.dot(resultPlane.normal);
    };
})();
//# sourceMappingURL=convexObjectBreaker.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/debugDrawer.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/debugDrawer.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @description  This is a modified version of the original code from Kevin Lee
 */
Object.defineProperty(exports, "__esModule", ({ value: true }));
/**
 * @author       Kevin Lee (https://github.com/InfiniteLee)
 * @copyright    Copyright (c) 2019 Kevin Lee; Project Url: https://github.com/InfiniteLee/ammo-debug-drawer
 * @license      {@link https://github.com/InfiniteLee/ammo-debug-drawer/blob/master/LICENSE|MPL-2.0}
 */
const index_1 = __webpack_require__(/*! @enable3d/three-wrapper/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
const AmmoDebugConstants = {
    NoDebug: 0,
    DrawWireframe: 1,
    DrawAabb: 2,
    DrawFeaturesText: 4,
    DrawContactPoints: 8,
    NoDeactivation: 16,
    NoHelpText: 32,
    DrawText: 64,
    ProfileTimings: 128,
    EnableSatComparison: 256,
    DisableBulletLCP: 512,
    EnableCCD: 1024,
    DrawConstraints: 1 << 11,
    DrawConstraintLimits: 1 << 12,
    FastWireframe: 1 << 13,
    DrawNormals: 1 << 14,
    DrawOnTop: 1 << 15,
    MAX_DEBUG_DRAW_MODE: 0xffffffff
};
/**
 * An implementation of the btIDebugDraw interface in Ammo.js, for debug rendering of Ammo shapes
 */
class DebugDrawer {
    constructor(scene, world, options = {}) {
        this.scene = scene;
        this.world = world;
        this.options = options;
        this.debugDrawMode = options.debugDrawMode || AmmoDebugConstants.DrawWireframe;
        const drawOnTop = this.debugDrawMode & AmmoDebugConstants.DrawOnTop || false;
        const maxBufferSize = options.maxBufferSize || 1000000;
        this.geometry = new index_1.BufferGeometry();
        const vertices = new Float32Array(maxBufferSize * 3);
        const colors = new Float32Array(maxBufferSize * 3);
        /*
        I do not know the difference, just using the first one.
        export const StaticDrawUsage: Usage;
        export const DynamicDrawUsage: Usage;
        export const StreamDrawUsage: Usage;
        export const StaticReadUsage: Usage;
        export const DynamicReadUsage: Usage;
        export const StreamReadUsage: Usage;
        export const StaticCopyUsage: Usage;
        export const DynamicCopyUsage: Usage;
        export const StreamCopyUsage: Usage;
         */
        this.geometry.setAttribute('position', new index_1.BufferAttribute(vertices, 3).setUsage(index_1.StaticDrawUsage));
        this.geometry.setAttribute('color', new index_1.BufferAttribute(colors, 3).setUsage(index_1.StaticDrawUsage));
        this.index = 0;
        const material = new index_1.LineBasicMaterial({
            vertexColors: true,
            depthTest: !drawOnTop
        });
        this.mesh = new index_1.LineSegments(this.geometry, material);
        if (drawOnTop)
            this.mesh.renderOrder = 999;
        this.mesh.frustumCulled = false;
        this.enabled = false;
        this.debugDrawer = new Ammo.DebugDrawer();
        this.debugDrawer.drawLine = this.drawLine.bind(this);
        this.debugDrawer.drawContactPoint = this.drawContactPoint.bind(this);
        this.debugDrawer.reportErrorWarning = this.reportErrorWarning.bind(this);
        this.debugDrawer.draw3dText = this.draw3dText.bind(this);
        this.debugDrawer.setDebugMode = this.setDebugMode.bind(this);
        this.debugDrawer.getDebugMode = this.getDebugMode.bind(this);
        this.world.setDebugDrawer(this.debugDrawer);
    }
    enable() {
        this.enabled = true;
        this.scene.add(this.mesh);
    }
    disable() {
        this.enabled = false;
        this.scene.remove(this.mesh);
    }
    update() {
        if (!this.enabled) {
            return;
        }
        if (this.index != 0) {
            // @ts-ignore
            this.geometry.attributes.position.needsUpdate = true;
            // @ts-ignore
            this.geometry.attributes.color.needsUpdate = true;
        }
        this.index = 0;
        this.world.debugDrawWorld();
        this.geometry.setDrawRange(0, this.index);
    }
    drawLine(from, to, color) {
        // @ts-ignore
        const heap = Ammo.HEAPF32;
        const r = heap[(color + 0) / 4];
        const g = heap[(color + 4) / 4];
        const b = heap[(color + 8) / 4];
        const fromX = heap[(from + 0) / 4];
        const fromY = heap[(from + 4) / 4];
        const fromZ = heap[(from + 8) / 4];
        this.geometry.attributes.position.setXYZ(this.index, fromX, fromY, fromZ);
        this.geometry.attributes.color.setXYZ(this.index++, r, g, b);
        const toX = heap[(to + 0) / 4];
        const toY = heap[(to + 4) / 4];
        const toZ = heap[(to + 8) / 4];
        this.geometry.attributes.position.setXYZ(this.index, toX, toY, toZ);
        this.geometry.attributes.color.setXYZ(this.index++, r, g, b);
    }
    //TODO: figure out how to make lifeTime work
    drawContactPoint(pointOnB, normalOnB, distance, _lifeTime, color) {
        // @ts-ignore
        const heap = Ammo.HEAPF32;
        const r = heap[(color + 0) / 4];
        const g = heap[(color + 4) / 4];
        const b = heap[(color + 8) / 4];
        const x = heap[(pointOnB + 0) / 4];
        const y = heap[(pointOnB + 4) / 4];
        const z = heap[(pointOnB + 8) / 4];
        this.geometry.attributes.position.setXYZ(this.index, x, y, z);
        this.geometry.attributes.color.setXYZ(this.index++, r, g, b);
        const dx = heap[(normalOnB + 0) / 4] * distance;
        const dy = heap[(normalOnB + 4) / 4] * distance;
        const dz = heap[(normalOnB + 8) / 4] * distance;
        this.geometry.attributes.position.setXYZ(this.index, x + dx, y + dy, z + dz);
        this.geometry.attributes.color.setXYZ(this.index++, r, g, b);
    }
    reportErrorWarning(warningString) {
        if (Ammo.hasOwnProperty('Pointer_stringify')) {
            // @ts-ignore
            console.warn(Ammo.Pointer_stringify(warningString));
        }
        else if (!this.warnedOnce) {
            this.warnedOnce = true;
            console.warn("Cannot print warningString, please rebuild Ammo.js using 'debug' flag");
        }
    }
    draw3dText(_location, _textString) {
        //TODO
        console.warn('TODO: draw3dText');
    }
    setDebugMode(debugMode) {
        this.debugDrawMode = debugMode;
    }
    getDebugMode() {
        return this.debugDrawMode;
    }
}
exports.default = DebugDrawer;
//# sourceMappingURL=debugDrawer.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/index.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/index.js ***!
  \*********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";

var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __exportStar = (this && this.__exportStar) || function(m, exports) {
    for (var p in m) if (p !== "default" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
__webpack_require__(/*! @enable3d/common/dist/typesAmmo */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/typesAmmo.js");
__webpack_require__(/*! @enable3d/common/dist/typesCustom */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/typesCustom.js");
__exportStar(__webpack_require__(/*! ./physics */ "./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/physics.js"), exports);
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/lib/Clock.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/lib/Clock.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

/**
 * @author yandeu
 * @description Ported to TypeScript
 */
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Clock = void 0;
/**
 * @author alteredq / http://alteredqualia.com/
 */
/**
 * This is the Clock class THREE provides.
 */
class Clock {
    constructor(autoStart = true) {
        this.autoStart = autoStart !== undefined ? autoStart : true;
        this.startTime = 0;
        this.oldTime = 0;
        this.elapsedTime = 0;
        this.running = false;
    }
    start() {
        this.startTime = (typeof performance === 'undefined' ? Date : performance).now(); // see #10732
        this.oldTime = this.startTime;
        this.elapsedTime = 0;
        this.running = true;
    }
    stop() {
        this.getElapsedTime();
        this.running = false;
        this.autoStart = false;
    }
    getElapsedTime() {
        this.getDelta();
        return this.elapsedTime;
    }
    getDelta() {
        let diff = 0;
        if (this.autoStart && !this.running) {
            this.start();
            return 0;
        }
        if (this.running) {
            let newTime = (typeof performance === 'undefined' ? Date : performance).now();
            diff = (newTime - this.oldTime) / 1000;
            this.oldTime = newTime;
            this.elapsedTime += diff;
        }
        return diff;
    }
}
exports.Clock = Clock;
//# sourceMappingURL=Clock.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/physics.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/physics.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.AmmoPhysics = exports.Clock = exports.Types = exports.AllHitsRaycaster = exports.ClosestRaycaster = exports.PhysicsLoader = exports.ExtendedGroup = exports.ExtendedMesh = exports.ExtendedObject3D = void 0;
const logger_1 = __webpack_require__(/*! @enable3d/common/dist/logger */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/logger.js");
const physicsBody_1 = __webpack_require__(/*! @enable3d/common/dist/physicsBody */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/physicsBody.js");
const extendedObject3D_1 = __webpack_require__(/*! @enable3d/common/dist/extendedObject3D */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/extendedObject3D.js");
Object.defineProperty(exports, "ExtendedObject3D", ({ enumerable: true, get: function () { return extendedObject3D_1.ExtendedObject3D; } }));
const extendedMesh_1 = __webpack_require__(/*! @enable3d/common/dist/extendedMesh */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/extendedMesh.js");
Object.defineProperty(exports, "ExtendedMesh", ({ enumerable: true, get: function () { return extendedMesh_1.ExtendedMesh; } }));
const extendedGroup_1 = __webpack_require__(/*! @enable3d/common/dist/extendedGroup */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/extendedGroup.js");
Object.defineProperty(exports, "ExtendedGroup", ({ enumerable: true, get: function () { return extendedGroup_1.ExtendedGroup; } }));
const shapes_1 = __webpack_require__(/*! ./shapes */ "./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/shapes.js");
const constraints_1 = __webpack_require__(/*! ./constraints */ "./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/constraints.js");
const eventemitter3_1 = __webpack_require__(/*! eventemitter3 */ "./node_modules/eventemitter3/index.js");
const index_1 = __webpack_require__(/*! @enable3d/three-wrapper/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
const three_to_ammo_1 = __webpack_require__(/*! ./three-to-ammo */ "./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/three-to-ammo.js");
const torusShape_1 = __webpack_require__(/*! ./torusShape */ "./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/torusShape.js");
const factories_1 = __webpack_require__(/*! @enable3d/common/dist/factories */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/factories.js");
const collisionEvents_1 = __webpack_require__(/*! ./collisionEvents */ "./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/collisionEvents.js");
const debugDrawer_1 = __webpack_require__(/*! ./debugDrawer */ "./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/debugDrawer.js");
const convexObjectBreaker_1 = __webpack_require__(/*! ./convexObjectBreaker */ "./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/convexObjectBreaker.js");
const physicsLoader_1 = __webpack_require__(/*! @enable3d/common/dist/physicsLoader */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/physicsLoader.js");
Object.defineProperty(exports, "PhysicsLoader", ({ enumerable: true, get: function () { return physicsLoader_1.PhysicsLoader; } }));
const defaultMaterial_1 = __webpack_require__(/*! @enable3d/common/dist/defaultMaterial */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/defaultMaterial.js");
const Types = __webpack_require__(/*! @enable3d/common/dist/types */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/types.js");
exports.Types = Types;
const raycaster_1 = __webpack_require__(/*! ./raycaster/raycaster */ "./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/raycaster/raycaster.js");
Object.defineProperty(exports, "ClosestRaycaster", ({ enumerable: true, get: function () { return raycaster_1.ClosestRaycaster; } }));
Object.defineProperty(exports, "AllHitsRaycaster", ({ enumerable: true, get: function () { return raycaster_1.AllHitsRaycaster; } }));
// Export THREE.Clock
var Clock_1 = __webpack_require__(/*! ./lib/Clock */ "./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/lib/Clock.js");
Object.defineProperty(exports, "Clock", ({ enumerable: true, get: function () { return Clock_1.Clock; } }));
class AmmoPhysics extends eventemitter3_1.EventEmitter {
    constructor(scene, config = {}) {
        super();
        this.scene = scene;
        this.config = config;
        this.rigidBodies = [];
        this.earlierDetectedCollisions = [];
        this.complexShapes = ['plane', 'hull', 'hacd', 'vhacd', 'convexMesh', 'concaveMesh'];
        this.gravity = config.gravity || { x: 0, y: -9.81, z: 0 };
        this.isHeadless = scene === 'headless' ? true : false;
        this.tmpEuler = new index_1.Euler();
        this.tmpQuaternion = new index_1.Quaternion();
        this.tmpVector3 = new index_1.Vector3();
        this.tmpVector3a = new index_1.Vector3();
        this.tmpMatrix4 = new index_1.Matrix4();
        this.tmpMatrix4a = new index_1.Matrix4();
        this.tmpBtVector3 = new Ammo.btVector3();
        this.tmpBtQuaternion = new Ammo.btQuaternion(0, 0, 0, 1);
        this.emptyV3 = new index_1.Vector3();
        this.impactPoint = new index_1.Vector3();
        this.impactNormal = new index_1.Vector3();
        if (scene !== 'headless') {
            this.defaultMaterial = new defaultMaterial_1.default();
            // const info = `Ammo.js physics provided by enable3d`
            // console.log(
            //   `%c %c %c %c %c ${info} %c https://enable3d.io/`,
            //   'background: #ff0000',
            //   'background: #ffff00',
            //   'background: #00ff00',
            //   'background: #00ffff',
            //   'color: #fff; background: #000000;',
            //   'background: none'
            // )
        }
        this.start();
    }
    /** @deprecated Use worldTransform instead of tmpTrans. */
    get tmpTrans() {
        console.warn('Use worldTransform instead of tmpTrans.');
        return this.worldTransform;
    }
    /** @deprecated Use worldTransform instead of tmpTrans. */
    set tmpTrans(transform) {
        console.warn('Use worldTransform instead of tmpTrans.');
        this.worldTransform = transform;
    }
    /** Destroys a physics body. */
    destroy(body) {
        var _a;
        // @ts-ignore
        const b = Object.keys(body).includes('body') ? body.body : body;
        if (typeof (b === null || b === void 0 ? void 0 : b.ammo) === 'undefined')
            return;
        // @ts-ignore
        const name = b.ammo.name;
        // @ts-ignore
        let obj = b.ammo.threeObject;
        if (name && obj) {
            if ((_a = obj === null || obj === void 0 ? void 0 : obj.body) === null || _a === void 0 ? void 0 : _a.ammo) {
                // remove from physics world
                !obj.body.isSoftBody
                    ? this.physicsWorld.removeRigidBody(obj.body.ammo)
                    : this.physicsWorld.removeSoftBody(obj.body.ammo);
                // call destructor on body
                obj.body.destructor();
                // reset properties
                // @ts-ignore
                obj.body = undefined;
                obj.hasBody = false;
                // remove from this.objectAmmo
                // @ts-ignore
                delete b.ammo.threeObject;
                // remove from this.rigidBodies
                for (let i = 0; i < this.rigidBodies.length; i++) {
                    if (this.rigidBodies[i].name === name) {
                        this.rigidBodies.splice(i, 1);
                        i--;
                    }
                }
            }
        }
        if (this.scene === 'headless' && obj)
            obj = null;
    }
    setup() {
        // add worldTransform
        this.worldTransform = new Ammo.btTransform();
        // setup ammo physics
        if (typeof this.config.setupPhysicsWorld === 'function')
            this.physicsWorld = this.config.setupPhysicsWorld();
        else
            this.physicsWorld = this.setupPhysicsWorld();
        if (this.scene !== 'headless') {
            // Initialize convexBreaker
            // @ts-ignore
            this.convexBreaker = new convexObjectBreaker_1.ConvexObjectBreaker();
            this.objectsToRemove = [];
            this.numObjectsToRemove = 0;
            for (let i = 0; i < 500; i++) {
                this.objectsToRemove[i] = null;
            }
        }
        this.collisionEvents = new collisionEvents_1.CollisionEvents();
        this.factory = new factories_1.default(this.scene);
        this.shapes = new shapes_1.default(this.factory, (object, config) => this.addExisting(object, config));
        this.constraints = new constraints_1.default(this.worldTransform, this.physicsWorld);
        if (this.scene !== 'headless')
            this.debugDrawer = new debugDrawer_1.default(this.scene, this.physicsWorld, {});
    }
    updateDebugger() {
        if (this.scene === 'headless')
            return;
        if (this.debugDrawer && this.debugDrawer.enabled)
            this.debugDrawer.update();
    }
    setupPhysicsWorld() {
        const g = this.gravity;
        const { softBodies = false } = this.config;
        let physicsWorld;
        if (!softBodies) {
            const collisionConfiguration = new Ammo.btDefaultCollisionConfiguration(), dispatcher = new Ammo.btCollisionDispatcher(collisionConfiguration), broadphase = new Ammo.btDbvtBroadphase(), solver = new Ammo.btSequentialImpulseConstraintSolver();
            physicsWorld = new Ammo.btDiscreteDynamicsWorld(dispatcher, broadphase, solver, collisionConfiguration);
        }
        if (softBodies) {
            const collisionConfiguration = new Ammo.btSoftBodyRigidBodyCollisionConfiguration(), dispatcher = new Ammo.btCollisionDispatcher(collisionConfiguration), broadphase = new Ammo.btDbvtBroadphase(), solver = new Ammo.btSequentialImpulseConstraintSolver(), softBodySolver = new Ammo.btDefaultSoftBodySolver();
            physicsWorld = new Ammo.btSoftRigidDynamicsWorld(dispatcher, broadphase, solver, collisionConfiguration, softBodySolver);
        }
        physicsWorld.setGravity(new Ammo.btVector3(g.x, g.y, g.z));
        return physicsWorld;
    }
    createDebrisFromBreakableObject(object, parent) {
        if (this.scene === 'headless')
            return;
        object.material = this.defaultMaterial.get();
        object.shape = 'hull';
        object.fragmentDepth = parent.fragmentDepth + 1;
        // Add the object to the scene
        this.scene.add(object);
        // Add physics to the object
        // @ts-ignore
        this.addExisting(object);
        object.body.breakable = false;
        // make this fragment breakable in 2.5seconds
        setTimeout(() => {
            object.body.breakable = true;
        }, 2500);
    }
    removeDebris(object) {
        if (this.scene === 'headless')
            return;
        this.scene.remove(object);
        this.destroy(object);
    }
    update(delta) {
        this.updatePhysics(delta);
        this.detectCollisions();
    }
    updatePhysics(delta) {
        // step world
        const deltaTime = delta / 1000;
        // must always satisfy the equation timeStep < maxSubSteps * fixedTimeStep
        this.physicsWorld.stepSimulation(deltaTime, this.config.maxSubSteps || 4, this.config.fixedTimeStep || 1 / 60);
        // update rigid bodies
        for (let i = 0; i < this.rigidBodies.length; i++) {
            const objThree = this.rigidBodies[i];
            const objPhys = objThree.body.ammo;
            const ms = objPhys.getMotionState();
            if (ms) {
                ms.getWorldTransform(this.worldTransform);
                // check if object did an update since last call
                if (objThree.body.didUpdate) {
                    // @ts-ignore
                    if (objThree.body._emitUpdateEvents)
                        objThree.body.eventEmitter.emit('update');
                    objThree.body.didUpdate = false;
                }
                // update positions
                if (objThree.body.ammo.isKinematicObject() && objThree.body.needUpdate) {
                    // get position and rotation
                    objThree.getWorldQuaternion(this.tmpQuaternion);
                    objThree.getWorldPosition(this.tmpVector3);
                    // adjust tmp variables
                    this.tmpBtVector3.setValue(this.tmpVector3.x, this.tmpVector3.y, this.tmpVector3.z);
                    this.tmpBtQuaternion.setValue(this.tmpQuaternion.x, this.tmpQuaternion.y, this.tmpQuaternion.z, this.tmpQuaternion.w);
                    // set position and rotation
                    this.worldTransform.setOrigin(this.tmpBtVector3);
                    this.worldTransform.setRotation(this.tmpBtQuaternion);
                    // set transform
                    ms.setWorldTransform(this.worldTransform);
                    // reset needsUpdate
                    objThree.body.needUpdate = false;
                }
                else if (objThree.body.skipUpdate) {
                    // do nothing ...
                }
                else if (!objThree.body.ammo.isStaticObject()) {
                    // get position and rotation
                    let p = this.worldTransform.getOrigin();
                    let q = this.worldTransform.getRotation();
                    // body offset
                    let o = objThree.body.offset;
                    // set position and rotation
                    if (objThree.body.ignoreScale) {
                        this.tmpVector3a.set(objThree.scale.x, objThree.scale.y, objThree.scale.z);
                    }
                    else {
                        const scale = objThree.body.ammo.getCollisionShape().getLocalScaling();
                        this.tmpVector3a.set(scale.x(), scale.y(), scale.z());
                    }
                    this.tmpVector3.set(p.x() + o.x, p.y() + o.y, p.z() + o.z);
                    this.tmpQuaternion.set(q.x(), q.y(), q.z(), q.w());
                    this.tmpMatrix4.compose(this.tmpVector3, this.tmpQuaternion, this.tmpVector3a);
                    if (objThree.parent) {
                        // compatibility fix for three.js >= r123 (Dezember 2020)
                        // @ts-ignore
                        if (+index_1.REVISION >= 123)
                            this.tmpMatrix4a.copy(objThree.parent.matrixWorld).invert();
                        else
                            this.tmpMatrix4a.getInverse(objThree.parent.matrixWorld);
                    }
                    else {
                        this.tmpMatrix4a.identity();
                    }
                    this.tmpMatrix4a.multiply(this.tmpMatrix4);
                    this.tmpMatrix4a.decompose(objThree.position, objThree.quaternion, objThree.scale);
                }
            }
        }
    }
    detectCollisions() {
        var _a, _b;
        const detectedCollisions = [];
        // reset these vectors
        this.impactPoint.set(0, 0, 0);
        this.impactNormal.set(0, 0, 0);
        const dispatcher = this.physicsWorld.getDispatcher();
        const numManifolds = dispatcher.getNumManifolds();
        // check collisions
        for (let i = 0; i < numManifolds; i++) {
            let contactManifold = dispatcher.getManifoldByIndexInternal(i);
            let numContacts = contactManifold.getNumContacts();
            // @ts-ignore
            const rb0 = Ammo.castObject(contactManifold.getBody0(), Ammo.btRigidBody);
            // @ts-ignore
            const rb1 = Ammo.castObject(contactManifold.getBody1(), Ammo.btRigidBody);
            let threeObject0 = rb0.threeObject;
            let threeObject1 = rb1.threeObject;
            if (!threeObject0 || !threeObject1) {
                continue;
            }
            // do not check collision between 2 unnamed objects
            // (fragments do not have a name, for example)
            if (rb0.name === '' && rb1.name === '')
                continue;
            /**
             * Get some information
             */
            const checkCollisions0 = (_a = threeObject0.body) === null || _a === void 0 ? void 0 : _a.checkCollisions;
            const checkCollisions1 = (_b = threeObject1.body) === null || _b === void 0 ? void 0 : _b.checkCollisions;
            const breakable0 = threeObject0.body.breakable;
            const breakable1 = threeObject1.body.breakable;
            const checkCollisions = checkCollisions0 || checkCollisions1;
            const checkBreakable = breakable0 || breakable1;
            if (!checkCollisions && !checkBreakable)
                continue;
            let contact = false;
            let maxImpulse = 0;
            let event = 'start';
            for (let j = 0; j < numContacts; j++) {
                const contactPoint = contactManifold.getContactPoint(j);
                const distance = contactPoint.getDistance();
                // Distance definition: when the distance between objects is positive, they are separated. When the distance is negative, they are penetrating. Zero distance means exactly touching.
                // https://pybullet.org/Bullet/phpBB3/viewtopic.php?t=5831
                if (distance <= 0) {
                    contact = true;
                    const impulse = contactPoint.getAppliedImpulse();
                    const impactPoint = contactPoint.get_m_positionWorldOnB();
                    const impactNormal = contactPoint.get_m_normalWorldOnB();
                    // handle collision events
                    if (checkCollisions0 || checkCollisions1) {
                        const names = [threeObject0.name, threeObject1.name].sort();
                        const combinedName = `${names[0]}__${names[1]}`;
                        if (this.earlierDetectedCollisions.find(el => el.combinedName === combinedName))
                            event = 'collision';
                        if (!detectedCollisions.find(el => el.combinedName === combinedName)) {
                            detectedCollisions.push({ combinedName, collision: true });
                            this.collisionEvents.emit('collision', { bodies: [threeObject0, threeObject1], event });
                        }
                    }
                    // get impactPoint and impactNormal of the hight impulse point (for breakable objects)
                    if (impulse >= maxImpulse) {
                        maxImpulse = impulse;
                        // get what ween need for the convex breaking
                        if (breakable0 || breakable1) {
                            this.impactPoint.set(impactPoint.x(), impactPoint.y(), impactPoint.z());
                            this.impactNormal.set(impactNormal.x(), impactNormal.y(), impactNormal.z());
                        }
                    }
                    break;
                }
            }
            // if no point has contact, abort
            if (!contact)
                continue;
            // if no objects are breakable, abort
            if (!checkBreakable)
                continue;
            /**
             * check for breakable objects (subdivision)
             */
            const fractureImpulse = 5; //250
            const MAX_FRAGMENT_DEPTH = 2;
            // since the library convexBreaker makes use of three's userData.ammoPhysicsData
            // we have to clone the necessary params to threeObjectX.userData.ammoPhysicsData
            // TODO improve this
            this.emptyV3.set(0, 0, 0);
            threeObject0.userData.ammoPhysicsData = {
                mass: 1,
                velocity: this.emptyV3,
                angularVelocity: this.emptyV3,
                breakable: breakable0,
                physicsBody: rb0
            };
            threeObject1.userData.ammoPhysicsData = {
                mass: 1,
                velocity: this.emptyV3,
                angularVelocity: this.emptyV3,
                breakable: breakable1,
                physicsBody: rb1
            };
            if (typeof threeObject0.fragmentDepth === 'undefined')
                threeObject0.fragmentDepth = 0;
            if (typeof threeObject1.fragmentDepth === 'undefined')
                threeObject1.fragmentDepth = 0;
            // threeObject0
            if (breakable0 && maxImpulse > fractureImpulse && threeObject0.fragmentDepth < MAX_FRAGMENT_DEPTH) {
                const debris = this.convexBreaker.subdivideByImpact(threeObject0, this.impactPoint, this.impactNormal, 1, 2); //, 1.5)
                const numObjects = debris.length;
                for (let j = 0; j < numObjects; j++) {
                    const vel = rb0.getLinearVelocity();
                    const angVel = rb0.getAngularVelocity();
                    const fragment = debris[j];
                    fragment.userData.ammoPhysicsData.velocity.set(vel.x(), vel.y(), vel.z());
                    fragment.userData.ammoPhysicsData.angularVelocity.set(angVel.x(), angVel.y(), angVel.z());
                    this.createDebrisFromBreakableObject(fragment, threeObject0);
                }
                this.objectsToRemove[this.numObjectsToRemove++] = threeObject0;
            }
            // threeObject1
            if (breakable1 && maxImpulse > fractureImpulse && threeObject1.fragmentDepth < MAX_FRAGMENT_DEPTH) {
                const debris = this.convexBreaker.subdivideByImpact(threeObject1, this.impactPoint, this.impactNormal, 1, 2); //, 1.5)
                const numObjects = debris.length;
                for (let j = 0; j < numObjects; j++) {
                    const vel = rb1.getLinearVelocity();
                    const angVel = rb1.getAngularVelocity();
                    const fragment = debris[j];
                    fragment.userData.ammoPhysicsData.velocity.set(vel.x(), vel.y(), vel.z());
                    fragment.userData.ammoPhysicsData.angularVelocity.set(angVel.x(), angVel.y(), angVel.z());
                    this.createDebrisFromBreakableObject(fragment, threeObject1);
                }
                this.objectsToRemove[this.numObjectsToRemove++] = threeObject1;
            }
        }
        // remove objects
        for (let i = 0; i < this.numObjectsToRemove; i++) {
            this.removeDebris(this.objectsToRemove[i]);
        }
        this.numObjectsToRemove = 0;
        // handle collision end events
        this.earlierDetectedCollisions.forEach(el => {
            const { combinedName } = el;
            if (!detectedCollisions.find(el => el.combinedName === combinedName)) {
                const split = combinedName.split('__');
                const obj0 = this.rigidBodies.find(obj => obj.name === split[0]);
                const obj1 = this.rigidBodies.find(obj => obj.name === split[1]);
                const event = 'end';
                if (obj0 && obj1)
                    this.collisionEvents.emit('collision', { bodies: [obj0, obj1], event });
            }
        });
        this.earlierDetectedCollisions = [...detectedCollisions];
    }
    setGravity(x = 0, y = -9.8, z = 0) {
        this.tmpBtVector3.setValue(x, y, z);
        this.physicsWorld.setGravity(this.tmpBtVector3);
    }
    get debug() {
        if (this.isHeadless)
            return null;
        return {
            enable: () => {
                this.debugDrawer.enable();
            },
            mode: (debugMode = 1) => {
                this.debugDrawer.setDebugMode(debugMode);
            },
            disable: () => {
                this.debugDrawer.disable();
            }
        };
    }
    start() {
        if (typeof Ammo === 'undefined') {
            logger_1.default('Are you sure you included ammo.js?');
            return;
        }
        if (typeof Ammo === 'function')
            Ammo().then(() => {
                this.setup();
            });
        else
            this.setup();
    }
    get add() {
        return {
            collider: (object1, object2, eventCallback) => this.collisionEvents.addCollider(object1, object2, eventCallback),
            constraints: this.constraints.addConstraints,
            existing: (object, config) => this.addExisting(object, config),
            plane: (planeConfig = {}, materialConfig = {}) => this.shapes.addPlane(planeConfig, materialConfig),
            sphere: (sphereConfig = {}, materialConfig = {}) => this.shapes.addSphere(sphereConfig, materialConfig),
            ground: (groundConfig = {}, materialConfig = {}) => this.shapes.addGround(groundConfig, materialConfig),
            box: (boxConfig = {}, materialConfig = {}) => this.shapes.addBox(boxConfig, materialConfig),
            cylinder: (cylinderConfig = {}, materialConfig = {}) => this.shapes.addCylinder(cylinderConfig, materialConfig),
            cone: (coneConfig = {}, materialConfig = {}) => this.shapes.addCone(coneConfig, materialConfig),
            torus: (torusConfig = {}, materialConfig = {}) => this.shapes.addTorus(torusConfig, materialConfig),
            extrude: (extrudeConfig, materialConfig = {}) => this.shapes.addExtrude(extrudeConfig, materialConfig),
            /**
             * Creates a new Raycaster
             * @param type Returns only the closes body by default. Can be 'closest' or 'allHits'.
             */
            raycaster: (type = 'closest') => {
                if (type === 'closest')
                    return new raycaster_1.ClosestRaycaster(this);
                else
                    return new raycaster_1.AllHitsRaycaster(this);
            }
        };
    }
    prepareThreeObjectForCollisionShape(object, config = {}) {
        var _a, _b;
        const { autoCenter = false } = config;
        // set default params
        const defaultParams = {
            width: 1,
            height: 1,
            depth: 1,
            radius: 1,
            radiusTop: 1,
            radiusBottom: 1,
            tube: 0.4,
            tubularSegments: 6 // for the torus
        };
        // determine the shape (fallback to hacd)
        let shape = 'unknown';
        // retrieve the shape from the geometry
        const type = ((_a = object.geometry) === null || _a === void 0 ? void 0 : _a.type) || 'unknown';
        if (/box/i.test(type))
            shape = 'box';
        else if (/cone/i.test(type))
            shape = 'cone';
        else if (/cylinder/i.test(type))
            shape = 'cylinder';
        else if (/extrude/i.test(type))
            shape = 'extrude';
        else if (/plane/i.test(type))
            shape = 'plane';
        else if (/sphere/i.test(type))
            shape = 'sphere';
        else if (/torus/i.test(type))
            shape = 'torus';
        // @ts-ignore
        let params = Object.assign(Object.assign({}, defaultParams), (_b = object === null || object === void 0 ? void 0 : object.geometry) === null || _b === void 0 ? void 0 : _b.parameters);
        if (config.shape) {
            params = Object.assign(Object.assign({}, defaultParams), config);
            shape = config.shape;
        }
        else if (object.shape) {
            shape = object.shape;
        }
        // Add all default params if undefined
        Object.keys(params).forEach(key => {
            // @ts-ignore
            if (typeof params[key] === 'undefined' && defaultParams[key]) {
                // @ts-ignore
                params[key] = defaultParams[key];
            }
        });
        // auto adjust the center for custom shapes
        if (autoCenter)
            object.geometry.center();
        // adjust the cylinder radius for its physcis body
        if (shape === 'cylinder')
            params.radius = config.radius || params.radiusTop;
        // some aliases
        if (shape === 'extrude')
            shape = 'hacd';
        if (shape === 'mesh' || shape === 'convex')
            shape = 'convexMesh';
        if (shape === 'concave')
            shape = 'concaveMesh';
        // if we have not found a shape until here, we fallback to 'box'
        if (shape === 'unknown') {
            logger_1.default(`Shape for ${object === null || object === void 0 ? void 0 : object.name} not recognized! Will fallback to box.`);
            shape = 'box';
        }
        return { shape, params, object };
    }
    createCollisionShape(shape, params, object) {
        const quat = (object === null || object === void 0 ? void 0 : object.quaternion) ? object === null || object === void 0 ? void 0 : object.quaternion : new index_1.Quaternion(0, 0, 0, 1);
        const { axis = 'y' } = params;
        const btHalfExtents = new Ammo.btVector3();
        // transform geometry to bufferGeometry (because three-to-ammo works only with bufferGeometry)
        const geometry = object === null || object === void 0 ? void 0 : object.geometry;
        if (object && (geometry === null || geometry === void 0 ? void 0 : geometry.isGeometry)) {
            object.geometry = new index_1.BufferGeometry().fromGeometry(geometry);
        }
        // prepare data to pass to three-to-ammo.js
        const extractData = (object) => {
            const matrixWorld = new index_1.Matrix4().elements;
            const vertices = [];
            const matrices = [];
            const indexes = [];
            three_to_ammo_1.iterateGeometries(object, {}, (vertexArray, matrixArray, indexArray) => {
                vertices.push(vertexArray);
                matrices.push(matrixArray);
                indexes.push(indexArray);
            });
            return { vertices, matrices, indexes, matrixWorld };
        };
        let d = {};
        // extract data for complex shapes generated with three-to-ammo.js
        if (this.complexShapes.indexOf(shape) > 0)
            d = extractData(object);
        let collisionShape;
        switch (shape) {
            case 'box':
                btHalfExtents.setValue(params.width / 2, params.height / 2, params.depth / 2);
                collisionShape = new Ammo.btBoxShape(btHalfExtents);
                break;
            case 'sphere':
                collisionShape = new Ammo.btSphereShape(params.radius);
                break;
            case 'cylinder':
                switch (axis) {
                    case 'y':
                        btHalfExtents.setValue(params.radius, params.height / 2, params.radius);
                        collisionShape = new Ammo.btCylinderShape(btHalfExtents);
                        break;
                    case 'x':
                        btHalfExtents.setValue(params.height / 2, params.radius, params.radius);
                        collisionShape = new Ammo.btCylinderShapeX(btHalfExtents);
                        break;
                    case 'z':
                        btHalfExtents.setValue(params.radius, params.radius, params.height / 2);
                        collisionShape = new Ammo.btCylinderShapeZ(btHalfExtents);
                        break;
                }
                break;
            case 'cone':
                switch (axis) {
                    case 'y':
                        collisionShape = new Ammo.btConeShape(params.radius, params.height);
                        break;
                    case 'x':
                        collisionShape = new Ammo.btConeShapeX(params.radius, params.height);
                        break;
                    case 'z':
                        collisionShape = new Ammo.btConeShapeZ(params.radius, params.height);
                        break;
                }
                break;
            case 'capsule':
                switch (axis) {
                    case 'y':
                        collisionShape = new Ammo.btCapsuleShape(params.radius, params.height);
                        break;
                    case 'x':
                        collisionShape = new Ammo.btCapsuleShapeX(params.radius, params.height);
                        break;
                    case 'z':
                        collisionShape = new Ammo.btCapsuleShapeZ(params.radius, params.height);
                        break;
                }
                break;
            case 'torus':
                collisionShape = torusShape_1.createTorusShape(params, quat);
                break;
            case 'plane':
                // uses a triMeshShape for the plane
                collisionShape = three_to_ammo_1.createTriMeshShape(d.vertices, d.matrices, d.indexes, d.matrixWorld, Object.assign(Object.assign({}, params), { concave: false }));
                break;
            case 'hull':
                collisionShape = three_to_ammo_1.createHullShape(d.vertices, d.matrices, d.matrixWorld, params);
                break;
            case 'hacd':
                collisionShape = three_to_ammo_1.createHACDShapes(d.vertices, d.matrices, d.indexes, d.matrixWorld, params);
                break;
            case 'vhacd':
                collisionShape = three_to_ammo_1.createVHACDShapes(d.vertices, d.matrices, d.indexes, d.matrixWorld, params);
                break;
            case 'convexMesh':
                collisionShape = three_to_ammo_1.createTriMeshShape(d.vertices, d.matrices, d.indexes, d.matrixWorld, Object.assign(Object.assign({}, params), { concave: false }));
                break;
            case 'concaveMesh':
                collisionShape = three_to_ammo_1.createTriMeshShape(d.vertices, d.matrices, d.indexes, d.matrixWorld, Object.assign(Object.assign({}, params), { concave: true }));
                break;
        }
        Ammo.destroy(btHalfExtents);
        // if there is a x, y or z, take is as temporary offset parameter
        const { x, y, z } = params;
        if (x || y || z) {
            // @ts-ignore
            collisionShape.offset = { x: x || 0, y: y || 0, z: z || 0 };
        }
        // in some cases, like hacd, it will be an array of shapes
        // so we merge them
        if (Array.isArray(collisionShape))
            collisionShape = this.mergeCollisionShapesToCompoundShape(collisionShape);
        return collisionShape;
    }
    mergeCollisionShapesToCompoundShape(collisionShapes) {
        const compoundShape = new Ammo.btCompoundShape();
        collisionShapes.forEach(shape => {
            // @ts-ignore
            const { offset } = shape; // offset is a custom parameter
            const transform = new Ammo.btTransform();
            transform.setIdentity();
            if (offset)
                transform.getOrigin().setValue(offset.x || 0, offset.y || 0, offset.z || 0);
            compoundShape.addChildShape(transform, shape);
        });
        return compoundShape;
    }
    addExisting(object, config = {}) {
        const { hasBody } = object;
        if (hasBody) {
            console.warn(`[Enable3d]: Object "${object.name}" already has a physical body!`);
            return;
        }
        const pos = new index_1.Vector3();
        const quat = new index_1.Quaternion();
        const scale = new index_1.Vector3();
        object.getWorldPosition(pos);
        object.getWorldQuaternion(quat);
        object.getWorldScale(scale);
        const isStaticObject = (config.collisionFlags || 0).toString(2).slice(-1) === '1';
        const isKinematicObject = (config.collisionFlags || 0).toString(2).slice(-2, -1) === '1';
        const { shape = 'unknown', compound = [], mass = isStaticObject || isKinematicObject ? 0 : 1, // set default mass of 0 for static objects, and 1 for all other objects
        collisionFlags = 0, collisionGroup = 1, collisionMask = -1, offset = undefined, breakable = false, addChildren = true, margin = 0.01, ignoreScale = false } = config;
        if (ignoreScale)
            scale.set(1, 1, 1);
        if (compound.length >= 1) {
            // if we want a custom compound shape, we simply do
            const collisionShapes = compound.map((s) => this.createCollisionShape(s.shape, s));
            const compoundShape = this.mergeCollisionShapesToCompoundShape(collisionShapes);
            const localTransform = this.finishCollisionShape(compoundShape, pos, quat, scale, margin);
            const rigidBody = this.collisionShapeToRigidBody(compoundShape, localTransform, mass, isKinematicObject);
            this.addRigidBodyToWorld(object, rigidBody, collisionFlags, collisionGroup, collisionMask, breakable, offset);
            object.body.ignoreScale = ignoreScale;
            return;
        }
        const collisionShapes = [];
        // if object is a THREE.Group, object does not have a mesh
        if (shape !== 'unknown' || object.isMesh) {
            const p = this.prepareThreeObjectForCollisionShape(object, config);
            const cs = this.createCollisionShape(p.shape, p.params, p.object);
            collisionShapes.push(cs);
        }
        // check if the object has children
        if (shape === 'unknown' && addChildren && object.children.length >= 1) {
            object.children.forEach((child) => {
                if (child.isMesh) {
                    const p = this.prepareThreeObjectForCollisionShape(child);
                    const cs = this.createCollisionShape(p.shape, p.params, p.object);
                    // @ts-ignore
                    cs.offset = child.position.clone(); // this is relative position to its parent
                    collisionShapes.push(cs);
                }
            });
        }
        // FALLBACK: if we do not have any collisionShapes yet, add a simple box as a fallback
        if (collisionShapes.length === 0) {
            const p = this.prepareThreeObjectForCollisionShape(object, config);
            const cs = this.createCollisionShape(p.shape, p.params, p.object);
            collisionShapes.push(cs);
        }
        const collisionShape = collisionShapes.length === 1 ? collisionShapes[0] : this.mergeCollisionShapesToCompoundShape(collisionShapes);
        // add rigid body
        // object.position.copy(pos)
        // object.quaternion.copy(quat)
        const localTransform = this.finishCollisionShape(collisionShape, pos, quat, scale, margin);
        const rigidBody = this.collisionShapeToRigidBody(collisionShape, localTransform, mass, isKinematicObject);
        this.addRigidBodyToWorld(object, rigidBody, collisionFlags, collisionGroup, collisionMask, breakable, offset);
        object.body.ignoreScale = ignoreScale;
    }
    addRigidBodyToWorld(object, rigidBody, collisionFlags, collisionGroup, collisionMask, breakable, offset) {
        this.rigidBodies.push(object);
        this.physicsWorld.addRigidBody(rigidBody, collisionGroup, collisionMask);
        const ptr = Object.values(rigidBody)[0];
        // @ts-ignore
        rigidBody.name = object.name;
        object.body = new physicsBody_1.default(this, rigidBody);
        object.hasBody = true;
        // @ts-ignore
        object.ptr = ptr;
        // @ts-ignore
        rigidBody.threeObject = object;
        if (breakable)
            object.body.breakable = true;
        if (offset)
            object.body.offset = Object.assign({ x: 0, y: 0, z: 0 }, offset);
        object.body.setCollisionFlags(collisionFlags);
    }
    finishCollisionShape(collisionShape, pos, quat, scale, margin) {
        collisionShape.setMargin(margin);
        const rotation = new Ammo.btQuaternion(0, 0, 0, 1);
        rotation.setValue(quat.x, quat.y, quat.z, quat.w);
        const localTransform = new Ammo.btTransform();
        localTransform.setIdentity();
        localTransform.getOrigin().setValue(pos.x, pos.y, pos.z);
        localTransform.setRotation(rotation);
        Ammo.destroy(rotation);
        const localScale = new Ammo.btVector3(scale.x, scale.y, scale.z);
        collisionShape.setLocalScaling(localScale);
        Ammo.destroy(localScale);
        return localTransform;
    }
    collisionShapeToRigidBody(collisionShape, localTransform, mass, disableDeactivation) {
        const motionState = new Ammo.btDefaultMotionState(localTransform);
        const localInertia = new Ammo.btVector3(0, 0, 0);
        if (mass > 0)
            collisionShape.calculateLocalInertia(mass, localInertia);
        const rbInfo = new Ammo.btRigidBodyConstructionInfo(mass, motionState, collisionShape, localInertia);
        const rigidBody = new Ammo.btRigidBody(rbInfo);
        if (mass > 0 || disableDeactivation)
            rigidBody.setActivationState(4); // Disable deactivation
        return rigidBody;
    }
}
exports.AmmoPhysics = AmmoPhysics;
//# sourceMappingURL=physics.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/raycaster/allHitsRayResultCallback.js":
/*!**************************************************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/raycaster/allHitsRayResultCallback.js ***!
  \**************************************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */
Object.defineProperty(exports, "__esModule", ({ value: true }));
class AllHitsRayResultCallback {
    constructor(physics) {
        this.physics = physics;
    }
    getHitPointsWorld() {
        const h = this._btRayCallback.get_m_hitPointWorld();
        const points = [];
        for (let i = h.size() - 1; i >= 0; i--) {
            const hh = h.at(i);
            points.push({ x: hh.x(), y: hh.y(), z: hh.z() });
        }
        return points;
    }
    // TODO: Remove this in future versions!
    getHitPointWorld() {
        console.warn('[enable3d] Use getHitPointsWorld() instead of getHitPointWorld() for the AllHitsRayCaster!');
        return this.getHitPointsWorld();
    }
    getHitNormalsWorld() {
        const h = this._btRayCallback.get_m_hitNormalWorld();
        const normals = [];
        for (let i = h.size() - 1; i >= 0; i--) {
            const hh = h.at(i);
            normals.push({ x: hh.x(), y: hh.y(), z: hh.z() });
        }
        return normals;
    }
    getCollisionObjects() {
        const threeObjects = [];
        const objects = this._btRayCallback.get_m_collisionObjects();
        for (let i = objects.size() - 1; i >= 0; i--) {
            // @ts-ignore
            const rb = Ammo.castObject(objects.at(i), Ammo.btRigidBody);
            // @ts-ignore
            threeObjects.push(rb.threeObject);
        }
        return threeObjects;
    }
}
exports.default = AllHitsRayResultCallback;
//# sourceMappingURL=allHitsRayResultCallback.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/raycaster/closestRayResultCallback.js":
/*!**************************************************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/raycaster/closestRayResultCallback.js ***!
  \**************************************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */
Object.defineProperty(exports, "__esModule", ({ value: true }));
class ClosestRayResultCallback {
    constructor(physics) {
        this.physics = physics;
    }
    getHitPointWorld() {
        const h = this._btRayCallback.get_m_hitPointWorld();
        const point = { x: h.x(), y: h.y(), z: h.z() };
        return point;
    }
    getHitNormalWorld() {
        const h = this._btRayCallback.get_m_hitNormalWorld();
        const normal = { x: h.x(), y: h.y(), z: h.z() };
        return normal;
    }
    getCollisionObject() {
        // @ts-ignore
        const rb = Ammo.castObject(this._btRayCallback.get_m_collisionObject(), Ammo.btRigidBody);
        // @ts-ignore
        return rb.threeObject;
    }
}
exports.default = ClosestRayResultCallback;
//# sourceMappingURL=closestRayResultCallback.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/raycaster/raycaster.js":
/*!***********************************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/raycaster/raycaster.js ***!
  \***********************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.AllHitsRaycaster = exports.ClosestRaycaster = void 0;
const applyMixins_1 = __webpack_require__(/*! @enable3d/common/dist/applyMixins */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/applyMixins.js");
const closestRayResultCallback_1 = __webpack_require__(/*! ./closestRayResultCallback */ "./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/raycaster/closestRayResultCallback.js");
const allHitsRayResultCallback_1 = __webpack_require__(/*! ./allHitsRayResultCallback */ "./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/raycaster/allHitsRayResultCallback.js");
class Raycaster {
    constructor(physics) {
        this.physics = physics;
    }
    setRayFromWorld(x = 0, y = 0, z = 0) {
        this._btRayFrom.setValue(x, y, z);
    }
    setRayToWorld(x = 0, y = 0, z = 0) {
        this._btRayTo.setValue(x, y, z);
    }
    hasHit() {
        return this._btRayCallback.hasHit();
    }
    rayTest() {
        if (typeof this._btRayCallback !== 'undefined')
            Ammo.destroy(this._btRayCallback);
        this._btRayCallback =
            this.type === 'closest'
                ? new Ammo.ClosestRayResultCallback(this._btRayFrom, this._btRayTo)
                : new Ammo.AllHitsRayResultCallback(this._btRayFrom, this._btRayTo);
        this.physics.physicsWorld.rayTest(this._btRayFrom, this._btRayTo, this._btRayCallback);
    }
    destroy() {
        if (typeof this._btRayFrom !== 'undefined')
            Ammo.destroy(this._btRayFrom);
        if (typeof this._btRayTo !== 'undefined')
            Ammo.destroy(this._btRayTo);
        if (typeof this._btRayCallback !== 'undefined')
            Ammo.destroy(this._btRayCallback);
    }
}
class ClosestRaycaster {
    constructor(physics) {
        this.physics = physics;
        this.type = 'closest';
        this._btRayFrom = new Ammo.btVector3(0, 0, 0);
        this._btRayTo = new Ammo.btVector3(0, 0, 0);
    }
}
exports.ClosestRaycaster = ClosestRaycaster;
class AllHitsRaycaster {
    constructor(physics) {
        this.physics = physics;
        this.type = 'allHits';
        this._btRayFrom = new Ammo.btVector3(0, 0, 0);
        this._btRayTo = new Ammo.btVector3(0, 0, 0);
    }
}
exports.AllHitsRaycaster = AllHitsRaycaster;
applyMixins_1.default(ClosestRaycaster, [Raycaster, closestRayResultCallback_1.default]);
applyMixins_1.default(AllHitsRaycaster, [Raycaster, allHitsRayResultCallback_1.default]);
//# sourceMappingURL=raycaster.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/shapes.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/shapes.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */
Object.defineProperty(exports, "__esModule", ({ value: true }));
class Shapes {
    constructor(factory, addExisting) {
        this.factory = factory;
        this.addExisting = addExisting;
    }
    addPlane(planeConfig = {}, materialConfig = {}) {
        const plane = this.factory.add.plane(planeConfig, materialConfig);
        this.addExisting(plane, planeConfig);
        return plane;
    }
    addSphere(sphereConfig = {}, materialConfig = {}) {
        const sphere = this.factory.add.sphere(sphereConfig, materialConfig);
        this.addExisting(sphere, sphereConfig);
        return sphere;
    }
    addBox(boxConfig = {}, materialConfig = {}) {
        const box = this.factory.add.box(boxConfig, materialConfig);
        this.addExisting(box, boxConfig);
        return box;
    }
    addGround(groundConfig, materialConfig = {}) {
        const ground = this.factory.add.ground(groundConfig, materialConfig);
        const config = Object.assign(Object.assign({}, groundConfig), { mass: 0, collisionFlags: 1 });
        this.addExisting(ground, config);
        return ground;
    }
    addCylinder(cylinderConfig = {}, materialConfig = {}) {
        const cylinder = this.factory.add.cylinder(cylinderConfig, materialConfig);
        this.addExisting(cylinder, cylinderConfig);
        return cylinder;
    }
    addCone(coneConfig = {}, materialConfig = {}) {
        const cone = this.factory.add.cone(coneConfig, materialConfig);
        this.addExisting(cone, coneConfig);
        return cone;
    }
    addTorus(torusConfig = {}, materialConfig = {}) {
        const torus = this.factory.add.torus(torusConfig, materialConfig);
        this.addExisting(torus, torusConfig);
        return torus;
    }
    addExtrude(extrudeConfig, materialConfig = {}) {
        const object = this.factory.add.extrude(extrudeConfig, materialConfig);
        object.translateX(1);
        this.addExisting(object);
        return object;
    }
}
exports.default = Shapes;
//# sourceMappingURL=shapes.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/three-to-ammo.js":
/*!*****************************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/three-to-ammo.js ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @description  This is a modified version of the original code from Kevin Lee
 * (Includes latest three-to-ammo commit from August 6, 2020)
 */
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.iterateGeometries = exports.createHeightfieldTerrainShape = exports.createTriMeshShape = exports.createVHACDShapes = exports.createHACDShapes = exports.createHullShape = exports.createSphereShape = exports.createConeShape = exports.createCapsuleShape = exports.createCylinderShape = exports.createBoxShape = exports.createCollisionShapes = exports.HEIGHTFIELD_DATA_TYPE = exports.FIT = exports.TYPE = void 0;
/**
 * @author       Kevin Lee (https://github.com/InfiniteLee)
 * @copyright    Copyright (c) 2020 Kevin Lee; Project Url: https://github.com/InfiniteLee/three-to-ammo
 * @license      {@link https://github.com/InfiniteLee/three-to-ammo/blob/master/LICENSE|MPL-2.0}
 */
const index_1 = __webpack_require__(/*! @enable3d/three-wrapper/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
('use strict');
/* global Ammo */
exports.TYPE = {
    BOX: 'box',
    CYLINDER: 'cylinder',
    SPHERE: 'sphere',
    CAPSULE: 'capsule',
    CONE: 'cone',
    HULL: 'hull',
    HACD: 'hacd',
    VHACD: 'vhacd',
    MESH: 'mesh',
    HEIGHTFIELD: 'heightfield'
};
exports.FIT = {
    ALL: 'all',
    MANUAL: 'manual' //A single shape is sized manually. Requires halfExtents or sphereRadius.
};
exports.HEIGHTFIELD_DATA_TYPE = {
    short: 'short',
    float: 'float'
};
const createCollisionShapes = function (vertices, matrices, indexes, matrixWorld, options = {}) {
    switch (options.type) {
        case exports.TYPE.BOX:
            return [exports.createBoxShape(vertices, matrices, matrixWorld, options)];
        case exports.TYPE.CYLINDER:
            return [exports.createCylinderShape(vertices, matrices, matrixWorld, options)];
        case exports.TYPE.CAPSULE:
            return [exports.createCapsuleShape(vertices, matrices, matrixWorld, options)];
        case exports.TYPE.CONE:
            return [exports.createConeShape(vertices, matrices, matrixWorld, options)];
        case exports.TYPE.SPHERE:
            return [exports.createSphereShape(vertices, matrices, matrixWorld, options)];
        case exports.TYPE.HULL:
            return [exports.createHullShape(vertices, matrices, matrixWorld, options)];
        case exports.TYPE.HACD:
            return exports.createHACDShapes(vertices, matrices, indexes, matrixWorld, options);
        case exports.TYPE.VHACD:
            return exports.createVHACDShapes(vertices, matrices, indexes, matrixWorld, options);
        case exports.TYPE.MESH:
            return [exports.createTriMeshShape(vertices, matrices, indexes, matrixWorld, options)];
        case exports.TYPE.HEIGHTFIELD:
            return [exports.createHeightfieldTerrainShape(options)];
        default:
            console.warn(options.type + ' is not currently supported');
            return [];
    }
};
exports.createCollisionShapes = createCollisionShapes;
//TODO: support gimpact (dynamic trimesh) and heightmap
const createBoxShape = function (vertices, matrices, matrixWorld, options = {}) {
    options.type = exports.TYPE.BOX;
    _setOptions(options);
    if (options.fit === exports.FIT.ALL) {
        options.halfExtents = _computeHalfExtents(_computeBounds(vertices, matrices), options.minHalfExtent, options.maxHalfExtent);
    }
    const btHalfExtents = new Ammo.btVector3(options.halfExtents.x, options.halfExtents.y, options.halfExtents.z);
    const collisionShape = new Ammo.btBoxShape(btHalfExtents);
    Ammo.destroy(btHalfExtents);
    _finishCollisionShape(collisionShape, options, _computeScale(matrixWorld, options));
    return collisionShape;
};
exports.createBoxShape = createBoxShape;
const createCylinderShape = function (vertices, matrices, matrixWorld, options = {}) {
    options.type = exports.TYPE.CYLINDER;
    _setOptions(options);
    if (options.fit === exports.FIT.ALL) {
        options.halfExtents = _computeHalfExtents(_computeBounds(vertices, matrices), options.minHalfExtent, options.maxHalfExtent);
    }
    const btHalfExtents = new Ammo.btVector3(options.halfExtents.x, options.halfExtents.y, options.halfExtents.z);
    const collisionShape = (() => {
        switch (options.cylinderAxis) {
            case 'y':
                return new Ammo.btCylinderShape(btHalfExtents);
            case 'x':
                return new Ammo.btCylinderShapeX(btHalfExtents);
            case 'z':
                return new Ammo.btCylinderShapeZ(btHalfExtents);
        }
        return null;
    })();
    Ammo.destroy(btHalfExtents);
    _finishCollisionShape(collisionShape, options, _computeScale(matrixWorld, options));
    return collisionShape;
};
exports.createCylinderShape = createCylinderShape;
const createCapsuleShape = function (vertices, matrices, matrixWorld, options = {}) {
    options.type = exports.TYPE.CAPSULE;
    _setOptions(options);
    if (options.fit === exports.FIT.ALL) {
        options.halfExtents = _computeHalfExtents(_computeBounds(vertices, matrices), options.minHalfExtent, options.maxHalfExtent);
    }
    const { x, y, z } = options.halfExtents;
    const collisionShape = (() => {
        switch (options.cylinderAxis) {
            case 'y':
                return new Ammo.btCapsuleShape(Math.max(x, z), y * 2);
            case 'x':
                return new Ammo.btCapsuleShapeX(Math.max(y, z), x * 2);
            case 'z':
                return new Ammo.btCapsuleShapeZ(Math.max(x, y), z * 2);
        }
        return null;
    })();
    _finishCollisionShape(collisionShape, options, _computeScale(matrixWorld, options));
    return collisionShape;
};
exports.createCapsuleShape = createCapsuleShape;
const createConeShape = function (vertices, matrices, matrixWorld, options = {}) {
    options.type = exports.TYPE.CONE;
    _setOptions(options);
    if (options.fit === exports.FIT.ALL) {
        options.halfExtents = _computeHalfExtents(_computeBounds(vertices, matrices), options.minHalfExtent, options.maxHalfExtent);
    }
    const { x, y, z } = options.halfExtents;
    const collisionShape = (() => {
        switch (options.cylinderAxis) {
            case 'y':
                return new Ammo.btConeShape(Math.max(x, z), y * 2);
            case 'x':
                return new Ammo.btConeShapeX(Math.max(y, z), x * 2);
            case 'z':
                return new Ammo.btConeShapeZ(Math.max(x, y), z * 2);
        }
        return null;
    })();
    _finishCollisionShape(collisionShape, options, _computeScale(matrixWorld, options));
    return collisionShape;
};
exports.createConeShape = createConeShape;
const createSphereShape = function (vertices, matrices, matrixWorld, options = {}) {
    options.type = exports.TYPE.SPHERE;
    _setOptions(options);
    let radius;
    if (options.fit === exports.FIT.MANUAL && !isNaN(options.sphereRadius)) {
        radius = options.sphereRadius;
    }
    else {
        radius = _computeRadius(vertices, matrices, _computeBounds(vertices, matrices));
    }
    const collisionShape = new Ammo.btSphereShape(radius);
    _finishCollisionShape(collisionShape, options, _computeScale(matrixWorld, options));
    return collisionShape;
};
exports.createSphereShape = createSphereShape;
exports.createHullShape = (function () {
    const vertex = new index_1.Vector3();
    const center = new index_1.Vector3();
    const matrix = new index_1.Matrix4();
    return function (vertices, matrices, matrixWorld, options = {}) {
        options.type = exports.TYPE.HULL;
        _setOptions(options);
        if (options.fit === exports.FIT.MANUAL) {
            console.warn('cannot use fit: manual with type: hull');
            return null;
        }
        const bounds = _computeBounds(vertices, matrices);
        const btVertex = new Ammo.btVector3();
        const originalHull = new Ammo.btConvexHullShape();
        originalHull.setMargin(options.margin);
        center.addVectors(bounds.max, bounds.min).multiplyScalar(0.5);
        let vertexCount = 0;
        for (let i = 0; i < vertices.length; i++) {
            vertexCount += vertices[i].length / 3;
        }
        const maxVertices = options.hullMaxVertices || 100000;
        // todo: might want to implement this in a deterministic way that doesn't do O(verts) calls to Math.random
        if (vertexCount > maxVertices) {
            console.warn(`too many vertices for hull shape; sampling ~${maxVertices} from ~${vertexCount} vertices`);
        }
        const p = Math.min(1, maxVertices / vertexCount);
        for (let i = 0; i < vertices.length; i++) {
            const components = vertices[i];
            matrix.fromArray(matrices[i]);
            for (let j = 0; j < components.length; j += 3) {
                const isLastVertex = i === vertices.length - 1 && j === components.length - 3;
                if (Math.random() <= p || isLastVertex) {
                    // always include the last vertex
                    vertex
                        .set(components[j], components[j + 1], components[j + 2])
                        .applyMatrix4(matrix)
                        .sub(center);
                    btVertex.setValue(vertex.x, vertex.y, vertex.z);
                    originalHull.addPoint(btVertex, isLastVertex); // recalc AABB only on last geometry
                }
            }
        }
        let collisionShape = originalHull;
        if (originalHull.getNumVertices() >= 100) {
            //Bullet documentation says don't use convexHulls with 100 verts or more
            const shapeHull = new Ammo.btShapeHull(originalHull);
            shapeHull.buildHull(options.margin);
            Ammo.destroy(originalHull);
            collisionShape = new Ammo.btConvexHullShape(Ammo.getPointer(shapeHull.getVertexPointer()), shapeHull.numVertices());
            Ammo.destroy(shapeHull); // btConvexHullShape makes a copy
        }
        Ammo.destroy(btVertex);
        _finishCollisionShape(collisionShape, options, _computeScale(matrixWorld, options));
        return collisionShape;
    };
})();
exports.createHACDShapes = (function () {
    const vector = new index_1.Vector3();
    const center = new index_1.Vector3();
    const matrix = new index_1.Matrix4();
    return function (vertices, matrices, indexes, matrixWorld, options = {}) {
        options.type = exports.TYPE.HACD;
        _setOptions(options);
        if (options.fit === exports.FIT.MANUAL) {
            console.warn('cannot use fit: manual with type: hacd');
            return [];
        }
        if (!Ammo.hasOwnProperty('HACD')) {
            console.warn('HACD unavailable in included build of Ammo.js. Visit https://github.com/mozillareality/ammo.js for the latest version.');
            return [];
        }
        const bounds = _computeBounds(vertices, matrices);
        const scale = _computeScale(matrixWorld, options);
        let vertexCount = 0;
        let triCount = 0;
        center.addVectors(bounds.max, bounds.min).multiplyScalar(0.5);
        for (let i = 0; i < vertices.length; i++) {
            vertexCount += vertices[i].length / 3;
            if (indexes && indexes[i]) {
                triCount += indexes[i].length / 3;
            }
            else {
                triCount += vertices[i].length / 9;
            }
        }
        const hacd = new Ammo.HACD();
        if (options.hasOwnProperty('compacityWeight'))
            hacd.SetCompacityWeight(options.compacityWeight);
        if (options.hasOwnProperty('volumeWeight'))
            hacd.SetVolumeWeight(options.volumeWeight);
        if (options.hasOwnProperty('nClusters'))
            hacd.SetNClusters(options.nClusters);
        if (options.hasOwnProperty('nVerticesPerCH'))
            hacd.SetNVerticesPerCH(options.nVerticesPerCH);
        if (options.hasOwnProperty('concavity'))
            hacd.SetConcavity(options.concavity);
        const points = Ammo._malloc(vertexCount * 3 * 8);
        const triangles = Ammo._malloc(triCount * 3 * 4);
        hacd.SetPoints(points);
        hacd.SetTriangles(triangles);
        hacd.SetNPoints(vertexCount);
        hacd.SetNTriangles(triCount);
        let pptr = points / 8, tptr = triangles / 4;
        for (let i = 0; i < vertices.length; i++) {
            const components = vertices[i];
            matrix.fromArray(matrices[i]);
            for (let j = 0; j < components.length; j += 3) {
                vector
                    .set(components[j + 0], components[j + 1], components[j + 2])
                    .applyMatrix4(matrix)
                    .sub(center);
                Ammo.HEAPF64[pptr + 0] = vector.x;
                Ammo.HEAPF64[pptr + 1] = vector.y;
                Ammo.HEAPF64[pptr + 2] = vector.z;
                pptr += 3;
            }
            if (indexes[i]) {
                const indices = indexes[i];
                for (let j = 0; j < indices.length; j++) {
                    Ammo.HEAP32[tptr] = indices[j];
                    tptr++;
                }
            }
            else {
                for (let j = 0; j < components.length / 3; j++) {
                    Ammo.HEAP32[tptr] = j;
                    tptr++;
                }
            }
        }
        hacd.Compute();
        Ammo._free(points);
        Ammo._free(triangles);
        const nClusters = hacd.GetNClusters();
        const shapes = [];
        for (let i = 0; i < nClusters; i++) {
            const hull = new Ammo.btConvexHullShape();
            hull.setMargin(options.margin);
            const nPoints = hacd.GetNPointsCH(i);
            const nTriangles = hacd.GetNTrianglesCH(i);
            const hullPoints = Ammo._malloc(nPoints * 3 * 8);
            const hullTriangles = Ammo._malloc(nTriangles * 3 * 4);
            hacd.GetCH(i, hullPoints, hullTriangles);
            const pptr = hullPoints / 8;
            for (let pi = 0; pi < nPoints; pi++) {
                const btVertex = new Ammo.btVector3();
                const px = Ammo.HEAPF64[pptr + pi * 3 + 0];
                const py = Ammo.HEAPF64[pptr + pi * 3 + 1];
                const pz = Ammo.HEAPF64[pptr + pi * 3 + 2];
                btVertex.setValue(px, py, pz);
                hull.addPoint(btVertex, pi === nPoints - 1);
                Ammo.destroy(btVertex);
            }
            _finishCollisionShape(hull, options, scale);
            shapes.push(hull);
        }
        return shapes;
    };
})();
exports.createVHACDShapes = (function () {
    const vector = new index_1.Vector3();
    const center = new index_1.Vector3();
    const matrix = new index_1.Matrix4();
    return function (vertices, matrices, indexes, matrixWorld, options = {}) {
        options.type = exports.TYPE.VHACD;
        _setOptions(options);
        if (options.fit === exports.FIT.MANUAL) {
            console.warn('cannot use fit: manual with type: vhacd');
            return [];
        }
        if (!Ammo.hasOwnProperty('VHACD')) {
            console.warn('VHACD unavailable in included build of Ammo.js. Visit https://github.com/mozillareality/ammo.js for the latest version.');
            return [];
        }
        const bounds = _computeBounds(vertices, matrices);
        const scale = _computeScale(matrixWorld, options);
        let vertexCount = 0;
        let triCount = 0;
        center.addVectors(bounds.max, bounds.min).multiplyScalar(0.5);
        for (let i = 0; i < vertices.length; i++) {
            vertexCount += vertices[i].length / 3;
            if (indexes && indexes[i]) {
                triCount += indexes[i].length / 3;
            }
            else {
                triCount += vertices[i].length / 9;
            }
        }
        const vhacd = new Ammo.VHACD();
        const params = new Ammo.Parameters();
        //https://kmamou.blogspot.com/2014/12/v-hacd-20-parameters-description.html
        if (options.hasOwnProperty('resolution'))
            params.set_m_resolution(options.resolution);
        if (options.hasOwnProperty('depth'))
            params.set_m_depth(options.depth);
        if (options.hasOwnProperty('concavity'))
            params.set_m_concavity(options.concavity);
        if (options.hasOwnProperty('planeDownsampling'))
            params.set_m_planeDownsampling(options.planeDownsampling);
        if (options.hasOwnProperty('convexhullDownsampling'))
            params.set_m_convexhullDownsampling(options.convexhullDownsampling);
        if (options.hasOwnProperty('alpha'))
            params.set_m_alpha(options.alpha);
        if (options.hasOwnProperty('beta'))
            params.set_m_beta(options.beta);
        if (options.hasOwnProperty('gamma'))
            params.set_m_gamma(options.gamma);
        if (options.hasOwnProperty('pca'))
            params.set_m_pca(options.pca);
        if (options.hasOwnProperty('mode'))
            params.set_m_mode(options.mode);
        if (options.hasOwnProperty('maxNumVerticesPerCH'))
            params.set_m_maxNumVerticesPerCH(options.maxNumVerticesPerCH);
        if (options.hasOwnProperty('minVolumePerCH'))
            params.set_m_minVolumePerCH(options.minVolumePerCH);
        if (options.hasOwnProperty('convexhullApproximation'))
            params.set_m_convexhullApproximation(options.convexhullApproximation);
        if (options.hasOwnProperty('oclAcceleration'))
            params.set_m_oclAcceleration(options.oclAcceleration);
        const points = Ammo._malloc(vertexCount * 3 * 8 + 3);
        const triangles = Ammo._malloc(triCount * 3 * 4);
        let pptr = points / 8, tptr = triangles / 4;
        for (let i = 0; i < vertices.length; i++) {
            const components = vertices[i];
            matrix.fromArray(matrices[i]);
            for (let j = 0; j < components.length; j += 3) {
                vector
                    .set(components[j + 0], components[j + 1], components[j + 2])
                    .applyMatrix4(matrix)
                    .sub(center);
                Ammo.HEAPF64[pptr + 0] = vector.x;
                Ammo.HEAPF64[pptr + 1] = vector.y;
                Ammo.HEAPF64[pptr + 2] = vector.z;
                pptr += 3;
            }
            if (indexes[i]) {
                const indices = indexes[i];
                for (let j = 0; j < indices.length; j++) {
                    Ammo.HEAP32[tptr] = indices[j];
                    tptr++;
                }
            }
            else {
                for (let j = 0; j < components.length / 3; j++) {
                    Ammo.HEAP32[tptr] = j;
                    tptr++;
                }
            }
        }
        vhacd.Compute(points, 3, vertexCount, triangles, 3, triCount, params);
        Ammo._free(points);
        Ammo._free(triangles);
        const nHulls = vhacd.GetNConvexHulls();
        const shapes = [];
        const ch = new Ammo.ConvexHull();
        for (let i = 0; i < nHulls; i++) {
            vhacd.GetConvexHull(i, ch);
            const nPoints = ch.get_m_nPoints();
            const hullPoints = ch.get_m_points();
            const hull = new Ammo.btConvexHullShape();
            hull.setMargin(options.margin);
            for (let pi = 0; pi < nPoints; pi++) {
                const btVertex = new Ammo.btVector3();
                const px = ch.get_m_points(pi * 3 + 0);
                const py = ch.get_m_points(pi * 3 + 1);
                const pz = ch.get_m_points(pi * 3 + 2);
                btVertex.setValue(px, py, pz);
                hull.addPoint(btVertex, pi === nPoints - 1);
                Ammo.destroy(btVertex);
            }
            _finishCollisionShape(hull, options, scale);
            shapes.push(hull);
        }
        Ammo.destroy(ch);
        Ammo.destroy(vhacd);
        return shapes;
    };
})();
exports.createTriMeshShape = (function () {
    const va = new index_1.Vector3();
    const vb = new index_1.Vector3();
    const vc = new index_1.Vector3();
    const matrix = new index_1.Matrix4();
    return function (vertices, matrices, indexes, matrixWorld, options = {}) {
        options.type = exports.TYPE.MESH;
        _setOptions(options);
        if (options.fit === exports.FIT.MANUAL) {
            console.warn('cannot use fit: manual with type: mesh');
            return null;
        }
        const scale = _computeScale(matrixWorld, options);
        const bta = new Ammo.btVector3();
        const btb = new Ammo.btVector3();
        const btc = new Ammo.btVector3();
        const triMesh = new Ammo.btTriangleMesh(true, false);
        for (let i = 0; i < vertices.length; i++) {
            const components = vertices[i];
            const index = indexes[i] ? indexes[i] : null;
            matrix.fromArray(matrices[i]);
            if (index) {
                for (let j = 0; j < index.length; j += 3) {
                    const ai = index[j] * 3;
                    const bi = index[j + 1] * 3;
                    const ci = index[j + 2] * 3;
                    va.set(components[ai], components[ai + 1], components[ai + 2]).applyMatrix4(matrix);
                    vb.set(components[bi], components[bi + 1], components[bi + 2]).applyMatrix4(matrix);
                    vc.set(components[ci], components[ci + 1], components[ci + 2]).applyMatrix4(matrix);
                    bta.setValue(va.x, va.y, va.z);
                    btb.setValue(vb.x, vb.y, vb.z);
                    btc.setValue(vc.x, vc.y, vc.z);
                    triMesh.addTriangle(bta, btb, btc, false);
                }
            }
            else {
                for (let j = 0; j < components.length; j += 9) {
                    va.set(components[j + 0], components[j + 1], components[j + 2]).applyMatrix4(matrix);
                    vb.set(components[j + 3], components[j + 4], components[j + 5]).applyMatrix4(matrix);
                    vc.set(components[j + 6], components[j + 7], components[j + 8]).applyMatrix4(matrix);
                    bta.setValue(va.x, va.y, va.z);
                    btb.setValue(vb.x, vb.y, vb.z);
                    btc.setValue(vc.x, vc.y, vc.z);
                    triMesh.addTriangle(bta, btb, btc, false);
                }
            }
        }
        const localScale = new Ammo.btVector3(scale.x, scale.y, scale.z);
        triMesh.setScaling(localScale);
        Ammo.destroy(localScale);
        // MOD (yandeu): Use btConvexTriangleMeshShape for concave shapes
        let collisionShape;
        if (options.concave)
            collisionShape = new Ammo.btBvhTriangleMeshShape(triMesh, true, true);
        else
            collisionShape = new Ammo.btConvexTriangleMeshShape(triMesh, true);
        // const collisionShape = new Ammo.btBvhTriangleMeshShape(triMesh, true, true)
        collisionShape.resources = [triMesh];
        Ammo.destroy(bta);
        Ammo.destroy(btb);
        Ammo.destroy(btc);
        _finishCollisionShape(collisionShape, options);
        return collisionShape;
    };
})();
const createHeightfieldTerrainShape = function (options = {}) {
    _setOptions(options);
    if (options.fit === exports.FIT.ALL) {
        console.warn('cannot use fit: all with type: heightfield');
        return null;
    }
    const heightfieldDistance = options.heightfieldDistance || 1;
    const heightfieldData = options.heightfieldData || [];
    const heightScale = options.heightScale || 0;
    const upAxis = options.hasOwnProperty('upAxis') ? options.upAxis : 1; // x = 0; y = 1; z = 2
    const hdt = (() => {
        switch (options.heightDataType) {
            case 'short':
                return Ammo.PHY_SHORT;
            case 'float':
                return Ammo.PHY_FLOAT;
            default:
                return Ammo.PHY_FLOAT;
        }
    })();
    const flipQuadEdges = options.hasOwnProperty('flipQuadEdges') ? options.flipQuadEdges : true;
    const heightStickLength = heightfieldData.length;
    const heightStickWidth = heightStickLength > 0 ? heightfieldData[0].length : 0;
    const data = Ammo._malloc(heightStickLength * heightStickWidth * 4);
    const ptr = data / 4;
    let minHeight = Number.POSITIVE_INFINITY;
    let maxHeight = Number.NEGATIVE_INFINITY;
    let index = 0;
    for (let l = 0; l < heightStickLength; l++) {
        for (let w = 0; w < heightStickWidth; w++) {
            const height = heightfieldData[l][w];
            Ammo.HEAPF32[ptr + index] = height;
            index++;
            minHeight = Math.min(minHeight, height);
            maxHeight = Math.max(maxHeight, height);
        }
    }
    const collisionShape = new Ammo.btHeightfieldTerrainShape(heightStickWidth, heightStickLength, data, heightScale, minHeight, maxHeight, upAxis, hdt, flipQuadEdges);
    const scale = new Ammo.btVector3(heightfieldDistance, 1, heightfieldDistance);
    collisionShape.setLocalScaling(scale);
    Ammo.destroy(scale);
    collisionShape.heightfieldData = data;
    _finishCollisionShape(collisionShape, options);
    return collisionShape;
};
exports.createHeightfieldTerrainShape = createHeightfieldTerrainShape;
function _setOptions(options) {
    // MOD (yandeu): All of this will be done in physics.ts
    // we only keep type and margin
    options.type = options.type || exports.TYPE.HULL;
    options.margin = options.hasOwnProperty('margin') ? options.margin : 0.01;
    return;
    options.fit = options.hasOwnProperty('fit') ? options.fit : exports.FIT.ALL;
    options.type = options.type || exports.TYPE.HULL;
    options.minHalfExtent = options.hasOwnProperty('minHalfExtent') ? options.minHalfExtent : 0;
    options.maxHalfExtent = options.hasOwnProperty('maxHalfExtent') ? options.maxHalfExtent : Number.POSITIVE_INFINITY;
    options.cylinderAxis = options.cylinderAxis || 'y';
    options.margin = options.hasOwnProperty('margin') ? options.margin : 0.01;
    options.includeInvisible = options.hasOwnProperty('includeInvisible') ? options.includeInvisible : false;
    if (!options.offset) {
        options.offset = new index_1.Vector3();
    }
    if (!options.orientation) {
        options.orientation = new index_1.Quaternion();
    }
}
const _finishCollisionShape = function (collisionShape, options, scale) {
    // MOD (yandeu): All of this will be done in physics.ts
    return;
    collisionShape.type = options.type;
    collisionShape.setMargin(options.margin);
    collisionShape.destroy = () => {
        for (let res of collisionShape.resources || []) {
            Ammo.destroy(res);
        }
        if (collisionShape.heightfieldData) {
            Ammo._free(collisionShape.heightfieldData);
        }
        Ammo.destroy(collisionShape);
    };
    const localTransform = new Ammo.btTransform();
    const rotation = new Ammo.btQuaternion();
    localTransform.setIdentity();
    localTransform.getOrigin().setValue(options.offset.x, options.offset.y, options.offset.z);
    rotation.setValue(options.orientation.x, options.orientation.y, options.orientation.z, options.orientation.w);
    localTransform.setRotation(rotation);
    Ammo.destroy(rotation);
    if (scale) {
        const localScale = new Ammo.btVector3(scale.x, scale.y, scale.z);
        collisionShape.setLocalScaling(localScale);
        Ammo.destroy(localScale);
    }
    collisionShape.localTransform = localTransform;
};
exports.iterateGeometries = (function () {
    const inverse = new index_1.Matrix4();
    return function (root, options, cb) {
        // MOD (yandeu): Update to three.js r123
        // compatibility fix for three.js >= r123 (Dezember 2020)
        if (+index_1.REVISION >= 123)
            inverse.copy(root.matrixWorld).invert();
        else
            inverse.getInverse(root.matrixWorld);
        const scale = new index_1.Vector3();
        scale.setFromMatrixScale(root.matrixWorld);
        root.traverse(mesh => {
            const transform = new index_1.Matrix4();
            if (mesh.isMesh &&
                // MOD (yandeu): No need to check if name is 'Sky'
                // mesh.name !== 'Sky' &&
                (options.includeInvisible || (mesh.el && mesh.el.object3D.visible) || mesh.visible)) {
                if (mesh === root) {
                    transform.identity();
                }
                else {
                    mesh.updateWorldMatrix(true);
                    transform.multiplyMatrices(inverse, mesh.matrixWorld);
                }
                // todo: might want to return null xform if this is the root so that callers can avoid multiplying
                // things by the identity matrix
                cb(mesh.geometry.isBufferGeometry ? mesh.geometry.attributes.position.array : mesh.geometry.vertices, transform.elements, mesh.geometry.index ? mesh.geometry.index.array : null);
            }
        });
    };
})();
const _computeScale = (function () {
    const matrix = new index_1.Matrix4();
    return function (matrixWorld, options = {}) {
        const scale = new index_1.Vector3(1, 1, 1);
        if (options.fit === exports.FIT.ALL) {
            matrix.fromArray(matrixWorld);
            scale.setFromMatrixScale(matrix);
        }
        return scale;
    };
})();
const _computeRadius = (function () {
    const center = new index_1.Vector3();
    return function (vertices, matrices, bounds) {
        let maxRadiusSq = 0;
        let { x: cx, y: cy, z: cz } = bounds.getCenter(center);
        _iterateVertices(vertices, matrices, v => {
            const dx = cx - v.x;
            const dy = cy - v.y;
            const dz = cz - v.z;
            maxRadiusSq = Math.max(maxRadiusSq, dx * dx + dy * dy + dz * dz);
        });
        return Math.sqrt(maxRadiusSq);
    };
})();
const _computeHalfExtents = function (bounds, minHalfExtent, maxHalfExtent) {
    const halfExtents = new index_1.Vector3();
    return halfExtents.subVectors(bounds.max, bounds.min).multiplyScalar(0.5).clampScalar(minHalfExtent, maxHalfExtent);
};
const _computeLocalOffset = function (matrix, bounds, target) {
    target.addVectors(bounds.max, bounds.min).multiplyScalar(0.5).applyMatrix4(matrix);
    return target;
};
// returns the bounding box for the geometries underneath `root`.
const _computeBounds = function (vertices, matrices) {
    const bounds = new index_1.Box3();
    let minX = +Infinity;
    let minY = +Infinity;
    let minZ = +Infinity;
    let maxX = -Infinity;
    let maxY = -Infinity;
    let maxZ = -Infinity;
    bounds.min.set(0, 0, 0);
    bounds.max.set(0, 0, 0);
    _iterateVertices(vertices, matrices, v => {
        if (v.x < minX)
            minX = v.x;
        if (v.y < minY)
            minY = v.y;
        if (v.z < minZ)
            minZ = v.z;
        if (v.x > maxX)
            maxX = v.x;
        if (v.y > maxY)
            maxY = v.y;
        if (v.z > maxZ)
            maxZ = v.z;
    });
    bounds.min.set(minX, minY, minZ);
    bounds.max.set(maxX, maxY, maxZ);
    return bounds;
};
const _iterateVertices = (function () {
    const vertex = new index_1.Vector3();
    const matrix = new index_1.Matrix4();
    return function (vertices, matrices, cb) {
        for (let i = 0; i < vertices.length; i++) {
            matrix.fromArray(matrices[i]);
            for (let j = 0; j < vertices[i].length; j += 3) {
                vertex.set(vertices[i][j], vertices[i][j + 1], vertices[i][j + 2]).applyMatrix4(matrix);
                cb(vertex);
            }
        }
    };
})();
//# sourceMappingURL=three-to-ammo.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/torusShape.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/torusShape.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.createTorusShape = void 0;
// https://pybullet.org/Bullet/phpBB3/viewtopic.php?t=7228
const createTorusShape = (config, quat) => {
    const { radius = 1, tube = 0.4, tubularSegments = 8 } = config;
    const SIMD_PI = Math.PI;
    const subdivisions = tubularSegments;
    const gap = Math.sqrt(2.0 * tube * tube - 2.0 * tube * tube * Math.cos((2.0 * SIMD_PI) / subdivisions));
    const btHalfExtents = new Ammo.btVector3(tube, SIMD_PI / subdivisions + 0.5 * gap, tube);
    const cylinderShape = new Ammo.btCylinderShape(btHalfExtents);
    cylinderShape.setMargin(0.05);
    const compoundShape = new Ammo.btCompoundShape();
    const forward = new Ammo.btVector3(0, 0, 1);
    const side = new Ammo.btVector3(0, radius, 0);
    const rotation = new Ammo.btQuaternion(quat.x, quat.y, quat.z, quat.w);
    for (let x = 0; x < subdivisions; x++) {
        const angle = (x * 2.0 * SIMD_PI) / subdivisions;
        const position = side.rotate(forward, angle);
        const transform = new Ammo.btTransform();
        rotation.setRotation(forward, angle + Math.PI / 2);
        transform.setIdentity();
        transform.setOrigin(position);
        transform.setRotation(rotation);
        compoundShape.addChildShape(transform, cylinderShape);
    }
    return compoundShape;
};
exports.createTorusShape = createTorusShape;
//# sourceMappingURL=torusShape.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/common/dist/applyMixins.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/common/dist/applyMixins.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
// https://www.typescriptlang.org/docs/handbook/mixins.html
const applyMixins = (derivedCtor, baseCtors) => {
    baseCtors.forEach(baseCtor => {
        Object.getOwnPropertyNames(baseCtor.prototype).forEach(name => {
            // @ts-ignore
            Object.defineProperty(derivedCtor.prototype, name, Object.getOwnPropertyDescriptor(baseCtor.prototype, name));
        });
    });
};
exports.default = applyMixins;
//# sourceMappingURL=applyMixins.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/common/dist/defaultMaterial.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/common/dist/defaultMaterial.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
const index_1 = __webpack_require__(/*! @enable3d/three-wrapper/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
class DefaultMaterial {
    constructor() {
        this._defaultMaterial = new index_1.MeshLambertMaterial({ color: 0xcccccc });
    }
    get() {
        return this._defaultMaterial;
    }
}
exports.default = DefaultMaterial;
//# sourceMappingURL=defaultMaterial.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/common/dist/extendedGroup.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/common/dist/extendedGroup.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ExtendedGroup = void 0;
const index_1 = __webpack_require__(/*! @enable3d/three-wrapper/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
class ExtendedGroup extends index_1.Group {
    constructor() {
        super();
        this.isMesh = false;
        this.hasBody = false;
        this.name = `object-${this.id}`;
    }
}
exports.ExtendedGroup = ExtendedGroup;
//# sourceMappingURL=extendedGroup.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/common/dist/extendedMesh.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/common/dist/extendedMesh.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ExtendedMesh = void 0;
const index_1 = __webpack_require__(/*! @enable3d/three-wrapper/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
class ExtendedMesh extends index_1.Mesh {
    constructor(geometry, material) {
        super(geometry, material);
        this.vector3 = new index_1.Vector3();
        this.isGroup = false;
        this.hasBody = false;
        this.name = `object-${this.id}`;
    }
    /** Returns all values relative to the world. */
    get world() {
        return {
            theta: this.worldTheta,
            phi: this.worldPhi
        };
    }
    /** Get the theta relative to the world. */
    get worldTheta() {
        this.getWorldDirection(this.vector3);
        return Math.atan2(this.vector3.x, this.vector3.z);
    }
    /** Get the phi relative to the world. */
    get worldPhi() {
        this.getWorldDirection(this.vector3);
        return Math.acos(this.vector3.y);
    }
}
exports.ExtendedMesh = ExtendedMesh;
//# sourceMappingURL=extendedMesh.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/common/dist/extendedObject3D.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/common/dist/extendedObject3D.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ExtendedObject3D = void 0;
const index_1 = __webpack_require__(/*! @enable3d/three-wrapper/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
/**
 * Extends the Object3D class from THREE.js and implements properties from Line, Mesh and Points.
 */
class ExtendedObject3D extends index_1.Object3D {
    constructor() {
        super();
        this.vector3 = new index_1.Vector3();
        this.isGroup = false;
        this.hasBody = false;
        this.anims = {}; // deprecated
        this._currentAnimation = '';
        this._animationActions = new Map();
        this.name = `object-${this.id}`;
    }
    /** setAction(name) is deprecated. Use animation.play(name) instead! */
    setAction(name) {
        console.warn('[enable3d] setAction(name) is deprecated. Use animation.play(name) instead!');
        this.animationPlay(name);
    }
    /** Returns all values relative to the world. */
    get world() {
        return {
            theta: this.worldTheta,
            phi: this.worldPhi
        };
    }
    /** Get the theta relative to the world. */
    get worldTheta() {
        this.getWorldDirection(this.vector3);
        return Math.atan2(this.vector3.x, this.vector3.z);
    }
    /** Get the phi relative to the world. */
    get worldPhi() {
        this.getWorldDirection(this.vector3);
        return Math.acos(this.vector3.y);
    }
    get animation() {
        return {
            current: this._currentAnimation,
            add: (key, animation) => this.animationAdd(key, animation),
            play: (name, transitionDuration = 500, loop = true) => this.animationPlay(name, transitionDuration, loop),
            mixer: this.animationMixer
        };
    }
    set animationMixer(animationMixer) {
        this._animationMixer = animationMixer;
    }
    get animationMixer() {
        if (!this._animationMixer)
            this._animationMixer = new index_1.AnimationMixer(this);
        return this._animationMixer;
    }
    animationAdd(key, animation) {
        this._animationActions.set(key, this.animationMixer.clipAction(animation));
    }
    animationPlay(name, transitionDuration = 500, loop = true) {
        const next = this._animationActions.get(name);
        const current = this._animationActions.get(this._currentAnimation);
        if (next) {
            next.reset();
            if (current) {
                next.crossFadeFrom(current, transitionDuration / 1000, true);
                next.clampWhenFinished = true;
            }
            if (!loop)
                next.setLoop(index_1.LoopOnce, 0);
            next.play();
        }
        this._currentAnimation = name;
    }
}
exports.ExtendedObject3D = ExtendedObject3D;
exports.default = ExtendedObject3D;
//# sourceMappingURL=extendedObject3D.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/common/dist/factories.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/common/dist/factories.js ***!
  \*******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";

/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */
var __rest = (this && this.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
const index_1 = __webpack_require__(/*! @enable3d/three-wrapper/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
const extendedMesh_1 = __webpack_require__(/*! ./extendedMesh */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/extendedMesh.js");
const logger_1 = __webpack_require__(/*! ./logger */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/logger.js");
const defaultMaterial_1 = __webpack_require__(/*! ./defaultMaterial */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/defaultMaterial.js");
class Factories {
    constructor(scene) {
        this.scene = scene;
        this.isHeadless = scene === 'headless' ? true : false;
        this.defaultMaterial = new defaultMaterial_1.default();
    }
    get make() {
        return {
            plane: (planeConfig = {}, materialConfig = {}) => this.makePlane(planeConfig, materialConfig),
            box: (boxConfig = {}, materialConfig = {}) => this.makeBox(boxConfig, materialConfig),
            sphere: (sphereConfig = {}, materialConfig = {}) => this.makeSphere(sphereConfig, materialConfig),
            cylinder: (cylinderConfig = {}, materialConfig = {}) => this.makeCylinder(cylinderConfig, materialConfig),
            cone: (coneConfig = {}, materialConfig = {}) => this.makeCone(coneConfig, materialConfig),
            torus: (torusConfig = {}, materialConfig = {}) => this.makeTorus(torusConfig, materialConfig),
            extrude: (extrudeConfig, materialConfig = {}) => this.makeExtrude(extrudeConfig, materialConfig)
        };
    }
    get add() {
        return {
            // effectComposer: () => this.addEffectComposer(),
            mesh: (mesh) => this.addMesh(mesh),
            // group: (...children) => this.addGroup(children),
            existing: (object) => this.addExisting(object),
            //  Geometry
            plane: (planeConfig = {}, materialConfig = {}) => this.addPlane(planeConfig, materialConfig),
            box: (boxConfig = {}, materialConfig = {}) => this.addBox(boxConfig, materialConfig),
            ground: (groundConfig, materialConfig = {}) => this.addGround(groundConfig, materialConfig),
            //...
            sphere: (sphereConfig = {}, materialConfig = {}) => this.addSphere(sphereConfig, materialConfig),
            cylinder: (cylinderConfig = {}, materialConfig = {}) => this.addCylinder(cylinderConfig, materialConfig),
            cone: (coneConfig = {}, materialConfig = {}) => this.addCone(coneConfig, materialConfig),
            torus: (torusConfig = {}, materialConfig = {}) => this.addTorus(torusConfig, materialConfig),
            extrude: (extrudeConfig, materialConfig = {}) => this.addExtrude(extrudeConfig, materialConfig),
            //...
            material: (materialConfig = {}) => this.addMaterial(materialConfig)
        };
    }
    addExisting(...object) {
        if (this.scene === 'headless')
            return;
        this.scene.add(...object);
    }
    addMesh(mesh) {
        if (Array.isArray(mesh)) {
            for (let i = 0; i < mesh.length; i++) {
                this.addExisting(mesh[i]);
            }
        }
        else {
            this.addExisting(mesh);
        }
        return this;
    }
    createMesh(geometry, material, position) {
        const { x = 0, y = 0, z = 0 } = position;
        let obj;
        switch (!Array.isArray(material) && material.type) {
            case 'LineBasicMaterial':
                obj = new index_1.Line(geometry, material);
                break;
            case 'PointsMaterial':
                obj = new index_1.Points(geometry, material);
                break;
            default:
                obj = new extendedMesh_1.ExtendedMesh(geometry, material);
                break;
        }
        obj.position.set(x, y, z);
        obj.castShadow = obj.receiveShadow = true;
        return obj;
    }
    makeExtrude(extrudeConfig, materialConfig) {
        const { x, y, z, name, shape, autoCenter = true, breakable = false, bufferGeometry = true } = extrudeConfig, rest = __rest(extrudeConfig
        // @ts-ignore // ExtrudeGeometryOptions interface missing since three.js r121
        , ["x", "y", "z", "name", "shape", "autoCenter", "breakable", "bufferGeometry"]);
        // @ts-ignore // ExtrudeGeometryOptions interface missing since three.js r121
        const { depth = 1, bevelEnabled = false } = rest;
        const geometry = bufferGeometry || breakable || this.isHeadless
            ? new index_1.ExtrudeBufferGeometry(shape, Object.assign({ depth, bevelEnabled }, rest))
            : new index_1.ExtrudeGeometry(shape, Object.assign({ depth, bevelEnabled }, rest));
        const material = this.addMaterial(materialConfig);
        const mesh = this.createMesh(geometry, material, { x, y, z });
        // auto adjust the center for custom shapes
        if (autoCenter)
            mesh.geometry.center();
        mesh.name = name || `body_id_${mesh.id}`;
        mesh.shape = 'extrude';
        return mesh;
    }
    addExtrude(extrudeConfig, materialConfig = {}) {
        const obj = this.makeExtrude(extrudeConfig, materialConfig);
        this.addExisting(obj);
        return obj;
    }
    makePlane(planeConfig, materialConfig) {
        const { x, y, z, name, breakable = false, bufferGeometry = true } = planeConfig, rest = __rest(planeConfig, ["x", "y", "z", "name", "breakable", "bufferGeometry"]);
        const geometry = bufferGeometry || breakable || this.isHeadless
            ? new index_1.PlaneBufferGeometry(rest.width || 1, rest.height || 1, rest.widthSegments || 1, rest.heightSegments || 1)
            : new index_1.PlaneGeometry(rest.width || 1, rest.height || 1, rest.widthSegments || 1, rest.heightSegments || 1);
        const material = this.addMaterial(materialConfig);
        material.side = index_1.DoubleSide;
        const mesh = this.createMesh(geometry, material, { x, y, z });
        mesh.name = name || `body_id_${mesh.id}`;
        mesh.shape = 'plane';
        return mesh;
    }
    addPlane(planeConfig, materialConfig) {
        const obj = this.makePlane(planeConfig, materialConfig);
        this.addExisting(obj);
        return obj;
    }
    makeSphere(sphereConfig, materialConfig) {
        const { x, y, z, name, breakable = false, bufferGeometry = true } = sphereConfig, rest = __rest(sphereConfig, ["x", "y", "z", "name", "breakable", "bufferGeometry"]);
        const geometry = bufferGeometry || breakable || this.isHeadless
            ? new index_1.SphereBufferGeometry(rest.radius || 1, rest.widthSegments || 16, rest.heightSegments || 12, rest.phiStart || undefined, rest.phiLength || undefined, rest.thetaStart || undefined, rest.thetaLength || undefined)
            : new index_1.SphereGeometry(rest.radius || 1, rest.widthSegments || 16, rest.heightSegments || 12, rest.phiStart || undefined, rest.phiLength || undefined, rest.thetaStart || undefined, rest.thetaLength || undefined);
        const material = this.addMaterial(materialConfig);
        const mesh = this.createMesh(geometry, material, { x, y, z });
        mesh.name = name || `body_id_${mesh.id}`;
        mesh.shape = 'sphere';
        return mesh;
    }
    addSphere(sphereConfig = {}, materialConfig = {}) {
        const obj = this.makeSphere(sphereConfig, materialConfig);
        this.addExisting(obj);
        return obj;
    }
    makeBox(boxConfig, materialConfig) {
        const { x, y, z, name, breakable = false, bufferGeometry = true } = boxConfig, rest = __rest(boxConfig, ["x", "y", "z", "name", "breakable", "bufferGeometry"]);
        const geometry = bufferGeometry || breakable || this.isHeadless
            ? new index_1.BoxBufferGeometry(rest.width || 1, rest.height || 1, rest.depth || 1, rest.widthSegments || undefined, rest.heightSegments || undefined, rest.depthSegments || undefined)
            : new index_1.BoxGeometry(rest.width || 1, rest.height || 1, rest.depth || 1, rest.widthSegments || undefined, rest.heightSegments || undefined, rest.depthSegments || undefined);
        const material = this.addMaterial(materialConfig);
        const mesh = this.createMesh(geometry, material, { x, y, z });
        mesh.name = name || `body_id_${mesh.id}`;
        mesh.shape = 'box';
        return mesh;
    }
    addBox(boxConfig = {}, materialConfig = {}) {
        const obj = this.makeBox(boxConfig, materialConfig);
        this.addExisting(obj);
        return obj;
    }
    addGround(groundConfig, materialConfig = {}) {
        const obj = this.makeBox(groundConfig, materialConfig);
        obj.rotateX(index_1.MathUtils.degToRad(90));
        this.addExisting(obj);
        return obj;
    }
    makeCylinder(cylinderConfig = {}, materialConfig = {}) {
        const { x, y, z, name, breakable = false, bufferGeometry = true } = cylinderConfig, rest = __rest(cylinderConfig, ["x", "y", "z", "name", "breakable", "bufferGeometry"]);
        const geometry = bufferGeometry || breakable || this.isHeadless
            ? new index_1.CylinderBufferGeometry(rest.radiusTop || 1, rest.radiusBottom || 1, rest.height || 1, rest.radiusSegments || undefined, rest.heightSegments || undefined, rest.openEnded || undefined, rest.thetaStart || undefined, rest.thetaLength || undefined)
            : new index_1.CylinderGeometry(rest.radiusTop || 1, rest.radiusBottom || 1, rest.height || 1, rest.radiusSegments || undefined, rest.heightSegments || undefined, rest.openEnded || undefined, rest.thetaStart || undefined, rest.thetaLength || undefined);
        const material = this.addMaterial(materialConfig);
        const mesh = this.createMesh(geometry, material, { x, y, z });
        mesh.name = name || `body_id_${mesh.id}`;
        mesh.shape = 'cylinder';
        return mesh;
    }
    addCylinder(cylinderConfig = {}, materialConfig = {}) {
        const obj = this.makeCylinder(cylinderConfig, materialConfig);
        this.addExisting(obj);
        return obj;
    }
    makeCone(coneConfig = {}, materialConfig = {}) {
        const { x, y, z, name, breakable = false, bufferGeometry = true } = coneConfig, rest = __rest(coneConfig, ["x", "y", "z", "name", "breakable", "bufferGeometry"]);
        const geometry = bufferGeometry || breakable || this.isHeadless
            ? new index_1.ConeBufferGeometry(rest.radius || 1, rest.height || 1, rest.radiusSegments || 8, rest.heightSegments || 1, rest.openEnded || false, rest.thetaStart || 0, rest.thetaLength || 2 * Math.PI)
            : new index_1.ConeBufferGeometry(rest.radius || 1, rest.height || 1, rest.radiusSegments || 8, rest.heightSegments || 1, rest.openEnded || false, rest.thetaStart || 0, rest.thetaLength || 2 * Math.PI);
        const material = this.addMaterial(materialConfig);
        const mesh = this.createMesh(geometry, material, { x, y, z });
        mesh.name = name || `body_id_${mesh.id}`;
        mesh.shape = 'cone';
        return mesh;
    }
    addCone(coneConfig = {}, materialConfig = {}) {
        const obj = this.makeCone(coneConfig, materialConfig);
        this.addExisting(obj);
        return obj;
    }
    // https://threejs.org/docs/index.html#api/en/geometries/TorusBufferGeometry
    makeTorus(torusConfig = {}, materialConfig = {}) {
        const { x, y, z, name, breakable = false, bufferGeometry = true } = torusConfig, rest = __rest(torusConfig, ["x", "y", "z", "name", "breakable", "bufferGeometry"]);
        const geometry = bufferGeometry || breakable || this.isHeadless
            ? new index_1.TorusBufferGeometry(rest.radius || undefined, rest.tube || undefined, rest.radialSegments || undefined, rest.tubularSegments || undefined, rest.arc || undefined)
            : new index_1.TorusGeometry(rest.radius || undefined, rest.tube || undefined, rest.radialSegments || undefined, rest.tubularSegments || undefined, rest.arc || undefined);
        const material = this.addMaterial(materialConfig);
        const mesh = this.createMesh(geometry, material, { x, y, z });
        mesh.name = name || `body_id_${mesh.id}`;
        mesh.shape = 'torus';
        return mesh;
    }
    addTorus(torusConfig = {}, materialConfig = {}) {
        const obj = this.makeTorus(torusConfig, materialConfig);
        this.addExisting(obj);
        return obj;
    }
    addMaterial(materialConfig = {}) {
        const type = Object.keys(materialConfig)[0];
        let material;
        // if (type) {
        //   const { map } = materialConfig[type]
        //   if (typeof map === 'string') materialConfig[type].map = this.loadTexture(map)
        // }
        // always share the same material in headless mode to save memory
        if (this.scene === 'headless')
            return this.defaultMaterial.get();
        switch (type) {
            case 'basic':
                material = new index_1.MeshBasicMaterial(materialConfig.basic);
                break;
            case 'normal':
                material = new index_1.MeshNormalMaterial(materialConfig.normal);
                break;
            case 'standard':
                material = new index_1.MeshStandardMaterial(materialConfig.standard);
                break;
            case 'lambert':
                material = new index_1.MeshLambertMaterial(materialConfig.lambert);
                break;
            case 'phong':
                material = new index_1.MeshPhongMaterial(materialConfig.phong);
                break;
            case 'physical':
                if (typeof materialConfig.physical !== 'undefined') {
                    material = new index_1.MeshPhysicalMaterial(materialConfig.physical);
                }
                else {
                    logger_1.default('You need to pass parameters to the physical material. (Fallback to default material)');
                    material = this.defaultMaterial.get();
                }
                break;
            case 'toon':
                material = new index_1.MeshToonMaterial(materialConfig.toon);
                break;
            case 'line':
                material = new index_1.LineBasicMaterial(materialConfig.line);
                break;
            case 'points':
                material = new index_1.PointsMaterial(materialConfig.points);
                break;
            case 'custom':
                material = materialConfig.custom || this.defaultMaterial.get();
                break;
            default:
                material = this.defaultMaterial.get();
                break;
        }
        return material;
    }
}
exports.default = Factories;
//# sourceMappingURL=factories.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/common/dist/logger.js":
/*!****************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/common/dist/logger.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
const logger = (msg) => {
    console.error(`%c [enable3d] ${msg} `, 'background: #222; color: #bada55');
};
exports.default = logger;
//# sourceMappingURL=logger.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/common/dist/misc/firstPersonControls.js":
/*!**********************************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/common/dist/misc/firstPersonControls.js ***!
  \**********************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

/**
 * @description  This code has originally been copied from Sketchbook
 *
 * @author       swift502 <blaha.j502@gmail.com> (http://jblaha.art/)
 * @copyright    Copyright (c) 2018 swift502; Project Url: https://github.com/swift502/Sketchbook
 * @license      {@link https://github.com/swift502/Sketchbook/blob/master/LICENSE|GPL-3.0}
 *
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FirstPersonControls = void 0;
const dist_1 = __webpack_require__(/*! @enable3d/three-wrapper/dist */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
class FirstPersonControls {
    constructor(camera, target, config) {
        this.camera = camera;
        this.target = target;
        this.config = config;
        const { offset = new dist_1.Vector3(0, 0, 0), sensitivity = new dist_1.Vector2(1, 1), radius = 8, targetRadius = 10, interpolationFactor = 0.05, pointerLock = true, autoUpdate = true } = config;
        this.offset = offset;
        this.sensitivity = sensitivity;
        this.radius = radius;
        this.targetRadius = targetRadius;
        this.interpolationFactor = interpolationFactor;
        this.theta = 0;
        this.phi = 0;
        // if (pointerLock) {
        //   scene.input.on('pointerdown', () => {
        //     scene.input.mouse.requestPointerLock()
        //   })
        //   scene.input.on('pointermove', (pointer: PointerEvent) => {
        //     if (scene.input.mouse.locked) {
        //       this.update(pointer.movementX, pointer.movementY)
        //     }
        //   })
        // }
        // if (autoUpdate) {
        //   scene.events.on('update', () => {
        //     this.update(0, 0)
        //   })
        // }
    }
    update(deltaX, deltaY) {
        const center = this.target.position.clone().add(this.offset);
        this.camera.position.copy(center);
        this.theta -= deltaX * (this.sensitivity.x / 2);
        this.theta %= 360;
        this.phi += deltaY * (-this.sensitivity.y / 2);
        this.phi = Math.min(85, Math.max(-85, this.phi));
        const lookAt = new dist_1.Vector3();
        lookAt.x = center.x + this.radius * Math.sin((this.theta * Math.PI) / 180) * Math.cos((this.phi * Math.PI) / 180);
        lookAt.y = center.y + this.radius * Math.sin((this.phi * Math.PI) / 180);
        lookAt.z = center.z + this.radius * Math.cos((this.theta * Math.PI) / 180) * Math.cos((this.phi * Math.PI) / 180);
        this.camera.updateMatrix();
        this.camera.lookAt(lookAt);
    }
}
exports.FirstPersonControls = FirstPersonControls;
//# sourceMappingURL=firstPersonControls.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/common/dist/misc/joystick.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/common/dist/misc/joystick.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.JoyStick = void 0;
const eventemitter3_1 = __webpack_require__(/*! eventemitter3 */ "./node_modules/eventemitter3/index.js");
// This class is based on a file I found online called toon3d.js
// Unfortunately I could not find its license or author.
// I just ported it to TypeScript and improved the code.
class JoyStick extends eventemitter3_1.EventEmitter {
    constructor() {
        super(...arguments);
        this.id = -1;
    }
    get add() {
        return {
            axis: (config = {}) => this.addAxis(config),
            button: (config = {}) => this.addButton(config)
        };
    }
    addAxis(config = {}) {
        this.id++;
        const { styles = { left: 35, bottom: 35, size: 100 } } = config;
        const circle = this.circle({ styles });
        const thumb = this.thumb({ styles });
        circle.appendChild(thumb);
        document.body.appendChild(circle);
        const { maxRadius = 40, rotationDamping = 0.06, moveDamping = 0.01 } = config;
        // element
        const element = {
            id: this.id,
            domElement: thumb,
            maxRadius: maxRadius,
            maxRadiusSquared: maxRadius * maxRadius,
            origin: { left: thumb.offsetLeft, top: thumb.offsetTop },
            offset: { x: 0, y: 0 },
            rotationDamping: rotationDamping,
            moveDamping: moveDamping
        };
        if (element === null || element === void 0 ? void 0 : element.domElement) {
            const { domElement } = element;
            if ('ontouchstart' in window) {
                domElement.addEventListener('touchstart', evt => {
                    evt.preventDefault();
                    this.tap(evt, element);
                    evt.stopPropagation();
                });
            }
            else {
                domElement.addEventListener('mousedown', evt => {
                    evt.preventDefault();
                    this.tap(evt, element);
                    evt.stopPropagation();
                });
            }
        }
        return {
            onMove: (event) => {
                this.on(`axis_onmove_${element.id}`, delta => {
                    event(delta);
                });
            }
        };
    }
    addButton(config = {}) {
        this.id++;
        const { styles = { right: 35, bottom: 35, size: 80 }, letter: l = 'A' } = config;
        const circle = this.circle({ styles });
        const letter = this.letter({ letter: l });
        circle.appendChild(letter);
        document.body.appendChild(circle);
        // element
        const element = {
            id: this.id,
            domElement: circle,
            offset: { x: 0, y: 0 }
        };
        if (element === null || element === void 0 ? void 0 : element.domElement) {
            this.click(element);
        }
        return {
            onClick: (event) => {
                this.on(`button_onclick_${element.id}`, data => {
                    event(data);
                });
            },
            onRelease: (event) => {
                this.on(`button_onrelease_${element.id}`, data => {
                    event(data);
                });
            }
        };
    }
    circle(config = {}) {
        const { styles } = config;
        const { top, right, bottom, left, size } = styles;
        const circle = document.createElement('div');
        let css = `position:absolute; width:${size}px; height:${size}px; background:rgba(126, 126, 126, 0.5); border:#444 solid medium; border-radius:50%; cursor: pointer; `;
        if (top)
            css += `top:${top}px; `;
        if (right)
            css += `right:${right}px; `;
        if (bottom)
            css += `bottom:${bottom}px; `;
        if (left)
            css += `left:${left}px; `;
        circle.style.cssText = css;
        return circle;
    }
    thumb(config = {}) {
        const { styles } = config;
        const { size } = styles;
        const thumb = document.createElement('div');
        thumb.style.cssText = `position: absolute; left: ${size / 4}px; top: ${size / 4}px; width: ${size / 2}px; height: ${size / 2}px; border-radius: 50%; background: #fff; `;
        return thumb;
    }
    letter(config = {}) {
        const { letter: l } = config;
        const letter = document.createElement('span');
        letter.innerText = l;
        letter.style.cssText =
            'position: absolute; text-align: center; top: 4px; width: 80px; height: 80px; font-size: 64px; color: #fff; ';
        return letter;
    }
    click(element) {
        const { id, domElement } = element;
        if ('ontouchstart' in window) {
            domElement.addEventListener('touchstart', evt => {
                evt.preventDefault();
                this.emit(`button_onclick_${id}`);
            });
            domElement.addEventListener('touchend', evt => {
                evt.preventDefault();
                this.emit(`button_onrelease_${id}`);
            });
        }
        else {
            domElement.addEventListener('mousedown', evt => {
                evt.preventDefault();
                this.emit(`button_onclick_${id}`);
                evt.stopPropagation();
            });
            domElement.addEventListener('mouseup', evt => {
                evt.preventDefault();
                this.emit(`button_onrelease_${id}`);
                evt.stopPropagation();
            });
        }
    }
    tap(evt, element) {
        evt = evt || window.event;
        // get the mouse cursor position at startup:
        element.offset = this.getMousePosition(evt);
        if ('ontouchstart' in window) {
            document.ontouchmove = evt => {
                if (evt.target === element.domElement)
                    this.move(evt, element);
            };
            document.ontouchend = evt => {
                if (evt.target === element.domElement)
                    this.up(element);
            };
        }
        else {
            document.onmousemove = evt => {
                if (evt.target === element.domElement)
                    this.move(evt, element);
            };
            document.onmouseup = _evt => {
                this.up(element);
            };
        }
    }
    move(evt, element) {
        const { domElement, maxRadius, maxRadiusSquared, origin, offset, id } = element;
        evt = evt || window.event;
        const mouse = this.getMousePosition(evt);
        // calculate the new cursor position:
        let left = mouse.x - offset.x;
        let top = mouse.y - offset.y;
        //this.offset = mouse;
        const sqMag = left * left + top * top;
        if (sqMag > maxRadiusSquared) {
            //Only use sqrt if essential
            const magnitude = Math.sqrt(sqMag);
            left /= magnitude;
            top /= magnitude;
            left *= maxRadius;
            top *= maxRadius;
        }
        // set the element's new position:
        domElement.style.top = `${top + domElement.clientHeight / 2}px`;
        domElement.style.left = `${left + domElement.clientWidth / 2}px`;
        const forward = -(top - origin.top + domElement.clientHeight / 2) / maxRadius;
        const turn = (left - origin.left + domElement.clientWidth / 2) / maxRadius;
        this.emit(`axis_onmove_${id}`, { top: forward, right: turn });
    }
    up(element) {
        const { domElement, origin, id } = element;
        if ('ontouchstart' in window) {
            document.ontouchmove = null;
            // @ts-ignore
            document.touchend = null;
        }
        else {
            document.onmousemove = null;
            document.onmouseup = null;
        }
        domElement.style.top = `${origin.top}px`;
        domElement.style.left = `${origin.left}px`;
        this.emit(`axis_onmove_${id}`, { top: 0, right: 0 });
    }
    getMousePosition(evt) {
        // @ts-ignore
        let clientX = evt.targetTouches ? evt.targetTouches[0].pageX : evt.clientX;
        // @ts-ignore
        let clientY = evt.targetTouches ? evt.targetTouches[0].pageY : evt.clientY;
        return { x: clientX, y: clientY };
    }
}
exports.JoyStick = JoyStick;
//# sourceMappingURL=joystick.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/common/dist/misc/pointerDrag.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/common/dist/misc/pointerDrag.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.PointerDrag = void 0;
class PointerDrag {
    constructor(_element, autoStart = true) {
        this._element = _element;
        this._isRunning = false;
        this._position = { x: 0, y: 0 };
        this._delta = { x: 0, y: 0 };
        this._onMoveCallback = () => { };
        this._isPointerDown = false;
        if (autoStart)
            this.start();
    }
    get isTouchDevice() {
        return 'ontouchstart' in window;
    }
    get isPointerDown() {
        return this._isPointerDown;
    }
    start() {
        if (this._isRunning)
            return;
        this._isRunning = true;
        if (this.isTouchDevice) {
            this._element.addEventListener('touchstart', e => this.onTouchStart(e));
            this._element.addEventListener('touchend', e => this.onTouchEnd(e));
            this._element.addEventListener('touchmove', e => this.onTouchMove(e));
        }
        else {
            this._element.addEventListener('mousedown', e => this.onPointerDown(e));
            this._element.addEventListener('mouseup', e => this.onPointerUp(e));
            this._element.addEventListener('mouseleave', e => this.onPointerLeave(e));
            this._element.addEventListener('mouseover', e => this.onPointerOver(e));
            this._element.addEventListener('mousemove', e => this.onPointerMove(e));
        }
    }
    stop() {
        if (this.isTouchDevice) {
            this._element.removeEventListener('touchstart', e => this.onTouchStart(e));
            this._element.removeEventListener('touchend', e => this.onTouchEnd(e));
            this._element.removeEventListener('touchmove', e => this.onTouchMove(e));
        }
        else {
            this._element.removeEventListener('mousedown', e => this.onPointerDown(e));
            this._element.removeEventListener('mouseleave', e => this.onPointerLeave(e));
            this._element.removeEventListener('mouseup', e => this.onPointerUp(e));
            this._element.removeEventListener('mouseover', e => this.onPointerOver(e));
            this._element.removeEventListener('mousemove', e => this.onPointerMove(e));
        }
        this._isRunning = false;
    }
    removeListeners() {
        this.stop();
    }
    onMove(onMoveCallback) {
        this._onMoveCallback = onMoveCallback;
    }
    onPointerDown(_e) {
        this._isPointerDown = true;
    }
    onPointerUp(_e) {
        this._isPointerDown = false;
    }
    onPointerLeave(_e) {
        this._isPointerDown = false;
    }
    onPointerMove(e) {
        const clientX = e.movementX;
        const clientY = e.movementY;
        this._delta = { x: clientX, y: clientY };
        this._onMoveCallback(this._delta);
    }
    onPointerOver(_e) { }
    onTouchStart(e) {
        const clientX = e.touches[0].clientX;
        const clientY = e.touches[0].clientY;
        this._position = { x: clientX, y: clientY };
    }
    onTouchEnd(_e) {
        this._position = { x: 0, y: 0 };
        this._delta = { x: 0, y: 0 };
        this._onMoveCallback(this._delta);
    }
    onTouchMove(e) {
        const clientX = e.touches[0].clientX;
        const clientY = e.touches[0].clientY;
        this._delta = { x: clientX - this._position.x, y: clientY - this._position.y };
        this._onMoveCallback(this._delta);
        this._position = { x: clientX, y: clientY };
    }
}
exports.PointerDrag = PointerDrag;
//# sourceMappingURL=pointerDrag.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/common/dist/misc/pointerLock.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/common/dist/misc/pointerLock.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.PointerLock = void 0;
class PointerLock {
    constructor(_element, autoLock = true) {
        this._element = _element;
        this._isRunning = false;
        if (autoLock)
            this.request();
    }
    isLocked() {
        return !!document.pointerLockElement;
    }
    exit() {
        this._isRunning = false;
        document.exitPointerLock();
        this.removeListeners();
    }
    removeListeners() {
        document.removeEventListener('pointerlockchange', () => this.pointerLockChangeHandler());
        this._element.removeEventListener('pointerdown', () => this.pointerDownHandlerHandler());
    }
    pointerLockChangeHandler() {
        if (!this._isRunning)
            return;
        this._request();
    }
    pointerDownHandlerHandler() {
        if (!this._isRunning)
            return;
        this._element.requestPointerLock();
    }
    request() {
        this._isRunning = true;
        this._request();
    }
    _request() {
        // listen to pointer lock change events
        document.addEventListener('pointerlockchange', () => this.pointerLockChangeHandler(), {
            once: true
        });
        // return if pointer is already locked
        if (!!document.pointerLockElement)
            return;
        // listen for pointerdown event
        this._element.addEventListener('pointerdown', () => this.pointerDownHandlerHandler(), { once: true });
    }
}
exports.PointerLock = PointerLock;
//# sourceMappingURL=pointerLock.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/common/dist/misc/thirdPersonControls.js":
/*!**********************************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/common/dist/misc/thirdPersonControls.js ***!
  \**********************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

/**
 * @description  This code has originally been copied from Sketchbook
 *
 * @author       swift502 <blaha.j502@gmail.com> (http://jblaha.art/)
 * @copyright    Copyright (c) 2018 swift502; Project Url: https://github.com/swift502/Sketchbook
 * @license      {@link https://github.com/swift502/Sketchbook/blob/master/LICENSE|GPL-3.0}
 *
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ThirdPersonControls = void 0;
const dist_1 = __webpack_require__(/*! @enable3d/three-wrapper/dist */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
class ThirdPersonControls {
    constructor(camera, target, config) {
        this.camera = camera;
        this.target = target;
        this.config = config;
        const { offset = new dist_1.Vector3(0, 0, 0), sensitivity = new dist_1.Vector2(1, 1), radius = 8, targetRadius = 10, interpolationFactor = 0.05, pointerLock = true, autoUpdate = true, theta = 0, phi = 0, 
        /** Max Phi in deg */
        maxPhi = 85, 
        /** Min Phi in deg */
        minPhi = -85 } = config;
        this.offset = offset;
        this.sensitivity = sensitivity;
        this.radius = radius;
        this.targetRadius = targetRadius;
        this.interpolationFactor = interpolationFactor;
        this.theta = theta;
        this.phi = phi;
        this.maxPhi = maxPhi;
        this.minPhi = minPhi;
        // if (pointerLock) {
        //   scene.input.on('pointerdown', () => {
        //     scene.input.mouse.requestPointerLock()
        //   })
        //   scene.input.on('pointermove', (pointer: PointerEvent) => {
        //     if (scene.input.mouse.locked) {
        //       this.update(pointer.movementX, pointer.movementY)
        //     }
        //   })
        // }
        // if (autoUpdate) {
        //   scene.events.on('update', () => {
        //     this.update(0, 0)
        //   })
        // }
    }
    update(deltaX, deltaY) {
        const target = this.target.position.clone().add(this.offset);
        this.theta -= deltaX * (this.sensitivity.x / 2);
        this.theta %= 360;
        this.phi += deltaY * (this.sensitivity.y / 2);
        this.phi = Math.min(this.maxPhi, Math.max(this.minPhi, this.phi));
        this.radius = dist_1.MathUtils.lerp(this.radius, this.targetRadius, this.interpolationFactor);
        this.camera.position.x =
            target.x + this.radius * Math.sin((this.theta * Math.PI) / 180) * Math.cos((this.phi * Math.PI) / 180);
        this.camera.position.y = target.y + this.radius * Math.sin((this.phi * Math.PI) / 180);
        this.camera.position.z =
            target.z + this.radius * Math.cos((this.theta * Math.PI) / 180) * Math.cos((this.phi * Math.PI) / 180);
        this.camera.updateMatrix();
        this.camera.lookAt(target);
    }
}
exports.ThirdPersonControls = ThirdPersonControls;
//# sourceMappingURL=thirdPersonControls.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/common/dist/misc/water.js":
/*!********************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/common/dist/misc/water.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.addWater = void 0;
const index_1 = __webpack_require__(/*! @enable3d/three-wrapper/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
const addWater = (scene, renderer, config = {}) => {
    const { width = 20, height = 20, x = 0, y = 0, z = 0, color = '#ffffff', scale = 4, flowX = 1, flowY = 1, normalMap0 = undefined, normalMap1 = undefined } = config;
    //ground
    const groundGeometry = new index_1.PlaneBufferGeometry(width, height);
    // #0077be (also known as Ocean Boat Blue)
    const groundMaterial = new index_1.MeshStandardMaterial({ color: 0x0077be, transparent: true, opacity: 0.8 });
    const ground = new index_1.Mesh(groundGeometry, groundMaterial);
    ground.position.set(x, y, z);
    ground.rotation.x = Math.PI * -0.5;
    scene.add(ground);
    // water
    const waterGeometry = new index_1.PlaneBufferGeometry(width, height);
    const water = new index_1.Water(waterGeometry, {
        color: color,
        scale: scale,
        flowDirection: new index_1.Vector2(flowX, flowY),
        textureWidth: 1024,
        textureHeight: 1024,
        normalMap0: normalMap0,
        normalMap1: normalMap1,
        encoding: renderer.outputEncoding
    });
    water.position.set(x, y + 0.1, z);
    water.rotation.x = Math.PI * -0.5;
    scene.add(water);
    return { ground, water };
};
exports.addWater = addWater;
//# sourceMappingURL=water.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/common/dist/physicsBody.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/common/dist/physicsBody.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */
Object.defineProperty(exports, "__esModule", ({ value: true }));
const eventemitter3_1 = __webpack_require__(/*! eventemitter3 */ "./node_modules/eventemitter3/index.js");
const index_1 = __webpack_require__(/*! @enable3d/three-wrapper/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
class PhysicsBody {
    constructor(physics, ammo) {
        this.physics = physics;
        this.ammo = ammo;
        this.ignoreScale = false;
        this.isSoftBody = false;
        this.offset = { x: 0, y: 0, z: 0 };
        this.errors = [];
        this.checkCollisions = false;
        this.breakable = false;
        this.didUpdate = false;
        /** Skip syncing the mesh to the physics body. */
        this.skipUpdate = false;
        this._emitUpdateEvents = false;
        this._needUpdate = false;
        this.tmpEuler = new index_1.Euler();
        this.tmpQuaternion = new index_1.Quaternion();
        this.tmpBtVector3 = new Ammo.btVector3();
        this.tmpBtVector3_1 = new Ammo.btVector3();
        this.tmpBtQuaternion = new Ammo.btQuaternion(0, 0, 0, 1);
        this.eventEmitter = new eventemitter3_1.EventEmitter();
        // @ts-ignore
        this.name = ammo.name;
    }
    /**
     * Don't call this manually! Do physics.destroy() instead.
     */
    destructor() {
        // remove events
        if (this.eventEmitter)
            this.eventEmitter.removeAllListeners();
        // destroy tmp ammo values
        Ammo.destroy(this.tmpBtVector3);
        Ammo.destroy(this.tmpBtVector3_1);
        Ammo.destroy(this.tmpBtQuaternion);
        // destory collision shape
        Ammo.destroy(this.ammo.getCollisionShape());
        // destroy body
        Ammo.destroy(this.ammo);
    }
    setupEventEmitter() {
        if (typeof this.eventEmitter === 'undefined')
            this.eventEmitter = new eventemitter3_1.EventEmitter();
    }
    get needUpdate() {
        return this._needUpdate;
    }
    set needUpdate(need) {
        if (!need && this._needUpdate)
            this.didUpdate = true;
        this._needUpdate = need;
    }
    onUpdateEvent(updateCallback, once = false) {
        this.setupEventEmitter();
        this._emitUpdateEvents = true;
        if (once)
            this.eventEmitter.once('update', () => {
                updateCallback();
            });
        else
            this.eventEmitter.on('update', () => {
                updateCallback();
            });
    }
    get on() {
        return {
            update: (updateCallback) => this.onUpdateEvent(updateCallback),
            collision: (collisionCallback) => this.onCollision(collisionCallback)
        };
    }
    get once() {
        return {
            update: (updateCallback) => this.onUpdateEvent(updateCallback, true)
        };
    }
    onCollision(collisionCallback) {
        this.checkCollisions = true;
        this.physics.collisionEvents.on('collision', (data) => {
            const { bodies, event } = data;
            if (bodies[0].name === this.name)
                collisionCallback(bodies[1], event);
            else if (bodies[1].name === this.name)
                collisionCallback(bodies[0], event);
        });
    }
    /** You have to call transform() before you can get or set the body's position or rotation. (for headless mode only) */
    transform() {
        const t = this.physics.worldTransform;
        this.ammo.getMotionState().getWorldTransform(t);
    }
    /** You have to call refresh() after you set the position or rotation of the body. (for headless mode only) */
    refresh() {
        const t = this.physics.worldTransform;
        this.ammo.getMotionState().setWorldTransform(t);
    }
    /** Set the rotation in radians. (for headless mode only) */
    setRotation(x, y, z) {
        const e = this.tmpEuler.set(x, y, z);
        const q = this.tmpQuaternion.set(0, 0, 0, 1);
        q.setFromEuler(e);
        this.tmpBtQuaternion.setValue(0, 0, 0, 1);
        const ammoQuat = this.tmpBtQuaternion;
        ammoQuat.setValue(q.x, q.y, q.z, q.w);
        const t = this.physics.worldTransform;
        t.setRotation(ammoQuat);
    }
    /** Get the rotation in radians. (for headless mode only) */
    get rotation() {
        // https://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/index.htm
        let x, y, z;
        const t = this.physics.worldTransform;
        const ammoQuat = t.getRotation();
        let q1 = this.tmpQuaternion.set(ammoQuat.x(), ammoQuat.y(), ammoQuat.z(), ammoQuat.w());
        if (q1.w > 1)
            q1 = q1.normalize(); // if w>1 acos and sqrt will produce errors, this cant happen if quaternion is normalized
        const angle = 2 * Math.acos(q1.w);
        const s = Math.sqrt(1 - q1.w * q1.w); // assuming quaternion normalized then w is less than 1, so term always positive.
        if (s < 0.001) {
            // test to avoid divide by zero, s is always positive due to sqrt
            // if s close to zero then direction of axis not important
            x = q1.x; // if it is important that axis is normalized then replace with x=1; y=z=0;
            y = q1.y;
            z = q1.z;
        }
        else {
            x = q1.x / s; // normalized axis
            y = q1.y / s;
            z = q1.z / s;
        }
        return { x: x * angle, y: y * angle, z: z * angle };
    }
    /** Set position. (for headless mode only) */
    setPosition(x, y, z) {
        const t = this.physics.worldTransform;
        t.getOrigin().setValue(x, y, z);
    }
    /** Get position. (for headless mode only) */
    get position() {
        const t = this.physics.worldTransform;
        return { x: t.getOrigin().x(), y: t.getOrigin().y(), z: t.getOrigin().z() };
    }
    get velocity() {
        return {
            x: this.ammo.getLinearVelocity().x(),
            y: this.ammo.getLinearVelocity().y(),
            z: this.ammo.getLinearVelocity().z()
        };
    }
    get angularVelocity() {
        return {
            x: this.ammo.getAngularVelocity().x(),
            y: this.ammo.getAngularVelocity().y(),
            z: this.ammo.getAngularVelocity().z()
        };
    }
    setVelocity(x, y, z) {
        this.tmpBtVector3.setValue(x, y, z);
        this.ammo.setLinearVelocity(this.tmpBtVector3);
    }
    setVelocityX(value) {
        this.tmpBtVector3.setValue(value, this.velocity.y, this.velocity.z);
        this.ammo.setLinearVelocity(this.tmpBtVector3);
    }
    setVelocityY(value) {
        this.tmpBtVector3.setValue(this.velocity.x, value, this.velocity.z);
        this.ammo.setLinearVelocity(this.tmpBtVector3);
    }
    setVelocityZ(value) {
        this.tmpBtVector3.setValue(this.velocity.x, this.velocity.y, value);
        this.ammo.setLinearVelocity(this.tmpBtVector3);
    }
    setAngularVelocity(x, y, z) {
        this.tmpBtVector3.setValue(x, y, z);
        this.ammo.setAngularVelocity(this.tmpBtVector3);
    }
    setAngularVelocityX(value) {
        this.tmpBtVector3.setValue(value, this.angularVelocity.y, this.angularVelocity.z);
        this.ammo.setAngularVelocity(this.tmpBtVector3);
    }
    setAngularVelocityY(value) {
        this.tmpBtVector3.setValue(this.angularVelocity.x, value, this.angularVelocity.z);
        this.ammo.setAngularVelocity(this.tmpBtVector3);
    }
    setAngularVelocityZ(value) {
        this.tmpBtVector3.setValue(this.angularVelocity.x, this.angularVelocity.y, value);
        this.ammo.setAngularVelocity(this.tmpBtVector3);
    }
    // Apply Force methods
    applyForce(x, y, z) {
        this.tmpBtVector3.setValue(x, y, z);
        this.ammo.applyCentralImpulse(this.tmpBtVector3);
    }
    applyForceX(value) {
        this.tmpBtVector3.setValue(value, 0, 0);
        this.ammo.applyCentralImpulse(this.tmpBtVector3);
    }
    applyForceY(value) {
        this.tmpBtVector3.setValue(0, value, 0);
        this.ammo.applyCentralImpulse(this.tmpBtVector3);
    }
    applyForceZ(value) {
        this.tmpBtVector3.setValue(0, 0, value);
        this.ammo.applyCentralImpulse(this.tmpBtVector3);
    }
    // Apply "Something" Methods
    applyCentralForce(x, y, z) {
        this.tmpBtVector3.setValue(x, y, z);
        this.ammo.applyCentralForce(this.tmpBtVector3);
    }
    applyCentralImpulse(x, y, z) {
        this.tmpBtVector3.setValue(x, y, z);
        this.ammo.applyCentralImpulse(this.tmpBtVector3);
    }
    applyCentralLocalForce(x, y, z) {
        this.tmpBtVector3.setValue(x, y, z);
        this.ammo.applyCentralLocalForce(this.tmpBtVector3);
    }
    applyImpulse(impulse, relativePosition) {
        this.tmpBtVector3.setValue(impulse.x || 0, impulse.y || 0, impulse.z || 0);
        this.tmpBtVector3_1.setValue(relativePosition.x || 0, relativePosition.y || 0, relativePosition.z || 0);
        this.ammo.applyImpulse(this.tmpBtVector3, this.tmpBtVector3_1);
    }
    applyLocalTorque(x, y, z) {
        this.tmpBtVector3.setValue(x, y, z);
        this.ammo.applyLocalTorque(this.tmpBtVector3);
    }
    applyTorque(x, y, z) {
        this.tmpBtVector3.setValue(x, y, z);
        this.ammo.applyTorque(this.tmpBtVector3);
    }
    applyTorqueImpulse(x, y, z) {
        this.tmpBtVector3.setValue(x, y, z);
        this.ammo.applyTorqueImpulse(this.tmpBtVector3);
    }
    /**
     * Add the collision flags
     * @param value 0 is DYNAMIC, 1 is STATIC, 2 is KINEMATIC, 4 GHOST
     */
    // https://github.com/bulletphysics/bullet3/blob/aae8048722f2596f7e2bdd52d2a1dcb52a218f2b/src/BulletCollision/CollisionDispatch/btCollisionObject.h#L128
    setCollisionFlags(value) {
        this.ammo.setCollisionFlags(value);
    }
    /**
     * Get the collision flags
     * @param value 0 is DYNAMIC, 1 is STATIC, 2 is KINEMATIC, 4 GHOST
     */
    getCollisionFlags() {
        return this.ammo.getCollisionFlags();
    }
    /**
     * Set the restitution (same as bounciness)
     * @param value A number from 0 to 1.
     */
    setRestitution(value) {
        this.ammo.setRestitution(value);
    }
    /**
     * Set the bounciness (same as restitution)
     * @param value A number from 0 to 1.
     */
    setBounciness(value) {
        this.setRestitution(value);
    }
    /**
     * Set the friction
     * @param value A number from 0 to 1.
     */
    setFriction(value) {
        this.ammo.setFriction(value);
    }
    /** Set per body gravity */
    setGravity(x, y, z) {
        this.tmpBtVector3.setValue(x, y, z);
        this.ammo.setGravity(this.tmpBtVector3);
    }
    setLinearFactor(x, y, z) {
        this.tmpBtVector3.setValue(x, y, z);
        this.ammo.setLinearFactor(this.tmpBtVector3);
    }
    setAngularFactor(x, y, z) {
        this.tmpBtVector3.setValue(x, y, z);
        this.ammo.setAngularFactor(this.tmpBtVector3);
    }
    setCcdMotionThreshold(threshold) {
        this.ammo.setCcdMotionThreshold(threshold);
    }
    setCcdSweptSphereRadius(radius) {
        this.ammo.setCcdSweptSphereRadius(radius);
    }
}
exports.default = PhysicsBody;
//# sourceMappingURL=physicsBody.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/common/dist/physicsLoader.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/common/dist/physicsLoader.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.PhysicsLoader = void 0;
const wasmLoader_1 = __webpack_require__(/*! ./wasmLoader */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/wasmLoader.js");
const PhysicsLoader = (path, callback) => {
    if (typeof window !== 'undefined')
        window.__loadPhysics = true;
    wasmLoader_1.default(path, () => {
        Ammo().then(() => {
            callback();
        });
    });
};
exports.PhysicsLoader = PhysicsLoader;
//# sourceMappingURL=physicsLoader.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/common/dist/types.js":
/*!***************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/common/dist/types.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Group = exports.Points = exports.Line = exports.Material = exports.Mesh = exports.Object3D = exports.AnimationAction = exports.AnimationClip = exports.AnimationMixer = exports.ExtendedMesh = exports.ExtendedObject3D = void 0;
const extendedObject3D_1 = __webpack_require__(/*! ./extendedObject3D */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/extendedObject3D.js");
Object.defineProperty(exports, "ExtendedObject3D", ({ enumerable: true, get: function () { return extendedObject3D_1.ExtendedObject3D; } }));
const extendedMesh_1 = __webpack_require__(/*! ./extendedMesh */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/extendedMesh.js");
Object.defineProperty(exports, "ExtendedMesh", ({ enumerable: true, get: function () { return extendedMesh_1.ExtendedMesh; } }));
// TODO fix this export
// export { ThirdPersonControls } from '../misc/thirdPersonControls'
var index_1 = __webpack_require__(/*! @enable3d/three-wrapper/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
Object.defineProperty(exports, "AnimationMixer", ({ enumerable: true, get: function () { return index_1.AnimationMixer; } }));
Object.defineProperty(exports, "AnimationClip", ({ enumerable: true, get: function () { return index_1.AnimationClip; } }));
Object.defineProperty(exports, "AnimationAction", ({ enumerable: true, get: function () { return index_1.AnimationAction; } }));
Object.defineProperty(exports, "Object3D", ({ enumerable: true, get: function () { return index_1.Object3D; } }));
Object.defineProperty(exports, "Mesh", ({ enumerable: true, get: function () { return index_1.Mesh; } }));
Object.defineProperty(exports, "Material", ({ enumerable: true, get: function () { return index_1.Material; } }));
Object.defineProperty(exports, "Line", ({ enumerable: true, get: function () { return index_1.Line; } }));
Object.defineProperty(exports, "Points", ({ enumerable: true, get: function () { return index_1.Points; } }));
Object.defineProperty(exports, "Group", ({ enumerable: true, get: function () { return index_1.Group; } }));
//# sourceMappingURL=types.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/common/dist/typesAmmo.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/common/dist/typesAmmo.js ***!
  \*******************************************************************************/
/***/ (() => {

"use strict";

//# sourceMappingURL=typesAmmo.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/common/dist/typesCustom.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/common/dist/typesCustom.js ***!
  \*********************************************************************************/
/***/ (() => {

"use strict";

//# sourceMappingURL=typesCustom.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/common/dist/wasmLoader.js":
/*!********************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/common/dist/wasmLoader.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
// Inspired by https://github.com/playcanvas/engine/blob/master/examples/wasm-loader.js
const wasmSupported = (() => {
    try {
        if (typeof WebAssembly === 'object' && typeof WebAssembly.instantiate === 'function') {
            const module = new WebAssembly.Module(Uint8Array.of(0x0, 0x61, 0x73, 0x6d, 0x01, 0x00, 0x00, 0x00));
            if (module instanceof WebAssembly.Module)
                return new WebAssembly.Instance(module) instanceof WebAssembly.Instance;
        }
    }
    catch (e) { }
    return false;
})();
const loadScriptAsync = (url, doneCallback) => {
    var tag = document.createElement('script');
    tag.onload = () => {
        doneCallback();
    };
    tag.onerror = () => {
        throw new Error('failed to load ' + url);
    };
    tag.async = true;
    tag.src = url;
    document.head.appendChild(tag);
};
const loadAmmoModule = (path, doneCallback) => {
    // console.log(wasmSupported ? 'WebAssembly is supported' : 'WebAssembly is not supported')
    if (wasmSupported)
        loadScriptAsync(`${path}/ammo.wasm.js`, () => doneCallback());
    else
        loadScriptAsync(`${path}/ammo.js`, () => doneCallback());
};
exports.default = loadAmmoModule;
//# sourceMappingURL=wasmLoader.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/core.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/core.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ThreeGraphics = void 0;
const THREE = __webpack_require__(/*! @enable3d/three-wrapper/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
const cameras_1 = __webpack_require__(/*! ./plugins/cameras */ "./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/cameras.js");
const index_1 = __webpack_require__(/*! @enable3d/ammo-physics/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/index.js");
class ThreeGraphics {
    constructor(threeGraphicsConfig = {}) {
        this.threeGraphicsConfig = threeGraphicsConfig;
        const { anisotropy = 1, camera = cameras_1.default.Perspective({ z: 25, y: 5 }), antialias = false, usePhysics = true, renderer } = threeGraphicsConfig;
        this.textureAnisotropy = anisotropy;
        this.camera = camera;
        this.scene = new THREE.Scene();
        // this.renderer.physicallyCorrectLights = true
        this.renderer = renderer || new THREE.WebGLRenderer({ antialias });
        // see https://threejs.org/docs/#examples/en/loaders/GLTFLoader
        // this.renderer.outputEncoding = sRGBEncoding
        // shadow
        this.renderer.shadowMap.enabled = true;
        this.renderer.shadowMap.type = THREE.PCFSoftShadowMap;
        // enable cache
        this.cache = THREE.Cache;
        this.cache.enabled = true;
        if (usePhysics) {
            if (typeof Ammo !== 'undefined')
                this.physics = new index_1.AmmoPhysics(this.scene, threeGraphicsConfig);
            else
                console.log('[enable3d]: Are you sure you included ammo.js?');
        }
    }
}
exports.ThreeGraphics = ThreeGraphics;
//# sourceMappingURL=core.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/index.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/index.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.MathUtils = exports.Vector3 = exports.Vector2 = exports.Object3D = exports.FBXLoader = exports.GLTFLoader = exports.RGBAFormat = exports.Texture = exports.WebGLRenderer = exports.Types = exports.THREE = exports.PhysicsLoader = exports.ThreeGraphics = void 0;
const core_1 = __webpack_require__(/*! ./core */ "./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/core.js");
Object.defineProperty(exports, "ThreeGraphics", ({ enumerable: true, get: function () { return core_1.ThreeGraphics; } }));
const physicsLoader_1 = __webpack_require__(/*! @enable3d/common/dist/physicsLoader */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/physicsLoader.js");
Object.defineProperty(exports, "PhysicsLoader", ({ enumerable: true, get: function () { return physicsLoader_1.PhysicsLoader; } }));
const THREE = __webpack_require__(/*! @enable3d/three-wrapper/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
exports.THREE = THREE;
const Types = __webpack_require__(/*! @enable3d/common/dist/types */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/types.js");
exports.Types = Types;
const version_1 = __webpack_require__(/*! ./version */ "./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/version.js");
var index_1 = __webpack_require__(/*! @enable3d/three-wrapper/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
Object.defineProperty(exports, "WebGLRenderer", ({ enumerable: true, get: function () { return index_1.WebGLRenderer; } }));
Object.defineProperty(exports, "Texture", ({ enumerable: true, get: function () { return index_1.Texture; } }));
Object.defineProperty(exports, "RGBAFormat", ({ enumerable: true, get: function () { return index_1.RGBAFormat; } }));
Object.defineProperty(exports, "GLTFLoader", ({ enumerable: true, get: function () { return index_1.GLTFLoader; } }));
Object.defineProperty(exports, "FBXLoader", ({ enumerable: true, get: function () { return index_1.FBXLoader; } }));
Object.defineProperty(exports, "Object3D", ({ enumerable: true, get: function () { return index_1.Object3D; } }));
Object.defineProperty(exports, "Vector2", ({ enumerable: true, get: function () { return index_1.Vector2; } }));
Object.defineProperty(exports, "Vector3", ({ enumerable: true, get: function () { return index_1.Vector3; } }));
Object.defineProperty(exports, "MathUtils", ({ enumerable: true, get: function () { return index_1.MathUtils; } }));
const info = `Powered by enable3d v${version_1.VERSION}`;
console.log(`%c %c %c %c %c ${info} %c https://enable3d.io/`, 'background: #ff0000', 'background: #ffff00', 'background: #00ff00', 'background: #00ffff', 'color: #fff; background: #000000;', 'background: none');
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/cameras.js":
/*!*********************************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/cameras.js ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */
Object.defineProperty(exports, "__esModule", ({ value: true }));
const index_1 = __webpack_require__(/*! @enable3d/three-wrapper/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
class Cameras {
    perspectiveCamera(config = {}) {
        return Cameras.Perspective(config);
    }
    orthographicCamera(config = {}) {
        return Cameras.Orthographic(config);
    }
    static Perspective(config = {}) {
        // for phaser
        // aspect = scene.scale.gameSize.aspectRatio
        const { fov = 50, aspect = window.innerWidth / window.innerHeight, near = 0.1, far = 2000, x = 0, y = 0, z = 0 } = config;
        const camera = new index_1.PerspectiveCamera(fov, aspect, near, far);
        camera.position.set(x, y, z);
        return camera;
    }
    static Orthographic(config = {}) {
        // for phaser
        // const { width, height } = scene.cameras.main
        const width = window.innerWidth;
        const height = window.innerHeight;
        const { left = width / -100, right = width / 100, top = height / 100, bottom = height / -100, near = 1, far = 1000, x = 0, y = 0, z = 0 } = config;
        const camera = new index_1.OrthographicCamera(left, right, top, bottom, near, far);
        camera.position.set(x, y, z);
        return camera;
    }
}
exports.default = Cameras;
//# sourceMappingURL=cameras.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/csg.js":
/*!*****************************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/csg.js ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */
Object.defineProperty(exports, "__esModule", ({ value: true }));
// Originally copied from https://github.com/Hi-Level/three-csg
// which is a typescript rewrite of https://github.com/manthrax/THREE-CSGMesh
// which as originally written by Copyright (c) 2011 Evan Wallace (http://madebyevan.com/), under the MIT license.
const index_1 = __webpack_require__(/*! @enable3d/three-wrapper/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
/**
 * CSG wrapper for enable3d
 *
 * The CSG library does not support buffer geometries.
 * Means we first make sure we are dealing with geometries
 * and then transform them back to buffer geometries.
 */
class CSGWrapper {
    constructor(scene, transform) {
        this.scene = scene;
        this.transform = transform;
    }
    toGeometry(meshA, meshB) {
        // @ts-ignore
        meshA.geometry = this.transform.bufferGeometryToGeometry(meshA.geometry);
        // @ts-ignore
        meshB.geometry = this.transform.bufferGeometryToGeometry(meshB.geometry);
    }
    toBufferGeometry(meshC) {
        // @ts-ignore
        meshC.geometry = this.transform.geometryToBufferGeometry(meshC.geometry);
    }
    union(meshA, meshB) {
        this.toGeometry(meshA, meshB);
        const meshC = this.doCSG(meshA, meshB, 'union');
        this.toBufferGeometry(meshC);
        return meshC;
    }
    subtract(meshA, meshB) {
        this.toGeometry(meshA, meshB);
        const meshC = this.doCSG(meshA, meshB, 'subtract');
        this.toBufferGeometry(meshC);
        return meshC;
    }
    intersect(meshA, meshB) {
        this.toGeometry(meshA, meshB);
        const meshC = this.doCSG(meshA, meshB, 'intersect');
        this.toBufferGeometry(meshC);
        return meshC;
    }
    doCSG(meshA, meshB, operation) {
        meshA.updateMatrix();
        meshB.updateMatrix();
        const bspA = CSG.fromMesh(meshA);
        const bspB = CSG.fromMesh(meshB);
        // @ts-ignore
        const bspC = bspA[operation](bspB);
        const result = CSG.toMesh(bspC, meshA.matrix);
        return result;
    }
}
exports.default = CSGWrapper;
/**
 * CSG (Constructive Solid Geometry) library for three.js with Typescript support.
 * Holds a binary space partition tree representing a 3D solid. Two solids can
 * be combined using the `union()`, `subtract()`, and `intersect()` methods.
 */
class CSG {
    constructor() {
        this.polygons = [];
    }
    static fromPolygons(polygons) {
        const csg = new CSG();
        csg.polygons = polygons;
        return csg;
    }
    static fromGeometry(geom) {
        if (geom.isBufferGeometry) {
            geom = new index_1.Geometry().fromBufferGeometry(geom);
        }
        const fs = geom.faces;
        const vs = geom.vertices;
        const polys = [];
        const fm = ['a', 'b', 'c'];
        for (let i = 0; i < fs.length; i++) {
            const f = fs[i];
            const vertices = [];
            for (let j = 0; j < 3; j++) {
                const uvs = geom.faceVertexUvs[0][i] !== undefined && geom.faceVertexUvs[0][i][j] !== undefined
                    ? geom.faceVertexUvs[0][i][j]
                    : undefined;
                vertices.push(new Vertex(vs[f[fm[j]]], f.vertexNormals[j], uvs));
            }
            polys.push(new Polygon(vertices));
        }
        return CSG.fromPolygons(polys);
    }
    static fromMesh(mesh) {
        const csg = CSG.fromGeometry(mesh.geometry);
        CSG._tmpm3.getNormalMatrix(mesh.matrix);
        for (const p of csg.polygons) {
            for (const v of p.vertices) {
                v.pos.applyMatrix4(mesh.matrix);
                v.normal.applyMatrix3(CSG._tmpm3);
            }
        }
        return csg;
    }
    static toMesh(csg, toMatrix) {
        const geom = new index_1.Geometry();
        const ps = csg.polygons;
        const vs = geom.vertices;
        const fvuv = geom.faceVertexUvs[0];
        for (const p of ps) {
            const pvs = p.vertices;
            const v0 = vs.length;
            const pvlen = pvs.length;
            for (const pv of pvs) {
                vs.push(new index_1.Vector3().copy(pv.pos));
            }
            for (let j = 3; j <= pvlen; j++) {
                const fc = new index_1.Face3(v0, v0 + j - 2, v0 + j - 1);
                const fuv = [];
                fvuv.push(fuv);
                const fnml = fc.vertexNormals;
                fnml.push(new index_1.Vector3().copy(pvs[0].normal));
                fnml.push(new index_1.Vector3().copy(pvs[j - 2].normal));
                fnml.push(new index_1.Vector3().copy(pvs[j - 1].normal));
                // check for uv property
                if (pvs[0].uv && pvs[j - 2].uv && pvs[j - 1].uv) {
                    fuv.push(new index_1.Vector3().copy(pvs[0].uv));
                    fuv.push(new index_1.Vector3().copy(pvs[j - 2].uv));
                    fuv.push(new index_1.Vector3().copy(pvs[j - 1].uv));
                }
                fc.normal = new index_1.Vector3().copy(p.plane.normal);
                geom.faces.push(fc);
            }
        }
        // compatibility fix for three.js >= r123 (Dezember 2020)
        const inv = 
        // @ts-ignore
        +index_1.REVISION >= 123 ? new index_1.Matrix4().copy(toMatrix).invert() : new index_1.Matrix4().getInverse(toMatrix);
        geom.applyMatrix4(inv);
        geom.verticesNeedUpdate = geom.elementsNeedUpdate = geom.normalsNeedUpdate = true;
        geom.computeBoundingSphere();
        geom.computeBoundingBox();
        const m = new index_1.Mesh(geom);
        m.matrix.copy(toMatrix);
        m.matrix.decompose(m.position, m.rotation, m.scale);
        m.updateMatrixWorld();
        return m;
    }
    static iEval(tokens, _index = 0) {
        var _a;
        if (typeof tokens === 'string') {
            CSG.currentOp = tokens;
        }
        else if (tokens instanceof Array) {
            for (const token of tokens) {
                CSG.iEval(token, 0);
            }
        }
        else if (typeof tokens === 'object') {
            const op = CSG.currentOp;
            tokens.updateMatrix();
            tokens.updateMatrixWorld();
            if (!CSG.sourceMesh) {
                CSG.currentPrim = CSG.fromMesh((CSG.sourceMesh = tokens));
            }
            else {
                CSG.nextPrim = CSG.fromMesh(tokens);
                CSG.currentPrim = CSG.currentPrim[op](CSG.nextPrim);
            }
            if (CSG.doRemove)
                (_a = tokens === null || tokens === void 0 ? void 0 : tokens.parent) === null || _a === void 0 ? void 0 : _a.remove(tokens);
        } // union,subtract,intersect,inverse
    }
    static eval(tokens, doRemove) {
        // [['add',mesh,mesh,mesh,mesh],['sub',mesh,mesh,mesh,mesh]]
        // @ts-ignore
        delete CSG.currentOp;
        // @ts-ignore
        delete CSG.sourceMesh;
        CSG.doRemove = doRemove;
        CSG.iEval(tokens);
        const result = CSG.toMesh(CSG.currentPrim, CSG.sourceMesh.matrix);
        result.material = CSG.sourceMesh.material;
        result.castShadow = result.receiveShadow = true;
        return result;
    }
    clone() {
        const csg = new CSG();
        csg.polygons = this.polygons.map(p => {
            return p.clone();
        });
        return csg;
    }
    toPolygons() {
        return this.polygons;
    }
    union(csg) {
        const a = new Node(this.clone().polygons);
        const b = new Node(csg.clone().polygons);
        a.clipTo(b);
        b.clipTo(a);
        b.invert();
        b.clipTo(a);
        b.invert();
        a.build(b.allPolygons());
        return CSG.fromPolygons(a.allPolygons());
    }
    subtract(csg) {
        const a = new Node(this.clone().polygons);
        const b = new Node(csg.clone().polygons);
        a.invert();
        a.clipTo(b);
        b.clipTo(a);
        b.invert();
        b.clipTo(a);
        b.invert();
        a.build(b.allPolygons());
        a.invert();
        return CSG.fromPolygons(a.allPolygons());
    }
    intersect(csg) {
        const a = new Node(this.clone().polygons);
        const b = new Node(csg.clone().polygons);
        a.invert();
        b.clipTo(a);
        b.invert();
        a.clipTo(b);
        b.clipTo(a);
        a.build(b.allPolygons());
        a.invert();
        return CSG.fromPolygons(a.allPolygons());
    }
    inverse() {
        const csg = this.clone();
        csg.polygons.map(p => {
            p.flip();
        });
        return csg;
    }
}
CSG._tmpm3 = new index_1.Matrix3();
/**
 * Represents a 3D vector.
 */
class Vector extends index_1.Vector3 {
    constructor(x, y, z) {
        if (arguments.length === 3) {
            super(x, y, z);
        }
        else if (Array.isArray(x)) {
            super(x[0], x[1], x[2]);
        }
        else if (typeof x === 'object') {
            // @ts-ignore
            this.copy(x);
        }
        else {
            throw new Error('Invalid constructor to vector');
        }
    }
    clone() {
        return new Vector(this.x, this.y, this.z);
    }
    negated() {
        return this.clone().multiplyScalar(-1);
    }
    plus(a) {
        return this.clone().add(a);
    }
    minus(a) {
        return this.clone().sub(a);
    }
    times(a) {
        return this.clone().multiplyScalar(a);
    }
    dividedBy(a) {
        return this.clone().divideScalar(a);
    }
    lerp(a, t) {
        return this.plus(a.minus(this).times(t));
    }
    unit() {
        return this.dividedBy(this.length());
    }
    // @ts-ignore
    cross(a, w) {
        return index_1.Vector3.prototype.cross.call(this.clone(), a);
    }
}
/**
 * Represents a vertex of a polygon. Use your own vertex class instead of this
 * one to provide additional features like texture coordinates and vertex
 * colors. Custom vertex classes need to provide a `pos` property and `clone()`,
 * `flip()`, and `interpolate()` methods that behave analogous to the ones
 * defined by `CSG.Vertex`. This class provides `normal` so convenience
 * functions like `CSG.sphere()` can return a smooth vertex normal, but `normal`
 * is not used anywhere else.
 */
class Vertex {
    constructor(pos, normal, uv) {
        this.pos = new Vector(pos.x, pos.y, pos.z);
        this.normal = new Vector(normal.x, normal.y, normal.z);
        if (uv)
            this.uv = new Vector(uv.x, uv.y, uv.z);
    }
    clone() {
        return new Vertex(this.pos.clone(), this.normal.clone(), this.uv ? this.uv.clone() : undefined);
    }
    // Invert all orientation-specific data (e.g. vertex normal). Called when the
    // orientation of a polygon is flipped.
    flip() {
        this.normal = this.normal.negated();
    }
    // Create a new vertex between this vertex and `other` by linearly
    // interpolating all properties using a parameter of `t`. Subclasses should
    // override this to interpolate additional properties.
    interpolate(other, t) {
        return new Vertex(this.pos.lerp(other.pos, t), this.normal.lerp(other.normal, t), this.uv ? this.uv.lerp(other.uv, t) : undefined);
    }
}
/**
 * Represents a plane in 3D space.
 */
class Plane {
    constructor(normal, w) {
        this.normal = normal;
        this.w = w;
    }
    static fromPoints(a, b, c) {
        const n = b
            .minus(a)
            .cross(c.minus(a))
            // @ts-ignore
            .unit();
        return new Plane(n, n.dot(a));
    }
    clone() {
        return new Plane(this.normal.clone(), this.w);
    }
    flip() {
        this.normal = this.normal.negated();
        this.w = -this.w;
    }
    // Split `polygon` by this plane if needed, then put the polygon or polygon
    // fragments in the appropriate lists. Coplanar polygons go into either
    // `coplanarFront` or `coplanarBack` depending on their orientation with
    // respect to this plane. Polygons in front or in back of this plane go into
    // either `front` or `back`.
    splitPolygon(polygon, coplanarFront, coplanarBack, front, back) {
        const COPLANAR = 0;
        const FRONT = 1;
        const BACK = 2;
        const SPANNING = 3;
        // Classify each point as well as the entire polygon into one of the above
        // four classes.
        let polygonType = 0;
        const types = [];
        for (const vertex of polygon.vertices) {
            const t = this.normal.dot(vertex.pos) - this.w;
            const type = t < -Plane.EPSILON ? BACK : t > Plane.EPSILON ? FRONT : COPLANAR;
            polygonType |= type;
            types.push(type);
        }
        // Put the polygon in the correct list, splitting it when necessary.
        switch (polygonType) {
            case COPLANAR:
                ;
                (this.normal.dot(polygon.plane.normal) > 0 ? coplanarFront : coplanarBack).push(polygon);
                break;
            case FRONT:
                front.push(polygon);
                break;
            case BACK:
                back.push(polygon);
                break;
            case SPANNING:
                const f = [];
                const b = [];
                for (let i = 0; i < polygon.vertices.length; i++) {
                    const j = (i + 1) % polygon.vertices.length;
                    const ti = types[i];
                    const tj = types[j];
                    const vi = polygon.vertices[i];
                    const vj = polygon.vertices[j];
                    if (ti !== BACK) {
                        f.push(vi);
                    }
                    if (ti !== FRONT) {
                        b.push(ti !== BACK ? vi.clone() : vi);
                    }
                    if ((ti | tj) === SPANNING) {
                        const t = (this.w - this.normal.dot(vi.pos)) / this.normal.dot(vj.pos.minus(vi.pos));
                        const v = vi.interpolate(vj, t);
                        f.push(v);
                        b.push(v.clone());
                    }
                }
                if (f.length >= 3) {
                    front.push(new Polygon(f, polygon.shared));
                }
                if (b.length >= 3) {
                    back.push(new Polygon(b, polygon.shared));
                }
                break;
        }
    }
}
// the tolerance used by `splitPolygon()` to decide if a
// point is on the plane.
Plane.EPSILON = 1e-5;
/**
 * Represents a convex polygon. The vertices used to initialize a polygon must
 * be coplanar and form a convex loop. They do not have to be `Vertex`
 * instances but they must behave similarly (duck typing can be used for
 * customization).
 *
 * Each convex polygon has a `shared` property, which is shared between all
 * polygons that are clones of each other or were split from the same polygon.
 * This can be used to define per-polygon properties (such as surface color).
 */
class Polygon {
    constructor(vertices, shared = null) {
        this.vertices = vertices;
        this.shared = shared;
        this.plane = Plane.fromPoints(vertices[0].pos, vertices[1].pos, vertices[2].pos);
    }
    clone() {
        const vertices = this.vertices.map(v => {
            return v.clone();
        });
        return new Polygon(vertices, this.shared);
    }
    flip() {
        this.vertices.reverse().map(v => {
            v.flip();
        });
        this.plane.flip();
    }
}
/**
 * Holds a node in a BSP tree. A BSP tree is built from a collection of polygons
 * by picking a polygon to split along. That polygon (and all other coplanar
 * polygons) are added directly to that node and the other polygons are added to
 * the front and/or back subtrees. This is not a leafy BSP tree since there is
 * no distinction between internal and leaf nodes.
 */
class Node {
    constructor(polygons) {
        // @ts-ignore
        delete this.plane;
        // @ts-ignore
        delete this.front;
        // @ts-ignore
        delete this.back;
        this.polygons = [];
        if (polygons) {
            this.build(polygons);
        }
    }
    clone() {
        const node = new Node();
        node.plane = this.plane && this.plane.clone();
        node.front = this.front && this.front.clone();
        node.back = this.back && this.back.clone();
        node.polygons = this.polygons.map(p => {
            return p.clone();
        });
        return node;
    }
    // Convert solid space to empty space and empty space to solid space.
    invert() {
        for (const polygon of this.polygons) {
            polygon.flip();
        }
        this.plane.flip();
        if (this.front) {
            this.front.invert();
        }
        if (this.back) {
            this.back.invert();
        }
        const temp = this.front;
        this.front = this.back;
        this.back = temp;
    }
    // Recursively remove all polygons in `polygons` that are inside this BSP
    // tree.
    clipPolygons(polygons) {
        if (!this.plane) {
            return polygons.slice();
        }
        let front = [];
        let back = [];
        for (const polygon of polygons) {
            this.plane.splitPolygon(polygon, front, back, front, back);
        }
        if (this.front) {
            front = this.front.clipPolygons(front);
        }
        back = this.back ? this.back.clipPolygons(back) : [];
        return front.concat(back);
    }
    // Remove all polygons in this BSP tree that are inside the other BSP tree
    // `bsp`.
    clipTo(bsp) {
        this.polygons = bsp.clipPolygons(this.polygons);
        if (this.front) {
            this.front.clipTo(bsp);
        }
        if (this.back) {
            this.back.clipTo(bsp);
        }
    }
    // Return a list of all polygons in this BSP tree.
    allPolygons() {
        let polygons = this.polygons.slice();
        if (this.front) {
            polygons = polygons.concat(this.front.allPolygons());
        }
        if (this.back) {
            polygons = polygons.concat(this.back.allPolygons());
        }
        return polygons;
    }
    // Build a BSP tree out of `polygons`. When called on an existing tree, the
    // new polygons are filtered down to the bottom of the tree and become new
    // nodes there. Each set of polygons is partitioned using the first polygon
    // (no heuristic is used to pick a good split).
    build(polygons) {
        if (!polygons.length) {
            return;
        }
        if (!this.plane) {
            this.plane = polygons[0].plane.clone();
        }
        const front = [];
        const back = [];
        for (const polygon of polygons) {
            this.plane.splitPolygon(polygon, this.polygons, this.polygons, front, back);
        }
        if (front.length) {
            if (!this.front) {
                this.front = new Node();
            }
            this.front.build(front);
        }
        if (back.length) {
            if (!this.back) {
                this.back = new Node();
            }
            this.back.build(back);
        }
    }
}
//# sourceMappingURL=csg.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/haveSomeFun.js":
/*!*************************************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/haveSomeFun.js ***!
  \*************************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
const HaveSomeFun = (numberOfElements = 20, physics) => {
    if (!window.__loadPhysics) {
        console.log('There is not much fun without physics enabled!');
        return;
    }
    // adding some boxes (with physics)
    for (let i = 0; i < numberOfElements; i++) {
        const materials = ['standard', 'basic', 'normal', 'phong', 'line', 'points'];
        const Between = (min, max) => Math.floor(Math.random() * (max - min + 1) + min);
        const RandomPick = (array) => array[Math.floor(Math.random() * array.length)];
        if (Math.random() > 0.5) {
            physics.add
                .box({
                x: Between(-10, 10),
                y: Between(10, 20),
                z: Between(-10, 10),
                width: Between(1, 2) / 10,
                height: Between(1, 2) / 10,
                depth: Between(1, 2) / 10,
                mass: 1
            }, { [RandomPick(materials)]: { color: Math.floor(Math.random() * 0xffffff) } })
                .body.setRestitution(Math.floor(Math.random() * 10) / 20);
        }
        else {
            physics.add
                .sphere({
                x: Between(-10, 10),
                y: Between(10, 20),
                z: Between(-10, 10),
                radius: Between(1, 2) / 10,
                mass: 1
            }, { [RandomPick(materials)]: { color: Math.floor(Math.random() * 0xffffff) } })
                .body.setRestitution(Math.floor(Math.random() * 10) / 20);
        }
    }
};
exports.default = HaveSomeFun;
//# sourceMappingURL=haveSomeFun.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/heightmap.js":
/*!***********************************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/heightmap.js ***!
  \***********************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */
Object.defineProperty(exports, "__esModule", ({ value: true }));
const index_1 = __webpack_require__(/*! @enable3d/three-wrapper/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
const types_1 = __webpack_require__(/*! @enable3d/common/dist/types */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/types.js");
const logger_1 = __webpack_require__(/*! @enable3d/common/dist/logger */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/logger.js");
class HeightMap {
    constructor(scene) {
        this.scene = scene;
    }
    add(texture, config = {}) {
        const heightMap = this.make(texture, config);
        if (heightMap)
            this.scene.add(heightMap);
        else
            logger_1.default('Could not make heightmap');
        return heightMap;
    }
    make(texture, config = {}) {
        // var spacingX = 3
        // var spacingZ = 3
        // var heightOffset = 2
        const { image } = texture;
        const { width, height } = image;
        const { colorScale } = config;
        const canvas = document.createElement('canvas');
        canvas.width = width;
        canvas.height = height;
        const ctx = canvas.getContext('2d');
        if (!ctx)
            return;
        ctx.drawImage(texture.image, 0, 0);
        const pixel = ctx.getImageData(0, 0, width, height);
        // geometry
        const plane = new index_1.PlaneGeometry(10, 10, width - 1, height - 1);
        // material
        let materialConfig = { color: 0xcccccc, side: index_1.DoubleSide };
        if (colorScale)
            materialConfig = Object.assign(Object.assign({}, materialConfig), { vertexColors: index_1.FaceColors });
        const material = new index_1.MeshPhongMaterial(materialConfig);
        // mesh
        const mesh = new types_1.ExtendedMesh(plane, material);
        mesh.receiveShadow = mesh.castShadow = true;
        mesh.shape = 'concave';
        // adjust all z values
        const geo = mesh.geometry;
        for (let i = 0; i < geo.vertices.length; i++) {
            geo.vertices[i].z = pixel.data[i * 4] / 120;
        }
        // helper function to get the highest point
        const getHighPoint = (geometry, face) => {
            var v1 = geometry.vertices[face.a].z;
            var v2 = geometry.vertices[face.b].z;
            var v3 = geometry.vertices[face.c].z;
            return Math.max(v1, v2, v3);
        };
        // apply color scale if available
        if (colorScale)
            geo.faces.forEach(face => (face.color = new index_1.Color(colorScale(getHighPoint(geo, face)).hex())));
        mesh.rotateX(-Math.PI / 2);
        mesh.updateMatrix();
        plane.computeFaceNormals();
        plane.computeVertexNormals();
        mesh.name = 'heightmap';
        return mesh;
    }
}
exports.default = HeightMap;
//# sourceMappingURL=heightmap.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/index.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/index.js ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

/**
 * These Plugins are not included in the Core three-graphics package
 */
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Cameras = exports.HaveSomeFun = exports.WebXR = exports.Transform = exports.TextureCube = exports.Misc = exports.Mixers = exports.WarpSpeed = exports.HeightMap = exports.CSG = exports.Factories = exports.Lights = exports.Loaders = void 0;
const loaders_1 = __webpack_require__(/*! ./loaders */ "./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/loaders.js");
exports.Loaders = loaders_1.default;
const lights_1 = __webpack_require__(/*! ./lights */ "./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/lights.js");
exports.Lights = lights_1.default;
const factories_1 = __webpack_require__(/*! @enable3d/common/dist/factories */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/factories.js");
exports.Factories = factories_1.default;
const csg_1 = __webpack_require__(/*! ./csg */ "./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/csg.js");
exports.CSG = csg_1.default;
const heightmap_1 = __webpack_require__(/*! ./heightmap */ "./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/heightmap.js");
exports.HeightMap = heightmap_1.default;
const warpSpeed_1 = __webpack_require__(/*! ./warpSpeed */ "./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/warpSpeed.js");
exports.WarpSpeed = warpSpeed_1.default;
const mixers_1 = __webpack_require__(/*! ./mixers */ "./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/mixers.js");
exports.Mixers = mixers_1.default;
const misc_1 = __webpack_require__(/*! ./misc */ "./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/misc.js");
exports.Misc = misc_1.default;
Object.defineProperty(exports, "TextureCube", ({ enumerable: true, get: function () { return misc_1.TextureCube; } }));
const transform_1 = __webpack_require__(/*! ./transform */ "./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/transform.js");
exports.Transform = transform_1.default;
const webxr_1 = __webpack_require__(/*! ./webxr */ "./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/webxr.js");
exports.WebXR = webxr_1.default;
const haveSomeFun_1 = __webpack_require__(/*! ./haveSomeFun */ "./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/haveSomeFun.js");
exports.HaveSomeFun = haveSomeFun_1.default;
const cameras_1 = __webpack_require__(/*! ./cameras */ "./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/cameras.js");
exports.Cameras = cameras_1.default;
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/lights.js":
/*!********************************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/lights.js ***!
  \********************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */
Object.defineProperty(exports, "__esModule", ({ value: true }));
const index_1 = __webpack_require__(/*! @enable3d/three-wrapper/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
const index_2 = __webpack_require__(/*! @enable3d/three-wrapper/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
const index_3 = __webpack_require__(/*! @enable3d/three-wrapper/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
class PointLightHelper extends index_1.Object3D {
    constructor(scene, light, size, color) {
        super();
        this.scene = scene;
        this.light = light;
        this.size = size;
        this.color = color;
        this.geo = new index_1.SphereBufferGeometry(size || 0.2, 16, 8);
        this.mat = new index_1.MeshBasicMaterial({ color: color || light.color });
        this.mesh = new index_1.Mesh(this.geo, this.mat);
        this.add(this.mesh);
        light.add(this);
    }
    dispose() {
        this.mesh.geometry.dispose();
        if (!Array.isArray(this.mesh.material))
            this.mesh.material.dispose();
        else
            this.mesh.material.forEach(m => m.dispose());
        this.remove(this.mesh);
    }
    update() { }
}
class Lights {
    constructor(scene) {
        this.scene = scene;
    }
    get helper() {
        return {
            directionalLightHelper: (light, size, color) => {
                const helper = new index_3.DirectionalLightHelper(light, size, color);
                this.scene.add(helper);
                return helper;
            },
            spotLightHelper: (light, color) => {
                const helper = new index_3.SpotLightHelper(light, color);
                this.scene.add(helper);
                return helper;
            },
            pointLightHelper: (light, size, color) => new PointLightHelper(this.scene, light, size, color)
        };
    }
    directionalLight(options = {}) {
        const { color = 0xffffff, intensity = 1 } = options;
        const light = new index_2.DirectionalLight(color, intensity);
        light.castShadow = true;
        this.scene.add(light);
        return light;
    }
    hemisphereLight(options = {}) {
        const { skyColor = 0xffffff, groundColor = 0xffffff, intensity = 1 } = options;
        const light = new index_2.HemisphereLight(skyColor, groundColor, intensity);
        this.scene.add(light);
        return light;
    }
    ambientLight(options = {}) {
        const { color = 0xffffff, intensity = 1 } = options;
        const light = new index_2.AmbientLight(color, intensity);
        this.scene.add(light);
        return light;
    }
    pointLight(options = {}) {
        const { color = 0xffffff, intensity = 1, distance = 0, decay = 1 } = options;
        const light = new index_2.PointLight(color, intensity, distance, decay);
        light.castShadow = true;
        this.scene.add(light);
        return light;
    }
    spotLight(options = {}) {
        const { color = 0xffffff, intensity = 1, distance = 0, angle = Math.PI / 8, penumbra = 0, decay = 1 } = options;
        const light = new index_2.SpotLight(color, intensity, distance, angle, penumbra, decay);
        light.castShadow = true;
        this.scene.add(light);
        return light;
    }
    rectAreaLight(options = {}) {
        const { color = 0xffffff, intensity = 1, width = 10, height = 10 } = options;
        const light = new index_2.RectAreaLight(color, intensity, width, height);
        this.scene.add(light);
        return light;
    }
}
exports.default = Lights;
//# sourceMappingURL=lights.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/loaders.js":
/*!*********************************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/loaders.js ***!
  \*********************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";

/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
const index_1 = __webpack_require__(/*! @enable3d/three-wrapper/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
class Loaders {
    constructor(cache, textureAnisotropy) {
        this.cache = cache;
        this.textureAnisotropy = textureAnisotropy;
    }
    get fileLoader() {
        if (!this._fileLoader)
            this._fileLoader = new index_1.FileLoader();
        return this._fileLoader;
    }
    get imageLoader() {
        if (!this._imgLoader)
            this._imgLoader = new index_1.ImageLoader();
        return this._imgLoader;
    }
    get svgLoader() {
        if (!this._svgLoader)
            this._svgLoader = new index_1.SVGLoader();
        return this._svgLoader;
    }
    get textureLoader() {
        if (!this._textureLoader)
            this._textureLoader = new index_1.TextureLoader();
        return this._textureLoader;
    }
    get objectLoader() {
        if (!this._objectLoader)
            this._objectLoader = new index_1.ObjectLoader();
        return this._objectLoader;
    }
    get gltfLoader() {
        if (!this._gltfLoader)
            this._gltfLoader = new index_1.GLTFLoader();
        return this._gltfLoader;
    }
    get fbxLoader() {
        if (!this._fbxLoader)
            this._fbxLoader = new index_1.FBXLoader();
        return this._fbxLoader;
    }
    preload(key, url) {
        return __awaiter(this, void 0, void 0, function* () {
            this.cache.add(key, url);
            return new Promise(resolve => {
                const isModel = /\.fbx$|\.glb$|\.gltf$/.test(url);
                const isTexture = /\.jpe?g$|\.png$/.test(url);
                if (isTexture) {
                    this.textureLoader.load(url, texture => {
                        return resolve(texture);
                    });
                }
                else {
                    if (isModel)
                        this.fileLoader.setResponseType('arraybuffer');
                    this.fileLoader.load(url, file => {
                        return resolve(file);
                    });
                }
            });
        });
    }
    file(url) {
        const key = this.cache.get(url);
        url = key ? key : url;
        return new Promise(resolve => {
            this.fileLoader.load(url, file => {
                return resolve(file);
            });
        });
    }
    svg(url) {
        const key = this.cache.get(url);
        url = key ? key : url;
        return new Promise(resolve => {
            this.svgLoader.load(url, svg => {
                return resolve(svg);
            });
        });
    }
    texture(url) {
        const isBase64 = /^data:image\/[\S]+;base64,/gm.test(url);
        // we do not want to cache base64 images
        if (!isBase64) {
            const key = this.cache.get(url);
            url = key ? key : url;
        }
        return new Promise(resolve => {
            this.textureLoader.load(url, (texture) => {
                // options
                texture.anisotropy = this.textureAnisotropy;
                texture.format = index_1.RGBAFormat;
                texture.needsUpdate = true;
                resolve(texture);
            });
        });
    }
    // examples: https://github.com/mrdoob/three.js/wiki/JSON-Object-Scene-format-4
    object(url) {
        const key = this.cache.get(url);
        url = key ? key : url;
        return new Promise(resolve => {
            this.objectLoader.load(url, (json) => {
                resolve(json);
            });
        });
    }
    gltf(url) {
        const key = this.cache.get(url);
        url = key ? key : url;
        return new Promise(resolve => {
            this.gltfLoader.load(url, (gltf) => {
                resolve(gltf);
            });
        });
    }
    fbx(url) {
        const key = this.cache.get(url);
        url = key ? key : url;
        return new Promise(resolve => {
            this.fbxLoader.load(url, (fbx) => {
                resolve(fbx);
            });
        });
    }
}
exports.default = Loaders;
//# sourceMappingURL=loaders.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/misc.js":
/*!******************************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/misc.js ***!
  \******************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.TextureCube = void 0;
// misc
const water_1 = __webpack_require__(/*! @enable3d/common/dist/misc/water */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/misc/water.js");
const dist_1 = __webpack_require__(/*! @enable3d/three-wrapper/dist */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
class Misc {
    constructor(scene, renderer, factories) {
        this.scene = scene;
        this.renderer = renderer;
        this.factories = factories;
    }
    water(config = {}) {
        water_1.addWater(this.scene, this.renderer, config);
    }
    textureCube(textures) {
        if (textures.length !== 6) {
            console.log('[enable3d] You need to pass 6 urls to textureCube()');
        }
        const textureCube = new TextureCube();
        textures.forEach((texture, i) => {
            texture.wrapS = texture.wrapT = dist_1.RepeatWrapping;
            const material = this.factories.add.material({ phong: { map: texture } });
            textureCube.materials[i] = material;
        });
        return textureCube;
    }
}
exports.default = Misc;
class TextureCube {
    constructor() {
        this.materials = new Array(6);
    }
    get texture() {
        return {
            left: this.getTexture(0),
            right: this.getTexture(1),
            up: this.getTexture(2),
            down: this.getTexture(3),
            front: this.getTexture(4),
            back: this.getTexture(5)
        };
    }
    getTexture(i) {
        // @ts-ignore
        return this.materials[i].map;
    }
}
exports.TextureCube = TextureCube;
//# sourceMappingURL=misc.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/mixers.js":
/*!********************************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/mixers.js ***!
  \********************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
const types_1 = __webpack_require__(/*! @enable3d/common/dist/types */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/types.js");
class Mixers {
    constructor() {
        this._mixers = [];
    }
    /**
     * Create an Animation Mixer and ads it to the mixers array
     */
    animationMixer(root) {
        const mixer = new types_1.AnimationMixer(root);
        this.mixers.add(mixer);
        return mixer;
    }
    get mixers() {
        return {
            create: (root) => this.animationMixer(root),
            add: (animationMixer) => this._mixers.push(animationMixer),
            get: () => this._mixers,
            update: (delta) => { var _a; return (_a = this._mixers) === null || _a === void 0 ? void 0 : _a.forEach(mixer => mixer.update(delta / 1000)); }
        };
    }
}
exports.default = Mixers;
//# sourceMappingURL=mixers.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/transform.js":
/*!***********************************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/transform.js ***!
  \***********************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
const index_1 = __webpack_require__(/*! @enable3d/three-wrapper/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
const index_2 = __webpack_require__(/*! @enable3d/three-wrapper/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */
class Transform {
    constructor(camera, renderer) {
        this.camera = camera;
        this.renderer = renderer;
    }
    geometryToBufferGeometry(geometry) {
        // @ts-ignore
        if (geometry.isGeometry)
            return new index_1.BufferGeometry().fromGeometry(geometry);
        else
            return geometry;
    }
    bufferGeometryToGeometry(bufferGeometry) {
        // @ts-ignore
        if (bufferGeometry.isBufferGeometry)
            return new index_1.Geometry().fromBufferGeometry(bufferGeometry);
        else
            return bufferGeometry;
    }
    /**
     * Transforms your svg files to paths.
     */
    fromSVGtoShape(svg, isCCW = false, noHoles) {
        if (svg) {
            const svgLoader = new index_2.SVGLoader();
            const shapes = [];
            svgLoader.parse(svg).paths.forEach(path => {
                path.toShapes(isCCW, noHoles).forEach(shape => {
                    shapes.push(shape);
                });
            });
            return shapes;
        }
        return [];
    }
    from3dto2d(position) {
        const vector3 = new index_1.Vector3(position.x, position.y, position.z);
        const canvas = this.renderer.domElement;
        // map to normalized device coordinate (NDC) space
        this.camera.updateMatrixWorld();
        vector3.project(this.camera);
        // map to 2D screen space
        const x = Math.round((vector3.x + 1) * (canvas.width / 2));
        const y = Math.round((-vector3.y + 1) * (canvas.height / 2));
        return new index_1.Vector2(x, y);
    }
    /**
     *
     * @param x X coordinate in normalized device coordinate (NDC) (-1 to +1).
     * @param y Y coordinate in normalized device coordinate (NDC) (-1 to +1).
     * @param distanceFromCamera The distance from the camera.
     */
    from2dto3d(x, y, distanceFromCamera) {
        var _a;
        // initialize temporary variables
        if (!this.tmpPlane) {
            const geo = new index_1.PlaneBufferGeometry(10000, 10000);
            const mat = new index_1.MeshBasicMaterial({ transparent: true, opacity: 0.25 });
            this.tmpPlane = new index_1.Mesh(geo, mat);
            this.tmpPlane.name = '_tmp_raycast_plane';
        }
        if (!this.tmpRaycaster)
            this.tmpRaycaster = new index_1.Raycaster();
        if (!this.tmpVector3)
            this.tmpVector3 = new index_1.Vector3();
        // holds the position we want to return later
        let position;
        // add plane parallel to camera
        this.tmpPlane.setRotationFromEuler(this.camera.rotation);
        const p = this.camera.position;
        this.tmpPlane.position.set(p.x, p.y, p.z);
        // adjust the distance of the plane
        this.camera.getWorldDirection(this.tmpVector3);
        this.tmpPlane.position.add(this.tmpVector3.clone().multiplyScalar(distanceFromCamera));
        this.tmpPlane.updateMatrix();
        this.tmpPlane.updateMatrixWorld(true);
        // raycast
        this.tmpRaycaster.setFromCamera({ x, y }, this.camera);
        // check intersection with plane
        const intersects = this.tmpRaycaster.intersectObjects([this.tmpPlane]);
        if (((_a = intersects[0]) === null || _a === void 0 ? void 0 : _a.object.name) === '_tmp_raycast_plane')
            position = intersects[0].point;
        return position;
    }
}
exports.default = Transform;
//# sourceMappingURL=transform.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/warpSpeed.js":
/*!***********************************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/warpSpeed.js ***!
  \***********************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
const index_1 = __webpack_require__(/*! @enable3d/three-wrapper/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
const THREE = __webpack_require__(/*! @enable3d/three-wrapper/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
class WarpSpeed {
    constructor(scene, renderer, camera, lights, physics, load, factories) {
        this.scene = scene;
        this.renderer = renderer;
        this.camera = camera;
        this.lights = lights;
        this.physics = physics;
        this.load = load;
        this.factories = factories;
    }
    /**
     * It takes took long to setup the third dimension your self? Get started with warp speed by using this function.
     * @param features Pass the features you want to setup.
     */
    warpSpeed(...features) {
        return __awaiter(this, void 0, void 0, function* () {
            let Features = {};
            // test for negative features
            const negativeFeatures = features.filter(feature => /^-\w+/.test(feature));
            const hasNegativeFeatures = negativeFeatures.length > 0 ? true : false;
            // add all features
            if (features.length === 0 || hasNegativeFeatures)
                features = ['light', 'camera', 'lookAtCenter', 'ground', 'grid', 'orbitControls', 'fog', 'sky'];
            // remove the negative features
            if (hasNegativeFeatures) {
                const featuresToRemove = negativeFeatures.map(feature => feature.substr(1));
                featuresToRemove.forEach(feature => {
                    // @ts-ignore
                    const index = features.indexOf(feature);
                    features.splice(index, 1);
                });
            }
            // TODO: add fog
            if (features.includes('fog')) {
            }
            if (features.includes('sky')) {
                // https://github.com/mrdoob/three.js/blob/master/examples/webgl_lights_hemisphere.html
                // SKYDOME
                const vertexShader = [
                    'varying vec3 vWorldPosition;',
                    '',
                    'void main() {',
                    '',
                    'vec4 worldPosition = modelMatrix * vec4( position, 1.0 );',
                    'vWorldPosition = worldPosition.xyz;',
                    '',
                    'gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );',
                    '',
                    '}'
                ].join('\n');
                const fragmentShader = [
                    'uniform vec3 topColor;',
                    'uniform vec3 bottomColor;',
                    'uniform float offset;',
                    'uniform float exponent;',
                    '',
                    'varying vec3 vWorldPosition;',
                    '',
                    'void main() {',
                    '',
                    'float h = normalize( vWorldPosition + offset ).y;',
                    'gl_FragColor = vec4( mix( bottomColor, topColor, max( pow( max( h , 0.0), exponent ), 0.0 ) ), 1.0 );',
                    '',
                    '}'
                ].join('\n');
                const uniforms = {
                    topColor: { value: new THREE.Color(0x0077ff) },
                    bottomColor: { value: new THREE.Color(0xedf5ff) },
                    offset: { value: 33 },
                    exponent: { value: 0.6 }
                };
                var skyGeo = new THREE.SphereBufferGeometry(500, 32, 15);
                var skyMat = new THREE.ShaderMaterial({
                    uniforms: uniforms,
                    vertexShader: vertexShader,
                    fragmentShader: fragmentShader,
                    side: THREE.BackSide
                });
                var sky = new THREE.Mesh(skyGeo, skyMat);
                this.scene.add(sky);
            }
            if (features.includes('camera')) {
                this.camera.position.set(0, 6, 12);
                Features = Object.assign({ camera: this.camera }, Features);
            }
            if (features.includes('light')) {
                const intensity = 0.4;
                const hemisphereLight = this.lights.hemisphereLight({ skyColor: 0xffffff, groundColor: 0x000000, intensity });
                const ambientLight = this.lights.ambientLight({ color: 0xffffff, intensity });
                const directionalLight = this.lights.directionalLight({ color: 0xffffff, intensity });
                directionalLight.position.set(100, 200, 50);
                const d = 20;
                directionalLight.shadow.camera.top = d;
                directionalLight.shadow.camera.bottom = -d;
                directionalLight.shadow.camera.left = -d;
                directionalLight.shadow.camera.right = d;
                directionalLight.shadow.mapSize.set(1024, 1024);
                // this.directionalLight = light
                const lights = {
                    ambientLight,
                    directionalLight,
                    hemisphereLight
                };
                Features = Object.assign({ lights }, Features);
            }
            if (features.includes('lookAtCenter')) {
                this.camera.lookAt(this.scene.position);
            }
            if (features.includes('ground')) {
                // grid (texture)
                const addGrid = features.includes('grid');
                const gridData = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOnAAADusBZ+q87AAAAJtJREFUeJzt0EENwDAAxLDbNP6UOxh+NEYQ5dl2drFv286598GrA7QG6ACtATpAa4AO0BqgA7QG6ACtATpAa4AO0BqgA7QG6ACtATpAa4AO0BqgA7QG6ACtATpAa4AO0BqgA7QG6ACtATpAa4AO0BqgA7QG6ACtATpAa4AO0BqgA7QG6ACtATpAa4AO0BqgA7QG6ACtATpAu37AD8eaBH5JQdVbAAAAAElFTkSuQmCC';
                const texture = yield this.load.texture(gridData);
                texture.wrapS = texture.wrapT = THREE.RepeatWrapping;
                texture.repeat.set(21, 21);
                // ground
                const geometry = { name: 'ground', width: 21, height: 21, depth: 1, y: -0.5 };
                const material = {
                    phong: { map: addGrid ? texture : null, transparent: true, opacity: 0.8, color: 0xffffff }
                };
                let ground;
                if (window.__loadPhysics) {
                    ground = this.physics.add.ground(geometry, material);
                    ground.body.setRestitution(1);
                }
                else {
                    ground = this.factories.add.ground(geometry, material);
                }
                ground.receiveShadow = true;
                Features = Object.assign({ ground }, Features);
            }
            if (features.includes('orbitControls')) {
                // for phaser
                // this.root is the phaser scene (scene3D)
                // this.root.scale.parent instead of this.renderer.domElement
                const orbitControls = new index_1.OrbitControls(this.camera, document.getElementById('enable3d-phaser-canvas') || this.renderer.domElement);
                Features = Object.assign({ orbitControls }, Features);
            }
            return Features;
        });
    }
}
exports.default = WarpSpeed;
//# sourceMappingURL=warpSpeed.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/webxr.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/webxr.js ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */
Object.defineProperty(exports, "__esModule", ({ value: true }));
const THREE = __webpack_require__(/*! @enable3d/three-wrapper/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
class WebXR {
    constructor(_renderer, _scene, _camera) {
        // https://medium.com/samsung-internet-dev/vr-locomotion-740dafa85914
        this._renderer = _renderer;
        this._scene = _scene;
        this._camera = _camera;
        this.controllerModelFactory = new THREE.XRControllerModelFactory();
        // const geo = new THREE.SphereGeometry(0.5)
        // const mat = new THREE.MeshLambertMaterial({ color: 0xff0000 })
        // this.dot = new THREE.Mesh(geo, mat)
        // this.dot.position.set(0, 1, 0)
        this.cameraGroup = new THREE.Group();
        this.cameraGroup.add(_camera);
        _scene.add(this.cameraGroup);
        _renderer.xr.enabled = true;
        // add vr button
        const vrButton = THREE.VRButton.createButton(_renderer);
        vrButton.style.cssText += 'background: rgba(0, 0, 0, 0.8); ';
        document.body.appendChild(vrButton);
    }
    get isPresenting() {
        var _a, _b;
        return !!((_b = (_a = this._renderer) === null || _a === void 0 ? void 0 : _a.xr) === null || _b === void 0 ? void 0 : _b.isPresenting);
    }
    getController(id) {
        const controller = this._renderer.xr.getController(id);
        this.cameraGroup.add(controller);
        return controller;
    }
    getControllerGrip(id) {
        const controllerGrip = this._renderer.xr.getControllerGrip(id);
        const model = this.controllerModelFactory.createControllerModel(controllerGrip);
        controllerGrip.add(model);
        this.cameraGroup.add(controllerGrip);
        return controllerGrip;
    }
    getControllerRay(data) {
        // https://github.com/mrdoob/three.js/blob/master/examples/webxr_vr_ballshooter.html
        const { targetRayMode } = data;
        if (targetRayMode === 'tracked-pointer') {
            let geometry = new THREE.BufferGeometry();
            geometry.setAttribute('position', new THREE.Float32BufferAttribute([0, 0, 0, 0, 0, -1], 3));
            geometry.setAttribute('color', new THREE.Float32BufferAttribute([1, 0, 0, 1, 1, 1], 3));
            let material = new THREE.LineBasicMaterial({
                vertexColors: true
            });
            return new THREE.Line(geometry, material);
        }
        if (targetRayMode === 'gaze') {
            let geometry = new THREE.RingBufferGeometry(0.02, 0.04, 32).translate(0, 0, -1);
            let material = new THREE.MeshBasicMaterial({ color: 'red', opacity: 0.5, transparent: true });
            return new THREE.Mesh(geometry, material);
        }
        return;
    }
    get camera() {
        return this.WebXRCamera;
    }
    get WebXRCamera() {
        var _a;
        return {
            group: this.cameraGroup,
            position: (_a = this.cameraGroup) === null || _a === void 0 ? void 0 : _a.position,
            rotation: this.isPresenting ? this._renderer.xr.getCamera(this._camera).rotation : undefined,
            getWorldDirection: (target) => this.isPresenting ? this._renderer.xr.getCamera(this._camera).getWorldDirection(target) : undefined
        };
    }
}
exports.default = WebXR;
//# sourceMappingURL=webxr.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/version.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/version.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.VERSION = void 0;
exports.VERSION = '0.21.0';
//# sourceMappingURL=version.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

!function(t,e){for(var n in e)t[n]=e[n]}(exports,function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=4)}([function(t,e,n){"use strict";n.r(e),n.d(e,"ACESFilmicToneMapping",(function(){return nt})),n.d(e,"AddEquation",(function(){return T})),n.d(e,"AddOperation",(function(){return K})),n.d(e,"AdditiveAnimationBlendMode",(function(){return Xe})),n.d(e,"AdditiveBlending",(function(){return w})),n.d(e,"AlphaFormat",(function(){return Bt})),n.d(e,"AlwaysDepth",(function(){return k})),n.d(e,"AlwaysStencilFunc",(function(){return Sn})),n.d(e,"AmbientLight",(function(){return Lh})),n.d(e,"AmbientLightProbe",(function(){return Jh})),n.d(e,"AnimationClip",(function(){return Du})),n.d(e,"AnimationLoader",(function(){return Vu})),n.d(e,"AnimationMixer",(function(){return Ad})),n.d(e,"AnimationObjectGroup",(function(){return Td})),n.d(e,"AnimationUtils",(function(){return _u})),n.d(e,"ArcCurve",(function(){return Ku})),n.d(e,"ArrayCamera",(function(){return Ps})),n.d(e,"ArrowHelper",(function(){return gp})),n.d(e,"Audio",(function(){return sd})),n.d(e,"AudioAnalyser",(function(){return pd})),n.d(e,"AudioContext",(function(){return qh})),n.d(e,"AudioListener",(function(){return ad})),n.d(e,"AudioLoader",(function(){return Yh})),n.d(e,"AxesHelper",(function(){return vp})),n.d(e,"AxisHelper",(function(){return vf})),n.d(e,"BackSide",(function(){return m})),n.d(e,"BasicDepthPacking",(function(){return on})),n.d(e,"BasicShadowMap",(function(){return u})),n.d(e,"BinaryTextureLoader",(function(){return _f})),n.d(e,"Bone",(function(){return lc})),n.d(e,"BooleanKeyframeTrack",(function(){return Lu})),n.d(e,"BoundingBoxHelper",(function(){return yf})),n.d(e,"Box2",(function(){return Fd})),n.d(e,"Box3",(function(){return tr})),n.d(e,"Box3Helper",(function(){return hp})),n.d(e,"BoxBufferGeometry",(function(){return mo})),n.d(e,"BoxGeometry",(function(){return Wc})),n.d(e,"BoxHelper",(function(){return up})),n.d(e,"BufferAttribute",(function(){return Ti})),n.d(e,"BufferGeometry",(function(){return qi})),n.d(e,"BufferGeometryLoader",(function(){return Bh})),n.d(e,"ByteType",(function(){return Tt})),n.d(e,"Cache",(function(){return Fu})),n.d(e,"Camera",(function(){return bo})),n.d(e,"CameraHelper",(function(){return sp})),n.d(e,"CanvasRenderer",(function(){return Tf})),n.d(e,"CanvasTexture",(function(){return Uc})),n.d(e,"CatmullRomCurve3",(function(){return rh})),n.d(e,"CineonToneMapping",(function(){return et})),n.d(e,"CircleBufferGeometry",(function(){return Xc})),n.d(e,"CircleGeometry",(function(){return qc})),n.d(e,"ClampToEdgeWrapping",(function(){return dt})),n.d(e,"Clock",(function(){return td})),n.d(e,"ClosedSplineCurve3",(function(){return ff})),n.d(e,"Color",(function(){return yi})),n.d(e,"ColorKeyframeTrack",(function(){return Ru})),n.d(e,"CompressedTexture",(function(){return Fc})),n.d(e,"CompressedTextureLoader",(function(){return ju})),n.d(e,"ConeBufferGeometry",(function(){return Kc})),n.d(e,"ConeGeometry",(function(){return Jc})),n.d(e,"CubeCamera",(function(){return _o})),n.d(e,"CubeGeometry",(function(){return Wc})),n.d(e,"CubeReflectionMapping",(function(){return ot})),n.d(e,"CubeRefractionMapping",(function(){return at})),n.d(e,"CubeTexture",(function(){return Mo})),n.d(e,"CubeTextureLoader",(function(){return Xu})),n.d(e,"CubeUVReflectionMapping",(function(){return lt})),n.d(e,"CubeUVRefractionMapping",(function(){return ut})),n.d(e,"CubicBezierCurve",(function(){return sh})),n.d(e,"CubicBezierCurve3",(function(){return ch})),n.d(e,"CubicInterpolant",(function(){return Su})),n.d(e,"CullFaceBack",(function(){return s})),n.d(e,"CullFaceFront",(function(){return c})),n.d(e,"CullFaceFrontBack",(function(){return l})),n.d(e,"CullFaceNone",(function(){return a})),n.d(e,"Curve",(function(){return Zu})),n.d(e,"CurvePath",(function(){return mh})),n.d(e,"CustomBlending",(function(){return S})),n.d(e,"CustomToneMapping",(function(){return rt})),n.d(e,"CylinderBufferGeometry",(function(){return Yc})),n.d(e,"CylinderGeometry",(function(){return Zc})),n.d(e,"Cylindrical",(function(){return Dd})),n.d(e,"DataTexture",(function(){return To})),n.d(e,"DataTexture2DArray",(function(){return Zo})),n.d(e,"DataTexture3D",(function(){return Jo})),n.d(e,"DataTextureLoader",(function(){return qu})),n.d(e,"DataUtils",(function(){return bp})),n.d(e,"DecrementStencilOp",(function(){return pn})),n.d(e,"DecrementWrapStencilOp",(function(){return mn})),n.d(e,"DefaultLoadingManager",(function(){return zu})),n.d(e,"DepthFormat",(function(){return kt})),n.d(e,"DepthStencilFormat",(function(){return Vt})),n.d(e,"DepthTexture",(function(){return zc})),n.d(e,"DirectionalLight",(function(){return Ah})),n.d(e,"DirectionalLightHelper",(function(){return ip})),n.d(e,"DiscreteInterpolant",(function(){return Eu})),n.d(e,"DodecahedronBufferGeometry",(function(){return $c})),n.d(e,"DodecahedronGeometry",(function(){return tl})),n.d(e,"DoubleSide",(function(){return g})),n.d(e,"DstAlphaFactor",(function(){return B})),n.d(e,"DstColorFactor",(function(){return U})),n.d(e,"DynamicBufferAttribute",(function(){return rf})),n.d(e,"DynamicCopyUsage",(function(){return In})),n.d(e,"DynamicDrawUsage",(function(){return En})),n.d(e,"DynamicReadUsage",(function(){return Rn})),n.d(e,"EdgesGeometry",(function(){return ol})),n.d(e,"EdgesHelper",(function(){return xf})),n.d(e,"EllipseCurve",(function(){return Ju})),n.d(e,"EqualDepth",(function(){return W})),n.d(e,"EqualStencilFunc",(function(){return xn})),n.d(e,"EquirectangularReflectionMapping",(function(){return st})),n.d(e,"EquirectangularRefractionMapping",(function(){return ct})),n.d(e,"Euler",(function(){return Or})),n.d(e,"EventDispatcher",(function(){return Bn})),n.d(e,"ExtrudeBufferGeometry",(function(){return Nl})),n.d(e,"ExtrudeGeometry",(function(){return Bl})),n.d(e,"Face3",(function(){return xi})),n.d(e,"Face4",(function(){return kp})),n.d(e,"FaceColors",(function(){return Xp})),n.d(e,"FileLoader",(function(){return ku})),n.d(e,"FlatShading",(function(){return v})),n.d(e,"Float16BufferAttribute",(function(){return Oi})),n.d(e,"Float32Attribute",(function(){return df})),n.d(e,"Float32BufferAttribute",(function(){return Ni})),n.d(e,"Float64Attribute",(function(){return pf})),n.d(e,"Float64BufferAttribute",(function(){return Di})),n.d(e,"FloatType",(function(){return Pt})),n.d(e,"Fog",(function(){return Us})),n.d(e,"FogExp2",(function(){return Fs})),n.d(e,"Font",(function(){return Vh})),n.d(e,"FontLoader",(function(){return Wh})),n.d(e,"FrontSide",(function(){return f})),n.d(e,"Frustum",(function(){return Lo})),n.d(e,"GLBufferAttribute",(function(){return Pd})),n.d(e,"GLSL1",(function(){return Nn})),n.d(e,"GLSL3",(function(){return Dn})),n.d(e,"GammaEncoding",(function(){return Qe})),n.d(e,"Geometry",(function(){return jc})),n.d(e,"GeometryUtils",(function(){return Sf})),n.d(e,"GreaterDepth",(function(){return q})),n.d(e,"GreaterEqualDepth",(function(){return X})),n.d(e,"GreaterEqualStencilFunc",(function(){return Mn})),n.d(e,"GreaterStencilFunc",(function(){return wn})),n.d(e,"GridHelper",(function(){return $d})),n.d(e,"Group",(function(){return Cs})),n.d(e,"HalfFloatType",(function(){return Ct})),n.d(e,"HemisphereLight",(function(){return xh})),n.d(e,"HemisphereLightHelper",(function(){return Qd})),n.d(e,"HemisphereLightProbe",(function(){return Zh})),n.d(e,"IcosahedronBufferGeometry",(function(){return Fl})),n.d(e,"IcosahedronGeometry",(function(){return Ul})),n.d(e,"ImageBitmapLoader",(function(){return Hh})),n.d(e,"ImageLoader",(function(){return Wu})),n.d(e,"ImageUtils",(function(){return Vn})),n.d(e,"ImmediateRenderObject",(function(){return Hd})),n.d(e,"IncrementStencilOp",(function(){return dn})),n.d(e,"IncrementWrapStencilOp",(function(){return fn})),n.d(e,"InstancedBufferAttribute",(function(){return Dh})),n.d(e,"InstancedBufferGeometry",(function(){return Nh})),n.d(e,"InstancedInterleavedBuffer",(function(){return Rd})),n.d(e,"InstancedMesh",(function(){return vc})),n.d(e,"Int16Attribute",(function(){return cf})),n.d(e,"Int16BufferAttribute",(function(){return Ri})),n.d(e,"Int32Attribute",(function(){return uf})),n.d(e,"Int32BufferAttribute",(function(){return Ci})),n.d(e,"Int8Attribute",(function(){return of})),n.d(e,"Int8BufferAttribute",(function(){return Ei})),n.d(e,"IntType",(function(){return Lt})),n.d(e,"InterleavedBuffer",(function(){return Gs})),n.d(e,"InterleavedBufferAttribute",(function(){return ks})),n.d(e,"Interpolant",(function(){return Mu})),n.d(e,"InterpolateDiscrete",(function(){return ze})),n.d(e,"InterpolateLinear",(function(){return Ge})),n.d(e,"InterpolateSmooth",(function(){return He})),n.d(e,"InvertStencilOp",(function(){return gn})),n.d(e,"JSONLoader",(function(){return Ef})),n.d(e,"KeepStencilOp",(function(){return un})),n.d(e,"KeyframeTrack",(function(){return Au})),n.d(e,"LOD",(function(){return sc})),n.d(e,"LatheBufferGeometry",(function(){return zl})),n.d(e,"LatheGeometry",(function(){return Gl})),n.d(e,"Layers",(function(){return Br})),n.d(e,"LensFlare",(function(){return Lf})),n.d(e,"LessDepth",(function(){return V})),n.d(e,"LessEqualDepth",(function(){return j})),n.d(e,"LessEqualStencilFunc",(function(){return bn})),n.d(e,"LessStencilFunc",(function(){return yn})),n.d(e,"Light",(function(){return yh})),n.d(e,"LightProbe",(function(){return Ch})),n.d(e,"Line",(function(){return Sc})),n.d(e,"Line3",(function(){return Gd})),n.d(e,"LineBasicMaterial",(function(){return yc})),n.d(e,"LineCurve",(function(){return lh})),n.d(e,"LineCurve3",(function(){return uh})),n.d(e,"LineDashedMaterial",(function(){return bu})),n.d(e,"LineLoop",(function(){return Lc})),n.d(e,"LinePieces",(function(){return jp})),n.d(e,"LineSegments",(function(){return Ac})),n.d(e,"LineStrip",(function(){return Vp})),n.d(e,"LinearEncoding",(function(){return Je})),n.d(e,"LinearFilter",(function(){return xt})),n.d(e,"LinearInterpolant",(function(){return Tu})),n.d(e,"LinearMipMapLinearFilter",(function(){return Mt})),n.d(e,"LinearMipMapNearestFilter",(function(){return wt})),n.d(e,"LinearMipmapLinearFilter",(function(){return _t})),n.d(e,"LinearMipmapNearestFilter",(function(){return bt})),n.d(e,"LinearToneMapping",(function(){return $})),n.d(e,"Loader",(function(){return Gu})),n.d(e,"LoaderUtils",(function(){return Oh})),n.d(e,"LoadingManager",(function(){return Uu})),n.d(e,"LogLuvEncoding",(function(){return tn})),n.d(e,"LoopOnce",(function(){return Be})),n.d(e,"LoopPingPong",(function(){return Ue})),n.d(e,"LoopRepeat",(function(){return Fe})),n.d(e,"LuminanceAlphaFormat",(function(){return Gt})),n.d(e,"LuminanceFormat",(function(){return zt})),n.d(e,"MOUSE",(function(){return i})),n.d(e,"Material",(function(){return wi})),n.d(e,"MaterialLoader",(function(){return Ih})),n.d(e,"Math",(function(){return zn})),n.d(e,"MathUtils",(function(){return zn})),n.d(e,"Matrix3",(function(){return Hn})),n.d(e,"Matrix4",(function(){return Tr})),n.d(e,"MaxEquation",(function(){return R})),n.d(e,"Mesh",(function(){return ho})),n.d(e,"MeshBasicMaterial",(function(){return _i})),n.d(e,"MeshDepthMaterial",(function(){return Ss})),n.d(e,"MeshDistanceMaterial",(function(){return Ts})),n.d(e,"MeshFaceMaterial",(function(){return Yp})),n.d(e,"MeshLambertMaterial",(function(){return yu})),n.d(e,"MeshMatcapMaterial",(function(){return xu})),n.d(e,"MeshNormalMaterial",(function(){return vu})),n.d(e,"MeshPhongMaterial",(function(){return mu})),n.d(e,"MeshPhysicalMaterial",(function(){return fu})),n.d(e,"MeshStandardMaterial",(function(){return pu})),n.d(e,"MeshToonMaterial",(function(){return gu})),n.d(e,"MinEquation",(function(){return L})),n.d(e,"MirroredRepeatWrapping",(function(){return pt})),n.d(e,"MixOperation",(function(){return J})),n.d(e,"MultiMaterial",(function(){return Zp})),n.d(e,"MultiplyBlending",(function(){return M})),n.d(e,"MultiplyOperation",(function(){return Z})),n.d(e,"NearestFilter",(function(){return ft})),n.d(e,"NearestMipMapLinearFilter",(function(){return yt})),n.d(e,"NearestMipMapNearestFilter",(function(){return gt})),n.d(e,"NearestMipmapLinearFilter",(function(){return vt})),n.d(e,"NearestMipmapNearestFilter",(function(){return mt})),n.d(e,"NeverDepth",(function(){return H})),n.d(e,"NeverStencilFunc",(function(){return vn})),n.d(e,"NoBlending",(function(){return x})),n.d(e,"NoColors",(function(){return Wp})),n.d(e,"NoToneMapping",(function(){return Q})),n.d(e,"NormalAnimationBlendMode",(function(){return We})),n.d(e,"NormalBlending",(function(){return b})),n.d(e,"NotEqualDepth",(function(){return Y})),n.d(e,"NotEqualStencilFunc",(function(){return _n})),n.d(e,"NumberKeyframeTrack",(function(){return Pu})),n.d(e,"Object3D",(function(){return Jr})),n.d(e,"ObjectLoader",(function(){return Fh})),n.d(e,"ObjectSpaceNormalMap",(function(){return cn})),n.d(e,"OctahedronBufferGeometry",(function(){return Hl})),n.d(e,"OctahedronGeometry",(function(){return kl})),n.d(e,"OneFactor",(function(){return C})),n.d(e,"OneMinusDstAlphaFactor",(function(){return F})),n.d(e,"OneMinusDstColorFactor",(function(){return z})),n.d(e,"OneMinusSrcAlphaFactor",(function(){return D})),n.d(e,"OneMinusSrcColorFactor",(function(){return O})),n.d(e,"OrthographicCamera",(function(){return Th})),n.d(e,"PCFShadowMap",(function(){return h})),n.d(e,"PCFSoftShadowMap",(function(){return d})),n.d(e,"PMREMGenerator",(function(){return Op})),n.d(e,"ParametricBufferGeometry",(function(){return Vl})),n.d(e,"ParametricGeometry",(function(){return jl})),n.d(e,"Particle",(function(){return Kp})),n.d(e,"ParticleBasicMaterial",(function(){return tf})),n.d(e,"ParticleSystem",(function(){return Qp})),n.d(e,"ParticleSystemMaterial",(function(){return ef})),n.d(e,"Path",(function(){return gh})),n.d(e,"PerspectiveCamera",(function(){return wo})),n.d(e,"Plane",(function(){return ti})),n.d(e,"PlaneBufferGeometry",(function(){return Co})),n.d(e,"PlaneGeometry",(function(){return Wl})),n.d(e,"PlaneHelper",(function(){return dp})),n.d(e,"PointCloud",(function(){return Jp})),n.d(e,"PointCloudMaterial",(function(){return $p})),n.d(e,"PointLight",(function(){return Sh})),n.d(e,"PointLightHelper",(function(){return Yd})),n.d(e,"Points",(function(){return Nc})),n.d(e,"PointsMaterial",(function(){return Rc})),n.d(e,"PolarGridHelper",(function(){return tp})),n.d(e,"PolyhedronBufferGeometry",(function(){return Qc})),n.d(e,"PolyhedronGeometry",(function(){return Xl})),n.d(e,"PositionalAudio",(function(){return dd})),n.d(e,"PropertyBinding",(function(){return Sd})),n.d(e,"PropertyMixer",(function(){return fd})),n.d(e,"QuadraticBezierCurve",(function(){return hh})),n.d(e,"QuadraticBezierCurve3",(function(){return dh})),n.d(e,"Quaternion",(function(){return Jn})),n.d(e,"QuaternionKeyframeTrack",(function(){return Iu})),n.d(e,"QuaternionLinearInterpolant",(function(){return Cu})),n.d(e,"REVISION",(function(){return r})),n.d(e,"RGBADepthPacking",(function(){return an})),n.d(e,"RGBAFormat",(function(){return Ut})),n.d(e,"RGBAIntegerFormat",(function(){return Zt})),n.d(e,"RGBA_ASTC_10x10_Format",(function(){return ye})),n.d(e,"RGBA_ASTC_10x5_Format",(function(){return me})),n.d(e,"RGBA_ASTC_10x6_Format",(function(){return ge})),n.d(e,"RGBA_ASTC_10x8_Format",(function(){return ve})),n.d(e,"RGBA_ASTC_12x10_Format",(function(){return xe})),n.d(e,"RGBA_ASTC_12x12_Format",(function(){return be})),n.d(e,"RGBA_ASTC_4x4_Format",(function(){return se})),n.d(e,"RGBA_ASTC_5x4_Format",(function(){return ce})),n.d(e,"RGBA_ASTC_5x5_Format",(function(){return le})),n.d(e,"RGBA_ASTC_6x5_Format",(function(){return ue})),n.d(e,"RGBA_ASTC_6x6_Format",(function(){return he})),n.d(e,"RGBA_ASTC_8x5_Format",(function(){return de})),n.d(e,"RGBA_ASTC_8x6_Format",(function(){return pe})),n.d(e,"RGBA_ASTC_8x8_Format",(function(){return fe})),n.d(e,"RGBA_BPTC_Format",(function(){return we})),n.d(e,"RGBA_ETC2_EAC_Format",(function(){return ae})),n.d(e,"RGBA_PVRTC_2BPPV1_Format",(function(){return re})),n.d(e,"RGBA_PVRTC_4BPPV1_Format",(function(){return ne})),n.d(e,"RGBA_S3TC_DXT1_Format",(function(){return Kt})),n.d(e,"RGBA_S3TC_DXT3_Format",(function(){return Qt})),n.d(e,"RGBA_S3TC_DXT5_Format",(function(){return $t})),n.d(e,"RGBDEncoding",(function(){return rn})),n.d(e,"RGBEEncoding",(function(){return $e})),n.d(e,"RGBEFormat",(function(){return Ht})),n.d(e,"RGBFormat",(function(){return Ft})),n.d(e,"RGBIntegerFormat",(function(){return Yt})),n.d(e,"RGBM16Encoding",(function(){return nn})),n.d(e,"RGBM7Encoding",(function(){return en})),n.d(e,"RGB_ETC1_Format",(function(){return ie})),n.d(e,"RGB_ETC2_Format",(function(){return oe})),n.d(e,"RGB_PVRTC_2BPPV1_Format",(function(){return ee})),n.d(e,"RGB_PVRTC_4BPPV1_Format",(function(){return te})),n.d(e,"RGB_S3TC_DXT1_Format",(function(){return Jt})),n.d(e,"RGFormat",(function(){return Xt})),n.d(e,"RGIntegerFormat",(function(){return qt})),n.d(e,"RawShaderMaterial",(function(){return du})),n.d(e,"Ray",(function(){return Sr})),n.d(e,"Raycaster",(function(){return Cd})),n.d(e,"RectAreaLight",(function(){return Rh})),n.d(e,"RedFormat",(function(){return jt})),n.d(e,"RedIntegerFormat",(function(){return Wt})),n.d(e,"ReinhardToneMapping",(function(){return tt})),n.d(e,"RepeatWrapping",(function(){return ht})),n.d(e,"ReplaceStencilOp",(function(){return hn})),n.d(e,"ReverseSubtractEquation",(function(){return A})),n.d(e,"RingBufferGeometry",(function(){return ql})),n.d(e,"RingGeometry",(function(){return Yl})),n.d(e,"SRGB8_ALPHA8_ASTC_10x10_Format",(function(){return Oe})),n.d(e,"SRGB8_ALPHA8_ASTC_10x5_Format",(function(){return Pe})),n.d(e,"SRGB8_ALPHA8_ASTC_10x6_Format",(function(){return Ce})),n.d(e,"SRGB8_ALPHA8_ASTC_10x8_Format",(function(){return Ie})),n.d(e,"SRGB8_ALPHA8_ASTC_12x10_Format",(function(){return Ne})),n.d(e,"SRGB8_ALPHA8_ASTC_12x12_Format",(function(){return De})),n.d(e,"SRGB8_ALPHA8_ASTC_4x4_Format",(function(){return _e})),n.d(e,"SRGB8_ALPHA8_ASTC_5x4_Format",(function(){return Me})),n.d(e,"SRGB8_ALPHA8_ASTC_5x5_Format",(function(){return Se})),n.d(e,"SRGB8_ALPHA8_ASTC_6x5_Format",(function(){return Te})),n.d(e,"SRGB8_ALPHA8_ASTC_6x6_Format",(function(){return Ee})),n.d(e,"SRGB8_ALPHA8_ASTC_8x5_Format",(function(){return Ae})),n.d(e,"SRGB8_ALPHA8_ASTC_8x6_Format",(function(){return Le})),n.d(e,"SRGB8_ALPHA8_ASTC_8x8_Format",(function(){return Re})),n.d(e,"Scene",(function(){return zs})),n.d(e,"SceneUtils",(function(){return Af})),n.d(e,"ShaderChunk",(function(){return Io})),n.d(e,"ShaderLib",(function(){return No})),n.d(e,"ShaderMaterial",(function(){return xo})),n.d(e,"ShadowMaterial",(function(){return hu})),n.d(e,"Shape",(function(){return vh})),n.d(e,"ShapeBufferGeometry",(function(){return Zl})),n.d(e,"ShapeGeometry",(function(){return Jl})),n.d(e,"ShapePath",(function(){return kh})),n.d(e,"ShapeUtils",(function(){return Cl})),n.d(e,"ShortType",(function(){return Et})),n.d(e,"Skeleton",(function(){return dc})),n.d(e,"SkeletonHelper",(function(){return qd})),n.d(e,"SkinnedMesh",(function(){return cc})),n.d(e,"SmoothShading",(function(){return y})),n.d(e,"Sphere",(function(){return gr})),n.d(e,"SphereBufferGeometry",(function(){return Kl})),n.d(e,"SphereGeometry",(function(){return Ql})),n.d(e,"Spherical",(function(){return Nd})),n.d(e,"SphericalHarmonics3",(function(){return Ph})),n.d(e,"Spline",(function(){return gf})),n.d(e,"SplineCurve",(function(){return ph})),n.d(e,"SplineCurve3",(function(){return mf})),n.d(e,"SpotLight",(function(){return _h})),n.d(e,"SpotLightHelper",(function(){return Vd})),n.d(e,"Sprite",(function(){return rc})),n.d(e,"SpriteMaterial",(function(){return Vs})),n.d(e,"SrcAlphaFactor",(function(){return N})),n.d(e,"SrcAlphaSaturateFactor",(function(){return G})),n.d(e,"SrcColorFactor",(function(){return I})),n.d(e,"StaticCopyUsage",(function(){return Cn})),n.d(e,"StaticDrawUsage",(function(){return Tn})),n.d(e,"StaticReadUsage",(function(){return Ln})),n.d(e,"StereoCamera",(function(){return $h})),n.d(e,"StreamCopyUsage",(function(){return On})),n.d(e,"StreamDrawUsage",(function(){return An})),n.d(e,"StreamReadUsage",(function(){return Pn})),n.d(e,"StringKeyframeTrack",(function(){return Ou})),n.d(e,"SubtractEquation",(function(){return E})),n.d(e,"SubtractiveBlending",(function(){return _})),n.d(e,"TOUCH",(function(){return o})),n.d(e,"TangentSpaceNormalMap",(function(){return sn})),n.d(e,"TetrahedronBufferGeometry",(function(){return $l})),n.d(e,"TetrahedronGeometry",(function(){return tu})),n.d(e,"TextBufferGeometry",(function(){return eu})),n.d(e,"TextGeometry",(function(){return nu})),n.d(e,"Texture",(function(){return Wn})),n.d(e,"TextureLoader",(function(){return Yu})),n.d(e,"TorusBufferGeometry",(function(){return ru})),n.d(e,"TorusGeometry",(function(){return iu})),n.d(e,"TorusKnotBufferGeometry",(function(){return ou})),n.d(e,"TorusKnotGeometry",(function(){return au})),n.d(e,"Triangle",(function(){return hi})),n.d(e,"TriangleFanDrawMode",(function(){return Ze})),n.d(e,"TriangleStripDrawMode",(function(){return Ye})),n.d(e,"TrianglesDrawMode",(function(){return qe})),n.d(e,"TubeBufferGeometry",(function(){return su})),n.d(e,"TubeGeometry",(function(){return cu})),n.d(e,"UVMapping",(function(){return it})),n.d(e,"Uint16Attribute",(function(){return lf})),n.d(e,"Uint16BufferAttribute",(function(){return Pi})),n.d(e,"Uint32Attribute",(function(){return hf})),n.d(e,"Uint32BufferAttribute",(function(){return Ii})),n.d(e,"Uint8Attribute",(function(){return af})),n.d(e,"Uint8BufferAttribute",(function(){return Ai})),n.d(e,"Uint8ClampedAttribute",(function(){return sf})),n.d(e,"Uint8ClampedBufferAttribute",(function(){return Li})),n.d(e,"Uniform",(function(){return Ld})),n.d(e,"UniformsLib",(function(){return Oo})),n.d(e,"UniformsUtils",(function(){return yo})),n.d(e,"UnsignedByteType",(function(){return St})),n.d(e,"UnsignedInt248Type",(function(){return Dt})),n.d(e,"UnsignedIntType",(function(){return Rt})),n.d(e,"UnsignedShort4444Type",(function(){return It})),n.d(e,"UnsignedShort5551Type",(function(){return Ot})),n.d(e,"UnsignedShort565Type",(function(){return Nt})),n.d(e,"UnsignedShortType",(function(){return At})),n.d(e,"VSMShadowMap",(function(){return p})),n.d(e,"Vector2",(function(){return Gn})),n.d(e,"Vector3",(function(){return Kn})),n.d(e,"Vector4",(function(){return qn})),n.d(e,"VectorKeyframeTrack",(function(){return Nu})),n.d(e,"Vertex",(function(){return nf})),n.d(e,"VertexColors",(function(){return qp})),n.d(e,"VideoTexture",(function(){return Bc})),n.d(e,"WebGL1Renderer",(function(){return Bs})),n.d(e,"WebGLCubeRenderTarget",(function(){return So})),n.d(e,"WebGLMultisampleRenderTarget",(function(){return Zn})),n.d(e,"WebGLRenderTarget",(function(){return Yn})),n.d(e,"WebGLRenderTargetCube",(function(){return Mf})),n.d(e,"WebGLRenderer",(function(){return Ds})),n.d(e,"WebGLUtils",(function(){return Rs})),n.d(e,"WireframeGeometry",(function(){return lu})),n.d(e,"WireframeHelper",(function(){return bf})),n.d(e,"WrapAroundEnding",(function(){return je})),n.d(e,"XHRLoader",(function(){return wf})),n.d(e,"ZeroCurvatureEnding",(function(){return ke})),n.d(e,"ZeroFactor",(function(){return P})),n.d(e,"ZeroSlopeEnding",(function(){return Ve})),n.d(e,"ZeroStencilOp",(function(){return ln})),n.d(e,"sRGBEncoding",(function(){return Ke}));const r="123",i={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},o={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},a=0,s=1,c=2,l=3,u=0,h=1,d=2,p=3,f=0,m=1,g=2,v=1,y=2,x=0,b=1,w=2,_=3,M=4,S=5,T=100,E=101,A=102,L=103,R=104,P=200,C=201,I=202,O=203,N=204,D=205,B=206,F=207,U=208,z=209,G=210,H=0,k=1,V=2,j=3,W=4,X=5,q=6,Y=7,Z=0,J=1,K=2,Q=0,$=1,tt=2,et=3,nt=4,rt=5,it=300,ot=301,at=302,st=303,ct=304,lt=306,ut=307,ht=1e3,dt=1001,pt=1002,ft=1003,mt=1004,gt=1004,vt=1005,yt=1005,xt=1006,bt=1007,wt=1007,_t=1008,Mt=1008,St=1009,Tt=1010,Et=1011,At=1012,Lt=1013,Rt=1014,Pt=1015,Ct=1016,It=1017,Ot=1018,Nt=1019,Dt=1020,Bt=1021,Ft=1022,Ut=1023,zt=1024,Gt=1025,Ht=Ut,kt=1026,Vt=1027,jt=1028,Wt=1029,Xt=1030,qt=1031,Yt=1032,Zt=1033,Jt=33776,Kt=33777,Qt=33778,$t=33779,te=35840,ee=35841,ne=35842,re=35843,ie=36196,oe=37492,ae=37496,se=37808,ce=37809,le=37810,ue=37811,he=37812,de=37813,pe=37814,fe=37815,me=37816,ge=37817,ve=37818,ye=37819,xe=37820,be=37821,we=36492,_e=37840,Me=37841,Se=37842,Te=37843,Ee=37844,Ae=37845,Le=37846,Re=37847,Pe=37848,Ce=37849,Ie=37850,Oe=37851,Ne=37852,De=37853,Be=2200,Fe=2201,Ue=2202,ze=2300,Ge=2301,He=2302,ke=2400,Ve=2401,je=2402,We=2500,Xe=2501,qe=0,Ye=1,Ze=2,Je=3e3,Ke=3001,Qe=3007,$e=3002,tn=3003,en=3004,nn=3005,rn=3006,on=3200,an=3201,sn=0,cn=1,ln=0,un=7680,hn=7681,dn=7682,pn=7683,fn=34055,mn=34056,gn=5386,vn=512,yn=513,xn=514,bn=515,wn=516,_n=517,Mn=518,Sn=519,Tn=35044,En=35048,An=35040,Ln=35045,Rn=35049,Pn=35041,Cn=35046,In=35050,On=35042,Nn="100",Dn="300 es";function Bn(){}Object.assign(Bn.prototype,{addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)},removeEventListener:function(t,e){if(void 0===this._listeners)return;const n=this._listeners[t];if(void 0!==n){const t=n.indexOf(e);-1!==t&&n.splice(t,1)}},dispatchEvent:function(t){if(void 0===this._listeners)return;const e=this._listeners[t.type];if(void 0!==e){t.target=this;const n=e.slice(0);for(let e=0,r=n.length;e<r;e++)n[e].call(this,t)}}});const Fn=[];for(let t=0;t<256;t++)Fn[t]=(t<16?"0":"")+t.toString(16);let Un=1234567;const zn={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){const t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(Fn[255&t]+Fn[t>>8&255]+Fn[t>>16&255]+Fn[t>>24&255]+"-"+Fn[255&e]+Fn[e>>8&255]+"-"+Fn[e>>16&15|64]+Fn[e>>24&255]+"-"+Fn[63&n|128]+Fn[n>>8&255]+"-"+Fn[n>>16&255]+Fn[n>>24&255]+Fn[255&r]+Fn[r>>8&255]+Fn[r>>16&255]+Fn[r>>24&255]).toUpperCase()},clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)},lerp:function(t,e,n){return(1-n)*t+n*e},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(t){return void 0!==t&&(Un=t%2147483647),Un=16807*Un%2147483647,(Un-1)/2147483646},degToRad:function(t){return t*zn.DEG2RAD},radToDeg:function(t){return t*zn.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,e,n,r,i){const o=Math.cos,a=Math.sin,s=o(n/2),c=a(n/2),l=o((e+r)/2),u=a((e+r)/2),h=o((e-r)/2),d=a((e-r)/2),p=o((r-e)/2),f=a((r-e)/2);switch(i){case"XYX":t.set(s*u,c*h,c*d,s*l);break;case"YZY":t.set(c*d,s*u,c*h,s*l);break;case"ZXZ":t.set(c*h,c*d,s*u,s*l);break;case"XZX":t.set(s*u,c*f,c*p,s*l);break;case"YXY":t.set(c*p,s*u,c*f,s*l);break;case"ZYZ":t.set(c*f,c*p,s*u,s*l);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}};class Gn{constructor(t=0,e=0){Object.defineProperty(this,"isVector2",{value:!0}),this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6],this.y=r[1]*e+r[4]*n+r[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),r=Math.sin(e),i=this.x-t.x,o=this.y-t.y;return this.x=i*n-o*r+t.x,this.y=i*r+o*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}}class Hn{constructor(){Object.defineProperty(this,"isMatrix3",{value:!0}),this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(t,e,n,r,i,o,a,s,c){const l=this.elements;return l[0]=t,l[1]=r,l[2]=a,l[3]=e,l[4]=i,l[5]=s,l[6]=n,l[7]=o,l[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}clone(){return(new this.constructor).fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,i=this.elements,o=n[0],a=n[3],s=n[6],c=n[1],l=n[4],u=n[7],h=n[2],d=n[5],p=n[8],f=r[0],m=r[3],g=r[6],v=r[1],y=r[4],x=r[7],b=r[2],w=r[5],_=r[8];return i[0]=o*f+a*v+s*b,i[3]=o*m+a*y+s*w,i[6]=o*g+a*x+s*_,i[1]=c*f+l*v+u*b,i[4]=c*m+l*y+u*w,i[7]=c*g+l*x+u*_,i[2]=h*f+d*v+p*b,i[5]=h*m+d*y+p*w,i[8]=h*g+d*x+p*_,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],c=t[7],l=t[8];return e*o*l-e*a*c-n*i*l+n*a*s+r*i*c-r*o*s}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],c=t[7],l=t[8],u=l*o-a*c,h=a*s-l*i,d=c*i-o*s,p=e*u+n*h+r*d;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const f=1/p;return t[0]=u*f,t[1]=(r*c-l*n)*f,t[2]=(a*n-r*o)*f,t[3]=h*f,t[4]=(l*e-r*s)*f,t[5]=(r*i-a*e)*f,t[6]=d*f,t[7]=(n*s-c*e)*f,t[8]=(o*e-n*i)*f,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).copy(this).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,r,i,o,a){const s=Math.cos(i),c=Math.sin(i);this.set(n*s,n*c,-n*(s*o+c*a)+o+t,-r*c,r*s,-r*(-c*o+s*a)+a+e,0,0,1)}scale(t,e){const n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this}rotate(t){const e=Math.cos(t),n=Math.sin(t),r=this.elements,i=r[0],o=r[3],a=r[6],s=r[1],c=r[4],l=r[7];return r[0]=e*i+n*s,r[3]=e*o+n*c,r[6]=e*a+n*l,r[1]=-n*i+e*s,r[4]=-n*o+e*c,r[7]=-n*a+e*l,this}translate(t,e){const n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this}equals(t){const e=this.elements,n=t.elements;for(let t=0;t<9;t++)if(e[t]!==n[t])return!1;return!0}fromArray(t,e=0){for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}}let kn;const Vn={getDataURL:function(t){if(/^data:/i.test(t.src))return t.src;if("undefined"==typeof HTMLCanvasElement)return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===kn&&(kn=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),kn.width=t.width,kn.height=t.height;const n=kn.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=kn}return e.width>2048||e.height>2048?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}};let jn=0;function Wn(t=Wn.DEFAULT_IMAGE,e=Wn.DEFAULT_MAPPING,n=dt,r=dt,i=xt,o=_t,a=Ut,s=St,c=1,l=Je){Object.defineProperty(this,"id",{value:jn++}),this.uuid=zn.generateUUID(),this.name="",this.image=t,this.mipmaps=[],this.mapping=e,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=s,this.offset=new Gn(0,0),this.repeat=new Gn(1,1),this.center=new Gn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Hn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=l,this.version=0,this.onUpdate=null}function Xn(t){return"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?Vn.getDataURL(t):t.data?{data:Array.prototype.slice.call(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}Wn.DEFAULT_IMAGE=void 0,Wn.DEFAULT_MAPPING=it,Wn.prototype=Object.assign(Object.create(Bn.prototype),{constructor:Wn,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const r=this.image;if(void 0===r.uuid&&(r.uuid=zn.generateUUID()),!e&&void 0===t.images[r.uuid]){let e;if(Array.isArray(r)){e=[];for(let t=0,n=r.length;t<n;t++)r[t].isDataTexture?e.push(Xn(r[t].image)):e.push(Xn(r[t]))}else e=Xn(r);t.images[r.uuid]={uuid:r.uuid,url:e}}n.image=r.uuid}return e||(t.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(this.mapping!==it)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case ht:t.x=t.x-Math.floor(t.x);break;case dt:t.x=t.x<0?0:1;break;case pt:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case ht:t.y=t.y-Math.floor(t.y);break;case dt:t.y=t.y<0?0:1;break;case pt:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}}),Object.defineProperty(Wn.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}});class qn{constructor(t=0,e=0,n=0,r=1){Object.defineProperty(this,"isVector4",{value:!0}),this.x=t,this.y=e,this.z=n,this.w=r}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,i=this.w,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*e+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*e+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*e+o[7]*n+o[11]*r+o[15]*i,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,r,i;const o=t.elements,a=o[0],s=o[4],c=o[8],l=o[1],u=o[5],h=o[9],d=o[2],p=o[6],f=o[10];if(Math.abs(s-l)<.01&&Math.abs(c-d)<.01&&Math.abs(h-p)<.01){if(Math.abs(s+l)<.1&&Math.abs(c+d)<.1&&Math.abs(h+p)<.1&&Math.abs(a+u+f-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;const t=(a+1)/2,o=(u+1)/2,m=(f+1)/2,g=(s+l)/4,v=(c+d)/4,y=(h+p)/4;return t>o&&t>m?t<.01?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(t),r=g/n,i=v/n):o>m?o<.01?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(o),n=g/r,i=y/r):m<.01?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(m),n=v/i,r=y/i),this.set(n,r,i,e),this}let m=Math.sqrt((p-h)*(p-h)+(c-d)*(c-d)+(l-s)*(l-s));return Math.abs(m)<.001&&(m=1),this.x=(p-h)/m,this.y=(c-d)/m,this.z=(l-s)/m,this.w=Math.acos((a+u+f-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}function Yn(t,e,n){this.width=t,this.height=e,this.scissor=new qn(0,0,t,e),this.scissorTest=!1,this.viewport=new qn(0,0,t,e),n=n||{},this.texture=new Wn(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={},this.texture.image.width=t,this.texture.image.height=e,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:xt,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function Zn(t,e,n){Yn.call(this,t,e,n),this.samples=4}Yn.prototype=Object.assign(Object.create(Bn.prototype),{constructor:Yn,isWebGLRenderTarget:!0,setSize:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.texture.image.width=t,this.texture.image.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Zn.prototype=Object.assign(Object.create(Yn.prototype),{constructor:Zn,isWebGLMultisampleRenderTarget:!0,copy:function(t){return Yn.prototype.copy.call(this,t),this.samples=t.samples,this}});class Jn{constructor(t=0,e=0,n=0,r=1){Object.defineProperty(this,"isQuaternion",{value:!0}),this._x=t,this._y=e,this._z=n,this._w=r}static slerp(t,e,n,r){return n.copy(t).slerp(e,r)}static slerpFlat(t,e,n,r,i,o,a){let s=n[r+0],c=n[r+1],l=n[r+2],u=n[r+3];const h=i[o+0],d=i[o+1],p=i[o+2],f=i[o+3];if(u!==f||s!==h||c!==d||l!==p){let t=1-a;const e=s*h+c*d+l*p+u*f,n=e>=0?1:-1,r=1-e*e;if(r>Number.EPSILON){const i=Math.sqrt(r),o=Math.atan2(i,e*n);t=Math.sin(t*o)/i,a=Math.sin(a*o)/i}const i=a*n;if(s=s*t+h*i,c=c*t+d*i,l=l*t+p*i,u=u*t+f*i,t===1-a){const t=1/Math.sqrt(s*s+c*c+l*l+u*u);s*=t,c*=t,l*=t,u*=t}}t[e]=s,t[e+1]=c,t[e+2]=l,t[e+3]=u}static multiplyQuaternionsFlat(t,e,n,r,i,o){const a=n[r],s=n[r+1],c=n[r+2],l=n[r+3],u=i[o],h=i[o+1],d=i[o+2],p=i[o+3];return t[e]=a*p+l*u+s*d-c*h,t[e+1]=s*p+l*h+c*u-a*d,t[e+2]=c*p+l*d+a*h-s*u,t[e+3]=l*p-a*u-s*h-c*d,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const n=t._x,r=t._y,i=t._z,o=t._order,a=Math.cos,s=Math.sin,c=a(n/2),l=a(r/2),u=a(i/2),h=s(n/2),d=s(r/2),p=s(i/2);switch(o){case"XYZ":this._x=h*l*u+c*d*p,this._y=c*d*u-h*l*p,this._z=c*l*p+h*d*u,this._w=c*l*u-h*d*p;break;case"YXZ":this._x=h*l*u+c*d*p,this._y=c*d*u-h*l*p,this._z=c*l*p-h*d*u,this._w=c*l*u+h*d*p;break;case"ZXY":this._x=h*l*u-c*d*p,this._y=c*d*u+h*l*p,this._z=c*l*p+h*d*u,this._w=c*l*u-h*d*p;break;case"ZYX":this._x=h*l*u-c*d*p,this._y=c*d*u+h*l*p,this._z=c*l*p-h*d*u,this._w=c*l*u+h*d*p;break;case"YZX":this._x=h*l*u+c*d*p,this._y=c*d*u+h*l*p,this._z=c*l*p-h*d*u,this._w=c*l*u-h*d*p;break;case"XZY":this._x=h*l*u-c*d*p,this._y=c*d*u-h*l*p,this._z=c*l*p+h*d*u,this._w=c*l*u+h*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,r=Math.sin(n);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],r=e[4],i=e[8],o=e[1],a=e[5],s=e[9],c=e[2],l=e[6],u=e[10],h=n+a+u;if(h>0){const t=.5/Math.sqrt(h+1);this._w=.25/t,this._x=(l-s)*t,this._y=(i-c)*t,this._z=(o-r)*t}else if(n>a&&n>u){const t=2*Math.sqrt(1+n-a-u);this._w=(l-s)/t,this._x=.25*t,this._y=(r+o)/t,this._z=(i+c)/t}else if(a>u){const t=2*Math.sqrt(1+a-n-u);this._w=(i-c)/t,this._x=(r+o)/t,this._y=.25*t,this._z=(s+l)/t}else{const t=2*Math.sqrt(1+u-n-a);this._w=(o-r)/t,this._x=(i+c)/t,this._y=(s+l)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<1e-6?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(zn.clamp(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(0===n)return this;const r=Math.min(1,e/n);return this.slerp(t,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,r=t._y,i=t._z,o=t._w,a=e._x,s=e._y,c=e._z,l=e._w;return this._x=n*l+o*a+r*c-i*s,this._y=r*l+o*s+i*a-n*c,this._z=i*l+o*c+n*s-r*a,this._w=o*l-n*a-r*s-i*c,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const n=this._x,r=this._y,i=this._z,o=this._w;let a=o*t._w+n*t._x+r*t._y+i*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;const s=1-a*a;if(s<=Number.EPSILON){const t=1-e;return this._w=t*o+e*this._w,this._x=t*n+e*this._x,this._y=t*r+e*this._y,this._z=t*i+e*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(s),l=Math.atan2(c,a),u=Math.sin((1-e)*l)/c,h=Math.sin(e*l)/c;return this._w=o*u+this._w*h,this._x=n*u+this._x*h,this._y=r*u+this._y*h,this._z=i*u+this._z*h,this._onChangeCallback(),this}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}class Kn{constructor(t=0,e=0,n=0){Object.defineProperty(this,"isVector3",{value:!0}),this.x=t,this.y=e,this.z=n}set(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion($n.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion($n.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6]*r,this.y=i[1]*e+i[4]*n+i[7]*r,this.z=i[2]*e+i[5]*n+i[8]*r,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,i=t.elements,o=1/(i[3]*e+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*e+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*e+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*e+i[6]*n+i[10]*r+i[14])*o,this}applyQuaternion(t){const e=this.x,n=this.y,r=this.z,i=t.x,o=t.y,a=t.z,s=t.w,c=s*e+o*r-a*n,l=s*n+a*e-i*r,u=s*r+i*n-o*e,h=-i*e-o*n-a*r;return this.x=c*s+h*-i+l*-a-u*-o,this.y=l*s+h*-o+u*-i-c*-a,this.z=u*s+h*-a+c*-o-l*-i,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[4]*n+i[8]*r,this.y=i[1]*e+i[5]*n+i[9]*r,this.z=i[2]*e+i[6]*n+i[10]*r,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,r=t.y,i=t.z,o=e.x,a=e.y,s=e.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return Qn.copy(this).projectOnVector(t),this.sub(Qn)}reflect(t){return this.sub(Qn.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(zn.clamp(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const r=Math.sin(e)*t;return this.x=r*Math.sin(n),this.y=Math.cos(e)*t,this.z=r*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=r,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}const Qn=new Kn,$n=new Jn;class tr{constructor(t,e){Object.defineProperty(this,"isBox3",{value:!0}),this.min=void 0!==t?t:new Kn(1/0,1/0,1/0),this.max=void 0!==e?e:new Kn(-1/0,-1/0,-1/0)}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){let e=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0;for(let s=0,c=t.length;s<c;s+=3){const c=t[s],l=t[s+1],u=t[s+2];c<e&&(e=c),l<n&&(n=l),u<r&&(r=u),c>i&&(i=c),l>o&&(o=l),u>a&&(a=u)}return this.min.set(e,n,r),this.max.set(i,o,a),this}setFromBufferAttribute(t){let e=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0;for(let s=0,c=t.count;s<c;s++){const c=t.getX(s),l=t.getY(s),u=t.getZ(s);c<e&&(e=c),l<n&&(n=l),u<r&&(r=u),c>i&&(i=c),l>o&&(o=l),u>a&&(a=u)}return this.min.set(e,n,r),this.max.set(i,o,a),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=rr.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t){return this.makeEmpty(),this.expandByObject(t)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return void 0===t&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new Kn),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return void 0===t&&(console.warn("THREE.Box3: .getSize() target is now required"),t=new Kn),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t){t.updateWorldMatrix(!1,!1);const e=t.geometry;void 0!==e&&(null===e.boundingBox&&e.computeBoundingBox(),ir.copy(e.boundingBox),ir.applyMatrix4(t.matrixWorld),this.union(ir));const n=t.children;for(let t=0,e=n.length;t<e;t++)this.expandByObject(n[t]);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return void 0===e&&(console.warn("THREE.Box3: .getParameter() target is now required"),e=new Kn),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,rr),rr.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(hr),dr.subVectors(this.max,hr),or.subVectors(t.a,hr),ar.subVectors(t.b,hr),sr.subVectors(t.c,hr),cr.subVectors(ar,or),lr.subVectors(sr,ar),ur.subVectors(or,sr);let e=[0,-cr.z,cr.y,0,-lr.z,lr.y,0,-ur.z,ur.y,cr.z,0,-cr.x,lr.z,0,-lr.x,ur.z,0,-ur.x,-cr.y,cr.x,0,-lr.y,lr.x,0,-ur.y,ur.x,0];return!!er(e,or,ar,sr,dr)&&(e=[1,0,0,0,1,0,0,0,1],!!er(e,or,ar,sr,dr)&&(pr.crossVectors(cr,lr),e=[pr.x,pr.y,pr.z],er(e,or,ar,sr,dr)))}clampPoint(t,e){return void 0===e&&(console.warn("THREE.Box3: .clampPoint() target is now required"),e=new Kn),e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return rr.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return void 0===t&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(t.center),t.radius=.5*this.getSize(rr).length(),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(nr[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),nr[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),nr[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),nr[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),nr[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),nr[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),nr[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),nr[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(nr)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}function er(t,e,n,r,i){for(let o=0,a=t.length-3;o<=a;o+=3){fr.fromArray(t,o);const a=i.x*Math.abs(fr.x)+i.y*Math.abs(fr.y)+i.z*Math.abs(fr.z),s=e.dot(fr),c=n.dot(fr),l=r.dot(fr);if(Math.max(-Math.max(s,c,l),Math.min(s,c,l))>a)return!1}return!0}const nr=[new Kn,new Kn,new Kn,new Kn,new Kn,new Kn,new Kn,new Kn],rr=new Kn,ir=new tr,or=new Kn,ar=new Kn,sr=new Kn,cr=new Kn,lr=new Kn,ur=new Kn,hr=new Kn,dr=new Kn,pr=new Kn,fr=new Kn,mr=new tr;class gr{constructor(t,e){this.center=void 0!==t?t:new Kn,this.radius=void 0!==e?e:-1}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;void 0!==e?n.copy(e):mr.setFromPoints(t).getCenter(n);let r=0;for(let e=0,i=t.length;e<i;e++)r=Math.max(r,n.distanceToSquared(t[e]));return this.radius=Math.sqrt(r),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return void 0===e&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),e=new Kn),e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return void 0===t&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),t=new tr),this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}}const vr=new Kn,yr=new Kn,xr=new Kn,br=new Kn,wr=new Kn,_r=new Kn,Mr=new Kn;class Sr{constructor(t,e){this.origin=void 0!==t?t:new Kn,this.direction=void 0!==e?e:new Kn(0,0,-1)}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return void 0===e&&(console.warn("THREE.Ray: .at() target is now required"),e=new Kn),e.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,vr)),this}closestPointToPoint(t,e){void 0===e&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),e=new Kn),e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=vr.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(vr.copy(this.direction).multiplyScalar(e).add(this.origin),vr.distanceToSquared(t))}distanceSqToSegment(t,e,n,r){yr.copy(t).add(e).multiplyScalar(.5),xr.copy(e).sub(t).normalize(),br.copy(this.origin).sub(yr);const i=.5*t.distanceTo(e),o=-this.direction.dot(xr),a=br.dot(this.direction),s=-br.dot(xr),c=br.lengthSq(),l=Math.abs(1-o*o);let u,h,d,p;if(l>0)if(u=o*s-a,h=o*a-s,p=i*l,u>=0)if(h>=-p)if(h<=p){const t=1/l;u*=t,h*=t,d=u*(u+o*h+2*a)+h*(o*u+h+2*s)+c}else h=i,u=Math.max(0,-(o*h+a)),d=-u*u+h*(h+2*s)+c;else h=-i,u=Math.max(0,-(o*h+a)),d=-u*u+h*(h+2*s)+c;else h<=-p?(u=Math.max(0,-(-o*i+a)),h=u>0?-i:Math.min(Math.max(-i,-s),i),d=-u*u+h*(h+2*s)+c):h<=p?(u=0,h=Math.min(Math.max(-i,-s),i),d=h*(h+2*s)+c):(u=Math.max(0,-(o*i+a)),h=u>0?i:Math.min(Math.max(-i,-s),i),d=-u*u+h*(h+2*s)+c);else h=o>0?-i:i,u=Math.max(0,-(o*h+a)),d=-u*u+h*(h+2*s)+c;return n&&n.copy(this.direction).multiplyScalar(u).add(this.origin),r&&r.copy(xr).multiplyScalar(h).add(yr),d}intersectSphere(t,e){vr.subVectors(t.center,this.origin);const n=vr.dot(this.direction),r=vr.dot(vr)-n*n,i=t.radius*t.radius;if(r>i)return null;const o=Math.sqrt(i-r),a=n-o,s=n+o;return a<0&&s<0?null:a<0?this.at(s,e):this.at(a,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return null===n?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);if(0===e)return!0;return t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,r,i,o,a,s;const c=1/this.direction.x,l=1/this.direction.y,u=1/this.direction.z,h=this.origin;return c>=0?(n=(t.min.x-h.x)*c,r=(t.max.x-h.x)*c):(n=(t.max.x-h.x)*c,r=(t.min.x-h.x)*c),l>=0?(i=(t.min.y-h.y)*l,o=(t.max.y-h.y)*l):(i=(t.max.y-h.y)*l,o=(t.min.y-h.y)*l),n>o||i>r?null:((i>n||n!=n)&&(n=i),(o<r||r!=r)&&(r=o),u>=0?(a=(t.min.z-h.z)*u,s=(t.max.z-h.z)*u):(a=(t.max.z-h.z)*u,s=(t.min.z-h.z)*u),n>s||a>r?null:((a>n||n!=n)&&(n=a),(s<r||r!=r)&&(r=s),r<0?null:this.at(n>=0?n:r,e)))}intersectsBox(t){return null!==this.intersectBox(t,vr)}intersectTriangle(t,e,n,r,i){wr.subVectors(e,t),_r.subVectors(n,t),Mr.crossVectors(wr,_r);let o,a=this.direction.dot(Mr);if(a>0){if(r)return null;o=1}else{if(!(a<0))return null;o=-1,a=-a}br.subVectors(this.origin,t);const s=o*this.direction.dot(_r.crossVectors(br,_r));if(s<0)return null;const c=o*this.direction.dot(wr.cross(br));if(c<0)return null;if(s+c>a)return null;const l=-o*br.dot(Mr);return l<0?null:this.at(l/a,i)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}}class Tr{constructor(){Object.defineProperty(this,"isMatrix4",{value:!0}),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(t,e,n,r,i,o,a,s,c,l,u,h,d,p,f,m){const g=this.elements;return g[0]=t,g[4]=e,g[8]=n,g[12]=r,g[1]=i,g[5]=o,g[9]=a,g[13]=s,g[2]=c,g[6]=l,g[10]=u,g[14]=h,g[3]=d,g[7]=p,g[11]=f,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Tr).fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,r=1/Er.setFromMatrixColumn(t,0).length(),i=1/Er.setFromMatrixColumn(t,1).length(),o=1/Er.setFromMatrixColumn(t,2).length();return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=0,e[4]=n[4]*i,e[5]=n[5]*i,e[6]=n[6]*i,e[7]=0,e[8]=n[8]*o,e[9]=n[9]*o,e[10]=n[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const e=this.elements,n=t.x,r=t.y,i=t.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(r),c=Math.sin(r),l=Math.cos(i),u=Math.sin(i);if("XYZ"===t.order){const t=o*l,n=o*u,r=a*l,i=a*u;e[0]=s*l,e[4]=-s*u,e[8]=c,e[1]=n+r*c,e[5]=t-i*c,e[9]=-a*s,e[2]=i-t*c,e[6]=r+n*c,e[10]=o*s}else if("YXZ"===t.order){const t=s*l,n=s*u,r=c*l,i=c*u;e[0]=t+i*a,e[4]=r*a-n,e[8]=o*c,e[1]=o*u,e[5]=o*l,e[9]=-a,e[2]=n*a-r,e[6]=i+t*a,e[10]=o*s}else if("ZXY"===t.order){const t=s*l,n=s*u,r=c*l,i=c*u;e[0]=t-i*a,e[4]=-o*u,e[8]=r+n*a,e[1]=n+r*a,e[5]=o*l,e[9]=i-t*a,e[2]=-o*c,e[6]=a,e[10]=o*s}else if("ZYX"===t.order){const t=o*l,n=o*u,r=a*l,i=a*u;e[0]=s*l,e[4]=r*c-n,e[8]=t*c+i,e[1]=s*u,e[5]=i*c+t,e[9]=n*c-r,e[2]=-c,e[6]=a*s,e[10]=o*s}else if("YZX"===t.order){const t=o*s,n=o*c,r=a*s,i=a*c;e[0]=s*l,e[4]=i-t*u,e[8]=r*u+n,e[1]=u,e[5]=o*l,e[9]=-a*l,e[2]=-c*l,e[6]=n*u+r,e[10]=t-i*u}else if("XZY"===t.order){const t=o*s,n=o*c,r=a*s,i=a*c;e[0]=s*l,e[4]=-u,e[8]=c*l,e[1]=t*u+i,e[5]=o*l,e[9]=n*u-r,e[2]=r*u-n,e[6]=a*l,e[10]=i*u+t}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(Lr,t,Rr)}lookAt(t,e,n){const r=this.elements;return Ir.subVectors(t,e),0===Ir.lengthSq()&&(Ir.z=1),Ir.normalize(),Pr.crossVectors(n,Ir),0===Pr.lengthSq()&&(1===Math.abs(n.z)?Ir.x+=1e-4:Ir.z+=1e-4,Ir.normalize(),Pr.crossVectors(n,Ir)),Pr.normalize(),Cr.crossVectors(Ir,Pr),r[0]=Pr.x,r[4]=Cr.x,r[8]=Ir.x,r[1]=Pr.y,r[5]=Cr.y,r[9]=Ir.y,r[2]=Pr.z,r[6]=Cr.z,r[10]=Ir.z,this}multiply(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,i=this.elements,o=n[0],a=n[4],s=n[8],c=n[12],l=n[1],u=n[5],h=n[9],d=n[13],p=n[2],f=n[6],m=n[10],g=n[14],v=n[3],y=n[7],x=n[11],b=n[15],w=r[0],_=r[4],M=r[8],S=r[12],T=r[1],E=r[5],A=r[9],L=r[13],R=r[2],P=r[6],C=r[10],I=r[14],O=r[3],N=r[7],D=r[11],B=r[15];return i[0]=o*w+a*T+s*R+c*O,i[4]=o*_+a*E+s*P+c*N,i[8]=o*M+a*A+s*C+c*D,i[12]=o*S+a*L+s*I+c*B,i[1]=l*w+u*T+h*R+d*O,i[5]=l*_+u*E+h*P+d*N,i[9]=l*M+u*A+h*C+d*D,i[13]=l*S+u*L+h*I+d*B,i[2]=p*w+f*T+m*R+g*O,i[6]=p*_+f*E+m*P+g*N,i[10]=p*M+f*A+m*C+g*D,i[14]=p*S+f*L+m*I+g*B,i[3]=v*w+y*T+x*R+b*O,i[7]=v*_+y*E+x*P+b*N,i[11]=v*M+y*A+x*C+b*D,i[15]=v*S+y*L+x*I+b*B,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],r=t[8],i=t[12],o=t[1],a=t[5],s=t[9],c=t[13],l=t[2],u=t[6],h=t[10],d=t[14];return t[3]*(+i*s*u-r*c*u-i*a*h+n*c*h+r*a*d-n*s*d)+t[7]*(+e*s*d-e*c*h+i*o*h-r*o*d+r*c*l-i*s*l)+t[11]*(+e*c*u-e*a*d-i*o*u+n*o*d+i*a*l-n*c*l)+t[15]*(-r*a*l-e*s*u+e*a*h+r*o*u-n*o*h+n*s*l)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],c=t[7],l=t[8],u=t[9],h=t[10],d=t[11],p=t[12],f=t[13],m=t[14],g=t[15],v=u*m*c-f*h*c+f*s*d-a*m*d-u*s*g+a*h*g,y=p*h*c-l*m*c-p*s*d+o*m*d+l*s*g-o*h*g,x=l*f*c-p*u*c+p*a*d-o*f*d-l*a*g+o*u*g,b=p*u*s-l*f*s-p*a*h+o*f*h+l*a*m-o*u*m,w=e*v+n*y+r*x+i*b;if(0===w)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const _=1/w;return t[0]=v*_,t[1]=(f*h*i-u*m*i-f*r*d+n*m*d+u*r*g-n*h*g)*_,t[2]=(a*m*i-f*s*i+f*r*c-n*m*c-a*r*g+n*s*g)*_,t[3]=(u*s*i-a*h*i-u*r*c+n*h*c+a*r*d-n*s*d)*_,t[4]=y*_,t[5]=(l*m*i-p*h*i+p*r*d-e*m*d-l*r*g+e*h*g)*_,t[6]=(p*s*i-o*m*i-p*r*c+e*m*c+o*r*g-e*s*g)*_,t[7]=(o*h*i-l*s*i+l*r*c-e*h*c-o*r*d+e*s*d)*_,t[8]=x*_,t[9]=(p*u*i-l*f*i-p*n*d+e*f*d+l*n*g-e*u*g)*_,t[10]=(o*f*i-p*a*i+p*n*c-e*f*c-o*n*g+e*a*g)*_,t[11]=(l*a*i-o*u*i-l*n*c+e*u*c+o*n*d-e*a*d)*_,t[12]=b*_,t[13]=(l*f*r-p*u*r+p*n*h-e*f*h-l*n*m+e*u*m)*_,t[14]=(p*a*r-o*f*r-p*n*s+e*f*s+o*n*m-e*a*m)*_,t[15]=(o*u*r-l*a*r+l*n*s-e*u*s-o*n*h+e*a*h)*_,this}scale(t){const e=this.elements,n=t.x,r=t.y,i=t.z;return e[0]*=n,e[4]*=r,e[8]*=i,e[1]*=n,e[5]*=r,e[9]*=i,e[2]*=n,e[6]*=r,e[10]*=i,e[3]*=n,e[7]*=r,e[11]*=i,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,r))}makeTranslation(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),r=Math.sin(e),i=1-n,o=t.x,a=t.y,s=t.z,c=i*o,l=i*a;return this.set(c*o+n,c*a-r*s,c*s+r*a,0,c*a+r*s,l*a+n,l*s-r*o,0,c*s-r*a,l*s+r*o,i*s*s+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n){return this.set(1,e,n,0,t,1,n,0,t,e,1,0,0,0,0,1),this}compose(t,e,n){const r=this.elements,i=e._x,o=e._y,a=e._z,s=e._w,c=i+i,l=o+o,u=a+a,h=i*c,d=i*l,p=i*u,f=o*l,m=o*u,g=a*u,v=s*c,y=s*l,x=s*u,b=n.x,w=n.y,_=n.z;return r[0]=(1-(f+g))*b,r[1]=(d+x)*b,r[2]=(p-y)*b,r[3]=0,r[4]=(d-x)*w,r[5]=(1-(h+g))*w,r[6]=(m+v)*w,r[7]=0,r[8]=(p+y)*_,r[9]=(m-v)*_,r[10]=(1-(h+f))*_,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}decompose(t,e,n){const r=this.elements;let i=Er.set(r[0],r[1],r[2]).length();const o=Er.set(r[4],r[5],r[6]).length(),a=Er.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),t.x=r[12],t.y=r[13],t.z=r[14],Ar.copy(this);const s=1/i,c=1/o,l=1/a;return Ar.elements[0]*=s,Ar.elements[1]*=s,Ar.elements[2]*=s,Ar.elements[4]*=c,Ar.elements[5]*=c,Ar.elements[6]*=c,Ar.elements[8]*=l,Ar.elements[9]*=l,Ar.elements[10]*=l,e.setFromRotationMatrix(Ar),n.x=i,n.y=o,n.z=a,this}makePerspective(t,e,n,r,i,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const a=this.elements,s=2*i/(e-t),c=2*i/(n-r),l=(e+t)/(e-t),u=(n+r)/(n-r),h=-(o+i)/(o-i),d=-2*o*i/(o-i);return a[0]=s,a[4]=0,a[8]=l,a[12]=0,a[1]=0,a[5]=c,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=d,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(t,e,n,r,i,o){const a=this.elements,s=1/(e-t),c=1/(n-r),l=1/(o-i),u=(e+t)*s,h=(n+r)*c,d=(o+i)*l;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*l,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let t=0;t<16;t++)if(e[t]!==n[t])return!1;return!0}fromArray(t,e=0){for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}const Er=new Kn,Ar=new Tr,Lr=new Kn(0,0,0),Rr=new Kn(1,1,1),Pr=new Kn,Cr=new Kn,Ir=new Kn;class Or{constructor(t=0,e=0,n=0,r=Or.DefaultOrder){Object.defineProperty(this,"isEuler",{value:!0}),this._x=t,this._y=e,this._z=n,this._order=r}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._order=r||this._order,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e,n){const r=zn.clamp,i=t.elements,o=i[0],a=i[4],s=i[8],c=i[1],l=i[5],u=i[9],h=i[2],d=i[6],p=i[10];switch(e=e||this._order){case"XYZ":this._y=Math.asin(r(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-u,p),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(d,l),this._z=0);break;case"YXZ":this._x=Math.asin(-r(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(s,p),this._z=Math.atan2(c,l)):(this._y=Math.atan2(-h,o),this._z=0);break;case"ZXY":this._x=Math.asin(r(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-h,p),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(c,o));break;case"ZYX":this._y=Math.asin(-r(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(d,p),this._z=Math.atan2(c,o)):(this._x=0,this._z=Math.atan2(-a,l));break;case"YZX":this._z=Math.asin(r(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(s,p));break;case"XZY":this._z=Math.asin(-r(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(d,l),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-u,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!1!==n&&this._onChangeCallback(),this}setFromQuaternion(t,e,n){return Nr.makeRotationFromQuaternion(t),this.setFromRotationMatrix(Nr,e,n)}setFromVector3(t,e){return this.set(t.x,t.y,t.z,e||this._order)}reorder(t){return Dr.setFromEuler(this),this.setFromQuaternion(Dr,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}toVector3(t){return t?t.set(this._x,this._y,this._z):new Kn(this._x,this._y,this._z)}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}Or.DefaultOrder="XYZ",Or.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];const Nr=new Tr,Dr=new Jn;class Br{constructor(){this.mask=1}set(t){this.mask=1<<t|0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!=(this.mask&t.mask)}}let Fr=0;const Ur=new Kn,zr=new Jn,Gr=new Tr,Hr=new Kn,kr=new Kn,Vr=new Kn,jr=new Jn,Wr=new Kn(1,0,0),Xr=new Kn(0,1,0),qr=new Kn(0,0,1),Yr={type:"added"},Zr={type:"removed"};function Jr(){Object.defineProperty(this,"id",{value:Fr++}),this.uuid=zn.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Jr.DefaultUp.clone();const t=new Kn,e=new Or,n=new Jn,r=new Kn(1,1,1);e._onChange((function(){n.setFromEuler(e,!1)})),n._onChange((function(){e.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Tr},normalMatrix:{value:new Hn}}),this.matrix=new Tr,this.matrixWorld=new Tr,this.matrixAutoUpdate=Jr.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Br,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}Jr.DefaultUp=new Kn(0,1,0),Jr.DefaultMatrixAutoUpdate=!0,Jr.prototype=Object.assign(Object.create(Bn.prototype),{constructor:Jr,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(t,e){return zr.setFromAxisAngle(t,e),this.quaternion.multiply(zr),this},rotateOnWorldAxis:function(t,e){return zr.setFromAxisAngle(t,e),this.quaternion.premultiply(zr),this},rotateX:function(t){return this.rotateOnAxis(Wr,t)},rotateY:function(t){return this.rotateOnAxis(Xr,t)},rotateZ:function(t){return this.rotateOnAxis(qr,t)},translateOnAxis:function(t,e){return Ur.copy(t).applyQuaternion(this.quaternion),this.position.add(Ur.multiplyScalar(e)),this},translateX:function(t){return this.translateOnAxis(Wr,t)},translateY:function(t){return this.translateOnAxis(Xr,t)},translateZ:function(t){return this.translateOnAxis(qr,t)},localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(t){return t.applyMatrix4(Gr.copy(this.matrixWorld).invert())},lookAt:function(t,e,n){t.isVector3?Hr.copy(t):Hr.set(t,e,n);const r=this.parent;this.updateWorldMatrix(!0,!1),kr.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Gr.lookAt(kr,Hr,this.up):Gr.lookAt(Hr,kr,this.up),this.quaternion.setFromRotationMatrix(Gr),r&&(Gr.extractRotation(r.matrixWorld),zr.setFromRotationMatrix(Gr),this.quaternion.premultiply(zr.invert()))},add:function(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(Yr)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const e=this.children.indexOf(t);return-1!==e&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(Zr)),this},clear:function(){for(let t=0;t<this.children.length;t++){const e=this.children[t];e.parent=null,e.dispatchEvent(Zr)}return this.children.length=0,this},attach:function(t){return this.updateWorldMatrix(!0,!1),Gr.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Gr.multiply(t.parent.matrixWorld)),t.applyMatrix4(Gr),t.updateWorldMatrix(!1,!1),this.add(t),this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n].getObjectByProperty(t,e);if(void 0!==r)return r}},getWorldPosition:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),t=new Kn),this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),t=new Jn),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(kr,t,Vr),t},getWorldScale:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),t=new Kn),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(kr,jr,t),t},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new Kn),this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()},raycast:function(){},traverse:function(t){t(this);const e=this.children;for(let n=0,r=e.length;n<r;n++)e[n].traverse(t)},traverseVisible:function(t){if(!1===this.visible)return;t(this);const e=this.children;for(let n=0,r=e.length;n<r;n++)e[n].traverseVisible(t)},traverseAncestors:function(t){const e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let n=0,r=e.length;n<r;n++)e[n].updateMatrixWorld(t)},updateWorldMatrix:function(t,e){const n=this.parent;if(!0===t&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e){const t=this.children;for(let e=0,n=t.length;e<n;e++)t[e].updateWorldMatrix(!1,!0)}},toJSON:function(t){const e=void 0===t||"string"==typeof t,n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};function i(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON()),this.isMesh||this.isLine||this.isPoints){r.geometry=i(t.geometries,this.geometry);const e=this.geometry.parameters;if(void 0!==e&&void 0!==e.shapes){const n=e.shapes;if(Array.isArray(n))for(let e=0,r=n.length;e<r;e++){const r=n[e];i(t.shapes,r)}else i(t.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(t.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const e=[];for(let n=0,r=this.material.length;n<r;n++)e.push(i(t.materials,this.material[n]));r.material=e}else r.material=i(t.materials,this.material);if(this.children.length>0){r.children=[];for(let e=0;e<this.children.length;e++)r.children.push(this.children[e].toJSON(t).object)}if(this.animations.length>0){r.animations=[];for(let e=0;e<this.animations.length;e++){const n=this.animations[e];r.animations.push(i(t.animations,n))}}if(e){const e=o(t.geometries),r=o(t.materials),i=o(t.textures),a=o(t.images),s=o(t.shapes),c=o(t.skeletons),l=o(t.animations);e.length>0&&(n.geometries=e),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),a.length>0&&(n.images=a),s.length>0&&(n.shapes=s),c.length>0&&(n.skeletons=c),l.length>0&&(n.animations=l)}return n.object=r,n;function o(t){const e=[];for(const n in t){const r=t[n];delete r.metadata,e.push(r)}return e}},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(let e=0;e<t.children.length;e++){const n=t.children[e];this.add(n.clone())}return this}});const Kr=new Kn,Qr=new Kn,$r=new Hn;class ti{constructor(t,e){Object.defineProperty(this,"isPlane",{value:!0}),this.normal=void 0!==t?t:new Kn(1,0,0),this.constant=void 0!==e?e:0}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){const r=Kr.subVectors(n,e).cross(Qr.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return void 0===e&&(console.warn("THREE.Plane: .projectPoint() target is now required"),e=new Kn),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,e){void 0===e&&(console.warn("THREE.Plane: .intersectLine() target is now required"),e=new Kn);const n=t.delta(Kr),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(t.start)?e.copy(t.start):void 0;const i=-(t.start.dot(this.normal)+this.constant)/r;return i<0||i>1?void 0:e.copy(n).multiplyScalar(i).add(t.start)}intersectsLine(t){const e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return void 0===t&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new Kn),t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||$r.getNormalMatrix(t),r=this.coplanarPoint(Kr).applyMatrix4(t),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}}const ei=new Kn,ni=new Kn,ri=new Kn,ii=new Kn,oi=new Kn,ai=new Kn,si=new Kn,ci=new Kn,li=new Kn,ui=new Kn;class hi{constructor(t,e,n){this.a=void 0!==t?t:new Kn,this.b=void 0!==e?e:new Kn,this.c=void 0!==n?n:new Kn}static getNormal(t,e,n,r){void 0===r&&(console.warn("THREE.Triangle: .getNormal() target is now required"),r=new Kn),r.subVectors(n,e),ei.subVectors(t,e),r.cross(ei);const i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(t,e,n,r,i){ei.subVectors(r,e),ni.subVectors(n,e),ri.subVectors(t,e);const o=ei.dot(ei),a=ei.dot(ni),s=ei.dot(ri),c=ni.dot(ni),l=ni.dot(ri),u=o*c-a*a;if(void 0===i&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),i=new Kn),0===u)return i.set(-2,-1,-1);const h=1/u,d=(c*s-a*l)*h,p=(o*l-a*s)*h;return i.set(1-d-p,p,d)}static containsPoint(t,e,n,r){return this.getBarycoord(t,e,n,r,ii),ii.x>=0&&ii.y>=0&&ii.x+ii.y<=1}static getUV(t,e,n,r,i,o,a,s){return this.getBarycoord(t,e,n,r,ii),s.set(0,0),s.addScaledVector(i,ii.x),s.addScaledVector(o,ii.y),s.addScaledVector(a,ii.z),s}static isFrontFacing(t,e,n,r){return ei.subVectors(n,e),ni.subVectors(t,e),ei.cross(ni).dot(r)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,r){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[r]),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return ei.subVectors(this.c,this.b),ni.subVectors(this.a,this.b),.5*ei.cross(ni).length()}getMidpoint(t){return void 0===t&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),t=new Kn),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return hi.getNormal(this.a,this.b,this.c,t)}getPlane(t){return void 0===t&&(console.warn("THREE.Triangle: .getPlane() target is now required"),t=new ti),t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return hi.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,n,r,i){return hi.getUV(t,this.a,this.b,this.c,e,n,r,i)}containsPoint(t){return hi.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return hi.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){void 0===e&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),e=new Kn);const n=this.a,r=this.b,i=this.c;let o,a;oi.subVectors(r,n),ai.subVectors(i,n),ci.subVectors(t,n);const s=oi.dot(ci),c=ai.dot(ci);if(s<=0&&c<=0)return e.copy(n);li.subVectors(t,r);const l=oi.dot(li),u=ai.dot(li);if(l>=0&&u<=l)return e.copy(r);const h=s*u-l*c;if(h<=0&&s>=0&&l<=0)return o=s/(s-l),e.copy(n).addScaledVector(oi,o);ui.subVectors(t,i);const d=oi.dot(ui),p=ai.dot(ui);if(p>=0&&d<=p)return e.copy(i);const f=d*c-s*p;if(f<=0&&c>=0&&p<=0)return a=c/(c-p),e.copy(n).addScaledVector(ai,a);const m=l*p-d*u;if(m<=0&&u-l>=0&&d-p>=0)return si.subVectors(i,r),a=(u-l)/(u-l+(d-p)),e.copy(r).addScaledVector(si,a);const g=1/(m+f+h);return o=f*g,a=h*g,e.copy(n).addScaledVector(oi,o).addScaledVector(ai,a)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const di={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},pi={h:0,s:0,l:0},fi={h:0,s:0,l:0};function mi(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}function gi(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function vi(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}class yi{constructor(t,e,n){return Object.defineProperty(this,"isColor",{value:!0}),void 0===e&&void 0===n?this.set(t):this.setRGB(t,e,n)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this}setRGB(t,e,n){return this.r=t,this.g=e,this.b=n,this}setHSL(t,e,n){if(t=zn.euclideanModulo(t,1),e=zn.clamp(e,0,1),n=zn.clamp(n,0,1),0===e)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+e):n+e-n*e,i=2*n-r;this.r=mi(i,r,t+1/3),this.g=mi(i,r,t),this.b=mi(i,r,t-1/3)}return this}setStyle(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){let t;const r=n[1],i=n[2];switch(r){case"rgb":case"rgba":if(t=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(i))return this.r=Math.min(255,parseInt(t[1],10))/255,this.g=Math.min(255,parseInt(t[2],10))/255,this.b=Math.min(255,parseInt(t[3],10))/255,e(t[5]),this;if(t=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(i))return this.r=Math.min(100,parseInt(t[1],10))/100,this.g=Math.min(100,parseInt(t[2],10))/100,this.b=Math.min(100,parseInt(t[3],10))/100,e(t[5]),this;break;case"hsl":case"hsla":if(t=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(i)){const n=parseFloat(t[1])/360,r=parseInt(t[2],10)/100,i=parseInt(t[3],10)/100;return e(t[5]),this.setHSL(n,r,i)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(t)){const t=n[1],e=t.length;if(3===e)return this.r=parseInt(t.charAt(0)+t.charAt(0),16)/255,this.g=parseInt(t.charAt(1)+t.charAt(1),16)/255,this.b=parseInt(t.charAt(2)+t.charAt(2),16)/255,this;if(6===e)return this.r=parseInt(t.charAt(0)+t.charAt(1),16)/255,this.g=parseInt(t.charAt(2)+t.charAt(3),16)/255,this.b=parseInt(t.charAt(4)+t.charAt(5),16)/255,this}return t&&t.length>0?this.setColorName(t):this}setColorName(t){const e=di[t];return void 0!==e?this.setHex(e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copyGammaToLinear(t,e=2){return this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this}copyLinearToGamma(t,e=2){const n=e>0?1/e:1;return this.r=Math.pow(t.r,n),this.g=Math.pow(t.g,n),this.b=Math.pow(t.b,n),this}convertGammaToLinear(t){return this.copyGammaToLinear(this,t),this}convertLinearToGamma(t){return this.copyLinearToGamma(this,t),this}copySRGBToLinear(t){return this.r=gi(t.r),this.g=gi(t.g),this.b=gi(t.b),this}copyLinearToSRGB(t){return this.r=vi(t.r),this.g=vi(t.g),this.b=vi(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(t){void 0===t&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});const e=this.r,n=this.g,r=this.b,i=Math.max(e,n,r),o=Math.min(e,n,r);let a,s;const c=(o+i)/2;if(o===i)a=0,s=0;else{const t=i-o;switch(s=c<=.5?t/(i+o):t/(2-i-o),i){case e:a=(n-r)/t+(n<r?6:0);break;case n:a=(r-e)/t+2;break;case r:a=(e-n)/t+4}a/=6}return t.h=a,t.s=s,t.l=c,t}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(t,e,n){return this.getHSL(pi),pi.h+=t,pi.s+=e,pi.l+=n,this.setHSL(pi.h,pi.s,pi.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpHSL(t,e){this.getHSL(pi),t.getHSL(fi);const n=zn.lerp(pi.h,fi.h,e),r=zn.lerp(pi.s,fi.s,e),i=zn.lerp(pi.l,fi.l,e);return this.setHSL(n,r,i),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),!0===t.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}yi.NAMES=di,yi.prototype.r=1,yi.prototype.g=1,yi.prototype.b=1;class xi{constructor(t,e,n,r,i,o=0){this.a=t,this.b=e,this.c=n,this.normal=r&&r.isVector3?r:new Kn,this.vertexNormals=Array.isArray(r)?r:[],this.color=i&&i.isColor?i:new yi,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=o}clone(){return(new this.constructor).copy(this)}copy(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(let e=0,n=t.vertexNormals.length;e<n;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(let e=0,n=t.vertexColors.length;e<n;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}}let bi=0;function wi(){Object.defineProperty(this,"id",{value:bi++}),this.uuid=zn.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=b,this.side=f,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=N,this.blendDst=D,this.blendEquation=T,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=j,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Sn,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=un,this.stencilZFail=un,this.stencilZPass=un,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}function _i(t){wi.call(this),this.type="MeshBasicMaterial",this.color=new yi(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Z,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(t)}wi.prototype=Object.assign(Object.create(Bn.prototype),{constructor:wi,isMaterial:!0,onBeforeCompile:function(){},customProgramCacheKey:function(){return this.onBeforeCompile.toString()},setValues:function(t){if(void 0!==t)for(const e in t){const n=t[e];if(void 0===n){console.warn("THREE.Material: '"+e+"' parameter is undefined.");continue}if("shading"===e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===v;continue}const r=this[e];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[e]=n:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}},toJSON:function(t){const e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(t){const e=[];for(const n in t){const r=t[n];delete r.metadata,e.push(r)}return e}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(n.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,n.reflectivity=this.reflectivity,n.refractionRatio=this.refractionRatio,void 0!==this.combine&&(n.combine=this.combine),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==b&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),this.side!==f&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.morphNormals&&(n.morphNormals=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),e){const e=r(t.textures),i=r(t.images);e.length>0&&(n.textures=e),i.length>0&&(n.images=i)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(null!==e){const t=e.length;n=new Array(t);for(let r=0;r!==t;++r)n[r]=e[r].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(wi.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),_i.prototype=Object.create(wi.prototype),_i.prototype.constructor=_i,_i.prototype.isMeshBasicMaterial=!0,_i.prototype.copy=function(t){return wi.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this};const Mi=new Kn,Si=new Gn;function Ti(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===n,this.usage=Tn,this.updateRange={offset:0,count:-1},this.version=0}function Ei(t,e,n){Ti.call(this,new Int8Array(t),e,n)}function Ai(t,e,n){Ti.call(this,new Uint8Array(t),e,n)}function Li(t,e,n){Ti.call(this,new Uint8ClampedArray(t),e,n)}function Ri(t,e,n){Ti.call(this,new Int16Array(t),e,n)}function Pi(t,e,n){Ti.call(this,new Uint16Array(t),e,n)}function Ci(t,e,n){Ti.call(this,new Int32Array(t),e,n)}function Ii(t,e,n){Ti.call(this,new Uint32Array(t),e,n)}function Oi(t,e,n){Ti.call(this,new Uint16Array(t),e,n)}function Ni(t,e,n){Ti.call(this,new Float32Array(t),e,n)}function Di(t,e,n){Ti.call(this,new Float64Array(t),e,n)}Object.defineProperty(Ti.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(Ti.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this},copyAt:function(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[t+r]=e.array[n+r];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){const e=this.array;let n=0;for(let r=0,i=t.length;r<i;r++){let i=t[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),i=new yi),e[n++]=i.r,e[n++]=i.g,e[n++]=i.b}return this},copyVector2sArray:function(t){const e=this.array;let n=0;for(let r=0,i=t.length;r<i;r++){let i=t[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),i=new Gn),e[n++]=i.x,e[n++]=i.y}return this},copyVector3sArray:function(t){const e=this.array;let n=0;for(let r=0,i=t.length;r<i;r++){let i=t[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),i=new Kn),e[n++]=i.x,e[n++]=i.y,e[n++]=i.z}return this},copyVector4sArray:function(t){const e=this.array;let n=0;for(let r=0,i=t.length;r<i;r++){let i=t[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),i=new qn),e[n++]=i.x,e[n++]=i.y,e[n++]=i.z,e[n++]=i.w}return this},applyMatrix3:function(t){if(2===this.itemSize)for(let e=0,n=this.count;e<n;e++)Si.fromBufferAttribute(this,e),Si.applyMatrix3(t),this.setXY(e,Si.x,Si.y);else if(3===this.itemSize)for(let e=0,n=this.count;e<n;e++)Mi.fromBufferAttribute(this,e),Mi.applyMatrix3(t),this.setXYZ(e,Mi.x,Mi.y,Mi.z);return this},applyMatrix4:function(t){for(let e=0,n=this.count;e<n;e++)Mi.x=this.getX(e),Mi.y=this.getY(e),Mi.z=this.getZ(e),Mi.applyMatrix4(t),this.setXYZ(e,Mi.x,Mi.y,Mi.z);return this},applyNormalMatrix:function(t){for(let e=0,n=this.count;e<n;e++)Mi.x=this.getX(e),Mi.y=this.getY(e),Mi.z=this.getZ(e),Mi.applyNormalMatrix(t),this.setXYZ(e,Mi.x,Mi.y,Mi.z);return this},transformDirection:function(t){for(let e=0,n=this.count;e<n;e++)Mi.x=this.getX(e),Mi.y=this.getY(e),Mi.z=this.getZ(e),Mi.transformDirection(t),this.setXYZ(e,Mi.x,Mi.y,Mi.z);return this},set:function(t,e=0){return this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this},setXYZ:function(t,e,n,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this},setXYZW:function(t,e,n,r,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=i,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),Ei.prototype=Object.create(Ti.prototype),Ei.prototype.constructor=Ei,Ai.prototype=Object.create(Ti.prototype),Ai.prototype.constructor=Ai,Li.prototype=Object.create(Ti.prototype),Li.prototype.constructor=Li,Ri.prototype=Object.create(Ti.prototype),Ri.prototype.constructor=Ri,Pi.prototype=Object.create(Ti.prototype),Pi.prototype.constructor=Pi,Ci.prototype=Object.create(Ti.prototype),Ci.prototype.constructor=Ci,Ii.prototype=Object.create(Ti.prototype),Ii.prototype.constructor=Ii,Oi.prototype=Object.create(Ti.prototype),Oi.prototype.constructor=Oi,Oi.prototype.isFloat16BufferAttribute=!0,Ni.prototype=Object.create(Ti.prototype),Ni.prototype.constructor=Ni,Di.prototype=Object.create(Ti.prototype),Di.prototype.constructor=Di;class Bi{constructor(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}computeGroups(t){const e=[];let n,r,i=void 0;const o=t.faces;for(r=0;r<o.length;r++){const t=o[r];t.materialIndex!==i&&(i=t.materialIndex,void 0!==n&&(n.count=3*r-n.start,e.push(n)),n={start:3*r,materialIndex:i})}void 0!==n&&(n.count=3*r-n.start,e.push(n)),this.groups=e}fromGeometry(t){const e=t.faces,n=t.vertices,r=t.faceVertexUvs,i=r[0]&&r[0].length>0,o=r[1]&&r[1].length>0,a=t.morphTargets,s=a.length;let c;if(s>0){c=[];for(let t=0;t<s;t++)c[t]={name:a[t].name,data:[]};this.morphTargets.position=c}const l=t.morphNormals,u=l.length;let h;if(u>0){h=[];for(let t=0;t<u;t++)h[t]={name:l[t].name,data:[]};this.morphTargets.normal=h}const d=t.skinIndices,p=t.skinWeights,f=d.length===n.length,m=p.length===n.length;n.length>0&&0===e.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(let t=0;t<e.length;t++){const g=e[t];this.vertices.push(n[g.a],n[g.b],n[g.c]);const v=g.vertexNormals;if(3===v.length)this.normals.push(v[0],v[1],v[2]);else{const t=g.normal;this.normals.push(t,t,t)}const y=g.vertexColors;if(3===y.length)this.colors.push(y[0],y[1],y[2]);else{const t=g.color;this.colors.push(t,t,t)}if(!0===i){const e=r[0][t];void 0!==e?this.uvs.push(e[0],e[1],e[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",t),this.uvs.push(new Gn,new Gn,new Gn))}if(!0===o){const e=r[1][t];void 0!==e?this.uvs2.push(e[0],e[1],e[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",t),this.uvs2.push(new Gn,new Gn,new Gn))}for(let t=0;t<s;t++){const e=a[t].vertices;c[t].data.push(e[g.a],e[g.b],e[g.c])}for(let e=0;e<u;e++){const n=l[e].vertexNormals[t];h[e].data.push(n.a,n.b,n.c)}f&&this.skinIndices.push(d[g.a],d[g.b],d[g.c]),m&&this.skinWeights.push(p[g.a],p[g.b],p[g.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this}}function Fi(t){if(0===t.length)return-1/0;let e=t[0];for(let n=1,r=t.length;n<r;++n)t[n]>e&&(e=t[n]);return e}const Ui={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function zi(t,e){return new Ui[t](e)}let Gi=1;const Hi=new Tr,ki=new Jr,Vi=new Kn,ji=new tr,Wi=new tr,Xi=new Kn;function qi(){Object.defineProperty(this,"id",{value:Gi+=2}),this.uuid=zn.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}qi.prototype=Object.assign(Object.create(Bn.prototype),{constructor:qi,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){return Array.isArray(t)?this.index=new(Fi(t)>65535?Ii:Pi)(t,1):this.index=t,this},getAttribute:function(t){return this.attributes[t]},setAttribute:function(t,e){return this.attributes[t]=e,this},deleteAttribute:function(t){return delete this.attributes[t],this},hasAttribute:function(t){return void 0!==this.attributes[t]},addGroup:function(t,e,n=0){this.groups.push({start:t,count:e,materialIndex:n})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix4:function(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const e=(new Hn).getNormalMatrix(t);n.applyNormalMatrix(e),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(t),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(t){return Hi.makeRotationX(t),this.applyMatrix4(Hi),this},rotateY:function(t){return Hi.makeRotationY(t),this.applyMatrix4(Hi),this},rotateZ:function(t){return Hi.makeRotationZ(t),this.applyMatrix4(Hi),this},translate:function(t,e,n){return Hi.makeTranslation(t,e,n),this.applyMatrix4(Hi),this},scale:function(t,e,n){return Hi.makeScale(t,e,n),this.applyMatrix4(Hi),this},lookAt:function(t){return ki.lookAt(t),ki.updateMatrix(),this.applyMatrix4(ki.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Vi).negate(),this.translate(Vi.x,Vi.y,Vi.z),this},setFromObject:function(t){const e=t.geometry;if(t.isPoints||t.isLine){const t=new Ni(3*e.vertices.length,3),n=new Ni(3*e.colors.length,3);if(this.setAttribute("position",t.copyVector3sArray(e.vertices)),this.setAttribute("color",n.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length){const t=new Ni(e.lineDistances.length,1);this.setAttribute("lineDistance",t.copyArray(e.lineDistances))}null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},setFromPoints:function(t){const e=[];for(let n=0,r=t.length;n<r;n++){const r=t[n];e.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new Ni(e,3)),this},updateFromObject:function(t){let e=t.geometry;if(t.isMesh){let t=e.__directGeometry;if(!0===e.elementsNeedUpdate&&(t=void 0,e.elementsNeedUpdate=!1),void 0===t)return this.fromGeometry(e);t.verticesNeedUpdate=e.verticesNeedUpdate,t.normalsNeedUpdate=e.normalsNeedUpdate,t.colorsNeedUpdate=e.colorsNeedUpdate,t.uvsNeedUpdate=e.uvsNeedUpdate,t.groupsNeedUpdate=e.groupsNeedUpdate,e.verticesNeedUpdate=!1,e.normalsNeedUpdate=!1,e.colorsNeedUpdate=!1,e.uvsNeedUpdate=!1,e.groupsNeedUpdate=!1,e=t}if(!0===e.verticesNeedUpdate){const t=this.attributes.position;void 0!==t&&(t.copyVector3sArray(e.vertices),t.needsUpdate=!0),e.verticesNeedUpdate=!1}if(!0===e.normalsNeedUpdate){const t=this.attributes.normal;void 0!==t&&(t.copyVector3sArray(e.normals),t.needsUpdate=!0),e.normalsNeedUpdate=!1}if(!0===e.colorsNeedUpdate){const t=this.attributes.color;void 0!==t&&(t.copyColorsArray(e.colors),t.needsUpdate=!0),e.colorsNeedUpdate=!1}if(e.uvsNeedUpdate){const t=this.attributes.uv;void 0!==t&&(t.copyVector2sArray(e.uvs),t.needsUpdate=!0),e.uvsNeedUpdate=!1}if(e.lineDistancesNeedUpdate){const t=this.attributes.lineDistance;void 0!==t&&(t.copyArray(e.lineDistances),t.needsUpdate=!0),e.lineDistancesNeedUpdate=!1}return e.groupsNeedUpdate&&(e.computeGroups(t.geometry),this.groups=e.groups,e.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new Bi).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){const e=new Float32Array(3*t.vertices.length);if(this.setAttribute("position",new Ti(e,3).copyVector3sArray(t.vertices)),t.normals.length>0){const e=new Float32Array(3*t.normals.length);this.setAttribute("normal",new Ti(e,3).copyVector3sArray(t.normals))}if(t.colors.length>0){const e=new Float32Array(3*t.colors.length);this.setAttribute("color",new Ti(e,3).copyColorsArray(t.colors))}if(t.uvs.length>0){const e=new Float32Array(2*t.uvs.length);this.setAttribute("uv",new Ti(e,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){const e=new Float32Array(2*t.uvs2.length);this.setAttribute("uv2",new Ti(e,2).copyVector2sArray(t.uvs2))}this.groups=t.groups;for(const e in t.morphTargets){const n=[],r=t.morphTargets[e];for(let t=0,e=r.length;t<e;t++){const e=r[t],i=new Ni(3*e.data.length,3);i.name=e.name,n.push(i.copyVector3sArray(e.data))}this.morphAttributes[e]=n}if(t.skinIndices.length>0){const e=new Ni(4*t.skinIndices.length,4);this.setAttribute("skinIndex",e.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){const e=new Ni(4*t.skinWeights.length,4);this.setAttribute("skinWeight",e.copyVector4sArray(t.skinWeights))}return null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new tr);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Kn(-1/0,-1/0,-1/0),new Kn(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let t=0,n=e.length;t<n;t++){const n=e[t];ji.setFromBufferAttribute(n),this.morphTargetsRelative?(Xi.addVectors(this.boundingBox.min,ji.min),this.boundingBox.expandByPoint(Xi),Xi.addVectors(this.boundingBox.max,ji.max),this.boundingBox.expandByPoint(Xi)):(this.boundingBox.expandByPoint(ji.min),this.boundingBox.expandByPoint(ji.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new gr);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Kn,1/0);if(t){const n=this.boundingSphere.center;if(ji.setFromBufferAttribute(t),e)for(let t=0,n=e.length;t<n;t++){const n=e[t];Wi.setFromBufferAttribute(n),this.morphTargetsRelative?(Xi.addVectors(ji.min,Wi.min),ji.expandByPoint(Xi),Xi.addVectors(ji.max,Wi.max),ji.expandByPoint(Xi)):(ji.expandByPoint(Wi.min),ji.expandByPoint(Wi.max))}ji.getCenter(n);let r=0;for(let e=0,i=t.count;e<i;e++)Xi.fromBufferAttribute(t,e),r=Math.max(r,n.distanceToSquared(Xi));if(e)for(let i=0,o=e.length;i<o;i++){const o=e[i],a=this.morphTargetsRelative;for(let e=0,i=o.count;e<i;e++)Xi.fromBufferAttribute(o,e),a&&(Vi.fromBufferAttribute(t,e),Xi.add(Vi)),r=Math.max(r,n.distanceToSquared(Xi))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let n=this.getAttribute("normal");if(void 0===n)n=new Ti(new Float32Array(3*e.count),3),this.setAttribute("normal",n);else for(let t=0,e=n.count;t<e;t++)n.setXYZ(t,0,0,0);const r=new Kn,i=new Kn,o=new Kn,a=new Kn,s=new Kn,c=new Kn,l=new Kn,u=new Kn;if(t)for(let h=0,d=t.count;h<d;h+=3){const d=t.getX(h+0),p=t.getX(h+1),f=t.getX(h+2);r.fromBufferAttribute(e,d),i.fromBufferAttribute(e,p),o.fromBufferAttribute(e,f),l.subVectors(o,i),u.subVectors(r,i),l.cross(u),a.fromBufferAttribute(n,d),s.fromBufferAttribute(n,p),c.fromBufferAttribute(n,f),a.add(l),s.add(l),c.add(l),n.setXYZ(d,a.x,a.y,a.z),n.setXYZ(p,s.x,s.y,s.z),n.setXYZ(f,c.x,c.y,c.z)}else for(let t=0,a=e.count;t<a;t+=3)r.fromBufferAttribute(e,t+0),i.fromBufferAttribute(e,t+1),o.fromBufferAttribute(e,t+2),l.subVectors(o,i),u.subVectors(r,i),l.cross(u),n.setXYZ(t+0,l.x,l.y,l.z),n.setXYZ(t+1,l.x,l.y,l.z),n.setXYZ(t+2,l.x,l.y,l.z);this.normalizeNormals(),n.needsUpdate=!0}},merge:function(t,e){if(!t||!t.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t);void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const n=this.attributes;for(const r in n){if(void 0===t.attributes[r])continue;const i=n[r].array,o=t.attributes[r],a=o.array,s=o.itemSize*e,c=Math.min(a.length,i.length-s);for(let t=0,e=s;t<c;t++,e++)i[e]=a[t]}return this},normalizeNormals:function(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)Xi.fromBufferAttribute(t,e),Xi.normalize(),t.setXYZ(e,Xi.x,Xi.y,Xi.z)},toNonIndexed:function(){function t(t,e){const n=t.array,r=t.itemSize,i=t.normalized,o=new n.constructor(e.length*r);let a=0,s=0;for(let t=0,i=e.length;t<i;t++){a=e[t]*r;for(let t=0;t<r;t++)o[s++]=n[a++]}return new Ti(o,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;const e=new qi,n=this.index.array,r=this.attributes;for(const i in r){const o=t(r[i],n);e.setAttribute(i,o)}const i=this.morphAttributes;for(const r in i){const o=[],a=i[r];for(let e=0,r=a.length;e<r;e++){const r=t(a[e],n);o.push(r)}e.morphAttributes[r]=o}e.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let t=0,n=o.length;t<n;t++){const n=o[t];e.addGroup(n.start,n.count,n.materialIndex)}return e},toJSON:function(){const t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const e=this.parameters;for(const n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const e in n){const r=n[e],i=r.toJSON(t.data);""!==r.name&&(i.name=r.name),t.data.attributes[e]=i}const r={};let i=!1;for(const e in this.morphAttributes){const n=this.morphAttributes[e],o=[];for(let e=0,r=n.length;e<r;e++){const r=n[e],i=r.toJSON(t.data);""!==r.name&&(i.name=r.name),o.push(i)}o.length>0&&(r[e]=o,i=!0)}i&&(t.data.morphAttributes=r,t.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(t.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(t.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),t},clone:function(){return(new qi).copy(this)},copy:function(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;null!==n&&this.setIndex(n.clone(e));const r=t.attributes;for(const t in r){const n=r[t];this.setAttribute(t,n.clone(e))}const i=t.morphAttributes;for(const t in i){const n=[],r=i[t];for(let t=0,i=r.length;t<i;t++)n.push(r[t].clone(e));this.morphAttributes[t]=n}this.morphTargetsRelative=t.morphTargetsRelative;const o=t.groups;for(let t=0,e=o.length;t<e;t++){const e=o[t];this.addGroup(e.start,e.count,e.materialIndex)}const a=t.boundingBox;null!==a&&(this.boundingBox=a.clone());const s=t.boundingSphere;return null!==s&&(this.boundingSphere=s.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});const Yi=new Tr,Zi=new Sr,Ji=new gr,Ki=new Kn,Qi=new Kn,$i=new Kn,to=new Kn,eo=new Kn,no=new Kn,ro=new Kn,io=new Kn,oo=new Kn,ao=new Gn,so=new Gn,co=new Gn,lo=new Kn,uo=new Kn;function ho(t,e){Jr.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new qi,this.material=void 0!==e?e:new _i,this.updateMorphTargets()}function po(t,e,n,r,i,o,a,s){let c;if(c=e.side===m?r.intersectTriangle(a,o,i,!0,s):r.intersectTriangle(i,o,a,e.side!==g,s),null===c)return null;uo.copy(s),uo.applyMatrix4(t.matrixWorld);const l=n.ray.origin.distanceTo(uo);return l<n.near||l>n.far?null:{distance:l,point:uo.clone(),object:t}}function fo(t,e,n,r,i,o,a,s,c,l,u,h){Ki.fromBufferAttribute(i,l),Qi.fromBufferAttribute(i,u),$i.fromBufferAttribute(i,h);const d=t.morphTargetInfluences;if(e.morphTargets&&o&&d){ro.set(0,0,0),io.set(0,0,0),oo.set(0,0,0);for(let t=0,e=o.length;t<e;t++){const e=d[t],n=o[t];0!==e&&(to.fromBufferAttribute(n,l),eo.fromBufferAttribute(n,u),no.fromBufferAttribute(n,h),a?(ro.addScaledVector(to,e),io.addScaledVector(eo,e),oo.addScaledVector(no,e)):(ro.addScaledVector(to.sub(Ki),e),io.addScaledVector(eo.sub(Qi),e),oo.addScaledVector(no.sub($i),e)))}Ki.add(ro),Qi.add(io),$i.add(oo)}t.isSkinnedMesh&&(t.boneTransform(l,Ki),t.boneTransform(u,Qi),t.boneTransform(h,$i));const p=po(t,e,n,r,Ki,Qi,$i,lo);if(p){s&&(ao.fromBufferAttribute(s,l),so.fromBufferAttribute(s,u),co.fromBufferAttribute(s,h),p.uv=hi.getUV(lo,Ki,Qi,$i,ao,so,co,new Gn)),c&&(ao.fromBufferAttribute(c,l),so.fromBufferAttribute(c,u),co.fromBufferAttribute(c,h),p.uv2=hi.getUV(lo,Ki,Qi,$i,ao,so,co,new Gn));const t=new xi(l,u,h);hi.getNormal(Ki,Qi,$i,t.normal),p.face=t}return p}ho.prototype=Object.assign(Object.create(Jr.prototype),{constructor:ho,isMesh:!0,copy:function(t){return Jr.prototype.copy.call(this,t),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this},updateMorphTargets:function(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const t=e[n[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,n=t.length;e<n;e++){const n=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}}}else{const e=t.morphTargets;void 0!==e&&e.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(t,e){const n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0===r)return;if(null===n.boundingSphere&&n.computeBoundingSphere(),Ji.copy(n.boundingSphere),Ji.applyMatrix4(i),!1===t.ray.intersectsSphere(Ji))return;if(Yi.copy(i).invert(),Zi.copy(t.ray).applyMatrix4(Yi),null!==n.boundingBox&&!1===Zi.intersectsBox(n.boundingBox))return;let o;if(n.isBufferGeometry){const i=n.index,a=n.attributes.position,s=n.morphAttributes.position,c=n.morphTargetsRelative,l=n.attributes.uv,u=n.attributes.uv2,h=n.groups,d=n.drawRange;if(null!==i)if(Array.isArray(r))for(let n=0,p=h.length;n<p;n++){const p=h[n],f=r[p.materialIndex];for(let n=Math.max(p.start,d.start),r=Math.min(p.start+p.count,d.start+d.count);n<r;n+=3){const r=i.getX(n),h=i.getX(n+1),d=i.getX(n+2);o=fo(this,f,t,Zi,a,s,c,l,u,r,h,d),o&&(o.faceIndex=Math.floor(n/3),o.face.materialIndex=p.materialIndex,e.push(o))}}else{for(let n=Math.max(0,d.start),h=Math.min(i.count,d.start+d.count);n<h;n+=3){const h=i.getX(n),d=i.getX(n+1),p=i.getX(n+2);o=fo(this,r,t,Zi,a,s,c,l,u,h,d,p),o&&(o.faceIndex=Math.floor(n/3),e.push(o))}}else if(void 0!==a)if(Array.isArray(r))for(let n=0,i=h.length;n<i;n++){const i=h[n],p=r[i.materialIndex];for(let n=Math.max(i.start,d.start),r=Math.min(i.start+i.count,d.start+d.count);n<r;n+=3){o=fo(this,p,t,Zi,a,s,c,l,u,n,n+1,n+2),o&&(o.faceIndex=Math.floor(n/3),o.face.materialIndex=i.materialIndex,e.push(o))}}else{for(let n=Math.max(0,d.start),i=Math.min(a.count,d.start+d.count);n<i;n+=3){o=fo(this,r,t,Zi,a,s,c,l,u,n,n+1,n+2),o&&(o.faceIndex=Math.floor(n/3),e.push(o))}}}else if(n.isGeometry){const i=Array.isArray(r),a=n.vertices,s=n.faces;let c;const l=n.faceVertexUvs[0];l.length>0&&(c=l);for(let n=0,l=s.length;n<l;n++){const l=s[n],u=i?r[l.materialIndex]:r;if(void 0===u)continue;const h=a[l.a],d=a[l.b],p=a[l.c];if(o=po(this,u,t,Zi,h,d,p,lo),o){if(c&&c[n]){const t=c[n];ao.copy(t[0]),so.copy(t[1]),co.copy(t[2]),o.uv=hi.getUV(lo,h,d,p,ao,so,co,new Gn)}o.face=l,o.faceIndex=n,e.push(o)}}}}});class mo extends qi{constructor(t=1,e=1,n=1,r=1,i=1,o=1){super(),this.type="BoxBufferGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:i,depthSegments:o};const a=this;r=Math.floor(r),i=Math.floor(i),o=Math.floor(o);const s=[],c=[],l=[],u=[];let h=0,d=0;function p(t,e,n,r,i,o,p,f,m,g,v){const y=o/m,x=p/g,b=o/2,w=p/2,_=f/2,M=m+1,S=g+1;let T=0,E=0;const A=new Kn;for(let o=0;o<S;o++){const a=o*x-w;for(let s=0;s<M;s++){const h=s*y-b;A[t]=h*r,A[e]=a*i,A[n]=_,c.push(A.x,A.y,A.z),A[t]=0,A[e]=0,A[n]=f>0?1:-1,l.push(A.x,A.y,A.z),u.push(s/m),u.push(1-o/g),T+=1}}for(let t=0;t<g;t++)for(let e=0;e<m;e++){const n=h+e+M*t,r=h+e+M*(t+1),i=h+(e+1)+M*(t+1),o=h+(e+1)+M*t;s.push(n,r,o),s.push(r,i,o),E+=6}a.addGroup(d,E,v),d+=E,h+=T}p("z","y","x",-1,-1,n,e,t,o,i,0),p("z","y","x",1,-1,n,e,-t,o,i,1),p("x","z","y",1,1,t,n,e,r,o,2),p("x","z","y",1,-1,t,n,-e,r,o,3),p("x","y","z",1,-1,t,e,n,r,i,4),p("x","y","z",-1,-1,t,e,-n,r,i,5),this.setIndex(s),this.setAttribute("position",new Ni(c,3)),this.setAttribute("normal",new Ni(l,3)),this.setAttribute("uv",new Ni(u,2))}}function go(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function vo(t){const e={};for(let n=0;n<t.length;n++){const r=go(t[n]);for(const t in r)e[t]=r[t]}return e}const yo={clone:go,merge:vo};function xo(t){wi.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}function bo(){Jr.call(this),this.type="Camera",this.matrixWorldInverse=new Tr,this.projectionMatrix=new Tr,this.projectionMatrixInverse=new Tr}function wo(t=50,e=1,n=.1,r=2e3){bo.call(this),this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}xo.prototype=Object.create(wi.prototype),xo.prototype.constructor=xo,xo.prototype.isShaderMaterial=!0,xo.prototype.copy=function(t){return wi.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=go(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this},xo.prototype.toJSON=function(t){const e=wi.prototype.toJSON.call(this,t);e.glslVersion=this.glslVersion,e.uniforms={};for(const n in this.uniforms){const r=this.uniforms[n].value;r&&r.isTexture?e.uniforms[n]={type:"t",value:r.toJSON(t).uuid}:r&&r.isColor?e.uniforms[n]={type:"c",value:r.getHex()}:r&&r.isVector2?e.uniforms[n]={type:"v2",value:r.toArray()}:r&&r.isVector3?e.uniforms[n]={type:"v3",value:r.toArray()}:r&&r.isVector4?e.uniforms[n]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?e.uniforms[n]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?e.uniforms[n]={type:"m4",value:r.toArray()}:e.uniforms[n]={value:r}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;const n={};for(const t in this.extensions)!0===this.extensions[t]&&(n[t]=!0);return Object.keys(n).length>0&&(e.extensions=n),e},bo.prototype=Object.assign(Object.create(Jr.prototype),{constructor:bo,isCamera:!0,copy:function(t,e){return Jr.prototype.copy.call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new Kn),this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()},updateMatrixWorld:function(t){Jr.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()},updateWorldMatrix:function(t,e){Jr.prototype.updateWorldMatrix.call(this,t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()},clone:function(){return(new this.constructor).copy(this)}}),wo.prototype=Object.assign(Object.create(bo.prototype),{constructor:wo,isPerspectiveCamera:!0,copy:function(t,e){return bo.prototype.copy.call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){const e=.5*this.getFilmHeight()/t;this.fov=2*zn.RAD2DEG*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){const t=Math.tan(.5*zn.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*zn.RAD2DEG*Math.atan(Math.tan(.5*zn.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,n,r,i,o){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){const t=this.near;let e=t*Math.tan(.5*zn.DEG2RAD*this.fov)/this.zoom,n=2*e,r=this.aspect*n,i=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const t=o.fullWidth,a=o.fullHeight;i+=o.offsetX*r/t,e-=o.offsetY*n/a,r*=o.width/t,n*=o.height/a}const a=this.filmOffset;0!==a&&(i+=t*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,e,e-n,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()},toJSON:function(t){const e=Jr.prototype.toJSON.call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}});function _o(t,e,n){if(Jr.call(this),this.type="CubeCamera",!0!==n.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=n;const r=new wo(90,1,t,e);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new Kn(1,0,0)),this.add(r);const i=new wo(90,1,t,e);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new Kn(-1,0,0)),this.add(i);const o=new wo(90,1,t,e);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new Kn(0,1,0)),this.add(o);const a=new wo(90,1,t,e);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new Kn(0,-1,0)),this.add(a);const s=new wo(90,1,t,e);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new Kn(0,0,1)),this.add(s);const c=new wo(90,1,t,e);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new Kn(0,0,-1)),this.add(c),this.update=function(t,e){null===this.parent&&this.updateMatrixWorld();const l=t.xr.enabled,u=t.getRenderTarget();t.xr.enabled=!1;const h=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0),t.render(e,r),t.setRenderTarget(n,1),t.render(e,i),t.setRenderTarget(n,2),t.render(e,o),t.setRenderTarget(n,3),t.render(e,a),t.setRenderTarget(n,4),t.render(e,s),n.texture.generateMipmaps=h,t.setRenderTarget(n,5),t.render(e,c),t.setRenderTarget(u),t.xr.enabled=l}}function Mo(t,e,n,r,i,o,a,s,c,l){t=void 0!==t?t:[],e=void 0!==e?e:ot,a=void 0!==a?a:Ft,Wn.call(this,t,e,n,r,i,o,a,s,c,l),this.flipY=!1,this._needsFlipEnvMap=!0}function So(t,e,n){Number.isInteger(e)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),e=n),Yn.call(this,t,t,e),e=e||{},this.texture=new Mo(void 0,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.encoding),this.texture._needsFlipEnvMap=!1}function To(t,e,n,r,i,o,a,s,c,l,u,h){Wn.call(this,null,o,a,s,c,l,r,i,u,h),this.image={data:t||null,width:e||1,height:n||1},this.magFilter=void 0!==c?c:ft,this.minFilter=void 0!==l?l:ft,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}_o.prototype=Object.create(Jr.prototype),_o.prototype.constructor=_o,Mo.prototype=Object.create(Wn.prototype),Mo.prototype.constructor=Mo,Mo.prototype.isCubeTexture=!0,Object.defineProperty(Mo.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}}),So.prototype=Object.create(Yn.prototype),So.prototype.constructor=So,So.prototype.isWebGLCubeRenderTarget=!0,So.prototype.fromEquirectangularTexture=function(t,e){this.texture.type=e.type,this.texture.format=Ut,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t#include <begin_vertex>\n\t\t\t\t#include <project_vertex>\n\n\t\t\t}\n\t\t",fragmentShader:"\n\n\t\t\tuniform sampler2D tEquirect;\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t}\n\t\t"},r=new mo(5,5,5),i=new xo({name:"CubemapFromEquirect",uniforms:go(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:m,blending:x});i.uniforms.tEquirect.value=e;const o=new ho(r,i),a=e.minFilter;e.minFilter===_t&&(e.minFilter=xt);return new _o(1,10,this).update(t,o),e.minFilter=a,o.geometry.dispose(),o.material.dispose(),this},So.prototype.clear=function(t,e,n,r){const i=t.getRenderTarget();for(let i=0;i<6;i++)t.setRenderTarget(this,i),t.clear(e,n,r);t.setRenderTarget(i)},To.prototype=Object.create(Wn.prototype),To.prototype.constructor=To,To.prototype.isDataTexture=!0;const Eo=new gr,Ao=new Kn;class Lo{constructor(t,e,n,r,i,o){this.planes=[void 0!==t?t:new ti,void 0!==e?e:new ti,void 0!==n?n:new ti,void 0!==r?r:new ti,void 0!==i?i:new ti,void 0!==o?o:new ti]}set(t,e,n,r,i,o){const a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this}clone(){return(new this.constructor).copy(this)}copy(t){const e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t){const e=this.planes,n=t.elements,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],c=n[5],l=n[6],u=n[7],h=n[8],d=n[9],p=n[10],f=n[11],m=n[12],g=n[13],v=n[14],y=n[15];return e[0].setComponents(a-r,u-s,f-h,y-m).normalize(),e[1].setComponents(a+r,u+s,f+h,y+m).normalize(),e[2].setComponents(a+i,u+c,f+d,y+g).normalize(),e[3].setComponents(a-i,u-c,f-d,y-g).normalize(),e[4].setComponents(a-o,u-l,f-p,y-v).normalize(),e[5].setComponents(a+o,u+l,f+p,y+v).normalize(),this}intersectsObject(t){const e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),Eo.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(Eo)}intersectsSprite(t){return Eo.center.set(0,0,0),Eo.radius=.7071067811865476,Eo.applyMatrix4(t.matrixWorld),this.intersectsSphere(Eo)}intersectsSphere(t){const e=this.planes,n=t.center,r=-t.radius;for(let t=0;t<6;t++){if(e[t].distanceToPoint(n)<r)return!1}return!0}intersectsBox(t){const e=this.planes;for(let n=0;n<6;n++){const r=e[n];if(Ao.x=r.normal.x>0?t.max.x:t.min.x,Ao.y=r.normal.y>0?t.max.y:t.min.y,Ao.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(Ao)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}}function Ro(){let t=null,e=!1,n=null,r=null;function i(e,o){n(e,o),r=t.requestAnimationFrame(i)}return{start:function(){!0!==e&&null!==n&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(t){n=t},setContext:function(e){t=e}}}function Po(t,e){const n=e.isWebGL2,r=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),r.get(t)},remove:function(e){e.isInterleavedBufferAttribute&&(e=e.data);const n=r.get(e);n&&(t.deleteBuffer(n.buffer),r.delete(e))},update:function(e,i){if(e.isGLBufferAttribute){const t=r.get(e);return void((!t||t.version<e.version)&&r.set(e,{buffer:e.buffer,type:e.type,bytesPerElement:e.elementSize,version:e.version}))}e.isInterleavedBufferAttribute&&(e=e.data);const o=r.get(e);void 0===o?r.set(e,function(e,r){const i=e.array,o=e.usage,a=t.createBuffer();t.bindBuffer(r,a),t.bufferData(r,i,o),e.onUploadCallback();let s=5126;return i instanceof Float32Array?s=5126:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?e.isFloat16BufferAttribute?n?s=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):s=5123:i instanceof Int16Array?s=5122:i instanceof Uint32Array?s=5125:i instanceof Int32Array?s=5124:i instanceof Int8Array?s=5120:i instanceof Uint8Array&&(s=5121),{buffer:a,type:s,bytesPerElement:i.BYTES_PER_ELEMENT,version:e.version}}(e,i)):o.version<e.version&&(!function(e,r,i){const o=r.array,a=r.updateRange;t.bindBuffer(i,e),-1===a.count?t.bufferSubData(i,0,o):(n?t.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o,a.offset,a.count):t.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o.subarray(a.offset,a.offset+a.count)),a.count=-1)}(o.buffer,e,i),o.version=e.version)}}}class Co extends qi{constructor(t=1,e=1,n=1,r=1){super(),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r};const i=t/2,o=e/2,a=Math.floor(n),s=Math.floor(r),c=a+1,l=s+1,u=t/a,h=e/s,d=[],p=[],f=[],m=[];for(let t=0;t<l;t++){const e=t*h-o;for(let n=0;n<c;n++){const r=n*u-i;p.push(r,-e,0),f.push(0,0,1),m.push(n/a),m.push(1-t/s)}}for(let t=0;t<s;t++)for(let e=0;e<a;e++){const n=e+c*t,r=e+c*(t+1),i=e+1+c*(t+1),o=e+1+c*t;d.push(n,r,o),d.push(r,i,o)}this.setIndex(d),this.setAttribute("position",new Ni(p,3)),this.setAttribute("normal",new Ni(f,3)),this.setAttribute("uv",new Ni(m,2))}}const Io={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor.xyz *= color.xyz;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat specularRoughness;\n\tvec3 specularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\t\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\t\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tmat3 tsn = mat3( S, T, N );\n\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmissionmap_fragment:"#ifdef USE_TRANSMISSIONMAP\n\ttotalTransmission *= texture2D( transmissionMap, vUv ).r;\n#endif",transmissionmap_pars_fragment:"#ifdef USE_TRANSMISSIONMAP\n\tuniform sampler2D transmissionMap;\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSMISSION\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSMISSION\n\tuniform float transmission;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <transmissionmap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#ifdef TRANSMISSION\n\t\tfloat totalTransmission = transmission;\n\t#endif\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <transmissionmap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSMISSION\n\t\tdiffuseColor.a *= mix( saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) ), 1.0, metalness );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},Oo={common:{diffuse:{value:new yi(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Hn},uv2Transform:{value:new Hn},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Gn(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new yi(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new yi(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Hn}},sprite:{diffuse:{value:new yi(15658734)},opacity:{value:1},center:{value:new Gn(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Hn}}},No={basic:{uniforms:vo([Oo.common,Oo.specularmap,Oo.envmap,Oo.aomap,Oo.lightmap,Oo.fog]),vertexShader:Io.meshbasic_vert,fragmentShader:Io.meshbasic_frag},lambert:{uniforms:vo([Oo.common,Oo.specularmap,Oo.envmap,Oo.aomap,Oo.lightmap,Oo.emissivemap,Oo.fog,Oo.lights,{emissive:{value:new yi(0)}}]),vertexShader:Io.meshlambert_vert,fragmentShader:Io.meshlambert_frag},phong:{uniforms:vo([Oo.common,Oo.specularmap,Oo.envmap,Oo.aomap,Oo.lightmap,Oo.emissivemap,Oo.bumpmap,Oo.normalmap,Oo.displacementmap,Oo.fog,Oo.lights,{emissive:{value:new yi(0)},specular:{value:new yi(1118481)},shininess:{value:30}}]),vertexShader:Io.meshphong_vert,fragmentShader:Io.meshphong_frag},standard:{uniforms:vo([Oo.common,Oo.envmap,Oo.aomap,Oo.lightmap,Oo.emissivemap,Oo.bumpmap,Oo.normalmap,Oo.displacementmap,Oo.roughnessmap,Oo.metalnessmap,Oo.fog,Oo.lights,{emissive:{value:new yi(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Io.meshphysical_vert,fragmentShader:Io.meshphysical_frag},toon:{uniforms:vo([Oo.common,Oo.aomap,Oo.lightmap,Oo.emissivemap,Oo.bumpmap,Oo.normalmap,Oo.displacementmap,Oo.gradientmap,Oo.fog,Oo.lights,{emissive:{value:new yi(0)}}]),vertexShader:Io.meshtoon_vert,fragmentShader:Io.meshtoon_frag},matcap:{uniforms:vo([Oo.common,Oo.bumpmap,Oo.normalmap,Oo.displacementmap,Oo.fog,{matcap:{value:null}}]),vertexShader:Io.meshmatcap_vert,fragmentShader:Io.meshmatcap_frag},points:{uniforms:vo([Oo.points,Oo.fog]),vertexShader:Io.points_vert,fragmentShader:Io.points_frag},dashed:{uniforms:vo([Oo.common,Oo.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Io.linedashed_vert,fragmentShader:Io.linedashed_frag},depth:{uniforms:vo([Oo.common,Oo.displacementmap]),vertexShader:Io.depth_vert,fragmentShader:Io.depth_frag},normal:{uniforms:vo([Oo.common,Oo.bumpmap,Oo.normalmap,Oo.displacementmap,{opacity:{value:1}}]),vertexShader:Io.normal_vert,fragmentShader:Io.normal_frag},sprite:{uniforms:vo([Oo.sprite,Oo.fog]),vertexShader:Io.sprite_vert,fragmentShader:Io.sprite_frag},background:{uniforms:{uvTransform:{value:new Hn},t2D:{value:null}},vertexShader:Io.background_vert,fragmentShader:Io.background_frag},cube:{uniforms:vo([Oo.envmap,{opacity:{value:1}}]),vertexShader:Io.cube_vert,fragmentShader:Io.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Io.equirect_vert,fragmentShader:Io.equirect_frag},distanceRGBA:{uniforms:vo([Oo.common,Oo.displacementmap,{referencePosition:{value:new Kn},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Io.distanceRGBA_vert,fragmentShader:Io.distanceRGBA_frag},shadow:{uniforms:vo([Oo.lights,Oo.fog,{color:{value:new yi(0)},opacity:{value:1}}]),vertexShader:Io.shadow_vert,fragmentShader:Io.shadow_frag}};function Do(t,e,n,r,i){const o=new yi(0);let a,s,c=0,l=null,u=0,h=null;function d(t,e){n.buffers.color.setClear(t.r,t.g,t.b,e,i)}return{getClearColor:function(){return o},setClearColor:function(t,e=1){o.set(t),c=e,d(o,c)},getClearAlpha:function(){return c},setClearAlpha:function(t){c=t,d(o,c)},render:function(n,i,p,g){let v=!0===i.isScene?i.background:null;v&&v.isTexture&&(v=e.get(v));const y=t.xr,x=y.getSession&&y.getSession();x&&"additive"===x.environmentBlendMode&&(v=null),null===v?d(o,c):v&&v.isColor&&(d(v,1),g=!0),(t.autoClear||g)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),v&&(v.isCubeTexture||v.isWebGLCubeRenderTarget||v.mapping===lt)?(void 0===s&&(s=new ho(new mo(1,1,1),new xo({name:"BackgroundCubeMaterial",uniforms:go(No.cube.uniforms),vertexShader:No.cube.vertexShader,fragmentShader:No.cube.fragmentShader,side:m,depthTest:!1,depthWrite:!1,fog:!1})),s.geometry.deleteAttribute("normal"),s.geometry.deleteAttribute("uv"),s.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(s.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(s)),v.isWebGLCubeRenderTarget&&(v=v.texture),s.material.uniforms.envMap.value=v,s.material.uniforms.flipEnvMap.value=v.isCubeTexture&&v._needsFlipEnvMap?-1:1,l===v&&u===v.version&&h===t.toneMapping||(s.material.needsUpdate=!0,l=v,u=v.version,h=t.toneMapping),n.unshift(s,s.geometry,s.material,0,0,null)):v&&v.isTexture&&(void 0===a&&(a=new ho(new Co(2,2),new xo({name:"BackgroundMaterial",uniforms:go(No.background.uniforms),vertexShader:No.background.vertexShader,fragmentShader:No.background.fragmentShader,side:f,depthTest:!1,depthWrite:!1,fog:!1})),a.geometry.deleteAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(a)),a.material.uniforms.t2D.value=v,!0===v.matrixAutoUpdate&&v.updateMatrix(),a.material.uniforms.uvTransform.value.copy(v.matrix),l===v&&u===v.version&&h===t.toneMapping||(a.material.needsUpdate=!0,l=v,u=v.version,h=t.toneMapping),n.unshift(a,a.geometry,a.material,0,0,null))}}}function Bo(t,e,n,r){const i=t.getParameter(34921),o=r.isWebGL2?null:e.get("OES_vertex_array_object"),a=r.isWebGL2||null!==o,s={},c=d(null);let l=c;function u(e){return r.isWebGL2?t.bindVertexArray(e):o.bindVertexArrayOES(e)}function h(e){return r.isWebGL2?t.deleteVertexArray(e):o.deleteVertexArrayOES(e)}function d(t){const e=[],n=[],r=[];for(let t=0;t<i;t++)e[t]=0,n[t]=0,r[t]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:n,attributeDivisors:r,object:t,attributes:{},index:null}}function p(){const t=l.newAttributes;for(let e=0,n=t.length;e<n;e++)t[e]=0}function f(t){m(t,0)}function m(n,i){const o=l.newAttributes,a=l.enabledAttributes,s=l.attributeDivisors;if(o[n]=1,0===a[n]&&(t.enableVertexAttribArray(n),a[n]=1),s[n]!==i){(r.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),s[n]=i}}function g(){const e=l.newAttributes,n=l.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==e[r]&&(t.disableVertexAttribArray(r),n[r]=0)}function v(e,n,i,o,a,s){!0!==r.isWebGL2||5124!==i&&5125!==i?t.vertexAttribPointer(e,n,i,o,a,s):t.vertexAttribIPointer(e,n,i,a,s)}function y(){x(),l!==c&&(l=c,u(l.object))}function x(){c.geometry=null,c.program=null,c.wireframe=!1}return{setup:function(i,c,h,y,x){let b=!1;if(a){const e=function(e,n,i){const a=!0===i.wireframe;let c=s[e.id];void 0===c&&(c={},s[e.id]=c);let l=c[n.id];void 0===l&&(l={},c[n.id]=l);let u=l[a];void 0===u&&(u=d(r.isWebGL2?t.createVertexArray():o.createVertexArrayOES()),l[a]=u);return u}(y,h,c);l!==e&&(l=e,u(l.object)),b=function(t,e){const n=l.attributes,r=t.attributes;let i=0;for(const t in r){const e=n[t],o=r[t];if(void 0===e)return!0;if(e.attribute!==o)return!0;if(e.data!==o.data)return!0;i++}return l.attributesNum!==i||l.index!==e}(y,x),b&&function(t,e){const n={},r=t.attributes;let i=0;for(const t in r){const e=r[t],o={};o.attribute=e,e.data&&(o.data=e.data),n[t]=o,i++}l.attributes=n,l.attributesNum=i,l.index=e}(y,x)}else{const t=!0===c.wireframe;l.geometry===y.id&&l.program===h.id&&l.wireframe===t||(l.geometry=y.id,l.program=h.id,l.wireframe=t,b=!0)}!0===i.isInstancedMesh&&(b=!0),null!==x&&n.update(x,34963),b&&(!function(i,o,a,s){if(!1===r.isWebGL2&&(i.isInstancedMesh||s.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;p();const c=s.attributes,l=a.getAttributes(),u=o.defaultAttributeValues;for(const e in l){const r=l[e];if(r>=0){const o=c[e];if(void 0!==o){const e=o.normalized,i=o.itemSize,a=n.get(o);if(void 0===a)continue;const c=a.buffer,l=a.type,u=a.bytesPerElement;if(o.isInterleavedBufferAttribute){const n=o.data,a=n.stride,h=o.offset;n&&n.isInstancedInterleavedBuffer?(m(r,n.meshPerAttribute),void 0===s._maxInstanceCount&&(s._maxInstanceCount=n.meshPerAttribute*n.count)):f(r),t.bindBuffer(34962,c),v(r,i,l,e,a*u,h*u)}else o.isInstancedBufferAttribute?(m(r,o.meshPerAttribute),void 0===s._maxInstanceCount&&(s._maxInstanceCount=o.meshPerAttribute*o.count)):f(r),t.bindBuffer(34962,c),v(r,i,l,e,0,0)}else if("instanceMatrix"===e){const e=n.get(i.instanceMatrix);if(void 0===e)continue;const o=e.buffer,a=e.type;m(r+0,1),m(r+1,1),m(r+2,1),m(r+3,1),t.bindBuffer(34962,o),t.vertexAttribPointer(r+0,4,a,!1,64,0),t.vertexAttribPointer(r+1,4,a,!1,64,16),t.vertexAttribPointer(r+2,4,a,!1,64,32),t.vertexAttribPointer(r+3,4,a,!1,64,48)}else if("instanceColor"===e){const e=n.get(i.instanceColor);if(void 0===e)continue;const o=e.buffer,a=e.type;m(r,1),t.bindBuffer(34962,o),t.vertexAttribPointer(r,3,a,!1,12,0)}else if(void 0!==u){const n=u[e];if(void 0!==n)switch(n.length){case 2:t.vertexAttrib2fv(r,n);break;case 3:t.vertexAttrib3fv(r,n);break;case 4:t.vertexAttrib4fv(r,n);break;default:t.vertexAttrib1fv(r,n)}}}}g()}(i,c,h,y),null!==x&&t.bindBuffer(34963,n.get(x).buffer))},reset:y,resetDefaultState:x,dispose:function(){y();for(const t in s){const e=s[t];for(const t in e){const n=e[t];for(const t in n)h(n[t].object),delete n[t];delete e[t]}delete s[t]}},releaseStatesOfGeometry:function(t){if(void 0===s[t.id])return;const e=s[t.id];for(const t in e){const n=e[t];for(const t in n)h(n[t].object),delete n[t];delete e[t]}delete s[t.id]},releaseStatesOfProgram:function(t){for(const e in s){const n=s[e];if(void 0===n[t.id])continue;const r=n[t.id];for(const t in r)h(r[t].object),delete r[t];delete n[t.id]}},initAttributes:p,enableAttribute:f,disableUnusedAttributes:g}}function Fo(t,e,n,r){const i=r.isWebGL2;let o;this.setMode=function(t){o=t},this.render=function(e,r){t.drawArrays(o,e,r),n.update(r,o,1)},this.renderInstances=function(r,a,s){if(0===s)return;let c,l;if(i)c=t,l="drawArraysInstanced";else if(c=e.get("ANGLE_instanced_arrays"),l="drawArraysInstancedANGLE",null===c)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[l](o,r,a,s),n.update(a,o,s)}}function Uo(t,e,n){let r;function i(e){if("highp"===e){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&t instanceof WebGL2ComputeRenderingContext;let a=void 0!==n.precision?n.precision:"highp";const s=i(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);const c=!0===n.logarithmicDepthBuffer,l=t.getParameter(34930),u=t.getParameter(35660),h=t.getParameter(3379),d=t.getParameter(34076),p=t.getParameter(34921),f=t.getParameter(36347),m=t.getParameter(36348),g=t.getParameter(36349),v=u>0,y=o||!!e.get("OES_texture_float");return{isWebGL2:o,getMaxAnisotropy:function(){if(void 0!==r)return r;const n=e.get("EXT_texture_filter_anisotropic");return r=null!==n?t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0,r},getMaxPrecision:i,precision:a,logarithmicDepthBuffer:c,maxTextures:l,maxVertexTextures:u,maxTextureSize:h,maxCubemapSize:d,maxAttributes:p,maxVertexUniforms:f,maxVaryings:m,maxFragmentUniforms:g,vertexTextures:v,floatFragmentTextures:y,floatVertexTextures:v&&y,maxSamples:o?t.getParameter(36183):0}}function zo(t){const e=this;let n=null,r=0,i=!1,o=!1;const a=new ti,s=new Hn,c={value:null,needsUpdate:!1};function l(){c.value!==n&&(c.value=n,c.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function u(t,n,r,i){const o=null!==t?t.length:0;let l=null;if(0!==o){if(l=c.value,!0!==i||null===l){const e=r+4*o,i=n.matrixWorldInverse;s.getNormalMatrix(i),(null===l||l.length<e)&&(l=new Float32Array(e));for(let e=0,n=r;e!==o;++e,n+=4)a.copy(t[e]).applyMatrix4(i,s),a.normal.toArray(l,n),l[n+3]=a.constant}c.value=l,c.needsUpdate=!0}return e.numPlanes=o,e.numIntersection=0,l}this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(t,e,o){const a=0!==t.length||e||0!==r||i;return i=e,n=u(t,o,0),r=t.length,a},this.beginShadows=function(){o=!0,u(null)},this.endShadows=function(){o=!1,l()},this.setState=function(e,a,s){const h=e.clippingPlanes,d=e.clipIntersection,p=e.clipShadows,f=t.get(e);if(!i||null===h||0===h.length||o&&!p)o?u(null):l();else{const t=o?0:r,e=4*t;let i=f.clippingState||null;c.value=i,i=u(h,a,e,s);for(let t=0;t!==e;++t)i[t]=n[t];f.clippingState=i,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=t}}}function Go(t){let e=new WeakMap;function n(t,e){return e===st?t.mapping=ot:e===ct&&(t.mapping=at),t}function r(t){const n=t.target;n.removeEventListener("dispose",r);const i=e.get(n);void 0!==i&&(e.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){const o=i.mapping;if(o===st||o===ct){if(e.has(i)){return n(e.get(i).texture,i.mapping)}{const o=i.image;if(o&&o.height>0){const a=t.getRenderList(),s=t.getRenderTarget(),c=t.getRenderState(),l=new So(o.height/2);return l.fromEquirectangularTexture(t,i),e.set(i,l),t.setRenderTarget(s),t.setRenderList(a),t.setRenderState(c),i.addEventListener("dispose",r),n(l.texture,i.mapping)}return null}}}return i},dispose:function(){e=new WeakMap}}}function Ho(t){const e={};return{has:function(n){if(void 0!==e[n])return null!==e[n];let r;switch(n){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=t.getExtension(n)}return e[n]=r,null!==r},get:function(t){return this.has(t)||console.warn("THREE.WebGLRenderer: "+t+" extension not supported."),e[t]}}}function ko(t,e,n,r){const i=new WeakMap,o=new WeakMap;function a(t){const s=t.target,c=i.get(s);null!==c.index&&e.remove(c.index);for(const t in c.attributes)e.remove(c.attributes[t]);s.removeEventListener("dispose",a),i.delete(s);const l=o.get(c);l&&(e.remove(l),o.delete(c)),r.releaseStatesOfGeometry(c),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(t){const n=[],r=t.index,i=t.attributes.position;let a=0;if(null!==r){const t=r.array;a=r.version;for(let e=0,r=t.length;e<r;e+=3){const r=t[e+0],i=t[e+1],o=t[e+2];n.push(r,i,i,o,o,r)}}else{const t=i.array;a=i.version;for(let e=0,r=t.length/3-1;e<r;e+=3){const t=e+0,r=e+1,i=e+2;n.push(t,r,r,i,i,t)}}const s=new(Fi(n)>65535?Ii:Pi)(n,1);s.version=a;const c=o.get(t);c&&e.remove(c),o.set(t,s)}return{get:function(t,e){let r=i.get(e);return r||(e.addEventListener("dispose",a),e.isBufferGeometry?r=e:e.isGeometry&&(void 0===e._bufferGeometry&&(e._bufferGeometry=(new qi).setFromObject(t)),r=e._bufferGeometry),i.set(e,r),n.memory.geometries++,r)},update:function(t){const n=t.attributes;for(const t in n)e.update(n[t],34962);const r=t.morphAttributes;for(const t in r){const n=r[t];for(let t=0,r=n.length;t<r;t++)e.update(n[t],34962)}},getWireframeAttribute:function(t){const e=o.get(t);if(e){const n=t.index;null!==n&&e.version<n.version&&s(t)}else s(t);return o.get(t)}}}function Vo(t,e,n,r){const i=r.isWebGL2;let o,a,s;this.setMode=function(t){o=t},this.setIndex=function(t){a=t.type,s=t.bytesPerElement},this.render=function(e,r){t.drawElements(o,r,a,e*s),n.update(r,o,1)},this.renderInstances=function(r,c,l){if(0===l)return;let u,h;if(i)u=t,h="drawElementsInstanced";else if(u=e.get("ANGLE_instanced_arrays"),h="drawElementsInstancedANGLE",null===u)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[h](o,c,a,r*s,l),n.update(c,o,l)}}function jo(t){const e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(t,n,r){switch(e.calls++,n){case 4:e.triangles+=r*(t/3);break;case 1:e.lines+=r*(t/2);break;case 3:e.lines+=r*(t-1);break;case 2:e.lines+=r*t;break;case 0:e.points+=r*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function Wo(t,e){return t[0]-e[0]}function Xo(t,e){return Math.abs(e[1])-Math.abs(t[1])}function qo(t){const e={},n=new Float32Array(8),r=[];for(let t=0;t<8;t++)r[t]=[t,0];return{update:function(i,o,a,s){const c=i.morphTargetInfluences,l=void 0===c?0:c.length;let u=e[o.id];if(void 0===u){u=[];for(let t=0;t<l;t++)u[t]=[t,0];e[o.id]=u}for(let t=0;t<l;t++){const e=u[t];e[0]=t,e[1]=c[t]}u.sort(Xo);for(let t=0;t<8;t++)t<l&&u[t][1]?(r[t][0]=u[t][0],r[t][1]=u[t][1]):(r[t][0]=Number.MAX_SAFE_INTEGER,r[t][1]=0);r.sort(Wo);const h=a.morphTargets&&o.morphAttributes.position,d=a.morphNormals&&o.morphAttributes.normal;let p=0;for(let t=0;t<8;t++){const e=r[t],i=e[0],a=e[1];i!==Number.MAX_SAFE_INTEGER&&a?(h&&o.getAttribute("morphTarget"+t)!==h[i]&&o.setAttribute("morphTarget"+t,h[i]),d&&o.getAttribute("morphNormal"+t)!==d[i]&&o.setAttribute("morphNormal"+t,d[i]),n[t]=a,p+=a):(h&&!0===o.hasAttribute("morphTarget"+t)&&o.deleteAttribute("morphTarget"+t),d&&!0===o.hasAttribute("morphNormal"+t)&&o.deleteAttribute("morphNormal"+t),n[t]=0)}const f=o.morphTargetsRelative?1:1-p;s.getUniforms().setValue(t,"morphTargetBaseInfluence",f),s.getUniforms().setValue(t,"morphTargetInfluences",n)}}}function Yo(t,e,n,r){let i=new WeakMap;return{update:function(t){const o=r.render.frame,a=t.geometry,s=e.get(t,a);return i.get(s)!==o&&(a.isGeometry&&s.updateFromObject(t),e.update(s),i.set(s,o)),t.isInstancedMesh&&(n.update(t.instanceMatrix,34962),null!==t.instanceColor&&n.update(t.instanceColor,34962)),s},dispose:function(){i=new WeakMap}}}function Zo(t=null,e=1,n=1,r=1){Wn.call(this,null),this.image={data:t,width:e,height:n,depth:r},this.magFilter=ft,this.minFilter=ft,this.wrapR=dt,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}function Jo(t=null,e=1,n=1,r=1){Wn.call(this,null),this.image={data:t,width:e,height:n,depth:r},this.magFilter=ft,this.minFilter=ft,this.wrapR=dt,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}No.physical={uniforms:vo([No.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Gn(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new yi(0)},transmission:{value:0},transmissionMap:{value:null}}]),vertexShader:Io.meshphysical_vert,fragmentShader:Io.meshphysical_frag},Zo.prototype=Object.create(Wn.prototype),Zo.prototype.constructor=Zo,Zo.prototype.isDataTexture2DArray=!0,Jo.prototype=Object.create(Wn.prototype),Jo.prototype.constructor=Jo,Jo.prototype.isDataTexture3D=!0;const Ko=new Wn,Qo=new Zo,$o=new Jo,ta=new Mo,ea=[],na=[],ra=new Float32Array(16),ia=new Float32Array(9),oa=new Float32Array(4);function aa(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let o=ea[i];if(void 0===o&&(o=new Float32Array(i),ea[i]=o),0!==e){r.toArray(o,0);for(let r=1,i=0;r!==e;++r)i+=n,t[r].toArray(o,i)}return o}function sa(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function ca(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function la(t,e){let n=na[e];void 0===n&&(n=new Int32Array(e),na[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function ua(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function ha(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(sa(n,e))return;t.uniform2fv(this.addr,e),ca(n,e)}}function da(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(sa(n,e))return;t.uniform3fv(this.addr,e),ca(n,e)}}function pa(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(sa(n,e))return;t.uniform4fv(this.addr,e),ca(n,e)}}function fa(t,e){const n=this.cache,r=e.elements;if(void 0===r){if(sa(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),ca(n,e)}else{if(sa(n,r))return;oa.set(r),t.uniformMatrix2fv(this.addr,!1,oa),ca(n,r)}}function ma(t,e){const n=this.cache,r=e.elements;if(void 0===r){if(sa(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),ca(n,e)}else{if(sa(n,r))return;ia.set(r),t.uniformMatrix3fv(this.addr,!1,ia),ca(n,r)}}function ga(t,e){const n=this.cache,r=e.elements;if(void 0===r){if(sa(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),ca(n,e)}else{if(sa(n,r))return;ra.set(r),t.uniformMatrix4fv(this.addr,!1,ra),ca(n,r)}}function va(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.safeSetTexture2D(e||Ko,i)}function ya(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||Qo,i)}function xa(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||$o,i)}function ba(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.safeSetTextureCube(e||ta,i)}function wa(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function _a(t,e){const n=this.cache;sa(n,e)||(t.uniform2iv(this.addr,e),ca(n,e))}function Ma(t,e){const n=this.cache;sa(n,e)||(t.uniform3iv(this.addr,e),ca(n,e))}function Sa(t,e){const n=this.cache;sa(n,e)||(t.uniform4iv(this.addr,e),ca(n,e))}function Ta(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function Ea(t,e){t.uniform1fv(this.addr,e)}function Aa(t,e){t.uniform1iv(this.addr,e)}function La(t,e){t.uniform2iv(this.addr,e)}function Ra(t,e){t.uniform3iv(this.addr,e)}function Pa(t,e){t.uniform4iv(this.addr,e)}function Ca(t,e){const n=aa(e,this.size,2);t.uniform2fv(this.addr,n)}function Ia(t,e){const n=aa(e,this.size,3);t.uniform3fv(this.addr,n)}function Oa(t,e){const n=aa(e,this.size,4);t.uniform4fv(this.addr,n)}function Na(t,e){const n=aa(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function Da(t,e){const n=aa(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function Ba(t,e){const n=aa(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function Fa(t,e,n){const r=e.length,i=la(n,r);t.uniform1iv(this.addr,i);for(let t=0;t!==r;++t)n.safeSetTexture2D(e[t]||Ko,i[t])}function Ua(t,e,n){const r=e.length,i=la(n,r);t.uniform1iv(this.addr,i);for(let t=0;t!==r;++t)n.safeSetTextureCube(e[t]||ta,i[t])}function za(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=function(t){switch(t){case 5126:return ua;case 35664:return ha;case 35665:return da;case 35666:return pa;case 35674:return fa;case 35675:return ma;case 35676:return ga;case 5124:case 35670:return wa;case 35667:case 35671:return _a;case 35668:case 35672:return Ma;case 35669:case 35673:return Sa;case 5125:return Ta;case 35678:case 36198:case 36298:case 36306:case 35682:return va;case 35679:case 36299:case 36307:return xa;case 35680:case 36300:case 36308:case 36293:return ba;case 36289:case 36303:case 36311:case 36292:return ya}}(e.type)}function Ga(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=function(t){switch(t){case 5126:return Ea;case 35664:return Ca;case 35665:return Ia;case 35666:return Oa;case 35674:return Na;case 35675:return Da;case 35676:return Ba;case 5124:case 35670:return Aa;case 35667:case 35671:return La;case 35668:case 35672:return Ra;case 35669:case 35673:return Pa;case 35678:case 36198:case 36298:case 36306:case 35682:return Fa;case 35680:case 36300:case 36308:case 36293:return Ua}}(e.type)}function Ha(t){this.id=t,this.seq=[],this.map={}}Ga.prototype.updateCache=function(t){const e=this.cache;t instanceof Float32Array&&e.length!==t.length&&(this.cache=new Float32Array(t.length)),ca(e,t)},Ha.prototype.setValue=function(t,e,n){const r=this.seq;for(let i=0,o=r.length;i!==o;++i){const o=r[i];o.setValue(t,e[o.id],n)}};const ka=/([\w\d_]+)(\])?(\[|\.)?/g;function Va(t,e){t.seq.push(e),t.map[e.id]=e}function ja(t,e,n){const r=t.name,i=r.length;for(ka.lastIndex=0;;){const o=ka.exec(r),a=ka.lastIndex;let s=o[1];const c="]"===o[2],l=o[3];if(c&&(s|=0),void 0===l||"["===l&&a+2===i){Va(n,void 0===l?new za(s,t,e):new Ga(s,t,e));break}{let t=n.map[s];void 0===t&&(t=new Ha(s),Va(n,t)),n=t}}}function Wa(t,e){this.seq=[],this.map={};const n=t.getProgramParameter(e,35718);for(let r=0;r<n;++r){const n=t.getActiveUniform(e,r);ja(n,t.getUniformLocation(e,n.name),this)}}function Xa(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}Wa.prototype.setValue=function(t,e,n,r){const i=this.map[e];void 0!==i&&i.setValue(t,n,r)},Wa.prototype.setOptional=function(t,e,n){const r=e[n];void 0!==r&&this.setValue(t,n,r)},Wa.upload=function(t,e,n,r){for(let i=0,o=e.length;i!==o;++i){const o=e[i],a=n[o.id];!1!==a.needsUpdate&&o.setValue(t,a.value,r)}},Wa.seqWithValue=function(t,e){const n=[];for(let r=0,i=t.length;r!==i;++r){const i=t[r];i.id in e&&n.push(i)}return n};let qa=0;function Ya(t){switch(t){case Je:return["Linear","( value )"];case Ke:return["sRGB","( value )"];case $e:return["RGBE","( value )"];case en:return["RGBM","( value, 7.0 )"];case nn:return["RGBM","( value, 16.0 )"];case rn:return["RGBD","( value, 256.0 )"];case Qe:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case tn:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",t),["Linear","( value )"]}}function Za(t,e,n){const r=t.getShaderParameter(e,35713),i=t.getShaderInfoLog(e).trim();if(r&&""===i)return"";return"THREE.WebGLShader: gl.getShaderInfoLog() "+n+"\n"+i+function(t){const e=t.split("\n");for(let t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return e.join("\n")}(t.getShaderSource(e))}function Ja(t,e){const n=Ya(e);return"vec4 "+t+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function Ka(t,e){const n=Ya(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Qa(t,e){let n;switch(e){case $:n="Linear";break;case tt:n="Reinhard";break;case et:n="OptimizedCineon";break;case nt:n="ACESFilmic";break;case rt:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function $a(t){return""!==t}function ts(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function es(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const ns=/^[ \t]*#include +<([\w\d./]+)>/gm;function rs(t){return t.replace(ns,is)}function is(t,e){const n=Io[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return rs(n)}const os=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,as=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function ss(t){return t.replace(as,ls).replace(os,cs)}function cs(t,e,n,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),ls(t,e,n,r)}function ls(t,e,n,r){let i="";for(let t=parseInt(e);t<parseInt(n);t++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+t+" ]").replace(/UNROLLED_LOOP_INDEX/g,t);return i}function us(t){let e="precision "+t.precision+" float;\nprecision "+t.precision+" int;";return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function hs(t,e,n,r){const i=t.getContext(),o=n.defines;let a=n.vertexShader,s=n.fragmentShader;const c=function(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===h?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===d?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===p&&(e="SHADOWMAP_TYPE_VSM"),e}(n),l=function(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case ot:case at:e="ENVMAP_TYPE_CUBE";break;case lt:case ut:e="ENVMAP_TYPE_CUBE_UV"}return e}(n),u=function(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case at:case ut:e="ENVMAP_MODE_REFRACTION"}return e}(n),f=function(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case Z:e="ENVMAP_BLENDING_MULTIPLY";break;case J:e="ENVMAP_BLENDING_MIX";break;case K:e="ENVMAP_BLENDING_ADD"}return e}(n),m=t.gammaFactor>0?t.gammaFactor:1,g=n.isWebGL2?"":function(t){return[t.extensionDerivatives||t.envMapCubeUV||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||"physical"===t.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter($a).join("\n")}(n),v=function(t){const e=[];for(const n in t){const r=t[n];!1!==r&&e.push("#define "+n+" "+r)}return e.join("\n")}(o),y=i.createProgram();let x,b,w=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(x=[v].filter($a).join("\n"),x.length>0&&(x+="\n"),b=[g,v].filter($a).join("\n"),b.length>0&&(b+="\n")):(x=[us(n),"#define SHADER_NAME "+n.shaderName,v,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+m,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter($a).join("\n"),b=[g,us(n),"#define SHADER_NAME "+n.shaderName,v,n.alphaTest?"#define ALPHATEST "+n.alphaTest+(n.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+m,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+l:"",n.envMap?"#define "+u:"",n.envMap?"#define "+f:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.sheen?"#define USE_SHEEN":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Q?"#define TONE_MAPPING":"",n.toneMapping!==Q?Io.tonemapping_pars_fragment:"",n.toneMapping!==Q?Qa("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",Io.encodings_pars_fragment,n.map?Ja("mapTexelToLinear",n.mapEncoding):"",n.matcap?Ja("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?Ja("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?Ja("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.lightMap?Ja("lightMapTexelToLinear",n.lightMapEncoding):"",Ka("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter($a).join("\n")),a=rs(a),a=ts(a,n),a=es(a,n),s=rs(s),s=ts(s,n),s=es(s,n),a=ss(a),s=ss(s),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(w="#version 300 es\n",x=["#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+x,b=["#define varying in",n.glslVersion===Dn?"":"out highp vec4 pc_fragColor;",n.glslVersion===Dn?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+b);const _=w+b+s,M=Xa(i,35633,w+x+a),S=Xa(i,35632,_);if(i.attachShader(y,M),i.attachShader(y,S),void 0!==n.index0AttributeName?i.bindAttribLocation(y,0,n.index0AttributeName):!0===n.morphTargets&&i.bindAttribLocation(y,0,"position"),i.linkProgram(y),t.debug.checkShaderErrors){const t=i.getProgramInfoLog(y).trim(),e=i.getShaderInfoLog(M).trim(),n=i.getShaderInfoLog(S).trim();let r=!0,o=!0;if(!1===i.getProgramParameter(y,35714)){r=!1;const e=Za(i,M,"vertex"),n=Za(i,S,"fragment");console.error("THREE.WebGLProgram: shader error: ",i.getError(),"35715",i.getProgramParameter(y,35715),"gl.getProgramInfoLog",t,e,n)}else""!==t?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",t):""!==e&&""!==n||(o=!1);o&&(this.diagnostics={runnable:r,programLog:t,vertexShader:{log:e,prefix:x},fragmentShader:{log:n,prefix:b}})}let T,E;return i.deleteShader(M),i.deleteShader(S),this.getUniforms=function(){return void 0===T&&(T=new Wa(i,y)),T},this.getAttributes=function(){return void 0===E&&(E=function(t,e){const n={},r=t.getProgramParameter(e,35721);for(let i=0;i<r;i++){const r=t.getActiveAttrib(e,i).name;n[r]=t.getAttribLocation(e,r)}return n}(i,y)),E},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(y),this.program=void 0},this.name=n.shaderName,this.id=qa++,this.cacheKey=e,this.usedTimes=1,this.program=y,this.vertexShader=M,this.fragmentShader=S,this}function ds(t,e,n,r,i,o){const a=[],s=r.isWebGL2,c=r.logarithmicDepthBuffer,l=r.floatVertexTextures,u=r.maxVertexUniforms,h=r.vertexTextures;let d=r.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},f=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmissionMap"];function v(t){let e;return t?t.isTexture?e=t.encoding:t.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),e=t.texture.encoding):e=Je,e}return{getParameters:function(i,a,f,y,x){const b=y.fog,w=i.isMeshStandardMaterial?y.environment:null,_=e.get(i.envMap||w),M=p[i.type],S=x.isSkinnedMesh?function(t){const e=t.skeleton.bones;if(l)return 1024;{const t=u,n=Math.floor((t-20)/4),r=Math.min(n,e.length);return r<e.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+e.length+" bones. This GPU supports "+r+"."),0):r}}(x):0;let T,E;if(null!==i.precision&&(d=r.getMaxPrecision(i.precision),d!==i.precision&&console.warn("THREE.WebGLProgram.getParameters:",i.precision,"not supported, using",d,"instead.")),M){const t=No[M];T=t.vertexShader,E=t.fragmentShader}else T=i.vertexShader,E=i.fragmentShader;const A=t.getRenderTarget();return{isWebGL2:s,shaderID:M,shaderName:i.type,vertexShader:T,fragmentShader:E,defines:i.defines,isRawShaderMaterial:!0===i.isRawShaderMaterial,glslVersion:i.glslVersion,precision:d,instancing:!0===x.isInstancedMesh,instancingColor:!0===x.isInstancedMesh&&null!==x.instanceColor,supportsVertexTextures:h,outputEncoding:null!==A?v(A.texture):t.outputEncoding,map:!!i.map,mapEncoding:v(i.map),matcap:!!i.matcap,matcapEncoding:v(i.matcap),envMap:!!_,envMapMode:_&&_.mapping,envMapEncoding:v(_),envMapCubeUV:!!_&&(_.mapping===lt||_.mapping===ut),lightMap:!!i.lightMap,lightMapEncoding:v(i.lightMap),aoMap:!!i.aoMap,emissiveMap:!!i.emissiveMap,emissiveMapEncoding:v(i.emissiveMap),bumpMap:!!i.bumpMap,normalMap:!!i.normalMap,objectSpaceNormalMap:i.normalMapType===cn,tangentSpaceNormalMap:i.normalMapType===sn,clearcoatMap:!!i.clearcoatMap,clearcoatRoughnessMap:!!i.clearcoatRoughnessMap,clearcoatNormalMap:!!i.clearcoatNormalMap,displacementMap:!!i.displacementMap,roughnessMap:!!i.roughnessMap,metalnessMap:!!i.metalnessMap,specularMap:!!i.specularMap,alphaMap:!!i.alphaMap,gradientMap:!!i.gradientMap,sheen:!!i.sheen,transmissionMap:!!i.transmissionMap,combine:i.combine,vertexTangents:i.normalMap&&i.vertexTangents,vertexColors:i.vertexColors,vertexUvs:!!(i.map||i.bumpMap||i.normalMap||i.specularMap||i.alphaMap||i.emissiveMap||i.roughnessMap||i.metalnessMap||i.clearcoatMap||i.clearcoatRoughnessMap||i.clearcoatNormalMap||i.displacementMap||i.transmissionMap),uvsVertexOnly:!(i.map||i.bumpMap||i.normalMap||i.specularMap||i.alphaMap||i.emissiveMap||i.roughnessMap||i.metalnessMap||i.clearcoatNormalMap||i.transmissionMap||!i.displacementMap),fog:!!b,useFog:i.fog,fogExp2:b&&b.isFogExp2,flatShading:i.flatShading,sizeAttenuation:i.sizeAttenuation,logarithmicDepthBuffer:c,skinning:i.skinning&&S>0,maxBones:S,useVertexTexture:l,morphTargets:i.morphTargets,morphNormals:i.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:a.directional.length,numPointLights:a.point.length,numSpotLights:a.spot.length,numRectAreaLights:a.rectArea.length,numHemiLights:a.hemi.length,numDirLightShadows:a.directionalShadowMap.length,numPointLightShadows:a.pointShadowMap.length,numSpotLightShadows:a.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:i.dithering,shadowMapEnabled:t.shadowMap.enabled&&f.length>0,shadowMapType:t.shadowMap.type,toneMapping:i.toneMapped?t.toneMapping:Q,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:i.premultipliedAlpha,alphaTest:i.alphaTest,doubleSided:i.side===g,flipSided:i.side===m,depthPacking:void 0!==i.depthPacking&&i.depthPacking,index0AttributeName:i.index0AttributeName,extensionDerivatives:i.extensions&&i.extensions.derivatives,extensionFragDepth:i.extensions&&i.extensions.fragDepth,extensionDrawBuffers:i.extensions&&i.extensions.drawBuffers,extensionShaderTextureLOD:i.extensions&&i.extensions.shaderTextureLOD,rendererExtensionFragDepth:s||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:s||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:s||n.has("EXT_shader_texture_lod"),customProgramCacheKey:i.customProgramCacheKey()}},getProgramCacheKey:function(e){const n=[];if(e.shaderID?n.push(e.shaderID):(n.push(e.fragmentShader),n.push(e.vertexShader)),void 0!==e.defines)for(const t in e.defines)n.push(t),n.push(e.defines[t]);if(!1===e.isRawShaderMaterial){for(let t=0;t<f.length;t++)n.push(e[f[t]]);n.push(t.outputEncoding),n.push(t.gammaFactor)}return n.push(e.customProgramCacheKey),n.join()},getUniforms:function(t){const e=p[t.type];let n;if(e){const t=No[e];n=yo.clone(t.uniforms)}else n=t.uniforms;return n},acquireProgram:function(e,n){let r;for(let t=0,e=a.length;t<e;t++){const e=a[t];if(e.cacheKey===n){r=e,++r.usedTimes;break}}return void 0===r&&(r=new hs(t,n,e,i),a.push(r)),r},releaseProgram:function(t){if(0==--t.usedTimes){const e=a.indexOf(t);a[e]=a[a.length-1],a.pop(),t.destroy()}},programs:a}}function ps(){let t=new WeakMap;return{get:function(e){let n=t.get(e);return void 0===n&&(n={},t.set(e,n)),n},remove:function(e){t.delete(e)},update:function(e,n,r){t.get(e)[n]=r},dispose:function(){t=new WeakMap}}}function fs(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function ms(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function gs(t){const e=[];let n=0;const r=[],i=[],o={id:-1};function a(r,i,a,s,c,l){let u=e[n];const h=t.get(a);return void 0===u?(u={id:r.id,object:r,geometry:i,material:a,program:h.program||o,groupOrder:s,renderOrder:r.renderOrder,z:c,group:l},e[n]=u):(u.id=r.id,u.object=r,u.geometry=i,u.material=a,u.program=h.program||o,u.groupOrder=s,u.renderOrder=r.renderOrder,u.z=c,u.group=l),n++,u}return{opaque:r,transparent:i,init:function(){n=0,r.length=0,i.length=0},push:function(t,e,n,o,s,c){const l=a(t,e,n,o,s,c);(!0===n.transparent?i:r).push(l)},unshift:function(t,e,n,o,s,c){const l=a(t,e,n,o,s,c);(!0===n.transparent?i:r).unshift(l)},finish:function(){for(let t=n,r=e.length;t<r;t++){const n=e[t];if(null===n.id)break;n.id=null,n.object=null,n.geometry=null,n.material=null,n.program=null,n.group=null}},sort:function(t,e){r.length>1&&r.sort(t||fs),i.length>1&&i.sort(e||ms)}}}function vs(t){let e=new WeakMap;return{get:function(n,r){const i=e.get(n);let o;return void 0===i?(o=new gs(t),e.set(n,new WeakMap),e.get(n).set(r,o)):(o=i.get(r),void 0===o&&(o=new gs(t),i.set(r,o))),o},dispose:function(){e=new WeakMap}}}function ys(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new Kn,color:new yi};break;case"SpotLight":n={position:new Kn,direction:new Kn,color:new yi,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Kn,color:new yi,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Kn,skyColor:new yi,groundColor:new yi};break;case"RectAreaLight":n={color:new yi,position:new Kn,halfWidth:new Kn,halfHeight:new Kn}}return t[e.id]=n,n}}}let xs=0;function bs(t,e){return(e.castShadow?1:0)-(t.castShadow?1:0)}function ws(t,e){const n=new ys,r=function(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Gn};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Gn,shadowCameraNear:1,shadowCameraFar:1e3}}return t[e.id]=n,n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let t=0;t<9;t++)i.probe.push(new Kn);const o=new Kn,a=new Tr,s=new Tr;return{setup:function(c,l,u){let h=0,d=0,p=0;for(let t=0;t<9;t++)i.probe[t].set(0,0,0);let f=0,m=0,g=0,v=0,y=0,x=0,b=0,w=0;const _=u.matrixWorldInverse;c.sort(bs);for(let t=0,e=c.length;t<e;t++){const e=c[t],l=e.color,u=e.intensity,M=e.distance,S=e.shadow&&e.shadow.map?e.shadow.map.texture:null;if(e.isAmbientLight)h+=l.r*u,d+=l.g*u,p+=l.b*u;else if(e.isLightProbe)for(let t=0;t<9;t++)i.probe[t].addScaledVector(e.sh.coefficients[t],u);else if(e.isDirectionalLight){const t=n.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity),t.direction.setFromMatrixPosition(e.matrixWorld),o.setFromMatrixPosition(e.target.matrixWorld),t.direction.sub(o),t.direction.transformDirection(_),e.castShadow){const t=e.shadow,n=r.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,i.directionalShadow[f]=n,i.directionalShadowMap[f]=S,i.directionalShadowMatrix[f]=e.shadow.matrix,x++}i.directional[f]=t,f++}else if(e.isSpotLight){const t=n.get(e);if(t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(_),t.color.copy(l).multiplyScalar(u),t.distance=M,t.direction.setFromMatrixPosition(e.matrixWorld),o.setFromMatrixPosition(e.target.matrixWorld),t.direction.sub(o),t.direction.transformDirection(_),t.coneCos=Math.cos(e.angle),t.penumbraCos=Math.cos(e.angle*(1-e.penumbra)),t.decay=e.decay,e.castShadow){const t=e.shadow,n=r.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,i.spotShadow[g]=n,i.spotShadowMap[g]=S,i.spotShadowMatrix[g]=e.shadow.matrix,w++}i.spot[g]=t,g++}else if(e.isRectAreaLight){const t=n.get(e);t.color.copy(l).multiplyScalar(u),t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(_),s.identity(),a.copy(e.matrixWorld),a.premultiply(_),s.extractRotation(a),t.halfWidth.set(.5*e.width,0,0),t.halfHeight.set(0,.5*e.height,0),t.halfWidth.applyMatrix4(s),t.halfHeight.applyMatrix4(s),i.rectArea[v]=t,v++}else if(e.isPointLight){const t=n.get(e);if(t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(_),t.color.copy(e.color).multiplyScalar(e.intensity),t.distance=e.distance,t.decay=e.decay,e.castShadow){const t=e.shadow,n=r.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,n.shadowCameraNear=t.camera.near,n.shadowCameraFar=t.camera.far,i.pointShadow[m]=n,i.pointShadowMap[m]=S,i.pointShadowMatrix[m]=e.shadow.matrix,b++}i.point[m]=t,m++}else if(e.isHemisphereLight){const t=n.get(e);t.direction.setFromMatrixPosition(e.matrixWorld),t.direction.transformDirection(_),t.direction.normalize(),t.skyColor.copy(e.color).multiplyScalar(u),t.groundColor.copy(e.groundColor).multiplyScalar(u),i.hemi[y]=t,y++}}v>0&&(e.isWebGL2||!0===t.has("OES_texture_float_linear")?(i.rectAreaLTC1=Oo.LTC_FLOAT_1,i.rectAreaLTC2=Oo.LTC_FLOAT_2):!0===t.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=Oo.LTC_HALF_1,i.rectAreaLTC2=Oo.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=h,i.ambient[1]=d,i.ambient[2]=p;const M=i.hash;M.directionalLength===f&&M.pointLength===m&&M.spotLength===g&&M.rectAreaLength===v&&M.hemiLength===y&&M.numDirectionalShadows===x&&M.numPointShadows===b&&M.numSpotShadows===w||(i.directional.length=f,i.spot.length=g,i.rectArea.length=v,i.point.length=m,i.hemi.length=y,i.directionalShadow.length=x,i.directionalShadowMap.length=x,i.pointShadow.length=b,i.pointShadowMap.length=b,i.spotShadow.length=w,i.spotShadowMap.length=w,i.directionalShadowMatrix.length=x,i.pointShadowMatrix.length=b,i.spotShadowMatrix.length=w,M.directionalLength=f,M.pointLength=m,M.spotLength=g,M.rectAreaLength=v,M.hemiLength=y,M.numDirectionalShadows=x,M.numPointShadows=b,M.numSpotShadows=w,i.version=xs++)},state:i}}function _s(t,e){const n=new ws(t,e),r=[],i=[];return{init:function(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:function(t){n.setup(r,i,t)},pushLight:function(t){r.push(t)},pushShadow:function(t){i.push(t)}}}function Ms(t,e){let n=new WeakMap;return{get:function(r,i){let o;return!1===n.has(r)?(o=new _s(t,e),n.set(r,new WeakMap),n.get(r).set(i,o)):!1===n.get(r).has(i)?(o=new _s(t,e),n.get(r).set(i,o)):o=n.get(r).get(i),o},dispose:function(){n=new WeakMap}}}function Ss(t){wi.call(this),this.type="MeshDepthMaterial",this.depthPacking=on,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(t)}function Ts(t){wi.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Kn,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(t)}Ss.prototype=Object.create(wi.prototype),Ss.prototype.constructor=Ss,Ss.prototype.isMeshDepthMaterial=!0,Ss.prototype.copy=function(t){return wi.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},Ts.prototype=Object.create(wi.prototype),Ts.prototype.constructor=Ts,Ts.prototype.isMeshDistanceMaterial=!0,Ts.prototype.copy=function(t){return wi.prototype.copy.call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this};function Es(t,e,n){let r=new Lo;const i=new Gn,o=new Gn,a=new qn,s=[],c=[],l={},u={0:m,1:f,2:g},d=new xo({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new Gn},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );\n\tfor ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n\t\t#ifdef HORIZONAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean * HALF_SAMPLE_RATE;\n\tsquared_mean = squared_mean * HALF_SAMPLE_RATE;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),v=d.clone();v.defines.HORIZONAL_PASS=1;const y=new qi;y.setAttribute("position",new Ti(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const b=new ho(y,d),w=this;function _(n,r){const i=e.update(b);d.uniforms.shadow_pass.value=n.map.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,t.setRenderTarget(n.mapPass),t.clear(),t.renderBufferDirect(r,null,i,d,b,null),v.uniforms.shadow_pass.value=n.mapPass.texture,v.uniforms.resolution.value=n.mapSize,v.uniforms.radius.value=n.radius,t.setRenderTarget(n.map),t.clear(),t.renderBufferDirect(r,null,i,v,b,null)}function M(t,e,n){const r=t<<0|e<<1|n<<2;let i=s[r];return void 0===i&&(i=new Ss({depthPacking:an,morphTargets:t,skinning:e}),s[r]=i),i}function S(t,e,n){const r=t<<0|e<<1|n<<2;let i=c[r];return void 0===i&&(i=new Ts({morphTargets:t,skinning:e}),c[r]=i),i}function T(e,n,r,i,o,a,s){let c=null,h=M,d=e.customDepthMaterial;if(!0===i.isPointLight&&(h=S,d=e.customDistanceMaterial),void 0===d){let t=!1;!0===r.morphTargets&&(t=n.morphAttributes&&n.morphAttributes.position&&n.morphAttributes.position.length>0);let i=!1;!0===e.isSkinnedMesh&&(!0===r.skinning?i=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",e));c=h(t,i,!0===e.isInstancedMesh)}else c=d;if(t.localClippingEnabled&&!0===r.clipShadows&&0!==r.clippingPlanes.length){const t=c.uuid,e=r.uuid;let n=l[t];void 0===n&&(n={},l[t]=n);let i=n[e];void 0===i&&(i=c.clone(),n[e]=i),c=i}return c.visible=r.visible,c.wireframe=r.wireframe,c.side=s===p?null!==r.shadowSide?r.shadowSide:r.side:null!==r.shadowSide?r.shadowSide:u[r.side],c.clipShadows=r.clipShadows,c.clippingPlanes=r.clippingPlanes,c.clipIntersection=r.clipIntersection,c.wireframeLinewidth=r.wireframeLinewidth,c.linewidth=r.linewidth,!0===i.isPointLight&&!0===c.isMeshDistanceMaterial&&(c.referencePosition.setFromMatrixPosition(i.matrixWorld),c.nearDistance=o,c.farDistance=a),c}function E(n,i,o,a,s){if(!1===n.visible)return;if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&s===p)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);const r=e.update(n),i=n.material;if(Array.isArray(i)){const e=r.groups;for(let c=0,l=e.length;c<l;c++){const l=e[c],u=i[l.materialIndex];if(u&&u.visible){const e=T(n,r,u,a,o.near,o.far,s);t.renderBufferDirect(o,null,r,e,n,l)}}}else if(i.visible){const e=T(n,r,i,a,o.near,o.far,s);t.renderBufferDirect(o,null,r,e,n,null)}}const c=n.children;for(let t=0,e=c.length;t<e;t++)E(c[t],i,o,a,s)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=h,this.render=function(e,s,c){if(!1===w.enabled)return;if(!1===w.autoUpdate&&!1===w.needsUpdate)return;if(0===e.length)return;const l=t.getRenderTarget(),u=t.getActiveCubeFace(),h=t.getActiveMipmapLevel(),d=t.state;d.setBlending(x),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(let l=0,u=e.length;l<u;l++){const u=e[l],h=u.shadow;if(void 0===h){console.warn("THREE.WebGLShadowMap:",u,"has no shadow.");continue}if(!1===h.autoUpdate&&!1===h.needsUpdate)continue;i.copy(h.mapSize);const f=h.getFrameExtents();if(i.multiply(f),o.copy(h.mapSize),(i.x>n||i.y>n)&&(i.x>n&&(o.x=Math.floor(n/f.x),i.x=o.x*f.x,h.mapSize.x=o.x),i.y>n&&(o.y=Math.floor(n/f.y),i.y=o.y*f.y,h.mapSize.y=o.y)),null===h.map&&!h.isPointLightShadow&&this.type===p){const t={minFilter:xt,magFilter:xt,format:Ut};h.map=new Yn(i.x,i.y,t),h.map.texture.name=u.name+".shadowMap",h.mapPass=new Yn(i.x,i.y,t),h.camera.updateProjectionMatrix()}if(null===h.map){const t={minFilter:ft,magFilter:ft,format:Ut};h.map=new Yn(i.x,i.y,t),h.map.texture.name=u.name+".shadowMap",h.camera.updateProjectionMatrix()}t.setRenderTarget(h.map),t.clear();const m=h.getViewportCount();for(let t=0;t<m;t++){const e=h.getViewport(t);a.set(o.x*e.x,o.y*e.y,o.x*e.z,o.y*e.w),d.viewport(a),h.updateMatrices(u,t),r=h.getFrustum(),E(s,c,h.camera,u,this.type)}h.isPointLightShadow||this.type!==p||_(h,c),h.needsUpdate=!1}w.needsUpdate=!1,t.setRenderTarget(l,u,h)}}function As(t,e,n){const r=n.isWebGL2;const i=new function(){let e=!1;const n=new qn;let r=null;const i=new qn(0,0,0,0);return{setMask:function(n){r===n||e||(t.colorMask(n,n,n,n),r=n)},setLocked:function(t){e=t},setClear:function(e,r,o,a,s){!0===s&&(e*=a,r*=a,o*=a),n.set(e,r,o,a),!1===i.equals(n)&&(t.clearColor(e,r,o,a),i.copy(n))},reset:function(){e=!1,r=null,i.set(-1,0,0,0)}}},o=new function(){let e=!1,n=null,r=null,i=null;return{setTest:function(t){t?ft(2929):mt(2929)},setMask:function(r){n===r||e||(t.depthMask(r),n=r)},setFunc:function(e){if(r!==e){if(e)switch(e){case H:t.depthFunc(512);break;case k:t.depthFunc(519);break;case V:t.depthFunc(513);break;case j:t.depthFunc(515);break;case W:t.depthFunc(514);break;case X:t.depthFunc(518);break;case q:t.depthFunc(516);break;case Y:t.depthFunc(517);break;default:t.depthFunc(515)}else t.depthFunc(515);r=e}},setLocked:function(t){e=t},setClear:function(e){i!==e&&(t.clearDepth(e),i=e)},reset:function(){e=!1,n=null,r=null,i=null}}},l=new function(){let e=!1,n=null,r=null,i=null,o=null,a=null,s=null,c=null,l=null;return{setTest:function(t){e||(t?ft(2960):mt(2960))},setMask:function(r){n===r||e||(t.stencilMask(r),n=r)},setFunc:function(e,n,a){r===e&&i===n&&o===a||(t.stencilFunc(e,n,a),r=e,i=n,o=a)},setOp:function(e,n,r){a===e&&s===n&&c===r||(t.stencilOp(e,n,r),a=e,s=n,c=r)},setLocked:function(t){e=t},setClear:function(e){l!==e&&(t.clearStencil(e),l=e)},reset:function(){e=!1,n=null,r=null,i=null,o=null,a=null,s=null,c=null,l=null}}};let u={},h=null,d=null,p=null,f=null,v=null,y=null,Z=null,J=null,K=null,Q=!1,$=null,tt=null,et=null,nt=null,rt=null;const it=t.getParameter(35661);let ot=!1,at=0;const st=t.getParameter(7938);-1!==st.indexOf("WebGL")?(at=parseFloat(/^WebGL\ ([0-9])/.exec(st)[1]),ot=at>=1):-1!==st.indexOf("OpenGL ES")&&(at=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(st)[1]),ot=at>=2);let ct=null,lt={};const ut=new qn,ht=new qn;function dt(e,n,r){const i=new Uint8Array(4),o=t.createTexture();t.bindTexture(e,o),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728);for(let e=0;e<r;e++)t.texImage2D(n+e,0,6408,1,1,0,6408,5121,i);return o}const pt={};function ft(e){!0!==u[e]&&(t.enable(e),u[e]=!0)}function mt(e){!1!==u[e]&&(t.disable(e),u[e]=!1)}pt[3553]=dt(3553,3553,1),pt[34067]=dt(34067,34069,6),i.setClear(0,0,0,1),o.setClear(1),l.setClear(0),ft(2929),o.setFunc(j),xt(!1),bt(s),ft(2884),yt(x);const gt={[T]:32774,[E]:32778,[A]:32779};if(r)gt[L]=32775,gt[R]=32776;else{const t=e.get("EXT_blend_minmax");null!==t&&(gt[L]=t.MIN_EXT,gt[R]=t.MAX_EXT)}const vt={[P]:0,[C]:1,[I]:768,[N]:770,[G]:776,[U]:774,[B]:772,[O]:769,[D]:771,[z]:775,[F]:773};function yt(e,n,r,i,o,a,s,c){if(e!==x){if(d||(ft(3042),d=!0),e===S)o=o||n,a=a||r,s=s||i,n===f&&o===Z||(t.blendEquationSeparate(gt[n],gt[o]),f=n,Z=o),r===v&&i===y&&a===J&&s===K||(t.blendFuncSeparate(vt[r],vt[i],vt[a],vt[s]),v=r,y=i,J=a,K=s),p=e,Q=null;else if(e!==p||c!==Q){if(f===T&&Z===T||(t.blendEquation(32774),f=T,Z=T),c)switch(e){case b:t.blendFuncSeparate(1,771,1,771);break;case w:t.blendFunc(1,1);break;case _:t.blendFuncSeparate(0,0,769,771);break;case M:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case b:t.blendFuncSeparate(770,771,1,771);break;case w:t.blendFunc(770,1);break;case _:t.blendFunc(0,769);break;case M:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}v=null,y=null,J=null,K=null,p=e,Q=c}}else d&&(mt(3042),d=!1)}function xt(e){$!==e&&(e?t.frontFace(2304):t.frontFace(2305),$=e)}function bt(e){e!==a?(ft(2884),e!==tt&&(e===s?t.cullFace(1029):e===c?t.cullFace(1028):t.cullFace(1032))):mt(2884),tt=e}function wt(e,n,r){e?(ft(32823),nt===n&&rt===r||(t.polygonOffset(n,r),nt=n,rt=r)):mt(32823)}function _t(e){void 0===e&&(e=33984+it-1),ct!==e&&(t.activeTexture(e),ct=e)}return{buffers:{color:i,depth:o,stencil:l},enable:ft,disable:mt,useProgram:function(e){return h!==e&&(t.useProgram(e),h=e,!0)},setBlending:yt,setMaterial:function(t,e){t.side===g?mt(2884):ft(2884);let n=t.side===m;e&&(n=!n),xt(n),t.blending===b&&!1===t.transparent?yt(x):yt(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),o.setFunc(t.depthFunc),o.setTest(t.depthTest),o.setMask(t.depthWrite),i.setMask(t.colorWrite);const r=t.stencilWrite;l.setTest(r),r&&(l.setMask(t.stencilWriteMask),l.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),l.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),wt(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)},setFlipSided:xt,setCullFace:bt,setLineWidth:function(e){e!==et&&(ot&&t.lineWidth(e),et=e)},setPolygonOffset:wt,setScissorTest:function(t){t?ft(3089):mt(3089)},activeTexture:_t,bindTexture:function(e,n){null===ct&&_t();let r=lt[ct];void 0===r&&(r={type:void 0,texture:void 0},lt[ct]=r),r.type===e&&r.texture===n||(t.bindTexture(e,n||pt[e]),r.type=e,r.texture=n)},unbindTexture:function(){const e=lt[ct];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(e){!1===ut.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),ut.copy(e))},viewport:function(e){!1===ht.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),ht.copy(e))},reset:function(){u={},ct=null,lt={},h=null,d=null,p=null,f=null,v=null,y=null,Z=null,J=null,K=null,Q=!1,$=null,tt=null,et=null,nt=null,rt=null,i.reset(),o.reset(),l.reset()}}}function Ls(t,e,n,r,i,o,a){const s=i.isWebGL2,c=i.maxTextures,l=i.maxCubemapSize,u=i.maxTextureSize,h=i.maxSamples,d=new WeakMap;let p,f=!1;try{f="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(t){}function m(t,e){return f?new OffscreenCanvas(t,e):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function g(t,e,n,r){let i=1;if((t.width>r||t.height>r)&&(i=r/Math.max(t.width,t.height)),i<1||!0===e){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){const r=e?zn.floorPowerOfTwo:Math.floor,o=r(i*t.width),a=r(i*t.height);void 0===p&&(p=m(o,a));const s=n?m(o,a):p;s.width=o,s.height=a;return s.getContext("2d").drawImage(t,0,0,o,a),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+o+"x"+a+")."),s}return"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+")."),t}return t}function v(t){return zn.isPowerOfTwo(t.width)&&zn.isPowerOfTwo(t.height)}function y(t,e){return t.generateMipmaps&&e&&t.minFilter!==ft&&t.minFilter!==xt}function x(e,n,i,o){t.generateMipmap(e);r.get(n).__maxMipLevel=Math.log(Math.max(i,o))*Math.LOG2E}function b(n,r,i){if(!1===s)return r;if(null!==n){if(void 0!==t[n])return t[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let o=r;return 6403===r&&(5126===i&&(o=33326),5131===i&&(o=33325),5121===i&&(o=33321)),6407===r&&(5126===i&&(o=34837),5131===i&&(o=34843),5121===i&&(o=32849)),6408===r&&(5126===i&&(o=34836),5131===i&&(o=34842),5121===i&&(o=32856)),33325!==o&&33326!==o&&34842!==o&&34836!==o||e.get("EXT_color_buffer_float"),o}function w(t){return t===ft||t===mt||t===vt?9728:9729}function _(e){const n=e.target;n.removeEventListener("dispose",_),function(e){const n=r.get(e);if(void 0===n.__webglInit)return;t.deleteTexture(n.__webglTexture),r.remove(e)}(n),n.isVideoTexture&&d.delete(n),a.memory.textures--}function M(e){const n=e.target;n.removeEventListener("dispose",M),function(e){const n=r.get(e),i=r.get(e.texture);if(!e)return;void 0!==i.__webglTexture&&t.deleteTexture(i.__webglTexture);e.depthTexture&&e.depthTexture.dispose();if(e.isWebGLCubeRenderTarget)for(let e=0;e<6;e++)t.deleteFramebuffer(n.__webglFramebuffer[e]),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer[e]);else t.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer),n.__webglMultisampledFramebuffer&&t.deleteFramebuffer(n.__webglMultisampledFramebuffer),n.__webglColorRenderbuffer&&t.deleteRenderbuffer(n.__webglColorRenderbuffer),n.__webglDepthRenderbuffer&&t.deleteRenderbuffer(n.__webglDepthRenderbuffer);r.remove(e.texture),r.remove(e)}(n),a.memory.textures--}let S=0;function T(t,e){const i=r.get(t);if(t.isVideoTexture&&function(t){const e=a.render.frame;d.get(t)!==e&&(d.set(t,e),t.update())}(t),t.version>0&&i.__version!==t.version){const n=t.image;if(void 0===n)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==n.complete)return void C(i,t,e);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+e),n.bindTexture(3553,i.__webglTexture)}function E(e,i){const a=r.get(e);e.version>0&&a.__version!==e.version?function(e,r,i){if(6!==r.image.length)return;P(e,r),n.activeTexture(33984+i),n.bindTexture(34067,e.__webglTexture),t.pixelStorei(37440,r.flipY);const a=r&&(r.isCompressedTexture||r.image[0].isCompressedTexture),c=r.image[0]&&r.image[0].isDataTexture,u=[];for(let t=0;t<6;t++)u[t]=a||c?c?r.image[t].image:r.image[t]:g(r.image[t],!1,!0,l);const h=u[0],d=v(h)||s,p=o.convert(r.format),f=o.convert(r.type),m=b(r.internalFormat,p,f);let w;if(R(34067,r,d),a){for(let t=0;t<6;t++){w=u[t].mipmaps;for(let e=0;e<w.length;e++){const i=w[e];r.format!==Ut&&r.format!==Ft?null!==p?n.compressedTexImage2D(34069+t,e,m,i.width,i.height,0,i.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+t,e,m,i.width,i.height,0,p,f,i.data)}}e.__maxMipLevel=w.length-1}else{w=r.mipmaps;for(let t=0;t<6;t++)if(c){n.texImage2D(34069+t,0,m,u[t].width,u[t].height,0,p,f,u[t].data);for(let e=0;e<w.length;e++){const r=w[e].image[t].image;n.texImage2D(34069+t,e+1,m,r.width,r.height,0,p,f,r.data)}}else{n.texImage2D(34069+t,0,m,p,f,u[t]);for(let e=0;e<w.length;e++){const r=w[e];n.texImage2D(34069+t,e+1,m,p,f,r.image[t])}}e.__maxMipLevel=w.length}y(r,d)&&x(34067,r,h.width,h.height);e.__version=r.version,r.onUpdate&&r.onUpdate(r)}(a,e,i):(n.activeTexture(33984+i),n.bindTexture(34067,a.__webglTexture))}const A={[ht]:10497,[dt]:33071,[pt]:33648},L={[ft]:9728,[mt]:9984,[vt]:9986,[xt]:9729,[bt]:9985,[_t]:9987};function R(n,o,a){a?(t.texParameteri(n,10242,A[o.wrapS]),t.texParameteri(n,10243,A[o.wrapT]),32879!==n&&35866!==n||t.texParameteri(n,32882,A[o.wrapR]),t.texParameteri(n,10240,L[o.magFilter]),t.texParameteri(n,10241,L[o.minFilter])):(t.texParameteri(n,10242,33071),t.texParameteri(n,10243,33071),32879!==n&&35866!==n||t.texParameteri(n,32882,33071),o.wrapS===dt&&o.wrapT===dt||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(n,10240,w(o.magFilter)),t.texParameteri(n,10241,w(o.minFilter)),o.minFilter!==ft&&o.minFilter!==xt&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));const c=e.get("EXT_texture_filter_anisotropic");if(c){if(o.type===Pt&&null===e.get("OES_texture_float_linear"))return;if(o.type===Ct&&null===(s||e.get("OES_texture_half_float_linear")))return;(o.anisotropy>1||r.get(o).__currentAnisotropy)&&(t.texParameterf(n,c.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,i.getMaxAnisotropy())),r.get(o).__currentAnisotropy=o.anisotropy)}}function P(e,n){void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",_),e.__webglTexture=t.createTexture(),a.memory.textures++)}function C(e,r,i){let a=3553;r.isDataTexture2DArray&&(a=35866),r.isDataTexture3D&&(a=32879),P(e,r),n.activeTexture(33984+i),n.bindTexture(a,e.__webglTexture),t.pixelStorei(37440,r.flipY),t.pixelStorei(37441,r.premultiplyAlpha),t.pixelStorei(3317,r.unpackAlignment);const c=function(t){return!s&&(t.wrapS!==dt||t.wrapT!==dt||t.minFilter!==ft&&t.minFilter!==xt)}(r)&&!1===v(r.image),l=g(r.image,c,!1,u),h=v(l)||s,d=o.convert(r.format);let p,f=o.convert(r.type),m=b(r.internalFormat,d,f);R(a,r,h);const w=r.mipmaps;if(r.isDepthTexture)m=6402,s?m=r.type===Pt?36012:r.type===Rt?33190:r.type===Dt?35056:33189:r.type===Pt&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),r.format===kt&&6402===m&&r.type!==At&&r.type!==Rt&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=At,f=o.convert(r.type)),r.format===Vt&&6402===m&&(m=34041,r.type!==Dt&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=Dt,f=o.convert(r.type))),n.texImage2D(3553,0,m,l.width,l.height,0,d,f,null);else if(r.isDataTexture)if(w.length>0&&h){for(let t=0,e=w.length;t<e;t++)p=w[t],n.texImage2D(3553,t,m,p.width,p.height,0,d,f,p.data);r.generateMipmaps=!1,e.__maxMipLevel=w.length-1}else n.texImage2D(3553,0,m,l.width,l.height,0,d,f,l.data),e.__maxMipLevel=0;else if(r.isCompressedTexture){for(let t=0,e=w.length;t<e;t++)p=w[t],r.format!==Ut&&r.format!==Ft?null!==d?n.compressedTexImage2D(3553,t,m,p.width,p.height,0,p.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,t,m,p.width,p.height,0,d,f,p.data);e.__maxMipLevel=w.length-1}else if(r.isDataTexture2DArray)n.texImage3D(35866,0,m,l.width,l.height,l.depth,0,d,f,l.data),e.__maxMipLevel=0;else if(r.isDataTexture3D)n.texImage3D(32879,0,m,l.width,l.height,l.depth,0,d,f,l.data),e.__maxMipLevel=0;else if(w.length>0&&h){for(let t=0,e=w.length;t<e;t++)p=w[t],n.texImage2D(3553,t,m,d,f,p);r.generateMipmaps=!1,e.__maxMipLevel=w.length-1}else n.texImage2D(3553,0,m,d,f,l),e.__maxMipLevel=0;y(r,h)&&x(a,r,l.width,l.height),e.__version=r.version,r.onUpdate&&r.onUpdate(r)}function I(e,i,a,s){const c=o.convert(i.texture.format),l=o.convert(i.texture.type),u=b(i.texture.internalFormat,c,l);n.texImage2D(s,0,u,i.width,i.height,0,c,l,null),t.bindFramebuffer(36160,e),t.framebufferTexture2D(36160,a,s,r.get(i.texture).__webglTexture,0),t.bindFramebuffer(36160,null)}function O(e,n,r){if(t.bindRenderbuffer(36161,e),n.depthBuffer&&!n.stencilBuffer){let i=33189;if(r){const e=n.depthTexture;e&&e.isDepthTexture&&(e.type===Pt?i=36012:e.type===Rt&&(i=33190));const r=D(n);t.renderbufferStorageMultisample(36161,r,i,n.width,n.height)}else t.renderbufferStorage(36161,i,n.width,n.height);t.framebufferRenderbuffer(36160,36096,36161,e)}else if(n.depthBuffer&&n.stencilBuffer){if(r){const e=D(n);t.renderbufferStorageMultisample(36161,e,35056,n.width,n.height)}else t.renderbufferStorage(36161,34041,n.width,n.height);t.framebufferRenderbuffer(36160,33306,36161,e)}else{const e=o.convert(n.texture.format),i=o.convert(n.texture.type),a=b(n.texture.internalFormat,e,i);if(r){const e=D(n);t.renderbufferStorageMultisample(36161,e,a,n.width,n.height)}else t.renderbufferStorage(36161,a,n.width,n.height)}t.bindRenderbuffer(36161,null)}function N(e){const n=r.get(e),i=!0===e.isWebGLCubeRenderTarget;if(e.depthTexture){if(i)throw new Error("target.depthTexture not supported in Cube render targets");!function(e,n){if(n&&n.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,e),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),T(n.depthTexture,0);const i=r.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===kt)t.framebufferTexture2D(36160,36096,3553,i,0);else{if(n.depthTexture.format!==Vt)throw new Error("Unknown depthTexture format");t.framebufferTexture2D(36160,33306,3553,i,0)}}(n.__webglFramebuffer,e)}else if(i){n.__webglDepthbuffer=[];for(let r=0;r<6;r++)t.bindFramebuffer(36160,n.__webglFramebuffer[r]),n.__webglDepthbuffer[r]=t.createRenderbuffer(),O(n.__webglDepthbuffer[r],e,!1)}else t.bindFramebuffer(36160,n.__webglFramebuffer),n.__webglDepthbuffer=t.createRenderbuffer(),O(n.__webglDepthbuffer,e,!1);t.bindFramebuffer(36160,null)}function D(t){return s&&t.isWebGLMultisampleRenderTarget?Math.min(h,t.samples):0}let B=!1,F=!1;this.allocateTextureUnit=function(){const t=S;return t>=c&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+c),S+=1,t},this.resetTextureUnits=function(){S=0},this.setTexture2D=T,this.setTexture2DArray=function(t,e){const i=r.get(t);t.version>0&&i.__version!==t.version?C(i,t,e):(n.activeTexture(33984+e),n.bindTexture(35866,i.__webglTexture))},this.setTexture3D=function(t,e){const i=r.get(t);t.version>0&&i.__version!==t.version?C(i,t,e):(n.activeTexture(33984+e),n.bindTexture(32879,i.__webglTexture))},this.setTextureCube=E,this.setupRenderTarget=function(e){const i=r.get(e),c=r.get(e.texture);e.addEventListener("dispose",M),c.__webglTexture=t.createTexture(),a.memory.textures++;const l=!0===e.isWebGLCubeRenderTarget,u=!0===e.isWebGLMultisampleRenderTarget,h=v(e)||s;if(!s||e.texture.format!==Ft||e.texture.type!==Pt&&e.texture.type!==Ct||(e.texture.format=Ut,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),l){i.__webglFramebuffer=[];for(let e=0;e<6;e++)i.__webglFramebuffer[e]=t.createFramebuffer()}else if(i.__webglFramebuffer=t.createFramebuffer(),u)if(s){i.__webglMultisampledFramebuffer=t.createFramebuffer(),i.__webglColorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,i.__webglColorRenderbuffer);const n=o.convert(e.texture.format),r=o.convert(e.texture.type),a=b(e.texture.internalFormat,n,r),s=D(e);t.renderbufferStorageMultisample(36161,s,a,e.width,e.height),t.bindFramebuffer(36160,i.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064,36161,i.__webglColorRenderbuffer),t.bindRenderbuffer(36161,null),e.depthBuffer&&(i.__webglDepthRenderbuffer=t.createRenderbuffer(),O(i.__webglDepthRenderbuffer,e,!0)),t.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(l){n.bindTexture(34067,c.__webglTexture),R(34067,e.texture,h);for(let t=0;t<6;t++)I(i.__webglFramebuffer[t],e,36064,34069+t);y(e.texture,h)&&x(34067,e.texture,e.width,e.height),n.bindTexture(34067,null)}else n.bindTexture(3553,c.__webglTexture),R(3553,e.texture,h),I(i.__webglFramebuffer,e,36064,3553),y(e.texture,h)&&x(3553,e.texture,e.width,e.height),n.bindTexture(3553,null);e.depthBuffer&&N(e)},this.updateRenderTargetMipmap=function(t){const e=t.texture;if(y(e,v(t)||s)){const i=t.isWebGLCubeRenderTarget?34067:3553,o=r.get(e).__webglTexture;n.bindTexture(i,o),x(i,e,t.width,t.height),n.bindTexture(i,null)}},this.updateMultisampleRenderTarget=function(e){if(e.isWebGLMultisampleRenderTarget)if(s){const n=r.get(e);t.bindFramebuffer(36008,n.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,n.__webglFramebuffer);const i=e.width,o=e.height;let a=16384;e.depthBuffer&&(a|=256),e.stencilBuffer&&(a|=1024),t.blitFramebuffer(0,0,i,o,0,0,i,o,a,9728),t.bindFramebuffer(36160,n.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(t,e){t&&t.isWebGLRenderTarget&&(!1===B&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),B=!0),t=t.texture),T(t,e)},this.safeSetTextureCube=function(t,e){t&&t.isWebGLCubeRenderTarget&&(!1===F&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),F=!0),t=t.texture),E(t,e)}}function Rs(t,e,n){const r=n.isWebGL2;return{convert:function(t){let n;if(t===St)return 5121;if(t===It)return 32819;if(t===Ot)return 32820;if(t===Nt)return 33635;if(t===Tt)return 5120;if(t===Et)return 5122;if(t===At)return 5123;if(t===Lt)return 5124;if(t===Rt)return 5125;if(t===Pt)return 5126;if(t===Ct)return r?5131:(n=e.get("OES_texture_half_float"),null!==n?n.HALF_FLOAT_OES:null);if(t===Bt)return 6406;if(t===Ft)return 6407;if(t===Ut)return 6408;if(t===zt)return 6409;if(t===Gt)return 6410;if(t===kt)return 6402;if(t===Vt)return 34041;if(t===jt)return 6403;if(t===Wt)return 36244;if(t===Xt)return 33319;if(t===qt)return 33320;if(t===Yt)return 36248;if(t===Zt)return 36249;if(t===Jt||t===Kt||t===Qt||t===$t){if(n=e.get("WEBGL_compressed_texture_s3tc"),null===n)return null;if(t===Jt)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(t===Kt)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(t===Qt)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(t===$t)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(t===te||t===ee||t===ne||t===re){if(n=e.get("WEBGL_compressed_texture_pvrtc"),null===n)return null;if(t===te)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(t===ee)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(t===ne)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(t===re)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(t===ie)return n=e.get("WEBGL_compressed_texture_etc1"),null!==n?n.COMPRESSED_RGB_ETC1_WEBGL:null;if((t===oe||t===ae)&&(n=e.get("WEBGL_compressed_texture_etc"),null!==n)){if(t===oe)return n.COMPRESSED_RGB8_ETC2;if(t===ae)return n.COMPRESSED_RGBA8_ETC2_EAC}return t===se||t===ce||t===le||t===ue||t===he||t===de||t===pe||t===fe||t===me||t===ge||t===ve||t===ye||t===xe||t===be||t===_e||t===Me||t===Se||t===Te||t===Ee||t===Ae||t===Le||t===Re||t===Pe||t===Ce||t===Ie||t===Oe||t===Ne||t===De?(n=e.get("WEBGL_compressed_texture_astc"),null!==n?t:null):t===we?(n=e.get("EXT_texture_compression_bptc"),null!==n?t:null):t===Dt?r?34042:(n=e.get("WEBGL_depth_texture"),null!==n?n.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}function Ps(t=[]){wo.call(this),this.cameras=t}function Cs(){Jr.call(this),this.type="Group"}function Is(){this._targetRay=null,this._grip=null,this._hand=null}function Os(t,e){const n=this;let r=null,i=1,o=null,a="local-floor",s=null;const c=[],l=new Map,u=new wo;u.layers.enable(1),u.viewport=new qn;const h=new wo;h.layers.enable(2),h.viewport=new qn;const d=[u,h],p=new Ps;p.layers.enable(1),p.layers.enable(2);let f=null,m=null;function g(t){const e=l.get(t.inputSource);e&&e.dispatchEvent({type:t.type,data:t.inputSource})}function v(){l.forEach((function(t,e){t.disconnect(e)})),l.clear(),t.setFramebuffer(null),t.setRenderTarget(t.getRenderTarget()),S.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function y(t){o=t,S.setContext(r),S.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}function x(t){const e=r.inputSources;for(let t=0;t<c.length;t++)l.set(e[t],c[t]);for(let e=0;e<t.removed.length;e++){const n=t.removed[e],r=l.get(n);r&&(r.dispatchEvent({type:"disconnected",data:n}),l.delete(n))}for(let e=0;e<t.added.length;e++){const n=t.added[e],r=l.get(n);r&&r.dispatchEvent({type:"connected",data:n})}}this.enabled=!1,this.isPresenting=!1,this.getController=function(t){let e=c[t];return void 0===e&&(e=new Is,c[t]=e),e.getTargetRaySpace()},this.getControllerGrip=function(t){let e=c[t];return void 0===e&&(e=new Is,c[t]=e),e.getGripSpace()},this.getHand=function(t){let e=c[t];return void 0===e&&(e=new Is,c[t]=e),e.getHandSpace()},this.setFramebufferScaleFactor=function(t){i=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(t){a=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return o},this.getSession=function(){return r},this.setSession=function(t){if(r=t,null!==r){r.addEventListener("select",g),r.addEventListener("selectstart",g),r.addEventListener("selectend",g),r.addEventListener("squeeze",g),r.addEventListener("squeezestart",g),r.addEventListener("squeezeend",g),r.addEventListener("end",v);const t=e.getContextAttributes();!0!==t.xrCompatible&&e.makeXRCompatible();const n={antialias:t.antialias,alpha:t.alpha,depth:t.depth,stencil:t.stencil,framebufferScaleFactor:i},o=new XRWebGLLayer(r,e,n);r.updateRenderState({baseLayer:o}),r.requestReferenceSpace(a).then(y),r.addEventListener("inputsourceschange",x)}};const b=new Kn,w=new Kn;function _(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.copy(t.matrixWorld).invert()}this.getCamera=function(t){p.near=h.near=u.near=t.near,p.far=h.far=u.far=t.far,f===p.near&&m===p.far||(r.updateRenderState({depthNear:p.near,depthFar:p.far}),f=p.near,m=p.far);const e=t.parent,n=p.cameras;_(p,e);for(let t=0;t<n.length;t++)_(n[t],e);t.matrixWorld.copy(p.matrixWorld);const i=t.children;for(let t=0,e=i.length;t<e;t++)i[t].updateMatrixWorld(!0);return 2===n.length?function(t,e,n){b.setFromMatrixPosition(e.matrixWorld),w.setFromMatrixPosition(n.matrixWorld);const r=b.distanceTo(w),i=e.projectionMatrix.elements,o=n.projectionMatrix.elements,a=i[14]/(i[10]-1),s=i[14]/(i[10]+1),c=(i[9]+1)/i[5],l=(i[9]-1)/i[5],u=(i[8]-1)/i[0],h=(o[8]+1)/o[0],d=a*u,p=a*h,f=r/(-u+h),m=f*-u;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(m),t.translateZ(f),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.copy(t.matrixWorld).invert();const g=a+f,v=s+f,y=d-m,x=p+(r-m),_=c*s/v*g,M=l*s/v*g;t.projectionMatrix.makePerspective(y,x,_,M,g,v)}(p,u,h):p.projectionMatrix.copy(u.projectionMatrix),p};let M=null;const S=new Ro;S.setAnimationLoop((function(e,n){if(s=n.getViewerPose(o),null!==s){const e=s.views,n=r.renderState.baseLayer;t.setFramebuffer(n.framebuffer);let i=!1;e.length!==p.cameras.length&&(p.cameras.length=0,i=!0);for(let t=0;t<e.length;t++){const r=e[t],o=n.getViewport(r),a=d[t];a.matrix.fromArray(r.transform.matrix),a.projectionMatrix.fromArray(r.projectionMatrix),a.viewport.set(o.x,o.y,o.width,o.height),0===t&&p.matrix.copy(a.matrix),!0===i&&p.cameras.push(a)}}const i=r.inputSources;for(let t=0;t<c.length;t++){const e=c[t],r=i[t];e.update(r,n,o)}M&&M(e,n)})),this.setAnimationLoop=function(t){M=t},this.dispose=function(){}}function Ns(t){function e(e,n){e.opacity.value=n.opacity,n.color&&e.diffuse.value.copy(n.color),n.emissive&&e.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(e.map.value=n.map),n.alphaMap&&(e.alphaMap.value=n.alphaMap),n.specularMap&&(e.specularMap.value=n.specularMap);const r=t.get(n).envMap;if(r){e.envMap.value=r,e.flipEnvMap.value=r.isCubeTexture&&r._needsFlipEnvMap?-1:1,e.reflectivity.value=n.reflectivity,e.refractionRatio.value=n.refractionRatio;const i=t.get(r).__maxMipLevel;void 0!==i&&(e.maxMipLevel.value=i)}let i,o;n.lightMap&&(e.lightMap.value=n.lightMap,e.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(e.aoMap.value=n.aoMap,e.aoMapIntensity.value=n.aoMapIntensity),n.map?i=n.map:n.specularMap?i=n.specularMap:n.displacementMap?i=n.displacementMap:n.normalMap?i=n.normalMap:n.bumpMap?i=n.bumpMap:n.roughnessMap?i=n.roughnessMap:n.metalnessMap?i=n.metalnessMap:n.alphaMap?i=n.alphaMap:n.emissiveMap?i=n.emissiveMap:n.clearcoatMap?i=n.clearcoatMap:n.clearcoatNormalMap?i=n.clearcoatNormalMap:n.clearcoatRoughnessMap&&(i=n.clearcoatRoughnessMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix)),n.aoMap?o=n.aoMap:n.lightMap&&(o=n.lightMap),void 0!==o&&(o.isWebGLRenderTarget&&(o=o.texture),!0===o.matrixAutoUpdate&&o.updateMatrix(),e.uv2Transform.value.copy(o.matrix))}function n(e,n){e.roughness.value=n.roughness,e.metalness.value=n.metalness,n.roughnessMap&&(e.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(e.metalnessMap.value=n.metalnessMap),n.emissiveMap&&(e.emissiveMap.value=n.emissiveMap),n.bumpMap&&(e.bumpMap.value=n.bumpMap,e.bumpScale.value=n.bumpScale,n.side===m&&(e.bumpScale.value*=-1)),n.normalMap&&(e.normalMap.value=n.normalMap,e.normalScale.value.copy(n.normalScale),n.side===m&&e.normalScale.value.negate()),n.displacementMap&&(e.displacementMap.value=n.displacementMap,e.displacementScale.value=n.displacementScale,e.displacementBias.value=n.displacementBias);t.get(n).envMap&&(e.envMapIntensity.value=n.envMapIntensity)}return{refreshFogUniforms:function(t,e){t.fogColor.value.copy(e.color),e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)},refreshMaterialUniforms:function(t,r,i,o){r.isMeshBasicMaterial?e(t,r):r.isMeshLambertMaterial?(e(t,r),function(t,e){e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap)}(t,r)):r.isMeshToonMaterial?(e(t,r),function(t,e){e.gradientMap&&(t.gradientMap.value=e.gradientMap);e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap);e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===m&&(t.bumpScale.value*=-1));e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===m&&t.normalScale.value.negate());e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,r)):r.isMeshPhongMaterial?(e(t,r),function(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap);e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===m&&(t.bumpScale.value*=-1));e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===m&&t.normalScale.value.negate());e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,r)):r.isMeshStandardMaterial?(e(t,r),r.isMeshPhysicalMaterial?function(t,e){n(t,e),t.reflectivity.value=e.reflectivity,t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.sheen&&t.sheen.value.copy(e.sheen);e.clearcoatMap&&(t.clearcoatMap.value=e.clearcoatMap);e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap);e.clearcoatNormalMap&&(t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),t.clearcoatNormalMap.value=e.clearcoatNormalMap,e.side===m&&t.clearcoatNormalScale.value.negate());t.transmission.value=e.transmission,e.transmissionMap&&(t.transmissionMap.value=e.transmissionMap)}(t,r):n(t,r)):r.isMeshMatcapMaterial?(e(t,r),function(t,e){e.matcap&&(t.matcap.value=e.matcap);e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===m&&(t.bumpScale.value*=-1));e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===m&&t.normalScale.value.negate());e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,r)):r.isMeshDepthMaterial?(e(t,r),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,r)):r.isMeshDistanceMaterial?(e(t,r),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias);t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}(t,r)):r.isMeshNormalMaterial?(e(t,r),function(t,e){e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===m&&(t.bumpScale.value*=-1));e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===m&&t.normalScale.value.negate());e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,r)):r.isLineBasicMaterial?(function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity}(t,r),r.isLineDashedMaterial&&function(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}(t,r)):r.isPointsMaterial?function(t,e,n,r){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*n,t.scale.value=.5*r,e.map&&(t.map.value=e.map);e.alphaMap&&(t.alphaMap.value=e.alphaMap);let i;e.map?i=e.map:e.alphaMap&&(i=e.alphaMap);void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),t.uvTransform.value.copy(i.matrix))}(t,r,i,o):r.isSpriteMaterial?function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map);e.alphaMap&&(t.alphaMap.value=e.alphaMap);let n;e.map?n=e.map:e.alphaMap&&(n=e.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix))}(t,r):r.isShadowMaterial?(t.color.value.copy(r.color),t.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function Ds(t){const e=void 0!==(t=t||{}).canvas?t.canvas:function(){const t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return t.style.display="block",t}(),n=void 0!==t.context?t.context:null,r=void 0!==t.alpha&&t.alpha,i=void 0===t.depth||t.depth,o=void 0===t.stencil||t.stencil,a=void 0!==t.antialias&&t.antialias,s=void 0===t.premultipliedAlpha||t.premultipliedAlpha,c=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,l=void 0!==t.powerPreference?t.powerPreference:"default",u=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat;let h=null,d=null;this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=Je,this.physicallyCorrectLights=!1,this.toneMapping=Q,this.toneMappingExposure=1,this.maxMorphTargets=8,this.maxMorphNormals=4;const p=this;let f=!1,m=null,g=0,v=0,y=null,x=null,b=-1,w=null,_=null;const M=new qn,S=new qn;let T=null,E=e.width,A=e.height,L=1,R=null,P=null;const C=new qn(0,0,E,A),I=new qn(0,0,E,A);let O=!1;const N=new Lo;let D=!1,B=!1;const F=new Tr,U=new Kn,z={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function G(){return null===y?L:1}let H,k,V,j,W,X,q,Y,Z,J,K,$,tt,et,nt,rt,it,ot,at,st,ct,lt=n;function ut(t,n){for(let r=0;r<t.length;r++){const i=t[r],o=e.getContext(i,n);if(null!==o)return o}return null}try{const t={alpha:r,depth:i,stencil:o,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:c,powerPreference:l,failIfMajorPerformanceCaveat:u};if(e.addEventListener("webglcontextlost",ft,!1),e.addEventListener("webglcontextrestored",mt,!1),null===lt){const e=["webgl2","webgl","experimental-webgl"];if(!0===p.isWebGL1Renderer&&e.shift(),lt=ut(e,t),null===lt)throw ut(e)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===lt.getShaderPrecisionFormat&&(lt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){throw console.error("THREE.WebGLRenderer: "+t.message),t}function ht(){H=new Ho(lt),k=new Uo(lt,H,t),!1===k.isWebGL2&&(H.get("WEBGL_depth_texture"),H.get("OES_texture_float"),H.get("OES_texture_half_float"),H.get("OES_texture_half_float_linear"),H.get("OES_standard_derivatives"),H.get("OES_element_index_uint"),H.get("OES_vertex_array_object"),H.get("ANGLE_instanced_arrays")),H.get("OES_texture_float_linear"),st=new Rs(lt,H,k),V=new As(lt,H,k),V.scissor(S.copy(I).multiplyScalar(L).floor()),V.viewport(M.copy(C).multiplyScalar(L).floor()),j=new jo(lt),W=new ps,X=new Ls(lt,H,V,W,k,st,j),q=new Go(p),Y=new Po(lt,k),ct=new Bo(lt,H,Y,k),Z=new ko(lt,Y,j,ct),J=new Yo(lt,Z,Y,j),it=new qo(lt),nt=new zo(W),K=new ds(p,q,H,k,ct,nt),$=new Ns(W),tt=new vs(W),et=new Ms(H,k),rt=new Do(p,q,V,J,s),ot=new Fo(lt,H,j,k),at=new Vo(lt,H,j,k),j.programs=K.programs,p.capabilities=k,p.extensions=H,p.properties=W,p.renderLists=tt,p.state=V,p.info=j}ht();const dt=new Os(p,lt);this.xr=dt;const pt=new Es(p,J,k.maxTextureSize);function ft(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),f=!0}function mt(){console.log("THREE.WebGLRenderer: Context Restored."),f=!1,ht()}function gt(t){const e=t.target;e.removeEventListener("dispose",gt),function(t){vt(t),W.remove(t)}(e)}function vt(t){const e=W.get(t).program;void 0!==e&&K.releaseProgram(e)}this.shadowMap=pt,this.getContext=function(){return lt},this.getContextAttributes=function(){return lt.getContextAttributes()},this.forceContextLoss=function(){const t=H.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){const t=H.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return L},this.setPixelRatio=function(t){void 0!==t&&(L=t,this.setSize(E,A,!1))},this.getSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),t=new Gn),t.set(E,A)},this.setSize=function(t,n,r){dt.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(E=t,A=n,e.width=Math.floor(t*L),e.height=Math.floor(n*L),!1!==r&&(e.style.width=t+"px",e.style.height=n+"px"),this.setViewport(0,0,t,n))},this.getDrawingBufferSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),t=new Gn),t.set(E*L,A*L).floor()},this.setDrawingBufferSize=function(t,n,r){E=t,A=n,L=r,e.width=Math.floor(t*r),e.height=Math.floor(n*r),this.setViewport(0,0,t,n)},this.getCurrentViewport=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),t=new qn),t.copy(M)},this.getViewport=function(t){return t.copy(C)},this.setViewport=function(t,e,n,r){t.isVector4?C.set(t.x,t.y,t.z,t.w):C.set(t,e,n,r),V.viewport(M.copy(C).multiplyScalar(L).floor())},this.getScissor=function(t){return t.copy(I)},this.setScissor=function(t,e,n,r){t.isVector4?I.set(t.x,t.y,t.z,t.w):I.set(t,e,n,r),V.scissor(S.copy(I).multiplyScalar(L).floor())},this.getScissorTest=function(){return O},this.setScissorTest=function(t){V.setScissorTest(O=t)},this.setOpaqueSort=function(t){R=t},this.setTransparentSort=function(t){P=t},this.getClearColor=function(){return rt.getClearColor()},this.setClearColor=function(){rt.setClearColor.apply(rt,arguments)},this.getClearAlpha=function(){return rt.getClearAlpha()},this.setClearAlpha=function(){rt.setClearAlpha.apply(rt,arguments)},this.clear=function(t,e,n){let r=0;(void 0===t||t)&&(r|=16384),(void 0===e||e)&&(r|=256),(void 0===n||n)&&(r|=1024),lt.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",ft,!1),e.removeEventListener("webglcontextrestored",mt,!1),tt.dispose(),et.dispose(),W.dispose(),q.dispose(),J.dispose(),ct.dispose(),dt.dispose(),xt.stop()},this.renderBufferImmediate=function(t,e){ct.initAttributes();const n=W.get(t);t.hasPositions&&!n.position&&(n.position=lt.createBuffer()),t.hasNormals&&!n.normal&&(n.normal=lt.createBuffer()),t.hasUvs&&!n.uv&&(n.uv=lt.createBuffer()),t.hasColors&&!n.color&&(n.color=lt.createBuffer());const r=e.getAttributes();t.hasPositions&&(lt.bindBuffer(34962,n.position),lt.bufferData(34962,t.positionArray,35048),ct.enableAttribute(r.position),lt.vertexAttribPointer(r.position,3,5126,!1,0,0)),t.hasNormals&&(lt.bindBuffer(34962,n.normal),lt.bufferData(34962,t.normalArray,35048),ct.enableAttribute(r.normal),lt.vertexAttribPointer(r.normal,3,5126,!1,0,0)),t.hasUvs&&(lt.bindBuffer(34962,n.uv),lt.bufferData(34962,t.uvArray,35048),ct.enableAttribute(r.uv),lt.vertexAttribPointer(r.uv,2,5126,!1,0,0)),t.hasColors&&(lt.bindBuffer(34962,n.color),lt.bufferData(34962,t.colorArray,35048),ct.enableAttribute(r.color),lt.vertexAttribPointer(r.color,3,5126,!1,0,0)),ct.disableUnusedAttributes(),lt.drawArrays(4,0,t.count),t.count=0},this.renderBufferDirect=function(t,e,n,r,i,o){null===e&&(e=z);const a=i.isMesh&&i.matrixWorld.determinant()<0,s=Tt(t,e,r,i);V.setMaterial(r,a);let c=n.index;const l=n.attributes.position;if(null===c){if(void 0===l||0===l.count)return}else if(0===c.count)return;let u,h=1;!0===r.wireframe&&(c=Z.getWireframeAttribute(n),h=2),(r.morphTargets||r.morphNormals)&&it.update(i,n,r,s),ct.setup(i,r,s,n,c);let d=ot;null!==c&&(u=Y.get(c),d=at,d.setIndex(u));const p=null!==c?c.count:l.count,f=n.drawRange.start*h,m=n.drawRange.count*h,g=null!==o?o.start*h:0,v=null!==o?o.count*h:1/0,y=Math.max(f,g),x=Math.min(p,f+m,g+v)-1,b=Math.max(0,x-y+1);if(0!==b){if(i.isMesh)!0===r.wireframe?(V.setLineWidth(r.wireframeLinewidth*G()),d.setMode(1)):d.setMode(4);else if(i.isLine){let t=r.linewidth;void 0===t&&(t=1),V.setLineWidth(t*G()),i.isLineSegments?d.setMode(1):i.isLineLoop?d.setMode(2):d.setMode(3)}else i.isPoints?d.setMode(0):i.isSprite&&d.setMode(4);if(i.isInstancedMesh)d.renderInstances(y,b,i.count);else if(n.isInstancedBufferGeometry){const t=Math.min(n.instanceCount,n._maxInstanceCount);d.renderInstances(y,b,t)}else d.render(y,b)}},this.compile=function(t,e){d=et.get(t,e),d.init(),t.traverseVisible((function(t){t.isLight&&t.layers.test(e.layers)&&(d.pushLight(t),t.castShadow&&d.pushShadow(t))})),d.setupLights(e);const n=new WeakMap;t.traverse((function(e){const r=e.material;if(r)if(Array.isArray(r))for(let i=0;i<r.length;i++){const o=r[i];!1===n.has(o)&&(Mt(o,t,e),n.set(o))}else!1===n.has(r)&&(Mt(r,t,e),n.set(r))}))};let yt=null;const xt=new Ro;function bt(t,e,n,r){if(!1===t.visible)return;if(t.layers.test(e.layers))if(t.isGroup)n=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(e);else if(t.isLight)d.pushLight(t),t.castShadow&&d.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||N.intersectsSprite(t)){r&&U.setFromMatrixPosition(t.matrixWorld).applyMatrix4(F);const e=J.update(t),i=t.material;i.visible&&h.push(t,e,i,n,U.z,null)}}else if(t.isImmediateRenderObject)r&&U.setFromMatrixPosition(t.matrixWorld).applyMatrix4(F),h.push(t,null,t.material,n,U.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.frame!==j.render.frame&&(t.skeleton.update(),t.skeleton.frame=j.render.frame),!t.frustumCulled||N.intersectsObject(t))){r&&U.setFromMatrixPosition(t.matrixWorld).applyMatrix4(F);const e=J.update(t),i=t.material;if(Array.isArray(i)){const r=e.groups;for(let o=0,a=r.length;o<a;o++){const a=r[o],s=i[a.materialIndex];s&&s.visible&&h.push(t,e,s,n,U.z,a)}}else i.visible&&h.push(t,e,i,n,U.z,null)}const i=t.children;for(let t=0,o=i.length;t<o;t++)bt(i[t],e,n,r)}function wt(t,e,n){const r=!0===e.isScene?e.overrideMaterial:null;for(let i=0,o=t.length;i<o;i++){const o=t[i],a=o.object,s=o.geometry,c=null===r?o.material:r,l=o.group;if(n.isArrayCamera){_=n;const t=n.cameras;for(let n=0,r=t.length;n<r;n++){const r=t[n];a.layers.test(r.layers)&&(V.viewport(M.copy(r.viewport)),d.setupLights(r),_t(a,e,r,s,c,l))}}else _=null,_t(a,e,n,s,c,l)}}function _t(t,e,n,r,i,o){if(t.onBeforeRender(p,e,n,r,i,o),d=et.get(e,_||n),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),t.isImmediateRenderObject){const r=Tt(n,e,i,t);V.setMaterial(i),ct.reset(),function(t,e){t.render((function(t){p.renderBufferImmediate(t,e)}))}(t,r)}else p.renderBufferDirect(n,e,r,i,t,o);t.onAfterRender(p,e,n,r,i,o),d=et.get(e,_||n)}function Mt(t,e,n){!0!==e.isScene&&(e=z);const r=W.get(t),i=d.state.lights,o=d.state.shadowsArray,a=i.state.version,s=K.getParameters(t,i.state,o,e,n),c=K.getProgramCacheKey(s);let l=r.program,u=!0;if(void 0===l)t.addEventListener("dispose",gt);else if(l.cacheKey!==c)vt(t);else if(r.lightsStateVersion!==a)u=!1;else{if(void 0!==s.shaderID){const n=t.isMeshStandardMaterial?e.environment:null;return void(r.envMap=q.get(t.envMap||n))}u=!1}u&&(s.uniforms=K.getUniforms(t),t.onBeforeCompile(s,p),l=K.acquireProgram(s,c),r.program=l,r.uniforms=s.uniforms,r.outputEncoding=s.outputEncoding);const h=r.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(r.numClippingPlanes=nt.numPlanes,r.numIntersection=nt.numIntersection,h.clippingPlanes=nt.uniform),r.environment=t.isMeshStandardMaterial?e.environment:null,r.fog=e.fog,r.envMap=q.get(t.envMap||r.environment),r.needsLights=function(t){return t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}(t),r.lightsStateVersion=a,r.needsLights&&(h.ambientLightColor.value=i.state.ambient,h.lightProbe.value=i.state.probe,h.directionalLights.value=i.state.directional,h.directionalLightShadows.value=i.state.directionalShadow,h.spotLights.value=i.state.spot,h.spotLightShadows.value=i.state.spotShadow,h.rectAreaLights.value=i.state.rectArea,h.ltc_1.value=i.state.rectAreaLTC1,h.ltc_2.value=i.state.rectAreaLTC2,h.pointLights.value=i.state.point,h.pointLightShadows.value=i.state.pointShadow,h.hemisphereLights.value=i.state.hemi,h.directionalShadowMap.value=i.state.directionalShadowMap,h.directionalShadowMatrix.value=i.state.directionalShadowMatrix,h.spotShadowMap.value=i.state.spotShadowMap,h.spotShadowMatrix.value=i.state.spotShadowMatrix,h.pointShadowMap.value=i.state.pointShadowMap,h.pointShadowMatrix.value=i.state.pointShadowMatrix);const f=r.program.getUniforms(),m=Wa.seqWithValue(f.seq,h);r.uniformsList=m}function Tt(t,e,n,r){!0!==e.isScene&&(e=z),X.resetTextureUnits();const i=e.fog,o=n.isMeshStandardMaterial?e.environment:null,a=null===y?p.outputEncoding:y.texture.encoding,s=q.get(n.envMap||o),c=W.get(n),l=d.state.lights;if(!0===D&&(!0===B||t!==w)){const e=t===w&&n.id===b;nt.setState(n,t,e)}n.version===c.__version?n.fog&&c.fog!==i||c.environment!==o||c.needsLights&&c.lightsStateVersion!==l.state.version?Mt(n,e,r):void 0===c.numClippingPlanes||c.numClippingPlanes===nt.numPlanes&&c.numIntersection===nt.numIntersection?(c.outputEncoding!==a||c.envMap!==s)&&Mt(n,e,r):Mt(n,e,r):(Mt(n,e,r),c.__version=n.version);let u=!1,h=!1,f=!1;const m=c.program,g=m.getUniforms(),v=c.uniforms;if(V.useProgram(m.program)&&(u=!0,h=!0,f=!0),n.id!==b&&(b=n.id,h=!0),u||w!==t){if(g.setValue(lt,"projectionMatrix",t.projectionMatrix),k.logarithmicDepthBuffer&&g.setValue(lt,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),w!==t&&(w=t,h=!0,f=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshStandardMaterial||n.envMap){const e=g.map.cameraPosition;void 0!==e&&e.setValue(lt,U.setFromMatrixPosition(t.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&g.setValue(lt,"isOrthographic",!0===t.isOrthographicCamera),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.isShadowMaterial||n.skinning)&&g.setValue(lt,"viewMatrix",t.matrixWorldInverse)}if(n.skinning){g.setOptional(lt,r,"bindMatrix"),g.setOptional(lt,r,"bindMatrixInverse");const t=r.skeleton;if(t){const e=t.bones;if(k.floatVertexTextures){if(null===t.boneTexture){let n=Math.sqrt(4*e.length);n=zn.ceilPowerOfTwo(n),n=Math.max(n,4);const r=new Float32Array(n*n*4);r.set(t.boneMatrices);const i=new To(r,n,n,Ut,Pt);t.boneMatrices=r,t.boneTexture=i,t.boneTextureSize=n}g.setValue(lt,"boneTexture",t.boneTexture,X),g.setValue(lt,"boneTextureSize",t.boneTextureSize)}else g.setOptional(lt,t,"boneMatrices")}}var x,_;return(h||c.receiveShadow!==r.receiveShadow)&&(c.receiveShadow=r.receiveShadow,g.setValue(lt,"receiveShadow",r.receiveShadow)),h&&(g.setValue(lt,"toneMappingExposure",p.toneMappingExposure),c.needsLights&&(_=f,(x=v).ambientLightColor.needsUpdate=_,x.lightProbe.needsUpdate=_,x.directionalLights.needsUpdate=_,x.directionalLightShadows.needsUpdate=_,x.pointLights.needsUpdate=_,x.pointLightShadows.needsUpdate=_,x.spotLights.needsUpdate=_,x.spotLightShadows.needsUpdate=_,x.rectAreaLights.needsUpdate=_,x.hemisphereLights.needsUpdate=_),i&&n.fog&&$.refreshFogUniforms(v,i),$.refreshMaterialUniforms(v,n,L,A),Wa.upload(lt,c.uniformsList,v,X)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(Wa.upload(lt,c.uniformsList,v,X),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&g.setValue(lt,"center",r.center),g.setValue(lt,"modelViewMatrix",r.modelViewMatrix),g.setValue(lt,"normalMatrix",r.normalMatrix),g.setValue(lt,"modelMatrix",r.matrixWorld),m}xt.setAnimationLoop((function(t){dt.isPresenting||yt&&yt(t)})),"undefined"!=typeof window&&xt.setContext(window),this.setAnimationLoop=function(t){yt=t,dt.setAnimationLoop(t),null===t?xt.stop():xt.start()},this.render=function(t,e){let n,r;if(void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),n=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),r=arguments[3]),void 0!==e&&!0!==e.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===f)return;ct.resetDefaultState(),b=-1,w=null,!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),!0===dt.enabled&&!0===dt.isPresenting&&(e=dt.getCamera(e)),!0===t.isScene&&t.onBeforeRender(p,t,e,n||y),d=et.get(t,e),d.init(),F.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),N.setFromProjectionMatrix(F),B=this.localClippingEnabled,D=nt.init(this.clippingPlanes,B,e),h=tt.get(t,e),h.init(),bt(t,e,0,p.sortObjects),h.finish(),!0===p.sortObjects&&h.sort(R,P),!0===D&&nt.beginShadows();const i=d.state.shadowsArray;pt.render(i,t,e),d.setupLights(e),!0===D&&nt.endShadows(),!0===this.info.autoReset&&this.info.reset(),void 0!==n&&this.setRenderTarget(n),rt.render(h,t,e,r);const o=h.opaque,a=h.transparent;o.length>0&&wt(o,t,e),a.length>0&&wt(a,t,e),!0===t.isScene&&t.onAfterRender(p,t,e),null!==y&&(X.updateRenderTargetMipmap(y),X.updateMultisampleRenderTarget(y)),V.buffers.depth.setTest(!0),V.buffers.depth.setMask(!0),V.buffers.color.setMask(!0),V.setPolygonOffset(!1),h=null,d=null},this.setFramebuffer=function(t){m!==t&&null===y&&lt.bindFramebuffer(36160,t),m=t},this.getActiveCubeFace=function(){return g},this.getActiveMipmapLevel=function(){return v},this.getRenderList=function(){return h},this.setRenderList=function(t){h=t},this.getRenderState=function(){return d},this.setRenderState=function(t){d=t},this.getRenderTarget=function(){return y},this.setRenderTarget=function(t,e=0,n=0){y=t,g=e,v=n,t&&void 0===W.get(t).__webglFramebuffer&&X.setupRenderTarget(t);let r=m,i=!1;if(t){const n=W.get(t).__webglFramebuffer;t.isWebGLCubeRenderTarget?(r=n[e],i=!0):r=t.isWebGLMultisampleRenderTarget?W.get(t).__webglMultisampledFramebuffer:n,M.copy(t.viewport),S.copy(t.scissor),T=t.scissorTest}else M.copy(C).multiplyScalar(L).floor(),S.copy(I).multiplyScalar(L).floor(),T=O;if(x!==r&&(lt.bindFramebuffer(36160,r),x=r),V.viewport(M),V.scissor(S),V.setScissorTest(T),i){const r=W.get(t.texture);lt.framebufferTexture2D(36160,36064,34069+e,r.__webglTexture,n)}},this.readRenderTargetPixels=function(t,e,n,r,i,o,a){if(!t||!t.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let s=W.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==a&&(s=s[a]),s){let a=!1;s!==x&&(lt.bindFramebuffer(36160,s),a=!0);try{const s=t.texture,c=s.format,l=s.type;if(c!==Ut&&st.convert(c)!==lt.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(l===St||st.convert(l)===lt.getParameter(35738)||l===Pt&&(k.isWebGL2||H.get("OES_texture_float")||H.get("WEBGL_color_buffer_float"))||l===Ct&&(k.isWebGL2?H.get("EXT_color_buffer_float"):H.get("EXT_color_buffer_half_float"))))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===lt.checkFramebufferStatus(36160)?e>=0&&e<=t.width-r&&n>=0&&n<=t.height-i&&lt.readPixels(e,n,r,i,st.convert(c),st.convert(l),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{a&&lt.bindFramebuffer(36160,x)}}},this.copyFramebufferToTexture=function(t,e,n=0){const r=Math.pow(2,-n),i=Math.floor(e.image.width*r),o=Math.floor(e.image.height*r),a=st.convert(e.format);X.setTexture2D(e,0),lt.copyTexImage2D(3553,n,a,t.x,t.y,i,o,0),V.unbindTexture()},this.copyTextureToTexture=function(t,e,n,r=0){const i=e.image.width,o=e.image.height,a=st.convert(n.format),s=st.convert(n.type);X.setTexture2D(n,0),lt.pixelStorei(37440,n.flipY),lt.pixelStorei(37441,n.premultiplyAlpha),lt.pixelStorei(3317,n.unpackAlignment),e.isDataTexture?lt.texSubImage2D(3553,r,t.x,t.y,i,o,a,s,e.image.data):e.isCompressedTexture?lt.compressedTexSubImage2D(3553,r,t.x,t.y,e.mipmaps[0].width,e.mipmaps[0].height,a,e.mipmaps[0].data):lt.texSubImage2D(3553,r,t.x,t.y,a,s,e.image),0===r&&n.generateMipmaps&&lt.generateMipmap(3553),V.unbindTexture()},this.initTexture=function(t){X.setTexture2D(t,0),V.unbindTexture()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function Bs(t){Ds.call(this,t)}Ps.prototype=Object.assign(Object.create(wo.prototype),{constructor:Ps,isArrayCamera:!0}),Cs.prototype=Object.assign(Object.create(Jr.prototype),{constructor:Cs,isGroup:!0}),Object.assign(Is.prototype,{constructor:Is,getHandSpace:function(){if(null===this._hand&&(this._hand=new Cs,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints=[],this._hand.inputState={pinching:!1},window.XRHand))for(let t=0;t<=window.XRHand.LITTLE_PHALANX_TIP;t++){const t=new Cs;t.matrixAutoUpdate=!1,t.visible=!1,this._hand.joints.push(t),this._hand.add(t)}return this._hand},getTargetRaySpace:function(){return null===this._targetRay&&(this._targetRay=new Cs,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return null===this._grip&&(this._grip=new Cs,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this},disconnect:function(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this},update:function(t,e,n){let r=null,i=null,o=null;const a=this._targetRay,s=this._grip,c=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState)if(c&&t.hand){o=!0;for(let r=0;r<=window.XRHand.LITTLE_PHALANX_TIP;r++)if(t.hand[r]){const i=e.getJointPose(t.hand[r],n),o=c.joints[r];null!==i&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.jointRadius=i.radius),o.visible=null!==i;const a=c.joints[window.XRHand.INDEX_PHALANX_TIP],s=c.joints[window.XRHand.THUMB_PHALANX_TIP],l=a.position.distanceTo(s.position),u=.02,h=.005;c.inputState.pinching&&l>u+h?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!c.inputState.pinching&&l<=u-h&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}}else null!==a&&(r=e.getPose(t.targetRaySpace,n),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale))),null!==s&&t.gripSpace&&(i=e.getPose(t.gripSpace,n),null!==i&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale)));return null!==a&&(a.visible=null!==r),null!==s&&(s.visible=null!==i),null!==c&&(c.visible=null!==o),this}}),Object.assign(Os.prototype,Bn.prototype),Bs.prototype=Object.assign(Object.create(Ds.prototype),{constructor:Bs,isWebGL1Renderer:!0});class Fs{constructor(t,e){Object.defineProperty(this,"isFogExp2",{value:!0}),this.name="",this.color=new yi(t),this.density=void 0!==e?e:25e-5}clone(){return new Fs(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class Us{constructor(t,e,n){Object.defineProperty(this,"isFog",{value:!0}),this.name="",this.color=new yi(t),this.near=void 0!==e?e:1,this.far=void 0!==n?n:1e3}clone(){return new Us(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class zs extends Jr{constructor(){super(),Object.defineProperty(this,"isScene",{value:!0}),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.environment&&(e.object.environment=this.environment.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e}}function Gs(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=Tn,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=zn.generateUUID()}Object.defineProperty(Gs.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(Gs.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this},copyAt:function(t,e,n){t*=this.stride,n*=e.stride;for(let r=0,i=this.stride;r<i;r++)this.array[t+r]=e.array[n+r];return this},set:function(t,e=0){return this.array.set(t,e),this},clone:function(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=zn.generateUUID()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new Gs(new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),this.stride);return e.setUsage(this.usage),e},onUpload:function(t){return this.onUploadCallback=t,this},toJSON:function(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=zn.generateUUID()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}});const Hs=new Kn;function ks(t,e,n,r){this.name="",this.data=t,this.itemSize=e,this.offset=n,this.normalized=!0===r}function Vs(t){wi.call(this),this.type="SpriteMaterial",this.color=new yi(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(t)}let js;Object.defineProperties(ks.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}},needsUpdate:{set:function(t){this.data.needsUpdate=t}}}),Object.assign(ks.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(t){for(let e=0,n=this.data.count;e<n;e++)Hs.x=this.getX(e),Hs.y=this.getY(e),Hs.z=this.getZ(e),Hs.applyMatrix4(t),this.setXYZ(e,Hs.x,Hs.y,Hs.z);return this},setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this},setXYZ:function(t,e,n,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this},setXYZW:function(t,e,n,r,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this.data.array[t+3]=i,this},clone:function(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let e=0;e<this.count;e++){const n=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[n+e])}return new Ti(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new ks(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)},toJSON:function(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let e=0;e<this.count;e++){const n=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[n+e])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}),Vs.prototype=Object.create(wi.prototype),Vs.prototype.constructor=Vs,Vs.prototype.isSpriteMaterial=!0,Vs.prototype.copy=function(t){return wi.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this};const Ws=new Kn,Xs=new Kn,qs=new Kn,Ys=new Gn,Zs=new Gn,Js=new Tr,Ks=new Kn,Qs=new Kn,$s=new Kn,tc=new Gn,ec=new Gn,nc=new Gn;function rc(t){if(Jr.call(this),this.type="Sprite",void 0===js){js=new qi;const t=new Gs(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);js.setIndex([0,1,2,0,2,3]),js.setAttribute("position",new ks(t,3,0,!1)),js.setAttribute("uv",new ks(t,2,3,!1))}this.geometry=js,this.material=void 0!==t?t:new Vs,this.center=new Gn(.5,.5)}function ic(t,e,n,r,i,o){Ys.subVectors(t,n).addScalar(.5).multiply(r),void 0!==i?(Zs.x=o*Ys.x-i*Ys.y,Zs.y=i*Ys.x+o*Ys.y):Zs.copy(Ys),t.copy(e),t.x+=Zs.x,t.y+=Zs.y,t.applyMatrix4(Js)}rc.prototype=Object.assign(Object.create(Jr.prototype),{constructor:rc,isSprite:!0,raycast:function(t,e){null===t.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Xs.setFromMatrixScale(this.matrixWorld),Js.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),qs.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Xs.multiplyScalar(-qs.z);const n=this.material.rotation;let r,i;0!==n&&(i=Math.cos(n),r=Math.sin(n));const o=this.center;ic(Ks.set(-.5,-.5,0),qs,o,Xs,r,i),ic(Qs.set(.5,-.5,0),qs,o,Xs,r,i),ic($s.set(.5,.5,0),qs,o,Xs,r,i),tc.set(0,0),ec.set(1,0),nc.set(1,1);let a=t.ray.intersectTriangle(Ks,Qs,$s,!1,Ws);if(null===a&&(ic(Qs.set(-.5,.5,0),qs,o,Xs,r,i),ec.set(0,1),a=t.ray.intersectTriangle(Ks,$s,Qs,!1,Ws),null===a))return;const s=t.ray.origin.distanceTo(Ws);s<t.near||s>t.far||e.push({distance:s,point:Ws.clone(),uv:hi.getUV(Ws,Ks,Qs,$s,tc,ec,nc,new Gn),face:null,object:this})},copy:function(t){return Jr.prototype.copy.call(this,t),void 0!==t.center&&this.center.copy(t.center),this.material=t.material,this}});const oc=new Kn,ac=new Kn;function sc(){Jr.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}function cc(t,e){t&&t.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),ho.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Tr,this.bindMatrixInverse=new Tr}function lc(){Jr.call(this),this.type="Bone"}sc.prototype=Object.assign(Object.create(Jr.prototype),{constructor:sc,isLOD:!0,copy:function(t){Jr.prototype.copy.call(this,t,!1);const e=t.levels;for(let t=0,n=e.length;t<n;t++){const n=e[t];this.addLevel(n.object.clone(),n.distance)}return this.autoUpdate=t.autoUpdate,this},addLevel:function(t,e=0){e=Math.abs(e);const n=this.levels;let r;for(r=0;r<n.length&&!(e<n[r].distance);r++);return n.splice(r,0,{distance:e,object:t}),this.add(t),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(t){const e=this.levels;if(e.length>0){let n,r;for(n=1,r=e.length;n<r&&!(t<e[n].distance);n++);return e[n-1].object}return null},raycast:function(t,e){if(this.levels.length>0){oc.setFromMatrixPosition(this.matrixWorld);const n=t.ray.origin.distanceTo(oc);this.getObjectForDistance(n).raycast(t,e)}},update:function(t){const e=this.levels;if(e.length>1){oc.setFromMatrixPosition(t.matrixWorld),ac.setFromMatrixPosition(this.matrixWorld);const n=oc.distanceTo(ac)/t.zoom;let r,i;for(e[0].object.visible=!0,r=1,i=e.length;r<i&&n>=e[r].distance;r++)e[r-1].object.visible=!1,e[r].object.visible=!0;for(this._currentLevel=r-1;r<i;r++)e[r].object.visible=!1}},toJSON:function(t){const e=Jr.prototype.toJSON.call(this,t);!1===this.autoUpdate&&(e.object.autoUpdate=!1),e.object.levels=[];const n=this.levels;for(let t=0,r=n.length;t<r;t++){const r=n[t];e.object.levels.push({object:r.object.uuid,distance:r.distance})}return e}}),cc.prototype=Object.assign(Object.create(ho.prototype),{constructor:cc,isSkinnedMesh:!0,copy:function(t){return ho.prototype.copy.call(this,t),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,this},bind:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){const t=new qn,e=this.geometry.attributes.skinWeight;for(let n=0,r=e.count;n<r;n++){t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.w=e.getW(n);const r=1/t.manhattanLength();r!==1/0?t.multiplyScalar(r):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}},updateMatrixWorld:function(t){ho.prototype.updateMatrixWorld.call(this,t),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},boneTransform:function(){const t=new Kn,e=new qn,n=new qn,r=new Kn,i=new Tr;return function(o,a){const s=this.skeleton,c=this.geometry;e.fromBufferAttribute(c.attributes.skinIndex,o),n.fromBufferAttribute(c.attributes.skinWeight,o),t.fromBufferAttribute(c.attributes.position,o).applyMatrix4(this.bindMatrix),a.set(0,0,0);for(let o=0;o<4;o++){const c=n.getComponent(o);if(0!==c){const n=e.getComponent(o);i.multiplyMatrices(s.bones[n].matrixWorld,s.boneInverses[n]),a.addScaledVector(r.copy(t).applyMatrix4(i),c)}}return a.applyMatrix4(this.bindMatrixInverse)}}()}),lc.prototype=Object.assign(Object.create(Jr.prototype),{constructor:lc,isBone:!0});const uc=new Tr,hc=new Tr;function dc(t=[],e=[]){this.uuid=zn.generateUUID(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}Object.assign(dc.prototype,{init:function(){const t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(16*t.length),0===e.length)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let t=0,e=this.bones.length;t<e;t++)this.boneInverses.push(new Tr)}},calculateInverses:function(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){const e=new Tr;this.bones[t]&&e.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(e)}},pose:function(){for(let t=0,e=this.bones.length;t<e;t++){const e=this.bones[t];e&&e.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){const e=this.bones[t];e&&(e.parent&&e.parent.isBone?(e.matrix.copy(e.parent.matrixWorld).invert(),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))}},update:function(){const t=this.bones,e=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let r=0,i=t.length;r<i;r++){const i=t[r]?t[r].matrixWorld:hc;uc.multiplyMatrices(i,e[r]),uc.toArray(n,16*r)}null!==r&&(r.needsUpdate=!0)},clone:function(){return new dc(this.bones,this.boneInverses)},getBoneByName:function(t){for(let e=0,n=this.bones.length;e<n;e++){const n=this.bones[e];if(n.name===t)return n}},dispose:function(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)},fromJSON:function(t,e){this.uuid=t.uuid;for(let n=0,r=t.bones.length;n<r;n++){const r=t.bones[n];let i=e[r];void 0===i&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),i=new lc),this.bones.push(i),this.boneInverses.push((new Tr).fromArray(t.boneInverses[n]))}return this.init(),this},toJSON:function(){const t={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const e=this.bones,n=this.boneInverses;for(let r=0,i=e.length;r<i;r++){const i=e[r];t.bones.push(i.uuid);const o=n[r];t.boneInverses.push(o.toArray())}return t}});const pc=new Tr,fc=new Tr,mc=[],gc=new ho;function vc(t,e,n){ho.call(this,t,e),this.instanceMatrix=new Ti(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1}function yc(t){wi.call(this),this.type="LineBasicMaterial",this.color=new yi(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(t)}vc.prototype=Object.assign(Object.create(ho.prototype),{constructor:vc,isInstancedMesh:!0,copy:function(t){return ho.prototype.copy.call(this,t),this.instanceMatrix.copy(t.instanceMatrix),this.count=t.count,this},getColorAt:function(t,e){e.fromArray(this.instanceColor.array,3*t)},getMatrixAt:function(t,e){e.fromArray(this.instanceMatrix.array,16*t)},raycast:function(t,e){const n=this.matrixWorld,r=this.count;if(gc.geometry=this.geometry,gc.material=this.material,void 0!==gc.material)for(let i=0;i<r;i++){this.getMatrixAt(i,pc),fc.multiplyMatrices(n,pc),gc.matrixWorld=fc,gc.raycast(t,mc);for(let t=0,n=mc.length;t<n;t++){const n=mc[t];n.instanceId=i,n.object=this,e.push(n)}mc.length=0}},setColorAt:function(t,e){null===this.instanceColor&&(this.instanceColor=new Ti(new Float32Array(3*this.count),3)),e.toArray(this.instanceColor.array,3*t)},setMatrixAt:function(t,e){e.toArray(this.instanceMatrix.array,16*t)},updateMorphTargets:function(){}}),yc.prototype=Object.create(wi.prototype),yc.prototype.constructor=yc,yc.prototype.isLineBasicMaterial=!0,yc.prototype.copy=function(t){return wi.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.morphTargets=t.morphTargets,this};const xc=new Kn,bc=new Kn,wc=new Tr,_c=new Sr,Mc=new gr;function Sc(t,e,n){1===n&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),Jr.call(this),this.type="Line",this.geometry=void 0!==t?t:new qi,this.material=void 0!==e?e:new yc,this.updateMorphTargets()}Sc.prototype=Object.assign(Object.create(Jr.prototype),{constructor:Sc,isLine:!0,copy:function(t){return Jr.prototype.copy.call(this,t),this.material=t.material,this.geometry=t.geometry,this},computeLineDistances:function(){const t=this.geometry;if(t.isBufferGeometry)if(null===t.index){const e=t.attributes.position,n=[0];for(let t=1,r=e.count;t<r;t++)xc.fromBufferAttribute(e,t-1),bc.fromBufferAttribute(e,t),n[t]=n[t-1],n[t]+=xc.distanceTo(bc);t.setAttribute("lineDistance",new Ni(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry){const e=t.vertices,n=t.lineDistances;n[0]=0;for(let t=1,r=e.length;t<r;t++)n[t]=n[t-1],n[t]+=e[t-1].distanceTo(e[t])}return this},raycast:function(t,e){const n=this.geometry,r=this.matrixWorld,i=t.params.Line.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),Mc.copy(n.boundingSphere),Mc.applyMatrix4(r),Mc.radius+=i,!1===t.ray.intersectsSphere(Mc))return;wc.copy(r).invert(),_c.copy(t.ray).applyMatrix4(wc);const o=i/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o,s=new Kn,c=new Kn,l=new Kn,u=new Kn,h=this.isLineSegments?2:1;if(n.isBufferGeometry){const r=n.index,i=n.attributes.position;if(null!==r){const n=r.array;for(let r=0,o=n.length-1;r<o;r+=h){const o=n[r],h=n[r+1];s.fromBufferAttribute(i,o),c.fromBufferAttribute(i,h);if(_c.distanceSqToSegment(s,c,u,l)>a)continue;u.applyMatrix4(this.matrixWorld);const d=t.ray.origin.distanceTo(u);d<t.near||d>t.far||e.push({distance:d,point:l.clone().applyMatrix4(this.matrixWorld),index:r,face:null,faceIndex:null,object:this})}}else for(let n=0,r=i.count-1;n<r;n+=h){s.fromBufferAttribute(i,n),c.fromBufferAttribute(i,n+1);if(_c.distanceSqToSegment(s,c,u,l)>a)continue;u.applyMatrix4(this.matrixWorld);const r=t.ray.origin.distanceTo(u);r<t.near||r>t.far||e.push({distance:r,point:l.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}else if(n.isGeometry){const r=n.vertices,i=r.length;for(let n=0;n<i-1;n+=h){if(_c.distanceSqToSegment(r[n],r[n+1],u,l)>a)continue;u.applyMatrix4(this.matrixWorld);const i=t.ray.origin.distanceTo(u);i<t.near||i>t.far||e.push({distance:i,point:l.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}},updateMorphTargets:function(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const t=e[n[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,n=t.length;e<n;e++){const n=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}}}else{const e=t.morphTargets;void 0!==e&&e.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});const Tc=new Kn,Ec=new Kn;function Ac(t,e){Sc.call(this,t,e),this.type="LineSegments"}function Lc(t,e){Sc.call(this,t,e),this.type="LineLoop"}function Rc(t){wi.call(this),this.type="PointsMaterial",this.color=new yi(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(t)}Ac.prototype=Object.assign(Object.create(Sc.prototype),{constructor:Ac,isLineSegments:!0,computeLineDistances:function(){const t=this.geometry;if(t.isBufferGeometry)if(null===t.index){const e=t.attributes.position,n=[];for(let t=0,r=e.count;t<r;t+=2)Tc.fromBufferAttribute(e,t),Ec.fromBufferAttribute(e,t+1),n[t]=0===t?0:n[t-1],n[t+1]=n[t]+Tc.distanceTo(Ec);t.setAttribute("lineDistance",new Ni(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry){const e=t.vertices,n=t.lineDistances;for(let t=0,r=e.length;t<r;t+=2)Tc.copy(e[t]),Ec.copy(e[t+1]),n[t]=0===t?0:n[t-1],n[t+1]=n[t]+Tc.distanceTo(Ec)}return this}}),Lc.prototype=Object.assign(Object.create(Sc.prototype),{constructor:Lc,isLineLoop:!0}),Rc.prototype=Object.create(wi.prototype),Rc.prototype.constructor=Rc,Rc.prototype.isPointsMaterial=!0,Rc.prototype.copy=function(t){return wi.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.morphTargets=t.morphTargets,this};const Pc=new Tr,Cc=new Sr,Ic=new gr,Oc=new Kn;function Nc(t,e){Jr.call(this),this.type="Points",this.geometry=void 0!==t?t:new qi,this.material=void 0!==e?e:new Rc,this.updateMorphTargets()}function Dc(t,e,n,r,i,o,a){const s=Cc.distanceSqToPoint(t);if(s<n){const n=new Kn;Cc.closestPointToPoint(t,n),n.applyMatrix4(r);const c=i.ray.origin.distanceTo(n);if(c<i.near||c>i.far)return;o.push({distance:c,distanceToRay:Math.sqrt(s),point:n,index:e,face:null,object:a})}}function Bc(t,e,n,r,i,o,a,s,c){Wn.call(this,t,e,n,r,i,o,a,s,c),this.format=void 0!==a?a:Ft,this.minFilter=void 0!==o?o:xt,this.magFilter=void 0!==i?i:xt,this.generateMipmaps=!1;const l=this;"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback((function e(){l.needsUpdate=!0,t.requestVideoFrameCallback(e)}))}function Fc(t,e,n,r,i,o,a,s,c,l,u,h){Wn.call(this,null,o,a,s,c,l,r,i,u,h),this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}function Uc(t,e,n,r,i,o,a,s,c){Wn.call(this,t,e,n,r,i,o,a,s,c),this.needsUpdate=!0}function zc(t,e,n,r,i,o,a,s,c,l){if((l=void 0!==l?l:kt)!==kt&&l!==Vt)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&l===kt&&(n=At),void 0===n&&l===Vt&&(n=Dt),Wn.call(this,null,r,i,o,a,s,l,n,c),this.image={width:t,height:e},this.magFilter=void 0!==a?a:ft,this.minFilter=void 0!==s?s:ft,this.flipY=!1,this.generateMipmaps=!1}Nc.prototype=Object.assign(Object.create(Jr.prototype),{constructor:Nc,isPoints:!0,copy:function(t){return Jr.prototype.copy.call(this,t),this.material=t.material,this.geometry=t.geometry,this},raycast:function(t,e){const n=this.geometry,r=this.matrixWorld,i=t.params.Points.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),Ic.copy(n.boundingSphere),Ic.applyMatrix4(r),Ic.radius+=i,!1===t.ray.intersectsSphere(Ic))return;Pc.copy(r).invert(),Cc.copy(t.ray).applyMatrix4(Pc);const o=i/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o;if(n.isBufferGeometry){const i=n.index,o=n.attributes.position;if(null!==i){const n=i.array;for(let i=0,s=n.length;i<s;i++){const s=n[i];Oc.fromBufferAttribute(o,s),Dc(Oc,s,a,r,t,e,this)}}else for(let n=0,i=o.count;n<i;n++)Oc.fromBufferAttribute(o,n),Dc(Oc,n,a,r,t,e,this)}else{const i=n.vertices;for(let n=0,o=i.length;n<o;n++)Dc(i[n],n,a,r,t,e,this)}},updateMorphTargets:function(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const t=e[n[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,n=t.length;e<n;e++){const n=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}}}else{const e=t.morphTargets;void 0!==e&&e.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}),Bc.prototype=Object.assign(Object.create(Wn.prototype),{constructor:Bc,clone:function(){return new this.constructor(this.image).copy(this)},isVideoTexture:!0,update:function(){const t=this.image;!1==="requestVideoFrameCallback"in t&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),Fc.prototype=Object.create(Wn.prototype),Fc.prototype.constructor=Fc,Fc.prototype.isCompressedTexture=!0,Uc.prototype=Object.create(Wn.prototype),Uc.prototype.constructor=Uc,Uc.prototype.isCanvasTexture=!0,zc.prototype=Object.create(Wn.prototype),zc.prototype.constructor=zc,zc.prototype.isDepthTexture=!0;let Gc=0;const Hc=new Tr,kc=new Jr,Vc=new Kn;function jc(){Object.defineProperty(this,"id",{value:Gc+=2}),this.uuid=zn.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}jc.prototype=Object.assign(Object.create(Bn.prototype),{constructor:jc,isGeometry:!0,applyMatrix4:function(t){const e=(new Hn).getNormalMatrix(t);for(let e=0,n=this.vertices.length;e<n;e++){this.vertices[e].applyMatrix4(t)}for(let t=0,n=this.faces.length;t<n;t++){const n=this.faces[t];n.normal.applyMatrix3(e).normalize();for(let t=0,r=n.vertexNormals.length;t<r;t++)n.vertexNormals[t].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(t){return Hc.makeRotationX(t),this.applyMatrix4(Hc),this},rotateY:function(t){return Hc.makeRotationY(t),this.applyMatrix4(Hc),this},rotateZ:function(t){return Hc.makeRotationZ(t),this.applyMatrix4(Hc),this},translate:function(t,e,n){return Hc.makeTranslation(t,e,n),this.applyMatrix4(Hc),this},scale:function(t,e,n){return Hc.makeScale(t,e,n),this.applyMatrix4(Hc),this},lookAt:function(t){return kc.lookAt(t),kc.updateMatrix(),this.applyMatrix4(kc.matrix),this},fromBufferGeometry:function(t){const e=this,n=null!==t.index?t.index:void 0,r=t.attributes;if(void 0===r.position)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;const i=r.position,o=r.normal,a=r.color,s=r.uv,c=r.uv2;void 0!==c&&(this.faceVertexUvs[1]=[]);for(let t=0;t<i.count;t++)e.vertices.push((new Kn).fromBufferAttribute(i,t)),void 0!==a&&e.colors.push((new yi).fromBufferAttribute(a,t));function l(t,n,r,i){const l=void 0===a?[]:[e.colors[t].clone(),e.colors[n].clone(),e.colors[r].clone()],u=void 0===o?[]:[(new Kn).fromBufferAttribute(o,t),(new Kn).fromBufferAttribute(o,n),(new Kn).fromBufferAttribute(o,r)],h=new xi(t,n,r,u,l,i);e.faces.push(h),void 0!==s&&e.faceVertexUvs[0].push([(new Gn).fromBufferAttribute(s,t),(new Gn).fromBufferAttribute(s,n),(new Gn).fromBufferAttribute(s,r)]),void 0!==c&&e.faceVertexUvs[1].push([(new Gn).fromBufferAttribute(c,t),(new Gn).fromBufferAttribute(c,n),(new Gn).fromBufferAttribute(c,r)])}const u=t.groups;if(u.length>0)for(let t=0;t<u.length;t++){const e=u[t],r=e.start;for(let t=r,i=r+e.count;t<i;t+=3)void 0!==n?l(n.getX(t),n.getX(t+1),n.getX(t+2),e.materialIndex):l(t,t+1,t+2,e.materialIndex)}else if(void 0!==n)for(let t=0;t<n.count;t+=3)l(n.getX(t),n.getX(t+1),n.getX(t+2));else for(let t=0;t<i.count;t+=3)l(t,t+1,t+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Vc).negate(),this.translate(Vc.x,Vc.y,Vc.z),this},normalize:function(){this.computeBoundingSphere();const t=this.boundingSphere.center,e=this.boundingSphere.radius,n=0===e?1:1/e,r=new Tr;return r.set(n,0,0,-n*t.x,0,n,0,-n*t.y,0,0,n,-n*t.z,0,0,0,1),this.applyMatrix4(r),this},computeFaceNormals:function(){const t=new Kn,e=new Kn;for(let n=0,r=this.faces.length;n<r;n++){const r=this.faces[n],i=this.vertices[r.a],o=this.vertices[r.b],a=this.vertices[r.c];t.subVectors(a,o),e.subVectors(i,o),t.cross(e),t.normalize(),r.normal.copy(t)}},computeVertexNormals:function(t=!0){const e=new Array(this.vertices.length);for(let t=0,n=this.vertices.length;t<n;t++)e[t]=new Kn;if(t){const t=new Kn,n=new Kn;for(let r=0,i=this.faces.length;r<i;r++){const i=this.faces[r],o=this.vertices[i.a],a=this.vertices[i.b],s=this.vertices[i.c];t.subVectors(s,a),n.subVectors(o,a),t.cross(n),e[i.a].add(t),e[i.b].add(t),e[i.c].add(t)}}else{this.computeFaceNormals();for(let t=0,n=this.faces.length;t<n;t++){const n=this.faces[t];e[n.a].add(n.normal),e[n.b].add(n.normal),e[n.c].add(n.normal)}}for(let t=0,n=this.vertices.length;t<n;t++)e[t].normalize();for(let t=0,n=this.faces.length;t<n;t++){const n=this.faces[t],r=n.vertexNormals;3===r.length?(r[0].copy(e[n.a]),r[1].copy(e[n.b]),r[2].copy(e[n.c])):(r[0]=e[n.a].clone(),r[1]=e[n.b].clone(),r[2]=e[n.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){this.computeFaceNormals();for(let t=0,e=this.faces.length;t<e;t++){const e=this.faces[t],n=e.vertexNormals;3===n.length?(n[0].copy(e.normal),n[1].copy(e.normal),n[2].copy(e.normal)):(n[0]=e.normal.clone(),n[1]=e.normal.clone(),n[2]=e.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){for(let t=0,e=this.faces.length;t<e;t++){const e=this.faces[t];e.__originalFaceNormal?e.__originalFaceNormal.copy(e.normal):e.__originalFaceNormal=e.normal.clone(),e.__originalVertexNormals||(e.__originalVertexNormals=[]);for(let t=0,n=e.vertexNormals.length;t<n;t++)e.__originalVertexNormals[t]?e.__originalVertexNormals[t].copy(e.vertexNormals[t]):e.__originalVertexNormals[t]=e.vertexNormals[t].clone()}const t=new jc;t.faces=this.faces;for(let e=0,n=this.morphTargets.length;e<n;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];const t=this.morphNormals[e].faceNormals,n=this.morphNormals[e].vertexNormals;for(let e=0,r=this.faces.length;e<r;e++){const e=new Kn,r={a:new Kn,b:new Kn,c:new Kn};t.push(e),n.push(r)}}const n=this.morphNormals[e];t.vertices=this.morphTargets[e].vertices,t.computeFaceNormals(),t.computeVertexNormals();for(let t=0,e=this.faces.length;t<e;t++){const e=this.faces[t],r=n.faceNormals[t],i=n.vertexNormals[t];r.copy(e.normal),i.a.copy(e.vertexNormals[0]),i.b.copy(e.vertexNormals[1]),i.c.copy(e.vertexNormals[2])}}for(let t=0,e=this.faces.length;t<e;t++){const e=this.faces[t];e.normal=e.__originalFaceNormal,e.vertexNormals=e.__originalVertexNormals}},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new tr),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new gr),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,n=0){if(!t||!t.isGeometry)return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t);let r;const i=this.vertices.length,o=this.vertices,a=t.vertices,s=this.faces,c=t.faces,l=this.colors,u=t.colors;void 0!==e&&(r=(new Hn).getNormalMatrix(e));for(let t=0,n=a.length;t<n;t++){const n=a[t].clone();void 0!==e&&n.applyMatrix4(e),o.push(n)}for(let t=0,e=u.length;t<e;t++)l.push(u[t].clone());for(let t=0,e=c.length;t<e;t++){const e=c[t];let o,a;const l=e.vertexNormals,u=e.vertexColors,h=new xi(e.a+i,e.b+i,e.c+i);h.normal.copy(e.normal),void 0!==r&&h.normal.applyMatrix3(r).normalize();for(let t=0,e=l.length;t<e;t++)o=l[t].clone(),void 0!==r&&o.applyMatrix3(r).normalize(),h.vertexNormals.push(o);h.color.copy(e.color);for(let t=0,e=u.length;t<e;t++)a=u[t],h.vertexColors.push(a.clone());h.materialIndex=e.materialIndex+n,s.push(h)}for(let e=0,n=t.faceVertexUvs.length;e<n;e++){const n=t.faceVertexUvs[e];void 0===this.faceVertexUvs[e]&&(this.faceVertexUvs[e]=[]);for(let t=0,r=n.length;t<r;t++){const r=n[t],i=[];for(let t=0,e=r.length;t<e;t++)i.push(r[t].clone());this.faceVertexUvs[e].push(i)}}},mergeMesh:function(t){t&&t.isMesh?(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t)},mergeVertices:function(t=4){const e={},n=[],r=[],i=Math.pow(10,t);for(let t=0,o=this.vertices.length;t<o;t++){const o=this.vertices[t],a=Math.round(o.x*i)+"_"+Math.round(o.y*i)+"_"+Math.round(o.z*i);void 0===e[a]?(e[a]=t,n.push(this.vertices[t]),r[t]=n.length-1):r[t]=r[e[a]]}const o=[];for(let t=0,e=this.faces.length;t<e;t++){const e=this.faces[t];e.a=r[e.a],e.b=r[e.b],e.c=r[e.c];const n=[e.a,e.b,e.c];for(let e=0;e<3;e++)if(n[e]===n[(e+1)%3]){o.push(t);break}}for(let t=o.length-1;t>=0;t--){const e=o[t];this.faces.splice(e,1);for(let t=0,n=this.faceVertexUvs.length;t<n;t++)this.faceVertexUvs[t].splice(e,1)}const a=this.vertices.length-n.length;return this.vertices=n,a},setFromPoints:function(t){this.vertices=[];for(let e=0,n=t.length;e<n;e++){const n=t[e];this.vertices.push(new Kn(n.x,n.y,n.z||0))}return this},sortFacesByMaterialIndex:function(){const t=this.faces,e=t.length;for(let n=0;n<e;n++)t[n]._id=n;t.sort((function(t,e){return t.materialIndex-e.materialIndex}));const n=this.faceVertexUvs[0],r=this.faceVertexUvs[1];let i,o;n&&n.length===e&&(i=[]),r&&r.length===e&&(o=[]);for(let a=0;a<e;a++){const e=t[a]._id;i&&i.push(n[e]),o&&o.push(r[e])}i&&(this.faceVertexUvs[0]=i),o&&(this.faceVertexUvs[1]=o)},toJSON:function(){const t={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){const e=this.parameters;for(const n in e)void 0!==e[n]&&(t[n]=e[n]);return t}const e=[];for(let t=0;t<this.vertices.length;t++){const n=this.vertices[t];e.push(n.x,n.y,n.z)}const n=[],r=[],i={},o=[],a={},s=[],c={};for(let t=0;t<this.faces.length;t++){const e=this.faces[t],r=!0,i=!1,o=void 0!==this.faceVertexUvs[0][t],a=e.normal.length()>0,s=e.vertexNormals.length>0,c=1!==e.color.r||1!==e.color.g||1!==e.color.b,p=e.vertexColors.length>0;let f=0;if(f=l(f,0,0),f=l(f,1,r),f=l(f,2,i),f=l(f,3,o),f=l(f,4,a),f=l(f,5,s),f=l(f,6,c),f=l(f,7,p),n.push(f),n.push(e.a,e.b,e.c),n.push(e.materialIndex),o){const e=this.faceVertexUvs[0][t];n.push(d(e[0]),d(e[1]),d(e[2]))}if(a&&n.push(u(e.normal)),s){const t=e.vertexNormals;n.push(u(t[0]),u(t[1]),u(t[2]))}if(c&&n.push(h(e.color)),p){const t=e.vertexColors;n.push(h(t[0]),h(t[1]),h(t[2]))}}function l(t,e,n){return n?t|1<<e:t&~(1<<e)}function u(t){const e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==i[e]||(i[e]=r.length/3,r.push(t.x,t.y,t.z)),i[e]}function h(t){const e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==a[e]||(a[e]=o.length,o.push(t.getHex())),a[e]}function d(t){const e=t.x.toString()+t.y.toString();return void 0!==c[e]||(c[e]=s.length/2,s.push(t.x,t.y)),c[e]}return t.data={},t.data.vertices=e,t.data.normals=r,o.length>0&&(t.data.colors=o),s.length>0&&(t.data.uvs=[s]),t.data.faces=n,t},clone:function(){return(new jc).copy(this)},copy:function(t){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;const e=t.vertices;for(let t=0,n=e.length;t<n;t++)this.vertices.push(e[t].clone());const n=t.colors;for(let t=0,e=n.length;t<e;t++)this.colors.push(n[t].clone());const r=t.faces;for(let t=0,e=r.length;t<e;t++)this.faces.push(r[t].clone());for(let e=0,n=t.faceVertexUvs.length;e<n;e++){const n=t.faceVertexUvs[e];void 0===this.faceVertexUvs[e]&&(this.faceVertexUvs[e]=[]);for(let t=0,r=n.length;t<r;t++){const r=n[t],i=[];for(let t=0,e=r.length;t<e;t++){const e=r[t];i.push(e.clone())}this.faceVertexUvs[e].push(i)}}const i=t.morphTargets;for(let t=0,e=i.length;t<e;t++){const e={};if(e.name=i[t].name,void 0!==i[t].vertices){e.vertices=[];for(let n=0,r=i[t].vertices.length;n<r;n++)e.vertices.push(i[t].vertices[n].clone())}if(void 0!==i[t].normals){e.normals=[];for(let n=0,r=i[t].normals.length;n<r;n++)e.normals.push(i[t].normals[n].clone())}this.morphTargets.push(e)}const o=t.morphNormals;for(let t=0,e=o.length;t<e;t++){const e={};if(void 0!==o[t].vertexNormals){e.vertexNormals=[];for(let n=0,r=o[t].vertexNormals.length;n<r;n++){const r=o[t].vertexNormals[n],i={};i.a=r.a.clone(),i.b=r.b.clone(),i.c=r.c.clone(),e.vertexNormals.push(i)}}if(void 0!==o[t].faceNormals){e.faceNormals=[];for(let n=0,r=o[t].faceNormals.length;n<r;n++)e.faceNormals.push(o[t].faceNormals[n].clone())}this.morphNormals.push(e)}const a=t.skinWeights;for(let t=0,e=a.length;t<e;t++)this.skinWeights.push(a[t].clone());const s=t.skinIndices;for(let t=0,e=s.length;t<e;t++)this.skinIndices.push(s[t].clone());const c=t.lineDistances;for(let t=0,e=c.length;t<e;t++)this.lineDistances.push(c[t]);const l=t.boundingBox;null!==l&&(this.boundingBox=l.clone());const u=t.boundingSphere;return null!==u&&(this.boundingSphere=u.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});class Wc extends jc{constructor(t,e,n,r,i,o){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:i,depthSegments:o},this.fromBufferGeometry(new mo(t,e,n,r,i,o)),this.mergeVertices()}}class Xc extends qi{constructor(t=1,e=8,n=0,r=2*Math.PI){super(),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:r},e=Math.max(3,e);const i=[],o=[],a=[],s=[],c=new Kn,l=new Gn;o.push(0,0,0),a.push(0,0,1),s.push(.5,.5);for(let i=0,u=3;i<=e;i++,u+=3){const h=n+i/e*r;c.x=t*Math.cos(h),c.y=t*Math.sin(h),o.push(c.x,c.y,c.z),a.push(0,0,1),l.x=(o[u]/t+1)/2,l.y=(o[u+1]/t+1)/2,s.push(l.x,l.y)}for(let t=1;t<=e;t++)i.push(t,t+1,0);this.setIndex(i),this.setAttribute("position",new Ni(o,3)),this.setAttribute("normal",new Ni(a,3)),this.setAttribute("uv",new Ni(s,2))}}class qc extends jc{constructor(t,e,n,r){super(),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:r},this.fromBufferGeometry(new Xc(t,e,n,r)),this.mergeVertices()}}class Yc extends qi{constructor(t=1,e=1,n=1,r=8,i=1,o=!1,a=0,s=2*Math.PI){super(),this.type="CylinderBufferGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s};const c=this;r=Math.floor(r),i=Math.floor(i);const l=[],u=[],h=[],d=[];let p=0;const f=[],m=n/2;let g=0;function v(n){const i=p,o=new Gn,f=new Kn;let v=0;const y=!0===n?t:e,x=!0===n?1:-1;for(let t=1;t<=r;t++)u.push(0,m*x,0),h.push(0,x,0),d.push(.5,.5),p++;const b=p;for(let t=0;t<=r;t++){const e=t/r*s+a,n=Math.cos(e),i=Math.sin(e);f.x=y*i,f.y=m*x,f.z=y*n,u.push(f.x,f.y,f.z),h.push(0,x,0),o.x=.5*n+.5,o.y=.5*i*x+.5,d.push(o.x,o.y),p++}for(let t=0;t<r;t++){const e=i+t,r=b+t;!0===n?l.push(r,r+1,e):l.push(r+1,r,e),v+=3}c.addGroup(g,v,!0===n?1:2),g+=v}!function(){const o=new Kn,v=new Kn;let y=0;const x=(e-t)/n;for(let c=0;c<=i;c++){const l=[],g=c/i,y=g*(e-t)+t;for(let t=0;t<=r;t++){const e=t/r,i=e*s+a,c=Math.sin(i),f=Math.cos(i);v.x=y*c,v.y=-g*n+m,v.z=y*f,u.push(v.x,v.y,v.z),o.set(c,x,f).normalize(),h.push(o.x,o.y,o.z),d.push(e,1-g),l.push(p++)}f.push(l)}for(let t=0;t<r;t++)for(let e=0;e<i;e++){const n=f[e][t],r=f[e+1][t],i=f[e+1][t+1],o=f[e][t+1];l.push(n,r,o),l.push(r,i,o),y+=6}c.addGroup(g,y,0),g+=y}(),!1===o&&(t>0&&v(!0),e>0&&v(!1)),this.setIndex(l),this.setAttribute("position",new Ni(u,3)),this.setAttribute("normal",new Ni(h,3)),this.setAttribute("uv",new Ni(d,2))}}class Zc extends jc{constructor(t,e,n,r,i,o,a,s){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new Yc(t,e,n,r,i,o,a,s)),this.mergeVertices()}}class Jc extends Zc{constructor(t,e,n,r,i,o,a){super(0,t,e,n,r,i,o,a),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}}class Kc extends Yc{constructor(t=1,e=1,n=8,r=1,i=!1,o=0,a=2*Math.PI){super(0,t,e,n,r,i,o,a),this.type="ConeBufferGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}}class Qc extends qi{constructor(t,e,n=1,r=0){super(),this.type="PolyhedronBufferGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:r};const i=[],o=[];function a(t,e,n,r){const i=r+1,o=[];for(let r=0;r<=i;r++){o[r]=[];const a=t.clone().lerp(n,r/i),s=e.clone().lerp(n,r/i),c=i-r;for(let t=0;t<=c;t++)o[r][t]=0===t&&r===i?a:a.clone().lerp(s,t/c)}for(let t=0;t<i;t++)for(let e=0;e<2*(i-t)-1;e++){const n=Math.floor(e/2);e%2==0?(s(o[t][n+1]),s(o[t+1][n]),s(o[t][n])):(s(o[t][n+1]),s(o[t+1][n+1]),s(o[t+1][n]))}}function s(t){i.push(t.x,t.y,t.z)}function c(e,n){const r=3*e;n.x=t[r+0],n.y=t[r+1],n.z=t[r+2]}function l(t,e,n,r){r<0&&1===t.x&&(o[e]=t.x-1),0===n.x&&0===n.z&&(o[e]=r/2/Math.PI+.5)}function u(t){return Math.atan2(t.z,-t.x)}!function(t){const n=new Kn,r=new Kn,i=new Kn;for(let o=0;o<e.length;o+=3)c(e[o+0],n),c(e[o+1],r),c(e[o+2],i),a(n,r,i,t)}(r),function(t){const e=new Kn;for(let n=0;n<i.length;n+=3)e.x=i[n+0],e.y=i[n+1],e.z=i[n+2],e.normalize().multiplyScalar(t),i[n+0]=e.x,i[n+1]=e.y,i[n+2]=e.z}(n),function(){const t=new Kn;for(let n=0;n<i.length;n+=3){t.x=i[n+0],t.y=i[n+1],t.z=i[n+2];const r=u(t)/2/Math.PI+.5,a=(e=t,Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))/Math.PI+.5);o.push(r,1-a)}var e;(function(){const t=new Kn,e=new Kn,n=new Kn,r=new Kn,a=new Gn,s=new Gn,c=new Gn;for(let h=0,d=0;h<i.length;h+=9,d+=6){t.set(i[h+0],i[h+1],i[h+2]),e.set(i[h+3],i[h+4],i[h+5]),n.set(i[h+6],i[h+7],i[h+8]),a.set(o[d+0],o[d+1]),s.set(o[d+2],o[d+3]),c.set(o[d+4],o[d+5]),r.copy(t).add(e).add(n).divideScalar(3);const p=u(r);l(a,d+0,t,p),l(s,d+2,e,p),l(c,d+4,n,p)}})(),function(){for(let t=0;t<o.length;t+=6){const e=o[t+0],n=o[t+2],r=o[t+4],i=Math.max(e,n,r),a=Math.min(e,n,r);i>.9&&a<.1&&(e<.2&&(o[t+0]+=1),n<.2&&(o[t+2]+=1),r<.2&&(o[t+4]+=1))}}()}(),this.setAttribute("position",new Ni(i,3)),this.setAttribute("normal",new Ni(i.slice(),3)),this.setAttribute("uv",new Ni(o,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}}class $c extends Qc{constructor(t=1,e=0){const n=(1+Math.sqrt(5))/2,r=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,e),this.type="DodecahedronBufferGeometry",this.parameters={radius:t,detail:e}}}class tl extends jc{constructor(t,e){super(),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new $c(t,e)),this.mergeVertices()}}const el=new Kn,nl=new Kn,rl=new Kn,il=new hi;class ol extends qi{constructor(t,e){super(),this.type="EdgesGeometry",this.parameters={thresholdAngle:e},e=void 0!==e?e:1,t.isGeometry&&(t=(new qi).fromGeometry(t));const n=Math.pow(10,4),r=Math.cos(zn.DEG2RAD*e),i=t.getIndex(),o=t.getAttribute("position"),a=i?i.count:o.count,s=[0,0,0],c=["a","b","c"],l=new Array(3),u={},h=[];for(let t=0;t<a;t+=3){i?(s[0]=i.getX(t),s[1]=i.getX(t+1),s[2]=i.getX(t+2)):(s[0]=t,s[1]=t+1,s[2]=t+2);const{a:e,b:a,c:d}=il;if(e.fromBufferAttribute(o,s[0]),a.fromBufferAttribute(o,s[1]),d.fromBufferAttribute(o,s[2]),il.getNormal(rl),l[0]=`${Math.round(e.x*n)},${Math.round(e.y*n)},${Math.round(e.z*n)}`,l[1]=`${Math.round(a.x*n)},${Math.round(a.y*n)},${Math.round(a.z*n)}`,l[2]=`${Math.round(d.x*n)},${Math.round(d.y*n)},${Math.round(d.z*n)}`,l[0]!==l[1]&&l[1]!==l[2]&&l[2]!==l[0])for(let t=0;t<3;t++){const e=(t+1)%3,n=l[t],i=l[e],o=il[c[t]],a=il[c[e]],d=`${n}_${i}`,p=`${i}_${n}`;p in u&&u[p]?(rl.dot(u[p].normal)<=r&&(h.push(o.x,o.y,o.z),h.push(a.x,a.y,a.z)),u[p]=null):d in u||(u[d]={index0:s[t],index1:s[e],normal:rl.clone()})}}for(const t in u)if(u[t]){const{index0:e,index1:n}=u[t];el.fromBufferAttribute(o,e),nl.fromBufferAttribute(o,n),h.push(el.x,el.y,el.z),h.push(nl.x,nl.y,nl.z)}this.setAttribute("position",new Ni(h,3))}}const al=function(t,e,n){n=n||2;const r=e&&e.length,i=r?e[0]*n:t.length;let o=sl(t,0,i,n,!0);const a=[];if(!o||o.next===o.prev)return a;let s,c,l,u,h,d,p;if(r&&(o=function(t,e,n,r){const i=[];let o,a,s,c,l;for(o=0,a=e.length;o<a;o++)s=e[o]*r,c=o<a-1?e[o+1]*r:t.length,l=sl(t,s,c,r,!1),l===l.next&&(l.steiner=!0),i.push(yl(l));for(i.sort(fl),o=0;o<i.length;o++)ml(i[o],n),n=cl(n,n.next);return n}(t,e,o,n)),t.length>80*n){s=l=t[0],c=u=t[1];for(let e=n;e<i;e+=n)h=t[e],d=t[e+1],h<s&&(s=h),d<c&&(c=d),h>l&&(l=h),d>u&&(u=d);p=Math.max(l-s,u-c),p=0!==p?1/p:0}return ll(o,a,n,s,c,p),a};function sl(t,e,n,r,i){let o,a;if(i===function(t,e,n,r){let i=0;for(let o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}(t,e,n,r)>0)for(o=e;o<n;o+=r)a=Ll(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=Ll(o,t[o],t[o+1],a);return a&&_l(a,a.next)&&(Rl(a),a=a.next),a}function cl(t,e){if(!t)return t;e||(e=t);let n,r=t;do{if(n=!1,r.steiner||!_l(r,r.next)&&0!==wl(r.prev,r,r.next))r=r.next;else{if(Rl(r),r=e=r.prev,r===r.next)break;n=!0}}while(n||r!==e);return e}function ll(t,e,n,r,i,o,a){if(!t)return;!a&&o&&function(t,e,n,r){let i=t;do{null===i.z&&(i.z=vl(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){let e,n,r,i,o,a,s,c,l=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;e<l&&(s++,r=r.nextZ,r);e++);for(c=l;s>0||c>0&&r;)0!==s&&(0===c||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,c--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(a>1)}(i)}(t,r,i,o);let s,c,l=t;for(;t.prev!==t.next;)if(s=t.prev,c=t.next,o?hl(t,r,i,o):ul(t))e.push(s.i/n),e.push(t.i/n),e.push(c.i/n),Rl(t),t=c.next,l=c.next;else if((t=c)===l){a?1===a?ll(t=dl(cl(t),e,n),e,n,r,i,o,2):2===a&&pl(t,e,n,r,i,o):ll(cl(t),e,n,r,i,o,1);break}}function ul(t){const e=t.prev,n=t,r=t.next;if(wl(e,n,r)>=0)return!1;let i=t.next.next;for(;i!==t.prev;){if(xl(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&wl(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function hl(t,e,n,r){const i=t.prev,o=t,a=t.next;if(wl(i,o,a)>=0)return!1;const s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,c=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,l=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,u=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,h=vl(s,c,e,n,r),d=vl(l,u,e,n,r);let p=t.prevZ,f=t.nextZ;for(;p&&p.z>=h&&f&&f.z<=d;){if(p!==t.prev&&p!==t.next&&xl(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&wl(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,f!==t.prev&&f!==t.next&&xl(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&wl(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(;p&&p.z>=h;){if(p!==t.prev&&p!==t.next&&xl(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&wl(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;f&&f.z<=d;){if(f!==t.prev&&f!==t.next&&xl(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&wl(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function dl(t,e,n){let r=t;do{const i=r.prev,o=r.next.next;!_l(i,o)&&Ml(i,r,r.next,o)&&El(i,o)&&El(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),Rl(r),Rl(r.next),r=t=o),r=r.next}while(r!==t);return cl(r)}function pl(t,e,n,r,i,o){let a=t;do{let t=a.next.next;for(;t!==a.prev;){if(a.i!==t.i&&bl(a,t)){let s=Al(a,t);return a=cl(a,a.next),s=cl(s,s.next),ll(a,e,n,r,i,o),void ll(s,e,n,r,i,o)}t=t.next}a=a.next}while(a!==t)}function fl(t,e){return t.x-e.x}function ml(t,e){if(e=function(t,e){let n=e;const r=t.x,i=t.y;let o,a=-1/0;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){const t=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(t<=r&&t>a){if(a=t,t===r){if(i===n.y)return n;if(i===n.next.y)return n.next}o=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!o)return null;if(r===a)return o;const s=o,c=o.x,l=o.y;let u,h=1/0;n=o;do{r>=n.x&&n.x>=c&&r!==n.x&&xl(i<l?r:a,i,c,l,i<l?a:r,i,n.x,n.y)&&(u=Math.abs(i-n.y)/(r-n.x),El(n,t)&&(u<h||u===h&&(n.x>o.x||n.x===o.x&&gl(o,n)))&&(o=n,h=u)),n=n.next}while(n!==s);return o}(t,e)){const n=Al(e,t);cl(e,e.next),cl(n,n.next)}}function gl(t,e){return wl(t.prev,t,e.prev)<0&&wl(e.next,t,t.next)<0}function vl(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function yl(t){let e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function xl(t,e,n,r,i,o,a,s){return(i-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(r-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function bl(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Ml(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(El(t,e)&&El(e,t)&&function(t,e){let n=t,r=!1;const i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(wl(t.prev,t,e.prev)||wl(t,e.prev,e))||_l(t,e)&&wl(t.prev,t,t.next)>0&&wl(e.prev,e,e.next)>0)}function wl(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function _l(t,e){return t.x===e.x&&t.y===e.y}function Ml(t,e,n,r){const i=Tl(wl(t,e,n)),o=Tl(wl(t,e,r)),a=Tl(wl(n,r,t)),s=Tl(wl(n,r,e));return i!==o&&a!==s||(!(0!==i||!Sl(t,n,e))||(!(0!==o||!Sl(t,r,e))||(!(0!==a||!Sl(n,t,r))||!(0!==s||!Sl(n,e,r)))))}function Sl(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function Tl(t){return t>0?1:t<0?-1:0}function El(t,e){return wl(t.prev,t,t.next)<0?wl(t,e,t.next)>=0&&wl(t,t.prev,e)>=0:wl(t,e,t.prev)<0||wl(t,t.next,e)<0}function Al(t,e){const n=new Pl(t.i,t.x,t.y),r=new Pl(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function Ll(t,e,n,r){const i=new Pl(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Rl(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Pl(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}const Cl={area:function(t){const e=t.length;let n=0;for(let r=e-1,i=0;i<e;r=i++)n+=t[r].x*t[i].y-t[i].x*t[r].y;return.5*n},isClockWise:function(t){return Cl.area(t)<0},triangulateShape:function(t,e){const n=[],r=[],i=[];Il(t),Ol(n,t);let o=t.length;e.forEach(Il);for(let t=0;t<e.length;t++)r.push(o),o+=e[t].length,Ol(n,e[t]);const a=al(n,r);for(let t=0;t<a.length;t+=3)i.push(a.slice(t,t+3));return i}};function Il(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function Ol(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class Nl extends qi{constructor(t,e){super(),this.type="ExtrudeBufferGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];const n=this,r=[],i=[];for(let e=0,n=t.length;e<n;e++){o(t[e])}function o(t){const o=[],a=void 0!==e.curveSegments?e.curveSegments:12,s=void 0!==e.steps?e.steps:1;let c=void 0!==e.depth?e.depth:100,l=void 0===e.bevelEnabled||e.bevelEnabled,u=void 0!==e.bevelThickness?e.bevelThickness:6,h=void 0!==e.bevelSize?e.bevelSize:u-2,d=void 0!==e.bevelOffset?e.bevelOffset:0,p=void 0!==e.bevelSegments?e.bevelSegments:3;const f=e.extrudePath,m=void 0!==e.UVGenerator?e.UVGenerator:Dl;void 0!==e.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),c=e.amount);let g,v,y,x,b,w=!1;f&&(g=f.getSpacedPoints(s),w=!0,l=!1,v=f.computeFrenetFrames(s,!1),y=new Kn,x=new Kn,b=new Kn),l||(p=0,u=0,h=0,d=0);const _=t.extractPoints(a);let M=_.shape;const S=_.holes;if(!Cl.isClockWise(M)){M=M.reverse();for(let t=0,e=S.length;t<e;t++){const e=S[t];Cl.isClockWise(e)&&(S[t]=e.reverse())}}const T=Cl.triangulateShape(M,S),E=M;for(let t=0,e=S.length;t<e;t++){const e=S[t];M=M.concat(e)}function A(t,e,n){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(n).add(t)}const L=M.length,R=T.length;function P(t,e,n){let r,i,o;const a=t.x-e.x,s=t.y-e.y,c=n.x-t.x,l=n.y-t.y,u=a*a+s*s,h=a*l-s*c;if(Math.abs(h)>Number.EPSILON){const h=Math.sqrt(u),d=Math.sqrt(c*c+l*l),p=e.x-s/h,f=e.y+a/h,m=((n.x-l/d-p)*l-(n.y+c/d-f)*c)/(a*l-s*c);r=p+a*m-t.x,i=f+s*m-t.y;const g=r*r+i*i;if(g<=2)return new Gn(r,i);o=Math.sqrt(g/2)}else{let t=!1;a>Number.EPSILON?c>Number.EPSILON&&(t=!0):a<-Number.EPSILON?c<-Number.EPSILON&&(t=!0):Math.sign(s)===Math.sign(l)&&(t=!0),t?(r=-s,i=a,o=Math.sqrt(u)):(r=a,i=s,o=Math.sqrt(u/2))}return new Gn(r/o,i/o)}const C=[];for(let t=0,e=E.length,n=e-1,r=t+1;t<e;t++,n++,r++)n===e&&(n=0),r===e&&(r=0),C[t]=P(E[t],E[n],E[r]);const I=[];let O,N=C.concat();for(let t=0,e=S.length;t<e;t++){const e=S[t];O=[];for(let t=0,n=e.length,r=n-1,i=t+1;t<n;t++,r++,i++)r===n&&(r=0),i===n&&(i=0),O[t]=P(e[t],e[r],e[i]);I.push(O),N=N.concat(O)}for(let t=0;t<p;t++){const e=t/p,n=u*Math.cos(e*Math.PI/2),r=h*Math.sin(e*Math.PI/2)+d;for(let t=0,e=E.length;t<e;t++){const e=A(E[t],C[t],r);F(e.x,e.y,-n)}for(let t=0,e=S.length;t<e;t++){const e=S[t];O=I[t];for(let t=0,i=e.length;t<i;t++){const i=A(e[t],O[t],r);F(i.x,i.y,-n)}}}const D=h+d;for(let t=0;t<L;t++){const e=l?A(M[t],N[t],D):M[t];w?(x.copy(v.normals[0]).multiplyScalar(e.x),y.copy(v.binormals[0]).multiplyScalar(e.y),b.copy(g[0]).add(x).add(y),F(b.x,b.y,b.z)):F(e.x,e.y,0)}for(let t=1;t<=s;t++)for(let e=0;e<L;e++){const n=l?A(M[e],N[e],D):M[e];w?(x.copy(v.normals[t]).multiplyScalar(n.x),y.copy(v.binormals[t]).multiplyScalar(n.y),b.copy(g[t]).add(x).add(y),F(b.x,b.y,b.z)):F(n.x,n.y,c/s*t)}for(let t=p-1;t>=0;t--){const e=t/p,n=u*Math.cos(e*Math.PI/2),r=h*Math.sin(e*Math.PI/2)+d;for(let t=0,e=E.length;t<e;t++){const e=A(E[t],C[t],r);F(e.x,e.y,c+n)}for(let t=0,e=S.length;t<e;t++){const e=S[t];O=I[t];for(let t=0,i=e.length;t<i;t++){const i=A(e[t],O[t],r);w?F(i.x,i.y+g[s-1].y,g[s-1].x+n):F(i.x,i.y,c+n)}}}function B(t,e){let n=t.length;for(;--n>=0;){const r=n;let i=n-1;i<0&&(i=t.length-1);for(let t=0,n=s+2*p;t<n;t++){const n=L*t,o=L*(t+1);z(e+r+n,e+i+n,e+i+o,e+r+o)}}}function F(t,e,n){o.push(t),o.push(e),o.push(n)}function U(t,e,i){G(t),G(e),G(i);const o=r.length/3,a=m.generateTopUV(n,r,o-3,o-2,o-1);H(a[0]),H(a[1]),H(a[2])}function z(t,e,i,o){G(t),G(e),G(o),G(e),G(i),G(o);const a=r.length/3,s=m.generateSideWallUV(n,r,a-6,a-3,a-2,a-1);H(s[0]),H(s[1]),H(s[3]),H(s[1]),H(s[2]),H(s[3])}function G(t){r.push(o[3*t+0]),r.push(o[3*t+1]),r.push(o[3*t+2])}function H(t){i.push(t.x),i.push(t.y)}!function(){const t=r.length/3;if(l){let t=0,e=L*t;for(let t=0;t<R;t++){const n=T[t];U(n[2]+e,n[1]+e,n[0]+e)}t=s+2*p,e=L*t;for(let t=0;t<R;t++){const n=T[t];U(n[0]+e,n[1]+e,n[2]+e)}}else{for(let t=0;t<R;t++){const e=T[t];U(e[2],e[1],e[0])}for(let t=0;t<R;t++){const e=T[t];U(e[0]+L*s,e[1]+L*s,e[2]+L*s)}}n.addGroup(t,r.length/3-t,0)}(),function(){const t=r.length/3;let e=0;B(E,e),e+=E.length;for(let t=0,n=S.length;t<n;t++){const n=S[t];B(n,e),e+=n.length}n.addGroup(t,r.length/3-t,1)}()}this.setAttribute("position",new Ni(r,3)),this.setAttribute("uv",new Ni(i,2)),this.computeVertexNormals()}toJSON(){const t=qi.prototype.toJSON.call(this);return function(t,e,n){if(n.shapes=[],Array.isArray(t))for(let e=0,r=t.length;e<r;e++){const r=t[e];n.shapes.push(r.uuid)}else n.shapes.push(t.uuid);void 0!==e.extrudePath&&(n.options.extrudePath=e.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,t)}}const Dl={generateTopUV:function(t,e,n,r,i){const o=e[3*n],a=e[3*n+1],s=e[3*r],c=e[3*r+1],l=e[3*i],u=e[3*i+1];return[new Gn(o,a),new Gn(s,c),new Gn(l,u)]},generateSideWallUV:function(t,e,n,r,i,o){const a=e[3*n],s=e[3*n+1],c=e[3*n+2],l=e[3*r],u=e[3*r+1],h=e[3*r+2],d=e[3*i],p=e[3*i+1],f=e[3*i+2],m=e[3*o],g=e[3*o+1],v=e[3*o+2];return Math.abs(s-u)<.01?[new Gn(a,1-c),new Gn(l,1-h),new Gn(d,1-f),new Gn(m,1-v)]:[new Gn(s,1-c),new Gn(u,1-h),new Gn(p,1-f),new Gn(g,1-v)]}};class Bl extends jc{constructor(t,e){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},this.fromBufferGeometry(new Nl(t,e)),this.mergeVertices()}toJSON(){const t=super.toJSON();return function(t,e,n){if(n.shapes=[],Array.isArray(t))for(let e=0,r=t.length;e<r;e++){const r=t[e];n.shapes.push(r.uuid)}else n.shapes.push(t.uuid);void 0!==e.extrudePath&&(n.options.extrudePath=e.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,t)}}class Fl extends Qc{constructor(t=1,e=0){const n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,e),this.type="IcosahedronBufferGeometry",this.parameters={radius:t,detail:e}}}class Ul extends jc{constructor(t,e){super(),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Fl(t,e)),this.mergeVertices()}}class zl extends qi{constructor(t,e=12,n=0,r=2*Math.PI){super(),this.type="LatheBufferGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:r},e=Math.floor(e),r=zn.clamp(r,0,2*Math.PI);const i=[],o=[],a=[],s=1/e,c=new Kn,l=new Gn;for(let i=0;i<=e;i++){const u=n+i*s*r,h=Math.sin(u),d=Math.cos(u);for(let n=0;n<=t.length-1;n++)c.x=t[n].x*h,c.y=t[n].y,c.z=t[n].x*d,o.push(c.x,c.y,c.z),l.x=i/e,l.y=n/(t.length-1),a.push(l.x,l.y)}for(let n=0;n<e;n++)for(let e=0;e<t.length-1;e++){const r=e+n*t.length,o=r,a=r+t.length,s=r+t.length+1,c=r+1;i.push(o,a,c),i.push(a,s,c)}if(this.setIndex(i),this.setAttribute("position",new Ni(o,3)),this.setAttribute("uv",new Ni(a,2)),this.computeVertexNormals(),r===2*Math.PI){const n=this.attributes.normal.array,r=new Kn,i=new Kn,o=new Kn,a=e*t.length*3;for(let e=0,s=0;e<t.length;e++,s+=3)r.x=n[s+0],r.y=n[s+1],r.z=n[s+2],i.x=n[a+s+0],i.y=n[a+s+1],i.z=n[a+s+2],o.addVectors(r,i).normalize(),n[s+0]=n[a+s+0]=o.x,n[s+1]=n[a+s+1]=o.y,n[s+2]=n[a+s+2]=o.z}}}class Gl extends jc{constructor(t,e,n,r){super(),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:r},this.fromBufferGeometry(new zl(t,e,n,r)),this.mergeVertices()}}class Hl extends Qc{constructor(t=1,e=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,e),this.type="OctahedronBufferGeometry",this.parameters={radius:t,detail:e}}}class kl extends jc{constructor(t,e){super(),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Hl(t,e)),this.mergeVertices()}}function Vl(t,e,n){qi.call(this),this.type="ParametricBufferGeometry",this.parameters={func:t,slices:e,stacks:n};const r=[],i=[],o=[],a=[],s=1e-5,c=new Kn,l=new Kn,u=new Kn,h=new Kn,d=new Kn;t.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");const p=e+1;for(let r=0;r<=n;r++){const p=r/n;for(let n=0;n<=e;n++){const r=n/e;t(r,p,l),i.push(l.x,l.y,l.z),r-s>=0?(t(r-s,p,u),h.subVectors(l,u)):(t(r+s,p,u),h.subVectors(u,l)),p-s>=0?(t(r,p-s,u),d.subVectors(l,u)):(t(r,p+s,u),d.subVectors(u,l)),c.crossVectors(h,d).normalize(),o.push(c.x,c.y,c.z),a.push(r,p)}}for(let t=0;t<n;t++)for(let n=0;n<e;n++){const e=t*p+n,i=t*p+n+1,o=(t+1)*p+n+1,a=(t+1)*p+n;r.push(e,i,a),r.push(i,o,a)}this.setIndex(r),this.setAttribute("position",new Ni(i,3)),this.setAttribute("normal",new Ni(o,3)),this.setAttribute("uv",new Ni(a,2))}function jl(t,e,n){jc.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:n},this.fromBufferGeometry(new Vl(t,e,n)),this.mergeVertices()}Vl.prototype=Object.create(qi.prototype),Vl.prototype.constructor=Vl,jl.prototype=Object.create(jc.prototype),jl.prototype.constructor=jl;class Wl extends jc{constructor(t,e,n,r){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r},this.fromBufferGeometry(new Co(t,e,n,r)),this.mergeVertices()}}class Xl extends jc{constructor(t,e,n,r){super(),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:r},this.fromBufferGeometry(new Qc(t,e,n,r)),this.mergeVertices()}}class ql extends qi{constructor(t=.5,e=1,n=8,r=1,i=0,o=2*Math.PI){super(),this.type="RingBufferGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},n=Math.max(3,n);const a=[],s=[],c=[],l=[];let u=t;const h=(e-t)/(r=Math.max(1,r)),d=new Kn,p=new Gn;for(let t=0;t<=r;t++){for(let t=0;t<=n;t++){const r=i+t/n*o;d.x=u*Math.cos(r),d.y=u*Math.sin(r),s.push(d.x,d.y,d.z),c.push(0,0,1),p.x=(d.x/e+1)/2,p.y=(d.y/e+1)/2,l.push(p.x,p.y)}u+=h}for(let t=0;t<r;t++){const e=t*(n+1);for(let t=0;t<n;t++){const r=t+e,i=r,o=r+n+1,s=r+n+2,c=r+1;a.push(i,o,c),a.push(o,s,c)}}this.setIndex(a),this.setAttribute("position",new Ni(s,3)),this.setAttribute("normal",new Ni(c,3)),this.setAttribute("uv",new Ni(l,2))}}class Yl extends jc{constructor(t,e,n,r,i,o){super(),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},this.fromBufferGeometry(new ql(t,e,n,r,i,o)),this.mergeVertices()}}class Zl extends qi{constructor(t,e=12){super(),this.type="ShapeBufferGeometry",this.parameters={shapes:t,curveSegments:e};const n=[],r=[],i=[],o=[];let a=0,s=0;if(!1===Array.isArray(t))c(t);else for(let e=0;e<t.length;e++)c(t[e]),this.addGroup(a,s,e),a+=s,s=0;function c(t){const a=r.length/3,c=t.extractPoints(e);let l=c.shape;const u=c.holes;!1===Cl.isClockWise(l)&&(l=l.reverse());for(let t=0,e=u.length;t<e;t++){const e=u[t];!0===Cl.isClockWise(e)&&(u[t]=e.reverse())}const h=Cl.triangulateShape(l,u);for(let t=0,e=u.length;t<e;t++){const e=u[t];l=l.concat(e)}for(let t=0,e=l.length;t<e;t++){const e=l[t];r.push(e.x,e.y,0),i.push(0,0,1),o.push(e.x,e.y)}for(let t=0,e=h.length;t<e;t++){const e=h[t],r=e[0]+a,i=e[1]+a,o=e[2]+a;n.push(r,i,o),s+=3}}this.setIndex(n),this.setAttribute("position",new Ni(r,3)),this.setAttribute("normal",new Ni(i,3)),this.setAttribute("uv",new Ni(o,2))}toJSON(){const t=qi.prototype.toJSON.call(this);return function(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,r=t.length;n<r;n++){const r=t[n];e.shapes.push(r.uuid)}else e.shapes.push(t.uuid);return e}(this.parameters.shapes,t)}}class Jl extends jc{constructor(t,e){super(),this.type="ShapeGeometry","object"==typeof e&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),e=e.curveSegments),this.parameters={shapes:t,curveSegments:e},this.fromBufferGeometry(new Zl(t,e)),this.mergeVertices()}toJSON(){const t=jc.prototype.toJSON.call(this);return function(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,r=t.length;n<r;n++){const r=t[n];e.shapes.push(r.uuid)}else e.shapes.push(t.uuid);return e}(this.parameters.shapes,t)}}class Kl extends qi{constructor(t=1,e=8,n=6,r=0,i=2*Math.PI,o=0,a=Math.PI){super(),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},e=Math.max(3,Math.floor(e)),n=Math.max(2,Math.floor(n));const s=Math.min(o+a,Math.PI);let c=0;const l=[],u=new Kn,h=new Kn,d=[],p=[],f=[],m=[];for(let d=0;d<=n;d++){const g=[],v=d/n;let y=0;0==d&&0==o?y=.5/e:d==n&&s==Math.PI&&(y=-.5/e);for(let n=0;n<=e;n++){const s=n/e;u.x=-t*Math.cos(r+s*i)*Math.sin(o+v*a),u.y=t*Math.cos(o+v*a),u.z=t*Math.sin(r+s*i)*Math.sin(o+v*a),p.push(u.x,u.y,u.z),h.copy(u).normalize(),f.push(h.x,h.y,h.z),m.push(s+y,1-v),g.push(c++)}l.push(g)}for(let t=0;t<n;t++)for(let r=0;r<e;r++){const e=l[t][r+1],i=l[t][r],a=l[t+1][r],c=l[t+1][r+1];(0!==t||o>0)&&d.push(e,i,c),(t!==n-1||s<Math.PI)&&d.push(i,a,c)}this.setIndex(d),this.setAttribute("position",new Ni(p,3)),this.setAttribute("normal",new Ni(f,3)),this.setAttribute("uv",new Ni(m,2))}}class Ql extends jc{constructor(t,e,n,r,i,o,a){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new Kl(t,e,n,r,i,o,a)),this.mergeVertices()}}class $l extends Qc{constructor(t=1,e=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,e),this.type="TetrahedronBufferGeometry",this.parameters={radius:t,detail:e}}}class tu extends jc{constructor(t,e){super(),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new $l(t,e)),this.mergeVertices()}}class eu extends Nl{constructor(t,e={}){const n=e.font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new qi;const r=n.generateShapes(t,e.size);e.depth=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),super(r,e),this.type="TextBufferGeometry"}}class nu extends jc{constructor(t,e){super(),this.type="TextGeometry",this.parameters={text:t,parameters:e},this.fromBufferGeometry(new eu(t,e)),this.mergeVertices()}}class ru extends qi{constructor(t=1,e=.4,n=8,r=6,i=2*Math.PI){super(),this.type="TorusBufferGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:r,arc:i},n=Math.floor(n),r=Math.floor(r);const o=[],a=[],s=[],c=[],l=new Kn,u=new Kn,h=new Kn;for(let o=0;o<=n;o++)for(let d=0;d<=r;d++){const p=d/r*i,f=o/n*Math.PI*2;u.x=(t+e*Math.cos(f))*Math.cos(p),u.y=(t+e*Math.cos(f))*Math.sin(p),u.z=e*Math.sin(f),a.push(u.x,u.y,u.z),l.x=t*Math.cos(p),l.y=t*Math.sin(p),h.subVectors(u,l).normalize(),s.push(h.x,h.y,h.z),c.push(d/r),c.push(o/n)}for(let t=1;t<=n;t++)for(let e=1;e<=r;e++){const n=(r+1)*t+e-1,i=(r+1)*(t-1)+e-1,a=(r+1)*(t-1)+e,s=(r+1)*t+e;o.push(n,i,s),o.push(i,a,s)}this.setIndex(o),this.setAttribute("position",new Ni(a,3)),this.setAttribute("normal",new Ni(s,3)),this.setAttribute("uv",new Ni(c,2))}}class iu extends jc{constructor(t,e,n,r,i){super(),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:r,arc:i},this.fromBufferGeometry(new ru(t,e,n,r,i)),this.mergeVertices()}}class ou extends qi{constructor(t=1,e=.4,n=64,r=8,i=2,o=3){super(),this.type="TorusKnotBufferGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:r,p:i,q:o},n=Math.floor(n),r=Math.floor(r);const a=[],s=[],c=[],l=[],u=new Kn,h=new Kn,d=new Kn,p=new Kn,f=new Kn,m=new Kn,g=new Kn;for(let a=0;a<=n;++a){const y=a/n*i*Math.PI*2;v(y,i,o,t,d),v(y+.01,i,o,t,p),m.subVectors(p,d),g.addVectors(p,d),f.crossVectors(m,g),g.crossVectors(f,m),f.normalize(),g.normalize();for(let t=0;t<=r;++t){const i=t/r*Math.PI*2,o=-e*Math.cos(i),p=e*Math.sin(i);u.x=d.x+(o*g.x+p*f.x),u.y=d.y+(o*g.y+p*f.y),u.z=d.z+(o*g.z+p*f.z),s.push(u.x,u.y,u.z),h.subVectors(u,d).normalize(),c.push(h.x,h.y,h.z),l.push(a/n),l.push(t/r)}}for(let t=1;t<=n;t++)for(let e=1;e<=r;e++){const n=(r+1)*(t-1)+(e-1),i=(r+1)*t+(e-1),o=(r+1)*t+e,s=(r+1)*(t-1)+e;a.push(n,i,s),a.push(i,o,s)}function v(t,e,n,r,i){const o=Math.cos(t),a=Math.sin(t),s=n/e*t,c=Math.cos(s);i.x=r*(2+c)*.5*o,i.y=r*(2+c)*a*.5,i.z=r*Math.sin(s)*.5}this.setIndex(a),this.setAttribute("position",new Ni(s,3)),this.setAttribute("normal",new Ni(c,3)),this.setAttribute("uv",new Ni(l,2))}}class au extends jc{constructor(t,e,n,r,i,o,a){super(),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:r,p:i,q:o},void 0!==a&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new ou(t,e,n,r,i,o)),this.mergeVertices()}}class su extends qi{constructor(t,e=64,n=1,r=8,i=!1){super(),this.type="TubeBufferGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:r,closed:i};const o=t.computeFrenetFrames(e,i);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new Kn,s=new Kn,c=new Gn;let l=new Kn;const u=[],h=[],d=[],p=[];function f(i){l=t.getPointAt(i/e,l);const c=o.normals[i],d=o.binormals[i];for(let t=0;t<=r;t++){const e=t/r*Math.PI*2,i=Math.sin(e),o=-Math.cos(e);s.x=o*c.x+i*d.x,s.y=o*c.y+i*d.y,s.z=o*c.z+i*d.z,s.normalize(),h.push(s.x,s.y,s.z),a.x=l.x+n*s.x,a.y=l.y+n*s.y,a.z=l.z+n*s.z,u.push(a.x,a.y,a.z)}}!function(){for(let t=0;t<e;t++)f(t);f(!1===i?e:0),function(){for(let t=0;t<=e;t++)for(let n=0;n<=r;n++)c.x=t/e,c.y=n/r,d.push(c.x,c.y)}(),function(){for(let t=1;t<=e;t++)for(let e=1;e<=r;e++){const n=(r+1)*(t-1)+(e-1),i=(r+1)*t+(e-1),o=(r+1)*t+e,a=(r+1)*(t-1)+e;p.push(n,i,a),p.push(i,o,a)}}()}(),this.setIndex(p),this.setAttribute("position",new Ni(u,3)),this.setAttribute("normal",new Ni(h,3)),this.setAttribute("uv",new Ni(d,2))}toJSON(){const t=qi.prototype.toJSON.call(this);return t.path=this.parameters.path.toJSON(),t}}class cu extends jc{constructor(t,e,n,r,i,o){super(),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:r,closed:i},void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed.");const a=new su(t,e,n,r,i);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices()}}class lu extends qi{constructor(t){super(),this.type="WireframeGeometry";const e=[],n=[0,0],r={},i=["a","b","c"];if(t&&t.isGeometry){const o=t.faces;for(let t=0,e=o.length;t<e;t++){const e=o[t];for(let t=0;t<3;t++){const o=e[i[t]],a=e[i[(t+1)%3]];n[0]=Math.min(o,a),n[1]=Math.max(o,a);const s=n[0]+","+n[1];void 0===r[s]&&(r[s]={index1:n[0],index2:n[1]})}}for(const n in r){const i=r[n];let o=t.vertices[i.index1];e.push(o.x,o.y,o.z),o=t.vertices[i.index2],e.push(o.x,o.y,o.z)}}else if(t&&t.isBufferGeometry){const i=new Kn;if(null!==t.index){const o=t.attributes.position,a=t.index;let s=t.groups;0===s.length&&(s=[{start:0,count:a.count,materialIndex:0}]);for(let t=0,e=s.length;t<e;++t){const e=s[t],i=e.start;for(let t=i,o=i+e.count;t<o;t+=3)for(let e=0;e<3;e++){const i=a.getX(t+e),o=a.getX(t+(e+1)%3);n[0]=Math.min(i,o),n[1]=Math.max(i,o);const s=n[0]+","+n[1];void 0===r[s]&&(r[s]={index1:n[0],index2:n[1]})}}for(const t in r){const n=r[t];i.fromBufferAttribute(o,n.index1),e.push(i.x,i.y,i.z),i.fromBufferAttribute(o,n.index2),e.push(i.x,i.y,i.z)}}else{const n=t.attributes.position;for(let t=0,r=n.count/3;t<r;t++)for(let r=0;r<3;r++){const o=3*t+r;i.fromBufferAttribute(n,o),e.push(i.x,i.y,i.z);const a=3*t+(r+1)%3;i.fromBufferAttribute(n,a),e.push(i.x,i.y,i.z)}}}this.setAttribute("position",new Ni(e,3))}}var uu=Object.freeze({__proto__:null,BoxGeometry:Wc,BoxBufferGeometry:mo,CircleGeometry:qc,CircleBufferGeometry:Xc,ConeGeometry:Jc,ConeBufferGeometry:Kc,CylinderGeometry:Zc,CylinderBufferGeometry:Yc,DodecahedronGeometry:tl,DodecahedronBufferGeometry:$c,EdgesGeometry:ol,ExtrudeGeometry:Bl,ExtrudeBufferGeometry:Nl,IcosahedronGeometry:Ul,IcosahedronBufferGeometry:Fl,LatheGeometry:Gl,LatheBufferGeometry:zl,OctahedronGeometry:kl,OctahedronBufferGeometry:Hl,ParametricGeometry:jl,ParametricBufferGeometry:Vl,PlaneGeometry:Wl,PlaneBufferGeometry:Co,PolyhedronGeometry:Xl,PolyhedronBufferGeometry:Qc,RingGeometry:Yl,RingBufferGeometry:ql,ShapeGeometry:Jl,ShapeBufferGeometry:Zl,SphereGeometry:Ql,SphereBufferGeometry:Kl,TetrahedronGeometry:tu,TetrahedronBufferGeometry:$l,TextGeometry:nu,TextBufferGeometry:eu,TorusGeometry:iu,TorusBufferGeometry:ru,TorusKnotGeometry:au,TorusKnotBufferGeometry:ou,TubeGeometry:cu,TubeBufferGeometry:su,WireframeGeometry:lu});function hu(t){wi.call(this),this.type="ShadowMaterial",this.color=new yi(0),this.transparent=!0,this.setValues(t)}function du(t){xo.call(this,t),this.type="RawShaderMaterial"}function pu(t){wi.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new yi(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new yi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sn,this.normalScale=new Gn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.vertexTangents=!1,this.setValues(t)}function fu(t){pu.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Gn(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,Object.defineProperty(this,"ior",{get:function(){return(1+.4*this.reflectivity)/(1-.4*this.reflectivity)},set:function(t){this.reflectivity=zn.clamp(2.5*(t-1)/(t+1),0,1)}}),this.sheen=null,this.transmission=0,this.transmissionMap=null,this.setValues(t)}function mu(t){wi.call(this),this.type="MeshPhongMaterial",this.color=new yi(16777215),this.specular=new yi(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new yi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sn,this.normalScale=new Gn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Z,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function gu(t){wi.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new yi(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new yi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sn,this.normalScale=new Gn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function vu(t){wi.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sn,this.normalScale=new Gn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function yu(t){wi.call(this),this.type="MeshLambertMaterial",this.color=new yi(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new yi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Z,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function xu(t){wi.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new yi(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sn,this.normalScale=new Gn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function bu(t){yc.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}hu.prototype=Object.create(wi.prototype),hu.prototype.constructor=hu,hu.prototype.isShadowMaterial=!0,hu.prototype.copy=function(t){return wi.prototype.copy.call(this,t),this.color.copy(t.color),this},du.prototype=Object.create(xo.prototype),du.prototype.constructor=du,du.prototype.isRawShaderMaterial=!0,pu.prototype=Object.create(wi.prototype),pu.prototype.constructor=pu,pu.prototype.isMeshStandardMaterial=!0,pu.prototype.copy=function(t){return wi.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.vertexTangents=t.vertexTangents,this},fu.prototype=Object.create(pu.prototype),fu.prototype.constructor=fu,fu.prototype.isMeshPhysicalMaterial=!0,fu.prototype.copy=function(t){return pu.prototype.copy.call(this,t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.reflectivity=t.reflectivity,t.sheen?this.sheen=(this.sheen||new yi).copy(t.sheen):this.sheen=null,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this},mu.prototype=Object.create(wi.prototype),mu.prototype.constructor=mu,mu.prototype.isMeshPhongMaterial=!0,mu.prototype.copy=function(t){return wi.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},gu.prototype=Object.create(wi.prototype),gu.prototype.constructor=gu,gu.prototype.isMeshToonMaterial=!0,gu.prototype.copy=function(t){return wi.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},vu.prototype=Object.create(wi.prototype),vu.prototype.constructor=vu,vu.prototype.isMeshNormalMaterial=!0,vu.prototype.copy=function(t){return wi.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},yu.prototype=Object.create(wi.prototype),yu.prototype.constructor=yu,yu.prototype.isMeshLambertMaterial=!0,yu.prototype.copy=function(t){return wi.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},xu.prototype=Object.create(wi.prototype),xu.prototype.constructor=xu,xu.prototype.isMeshMatcapMaterial=!0,xu.prototype.copy=function(t){return wi.prototype.copy.call(this,t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},bu.prototype=Object.create(yc.prototype),bu.prototype.constructor=bu,bu.prototype.isLineDashedMaterial=!0,bu.prototype.copy=function(t){return yc.prototype.copy.call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};var wu=Object.freeze({__proto__:null,ShadowMaterial:hu,SpriteMaterial:Vs,RawShaderMaterial:du,ShaderMaterial:xo,PointsMaterial:Rc,MeshPhysicalMaterial:fu,MeshStandardMaterial:pu,MeshPhongMaterial:mu,MeshToonMaterial:gu,MeshNormalMaterial:vu,MeshLambertMaterial:yu,MeshDepthMaterial:Ss,MeshDistanceMaterial:Ts,MeshBasicMaterial:_i,MeshMatcapMaterial:xu,LineDashedMaterial:bu,LineBasicMaterial:yc,Material:wi});const _u={arraySlice:function(t,e,n){return _u.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){const e=t.length,n=new Array(e);for(let t=0;t!==e;++t)n[t]=t;return n.sort((function(e,n){return t[e]-t[n]})),n},sortedArray:function(t,e,n){const r=t.length,i=new t.constructor(r);for(let o=0,a=0;a!==r;++o){const r=n[o]*e;for(let n=0;n!==e;++n)i[a++]=t[r+n]}return i},flattenJSON:function(t,e,n,r){let i=1,o=t[0];for(;void 0!==o&&void 0===o[r];)o=t[i++];if(void 0===o)return;let a=o[r];if(void 0!==a)if(Array.isArray(a))do{a=o[r],void 0!==a&&(e.push(o.time),n.push.apply(n,a)),o=t[i++]}while(void 0!==o);else if(void 0!==a.toArray)do{a=o[r],void 0!==a&&(e.push(o.time),a.toArray(n,n.length)),o=t[i++]}while(void 0!==o);else do{a=o[r],void 0!==a&&(e.push(o.time),n.push(a)),o=t[i++]}while(void 0!==o)},subclip:function(t,e,n,r,i=30){const o=t.clone();o.name=e;const a=[];for(let t=0;t<o.tracks.length;++t){const e=o.tracks[t],s=e.getValueSize(),c=[],l=[];for(let t=0;t<e.times.length;++t){const o=e.times[t]*i;if(!(o<n||o>=r)){c.push(e.times[t]);for(let n=0;n<s;++n)l.push(e.values[t*s+n])}}0!==c.length&&(e.times=_u.convertArray(c,e.times.constructor),e.values=_u.convertArray(l,e.values.constructor),a.push(e))}o.tracks=a;let s=1/0;for(let t=0;t<o.tracks.length;++t)s>o.tracks[t].times[0]&&(s=o.tracks[t].times[0]);for(let t=0;t<o.tracks.length;++t)o.tracks[t].shift(-1*s);return o.resetDuration(),o},makeClipAdditive:function(t,e=0,n=t,r=30){r<=0&&(r=30);const i=n.tracks.length,o=e/r;for(let e=0;e<i;++e){const r=n.tracks[e],i=r.ValueTypeName;if("bool"===i||"string"===i)continue;const a=t.tracks.find((function(t){return t.name===r.name&&t.ValueTypeName===i}));if(void 0===a)continue;let s=0;const c=r.getValueSize();r.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(s=c/3);let l=0;const u=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(l=u/3);const h=r.times.length-1;let d;if(o<=r.times[0]){const t=s,e=c-s;d=_u.arraySlice(r.values,t,e)}else if(o>=r.times[h]){const t=h*c+s,e=t+c-s;d=_u.arraySlice(r.values,t,e)}else{const t=r.createInterpolant(),e=s,n=c-s;t.evaluate(o),d=_u.arraySlice(t.resultBuffer,e,n)}if("quaternion"===i){(new Jn).fromArray(d).normalize().conjugate().toArray(d)}const p=a.times.length;for(let t=0;t<p;++t){const e=t*u+l;if("quaternion"===i)Jn.multiplyQuaternionsFlat(a.values,e,d,0,a.values,e);else{const t=u-2*l;for(let n=0;n<t;++n)a.values[e+n]-=d[n]}}}return t.blendMode=Xe,t}};function Mu(t,e,n,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new e.constructor(n),this.sampleValues=e,this.valueSize=n}function Su(t,e,n,r){Mu.call(this,t,e,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function Tu(t,e,n,r){Mu.call(this,t,e,n,r)}function Eu(t,e,n,r){Mu.call(this,t,e,n,r)}function Au(t,e,n,r){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=_u.convertArray(e,this.TimeBufferType),this.values=_u.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}function Lu(t,e,n){Au.call(this,t,e,n)}function Ru(t,e,n,r){Au.call(this,t,e,n,r)}function Pu(t,e,n,r){Au.call(this,t,e,n,r)}function Cu(t,e,n,r){Mu.call(this,t,e,n,r)}function Iu(t,e,n,r){Au.call(this,t,e,n,r)}function Ou(t,e,n,r){Au.call(this,t,e,n,r)}function Nu(t,e,n,r){Au.call(this,t,e,n,r)}function Du(t,e,n,r){this.name=t,this.tracks=n,this.duration=void 0!==e?e:-1,this.blendMode=void 0!==r?r:We,this.uuid=zn.generateUUID(),this.duration<0&&this.resetDuration()}function Bu(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Pu;case"vector":case"vector2":case"vector3":case"vector4":return Nu;case"color":return Ru;case"quaternion":return Iu;case"bool":case"boolean":return Lu;case"string":return Ou}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);if(void 0===t.times){const e=[],n=[];_u.flattenJSON(t.keys,e,n,"value"),t.times=e,t.values=n}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}Object.assign(Mu.prototype,{evaluate:function(t){const e=this.parameterPositions;let n=this._cachedIndex,r=e[n],i=e[n-1];t:{e:{let o;n:{r:if(!(t<r)){for(let o=n+2;;){if(void 0===r){if(t<i)break r;return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,t,i)}if(n===o)break;if(i=r,r=e[++n],t<r)break e}o=e.length;break n}if(t>=i)break t;{const a=e[1];t<a&&(n=2,i=a);for(let o=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,t,r);if(n===o)break;if(r=i,i=e[--n-1],t>=i)break e}o=n,n=0}}for(;n<o;){const r=n+o>>>1;t<e[r]?o=r:n=r+1}if(r=e[n],i=e[n-1],void 0===i)return this._cachedIndex=0,this.beforeStart_(0,t,r);if(void 0===r)return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,i,t)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,t,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){const e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=t*r;for(let t=0;t!==r;++t)e[t]=n[i+t];return e},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(Mu.prototype,{beforeStart_:Mu.prototype.copySampleValue_,afterEnd_:Mu.prototype.copySampleValue_}),Su.prototype=Object.assign(Object.create(Mu.prototype),{constructor:Su,DefaultSettings_:{endingStart:ke,endingEnd:ke},intervalChanged_:function(t,e,n){const r=this.parameterPositions;let i=t-2,o=t+1,a=r[i],s=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case Ve:i=t,a=2*e-n;break;case je:i=r.length-2,a=e+r[i]-r[i+1];break;default:i=t,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case Ve:o=t,s=2*n-e;break;case je:o=1,s=n+r[1]-r[0];break;default:o=t-1,s=e}const c=.5*(n-e),l=this.valueSize;this._weightPrev=c/(e-a),this._weightNext=c/(s-n),this._offsetPrev=i*l,this._offsetNext=o*l},interpolate_:function(t,e,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,c=s-a,l=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,d=this._weightNext,p=(n-e)/(r-e),f=p*p,m=f*p,g=-h*m+2*h*f-h*p,v=(1+h)*m+(-1.5-2*h)*f+(-.5+h)*p+1,y=(-1-d)*m+(1.5+d)*f+.5*p,x=d*m-d*f;for(let t=0;t!==a;++t)i[t]=g*o[l+t]+v*o[c+t]+y*o[s+t]+x*o[u+t];return i}}),Tu.prototype=Object.assign(Object.create(Mu.prototype),{constructor:Tu,interpolate_:function(t,e,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,c=s-a,l=(n-e)/(r-e),u=1-l;for(let t=0;t!==a;++t)i[t]=o[c+t]*u+o[s+t]*l;return i}}),Eu.prototype=Object.assign(Object.create(Mu.prototype),{constructor:Eu,interpolate_:function(t){return this.copySampleValue_(t-1)}}),Object.assign(Au,{toJSON:function(t){const e=t.constructor;let n;if(void 0!==e.toJSON)n=e.toJSON(t);else{n={name:t.name,times:_u.convertArray(t.times,Array),values:_u.convertArray(t.values,Array)};const e=t.getInterpolation();e!==t.DefaultInterpolation&&(n.interpolation=e)}return n.type=t.ValueTypeName,n}}),Object.assign(Au.prototype,{constructor:Au,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:Ge,InterpolantFactoryMethodDiscrete:function(t){return new Eu(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new Tu(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new Su(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){let e;switch(t){case ze:e=this.InterpolantFactoryMethodDiscrete;break;case Ge:e=this.InterpolantFactoryMethodLinear;break;case He:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){const e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(e);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",e),this}return this.createInterpolant=e,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return ze;case this.InterpolantFactoryMethodLinear:return Ge;case this.InterpolantFactoryMethodSmooth:return He}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t){const e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]+=t}return this},scale:function(t){if(1!==t){const e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]*=t}return this},trim:function(t,e){const n=this.times,r=n.length;let i=0,o=r-1;for(;i!==r&&n[i]<t;)++i;for(;-1!==o&&n[o]>e;)--o;if(++o,0!==i||o!==r){i>=o&&(o=Math.max(o,1),i=o-1);const t=this.getValueSize();this.times=_u.arraySlice(n,i,o),this.values=_u.arraySlice(this.values,i*t,o*t)}return this},validate:function(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let o=null;for(let e=0;e!==i;e++){const r=n[e];if("number"==typeof r&&isNaN(r)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,e,r),t=!1;break}if(null!==o&&o>r){console.error("THREE.KeyframeTrack: Out of order keys.",this,e,r,o),t=!1;break}o=r}if(void 0!==r&&_u.isTypedArray(r))for(let e=0,n=r.length;e!==n;++e){const n=r[e];if(isNaN(n)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,e,n),t=!1;break}}return t},optimize:function(){const t=_u.arraySlice(this.times),e=_u.arraySlice(this.values),n=this.getValueSize(),r=this.getInterpolation()===He,i=t.length-1;let o=1;for(let a=1;a<i;++a){let i=!1;const s=t[a];if(s!==t[a+1]&&(1!==a||s!==s[0]))if(r)i=!0;else{const t=a*n,r=t-n,o=t+n;for(let a=0;a!==n;++a){const n=e[t+a];if(n!==e[r+a]||n!==e[o+a]){i=!0;break}}}if(i){if(a!==o){t[o]=t[a];const r=a*n,i=o*n;for(let t=0;t!==n;++t)e[i+t]=e[r+t]}++o}}if(i>0){t[o]=t[i];for(let t=i*n,r=o*n,a=0;a!==n;++a)e[r+a]=e[t+a];++o}return o!==t.length?(this.times=_u.arraySlice(t,0,o),this.values=_u.arraySlice(e,0,o*n)):(this.times=t,this.values=e),this},clone:function(){const t=_u.arraySlice(this.times,0),e=_u.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,t,e);return n.createInterpolant=this.createInterpolant,n}}),Lu.prototype=Object.assign(Object.create(Au.prototype),{constructor:Lu,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:ze,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Ru.prototype=Object.assign(Object.create(Au.prototype),{constructor:Ru,ValueTypeName:"color"}),Pu.prototype=Object.assign(Object.create(Au.prototype),{constructor:Pu,ValueTypeName:"number"}),Cu.prototype=Object.assign(Object.create(Mu.prototype),{constructor:Cu,interpolate_:function(t,e,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=(n-e)/(r-e);let c=t*a;for(let t=c+a;c!==t;c+=4)Jn.slerpFlat(i,0,o,c-a,o,c,s);return i}}),Iu.prototype=Object.assign(Object.create(Au.prototype),{constructor:Iu,ValueTypeName:"quaternion",DefaultInterpolation:Ge,InterpolantFactoryMethodLinear:function(t){return new Cu(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),Ou.prototype=Object.assign(Object.create(Au.prototype),{constructor:Ou,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:ze,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Nu.prototype=Object.assign(Object.create(Au.prototype),{constructor:Nu,ValueTypeName:"vector"}),Object.assign(Du,{parse:function(t){const e=[],n=t.tracks,r=1/(t.fps||1);for(let t=0,i=n.length;t!==i;++t)e.push(Bu(n[t]).scale(r));const i=new Du(t.name,t.duration,e,t.blendMode);return i.uuid=t.uuid,i},toJSON:function(t){const e=[],n=t.tracks,r={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let t=0,r=n.length;t!==r;++t)e.push(Au.toJSON(n[t]));return r},CreateFromMorphTargetSequence:function(t,e,n,r){const i=e.length,o=[];for(let t=0;t<i;t++){let a=[],s=[];a.push((t+i-1)%i,t,(t+1)%i),s.push(0,1,0);const c=_u.getKeyframeOrder(a);a=_u.sortedArray(a,1,c),s=_u.sortedArray(s,1,c),r||0!==a[0]||(a.push(i),s.push(s[0])),o.push(new Pu(".morphTargetInfluences["+e[t].name+"]",a,s).scale(1/n))}return new Du(t,-1,o)},findByName:function(t,e){let n=t;if(!Array.isArray(t)){const e=t;n=e.geometry&&e.geometry.animations||e.animations}for(let t=0;t<n.length;t++)if(n[t].name===e)return n[t];return null},CreateClipsFromMorphTargetSequences:function(t,e,n){const r={},i=/^([\w-]*?)([\d]+)$/;for(let e=0,n=t.length;e<n;e++){const n=t[e],o=n.name.match(i);if(o&&o.length>1){const t=o[1];let e=r[t];e||(r[t]=e=[]),e.push(n)}}const o=[];for(const t in r)o.push(Du.CreateFromMorphTargetSequence(t,r[t],e,n));return o},parseAnimation:function(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(t,e,n,r,i){if(0!==n.length){const o=[],a=[];_u.flattenJSON(n,o,a,r),0!==o.length&&i.push(new t(e,o,a))}},r=[],i=t.name||"default",o=t.fps||30,a=t.blendMode;let s=t.length||-1;const c=t.hierarchy||[];for(let t=0;t<c.length;t++){const i=c[t].keys;if(i&&0!==i.length)if(i[0].morphTargets){const t={};let e;for(e=0;e<i.length;e++)if(i[e].morphTargets)for(let n=0;n<i[e].morphTargets.length;n++)t[i[e].morphTargets[n]]=-1;for(const n in t){const t=[],o=[];for(let r=0;r!==i[e].morphTargets.length;++r){const r=i[e];t.push(r.time),o.push(r.morphTarget===n?1:0)}r.push(new Pu(".morphTargetInfluence["+n+"]",t,o))}s=t.length*(o||1)}else{const o=".bones["+e[t].name+"]";n(Nu,o+".position",i,"pos",r),n(Iu,o+".quaternion",i,"rot",r),n(Nu,o+".scale",i,"scl",r)}}if(0===r.length)return null;return new Du(i,s,r,a)}}),Object.assign(Du.prototype,{resetDuration:function(){let t=0;for(let e=0,n=this.tracks.length;e!==n;++e){const n=this.tracks[e];t=Math.max(t,n.times[n.times.length-1])}return this.duration=t,this},trim:function(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},validate:function(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t},optimize:function(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this},clone:function(){const t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new Du(this.name,this.duration,t,this.blendMode)},toJSON:function(){return Du.toJSON(this)}});const Fu={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};function Uu(t,e,n){const r=this;let i=!1,o=0,a=0,s=void 0;const c=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){a++,!1===i&&void 0!==r.onStart&&r.onStart(t,o,a),i=!0},this.itemEnd=function(t){o++,void 0!==r.onProgress&&r.onProgress(t,o,a),o===a&&(i=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(t){void 0!==r.onError&&r.onError(t)},this.resolveURL=function(t){return s?s(t):t},this.setURLModifier=function(t){return s=t,this},this.addHandler=function(t,e){return c.push(t,e),this},this.removeHandler=function(t){const e=c.indexOf(t);return-1!==e&&c.splice(e,2),this},this.getHandler=function(t){for(let e=0,n=c.length;e<n;e+=2){const n=c[e],r=c[e+1];if(n.global&&(n.lastIndex=0),n.test(t))return r}return null}}const zu=new Uu;function Gu(t){this.manager=void 0!==t?t:zu,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}Object.assign(Gu.prototype,{load:function(){},loadAsync:function(t,e){const n=this;return new Promise((function(r,i){n.load(t,r,e,i)}))},parse:function(){},setCrossOrigin:function(t){return this.crossOrigin=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setPath:function(t){return this.path=t,this},setResourcePath:function(t){return this.resourcePath=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}});const Hu={};function ku(t){Gu.call(this,t)}function Vu(t){Gu.call(this,t)}function ju(t){Gu.call(this,t)}function Wu(t){Gu.call(this,t)}function Xu(t){Gu.call(this,t)}function qu(t){Gu.call(this,t)}function Yu(t){Gu.call(this,t)}function Zu(){this.type="Curve",this.arcLengthDivisions=200}function Ju(t,e,n,r,i,o,a,s){Zu.call(this),this.type="EllipseCurve",this.aX=t||0,this.aY=e||0,this.xRadius=n||1,this.yRadius=r||1,this.aStartAngle=i||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=a||!1,this.aRotation=s||0}function Ku(t,e,n,r,i,o){Ju.call(this,t,e,n,n,r,i,o),this.type="ArcCurve"}function Qu(){let t=0,e=0,n=0,r=0;function i(i,o,a,s){t=i,e=a,n=-3*i+3*o-2*a-s,r=2*i-2*o+a+s}return{initCatmullRom:function(t,e,n,r,o){i(e,n,o*(n-t),o*(r-e))},initNonuniformCatmullRom:function(t,e,n,r,o,a,s){let c=(e-t)/o-(n-t)/(o+a)+(n-e)/a,l=(n-e)/a-(r-e)/(a+s)+(r-n)/s;c*=a,l*=a,i(e,n,c,l)},calc:function(i){const o=i*i;return t+e*i+n*o+r*(o*i)}}}ku.prototype=Object.assign(Object.create(Gu.prototype),{constructor:ku,load:function(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const i=this,o=Fu.get(t);if(void 0!==o)return i.manager.itemStart(t),setTimeout((function(){e&&e(o),i.manager.itemEnd(t)}),0),o;if(void 0!==Hu[t])return void Hu[t].push({onLoad:e,onProgress:n,onError:r});const a=t.match(/^data:(.*?)(;base64)?,(.*)$/);let s;if(a){const n=a[1],o=!!a[2];let s=a[3];s=decodeURIComponent(s),o&&(s=atob(s));try{let r;const o=(this.responseType||"").toLowerCase();switch(o){case"arraybuffer":case"blob":const t=new Uint8Array(s.length);for(let e=0;e<s.length;e++)t[e]=s.charCodeAt(e);r="blob"===o?new Blob([t.buffer],{type:n}):t.buffer;break;case"document":const e=new DOMParser;r=e.parseFromString(s,n);break;case"json":r=JSON.parse(s);break;default:r=s}setTimeout((function(){e&&e(r),i.manager.itemEnd(t)}),0)}catch(e){setTimeout((function(){r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)}),0)}}else{Hu[t]=[],Hu[t].push({onLoad:e,onProgress:n,onError:r}),s=new XMLHttpRequest,s.open("GET",t,!0),s.addEventListener("load",(function(e){const n=this.response,r=Hu[t];if(delete Hu[t],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Fu.add(t,n);for(let t=0,e=r.length;t<e;t++){const e=r[t];e.onLoad&&e.onLoad(n)}i.manager.itemEnd(t)}else{for(let t=0,n=r.length;t<n;t++){const n=r[t];n.onError&&n.onError(e)}i.manager.itemError(t),i.manager.itemEnd(t)}}),!1),s.addEventListener("progress",(function(e){const n=Hu[t];for(let t=0,r=n.length;t<r;t++){const r=n[t];r.onProgress&&r.onProgress(e)}}),!1),s.addEventListener("error",(function(e){const n=Hu[t];delete Hu[t];for(let t=0,r=n.length;t<r;t++){const r=n[t];r.onError&&r.onError(e)}i.manager.itemError(t),i.manager.itemEnd(t)}),!1),s.addEventListener("abort",(function(e){const n=Hu[t];delete Hu[t];for(let t=0,r=n.length;t<r;t++){const r=n[t];r.onError&&r.onError(e)}i.manager.itemError(t),i.manager.itemEnd(t)}),!1),void 0!==this.responseType&&(s.responseType=this.responseType),void 0!==this.withCredentials&&(s.withCredentials=this.withCredentials),s.overrideMimeType&&s.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(const t in this.requestHeader)s.setRequestHeader(t,this.requestHeader[t]);s.send(null)}return i.manager.itemStart(t),s},setResponseType:function(t){return this.responseType=t,this},setMimeType:function(t){return this.mimeType=t,this}}),Vu.prototype=Object.assign(Object.create(Gu.prototype),{constructor:Vu,load:function(t,e,n,r){const i=this,o=new ku(i.manager);o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(t,(function(n){try{e(i.parse(JSON.parse(n)))}catch(e){r?r(e):console.error(e),i.manager.itemError(t)}}),n,r)},parse:function(t){const e=[];for(let n=0;n<t.length;n++){const r=Du.parse(t[n]);e.push(r)}return e}}),ju.prototype=Object.assign(Object.create(Gu.prototype),{constructor:ju,load:function(t,e,n,r){const i=this,o=[],a=new Fc;a.image=o;const s=new ku(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(i.withCredentials);let c=0;function l(l){s.load(t[l],(function(t){const n=i.parse(t,!0);o[l]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},c+=1,6===c&&(1===n.mipmapCount&&(a.minFilter=xt),a.format=n.format,a.needsUpdate=!0,e&&e(a))}),n,r)}if(Array.isArray(t))for(let e=0,n=t.length;e<n;++e)l(e);else s.load(t,(function(t){const n=i.parse(t,!0);if(n.isCubemap){const t=n.mipmaps.length/n.mipmapCount;for(let e=0;e<t;e++){o[e]={mipmaps:[]};for(let t=0;t<n.mipmapCount;t++)o[e].mipmaps.push(n.mipmaps[e*n.mipmapCount+t]),o[e].format=n.format,o[e].width=n.width,o[e].height=n.height}}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=xt),a.format=n.format,a.needsUpdate=!0,e&&e(a)}),n,r);return a}}),Wu.prototype=Object.assign(Object.create(Gu.prototype),{constructor:Wu,load:function(t,e,n,r){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const i=this,o=Fu.get(t);if(void 0!==o)return i.manager.itemStart(t),setTimeout((function(){e&&e(o),i.manager.itemEnd(t)}),0),o;const a=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){a.removeEventListener("load",s,!1),a.removeEventListener("error",c,!1),Fu.add(t,this),e&&e(this),i.manager.itemEnd(t)}function c(e){a.removeEventListener("load",s,!1),a.removeEventListener("error",c,!1),r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)}return a.addEventListener("load",s,!1),a.addEventListener("error",c,!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(t),a.src=t,a}}),Xu.prototype=Object.assign(Object.create(Gu.prototype),{constructor:Xu,load:function(t,e,n,r){const i=new Mo,o=new Wu(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function s(n){o.load(t[n],(function(t){i.images[n]=t,a++,6===a&&(i.needsUpdate=!0,e&&e(i))}),void 0,r)}for(let e=0;e<t.length;++e)s(e);return i}}),qu.prototype=Object.assign(Object.create(Gu.prototype),{constructor:qu,load:function(t,e,n,r){const i=this,o=new To,a=new ku(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(i.withCredentials),a.load(t,(function(t){const n=i.parse(t);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:dt,o.wrapT=void 0!==n.wrapT?n.wrapT:dt,o.magFilter=void 0!==n.magFilter?n.magFilter:xt,o.minFilter=void 0!==n.minFilter?n.minFilter:xt,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps,o.minFilter=_t),1===n.mipmapCount&&(o.minFilter=xt),o.needsUpdate=!0,e&&e(o,n))}),n,r),o}}),Yu.prototype=Object.assign(Object.create(Gu.prototype),{constructor:Yu,load:function(t,e,n,r){const i=new Wn,o=new Wu(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,(function(n){i.image=n;const r=t.search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/);i.format=r?Ft:Ut,i.needsUpdate=!0,void 0!==e&&e(i)}),n,r),i}}),Object.assign(Zu.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(t,e){const n=this.getUtoTmapping(t);return this.getPoint(n,e)},getPoints:function(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return e},getSpacedPoints:function(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e},getLength:function(){const t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let n,r=this.getPoint(0),i=0;e.push(0);for(let o=1;o<=t;o++)n=this.getPoint(o/t),i+=n.distanceTo(r),e.push(i),r=n;return this.cacheArcLengths=e,e},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){const n=this.getLengths();let r=0;const i=n.length;let o;o=e||t*n[i-1];let a,s=0,c=i-1;for(;s<=c;)if(r=Math.floor(s+(c-s)/2),a=n[r]-o,a<0)s=r+1;else{if(!(a>0)){c=r;break}c=r-1}if(r=c,n[r]===o)return r/(i-1);const l=n[r];return(r+(o-l)/(n[r+1]-l))/(i-1)},getTangent:function(t,e){let n=t-1e-4,r=t+1e-4;n<0&&(n=0),r>1&&(r=1);const i=this.getPoint(n),o=this.getPoint(r),a=e||(i.isVector2?new Gn:new Kn);return a.copy(o).sub(i).normalize(),a},getTangentAt:function(t,e){const n=this.getUtoTmapping(t);return this.getTangent(n,e)},computeFrenetFrames:function(t,e){const n=new Kn,r=[],i=[],o=[],a=new Kn,s=new Tr;for(let e=0;e<=t;e++){const n=e/t;r[e]=this.getTangentAt(n,new Kn),r[e].normalize()}i[0]=new Kn,o[0]=new Kn;let c=Number.MAX_VALUE;const l=Math.abs(r[0].x),u=Math.abs(r[0].y),h=Math.abs(r[0].z);l<=c&&(c=l,n.set(1,0,0)),u<=c&&(c=u,n.set(0,1,0)),h<=c&&n.set(0,0,1),a.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],a),o[0].crossVectors(r[0],i[0]);for(let e=1;e<=t;e++){if(i[e]=i[e-1].clone(),o[e]=o[e-1].clone(),a.crossVectors(r[e-1],r[e]),a.length()>Number.EPSILON){a.normalize();const t=Math.acos(zn.clamp(r[e-1].dot(r[e]),-1,1));i[e].applyMatrix4(s.makeRotationAxis(a,t))}o[e].crossVectors(r[e],i[e])}if(!0===e){let e=Math.acos(zn.clamp(i[0].dot(i[t]),-1,1));e/=t,r[0].dot(a.crossVectors(i[0],i[t]))>0&&(e=-e);for(let n=1;n<=t;n++)i[n].applyMatrix4(s.makeRotationAxis(r[n],e*n)),o[n].crossVectors(r[n],i[n])}return{tangents:r,normals:i,binormals:o}},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this},toJSON:function(){const t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t},fromJSON:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}),Ju.prototype=Object.create(Zu.prototype),Ju.prototype.constructor=Ju,Ju.prototype.isEllipseCurve=!0,Ju.prototype.getPoint=function(t,e){const n=e||new Gn,r=2*Math.PI;let i=this.aEndAngle-this.aStartAngle;const o=Math.abs(i)<Number.EPSILON;for(;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=o?0:r),!0!==this.aClockwise||o||(i===r?i=-r:i-=r);const a=this.aStartAngle+t*i;let s=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const t=Math.cos(this.aRotation),e=Math.sin(this.aRotation),n=s-this.aX,r=c-this.aY;s=n*t-r*e+this.aX,c=n*e+r*t+this.aY}return n.set(s,c)},Ju.prototype.copy=function(t){return Zu.prototype.copy.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},Ju.prototype.toJSON=function(){const t=Zu.prototype.toJSON.call(this);return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t},Ju.prototype.fromJSON=function(t){return Zu.prototype.fromJSON.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},Ku.prototype=Object.create(Ju.prototype),Ku.prototype.constructor=Ku,Ku.prototype.isArcCurve=!0;const $u=new Kn,th=new Qu,eh=new Qu,nh=new Qu;function rh(t=[],e=!1,n="centripetal",r=.5){Zu.call(this),this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=n,this.tension=r}function ih(t,e,n,r,i){const o=.5*(r-e),a=.5*(i-n),s=t*t;return(2*n-2*r+o+a)*(t*s)+(-3*n+3*r-2*o-a)*s+o*t+n}function oh(t,e,n,r){return function(t,e){const n=1-t;return n*n*e}(t,e)+function(t,e){return 2*(1-t)*t*e}(t,n)+function(t,e){return t*t*e}(t,r)}function ah(t,e,n,r,i){return function(t,e){const n=1-t;return n*n*n*e}(t,e)+function(t,e){const n=1-t;return 3*n*n*t*e}(t,n)+function(t,e){return 3*(1-t)*t*t*e}(t,r)+function(t,e){return t*t*t*e}(t,i)}function sh(t=new Gn,e=new Gn,n=new Gn,r=new Gn){Zu.call(this),this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=n,this.v3=r}function ch(t=new Kn,e=new Kn,n=new Kn,r=new Kn){Zu.call(this),this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=n,this.v3=r}function lh(t=new Gn,e=new Gn){Zu.call(this),this.type="LineCurve",this.v1=t,this.v2=e}function uh(t=new Kn,e=new Kn){Zu.call(this),this.type="LineCurve3",this.v1=t,this.v2=e}function hh(t=new Gn,e=new Gn,n=new Gn){Zu.call(this),this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=n}function dh(t=new Kn,e=new Kn,n=new Kn){Zu.call(this),this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=n}function ph(t=[]){Zu.call(this),this.type="SplineCurve",this.points=t}rh.prototype=Object.create(Zu.prototype),rh.prototype.constructor=rh,rh.prototype.isCatmullRomCurve3=!0,rh.prototype.getPoint=function(t,e=new Kn){const n=e,r=this.points,i=r.length,o=(i-(this.closed?0:1))*t;let a,s,c=Math.floor(o),l=o-c;this.closed?c+=c>0?0:(Math.floor(Math.abs(c)/i)+1)*i:0===l&&c===i-1&&(c=i-2,l=1),this.closed||c>0?a=r[(c-1)%i]:($u.subVectors(r[0],r[1]).add(r[0]),a=$u);const u=r[c%i],h=r[(c+1)%i];if(this.closed||c+2<i?s=r[(c+2)%i]:($u.subVectors(r[i-1],r[i-2]).add(r[i-1]),s=$u),"centripetal"===this.curveType||"chordal"===this.curveType){const t="chordal"===this.curveType?.5:.25;let e=Math.pow(a.distanceToSquared(u),t),n=Math.pow(u.distanceToSquared(h),t),r=Math.pow(h.distanceToSquared(s),t);n<1e-4&&(n=1),e<1e-4&&(e=n),r<1e-4&&(r=n),th.initNonuniformCatmullRom(a.x,u.x,h.x,s.x,e,n,r),eh.initNonuniformCatmullRom(a.y,u.y,h.y,s.y,e,n,r),nh.initNonuniformCatmullRom(a.z,u.z,h.z,s.z,e,n,r)}else"catmullrom"===this.curveType&&(th.initCatmullRom(a.x,u.x,h.x,s.x,this.tension),eh.initCatmullRom(a.y,u.y,h.y,s.y,this.tension),nh.initCatmullRom(a.z,u.z,h.z,s.z,this.tension));return n.set(th.calc(l),eh.calc(l),nh.calc(l)),n},rh.prototype.copy=function(t){Zu.prototype.copy.call(this,t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push(n.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},rh.prototype.toJSON=function(){const t=Zu.prototype.toJSON.call(this);t.points=[];for(let e=0,n=this.points.length;e<n;e++){const n=this.points[e];t.points.push(n.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t},rh.prototype.fromJSON=function(t){Zu.prototype.fromJSON.call(this,t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push((new Kn).fromArray(n))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},sh.prototype=Object.create(Zu.prototype),sh.prototype.constructor=sh,sh.prototype.isCubicBezierCurve=!0,sh.prototype.getPoint=function(t,e=new Gn){const n=e,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(ah(t,r.x,i.x,o.x,a.x),ah(t,r.y,i.y,o.y,a.y)),n},sh.prototype.copy=function(t){return Zu.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},sh.prototype.toJSON=function(){const t=Zu.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},sh.prototype.fromJSON=function(t){return Zu.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},ch.prototype=Object.create(Zu.prototype),ch.prototype.constructor=ch,ch.prototype.isCubicBezierCurve3=!0,ch.prototype.getPoint=function(t,e=new Kn){const n=e,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(ah(t,r.x,i.x,o.x,a.x),ah(t,r.y,i.y,o.y,a.y),ah(t,r.z,i.z,o.z,a.z)),n},ch.prototype.copy=function(t){return Zu.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},ch.prototype.toJSON=function(){const t=Zu.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},ch.prototype.fromJSON=function(t){return Zu.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},lh.prototype=Object.create(Zu.prototype),lh.prototype.constructor=lh,lh.prototype.isLineCurve=!0,lh.prototype.getPoint=function(t,e=new Gn){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n},lh.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},lh.prototype.getTangent=function(t,e){const n=e||new Gn;return n.copy(this.v2).sub(this.v1).normalize(),n},lh.prototype.copy=function(t){return Zu.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},lh.prototype.toJSON=function(){const t=Zu.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},lh.prototype.fromJSON=function(t){return Zu.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},uh.prototype=Object.create(Zu.prototype),uh.prototype.constructor=uh,uh.prototype.isLineCurve3=!0,uh.prototype.getPoint=function(t,e=new Kn){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n},uh.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},uh.prototype.copy=function(t){return Zu.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},uh.prototype.toJSON=function(){const t=Zu.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},uh.prototype.fromJSON=function(t){return Zu.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},hh.prototype=Object.create(Zu.prototype),hh.prototype.constructor=hh,hh.prototype.isQuadraticBezierCurve=!0,hh.prototype.getPoint=function(t,e=new Gn){const n=e,r=this.v0,i=this.v1,o=this.v2;return n.set(oh(t,r.x,i.x,o.x),oh(t,r.y,i.y,o.y)),n},hh.prototype.copy=function(t){return Zu.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},hh.prototype.toJSON=function(){const t=Zu.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},hh.prototype.fromJSON=function(t){return Zu.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},dh.prototype=Object.create(Zu.prototype),dh.prototype.constructor=dh,dh.prototype.isQuadraticBezierCurve3=!0,dh.prototype.getPoint=function(t,e=new Kn){const n=e,r=this.v0,i=this.v1,o=this.v2;return n.set(oh(t,r.x,i.x,o.x),oh(t,r.y,i.y,o.y),oh(t,r.z,i.z,o.z)),n},dh.prototype.copy=function(t){return Zu.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},dh.prototype.toJSON=function(){const t=Zu.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},dh.prototype.fromJSON=function(t){return Zu.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},ph.prototype=Object.create(Zu.prototype),ph.prototype.constructor=ph,ph.prototype.isSplineCurve=!0,ph.prototype.getPoint=function(t,e=new Gn){const n=e,r=this.points,i=(r.length-1)*t,o=Math.floor(i),a=i-o,s=r[0===o?o:o-1],c=r[o],l=r[o>r.length-2?r.length-1:o+1],u=r[o>r.length-3?r.length-1:o+2];return n.set(ih(a,s.x,c.x,l.x,u.x),ih(a,s.y,c.y,l.y,u.y)),n},ph.prototype.copy=function(t){Zu.prototype.copy.call(this,t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push(n.clone())}return this},ph.prototype.toJSON=function(){const t=Zu.prototype.toJSON.call(this);t.points=[];for(let e=0,n=this.points.length;e<n;e++){const n=this.points[e];t.points.push(n.toArray())}return t},ph.prototype.fromJSON=function(t){Zu.prototype.fromJSON.call(this,t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push((new Gn).fromArray(n))}return this};var fh=Object.freeze({__proto__:null,ArcCurve:Ku,CatmullRomCurve3:rh,CubicBezierCurve:sh,CubicBezierCurve3:ch,EllipseCurve:Ju,LineCurve:lh,LineCurve3:uh,QuadraticBezierCurve:hh,QuadraticBezierCurve3:dh,SplineCurve:ph});function mh(){Zu.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function gh(t){mh.call(this),this.type="Path",this.currentPoint=new Gn,t&&this.setFromPoints(t)}function vh(t){gh.call(this,t),this.uuid=zn.generateUUID(),this.type="Shape",this.holes=[]}function yh(t,e=1){Jr.call(this),this.type="Light",this.color=new yi(t),this.intensity=e}function xh(t,e,n){yh.call(this,t,n),this.type="HemisphereLight",this.position.copy(Jr.DefaultUp),this.updateMatrix(),this.groundColor=new yi(e)}function bh(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new Gn(512,512),this.map=null,this.mapPass=null,this.matrix=new Tr,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Lo,this._frameExtents=new Gn(1,1),this._viewportCount=1,this._viewports=[new qn(0,0,1,1)]}function wh(){bh.call(this,new wo(50,1,.5,500)),this.focus=1}function _h(t,e,n,r,i,o){yh.call(this,t,e),this.type="SpotLight",this.position.copy(Jr.DefaultUp),this.updateMatrix(),this.target=new Jr,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==r?r:Math.PI/3,this.penumbra=void 0!==i?i:0,this.decay=void 0!==o?o:1,this.shadow=new wh}function Mh(){bh.call(this,new wo(90,1,.5,500)),this._frameExtents=new Gn(4,2),this._viewportCount=6,this._viewports=[new qn(2,1,1,1),new qn(0,1,1,1),new qn(3,1,1,1),new qn(1,1,1,1),new qn(3,0,1,1),new qn(1,0,1,1)],this._cubeDirections=[new Kn(1,0,0),new Kn(-1,0,0),new Kn(0,0,1),new Kn(0,0,-1),new Kn(0,1,0),new Kn(0,-1,0)],this._cubeUps=[new Kn(0,1,0),new Kn(0,1,0),new Kn(0,1,0),new Kn(0,1,0),new Kn(0,0,1),new Kn(0,0,-1)]}function Sh(t,e,n,r){yh.call(this,t,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==r?r:1,this.shadow=new Mh}function Th(t,e,n,r,i,o){bo.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==t?t:-1,this.right=void 0!==e?e:1,this.top=void 0!==n?n:1,this.bottom=void 0!==r?r:-1,this.near=void 0!==i?i:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function Eh(){bh.call(this,new Th(-5,5,5,-5,.5,500))}function Ah(t,e){yh.call(this,t,e),this.type="DirectionalLight",this.position.copy(Jr.DefaultUp),this.updateMatrix(),this.target=new Jr,this.shadow=new Eh}function Lh(t,e){yh.call(this,t,e),this.type="AmbientLight"}function Rh(t,e,n,r){yh.call(this,t,e),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==r?r:10}mh.prototype=Object.assign(Object.create(Zu.prototype),{constructor:mh,add:function(t){this.curves.push(t)},closePath:function(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new lh(e,t))},getPoint:function(t){const e=t*this.getLength(),n=this.getCurveLengths();let r=0;for(;r<n.length;){if(n[r]>=e){const t=n[r]-e,i=this.curves[r],o=i.getLength(),a=0===o?0:1-t/o;return i.getPointAt(a)}r++}return null},getLength:function(){const t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let n=0,r=this.curves.length;n<r;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t},getSpacedPoints:function(t=40){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t=12){const e=[];let n;for(let r=0,i=this.curves;r<i.length;r++){const o=i[r],a=o&&o.isEllipseCurve?2*t:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?t*o.points.length:t,s=o.getPoints(a);for(let t=0;t<s.length;t++){const r=s[t];n&&n.equals(r)||(e.push(r),n=r)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e},copy:function(t){Zu.prototype.copy.call(this,t),this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const n=t.curves[e];this.curves.push(n.clone())}return this.autoClose=t.autoClose,this},toJSON:function(){const t=Zu.prototype.toJSON.call(this);t.autoClose=this.autoClose,t.curves=[];for(let e=0,n=this.curves.length;e<n;e++){const n=this.curves[e];t.curves.push(n.toJSON())}return t},fromJSON:function(t){Zu.prototype.fromJSON.call(this,t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const n=t.curves[e];this.curves.push((new fh[n.type]).fromJSON(n))}return this}}),gh.prototype=Object.assign(Object.create(mh.prototype),{constructor:gh,setFromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(let e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this},moveTo:function(t,e){return this.currentPoint.set(t,e),this},lineTo:function(t,e){const n=new lh(this.currentPoint.clone(),new Gn(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this},quadraticCurveTo:function(t,e,n,r){const i=new hh(this.currentPoint.clone(),new Gn(t,e),new Gn(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this},bezierCurveTo:function(t,e,n,r,i,o){const a=new sh(this.currentPoint.clone(),new Gn(t,e),new Gn(n,r),new Gn(i,o));return this.curves.push(a),this.currentPoint.set(i,o),this},splineThru:function(t){const e=new ph([this.currentPoint.clone()].concat(t));return this.curves.push(e),this.currentPoint.copy(t[t.length-1]),this},arc:function(t,e,n,r,i,o){const a=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(t+a,e+s,n,r,i,o),this},absarc:function(t,e,n,r,i,o){return this.absellipse(t,e,n,n,r,i,o),this},ellipse:function(t,e,n,r,i,o,a,s){const c=this.currentPoint.x,l=this.currentPoint.y;return this.absellipse(t+c,e+l,n,r,i,o,a,s),this},absellipse:function(t,e,n,r,i,o,a,s){const c=new Ju(t,e,n,r,i,o,a,s);if(this.curves.length>0){const t=c.getPoint(0);t.equals(this.currentPoint)||this.lineTo(t.x,t.y)}this.curves.push(c);const l=c.getPoint(1);return this.currentPoint.copy(l),this},copy:function(t){return mh.prototype.copy.call(this,t),this.currentPoint.copy(t.currentPoint),this},toJSON:function(){const t=mh.prototype.toJSON.call(this);return t.currentPoint=this.currentPoint.toArray(),t},fromJSON:function(t){return mh.prototype.fromJSON.call(this,t),this.currentPoint.fromArray(t.currentPoint),this}}),vh.prototype=Object.assign(Object.create(gh.prototype),{constructor:vh,getPointsHoles:function(t){const e=[];for(let n=0,r=this.holes.length;n<r;n++)e[n]=this.holes[n].getPoints(t);return e},extractPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},copy:function(t){gh.prototype.copy.call(this,t),this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const n=t.holes[e];this.holes.push(n.clone())}return this},toJSON:function(){const t=gh.prototype.toJSON.call(this);t.uuid=this.uuid,t.holes=[];for(let e=0,n=this.holes.length;e<n;e++){const n=this.holes[e];t.holes.push(n.toJSON())}return t},fromJSON:function(t){gh.prototype.fromJSON.call(this,t),this.uuid=t.uuid,this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const n=t.holes[e];this.holes.push((new gh).fromJSON(n))}return this}}),yh.prototype=Object.assign(Object.create(Jr.prototype),{constructor:yh,isLight:!0,copy:function(t){return Jr.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){const e=Jr.prototype.toJSON.call(this,t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}),xh.prototype=Object.assign(Object.create(yh.prototype),{constructor:xh,isHemisphereLight:!0,copy:function(t){return yh.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}),Object.assign(bh.prototype,{_projScreenMatrix:new Tr,_lightPositionWorld:new Kn,_lookTarget:new Kn,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(t){const e=this.camera,n=this.matrix,r=this._projScreenMatrix,i=this._lookTarget,o=this._lightPositionWorld;o.setFromMatrixPosition(t.matrixWorld),e.position.copy(o),i.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(i),e.updateMatrixWorld(),r.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(r),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(e.projectionMatrix),n.multiply(e.matrixWorldInverse)},getViewport:function(t){return this._viewports[t]},getFrameExtents:function(){return this._frameExtents},copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){const t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}),wh.prototype=Object.assign(Object.create(bh.prototype),{constructor:wh,isSpotLightShadow:!0,updateMatrices:function(t){const e=this.camera,n=2*zn.RAD2DEG*t.angle*this.focus,r=this.mapSize.width/this.mapSize.height,i=t.distance||e.far;n===e.fov&&r===e.aspect&&i===e.far||(e.fov=n,e.aspect=r,e.far=i,e.updateProjectionMatrix()),bh.prototype.updateMatrices.call(this,t)}}),_h.prototype=Object.assign(Object.create(yh.prototype),{constructor:_h,isSpotLight:!0,copy:function(t){return yh.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),Mh.prototype=Object.assign(Object.create(bh.prototype),{constructor:Mh,isPointLightShadow:!0,updateMatrices:function(t,e=0){const n=this.camera,r=this.matrix,i=this._lightPositionWorld,o=this._lookTarget,a=this._projScreenMatrix;i.setFromMatrixPosition(t.matrixWorld),n.position.copy(i),o.copy(n.position),o.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(o),n.updateMatrixWorld(),r.makeTranslation(-i.x,-i.y,-i.z),a.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(a)}}),Sh.prototype=Object.assign(Object.create(yh.prototype),{constructor:Sh,isPointLight:!0,copy:function(t){return yh.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}),Th.prototype=Object.assign(Object.create(bo.prototype),{constructor:Th,isOrthographicCamera:!0,copy:function(t,e){return bo.prototype.copy.call(this,t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,e,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=n-t,o=n+t,a=r+e,s=r-e;if(null!==this.view&&this.view.enabled){const t=(this.right-this.left)/this.view.fullWidth/this.zoom,e=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=t*this.view.offsetX,o=i+t*this.view.width,a-=e*this.view.offsetY,s=a-e*this.view.height}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()},toJSON:function(t){const e=Jr.prototype.toJSON.call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}),Eh.prototype=Object.assign(Object.create(bh.prototype),{constructor:Eh,isDirectionalLightShadow:!0,updateMatrices:function(t){bh.prototype.updateMatrices.call(this,t)}}),Ah.prototype=Object.assign(Object.create(yh.prototype),{constructor:Ah,isDirectionalLight:!0,copy:function(t){return yh.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),Lh.prototype=Object.assign(Object.create(yh.prototype),{constructor:Lh,isAmbientLight:!0}),Rh.prototype=Object.assign(Object.create(yh.prototype),{constructor:Rh,isRectAreaLight:!0,copy:function(t){return yh.prototype.copy.call(this,t),this.width=t.width,this.height=t.height,this},toJSON:function(t){const e=yh.prototype.toJSON.call(this,t);return e.object.width=this.width,e.object.height=this.height,e}});class Ph{constructor(){Object.defineProperty(this,"isSphericalHarmonics3",{value:!0}),this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new Kn)}set(t){for(let e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,e){const n=t.x,r=t.y,i=t.z,o=this.coefficients;return e.copy(o[0]).multiplyScalar(.282095),e.addScaledVector(o[1],.488603*r),e.addScaledVector(o[2],.488603*i),e.addScaledVector(o[3],.488603*n),e.addScaledVector(o[4],n*r*1.092548),e.addScaledVector(o[5],r*i*1.092548),e.addScaledVector(o[6],.315392*(3*i*i-1)),e.addScaledVector(o[7],n*i*1.092548),e.addScaledVector(o[8],.546274*(n*n-r*r)),e}getIrradianceAt(t,e){const n=t.x,r=t.y,i=t.z,o=this.coefficients;return e.copy(o[0]).multiplyScalar(.886227),e.addScaledVector(o[1],1.023328*r),e.addScaledVector(o[2],1.023328*i),e.addScaledVector(o[3],1.023328*n),e.addScaledVector(o[4],.858086*n*r),e.addScaledVector(o[5],.858086*r*i),e.addScaledVector(o[6],.743125*i*i-.247708),e.addScaledVector(o[7],.858086*n*i),e.addScaledVector(o[8],.429043*(n*n-r*r)),e}add(t){for(let e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this}addScaledSH(t,e){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(t.coefficients[n],e);return this}scale(t){for(let e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this}lerp(t,e){for(let n=0;n<9;n++)this.coefficients[n].lerp(t.coefficients[n],e);return this}equals(t){for(let e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(t,e=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(t,e+3*r);return this}toArray(t=[],e=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(t,e+3*r);return t}static getBasisAt(t,e){const n=t.x,r=t.y,i=t.z;e[0]=.282095,e[1]=.488603*r,e[2]=.488603*i,e[3]=.488603*n,e[4]=1.092548*n*r,e[5]=1.092548*r*i,e[6]=.315392*(3*i*i-1),e[7]=1.092548*n*i,e[8]=.546274*(n*n-r*r)}}function Ch(t,e){yh.call(this,void 0,e),this.type="LightProbe",this.sh=void 0!==t?t:new Ph}function Ih(t){Gu.call(this,t),this.textures={}}Ch.prototype=Object.assign(Object.create(yh.prototype),{constructor:Ch,isLightProbe:!0,copy:function(t){return yh.prototype.copy.call(this,t),this.sh.copy(t.sh),this},fromJSON:function(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this},toJSON:function(t){const e=yh.prototype.toJSON.call(this,t);return e.object.sh=this.sh.toArray(),e}}),Ih.prototype=Object.assign(Object.create(Gu.prototype),{constructor:Ih,load:function(t,e,n,r){const i=this,o=new ku(i.manager);o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(t,(function(n){try{e(i.parse(JSON.parse(n)))}catch(e){r?r(e):console.error(e),i.manager.itemError(t)}}),n,r)},parse:function(t){const e=this.textures;function n(t){return void 0===e[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),e[t]}const r=new wu[t.type];if(void 0!==t.uuid&&(r.uuid=t.uuid),void 0!==t.name&&(r.name=t.name),void 0!==t.color&&void 0!==r.color&&r.color.setHex(t.color),void 0!==t.roughness&&(r.roughness=t.roughness),void 0!==t.metalness&&(r.metalness=t.metalness),void 0!==t.sheen&&(r.sheen=(new yi).setHex(t.sheen)),void 0!==t.emissive&&void 0!==r.emissive&&r.emissive.setHex(t.emissive),void 0!==t.specular&&void 0!==r.specular&&r.specular.setHex(t.specular),void 0!==t.shininess&&(r.shininess=t.shininess),void 0!==t.clearcoat&&(r.clearcoat=t.clearcoat),void 0!==t.clearcoatRoughness&&(r.clearcoatRoughness=t.clearcoatRoughness),void 0!==t.fog&&(r.fog=t.fog),void 0!==t.flatShading&&(r.flatShading=t.flatShading),void 0!==t.blending&&(r.blending=t.blending),void 0!==t.combine&&(r.combine=t.combine),void 0!==t.side&&(r.side=t.side),void 0!==t.opacity&&(r.opacity=t.opacity),void 0!==t.transparent&&(r.transparent=t.transparent),void 0!==t.alphaTest&&(r.alphaTest=t.alphaTest),void 0!==t.depthTest&&(r.depthTest=t.depthTest),void 0!==t.depthWrite&&(r.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(r.colorWrite=t.colorWrite),void 0!==t.stencilWrite&&(r.stencilWrite=t.stencilWrite),void 0!==t.stencilWriteMask&&(r.stencilWriteMask=t.stencilWriteMask),void 0!==t.stencilFunc&&(r.stencilFunc=t.stencilFunc),void 0!==t.stencilRef&&(r.stencilRef=t.stencilRef),void 0!==t.stencilFuncMask&&(r.stencilFuncMask=t.stencilFuncMask),void 0!==t.stencilFail&&(r.stencilFail=t.stencilFail),void 0!==t.stencilZFail&&(r.stencilZFail=t.stencilZFail),void 0!==t.stencilZPass&&(r.stencilZPass=t.stencilZPass),void 0!==t.wireframe&&(r.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(r.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(r.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(r.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(r.rotation=t.rotation),1!==t.linewidth&&(r.linewidth=t.linewidth),void 0!==t.dashSize&&(r.dashSize=t.dashSize),void 0!==t.gapSize&&(r.gapSize=t.gapSize),void 0!==t.scale&&(r.scale=t.scale),void 0!==t.polygonOffset&&(r.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(r.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(r.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.skinning&&(r.skinning=t.skinning),void 0!==t.morphTargets&&(r.morphTargets=t.morphTargets),void 0!==t.morphNormals&&(r.morphNormals=t.morphNormals),void 0!==t.dithering&&(r.dithering=t.dithering),void 0!==t.vertexTangents&&(r.vertexTangents=t.vertexTangents),void 0!==t.visible&&(r.visible=t.visible),void 0!==t.toneMapped&&(r.toneMapped=t.toneMapped),void 0!==t.userData&&(r.userData=t.userData),void 0!==t.vertexColors&&("number"==typeof t.vertexColors?r.vertexColors=t.vertexColors>0:r.vertexColors=t.vertexColors),void 0!==t.uniforms)for(const e in t.uniforms){const i=t.uniforms[e];switch(r.uniforms[e]={},i.type){case"t":r.uniforms[e].value=n(i.value);break;case"c":r.uniforms[e].value=(new yi).setHex(i.value);break;case"v2":r.uniforms[e].value=(new Gn).fromArray(i.value);break;case"v3":r.uniforms[e].value=(new Kn).fromArray(i.value);break;case"v4":r.uniforms[e].value=(new qn).fromArray(i.value);break;case"m3":r.uniforms[e].value=(new Hn).fromArray(i.value);break;case"m4":r.uniforms[e].value=(new Tr).fromArray(i.value);break;default:r.uniforms[e].value=i.value}}if(void 0!==t.defines&&(r.defines=t.defines),void 0!==t.vertexShader&&(r.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(r.fragmentShader=t.fragmentShader),void 0!==t.extensions)for(const e in t.extensions)r.extensions[e]=t.extensions[e];if(void 0!==t.shading&&(r.flatShading=1===t.shading),void 0!==t.size&&(r.size=t.size),void 0!==t.sizeAttenuation&&(r.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(r.map=n(t.map)),void 0!==t.matcap&&(r.matcap=n(t.matcap)),void 0!==t.alphaMap&&(r.alphaMap=n(t.alphaMap)),void 0!==t.bumpMap&&(r.bumpMap=n(t.bumpMap)),void 0!==t.bumpScale&&(r.bumpScale=t.bumpScale),void 0!==t.normalMap&&(r.normalMap=n(t.normalMap)),void 0!==t.normalMapType&&(r.normalMapType=t.normalMapType),void 0!==t.normalScale){let e=t.normalScale;!1===Array.isArray(e)&&(e=[e,e]),r.normalScale=(new Gn).fromArray(e)}return void 0!==t.displacementMap&&(r.displacementMap=n(t.displacementMap)),void 0!==t.displacementScale&&(r.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(r.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(r.roughnessMap=n(t.roughnessMap)),void 0!==t.metalnessMap&&(r.metalnessMap=n(t.metalnessMap)),void 0!==t.emissiveMap&&(r.emissiveMap=n(t.emissiveMap)),void 0!==t.emissiveIntensity&&(r.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(r.specularMap=n(t.specularMap)),void 0!==t.envMap&&(r.envMap=n(t.envMap)),void 0!==t.envMapIntensity&&(r.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(r.reflectivity=t.reflectivity),void 0!==t.refractionRatio&&(r.refractionRatio=t.refractionRatio),void 0!==t.lightMap&&(r.lightMap=n(t.lightMap)),void 0!==t.lightMapIntensity&&(r.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(r.aoMap=n(t.aoMap)),void 0!==t.aoMapIntensity&&(r.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(r.gradientMap=n(t.gradientMap)),void 0!==t.clearcoatMap&&(r.clearcoatMap=n(t.clearcoatMap)),void 0!==t.clearcoatRoughnessMap&&(r.clearcoatRoughnessMap=n(t.clearcoatRoughnessMap)),void 0!==t.clearcoatNormalMap&&(r.clearcoatNormalMap=n(t.clearcoatNormalMap)),void 0!==t.clearcoatNormalScale&&(r.clearcoatNormalScale=(new Gn).fromArray(t.clearcoatNormalScale)),void 0!==t.transmission&&(r.transmission=t.transmission),void 0!==t.transmissionMap&&(r.transmissionMap=n(t.transmissionMap)),r},setTextures:function(t){return this.textures=t,this}});const Oh={decodeText:function(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);let e="";for(let n=0,r=t.length;n<r;n++)e+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(e))}catch(t){return e}},extractUrlBase:function(t){const e=t.lastIndexOf("/");return-1===e?"./":t.substr(0,e+1)}};function Nh(){qi.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}function Dh(t,e,n,r){"number"==typeof n&&(r=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),Ti.call(this,t,e,n),this.meshPerAttribute=r||1}function Bh(t){Gu.call(this,t)}Nh.prototype=Object.assign(Object.create(qi.prototype),{constructor:Nh,isInstancedBufferGeometry:!0,copy:function(t){return qi.prototype.copy.call(this,t),this.instanceCount=t.instanceCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){const t=qi.prototype.toJSON.call(this);return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}),Dh.prototype=Object.assign(Object.create(Ti.prototype),{constructor:Dh,isInstancedBufferAttribute:!0,copy:function(t){return Ti.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},toJSON:function(){const t=Ti.prototype.toJSON.call(this);return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}),Bh.prototype=Object.assign(Object.create(Gu.prototype),{constructor:Bh,load:function(t,e,n,r){const i=this,o=new ku(i.manager);o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(t,(function(n){try{e(i.parse(JSON.parse(n)))}catch(e){r?r(e):console.error(e),i.manager.itemError(t)}}),n,r)},parse:function(t){const e={},n={};function r(t,r){if(void 0!==e[r])return e[r];const i=t.interleavedBuffers[r],o=function(t,e){if(void 0!==n[e])return n[e];const r=t.arrayBuffers[e],i=new Uint32Array(r).buffer;return n[e]=i,i}(t,i.buffer),a=new Gs(zi(i.type,o),i.stride);return a.uuid=i.uuid,e[r]=a,a}const i=t.isInstancedBufferGeometry?new Nh:new qi,o=t.data.index;if(void 0!==o){const t=zi(o.type,o.array);i.setIndex(new Ti(t,1))}const a=t.data.attributes;for(const e in a){const n=a[e];let o;if(n.isInterleavedBufferAttribute){o=new ks(r(t.data,n.data),n.itemSize,n.offset,n.normalized)}else{const t=zi(n.type,n.array);o=new(n.isInstancedBufferAttribute?Dh:Ti)(t,n.itemSize,n.normalized)}void 0!==n.name&&(o.name=n.name),i.setAttribute(e,o)}const s=t.data.morphAttributes;if(s)for(const e in s){const n=s[e],o=[];for(let e=0,i=n.length;e<i;e++){const i=n[e];let a;if(i.isInterleavedBufferAttribute){a=new ks(r(t.data,i.data),i.itemSize,i.offset,i.normalized)}else{a=new Ti(zi(i.type,i.array),i.itemSize,i.normalized)}void 0!==i.name&&(a.name=i.name),o.push(a)}i.morphAttributes[e]=o}t.data.morphTargetsRelative&&(i.morphTargetsRelative=!0);const c=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==c)for(let t=0,e=c.length;t!==e;++t){const e=c[t];i.addGroup(e.start,e.count,e.materialIndex)}const l=t.data.boundingSphere;if(void 0!==l){const t=new Kn;void 0!==l.center&&t.fromArray(l.center),i.boundingSphere=new gr(t,l.radius)}return t.name&&(i.name=t.name),t.userData&&(i.userData=t.userData),i}});class Fh extends Gu{constructor(t){super(t)}load(t,e,n,r){const i=this,o=""===this.path?Oh.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||o;const a=new ku(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,(function(n){let o=null;try{o=JSON.parse(n)}catch(e){return void 0!==r&&r(e),void console.error("THREE:ObjectLoader: Can't parse "+t+".",e.message)}const a=o.metadata;void 0!==a&&void 0!==a.type&&"geometry"!==a.type.toLowerCase()?i.parse(o,e):console.error("THREE.ObjectLoader: Can't load "+t)}),n,r)}parse(t,e){const n=this.parseAnimations(t.animations),r=this.parseShapes(t.shapes),i=this.parseGeometries(t.geometries,r),o=this.parseImages(t.images,(function(){void 0!==e&&e(c)})),a=this.parseTextures(t.textures,o),s=this.parseMaterials(t.materials,a),c=this.parseObject(t.object,i,s,n),l=this.parseSkeletons(t.skeletons,c);if(this.bindSkeletons(c,l),void 0!==e){let t=!1;for(const e in o)if(o[e]instanceof HTMLImageElement){t=!0;break}!1===t&&e(c)}return c}parseShapes(t){const e={};if(void 0!==t)for(let n=0,r=t.length;n<r;n++){const r=(new vh).fromJSON(t[n]);e[r.uuid]=r}return e}parseSkeletons(t,e){const n={},r={};if(e.traverse((function(t){t.isBone&&(r[t.uuid]=t)})),void 0!==t)for(let e=0,i=t.length;e<i;e++){const i=(new dc).fromJSON(t[e],r);n[i.uuid]=i}return n}parseGeometries(t,e){const n={};let r;if(void 0!==t){const i=new Bh;for(let o=0,a=t.length;o<a;o++){let a;const s=t[o];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":a=new uu[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":a=new uu[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":a=new uu[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":a=new uu[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":a=new uu[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":a=new uu[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":a=new uu[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":a=new uu[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":a=new uu[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":a=new uu[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"TubeGeometry":case"TubeBufferGeometry":a=new uu[s.type]((new fh[s.path.type]).fromJSON(s.path),s.tubularSegments,s.radius,s.radialSegments,s.closed);break;case"LatheGeometry":case"LatheBufferGeometry":a=new uu[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":a=new uu[s.type](s.vertices,s.indices,s.radius,s.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":r=[];for(let t=0,n=s.shapes.length;t<n;t++){const n=e[s.shapes[t]];r.push(n)}a=new uu[s.type](r,s.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":r=[];for(let t=0,n=s.shapes.length;t<n;t++){const n=e[s.shapes[t]];r.push(n)}const t=s.options.extrudePath;void 0!==t&&(s.options.extrudePath=(new fh[t.type]).fromJSON(t)),a=new uu[s.type](r,s.options);break;case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(s);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),!0===a.isBufferGeometry&&void 0!==s.userData&&(a.userData=s.userData),n[s.uuid]=a}}return n}parseMaterials(t,e){const n={},r={};if(void 0!==t){const i=new Ih;i.setTextures(e);for(let e=0,o=t.length;e<o;e++){const o=t[e];if("MultiMaterial"===o.type){const t=[];for(let e=0;e<o.materials.length;e++){const r=o.materials[e];void 0===n[r.uuid]&&(n[r.uuid]=i.parse(r)),t.push(n[r.uuid])}r[o.uuid]=t}else void 0===n[o.uuid]&&(n[o.uuid]=i.parse(o)),r[o.uuid]=n[o.uuid]}}return r}parseAnimations(t){const e={};if(void 0!==t)for(let n=0;n<t.length;n++){const r=t[n],i=Du.parse(r);e[i.uuid]=i}return e}parseImages(t,e){const n=this,r={};let i;function o(t){if("string"==typeof t){const e=t;return function(t){return n.manager.itemStart(t),i.load(t,(function(){n.manager.itemEnd(t)}),void 0,(function(){n.manager.itemError(t),n.manager.itemEnd(t)}))}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(e)?e:n.resourcePath+e)}return t.data?{data:zi(t.type,t.data),width:t.width,height:t.height}:null}if(void 0!==t&&t.length>0){const n=new Uu(e);i=new Wu(n),i.setCrossOrigin(this.crossOrigin);for(let e=0,n=t.length;e<n;e++){const n=t[e],i=n.url;if(Array.isArray(i)){r[n.uuid]=[];for(let t=0,e=i.length;t<e;t++){const e=o(i[t]);null!==e&&(e instanceof HTMLImageElement?r[n.uuid].push(e):r[n.uuid].push(new To(e.data,e.width,e.height)))}}else{const t=o(n.url);null!==t&&(r[n.uuid]=t)}}}return r}parseTextures(t,e){function n(t,e){return"number"==typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),e[t])}const r={};if(void 0!==t)for(let i=0,o=t.length;i<o;i++){const o=t[i];let a;void 0===o.image&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),void 0===e[o.image]&&console.warn("THREE.ObjectLoader: Undefined image",o.image);const s=e[o.image];Array.isArray(s)?(a=new Mo(s),6===s.length&&(a.needsUpdate=!0)):(a=s&&s.data?new To(s.data,s.width,s.height):new Wn(s),s&&(a.needsUpdate=!0)),a.uuid=o.uuid,void 0!==o.name&&(a.name=o.name),void 0!==o.mapping&&(a.mapping=n(o.mapping,Uh)),void 0!==o.offset&&a.offset.fromArray(o.offset),void 0!==o.repeat&&a.repeat.fromArray(o.repeat),void 0!==o.center&&a.center.fromArray(o.center),void 0!==o.rotation&&(a.rotation=o.rotation),void 0!==o.wrap&&(a.wrapS=n(o.wrap[0],zh),a.wrapT=n(o.wrap[1],zh)),void 0!==o.format&&(a.format=o.format),void 0!==o.type&&(a.type=o.type),void 0!==o.encoding&&(a.encoding=o.encoding),void 0!==o.minFilter&&(a.minFilter=n(o.minFilter,Gh)),void 0!==o.magFilter&&(a.magFilter=n(o.magFilter,Gh)),void 0!==o.anisotropy&&(a.anisotropy=o.anisotropy),void 0!==o.flipY&&(a.flipY=o.flipY),void 0!==o.premultiplyAlpha&&(a.premultiplyAlpha=o.premultiplyAlpha),void 0!==o.unpackAlignment&&(a.unpackAlignment=o.unpackAlignment),r[o.uuid]=a}return r}parseObject(t,e,n,r){let i,o,a;function s(t){return void 0===e[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),e[t]}function c(t){if(void 0!==t){if(Array.isArray(t)){const e=[];for(let r=0,i=t.length;r<i;r++){const i=t[r];void 0===n[i]&&console.warn("THREE.ObjectLoader: Undefined material",i),e.push(n[i])}return e}return void 0===n[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),n[t]}}switch(t.type){case"Scene":i=new zs,void 0!==t.background&&Number.isInteger(t.background)&&(i.background=new yi(t.background)),void 0!==t.fog&&("Fog"===t.fog.type?i.fog=new Us(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(i.fog=new Fs(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":i=new wo(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(i.focus=t.focus),void 0!==t.zoom&&(i.zoom=t.zoom),void 0!==t.filmGauge&&(i.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(i.filmOffset=t.filmOffset),void 0!==t.view&&(i.view=Object.assign({},t.view));break;case"OrthographicCamera":i=new Th(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(i.zoom=t.zoom),void 0!==t.view&&(i.view=Object.assign({},t.view));break;case"AmbientLight":i=new Lh(t.color,t.intensity);break;case"DirectionalLight":i=new Ah(t.color,t.intensity);break;case"PointLight":i=new Sh(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":i=new Rh(t.color,t.intensity,t.width,t.height);break;case"SpotLight":i=new _h(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":i=new xh(t.color,t.groundColor,t.intensity);break;case"LightProbe":i=(new Ch).fromJSON(t);break;case"SkinnedMesh":o=s(t.geometry),a=c(t.material),i=new cc(o,a),void 0!==t.bindMode&&(i.bindMode=t.bindMode),void 0!==t.bindMatrix&&i.bindMatrix.fromArray(t.bindMatrix),void 0!==t.skeleton&&(i.skeleton=t.skeleton);break;case"Mesh":o=s(t.geometry),a=c(t.material),i=new ho(o,a);break;case"InstancedMesh":o=s(t.geometry),a=c(t.material);const e=t.count,n=t.instanceMatrix;i=new vc(o,a,e),i.instanceMatrix=new Ti(new Float32Array(n.array),16);break;case"LOD":i=new sc;break;case"Line":i=new Sc(s(t.geometry),c(t.material),t.mode);break;case"LineLoop":i=new Lc(s(t.geometry),c(t.material));break;case"LineSegments":i=new Ac(s(t.geometry),c(t.material));break;case"PointCloud":case"Points":i=new Nc(s(t.geometry),c(t.material));break;case"Sprite":i=new rc(c(t.material));break;case"Group":i=new Cs;break;case"Bone":i=new lc;break;default:i=new Jr}if(i.uuid=t.uuid,void 0!==t.name&&(i.name=t.name),void 0!==t.matrix?(i.matrix.fromArray(t.matrix),void 0!==t.matrixAutoUpdate&&(i.matrixAutoUpdate=t.matrixAutoUpdate),i.matrixAutoUpdate&&i.matrix.decompose(i.position,i.quaternion,i.scale)):(void 0!==t.position&&i.position.fromArray(t.position),void 0!==t.rotation&&i.rotation.fromArray(t.rotation),void 0!==t.quaternion&&i.quaternion.fromArray(t.quaternion),void 0!==t.scale&&i.scale.fromArray(t.scale)),void 0!==t.castShadow&&(i.castShadow=t.castShadow),void 0!==t.receiveShadow&&(i.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(i.shadow.bias=t.shadow.bias),void 0!==t.shadow.normalBias&&(i.shadow.normalBias=t.shadow.normalBias),void 0!==t.shadow.radius&&(i.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&i.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(i.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(i.visible=t.visible),void 0!==t.frustumCulled&&(i.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(i.renderOrder=t.renderOrder),void 0!==t.userData&&(i.userData=t.userData),void 0!==t.layers&&(i.layers.mask=t.layers),void 0!==t.children){const o=t.children;for(let t=0;t<o.length;t++)i.add(this.parseObject(o[t],e,n,r))}if(void 0!==t.animations){const e=t.animations;for(let t=0;t<e.length;t++){const n=e[t];i.animations.push(r[n])}}if("LOD"===t.type){void 0!==t.autoUpdate&&(i.autoUpdate=t.autoUpdate);const e=t.levels;for(let t=0;t<e.length;t++){const n=e[t],r=i.getObjectByProperty("uuid",n.object);void 0!==r&&i.addLevel(r,n.distance)}}return i}bindSkeletons(t,e){0!==Object.keys(e).length&&t.traverse((function(t){if(!0===t.isSkinnedMesh&&void 0!==t.skeleton){const n=e[t.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",t.skeleton):t.bind(n,t.bindMatrix)}}))}setTexturePath(t){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(t)}}const Uh={UVMapping:it,CubeReflectionMapping:ot,CubeRefractionMapping:at,EquirectangularReflectionMapping:st,EquirectangularRefractionMapping:ct,CubeUVReflectionMapping:lt,CubeUVRefractionMapping:ut},zh={RepeatWrapping:ht,ClampToEdgeWrapping:dt,MirroredRepeatWrapping:pt},Gh={NearestFilter:ft,NearestMipmapNearestFilter:mt,NearestMipmapLinearFilter:vt,LinearFilter:xt,LinearMipmapNearestFilter:bt,LinearMipmapLinearFilter:_t};function Hh(t){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),Gu.call(this,t),this.options={premultiplyAlpha:"none"}}function kh(){this.type="ShapePath",this.color=new yi,this.subPaths=[],this.currentPath=null}function Vh(t){this.type="Font",this.data=t}function jh(t,e,n,r,i){const o=i.glyphs[t]||i.glyphs["?"];if(!o)return void console.error('THREE.Font: character "'+t+'" does not exists in font family '+i.familyName+".");const a=new kh;let s,c,l,u,h,d,p,f;if(o.o){const t=o._cachedOutline||(o._cachedOutline=o.o.split(" "));for(let i=0,o=t.length;i<o;){switch(t[i++]){case"m":s=t[i++]*e+n,c=t[i++]*e+r,a.moveTo(s,c);break;case"l":s=t[i++]*e+n,c=t[i++]*e+r,a.lineTo(s,c);break;case"q":l=t[i++]*e+n,u=t[i++]*e+r,h=t[i++]*e+n,d=t[i++]*e+r,a.quadraticCurveTo(h,d,l,u);break;case"b":l=t[i++]*e+n,u=t[i++]*e+r,h=t[i++]*e+n,d=t[i++]*e+r,p=t[i++]*e+n,f=t[i++]*e+r,a.bezierCurveTo(h,d,p,f,l,u)}}}return{offsetX:o.ha*e,path:a}}function Wh(t){Gu.call(this,t)}let Xh;Hh.prototype=Object.assign(Object.create(Gu.prototype),{constructor:Hh,isImageBitmapLoader:!0,setOptions:function(t){return this.options=t,this},load:function(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const i=this,o=Fu.get(t);if(void 0!==o)return i.manager.itemStart(t),setTimeout((function(){e&&e(o),i.manager.itemEnd(t)}),0),o;const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",fetch(t,a).then((function(t){return t.blob()})).then((function(t){return createImageBitmap(t,i.options)})).then((function(n){Fu.add(t,n),e&&e(n),i.manager.itemEnd(t)})).catch((function(e){r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)})),i.manager.itemStart(t)}}),Object.assign(kh.prototype,{moveTo:function(t,e){return this.currentPath=new gh,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this},lineTo:function(t,e){return this.currentPath.lineTo(t,e),this},quadraticCurveTo:function(t,e,n,r){return this.currentPath.quadraticCurveTo(t,e,n,r),this},bezierCurveTo:function(t,e,n,r,i,o){return this.currentPath.bezierCurveTo(t,e,n,r,i,o),this},splineThru:function(t){return this.currentPath.splineThru(t),this},toShapes:function(t,e){function n(t){const e=[];for(let n=0,r=t.length;n<r;n++){const r=t[n],i=new vh;i.curves=r.curves,e.push(i)}return e}function r(t,e){const n=e.length;let r=!1;for(let i=n-1,o=0;o<n;i=o++){let n=e[i],a=e[o],s=a.x-n.x,c=a.y-n.y;if(Math.abs(c)>Number.EPSILON){if(c<0&&(n=e[o],s=-s,a=e[i],c=-c),t.y<n.y||t.y>a.y)continue;if(t.y===n.y){if(t.x===n.x)return!0}else{const e=c*(t.x-n.x)-s*(t.y-n.y);if(0===e)return!0;if(e<0)continue;r=!r}}else{if(t.y!==n.y)continue;if(a.x<=t.x&&t.x<=n.x||n.x<=t.x&&t.x<=a.x)return!0}}return r}const i=Cl.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===e)return n(o);let a,s,c;const l=[];if(1===o.length)return s=o[0],c=new vh,c.curves=s.curves,l.push(c),l;let u=!i(o[0].getPoints());u=t?!u:u;const h=[],d=[];let p,f,m=[],g=0;d[g]=void 0,m[g]=[];for(let e=0,n=o.length;e<n;e++)s=o[e],p=s.getPoints(),a=i(p),a=t?!a:a,a?(!u&&d[g]&&g++,d[g]={s:new vh,p:p},d[g].s.curves=s.curves,u&&g++,m[g]=[]):m[g].push({h:s,p:p[0]});if(!d[0])return n(o);if(d.length>1){let t=!1;const e=[];for(let t=0,e=d.length;t<e;t++)h[t]=[];for(let n=0,i=d.length;n<i;n++){const i=m[n];for(let o=0;o<i.length;o++){const a=i[o];let s=!0;for(let i=0;i<d.length;i++)r(a.p,d[i].p)&&(n!==i&&e.push({froms:n,tos:i,hole:o}),s?(s=!1,h[i].push(a)):t=!0);s&&h[n].push(a)}}e.length>0&&(t||(m=h))}for(let t=0,e=d.length;t<e;t++){c=d[t].s,l.push(c),f=m[t];for(let t=0,e=f.length;t<e;t++)c.holes.push(f[t].h)}return l}}),Object.assign(Vh.prototype,{isFont:!0,generateShapes:function(t,e=100){const n=[],r=function(t,e,n){const r=Array.from?Array.from(t):String(t).split(""),i=e/n.resolution,o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*i,a=[];let s=0,c=0;for(let t=0;t<r.length;t++){const e=r[t];if("\n"===e)s=0,c-=o;else{const t=jh(e,i,s,c,n);s+=t.offsetX,a.push(t.path)}}return a}(t,e,this.data);for(let t=0,e=r.length;t<e;t++)Array.prototype.push.apply(n,r[t].toShapes());return n}}),Wh.prototype=Object.assign(Object.create(Gu.prototype),{constructor:Wh,load:function(t,e,n,r){const i=this,o=new ku(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(i.withCredentials),o.load(t,(function(t){let n;try{n=JSON.parse(t)}catch(e){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(t.substring(65,t.length-2))}const r=i.parse(n);e&&e(r)}),n,r)},parse:function(t){return new Vh(t)}});const qh={getContext:function(){return void 0===Xh&&(Xh=new(window.AudioContext||window.webkitAudioContext)),Xh},setContext:function(t){Xh=t}};function Yh(t){Gu.call(this,t)}function Zh(t,e,n){Ch.call(this,void 0,n);const r=(new yi).set(t),i=(new yi).set(e),o=new Kn(r.r,r.g,r.b),a=new Kn(i.r,i.g,i.b),s=Math.sqrt(Math.PI),c=s*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(s),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(c)}function Jh(t,e){Ch.call(this,void 0,e);const n=(new yi).set(t);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}Yh.prototype=Object.assign(Object.create(Gu.prototype),{constructor:Yh,load:function(t,e,n,r){const i=this,o=new ku(i.manager);o.setResponseType("arraybuffer"),o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(t,(function(n){try{const t=n.slice(0);qh.getContext().decodeAudioData(t,(function(t){e(t)}))}catch(e){r?r(e):console.error(e),i.manager.itemError(t)}}),n,r)}}),Zh.prototype=Object.assign(Object.create(Ch.prototype),{constructor:Zh,isHemisphereLightProbe:!0,copy:function(t){return Ch.prototype.copy.call(this,t),this},toJSON:function(t){return Ch.prototype.toJSON.call(this,t)}}),Jh.prototype=Object.assign(Object.create(Ch.prototype),{constructor:Jh,isAmbientLightProbe:!0,copy:function(t){return Ch.prototype.copy.call(this,t),this},toJSON:function(t){return Ch.prototype.toJSON.call(this,t)}});const Kh=new Tr,Qh=new Tr;function $h(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new wo,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new wo,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}Object.assign($h.prototype,{update:function(t){const e=this._cache;if(e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep;const n=t.projectionMatrix.clone(),r=e.eyeSep/2,i=r*e.near/e.focus,o=e.near*Math.tan(zn.DEG2RAD*e.fov*.5)/e.zoom;let a,s;Qh.elements[12]=-r,Kh.elements[12]=r,a=-o*e.aspect+i,s=o*e.aspect+i,n.elements[0]=2*e.near/(s-a),n.elements[8]=(s+a)/(s-a),this.cameraL.projectionMatrix.copy(n),a=-o*e.aspect-i,s=o*e.aspect-i,n.elements[0]=2*e.near/(s-a),n.elements[8]=(s+a)/(s-a),this.cameraR.projectionMatrix.copy(n)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(Qh),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(Kh)}});class td{constructor(t){this.autoStart=void 0===t||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=ed(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const e=ed();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}function ed(){return("undefined"==typeof performance?Date:performance).now()}const nd=new Kn,rd=new Jn,id=new Kn,od=new Kn;class ad extends Jr{constructor(){super(),this.type="AudioListener",this.context=qh.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new td}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(t){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}updateMatrixWorld(t){super.updateMatrixWorld(t);const e=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(nd,rd,id),od.set(0,0,-1).applyQuaternion(rd),e.positionX){const t=this.context.currentTime+this.timeDelta;e.positionX.linearRampToValueAtTime(nd.x,t),e.positionY.linearRampToValueAtTime(nd.y,t),e.positionZ.linearRampToValueAtTime(nd.z,t),e.forwardX.linearRampToValueAtTime(od.x,t),e.forwardY.linearRampToValueAtTime(od.y,t),e.forwardZ.linearRampToValueAtTime(od.z,t),e.upX.linearRampToValueAtTime(n.x,t),e.upY.linearRampToValueAtTime(n.y,t),e.upZ.linearRampToValueAtTime(n.z,t)}else e.setPosition(nd.x,nd.y,nd.z),e.setOrientation(od.x,od.y,od.z,n.x,n.y,n.z)}}class sd extends Jr{constructor(t){super(),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}play(t=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+t;const e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(t){return t||(t=[]),!0===this._connected?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}setDetune(t){if(this.detune=t,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(t){return this.setFilters(t?[t]:[])}setPlaybackRate(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}const cd=new Kn,ld=new Jn,ud=new Kn,hd=new Kn;class dd extends sd{constructor(t){super(t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(t){return this.panner.refDistance=t,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(t){return this.panner.rolloffFactor=t,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(t){return this.panner.distanceModel=t,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(t){return this.panner.maxDistance=t,this}setDirectionalCone(t,e,n){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=n,this}updateMatrixWorld(t){if(super.updateMatrixWorld(t),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(cd,ld,ud),hd.set(0,0,1).applyQuaternion(ld);const e=this.panner;if(e.positionX){const t=this.context.currentTime+this.listener.timeDelta;e.positionX.linearRampToValueAtTime(cd.x,t),e.positionY.linearRampToValueAtTime(cd.y,t),e.positionZ.linearRampToValueAtTime(cd.z,t),e.orientationX.linearRampToValueAtTime(hd.x,t),e.orientationY.linearRampToValueAtTime(hd.y,t),e.orientationZ.linearRampToValueAtTime(hd.z,t)}else e.setPosition(cd.x,cd.y,cd.z),e.setOrientation(hd.x,hd.y,hd.z)}}class pd{constructor(t,e=2048){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=e,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let t=0;const e=this.getFrequencyData();for(let n=0;n<e.length;n++)t+=e[n];return t/e.length}}function fd(t,e,n){let r,i,o;switch(this.binding=t,this.valueSize=n,e){case"quaternion":r=this._slerp,i=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":r=this._select,i=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:r=this._lerp,i=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=i,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}Object.assign(fd.prototype,{accumulate:function(t,e){const n=this.buffer,r=this.valueSize,i=t*r+r;let o=this.cumulativeWeight;if(0===o){for(let t=0;t!==r;++t)n[i+t]=n[t];o=e}else{o+=e;const t=e/o;this._mixBufferRegion(n,i,0,t,r)}this.cumulativeWeight=o},accumulateAdditive:function(t){const e=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(e,r,0,t,n),this.cumulativeWeightAdditive+=t},apply:function(t){const e=this.valueSize,n=this.buffer,r=t*e+e,i=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){const t=e*this._origIndex;this._mixBufferRegion(n,r,t,1-i,e)}o>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*e,1,e);for(let t=e,i=e+e;t!==i;++t)if(n[t]!==n[t+e]){a.setValue(n,r);break}},saveOriginalState:function(){const t=this.binding,e=this.buffer,n=this.valueSize,r=n*this._origIndex;t.getValue(e,r);for(let t=n,i=r;t!==i;++t)e[t]=e[r+t%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0},restoreOriginalState:function(){const t=3*this.valueSize;this.binding.setValue(this.buffer,t)},_setAdditiveIdentityNumeric:function(){const t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let n=t;n<e;n++)this.buffer[n]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1},_setAdditiveIdentityOther:function(){const t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[e+n]=this.buffer[t+n]},_select:function(t,e,n,r,i){if(r>=.5)for(let r=0;r!==i;++r)t[e+r]=t[n+r]},_slerp:function(t,e,n,r){Jn.slerpFlat(t,e,t,e,t,n,r)},_slerpAdditive:function(t,e,n,r,i){const o=this._workIndex*i;Jn.multiplyQuaternionsFlat(t,o,t,e,t,n),Jn.slerpFlat(t,e,t,e,t,o,r)},_lerp:function(t,e,n,r,i){const o=1-r;for(let a=0;a!==i;++a){const i=e+a;t[i]=t[i]*o+t[n+a]*r}},_lerpAdditive:function(t,e,n,r,i){for(let o=0;o!==i;++o){const i=e+o;t[i]=t[i]+t[n+o]*r}}});const md=new RegExp("[\\[\\]\\.:\\/]","g"),gd="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",vd=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),yd=/(WCOD+)?/.source.replace("WCOD",gd),xd=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),bd=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),wd=new RegExp("^"+vd+yd+xd+bd+"$"),_d=["material","materials","bones"];function Md(t,e,n){const r=n||Sd.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)}function Sd(t,e,n){this.path=e,this.parsedPath=n||Sd.parseTrackName(e),this.node=Sd.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}function Td(){this.uuid=zn.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const t={};this._indicesByUUID=t;for(let e=0,n=arguments.length;e!==n;++e)t[arguments[e].uuid]=e;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const e=this;this.stats={objects:{get total(){return e._objects.length},get inUse(){return this.total-e.nCachedObjects_}},get bindingsPerObject(){return e._bindings.length}}}Object.assign(Md.prototype,{getValue:function(t,e){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(t,e)},setValue:function(t,e){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(t,e)},bind:function(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()},unbind:function(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}),Object.assign(Sd,{Composite:Md,create:function(t,e,n){return t&&t.isAnimationObjectGroup?new Sd.Composite(t,e,n):new Sd(t,e,n)},sanitizeNodeName:function(t){return t.replace(/\s/g,"_").replace(md,"")},parseTrackName:function(t){const e=wd.exec(t);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const t=n.nodeName.substring(r+1);-1!==_d.indexOf(t)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=t)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n},findNode:function(t,e){if(!e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){const n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){const n=function(t){for(let r=0;r<t.length;r++){const i=t[r];if(i.name===e||i.uuid===e)return i;const o=n(i.children);if(o)return o}return null},r=n(t.children);if(r)return r}return null}}),Object.assign(Sd.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)t[e++]=n[r]},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e)}],SetterByBindingTypeAndVersioning:[[function(t,e){this.targetObject[this.propertyName]=t[e]},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=t[e++]},function(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.needsUpdate=!0},function(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,e){this.bind(),this.getValue(t,e)},setValue:function(t,e){this.bind(),this.setValue(t,e)},bind:function(){let t=this.node;const e=this.parsedPath,n=e.objectName,r=e.propertyName;let i=e.propertyIndex;if(t||(t=Sd.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let r=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let e=0;e<t.length;e++)if(t[e].name===r){r=e;break}break;default:if(void 0===t[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[n]}if(void 0!==r){if(void 0===t[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[r]}}const o=t[r];if(void 0===o){const n=e.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+r+" but it wasn't found.",t)}let a=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?a=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(a=this.Versioning.MatrixWorldNeedsUpdate);let s=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[i]&&(i=t.morphTargetDictionary[i])}s=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=i}else void 0!==o.fromArray&&void 0!==o.toArray?(s=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(s=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[s],this.setValue=this.SetterByBindingTypeAndVersioning[s][a]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(Sd.prototype,{_getValue_unbound:Sd.prototype.getValue,_setValue_unbound:Sd.prototype.setValue}),Object.assign(Td.prototype,{isAnimationObjectGroup:!0,add:function(){const t=this._objects,e=this._indicesByUUID,n=this._paths,r=this._parsedPaths,i=this._bindings,o=i.length;let a=void 0,s=t.length,c=this.nCachedObjects_;for(let l=0,u=arguments.length;l!==u;++l){const u=arguments[l],h=u.uuid;let d=e[h];if(void 0===d){d=s++,e[h]=d,t.push(u);for(let t=0,e=o;t!==e;++t)i[t].push(new Sd(u,n[t],r[t]))}else if(d<c){a=t[d];const s=--c,l=t[s];e[l.uuid]=d,t[d]=l,e[h]=s,t[s]=u;for(let t=0,e=o;t!==e;++t){const e=i[t],o=e[s];let a=e[d];e[d]=o,void 0===a&&(a=new Sd(u,n[t],r[t])),e[s]=a}}else t[d]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c},remove:function(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const a=arguments[o],s=a.uuid,c=e[s];if(void 0!==c&&c>=i){const o=i++,l=t[o];e[l.uuid]=c,t[c]=l,e[s]=o,t[o]=a;for(let t=0,e=r;t!==e;++t){const e=n[t],r=e[o],i=e[c];e[c]=r,e[o]=i}}}this.nCachedObjects_=i},uncache:function(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_,o=t.length;for(let a=0,s=arguments.length;a!==s;++a){const s=arguments[a].uuid,c=e[s];if(void 0!==c)if(delete e[s],c<i){const a=--i,s=t[a],l=--o,u=t[l];e[s.uuid]=c,t[c]=s,e[u.uuid]=a,t[a]=u,t.pop();for(let t=0,e=r;t!==e;++t){const e=n[t],r=e[a],i=e[l];e[c]=r,e[a]=i,e.pop()}}else{const i=--o,a=t[i];i>0&&(e[a.uuid]=c),t[c]=a,t.pop();for(let t=0,e=r;t!==e;++t){const e=n[t];e[c]=e[i],e.pop()}}}this.nCachedObjects_=i},subscribe_:function(t,e){const n=this._bindingsIndicesByPath;let r=n[t];const i=this._bindings;if(void 0!==r)return i[r];const o=this._paths,a=this._parsedPaths,s=this._objects,c=s.length,l=this.nCachedObjects_,u=new Array(c);r=i.length,n[t]=r,o.push(t),a.push(e),i.push(u);for(let n=l,r=s.length;n!==r;++n){const r=s[n];u[n]=new Sd(r,t,e)}return u},unsubscribe_:function(t){const e=this._bindingsIndicesByPath,n=e[t];if(void 0!==n){const r=this._paths,i=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];e[t[a]]=n,o[n]=s,o.pop(),i[n]=i[a],i.pop(),r[n]=r[a],r.pop()}}});class Ed{constructor(t,e,n=null,r=e.blendMode){this._mixer=t,this._clip=e,this._localRoot=n,this.blendMode=r;const i=e.tracks,o=i.length,a=new Array(o),s={endingStart:ke,endingEnd:ke};for(let t=0;t!==o;++t){const e=i[t].createInterpolant(null);a[t]=e,e.settings=s}this._interpolantSettings=s,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Fe,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){const n=this._clip.duration,r=t._clip.duration,i=r/n,o=n/r;t.warp(1,i,e),this.warp(o,1,e)}return this}crossFadeTo(t,e,n){return t.crossFadeFrom(this,e,n)}stopFading(){const t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,n){const r=this._mixer,i=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;null===a&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const s=a.parameterPositions,c=a.sampleValues;return s[0]=i,s[1]=i+n,c[0]=t/o,c[1]=e/o,this}stopWarping(){const t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,e,n,r){if(!this.enabled)return void this._updateWeight(t);const i=this._startTime;if(null!==i){const r=(t-i)*n;if(r<0||0===n)return;this._startTime=null,e=n*r}e*=this._updateTimeScale(t);const o=this._updateTime(e),a=this._updateWeight(t);if(a>0){const t=this._interpolants,e=this._propertyBindings;switch(this.blendMode){case Xe:for(let n=0,r=t.length;n!==r;++n)t[n].evaluate(o),e[n].accumulateAdditive(a);break;case We:default:for(let n=0,i=t.length;n!==i;++n)t[n].evaluate(o),e[n].accumulate(r,a)}}}_updateWeight(t){let e=0;if(this.enabled){e=this.weight;const n=this._weightInterpolant;if(null!==n){const r=n.evaluate(t)[0];e*=r,t>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=e,e}_updateTimeScale(t){let e=0;if(!this.paused){e=this.timeScale;const n=this._timeScaleInterpolant;if(null!==n){e*=n.evaluate(t)[0],t>n.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e}_updateTime(t){const e=this._clip.duration,n=this.loop;let r=this.time+t,i=this._loopCount;const o=n===Ue;if(0===t)return-1===i?r:o&&1==(1&i)?e-r:r;if(n===Be){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(r>=e)r=e;else{if(!(r<0)){this.time=r;break t}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===i&&(t>=0?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),r>=e||r<0){const n=Math.floor(r/e);r-=e*n,i+=Math.abs(n);const a=this.repetitions-i;if(a<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=t>0?e:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===a){const e=t<0;this._setEndings(e,!e,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=r;if(o&&1==(1&i))return e-r}return r}_setEndings(t,e,n){const r=this._interpolantSettings;n?(r.endingStart=Ve,r.endingEnd=Ve):(r.endingStart=t?this.zeroSlopeAtStart?Ve:ke:je,r.endingEnd=e?this.zeroSlopeAtEnd?Ve:ke:je)}_scheduleFading(t,e,n){const r=this._mixer,i=r.time;let o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,s=o.sampleValues;return a[0]=i,s[0]=e,a[1]=i+t,s[1]=n,this}}function Ad(t){this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}Ad.prototype=Object.assign(Object.create(Bn.prototype),{constructor:Ad,_bindAction:function(t,e){const n=t._localRoot||this._root,r=t._clip.tracks,i=r.length,o=t._propertyBindings,a=t._interpolants,s=n.uuid,c=this._bindingsByRootAndName;let l=c[s];void 0===l&&(l={},c[s]=l);for(let t=0;t!==i;++t){const i=r[t],c=i.name;let u=l[c];if(void 0!==u)o[t]=u;else{if(u=o[t],void 0!==u){null===u._cacheIndex&&(++u.referenceCount,this._addInactiveBinding(u,s,c));continue}const r=e&&e._propertyBindings[t].binding.parsedPath;u=new fd(Sd.create(n,c,r),i.ValueTypeName,i.getValueSize()),++u.referenceCount,this._addInactiveBinding(u,s,c),o[t]=u}a[t].resultBuffer=u.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){const e=(t._localRoot||this._root).uuid,n=t._clip.uuid,r=this._actionsByClip[n];this._bindAction(t,r&&r.knownActions[0]),this._addInactiveAction(t,n,e)}const e=t._propertyBindings;for(let t=0,n=e.length;t!==n;++t){const n=e[t];0==n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){const e=t._propertyBindings;for(let t=0,n=e.length;t!==n;++t){const n=e[t];0==--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){const e=t._cacheIndex;return null!==e&&e<this._nActiveActions},_addInactiveAction:function(t,e,n){const r=this._actions,i=this._actionsByClip;let o=i[e];if(void 0===o)o={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,i[e]=o;else{const e=o.knownActions;t._byClipCacheIndex=e.length,e.push(t)}t._cacheIndex=r.length,r.push(t),o.actionByRoot[n]=t},_removeInactiveAction:function(t){const e=this._actions,n=e[e.length-1],r=t._cacheIndex;n._cacheIndex=r,e[r]=n,e.pop(),t._cacheIndex=null;const i=t._clip.uuid,o=this._actionsByClip,a=o[i],s=a.knownActions,c=s[s.length-1],l=t._byClipCacheIndex;c._byClipCacheIndex=l,s[l]=c,s.pop(),t._byClipCacheIndex=null;delete a.actionByRoot[(t._localRoot||this._root).uuid],0===s.length&&delete o[i],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){const e=t._propertyBindings;for(let t=0,n=e.length;t!==n;++t){const n=e[t];0==--n.referenceCount&&this._removeInactiveBinding(n)}},_lendAction:function(t){const e=this._actions,n=t._cacheIndex,r=this._nActiveActions++,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_takeBackAction:function(t){const e=this._actions,n=t._cacheIndex,r=--this._nActiveActions,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_addInactiveBinding:function(t,e,n){const r=this._bindingsByRootAndName,i=this._bindings;let o=r[e];void 0===o&&(o={},r[e]=o),o[n]=t,t._cacheIndex=i.length,i.push(t)},_removeInactiveBinding:function(t){const e=this._bindings,n=t.binding,r=n.rootNode.uuid,i=n.path,o=this._bindingsByRootAndName,a=o[r],s=e[e.length-1],c=t._cacheIndex;s._cacheIndex=c,e[c]=s,e.pop(),delete a[i],0===Object.keys(a).length&&delete o[r]},_lendBinding:function(t){const e=this._bindings,n=t._cacheIndex,r=this._nActiveBindings++,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_takeBackBinding:function(t){const e=this._bindings,n=t._cacheIndex,r=--this._nActiveBindings,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_lendControlInterpolant:function(){const t=this._controlInterpolants,e=this._nActiveControlInterpolants++;let n=t[e];return void 0===n&&(n=new Tu(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=e,t[e]=n),n},_takeBackControlInterpolant:function(t){const e=this._controlInterpolants,n=t.__cacheIndex,r=--this._nActiveControlInterpolants,i=e[r];t.__cacheIndex=r,e[r]=t,i.__cacheIndex=n,e[n]=i},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(t,e,n){const r=e||this._root,i=r.uuid;let o="string"==typeof t?Du.findByName(r,t):t;const a=null!==o?o.uuid:t,s=this._actionsByClip[a];let c=null;if(void 0===n&&(n=null!==o?o.blendMode:We),void 0!==s){const t=s.actionByRoot[i];if(void 0!==t&&t.blendMode===n)return t;c=s.knownActions[0],null===o&&(o=c._clip)}if(null===o)return null;const l=new Ed(this,o,e,n);return this._bindAction(l,c),this._addInactiveAction(l,a,i),l},existingAction:function(t,e){const n=e||this._root,r=n.uuid,i="string"==typeof t?Du.findByName(n,t):t,o=i?i.uuid:t,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[r]||null},stopAllAction:function(){const t=this._actions;for(let e=this._nActiveActions-1;e>=0;--e)t[e].stop();return this},update:function(t){t*=this.timeScale;const e=this._actions,n=this._nActiveActions,r=this.time+=t,i=Math.sign(t),o=this._accuIndex^=1;for(let a=0;a!==n;++a){e[a]._update(r,t,i,o)}const a=this._bindings,s=this._nActiveBindings;for(let t=0;t!==s;++t)a[t].apply(o);return this},setTime:function(t){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(t)},getRoot:function(){return this._root},uncacheClip:function(t){const e=this._actions,n=t.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){const t=i.knownActions;for(let n=0,r=t.length;n!==r;++n){const r=t[n];this._deactivateAction(r);const i=r._cacheIndex,o=e[e.length-1];r._cacheIndex=null,r._byClipCacheIndex=null,o._cacheIndex=i,e[i]=o,e.pop(),this._removeInactiveBindingsForAction(r)}delete r[n]}},uncacheRoot:function(t){const e=t.uuid,n=this._actionsByClip;for(const t in n){const r=n[t].actionByRoot[e];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}const r=this._bindingsByRootAndName[e];if(void 0!==r)for(const t in r){const e=r[t];e.restoreOriginalState(),this._removeInactiveBinding(e)}},uncacheAction:function(t,e){const n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}});class Ld{constructor(t){"string"==typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}clone(){return new Ld(void 0===this.value.clone?this.value:this.value.clone())}}function Rd(t,e,n){Gs.call(this,t,e),this.meshPerAttribute=n||1}function Pd(t,e,n,r,i){this.buffer=t,this.type=e,this.itemSize=n,this.elementSize=r,this.count=i,this.version=0}function Cd(t,e,n,r){this.ray=new Sr(t,e),this.near=n||0,this.far=r||1/0,this.camera=null,this.layers=new Br,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function Id(t,e){return t.distance-e.distance}function Od(t,e,n,r){if(t.layers.test(e.layers)&&t.raycast(e,n),!0===r){const r=t.children;for(let t=0,i=r.length;t<i;t++)Od(r[t],e,n,!0)}}Rd.prototype=Object.assign(Object.create(Gs.prototype),{constructor:Rd,isInstancedInterleavedBuffer:!0,copy:function(t){return Gs.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},clone:function(t){const e=Gs.prototype.clone.call(this,t);return e.meshPerAttribute=this.meshPerAttribute,e},toJSON:function(t){const e=Gs.prototype.toJSON.call(this,t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}),Object.defineProperty(Pd.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(Pd.prototype,{isGLBufferAttribute:!0,setBuffer:function(t){return this.buffer=t,this},setType:function(t,e){return this.type=t,this.elementSize=e,this},setItemSize:function(t){return this.itemSize=t,this},setCount:function(t){return this.count=t,this}}),Object.assign(Cd.prototype,{set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(t,e,n){const r=n||[];return Od(t,this,r,e),r.sort(Id),r},intersectObjects:function(t,e,n){const r=n||[];if(!1===Array.isArray(t))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),r;for(let n=0,i=t.length;n<i;n++)Od(t[n],this,r,e);return r.sort(Id),r}});class Nd{constructor(t=1,e=0,n=0){return this.radius=t,this.phi=e,this.theta=n,this}set(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this}clone(){return(new this.constructor).copy(this)}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(zn.clamp(e/this.radius,-1,1))),this}}class Dd{constructor(t,e,n){return this.radius=void 0!==t?t:1,this.theta=void 0!==e?e:0,this.y=void 0!==n?n:0,this}set(t,e,n){return this.radius=t,this.theta=e,this.y=n,this}clone(){return(new this.constructor).copy(this)}copy(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+n*n),this.theta=Math.atan2(t,n),this.y=e,this}}const Bd=new Gn;class Fd{constructor(t,e){Object.defineProperty(this,"isBox2",{value:!0}),this.min=void 0!==t?t:new Gn(1/0,1/0),this.max=void 0!==e?e:new Gn(-1/0,-1/0)}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=Bd.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return void 0===t&&(console.warn("THREE.Box2: .getCenter() target is now required"),t=new Gn),this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return void 0===t&&(console.warn("THREE.Box2: .getSize() target is now required"),t=new Gn),this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,e){return void 0===e&&(console.warn("THREE.Box2: .getParameter() target is now required"),e=new Gn),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)}clampPoint(t,e){return void 0===e&&(console.warn("THREE.Box2: .clampPoint() target is now required"),e=new Gn),e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return Bd.copy(t).clamp(this.min,this.max).sub(t).length()}intersect(t){return this.min.max(t.min),this.max.min(t.max),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const Ud=new Kn,zd=new Kn;class Gd{constructor(t,e){this.start=void 0!==t?t:new Kn,this.end=void 0!==e?e:new Kn}set(t,e){return this.start.copy(t),this.end.copy(e),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.start.copy(t.start),this.end.copy(t.end),this}getCenter(t){return void 0===t&&(console.warn("THREE.Line3: .getCenter() target is now required"),t=new Kn),t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return void 0===t&&(console.warn("THREE.Line3: .delta() target is now required"),t=new Kn),t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,e){return void 0===e&&(console.warn("THREE.Line3: .at() target is now required"),e=new Kn),this.delta(e).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,e){Ud.subVectors(t,this.start),zd.subVectors(this.end,this.start);const n=zd.dot(zd);let r=zd.dot(Ud)/n;return e&&(r=zn.clamp(r,0,1)),r}closestPointToPoint(t,e,n){const r=this.closestPointToPointParameter(t,e);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new Kn),this.delta(n).multiplyScalar(r).add(this.start)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(t){return t.start.equals(this.start)&&t.end.equals(this.end)}}function Hd(t){Jr.call(this),this.material=t,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}Hd.prototype=Object.create(Jr.prototype),Hd.prototype.constructor=Hd,Hd.prototype.isImmediateRenderObject=!0;const kd=new Kn;class Vd extends Jr{constructor(t,e){super(),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e;const n=new qi,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let t=0,e=1,n=32;t<n;t++,e++){const i=t/n*Math.PI*2,o=e/n*Math.PI*2;r.push(Math.cos(i),Math.sin(i),1,Math.cos(o),Math.sin(o),1)}n.setAttribute("position",new Ni(r,3));const i=new yc({fog:!1,toneMapped:!1});this.cone=new Ac(n,i),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),kd.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(kd),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const jd=new Kn,Wd=new Tr,Xd=new Tr;class qd extends Ac{constructor(t){const e=function t(e){const n=[];e&&e.isBone&&n.push(e);for(let r=0;r<e.children.length;r++)n.push.apply(n,t(e.children[r]));return n}(t),n=new qi,r=[],i=[],o=new yi(0,0,1),a=new yi(0,1,0);for(let t=0;t<e.length;t++){const n=e[t];n.parent&&n.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(o.r,o.g,o.b),i.push(a.r,a.g,a.b))}n.setAttribute("position",new Ni(r,3)),n.setAttribute("color",new Ni(i,3));super(n,new yc({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const e=this.bones,n=this.geometry,r=n.getAttribute("position");Xd.copy(this.root.matrixWorld).invert();for(let t=0,n=0;t<e.length;t++){const i=e[t];i.parent&&i.parent.isBone&&(Wd.multiplyMatrices(Xd,i.matrixWorld),jd.setFromMatrixPosition(Wd),r.setXYZ(n,jd.x,jd.y,jd.z),Wd.multiplyMatrices(Xd,i.parent.matrixWorld),jd.setFromMatrixPosition(Wd),r.setXYZ(n+1,jd.x,jd.y,jd.z),n+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}}class Yd extends ho{constructor(t,e,n){super(new Kl(e,4,2),new _i({wireframe:!0,fog:!1,toneMapped:!1})),this.light=t,this.light.updateMatrixWorld(),this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Zd=new Kn,Jd=new yi,Kd=new yi;class Qd extends Jr{constructor(t,e,n){super(),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;const r=new Hl(e);r.rotateY(.5*Math.PI),this.material=new _i({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const i=r.getAttribute("position"),o=new Float32Array(3*i.count);r.setAttribute("color",new Ti(o,3)),this.add(new ho(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const t=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const e=t.geometry.getAttribute("color");Jd.copy(this.light.color),Kd.copy(this.light.groundColor);for(let t=0,n=e.count;t<n;t++){const r=t<n/2?Jd:Kd;e.setXYZ(t,r.r,r.g,r.b)}e.needsUpdate=!0}t.lookAt(Zd.setFromMatrixPosition(this.light.matrixWorld).negate())}}class $d extends Ac{constructor(t=10,e=10,n=4473924,r=8947848){n=new yi(n),r=new yi(r);const i=e/2,o=t/e,a=t/2,s=[],c=[];for(let t=0,l=0,u=-a;t<=e;t++,u+=o){s.push(-a,0,u,a,0,u),s.push(u,0,-a,u,0,a);const e=t===i?n:r;e.toArray(c,l),l+=3,e.toArray(c,l),l+=3,e.toArray(c,l),l+=3,e.toArray(c,l),l+=3}const l=new qi;l.setAttribute("position",new Ni(s,3)),l.setAttribute("color",new Ni(c,3));super(l,new yc({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}class tp extends Ac{constructor(t=10,e=16,n=8,r=64,i=4473924,o=8947848){i=new yi(i),o=new yi(o);const a=[],s=[];for(let n=0;n<=e;n++){const r=n/e*(2*Math.PI),c=Math.sin(r)*t,l=Math.cos(r)*t;a.push(0,0,0),a.push(c,0,l);const u=1&n?i:o;s.push(u.r,u.g,u.b),s.push(u.r,u.g,u.b)}for(let e=0;e<=n;e++){const c=1&e?i:o,l=t-t/n*e;for(let t=0;t<r;t++){let e=t/r*(2*Math.PI),n=Math.sin(e)*l,i=Math.cos(e)*l;a.push(n,0,i),s.push(c.r,c.g,c.b),e=(t+1)/r*(2*Math.PI),n=Math.sin(e)*l,i=Math.cos(e)*l,a.push(n,0,i),s.push(c.r,c.g,c.b)}}const c=new qi;c.setAttribute("position",new Ni(a,3)),c.setAttribute("color",new Ni(s,3));super(c,new yc({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}}const ep=new Kn,np=new Kn,rp=new Kn;class ip extends Jr{constructor(t,e,n){super(),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===e&&(e=1);let r=new qi;r.setAttribute("position",new Ni([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));const i=new yc({fog:!1,toneMapped:!1});this.lightPlane=new Sc(r,i),this.add(this.lightPlane),r=new qi,r.setAttribute("position",new Ni([0,0,0,0,0,1],3)),this.targetLine=new Sc(r,i),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){ep.setFromMatrixPosition(this.light.matrixWorld),np.setFromMatrixPosition(this.light.target.matrixWorld),rp.subVectors(np,ep),this.lightPlane.lookAt(np),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(np),this.targetLine.scale.z=rp.length()}}const op=new Kn,ap=new bo;class sp extends Ac{constructor(t){const e=new qi,n=new yc({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],i=[],o={},a=new yi(16755200),s=new yi(16711680),c=new yi(43775),l=new yi(16777215),u=new yi(3355443);function h(t,e,n){d(t,n),d(e,n)}function d(t,e){r.push(0,0,0),i.push(e.r,e.g,e.b),void 0===o[t]&&(o[t]=[]),o[t].push(r.length/3-1)}h("n1","n2",a),h("n2","n4",a),h("n4","n3",a),h("n3","n1",a),h("f1","f2",a),h("f2","f4",a),h("f4","f3",a),h("f3","f1",a),h("n1","f1",a),h("n2","f2",a),h("n3","f3",a),h("n4","f4",a),h("p","n1",s),h("p","n2",s),h("p","n3",s),h("p","n4",s),h("u1","u2",c),h("u2","u3",c),h("u3","u1",c),h("c","t",l),h("p","c",u),h("cn1","cn2",u),h("cn3","cn4",u),h("cf1","cf2",u),h("cf3","cf4",u),e.setAttribute("position",new Ni(r,3)),e.setAttribute("color",new Ni(i,3)),super(e,n),this.type="CameraHelper",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}update(){const t=this.geometry,e=this.pointMap;ap.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),cp("c",e,t,ap,0,0,-1),cp("t",e,t,ap,0,0,1),cp("n1",e,t,ap,-1,-1,-1),cp("n2",e,t,ap,1,-1,-1),cp("n3",e,t,ap,-1,1,-1),cp("n4",e,t,ap,1,1,-1),cp("f1",e,t,ap,-1,-1,1),cp("f2",e,t,ap,1,-1,1),cp("f3",e,t,ap,-1,1,1),cp("f4",e,t,ap,1,1,1),cp("u1",e,t,ap,.7,1.1,-1),cp("u2",e,t,ap,-.7,1.1,-1),cp("u3",e,t,ap,0,2,-1),cp("cf1",e,t,ap,-1,0,1),cp("cf2",e,t,ap,1,0,1),cp("cf3",e,t,ap,0,-1,1),cp("cf4",e,t,ap,0,1,1),cp("cn1",e,t,ap,-1,0,-1),cp("cn2",e,t,ap,1,0,-1),cp("cn3",e,t,ap,0,-1,-1),cp("cn4",e,t,ap,0,1,-1),t.getAttribute("position").needsUpdate=!0}}function cp(t,e,n,r,i,o,a){op.set(i,o,a).unproject(r);const s=e[t];if(void 0!==s){const t=n.getAttribute("position");for(let e=0,n=s.length;e<n;e++)t.setXYZ(s[e],op.x,op.y,op.z)}}const lp=new tr;class up extends Ac{constructor(t,e=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new qi;i.setIndex(new Ti(n,1)),i.setAttribute("position",new Ti(r,3)),super(i,new yc({color:e,toneMapped:!1})),this.object=t,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&lp.setFromObject(this.object),lp.isEmpty())return;const e=lp.min,n=lp.max,r=this.geometry.attributes.position,i=r.array;i[0]=n.x,i[1]=n.y,i[2]=n.z,i[3]=e.x,i[4]=n.y,i[5]=n.z,i[6]=e.x,i[7]=e.y,i[8]=n.z,i[9]=n.x,i[10]=e.y,i[11]=n.z,i[12]=n.x,i[13]=n.y,i[14]=e.z,i[15]=e.x,i[16]=n.y,i[17]=e.z,i[18]=e.x,i[19]=e.y,i[20]=e.z,i[21]=n.x,i[22]=e.y,i[23]=e.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(t){return this.object=t,this.update(),this}copy(t){return Ac.prototype.copy.call(this,t),this.object=t.object,this}}class hp extends Ac{constructor(t,e=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new qi;r.setIndex(new Ti(n,1)),r.setAttribute("position",new Ni([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(r,new yc({color:e,toneMapped:!1})),this.box=t,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(t){const e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(t))}}class dp extends Sc{constructor(t,e=1,n=16776960){const r=n,i=new qi;i.setAttribute("position",new Ni([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),i.computeBoundingSphere(),super(i,new yc({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=t,this.size=e;const o=new qi;o.setAttribute("position",new Ni([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),o.computeBoundingSphere(),this.add(new ho(o,new _i({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(t){let e=-this.plane.constant;Math.abs(e)<1e-8&&(e=1e-8),this.scale.set(.5*this.size,.5*this.size,e),this.children[0].material.side=e<0?m:f,this.lookAt(this.plane.normal),super.updateMatrixWorld(t)}}const pp=new Kn;let fp,mp;class gp extends Jr{constructor(t,e,n,r,i,o){super(),this.type="ArrowHelper",void 0===t&&(t=new Kn(0,0,1)),void 0===e&&(e=new Kn(0,0,0)),void 0===n&&(n=1),void 0===r&&(r=16776960),void 0===i&&(i=.2*n),void 0===o&&(o=.2*i),void 0===fp&&(fp=new qi,fp.setAttribute("position",new Ni([0,0,0,0,1,0],3)),mp=new Yc(0,.5,1,5,1),mp.translate(0,-.5,0)),this.position.copy(e),this.line=new Sc(fp,new yc({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new ho(mp,new _i({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(n,i,o)}setDirection(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{pp.set(t.z,0,-t.x).normalize();const e=Math.acos(t.y);this.quaternion.setFromAxisAngle(pp,e)}}setLength(t,e,n){void 0===e&&(e=.2*t),void 0===n&&(n=.2*e),this.line.scale.set(1,Math.max(1e-4,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()}setColor(t){this.line.material.color.set(t),this.cone.material.color.set(t)}copy(t){return super.copy(t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this}}class vp extends Ac{constructor(t=1){const e=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],n=new qi;n.setAttribute("position",new Ni(e,3)),n.setAttribute("color",new Ni([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));super(n,new yc({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}}const yp=new Float32Array(1),xp=new Int32Array(yp.buffer),bp={toHalfFloat:function(t){yp[0]=t;const e=xp[0];let n=e>>16&32768,r=e>>12&2047;const i=e>>23&255;return i<103?n:i>142?(n|=31744,n|=(255==i?0:1)&&8388607&e,n):i<113?(r|=2048,n|=(r>>114-i)+(r>>113-i&1),n):(n|=i-112<<10|r>>1,n+=1&r,n)}},wp=Math.pow(2,8),_p=[.125,.215,.35,.446,.526,.582],Mp=5+_p.length,Sp={[Je]:0,[Ke]:1,[$e]:2,[en]:3,[nn]:4,[rn]:5,[Qe]:6},Tp=new Th,{_lodPlanes:Ep,_sizeLods:Ap,_sigmas:Lp}=Dp();let Rp=null;const Pp=(1+Math.sqrt(5))/2,Cp=1/Pp,Ip=[new Kn(1,1,1),new Kn(-1,1,1),new Kn(1,1,-1),new Kn(-1,1,-1),new Kn(0,Pp,Cp),new Kn(0,Pp,-Cp),new Kn(Cp,0,Pp),new Kn(-Cp,0,Pp),new Kn(Pp,Cp,0),new Kn(-Pp,Cp,0)];class Op{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._blurMaterial=function(t){const e=new Float32Array(t),n=new Kn(0,1,0);return new du({name:"SphericalGaussianBlur",defines:{n:t},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:e},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n},inputEncoding:{value:Sp[Je]},outputEncoding:{value:Sp[Je]}},vertexShader:Gp(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t${Hp()}\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:x,depthTest:!1,depthWrite:!1})}(20),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,n=.1,r=100){Rp=this._renderer.getRenderTarget();const i=this._allocateTargets();return this._sceneToCubeUV(t,n,r,i),e>0&&this._blur(i,0,0,e),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(t){return this._fromTexture(t)}fromCubemap(t){return this._fromTexture(t)}compileCubemapShader(){null===this._cubemapShader&&(this._cubemapShader=zp(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){null===this._equirectShader&&(this._equirectShader=Up(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(let t=0;t<Ep.length;t++)Ep[t].dispose()}_cleanup(t){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(Rp),t.scissorTest=!1,Fp(t,0,0,t.width,t.height)}_fromTexture(t){Rp=this._renderer.getRenderTarget();const e=this._allocateTargets(t);return this._textureToCubeUV(t,e),this._applyPMREM(e),this._cleanup(e),e}_allocateTargets(t){const e={magFilter:ft,minFilter:ft,generateMipmaps:!1,type:St,format:Ht,encoding:Np(t)?t.encoding:$e,depthBuffer:!1},n=Bp(e);return n.depthBuffer=!t,this._pingPongRenderTarget=Bp(e),n}_compileMaterial(t){const e=new ho(Ep[0],t);this._renderer.compile(e,Tp)}_sceneToCubeUV(t,e,n,r){const i=new wo(90,1,e,n),o=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],s=this._renderer,c=s.outputEncoding,l=s.toneMapping,u=s.getClearColor(),h=s.getClearAlpha();s.toneMapping=Q,s.outputEncoding=Je;let d=t.background;if(d&&d.isColor){d.convertSRGBToLinear();const e=Math.max(d.r,d.g,d.b),n=Math.min(Math.max(Math.ceil(Math.log2(e)),-128),127);d=d.multiplyScalar(Math.pow(2,-n));const r=(n+128)/255;s.setClearColor(d,r),t.background=null}for(let e=0;e<6;e++){const n=e%3;0==n?(i.up.set(0,o[e],0),i.lookAt(a[e],0,0)):1==n?(i.up.set(0,0,o[e]),i.lookAt(0,a[e],0)):(i.up.set(0,o[e],0),i.lookAt(0,0,a[e])),Fp(r,n*wp,e>2?wp:0,wp,wp),s.setRenderTarget(r),s.render(t,i)}s.toneMapping=l,s.outputEncoding=c,s.setClearColor(u,h)}_textureToCubeUV(t,e){const n=this._renderer;t.isCubeTexture?null==this._cubemapShader&&(this._cubemapShader=zp()):null==this._equirectShader&&(this._equirectShader=Up());const r=t.isCubeTexture?this._cubemapShader:this._equirectShader,i=new ho(Ep[0],r),o=r.uniforms;o.envMap.value=t,t.isCubeTexture||o.texelSize.value.set(1/t.image.width,1/t.image.height),o.inputEncoding.value=Sp[t.encoding],o.outputEncoding.value=Sp[e.texture.encoding],Fp(e,0,0,3*wp,2*wp),n.setRenderTarget(e),n.render(i,Tp)}_applyPMREM(t){const e=this._renderer,n=e.autoClear;e.autoClear=!1;for(let e=1;e<Mp;e++){const n=Math.sqrt(Lp[e]*Lp[e]-Lp[e-1]*Lp[e-1]),r=Ip[(e-1)%Ip.length];this._blur(t,e-1,e,n,r)}e.autoClear=n}_blur(t,e,n,r,i){const o=this._pingPongRenderTarget;this._halfBlur(t,o,e,n,r,"latitudinal",i),this._halfBlur(o,t,n,n,r,"longitudinal",i)}_halfBlur(t,e,n,r,i,o,a){const s=this._renderer,c=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const l=new ho(Ep[r],c),u=c.uniforms,h=Ap[n]-1,d=isFinite(i)?Math.PI/(2*h):2*Math.PI/39,p=i/d,f=isFinite(i)?1+Math.floor(3*p):20;f>20&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${f} samples when the maximum is set to 20`);const m=[];let g=0;for(let t=0;t<20;++t){const e=t/p,n=Math.exp(-e*e/2);m.push(n),0==t?g+=n:t<f&&(g+=2*n)}for(let t=0;t<m.length;t++)m[t]=m[t]/g;u.envMap.value=t.texture,u.samples.value=f,u.weights.value=m,u.latitudinal.value="latitudinal"===o,a&&(u.poleAxis.value=a),u.dTheta.value=d,u.mipInt.value=8-n,u.inputEncoding.value=Sp[t.texture.encoding],u.outputEncoding.value=Sp[t.texture.encoding];const v=Ap[r];Fp(e,3*Math.max(0,wp-2*v),(0===r?0:2*wp)+2*v*(r>4?r-8+4:0),3*v,2*v),s.setRenderTarget(e),s.render(l,Tp)}}function Np(t){return void 0!==t&&t.type===St&&(t.encoding===Je||t.encoding===Ke||t.encoding===Qe)}function Dp(){const t=[],e=[],n=[];let r=8;for(let i=0;i<Mp;i++){const o=Math.pow(2,r);e.push(o);let a=1/o;i>4?a=_p[i-8+4-1]:0==i&&(a=0),n.push(a);const s=1/(o-1),c=-s/2,l=1+s/2,u=[c,c,l,c,l,l,c,c,l,l,c,l],h=6,d=6,p=3,f=2,m=1,g=new Float32Array(p*d*h),v=new Float32Array(f*d*h),y=new Float32Array(m*d*h);for(let t=0;t<h;t++){const e=t%3*2/3-1,n=t>2?0:-1,r=[e,n,0,e+2/3,n,0,e+2/3,n+1,0,e,n,0,e+2/3,n+1,0,e,n+1,0];g.set(r,p*d*t),v.set(u,f*d*t);const i=[t,t,t,t,t,t];y.set(i,m*d*t)}const x=new qi;x.setAttribute("position",new Ti(g,p)),x.setAttribute("uv",new Ti(v,f)),x.setAttribute("faceIndex",new Ti(y,m)),t.push(x),r>4&&r--}return{_lodPlanes:t,_sizeLods:e,_sigmas:n}}function Bp(t){const e=new Yn(3*wp,3*wp,t);return e.texture.mapping=lt,e.texture.name="PMREM.cubeUv",e.scissorTest=!0,e}function Fp(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function Up(){return new du({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:new Gn(1,1)},inputEncoding:{value:Sp[Je]},outputEncoding:{value:Sp[Je]}},vertexShader:Gp(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t${Hp()}\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:x,depthTest:!1,depthWrite:!1})}function zp(){return new du({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:Sp[Je]},outputEncoding:{value:Sp[Je]}},vertexShader:Gp(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t${Hp()}\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:x,depthTest:!1,depthWrite:!1})}function Gp(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function Hp(){return"\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t"}function kp(t,e,n,r,i,o,a){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new xi(t,e,n,i,o,a)}const Vp=0,jp=1,Wp=0,Xp=1,qp=2;function Yp(t){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),t}function Zp(t=[]){return console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),t.isMultiMaterial=!0,t.materials=t,t.clone=function(){return t.slice()},t}function Jp(t,e){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Nc(t,e)}function Kp(t){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new rc(t)}function Qp(t,e){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Nc(t,e)}function $p(t){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new Rc(t)}function tf(t){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new Rc(t)}function ef(t){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new Rc(t)}function nf(t,e,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Kn(t,e,n)}function rf(t,e){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new Ti(t,e).setUsage(En)}function of(t,e){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new Ei(t,e)}function af(t,e){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new Ai(t,e)}function sf(t,e){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Li(t,e)}function cf(t,e){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new Ri(t,e)}function lf(t,e){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Pi(t,e)}function uf(t,e){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Ci(t,e)}function hf(t,e){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Ii(t,e)}function df(t,e){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Ni(t,e)}function pf(t,e){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Di(t,e)}function ff(t){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),rh.call(this,t),this.type="catmullrom",this.closed=!0}function mf(t){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),rh.call(this,t),this.type="catmullrom"}function gf(t){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),rh.call(this,t),this.type="catmullrom"}function vf(t){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new vp(t)}function yf(t,e){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new up(t,e)}function xf(t,e){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new Ac(new ol(t.geometry),new yc({color:void 0!==e?e:16777215}))}function bf(t,e){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new Ac(new lu(t.geometry),new yc({color:void 0!==e?e:16777215}))}function wf(t){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new ku(t)}function _f(t){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new qu(t)}function Mf(t,e,n){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new So(t,n)}Zu.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(Zu.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},Object.assign(mh.prototype,{createPointsGeometry:function(t){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");const e=this.getPoints(t);return this.createGeometry(e)},createSpacedPointsGeometry:function(t){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");const e=this.getSpacedPoints(t);return this.createGeometry(e)},createGeometry:function(t){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");const e=new jc;for(let n=0,r=t.length;n<r;n++){const r=t[n];e.vertices.push(new Kn(r.x,r.y,r.z||0))}return e}}),Object.assign(gh.prototype,{fromPoints:function(t){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)}}),ff.prototype=Object.create(rh.prototype),mf.prototype=Object.create(rh.prototype),gf.prototype=Object.create(rh.prototype),Object.assign(gf.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),$d.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},qd.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(Gu.prototype,{extractUrlBase:function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Oh.extractUrlBase(t)}}),Gu.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Object.assign(Fd.prototype,{center:function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},size:function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign(tr.prototype,{center:function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionSphere:function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},size:function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign(gr.prototype,{empty:function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()}}),Lo.prototype.setFromMatrix=function(t){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(t)},Gd.prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)},Object.assign(zn,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(t){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),zn.floorPowerOfTwo(t)},nextPowerOfTwo:function(t){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),zn.ceilPowerOfTwo(t)}}),Object.assign(Hn.prototype,{flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(t){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},getInverse:function(t){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(t).invert()}}),Object.assign(Tr.prototype,{extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new Kn).setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(t){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(t,e,n,r,i,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,r,n,i,o)},getInverse:function(t){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(t).invert()}}),ti.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)},Object.assign(Jn.prototype,{multiplyVector3:function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},inverse:function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()}}),Object.assign(Sr.prototype,{isIntersectionBox:function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionPlane:function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},isIntersectionSphere:function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}}),Object.assign(hi.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(t,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,e)},midpoint:function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},normal:function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},plane:function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)}}),Object.assign(hi,{barycoordFromPoint:function(t,e,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),hi.getBarycoord(t,e,n,r,i)},normal:function(t,e,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),hi.getNormal(t,e,n,r)}}),Object.assign(vh.prototype,{extractAllPoints:function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},extrude:function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Bl(this,t)},makeGeometry:function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Jl(this,t)}}),Object.assign(Gn.prototype,{fromAttribute:function(t,e,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Kn.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},applyProjection:function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},fromAttribute:function(t,e,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(qn.prototype,{fromAttribute:function(t,e,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(jc.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},applyMatrix:function(t){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}}),Object.assign(Jr.prototype,{getChildByName:function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(t){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}}),Object.defineProperties(Jr.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.assign(ho.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}),Object.defineProperties(ho.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),qe},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Object.defineProperties(sc.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(dc.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),cc.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(Zu.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(t){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=t}}),wo.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(yh.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(Ti.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===En},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(En)}}}),Object.assign(Ti.prototype,{setDynamic:function(t){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?En:Tn),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(qi.prototype,{addIndex:function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},addAttribute:function(t,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(t,e):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(t,new Ti(arguments[1],arguments[2])))},addDrawCall:function(t,e,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(t){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(t)},applyMatrix:function(t){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}}),Object.defineProperties(qi.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(Nh.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(t){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=t}}}),Object.defineProperties(Cd.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(t){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=t}}}),Object.defineProperties(Gs.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===En},set:function(t){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(t)}}}),Object.assign(Gs.prototype,{setDynamic:function(t){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?En:Tn),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(Nl.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.assign(zs.prototype,{dispose:function(){console.error("THREE.Scene: .dispose() has been removed.")}}),Object.defineProperties(Ld.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(wi.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new yi}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=t===v}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(t){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=t}}}),Object.defineProperties(mu.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(fu.prototype,{transparency:{get:function(){return console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission},set:function(t){console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission=t}}}),Object.defineProperties(xo.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),Object.assign(Ds.prototype,{clearTarget:function(t,e,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(t),this.clear(e,n,r)},animate:function(t){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(t)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}}),Object.defineProperties(Ds.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(t){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===t?Ke:Je}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(Es.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Yn.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),Object.defineProperties(sd.prototype,{load:{value:function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const e=this;return(new Yh).load(t,(function(t){e.setBuffer(t)})),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}}),pd.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},_o.prototype.updateCubeMap=function(t,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,e)},_o.prototype.clear=function(t,e,n,r){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(t,e,n,r)};const Sf={merge:function(t,e,n){let r;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),e.isMesh&&(e.matrixAutoUpdate&&e.updateMatrix(),r=e.matrix,e=e.geometry),t.merge(e,r,n)},center:function(t){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),t.center()}};function Tf(){console.error("THREE.CanvasRenderer has been removed")}function Ef(){console.error("THREE.JSONLoader has been removed.")}Vn.crossOrigin=void 0,Vn.loadTexture=function(t,e,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const i=new Yu;i.setCrossOrigin(this.crossOrigin);const o=i.load(t,n,void 0,r);return e&&(o.mapping=e),o},Vn.loadTextureCube=function(t,e,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const i=new Xu;i.setCrossOrigin(this.crossOrigin);const o=i.load(t,n,void 0,r);return e&&(o.mapping=e),o},Vn.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Vn.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};const Af={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};function Lf(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:r}}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r,i,o,a=n(0);function s(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}Object.assign(s.prototype,{setSize:function(){},render:function(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}),s.FullScreenQuad=(r=new a.OrthographicCamera(-1,1,1,-1,0,1),i=new a.PlaneBufferGeometry(2,2),o=function(t){this._mesh=new a.Mesh(i,t)},Object.defineProperty(o.prototype,"material",{get:function(){return this._mesh.material},set:function(t){this._mesh.material=t}}),Object.assign(o.prototype,{dispose:function(){this._mesh.geometry.dispose()},render:function(t){t.render(this._mesh,r)}}),o)},function(t,e,n){"use strict";n.r(e),n.d(e,"ShaderPass",(function(){return o}));var r=n(0),i=n(1),o=function(t,e){i.a.call(this),this.textureID=void 0!==e?e:"tDiffuse",t instanceof r.ShaderMaterial?(this.uniforms=t.uniforms,this.material=t):t&&(this.uniforms=r.UniformsUtils.clone(t.uniforms),this.material=new r.ShaderMaterial({defines:Object.assign({},t.defines),uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader})),this.fsQuad=new i.a.FullScreenQuad(this.material)};o.prototype=Object.assign(Object.create(i.a.prototype),{constructor:o,render:function(t,e,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(e),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),this.fsQuad.render(t))}})},function(t,e,n){"use strict";n.r(e),n.d(e,"GLTFLoader",(function(){return i}));var r=n(0),i=function(){function t(t){r.Loader.call(this,t),this.dracoLoader=null,this.ddsLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(t){return new s(t)})),this.register((function(t){return new l(t)})),this.register((function(t){return new u(t)})),this.register((function(t){return new c(t)})),this.register((function(t){return new o(t)})),this.register((function(t){return new h(t)}))}function e(){var t={};return{get:function(e){return t[e]},add:function(e,n){t[e]=n},remove:function(e){delete t[e]},removeAll:function(){t={}}}}t.prototype=Object.assign(Object.create(r.Loader.prototype),{constructor:t,load:function(t,e,n,i){var o,a=this;o=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:r.LoaderUtils.extractUrlBase(t),this.manager.itemStart(t);var s=function(e){i?i(e):console.error(e),a.manager.itemError(t),a.manager.itemEnd(t)},c=new r.FileLoader(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(t,(function(n){try{a.parse(n,o,(function(n){e(n),a.manager.itemEnd(t)}),s)}catch(t){s(t)}}),n,s)},setDRACOLoader:function(t){return this.dracoLoader=t,this},setDDSLoader:function(t){return this.ddsLoader=t,this},setKTX2Loader:function(t){return this.ktx2Loader=t,this},setMeshoptDecoder:function(t){return this.meshoptDecoder=t,this},register:function(t){return-1===this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.push(t),this},unregister:function(t){return-1!==this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this},parse:function(t,e,o,s){var c,l={},u={};if("string"==typeof t)c=t;else if(r.LoaderUtils.decodeText(new Uint8Array(t,0,4))===d){try{l[n.KHR_BINARY_GLTF]=new m(t)}catch(t){return void(s&&s(t))}c=l[n.KHR_BINARY_GLTF].content}else c=r.LoaderUtils.decodeText(new Uint8Array(t));var h=JSON.parse(c);if(void 0===h.asset||h.asset.version[0]<2)s&&s(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{var p=new j(h,{path:e||this.resourcePath||"",crossOrigin:this.crossOrigin,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});p.fileLoader.setRequestHeader(this.requestHeader);for(var f=0;f<this.pluginCallbacks.length;f++){var y=this.pluginCallbacks[f](p);u[y.name]=y,l[y.name]=!0}if(h.extensionsUsed)for(f=0;f<h.extensionsUsed.length;++f){var w=h.extensionsUsed[f],_=h.extensionsRequired||[];switch(w){case n.KHR_MATERIALS_UNLIT:l[w]=new a;break;case n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:l[w]=new x;break;case n.KHR_DRACO_MESH_COMPRESSION:l[w]=new g(h,this.dracoLoader);break;case n.MSFT_TEXTURE_DDS:l[w]=new i(this.ddsLoader);break;case n.KHR_TEXTURE_TRANSFORM:l[w]=new v;break;case n.KHR_MESH_QUANTIZATION:l[w]=new b;break;default:_.indexOf(w)>=0&&void 0===u[w]&&console.warn('THREE.GLTFLoader: Unknown extension "'+w+'".')}}p.setExtensions(l),p.setPlugins(u),p.parse(o,s)}}});var n={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};function i(t){if(!t)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing DDSLoader");this.name=n.MSFT_TEXTURE_DDS,this.ddsLoader=t}function o(t){this.parser=t,this.name=n.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}function a(){this.name=n.KHR_MATERIALS_UNLIT}function s(t){this.parser=t,this.name=n.KHR_MATERIALS_CLEARCOAT}function c(t){this.parser=t,this.name=n.KHR_MATERIALS_TRANSMISSION}function l(t){this.parser=t,this.name=n.KHR_TEXTURE_BASISU}function u(t){this.parser=t,this.name=n.EXT_TEXTURE_WEBP,this.isSupported=null}function h(t){this.name=n.EXT_MESHOPT_COMPRESSION,this.parser=t}o.prototype._markDefs=function(){for(var t=this.parser,e=this.parser.json.nodes||[],n=0,r=e.length;n<r;n++){var i=e[n];i.extensions&&i.extensions[this.name]&&void 0!==i.extensions[this.name].light&&t._addNodeRef(this.cache,i.extensions[this.name].light)}},o.prototype._loadLight=function(t){var e=this.parser,n="light:"+t,i=e.cache.get(n);if(i)return i;var o,a=e.json,s=((a.extensions&&a.extensions[this.name]||{}).lights||[])[t],c=new r.Color(16777215);void 0!==s.color&&c.fromArray(s.color);var l=void 0!==s.range?s.range:0;switch(s.type){case"directional":(o=new r.DirectionalLight(c)).target.position.set(0,0,-1),o.add(o.target);break;case"point":(o=new r.PointLight(c)).distance=l;break;case"spot":(o=new r.SpotLight(c)).distance=l,s.spot=s.spot||{},s.spot.innerConeAngle=void 0!==s.spot.innerConeAngle?s.spot.innerConeAngle:0,s.spot.outerConeAngle=void 0!==s.spot.outerConeAngle?s.spot.outerConeAngle:Math.PI/4,o.angle=s.spot.outerConeAngle,o.penumbra=1-s.spot.innerConeAngle/s.spot.outerConeAngle,o.target.position.set(0,0,-1),o.add(o.target);break;default:throw new Error('THREE.GLTFLoader: Unexpected light type, "'+s.type+'".')}return o.position.set(0,0,0),o.decay=2,void 0!==s.intensity&&(o.intensity=s.intensity),o.name=e.createUniqueName(s.name||"light_"+t),i=Promise.resolve(o),e.cache.add(n,i),i},o.prototype.createNodeAttachment=function(t){var e=this,n=this.parser,r=n.json.nodes[t],i=(r.extensions&&r.extensions[this.name]||{}).light;return void 0===i?null:this._loadLight(i).then((function(t){return n._getNodeRef(e.cache,i,t)}))},a.prototype.getMaterialType=function(){return r.MeshBasicMaterial},a.prototype.extendParams=function(t,e,n){var i=[];t.color=new r.Color(1,1,1),t.opacity=1;var o=e.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){var a=o.baseColorFactor;t.color.fromArray(a),t.opacity=a[3]}void 0!==o.baseColorTexture&&i.push(n.assignTexture(t,"map",o.baseColorTexture))}return Promise.all(i)},s.prototype.getMaterialType=function(t){var e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?r.MeshPhysicalMaterial:null},s.prototype.extendMaterialParams=function(t,e){var n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();var o=[],a=i.extensions[this.name];if(void 0!==a.clearcoatFactor&&(e.clearcoat=a.clearcoatFactor),void 0!==a.clearcoatTexture&&o.push(n.assignTexture(e,"clearcoatMap",a.clearcoatTexture)),void 0!==a.clearcoatRoughnessFactor&&(e.clearcoatRoughness=a.clearcoatRoughnessFactor),void 0!==a.clearcoatRoughnessTexture&&o.push(n.assignTexture(e,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),void 0!==a.clearcoatNormalTexture&&(o.push(n.assignTexture(e,"clearcoatNormalMap",a.clearcoatNormalTexture)),void 0!==a.clearcoatNormalTexture.scale)){var s=a.clearcoatNormalTexture.scale;e.clearcoatNormalScale=new r.Vector2(s,s)}return Promise.all(o)},c.prototype.getMaterialType=function(t){var e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?r.MeshPhysicalMaterial:null},c.prototype.extendMaterialParams=function(t,e){var n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[],o=r.extensions[this.name];return void 0!==o.transmissionFactor&&(e.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&i.push(n.assignTexture(e,"transmissionMap",o.transmissionTexture)),Promise.all(i)},l.prototype.loadTexture=function(t){var e=this.parser,n=e.json,r=n.textures[t];if(!r.extensions||!r.extensions[this.name])return null;var i=r.extensions[this.name],o=n.images[i.source],a=e.options.ktx2Loader;if(!a){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return e.loadTextureImage(t,o,a)},u.prototype.loadTexture=function(t){var e=this.name,n=this.parser,r=n.json,i=r.textures[t];if(!i.extensions||!i.extensions[e])return null;var o=i.extensions[e],a=r.images[o.source],s=a.uri?n.options.manager.getHandler(a.uri):n.textureLoader;return this.detectSupport().then((function(i){if(i)return n.loadTextureImage(t,a,s);if(r.extensionsRequired&&r.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(t)}))},u.prototype.detectSupport=function(){return this.isSupported||(this.isSupported=new Promise((function(t){var e=new Image;e.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",e.onload=e.onerror=function(){t(1===e.height)}}))),this.isSupported},h.prototype.loadBufferView=function(t){var e=this.parser.json,n=e.bufferViews[t];if(n.extensions&&n.extensions[this.name]){var r=n.extensions[this.name],i=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(e.extensionsRequired&&e.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([i,o.ready]).then((function(t){var e=r.byteOffset||0,n=r.byteLength||0,i=r.count,a=r.byteStride,s=new ArrayBuffer(i*a),c=new Uint8Array(t[0],e,n);return o.decodeGltfBuffer(new Uint8Array(s),i,a,c,r.mode,r.filter),s}))}return null};var d="glTF",p=1313821514,f=5130562;function m(t){this.name=n.KHR_BINARY_GLTF,this.content=null,this.body=null;var e=new DataView(t,0,12);if(this.header={magic:r.LoaderUtils.decodeText(new Uint8Array(t.slice(0,4))),version:e.getUint32(4,!0),length:e.getUint32(8,!0)},this.header.magic!==d)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");for(var i=new DataView(t,12),o=0;o<i.byteLength;){var a=i.getUint32(o,!0);o+=4;var s=i.getUint32(o,!0);if(o+=4,s===p){var c=new Uint8Array(t,12+o,a);this.content=r.LoaderUtils.decodeText(c)}else if(s===f){var l=12+o;this.body=t.slice(l,l+a)}o+=a}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}function g(t,e){if(!e)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=n.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=e,this.dracoLoader.preload()}function v(){this.name=n.KHR_TEXTURE_TRANSFORM}function y(t){r.MeshStandardMaterial.call(this),this.isGLTFSpecularGlossinessMaterial=!0;var e=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),n=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),i=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),o=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),a=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.specularRoughness += geometryRoughness;","material.specularRoughness = min( material.specularRoughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),s={specular:{value:(new r.Color).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=s,this.onBeforeCompile=function(t){for(var r in s)t.uniforms[r]=s[r];t.fragmentShader=t.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",e).replace("#include <metalnessmap_pars_fragment>",n).replace("#include <roughnessmap_fragment>",i).replace("#include <metalnessmap_fragment>",o).replace("#include <lights_physical_fragment>",a)},Object.defineProperties(this,{specular:{get:function(){return s.specular.value},set:function(t){s.specular.value=t}},specularMap:{get:function(){return s.specularMap.value},set:function(t){s.specularMap.value=t,t?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return s.glossiness.value},set:function(t){s.glossiness.value=t}},glossinessMap:{get:function(){return s.glossinessMap.value},set:function(t){s.glossinessMap.value=t,t?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(t)}function x(){return{name:n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return y},extendParams:function(t,e,n){var i=e.extensions[this.name];t.color=new r.Color(1,1,1),t.opacity=1;var o=[];if(Array.isArray(i.diffuseFactor)){var a=i.diffuseFactor;t.color.fromArray(a),t.opacity=a[3]}if(void 0!==i.diffuseTexture&&o.push(n.assignTexture(t,"map",i.diffuseTexture)),t.emissive=new r.Color(0,0,0),t.glossiness=void 0!==i.glossinessFactor?i.glossinessFactor:1,t.specular=new r.Color(1,1,1),Array.isArray(i.specularFactor)&&t.specular.fromArray(i.specularFactor),void 0!==i.specularGlossinessTexture){var s=i.specularGlossinessTexture;o.push(n.assignTexture(t,"glossinessMap",s)),o.push(n.assignTexture(t,"specularMap",s))}return Promise.all(o)},createMaterial:function(t){var e=new y(t);return e.fog=!0,e.color=t.color,e.map=void 0===t.map?null:t.map,e.lightMap=null,e.lightMapIntensity=1,e.aoMap=void 0===t.aoMap?null:t.aoMap,e.aoMapIntensity=1,e.emissive=t.emissive,e.emissiveIntensity=1,e.emissiveMap=void 0===t.emissiveMap?null:t.emissiveMap,e.bumpMap=void 0===t.bumpMap?null:t.bumpMap,e.bumpScale=1,e.normalMap=void 0===t.normalMap?null:t.normalMap,e.normalMapType=r.TangentSpaceNormalMap,t.normalScale&&(e.normalScale=t.normalScale),e.displacementMap=null,e.displacementScale=1,e.displacementBias=0,e.specularMap=void 0===t.specularMap?null:t.specularMap,e.specular=t.specular,e.glossinessMap=void 0===t.glossinessMap?null:t.glossinessMap,e.glossiness=t.glossiness,e.alphaMap=null,e.envMap=void 0===t.envMap?null:t.envMap,e.envMapIntensity=1,e.refractionRatio=.98,e}}}function b(){this.name=n.KHR_MESH_QUANTIZATION}function w(t,e,n,i){r.Interpolant.call(this,t,e,n,i)}g.prototype.decodePrimitive=function(t,e){var n=this.json,r=this.dracoLoader,i=t.extensions[this.name].bufferView,o=t.extensions[this.name].attributes,a={},s={},c={};for(var l in o){var u=O[l]||l.toLowerCase();a[u]=o[l]}for(l in t.attributes){u=O[l]||l.toLowerCase();if(void 0!==o[l]){var h=n.accessors[t.attributes[l]],d=R[h.componentType];c[u]=d,s[u]=!0===h.normalized}}return e.getDependency("bufferView",i).then((function(t){return new Promise((function(e){r.decodeDracoFile(t,(function(t){for(var n in t.attributes){var r=t.attributes[n],i=s[n];void 0!==i&&(r.normalized=i)}e(t)}),a,c)}))}))},v.prototype.extendTexture=function(t,e){return t=t.clone(),void 0!==e.offset&&t.offset.fromArray(e.offset),void 0!==e.rotation&&(t.rotation=e.rotation),void 0!==e.scale&&t.repeat.fromArray(e.scale),void 0!==e.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),t.needsUpdate=!0,t},y.prototype=Object.create(r.MeshStandardMaterial.prototype),y.prototype.constructor=y,y.prototype.copy=function(t){return r.MeshStandardMaterial.prototype.copy.call(this,t),this.specularMap=t.specularMap,this.specular.copy(t.specular),this.glossinessMap=t.glossinessMap,this.glossiness=t.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this},w.prototype=Object.create(r.Interpolant.prototype),w.prototype.constructor=w,w.prototype.copySampleValue_=function(t){for(var e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=t*r*3+r,o=0;o!==r;o++)e[o]=n[i+o];return e},w.prototype.beforeStart_=w.prototype.copySampleValue_,w.prototype.afterEnd_=w.prototype.copySampleValue_,w.prototype.interpolate_=function(t,e,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=2*a,c=3*a,l=r-e,u=(n-e)/l,h=u*u,d=h*u,p=t*c,f=p-c,m=-2*d+3*h,g=d-h,v=1-m,y=g-h+u,x=0;x!==a;x++){var b=o[f+x+a],w=o[f+x+s]*l,_=o[p+x+a],M=o[p+x]*l;i[x]=v*b+y*w+m*_+g*M}return i};var _=0,M=1,S=2,T=3,E=4,A=5,L=6,R={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},P={9728:r.NearestFilter,9729:r.LinearFilter,9984:r.NearestMipmapNearestFilter,9985:r.LinearMipmapNearestFilter,9986:r.NearestMipmapLinearFilter,9987:r.LinearMipmapLinearFilter},C={33071:r.ClampToEdgeWrapping,33648:r.MirroredRepeatWrapping,10497:r.RepeatWrapping},I={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},O={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},N={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},D={CUBICSPLINE:void 0,LINEAR:r.InterpolateLinear,STEP:r.InterpolateDiscrete},B="OPAQUE",F="MASK",U="BLEND";function z(t,e){return"string"!=typeof t||""===t?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}function G(t,e,n){for(var r in n.extensions)void 0===t[r]&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=n.extensions[r])}function H(t,e){void 0!==e.extras&&("object"==typeof e.extras?Object.assign(t.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function k(t,e){if(t.updateMorphTargets(),void 0!==e.weights)for(var n=0,r=e.weights.length;n<r;n++)t.morphTargetInfluences[n]=e.weights[n];if(e.extras&&Array.isArray(e.extras.targetNames)){var i=e.extras.targetNames;if(t.morphTargetInfluences.length===i.length){t.morphTargetDictionary={};for(n=0,r=i.length;n<r;n++)t.morphTargetDictionary[i[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function V(t){for(var e="",n=Object.keys(t).sort(),r=0,i=n.length;r<i;r++)e+=n[r]+":"+t[n[r]]+";";return e}function j(t,n){this.json=t||{},this.extensions={},this.plugins={},this.options=n||{},this.cache=new e,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.nodeNamesUsed={},"undefined"!=typeof createImageBitmap&&!1===/Firefox/.test(navigator.userAgent)?this.textureLoader=new r.ImageBitmapLoader(this.options.manager):this.textureLoader=new r.TextureLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new r.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}function W(t,e,n){var i=e.attributes,o=[];function a(e,r){return n.getDependency("accessor",e).then((function(e){t.setAttribute(r,e)}))}for(var s in i){var c=O[s]||s.toLowerCase();c in t.attributes||o.push(a(i[s],c))}if(void 0!==e.indices&&!t.index){var l=n.getDependency("accessor",e.indices).then((function(e){t.setIndex(e)}));o.push(l)}return H(t,e),function(t,e,n){var i=e.attributes,o=new r.Box3;if(void 0!==i.POSITION){var a=(f=n.json.accessors[i.POSITION]).min,s=f.max;if(void 0!==a&&void 0!==s){o.set(new r.Vector3(a[0],a[1],a[2]),new r.Vector3(s[0],s[1],s[2]));var c=e.targets;if(void 0!==c){for(var l=new r.Vector3,u=new r.Vector3,h=0,d=c.length;h<d;h++){var p=c[h];if(void 0!==p.POSITION){var f;a=(f=n.json.accessors[p.POSITION]).min,s=f.max;void 0!==a&&void 0!==s?(u.setX(Math.max(Math.abs(a[0]),Math.abs(s[0]))),u.setY(Math.max(Math.abs(a[1]),Math.abs(s[1]))),u.setZ(Math.max(Math.abs(a[2]),Math.abs(s[2]))),l.max(u)):console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}o.expandByVector(l)}t.boundingBox=o;var m=new r.Sphere;o.getCenter(m.center),m.radius=o.min.distanceTo(o.max)/2,t.boundingSphere=m}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}(t,e,n),Promise.all(o).then((function(){return void 0!==e.targets?function(t,e,n){for(var r=!1,i=!1,o=0,a=e.length;o<a;o++){if(void 0!==(l=e[o]).POSITION&&(r=!0),void 0!==l.NORMAL&&(i=!0),r&&i)break}if(!r&&!i)return Promise.resolve(t);var s=[],c=[];for(o=0,a=e.length;o<a;o++){var l=e[o];if(r){var u=void 0!==l.POSITION?n.getDependency("accessor",l.POSITION):t.attributes.position;s.push(u)}if(i){u=void 0!==l.NORMAL?n.getDependency("accessor",l.NORMAL):t.attributes.normal;c.push(u)}}return Promise.all([Promise.all(s),Promise.all(c)]).then((function(e){var n=e[0],o=e[1];return r&&(t.morphAttributes.position=n),i&&(t.morphAttributes.normal=o),t.morphTargetsRelative=!0,t}))}(t,e.targets,n):t}))}function X(t,e){var n=t.getIndex();if(null===n){var i=[],o=t.getAttribute("position");if(void 0===o)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),t;for(var a=0;a<o.count;a++)i.push(a);t.setIndex(i),n=t.getIndex()}var s=n.count-2,c=[];if(e===r.TriangleFanDrawMode)for(a=1;a<=s;a++)c.push(n.getX(0)),c.push(n.getX(a)),c.push(n.getX(a+1));else for(a=0;a<s;a++)a%2==0?(c.push(n.getX(a)),c.push(n.getX(a+1)),c.push(n.getX(a+2))):(c.push(n.getX(a+2)),c.push(n.getX(a+1)),c.push(n.getX(a)));c.length/3!==s&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var l=t.clone();return l.setIndex(c),l}return j.prototype.setExtensions=function(t){this.extensions=t},j.prototype.setPlugins=function(t){this.plugins=t},j.prototype.parse=function(t,e){var n=this,r=this.json,i=this.extensions;this.cache.removeAll(),this._invokeAll((function(t){return t._markDefs&&t._markDefs()})),Promise.all([this.getDependencies("scene"),this.getDependencies("animation"),this.getDependencies("camera")]).then((function(e){var o={scene:e[0][r.scene||0],scenes:e[0],animations:e[1],cameras:e[2],asset:r.asset,parser:n,userData:{}};G(i,o,r),H(o,r),t(o)})).catch(e)},j.prototype._markDefs=function(){for(var t=this.json.nodes||[],e=this.json.skins||[],n=this.json.meshes||[],r=0,i=e.length;r<i;r++)for(var o=e[r].joints,a=0,s=o.length;a<s;a++)t[o[a]].isBone=!0;for(var c=0,l=t.length;c<l;c++){var u=t[c];void 0!==u.mesh&&(this._addNodeRef(this.meshCache,u.mesh),void 0!==u.skin&&(n[u.mesh].isSkinnedMesh=!0)),void 0!==u.camera&&this._addNodeRef(this.cameraCache,u.camera)}},j.prototype._addNodeRef=function(t,e){void 0!==e&&(void 0===t.refs[e]&&(t.refs[e]=t.uses[e]=0),t.refs[e]++)},j.prototype._getNodeRef=function(t,e,n){if(t.refs[e]<=1)return n;var r=n.clone();return r.name+="_instance_"+t.uses[e]++,r},j.prototype._invokeOne=function(t){var e=Object.values(this.plugins);e.push(this);for(var n=0;n<e.length;n++){var r=t(e[n]);if(r)return r}},j.prototype._invokeAll=function(t){var e=Object.values(this.plugins);e.unshift(this);for(var n=[],r=0;r<e.length;r++){var i=t(e[r]);i&&n.push(i)}return n},j.prototype.getDependency=function(t,e){var n=t+":"+e,r=this.cache.get(n);if(!r){switch(t){case"scene":r=this.loadScene(e);break;case"node":r=this.loadNode(e);break;case"mesh":r=this._invokeOne((function(t){return t.loadMesh&&t.loadMesh(e)}));break;case"accessor":r=this.loadAccessor(e);break;case"bufferView":r=this._invokeOne((function(t){return t.loadBufferView&&t.loadBufferView(e)}));break;case"buffer":r=this.loadBuffer(e);break;case"material":r=this._invokeOne((function(t){return t.loadMaterial&&t.loadMaterial(e)}));break;case"texture":r=this._invokeOne((function(t){return t.loadTexture&&t.loadTexture(e)}));break;case"skin":r=this.loadSkin(e);break;case"animation":r=this.loadAnimation(e);break;case"camera":r=this.loadCamera(e);break;default:throw new Error("Unknown type: "+t)}this.cache.add(n,r)}return r},j.prototype.getDependencies=function(t){var e=this.cache.get(t);if(!e){var n=this,r=this.json[t+("mesh"===t?"es":"s")]||[];e=Promise.all(r.map((function(e,r){return n.getDependency(t,r)}))),this.cache.add(t,e)}return e},j.prototype.loadBuffer=function(t){var e=this.json.buffers[t],r=this.fileLoader;if(e.type&&"arraybuffer"!==e.type)throw new Error("THREE.GLTFLoader: "+e.type+" buffer type is not supported.");if(void 0===e.uri&&0===t)return Promise.resolve(this.extensions[n.KHR_BINARY_GLTF].body);var i=this.options;return new Promise((function(t,n){r.load(z(e.uri,i.path),t,void 0,(function(){n(new Error('THREE.GLTFLoader: Failed to load buffer "'+e.uri+'".'))}))}))},j.prototype.loadBufferView=function(t){var e=this.json.bufferViews[t];return this.getDependency("buffer",e.buffer).then((function(t){var n=e.byteLength||0,r=e.byteOffset||0;return t.slice(r,r+n)}))},j.prototype.loadAccessor=function(t){var e=this,n=this.json,i=this.json.accessors[t];if(void 0===i.bufferView&&void 0===i.sparse)return Promise.resolve(null);var o=[];return void 0!==i.bufferView?o.push(this.getDependency("bufferView",i.bufferView)):o.push(null),void 0!==i.sparse&&(o.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(o).then((function(t){var o,a,s=t[0],c=I[i.type],l=R[i.componentType],u=l.BYTES_PER_ELEMENT,h=u*c,d=i.byteOffset||0,p=void 0!==i.bufferView?n.bufferViews[i.bufferView].byteStride:void 0,f=!0===i.normalized;if(p&&p!==h){var m=Math.floor(d/p),g="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+m+":"+i.count,v=e.cache.get(g);v||(o=new l(s,m*p,i.count*p/u),v=new r.InterleavedBuffer(o,p/u),e.cache.add(g,v)),a=new r.InterleavedBufferAttribute(v,c,d%p/u,f)}else o=null===s?new l(i.count*c):new l(s,d,i.count*c),a=new r.BufferAttribute(o,c,f);if(void 0!==i.sparse){var y=I.SCALAR,x=R[i.sparse.indices.componentType],b=i.sparse.indices.byteOffset||0,w=i.sparse.values.byteOffset||0,_=new x(t[1],b,i.sparse.count*y),M=new l(t[2],w,i.sparse.count*c);null!==s&&(a=new r.BufferAttribute(a.array.slice(),a.itemSize,a.normalized));for(var S=0,T=_.length;S<T;S++){var E=_[S];if(a.setX(E,M[S*c]),c>=2&&a.setY(E,M[S*c+1]),c>=3&&a.setZ(E,M[S*c+2]),c>=4&&a.setW(E,M[S*c+3]),c>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return a}))},j.prototype.loadTexture=function(t){var e,r,i=this.json,o=this.options,a=i.textures[t],s=a.extensions||{};return(e=s[n.MSFT_TEXTURE_DDS]?i.images[s[n.MSFT_TEXTURE_DDS].source]:i.images[a.source]).uri&&(r=o.manager.getHandler(e.uri)),r||(r=s[n.MSFT_TEXTURE_DDS]?this.extensions[n.MSFT_TEXTURE_DDS].ddsLoader:this.textureLoader),this.loadTextureImage(t,e,r)},j.prototype.loadTextureImage=function(t,e,n){var i=this,o=this.json,a=this.options,s=o.textures[t],c=self.URL||self.webkitURL,l=e.uri,u=!1,h=!0;return"image/jpeg"===e.mimeType&&(h=!1),void 0!==e.bufferView&&(l=i.getDependency("bufferView",e.bufferView).then((function(t){if("image/png"===e.mimeType){var n=new DataView(t,25,1).getUint8(0,!1);h=6===n||4===n||3===n}u=!0;var r=new Blob([t],{type:e.mimeType});return l=c.createObjectURL(r)}))),Promise.resolve(l).then((function(t){return new Promise((function(e,i){var o=e;!0===n.isImageBitmapLoader&&(o=function(t){e(new r.CanvasTexture(t))}),n.load(z(t,a.path),o,void 0,i)}))})).then((function(e){!0===u&&c.revokeObjectURL(l),e.flipY=!1,s.name&&(e.name=s.name),h||(e.format=r.RGBFormat);var n=(o.samplers||{})[s.sampler]||{};return e.magFilter=P[n.magFilter]||r.LinearFilter,e.minFilter=P[n.minFilter]||r.LinearMipmapLinearFilter,e.wrapS=C[n.wrapS]||r.RepeatWrapping,e.wrapT=C[n.wrapT]||r.RepeatWrapping,i.associations.set(e,{type:"textures",index:t}),e}))},j.prototype.assignTexture=function(t,e,r){var i=this;return this.getDependency("texture",r.index).then((function(o){if(void 0===r.texCoord||0==r.texCoord||"aoMap"===e&&1==r.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+r.texCoord+" for texture "+e+" not yet supported."),i.extensions[n.KHR_TEXTURE_TRANSFORM]){var a=void 0!==r.extensions?r.extensions[n.KHR_TEXTURE_TRANSFORM]:void 0;if(a){var s=i.associations.get(o);o=i.extensions[n.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),i.associations.set(o,s)}}t[e]=o}))},j.prototype.assignFinalMaterial=function(t){var e=t.geometry,n=t.material,i=void 0!==e.attributes.tangent,o=void 0!==e.attributes.color,a=void 0===e.attributes.normal,s=!0===t.isSkinnedMesh,c=Object.keys(e.morphAttributes).length>0,l=c&&void 0!==e.morphAttributes.normal;if(t.isPoints){var u="PointsMaterial:"+n.uuid,h=this.cache.get(u);h||(h=new r.PointsMaterial,r.Material.prototype.copy.call(h,n),h.color.copy(n.color),h.map=n.map,h.sizeAttenuation=!1,this.cache.add(u,h)),n=h}else if(t.isLine){u="LineBasicMaterial:"+n.uuid;var d=this.cache.get(u);d||(d=new r.LineBasicMaterial,r.Material.prototype.copy.call(d,n),d.color.copy(n.color),this.cache.add(u,d)),n=d}if(i||o||a||s||c){u="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(u+="specular-glossiness:"),s&&(u+="skinning:"),i&&(u+="vertex-tangents:"),o&&(u+="vertex-colors:"),a&&(u+="flat-shading:"),c&&(u+="morph-targets:"),l&&(u+="morph-normals:");var p=this.cache.get(u);p||(p=n.clone(),s&&(p.skinning=!0),i&&(p.vertexTangents=!0),o&&(p.vertexColors=!0),a&&(p.flatShading=!0),c&&(p.morphTargets=!0),l&&(p.morphNormals=!0),this.cache.add(u,p),this.associations.set(p,this.associations.get(n))),n=p}n.aoMap&&void 0===e.attributes.uv2&&void 0!==e.attributes.uv&&e.setAttribute("uv2",e.attributes.uv),n.normalScale&&!i&&(n.normalScale.y=-n.normalScale.y),n.clearcoatNormalScale&&!i&&(n.clearcoatNormalScale.y=-n.clearcoatNormalScale.y),t.material=n},j.prototype.getMaterialType=function(){return r.MeshStandardMaterial},j.prototype.loadMaterial=function(t){var e,i=this,o=this.json,a=this.extensions,s=o.materials[t],c={},l=s.extensions||{},u=[];if(l[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var h=a[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];e=h.getMaterialType(),u.push(h.extendParams(c,s,i))}else if(l[n.KHR_MATERIALS_UNLIT]){var d=a[n.KHR_MATERIALS_UNLIT];e=d.getMaterialType(),u.push(d.extendParams(c,s,i))}else{var p=s.pbrMetallicRoughness||{};if(c.color=new r.Color(1,1,1),c.opacity=1,Array.isArray(p.baseColorFactor)){var f=p.baseColorFactor;c.color.fromArray(f),c.opacity=f[3]}void 0!==p.baseColorTexture&&u.push(i.assignTexture(c,"map",p.baseColorTexture)),c.metalness=void 0!==p.metallicFactor?p.metallicFactor:1,c.roughness=void 0!==p.roughnessFactor?p.roughnessFactor:1,void 0!==p.metallicRoughnessTexture&&(u.push(i.assignTexture(c,"metalnessMap",p.metallicRoughnessTexture)),u.push(i.assignTexture(c,"roughnessMap",p.metallicRoughnessTexture))),e=this._invokeOne((function(e){return e.getMaterialType&&e.getMaterialType(t)})),u.push(Promise.all(this._invokeAll((function(e){return e.extendMaterialParams&&e.extendMaterialParams(t,c)}))))}!0===s.doubleSided&&(c.side=r.DoubleSide);var m=s.alphaMode||B;return m===U?(c.transparent=!0,c.depthWrite=!1):(c.transparent=!1,m===F&&(c.alphaTest=void 0!==s.alphaCutoff?s.alphaCutoff:.5)),void 0!==s.normalTexture&&e!==r.MeshBasicMaterial&&(u.push(i.assignTexture(c,"normalMap",s.normalTexture)),c.normalScale=new r.Vector2(1,1),void 0!==s.normalTexture.scale&&c.normalScale.set(s.normalTexture.scale,s.normalTexture.scale)),void 0!==s.occlusionTexture&&e!==r.MeshBasicMaterial&&(u.push(i.assignTexture(c,"aoMap",s.occlusionTexture)),void 0!==s.occlusionTexture.strength&&(c.aoMapIntensity=s.occlusionTexture.strength)),void 0!==s.emissiveFactor&&e!==r.MeshBasicMaterial&&(c.emissive=(new r.Color).fromArray(s.emissiveFactor)),void 0!==s.emissiveTexture&&e!==r.MeshBasicMaterial&&u.push(i.assignTexture(c,"emissiveMap",s.emissiveTexture)),Promise.all(u).then((function(){var o;return o=e===y?a[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(c):new e(c),s.name&&(o.name=s.name),o.map&&(o.map.encoding=r.sRGBEncoding),o.emissiveMap&&(o.emissiveMap.encoding=r.sRGBEncoding),H(o,s),i.associations.set(o,{type:"materials",index:t}),s.extensions&&G(a,o,s),o}))},j.prototype.createUniqueName=function(t){for(var e=r.PropertyBinding.sanitizeNodeName(t||""),n=1;this.nodeNamesUsed[e];++n)e=t+"_"+n;return this.nodeNamesUsed[e]=!0,e},j.prototype.loadGeometries=function(t){var e=this,i=this.extensions,o=this.primitiveCache;function a(t){return i[n.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(t,e).then((function(n){return W(n,t,e)}))}for(var s,c,l=[],u=0,h=t.length;u<h;u++){var d,p=t[u],f=(c=void 0,(c=(s=p).extensions&&s.extensions[n.KHR_DRACO_MESH_COMPRESSION])?"draco:"+c.bufferView+":"+c.indices+":"+V(c.attributes):s.indices+":"+V(s.attributes)+":"+s.mode),m=o[f];if(m)l.push(m.promise);else d=p.extensions&&p.extensions[n.KHR_DRACO_MESH_COMPRESSION]?a(p):W(new r.BufferGeometry,p,e),o[f]={primitive:p,promise:d},l.push(d)}return Promise.all(l)},j.prototype.loadMesh=function(t){for(var e,n=this,i=this.json,o=this.extensions,a=i.meshes[t],s=a.primitives,c=[],l=0,u=s.length;l<u;l++){var h=void 0===s[l].material?(void 0===(e=this.cache).DefaultMaterial&&(e.DefaultMaterial=new r.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:r.FrontSide})),e.DefaultMaterial):this.getDependency("material",s[l].material);c.push(h)}return c.push(n.loadGeometries(s)),Promise.all(c).then((function(e){for(var i=e.slice(0,e.length-1),c=e[e.length-1],l=[],u=0,h=c.length;u<h;u++){var d,p=c[u],f=s[u],m=i[u];if(f.mode===E||f.mode===A||f.mode===L||void 0===f.mode)!0!==(d=!0===a.isSkinnedMesh?new r.SkinnedMesh(p,m):new r.Mesh(p,m)).isSkinnedMesh||d.geometry.attributes.skinWeight.normalized||d.normalizeSkinWeights(),f.mode===A?d.geometry=X(d.geometry,r.TriangleStripDrawMode):f.mode===L&&(d.geometry=X(d.geometry,r.TriangleFanDrawMode));else if(f.mode===M)d=new r.LineSegments(p,m);else if(f.mode===T)d=new r.Line(p,m);else if(f.mode===S)d=new r.LineLoop(p,m);else{if(f.mode!==_)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+f.mode);d=new r.Points(p,m)}Object.keys(d.geometry.morphAttributes).length>0&&k(d,a),d.name=n.createUniqueName(a.name||"mesh_"+t),H(d,a),f.extensions&&G(o,d,f),n.assignFinalMaterial(d),l.push(d)}if(1===l.length)return l[0];var g=new r.Group;for(u=0,h=l.length;u<h;u++)g.add(l[u]);return g}))},j.prototype.loadCamera=function(t){var e,n=this.json.cameras[t],i=n[n.type];if(i)return"perspective"===n.type?e=new r.PerspectiveCamera(r.MathUtils.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):"orthographic"===n.type&&(e=new r.OrthographicCamera(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),n.name&&(e.name=this.createUniqueName(n.name)),H(e,n),Promise.resolve(e);console.warn("THREE.GLTFLoader: Missing camera parameters.")},j.prototype.loadSkin=function(t){var e=this.json.skins[t],n={joints:e.joints};return void 0===e.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",e.inverseBindMatrices).then((function(t){return n.inverseBindMatrices=t,n}))},j.prototype.loadAnimation=function(t){for(var e=this.json.animations[t],n=[],i=[],o=[],a=[],s=[],c=0,l=e.channels.length;c<l;c++){var u=e.channels[c],h=e.samplers[u.sampler],d=u.target,p=void 0!==d.node?d.node:d.id,f=void 0!==e.parameters?e.parameters[h.input]:h.input,m=void 0!==e.parameters?e.parameters[h.output]:h.output;n.push(this.getDependency("node",p)),i.push(this.getDependency("accessor",f)),o.push(this.getDependency("accessor",m)),a.push(h),s.push(d)}return Promise.all([Promise.all(n),Promise.all(i),Promise.all(o),Promise.all(a),Promise.all(s)]).then((function(n){for(var i=n[0],o=n[1],a=n[2],s=n[3],c=n[4],l=[],u=0,h=i.length;u<h;u++){var d=i[u],p=o[u],f=a[u],m=s[u],g=c[u];if(void 0!==d){var v;switch(d.updateMatrix(),d.matrixAutoUpdate=!0,N[g.path]){case N.weights:v=r.NumberKeyframeTrack;break;case N.rotation:v=r.QuaternionKeyframeTrack;break;case N.position:case N.scale:default:v=r.VectorKeyframeTrack}var y=d.name?d.name:d.uuid,x=void 0!==m.interpolation?D[m.interpolation]:r.InterpolateLinear,b=[];N[g.path]===N.weights?d.traverse((function(t){!0===t.isMesh&&t.morphTargetInfluences&&b.push(t.name?t.name:t.uuid)})):b.push(y);var _=f.array;if(f.normalized){var M;if(_.constructor===Int8Array)M=1/127;else if(_.constructor===Uint8Array)M=1/255;else if(_.constructor==Int16Array)M=1/32767;else{if(_.constructor!==Uint16Array)throw new Error("THREE.GLTFLoader: Unsupported output accessor component type.");M=1/65535}for(var S=new Float32Array(_.length),T=0,E=_.length;T<E;T++)S[T]=_[T]*M;_=S}for(T=0,E=b.length;T<E;T++){var A=new v(b[T]+"."+N[g.path],p.array,_,x);"CUBICSPLINE"===m.interpolation&&(A.createInterpolant=function(t){return new w(this.times,this.values,this.getValueSize()/3,t)},A.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),l.push(A)}}}var L=e.name?e.name:"animation_"+t;return new r.AnimationClip(L,void 0,l)}))},j.prototype.loadNode=function(t){var e,n=this.json,i=this.extensions,o=this,a=n.nodes[t],s=a.name?o.createUniqueName(a.name):"";return(e=[],void 0!==a.mesh&&e.push(o.getDependency("mesh",a.mesh).then((function(t){var e=o._getNodeRef(o.meshCache,a.mesh,t);return void 0!==a.weights&&e.traverse((function(t){if(t.isMesh)for(var e=0,n=a.weights.length;e<n;e++)t.morphTargetInfluences[e]=a.weights[e]})),e}))),void 0!==a.camera&&e.push(o.getDependency("camera",a.camera).then((function(t){return o._getNodeRef(o.cameraCache,a.camera,t)}))),o._invokeAll((function(e){return e.createNodeAttachment&&e.createNodeAttachment(t)})).forEach((function(t){e.push(t)})),Promise.all(e)).then((function(e){var n;if((n=!0===a.isBone?new r.Bone:e.length>1?new r.Group:1===e.length?e[0]:new r.Object3D)!==e[0])for(var c=0,l=e.length;c<l;c++)n.add(e[c]);if(a.name&&(n.userData.name=a.name,n.name=s),H(n,a),a.extensions&&G(i,n,a),void 0!==a.matrix){var u=new r.Matrix4;u.fromArray(a.matrix),n.applyMatrix4(u)}else void 0!==a.translation&&n.position.fromArray(a.translation),void 0!==a.rotation&&n.quaternion.fromArray(a.rotation),void 0!==a.scale&&n.scale.fromArray(a.scale);return o.associations.set(n,{type:"nodes",index:t}),n}))},j.prototype.loadScene=function(){function t(e,n,i,o){var a=i.nodes[e];return o.getDependency("node",e).then((function(t){return void 0===a.skin?t:o.getDependency("skin",a.skin).then((function(t){for(var n=[],r=0,i=(e=t).joints.length;r<i;r++)n.push(o.getDependency("node",e.joints[r]));return Promise.all(n)})).then((function(n){return t.traverse((function(t){if(t.isMesh){for(var i=[],o=[],a=0,s=n.length;a<s;a++){var c=n[a];if(c){i.push(c);var l=new r.Matrix4;void 0!==e.inverseBindMatrices&&l.fromArray(e.inverseBindMatrices.array,16*a),o.push(l)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',e.joints[a])}t.bind(new r.Skeleton(i,o),t.matrixWorld)}})),t}));var e})).then((function(e){n.add(e);var r=[];if(a.children)for(var s=a.children,c=0,l=s.length;c<l;c++){var u=s[c];r.push(t(u,e,i,o))}return Promise.all(r)}))}return function(e){var n=this.json,i=this.extensions,o=this.json.scenes[e],a=new r.Group;o.name&&(a.name=this.createUniqueName(o.name)),H(a,o),o.extensions&&G(i,a,o);for(var s=o.nodes||[],c=[],l=0,u=s.length;l<u;l++)c.push(t(s[l],a,n,this));return Promise.all(c).then((function(){return a}))}}(),t}()},function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.DotScreenShader=e.GlitchPass=e.ShaderPass=e.RenderPass=e.EffectComposer=e.WEBGL=e.OrbitControls=e.Water=e.Sky=e.AnimationAction=e.VRButton=e.SVGLoader=e.XRControllerModelFactory=e.GLTFLoader=e.FBXLoader=e.ConvexBufferGeometry=void 0,i(n(0),e);const o=n(15);Object.defineProperty(e,"ConvexBufferGeometry",{enumerable:!0,get:function(){return o.ConvexBufferGeometry}});const a=n(12);Object.defineProperty(e,"FBXLoader",{enumerable:!0,get:function(){return a.FBXLoader}});const s=n(3);Object.defineProperty(e,"GLTFLoader",{enumerable:!0,get:function(){return s.GLTFLoader}});const c=n(16);Object.defineProperty(e,"XRControllerModelFactory",{enumerable:!0,get:function(){return c.XRControllerModelFactory}});const l=n(5);Object.defineProperty(e,"SVGLoader",{enumerable:!0,get:function(){return l.SVGLoader}});const u=n(6);Object.defineProperty(e,"VRButton",{enumerable:!0,get:function(){return u.VRButton}});const h=n(17);Object.defineProperty(e,"AnimationAction",{enumerable:!0,get:function(){return h.AnimationAction}});const d=n(7);Object.defineProperty(e,"Sky",{enumerable:!0,get:function(){return d.Sky}});const p=n(13);Object.defineProperty(e,"Water",{enumerable:!0,get:function(){return p.Water}});const f=n(8);Object.defineProperty(e,"OrbitControls",{enumerable:!0,get:function(){return f.OrbitControls}});const m=n(9);Object.defineProperty(e,"WEBGL",{enumerable:!0,get:function(){return m.WEBGL}});var g=n(14);Object.defineProperty(e,"EffectComposer",{enumerable:!0,get:function(){return g.EffectComposer}});var v=n(10);Object.defineProperty(e,"RenderPass",{enumerable:!0,get:function(){return v.RenderPass}});var y=n(2);Object.defineProperty(e,"ShaderPass",{enumerable:!0,get:function(){return y.ShaderPass}});var x=n(18);Object.defineProperty(e,"GlitchPass",{enumerable:!0,get:function(){return x.GlitchPass}});var b=n(11);Object.defineProperty(e,"DotScreenShader",{enumerable:!0,get:function(){return b.DotScreenShader}});const w="Three.js r"+n(0).REVISION;console.log(`%c %c %c %c %c ${w} %c https://threejs.org/`,"background: #ff0000","background: #ffff00","background: #00ff00","background: #00ffff","color: #fff; background: #000000;","background: none")},function(t,e,n){"use strict";n.r(e),n.d(e,"SVGLoader",(function(){return w}));var r,i,o,a,s,c,l,u,h,d,p,f,m,g,v,y,x,b=n(0),w=function(t){b.Loader.call(this,t),this.defaultDPI=90,this.defaultUnit="px"};w.prototype=Object.assign(Object.create(b.Loader.prototype),{constructor:w,load:function(t,e,n,r){var i=this,o=new b.FileLoader(i.manager);o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(t,(function(n){try{e(i.parse(n))}catch(e){r?r(e):console.error(e),i.manager.itemError(t)}}),n,r)},parse:function(t){var e=this;function n(t,e,n,i,o,a,s,c){if(0!=e&&0!=n){i=i*Math.PI/180,e=Math.abs(e),n=Math.abs(n);var l=(s.x-c.x)/2,u=(s.y-c.y)/2,h=Math.cos(i)*l+Math.sin(i)*u,d=-Math.sin(i)*l+Math.cos(i)*u,p=e*e,f=n*n,m=h*h,g=d*d,v=m/p+g/f;if(v>1){var y=Math.sqrt(v);p=(e*=y)*e,f=(n*=y)*n}var x=p*g+f*m,b=(p*f-x)/x,w=Math.sqrt(Math.max(0,b));o===a&&(w=-w);var _=w*e*d/n,M=-w*n*h/e,S=Math.cos(i)*_-Math.sin(i)*M+(s.x+c.x)/2,T=Math.sin(i)*_+Math.cos(i)*M+(s.y+c.y)/2,E=r(1,0,(h-_)/e,(d-M)/n),A=r((h-_)/e,(d-M)/n,(-h-_)/e,(-d-M)/n)%(2*Math.PI);t.currentPath.absellipse(S,T,e,n,E,E+A,0===a,i)}else t.lineTo(c.x,c.y)}function r(t,e,n,r){var i=t*n+e*r,o=Math.sqrt(t*t+e*e)*Math.sqrt(n*n+r*r),a=Math.acos(Math.max(-1,Math.min(1,i/o)));return t*r-e*n<0&&(a=-a),a}function i(t,e){e=Object.assign({},e);var n={};if(t.hasAttribute("class"))for(var r=t.getAttribute("class").split(/\s/).filter(Boolean).map(t=>t.trim()),i=0;i<r.length;i++)n=Object.assign(n,p["."+r[i]]);function o(r,i,o){void 0===o&&(o=function(t){return t.startsWith("url")&&console.warn("SVGLoader: url access in attributes is not implemented."),t}),t.hasAttribute(r)&&(e[i]=o(t.getAttribute(r))),n[r]&&(e[i]=o(n[r])),t.style&&""!==t.style[r]&&(e[i]=o(t.style[r]))}function a(t){return Math.max(0,Math.min(1,l(t)))}function s(t){return Math.max(0,l(t))}return t.hasAttribute("id")&&(n=Object.assign(n,p["#"+t.getAttribute("id")])),o("fill","fill"),o("fill-opacity","fillOpacity",a),o("opacity","opacity",a),o("stroke","stroke"),o("stroke-opacity","strokeOpacity",a),o("stroke-width","strokeWidth",s),o("stroke-linejoin","strokeLineJoin"),o("stroke-linecap","strokeLineCap"),o("stroke-miterlimit","strokeMiterLimit",s),o("visibility","visibility"),e}function o(t,e){return t-(e-t)}function a(t){for(var e=t.split(/[\s,]+|(?=\s?[+\-])/),n=0;n<e.length;n++){var r=e[n];if(r.indexOf(".")!==r.lastIndexOf("."))for(var i=r.split("."),o=2;o<i.length;o++)e.splice(n+o-1,0,"0."+i[o]);e[n]=l(r)}return e}var s=["mm","cm","in","pt","pc","px"],c={mm:{mm:1,cm:.1,in:1/25.4,pt:72/25.4,pc:6/25.4,px:-1},cm:{mm:10,cm:1,in:1/2.54,pt:72/2.54,pc:6/2.54,px:-1},in:{mm:25.4,cm:2.54,in:1,pt:72,pc:6,px:-1},pt:{mm:25.4/72,cm:2.54/72,in:1/72,pt:1,pc:6/72,px:-1},pc:{mm:25.4/6,cm:2.54/6,in:1/6,pt:12,pc:1,px:-1},px:{px:1}};function l(t){var n="px";if("string"==typeof t||t instanceof String)for(var r=0,i=s.length;r<i;r++){var o=s[r];if(t.endsWith(o)){n=o,t=t.substring(0,t.length-o.length);break}}var a=void 0;return"px"===n&&"px"!==e.defaultUnit?a=c.in[e.defaultUnit]/e.defaultDPI:(a=c[n][e.defaultUnit])<0&&(a=c[n].in*e.defaultDPI),a*parseFloat(t)}function u(t){var e=t.elements;return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function h(t){var e=t.elements;return Math.sqrt(e[3]*e[3]+e[4]*e[4])}var d=[],p={},f=[],m=new b.Matrix3,g=new b.Matrix3,v=new b.Matrix3,y=new b.Matrix3,x=new b.Vector2,w=new b.Vector3,_=new b.Matrix3,M=(new DOMParser).parseFromString(t,"image/svg+xml");return function t(e,r){if(1===e.nodeType){var s=function(t){if(!(t.hasAttribute("transform")||"use"===t.nodeName&&(t.hasAttribute("x")||t.hasAttribute("y"))))return null;var e=function(t){var e=new b.Matrix3,n=m;if("use"===t.nodeName&&(t.hasAttribute("x")||t.hasAttribute("y"))){var r=l(t.getAttribute("x")),i=l(t.getAttribute("y"));e.translate(r,i)}if(t.hasAttribute("transform"))for(var o=t.getAttribute("transform").split(")"),s=o.length-1;s>=0;s--){var c=o[s].trim();if(""!==c){var u=c.indexOf("("),h=c.length;if(u>0&&u<h){var d=c.substr(0,u),p=a(c.substr(u+1,h-u-1));switch(n.identity(),d){case"translate":if(p.length>=1){i=r=p[0];p.length>=2&&(i=p[1]),n.translate(r,i)}break;case"rotate":if(p.length>=1){var f,x=0,w=0;f=-p[0]*Math.PI/180,p.length>=3&&(x=p[1],w=p[2]),g.identity().translate(-x,-w),v.identity().rotate(f),y.multiplyMatrices(v,g),g.identity().translate(x,w),n.multiplyMatrices(g,y)}break;case"scale":if(p.length>=1){var _=p[0],M=_;p.length>=2&&(M=p[1]),n.scale(_,M)}break;case"skewX":1===p.length&&n.set(1,Math.tan(p[0]*Math.PI/180),0,0,1,0,0,0,1);break;case"skewY":1===p.length&&n.set(1,0,0,Math.tan(p[0]*Math.PI/180),1,0,0,0,1);break;case"matrix":6===p.length&&n.set(p[0],p[2],p[4],p[1],p[3],p[5],0,0,1)}}e.premultiply(n)}}return e}(t);f.length>0&&e.premultiply(f[f.length-1]);return _.copy(e),f.push(e),e}(e),c=!0,M=null;switch(e.nodeName){case"svg":break;case"style":!function(t){if(!t.sheet||!t.sheet.cssRules||!t.sheet.cssRules.length)return;for(var e=0;e<t.sheet.cssRules.length;e++){var n=t.sheet.cssRules[e];if(1===n.type)for(var r=n.selectorText.split(/,/gm).filter(Boolean).map(t=>t.trim()),i=0;i<r.length;i++)p[r[i]]=Object.assign(p[r[i]]||{},n.style)}}(e);break;case"g":r=i(e,r);break;case"path":r=i(e,r),e.hasAttribute("d")&&(M=function(t){for(var e=new b.ShapePath,r=new b.Vector2,i=new b.Vector2,s=new b.Vector2,c=!0,l=!1,u=t.getAttribute("d").match(/[a-df-z][^a-df-z]*/gi),h=0,d=u.length;h<d;h++){var p=u[h],f=p.charAt(0),m=p.substr(1).trim();switch(!0===c&&(l=!0,c=!1),f){case"M":for(var g=a(m),v=0,y=g.length;v<y;v+=2)r.x=g[v+0],r.y=g[v+1],i.x=r.x,i.y=r.y,0===v?e.moveTo(r.x,r.y):e.lineTo(r.x,r.y),0===v&&!0===l&&s.copy(r);break;case"H":for(g=a(m),v=0,y=g.length;v<y;v++)r.x=g[v],i.x=r.x,i.y=r.y,e.lineTo(r.x,r.y),0===v&&!0===l&&s.copy(r);break;case"V":for(g=a(m),v=0,y=g.length;v<y;v++)r.y=g[v],i.x=r.x,i.y=r.y,e.lineTo(r.x,r.y),0===v&&!0===l&&s.copy(r);break;case"L":for(g=a(m),v=0,y=g.length;v<y;v+=2)r.x=g[v+0],r.y=g[v+1],i.x=r.x,i.y=r.y,e.lineTo(r.x,r.y),0===v&&!0===l&&s.copy(r);break;case"C":for(g=a(m),v=0,y=g.length;v<y;v+=6)e.bezierCurveTo(g[v+0],g[v+1],g[v+2],g[v+3],g[v+4],g[v+5]),i.x=g[v+2],i.y=g[v+3],r.x=g[v+4],r.y=g[v+5],0===v&&!0===l&&s.copy(r);break;case"S":for(g=a(m),v=0,y=g.length;v<y;v+=4)e.bezierCurveTo(o(r.x,i.x),o(r.y,i.y),g[v+0],g[v+1],g[v+2],g[v+3]),i.x=g[v+0],i.y=g[v+1],r.x=g[v+2],r.y=g[v+3],0===v&&!0===l&&s.copy(r);break;case"Q":for(g=a(m),v=0,y=g.length;v<y;v+=4)e.quadraticCurveTo(g[v+0],g[v+1],g[v+2],g[v+3]),i.x=g[v+0],i.y=g[v+1],r.x=g[v+2],r.y=g[v+3],0===v&&!0===l&&s.copy(r);break;case"T":for(g=a(m),v=0,y=g.length;v<y;v+=2){var x=o(r.x,i.x),w=o(r.y,i.y);e.quadraticCurveTo(x,w,g[v+0],g[v+1]),i.x=x,i.y=w,r.x=g[v+0],r.y=g[v+1],0===v&&!0===l&&s.copy(r)}break;case"A":for(g=a(m),v=0,y=g.length;v<y;v+=7)if(g[v+5]!=r.x||g[v+6]!=r.y){var _=r.clone();r.x=g[v+5],r.y=g[v+6],i.x=r.x,i.y=r.y,n(e,g[v],g[v+1],g[v+2],g[v+3],g[v+4],_,r),0===v&&!0===l&&s.copy(r)}break;case"m":for(g=a(m),v=0,y=g.length;v<y;v+=2)r.x+=g[v+0],r.y+=g[v+1],i.x=r.x,i.y=r.y,0===v?e.moveTo(r.x,r.y):e.lineTo(r.x,r.y),0===v&&!0===l&&s.copy(r);break;case"h":for(g=a(m),v=0,y=g.length;v<y;v++)r.x+=g[v],i.x=r.x,i.y=r.y,e.lineTo(r.x,r.y),0===v&&!0===l&&s.copy(r);break;case"v":for(g=a(m),v=0,y=g.length;v<y;v++)r.y+=g[v],i.x=r.x,i.y=r.y,e.lineTo(r.x,r.y),0===v&&!0===l&&s.copy(r);break;case"l":for(g=a(m),v=0,y=g.length;v<y;v+=2)r.x+=g[v+0],r.y+=g[v+1],i.x=r.x,i.y=r.y,e.lineTo(r.x,r.y),0===v&&!0===l&&s.copy(r);break;case"c":for(g=a(m),v=0,y=g.length;v<y;v+=6)e.bezierCurveTo(r.x+g[v+0],r.y+g[v+1],r.x+g[v+2],r.y+g[v+3],r.x+g[v+4],r.y+g[v+5]),i.x=r.x+g[v+2],i.y=r.y+g[v+3],r.x+=g[v+4],r.y+=g[v+5],0===v&&!0===l&&s.copy(r);break;case"s":for(g=a(m),v=0,y=g.length;v<y;v+=4)e.bezierCurveTo(o(r.x,i.x),o(r.y,i.y),r.x+g[v+0],r.y+g[v+1],r.x+g[v+2],r.y+g[v+3]),i.x=r.x+g[v+0],i.y=r.y+g[v+1],r.x+=g[v+2],r.y+=g[v+3],0===v&&!0===l&&s.copy(r);break;case"q":for(g=a(m),v=0,y=g.length;v<y;v+=4)e.quadraticCurveTo(r.x+g[v+0],r.y+g[v+1],r.x+g[v+2],r.y+g[v+3]),i.x=r.x+g[v+0],i.y=r.y+g[v+1],r.x+=g[v+2],r.y+=g[v+3],0===v&&!0===l&&s.copy(r);break;case"t":for(g=a(m),v=0,y=g.length;v<y;v+=2){x=o(r.x,i.x),w=o(r.y,i.y);e.quadraticCurveTo(x,w,r.x+g[v+0],r.y+g[v+1]),i.x=x,i.y=w,r.x=r.x+g[v+0],r.y=r.y+g[v+1],0===v&&!0===l&&s.copy(r)}break;case"a":for(g=a(m),v=0,y=g.length;v<y;v+=7)if(0!=g[v+5]||0!=g[v+6]){_=r.clone();r.x+=g[v+5],r.y+=g[v+6],i.x=r.x,i.y=r.y,n(e,g[v],g[v+1],g[v+2],g[v+3],g[v+4],_,r),0===v&&!0===l&&s.copy(r)}break;case"Z":case"z":e.currentPath.autoClose=!0,e.currentPath.curves.length>0&&(r.copy(s),e.currentPath.currentPoint.copy(r),c=!0);break;default:console.warn(p)}l=!1}return e}(e));break;case"rect":r=i(e,r),M=function(t){var e=l(t.getAttribute("x")||0),n=l(t.getAttribute("y")||0),r=l(t.getAttribute("rx")||0),i=l(t.getAttribute("ry")||0),o=l(t.getAttribute("width")),a=l(t.getAttribute("height")),s=new b.ShapePath;s.moveTo(e+2*r,n),s.lineTo(e+o-2*r,n),(0!==r||0!==i)&&s.bezierCurveTo(e+o,n,e+o,n,e+o,n+2*i);s.lineTo(e+o,n+a-2*i),(0!==r||0!==i)&&s.bezierCurveTo(e+o,n+a,e+o,n+a,e+o-2*r,n+a);s.lineTo(e+2*r,n+a),(0!==r||0!==i)&&s.bezierCurveTo(e,n+a,e,n+a,e,n+a-2*i);s.lineTo(e,n+2*i),(0!==r||0!==i)&&s.bezierCurveTo(e,n,e,n,e+2*r,n);return s}(e);break;case"polygon":r=i(e,r),M=function(t){function e(t,e,i){var o=l(e),a=l(i);0===r?n.moveTo(o,a):n.lineTo(o,a),r++}var n=new b.ShapePath,r=0;return t.getAttribute("points").replace(/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g,e),n.currentPath.autoClose=!0,n}(e);break;case"polyline":r=i(e,r),M=function(t){function e(t,e,i){var o=l(e),a=l(i);0===r?n.moveTo(o,a):n.lineTo(o,a),r++}var n=new b.ShapePath,r=0;return t.getAttribute("points").replace(/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g,e),n.currentPath.autoClose=!1,n}(e);break;case"circle":r=i(e,r),M=function(t){var e=l(t.getAttribute("cx")),n=l(t.getAttribute("cy")),r=l(t.getAttribute("r")),i=new b.Path;i.absarc(e,n,r,0,2*Math.PI);var o=new b.ShapePath;return o.subPaths.push(i),o}(e);break;case"ellipse":r=i(e,r),M=function(t){var e=l(t.getAttribute("cx")),n=l(t.getAttribute("cy")),r=l(t.getAttribute("rx")),i=l(t.getAttribute("ry")),o=new b.Path;o.absellipse(e,n,r,i,0,2*Math.PI);var a=new b.ShapePath;return a.subPaths.push(o),a}(e);break;case"line":r=i(e,r),M=function(t){var e=l(t.getAttribute("x1")),n=l(t.getAttribute("y1")),r=l(t.getAttribute("x2")),i=l(t.getAttribute("y2")),o=new b.ShapePath;return o.moveTo(e,n),o.lineTo(r,i),o.currentPath.autoClose=!1,o}(e);break;case"defs":c=!1;break;case"use":r=i(e,r);var S=e.href.baseVal.substring(1),T=e.viewportElement.getElementById(S);T?t(T,r):console.warn("SVGLoader: 'use node' references non-existent node id: "+S)}if(M&&(void 0!==r.fill&&"none"!==r.fill&&M.color.setStyle(r.fill),function(t,e){function n(t){w.set(t.x,t.y,1).applyMatrix3(e),t.set(w.x,w.y)}for(var r=function(t){return 0!==t.elements[1]||0!==t.elements[3]}(e),i=t.subPaths,o=0,a=i.length;o<a;o++)for(var s=i[o].curves,c=0;c<s.length;c++){var l=s[c];l.isLineCurve?(n(l.v1),n(l.v2)):l.isCubicBezierCurve?(n(l.v0),n(l.v1),n(l.v2),n(l.v3)):l.isQuadraticBezierCurve?(n(l.v0),n(l.v1),n(l.v2)):l.isEllipseCurve&&(r&&console.warn("SVGLoader: Elliptic arc or ellipse rotation or skewing is not implemented."),x.set(l.aX,l.aY),n(x),l.aX=x.x,l.aY=x.y,l.xRadius*=u(e),l.yRadius*=h(e))}}(M,_),d.push(M),M.userData={node:e,style:r}),c)for(var E=e.childNodes,A=0;A<E.length;A++)t(E[A],r);s&&(f.pop(),f.length>0?_.copy(f[f.length-1]):_.identity())}}(M.documentElement,{fill:"#000",fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeLineJoin:"miter",strokeLineCap:"butt",strokeMiterLimit:4}),{paths:d,xml:M.documentElement}}}),w.getStrokeStyle=function(t,e,n,r,i){return{strokeColor:e=void 0!==e?e:"#000",strokeWidth:t=void 0!==t?t:1,strokeLineJoin:n=void 0!==n?n:"miter",strokeLineCap:r=void 0!==r?r:"butt",strokeMiterLimit:i=void 0!==i?i:4}},w.pointsToStroke=function(t,e,n,r){var i=[],o=[],a=[];if(0===w.pointsToStrokeWithBuffers(t,e,n,r,i,o,a))return null;var s=new b.BufferGeometry;return s.setAttribute("position",new b.Float32BufferAttribute(i,3)),s.setAttribute("normal",new b.Float32BufferAttribute(o,3)),s.setAttribute("uv",new b.Float32BufferAttribute(a,2)),s},w.pointsToStrokeWithBuffers=(r=new b.Vector2,i=new b.Vector2,o=new b.Vector2,a=new b.Vector2,s=new b.Vector2,c=new b.Vector2,l=new b.Vector2,u=new b.Vector2,h=new b.Vector2,d=new b.Vector2,p=new b.Vector2,f=new b.Vector2,m=new b.Vector2,g=new b.Vector2,v=new b.Vector2,y=new b.Vector2,x=new b.Vector2,function(t,e,n,b,w,_,M,S){n=void 0!==n?n:12,b=void 0!==b?b:.001,S=void 0!==S?S:0;var T=(t=function(t){for(var e=!1,n=1,r=t.length-1;n<r;n++)if(t[n].distanceTo(t[n+1])<b){e=!0;break}if(!e)return t;var i=[];for(i.push(t[0]),n=1,r=t.length-1;n<r;n++)t[n].distanceTo(t[n+1])>=b&&i.push(t[n]);return i.push(t[t.length-1]),i}(t)).length;if(T<2)return 0;var E,A,L,R,P,C=t[0].equals(t[T-1]),I=t[0],O=e.strokeWidth/2,N=1/(T-1),D=0,B=!1,F=0,U=3*S,z=2*S;K(t[0],t[1],r).multiplyScalar(O),u.copy(t[0]).sub(r),h.copy(t[0]).add(r),d.copy(u),p.copy(h);for(var G=1;G<T;G++){E=t[G],A=G===T-1?C?t[1]:void 0:t[G+1];var H=r;K(I,E,H),o.copy(H).multiplyScalar(O),f.copy(E).sub(o),m.copy(E).add(o);var k=D+N;if(L=!1,void 0!==A){K(E,A,i),o.copy(i).multiplyScalar(O),g.copy(E).sub(o),v.copy(E).add(o),R=!0,o.subVectors(A,I),H.dot(o)<0&&(R=!1),1===G&&(B=R),o.subVectors(A,E),o.normalize();var V=Math.abs(H.dot(o));if(0!==V){var j=O/V;o.multiplyScalar(-j),a.subVectors(E,I),s.copy(a).setLength(j).add(o),y.copy(s).negate();var W=s.length(),X=a.length();a.divideScalar(X),c.subVectors(A,E);var q=c.length();switch(c.divideScalar(q),a.dot(y)<X&&c.dot(y)<q&&(L=!0),x.copy(s).add(E),y.add(E),P=!1,L?R?(v.copy(y),m.copy(y)):(g.copy(y),f.copy(y)):tt(),e.strokeLineJoin){case"bevel":et(R,L,k);break;case"round":nt(R,L),R?$(E,f,g,k,0):$(E,v,m,k,1);break;case"miter":case"miter-clip":default:var Y=O*e.strokeMiterLimit/W;if(Y<1){if("miter-clip"!==e.strokeLineJoin){et(R,L,k);break}nt(R,L),R?(c.subVectors(x,f).multiplyScalar(Y).add(f),l.subVectors(x,g).multiplyScalar(Y).add(g),Q(f,k,0),Q(c,k,0),Q(E,k,.5),Q(E,k,.5),Q(c,k,0),Q(l,k,0),Q(E,k,.5),Q(l,k,0),Q(g,k,0)):(c.subVectors(x,m).multiplyScalar(Y).add(m),l.subVectors(x,v).multiplyScalar(Y).add(v),Q(m,k,1),Q(c,k,1),Q(E,k,.5),Q(E,k,.5),Q(c,k,1),Q(l,k,1),Q(E,k,.5),Q(l,k,1),Q(v,k,1))}else L?(R?(Q(h,D,1),Q(u,D,0),Q(x,k,0),Q(h,D,1),Q(x,k,0),Q(y,k,1)):(Q(h,D,1),Q(u,D,0),Q(x,k,1),Q(u,D,0),Q(y,k,0),Q(x,k,1)),R?g.copy(x):v.copy(x)):R?(Q(f,k,0),Q(x,k,0),Q(E,k,.5),Q(E,k,.5),Q(x,k,0),Q(g,k,0)):(Q(m,k,1),Q(x,k,1),Q(E,k,.5),Q(E,k,.5),Q(x,k,1),Q(v,k,1)),P=!0}}else tt()}else tt();C||G!==T-1||rt(t[0],d,p,R,!0,D),D=k,I=E,u.copy(g),h.copy(v)}if(C){if(L&&w){var Z=x,J=y;B!==R&&(Z=y,J=x),R?(P||B)&&(J.toArray(w,0),J.toArray(w,9),P&&Z.toArray(w,3)):!P&&B||(J.toArray(w,3),J.toArray(w,9),P&&Z.toArray(w,0))}}else rt(E,f,m,R,!1,k);return F;function K(t,e,n){return n.subVectors(e,t),n.set(-n.y,n.x).normalize()}function Q(t,e,n){w&&(w[U]=t.x,w[U+1]=t.y,w[U+2]=0,_&&(_[U]=0,_[U+1]=0,_[U+2]=1),U+=3,M&&(M[z]=e,M[z+1]=n,z+=2)),F+=3}function $(t,e,s,c,l){r.copy(e).sub(t).normalize(),i.copy(s).sub(t).normalize();var u=Math.PI,h=r.dot(i);Math.abs(h)<1&&(u=Math.abs(Math.acos(h))),u/=n,o.copy(e);for(var d=0,p=n-1;d<p;d++)a.copy(o).rotateAround(t,u),Q(o,c,l),Q(a,c,l),Q(t,c,.5),o.copy(a);Q(a,c,l),Q(s,c,l),Q(t,c,.5)}function tt(){Q(h,D,1),Q(u,D,0),Q(f,k,0),Q(h,D,1),Q(f,k,1),Q(m,k,0)}function et(t,e,n){e?t?(Q(h,D,1),Q(u,D,0),Q(f,k,0),Q(h,D,1),Q(f,k,0),Q(y,k,1),Q(f,n,0),Q(g,n,0),Q(y,n,.5)):(Q(h,D,1),Q(u,D,0),Q(m,k,1),Q(u,D,0),Q(y,k,0),Q(m,k,1),Q(m,n,1),Q(v,n,0),Q(y,n,.5)):t?(Q(f,n,0),Q(g,n,0),Q(E,n,.5)):(Q(m,n,1),Q(v,n,0),Q(E,n,.5))}function nt(t,e){e&&(t?(Q(h,D,1),Q(u,D,0),Q(f,k,0),Q(h,D,1),Q(f,k,0),Q(y,k,1),Q(f,D,0),Q(E,k,.5),Q(y,k,1),Q(E,k,.5),Q(g,D,0),Q(y,k,1)):(Q(h,D,1),Q(u,D,0),Q(m,k,1),Q(u,D,0),Q(y,k,0),Q(m,k,1),Q(m,D,1),Q(y,k,0),Q(E,k,.5),Q(E,k,.5),Q(y,k,0),Q(v,D,1)))}function rt(t,n,s,c,l,u){switch(e.strokeLineCap){case"round":l?$(t,s,n,u,.5):$(t,n,s,u,.5);break;case"square":if(l)r.subVectors(n,t),i.set(r.y,-r.x),o.addVectors(r,i).add(t),a.subVectors(i,r).add(t),c?(o.toArray(w,3),a.toArray(w,0),a.toArray(w,9)):(o.toArray(w,3),o.toArray(w,9),a.toArray(w,0));else{r.subVectors(s,t),i.set(r.y,-r.x),o.addVectors(r,i).add(t),a.subVectors(i,r).add(t);var h=w.length;c?(o.toArray(w,h-3),a.toArray(w,h-6),a.toArray(w,h-12)):(o.toArray(w,h-6),a.toArray(w,h-3),a.toArray(w,h-12))}}}})},function(t,e,n){"use strict";n.r(e),n.d(e,"VRButton",(function(){return r}));class r{static createButton(t,e){e&&console.error('THREE.VRButton: The "options" parameter has been removed. Please set the reference space type via renderer.xr.setReferenceSpaceType() instead.');const n=document.createElement("button");function r(){n.style.display="",n.style.cursor="auto",n.style.left="calc(50% - 75px)",n.style.width="150px",n.onmouseenter=null,n.onmouseleave=null,n.onclick=null,n.textContent="VR NOT SUPPORTED"}function i(t){t.style.position="absolute",t.style.bottom="20px",t.style.padding="12px 6px",t.style.border="1px solid #fff",t.style.borderRadius="4px",t.style.background="rgba(0,0,0,0.1)",t.style.color="#fff",t.style.font="normal 13px sans-serif",t.style.textAlign="center",t.style.opacity="0.5",t.style.outline="none",t.style.zIndex="999"}if("xr"in navigator)return n.id="VRButton",n.style.display="none",i(n),navigator.xr.isSessionSupported("immersive-vr").then((function(e){e?function(){let e=null;function r(r){r.addEventListener("end",i),t.xr.setSession(r),n.textContent="EXIT VR",e=r}function i(){e.removeEventListener("end",i),n.textContent="ENTER VR",e=null}n.style.display="",n.style.cursor="pointer",n.style.left="calc(50% - 50px)",n.style.width="100px",n.textContent="ENTER VR",n.onmouseenter=function(){n.style.opacity="1.0"},n.onmouseleave=function(){n.style.opacity="0.5"},n.onclick=function(){if(null===e){const t={optionalFeatures:["local-floor","bounded-floor","hand-tracking"]};navigator.xr.requestSession("immersive-vr",t).then(r)}else e.end()}}():r()})),n;{const t=document.createElement("a");return!1===window.isSecureContext?(t.href=document.location.href.replace(/^http:/,"https:"),t.innerHTML="WEBXR NEEDS HTTPS"):(t.href="https://immersiveweb.dev/",t.innerHTML="WEBXR NOT AVAILABLE"),t.style.left="calc(50% - 90px)",t.style.width="180px",t.style.textDecoration="none",i(t),t}}}},function(t,e,n){"use strict";n.r(e),n.d(e,"Sky",(function(){return i}));var r=n(0),i=function(){var t=i.SkyShader,e=new r.ShaderMaterial({name:"SkyShader",fragmentShader:t.fragmentShader,vertexShader:t.vertexShader,uniforms:r.UniformsUtils.clone(t.uniforms),side:r.BackSide,depthWrite:!1});r.Mesh.call(this,new r.BoxBufferGeometry(1,1,1),e)};i.prototype=Object.create(r.Mesh.prototype),i.SkyShader={uniforms:{turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new r.Vector3},up:{value:new r.Vector3(0,1,0)}},vertexShader:["uniform vec3 sunPosition;","uniform float rayleigh;","uniform float turbidity;","uniform float mieCoefficient;","uniform vec3 up;","varying vec3 vWorldPosition;","varying vec3 vSunDirection;","varying float vSunfade;","varying vec3 vBetaR;","varying vec3 vBetaM;","varying float vSunE;","const float e = 2.71828182845904523536028747135266249775724709369995957;","const float pi = 3.141592653589793238462643383279502884197169;","const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );","const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );","const float v = 4.0;","const vec3 K = vec3( 0.686, 0.678, 0.666 );","const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );","const float cutoffAngle = 1.6110731556870734;","const float steepness = 1.5;","const float EE = 1000.0;","float sunIntensity( float zenithAngleCos ) {","\tzenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );","\treturn EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );","}","vec3 totalMie( float T ) {","\tfloat c = ( 0.2 * T ) * 10E-18;","\treturn 0.434 * c * MieConst;","}","void main() {","\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );","\tvWorldPosition = worldPosition.xyz;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","\tgl_Position.z = gl_Position.w;","\tvSunDirection = normalize( sunPosition );","\tvSunE = sunIntensity( dot( vSunDirection, up ) );","\tvSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );","\tfloat rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );","\tvBetaR = totalRayleigh * rayleighCoefficient;","\tvBetaM = totalMie( turbidity ) * mieCoefficient;","}"].join("\n"),fragmentShader:["varying vec3 vWorldPosition;","varying vec3 vSunDirection;","varying float vSunfade;","varying vec3 vBetaR;","varying vec3 vBetaM;","varying float vSunE;","uniform float mieDirectionalG;","uniform vec3 up;","const vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );","const float pi = 3.141592653589793238462643383279502884197169;","const float n = 1.0003;","const float N = 2.545E25;","const float rayleighZenithLength = 8.4E3;","const float mieZenithLength = 1.25E3;","const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;","const float THREE_OVER_SIXTEENPI = 0.05968310365946075;","const float ONE_OVER_FOURPI = 0.07957747154594767;","float rayleighPhase( float cosTheta ) {","\treturn THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );","}","float hgPhase( float cosTheta, float g ) {","\tfloat g2 = pow( g, 2.0 );","\tfloat inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );","\treturn ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );","}","void main() {","\tvec3 direction = normalize( vWorldPosition - cameraPos );","\tfloat zenithAngle = acos( max( 0.0, dot( up, direction ) ) );","\tfloat inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );","\tfloat sR = rayleighZenithLength * inverse;","\tfloat sM = mieZenithLength * inverse;","\tvec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );","\tfloat cosTheta = dot( direction, vSunDirection );","\tfloat rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );","\tvec3 betaRTheta = vBetaR * rPhase;","\tfloat mPhase = hgPhase( cosTheta, mieDirectionalG );","\tvec3 betaMTheta = vBetaM * mPhase;","\tvec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );","\tLin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );","\tfloat theta = acos( direction.y ); // elevation --\x3e y-axis, [-pi/2, pi/2]","\tfloat phi = atan( direction.z, direction.x ); // azimuth --\x3e x-axis [-pi/2, pi/2]","\tvec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );","\tvec3 L0 = vec3( 0.1 ) * Fex;","\tfloat sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );","\tL0 += ( vSunE * 19000.0 * Fex ) * sundisk;","\tvec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );","\tvec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );","\tgl_FragColor = vec4( retColor, 1.0 );","#include <tonemapping_fragment>","#include <encodings_fragment>","}"].join("\n")}},function(t,e,n){"use strict";n.r(e),n.d(e,"OrbitControls",(function(){return i})),n.d(e,"MapControls",(function(){return o}));var r=n(0),i=function(t,e){var n,i,o,a,s,c;void 0===e&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),e===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=t,this.domElement=e,this.enabled=!0,this.target=new r.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:r.MOUSE.ROTATE,MIDDLE:r.MOUSE.DOLLY,RIGHT:r.MOUSE.PAN},this.touches={ONE:r.TOUCH.ROTATE,TWO:r.TOUCH.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return g.phi},this.getAzimuthalAngle=function(){return g.theta},this.saveState=function(){l.target0.copy(l.target),l.position0.copy(l.object.position),l.zoom0=l.object.zoom},this.reset=function(){l.target.copy(l.target0),l.object.position.copy(l.position0),l.object.zoom=l.zoom0,l.object.updateProjectionMatrix(),l.dispatchEvent(u),l.update(),f=p.NONE},this.update=(n=new r.Vector3,i=(new r.Quaternion).setFromUnitVectors(t.up,new r.Vector3(0,1,0)),o=i.clone().invert(),a=new r.Vector3,s=new r.Quaternion,c=2*Math.PI,function(){var t=l.object.position;n.copy(t).sub(l.target),n.applyQuaternion(i),g.setFromVector3(n),l.autoRotate&&f===p.NONE&&C(2*Math.PI/60/60*l.autoRotateSpeed),l.enableDamping?(g.theta+=v.theta*l.dampingFactor,g.phi+=v.phi*l.dampingFactor):(g.theta+=v.theta,g.phi+=v.phi);var e=l.minAzimuthAngle,r=l.maxAzimuthAngle;return isFinite(e)&&isFinite(r)&&(e<-Math.PI?e+=c:e>Math.PI&&(e-=c),r<-Math.PI?r+=c:r>Math.PI&&(r-=c),g.theta=e<=r?Math.max(e,Math.min(r,g.theta)):g.theta>(e+r)/2?Math.max(e,g.theta):Math.min(r,g.theta)),g.phi=Math.max(l.minPolarAngle,Math.min(l.maxPolarAngle,g.phi)),g.makeSafe(),g.radius*=y,g.radius=Math.max(l.minDistance,Math.min(l.maxDistance,g.radius)),!0===l.enableDamping?l.target.addScaledVector(x,l.dampingFactor):l.target.add(x),n.setFromSpherical(g),n.applyQuaternion(o),t.copy(l.target).add(n),l.object.lookAt(l.target),!0===l.enableDamping?(v.theta*=1-l.dampingFactor,v.phi*=1-l.dampingFactor,x.multiplyScalar(1-l.dampingFactor)):(v.set(0,0,0),x.set(0,0,0)),y=1,!!(b||a.distanceToSquared(l.object.position)>m||8*(1-s.dot(l.object.quaternion))>m)&&(l.dispatchEvent(u),a.copy(l.object.position),s.copy(l.object.quaternion),b=!1,!0)}),this.dispose=function(){l.domElement.removeEventListener("contextmenu",et,!1),l.domElement.removeEventListener("pointerdown",q,!1),l.domElement.removeEventListener("wheel",J,!1),l.domElement.removeEventListener("touchstart",Q,!1),l.domElement.removeEventListener("touchend",tt,!1),l.domElement.removeEventListener("touchmove",$,!1),l.domElement.ownerDocument.removeEventListener("pointermove",Y,!1),l.domElement.ownerDocument.removeEventListener("pointerup",Z,!1),l.domElement.removeEventListener("keydown",K,!1)};var l=this,u={type:"change"},h={type:"start"},d={type:"end"},p={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},f=p.NONE,m=1e-6,g=new r.Spherical,v=new r.Spherical,y=1,x=new r.Vector3,b=!1,w=new r.Vector2,_=new r.Vector2,M=new r.Vector2,S=new r.Vector2,T=new r.Vector2,E=new r.Vector2,A=new r.Vector2,L=new r.Vector2,R=new r.Vector2;function P(){return Math.pow(.95,l.zoomSpeed)}function C(t){v.theta-=t}function I(t){v.phi-=t}var O,N=(O=new r.Vector3,function(t,e){O.setFromMatrixColumn(e,0),O.multiplyScalar(-t),x.add(O)}),D=function(){var t=new r.Vector3;return function(e,n){!0===l.screenSpacePanning?t.setFromMatrixColumn(n,1):(t.setFromMatrixColumn(n,0),t.crossVectors(l.object.up,t)),t.multiplyScalar(e),x.add(t)}}(),B=function(){var t=new r.Vector3;return function(e,n){var r=l.domElement;if(l.object.isPerspectiveCamera){var i=l.object.position;t.copy(i).sub(l.target);var o=t.length();o*=Math.tan(l.object.fov/2*Math.PI/180),N(2*e*o/r.clientHeight,l.object.matrix),D(2*n*o/r.clientHeight,l.object.matrix)}else l.object.isOrthographicCamera?(N(e*(l.object.right-l.object.left)/l.object.zoom/r.clientWidth,l.object.matrix),D(n*(l.object.top-l.object.bottom)/l.object.zoom/r.clientHeight,l.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),l.enablePan=!1)}}();function F(t){l.object.isPerspectiveCamera?y/=t:l.object.isOrthographicCamera?(l.object.zoom=Math.max(l.minZoom,Math.min(l.maxZoom,l.object.zoom*t)),l.object.updateProjectionMatrix(),b=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),l.enableZoom=!1)}function U(t){l.object.isPerspectiveCamera?y*=t:l.object.isOrthographicCamera?(l.object.zoom=Math.max(l.minZoom,Math.min(l.maxZoom,l.object.zoom/t)),l.object.updateProjectionMatrix(),b=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),l.enableZoom=!1)}function z(t){w.set(t.clientX,t.clientY)}function G(t){S.set(t.clientX,t.clientY)}function H(t){if(1==t.touches.length)w.set(t.touches[0].pageX,t.touches[0].pageY);else{var e=.5*(t.touches[0].pageX+t.touches[1].pageX),n=.5*(t.touches[0].pageY+t.touches[1].pageY);w.set(e,n)}}function k(t){if(1==t.touches.length)S.set(t.touches[0].pageX,t.touches[0].pageY);else{var e=.5*(t.touches[0].pageX+t.touches[1].pageX),n=.5*(t.touches[0].pageY+t.touches[1].pageY);S.set(e,n)}}function V(t){var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY,r=Math.sqrt(e*e+n*n);A.set(0,r)}function j(t){if(1==t.touches.length)_.set(t.touches[0].pageX,t.touches[0].pageY);else{var e=.5*(t.touches[0].pageX+t.touches[1].pageX),n=.5*(t.touches[0].pageY+t.touches[1].pageY);_.set(e,n)}M.subVectors(_,w).multiplyScalar(l.rotateSpeed);var r=l.domElement;C(2*Math.PI*M.x/r.clientHeight),I(2*Math.PI*M.y/r.clientHeight),w.copy(_)}function W(t){if(1==t.touches.length)T.set(t.touches[0].pageX,t.touches[0].pageY);else{var e=.5*(t.touches[0].pageX+t.touches[1].pageX),n=.5*(t.touches[0].pageY+t.touches[1].pageY);T.set(e,n)}E.subVectors(T,S).multiplyScalar(l.panSpeed),B(E.x,E.y),S.copy(T)}function X(t){var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY,r=Math.sqrt(e*e+n*n);L.set(0,r),R.set(0,Math.pow(L.y/A.y,l.zoomSpeed)),F(R.y),A.copy(L)}function q(t){if(!1!==l.enabled)switch(t.pointerType){case"mouse":case"pen":!function(t){var e;switch(t.preventDefault(),l.domElement.focus?l.domElement.focus():window.focus(),t.button){case 0:e=l.mouseButtons.LEFT;break;case 1:e=l.mouseButtons.MIDDLE;break;case 2:e=l.mouseButtons.RIGHT;break;default:e=-1}switch(e){case r.MOUSE.DOLLY:if(!1===l.enableZoom)return;!function(t){A.set(t.clientX,t.clientY)}(t),f=p.DOLLY;break;case r.MOUSE.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===l.enablePan)return;G(t),f=p.PAN}else{if(!1===l.enableRotate)return;z(t),f=p.ROTATE}break;case r.MOUSE.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===l.enableRotate)return;z(t),f=p.ROTATE}else{if(!1===l.enablePan)return;G(t),f=p.PAN}break;default:f=p.NONE}f!==p.NONE&&(l.domElement.ownerDocument.addEventListener("pointermove",Y,!1),l.domElement.ownerDocument.addEventListener("pointerup",Z,!1),l.dispatchEvent(h))}(t)}}function Y(t){if(!1!==l.enabled)switch(t.pointerType){case"mouse":case"pen":!function(t){if(!1===l.enabled)return;switch(t.preventDefault(),f){case p.ROTATE:if(!1===l.enableRotate)return;!function(t){_.set(t.clientX,t.clientY),M.subVectors(_,w).multiplyScalar(l.rotateSpeed);var e=l.domElement;C(2*Math.PI*M.x/e.clientHeight),I(2*Math.PI*M.y/e.clientHeight),w.copy(_),l.update()}(t);break;case p.DOLLY:if(!1===l.enableZoom)return;!function(t){L.set(t.clientX,t.clientY),R.subVectors(L,A),R.y>0?F(P()):R.y<0&&U(P()),A.copy(L),l.update()}(t);break;case p.PAN:if(!1===l.enablePan)return;!function(t){T.set(t.clientX,t.clientY),E.subVectors(T,S).multiplyScalar(l.panSpeed),B(E.x,E.y),S.copy(T),l.update()}(t)}}(t)}}function Z(t){switch(t.pointerType){case"mouse":case"pen":!function(t){if(l.domElement.ownerDocument.removeEventListener("pointermove",Y,!1),l.domElement.ownerDocument.removeEventListener("pointerup",Z,!1),!1===l.enabled)return;l.dispatchEvent(d),f=p.NONE}()}}function J(t){!1===l.enabled||!1===l.enableZoom||f!==p.NONE&&f!==p.ROTATE||(t.preventDefault(),t.stopPropagation(),l.dispatchEvent(h),function(t){t.deltaY<0?U(P()):t.deltaY>0&&F(P()),l.update()}(t),l.dispatchEvent(d))}function K(t){!1!==l.enabled&&!1!==l.enableKeys&&!1!==l.enablePan&&function(t){var e=!1;switch(t.keyCode){case l.keys.UP:B(0,l.keyPanSpeed),e=!0;break;case l.keys.BOTTOM:B(0,-l.keyPanSpeed),e=!0;break;case l.keys.LEFT:B(l.keyPanSpeed,0),e=!0;break;case l.keys.RIGHT:B(-l.keyPanSpeed,0),e=!0}e&&(t.preventDefault(),l.update())}(t)}function Q(t){if(!1!==l.enabled){switch(t.preventDefault(),t.touches.length){case 1:switch(l.touches.ONE){case r.TOUCH.ROTATE:if(!1===l.enableRotate)return;H(t),f=p.TOUCH_ROTATE;break;case r.TOUCH.PAN:if(!1===l.enablePan)return;k(t),f=p.TOUCH_PAN;break;default:f=p.NONE}break;case 2:switch(l.touches.TWO){case r.TOUCH.DOLLY_PAN:if(!1===l.enableZoom&&!1===l.enablePan)return;!function(t){l.enableZoom&&V(t),l.enablePan&&k(t)}(t),f=p.TOUCH_DOLLY_PAN;break;case r.TOUCH.DOLLY_ROTATE:if(!1===l.enableZoom&&!1===l.enableRotate)return;!function(t){l.enableZoom&&V(t),l.enableRotate&&H(t)}(t),f=p.TOUCH_DOLLY_ROTATE;break;default:f=p.NONE}break;default:f=p.NONE}f!==p.NONE&&l.dispatchEvent(h)}}function $(t){if(!1!==l.enabled)switch(t.preventDefault(),t.stopPropagation(),f){case p.TOUCH_ROTATE:if(!1===l.enableRotate)return;j(t),l.update();break;case p.TOUCH_PAN:if(!1===l.enablePan)return;W(t),l.update();break;case p.TOUCH_DOLLY_PAN:if(!1===l.enableZoom&&!1===l.enablePan)return;!function(t){l.enableZoom&&X(t),l.enablePan&&W(t)}(t),l.update();break;case p.TOUCH_DOLLY_ROTATE:if(!1===l.enableZoom&&!1===l.enableRotate)return;!function(t){l.enableZoom&&X(t),l.enableRotate&&j(t)}(t),l.update();break;default:f=p.NONE}}function tt(t){!1!==l.enabled&&(l.dispatchEvent(d),f=p.NONE)}function et(t){!1!==l.enabled&&t.preventDefault()}l.domElement.addEventListener("contextmenu",et,!1),l.domElement.addEventListener("pointerdown",q,!1),l.domElement.addEventListener("wheel",J,!1),l.domElement.addEventListener("touchstart",Q,!1),l.domElement.addEventListener("touchend",tt,!1),l.domElement.addEventListener("touchmove",$,!1),l.domElement.addEventListener("keydown",K,!1),this.update()};i.prototype=Object.create(r.EventDispatcher.prototype),i.prototype.constructor=i;var o=function(t,e){i.call(this,t,e),this.screenSpacePanning=!1,this.mouseButtons.LEFT=r.MOUSE.PAN,this.mouseButtons.RIGHT=r.MOUSE.ROTATE,this.touches.ONE=r.TOUCH.PAN,this.touches.TWO=r.TOUCH.DOLLY_ROTATE};o.prototype=Object.create(r.EventDispatcher.prototype),o.prototype.constructor=o},function(t,e,n){"use strict";n.r(e),n.d(e,"WEBGL",(function(){return r}));var r={isWebGLAvailable:function(){try{var t=document.createElement("canvas");return!(!window.WebGLRenderingContext||!t.getContext("webgl")&&!t.getContext("experimental-webgl"))}catch(t){return!1}},isWebGL2Available:function(){try{var t=document.createElement("canvas");return!(!window.WebGL2RenderingContext||!t.getContext("webgl2"))}catch(t){return!1}},getWebGLErrorMessage:function(){return this.getErrorMessage(1)},getWebGL2ErrorMessage:function(){return this.getErrorMessage(2)},getErrorMessage:function(t){var e={1:window.WebGLRenderingContext,2:window.WebGL2RenderingContext},n='Your $0 does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">$1</a>',r=document.createElement("div");return r.id="webglmessage",r.style.fontFamily="monospace",r.style.fontSize="13px",r.style.fontWeight="normal",r.style.textAlign="center",r.style.background="#fff",r.style.color="#000",r.style.padding="1.5em",r.style.width="400px",r.style.margin="5em auto 0",n=(n=e[t]?n.replace("$0","graphics card"):n.replace("$0","browser")).replace("$1",{1:"WebGL",2:"WebGL 2"}[t]),r.innerHTML=n,r}}},function(t,e,n){"use strict";n.r(e),n.d(e,"RenderPass",(function(){return i}));var r=n(1),i=function(t,e,n,i,o){r.a.call(this),this.scene=t,this.camera=e,this.overrideMaterial=n,this.clearColor=i,this.clearAlpha=void 0!==o?o:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1};i.prototype=Object.assign(Object.create(r.a.prototype),{constructor:i,render:function(t,e,n){var r,i,o,a=t.autoClear;t.autoClear=!1,void 0!==this.overrideMaterial&&(o=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(r=t.getClearColor().getHex(),i=t.getClearAlpha(),t.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&t.clearDepth(),t.setRenderTarget(this.renderToScreen?null:n),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),t.render(this.scene,this.camera),this.clearColor&&t.setClearColor(r,i),void 0!==this.overrideMaterial&&(this.scene.overrideMaterial=o),t.autoClear=a}})},function(t,e,n){"use strict";n.r(e),n.d(e,"DotScreenShader",(function(){return i}));var r=n(0),i={uniforms:{tDiffuse:{value:null},tSize:{value:new r.Vector2(256,256)},center:{value:new r.Vector2(.5,.5)},angle:{value:1.57},scale:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform vec2 center;","uniform float angle;","uniform float scale;","uniform vec2 tSize;","uniform sampler2D tDiffuse;","varying vec2 vUv;","float pattern() {","\tfloat s = sin( angle ), c = cos( angle );","\tvec2 tex = vUv * tSize - center;","\tvec2 point = vec2( c * tex.x - s * tex.y, s * tex.x + c * tex.y ) * scale;","\treturn ( sin( point.x ) * sin( point.y ) ) * 4.0;","}","void main() {","\tvec4 color = texture2D( tDiffuse, vUv );","\tfloat average = ( color.r + color.g + color.b ) / 3.0;","\tgl_FragColor = vec4( vec3( average * 10.0 - 5.0 + pattern() ), color.a );","}"].join("\n")}},function(t,e,n){"use strict";n.r(e),n.d(e,"FBXLoader",(function(){return V}));var r=n(0),i={},o=i;
/** @license zlib.js 2012 - imaya [ https://github.com/imaya/zlib.js ] The MIT License */function a(t,e){var n,r=t.split("."),i=o;!(r[0]in i)&&i.execScript&&i.execScript("var "+r[0]);for(;r.length&&(n=r.shift());)r.length||void 0===e?i=i[n]?i[n]:i[n]={}:i[n]=e}var s="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array&&"undefined"!=typeof DataView;function c(t){var e,n,r,i,o,a,c,l,u,h,d=t.length,p=0,f=Number.POSITIVE_INFINITY;for(l=0;l<d;++l)t[l]>p&&(p=t[l]),t[l]<f&&(f=t[l]);for(e=1<<p,n=new(s?Uint32Array:Array)(e),r=1,i=0,o=2;r<=p;){for(l=0;l<d;++l)if(t[l]===r){for(a=0,c=i,u=0;u<r;++u)a=a<<1|1&c,c>>=1;for(h=r<<16|l,u=a;u<e;u+=o)n[u]=h;++i}++r,i<<=1,o<<=1}return[n,p,f]}function l(t,e){switch(this.g=[],this.h=32768,this.d=this.f=this.a=this.l=0,this.input=s?new Uint8Array(t):t,this.m=!1,this.i=h,this.r=!1,!e&&(e={})||(e.index&&(this.a=e.index),e.bufferSize&&(this.h=e.bufferSize),e.bufferType&&(this.i=e.bufferType),e.resize&&(this.r=e.resize)),this.i){case u:this.b=32768,this.c=new(s?Uint8Array:Array)(32768+this.h+258);break;case h:this.b=0,this.c=new(s?Uint8Array:Array)(this.h),this.e=this.z,this.n=this.v,this.j=this.w;break;default:throw Error("invalid inflate mode")}}var u=0,h=1,d={t:u,s:h};l.prototype.k=function(){for(;!this.m;){var t=C(this,3);switch(1&t&&(this.m=!0),t>>>=1){case 0:var e=this.input,n=this.a,r=this.c,i=this.b,o=e.length,a=void 0,l=r.length,d=void 0;if(this.d=this.f=0,n+1>=o)throw Error("invalid uncompressed block header: LEN");if(a=e[n++]|e[n++]<<8,n+1>=o)throw Error("invalid uncompressed block header: NLEN");if(a===~(e[n++]|e[n++]<<8))throw Error("invalid uncompressed block header: length verify");if(n+a>e.length)throw Error("input buffer is broken");switch(this.i){case u:for(;i+a>r.length;){if(a-=d=l-i,s)r.set(e.subarray(n,n+d),i),i+=d,n+=d;else for(;d--;)r[i++]=e[n++];this.b=i,r=this.e(),i=this.b}break;case h:for(;i+a>r.length;)r=this.e({p:2});break;default:throw Error("invalid inflate mode")}if(s)r.set(e.subarray(n,n+a),i),i+=a,n+=a;else for(;a--;)r[i++]=e[n++];this.a=n,this.b=i,this.c=r;break;case 1:this.j(L,P);break;case 2:var p,f,m,v,y=C(this,5)+257,x=C(this,5)+1,b=C(this,4)+4,w=new(s?Uint8Array:Array)(g.length),_=void 0,M=void 0,S=void 0,T=void 0,E=void 0;for(E=0;E<b;++E)w[g[E]]=C(this,3);if(!s)for(E=b,b=w.length;E<b;++E)w[g[E]]=0;for(p=c(w),_=new(s?Uint8Array:Array)(y+x),E=0,v=y+x;E<v;)switch(M=I(this,p),M){case 16:for(T=3+C(this,2);T--;)_[E++]=S;break;case 17:for(T=3+C(this,3);T--;)_[E++]=0;S=0;break;case 18:for(T=11+C(this,7);T--;)_[E++]=0;S=0;break;default:S=_[E++]=M}f=c(s?_.subarray(0,y):_.slice(0,y)),m=c(s?_.subarray(y):_.slice(y)),this.j(f,m);break;default:throw Error("unknown BTYPE: "+t)}}return this.n()};var p,f,m=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],g=s?new Uint16Array(m):m,v=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],y=s?new Uint16Array(v):v,x=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],b=s?new Uint8Array(x):x,w=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],_=s?new Uint16Array(w):w,M=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],S=s?new Uint8Array(M):M,T=new(s?Uint8Array:Array)(288);for(p=0,f=T.length;p<f;++p)T[p]=143>=p?8:255>=p?9:279>=p?7:8;var E,A,L=c(T),R=new(s?Uint8Array:Array)(30);for(E=0,A=R.length;E<A;++E)R[E]=5;var P=c(R);function C(t,e){for(var n,r=t.f,i=t.d,o=t.input,a=t.a,s=o.length;i<e;){if(a>=s)throw Error("input buffer is broken");r|=o[a++]<<i,i+=8}return n=r&(1<<e)-1,t.f=r>>>e,t.d=i-e,t.a=a,n}function I(t,e){for(var n,r,i=t.f,o=t.d,a=t.input,s=t.a,c=a.length,l=e[0],u=e[1];o<u&&!(s>=c);)i|=a[s++]<<o,o+=8;if((r=(n=l[i&(1<<u)-1])>>>16)>o)throw Error("invalid code length: "+r);return t.f=i>>r,t.d=o-r,t.a=s,65535&n}function O(t,e){var n,r;switch(this.input=t,this.a=0,!e&&(e={})||(e.index&&(this.a=e.index),e.verify&&(this.A=e.verify)),n=t[this.a++],r=t[this.a++],15&n){case N:this.method=N;break;default:throw Error("unsupported compression method")}if(0!=((n<<8)+r)%31)throw Error("invalid fcheck flag:"+((n<<8)+r)%31);if(32&r)throw Error("fdict flag is not supported");this.q=new l(t,{index:this.a,bufferSize:e.bufferSize,bufferType:e.bufferType,resize:e.resize})}l.prototype.j=function(t,e){var n=this.c,r=this.b;this.o=t;for(var i,o,a,s,c=n.length-258;256!==(i=I(this,t));)if(256>i)r>=c&&(this.b=r,n=this.e(),r=this.b),n[r++]=i;else for(s=y[o=i-257],0<b[o]&&(s+=C(this,b[o])),i=I(this,e),a=_[i],0<S[i]&&(a+=C(this,S[i])),r>=c&&(this.b=r,n=this.e(),r=this.b);s--;)n[r]=n[r++-a];for(;8<=this.d;)this.d-=8,this.a--;this.b=r},l.prototype.w=function(t,e){var n=this.c,r=this.b;this.o=t;for(var i,o,a,s,c=n.length;256!==(i=I(this,t));)if(256>i)r>=c&&(c=(n=this.e()).length),n[r++]=i;else for(s=y[o=i-257],0<b[o]&&(s+=C(this,b[o])),i=I(this,e),a=_[i],0<S[i]&&(a+=C(this,S[i])),r+s>c&&(c=(n=this.e()).length);s--;)n[r]=n[r++-a];for(;8<=this.d;)this.d-=8,this.a--;this.b=r},l.prototype.e=function(){var t,e,n=new(s?Uint8Array:Array)(this.b-32768),r=this.b-32768,i=this.c;if(s)n.set(i.subarray(32768,n.length));else for(t=0,e=n.length;t<e;++t)n[t]=i[t+32768];if(this.g.push(n),this.l+=n.length,s)i.set(i.subarray(r,r+32768));else for(t=0;32768>t;++t)i[t]=i[r+t];return this.b=32768,i},l.prototype.z=function(t){var e,n,r,i=this.input.length/this.a+1|0,o=this.input,a=this.c;return t&&("number"==typeof t.p&&(i=t.p),"number"==typeof t.u&&(i+=t.u)),2>i?n=(r=(o.length-this.a)/this.o[2]/2*258|0)<a.length?a.length+r:a.length<<1:n=a.length*i,s?(e=new Uint8Array(n)).set(a):e=a,this.c=e},l.prototype.n=function(){var t,e,n,r,i,o=0,a=this.c,c=this.g,l=new(s?Uint8Array:Array)(this.l+(this.b-32768));if(0===c.length)return s?this.c.subarray(32768,this.b):this.c.slice(32768,this.b);for(e=0,n=c.length;e<n;++e)for(r=0,i=(t=c[e]).length;r<i;++r)l[o++]=t[r];for(e=32768,n=this.b;e<n;++e)l[o++]=a[e];return this.g=[],this.buffer=l},l.prototype.v=function(){var t,e=this.b;return s?this.r?(t=new Uint8Array(e)).set(this.c.subarray(0,e)):t=this.c.subarray(0,e):(this.c.length>e&&(this.c.length=e),t=this.c),this.buffer=t},O.prototype.k=function(){var t,e,n=this.input;if(t=this.q.k(),this.a=this.q.a,this.A){e=(n[this.a++]<<24|n[this.a++]<<16|n[this.a++]<<8|n[this.a++])>>>0;var r=t;if("string"==typeof r){var i,o,a=r.split("");for(i=0,o=a.length;i<o;i++)a[i]=(255&a[i].charCodeAt(0))>>>0;r=a}for(var s,c=1,l=0,u=r.length,h=0;0<u;){u-=s=1024<u?1024:u;do{l+=c+=r[h++]}while(--s);c%=65521,l%=65521}if(e!==(l<<16|c)>>>0)throw Error("invalid adler-32 checksum")}return t};var N=8;a("Zlib.Inflate",O),a("Zlib.Inflate.prototype.decompress",O.prototype.k);var D,B,F,U,z={ADAPTIVE:d.s,BLOCK:d.t};if(Object.keys)D=Object.keys(z);else for(B in D=[],F=0,z)D[F++]=B;for(F=0,U=D.length;F<U;++F)a("Zlib.Inflate.BufferType."+(B=D[F]),z[B]);var G=i.Zlib.Inflate,H={findSpan:function(t,e,n){var r=n.length-t-1;if(e>=n[r])return r-1;if(e<=n[t])return t;for(var i=t,o=r,a=Math.floor((i+o)/2);e<n[a]||e>=n[a+1];)e<n[a]?o=a:i=a,a=Math.floor((i+o)/2);return a},calcBasisFunctions:function(t,e,n,r){var i=[],o=[],a=[];i[0]=1;for(var s=1;s<=n;++s){o[s]=e-r[t+1-s],a[s]=r[t+s]-e;for(var c=0,l=0;l<s;++l){var u=a[l+1],h=o[s-l],d=i[l]/(u+h);i[l]=c+u*d,c=h*d}i[s]=c}return i},calcBSplinePoint:function(t,e,n,i){for(var o=this.findSpan(t,i,e),a=this.calcBasisFunctions(o,i,t,e),s=new r.Vector4(0,0,0,0),c=0;c<=t;++c){var l=n[o-t+c],u=a[c],h=l.w*u;s.x+=l.x*h,s.y+=l.y*h,s.z+=l.z*h,s.w+=l.w*u}return s},calcBasisFunctionDerivatives:function(t,e,n,r,i){for(var o=[],a=0;a<=n;++a)o[a]=0;var s=[];for(a=0;a<=r;++a)s[a]=o.slice(0);var c=[];for(a=0;a<=n;++a)c[a]=o.slice(0);c[0][0]=1;for(var l=o.slice(0),u=o.slice(0),h=1;h<=n;++h){l[h]=e-i[t+1-h],u[h]=i[t+h]-e;for(var d=0,p=0;p<h;++p){var f=u[p+1],m=l[h-p];c[h][p]=f+m;var g=c[p][h-1]/c[h][p];c[p][h]=d+f*g,d=m*g}c[h][h]=d}for(h=0;h<=n;++h)s[0][h]=c[h][n];for(p=0;p<=n;++p){var v=0,y=1,x=[];for(a=0;a<=n;++a)x[a]=o.slice(0);x[0][0]=1;for(var b=1;b<=r;++b){var w=0,_=p-b,M=n-b;p>=b&&(x[y][0]=x[v][0]/c[M+1][_],w=x[y][0]*c[_][M]);var S=p-1<=M?b-1:n-p;for(h=_>=-1?1:-_;h<=S;++h)x[y][h]=(x[v][h]-x[v][h-1])/c[M+1][_+h],w+=x[y][h]*c[_+h][M];p<=M&&(x[y][b]=-x[v][b-1]/c[M+1][p],w+=x[y][b]*c[p][M]),s[b][p]=w;h=v;v=y,y=h}}for(p=n,b=1;b<=r;++b){for(h=0;h<=n;++h)s[b][h]*=p;p*=n-b}return s},calcBSplineDerivatives:function(t,e,n,i,o){for(var a=o<t?o:t,s=[],c=this.findSpan(t,i,e),l=this.calcBasisFunctionDerivatives(c,i,t,a,e),u=[],h=0;h<n.length;++h){var d=(f=n[h].clone()).w;f.x*=d,f.y*=d,f.z*=d,u[h]=f}for(var p=0;p<=a;++p){for(var f=u[c-t].clone().multiplyScalar(l[p][0]),m=1;m<=t;++m)f.add(u[c-t+m].clone().multiplyScalar(l[p][m]));s[p]=f}for(p=a+1;p<=o+1;++p)s[p]=new r.Vector4(0,0,0);return s},calcKoverI:function(t,e){for(var n=1,r=2;r<=t;++r)n*=r;var i=1;for(r=2;r<=e;++r)i*=r;for(r=2;r<=t-e;++r)i*=r;return n/i},calcRationalCurveDerivatives:function(t){for(var e=t.length,n=[],i=[],o=0;o<e;++o){var a=t[o];n[o]=new r.Vector3(a.x,a.y,a.z),i[o]=a.w}for(var s=[],c=0;c<e;++c){var l=n[c].clone();for(o=1;o<=c;++o)l.sub(s[c-o].clone().multiplyScalar(this.calcKoverI(c,o)*i[o]));s[c]=l.divideScalar(i[0])}return s},calcNURBSDerivatives:function(t,e,n,r,i){var o=this.calcBSplineDerivatives(t,e,n,r,i);return this.calcRationalCurveDerivatives(o)},calcSurfacePoint:function(t,e,n,i,o,a,s,c){for(var l=this.findSpan(t,a,n),u=this.findSpan(e,s,i),h=this.calcBasisFunctions(l,a,t,n),d=this.calcBasisFunctions(u,s,e,i),p=[],f=0;f<=e;++f){p[f]=new r.Vector4(0,0,0,0);for(var m=0;m<=t;++m){var g=o[l-t+m][u-e+f].clone(),v=g.w;g.x*=v,g.y*=v,g.z*=v,p[f].add(g.multiplyScalar(h[m]))}}var y=new r.Vector4(0,0,0,0);for(f=0;f<=e;++f)y.add(p[f].multiplyScalar(d[f]));y.divideScalar(y.w),c.set(y.x,y.y,y.z)}},k=function(t,e,n,i,o){r.Curve.call(this),this.degree=t,this.knots=e,this.controlPoints=[],this.startKnot=i||0,this.endKnot=o||this.knots.length-1;for(var a=0;a<n.length;++a){var s=n[a];this.controlPoints[a]=new r.Vector4(s.x,s.y,s.z,s.w)}};(k.prototype=Object.create(r.Curve.prototype)).constructor=k,k.prototype.getPoint=function(t,e){var n=e||new r.Vector3,i=this.knots[this.startKnot]+t*(this.knots[this.endKnot]-this.knots[this.startKnot]),o=H.calcBSplinePoint(this.degree,this.knots,this.controlPoints,i);return 1!=o.w&&o.divideScalar(o.w),n.set(o.x,o.y,o.z)},k.prototype.getTangent=function(t,e){var n=e||new r.Vector3,i=this.knots[0]+t*(this.knots[this.knots.length-1]-this.knots[0]),o=H.calcNURBSDerivatives(this.degree,this.knots,this.controlPoints,i,1);return n.copy(o[1]).normalize(),n};var V=function(){var t,e,n;function i(t){r.Loader.call(this,t)}function o(t,e){this.textureLoader=t,this.manager=e}function a(){}function s(){}function c(){}function l(){}function u(t,e){this.dv=new DataView(t),this.offset=0,this.littleEndian=void 0===e||e}function h(){}function d(t){var e=t.match(/FBXVersion: (\d+)/);if(e)return parseInt(e[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function p(t){return t/46186158e3}i.prototype=Object.assign(Object.create(r.Loader.prototype),{constructor:i,load:function(t,e,n,i){var o=this,a=""===o.path?r.LoaderUtils.extractUrlBase(t):o.path,s=new r.FileLoader(this.manager);s.setPath(o.path),s.setResponseType("arraybuffer"),s.setRequestHeader(o.requestHeader),s.setWithCredentials(o.withCredentials),s.load(t,(function(n){try{e(o.parse(n,a))}catch(e){i?i(e):console.error(e),o.manager.itemError(t)}}),n,i)},parse:function(e,n){if(s="Kaydara FBX Binary  \0",(a=e).byteLength>=s.length&&s===w(a,0,s.length))t=(new l).parse(e);else{var i=w(e);if(!function(t){var e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"],n=0;for(var r=0;r<e.length;++r){if((o=void 0,o=t[(i=1)-1],t=t.slice(n+i),n++,o)===e[r])return!1}var i,o;return!0}(i))throw new Error("THREE.FBXLoader: Unknown format.");if(d(i)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+d(i));t=(new c).parse(i)}var a,s;return new o(new r.TextureLoader(this.manager).setPath(this.resourcePath||n).setCrossOrigin(this.crossOrigin),this.manager).parse(t)}}),o.prototype={constructor:o,parse:function(){e=this.parseConnections();var t=this.parseImages(),r=this.parseTextures(t),i=this.parseMaterials(r),o=this.parseDeformers(),s=(new a).parse(o);return this.parseScene(o,s,i),n},parseConnections:function(){var e=new Map;"Connections"in t&&t.Connections.connections.forEach((function(t){var n=t[0],r=t[1],i=t[2];e.has(n)||e.set(n,{parents:[],children:[]});var o={ID:r,relationship:i};e.get(n).parents.push(o),e.has(r)||e.set(r,{parents:[],children:[]});var a={ID:n,relationship:i};e.get(r).children.push(a)}));return e},parseImages:function(){var e={},n={};if("Video"in t.Objects){var r=t.Objects.Video;for(var i in r){var o=r[i];if(e[l=parseInt(i)]=o.RelativeFilename||o.Filename,"Content"in o){var a=o.Content instanceof ArrayBuffer&&o.Content.byteLength>0,s="string"==typeof o.Content&&""!==o.Content;if(a||s){var c=this.parseImage(r[i]);n[o.RelativeFilename||o.Filename]=c}}}}for(var l in e){var u=e[l];void 0!==n[u]?e[l]=n[u]:e[l]=e[l].split("\\").pop()}return e},parseImage:function(t){var e,n=t.Content,r=t.RelativeFilename||t.Filename,i=r.slice(r.lastIndexOf(".")+1).toLowerCase();switch(i){case"bmp":e="image/bmp";break;case"jpg":case"jpeg":e="image/jpeg";break;case"png":e="image/png";break;case"tif":e="image/tiff";break;case"tga":null===this.manager.getHandler(".tga")&&console.warn("FBXLoader: TGA loader not found, skipping ",r),e="image/tga";break;default:return void console.warn('FBXLoader: Image type "'+i+'" is not supported.')}if("string"==typeof n)return"data:"+e+";base64,"+n;var o=new Uint8Array(n);return window.URL.createObjectURL(new Blob([o],{type:e}))},parseTextures:function(e){var n=new Map;if("Texture"in t.Objects){var r=t.Objects.Texture;for(var i in r){var o=this.parseTexture(r[i],e);n.set(parseInt(i),o)}}return n},parseTexture:function(t,e){var n=this.loadTexture(t,e);n.ID=t.id,n.name=t.attrName;var i=t.WrapModeU,o=t.WrapModeV,a=void 0!==i?i.value:0,s=void 0!==o?o.value:0;if(n.wrapS=0===a?r.RepeatWrapping:r.ClampToEdgeWrapping,n.wrapT=0===s?r.RepeatWrapping:r.ClampToEdgeWrapping,"Scaling"in t){var c=t.Scaling.value;n.repeat.x=c[0],n.repeat.y=c[1]}return n},loadTexture:function(t,n){var i,o,a=this.textureLoader.path,s=e.get(t.id).children;void 0!==s&&s.length>0&&void 0!==n[s[0].ID]&&(0!==(i=n[s[0].ID]).indexOf("blob:")&&0!==i.indexOf("data:")||this.textureLoader.setPath(void 0));var c=t.FileName.slice(-3).toLowerCase();if("tga"===c){var l=this.manager.getHandler(".tga");null===l?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",t.RelativeFilename),o=new r.Texture):o=l.load(i)}else"psd"===c?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",t.RelativeFilename),o=new r.Texture):o=this.textureLoader.load(i);return this.textureLoader.setPath(a),o},parseMaterials:function(e){var n=new Map;if("Material"in t.Objects){var r=t.Objects.Material;for(var i in r){var o=this.parseMaterial(r[i],e);null!==o&&n.set(parseInt(i),o)}}return n},parseMaterial:function(t,n){var i=t.id,o=t.attrName,a=t.ShadingModel;if("object"==typeof a&&(a=a.value),!e.has(i))return null;var s,c=this.parseParameters(t,n,i);switch(a.toLowerCase()){case"phong":s=new r.MeshPhongMaterial;break;case"lambert":s=new r.MeshLambertMaterial;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',a),s=new r.MeshPhongMaterial}return s.setValues(c),s.name=o,s},parseParameters:function(t,n,i){var o={};t.BumpFactor&&(o.bumpScale=t.BumpFactor.value),t.Diffuse?o.color=(new r.Color).fromArray(t.Diffuse.value):!t.DiffuseColor||"Color"!==t.DiffuseColor.type&&"ColorRGB"!==t.DiffuseColor.type||(o.color=(new r.Color).fromArray(t.DiffuseColor.value)),t.DisplacementFactor&&(o.displacementScale=t.DisplacementFactor.value),t.Emissive?o.emissive=(new r.Color).fromArray(t.Emissive.value):!t.EmissiveColor||"Color"!==t.EmissiveColor.type&&"ColorRGB"!==t.EmissiveColor.type||(o.emissive=(new r.Color).fromArray(t.EmissiveColor.value)),t.EmissiveFactor&&(o.emissiveIntensity=parseFloat(t.EmissiveFactor.value)),t.Opacity&&(o.opacity=parseFloat(t.Opacity.value)),o.opacity<1&&(o.transparent=!0),t.ReflectionFactor&&(o.reflectivity=t.ReflectionFactor.value),t.Shininess&&(o.shininess=t.Shininess.value),t.Specular?o.specular=(new r.Color).fromArray(t.Specular.value):t.SpecularColor&&"Color"===t.SpecularColor.type&&(o.specular=(new r.Color).fromArray(t.SpecularColor.value));var a=this;return e.get(i).children.forEach((function(t){var e=t.relationship;switch(e){case"Bump":o.bumpMap=a.getTexture(n,t.ID);break;case"Maya|TEX_ao_map":o.aoMap=a.getTexture(n,t.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":o.map=a.getTexture(n,t.ID),o.map.encoding=r.sRGBEncoding;break;case"DisplacementColor":o.displacementMap=a.getTexture(n,t.ID);break;case"EmissiveColor":o.emissiveMap=a.getTexture(n,t.ID),o.emissiveMap.encoding=r.sRGBEncoding;break;case"NormalMap":case"Maya|TEX_normal_map":o.normalMap=a.getTexture(n,t.ID);break;case"ReflectionColor":o.envMap=a.getTexture(n,t.ID),o.envMap.mapping=r.EquirectangularReflectionMapping,o.envMap.encoding=r.sRGBEncoding;break;case"SpecularColor":o.specularMap=a.getTexture(n,t.ID),o.specularMap.encoding=r.sRGBEncoding;break;case"TransparentColor":case"TransparencyFactor":o.alphaMap=a.getTexture(n,t.ID),o.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",e)}})),o},getTexture:function(n,r){return"LayeredTexture"in t.Objects&&r in t.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),r=e.get(r).children[0].ID),n.get(r)},parseDeformers:function(){var n={},r={};if("Deformer"in t.Objects){var i=t.Objects.Deformer;for(var o in i){var a=i[o],s=e.get(parseInt(o));if("Skin"===a.attrType){var c=this.parseSkeleton(s,i);c.ID=o,s.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),c.geometryID=s.parents[0].ID,n[o]=c}else if("BlendShape"===a.attrType){var l={id:o};l.rawTargets=this.parseMorphTargets(s,i),l.id=o,s.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),r[o]=l}}}return{skeletons:n,morphTargets:r}},parseSkeleton:function(t,e){var n=[];return t.children.forEach((function(t){var i=e[t.ID];if("Cluster"===i.attrType){var o={ID:t.ID,indices:[],weights:[],transformLink:(new r.Matrix4).fromArray(i.TransformLink.a)};"Indexes"in i&&(o.indices=i.Indexes.a,o.weights=i.Weights.a),n.push(o)}})),{rawBones:n,bones:[]}},parseMorphTargets:function(t,n){for(var r=[],i=0;i<t.children.length;i++){var o=t.children[i],a=n[o.ID],s={name:a.attrName,initialWeight:a.DeformPercent,id:a.id,fullWeights:a.FullWeights.a};if("BlendShapeChannel"!==a.attrType)return;s.geoID=e.get(parseInt(o.ID)).children.filter((function(t){return void 0===t.relationship}))[0].ID,r.push(s)}return r},parseScene:function(i,o,a){n=new r.Group;var c=this.parseModels(i.skeletons,o,a),l=t.Objects.Model,u=this;c.forEach((function(t){var r=l[t.ID];u.setLookAtProperties(t,r),e.get(t.ID).parents.forEach((function(e){var n=c.get(e.ID);void 0!==n&&n.add(t)})),null===t.parent&&n.add(t)})),this.bindSkeleton(i.skeletons,o,c),this.createAmbientLight(),this.setupMorphMaterials(),n.traverse((function(t){if(t.userData.transformData){t.parent&&(t.userData.transformData.parentMatrixWorld=t.parent.matrix);var e=y(t.userData.transformData);t.applyMatrix4(e)}}));var h=(new s).parse();1===n.children.length&&n.children[0].isGroup&&(n.children[0].animations=h,n=n.children[0]),n.animations=h},parseModels:function(n,i,o){var a=new Map,s=t.Objects.Model;for(var c in s){var l=parseInt(c),u=s[c],h=e.get(l),d=this.buildSkeleton(h,n,l,u.attrName);if(!d){switch(u.attrType){case"Camera":d=this.createCamera(h);break;case"Light":d=this.createLight(h);break;case"Mesh":d=this.createMesh(h,i,o);break;case"NurbsCurve":d=this.createCurve(h,i);break;case"LimbNode":case"Root":d=new r.Bone;break;case"Null":default:d=new r.Group}d.name=u.attrName?r.PropertyBinding.sanitizeNodeName(u.attrName):"",d.ID=l}this.getTransformData(d,u),a.set(l,d)}return a},buildSkeleton:function(t,e,n,i){var o=null;return t.parents.forEach((function(t){for(var a in e){var s=e[a];s.rawBones.forEach((function(e,a){if(e.ID===t.ID){var c=o;(o=new r.Bone).matrixWorld.copy(e.transformLink),o.name=i?r.PropertyBinding.sanitizeNodeName(i):"",o.ID=n,s.bones[a]=o,null!==c&&o.add(c)}}))}})),o},createCamera:function(e){var n,i;if(e.children.forEach((function(e){var n=t.Objects.NodeAttribute[e.ID];void 0!==n&&(i=n)})),void 0===i)n=new r.Object3D;else{var o=0;void 0!==i.CameraProjectionType&&1===i.CameraProjectionType.value&&(o=1);var a=1;void 0!==i.NearPlane&&(a=i.NearPlane.value/1e3);var s=1e3;void 0!==i.FarPlane&&(s=i.FarPlane.value/1e3);var c=window.innerWidth,l=window.innerHeight;void 0!==i.AspectWidth&&void 0!==i.AspectHeight&&(c=i.AspectWidth.value,l=i.AspectHeight.value);var u=c/l,h=45;void 0!==i.FieldOfView&&(h=i.FieldOfView.value);var d=i.FocalLength?i.FocalLength.value:null;switch(o){case 0:n=new r.PerspectiveCamera(h,u,a,s),null!==d&&n.setFocalLength(d);break;case 1:n=new r.OrthographicCamera(-c/2,c/2,l/2,-l/2,a,s);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+o+"."),n=new r.Object3D}}return n},createLight:function(e){var n,i;if(e.children.forEach((function(e){var n=t.Objects.NodeAttribute[e.ID];void 0!==n&&(i=n)})),void 0===i)n=new r.Object3D;else{var o;o=void 0===i.LightType?0:i.LightType.value;var a=16777215;void 0!==i.Color&&(a=(new r.Color).fromArray(i.Color.value));var s=void 0===i.Intensity?1:i.Intensity.value/100;void 0!==i.CastLightOnObject&&0===i.CastLightOnObject.value&&(s=0);var c=0;void 0!==i.FarAttenuationEnd&&(c=void 0!==i.EnableFarAttenuation&&0===i.EnableFarAttenuation.value?0:i.FarAttenuationEnd.value);switch(o){case 0:n=new r.PointLight(a,s,c,1);break;case 1:n=new r.DirectionalLight(a,s);break;case 2:var l=Math.PI/3;void 0!==i.InnerAngle&&(l=r.MathUtils.degToRad(i.InnerAngle.value));var u=0;void 0!==i.OuterAngle&&(u=r.MathUtils.degToRad(i.OuterAngle.value),u=Math.max(u,1)),n=new r.SpotLight(a,s,c,l,u,1);break;default:console.warn("THREE.FBXLoader: Unknown light type "+i.LightType.value+", defaulting to a PointLight."),n=new r.PointLight(a,s)}void 0!==i.CastShadows&&1===i.CastShadows.value&&(n.castShadow=!0)}return n},createMesh:function(t,e,n){var i,o=null,a=null,s=[];return t.children.forEach((function(t){e.has(t.ID)&&(o=e.get(t.ID)),n.has(t.ID)&&s.push(n.get(t.ID))})),s.length>1?a=s:s.length>0?a=s[0]:(a=new r.MeshPhongMaterial({color:13421772}),s.push(a)),"color"in o.attributes&&s.forEach((function(t){t.vertexColors=!0})),o.FBX_Deformer?(s.forEach((function(t){t.skinning=!0})),(i=new r.SkinnedMesh(o,a)).normalizeSkinWeights()):i=new r.Mesh(o,a),i},createCurve:function(t,e){var n=t.children.reduce((function(t,n){return e.has(n.ID)&&(t=e.get(n.ID)),t}),null),i=new r.LineBasicMaterial({color:3342591,linewidth:1});return new r.Line(n,i)},getTransformData:function(t,e){var n={};"InheritType"in e&&(n.inheritType=parseInt(e.InheritType.value)),n.eulerOrder="RotationOrder"in e?x(e.RotationOrder.value):"ZYX","Lcl_Translation"in e&&(n.translation=e.Lcl_Translation.value),"PreRotation"in e&&(n.preRotation=e.PreRotation.value),"Lcl_Rotation"in e&&(n.rotation=e.Lcl_Rotation.value),"PostRotation"in e&&(n.postRotation=e.PostRotation.value),"Lcl_Scaling"in e&&(n.scale=e.Lcl_Scaling.value),"ScalingOffset"in e&&(n.scalingOffset=e.ScalingOffset.value),"ScalingPivot"in e&&(n.scalingPivot=e.ScalingPivot.value),"RotationOffset"in e&&(n.rotationOffset=e.RotationOffset.value),"RotationPivot"in e&&(n.rotationPivot=e.RotationPivot.value),t.userData.transformData=n},setLookAtProperties:function(i,o){"LookAtProperty"in o&&e.get(i.ID).children.forEach((function(e){if("LookAtProperty"===e.relationship){var o=t.Objects.Model[e.ID];if("Lcl_Translation"in o){var a=o.Lcl_Translation.value;void 0!==i.target?(i.target.position.fromArray(a),n.add(i.target)):i.lookAt((new r.Vector3).fromArray(a))}}}))},bindSkeleton:function(t,n,i){var o=this.parsePoseNodes();for(var a in t){var s=t[a];e.get(parseInt(s.ID)).parents.forEach((function(t){if(n.has(t.ID)){var a=t.ID;e.get(a).parents.forEach((function(t){i.has(t.ID)&&i.get(t.ID).bind(new r.Skeleton(s.bones),o[t.ID])}))}}))}},parsePoseNodes:function(){var e={};if("Pose"in t.Objects){var n=t.Objects.Pose;for(var i in n)if("BindPose"===n[i].attrType){var o=n[i].PoseNode;Array.isArray(o)?o.forEach((function(t){e[t.Node]=(new r.Matrix4).fromArray(t.Matrix.a)})):e[o.Node]=(new r.Matrix4).fromArray(o.Matrix.a)}}return e},createAmbientLight:function(){if("GlobalSettings"in t&&"AmbientColor"in t.GlobalSettings){var e=t.GlobalSettings.AmbientColor.value,i=e[0],o=e[1],a=e[2];if(0!==i||0!==o||0!==a){var s=new r.Color(i,o,a);n.add(new r.AmbientLight(s,1))}}},setupMorphMaterials:function(){var t=this;n.traverse((function(e){e.isMesh&&e.geometry.morphAttributes.position&&e.geometry.morphAttributes.position.length&&(Array.isArray(e.material)?e.material.forEach((function(n,r){t.setupMorphMaterial(e,n,r)})):t.setupMorphMaterial(e,e.material))}))},setupMorphMaterial:function(t,e,r){var i=t.uuid,o=e.uuid,a=!1;if(n.traverse((function(t){t.isMesh&&(Array.isArray(t.material)?t.material.forEach((function(e){e.uuid===o&&t.uuid!==i&&(a=!0)})):t.material.uuid===o&&t.uuid!==i&&(a=!0))})),!0===a){var s=e.clone();s.morphTargets=!0,void 0===r?t.material=s:t.material[r]=s}else e.morphTargets=!0}},a.prototype={constructor:a,parse:function(n){var r=new Map;if("Geometry"in t.Objects){var i=t.Objects.Geometry;for(var o in i){var a=e.get(parseInt(o)),s=this.parseGeometry(a,i[o],n);r.set(parseInt(o),s)}}return r},parseGeometry:function(t,e,n){switch(e.attrType){case"Mesh":return this.parseMeshGeometry(t,e,n);case"NurbsCurve":return this.parseNurbsGeometry(e)}},parseMeshGeometry:function(e,n,r){var i=r.skeletons,o=[],a=e.parents.map((function(e){return t.Objects.Model[e.ID]}));if(0!==a.length){var s=e.children.reduce((function(t,e){return void 0!==i[e.ID]&&(t=i[e.ID]),t}),null);e.children.forEach((function(t){void 0!==r.morphTargets[t.ID]&&o.push(r.morphTargets[t.ID])}));var c=a[0],l={};"RotationOrder"in c&&(l.eulerOrder=x(c.RotationOrder.value)),"InheritType"in c&&(l.inheritType=parseInt(c.InheritType.value)),"GeometricTranslation"in c&&(l.translation=c.GeometricTranslation.value),"GeometricRotation"in c&&(l.rotation=c.GeometricRotation.value),"GeometricScaling"in c&&(l.scale=c.GeometricScaling.value);var u=y(l);return this.genGeometry(n,s,o,u)}},genGeometry:function(t,e,n,i){var o=new r.BufferGeometry;t.attrName&&(o.name=t.attrName);var a=this.parseGeoNode(t,e),s=this.genBuffers(a),c=new r.Float32BufferAttribute(s.vertex,3);if(c.applyMatrix4(i),o.setAttribute("position",c),s.colors.length>0&&o.setAttribute("color",new r.Float32BufferAttribute(s.colors,3)),e&&(o.setAttribute("skinIndex",new r.Uint16BufferAttribute(s.weightsIndices,4)),o.setAttribute("skinWeight",new r.Float32BufferAttribute(s.vertexWeights,4)),o.FBX_Deformer=e),s.normal.length>0){var l=(new r.Matrix3).getNormalMatrix(i),u=new r.Float32BufferAttribute(s.normal,3);u.applyNormalMatrix(l),o.setAttribute("normal",u)}if(s.uvs.forEach((function(t,e){var n="uv"+(e+1).toString();0===e&&(n="uv"),o.setAttribute(n,new r.Float32BufferAttribute(s.uvs[e],2))})),a.material&&"AllSame"!==a.material.mappingType){var h=s.materialIndex[0],d=0;if(s.materialIndex.forEach((function(t,e){t!==h&&(o.addGroup(d,e-d,h),h=t,d=e)})),o.groups.length>0){var p=o.groups[o.groups.length-1],f=p.start+p.count;f!==s.materialIndex.length&&o.addGroup(f,s.materialIndex.length-f,h)}0===o.groups.length&&o.addGroup(0,s.materialIndex.length,s.materialIndex[0])}return this.addMorphTargets(o,t,n,i),o},parseGeoNode:function(t,e){var n={};if(n.vertexPositions=void 0!==t.Vertices?t.Vertices.a:[],n.vertexIndices=void 0!==t.PolygonVertexIndex?t.PolygonVertexIndex.a:[],t.LayerElementColor&&(n.color=this.parseVertexColors(t.LayerElementColor[0])),t.LayerElementMaterial&&(n.material=this.parseMaterialIndices(t.LayerElementMaterial[0])),t.LayerElementNormal&&(n.normal=this.parseNormals(t.LayerElementNormal[0])),t.LayerElementUV){n.uv=[];for(var r=0;t.LayerElementUV[r];)t.LayerElementUV[r].UV&&n.uv.push(this.parseUVs(t.LayerElementUV[r])),r++}return n.weightTable={},null!==e&&(n.skeleton=e,e.rawBones.forEach((function(t,e){t.indices.forEach((function(r,i){void 0===n.weightTable[r]&&(n.weightTable[r]=[]),n.weightTable[r].push({id:e,weight:t.weights[i]})}))}))),n},genBuffers:function(t){var e={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]},n=0,r=0,i=!1,o=[],a=[],s=[],c=[],l=[],u=[],h=this;return t.vertexIndices.forEach((function(d,p){var f=!1;d<0&&(d^=-1,f=!0);var g=[],v=[];if(o.push(3*d,3*d+1,3*d+2),t.color){var y=m(p,n,d,t.color);s.push(y[0],y[1],y[2])}if(t.skeleton){if(void 0!==t.weightTable[d]&&t.weightTable[d].forEach((function(t){v.push(t.weight),g.push(t.id)})),v.length>4){i||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),i=!0);var x=[0,0,0,0],b=[0,0,0,0];v.forEach((function(t,e){var n=t,r=g[e];b.forEach((function(t,e,i){if(n>t){i[e]=n,n=t;var o=x[e];x[e]=r,r=o}}))})),g=x,v=b}for(;v.length<4;)v.push(0),g.push(0);for(var w=0;w<4;++w)l.push(v[w]),u.push(g[w])}if(t.normal){y=m(p,n,d,t.normal);a.push(y[0],y[1],y[2])}if(t.material&&"AllSame"!==t.material.mappingType)var _=m(p,n,d,t.material)[0];t.uv&&t.uv.forEach((function(t,e){var r=m(p,n,d,t);void 0===c[e]&&(c[e]=[]),c[e].push(r[0]),c[e].push(r[1])})),r++,f&&(h.genFace(e,t,o,_,a,s,c,l,u,r),n++,r=0,o=[],a=[],s=[],c=[],l=[],u=[])})),e},genFace:function(t,e,n,r,i,o,a,s,c,l){for(var u=2;u<l;u++)t.vertex.push(e.vertexPositions[n[0]]),t.vertex.push(e.vertexPositions[n[1]]),t.vertex.push(e.vertexPositions[n[2]]),t.vertex.push(e.vertexPositions[n[3*(u-1)]]),t.vertex.push(e.vertexPositions[n[3*(u-1)+1]]),t.vertex.push(e.vertexPositions[n[3*(u-1)+2]]),t.vertex.push(e.vertexPositions[n[3*u]]),t.vertex.push(e.vertexPositions[n[3*u+1]]),t.vertex.push(e.vertexPositions[n[3*u+2]]),e.skeleton&&(t.vertexWeights.push(s[0]),t.vertexWeights.push(s[1]),t.vertexWeights.push(s[2]),t.vertexWeights.push(s[3]),t.vertexWeights.push(s[4*(u-1)]),t.vertexWeights.push(s[4*(u-1)+1]),t.vertexWeights.push(s[4*(u-1)+2]),t.vertexWeights.push(s[4*(u-1)+3]),t.vertexWeights.push(s[4*u]),t.vertexWeights.push(s[4*u+1]),t.vertexWeights.push(s[4*u+2]),t.vertexWeights.push(s[4*u+3]),t.weightsIndices.push(c[0]),t.weightsIndices.push(c[1]),t.weightsIndices.push(c[2]),t.weightsIndices.push(c[3]),t.weightsIndices.push(c[4*(u-1)]),t.weightsIndices.push(c[4*(u-1)+1]),t.weightsIndices.push(c[4*(u-1)+2]),t.weightsIndices.push(c[4*(u-1)+3]),t.weightsIndices.push(c[4*u]),t.weightsIndices.push(c[4*u+1]),t.weightsIndices.push(c[4*u+2]),t.weightsIndices.push(c[4*u+3])),e.color&&(t.colors.push(o[0]),t.colors.push(o[1]),t.colors.push(o[2]),t.colors.push(o[3*(u-1)]),t.colors.push(o[3*(u-1)+1]),t.colors.push(o[3*(u-1)+2]),t.colors.push(o[3*u]),t.colors.push(o[3*u+1]),t.colors.push(o[3*u+2])),e.material&&"AllSame"!==e.material.mappingType&&(t.materialIndex.push(r),t.materialIndex.push(r),t.materialIndex.push(r)),e.normal&&(t.normal.push(i[0]),t.normal.push(i[1]),t.normal.push(i[2]),t.normal.push(i[3*(u-1)]),t.normal.push(i[3*(u-1)+1]),t.normal.push(i[3*(u-1)+2]),t.normal.push(i[3*u]),t.normal.push(i[3*u+1]),t.normal.push(i[3*u+2])),e.uv&&e.uv.forEach((function(e,n){void 0===t.uvs[n]&&(t.uvs[n]=[]),t.uvs[n].push(a[n][0]),t.uvs[n].push(a[n][1]),t.uvs[n].push(a[n][2*(u-1)]),t.uvs[n].push(a[n][2*(u-1)+1]),t.uvs[n].push(a[n][2*u]),t.uvs[n].push(a[n][2*u+1])}))},addMorphTargets:function(e,n,r,i){if(0!==r.length){e.morphTargetsRelative=!0,e.morphAttributes.position=[];var o=this;r.forEach((function(r){r.rawTargets.forEach((function(r){var a=t.Objects.Geometry[r.geoID];void 0!==a&&o.genMorphGeometry(e,n,a,i,r.name)}))}))}},genMorphGeometry:function(t,e,n,i,o){for(var a=void 0!==e.PolygonVertexIndex?e.PolygonVertexIndex.a:[],s=void 0!==n.Vertices?n.Vertices.a:[],c=void 0!==n.Indexes?n.Indexes.a:[],l=3*t.attributes.position.count,u=new Float32Array(l),h=0;h<c.length;h++){var d=3*c[h];u[d]=s[3*h],u[d+1]=s[3*h+1],u[d+2]=s[3*h+2]}var p={vertexIndices:a,vertexPositions:u},f=this.genBuffers(p),m=new r.Float32BufferAttribute(f.vertex,3);m.name=o||n.attrName,m.applyMatrix4(i),t.morphAttributes.position.push(m)},parseNormals:function(t){var e=t.MappingInformationType,n=t.ReferenceInformationType,r=t.Normals.a,i=[];return"IndexToDirect"===n&&("NormalIndex"in t?i=t.NormalIndex.a:"NormalsIndex"in t&&(i=t.NormalsIndex.a)),{dataSize:3,buffer:r,indices:i,mappingType:e,referenceType:n}},parseUVs:function(t){var e=t.MappingInformationType,n=t.ReferenceInformationType,r=t.UV.a,i=[];return"IndexToDirect"===n&&(i=t.UVIndex.a),{dataSize:2,buffer:r,indices:i,mappingType:e,referenceType:n}},parseVertexColors:function(t){var e=t.MappingInformationType,n=t.ReferenceInformationType,r=t.Colors.a,i=[];return"IndexToDirect"===n&&(i=t.ColorIndex.a),{dataSize:4,buffer:r,indices:i,mappingType:e,referenceType:n}},parseMaterialIndices:function(t){var e=t.MappingInformationType,n=t.ReferenceInformationType;if("NoMappingInformation"===e)return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:n};for(var r=t.Materials.a,i=[],o=0;o<r.length;++o)i.push(o);return{dataSize:1,buffer:r,indices:i,mappingType:e,referenceType:n}},parseNurbsGeometry:function(t){if(void 0===k)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new r.BufferGeometry;var e=parseInt(t.Order);if(isNaN(e))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",t.Order,t.id),new r.BufferGeometry;for(var n,i,o=e-1,a=t.KnotVector.a,s=[],c=t.Points.a,l=0,u=c.length;l<u;l+=4)s.push((new r.Vector4).fromArray(c,l));if("Closed"===t.Form)s.push(s[0]);else if("Periodic"===t.Form){n=o,i=a.length-1-n;for(l=0;l<o;++l)s.push(s[l])}var h=new k(o,a,s,n,i).getPoints(7*s.length),d=new Float32Array(3*h.length);h.forEach((function(t,e){t.toArray(d,3*e)}));var p=new r.BufferGeometry;return p.setAttribute("position",new r.BufferAttribute(d,3)),p}},s.prototype={constructor:s,parse:function(){var t=[],e=this.parseClips();if(void 0!==e)for(var n in e){var r=e[n],i=this.addClip(r);t.push(i)}return t},parseClips:function(){if(void 0!==t.Objects.AnimationCurve){var e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);var n=this.parseAnimationLayers(e);return this.parseAnimStacks(n)}},parseAnimationCurveNodes:function(){var e=t.Objects.AnimationCurveNode,n=new Map;for(var r in e){var i=e[r];if(null!==i.attrName.match(/S|R|T|DeformPercent/)){var o={id:i.id,attr:i.attrName,curves:{}};n.set(o.id,o)}}return n},parseAnimationCurves:function(n){var r=t.Objects.AnimationCurve;for(var i in r){var o={id:r[i].id,times:r[i].KeyTime.a.map(p),values:r[i].KeyValueFloat.a},a=e.get(o.id);if(void 0!==a){var s=a.parents[0].ID,c=a.parents[0].relationship;c.match(/X/)?n.get(s).curves.x=o:c.match(/Y/)?n.get(s).curves.y=o:c.match(/Z/)?n.get(s).curves.z=o:c.match(/d|DeformPercent/)&&n.has(s)&&(n.get(s).curves.morph=o)}}},parseAnimationLayers:function(i){var o=t.Objects.AnimationLayer,a=new Map;for(var s in o){var c=[],l=e.get(parseInt(s));if(void 0!==l)l.children.forEach((function(o,a){if(i.has(o.ID)){var s=i.get(o.ID);if(void 0!==s.curves.x||void 0!==s.curves.y||void 0!==s.curves.z){if(void 0===c[a])if(void 0!==(f=e.get(o.ID).parents.filter((function(t){return void 0!==t.relationship}))[0].ID)){if(void 0===(u=t.Objects.Model[f.toString()]))return void console.warn("THREE.FBXLoader: Encountered a unused curve.",o);var l={modelName:u.attrName?r.PropertyBinding.sanitizeNodeName(u.attrName):"",ID:u.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};n.traverse((function(t){t.ID===u.id&&(l.transform=t.matrix,t.userData.transformData&&(l.eulerOrder=t.userData.transformData.eulerOrder))})),l.transform||(l.transform=new r.Matrix4),"PreRotation"in u&&(l.preRotation=u.PreRotation.value),"PostRotation"in u&&(l.postRotation=u.PostRotation.value),c[a]=l}c[a]&&(c[a][s.attr]=s)}else if(void 0!==s.curves.morph){if(void 0===c[a]){var u,h=e.get(o.ID).parents.filter((function(t){return void 0!==t.relationship}))[0].ID,d=e.get(h).parents[0].ID,p=e.get(d).parents[0].ID,f=e.get(p).parents[0].ID;l={modelName:(u=t.Objects.Model[f]).attrName?r.PropertyBinding.sanitizeNodeName(u.attrName):"",morphName:t.Objects.Deformer[h].attrName};c[a]=l}c[a][s.attr]=s}}})),a.set(parseInt(s),c)}return a},parseAnimStacks:function(n){var r=t.Objects.AnimationStack,i={};for(var o in r){var a=e.get(parseInt(o)).children;a.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");var s=n.get(a[0].ID);i[o]={name:r[o].attrName,layer:s}}return i},addClip:function(t){var e=[],n=this;return t.layer.forEach((function(t){e=e.concat(n.generateTracks(t))})),new r.AnimationClip(t.name,-1,e)},generateTracks:function(t){var e=[],n=new r.Vector3,i=new r.Quaternion,o=new r.Vector3;if(t.transform&&t.transform.decompose(n,i,o),n=n.toArray(),i=(new r.Euler).setFromQuaternion(i,t.eulerOrder).toArray(),o=o.toArray(),void 0!==t.T&&Object.keys(t.T.curves).length>0){var a=this.generateVectorTrack(t.modelName,t.T.curves,n,"position");void 0!==a&&e.push(a)}if(void 0!==t.R&&Object.keys(t.R.curves).length>0){var s=this.generateRotationTrack(t.modelName,t.R.curves,i,t.preRotation,t.postRotation,t.eulerOrder);void 0!==s&&e.push(s)}if(void 0!==t.S&&Object.keys(t.S.curves).length>0){var c=this.generateVectorTrack(t.modelName,t.S.curves,o,"scale");void 0!==c&&e.push(c)}if(void 0!==t.DeformPercent){var l=this.generateMorphTrack(t);void 0!==l&&e.push(l)}return e},generateVectorTrack:function(t,e,n,i){var o=this.getTimesForAllAxes(e),a=this.getKeyframeTrackValues(o,e,n);return new r.VectorKeyframeTrack(t+"."+i,o,a)},generateRotationTrack:function(t,e,n,i,o,a){void 0!==e.x&&(this.interpolateRotations(e.x),e.x.values=e.x.values.map(r.MathUtils.degToRad)),void 0!==e.y&&(this.interpolateRotations(e.y),e.y.values=e.y.values.map(r.MathUtils.degToRad)),void 0!==e.z&&(this.interpolateRotations(e.z),e.z.values=e.z.values.map(r.MathUtils.degToRad));var s=this.getTimesForAllAxes(e),c=this.getKeyframeTrackValues(s,e,n);void 0!==i&&((i=i.map(r.MathUtils.degToRad)).push(a),i=(new r.Euler).fromArray(i),i=(new r.Quaternion).setFromEuler(i)),void 0!==o&&((o=o.map(r.MathUtils.degToRad)).push(a),o=(new r.Euler).fromArray(o),o=(new r.Quaternion).setFromEuler(o).invert());for(var l=new r.Quaternion,u=new r.Euler,h=[],d=0;d<c.length;d+=3)u.set(c[d],c[d+1],c[d+2],a),l.setFromEuler(u),void 0!==i&&l.premultiply(i),void 0!==o&&l.multiply(o),l.toArray(h,d/3*4);return new r.QuaternionKeyframeTrack(t+".quaternion",s,h)},generateMorphTrack:function(t){var e=t.DeformPercent.curves.morph,i=e.values.map((function(t){return t/100})),o=n.getObjectByName(t.modelName).morphTargetDictionary[t.morphName];return new r.NumberKeyframeTrack(t.modelName+".morphTargetInfluences["+o+"]",e.times,i)},getTimesForAllAxes:function(t){var e=[];return void 0!==t.x&&(e=e.concat(t.x.times)),void 0!==t.y&&(e=e.concat(t.y.times)),void 0!==t.z&&(e=e.concat(t.z.times)),e=e.sort((function(t,e){return t-e})).filter((function(t,e,n){return n.indexOf(t)==e}))},getKeyframeTrackValues:function(t,e,n){var r=n,i=[],o=-1,a=-1,s=-1;return t.forEach((function(t){if(e.x&&(o=e.x.times.indexOf(t)),e.y&&(a=e.y.times.indexOf(t)),e.z&&(s=e.z.times.indexOf(t)),-1!==o){var n=e.x.values[o];i.push(n),r[0]=n}else i.push(r[0]);if(-1!==a){var c=e.y.values[a];i.push(c),r[1]=c}else i.push(r[1]);if(-1!==s){var l=e.z.values[s];i.push(l),r[2]=l}else i.push(r[2])})),i},interpolateRotations:function(t){for(var e=1;e<t.values.length;e++){var n=t.values[e-1],r=t.values[e]-n,i=Math.abs(r);if(i>=180){for(var o=i/180,a=r/o,s=n+a,c=t.times[e-1],l=(t.times[e]-c)/o,u=c+l,h=[],d=[];u<t.times[e];)h.push(u),u+=l,d.push(s),s+=a;t.times=_(t.times,e,h),t.values=_(t.values,e,d)}}}},c.prototype={constructor:c,getPrevNode:function(){return this.nodeStack[this.currentIndent-2]},getCurrentNode:function(){return this.nodeStack[this.currentIndent-1]},getCurrentProp:function(){return this.currentProp},pushStack:function(t){this.nodeStack.push(t),this.currentIndent+=1},popStack:function(){this.nodeStack.pop(),this.currentIndent-=1},setCurrentProp:function(t,e){this.currentProp=t,this.currentPropName=e},parse:function(t){this.currentIndent=0,this.allNodes=new h,this.nodeStack=[],this.currentProp=[],this.currentPropName="";var e=this,n=t.split(/[\r\n]+/);return n.forEach((function(t,r){var i=t.match(/^[\s\t]*;/),o=t.match(/^[\s\t]*$/);if(!i&&!o){var a=t.match("^\\t{"+e.currentIndent+"}(\\w+):(.*){",""),s=t.match("^\\t{"+e.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),c=t.match("^\\t{"+(e.currentIndent-1)+"}}");a?e.parseNodeBegin(t,a):s?e.parseNodeProperty(t,s,n[++r]):c?e.popStack():t.match(/^[^\s\t}]/)&&e.parseNodePropertyContinued(t)}})),this.allNodes},parseNodeBegin:function(t,e){var n=e[1].trim().replace(/^"/,"").replace(/"$/,""),r=e[2].split(",").map((function(t){return t.trim().replace(/^"/,"").replace(/"$/,"")})),i={name:n},o=this.parseNodeAttr(r),a=this.getCurrentNode();0===this.currentIndent?this.allNodes.add(n,i):n in a?("PoseNode"===n?a.PoseNode.push(i):void 0!==a[n].id&&(a[n]={},a[n][a[n].id]=a[n]),""!==o.id&&(a[n][o.id]=i)):"number"==typeof o.id?(a[n]={},a[n][o.id]=i):"Properties70"!==n&&(a[n]="PoseNode"===n?[i]:i),"number"==typeof o.id&&(i.id=o.id),""!==o.name&&(i.attrName=o.name),""!==o.type&&(i.attrType=o.type),this.pushStack(i)},parseNodeAttr:function(t){var e=t[0];""!==t[0]&&(e=parseInt(t[0]),isNaN(e)&&(e=t[0]));var n="",r="";return t.length>1&&(n=t[1].replace(/^(\w+)::/,""),r=t[2]),{id:e,name:n,type:r}},parseNodeProperty:function(t,e,n){var r=e[1].replace(/^"/,"").replace(/"$/,"").trim(),i=e[2].replace(/^"/,"").replace(/"$/,"").trim();"Content"===r&&","===i&&(i=n.replace(/"/g,"").replace(/,$/,"").trim());var o=this.getCurrentNode();if("Properties70"!==o.name){if("C"===r){var a=i.split(",").slice(1),s=parseInt(a[0]),c=parseInt(a[1]),l=i.split(",").slice(3);r="connections",function(t,e){for(var n=0,r=t.length,i=e.length;n<i;n++,r++)t[r]=e[n]}(i=[s,c],l=l.map((function(t){return t.trim().replace(/^"/,"")}))),void 0===o[r]&&(o[r]=[])}"Node"===r&&(o.id=i),r in o&&Array.isArray(o[r])?o[r].push(i):"a"!==r?o[r]=i:o.a=i,this.setCurrentProp(o,r),"a"===r&&","!==i.slice(-1)&&(o.a=b(i))}else this.parseNodeSpecialProperty(t,r,i)},parseNodePropertyContinued:function(t){var e=this.getCurrentNode();e.a+=t,","!==t.slice(-1)&&(e.a=b(e.a))},parseNodeSpecialProperty:function(t,e,n){var r=n.split('",').map((function(t){return t.trim().replace(/^\"/,"").replace(/\s/,"_")})),i=r[0],o=r[1],a=r[2],s=r[3],c=r[4];switch(o){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":c=parseFloat(c);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":c=b(c)}this.getPrevNode()[i]={type:o,type2:a,flag:s,value:c},this.setCurrentProp(this.getPrevNode(),i)}},l.prototype={constructor:l,parse:function(t){var e=new u(t);e.skip(23);var n=e.getUint32();if(n<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+n);for(var r=new h;!this.endOfContent(e);){var i=this.parseNode(e,n);null!==i&&r.add(i.name,i)}return r},endOfContent:function(t){return t.size()%16==0?(t.getOffset()+160+16&-16)>=t.size():t.getOffset()+160+16>=t.size()},parseNode:function(t,e){var n={},r=e>=7500?t.getUint64():t.getUint32(),i=e>=7500?t.getUint64():t.getUint32();e>=7500?t.getUint64():t.getUint32();var o=t.getUint8(),a=t.getString(o);if(0===r)return null;for(var s=[],c=0;c<i;c++)s.push(this.parseProperty(t));var l=s.length>0?s[0]:"",u=s.length>1?s[1]:"",h=s.length>2?s[2]:"";for(n.singleProperty=1===i&&t.getOffset()===r;r>t.getOffset();){var d=this.parseNode(t,e);null!==d&&this.parseSubNode(a,n,d)}return n.propertyList=s,"number"==typeof l&&(n.id=l),""!==u&&(n.attrName=u),""!==h&&(n.attrType=h),""!==a&&(n.name=a),n},parseSubNode:function(t,e,n){if(!0===n.singleProperty){var r=n.propertyList[0];Array.isArray(r)?(e[n.name]=n,n.a=r):e[n.name]=r}else if("Connections"===t&&"C"===n.name){var i=[];n.propertyList.forEach((function(t,e){0!==e&&i.push(t)})),void 0===e.connections&&(e.connections=[]),e.connections.push(i)}else if("Properties70"===n.name){Object.keys(n).forEach((function(t){e[t]=n[t]}))}else if("Properties70"===t&&"P"===n.name){var o,a=n.propertyList[0],s=n.propertyList[1],c=n.propertyList[2],l=n.propertyList[3];0===a.indexOf("Lcl ")&&(a=a.replace("Lcl ","Lcl_")),0===s.indexOf("Lcl ")&&(s=s.replace("Lcl ","Lcl_")),o="Color"===s||"ColorRGB"===s||"Vector"===s||"Vector3D"===s||0===s.indexOf("Lcl_")?[n.propertyList[4],n.propertyList[5],n.propertyList[6]]:n.propertyList[4],e[a]={type:s,type2:c,flag:l,value:o}}else void 0===e[n.name]?"number"==typeof n.id?(e[n.name]={},e[n.name][n.id]=n):e[n.name]=n:"PoseNode"===n.name?(Array.isArray(e[n.name])||(e[n.name]=[e[n.name]]),e[n.name].push(n)):void 0===e[n.name][n.id]&&(e[n.name][n.id]=n)},parseProperty:function(t){var e=t.getString(1);switch(e){case"C":return t.getBoolean();case"D":return t.getFloat64();case"F":return t.getFloat32();case"I":return t.getInt32();case"L":return t.getInt64();case"R":var n=t.getUint32();return t.getArrayBuffer(n);case"S":n=t.getUint32();return t.getString(n);case"Y":return t.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":var r=t.getUint32(),i=t.getUint32(),o=t.getUint32();if(0===i)switch(e){case"b":case"c":return t.getBooleanArray(r);case"d":return t.getFloat64Array(r);case"f":return t.getFloat32Array(r);case"i":return t.getInt32Array(r);case"l":return t.getInt64Array(r)}void 0===G&&console.error("THREE.FBXLoader: External library Inflate.min.js required, obtain or import from https://github.com/imaya/zlib.js");var a=new u(new G(new Uint8Array(t.getArrayBuffer(o))).decompress().buffer);switch(e){case"b":case"c":return a.getBooleanArray(r);case"d":return a.getFloat64Array(r);case"f":return a.getFloat32Array(r);case"i":return a.getInt32Array(r);case"l":return a.getInt64Array(r)}default:throw new Error("THREE.FBXLoader: Unknown property type "+e)}}},u.prototype={constructor:u,getOffset:function(){return this.offset},size:function(){return this.dv.buffer.byteLength},skip:function(t){this.offset+=t},getBoolean:function(){return 1==(1&this.getUint8())},getBooleanArray:function(t){for(var e=[],n=0;n<t;n++)e.push(this.getBoolean());return e},getUint8:function(){var t=this.dv.getUint8(this.offset);return this.offset+=1,t},getInt16:function(){var t=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,t},getInt32:function(){var t=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,t},getInt32Array:function(t){for(var e=[],n=0;n<t;n++)e.push(this.getInt32());return e},getUint32:function(){var t=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,t},getInt64:function(){var t,e;return this.littleEndian?(t=this.getUint32(),e=this.getUint32()):(e=this.getUint32(),t=this.getUint32()),2147483648&e?(e=4294967295&~e,4294967295===(t=4294967295&~t)&&(e=e+1&4294967295),-(4294967296*e+(t=t+1&4294967295))):4294967296*e+t},getInt64Array:function(t){for(var e=[],n=0;n<t;n++)e.push(this.getInt64());return e},getUint64:function(){var t,e;return this.littleEndian?(t=this.getUint32(),e=this.getUint32()):(e=this.getUint32(),t=this.getUint32()),4294967296*e+t},getFloat32:function(){var t=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t},getFloat32Array:function(t){for(var e=[],n=0;n<t;n++)e.push(this.getFloat32());return e},getFloat64:function(){var t=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t},getFloat64Array:function(t){for(var e=[],n=0;n<t;n++)e.push(this.getFloat64());return e},getArrayBuffer:function(t){var e=this.dv.buffer.slice(this.offset,this.offset+t);return this.offset+=t,e},getString:function(t){for(var e=[],n=0;n<t;n++)e[n]=this.getUint8();var i=e.indexOf(0);return i>=0&&(e=e.slice(0,i)),r.LoaderUtils.decodeText(new Uint8Array(e))}},h.prototype={constructor:h,add:function(t,e){this[t]=e}};var f=[];function m(t,e,n,r){var i;switch(r.mappingType){case"ByPolygonVertex":i=t;break;case"ByPolygon":i=e;break;case"ByVertice":i=n;break;case"AllSame":i=r.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+r.mappingType)}"IndexToDirect"===r.referenceType&&(i=r.indices[i]);var o=i*r.dataSize,a=o+r.dataSize;return function(t,e,n,r){for(var i=n,o=0;i<r;i++,o++)t[o]=e[i];return t}(f,r.buffer,o,a)}var g=new r.Euler,v=new r.Vector3;function y(t){var e,n=new r.Matrix4,i=new r.Matrix4,o=new r.Matrix4,a=new r.Matrix4,s=new r.Matrix4,c=new r.Matrix4,l=new r.Matrix4,u=new r.Matrix4,h=new r.Matrix4,d=new r.Matrix4,p=new r.Matrix4,f=t.inheritType?t.inheritType:0;(t.translation&&n.setPosition(v.fromArray(t.translation)),t.preRotation)&&((e=t.preRotation.map(r.MathUtils.degToRad)).push(t.eulerOrder),i.makeRotationFromEuler(g.fromArray(e)));t.rotation&&((e=t.rotation.map(r.MathUtils.degToRad)).push(t.eulerOrder),o.makeRotationFromEuler(g.fromArray(e)));t.postRotation&&((e=t.postRotation.map(r.MathUtils.degToRad)).push(t.eulerOrder),a.makeRotationFromEuler(g.fromArray(e)));t.scale&&s.scale(v.fromArray(t.scale)),t.scalingOffset&&l.setPosition(v.fromArray(t.scalingOffset)),t.scalingPivot&&c.setPosition(v.fromArray(t.scalingPivot)),t.rotationOffset&&u.setPosition(v.fromArray(t.rotationOffset)),t.rotationPivot&&h.setPosition(v.fromArray(t.rotationPivot)),t.parentMatrixWorld&&(d=t.parentMatrixWorld);var m=i.multiply(o).multiply(a),y=new r.Matrix4;d.extractRotation(y),(new r.Matrix4).copyPosition(d);var x=new r.Matrix4;x.copy(y).invert().multiply(d);var b=new r.Matrix4;if(0===f)b.copy(y).multiply(m).multiply(x).multiply(s);else if(1===f)b.copy(y).multiply(x).multiply(m).multiply(s);else{var w=new r.Matrix4;w.copy(s).invert();var _=(new r.Matrix4).multiply(x).multiply(w);b.copy(y).multiply(m).multiply(_).multiply(s)}var M=new r.Matrix4;M.copy(h).invert();var S=new r.Matrix4;S.copy(c).invert();var T=new r.Matrix4;T.copy(n).multiply(u).multiply(h).multiply(i).multiply(o).multiply(a).multiply(M).multiply(l).multiply(c).multiply(s).multiply(S);var E=(new r.Matrix4).copyPosition(T),A=(new r.Matrix4).copy(d).multiply(E);return p.copyPosition(A),T=(new r.Matrix4).multiply(p).multiply(b)}function x(t){var e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return 6===(t=t||0)?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[t]}function b(t){return t.split(",").map((function(t){return parseFloat(t)}))}function w(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=t.byteLength),r.LoaderUtils.decodeText(new Uint8Array(t,e,n))}function _(t,e,n){return t.slice(0,e).concat(n).concat(t.slice(e))}return i}()},function(t,e,n){"use strict";n.r(e),n.d(e,"Water",(function(){return a}));var r=n(0),i=function(t,e){r.Mesh.call(this,t),this.type="Reflector";var n=this,o=void 0!==(e=e||{}).color?new r.Color(e.color):new r.Color(8355711),a=e.textureWidth||512,s=e.textureHeight||512,c=e.clipBias||0,l=e.shader||i.ReflectorShader,u=new r.Plane,h=new r.Vector3,d=new r.Vector3,p=new r.Vector3,f=new r.Matrix4,m=new r.Vector3(0,0,-1),g=new r.Vector4,v=new r.Vector3,y=new r.Vector3,x=new r.Vector4,b=new r.Matrix4,w=new r.PerspectiveCamera,_={minFilter:r.LinearFilter,magFilter:r.LinearFilter,format:r.RGBFormat},M=new r.WebGLRenderTarget(a,s,_);r.MathUtils.isPowerOfTwo(a)&&r.MathUtils.isPowerOfTwo(s)||(M.texture.generateMipmaps=!1);var S=new r.ShaderMaterial({uniforms:r.UniformsUtils.clone(l.uniforms),fragmentShader:l.fragmentShader,vertexShader:l.vertexShader});S.uniforms.tDiffuse.value=M.texture,S.uniforms.color.value=o,S.uniforms.textureMatrix.value=b,this.material=S,this.onBeforeRender=function(t,e,r){if(d.setFromMatrixPosition(n.matrixWorld),p.setFromMatrixPosition(r.matrixWorld),f.extractRotation(n.matrixWorld),h.set(0,0,1),h.applyMatrix4(f),v.subVectors(d,p),!(v.dot(h)>0)){v.reflect(h).negate(),v.add(d),f.extractRotation(r.matrixWorld),m.set(0,0,-1),m.applyMatrix4(f),m.add(p),y.subVectors(d,m),y.reflect(h).negate(),y.add(d),w.position.copy(v),w.up.set(0,1,0),w.up.applyMatrix4(f),w.up.reflect(h),w.lookAt(y),w.far=r.far,w.updateMatrixWorld(),w.projectionMatrix.copy(r.projectionMatrix),b.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),b.multiply(w.projectionMatrix),b.multiply(w.matrixWorldInverse),b.multiply(n.matrixWorld),u.setFromNormalAndCoplanarPoint(h,d),u.applyMatrix4(w.matrixWorldInverse),g.set(u.normal.x,u.normal.y,u.normal.z,u.constant);var i=w.projectionMatrix;x.x=(Math.sign(g.x)+i.elements[8])/i.elements[0],x.y=(Math.sign(g.y)+i.elements[9])/i.elements[5],x.z=-1,x.w=(1+i.elements[10])/i.elements[14],g.multiplyScalar(2/g.dot(x)),i.elements[2]=g.x,i.elements[6]=g.y,i.elements[10]=g.z+1-c,i.elements[14]=g.w,M.texture.encoding=t.outputEncoding,n.visible=!1;var o=t.getRenderTarget(),a=t.xr.enabled,s=t.shadowMap.autoUpdate;t.xr.enabled=!1,t.shadowMap.autoUpdate=!1,t.setRenderTarget(M),t.state.buffers.depth.setMask(!0),!1===t.autoClear&&t.clear(),t.render(e,w),t.xr.enabled=a,t.shadowMap.autoUpdate=s,t.setRenderTarget(o);var l=r.viewport;void 0!==l&&t.state.viewport(l),n.visible=!0}},this.getRenderTarget=function(){return M}};i.prototype=Object.create(r.Mesh.prototype),i.prototype.constructor=i,i.ReflectorShader={uniforms:{color:{value:null},tDiffuse:{value:null},textureMatrix:{value:null}},vertexShader:["uniform mat4 textureMatrix;","varying vec4 vUv;","void main() {","\tvUv = textureMatrix * vec4( position, 1.0 );","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform vec3 color;","uniform sampler2D tDiffuse;","varying vec4 vUv;","float blendOverlay( float base, float blend ) {","\treturn( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );","}","vec3 blendOverlay( vec3 base, vec3 blend ) {","\treturn vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );","}","void main() {","\tvec4 base = texture2DProj( tDiffuse, vUv );","\tgl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );","}"].join("\n")};var o=function(t,e){r.Mesh.call(this,t),this.type="Refractor";var n=this,i=void 0!==(e=e||{}).color?new r.Color(e.color):new r.Color(8355711),a=e.textureWidth||512,s=e.textureHeight||512,c=e.clipBias||0,l=e.shader||o.RefractorShader,u=new r.PerspectiveCamera;u.matrixAutoUpdate=!1,u.userData.refractor=!0;var h=new r.Plane,d=new r.Matrix4,p={minFilter:r.LinearFilter,magFilter:r.LinearFilter,format:r.RGBFormat},f=new r.WebGLRenderTarget(a,s,p);r.MathUtils.isPowerOfTwo(a)&&r.MathUtils.isPowerOfTwo(s)||(f.texture.generateMipmaps=!1),this.material=new r.ShaderMaterial({uniforms:r.UniformsUtils.clone(l.uniforms),vertexShader:l.vertexShader,fragmentShader:l.fragmentShader,transparent:!0}),this.material.uniforms.color.value=i,this.material.uniforms.tDiffuse.value=f.texture,this.material.uniforms.textureMatrix.value=d;var m,g,v,y,x,b,w,_,M=(m=new r.Vector3,g=new r.Vector3,v=new r.Matrix4,y=new r.Vector3,x=new r.Vector3,function(t){return m.setFromMatrixPosition(n.matrixWorld),g.setFromMatrixPosition(t.matrixWorld),y.subVectors(m,g),v.extractRotation(n.matrixWorld),x.set(0,0,1),x.applyMatrix4(v),y.dot(x)<0}),S=function(){var t=new r.Vector3,e=new r.Vector3,i=new r.Quaternion,o=new r.Vector3;return function(){n.matrixWorld.decompose(e,i,o),t.set(0,0,1).applyQuaternion(i).normalize(),t.negate(),h.setFromNormalAndCoplanarPoint(t,e)}}(),T=(b=new r.Plane,w=new r.Vector4,_=new r.Vector4,function(t){u.matrixWorld.copy(t.matrixWorld),u.matrixWorldInverse.copy(u.matrixWorld).invert(),u.projectionMatrix.copy(t.projectionMatrix),u.far=t.far,b.copy(h),b.applyMatrix4(u.matrixWorldInverse),w.set(b.normal.x,b.normal.y,b.normal.z,b.constant);var e=u.projectionMatrix;_.x=(Math.sign(w.x)+e.elements[8])/e.elements[0],_.y=(Math.sign(w.y)+e.elements[9])/e.elements[5],_.z=-1,_.w=(1+e.elements[10])/e.elements[14],w.multiplyScalar(2/w.dot(_)),e.elements[2]=w.x,e.elements[6]=w.y,e.elements[10]=w.z+1-c,e.elements[14]=w.w});this.onBeforeRender=function(t,e,r){f.texture.encoding=t.outputEncoding,!0!==r.userData.refractor&&!0!=!M(r)&&(S(),function(t){d.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),d.multiply(t.projectionMatrix),d.multiply(t.matrixWorldInverse),d.multiply(n.matrixWorld)}(r),T(r),function(t,e,r){n.visible=!1;var i=t.getRenderTarget(),o=t.xr.enabled,a=t.shadowMap.autoUpdate;t.xr.enabled=!1,t.shadowMap.autoUpdate=!1,t.setRenderTarget(f),!1===t.autoClear&&t.clear(),t.render(e,u),t.xr.enabled=o,t.shadowMap.autoUpdate=a,t.setRenderTarget(i);var s=r.viewport;void 0!==s&&t.state.viewport(s),n.visible=!0}(t,e,r))},this.getRenderTarget=function(){return f}};o.prototype=Object.create(r.Mesh.prototype),o.prototype.constructor=o,o.RefractorShader={uniforms:{color:{value:null},tDiffuse:{value:null},textureMatrix:{value:null}},vertexShader:["uniform mat4 textureMatrix;","varying vec4 vUv;","void main() {","\tvUv = textureMatrix * vec4( position, 1.0 );","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform vec3 color;","uniform sampler2D tDiffuse;","varying vec4 vUv;","float blendOverlay( float base, float blend ) {","\treturn( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );","}","vec3 blendOverlay( vec3 base, vec3 blend ) {","\treturn vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );","}","void main() {","\tvec4 base = texture2DProj( tDiffuse, vUv );","\tgl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );","}"].join("\n")};var a=function(t,e){r.Mesh.call(this,t),this.type="Water";var n=this,s=void 0!==(e=e||{}).color?new r.Color(e.color):new r.Color(16777215),c=e.textureWidth||512,l=e.textureHeight||512,u=e.clipBias||0,h=e.flowDirection||new r.Vector2(1,0),d=e.flowSpeed||.03,p=e.reflectivity||.02,f=e.scale||1,m=e.shader||a.WaterShader,g=void 0!==e.encoding?e.encoding:r.LinearEncoding,v=new r.TextureLoader,y=e.flowMap||void 0,x=e.normalMap0||v.load("textures/water/Water_1_M_Normal.jpg"),b=e.normalMap1||v.load("textures/water/Water_2_M_Normal.jpg"),w=new r.Matrix4,_=new r.Clock;if(void 0!==i)if(void 0!==o){var M=new i(t,{textureWidth:c,textureHeight:l,clipBias:u,encoding:g}),S=new o(t,{textureWidth:c,textureHeight:l,clipBias:u,encoding:g});M.matrixAutoUpdate=!1,S.matrixAutoUpdate=!1,this.material=new r.ShaderMaterial({uniforms:r.UniformsUtils.merge([r.UniformsLib.fog,m.uniforms]),vertexShader:m.vertexShader,fragmentShader:m.fragmentShader,transparent:!0,fog:!0}),void 0!==y?(this.material.defines.USE_FLOWMAP="",this.material.uniforms.tFlowMap={type:"t",value:y}):this.material.uniforms.flowDirection={type:"v2",value:h},x.wrapS=x.wrapT=r.RepeatWrapping,b.wrapS=b.wrapT=r.RepeatWrapping,this.material.uniforms.tReflectionMap.value=M.getRenderTarget().texture,this.material.uniforms.tRefractionMap.value=S.getRenderTarget().texture,this.material.uniforms.tNormalMap0.value=x,this.material.uniforms.tNormalMap1.value=b,this.material.uniforms.color.value=s,this.material.uniforms.reflectivity.value=p,this.material.uniforms.textureMatrix.value=w,this.material.uniforms.config.value.x=0,this.material.uniforms.config.value.y=.075,this.material.uniforms.config.value.z=.075,this.material.uniforms.config.value.w=f,this.onBeforeRender=function(t,e,r){var i,o;!function(t){w.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),w.multiply(t.projectionMatrix),w.multiply(t.matrixWorldInverse),w.multiply(n.matrixWorld)}(r),i=_.getDelta(),(o=n.material.uniforms.config).value.x+=d*i,o.value.y=o.value.x+.075,o.value.x>=.15?(o.value.x=0,o.value.y=.075):o.value.y>=.15&&(o.value.y=o.value.y-.15),n.visible=!1,M.matrixWorld.copy(n.matrixWorld),S.matrixWorld.copy(n.matrixWorld),M.onBeforeRender(t,e,r),S.onBeforeRender(t,e,r),n.visible=!0}}else console.error("THREE.Water: Required component Refractor not found.");else console.error("THREE.Water: Required component Reflector not found.")};a.prototype=Object.create(r.Mesh.prototype),a.prototype.constructor=a,a.WaterShader={uniforms:{color:{type:"c",value:null},reflectivity:{type:"f",value:0},tReflectionMap:{type:"t",value:null},tRefractionMap:{type:"t",value:null},tNormalMap0:{type:"t",value:null},tNormalMap1:{type:"t",value:null},textureMatrix:{type:"m4",value:null},config:{type:"v4",value:new r.Vector4}},vertexShader:["#include <common>","#include <fog_pars_vertex>","#include <logdepthbuf_pars_vertex>","uniform mat4 textureMatrix;","varying vec4 vCoord;","varying vec2 vUv;","varying vec3 vToEye;","void main() {","\tvUv = uv;","\tvCoord = textureMatrix * vec4( position, 1.0 );","\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );","\tvToEye = cameraPosition - worldPosition.xyz;","\tvec4 mvPosition =  viewMatrix * worldPosition;","\tgl_Position = projectionMatrix * mvPosition;","\t#include <logdepthbuf_vertex>","\t#include <fog_vertex>","}"].join("\n"),fragmentShader:["#include <common>","#include <fog_pars_fragment>","#include <logdepthbuf_pars_fragment>","uniform sampler2D tReflectionMap;","uniform sampler2D tRefractionMap;","uniform sampler2D tNormalMap0;","uniform sampler2D tNormalMap1;","#ifdef USE_FLOWMAP","\tuniform sampler2D tFlowMap;","#else","\tuniform vec2 flowDirection;","#endif","uniform vec3 color;","uniform float reflectivity;","uniform vec4 config;","varying vec4 vCoord;","varying vec2 vUv;","varying vec3 vToEye;","void main() {","\t#include <logdepthbuf_fragment>","\tfloat flowMapOffset0 = config.x;","\tfloat flowMapOffset1 = config.y;","\tfloat halfCycle = config.z;","\tfloat scale = config.w;","\tvec3 toEye = normalize( vToEye );","\tvec2 flow;","\t#ifdef USE_FLOWMAP","\t\tflow = texture2D( tFlowMap, vUv ).rg * 2.0 - 1.0;","\t#else","\t\tflow = flowDirection;","\t#endif","\tflow.x *= - 1.0;","\tvec4 normalColor0 = texture2D( tNormalMap0, ( vUv * scale ) + flow * flowMapOffset0 );","\tvec4 normalColor1 = texture2D( tNormalMap1, ( vUv * scale ) + flow * flowMapOffset1 );","\tfloat flowLerp = abs( halfCycle - flowMapOffset0 ) / halfCycle;","\tvec4 normalColor = mix( normalColor0, normalColor1, flowLerp );","\tvec3 normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );","\tfloat theta = max( dot( toEye, normal ), 0.0 );","\tfloat reflectance = reflectivity + ( 1.0 - reflectivity ) * pow( ( 1.0 - theta ), 5.0 );","\tvec3 coord = vCoord.xyz / vCoord.w;","\tvec2 uv = coord.xy + coord.z * normal.xz * 0.05;","\tvec4 reflectColor = texture2D( tReflectionMap, vec2( 1.0 - uv.x, uv.y ) );","\tvec4 refractColor = texture2D( tRefractionMap, uv );","\tgl_FragColor = vec4( color, 1.0 ) * mix( refractColor, reflectColor, reflectance );","\t#include <tonemapping_fragment>","\t#include <encodings_fragment>","\t#include <fog_fragment>","}"].join("\n")}},function(t,e,n){"use strict";n.r(e),n.d(e,"EffectComposer",(function(){return l})),n.d(e,"Pass",(function(){return p}));var r=n(0),i={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","\tvec4 texel = texture2D( tDiffuse, vUv );","\tgl_FragColor = opacity * texel;","}"].join("\n")},o=n(2),a=n(1),s=function(t,e){a.a.call(this),this.scene=t,this.camera=e,this.clear=!0,this.needsSwap=!1,this.inverse=!1};s.prototype=Object.assign(Object.create(a.a.prototype),{constructor:s,render:function(t,e,n){var r,i,o=t.getContext(),a=t.state;a.buffers.color.setMask(!1),a.buffers.depth.setMask(!1),a.buffers.color.setLocked(!0),a.buffers.depth.setLocked(!0),this.inverse?(r=0,i=1):(r=1,i=0),a.buffers.stencil.setTest(!0),a.buffers.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),a.buffers.stencil.setFunc(o.ALWAYS,r,4294967295),a.buffers.stencil.setClear(i),a.buffers.stencil.setLocked(!0),t.setRenderTarget(n),this.clear&&t.clear(),t.render(this.scene,this.camera),t.setRenderTarget(e),this.clear&&t.clear(),t.render(this.scene,this.camera),a.buffers.color.setLocked(!1),a.buffers.depth.setLocked(!1),a.buffers.stencil.setLocked(!1),a.buffers.stencil.setFunc(o.EQUAL,1,4294967295),a.buffers.stencil.setOp(o.KEEP,o.KEEP,o.KEEP),a.buffers.stencil.setLocked(!0)}});var c=function(){a.a.call(this),this.needsSwap=!1};c.prototype=Object.create(a.a.prototype),Object.assign(c.prototype,{render:function(t){t.state.buffers.stencil.setLocked(!1),t.state.buffers.stencil.setTest(!1)}});var l=function(t,e){if(this.renderer=t,void 0===e){var n={minFilter:r.LinearFilter,magFilter:r.LinearFilter,format:r.RGBAFormat},a=t.getSize(new r.Vector2);this._pixelRatio=t.getPixelRatio(),this._width=a.width,this._height=a.height,(e=new r.WebGLRenderTarget(this._width*this._pixelRatio,this._height*this._pixelRatio,n)).texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=e.width,this._height=e.height;this.renderTarget1=e,this.renderTarget2=e.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],void 0===i&&console.error("THREE.EffectComposer relies on CopyShader"),void 0===o.ShaderPass&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new o.ShaderPass(i),this.clock=new r.Clock};Object.assign(l.prototype,{swapBuffers:function(){var t=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=t},addPass:function(t){this.passes.push(t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)},insertPass:function(t,e){this.passes.splice(e,0,t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)},removePass:function(t){const e=this.passes.indexOf(t);-1!==e&&this.passes.splice(e,1)},isLastEnabledPass:function(t){for(var e=t+1;e<this.passes.length;e++)if(this.passes[e].enabled)return!1;return!0},render:function(t){void 0===t&&(t=this.clock.getDelta());var e,n,r=this.renderer.getRenderTarget(),i=!1,o=this.passes.length;for(n=0;n<o;n++)if(!1!==(e=this.passes[n]).enabled){if(e.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(n),e.render(this.renderer,this.writeBuffer,this.readBuffer,t,i),e.needsSwap){if(i){var a=this.renderer.getContext(),l=this.renderer.state.buffers.stencil;l.setFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,t),l.setFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==s&&(e instanceof s?i=!0:e instanceof c&&(i=!1))}this.renderer.setRenderTarget(r)},reset:function(t){if(void 0===t){var e=this.renderer.getSize(new r.Vector2);this._pixelRatio=this.renderer.getPixelRatio(),this._width=e.width,this._height=e.height,(t=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=t,this.renderTarget2=t.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2},setSize:function(t,e){this._width=t,this._height=e;var n=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(n,r),this.renderTarget2.setSize(n,r);for(var i=0;i<this.passes.length;i++)this.passes[i].setSize(n,r)},setPixelRatio:function(t){this._pixelRatio=t,this.setSize(this._width,this._height)}});var u,h,d,p=function(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1};Object.assign(p.prototype,{setSize:function(){},render:function(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}),p.FullScreenQuad=(u=new r.OrthographicCamera(-1,1,1,-1,0,1),h=new r.PlaneBufferGeometry(2,2),d=function(t){this._mesh=new r.Mesh(h,t)},Object.defineProperty(d.prototype,"material",{get:function(){return this._mesh.material},set:function(t){this._mesh.material=t}}),Object.assign(d.prototype,{dispose:function(){this._mesh.geometry.dispose()},render:function(t){t.render(this._mesh,u)}}),d)},function(t,e,n){"use strict";n.r(e),n.d(e,"ConvexGeometry",(function(){return o})),n.d(e,"ConvexBufferGeometry",(function(){return a}));var r=n(0),i=function(){var t,e,n,i,o=new r.Vector3;function a(){this.tolerance=-1,this.faces=[],this.newFaces=[],this.assigned=new u,this.unassigned=new u,this.vertices=[]}function s(){this.normal=new r.Vector3,this.midpoint=new r.Vector3,this.area=0,this.constant=0,this.outside=null,this.mark=0,this.edge=null}function c(t,e){this.vertex=t,this.prev=null,this.next=null,this.twin=null,this.face=e}function l(t){this.point=t,this.prev=null,this.next=null,this.face=null}function u(){this.head=null,this.tail=null}return Object.assign(a.prototype,{setFromPoints:function(t){!0!==Array.isArray(t)&&console.error("THREE.ConvexHull: Points parameter is not an array."),t.length<4&&console.error("THREE.ConvexHull: The algorithm needs at least four points."),this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.vertices.push(new l(t[e]));return this.compute(),this},setFromObject:function(t){var e=[];return t.updateMatrixWorld(!0),t.traverse((function(t){var n,i,o,a=t.geometry;if(void 0!==a)if(a.isGeometry){var s=a.vertices;for(n=0,i=s.length;n<i;n++)(o=s[n].clone()).applyMatrix4(t.matrixWorld),e.push(o)}else if(a.isBufferGeometry){var c=a.attributes.position;if(void 0!==c)for(n=0,i=c.count;n<i;n++)(o=new r.Vector3).fromBufferAttribute(c,n).applyMatrix4(t.matrixWorld),e.push(o)}})),this.setFromPoints(e)},containsPoint:function(t){for(var e=this.faces,n=0,r=e.length;n<r;n++){if(e[n].distanceToPoint(t)>this.tolerance)return!1}return!0},intersectRay:function(t,e){for(var n=this.faces,r=-1/0,i=1/0,o=0,a=n.length;o<a;o++){var s=n[o],c=s.distanceToPoint(t.origin),l=s.normal.dot(t.direction);if(c>0&&l>=0)return null;var u=0!==l?-c/l:0;if(!(u<=0)&&(l>0?i=Math.min(u,i):r=Math.max(u,r),r>i))return null}return r!==-1/0?t.at(r,e):t.at(i,e),e},intersectsRay:function(t){return null!==this.intersectRay(t,o)},makeEmpty:function(){return this.faces=[],this.vertices=[],this},addVertexToFace:function(t,e){return t.face=e,null===e.outside?this.assigned.append(t):this.assigned.insertBefore(e.outside,t),e.outside=t,this},removeVertexFromFace:function(t,e){return t===e.outside&&(null!==t.next&&t.next.face===e?e.outside=t.next:e.outside=null),this.assigned.remove(t),this},removeAllVerticesFromFace:function(t){if(null!==t.outside){for(var e=t.outside,n=t.outside;null!==n.next&&n.next.face===t;)n=n.next;return this.assigned.removeSubList(e,n),e.prev=n.next=null,t.outside=null,e}},deleteFaceVertices:function(t,e){var n=this.removeAllVerticesFromFace(t);if(void 0!==n)if(void 0===e)this.unassigned.appendChain(n);else{var r=n;do{var i=r.next;e.distanceToPoint(r.point)>this.tolerance?this.addVertexToFace(r,e):this.unassigned.append(r),r=i}while(null!==r)}return this},resolveUnassignedPoints:function(t){if(!1===this.unassigned.isEmpty()){var e=this.unassigned.first();do{for(var n=e.next,r=this.tolerance,i=null,o=0;o<t.length;o++){var a=t[o];if(0===a.mark){var s=a.distanceToPoint(e.point);if(s>r&&(r=s,i=a),r>1e3*this.tolerance)break}}null!==i&&this.addVertexToFace(e,i),e=n}while(null!==e)}return this},computeExtremes:function(){var t,e,n,i=new r.Vector3,o=new r.Vector3,a=[],s=[];for(t=0;t<3;t++)a[t]=s[t]=this.vertices[0];for(i.copy(this.vertices[0].point),o.copy(this.vertices[0].point),t=0,e=this.vertices.length;t<e;t++){var c=this.vertices[t],l=c.point;for(n=0;n<3;n++)l.getComponent(n)<i.getComponent(n)&&(i.setComponent(n,l.getComponent(n)),a[n]=c);for(n=0;n<3;n++)l.getComponent(n)>o.getComponent(n)&&(o.setComponent(n,l.getComponent(n)),s[n]=c)}return this.tolerance=3*Number.EPSILON*(Math.max(Math.abs(i.x),Math.abs(o.x))+Math.max(Math.abs(i.y),Math.abs(o.y))+Math.max(Math.abs(i.z),Math.abs(o.z))),{min:a,max:s}},computeInitialHull:function(){void 0===t&&(t=new r.Line3,e=new r.Plane,n=new r.Vector3);var i,o,a,c,l,u,h,d,p,f=this.vertices,m=this.computeExtremes(),g=m.min,v=m.max,y=0,x=0;for(u=0;u<3;u++)(p=v[u].point.getComponent(u)-g[u].point.getComponent(u))>y&&(y=p,x=u);for(o=g[x],a=v[x],y=0,t.set(o.point,a.point),u=0,h=this.vertices.length;u<h;u++)(i=f[u])!==o&&i!==a&&(t.closestPointToPoint(i.point,!0,n),(p=n.distanceToSquared(i.point))>y&&(y=p,c=i));for(y=-1,e.setFromCoplanarPoints(o.point,a.point,c.point),u=0,h=this.vertices.length;u<h;u++)(i=f[u])!==o&&i!==a&&i!==c&&(p=Math.abs(e.distanceToPoint(i.point)))>y&&(y=p,l=i);var b=[];if(e.distanceToPoint(l.point)<0)for(b.push(s.create(o,a,c),s.create(l,a,o),s.create(l,c,a),s.create(l,o,c)),u=0;u<3;u++)d=(u+1)%3,b[u+1].getEdge(2).setTwin(b[0].getEdge(d)),b[u+1].getEdge(1).setTwin(b[d+1].getEdge(0));else for(b.push(s.create(o,c,a),s.create(l,o,a),s.create(l,a,c),s.create(l,c,o)),u=0;u<3;u++)d=(u+1)%3,b[u+1].getEdge(2).setTwin(b[0].getEdge((3-u)%3)),b[u+1].getEdge(0).setTwin(b[d+1].getEdge(1));for(u=0;u<4;u++)this.faces.push(b[u]);for(u=0,h=f.length;u<h;u++)if((i=f[u])!==o&&i!==a&&i!==c&&i!==l){y=this.tolerance;var w=null;for(d=0;d<4;d++)(p=this.faces[d].distanceToPoint(i.point))>y&&(y=p,w=this.faces[d]);null!==w&&this.addVertexToFace(i,w)}return this},reindexFaces:function(){for(var t=[],e=0;e<this.faces.length;e++){var n=this.faces[e];0===n.mark&&t.push(n)}return this.faces=t,this},nextVertexToAdd:function(){if(!1===this.assigned.isEmpty()){var t,e=0,n=this.assigned.first().face,r=n.outside;do{var i=n.distanceToPoint(r.point);i>e&&(e=i,t=r),r=r.next}while(null!==r&&r.face===n);return t}},computeHorizon:function(t,e,n,r){var i;this.deleteFaceVertices(n),n.mark=1,i=null===e?e=n.getEdge(0):e.next;do{var o=i.twin,a=o.face;0===a.mark&&(a.distanceToPoint(t)>this.tolerance?this.computeHorizon(t,o,a,r):r.push(i)),i=i.next}while(i!==e);return this},addAdjoiningFace:function(t,e){var n=s.create(t,e.tail(),e.head());return this.faces.push(n),n.getEdge(-1).setTwin(e.twin),n.getEdge(0)},addNewFaces:function(t,e){this.newFaces=[];for(var n=null,r=null,i=0;i<e.length;i++){var o=e[i],a=this.addAdjoiningFace(t,o);null===n?n=a:a.next.setTwin(r),this.newFaces.push(a.face),r=a}return n.next.setTwin(r),this},addVertexToHull:function(t){var e=[];return this.unassigned.clear(),this.removeVertexFromFace(t,t.face),this.computeHorizon(t.point,null,t.face,e),this.addNewFaces(t,e),this.resolveUnassignedPoints(this.newFaces),this},cleanup:function(){return this.assigned.clear(),this.unassigned.clear(),this.newFaces=[],this},compute:function(){var t;for(this.computeInitialHull();void 0!==(t=this.nextVertexToAdd());)this.addVertexToHull(t);return this.reindexFaces(),this.cleanup(),this}}),Object.assign(s,{create:function(t,e,n){var r=new s,i=new c(t,r),o=new c(e,r),a=new c(n,r);return i.next=a.prev=o,o.next=i.prev=a,a.next=o.prev=i,r.edge=i,r.compute()}}),Object.assign(s.prototype,{getEdge:function(t){for(var e=this.edge;t>0;)e=e.next,t--;for(;t<0;)e=e.prev,t++;return e},compute:function(){void 0===i&&(i=new r.Triangle);var t=this.edge.tail(),e=this.edge.head(),n=this.edge.next.head();return i.set(t.point,e.point,n.point),i.getNormal(this.normal),i.getMidpoint(this.midpoint),this.area=i.getArea(),this.constant=this.normal.dot(this.midpoint),this},distanceToPoint:function(t){return this.normal.dot(t)-this.constant}}),Object.assign(c.prototype,{head:function(){return this.vertex},tail:function(){return this.prev?this.prev.vertex:null},length:function(){var t=this.head(),e=this.tail();return null!==e?e.point.distanceTo(t.point):-1},lengthSquared:function(){var t=this.head(),e=this.tail();return null!==e?e.point.distanceToSquared(t.point):-1},setTwin:function(t){return this.twin=t,t.twin=this,this}}),Object.assign(u.prototype,{first:function(){return this.head},last:function(){return this.tail},clear:function(){return this.head=this.tail=null,this},insertBefore:function(t,e){return e.prev=t.prev,e.next=t,null===e.prev?this.head=e:e.prev.next=e,t.prev=e,this},insertAfter:function(t,e){return e.prev=t,e.next=t.next,null===e.next?this.tail=e:e.next.prev=e,t.next=e,this},append:function(t){return null===this.head?this.head=t:this.tail.next=t,t.prev=this.tail,t.next=null,this.tail=t,this},appendChain:function(t){for(null===this.head?this.head=t:this.tail.next=t,t.prev=this.tail;null!==t.next;)t=t.next;return this.tail=t,this},remove:function(t){return null===t.prev?this.head=t.next:t.prev.next=t.next,null===t.next?this.tail=t.prev:t.next.prev=t.prev,this},removeSubList:function(t,e){return null===t.prev?this.head=e.next:t.prev.next=e.next,null===e.next?this.tail=t.prev:e.next.prev=t.prev,this},isEmpty:function(){return null===this.head}}),a}(),o=function(t){r.Geometry.call(this),this.fromBufferGeometry(new a(t)),this.mergeVertices()};o.prototype=Object.create(r.Geometry.prototype),o.prototype.constructor=o;var a=function(t){r.BufferGeometry.call(this);var e=[],n=[];void 0===i&&console.error("THREE.ConvexBufferGeometry: ConvexBufferGeometry relies on ConvexHull");for(var o=(new i).setFromPoints(t).faces,a=0;a<o.length;a++){var s=o[a],c=s.edge;do{var l=c.head().point;e.push(l.x,l.y,l.z),n.push(s.normal.x,s.normal.y,s.normal.z),c=c.next}while(c!==s.edge)}this.setAttribute("position",new r.Float32BufferAttribute(e,3)),this.setAttribute("normal",new r.Float32BufferAttribute(n,3))};a.prototype=Object.create(r.BufferGeometry.prototype),a.prototype.constructor=a},function(t,e,n){"use strict";n.r(e),n.d(e,"XRControllerModelFactory",(function(){return f}));var r=n(0),i=n(3);const o={Handedness:Object.freeze({NONE:"none",LEFT:"left",RIGHT:"right"}),ComponentState:Object.freeze({DEFAULT:"default",TOUCHED:"touched",PRESSED:"pressed"}),ComponentProperty:Object.freeze({BUTTON:"button",X_AXIS:"xAxis",Y_AXIS:"yAxis",STATE:"state"}),ComponentType:Object.freeze({TRIGGER:"trigger",SQUEEZE:"squeeze",TOUCHPAD:"touchpad",THUMBSTICK:"thumbstick",BUTTON:"button"}),ButtonTouchThreshold:.05,AxisTouchThreshold:.1,VisualResponseProperty:Object.freeze({TRANSFORM:"transform",VISIBILITY:"visibility"})};async function a(t){const e=await fetch(t);if(e.ok)return e.json();throw new Error(e.statusText)}async function s(t,e,n=null,r=!0){if(!t)throw new Error("No xrInputSource supplied");if(!e)throw new Error("No basePath supplied");const i=await async function(t){if(!t)throw new Error("No basePath supplied");return await a(t+"/profilesList.json")}(e);let o;if(t.profiles.some(t=>{const n=i[t];return n&&(o={profileId:t,profilePath:`${e}/${n.path}`,deprecated:!!n.deprecated}),!!o}),!o){if(!n)throw new Error("No matching profile name found");const t=i[n];if(!t)throw new Error(`No matching profile name found and default profile "${n}" missing.`);o={profileId:n,profilePath:`${e}/${t.path}`,deprecated:!!t.deprecated}}const s=await a(o.profilePath);let c;if(r){let e;if(e="any"===t.handedness?s.layouts[Object.keys(s.layouts)[0]]:s.layouts[t.handedness],!e)throw new Error(`No matching handedness, ${t.handedness}, in profile ${o.profileId}`);e.assetPath&&(c=o.profilePath.replace("profile.json",e.assetPath))}return{profile:s,assetPath:c}}const c={xAxis:0,yAxis:0,button:0,state:o.ComponentState.DEFAULT};class l{constructor(t){this.componentProperty=t.componentProperty,this.states=t.states,this.valueNodeName=t.valueNodeName,this.valueNodeProperty=t.valueNodeProperty,this.valueNodeProperty===o.VisualResponseProperty.TRANSFORM&&(this.minNodeName=t.minNodeName,this.maxNodeName=t.maxNodeName),this.value=0,this.updateFromComponent(c)}updateFromComponent({xAxis:t,yAxis:e,button:n,state:r}){const{normalizedXAxis:i,normalizedYAxis:a}=function(t=0,e=0){let n=t,r=e;if(Math.sqrt(t*t+e*e)>1){const i=Math.atan2(e,t);n=Math.cos(i),r=Math.sin(i)}return{normalizedXAxis:.5*n+.5,normalizedYAxis:.5*r+.5}}(t,e);switch(this.componentProperty){case o.ComponentProperty.X_AXIS:this.value=this.states.includes(r)?i:.5;break;case o.ComponentProperty.Y_AXIS:this.value=this.states.includes(r)?a:.5;break;case o.ComponentProperty.BUTTON:this.value=this.states.includes(r)?n:0;break;case o.ComponentProperty.STATE:this.valueNodeProperty===o.VisualResponseProperty.VISIBILITY?this.value=this.states.includes(r):this.value=this.states.includes(r)?1:0;break;default:throw new Error("Unexpected visualResponse componentProperty "+this.componentProperty)}}}class u{constructor(t,e){if(!(t&&e&&e.visualResponses&&e.gamepadIndices&&0!==Object.keys(e.gamepadIndices).length))throw new Error("Invalid arguments supplied");this.id=t,this.type=e.type,this.rootNodeName=e.rootNodeName,this.touchPointNodeName=e.touchPointNodeName,this.visualResponses={},Object.keys(e.visualResponses).forEach(t=>{const n=new l(e.visualResponses[t]);this.visualResponses[t]=n}),this.gamepadIndices=Object.assign({},e.gamepadIndices),this.values={state:o.ComponentState.DEFAULT,button:void 0!==this.gamepadIndices.button?0:void 0,xAxis:void 0!==this.gamepadIndices.xAxis?0:void 0,yAxis:void 0!==this.gamepadIndices.yAxis?0:void 0}}get data(){return{id:this.id,...this.values}}updateFromGamepad(t){if(this.values.state=o.ComponentState.DEFAULT,void 0!==this.gamepadIndices.button&&t.buttons.length>this.gamepadIndices.button){const e=t.buttons[this.gamepadIndices.button];this.values.button=e.value,this.values.button=this.values.button<0?0:this.values.button,this.values.button=this.values.button>1?1:this.values.button,e.pressed||1===this.values.button?this.values.state=o.ComponentState.PRESSED:(e.touched||this.values.button>o.ButtonTouchThreshold)&&(this.values.state=o.ComponentState.TOUCHED)}void 0!==this.gamepadIndices.xAxis&&t.axes.length>this.gamepadIndices.xAxis&&(this.values.xAxis=t.axes[this.gamepadIndices.xAxis],this.values.xAxis=this.values.xAxis<-1?-1:this.values.xAxis,this.values.xAxis=this.values.xAxis>1?1:this.values.xAxis,this.values.state===o.ComponentState.DEFAULT&&Math.abs(this.values.xAxis)>o.AxisTouchThreshold&&(this.values.state=o.ComponentState.TOUCHED)),void 0!==this.gamepadIndices.yAxis&&t.axes.length>this.gamepadIndices.yAxis&&(this.values.yAxis=t.axes[this.gamepadIndices.yAxis],this.values.yAxis=this.values.yAxis<-1?-1:this.values.yAxis,this.values.yAxis=this.values.yAxis>1?1:this.values.yAxis,this.values.state===o.ComponentState.DEFAULT&&Math.abs(this.values.yAxis)>o.AxisTouchThreshold&&(this.values.state=o.ComponentState.TOUCHED)),Object.values(this.visualResponses).forEach(t=>{t.updateFromComponent(this.values)})}}class h{constructor(t,e,n){if(!t)throw new Error("No xrInputSource supplied");if(!e)throw new Error("No profile supplied");this.xrInputSource=t,this.assetUrl=n,this.id=e.profileId,this.layoutDescription=e.layouts[t.handedness],this.components={},Object.keys(this.layoutDescription.components).forEach(t=>{const e=this.layoutDescription.components[t];this.components[t]=new u(t,e)}),this.updateFromGamepad()}get gripSpace(){return this.xrInputSource.gripSpace}get targetRaySpace(){return this.xrInputSource.targetRaySpace}get data(){const t=[];return Object.values(this.components).forEach(e=>{t.push(e.data)}),t}updateFromGamepad(){Object.values(this.components).forEach(t=>{t.updateFromGamepad(this.xrInputSource.gamepad)})}}function d(){r.Object3D.call(this),this.motionController=null,this.envMap=null}function p(t,e){!function(t,e){Object.values(t.components).forEach(t=>{const{type:n,touchPointNodeName:i,visualResponses:a}=t;if(n===o.ComponentType.TOUCHPAD)if(t.touchPointNode=e.getObjectByName(i),t.touchPointNode){const e=new r.SphereBufferGeometry(.001),n=new r.MeshBasicMaterial({color:255}),i=new r.Mesh(e,n);t.touchPointNode.add(i)}else console.warn(`Could not find touch dot, ${t.touchPointNodeName}, in touchpad component ${t.id}`);Object.values(a).forEach(t=>{const{valueNodeName:n,minNodeName:r,maxNodeName:i,valueNodeProperty:a}=t;if(a===o.VisualResponseProperty.TRANSFORM){if(t.minNode=e.getObjectByName(r),t.maxNode=e.getObjectByName(i),!t.minNode)return void console.warn(`Could not find ${r} in the model`);if(!t.maxNode)return void console.warn(`Could not find ${i} in the model`)}t.valueNode=e.getObjectByName(n),t.valueNode||console.warn(`Could not find ${n} in the model`)})})}(t.motionController,e),t.envMap&&e.traverse(e=>{e.isMesh&&(e.material.envMap=t.envMap,e.material.needsUpdate=!0)}),t.add(e)}d.prototype=Object.assign(Object.create(r.Object3D.prototype),{constructor:d,setEnvironmentMap:function(t){return this.envMap==t||(this.envMap=t,this.traverse(t=>{t.isMesh&&(t.material.envMap=this.envMap,t.material.needsUpdate=!0)})),this},updateMatrixWorld:function(t){r.Object3D.prototype.updateMatrixWorld.call(this,t),this.motionController&&(this.motionController.updateFromGamepad(),Object.values(this.motionController.components).forEach(t=>{Object.values(t.visualResponses).forEach(t=>{const{valueNode:e,minNode:n,maxNode:i,value:a,valueNodeProperty:s}=t;e&&(s===o.VisualResponseProperty.VISIBILITY?e.visible=a:s===o.VisualResponseProperty.TRANSFORM&&(r.Quaternion.slerp(n.quaternion,i.quaternion,e.quaternion,a),e.position.lerpVectors(n.position,i.position,a)))})}))}});var f=function(){function t(t=null){this.gltfLoader=t,this.path="https://cdn.jsdelivr.net/npm/@webxr-input-profiles/assets@1.0/dist/profiles",this._assetCache={},this.gltfLoader||(this.gltfLoader=new i.GLTFLoader)}return t.prototype={constructor:t,createControllerModel:function(t){const e=new d;let n=null;return t.addEventListener("connected",t=>{const r=t.data;"tracked-pointer"===r.targetRayMode&&r.gamepad&&s(r,this.path,"generic-trigger").then(({profile:t,assetPath:i})=>{e.motionController=new h(r,t,i);const o=this._assetCache[e.motionController.assetUrl];if(o)n=o.scene.clone(),p(e,n);else{if(!this.gltfLoader)throw new Error("GLTFLoader not set.");this.gltfLoader.setPath(""),this.gltfLoader.load(e.motionController.assetUrl,t=>{this._assetCache[e.motionController.assetUrl]=t,n=t.scene.clone(),p(e,n)},null,()=>{throw new Error(`Asset ${e.motionController.assetUrl} missing or malformed.`)})}}).catch(t=>{console.warn(t)})}),t.addEventListener("disconnected",()=>{e.motionController=null,e.remove(n),n=null}),e}},t}()},function(t,e,n){"use strict";n.r(e),n.d(e,"AnimationAction",(function(){return r}));class r{constructor(t,e,n=null,r=e.blendMode){this._mixer=t,this._clip=e,this._localRoot=n,this.blendMode=r;const i=e.tracks,o=i.length,a=new Array(o),s={endingStart:2400,endingEnd:2400};for(let t=0;t!==o;++t){const e=i[t].createInterpolant(null);a[t]=e,e.settings=s}this._interpolantSettings=s,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){const n=this._clip.duration,r=t._clip.duration,i=r/n,o=n/r;t.warp(1,i,e),this.warp(o,1,e)}return this}crossFadeTo(t,e,n){return t.crossFadeFrom(this,e,n)}stopFading(){const t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,n){const r=this._mixer,i=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;null===a&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const s=a.parameterPositions,c=a.sampleValues;return s[0]=i,s[1]=i+n,c[0]=t/o,c[1]=e/o,this}stopWarping(){const t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,e,n,r){if(!this.enabled)return void this._updateWeight(t);const i=this._startTime;if(null!==i){const r=(t-i)*n;if(r<0||0===n)return;this._startTime=null,e=n*r}e*=this._updateTimeScale(t);const o=this._updateTime(e),a=this._updateWeight(t);if(a>0){const t=this._interpolants,e=this._propertyBindings;switch(this.blendMode){case 2501:for(let n=0,r=t.length;n!==r;++n)t[n].evaluate(o),e[n].accumulateAdditive(a);break;case 2500:default:for(let n=0,i=t.length;n!==i;++n)t[n].evaluate(o),e[n].accumulate(r,a)}}}_updateWeight(t){let e=0;if(this.enabled){e=this.weight;const n=this._weightInterpolant;if(null!==n){const r=n.evaluate(t)[0];e*=r,t>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=e,e}_updateTimeScale(t){let e=0;if(!this.paused){e=this.timeScale;const n=this._timeScaleInterpolant;if(null!==n){e*=n.evaluate(t)[0],t>n.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e}_updateTime(t){const e=this._clip.duration,n=this.loop;let r=this.time+t,i=this._loopCount;const o=2202===n;if(0===t)return-1===i?r:o&&1==(1&i)?e-r:r;if(2200===n){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(r>=e)r=e;else{if(!(r<0)){this.time=r;break t}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===i&&(t>=0?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),r>=e||r<0){const n=Math.floor(r/e);r-=e*n,i+=Math.abs(n);const a=this.repetitions-i;if(a<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=t>0?e:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===a){const e=t<0;this._setEndings(e,!e,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=r;if(o&&1==(1&i))return e-r}return r}_setEndings(t,e,n){const r=this._interpolantSettings;n?(r.endingStart=2401,r.endingEnd=2401):(r.endingStart=t?this.zeroSlopeAtStart?2401:2400:2402,r.endingEnd=e?this.zeroSlopeAtEnd?2401:2400:2402)}_scheduleFading(t,e,n){const r=this._mixer,i=r.time;let o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,s=o.sampleValues;return a[0]=i,s[0]=e,a[1]=i+t,s[1]=n,this}}},function(t,e,n){"use strict";n.r(e),n.d(e,"GlitchPass",(function(){return a}));var r=n(0),i=n(1),o={uniforms:{tDiffuse:{value:null},tDisp:{value:null},byp:{value:0},amount:{value:.08},angle:{value:.02},seed:{value:.02},seed_x:{value:.02},seed_y:{value:.02},distortion_x:{value:.5},distortion_y:{value:.6},col_s:{value:.05}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform int byp;","uniform sampler2D tDiffuse;","uniform sampler2D tDisp;","uniform float amount;","uniform float angle;","uniform float seed;","uniform float seed_x;","uniform float seed_y;","uniform float distortion_x;","uniform float distortion_y;","uniform float col_s;","varying vec2 vUv;","float rand(vec2 co){","\treturn fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);","}","void main() {","\tif(byp<1) {","\t\tvec2 p = vUv;","\t\tfloat xs = floor(gl_FragCoord.x / 0.5);","\t\tfloat ys = floor(gl_FragCoord.y / 0.5);","\t\tvec4 normal = texture2D (tDisp, p*seed*seed);","\t\tif(p.y<distortion_x+col_s && p.y>distortion_x-col_s*seed) {","\t\t\tif(seed_x>0.){","\t\t\t\tp.y = 1. - (p.y + distortion_y);","\t\t\t}","\t\t\telse {","\t\t\t\tp.y = distortion_y;","\t\t\t}","\t\t}","\t\tif(p.x<distortion_y+col_s && p.x>distortion_y-col_s*seed) {","\t\t\tif(seed_y>0.){","\t\t\t\tp.x=distortion_x;","\t\t\t}","\t\t\telse {","\t\t\t\tp.x = 1. - (p.x + distortion_x);","\t\t\t}","\t\t}","\t\tp.x+=normal.x*seed_x*(seed/5.);","\t\tp.y+=normal.y*seed_y*(seed/5.);","\t\tvec2 offset = amount * vec2( cos(angle), sin(angle));","\t\tvec4 cr = texture2D(tDiffuse, p + offset);","\t\tvec4 cga = texture2D(tDiffuse, p);","\t\tvec4 cb = texture2D(tDiffuse, p - offset);","\t\tgl_FragColor = vec4(cr.r, cga.g, cb.b, cga.a);","\t\tvec4 snow = 200.*amount*vec4(rand(vec2(xs * seed,ys * seed*50.))*0.2);","\t\tgl_FragColor = gl_FragColor+ snow;","\t}","\telse {","\t\tgl_FragColor=texture2D (tDiffuse, vUv);","\t}","}"].join("\n")},a=function(t){i.a.call(this),void 0===o&&console.error("GlitchPass relies on DigitalGlitch");var e=o;this.uniforms=r.UniformsUtils.clone(e.uniforms),null==t&&(t=64),this.uniforms.tDisp.value=this.generateHeightmap(t),this.material=new r.ShaderMaterial({uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader}),this.fsQuad=new i.a.FullScreenQuad(this.material),this.goWild=!1,this.curF=0,this.generateTrigger()};a.prototype=Object.assign(Object.create(i.a.prototype),{constructor:a,render:function(t,e,n){this.uniforms.tDiffuse.value=n.texture,this.uniforms.seed.value=Math.random(),this.uniforms.byp.value=0,this.curF%this.randX==0||1==this.goWild?(this.uniforms.amount.value=Math.random()/30,this.uniforms.angle.value=r.MathUtils.randFloat(-Math.PI,Math.PI),this.uniforms.seed_x.value=r.MathUtils.randFloat(-1,1),this.uniforms.seed_y.value=r.MathUtils.randFloat(-1,1),this.uniforms.distortion_x.value=r.MathUtils.randFloat(0,1),this.uniforms.distortion_y.value=r.MathUtils.randFloat(0,1),this.curF=0,this.generateTrigger()):this.curF%this.randX<this.randX/5?(this.uniforms.amount.value=Math.random()/90,this.uniforms.angle.value=r.MathUtils.randFloat(-Math.PI,Math.PI),this.uniforms.distortion_x.value=r.MathUtils.randFloat(0,1),this.uniforms.distortion_y.value=r.MathUtils.randFloat(0,1),this.uniforms.seed_x.value=r.MathUtils.randFloat(-.3,.3),this.uniforms.seed_y.value=r.MathUtils.randFloat(-.3,.3)):0==this.goWild&&(this.uniforms.byp.value=1),this.curF++,this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(e),this.clear&&t.clear(),this.fsQuad.render(t))},generateTrigger:function(){this.randX=r.MathUtils.randInt(120,240)},generateHeightmap:function(t){for(var e=new Float32Array(t*t*3),n=t*t,i=0;i<n;i++){var o=r.MathUtils.randFloat(0,1);e[3*i+0]=o,e[3*i+1]=o,e[3*i+2]=o}return new r.DataTexture(e,t,t,r.RGBFormat,r.FloatType)}})}]));
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./node_modules/engine.io-client/lib/globalThis.browser.js":
/*!*****************************************************************!*\
  !*** ./node_modules/engine.io-client/lib/globalThis.browser.js ***!
  \*****************************************************************/
/***/ ((module) => {

module.exports = (() => {
  if (typeof self !== "undefined") {
    return self;
  } else if (typeof window !== "undefined") {
    return window;
  } else {
    return Function("return this")();
  }
})();


/***/ }),

/***/ "./node_modules/engine.io-client/lib/index.js":
/*!****************************************************!*\
  !*** ./node_modules/engine.io-client/lib/index.js ***!
  \****************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

const Socket = __webpack_require__(/*! ./socket */ "./node_modules/engine.io-client/lib/socket.js");

module.exports = (uri, opts) => new Socket(uri, opts);

/**
 * Expose deps for legacy compatibility
 * and standalone browser access.
 */

module.exports.Socket = Socket;
module.exports.protocol = Socket.protocol; // this is an int
module.exports.Transport = __webpack_require__(/*! ./transport */ "./node_modules/engine.io-client/lib/transport.js");
module.exports.transports = __webpack_require__(/*! ./transports/index */ "./node_modules/engine.io-client/lib/transports/index.js");
module.exports.parser = __webpack_require__(/*! engine.io-parser */ "./node_modules/engine.io-parser/lib/index.js");


/***/ }),

/***/ "./node_modules/engine.io-client/lib/socket.js":
/*!*****************************************************!*\
  !*** ./node_modules/engine.io-client/lib/socket.js ***!
  \*****************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

const transports = __webpack_require__(/*! ./transports/index */ "./node_modules/engine.io-client/lib/transports/index.js");
const Emitter = __webpack_require__(/*! component-emitter */ "./node_modules/component-emitter/index.js");
const debug = __webpack_require__(/*! debug */ "./node_modules/engine.io-client/node_modules/debug/src/browser.js")("engine.io-client:socket");
const parser = __webpack_require__(/*! engine.io-parser */ "./node_modules/engine.io-parser/lib/index.js");
const parseuri = __webpack_require__(/*! parseuri */ "./node_modules/parseuri/index.js");
const parseqs = __webpack_require__(/*! parseqs */ "./node_modules/parseqs/index.js");

class Socket extends Emitter {
  /**
   * Socket constructor.
   *
   * @param {String|Object} uri or options
   * @param {Object} options
   * @api public
   */
  constructor(uri, opts = {}) {
    super();

    if (uri && "object" === typeof uri) {
      opts = uri;
      uri = null;
    }

    if (uri) {
      uri = parseuri(uri);
      opts.hostname = uri.host;
      opts.secure = uri.protocol === "https" || uri.protocol === "wss";
      opts.port = uri.port;
      if (uri.query) opts.query = uri.query;
    } else if (opts.host) {
      opts.hostname = parseuri(opts.host).host;
    }

    this.secure =
      null != opts.secure
        ? opts.secure
        : typeof location !== "undefined" && "https:" === location.protocol;

    if (opts.hostname && !opts.port) {
      // if no port is specified manually, use the protocol default
      opts.port = this.secure ? "443" : "80";
    }

    this.hostname =
      opts.hostname ||
      (typeof location !== "undefined" ? location.hostname : "localhost");
    this.port =
      opts.port ||
      (typeof location !== "undefined" && location.port
        ? location.port
        : this.secure
        ? 443
        : 80);

    this.transports = opts.transports || ["polling", "websocket"];
    this.readyState = "";
    this.writeBuffer = [];
    this.prevBufferLen = 0;

    this.opts = Object.assign(
      {
        path: "/engine.io",
        agent: false,
        withCredentials: false,
        upgrade: true,
        jsonp: true,
        timestampParam: "t",
        rememberUpgrade: false,
        rejectUnauthorized: true,
        perMessageDeflate: {
          threshold: 1024
        },
        transportOptions: {},
        closeOnBeforeunload: true
      },
      opts
    );

    this.opts.path = this.opts.path.replace(/\/$/, "") + "/";

    if (typeof this.opts.query === "string") {
      this.opts.query = parseqs.decode(this.opts.query);
    }

    // set on handshake
    this.id = null;
    this.upgrades = null;
    this.pingInterval = null;
    this.pingTimeout = null;

    // set on heartbeat
    this.pingTimeoutTimer = null;

    if (typeof addEventListener === "function") {
      if (this.opts.closeOnBeforeunload) {
        // Firefox closes the connection when the "beforeunload" event is emitted but not Chrome. This event listener
        // ensures every browser behaves the same (no "disconnect" event at the Socket.IO level when the page is
        // closed/reloaded)
        addEventListener(
          "beforeunload",
          () => {
            if (this.transport) {
              // silently close the transport
              this.transport.removeAllListeners();
              this.transport.close();
            }
          },
          false
        );
      }
      if (this.hostname !== "localhost") {
        this.offlineEventListener = () => {
          this.onClose("transport close");
        };
        addEventListener("offline", this.offlineEventListener, false);
      }
    }

    this.open();
  }

  /**
   * Creates transport of the given type.
   *
   * @param {String} transport name
   * @return {Transport}
   * @api private
   */
  createTransport(name) {
    debug('creating transport "%s"', name);
    const query = clone(this.opts.query);

    // append engine.io protocol identifier
    query.EIO = parser.protocol;

    // transport name
    query.transport = name;

    // session id if we already have one
    if (this.id) query.sid = this.id;

    const opts = Object.assign(
      {},
      this.opts.transportOptions[name],
      this.opts,
      {
        query,
        socket: this,
        hostname: this.hostname,
        secure: this.secure,
        port: this.port
      }
    );

    debug("options: %j", opts);

    return new transports[name](opts);
  }

  /**
   * Initializes transport to use and starts probe.
   *
   * @api private
   */
  open() {
    let transport;
    if (
      this.opts.rememberUpgrade &&
      Socket.priorWebsocketSuccess &&
      this.transports.indexOf("websocket") !== -1
    ) {
      transport = "websocket";
    } else if (0 === this.transports.length) {
      // Emit error on next tick so it can be listened to
      setTimeout(() => {
        this.emit("error", "No transports available");
      }, 0);
      return;
    } else {
      transport = this.transports[0];
    }
    this.readyState = "opening";

    // Retry with the next transport if the transport is disabled (jsonp: false)
    try {
      transport = this.createTransport(transport);
    } catch (e) {
      debug("error while creating transport: %s", e);
      this.transports.shift();
      this.open();
      return;
    }

    transport.open();
    this.setTransport(transport);
  }

  /**
   * Sets the current transport. Disables the existing one (if any).
   *
   * @api private
   */
  setTransport(transport) {
    debug("setting transport %s", transport.name);

    if (this.transport) {
      debug("clearing existing transport %s", this.transport.name);
      this.transport.removeAllListeners();
    }

    // set up transport
    this.transport = transport;

    // set up transport listeners
    transport
      .on("drain", this.onDrain.bind(this))
      .on("packet", this.onPacket.bind(this))
      .on("error", this.onError.bind(this))
      .on("close", () => {
        this.onClose("transport close");
      });
  }

  /**
   * Probes a transport.
   *
   * @param {String} transport name
   * @api private
   */
  probe(name) {
    debug('probing transport "%s"', name);
    let transport = this.createTransport(name, { probe: 1 });
    let failed = false;

    Socket.priorWebsocketSuccess = false;

    const onTransportOpen = () => {
      if (failed) return;

      debug('probe transport "%s" opened', name);
      transport.send([{ type: "ping", data: "probe" }]);
      transport.once("packet", msg => {
        if (failed) return;
        if ("pong" === msg.type && "probe" === msg.data) {
          debug('probe transport "%s" pong', name);
          this.upgrading = true;
          this.emit("upgrading", transport);
          if (!transport) return;
          Socket.priorWebsocketSuccess = "websocket" === transport.name;

          debug('pausing current transport "%s"', this.transport.name);
          this.transport.pause(() => {
            if (failed) return;
            if ("closed" === this.readyState) return;
            debug("changing transport and sending upgrade packet");

            cleanup();

            this.setTransport(transport);
            transport.send([{ type: "upgrade" }]);
            this.emit("upgrade", transport);
            transport = null;
            this.upgrading = false;
            this.flush();
          });
        } else {
          debug('probe transport "%s" failed', name);
          const err = new Error("probe error");
          err.transport = transport.name;
          this.emit("upgradeError", err);
        }
      });
    };

    function freezeTransport() {
      if (failed) return;

      // Any callback called by transport should be ignored since now
      failed = true;

      cleanup();

      transport.close();
      transport = null;
    }

    // Handle any error that happens while probing
    const onerror = err => {
      const error = new Error("probe error: " + err);
      error.transport = transport.name;

      freezeTransport();

      debug('probe transport "%s" failed because of error: %s', name, err);

      this.emit("upgradeError", error);
    };

    function onTransportClose() {
      onerror("transport closed");
    }

    // When the socket is closed while we're probing
    function onclose() {
      onerror("socket closed");
    }

    // When the socket is upgraded while we're probing
    function onupgrade(to) {
      if (transport && to.name !== transport.name) {
        debug('"%s" works - aborting "%s"', to.name, transport.name);
        freezeTransport();
      }
    }

    // Remove all listeners on the transport and on self
    const cleanup = () => {
      transport.removeListener("open", onTransportOpen);
      transport.removeListener("error", onerror);
      transport.removeListener("close", onTransportClose);
      this.removeListener("close", onclose);
      this.removeListener("upgrading", onupgrade);
    };

    transport.once("open", onTransportOpen);
    transport.once("error", onerror);
    transport.once("close", onTransportClose);

    this.once("close", onclose);
    this.once("upgrading", onupgrade);

    transport.open();
  }

  /**
   * Called when connection is deemed open.
   *
   * @api public
   */
  onOpen() {
    debug("socket open");
    this.readyState = "open";
    Socket.priorWebsocketSuccess = "websocket" === this.transport.name;
    this.emit("open");
    this.flush();

    // we check for `readyState` in case an `open`
    // listener already closed the socket
    if (
      "open" === this.readyState &&
      this.opts.upgrade &&
      this.transport.pause
    ) {
      debug("starting upgrade probes");
      let i = 0;
      const l = this.upgrades.length;
      for (; i < l; i++) {
        this.probe(this.upgrades[i]);
      }
    }
  }

  /**
   * Handles a packet.
   *
   * @api private
   */
  onPacket(packet) {
    if (
      "opening" === this.readyState ||
      "open" === this.readyState ||
      "closing" === this.readyState
    ) {
      debug('socket receive: type "%s", data "%s"', packet.type, packet.data);

      this.emit("packet", packet);

      // Socket is live - any packet counts
      this.emit("heartbeat");

      switch (packet.type) {
        case "open":
          this.onHandshake(JSON.parse(packet.data));
          break;

        case "ping":
          this.resetPingTimeout();
          this.sendPacket("pong");
          this.emit("pong");
          break;

        case "error":
          const err = new Error("server error");
          err.code = packet.data;
          this.onError(err);
          break;

        case "message":
          this.emit("data", packet.data);
          this.emit("message", packet.data);
          break;
      }
    } else {
      debug('packet received with socket readyState "%s"', this.readyState);
    }
  }

  /**
   * Called upon handshake completion.
   *
   * @param {Object} handshake obj
   * @api private
   */
  onHandshake(data) {
    this.emit("handshake", data);
    this.id = data.sid;
    this.transport.query.sid = data.sid;
    this.upgrades = this.filterUpgrades(data.upgrades);
    this.pingInterval = data.pingInterval;
    this.pingTimeout = data.pingTimeout;
    this.onOpen();
    // In case open handler closes socket
    if ("closed" === this.readyState) return;
    this.resetPingTimeout();
  }

  /**
   * Sets and resets ping timeout timer based on server pings.
   *
   * @api private
   */
  resetPingTimeout() {
    clearTimeout(this.pingTimeoutTimer);
    this.pingTimeoutTimer = setTimeout(() => {
      this.onClose("ping timeout");
    }, this.pingInterval + this.pingTimeout);
    if (this.opts.autoUnref) {
      this.pingTimeoutTimer.unref();
    }
  }

  /**
   * Called on `drain` event
   *
   * @api private
   */
  onDrain() {
    this.writeBuffer.splice(0, this.prevBufferLen);

    // setting prevBufferLen = 0 is very important
    // for example, when upgrading, upgrade packet is sent over,
    // and a nonzero prevBufferLen could cause problems on `drain`
    this.prevBufferLen = 0;

    if (0 === this.writeBuffer.length) {
      this.emit("drain");
    } else {
      this.flush();
    }
  }

  /**
   * Flush write buffers.
   *
   * @api private
   */
  flush() {
    if (
      "closed" !== this.readyState &&
      this.transport.writable &&
      !this.upgrading &&
      this.writeBuffer.length
    ) {
      debug("flushing %d packets in socket", this.writeBuffer.length);
      this.transport.send(this.writeBuffer);
      // keep track of current length of writeBuffer
      // splice writeBuffer and callbackBuffer on `drain`
      this.prevBufferLen = this.writeBuffer.length;
      this.emit("flush");
    }
  }

  /**
   * Sends a message.
   *
   * @param {String} message.
   * @param {Function} callback function.
   * @param {Object} options.
   * @return {Socket} for chaining.
   * @api public
   */
  write(msg, options, fn) {
    this.sendPacket("message", msg, options, fn);
    return this;
  }

  send(msg, options, fn) {
    this.sendPacket("message", msg, options, fn);
    return this;
  }

  /**
   * Sends a packet.
   *
   * @param {String} packet type.
   * @param {String} data.
   * @param {Object} options.
   * @param {Function} callback function.
   * @api private
   */
  sendPacket(type, data, options, fn) {
    if ("function" === typeof data) {
      fn = data;
      data = undefined;
    }

    if ("function" === typeof options) {
      fn = options;
      options = null;
    }

    if ("closing" === this.readyState || "closed" === this.readyState) {
      return;
    }

    options = options || {};
    options.compress = false !== options.compress;

    const packet = {
      type: type,
      data: data,
      options: options
    };
    this.emit("packetCreate", packet);
    this.writeBuffer.push(packet);
    if (fn) this.once("flush", fn);
    this.flush();
  }

  /**
   * Closes the connection.
   *
   * @api private
   */
  close() {
    const close = () => {
      this.onClose("forced close");
      debug("socket closing - telling transport to close");
      this.transport.close();
    };

    const cleanupAndClose = () => {
      this.removeListener("upgrade", cleanupAndClose);
      this.removeListener("upgradeError", cleanupAndClose);
      close();
    };

    const waitForUpgrade = () => {
      // wait for upgrade to finish since we can't send packets while pausing a transport
      this.once("upgrade", cleanupAndClose);
      this.once("upgradeError", cleanupAndClose);
    };

    if ("opening" === this.readyState || "open" === this.readyState) {
      this.readyState = "closing";

      if (this.writeBuffer.length) {
        this.once("drain", () => {
          if (this.upgrading) {
            waitForUpgrade();
          } else {
            close();
          }
        });
      } else if (this.upgrading) {
        waitForUpgrade();
      } else {
        close();
      }
    }

    return this;
  }

  /**
   * Called upon transport error
   *
   * @api private
   */
  onError(err) {
    debug("socket error %j", err);
    Socket.priorWebsocketSuccess = false;
    this.emit("error", err);
    this.onClose("transport error", err);
  }

  /**
   * Called upon transport close.
   *
   * @api private
   */
  onClose(reason, desc) {
    if (
      "opening" === this.readyState ||
      "open" === this.readyState ||
      "closing" === this.readyState
    ) {
      debug('socket close with reason: "%s"', reason);

      // clear timers
      clearTimeout(this.pingIntervalTimer);
      clearTimeout(this.pingTimeoutTimer);

      // stop event from firing again for transport
      this.transport.removeAllListeners("close");

      // ensure transport won't stay open
      this.transport.close();

      // ignore further transport communication
      this.transport.removeAllListeners();

      if (typeof removeEventListener === "function") {
        removeEventListener("offline", this.offlineEventListener, false);
      }

      // set ready state
      this.readyState = "closed";

      // clear session id
      this.id = null;

      // emit close event
      this.emit("close", reason, desc);

      // clean buffers after, so users can still
      // grab the buffers on `close` event
      this.writeBuffer = [];
      this.prevBufferLen = 0;
    }
  }

  /**
   * Filters upgrades, returning only those matching client transports.
   *
   * @param {Array} server upgrades
   * @api private
   *
   */
  filterUpgrades(upgrades) {
    const filteredUpgrades = [];
    let i = 0;
    const j = upgrades.length;
    for (; i < j; i++) {
      if (~this.transports.indexOf(upgrades[i]))
        filteredUpgrades.push(upgrades[i]);
    }
    return filteredUpgrades;
  }
}

Socket.priorWebsocketSuccess = false;

/**
 * Protocol version.
 *
 * @api public
 */

Socket.protocol = parser.protocol; // this is an int

function clone(obj) {
  const o = {};
  for (let i in obj) {
    if (obj.hasOwnProperty(i)) {
      o[i] = obj[i];
    }
  }
  return o;
}

module.exports = Socket;


/***/ }),

/***/ "./node_modules/engine.io-client/lib/transport.js":
/*!********************************************************!*\
  !*** ./node_modules/engine.io-client/lib/transport.js ***!
  \********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

const parser = __webpack_require__(/*! engine.io-parser */ "./node_modules/engine.io-parser/lib/index.js");
const Emitter = __webpack_require__(/*! component-emitter */ "./node_modules/component-emitter/index.js");
const debug = __webpack_require__(/*! debug */ "./node_modules/engine.io-client/node_modules/debug/src/browser.js")("engine.io-client:transport");

class Transport extends Emitter {
  /**
   * Transport abstract constructor.
   *
   * @param {Object} options.
   * @api private
   */
  constructor(opts) {
    super();

    this.opts = opts;
    this.query = opts.query;
    this.readyState = "";
    this.socket = opts.socket;
  }

  /**
   * Emits an error.
   *
   * @param {String} str
   * @return {Transport} for chaining
   * @api public
   */
  onError(msg, desc) {
    const err = new Error(msg);
    err.type = "TransportError";
    err.description = desc;
    this.emit("error", err);
    return this;
  }

  /**
   * Opens the transport.
   *
   * @api public
   */
  open() {
    if ("closed" === this.readyState || "" === this.readyState) {
      this.readyState = "opening";
      this.doOpen();
    }

    return this;
  }

  /**
   * Closes the transport.
   *
   * @api private
   */
  close() {
    if ("opening" === this.readyState || "open" === this.readyState) {
      this.doClose();
      this.onClose();
    }

    return this;
  }

  /**
   * Sends multiple packets.
   *
   * @param {Array} packets
   * @api private
   */
  send(packets) {
    if ("open" === this.readyState) {
      this.write(packets);
    } else {
      // this might happen if the transport was silently closed in the beforeunload event handler
      debug("transport is not open, discarding packets");
    }
  }

  /**
   * Called upon open
   *
   * @api private
   */
  onOpen() {
    this.readyState = "open";
    this.writable = true;
    this.emit("open");
  }

  /**
   * Called with data.
   *
   * @param {String} data
   * @api private
   */
  onData(data) {
    const packet = parser.decodePacket(data, this.socket.binaryType);
    this.onPacket(packet);
  }

  /**
   * Called with a decoded packet.
   */
  onPacket(packet) {
    this.emit("packet", packet);
  }

  /**
   * Called upon close.
   *
   * @api private
   */
  onClose() {
    this.readyState = "closed";
    this.emit("close");
  }
}

module.exports = Transport;


/***/ }),

/***/ "./node_modules/engine.io-client/lib/transports/index.js":
/*!***************************************************************!*\
  !*** ./node_modules/engine.io-client/lib/transports/index.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

const XMLHttpRequest = __webpack_require__(/*! ../../contrib/xmlhttprequest-ssl/XMLHttpRequest */ "./node_modules/engine.io-client/lib/xmlhttprequest.js");
const XHR = __webpack_require__(/*! ./polling-xhr */ "./node_modules/engine.io-client/lib/transports/polling-xhr.js");
const JSONP = __webpack_require__(/*! ./polling-jsonp */ "./node_modules/engine.io-client/lib/transports/polling-jsonp.js");
const websocket = __webpack_require__(/*! ./websocket */ "./node_modules/engine.io-client/lib/transports/websocket.js");

exports.polling = polling;
exports.websocket = websocket;

/**
 * Polling transport polymorphic constructor.
 * Decides on xhr vs jsonp based on feature detection.
 *
 * @api private
 */

function polling(opts) {
  let xhr;
  let xd = false;
  let xs = false;
  const jsonp = false !== opts.jsonp;

  if (typeof location !== "undefined") {
    const isSSL = "https:" === location.protocol;
    let port = location.port;

    // some user agents have empty `location.port`
    if (!port) {
      port = isSSL ? 443 : 80;
    }

    xd = opts.hostname !== location.hostname || port !== opts.port;
    xs = opts.secure !== isSSL;
  }

  opts.xdomain = xd;
  opts.xscheme = xs;
  xhr = new XMLHttpRequest(opts);

  if ("open" in xhr && !opts.forceJSONP) {
    return new XHR(opts);
  } else {
    if (!jsonp) throw new Error("JSONP disabled");
    return new JSONP(opts);
  }
}


/***/ }),

/***/ "./node_modules/engine.io-client/lib/transports/polling-jsonp.js":
/*!***********************************************************************!*\
  !*** ./node_modules/engine.io-client/lib/transports/polling-jsonp.js ***!
  \***********************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

const Polling = __webpack_require__(/*! ./polling */ "./node_modules/engine.io-client/lib/transports/polling.js");
const globalThis = __webpack_require__(/*! ../globalThis */ "./node_modules/engine.io-client/lib/globalThis.browser.js");

const rNewline = /\n/g;
const rEscapedNewline = /\\n/g;

/**
 * Global JSONP callbacks.
 */

let callbacks;

class JSONPPolling extends Polling {
  /**
   * JSONP Polling constructor.
   *
   * @param {Object} opts.
   * @api public
   */
  constructor(opts) {
    super(opts);

    this.query = this.query || {};

    // define global callbacks array if not present
    // we do this here (lazily) to avoid unneeded global pollution
    if (!callbacks) {
      // we need to consider multiple engines in the same page
      callbacks = globalThis.___eio = globalThis.___eio || [];
    }

    // callback identifier
    this.index = callbacks.length;

    // add callback to jsonp global
    callbacks.push(this.onData.bind(this));

    // append to query string
    this.query.j = this.index;
  }

  /**
   * JSONP only supports binary as base64 encoded strings
   */
  get supportsBinary() {
    return false;
  }

  /**
   * Closes the socket.
   *
   * @api private
   */
  doClose() {
    if (this.script) {
      // prevent spurious errors from being emitted when the window is unloaded
      this.script.onerror = () => {};
      this.script.parentNode.removeChild(this.script);
      this.script = null;
    }

    if (this.form) {
      this.form.parentNode.removeChild(this.form);
      this.form = null;
      this.iframe = null;
    }

    super.doClose();
  }

  /**
   * Starts a poll cycle.
   *
   * @api private
   */
  doPoll() {
    const script = document.createElement("script");

    if (this.script) {
      this.script.parentNode.removeChild(this.script);
      this.script = null;
    }

    script.async = true;
    script.src = this.uri();
    script.onerror = e => {
      this.onError("jsonp poll error", e);
    };

    const insertAt = document.getElementsByTagName("script")[0];
    if (insertAt) {
      insertAt.parentNode.insertBefore(script, insertAt);
    } else {
      (document.head || document.body).appendChild(script);
    }
    this.script = script;

    const isUAgecko =
      "undefined" !== typeof navigator && /gecko/i.test(navigator.userAgent);

    if (isUAgecko) {
      setTimeout(function() {
        const iframe = document.createElement("iframe");
        document.body.appendChild(iframe);
        document.body.removeChild(iframe);
      }, 100);
    }
  }

  /**
   * Writes with a hidden iframe.
   *
   * @param {String} data to send
   * @param {Function} called upon flush.
   * @api private
   */
  doWrite(data, fn) {
    let iframe;

    if (!this.form) {
      const form = document.createElement("form");
      const area = document.createElement("textarea");
      const id = (this.iframeId = "eio_iframe_" + this.index);

      form.className = "socketio";
      form.style.position = "absolute";
      form.style.top = "-1000px";
      form.style.left = "-1000px";
      form.target = id;
      form.method = "POST";
      form.setAttribute("accept-charset", "utf-8");
      area.name = "d";
      form.appendChild(area);
      document.body.appendChild(form);

      this.form = form;
      this.area = area;
    }

    this.form.action = this.uri();

    function complete() {
      initIframe();
      fn();
    }

    const initIframe = () => {
      if (this.iframe) {
        try {
          this.form.removeChild(this.iframe);
        } catch (e) {
          this.onError("jsonp polling iframe removal error", e);
        }
      }

      try {
        // ie6 dynamic iframes with target="" support (thanks Chris Lambacher)
        const html = '<iframe src="javascript:0" name="' + this.iframeId + '">';
        iframe = document.createElement(html);
      } catch (e) {
        iframe = document.createElement("iframe");
        iframe.name = this.iframeId;
        iframe.src = "javascript:0";
      }

      iframe.id = this.iframeId;

      this.form.appendChild(iframe);
      this.iframe = iframe;
    };

    initIframe();

    // escape \n to prevent it from being converted into \r\n by some UAs
    // double escaping is required for escaped new lines because unescaping of new lines can be done safely on server-side
    data = data.replace(rEscapedNewline, "\\\n");
    this.area.value = data.replace(rNewline, "\\n");

    try {
      this.form.submit();
    } catch (e) {}

    if (this.iframe.attachEvent) {
      this.iframe.onreadystatechange = () => {
        if (this.iframe.readyState === "complete") {
          complete();
        }
      };
    } else {
      this.iframe.onload = complete;
    }
  }
}

module.exports = JSONPPolling;


/***/ }),

/***/ "./node_modules/engine.io-client/lib/transports/polling-xhr.js":
/*!*********************************************************************!*\
  !*** ./node_modules/engine.io-client/lib/transports/polling-xhr.js ***!
  \*********************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

/* global attachEvent */

const XMLHttpRequest = __webpack_require__(/*! ../../contrib/xmlhttprequest-ssl/XMLHttpRequest */ "./node_modules/engine.io-client/lib/xmlhttprequest.js");
const Polling = __webpack_require__(/*! ./polling */ "./node_modules/engine.io-client/lib/transports/polling.js");
const Emitter = __webpack_require__(/*! component-emitter */ "./node_modules/component-emitter/index.js");
const { pick } = __webpack_require__(/*! ../util */ "./node_modules/engine.io-client/lib/util.js");
const globalThis = __webpack_require__(/*! ../globalThis */ "./node_modules/engine.io-client/lib/globalThis.browser.js");

const debug = __webpack_require__(/*! debug */ "./node_modules/engine.io-client/node_modules/debug/src/browser.js")("engine.io-client:polling-xhr");

/**
 * Empty function
 */

function empty() {}

const hasXHR2 = (function() {
  const xhr = new XMLHttpRequest({ xdomain: false });
  return null != xhr.responseType;
})();

class XHR extends Polling {
  /**
   * XHR Polling constructor.
   *
   * @param {Object} opts
   * @api public
   */
  constructor(opts) {
    super(opts);

    if (typeof location !== "undefined") {
      const isSSL = "https:" === location.protocol;
      let port = location.port;

      // some user agents have empty `location.port`
      if (!port) {
        port = isSSL ? 443 : 80;
      }

      this.xd =
        (typeof location !== "undefined" &&
          opts.hostname !== location.hostname) ||
        port !== opts.port;
      this.xs = opts.secure !== isSSL;
    }
    /**
     * XHR supports binary
     */
    const forceBase64 = opts && opts.forceBase64;
    this.supportsBinary = hasXHR2 && !forceBase64;
  }

  /**
   * Creates a request.
   *
   * @param {String} method
   * @api private
   */
  request(opts = {}) {
    Object.assign(opts, { xd: this.xd, xs: this.xs }, this.opts);
    return new Request(this.uri(), opts);
  }

  /**
   * Sends data.
   *
   * @param {String} data to send.
   * @param {Function} called upon flush.
   * @api private
   */
  doWrite(data, fn) {
    const req = this.request({
      method: "POST",
      data: data
    });
    req.on("success", fn);
    req.on("error", err => {
      this.onError("xhr post error", err);
    });
  }

  /**
   * Starts a poll cycle.
   *
   * @api private
   */
  doPoll() {
    debug("xhr poll");
    const req = this.request();
    req.on("data", this.onData.bind(this));
    req.on("error", err => {
      this.onError("xhr poll error", err);
    });
    this.pollXhr = req;
  }
}

class Request extends Emitter {
  /**
   * Request constructor
   *
   * @param {Object} options
   * @api public
   */
  constructor(uri, opts) {
    super();
    this.opts = opts;

    this.method = opts.method || "GET";
    this.uri = uri;
    this.async = false !== opts.async;
    this.data = undefined !== opts.data ? opts.data : null;

    this.create();
  }

  /**
   * Creates the XHR object and sends the request.
   *
   * @api private
   */
  create() {
    const opts = pick(
      this.opts,
      "agent",
      "enablesXDR",
      "pfx",
      "key",
      "passphrase",
      "cert",
      "ca",
      "ciphers",
      "rejectUnauthorized",
      "autoUnref"
    );
    opts.xdomain = !!this.opts.xd;
    opts.xscheme = !!this.opts.xs;

    const xhr = (this.xhr = new XMLHttpRequest(opts));

    try {
      debug("xhr open %s: %s", this.method, this.uri);
      xhr.open(this.method, this.uri, this.async);
      try {
        if (this.opts.extraHeaders) {
          xhr.setDisableHeaderCheck && xhr.setDisableHeaderCheck(true);
          for (let i in this.opts.extraHeaders) {
            if (this.opts.extraHeaders.hasOwnProperty(i)) {
              xhr.setRequestHeader(i, this.opts.extraHeaders[i]);
            }
          }
        }
      } catch (e) {}

      if ("POST" === this.method) {
        try {
          xhr.setRequestHeader("Content-type", "text/plain;charset=UTF-8");
        } catch (e) {}
      }

      try {
        xhr.setRequestHeader("Accept", "*/*");
      } catch (e) {}

      // ie6 check
      if ("withCredentials" in xhr) {
        xhr.withCredentials = this.opts.withCredentials;
      }

      if (this.opts.requestTimeout) {
        xhr.timeout = this.opts.requestTimeout;
      }

      if (this.hasXDR()) {
        xhr.onload = () => {
          this.onLoad();
        };
        xhr.onerror = () => {
          this.onError(xhr.responseText);
        };
      } else {
        xhr.onreadystatechange = () => {
          if (4 !== xhr.readyState) return;
          if (200 === xhr.status || 1223 === xhr.status) {
            this.onLoad();
          } else {
            // make sure the `error` event handler that's user-set
            // does not throw in the same tick and gets caught here
            setTimeout(() => {
              this.onError(typeof xhr.status === "number" ? xhr.status : 0);
            }, 0);
          }
        };
      }

      debug("xhr data %s", this.data);
      xhr.send(this.data);
    } catch (e) {
      // Need to defer since .create() is called directly from the constructor
      // and thus the 'error' event can only be only bound *after* this exception
      // occurs.  Therefore, also, we cannot throw here at all.
      setTimeout(() => {
        this.onError(e);
      }, 0);
      return;
    }

    if (typeof document !== "undefined") {
      this.index = Request.requestsCount++;
      Request.requests[this.index] = this;
    }
  }

  /**
   * Called upon successful response.
   *
   * @api private
   */
  onSuccess() {
    this.emit("success");
    this.cleanup();
  }

  /**
   * Called if we have data.
   *
   * @api private
   */
  onData(data) {
    this.emit("data", data);
    this.onSuccess();
  }

  /**
   * Called upon error.
   *
   * @api private
   */
  onError(err) {
    this.emit("error", err);
    this.cleanup(true);
  }

  /**
   * Cleans up house.
   *
   * @api private
   */
  cleanup(fromError) {
    if ("undefined" === typeof this.xhr || null === this.xhr) {
      return;
    }
    // xmlhttprequest
    if (this.hasXDR()) {
      this.xhr.onload = this.xhr.onerror = empty;
    } else {
      this.xhr.onreadystatechange = empty;
    }

    if (fromError) {
      try {
        this.xhr.abort();
      } catch (e) {}
    }

    if (typeof document !== "undefined") {
      delete Request.requests[this.index];
    }

    this.xhr = null;
  }

  /**
   * Called upon load.
   *
   * @api private
   */
  onLoad() {
    const data = this.xhr.responseText;
    if (data !== null) {
      this.onData(data);
    }
  }

  /**
   * Check if it has XDomainRequest.
   *
   * @api private
   */
  hasXDR() {
    return typeof XDomainRequest !== "undefined" && !this.xs && this.enablesXDR;
  }

  /**
   * Aborts the request.
   *
   * @api public
   */
  abort() {
    this.cleanup();
  }
}

/**
 * Aborts pending requests when unloading the window. This is needed to prevent
 * memory leaks (e.g. when using IE) and to ensure that no spurious error is
 * emitted.
 */

Request.requestsCount = 0;
Request.requests = {};

if (typeof document !== "undefined") {
  if (typeof attachEvent === "function") {
    attachEvent("onunload", unloadHandler);
  } else if (typeof addEventListener === "function") {
    const terminationEvent = "onpagehide" in globalThis ? "pagehide" : "unload";
    addEventListener(terminationEvent, unloadHandler, false);
  }
}

function unloadHandler() {
  for (let i in Request.requests) {
    if (Request.requests.hasOwnProperty(i)) {
      Request.requests[i].abort();
    }
  }
}

module.exports = XHR;
module.exports.Request = Request;


/***/ }),

/***/ "./node_modules/engine.io-client/lib/transports/polling.js":
/*!*****************************************************************!*\
  !*** ./node_modules/engine.io-client/lib/transports/polling.js ***!
  \*****************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

const Transport = __webpack_require__(/*! ../transport */ "./node_modules/engine.io-client/lib/transport.js");
const parseqs = __webpack_require__(/*! parseqs */ "./node_modules/parseqs/index.js");
const parser = __webpack_require__(/*! engine.io-parser */ "./node_modules/engine.io-parser/lib/index.js");
const yeast = __webpack_require__(/*! yeast */ "./node_modules/yeast/index.js");

const debug = __webpack_require__(/*! debug */ "./node_modules/engine.io-client/node_modules/debug/src/browser.js")("engine.io-client:polling");

class Polling extends Transport {
  /**
   * Transport name.
   */
  get name() {
    return "polling";
  }

  /**
   * Opens the socket (triggers polling). We write a PING message to determine
   * when the transport is open.
   *
   * @api private
   */
  doOpen() {
    this.poll();
  }

  /**
   * Pauses polling.
   *
   * @param {Function} callback upon buffers are flushed and transport is paused
   * @api private
   */
  pause(onPause) {
    this.readyState = "pausing";

    const pause = () => {
      debug("paused");
      this.readyState = "paused";
      onPause();
    };

    if (this.polling || !this.writable) {
      let total = 0;

      if (this.polling) {
        debug("we are currently polling - waiting to pause");
        total++;
        this.once("pollComplete", function() {
          debug("pre-pause polling complete");
          --total || pause();
        });
      }

      if (!this.writable) {
        debug("we are currently writing - waiting to pause");
        total++;
        this.once("drain", function() {
          debug("pre-pause writing complete");
          --total || pause();
        });
      }
    } else {
      pause();
    }
  }

  /**
   * Starts polling cycle.
   *
   * @api public
   */
  poll() {
    debug("polling");
    this.polling = true;
    this.doPoll();
    this.emit("poll");
  }

  /**
   * Overloads onData to detect payloads.
   *
   * @api private
   */
  onData(data) {
    debug("polling got data %s", data);
    const callback = packet => {
      // if its the first message we consider the transport open
      if ("opening" === this.readyState && packet.type === "open") {
        this.onOpen();
      }

      // if its a close packet, we close the ongoing requests
      if ("close" === packet.type) {
        this.onClose();
        return false;
      }

      // otherwise bypass onData and handle the message
      this.onPacket(packet);
    };

    // decode payload
    parser.decodePayload(data, this.socket.binaryType).forEach(callback);

    // if an event did not trigger closing
    if ("closed" !== this.readyState) {
      // if we got data we're not polling
      this.polling = false;
      this.emit("pollComplete");

      if ("open" === this.readyState) {
        this.poll();
      } else {
        debug('ignoring poll - transport state "%s"', this.readyState);
      }
    }
  }

  /**
   * For polling, send a close packet.
   *
   * @api private
   */
  doClose() {
    const close = () => {
      debug("writing close packet");
      this.write([{ type: "close" }]);
    };

    if ("open" === this.readyState) {
      debug("transport open - closing");
      close();
    } else {
      // in case we're trying to close while
      // handshaking is in progress (GH-164)
      debug("transport not open - deferring close");
      this.once("open", close);
    }
  }

  /**
   * Writes a packets payload.
   *
   * @param {Array} data packets
   * @param {Function} drain callback
   * @api private
   */
  write(packets) {
    this.writable = false;

    parser.encodePayload(packets, data => {
      this.doWrite(data, () => {
        this.writable = true;
        this.emit("drain");
      });
    });
  }

  /**
   * Generates uri for connection.
   *
   * @api private
   */
  uri() {
    let query = this.query || {};
    const schema = this.opts.secure ? "https" : "http";
    let port = "";

    // cache busting is forced
    if (false !== this.opts.timestampRequests) {
      query[this.opts.timestampParam] = yeast();
    }

    if (!this.supportsBinary && !query.sid) {
      query.b64 = 1;
    }

    query = parseqs.encode(query);

    // avoid port if default for schema
    if (
      this.opts.port &&
      (("https" === schema && Number(this.opts.port) !== 443) ||
        ("http" === schema && Number(this.opts.port) !== 80))
    ) {
      port = ":" + this.opts.port;
    }

    // prepend ? to query
    if (query.length) {
      query = "?" + query;
    }

    const ipv6 = this.opts.hostname.indexOf(":") !== -1;
    return (
      schema +
      "://" +
      (ipv6 ? "[" + this.opts.hostname + "]" : this.opts.hostname) +
      port +
      this.opts.path +
      query
    );
  }
}

module.exports = Polling;


/***/ }),

/***/ "./node_modules/engine.io-client/lib/transports/websocket-constructor.browser.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/engine.io-client/lib/transports/websocket-constructor.browser.js ***!
  \***************************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

const globalThis = __webpack_require__(/*! ../globalThis */ "./node_modules/engine.io-client/lib/globalThis.browser.js");

module.exports = {
  WebSocket: globalThis.WebSocket || globalThis.MozWebSocket,
  usingBrowserWebSocket: true,
  defaultBinaryType: "arraybuffer"
};


/***/ }),

/***/ "./node_modules/engine.io-client/lib/transports/websocket.js":
/*!*******************************************************************!*\
  !*** ./node_modules/engine.io-client/lib/transports/websocket.js ***!
  \*******************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

const Transport = __webpack_require__(/*! ../transport */ "./node_modules/engine.io-client/lib/transport.js");
const parser = __webpack_require__(/*! engine.io-parser */ "./node_modules/engine.io-parser/lib/index.js");
const parseqs = __webpack_require__(/*! parseqs */ "./node_modules/parseqs/index.js");
const yeast = __webpack_require__(/*! yeast */ "./node_modules/yeast/index.js");
const { pick } = __webpack_require__(/*! ../util */ "./node_modules/engine.io-client/lib/util.js");
const {
  WebSocket,
  usingBrowserWebSocket,
  defaultBinaryType
} = __webpack_require__(/*! ./websocket-constructor */ "./node_modules/engine.io-client/lib/transports/websocket-constructor.browser.js");

const debug = __webpack_require__(/*! debug */ "./node_modules/engine.io-client/node_modules/debug/src/browser.js")("engine.io-client:websocket");

// detect ReactNative environment
const isReactNative =
  typeof navigator !== "undefined" &&
  typeof navigator.product === "string" &&
  navigator.product.toLowerCase() === "reactnative";

class WS extends Transport {
  /**
   * WebSocket transport constructor.
   *
   * @api {Object} connection options
   * @api public
   */
  constructor(opts) {
    super(opts);

    this.supportsBinary = !opts.forceBase64;
  }

  /**
   * Transport name.
   *
   * @api public
   */
  get name() {
    return "websocket";
  }

  /**
   * Opens socket.
   *
   * @api private
   */
  doOpen() {
    if (!this.check()) {
      // let probe timeout
      return;
    }

    const uri = this.uri();
    const protocols = this.opts.protocols;

    // React Native only supports the 'headers' option, and will print a warning if anything else is passed
    const opts = isReactNative
      ? {}
      : pick(
          this.opts,
          "agent",
          "perMessageDeflate",
          "pfx",
          "key",
          "passphrase",
          "cert",
          "ca",
          "ciphers",
          "rejectUnauthorized",
          "localAddress",
          "protocolVersion",
          "origin",
          "maxPayload",
          "family",
          "checkServerIdentity"
        );

    if (this.opts.extraHeaders) {
      opts.headers = this.opts.extraHeaders;
    }

    try {
      this.ws =
        usingBrowserWebSocket && !isReactNative
          ? protocols
            ? new WebSocket(uri, protocols)
            : new WebSocket(uri)
          : new WebSocket(uri, protocols, opts);
    } catch (err) {
      return this.emit("error", err);
    }

    this.ws.binaryType = this.socket.binaryType || defaultBinaryType;

    this.addEventListeners();
  }

  /**
   * Adds event listeners to the socket
   *
   * @api private
   */
  addEventListeners() {
    this.ws.onopen = () => {
      if (this.opts.autoUnref) {
        this.ws._socket.unref();
      }
      this.onOpen();
    };
    this.ws.onclose = this.onClose.bind(this);
    this.ws.onmessage = ev => this.onData(ev.data);
    this.ws.onerror = e => this.onError("websocket error", e);
  }

  /**
   * Writes data to socket.
   *
   * @param {Array} array of packets.
   * @api private
   */
  write(packets) {
    this.writable = false;

    // encodePacket efficient as it uses WS framing
    // no need for encodePayload
    for (let i = 0; i < packets.length; i++) {
      const packet = packets[i];
      const lastPacket = i === packets.length - 1;

      parser.encodePacket(packet, this.supportsBinary, data => {
        // always create a new object (GH-437)
        const opts = {};
        if (!usingBrowserWebSocket) {
          if (packet.options) {
            opts.compress = packet.options.compress;
          }

          if (this.opts.perMessageDeflate) {
            const len =
              "string" === typeof data ? Buffer.byteLength(data) : data.length;
            if (len < this.opts.perMessageDeflate.threshold) {
              opts.compress = false;
            }
          }
        }

        // Sometimes the websocket has already been closed but the browser didn't
        // have a chance of informing us about it yet, in that case send will
        // throw an error
        try {
          if (usingBrowserWebSocket) {
            // TypeError is thrown when passing the second argument on Safari
            this.ws.send(data);
          } else {
            this.ws.send(data, opts);
          }
        } catch (e) {
          debug("websocket closed before onclose event");
        }

        if (lastPacket) {
          // fake drain
          // defer to next tick to allow Socket to clear writeBuffer
          setTimeout(() => {
            this.writable = true;
            this.emit("drain");
          }, 0);
        }
      });
    }
  }

  /**
   * Called upon close
   *
   * @api private
   */
  onClose() {
    Transport.prototype.onClose.call(this);
  }

  /**
   * Closes socket.
   *
   * @api private
   */
  doClose() {
    if (typeof this.ws !== "undefined") {
      this.ws.close();
      this.ws = null;
    }
  }

  /**
   * Generates uri for connection.
   *
   * @api private
   */
  uri() {
    let query = this.query || {};
    const schema = this.opts.secure ? "wss" : "ws";
    let port = "";

    // avoid port if default for schema
    if (
      this.opts.port &&
      (("wss" === schema && Number(this.opts.port) !== 443) ||
        ("ws" === schema && Number(this.opts.port) !== 80))
    ) {
      port = ":" + this.opts.port;
    }

    // append timestamp to URI
    if (this.opts.timestampRequests) {
      query[this.opts.timestampParam] = yeast();
    }

    // communicate binary support capabilities
    if (!this.supportsBinary) {
      query.b64 = 1;
    }

    query = parseqs.encode(query);

    // prepend ? to query
    if (query.length) {
      query = "?" + query;
    }

    const ipv6 = this.opts.hostname.indexOf(":") !== -1;
    return (
      schema +
      "://" +
      (ipv6 ? "[" + this.opts.hostname + "]" : this.opts.hostname) +
      port +
      this.opts.path +
      query
    );
  }

  /**
   * Feature detection for WebSocket.
   *
   * @return {Boolean} whether this transport is available.
   * @api public
   */
  check() {
    return (
      !!WebSocket &&
      !("__initialize" in WebSocket && this.name === WS.prototype.name)
    );
  }
}

module.exports = WS;


/***/ }),

/***/ "./node_modules/engine.io-client/lib/util.js":
/*!***************************************************!*\
  !*** ./node_modules/engine.io-client/lib/util.js ***!
  \***************************************************/
/***/ ((module) => {

module.exports.pick = (obj, ...attr) => {
  return attr.reduce((acc, k) => {
    if (obj.hasOwnProperty(k)) {
      acc[k] = obj[k];
    }
    return acc;
  }, {});
};


/***/ }),

/***/ "./node_modules/engine.io-client/lib/xmlhttprequest.js":
/*!*************************************************************!*\
  !*** ./node_modules/engine.io-client/lib/xmlhttprequest.js ***!
  \*************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

// browser shim for xmlhttprequest module

const hasCORS = __webpack_require__(/*! has-cors */ "./node_modules/has-cors/index.js");
const globalThis = __webpack_require__(/*! ./globalThis */ "./node_modules/engine.io-client/lib/globalThis.browser.js");

module.exports = function(opts) {
  const xdomain = opts.xdomain;

  // scheme must be same when usign XDomainRequest
  // http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx
  const xscheme = opts.xscheme;

  // XDomainRequest has a flow of not sending cookie, therefore it should be disabled as a default.
  // https://github.com/Automattic/engine.io-client/pull/217
  const enablesXDR = opts.enablesXDR;

  // XMLHttpRequest can be disabled on IE
  try {
    if ("undefined" !== typeof XMLHttpRequest && (!xdomain || hasCORS)) {
      return new XMLHttpRequest();
    }
  } catch (e) {}

  // Use XDomainRequest for IE8 if enablesXDR is true
  // because loading bar keeps flashing when using jsonp-polling
  // https://github.com/yujiosaka/socke.io-ie8-loading-example
  try {
    if ("undefined" !== typeof XDomainRequest && !xscheme && enablesXDR) {
      return new XDomainRequest();
    }
  } catch (e) {}

  if (!xdomain) {
    try {
      return new globalThis[["Active"].concat("Object").join("X")](
        "Microsoft.XMLHTTP"
      );
    } catch (e) {}
  }
};


/***/ }),

/***/ "./node_modules/engine.io-client/node_modules/debug/src/browser.js":
/*!*************************************************************************!*\
  !*** ./node_modules/engine.io-client/node_modules/debug/src/browser.js ***!
  \*************************************************************************/
/***/ ((module, exports, __webpack_require__) => {

/* eslint-env browser */

/**
 * This is the web browser implementation of `debug()`.
 */

exports.formatArgs = formatArgs;
exports.save = save;
exports.load = load;
exports.useColors = useColors;
exports.storage = localstorage();
exports.destroy = (() => {
	let warned = false;

	return () => {
		if (!warned) {
			warned = true;
			console.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');
		}
	};
})();

/**
 * Colors.
 */

exports.colors = [
	'#0000CC',
	'#0000FF',
	'#0033CC',
	'#0033FF',
	'#0066CC',
	'#0066FF',
	'#0099CC',
	'#0099FF',
	'#00CC00',
	'#00CC33',
	'#00CC66',
	'#00CC99',
	'#00CCCC',
	'#00CCFF',
	'#3300CC',
	'#3300FF',
	'#3333CC',
	'#3333FF',
	'#3366CC',
	'#3366FF',
	'#3399CC',
	'#3399FF',
	'#33CC00',
	'#33CC33',
	'#33CC66',
	'#33CC99',
	'#33CCCC',
	'#33CCFF',
	'#6600CC',
	'#6600FF',
	'#6633CC',
	'#6633FF',
	'#66CC00',
	'#66CC33',
	'#9900CC',
	'#9900FF',
	'#9933CC',
	'#9933FF',
	'#99CC00',
	'#99CC33',
	'#CC0000',
	'#CC0033',
	'#CC0066',
	'#CC0099',
	'#CC00CC',
	'#CC00FF',
	'#CC3300',
	'#CC3333',
	'#CC3366',
	'#CC3399',
	'#CC33CC',
	'#CC33FF',
	'#CC6600',
	'#CC6633',
	'#CC9900',
	'#CC9933',
	'#CCCC00',
	'#CCCC33',
	'#FF0000',
	'#FF0033',
	'#FF0066',
	'#FF0099',
	'#FF00CC',
	'#FF00FF',
	'#FF3300',
	'#FF3333',
	'#FF3366',
	'#FF3399',
	'#FF33CC',
	'#FF33FF',
	'#FF6600',
	'#FF6633',
	'#FF9900',
	'#FF9933',
	'#FFCC00',
	'#FFCC33'
];

/**
 * Currently only WebKit-based Web Inspectors, Firefox >= v31,
 * and the Firebug extension (any Firefox version) are known
 * to support "%c" CSS customizations.
 *
 * TODO: add a `localStorage` variable to explicitly enable/disable colors
 */

// eslint-disable-next-line complexity
function useColors() {
	// NB: In an Electron preload script, document will be defined but not fully
	// initialized. Since we know we're in Chrome, we'll just detect this case
	// explicitly
	if (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {
		return true;
	}

	// Internet Explorer and Edge do not support colors.
	if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)) {
		return false;
	}

	// Is webkit? http://stackoverflow.com/a/16459606/376773
	// document is undefined in react-native: https://github.com/facebook/react-native/pull/1632
	return (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||
		// Is firebug? http://stackoverflow.com/a/398120/376773
		(typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||
		// Is firefox >= v31?
		// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages
		(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||
		// Double check webkit in userAgent just in case we are in a worker
		(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/));
}

/**
 * Colorize log arguments if enabled.
 *
 * @api public
 */

function formatArgs(args) {
	args[0] = (this.useColors ? '%c' : '') +
		this.namespace +
		(this.useColors ? ' %c' : ' ') +
		args[0] +
		(this.useColors ? '%c ' : ' ') +
		'+' + module.exports.humanize(this.diff);

	if (!this.useColors) {
		return;
	}

	const c = 'color: ' + this.color;
	args.splice(1, 0, c, 'color: inherit');

	// The final "%c" is somewhat tricky, because there could be other
	// arguments passed either before or after the %c, so we need to
	// figure out the correct index to insert the CSS into
	let index = 0;
	let lastC = 0;
	args[0].replace(/%[a-zA-Z%]/g, match => {
		if (match === '%%') {
			return;
		}
		index++;
		if (match === '%c') {
			// We only are interested in the *last* %c
			// (the user may have provided their own)
			lastC = index;
		}
	});

	args.splice(lastC, 0, c);
}

/**
 * Invokes `console.debug()` when available.
 * No-op when `console.debug` is not a "function".
 * If `console.debug` is not available, falls back
 * to `console.log`.
 *
 * @api public
 */
exports.log = console.debug || console.log || (() => {});

/**
 * Save `namespaces`.
 *
 * @param {String} namespaces
 * @api private
 */
function save(namespaces) {
	try {
		if (namespaces) {
			exports.storage.setItem('debug', namespaces);
		} else {
			exports.storage.removeItem('debug');
		}
	} catch (error) {
		// Swallow
		// XXX (@Qix-) should we be logging these?
	}
}

/**
 * Load `namespaces`.
 *
 * @return {String} returns the previously persisted debug modes
 * @api private
 */
function load() {
	let r;
	try {
		r = exports.storage.getItem('debug');
	} catch (error) {
		// Swallow
		// XXX (@Qix-) should we be logging these?
	}

	// If debug isn't set in LS, and we're in Electron, try to load $DEBUG
	if (!r && typeof process !== 'undefined' && 'env' in process) {
		r = process.env.DEBUG;
	}

	return r;
}

/**
 * Localstorage attempts to return the localstorage.
 *
 * This is necessary because safari throws
 * when a user disables cookies/localstorage
 * and you attempt to access it.
 *
 * @return {LocalStorage}
 * @api private
 */

function localstorage() {
	try {
		// TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context
		// The Browser also has localStorage in the global context.
		return localStorage;
	} catch (error) {
		// Swallow
		// XXX (@Qix-) should we be logging these?
	}
}

module.exports = __webpack_require__(/*! ./common */ "./node_modules/engine.io-client/node_modules/debug/src/common.js")(exports);

const {formatters} = module.exports;

/**
 * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.
 */

formatters.j = function (v) {
	try {
		return JSON.stringify(v);
	} catch (error) {
		return '[UnexpectedJSONParseError]: ' + error.message;
	}
};


/***/ }),

/***/ "./node_modules/engine.io-client/node_modules/debug/src/common.js":
/*!************************************************************************!*\
  !*** ./node_modules/engine.io-client/node_modules/debug/src/common.js ***!
  \************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


/**
 * This is the common logic for both the Node.js and web browser
 * implementations of `debug()`.
 */

function setup(env) {
	createDebug.debug = createDebug;
	createDebug.default = createDebug;
	createDebug.coerce = coerce;
	createDebug.disable = disable;
	createDebug.enable = enable;
	createDebug.enabled = enabled;
	createDebug.humanize = __webpack_require__(/*! ms */ "./node_modules/engine.io-client/node_modules/ms/index.js");
	createDebug.destroy = destroy;

	Object.keys(env).forEach(key => {
		createDebug[key] = env[key];
	});

	/**
	* The currently active debug mode names, and names to skip.
	*/

	createDebug.names = [];
	createDebug.skips = [];

	/**
	* Map of special "%n" handling functions, for the debug "format" argument.
	*
	* Valid key names are a single, lower or upper-case letter, i.e. "n" and "N".
	*/
	createDebug.formatters = {};

	/**
	* Selects a color for a debug namespace
	* @param {String} namespace The namespace string for the for the debug instance to be colored
	* @return {Number|String} An ANSI color code for the given namespace
	* @api private
	*/
	function selectColor(namespace) {
		let hash = 0;

		for (let i = 0; i < namespace.length; i++) {
			hash = ((hash << 5) - hash) + namespace.charCodeAt(i);
			hash |= 0; // Convert to 32bit integer
		}

		return createDebug.colors[Math.abs(hash) % createDebug.colors.length];
	}
	createDebug.selectColor = selectColor;

	/**
	* Create a debugger with the given `namespace`.
	*
	* @param {String} namespace
	* @return {Function}
	* @api public
	*/
	function createDebug(namespace) {
		let prevTime;
		let enableOverride = null;

		function debug(...args) {
			// Disabled?
			if (!debug.enabled) {
				return;
			}

			const self = debug;

			// Set `diff` timestamp
			const curr = Number(new Date());
			const ms = curr - (prevTime || curr);
			self.diff = ms;
			self.prev = prevTime;
			self.curr = curr;
			prevTime = curr;

			args[0] = createDebug.coerce(args[0]);

			if (typeof args[0] !== 'string') {
				// Anything else let's inspect with %O
				args.unshift('%O');
			}

			// Apply any `formatters` transformations
			let index = 0;
			args[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format) => {
				// If we encounter an escaped % then don't increase the array index
				if (match === '%%') {
					return '%';
				}
				index++;
				const formatter = createDebug.formatters[format];
				if (typeof formatter === 'function') {
					const val = args[index];
					match = formatter.call(self, val);

					// Now we need to remove `args[index]` since it's inlined in the `format`
					args.splice(index, 1);
					index--;
				}
				return match;
			});

			// Apply env-specific formatting (colors, etc.)
			createDebug.formatArgs.call(self, args);

			const logFn = self.log || createDebug.log;
			logFn.apply(self, args);
		}

		debug.namespace = namespace;
		debug.useColors = createDebug.useColors();
		debug.color = createDebug.selectColor(namespace);
		debug.extend = extend;
		debug.destroy = createDebug.destroy; // XXX Temporary. Will be removed in the next major release.

		Object.defineProperty(debug, 'enabled', {
			enumerable: true,
			configurable: false,
			get: () => enableOverride === null ? createDebug.enabled(namespace) : enableOverride,
			set: v => {
				enableOverride = v;
			}
		});

		// Env-specific initialization logic for debug instances
		if (typeof createDebug.init === 'function') {
			createDebug.init(debug);
		}

		return debug;
	}

	function extend(namespace, delimiter) {
		const newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);
		newDebug.log = this.log;
		return newDebug;
	}

	/**
	* Enables a debug mode by namespaces. This can include modes
	* separated by a colon and wildcards.
	*
	* @param {String} namespaces
	* @api public
	*/
	function enable(namespaces) {
		createDebug.save(namespaces);

		createDebug.names = [];
		createDebug.skips = [];

		let i;
		const split = (typeof namespaces === 'string' ? namespaces : '').split(/[\s,]+/);
		const len = split.length;

		for (i = 0; i < len; i++) {
			if (!split[i]) {
				// ignore empty strings
				continue;
			}

			namespaces = split[i].replace(/\*/g, '.*?');

			if (namespaces[0] === '-') {
				createDebug.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));
			} else {
				createDebug.names.push(new RegExp('^' + namespaces + '$'));
			}
		}
	}

	/**
	* Disable debug output.
	*
	* @return {String} namespaces
	* @api public
	*/
	function disable() {
		const namespaces = [
			...createDebug.names.map(toNamespace),
			...createDebug.skips.map(toNamespace).map(namespace => '-' + namespace)
		].join(',');
		createDebug.enable('');
		return namespaces;
	}

	/**
	* Returns true if the given mode name is enabled, false otherwise.
	*
	* @param {String} name
	* @return {Boolean}
	* @api public
	*/
	function enabled(name) {
		if (name[name.length - 1] === '*') {
			return true;
		}

		let i;
		let len;

		for (i = 0, len = createDebug.skips.length; i < len; i++) {
			if (createDebug.skips[i].test(name)) {
				return false;
			}
		}

		for (i = 0, len = createDebug.names.length; i < len; i++) {
			if (createDebug.names[i].test(name)) {
				return true;
			}
		}

		return false;
	}

	/**
	* Convert regexp to namespace
	*
	* @param {RegExp} regxep
	* @return {String} namespace
	* @api private
	*/
	function toNamespace(regexp) {
		return regexp.toString()
			.substring(2, regexp.toString().length - 2)
			.replace(/\.\*\?$/, '*');
	}

	/**
	* Coerce `val`.
	*
	* @param {Mixed} val
	* @return {Mixed}
	* @api private
	*/
	function coerce(val) {
		if (val instanceof Error) {
			return val.stack || val.message;
		}
		return val;
	}

	/**
	* XXX DO NOT USE. This is a temporary stub function.
	* XXX It WILL be removed in the next major release.
	*/
	function destroy() {
		console.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');
	}

	createDebug.enable(createDebug.load());

	return createDebug;
}

module.exports = setup;


/***/ }),

/***/ "./node_modules/engine.io-client/node_modules/ms/index.js":
/*!****************************************************************!*\
  !*** ./node_modules/engine.io-client/node_modules/ms/index.js ***!
  \****************************************************************/
/***/ ((module) => {

/**
 * Helpers.
 */

var s = 1000;
var m = s * 60;
var h = m * 60;
var d = h * 24;
var w = d * 7;
var y = d * 365.25;

/**
 * Parse or format the given `val`.
 *
 * Options:
 *
 *  - `long` verbose formatting [false]
 *
 * @param {String|Number} val
 * @param {Object} [options]
 * @throws {Error} throw an error if val is not a non-empty string or a number
 * @return {String|Number}
 * @api public
 */

module.exports = function(val, options) {
  options = options || {};
  var type = typeof val;
  if (type === 'string' && val.length > 0) {
    return parse(val);
  } else if (type === 'number' && isFinite(val)) {
    return options.long ? fmtLong(val) : fmtShort(val);
  }
  throw new Error(
    'val is not a non-empty string or a valid number. val=' +
      JSON.stringify(val)
  );
};

/**
 * Parse the given `str` and return milliseconds.
 *
 * @param {String} str
 * @return {Number}
 * @api private
 */

function parse(str) {
  str = String(str);
  if (str.length > 100) {
    return;
  }
  var match = /^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(
    str
  );
  if (!match) {
    return;
  }
  var n = parseFloat(match[1]);
  var type = (match[2] || 'ms').toLowerCase();
  switch (type) {
    case 'years':
    case 'year':
    case 'yrs':
    case 'yr':
    case 'y':
      return n * y;
    case 'weeks':
    case 'week':
    case 'w':
      return n * w;
    case 'days':
    case 'day':
    case 'd':
      return n * d;
    case 'hours':
    case 'hour':
    case 'hrs':
    case 'hr':
    case 'h':
      return n * h;
    case 'minutes':
    case 'minute':
    case 'mins':
    case 'min':
    case 'm':
      return n * m;
    case 'seconds':
    case 'second':
    case 'secs':
    case 'sec':
    case 's':
      return n * s;
    case 'milliseconds':
    case 'millisecond':
    case 'msecs':
    case 'msec':
    case 'ms':
      return n;
    default:
      return undefined;
  }
}

/**
 * Short format for `ms`.
 *
 * @param {Number} ms
 * @return {String}
 * @api private
 */

function fmtShort(ms) {
  var msAbs = Math.abs(ms);
  if (msAbs >= d) {
    return Math.round(ms / d) + 'd';
  }
  if (msAbs >= h) {
    return Math.round(ms / h) + 'h';
  }
  if (msAbs >= m) {
    return Math.round(ms / m) + 'm';
  }
  if (msAbs >= s) {
    return Math.round(ms / s) + 's';
  }
  return ms + 'ms';
}

/**
 * Long format for `ms`.
 *
 * @param {Number} ms
 * @return {String}
 * @api private
 */

function fmtLong(ms) {
  var msAbs = Math.abs(ms);
  if (msAbs >= d) {
    return plural(ms, msAbs, d, 'day');
  }
  if (msAbs >= h) {
    return plural(ms, msAbs, h, 'hour');
  }
  if (msAbs >= m) {
    return plural(ms, msAbs, m, 'minute');
  }
  if (msAbs >= s) {
    return plural(ms, msAbs, s, 'second');
  }
  return ms + ' ms';
}

/**
 * Pluralization helper.
 */

function plural(ms, msAbs, n, name) {
  var isPlural = msAbs >= n * 1.5;
  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');
}


/***/ }),

/***/ "./node_modules/engine.io-parser/lib/commons.js":
/*!******************************************************!*\
  !*** ./node_modules/engine.io-parser/lib/commons.js ***!
  \******************************************************/
/***/ ((module) => {

const PACKET_TYPES = Object.create(null); // no Map = no polyfill
PACKET_TYPES["open"] = "0";
PACKET_TYPES["close"] = "1";
PACKET_TYPES["ping"] = "2";
PACKET_TYPES["pong"] = "3";
PACKET_TYPES["message"] = "4";
PACKET_TYPES["upgrade"] = "5";
PACKET_TYPES["noop"] = "6";

const PACKET_TYPES_REVERSE = Object.create(null);
Object.keys(PACKET_TYPES).forEach(key => {
  PACKET_TYPES_REVERSE[PACKET_TYPES[key]] = key;
});

const ERROR_PACKET = { type: "error", data: "parser error" };

module.exports = {
  PACKET_TYPES,
  PACKET_TYPES_REVERSE,
  ERROR_PACKET
};


/***/ }),

/***/ "./node_modules/engine.io-parser/lib/decodePacket.browser.js":
/*!*******************************************************************!*\
  !*** ./node_modules/engine.io-parser/lib/decodePacket.browser.js ***!
  \*******************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

const { PACKET_TYPES_REVERSE, ERROR_PACKET } = __webpack_require__(/*! ./commons */ "./node_modules/engine.io-parser/lib/commons.js");

const withNativeArrayBuffer = typeof ArrayBuffer === "function";

let base64decoder;
if (withNativeArrayBuffer) {
  base64decoder = __webpack_require__(/*! base64-arraybuffer */ "./node_modules/base64-arraybuffer/lib/base64-arraybuffer.js");
}

const decodePacket = (encodedPacket, binaryType) => {
  if (typeof encodedPacket !== "string") {
    return {
      type: "message",
      data: mapBinary(encodedPacket, binaryType)
    };
  }
  const type = encodedPacket.charAt(0);
  if (type === "b") {
    return {
      type: "message",
      data: decodeBase64Packet(encodedPacket.substring(1), binaryType)
    };
  }
  const packetType = PACKET_TYPES_REVERSE[type];
  if (!packetType) {
    return ERROR_PACKET;
  }
  return encodedPacket.length > 1
    ? {
        type: PACKET_TYPES_REVERSE[type],
        data: encodedPacket.substring(1)
      }
    : {
        type: PACKET_TYPES_REVERSE[type]
      };
};

const decodeBase64Packet = (data, binaryType) => {
  if (base64decoder) {
    const decoded = base64decoder.decode(data);
    return mapBinary(decoded, binaryType);
  } else {
    return { base64: true, data }; // fallback for old browsers
  }
};

const mapBinary = (data, binaryType) => {
  switch (binaryType) {
    case "blob":
      return data instanceof ArrayBuffer ? new Blob([data]) : data;
    case "arraybuffer":
    default:
      return data; // assuming the data is already an ArrayBuffer
  }
};

module.exports = decodePacket;


/***/ }),

/***/ "./node_modules/engine.io-parser/lib/encodePacket.browser.js":
/*!*******************************************************************!*\
  !*** ./node_modules/engine.io-parser/lib/encodePacket.browser.js ***!
  \*******************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

const { PACKET_TYPES } = __webpack_require__(/*! ./commons */ "./node_modules/engine.io-parser/lib/commons.js");

const withNativeBlob =
  typeof Blob === "function" ||
  (typeof Blob !== "undefined" &&
    Object.prototype.toString.call(Blob) === "[object BlobConstructor]");
const withNativeArrayBuffer = typeof ArrayBuffer === "function";

// ArrayBuffer.isView method is not defined in IE10
const isView = obj => {
  return typeof ArrayBuffer.isView === "function"
    ? ArrayBuffer.isView(obj)
    : obj && obj.buffer instanceof ArrayBuffer;
};

const encodePacket = ({ type, data }, supportsBinary, callback) => {
  if (withNativeBlob && data instanceof Blob) {
    if (supportsBinary) {
      return callback(data);
    } else {
      return encodeBlobAsBase64(data, callback);
    }
  } else if (
    withNativeArrayBuffer &&
    (data instanceof ArrayBuffer || isView(data))
  ) {
    if (supportsBinary) {
      return callback(data instanceof ArrayBuffer ? data : data.buffer);
    } else {
      return encodeBlobAsBase64(new Blob([data]), callback);
    }
  }
  // plain string
  return callback(PACKET_TYPES[type] + (data || ""));
};

const encodeBlobAsBase64 = (data, callback) => {
  const fileReader = new FileReader();
  fileReader.onload = function() {
    const content = fileReader.result.split(",")[1];
    callback("b" + content);
  };
  return fileReader.readAsDataURL(data);
};

module.exports = encodePacket;


/***/ }),

/***/ "./node_modules/engine.io-parser/lib/index.js":
/*!****************************************************!*\
  !*** ./node_modules/engine.io-parser/lib/index.js ***!
  \****************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

const encodePacket = __webpack_require__(/*! ./encodePacket */ "./node_modules/engine.io-parser/lib/encodePacket.browser.js");
const decodePacket = __webpack_require__(/*! ./decodePacket */ "./node_modules/engine.io-parser/lib/decodePacket.browser.js");

const SEPARATOR = String.fromCharCode(30); // see https://en.wikipedia.org/wiki/Delimiter#ASCII_delimited_text

const encodePayload = (packets, callback) => {
  // some packets may be added to the array while encoding, so the initial length must be saved
  const length = packets.length;
  const encodedPackets = new Array(length);
  let count = 0;

  packets.forEach((packet, i) => {
    // force base64 encoding for binary packets
    encodePacket(packet, false, encodedPacket => {
      encodedPackets[i] = encodedPacket;
      if (++count === length) {
        callback(encodedPackets.join(SEPARATOR));
      }
    });
  });
};

const decodePayload = (encodedPayload, binaryType) => {
  const encodedPackets = encodedPayload.split(SEPARATOR);
  const packets = [];
  for (let i = 0; i < encodedPackets.length; i++) {
    const decodedPacket = decodePacket(encodedPackets[i], binaryType);
    packets.push(decodedPacket);
    if (decodedPacket.type === "error") {
      break;
    }
  }
  return packets;
};

module.exports = {
  protocol: 4,
  encodePacket,
  encodePayload,
  decodePacket,
  decodePayload
};


/***/ }),

/***/ "./node_modules/eventemitter3/index.js":
/*!*********************************************!*\
  !*** ./node_modules/eventemitter3/index.js ***!
  \*********************************************/
/***/ ((module) => {

"use strict";


var has = Object.prototype.hasOwnProperty
  , prefix = '~';

/**
 * Constructor to create a storage for our `EE` objects.
 * An `Events` instance is a plain object whose properties are event names.
 *
 * @constructor
 * @private
 */
function Events() {}

//
// We try to not inherit from `Object.prototype`. In some engines creating an
// instance in this way is faster than calling `Object.create(null)` directly.
// If `Object.create(null)` is not supported we prefix the event names with a
// character to make sure that the built-in object properties are not
// overridden or used as an attack vector.
//
if (Object.create) {
  Events.prototype = Object.create(null);

  //
  // This hack is needed because the `__proto__` property is still inherited in
  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.
  //
  if (!new Events().__proto__) prefix = false;
}

/**
 * Representation of a single event listener.
 *
 * @param {Function} fn The listener function.
 * @param {*} context The context to invoke the listener with.
 * @param {Boolean} [once=false] Specify if the listener is a one-time listener.
 * @constructor
 * @private
 */
function EE(fn, context, once) {
  this.fn = fn;
  this.context = context;
  this.once = once || false;
}

/**
 * Add a listener for a given event.
 *
 * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.
 * @param {(String|Symbol)} event The event name.
 * @param {Function} fn The listener function.
 * @param {*} context The context to invoke the listener with.
 * @param {Boolean} once Specify if the listener is a one-time listener.
 * @returns {EventEmitter}
 * @private
 */
function addListener(emitter, event, fn, context, once) {
  if (typeof fn !== 'function') {
    throw new TypeError('The listener must be a function');
  }

  var listener = new EE(fn, context || emitter, once)
    , evt = prefix ? prefix + event : event;

  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;
  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);
  else emitter._events[evt] = [emitter._events[evt], listener];

  return emitter;
}

/**
 * Clear event by name.
 *
 * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.
 * @param {(String|Symbol)} evt The Event name.
 * @private
 */
function clearEvent(emitter, evt) {
  if (--emitter._eventsCount === 0) emitter._events = new Events();
  else delete emitter._events[evt];
}

/**
 * Minimal `EventEmitter` interface that is molded against the Node.js
 * `EventEmitter` interface.
 *
 * @constructor
 * @public
 */
function EventEmitter() {
  this._events = new Events();
  this._eventsCount = 0;
}

/**
 * Return an array listing the events for which the emitter has registered
 * listeners.
 *
 * @returns {Array}
 * @public
 */
EventEmitter.prototype.eventNames = function eventNames() {
  var names = []
    , events
    , name;

  if (this._eventsCount === 0) return names;

  for (name in (events = this._events)) {
    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);
  }

  if (Object.getOwnPropertySymbols) {
    return names.concat(Object.getOwnPropertySymbols(events));
  }

  return names;
};

/**
 * Return the listeners registered for a given event.
 *
 * @param {(String|Symbol)} event The event name.
 * @returns {Array} The registered listeners.
 * @public
 */
EventEmitter.prototype.listeners = function listeners(event) {
  var evt = prefix ? prefix + event : event
    , handlers = this._events[evt];

  if (!handlers) return [];
  if (handlers.fn) return [handlers.fn];

  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {
    ee[i] = handlers[i].fn;
  }

  return ee;
};

/**
 * Return the number of listeners listening to a given event.
 *
 * @param {(String|Symbol)} event The event name.
 * @returns {Number} The number of listeners.
 * @public
 */
EventEmitter.prototype.listenerCount = function listenerCount(event) {
  var evt = prefix ? prefix + event : event
    , listeners = this._events[evt];

  if (!listeners) return 0;
  if (listeners.fn) return 1;
  return listeners.length;
};

/**
 * Calls each of the listeners registered for a given event.
 *
 * @param {(String|Symbol)} event The event name.
 * @returns {Boolean} `true` if the event had listeners, else `false`.
 * @public
 */
EventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {
  var evt = prefix ? prefix + event : event;

  if (!this._events[evt]) return false;

  var listeners = this._events[evt]
    , len = arguments.length
    , args
    , i;

  if (listeners.fn) {
    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);

    switch (len) {
      case 1: return listeners.fn.call(listeners.context), true;
      case 2: return listeners.fn.call(listeners.context, a1), true;
      case 3: return listeners.fn.call(listeners.context, a1, a2), true;
      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;
      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;
      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;
    }

    for (i = 1, args = new Array(len -1); i < len; i++) {
      args[i - 1] = arguments[i];
    }

    listeners.fn.apply(listeners.context, args);
  } else {
    var length = listeners.length
      , j;

    for (i = 0; i < length; i++) {
      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);

      switch (len) {
        case 1: listeners[i].fn.call(listeners[i].context); break;
        case 2: listeners[i].fn.call(listeners[i].context, a1); break;
        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;
        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;
        default:
          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {
            args[j - 1] = arguments[j];
          }

          listeners[i].fn.apply(listeners[i].context, args);
      }
    }
  }

  return true;
};

/**
 * Add a listener for a given event.
 *
 * @param {(String|Symbol)} event The event name.
 * @param {Function} fn The listener function.
 * @param {*} [context=this] The context to invoke the listener with.
 * @returns {EventEmitter} `this`.
 * @public
 */
EventEmitter.prototype.on = function on(event, fn, context) {
  return addListener(this, event, fn, context, false);
};

/**
 * Add a one-time listener for a given event.
 *
 * @param {(String|Symbol)} event The event name.
 * @param {Function} fn The listener function.
 * @param {*} [context=this] The context to invoke the listener with.
 * @returns {EventEmitter} `this`.
 * @public
 */
EventEmitter.prototype.once = function once(event, fn, context) {
  return addListener(this, event, fn, context, true);
};

/**
 * Remove the listeners of a given event.
 *
 * @param {(String|Symbol)} event The event name.
 * @param {Function} fn Only remove the listeners that match this function.
 * @param {*} context Only remove the listeners that have this context.
 * @param {Boolean} once Only remove one-time listeners.
 * @returns {EventEmitter} `this`.
 * @public
 */
EventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {
  var evt = prefix ? prefix + event : event;

  if (!this._events[evt]) return this;
  if (!fn) {
    clearEvent(this, evt);
    return this;
  }

  var listeners = this._events[evt];

  if (listeners.fn) {
    if (
      listeners.fn === fn &&
      (!once || listeners.once) &&
      (!context || listeners.context === context)
    ) {
      clearEvent(this, evt);
    }
  } else {
    for (var i = 0, events = [], length = listeners.length; i < length; i++) {
      if (
        listeners[i].fn !== fn ||
        (once && !listeners[i].once) ||
        (context && listeners[i].context !== context)
      ) {
        events.push(listeners[i]);
      }
    }

    //
    // Reset the array, or remove it completely if we have no more listeners.
    //
    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;
    else clearEvent(this, evt);
  }

  return this;
};

/**
 * Remove all listeners, or those of the specified event.
 *
 * @param {(String|Symbol)} [event] The event name.
 * @returns {EventEmitter} `this`.
 * @public
 */
EventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {
  var evt;

  if (event) {
    evt = prefix ? prefix + event : event;
    if (this._events[evt]) clearEvent(this, evt);
  } else {
    this._events = new Events();
    this._eventsCount = 0;
  }

  return this;
};

//
// Alias methods names because people roll like that.
//
EventEmitter.prototype.off = EventEmitter.prototype.removeListener;
EventEmitter.prototype.addListener = EventEmitter.prototype.on;

//
// Expose the prefix.
//
EventEmitter.prefixed = prefix;

//
// Allow `EventEmitter` to be imported as module namespace.
//
EventEmitter.EventEmitter = EventEmitter;

//
// Expose the module.
//
if (true) {
  module.exports = EventEmitter;
}


/***/ }),

/***/ "./node_modules/has-cors/index.js":
/*!****************************************!*\
  !*** ./node_modules/has-cors/index.js ***!
  \****************************************/
/***/ ((module) => {


/**
 * Module exports.
 *
 * Logic borrowed from Modernizr:
 *
 *   - https://github.com/Modernizr/Modernizr/blob/master/feature-detects/cors.js
 */

try {
  module.exports = typeof XMLHttpRequest !== 'undefined' &&
    'withCredentials' in new XMLHttpRequest();
} catch (err) {
  // if XMLHttp support is disabled in IE then it will throw
  // when trying to create
  module.exports = false;
}


/***/ }),

/***/ "./node_modules/parseqs/index.js":
/*!***************************************!*\
  !*** ./node_modules/parseqs/index.js ***!
  \***************************************/
/***/ ((__unused_webpack_module, exports) => {

/**
 * Compiles a querystring
 * Returns string representation of the object
 *
 * @param {Object}
 * @api private
 */

exports.encode = function (obj) {
  var str = '';

  for (var i in obj) {
    if (obj.hasOwnProperty(i)) {
      if (str.length) str += '&';
      str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);
    }
  }

  return str;
};

/**
 * Parses a simple querystring into an object
 *
 * @param {String} qs
 * @api private
 */

exports.decode = function(qs){
  var qry = {};
  var pairs = qs.split('&');
  for (var i = 0, l = pairs.length; i < l; i++) {
    var pair = pairs[i].split('=');
    qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);
  }
  return qry;
};


/***/ }),

/***/ "./node_modules/parseuri/index.js":
/*!****************************************!*\
  !*** ./node_modules/parseuri/index.js ***!
  \****************************************/
/***/ ((module) => {

/**
 * Parses an URI
 *
 * @author Steven Levithan <stevenlevithan.com> (MIT license)
 * @api private
 */

var re = /^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;

var parts = [
    'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'
];

module.exports = function parseuri(str) {
    var src = str,
        b = str.indexOf('['),
        e = str.indexOf(']');

    if (b != -1 && e != -1) {
        str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);
    }

    var m = re.exec(str || ''),
        uri = {},
        i = 14;

    while (i--) {
        uri[parts[i]] = m[i] || '';
    }

    if (b != -1 && e != -1) {
        uri.source = src;
        uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');
        uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');
        uri.ipv6uri = true;
    }

    uri.pathNames = pathNames(uri, uri['path']);
    uri.queryKey = queryKey(uri, uri['query']);

    return uri;
};

function pathNames(obj, path) {
    var regx = /\/{2,9}/g,
        names = path.replace(regx, "/").split("/");

    if (path.substr(0, 1) == '/' || path.length === 0) {
        names.splice(0, 1);
    }
    if (path.substr(path.length - 1, 1) == '/') {
        names.splice(names.length - 1, 1);
    }

    return names;
}

function queryKey(uri, query) {
    var data = {};

    query.replace(/(?:^|&)([^&=]*)=?([^&]*)/g, function ($0, $1, $2) {
        if ($1) {
            data[$1] = $2;
        }
    });

    return data;
}


/***/ }),

/***/ "./node_modules/peerjs/dist/peerjs.min.js":
/*!************************************************!*\
  !*** ./node_modules/peerjs/dist/peerjs.min.js ***!
  \************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u=undefined;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if( true&&"string"==typeof t)return __webpack_require__("./node_modules/peerjs/dist sync recursive")(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]); true?module.exports=l:0}if(parcelRequire=f,i)throw i;return f}({"EgBh":[function(require,module,exports) {
var e={};e.useBlobBuilder=function(){try{return new Blob([]),!1}catch(e){return!0}}(),e.useArrayBufferView=!e.useBlobBuilder&&function(){try{return 0===new Blob([new Uint8Array([])]).size}catch(e){return!0}}(),module.exports.binaryFeatures=e;var r=module.exports.BlobBuilder;function t(){this._pieces=[],this._parts=[]}"undefined"!=typeof window&&(r=module.exports.BlobBuilder=window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder||window.BlobBuilder),t.prototype.append=function(e){"number"==typeof e?this._pieces.push(e):(this.flush(),this._parts.push(e))},t.prototype.flush=function(){if(this._pieces.length>0){var r=new Uint8Array(this._pieces);e.useArrayBufferView||(r=r.buffer),this._parts.push(r),this._pieces=[]}},t.prototype.getBuffer=function(){if(this.flush(),e.useBlobBuilder){for(var t=new r,i=0,u=this._parts.length;i<u;i++)t.append(this._parts[i]);return t.getBlob()}return new Blob(this._parts)},module.exports.BufferBuilder=t;
},{}],"kdPp":[function(require,module,exports) {
var t=require("./bufferbuilder").BufferBuilder,e=require("./bufferbuilder").binaryFeatures,i={unpack:function(t){return new r(t).unpack()},pack:function(t){var e=new n;return e.pack(t),e.getBuffer()}};function r(t){this.index=0,this.dataBuffer=t,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}function n(){this.bufferBuilder=new t}function u(t){var e=t.charCodeAt(0);return e<=2047?"00":e<=65535?"000":e<=2097151?"0000":e<=67108863?"00000":"000000"}function a(t){return t.length>600?new Blob([t]).size:t.replace(/[^\u0000-\u007F]/g,u).length}module.exports=i,r.prototype.unpack=function(){var t,e=this.unpack_uint8();if(e<128)return e;if((224^e)<32)return(224^e)-32;if((t=160^e)<=15)return this.unpack_raw(t);if((t=176^e)<=15)return this.unpack_string(t);if((t=144^e)<=15)return this.unpack_array(t);if((t=128^e)<=15)return this.unpack_map(t);switch(e){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:case 213:case 214:case 215:return;case 216:return t=this.unpack_uint16(),this.unpack_string(t);case 217:return t=this.unpack_uint32(),this.unpack_string(t);case 218:return t=this.unpack_uint16(),this.unpack_raw(t);case 219:return t=this.unpack_uint32(),this.unpack_raw(t);case 220:return t=this.unpack_uint16(),this.unpack_array(t);case 221:return t=this.unpack_uint32(),this.unpack_array(t);case 222:return t=this.unpack_uint16(),this.unpack_map(t);case 223:return t=this.unpack_uint32(),this.unpack_map(t)}},r.prototype.unpack_uint8=function(){var t=255&this.dataView[this.index];return this.index++,t},r.prototype.unpack_uint16=function(){var t=this.read(2),e=256*(255&t[0])+(255&t[1]);return this.index+=2,e},r.prototype.unpack_uint32=function(){var t=this.read(4),e=256*(256*(256*t[0]+t[1])+t[2])+t[3];return this.index+=4,e},r.prototype.unpack_uint64=function(){var t=this.read(8),e=256*(256*(256*(256*(256*(256*(256*t[0]+t[1])+t[2])+t[3])+t[4])+t[5])+t[6])+t[7];return this.index+=8,e},r.prototype.unpack_int8=function(){var t=this.unpack_uint8();return t<128?t:t-256},r.prototype.unpack_int16=function(){var t=this.unpack_uint16();return t<32768?t:t-65536},r.prototype.unpack_int32=function(){var t=this.unpack_uint32();return t<Math.pow(2,31)?t:t-Math.pow(2,32)},r.prototype.unpack_int64=function(){var t=this.unpack_uint64();return t<Math.pow(2,63)?t:t-Math.pow(2,64)},r.prototype.unpack_raw=function(t){if(this.length<this.index+t)throw new Error("BinaryPackFailure: index is out of range "+this.index+" "+t+" "+this.length);var e=this.dataBuffer.slice(this.index,this.index+t);return this.index+=t,e},r.prototype.unpack_string=function(t){for(var e,i,r=this.read(t),n=0,u="";n<t;)(e=r[n])<128?(u+=String.fromCharCode(e),n++):(192^e)<32?(i=(192^e)<<6|63&r[n+1],u+=String.fromCharCode(i),n+=2):(i=(15&e)<<12|(63&r[n+1])<<6|63&r[n+2],u+=String.fromCharCode(i),n+=3);return this.index+=t,u},r.prototype.unpack_array=function(t){for(var e=new Array(t),i=0;i<t;i++)e[i]=this.unpack();return e},r.prototype.unpack_map=function(t){for(var e={},i=0;i<t;i++){var r=this.unpack(),n=this.unpack();e[r]=n}return e},r.prototype.unpack_float=function(){var t=this.unpack_uint32(),e=(t>>23&255)-127;return(0===t>>31?1:-1)*(8388607&t|8388608)*Math.pow(2,e-23)},r.prototype.unpack_double=function(){var t=this.unpack_uint32(),e=this.unpack_uint32(),i=(t>>20&2047)-1023;return(0===t>>31?1:-1)*((1048575&t|1048576)*Math.pow(2,i-20)+e*Math.pow(2,i-52))},r.prototype.read=function(t){var e=this.index;if(e+t<=this.length)return this.dataView.subarray(e,e+t);throw new Error("BinaryPackFailure: read index out of range")},n.prototype.getBuffer=function(){return this.bufferBuilder.getBuffer()},n.prototype.pack=function(t){var i=typeof t;if("string"===i)this.pack_string(t);else if("number"===i)Math.floor(t)===t?this.pack_integer(t):this.pack_double(t);else if("boolean"===i)!0===t?this.bufferBuilder.append(195):!1===t&&this.bufferBuilder.append(194);else if("undefined"===i)this.bufferBuilder.append(192);else{if("object"!==i)throw new Error('Type "'+i+'" not yet supported');if(null===t)this.bufferBuilder.append(192);else{var r=t.constructor;if(r==Array)this.pack_array(t);else if(r==Blob||r==File||t instanceof Blob||t instanceof File)this.pack_bin(t);else if(r==ArrayBuffer)e.useArrayBufferView?this.pack_bin(new Uint8Array(t)):this.pack_bin(t);else if("BYTES_PER_ELEMENT"in t)e.useArrayBufferView?this.pack_bin(new Uint8Array(t.buffer)):this.pack_bin(t.buffer);else if(r==Object||r.toString().startsWith("class"))this.pack_object(t);else if(r==Date)this.pack_string(t.toString());else{if("function"!=typeof t.toBinaryPack)throw new Error('Type "'+r.toString()+'" not yet supported');this.bufferBuilder.append(t.toBinaryPack())}}}this.bufferBuilder.flush()},n.prototype.pack_bin=function(t){var e=t.length||t.byteLength||t.size;if(e<=15)this.pack_uint8(160+e);else if(e<=65535)this.bufferBuilder.append(218),this.pack_uint16(e);else{if(!(e<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(219),this.pack_uint32(e)}this.bufferBuilder.append(t)},n.prototype.pack_string=function(t){var e=a(t);if(e<=15)this.pack_uint8(176+e);else if(e<=65535)this.bufferBuilder.append(216),this.pack_uint16(e);else{if(!(e<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(217),this.pack_uint32(e)}this.bufferBuilder.append(t)},n.prototype.pack_array=function(t){var e=t.length;if(e<=15)this.pack_uint8(144+e);else if(e<=65535)this.bufferBuilder.append(220),this.pack_uint16(e);else{if(!(e<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(221),this.pack_uint32(e)}for(var i=0;i<e;i++)this.pack(t[i])},n.prototype.pack_integer=function(t){if(t>=-32&&t<=127)this.bufferBuilder.append(255&t);else if(t>=0&&t<=255)this.bufferBuilder.append(204),this.pack_uint8(t);else if(t>=-128&&t<=127)this.bufferBuilder.append(208),this.pack_int8(t);else if(t>=0&&t<=65535)this.bufferBuilder.append(205),this.pack_uint16(t);else if(t>=-32768&&t<=32767)this.bufferBuilder.append(209),this.pack_int16(t);else if(t>=0&&t<=4294967295)this.bufferBuilder.append(206),this.pack_uint32(t);else if(t>=-2147483648&&t<=2147483647)this.bufferBuilder.append(210),this.pack_int32(t);else if(t>=-0x8000000000000000&&t<=0x8000000000000000)this.bufferBuilder.append(211),this.pack_int64(t);else{if(!(t>=0&&t<=0x10000000000000000))throw new Error("Invalid integer");this.bufferBuilder.append(207),this.pack_uint64(t)}},n.prototype.pack_double=function(t){var e=0;t<0&&(e=1,t=-t);var i=Math.floor(Math.log(t)/Math.LN2),r=t/Math.pow(2,i)-1,n=Math.floor(r*Math.pow(2,52)),u=Math.pow(2,32),a=e<<31|i+1023<<20|n/u&1048575,p=n%u;this.bufferBuilder.append(203),this.pack_int32(a),this.pack_int32(p)},n.prototype.pack_object=function(t){var e=Object.keys(t).length;if(e<=15)this.pack_uint8(128+e);else if(e<=65535)this.bufferBuilder.append(222),this.pack_uint16(e);else{if(!(e<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(223),this.pack_uint32(e)}for(var i in t)t.hasOwnProperty(i)&&(this.pack(i),this.pack(t[i]))},n.prototype.pack_uint8=function(t){this.bufferBuilder.append(t)},n.prototype.pack_uint16=function(t){this.bufferBuilder.append(t>>8),this.bufferBuilder.append(255&t)},n.prototype.pack_uint32=function(t){var e=4294967295&t;this.bufferBuilder.append((4278190080&e)>>>24),this.bufferBuilder.append((16711680&e)>>>16),this.bufferBuilder.append((65280&e)>>>8),this.bufferBuilder.append(255&e)},n.prototype.pack_uint64=function(t){var e=t/Math.pow(2,32),i=t%Math.pow(2,32);this.bufferBuilder.append((4278190080&e)>>>24),this.bufferBuilder.append((16711680&e)>>>16),this.bufferBuilder.append((65280&e)>>>8),this.bufferBuilder.append(255&e),this.bufferBuilder.append((4278190080&i)>>>24),this.bufferBuilder.append((16711680&i)>>>16),this.bufferBuilder.append((65280&i)>>>8),this.bufferBuilder.append(255&i)},n.prototype.pack_int8=function(t){this.bufferBuilder.append(255&t)},n.prototype.pack_int16=function(t){this.bufferBuilder.append((65280&t)>>8),this.bufferBuilder.append(255&t)},n.prototype.pack_int32=function(t){this.bufferBuilder.append(t>>>24&255),this.bufferBuilder.append((16711680&t)>>>16),this.bufferBuilder.append((65280&t)>>>8),this.bufferBuilder.append(255&t)},n.prototype.pack_int64=function(t){var e=Math.floor(t/Math.pow(2,32)),i=t%Math.pow(2,32);this.bufferBuilder.append((4278190080&e)>>>24),this.bufferBuilder.append((16711680&e)>>>16),this.bufferBuilder.append((65280&e)>>>8),this.bufferBuilder.append(255&e),this.bufferBuilder.append((4278190080&i)>>>24),this.bufferBuilder.append((16711680&i)>>>16),this.bufferBuilder.append((65280&i)>>>8),this.bufferBuilder.append(255&i)};
},{"./bufferbuilder":"EgBh"}],"iSxC":[function(require,module,exports) {
"use strict";function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.extractVersion=o,exports.wrapPeerConnectionEvent=i,exports.disableLog=s,exports.disableWarnings=a,exports.log=p,exports.deprecated=u,exports.detectBrowser=c,exports.compactObject=f,exports.walkStats=l,exports.filterStats=v;var n=!0,r=!0;function o(e,t,n){var r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function i(e,t,n){if(e.RTCPeerConnection){var r=e.RTCPeerConnection.prototype,o=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return o.apply(this,arguments);var i=function(e){var t=n(e);t&&(r.handleEvent?r.handleEvent(t):r(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(r,i),o.apply(this,[e,i])};var i=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[t])return i.apply(this,arguments);if(!this._eventMap[t].has(n))return i.apply(this,arguments);var r=this._eventMap[t].get(n);return this._eventMap[t].delete(n),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,i.apply(this,[e,r])},Object.defineProperty(r,"on"+t,{get:function(){return this["_on"+t]},set:function(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}}function s(e){return"boolean"!=typeof e?new Error("Argument type: "+t(e)+". Please use a boolean."):(n=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function a(e){return"boolean"!=typeof e?new Error("Argument type: "+t(e)+". Please use a boolean."):(r=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function p(){if("object"===("undefined"==typeof window?"undefined":t(window))){if(n)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function u(e,t){r&&console.warn(e+" is deprecated, please use "+t+" instead.")}function c(e){var t={browser:null,version:null};if(void 0===e||!e.navigator)return t.browser="Not a browser.",t;var{navigator:n}=e;if(n.mozGetUserMedia)t.browser="firefox",t.version=o(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)t.browser="chrome",t.version=o(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(n.mediaDevices&&n.userAgent.match(/Edge\/(\d+).(\d+)$/))t.browser="edge",t.version=o(n.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=o(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}function d(e){return"[object Object]"===Object.prototype.toString.call(e)}function f(t){return d(t)?Object.keys(t).reduce(function(n,r){var o=d(t[r]),i=o?f(t[r]):t[r],s=o&&!Object.keys(i).length;return void 0===i||s?n:Object.assign(n,e({},r,i))},{}):t}function l(e,t,n){t&&!n.has(t.id)&&(n.set(t.id,t),Object.keys(t).forEach(function(r){r.endsWith("Id")?l(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach(function(t){l(e,e.get(t),n)})}))}function v(e,t,n){var r=n?"outbound-rtp":"inbound-rtp",o=new Map;if(null===t)return o;var i=[];return e.forEach(function(e){"track"===e.type&&e.trackIdentifier===t.id&&i.push(e)}),i.forEach(function(t){e.forEach(function(n){n.type===r&&n.trackId===t.id&&l(e,n,o)})}),o}
},{}],"s6SN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimGetUserMedia=i;var e=t(require("../utils.js"));function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function t(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r();if(t&&t.has(e))return t.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=n?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(o,i,a):o[i]=e[i]}return o.default=e,t&&t.set(e,o),o}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n=e.log;function i(e,r){var t=e&&e.navigator;if(t.mediaDevices){var i=function(e){if("object"!==o(e)||e.mandatory||e.optional)return e;var r={};return Object.keys(e).forEach(function(t){if("require"!==t&&"advanced"!==t&&"mediaSource"!==t){var n="object"===o(e[t])?e[t]:{ideal:e[t]};void 0!==n.exact&&"number"==typeof n.exact&&(n.min=n.max=n.exact);var i=function(e,r){return e?e+r.charAt(0).toUpperCase()+r.slice(1):"deviceId"===r?"sourceId":r};if(void 0!==n.ideal){r.optional=r.optional||[];var a={};"number"==typeof n.ideal?(a[i("min",t)]=n.ideal,r.optional.push(a),(a={})[i("max",t)]=n.ideal,r.optional.push(a)):(a[i("",t)]=n.ideal,r.optional.push(a))}void 0!==n.exact&&"number"!=typeof n.exact?(r.mandatory=r.mandatory||{},r.mandatory[i("",t)]=n.exact):["min","max"].forEach(function(e){void 0!==n[e]&&(r.mandatory=r.mandatory||{},r.mandatory[i(e,t)]=n[e])})}}),e.advanced&&(r.optional=(r.optional||[]).concat(e.advanced)),r},a=function(e,a){if(r.version>=61)return a(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"===o(e.audio)){var c=function(e,r,t){r in e&&!(t in e)&&(e[t]=e[r],delete e[r])};c((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),c(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=i(e.audio)}if(e&&"object"===o(e.video)){var d=e.video.facingMode;d=d&&("object"===o(d)?d:{ideal:d});var u,s=r.version<66;if(d&&("user"===d.exact||"environment"===d.exact||"user"===d.ideal||"environment"===d.ideal)&&(!t.mediaDevices.getSupportedConstraints||!t.mediaDevices.getSupportedConstraints().facingMode||s))if(delete e.video.facingMode,"environment"===d.exact||"environment"===d.ideal?u=["back","rear"]:"user"!==d.exact&&"user"!==d.ideal||(u=["front"]),u)return t.mediaDevices.enumerateDevices().then(function(r){var t=(r=r.filter(function(e){return"videoinput"===e.kind})).find(function(e){return u.some(function(r){return e.label.toLowerCase().includes(r)})});return!t&&r.length&&u.includes("back")&&(t=r[r.length-1]),t&&(e.video.deviceId=d.exact?{exact:t.deviceId}:{ideal:t.deviceId}),e.video=i(e.video),n("chrome: "+JSON.stringify(e)),a(e)});e.video=i(e.video)}return n("chrome: "+JSON.stringify(e)),a(e)},c=function(e){return r.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};if(t.getUserMedia=function(e,r,o){a(e,function(e){t.webkitGetUserMedia(e,r,function(e){o&&o(c(e))})})}.bind(t),t.mediaDevices.getUserMedia){var d=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return a(e,function(e){return d(e).then(function(r){if(e.audio&&!r.getAudioTracks().length||e.video&&!r.getVideoTracks().length)throw r.getTracks().forEach(function(e){e.stop()}),new DOMException("","NotFoundError");return r},function(e){return Promise.reject(c(e))})})}}}}
},{"../utils.js":"iSxC"}],"VHa8":[function(require,module,exports) {
"use strict";function e(e,i){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof i?e.navigator.mediaDevices.getDisplayMedia=function(a){return i(a).then(function(i){var t=a.video&&a.video.width,o=a.video&&a.video.height,d=a.video&&a.video.frameRate;return a.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:i,maxFrameRate:d||3}},t&&(a.video.mandatory.maxWidth=t),o&&(a.video.mandatory.maxHeight=o),e.navigator.mediaDevices.getUserMedia(a)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimGetDisplayMedia=e;
},{}],"uI5X":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimMediaStream=a,exports.shimOnTrack=c,exports.shimGetSendersWithDtmf=p,exports.shimGetStats=d,exports.shimSenderReceiverGetStats=h,exports.shimAddTrackRemoveTrackWithNative=f,exports.shimAddTrackRemoveTrack=m,exports.shimPeerConnection=u,exports.fixNegotiationNeeded=l,Object.defineProperty(exports,"shimGetUserMedia",{enumerable:!0,get:function(){return t.shimGetUserMedia}}),Object.defineProperty(exports,"shimGetDisplayMedia",{enumerable:!0,get:function(){return r.shimGetDisplayMedia}});var e=i(require("../utils.js")),t=require("./getusermedia"),r=require("./getdisplaymedia");function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=n();if(t&&t.has(e))return t.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var s=i?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function c(t){if("object"!==s(t)||!t.RTCPeerConnection||"ontrack"in t.RTCPeerConnection.prototype)e.wrapPeerConnectionEvent(t,"track",function(e){return e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e});else{Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});var r=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;return this._ontrackpoly||(this._ontrackpoly=function(r){r.stream.addEventListener("addtrack",function(n){var i;i=t.RTCPeerConnection.prototype.getReceivers?e.getReceivers().find(function(e){return e.track&&e.track.id===n.track.id}):{track:n.track};var o=new Event("track");o.track=n.track,o.receiver=i,o.transceiver={receiver:i},o.streams=[r.stream],e.dispatchEvent(o)}),r.stream.getTracks().forEach(function(n){var i;i=t.RTCPeerConnection.prototype.getReceivers?e.getReceivers().find(function(e){return e.track&&e.track.id===n.id}):{track:n};var o=new Event("track");o.track=n,o.receiver=i,o.transceiver={receiver:i},o.streams=[r.stream],e.dispatchEvent(o)})},this.addEventListener("addstream",this._ontrackpoly)),r.apply(this,arguments)}}}function p(e){if("object"===s(e)&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var r=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){var i=r.apply(this,arguments);return i||(i=t(this,e),this._senders.push(i)),i};var n=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){n.apply(this,arguments);var t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}var i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var r=this;this._senders=this._senders||[],i.apply(this,[e]),e.getTracks().forEach(function(e){r._senders.push(t(r,e))})};var o=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._senders=this._senders||[],o.apply(this,[e]),e.getTracks().forEach(function(e){var r=t._senders.find(function(t){return t.track===e});r&&t._senders.splice(t._senders.indexOf(r),1)})}}else if("object"===s(e)&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var a=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=a.apply(this,[]);return t.forEach(function(t){return t._pc=e}),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function d(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=this,[r,n,i]=arguments;if(arguments.length>0&&"function"==typeof r)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof r))return t.apply(this,[]);var o=function(e){var t={};return e.result().forEach(function(e){var r={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach(function(t){r[t]=e.stat(t)}),t[r.id]=r}),t},s=function(e){return new Map(Object.keys(e).map(function(t){return[t,e[t]]}))};if(arguments.length>=2){return t.apply(this,[function(e){n(s(o(e)))},r])}return new Promise(function(r,n){t.apply(e,[function(e){r(s(o(e)))},n])}).then(n,i)}}}function h(t){if("object"===s(t)&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver){if(!("getStats"in t.RTCRtpSender.prototype)){var r=t.RTCPeerConnection.prototype.getSenders;r&&(t.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=r.apply(this,[]);return t.forEach(function(t){return t._pc=e}),t});var n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),t.RTCRtpSender.prototype.getStats=function(){var t=this;return this._pc.getStats().then(function(r){return e.filterStats(r,t.track,!0)})}}if(!("getStats"in t.RTCRtpReceiver.prototype)){var i=t.RTCPeerConnection.prototype.getReceivers;i&&(t.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=i.apply(this,[]);return t.forEach(function(t){return t._pc=e}),t}),e.wrapPeerConnectionEvent(t,"track",function(e){return e.receiver._pc=e.srcElement,e}),t.RTCRtpReceiver.prototype.getStats=function(){var t=this;return this._pc.getStats().then(function(r){return e.filterStats(r,t.track,!1)})}}if("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype){var o=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){var e,r,n,i=arguments[0];return this.getSenders().forEach(function(t){t.track===i&&(e?n=!0:e=t)}),this.getReceivers().forEach(function(e){return e.track===i&&(r?n=!0:r=e),e.track===i}),n||e&&r?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):e?e.getStats():r?r.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return o.apply(this,arguments)}}}}function f(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(function(t){return e._shimmedLocalStreams[t][0]})};var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){if(!r)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var n=t.apply(this,arguments);return this._shimmedLocalStreams[r.id]?-1===this._shimmedLocalStreams[r.id].indexOf(n)&&this._shimmedLocalStreams[r.id].push(n):this._shimmedLocalStreams[r.id]=[r,n],n};var r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach(function(e){if(t.getSenders().find(function(t){return t.track===e}))throw new DOMException("Track already exists.","InvalidAccessError")});var n=this.getSenders();r.apply(this,arguments);var i=this.getSenders().filter(function(e){return-1===n.indexOf(e)});this._shimmedLocalStreams[e.id]=[e].concat(i)};var n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],n.apply(this,arguments)};var i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach(function(r){var n=t._shimmedLocalStreams[r].indexOf(e);-1!==n&&t._shimmedLocalStreams[r].splice(n,1),1===t._shimmedLocalStreams[r].length&&delete t._shimmedLocalStreams[r]}),i.apply(this,arguments)}}function m(e,t){if(e.RTCPeerConnection){if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return f(e);var r=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,t=r.apply(this);return this._reverseStreams=this._reverseStreams||{},t.map(function(t){return e._reverseStreams[t.id]})};var n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var r=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach(function(e){if(r.getSenders().find(function(t){return t.track===e}))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[t.id]){var i=new e.MediaStream(t.getTracks());this._streams[t.id]=i,this._reverseStreams[i.id]=t,t=i}n.apply(this,[t])};var i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,r){var n=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var i=[].slice.call(arguments,1);if(1!==i.length||!i[0].getTracks().find(function(e){return e===t}))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(function(e){return e.track===t}))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var o=this._streams[r.id];if(o)o.addTrack(t),Promise.resolve().then(function(){n.dispatchEvent(new Event("negotiationneeded"))});else{var s=new e.MediaStream([t]);this._streams[r.id]=s,this._reverseStreams[s.id]=r,this.addStream(s)}return this.getSenders().find(function(e){return e.track===t})},["createOffer","createAnswer"].forEach(function(t){var r=e.RTCPeerConnection.prototype[t],n=o({},t,function(){var e=this,t=arguments;return arguments.length&&"function"==typeof arguments[0]?r.apply(this,[function(r){var n=c(e,r);t[0].apply(null,[n])},function(e){t[1]&&t[1].apply(null,e)},arguments[2]]):r.apply(this,arguments).then(function(t){return c(e,t)})});e.RTCPeerConnection.prototype[t]=n[t]});var s=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=(e=this,t=arguments[0],r=t.sdp,Object.keys(e._reverseStreams||[]).forEach(function(t){var n=e._reverseStreams[t],i=e._streams[n.id];r=r.replace(new RegExp(n.id,"g"),i.id)}),new RTCSessionDescription({type:t.type,sdp:r})),s.apply(this,arguments)):s.apply(this,arguments);var e,t,r};var a=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=a.get.apply(this);return""===e.type?e:c(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t,r=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(e._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{},Object.keys(this._streams).forEach(function(n){r._streams[n].getTracks().find(function(t){return e.track===t})&&(t=r._streams[n])}),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function c(e,t){var r=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(function(t){var n=e._reverseStreams[t],i=e._streams[n.id];r=r.replace(new RegExp(i.id,"g"),n.id)}),new RTCSessionDescription({type:t.type,sdp:r})}}function u(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var r=e.RTCPeerConnection.prototype[t],n=o({},t,function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)});e.RTCPeerConnection.prototype[t]=n[t]})}function l(t,r){e.wrapPeerConnectionEvent(t,"negotiationneeded",function(e){var t=e.target;if(!(r.version<72||t.getConfiguration&&"plan-b"===t.getConfiguration().sdpSemantics)||"stable"===t.signalingState)return e})}
},{"../utils.js":"iSxC","./getusermedia":"s6SN","./getdisplaymedia":"VHa8"}],"NZ1C":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.filterIceServers=n;var r=t(require("../utils"));function e(){if("function"!=typeof WeakMap)return null;var r=new WeakMap;return e=function(){return r},r}function t(r){if(r&&r.__esModule)return r;if(null===r||"object"!=typeof r&&"function"!=typeof r)return{default:r};var t=e();if(t&&t.has(r))return t.get(r);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in r)if(Object.prototype.hasOwnProperty.call(r,i)){var f=u?Object.getOwnPropertyDescriptor(r,i):null;f&&(f.get||f.set)?Object.defineProperty(n,i,f):n[i]=r[i]}return n.default=r,t&&t.set(r,n),n}function n(e,t){var n=!1;return(e=JSON.parse(JSON.stringify(e))).filter(function(e){if(e&&(e.urls||e.url)){var t=e.urls||e.url;e.url&&!e.urls&&r.deprecated("RTCIceServer.url","RTCIceServer.urls");var u="string"==typeof t;return u&&(t=[t]),t=t.filter(function(r){if(0===r.indexOf("stun:"))return!1;var e=r.startsWith("turn")&&!r.startsWith("turn:[")&&r.includes("transport=udp");return e&&!n?(n=!0,!0):e&&!n}),delete e.url,e.urls=u?t[0]:t,!!t.length}})}
},{"../utils":"iSxC"}],"YHvh":[function(require,module,exports) {
"use strict";var r={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};r.localCName=r.generateIdentifier(),r.splitLines=function(r){return r.trim().split("\n").map(function(r){return r.trim()})},r.splitSections=function(r){return r.split("\nm=").map(function(r,e){return(e>0?"m="+r:r).trim()+"\r\n"})},r.getDescription=function(e){var t=r.splitSections(e);return t&&t[0]},r.getMediaSections=function(e){var t=r.splitSections(e);return t.shift(),t},r.matchPrefix=function(e,t){return r.splitLines(e).filter(function(r){return 0===r.indexOf(t)})},r.parseCandidate=function(r){for(var e,t={foundation:(e=0===r.indexOf("a=candidate:")?r.substring(12).split(" "):r.substring(10).split(" "))[0],component:parseInt(e[1],10),protocol:e[2].toLowerCase(),priority:parseInt(e[3],10),ip:e[4],address:e[4],port:parseInt(e[5],10),type:e[7]},a=8;a<e.length;a+=2)switch(e[a]){case"raddr":t.relatedAddress=e[a+1];break;case"rport":t.relatedPort=parseInt(e[a+1],10);break;case"tcptype":t.tcpType=e[a+1];break;case"ufrag":t.ufrag=e[a+1],t.usernameFragment=e[a+1];break;default:t[e[a]]=e[a+1]}return t},r.writeCandidate=function(r){var e=[];e.push(r.foundation),e.push(r.component),e.push(r.protocol.toUpperCase()),e.push(r.priority),e.push(r.address||r.ip),e.push(r.port);var t=r.type;return e.push("typ"),e.push(t),"host"!==t&&r.relatedAddress&&r.relatedPort&&(e.push("raddr"),e.push(r.relatedAddress),e.push("rport"),e.push(r.relatedPort)),r.tcpType&&"tcp"===r.protocol.toLowerCase()&&(e.push("tcptype"),e.push(r.tcpType)),(r.usernameFragment||r.ufrag)&&(e.push("ufrag"),e.push(r.usernameFragment||r.ufrag)),"candidate:"+e.join(" ")},r.parseIceOptions=function(r){return r.substr(14).split(" ")},r.parseRtpMap=function(r){var e=r.substr(9).split(" "),t={payloadType:parseInt(e.shift(),10)};return e=e[0].split("/"),t.name=e[0],t.clockRate=parseInt(e[1],10),t.channels=3===e.length?parseInt(e[2],10):1,t.numChannels=t.channels,t},r.writeRtpMap=function(r){var e=r.payloadType;void 0!==r.preferredPayloadType&&(e=r.preferredPayloadType);var t=r.channels||r.numChannels||1;return"a=rtpmap:"+e+" "+r.name+"/"+r.clockRate+(1!==t?"/"+t:"")+"\r\n"},r.parseExtmap=function(r){var e=r.substr(9).split(" ");return{id:parseInt(e[0],10),direction:e[0].indexOf("/")>0?e[0].split("/")[1]:"sendrecv",uri:e[1]}},r.writeExtmap=function(r){return"a=extmap:"+(r.id||r.preferredId)+(r.direction&&"sendrecv"!==r.direction?"/"+r.direction:"")+" "+r.uri+"\r\n"},r.parseFmtp=function(r){for(var e,t={},a=r.substr(r.indexOf(" ")+1).split(";"),n=0;n<a.length;n++)t[(e=a[n].trim().split("="))[0].trim()]=e[1];return t},r.writeFmtp=function(r){var e="",t=r.payloadType;if(void 0!==r.preferredPayloadType&&(t=r.preferredPayloadType),r.parameters&&Object.keys(r.parameters).length){var a=[];Object.keys(r.parameters).forEach(function(e){r.parameters[e]?a.push(e+"="+r.parameters[e]):a.push(e)}),e+="a=fmtp:"+t+" "+a.join(";")+"\r\n"}return e},r.parseRtcpFb=function(r){var e=r.substr(r.indexOf(" ")+1).split(" ");return{type:e.shift(),parameter:e.join(" ")}},r.writeRtcpFb=function(r){var e="",t=r.payloadType;return void 0!==r.preferredPayloadType&&(t=r.preferredPayloadType),r.rtcpFeedback&&r.rtcpFeedback.length&&r.rtcpFeedback.forEach(function(r){e+="a=rtcp-fb:"+t+" "+r.type+(r.parameter&&r.parameter.length?" "+r.parameter:"")+"\r\n"}),e},r.parseSsrcMedia=function(r){var e=r.indexOf(" "),t={ssrc:parseInt(r.substr(7,e-7),10)},a=r.indexOf(":",e);return a>-1?(t.attribute=r.substr(e+1,a-e-1),t.value=r.substr(a+1)):t.attribute=r.substr(e+1),t},r.parseSsrcGroup=function(r){var e=r.substr(13).split(" ");return{semantics:e.shift(),ssrcs:e.map(function(r){return parseInt(r,10)})}},r.getMid=function(e){var t=r.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},r.parseFingerprint=function(r){var e=r.substr(14).split(" ");return{algorithm:e[0].toLowerCase(),value:e[1]}},r.getDtlsParameters=function(e,t){return{role:"auto",fingerprints:r.matchPrefix(e+t,"a=fingerprint:").map(r.parseFingerprint)}},r.writeDtlsParameters=function(r,e){var t="a=setup:"+e+"\r\n";return r.fingerprints.forEach(function(r){t+="a=fingerprint:"+r.algorithm+" "+r.value+"\r\n"}),t},r.parseCryptoLine=function(r){var e=r.substr(9).split(" ");return{tag:parseInt(e[0],10),cryptoSuite:e[1],keyParams:e[2],sessionParams:e.slice(3)}},r.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?r.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},r.parseCryptoKeyParams=function(r){if(0!==r.indexOf("inline:"))return null;var e=r.substr(7).split("|");return{keyMethod:"inline",keySalt:e[0],lifeTime:e[1],mkiValue:e[2]?e[2].split(":")[0]:void 0,mkiLength:e[2]?e[2].split(":")[1]:void 0}},r.writeCryptoKeyParams=function(r){return r.keyMethod+":"+r.keySalt+(r.lifeTime?"|"+r.lifeTime:"")+(r.mkiValue&&r.mkiLength?"|"+r.mkiValue+":"+r.mkiLength:"")},r.getCryptoParameters=function(e,t){return r.matchPrefix(e+t,"a=crypto:").map(r.parseCryptoLine)},r.getIceParameters=function(e,t){var a=r.matchPrefix(e+t,"a=ice-ufrag:")[0],n=r.matchPrefix(e+t,"a=ice-pwd:")[0];return a&&n?{usernameFragment:a.substr(12),password:n.substr(10)}:null},r.writeIceParameters=function(r){return"a=ice-ufrag:"+r.usernameFragment+"\r\na=ice-pwd:"+r.password+"\r\n"},r.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},a=r.splitLines(e)[0].split(" "),n=3;n<a.length;n++){var s=a[n],i=r.matchPrefix(e,"a=rtpmap:"+s+" ")[0];if(i){var p=r.parseRtpMap(i),c=r.matchPrefix(e,"a=fmtp:"+s+" ");switch(p.parameters=c.length?r.parseFmtp(c[0]):{},p.rtcpFeedback=r.matchPrefix(e,"a=rtcp-fb:"+s+" ").map(r.parseRtcpFb),t.codecs.push(p),p.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(p.name.toUpperCase())}}}return r.matchPrefix(e,"a=extmap:").forEach(function(e){t.headerExtensions.push(r.parseExtmap(e))}),t},r.writeRtpDescription=function(e,t){var a="";a+="m="+e+" ",a+=t.codecs.length>0?"9":"0",a+=" UDP/TLS/RTP/SAVPF ",a+=t.codecs.map(function(r){return void 0!==r.preferredPayloadType?r.preferredPayloadType:r.payloadType}).join(" ")+"\r\n",a+="c=IN IP4 0.0.0.0\r\n",a+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach(function(e){a+=r.writeRtpMap(e),a+=r.writeFmtp(e),a+=r.writeRtcpFb(e)});var n=0;return t.codecs.forEach(function(r){r.maxptime>n&&(n=r.maxptime)}),n>0&&(a+="a=maxptime:"+n+"\r\n"),a+="a=rtcp-mux\r\n",t.headerExtensions&&t.headerExtensions.forEach(function(e){a+=r.writeExtmap(e)}),a},r.parseRtpEncodingParameters=function(e){var t,a=[],n=r.parseRtpParameters(e),s=-1!==n.fecMechanisms.indexOf("RED"),i=-1!==n.fecMechanisms.indexOf("ULPFEC"),p=r.matchPrefix(e,"a=ssrc:").map(function(e){return r.parseSsrcMedia(e)}).filter(function(r){return"cname"===r.attribute}),c=p.length>0&&p[0].ssrc,o=r.matchPrefix(e,"a=ssrc-group:FID").map(function(r){return r.substr(17).split(" ").map(function(r){return parseInt(r,10)})});o.length>0&&o[0].length>1&&o[0][0]===c&&(t=o[0][1]),n.codecs.forEach(function(r){if("RTX"===r.name.toUpperCase()&&r.parameters.apt){var e={ssrc:c,codecPayloadType:parseInt(r.parameters.apt,10)};c&&t&&(e.rtx={ssrc:t}),a.push(e),s&&((e=JSON.parse(JSON.stringify(e))).fec={ssrc:c,mechanism:i?"red+ulpfec":"red"},a.push(e))}}),0===a.length&&c&&a.push({ssrc:c});var u=r.matchPrefix(e,"b=");return u.length&&(u=0===u[0].indexOf("b=TIAS:")?parseInt(u[0].substr(7),10):0===u[0].indexOf("b=AS:")?1e3*parseInt(u[0].substr(5),10)*.95-16e3:void 0,a.forEach(function(r){r.maxBitrate=u})),a},r.parseRtcpParameters=function(e){var t={},a=r.matchPrefix(e,"a=ssrc:").map(function(e){return r.parseSsrcMedia(e)}).filter(function(r){return"cname"===r.attribute})[0];a&&(t.cname=a.value,t.ssrc=a.ssrc);var n=r.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=n.length>0,t.compound=0===n.length;var s=r.matchPrefix(e,"a=rtcp-mux");return t.mux=s.length>0,t},r.parseMsid=function(e){var t,a=r.matchPrefix(e,"a=msid:");if(1===a.length)return{stream:(t=a[0].substr(7).split(" "))[0],track:t[1]};var n=r.matchPrefix(e,"a=ssrc:").map(function(e){return r.parseSsrcMedia(e)}).filter(function(r){return"msid"===r.attribute});return n.length>0?{stream:(t=n[0].value.split(" "))[0],track:t[1]}:void 0},r.parseSctpDescription=function(e){var t,a=r.parseMLine(e),n=r.matchPrefix(e,"a=max-message-size:");n.length>0&&(t=parseInt(n[0].substr(19),10)),isNaN(t)&&(t=65536);var s=r.matchPrefix(e,"a=sctp-port:");if(s.length>0)return{port:parseInt(s[0].substr(12),10),protocol:a.fmt,maxMessageSize:t};if(r.matchPrefix(e,"a=sctpmap:").length>0){var i=r.matchPrefix(e,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(i[0],10),protocol:i[1],maxMessageSize:t}}},r.writeSctpDescription=function(r,e){var t=[];return t="DTLS/SCTP"!==r.protocol?["m="+r.kind+" 9 "+r.protocol+" "+e.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+e.port+"\r\n"]:["m="+r.kind+" 9 "+r.protocol+" "+e.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+e.port+" "+e.protocol+" 65535\r\n"],void 0!==e.maxMessageSize&&t.push("a=max-message-size:"+e.maxMessageSize+"\r\n"),t.join("")},r.generateSessionId=function(){return Math.random().toString().substr(2,21)},r.writeSessionBoilerplate=function(e,t,a){var n=void 0!==t?t:2;return"v=0\r\no="+(a||"thisisadapterortc")+" "+(e||r.generateSessionId())+" "+n+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},r.writeMediaSection=function(e,t,a,n){var s=r.writeRtpDescription(e.kind,t);if(s+=r.writeIceParameters(e.iceGatherer.getLocalParameters()),s+=r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===a?"actpass":"active"),s+="a=mid:"+e.mid+"\r\n",e.direction?s+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?s+="a=sendrecv\r\n":e.rtpSender?s+="a=sendonly\r\n":e.rtpReceiver?s+="a=recvonly\r\n":s+="a=inactive\r\n",e.rtpSender){var i="msid:"+n.id+" "+e.rtpSender.track.id+"\r\n";s+="a="+i,s+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+i,e.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+i,s+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return s+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+"\r\n"),s},r.getDirection=function(e,t){for(var a=r.splitLines(e),n=0;n<a.length;n++)switch(a[n]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return a[n].substr(2)}return t?r.getDirection(t):"sendrecv"},r.getKind=function(e){return r.splitLines(e)[0].split(" ")[0].substr(2)},r.isRejected=function(r){return"0"===r.split(" ",2)[1]},r.parseMLine=function(e){var t=r.splitLines(e)[0].substr(2).split(" ");return{kind:t[0],port:parseInt(t[1],10),protocol:t[2],fmt:t.slice(3).join(" ")}},r.parseOLine=function(e){var t=r.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:t[0],sessionId:t[1],sessionVersion:parseInt(t[2],10),netType:t[3],addressType:t[4],address:t[5]}},r.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var t=r.splitLines(e),a=0;a<t.length;a++)if(t[a].length<2||"="!==t[a].charAt(1))return!1;return!0},"object"==typeof module&&(module.exports=r);
},{}],"NJ2u":[function(require,module,exports) {
"use strict";var e=require("sdp");function t(e){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type}function r(t,r,n,a,i){var s=e.writeRtpDescription(t.kind,r);if(s+=e.writeIceParameters(t.iceGatherer.getLocalParameters()),s+=e.writeDtlsParameters(t.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":i||"active"),s+="a=mid:"+t.mid+"\r\n",t.rtpSender&&t.rtpReceiver?s+="a=sendrecv\r\n":t.rtpSender?s+="a=sendonly\r\n":t.rtpReceiver?s+="a=recvonly\r\n":s+="a=inactive\r\n",t.rtpSender){var o=t.rtpSender._initialTrackId||t.rtpSender.track.id;t.rtpSender._initialTrackId=o;var c="msid:"+(a?a.id:"-")+" "+o+"\r\n";s+="a="+c,s+="a=ssrc:"+t.sendEncodingParameters[0].ssrc+" "+c,t.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+t.sendEncodingParameters[0].rtx.ssrc+" "+c,s+="a=ssrc-group:FID "+t.sendEncodingParameters[0].ssrc+" "+t.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return s+="a=ssrc:"+t.sendEncodingParameters[0].ssrc+" cname:"+e.localCName+"\r\n",t.rtpSender&&t.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+t.sendEncodingParameters[0].rtx.ssrc+" cname:"+e.localCName+"\r\n"),s}function n(e,t){var r=!1;return(e=JSON.parse(JSON.stringify(e))).filter(function(e){if(e&&(e.urls||e.url)){var n=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var a="string"==typeof n;return a&&(n=[n]),n=n.filter(function(e){return 0===e.indexOf("turn:")&&-1!==e.indexOf("transport=udp")&&-1===e.indexOf("turn:[")&&!r?(r=!0,!0):0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp")}),delete e.url,e.urls=a?n[0]:n,!!n.length}})}function a(e,t){var r={codecs:[],headerExtensions:[],fecMechanisms:[]},n=function(e,t){e=parseInt(e,10);for(var r=0;r<t.length;r++)if(t[r].payloadType===e||t[r].preferredPayloadType===e)return t[r]},a=function(e,t,r,a){var i=n(e.parameters.apt,r),s=n(t.parameters.apt,a);return i&&s&&i.name.toLowerCase()===s.name.toLowerCase()};return e.codecs.forEach(function(n){for(var i=0;i<t.codecs.length;i++){var s=t.codecs[i];if(n.name.toLowerCase()===s.name.toLowerCase()&&n.clockRate===s.clockRate){if("rtx"===n.name.toLowerCase()&&n.parameters&&s.parameters.apt&&!a(n,s,e.codecs,t.codecs))continue;(s=JSON.parse(JSON.stringify(s))).numChannels=Math.min(n.numChannels,s.numChannels),r.codecs.push(s),s.rtcpFeedback=s.rtcpFeedback.filter(function(e){for(var t=0;t<n.rtcpFeedback.length;t++)if(n.rtcpFeedback[t].type===e.type&&n.rtcpFeedback[t].parameter===e.parameter)return!0;return!1});break}}}),e.headerExtensions.forEach(function(e){for(var n=0;n<t.headerExtensions.length;n++){var a=t.headerExtensions[n];if(e.uri===a.uri){r.headerExtensions.push(a);break}}}),r}function i(e,t,r){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(r)}function s(e,t){var r=e.getRemoteCandidates().find(function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type});return r||e.addRemoteCandidate(t),!r}function o(e,t){var r=new Error(t);return r.name=e,r.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],r}module.exports=function(c,d){function p(e,t){t.addTrack(e),t.dispatchEvent(new c.MediaStreamTrackEvent("addtrack",{track:e}))}function l(e,t,r,n){var a=new Event("track");a.track=t,a.receiver=r,a.transceiver={receiver:r},a.streams=n,c.setTimeout(function(){e._dispatchEvent("track",a)})}var f=function(t){var r=this,a=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(e){r[e]=a[e].bind(a)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",t=JSON.parse(JSON.stringify(t||{})),this.usingBundle="max-bundle"===t.bundlePolicy,"negotiate"===t.rtcpMuxPolicy)throw o("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(t.rtcpMuxPolicy||(t.rtcpMuxPolicy="require"),t.iceTransportPolicy){case"all":case"relay":break;default:t.iceTransportPolicy="all"}switch(t.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:t.bundlePolicy="balanced"}if(t.iceServers=n(t.iceServers||[],d),this._iceGatherers=[],t.iceCandidatePoolSize)for(var i=t.iceCandidatePoolSize;i>0;i--)this._iceGatherers.push(new c.RTCIceGatherer({iceServers:t.iceServers,gatherPolicy:t.iceTransportPolicy}));else t.iceCandidatePoolSize=0;this._config=t,this.transceivers=[],this._sdpSessionId=e.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(f.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(f.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),f.prototype.onicecandidate=null,f.prototype.onaddstream=null,f.prototype.ontrack=null,f.prototype.onremovestream=null,f.prototype.onsignalingstatechange=null,f.prototype.oniceconnectionstatechange=null,f.prototype.onconnectionstatechange=null,f.prototype.onicegatheringstatechange=null,f.prototype.onnegotiationneeded=null,f.prototype.ondatachannel=null,f.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},f.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},f.prototype.getConfiguration=function(){return this._config},f.prototype.getLocalStreams=function(){return this.localStreams},f.prototype.getRemoteStreams=function(){return this.remoteStreams},f.prototype._createTransceiver=function(e,t){var r=this.transceivers.length>0,n={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&r)n.iceTransport=this.transceivers[0].iceTransport,n.dtlsTransport=this.transceivers[0].dtlsTransport;else{var a=this._createIceAndDtlsTransports();n.iceTransport=a.iceTransport,n.dtlsTransport=a.dtlsTransport}return t||this.transceivers.push(n),n},f.prototype.addTrack=function(e,t){if(this._isClosed)throw o("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var r;if(this.transceivers.find(function(t){return t.track===e}))throw o("InvalidAccessError","Track already exists.");for(var n=0;n<this.transceivers.length;n++)this.transceivers[n].track||this.transceivers[n].kind!==e.kind||(r=this.transceivers[n]);return r||(r=this._createTransceiver(e.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(t)&&this.localStreams.push(t),r.track=e,r.stream=t,r.rtpSender=new c.RTCRtpSender(e,r.dtlsTransport),r.rtpSender},f.prototype.addStream=function(e){var t=this;if(d>=15025)e.getTracks().forEach(function(r){t.addTrack(r,e)});else{var r=e.clone();e.getTracks().forEach(function(e,t){var n=r.getTracks()[t];e.addEventListener("enabled",function(e){n.enabled=e.enabled})}),r.getTracks().forEach(function(e){t.addTrack(e,r)})}},f.prototype.removeTrack=function(e){if(this._isClosed)throw o("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(e instanceof c.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var t=this.transceivers.find(function(t){return t.rtpSender===e});if(!t)throw o("InvalidAccessError","Sender was not created by this connection.");var r=t.stream;t.rtpSender.stop(),t.rtpSender=null,t.track=null,t.stream=null,-1===this.transceivers.map(function(e){return e.stream}).indexOf(r)&&this.localStreams.indexOf(r)>-1&&this.localStreams.splice(this.localStreams.indexOf(r),1),this._maybeFireNegotiationNeeded()},f.prototype.removeStream=function(e){var t=this;e.getTracks().forEach(function(e){var r=t.getSenders().find(function(t){return t.track===e});r&&t.removeTrack(r)})},f.prototype.getSenders=function(){return this.transceivers.filter(function(e){return!!e.rtpSender}).map(function(e){return e.rtpSender})},f.prototype.getReceivers=function(){return this.transceivers.filter(function(e){return!!e.rtpReceiver}).map(function(e){return e.rtpReceiver})},f.prototype._createIceGatherer=function(e,t){var r=this;if(t&&e>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var n=new c.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(n,"state",{value:"new",writable:!0}),this.transceivers[e].bufferedCandidateEvents=[],this.transceivers[e].bufferCandidates=function(t){var a=!t.candidate||0===Object.keys(t.candidate).length;n.state=a?"completed":"gathering",null!==r.transceivers[e].bufferedCandidateEvents&&r.transceivers[e].bufferedCandidateEvents.push(t)},n.addEventListener("localcandidate",this.transceivers[e].bufferCandidates),n},f.prototype._gather=function(t,r){var n=this,a=this.transceivers[r].iceGatherer;if(!a.onlocalcandidate){var i=this.transceivers[r].bufferedCandidateEvents;this.transceivers[r].bufferedCandidateEvents=null,a.removeEventListener("localcandidate",this.transceivers[r].bufferCandidates),a.onlocalcandidate=function(i){if(!(n.usingBundle&&r>0)){var s=new Event("icecandidate");s.candidate={sdpMid:t,sdpMLineIndex:r};var o=i.candidate,c=!o||0===Object.keys(o).length;if(c)"new"!==a.state&&"gathering"!==a.state||(a.state="completed");else{"new"===a.state&&(a.state="gathering"),o.component=1,o.ufrag=a.getLocalParameters().usernameFragment;var d=e.writeCandidate(o);s.candidate=Object.assign(s.candidate,e.parseCandidate(d)),s.candidate.candidate=d,s.candidate.toJSON=function(){return{candidate:s.candidate.candidate,sdpMid:s.candidate.sdpMid,sdpMLineIndex:s.candidate.sdpMLineIndex,usernameFragment:s.candidate.usernameFragment}}}var p=e.getMediaSections(n._localDescription.sdp);p[s.candidate.sdpMLineIndex]+=c?"a=end-of-candidates\r\n":"a="+s.candidate.candidate+"\r\n",n._localDescription.sdp=e.getDescription(n._localDescription.sdp)+p.join("");var l=n.transceivers.every(function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state});"gathering"!==n.iceGatheringState&&(n.iceGatheringState="gathering",n._emitGatheringStateChange()),c||n._dispatchEvent("icecandidate",s),l&&(n._dispatchEvent("icecandidate",new Event("icecandidate")),n.iceGatheringState="complete",n._emitGatheringStateChange())}},c.setTimeout(function(){i.forEach(function(e){a.onlocalcandidate(e)})},0)}},f.prototype._createIceAndDtlsTransports=function(){var e=this,t=new c.RTCIceTransport(null);t.onicestatechange=function(){e._updateIceConnectionState(),e._updateConnectionState()};var r=new c.RTCDtlsTransport(t);return r.ondtlsstatechange=function(){e._updateConnectionState()},r.onerror=function(){Object.defineProperty(r,"state",{value:"failed",writable:!0}),e._updateConnectionState()},{iceTransport:t,dtlsTransport:r}},f.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var r=this.transceivers[e].iceTransport;r&&(delete r.onicestatechange,delete this.transceivers[e].iceTransport);var n=this.transceivers[e].dtlsTransport;n&&(delete n.ondtlsstatechange,delete n.onerror,delete this.transceivers[e].dtlsTransport)},f.prototype._transceive=function(t,r,n){var i=a(t.localCapabilities,t.remoteCapabilities);r&&t.rtpSender&&(i.encodings=t.sendEncodingParameters,i.rtcp={cname:e.localCName,compound:t.rtcpParameters.compound},t.recvEncodingParameters.length&&(i.rtcp.ssrc=t.recvEncodingParameters[0].ssrc),t.rtpSender.send(i)),n&&t.rtpReceiver&&i.codecs.length>0&&("video"===t.kind&&t.recvEncodingParameters&&d<15019&&t.recvEncodingParameters.forEach(function(e){delete e.rtx}),t.recvEncodingParameters.length?i.encodings=t.recvEncodingParameters:i.encodings=[{}],i.rtcp={compound:t.rtcpParameters.compound},t.rtcpParameters.cname&&(i.rtcp.cname=t.rtcpParameters.cname),t.sendEncodingParameters.length&&(i.rtcp.ssrc=t.sendEncodingParameters[0].ssrc),t.rtpReceiver.receive(i))},f.prototype.setLocalDescription=function(t){var r,n,s=this;if(-1===["offer","answer"].indexOf(t.type))return Promise.reject(o("TypeError",'Unsupported type "'+t.type+'"'));if(!i("setLocalDescription",t.type,s.signalingState)||s._isClosed)return Promise.reject(o("InvalidStateError","Can not set local "+t.type+" in state "+s.signalingState));if("offer"===t.type)r=e.splitSections(t.sdp),n=r.shift(),r.forEach(function(t,r){var n=e.parseRtpParameters(t);s.transceivers[r].localCapabilities=n}),s.transceivers.forEach(function(e,t){s._gather(e.mid,t)});else if("answer"===t.type){r=e.splitSections(s._remoteDescription.sdp),n=r.shift();var c=e.matchPrefix(n,"a=ice-lite").length>0;r.forEach(function(t,r){var i=s.transceivers[r],o=i.iceGatherer,d=i.iceTransport,p=i.dtlsTransport,l=i.localCapabilities,f=i.remoteCapabilities;if(!(e.isRejected(t)&&0===e.matchPrefix(t,"a=bundle-only").length)&&!i.rejected){var u=e.getIceParameters(t,n),v=e.getDtlsParameters(t,n);c&&(v.role="server"),s.usingBundle&&0!==r||(s._gather(i.mid,r),"new"===d.state&&d.start(o,u,c?"controlling":"controlled"),"new"===p.state&&p.start(v));var h=a(l,f);s._transceive(i,h.codecs.length>0,!1)}})}return s._localDescription={type:t.type,sdp:t.sdp},"offer"===t.type?s._updateSignalingState("have-local-offer"):s._updateSignalingState("stable"),Promise.resolve()},f.prototype.setRemoteDescription=function(t){var r=this;if(-1===["offer","answer"].indexOf(t.type))return Promise.reject(o("TypeError",'Unsupported type "'+t.type+'"'));if(!i("setRemoteDescription",t.type,r.signalingState)||r._isClosed)return Promise.reject(o("InvalidStateError","Can not set remote "+t.type+" in state "+r.signalingState));var n={};r.remoteStreams.forEach(function(e){n[e.id]=e});var f=[],u=e.splitSections(t.sdp),v=u.shift(),h=e.matchPrefix(v,"a=ice-lite").length>0,m=e.matchPrefix(v,"a=group:BUNDLE ").length>0;r.usingBundle=m;var g=e.matchPrefix(v,"a=ice-options:")[0];return r.canTrickleIceCandidates=!!g&&g.substr(14).split(" ").indexOf("trickle")>=0,u.forEach(function(i,o){var l=e.splitLines(i),u=e.getKind(i),g=e.isRejected(i)&&0===e.matchPrefix(i,"a=bundle-only").length,y=l[0].substr(2).split(" ")[2],S=e.getDirection(i,v),T=e.parseMsid(i),E=e.getMid(i)||e.generateIdentifier();if(g||"application"===u&&("DTLS/SCTP"===y||"UDP/DTLS/SCTP"===y))r.transceivers[o]={mid:E,kind:u,protocol:y,rejected:!0};else{var C,P,w,R,_,k,b,x,D;!g&&r.transceivers[o]&&r.transceivers[o].rejected&&(r.transceivers[o]=r._createTransceiver(u,!0));var I,L,M=e.parseRtpParameters(i);g||(I=e.getIceParameters(i,v),(L=e.getDtlsParameters(i,v)).role="client"),b=e.parseRtpEncodingParameters(i);var O=e.parseRtcpParameters(i),G=e.matchPrefix(i,"a=end-of-candidates",v).length>0,j=e.matchPrefix(i,"a=candidate:").map(function(t){return e.parseCandidate(t)}).filter(function(e){return 1===e.component});if(("offer"===t.type||"answer"===t.type)&&!g&&m&&o>0&&r.transceivers[o]&&(r._disposeIceAndDtlsTransports(o),r.transceivers[o].iceGatherer=r.transceivers[0].iceGatherer,r.transceivers[o].iceTransport=r.transceivers[0].iceTransport,r.transceivers[o].dtlsTransport=r.transceivers[0].dtlsTransport,r.transceivers[o].rtpSender&&r.transceivers[o].rtpSender.setTransport(r.transceivers[0].dtlsTransport),r.transceivers[o].rtpReceiver&&r.transceivers[o].rtpReceiver.setTransport(r.transceivers[0].dtlsTransport)),"offer"!==t.type||g){if("answer"===t.type&&!g){P=(C=r.transceivers[o]).iceGatherer,w=C.iceTransport,R=C.dtlsTransport,_=C.rtpReceiver,k=C.sendEncodingParameters,x=C.localCapabilities,r.transceivers[o].recvEncodingParameters=b,r.transceivers[o].remoteCapabilities=M,r.transceivers[o].rtcpParameters=O,j.length&&"new"===w.state&&(!h&&!G||m&&0!==o?j.forEach(function(e){s(C.iceTransport,e)}):w.setRemoteCandidates(j)),m&&0!==o||("new"===w.state&&w.start(P,I,"controlling"),"new"===R.state&&R.start(L)),!a(C.localCapabilities,C.remoteCapabilities).codecs.filter(function(e){return"rtx"===e.name.toLowerCase()}).length&&C.sendEncodingParameters[0].rtx&&delete C.sendEncodingParameters[0].rtx,r._transceive(C,"sendrecv"===S||"recvonly"===S,"sendrecv"===S||"sendonly"===S),!_||"sendrecv"!==S&&"sendonly"!==S?delete C.rtpReceiver:(D=_.track,T?(n[T.stream]||(n[T.stream]=new c.MediaStream),p(D,n[T.stream]),f.push([D,_,n[T.stream]])):(n.default||(n.default=new c.MediaStream),p(D,n.default),f.push([D,_,n.default])))}}else{(C=r.transceivers[o]||r._createTransceiver(u)).mid=E,C.iceGatherer||(C.iceGatherer=r._createIceGatherer(o,m)),j.length&&"new"===C.iceTransport.state&&(!G||m&&0!==o?j.forEach(function(e){s(C.iceTransport,e)}):C.iceTransport.setRemoteCandidates(j)),x=c.RTCRtpReceiver.getCapabilities(u),d<15019&&(x.codecs=x.codecs.filter(function(e){return"rtx"!==e.name})),k=C.sendEncodingParameters||[{ssrc:1001*(2*o+2)}];var N,A=!1;if("sendrecv"===S||"sendonly"===S){if(A=!C.rtpReceiver,_=C.rtpReceiver||new c.RTCRtpReceiver(C.dtlsTransport,u),A)D=_.track,T&&"-"===T.stream||(T?(n[T.stream]||(n[T.stream]=new c.MediaStream,Object.defineProperty(n[T.stream],"id",{get:function(){return T.stream}})),Object.defineProperty(D,"id",{get:function(){return T.track}}),N=n[T.stream]):(n.default||(n.default=new c.MediaStream),N=n.default)),N&&(p(D,N),C.associatedRemoteMediaStreams.push(N)),f.push([D,_,N])}else C.rtpReceiver&&C.rtpReceiver.track&&(C.associatedRemoteMediaStreams.forEach(function(e){var t,r,n=e.getTracks().find(function(e){return e.id===C.rtpReceiver.track.id});n&&(t=n,(r=e).removeTrack(t),r.dispatchEvent(new c.MediaStreamTrackEvent("removetrack",{track:t})))}),C.associatedRemoteMediaStreams=[]);C.localCapabilities=x,C.remoteCapabilities=M,C.rtpReceiver=_,C.rtcpParameters=O,C.sendEncodingParameters=k,C.recvEncodingParameters=b,r._transceive(r.transceivers[o],!1,A)}}}),void 0===r._dtlsRole&&(r._dtlsRole="offer"===t.type?"active":"passive"),r._remoteDescription={type:t.type,sdp:t.sdp},"offer"===t.type?r._updateSignalingState("have-remote-offer"):r._updateSignalingState("stable"),Object.keys(n).forEach(function(e){var t=n[e];if(t.getTracks().length){if(-1===r.remoteStreams.indexOf(t)){r.remoteStreams.push(t);var a=new Event("addstream");a.stream=t,c.setTimeout(function(){r._dispatchEvent("addstream",a)})}f.forEach(function(e){var n=e[0],a=e[1];t.id===e[2].id&&l(r,n,a,[t])})}}),f.forEach(function(e){e[2]||l(r,e[0],e[1],[])}),c.setTimeout(function(){r&&r.transceivers&&r.transceivers.forEach(function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},f.prototype.close=function(){this.transceivers.forEach(function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},f.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},f.prototype._maybeFireNegotiationNeeded=function(){var e=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,c.setTimeout(function(){if(e.needNegotiation){e.needNegotiation=!1;var t=new Event("negotiationneeded");e._dispatchEvent("negotiationneeded",t)}},0))},f.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++}),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var r=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",r)}},f.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)}),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var r=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",r)}},f.prototype.createOffer=function(){var t=this;if(t._isClosed)return Promise.reject(o("InvalidStateError","Can not call createOffer after close"));var n=t.transceivers.filter(function(e){return"audio"===e.kind}).length,a=t.transceivers.filter(function(e){return"video"===e.kind}).length,i=arguments[0];if(i){if(i.mandatory||i.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==i.offerToReceiveAudio&&(n=!0===i.offerToReceiveAudio?1:!1===i.offerToReceiveAudio?0:i.offerToReceiveAudio),void 0!==i.offerToReceiveVideo&&(a=!0===i.offerToReceiveVideo?1:!1===i.offerToReceiveVideo?0:i.offerToReceiveVideo)}for(t.transceivers.forEach(function(e){"audio"===e.kind?--n<0&&(e.wantReceive=!1):"video"===e.kind&&--a<0&&(e.wantReceive=!1)});n>0||a>0;)n>0&&(t._createTransceiver("audio"),n--),a>0&&(t._createTransceiver("video"),a--);var s=e.writeSessionBoilerplate(t._sdpSessionId,t._sdpSessionVersion++);t.transceivers.forEach(function(r,n){var a=r.track,i=r.kind,s=r.mid||e.generateIdentifier();r.mid=s,r.iceGatherer||(r.iceGatherer=t._createIceGatherer(n,t.usingBundle));var o=c.RTCRtpSender.getCapabilities(i);d<15019&&(o.codecs=o.codecs.filter(function(e){return"rtx"!==e.name})),o.codecs.forEach(function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),r.remoteCapabilities&&r.remoteCapabilities.codecs&&r.remoteCapabilities.codecs.forEach(function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)})}),o.headerExtensions.forEach(function(e){(r.remoteCapabilities&&r.remoteCapabilities.headerExtensions||[]).forEach(function(t){e.uri===t.uri&&(e.id=t.id)})});var p=r.sendEncodingParameters||[{ssrc:1001*(2*n+1)}];a&&d>=15019&&"video"===i&&!p[0].rtx&&(p[0].rtx={ssrc:p[0].ssrc+1}),r.wantReceive&&(r.rtpReceiver=new c.RTCRtpReceiver(r.dtlsTransport,i)),r.localCapabilities=o,r.sendEncodingParameters=p}),"max-compat"!==t._config.bundlePolicy&&(s+="a=group:BUNDLE "+t.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n"),s+="a=ice-options:trickle\r\n",t.transceivers.forEach(function(n,a){s+=r(n,n.localCapabilities,"offer",n.stream,t._dtlsRole),s+="a=rtcp-rsize\r\n",!n.iceGatherer||"new"===t.iceGatheringState||0!==a&&t.usingBundle||(n.iceGatherer.getLocalCandidates().forEach(function(t){t.component=1,s+="a="+e.writeCandidate(t)+"\r\n"}),"completed"===n.iceGatherer.state&&(s+="a=end-of-candidates\r\n"))});var p=new c.RTCSessionDescription({type:"offer",sdp:s});return Promise.resolve(p)},f.prototype.createAnswer=function(){var t=this;if(t._isClosed)return Promise.reject(o("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==t.signalingState&&"have-local-pranswer"!==t.signalingState)return Promise.reject(o("InvalidStateError","Can not call createAnswer in signalingState "+t.signalingState));var n=e.writeSessionBoilerplate(t._sdpSessionId,t._sdpSessionVersion++);t.usingBundle&&(n+="a=group:BUNDLE "+t.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n"),n+="a=ice-options:trickle\r\n";var i=e.getMediaSections(t._remoteDescription.sdp).length;t.transceivers.forEach(function(e,s){if(!(s+1>i)){if(e.rejected)return"application"===e.kind?"DTLS/SCTP"===e.protocol?n+="m=application 0 DTLS/SCTP 5000\r\n":n+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?n+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(n+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(n+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var o;if(e.stream)"audio"===e.kind?o=e.stream.getAudioTracks()[0]:"video"===e.kind&&(o=e.stream.getVideoTracks()[0]),o&&d>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1});var c=a(e.localCapabilities,e.remoteCapabilities);!c.codecs.filter(function(e){return"rtx"===e.name.toLowerCase()}).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,n+=r(e,c,"answer",e.stream,t._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(n+="a=rtcp-rsize\r\n")}});var s=new c.RTCSessionDescription({type:"answer",sdp:n});return Promise.resolve(s)},f.prototype.addIceCandidate=function(t){var r,n=this;return t&&void 0===t.sdpMLineIndex&&!t.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(a,i){if(!n._remoteDescription)return i(o("InvalidStateError","Can not add ICE candidate without a remote description"));if(t&&""!==t.candidate){var c=t.sdpMLineIndex;if(t.sdpMid)for(var d=0;d<n.transceivers.length;d++)if(n.transceivers[d].mid===t.sdpMid){c=d;break}var p=n.transceivers[c];if(!p)return i(o("OperationError","Can not add ICE candidate"));if(p.rejected)return a();var l=Object.keys(t.candidate).length>0?e.parseCandidate(t.candidate):{};if("tcp"===l.protocol&&(0===l.port||9===l.port))return a();if(l.component&&1!==l.component)return a();if((0===c||c>0&&p.iceTransport!==n.transceivers[0].iceTransport)&&!s(p.iceTransport,l))return i(o("OperationError","Can not add ICE candidate"));var f=t.candidate.trim();0===f.indexOf("a=")&&(f=f.substr(2)),(r=e.getMediaSections(n._remoteDescription.sdp))[c]+="a="+(l.type?f:"end-of-candidates")+"\r\n",n._remoteDescription.sdp=e.getDescription(n._remoteDescription.sdp)+r.join("")}else for(var u=0;u<n.transceivers.length&&(n.transceivers[u].rejected||(n.transceivers[u].iceTransport.addRemoteCandidate({}),(r=e.getMediaSections(n._remoteDescription.sdp))[u]+="a=end-of-candidates\r\n",n._remoteDescription.sdp=e.getDescription(n._remoteDescription.sdp)+r.join(""),!n.usingBundle));u++);a()})},f.prototype.getStats=function(e){if(e&&e instanceof c.MediaStreamTrack){var t=null;if(this.transceivers.forEach(function(r){r.rtpSender&&r.rtpSender.track===e?t=r.rtpSender:r.rtpReceiver&&r.rtpReceiver.track===e&&(t=r.rtpReceiver)}),!t)throw o("InvalidAccessError","Invalid selector.");return t.getStats()}var r=[];return this.transceivers.forEach(function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(t){e[t]&&r.push(e[t].getStats())})}),Promise.all(r).then(function(e){var t=new Map;return e.forEach(function(e){e.forEach(function(e){t.set(e.id,e)})}),t})};["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach(function(e){var r=c[e];if(r&&r.prototype&&r.prototype.getStats){var n=r.prototype.getStats;r.prototype.getStats=function(){return n.apply(this).then(function(e){var r=new Map;return Object.keys(e).forEach(function(n){e[n].type=t(e[n]),r.set(n,e[n])}),r})}}});var u=["createOffer","createAnswer"];return u.forEach(function(e){var t=f.prototype[e];f.prototype[e]=function(){var e=arguments;return"function"==typeof e[0]||"function"==typeof e[1]?t.apply(this,[arguments[2]]).then(function(t){"function"==typeof e[0]&&e[0].apply(null,[t])},function(t){"function"==typeof e[1]&&e[1].apply(null,[t])}):t.apply(this,arguments)}}),(u=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach(function(e){var t=f.prototype[e];f.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]||"function"==typeof e[2]?t.apply(this,arguments).then(function(){"function"==typeof e[1]&&e[1].apply(null)},function(t){"function"==typeof e[2]&&e[2].apply(null,[t])}):t.apply(this,arguments)}}),["getStats"].forEach(function(e){var t=f.prototype[e];f.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then(function(){"function"==typeof e[1]&&e[1].apply(null)}):t.apply(this,arguments)}}),f};
},{"sdp":"YHvh"}],"YdKx":[function(require,module,exports) {
"use strict";function e(e){var r=e&&e.navigator,t=r.mediaDevices.getUserMedia.bind(r.mediaDevices);r.mediaDevices.getUserMedia=function(e){return t(e).catch(function(e){return Promise.reject(function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString:function(){return this.name}}}(e))})}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimGetUserMedia=e;
},{}],"P3bV":[function(require,module,exports) {
"use strict";function e(e){"getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimGetDisplayMedia=e;
},{}],"XRic":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimPeerConnection=p,exports.shimReplaceTrack=a,Object.defineProperty(exports,"shimGetUserMedia",{enumerable:!0,get:function(){return n.shimGetUserMedia}}),Object.defineProperty(exports,"shimGetDisplayMedia",{enumerable:!0,get:function(){return i.shimGetDisplayMedia}});var e=s(require("../utils")),t=require("./filtericeservers"),r=o(require("rtcpeerconnection-shim")),n=require("./getusermedia"),i=require("./getdisplaymedia");function o(e){return e&&e.__esModule?e:{default:e}}function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function s(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=n?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}function p(n,i){if(n.RTCIceGatherer&&(n.RTCIceCandidate||(n.RTCIceCandidate=function(e){return e}),n.RTCSessionDescription||(n.RTCSessionDescription=function(e){return e}),i.version<15025)){var o=Object.getOwnPropertyDescriptor(n.MediaStreamTrack.prototype,"enabled");Object.defineProperty(n.MediaStreamTrack.prototype,"enabled",{set:function(e){o.set.call(this,e);var t=new Event("enabled");t.enabled=e,this.dispatchEvent(t)}})}!n.RTCRtpSender||"dtmf"in n.RTCRtpSender.prototype||Object.defineProperty(n.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new n.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),n.RTCDtmfSender&&!n.RTCDTMFSender&&(n.RTCDTMFSender=n.RTCDtmfSender);var c=(0,r.default)(n,i.version);n.RTCPeerConnection=function(r){return r&&r.iceServers&&(r.iceServers=(0,t.filterIceServers)(r.iceServers,i.version),e.log("ICE servers after filtering:",r.iceServers)),new c(r)},n.RTCPeerConnection.prototype=c.prototype}function a(e){!e.RTCRtpSender||"replaceTrack"in e.RTCRtpSender.prototype||(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}
},{"../utils":"iSxC","./filtericeservers":"NZ1C","rtcpeerconnection-shim":"NJ2u","./getusermedia":"YdKx","./getdisplaymedia":"P3bV"}],"GzSv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimGetUserMedia=n;var e=o(require("../utils"));function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var o=t();if(o&&o.has(e))return o.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=n?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,o&&o.set(e,r),r}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(t,o){var n=t&&t.navigator,i=t&&t.MediaStreamTrack;if(n.getUserMedia=function(t,o,r){e.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(t).then(o,r)},!(o.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){var a=function(e,t,o){t in e&&!(o in e)&&(e[o]=e[t],delete e[t])},s=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(e){return"object"===r(e)&&"object"===r(e.audio)&&(e=JSON.parse(JSON.stringify(e)),a(e.audio,"autoGainControl","mozAutoGainControl"),a(e.audio,"noiseSuppression","mozNoiseSuppression")),s(e)},i&&i.prototype.getSettings){var p=i.prototype.getSettings;i.prototype.getSettings=function(){var e=p.apply(this,arguments);return a(e,"mozAutoGainControl","autoGainControl"),a(e,"mozNoiseSuppression","noiseSuppression"),e}}if(i&&i.prototype.applyConstraints){var u=i.prototype.applyConstraints;i.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"===r(e)&&(e=JSON.parse(JSON.stringify(e)),a(e,"autoGainControl","mozAutoGainControl"),a(e,"noiseSuppression","mozNoiseSuppression")),u.apply(this,[e])}}}}
},{"../utils":"iSxC"}],"UuGU":[function(require,module,exports) {
"use strict";function e(e,i){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(a){if(!a||!a.video){var t=new DOMException("getDisplayMedia without video constraints is undefined");return t.name="NotFoundError",t.code=8,Promise.reject(t)}return!0===a.video?a.video={mediaSource:i}:a.video.mediaSource=i,e.navigator.mediaDevices.getUserMedia(a)})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimGetDisplayMedia=e;
},{}],"Fzdr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimOnTrack=s,exports.shimPeerConnection=c,exports.shimSenderGetStats=p,exports.shimReceiverGetStats=u,exports.shimRemoveStream=f,exports.shimRTCDataChannel=d,exports.shimAddTransceiver=C,exports.shimGetParameters=y,exports.shimCreateOffer=l,exports.shimCreateAnswer=m,Object.defineProperty(exports,"shimGetUserMedia",{enumerable:!0,get:function(){return t.shimGetUserMedia}}),Object.defineProperty(exports,"shimGetDisplayMedia",{enumerable:!0,get:function(){return n.shimGetDisplayMedia}});var e=o(require("../utils")),t=require("./getusermedia"),n=require("./getdisplaymedia");function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e){"object"===a(e)&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function c(e,t){if("object"===a(e)&&(e.RTCPeerConnection||e.mozRTCPeerConnection)){!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var n=e.RTCPeerConnection.prototype[t],r=i({},t,function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)});e.RTCPeerConnection.prototype[t]=r[t]});var n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var[e,o,i]=arguments;return r.apply(this,[e||null]).then(function(e){if(t.version<53&&!o)try{e.forEach(function(e){e.type=n[e.type]||e.type})}catch(r){if("TypeError"!==r.name)throw r;e.forEach(function(t,r){e.set(r,Object.assign({},t,{type:n[t.type]||t.type}))})}return e}).then(o,i)}}}function p(e){if("object"===a(e)&&e.RTCPeerConnection&&e.RTCRtpSender&&!(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach(function(t){return t._pc=e}),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}}function u(t){if("object"===a(t)&&t.RTCPeerConnection&&t.RTCRtpSender&&!(t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)){var n=t.RTCPeerConnection.prototype.getReceivers;n&&(t.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=n.apply(this,[]);return t.forEach(function(t){return t._pc=e}),t}),e.wrapPeerConnectionEvent(t,"track",function(e){return e.receiver._pc=e.srcElement,e}),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}}function f(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(t){var n=this;e.deprecated("removeStream","removeTrack"),this.getSenders().forEach(function(e){e.track&&t.getTracks().includes(e.track)&&n.removeTrack(e)})})}function d(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function C(e){if("object"===a(e)&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];var e=arguments[1],n=e&&"sendEncodings"in e;n&&e.sendEncodings.forEach(function(e){if("rid"in e){if(!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.")}if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});var r=t.apply(this,arguments);if(n){var{sender:o}=r,i=o.getParameters();"encodings"in i&&(1!==i.encodings.length||0!==Object.keys(i.encodings[0]).length)||(i.encodings=e.sendEncodings,o.sendEncodings=e.sendEncodings,this.setParametersPromises.push(o.setParameters(i).then(function(){delete o.sendEncodings}).catch(function(){delete o.sendEncodings})))}return r})}}function y(e){if("object"===a(e)&&e.RTCRtpSender){var t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){var e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}}function l(e){if("object"===a(e)&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){var e=arguments,n=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(function(){return t.apply(n,e)}).finally(function(){n.setParametersPromises=[]}):t.apply(this,arguments)}}}function m(e){if("object"===a(e)&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){var e=arguments,n=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(function(){return t.apply(n,e)}).finally(function(){n.setParametersPromises=[]}):t.apply(this,arguments)}}}
},{"../utils":"iSxC","./getusermedia":"GzSv","./getdisplaymedia":"UuGU"}],"t1lL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimLocalStreamsAPI=n,exports.shimRemoteStreamsAPI=i,exports.shimCallbacksAPI=a,exports.shimGetUserMedia=c,exports.shimConstraints=s,exports.shimRTCIceServerUrls=d,exports.shimTrackEventTransceiver=f,exports.shimCreateOfferLegacy=p,exports.shimAudioContext=u;var e=r(require("../utils"));function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function r(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t();if(r&&r.has(e))return r.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=n?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(o,i,a):o[i]=e[i]}return o.default=e,r&&r.set(e,o),o}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e){if("object"===o(e)&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){var r=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach(function(o){return t.call(r,o,e)}),e.getVideoTracks().forEach(function(o){return t.call(r,o,e)})},e.RTCPeerConnection.prototype.addTrack=function(e){for(var r=this,o=arguments.length,n=new Array(o>1?o-1:0),i=1;i<o;i++)n[i-1]=arguments[i];return n&&n.forEach(function(e){r._localStreams?r._localStreams.includes(e)||r._localStreams.push(e):r._localStreams=[e]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._localStreams||(this._localStreams=[]);var r=this._localStreams.indexOf(e);if(-1!==r){this._localStreams.splice(r,1);var o=e.getTracks();this.getSenders().forEach(function(e){o.includes(e.track)&&t.removeTrack(e)})}})}}function i(e){if("object"===o(e)&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){var t=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach(function(e){if(t._remoteStreams||(t._remoteStreams=[]),!t._remoteStreams.includes(e)){t._remoteStreams.push(e);var r=new Event("addstream");r.stream=e,t.dispatchEvent(r)}})})}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach(function(t){if(e._remoteStreams||(e._remoteStreams=[]),!(e._remoteStreams.indexOf(t)>=0)){e._remoteStreams.push(t);var r=new Event("addstream");r.stream=t,e.dispatchEvent(r)}})}),t.apply(e,arguments)}}}function a(e){if("object"===o(e)&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,r=t.createOffer,n=t.createAnswer,i=t.setLocalDescription,a=t.setRemoteDescription,c=t.addIceCandidate;t.createOffer=function(e,t){var o=arguments.length>=2?arguments[2]:arguments[0],n=r.apply(this,[o]);return t?(n.then(e,t),Promise.resolve()):n},t.createAnswer=function(e,t){var r=arguments.length>=2?arguments[2]:arguments[0],o=n.apply(this,[r]);return t?(o.then(e,t),Promise.resolve()):o};var s=function(e,t,r){var o=i.apply(this,[e]);return r?(o.then(t,r),Promise.resolve()):o};t.setLocalDescription=s,s=function(e,t,r){var o=a.apply(this,[e]);return r?(o.then(t,r),Promise.resolve()):o},t.setRemoteDescription=s,s=function(e,t,r){var o=c.apply(this,[e]);return r?(o.then(t,r),Promise.resolve()):o},t.addIceCandidate=s}}function c(e){var t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){var r=t.mediaDevices,o=r.getUserMedia.bind(r);t.mediaDevices.getUserMedia=function(e){return o(s(e))}}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,r,o){t.mediaDevices.getUserMedia(e).then(r,o)}.bind(t))}function s(t){return t&&void 0!==t.video?Object.assign({},t,{video:e.compactObject(t.video)}):t}function d(t){if(t.RTCPeerConnection){var r=t.RTCPeerConnection;t.RTCPeerConnection=function(t,o){if(t&&t.iceServers){for(var n=[],i=0;i<t.iceServers.length;i++){var a=t.iceServers[i];!a.hasOwnProperty("urls")&&a.hasOwnProperty("url")?(e.deprecated("RTCIceServer.url","RTCIceServer.urls"),(a=JSON.parse(JSON.stringify(a))).urls=a.url,delete a.url,n.push(a)):n.push(t.iceServers[i])}t.iceServers=n}return new r(t,o)},t.RTCPeerConnection.prototype=r.prototype,"generateCertificate"in r&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get:function(){return r.generateCertificate}})}}function f(e){"object"===o(e)&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function p(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);var r=this.getTransceivers().find(function(e){return"audio"===e.receiver.track.kind});!1===e.offerToReceiveAudio&&r?"sendrecv"===r.direction?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":"recvonly"===r.direction&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):!0!==e.offerToReceiveAudio||r||this.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);var o=this.getTransceivers().find(function(e){return"video"===e.receiver.track.kind});!1===e.offerToReceiveVideo&&o?"sendrecv"===o.direction?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":"recvonly"===o.direction&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):!0!==e.offerToReceiveVideo||o||this.addTransceiver("video")}return t.apply(this,arguments)}}function u(e){"object"!==o(e)||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}
},{"../utils":"iSxC"}],"GOQK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimRTCIceCandidate=a,exports.shimMaxMessageSize=c,exports.shimSendThrowTypeError=s,exports.shimConnectionState=p,exports.removeExtmapAllowMixed=d,exports.shimAddIceCandidateNullOrEmpty=u;var e=r(require("sdp")),t=o(require("./utils"));function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=n();if(t&&t.has(e))return t.get(e);var o={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=r?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(o,i,a):o[i]=e[i]}return o.default=e,t&&t.set(e,o),o}function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(n){if(n.RTCIceCandidate&&!(n.RTCIceCandidate&&"foundation"in n.RTCIceCandidate.prototype)){var o=n.RTCIceCandidate;n.RTCIceCandidate=function(t){if("object"===i(t)&&t.candidate&&0===t.candidate.indexOf("a=")&&((t=JSON.parse(JSON.stringify(t))).candidate=t.candidate.substr(2)),t.candidate&&t.candidate.length){var n=new o(t),r=e.default.parseCandidate(t.candidate),a=Object.assign(n,r);return a.toJSON=function(){return{candidate:a.candidate,sdpMid:a.sdpMid,sdpMLineIndex:a.sdpMLineIndex,usernameFragment:a.usernameFragment}},a}return new o(t)},n.RTCIceCandidate.prototype=o.prototype,t.wrapPeerConnectionEvent(n,"icecandidate",function(e){return e.candidate&&Object.defineProperty(e,"candidate",{value:new n.RTCIceCandidate(e.candidate),writable:"false"}),e})}}function c(t,n){if(t.RTCPeerConnection){"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp}});var o=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===n.browser&&n.version>=76){var{sdpSemantics:t}=this.getConfiguration();"plan-b"===t&&Object.defineProperty(this,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(function(t){if(!t||!t.sdp)return!1;var n=e.default.splitSections(t.sdp);return n.shift(),n.some(function(t){var n=e.default.parseMLine(t);return n&&"application"===n.kind&&-1!==n.protocol.indexOf("SCTP")})}(arguments[0])){var r,i=function(e){var t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;var n=parseInt(t[1],10);return n!=n?-1:n}(arguments[0]),a=(p=i,d=65536,"firefox"===n.browser&&(d=n.version<57?-1===p?16384:2147483637:n.version<60?57===n.version?65535:65536:2147483637),d),c=function(t,o){var r=65536;"firefox"===n.browser&&57===n.version&&(r=65535);var i=e.default.matchPrefix(t.sdp,"a=max-message-size:");return i.length>0?r=parseInt(i[0].substr(19),10):"firefox"===n.browser&&-1!==o&&(r=2147483637),r}(arguments[0],i);r=0===a&&0===c?Number.POSITIVE_INFINITY:0===a||0===c?Math.max(a,c):Math.min(a,c);var s={};Object.defineProperty(s,"maxMessageSize",{get:function(){return r}}),this._sctp=s}var p,d;return o.apply(this,arguments)}}}function s(e){if(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype){var n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){var e=n.apply(this,arguments);return o(e,this),e},t.wrapPeerConnectionEvent(e,"datachannel",function(e){return o(e.channel,e.target),e})}function o(e,t){var n=e.send;e.send=function(){var o=arguments[0],r=o.length||o.size||o.byteLength;if("open"===e.readyState&&t.sctp&&r>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}}function p(e){if(e.RTCPeerConnection&&!("connectionState"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(function(e){var n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(e){var t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;var n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}})}}function d(e,t){if(e.RTCPeerConnection&&!("chrome"===t.browser&&t.version>=71||"safari"===t.browser&&t.version>=605)){var n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){var o=t.sdp.split("\n").filter(function(e){return"a=extmap-allow-mixed"!==e.trim()}).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:o}):t.sdp=o}return n.apply(this,arguments)}}}function u(e,t){if(e.RTCPeerConnection&&e.RTCPeerConnection.prototype){var n=e.RTCPeerConnection.prototype.addIceCandidate;n&&0!==n.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}}
},{"sdp":"YHvh","./utils":"iSxC"}],"KtlG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.adapterFactory=o;var e=m(require("./utils")),i=m(require("./chrome/chrome_shim")),r=m(require("./edge/edge_shim")),s=m(require("./firefox/firefox_shim")),t=m(require("./safari/safari_shim")),a=m(require("./common_shim"));function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function m(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var i=n();if(i&&i.has(e))return i.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var a=s?Object.getOwnPropertyDescriptor(e,t):null;a&&(a.get||a.set)?Object.defineProperty(r,t,a):r[t]=e[t]}return r.default=e,i&&i.set(e,r),r}function o(){var{window:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},m=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0},o=e.log,h=e.detectBrowser(n),d={browserDetails:h,commonShim:a,extractVersion:e.extractVersion,disableLog:e.disableLog,disableWarnings:e.disableWarnings};switch(h.browser){case"chrome":if(!i||!i.shimPeerConnection||!m.shimChrome)return o("Chrome shim is not included in this adapter release."),d;if(null===h.version)return o("Chrome shim can not determine version, not shimming."),d;o("adapter.js shimming chrome."),d.browserShim=i,a.shimAddIceCandidateNullOrEmpty(n,h),i.shimGetUserMedia(n,h),i.shimMediaStream(n,h),i.shimPeerConnection(n,h),i.shimOnTrack(n,h),i.shimAddTrackRemoveTrack(n,h),i.shimGetSendersWithDtmf(n,h),i.shimGetStats(n,h),i.shimSenderReceiverGetStats(n,h),i.fixNegotiationNeeded(n,h),a.shimRTCIceCandidate(n,h),a.shimConnectionState(n,h),a.shimMaxMessageSize(n,h),a.shimSendThrowTypeError(n,h),a.removeExtmapAllowMixed(n,h);break;case"firefox":if(!s||!s.shimPeerConnection||!m.shimFirefox)return o("Firefox shim is not included in this adapter release."),d;o("adapter.js shimming firefox."),d.browserShim=s,a.shimAddIceCandidateNullOrEmpty(n,h),s.shimGetUserMedia(n,h),s.shimPeerConnection(n,h),s.shimOnTrack(n,h),s.shimRemoveStream(n,h),s.shimSenderGetStats(n,h),s.shimReceiverGetStats(n,h),s.shimRTCDataChannel(n,h),s.shimAddTransceiver(n,h),s.shimGetParameters(n,h),s.shimCreateOffer(n,h),s.shimCreateAnswer(n,h),a.shimRTCIceCandidate(n,h),a.shimConnectionState(n,h),a.shimMaxMessageSize(n,h),a.shimSendThrowTypeError(n,h);break;case"edge":if(!r||!r.shimPeerConnection||!m.shimEdge)return o("MS edge shim is not included in this adapter release."),d;o("adapter.js shimming edge."),d.browserShim=r,r.shimGetUserMedia(n,h),r.shimGetDisplayMedia(n,h),r.shimPeerConnection(n,h),r.shimReplaceTrack(n,h),a.shimMaxMessageSize(n,h),a.shimSendThrowTypeError(n,h);break;case"safari":if(!t||!m.shimSafari)return o("Safari shim is not included in this adapter release."),d;o("adapter.js shimming safari."),d.browserShim=t,a.shimAddIceCandidateNullOrEmpty(n,h),t.shimRTCIceServerUrls(n,h),t.shimCreateOfferLegacy(n,h),t.shimCallbacksAPI(n,h),t.shimLocalStreamsAPI(n,h),t.shimRemoteStreamsAPI(n,h),t.shimTrackEventTransceiver(n,h),t.shimGetUserMedia(n,h),t.shimAudioContext(n,h),a.shimRTCIceCandidate(n,h),a.shimMaxMessageSize(n,h),a.shimSendThrowTypeError(n,h),a.removeExtmapAllowMixed(n,h);break;default:o("Unsupported browser!")}return d}
},{"./utils":"iSxC","./chrome/chrome_shim":"uI5X","./edge/edge_shim":"XRic","./firefox/firefox_shim":"Fzdr","./safari/safari_shim":"t1lL","./common_shim":"GOQK"}],"tI1X":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./adapter_factory.js"),t=(0,e.adapterFactory)({window:"undefined"==typeof window?void 0:window}),d=t;exports.default=d;
},{"./adapter_factory.js":"KtlG"}],"sXtV":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.webRTCAdapter=void 0;var t=e(require("webrtc-adapter"));exports.webRTCAdapter=t.default;
},{"webrtc-adapter":"tI1X"}],"I31f":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Supports=void 0;var r=require("./adapter");exports.Supports=new(function(){function e(){this.isIOS=["iPad","iPhone","iPod"].includes(navigator.platform),this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}return e.prototype.isWebRTCSupported=function(){return"undefined"!=typeof RTCPeerConnection},e.prototype.isBrowserSupported=function(){var r=this.getBrowser(),e=this.getVersion();return!!this.supportedBrowsers.includes(r)&&("chrome"===r?e>=this.minChromeVersion:"firefox"===r?e>=this.minFirefoxVersion:"safari"===r&&(!this.isIOS&&e>=this.minSafariVersion))},e.prototype.getBrowser=function(){return r.webRTCAdapter.browserDetails.browser},e.prototype.getVersion=function(){return r.webRTCAdapter.browserDetails.version||0},e.prototype.isUnifiedPlanSupported=function(){var e,i=this.getBrowser(),t=r.webRTCAdapter.browserDetails.version||0;if("chrome"===i&&t<72)return!1;if("firefox"===i&&t>=59)return!0;if(!(window.RTCRtpTransceiver&&"currentDirection"in RTCRtpTransceiver.prototype))return!1;var o=!1;try{(e=new RTCPeerConnection).addTransceiver("audio"),o=!0}catch(s){}finally{e&&e.close()}return o},e.prototype.toString=function(){return"Supports: \n    browser:"+this.getBrowser()+" \n    version:"+this.getVersion()+" \n    isIOS:"+this.isIOS+" \n    isWebRTCSupported:"+this.isWebRTCSupported()+" \n    isBrowserSupported:"+this.isBrowserSupported()+" \n    isUnifiedPlanSupported:"+this.isUnifiedPlanSupported()},e}());
},{"./adapter":"sXtV"}],"BHXf":[function(require,module,exports) {
"use strict";var e=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),t=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(r){if(r&&r.__esModule)return r;var o={};if(null!=r)for(var n in r)"default"!==n&&Object.prototype.hasOwnProperty.call(r,n)&&e(o,r,n);return t(o,r),o};Object.defineProperty(exports,"__esModule",{value:!0}),exports.util=void 0;var o=r(require("peerjs-js-binarypack")),n=require("./supports"),i={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"turn:0.peerjs.com:3478",username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};exports.util=new(function(){function e(){this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.chunkedMTU=16300,this.defaultConfig=i,this.browser=n.Supports.getBrowser(),this.browserVersion=n.Supports.getVersion(),this.supports=function(){var e,t={browser:n.Supports.isBrowserSupported(),webRTC:n.Supports.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!t.webRTC)return t;try{e=new RTCPeerConnection(i),t.audioVideo=!0;var r=void 0;try{r=e.createDataChannel("_PEERJSTEST",{ordered:!0}),t.data=!0,t.reliable=!!r.ordered;try{r.binaryType="blob",t.binaryBlob=!n.Supports.isIOS}catch(o){}}catch(o){}finally{r&&r.close()}}catch(o){}finally{e&&e.close()}return t}(),this.pack=o.pack,this.unpack=o.unpack,this._dataCount=1}return e.prototype.noop=function(){},e.prototype.validateId=function(e){return!e||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(e)},e.prototype.chunk=function(e){for(var t=[],r=e.size,o=Math.ceil(r/exports.util.chunkedMTU),n=0,i=0;i<r;){var a=Math.min(r,i+exports.util.chunkedMTU),u=e.slice(i,a),s={__peerData:this._dataCount,n:n,data:u,total:o};t.push(s),i=a,n++}return this._dataCount++,t},e.prototype.blobToArrayBuffer=function(e,t){var r=new FileReader;return r.onload=function(e){e.target&&t(e.target.result)},r.readAsArrayBuffer(e),r},e.prototype.binaryStringToArrayBuffer=function(e){for(var t=new Uint8Array(e.length),r=0;r<e.length;r++)t[r]=255&e.charCodeAt(r);return t.buffer},e.prototype.randomToken=function(){return Math.random().toString(36).substr(2)},e.prototype.isSecure=function(){return"https:"===location.protocol},e}());
},{"peerjs-js-binarypack":"kdPp","./supports":"I31f"}],"JJlS":[function(require,module,exports) {
"use strict";var e=Object.prototype.hasOwnProperty,t="~";function n(){}function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,n,o,s,i){if("function"!=typeof o)throw new TypeError("The listener must be a function");var c=new r(o,s||e,i),f=t?t+n:n;return e._events[f]?e._events[f].fn?e._events[f]=[e._events[f],c]:e._events[f].push(c):(e._events[f]=c,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function i(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(t=!1)),i.prototype.eventNames=function(){var n,r,o=[];if(0===this._eventsCount)return o;for(r in n=this._events)e.call(n,r)&&o.push(t?r.slice(1):r);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(n)):o},i.prototype.listeners=function(e){var n=t?t+e:e,r=this._events[n];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,s=r.length,i=new Array(s);o<s;o++)i[o]=r[o].fn;return i},i.prototype.listenerCount=function(e){var n=t?t+e:e,r=this._events[n];return r?r.fn?1:r.length:0},i.prototype.emit=function(e,n,r,o,s,i){var c=t?t+e:e;if(!this._events[c])return!1;var f,u,a=this._events[c],l=arguments.length;if(a.fn){switch(a.once&&this.removeListener(e,a.fn,void 0,!0),l){case 1:return a.fn.call(a.context),!0;case 2:return a.fn.call(a.context,n),!0;case 3:return a.fn.call(a.context,n,r),!0;case 4:return a.fn.call(a.context,n,r,o),!0;case 5:return a.fn.call(a.context,n,r,o,s),!0;case 6:return a.fn.call(a.context,n,r,o,s,i),!0}for(u=1,f=new Array(l-1);u<l;u++)f[u-1]=arguments[u];a.fn.apply(a.context,f)}else{var v,h=a.length;for(u=0;u<h;u++)switch(a[u].once&&this.removeListener(e,a[u].fn,void 0,!0),l){case 1:a[u].fn.call(a[u].context);break;case 2:a[u].fn.call(a[u].context,n);break;case 3:a[u].fn.call(a[u].context,n,r);break;case 4:a[u].fn.call(a[u].context,n,r,o);break;default:if(!f)for(v=1,f=new Array(l-1);v<l;v++)f[v-1]=arguments[v];a[u].fn.apply(a[u].context,f)}}return!0},i.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},i.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},i.prototype.removeListener=function(e,n,r,o){var i=t?t+e:e;if(!this._events[i])return this;if(!n)return s(this,i),this;var c=this._events[i];if(c.fn)c.fn!==n||o&&!c.once||r&&c.context!==r||s(this,i);else{for(var f=0,u=[],a=c.length;f<a;f++)(c[f].fn!==n||o&&!c[f].once||r&&c[f].context!==r)&&u.push(c[f]);u.length?this._events[i]=1===u.length?u[0]:u:s(this,i)}return this},i.prototype.removeAllListeners=function(e){var r;return e?(r=t?t+e:e,this._events[r]&&s(this,r)):(this._events=new n,this._eventsCount=0),this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prefixed=t,i.EventEmitter=i,"undefined"!=typeof module&&(module.exports=i);
},{}],"WOs9":[function(require,module,exports) {
"use strict";var r=this&&this.__read||function(r,e){var o="function"==typeof Symbol&&r[Symbol.iterator];if(!o)return r;var t,n,l=o.call(r),i=[];try{for(;(void 0===e||e-- >0)&&!(t=l.next()).done;)i.push(t.value)}catch(s){n={error:s}}finally{try{t&&!t.done&&(o=l.return)&&o.call(l)}finally{if(n)throw n.error}}return i},e=this&&this.__spreadArray||function(r,e){for(var o=0,t=e.length,n=r.length;o<t;o++,n++)r[n]=e[o];return r};Object.defineProperty(exports,"__esModule",{value:!0}),exports.LogLevel=void 0;var o,t="PeerJS: ";!function(r){r[r.Disabled=0]="Disabled",r[r.Errors=1]="Errors",r[r.Warnings=2]="Warnings",r[r.All=3]="All"}(o=exports.LogLevel||(exports.LogLevel={}));var n=function(){function n(){this._logLevel=o.Disabled}return Object.defineProperty(n.prototype,"logLevel",{get:function(){return this._logLevel},set:function(r){this._logLevel=r},enumerable:!1,configurable:!0}),n.prototype.log=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._logLevel>=o.All&&this._print.apply(this,e([o.All],r(t)))},n.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._logLevel>=o.Warnings&&this._print.apply(this,e([o.Warnings],r(t)))},n.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._logLevel>=o.Errors&&this._print.apply(this,e([o.Errors],r(t)))},n.prototype.setLogFunction=function(r){this._print=r},n.prototype._print=function(n){for(var l=[],i=1;i<arguments.length;i++)l[i-1]=arguments[i];var s=e([t],r(l));for(var a in s)s[a]instanceof Error&&(s[a]="("+s[a].name+") "+s[a].message);n>=o.All?console.log.apply(console,e([],r(s))):n>=o.Warnings?console.warn.apply(console,e(["WARNING"],r(s))):n>=o.Errors&&console.error.apply(console,e(["ERROR"],r(s)))},n}();exports.default=new n;
},{}],"ZRYf":[function(require,module,exports) {
"use strict";var e,r,o,n,t,a,i;Object.defineProperty(exports,"__esModule",{value:!0}),exports.ServerMessageType=exports.SocketEventType=exports.SerializationType=exports.PeerErrorType=exports.PeerEventType=exports.ConnectionType=exports.ConnectionEventType=void 0,function(e){e.Open="open",e.Stream="stream",e.Data="data",e.Close="close",e.Error="error",e.IceStateChanged="iceStateChanged"}(e=exports.ConnectionEventType||(exports.ConnectionEventType={})),function(e){e.Data="data",e.Media="media"}(r=exports.ConnectionType||(exports.ConnectionType={})),function(e){e.Open="open",e.Close="close",e.Connection="connection",e.Call="call",e.Disconnected="disconnected",e.Error="error"}(o=exports.PeerEventType||(exports.PeerEventType={})),function(e){e.BrowserIncompatible="browser-incompatible",e.Disconnected="disconnected",e.InvalidID="invalid-id",e.InvalidKey="invalid-key",e.Network="network",e.PeerUnavailable="peer-unavailable",e.SslUnavailable="ssl-unavailable",e.ServerError="server-error",e.SocketError="socket-error",e.SocketClosed="socket-closed",e.UnavailableID="unavailable-id",e.WebRTC="webrtc"}(n=exports.PeerErrorType||(exports.PeerErrorType={})),function(e){e.Binary="binary",e.BinaryUTF8="binary-utf8",e.JSON="json"}(t=exports.SerializationType||(exports.SerializationType={})),function(e){e.Message="message",e.Disconnected="disconnected",e.Error="error",e.Close="close"}(a=exports.SocketEventType||(exports.SocketEventType={})),function(e){e.Heartbeat="HEARTBEAT",e.Candidate="CANDIDATE",e.Offer="OFFER",e.Answer="ANSWER",e.Open="OPEN",e.Error="ERROR",e.IdTaken="ID-TAKEN",e.InvalidKey="INVALID-KEY",e.Leave="LEAVE",e.Expire="EXPIRE"}(i=exports.ServerMessageType||(exports.ServerMessageType={}));
},{}],"wJlv":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),t=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,s,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){s={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i},n=this&&this.__spreadArray||function(e,t){for(var n=0,o=t.length,s=e.length;n<o;n++,s++)e[s]=t[n];return e},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Socket=void 0;var r=require("eventemitter3"),i=s(require("./logger")),c=require("./enums"),a=function(s){function r(e,t,n,o,r,i){void 0===i&&(i=5e3);var c=s.call(this)||this;c.pingInterval=i,c._disconnected=!0,c._messagesQueue=[];var a=e?"wss://":"ws://";return c._baseUrl=a+t+":"+n+o+"peerjs?key="+r,c}return e(r,s),r.prototype.start=function(e,t){var n=this;this._id=e;var o=this._baseUrl+"&id="+e+"&token="+t;!this._socket&&this._disconnected&&(this._socket=new WebSocket(o),this._disconnected=!1,this._socket.onmessage=function(e){var t;try{t=JSON.parse(e.data),i.default.log("Server message received:",t)}catch(o){return void i.default.log("Invalid server message",e.data)}n.emit(c.SocketEventType.Message,t)},this._socket.onclose=function(e){n._disconnected||(i.default.log("Socket closed.",e),n._cleanup(),n._disconnected=!0,n.emit(c.SocketEventType.Disconnected))},this._socket.onopen=function(){n._disconnected||(n._sendQueuedMessages(),i.default.log("Socket open"),n._scheduleHeartbeat())})},r.prototype._scheduleHeartbeat=function(){var e=this;this._wsPingTimer=setTimeout(function(){e._sendHeartbeat()},this.pingInterval)},r.prototype._sendHeartbeat=function(){if(this._wsOpen()){var e=JSON.stringify({type:c.ServerMessageType.Heartbeat});this._socket.send(e),this._scheduleHeartbeat()}else i.default.log("Cannot send heartbeat, because socket closed")},r.prototype._wsOpen=function(){return!!this._socket&&1===this._socket.readyState},r.prototype._sendQueuedMessages=function(){var e,s,r=n([],t(this._messagesQueue));this._messagesQueue=[];try{for(var i=o(r),c=i.next();!c.done;c=i.next()){var a=c.value;this.send(a)}}catch(u){e={error:u}}finally{try{c&&!c.done&&(s=i.return)&&s.call(i)}finally{if(e)throw e.error}}},r.prototype.send=function(e){if(!this._disconnected)if(this._id)if(e.type){if(this._wsOpen()){var t=JSON.stringify(e);this._socket.send(t)}}else this.emit(c.SocketEventType.Error,"Invalid message");else this._messagesQueue.push(e)},r.prototype.close=function(){this._disconnected||(this._cleanup(),this._disconnected=!0)},r.prototype._cleanup=function(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)},r}(r.EventEmitter);exports.Socket=a;
},{"eventemitter3":"JJlS","./logger":"WOs9","./enums":"ZRYf"}],"HCdX":[function(require,module,exports) {
"use strict";var e=this&&this.__assign||function(){return(e=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e}).apply(this,arguments)},n=this&&this.__awaiter||function(e,n,t,o){return new(t||(t=Promise))(function(i,r){function c(e){try{s(o.next(e))}catch(n){r(n)}}function a(e){try{s(o.throw(e))}catch(n){r(n)}}function s(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(c,a)}s((o=o.apply(e,n||[])).next())})},t=this&&this.__generator||function(e,n){var t,o,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(t)throw new TypeError("Generator is already executing.");for(;c;)try{if(t=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,o=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=n.call(e,c)}catch(a){r=[6,a],o=0}finally{t=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Negotiator=void 0;var i=require("./util"),r=o(require("./logger")),c=require("./enums"),a=function(){function o(e){this.connection=e}return o.prototype.startConnection=function(e){var n=this._startPeerConnection();if(this.connection.peerConnection=n,this.connection.type===c.ConnectionType.Media&&e._stream&&this._addTracksToConnection(e._stream,n),e.originator){if(this.connection.type===c.ConnectionType.Data){var t=this.connection,o={ordered:!!e.reliable},i=n.createDataChannel(t.label,o);t.initialize(i)}this._makeOffer()}else this.handleSDP("OFFER",e.sdp)},o.prototype._startPeerConnection=function(){r.default.log("Creating RTCPeerConnection.");var e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e},o.prototype._setupListeners=function(e){var n=this,t=this.connection.peer,o=this.connection.connectionId,a=this.connection.type,s=this.connection.provider;r.default.log("Listening for ICE candidates."),e.onicecandidate=function(e){e.candidate&&e.candidate.candidate&&(r.default.log("Received ICE candidates for "+t+":",e.candidate),s.socket.send({type:c.ServerMessageType.Candidate,payload:{candidate:e.candidate,type:a,connectionId:o},dst:t}))},e.oniceconnectionstatechange=function(){switch(e.iceConnectionState){case"failed":r.default.log("iceConnectionState is failed, closing connections to "+t),n.connection.emit(c.ConnectionEventType.Error,new Error("Negotiation of connection to "+t+" failed.")),n.connection.close();break;case"closed":r.default.log("iceConnectionState is closed, closing connections to "+t),n.connection.emit(c.ConnectionEventType.Error,new Error("Connection to "+t+" closed.")),n.connection.close();break;case"disconnected":r.default.log("iceConnectionState changed to disconnected on the connection with "+t);break;case"completed":e.onicecandidate=i.util.noop}n.connection.emit(c.ConnectionEventType.IceStateChanged,e.iceConnectionState)},r.default.log("Listening for data channel"),e.ondatachannel=function(e){r.default.log("Received data channel");var n=e.channel;s.getConnection(t,o).initialize(n)},r.default.log("Listening for remote stream"),e.ontrack=function(e){r.default.log("Received remote stream");var i=e.streams[0],a=s.getConnection(t,o);if(a.type===c.ConnectionType.Media){var d=a;n._addStreamToMediaConnection(i,d)}}},o.prototype.cleanup=function(){r.default.log("Cleaning up PeerConnection to "+this.connection.peer);var e=this.connection.peerConnection;if(e){this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=function(){};var n="closed"!==e.signalingState,t=!1;if(this.connection.type===c.ConnectionType.Data){var o=this.connection.dataChannel;o&&(t=!!o.readyState&&"closed"!==o.readyState)}(n||t)&&e.close()}},o.prototype._makeOffer=function(){return n(this,void 0,Promise,function(){var n,o,a,s,d,l,u;return t(this,function(t){switch(t.label){case 0:n=this.connection.peerConnection,o=this.connection.provider,t.label=1;case 1:return t.trys.push([1,7,,8]),[4,n.createOffer(this.connection.options.constraints)];case 2:a=t.sent(),r.default.log("Created offer."),this.connection.options.sdpTransform&&"function"==typeof this.connection.options.sdpTransform&&(a.sdp=this.connection.options.sdpTransform(a.sdp)||a.sdp),t.label=3;case 3:return t.trys.push([3,5,,6]),[4,n.setLocalDescription(a)];case 4:return t.sent(),r.default.log("Set localDescription:",a,"for:"+this.connection.peer),s={sdp:a,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata,browser:i.util.browser},this.connection.type===c.ConnectionType.Data&&(d=this.connection,s=e(e({},s),{label:d.label,reliable:d.reliable,serialization:d.serialization})),o.socket.send({type:c.ServerMessageType.Offer,payload:s,dst:this.connection.peer}),[3,6];case 5:return"OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"!=(l=t.sent())&&(o.emitError(c.PeerErrorType.WebRTC,l),r.default.log("Failed to setLocalDescription, ",l)),[3,6];case 6:return[3,8];case 7:return u=t.sent(),o.emitError(c.PeerErrorType.WebRTC,u),r.default.log("Failed to createOffer, ",u),[3,8];case 8:return[2]}})})},o.prototype._makeAnswer=function(){return n(this,void 0,Promise,function(){var e,n,o,a,s;return t(this,function(t){switch(t.label){case 0:e=this.connection.peerConnection,n=this.connection.provider,t.label=1;case 1:return t.trys.push([1,7,,8]),[4,e.createAnswer()];case 2:o=t.sent(),r.default.log("Created answer."),this.connection.options.sdpTransform&&"function"==typeof this.connection.options.sdpTransform&&(o.sdp=this.connection.options.sdpTransform(o.sdp)||o.sdp),t.label=3;case 3:return t.trys.push([3,5,,6]),[4,e.setLocalDescription(o)];case 4:return t.sent(),r.default.log("Set localDescription:",o,"for:"+this.connection.peer),n.socket.send({type:c.ServerMessageType.Answer,payload:{sdp:o,type:this.connection.type,connectionId:this.connection.connectionId,browser:i.util.browser},dst:this.connection.peer}),[3,6];case 5:return a=t.sent(),n.emitError(c.PeerErrorType.WebRTC,a),r.default.log("Failed to setLocalDescription, ",a),[3,6];case 6:return[3,8];case 7:return s=t.sent(),n.emitError(c.PeerErrorType.WebRTC,s),r.default.log("Failed to create answer, ",s),[3,8];case 8:return[2]}})})},o.prototype.handleSDP=function(e,o){return n(this,void 0,Promise,function(){var n,i,a,s;return t(this,function(t){switch(t.label){case 0:o=new RTCSessionDescription(o),n=this.connection.peerConnection,i=this.connection.provider,r.default.log("Setting remote description",o),a=this,t.label=1;case 1:return t.trys.push([1,5,,6]),[4,n.setRemoteDescription(o)];case 2:return t.sent(),r.default.log("Set remoteDescription:"+e+" for:"+this.connection.peer),"OFFER"!==e?[3,4]:[4,a._makeAnswer()];case 3:t.sent(),t.label=4;case 4:return[3,6];case 5:return s=t.sent(),i.emitError(c.PeerErrorType.WebRTC,s),r.default.log("Failed to setRemoteDescription, ",s),[3,6];case 6:return[2]}})})},o.prototype.handleCandidate=function(e){return n(this,void 0,Promise,function(){var n,o,i,a,s,d;return t(this,function(t){switch(t.label){case 0:r.default.log("handleCandidate:",e),n=e.candidate,o=e.sdpMLineIndex,i=e.sdpMid,a=this.connection.peerConnection,s=this.connection.provider,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,a.addIceCandidate(new RTCIceCandidate({sdpMid:i,sdpMLineIndex:o,candidate:n}))];case 2:return t.sent(),r.default.log("Added ICE candidate for:"+this.connection.peer),[3,4];case 3:return d=t.sent(),s.emitError(c.PeerErrorType.WebRTC,d),r.default.log("Failed to handleCandidate, ",d),[3,4];case 4:return[2]}})})},o.prototype._addTracksToConnection=function(e,n){if(r.default.log("add tracks from stream "+e.id+" to peer connection"),!n.addTrack)return r.default.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach(function(t){n.addTrack(t,e)})},o.prototype._addStreamToMediaConnection=function(e,n){r.default.log("add stream "+e.id+" to media connection "+n.connectionId),n.addStream(e)},o}();exports.Negotiator=a;
},{"./util":"BHXf","./logger":"WOs9","./enums":"ZRYf"}],"tQFK":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.BaseConnection=void 0;var e=require("eventemitter3"),n=function(e){function n(t,n,o){var r=e.call(this)||this;return r.peer=t,r.provider=n,r.options=o,r._open=!1,r.metadata=o.metadata,r}return t(n,e),Object.defineProperty(n.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),n}(e.EventEmitter);exports.BaseConnection=n;
},{"eventemitter3":"JJlS"}],"dbHP":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),t=this&&this.__assign||function(){return(t=Object.assign||function(e){for(var t,o=1,r=arguments.length;o<r;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,o=t&&e[t],r=0;if(o)return o.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.MediaConnection=void 0;var n=require("./util"),i=r(require("./logger")),a=require("./negotiator"),s=require("./enums"),l=require("./baseconnection"),c=function(r){function l(e,t,o){var i=r.call(this,e,t,o)||this;return i._localStream=i.options._stream,i.connectionId=i.options.connectionId||l.ID_PREFIX+n.util.randomToken(),i._negotiator=new a.Negotiator(i),i._localStream&&i._negotiator.startConnection({_stream:i._localStream,originator:!0}),i}return e(l,r),Object.defineProperty(l.prototype,"type",{get:function(){return s.ConnectionType.Media},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"localStream",{get:function(){return this._localStream},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"remoteStream",{get:function(){return this._remoteStream},enumerable:!1,configurable:!0}),l.prototype.addStream=function(e){i.default.log("Receiving stream",e),this._remoteStream=e,r.prototype.emit.call(this,s.ConnectionEventType.Stream,e)},l.prototype.handleMessage=function(e){var t=e.type,o=e.payload;switch(e.type){case s.ServerMessageType.Answer:this._negotiator.handleSDP(t,o.sdp),this._open=!0;break;case s.ServerMessageType.Candidate:this._negotiator.handleCandidate(o.candidate);break;default:i.default.warn("Unrecognized message type:"+t+" from peer:"+this.peer)}},l.prototype.answer=function(e,r){var n,a;if(void 0===r&&(r={}),this._localStream)i.default.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");else{this._localStream=e,r&&r.sdpTransform&&(this.options.sdpTransform=r.sdpTransform),this._negotiator.startConnection(t(t({},this.options._payload),{_stream:e}));var s=this.provider._getMessages(this.connectionId);try{for(var l=o(s),c=l.next();!c.done;c=l.next()){var p=c.value;this.handleMessage(p)}}catch(u){n={error:u}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(n)throw n.error}}this._open=!0}},l.prototype.close=function(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,r.prototype.emit.call(this,s.ConnectionEventType.Close))},l.ID_PREFIX="mc_",l}(l.BaseConnection);exports.MediaConnection=c;
},{"./util":"BHXf","./logger":"WOs9","./negotiator":"HCdX","./enums":"ZRYf","./baseconnection":"tQFK"}],"GGp6":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),t=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.EncodingQueue=void 0;var r=require("eventemitter3"),o=t(require("./logger")),n=function(t){function r(){var e=t.call(this)||this;return e.fileReader=new FileReader,e._queue=[],e._processing=!1,e.fileReader.onload=function(t){e._processing=!1,t.target&&e.emit("done",t.target.result),e.doNextTask()},e.fileReader.onerror=function(t){o.default.error("EncodingQueue error:",t),e._processing=!1,e.destroy(),e.emit("error",t)},e}return e(r,t),Object.defineProperty(r.prototype,"queue",{get:function(){return this._queue},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"size",{get:function(){return this.queue.length},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"processing",{get:function(){return this._processing},enumerable:!1,configurable:!0}),r.prototype.enque=function(e){this.queue.push(e),this.processing||this.doNextTask()},r.prototype.destroy=function(){this.fileReader.abort(),this._queue=[]},r.prototype.doNextTask=function(){0!==this.size&&(this.processing||(this._processing=!0,this.fileReader.readAsArrayBuffer(this.queue.shift())))},r}(r.EventEmitter);exports.EncodingQueue=n;
},{"eventemitter3":"JJlS","./logger":"WOs9"}],"GBTQ":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),t=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.DataConnection=void 0;var i=require("./util"),o=n(require("./logger")),r=require("./negotiator"),a=require("./enums"),s=require("./baseconnection"),u=require("./encodingQueue"),l=function(n){function s(e,t,l){var f=n.call(this,e,t,l)||this;return f.stringify=JSON.stringify,f.parse=JSON.parse,f._buffer=[],f._bufferSize=0,f._buffering=!1,f._chunkedData={},f._encodingQueue=new u.EncodingQueue,f.connectionId=f.options.connectionId||s.ID_PREFIX+i.util.randomToken(),f.label=f.options.label||f.connectionId,f.serialization=f.options.serialization||a.SerializationType.Binary,f.reliable=!!f.options.reliable,f._encodingQueue.on("done",function(e){f._bufferedSend(e)}),f._encodingQueue.on("error",function(){o.default.error("DC#"+f.connectionId+": Error occured in encoding from blob to arraybuffer, close DC"),f.close()}),f._negotiator=new r.Negotiator(f),f._negotiator.startConnection(f.options._payload||{originator:!0}),f}return e(s,n),Object.defineProperty(s.prototype,"type",{get:function(){return a.ConnectionType.Data},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"dataChannel",{get:function(){return this._dc},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"bufferSize",{get:function(){return this._bufferSize},enumerable:!1,configurable:!0}),s.prototype.initialize=function(e){this._dc=e,this._configureDataChannel()},s.prototype._configureDataChannel=function(){var e=this;i.util.supports.binaryBlob&&!i.util.supports.reliable||(this.dataChannel.binaryType="arraybuffer"),this.dataChannel.onopen=function(){o.default.log("DC#"+e.connectionId+" dc connection success"),e._open=!0,e.emit(a.ConnectionEventType.Open)},this.dataChannel.onmessage=function(t){o.default.log("DC#"+e.connectionId+" dc onmessage:",t.data),e._handleDataMessage(t)},this.dataChannel.onclose=function(){o.default.log("DC#"+e.connectionId+" dc closed for:",e.peer),e.close()}},s.prototype._handleDataMessage=function(e){var t=this,o=e.data,r=o.constructor,s=o;if(this.serialization===a.SerializationType.Binary||this.serialization===a.SerializationType.BinaryUTF8){if(r===Blob)return void i.util.blobToArrayBuffer(o,function(e){var n=i.util.unpack(e);t.emit(a.ConnectionEventType.Data,n)});if(r===ArrayBuffer)s=i.util.unpack(o);else if(r===String){var u=i.util.binaryStringToArrayBuffer(o);s=i.util.unpack(u)}}else this.serialization===a.SerializationType.JSON&&(s=this.parse(o));s.__peerData?this._handleChunk(s):n.prototype.emit.call(this,a.ConnectionEventType.Data,s)},s.prototype._handleChunk=function(e){var t=e.__peerData,n=this._chunkedData[t]||{data:[],count:0,total:e.total};if(n.data[e.n]=e.data,n.count++,this._chunkedData[t]=n,n.total===n.count){delete this._chunkedData[t];var i=new Blob(n.data);this._handleDataMessage({data:i})}},s.prototype.close=function(){this._buffer=[],this._bufferSize=0,this._chunkedData={},this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this._dc=null),this._encodingQueue&&(this._encodingQueue.destroy(),this._encodingQueue.removeAllListeners(),this._encodingQueue=null),this.open&&(this._open=!1,n.prototype.emit.call(this,a.ConnectionEventType.Close))},s.prototype.send=function(e,t){if(this.open)if(this.serialization===a.SerializationType.JSON)this._bufferedSend(this.stringify(e));else if(this.serialization===a.SerializationType.Binary||this.serialization===a.SerializationType.BinaryUTF8){var o=i.util.pack(e);if(!t&&o.size>i.util.chunkedMTU)return void this._sendChunks(o);i.util.supports.binaryBlob?this._bufferedSend(o):this._encodingQueue.enque(o)}else this._bufferedSend(e);else n.prototype.emit.call(this,a.ConnectionEventType.Error,new Error("Connection is not open. You should listen for the `open` event before sending messages."))},s.prototype._bufferedSend=function(e){!this._buffering&&this._trySend(e)||(this._buffer.push(e),this._bufferSize=this._buffer.length)},s.prototype._trySend=function(e){var t=this;if(!this.open)return!1;if(this.dataChannel.bufferedAmount>s.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(function(){t._buffering=!1,t._tryBuffer()},50),!1;try{this.dataChannel.send(e)}catch(n){return o.default.error("DC#:"+this.connectionId+" Error when sending:",n),this._buffering=!0,this.close(),!1}return!0},s.prototype._tryBuffer=function(){if(this.open&&0!==this._buffer.length){var e=this._buffer[0];this._trySend(e)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}},s.prototype._sendChunks=function(e){var n,r,a=i.util.chunk(e);o.default.log("DC#"+this.connectionId+" Try to send "+a.length+" chunks...");try{for(var s=t(a),u=s.next();!u.done;u=s.next()){var l=u.value;this.send(l,!0)}}catch(f){n={error:f}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}},s.prototype.handleMessage=function(e){var t=e.payload;switch(e.type){case a.ServerMessageType.Answer:this._negotiator.handleSDP(e.type,t.sdp);break;case a.ServerMessageType.Candidate:this._negotiator.handleCandidate(t.candidate);break;default:o.default.warn("Unrecognized message type:",e.type,"from peer:",this.peer)}},s.ID_PREFIX="dc_",s.MAX_BUFFERED_AMOUNT=8388608,s}(s.BaseConnection);exports.DataConnection=l;
},{"./util":"BHXf","./logger":"WOs9","./negotiator":"HCdX","./enums":"ZRYf","./baseconnection":"tQFK","./encodingQueue":"GGp6"}],"in7L":[function(require,module,exports) {
"use strict";var t=this&&this.__awaiter||function(t,e,r,o){return new(r||(r=Promise))(function(n,s){function i(t){try{a(o.next(t))}catch(e){s(e)}}function u(t){try{a(o.throw(t))}catch(e){s(e)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(i,u)}a((o=o.apply(t,e||[])).next())})},e=this&&this.__generator||function(t,e){var r,o,n,s,i={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,o&&(n=2&s[0]?o.return:s[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,s[1])).done)return n;switch(o=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,o=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(n=(n=i.trys).length>0&&n[n.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){i.label=s[1];break}if(6===s[0]&&i.label<n[1]){i.label=n[1],n=s;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(s);break}n[2]&&i.ops.pop(),i.trys.pop();continue}s=e.call(t,i)}catch(u){s=[6,u],o=0}finally{r=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.API=void 0;var o=require("./util"),n=r(require("./logger")),s=function(){function r(t){this._options=t}return r.prototype._buildUrl=function(t){var e=(this._options.secure?"https://":"http://")+this._options.host+":"+this._options.port+this._options.path+this._options.key+"/"+t;return e+="?ts="+(new Date).getTime()+Math.random()},r.prototype.retrieveId=function(){return t(this,void 0,Promise,function(){var t,r,s,i;return e(this,function(e){switch(e.label){case 0:t=this._buildUrl("id"),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,fetch(t)];case 2:if(200!==(r=e.sent()).status)throw new Error("Error. Status:"+r.status);return[2,r.text()];case 3:throw s=e.sent(),n.default.error("Error retrieving ID",s),i="","/"===this._options.path&&this._options.host!==o.util.CLOUD_HOST&&(i=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+i);case 4:return[2]}})})},r.prototype.listAllPeers=function(){return t(this,void 0,Promise,function(){var t,r,s,i;return e(this,function(e){switch(e.label){case 0:t=this._buildUrl("peers"),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,fetch(t)];case 2:if(200!==(r=e.sent()).status){if(401===r.status)throw s="",s=this._options.host===o.util.CLOUD_HOST?"It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":"You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+s);throw new Error("Error. Status:"+r.status)}return[2,r.json()];case 3:throw i=e.sent(),n.default.error("Error retrieving list peers",i),new Error("Could not get list peers from the server."+i);case 4:return[2]}})})},r}();exports.API=s;
},{"./util":"BHXf","./logger":"WOs9"}],"Hxpd":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),t=this&&this.__assign||function(){return(t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(a){o={error:a}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Peer=void 0;var i=require("eventemitter3"),s=require("./util"),a=o(require("./logger")),c=require("./socket"),l=require("./mediaconnection"),u=require("./dataconnection"),d=require("./enums"),p=require("./api"),h=function(){return function(){}}(),f=function(o){function i(e,n){var r,c=o.call(this)||this;return c._id=null,c._lastServerId=null,c._destroyed=!1,c._disconnected=!1,c._open=!1,c._connections=new Map,c._lostMessages=new Map,e&&e.constructor==Object?n=e:e&&(r=e.toString()),n=t({debug:0,host:s.util.CLOUD_HOST,port:s.util.CLOUD_PORT,path:"/",key:i.DEFAULT_KEY,token:s.util.randomToken(),config:s.util.defaultConfig},n),c._options=n,"/"===c._options.host&&(c._options.host=window.location.hostname),c._options.path&&("/"!==c._options.path[0]&&(c._options.path="/"+c._options.path),"/"!==c._options.path[c._options.path.length-1]&&(c._options.path+="/")),void 0===c._options.secure&&c._options.host!==s.util.CLOUD_HOST?c._options.secure=s.util.isSecure():c._options.host==s.util.CLOUD_HOST&&(c._options.secure=!0),c._options.logFunction&&a.default.setLogFunction(c._options.logFunction),a.default.logLevel=c._options.debug||0,c._api=new p.API(n),c._socket=c._createServerConnection(),s.util.supports.audioVideo||s.util.supports.data?r&&!s.util.validateId(r)?(c._delayedAbort(d.PeerErrorType.InvalidID,'ID "'+r+'" is invalid'),c):(r?c._initialize(r):c._api.retrieveId().then(function(e){return c._initialize(e)}).catch(function(e){return c._abort(d.PeerErrorType.ServerError,e)}),c):(c._delayedAbort(d.PeerErrorType.BrowserIncompatible,"The current browser does not support WebRTC"),c)}return e(i,o),Object.defineProperty(i.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"socket",{get:function(){return this._socket},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"connections",{get:function(){var e,t,o=Object.create(null);try{for(var i=n(this._connections),s=i.next();!s.done;s=i.next()){var a=r(s.value,2),c=a[0],l=a[1];o[c]=l}}catch(u){e={error:u}}finally{try{s&&!s.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return o},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"disconnected",{get:function(){return this._disconnected},enumerable:!1,configurable:!0}),i.prototype._createServerConnection=function(){var e=this,t=new c.Socket(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return t.on(d.SocketEventType.Message,function(t){e._handleMessage(t)}),t.on(d.SocketEventType.Error,function(t){e._abort(d.PeerErrorType.SocketError,t)}),t.on(d.SocketEventType.Disconnected,function(){e.disconnected||(e.emitError(d.PeerErrorType.Network,"Lost connection to server."),e.disconnect())}),t.on(d.SocketEventType.Close,function(){e.disconnected||e._abort(d.PeerErrorType.SocketClosed,"Underlying socket is already closed.")}),t},i.prototype._initialize=function(e){this._id=e,this.socket.start(e,this._options.token)},i.prototype._handleMessage=function(e){var t,r,o=e.type,i=e.payload,s=e.src;switch(o){case d.ServerMessageType.Open:this._lastServerId=this.id,this._open=!0,this.emit(d.PeerEventType.Open,this.id);break;case d.ServerMessageType.Error:this._abort(d.PeerErrorType.ServerError,i.msg);break;case d.ServerMessageType.IdTaken:this._abort(d.PeerErrorType.UnavailableID,'ID "'+this.id+'" is taken');break;case d.ServerMessageType.InvalidKey:this._abort(d.PeerErrorType.InvalidKey,'API KEY "'+this._options.key+'" is invalid');break;case d.ServerMessageType.Leave:a.default.log("Received leave message from "+s),this._cleanupPeer(s),this._connections.delete(s);break;case d.ServerMessageType.Expire:this.emitError(d.PeerErrorType.PeerUnavailable,"Could not connect to peer "+s);break;case d.ServerMessageType.Offer:var c=i.connectionId;if((_=this.getConnection(s,c))&&(_.close(),a.default.warn("Offer received for existing Connection ID:"+c)),i.type===d.ConnectionType.Media)_=new l.MediaConnection(s,this,{connectionId:c,_payload:i,metadata:i.metadata}),this._addConnection(s,_),this.emit(d.PeerEventType.Call,_);else{if(i.type!==d.ConnectionType.Data)return void a.default.warn("Received malformed connection type:"+i.type);_=new u.DataConnection(s,this,{connectionId:c,_payload:i,metadata:i.metadata,label:i.label,serialization:i.serialization,reliable:i.reliable}),this._addConnection(s,_),this.emit(d.PeerEventType.Connection,_)}var p=this._getMessages(c);try{for(var h=n(p),f=h.next();!f.done;f=h.next()){var y=f.value;_.handleMessage(y)}}catch(v){t={error:v}}finally{try{f&&!f.done&&(r=h.return)&&r.call(h)}finally{if(t)throw t.error}}break;default:if(!i)return void a.default.warn("You received a malformed message from "+s+" of type "+o);var _;c=i.connectionId;(_=this.getConnection(s,c))&&_.peerConnection?_.handleMessage(e):c?this._storeMessage(c,e):a.default.warn("You received an unrecognized message:",e)}},i.prototype._storeMessage=function(e,t){this._lostMessages.has(e)||this._lostMessages.set(e,[]),this._lostMessages.get(e).push(t)},i.prototype._getMessages=function(e){var t=this._lostMessages.get(e);return t?(this._lostMessages.delete(e),t):[]},i.prototype.connect=function(e,t){if(void 0===t&&(t={}),this.disconnected)return a.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),void this.emitError(d.PeerErrorType.Disconnected,"Cannot connect to new Peer after disconnecting from server.");var n=new u.DataConnection(e,this,t);return this._addConnection(e,n),n},i.prototype.call=function(e,t,n){if(void 0===n&&(n={}),this.disconnected)return a.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),void this.emitError(d.PeerErrorType.Disconnected,"Cannot connect to new Peer after disconnecting from server.");if(t){n._stream=t;var r=new l.MediaConnection(e,this,n);return this._addConnection(e,r),r}a.default.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.")},i.prototype._addConnection=function(e,t){a.default.log("add connection "+t.type+":"+t.connectionId+" to peerId:"+e),this._connections.has(e)||this._connections.set(e,[]),this._connections.get(e).push(t)},i.prototype._removeConnection=function(e){var t=this._connections.get(e.peer);if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}this._lostMessages.delete(e.connectionId)},i.prototype.getConnection=function(e,t){var r,o,i=this._connections.get(e);if(!i)return null;try{for(var s=n(i),a=s.next();!a.done;a=s.next()){var c=a.value;if(c.connectionId===t)return c}}catch(l){r={error:l}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(r)throw r.error}}return null},i.prototype._delayedAbort=function(e,t){var n=this;setTimeout(function(){n._abort(e,t)},0)},i.prototype._abort=function(e,t){a.default.error("Aborting!"),this.emitError(e,t),this._lastServerId?this.disconnect():this.destroy()},i.prototype.emitError=function(e,t){var n;a.default.error("Error:",t),(n="string"==typeof t?new Error(t):t).type=e,this.emit(d.PeerEventType.Error,n)},i.prototype.destroy=function(){this.destroyed||(a.default.log("Destroy peer with ID:"+this.id),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit(d.PeerEventType.Close))},i.prototype._cleanup=function(){var e,t;try{for(var r=n(this._connections.keys()),o=r.next();!o.done;o=r.next()){var i=o.value;this._cleanupPeer(i),this._connections.delete(i)}}catch(s){e={error:s}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}this.socket.removeAllListeners()},i.prototype._cleanupPeer=function(e){var t,r,o=this._connections.get(e);if(o)try{for(var i=n(o),s=i.next();!s.done;s=i.next()){s.value.close()}}catch(a){t={error:a}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},i.prototype.disconnect=function(){if(!this.disconnected){var e=this.id;a.default.log("Disconnect peer with ID:"+e),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=e,this._id=null,this.emit(d.PeerEventType.Disconnected,e)}},i.prototype.reconnect=function(){if(this.disconnected&&!this.destroyed)a.default.log("Attempting reconnection to server with ID "+this._lastServerId),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(this.disconnected||this.open)throw new Error("Peer "+this.id+" cannot reconnect because it is not disconnected from the server!");a.default.error("In a hurry? We're still trying to make the initial connection!")}},i.prototype.listAllPeers=function(e){var t=this;void 0===e&&(e=function(e){}),this._api.listAllPeers().then(function(t){return e(t)}).catch(function(e){return t._abort(d.PeerErrorType.ServerError,e)})},i.DEFAULT_KEY="peerjs",i}(i.EventEmitter);exports.Peer=f;
},{"eventemitter3":"JJlS","./util":"BHXf","./logger":"WOs9","./socket":"wJlv","./mediaconnection":"dbHP","./dataconnection":"GBTQ","./enums":"ZRYf","./api":"in7L"}],"iTK6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.peerjs=void 0;var e=require("./util"),r=require("./peer");exports.peerjs={Peer:r.Peer,util:e.util},exports.default=r.Peer,window.peerjs=exports.peerjs,window.Peer=r.Peer;
},{"./util":"BHXf","./peer":"Hxpd"}]},{},["iTK6"], null)
//# sourceMappingURL=/peerjs.min.js.map

/***/ }),

/***/ "./node_modules/peerjs/dist sync recursive":
/*!****************************************!*\
  !*** ./node_modules/peerjs/dist/ sync ***!
  \****************************************/
/***/ ((module) => {

function webpackEmptyContext(req) {
	var e = new Error("Cannot find module '" + req + "'");
	e.code = 'MODULE_NOT_FOUND';
	throw e;
}
webpackEmptyContext.keys = () => ([]);
webpackEmptyContext.resolve = webpackEmptyContext;
webpackEmptyContext.id = "./node_modules/peerjs/dist sync recursive";
module.exports = webpackEmptyContext;

/***/ }),

/***/ "./node_modules/socket.io-client/build/index.js":
/*!******************************************************!*\
  !*** ./node_modules/socket.io-client/build/index.js ***!
  \******************************************************/
/***/ ((module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.io = exports.Socket = exports.Manager = exports.protocol = void 0;
const url_1 = __webpack_require__(/*! ./url */ "./node_modules/socket.io-client/build/url.js");
const manager_1 = __webpack_require__(/*! ./manager */ "./node_modules/socket.io-client/build/manager.js");
const debug = __webpack_require__(/*! debug */ "./node_modules/socket.io-client/node_modules/debug/src/browser.js")("socket.io-client");
/**
 * Module exports.
 */
module.exports = exports = lookup;
/**
 * Managers cache.
 */
const cache = (exports.managers = {});
function lookup(uri, opts) {
    if (typeof uri === "object") {
        opts = uri;
        uri = undefined;
    }
    opts = opts || {};
    const parsed = url_1.url(uri, opts.path || "/socket.io");
    const source = parsed.source;
    const id = parsed.id;
    const path = parsed.path;
    const sameNamespace = cache[id] && path in cache[id]["nsps"];
    const newConnection = opts.forceNew ||
        opts["force new connection"] ||
        false === opts.multiplex ||
        sameNamespace;
    let io;
    if (newConnection) {
        debug("ignoring socket cache for %s", source);
        io = new manager_1.Manager(source, opts);
    }
    else {
        if (!cache[id]) {
            debug("new io instance for %s", source);
            cache[id] = new manager_1.Manager(source, opts);
        }
        io = cache[id];
    }
    if (parsed.query && !opts.query) {
        opts.query = parsed.queryKey;
    }
    return io.socket(parsed.path, opts);
}
exports.io = lookup;
/**
 * Protocol version.
 *
 * @public
 */
var socket_io_parser_1 = __webpack_require__(/*! socket.io-parser */ "./node_modules/socket.io-parser/dist/index.js");
Object.defineProperty(exports, "protocol", ({ enumerable: true, get: function () { return socket_io_parser_1.protocol; } }));
/**
 * `connect`.
 *
 * @param {String} uri
 * @public
 */
exports.connect = lookup;
/**
 * Expose constructors for standalone build.
 *
 * @public
 */
var manager_2 = __webpack_require__(/*! ./manager */ "./node_modules/socket.io-client/build/manager.js");
Object.defineProperty(exports, "Manager", ({ enumerable: true, get: function () { return manager_2.Manager; } }));
var socket_1 = __webpack_require__(/*! ./socket */ "./node_modules/socket.io-client/build/socket.js");
Object.defineProperty(exports, "Socket", ({ enumerable: true, get: function () { return socket_1.Socket; } }));
exports.default = lookup;


/***/ }),

/***/ "./node_modules/socket.io-client/build/manager.js":
/*!********************************************************!*\
  !*** ./node_modules/socket.io-client/build/manager.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Manager = void 0;
const eio = __webpack_require__(/*! engine.io-client */ "./node_modules/engine.io-client/lib/index.js");
const socket_1 = __webpack_require__(/*! ./socket */ "./node_modules/socket.io-client/build/socket.js");
const parser = __webpack_require__(/*! socket.io-parser */ "./node_modules/socket.io-parser/dist/index.js");
const on_1 = __webpack_require__(/*! ./on */ "./node_modules/socket.io-client/build/on.js");
const Backoff = __webpack_require__(/*! backo2 */ "./node_modules/backo2/index.js");
const typed_events_1 = __webpack_require__(/*! ./typed-events */ "./node_modules/socket.io-client/build/typed-events.js");
const debug = __webpack_require__(/*! debug */ "./node_modules/socket.io-client/node_modules/debug/src/browser.js")("socket.io-client:manager");
class Manager extends typed_events_1.StrictEventEmitter {
    constructor(uri, opts) {
        super();
        this.nsps = {};
        this.subs = [];
        if (uri && "object" === typeof uri) {
            opts = uri;
            uri = undefined;
        }
        opts = opts || {};
        opts.path = opts.path || "/socket.io";
        this.opts = opts;
        this.reconnection(opts.reconnection !== false);
        this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);
        this.reconnectionDelay(opts.reconnectionDelay || 1000);
        this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);
        this.randomizationFactor(opts.randomizationFactor || 0.5);
        this.backoff = new Backoff({
            min: this.reconnectionDelay(),
            max: this.reconnectionDelayMax(),
            jitter: this.randomizationFactor(),
        });
        this.timeout(null == opts.timeout ? 20000 : opts.timeout);
        this._readyState = "closed";
        this.uri = uri;
        const _parser = opts.parser || parser;
        this.encoder = new _parser.Encoder();
        this.decoder = new _parser.Decoder();
        this._autoConnect = opts.autoConnect !== false;
        if (this._autoConnect)
            this.open();
    }
    reconnection(v) {
        if (!arguments.length)
            return this._reconnection;
        this._reconnection = !!v;
        return this;
    }
    reconnectionAttempts(v) {
        if (v === undefined)
            return this._reconnectionAttempts;
        this._reconnectionAttempts = v;
        return this;
    }
    reconnectionDelay(v) {
        var _a;
        if (v === undefined)
            return this._reconnectionDelay;
        this._reconnectionDelay = v;
        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMin(v);
        return this;
    }
    randomizationFactor(v) {
        var _a;
        if (v === undefined)
            return this._randomizationFactor;
        this._randomizationFactor = v;
        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setJitter(v);
        return this;
    }
    reconnectionDelayMax(v) {
        var _a;
        if (v === undefined)
            return this._reconnectionDelayMax;
        this._reconnectionDelayMax = v;
        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMax(v);
        return this;
    }
    timeout(v) {
        if (!arguments.length)
            return this._timeout;
        this._timeout = v;
        return this;
    }
    /**
     * Starts trying to reconnect if reconnection is enabled and we have not
     * started reconnecting yet
     *
     * @private
     */
    maybeReconnectOnOpen() {
        // Only try to reconnect if it's the first time we're connecting
        if (!this._reconnecting &&
            this._reconnection &&
            this.backoff.attempts === 0) {
            // keeps reconnection from firing twice for the same reconnection loop
            this.reconnect();
        }
    }
    /**
     * Sets the current transport `socket`.
     *
     * @param {Function} fn - optional, callback
     * @return self
     * @public
     */
    open(fn) {
        debug("readyState %s", this._readyState);
        if (~this._readyState.indexOf("open"))
            return this;
        debug("opening %s", this.uri);
        this.engine = eio(this.uri, this.opts);
        const socket = this.engine;
        const self = this;
        this._readyState = "opening";
        this.skipReconnect = false;
        // emit `open`
        const openSubDestroy = on_1.on(socket, "open", function () {
            self.onopen();
            fn && fn();
        });
        // emit `error`
        const errorSub = on_1.on(socket, "error", (err) => {
            debug("error");
            self.cleanup();
            self._readyState = "closed";
            this.emitReserved("error", err);
            if (fn) {
                fn(err);
            }
            else {
                // Only do this if there is no fn to handle the error
                self.maybeReconnectOnOpen();
            }
        });
        if (false !== this._timeout) {
            const timeout = this._timeout;
            debug("connect attempt will timeout after %d", timeout);
            if (timeout === 0) {
                openSubDestroy(); // prevents a race condition with the 'open' event
            }
            // set timer
            const timer = setTimeout(() => {
                debug("connect attempt timed out after %d", timeout);
                openSubDestroy();
                socket.close();
                socket.emit("error", new Error("timeout"));
            }, timeout);
            if (this.opts.autoUnref) {
                timer.unref();
            }
            this.subs.push(function subDestroy() {
                clearTimeout(timer);
            });
        }
        this.subs.push(openSubDestroy);
        this.subs.push(errorSub);
        return this;
    }
    /**
     * Alias for open()
     *
     * @return self
     * @public
     */
    connect(fn) {
        return this.open(fn);
    }
    /**
     * Called upon transport open.
     *
     * @private
     */
    onopen() {
        debug("open");
        // clear old subs
        this.cleanup();
        // mark as open
        this._readyState = "open";
        this.emitReserved("open");
        // add new subs
        const socket = this.engine;
        this.subs.push(on_1.on(socket, "ping", this.onping.bind(this)), on_1.on(socket, "data", this.ondata.bind(this)), on_1.on(socket, "error", this.onerror.bind(this)), on_1.on(socket, "close", this.onclose.bind(this)), on_1.on(this.decoder, "decoded", this.ondecoded.bind(this)));
    }
    /**
     * Called upon a ping.
     *
     * @private
     */
    onping() {
        this.emitReserved("ping");
    }
    /**
     * Called with data.
     *
     * @private
     */
    ondata(data) {
        this.decoder.add(data);
    }
    /**
     * Called when parser fully decodes a packet.
     *
     * @private
     */
    ondecoded(packet) {
        this.emitReserved("packet", packet);
    }
    /**
     * Called upon socket error.
     *
     * @private
     */
    onerror(err) {
        debug("error", err);
        this.emitReserved("error", err);
    }
    /**
     * Creates a new socket for the given `nsp`.
     *
     * @return {Socket}
     * @public
     */
    socket(nsp, opts) {
        let socket = this.nsps[nsp];
        if (!socket) {
            socket = new socket_1.Socket(this, nsp, opts);
            this.nsps[nsp] = socket;
        }
        return socket;
    }
    /**
     * Called upon a socket close.
     *
     * @param socket
     * @private
     */
    _destroy(socket) {
        const nsps = Object.keys(this.nsps);
        for (const nsp of nsps) {
            const socket = this.nsps[nsp];
            if (socket.active) {
                debug("socket %s is still active, skipping close", nsp);
                return;
            }
        }
        this._close();
    }
    /**
     * Writes a packet.
     *
     * @param packet
     * @private
     */
    _packet(packet) {
        debug("writing packet %j", packet);
        const encodedPackets = this.encoder.encode(packet);
        for (let i = 0; i < encodedPackets.length; i++) {
            this.engine.write(encodedPackets[i], packet.options);
        }
    }
    /**
     * Clean up transport subscriptions and packet buffer.
     *
     * @private
     */
    cleanup() {
        debug("cleanup");
        this.subs.forEach((subDestroy) => subDestroy());
        this.subs.length = 0;
        this.decoder.destroy();
    }
    /**
     * Close the current socket.
     *
     * @private
     */
    _close() {
        debug("disconnect");
        this.skipReconnect = true;
        this._reconnecting = false;
        if ("opening" === this._readyState) {
            // `onclose` will not fire because
            // an open event never happened
            this.cleanup();
        }
        this.backoff.reset();
        this._readyState = "closed";
        if (this.engine)
            this.engine.close();
    }
    /**
     * Alias for close()
     *
     * @private
     */
    disconnect() {
        return this._close();
    }
    /**
     * Called upon engine close.
     *
     * @private
     */
    onclose(reason) {
        debug("onclose");
        this.cleanup();
        this.backoff.reset();
        this._readyState = "closed";
        this.emitReserved("close", reason);
        if (this._reconnection && !this.skipReconnect) {
            this.reconnect();
        }
    }
    /**
     * Attempt a reconnection.
     *
     * @private
     */
    reconnect() {
        if (this._reconnecting || this.skipReconnect)
            return this;
        const self = this;
        if (this.backoff.attempts >= this._reconnectionAttempts) {
            debug("reconnect failed");
            this.backoff.reset();
            this.emitReserved("reconnect_failed");
            this._reconnecting = false;
        }
        else {
            const delay = this.backoff.duration();
            debug("will wait %dms before reconnect attempt", delay);
            this._reconnecting = true;
            const timer = setTimeout(() => {
                if (self.skipReconnect)
                    return;
                debug("attempting reconnect");
                this.emitReserved("reconnect_attempt", self.backoff.attempts);
                // check again for the case socket closed in above events
                if (self.skipReconnect)
                    return;
                self.open((err) => {
                    if (err) {
                        debug("reconnect attempt error");
                        self._reconnecting = false;
                        self.reconnect();
                        this.emitReserved("reconnect_error", err);
                    }
                    else {
                        debug("reconnect success");
                        self.onreconnect();
                    }
                });
            }, delay);
            if (this.opts.autoUnref) {
                timer.unref();
            }
            this.subs.push(function subDestroy() {
                clearTimeout(timer);
            });
        }
    }
    /**
     * Called upon successful reconnect.
     *
     * @private
     */
    onreconnect() {
        const attempt = this.backoff.attempts;
        this._reconnecting = false;
        this.backoff.reset();
        this.emitReserved("reconnect", attempt);
    }
}
exports.Manager = Manager;


/***/ }),

/***/ "./node_modules/socket.io-client/build/on.js":
/*!***************************************************!*\
  !*** ./node_modules/socket.io-client/build/on.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.on = void 0;
function on(obj, ev, fn) {
    obj.on(ev, fn);
    return function subDestroy() {
        obj.off(ev, fn);
    };
}
exports.on = on;


/***/ }),

/***/ "./node_modules/socket.io-client/build/socket.js":
/*!*******************************************************!*\
  !*** ./node_modules/socket.io-client/build/socket.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Socket = void 0;
const socket_io_parser_1 = __webpack_require__(/*! socket.io-parser */ "./node_modules/socket.io-parser/dist/index.js");
const on_1 = __webpack_require__(/*! ./on */ "./node_modules/socket.io-client/build/on.js");
const typed_events_1 = __webpack_require__(/*! ./typed-events */ "./node_modules/socket.io-client/build/typed-events.js");
const debug = __webpack_require__(/*! debug */ "./node_modules/socket.io-client/node_modules/debug/src/browser.js")("socket.io-client:socket");
/**
 * Internal events.
 * These events can't be emitted by the user.
 */
const RESERVED_EVENTS = Object.freeze({
    connect: 1,
    connect_error: 1,
    disconnect: 1,
    disconnecting: 1,
    // EventEmitter reserved events: https://nodejs.org/api/events.html#events_event_newlistener
    newListener: 1,
    removeListener: 1,
});
class Socket extends typed_events_1.StrictEventEmitter {
    /**
     * `Socket` constructor.
     *
     * @public
     */
    constructor(io, nsp, opts) {
        super();
        this.receiveBuffer = [];
        this.sendBuffer = [];
        this.ids = 0;
        this.acks = {};
        this.flags = {};
        this.io = io;
        this.nsp = nsp;
        this.ids = 0;
        this.acks = {};
        this.receiveBuffer = [];
        this.sendBuffer = [];
        this.connected = false;
        this.disconnected = true;
        this.flags = {};
        if (opts && opts.auth) {
            this.auth = opts.auth;
        }
        if (this.io._autoConnect)
            this.open();
    }
    /**
     * Subscribe to open, close and packet events
     *
     * @private
     */
    subEvents() {
        if (this.subs)
            return;
        const io = this.io;
        this.subs = [
            on_1.on(io, "open", this.onopen.bind(this)),
            on_1.on(io, "packet", this.onpacket.bind(this)),
            on_1.on(io, "error", this.onerror.bind(this)),
            on_1.on(io, "close", this.onclose.bind(this)),
        ];
    }
    /**
     * Whether the Socket will try to reconnect when its Manager connects or reconnects
     */
    get active() {
        return !!this.subs;
    }
    /**
     * "Opens" the socket.
     *
     * @public
     */
    connect() {
        if (this.connected)
            return this;
        this.subEvents();
        if (!this.io["_reconnecting"])
            this.io.open(); // ensure open
        if ("open" === this.io._readyState)
            this.onopen();
        return this;
    }
    /**
     * Alias for connect()
     */
    open() {
        return this.connect();
    }
    /**
     * Sends a `message` event.
     *
     * @return self
     * @public
     */
    send(...args) {
        args.unshift("message");
        this.emit.apply(this, args);
        return this;
    }
    /**
     * Override `emit`.
     * If the event is in `events`, it's emitted normally.
     *
     * @return self
     * @public
     */
    emit(ev, ...args) {
        if (RESERVED_EVENTS.hasOwnProperty(ev)) {
            throw new Error('"' + ev + '" is a reserved event name');
        }
        args.unshift(ev);
        const packet = {
            type: socket_io_parser_1.PacketType.EVENT,
            data: args,
        };
        packet.options = {};
        packet.options.compress = this.flags.compress !== false;
        // event ack callback
        if ("function" === typeof args[args.length - 1]) {
            debug("emitting packet with ack id %d", this.ids);
            this.acks[this.ids] = args.pop();
            packet.id = this.ids++;
        }
        const isTransportWritable = this.io.engine &&
            this.io.engine.transport &&
            this.io.engine.transport.writable;
        const discardPacket = this.flags.volatile && (!isTransportWritable || !this.connected);
        if (discardPacket) {
            debug("discard packet as the transport is not currently writable");
        }
        else if (this.connected) {
            this.packet(packet);
        }
        else {
            this.sendBuffer.push(packet);
        }
        this.flags = {};
        return this;
    }
    /**
     * Sends a packet.
     *
     * @param packet
     * @private
     */
    packet(packet) {
        packet.nsp = this.nsp;
        this.io._packet(packet);
    }
    /**
     * Called upon engine `open`.
     *
     * @private
     */
    onopen() {
        debug("transport is open - connecting");
        if (typeof this.auth == "function") {
            this.auth((data) => {
                this.packet({ type: socket_io_parser_1.PacketType.CONNECT, data });
            });
        }
        else {
            this.packet({ type: socket_io_parser_1.PacketType.CONNECT, data: this.auth });
        }
    }
    /**
     * Called upon engine or manager `error`.
     *
     * @param err
     * @private
     */
    onerror(err) {
        if (!this.connected) {
            this.emitReserved("connect_error", err);
        }
    }
    /**
     * Called upon engine `close`.
     *
     * @param reason
     * @private
     */
    onclose(reason) {
        debug("close (%s)", reason);
        this.connected = false;
        this.disconnected = true;
        delete this.id;
        this.emitReserved("disconnect", reason);
    }
    /**
     * Called with socket packet.
     *
     * @param packet
     * @private
     */
    onpacket(packet) {
        const sameNamespace = packet.nsp === this.nsp;
        if (!sameNamespace)
            return;
        switch (packet.type) {
            case socket_io_parser_1.PacketType.CONNECT:
                if (packet.data && packet.data.sid) {
                    const id = packet.data.sid;
                    this.onconnect(id);
                }
                else {
                    this.emitReserved("connect_error", new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));
                }
                break;
            case socket_io_parser_1.PacketType.EVENT:
                this.onevent(packet);
                break;
            case socket_io_parser_1.PacketType.BINARY_EVENT:
                this.onevent(packet);
                break;
            case socket_io_parser_1.PacketType.ACK:
                this.onack(packet);
                break;
            case socket_io_parser_1.PacketType.BINARY_ACK:
                this.onack(packet);
                break;
            case socket_io_parser_1.PacketType.DISCONNECT:
                this.ondisconnect();
                break;
            case socket_io_parser_1.PacketType.CONNECT_ERROR:
                const err = new Error(packet.data.message);
                // @ts-ignore
                err.data = packet.data.data;
                this.emitReserved("connect_error", err);
                break;
        }
    }
    /**
     * Called upon a server event.
     *
     * @param packet
     * @private
     */
    onevent(packet) {
        const args = packet.data || [];
        debug("emitting event %j", args);
        if (null != packet.id) {
            debug("attaching ack callback to event");
            args.push(this.ack(packet.id));
        }
        if (this.connected) {
            this.emitEvent(args);
        }
        else {
            this.receiveBuffer.push(Object.freeze(args));
        }
    }
    emitEvent(args) {
        if (this._anyListeners && this._anyListeners.length) {
            const listeners = this._anyListeners.slice();
            for (const listener of listeners) {
                listener.apply(this, args);
            }
        }
        super.emit.apply(this, args);
    }
    /**
     * Produces an ack callback to emit with an event.
     *
     * @private
     */
    ack(id) {
        const self = this;
        let sent = false;
        return function (...args) {
            // prevent double callbacks
            if (sent)
                return;
            sent = true;
            debug("sending ack %j", args);
            self.packet({
                type: socket_io_parser_1.PacketType.ACK,
                id: id,
                data: args,
            });
        };
    }
    /**
     * Called upon a server acknowlegement.
     *
     * @param packet
     * @private
     */
    onack(packet) {
        const ack = this.acks[packet.id];
        if ("function" === typeof ack) {
            debug("calling ack %s with %j", packet.id, packet.data);
            ack.apply(this, packet.data);
            delete this.acks[packet.id];
        }
        else {
            debug("bad ack %s", packet.id);
        }
    }
    /**
     * Called upon server connect.
     *
     * @private
     */
    onconnect(id) {
        debug("socket connected with id %s", id);
        this.id = id;
        this.connected = true;
        this.disconnected = false;
        this.emitBuffered();
        this.emitReserved("connect");
    }
    /**
     * Emit buffered events (received and emitted).
     *
     * @private
     */
    emitBuffered() {
        this.receiveBuffer.forEach((args) => this.emitEvent(args));
        this.receiveBuffer = [];
        this.sendBuffer.forEach((packet) => this.packet(packet));
        this.sendBuffer = [];
    }
    /**
     * Called upon server disconnect.
     *
     * @private
     */
    ondisconnect() {
        debug("server disconnect (%s)", this.nsp);
        this.destroy();
        this.onclose("io server disconnect");
    }
    /**
     * Called upon forced client/server side disconnections,
     * this method ensures the manager stops tracking us and
     * that reconnections don't get triggered for this.
     *
     * @private
     */
    destroy() {
        if (this.subs) {
            // clean subscriptions to avoid reconnections
            this.subs.forEach((subDestroy) => subDestroy());
            this.subs = undefined;
        }
        this.io["_destroy"](this);
    }
    /**
     * Disconnects the socket manually.
     *
     * @return self
     * @public
     */
    disconnect() {
        if (this.connected) {
            debug("performing disconnect (%s)", this.nsp);
            this.packet({ type: socket_io_parser_1.PacketType.DISCONNECT });
        }
        // remove socket from pool
        this.destroy();
        if (this.connected) {
            // fire events
            this.onclose("io client disconnect");
        }
        return this;
    }
    /**
     * Alias for disconnect()
     *
     * @return self
     * @public
     */
    close() {
        return this.disconnect();
    }
    /**
     * Sets the compress flag.
     *
     * @param compress - if `true`, compresses the sending data
     * @return self
     * @public
     */
    compress(compress) {
        this.flags.compress = compress;
        return this;
    }
    /**
     * Sets a modifier for a subsequent event emission that the event message will be dropped when this socket is not
     * ready to send messages.
     *
     * @returns self
     * @public
     */
    get volatile() {
        this.flags.volatile = true;
        return this;
    }
    /**
     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the
     * callback.
     *
     * @param listener
     * @public
     */
    onAny(listener) {
        this._anyListeners = this._anyListeners || [];
        this._anyListeners.push(listener);
        return this;
    }
    /**
     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the
     * callback. The listener is added to the beginning of the listeners array.
     *
     * @param listener
     * @public
     */
    prependAny(listener) {
        this._anyListeners = this._anyListeners || [];
        this._anyListeners.unshift(listener);
        return this;
    }
    /**
     * Removes the listener that will be fired when any event is emitted.
     *
     * @param listener
     * @public
     */
    offAny(listener) {
        if (!this._anyListeners) {
            return this;
        }
        if (listener) {
            const listeners = this._anyListeners;
            for (let i = 0; i < listeners.length; i++) {
                if (listener === listeners[i]) {
                    listeners.splice(i, 1);
                    return this;
                }
            }
        }
        else {
            this._anyListeners = [];
        }
        return this;
    }
    /**
     * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,
     * e.g. to remove listeners.
     *
     * @public
     */
    listenersAny() {
        return this._anyListeners || [];
    }
}
exports.Socket = Socket;


/***/ }),

/***/ "./node_modules/socket.io-client/build/typed-events.js":
/*!*************************************************************!*\
  !*** ./node_modules/socket.io-client/build/typed-events.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.StrictEventEmitter = void 0;
const Emitter = __webpack_require__(/*! component-emitter */ "./node_modules/component-emitter/index.js");
/**
 * Strictly typed version of an `EventEmitter`. A `TypedEventEmitter` takes type
 * parameters for mappings of event names to event data types, and strictly
 * types method calls to the `EventEmitter` according to these event maps.
 *
 * @typeParam ListenEvents - `EventsMap` of user-defined events that can be
 * listened to with `on` or `once`
 * @typeParam EmitEvents - `EventsMap` of user-defined events that can be
 * emitted with `emit`
 * @typeParam ReservedEvents - `EventsMap` of reserved events, that can be
 * emitted by socket.io with `emitReserved`, and can be listened to with
 * `listen`.
 */
class StrictEventEmitter extends Emitter {
    /**
     * Adds the `listener` function as an event listener for `ev`.
     *
     * @param ev Name of the event
     * @param listener Callback function
     */
    on(ev, listener) {
        super.on(ev, listener);
        return this;
    }
    /**
     * Adds a one-time `listener` function as an event listener for `ev`.
     *
     * @param ev Name of the event
     * @param listener Callback function
     */
    once(ev, listener) {
        super.once(ev, listener);
        return this;
    }
    /**
     * Emits an event.
     *
     * @param ev Name of the event
     * @param args Values to send to listeners of this event
     */
    emit(ev, ...args) {
        super.emit(ev, ...args);
        return this;
    }
    /**
     * Emits a reserved event.
     *
     * This method is `protected`, so that only a class extending
     * `StrictEventEmitter` can emit its own reserved events.
     *
     * @param ev Reserved event name
     * @param args Arguments to emit along with the event
     */
    emitReserved(ev, ...args) {
        super.emit(ev, ...args);
        return this;
    }
    /**
     * Returns the listeners listening to an event.
     *
     * @param event Event name
     * @returns Array of listeners subscribed to `event`
     */
    listeners(event) {
        return super.listeners(event);
    }
}
exports.StrictEventEmitter = StrictEventEmitter;


/***/ }),

/***/ "./node_modules/socket.io-client/build/url.js":
/*!****************************************************!*\
  !*** ./node_modules/socket.io-client/build/url.js ***!
  \****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.url = void 0;
const parseuri = __webpack_require__(/*! parseuri */ "./node_modules/parseuri/index.js");
const debug = __webpack_require__(/*! debug */ "./node_modules/socket.io-client/node_modules/debug/src/browser.js")("socket.io-client:url");
/**
 * URL parser.
 *
 * @param uri - url
 * @param path - the request path of the connection
 * @param loc - An object meant to mimic window.location.
 *        Defaults to window.location.
 * @public
 */
function url(uri, path = "", loc) {
    let obj = uri;
    // default to window.location
    loc = loc || (typeof location !== "undefined" && location);
    if (null == uri)
        uri = loc.protocol + "//" + loc.host;
    // relative path support
    if (typeof uri === "string") {
        if ("/" === uri.charAt(0)) {
            if ("/" === uri.charAt(1)) {
                uri = loc.protocol + uri;
            }
            else {
                uri = loc.host + uri;
            }
        }
        if (!/^(https?|wss?):\/\//.test(uri)) {
            debug("protocol-less url %s", uri);
            if ("undefined" !== typeof loc) {
                uri = loc.protocol + "//" + uri;
            }
            else {
                uri = "https://" + uri;
            }
        }
        // parse
        debug("parse %s", uri);
        obj = parseuri(uri);
    }
    // make sure we treat `localhost:80` and `localhost` equally
    if (!obj.port) {
        if (/^(http|ws)$/.test(obj.protocol)) {
            obj.port = "80";
        }
        else if (/^(http|ws)s$/.test(obj.protocol)) {
            obj.port = "443";
        }
    }
    obj.path = obj.path || "/";
    const ipv6 = obj.host.indexOf(":") !== -1;
    const host = ipv6 ? "[" + obj.host + "]" : obj.host;
    // define unique id
    obj.id = obj.protocol + "://" + host + ":" + obj.port + path;
    // define href
    obj.href =
        obj.protocol +
            "://" +
            host +
            (loc && loc.port === obj.port ? "" : ":" + obj.port);
    return obj;
}
exports.url = url;


/***/ }),

/***/ "./node_modules/socket.io-client/node_modules/debug/src/browser.js":
/*!*************************************************************************!*\
  !*** ./node_modules/socket.io-client/node_modules/debug/src/browser.js ***!
  \*************************************************************************/
/***/ ((module, exports, __webpack_require__) => {

/* eslint-env browser */

/**
 * This is the web browser implementation of `debug()`.
 */

exports.formatArgs = formatArgs;
exports.save = save;
exports.load = load;
exports.useColors = useColors;
exports.storage = localstorage();
exports.destroy = (() => {
	let warned = false;

	return () => {
		if (!warned) {
			warned = true;
			console.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');
		}
	};
})();

/**
 * Colors.
 */

exports.colors = [
	'#0000CC',
	'#0000FF',
	'#0033CC',
	'#0033FF',
	'#0066CC',
	'#0066FF',
	'#0099CC',
	'#0099FF',
	'#00CC00',
	'#00CC33',
	'#00CC66',
	'#00CC99',
	'#00CCCC',
	'#00CCFF',
	'#3300CC',
	'#3300FF',
	'#3333CC',
	'#3333FF',
	'#3366CC',
	'#3366FF',
	'#3399CC',
	'#3399FF',
	'#33CC00',
	'#33CC33',
	'#33CC66',
	'#33CC99',
	'#33CCCC',
	'#33CCFF',
	'#6600CC',
	'#6600FF',
	'#6633CC',
	'#6633FF',
	'#66CC00',
	'#66CC33',
	'#9900CC',
	'#9900FF',
	'#9933CC',
	'#9933FF',
	'#99CC00',
	'#99CC33',
	'#CC0000',
	'#CC0033',
	'#CC0066',
	'#CC0099',
	'#CC00CC',
	'#CC00FF',
	'#CC3300',
	'#CC3333',
	'#CC3366',
	'#CC3399',
	'#CC33CC',
	'#CC33FF',
	'#CC6600',
	'#CC6633',
	'#CC9900',
	'#CC9933',
	'#CCCC00',
	'#CCCC33',
	'#FF0000',
	'#FF0033',
	'#FF0066',
	'#FF0099',
	'#FF00CC',
	'#FF00FF',
	'#FF3300',
	'#FF3333',
	'#FF3366',
	'#FF3399',
	'#FF33CC',
	'#FF33FF',
	'#FF6600',
	'#FF6633',
	'#FF9900',
	'#FF9933',
	'#FFCC00',
	'#FFCC33'
];

/**
 * Currently only WebKit-based Web Inspectors, Firefox >= v31,
 * and the Firebug extension (any Firefox version) are known
 * to support "%c" CSS customizations.
 *
 * TODO: add a `localStorage` variable to explicitly enable/disable colors
 */

// eslint-disable-next-line complexity
function useColors() {
	// NB: In an Electron preload script, document will be defined but not fully
	// initialized. Since we know we're in Chrome, we'll just detect this case
	// explicitly
	if (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {
		return true;
	}

	// Internet Explorer and Edge do not support colors.
	if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)) {
		return false;
	}

	// Is webkit? http://stackoverflow.com/a/16459606/376773
	// document is undefined in react-native: https://github.com/facebook/react-native/pull/1632
	return (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||
		// Is firebug? http://stackoverflow.com/a/398120/376773
		(typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||
		// Is firefox >= v31?
		// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages
		(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||
		// Double check webkit in userAgent just in case we are in a worker
		(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/));
}

/**
 * Colorize log arguments if enabled.
 *
 * @api public
 */

function formatArgs(args) {
	args[0] = (this.useColors ? '%c' : '') +
		this.namespace +
		(this.useColors ? ' %c' : ' ') +
		args[0] +
		(this.useColors ? '%c ' : ' ') +
		'+' + module.exports.humanize(this.diff);

	if (!this.useColors) {
		return;
	}

	const c = 'color: ' + this.color;
	args.splice(1, 0, c, 'color: inherit');

	// The final "%c" is somewhat tricky, because there could be other
	// arguments passed either before or after the %c, so we need to
	// figure out the correct index to insert the CSS into
	let index = 0;
	let lastC = 0;
	args[0].replace(/%[a-zA-Z%]/g, match => {
		if (match === '%%') {
			return;
		}
		index++;
		if (match === '%c') {
			// We only are interested in the *last* %c
			// (the user may have provided their own)
			lastC = index;
		}
	});

	args.splice(lastC, 0, c);
}

/**
 * Invokes `console.debug()` when available.
 * No-op when `console.debug` is not a "function".
 * If `console.debug` is not available, falls back
 * to `console.log`.
 *
 * @api public
 */
exports.log = console.debug || console.log || (() => {});

/**
 * Save `namespaces`.
 *
 * @param {String} namespaces
 * @api private
 */
function save(namespaces) {
	try {
		if (namespaces) {
			exports.storage.setItem('debug', namespaces);
		} else {
			exports.storage.removeItem('debug');
		}
	} catch (error) {
		// Swallow
		// XXX (@Qix-) should we be logging these?
	}
}

/**
 * Load `namespaces`.
 *
 * @return {String} returns the previously persisted debug modes
 * @api private
 */
function load() {
	let r;
	try {
		r = exports.storage.getItem('debug');
	} catch (error) {
		// Swallow
		// XXX (@Qix-) should we be logging these?
	}

	// If debug isn't set in LS, and we're in Electron, try to load $DEBUG
	if (!r && typeof process !== 'undefined' && 'env' in process) {
		r = process.env.DEBUG;
	}

	return r;
}

/**
 * Localstorage attempts to return the localstorage.
 *
 * This is necessary because safari throws
 * when a user disables cookies/localstorage
 * and you attempt to access it.
 *
 * @return {LocalStorage}
 * @api private
 */

function localstorage() {
	try {
		// TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context
		// The Browser also has localStorage in the global context.
		return localStorage;
	} catch (error) {
		// Swallow
		// XXX (@Qix-) should we be logging these?
	}
}

module.exports = __webpack_require__(/*! ./common */ "./node_modules/socket.io-client/node_modules/debug/src/common.js")(exports);

const {formatters} = module.exports;

/**
 * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.
 */

formatters.j = function (v) {
	try {
		return JSON.stringify(v);
	} catch (error) {
		return '[UnexpectedJSONParseError]: ' + error.message;
	}
};


/***/ }),

/***/ "./node_modules/socket.io-client/node_modules/debug/src/common.js":
/*!************************************************************************!*\
  !*** ./node_modules/socket.io-client/node_modules/debug/src/common.js ***!
  \************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


/**
 * This is the common logic for both the Node.js and web browser
 * implementations of `debug()`.
 */

function setup(env) {
	createDebug.debug = createDebug;
	createDebug.default = createDebug;
	createDebug.coerce = coerce;
	createDebug.disable = disable;
	createDebug.enable = enable;
	createDebug.enabled = enabled;
	createDebug.humanize = __webpack_require__(/*! ms */ "./node_modules/socket.io-client/node_modules/ms/index.js");
	createDebug.destroy = destroy;

	Object.keys(env).forEach(key => {
		createDebug[key] = env[key];
	});

	/**
	* The currently active debug mode names, and names to skip.
	*/

	createDebug.names = [];
	createDebug.skips = [];

	/**
	* Map of special "%n" handling functions, for the debug "format" argument.
	*
	* Valid key names are a single, lower or upper-case letter, i.e. "n" and "N".
	*/
	createDebug.formatters = {};

	/**
	* Selects a color for a debug namespace
	* @param {String} namespace The namespace string for the for the debug instance to be colored
	* @return {Number|String} An ANSI color code for the given namespace
	* @api private
	*/
	function selectColor(namespace) {
		let hash = 0;

		for (let i = 0; i < namespace.length; i++) {
			hash = ((hash << 5) - hash) + namespace.charCodeAt(i);
			hash |= 0; // Convert to 32bit integer
		}

		return createDebug.colors[Math.abs(hash) % createDebug.colors.length];
	}
	createDebug.selectColor = selectColor;

	/**
	* Create a debugger with the given `namespace`.
	*
	* @param {String} namespace
	* @return {Function}
	* @api public
	*/
	function createDebug(namespace) {
		let prevTime;
		let enableOverride = null;

		function debug(...args) {
			// Disabled?
			if (!debug.enabled) {
				return;
			}

			const self = debug;

			// Set `diff` timestamp
			const curr = Number(new Date());
			const ms = curr - (prevTime || curr);
			self.diff = ms;
			self.prev = prevTime;
			self.curr = curr;
			prevTime = curr;

			args[0] = createDebug.coerce(args[0]);

			if (typeof args[0] !== 'string') {
				// Anything else let's inspect with %O
				args.unshift('%O');
			}

			// Apply any `formatters` transformations
			let index = 0;
			args[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format) => {
				// If we encounter an escaped % then don't increase the array index
				if (match === '%%') {
					return '%';
				}
				index++;
				const formatter = createDebug.formatters[format];
				if (typeof formatter === 'function') {
					const val = args[index];
					match = formatter.call(self, val);

					// Now we need to remove `args[index]` since it's inlined in the `format`
					args.splice(index, 1);
					index--;
				}
				return match;
			});

			// Apply env-specific formatting (colors, etc.)
			createDebug.formatArgs.call(self, args);

			const logFn = self.log || createDebug.log;
			logFn.apply(self, args);
		}

		debug.namespace = namespace;
		debug.useColors = createDebug.useColors();
		debug.color = createDebug.selectColor(namespace);
		debug.extend = extend;
		debug.destroy = createDebug.destroy; // XXX Temporary. Will be removed in the next major release.

		Object.defineProperty(debug, 'enabled', {
			enumerable: true,
			configurable: false,
			get: () => enableOverride === null ? createDebug.enabled(namespace) : enableOverride,
			set: v => {
				enableOverride = v;
			}
		});

		// Env-specific initialization logic for debug instances
		if (typeof createDebug.init === 'function') {
			createDebug.init(debug);
		}

		return debug;
	}

	function extend(namespace, delimiter) {
		const newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);
		newDebug.log = this.log;
		return newDebug;
	}

	/**
	* Enables a debug mode by namespaces. This can include modes
	* separated by a colon and wildcards.
	*
	* @param {String} namespaces
	* @api public
	*/
	function enable(namespaces) {
		createDebug.save(namespaces);

		createDebug.names = [];
		createDebug.skips = [];

		let i;
		const split = (typeof namespaces === 'string' ? namespaces : '').split(/[\s,]+/);
		const len = split.length;

		for (i = 0; i < len; i++) {
			if (!split[i]) {
				// ignore empty strings
				continue;
			}

			namespaces = split[i].replace(/\*/g, '.*?');

			if (namespaces[0] === '-') {
				createDebug.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));
			} else {
				createDebug.names.push(new RegExp('^' + namespaces + '$'));
			}
		}
	}

	/**
	* Disable debug output.
	*
	* @return {String} namespaces
	* @api public
	*/
	function disable() {
		const namespaces = [
			...createDebug.names.map(toNamespace),
			...createDebug.skips.map(toNamespace).map(namespace => '-' + namespace)
		].join(',');
		createDebug.enable('');
		return namespaces;
	}

	/**
	* Returns true if the given mode name is enabled, false otherwise.
	*
	* @param {String} name
	* @return {Boolean}
	* @api public
	*/
	function enabled(name) {
		if (name[name.length - 1] === '*') {
			return true;
		}

		let i;
		let len;

		for (i = 0, len = createDebug.skips.length; i < len; i++) {
			if (createDebug.skips[i].test(name)) {
				return false;
			}
		}

		for (i = 0, len = createDebug.names.length; i < len; i++) {
			if (createDebug.names[i].test(name)) {
				return true;
			}
		}

		return false;
	}

	/**
	* Convert regexp to namespace
	*
	* @param {RegExp} regxep
	* @return {String} namespace
	* @api private
	*/
	function toNamespace(regexp) {
		return regexp.toString()
			.substring(2, regexp.toString().length - 2)
			.replace(/\.\*\?$/, '*');
	}

	/**
	* Coerce `val`.
	*
	* @param {Mixed} val
	* @return {Mixed}
	* @api private
	*/
	function coerce(val) {
		if (val instanceof Error) {
			return val.stack || val.message;
		}
		return val;
	}

	/**
	* XXX DO NOT USE. This is a temporary stub function.
	* XXX It WILL be removed in the next major release.
	*/
	function destroy() {
		console.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');
	}

	createDebug.enable(createDebug.load());

	return createDebug;
}

module.exports = setup;


/***/ }),

/***/ "./node_modules/socket.io-client/node_modules/ms/index.js":
/*!****************************************************************!*\
  !*** ./node_modules/socket.io-client/node_modules/ms/index.js ***!
  \****************************************************************/
/***/ ((module) => {

/**
 * Helpers.
 */

var s = 1000;
var m = s * 60;
var h = m * 60;
var d = h * 24;
var w = d * 7;
var y = d * 365.25;

/**
 * Parse or format the given `val`.
 *
 * Options:
 *
 *  - `long` verbose formatting [false]
 *
 * @param {String|Number} val
 * @param {Object} [options]
 * @throws {Error} throw an error if val is not a non-empty string or a number
 * @return {String|Number}
 * @api public
 */

module.exports = function(val, options) {
  options = options || {};
  var type = typeof val;
  if (type === 'string' && val.length > 0) {
    return parse(val);
  } else if (type === 'number' && isFinite(val)) {
    return options.long ? fmtLong(val) : fmtShort(val);
  }
  throw new Error(
    'val is not a non-empty string or a valid number. val=' +
      JSON.stringify(val)
  );
};

/**
 * Parse the given `str` and return milliseconds.
 *
 * @param {String} str
 * @return {Number}
 * @api private
 */

function parse(str) {
  str = String(str);
  if (str.length > 100) {
    return;
  }
  var match = /^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(
    str
  );
  if (!match) {
    return;
  }
  var n = parseFloat(match[1]);
  var type = (match[2] || 'ms').toLowerCase();
  switch (type) {
    case 'years':
    case 'year':
    case 'yrs':
    case 'yr':
    case 'y':
      return n * y;
    case 'weeks':
    case 'week':
    case 'w':
      return n * w;
    case 'days':
    case 'day':
    case 'd':
      return n * d;
    case 'hours':
    case 'hour':
    case 'hrs':
    case 'hr':
    case 'h':
      return n * h;
    case 'minutes':
    case 'minute':
    case 'mins':
    case 'min':
    case 'm':
      return n * m;
    case 'seconds':
    case 'second':
    case 'secs':
    case 'sec':
    case 's':
      return n * s;
    case 'milliseconds':
    case 'millisecond':
    case 'msecs':
    case 'msec':
    case 'ms':
      return n;
    default:
      return undefined;
  }
}

/**
 * Short format for `ms`.
 *
 * @param {Number} ms
 * @return {String}
 * @api private
 */

function fmtShort(ms) {
  var msAbs = Math.abs(ms);
  if (msAbs >= d) {
    return Math.round(ms / d) + 'd';
  }
  if (msAbs >= h) {
    return Math.round(ms / h) + 'h';
  }
  if (msAbs >= m) {
    return Math.round(ms / m) + 'm';
  }
  if (msAbs >= s) {
    return Math.round(ms / s) + 's';
  }
  return ms + 'ms';
}

/**
 * Long format for `ms`.
 *
 * @param {Number} ms
 * @return {String}
 * @api private
 */

function fmtLong(ms) {
  var msAbs = Math.abs(ms);
  if (msAbs >= d) {
    return plural(ms, msAbs, d, 'day');
  }
  if (msAbs >= h) {
    return plural(ms, msAbs, h, 'hour');
  }
  if (msAbs >= m) {
    return plural(ms, msAbs, m, 'minute');
  }
  if (msAbs >= s) {
    return plural(ms, msAbs, s, 'second');
  }
  return ms + ' ms';
}

/**
 * Pluralization helper.
 */

function plural(ms, msAbs, n, name) {
  var isPlural = msAbs >= n * 1.5;
  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');
}


/***/ }),

/***/ "./node_modules/socket.io-parser/dist/binary.js":
/*!******************************************************!*\
  !*** ./node_modules/socket.io-parser/dist/binary.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.reconstructPacket = exports.deconstructPacket = void 0;
const is_binary_1 = __webpack_require__(/*! ./is-binary */ "./node_modules/socket.io-parser/dist/is-binary.js");
/**
 * Replaces every Buffer | ArrayBuffer | Blob | File in packet with a numbered placeholder.
 *
 * @param {Object} packet - socket.io event packet
 * @return {Object} with deconstructed packet and list of buffers
 * @public
 */
function deconstructPacket(packet) {
    const buffers = [];
    const packetData = packet.data;
    const pack = packet;
    pack.data = _deconstructPacket(packetData, buffers);
    pack.attachments = buffers.length; // number of binary 'attachments'
    return { packet: pack, buffers: buffers };
}
exports.deconstructPacket = deconstructPacket;
function _deconstructPacket(data, buffers) {
    if (!data)
        return data;
    if (is_binary_1.isBinary(data)) {
        const placeholder = { _placeholder: true, num: buffers.length };
        buffers.push(data);
        return placeholder;
    }
    else if (Array.isArray(data)) {
        const newData = new Array(data.length);
        for (let i = 0; i < data.length; i++) {
            newData[i] = _deconstructPacket(data[i], buffers);
        }
        return newData;
    }
    else if (typeof data === "object" && !(data instanceof Date)) {
        const newData = {};
        for (const key in data) {
            if (data.hasOwnProperty(key)) {
                newData[key] = _deconstructPacket(data[key], buffers);
            }
        }
        return newData;
    }
    return data;
}
/**
 * Reconstructs a binary packet from its placeholder packet and buffers
 *
 * @param {Object} packet - event packet with placeholders
 * @param {Array} buffers - binary buffers to put in placeholder positions
 * @return {Object} reconstructed packet
 * @public
 */
function reconstructPacket(packet, buffers) {
    packet.data = _reconstructPacket(packet.data, buffers);
    packet.attachments = undefined; // no longer useful
    return packet;
}
exports.reconstructPacket = reconstructPacket;
function _reconstructPacket(data, buffers) {
    if (!data)
        return data;
    if (data && data._placeholder) {
        return buffers[data.num]; // appropriate buffer (should be natural order anyway)
    }
    else if (Array.isArray(data)) {
        for (let i = 0; i < data.length; i++) {
            data[i] = _reconstructPacket(data[i], buffers);
        }
    }
    else if (typeof data === "object") {
        for (const key in data) {
            if (data.hasOwnProperty(key)) {
                data[key] = _reconstructPacket(data[key], buffers);
            }
        }
    }
    return data;
}


/***/ }),

/***/ "./node_modules/socket.io-parser/dist/index.js":
/*!*****************************************************!*\
  !*** ./node_modules/socket.io-parser/dist/index.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Decoder = exports.Encoder = exports.PacketType = exports.protocol = void 0;
const Emitter = __webpack_require__(/*! component-emitter */ "./node_modules/component-emitter/index.js");
const binary_1 = __webpack_require__(/*! ./binary */ "./node_modules/socket.io-parser/dist/binary.js");
const is_binary_1 = __webpack_require__(/*! ./is-binary */ "./node_modules/socket.io-parser/dist/is-binary.js");
const debug = __webpack_require__(/*! debug */ "./node_modules/socket.io-parser/node_modules/debug/src/browser.js")("socket.io-parser");
/**
 * Protocol version.
 *
 * @public
 */
exports.protocol = 5;
var PacketType;
(function (PacketType) {
    PacketType[PacketType["CONNECT"] = 0] = "CONNECT";
    PacketType[PacketType["DISCONNECT"] = 1] = "DISCONNECT";
    PacketType[PacketType["EVENT"] = 2] = "EVENT";
    PacketType[PacketType["ACK"] = 3] = "ACK";
    PacketType[PacketType["CONNECT_ERROR"] = 4] = "CONNECT_ERROR";
    PacketType[PacketType["BINARY_EVENT"] = 5] = "BINARY_EVENT";
    PacketType[PacketType["BINARY_ACK"] = 6] = "BINARY_ACK";
})(PacketType = exports.PacketType || (exports.PacketType = {}));
/**
 * A socket.io Encoder instance
 */
class Encoder {
    /**
     * Encode a packet as a single string if non-binary, or as a
     * buffer sequence, depending on packet type.
     *
     * @param {Object} obj - packet object
     */
    encode(obj) {
        debug("encoding packet %j", obj);
        if (obj.type === PacketType.EVENT || obj.type === PacketType.ACK) {
            if (is_binary_1.hasBinary(obj)) {
                obj.type =
                    obj.type === PacketType.EVENT
                        ? PacketType.BINARY_EVENT
                        : PacketType.BINARY_ACK;
                return this.encodeAsBinary(obj);
            }
        }
        return [this.encodeAsString(obj)];
    }
    /**
     * Encode packet as string.
     */
    encodeAsString(obj) {
        // first is type
        let str = "" + obj.type;
        // attachments if we have them
        if (obj.type === PacketType.BINARY_EVENT ||
            obj.type === PacketType.BINARY_ACK) {
            str += obj.attachments + "-";
        }
        // if we have a namespace other than `/`
        // we append it followed by a comma `,`
        if (obj.nsp && "/" !== obj.nsp) {
            str += obj.nsp + ",";
        }
        // immediately followed by the id
        if (null != obj.id) {
            str += obj.id;
        }
        // json data
        if (null != obj.data) {
            str += JSON.stringify(obj.data);
        }
        debug("encoded %j as %s", obj, str);
        return str;
    }
    /**
     * Encode packet as 'buffer sequence' by removing blobs, and
     * deconstructing packet into object with placeholders and
     * a list of buffers.
     */
    encodeAsBinary(obj) {
        const deconstruction = binary_1.deconstructPacket(obj);
        const pack = this.encodeAsString(deconstruction.packet);
        const buffers = deconstruction.buffers;
        buffers.unshift(pack); // add packet info to beginning of data list
        return buffers; // write all the buffers
    }
}
exports.Encoder = Encoder;
/**
 * A socket.io Decoder instance
 *
 * @return {Object} decoder
 */
class Decoder extends Emitter {
    constructor() {
        super();
    }
    /**
     * Decodes an encoded packet string into packet JSON.
     *
     * @param {String} obj - encoded packet
     */
    add(obj) {
        let packet;
        if (typeof obj === "string") {
            packet = this.decodeString(obj);
            if (packet.type === PacketType.BINARY_EVENT ||
                packet.type === PacketType.BINARY_ACK) {
                // binary packet's json
                this.reconstructor = new BinaryReconstructor(packet);
                // no attachments, labeled binary but no binary data to follow
                if (packet.attachments === 0) {
                    super.emit("decoded", packet);
                }
            }
            else {
                // non-binary full packet
                super.emit("decoded", packet);
            }
        }
        else if (is_binary_1.isBinary(obj) || obj.base64) {
            // raw binary data
            if (!this.reconstructor) {
                throw new Error("got binary data when not reconstructing a packet");
            }
            else {
                packet = this.reconstructor.takeBinaryData(obj);
                if (packet) {
                    // received final buffer
                    this.reconstructor = null;
                    super.emit("decoded", packet);
                }
            }
        }
        else {
            throw new Error("Unknown type: " + obj);
        }
    }
    /**
     * Decode a packet String (JSON data)
     *
     * @param {String} str
     * @return {Object} packet
     */
    decodeString(str) {
        let i = 0;
        // look up type
        const p = {
            type: Number(str.charAt(0)),
        };
        if (PacketType[p.type] === undefined) {
            throw new Error("unknown packet type " + p.type);
        }
        // look up attachments if type binary
        if (p.type === PacketType.BINARY_EVENT ||
            p.type === PacketType.BINARY_ACK) {
            const start = i + 1;
            while (str.charAt(++i) !== "-" && i != str.length) { }
            const buf = str.substring(start, i);
            if (buf != Number(buf) || str.charAt(i) !== "-") {
                throw new Error("Illegal attachments");
            }
            p.attachments = Number(buf);
        }
        // look up namespace (if any)
        if ("/" === str.charAt(i + 1)) {
            const start = i + 1;
            while (++i) {
                const c = str.charAt(i);
                if ("," === c)
                    break;
                if (i === str.length)
                    break;
            }
            p.nsp = str.substring(start, i);
        }
        else {
            p.nsp = "/";
        }
        // look up id
        const next = str.charAt(i + 1);
        if ("" !== next && Number(next) == next) {
            const start = i + 1;
            while (++i) {
                const c = str.charAt(i);
                if (null == c || Number(c) != c) {
                    --i;
                    break;
                }
                if (i === str.length)
                    break;
            }
            p.id = Number(str.substring(start, i + 1));
        }
        // look up json data
        if (str.charAt(++i)) {
            const payload = tryParse(str.substr(i));
            if (Decoder.isPayloadValid(p.type, payload)) {
                p.data = payload;
            }
            else {
                throw new Error("invalid payload");
            }
        }
        debug("decoded %s as %j", str, p);
        return p;
    }
    static isPayloadValid(type, payload) {
        switch (type) {
            case PacketType.CONNECT:
                return typeof payload === "object";
            case PacketType.DISCONNECT:
                return payload === undefined;
            case PacketType.CONNECT_ERROR:
                return typeof payload === "string" || typeof payload === "object";
            case PacketType.EVENT:
            case PacketType.BINARY_EVENT:
                return Array.isArray(payload) && payload.length > 0;
            case PacketType.ACK:
            case PacketType.BINARY_ACK:
                return Array.isArray(payload);
        }
    }
    /**
     * Deallocates a parser's resources
     */
    destroy() {
        if (this.reconstructor) {
            this.reconstructor.finishedReconstruction();
        }
    }
}
exports.Decoder = Decoder;
function tryParse(str) {
    try {
        return JSON.parse(str);
    }
    catch (e) {
        return false;
    }
}
/**
 * A manager of a binary event's 'buffer sequence'. Should
 * be constructed whenever a packet of type BINARY_EVENT is
 * decoded.
 *
 * @param {Object} packet
 * @return {BinaryReconstructor} initialized reconstructor
 */
class BinaryReconstructor {
    constructor(packet) {
        this.packet = packet;
        this.buffers = [];
        this.reconPack = packet;
    }
    /**
     * Method to be called when binary data received from connection
     * after a BINARY_EVENT packet.
     *
     * @param {Buffer | ArrayBuffer} binData - the raw binary data received
     * @return {null | Object} returns null if more binary data is expected or
     *   a reconstructed packet object if all buffers have been received.
     */
    takeBinaryData(binData) {
        this.buffers.push(binData);
        if (this.buffers.length === this.reconPack.attachments) {
            // done with buffer list
            const packet = binary_1.reconstructPacket(this.reconPack, this.buffers);
            this.finishedReconstruction();
            return packet;
        }
        return null;
    }
    /**
     * Cleans up binary packet reconstruction variables.
     */
    finishedReconstruction() {
        this.reconPack = null;
        this.buffers = [];
    }
}


/***/ }),

/***/ "./node_modules/socket.io-parser/dist/is-binary.js":
/*!*********************************************************!*\
  !*** ./node_modules/socket.io-parser/dist/is-binary.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.hasBinary = exports.isBinary = void 0;
const withNativeArrayBuffer = typeof ArrayBuffer === "function";
const isView = (obj) => {
    return typeof ArrayBuffer.isView === "function"
        ? ArrayBuffer.isView(obj)
        : obj.buffer instanceof ArrayBuffer;
};
const toString = Object.prototype.toString;
const withNativeBlob = typeof Blob === "function" ||
    (typeof Blob !== "undefined" &&
        toString.call(Blob) === "[object BlobConstructor]");
const withNativeFile = typeof File === "function" ||
    (typeof File !== "undefined" &&
        toString.call(File) === "[object FileConstructor]");
/**
 * Returns true if obj is a Buffer, an ArrayBuffer, a Blob or a File.
 *
 * @private
 */
function isBinary(obj) {
    return ((withNativeArrayBuffer && (obj instanceof ArrayBuffer || isView(obj))) ||
        (withNativeBlob && obj instanceof Blob) ||
        (withNativeFile && obj instanceof File));
}
exports.isBinary = isBinary;
function hasBinary(obj, toJSON) {
    if (!obj || typeof obj !== "object") {
        return false;
    }
    if (Array.isArray(obj)) {
        for (let i = 0, l = obj.length; i < l; i++) {
            if (hasBinary(obj[i])) {
                return true;
            }
        }
        return false;
    }
    if (isBinary(obj)) {
        return true;
    }
    if (obj.toJSON &&
        typeof obj.toJSON === "function" &&
        arguments.length === 1) {
        return hasBinary(obj.toJSON(), true);
    }
    for (const key in obj) {
        if (Object.prototype.hasOwnProperty.call(obj, key) && hasBinary(obj[key])) {
            return true;
        }
    }
    return false;
}
exports.hasBinary = hasBinary;


/***/ }),

/***/ "./node_modules/socket.io-parser/node_modules/debug/src/browser.js":
/*!*************************************************************************!*\
  !*** ./node_modules/socket.io-parser/node_modules/debug/src/browser.js ***!
  \*************************************************************************/
/***/ ((module, exports, __webpack_require__) => {

/* eslint-env browser */

/**
 * This is the web browser implementation of `debug()`.
 */

exports.formatArgs = formatArgs;
exports.save = save;
exports.load = load;
exports.useColors = useColors;
exports.storage = localstorage();
exports.destroy = (() => {
	let warned = false;

	return () => {
		if (!warned) {
			warned = true;
			console.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');
		}
	};
})();

/**
 * Colors.
 */

exports.colors = [
	'#0000CC',
	'#0000FF',
	'#0033CC',
	'#0033FF',
	'#0066CC',
	'#0066FF',
	'#0099CC',
	'#0099FF',
	'#00CC00',
	'#00CC33',
	'#00CC66',
	'#00CC99',
	'#00CCCC',
	'#00CCFF',
	'#3300CC',
	'#3300FF',
	'#3333CC',
	'#3333FF',
	'#3366CC',
	'#3366FF',
	'#3399CC',
	'#3399FF',
	'#33CC00',
	'#33CC33',
	'#33CC66',
	'#33CC99',
	'#33CCCC',
	'#33CCFF',
	'#6600CC',
	'#6600FF',
	'#6633CC',
	'#6633FF',
	'#66CC00',
	'#66CC33',
	'#9900CC',
	'#9900FF',
	'#9933CC',
	'#9933FF',
	'#99CC00',
	'#99CC33',
	'#CC0000',
	'#CC0033',
	'#CC0066',
	'#CC0099',
	'#CC00CC',
	'#CC00FF',
	'#CC3300',
	'#CC3333',
	'#CC3366',
	'#CC3399',
	'#CC33CC',
	'#CC33FF',
	'#CC6600',
	'#CC6633',
	'#CC9900',
	'#CC9933',
	'#CCCC00',
	'#CCCC33',
	'#FF0000',
	'#FF0033',
	'#FF0066',
	'#FF0099',
	'#FF00CC',
	'#FF00FF',
	'#FF3300',
	'#FF3333',
	'#FF3366',
	'#FF3399',
	'#FF33CC',
	'#FF33FF',
	'#FF6600',
	'#FF6633',
	'#FF9900',
	'#FF9933',
	'#FFCC00',
	'#FFCC33'
];

/**
 * Currently only WebKit-based Web Inspectors, Firefox >= v31,
 * and the Firebug extension (any Firefox version) are known
 * to support "%c" CSS customizations.
 *
 * TODO: add a `localStorage` variable to explicitly enable/disable colors
 */

// eslint-disable-next-line complexity
function useColors() {
	// NB: In an Electron preload script, document will be defined but not fully
	// initialized. Since we know we're in Chrome, we'll just detect this case
	// explicitly
	if (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {
		return true;
	}

	// Internet Explorer and Edge do not support colors.
	if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)) {
		return false;
	}

	// Is webkit? http://stackoverflow.com/a/16459606/376773
	// document is undefined in react-native: https://github.com/facebook/react-native/pull/1632
	return (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||
		// Is firebug? http://stackoverflow.com/a/398120/376773
		(typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||
		// Is firefox >= v31?
		// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages
		(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||
		// Double check webkit in userAgent just in case we are in a worker
		(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/));
}

/**
 * Colorize log arguments if enabled.
 *
 * @api public
 */

function formatArgs(args) {
	args[0] = (this.useColors ? '%c' : '') +
		this.namespace +
		(this.useColors ? ' %c' : ' ') +
		args[0] +
		(this.useColors ? '%c ' : ' ') +
		'+' + module.exports.humanize(this.diff);

	if (!this.useColors) {
		return;
	}

	const c = 'color: ' + this.color;
	args.splice(1, 0, c, 'color: inherit');

	// The final "%c" is somewhat tricky, because there could be other
	// arguments passed either before or after the %c, so we need to
	// figure out the correct index to insert the CSS into
	let index = 0;
	let lastC = 0;
	args[0].replace(/%[a-zA-Z%]/g, match => {
		if (match === '%%') {
			return;
		}
		index++;
		if (match === '%c') {
			// We only are interested in the *last* %c
			// (the user may have provided their own)
			lastC = index;
		}
	});

	args.splice(lastC, 0, c);
}

/**
 * Invokes `console.debug()` when available.
 * No-op when `console.debug` is not a "function".
 * If `console.debug` is not available, falls back
 * to `console.log`.
 *
 * @api public
 */
exports.log = console.debug || console.log || (() => {});

/**
 * Save `namespaces`.
 *
 * @param {String} namespaces
 * @api private
 */
function save(namespaces) {
	try {
		if (namespaces) {
			exports.storage.setItem('debug', namespaces);
		} else {
			exports.storage.removeItem('debug');
		}
	} catch (error) {
		// Swallow
		// XXX (@Qix-) should we be logging these?
	}
}

/**
 * Load `namespaces`.
 *
 * @return {String} returns the previously persisted debug modes
 * @api private
 */
function load() {
	let r;
	try {
		r = exports.storage.getItem('debug');
	} catch (error) {
		// Swallow
		// XXX (@Qix-) should we be logging these?
	}

	// If debug isn't set in LS, and we're in Electron, try to load $DEBUG
	if (!r && typeof process !== 'undefined' && 'env' in process) {
		r = process.env.DEBUG;
	}

	return r;
}

/**
 * Localstorage attempts to return the localstorage.
 *
 * This is necessary because safari throws
 * when a user disables cookies/localstorage
 * and you attempt to access it.
 *
 * @return {LocalStorage}
 * @api private
 */

function localstorage() {
	try {
		// TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context
		// The Browser also has localStorage in the global context.
		return localStorage;
	} catch (error) {
		// Swallow
		// XXX (@Qix-) should we be logging these?
	}
}

module.exports = __webpack_require__(/*! ./common */ "./node_modules/socket.io-parser/node_modules/debug/src/common.js")(exports);

const {formatters} = module.exports;

/**
 * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.
 */

formatters.j = function (v) {
	try {
		return JSON.stringify(v);
	} catch (error) {
		return '[UnexpectedJSONParseError]: ' + error.message;
	}
};


/***/ }),

/***/ "./node_modules/socket.io-parser/node_modules/debug/src/common.js":
/*!************************************************************************!*\
  !*** ./node_modules/socket.io-parser/node_modules/debug/src/common.js ***!
  \************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


/**
 * This is the common logic for both the Node.js and web browser
 * implementations of `debug()`.
 */

function setup(env) {
	createDebug.debug = createDebug;
	createDebug.default = createDebug;
	createDebug.coerce = coerce;
	createDebug.disable = disable;
	createDebug.enable = enable;
	createDebug.enabled = enabled;
	createDebug.humanize = __webpack_require__(/*! ms */ "./node_modules/socket.io-parser/node_modules/ms/index.js");
	createDebug.destroy = destroy;

	Object.keys(env).forEach(key => {
		createDebug[key] = env[key];
	});

	/**
	* The currently active debug mode names, and names to skip.
	*/

	createDebug.names = [];
	createDebug.skips = [];

	/**
	* Map of special "%n" handling functions, for the debug "format" argument.
	*
	* Valid key names are a single, lower or upper-case letter, i.e. "n" and "N".
	*/
	createDebug.formatters = {};

	/**
	* Selects a color for a debug namespace
	* @param {String} namespace The namespace string for the for the debug instance to be colored
	* @return {Number|String} An ANSI color code for the given namespace
	* @api private
	*/
	function selectColor(namespace) {
		let hash = 0;

		for (let i = 0; i < namespace.length; i++) {
			hash = ((hash << 5) - hash) + namespace.charCodeAt(i);
			hash |= 0; // Convert to 32bit integer
		}

		return createDebug.colors[Math.abs(hash) % createDebug.colors.length];
	}
	createDebug.selectColor = selectColor;

	/**
	* Create a debugger with the given `namespace`.
	*
	* @param {String} namespace
	* @return {Function}
	* @api public
	*/
	function createDebug(namespace) {
		let prevTime;
		let enableOverride = null;

		function debug(...args) {
			// Disabled?
			if (!debug.enabled) {
				return;
			}

			const self = debug;

			// Set `diff` timestamp
			const curr = Number(new Date());
			const ms = curr - (prevTime || curr);
			self.diff = ms;
			self.prev = prevTime;
			self.curr = curr;
			prevTime = curr;

			args[0] = createDebug.coerce(args[0]);

			if (typeof args[0] !== 'string') {
				// Anything else let's inspect with %O
				args.unshift('%O');
			}

			// Apply any `formatters` transformations
			let index = 0;
			args[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format) => {
				// If we encounter an escaped % then don't increase the array index
				if (match === '%%') {
					return '%';
				}
				index++;
				const formatter = createDebug.formatters[format];
				if (typeof formatter === 'function') {
					const val = args[index];
					match = formatter.call(self, val);

					// Now we need to remove `args[index]` since it's inlined in the `format`
					args.splice(index, 1);
					index--;
				}
				return match;
			});

			// Apply env-specific formatting (colors, etc.)
			createDebug.formatArgs.call(self, args);

			const logFn = self.log || createDebug.log;
			logFn.apply(self, args);
		}

		debug.namespace = namespace;
		debug.useColors = createDebug.useColors();
		debug.color = createDebug.selectColor(namespace);
		debug.extend = extend;
		debug.destroy = createDebug.destroy; // XXX Temporary. Will be removed in the next major release.

		Object.defineProperty(debug, 'enabled', {
			enumerable: true,
			configurable: false,
			get: () => enableOverride === null ? createDebug.enabled(namespace) : enableOverride,
			set: v => {
				enableOverride = v;
			}
		});

		// Env-specific initialization logic for debug instances
		if (typeof createDebug.init === 'function') {
			createDebug.init(debug);
		}

		return debug;
	}

	function extend(namespace, delimiter) {
		const newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);
		newDebug.log = this.log;
		return newDebug;
	}

	/**
	* Enables a debug mode by namespaces. This can include modes
	* separated by a colon and wildcards.
	*
	* @param {String} namespaces
	* @api public
	*/
	function enable(namespaces) {
		createDebug.save(namespaces);

		createDebug.names = [];
		createDebug.skips = [];

		let i;
		const split = (typeof namespaces === 'string' ? namespaces : '').split(/[\s,]+/);
		const len = split.length;

		for (i = 0; i < len; i++) {
			if (!split[i]) {
				// ignore empty strings
				continue;
			}

			namespaces = split[i].replace(/\*/g, '.*?');

			if (namespaces[0] === '-') {
				createDebug.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));
			} else {
				createDebug.names.push(new RegExp('^' + namespaces + '$'));
			}
		}
	}

	/**
	* Disable debug output.
	*
	* @return {String} namespaces
	* @api public
	*/
	function disable() {
		const namespaces = [
			...createDebug.names.map(toNamespace),
			...createDebug.skips.map(toNamespace).map(namespace => '-' + namespace)
		].join(',');
		createDebug.enable('');
		return namespaces;
	}

	/**
	* Returns true if the given mode name is enabled, false otherwise.
	*
	* @param {String} name
	* @return {Boolean}
	* @api public
	*/
	function enabled(name) {
		if (name[name.length - 1] === '*') {
			return true;
		}

		let i;
		let len;

		for (i = 0, len = createDebug.skips.length; i < len; i++) {
			if (createDebug.skips[i].test(name)) {
				return false;
			}
		}

		for (i = 0, len = createDebug.names.length; i < len; i++) {
			if (createDebug.names[i].test(name)) {
				return true;
			}
		}

		return false;
	}

	/**
	* Convert regexp to namespace
	*
	* @param {RegExp} regxep
	* @return {String} namespace
	* @api private
	*/
	function toNamespace(regexp) {
		return regexp.toString()
			.substring(2, regexp.toString().length - 2)
			.replace(/\.\*\?$/, '*');
	}

	/**
	* Coerce `val`.
	*
	* @param {Mixed} val
	* @return {Mixed}
	* @api private
	*/
	function coerce(val) {
		if (val instanceof Error) {
			return val.stack || val.message;
		}
		return val;
	}

	/**
	* XXX DO NOT USE. This is a temporary stub function.
	* XXX It WILL be removed in the next major release.
	*/
	function destroy() {
		console.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');
	}

	createDebug.enable(createDebug.load());

	return createDebug;
}

module.exports = setup;


/***/ }),

/***/ "./node_modules/socket.io-parser/node_modules/ms/index.js":
/*!****************************************************************!*\
  !*** ./node_modules/socket.io-parser/node_modules/ms/index.js ***!
  \****************************************************************/
/***/ ((module) => {

/**
 * Helpers.
 */

var s = 1000;
var m = s * 60;
var h = m * 60;
var d = h * 24;
var w = d * 7;
var y = d * 365.25;

/**
 * Parse or format the given `val`.
 *
 * Options:
 *
 *  - `long` verbose formatting [false]
 *
 * @param {String|Number} val
 * @param {Object} [options]
 * @throws {Error} throw an error if val is not a non-empty string or a number
 * @return {String|Number}
 * @api public
 */

module.exports = function(val, options) {
  options = options || {};
  var type = typeof val;
  if (type === 'string' && val.length > 0) {
    return parse(val);
  } else if (type === 'number' && isFinite(val)) {
    return options.long ? fmtLong(val) : fmtShort(val);
  }
  throw new Error(
    'val is not a non-empty string or a valid number. val=' +
      JSON.stringify(val)
  );
};

/**
 * Parse the given `str` and return milliseconds.
 *
 * @param {String} str
 * @return {Number}
 * @api private
 */

function parse(str) {
  str = String(str);
  if (str.length > 100) {
    return;
  }
  var match = /^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(
    str
  );
  if (!match) {
    return;
  }
  var n = parseFloat(match[1]);
  var type = (match[2] || 'ms').toLowerCase();
  switch (type) {
    case 'years':
    case 'year':
    case 'yrs':
    case 'yr':
    case 'y':
      return n * y;
    case 'weeks':
    case 'week':
    case 'w':
      return n * w;
    case 'days':
    case 'day':
    case 'd':
      return n * d;
    case 'hours':
    case 'hour':
    case 'hrs':
    case 'hr':
    case 'h':
      return n * h;
    case 'minutes':
    case 'minute':
    case 'mins':
    case 'min':
    case 'm':
      return n * m;
    case 'seconds':
    case 'second':
    case 'secs':
    case 'sec':
    case 's':
      return n * s;
    case 'milliseconds':
    case 'millisecond':
    case 'msecs':
    case 'msec':
    case 'ms':
      return n;
    default:
      return undefined;
  }
}

/**
 * Short format for `ms`.
 *
 * @param {Number} ms
 * @return {String}
 * @api private
 */

function fmtShort(ms) {
  var msAbs = Math.abs(ms);
  if (msAbs >= d) {
    return Math.round(ms / d) + 'd';
  }
  if (msAbs >= h) {
    return Math.round(ms / h) + 'h';
  }
  if (msAbs >= m) {
    return Math.round(ms / m) + 'm';
  }
  if (msAbs >= s) {
    return Math.round(ms / s) + 's';
  }
  return ms + 'ms';
}

/**
 * Long format for `ms`.
 *
 * @param {Number} ms
 * @return {String}
 * @api private
 */

function fmtLong(ms) {
  var msAbs = Math.abs(ms);
  if (msAbs >= d) {
    return plural(ms, msAbs, d, 'day');
  }
  if (msAbs >= h) {
    return plural(ms, msAbs, h, 'hour');
  }
  if (msAbs >= m) {
    return plural(ms, msAbs, m, 'minute');
  }
  if (msAbs >= s) {
    return plural(ms, msAbs, s, 'second');
  }
  return ms + ' ms';
}

/**
 * Pluralization helper.
 */

function plural(ms, msAbs, n, name) {
  var isPlural = msAbs >= n * 1.5;
  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');
}


/***/ }),

/***/ "./src/index.ts":
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.MainScene = exports.mainCharacterinitialPosition = exports.isTouchDevice = void 0;
const enable3d_1 = __webpack_require__(/*! enable3d */ "./node_modules/enable3d/dist/index.js");
const Chair_1 = __webpack_require__(/*! ./modules/Chair */ "./src/modules/Chair.ts");
const Character_1 = __webpack_require__(/*! ./modules/Character */ "./src/modules/Character.ts");
const CharacterController_1 = __webpack_require__(/*! ./modules/CharacterController */ "./src/modules/CharacterController.ts");
const Classroom3D_1 = __webpack_require__(/*! ./modules/Classroom3D */ "./src/modules/Classroom3D.ts");
const ClassroomManager_1 = __webpack_require__(/*! ./modules/ClassroomManager */ "./src/modules/ClassroomManager.ts");
const data_1 = __webpack_require__(/*! ./modules/data */ "./src/modules/data.ts");
/**
* Is touch device?
*/
exports.isTouchDevice = 'ontouchstart' in window;
exports.mainCharacterinitialPosition = new enable3d_1.THREE.Vector3(-6, 0, 5);
const MAXIMUM_AUDIBLE_DISTANCE = 10;
class MainScene extends enable3d_1.Scene3D {
    constructor() {
        super({ key: "MainScene" });
        this.subCharacters = {};
        this.chairs = [];
        this.classroom = new ClassroomManager_1.ClassroomManager(this);
    }
    init() {
        this.renderer.setPixelRatio(Math.max(1, window.devicePixelRatio / 2));
    }
    preload() {
        return __awaiter(this, void 0, void 0, function* () {
            yield Promise.all([
                this.load.preload('man', './resources/models/box_man/box_man.glb'),
                this.load.preload('bg1', './resources/textures/world/posx.jpg'),
                this.load.preload('bg2', './resources/textures/world/negx.jpg'),
                this.load.preload('bg3', './resources/textures/world/posy.jpg'),
                this.load.preload('bg4', './resources/textures/world/negy.jpg'),
                this.load.preload('bg5', './resources/textures/world/posz.jpg'),
                this.load.preload('bg6', './resources/textures/world/negz.jpg'),
                this.load.preload('wood', './resources/textures/wood.jpg'),
                this.load.preload('floor', './resources/textures/floor.jpg')
            ]);
        });
    }
    create() {
        return __awaiter(this, void 0, void 0, function* () {
            yield this.warpSpeed('-ground', '-orbitControls', '-light', '-sky');
            // this.physics.debug.enable()
            /**
            * Setup Lights
            */
            this.setupLights();
            /**
             * Set up Enviornment
             */
            this.setupEnviornment();
            // Add Character
            this.addMainCharacter(exports.mainCharacterinitialPosition);
        });
    }
    setupEnviornment() {
        const loader = new enable3d_1.THREE.CubeTextureLoader();
        const terrainTexture = loader.load([
            './resources/textures/world/posx.jpg',
            './resources/textures/world/negx.jpg',
            './resources/textures/world/posy.jpg',
            './resources/textures/world/negy.jpg',
            './resources/textures/world/posz.jpg',
            './resources/textures/world/negz.jpg',
        ]);
        terrainTexture.encoding = enable3d_1.THREE.sRGBEncoding;
        this.scene.background = terrainTexture;
        this.addClassroom();
        for (let i of data_1.chairPositions) {
            const chair1 = new Chair_1.Chair();
            const chair2 = new Chair_1.Chair();
            chair1.position.set(i[0], 0, i[1] - 0.35);
            chair2.position.set(i[0], 0, i[1] + 0.35);
            chair1.addToWorld(this);
            chair2.addToWorld(this);
            this.chairs.push(chair1);
            this.chairs.push(chair2);
        }
    }
    addClassroom() {
        Classroom3D_1.addClassroomToScene(this);
    }
    setupLights() {
        const directionalLight = new enable3d_1.THREE.DirectionalLight(0xFFFFFF, 0.6);
        directionalLight.position.set(-40, 30, -40);
        directionalLight.target.position.set(0, 0, 0);
        directionalLight.castShadow = true;
        directionalLight.shadow.bias = -0.001;
        directionalLight.shadow.mapSize.width = 4096;
        directionalLight.shadow.mapSize.height = 4096;
        directionalLight.shadow.camera.near = 0.1;
        directionalLight.shadow.camera.far = 500.0;
        directionalLight.shadow.camera.left = 50;
        directionalLight.shadow.camera.right = -50;
        directionalLight.shadow.camera.top = 50;
        directionalLight.shadow.camera.bottom = -50;
        this.scene.add(directionalLight);
        const ambientLight = new enable3d_1.THREE.AmbientLight(0xFFFFFF, 1);
        this.scene.add(ambientLight);
    }
    addMainCharacter(initialPosition = undefined) {
        this.mainCharacter = new Character_1.Character({
            scene: this,
            initialPosition: exports.mainCharacterinitialPosition,
            onReady: (character) => {
                this.characterController = new CharacterController_1.CharacterController({
                    character,
                    camera: this.camera,
                    scene: this
                });
            }
        });
    }
    setMainCharacterColorFromString(color) {
        var _a;
        (_a = this.mainCharacter) === null || _a === void 0 ? void 0 : _a.setColor(new enable3d_1.THREE.Color(color));
    }
    addSubCharacter(character) {
        if (!Object.keys(this.subCharacters).includes('uuid')) {
            const initialPosition = new enable3d_1.THREE.Vector3(character.position.x, character.position.y, character.position.z);
            const newCharacter = new Character_1.Character({ scene: this, color: new enable3d_1.THREE.Color(character.color), initialPosition });
            newCharacter.lookingAt.set(...character.lookingAt);
            newCharacter.isSitting = character.isSitting;
            newCharacter.addNameLabel(character.username);
            this.subCharacters[character.uuid] = newCharacter;
            console.log("New character added");
        }
    }
    update(time, delta) {
        var _a;
        (_a = this.characterController) === null || _a === void 0 ? void 0 : _a.update(time, delta);
        Object.keys(this.subCharacters).forEach(uuid => {
            var _a;
            const character = this.subCharacters[uuid];
            character.update(time, delta);
            if (((_a = this.mainCharacter) === null || _a === void 0 ? void 0 : _a.target) && character.target && this.classroom.audios[uuid]) {
                const distance = this.mainCharacter.target.position.distanceTo(character.target.position);
                this.classroom.audios[uuid].volume = Math.max((MAXIMUM_AUDIBLE_DISTANCE - distance) / MAXIMUM_AUDIBLE_DISTANCE, 0);
            }
        });
    }
}
exports.MainScene = MainScene;
window.addEventListener('load', () => {
    enable3d_1.PhysicsLoader('ammo', () => {
        const project = new enable3d_1.Project({ antialias: true, maxSubSteps: 10, gravity: { x: 0, y: -9.81, z: 0 }, fixedTimeStep: 1 / 120, scenes: [MainScene] });
        project.canvas.style.marginTop = '0px !important';
        const htmlContainer = document.getElementById('classroom');
        if (!htmlContainer)
            throw ("Can't find an html element with id classroom");
        htmlContainer.appendChild(project.canvas);
        project.canvas.style.marginTop = '0px !important';
        const resize = () => {
            const newWidth = window.innerWidth;
            const newHeight = window.innerHeight;
            htmlContainer.style.width = `${newWidth}px`;
            htmlContainer.style.height = `${newHeight}px`;
            project.renderer.setSize(newWidth, newHeight);
            if ('aspect' in project.camera)
                project.camera.aspect = newWidth / newHeight;
            project.camera.updateProjectionMatrix();
        };
        window.onresize = resize;
        resize();
    });
});


/***/ }),

/***/ "./src/modules/Chair.ts":
/*!******************************!*\
  !*** ./src/modules/Chair.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Chair = void 0;
const enable3d_1 = __webpack_require__(/*! enable3d */ "./node_modules/enable3d/dist/index.js");
const loader = new enable3d_1.THREE.TextureLoader();
class Chair extends enable3d_1.ExtendedObject3D {
    constructor() {
        super();
        const group = new enable3d_1.THREE.Group();
        const material = new enable3d_1.THREE.MeshBasicMaterial({
            color: 0xFF8844,
            map: loader.load('./resources/textures/wood.jpg'),
        });
        this.add(new enable3d_1.THREE.Mesh(new enable3d_1.THREE.BoxGeometry(0.1, 1, 0.1).translate(0.45, 0.5, 0.45))); // Leg 1
        this.add(new enable3d_1.THREE.Mesh(new enable3d_1.THREE.BoxGeometry(0.1, 1, 0.1).translate(0.45, 0.5, -0.45))); // Leg 2
        this.add(new enable3d_1.THREE.Mesh(new enable3d_1.THREE.BoxGeometry(0.1, 1, 0.1).translate(-0.45, 0.5, 0.45))); // Leg 3
        this.add(new enable3d_1.THREE.Mesh(new enable3d_1.THREE.BoxGeometry(0.1, 1, 0.1).translate(-0.45, 0.5, -0.45))); // Leg 4
        this.add(new enable3d_1.THREE.Mesh(new enable3d_1.THREE.BoxGeometry(1, 0.11, 1).translate(0, 1, 0))); // Seat
        this.add(new enable3d_1.THREE.Mesh(new enable3d_1.THREE.BoxGeometry(0.1, 1.3, 1).translate(0.5, 1.6, 0))); // Side
        this.traverse((child) => {
            if (child.isMesh) {
                child.castShadow = true;
                child.receiveShadow = true;
                child.material = material;
                child.material.roughness = 0.5;
                child.material.metalness = 0.5;
            }
        });
        this.scale.setScalar(0.43);
    }
    addToWorld(scene) {
        scene.add.existing(this);
        scene.physics.add.existing(this, {
            shape: 'box',
            width: 0.5,
            height: 1,
            offset: { y: -0.25 },
            mass: 100000
        });
        this.body.setFriction(100);
        this.body.setCollisionFlags(0);
        this.body.setAngularFactor(0, 0, 0);
        // https://docs.panda3d.org/1.10/python/programming/physics/bullet/ccd
        this.body.setCcdMotionThreshold(1e-7);
        this.body.setCcdSweptSphereRadius(0.25);
    }
}
exports.Chair = Chair;


/***/ }),

/***/ "./src/modules/Character.ts":
/*!**********************************!*\
  !*** ./src/modules/Character.ts ***!
  \**********************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Character = void 0;
const enable3d_1 = __webpack_require__(/*! enable3d */ "./node_modules/enable3d/dist/index.js");
const __1 = __webpack_require__(/*! .. */ "./src/index.ts");
const DEFAULT_VECTOR_3 = new enable3d_1.THREE.Vector3();
const MOVEMENT_SPEED = 3.5;
class Character {
    constructor(params) {
        var _a;
        this.lookingAt = new enable3d_1.THREE.Vector3();
        this.isMovingForward = false;
        this.isSitting = false;
        this.params = params;
        this.color = (_a = params.color) !== null && _a !== void 0 ? _a : new enable3d_1.THREE.Color(0xFFFFFF);
        this.loadCharacter();
    }
    loadCharacter() {
        var _a;
        return __awaiter(this, void 0, void 0, function* () {
            const object = yield this.params.scene.load.gltf('man');
            const man = object.scene.children[0];
            this.target = new enable3d_1.ExtendedObject3D();
            this.target.name = 'character';
            this.target.rotateY(Math.PI + 0.1); // a hack
            this.target.add(man);
            this.target.rotation.set(0, Math.PI * 1.5, 0);
            const initialPosition = (_a = this.params.initialPosition) !== null && _a !== void 0 ? _a : new enable3d_1.THREE.Vector3();
            initialPosition.setY(initialPosition.y);
            this.target.position.set(...initialPosition.toArray());
            // Add shadow and Color
            this.target.traverse((child) => {
                if (child.isMesh && child.name != 'name-label') {
                    child.castShadow = true;
                    child.receiveShadow = true;
                    child.material.color.set(this.color);
                    child.material.roughness = 0.5;
                    child.material.metalness = 0.5;
                }
            });
            /**
            * Animations
            */
            // ad the box man's animation mixer to the animationMixers array (for auto updates)
            this.params.scene.animationMixers.add(this.target.animation.mixer);
            object.animations.forEach(animation => {
                var _a;
                if (animation.name)
                    (_a = this.target) === null || _a === void 0 ? void 0 : _a.animation.add(animation.name, animation);
            });
            this.target.animation.play('idle');
            /**
            * Add the player to the scene with a body
            */
            this.params.scene.add.existing(this.target);
            this.params.scene.physics.add.existing(this.target, {
                shape: 'sphere',
                radius: 0.25,
                width: 0.5,
                offset: { y: -0.25 },
                mass: 100
            });
            this.target.body.setFriction(100);
            this.target.body.setAngularFactor(0, 0, 0);
            // https://docs.panda3d.org/1.10/python/programming/physics/bullet/ccd
            this.target.body.setCcdMotionThreshold(1e-7);
            this.target.body.setCcdSweptSphereRadius(0.25);
            if (this.params.onReady) {
                this.params.onReady(this);
            }
            this.target.body.needUpdate = true;
        });
    }
    setColor(color) {
        var _a;
        this.color = color;
        (_a = this.target) === null || _a === void 0 ? void 0 : _a.traverse((child) => {
            if (child.isMesh && child.name != 'name-label') {
                child.material.color.set(this.color);
            }
        });
    }
    addNameLabel(name) {
        var _a;
        if (this.nameLabel) {
            (_a = this.target) === null || _a === void 0 ? void 0 : _a.remove(this.nameLabel);
        }
        var canvas = document.createElement('canvas');
        var ctx = canvas.getContext("2d");
        if (ctx) {
            ctx.canvas.height = 300;
            ctx.canvas.height = 40;
            ctx.fillStyle = "rgba(255,255,255,1)";
            ctx.font = "25px Arial";
            ctx.textAlign = 'center';
            ctx.strokeStyle = '#000000';
            ctx.lineWidth = 8;
            ctx.strokeText(name, 150, 27.5);
            ctx.fillText(name, 150, 27.5);
        }
        var texture = new enable3d_1.THREE.Texture(canvas);
        texture.needsUpdate = true;
        const nameLabel = new enable3d_1.THREE.Mesh(new enable3d_1.THREE.PlaneGeometry(1, 0.15), new enable3d_1.THREE.MeshBasicMaterial({ map: texture, side: enable3d_1.THREE.DoubleSide, transparent: true }));
        nameLabel.name = 'name-label';
        nameLabel.position.setY(1.25);
        this.nameLabel = nameLabel;
        const attatchToTarget = () => {
            if (this.target)
                this.target.add(nameLabel);
            else {
                setTimeout(attatchToTarget, 1000);
            }
        };
        attatchToTarget();
    }
    update(time, delta) {
        var _a, _b;
        if (!((_a = this.target) === null || _a === void 0 ? void 0 : _a.body))
            return;
        const rotation = this.isSitting == false ? this.lookingAt : new enable3d_1.THREE.Vector3(-1000000, 0, 0);
        const theta = Math.atan2(rotation.x, rotation.z);
        this.target.body.setAngularVelocityY(0);
        const rotationMan = this.target.getWorldDirection(DEFAULT_VECTOR_3);
        const thetaMan = Math.atan2(rotationMan.x, rotationMan.z);
        const l = Math.abs(theta - thetaMan);
        let rotationSpeed = __1.isTouchDevice ? 2 : 4;
        let d = Math.PI / 24;
        if (l > d) {
            if (l > Math.PI - d)
                rotationSpeed *= -1;
            if (theta < thetaMan)
                rotationSpeed *= -1;
            this.target.body.setAngularVelocityY(rotationSpeed);
        }
        switch (this.target.animation.current) {
            case 'idle':
                if (this.isMovingForward == true) {
                    this.target.animation.play('run');
                    break;
                }
                if (this.isSitting == true) {
                    this.target.animation.play('sit_down_right', undefined, false);
                    this.target.body.setVelocityY(3.2);
                    setTimeout(() => { var _a; return (_a = this.target) === null || _a === void 0 ? void 0 : _a.body.setVelocityX(1); }, 100);
                    break;
                }
                break;
            case 'run':
                if (this.isMovingForward == false) {
                    this.target.animation.play('idle');
                    break;
                }
                this.updateMovement(theta);
                break;
            case 'sit_down_right':
                if (this.isSitting == false) {
                    this.target.body.setVelocity(-1, 2, 0);
                    this.target.animation.play('idle');
                    break;
                }
        }
        /**
         * Player Label Update
         */
        (_b = this.nameLabel) === null || _b === void 0 ? void 0 : _b.lookAt(this.params.scene.camera.position);
    }
    updateMovement(theta) {
        var _a;
        if (!((_a = this.target) === null || _a === void 0 ? void 0 : _a.body))
            return;
        const x = Math.sin(theta) * MOVEMENT_SPEED, y = this.target.body.velocity.y, z = Math.cos(theta) * MOVEMENT_SPEED;
        this.target.body.setVelocity(x, y, z);
    }
    delete() {
        if (this.target)
            this.params.scene.scene.remove(this.target);
    }
}
exports.Character = Character;


/***/ }),

/***/ "./src/modules/CharacterController.ts":
/*!********************************************!*\
  !*** ./src/modules/CharacterController.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CharacterController = void 0;
const enable3d_1 = __webpack_require__(/*! enable3d */ "./node_modules/enable3d/dist/index.js");
const __1 = __webpack_require__(/*! .. */ "./src/index.ts");
const DEFAULT_VECTOR_3 = new enable3d_1.THREE.Vector3();
class CharacterController {
    constructor(params) {
        this.keys = {
            w: { isDown: false },
        };
        this.mouseMovementX = 0;
        this.mouseMovementY = 0;
        this.params = params;
        this.character = params.character;
        this.controls = new enable3d_1.ThirdPersonControls(this.params.camera, this.character.target, {
            offset: new enable3d_1.THREE.Vector3(0, 1, 0),
            targetRadius: 3,
            theta: 300
        });
        // Map Input
        const press = (e, isDown) => {
            if (this.params.scene.classroom.isPlaying != true)
                return true;
            switch (e.keyCode) {
                case 87: // w
                    this.keys.w.isDown = isDown;
                    e.preventDefault();
                    break;
                case 67: // c
                    if (isDown == false) {
                        this.toggleSitDown();
                    }
                    e.preventDefault();
                    break;
            }
            this.syncMovement();
        };
        document.addEventListener('keydown', e => press(e, true));
        document.addEventListener('keyup', e => press(e, false));
        /**
        * Add Pointer Lock and Pointer Drag
        */
        if (!__1.isTouchDevice) {
            let pl = new enable3d_1.PointerLock(this.params.scene.canvas);
            let pd = new enable3d_1.PointerDrag(this.params.scene.canvas);
            pd.onMove(delta => {
                if (pl.isLocked()) {
                    this.mouseMovementY = -delta.y;
                    this.mouseMovementX = delta.x;
                }
            });
        }
    }
    toggleSitDown() {
        var _a, _b;
        // Find Nearby Chair
        if (!this.character.target)
            return;
        if (this.character.isSitting == true) {
            this.character.isSitting = false;
        }
        else {
            const x = (_b = (_a = this.character) === null || _a === void 0 ? void 0 : _a.target) === null || _b === void 0 ? void 0 : _b.position;
            let distance = 1000000;
            let chair = this.params.scene.chairs[0];
            this.params.scene.chairs.forEach(c => {
                if (c.position.distanceTo(x) < distance) {
                    distance = c.position.distanceTo(x);
                    chair = c;
                }
            });
            if (distance < 1) {
                this.character.isSitting = true;
            }
        }
        this.params.scene.classroom.handleSitDown(this.character.isSitting);
    }
    syncMovement() {
        var _a, _b, _c;
        this.params.scene.classroom.handleMovement(this.keys.w.isDown, {
            x: (_a = this.character.target) === null || _a === void 0 ? void 0 : _a.position.x,
            y: (_b = this.character.target) === null || _b === void 0 ? void 0 : _b.position.y,
            z: (_c = this.character.target) === null || _c === void 0 ? void 0 : _c.position.z,
        });
    }
    syncLookingAt() {
        this.params.scene.classroom.syncLookingAt(this.character.lookingAt.toArray());
    }
    update(time, delta) {
        var _a;
        this.character.update(time, delta);
        if ((_a = this.character.target) === null || _a === void 0 ? void 0 : _a.body) {
            /**
            * Update Controls
            */
            this.controls.update(this.mouseMovementX * 3, -this.mouseMovementY * 3);
            if (!__1.isTouchDevice)
                this.mouseMovementX = this.mouseMovementY = 0;
            /**
            * Player Turn
            */
            const oldLookAt = this.character.lookingAt.clone();
            this.character.lookingAt = this.params.camera.getWorldDirection(DEFAULT_VECTOR_3);
            if (!oldLookAt.equals(this.character.lookingAt))
                this.syncLookingAt(); // Sync Lookat
            /**
            * Player Move
            */
            this.character.isMovingForward = this.keys.w.isDown;
        }
    }
}
exports.CharacterController = CharacterController;


/***/ }),

/***/ "./src/modules/Classroom3D.ts":
/*!************************************!*\
  !*** ./src/modules/Classroom3D.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.addClassroomToScene = void 0;
const enable3d_1 = __webpack_require__(/*! enable3d */ "./node_modules/enable3d/dist/index.js");
const loader = new enable3d_1.THREE.TextureLoader();
function addClassroomToScene(scene) {
    // Floor
    const floorTexture = loader.load('./resources/textures/floor.jpg');
    floorTexture.wrapS = floorTexture.wrapT = enable3d_1.THREE.RepeatWrapping;
    floorTexture.repeat.set(8, 8);
    const floorMaterial = new enable3d_1.THREE.MeshStandardMaterial({
        color: 0xC1C1C1,
        map: floorTexture
    });
    floorMaterial.roughness = 1;
    floorMaterial.metalness = 0;
    const plane = scene.physics.add.box({ width: 18, height: 0.3, depth: 14, mass: 0 });
    plane.material = floorMaterial;
    plane.body.setGravity(0, 10, 0);
    plane.body.setFriction(1);
    plane.rotation.set(Math.PI / 2, 0, 0);
    plane.receiveShadow = true;
    // Walls
    const wallTexture = loader.load('./resources/textures/wall.jpg');
    wallTexture.wrapS = wallTexture.wrapT = enable3d_1.THREE.RepeatWrapping;
    wallTexture.repeat.set(4, 2);
    const wallMaterial = new enable3d_1.THREE.MeshStandardMaterial({
        color: 0xC1C1C1,
        map: wallTexture
    });
    wallMaterial.roughness = 1;
    wallMaterial.metalness = 0;
    const walls = [
        scene.physics.add.box({ width: 0.3, height: 5, depth: 14, mass: 0, x: 9, y: 2 }),
        scene.physics.add.box({ width: 0.3, height: 5, depth: 14, mass: 0, x: -9, y: 2 }),
        scene.physics.add.box({ width: 18, height: 5, depth: 0.3, mass: 0, z: 7, y: 2 }),
        scene.physics.add.box({ width: 18, height: 5, depth: 0.3, mass: 0, z: -7, y: 2 }),
    ];
    walls.forEach(wall => {
        wall.material = wallMaterial;
        wall.receiveShadow = true;
        wall.castShadow = false;
    });
    const roof = scene.physics.add.box({ width: 18, height: 0.3, depth: 14, mass: 0, y: 4.5 });
    roof.castShadow = false;
    roof.receiveShadow = false;
    roof.material = floorMaterial;
}
exports.addClassroomToScene = addClassroomToScene;


/***/ }),

/***/ "./src/modules/ClassroomManager.ts":
/*!*****************************************!*\
  !*** ./src/modules/ClassroomManager.ts ***!
  \*****************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";

var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ClassroomManager = void 0;
const socket_io_client_1 = __webpack_require__(/*! socket.io-client */ "./node_modules/socket.io-client/build/index.js");
const __1 = __webpack_require__(/*! .. */ "./src/index.ts");
const peerjs_1 = __importDefault(__webpack_require__(/*! peerjs */ "./node_modules/peerjs/dist/peerjs.min.js"));
const SOCKET_ADDRESS = "ws://localhost:3500";
class ClassroomManager {
    constructor(scene) {
        this.isPlaying = false;
        this.emitHistory = {};
        this.peers = {};
        this.audios = {};
        this.scene = scene;
        this.myPeer = new peerjs_1.default(undefined, {
            debug: 3,
            config: {
                iceTransportPolicy: "relay",
                'iceServers': [
                    {
                        // iceTransportPolicy:"relay",
                        urls: 'stun:stun1.l.google.com:19302'
                    },
                    {
                        // iceTransportPolicy:"relay",
                        urls: 'turn:20.198.6.107:3478?transport=tcp',
                        credential: '1234',
                        username: 'caleum'
                    }
                ]
            }
        });
        this.myAudio = document.createElement('audio');
        this.myAudio.muted = true;
        this.myPeer.on('open', () => {
            var _a;
            console.log("Peer JS connected");
            (_a = document.getElementById("button")) === null || _a === void 0 ? void 0 : _a.addEventListener("click", () => this.onSubmitInput());
        });
        this.myPeer.on('error', (e) => {
            alert('Audio chat has some error. Refresh the page');
            console.error(e);
        });
    }
    onSubmitInput() {
        const input = document.getElementById("username");
        if (!input)
            throw ("Can't find element with id `username`");
        const name = input.value;
        if (name.length < 3)
            return alert("Name too short");
        // Start Connections
        this.username = name;
        navigator.mediaDevices.getUserMedia({
            video: false,
            audio: true
        }).then(stream => {
            const socket = socket_io_client_1.io();
            this.socket = socket;
            socket.on('connect', () => {
                this.fadeOutMenu();
                console.log(`My Peer ID is ${this.myPeer.id}`);
                this.addAudioStream(this.myPeer.id, this.myAudio, stream);
                socket.emit('init', { uuid: this.myPeer.id, username: name, initialPosition: __1.mainCharacterinitialPosition.toArray() }, (data) => {
                    this.handleInitResponse(data, stream);
                });
                this.handlerSocketEvents(socket, stream);
                this.handleCalls(stream);
            });
        });
    }
    fadeOutMenu(DURATION = 300) {
        return new Promise((resolve, reject) => {
            const menuUI = document.getElementById("menu");
            if (!menuUI)
                return reject("Can't find element with id `menu`");
            const NUMBER_OF_FRAMES = 20;
            // Fadeout Menu
            const x = setInterval(() => {
                const newOpacity = Number(window.getComputedStyle(menuUI).getPropertyValue("opacity")) - 1 / NUMBER_OF_FRAMES;
                menuUI.style.opacity = newOpacity.toString();
                if (newOpacity <= 0) {
                    resolve('faded');
                    this.startClassroom();
                    menuUI.style.display = "none";
                    clearInterval(x);
                }
            }, DURATION / NUMBER_OF_FRAMES);
        });
    }
    startClassroom() {
        this.isPlaying = true;
    }
    handleInitResponse(data, stream) {
        this.scene.setMainCharacterColorFromString(data.color);
        data.otherUsers.forEach(user => {
            this.scene.addSubCharacter(user);
            // Voice Chat
            this.callNewUser(user.uuid, stream);
        });
    }
    handlerSocketEvents(socket, stream) {
        socket.on('new-user', (newUser) => {
            this.scene.addSubCharacter(newUser);
        });
        socket.on('movement', (uuid, isMovingForward, position) => {
            var _a;
            this.scene.subCharacters[uuid].isMovingForward = isMovingForward;
            (_a = this.scene.subCharacters[uuid].target) === null || _a === void 0 ? void 0 : _a.position.set(position.x, position.y, position.z);
        });
        socket.on('lookingAt', (uuid, lookingAt) => {
            if (this.scene.subCharacters[uuid])
                this.scene.subCharacters[uuid].lookingAt.set(...lookingAt);
        });
        socket.on('isSitting', (uuid, isSitting) => {
            this.scene.subCharacters[uuid].isSitting = isSitting;
        });
        socket.on('user-exit', (uuid) => {
            this.scene.subCharacters[uuid].delete();
            delete this.scene.subCharacters[uuid];
            if (this.peers[uuid]) {
                this.peers[uuid].close();
            }
            ;
        });
    }
    handleMovement(isMovingForward, position) {
        var _a;
        if (this.emitHistory['isMovingForward'] && this.emitHistory['isMovingForward'].data == isMovingForward) {
            if (this.emitHistory['isMovingForward'].sameDataCounter++ != 10)
                return;
        }
        ;
        this.emitHistory['isMovingForward'] = {
            sameDataCounter: 0,
            data: isMovingForward
        };
        (_a = this.socket) === null || _a === void 0 ? void 0 : _a.emit('movement', isMovingForward, position);
    }
    syncLookingAt(lookingAt) {
        var _a;
        if (this.emitHistory['lookingAt']) {
            if (JSON.stringify(this.emitHistory['lookingAt'].data) == JSON.stringify(lookingAt)) {
                this.emitHistory['lookingAt'].sameDataCounter = 0;
                return;
            }
            else {
                if (this.emitHistory['lookingAt'].sameDataCounter++ != 4)
                    return;
            }
        }
        ;
        this.emitHistory['lookingAt'] = {
            sameDataCounter: 0,
            data: lookingAt
        };
        (_a = this.socket) === null || _a === void 0 ? void 0 : _a.emit('lookingAt', lookingAt);
    }
    handleSitDown(isSitting) {
        var _a;
        (_a = this.socket) === null || _a === void 0 ? void 0 : _a.emit('isSitting', isSitting);
    }
    // Voice Chat
    handleCalls(stream) {
        this.myPeer.on('call', call => {
            console.log(`New Call from ${call.peer}`);
            call.answer(stream);
            const audio = document.createElement('audio');
            call.on('stream', userAudioStream => this.addAudioStream(call.peer, audio, userAudioStream));
            call.on('close', () => {
                audio.remove();
                if (this.audios[call.peer])
                    delete this.audios[call.peer];
            });
        });
    }
    callNewUser(uuid, stream) {
        console.log(`Calling User ${uuid}`);
        const call = this.myPeer.call(uuid, stream);
        const audio = document.createElement('audio');
        call.on('stream', userAudioStream => { this.addAudioStream(uuid, audio, userAudioStream); });
        call.on('close', () => {
            audio.remove();
            if (this.audios[uuid])
                delete this.audios[uuid];
        });
        this.peers[uuid] = call;
    }
    addAudioStream(uuid, audio, stream) {
        audio.srcObject = stream;
        audio.addEventListener('loadedmetadata', () => { audio.play(); });
        this.audios[uuid] = audio;
    }
}
exports.ClassroomManager = ClassroomManager;


/***/ }),

/***/ "./src/modules/data.ts":
/*!*****************************!*\
  !*** ./src/modules/data.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.chairPositions = void 0;
exports.chairPositions = [
    [-2, -3], [0, -3], [2, -3], [4, -3], [6, -3],
    [-2, -1], [0, -1], [2, -1], [4, -1], [6, -1],
    [-2, 1], [0, 1], [2, 1], [4, 1], [6, 1],
    [-2, 3], [0, 3], [2, 3], [4, 3], [6, 3],
];


/***/ }),

/***/ "./node_modules/yeast/index.js":
/*!*************************************!*\
  !*** ./node_modules/yeast/index.js ***!
  \*************************************/
/***/ ((module) => {

"use strict";


var alphabet = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_'.split('')
  , length = 64
  , map = {}
  , seed = 0
  , i = 0
  , prev;

/**
 * Return a string representing the specified number.
 *
 * @param {Number} num The number to convert.
 * @returns {String} The string representation of the number.
 * @api public
 */
function encode(num) {
  var encoded = '';

  do {
    encoded = alphabet[num % length] + encoded;
    num = Math.floor(num / length);
  } while (num > 0);

  return encoded;
}

/**
 * Return the integer value specified by the given string.
 *
 * @param {String} str The string to convert.
 * @returns {Number} The integer value represented by the string.
 * @api public
 */
function decode(str) {
  var decoded = 0;

  for (i = 0; i < str.length; i++) {
    decoded = decoded * length + map[str.charAt(i)];
  }

  return decoded;
}

/**
 * Yeast: A tiny growing id generator.
 *
 * @returns {String} A unique id.
 * @api public
 */
function yeast() {
  var now = encode(+new Date());

  if (now !== prev) return seed = 0, prev = now;
  return now +'.'+ encode(seed++);
}

//
// Map each character to its index.
//
for (; i < length; i++) map[alphabet[i]] = i;

//
// Expose the `yeast`, `encode` and `decode` functions.
//
yeast.encode = encode;
yeast.decode = decode;
module.exports = yeast;


/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module is referenced by other modules so it can't be inlined
/******/ 	var __webpack_exports__ = __webpack_require__("./src/index.ts");
/******/ 	
/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90aHJlZWpzLWFtbW9qcy13ZWJwYWNrLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvYmFja28yL2luZGV4LmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9iYXNlNjQtYXJyYXlidWZmZXIvbGliL2Jhc2U2NC1hcnJheWJ1ZmZlci5qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWFtbW9qcy13ZWJwYWNrLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvY29tcG9uZW50LWVtaXR0ZXIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL2VuYWJsZTNkL2Rpc3QvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL2VuYWJsZTNkL2Rpc3QvcHJvamVjdC5qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWFtbW9qcy13ZWJwYWNrLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvZW5hYmxlM2QvZGlzdC9zY2VuZTNkLmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9lbmFibGUzZC9ub2RlX21vZHVsZXMvQGVuYWJsZTNkL2FtbW8tcGh5c2ljcy9kaXN0L2NvbGxpc2lvbkV2ZW50cy5qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWFtbW9qcy13ZWJwYWNrLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvZW5hYmxlM2Qvbm9kZV9tb2R1bGVzL0BlbmFibGUzZC9hbW1vLXBoeXNpY3MvZGlzdC9jb25zdHJhaW50cy5qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWFtbW9qcy13ZWJwYWNrLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvZW5hYmxlM2Qvbm9kZV9tb2R1bGVzL0BlbmFibGUzZC9hbW1vLXBoeXNpY3MvZGlzdC9jb252ZXhPYmplY3RCcmVha2VyLmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9lbmFibGUzZC9ub2RlX21vZHVsZXMvQGVuYWJsZTNkL2FtbW8tcGh5c2ljcy9kaXN0L2RlYnVnRHJhd2VyLmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9lbmFibGUzZC9ub2RlX21vZHVsZXMvQGVuYWJsZTNkL2FtbW8tcGh5c2ljcy9kaXN0L2luZGV4LmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9lbmFibGUzZC9ub2RlX21vZHVsZXMvQGVuYWJsZTNkL2FtbW8tcGh5c2ljcy9kaXN0L2xpYi9DbG9jay5qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWFtbW9qcy13ZWJwYWNrLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvZW5hYmxlM2Qvbm9kZV9tb2R1bGVzL0BlbmFibGUzZC9hbW1vLXBoeXNpY3MvZGlzdC9waHlzaWNzLmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9lbmFibGUzZC9ub2RlX21vZHVsZXMvQGVuYWJsZTNkL2FtbW8tcGh5c2ljcy9kaXN0L3JheWNhc3Rlci9hbGxIaXRzUmF5UmVzdWx0Q2FsbGJhY2suanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL2VuYWJsZTNkL25vZGVfbW9kdWxlcy9AZW5hYmxlM2QvYW1tby1waHlzaWNzL2Rpc3QvcmF5Y2FzdGVyL2Nsb3Nlc3RSYXlSZXN1bHRDYWxsYmFjay5qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWFtbW9qcy13ZWJwYWNrLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvZW5hYmxlM2Qvbm9kZV9tb2R1bGVzL0BlbmFibGUzZC9hbW1vLXBoeXNpY3MvZGlzdC9yYXljYXN0ZXIvcmF5Y2FzdGVyLmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9lbmFibGUzZC9ub2RlX21vZHVsZXMvQGVuYWJsZTNkL2FtbW8tcGh5c2ljcy9kaXN0L3NoYXBlcy5qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWFtbW9qcy13ZWJwYWNrLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvZW5hYmxlM2Qvbm9kZV9tb2R1bGVzL0BlbmFibGUzZC9hbW1vLXBoeXNpY3MvZGlzdC90aHJlZS10by1hbW1vLmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9lbmFibGUzZC9ub2RlX21vZHVsZXMvQGVuYWJsZTNkL2FtbW8tcGh5c2ljcy9kaXN0L3RvcnVzU2hhcGUuanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL2VuYWJsZTNkL25vZGVfbW9kdWxlcy9AZW5hYmxlM2QvY29tbW9uL2Rpc3QvYXBwbHlNaXhpbnMuanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL2VuYWJsZTNkL25vZGVfbW9kdWxlcy9AZW5hYmxlM2QvY29tbW9uL2Rpc3QvZGVmYXVsdE1hdGVyaWFsLmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9lbmFibGUzZC9ub2RlX21vZHVsZXMvQGVuYWJsZTNkL2NvbW1vbi9kaXN0L2V4dGVuZGVkR3JvdXAuanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL2VuYWJsZTNkL25vZGVfbW9kdWxlcy9AZW5hYmxlM2QvY29tbW9uL2Rpc3QvZXh0ZW5kZWRNZXNoLmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9lbmFibGUzZC9ub2RlX21vZHVsZXMvQGVuYWJsZTNkL2NvbW1vbi9kaXN0L2V4dGVuZGVkT2JqZWN0M0QuanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL2VuYWJsZTNkL25vZGVfbW9kdWxlcy9AZW5hYmxlM2QvY29tbW9uL2Rpc3QvZmFjdG9yaWVzLmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9lbmFibGUzZC9ub2RlX21vZHVsZXMvQGVuYWJsZTNkL2NvbW1vbi9kaXN0L2xvZ2dlci5qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWFtbW9qcy13ZWJwYWNrLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvZW5hYmxlM2Qvbm9kZV9tb2R1bGVzL0BlbmFibGUzZC9jb21tb24vZGlzdC9taXNjL2ZpcnN0UGVyc29uQ29udHJvbHMuanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL2VuYWJsZTNkL25vZGVfbW9kdWxlcy9AZW5hYmxlM2QvY29tbW9uL2Rpc3QvbWlzYy9qb3lzdGljay5qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWFtbW9qcy13ZWJwYWNrLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvZW5hYmxlM2Qvbm9kZV9tb2R1bGVzL0BlbmFibGUzZC9jb21tb24vZGlzdC9taXNjL3BvaW50ZXJEcmFnLmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9lbmFibGUzZC9ub2RlX21vZHVsZXMvQGVuYWJsZTNkL2NvbW1vbi9kaXN0L21pc2MvcG9pbnRlckxvY2suanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL2VuYWJsZTNkL25vZGVfbW9kdWxlcy9AZW5hYmxlM2QvY29tbW9uL2Rpc3QvbWlzYy90aGlyZFBlcnNvbkNvbnRyb2xzLmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9lbmFibGUzZC9ub2RlX21vZHVsZXMvQGVuYWJsZTNkL2NvbW1vbi9kaXN0L21pc2Mvd2F0ZXIuanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL2VuYWJsZTNkL25vZGVfbW9kdWxlcy9AZW5hYmxlM2QvY29tbW9uL2Rpc3QvcGh5c2ljc0JvZHkuanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL2VuYWJsZTNkL25vZGVfbW9kdWxlcy9AZW5hYmxlM2QvY29tbW9uL2Rpc3QvcGh5c2ljc0xvYWRlci5qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWFtbW9qcy13ZWJwYWNrLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvZW5hYmxlM2Qvbm9kZV9tb2R1bGVzL0BlbmFibGUzZC9jb21tb24vZGlzdC90eXBlcy5qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWFtbW9qcy13ZWJwYWNrLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvZW5hYmxlM2Qvbm9kZV9tb2R1bGVzL0BlbmFibGUzZC9jb21tb24vZGlzdC90eXBlc0FtbW8uanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL2VuYWJsZTNkL25vZGVfbW9kdWxlcy9AZW5hYmxlM2QvY29tbW9uL2Rpc3QvdHlwZXNDdXN0b20uanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL2VuYWJsZTNkL25vZGVfbW9kdWxlcy9AZW5hYmxlM2QvY29tbW9uL2Rpc3Qvd2FzbUxvYWRlci5qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWFtbW9qcy13ZWJwYWNrLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvZW5hYmxlM2Qvbm9kZV9tb2R1bGVzL0BlbmFibGUzZC90aHJlZS1ncmFwaGljcy9kaXN0L2NvcmUuanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL2VuYWJsZTNkL25vZGVfbW9kdWxlcy9AZW5hYmxlM2QvdGhyZWUtZ3JhcGhpY3MvZGlzdC9pbmRleC5qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWFtbW9qcy13ZWJwYWNrLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvZW5hYmxlM2Qvbm9kZV9tb2R1bGVzL0BlbmFibGUzZC90aHJlZS1ncmFwaGljcy9kaXN0L3BsdWdpbnMvY2FtZXJhcy5qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWFtbW9qcy13ZWJwYWNrLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvZW5hYmxlM2Qvbm9kZV9tb2R1bGVzL0BlbmFibGUzZC90aHJlZS1ncmFwaGljcy9kaXN0L3BsdWdpbnMvY3NnLmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9lbmFibGUzZC9ub2RlX21vZHVsZXMvQGVuYWJsZTNkL3RocmVlLWdyYXBoaWNzL2Rpc3QvcGx1Z2lucy9oYXZlU29tZUZ1bi5qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWFtbW9qcy13ZWJwYWNrLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvZW5hYmxlM2Qvbm9kZV9tb2R1bGVzL0BlbmFibGUzZC90aHJlZS1ncmFwaGljcy9kaXN0L3BsdWdpbnMvaGVpZ2h0bWFwLmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9lbmFibGUzZC9ub2RlX21vZHVsZXMvQGVuYWJsZTNkL3RocmVlLWdyYXBoaWNzL2Rpc3QvcGx1Z2lucy9pbmRleC5qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWFtbW9qcy13ZWJwYWNrLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvZW5hYmxlM2Qvbm9kZV9tb2R1bGVzL0BlbmFibGUzZC90aHJlZS1ncmFwaGljcy9kaXN0L3BsdWdpbnMvbGlnaHRzLmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9lbmFibGUzZC9ub2RlX21vZHVsZXMvQGVuYWJsZTNkL3RocmVlLWdyYXBoaWNzL2Rpc3QvcGx1Z2lucy9sb2FkZXJzLmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9lbmFibGUzZC9ub2RlX21vZHVsZXMvQGVuYWJsZTNkL3RocmVlLWdyYXBoaWNzL2Rpc3QvcGx1Z2lucy9taXNjLmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9lbmFibGUzZC9ub2RlX21vZHVsZXMvQGVuYWJsZTNkL3RocmVlLWdyYXBoaWNzL2Rpc3QvcGx1Z2lucy9taXhlcnMuanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL2VuYWJsZTNkL25vZGVfbW9kdWxlcy9AZW5hYmxlM2QvdGhyZWUtZ3JhcGhpY3MvZGlzdC9wbHVnaW5zL3RyYW5zZm9ybS5qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWFtbW9qcy13ZWJwYWNrLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvZW5hYmxlM2Qvbm9kZV9tb2R1bGVzL0BlbmFibGUzZC90aHJlZS1ncmFwaGljcy9kaXN0L3BsdWdpbnMvd2FycFNwZWVkLmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9lbmFibGUzZC9ub2RlX21vZHVsZXMvQGVuYWJsZTNkL3RocmVlLWdyYXBoaWNzL2Rpc3QvcGx1Z2lucy93ZWJ4ci5qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWFtbW9qcy13ZWJwYWNrLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvZW5hYmxlM2Qvbm9kZV9tb2R1bGVzL0BlbmFibGUzZC90aHJlZS1ncmFwaGljcy9kaXN0L3ZlcnNpb24uanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL2VuYWJsZTNkL25vZGVfbW9kdWxlcy9AZW5hYmxlM2QvdGhyZWUtd3JhcHBlci9kaXN0L2luZGV4LmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9lbmdpbmUuaW8tY2xpZW50L2xpYi9nbG9iYWxUaGlzLmJyb3dzZXIuanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL2VuZ2luZS5pby1jbGllbnQvbGliL2luZGV4LmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9lbmdpbmUuaW8tY2xpZW50L2xpYi9zb2NrZXQuanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL2VuZ2luZS5pby1jbGllbnQvbGliL3RyYW5zcG9ydC5qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWFtbW9qcy13ZWJwYWNrLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvZW5naW5lLmlvLWNsaWVudC9saWIvdHJhbnNwb3J0cy9pbmRleC5qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWFtbW9qcy13ZWJwYWNrLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvZW5naW5lLmlvLWNsaWVudC9saWIvdHJhbnNwb3J0cy9wb2xsaW5nLWpzb25wLmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9lbmdpbmUuaW8tY2xpZW50L2xpYi90cmFuc3BvcnRzL3BvbGxpbmcteGhyLmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9lbmdpbmUuaW8tY2xpZW50L2xpYi90cmFuc3BvcnRzL3BvbGxpbmcuanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL2VuZ2luZS5pby1jbGllbnQvbGliL3RyYW5zcG9ydHMvd2Vic29ja2V0LWNvbnN0cnVjdG9yLmJyb3dzZXIuanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL2VuZ2luZS5pby1jbGllbnQvbGliL3RyYW5zcG9ydHMvd2Vic29ja2V0LmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9lbmdpbmUuaW8tY2xpZW50L2xpYi91dGlsLmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9lbmdpbmUuaW8tY2xpZW50L2xpYi94bWxodHRwcmVxdWVzdC5qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWFtbW9qcy13ZWJwYWNrLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvZW5naW5lLmlvLWNsaWVudC9ub2RlX21vZHVsZXMvZGVidWcvc3JjL2Jyb3dzZXIuanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL2VuZ2luZS5pby1jbGllbnQvbm9kZV9tb2R1bGVzL2RlYnVnL3NyYy9jb21tb24uanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL2VuZ2luZS5pby1jbGllbnQvbm9kZV9tb2R1bGVzL21zL2luZGV4LmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9lbmdpbmUuaW8tcGFyc2VyL2xpYi9jb21tb25zLmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9lbmdpbmUuaW8tcGFyc2VyL2xpYi9kZWNvZGVQYWNrZXQuYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWFtbW9qcy13ZWJwYWNrLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvZW5naW5lLmlvLXBhcnNlci9saWIvZW5jb2RlUGFja2V0LmJyb3dzZXIuanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL2VuZ2luZS5pby1wYXJzZXIvbGliL2luZGV4LmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9ldmVudGVtaXR0ZXIzL2luZGV4LmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9oYXMtY29ycy9pbmRleC5qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWFtbW9qcy13ZWJwYWNrLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvcGFyc2Vxcy9pbmRleC5qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWFtbW9qcy13ZWJwYWNrLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvcGFyc2V1cmkvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL3BlZXJqcy9kaXN0L3BlZXJqcy5taW4uanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL3BlZXJqcy9kaXN0fHN5bmMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL3NvY2tldC5pby1jbGllbnQvYnVpbGQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL3NvY2tldC5pby1jbGllbnQvYnVpbGQvbWFuYWdlci5qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWFtbW9qcy13ZWJwYWNrLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvc29ja2V0LmlvLWNsaWVudC9idWlsZC9vbi5qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWFtbW9qcy13ZWJwYWNrLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvc29ja2V0LmlvLWNsaWVudC9idWlsZC9zb2NrZXQuanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL3NvY2tldC5pby1jbGllbnQvYnVpbGQvdHlwZWQtZXZlbnRzLmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9zb2NrZXQuaW8tY2xpZW50L2J1aWxkL3VybC5qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWFtbW9qcy13ZWJwYWNrLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvc29ja2V0LmlvLWNsaWVudC9ub2RlX21vZHVsZXMvZGVidWcvc3JjL2Jyb3dzZXIuanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL3NvY2tldC5pby1jbGllbnQvbm9kZV9tb2R1bGVzL2RlYnVnL3NyYy9jb21tb24uanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL3NvY2tldC5pby1jbGllbnQvbm9kZV9tb2R1bGVzL21zL2luZGV4LmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9zb2NrZXQuaW8tcGFyc2VyL2Rpc3QvYmluYXJ5LmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9zb2NrZXQuaW8tcGFyc2VyL2Rpc3QvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL3NvY2tldC5pby1wYXJzZXIvZGlzdC9pcy1iaW5hcnkuanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL3NvY2tldC5pby1wYXJzZXIvbm9kZV9tb2R1bGVzL2RlYnVnL3NyYy9icm93c2VyLmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9zb2NrZXQuaW8tcGFyc2VyL25vZGVfbW9kdWxlcy9kZWJ1Zy9zcmMvY29tbW9uLmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9zb2NrZXQuaW8tcGFyc2VyL25vZGVfbW9kdWxlcy9tcy9pbmRleC5qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWFtbW9qcy13ZWJwYWNrLWV4YW1wbGUvLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vc3JjL21vZHVsZXMvQ2hhaXIudHMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vc3JjL21vZHVsZXMvQ2hhcmFjdGVyLnRzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL3NyYy9tb2R1bGVzL0NoYXJhY3RlckNvbnRyb2xsZXIudHMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vc3JjL21vZHVsZXMvQ2xhc3Nyb29tM0QudHMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vc3JjL21vZHVsZXMvQ2xhc3Nyb29tTWFuYWdlci50cyIsIndlYnBhY2s6Ly90aHJlZWpzLWFtbW9qcy13ZWJwYWNrLWV4YW1wbGUvLi9zcmMvbW9kdWxlcy9kYXRhLnRzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy95ZWFzdC9pbmRleC5qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWFtbW9qcy13ZWJwYWNrLWV4YW1wbGUvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlL3dlYnBhY2svc3RhcnR1cCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDbkZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxFQUFFLGNBQWM7QUFDaEI7QUFDQTs7QUFFQSxlQUFlLFNBQVM7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxFQUFFLGNBQWM7QUFDaEI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLGVB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QTBGO0FBQzFGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUscUJBQXFCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLDZCQUE2QjtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLGtCQUFrQjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLGlCQUFpQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZix1Qzs7Ozs7Ozs7Ozs7QUM1U2E7QUFDYiw4Q0FBNkMsQ0FBQyxjQUFjLEVBQUM7QUFDN0QscUJBQXFCO0FBQ3JCLHFCQUFxQixtQkFBTyxDQUFDLDhGQUFjO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQSxxQkFBcUI7QUFDckIseUM7Ozs7Ozs7Ozs7O0FDZGE7QUFDYjtBQUNBO0FBQ0EsbURBQW1EO0FBQ25ELGtCQUFrQjtBQUNsQjtBQUNBLDhDQUE2QyxDQUFDLGNBQWMsRUFBQztBQUM3RCxhQUFhLEdBQUcsY0FBYyxHQUFHLFlBQVksR0FBRyxnQkFBZ0IsR0FBRyxZQUFZLEdBQUcsZ0JBQWdCLEdBQUcsdUJBQXVCLEdBQUcscUJBQXFCLEdBQUcsc0JBQXNCLEdBQUcsb0JBQW9CLEdBQUcsd0JBQXdCO0FBQy9OLDJCQUEyQixtQkFBTyxDQUFDLDBHQUFvQjtBQUN2RCxvREFBbUQsQ0FBQyxxQ0FBcUMsNENBQTRDLEVBQUUsRUFBRSxFQUFDO0FBQzFJLHVCQUF1QixtQkFBTyxDQUFDLGtHQUFnQjtBQUMvQyxnREFBK0MsQ0FBQyxxQ0FBcUMsb0NBQW9DLEVBQUUsRUFBRSxFQUFDO0FBQzlIO0FBQ0EsV0FBVyxzQkFBc0I7QUFDakMsY0FBYyxtQkFBTyxDQUFDLHNIQUFvQztBQUMxRCxrREFBaUQsQ0FBQyxxQ0FBcUMsK0JBQStCLEVBQUUsRUFBRSxFQUFDO0FBQzNILGlEQUFnRCxDQUFDLHFDQUFxQyw4QkFBOEIsRUFBRSxFQUFFLEVBQUM7QUFDekgsbURBQWtELENBQUMscUNBQXFDLGdDQUFnQyxFQUFFLEVBQUUsRUFBQztBQUM3SCw0Q0FBMkMsQ0FBQyxxQ0FBcUMseUJBQXlCLEVBQUUsRUFBRSxFQUFDO0FBQy9HLHdDQUF1QyxDQUFDLHFDQUFxQyxxQkFBcUIsRUFBRSxFQUFFLEVBQUM7QUFDdkcsNENBQTJDLENBQUMscUNBQXFDLHlCQUF5QixFQUFFLEVBQUUsRUFBQztBQUMvRyx3Q0FBdUMsQ0FBQyxxQ0FBcUMscUJBQXFCLEVBQUUsRUFBRSxFQUFDO0FBQ3ZHLDBDQUF5QyxDQUFDLHFDQUFxQyx1QkFBdUIsRUFBRSxFQUFFLEVBQUM7QUFDM0cseUNBQXdDLENBQUMscUNBQXFDLHNCQUFzQixFQUFFLEVBQUUsRUFBQztBQUN6RyxpQzs7Ozs7Ozs7Ozs7QUN4QmE7QUFDYixxQzs7Ozs7Ozs7Ozs7QUNEYTtBQUNiLHVDOzs7Ozs7Ozs7OztBQ0RhO0FBQ2IsOENBQTZDLENBQUMsY0FBYyxFQUFDO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsS0FBSztBQUNoQztBQUNBLDJCQUEyQixLQUFLO0FBQ2hDO0FBQ0EsZUFBZTtBQUNmLHNDOzs7Ozs7Ozs7OztBQ2xDYTtBQUNiO0FBQ0E7QUFDQSxtREFBbUQ7QUFDbkQsa0JBQWtCO0FBQ2xCO0FBQ0EsOENBQTZDLENBQUMsY0FBYyxFQUFDO0FBQzdELHFCQUFxQjtBQUNyQixjQUFjLG1CQUFPLENBQUMsc0hBQW9DO0FBQzFELGtCQUFrQixtQkFBTyxDQUFDLGdIQUFtQjtBQUM3QyxnQkFBZ0IsbUJBQU8sQ0FBQyxvSEFBbUM7QUFDM0Q7QUFDQSx3Q0FBd0M7QUFDeEM7QUFDQSxlQUFlLHlEQUF5RCxjQUFjLG1EQUFtRDtBQUN6STtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZEQUE2RCxZQUFZO0FBQ3pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLGdDOzs7Ozs7Ozs7OztBQ3JDYTtBQUNiLDhDQUE2QyxDQUFDLGNBQWMsRUFBQztBQUM3RCxpQkFBaUIsR0FBRyxlQUFlLEdBQUcsZUFBZSxHQUFHLGdCQUFnQixHQUFHLGlCQUFpQixHQUFHLGtCQUFrQixHQUFHLGtCQUFrQixHQUFHLGVBQWUsR0FBRyxxQkFBcUIsR0FBRyxhQUFhLEdBQUcsYUFBYSxHQUFHLHFCQUFxQixHQUFHLHFCQUFxQjtBQUNoUSxlQUFlLG1CQUFPLENBQUMsMEZBQVE7QUFDL0IsaURBQWdELENBQUMscUNBQXFDLDZCQUE2QixFQUFFLEVBQUUsRUFBQztBQUN4SCx3QkFBd0IsbUJBQU8sQ0FBQyx3SEFBcUM7QUFDckUsaURBQWdELENBQUMscUNBQXFDLHNDQUFzQyxFQUFFLEVBQUUsRUFBQztBQUNqSSxjQUFjLG1CQUFPLENBQUMsc0hBQW9DO0FBQzFELGFBQWE7QUFDYixjQUFjLG1CQUFPLENBQUMsd0dBQTZCO0FBQ25ELGFBQWE7QUFDYixrQkFBa0IsbUJBQU8sQ0FBQyxnR0FBVztBQUNyQyxjQUFjLG1CQUFPLENBQUMsc0hBQW9DO0FBQzFELGlEQUFnRCxDQUFDLHFDQUFxQyw4QkFBOEIsRUFBRSxFQUFFLEVBQUM7QUFDekgsMkNBQTBDLENBQUMscUNBQXFDLHdCQUF3QixFQUFFLEVBQUUsRUFBQztBQUM3Ryw4Q0FBNkMsQ0FBQyxxQ0FBcUMsMkJBQTJCLEVBQUUsRUFBRSxFQUFDO0FBQ25ILDhDQUE2QyxDQUFDLHFDQUFxQywyQkFBMkIsRUFBRSxFQUFFLEVBQUM7QUFDbkgsNkNBQTRDLENBQUMscUNBQXFDLDBCQUEwQixFQUFFLEVBQUUsRUFBQztBQUNqSCw0Q0FBMkMsQ0FBQyxxQ0FBcUMseUJBQXlCLEVBQUUsRUFBRSxFQUFDO0FBQy9HLDJDQUEwQyxDQUFDLHFDQUFxQyx3QkFBd0IsRUFBRSxFQUFFLEVBQUM7QUFDN0csMkNBQTBDLENBQUMscUNBQXFDLHdCQUF3QixFQUFFLEVBQUUsRUFBQztBQUM3Ryw2Q0FBNEMsQ0FBQyxxQ0FBcUMsMEJBQTBCLEVBQUUsRUFBRSxFQUFDO0FBQ2pILHFDQUFxQyxrQkFBa0I7QUFDdkQsOEJBQThCLEtBQUssb0lBQW9JLHFCQUFxQjtBQUM1TCxpQzs7Ozs7Ozs7Ozs7QUN4QmE7QUFDYjtBQUNBO0FBQ0EsbURBQW1EO0FBQ25ELGtCQUFrQjtBQUNsQjtBQUNBLDhDQUE2QyxDQUFDLGNBQWMsRUFBQztBQUM3RCxnQkFBZ0IsbUJBQU8sQ0FBQyxzSEFBb0M7QUFDNUQ7QUFDQSxpQ0FBaUM7QUFDakM7QUFDQTtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0E7QUFDQSxlQUFlLHlHQUF5RztBQUN4SDtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQztBQUNuQztBQUNBLGtCQUFrQixnQkFBZ0I7QUFDbEM7QUFDQTtBQUNBLGVBQWUsa0lBQWtJO0FBQ2pKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2YsbUM7Ozs7Ozs7Ozs7O0FDbkNhO0FBQ2I7QUFDQTtBQUNBLG1EQUFtRDtBQUNuRCxrQkFBa0I7QUFDbEI7QUFDQSw4Q0FBNkMsQ0FBQyxjQUFjLEVBQUM7QUFDN0Q7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLG1CQUFPLENBQUMsc0hBQW9DO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixlQUFlO0FBQ3RDO0FBQ0E7QUFDQSwyQkFBMkIsT0FBTztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLFlBQVk7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLDZCQUE2QjtBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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LDZDQUE2QyxVQUFVLDZDQUE2QyxVQUFVLG1DQUFtQyxVQUFVLHlDQUF5QyxVQUFVLCtDQUErQyxVQUFVLCtDQUErQyxVQUFVLHdDQUF3QyxVQUFVLHlDQUF5QyxVQUFVLHdDQUF3QyxVQUFVLG9DQUFvQyxTQUFTLHFDQUFxQyxTQUFTLHlDQUF5QyxTQUFTLG9DQUFvQyxTQUFTLDZCQUE2QixVQUFVLGlDQUFpQyxVQUFVLHNDQUFzQyxTQUFTLHlDQUF5QyxVQUFVLDhDQUE4QyxVQUFVLHdDQUF3QyxVQUFVLG1DQUFtQyxVQUFVLG1DQUFtQyxVQUFVLDBDQUEwQyxVQUFVLHFDQUFxQyxVQUFVLHlDQUF5QyxVQUFVLGlDQUFpQyxVQUFVLDBDQUEwQyxVQUFVLDhDQUE4QyxVQUFVLDZDQUE2QyxVQUFVLG1DQUFtQyxVQUFVLDBDQUEwQyxVQUFVLG9DQUFvQyxVQUFVLHdDQUF3QyxVQUFVLDhDQUE4QyxVQUFVLDJDQUEyQyxVQUFVLGtEQUFrRCxVQUFVLDRDQUE0QyxVQUFVLGtDQUFrQyxTQUFTLHNDQUFzQyxTQUFTLHNDQUFzQyxTQUFTLDhDQUE4QyxVQUFVLHdDQUF3QyxVQUFVLHdDQUF3QyxVQUFVLHdDQUF3QyxVQUFVLHFDQUFxQyxVQUFVLG1DQUFtQyxVQUFVLG9DQUFvQyxVQUFVLGtDQUFrQyxTQUFTLHdDQUF3QyxVQUFVLHdEQUF3RCxVQUFVLHdEQUF3RCxVQUFVLDZCQUE2QixVQUFVLHVDQUF1QyxVQUFVLDZDQUE2QyxVQUFVLHVDQUF1QyxVQUFVLDZCQUE2QixVQUFVLDZCQUE2QixVQUFVLGtDQUFrQyxVQUFVLGtDQUFrQyxVQUFVLG1DQUFtQyxTQUFTLDhDQUE4QyxVQUFVLHdDQUF3QyxVQUFVLDhDQUE4QyxVQUFVLHdDQUF3QyxVQUFVLDhDQUE4QyxVQUFVLGlDQUFpQyxVQUFVLDJCQUEyQixVQUFVLCtCQUErQixVQUFVLDRCQUE0QixVQUFVLGtDQUFrQyxVQUFVLGlDQUFpQyxTQUFTLCtCQUErQixVQUFVLHlDQUF5QyxVQUFVLDZCQUE2QixVQUFVLDZCQUE2QixVQUFVLHFDQUFxQyxVQUFVLGdDQUFnQyxVQUFVLHFDQUFxQyxVQUFVLG9DQUFvQyxTQUFTLHlDQUF5QyxTQUFTLCtDQUErQyxVQUFVLDBDQUEwQyxVQUFVLGtDQUFrQyxVQUFVLDZCQUE2QixVQUFVLHFDQUFxQyxVQUFVLHVDQUF1QyxVQUFVLDZDQUE2QyxVQUFVLDRDQUE0QyxVQUFVLGlEQUFpRCxVQUFVLDJDQUEyQyxVQUFVLHlDQUF5QyxVQUFVLG1DQUFtQyxVQUFVLGtDQUFrQyxVQUFVLDZDQUE2QyxVQUFVLDBDQUEwQyxVQUFVLDhDQUE4QyxVQUFVLGdEQUFnRCxVQUFVLCtDQUErQyxVQUFVLGtEQUFrRCxVQUFVLHFDQUFxQyxVQUFVLHNDQUFzQyxVQUFVLDRDQUE0QyxVQUFVLHNDQUFzQyxVQUFVLDRDQUE0QyxVQUFVLHFDQUFxQyxVQUFVLDJDQUEyQyxVQUFVLCtCQUErQixVQUFVLHlDQUF5QyxVQUFVLGtEQUFrRCxVQUFVLG1DQUFtQyxVQUFVLDJDQUEyQyxVQUFVLHlDQUF5QyxVQUFVLHlDQUF5QyxVQUFVLHVDQUF1QyxVQUFVLGtDQUFrQyxVQUFVLHFDQUFxQyxVQUFVLHFDQUFxQyxVQUFVLDJCQUEyQixVQUFVLDJDQUEyQyxVQUFVLHFDQUFxQyxVQUFVLDhCQUE4QixVQUFVLGlDQUFpQyxVQUFVLGlDQUFpQyxTQUFTLHNDQUFzQyxTQUFTLDRDQUE0QyxVQUFVLHVDQUF1QyxVQUFVLDZCQUE2QixVQUFVLGtDQUFrQyxVQUFVLDRCQUE0QixVQUFVLDZCQUE2QixVQUFVLHlDQUF5QyxVQUFVLGlDQUFpQyxVQUFVLGtDQUFrQyxVQUFVLDBDQUEwQyxVQUFVLGdDQUFnQyxVQUFVLGtDQUFrQyxVQUFVLG9DQUFvQyxVQUFVLGlDQUFpQyxVQUFVLHNDQUFzQyxVQUFVLG9DQUFvQyxVQUFVLHlDQUF5QyxVQUFVLGdEQUFnRCxVQUFVLGlEQUFpRCxVQUFVLGdEQUFnRCxVQUFVLGlEQUFpRCxVQUFVLHlDQUF5QyxTQUFTLDhCQUE4QixVQUFVLG1DQUFtQyxVQUFVLHNDQUFzQyxVQUFVLHNDQUFzQyxVQUFVLGdDQUFnQyxVQUFVLG9DQUFvQyxVQUFVLGtDQUFrQyxVQUFVLDRDQUE0QyxVQUFVLHVDQUF1QyxVQUFVLDZCQUE2QixTQUFTLGdDQUFnQyxVQUFVLHNDQUFzQyxVQUFVLDRCQUE0QixVQUFVLGlDQUFpQyxVQUFVLCtCQUErQixVQUFVLCtCQUErQixVQUFVLG1DQUFtQyxTQUFTLDRCQUE0QixVQUFVLHlDQUF5QyxVQUFVLHlDQUF5QyxVQUFVLDRDQUE0QyxVQUFVLHdDQUF3QyxVQUFVLDJDQUEyQyxVQUFVLDBDQUEwQyxVQUFVLDBDQUEwQyxVQUFVLHlDQUF5QyxVQUFVLDRDQUE0QyxVQUFVLDRDQUE0QyxVQUFVLHdDQUF3QyxVQUFVLG1DQUFtQyxTQUFTLDhDQUE4QyxVQUFVLG9DQUFvQyxTQUFTLHFDQUFxQyxVQUFVLHdDQUF3QyxTQUFTLHlDQUF5QyxTQUFTLHFDQUFxQyxVQUFVLGlEQUFpRCxVQUFVLGtEQUFrRCxVQUFVLGlEQUFpRCxVQUFVLGtEQUFrRCxVQUFVLGtDQUFrQyxTQUFTLHdDQUF3QyxVQUFVLGtDQUFrQyxTQUFTLGdDQUFnQyxVQUFVLHFDQUFxQyxTQUFTLGdEQUFnRCxVQUFVLHNDQUFzQyxTQUFTLHFDQUFxQyxTQUFTLDJDQUEyQyxVQUFVLDJDQUEyQyxVQUFVLGdDQUFnQyxVQUFVLG9DQUFvQyxVQUFVLDRDQUE0QyxVQUFVLGdEQUFnRCxVQUFVLDBDQUEwQyxVQUFVLGlDQUFpQyxTQUFTLDhDQUE4QyxTQUFTLDhDQUE4QyxTQUFTLDhDQUE4QyxTQUFTLDhDQUE4QyxTQUFTLDBDQUEwQyxVQUFVLG9DQUFvQyxTQUFTLHdDQUF3QyxTQUFTLHNDQUFzQyxVQUFVLGdEQUFnRCxVQUFVLDBDQUEwQyxVQUFVLGdDQUFnQyxVQUFVLDZDQUE2QyxVQUFVLHNDQUFzQyxVQUFVLDhDQUE4QyxVQUFVLDRCQUE0QixVQUFVLHlDQUF5QyxVQUFVLDZCQUE2QixVQUFVLDJDQUEyQyxVQUFVLHFDQUFxQyxVQUFVLG1DQUFtQyxVQUFVLGtDQUFrQyxVQUFVLDBDQUEwQyxVQUFVLGtDQUFrQyxVQUFVLHdDQUF3QyxVQUFVLDhCQUE4QixVQUFVLHNDQUFzQyxVQUFVLHVDQUF1QyxVQUFVLGdEQUFnRCxVQUFVLDBDQUEwQyxVQUFVLHVDQUF1QyxVQUFVLHVDQUF1QyxVQUFVLHFDQUFxQyxVQUFVLDRDQUE0QyxVQUFVLDZDQUE2QyxVQUFVLGtDQUFrQyxVQUFVLCtDQUErQyxVQUFVLG1EQUFtRCxVQUFVLGdDQUFnQyxTQUFTLHdDQUF3QyxVQUFVLGtDQUFrQyxVQUFVLHlDQUF5QyxVQUFVLDhDQUE4QyxVQUFVLDZDQUE2QyxVQUFVLDZDQUE2QyxVQUFVLDZDQUE2QyxVQUFVLDhDQUE4QyxVQUFVLDhDQUE4QyxVQUFVLDRDQUE0QyxVQUFVLDRDQUE0QyxVQUFVLDRDQUE0QyxVQUFVLDRDQUE0QyxVQUFVLDRDQUE0QyxVQUFVLDRDQUE0QyxVQUFVLDRDQUE0QyxVQUFVLDRDQUE0QyxVQUFVLHdDQUF3QyxVQUFVLDRDQUE0QyxVQUFVLGdEQUFnRCxVQUFVLGdEQUFnRCxVQUFVLDZDQUE2QyxVQUFVLDZDQUE2QyxVQUFVLDZDQUE2QyxVQUFVLG9DQUFvQyxVQUFVLG9DQUFvQyxVQUFVLGtDQUFrQyxVQUFVLGlDQUFpQyxVQUFVLHdDQUF3QyxVQUFVLHNDQUFzQyxVQUFVLHFDQUFxQyxVQUFVLHVDQUF1QyxVQUFVLHVDQUF1QyxVQUFVLCtDQUErQyxVQUFVLCtDQUErQyxVQUFVLDRDQUE0QyxVQUFVLGdDQUFnQyxVQUFVLHVDQUF1QyxVQUFVLHlDQUF5QyxVQUFVLDJCQUEyQixVQUFVLGlDQUFpQyxVQUFVLHFDQUFxQyxVQUFVLGlDQUFpQyxVQUFVLHdDQUF3QyxVQUFVLDJDQUEyQyxVQUFVLHNDQUFzQyxVQUFVLHdDQUF3QyxVQUFVLCtDQUErQyxTQUFTLDBDQUEwQyxVQUFVLG9DQUFvQyxVQUFVLHNEQUFzRCxVQUFVLHFEQUFxRCxVQUFVLHFEQUFxRCxVQUFVLHFEQUFxRCxVQUFVLHNEQUFzRCxVQUFVLHNEQUFzRCxVQUFVLG9EQUFvRCxVQUFVLG9EQUFvRCxVQUFVLG9EQUFvRCxVQUFVLG9EQUFvRCxVQUFVLG9EQUFvRCxVQUFVLG9EQUFvRCxVQUFVLG9EQUFvRCxVQUFVLG9EQUFvRCxVQUFVLDZCQUE2QixVQUFVLGtDQUFrQyxVQUFVLG1DQUFtQyxVQUFVLGlDQUFpQyxVQUFVLHNDQUFzQyxVQUFVLHNDQUFzQyxVQUFVLDZCQUE2QixVQUFVLDJDQUEyQyxVQUFVLHFDQUFxQyxVQUFVLGlDQUFpQyxVQUFVLGtDQUFrQyxVQUFVLGlDQUFpQyxVQUFVLGdDQUFnQyxVQUFVLHNDQUFzQyxVQUFVLG1DQUFtQyxVQUFVLHFDQUFxQyxTQUFTLDhCQUE4QixVQUFVLDRDQUE0QyxVQUFVLHNDQUFzQyxVQUFVLGlDQUFpQyxVQUFVLDJDQUEyQyxVQUFVLDhCQUE4QixVQUFVLG1DQUFtQyxVQUFVLG9DQUFvQyxVQUFVLGlDQUFpQyxVQUFVLHVDQUF1QyxVQUFVLDhCQUE4QixVQUFVLHNDQUFzQyxVQUFVLHNDQUFzQyxTQUFTLDhDQUE4QyxTQUFTLHNDQUFzQyxTQUFTLHVDQUF1QyxVQUFVLHVDQUF1QyxVQUFVLHVDQUF1QyxVQUFVLG9DQUFvQyxVQUFVLHVDQUF1QyxVQUFVLHVDQUF1QyxVQUFVLHVDQUF1QyxVQUFVLDJDQUEyQyxVQUFVLHdDQUF3QyxTQUFTLDJDQUEyQyxTQUFTLDZCQUE2QixTQUFTLDZDQUE2QyxVQUFVLGlEQUFpRCxVQUFVLDJDQUEyQyxVQUFVLDBDQUEwQyxVQUFVLG9DQUFvQyxVQUFVLCtCQUErQixVQUFVLHFDQUFxQyxVQUFVLDJDQUEyQyxVQUFVLHFDQUFxQyxVQUFVLCtDQUErQyxVQUFVLHlDQUF5QyxVQUFVLGdDQUFnQyxVQUFVLDJDQUEyQyxVQUFVLDZDQUE2QyxVQUFVLHlDQUF5QyxVQUFVLDBDQUEwQyxVQUFVLG9DQUFvQyxVQUFVLGlDQUFpQyxVQUFVLHVDQUF1QyxVQUFVLDZDQUE2QyxVQUFVLHVDQUF1QyxVQUFVLDZDQUE2QyxVQUFVLHNDQUFzQyxVQUFVLDRDQUE0QyxVQUFVLDZDQUE2QyxVQUFVLG1EQUFtRCxVQUFVLCtCQUErQixVQUFVLG1DQUFtQyxVQUFVLHFDQUFxQyxVQUFVLHdDQUF3QyxVQUFV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O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULDRCQUE0QjtBQUM1QjtBQUNBLE9BQU87QUFDUDtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLE9BQU87QUFDcEIsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsT0FBTztBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCxXQUFXO0FBQzNEOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSx1QkFBdUIsOEJBQThCO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLDZCQUE2QixrQkFBa0I7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1gsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksT0FBTztBQUNuQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYSxPQUFPO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYSxPQUFPO0FBQ3BCLGFBQWEsU0FBUztBQUN0QixhQUFhLE9BQU87QUFDcEIsY0FBYyxPQUFPO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLE9BQU87QUFDcEIsYUFBYSxPQUFPO0FBQ3BCLGFBQWEsT0FBTztBQUNwQixhQUFhLFNBQVM7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixnQkFBZ0I7QUFDbkM7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLE1BQU07QUFDbkIsYUFBYSxTQUFTO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7Ozs7Ozs7Ozs7QUM1TUEsbUJBQW1CLG1CQUFPLENBQUMsZ0ZBQWU7O0FB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QUFrQjtBQUNsQixZQUFZO0FBQ1osWUFBWTtBQUNaLGlCQUFpQjtBQUNqQixlQUFlO0FBQ2YsZUFBZTtBQUNmOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBOztBQUVBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFNBQVM7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsNENBQTRDOztBQUV2RDtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsWUFBWSxPQUFPO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNB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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsNENBQTRDOztBQUV2RDtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsWUFBWSxPQUFPO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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LGFBQWEsT0FBTztBQUNwQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCLGFBQWEsT0FBTztBQUNwQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxhQUFhLGdCQUFnQjtBQUM3QjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYSxPQUFPO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLFlBQVk7O0FBRWxCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7OztVQ25FQTtVQUNBOztVQUVBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBOztVQUVBO1VBQ0E7O1VBRUE7VUFDQTtVQUNBOzs7OztXQ3RCQSx3Rjs7Ozs7VUNBQTtVQUNBO1VBQ0E7VUFDQSIsImZpbGUiOiJpbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxuLyoqXG4gKiBFeHBvc2UgYEJhY2tvZmZgLlxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gQmFja29mZjtcblxuLyoqXG4gKiBJbml0aWFsaXplIGJhY2tvZmYgdGltZXIgd2l0aCBgb3B0c2AuXG4gKlxuICogLSBgbWluYCBpbml0aWFsIHRpbWVvdXQgaW4gbWlsbGlzZWNvbmRzIFsxMDBdXG4gKiAtIGBtYXhgIG1heCB0aW1lb3V0IFsxMDAwMF1cbiAqIC0gYGppdHRlcmAgWzBdXG4gKiAtIGBmYWN0b3JgIFsyXVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmZ1bmN0aW9uIEJhY2tvZmYob3B0cykge1xuICBvcHRzID0gb3B0cyB8fCB7fTtcbiAgdGhpcy5tcyA9IG9wdHMubWluIHx8IDEwMDtcbiAgdGhpcy5tYXggPSBvcHRzLm1heCB8fCAxMDAwMDtcbiAgdGhpcy5mYWN0b3IgPSBvcHRzLmZhY3RvciB8fCAyO1xuICB0aGlzLmppdHRlciA9IG9wdHMuaml0dGVyID4gMCAmJiBvcHRzLmppdHRlciA8PSAxID8gb3B0cy5qaXR0ZXIgOiAwO1xuICB0aGlzLmF0dGVtcHRzID0gMDtcbn1cblxuLyoqXG4gKiBSZXR1cm4gdGhlIGJhY2tvZmYgZHVyYXRpb24uXG4gKlxuICogQHJldHVybiB7TnVtYmVyfVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5CYWNrb2ZmLnByb3RvdHlwZS5kdXJhdGlvbiA9IGZ1bmN0aW9uKCl7XG4gIHZhciBtcyA9IHRoaXMubXMgKiBNYXRoLnBvdyh0aGlzLmZhY3RvciwgdGhpcy5hdHRlbXB0cysrKTtcbiAgaWYgKHRoaXMuaml0dGVyKSB7XG4gICAgdmFyIHJhbmQgPSAgTWF0aC5yYW5kb20oKTtcbiAgICB2YXIgZGV2aWF0aW9uID0gTWF0aC5mbG9vcihyYW5kICogdGhpcy5qaXR0ZXIgKiBtcyk7XG4gICAgbXMgPSAoTWF0aC5mbG9vcihyYW5kICogMTApICYgMSkgPT0gMCAgPyBtcyAtIGRldmlhdGlvbiA6IG1zICsgZGV2aWF0aW9uO1xuICB9XG4gIHJldHVybiBNYXRoLm1pbihtcywgdGhpcy5tYXgpIHwgMDtcbn07XG5cbi8qKlxuICogUmVzZXQgdGhlIG51bWJlciBvZiBhdHRlbXB0cy5cbiAqXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbkJhY2tvZmYucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24oKXtcbiAgdGhpcy5hdHRlbXB0cyA9IDA7XG59O1xuXG4vKipcbiAqIFNldCB0aGUgbWluaW11bSBkdXJhdGlvblxuICpcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuQmFja29mZi5wcm90b3R5cGUuc2V0TWluID0gZnVuY3Rpb24obWluKXtcbiAgdGhpcy5tcyA9IG1pbjtcbn07XG5cbi8qKlxuICogU2V0IHRoZSBtYXhpbXVtIGR1cmF0aW9uXG4gKlxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5CYWNrb2ZmLnByb3RvdHlwZS5zZXRNYXggPSBmdW5jdGlvbihtYXgpe1xuICB0aGlzLm1heCA9IG1heDtcbn07XG5cbi8qKlxuICogU2V0IHRoZSBqaXR0ZXJcbiAqXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbkJhY2tvZmYucHJvdG90eXBlLnNldEppdHRlciA9IGZ1bmN0aW9uKGppdHRlcil7XG4gIHRoaXMuaml0dGVyID0gaml0dGVyO1xufTtcblxuIiwiLypcbiAqIGJhc2U2NC1hcnJheWJ1ZmZlclxuICogaHR0cHM6Ly9naXRodWIuY29tL25pa2xhc3ZoL2Jhc2U2NC1hcnJheWJ1ZmZlclxuICpcbiAqIENvcHlyaWdodCAoYykgMjAxMiBOaWtsYXMgdm9uIEhlcnR6ZW5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbiAqL1xuKGZ1bmN0aW9uKGNoYXJzKXtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgZXhwb3J0cy5lbmNvZGUgPSBmdW5jdGlvbihhcnJheWJ1ZmZlcikge1xuICAgIHZhciBieXRlcyA9IG5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKSxcbiAgICBpLCBsZW4gPSBieXRlcy5sZW5ndGgsIGJhc2U2NCA9IFwiXCI7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKz0zKSB7XG4gICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaV0gPj4gMl07XG4gICAgICBiYXNlNjQgKz0gY2hhcnNbKChieXRlc1tpXSAmIDMpIDw8IDQpIHwgKGJ5dGVzW2kgKyAxXSA+PiA0KV07XG4gICAgICBiYXNlNjQgKz0gY2hhcnNbKChieXRlc1tpICsgMV0gJiAxNSkgPDwgMikgfCAoYnl0ZXNbaSArIDJdID4+IDYpXTtcbiAgICAgIGJhc2U2NCArPSBjaGFyc1tieXRlc1tpICsgMl0gJiA2M107XG4gICAgfVxuXG4gICAgaWYgKChsZW4gJSAzKSA9PT0gMikge1xuICAgICAgYmFzZTY0ID0gYmFzZTY0LnN1YnN0cmluZygwLCBiYXNlNjQubGVuZ3RoIC0gMSkgKyBcIj1cIjtcbiAgICB9IGVsc2UgaWYgKGxlbiAlIDMgPT09IDEpIHtcbiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgXCI9PVwiO1xuICAgIH1cblxuICAgIHJldHVybiBiYXNlNjQ7XG4gIH07XG5cbiAgZXhwb3J0cy5kZWNvZGUgPSAgZnVuY3Rpb24oYmFzZTY0KSB7XG4gICAgdmFyIGJ1ZmZlckxlbmd0aCA9IGJhc2U2NC5sZW5ndGggKiAwLjc1LFxuICAgIGxlbiA9IGJhc2U2NC5sZW5ndGgsIGksIHAgPSAwLFxuICAgIGVuY29kZWQxLCBlbmNvZGVkMiwgZW5jb2RlZDMsIGVuY29kZWQ0O1xuXG4gICAgaWYgKGJhc2U2NFtiYXNlNjQubGVuZ3RoIC0gMV0gPT09IFwiPVwiKSB7XG4gICAgICBidWZmZXJMZW5ndGgtLTtcbiAgICAgIGlmIChiYXNlNjRbYmFzZTY0Lmxlbmd0aCAtIDJdID09PSBcIj1cIikge1xuICAgICAgICBidWZmZXJMZW5ndGgtLTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgYXJyYXlidWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIoYnVmZmVyTGVuZ3RoKSxcbiAgICBieXRlcyA9IG5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKTtcblxuICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrPTQpIHtcbiAgICAgIGVuY29kZWQxID0gY2hhcnMuaW5kZXhPZihiYXNlNjRbaV0pO1xuICAgICAgZW5jb2RlZDIgPSBjaGFycy5pbmRleE9mKGJhc2U2NFtpKzFdKTtcbiAgICAgIGVuY29kZWQzID0gY2hhcnMuaW5kZXhPZihiYXNlNjRbaSsyXSk7XG4gICAgICBlbmNvZGVkNCA9IGNoYXJzLmluZGV4T2YoYmFzZTY0W2krM10pO1xuXG4gICAgICBieXRlc1twKytdID0gKGVuY29kZWQxIDw8IDIpIHwgKGVuY29kZWQyID4+IDQpO1xuICAgICAgYnl0ZXNbcCsrXSA9ICgoZW5jb2RlZDIgJiAxNSkgPDwgNCkgfCAoZW5jb2RlZDMgPj4gMik7XG4gICAgICBieXRlc1twKytdID0gKChlbmNvZGVkMyAmIDMpIDw8IDYpIHwgKGVuY29kZWQ0ICYgNjMpO1xuICAgIH1cblxuICAgIHJldHVybiBhcnJheWJ1ZmZlcjtcbiAgfTtcbn0pKFwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrL1wiKTtcbiIsIlxyXG4vKipcclxuICogRXhwb3NlIGBFbWl0dGVyYC5cclxuICovXHJcblxyXG5pZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICBtb2R1bGUuZXhwb3J0cyA9IEVtaXR0ZXI7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBJbml0aWFsaXplIGEgbmV3IGBFbWl0dGVyYC5cclxuICpcclxuICogQGFwaSBwdWJsaWNcclxuICovXHJcblxyXG5mdW5jdGlvbiBFbWl0dGVyKG9iaikge1xyXG4gIGlmIChvYmopIHJldHVybiBtaXhpbihvYmopO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIE1peGluIHRoZSBlbWl0dGVyIHByb3BlcnRpZXMuXHJcbiAqXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcclxuICogQHJldHVybiB7T2JqZWN0fVxyXG4gKiBAYXBpIHByaXZhdGVcclxuICovXHJcblxyXG5mdW5jdGlvbiBtaXhpbihvYmopIHtcclxuICBmb3IgKHZhciBrZXkgaW4gRW1pdHRlci5wcm90b3R5cGUpIHtcclxuICAgIG9ialtrZXldID0gRW1pdHRlci5wcm90b3R5cGVba2V5XTtcclxuICB9XHJcbiAgcmV0dXJuIG9iajtcclxufVxyXG5cclxuLyoqXHJcbiAqIExpc3RlbiBvbiB0aGUgZ2l2ZW4gYGV2ZW50YCB3aXRoIGBmbmAuXHJcbiAqXHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxyXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxyXG4gKiBAcmV0dXJuIHtFbWl0dGVyfVxyXG4gKiBAYXBpIHB1YmxpY1xyXG4gKi9cclxuXHJcbkVtaXR0ZXIucHJvdG90eXBlLm9uID1cclxuRW1pdHRlci5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uKGV2ZW50LCBmbil7XHJcbiAgdGhpcy5fY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzIHx8IHt9O1xyXG4gICh0aGlzLl9jYWxsYmFja3NbJyQnICsgZXZlbnRdID0gdGhpcy5fY2FsbGJhY2tzWyckJyArIGV2ZW50XSB8fCBbXSlcclxuICAgIC5wdXNoKGZuKTtcclxuICByZXR1cm4gdGhpcztcclxufTtcclxuXHJcbi8qKlxyXG4gKiBBZGRzIGFuIGBldmVudGAgbGlzdGVuZXIgdGhhdCB3aWxsIGJlIGludm9rZWQgYSBzaW5nbGVcclxuICogdGltZSB0aGVuIGF1dG9tYXRpY2FsbHkgcmVtb3ZlZC5cclxuICpcclxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XHJcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXHJcbiAqIEByZXR1cm4ge0VtaXR0ZXJ9XHJcbiAqIEBhcGkgcHVibGljXHJcbiAqL1xyXG5cclxuRW1pdHRlci5wcm90b3R5cGUub25jZSA9IGZ1bmN0aW9uKGV2ZW50LCBmbil7XHJcbiAgZnVuY3Rpb24gb24oKSB7XHJcbiAgICB0aGlzLm9mZihldmVudCwgb24pO1xyXG4gICAgZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuICB9XHJcblxyXG4gIG9uLmZuID0gZm47XHJcbiAgdGhpcy5vbihldmVudCwgb24pO1xyXG4gIHJldHVybiB0aGlzO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIFJlbW92ZSB0aGUgZ2l2ZW4gY2FsbGJhY2sgZm9yIGBldmVudGAgb3IgYWxsXHJcbiAqIHJlZ2lzdGVyZWQgY2FsbGJhY2tzLlxyXG4gKlxyXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcclxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cclxuICogQHJldHVybiB7RW1pdHRlcn1cclxuICogQGFwaSBwdWJsaWNcclxuICovXHJcblxyXG5FbWl0dGVyLnByb3RvdHlwZS5vZmYgPVxyXG5FbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lciA9XHJcbkVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycyA9XHJcbkVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbihldmVudCwgZm4pe1xyXG4gIHRoaXMuX2NhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrcyB8fCB7fTtcclxuXHJcbiAgLy8gYWxsXHJcbiAgaWYgKDAgPT0gYXJndW1lbnRzLmxlbmd0aCkge1xyXG4gICAgdGhpcy5fY2FsbGJhY2tzID0ge307XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIC8vIHNwZWNpZmljIGV2ZW50XHJcbiAgdmFyIGNhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrc1snJCcgKyBldmVudF07XHJcbiAgaWYgKCFjYWxsYmFja3MpIHJldHVybiB0aGlzO1xyXG5cclxuICAvLyByZW1vdmUgYWxsIGhhbmRsZXJzXHJcbiAgaWYgKDEgPT0gYXJndW1lbnRzLmxlbmd0aCkge1xyXG4gICAgZGVsZXRlIHRoaXMuX2NhbGxiYWNrc1snJCcgKyBldmVudF07XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIC8vIHJlbW92ZSBzcGVjaWZpYyBoYW5kbGVyXHJcbiAgdmFyIGNiO1xyXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgY2FsbGJhY2tzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBjYiA9IGNhbGxiYWNrc1tpXTtcclxuICAgIGlmIChjYiA9PT0gZm4gfHwgY2IuZm4gPT09IGZuKSB7XHJcbiAgICAgIGNhbGxiYWNrcy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gUmVtb3ZlIGV2ZW50IHNwZWNpZmljIGFycmF5cyBmb3IgZXZlbnQgdHlwZXMgdGhhdCBub1xyXG4gIC8vIG9uZSBpcyBzdWJzY3JpYmVkIGZvciB0byBhdm9pZCBtZW1vcnkgbGVhay5cclxuICBpZiAoY2FsbGJhY2tzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgZGVsZXRlIHRoaXMuX2NhbGxiYWNrc1snJCcgKyBldmVudF07XHJcbiAgfVxyXG5cclxuICByZXR1cm4gdGhpcztcclxufTtcclxuXHJcbi8qKlxyXG4gKiBFbWl0IGBldmVudGAgd2l0aCB0aGUgZ2l2ZW4gYXJncy5cclxuICpcclxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XHJcbiAqIEBwYXJhbSB7TWl4ZWR9IC4uLlxyXG4gKiBAcmV0dXJuIHtFbWl0dGVyfVxyXG4gKi9cclxuXHJcbkVtaXR0ZXIucHJvdG90eXBlLmVtaXQgPSBmdW5jdGlvbihldmVudCl7XHJcbiAgdGhpcy5fY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzIHx8IHt9O1xyXG5cclxuICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSlcclxuICAgICwgY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzWyckJyArIGV2ZW50XTtcclxuXHJcbiAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcclxuICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xyXG4gIH1cclxuXHJcbiAgaWYgKGNhbGxiYWNrcykge1xyXG4gICAgY2FsbGJhY2tzID0gY2FsbGJhY2tzLnNsaWNlKDApO1xyXG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNhbGxiYWNrcy5sZW5ndGg7IGkgPCBsZW47ICsraSkge1xyXG4gICAgICBjYWxsYmFja3NbaV0uYXBwbHkodGhpcywgYXJncyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXR1cm4gdGhpcztcclxufTtcclxuXHJcbi8qKlxyXG4gKiBSZXR1cm4gYXJyYXkgb2YgY2FsbGJhY2tzIGZvciBgZXZlbnRgLlxyXG4gKlxyXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcclxuICogQHJldHVybiB7QXJyYXl9XHJcbiAqIEBhcGkgcHVibGljXHJcbiAqL1xyXG5cclxuRW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJzID0gZnVuY3Rpb24oZXZlbnQpe1xyXG4gIHRoaXMuX2NhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrcyB8fCB7fTtcclxuICByZXR1cm4gdGhpcy5fY2FsbGJhY2tzWyckJyArIGV2ZW50XSB8fCBbXTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBDaGVjayBpZiB0aGlzIGVtaXR0ZXIgaGFzIGBldmVudGAgaGFuZGxlcnMuXHJcbiAqXHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxyXG4gKiBAcmV0dXJuIHtCb29sZWFufVxyXG4gKiBAYXBpIHB1YmxpY1xyXG4gKi9cclxuXHJcbkVtaXR0ZXIucHJvdG90eXBlLmhhc0xpc3RlbmVycyA9IGZ1bmN0aW9uKGV2ZW50KXtcclxuICByZXR1cm4gISEgdGhpcy5saXN0ZW5lcnMoZXZlbnQpLmxlbmd0aDtcclxufTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbi8qKlxyXG4gKiBAYXV0aG9yICAgICAgIFlhbm5pY2sgRGV1YmVsIChodHRwczovL2dpdGh1Yi5jb20veWFuZGV1KVxyXG4gKiBAY29weXJpZ2h0ICAgIENvcHlyaWdodCAoYykgMjAyMCBZYW5uaWNrIERldWJlbDsgUHJvamVjdCBVcmw6IGh0dHBzOi8vZ2l0aHViLmNvbS9lbmFibGUzZC9lbmFibGUzZFxyXG4gKiBAbGljZW5zZSAgICAgIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZW5hYmxlM2QvZW5hYmxlM2QvYmxvYi9tYXN0ZXIvTElDRU5TRXxHTlUgR1BMdjN9XHJcbiAqL1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBzY2VuZTNkXzEgPSByZXF1aXJlKFwiLi9zY2VuZTNkXCIpO1xyXG5leHBvcnRzLlNjZW5lM0QgPSBzY2VuZTNkXzEuU2NlbmUzRDtcclxudmFyIHByb2plY3RfMSA9IHJlcXVpcmUoXCIuL3Byb2plY3RcIik7XHJcbmV4cG9ydHMuUHJvamVjdCA9IHByb2plY3RfMS5Qcm9qZWN0O1xyXG52YXIgcGh5c2ljc0xvYWRlcl8xID0gcmVxdWlyZShcIkBlbmFibGUzZC9jb21tb24vZGlzdC9waHlzaWNzTG9hZGVyXCIpO1xyXG5leHBvcnRzLlBoeXNpY3NMb2FkZXIgPSBwaHlzaWNzTG9hZGVyXzEuUGh5c2ljc0xvYWRlcjtcclxudmFyIGV4dGVuZGVkTWVzaF8xID0gcmVxdWlyZShcIkBlbmFibGUzZC9jb21tb24vZGlzdC9leHRlbmRlZE1lc2hcIik7XHJcbmV4cG9ydHMuRXh0ZW5kZWRNZXNoID0gZXh0ZW5kZWRNZXNoXzEuRXh0ZW5kZWRNZXNoO1xyXG52YXIgZXh0ZW5kZWRPYmplY3QzRF8xID0gcmVxdWlyZShcIkBlbmFibGUzZC9jb21tb24vZGlzdC9leHRlbmRlZE9iamVjdDNEXCIpO1xyXG5leHBvcnRzLkV4dGVuZGVkT2JqZWN0M0QgPSBleHRlbmRlZE9iamVjdDNEXzEuRXh0ZW5kZWRPYmplY3QzRDtcclxudmFyIGV4dGVuZGVkR3JvdXBfMSA9IHJlcXVpcmUoXCJAZW5hYmxlM2QvY29tbW9uL2Rpc3QvZXh0ZW5kZWRHcm91cFwiKTtcclxuZXhwb3J0cy5FeHRlbmRlZEdyb3VwID0gZXh0ZW5kZWRHcm91cF8xLkV4dGVuZGVkR3JvdXA7XHJcbmNvbnN0IFRIUkVFID0gcmVxdWlyZShcIkBlbmFibGUzZC90aHJlZS13cmFwcGVyL2Rpc3QvaW5kZXhcIik7XHJcbmV4cG9ydHMuVEhSRUUgPSBUSFJFRTtcclxuY29uc3QgVHlwZXMgPSByZXF1aXJlKFwiQGVuYWJsZTNkL2NvbW1vbi9kaXN0L3R5cGVzXCIpO1xyXG5leHBvcnRzLlR5cGVzID0gVHlwZXM7XHJcbnZhciBqb3lzdGlja18xID0gcmVxdWlyZShcIkBlbmFibGUzZC9jb21tb24vZGlzdC9taXNjL2pveXN0aWNrXCIpO1xyXG5leHBvcnRzLkpveVN0aWNrID0gam95c3RpY2tfMS5Kb3lTdGljaztcclxudmFyIHRoaXJkUGVyc29uQ29udHJvbHNfMSA9IHJlcXVpcmUoXCJAZW5hYmxlM2QvY29tbW9uL2Rpc3QvbWlzYy90aGlyZFBlcnNvbkNvbnRyb2xzXCIpO1xyXG5leHBvcnRzLlRoaXJkUGVyc29uQ29udHJvbHMgPSB0aGlyZFBlcnNvbkNvbnRyb2xzXzEuVGhpcmRQZXJzb25Db250cm9scztcclxudmFyIGZpcnN0UGVyc29uQ29udHJvbHNfMSA9IHJlcXVpcmUoXCJAZW5hYmxlM2QvY29tbW9uL2Rpc3QvbWlzYy9maXJzdFBlcnNvbkNvbnRyb2xzXCIpO1xyXG5leHBvcnRzLkZpcnN0UGVyc29uQ29udHJvbHMgPSBmaXJzdFBlcnNvbkNvbnRyb2xzXzEuRmlyc3RQZXJzb25Db250cm9scztcclxudmFyIHBvaW50ZXJMb2NrXzEgPSByZXF1aXJlKFwiQGVuYWJsZTNkL2NvbW1vbi9kaXN0L21pc2MvcG9pbnRlckxvY2tcIik7XHJcbmV4cG9ydHMuUG9pbnRlckxvY2sgPSBwb2ludGVyTG9ja18xLlBvaW50ZXJMb2NrO1xyXG52YXIgcG9pbnRlckRyYWdfMSA9IHJlcXVpcmUoXCJAZW5hYmxlM2QvY29tbW9uL2Rpc3QvbWlzYy9wb2ludGVyRHJhZ1wiKTtcclxuZXhwb3J0cy5Qb2ludGVyRHJhZyA9IHBvaW50ZXJEcmFnXzEuUG9pbnRlckRyYWc7XHJcbi8vIHBvc3QtcHJvY2Vzc2luZ1xyXG52YXIgaW5kZXhfMSA9IHJlcXVpcmUoXCJAZW5hYmxlM2QvdGhyZWUtd3JhcHBlci9kaXN0L2luZGV4XCIpO1xyXG5leHBvcnRzLkVmZmVjdENvbXBvc2VyID0gaW5kZXhfMS5FZmZlY3RDb21wb3NlcjtcclxuZXhwb3J0cy5SZW5kZXJQYXNzID0gaW5kZXhfMS5SZW5kZXJQYXNzO1xyXG5leHBvcnRzLlNoYWRlclBhc3MgPSBpbmRleF8xLlNoYWRlclBhc3M7XHJcbmV4cG9ydHMuR2xpdGNoUGFzcyA9IGluZGV4XzEuR2xpdGNoUGFzcztcclxuZXhwb3J0cy5Eb3RTY3JlZW5TaGFkZXIgPSBpbmRleF8xLkRvdFNjcmVlblNoYWRlcjtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbi8qKlxyXG4gKiBAYXV0aG9yICAgICAgIFlhbm5pY2sgRGV1YmVsIChodHRwczovL2dpdGh1Yi5jb20veWFuZGV1KVxyXG4gKiBAY29weXJpZ2h0ICAgIENvcHlyaWdodCAoYykgMjAyMCBZYW5uaWNrIERldWJlbDsgUHJvamVjdCBVcmw6IGh0dHBzOi8vZ2l0aHViLmNvbS9lbmFibGUzZC9lbmFibGUzZFxyXG4gKiBAbGljZW5zZSAgICAgIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZW5hYmxlM2QvZW5hYmxlM2QvYmxvYi9tYXN0ZXIvTElDRU5TRXxHTlUgR1BMdjN9XHJcbiAqL1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmNvbnN0IGluZGV4XzEgPSByZXF1aXJlKFwiQGVuYWJsZTNkL3RocmVlLWdyYXBoaWNzL2Rpc3QvaW5kZXhcIik7XHJcbmNsYXNzIFByb2plY3QgZXh0ZW5kcyBpbmRleF8xLlRocmVlR3JhcGhpY3Mge1xyXG4gICAgY29uc3RydWN0b3IocHJvamVjdENvbmZpZykge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICBzdXBlcihwcm9qZWN0Q29uZmlnKTtcclxuICAgICAgICB0aGlzLnByb2plY3RDb25maWcgPSBwcm9qZWN0Q29uZmlnO1xyXG4gICAgICAgIHRoaXMuc2NlbmVzID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U2l6ZSh3aW5kb3cuaW5uZXJXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0KTtcclxuICAgICAgICBpZiAodGhpcy5wcm9qZWN0Q29uZmlnLnBhcmVudClcclxuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLnByb2plY3RDb25maWcucGFyZW50KTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gZG9jdW1lbnQuYm9keTtcclxuICAgICAgICBpZiAoIXRoaXMucGFyZW50KSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihgW2VuYWJsZTNkXSBwYXJlbnQgXCIke3RoaXMucHJvamVjdENvbmZpZy5wYXJlbnR9XCIgbm90IGZvdW5kISBXaWxsIGFkZCBpdCB0byB0aGUgYm9keS5gKTtcclxuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBkb2N1bWVudC5ib2R5O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnBhcmVudC5hcHBlbmRDaGlsZCh0aGlzLnJlbmRlcmVyLmRvbUVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMuY2FudmFzID0gdGhpcy5yZW5kZXJlci5kb21FbGVtZW50O1xyXG4gICAgICAgIGxldCBmaXJzdFNjZW5lS2V5ID0gJyc7XHJcbiAgICAgICAgdGhpcy5wcm9qZWN0Q29uZmlnLnNjZW5lcy5mb3JFYWNoKChzY2VuZSwgaSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBzID0gbmV3IHNjZW5lKCk7XHJcbiAgICAgICAgICAgIGlmIChpID09PSAwKVxyXG4gICAgICAgICAgICAgICAgZmlyc3RTY2VuZUtleSA9IHMuc2NlbmVLZXk7XHJcbiAgICAgICAgICAgIGNvbnN0IHBsdWcgPSB7XHJcbiAgICAgICAgICAgICAgICAvLyBzY2VuZSBjb25maWd1cmF0aW9uXHJcbiAgICAgICAgICAgICAgICBzY2VuZUNvbmZpZzoge1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHR1cmVBbmlzb3Ryb3B5OiB0aGlzLnRleHR1cmVBbmlzb3Ryb3B5LFxyXG4gICAgICAgICAgICAgICAgICAgIGF1dG9TdGFydDogZmFsc2VcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAvLyBhZGQgY29yZSBmZWF0dXJlcyBmcm9tIHRocmVlLWdyYXBoaWNzY29uZmlnOiB7XHJcbiAgICAgICAgICAgICAgICByZW5kZXJlcjogdGhpcy5yZW5kZXJlcixcclxuICAgICAgICAgICAgICAgIHBhcmVudDogdGhpcy5wYXJlbnQsXHJcbiAgICAgICAgICAgICAgICBjYW52YXM6IHRoaXMuY2FudmFzLFxyXG4gICAgICAgICAgICAgICAgc2NlbmU6IHRoaXMuc2NlbmUsXHJcbiAgICAgICAgICAgICAgICBzY2VuZXM6IHRoaXMuc2NlbmVzLFxyXG4gICAgICAgICAgICAgICAgY2FtZXJhOiB0aGlzLmNhbWVyYSxcclxuICAgICAgICAgICAgICAgIGNhY2hlOiB0aGlzLmNhY2hlLFxyXG4gICAgICAgICAgICAgICAgcGh5c2ljczogdGhpcy5waHlzaWNzXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHMuaW5pdGlhbGl6ZVNjZW5lKHBsdWcpO1xyXG4gICAgICAgICAgICBpZiAoaSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgcy5zZXRTaXplKHRoaXMucGFyZW50LmNsaWVudFdpZHRoLCB0aGlzLnBhcmVudC5jbGllbnRIZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgcy5zZXRQaXhlbFJhdGlvKE1hdGgubWF4KDEsIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvIC8gMikpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuc2NlbmVzLnNldChzLnNjZW5lS2V5LCBzKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBzdGFydCB0aGUgZmlyc3Qgc2NlbmVcclxuICAgICAgICAoX2EgPSB0aGlzLnNjZW5lcy5nZXQoZmlyc3RTY2VuZUtleSkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5zdGFydChmaXJzdFNjZW5lS2V5KTtcclxuICAgIH1cclxufVxyXG5leHBvcnRzLlByb2plY3QgPSBQcm9qZWN0O1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wcm9qZWN0LmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xyXG4vKipcclxuICogQGF1dGhvciAgICAgICBZYW5uaWNrIERldWJlbCAoaHR0cHM6Ly9naXRodWIuY29tL3lhbmRldSlcclxuICogQGNvcHlyaWdodCAgICBDb3B5cmlnaHQgKGMpIDIwMjAgWWFubmljayBEZXViZWw7IFByb2plY3QgVXJsOiBodHRwczovL2dpdGh1Yi5jb20vZW5hYmxlM2QvZW5hYmxlM2RcclxuICogQGxpY2Vuc2UgICAgICB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2VuYWJsZTNkL2VuYWJsZTNkL2Jsb2IvbWFzdGVyL0xJQ0VOU0V8R05VIEdQTHYzfVxyXG4gKi9cclxudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59O1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmNvbnN0IGluZGV4XzEgPSByZXF1aXJlKFwiQGVuYWJsZTNkL3RocmVlLXdyYXBwZXIvZGlzdC9pbmRleFwiKTtcclxuY29uc3QgUGx1Z2lucyA9IHJlcXVpcmUoXCJAZW5hYmxlM2QvdGhyZWUtZ3JhcGhpY3MvZGlzdC9wbHVnaW5zL2luZGV4XCIpO1xyXG4vLyBodHRwczovL3d3dy50eXBlc2NyaXB0bGFuZy5vcmcvZG9jcy9oYW5kYm9vay91dGlsaXR5LXR5cGVzLmh0bWwgUGljazxULEs+XHJcbi8vIGV4cG9ydCBjbGFzcyBTY2VuZTNEIGltcGxlbWVudHMgUGFydGlhbDxUaHJlZUdyYXBoaWNzPiB7XHJcbmNsYXNzIFNjZW5lM0Qge1xyXG4gICAgY29uc3RydWN0b3Ioc2NlbmVDb25maWcgPSB7fSkge1xyXG4gICAgICAgIHRoaXMuc2NlbmVDb25maWcgPSBzY2VuZUNvbmZpZztcclxuICAgICAgICAvLyBjb3JlIG1vZHVsZXMgZnJvbSB0aHJlZS1ncmFwaGljc1xyXG4gICAgICAgIHRoaXMuc2NlbmVzID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHRoaXMuX19jb25maWcgPSB7fTtcclxuICAgICAgICB0aGlzLl9pc1J1bm5pbmcgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9kZWNvbnN0cnVjdG9yRnVuY3Rpb25zID0gW107XHJcbiAgICAgICAgY29uc3QgeyBrZXkgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKCksIGVuYWJsZVhSID0gZmFsc2UgfSA9IHNjZW5lQ29uZmlnO1xyXG4gICAgICAgIHRoaXMuX19jb25maWcuc2NlbmVLZXkgPSBrZXk7XHJcbiAgICAgICAgdGhpcy5fX2NvbmZpZy5lbmFibGVYUiA9IGVuYWJsZVhSO1xyXG4gICAgfVxyXG4gICAgZ2V0IGRlY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgYWRkOiAoZm5jKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9kZWNvbnN0cnVjdG9yRnVuY3Rpb25zLnB1c2goZm5jKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICAvLyBAdHMtaWdub3JlXHJcbiAgICBpbml0aWFsaXplU2NlbmUocGx1Z2lucykge1xyXG4gICAgICAgIGNvbnN0IHsgcmVuZGVyZXIsIHBhcmVudCwgY2FudmFzLCBzY2VuZSwgc2NlbmVzLCBjYW1lcmEsIGNhY2hlLCBwaHlzaWNzLCBzY2VuZUNvbmZpZyB9ID0gcGx1Z2lucztcclxuICAgICAgICB0aGlzLnNjZW5lID0gc2NlbmU7XHJcbiAgICAgICAgdGhpcy5zY2VuZXMgPSBzY2VuZXM7XHJcbiAgICAgICAgdGhpcy5jYW1lcmEgPSBjYW1lcmE7XHJcbiAgICAgICAgdGhpcy5jYWNoZSA9IGNhY2hlO1xyXG4gICAgICAgIHRoaXMucGh5c2ljcyA9IHBoeXNpY3M7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xyXG4gICAgICAgIHRoaXMuY2FudmFzID0gY2FudmFzO1xyXG4gICAgICAgIGNvbnN0IHsgYXV0b1N0YXJ0LCB0ZXh0dXJlQW5pc290cm9weSB9ID0gc2NlbmVDb25maWc7XHJcbiAgICAgICAgLy8gcGx1Z2luc1xyXG4gICAgICAgIHRoaXMubG9hZCA9IG5ldyBQbHVnaW5zLkxvYWRlcnModGhpcy5jYWNoZSwgdGV4dHVyZUFuaXNvdHJvcHkpO1xyXG4gICAgICAgIHRoaXMubGlnaHRzID0gbmV3IFBsdWdpbnMuTGlnaHRzKHRoaXMuc2NlbmUpO1xyXG4gICAgICAgIHRoaXMudHJhbnNmb3JtID0gbmV3IFBsdWdpbnMuVHJhbnNmb3JtKHRoaXMuY2FtZXJhLCB0aGlzLnJlbmRlcmVyKTtcclxuICAgICAgICB0aGlzLmNzZyA9IG5ldyBQbHVnaW5zLkNTRyh0aGlzLnNjZW5lLCB0aGlzLnRyYW5zZm9ybSk7XHJcbiAgICAgICAgdGhpcy5oZWlnaHRNYXAgPSBuZXcgUGx1Z2lucy5IZWlnaHRNYXAodGhpcy5zY2VuZSk7XHJcbiAgICAgICAgdGhpcy5mYWN0b3JpZXMgPSBuZXcgUGx1Z2lucy5GYWN0b3JpZXModGhpcy5zY2VuZSk7XHJcbiAgICAgICAgdGhpcy5taXNjID0gbmV3IFBsdWdpbnMuTWlzYyh0aGlzLnNjZW5lLCB0aGlzLnJlbmRlcmVyLCB0aGlzLmZhY3Rvcmllcyk7XHJcbiAgICAgICAgdGhpcy53cyA9IG5ldyBQbHVnaW5zLldhcnBTcGVlZChzY2VuZSwgcmVuZGVyZXIsIGNhbWVyYSwgdGhpcy5saWdodHMsIHRoaXMucGh5c2ljcywgdGhpcy5sb2FkLCB0aGlzLmZhY3Rvcmllcyk7XHJcbiAgICAgICAgdGhpcy5taXhlcnMgPSBuZXcgUGx1Z2lucy5NaXhlcnMoKTtcclxuICAgICAgICB0aGlzLmNhbWVyYXMgPSBuZXcgUGx1Z2lucy5DYW1lcmFzKCk7XHJcbiAgICAgICAgdGhpcy5jbG9jayA9IG5ldyBpbmRleF8xLkNsb2NrKCk7XHJcbiAgICAgICAgLy8gYWRkIHZyIGNhbWVyYVxyXG4gICAgICAgIGlmICh0aGlzLl9fY29uZmlnLmVuYWJsZVhSKSB7XHJcbiAgICAgICAgICAgIHRoaXMud2ViWFIgPSBuZXcgUGx1Z2lucy5XZWJYUih0aGlzLnJlbmRlcmVyLCB0aGlzLnNjZW5lLCB0aGlzLmNhbWVyYSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChhdXRvU3RhcnQpXHJcbiAgICAgICAgICAgIHRoaXMuc3RhcnQodGhpcy5fX2NvbmZpZy5zY2VuZUtleSk7XHJcbiAgICB9XHJcbiAgICBnZXQgc2NlbmVLZXkoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX19jb25maWcuc2NlbmVLZXk7XHJcbiAgICB9XHJcbiAgICAvKiogRGVzdHJveXMgYSBvYmplY3QgYW5kIGl0cyBib2R5LiAqL1xyXG4gICAgZGVzdHJveShvYmopIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgKF9hID0gdGhpcy5waHlzaWNzKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZGVzdHJveShvYmouYm9keSk7XHJcbiAgICAgICAgdGhpcy5zY2VuZS5yZW1vdmUob2JqKTtcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgb2JqID0gbnVsbDtcclxuICAgIH1cclxuICAgIHdhcnBTcGVlZCguLi5mZWF0dXJlcykge1xyXG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCB0aGlzLndzLndhcnBTcGVlZCguLi5mZWF0dXJlcyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBnZXQgYW5pbWF0aW9uTWl4ZXJzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1peGVycy5taXhlcnM7XHJcbiAgICB9XHJcbiAgICBnZXQgbWFrZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5mYWN0b3JpZXMubWFrZTtcclxuICAgIH1cclxuICAgIGdldCBhZGQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZmFjdG9yaWVzLmFkZDtcclxuICAgIH1cclxuICAgIGhhdmVTb21lRnVuKG51bWJlck9mRWxlbWVudHMgPSAyMCkge1xyXG4gICAgICAgIFBsdWdpbnMuSGF2ZVNvbWVGdW4obnVtYmVyT2ZFbGVtZW50cywgdGhpcy5waHlzaWNzKTtcclxuICAgIH1cclxuICAgIGlzUnVubmluZygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faXNSdW5uaW5nO1xyXG4gICAgfVxyXG4gICAgc3RhcnQoa2V5LCBkYXRhKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgICAgIC8vIHN0YXJ0IGFub3RoZXIgc2NlbmVcclxuICAgICAgICAgICAgLy8gYW5kIHN0b3AgdGhpcyBvbmVcclxuICAgICAgICAgICAgaWYgKGtleSAmJiBrZXkgIT09IHRoaXMuX19jb25maWcuc2NlbmVLZXkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RvcCgpO1xyXG4gICAgICAgICAgICAgICAgKF9hID0gdGhpcy5zY2VuZXMuZ2V0KGtleSkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5fc3RhcnQoZGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zdGFydChkYXRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgX3N0YXJ0KGRhdGEpIHtcclxuICAgICAgICB2YXIgX2EsIF9iO1xyXG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgICAgIHlpZWxkICgoX2IgPSAoX2EgPSB0aGlzKS5pbml0KSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuY2FsbChfYSwgZGF0YSkpO1xyXG4gICAgICAgICAgICB5aWVsZCB0aGlzLl9wcmVsb2FkKCk7XHJcbiAgICAgICAgICAgIHlpZWxkIHRoaXMuX2NyZWF0ZSgpO1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnc3RhcnQnKVxyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldEFuaW1hdGlvbkxvb3AoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLl9pc1J1bm5pbmcgPSB0cnVlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmVzdGFydChkYXRhKSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICAgICAgdGhpcy5zdG9wKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhcnQodGhpcy5fX2NvbmZpZy5zY2VuZUtleSwgZGF0YSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBzdG9wKCkge1xyXG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2lzUnVubmluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldEFuaW1hdGlvbkxvb3AobnVsbCk7XHJcbiAgICAgICAgICAgIC8vIHJlc2V0IGNsb2NrXHJcbiAgICAgICAgICAgIHRoaXMuY2xvY2suc3RhcnQoKTtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9kZWNvbnN0cnVjdG9yRnVuY3Rpb25zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB5aWVsZCB0aGlzLl9kZWNvbnN0cnVjdG9yRnVuY3Rpb25zW2ldKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5fZGVjb25zdHJ1Y3RvckZ1bmN0aW9ucyA9IFtdO1xyXG4gICAgICAgICAgICAvLyBkZXN0cm95IGFsbCByaWdpZCBib2RpZXNcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMucGh5c2ljcy5yaWdpZEJvZGllcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5waHlzaWNzLmRlc3Ryb3kodGhpcy5waHlzaWNzLnJpZ2lkQm9kaWVzW2ldKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBkZXN0cm95IGFsbCB0aHJlZSBvYmplY3RzXHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSB0aGlzLnNjZW5lLmNoaWxkcmVuLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjZW5lLnJlbW92ZSh0aGlzLnNjZW5lLmNoaWxkcmVuW2ldKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgc2V0U2l6ZSh3aWR0aCwgaGVpZ2h0KSB7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTaXplKHdpZHRoLCBoZWlnaHQpO1xyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICBpZiAodHlwZW9mIHRoaXMuY2FtZXJhLmFzcGVjdCAhPT0gJ3VuZGVmaW5lZCcpXHJcbiAgICAgICAgICAgIHRoaXMuY2FtZXJhLmFzcGVjdCA9IHdpZHRoIC8gaGVpZ2h0O1xyXG4gICAgICAgIHRoaXMuY2FtZXJhLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKTtcclxuICAgIH1cclxuICAgIHNldFBpeGVsUmF0aW8ocmF0aW8pIHtcclxuICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFBpeGVsUmF0aW8ocmF0aW8pO1xyXG4gICAgfVxyXG4gICAgLy8gcHVibGljIGdldCBjb250cm9scygpIHtcclxuICAgIC8vICAgcmV0dXJuIHtcclxuICAgIC8vICAgICBwb2ludGVyRHJhZzogKGF1dG9TdGFydCA9IHRydWUpID0+IG5ldyBQb2ludGVyRHJhZyh0aGlzLmNhbnZhcywgYXV0b1N0YXJ0KSxcclxuICAgIC8vICAgICBwb2ludGVyTG9jazogKGF1dG9Mb2NrID0gdHJ1ZSkgPT4gbmV3IFBvaW50ZXJMb2NrKHRoaXMuY2FudmFzLCBhdXRvTG9jayksXHJcbiAgICAvLyAgICAgam95c3RpY2s6ICgpID0+IG5ldyBKb3lTdGljaygpLFxyXG4gICAgLy8gICAgIGZpcnN0UGVyc29uOiAodGFyZ2V0OiBFeHRlbmRlZE9iamVjdDNELCBjb25maWc6IEZpcnN0UGVyc29uQ29udHJvbHNDb25maWcgPSB7fSkgPT5cclxuICAgIC8vICAgICAgIG5ldyBGaXJzdFBlcnNvbkNvbnRyb2xzKHRoaXMuY2FtZXJhLCB0YXJnZXQsIGNvbmZpZyksXHJcbiAgICAvLyAgICAgdGhpcmRQZXJzb246ICh0YXJnZXQ6IEV4dGVuZGVkT2JqZWN0M0QsIGNvbmZpZzogVGhpcmRQZXJzb25Db250cm9sc0NvbmZpZyA9IHt9KSA9PlxyXG4gICAgLy8gICAgICAgbmV3IFRoaXJkUGVyc29uQ29udHJvbHModGhpcy5jYW1lcmEsIHRhcmdldCwgY29uZmlnKVxyXG4gICAgLy8gICB9XHJcbiAgICAvLyB9XHJcbiAgICAvLyBAdHMtaWdub3JlXHJcbiAgICBpbml0KGRhdGEgPSB7fSkgeyB9XHJcbiAgICBwcmVsb2FkKCkgeyB9XHJcbiAgICBjcmVhdGUoKSB7IH1cclxuICAgIHVwZGF0ZShfdGltZSwgX2RlbHRhKSB7IH1cclxuICAgIF9wcmVsb2FkKCkge1xyXG4gICAgICAgIHZhciBfYSwgX2I7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICAgICAgeWllbGQgKChfYiA9IChfYSA9IHRoaXMpLnByZWxvYWQpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5jYWxsKF9hKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBfY3JlYXRlKCkge1xyXG4gICAgICAgIHZhciBfYSwgX2I7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICAgICAgeWllbGQgKChfYiA9IChfYSA9IHRoaXMpLmNyZWF0ZSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmNhbGwoX2EpKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIF91cGRhdGUoKSB7XHJcbiAgICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kO1xyXG4gICAgICAgIGNvbnN0IGRlbHRhID0gdGhpcy5jbG9jay5nZXREZWx0YSgpICogMTAwMDtcclxuICAgICAgICBjb25zdCB0aW1lID0gdGhpcy5jbG9jay5nZXRFbGFwc2VkVGltZSgpO1xyXG4gICAgICAgIChfYiA9IChfYSA9IHRoaXMpLnVwZGF0ZSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmNhbGwoX2EsIHBhcnNlRmxvYXQodGltZS50b0ZpeGVkKDMpKSwgcGFyc2VJbnQoZGVsdGEudG9TdHJpbmcoKSkpO1xyXG4gICAgICAgIChfYyA9IHRoaXMucGh5c2ljcykgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLnVwZGF0ZShkZWx0YSk7XHJcbiAgICAgICAgKF9kID0gdGhpcy5waHlzaWNzKSA9PT0gbnVsbCB8fCBfZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2QudXBkYXRlRGVidWdnZXIoKTtcclxuICAgICAgICB0aGlzLmFuaW1hdGlvbk1peGVycy51cGRhdGUoZGVsdGEpO1xyXG4gICAgICAgIGlmICh0aGlzLmNvbXBvc2VyKVxyXG4gICAgICAgICAgICB0aGlzLmNvbXBvc2VyLnJlbmRlcigpO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5yZW5kZXIodGhpcy5zY2VuZSwgdGhpcy5jYW1lcmEpO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydHMuU2NlbmUzRCA9IFNjZW5lM0Q7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNjZW5lM2QuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbi8qKlxyXG4gKiBAYXV0aG9yICAgICAgIFlhbm5pY2sgRGV1YmVsIChodHRwczovL2dpdGh1Yi5jb20veWFuZGV1KVxyXG4gKiBAY29weXJpZ2h0ICAgIENvcHlyaWdodCAoYykgMjAyMCBZYW5uaWNrIERldWJlbDsgUHJvamVjdCBVcmw6IGh0dHBzOi8vZ2l0aHViLmNvbS9lbmFibGUzZC9lbmFibGUzZFxyXG4gKiBAbGljZW5zZSAgICAgIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZW5hYmxlM2QvZW5hYmxlM2QvYmxvYi9tYXN0ZXIvTElDRU5TRXxHTlUgR1BMdjN9XHJcbiAqL1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuQ29sbGlzaW9uRXZlbnRzID0gdm9pZCAwO1xyXG5jb25zdCBldmVudGVtaXR0ZXIzXzEgPSByZXF1aXJlKFwiZXZlbnRlbWl0dGVyM1wiKTtcclxuY2xhc3MgQ29sbGlzaW9uRXZlbnRzIGV4dGVuZHMgZXZlbnRlbWl0dGVyM18xLkV2ZW50RW1pdHRlciB7XHJcbiAgICBhZGRDb2xsaWRlcihvYmplY3QxLCBvYmplY3QyLCBldmVudENhbGxiYWNrKSB7XHJcbiAgICAgICAgaWYgKCFvYmplY3QxLmJvZHkgfHwgIW9iamVjdDIuYm9keSlcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIG9iamVjdDEuYm9keS5jaGVja0NvbGxpc2lvbnMgPSB0cnVlO1xyXG4gICAgICAgIG9iamVjdDIuYm9keS5jaGVja0NvbGxpc2lvbnMgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMub24oJ2NvbGxpc2lvbicsIChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgIHZhciBfYSwgX2I7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgYm9kaWVzLCBldmVudCB9ID0gZGF0YTtcclxuICAgICAgICAgICAgaWYgKCgoX2EgPSBib2RpZXNbMF0pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5uYW1lKSAmJiAoKF9iID0gYm9kaWVzWzFdKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IubmFtZSkgJiYgKG9iamVjdDEgPT09IG51bGwgfHwgb2JqZWN0MSA9PT0gdm9pZCAwID8gdm9pZCAwIDogb2JqZWN0MS5uYW1lKSAmJiAob2JqZWN0MiA9PT0gbnVsbCB8fCBvYmplY3QyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvYmplY3QyLm5hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYm9kaWVzWzBdLm5hbWUgPT09IG9iamVjdDEubmFtZSAmJiBib2RpZXNbMV0ubmFtZSA9PT0gb2JqZWN0Mi5uYW1lKVxyXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50Q2FsbGJhY2soZXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoYm9kaWVzWzFdLm5hbWUgPT09IG9iamVjdDEubmFtZSAmJiBib2RpZXNbMF0ubmFtZSA9PT0gb2JqZWN0Mi5uYW1lKVxyXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50Q2FsbGJhY2soZXZlbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0cy5Db2xsaXNpb25FdmVudHMgPSBDb2xsaXNpb25FdmVudHM7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbGxpc2lvbkV2ZW50cy5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcclxuLyoqXHJcbiAqIEBhdXRob3IgICAgICAgWWFubmljayBEZXViZWwgKGh0dHBzOi8vZ2l0aHViLmNvbS95YW5kZXUpXHJcbiAqIEBjb3B5cmlnaHQgICAgQ29weXJpZ2h0IChjKSAyMDIwIFlhbm5pY2sgRGV1YmVsOyBQcm9qZWN0IFVybDogaHR0cHM6Ly9naXRodWIuY29tL2VuYWJsZTNkL2VuYWJsZTNkXHJcbiAqIEBsaWNlbnNlICAgICAge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9lbmFibGUzZC9lbmFibGUzZC9ibG9iL21hc3Rlci9MSUNFTlNFfEdOVSBHUEx2M31cclxuICovXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuY2xhc3MgQ29uc3RyYWludHMge1xyXG4gICAgY29uc3RydWN0b3Iod29ybGRUcmFuc2Zvcm0sIHBoeXNpY3NXb3JsZCkge1xyXG4gICAgICAgIHRoaXMud29ybGRUcmFuc2Zvcm0gPSB3b3JsZFRyYW5zZm9ybTtcclxuICAgICAgICB0aGlzLnBoeXNpY3NXb3JsZCA9IHBoeXNpY3NXb3JsZDtcclxuICAgICAgICB0aGlzLnRtcEJ0VmVjdG9yMyA9IG5ldyBBbW1vLmJ0VmVjdG9yMygpO1xyXG4gICAgfVxyXG4gICAgdG9BbW1vVjModiwgZCA9IDApIHtcclxuICAgICAgICByZXR1cm4gbmV3IEFtbW8uYnRWZWN0b3IzKHR5cGVvZiAodiA9PT0gbnVsbCB8fCB2ID09PSB2b2lkIDAgPyB2b2lkIDAgOiB2LngpICE9PSAndW5kZWZpbmVkJyA/IHYueCA6IGQsIHR5cGVvZiAodiA9PT0gbnVsbCB8fCB2ID09PSB2b2lkIDAgPyB2b2lkIDAgOiB2LnkpICE9PSAndW5kZWZpbmVkJyA/IHYueSA6IGQsIHR5cGVvZiAodiA9PT0gbnVsbCB8fCB2ID09PSB2b2lkIDAgPyB2b2lkIDAgOiB2LnopICE9PSAndW5kZWZpbmVkJyA/IHYueiA6IGQpO1xyXG4gICAgfVxyXG4gICAgZ2V0IGFkZENvbnN0cmFpbnRzKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGxvY2s6IChib2R5QSwgYm9keUIsIGRpc2FibGVDb2xsaXNpb25zQmV0d2VlbkxpbmtlZEJvZGllcykgPT4gdGhpcy5sb2NrKGJvZHlBLCBib2R5QiwgZGlzYWJsZUNvbGxpc2lvbnNCZXR3ZWVuTGlua2VkQm9kaWVzKSxcclxuICAgICAgICAgICAgZml4ZWQ6IChib2R5QSwgYm9keUIsIGRpc2FibGVDb2xsaXNpb25zQmV0d2VlbkxpbmtlZEJvZGllcykgPT4gdGhpcy5maXhlZChib2R5QSwgYm9keUIsIGRpc2FibGVDb2xsaXNpb25zQmV0d2VlbkxpbmtlZEJvZGllcyksXHJcbiAgICAgICAgICAgIHBvaW50VG9Qb2ludDogKGJvZHlBLCBib2R5QiwgY29uZmlnLCBkaXNhYmxlQ29sbGlzaW9uc0JldHdlZW5MaW5rZWRCb2RpZXMpID0+IHRoaXMucG9pbnRUb1BvaW50KGJvZHlBLCBib2R5QiwgY29uZmlnLCBkaXNhYmxlQ29sbGlzaW9uc0JldHdlZW5MaW5rZWRCb2RpZXMpLFxyXG4gICAgICAgICAgICBoaW5nZTogKGJvZHlBLCBib2R5QiwgY29uZmlnLCBkaXNhYmxlQ29sbGlzaW9uc0JldHdlZW5MaW5rZWRCb2RpZXMpID0+IHRoaXMuaGluZ2UoYm9keUEsIGJvZHlCLCBjb25maWcsIGRpc2FibGVDb2xsaXNpb25zQmV0d2VlbkxpbmtlZEJvZGllcyksXHJcbiAgICAgICAgICAgIHNsaWRlcjogKGJvZHlBLCBib2R5QiwgY29uZmlnID0ge30sIGRpc2FibGVDb2xsaXNpb25zQmV0d2VlbkxpbmtlZEJvZGllcykgPT4gdGhpcy5zbGlkZXIoYm9keUEsIGJvZHlCLCBjb25maWcsIGRpc2FibGVDb2xsaXNpb25zQmV0d2VlbkxpbmtlZEJvZGllcyksXHJcbiAgICAgICAgICAgIHNwcmluZzogKGJvZHlBLCBib2R5QiwgY29uZmlnID0ge30sIGRpc2FibGVDb2xsaXNpb25zQmV0d2VlbkxpbmtlZEJvZGllcykgPT4gdGhpcy5zcHJpbmcoYm9keUEsIGJvZHlCLCBjb25maWcsIGRpc2FibGVDb2xsaXNpb25zQmV0d2VlbkxpbmtlZEJvZGllcyksXHJcbiAgICAgICAgICAgIGNvbmVUd2lzdDogKGJvZHlBLCBib2R5QiwgY29uZmlnID0geyBmcmFtZUE6IHt9LCBmcmFtZUI6IHt9IH0sIGRpc2FibGVDb2xsaXNpb25zQmV0d2VlbkxpbmtlZEJvZGllcykgPT4gdGhpcy5jb25lVHdpc3QoYm9keUEsIGJvZHlCLCBjb25maWcsIGRpc2FibGVDb2xsaXNpb25zQmV0d2VlbkxpbmtlZEJvZGllcyksXHJcbiAgICAgICAgICAgIGRvZjogKGJvZHlBLCBib2R5QiwgY29uZmlnLCBkaXNhYmxlQ29sbGlzaW9uc0JldHdlZW5MaW5rZWRCb2RpZXMpID0+IHRoaXMuZG9mKGJvZHlBLCBib2R5QiwgY29uZmlnLCBkaXNhYmxlQ29sbGlzaW9uc0JldHdlZW5MaW5rZWRCb2RpZXMpXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIGdldFRyYW5zZm9ybShib2R5QSwgYm9keUIsIG9mZnNldCA9IHsgeDogMCwgeTogMCwgejogMCB9LCBjZW50ZXIgPSBmYWxzZSkge1xyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICBvZmZzZXQgPSBPYmplY3QuYXNzaWduKHsgeDogMCwgeTogMCwgejogMCB9LCBvZmZzZXQpO1xyXG4gICAgICAgIGNvbnN0IGNlbnRlclZlY3RvciA9ICh2MSwgdjIpID0+IHtcclxuICAgICAgICAgICAgdmFyIGR4ID0gKHYxLngoKSAtIHYyLngoKSkgLyAyICsgb2Zmc2V0Lng7XHJcbiAgICAgICAgICAgIHZhciBkeSA9ICh2MS55KCkgLSB2Mi55KCkpIC8gMiArIG9mZnNldC55O1xyXG4gICAgICAgICAgICB2YXIgZHogPSAodjEueigpIC0gdjIueigpKSAvIDIgKyBvZmZzZXQuejtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBBbW1vLmJ0VmVjdG9yMyhkeCwgZHksIGR6KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbnN0IHRyYW5zZm9ybUIgPSBuZXcgQW1tby5idFRyYW5zZm9ybSgpO1xyXG4gICAgICAgIHRyYW5zZm9ybUIuc2V0SWRlbnRpdHkoKTtcclxuICAgICAgICBpZiAoIWNlbnRlcikge1xyXG4gICAgICAgICAgICAvLyBvZmZzZXRcclxuICAgICAgICAgICAgdHJhbnNmb3JtQi5zZXRPcmlnaW4obmV3IEFtbW8uYnRWZWN0b3IzKG9mZnNldC54LCBvZmZzZXQueSwgb2Zmc2V0LnopKTtcclxuICAgICAgICAgICAgY29uc3QgdHJhbnNmb3JtQSA9IGJvZHlBXHJcbiAgICAgICAgICAgICAgICAuZ2V0Q2VudGVyT2ZNYXNzVHJhbnNmb3JtKClcclxuICAgICAgICAgICAgICAgIC5pbnZlcnNlKClcclxuICAgICAgICAgICAgICAgIC5vcF9tdWwoYm9keUIuZ2V0V29ybGRUcmFuc2Zvcm0oKSlcclxuICAgICAgICAgICAgICAgIC5vcF9tdWwodHJhbnNmb3JtQik7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHRyYW5zZm9ybUE6IHRyYW5zZm9ybUEsIHRyYW5zZm9ybUI6IHRyYW5zZm9ybUIgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNlbnRlciA9IGNlbnRlclZlY3Rvcihib2R5QS5nZXRXb3JsZFRyYW5zZm9ybSgpLmdldE9yaWdpbigpLCBib2R5Qi5nZXRXb3JsZFRyYW5zZm9ybSgpLmdldE9yaWdpbigpKTtcclxuICAgICAgICAgICAgY29uc3QgdHJhbnNmb3JtQiA9IG5ldyBBbW1vLmJ0VHJhbnNmb3JtKCk7XHJcbiAgICAgICAgICAgIHRyYW5zZm9ybUIuc2V0SWRlbnRpdHkoKTtcclxuICAgICAgICAgICAgdHJhbnNmb3JtQi5zZXRPcmlnaW4oY2VudGVyKTtcclxuICAgICAgICAgICAgY29uc3QgdHJhbnNmb3JtQSA9IGJvZHlBXHJcbiAgICAgICAgICAgICAgICAuZ2V0Q2VudGVyT2ZNYXNzVHJhbnNmb3JtKClcclxuICAgICAgICAgICAgICAgIC5pbnZlcnNlKClcclxuICAgICAgICAgICAgICAgIC5vcF9tdWwoYm9keUIuZ2V0V29ybGRUcmFuc2Zvcm0oKSk7XHJcbiAgICAgICAgICAgIHRyYW5zZm9ybUEub3BfbXVsKHRyYW5zZm9ybUIpO1xyXG4gICAgICAgICAgICByZXR1cm4geyB0cmFuc2Zvcm1BOiB0cmFuc2Zvcm1BLCB0cmFuc2Zvcm1COiB0cmFuc2Zvcm1CIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgbG9jayhib2R5QSwgYm9keUIsIGRpc2FibGVDb2xsaXNpb25zQmV0d2VlbkxpbmtlZEJvZGllcyA9IHRydWUpIHtcclxuICAgICAgICBjb25zdCB6ZXJvID0geyB4OiAwLCB5OiAwLCB6OiAwIH07XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9mKGJvZHlBLCBib2R5QiwgeyBhbmd1bGFyTG93ZXJMaW1pdDogemVybywgYW5ndWxhclVwcGVyTGltaXQ6IHplcm8gfSwgZGlzYWJsZUNvbGxpc2lvbnNCZXR3ZWVuTGlua2VkQm9kaWVzKTtcclxuICAgIH1cclxuICAgIGZpeGVkKGJvZHlBLCBib2R5QiwgZGlzYWJsZUNvbGxpc2lvbnNCZXR3ZWVuTGlua2VkQm9kaWVzID0gdHJ1ZSkge1xyXG4gICAgICAgIGNvbnN0IHRyYW5zZm9ybSA9IHRoaXMuZ2V0VHJhbnNmb3JtKGJvZHlBLmFtbW8sIGJvZHlCLmFtbW8pO1xyXG4gICAgICAgIHRyYW5zZm9ybS50cmFuc2Zvcm1BLnNldFJvdGF0aW9uKGJvZHlBLmFtbW8uZ2V0V29ybGRUcmFuc2Zvcm0oKS5nZXRSb3RhdGlvbigpKTtcclxuICAgICAgICB0cmFuc2Zvcm0udHJhbnNmb3JtQi5zZXRSb3RhdGlvbihib2R5Qi5hbW1vLmdldFdvcmxkVHJhbnNmb3JtKCkuZ2V0Um90YXRpb24oKSk7XHJcbiAgICAgICAgY29uc3QgY29uc3RyYWludCA9IG5ldyBBbW1vLmJ0Rml4ZWRDb25zdHJhaW50KGJvZHlBLmFtbW8sIGJvZHlCLmFtbW8sIHRyYW5zZm9ybS50cmFuc2Zvcm1BLCB0cmFuc2Zvcm0udHJhbnNmb3JtQik7XHJcbiAgICAgICAgdGhpcy5waHlzaWNzV29ybGQuYWRkQ29uc3RyYWludChjb25zdHJhaW50LCBkaXNhYmxlQ29sbGlzaW9uc0JldHdlZW5MaW5rZWRCb2RpZXMpO1xyXG4gICAgICAgIHJldHVybiBjb25zdHJhaW50O1xyXG4gICAgfVxyXG4gICAgcG9pbnRUb1BvaW50KGJvZHlBLCBib2R5QiwgY29uZmlnID0ge30sIGRpc2FibGVDb2xsaXNpb25zQmV0d2VlbkxpbmtlZEJvZGllcyA9IHRydWUpIHtcclxuICAgICAgICBjb25zdCB7IHBpdm90QSwgcGl2b3RCIH0gPSBjb25maWc7XHJcbiAgICAgICAgY29uc3QgcGl2b3RWMyA9IG5ldyBBbW1vLmJ0VmVjdG9yMygocGl2b3RBID09PSBudWxsIHx8IHBpdm90QSA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGl2b3RBLngpIHx8IDAsIChwaXZvdEEgPT09IG51bGwgfHwgcGl2b3RBID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwaXZvdEEueSkgfHwgMCwgKHBpdm90QSA9PT0gbnVsbCB8fCBwaXZvdEEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBpdm90QS56KSB8fCAwKTtcclxuICAgICAgICBjb25zdCB0YXJnZXRQaXZvdFYzID0gbmV3IEFtbW8uYnRWZWN0b3IzKChwaXZvdEIgPT09IG51bGwgfHwgcGl2b3RCID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwaXZvdEIueCkgfHwgMCwgKHBpdm90QiA9PT0gbnVsbCB8fCBwaXZvdEIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBpdm90Qi55KSB8fCAwLCAocGl2b3RCID09PSBudWxsIHx8IHBpdm90QiA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGl2b3RCLnopIHx8IDApO1xyXG4gICAgICAgIGNvbnN0IGNvbnN0cmFpbnQgPSBuZXcgQW1tby5idFBvaW50MlBvaW50Q29uc3RyYWludChib2R5QS5hbW1vLCBib2R5Qi5hbW1vLCBwaXZvdFYzLCB0YXJnZXRQaXZvdFYzKTtcclxuICAgICAgICB0aGlzLnBoeXNpY3NXb3JsZC5hZGRDb25zdHJhaW50KGNvbnN0cmFpbnQsIGRpc2FibGVDb2xsaXNpb25zQmV0d2VlbkxpbmtlZEJvZGllcyk7XHJcbiAgICAgICAgcmV0dXJuIGNvbnN0cmFpbnQ7XHJcbiAgICB9XHJcbiAgICBoaW5nZShib2R5QSwgYm9keUIsIGNvbmZpZyA9IHt9LCBkaXNhYmxlQ29sbGlzaW9uc0JldHdlZW5MaW5rZWRCb2RpZXMgPSB0cnVlKSB7XHJcbiAgICAgICAgY29uc3QgeyBwaXZvdEEsIHBpdm90QiwgYXhpc0EsIGF4aXNCIH0gPSBjb25maWc7XHJcbiAgICAgICAgY29uc3QgcGl2b3RWMyA9IG5ldyBBbW1vLmJ0VmVjdG9yMygocGl2b3RBID09PSBudWxsIHx8IHBpdm90QSA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGl2b3RBLngpIHx8IDAsIChwaXZvdEEgPT09IG51bGwgfHwgcGl2b3RBID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwaXZvdEEueSkgfHwgMCwgKHBpdm90QSA9PT0gbnVsbCB8fCBwaXZvdEEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBpdm90QS56KSB8fCAwKTtcclxuICAgICAgICBjb25zdCB0YXJnZXRQaXZvdFYzID0gbmV3IEFtbW8uYnRWZWN0b3IzKChwaXZvdEIgPT09IG51bGwgfHwgcGl2b3RCID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwaXZvdEIueCkgfHwgMCwgKHBpdm90QiA9PT0gbnVsbCB8fCBwaXZvdEIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBpdm90Qi55KSB8fCAwLCAocGl2b3RCID09PSBudWxsIHx8IHBpdm90QiA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGl2b3RCLnopIHx8IDApO1xyXG4gICAgICAgIGNvbnN0IGF4aXNWMyA9IG5ldyBBbW1vLmJ0VmVjdG9yMygoYXhpc0EgPT09IG51bGwgfHwgYXhpc0EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGF4aXNBLngpIHx8IDAsIChheGlzQSA9PT0gbnVsbCB8fCBheGlzQSA9PT0gdm9pZCAwID8gdm9pZCAwIDogYXhpc0EueSkgfHwgMCwgKGF4aXNBID09PSBudWxsIHx8IGF4aXNBID09PSB2b2lkIDAgPyB2b2lkIDAgOiBheGlzQS56KSB8fCAwKTtcclxuICAgICAgICBjb25zdCB0YXJnZXRBeGlzVjMgPSBuZXcgQW1tby5idFZlY3RvcjMoKGF4aXNCID09PSBudWxsIHx8IGF4aXNCID09PSB2b2lkIDAgPyB2b2lkIDAgOiBheGlzQi54KSB8fCAwLCAoYXhpc0IgPT09IG51bGwgfHwgYXhpc0IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGF4aXNCLnkpIHx8IDAsIChheGlzQiA9PT0gbnVsbCB8fCBheGlzQiA9PT0gdm9pZCAwID8gdm9pZCAwIDogYXhpc0IueikgfHwgMCk7XHJcbiAgICAgICAgY29uc3QgY29uc3RyYWludCA9IG5ldyBBbW1vLmJ0SGluZ2VDb25zdHJhaW50KGJvZHlBLmFtbW8sIGJvZHlCLmFtbW8sIHBpdm90VjMsIHRhcmdldFBpdm90VjMsIGF4aXNWMywgdGFyZ2V0QXhpc1YzLCB0cnVlKTtcclxuICAgICAgICB0aGlzLnBoeXNpY3NXb3JsZC5hZGRDb25zdHJhaW50KGNvbnN0cmFpbnQsIGRpc2FibGVDb2xsaXNpb25zQmV0d2VlbkxpbmtlZEJvZGllcyk7XHJcbiAgICAgICAgcmV0dXJuIGNvbnN0cmFpbnQ7XHJcbiAgICB9XHJcbiAgICAvLyBodHRwczovL3B5YnVsbGV0Lm9yZy9CdWxsZXQvcGhwQkIzL3ZpZXd0b3BpYy5waHA/Zj05JnQ9MTI2OTAmcD00MjE1MiZoaWxpdD1idFNsaWRlckNvbnN0cmFpbnQjcDQyMTUyXHJcbiAgICBzbGlkZXIoYm9keUEsIGJvZHlCLCBjb25maWcgPSB7fSwgZGlzYWJsZUNvbGxpc2lvbnNCZXR3ZWVuTGlua2VkQm9kaWVzID0gdHJ1ZSkge1xyXG4gICAgICAgIGNvbnN0IHRyYW5zZm9ybSA9IHRoaXMuZ2V0VHJhbnNmb3JtKGJvZHlBLmFtbW8sIGJvZHlCLmFtbW8pO1xyXG4gICAgICAgIGNvbnN0IHsgZnJhbWVBID0ge30sIGZyYW1lQiA9IHt9LCBsaW5lYXJMb3dlckxpbWl0OiBsbGwgPSAwLCBsaW5lYXJVcHBlckxpbWl0OiBsdWwgPSAwLCBhbmd1bGFyTG93ZXJMaW1pdDogYWxsID0gMCwgYW5ndWxhclVwcGVyTGltaXQ6IGF1bCA9IDAgfSA9IGNvbmZpZztcclxuICAgICAgICBjb25zdCByb3RhdGlvbkEgPSB0cmFuc2Zvcm0udHJhbnNmb3JtQS5nZXRSb3RhdGlvbigpO1xyXG4gICAgICAgIHJvdGF0aW9uQS5zZXRFdWxlclpZWChmcmFtZUEueCB8fCAwLCBmcmFtZUEueSB8fCAwLCBmcmFtZUEueiB8fCAwKTtcclxuICAgICAgICB0cmFuc2Zvcm0udHJhbnNmb3JtQS5zZXRSb3RhdGlvbihyb3RhdGlvbkEpO1xyXG4gICAgICAgIGNvbnN0IHJvdGF0aW9uQiA9IHRyYW5zZm9ybS50cmFuc2Zvcm1CLmdldFJvdGF0aW9uKCk7XHJcbiAgICAgICAgcm90YXRpb25CLnNldEV1bGVyWllYKGZyYW1lQi54IHx8IDAsIGZyYW1lQi55IHx8IDAsIGZyYW1lQi56IHx8IDApO1xyXG4gICAgICAgIHRyYW5zZm9ybS50cmFuc2Zvcm1CLnNldFJvdGF0aW9uKHJvdGF0aW9uQik7XHJcbiAgICAgICAgY29uc3QgY29uc3RyYWludCA9IG5ldyBBbW1vLmJ0U2xpZGVyQ29uc3RyYWludChib2R5QS5hbW1vLCBib2R5Qi5hbW1vLCB0cmFuc2Zvcm0udHJhbnNmb3JtQSwgdHJhbnNmb3JtLnRyYW5zZm9ybUIsIHRydWUpO1xyXG4gICAgICAgIGNvbnN0cmFpbnQuc2V0TG93ZXJMaW5MaW1pdChsbGwpO1xyXG4gICAgICAgIGNvbnN0cmFpbnQuc2V0VXBwZXJMaW5MaW1pdChsdWwpO1xyXG4gICAgICAgIGNvbnN0cmFpbnQuc2V0TG93ZXJBbmdMaW1pdChhbGwpO1xyXG4gICAgICAgIGNvbnN0cmFpbnQuc2V0VXBwZXJBbmdMaW1pdChhdWwpO1xyXG4gICAgICAgIHRoaXMucGh5c2ljc1dvcmxkLmFkZENvbnN0cmFpbnQoY29uc3RyYWludCwgZGlzYWJsZUNvbGxpc2lvbnNCZXR3ZWVuTGlua2VkQm9kaWVzKTtcclxuICAgICAgICByZXR1cm4gY29uc3RyYWludDtcclxuICAgIH1cclxuICAgIHNwcmluZyhib2R5QSwgYm9keUIsIGNvbmZpZyA9IHt9LCBkaXNhYmxlQ29sbGlzaW9uc0JldHdlZW5MaW5rZWRCb2RpZXMgPSB0cnVlKSB7XHJcbiAgICAgICAgY29uc3QgeyBzdGlmZm5lc3MgPSA1MCwgZGFtcGluZyA9IDAuMDEsIGFuZ3VsYXJMb2NrID0gZmFsc2UsIGxpbmVhckxvd2VyTGltaXQ6IGxsbCA9IHt9LCBsaW5lYXJVcHBlckxpbWl0OiBsdWwgPSB7fSwgYW5ndWxhckxvd2VyTGltaXQ6IGFsbCA9IHt9LCBhbmd1bGFyVXBwZXJMaW1pdDogYXVsID0ge30sIG9mZnNldCA9IHt9LCBjZW50ZXIgPSBmYWxzZSwgZW5hYmxlU3ByaW5nID0gdHJ1ZSB9ID0gY29uZmlnO1xyXG4gICAgICAgIGNvbnN0IG9mZiA9IE9iamVjdC5hc3NpZ24oeyB4OiAwLCB5OiAwLCB6OiAwIH0sIG9mZnNldCk7XHJcbiAgICAgICAgY29uc3QgdHJhbnNmb3JtID0gdGhpcy5nZXRUcmFuc2Zvcm0oYm9keUEuYW1tbywgYm9keUIuYW1tbywgb2ZmLCBjZW50ZXIpO1xyXG4gICAgICAgIGNvbnN0IGNvbnN0cmFpbnQgPSBuZXcgQW1tby5idEdlbmVyaWM2RG9mU3ByaW5nQ29uc3RyYWludChib2R5QS5hbW1vLCBib2R5Qi5hbW1vLCB0cmFuc2Zvcm0udHJhbnNmb3JtQSwgdHJhbnNmb3JtLnRyYW5zZm9ybUIsIHRydWUpO1xyXG4gICAgICAgIHRoaXMudG1wQnRWZWN0b3IzLnNldFZhbHVlKGxsbC54IHx8IDAsIGxsbC55IHx8IDAsIGxsbC56IHx8IDApO1xyXG4gICAgICAgIGNvbnN0cmFpbnQuc2V0TGluZWFyTG93ZXJMaW1pdCh0aGlzLnRtcEJ0VmVjdG9yMyk7XHJcbiAgICAgICAgdGhpcy50bXBCdFZlY3RvcjMuc2V0VmFsdWUobHVsLnggfHwgMCwgbHVsLnkgfHwgMCwgbHVsLnogfHwgMCk7XHJcbiAgICAgICAgY29uc3RyYWludC5zZXRMaW5lYXJVcHBlckxpbWl0KHRoaXMudG1wQnRWZWN0b3IzKTtcclxuICAgICAgICBpZiAoYW5ndWxhckxvY2spIHtcclxuICAgICAgICAgICAgdGhpcy50bXBCdFZlY3RvcjMuc2V0VmFsdWUoMCwgMCwgMCk7XHJcbiAgICAgICAgICAgIGNvbnN0cmFpbnQuc2V0QW5ndWxhckxvd2VyTGltaXQodGhpcy50bXBCdFZlY3RvcjMpO1xyXG4gICAgICAgICAgICBjb25zdHJhaW50LnNldEFuZ3VsYXJVcHBlckxpbWl0KHRoaXMudG1wQnRWZWN0b3IzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGFsbCwgYXVsKTtcclxuICAgICAgICAgICAgY29uc3RyYWludC5zZXRBbmd1bGFyTG93ZXJMaW1pdCh0aGlzLnRvQW1tb1YzKGFsbCwgLU1hdGguUEkpKTtcclxuICAgICAgICAgICAgY29uc3RyYWludC5zZXRBbmd1bGFyVXBwZXJMaW1pdCh0aGlzLnRvQW1tb1YzKGF1bCwgTWF0aC5QSSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDM7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdHJhaW50LmVuYWJsZVNwcmluZyhpLCBlbmFibGVTcHJpbmcpO1xyXG4gICAgICAgICAgICBjb25zdHJhaW50LnNldFN0aWZmbmVzcyhpLCBzdGlmZm5lc3MpO1xyXG4gICAgICAgICAgICBjb25zdHJhaW50LnNldERhbXBpbmcoaSwgZGFtcGluZyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEkgaGF2ZSBubyBpZGVhIHdoYXQgc2V0RXF1aWxpYnJpdW1Qb2ludCBkb2VzIDovXHJcbiAgICAgICAgLy8gY29uc3RyYWludC5zZXRFcXVpbGlicml1bVBvaW50KClcclxuICAgICAgICB0aGlzLnBoeXNpY3NXb3JsZC5hZGRDb25zdHJhaW50KGNvbnN0cmFpbnQsIGRpc2FibGVDb2xsaXNpb25zQmV0d2VlbkxpbmtlZEJvZGllcyk7XHJcbiAgICAgICAgcmV0dXJuIGNvbnN0cmFpbnQ7XHJcbiAgICB9XHJcbiAgICBjb25lVHdpc3QoYm9keUEsIGJvZHlCLCBjb25maWcsIGRpc2FibGVDb2xsaXNpb25zQmV0d2VlbkxpbmtlZEJvZGllcyA9IHRydWUpIHtcclxuICAgICAgICBjb25zdCB7IGZyYW1lQSwgZnJhbWVCIH0gPSBjb25maWc7XHJcbiAgICAgICAgY29uc3QgcmJBRnJhbWUgPSBuZXcgQW1tby5idFRyYW5zZm9ybSgpO1xyXG4gICAgICAgIHJiQUZyYW1lLnNldElkZW50aXR5KCk7XHJcbiAgICAgICAgcmJBRnJhbWUuZ2V0T3JpZ2luKCkuc2V0VmFsdWUoKGZyYW1lQSA9PT0gbnVsbCB8fCBmcmFtZUEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGZyYW1lQS54KSB8fCAwLCAoZnJhbWVBID09PSBudWxsIHx8IGZyYW1lQSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZnJhbWVBLnkpIHx8IDAsIChmcmFtZUEgPT09IG51bGwgfHwgZnJhbWVBID09PSB2b2lkIDAgPyB2b2lkIDAgOiBmcmFtZUEueikgfHwgMCk7XHJcbiAgICAgICAgY29uc3QgcmJCRnJhbWUgPSBuZXcgQW1tby5idFRyYW5zZm9ybSgpO1xyXG4gICAgICAgIHJiQkZyYW1lLnNldElkZW50aXR5KCk7XHJcbiAgICAgICAgcmJCRnJhbWUuZ2V0T3JpZ2luKCkuc2V0VmFsdWUoKGZyYW1lQiA9PT0gbnVsbCB8fCBmcmFtZUIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGZyYW1lQi54KSB8fCAwLCAoZnJhbWVCID09PSBudWxsIHx8IGZyYW1lQiA9PT0gdm9pZCAwID8gdm9pZCAwIDogZnJhbWVCLnkpIHx8IDAsIChmcmFtZUIgPT09IG51bGwgfHwgZnJhbWVCID09PSB2b2lkIDAgPyB2b2lkIDAgOiBmcmFtZUIueikgfHwgMCk7XHJcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuZ2V0VHJhbnNmb3JtKGJvZHlBLmFtbW8sIGJvZHlCLmFtbW8pO1xyXG4gICAgICAgIGNvbnN0IGNvbnN0cmFpbnQgPSBuZXcgQW1tby5idENvbmVUd2lzdENvbnN0cmFpbnQoYm9keUIuYW1tbywgYm9keUEuYW1tbywgcmJBRnJhbWUsIHJiQkZyYW1lKTtcclxuICAgICAgICAvLyBkb2VzIG5vdCB3b3JrIGF0IGFsbCA6L1xyXG4gICAgICAgIC8vIGNvbnN0cmFpbnQuc2V0TGltaXQoLU1hdGguUEkgLyA1MCwgTWF0aC5QSSAvIDUwKVxyXG4gICAgICAgIGNvbnN0cmFpbnQuc2V0QW5ndWxhck9ubHkodHJ1ZSk7XHJcbiAgICAgICAgdGhpcy5waHlzaWNzV29ybGQuYWRkQ29uc3RyYWludChjb25zdHJhaW50LCBkaXNhYmxlQ29sbGlzaW9uc0JldHdlZW5MaW5rZWRCb2RpZXMpO1xyXG4gICAgICAgIHJldHVybiBjb25zdHJhaW50O1xyXG4gICAgfVxyXG4gICAgZG9mKGJvZHlBLCBib2R5QiwgY29uZmlnID0ge30sIGRpc2FibGVDb2xsaXNpb25zQmV0d2VlbkxpbmtlZEJvZGllcyA9IHRydWUpIHtcclxuICAgICAgICBjb25zdCB7IG9mZnNldCwgY2VudGVyID0gZmFsc2UgfSA9IGNvbmZpZztcclxuICAgICAgICBjb25zdCBvZmYgPSBPYmplY3QuYXNzaWduKHsgeDogMCwgeTogMCwgejogMCB9LCBvZmZzZXQpO1xyXG4gICAgICAgIGNvbnN0IHRyYW5zZm9ybSA9IHRoaXMuZ2V0VHJhbnNmb3JtKGJvZHlBLmFtbW8sIGJvZHlCLmFtbW8sIG9mZiwgY2VudGVyKTtcclxuICAgICAgICBjb25zdCBjb25zdHJhaW50ID0gbmV3IEFtbW8uYnRHZW5lcmljNkRvZkNvbnN0cmFpbnQoYm9keUEuYW1tbywgYm9keUIuYW1tbywgdHJhbnNmb3JtLnRyYW5zZm9ybUEsIHRyYW5zZm9ybS50cmFuc2Zvcm1CLCB0cnVlKTtcclxuICAgICAgICBjb25zdCB7IGxpbmVhckxvd2VyTGltaXQsIGxpbmVhclVwcGVyTGltaXQsIGFuZ3VsYXJMb3dlckxpbWl0LCBhbmd1bGFyVXBwZXJMaW1pdCB9ID0gY29uZmlnO1xyXG4gICAgICAgIGNvbnN0IGxsbCA9IHRoaXMudG9BbW1vVjMobGluZWFyTG93ZXJMaW1pdCk7XHJcbiAgICAgICAgY29uc3QgbHVsID0gdGhpcy50b0FtbW9WMyhsaW5lYXJVcHBlckxpbWl0KTtcclxuICAgICAgICBjb25zdCBhbGwgPSB0aGlzLnRvQW1tb1YzKGFuZ3VsYXJMb3dlckxpbWl0LCAtTWF0aC5QSSk7XHJcbiAgICAgICAgY29uc3QgYXVsID0gdGhpcy50b0FtbW9WMyhhbmd1bGFyVXBwZXJMaW1pdCwgTWF0aC5QSSk7XHJcbiAgICAgICAgY29uc3RyYWludC5zZXRMaW5lYXJMb3dlckxpbWl0KGxsbCk7XHJcbiAgICAgICAgY29uc3RyYWludC5zZXRMaW5lYXJVcHBlckxpbWl0KGx1bCk7XHJcbiAgICAgICAgY29uc3RyYWludC5zZXRBbmd1bGFyTG93ZXJMaW1pdChhbGwpO1xyXG4gICAgICAgIGNvbnN0cmFpbnQuc2V0QW5ndWxhclVwcGVyTGltaXQoYXVsKTtcclxuICAgICAgICBBbW1vLmRlc3Ryb3kobGxsKTtcclxuICAgICAgICBBbW1vLmRlc3Ryb3kobHVsKTtcclxuICAgICAgICBBbW1vLmRlc3Ryb3koYWxsKTtcclxuICAgICAgICBBbW1vLmRlc3Ryb3koYXVsKTtcclxuICAgICAgICB0aGlzLnBoeXNpY3NXb3JsZC5hZGRDb25zdHJhaW50KGNvbnN0cmFpbnQsIGRpc2FibGVDb2xsaXNpb25zQmV0d2VlbkxpbmtlZEJvZGllcyk7XHJcbiAgICAgICAgcmV0dXJuIGNvbnN0cmFpbnQ7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0cy5kZWZhdWx0ID0gQ29uc3RyYWludHM7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbnN0cmFpbnRzLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xyXG4vKipcclxuICogQ29waWVkIGZyb20gdGhyZWUuanMgZXhhbXBsZXMgYW5kIGFkZGVkIGEgZml4XHJcbiAqL1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuQ29udmV4T2JqZWN0QnJlYWtlciA9IHZvaWQgMDtcclxuLyoqXHJcbiAqIEBhdXRob3IgeW9tYm9wcmltZSBodHRwczovL2dpdGh1Yi5jb20veW9tYm9wcmltZVxyXG4gKlxyXG4gKiBAZmlsZW92ZXJ2aWV3IFRoaXMgY2xhc3MgY2FuIGJlIHVzZWQgdG8gc3ViZGl2aWRlIGEgY29udmV4IEdlb21ldHJ5IG9iamVjdCBpbnRvIHBpZWNlcy5cclxuICpcclxuICogVXNhZ2U6XHJcbiAqXHJcbiAqIFVzZSB0aGUgZnVuY3Rpb24gcHJlcGFyZUJyZWFrYWJsZU9iamVjdCB0byBwcmVwYXJlIGEgTWVzaCBvYmplY3QgdG8gYmUgYnJva2VuLlxyXG4gKlxyXG4gKiBUaGVuLCBjYWxsIHRoZSB2YXJpb3VzIGZ1bmN0aW9ucyB0byBzdWJkaXZpZGUgdGhlIG9iamVjdCAoc3ViZGl2aWRlQnlJbXBhY3QsIGN1dEJ5UGxhbmUpXHJcbiAqXHJcbiAqIFN1Yi1vYmplY3RzIHRoYXQgYXJlIHByb2R1Y3Qgb2Ygc3ViZGl2aXNpb24gZG9uJ3QgbmVlZCBwcmVwYXJlQnJlYWthYmxlT2JqZWN0IHRvIGJlIGNhbGxlZCBvbiB0aGVtLlxyXG4gKlxyXG4gKiBSZXF1aXNpdGVzIGZvciB0aGUgb2JqZWN0OlxyXG4gKlxyXG4gKiAgLSBNZXNoIG9iamVjdCBtdXN0IGhhdmUgYSBCdWZmZXJHZW9tZXRyeSAobm90IEdlb21ldHJ5KSBhbmQgYSBNYXRlcmlhbFxyXG4gKlxyXG4gKiAgLSBWZXJ0ZXggbm9ybWFscyBtdXN0IGJlIHBsYW5hciAobm90IHNtb290aGVkKVxyXG4gKlxyXG4gKiAgLSBUaGUgZ2VvbWV0cnkgbXVzdCBiZSBjb252ZXggKHRoaXMgaXMgbm90IGNoZWNrZWQgaW4gdGhlIGxpYnJhcnkpLiBZb3UgY2FuIGNyZWF0ZSBjb252ZXhcclxuICogIGdlb21ldHJpZXMgd2l0aCBDb252ZXhCdWZmZXJHZW9tZXRyeS4gVGhlIEJveEJ1ZmZlckdlb21ldHJ5LCBTcGhlcmVCdWZmZXJHZW9tZXRyeSBhbmQgb3RoZXIgY29udmV4IHByaW1pdGl2ZXNcclxuICogIGNhbiBhbHNvIGJlIHVzZWQuXHJcbiAqXHJcbiAqIE5vdGU6IFRoaXMgbGliIGFkZHMgbWVtYmVyIHZhcmlhYmxlcyB0byBvYmplY3QncyB1c2VyRGF0YSBtZW1iZXIgKHNlZSBwcmVwYXJlQnJlYWthYmxlT2JqZWN0IGZ1bmN0aW9uKVxyXG4gKiBVc2Ugd2l0aCBjYXV0aW9uIGFuZCByZWFkIHRoZSBjb2RlIHdoZW4gdXNpbmcgd2l0aCBvdGhlciBsaWJzLlxyXG4gKlxyXG4gKiBAcGFyYW0ge2RvdWJsZX0gbWluU2l6ZUZvckJyZWFrIE1pbiBzaXplIGEgZGVicmlzIGNhbiBoYXZlIHRvIGJyZWFrLlxyXG4gKiBAcGFyYW0ge2RvdWJsZX0gc21hbGxEZWx0YSBNYXggZGlzdGFuY2UgdG8gY29uc2lkZXIgdGhhdCBhIHBvaW50IGJlbG9uZ3MgdG8gYSBwbGFuZS5cclxuICpcclxuICovXHJcbmNvbnN0IGluZGV4XzEgPSByZXF1aXJlKFwiQGVuYWJsZTNkL3RocmVlLXdyYXBwZXIvZGlzdC9pbmRleFwiKTtcclxuY29uc3QgaW5kZXhfMiA9IHJlcXVpcmUoXCJAZW5hYmxlM2QvdGhyZWUtd3JhcHBlci9kaXN0L2luZGV4XCIpO1xyXG5jb25zdCBsb2dnZXJfMSA9IHJlcXVpcmUoXCJAZW5hYmxlM2QvY29tbW9uL2Rpc3QvbG9nZ2VyXCIpO1xyXG5jb25zdCBDb252ZXhPYmplY3RCcmVha2VyID0gZnVuY3Rpb24gKG1pblNpemVGb3JCcmVhaywgc21hbGxEZWx0YSkge1xyXG4gICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgdGhpcy5taW5TaXplRm9yQnJlYWsgPSBtaW5TaXplRm9yQnJlYWsgfHwgMS40O1xyXG4gICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgdGhpcy5zbWFsbERlbHRhID0gc21hbGxEZWx0YSB8fCAwLjAwMDE7XHJcbiAgICAvLyBAdHMtaWdub3JlXHJcbiAgICB0aGlzLnRlbXBMaW5lMSA9IG5ldyBpbmRleF8xLkxpbmUzKCk7XHJcbiAgICAvLyBAdHMtaWdub3JlXHJcbiAgICB0aGlzLnRlbXBQbGFuZTEgPSBuZXcgaW5kZXhfMS5QbGFuZSgpO1xyXG4gICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgdGhpcy50ZW1wUGxhbmUyID0gbmV3IGluZGV4XzEuUGxhbmUoKTtcclxuICAgIC8vIEB0cy1pZ25vcmVcclxuICAgIHRoaXMudGVtcFBsYW5lX0N1dCA9IG5ldyBpbmRleF8xLlBsYW5lKCk7XHJcbiAgICAvLyBAdHMtaWdub3JlXHJcbiAgICB0aGlzLnRlbXBDTTEgPSBuZXcgaW5kZXhfMS5WZWN0b3IzKCk7XHJcbiAgICAvLyBAdHMtaWdub3JlXHJcbiAgICB0aGlzLnRlbXBDTTIgPSBuZXcgaW5kZXhfMS5WZWN0b3IzKCk7XHJcbiAgICAvLyBAdHMtaWdub3JlXHJcbiAgICB0aGlzLnRlbXBWZWN0b3IzID0gbmV3IGluZGV4XzEuVmVjdG9yMygpO1xyXG4gICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgdGhpcy50ZW1wVmVjdG9yM18yID0gbmV3IGluZGV4XzEuVmVjdG9yMygpO1xyXG4gICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgdGhpcy50ZW1wVmVjdG9yM18zID0gbmV3IGluZGV4XzEuVmVjdG9yMygpO1xyXG4gICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgdGhpcy50ZW1wVmVjdG9yM19QMCA9IG5ldyBpbmRleF8xLlZlY3RvcjMoKTtcclxuICAgIC8vIEB0cy1pZ25vcmVcclxuICAgIHRoaXMudGVtcFZlY3RvcjNfUDEgPSBuZXcgaW5kZXhfMS5WZWN0b3IzKCk7XHJcbiAgICAvLyBAdHMtaWdub3JlXHJcbiAgICB0aGlzLnRlbXBWZWN0b3IzX1AyID0gbmV3IGluZGV4XzEuVmVjdG9yMygpO1xyXG4gICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgdGhpcy50ZW1wVmVjdG9yM19OMCA9IG5ldyBpbmRleF8xLlZlY3RvcjMoKTtcclxuICAgIC8vIEB0cy1pZ25vcmVcclxuICAgIHRoaXMudGVtcFZlY3RvcjNfTjEgPSBuZXcgaW5kZXhfMS5WZWN0b3IzKCk7XHJcbiAgICAvLyBAdHMtaWdub3JlXHJcbiAgICB0aGlzLnRlbXBWZWN0b3IzX0FCID0gbmV3IGluZGV4XzEuVmVjdG9yMygpO1xyXG4gICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgdGhpcy50ZW1wVmVjdG9yM19DQiA9IG5ldyBpbmRleF8xLlZlY3RvcjMoKTtcclxuICAgIC8vIEB0cy1pZ25vcmVcclxuICAgIHRoaXMudGVtcFJlc3VsdE9iamVjdHMgPSB7IG9iamVjdDE6IG51bGwsIG9iamVjdDI6IG51bGwgfTtcclxuICAgIC8vIEB0cy1pZ25vcmVcclxuICAgIHRoaXMuc2VnbWVudHMgPSBbXTtcclxuICAgIHZhciBuID0gMzAgKiAzMDtcclxuICAgIC8vIEB0cy1pZ25vcmVcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgaSsrKVxyXG4gICAgICAgIHRoaXMuc2VnbWVudHNbaV0gPSBmYWxzZTtcclxufTtcclxuZXhwb3J0cy5Db252ZXhPYmplY3RCcmVha2VyID0gQ29udmV4T2JqZWN0QnJlYWtlcjtcclxuQ29udmV4T2JqZWN0QnJlYWtlci5wcm90b3R5cGUgPSB7XHJcbiAgICBjb25zdHJ1Y3RvcjogQ29udmV4T2JqZWN0QnJlYWtlcixcclxuICAgIHByZXBhcmVCcmVha2FibGVPYmplY3Q6IGZ1bmN0aW9uIChvYmplY3QsIG1hc3MsIHZlbG9jaXR5LCBhbmd1bGFyVmVsb2NpdHksIGJyZWFrYWJsZSkge1xyXG4gICAgICAgIC8vIG9iamVjdCBpcyBhIE9iamVjdDNkIChub3JtYWxseSBhIE1lc2gpLCBtdXN0IGhhdmUgYSBCdWZmZXJHZW9tZXRyeSwgYW5kIGl0IG11c3QgYmUgY29udmV4LlxyXG4gICAgICAgIC8vIEl0cyBtYXRlcmlhbCBwcm9wZXJ0eSBpcyBwcm9wYWdhdGVkIHRvIGl0cyBjaGlsZHJlbiAoc3ViLXBpZWNlcylcclxuICAgICAgICAvLyBtYXNzIG11c3QgYmUgPiAwXHJcbiAgICAgICAgaWYgKCFvYmplY3QuZ2VvbWV0cnkuaXNCdWZmZXJHZW9tZXRyeSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdUSFJFRS5Db252ZXhPYmplY3RCcmVha2VyLnByZXBhcmVCcmVha2FibGVPYmplY3QoKTogUGFyYW1ldGVyIG9iamVjdCBtdXN0IGhhdmUgYSBCdWZmZXJHZW9tZXRyeS4nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgb2JqZWN0LnVzZXJEYXRhLmFtbW9QaHlzaWNzRGF0YSA9IHt9OyAvLyBpbml0aWFsaXNlIG91ciBuZXcgZGF0YSBjb250YWluZXIgLSB3b3VsZCBiZSBiZXN0IHRvIG1vdmUgdGhpcyB0byBFeHRlbmRlZE9iamVjdCBhbmQgbm90IHJlbHkgb24gdXNlckRhdGEgYXQgYWxsIGZvciBiZXN0IGNvbXBhdGliaWxpdHlcclxuICAgICAgICB2YXIgYW1tb1BoeXNpY3NEYXRhID0gb2JqZWN0LnVzZXJEYXRhLmFtbW9QaHlzaWNzRGF0YTsgLy8gZ2V0IHJlZmVyZW5jZSB0byBpdFxyXG4gICAgICAgIGFtbW9QaHlzaWNzRGF0YS5tYXNzID0gbWFzcztcclxuICAgICAgICBhbW1vUGh5c2ljc0RhdGEudmVsb2NpdHkgPSB2ZWxvY2l0eS5jbG9uZSgpO1xyXG4gICAgICAgIGFtbW9QaHlzaWNzRGF0YS5hbmd1bGFyVmVsb2NpdHkgPSBhbmd1bGFyVmVsb2NpdHkuY2xvbmUoKTtcclxuICAgICAgICBhbW1vUGh5c2ljc0RhdGEuYnJlYWthYmxlID0gYnJlYWthYmxlO1xyXG4gICAgfSxcclxuICAgIC8qXHJcbiAgICAgKiBAcGFyYW0ge2ludH0gbWF4UmFkaWFsSXRlcmF0aW9ucyBJdGVyYXRpb25zIGZvciByYWRpYWwgY3V0cy5cclxuICAgICAqIEBwYXJhbSB7aW50fSBtYXhSYW5kb21JdGVyYXRpb25zIE1heCByYW5kb20gaXRlcmF0aW9ucyBmb3Igbm90LXJhZGlhbCBjdXRzXHJcbiAgICAgKlxyXG4gICAgICogUmV0dXJucyB0aGUgYXJyYXkgb2YgcGllY2VzXHJcbiAgICAgKi9cclxuICAgIHN1YmRpdmlkZUJ5SW1wYWN0OiBmdW5jdGlvbiAob2JqZWN0LCBwb2ludE9mSW1wYWN0LCBub3JtYWwsIG1heFJhZGlhbEl0ZXJhdGlvbnMsIG1heFJhbmRvbUl0ZXJhdGlvbnMpIHtcclxuICAgICAgICB2YXIgZGVicmlzID0gW107XHJcbiAgICAgICAgdmFyIHRlbXBQbGFuZTEgPSB0aGlzLnRlbXBQbGFuZTE7XHJcbiAgICAgICAgdmFyIHRlbXBQbGFuZTIgPSB0aGlzLnRlbXBQbGFuZTI7XHJcbiAgICAgICAgdGhpcy50ZW1wVmVjdG9yMy5hZGRWZWN0b3JzKHBvaW50T2ZJbXBhY3QsIG5vcm1hbCk7XHJcbiAgICAgICAgdGVtcFBsYW5lMS5zZXRGcm9tQ29wbGFuYXJQb2ludHMocG9pbnRPZkltcGFjdCwgb2JqZWN0LnBvc2l0aW9uLCB0aGlzLnRlbXBWZWN0b3IzKTtcclxuICAgICAgICB2YXIgbWF4VG90YWxJdGVyYXRpb25zID0gbWF4UmFuZG9tSXRlcmF0aW9ucyArIG1heFJhZGlhbEl0ZXJhdGlvbnM7XHJcbiAgICAgICAgdmFyIHNjb3BlID0gdGhpcztcclxuICAgICAgICBmdW5jdGlvbiBzdWJkaXZpZGVSYWRpYWwoc3ViT2JqZWN0LCBzdGFydEFuZ2xlLCBlbmRBbmdsZSwgbnVtSXRlcmF0aW9ucykge1xyXG4gICAgICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA8IG51bUl0ZXJhdGlvbnMgKiAwLjA1IHx8IG51bUl0ZXJhdGlvbnMgPiBtYXhUb3RhbEl0ZXJhdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIGRlYnJpcy5wdXNoKHN1Yk9iamVjdCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIGFuZ2xlID0gTWF0aC5QSTtcclxuICAgICAgICAgICAgaWYgKG51bUl0ZXJhdGlvbnMgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHRlbXBQbGFuZTIubm9ybWFsLmNvcHkodGVtcFBsYW5lMS5ub3JtYWwpO1xyXG4gICAgICAgICAgICAgICAgdGVtcFBsYW5lMi5jb25zdGFudCA9IHRlbXBQbGFuZTEuY29uc3RhbnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobnVtSXRlcmF0aW9ucyA8PSBtYXhSYWRpYWxJdGVyYXRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYW5nbGUgPSAoZW5kQW5nbGUgLSBzdGFydEFuZ2xlKSAqICgwLjIgKyAwLjYgKiBNYXRoLnJhbmRvbSgpKSArIHN0YXJ0QW5nbGU7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gUm90YXRlIHRlbXBQbGFuZTIgYXQgaW1wYWN0IHBvaW50IGFyb3VuZCBub3JtYWwgYXhpcyBhbmQgdGhlIGFuZ2xlXHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUudGVtcFZlY3RvcjNfMi5jb3B5KG9iamVjdC5wb3NpdGlvbikuc3ViKHBvaW50T2ZJbXBhY3QpLmFwcGx5QXhpc0FuZ2xlKG5vcm1hbCwgYW5nbGUpLmFkZChwb2ludE9mSW1wYWN0KTtcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wUGxhbmUyLnNldEZyb21Db3BsYW5hclBvaW50cyhwb2ludE9mSW1wYWN0LCBzY29wZS50ZW1wVmVjdG9yMywgc2NvcGUudGVtcFZlY3RvcjNfMik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBhbmdsZSA9ICgwLjUgKiAobnVtSXRlcmF0aW9ucyAmIDEpICsgMC4yICogKDIgLSBNYXRoLnJhbmRvbSgpKSkgKiBNYXRoLlBJO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFJvdGF0ZSB0ZW1wUGxhbmUyIGF0IG9iamVjdCBwb3NpdGlvbiBhcm91bmQgbm9ybWFsIGF4aXMgYW5kIHRoZSBhbmdsZVxyXG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLnRlbXBWZWN0b3IzXzJcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmNvcHkocG9pbnRPZkltcGFjdClcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnN1YihzdWJPYmplY3QucG9zaXRpb24pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBseUF4aXNBbmdsZShub3JtYWwsIGFuZ2xlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkKHN1Yk9iamVjdC5wb3NpdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUudGVtcFZlY3RvcjNfMy5jb3B5KG5vcm1hbCkuYWRkKHN1Yk9iamVjdC5wb3NpdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgdGVtcFBsYW5lMi5zZXRGcm9tQ29wbGFuYXJQb2ludHMoc3ViT2JqZWN0LnBvc2l0aW9uLCBzY29wZS50ZW1wVmVjdG9yM18zLCBzY29wZS50ZW1wVmVjdG9yM18yKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBQZXJmb3JtIHRoZSBjdXRcclxuICAgICAgICAgICAgc2NvcGUuY3V0QnlQbGFuZShzdWJPYmplY3QsIHRlbXBQbGFuZTIsIHNjb3BlLnRlbXBSZXN1bHRPYmplY3RzKTtcclxuICAgICAgICAgICAgdmFyIG9iajEgPSBzY29wZS50ZW1wUmVzdWx0T2JqZWN0cy5vYmplY3QxO1xyXG4gICAgICAgICAgICB2YXIgb2JqMiA9IHNjb3BlLnRlbXBSZXN1bHRPYmplY3RzLm9iamVjdDI7XHJcbiAgICAgICAgICAgIGlmIChvYmoxKSB7XHJcbiAgICAgICAgICAgICAgICBzdWJkaXZpZGVSYWRpYWwob2JqMSwgc3RhcnRBbmdsZSwgYW5nbGUsIG51bUl0ZXJhdGlvbnMgKyAxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAob2JqMikge1xyXG4gICAgICAgICAgICAgICAgc3ViZGl2aWRlUmFkaWFsKG9iajIsIGFuZ2xlLCBlbmRBbmdsZSwgbnVtSXRlcmF0aW9ucyArIDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHN1YmRpdmlkZVJhZGlhbChvYmplY3QsIDAsIDIgKiBNYXRoLlBJLCAwKTtcclxuICAgICAgICByZXR1cm4gZGVicmlzO1xyXG4gICAgfSxcclxuICAgIGN1dEJ5UGxhbmU6IGZ1bmN0aW9uIChvYmplY3QsIHBsYW5lLCBvdXRwdXQpIHtcclxuICAgICAgICAvLyBSZXR1cm5zIGJyZWFrYWJsZSBvYmplY3RzIGluIG91dHB1dC5vYmplY3QxIGFuZCBvdXRwdXQub2JqZWN0MiBtZW1iZXJzLCB0aGUgcmVzdWx0aW5nIDIgcGllY2VzIG9mIHRoZSBjdXQuXHJcbiAgICAgICAgLy8gb2JqZWN0MiBjYW4gYmUgbnVsbCBpZiB0aGUgcGxhbmUgZG9lc24ndCBjdXQgdGhlIG9iamVjdC5cclxuICAgICAgICAvLyBvYmplY3QxIGNhbiBiZSBudWxsIG9ubHkgaW4gY2FzZSBvZiBpbnRlcm5hbCBlcnJvclxyXG4gICAgICAgIC8vIFJldHVybmVkIHZhbHVlIGlzIG51bWJlciBvZiBwaWVjZXMsIDAgZm9yIGVycm9yLlxyXG4gICAgICAgIHZhciBnZW9tZXRyeSA9IG9iamVjdC5nZW9tZXRyeTtcclxuICAgICAgICB2YXIgY29vcmRzID0gZ2VvbWV0cnkuYXR0cmlidXRlcy5wb3NpdGlvbi5hcnJheTtcclxuICAgICAgICB2YXIgbm9ybWFscyA9IGdlb21ldHJ5LmF0dHJpYnV0ZXMubm9ybWFsLmFycmF5O1xyXG4gICAgICAgIHZhciBudW1Qb2ludHMgPSBjb29yZHMubGVuZ3RoIC8gMztcclxuICAgICAgICB2YXIgbnVtRmFjZXMgPSBudW1Qb2ludHMgLyAzO1xyXG4gICAgICAgIHZhciBpbmRpY2VzID0gZ2VvbWV0cnkuZ2V0SW5kZXgoKTtcclxuICAgICAgICBpZiAoaW5kaWNlcykge1xyXG4gICAgICAgICAgICBpbmRpY2VzID0gaW5kaWNlcy5hcnJheTtcclxuICAgICAgICAgICAgbnVtRmFjZXMgPSBpbmRpY2VzLmxlbmd0aCAvIDM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZ1bmN0aW9uIGdldFZlcnRleEluZGV4KGZhY2VJZHgsIHZlcnQpIHtcclxuICAgICAgICAgICAgLy8gdmVydCA9IDAsIDEgb3IgMi5cclxuICAgICAgICAgICAgdmFyIGlkeCA9IGZhY2VJZHggKiAzICsgdmVydDtcclxuICAgICAgICAgICAgcmV0dXJuIGluZGljZXMgPyBpbmRpY2VzW2lkeF0gOiBpZHg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBwb2ludHMxID0gW107XHJcbiAgICAgICAgdmFyIHBvaW50czIgPSBbXTtcclxuICAgICAgICB2YXIgZGVsdGEgPSB0aGlzLnNtYWxsRGVsdGE7XHJcbiAgICAgICAgLy8gUmVzZXQgc2VnbWVudHMgbWFya1xyXG4gICAgICAgIHZhciBudW1Qb2ludFBhaXJzID0gbnVtUG9pbnRzICogbnVtUG9pbnRzO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtUG9pbnRQYWlyczsgaSsrKVxyXG4gICAgICAgICAgICB0aGlzLnNlZ21lbnRzW2ldID0gZmFsc2U7XHJcbiAgICAgICAgdmFyIHAwID0gdGhpcy50ZW1wVmVjdG9yM19QMDtcclxuICAgICAgICB2YXIgcDEgPSB0aGlzLnRlbXBWZWN0b3IzX1AxO1xyXG4gICAgICAgIHZhciBuMCA9IHRoaXMudGVtcFZlY3RvcjNfTjA7XHJcbiAgICAgICAgdmFyIG4xID0gdGhpcy50ZW1wVmVjdG9yM19OMTtcclxuICAgICAgICAvLyBJdGVyYXRlIHRocm91Z2ggdGhlIGZhY2VzIHRvIG1hcmsgZWRnZXMgc2hhcmVkIGJ5IGNvcGxhbmFyIGZhY2VzXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1GYWNlcyAtIDE7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgYTEgPSBnZXRWZXJ0ZXhJbmRleChpLCAwKTtcclxuICAgICAgICAgICAgdmFyIGIxID0gZ2V0VmVydGV4SW5kZXgoaSwgMSk7XHJcbiAgICAgICAgICAgIHZhciBjMSA9IGdldFZlcnRleEluZGV4KGksIDIpO1xyXG4gICAgICAgICAgICAvLyBBc3N1bWluZyBhbGwgMyB2ZXJ0aWNlcyBoYXZlIHRoZSBzYW1lIG5vcm1hbFxyXG4gICAgICAgICAgICBuMC5zZXQobm9ybWFsc1thMV0sIG5vcm1hbHNbYTFdICsgMSwgbm9ybWFsc1thMV0gKyAyKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaiA9IGkgKyAxOyBqIDwgbnVtRmFjZXM7IGorKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGEyID0gZ2V0VmVydGV4SW5kZXgoaiwgMCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgYjIgPSBnZXRWZXJ0ZXhJbmRleChqLCAxKTtcclxuICAgICAgICAgICAgICAgIHZhciBjMiA9IGdldFZlcnRleEluZGV4KGosIDIpO1xyXG4gICAgICAgICAgICAgICAgLy8gQXNzdW1pbmcgYWxsIDMgdmVydGljZXMgaGF2ZSB0aGUgc2FtZSBub3JtYWxcclxuICAgICAgICAgICAgICAgIG4xLnNldChub3JtYWxzW2EyXSwgbm9ybWFsc1thMl0gKyAxLCBub3JtYWxzW2EyXSArIDIpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvcGxhbmFyID0gMSAtIG4wLmRvdChuMSkgPCBkZWx0YTtcclxuICAgICAgICAgICAgICAgIGlmIChjb3BsYW5hcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhMSA9PT0gYTIgfHwgYTEgPT09IGIyIHx8IGExID09PSBjMikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYjEgPT09IGEyIHx8IGIxID09PSBiMiB8fCBiMSA9PT0gYzIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VnbWVudHNbYTEgKiBudW1Qb2ludHMgKyBiMV0gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWdtZW50c1tiMSAqIG51bVBvaW50cyArIGExXSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlZ21lbnRzW2MxICogbnVtUG9pbnRzICsgYTFdID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VnbWVudHNbYTEgKiBudW1Qb2ludHMgKyBjMV0gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGIxID09PSBhMiB8fCBiMSA9PT0gYjIgfHwgYjEgPT09IGMyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VnbWVudHNbYzEgKiBudW1Qb2ludHMgKyBiMV0gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlZ21lbnRzW2IxICogbnVtUG9pbnRzICsgYzFdID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gVHJhbnNmb3JtIHRoZSBwbGFuZSB0byBvYmplY3QgbG9jYWwgc3BhY2VcclxuICAgICAgICB2YXIgbG9jYWxQbGFuZSA9IHRoaXMudGVtcFBsYW5lX0N1dDtcclxuICAgICAgICBvYmplY3QudXBkYXRlTWF0cml4KCk7XHJcbiAgICAgICAgQ29udmV4T2JqZWN0QnJlYWtlci50cmFuc2Zvcm1QbGFuZVRvTG9jYWxTcGFjZShwbGFuZSwgb2JqZWN0Lm1hdHJpeCwgbG9jYWxQbGFuZSk7XHJcbiAgICAgICAgLy8gSXRlcmF0ZSB0aHJvdWdoIHRoZSBmYWNlcyBhZGRpbmcgcG9pbnRzIHRvIGJvdGggcGllY2VzXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1GYWNlczsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciB2YSA9IGdldFZlcnRleEluZGV4KGksIDApO1xyXG4gICAgICAgICAgICB2YXIgdmIgPSBnZXRWZXJ0ZXhJbmRleChpLCAxKTtcclxuICAgICAgICAgICAgdmFyIHZjID0gZ2V0VmVydGV4SW5kZXgoaSwgMik7XHJcbiAgICAgICAgICAgIGZvciAodmFyIHNlZ21lbnQgPSAwOyBzZWdtZW50IDwgMzsgc2VnbWVudCsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaTAgPSBzZWdtZW50ID09PSAwID8gdmEgOiBzZWdtZW50ID09PSAxID8gdmIgOiB2YztcclxuICAgICAgICAgICAgICAgIHZhciBpMSA9IHNlZ21lbnQgPT09IDAgPyB2YiA6IHNlZ21lbnQgPT09IDEgPyB2YyA6IHZhO1xyXG4gICAgICAgICAgICAgICAgdmFyIHNlZ21lbnRTdGF0ZSA9IHRoaXMuc2VnbWVudHNbaTAgKiBudW1Qb2ludHMgKyBpMV07XHJcbiAgICAgICAgICAgICAgICBpZiAoc2VnbWVudFN0YXRlKVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOyAvLyBUaGUgc2VnbWVudCBhbHJlYWR5IGhhcyBiZWVuIHByb2Nlc3NlZCBpbiBhbm90aGVyIGZhY2VcclxuICAgICAgICAgICAgICAgIC8vIE1hcmsgc2VnbWVudCBhcyBwcm9jZXNzZWQgKGFsc28gaW52ZXJ0ZWQgc2VnbWVudClcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VnbWVudHNbaTAgKiBudW1Qb2ludHMgKyBpMV0gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWdtZW50c1tpMSAqIG51bVBvaW50cyArIGkwXSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBwMC5zZXQoY29vcmRzWzMgKiBpMF0sIGNvb3Jkc1szICogaTAgKyAxXSwgY29vcmRzWzMgKiBpMCArIDJdKTtcclxuICAgICAgICAgICAgICAgIHAxLnNldChjb29yZHNbMyAqIGkxXSwgY29vcmRzWzMgKiBpMSArIDFdLCBjb29yZHNbMyAqIGkxICsgMl0pO1xyXG4gICAgICAgICAgICAgICAgLy8gbWFyazogMSBmb3IgbmVnYXRpdmUgc2lkZSwgMiBmb3IgcG9zaXRpdmUgc2lkZSwgMyBmb3IgY29wbGFuYXIgcG9pbnRcclxuICAgICAgICAgICAgICAgIHZhciBtYXJrMCA9IDA7XHJcbiAgICAgICAgICAgICAgICB2YXIgZCA9IGxvY2FsUGxhbmUuZGlzdGFuY2VUb1BvaW50KHAwKTtcclxuICAgICAgICAgICAgICAgIGlmIChkID4gZGVsdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBtYXJrMCA9IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRzMi5wdXNoKHAwLmNsb25lKCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoZCA8IC1kZWx0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1hcmswID0gMTtcclxuICAgICAgICAgICAgICAgICAgICBwb2ludHMxLnB1c2gocDAuY2xvbmUoKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBtYXJrMCA9IDM7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRzMS5wdXNoKHAwLmNsb25lKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHBvaW50czIucHVzaChwMC5jbG9uZSgpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIG1hcms6IDEgZm9yIG5lZ2F0aXZlIHNpZGUsIDIgZm9yIHBvc2l0aXZlIHNpZGUsIDMgZm9yIGNvcGxhbmFyIHBvaW50XHJcbiAgICAgICAgICAgICAgICB2YXIgbWFyazEgPSAwO1xyXG4gICAgICAgICAgICAgICAgdmFyIGQgPSBsb2NhbFBsYW5lLmRpc3RhbmNlVG9Qb2ludChwMSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZCA+IGRlbHRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFyazEgPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgIHBvaW50czIucHVzaChwMS5jbG9uZSgpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGQgPCAtZGVsdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBtYXJrMSA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRzMS5wdXNoKHAxLmNsb25lKCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFyazEgPSAzO1xyXG4gICAgICAgICAgICAgICAgICAgIHBvaW50czEucHVzaChwMS5jbG9uZSgpKTtcclxuICAgICAgICAgICAgICAgICAgICBwb2ludHMyLnB1c2gocDEuY2xvbmUoKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoKG1hcmswID09PSAxICYmIG1hcmsxID09PSAyKSB8fCAobWFyazAgPT09IDIgJiYgbWFyazEgPT09IDEpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSW50ZXJzZWN0aW9uIG9mIHNlZ21lbnQgd2l0aCB0aGUgcGxhbmVcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRlbXBMaW5lMS5zdGFydC5jb3B5KHAwKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRlbXBMaW5lMS5lbmQuY29weShwMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGludGVyc2VjdGlvbiA9IG5ldyBpbmRleF8xLlZlY3RvcjMoKTtcclxuICAgICAgICAgICAgICAgICAgICBpbnRlcnNlY3Rpb24gPSBsb2NhbFBsYW5lLmludGVyc2VjdExpbmUodGhpcy50ZW1wTGluZTEsIGludGVyc2VjdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGludGVyc2VjdGlvbiA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNob3VsZG4ndCBoYXBwZW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignSW50ZXJuYWwgZXJyb3I6IHNlZ21lbnQgZG9lcyBub3QgaW50ZXJzZWN0IHBsYW5lLicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXQuc2VnbWVudGVkT2JqZWN0MSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dC5zZWdtZW50ZWRPYmplY3QyID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHBvaW50czEucHVzaChpbnRlcnNlY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIHBvaW50czIucHVzaChpbnRlcnNlY3Rpb24uY2xvbmUoKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQ2FsY3VsYXRlIGRlYnJpcyBtYXNzICh2ZXJ5IGZhc3QgYW5kIGltcHJlY2lzZSk6XHJcbiAgICAgICAgdmFyIG5ld01hc3MgPSBvYmplY3QudXNlckRhdGEuYW1tb1BoeXNpY3NEYXRhLm1hc3MgKiAwLjU7XHJcbiAgICAgICAgLy8gQ2FsY3VsYXRlIGRlYnJpcyBDZW50ZXIgb2YgTWFzcyAoYWdhaW4gZmFzdCBhbmQgaW1wcmVjaXNlKVxyXG4gICAgICAgIHRoaXMudGVtcENNMS5zZXQoMCwgMCwgMCk7XHJcbiAgICAgICAgdmFyIHJhZGl1czEgPSAwO1xyXG4gICAgICAgIHZhciBudW1Qb2ludHMxID0gcG9pbnRzMS5sZW5ndGg7XHJcbiAgICAgICAgaWYgKG51bVBvaW50czEgPiAwKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtUG9pbnRzMTsgaSsrKVxyXG4gICAgICAgICAgICAgICAgdGhpcy50ZW1wQ00xLmFkZChwb2ludHMxW2ldKTtcclxuICAgICAgICAgICAgdGhpcy50ZW1wQ00xLmRpdmlkZVNjYWxhcihudW1Qb2ludHMxKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1Qb2ludHMxOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBwID0gcG9pbnRzMVtpXTtcclxuICAgICAgICAgICAgICAgIHAuc3ViKHRoaXMudGVtcENNMSk7XHJcbiAgICAgICAgICAgICAgICByYWRpdXMxID0gTWF0aC5tYXgocmFkaXVzMSwgcC54LCBwLnksIHAueik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy50ZW1wQ00xLmFkZChvYmplY3QucG9zaXRpb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnRlbXBDTTIuc2V0KDAsIDAsIDApO1xyXG4gICAgICAgIHZhciByYWRpdXMyID0gMDtcclxuICAgICAgICB2YXIgbnVtUG9pbnRzMiA9IHBvaW50czIubGVuZ3RoO1xyXG4gICAgICAgIGlmIChudW1Qb2ludHMyID4gMCkge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bVBvaW50czI7IGkrKylcclxuICAgICAgICAgICAgICAgIHRoaXMudGVtcENNMi5hZGQocG9pbnRzMltpXSk7XHJcbiAgICAgICAgICAgIHRoaXMudGVtcENNMi5kaXZpZGVTY2FsYXIobnVtUG9pbnRzMik7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtUG9pbnRzMjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcCA9IHBvaW50czJbaV07XHJcbiAgICAgICAgICAgICAgICBwLnN1Yih0aGlzLnRlbXBDTTIpO1xyXG4gICAgICAgICAgICAgICAgcmFkaXVzMiA9IE1hdGgubWF4KHJhZGl1czIsIHAueCwgcC55LCBwLnopO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMudGVtcENNMi5hZGQob2JqZWN0LnBvc2l0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIG9iamVjdDEgPSBudWxsO1xyXG4gICAgICAgIHZhciBvYmplY3QyID0gbnVsbDtcclxuICAgICAgICB2YXIgbnVtT2JqZWN0cyA9IDA7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogTU9EOiBXcmFwcGVkIGluIHRyeSBjYXRjaCBibG9jayB0byBhdm9pZCBlcnJvcnNcclxuICAgICAgICAgKi9cclxuICAgICAgICBpZiAobnVtUG9pbnRzMSA+IDQpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIG9iamVjdDEgPSBuZXcgaW5kZXhfMS5NZXNoKG5ldyBpbmRleF8yLkNvbnZleEJ1ZmZlckdlb21ldHJ5KHBvaW50czEpLCBvYmplY3QubWF0ZXJpYWwpO1xyXG4gICAgICAgICAgICAgICAgb2JqZWN0MS5wb3NpdGlvbi5jb3B5KHRoaXMudGVtcENNMSk7XHJcbiAgICAgICAgICAgICAgICBvYmplY3QxLnF1YXRlcm5pb24uY29weShvYmplY3QucXVhdGVybmlvbik7XHJcbiAgICAgICAgICAgICAgICBvYmplY3QxLnVzZXJEYXRhID0gb2JqZWN0LnVzZXJEYXRhO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wcmVwYXJlQnJlYWthYmxlT2JqZWN0KG9iamVjdDEsIG5ld01hc3MsIG9iamVjdC51c2VyRGF0YS5hbW1vUGh5c2ljc0RhdGEudmVsb2NpdHksIG9iamVjdC51c2VyRGF0YS5hbW1vUGh5c2ljc0RhdGEuYW5ndWxhclZlbG9jaXR5LCAyICogcmFkaXVzMSA+IHRoaXMubWluU2l6ZUZvckJyZWFrKTtcclxuICAgICAgICAgICAgICAgIG51bU9iamVjdHMrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGxvZ2dlcl8xLmRlZmF1bHQoJ0Vycm9yIGluIENvbnZleE9iamVjdEJyZWFrZXIudHMnKTtcclxuICAgICAgICAgICAgICAgIGxvZ2dlcl8xLmRlZmF1bHQoZXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChudW1Qb2ludHMyID4gNCkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgb2JqZWN0MiA9IG5ldyBpbmRleF8xLk1lc2gobmV3IGluZGV4XzIuQ29udmV4QnVmZmVyR2VvbWV0cnkocG9pbnRzMiksIG9iamVjdC5tYXRlcmlhbCk7XHJcbiAgICAgICAgICAgICAgICBvYmplY3QyLnBvc2l0aW9uLmNvcHkodGhpcy50ZW1wQ00yKTtcclxuICAgICAgICAgICAgICAgIG9iamVjdDIucXVhdGVybmlvbi5jb3B5KG9iamVjdC5xdWF0ZXJuaW9uKTtcclxuICAgICAgICAgICAgICAgIG9iamVjdDIudXNlckRhdGEgPSBvYmplY3QudXNlckRhdGE7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnByZXBhcmVCcmVha2FibGVPYmplY3Qob2JqZWN0MiwgbmV3TWFzcywgb2JqZWN0LnVzZXJEYXRhLmFtbW9QaHlzaWNzRGF0YS52ZWxvY2l0eSwgb2JqZWN0LnVzZXJEYXRhLmFtbW9QaHlzaWNzRGF0YS5hbmd1bGFyVmVsb2NpdHksIDIgKiByYWRpdXMyID4gdGhpcy5taW5TaXplRm9yQnJlYWspO1xyXG4gICAgICAgICAgICAgICAgbnVtT2JqZWN0cysrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgbG9nZ2VyXzEuZGVmYXVsdCgnRXJyb3IgaW4gQ29udmV4T2JqZWN0QnJlYWtlci50cycpO1xyXG4gICAgICAgICAgICAgICAgbG9nZ2VyXzEuZGVmYXVsdChlcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgb3V0cHV0Lm9iamVjdDEgPSBvYmplY3QxO1xyXG4gICAgICAgIG91dHB1dC5vYmplY3QyID0gb2JqZWN0MjtcclxuICAgICAgICByZXR1cm4gbnVtT2JqZWN0cztcclxuICAgIH1cclxufTtcclxuQ29udmV4T2JqZWN0QnJlYWtlci50cmFuc2Zvcm1GcmVlVmVjdG9yID0gZnVuY3Rpb24gKHYsIG0pIHtcclxuICAgIC8vIGlucHV0OlxyXG4gICAgLy8gdmVjdG9yIGludGVycHJldGVkIGFzIGEgZnJlZSB2ZWN0b3JcclxuICAgIC8vIFRIUkVFLk1hdHJpeDQgb3J0aG9nb25hbCBtYXRyaXggKG1hdHJpeCB3aXRob3V0IHNjYWxlKVxyXG4gICAgdmFyIHggPSB2LngsIHkgPSB2LnksIHogPSB2Lno7XHJcbiAgICB2YXIgZSA9IG0uZWxlbWVudHM7XHJcbiAgICB2LnggPSBlWzBdICogeCArIGVbNF0gKiB5ICsgZVs4XSAqIHo7XHJcbiAgICB2LnkgPSBlWzFdICogeCArIGVbNV0gKiB5ICsgZVs5XSAqIHo7XHJcbiAgICB2LnogPSBlWzJdICogeCArIGVbNl0gKiB5ICsgZVsxMF0gKiB6O1xyXG4gICAgcmV0dXJuIHY7XHJcbn07XHJcbkNvbnZleE9iamVjdEJyZWFrZXIudHJhbnNmb3JtRnJlZVZlY3RvckludmVyc2UgPSBmdW5jdGlvbiAodiwgbSkge1xyXG4gICAgLy8gaW5wdXQ6XHJcbiAgICAvLyB2ZWN0b3IgaW50ZXJwcmV0ZWQgYXMgYSBmcmVlIHZlY3RvclxyXG4gICAgLy8gVEhSRUUuTWF0cml4NCBvcnRob2dvbmFsIG1hdHJpeCAobWF0cml4IHdpdGhvdXQgc2NhbGUpXHJcbiAgICB2YXIgeCA9IHYueCwgeSA9IHYueSwgeiA9IHYuejtcclxuICAgIHZhciBlID0gbS5lbGVtZW50cztcclxuICAgIHYueCA9IGVbMF0gKiB4ICsgZVsxXSAqIHkgKyBlWzJdICogejtcclxuICAgIHYueSA9IGVbNF0gKiB4ICsgZVs1XSAqIHkgKyBlWzZdICogejtcclxuICAgIHYueiA9IGVbOF0gKiB4ICsgZVs5XSAqIHkgKyBlWzEwXSAqIHo7XHJcbiAgICByZXR1cm4gdjtcclxufTtcclxuQ29udmV4T2JqZWN0QnJlYWtlci50cmFuc2Zvcm1UaWVkVmVjdG9ySW52ZXJzZSA9IGZ1bmN0aW9uICh2LCBtKSB7XHJcbiAgICAvLyBpbnB1dDpcclxuICAgIC8vIHZlY3RvciBpbnRlcnByZXRlZCBhcyBhIHRpZWQgKG9yZGluYXJ5KSB2ZWN0b3JcclxuICAgIC8vIFRIUkVFLk1hdHJpeDQgb3J0aG9nb25hbCBtYXRyaXggKG1hdHJpeCB3aXRob3V0IHNjYWxlKVxyXG4gICAgdmFyIHggPSB2LngsIHkgPSB2LnksIHogPSB2Lno7XHJcbiAgICB2YXIgZSA9IG0uZWxlbWVudHM7XHJcbiAgICB2LnggPSBlWzBdICogeCArIGVbMV0gKiB5ICsgZVsyXSAqIHogLSBlWzEyXTtcclxuICAgIHYueSA9IGVbNF0gKiB4ICsgZVs1XSAqIHkgKyBlWzZdICogeiAtIGVbMTNdO1xyXG4gICAgdi56ID0gZVs4XSAqIHggKyBlWzldICogeSArIGVbMTBdICogeiAtIGVbMTRdO1xyXG4gICAgcmV0dXJuIHY7XHJcbn07XHJcbkNvbnZleE9iamVjdEJyZWFrZXIudHJhbnNmb3JtUGxhbmVUb0xvY2FsU3BhY2UgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHYxID0gbmV3IGluZGV4XzEuVmVjdG9yMygpO1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIHRyYW5zZm9ybVBsYW5lVG9Mb2NhbFNwYWNlKHBsYW5lLCBtLCByZXN1bHRQbGFuZSkge1xyXG4gICAgICAgIHJlc3VsdFBsYW5lLm5vcm1hbC5jb3B5KHBsYW5lLm5vcm1hbCk7XHJcbiAgICAgICAgcmVzdWx0UGxhbmUuY29uc3RhbnQgPSBwbGFuZS5jb25zdGFudDtcclxuICAgICAgICB2YXIgcmVmZXJlbmNlUG9pbnQgPSBDb252ZXhPYmplY3RCcmVha2VyLnRyYW5zZm9ybVRpZWRWZWN0b3JJbnZlcnNlKHBsYW5lLmNvcGxhbmFyUG9pbnQodjEpLCBtKTtcclxuICAgICAgICBDb252ZXhPYmplY3RCcmVha2VyLnRyYW5zZm9ybUZyZWVWZWN0b3JJbnZlcnNlKHJlc3VsdFBsYW5lLm5vcm1hbCwgbSk7XHJcbiAgICAgICAgLy8gcmVjYWxjdWxhdGUgY29uc3RhbnQgKGxpa2UgaW4gc2V0RnJvbU5vcm1hbEFuZENvcGxhbmFyUG9pbnQpXHJcbiAgICAgICAgcmVzdWx0UGxhbmUuY29uc3RhbnQgPSAtcmVmZXJlbmNlUG9pbnQuZG90KHJlc3VsdFBsYW5lLm5vcm1hbCk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb252ZXhPYmplY3RCcmVha2VyLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xyXG4vKipcclxuICogQGF1dGhvciAgICAgICBZYW5uaWNrIERldWJlbCAoaHR0cHM6Ly9naXRodWIuY29tL3lhbmRldSlcclxuICogQGNvcHlyaWdodCAgICBDb3B5cmlnaHQgKGMpIDIwMjAgWWFubmljayBEZXViZWw7IFByb2plY3QgVXJsOiBodHRwczovL2dpdGh1Yi5jb20vZW5hYmxlM2QvZW5hYmxlM2RcclxuICogQGRlc2NyaXB0aW9uICBUaGlzIGlzIGEgbW9kaWZpZWQgdmVyc2lvbiBvZiB0aGUgb3JpZ2luYWwgY29kZSBmcm9tIEtldmluIExlZVxyXG4gKi9cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG4vKipcclxuICogQGF1dGhvciAgICAgICBLZXZpbiBMZWUgKGh0dHBzOi8vZ2l0aHViLmNvbS9JbmZpbml0ZUxlZSlcclxuICogQGNvcHlyaWdodCAgICBDb3B5cmlnaHQgKGMpIDIwMTkgS2V2aW4gTGVlOyBQcm9qZWN0IFVybDogaHR0cHM6Ly9naXRodWIuY29tL0luZmluaXRlTGVlL2FtbW8tZGVidWctZHJhd2VyXHJcbiAqIEBsaWNlbnNlICAgICAge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9JbmZpbml0ZUxlZS9hbW1vLWRlYnVnLWRyYXdlci9ibG9iL21hc3Rlci9MSUNFTlNFfE1QTC0yLjB9XHJcbiAqL1xyXG5jb25zdCBpbmRleF8xID0gcmVxdWlyZShcIkBlbmFibGUzZC90aHJlZS13cmFwcGVyL2Rpc3QvaW5kZXhcIik7XHJcbmNvbnN0IEFtbW9EZWJ1Z0NvbnN0YW50cyA9IHtcclxuICAgIE5vRGVidWc6IDAsXHJcbiAgICBEcmF3V2lyZWZyYW1lOiAxLFxyXG4gICAgRHJhd0FhYmI6IDIsXHJcbiAgICBEcmF3RmVhdHVyZXNUZXh0OiA0LFxyXG4gICAgRHJhd0NvbnRhY3RQb2ludHM6IDgsXHJcbiAgICBOb0RlYWN0aXZhdGlvbjogMTYsXHJcbiAgICBOb0hlbHBUZXh0OiAzMixcclxuICAgIERyYXdUZXh0OiA2NCxcclxuICAgIFByb2ZpbGVUaW1pbmdzOiAxMjgsXHJcbiAgICBFbmFibGVTYXRDb21wYXJpc29uOiAyNTYsXHJcbiAgICBEaXNhYmxlQnVsbGV0TENQOiA1MTIsXHJcbiAgICBFbmFibGVDQ0Q6IDEwMjQsXHJcbiAgICBEcmF3Q29uc3RyYWludHM6IDEgPDwgMTEsXHJcbiAgICBEcmF3Q29uc3RyYWludExpbWl0czogMSA8PCAxMixcclxuICAgIEZhc3RXaXJlZnJhbWU6IDEgPDwgMTMsXHJcbiAgICBEcmF3Tm9ybWFsczogMSA8PCAxNCxcclxuICAgIERyYXdPblRvcDogMSA8PCAxNSxcclxuICAgIE1BWF9ERUJVR19EUkFXX01PREU6IDB4ZmZmZmZmZmZcclxufTtcclxuLyoqXHJcbiAqIEFuIGltcGxlbWVudGF0aW9uIG9mIHRoZSBidElEZWJ1Z0RyYXcgaW50ZXJmYWNlIGluIEFtbW8uanMsIGZvciBkZWJ1ZyByZW5kZXJpbmcgb2YgQW1tbyBzaGFwZXNcclxuICovXHJcbmNsYXNzIERlYnVnRHJhd2VyIHtcclxuICAgIGNvbnN0cnVjdG9yKHNjZW5lLCB3b3JsZCwgb3B0aW9ucyA9IHt9KSB7XHJcbiAgICAgICAgdGhpcy5zY2VuZSA9IHNjZW5lO1xyXG4gICAgICAgIHRoaXMud29ybGQgPSB3b3JsZDtcclxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xyXG4gICAgICAgIHRoaXMuZGVidWdEcmF3TW9kZSA9IG9wdGlvbnMuZGVidWdEcmF3TW9kZSB8fCBBbW1vRGVidWdDb25zdGFudHMuRHJhd1dpcmVmcmFtZTtcclxuICAgICAgICBjb25zdCBkcmF3T25Ub3AgPSB0aGlzLmRlYnVnRHJhd01vZGUgJiBBbW1vRGVidWdDb25zdGFudHMuRHJhd09uVG9wIHx8IGZhbHNlO1xyXG4gICAgICAgIGNvbnN0IG1heEJ1ZmZlclNpemUgPSBvcHRpb25zLm1heEJ1ZmZlclNpemUgfHwgMTAwMDAwMDtcclxuICAgICAgICB0aGlzLmdlb21ldHJ5ID0gbmV3IGluZGV4XzEuQnVmZmVyR2VvbWV0cnkoKTtcclxuICAgICAgICBjb25zdCB2ZXJ0aWNlcyA9IG5ldyBGbG9hdDMyQXJyYXkobWF4QnVmZmVyU2l6ZSAqIDMpO1xyXG4gICAgICAgIGNvbnN0IGNvbG9ycyA9IG5ldyBGbG9hdDMyQXJyYXkobWF4QnVmZmVyU2l6ZSAqIDMpO1xyXG4gICAgICAgIC8qXHJcbiAgICAgICAgSSBkbyBub3Qga25vdyB0aGUgZGlmZmVyZW5jZSwganVzdCB1c2luZyB0aGUgZmlyc3Qgb25lLlxyXG4gICAgICAgIGV4cG9ydCBjb25zdCBTdGF0aWNEcmF3VXNhZ2U6IFVzYWdlO1xyXG4gICAgICAgIGV4cG9ydCBjb25zdCBEeW5hbWljRHJhd1VzYWdlOiBVc2FnZTtcclxuICAgICAgICBleHBvcnQgY29uc3QgU3RyZWFtRHJhd1VzYWdlOiBVc2FnZTtcclxuICAgICAgICBleHBvcnQgY29uc3QgU3RhdGljUmVhZFVzYWdlOiBVc2FnZTtcclxuICAgICAgICBleHBvcnQgY29uc3QgRHluYW1pY1JlYWRVc2FnZTogVXNhZ2U7XHJcbiAgICAgICAgZXhwb3J0IGNvbnN0IFN0cmVhbVJlYWRVc2FnZTogVXNhZ2U7XHJcbiAgICAgICAgZXhwb3J0IGNvbnN0IFN0YXRpY0NvcHlVc2FnZTogVXNhZ2U7XHJcbiAgICAgICAgZXhwb3J0IGNvbnN0IER5bmFtaWNDb3B5VXNhZ2U6IFVzYWdlO1xyXG4gICAgICAgIGV4cG9ydCBjb25zdCBTdHJlYW1Db3B5VXNhZ2U6IFVzYWdlO1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuZ2VvbWV0cnkuc2V0QXR0cmlidXRlKCdwb3NpdGlvbicsIG5ldyBpbmRleF8xLkJ1ZmZlckF0dHJpYnV0ZSh2ZXJ0aWNlcywgMykuc2V0VXNhZ2UoaW5kZXhfMS5TdGF0aWNEcmF3VXNhZ2UpKTtcclxuICAgICAgICB0aGlzLmdlb21ldHJ5LnNldEF0dHJpYnV0ZSgnY29sb3InLCBuZXcgaW5kZXhfMS5CdWZmZXJBdHRyaWJ1dGUoY29sb3JzLCAzKS5zZXRVc2FnZShpbmRleF8xLlN0YXRpY0RyYXdVc2FnZSkpO1xyXG4gICAgICAgIHRoaXMuaW5kZXggPSAwO1xyXG4gICAgICAgIGNvbnN0IG1hdGVyaWFsID0gbmV3IGluZGV4XzEuTGluZUJhc2ljTWF0ZXJpYWwoe1xyXG4gICAgICAgICAgICB2ZXJ0ZXhDb2xvcnM6IHRydWUsXHJcbiAgICAgICAgICAgIGRlcHRoVGVzdDogIWRyYXdPblRvcFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMubWVzaCA9IG5ldyBpbmRleF8xLkxpbmVTZWdtZW50cyh0aGlzLmdlb21ldHJ5LCBtYXRlcmlhbCk7XHJcbiAgICAgICAgaWYgKGRyYXdPblRvcClcclxuICAgICAgICAgICAgdGhpcy5tZXNoLnJlbmRlck9yZGVyID0gOTk5O1xyXG4gICAgICAgIHRoaXMubWVzaC5mcnVzdHVtQ3VsbGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5lbmFibGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5kZWJ1Z0RyYXdlciA9IG5ldyBBbW1vLkRlYnVnRHJhd2VyKCk7XHJcbiAgICAgICAgdGhpcy5kZWJ1Z0RyYXdlci5kcmF3TGluZSA9IHRoaXMuZHJhd0xpbmUuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLmRlYnVnRHJhd2VyLmRyYXdDb250YWN0UG9pbnQgPSB0aGlzLmRyYXdDb250YWN0UG9pbnQuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLmRlYnVnRHJhd2VyLnJlcG9ydEVycm9yV2FybmluZyA9IHRoaXMucmVwb3J0RXJyb3JXYXJuaW5nLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5kZWJ1Z0RyYXdlci5kcmF3M2RUZXh0ID0gdGhpcy5kcmF3M2RUZXh0LmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5kZWJ1Z0RyYXdlci5zZXREZWJ1Z01vZGUgPSB0aGlzLnNldERlYnVnTW9kZS5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuZGVidWdEcmF3ZXIuZ2V0RGVidWdNb2RlID0gdGhpcy5nZXREZWJ1Z01vZGUuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLndvcmxkLnNldERlYnVnRHJhd2VyKHRoaXMuZGVidWdEcmF3ZXIpO1xyXG4gICAgfVxyXG4gICAgZW5hYmxlKCkge1xyXG4gICAgICAgIHRoaXMuZW5hYmxlZCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5zY2VuZS5hZGQodGhpcy5tZXNoKTtcclxuICAgIH1cclxuICAgIGRpc2FibGUoKSB7XHJcbiAgICAgICAgdGhpcy5lbmFibGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5zY2VuZS5yZW1vdmUodGhpcy5tZXNoKTtcclxuICAgIH1cclxuICAgIHVwZGF0ZSgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuZW5hYmxlZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmluZGV4ICE9IDApIHtcclxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICB0aGlzLmdlb21ldHJ5LmF0dHJpYnV0ZXMucG9zaXRpb24ubmVlZHNVcGRhdGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgIHRoaXMuZ2VvbWV0cnkuYXR0cmlidXRlcy5jb2xvci5uZWVkc1VwZGF0ZSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaW5kZXggPSAwO1xyXG4gICAgICAgIHRoaXMud29ybGQuZGVidWdEcmF3V29ybGQoKTtcclxuICAgICAgICB0aGlzLmdlb21ldHJ5LnNldERyYXdSYW5nZSgwLCB0aGlzLmluZGV4KTtcclxuICAgIH1cclxuICAgIGRyYXdMaW5lKGZyb20sIHRvLCBjb2xvcikge1xyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICBjb25zdCBoZWFwID0gQW1tby5IRUFQRjMyO1xyXG4gICAgICAgIGNvbnN0IHIgPSBoZWFwWyhjb2xvciArIDApIC8gNF07XHJcbiAgICAgICAgY29uc3QgZyA9IGhlYXBbKGNvbG9yICsgNCkgLyA0XTtcclxuICAgICAgICBjb25zdCBiID0gaGVhcFsoY29sb3IgKyA4KSAvIDRdO1xyXG4gICAgICAgIGNvbnN0IGZyb21YID0gaGVhcFsoZnJvbSArIDApIC8gNF07XHJcbiAgICAgICAgY29uc3QgZnJvbVkgPSBoZWFwWyhmcm9tICsgNCkgLyA0XTtcclxuICAgICAgICBjb25zdCBmcm9tWiA9IGhlYXBbKGZyb20gKyA4KSAvIDRdO1xyXG4gICAgICAgIHRoaXMuZ2VvbWV0cnkuYXR0cmlidXRlcy5wb3NpdGlvbi5zZXRYWVoodGhpcy5pbmRleCwgZnJvbVgsIGZyb21ZLCBmcm9tWik7XHJcbiAgICAgICAgdGhpcy5nZW9tZXRyeS5hdHRyaWJ1dGVzLmNvbG9yLnNldFhZWih0aGlzLmluZGV4KyssIHIsIGcsIGIpO1xyXG4gICAgICAgIGNvbnN0IHRvWCA9IGhlYXBbKHRvICsgMCkgLyA0XTtcclxuICAgICAgICBjb25zdCB0b1kgPSBoZWFwWyh0byArIDQpIC8gNF07XHJcbiAgICAgICAgY29uc3QgdG9aID0gaGVhcFsodG8gKyA4KSAvIDRdO1xyXG4gICAgICAgIHRoaXMuZ2VvbWV0cnkuYXR0cmlidXRlcy5wb3NpdGlvbi5zZXRYWVoodGhpcy5pbmRleCwgdG9YLCB0b1ksIHRvWik7XHJcbiAgICAgICAgdGhpcy5nZW9tZXRyeS5hdHRyaWJ1dGVzLmNvbG9yLnNldFhZWih0aGlzLmluZGV4KyssIHIsIGcsIGIpO1xyXG4gICAgfVxyXG4gICAgLy9UT0RPOiBmaWd1cmUgb3V0IGhvdyB0byBtYWtlIGxpZmVUaW1lIHdvcmtcclxuICAgIGRyYXdDb250YWN0UG9pbnQocG9pbnRPbkIsIG5vcm1hbE9uQiwgZGlzdGFuY2UsIF9saWZlVGltZSwgY29sb3IpIHtcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgY29uc3QgaGVhcCA9IEFtbW8uSEVBUEYzMjtcclxuICAgICAgICBjb25zdCByID0gaGVhcFsoY29sb3IgKyAwKSAvIDRdO1xyXG4gICAgICAgIGNvbnN0IGcgPSBoZWFwWyhjb2xvciArIDQpIC8gNF07XHJcbiAgICAgICAgY29uc3QgYiA9IGhlYXBbKGNvbG9yICsgOCkgLyA0XTtcclxuICAgICAgICBjb25zdCB4ID0gaGVhcFsocG9pbnRPbkIgKyAwKSAvIDRdO1xyXG4gICAgICAgIGNvbnN0IHkgPSBoZWFwWyhwb2ludE9uQiArIDQpIC8gNF07XHJcbiAgICAgICAgY29uc3QgeiA9IGhlYXBbKHBvaW50T25CICsgOCkgLyA0XTtcclxuICAgICAgICB0aGlzLmdlb21ldHJ5LmF0dHJpYnV0ZXMucG9zaXRpb24uc2V0WFlaKHRoaXMuaW5kZXgsIHgsIHksIHopO1xyXG4gICAgICAgIHRoaXMuZ2VvbWV0cnkuYXR0cmlidXRlcy5jb2xvci5zZXRYWVoodGhpcy5pbmRleCsrLCByLCBnLCBiKTtcclxuICAgICAgICBjb25zdCBkeCA9IGhlYXBbKG5vcm1hbE9uQiArIDApIC8gNF0gKiBkaXN0YW5jZTtcclxuICAgICAgICBjb25zdCBkeSA9IGhlYXBbKG5vcm1hbE9uQiArIDQpIC8gNF0gKiBkaXN0YW5jZTtcclxuICAgICAgICBjb25zdCBkeiA9IGhlYXBbKG5vcm1hbE9uQiArIDgpIC8gNF0gKiBkaXN0YW5jZTtcclxuICAgICAgICB0aGlzLmdlb21ldHJ5LmF0dHJpYnV0ZXMucG9zaXRpb24uc2V0WFlaKHRoaXMuaW5kZXgsIHggKyBkeCwgeSArIGR5LCB6ICsgZHopO1xyXG4gICAgICAgIHRoaXMuZ2VvbWV0cnkuYXR0cmlidXRlcy5jb2xvci5zZXRYWVoodGhpcy5pbmRleCsrLCByLCBnLCBiKTtcclxuICAgIH1cclxuICAgIHJlcG9ydEVycm9yV2FybmluZyh3YXJuaW5nU3RyaW5nKSB7XHJcbiAgICAgICAgaWYgKEFtbW8uaGFzT3duUHJvcGVydHkoJ1BvaW50ZXJfc3RyaW5naWZ5JykpIHtcclxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oQW1tby5Qb2ludGVyX3N0cmluZ2lmeSh3YXJuaW5nU3RyaW5nKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKCF0aGlzLndhcm5lZE9uY2UpIHtcclxuICAgICAgICAgICAgdGhpcy53YXJuZWRPbmNlID0gdHJ1ZTtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKFwiQ2Fubm90IHByaW50IHdhcm5pbmdTdHJpbmcsIHBsZWFzZSByZWJ1aWxkIEFtbW8uanMgdXNpbmcgJ2RlYnVnJyBmbGFnXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGRyYXczZFRleHQoX2xvY2F0aW9uLCBfdGV4dFN0cmluZykge1xyXG4gICAgICAgIC8vVE9ET1xyXG4gICAgICAgIGNvbnNvbGUud2FybignVE9ETzogZHJhdzNkVGV4dCcpO1xyXG4gICAgfVxyXG4gICAgc2V0RGVidWdNb2RlKGRlYnVnTW9kZSkge1xyXG4gICAgICAgIHRoaXMuZGVidWdEcmF3TW9kZSA9IGRlYnVnTW9kZTtcclxuICAgIH1cclxuICAgIGdldERlYnVnTW9kZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kZWJ1Z0RyYXdNb2RlO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydHMuZGVmYXVsdCA9IERlYnVnRHJhd2VyO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZWJ1Z0RyYXdlci5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fY3JlYXRlQmluZGluZyA9ICh0aGlzICYmIHRoaXMuX19jcmVhdGVCaW5kaW5nKSB8fCAoT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xyXG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbVtrXTsgfSB9KTtcclxufSkgOiAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcclxuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XHJcbiAgICBvW2syXSA9IG1ba107XHJcbn0pKTtcclxudmFyIF9fZXhwb3J0U3RhciA9ICh0aGlzICYmIHRoaXMuX19leHBvcnRTdGFyKSB8fCBmdW5jdGlvbihtLCBleHBvcnRzKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmIChwICE9PSBcImRlZmF1bHRcIiAmJiAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGV4cG9ydHMsIHApKSBfX2NyZWF0ZUJpbmRpbmcoZXhwb3J0cywgbSwgcCk7XHJcbn07XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxucmVxdWlyZShcIkBlbmFibGUzZC9jb21tb24vZGlzdC90eXBlc0FtbW9cIik7XHJcbnJlcXVpcmUoXCJAZW5hYmxlM2QvY29tbW9uL2Rpc3QvdHlwZXNDdXN0b21cIik7XHJcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9waHlzaWNzXCIpLCBleHBvcnRzKTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbi8qKlxyXG4gKiBAYXV0aG9yIHlhbmRldVxyXG4gKiBAZGVzY3JpcHRpb24gUG9ydGVkIHRvIFR5cGVTY3JpcHRcclxuICovXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5DbG9jayA9IHZvaWQgMDtcclxuLyoqXHJcbiAqIEBhdXRob3IgYWx0ZXJlZHEgLyBodHRwOi8vYWx0ZXJlZHF1YWxpYS5jb20vXHJcbiAqL1xyXG4vKipcclxuICogVGhpcyBpcyB0aGUgQ2xvY2sgY2xhc3MgVEhSRUUgcHJvdmlkZXMuXHJcbiAqL1xyXG5jbGFzcyBDbG9jayB7XHJcbiAgICBjb25zdHJ1Y3RvcihhdXRvU3RhcnQgPSB0cnVlKSB7XHJcbiAgICAgICAgdGhpcy5hdXRvU3RhcnQgPSBhdXRvU3RhcnQgIT09IHVuZGVmaW5lZCA/IGF1dG9TdGFydCA6IHRydWU7XHJcbiAgICAgICAgdGhpcy5zdGFydFRpbWUgPSAwO1xyXG4gICAgICAgIHRoaXMub2xkVGltZSA9IDA7XHJcbiAgICAgICAgdGhpcy5lbGFwc2VkVGltZSA9IDA7XHJcbiAgICAgICAgdGhpcy5ydW5uaW5nID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBzdGFydCgpIHtcclxuICAgICAgICB0aGlzLnN0YXJ0VGltZSA9ICh0eXBlb2YgcGVyZm9ybWFuY2UgPT09ICd1bmRlZmluZWQnID8gRGF0ZSA6IHBlcmZvcm1hbmNlKS5ub3coKTsgLy8gc2VlICMxMDczMlxyXG4gICAgICAgIHRoaXMub2xkVGltZSA9IHRoaXMuc3RhcnRUaW1lO1xyXG4gICAgICAgIHRoaXMuZWxhcHNlZFRpbWUgPSAwO1xyXG4gICAgICAgIHRoaXMucnVubmluZyA9IHRydWU7XHJcbiAgICB9XHJcbiAgICBzdG9wKCkge1xyXG4gICAgICAgIHRoaXMuZ2V0RWxhcHNlZFRpbWUoKTtcclxuICAgICAgICB0aGlzLnJ1bm5pbmcgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmF1dG9TdGFydCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgZ2V0RWxhcHNlZFRpbWUoKSB7XHJcbiAgICAgICAgdGhpcy5nZXREZWx0YSgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmVsYXBzZWRUaW1lO1xyXG4gICAgfVxyXG4gICAgZ2V0RGVsdGEoKSB7XHJcbiAgICAgICAgbGV0IGRpZmYgPSAwO1xyXG4gICAgICAgIGlmICh0aGlzLmF1dG9TdGFydCAmJiAhdGhpcy5ydW5uaW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhcnQoKTtcclxuICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnJ1bm5pbmcpIHtcclxuICAgICAgICAgICAgbGV0IG5ld1RpbWUgPSAodHlwZW9mIHBlcmZvcm1hbmNlID09PSAndW5kZWZpbmVkJyA/IERhdGUgOiBwZXJmb3JtYW5jZSkubm93KCk7XHJcbiAgICAgICAgICAgIGRpZmYgPSAobmV3VGltZSAtIHRoaXMub2xkVGltZSkgLyAxMDAwO1xyXG4gICAgICAgICAgICB0aGlzLm9sZFRpbWUgPSBuZXdUaW1lO1xyXG4gICAgICAgICAgICB0aGlzLmVsYXBzZWRUaW1lICs9IGRpZmY7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBkaWZmO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydHMuQ2xvY2sgPSBDbG9jaztcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q2xvY2suanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbi8qKlxyXG4gKiBAYXV0aG9yICAgICAgIFlhbm5pY2sgRGV1YmVsIChodHRwczovL2dpdGh1Yi5jb20veWFuZGV1KVxyXG4gKiBAY29weXJpZ2h0ICAgIENvcHlyaWdodCAoYykgMjAyMCBZYW5uaWNrIERldWJlbDsgUHJvamVjdCBVcmw6IGh0dHBzOi8vZ2l0aHViLmNvbS9lbmFibGUzZC9lbmFibGUzZFxyXG4gKiBAbGljZW5zZSAgICAgIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZW5hYmxlM2QvZW5hYmxlM2QvYmxvYi9tYXN0ZXIvTElDRU5TRXxHTlUgR1BMdjN9XHJcbiAqL1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuQW1tb1BoeXNpY3MgPSBleHBvcnRzLkNsb2NrID0gZXhwb3J0cy5UeXBlcyA9IGV4cG9ydHMuQWxsSGl0c1JheWNhc3RlciA9IGV4cG9ydHMuQ2xvc2VzdFJheWNhc3RlciA9IGV4cG9ydHMuUGh5c2ljc0xvYWRlciA9IGV4cG9ydHMuRXh0ZW5kZWRHcm91cCA9IGV4cG9ydHMuRXh0ZW5kZWRNZXNoID0gZXhwb3J0cy5FeHRlbmRlZE9iamVjdDNEID0gdm9pZCAwO1xyXG5jb25zdCBsb2dnZXJfMSA9IHJlcXVpcmUoXCJAZW5hYmxlM2QvY29tbW9uL2Rpc3QvbG9nZ2VyXCIpO1xyXG5jb25zdCBwaHlzaWNzQm9keV8xID0gcmVxdWlyZShcIkBlbmFibGUzZC9jb21tb24vZGlzdC9waHlzaWNzQm9keVwiKTtcclxuY29uc3QgZXh0ZW5kZWRPYmplY3QzRF8xID0gcmVxdWlyZShcIkBlbmFibGUzZC9jb21tb24vZGlzdC9leHRlbmRlZE9iamVjdDNEXCIpO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJFeHRlbmRlZE9iamVjdDNEXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBleHRlbmRlZE9iamVjdDNEXzEuRXh0ZW5kZWRPYmplY3QzRDsgfSB9KTtcclxuY29uc3QgZXh0ZW5kZWRNZXNoXzEgPSByZXF1aXJlKFwiQGVuYWJsZTNkL2NvbW1vbi9kaXN0L2V4dGVuZGVkTWVzaFwiKTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiRXh0ZW5kZWRNZXNoXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBleHRlbmRlZE1lc2hfMS5FeHRlbmRlZE1lc2g7IH0gfSk7XHJcbmNvbnN0IGV4dGVuZGVkR3JvdXBfMSA9IHJlcXVpcmUoXCJAZW5hYmxlM2QvY29tbW9uL2Rpc3QvZXh0ZW5kZWRHcm91cFwiKTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiRXh0ZW5kZWRHcm91cFwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZXh0ZW5kZWRHcm91cF8xLkV4dGVuZGVkR3JvdXA7IH0gfSk7XHJcbmNvbnN0IHNoYXBlc18xID0gcmVxdWlyZShcIi4vc2hhcGVzXCIpO1xyXG5jb25zdCBjb25zdHJhaW50c18xID0gcmVxdWlyZShcIi4vY29uc3RyYWludHNcIik7XHJcbmNvbnN0IGV2ZW50ZW1pdHRlcjNfMSA9IHJlcXVpcmUoXCJldmVudGVtaXR0ZXIzXCIpO1xyXG5jb25zdCBpbmRleF8xID0gcmVxdWlyZShcIkBlbmFibGUzZC90aHJlZS13cmFwcGVyL2Rpc3QvaW5kZXhcIik7XHJcbmNvbnN0IHRocmVlX3RvX2FtbW9fMSA9IHJlcXVpcmUoXCIuL3RocmVlLXRvLWFtbW9cIik7XHJcbmNvbnN0IHRvcnVzU2hhcGVfMSA9IHJlcXVpcmUoXCIuL3RvcnVzU2hhcGVcIik7XHJcbmNvbnN0IGZhY3Rvcmllc18xID0gcmVxdWlyZShcIkBlbmFibGUzZC9jb21tb24vZGlzdC9mYWN0b3JpZXNcIik7XHJcbmNvbnN0IGNvbGxpc2lvbkV2ZW50c18xID0gcmVxdWlyZShcIi4vY29sbGlzaW9uRXZlbnRzXCIpO1xyXG5jb25zdCBkZWJ1Z0RyYXdlcl8xID0gcmVxdWlyZShcIi4vZGVidWdEcmF3ZXJcIik7XHJcbmNvbnN0IGNvbnZleE9iamVjdEJyZWFrZXJfMSA9IHJlcXVpcmUoXCIuL2NvbnZleE9iamVjdEJyZWFrZXJcIik7XHJcbmNvbnN0IHBoeXNpY3NMb2FkZXJfMSA9IHJlcXVpcmUoXCJAZW5hYmxlM2QvY29tbW9uL2Rpc3QvcGh5c2ljc0xvYWRlclwiKTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiUGh5c2ljc0xvYWRlclwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gcGh5c2ljc0xvYWRlcl8xLlBoeXNpY3NMb2FkZXI7IH0gfSk7XHJcbmNvbnN0IGRlZmF1bHRNYXRlcmlhbF8xID0gcmVxdWlyZShcIkBlbmFibGUzZC9jb21tb24vZGlzdC9kZWZhdWx0TWF0ZXJpYWxcIik7XHJcbmNvbnN0IFR5cGVzID0gcmVxdWlyZShcIkBlbmFibGUzZC9jb21tb24vZGlzdC90eXBlc1wiKTtcclxuZXhwb3J0cy5UeXBlcyA9IFR5cGVzO1xyXG5jb25zdCByYXljYXN0ZXJfMSA9IHJlcXVpcmUoXCIuL3JheWNhc3Rlci9yYXljYXN0ZXJcIik7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkNsb3Nlc3RSYXljYXN0ZXJcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJheWNhc3Rlcl8xLkNsb3Nlc3RSYXljYXN0ZXI7IH0gfSk7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkFsbEhpdHNSYXljYXN0ZXJcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJheWNhc3Rlcl8xLkFsbEhpdHNSYXljYXN0ZXI7IH0gfSk7XHJcbi8vIEV4cG9ydCBUSFJFRS5DbG9ja1xyXG52YXIgQ2xvY2tfMSA9IHJlcXVpcmUoXCIuL2xpYi9DbG9ja1wiKTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiQ2xvY2tcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIENsb2NrXzEuQ2xvY2s7IH0gfSk7XHJcbmNsYXNzIEFtbW9QaHlzaWNzIGV4dGVuZHMgZXZlbnRlbWl0dGVyM18xLkV2ZW50RW1pdHRlciB7XHJcbiAgICBjb25zdHJ1Y3RvcihzY2VuZSwgY29uZmlnID0ge30pIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuc2NlbmUgPSBzY2VuZTtcclxuICAgICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcclxuICAgICAgICB0aGlzLnJpZ2lkQm9kaWVzID0gW107XHJcbiAgICAgICAgdGhpcy5lYXJsaWVyRGV0ZWN0ZWRDb2xsaXNpb25zID0gW107XHJcbiAgICAgICAgdGhpcy5jb21wbGV4U2hhcGVzID0gWydwbGFuZScsICdodWxsJywgJ2hhY2QnLCAndmhhY2QnLCAnY29udmV4TWVzaCcsICdjb25jYXZlTWVzaCddO1xyXG4gICAgICAgIHRoaXMuZ3Jhdml0eSA9IGNvbmZpZy5ncmF2aXR5IHx8IHsgeDogMCwgeTogLTkuODEsIHo6IDAgfTtcclxuICAgICAgICB0aGlzLmlzSGVhZGxlc3MgPSBzY2VuZSA9PT0gJ2hlYWRsZXNzJyA/IHRydWUgOiBmYWxzZTtcclxuICAgICAgICB0aGlzLnRtcEV1bGVyID0gbmV3IGluZGV4XzEuRXVsZXIoKTtcclxuICAgICAgICB0aGlzLnRtcFF1YXRlcm5pb24gPSBuZXcgaW5kZXhfMS5RdWF0ZXJuaW9uKCk7XHJcbiAgICAgICAgdGhpcy50bXBWZWN0b3IzID0gbmV3IGluZGV4XzEuVmVjdG9yMygpO1xyXG4gICAgICAgIHRoaXMudG1wVmVjdG9yM2EgPSBuZXcgaW5kZXhfMS5WZWN0b3IzKCk7XHJcbiAgICAgICAgdGhpcy50bXBNYXRyaXg0ID0gbmV3IGluZGV4XzEuTWF0cml4NCgpO1xyXG4gICAgICAgIHRoaXMudG1wTWF0cml4NGEgPSBuZXcgaW5kZXhfMS5NYXRyaXg0KCk7XHJcbiAgICAgICAgdGhpcy50bXBCdFZlY3RvcjMgPSBuZXcgQW1tby5idFZlY3RvcjMoKTtcclxuICAgICAgICB0aGlzLnRtcEJ0UXVhdGVybmlvbiA9IG5ldyBBbW1vLmJ0UXVhdGVybmlvbigwLCAwLCAwLCAxKTtcclxuICAgICAgICB0aGlzLmVtcHR5VjMgPSBuZXcgaW5kZXhfMS5WZWN0b3IzKCk7XHJcbiAgICAgICAgdGhpcy5pbXBhY3RQb2ludCA9IG5ldyBpbmRleF8xLlZlY3RvcjMoKTtcclxuICAgICAgICB0aGlzLmltcGFjdE5vcm1hbCA9IG5ldyBpbmRleF8xLlZlY3RvcjMoKTtcclxuICAgICAgICBpZiAoc2NlbmUgIT09ICdoZWFkbGVzcycpIHtcclxuICAgICAgICAgICAgdGhpcy5kZWZhdWx0TWF0ZXJpYWwgPSBuZXcgZGVmYXVsdE1hdGVyaWFsXzEuZGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAvLyBjb25zdCBpbmZvID0gYEFtbW8uanMgcGh5c2ljcyBwcm92aWRlZCBieSBlbmFibGUzZGBcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXHJcbiAgICAgICAgICAgIC8vICAgYCVjICVjICVjICVjICVjICR7aW5mb30gJWMgaHR0cHM6Ly9lbmFibGUzZC5pby9gLFxyXG4gICAgICAgICAgICAvLyAgICdiYWNrZ3JvdW5kOiAjZmYwMDAwJyxcclxuICAgICAgICAgICAgLy8gICAnYmFja2dyb3VuZDogI2ZmZmYwMCcsXHJcbiAgICAgICAgICAgIC8vICAgJ2JhY2tncm91bmQ6ICMwMGZmMDAnLFxyXG4gICAgICAgICAgICAvLyAgICdiYWNrZ3JvdW5kOiAjMDBmZmZmJyxcclxuICAgICAgICAgICAgLy8gICAnY29sb3I6ICNmZmY7IGJhY2tncm91bmQ6ICMwMDAwMDA7JyxcclxuICAgICAgICAgICAgLy8gICAnYmFja2dyb3VuZDogbm9uZSdcclxuICAgICAgICAgICAgLy8gKVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnN0YXJ0KCk7XHJcbiAgICB9XHJcbiAgICAvKiogQGRlcHJlY2F0ZWQgVXNlIHdvcmxkVHJhbnNmb3JtIGluc3RlYWQgb2YgdG1wVHJhbnMuICovXHJcbiAgICBnZXQgdG1wVHJhbnMoKSB7XHJcbiAgICAgICAgY29uc29sZS53YXJuKCdVc2Ugd29ybGRUcmFuc2Zvcm0gaW5zdGVhZCBvZiB0bXBUcmFucy4nKTtcclxuICAgICAgICByZXR1cm4gdGhpcy53b3JsZFRyYW5zZm9ybTtcclxuICAgIH1cclxuICAgIC8qKiBAZGVwcmVjYXRlZCBVc2Ugd29ybGRUcmFuc2Zvcm0gaW5zdGVhZCBvZiB0bXBUcmFucy4gKi9cclxuICAgIHNldCB0bXBUcmFucyh0cmFuc2Zvcm0pIHtcclxuICAgICAgICBjb25zb2xlLndhcm4oJ1VzZSB3b3JsZFRyYW5zZm9ybSBpbnN0ZWFkIG9mIHRtcFRyYW5zLicpO1xyXG4gICAgICAgIHRoaXMud29ybGRUcmFuc2Zvcm0gPSB0cmFuc2Zvcm07XHJcbiAgICB9XHJcbiAgICAvKiogRGVzdHJveXMgYSBwaHlzaWNzIGJvZHkuICovXHJcbiAgICBkZXN0cm95KGJvZHkpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIGNvbnN0IGIgPSBPYmplY3Qua2V5cyhib2R5KS5pbmNsdWRlcygnYm9keScpID8gYm9keS5ib2R5IDogYm9keTtcclxuICAgICAgICBpZiAodHlwZW9mIChiID09PSBudWxsIHx8IGIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGIuYW1tbykgPT09ICd1bmRlZmluZWQnKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIGNvbnN0IG5hbWUgPSBiLmFtbW8ubmFtZTtcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgbGV0IG9iaiA9IGIuYW1tby50aHJlZU9iamVjdDtcclxuICAgICAgICBpZiAobmFtZSAmJiBvYmopIHtcclxuICAgICAgICAgICAgaWYgKChfYSA9IG9iaiA9PT0gbnVsbCB8fCBvYmogPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9iai5ib2R5KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuYW1tbykge1xyXG4gICAgICAgICAgICAgICAgLy8gcmVtb3ZlIGZyb20gcGh5c2ljcyB3b3JsZFxyXG4gICAgICAgICAgICAgICAgIW9iai5ib2R5LmlzU29mdEJvZHlcclxuICAgICAgICAgICAgICAgICAgICA/IHRoaXMucGh5c2ljc1dvcmxkLnJlbW92ZVJpZ2lkQm9keShvYmouYm9keS5hbW1vKVxyXG4gICAgICAgICAgICAgICAgICAgIDogdGhpcy5waHlzaWNzV29ybGQucmVtb3ZlU29mdEJvZHkob2JqLmJvZHkuYW1tbyk7XHJcbiAgICAgICAgICAgICAgICAvLyBjYWxsIGRlc3RydWN0b3Igb24gYm9keVxyXG4gICAgICAgICAgICAgICAgb2JqLmJvZHkuZGVzdHJ1Y3RvcigpO1xyXG4gICAgICAgICAgICAgICAgLy8gcmVzZXQgcHJvcGVydGllc1xyXG4gICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICAgICAgb2JqLmJvZHkgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICBvYmouaGFzQm9keSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgLy8gcmVtb3ZlIGZyb20gdGhpcy5vYmplY3RBbW1vXHJcbiAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgICAgICBkZWxldGUgYi5hbW1vLnRocmVlT2JqZWN0O1xyXG4gICAgICAgICAgICAgICAgLy8gcmVtb3ZlIGZyb20gdGhpcy5yaWdpZEJvZGllc1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnJpZ2lkQm9kaWVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmlnaWRCb2RpZXNbaV0ubmFtZSA9PT0gbmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJpZ2lkQm9kaWVzLnNwbGljZShpLCAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaS0tO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5zY2VuZSA9PT0gJ2hlYWRsZXNzJyAmJiBvYmopXHJcbiAgICAgICAgICAgIG9iaiA9IG51bGw7XHJcbiAgICB9XHJcbiAgICBzZXR1cCgpIHtcclxuICAgICAgICAvLyBhZGQgd29ybGRUcmFuc2Zvcm1cclxuICAgICAgICB0aGlzLndvcmxkVHJhbnNmb3JtID0gbmV3IEFtbW8uYnRUcmFuc2Zvcm0oKTtcclxuICAgICAgICAvLyBzZXR1cCBhbW1vIHBoeXNpY3NcclxuICAgICAgICBpZiAodHlwZW9mIHRoaXMuY29uZmlnLnNldHVwUGh5c2ljc1dvcmxkID09PSAnZnVuY3Rpb24nKVxyXG4gICAgICAgICAgICB0aGlzLnBoeXNpY3NXb3JsZCA9IHRoaXMuY29uZmlnLnNldHVwUGh5c2ljc1dvcmxkKCk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB0aGlzLnBoeXNpY3NXb3JsZCA9IHRoaXMuc2V0dXBQaHlzaWNzV29ybGQoKTtcclxuICAgICAgICBpZiAodGhpcy5zY2VuZSAhPT0gJ2hlYWRsZXNzJykge1xyXG4gICAgICAgICAgICAvLyBJbml0aWFsaXplIGNvbnZleEJyZWFrZXJcclxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICB0aGlzLmNvbnZleEJyZWFrZXIgPSBuZXcgY29udmV4T2JqZWN0QnJlYWtlcl8xLkNvbnZleE9iamVjdEJyZWFrZXIoKTtcclxuICAgICAgICAgICAgdGhpcy5vYmplY3RzVG9SZW1vdmUgPSBbXTtcclxuICAgICAgICAgICAgdGhpcy5udW1PYmplY3RzVG9SZW1vdmUgPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDUwMDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9iamVjdHNUb1JlbW92ZVtpXSA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jb2xsaXNpb25FdmVudHMgPSBuZXcgY29sbGlzaW9uRXZlbnRzXzEuQ29sbGlzaW9uRXZlbnRzKCk7XHJcbiAgICAgICAgdGhpcy5mYWN0b3J5ID0gbmV3IGZhY3Rvcmllc18xLmRlZmF1bHQodGhpcy5zY2VuZSk7XHJcbiAgICAgICAgdGhpcy5zaGFwZXMgPSBuZXcgc2hhcGVzXzEuZGVmYXVsdCh0aGlzLmZhY3RvcnksIChvYmplY3QsIGNvbmZpZykgPT4gdGhpcy5hZGRFeGlzdGluZyhvYmplY3QsIGNvbmZpZykpO1xyXG4gICAgICAgIHRoaXMuY29uc3RyYWludHMgPSBuZXcgY29uc3RyYWludHNfMS5kZWZhdWx0KHRoaXMud29ybGRUcmFuc2Zvcm0sIHRoaXMucGh5c2ljc1dvcmxkKTtcclxuICAgICAgICBpZiAodGhpcy5zY2VuZSAhPT0gJ2hlYWRsZXNzJylcclxuICAgICAgICAgICAgdGhpcy5kZWJ1Z0RyYXdlciA9IG5ldyBkZWJ1Z0RyYXdlcl8xLmRlZmF1bHQodGhpcy5zY2VuZSwgdGhpcy5waHlzaWNzV29ybGQsIHt9KTtcclxuICAgIH1cclxuICAgIHVwZGF0ZURlYnVnZ2VyKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnNjZW5lID09PSAnaGVhZGxlc3MnKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgaWYgKHRoaXMuZGVidWdEcmF3ZXIgJiYgdGhpcy5kZWJ1Z0RyYXdlci5lbmFibGVkKVxyXG4gICAgICAgICAgICB0aGlzLmRlYnVnRHJhd2VyLnVwZGF0ZSgpO1xyXG4gICAgfVxyXG4gICAgc2V0dXBQaHlzaWNzV29ybGQoKSB7XHJcbiAgICAgICAgY29uc3QgZyA9IHRoaXMuZ3Jhdml0eTtcclxuICAgICAgICBjb25zdCB7IHNvZnRCb2RpZXMgPSBmYWxzZSB9ID0gdGhpcy5jb25maWc7XHJcbiAgICAgICAgbGV0IHBoeXNpY3NXb3JsZDtcclxuICAgICAgICBpZiAoIXNvZnRCb2RpZXMpIHtcclxuICAgICAgICAgICAgY29uc3QgY29sbGlzaW9uQ29uZmlndXJhdGlvbiA9IG5ldyBBbW1vLmJ0RGVmYXVsdENvbGxpc2lvbkNvbmZpZ3VyYXRpb24oKSwgZGlzcGF0Y2hlciA9IG5ldyBBbW1vLmJ0Q29sbGlzaW9uRGlzcGF0Y2hlcihjb2xsaXNpb25Db25maWd1cmF0aW9uKSwgYnJvYWRwaGFzZSA9IG5ldyBBbW1vLmJ0RGJ2dEJyb2FkcGhhc2UoKSwgc29sdmVyID0gbmV3IEFtbW8uYnRTZXF1ZW50aWFsSW1wdWxzZUNvbnN0cmFpbnRTb2x2ZXIoKTtcclxuICAgICAgICAgICAgcGh5c2ljc1dvcmxkID0gbmV3IEFtbW8uYnREaXNjcmV0ZUR5bmFtaWNzV29ybGQoZGlzcGF0Y2hlciwgYnJvYWRwaGFzZSwgc29sdmVyLCBjb2xsaXNpb25Db25maWd1cmF0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHNvZnRCb2RpZXMpIHtcclxuICAgICAgICAgICAgY29uc3QgY29sbGlzaW9uQ29uZmlndXJhdGlvbiA9IG5ldyBBbW1vLmJ0U29mdEJvZHlSaWdpZEJvZHlDb2xsaXNpb25Db25maWd1cmF0aW9uKCksIGRpc3BhdGNoZXIgPSBuZXcgQW1tby5idENvbGxpc2lvbkRpc3BhdGNoZXIoY29sbGlzaW9uQ29uZmlndXJhdGlvbiksIGJyb2FkcGhhc2UgPSBuZXcgQW1tby5idERidnRCcm9hZHBoYXNlKCksIHNvbHZlciA9IG5ldyBBbW1vLmJ0U2VxdWVudGlhbEltcHVsc2VDb25zdHJhaW50U29sdmVyKCksIHNvZnRCb2R5U29sdmVyID0gbmV3IEFtbW8uYnREZWZhdWx0U29mdEJvZHlTb2x2ZXIoKTtcclxuICAgICAgICAgICAgcGh5c2ljc1dvcmxkID0gbmV3IEFtbW8uYnRTb2Z0UmlnaWREeW5hbWljc1dvcmxkKGRpc3BhdGNoZXIsIGJyb2FkcGhhc2UsIHNvbHZlciwgY29sbGlzaW9uQ29uZmlndXJhdGlvbiwgc29mdEJvZHlTb2x2ZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwaHlzaWNzV29ybGQuc2V0R3Jhdml0eShuZXcgQW1tby5idFZlY3RvcjMoZy54LCBnLnksIGcueikpO1xyXG4gICAgICAgIHJldHVybiBwaHlzaWNzV29ybGQ7XHJcbiAgICB9XHJcbiAgICBjcmVhdGVEZWJyaXNGcm9tQnJlYWthYmxlT2JqZWN0KG9iamVjdCwgcGFyZW50KSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc2NlbmUgPT09ICdoZWFkbGVzcycpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICBvYmplY3QubWF0ZXJpYWwgPSB0aGlzLmRlZmF1bHRNYXRlcmlhbC5nZXQoKTtcclxuICAgICAgICBvYmplY3Quc2hhcGUgPSAnaHVsbCc7XHJcbiAgICAgICAgb2JqZWN0LmZyYWdtZW50RGVwdGggPSBwYXJlbnQuZnJhZ21lbnREZXB0aCArIDE7XHJcbiAgICAgICAgLy8gQWRkIHRoZSBvYmplY3QgdG8gdGhlIHNjZW5lXHJcbiAgICAgICAgdGhpcy5zY2VuZS5hZGQob2JqZWN0KTtcclxuICAgICAgICAvLyBBZGQgcGh5c2ljcyB0byB0aGUgb2JqZWN0XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIHRoaXMuYWRkRXhpc3Rpbmcob2JqZWN0KTtcclxuICAgICAgICBvYmplY3QuYm9keS5icmVha2FibGUgPSBmYWxzZTtcclxuICAgICAgICAvLyBtYWtlIHRoaXMgZnJhZ21lbnQgYnJlYWthYmxlIGluIDIuNXNlY29uZHNcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgb2JqZWN0LmJvZHkuYnJlYWthYmxlID0gdHJ1ZTtcclxuICAgICAgICB9LCAyNTAwKTtcclxuICAgIH1cclxuICAgIHJlbW92ZURlYnJpcyhvYmplY3QpIHtcclxuICAgICAgICBpZiAodGhpcy5zY2VuZSA9PT0gJ2hlYWRsZXNzJylcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMuc2NlbmUucmVtb3ZlKG9iamVjdCk7XHJcbiAgICAgICAgdGhpcy5kZXN0cm95KG9iamVjdCk7XHJcbiAgICB9XHJcbiAgICB1cGRhdGUoZGVsdGEpIHtcclxuICAgICAgICB0aGlzLnVwZGF0ZVBoeXNpY3MoZGVsdGEpO1xyXG4gICAgICAgIHRoaXMuZGV0ZWN0Q29sbGlzaW9ucygpO1xyXG4gICAgfVxyXG4gICAgdXBkYXRlUGh5c2ljcyhkZWx0YSkge1xyXG4gICAgICAgIC8vIHN0ZXAgd29ybGRcclxuICAgICAgICBjb25zdCBkZWx0YVRpbWUgPSBkZWx0YSAvIDEwMDA7XHJcbiAgICAgICAgLy8gbXVzdCBhbHdheXMgc2F0aXNmeSB0aGUgZXF1YXRpb24gdGltZVN0ZXAgPCBtYXhTdWJTdGVwcyAqIGZpeGVkVGltZVN0ZXBcclxuICAgICAgICB0aGlzLnBoeXNpY3NXb3JsZC5zdGVwU2ltdWxhdGlvbihkZWx0YVRpbWUsIHRoaXMuY29uZmlnLm1heFN1YlN0ZXBzIHx8IDQsIHRoaXMuY29uZmlnLmZpeGVkVGltZVN0ZXAgfHwgMSAvIDYwKTtcclxuICAgICAgICAvLyB1cGRhdGUgcmlnaWQgYm9kaWVzXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnJpZ2lkQm9kaWVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG9ialRocmVlID0gdGhpcy5yaWdpZEJvZGllc1tpXTtcclxuICAgICAgICAgICAgY29uc3Qgb2JqUGh5cyA9IG9ialRocmVlLmJvZHkuYW1tbztcclxuICAgICAgICAgICAgY29uc3QgbXMgPSBvYmpQaHlzLmdldE1vdGlvblN0YXRlKCk7XHJcbiAgICAgICAgICAgIGlmIChtcykge1xyXG4gICAgICAgICAgICAgICAgbXMuZ2V0V29ybGRUcmFuc2Zvcm0odGhpcy53b3JsZFRyYW5zZm9ybSk7XHJcbiAgICAgICAgICAgICAgICAvLyBjaGVjayBpZiBvYmplY3QgZGlkIGFuIHVwZGF0ZSBzaW5jZSBsYXN0IGNhbGxcclxuICAgICAgICAgICAgICAgIGlmIChvYmpUaHJlZS5ib2R5LmRpZFVwZGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgICAgICAgICBpZiAob2JqVGhyZWUuYm9keS5fZW1pdFVwZGF0ZUV2ZW50cylcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqVGhyZWUuYm9keS5ldmVudEVtaXR0ZXIuZW1pdCgndXBkYXRlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqVGhyZWUuYm9keS5kaWRVcGRhdGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSBwb3NpdGlvbnNcclxuICAgICAgICAgICAgICAgIGlmIChvYmpUaHJlZS5ib2R5LmFtbW8uaXNLaW5lbWF0aWNPYmplY3QoKSAmJiBvYmpUaHJlZS5ib2R5Lm5lZWRVcGRhdGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBnZXQgcG9zaXRpb24gYW5kIHJvdGF0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgb2JqVGhyZWUuZ2V0V29ybGRRdWF0ZXJuaW9uKHRoaXMudG1wUXVhdGVybmlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqVGhyZWUuZ2V0V29ybGRQb3NpdGlvbih0aGlzLnRtcFZlY3RvcjMpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGFkanVzdCB0bXAgdmFyaWFibGVzXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50bXBCdFZlY3RvcjMuc2V0VmFsdWUodGhpcy50bXBWZWN0b3IzLngsIHRoaXMudG1wVmVjdG9yMy55LCB0aGlzLnRtcFZlY3RvcjMueik7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50bXBCdFF1YXRlcm5pb24uc2V0VmFsdWUodGhpcy50bXBRdWF0ZXJuaW9uLngsIHRoaXMudG1wUXVhdGVybmlvbi55LCB0aGlzLnRtcFF1YXRlcm5pb24ueiwgdGhpcy50bXBRdWF0ZXJuaW9uLncpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHNldCBwb3NpdGlvbiBhbmQgcm90YXRpb25cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLndvcmxkVHJhbnNmb3JtLnNldE9yaWdpbih0aGlzLnRtcEJ0VmVjdG9yMyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy53b3JsZFRyYW5zZm9ybS5zZXRSb3RhdGlvbih0aGlzLnRtcEJ0UXVhdGVybmlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHRyYW5zZm9ybVxyXG4gICAgICAgICAgICAgICAgICAgIG1zLnNldFdvcmxkVHJhbnNmb3JtKHRoaXMud29ybGRUcmFuc2Zvcm0pO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlc2V0IG5lZWRzVXBkYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgb2JqVGhyZWUuYm9keS5uZWVkVXBkYXRlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChvYmpUaHJlZS5ib2R5LnNraXBVcGRhdGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBkbyBub3RoaW5nIC4uLlxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoIW9ialRocmVlLmJvZHkuYW1tby5pc1N0YXRpY09iamVjdCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZ2V0IHBvc2l0aW9uIGFuZCByb3RhdGlvblxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBwID0gdGhpcy53b3JsZFRyYW5zZm9ybS5nZXRPcmlnaW4oKTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgcSA9IHRoaXMud29ybGRUcmFuc2Zvcm0uZ2V0Um90YXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBib2R5IG9mZnNldFxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBvID0gb2JqVGhyZWUuYm9keS5vZmZzZXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHBvc2l0aW9uIGFuZCByb3RhdGlvblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvYmpUaHJlZS5ib2R5Lmlnbm9yZVNjYWxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG1wVmVjdG9yM2Euc2V0KG9ialRocmVlLnNjYWxlLngsIG9ialRocmVlLnNjYWxlLnksIG9ialRocmVlLnNjYWxlLnopO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2NhbGUgPSBvYmpUaHJlZS5ib2R5LmFtbW8uZ2V0Q29sbGlzaW9uU2hhcGUoKS5nZXRMb2NhbFNjYWxpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50bXBWZWN0b3IzYS5zZXQoc2NhbGUueCgpLCBzY2FsZS55KCksIHNjYWxlLnooKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG1wVmVjdG9yMy5zZXQocC54KCkgKyBvLngsIHAueSgpICsgby55LCBwLnooKSArIG8ueik7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50bXBRdWF0ZXJuaW9uLnNldChxLngoKSwgcS55KCksIHEueigpLCBxLncoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50bXBNYXRyaXg0LmNvbXBvc2UodGhpcy50bXBWZWN0b3IzLCB0aGlzLnRtcFF1YXRlcm5pb24sIHRoaXMudG1wVmVjdG9yM2EpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvYmpUaHJlZS5wYXJlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29tcGF0aWJpbGl0eSBmaXggZm9yIHRocmVlLmpzID49IHIxMjMgKERlemVtYmVyIDIwMjApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCtpbmRleF8xLlJFVklTSU9OID49IDEyMylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG1wTWF0cml4NGEuY29weShvYmpUaHJlZS5wYXJlbnQubWF0cml4V29ybGQpLmludmVydCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRtcE1hdHJpeDRhLmdldEludmVyc2Uob2JqVGhyZWUucGFyZW50Lm1hdHJpeFdvcmxkKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG1wTWF0cml4NGEuaWRlbnRpdHkoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50bXBNYXRyaXg0YS5tdWx0aXBseSh0aGlzLnRtcE1hdHJpeDQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG1wTWF0cml4NGEuZGVjb21wb3NlKG9ialRocmVlLnBvc2l0aW9uLCBvYmpUaHJlZS5xdWF0ZXJuaW9uLCBvYmpUaHJlZS5zY2FsZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBkZXRlY3RDb2xsaXNpb25zKCkge1xyXG4gICAgICAgIHZhciBfYSwgX2I7XHJcbiAgICAgICAgY29uc3QgZGV0ZWN0ZWRDb2xsaXNpb25zID0gW107XHJcbiAgICAgICAgLy8gcmVzZXQgdGhlc2UgdmVjdG9yc1xyXG4gICAgICAgIHRoaXMuaW1wYWN0UG9pbnQuc2V0KDAsIDAsIDApO1xyXG4gICAgICAgIHRoaXMuaW1wYWN0Tm9ybWFsLnNldCgwLCAwLCAwKTtcclxuICAgICAgICBjb25zdCBkaXNwYXRjaGVyID0gdGhpcy5waHlzaWNzV29ybGQuZ2V0RGlzcGF0Y2hlcigpO1xyXG4gICAgICAgIGNvbnN0IG51bU1hbmlmb2xkcyA9IGRpc3BhdGNoZXIuZ2V0TnVtTWFuaWZvbGRzKCk7XHJcbiAgICAgICAgLy8gY2hlY2sgY29sbGlzaW9uc1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtTWFuaWZvbGRzOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IGNvbnRhY3RNYW5pZm9sZCA9IGRpc3BhdGNoZXIuZ2V0TWFuaWZvbGRCeUluZGV4SW50ZXJuYWwoaSk7XHJcbiAgICAgICAgICAgIGxldCBudW1Db250YWN0cyA9IGNvbnRhY3RNYW5pZm9sZC5nZXROdW1Db250YWN0cygpO1xyXG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgIGNvbnN0IHJiMCA9IEFtbW8uY2FzdE9iamVjdChjb250YWN0TWFuaWZvbGQuZ2V0Qm9keTAoKSwgQW1tby5idFJpZ2lkQm9keSk7XHJcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgY29uc3QgcmIxID0gQW1tby5jYXN0T2JqZWN0KGNvbnRhY3RNYW5pZm9sZC5nZXRCb2R5MSgpLCBBbW1vLmJ0UmlnaWRCb2R5KTtcclxuICAgICAgICAgICAgbGV0IHRocmVlT2JqZWN0MCA9IHJiMC50aHJlZU9iamVjdDtcclxuICAgICAgICAgICAgbGV0IHRocmVlT2JqZWN0MSA9IHJiMS50aHJlZU9iamVjdDtcclxuICAgICAgICAgICAgaWYgKCF0aHJlZU9iamVjdDAgfHwgIXRocmVlT2JqZWN0MSkge1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gZG8gbm90IGNoZWNrIGNvbGxpc2lvbiBiZXR3ZWVuIDIgdW5uYW1lZCBvYmplY3RzXHJcbiAgICAgICAgICAgIC8vIChmcmFnbWVudHMgZG8gbm90IGhhdmUgYSBuYW1lLCBmb3IgZXhhbXBsZSlcclxuICAgICAgICAgICAgaWYgKHJiMC5uYW1lID09PSAnJyAmJiByYjEubmFtZSA9PT0gJycpXHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEdldCBzb21lIGluZm9ybWF0aW9uXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBjb25zdCBjaGVja0NvbGxpc2lvbnMwID0gKF9hID0gdGhyZWVPYmplY3QwLmJvZHkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5jaGVja0NvbGxpc2lvbnM7XHJcbiAgICAgICAgICAgIGNvbnN0IGNoZWNrQ29sbGlzaW9uczEgPSAoX2IgPSB0aHJlZU9iamVjdDEuYm9keSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmNoZWNrQ29sbGlzaW9ucztcclxuICAgICAgICAgICAgY29uc3QgYnJlYWthYmxlMCA9IHRocmVlT2JqZWN0MC5ib2R5LmJyZWFrYWJsZTtcclxuICAgICAgICAgICAgY29uc3QgYnJlYWthYmxlMSA9IHRocmVlT2JqZWN0MS5ib2R5LmJyZWFrYWJsZTtcclxuICAgICAgICAgICAgY29uc3QgY2hlY2tDb2xsaXNpb25zID0gY2hlY2tDb2xsaXNpb25zMCB8fCBjaGVja0NvbGxpc2lvbnMxO1xyXG4gICAgICAgICAgICBjb25zdCBjaGVja0JyZWFrYWJsZSA9IGJyZWFrYWJsZTAgfHwgYnJlYWthYmxlMTtcclxuICAgICAgICAgICAgaWYgKCFjaGVja0NvbGxpc2lvbnMgJiYgIWNoZWNrQnJlYWthYmxlKVxyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIGxldCBjb250YWN0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGxldCBtYXhJbXB1bHNlID0gMDtcclxuICAgICAgICAgICAgbGV0IGV2ZW50ID0gJ3N0YXJ0JztcclxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBudW1Db250YWN0czsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb250YWN0UG9pbnQgPSBjb250YWN0TWFuaWZvbGQuZ2V0Q29udGFjdFBvaW50KGopO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGlzdGFuY2UgPSBjb250YWN0UG9pbnQuZ2V0RGlzdGFuY2UoKTtcclxuICAgICAgICAgICAgICAgIC8vIERpc3RhbmNlIGRlZmluaXRpb246IHdoZW4gdGhlIGRpc3RhbmNlIGJldHdlZW4gb2JqZWN0cyBpcyBwb3NpdGl2ZSwgdGhleSBhcmUgc2VwYXJhdGVkLiBXaGVuIHRoZSBkaXN0YW5jZSBpcyBuZWdhdGl2ZSwgdGhleSBhcmUgcGVuZXRyYXRpbmcuIFplcm8gZGlzdGFuY2UgbWVhbnMgZXhhY3RseSB0b3VjaGluZy5cclxuICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vcHlidWxsZXQub3JnL0J1bGxldC9waHBCQjMvdmlld3RvcGljLnBocD90PTU4MzFcclxuICAgICAgICAgICAgICAgIGlmIChkaXN0YW5jZSA8PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGFjdCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW1wdWxzZSA9IGNvbnRhY3RQb2ludC5nZXRBcHBsaWVkSW1wdWxzZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGltcGFjdFBvaW50ID0gY29udGFjdFBvaW50LmdldF9tX3Bvc2l0aW9uV29ybGRPbkIoKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbXBhY3ROb3JtYWwgPSBjb250YWN0UG9pbnQuZ2V0X21fbm9ybWFsV29ybGRPbkIoKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBoYW5kbGUgY29sbGlzaW9uIGV2ZW50c1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGVja0NvbGxpc2lvbnMwIHx8IGNoZWNrQ29sbGlzaW9uczEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmFtZXMgPSBbdGhyZWVPYmplY3QwLm5hbWUsIHRocmVlT2JqZWN0MS5uYW1lXS5zb3J0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbWJpbmVkTmFtZSA9IGAke25hbWVzWzBdfV9fJHtuYW1lc1sxXX1gO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5lYXJsaWVyRGV0ZWN0ZWRDb2xsaXNpb25zLmZpbmQoZWwgPT4gZWwuY29tYmluZWROYW1lID09PSBjb21iaW5lZE5hbWUpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQgPSAnY29sbGlzaW9uJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFkZXRlY3RlZENvbGxpc2lvbnMuZmluZChlbCA9PiBlbC5jb21iaW5lZE5hbWUgPT09IGNvbWJpbmVkTmFtZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRldGVjdGVkQ29sbGlzaW9ucy5wdXNoKHsgY29tYmluZWROYW1lLCBjb2xsaXNpb246IHRydWUgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbGxpc2lvbkV2ZW50cy5lbWl0KCdjb2xsaXNpb24nLCB7IGJvZGllczogW3RocmVlT2JqZWN0MCwgdGhyZWVPYmplY3QxXSwgZXZlbnQgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZ2V0IGltcGFjdFBvaW50IGFuZCBpbXBhY3ROb3JtYWwgb2YgdGhlIGhpZ2h0IGltcHVsc2UgcG9pbnQgKGZvciBicmVha2FibGUgb2JqZWN0cylcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW1wdWxzZSA+PSBtYXhJbXB1bHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heEltcHVsc2UgPSBpbXB1bHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBnZXQgd2hhdCB3ZWVuIG5lZWQgZm9yIHRoZSBjb252ZXggYnJlYWtpbmdcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJyZWFrYWJsZTAgfHwgYnJlYWthYmxlMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbXBhY3RQb2ludC5zZXQoaW1wYWN0UG9pbnQueCgpLCBpbXBhY3RQb2ludC55KCksIGltcGFjdFBvaW50LnooKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmltcGFjdE5vcm1hbC5zZXQoaW1wYWN0Tm9ybWFsLngoKSwgaW1wYWN0Tm9ybWFsLnkoKSwgaW1wYWN0Tm9ybWFsLnooKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gaWYgbm8gcG9pbnQgaGFzIGNvbnRhY3QsIGFib3J0XHJcbiAgICAgICAgICAgIGlmICghY29udGFjdClcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAvLyBpZiBubyBvYmplY3RzIGFyZSBicmVha2FibGUsIGFib3J0XHJcbiAgICAgICAgICAgIGlmICghY2hlY2tCcmVha2FibGUpXHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIGNoZWNrIGZvciBicmVha2FibGUgb2JqZWN0cyAoc3ViZGl2aXNpb24pXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBjb25zdCBmcmFjdHVyZUltcHVsc2UgPSA1OyAvLzI1MFxyXG4gICAgICAgICAgICBjb25zdCBNQVhfRlJBR01FTlRfREVQVEggPSAyO1xyXG4gICAgICAgICAgICAvLyBzaW5jZSB0aGUgbGlicmFyeSBjb252ZXhCcmVha2VyIG1ha2VzIHVzZSBvZiB0aHJlZSdzIHVzZXJEYXRhLmFtbW9QaHlzaWNzRGF0YVxyXG4gICAgICAgICAgICAvLyB3ZSBoYXZlIHRvIGNsb25lIHRoZSBuZWNlc3NhcnkgcGFyYW1zIHRvIHRocmVlT2JqZWN0WC51c2VyRGF0YS5hbW1vUGh5c2ljc0RhdGFcclxuICAgICAgICAgICAgLy8gVE9ETyBpbXByb3ZlIHRoaXNcclxuICAgICAgICAgICAgdGhpcy5lbXB0eVYzLnNldCgwLCAwLCAwKTtcclxuICAgICAgICAgICAgdGhyZWVPYmplY3QwLnVzZXJEYXRhLmFtbW9QaHlzaWNzRGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIG1hc3M6IDEsXHJcbiAgICAgICAgICAgICAgICB2ZWxvY2l0eTogdGhpcy5lbXB0eVYzLFxyXG4gICAgICAgICAgICAgICAgYW5ndWxhclZlbG9jaXR5OiB0aGlzLmVtcHR5VjMsXHJcbiAgICAgICAgICAgICAgICBicmVha2FibGU6IGJyZWFrYWJsZTAsXHJcbiAgICAgICAgICAgICAgICBwaHlzaWNzQm9keTogcmIwXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRocmVlT2JqZWN0MS51c2VyRGF0YS5hbW1vUGh5c2ljc0RhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICBtYXNzOiAxLFxyXG4gICAgICAgICAgICAgICAgdmVsb2NpdHk6IHRoaXMuZW1wdHlWMyxcclxuICAgICAgICAgICAgICAgIGFuZ3VsYXJWZWxvY2l0eTogdGhpcy5lbXB0eVYzLFxyXG4gICAgICAgICAgICAgICAgYnJlYWthYmxlOiBicmVha2FibGUxLFxyXG4gICAgICAgICAgICAgICAgcGh5c2ljc0JvZHk6IHJiMVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHRocmVlT2JqZWN0MC5mcmFnbWVudERlcHRoID09PSAndW5kZWZpbmVkJylcclxuICAgICAgICAgICAgICAgIHRocmVlT2JqZWN0MC5mcmFnbWVudERlcHRoID0gMDtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiB0aHJlZU9iamVjdDEuZnJhZ21lbnREZXB0aCA9PT0gJ3VuZGVmaW5lZCcpXHJcbiAgICAgICAgICAgICAgICB0aHJlZU9iamVjdDEuZnJhZ21lbnREZXB0aCA9IDA7XHJcbiAgICAgICAgICAgIC8vIHRocmVlT2JqZWN0MFxyXG4gICAgICAgICAgICBpZiAoYnJlYWthYmxlMCAmJiBtYXhJbXB1bHNlID4gZnJhY3R1cmVJbXB1bHNlICYmIHRocmVlT2JqZWN0MC5mcmFnbWVudERlcHRoIDwgTUFYX0ZSQUdNRU5UX0RFUFRIKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkZWJyaXMgPSB0aGlzLmNvbnZleEJyZWFrZXIuc3ViZGl2aWRlQnlJbXBhY3QodGhyZWVPYmplY3QwLCB0aGlzLmltcGFjdFBvaW50LCB0aGlzLmltcGFjdE5vcm1hbCwgMSwgMik7IC8vLCAxLjUpXHJcbiAgICAgICAgICAgICAgICBjb25zdCBudW1PYmplY3RzID0gZGVicmlzLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgbnVtT2JqZWN0czsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmVsID0gcmIwLmdldExpbmVhclZlbG9jaXR5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYW5nVmVsID0gcmIwLmdldEFuZ3VsYXJWZWxvY2l0eSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZyYWdtZW50ID0gZGVicmlzW2pdO1xyXG4gICAgICAgICAgICAgICAgICAgIGZyYWdtZW50LnVzZXJEYXRhLmFtbW9QaHlzaWNzRGF0YS52ZWxvY2l0eS5zZXQodmVsLngoKSwgdmVsLnkoKSwgdmVsLnooKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZnJhZ21lbnQudXNlckRhdGEuYW1tb1BoeXNpY3NEYXRhLmFuZ3VsYXJWZWxvY2l0eS5zZXQoYW5nVmVsLngoKSwgYW5nVmVsLnkoKSwgYW5nVmVsLnooKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVEZWJyaXNGcm9tQnJlYWthYmxlT2JqZWN0KGZyYWdtZW50LCB0aHJlZU9iamVjdDApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5vYmplY3RzVG9SZW1vdmVbdGhpcy5udW1PYmplY3RzVG9SZW1vdmUrK10gPSB0aHJlZU9iamVjdDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gdGhyZWVPYmplY3QxXHJcbiAgICAgICAgICAgIGlmIChicmVha2FibGUxICYmIG1heEltcHVsc2UgPiBmcmFjdHVyZUltcHVsc2UgJiYgdGhyZWVPYmplY3QxLmZyYWdtZW50RGVwdGggPCBNQVhfRlJBR01FTlRfREVQVEgpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRlYnJpcyA9IHRoaXMuY29udmV4QnJlYWtlci5zdWJkaXZpZGVCeUltcGFjdCh0aHJlZU9iamVjdDEsIHRoaXMuaW1wYWN0UG9pbnQsIHRoaXMuaW1wYWN0Tm9ybWFsLCAxLCAyKTsgLy8sIDEuNSlcclxuICAgICAgICAgICAgICAgIGNvbnN0IG51bU9iamVjdHMgPSBkZWJyaXMubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBudW1PYmplY3RzOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB2ZWwgPSByYjEuZ2V0TGluZWFyVmVsb2NpdHkoKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBhbmdWZWwgPSByYjEuZ2V0QW5ndWxhclZlbG9jaXR5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZnJhZ21lbnQgPSBkZWJyaXNbal07XHJcbiAgICAgICAgICAgICAgICAgICAgZnJhZ21lbnQudXNlckRhdGEuYW1tb1BoeXNpY3NEYXRhLnZlbG9jaXR5LnNldCh2ZWwueCgpLCB2ZWwueSgpLCB2ZWwueigpKTtcclxuICAgICAgICAgICAgICAgICAgICBmcmFnbWVudC51c2VyRGF0YS5hbW1vUGh5c2ljc0RhdGEuYW5ndWxhclZlbG9jaXR5LnNldChhbmdWZWwueCgpLCBhbmdWZWwueSgpLCBhbmdWZWwueigpKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZURlYnJpc0Zyb21CcmVha2FibGVPYmplY3QoZnJhZ21lbnQsIHRocmVlT2JqZWN0MSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9iamVjdHNUb1JlbW92ZVt0aGlzLm51bU9iamVjdHNUb1JlbW92ZSsrXSA9IHRocmVlT2JqZWN0MTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyByZW1vdmUgb2JqZWN0c1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5udW1PYmplY3RzVG9SZW1vdmU7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLnJlbW92ZURlYnJpcyh0aGlzLm9iamVjdHNUb1JlbW92ZVtpXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubnVtT2JqZWN0c1RvUmVtb3ZlID0gMDtcclxuICAgICAgICAvLyBoYW5kbGUgY29sbGlzaW9uIGVuZCBldmVudHNcclxuICAgICAgICB0aGlzLmVhcmxpZXJEZXRlY3RlZENvbGxpc2lvbnMuZm9yRWFjaChlbCA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgY29tYmluZWROYW1lIH0gPSBlbDtcclxuICAgICAgICAgICAgaWYgKCFkZXRlY3RlZENvbGxpc2lvbnMuZmluZChlbCA9PiBlbC5jb21iaW5lZE5hbWUgPT09IGNvbWJpbmVkTmFtZSkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNwbGl0ID0gY29tYmluZWROYW1lLnNwbGl0KCdfXycpO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgb2JqMCA9IHRoaXMucmlnaWRCb2RpZXMuZmluZChvYmogPT4gb2JqLm5hbWUgPT09IHNwbGl0WzBdKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG9iajEgPSB0aGlzLnJpZ2lkQm9kaWVzLmZpbmQob2JqID0+IG9iai5uYW1lID09PSBzcGxpdFsxXSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBldmVudCA9ICdlbmQnO1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iajAgJiYgb2JqMSlcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbGxpc2lvbkV2ZW50cy5lbWl0KCdjb2xsaXNpb24nLCB7IGJvZGllczogW29iajAsIG9iajFdLCBldmVudCB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuZWFybGllckRldGVjdGVkQ29sbGlzaW9ucyA9IFsuLi5kZXRlY3RlZENvbGxpc2lvbnNdO1xyXG4gICAgfVxyXG4gICAgc2V0R3Jhdml0eSh4ID0gMCwgeSA9IC05LjgsIHogPSAwKSB7XHJcbiAgICAgICAgdGhpcy50bXBCdFZlY3RvcjMuc2V0VmFsdWUoeCwgeSwgeik7XHJcbiAgICAgICAgdGhpcy5waHlzaWNzV29ybGQuc2V0R3Jhdml0eSh0aGlzLnRtcEJ0VmVjdG9yMyk7XHJcbiAgICB9XHJcbiAgICBnZXQgZGVidWcoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNIZWFkbGVzcylcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgZW5hYmxlOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRlYnVnRHJhd2VyLmVuYWJsZSgpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBtb2RlOiAoZGVidWdNb2RlID0gMSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kZWJ1Z0RyYXdlci5zZXREZWJ1Z01vZGUoZGVidWdNb2RlKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZGlzYWJsZTogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kZWJ1Z0RyYXdlci5kaXNhYmxlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgc3RhcnQoKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBBbW1vID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICBsb2dnZXJfMS5kZWZhdWx0KCdBcmUgeW91IHN1cmUgeW91IGluY2x1ZGVkIGFtbW8uanM/Jyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHR5cGVvZiBBbW1vID09PSAnZnVuY3Rpb24nKVxyXG4gICAgICAgICAgICBBbW1vKCkudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldHVwKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgdGhpcy5zZXR1cCgpO1xyXG4gICAgfVxyXG4gICAgZ2V0IGFkZCgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBjb2xsaWRlcjogKG9iamVjdDEsIG9iamVjdDIsIGV2ZW50Q2FsbGJhY2spID0+IHRoaXMuY29sbGlzaW9uRXZlbnRzLmFkZENvbGxpZGVyKG9iamVjdDEsIG9iamVjdDIsIGV2ZW50Q2FsbGJhY2spLFxyXG4gICAgICAgICAgICBjb25zdHJhaW50czogdGhpcy5jb25zdHJhaW50cy5hZGRDb25zdHJhaW50cyxcclxuICAgICAgICAgICAgZXhpc3Rpbmc6IChvYmplY3QsIGNvbmZpZykgPT4gdGhpcy5hZGRFeGlzdGluZyhvYmplY3QsIGNvbmZpZyksXHJcbiAgICAgICAgICAgIHBsYW5lOiAocGxhbmVDb25maWcgPSB7fSwgbWF0ZXJpYWxDb25maWcgPSB7fSkgPT4gdGhpcy5zaGFwZXMuYWRkUGxhbmUocGxhbmVDb25maWcsIG1hdGVyaWFsQ29uZmlnKSxcclxuICAgICAgICAgICAgc3BoZXJlOiAoc3BoZXJlQ29uZmlnID0ge30sIG1hdGVyaWFsQ29uZmlnID0ge30pID0+IHRoaXMuc2hhcGVzLmFkZFNwaGVyZShzcGhlcmVDb25maWcsIG1hdGVyaWFsQ29uZmlnKSxcclxuICAgICAgICAgICAgZ3JvdW5kOiAoZ3JvdW5kQ29uZmlnID0ge30sIG1hdGVyaWFsQ29uZmlnID0ge30pID0+IHRoaXMuc2hhcGVzLmFkZEdyb3VuZChncm91bmRDb25maWcsIG1hdGVyaWFsQ29uZmlnKSxcclxuICAgICAgICAgICAgYm94OiAoYm94Q29uZmlnID0ge30sIG1hdGVyaWFsQ29uZmlnID0ge30pID0+IHRoaXMuc2hhcGVzLmFkZEJveChib3hDb25maWcsIG1hdGVyaWFsQ29uZmlnKSxcclxuICAgICAgICAgICAgY3lsaW5kZXI6IChjeWxpbmRlckNvbmZpZyA9IHt9LCBtYXRlcmlhbENvbmZpZyA9IHt9KSA9PiB0aGlzLnNoYXBlcy5hZGRDeWxpbmRlcihjeWxpbmRlckNvbmZpZywgbWF0ZXJpYWxDb25maWcpLFxyXG4gICAgICAgICAgICBjb25lOiAoY29uZUNvbmZpZyA9IHt9LCBtYXRlcmlhbENvbmZpZyA9IHt9KSA9PiB0aGlzLnNoYXBlcy5hZGRDb25lKGNvbmVDb25maWcsIG1hdGVyaWFsQ29uZmlnKSxcclxuICAgICAgICAgICAgdG9ydXM6ICh0b3J1c0NvbmZpZyA9IHt9LCBtYXRlcmlhbENvbmZpZyA9IHt9KSA9PiB0aGlzLnNoYXBlcy5hZGRUb3J1cyh0b3J1c0NvbmZpZywgbWF0ZXJpYWxDb25maWcpLFxyXG4gICAgICAgICAgICBleHRydWRlOiAoZXh0cnVkZUNvbmZpZywgbWF0ZXJpYWxDb25maWcgPSB7fSkgPT4gdGhpcy5zaGFwZXMuYWRkRXh0cnVkZShleHRydWRlQ29uZmlnLCBtYXRlcmlhbENvbmZpZyksXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IFJheWNhc3RlclxyXG4gICAgICAgICAgICAgKiBAcGFyYW0gdHlwZSBSZXR1cm5zIG9ubHkgdGhlIGNsb3NlcyBib2R5IGJ5IGRlZmF1bHQuIENhbiBiZSAnY2xvc2VzdCcgb3IgJ2FsbEhpdHMnLlxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgcmF5Y2FzdGVyOiAodHlwZSA9ICdjbG9zZXN0JykgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGUgPT09ICdjbG9zZXN0JylcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IHJheWNhc3Rlcl8xLkNsb3Nlc3RSYXljYXN0ZXIodGhpcyk7XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyByYXljYXN0ZXJfMS5BbGxIaXRzUmF5Y2FzdGVyKHRoaXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIHByZXBhcmVUaHJlZU9iamVjdEZvckNvbGxpc2lvblNoYXBlKG9iamVjdCwgY29uZmlnID0ge30pIHtcclxuICAgICAgICB2YXIgX2EsIF9iO1xyXG4gICAgICAgIGNvbnN0IHsgYXV0b0NlbnRlciA9IGZhbHNlIH0gPSBjb25maWc7XHJcbiAgICAgICAgLy8gc2V0IGRlZmF1bHQgcGFyYW1zXHJcbiAgICAgICAgY29uc3QgZGVmYXVsdFBhcmFtcyA9IHtcclxuICAgICAgICAgICAgd2lkdGg6IDEsXHJcbiAgICAgICAgICAgIGhlaWdodDogMSxcclxuICAgICAgICAgICAgZGVwdGg6IDEsXHJcbiAgICAgICAgICAgIHJhZGl1czogMSxcclxuICAgICAgICAgICAgcmFkaXVzVG9wOiAxLFxyXG4gICAgICAgICAgICByYWRpdXNCb3R0b206IDEsXHJcbiAgICAgICAgICAgIHR1YmU6IDAuNCxcclxuICAgICAgICAgICAgdHVidWxhclNlZ21lbnRzOiA2IC8vIGZvciB0aGUgdG9ydXNcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8vIGRldGVybWluZSB0aGUgc2hhcGUgKGZhbGxiYWNrIHRvIGhhY2QpXHJcbiAgICAgICAgbGV0IHNoYXBlID0gJ3Vua25vd24nO1xyXG4gICAgICAgIC8vIHJldHJpZXZlIHRoZSBzaGFwZSBmcm9tIHRoZSBnZW9tZXRyeVxyXG4gICAgICAgIGNvbnN0IHR5cGUgPSAoKF9hID0gb2JqZWN0Lmdlb21ldHJ5KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EudHlwZSkgfHwgJ3Vua25vd24nO1xyXG4gICAgICAgIGlmICgvYm94L2kudGVzdCh0eXBlKSlcclxuICAgICAgICAgICAgc2hhcGUgPSAnYm94JztcclxuICAgICAgICBlbHNlIGlmICgvY29uZS9pLnRlc3QodHlwZSkpXHJcbiAgICAgICAgICAgIHNoYXBlID0gJ2NvbmUnO1xyXG4gICAgICAgIGVsc2UgaWYgKC9jeWxpbmRlci9pLnRlc3QodHlwZSkpXHJcbiAgICAgICAgICAgIHNoYXBlID0gJ2N5bGluZGVyJztcclxuICAgICAgICBlbHNlIGlmICgvZXh0cnVkZS9pLnRlc3QodHlwZSkpXHJcbiAgICAgICAgICAgIHNoYXBlID0gJ2V4dHJ1ZGUnO1xyXG4gICAgICAgIGVsc2UgaWYgKC9wbGFuZS9pLnRlc3QodHlwZSkpXHJcbiAgICAgICAgICAgIHNoYXBlID0gJ3BsYW5lJztcclxuICAgICAgICBlbHNlIGlmICgvc3BoZXJlL2kudGVzdCh0eXBlKSlcclxuICAgICAgICAgICAgc2hhcGUgPSAnc3BoZXJlJztcclxuICAgICAgICBlbHNlIGlmICgvdG9ydXMvaS50ZXN0KHR5cGUpKVxyXG4gICAgICAgICAgICBzaGFwZSA9ICd0b3J1cyc7XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIGxldCBwYXJhbXMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRQYXJhbXMpLCAoX2IgPSBvYmplY3QgPT09IG51bGwgfHwgb2JqZWN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvYmplY3QuZ2VvbWV0cnkpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5wYXJhbWV0ZXJzKTtcclxuICAgICAgICBpZiAoY29uZmlnLnNoYXBlKSB7XHJcbiAgICAgICAgICAgIHBhcmFtcyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdFBhcmFtcyksIGNvbmZpZyk7XHJcbiAgICAgICAgICAgIHNoYXBlID0gY29uZmlnLnNoYXBlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChvYmplY3Quc2hhcGUpIHtcclxuICAgICAgICAgICAgc2hhcGUgPSBvYmplY3Quc2hhcGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEFkZCBhbGwgZGVmYXVsdCBwYXJhbXMgaWYgdW5kZWZpbmVkXHJcbiAgICAgICAgT2JqZWN0LmtleXMocGFyYW1zKS5mb3JFYWNoKGtleSA9PiB7XHJcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBwYXJhbXNba2V5XSA9PT0gJ3VuZGVmaW5lZCcgJiYgZGVmYXVsdFBhcmFtc1trZXldKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgICAgICBwYXJhbXNba2V5XSA9IGRlZmF1bHRQYXJhbXNba2V5XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIGF1dG8gYWRqdXN0IHRoZSBjZW50ZXIgZm9yIGN1c3RvbSBzaGFwZXNcclxuICAgICAgICBpZiAoYXV0b0NlbnRlcilcclxuICAgICAgICAgICAgb2JqZWN0Lmdlb21ldHJ5LmNlbnRlcigpO1xyXG4gICAgICAgIC8vIGFkanVzdCB0aGUgY3lsaW5kZXIgcmFkaXVzIGZvciBpdHMgcGh5c2NpcyBib2R5XHJcbiAgICAgICAgaWYgKHNoYXBlID09PSAnY3lsaW5kZXInKVxyXG4gICAgICAgICAgICBwYXJhbXMucmFkaXVzID0gY29uZmlnLnJhZGl1cyB8fCBwYXJhbXMucmFkaXVzVG9wO1xyXG4gICAgICAgIC8vIHNvbWUgYWxpYXNlc1xyXG4gICAgICAgIGlmIChzaGFwZSA9PT0gJ2V4dHJ1ZGUnKVxyXG4gICAgICAgICAgICBzaGFwZSA9ICdoYWNkJztcclxuICAgICAgICBpZiAoc2hhcGUgPT09ICdtZXNoJyB8fCBzaGFwZSA9PT0gJ2NvbnZleCcpXHJcbiAgICAgICAgICAgIHNoYXBlID0gJ2NvbnZleE1lc2gnO1xyXG4gICAgICAgIGlmIChzaGFwZSA9PT0gJ2NvbmNhdmUnKVxyXG4gICAgICAgICAgICBzaGFwZSA9ICdjb25jYXZlTWVzaCc7XHJcbiAgICAgICAgLy8gaWYgd2UgaGF2ZSBub3QgZm91bmQgYSBzaGFwZSB1bnRpbCBoZXJlLCB3ZSBmYWxsYmFjayB0byAnYm94J1xyXG4gICAgICAgIGlmIChzaGFwZSA9PT0gJ3Vua25vd24nKSB7XHJcbiAgICAgICAgICAgIGxvZ2dlcl8xLmRlZmF1bHQoYFNoYXBlIGZvciAke29iamVjdCA9PT0gbnVsbCB8fCBvYmplY3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9iamVjdC5uYW1lfSBub3QgcmVjb2duaXplZCEgV2lsbCBmYWxsYmFjayB0byBib3guYCk7XHJcbiAgICAgICAgICAgIHNoYXBlID0gJ2JveCc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7IHNoYXBlLCBwYXJhbXMsIG9iamVjdCB9O1xyXG4gICAgfVxyXG4gICAgY3JlYXRlQ29sbGlzaW9uU2hhcGUoc2hhcGUsIHBhcmFtcywgb2JqZWN0KSB7XHJcbiAgICAgICAgY29uc3QgcXVhdCA9IChvYmplY3QgPT09IG51bGwgfHwgb2JqZWN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvYmplY3QucXVhdGVybmlvbikgPyBvYmplY3QgPT09IG51bGwgfHwgb2JqZWN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvYmplY3QucXVhdGVybmlvbiA6IG5ldyBpbmRleF8xLlF1YXRlcm5pb24oMCwgMCwgMCwgMSk7XHJcbiAgICAgICAgY29uc3QgeyBheGlzID0gJ3knIH0gPSBwYXJhbXM7XHJcbiAgICAgICAgY29uc3QgYnRIYWxmRXh0ZW50cyA9IG5ldyBBbW1vLmJ0VmVjdG9yMygpO1xyXG4gICAgICAgIC8vIHRyYW5zZm9ybSBnZW9tZXRyeSB0byBidWZmZXJHZW9tZXRyeSAoYmVjYXVzZSB0aHJlZS10by1hbW1vIHdvcmtzIG9ubHkgd2l0aCBidWZmZXJHZW9tZXRyeSlcclxuICAgICAgICBjb25zdCBnZW9tZXRyeSA9IG9iamVjdCA9PT0gbnVsbCB8fCBvYmplY3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9iamVjdC5nZW9tZXRyeTtcclxuICAgICAgICBpZiAob2JqZWN0ICYmIChnZW9tZXRyeSA9PT0gbnVsbCB8fCBnZW9tZXRyeSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZ2VvbWV0cnkuaXNHZW9tZXRyeSkpIHtcclxuICAgICAgICAgICAgb2JqZWN0Lmdlb21ldHJ5ID0gbmV3IGluZGV4XzEuQnVmZmVyR2VvbWV0cnkoKS5mcm9tR2VvbWV0cnkoZ2VvbWV0cnkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBwcmVwYXJlIGRhdGEgdG8gcGFzcyB0byB0aHJlZS10by1hbW1vLmpzXHJcbiAgICAgICAgY29uc3QgZXh0cmFjdERhdGEgPSAob2JqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1hdHJpeFdvcmxkID0gbmV3IGluZGV4XzEuTWF0cml4NCgpLmVsZW1lbnRzO1xyXG4gICAgICAgICAgICBjb25zdCB2ZXJ0aWNlcyA9IFtdO1xyXG4gICAgICAgICAgICBjb25zdCBtYXRyaWNlcyA9IFtdO1xyXG4gICAgICAgICAgICBjb25zdCBpbmRleGVzID0gW107XHJcbiAgICAgICAgICAgIHRocmVlX3RvX2FtbW9fMS5pdGVyYXRlR2VvbWV0cmllcyhvYmplY3QsIHt9LCAodmVydGV4QXJyYXksIG1hdHJpeEFycmF5LCBpbmRleEFycmF5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICB2ZXJ0aWNlcy5wdXNoKHZlcnRleEFycmF5KTtcclxuICAgICAgICAgICAgICAgIG1hdHJpY2VzLnB1c2gobWF0cml4QXJyYXkpO1xyXG4gICAgICAgICAgICAgICAgaW5kZXhlcy5wdXNoKGluZGV4QXJyYXkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIHsgdmVydGljZXMsIG1hdHJpY2VzLCBpbmRleGVzLCBtYXRyaXhXb3JsZCB9O1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgbGV0IGQgPSB7fTtcclxuICAgICAgICAvLyBleHRyYWN0IGRhdGEgZm9yIGNvbXBsZXggc2hhcGVzIGdlbmVyYXRlZCB3aXRoIHRocmVlLXRvLWFtbW8uanNcclxuICAgICAgICBpZiAodGhpcy5jb21wbGV4U2hhcGVzLmluZGV4T2Yoc2hhcGUpID4gMClcclxuICAgICAgICAgICAgZCA9IGV4dHJhY3REYXRhKG9iamVjdCk7XHJcbiAgICAgICAgbGV0IGNvbGxpc2lvblNoYXBlO1xyXG4gICAgICAgIHN3aXRjaCAoc2hhcGUpIHtcclxuICAgICAgICAgICAgY2FzZSAnYm94JzpcclxuICAgICAgICAgICAgICAgIGJ0SGFsZkV4dGVudHMuc2V0VmFsdWUocGFyYW1zLndpZHRoIC8gMiwgcGFyYW1zLmhlaWdodCAvIDIsIHBhcmFtcy5kZXB0aCAvIDIpO1xyXG4gICAgICAgICAgICAgICAgY29sbGlzaW9uU2hhcGUgPSBuZXcgQW1tby5idEJveFNoYXBlKGJ0SGFsZkV4dGVudHMpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3NwaGVyZSc6XHJcbiAgICAgICAgICAgICAgICBjb2xsaXNpb25TaGFwZSA9IG5ldyBBbW1vLmJ0U3BoZXJlU2hhcGUocGFyYW1zLnJhZGl1cyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnY3lsaW5kZXInOlxyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChheGlzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAneSc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ0SGFsZkV4dGVudHMuc2V0VmFsdWUocGFyYW1zLnJhZGl1cywgcGFyYW1zLmhlaWdodCAvIDIsIHBhcmFtcy5yYWRpdXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xsaXNpb25TaGFwZSA9IG5ldyBBbW1vLmJ0Q3lsaW5kZXJTaGFwZShidEhhbGZFeHRlbnRzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAneCc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ0SGFsZkV4dGVudHMuc2V0VmFsdWUocGFyYW1zLmhlaWdodCAvIDIsIHBhcmFtcy5yYWRpdXMsIHBhcmFtcy5yYWRpdXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xsaXNpb25TaGFwZSA9IG5ldyBBbW1vLmJ0Q3lsaW5kZXJTaGFwZVgoYnRIYWxmRXh0ZW50cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3onOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBidEhhbGZFeHRlbnRzLnNldFZhbHVlKHBhcmFtcy5yYWRpdXMsIHBhcmFtcy5yYWRpdXMsIHBhcmFtcy5oZWlnaHQgLyAyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sbGlzaW9uU2hhcGUgPSBuZXcgQW1tby5idEN5bGluZGVyU2hhcGVaKGJ0SGFsZkV4dGVudHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdjb25lJzpcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoYXhpcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3knOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xsaXNpb25TaGFwZSA9IG5ldyBBbW1vLmJ0Q29uZVNoYXBlKHBhcmFtcy5yYWRpdXMsIHBhcmFtcy5oZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlICd4JzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sbGlzaW9uU2hhcGUgPSBuZXcgQW1tby5idENvbmVTaGFwZVgocGFyYW1zLnJhZGl1cywgcGFyYW1zLmhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3onOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xsaXNpb25TaGFwZSA9IG5ldyBBbW1vLmJ0Q29uZVNoYXBlWihwYXJhbXMucmFkaXVzLCBwYXJhbXMuaGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnY2Fwc3VsZSc6XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGF4aXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlICd5JzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sbGlzaW9uU2hhcGUgPSBuZXcgQW1tby5idENhcHN1bGVTaGFwZShwYXJhbXMucmFkaXVzLCBwYXJhbXMuaGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAneCc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxpc2lvblNoYXBlID0gbmV3IEFtbW8uYnRDYXBzdWxlU2hhcGVYKHBhcmFtcy5yYWRpdXMsIHBhcmFtcy5oZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlICd6JzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sbGlzaW9uU2hhcGUgPSBuZXcgQW1tby5idENhcHN1bGVTaGFwZVoocGFyYW1zLnJhZGl1cywgcGFyYW1zLmhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3RvcnVzJzpcclxuICAgICAgICAgICAgICAgIGNvbGxpc2lvblNoYXBlID0gdG9ydXNTaGFwZV8xLmNyZWF0ZVRvcnVzU2hhcGUocGFyYW1zLCBxdWF0KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdwbGFuZSc6XHJcbiAgICAgICAgICAgICAgICAvLyB1c2VzIGEgdHJpTWVzaFNoYXBlIGZvciB0aGUgcGxhbmVcclxuICAgICAgICAgICAgICAgIGNvbGxpc2lvblNoYXBlID0gdGhyZWVfdG9fYW1tb18xLmNyZWF0ZVRyaU1lc2hTaGFwZShkLnZlcnRpY2VzLCBkLm1hdHJpY2VzLCBkLmluZGV4ZXMsIGQubWF0cml4V29ybGQsIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcGFyYW1zKSwgeyBjb25jYXZlOiBmYWxzZSB9KSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnaHVsbCc6XHJcbiAgICAgICAgICAgICAgICBjb2xsaXNpb25TaGFwZSA9IHRocmVlX3RvX2FtbW9fMS5jcmVhdGVIdWxsU2hhcGUoZC52ZXJ0aWNlcywgZC5tYXRyaWNlcywgZC5tYXRyaXhXb3JsZCwgcGFyYW1zKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdoYWNkJzpcclxuICAgICAgICAgICAgICAgIGNvbGxpc2lvblNoYXBlID0gdGhyZWVfdG9fYW1tb18xLmNyZWF0ZUhBQ0RTaGFwZXMoZC52ZXJ0aWNlcywgZC5tYXRyaWNlcywgZC5pbmRleGVzLCBkLm1hdHJpeFdvcmxkLCBwYXJhbXMpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3ZoYWNkJzpcclxuICAgICAgICAgICAgICAgIGNvbGxpc2lvblNoYXBlID0gdGhyZWVfdG9fYW1tb18xLmNyZWF0ZVZIQUNEU2hhcGVzKGQudmVydGljZXMsIGQubWF0cmljZXMsIGQuaW5kZXhlcywgZC5tYXRyaXhXb3JsZCwgcGFyYW1zKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdjb252ZXhNZXNoJzpcclxuICAgICAgICAgICAgICAgIGNvbGxpc2lvblNoYXBlID0gdGhyZWVfdG9fYW1tb18xLmNyZWF0ZVRyaU1lc2hTaGFwZShkLnZlcnRpY2VzLCBkLm1hdHJpY2VzLCBkLmluZGV4ZXMsIGQubWF0cml4V29ybGQsIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcGFyYW1zKSwgeyBjb25jYXZlOiBmYWxzZSB9KSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnY29uY2F2ZU1lc2gnOlxyXG4gICAgICAgICAgICAgICAgY29sbGlzaW9uU2hhcGUgPSB0aHJlZV90b19hbW1vXzEuY3JlYXRlVHJpTWVzaFNoYXBlKGQudmVydGljZXMsIGQubWF0cmljZXMsIGQuaW5kZXhlcywgZC5tYXRyaXhXb3JsZCwgT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBwYXJhbXMpLCB7IGNvbmNhdmU6IHRydWUgfSkpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIEFtbW8uZGVzdHJveShidEhhbGZFeHRlbnRzKTtcclxuICAgICAgICAvLyBpZiB0aGVyZSBpcyBhIHgsIHkgb3IgeiwgdGFrZSBpcyBhcyB0ZW1wb3Jhcnkgb2Zmc2V0IHBhcmFtZXRlclxyXG4gICAgICAgIGNvbnN0IHsgeCwgeSwgeiB9ID0gcGFyYW1zO1xyXG4gICAgICAgIGlmICh4IHx8IHkgfHwgeikge1xyXG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgIGNvbGxpc2lvblNoYXBlLm9mZnNldCA9IHsgeDogeCB8fCAwLCB5OiB5IHx8IDAsIHo6IHogfHwgMCB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBpbiBzb21lIGNhc2VzLCBsaWtlIGhhY2QsIGl0IHdpbGwgYmUgYW4gYXJyYXkgb2Ygc2hhcGVzXHJcbiAgICAgICAgLy8gc28gd2UgbWVyZ2UgdGhlbVxyXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGNvbGxpc2lvblNoYXBlKSlcclxuICAgICAgICAgICAgY29sbGlzaW9uU2hhcGUgPSB0aGlzLm1lcmdlQ29sbGlzaW9uU2hhcGVzVG9Db21wb3VuZFNoYXBlKGNvbGxpc2lvblNoYXBlKTtcclxuICAgICAgICByZXR1cm4gY29sbGlzaW9uU2hhcGU7XHJcbiAgICB9XHJcbiAgICBtZXJnZUNvbGxpc2lvblNoYXBlc1RvQ29tcG91bmRTaGFwZShjb2xsaXNpb25TaGFwZXMpIHtcclxuICAgICAgICBjb25zdCBjb21wb3VuZFNoYXBlID0gbmV3IEFtbW8uYnRDb21wb3VuZFNoYXBlKCk7XHJcbiAgICAgICAgY29sbGlzaW9uU2hhcGVzLmZvckVhY2goc2hhcGUgPT4ge1xyXG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgIGNvbnN0IHsgb2Zmc2V0IH0gPSBzaGFwZTsgLy8gb2Zmc2V0IGlzIGEgY3VzdG9tIHBhcmFtZXRlclxyXG4gICAgICAgICAgICBjb25zdCB0cmFuc2Zvcm0gPSBuZXcgQW1tby5idFRyYW5zZm9ybSgpO1xyXG4gICAgICAgICAgICB0cmFuc2Zvcm0uc2V0SWRlbnRpdHkoKTtcclxuICAgICAgICAgICAgaWYgKG9mZnNldClcclxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybS5nZXRPcmlnaW4oKS5zZXRWYWx1ZShvZmZzZXQueCB8fCAwLCBvZmZzZXQueSB8fCAwLCBvZmZzZXQueiB8fCAwKTtcclxuICAgICAgICAgICAgY29tcG91bmRTaGFwZS5hZGRDaGlsZFNoYXBlKHRyYW5zZm9ybSwgc2hhcGUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBjb21wb3VuZFNoYXBlO1xyXG4gICAgfVxyXG4gICAgYWRkRXhpc3Rpbmcob2JqZWN0LCBjb25maWcgPSB7fSkge1xyXG4gICAgICAgIGNvbnN0IHsgaGFzQm9keSB9ID0gb2JqZWN0O1xyXG4gICAgICAgIGlmIChoYXNCb2R5KSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihgW0VuYWJsZTNkXTogT2JqZWN0IFwiJHtvYmplY3QubmFtZX1cIiBhbHJlYWR5IGhhcyBhIHBoeXNpY2FsIGJvZHkhYCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgcG9zID0gbmV3IGluZGV4XzEuVmVjdG9yMygpO1xyXG4gICAgICAgIGNvbnN0IHF1YXQgPSBuZXcgaW5kZXhfMS5RdWF0ZXJuaW9uKCk7XHJcbiAgICAgICAgY29uc3Qgc2NhbGUgPSBuZXcgaW5kZXhfMS5WZWN0b3IzKCk7XHJcbiAgICAgICAgb2JqZWN0LmdldFdvcmxkUG9zaXRpb24ocG9zKTtcclxuICAgICAgICBvYmplY3QuZ2V0V29ybGRRdWF0ZXJuaW9uKHF1YXQpO1xyXG4gICAgICAgIG9iamVjdC5nZXRXb3JsZFNjYWxlKHNjYWxlKTtcclxuICAgICAgICBjb25zdCBpc1N0YXRpY09iamVjdCA9IChjb25maWcuY29sbGlzaW9uRmxhZ3MgfHwgMCkudG9TdHJpbmcoMikuc2xpY2UoLTEpID09PSAnMSc7XHJcbiAgICAgICAgY29uc3QgaXNLaW5lbWF0aWNPYmplY3QgPSAoY29uZmlnLmNvbGxpc2lvbkZsYWdzIHx8IDApLnRvU3RyaW5nKDIpLnNsaWNlKC0yLCAtMSkgPT09ICcxJztcclxuICAgICAgICBjb25zdCB7IHNoYXBlID0gJ3Vua25vd24nLCBjb21wb3VuZCA9IFtdLCBtYXNzID0gaXNTdGF0aWNPYmplY3QgfHwgaXNLaW5lbWF0aWNPYmplY3QgPyAwIDogMSwgLy8gc2V0IGRlZmF1bHQgbWFzcyBvZiAwIGZvciBzdGF0aWMgb2JqZWN0cywgYW5kIDEgZm9yIGFsbCBvdGhlciBvYmplY3RzXHJcbiAgICAgICAgY29sbGlzaW9uRmxhZ3MgPSAwLCBjb2xsaXNpb25Hcm91cCA9IDEsIGNvbGxpc2lvbk1hc2sgPSAtMSwgb2Zmc2V0ID0gdW5kZWZpbmVkLCBicmVha2FibGUgPSBmYWxzZSwgYWRkQ2hpbGRyZW4gPSB0cnVlLCBtYXJnaW4gPSAwLjAxLCBpZ25vcmVTY2FsZSA9IGZhbHNlIH0gPSBjb25maWc7XHJcbiAgICAgICAgaWYgKGlnbm9yZVNjYWxlKVxyXG4gICAgICAgICAgICBzY2FsZS5zZXQoMSwgMSwgMSk7XHJcbiAgICAgICAgaWYgKGNvbXBvdW5kLmxlbmd0aCA+PSAxKSB7XHJcbiAgICAgICAgICAgIC8vIGlmIHdlIHdhbnQgYSBjdXN0b20gY29tcG91bmQgc2hhcGUsIHdlIHNpbXBseSBkb1xyXG4gICAgICAgICAgICBjb25zdCBjb2xsaXNpb25TaGFwZXMgPSBjb21wb3VuZC5tYXAoKHMpID0+IHRoaXMuY3JlYXRlQ29sbGlzaW9uU2hhcGUocy5zaGFwZSwgcykpO1xyXG4gICAgICAgICAgICBjb25zdCBjb21wb3VuZFNoYXBlID0gdGhpcy5tZXJnZUNvbGxpc2lvblNoYXBlc1RvQ29tcG91bmRTaGFwZShjb2xsaXNpb25TaGFwZXMpO1xyXG4gICAgICAgICAgICBjb25zdCBsb2NhbFRyYW5zZm9ybSA9IHRoaXMuZmluaXNoQ29sbGlzaW9uU2hhcGUoY29tcG91bmRTaGFwZSwgcG9zLCBxdWF0LCBzY2FsZSwgbWFyZ2luKTtcclxuICAgICAgICAgICAgY29uc3QgcmlnaWRCb2R5ID0gdGhpcy5jb2xsaXNpb25TaGFwZVRvUmlnaWRCb2R5KGNvbXBvdW5kU2hhcGUsIGxvY2FsVHJhbnNmb3JtLCBtYXNzLCBpc0tpbmVtYXRpY09iamVjdCk7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkUmlnaWRCb2R5VG9Xb3JsZChvYmplY3QsIHJpZ2lkQm9keSwgY29sbGlzaW9uRmxhZ3MsIGNvbGxpc2lvbkdyb3VwLCBjb2xsaXNpb25NYXNrLCBicmVha2FibGUsIG9mZnNldCk7XHJcbiAgICAgICAgICAgIG9iamVjdC5ib2R5Lmlnbm9yZVNjYWxlID0gaWdub3JlU2NhbGU7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgY29sbGlzaW9uU2hhcGVzID0gW107XHJcbiAgICAgICAgLy8gaWYgb2JqZWN0IGlzIGEgVEhSRUUuR3JvdXAsIG9iamVjdCBkb2VzIG5vdCBoYXZlIGEgbWVzaFxyXG4gICAgICAgIGlmIChzaGFwZSAhPT0gJ3Vua25vd24nIHx8IG9iamVjdC5pc01lc2gpIHtcclxuICAgICAgICAgICAgY29uc3QgcCA9IHRoaXMucHJlcGFyZVRocmVlT2JqZWN0Rm9yQ29sbGlzaW9uU2hhcGUob2JqZWN0LCBjb25maWcpO1xyXG4gICAgICAgICAgICBjb25zdCBjcyA9IHRoaXMuY3JlYXRlQ29sbGlzaW9uU2hhcGUocC5zaGFwZSwgcC5wYXJhbXMsIHAub2JqZWN0KTtcclxuICAgICAgICAgICAgY29sbGlzaW9uU2hhcGVzLnB1c2goY3MpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBjaGVjayBpZiB0aGUgb2JqZWN0IGhhcyBjaGlsZHJlblxyXG4gICAgICAgIGlmIChzaGFwZSA9PT0gJ3Vua25vd24nICYmIGFkZENoaWxkcmVuICYmIG9iamVjdC5jaGlsZHJlbi5sZW5ndGggPj0gMSkge1xyXG4gICAgICAgICAgICBvYmplY3QuY2hpbGRyZW4uZm9yRWFjaCgoY2hpbGQpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChjaGlsZC5pc01lc2gpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwID0gdGhpcy5wcmVwYXJlVGhyZWVPYmplY3RGb3JDb2xsaXNpb25TaGFwZShjaGlsZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY3MgPSB0aGlzLmNyZWF0ZUNvbGxpc2lvblNoYXBlKHAuc2hhcGUsIHAucGFyYW1zLCBwLm9iamVjdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICAgICAgICAgIGNzLm9mZnNldCA9IGNoaWxkLnBvc2l0aW9uLmNsb25lKCk7IC8vIHRoaXMgaXMgcmVsYXRpdmUgcG9zaXRpb24gdG8gaXRzIHBhcmVudFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbGxpc2lvblNoYXBlcy5wdXNoKGNzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEZBTExCQUNLOiBpZiB3ZSBkbyBub3QgaGF2ZSBhbnkgY29sbGlzaW9uU2hhcGVzIHlldCwgYWRkIGEgc2ltcGxlIGJveCBhcyBhIGZhbGxiYWNrXHJcbiAgICAgICAgaWYgKGNvbGxpc2lvblNoYXBlcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgY29uc3QgcCA9IHRoaXMucHJlcGFyZVRocmVlT2JqZWN0Rm9yQ29sbGlzaW9uU2hhcGUob2JqZWN0LCBjb25maWcpO1xyXG4gICAgICAgICAgICBjb25zdCBjcyA9IHRoaXMuY3JlYXRlQ29sbGlzaW9uU2hhcGUocC5zaGFwZSwgcC5wYXJhbXMsIHAub2JqZWN0KTtcclxuICAgICAgICAgICAgY29sbGlzaW9uU2hhcGVzLnB1c2goY3MpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBjb2xsaXNpb25TaGFwZSA9IGNvbGxpc2lvblNoYXBlcy5sZW5ndGggPT09IDEgPyBjb2xsaXNpb25TaGFwZXNbMF0gOiB0aGlzLm1lcmdlQ29sbGlzaW9uU2hhcGVzVG9Db21wb3VuZFNoYXBlKGNvbGxpc2lvblNoYXBlcyk7XHJcbiAgICAgICAgLy8gYWRkIHJpZ2lkIGJvZHlcclxuICAgICAgICAvLyBvYmplY3QucG9zaXRpb24uY29weShwb3MpXHJcbiAgICAgICAgLy8gb2JqZWN0LnF1YXRlcm5pb24uY29weShxdWF0KVxyXG4gICAgICAgIGNvbnN0IGxvY2FsVHJhbnNmb3JtID0gdGhpcy5maW5pc2hDb2xsaXNpb25TaGFwZShjb2xsaXNpb25TaGFwZSwgcG9zLCBxdWF0LCBzY2FsZSwgbWFyZ2luKTtcclxuICAgICAgICBjb25zdCByaWdpZEJvZHkgPSB0aGlzLmNvbGxpc2lvblNoYXBlVG9SaWdpZEJvZHkoY29sbGlzaW9uU2hhcGUsIGxvY2FsVHJhbnNmb3JtLCBtYXNzLCBpc0tpbmVtYXRpY09iamVjdCk7XHJcbiAgICAgICAgdGhpcy5hZGRSaWdpZEJvZHlUb1dvcmxkKG9iamVjdCwgcmlnaWRCb2R5LCBjb2xsaXNpb25GbGFncywgY29sbGlzaW9uR3JvdXAsIGNvbGxpc2lvbk1hc2ssIGJyZWFrYWJsZSwgb2Zmc2V0KTtcclxuICAgICAgICBvYmplY3QuYm9keS5pZ25vcmVTY2FsZSA9IGlnbm9yZVNjYWxlO1xyXG4gICAgfVxyXG4gICAgYWRkUmlnaWRCb2R5VG9Xb3JsZChvYmplY3QsIHJpZ2lkQm9keSwgY29sbGlzaW9uRmxhZ3MsIGNvbGxpc2lvbkdyb3VwLCBjb2xsaXNpb25NYXNrLCBicmVha2FibGUsIG9mZnNldCkge1xyXG4gICAgICAgIHRoaXMucmlnaWRCb2RpZXMucHVzaChvYmplY3QpO1xyXG4gICAgICAgIHRoaXMucGh5c2ljc1dvcmxkLmFkZFJpZ2lkQm9keShyaWdpZEJvZHksIGNvbGxpc2lvbkdyb3VwLCBjb2xsaXNpb25NYXNrKTtcclxuICAgICAgICBjb25zdCBwdHIgPSBPYmplY3QudmFsdWVzKHJpZ2lkQm9keSlbMF07XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIHJpZ2lkQm9keS5uYW1lID0gb2JqZWN0Lm5hbWU7XHJcbiAgICAgICAgb2JqZWN0LmJvZHkgPSBuZXcgcGh5c2ljc0JvZHlfMS5kZWZhdWx0KHRoaXMsIHJpZ2lkQm9keSk7XHJcbiAgICAgICAgb2JqZWN0Lmhhc0JvZHkgPSB0cnVlO1xyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICBvYmplY3QucHRyID0gcHRyO1xyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICByaWdpZEJvZHkudGhyZWVPYmplY3QgPSBvYmplY3Q7XHJcbiAgICAgICAgaWYgKGJyZWFrYWJsZSlcclxuICAgICAgICAgICAgb2JqZWN0LmJvZHkuYnJlYWthYmxlID0gdHJ1ZTtcclxuICAgICAgICBpZiAob2Zmc2V0KVxyXG4gICAgICAgICAgICBvYmplY3QuYm9keS5vZmZzZXQgPSBPYmplY3QuYXNzaWduKHsgeDogMCwgeTogMCwgejogMCB9LCBvZmZzZXQpO1xyXG4gICAgICAgIG9iamVjdC5ib2R5LnNldENvbGxpc2lvbkZsYWdzKGNvbGxpc2lvbkZsYWdzKTtcclxuICAgIH1cclxuICAgIGZpbmlzaENvbGxpc2lvblNoYXBlKGNvbGxpc2lvblNoYXBlLCBwb3MsIHF1YXQsIHNjYWxlLCBtYXJnaW4pIHtcclxuICAgICAgICBjb2xsaXNpb25TaGFwZS5zZXRNYXJnaW4obWFyZ2luKTtcclxuICAgICAgICBjb25zdCByb3RhdGlvbiA9IG5ldyBBbW1vLmJ0UXVhdGVybmlvbigwLCAwLCAwLCAxKTtcclxuICAgICAgICByb3RhdGlvbi5zZXRWYWx1ZShxdWF0LngsIHF1YXQueSwgcXVhdC56LCBxdWF0LncpO1xyXG4gICAgICAgIGNvbnN0IGxvY2FsVHJhbnNmb3JtID0gbmV3IEFtbW8uYnRUcmFuc2Zvcm0oKTtcclxuICAgICAgICBsb2NhbFRyYW5zZm9ybS5zZXRJZGVudGl0eSgpO1xyXG4gICAgICAgIGxvY2FsVHJhbnNmb3JtLmdldE9yaWdpbigpLnNldFZhbHVlKHBvcy54LCBwb3MueSwgcG9zLnopO1xyXG4gICAgICAgIGxvY2FsVHJhbnNmb3JtLnNldFJvdGF0aW9uKHJvdGF0aW9uKTtcclxuICAgICAgICBBbW1vLmRlc3Ryb3kocm90YXRpb24pO1xyXG4gICAgICAgIGNvbnN0IGxvY2FsU2NhbGUgPSBuZXcgQW1tby5idFZlY3RvcjMoc2NhbGUueCwgc2NhbGUueSwgc2NhbGUueik7XHJcbiAgICAgICAgY29sbGlzaW9uU2hhcGUuc2V0TG9jYWxTY2FsaW5nKGxvY2FsU2NhbGUpO1xyXG4gICAgICAgIEFtbW8uZGVzdHJveShsb2NhbFNjYWxlKTtcclxuICAgICAgICByZXR1cm4gbG9jYWxUcmFuc2Zvcm07XHJcbiAgICB9XHJcbiAgICBjb2xsaXNpb25TaGFwZVRvUmlnaWRCb2R5KGNvbGxpc2lvblNoYXBlLCBsb2NhbFRyYW5zZm9ybSwgbWFzcywgZGlzYWJsZURlYWN0aXZhdGlvbikge1xyXG4gICAgICAgIGNvbnN0IG1vdGlvblN0YXRlID0gbmV3IEFtbW8uYnREZWZhdWx0TW90aW9uU3RhdGUobG9jYWxUcmFuc2Zvcm0pO1xyXG4gICAgICAgIGNvbnN0IGxvY2FsSW5lcnRpYSA9IG5ldyBBbW1vLmJ0VmVjdG9yMygwLCAwLCAwKTtcclxuICAgICAgICBpZiAobWFzcyA+IDApXHJcbiAgICAgICAgICAgIGNvbGxpc2lvblNoYXBlLmNhbGN1bGF0ZUxvY2FsSW5lcnRpYShtYXNzLCBsb2NhbEluZXJ0aWEpO1xyXG4gICAgICAgIGNvbnN0IHJiSW5mbyA9IG5ldyBBbW1vLmJ0UmlnaWRCb2R5Q29uc3RydWN0aW9uSW5mbyhtYXNzLCBtb3Rpb25TdGF0ZSwgY29sbGlzaW9uU2hhcGUsIGxvY2FsSW5lcnRpYSk7XHJcbiAgICAgICAgY29uc3QgcmlnaWRCb2R5ID0gbmV3IEFtbW8uYnRSaWdpZEJvZHkocmJJbmZvKTtcclxuICAgICAgICBpZiAobWFzcyA+IDAgfHwgZGlzYWJsZURlYWN0aXZhdGlvbilcclxuICAgICAgICAgICAgcmlnaWRCb2R5LnNldEFjdGl2YXRpb25TdGF0ZSg0KTsgLy8gRGlzYWJsZSBkZWFjdGl2YXRpb25cclxuICAgICAgICByZXR1cm4gcmlnaWRCb2R5O1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydHMuQW1tb1BoeXNpY3MgPSBBbW1vUGh5c2ljcztcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGh5c2ljcy5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcclxuLyoqXHJcbiAqIEBhdXRob3IgICAgICAgWWFubmljayBEZXViZWwgKGh0dHBzOi8vZ2l0aHViLmNvbS95YW5kZXUpXHJcbiAqIEBjb3B5cmlnaHQgICAgQ29weXJpZ2h0IChjKSAyMDIwIFlhbm5pY2sgRGV1YmVsOyBQcm9qZWN0IFVybDogaHR0cHM6Ly9naXRodWIuY29tL2VuYWJsZTNkL2VuYWJsZTNkXHJcbiAqIEBsaWNlbnNlICAgICAge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9lbmFibGUzZC9lbmFibGUzZC9ibG9iL21hc3Rlci9MSUNFTlNFfEdOVSBHUEx2M31cclxuICovXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuY2xhc3MgQWxsSGl0c1JheVJlc3VsdENhbGxiYWNrIHtcclxuICAgIGNvbnN0cnVjdG9yKHBoeXNpY3MpIHtcclxuICAgICAgICB0aGlzLnBoeXNpY3MgPSBwaHlzaWNzO1xyXG4gICAgfVxyXG4gICAgZ2V0SGl0UG9pbnRzV29ybGQoKSB7XHJcbiAgICAgICAgY29uc3QgaCA9IHRoaXMuX2J0UmF5Q2FsbGJhY2suZ2V0X21faGl0UG9pbnRXb3JsZCgpO1xyXG4gICAgICAgIGNvbnN0IHBvaW50cyA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSBoLnNpemUoKSAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGhoID0gaC5hdChpKTtcclxuICAgICAgICAgICAgcG9pbnRzLnB1c2goeyB4OiBoaC54KCksIHk6IGhoLnkoKSwgejogaGgueigpIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcG9pbnRzO1xyXG4gICAgfVxyXG4gICAgLy8gVE9ETzogUmVtb3ZlIHRoaXMgaW4gZnV0dXJlIHZlcnNpb25zIVxyXG4gICAgZ2V0SGl0UG9pbnRXb3JsZCgpIHtcclxuICAgICAgICBjb25zb2xlLndhcm4oJ1tlbmFibGUzZF0gVXNlIGdldEhpdFBvaW50c1dvcmxkKCkgaW5zdGVhZCBvZiBnZXRIaXRQb2ludFdvcmxkKCkgZm9yIHRoZSBBbGxIaXRzUmF5Q2FzdGVyIScpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldEhpdFBvaW50c1dvcmxkKCk7XHJcbiAgICB9XHJcbiAgICBnZXRIaXROb3JtYWxzV29ybGQoKSB7XHJcbiAgICAgICAgY29uc3QgaCA9IHRoaXMuX2J0UmF5Q2FsbGJhY2suZ2V0X21faGl0Tm9ybWFsV29ybGQoKTtcclxuICAgICAgICBjb25zdCBub3JtYWxzID0gW107XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IGguc2l6ZSgpIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgICAgICAgY29uc3QgaGggPSBoLmF0KGkpO1xyXG4gICAgICAgICAgICBub3JtYWxzLnB1c2goeyB4OiBoaC54KCksIHk6IGhoLnkoKSwgejogaGgueigpIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbm9ybWFscztcclxuICAgIH1cclxuICAgIGdldENvbGxpc2lvbk9iamVjdHMoKSB7XHJcbiAgICAgICAgY29uc3QgdGhyZWVPYmplY3RzID0gW107XHJcbiAgICAgICAgY29uc3Qgb2JqZWN0cyA9IHRoaXMuX2J0UmF5Q2FsbGJhY2suZ2V0X21fY29sbGlzaW9uT2JqZWN0cygpO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSBvYmplY3RzLnNpemUoKSAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgY29uc3QgcmIgPSBBbW1vLmNhc3RPYmplY3Qob2JqZWN0cy5hdChpKSwgQW1tby5idFJpZ2lkQm9keSk7XHJcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgdGhyZWVPYmplY3RzLnB1c2gocmIudGhyZWVPYmplY3QpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhyZWVPYmplY3RzO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydHMuZGVmYXVsdCA9IEFsbEhpdHNSYXlSZXN1bHRDYWxsYmFjaztcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YWxsSGl0c1JheVJlc3VsdENhbGxiYWNrLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xyXG4vKipcclxuICogQGF1dGhvciAgICAgICBZYW5uaWNrIERldWJlbCAoaHR0cHM6Ly9naXRodWIuY29tL3lhbmRldSlcclxuICogQGNvcHlyaWdodCAgICBDb3B5cmlnaHQgKGMpIDIwMjAgWWFubmljayBEZXViZWw7IFByb2plY3QgVXJsOiBodHRwczovL2dpdGh1Yi5jb20vZW5hYmxlM2QvZW5hYmxlM2RcclxuICogQGxpY2Vuc2UgICAgICB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2VuYWJsZTNkL2VuYWJsZTNkL2Jsb2IvbWFzdGVyL0xJQ0VOU0V8R05VIEdQTHYzfVxyXG4gKi9cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5jbGFzcyBDbG9zZXN0UmF5UmVzdWx0Q2FsbGJhY2sge1xyXG4gICAgY29uc3RydWN0b3IocGh5c2ljcykge1xyXG4gICAgICAgIHRoaXMucGh5c2ljcyA9IHBoeXNpY3M7XHJcbiAgICB9XHJcbiAgICBnZXRIaXRQb2ludFdvcmxkKCkge1xyXG4gICAgICAgIGNvbnN0IGggPSB0aGlzLl9idFJheUNhbGxiYWNrLmdldF9tX2hpdFBvaW50V29ybGQoKTtcclxuICAgICAgICBjb25zdCBwb2ludCA9IHsgeDogaC54KCksIHk6IGgueSgpLCB6OiBoLnooKSB9O1xyXG4gICAgICAgIHJldHVybiBwb2ludDtcclxuICAgIH1cclxuICAgIGdldEhpdE5vcm1hbFdvcmxkKCkge1xyXG4gICAgICAgIGNvbnN0IGggPSB0aGlzLl9idFJheUNhbGxiYWNrLmdldF9tX2hpdE5vcm1hbFdvcmxkKCk7XHJcbiAgICAgICAgY29uc3Qgbm9ybWFsID0geyB4OiBoLngoKSwgeTogaC55KCksIHo6IGgueigpIH07XHJcbiAgICAgICAgcmV0dXJuIG5vcm1hbDtcclxuICAgIH1cclxuICAgIGdldENvbGxpc2lvbk9iamVjdCgpIHtcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgY29uc3QgcmIgPSBBbW1vLmNhc3RPYmplY3QodGhpcy5fYnRSYXlDYWxsYmFjay5nZXRfbV9jb2xsaXNpb25PYmplY3QoKSwgQW1tby5idFJpZ2lkQm9keSk7XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIHJldHVybiByYi50aHJlZU9iamVjdDtcclxuICAgIH1cclxufVxyXG5leHBvcnRzLmRlZmF1bHQgPSBDbG9zZXN0UmF5UmVzdWx0Q2FsbGJhY2s7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNsb3Nlc3RSYXlSZXN1bHRDYWxsYmFjay5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcclxuLyoqXHJcbiAqIEBhdXRob3IgICAgICAgWWFubmljayBEZXViZWwgKGh0dHBzOi8vZ2l0aHViLmNvbS95YW5kZXUpXHJcbiAqIEBjb3B5cmlnaHQgICAgQ29weXJpZ2h0IChjKSAyMDIwIFlhbm5pY2sgRGV1YmVsOyBQcm9qZWN0IFVybDogaHR0cHM6Ly9naXRodWIuY29tL2VuYWJsZTNkL2VuYWJsZTNkXHJcbiAqIEBsaWNlbnNlICAgICAge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9lbmFibGUzZC9lbmFibGUzZC9ibG9iL21hc3Rlci9MSUNFTlNFfEdOVSBHUEx2M31cclxuICovXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5BbGxIaXRzUmF5Y2FzdGVyID0gZXhwb3J0cy5DbG9zZXN0UmF5Y2FzdGVyID0gdm9pZCAwO1xyXG5jb25zdCBhcHBseU1peGluc18xID0gcmVxdWlyZShcIkBlbmFibGUzZC9jb21tb24vZGlzdC9hcHBseU1peGluc1wiKTtcclxuY29uc3QgY2xvc2VzdFJheVJlc3VsdENhbGxiYWNrXzEgPSByZXF1aXJlKFwiLi9jbG9zZXN0UmF5UmVzdWx0Q2FsbGJhY2tcIik7XHJcbmNvbnN0IGFsbEhpdHNSYXlSZXN1bHRDYWxsYmFja18xID0gcmVxdWlyZShcIi4vYWxsSGl0c1JheVJlc3VsdENhbGxiYWNrXCIpO1xyXG5jbGFzcyBSYXljYXN0ZXIge1xyXG4gICAgY29uc3RydWN0b3IocGh5c2ljcykge1xyXG4gICAgICAgIHRoaXMucGh5c2ljcyA9IHBoeXNpY3M7XHJcbiAgICB9XHJcbiAgICBzZXRSYXlGcm9tV29ybGQoeCA9IDAsIHkgPSAwLCB6ID0gMCkge1xyXG4gICAgICAgIHRoaXMuX2J0UmF5RnJvbS5zZXRWYWx1ZSh4LCB5LCB6KTtcclxuICAgIH1cclxuICAgIHNldFJheVRvV29ybGQoeCA9IDAsIHkgPSAwLCB6ID0gMCkge1xyXG4gICAgICAgIHRoaXMuX2J0UmF5VG8uc2V0VmFsdWUoeCwgeSwgeik7XHJcbiAgICB9XHJcbiAgICBoYXNIaXQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2J0UmF5Q2FsbGJhY2suaGFzSGl0KCk7XHJcbiAgICB9XHJcbiAgICByYXlUZXN0KCkge1xyXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5fYnRSYXlDYWxsYmFjayAhPT0gJ3VuZGVmaW5lZCcpXHJcbiAgICAgICAgICAgIEFtbW8uZGVzdHJveSh0aGlzLl9idFJheUNhbGxiYWNrKTtcclxuICAgICAgICB0aGlzLl9idFJheUNhbGxiYWNrID1cclxuICAgICAgICAgICAgdGhpcy50eXBlID09PSAnY2xvc2VzdCdcclxuICAgICAgICAgICAgICAgID8gbmV3IEFtbW8uQ2xvc2VzdFJheVJlc3VsdENhbGxiYWNrKHRoaXMuX2J0UmF5RnJvbSwgdGhpcy5fYnRSYXlUbylcclxuICAgICAgICAgICAgICAgIDogbmV3IEFtbW8uQWxsSGl0c1JheVJlc3VsdENhbGxiYWNrKHRoaXMuX2J0UmF5RnJvbSwgdGhpcy5fYnRSYXlUbyk7XHJcbiAgICAgICAgdGhpcy5waHlzaWNzLnBoeXNpY3NXb3JsZC5yYXlUZXN0KHRoaXMuX2J0UmF5RnJvbSwgdGhpcy5fYnRSYXlUbywgdGhpcy5fYnRSYXlDYWxsYmFjayk7XHJcbiAgICB9XHJcbiAgICBkZXN0cm95KCkge1xyXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5fYnRSYXlGcm9tICE9PSAndW5kZWZpbmVkJylcclxuICAgICAgICAgICAgQW1tby5kZXN0cm95KHRoaXMuX2J0UmF5RnJvbSk7XHJcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLl9idFJheVRvICE9PSAndW5kZWZpbmVkJylcclxuICAgICAgICAgICAgQW1tby5kZXN0cm95KHRoaXMuX2J0UmF5VG8pO1xyXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5fYnRSYXlDYWxsYmFjayAhPT0gJ3VuZGVmaW5lZCcpXHJcbiAgICAgICAgICAgIEFtbW8uZGVzdHJveSh0aGlzLl9idFJheUNhbGxiYWNrKTtcclxuICAgIH1cclxufVxyXG5jbGFzcyBDbG9zZXN0UmF5Y2FzdGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKHBoeXNpY3MpIHtcclxuICAgICAgICB0aGlzLnBoeXNpY3MgPSBwaHlzaWNzO1xyXG4gICAgICAgIHRoaXMudHlwZSA9ICdjbG9zZXN0JztcclxuICAgICAgICB0aGlzLl9idFJheUZyb20gPSBuZXcgQW1tby5idFZlY3RvcjMoMCwgMCwgMCk7XHJcbiAgICAgICAgdGhpcy5fYnRSYXlUbyA9IG5ldyBBbW1vLmJ0VmVjdG9yMygwLCAwLCAwKTtcclxuICAgIH1cclxufVxyXG5leHBvcnRzLkNsb3Nlc3RSYXljYXN0ZXIgPSBDbG9zZXN0UmF5Y2FzdGVyO1xyXG5jbGFzcyBBbGxIaXRzUmF5Y2FzdGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKHBoeXNpY3MpIHtcclxuICAgICAgICB0aGlzLnBoeXNpY3MgPSBwaHlzaWNzO1xyXG4gICAgICAgIHRoaXMudHlwZSA9ICdhbGxIaXRzJztcclxuICAgICAgICB0aGlzLl9idFJheUZyb20gPSBuZXcgQW1tby5idFZlY3RvcjMoMCwgMCwgMCk7XHJcbiAgICAgICAgdGhpcy5fYnRSYXlUbyA9IG5ldyBBbW1vLmJ0VmVjdG9yMygwLCAwLCAwKTtcclxuICAgIH1cclxufVxyXG5leHBvcnRzLkFsbEhpdHNSYXljYXN0ZXIgPSBBbGxIaXRzUmF5Y2FzdGVyO1xyXG5hcHBseU1peGluc18xLmRlZmF1bHQoQ2xvc2VzdFJheWNhc3RlciwgW1JheWNhc3RlciwgY2xvc2VzdFJheVJlc3VsdENhbGxiYWNrXzEuZGVmYXVsdF0pO1xyXG5hcHBseU1peGluc18xLmRlZmF1bHQoQWxsSGl0c1JheWNhc3RlciwgW1JheWNhc3RlciwgYWxsSGl0c1JheVJlc3VsdENhbGxiYWNrXzEuZGVmYXVsdF0pO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1yYXljYXN0ZXIuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbi8qKlxyXG4gKiBAYXV0aG9yICAgICAgIFlhbm5pY2sgRGV1YmVsIChodHRwczovL2dpdGh1Yi5jb20veWFuZGV1KVxyXG4gKiBAY29weXJpZ2h0ICAgIENvcHlyaWdodCAoYykgMjAyMCBZYW5uaWNrIERldWJlbDsgUHJvamVjdCBVcmw6IGh0dHBzOi8vZ2l0aHViLmNvbS9lbmFibGUzZC9lbmFibGUzZFxyXG4gKiBAbGljZW5zZSAgICAgIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZW5hYmxlM2QvZW5hYmxlM2QvYmxvYi9tYXN0ZXIvTElDRU5TRXxHTlUgR1BMdjN9XHJcbiAqL1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmNsYXNzIFNoYXBlcyB7XHJcbiAgICBjb25zdHJ1Y3RvcihmYWN0b3J5LCBhZGRFeGlzdGluZykge1xyXG4gICAgICAgIHRoaXMuZmFjdG9yeSA9IGZhY3Rvcnk7XHJcbiAgICAgICAgdGhpcy5hZGRFeGlzdGluZyA9IGFkZEV4aXN0aW5nO1xyXG4gICAgfVxyXG4gICAgYWRkUGxhbmUocGxhbmVDb25maWcgPSB7fSwgbWF0ZXJpYWxDb25maWcgPSB7fSkge1xyXG4gICAgICAgIGNvbnN0IHBsYW5lID0gdGhpcy5mYWN0b3J5LmFkZC5wbGFuZShwbGFuZUNvbmZpZywgbWF0ZXJpYWxDb25maWcpO1xyXG4gICAgICAgIHRoaXMuYWRkRXhpc3RpbmcocGxhbmUsIHBsYW5lQ29uZmlnKTtcclxuICAgICAgICByZXR1cm4gcGxhbmU7XHJcbiAgICB9XHJcbiAgICBhZGRTcGhlcmUoc3BoZXJlQ29uZmlnID0ge30sIG1hdGVyaWFsQ29uZmlnID0ge30pIHtcclxuICAgICAgICBjb25zdCBzcGhlcmUgPSB0aGlzLmZhY3RvcnkuYWRkLnNwaGVyZShzcGhlcmVDb25maWcsIG1hdGVyaWFsQ29uZmlnKTtcclxuICAgICAgICB0aGlzLmFkZEV4aXN0aW5nKHNwaGVyZSwgc3BoZXJlQ29uZmlnKTtcclxuICAgICAgICByZXR1cm4gc3BoZXJlO1xyXG4gICAgfVxyXG4gICAgYWRkQm94KGJveENvbmZpZyA9IHt9LCBtYXRlcmlhbENvbmZpZyA9IHt9KSB7XHJcbiAgICAgICAgY29uc3QgYm94ID0gdGhpcy5mYWN0b3J5LmFkZC5ib3goYm94Q29uZmlnLCBtYXRlcmlhbENvbmZpZyk7XHJcbiAgICAgICAgdGhpcy5hZGRFeGlzdGluZyhib3gsIGJveENvbmZpZyk7XHJcbiAgICAgICAgcmV0dXJuIGJveDtcclxuICAgIH1cclxuICAgIGFkZEdyb3VuZChncm91bmRDb25maWcsIG1hdGVyaWFsQ29uZmlnID0ge30pIHtcclxuICAgICAgICBjb25zdCBncm91bmQgPSB0aGlzLmZhY3RvcnkuYWRkLmdyb3VuZChncm91bmRDb25maWcsIG1hdGVyaWFsQ29uZmlnKTtcclxuICAgICAgICBjb25zdCBjb25maWcgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGdyb3VuZENvbmZpZyksIHsgbWFzczogMCwgY29sbGlzaW9uRmxhZ3M6IDEgfSk7XHJcbiAgICAgICAgdGhpcy5hZGRFeGlzdGluZyhncm91bmQsIGNvbmZpZyk7XHJcbiAgICAgICAgcmV0dXJuIGdyb3VuZDtcclxuICAgIH1cclxuICAgIGFkZEN5bGluZGVyKGN5bGluZGVyQ29uZmlnID0ge30sIG1hdGVyaWFsQ29uZmlnID0ge30pIHtcclxuICAgICAgICBjb25zdCBjeWxpbmRlciA9IHRoaXMuZmFjdG9yeS5hZGQuY3lsaW5kZXIoY3lsaW5kZXJDb25maWcsIG1hdGVyaWFsQ29uZmlnKTtcclxuICAgICAgICB0aGlzLmFkZEV4aXN0aW5nKGN5bGluZGVyLCBjeWxpbmRlckNvbmZpZyk7XHJcbiAgICAgICAgcmV0dXJuIGN5bGluZGVyO1xyXG4gICAgfVxyXG4gICAgYWRkQ29uZShjb25lQ29uZmlnID0ge30sIG1hdGVyaWFsQ29uZmlnID0ge30pIHtcclxuICAgICAgICBjb25zdCBjb25lID0gdGhpcy5mYWN0b3J5LmFkZC5jb25lKGNvbmVDb25maWcsIG1hdGVyaWFsQ29uZmlnKTtcclxuICAgICAgICB0aGlzLmFkZEV4aXN0aW5nKGNvbmUsIGNvbmVDb25maWcpO1xyXG4gICAgICAgIHJldHVybiBjb25lO1xyXG4gICAgfVxyXG4gICAgYWRkVG9ydXModG9ydXNDb25maWcgPSB7fSwgbWF0ZXJpYWxDb25maWcgPSB7fSkge1xyXG4gICAgICAgIGNvbnN0IHRvcnVzID0gdGhpcy5mYWN0b3J5LmFkZC50b3J1cyh0b3J1c0NvbmZpZywgbWF0ZXJpYWxDb25maWcpO1xyXG4gICAgICAgIHRoaXMuYWRkRXhpc3RpbmcodG9ydXMsIHRvcnVzQ29uZmlnKTtcclxuICAgICAgICByZXR1cm4gdG9ydXM7XHJcbiAgICB9XHJcbiAgICBhZGRFeHRydWRlKGV4dHJ1ZGVDb25maWcsIG1hdGVyaWFsQ29uZmlnID0ge30pIHtcclxuICAgICAgICBjb25zdCBvYmplY3QgPSB0aGlzLmZhY3RvcnkuYWRkLmV4dHJ1ZGUoZXh0cnVkZUNvbmZpZywgbWF0ZXJpYWxDb25maWcpO1xyXG4gICAgICAgIG9iamVjdC50cmFuc2xhdGVYKDEpO1xyXG4gICAgICAgIHRoaXMuYWRkRXhpc3Rpbmcob2JqZWN0KTtcclxuICAgICAgICByZXR1cm4gb2JqZWN0O1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydHMuZGVmYXVsdCA9IFNoYXBlcztcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2hhcGVzLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xyXG4vKipcclxuICogQGF1dGhvciAgICAgICBZYW5uaWNrIERldWJlbCAoaHR0cHM6Ly9naXRodWIuY29tL3lhbmRldSlcclxuICogQGNvcHlyaWdodCAgICBDb3B5cmlnaHQgKGMpIDIwMjAgWWFubmljayBEZXViZWw7IFByb2plY3QgVXJsOiBodHRwczovL2dpdGh1Yi5jb20vZW5hYmxlM2QvZW5hYmxlM2RcclxuICogQGRlc2NyaXB0aW9uICBUaGlzIGlzIGEgbW9kaWZpZWQgdmVyc2lvbiBvZiB0aGUgb3JpZ2luYWwgY29kZSBmcm9tIEtldmluIExlZVxyXG4gKiAoSW5jbHVkZXMgbGF0ZXN0IHRocmVlLXRvLWFtbW8gY29tbWl0IGZyb20gQXVndXN0IDYsIDIwMjApXHJcbiAqL1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuaXRlcmF0ZUdlb21ldHJpZXMgPSBleHBvcnRzLmNyZWF0ZUhlaWdodGZpZWxkVGVycmFpblNoYXBlID0gZXhwb3J0cy5jcmVhdGVUcmlNZXNoU2hhcGUgPSBleHBvcnRzLmNyZWF0ZVZIQUNEU2hhcGVzID0gZXhwb3J0cy5jcmVhdGVIQUNEU2hhcGVzID0gZXhwb3J0cy5jcmVhdGVIdWxsU2hhcGUgPSBleHBvcnRzLmNyZWF0ZVNwaGVyZVNoYXBlID0gZXhwb3J0cy5jcmVhdGVDb25lU2hhcGUgPSBleHBvcnRzLmNyZWF0ZUNhcHN1bGVTaGFwZSA9IGV4cG9ydHMuY3JlYXRlQ3lsaW5kZXJTaGFwZSA9IGV4cG9ydHMuY3JlYXRlQm94U2hhcGUgPSBleHBvcnRzLmNyZWF0ZUNvbGxpc2lvblNoYXBlcyA9IGV4cG9ydHMuSEVJR0hURklFTERfREFUQV9UWVBFID0gZXhwb3J0cy5GSVQgPSBleHBvcnRzLlRZUEUgPSB2b2lkIDA7XHJcbi8qKlxyXG4gKiBAYXV0aG9yICAgICAgIEtldmluIExlZSAoaHR0cHM6Ly9naXRodWIuY29tL0luZmluaXRlTGVlKVxyXG4gKiBAY29weXJpZ2h0ICAgIENvcHlyaWdodCAoYykgMjAyMCBLZXZpbiBMZWU7IFByb2plY3QgVXJsOiBodHRwczovL2dpdGh1Yi5jb20vSW5maW5pdGVMZWUvdGhyZWUtdG8tYW1tb1xyXG4gKiBAbGljZW5zZSAgICAgIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vSW5maW5pdGVMZWUvdGhyZWUtdG8tYW1tby9ibG9iL21hc3Rlci9MSUNFTlNFfE1QTC0yLjB9XHJcbiAqL1xyXG5jb25zdCBpbmRleF8xID0gcmVxdWlyZShcIkBlbmFibGUzZC90aHJlZS13cmFwcGVyL2Rpc3QvaW5kZXhcIik7XHJcbigndXNlIHN0cmljdCcpO1xyXG4vKiBnbG9iYWwgQW1tbyAqL1xyXG5leHBvcnRzLlRZUEUgPSB7XHJcbiAgICBCT1g6ICdib3gnLFxyXG4gICAgQ1lMSU5ERVI6ICdjeWxpbmRlcicsXHJcbiAgICBTUEhFUkU6ICdzcGhlcmUnLFxyXG4gICAgQ0FQU1VMRTogJ2NhcHN1bGUnLFxyXG4gICAgQ09ORTogJ2NvbmUnLFxyXG4gICAgSFVMTDogJ2h1bGwnLFxyXG4gICAgSEFDRDogJ2hhY2QnLFxyXG4gICAgVkhBQ0Q6ICd2aGFjZCcsXHJcbiAgICBNRVNIOiAnbWVzaCcsXHJcbiAgICBIRUlHSFRGSUVMRDogJ2hlaWdodGZpZWxkJ1xyXG59O1xyXG5leHBvcnRzLkZJVCA9IHtcclxuICAgIEFMTDogJ2FsbCcsXHJcbiAgICBNQU5VQUw6ICdtYW51YWwnIC8vQSBzaW5nbGUgc2hhcGUgaXMgc2l6ZWQgbWFudWFsbHkuIFJlcXVpcmVzIGhhbGZFeHRlbnRzIG9yIHNwaGVyZVJhZGl1cy5cclxufTtcclxuZXhwb3J0cy5IRUlHSFRGSUVMRF9EQVRBX1RZUEUgPSB7XHJcbiAgICBzaG9ydDogJ3Nob3J0JyxcclxuICAgIGZsb2F0OiAnZmxvYXQnXHJcbn07XHJcbmNvbnN0IGNyZWF0ZUNvbGxpc2lvblNoYXBlcyA9IGZ1bmN0aW9uICh2ZXJ0aWNlcywgbWF0cmljZXMsIGluZGV4ZXMsIG1hdHJpeFdvcmxkLCBvcHRpb25zID0ge30pIHtcclxuICAgIHN3aXRjaCAob3B0aW9ucy50eXBlKSB7XHJcbiAgICAgICAgY2FzZSBleHBvcnRzLlRZUEUuQk9YOlxyXG4gICAgICAgICAgICByZXR1cm4gW2V4cG9ydHMuY3JlYXRlQm94U2hhcGUodmVydGljZXMsIG1hdHJpY2VzLCBtYXRyaXhXb3JsZCwgb3B0aW9ucyldO1xyXG4gICAgICAgIGNhc2UgZXhwb3J0cy5UWVBFLkNZTElOREVSOlxyXG4gICAgICAgICAgICByZXR1cm4gW2V4cG9ydHMuY3JlYXRlQ3lsaW5kZXJTaGFwZSh2ZXJ0aWNlcywgbWF0cmljZXMsIG1hdHJpeFdvcmxkLCBvcHRpb25zKV07XHJcbiAgICAgICAgY2FzZSBleHBvcnRzLlRZUEUuQ0FQU1VMRTpcclxuICAgICAgICAgICAgcmV0dXJuIFtleHBvcnRzLmNyZWF0ZUNhcHN1bGVTaGFwZSh2ZXJ0aWNlcywgbWF0cmljZXMsIG1hdHJpeFdvcmxkLCBvcHRpb25zKV07XHJcbiAgICAgICAgY2FzZSBleHBvcnRzLlRZUEUuQ09ORTpcclxuICAgICAgICAgICAgcmV0dXJuIFtleHBvcnRzLmNyZWF0ZUNvbmVTaGFwZSh2ZXJ0aWNlcywgbWF0cmljZXMsIG1hdHJpeFdvcmxkLCBvcHRpb25zKV07XHJcbiAgICAgICAgY2FzZSBleHBvcnRzLlRZUEUuU1BIRVJFOlxyXG4gICAgICAgICAgICByZXR1cm4gW2V4cG9ydHMuY3JlYXRlU3BoZXJlU2hhcGUodmVydGljZXMsIG1hdHJpY2VzLCBtYXRyaXhXb3JsZCwgb3B0aW9ucyldO1xyXG4gICAgICAgIGNhc2UgZXhwb3J0cy5UWVBFLkhVTEw6XHJcbiAgICAgICAgICAgIHJldHVybiBbZXhwb3J0cy5jcmVhdGVIdWxsU2hhcGUodmVydGljZXMsIG1hdHJpY2VzLCBtYXRyaXhXb3JsZCwgb3B0aW9ucyldO1xyXG4gICAgICAgIGNhc2UgZXhwb3J0cy5UWVBFLkhBQ0Q6XHJcbiAgICAgICAgICAgIHJldHVybiBleHBvcnRzLmNyZWF0ZUhBQ0RTaGFwZXModmVydGljZXMsIG1hdHJpY2VzLCBpbmRleGVzLCBtYXRyaXhXb3JsZCwgb3B0aW9ucyk7XHJcbiAgICAgICAgY2FzZSBleHBvcnRzLlRZUEUuVkhBQ0Q6XHJcbiAgICAgICAgICAgIHJldHVybiBleHBvcnRzLmNyZWF0ZVZIQUNEU2hhcGVzKHZlcnRpY2VzLCBtYXRyaWNlcywgaW5kZXhlcywgbWF0cml4V29ybGQsIG9wdGlvbnMpO1xyXG4gICAgICAgIGNhc2UgZXhwb3J0cy5UWVBFLk1FU0g6XHJcbiAgICAgICAgICAgIHJldHVybiBbZXhwb3J0cy5jcmVhdGVUcmlNZXNoU2hhcGUodmVydGljZXMsIG1hdHJpY2VzLCBpbmRleGVzLCBtYXRyaXhXb3JsZCwgb3B0aW9ucyldO1xyXG4gICAgICAgIGNhc2UgZXhwb3J0cy5UWVBFLkhFSUdIVEZJRUxEOlxyXG4gICAgICAgICAgICByZXR1cm4gW2V4cG9ydHMuY3JlYXRlSGVpZ2h0ZmllbGRUZXJyYWluU2hhcGUob3B0aW9ucyldO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihvcHRpb25zLnR5cGUgKyAnIGlzIG5vdCBjdXJyZW50bHkgc3VwcG9ydGVkJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxufTtcclxuZXhwb3J0cy5jcmVhdGVDb2xsaXNpb25TaGFwZXMgPSBjcmVhdGVDb2xsaXNpb25TaGFwZXM7XHJcbi8vVE9ETzogc3VwcG9ydCBnaW1wYWN0IChkeW5hbWljIHRyaW1lc2gpIGFuZCBoZWlnaHRtYXBcclxuY29uc3QgY3JlYXRlQm94U2hhcGUgPSBmdW5jdGlvbiAodmVydGljZXMsIG1hdHJpY2VzLCBtYXRyaXhXb3JsZCwgb3B0aW9ucyA9IHt9KSB7XHJcbiAgICBvcHRpb25zLnR5cGUgPSBleHBvcnRzLlRZUEUuQk9YO1xyXG4gICAgX3NldE9wdGlvbnMob3B0aW9ucyk7XHJcbiAgICBpZiAob3B0aW9ucy5maXQgPT09IGV4cG9ydHMuRklULkFMTCkge1xyXG4gICAgICAgIG9wdGlvbnMuaGFsZkV4dGVudHMgPSBfY29tcHV0ZUhhbGZFeHRlbnRzKF9jb21wdXRlQm91bmRzKHZlcnRpY2VzLCBtYXRyaWNlcyksIG9wdGlvbnMubWluSGFsZkV4dGVudCwgb3B0aW9ucy5tYXhIYWxmRXh0ZW50KTtcclxuICAgIH1cclxuICAgIGNvbnN0IGJ0SGFsZkV4dGVudHMgPSBuZXcgQW1tby5idFZlY3RvcjMob3B0aW9ucy5oYWxmRXh0ZW50cy54LCBvcHRpb25zLmhhbGZFeHRlbnRzLnksIG9wdGlvbnMuaGFsZkV4dGVudHMueik7XHJcbiAgICBjb25zdCBjb2xsaXNpb25TaGFwZSA9IG5ldyBBbW1vLmJ0Qm94U2hhcGUoYnRIYWxmRXh0ZW50cyk7XHJcbiAgICBBbW1vLmRlc3Ryb3koYnRIYWxmRXh0ZW50cyk7XHJcbiAgICBfZmluaXNoQ29sbGlzaW9uU2hhcGUoY29sbGlzaW9uU2hhcGUsIG9wdGlvbnMsIF9jb21wdXRlU2NhbGUobWF0cml4V29ybGQsIG9wdGlvbnMpKTtcclxuICAgIHJldHVybiBjb2xsaXNpb25TaGFwZTtcclxufTtcclxuZXhwb3J0cy5jcmVhdGVCb3hTaGFwZSA9IGNyZWF0ZUJveFNoYXBlO1xyXG5jb25zdCBjcmVhdGVDeWxpbmRlclNoYXBlID0gZnVuY3Rpb24gKHZlcnRpY2VzLCBtYXRyaWNlcywgbWF0cml4V29ybGQsIG9wdGlvbnMgPSB7fSkge1xyXG4gICAgb3B0aW9ucy50eXBlID0gZXhwb3J0cy5UWVBFLkNZTElOREVSO1xyXG4gICAgX3NldE9wdGlvbnMob3B0aW9ucyk7XHJcbiAgICBpZiAob3B0aW9ucy5maXQgPT09IGV4cG9ydHMuRklULkFMTCkge1xyXG4gICAgICAgIG9wdGlvbnMuaGFsZkV4dGVudHMgPSBfY29tcHV0ZUhhbGZFeHRlbnRzKF9jb21wdXRlQm91bmRzKHZlcnRpY2VzLCBtYXRyaWNlcyksIG9wdGlvbnMubWluSGFsZkV4dGVudCwgb3B0aW9ucy5tYXhIYWxmRXh0ZW50KTtcclxuICAgIH1cclxuICAgIGNvbnN0IGJ0SGFsZkV4dGVudHMgPSBuZXcgQW1tby5idFZlY3RvcjMob3B0aW9ucy5oYWxmRXh0ZW50cy54LCBvcHRpb25zLmhhbGZFeHRlbnRzLnksIG9wdGlvbnMuaGFsZkV4dGVudHMueik7XHJcbiAgICBjb25zdCBjb2xsaXNpb25TaGFwZSA9ICgoKSA9PiB7XHJcbiAgICAgICAgc3dpdGNoIChvcHRpb25zLmN5bGluZGVyQXhpcykge1xyXG4gICAgICAgICAgICBjYXNlICd5JzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQW1tby5idEN5bGluZGVyU2hhcGUoYnRIYWxmRXh0ZW50cyk7XHJcbiAgICAgICAgICAgIGNhc2UgJ3gnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBbW1vLmJ0Q3lsaW5kZXJTaGFwZVgoYnRIYWxmRXh0ZW50cyk7XHJcbiAgICAgICAgICAgIGNhc2UgJ3onOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBbW1vLmJ0Q3lsaW5kZXJTaGFwZVooYnRIYWxmRXh0ZW50cyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfSkoKTtcclxuICAgIEFtbW8uZGVzdHJveShidEhhbGZFeHRlbnRzKTtcclxuICAgIF9maW5pc2hDb2xsaXNpb25TaGFwZShjb2xsaXNpb25TaGFwZSwgb3B0aW9ucywgX2NvbXB1dGVTY2FsZShtYXRyaXhXb3JsZCwgb3B0aW9ucykpO1xyXG4gICAgcmV0dXJuIGNvbGxpc2lvblNoYXBlO1xyXG59O1xyXG5leHBvcnRzLmNyZWF0ZUN5bGluZGVyU2hhcGUgPSBjcmVhdGVDeWxpbmRlclNoYXBlO1xyXG5jb25zdCBjcmVhdGVDYXBzdWxlU2hhcGUgPSBmdW5jdGlvbiAodmVydGljZXMsIG1hdHJpY2VzLCBtYXRyaXhXb3JsZCwgb3B0aW9ucyA9IHt9KSB7XHJcbiAgICBvcHRpb25zLnR5cGUgPSBleHBvcnRzLlRZUEUuQ0FQU1VMRTtcclxuICAgIF9zZXRPcHRpb25zKG9wdGlvbnMpO1xyXG4gICAgaWYgKG9wdGlvbnMuZml0ID09PSBleHBvcnRzLkZJVC5BTEwpIHtcclxuICAgICAgICBvcHRpb25zLmhhbGZFeHRlbnRzID0gX2NvbXB1dGVIYWxmRXh0ZW50cyhfY29tcHV0ZUJvdW5kcyh2ZXJ0aWNlcywgbWF0cmljZXMpLCBvcHRpb25zLm1pbkhhbGZFeHRlbnQsIG9wdGlvbnMubWF4SGFsZkV4dGVudCk7XHJcbiAgICB9XHJcbiAgICBjb25zdCB7IHgsIHksIHogfSA9IG9wdGlvbnMuaGFsZkV4dGVudHM7XHJcbiAgICBjb25zdCBjb2xsaXNpb25TaGFwZSA9ICgoKSA9PiB7XHJcbiAgICAgICAgc3dpdGNoIChvcHRpb25zLmN5bGluZGVyQXhpcykge1xyXG4gICAgICAgICAgICBjYXNlICd5JzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQW1tby5idENhcHN1bGVTaGFwZShNYXRoLm1heCh4LCB6KSwgeSAqIDIpO1xyXG4gICAgICAgICAgICBjYXNlICd4JzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQW1tby5idENhcHN1bGVTaGFwZVgoTWF0aC5tYXgoeSwgeiksIHggKiAyKTtcclxuICAgICAgICAgICAgY2FzZSAneic6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEFtbW8uYnRDYXBzdWxlU2hhcGVaKE1hdGgubWF4KHgsIHkpLCB6ICogMik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfSkoKTtcclxuICAgIF9maW5pc2hDb2xsaXNpb25TaGFwZShjb2xsaXNpb25TaGFwZSwgb3B0aW9ucywgX2NvbXB1dGVTY2FsZShtYXRyaXhXb3JsZCwgb3B0aW9ucykpO1xyXG4gICAgcmV0dXJuIGNvbGxpc2lvblNoYXBlO1xyXG59O1xyXG5leHBvcnRzLmNyZWF0ZUNhcHN1bGVTaGFwZSA9IGNyZWF0ZUNhcHN1bGVTaGFwZTtcclxuY29uc3QgY3JlYXRlQ29uZVNoYXBlID0gZnVuY3Rpb24gKHZlcnRpY2VzLCBtYXRyaWNlcywgbWF0cml4V29ybGQsIG9wdGlvbnMgPSB7fSkge1xyXG4gICAgb3B0aW9ucy50eXBlID0gZXhwb3J0cy5UWVBFLkNPTkU7XHJcbiAgICBfc2V0T3B0aW9ucyhvcHRpb25zKTtcclxuICAgIGlmIChvcHRpb25zLmZpdCA9PT0gZXhwb3J0cy5GSVQuQUxMKSB7XHJcbiAgICAgICAgb3B0aW9ucy5oYWxmRXh0ZW50cyA9IF9jb21wdXRlSGFsZkV4dGVudHMoX2NvbXB1dGVCb3VuZHModmVydGljZXMsIG1hdHJpY2VzKSwgb3B0aW9ucy5taW5IYWxmRXh0ZW50LCBvcHRpb25zLm1heEhhbGZFeHRlbnQpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgeyB4LCB5LCB6IH0gPSBvcHRpb25zLmhhbGZFeHRlbnRzO1xyXG4gICAgY29uc3QgY29sbGlzaW9uU2hhcGUgPSAoKCkgPT4ge1xyXG4gICAgICAgIHN3aXRjaCAob3B0aW9ucy5jeWxpbmRlckF4aXMpIHtcclxuICAgICAgICAgICAgY2FzZSAneSc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEFtbW8uYnRDb25lU2hhcGUoTWF0aC5tYXgoeCwgeiksIHkgKiAyKTtcclxuICAgICAgICAgICAgY2FzZSAneCc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEFtbW8uYnRDb25lU2hhcGVYKE1hdGgubWF4KHksIHopLCB4ICogMik7XHJcbiAgICAgICAgICAgIGNhc2UgJ3onOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBbW1vLmJ0Q29uZVNoYXBlWihNYXRoLm1heCh4LCB5KSwgeiAqIDIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH0pKCk7XHJcbiAgICBfZmluaXNoQ29sbGlzaW9uU2hhcGUoY29sbGlzaW9uU2hhcGUsIG9wdGlvbnMsIF9jb21wdXRlU2NhbGUobWF0cml4V29ybGQsIG9wdGlvbnMpKTtcclxuICAgIHJldHVybiBjb2xsaXNpb25TaGFwZTtcclxufTtcclxuZXhwb3J0cy5jcmVhdGVDb25lU2hhcGUgPSBjcmVhdGVDb25lU2hhcGU7XHJcbmNvbnN0IGNyZWF0ZVNwaGVyZVNoYXBlID0gZnVuY3Rpb24gKHZlcnRpY2VzLCBtYXRyaWNlcywgbWF0cml4V29ybGQsIG9wdGlvbnMgPSB7fSkge1xyXG4gICAgb3B0aW9ucy50eXBlID0gZXhwb3J0cy5UWVBFLlNQSEVSRTtcclxuICAgIF9zZXRPcHRpb25zKG9wdGlvbnMpO1xyXG4gICAgbGV0IHJhZGl1cztcclxuICAgIGlmIChvcHRpb25zLmZpdCA9PT0gZXhwb3J0cy5GSVQuTUFOVUFMICYmICFpc05hTihvcHRpb25zLnNwaGVyZVJhZGl1cykpIHtcclxuICAgICAgICByYWRpdXMgPSBvcHRpb25zLnNwaGVyZVJhZGl1cztcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJhZGl1cyA9IF9jb21wdXRlUmFkaXVzKHZlcnRpY2VzLCBtYXRyaWNlcywgX2NvbXB1dGVCb3VuZHModmVydGljZXMsIG1hdHJpY2VzKSk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBjb2xsaXNpb25TaGFwZSA9IG5ldyBBbW1vLmJ0U3BoZXJlU2hhcGUocmFkaXVzKTtcclxuICAgIF9maW5pc2hDb2xsaXNpb25TaGFwZShjb2xsaXNpb25TaGFwZSwgb3B0aW9ucywgX2NvbXB1dGVTY2FsZShtYXRyaXhXb3JsZCwgb3B0aW9ucykpO1xyXG4gICAgcmV0dXJuIGNvbGxpc2lvblNoYXBlO1xyXG59O1xyXG5leHBvcnRzLmNyZWF0ZVNwaGVyZVNoYXBlID0gY3JlYXRlU3BoZXJlU2hhcGU7XHJcbmV4cG9ydHMuY3JlYXRlSHVsbFNoYXBlID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGNvbnN0IHZlcnRleCA9IG5ldyBpbmRleF8xLlZlY3RvcjMoKTtcclxuICAgIGNvbnN0IGNlbnRlciA9IG5ldyBpbmRleF8xLlZlY3RvcjMoKTtcclxuICAgIGNvbnN0IG1hdHJpeCA9IG5ldyBpbmRleF8xLk1hdHJpeDQoKTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAodmVydGljZXMsIG1hdHJpY2VzLCBtYXRyaXhXb3JsZCwgb3B0aW9ucyA9IHt9KSB7XHJcbiAgICAgICAgb3B0aW9ucy50eXBlID0gZXhwb3J0cy5UWVBFLkhVTEw7XHJcbiAgICAgICAgX3NldE9wdGlvbnMob3B0aW9ucyk7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMuZml0ID09PSBleHBvcnRzLkZJVC5NQU5VQUwpIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKCdjYW5ub3QgdXNlIGZpdDogbWFudWFsIHdpdGggdHlwZTogaHVsbCcpO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgYm91bmRzID0gX2NvbXB1dGVCb3VuZHModmVydGljZXMsIG1hdHJpY2VzKTtcclxuICAgICAgICBjb25zdCBidFZlcnRleCA9IG5ldyBBbW1vLmJ0VmVjdG9yMygpO1xyXG4gICAgICAgIGNvbnN0IG9yaWdpbmFsSHVsbCA9IG5ldyBBbW1vLmJ0Q29udmV4SHVsbFNoYXBlKCk7XHJcbiAgICAgICAgb3JpZ2luYWxIdWxsLnNldE1hcmdpbihvcHRpb25zLm1hcmdpbik7XHJcbiAgICAgICAgY2VudGVyLmFkZFZlY3RvcnMoYm91bmRzLm1heCwgYm91bmRzLm1pbikubXVsdGlwbHlTY2FsYXIoMC41KTtcclxuICAgICAgICBsZXQgdmVydGV4Q291bnQgPSAwO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmVydGljZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdmVydGV4Q291bnQgKz0gdmVydGljZXNbaV0ubGVuZ3RoIC8gMztcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgbWF4VmVydGljZXMgPSBvcHRpb25zLmh1bGxNYXhWZXJ0aWNlcyB8fCAxMDAwMDA7XHJcbiAgICAgICAgLy8gdG9kbzogbWlnaHQgd2FudCB0byBpbXBsZW1lbnQgdGhpcyBpbiBhIGRldGVybWluaXN0aWMgd2F5IHRoYXQgZG9lc24ndCBkbyBPKHZlcnRzKSBjYWxscyB0byBNYXRoLnJhbmRvbVxyXG4gICAgICAgIGlmICh2ZXJ0ZXhDb3VudCA+IG1heFZlcnRpY2VzKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihgdG9vIG1hbnkgdmVydGljZXMgZm9yIGh1bGwgc2hhcGU7IHNhbXBsaW5nIH4ke21heFZlcnRpY2VzfSBmcm9tIH4ke3ZlcnRleENvdW50fSB2ZXJ0aWNlc2ApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBwID0gTWF0aC5taW4oMSwgbWF4VmVydGljZXMgLyB2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2ZXJ0aWNlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBjb21wb25lbnRzID0gdmVydGljZXNbaV07XHJcbiAgICAgICAgICAgIG1hdHJpeC5mcm9tQXJyYXkobWF0cmljZXNbaV0pO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGNvbXBvbmVudHMubGVuZ3RoOyBqICs9IDMpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGlzTGFzdFZlcnRleCA9IGkgPT09IHZlcnRpY2VzLmxlbmd0aCAtIDEgJiYgaiA9PT0gY29tcG9uZW50cy5sZW5ndGggLSAzO1xyXG4gICAgICAgICAgICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPD0gcCB8fCBpc0xhc3RWZXJ0ZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBhbHdheXMgaW5jbHVkZSB0aGUgbGFzdCB2ZXJ0ZXhcclxuICAgICAgICAgICAgICAgICAgICB2ZXJ0ZXhcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldChjb21wb25lbnRzW2pdLCBjb21wb25lbnRzW2ogKyAxXSwgY29tcG9uZW50c1tqICsgMl0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBseU1hdHJpeDQobWF0cml4KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc3ViKGNlbnRlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgYnRWZXJ0ZXguc2V0VmFsdWUodmVydGV4LngsIHZlcnRleC55LCB2ZXJ0ZXgueik7XHJcbiAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWxIdWxsLmFkZFBvaW50KGJ0VmVydGV4LCBpc0xhc3RWZXJ0ZXgpOyAvLyByZWNhbGMgQUFCQiBvbmx5IG9uIGxhc3QgZ2VvbWV0cnlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgY29sbGlzaW9uU2hhcGUgPSBvcmlnaW5hbEh1bGw7XHJcbiAgICAgICAgaWYgKG9yaWdpbmFsSHVsbC5nZXROdW1WZXJ0aWNlcygpID49IDEwMCkge1xyXG4gICAgICAgICAgICAvL0J1bGxldCBkb2N1bWVudGF0aW9uIHNheXMgZG9uJ3QgdXNlIGNvbnZleEh1bGxzIHdpdGggMTAwIHZlcnRzIG9yIG1vcmVcclxuICAgICAgICAgICAgY29uc3Qgc2hhcGVIdWxsID0gbmV3IEFtbW8uYnRTaGFwZUh1bGwob3JpZ2luYWxIdWxsKTtcclxuICAgICAgICAgICAgc2hhcGVIdWxsLmJ1aWxkSHVsbChvcHRpb25zLm1hcmdpbik7XHJcbiAgICAgICAgICAgIEFtbW8uZGVzdHJveShvcmlnaW5hbEh1bGwpO1xyXG4gICAgICAgICAgICBjb2xsaXNpb25TaGFwZSA9IG5ldyBBbW1vLmJ0Q29udmV4SHVsbFNoYXBlKEFtbW8uZ2V0UG9pbnRlcihzaGFwZUh1bGwuZ2V0VmVydGV4UG9pbnRlcigpKSwgc2hhcGVIdWxsLm51bVZlcnRpY2VzKCkpO1xyXG4gICAgICAgICAgICBBbW1vLmRlc3Ryb3koc2hhcGVIdWxsKTsgLy8gYnRDb252ZXhIdWxsU2hhcGUgbWFrZXMgYSBjb3B5XHJcbiAgICAgICAgfVxyXG4gICAgICAgIEFtbW8uZGVzdHJveShidFZlcnRleCk7XHJcbiAgICAgICAgX2ZpbmlzaENvbGxpc2lvblNoYXBlKGNvbGxpc2lvblNoYXBlLCBvcHRpb25zLCBfY29tcHV0ZVNjYWxlKG1hdHJpeFdvcmxkLCBvcHRpb25zKSk7XHJcbiAgICAgICAgcmV0dXJuIGNvbGxpc2lvblNoYXBlO1xyXG4gICAgfTtcclxufSkoKTtcclxuZXhwb3J0cy5jcmVhdGVIQUNEU2hhcGVzID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGNvbnN0IHZlY3RvciA9IG5ldyBpbmRleF8xLlZlY3RvcjMoKTtcclxuICAgIGNvbnN0IGNlbnRlciA9IG5ldyBpbmRleF8xLlZlY3RvcjMoKTtcclxuICAgIGNvbnN0IG1hdHJpeCA9IG5ldyBpbmRleF8xLk1hdHJpeDQoKTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAodmVydGljZXMsIG1hdHJpY2VzLCBpbmRleGVzLCBtYXRyaXhXb3JsZCwgb3B0aW9ucyA9IHt9KSB7XHJcbiAgICAgICAgb3B0aW9ucy50eXBlID0gZXhwb3J0cy5UWVBFLkhBQ0Q7XHJcbiAgICAgICAgX3NldE9wdGlvbnMob3B0aW9ucyk7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMuZml0ID09PSBleHBvcnRzLkZJVC5NQU5VQUwpIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKCdjYW5ub3QgdXNlIGZpdDogbWFudWFsIHdpdGggdHlwZTogaGFjZCcpO1xyXG4gICAgICAgICAgICByZXR1cm4gW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghQW1tby5oYXNPd25Qcm9wZXJ0eSgnSEFDRCcpKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignSEFDRCB1bmF2YWlsYWJsZSBpbiBpbmNsdWRlZCBidWlsZCBvZiBBbW1vLmpzLiBWaXNpdCBodHRwczovL2dpdGh1Yi5jb20vbW96aWxsYXJlYWxpdHkvYW1tby5qcyBmb3IgdGhlIGxhdGVzdCB2ZXJzaW9uLicpO1xyXG4gICAgICAgICAgICByZXR1cm4gW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGJvdW5kcyA9IF9jb21wdXRlQm91bmRzKHZlcnRpY2VzLCBtYXRyaWNlcyk7XHJcbiAgICAgICAgY29uc3Qgc2NhbGUgPSBfY29tcHV0ZVNjYWxlKG1hdHJpeFdvcmxkLCBvcHRpb25zKTtcclxuICAgICAgICBsZXQgdmVydGV4Q291bnQgPSAwO1xyXG4gICAgICAgIGxldCB0cmlDb3VudCA9IDA7XHJcbiAgICAgICAgY2VudGVyLmFkZFZlY3RvcnMoYm91bmRzLm1heCwgYm91bmRzLm1pbikubXVsdGlwbHlTY2FsYXIoMC41KTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZlcnRpY2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZlcnRleENvdW50ICs9IHZlcnRpY2VzW2ldLmxlbmd0aCAvIDM7XHJcbiAgICAgICAgICAgIGlmIChpbmRleGVzICYmIGluZGV4ZXNbaV0pIHtcclxuICAgICAgICAgICAgICAgIHRyaUNvdW50ICs9IGluZGV4ZXNbaV0ubGVuZ3RoIC8gMztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRyaUNvdW50ICs9IHZlcnRpY2VzW2ldLmxlbmd0aCAvIDk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgaGFjZCA9IG5ldyBBbW1vLkhBQ0QoKTtcclxuICAgICAgICBpZiAob3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgnY29tcGFjaXR5V2VpZ2h0JykpXHJcbiAgICAgICAgICAgIGhhY2QuU2V0Q29tcGFjaXR5V2VpZ2h0KG9wdGlvbnMuY29tcGFjaXR5V2VpZ2h0KTtcclxuICAgICAgICBpZiAob3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgndm9sdW1lV2VpZ2h0JykpXHJcbiAgICAgICAgICAgIGhhY2QuU2V0Vm9sdW1lV2VpZ2h0KG9wdGlvbnMudm9sdW1lV2VpZ2h0KTtcclxuICAgICAgICBpZiAob3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgnbkNsdXN0ZXJzJykpXHJcbiAgICAgICAgICAgIGhhY2QuU2V0TkNsdXN0ZXJzKG9wdGlvbnMubkNsdXN0ZXJzKTtcclxuICAgICAgICBpZiAob3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgnblZlcnRpY2VzUGVyQ0gnKSlcclxuICAgICAgICAgICAgaGFjZC5TZXROVmVydGljZXNQZXJDSChvcHRpb25zLm5WZXJ0aWNlc1BlckNIKTtcclxuICAgICAgICBpZiAob3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgnY29uY2F2aXR5JykpXHJcbiAgICAgICAgICAgIGhhY2QuU2V0Q29uY2F2aXR5KG9wdGlvbnMuY29uY2F2aXR5KTtcclxuICAgICAgICBjb25zdCBwb2ludHMgPSBBbW1vLl9tYWxsb2ModmVydGV4Q291bnQgKiAzICogOCk7XHJcbiAgICAgICAgY29uc3QgdHJpYW5nbGVzID0gQW1tby5fbWFsbG9jKHRyaUNvdW50ICogMyAqIDQpO1xyXG4gICAgICAgIGhhY2QuU2V0UG9pbnRzKHBvaW50cyk7XHJcbiAgICAgICAgaGFjZC5TZXRUcmlhbmdsZXModHJpYW5nbGVzKTtcclxuICAgICAgICBoYWNkLlNldE5Qb2ludHModmVydGV4Q291bnQpO1xyXG4gICAgICAgIGhhY2QuU2V0TlRyaWFuZ2xlcyh0cmlDb3VudCk7XHJcbiAgICAgICAgbGV0IHBwdHIgPSBwb2ludHMgLyA4LCB0cHRyID0gdHJpYW5nbGVzIC8gNDtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZlcnRpY2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbXBvbmVudHMgPSB2ZXJ0aWNlc1tpXTtcclxuICAgICAgICAgICAgbWF0cml4LmZyb21BcnJheShtYXRyaWNlc1tpXSk7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgY29tcG9uZW50cy5sZW5ndGg7IGogKz0gMykge1xyXG4gICAgICAgICAgICAgICAgdmVjdG9yXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldChjb21wb25lbnRzW2ogKyAwXSwgY29tcG9uZW50c1tqICsgMV0sIGNvbXBvbmVudHNbaiArIDJdKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hcHBseU1hdHJpeDQobWF0cml4KVxyXG4gICAgICAgICAgICAgICAgICAgIC5zdWIoY2VudGVyKTtcclxuICAgICAgICAgICAgICAgIEFtbW8uSEVBUEY2NFtwcHRyICsgMF0gPSB2ZWN0b3IueDtcclxuICAgICAgICAgICAgICAgIEFtbW8uSEVBUEY2NFtwcHRyICsgMV0gPSB2ZWN0b3IueTtcclxuICAgICAgICAgICAgICAgIEFtbW8uSEVBUEY2NFtwcHRyICsgMl0gPSB2ZWN0b3IuejtcclxuICAgICAgICAgICAgICAgIHBwdHIgKz0gMztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoaW5kZXhlc1tpXSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaW5kaWNlcyA9IGluZGV4ZXNbaV07XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGluZGljZXMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBBbW1vLkhFQVAzMlt0cHRyXSA9IGluZGljZXNbal07XHJcbiAgICAgICAgICAgICAgICAgICAgdHB0cisrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBjb21wb25lbnRzLmxlbmd0aCAvIDM7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgIEFtbW8uSEVBUDMyW3RwdHJdID0gajtcclxuICAgICAgICAgICAgICAgICAgICB0cHRyKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaGFjZC5Db21wdXRlKCk7XHJcbiAgICAgICAgQW1tby5fZnJlZShwb2ludHMpO1xyXG4gICAgICAgIEFtbW8uX2ZyZWUodHJpYW5nbGVzKTtcclxuICAgICAgICBjb25zdCBuQ2x1c3RlcnMgPSBoYWNkLkdldE5DbHVzdGVycygpO1xyXG4gICAgICAgIGNvbnN0IHNoYXBlcyA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbkNsdXN0ZXJzOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgaHVsbCA9IG5ldyBBbW1vLmJ0Q29udmV4SHVsbFNoYXBlKCk7XHJcbiAgICAgICAgICAgIGh1bGwuc2V0TWFyZ2luKG9wdGlvbnMubWFyZ2luKTtcclxuICAgICAgICAgICAgY29uc3QgblBvaW50cyA9IGhhY2QuR2V0TlBvaW50c0NIKGkpO1xyXG4gICAgICAgICAgICBjb25zdCBuVHJpYW5nbGVzID0gaGFjZC5HZXROVHJpYW5nbGVzQ0goaSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGh1bGxQb2ludHMgPSBBbW1vLl9tYWxsb2MoblBvaW50cyAqIDMgKiA4KTtcclxuICAgICAgICAgICAgY29uc3QgaHVsbFRyaWFuZ2xlcyA9IEFtbW8uX21hbGxvYyhuVHJpYW5nbGVzICogMyAqIDQpO1xyXG4gICAgICAgICAgICBoYWNkLkdldENIKGksIGh1bGxQb2ludHMsIGh1bGxUcmlhbmdsZXMpO1xyXG4gICAgICAgICAgICBjb25zdCBwcHRyID0gaHVsbFBvaW50cyAvIDg7XHJcbiAgICAgICAgICAgIGZvciAobGV0IHBpID0gMDsgcGkgPCBuUG9pbnRzOyBwaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBidFZlcnRleCA9IG5ldyBBbW1vLmJ0VmVjdG9yMygpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcHggPSBBbW1vLkhFQVBGNjRbcHB0ciArIHBpICogMyArIDBdO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcHkgPSBBbW1vLkhFQVBGNjRbcHB0ciArIHBpICogMyArIDFdO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcHogPSBBbW1vLkhFQVBGNjRbcHB0ciArIHBpICogMyArIDJdO1xyXG4gICAgICAgICAgICAgICAgYnRWZXJ0ZXguc2V0VmFsdWUocHgsIHB5LCBweik7XHJcbiAgICAgICAgICAgICAgICBodWxsLmFkZFBvaW50KGJ0VmVydGV4LCBwaSA9PT0gblBvaW50cyAtIDEpO1xyXG4gICAgICAgICAgICAgICAgQW1tby5kZXN0cm95KGJ0VmVydGV4KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBfZmluaXNoQ29sbGlzaW9uU2hhcGUoaHVsbCwgb3B0aW9ucywgc2NhbGUpO1xyXG4gICAgICAgICAgICBzaGFwZXMucHVzaChodWxsKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHNoYXBlcztcclxuICAgIH07XHJcbn0pKCk7XHJcbmV4cG9ydHMuY3JlYXRlVkhBQ0RTaGFwZXMgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgY29uc3QgdmVjdG9yID0gbmV3IGluZGV4XzEuVmVjdG9yMygpO1xyXG4gICAgY29uc3QgY2VudGVyID0gbmV3IGluZGV4XzEuVmVjdG9yMygpO1xyXG4gICAgY29uc3QgbWF0cml4ID0gbmV3IGluZGV4XzEuTWF0cml4NCgpO1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh2ZXJ0aWNlcywgbWF0cmljZXMsIGluZGV4ZXMsIG1hdHJpeFdvcmxkLCBvcHRpb25zID0ge30pIHtcclxuICAgICAgICBvcHRpb25zLnR5cGUgPSBleHBvcnRzLlRZUEUuVkhBQ0Q7XHJcbiAgICAgICAgX3NldE9wdGlvbnMob3B0aW9ucyk7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMuZml0ID09PSBleHBvcnRzLkZJVC5NQU5VQUwpIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKCdjYW5ub3QgdXNlIGZpdDogbWFudWFsIHdpdGggdHlwZTogdmhhY2QnKTtcclxuICAgICAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIUFtbW8uaGFzT3duUHJvcGVydHkoJ1ZIQUNEJykpIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKCdWSEFDRCB1bmF2YWlsYWJsZSBpbiBpbmNsdWRlZCBidWlsZCBvZiBBbW1vLmpzLiBWaXNpdCBodHRwczovL2dpdGh1Yi5jb20vbW96aWxsYXJlYWxpdHkvYW1tby5qcyBmb3IgdGhlIGxhdGVzdCB2ZXJzaW9uLicpO1xyXG4gICAgICAgICAgICByZXR1cm4gW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGJvdW5kcyA9IF9jb21wdXRlQm91bmRzKHZlcnRpY2VzLCBtYXRyaWNlcyk7XHJcbiAgICAgICAgY29uc3Qgc2NhbGUgPSBfY29tcHV0ZVNjYWxlKG1hdHJpeFdvcmxkLCBvcHRpb25zKTtcclxuICAgICAgICBsZXQgdmVydGV4Q291bnQgPSAwO1xyXG4gICAgICAgIGxldCB0cmlDb3VudCA9IDA7XHJcbiAgICAgICAgY2VudGVyLmFkZFZlY3RvcnMoYm91bmRzLm1heCwgYm91bmRzLm1pbikubXVsdGlwbHlTY2FsYXIoMC41KTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZlcnRpY2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZlcnRleENvdW50ICs9IHZlcnRpY2VzW2ldLmxlbmd0aCAvIDM7XHJcbiAgICAgICAgICAgIGlmIChpbmRleGVzICYmIGluZGV4ZXNbaV0pIHtcclxuICAgICAgICAgICAgICAgIHRyaUNvdW50ICs9IGluZGV4ZXNbaV0ubGVuZ3RoIC8gMztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRyaUNvdW50ICs9IHZlcnRpY2VzW2ldLmxlbmd0aCAvIDk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgdmhhY2QgPSBuZXcgQW1tby5WSEFDRCgpO1xyXG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IG5ldyBBbW1vLlBhcmFtZXRlcnMoKTtcclxuICAgICAgICAvL2h0dHBzOi8va21hbW91LmJsb2dzcG90LmNvbS8yMDE0LzEyL3YtaGFjZC0yMC1wYXJhbWV0ZXJzLWRlc2NyaXB0aW9uLmh0bWxcclxuICAgICAgICBpZiAob3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgncmVzb2x1dGlvbicpKVxyXG4gICAgICAgICAgICBwYXJhbXMuc2V0X21fcmVzb2x1dGlvbihvcHRpb25zLnJlc29sdXRpb24pO1xyXG4gICAgICAgIGlmIChvcHRpb25zLmhhc093blByb3BlcnR5KCdkZXB0aCcpKVxyXG4gICAgICAgICAgICBwYXJhbXMuc2V0X21fZGVwdGgob3B0aW9ucy5kZXB0aCk7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMuaGFzT3duUHJvcGVydHkoJ2NvbmNhdml0eScpKVxyXG4gICAgICAgICAgICBwYXJhbXMuc2V0X21fY29uY2F2aXR5KG9wdGlvbnMuY29uY2F2aXR5KTtcclxuICAgICAgICBpZiAob3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgncGxhbmVEb3duc2FtcGxpbmcnKSlcclxuICAgICAgICAgICAgcGFyYW1zLnNldF9tX3BsYW5lRG93bnNhbXBsaW5nKG9wdGlvbnMucGxhbmVEb3duc2FtcGxpbmcpO1xyXG4gICAgICAgIGlmIChvcHRpb25zLmhhc093blByb3BlcnR5KCdjb252ZXhodWxsRG93bnNhbXBsaW5nJykpXHJcbiAgICAgICAgICAgIHBhcmFtcy5zZXRfbV9jb252ZXhodWxsRG93bnNhbXBsaW5nKG9wdGlvbnMuY29udmV4aHVsbERvd25zYW1wbGluZyk7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMuaGFzT3duUHJvcGVydHkoJ2FscGhhJykpXHJcbiAgICAgICAgICAgIHBhcmFtcy5zZXRfbV9hbHBoYShvcHRpb25zLmFscGhhKTtcclxuICAgICAgICBpZiAob3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgnYmV0YScpKVxyXG4gICAgICAgICAgICBwYXJhbXMuc2V0X21fYmV0YShvcHRpb25zLmJldGEpO1xyXG4gICAgICAgIGlmIChvcHRpb25zLmhhc093blByb3BlcnR5KCdnYW1tYScpKVxyXG4gICAgICAgICAgICBwYXJhbXMuc2V0X21fZ2FtbWEob3B0aW9ucy5nYW1tYSk7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMuaGFzT3duUHJvcGVydHkoJ3BjYScpKVxyXG4gICAgICAgICAgICBwYXJhbXMuc2V0X21fcGNhKG9wdGlvbnMucGNhKTtcclxuICAgICAgICBpZiAob3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgnbW9kZScpKVxyXG4gICAgICAgICAgICBwYXJhbXMuc2V0X21fbW9kZShvcHRpb25zLm1vZGUpO1xyXG4gICAgICAgIGlmIChvcHRpb25zLmhhc093blByb3BlcnR5KCdtYXhOdW1WZXJ0aWNlc1BlckNIJykpXHJcbiAgICAgICAgICAgIHBhcmFtcy5zZXRfbV9tYXhOdW1WZXJ0aWNlc1BlckNIKG9wdGlvbnMubWF4TnVtVmVydGljZXNQZXJDSCk7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMuaGFzT3duUHJvcGVydHkoJ21pblZvbHVtZVBlckNIJykpXHJcbiAgICAgICAgICAgIHBhcmFtcy5zZXRfbV9taW5Wb2x1bWVQZXJDSChvcHRpb25zLm1pblZvbHVtZVBlckNIKTtcclxuICAgICAgICBpZiAob3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgnY29udmV4aHVsbEFwcHJveGltYXRpb24nKSlcclxuICAgICAgICAgICAgcGFyYW1zLnNldF9tX2NvbnZleGh1bGxBcHByb3hpbWF0aW9uKG9wdGlvbnMuY29udmV4aHVsbEFwcHJveGltYXRpb24pO1xyXG4gICAgICAgIGlmIChvcHRpb25zLmhhc093blByb3BlcnR5KCdvY2xBY2NlbGVyYXRpb24nKSlcclxuICAgICAgICAgICAgcGFyYW1zLnNldF9tX29jbEFjY2VsZXJhdGlvbihvcHRpb25zLm9jbEFjY2VsZXJhdGlvbik7XHJcbiAgICAgICAgY29uc3QgcG9pbnRzID0gQW1tby5fbWFsbG9jKHZlcnRleENvdW50ICogMyAqIDggKyAzKTtcclxuICAgICAgICBjb25zdCB0cmlhbmdsZXMgPSBBbW1vLl9tYWxsb2ModHJpQ291bnQgKiAzICogNCk7XHJcbiAgICAgICAgbGV0IHBwdHIgPSBwb2ludHMgLyA4LCB0cHRyID0gdHJpYW5nbGVzIC8gNDtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZlcnRpY2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbXBvbmVudHMgPSB2ZXJ0aWNlc1tpXTtcclxuICAgICAgICAgICAgbWF0cml4LmZyb21BcnJheShtYXRyaWNlc1tpXSk7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgY29tcG9uZW50cy5sZW5ndGg7IGogKz0gMykge1xyXG4gICAgICAgICAgICAgICAgdmVjdG9yXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldChjb21wb25lbnRzW2ogKyAwXSwgY29tcG9uZW50c1tqICsgMV0sIGNvbXBvbmVudHNbaiArIDJdKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hcHBseU1hdHJpeDQobWF0cml4KVxyXG4gICAgICAgICAgICAgICAgICAgIC5zdWIoY2VudGVyKTtcclxuICAgICAgICAgICAgICAgIEFtbW8uSEVBUEY2NFtwcHRyICsgMF0gPSB2ZWN0b3IueDtcclxuICAgICAgICAgICAgICAgIEFtbW8uSEVBUEY2NFtwcHRyICsgMV0gPSB2ZWN0b3IueTtcclxuICAgICAgICAgICAgICAgIEFtbW8uSEVBUEY2NFtwcHRyICsgMl0gPSB2ZWN0b3IuejtcclxuICAgICAgICAgICAgICAgIHBwdHIgKz0gMztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoaW5kZXhlc1tpXSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaW5kaWNlcyA9IGluZGV4ZXNbaV07XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGluZGljZXMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBBbW1vLkhFQVAzMlt0cHRyXSA9IGluZGljZXNbal07XHJcbiAgICAgICAgICAgICAgICAgICAgdHB0cisrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBjb21wb25lbnRzLmxlbmd0aCAvIDM7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgIEFtbW8uSEVBUDMyW3RwdHJdID0gajtcclxuICAgICAgICAgICAgICAgICAgICB0cHRyKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdmhhY2QuQ29tcHV0ZShwb2ludHMsIDMsIHZlcnRleENvdW50LCB0cmlhbmdsZXMsIDMsIHRyaUNvdW50LCBwYXJhbXMpO1xyXG4gICAgICAgIEFtbW8uX2ZyZWUocG9pbnRzKTtcclxuICAgICAgICBBbW1vLl9mcmVlKHRyaWFuZ2xlcyk7XHJcbiAgICAgICAgY29uc3Qgbkh1bGxzID0gdmhhY2QuR2V0TkNvbnZleEh1bGxzKCk7XHJcbiAgICAgICAgY29uc3Qgc2hhcGVzID0gW107XHJcbiAgICAgICAgY29uc3QgY2ggPSBuZXcgQW1tby5Db252ZXhIdWxsKCk7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuSHVsbHM7IGkrKykge1xyXG4gICAgICAgICAgICB2aGFjZC5HZXRDb252ZXhIdWxsKGksIGNoKTtcclxuICAgICAgICAgICAgY29uc3QgblBvaW50cyA9IGNoLmdldF9tX25Qb2ludHMoKTtcclxuICAgICAgICAgICAgY29uc3QgaHVsbFBvaW50cyA9IGNoLmdldF9tX3BvaW50cygpO1xyXG4gICAgICAgICAgICBjb25zdCBodWxsID0gbmV3IEFtbW8uYnRDb252ZXhIdWxsU2hhcGUoKTtcclxuICAgICAgICAgICAgaHVsbC5zZXRNYXJnaW4ob3B0aW9ucy5tYXJnaW4pO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBwaSA9IDA7IHBpIDwgblBvaW50czsgcGkrKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYnRWZXJ0ZXggPSBuZXcgQW1tby5idFZlY3RvcjMoKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHB4ID0gY2guZ2V0X21fcG9pbnRzKHBpICogMyArIDApO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcHkgPSBjaC5nZXRfbV9wb2ludHMocGkgKiAzICsgMSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBweiA9IGNoLmdldF9tX3BvaW50cyhwaSAqIDMgKyAyKTtcclxuICAgICAgICAgICAgICAgIGJ0VmVydGV4LnNldFZhbHVlKHB4LCBweSwgcHopO1xyXG4gICAgICAgICAgICAgICAgaHVsbC5hZGRQb2ludChidFZlcnRleCwgcGkgPT09IG5Qb2ludHMgLSAxKTtcclxuICAgICAgICAgICAgICAgIEFtbW8uZGVzdHJveShidFZlcnRleCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgX2ZpbmlzaENvbGxpc2lvblNoYXBlKGh1bGwsIG9wdGlvbnMsIHNjYWxlKTtcclxuICAgICAgICAgICAgc2hhcGVzLnB1c2goaHVsbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIEFtbW8uZGVzdHJveShjaCk7XHJcbiAgICAgICAgQW1tby5kZXN0cm95KHZoYWNkKTtcclxuICAgICAgICByZXR1cm4gc2hhcGVzO1xyXG4gICAgfTtcclxufSkoKTtcclxuZXhwb3J0cy5jcmVhdGVUcmlNZXNoU2hhcGUgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgY29uc3QgdmEgPSBuZXcgaW5kZXhfMS5WZWN0b3IzKCk7XHJcbiAgICBjb25zdCB2YiA9IG5ldyBpbmRleF8xLlZlY3RvcjMoKTtcclxuICAgIGNvbnN0IHZjID0gbmV3IGluZGV4XzEuVmVjdG9yMygpO1xyXG4gICAgY29uc3QgbWF0cml4ID0gbmV3IGluZGV4XzEuTWF0cml4NCgpO1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh2ZXJ0aWNlcywgbWF0cmljZXMsIGluZGV4ZXMsIG1hdHJpeFdvcmxkLCBvcHRpb25zID0ge30pIHtcclxuICAgICAgICBvcHRpb25zLnR5cGUgPSBleHBvcnRzLlRZUEUuTUVTSDtcclxuICAgICAgICBfc2V0T3B0aW9ucyhvcHRpb25zKTtcclxuICAgICAgICBpZiAob3B0aW9ucy5maXQgPT09IGV4cG9ydHMuRklULk1BTlVBTCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ2Nhbm5vdCB1c2UgZml0OiBtYW51YWwgd2l0aCB0eXBlOiBtZXNoJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBzY2FsZSA9IF9jb21wdXRlU2NhbGUobWF0cml4V29ybGQsIG9wdGlvbnMpO1xyXG4gICAgICAgIGNvbnN0IGJ0YSA9IG5ldyBBbW1vLmJ0VmVjdG9yMygpO1xyXG4gICAgICAgIGNvbnN0IGJ0YiA9IG5ldyBBbW1vLmJ0VmVjdG9yMygpO1xyXG4gICAgICAgIGNvbnN0IGJ0YyA9IG5ldyBBbW1vLmJ0VmVjdG9yMygpO1xyXG4gICAgICAgIGNvbnN0IHRyaU1lc2ggPSBuZXcgQW1tby5idFRyaWFuZ2xlTWVzaCh0cnVlLCBmYWxzZSk7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2ZXJ0aWNlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBjb21wb25lbnRzID0gdmVydGljZXNbaV07XHJcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gaW5kZXhlc1tpXSA/IGluZGV4ZXNbaV0gOiBudWxsO1xyXG4gICAgICAgICAgICBtYXRyaXguZnJvbUFycmF5KG1hdHJpY2VzW2ldKTtcclxuICAgICAgICAgICAgaWYgKGluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGluZGV4Lmxlbmd0aDsgaiArPSAzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWkgPSBpbmRleFtqXSAqIDM7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYmkgPSBpbmRleFtqICsgMV0gKiAzO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNpID0gaW5kZXhbaiArIDJdICogMztcclxuICAgICAgICAgICAgICAgICAgICB2YS5zZXQoY29tcG9uZW50c1thaV0sIGNvbXBvbmVudHNbYWkgKyAxXSwgY29tcG9uZW50c1thaSArIDJdKS5hcHBseU1hdHJpeDQobWF0cml4KTtcclxuICAgICAgICAgICAgICAgICAgICB2Yi5zZXQoY29tcG9uZW50c1tiaV0sIGNvbXBvbmVudHNbYmkgKyAxXSwgY29tcG9uZW50c1tiaSArIDJdKS5hcHBseU1hdHJpeDQobWF0cml4KTtcclxuICAgICAgICAgICAgICAgICAgICB2Yy5zZXQoY29tcG9uZW50c1tjaV0sIGNvbXBvbmVudHNbY2kgKyAxXSwgY29tcG9uZW50c1tjaSArIDJdKS5hcHBseU1hdHJpeDQobWF0cml4KTtcclxuICAgICAgICAgICAgICAgICAgICBidGEuc2V0VmFsdWUodmEueCwgdmEueSwgdmEueik7XHJcbiAgICAgICAgICAgICAgICAgICAgYnRiLnNldFZhbHVlKHZiLngsIHZiLnksIHZiLnopO1xyXG4gICAgICAgICAgICAgICAgICAgIGJ0Yy5zZXRWYWx1ZSh2Yy54LCB2Yy55LCB2Yy56KTtcclxuICAgICAgICAgICAgICAgICAgICB0cmlNZXNoLmFkZFRyaWFuZ2xlKGJ0YSwgYnRiLCBidGMsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgY29tcG9uZW50cy5sZW5ndGg7IGogKz0gOSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhLnNldChjb21wb25lbnRzW2ogKyAwXSwgY29tcG9uZW50c1tqICsgMV0sIGNvbXBvbmVudHNbaiArIDJdKS5hcHBseU1hdHJpeDQobWF0cml4KTtcclxuICAgICAgICAgICAgICAgICAgICB2Yi5zZXQoY29tcG9uZW50c1tqICsgM10sIGNvbXBvbmVudHNbaiArIDRdLCBjb21wb25lbnRzW2ogKyA1XSkuYXBwbHlNYXRyaXg0KG1hdHJpeCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmMuc2V0KGNvbXBvbmVudHNbaiArIDZdLCBjb21wb25lbnRzW2ogKyA3XSwgY29tcG9uZW50c1tqICsgOF0pLmFwcGx5TWF0cml4NChtYXRyaXgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJ0YS5zZXRWYWx1ZSh2YS54LCB2YS55LCB2YS56KTtcclxuICAgICAgICAgICAgICAgICAgICBidGIuc2V0VmFsdWUodmIueCwgdmIueSwgdmIueik7XHJcbiAgICAgICAgICAgICAgICAgICAgYnRjLnNldFZhbHVlKHZjLngsIHZjLnksIHZjLnopO1xyXG4gICAgICAgICAgICAgICAgICAgIHRyaU1lc2guYWRkVHJpYW5nbGUoYnRhLCBidGIsIGJ0YywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGxvY2FsU2NhbGUgPSBuZXcgQW1tby5idFZlY3RvcjMoc2NhbGUueCwgc2NhbGUueSwgc2NhbGUueik7XHJcbiAgICAgICAgdHJpTWVzaC5zZXRTY2FsaW5nKGxvY2FsU2NhbGUpO1xyXG4gICAgICAgIEFtbW8uZGVzdHJveShsb2NhbFNjYWxlKTtcclxuICAgICAgICAvLyBNT0QgKHlhbmRldSk6IFVzZSBidENvbnZleFRyaWFuZ2xlTWVzaFNoYXBlIGZvciBjb25jYXZlIHNoYXBlc1xyXG4gICAgICAgIGxldCBjb2xsaXNpb25TaGFwZTtcclxuICAgICAgICBpZiAob3B0aW9ucy5jb25jYXZlKVxyXG4gICAgICAgICAgICBjb2xsaXNpb25TaGFwZSA9IG5ldyBBbW1vLmJ0QnZoVHJpYW5nbGVNZXNoU2hhcGUodHJpTWVzaCwgdHJ1ZSwgdHJ1ZSk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICBjb2xsaXNpb25TaGFwZSA9IG5ldyBBbW1vLmJ0Q29udmV4VHJpYW5nbGVNZXNoU2hhcGUodHJpTWVzaCwgdHJ1ZSk7XHJcbiAgICAgICAgLy8gY29uc3QgY29sbGlzaW9uU2hhcGUgPSBuZXcgQW1tby5idEJ2aFRyaWFuZ2xlTWVzaFNoYXBlKHRyaU1lc2gsIHRydWUsIHRydWUpXHJcbiAgICAgICAgY29sbGlzaW9uU2hhcGUucmVzb3VyY2VzID0gW3RyaU1lc2hdO1xyXG4gICAgICAgIEFtbW8uZGVzdHJveShidGEpO1xyXG4gICAgICAgIEFtbW8uZGVzdHJveShidGIpO1xyXG4gICAgICAgIEFtbW8uZGVzdHJveShidGMpO1xyXG4gICAgICAgIF9maW5pc2hDb2xsaXNpb25TaGFwZShjb2xsaXNpb25TaGFwZSwgb3B0aW9ucyk7XHJcbiAgICAgICAgcmV0dXJuIGNvbGxpc2lvblNoYXBlO1xyXG4gICAgfTtcclxufSkoKTtcclxuY29uc3QgY3JlYXRlSGVpZ2h0ZmllbGRUZXJyYWluU2hhcGUgPSBmdW5jdGlvbiAob3B0aW9ucyA9IHt9KSB7XHJcbiAgICBfc2V0T3B0aW9ucyhvcHRpb25zKTtcclxuICAgIGlmIChvcHRpb25zLmZpdCA9PT0gZXhwb3J0cy5GSVQuQUxMKSB7XHJcbiAgICAgICAgY29uc29sZS53YXJuKCdjYW5ub3QgdXNlIGZpdDogYWxsIHdpdGggdHlwZTogaGVpZ2h0ZmllbGQnKTtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIGNvbnN0IGhlaWdodGZpZWxkRGlzdGFuY2UgPSBvcHRpb25zLmhlaWdodGZpZWxkRGlzdGFuY2UgfHwgMTtcclxuICAgIGNvbnN0IGhlaWdodGZpZWxkRGF0YSA9IG9wdGlvbnMuaGVpZ2h0ZmllbGREYXRhIHx8IFtdO1xyXG4gICAgY29uc3QgaGVpZ2h0U2NhbGUgPSBvcHRpb25zLmhlaWdodFNjYWxlIHx8IDA7XHJcbiAgICBjb25zdCB1cEF4aXMgPSBvcHRpb25zLmhhc093blByb3BlcnR5KCd1cEF4aXMnKSA/IG9wdGlvbnMudXBBeGlzIDogMTsgLy8geCA9IDA7IHkgPSAxOyB6ID0gMlxyXG4gICAgY29uc3QgaGR0ID0gKCgpID0+IHtcclxuICAgICAgICBzd2l0Y2ggKG9wdGlvbnMuaGVpZ2h0RGF0YVR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSAnc2hvcnQnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEFtbW8uUEhZX1NIT1JUO1xyXG4gICAgICAgICAgICBjYXNlICdmbG9hdCc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gQW1tby5QSFlfRkxPQVQ7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gQW1tby5QSFlfRkxPQVQ7XHJcbiAgICAgICAgfVxyXG4gICAgfSkoKTtcclxuICAgIGNvbnN0IGZsaXBRdWFkRWRnZXMgPSBvcHRpb25zLmhhc093blByb3BlcnR5KCdmbGlwUXVhZEVkZ2VzJykgPyBvcHRpb25zLmZsaXBRdWFkRWRnZXMgOiB0cnVlO1xyXG4gICAgY29uc3QgaGVpZ2h0U3RpY2tMZW5ndGggPSBoZWlnaHRmaWVsZERhdGEubGVuZ3RoO1xyXG4gICAgY29uc3QgaGVpZ2h0U3RpY2tXaWR0aCA9IGhlaWdodFN0aWNrTGVuZ3RoID4gMCA/IGhlaWdodGZpZWxkRGF0YVswXS5sZW5ndGggOiAwO1xyXG4gICAgY29uc3QgZGF0YSA9IEFtbW8uX21hbGxvYyhoZWlnaHRTdGlja0xlbmd0aCAqIGhlaWdodFN0aWNrV2lkdGggKiA0KTtcclxuICAgIGNvbnN0IHB0ciA9IGRhdGEgLyA0O1xyXG4gICAgbGV0IG1pbkhlaWdodCA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTtcclxuICAgIGxldCBtYXhIZWlnaHQgPSBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFk7XHJcbiAgICBsZXQgaW5kZXggPSAwO1xyXG4gICAgZm9yIChsZXQgbCA9IDA7IGwgPCBoZWlnaHRTdGlja0xlbmd0aDsgbCsrKSB7XHJcbiAgICAgICAgZm9yIChsZXQgdyA9IDA7IHcgPCBoZWlnaHRTdGlja1dpZHRoOyB3KyspIHtcclxuICAgICAgICAgICAgY29uc3QgaGVpZ2h0ID0gaGVpZ2h0ZmllbGREYXRhW2xdW3ddO1xyXG4gICAgICAgICAgICBBbW1vLkhFQVBGMzJbcHRyICsgaW5kZXhdID0gaGVpZ2h0O1xyXG4gICAgICAgICAgICBpbmRleCsrO1xyXG4gICAgICAgICAgICBtaW5IZWlnaHQgPSBNYXRoLm1pbihtaW5IZWlnaHQsIGhlaWdodCk7XHJcbiAgICAgICAgICAgIG1heEhlaWdodCA9IE1hdGgubWF4KG1heEhlaWdodCwgaGVpZ2h0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjb25zdCBjb2xsaXNpb25TaGFwZSA9IG5ldyBBbW1vLmJ0SGVpZ2h0ZmllbGRUZXJyYWluU2hhcGUoaGVpZ2h0U3RpY2tXaWR0aCwgaGVpZ2h0U3RpY2tMZW5ndGgsIGRhdGEsIGhlaWdodFNjYWxlLCBtaW5IZWlnaHQsIG1heEhlaWdodCwgdXBBeGlzLCBoZHQsIGZsaXBRdWFkRWRnZXMpO1xyXG4gICAgY29uc3Qgc2NhbGUgPSBuZXcgQW1tby5idFZlY3RvcjMoaGVpZ2h0ZmllbGREaXN0YW5jZSwgMSwgaGVpZ2h0ZmllbGREaXN0YW5jZSk7XHJcbiAgICBjb2xsaXNpb25TaGFwZS5zZXRMb2NhbFNjYWxpbmcoc2NhbGUpO1xyXG4gICAgQW1tby5kZXN0cm95KHNjYWxlKTtcclxuICAgIGNvbGxpc2lvblNoYXBlLmhlaWdodGZpZWxkRGF0YSA9IGRhdGE7XHJcbiAgICBfZmluaXNoQ29sbGlzaW9uU2hhcGUoY29sbGlzaW9uU2hhcGUsIG9wdGlvbnMpO1xyXG4gICAgcmV0dXJuIGNvbGxpc2lvblNoYXBlO1xyXG59O1xyXG5leHBvcnRzLmNyZWF0ZUhlaWdodGZpZWxkVGVycmFpblNoYXBlID0gY3JlYXRlSGVpZ2h0ZmllbGRUZXJyYWluU2hhcGU7XHJcbmZ1bmN0aW9uIF9zZXRPcHRpb25zKG9wdGlvbnMpIHtcclxuICAgIC8vIE1PRCAoeWFuZGV1KTogQWxsIG9mIHRoaXMgd2lsbCBiZSBkb25lIGluIHBoeXNpY3MudHNcclxuICAgIC8vIHdlIG9ubHkga2VlcCB0eXBlIGFuZCBtYXJnaW5cclxuICAgIG9wdGlvbnMudHlwZSA9IG9wdGlvbnMudHlwZSB8fCBleHBvcnRzLlRZUEUuSFVMTDtcclxuICAgIG9wdGlvbnMubWFyZ2luID0gb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgnbWFyZ2luJykgPyBvcHRpb25zLm1hcmdpbiA6IDAuMDE7XHJcbiAgICByZXR1cm47XHJcbiAgICBvcHRpb25zLmZpdCA9IG9wdGlvbnMuaGFzT3duUHJvcGVydHkoJ2ZpdCcpID8gb3B0aW9ucy5maXQgOiBleHBvcnRzLkZJVC5BTEw7XHJcbiAgICBvcHRpb25zLnR5cGUgPSBvcHRpb25zLnR5cGUgfHwgZXhwb3J0cy5UWVBFLkhVTEw7XHJcbiAgICBvcHRpb25zLm1pbkhhbGZFeHRlbnQgPSBvcHRpb25zLmhhc093blByb3BlcnR5KCdtaW5IYWxmRXh0ZW50JykgPyBvcHRpb25zLm1pbkhhbGZFeHRlbnQgOiAwO1xyXG4gICAgb3B0aW9ucy5tYXhIYWxmRXh0ZW50ID0gb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgnbWF4SGFsZkV4dGVudCcpID8gb3B0aW9ucy5tYXhIYWxmRXh0ZW50IDogTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZO1xyXG4gICAgb3B0aW9ucy5jeWxpbmRlckF4aXMgPSBvcHRpb25zLmN5bGluZGVyQXhpcyB8fCAneSc7XHJcbiAgICBvcHRpb25zLm1hcmdpbiA9IG9wdGlvbnMuaGFzT3duUHJvcGVydHkoJ21hcmdpbicpID8gb3B0aW9ucy5tYXJnaW4gOiAwLjAxO1xyXG4gICAgb3B0aW9ucy5pbmNsdWRlSW52aXNpYmxlID0gb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgnaW5jbHVkZUludmlzaWJsZScpID8gb3B0aW9ucy5pbmNsdWRlSW52aXNpYmxlIDogZmFsc2U7XHJcbiAgICBpZiAoIW9wdGlvbnMub2Zmc2V0KSB7XHJcbiAgICAgICAgb3B0aW9ucy5vZmZzZXQgPSBuZXcgaW5kZXhfMS5WZWN0b3IzKCk7XHJcbiAgICB9XHJcbiAgICBpZiAoIW9wdGlvbnMub3JpZW50YXRpb24pIHtcclxuICAgICAgICBvcHRpb25zLm9yaWVudGF0aW9uID0gbmV3IGluZGV4XzEuUXVhdGVybmlvbigpO1xyXG4gICAgfVxyXG59XHJcbmNvbnN0IF9maW5pc2hDb2xsaXNpb25TaGFwZSA9IGZ1bmN0aW9uIChjb2xsaXNpb25TaGFwZSwgb3B0aW9ucywgc2NhbGUpIHtcclxuICAgIC8vIE1PRCAoeWFuZGV1KTogQWxsIG9mIHRoaXMgd2lsbCBiZSBkb25lIGluIHBoeXNpY3MudHNcclxuICAgIHJldHVybjtcclxuICAgIGNvbGxpc2lvblNoYXBlLnR5cGUgPSBvcHRpb25zLnR5cGU7XHJcbiAgICBjb2xsaXNpb25TaGFwZS5zZXRNYXJnaW4ob3B0aW9ucy5tYXJnaW4pO1xyXG4gICAgY29sbGlzaW9uU2hhcGUuZGVzdHJveSA9ICgpID0+IHtcclxuICAgICAgICBmb3IgKGxldCByZXMgb2YgY29sbGlzaW9uU2hhcGUucmVzb3VyY2VzIHx8IFtdKSB7XHJcbiAgICAgICAgICAgIEFtbW8uZGVzdHJveShyZXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY29sbGlzaW9uU2hhcGUuaGVpZ2h0ZmllbGREYXRhKSB7XHJcbiAgICAgICAgICAgIEFtbW8uX2ZyZWUoY29sbGlzaW9uU2hhcGUuaGVpZ2h0ZmllbGREYXRhKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgQW1tby5kZXN0cm95KGNvbGxpc2lvblNoYXBlKTtcclxuICAgIH07XHJcbiAgICBjb25zdCBsb2NhbFRyYW5zZm9ybSA9IG5ldyBBbW1vLmJ0VHJhbnNmb3JtKCk7XHJcbiAgICBjb25zdCByb3RhdGlvbiA9IG5ldyBBbW1vLmJ0UXVhdGVybmlvbigpO1xyXG4gICAgbG9jYWxUcmFuc2Zvcm0uc2V0SWRlbnRpdHkoKTtcclxuICAgIGxvY2FsVHJhbnNmb3JtLmdldE9yaWdpbigpLnNldFZhbHVlKG9wdGlvbnMub2Zmc2V0LngsIG9wdGlvbnMub2Zmc2V0LnksIG9wdGlvbnMub2Zmc2V0LnopO1xyXG4gICAgcm90YXRpb24uc2V0VmFsdWUob3B0aW9ucy5vcmllbnRhdGlvbi54LCBvcHRpb25zLm9yaWVudGF0aW9uLnksIG9wdGlvbnMub3JpZW50YXRpb24ueiwgb3B0aW9ucy5vcmllbnRhdGlvbi53KTtcclxuICAgIGxvY2FsVHJhbnNmb3JtLnNldFJvdGF0aW9uKHJvdGF0aW9uKTtcclxuICAgIEFtbW8uZGVzdHJveShyb3RhdGlvbik7XHJcbiAgICBpZiAoc2NhbGUpIHtcclxuICAgICAgICBjb25zdCBsb2NhbFNjYWxlID0gbmV3IEFtbW8uYnRWZWN0b3IzKHNjYWxlLngsIHNjYWxlLnksIHNjYWxlLnopO1xyXG4gICAgICAgIGNvbGxpc2lvblNoYXBlLnNldExvY2FsU2NhbGluZyhsb2NhbFNjYWxlKTtcclxuICAgICAgICBBbW1vLmRlc3Ryb3kobG9jYWxTY2FsZSk7XHJcbiAgICB9XHJcbiAgICBjb2xsaXNpb25TaGFwZS5sb2NhbFRyYW5zZm9ybSA9IGxvY2FsVHJhbnNmb3JtO1xyXG59O1xyXG5leHBvcnRzLml0ZXJhdGVHZW9tZXRyaWVzID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGNvbnN0IGludmVyc2UgPSBuZXcgaW5kZXhfMS5NYXRyaXg0KCk7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHJvb3QsIG9wdGlvbnMsIGNiKSB7XHJcbiAgICAgICAgLy8gTU9EICh5YW5kZXUpOiBVcGRhdGUgdG8gdGhyZWUuanMgcjEyM1xyXG4gICAgICAgIC8vIGNvbXBhdGliaWxpdHkgZml4IGZvciB0aHJlZS5qcyA+PSByMTIzIChEZXplbWJlciAyMDIwKVxyXG4gICAgICAgIGlmICgraW5kZXhfMS5SRVZJU0lPTiA+PSAxMjMpXHJcbiAgICAgICAgICAgIGludmVyc2UuY29weShyb290Lm1hdHJpeFdvcmxkKS5pbnZlcnQoKTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIGludmVyc2UuZ2V0SW52ZXJzZShyb290Lm1hdHJpeFdvcmxkKTtcclxuICAgICAgICBjb25zdCBzY2FsZSA9IG5ldyBpbmRleF8xLlZlY3RvcjMoKTtcclxuICAgICAgICBzY2FsZS5zZXRGcm9tTWF0cml4U2NhbGUocm9vdC5tYXRyaXhXb3JsZCk7XHJcbiAgICAgICAgcm9vdC50cmF2ZXJzZShtZXNoID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdHJhbnNmb3JtID0gbmV3IGluZGV4XzEuTWF0cml4NCgpO1xyXG4gICAgICAgICAgICBpZiAobWVzaC5pc01lc2ggJiZcclxuICAgICAgICAgICAgICAgIC8vIE1PRCAoeWFuZGV1KTogTm8gbmVlZCB0byBjaGVjayBpZiBuYW1lIGlzICdTa3knXHJcbiAgICAgICAgICAgICAgICAvLyBtZXNoLm5hbWUgIT09ICdTa3knICYmXHJcbiAgICAgICAgICAgICAgICAob3B0aW9ucy5pbmNsdWRlSW52aXNpYmxlIHx8IChtZXNoLmVsICYmIG1lc2guZWwub2JqZWN0M0QudmlzaWJsZSkgfHwgbWVzaC52aXNpYmxlKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG1lc2ggPT09IHJvb3QpIHtcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm0uaWRlbnRpdHkoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIG1lc2gudXBkYXRlV29ybGRNYXRyaXgodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtLm11bHRpcGx5TWF0cmljZXMoaW52ZXJzZSwgbWVzaC5tYXRyaXhXb3JsZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyB0b2RvOiBtaWdodCB3YW50IHRvIHJldHVybiBudWxsIHhmb3JtIGlmIHRoaXMgaXMgdGhlIHJvb3Qgc28gdGhhdCBjYWxsZXJzIGNhbiBhdm9pZCBtdWx0aXBseWluZ1xyXG4gICAgICAgICAgICAgICAgLy8gdGhpbmdzIGJ5IHRoZSBpZGVudGl0eSBtYXRyaXhcclxuICAgICAgICAgICAgICAgIGNiKG1lc2guZ2VvbWV0cnkuaXNCdWZmZXJHZW9tZXRyeSA/IG1lc2guZ2VvbWV0cnkuYXR0cmlidXRlcy5wb3NpdGlvbi5hcnJheSA6IG1lc2guZ2VvbWV0cnkudmVydGljZXMsIHRyYW5zZm9ybS5lbGVtZW50cywgbWVzaC5nZW9tZXRyeS5pbmRleCA/IG1lc2guZ2VvbWV0cnkuaW5kZXguYXJyYXkgOiBudWxsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxufSkoKTtcclxuY29uc3QgX2NvbXB1dGVTY2FsZSA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBjb25zdCBtYXRyaXggPSBuZXcgaW5kZXhfMS5NYXRyaXg0KCk7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKG1hdHJpeFdvcmxkLCBvcHRpb25zID0ge30pIHtcclxuICAgICAgICBjb25zdCBzY2FsZSA9IG5ldyBpbmRleF8xLlZlY3RvcjMoMSwgMSwgMSk7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMuZml0ID09PSBleHBvcnRzLkZJVC5BTEwpIHtcclxuICAgICAgICAgICAgbWF0cml4LmZyb21BcnJheShtYXRyaXhXb3JsZCk7XHJcbiAgICAgICAgICAgIHNjYWxlLnNldEZyb21NYXRyaXhTY2FsZShtYXRyaXgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gc2NhbGU7XHJcbiAgICB9O1xyXG59KSgpO1xyXG5jb25zdCBfY29tcHV0ZVJhZGl1cyA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBjb25zdCBjZW50ZXIgPSBuZXcgaW5kZXhfMS5WZWN0b3IzKCk7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHZlcnRpY2VzLCBtYXRyaWNlcywgYm91bmRzKSB7XHJcbiAgICAgICAgbGV0IG1heFJhZGl1c1NxID0gMDtcclxuICAgICAgICBsZXQgeyB4OiBjeCwgeTogY3ksIHo6IGN6IH0gPSBib3VuZHMuZ2V0Q2VudGVyKGNlbnRlcik7XHJcbiAgICAgICAgX2l0ZXJhdGVWZXJ0aWNlcyh2ZXJ0aWNlcywgbWF0cmljZXMsIHYgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBkeCA9IGN4IC0gdi54O1xyXG4gICAgICAgICAgICBjb25zdCBkeSA9IGN5IC0gdi55O1xyXG4gICAgICAgICAgICBjb25zdCBkeiA9IGN6IC0gdi56O1xyXG4gICAgICAgICAgICBtYXhSYWRpdXNTcSA9IE1hdGgubWF4KG1heFJhZGl1c1NxLCBkeCAqIGR4ICsgZHkgKiBkeSArIGR6ICogZHopO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBNYXRoLnNxcnQobWF4UmFkaXVzU3EpO1xyXG4gICAgfTtcclxufSkoKTtcclxuY29uc3QgX2NvbXB1dGVIYWxmRXh0ZW50cyA9IGZ1bmN0aW9uIChib3VuZHMsIG1pbkhhbGZFeHRlbnQsIG1heEhhbGZFeHRlbnQpIHtcclxuICAgIGNvbnN0IGhhbGZFeHRlbnRzID0gbmV3IGluZGV4XzEuVmVjdG9yMygpO1xyXG4gICAgcmV0dXJuIGhhbGZFeHRlbnRzLnN1YlZlY3RvcnMoYm91bmRzLm1heCwgYm91bmRzLm1pbikubXVsdGlwbHlTY2FsYXIoMC41KS5jbGFtcFNjYWxhcihtaW5IYWxmRXh0ZW50LCBtYXhIYWxmRXh0ZW50KTtcclxufTtcclxuY29uc3QgX2NvbXB1dGVMb2NhbE9mZnNldCA9IGZ1bmN0aW9uIChtYXRyaXgsIGJvdW5kcywgdGFyZ2V0KSB7XHJcbiAgICB0YXJnZXQuYWRkVmVjdG9ycyhib3VuZHMubWF4LCBib3VuZHMubWluKS5tdWx0aXBseVNjYWxhcigwLjUpLmFwcGx5TWF0cml4NChtYXRyaXgpO1xyXG4gICAgcmV0dXJuIHRhcmdldDtcclxufTtcclxuLy8gcmV0dXJucyB0aGUgYm91bmRpbmcgYm94IGZvciB0aGUgZ2VvbWV0cmllcyB1bmRlcm5lYXRoIGByb290YC5cclxuY29uc3QgX2NvbXB1dGVCb3VuZHMgPSBmdW5jdGlvbiAodmVydGljZXMsIG1hdHJpY2VzKSB7XHJcbiAgICBjb25zdCBib3VuZHMgPSBuZXcgaW5kZXhfMS5Cb3gzKCk7XHJcbiAgICBsZXQgbWluWCA9ICtJbmZpbml0eTtcclxuICAgIGxldCBtaW5ZID0gK0luZmluaXR5O1xyXG4gICAgbGV0IG1pblogPSArSW5maW5pdHk7XHJcbiAgICBsZXQgbWF4WCA9IC1JbmZpbml0eTtcclxuICAgIGxldCBtYXhZID0gLUluZmluaXR5O1xyXG4gICAgbGV0IG1heFogPSAtSW5maW5pdHk7XHJcbiAgICBib3VuZHMubWluLnNldCgwLCAwLCAwKTtcclxuICAgIGJvdW5kcy5tYXguc2V0KDAsIDAsIDApO1xyXG4gICAgX2l0ZXJhdGVWZXJ0aWNlcyh2ZXJ0aWNlcywgbWF0cmljZXMsIHYgPT4ge1xyXG4gICAgICAgIGlmICh2LnggPCBtaW5YKVxyXG4gICAgICAgICAgICBtaW5YID0gdi54O1xyXG4gICAgICAgIGlmICh2LnkgPCBtaW5ZKVxyXG4gICAgICAgICAgICBtaW5ZID0gdi55O1xyXG4gICAgICAgIGlmICh2LnogPCBtaW5aKVxyXG4gICAgICAgICAgICBtaW5aID0gdi56O1xyXG4gICAgICAgIGlmICh2LnggPiBtYXhYKVxyXG4gICAgICAgICAgICBtYXhYID0gdi54O1xyXG4gICAgICAgIGlmICh2LnkgPiBtYXhZKVxyXG4gICAgICAgICAgICBtYXhZID0gdi55O1xyXG4gICAgICAgIGlmICh2LnogPiBtYXhaKVxyXG4gICAgICAgICAgICBtYXhaID0gdi56O1xyXG4gICAgfSk7XHJcbiAgICBib3VuZHMubWluLnNldChtaW5YLCBtaW5ZLCBtaW5aKTtcclxuICAgIGJvdW5kcy5tYXguc2V0KG1heFgsIG1heFksIG1heFopO1xyXG4gICAgcmV0dXJuIGJvdW5kcztcclxufTtcclxuY29uc3QgX2l0ZXJhdGVWZXJ0aWNlcyA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBjb25zdCB2ZXJ0ZXggPSBuZXcgaW5kZXhfMS5WZWN0b3IzKCk7XHJcbiAgICBjb25zdCBtYXRyaXggPSBuZXcgaW5kZXhfMS5NYXRyaXg0KCk7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHZlcnRpY2VzLCBtYXRyaWNlcywgY2IpIHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZlcnRpY2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIG1hdHJpeC5mcm9tQXJyYXkobWF0cmljZXNbaV0pO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHZlcnRpY2VzW2ldLmxlbmd0aDsgaiArPSAzKSB7XHJcbiAgICAgICAgICAgICAgICB2ZXJ0ZXguc2V0KHZlcnRpY2VzW2ldW2pdLCB2ZXJ0aWNlc1tpXVtqICsgMV0sIHZlcnRpY2VzW2ldW2ogKyAyXSkuYXBwbHlNYXRyaXg0KG1hdHJpeCk7XHJcbiAgICAgICAgICAgICAgICBjYih2ZXJ0ZXgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufSkoKTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGhyZWUtdG8tYW1tby5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcclxuLyoqXHJcbiAqIEBhdXRob3IgICAgICAgWWFubmljayBEZXViZWwgKGh0dHBzOi8vZ2l0aHViLmNvbS95YW5kZXUpXHJcbiAqIEBjb3B5cmlnaHQgICAgQ29weXJpZ2h0IChjKSAyMDIwIFlhbm5pY2sgRGV1YmVsOyBQcm9qZWN0IFVybDogaHR0cHM6Ly9naXRodWIuY29tL2VuYWJsZTNkL2VuYWJsZTNkXHJcbiAqIEBsaWNlbnNlICAgICAge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9lbmFibGUzZC9lbmFibGUzZC9ibG9iL21hc3Rlci9MSUNFTlNFfEdOVSBHUEx2M31cclxuICovXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5jcmVhdGVUb3J1c1NoYXBlID0gdm9pZCAwO1xyXG4vLyBodHRwczovL3B5YnVsbGV0Lm9yZy9CdWxsZXQvcGhwQkIzL3ZpZXd0b3BpYy5waHA/dD03MjI4XHJcbmNvbnN0IGNyZWF0ZVRvcnVzU2hhcGUgPSAoY29uZmlnLCBxdWF0KSA9PiB7XHJcbiAgICBjb25zdCB7IHJhZGl1cyA9IDEsIHR1YmUgPSAwLjQsIHR1YnVsYXJTZWdtZW50cyA9IDggfSA9IGNvbmZpZztcclxuICAgIGNvbnN0IFNJTURfUEkgPSBNYXRoLlBJO1xyXG4gICAgY29uc3Qgc3ViZGl2aXNpb25zID0gdHVidWxhclNlZ21lbnRzO1xyXG4gICAgY29uc3QgZ2FwID0gTWF0aC5zcXJ0KDIuMCAqIHR1YmUgKiB0dWJlIC0gMi4wICogdHViZSAqIHR1YmUgKiBNYXRoLmNvcygoMi4wICogU0lNRF9QSSkgLyBzdWJkaXZpc2lvbnMpKTtcclxuICAgIGNvbnN0IGJ0SGFsZkV4dGVudHMgPSBuZXcgQW1tby5idFZlY3RvcjModHViZSwgU0lNRF9QSSAvIHN1YmRpdmlzaW9ucyArIDAuNSAqIGdhcCwgdHViZSk7XHJcbiAgICBjb25zdCBjeWxpbmRlclNoYXBlID0gbmV3IEFtbW8uYnRDeWxpbmRlclNoYXBlKGJ0SGFsZkV4dGVudHMpO1xyXG4gICAgY3lsaW5kZXJTaGFwZS5zZXRNYXJnaW4oMC4wNSk7XHJcbiAgICBjb25zdCBjb21wb3VuZFNoYXBlID0gbmV3IEFtbW8uYnRDb21wb3VuZFNoYXBlKCk7XHJcbiAgICBjb25zdCBmb3J3YXJkID0gbmV3IEFtbW8uYnRWZWN0b3IzKDAsIDAsIDEpO1xyXG4gICAgY29uc3Qgc2lkZSA9IG5ldyBBbW1vLmJ0VmVjdG9yMygwLCByYWRpdXMsIDApO1xyXG4gICAgY29uc3Qgcm90YXRpb24gPSBuZXcgQW1tby5idFF1YXRlcm5pb24ocXVhdC54LCBxdWF0LnksIHF1YXQueiwgcXVhdC53KTtcclxuICAgIGZvciAobGV0IHggPSAwOyB4IDwgc3ViZGl2aXNpb25zOyB4KyspIHtcclxuICAgICAgICBjb25zdCBhbmdsZSA9ICh4ICogMi4wICogU0lNRF9QSSkgLyBzdWJkaXZpc2lvbnM7XHJcbiAgICAgICAgY29uc3QgcG9zaXRpb24gPSBzaWRlLnJvdGF0ZShmb3J3YXJkLCBhbmdsZSk7XHJcbiAgICAgICAgY29uc3QgdHJhbnNmb3JtID0gbmV3IEFtbW8uYnRUcmFuc2Zvcm0oKTtcclxuICAgICAgICByb3RhdGlvbi5zZXRSb3RhdGlvbihmb3J3YXJkLCBhbmdsZSArIE1hdGguUEkgLyAyKTtcclxuICAgICAgICB0cmFuc2Zvcm0uc2V0SWRlbnRpdHkoKTtcclxuICAgICAgICB0cmFuc2Zvcm0uc2V0T3JpZ2luKHBvc2l0aW9uKTtcclxuICAgICAgICB0cmFuc2Zvcm0uc2V0Um90YXRpb24ocm90YXRpb24pO1xyXG4gICAgICAgIGNvbXBvdW5kU2hhcGUuYWRkQ2hpbGRTaGFwZSh0cmFuc2Zvcm0sIGN5bGluZGVyU2hhcGUpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGNvbXBvdW5kU2hhcGU7XHJcbn07XHJcbmV4cG9ydHMuY3JlYXRlVG9ydXNTaGFwZSA9IGNyZWF0ZVRvcnVzU2hhcGU7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRvcnVzU2hhcGUuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuLy8gaHR0cHM6Ly93d3cudHlwZXNjcmlwdGxhbmcub3JnL2RvY3MvaGFuZGJvb2svbWl4aW5zLmh0bWxcclxuY29uc3QgYXBwbHlNaXhpbnMgPSAoZGVyaXZlZEN0b3IsIGJhc2VDdG9ycykgPT4ge1xyXG4gICAgYmFzZUN0b3JzLmZvckVhY2goYmFzZUN0b3IgPT4ge1xyXG4gICAgICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGJhc2VDdG9yLnByb3RvdHlwZSkuZm9yRWFjaChuYW1lID0+IHtcclxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZGVyaXZlZEN0b3IucHJvdG90eXBlLCBuYW1lLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGJhc2VDdG9yLnByb3RvdHlwZSwgbmFtZSkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn07XHJcbmV4cG9ydHMuZGVmYXVsdCA9IGFwcGx5TWl4aW5zO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHBseU1peGlucy5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5jb25zdCBpbmRleF8xID0gcmVxdWlyZShcIkBlbmFibGUzZC90aHJlZS13cmFwcGVyL2Rpc3QvaW5kZXhcIik7XHJcbmNsYXNzIERlZmF1bHRNYXRlcmlhbCB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLl9kZWZhdWx0TWF0ZXJpYWwgPSBuZXcgaW5kZXhfMS5NZXNoTGFtYmVydE1hdGVyaWFsKHsgY29sb3I6IDB4Y2NjY2NjIH0pO1xyXG4gICAgfVxyXG4gICAgZ2V0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWZhdWx0TWF0ZXJpYWw7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0cy5kZWZhdWx0ID0gRGVmYXVsdE1hdGVyaWFsO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZWZhdWx0TWF0ZXJpYWwuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbi8qKlxyXG4gKiBAYXV0aG9yICAgICAgIFlhbm5pY2sgRGV1YmVsIChodHRwczovL2dpdGh1Yi5jb20veWFuZGV1KVxyXG4gKiBAY29weXJpZ2h0ICAgIENvcHlyaWdodCAoYykgMjAyMCBZYW5uaWNrIERldWJlbDsgUHJvamVjdCBVcmw6IGh0dHBzOi8vZ2l0aHViLmNvbS9lbmFibGUzZC9lbmFibGUzZFxyXG4gKiBAbGljZW5zZSAgICAgIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZW5hYmxlM2QvZW5hYmxlM2QvYmxvYi9tYXN0ZXIvTElDRU5TRXxHTlUgR1BMdjN9XHJcbiAqL1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuRXh0ZW5kZWRHcm91cCA9IHZvaWQgMDtcclxuY29uc3QgaW5kZXhfMSA9IHJlcXVpcmUoXCJAZW5hYmxlM2QvdGhyZWUtd3JhcHBlci9kaXN0L2luZGV4XCIpO1xyXG5jbGFzcyBFeHRlbmRlZEdyb3VwIGV4dGVuZHMgaW5kZXhfMS5Hcm91cCB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuaXNNZXNoID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5oYXNCb2R5ID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gYG9iamVjdC0ke3RoaXMuaWR9YDtcclxuICAgIH1cclxufVxyXG5leHBvcnRzLkV4dGVuZGVkR3JvdXAgPSBFeHRlbmRlZEdyb3VwO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1leHRlbmRlZEdyb3VwLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xyXG4vKipcclxuICogQGF1dGhvciAgICAgICBZYW5uaWNrIERldWJlbCAoaHR0cHM6Ly9naXRodWIuY29tL3lhbmRldSlcclxuICogQGNvcHlyaWdodCAgICBDb3B5cmlnaHQgKGMpIDIwMjAgWWFubmljayBEZXViZWw7IFByb2plY3QgVXJsOiBodHRwczovL2dpdGh1Yi5jb20vZW5hYmxlM2QvZW5hYmxlM2RcclxuICogQGxpY2Vuc2UgICAgICB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2VuYWJsZTNkL2VuYWJsZTNkL2Jsb2IvbWFzdGVyL0xJQ0VOU0V8R05VIEdQTHYzfVxyXG4gKi9cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLkV4dGVuZGVkTWVzaCA9IHZvaWQgMDtcclxuY29uc3QgaW5kZXhfMSA9IHJlcXVpcmUoXCJAZW5hYmxlM2QvdGhyZWUtd3JhcHBlci9kaXN0L2luZGV4XCIpO1xyXG5jbGFzcyBFeHRlbmRlZE1lc2ggZXh0ZW5kcyBpbmRleF8xLk1lc2gge1xyXG4gICAgY29uc3RydWN0b3IoZ2VvbWV0cnksIG1hdGVyaWFsKSB7XHJcbiAgICAgICAgc3VwZXIoZ2VvbWV0cnksIG1hdGVyaWFsKTtcclxuICAgICAgICB0aGlzLnZlY3RvcjMgPSBuZXcgaW5kZXhfMS5WZWN0b3IzKCk7XHJcbiAgICAgICAgdGhpcy5pc0dyb3VwID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5oYXNCb2R5ID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gYG9iamVjdC0ke3RoaXMuaWR9YDtcclxuICAgIH1cclxuICAgIC8qKiBSZXR1cm5zIGFsbCB2YWx1ZXMgcmVsYXRpdmUgdG8gdGhlIHdvcmxkLiAqL1xyXG4gICAgZ2V0IHdvcmxkKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHRoZXRhOiB0aGlzLndvcmxkVGhldGEsXHJcbiAgICAgICAgICAgIHBoaTogdGhpcy53b3JsZFBoaVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICAvKiogR2V0IHRoZSB0aGV0YSByZWxhdGl2ZSB0byB0aGUgd29ybGQuICovXHJcbiAgICBnZXQgd29ybGRUaGV0YSgpIHtcclxuICAgICAgICB0aGlzLmdldFdvcmxkRGlyZWN0aW9uKHRoaXMudmVjdG9yMyk7XHJcbiAgICAgICAgcmV0dXJuIE1hdGguYXRhbjIodGhpcy52ZWN0b3IzLngsIHRoaXMudmVjdG9yMy56KTtcclxuICAgIH1cclxuICAgIC8qKiBHZXQgdGhlIHBoaSByZWxhdGl2ZSB0byB0aGUgd29ybGQuICovXHJcbiAgICBnZXQgd29ybGRQaGkoKSB7XHJcbiAgICAgICAgdGhpcy5nZXRXb3JsZERpcmVjdGlvbih0aGlzLnZlY3RvcjMpO1xyXG4gICAgICAgIHJldHVybiBNYXRoLmFjb3ModGhpcy52ZWN0b3IzLnkpO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydHMuRXh0ZW5kZWRNZXNoID0gRXh0ZW5kZWRNZXNoO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1leHRlbmRlZE1lc2guanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbi8qKlxyXG4gKiBAYXV0aG9yICAgICAgIFlhbm5pY2sgRGV1YmVsIChodHRwczovL2dpdGh1Yi5jb20veWFuZGV1KVxyXG4gKiBAY29weXJpZ2h0ICAgIENvcHlyaWdodCAoYykgMjAyMCBZYW5uaWNrIERldWJlbDsgUHJvamVjdCBVcmw6IGh0dHBzOi8vZ2l0aHViLmNvbS9lbmFibGUzZC9lbmFibGUzZFxyXG4gKiBAbGljZW5zZSAgICAgIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZW5hYmxlM2QvZW5hYmxlM2QvYmxvYi9tYXN0ZXIvTElDRU5TRXxHTlUgR1BMdjN9XHJcbiAqL1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuRXh0ZW5kZWRPYmplY3QzRCA9IHZvaWQgMDtcclxuY29uc3QgaW5kZXhfMSA9IHJlcXVpcmUoXCJAZW5hYmxlM2QvdGhyZWUtd3JhcHBlci9kaXN0L2luZGV4XCIpO1xyXG4vKipcclxuICogRXh0ZW5kcyB0aGUgT2JqZWN0M0QgY2xhc3MgZnJvbSBUSFJFRS5qcyBhbmQgaW1wbGVtZW50cyBwcm9wZXJ0aWVzIGZyb20gTGluZSwgTWVzaCBhbmQgUG9pbnRzLlxyXG4gKi9cclxuY2xhc3MgRXh0ZW5kZWRPYmplY3QzRCBleHRlbmRzIGluZGV4XzEuT2JqZWN0M0Qge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLnZlY3RvcjMgPSBuZXcgaW5kZXhfMS5WZWN0b3IzKCk7XHJcbiAgICAgICAgdGhpcy5pc0dyb3VwID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5oYXNCb2R5ID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5hbmltcyA9IHt9OyAvLyBkZXByZWNhdGVkXHJcbiAgICAgICAgdGhpcy5fY3VycmVudEFuaW1hdGlvbiA9ICcnO1xyXG4gICAgICAgIHRoaXMuX2FuaW1hdGlvbkFjdGlvbnMgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gYG9iamVjdC0ke3RoaXMuaWR9YDtcclxuICAgIH1cclxuICAgIC8qKiBzZXRBY3Rpb24obmFtZSkgaXMgZGVwcmVjYXRlZC4gVXNlIGFuaW1hdGlvbi5wbGF5KG5hbWUpIGluc3RlYWQhICovXHJcbiAgICBzZXRBY3Rpb24obmFtZSkge1xyXG4gICAgICAgIGNvbnNvbGUud2FybignW2VuYWJsZTNkXSBzZXRBY3Rpb24obmFtZSkgaXMgZGVwcmVjYXRlZC4gVXNlIGFuaW1hdGlvbi5wbGF5KG5hbWUpIGluc3RlYWQhJyk7XHJcbiAgICAgICAgdGhpcy5hbmltYXRpb25QbGF5KG5hbWUpO1xyXG4gICAgfVxyXG4gICAgLyoqIFJldHVybnMgYWxsIHZhbHVlcyByZWxhdGl2ZSB0byB0aGUgd29ybGQuICovXHJcbiAgICBnZXQgd29ybGQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgdGhldGE6IHRoaXMud29ybGRUaGV0YSxcclxuICAgICAgICAgICAgcGhpOiB0aGlzLndvcmxkUGhpXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIC8qKiBHZXQgdGhlIHRoZXRhIHJlbGF0aXZlIHRvIHRoZSB3b3JsZC4gKi9cclxuICAgIGdldCB3b3JsZFRoZXRhKCkge1xyXG4gICAgICAgIHRoaXMuZ2V0V29ybGREaXJlY3Rpb24odGhpcy52ZWN0b3IzKTtcclxuICAgICAgICByZXR1cm4gTWF0aC5hdGFuMih0aGlzLnZlY3RvcjMueCwgdGhpcy52ZWN0b3IzLnopO1xyXG4gICAgfVxyXG4gICAgLyoqIEdldCB0aGUgcGhpIHJlbGF0aXZlIHRvIHRoZSB3b3JsZC4gKi9cclxuICAgIGdldCB3b3JsZFBoaSgpIHtcclxuICAgICAgICB0aGlzLmdldFdvcmxkRGlyZWN0aW9uKHRoaXMudmVjdG9yMyk7XHJcbiAgICAgICAgcmV0dXJuIE1hdGguYWNvcyh0aGlzLnZlY3RvcjMueSk7XHJcbiAgICB9XHJcbiAgICBnZXQgYW5pbWF0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGN1cnJlbnQ6IHRoaXMuX2N1cnJlbnRBbmltYXRpb24sXHJcbiAgICAgICAgICAgIGFkZDogKGtleSwgYW5pbWF0aW9uKSA9PiB0aGlzLmFuaW1hdGlvbkFkZChrZXksIGFuaW1hdGlvbiksXHJcbiAgICAgICAgICAgIHBsYXk6IChuYW1lLCB0cmFuc2l0aW9uRHVyYXRpb24gPSA1MDAsIGxvb3AgPSB0cnVlKSA9PiB0aGlzLmFuaW1hdGlvblBsYXkobmFtZSwgdHJhbnNpdGlvbkR1cmF0aW9uLCBsb29wKSxcclxuICAgICAgICAgICAgbWl4ZXI6IHRoaXMuYW5pbWF0aW9uTWl4ZXJcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgc2V0IGFuaW1hdGlvbk1peGVyKGFuaW1hdGlvbk1peGVyKSB7XHJcbiAgICAgICAgdGhpcy5fYW5pbWF0aW9uTWl4ZXIgPSBhbmltYXRpb25NaXhlcjtcclxuICAgIH1cclxuICAgIGdldCBhbmltYXRpb25NaXhlcigpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX2FuaW1hdGlvbk1peGVyKVxyXG4gICAgICAgICAgICB0aGlzLl9hbmltYXRpb25NaXhlciA9IG5ldyBpbmRleF8xLkFuaW1hdGlvbk1peGVyKHRoaXMpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9hbmltYXRpb25NaXhlcjtcclxuICAgIH1cclxuICAgIGFuaW1hdGlvbkFkZChrZXksIGFuaW1hdGlvbikge1xyXG4gICAgICAgIHRoaXMuX2FuaW1hdGlvbkFjdGlvbnMuc2V0KGtleSwgdGhpcy5hbmltYXRpb25NaXhlci5jbGlwQWN0aW9uKGFuaW1hdGlvbikpO1xyXG4gICAgfVxyXG4gICAgYW5pbWF0aW9uUGxheShuYW1lLCB0cmFuc2l0aW9uRHVyYXRpb24gPSA1MDAsIGxvb3AgPSB0cnVlKSB7XHJcbiAgICAgICAgY29uc3QgbmV4dCA9IHRoaXMuX2FuaW1hdGlvbkFjdGlvbnMuZ2V0KG5hbWUpO1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnQgPSB0aGlzLl9hbmltYXRpb25BY3Rpb25zLmdldCh0aGlzLl9jdXJyZW50QW5pbWF0aW9uKTtcclxuICAgICAgICBpZiAobmV4dCkge1xyXG4gICAgICAgICAgICBuZXh0LnJlc2V0KCk7XHJcbiAgICAgICAgICAgIGlmIChjdXJyZW50KSB7XHJcbiAgICAgICAgICAgICAgICBuZXh0LmNyb3NzRmFkZUZyb20oY3VycmVudCwgdHJhbnNpdGlvbkR1cmF0aW9uIC8gMTAwMCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICBuZXh0LmNsYW1wV2hlbkZpbmlzaGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIWxvb3ApXHJcbiAgICAgICAgICAgICAgICBuZXh0LnNldExvb3AoaW5kZXhfMS5Mb29wT25jZSwgMCk7XHJcbiAgICAgICAgICAgIG5leHQucGxheSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9jdXJyZW50QW5pbWF0aW9uID0gbmFtZTtcclxuICAgIH1cclxufVxyXG5leHBvcnRzLkV4dGVuZGVkT2JqZWN0M0QgPSBFeHRlbmRlZE9iamVjdDNEO1xyXG5leHBvcnRzLmRlZmF1bHQgPSBFeHRlbmRlZE9iamVjdDNEO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1leHRlbmRlZE9iamVjdDNELmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xyXG4vKipcclxuICogQGF1dGhvciAgICAgICBZYW5uaWNrIERldWJlbCAoaHR0cHM6Ly9naXRodWIuY29tL3lhbmRldSlcclxuICogQGNvcHlyaWdodCAgICBDb3B5cmlnaHQgKGMpIDIwMjAgWWFubmljayBEZXViZWw7IFByb2plY3QgVXJsOiBodHRwczovL2dpdGh1Yi5jb20vZW5hYmxlM2QvZW5hYmxlM2RcclxuICogQGxpY2Vuc2UgICAgICB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2VuYWJsZTNkL2VuYWJsZTNkL2Jsb2IvbWFzdGVyL0xJQ0VOU0V8R05VIEdQTHYzfVxyXG4gKi9cclxudmFyIF9fcmVzdCA9ICh0aGlzICYmIHRoaXMuX19yZXN0KSB8fCBmdW5jdGlvbiAocywgZSkge1xyXG4gICAgdmFyIHQgPSB7fTtcclxuICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSAmJiBlLmluZGV4T2YocCkgPCAwKVxyXG4gICAgICAgIHRbcF0gPSBzW3BdO1xyXG4gICAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gXCJmdW5jdGlvblwiKVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBwID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzKTsgaSA8IHAubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGUuaW5kZXhPZihwW2ldKSA8IDAgJiYgT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHMsIHBbaV0pKVxyXG4gICAgICAgICAgICAgICAgdFtwW2ldXSA9IHNbcFtpXV07XHJcbiAgICAgICAgfVxyXG4gICAgcmV0dXJuIHQ7XHJcbn07XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuY29uc3QgaW5kZXhfMSA9IHJlcXVpcmUoXCJAZW5hYmxlM2QvdGhyZWUtd3JhcHBlci9kaXN0L2luZGV4XCIpO1xyXG5jb25zdCBleHRlbmRlZE1lc2hfMSA9IHJlcXVpcmUoXCIuL2V4dGVuZGVkTWVzaFwiKTtcclxuY29uc3QgbG9nZ2VyXzEgPSByZXF1aXJlKFwiLi9sb2dnZXJcIik7XHJcbmNvbnN0IGRlZmF1bHRNYXRlcmlhbF8xID0gcmVxdWlyZShcIi4vZGVmYXVsdE1hdGVyaWFsXCIpO1xyXG5jbGFzcyBGYWN0b3JpZXMge1xyXG4gICAgY29uc3RydWN0b3Ioc2NlbmUpIHtcclxuICAgICAgICB0aGlzLnNjZW5lID0gc2NlbmU7XHJcbiAgICAgICAgdGhpcy5pc0hlYWRsZXNzID0gc2NlbmUgPT09ICdoZWFkbGVzcycgPyB0cnVlIDogZmFsc2U7XHJcbiAgICAgICAgdGhpcy5kZWZhdWx0TWF0ZXJpYWwgPSBuZXcgZGVmYXVsdE1hdGVyaWFsXzEuZGVmYXVsdCgpO1xyXG4gICAgfVxyXG4gICAgZ2V0IG1ha2UoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcGxhbmU6IChwbGFuZUNvbmZpZyA9IHt9LCBtYXRlcmlhbENvbmZpZyA9IHt9KSA9PiB0aGlzLm1ha2VQbGFuZShwbGFuZUNvbmZpZywgbWF0ZXJpYWxDb25maWcpLFxyXG4gICAgICAgICAgICBib3g6IChib3hDb25maWcgPSB7fSwgbWF0ZXJpYWxDb25maWcgPSB7fSkgPT4gdGhpcy5tYWtlQm94KGJveENvbmZpZywgbWF0ZXJpYWxDb25maWcpLFxyXG4gICAgICAgICAgICBzcGhlcmU6IChzcGhlcmVDb25maWcgPSB7fSwgbWF0ZXJpYWxDb25maWcgPSB7fSkgPT4gdGhpcy5tYWtlU3BoZXJlKHNwaGVyZUNvbmZpZywgbWF0ZXJpYWxDb25maWcpLFxyXG4gICAgICAgICAgICBjeWxpbmRlcjogKGN5bGluZGVyQ29uZmlnID0ge30sIG1hdGVyaWFsQ29uZmlnID0ge30pID0+IHRoaXMubWFrZUN5bGluZGVyKGN5bGluZGVyQ29uZmlnLCBtYXRlcmlhbENvbmZpZyksXHJcbiAgICAgICAgICAgIGNvbmU6IChjb25lQ29uZmlnID0ge30sIG1hdGVyaWFsQ29uZmlnID0ge30pID0+IHRoaXMubWFrZUNvbmUoY29uZUNvbmZpZywgbWF0ZXJpYWxDb25maWcpLFxyXG4gICAgICAgICAgICB0b3J1czogKHRvcnVzQ29uZmlnID0ge30sIG1hdGVyaWFsQ29uZmlnID0ge30pID0+IHRoaXMubWFrZVRvcnVzKHRvcnVzQ29uZmlnLCBtYXRlcmlhbENvbmZpZyksXHJcbiAgICAgICAgICAgIGV4dHJ1ZGU6IChleHRydWRlQ29uZmlnLCBtYXRlcmlhbENvbmZpZyA9IHt9KSA9PiB0aGlzLm1ha2VFeHRydWRlKGV4dHJ1ZGVDb25maWcsIG1hdGVyaWFsQ29uZmlnKVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBnZXQgYWRkKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIC8vIGVmZmVjdENvbXBvc2VyOiAoKSA9PiB0aGlzLmFkZEVmZmVjdENvbXBvc2VyKCksXHJcbiAgICAgICAgICAgIG1lc2g6IChtZXNoKSA9PiB0aGlzLmFkZE1lc2gobWVzaCksXHJcbiAgICAgICAgICAgIC8vIGdyb3VwOiAoLi4uY2hpbGRyZW4pID0+IHRoaXMuYWRkR3JvdXAoY2hpbGRyZW4pLFxyXG4gICAgICAgICAgICBleGlzdGluZzogKG9iamVjdCkgPT4gdGhpcy5hZGRFeGlzdGluZyhvYmplY3QpLFxyXG4gICAgICAgICAgICAvLyAgR2VvbWV0cnlcclxuICAgICAgICAgICAgcGxhbmU6IChwbGFuZUNvbmZpZyA9IHt9LCBtYXRlcmlhbENvbmZpZyA9IHt9KSA9PiB0aGlzLmFkZFBsYW5lKHBsYW5lQ29uZmlnLCBtYXRlcmlhbENvbmZpZyksXHJcbiAgICAgICAgICAgIGJveDogKGJveENvbmZpZyA9IHt9LCBtYXRlcmlhbENvbmZpZyA9IHt9KSA9PiB0aGlzLmFkZEJveChib3hDb25maWcsIG1hdGVyaWFsQ29uZmlnKSxcclxuICAgICAgICAgICAgZ3JvdW5kOiAoZ3JvdW5kQ29uZmlnLCBtYXRlcmlhbENvbmZpZyA9IHt9KSA9PiB0aGlzLmFkZEdyb3VuZChncm91bmRDb25maWcsIG1hdGVyaWFsQ29uZmlnKSxcclxuICAgICAgICAgICAgLy8uLi5cclxuICAgICAgICAgICAgc3BoZXJlOiAoc3BoZXJlQ29uZmlnID0ge30sIG1hdGVyaWFsQ29uZmlnID0ge30pID0+IHRoaXMuYWRkU3BoZXJlKHNwaGVyZUNvbmZpZywgbWF0ZXJpYWxDb25maWcpLFxyXG4gICAgICAgICAgICBjeWxpbmRlcjogKGN5bGluZGVyQ29uZmlnID0ge30sIG1hdGVyaWFsQ29uZmlnID0ge30pID0+IHRoaXMuYWRkQ3lsaW5kZXIoY3lsaW5kZXJDb25maWcsIG1hdGVyaWFsQ29uZmlnKSxcclxuICAgICAgICAgICAgY29uZTogKGNvbmVDb25maWcgPSB7fSwgbWF0ZXJpYWxDb25maWcgPSB7fSkgPT4gdGhpcy5hZGRDb25lKGNvbmVDb25maWcsIG1hdGVyaWFsQ29uZmlnKSxcclxuICAgICAgICAgICAgdG9ydXM6ICh0b3J1c0NvbmZpZyA9IHt9LCBtYXRlcmlhbENvbmZpZyA9IHt9KSA9PiB0aGlzLmFkZFRvcnVzKHRvcnVzQ29uZmlnLCBtYXRlcmlhbENvbmZpZyksXHJcbiAgICAgICAgICAgIGV4dHJ1ZGU6IChleHRydWRlQ29uZmlnLCBtYXRlcmlhbENvbmZpZyA9IHt9KSA9PiB0aGlzLmFkZEV4dHJ1ZGUoZXh0cnVkZUNvbmZpZywgbWF0ZXJpYWxDb25maWcpLFxyXG4gICAgICAgICAgICAvLy4uLlxyXG4gICAgICAgICAgICBtYXRlcmlhbDogKG1hdGVyaWFsQ29uZmlnID0ge30pID0+IHRoaXMuYWRkTWF0ZXJpYWwobWF0ZXJpYWxDb25maWcpXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIGFkZEV4aXN0aW5nKC4uLm9iamVjdCkge1xyXG4gICAgICAgIGlmICh0aGlzLnNjZW5lID09PSAnaGVhZGxlc3MnKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgdGhpcy5zY2VuZS5hZGQoLi4ub2JqZWN0KTtcclxuICAgIH1cclxuICAgIGFkZE1lc2gobWVzaCkge1xyXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KG1lc2gpKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWVzaC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hZGRFeGlzdGluZyhtZXNoW2ldKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5hZGRFeGlzdGluZyhtZXNoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBjcmVhdGVNZXNoKGdlb21ldHJ5LCBtYXRlcmlhbCwgcG9zaXRpb24pIHtcclxuICAgICAgICBjb25zdCB7IHggPSAwLCB5ID0gMCwgeiA9IDAgfSA9IHBvc2l0aW9uO1xyXG4gICAgICAgIGxldCBvYmo7XHJcbiAgICAgICAgc3dpdGNoICghQXJyYXkuaXNBcnJheShtYXRlcmlhbCkgJiYgbWF0ZXJpYWwudHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlICdMaW5lQmFzaWNNYXRlcmlhbCc6XHJcbiAgICAgICAgICAgICAgICBvYmogPSBuZXcgaW5kZXhfMS5MaW5lKGdlb21ldHJ5LCBtYXRlcmlhbCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnUG9pbnRzTWF0ZXJpYWwnOlxyXG4gICAgICAgICAgICAgICAgb2JqID0gbmV3IGluZGV4XzEuUG9pbnRzKGdlb21ldHJ5LCBtYXRlcmlhbCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIG9iaiA9IG5ldyBleHRlbmRlZE1lc2hfMS5FeHRlbmRlZE1lc2goZ2VvbWV0cnksIG1hdGVyaWFsKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBvYmoucG9zaXRpb24uc2V0KHgsIHksIHopO1xyXG4gICAgICAgIG9iai5jYXN0U2hhZG93ID0gb2JqLnJlY2VpdmVTaGFkb3cgPSB0cnVlO1xyXG4gICAgICAgIHJldHVybiBvYmo7XHJcbiAgICB9XHJcbiAgICBtYWtlRXh0cnVkZShleHRydWRlQ29uZmlnLCBtYXRlcmlhbENvbmZpZykge1xyXG4gICAgICAgIGNvbnN0IHsgeCwgeSwgeiwgbmFtZSwgc2hhcGUsIGF1dG9DZW50ZXIgPSB0cnVlLCBicmVha2FibGUgPSBmYWxzZSwgYnVmZmVyR2VvbWV0cnkgPSB0cnVlIH0gPSBleHRydWRlQ29uZmlnLCByZXN0ID0gX19yZXN0KGV4dHJ1ZGVDb25maWdcclxuICAgICAgICAvLyBAdHMtaWdub3JlIC8vIEV4dHJ1ZGVHZW9tZXRyeU9wdGlvbnMgaW50ZXJmYWNlIG1pc3Npbmcgc2luY2UgdGhyZWUuanMgcjEyMVxyXG4gICAgICAgICwgW1wieFwiLCBcInlcIiwgXCJ6XCIsIFwibmFtZVwiLCBcInNoYXBlXCIsIFwiYXV0b0NlbnRlclwiLCBcImJyZWFrYWJsZVwiLCBcImJ1ZmZlckdlb21ldHJ5XCJdKTtcclxuICAgICAgICAvLyBAdHMtaWdub3JlIC8vIEV4dHJ1ZGVHZW9tZXRyeU9wdGlvbnMgaW50ZXJmYWNlIG1pc3Npbmcgc2luY2UgdGhyZWUuanMgcjEyMVxyXG4gICAgICAgIGNvbnN0IHsgZGVwdGggPSAxLCBiZXZlbEVuYWJsZWQgPSBmYWxzZSB9ID0gcmVzdDtcclxuICAgICAgICBjb25zdCBnZW9tZXRyeSA9IGJ1ZmZlckdlb21ldHJ5IHx8IGJyZWFrYWJsZSB8fCB0aGlzLmlzSGVhZGxlc3NcclxuICAgICAgICAgICAgPyBuZXcgaW5kZXhfMS5FeHRydWRlQnVmZmVyR2VvbWV0cnkoc2hhcGUsIE9iamVjdC5hc3NpZ24oeyBkZXB0aCwgYmV2ZWxFbmFibGVkIH0sIHJlc3QpKVxyXG4gICAgICAgICAgICA6IG5ldyBpbmRleF8xLkV4dHJ1ZGVHZW9tZXRyeShzaGFwZSwgT2JqZWN0LmFzc2lnbih7IGRlcHRoLCBiZXZlbEVuYWJsZWQgfSwgcmVzdCkpO1xyXG4gICAgICAgIGNvbnN0IG1hdGVyaWFsID0gdGhpcy5hZGRNYXRlcmlhbChtYXRlcmlhbENvbmZpZyk7XHJcbiAgICAgICAgY29uc3QgbWVzaCA9IHRoaXMuY3JlYXRlTWVzaChnZW9tZXRyeSwgbWF0ZXJpYWwsIHsgeCwgeSwgeiB9KTtcclxuICAgICAgICAvLyBhdXRvIGFkanVzdCB0aGUgY2VudGVyIGZvciBjdXN0b20gc2hhcGVzXHJcbiAgICAgICAgaWYgKGF1dG9DZW50ZXIpXHJcbiAgICAgICAgICAgIG1lc2guZ2VvbWV0cnkuY2VudGVyKCk7XHJcbiAgICAgICAgbWVzaC5uYW1lID0gbmFtZSB8fCBgYm9keV9pZF8ke21lc2guaWR9YDtcclxuICAgICAgICBtZXNoLnNoYXBlID0gJ2V4dHJ1ZGUnO1xyXG4gICAgICAgIHJldHVybiBtZXNoO1xyXG4gICAgfVxyXG4gICAgYWRkRXh0cnVkZShleHRydWRlQ29uZmlnLCBtYXRlcmlhbENvbmZpZyA9IHt9KSB7XHJcbiAgICAgICAgY29uc3Qgb2JqID0gdGhpcy5tYWtlRXh0cnVkZShleHRydWRlQ29uZmlnLCBtYXRlcmlhbENvbmZpZyk7XHJcbiAgICAgICAgdGhpcy5hZGRFeGlzdGluZyhvYmopO1xyXG4gICAgICAgIHJldHVybiBvYmo7XHJcbiAgICB9XHJcbiAgICBtYWtlUGxhbmUocGxhbmVDb25maWcsIG1hdGVyaWFsQ29uZmlnKSB7XHJcbiAgICAgICAgY29uc3QgeyB4LCB5LCB6LCBuYW1lLCBicmVha2FibGUgPSBmYWxzZSwgYnVmZmVyR2VvbWV0cnkgPSB0cnVlIH0gPSBwbGFuZUNvbmZpZywgcmVzdCA9IF9fcmVzdChwbGFuZUNvbmZpZywgW1wieFwiLCBcInlcIiwgXCJ6XCIsIFwibmFtZVwiLCBcImJyZWFrYWJsZVwiLCBcImJ1ZmZlckdlb21ldHJ5XCJdKTtcclxuICAgICAgICBjb25zdCBnZW9tZXRyeSA9IGJ1ZmZlckdlb21ldHJ5IHx8IGJyZWFrYWJsZSB8fCB0aGlzLmlzSGVhZGxlc3NcclxuICAgICAgICAgICAgPyBuZXcgaW5kZXhfMS5QbGFuZUJ1ZmZlckdlb21ldHJ5KHJlc3Qud2lkdGggfHwgMSwgcmVzdC5oZWlnaHQgfHwgMSwgcmVzdC53aWR0aFNlZ21lbnRzIHx8IDEsIHJlc3QuaGVpZ2h0U2VnbWVudHMgfHwgMSlcclxuICAgICAgICAgICAgOiBuZXcgaW5kZXhfMS5QbGFuZUdlb21ldHJ5KHJlc3Qud2lkdGggfHwgMSwgcmVzdC5oZWlnaHQgfHwgMSwgcmVzdC53aWR0aFNlZ21lbnRzIHx8IDEsIHJlc3QuaGVpZ2h0U2VnbWVudHMgfHwgMSk7XHJcbiAgICAgICAgY29uc3QgbWF0ZXJpYWwgPSB0aGlzLmFkZE1hdGVyaWFsKG1hdGVyaWFsQ29uZmlnKTtcclxuICAgICAgICBtYXRlcmlhbC5zaWRlID0gaW5kZXhfMS5Eb3VibGVTaWRlO1xyXG4gICAgICAgIGNvbnN0IG1lc2ggPSB0aGlzLmNyZWF0ZU1lc2goZ2VvbWV0cnksIG1hdGVyaWFsLCB7IHgsIHksIHogfSk7XHJcbiAgICAgICAgbWVzaC5uYW1lID0gbmFtZSB8fCBgYm9keV9pZF8ke21lc2guaWR9YDtcclxuICAgICAgICBtZXNoLnNoYXBlID0gJ3BsYW5lJztcclxuICAgICAgICByZXR1cm4gbWVzaDtcclxuICAgIH1cclxuICAgIGFkZFBsYW5lKHBsYW5lQ29uZmlnLCBtYXRlcmlhbENvbmZpZykge1xyXG4gICAgICAgIGNvbnN0IG9iaiA9IHRoaXMubWFrZVBsYW5lKHBsYW5lQ29uZmlnLCBtYXRlcmlhbENvbmZpZyk7XHJcbiAgICAgICAgdGhpcy5hZGRFeGlzdGluZyhvYmopO1xyXG4gICAgICAgIHJldHVybiBvYmo7XHJcbiAgICB9XHJcbiAgICBtYWtlU3BoZXJlKHNwaGVyZUNvbmZpZywgbWF0ZXJpYWxDb25maWcpIHtcclxuICAgICAgICBjb25zdCB7IHgsIHksIHosIG5hbWUsIGJyZWFrYWJsZSA9IGZhbHNlLCBidWZmZXJHZW9tZXRyeSA9IHRydWUgfSA9IHNwaGVyZUNvbmZpZywgcmVzdCA9IF9fcmVzdChzcGhlcmVDb25maWcsIFtcInhcIiwgXCJ5XCIsIFwielwiLCBcIm5hbWVcIiwgXCJicmVha2FibGVcIiwgXCJidWZmZXJHZW9tZXRyeVwiXSk7XHJcbiAgICAgICAgY29uc3QgZ2VvbWV0cnkgPSBidWZmZXJHZW9tZXRyeSB8fCBicmVha2FibGUgfHwgdGhpcy5pc0hlYWRsZXNzXHJcbiAgICAgICAgICAgID8gbmV3IGluZGV4XzEuU3BoZXJlQnVmZmVyR2VvbWV0cnkocmVzdC5yYWRpdXMgfHwgMSwgcmVzdC53aWR0aFNlZ21lbnRzIHx8IDE2LCByZXN0LmhlaWdodFNlZ21lbnRzIHx8IDEyLCByZXN0LnBoaVN0YXJ0IHx8IHVuZGVmaW5lZCwgcmVzdC5waGlMZW5ndGggfHwgdW5kZWZpbmVkLCByZXN0LnRoZXRhU3RhcnQgfHwgdW5kZWZpbmVkLCByZXN0LnRoZXRhTGVuZ3RoIHx8IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgOiBuZXcgaW5kZXhfMS5TcGhlcmVHZW9tZXRyeShyZXN0LnJhZGl1cyB8fCAxLCByZXN0LndpZHRoU2VnbWVudHMgfHwgMTYsIHJlc3QuaGVpZ2h0U2VnbWVudHMgfHwgMTIsIHJlc3QucGhpU3RhcnQgfHwgdW5kZWZpbmVkLCByZXN0LnBoaUxlbmd0aCB8fCB1bmRlZmluZWQsIHJlc3QudGhldGFTdGFydCB8fCB1bmRlZmluZWQsIHJlc3QudGhldGFMZW5ndGggfHwgdW5kZWZpbmVkKTtcclxuICAgICAgICBjb25zdCBtYXRlcmlhbCA9IHRoaXMuYWRkTWF0ZXJpYWwobWF0ZXJpYWxDb25maWcpO1xyXG4gICAgICAgIGNvbnN0IG1lc2ggPSB0aGlzLmNyZWF0ZU1lc2goZ2VvbWV0cnksIG1hdGVyaWFsLCB7IHgsIHksIHogfSk7XHJcbiAgICAgICAgbWVzaC5uYW1lID0gbmFtZSB8fCBgYm9keV9pZF8ke21lc2guaWR9YDtcclxuICAgICAgICBtZXNoLnNoYXBlID0gJ3NwaGVyZSc7XHJcbiAgICAgICAgcmV0dXJuIG1lc2g7XHJcbiAgICB9XHJcbiAgICBhZGRTcGhlcmUoc3BoZXJlQ29uZmlnID0ge30sIG1hdGVyaWFsQ29uZmlnID0ge30pIHtcclxuICAgICAgICBjb25zdCBvYmogPSB0aGlzLm1ha2VTcGhlcmUoc3BoZXJlQ29uZmlnLCBtYXRlcmlhbENvbmZpZyk7XHJcbiAgICAgICAgdGhpcy5hZGRFeGlzdGluZyhvYmopO1xyXG4gICAgICAgIHJldHVybiBvYmo7XHJcbiAgICB9XHJcbiAgICBtYWtlQm94KGJveENvbmZpZywgbWF0ZXJpYWxDb25maWcpIHtcclxuICAgICAgICBjb25zdCB7IHgsIHksIHosIG5hbWUsIGJyZWFrYWJsZSA9IGZhbHNlLCBidWZmZXJHZW9tZXRyeSA9IHRydWUgfSA9IGJveENvbmZpZywgcmVzdCA9IF9fcmVzdChib3hDb25maWcsIFtcInhcIiwgXCJ5XCIsIFwielwiLCBcIm5hbWVcIiwgXCJicmVha2FibGVcIiwgXCJidWZmZXJHZW9tZXRyeVwiXSk7XHJcbiAgICAgICAgY29uc3QgZ2VvbWV0cnkgPSBidWZmZXJHZW9tZXRyeSB8fCBicmVha2FibGUgfHwgdGhpcy5pc0hlYWRsZXNzXHJcbiAgICAgICAgICAgID8gbmV3IGluZGV4XzEuQm94QnVmZmVyR2VvbWV0cnkocmVzdC53aWR0aCB8fCAxLCByZXN0LmhlaWdodCB8fCAxLCByZXN0LmRlcHRoIHx8IDEsIHJlc3Qud2lkdGhTZWdtZW50cyB8fCB1bmRlZmluZWQsIHJlc3QuaGVpZ2h0U2VnbWVudHMgfHwgdW5kZWZpbmVkLCByZXN0LmRlcHRoU2VnbWVudHMgfHwgdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICA6IG5ldyBpbmRleF8xLkJveEdlb21ldHJ5KHJlc3Qud2lkdGggfHwgMSwgcmVzdC5oZWlnaHQgfHwgMSwgcmVzdC5kZXB0aCB8fCAxLCByZXN0LndpZHRoU2VnbWVudHMgfHwgdW5kZWZpbmVkLCByZXN0LmhlaWdodFNlZ21lbnRzIHx8IHVuZGVmaW5lZCwgcmVzdC5kZXB0aFNlZ21lbnRzIHx8IHVuZGVmaW5lZCk7XHJcbiAgICAgICAgY29uc3QgbWF0ZXJpYWwgPSB0aGlzLmFkZE1hdGVyaWFsKG1hdGVyaWFsQ29uZmlnKTtcclxuICAgICAgICBjb25zdCBtZXNoID0gdGhpcy5jcmVhdGVNZXNoKGdlb21ldHJ5LCBtYXRlcmlhbCwgeyB4LCB5LCB6IH0pO1xyXG4gICAgICAgIG1lc2gubmFtZSA9IG5hbWUgfHwgYGJvZHlfaWRfJHttZXNoLmlkfWA7XHJcbiAgICAgICAgbWVzaC5zaGFwZSA9ICdib3gnO1xyXG4gICAgICAgIHJldHVybiBtZXNoO1xyXG4gICAgfVxyXG4gICAgYWRkQm94KGJveENvbmZpZyA9IHt9LCBtYXRlcmlhbENvbmZpZyA9IHt9KSB7XHJcbiAgICAgICAgY29uc3Qgb2JqID0gdGhpcy5tYWtlQm94KGJveENvbmZpZywgbWF0ZXJpYWxDb25maWcpO1xyXG4gICAgICAgIHRoaXMuYWRkRXhpc3Rpbmcob2JqKTtcclxuICAgICAgICByZXR1cm4gb2JqO1xyXG4gICAgfVxyXG4gICAgYWRkR3JvdW5kKGdyb3VuZENvbmZpZywgbWF0ZXJpYWxDb25maWcgPSB7fSkge1xyXG4gICAgICAgIGNvbnN0IG9iaiA9IHRoaXMubWFrZUJveChncm91bmRDb25maWcsIG1hdGVyaWFsQ29uZmlnKTtcclxuICAgICAgICBvYmoucm90YXRlWChpbmRleF8xLk1hdGhVdGlscy5kZWdUb1JhZCg5MCkpO1xyXG4gICAgICAgIHRoaXMuYWRkRXhpc3Rpbmcob2JqKTtcclxuICAgICAgICByZXR1cm4gb2JqO1xyXG4gICAgfVxyXG4gICAgbWFrZUN5bGluZGVyKGN5bGluZGVyQ29uZmlnID0ge30sIG1hdGVyaWFsQ29uZmlnID0ge30pIHtcclxuICAgICAgICBjb25zdCB7IHgsIHksIHosIG5hbWUsIGJyZWFrYWJsZSA9IGZhbHNlLCBidWZmZXJHZW9tZXRyeSA9IHRydWUgfSA9IGN5bGluZGVyQ29uZmlnLCByZXN0ID0gX19yZXN0KGN5bGluZGVyQ29uZmlnLCBbXCJ4XCIsIFwieVwiLCBcInpcIiwgXCJuYW1lXCIsIFwiYnJlYWthYmxlXCIsIFwiYnVmZmVyR2VvbWV0cnlcIl0pO1xyXG4gICAgICAgIGNvbnN0IGdlb21ldHJ5ID0gYnVmZmVyR2VvbWV0cnkgfHwgYnJlYWthYmxlIHx8IHRoaXMuaXNIZWFkbGVzc1xyXG4gICAgICAgICAgICA/IG5ldyBpbmRleF8xLkN5bGluZGVyQnVmZmVyR2VvbWV0cnkocmVzdC5yYWRpdXNUb3AgfHwgMSwgcmVzdC5yYWRpdXNCb3R0b20gfHwgMSwgcmVzdC5oZWlnaHQgfHwgMSwgcmVzdC5yYWRpdXNTZWdtZW50cyB8fCB1bmRlZmluZWQsIHJlc3QuaGVpZ2h0U2VnbWVudHMgfHwgdW5kZWZpbmVkLCByZXN0Lm9wZW5FbmRlZCB8fCB1bmRlZmluZWQsIHJlc3QudGhldGFTdGFydCB8fCB1bmRlZmluZWQsIHJlc3QudGhldGFMZW5ndGggfHwgdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICA6IG5ldyBpbmRleF8xLkN5bGluZGVyR2VvbWV0cnkocmVzdC5yYWRpdXNUb3AgfHwgMSwgcmVzdC5yYWRpdXNCb3R0b20gfHwgMSwgcmVzdC5oZWlnaHQgfHwgMSwgcmVzdC5yYWRpdXNTZWdtZW50cyB8fCB1bmRlZmluZWQsIHJlc3QuaGVpZ2h0U2VnbWVudHMgfHwgdW5kZWZpbmVkLCByZXN0Lm9wZW5FbmRlZCB8fCB1bmRlZmluZWQsIHJlc3QudGhldGFTdGFydCB8fCB1bmRlZmluZWQsIHJlc3QudGhldGFMZW5ndGggfHwgdW5kZWZpbmVkKTtcclxuICAgICAgICBjb25zdCBtYXRlcmlhbCA9IHRoaXMuYWRkTWF0ZXJpYWwobWF0ZXJpYWxDb25maWcpO1xyXG4gICAgICAgIGNvbnN0IG1lc2ggPSB0aGlzLmNyZWF0ZU1lc2goZ2VvbWV0cnksIG1hdGVyaWFsLCB7IHgsIHksIHogfSk7XHJcbiAgICAgICAgbWVzaC5uYW1lID0gbmFtZSB8fCBgYm9keV9pZF8ke21lc2guaWR9YDtcclxuICAgICAgICBtZXNoLnNoYXBlID0gJ2N5bGluZGVyJztcclxuICAgICAgICByZXR1cm4gbWVzaDtcclxuICAgIH1cclxuICAgIGFkZEN5bGluZGVyKGN5bGluZGVyQ29uZmlnID0ge30sIG1hdGVyaWFsQ29uZmlnID0ge30pIHtcclxuICAgICAgICBjb25zdCBvYmogPSB0aGlzLm1ha2VDeWxpbmRlcihjeWxpbmRlckNvbmZpZywgbWF0ZXJpYWxDb25maWcpO1xyXG4gICAgICAgIHRoaXMuYWRkRXhpc3Rpbmcob2JqKTtcclxuICAgICAgICByZXR1cm4gb2JqO1xyXG4gICAgfVxyXG4gICAgbWFrZUNvbmUoY29uZUNvbmZpZyA9IHt9LCBtYXRlcmlhbENvbmZpZyA9IHt9KSB7XHJcbiAgICAgICAgY29uc3QgeyB4LCB5LCB6LCBuYW1lLCBicmVha2FibGUgPSBmYWxzZSwgYnVmZmVyR2VvbWV0cnkgPSB0cnVlIH0gPSBjb25lQ29uZmlnLCByZXN0ID0gX19yZXN0KGNvbmVDb25maWcsIFtcInhcIiwgXCJ5XCIsIFwielwiLCBcIm5hbWVcIiwgXCJicmVha2FibGVcIiwgXCJidWZmZXJHZW9tZXRyeVwiXSk7XHJcbiAgICAgICAgY29uc3QgZ2VvbWV0cnkgPSBidWZmZXJHZW9tZXRyeSB8fCBicmVha2FibGUgfHwgdGhpcy5pc0hlYWRsZXNzXHJcbiAgICAgICAgICAgID8gbmV3IGluZGV4XzEuQ29uZUJ1ZmZlckdlb21ldHJ5KHJlc3QucmFkaXVzIHx8IDEsIHJlc3QuaGVpZ2h0IHx8IDEsIHJlc3QucmFkaXVzU2VnbWVudHMgfHwgOCwgcmVzdC5oZWlnaHRTZWdtZW50cyB8fCAxLCByZXN0Lm9wZW5FbmRlZCB8fCBmYWxzZSwgcmVzdC50aGV0YVN0YXJ0IHx8IDAsIHJlc3QudGhldGFMZW5ndGggfHwgMiAqIE1hdGguUEkpXHJcbiAgICAgICAgICAgIDogbmV3IGluZGV4XzEuQ29uZUJ1ZmZlckdlb21ldHJ5KHJlc3QucmFkaXVzIHx8IDEsIHJlc3QuaGVpZ2h0IHx8IDEsIHJlc3QucmFkaXVzU2VnbWVudHMgfHwgOCwgcmVzdC5oZWlnaHRTZWdtZW50cyB8fCAxLCByZXN0Lm9wZW5FbmRlZCB8fCBmYWxzZSwgcmVzdC50aGV0YVN0YXJ0IHx8IDAsIHJlc3QudGhldGFMZW5ndGggfHwgMiAqIE1hdGguUEkpO1xyXG4gICAgICAgIGNvbnN0IG1hdGVyaWFsID0gdGhpcy5hZGRNYXRlcmlhbChtYXRlcmlhbENvbmZpZyk7XHJcbiAgICAgICAgY29uc3QgbWVzaCA9IHRoaXMuY3JlYXRlTWVzaChnZW9tZXRyeSwgbWF0ZXJpYWwsIHsgeCwgeSwgeiB9KTtcclxuICAgICAgICBtZXNoLm5hbWUgPSBuYW1lIHx8IGBib2R5X2lkXyR7bWVzaC5pZH1gO1xyXG4gICAgICAgIG1lc2guc2hhcGUgPSAnY29uZSc7XHJcbiAgICAgICAgcmV0dXJuIG1lc2g7XHJcbiAgICB9XHJcbiAgICBhZGRDb25lKGNvbmVDb25maWcgPSB7fSwgbWF0ZXJpYWxDb25maWcgPSB7fSkge1xyXG4gICAgICAgIGNvbnN0IG9iaiA9IHRoaXMubWFrZUNvbmUoY29uZUNvbmZpZywgbWF0ZXJpYWxDb25maWcpO1xyXG4gICAgICAgIHRoaXMuYWRkRXhpc3Rpbmcob2JqKTtcclxuICAgICAgICByZXR1cm4gb2JqO1xyXG4gICAgfVxyXG4gICAgLy8gaHR0cHM6Ly90aHJlZWpzLm9yZy9kb2NzL2luZGV4Lmh0bWwjYXBpL2VuL2dlb21ldHJpZXMvVG9ydXNCdWZmZXJHZW9tZXRyeVxyXG4gICAgbWFrZVRvcnVzKHRvcnVzQ29uZmlnID0ge30sIG1hdGVyaWFsQ29uZmlnID0ge30pIHtcclxuICAgICAgICBjb25zdCB7IHgsIHksIHosIG5hbWUsIGJyZWFrYWJsZSA9IGZhbHNlLCBidWZmZXJHZW9tZXRyeSA9IHRydWUgfSA9IHRvcnVzQ29uZmlnLCByZXN0ID0gX19yZXN0KHRvcnVzQ29uZmlnLCBbXCJ4XCIsIFwieVwiLCBcInpcIiwgXCJuYW1lXCIsIFwiYnJlYWthYmxlXCIsIFwiYnVmZmVyR2VvbWV0cnlcIl0pO1xyXG4gICAgICAgIGNvbnN0IGdlb21ldHJ5ID0gYnVmZmVyR2VvbWV0cnkgfHwgYnJlYWthYmxlIHx8IHRoaXMuaXNIZWFkbGVzc1xyXG4gICAgICAgICAgICA/IG5ldyBpbmRleF8xLlRvcnVzQnVmZmVyR2VvbWV0cnkocmVzdC5yYWRpdXMgfHwgdW5kZWZpbmVkLCByZXN0LnR1YmUgfHwgdW5kZWZpbmVkLCByZXN0LnJhZGlhbFNlZ21lbnRzIHx8IHVuZGVmaW5lZCwgcmVzdC50dWJ1bGFyU2VnbWVudHMgfHwgdW5kZWZpbmVkLCByZXN0LmFyYyB8fCB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgIDogbmV3IGluZGV4XzEuVG9ydXNHZW9tZXRyeShyZXN0LnJhZGl1cyB8fCB1bmRlZmluZWQsIHJlc3QudHViZSB8fCB1bmRlZmluZWQsIHJlc3QucmFkaWFsU2VnbWVudHMgfHwgdW5kZWZpbmVkLCByZXN0LnR1YnVsYXJTZWdtZW50cyB8fCB1bmRlZmluZWQsIHJlc3QuYXJjIHx8IHVuZGVmaW5lZCk7XHJcbiAgICAgICAgY29uc3QgbWF0ZXJpYWwgPSB0aGlzLmFkZE1hdGVyaWFsKG1hdGVyaWFsQ29uZmlnKTtcclxuICAgICAgICBjb25zdCBtZXNoID0gdGhpcy5jcmVhdGVNZXNoKGdlb21ldHJ5LCBtYXRlcmlhbCwgeyB4LCB5LCB6IH0pO1xyXG4gICAgICAgIG1lc2gubmFtZSA9IG5hbWUgfHwgYGJvZHlfaWRfJHttZXNoLmlkfWA7XHJcbiAgICAgICAgbWVzaC5zaGFwZSA9ICd0b3J1cyc7XHJcbiAgICAgICAgcmV0dXJuIG1lc2g7XHJcbiAgICB9XHJcbiAgICBhZGRUb3J1cyh0b3J1c0NvbmZpZyA9IHt9LCBtYXRlcmlhbENvbmZpZyA9IHt9KSB7XHJcbiAgICAgICAgY29uc3Qgb2JqID0gdGhpcy5tYWtlVG9ydXModG9ydXNDb25maWcsIG1hdGVyaWFsQ29uZmlnKTtcclxuICAgICAgICB0aGlzLmFkZEV4aXN0aW5nKG9iaik7XHJcbiAgICAgICAgcmV0dXJuIG9iajtcclxuICAgIH1cclxuICAgIGFkZE1hdGVyaWFsKG1hdGVyaWFsQ29uZmlnID0ge30pIHtcclxuICAgICAgICBjb25zdCB0eXBlID0gT2JqZWN0LmtleXMobWF0ZXJpYWxDb25maWcpWzBdO1xyXG4gICAgICAgIGxldCBtYXRlcmlhbDtcclxuICAgICAgICAvLyBpZiAodHlwZSkge1xyXG4gICAgICAgIC8vICAgY29uc3QgeyBtYXAgfSA9IG1hdGVyaWFsQ29uZmlnW3R5cGVdXHJcbiAgICAgICAgLy8gICBpZiAodHlwZW9mIG1hcCA9PT0gJ3N0cmluZycpIG1hdGVyaWFsQ29uZmlnW3R5cGVdLm1hcCA9IHRoaXMubG9hZFRleHR1cmUobWFwKVxyXG4gICAgICAgIC8vIH1cclxuICAgICAgICAvLyBhbHdheXMgc2hhcmUgdGhlIHNhbWUgbWF0ZXJpYWwgaW4gaGVhZGxlc3MgbW9kZSB0byBzYXZlIG1lbW9yeVxyXG4gICAgICAgIGlmICh0aGlzLnNjZW5lID09PSAnaGVhZGxlc3MnKVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kZWZhdWx0TWF0ZXJpYWwuZ2V0KCk7XHJcbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ2Jhc2ljJzpcclxuICAgICAgICAgICAgICAgIG1hdGVyaWFsID0gbmV3IGluZGV4XzEuTWVzaEJhc2ljTWF0ZXJpYWwobWF0ZXJpYWxDb25maWcuYmFzaWMpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ25vcm1hbCc6XHJcbiAgICAgICAgICAgICAgICBtYXRlcmlhbCA9IG5ldyBpbmRleF8xLk1lc2hOb3JtYWxNYXRlcmlhbChtYXRlcmlhbENvbmZpZy5ub3JtYWwpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3N0YW5kYXJkJzpcclxuICAgICAgICAgICAgICAgIG1hdGVyaWFsID0gbmV3IGluZGV4XzEuTWVzaFN0YW5kYXJkTWF0ZXJpYWwobWF0ZXJpYWxDb25maWcuc3RhbmRhcmQpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ2xhbWJlcnQnOlxyXG4gICAgICAgICAgICAgICAgbWF0ZXJpYWwgPSBuZXcgaW5kZXhfMS5NZXNoTGFtYmVydE1hdGVyaWFsKG1hdGVyaWFsQ29uZmlnLmxhbWJlcnQpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3Bob25nJzpcclxuICAgICAgICAgICAgICAgIG1hdGVyaWFsID0gbmV3IGluZGV4XzEuTWVzaFBob25nTWF0ZXJpYWwobWF0ZXJpYWxDb25maWcucGhvbmcpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3BoeXNpY2FsJzpcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWF0ZXJpYWxDb25maWcucGh5c2ljYWwgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwgPSBuZXcgaW5kZXhfMS5NZXNoUGh5c2ljYWxNYXRlcmlhbChtYXRlcmlhbENvbmZpZy5waHlzaWNhbCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBsb2dnZXJfMS5kZWZhdWx0KCdZb3UgbmVlZCB0byBwYXNzIHBhcmFtZXRlcnMgdG8gdGhlIHBoeXNpY2FsIG1hdGVyaWFsLiAoRmFsbGJhY2sgdG8gZGVmYXVsdCBtYXRlcmlhbCknKTtcclxuICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbCA9IHRoaXMuZGVmYXVsdE1hdGVyaWFsLmdldCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3Rvb24nOlxyXG4gICAgICAgICAgICAgICAgbWF0ZXJpYWwgPSBuZXcgaW5kZXhfMS5NZXNoVG9vbk1hdGVyaWFsKG1hdGVyaWFsQ29uZmlnLnRvb24pO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ2xpbmUnOlxyXG4gICAgICAgICAgICAgICAgbWF0ZXJpYWwgPSBuZXcgaW5kZXhfMS5MaW5lQmFzaWNNYXRlcmlhbChtYXRlcmlhbENvbmZpZy5saW5lKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdwb2ludHMnOlxyXG4gICAgICAgICAgICAgICAgbWF0ZXJpYWwgPSBuZXcgaW5kZXhfMS5Qb2ludHNNYXRlcmlhbChtYXRlcmlhbENvbmZpZy5wb2ludHMpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ2N1c3RvbSc6XHJcbiAgICAgICAgICAgICAgICBtYXRlcmlhbCA9IG1hdGVyaWFsQ29uZmlnLmN1c3RvbSB8fCB0aGlzLmRlZmF1bHRNYXRlcmlhbC5nZXQoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgbWF0ZXJpYWwgPSB0aGlzLmRlZmF1bHRNYXRlcmlhbC5nZXQoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbWF0ZXJpYWw7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0cy5kZWZhdWx0ID0gRmFjdG9yaWVzO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1mYWN0b3JpZXMuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuY29uc3QgbG9nZ2VyID0gKG1zZykgPT4ge1xyXG4gICAgY29uc29sZS5lcnJvcihgJWMgW2VuYWJsZTNkXSAke21zZ30gYCwgJ2JhY2tncm91bmQ6ICMyMjI7IGNvbG9yOiAjYmFkYTU1Jyk7XHJcbn07XHJcbmV4cG9ydHMuZGVmYXVsdCA9IGxvZ2dlcjtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bG9nZ2VyLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xyXG4vKipcclxuICogQGRlc2NyaXB0aW9uICBUaGlzIGNvZGUgaGFzIG9yaWdpbmFsbHkgYmVlbiBjb3BpZWQgZnJvbSBTa2V0Y2hib29rXHJcbiAqXHJcbiAqIEBhdXRob3IgICAgICAgc3dpZnQ1MDIgPGJsYWhhLmo1MDJAZ21haWwuY29tPiAoaHR0cDovL2pibGFoYS5hcnQvKVxyXG4gKiBAY29weXJpZ2h0ICAgIENvcHlyaWdodCAoYykgMjAxOCBzd2lmdDUwMjsgUHJvamVjdCBVcmw6IGh0dHBzOi8vZ2l0aHViLmNvbS9zd2lmdDUwMi9Ta2V0Y2hib29rXHJcbiAqIEBsaWNlbnNlICAgICAge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9zd2lmdDUwMi9Ta2V0Y2hib29rL2Jsb2IvbWFzdGVyL0xJQ0VOU0V8R1BMLTMuMH1cclxuICpcclxuICogQGF1dGhvciAgICAgICBZYW5uaWNrIERldWJlbCAoaHR0cHM6Ly9naXRodWIuY29tL3lhbmRldSlcclxuICogQGNvcHlyaWdodCAgICBDb3B5cmlnaHQgKGMpIDIwMjAgWWFubmljayBEZXViZWw7IFByb2plY3QgVXJsOiBodHRwczovL2dpdGh1Yi5jb20vZW5hYmxlM2QvZW5hYmxlM2RcclxuICogQGxpY2Vuc2UgICAgICB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2VuYWJsZTNkL2VuYWJsZTNkL2Jsb2IvbWFzdGVyL0xJQ0VOU0V8R05VIEdQTHYzfVxyXG4gKi9cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLkZpcnN0UGVyc29uQ29udHJvbHMgPSB2b2lkIDA7XHJcbmNvbnN0IGRpc3RfMSA9IHJlcXVpcmUoXCJAZW5hYmxlM2QvdGhyZWUtd3JhcHBlci9kaXN0XCIpO1xyXG5jbGFzcyBGaXJzdFBlcnNvbkNvbnRyb2xzIHtcclxuICAgIGNvbnN0cnVjdG9yKGNhbWVyYSwgdGFyZ2V0LCBjb25maWcpIHtcclxuICAgICAgICB0aGlzLmNhbWVyYSA9IGNhbWVyYTtcclxuICAgICAgICB0aGlzLnRhcmdldCA9IHRhcmdldDtcclxuICAgICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcclxuICAgICAgICBjb25zdCB7IG9mZnNldCA9IG5ldyBkaXN0XzEuVmVjdG9yMygwLCAwLCAwKSwgc2Vuc2l0aXZpdHkgPSBuZXcgZGlzdF8xLlZlY3RvcjIoMSwgMSksIHJhZGl1cyA9IDgsIHRhcmdldFJhZGl1cyA9IDEwLCBpbnRlcnBvbGF0aW9uRmFjdG9yID0gMC4wNSwgcG9pbnRlckxvY2sgPSB0cnVlLCBhdXRvVXBkYXRlID0gdHJ1ZSB9ID0gY29uZmlnO1xyXG4gICAgICAgIHRoaXMub2Zmc2V0ID0gb2Zmc2V0O1xyXG4gICAgICAgIHRoaXMuc2Vuc2l0aXZpdHkgPSBzZW5zaXRpdml0eTtcclxuICAgICAgICB0aGlzLnJhZGl1cyA9IHJhZGl1cztcclxuICAgICAgICB0aGlzLnRhcmdldFJhZGl1cyA9IHRhcmdldFJhZGl1cztcclxuICAgICAgICB0aGlzLmludGVycG9sYXRpb25GYWN0b3IgPSBpbnRlcnBvbGF0aW9uRmFjdG9yO1xyXG4gICAgICAgIHRoaXMudGhldGEgPSAwO1xyXG4gICAgICAgIHRoaXMucGhpID0gMDtcclxuICAgICAgICAvLyBpZiAocG9pbnRlckxvY2spIHtcclxuICAgICAgICAvLyAgIHNjZW5lLmlucHV0Lm9uKCdwb2ludGVyZG93bicsICgpID0+IHtcclxuICAgICAgICAvLyAgICAgc2NlbmUuaW5wdXQubW91c2UucmVxdWVzdFBvaW50ZXJMb2NrKClcclxuICAgICAgICAvLyAgIH0pXHJcbiAgICAgICAgLy8gICBzY2VuZS5pbnB1dC5vbigncG9pbnRlcm1vdmUnLCAocG9pbnRlcjogUG9pbnRlckV2ZW50KSA9PiB7XHJcbiAgICAgICAgLy8gICAgIGlmIChzY2VuZS5pbnB1dC5tb3VzZS5sb2NrZWQpIHtcclxuICAgICAgICAvLyAgICAgICB0aGlzLnVwZGF0ZShwb2ludGVyLm1vdmVtZW50WCwgcG9pbnRlci5tb3ZlbWVudFkpXHJcbiAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAvLyAgIH0pXHJcbiAgICAgICAgLy8gfVxyXG4gICAgICAgIC8vIGlmIChhdXRvVXBkYXRlKSB7XHJcbiAgICAgICAgLy8gICBzY2VuZS5ldmVudHMub24oJ3VwZGF0ZScsICgpID0+IHtcclxuICAgICAgICAvLyAgICAgdGhpcy51cGRhdGUoMCwgMClcclxuICAgICAgICAvLyAgIH0pXHJcbiAgICAgICAgLy8gfVxyXG4gICAgfVxyXG4gICAgdXBkYXRlKGRlbHRhWCwgZGVsdGFZKSB7XHJcbiAgICAgICAgY29uc3QgY2VudGVyID0gdGhpcy50YXJnZXQucG9zaXRpb24uY2xvbmUoKS5hZGQodGhpcy5vZmZzZXQpO1xyXG4gICAgICAgIHRoaXMuY2FtZXJhLnBvc2l0aW9uLmNvcHkoY2VudGVyKTtcclxuICAgICAgICB0aGlzLnRoZXRhIC09IGRlbHRhWCAqICh0aGlzLnNlbnNpdGl2aXR5LnggLyAyKTtcclxuICAgICAgICB0aGlzLnRoZXRhICU9IDM2MDtcclxuICAgICAgICB0aGlzLnBoaSArPSBkZWx0YVkgKiAoLXRoaXMuc2Vuc2l0aXZpdHkueSAvIDIpO1xyXG4gICAgICAgIHRoaXMucGhpID0gTWF0aC5taW4oODUsIE1hdGgubWF4KC04NSwgdGhpcy5waGkpKTtcclxuICAgICAgICBjb25zdCBsb29rQXQgPSBuZXcgZGlzdF8xLlZlY3RvcjMoKTtcclxuICAgICAgICBsb29rQXQueCA9IGNlbnRlci54ICsgdGhpcy5yYWRpdXMgKiBNYXRoLnNpbigodGhpcy50aGV0YSAqIE1hdGguUEkpIC8gMTgwKSAqIE1hdGguY29zKCh0aGlzLnBoaSAqIE1hdGguUEkpIC8gMTgwKTtcclxuICAgICAgICBsb29rQXQueSA9IGNlbnRlci55ICsgdGhpcy5yYWRpdXMgKiBNYXRoLnNpbigodGhpcy5waGkgKiBNYXRoLlBJKSAvIDE4MCk7XHJcbiAgICAgICAgbG9va0F0LnogPSBjZW50ZXIueiArIHRoaXMucmFkaXVzICogTWF0aC5jb3MoKHRoaXMudGhldGEgKiBNYXRoLlBJKSAvIDE4MCkgKiBNYXRoLmNvcygodGhpcy5waGkgKiBNYXRoLlBJKSAvIDE4MCk7XHJcbiAgICAgICAgdGhpcy5jYW1lcmEudXBkYXRlTWF0cml4KCk7XHJcbiAgICAgICAgdGhpcy5jYW1lcmEubG9va0F0KGxvb2tBdCk7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0cy5GaXJzdFBlcnNvbkNvbnRyb2xzID0gRmlyc3RQZXJzb25Db250cm9scztcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Zmlyc3RQZXJzb25Db250cm9scy5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcclxuLyoqXHJcbiAqIEBhdXRob3IgICAgICAgWWFubmljayBEZXViZWwgKGh0dHBzOi8vZ2l0aHViLmNvbS95YW5kZXUpXHJcbiAqIEBjb3B5cmlnaHQgICAgQ29weXJpZ2h0IChjKSAyMDIwIFlhbm5pY2sgRGV1YmVsOyBQcm9qZWN0IFVybDogaHR0cHM6Ly9naXRodWIuY29tL2VuYWJsZTNkL2VuYWJsZTNkXHJcbiAqIEBsaWNlbnNlICAgICAge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9lbmFibGUzZC9lbmFibGUzZC9ibG9iL21hc3Rlci9MSUNFTlNFfEdOVSBHUEx2M31cclxuICovXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5Kb3lTdGljayA9IHZvaWQgMDtcclxuY29uc3QgZXZlbnRlbWl0dGVyM18xID0gcmVxdWlyZShcImV2ZW50ZW1pdHRlcjNcIik7XHJcbi8vIFRoaXMgY2xhc3MgaXMgYmFzZWQgb24gYSBmaWxlIEkgZm91bmQgb25saW5lIGNhbGxlZCB0b29uM2QuanNcclxuLy8gVW5mb3J0dW5hdGVseSBJIGNvdWxkIG5vdCBmaW5kIGl0cyBsaWNlbnNlIG9yIGF1dGhvci5cclxuLy8gSSBqdXN0IHBvcnRlZCBpdCB0byBUeXBlU2NyaXB0IGFuZCBpbXByb3ZlZCB0aGUgY29kZS5cclxuY2xhc3MgSm95U3RpY2sgZXh0ZW5kcyBldmVudGVtaXR0ZXIzXzEuRXZlbnRFbWl0dGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XHJcbiAgICAgICAgdGhpcy5pZCA9IC0xO1xyXG4gICAgfVxyXG4gICAgZ2V0IGFkZCgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBheGlzOiAoY29uZmlnID0ge30pID0+IHRoaXMuYWRkQXhpcyhjb25maWcpLFxyXG4gICAgICAgICAgICBidXR0b246IChjb25maWcgPSB7fSkgPT4gdGhpcy5hZGRCdXR0b24oY29uZmlnKVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBhZGRBeGlzKGNvbmZpZyA9IHt9KSB7XHJcbiAgICAgICAgdGhpcy5pZCsrO1xyXG4gICAgICAgIGNvbnN0IHsgc3R5bGVzID0geyBsZWZ0OiAzNSwgYm90dG9tOiAzNSwgc2l6ZTogMTAwIH0gfSA9IGNvbmZpZztcclxuICAgICAgICBjb25zdCBjaXJjbGUgPSB0aGlzLmNpcmNsZSh7IHN0eWxlcyB9KTtcclxuICAgICAgICBjb25zdCB0aHVtYiA9IHRoaXMudGh1bWIoeyBzdHlsZXMgfSk7XHJcbiAgICAgICAgY2lyY2xlLmFwcGVuZENoaWxkKHRodW1iKTtcclxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNpcmNsZSk7XHJcbiAgICAgICAgY29uc3QgeyBtYXhSYWRpdXMgPSA0MCwgcm90YXRpb25EYW1waW5nID0gMC4wNiwgbW92ZURhbXBpbmcgPSAwLjAxIH0gPSBjb25maWc7XHJcbiAgICAgICAgLy8gZWxlbWVudFxyXG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSB7XHJcbiAgICAgICAgICAgIGlkOiB0aGlzLmlkLFxyXG4gICAgICAgICAgICBkb21FbGVtZW50OiB0aHVtYixcclxuICAgICAgICAgICAgbWF4UmFkaXVzOiBtYXhSYWRpdXMsXHJcbiAgICAgICAgICAgIG1heFJhZGl1c1NxdWFyZWQ6IG1heFJhZGl1cyAqIG1heFJhZGl1cyxcclxuICAgICAgICAgICAgb3JpZ2luOiB7IGxlZnQ6IHRodW1iLm9mZnNldExlZnQsIHRvcDogdGh1bWIub2Zmc2V0VG9wIH0sXHJcbiAgICAgICAgICAgIG9mZnNldDogeyB4OiAwLCB5OiAwIH0sXHJcbiAgICAgICAgICAgIHJvdGF0aW9uRGFtcGluZzogcm90YXRpb25EYW1waW5nLFxyXG4gICAgICAgICAgICBtb3ZlRGFtcGluZzogbW92ZURhbXBpbmdcclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmIChlbGVtZW50ID09PSBudWxsIHx8IGVsZW1lbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGVsZW1lbnQuZG9tRWxlbWVudCkge1xyXG4gICAgICAgICAgICBjb25zdCB7IGRvbUVsZW1lbnQgfSA9IGVsZW1lbnQ7XHJcbiAgICAgICAgICAgIGlmICgnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3cpIHtcclxuICAgICAgICAgICAgICAgIGRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIGV2dCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YXAoZXZ0LCBlbGVtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgZXZ0ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRhcChldnQsIGVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIG9uTW92ZTogKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uKGBheGlzX29ubW92ZV8ke2VsZW1lbnQuaWR9YCwgZGVsdGEgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50KGRlbHRhKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIGFkZEJ1dHRvbihjb25maWcgPSB7fSkge1xyXG4gICAgICAgIHRoaXMuaWQrKztcclxuICAgICAgICBjb25zdCB7IHN0eWxlcyA9IHsgcmlnaHQ6IDM1LCBib3R0b206IDM1LCBzaXplOiA4MCB9LCBsZXR0ZXI6IGwgPSAnQScgfSA9IGNvbmZpZztcclxuICAgICAgICBjb25zdCBjaXJjbGUgPSB0aGlzLmNpcmNsZSh7IHN0eWxlcyB9KTtcclxuICAgICAgICBjb25zdCBsZXR0ZXIgPSB0aGlzLmxldHRlcih7IGxldHRlcjogbCB9KTtcclxuICAgICAgICBjaXJjbGUuYXBwZW5kQ2hpbGQobGV0dGVyKTtcclxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNpcmNsZSk7XHJcbiAgICAgICAgLy8gZWxlbWVudFxyXG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSB7XHJcbiAgICAgICAgICAgIGlkOiB0aGlzLmlkLFxyXG4gICAgICAgICAgICBkb21FbGVtZW50OiBjaXJjbGUsXHJcbiAgICAgICAgICAgIG9mZnNldDogeyB4OiAwLCB5OiAwIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmIChlbGVtZW50ID09PSBudWxsIHx8IGVsZW1lbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGVsZW1lbnQuZG9tRWxlbWVudCkge1xyXG4gICAgICAgICAgICB0aGlzLmNsaWNrKGVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBvbkNsaWNrOiAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMub24oYGJ1dHRvbl9vbmNsaWNrXyR7ZWxlbWVudC5pZH1gLCBkYXRhID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBldmVudChkYXRhKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvblJlbGVhc2U6IChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbihgYnV0dG9uX29ucmVsZWFzZV8ke2VsZW1lbnQuaWR9YCwgZGF0YSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBjaXJjbGUoY29uZmlnID0ge30pIHtcclxuICAgICAgICBjb25zdCB7IHN0eWxlcyB9ID0gY29uZmlnO1xyXG4gICAgICAgIGNvbnN0IHsgdG9wLCByaWdodCwgYm90dG9tLCBsZWZ0LCBzaXplIH0gPSBzdHlsZXM7XHJcbiAgICAgICAgY29uc3QgY2lyY2xlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgbGV0IGNzcyA9IGBwb3NpdGlvbjphYnNvbHV0ZTsgd2lkdGg6JHtzaXplfXB4OyBoZWlnaHQ6JHtzaXplfXB4OyBiYWNrZ3JvdW5kOnJnYmEoMTI2LCAxMjYsIDEyNiwgMC41KTsgYm9yZGVyOiM0NDQgc29saWQgbWVkaXVtOyBib3JkZXItcmFkaXVzOjUwJTsgY3Vyc29yOiBwb2ludGVyOyBgO1xyXG4gICAgICAgIGlmICh0b3ApXHJcbiAgICAgICAgICAgIGNzcyArPSBgdG9wOiR7dG9wfXB4OyBgO1xyXG4gICAgICAgIGlmIChyaWdodClcclxuICAgICAgICAgICAgY3NzICs9IGByaWdodDoke3JpZ2h0fXB4OyBgO1xyXG4gICAgICAgIGlmIChib3R0b20pXHJcbiAgICAgICAgICAgIGNzcyArPSBgYm90dG9tOiR7Ym90dG9tfXB4OyBgO1xyXG4gICAgICAgIGlmIChsZWZ0KVxyXG4gICAgICAgICAgICBjc3MgKz0gYGxlZnQ6JHtsZWZ0fXB4OyBgO1xyXG4gICAgICAgIGNpcmNsZS5zdHlsZS5jc3NUZXh0ID0gY3NzO1xyXG4gICAgICAgIHJldHVybiBjaXJjbGU7XHJcbiAgICB9XHJcbiAgICB0aHVtYihjb25maWcgPSB7fSkge1xyXG4gICAgICAgIGNvbnN0IHsgc3R5bGVzIH0gPSBjb25maWc7XHJcbiAgICAgICAgY29uc3QgeyBzaXplIH0gPSBzdHlsZXM7XHJcbiAgICAgICAgY29uc3QgdGh1bWIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICB0aHVtYi5zdHlsZS5jc3NUZXh0ID0gYHBvc2l0aW9uOiBhYnNvbHV0ZTsgbGVmdDogJHtzaXplIC8gNH1weDsgdG9wOiAke3NpemUgLyA0fXB4OyB3aWR0aDogJHtzaXplIC8gMn1weDsgaGVpZ2h0OiAke3NpemUgLyAyfXB4OyBib3JkZXItcmFkaXVzOiA1MCU7IGJhY2tncm91bmQ6ICNmZmY7IGA7XHJcbiAgICAgICAgcmV0dXJuIHRodW1iO1xyXG4gICAgfVxyXG4gICAgbGV0dGVyKGNvbmZpZyA9IHt9KSB7XHJcbiAgICAgICAgY29uc3QgeyBsZXR0ZXI6IGwgfSA9IGNvbmZpZztcclxuICAgICAgICBjb25zdCBsZXR0ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XHJcbiAgICAgICAgbGV0dGVyLmlubmVyVGV4dCA9IGw7XHJcbiAgICAgICAgbGV0dGVyLnN0eWxlLmNzc1RleHQgPVxyXG4gICAgICAgICAgICAncG9zaXRpb246IGFic29sdXRlOyB0ZXh0LWFsaWduOiBjZW50ZXI7IHRvcDogNHB4OyB3aWR0aDogODBweDsgaGVpZ2h0OiA4MHB4OyBmb250LXNpemU6IDY0cHg7IGNvbG9yOiAjZmZmOyAnO1xyXG4gICAgICAgIHJldHVybiBsZXR0ZXI7XHJcbiAgICB9XHJcbiAgICBjbGljayhlbGVtZW50KSB7XHJcbiAgICAgICAgY29uc3QgeyBpZCwgZG9tRWxlbWVudCB9ID0gZWxlbWVudDtcclxuICAgICAgICBpZiAoJ29udG91Y2hzdGFydCcgaW4gd2luZG93KSB7XHJcbiAgICAgICAgICAgIGRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIGV2dCA9PiB7XHJcbiAgICAgICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZW1pdChgYnV0dG9uX29uY2xpY2tfJHtpZH1gKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBldnQgPT4ge1xyXG4gICAgICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoYGJ1dHRvbl9vbnJlbGVhc2VfJHtpZH1gKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBkb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGV2dCA9PiB7XHJcbiAgICAgICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZW1pdChgYnV0dG9uX29uY2xpY2tfJHtpZH1gKTtcclxuICAgICAgICAgICAgICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGV2dCA9PiB7XHJcbiAgICAgICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZW1pdChgYnV0dG9uX29ucmVsZWFzZV8ke2lkfWApO1xyXG4gICAgICAgICAgICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICB0YXAoZXZ0LCBlbGVtZW50KSB7XHJcbiAgICAgICAgZXZ0ID0gZXZ0IHx8IHdpbmRvdy5ldmVudDtcclxuICAgICAgICAvLyBnZXQgdGhlIG1vdXNlIGN1cnNvciBwb3NpdGlvbiBhdCBzdGFydHVwOlxyXG4gICAgICAgIGVsZW1lbnQub2Zmc2V0ID0gdGhpcy5nZXRNb3VzZVBvc2l0aW9uKGV2dCk7XHJcbiAgICAgICAgaWYgKCdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdykge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5vbnRvdWNobW92ZSA9IGV2dCA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXZ0LnRhcmdldCA9PT0gZWxlbWVudC5kb21FbGVtZW50KVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubW92ZShldnQsIGVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBkb2N1bWVudC5vbnRvdWNoZW5kID0gZXZ0ID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChldnQudGFyZ2V0ID09PSBlbGVtZW50LmRvbUVsZW1lbnQpXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cChlbGVtZW50KTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50Lm9ubW91c2Vtb3ZlID0gZXZ0ID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChldnQudGFyZ2V0ID09PSBlbGVtZW50LmRvbUVsZW1lbnQpXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tb3ZlKGV2dCwgZWxlbWVudCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGRvY3VtZW50Lm9ubW91c2V1cCA9IF9ldnQgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy51cChlbGVtZW50KTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBtb3ZlKGV2dCwgZWxlbWVudCkge1xyXG4gICAgICAgIGNvbnN0IHsgZG9tRWxlbWVudCwgbWF4UmFkaXVzLCBtYXhSYWRpdXNTcXVhcmVkLCBvcmlnaW4sIG9mZnNldCwgaWQgfSA9IGVsZW1lbnQ7XHJcbiAgICAgICAgZXZ0ID0gZXZ0IHx8IHdpbmRvdy5ldmVudDtcclxuICAgICAgICBjb25zdCBtb3VzZSA9IHRoaXMuZ2V0TW91c2VQb3NpdGlvbihldnQpO1xyXG4gICAgICAgIC8vIGNhbGN1bGF0ZSB0aGUgbmV3IGN1cnNvciBwb3NpdGlvbjpcclxuICAgICAgICBsZXQgbGVmdCA9IG1vdXNlLnggLSBvZmZzZXQueDtcclxuICAgICAgICBsZXQgdG9wID0gbW91c2UueSAtIG9mZnNldC55O1xyXG4gICAgICAgIC8vdGhpcy5vZmZzZXQgPSBtb3VzZTtcclxuICAgICAgICBjb25zdCBzcU1hZyA9IGxlZnQgKiBsZWZ0ICsgdG9wICogdG9wO1xyXG4gICAgICAgIGlmIChzcU1hZyA+IG1heFJhZGl1c1NxdWFyZWQpIHtcclxuICAgICAgICAgICAgLy9Pbmx5IHVzZSBzcXJ0IGlmIGVzc2VudGlhbFxyXG4gICAgICAgICAgICBjb25zdCBtYWduaXR1ZGUgPSBNYXRoLnNxcnQoc3FNYWcpO1xyXG4gICAgICAgICAgICBsZWZ0IC89IG1hZ25pdHVkZTtcclxuICAgICAgICAgICAgdG9wIC89IG1hZ25pdHVkZTtcclxuICAgICAgICAgICAgbGVmdCAqPSBtYXhSYWRpdXM7XHJcbiAgICAgICAgICAgIHRvcCAqPSBtYXhSYWRpdXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIHNldCB0aGUgZWxlbWVudCdzIG5ldyBwb3NpdGlvbjpcclxuICAgICAgICBkb21FbGVtZW50LnN0eWxlLnRvcCA9IGAke3RvcCArIGRvbUVsZW1lbnQuY2xpZW50SGVpZ2h0IC8gMn1weGA7XHJcbiAgICAgICAgZG9tRWxlbWVudC5zdHlsZS5sZWZ0ID0gYCR7bGVmdCArIGRvbUVsZW1lbnQuY2xpZW50V2lkdGggLyAyfXB4YDtcclxuICAgICAgICBjb25zdCBmb3J3YXJkID0gLSh0b3AgLSBvcmlnaW4udG9wICsgZG9tRWxlbWVudC5jbGllbnRIZWlnaHQgLyAyKSAvIG1heFJhZGl1cztcclxuICAgICAgICBjb25zdCB0dXJuID0gKGxlZnQgLSBvcmlnaW4ubGVmdCArIGRvbUVsZW1lbnQuY2xpZW50V2lkdGggLyAyKSAvIG1heFJhZGl1cztcclxuICAgICAgICB0aGlzLmVtaXQoYGF4aXNfb25tb3ZlXyR7aWR9YCwgeyB0b3A6IGZvcndhcmQsIHJpZ2h0OiB0dXJuIH0pO1xyXG4gICAgfVxyXG4gICAgdXAoZWxlbWVudCkge1xyXG4gICAgICAgIGNvbnN0IHsgZG9tRWxlbWVudCwgb3JpZ2luLCBpZCB9ID0gZWxlbWVudDtcclxuICAgICAgICBpZiAoJ29udG91Y2hzdGFydCcgaW4gd2luZG93KSB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50Lm9udG91Y2htb3ZlID0gbnVsbDtcclxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICBkb2N1bWVudC50b3VjaGVuZCA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5vbm1vdXNlbW92ZSA9IG51bGw7XHJcbiAgICAgICAgICAgIGRvY3VtZW50Lm9ubW91c2V1cCA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRvbUVsZW1lbnQuc3R5bGUudG9wID0gYCR7b3JpZ2luLnRvcH1weGA7XHJcbiAgICAgICAgZG9tRWxlbWVudC5zdHlsZS5sZWZ0ID0gYCR7b3JpZ2luLmxlZnR9cHhgO1xyXG4gICAgICAgIHRoaXMuZW1pdChgYXhpc19vbm1vdmVfJHtpZH1gLCB7IHRvcDogMCwgcmlnaHQ6IDAgfSk7XHJcbiAgICB9XHJcbiAgICBnZXRNb3VzZVBvc2l0aW9uKGV2dCkge1xyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICBsZXQgY2xpZW50WCA9IGV2dC50YXJnZXRUb3VjaGVzID8gZXZ0LnRhcmdldFRvdWNoZXNbMF0ucGFnZVggOiBldnQuY2xpZW50WDtcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgbGV0IGNsaWVudFkgPSBldnQudGFyZ2V0VG91Y2hlcyA/IGV2dC50YXJnZXRUb3VjaGVzWzBdLnBhZ2VZIDogZXZ0LmNsaWVudFk7XHJcbiAgICAgICAgcmV0dXJuIHsgeDogY2xpZW50WCwgeTogY2xpZW50WSB9O1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydHMuSm95U3RpY2sgPSBKb3lTdGljaztcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9am95c3RpY2suanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5Qb2ludGVyRHJhZyA9IHZvaWQgMDtcclxuY2xhc3MgUG9pbnRlckRyYWcge1xyXG4gICAgY29uc3RydWN0b3IoX2VsZW1lbnQsIGF1dG9TdGFydCA9IHRydWUpIHtcclxuICAgICAgICB0aGlzLl9lbGVtZW50ID0gX2VsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy5faXNSdW5uaW5nID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fcG9zaXRpb24gPSB7IHg6IDAsIHk6IDAgfTtcclxuICAgICAgICB0aGlzLl9kZWx0YSA9IHsgeDogMCwgeTogMCB9O1xyXG4gICAgICAgIHRoaXMuX29uTW92ZUNhbGxiYWNrID0gKCkgPT4geyB9O1xyXG4gICAgICAgIHRoaXMuX2lzUG9pbnRlckRvd24gPSBmYWxzZTtcclxuICAgICAgICBpZiAoYXV0b1N0YXJ0KVxyXG4gICAgICAgICAgICB0aGlzLnN0YXJ0KCk7XHJcbiAgICB9XHJcbiAgICBnZXQgaXNUb3VjaERldmljZSgpIHtcclxuICAgICAgICByZXR1cm4gJ29udG91Y2hzdGFydCcgaW4gd2luZG93O1xyXG4gICAgfVxyXG4gICAgZ2V0IGlzUG9pbnRlckRvd24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzUG9pbnRlckRvd247XHJcbiAgICB9XHJcbiAgICBzdGFydCgpIHtcclxuICAgICAgICBpZiAodGhpcy5faXNSdW5uaW5nKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgdGhpcy5faXNSdW5uaW5nID0gdHJ1ZTtcclxuICAgICAgICBpZiAodGhpcy5pc1RvdWNoRGV2aWNlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIGUgPT4gdGhpcy5vblRvdWNoU3RhcnQoZSkpO1xyXG4gICAgICAgICAgICB0aGlzLl9lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgZSA9PiB0aGlzLm9uVG91Y2hFbmQoZSkpO1xyXG4gICAgICAgICAgICB0aGlzLl9lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIGUgPT4gdGhpcy5vblRvdWNoTW92ZShlKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGUgPT4gdGhpcy5vblBvaW50ZXJEb3duKGUpKTtcclxuICAgICAgICAgICAgdGhpcy5fZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgZSA9PiB0aGlzLm9uUG9pbnRlclVwKGUpKTtcclxuICAgICAgICAgICAgdGhpcy5fZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgZSA9PiB0aGlzLm9uUG9pbnRlckxlYXZlKGUpKTtcclxuICAgICAgICAgICAgdGhpcy5fZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLCBlID0+IHRoaXMub25Qb2ludGVyT3ZlcihlKSk7XHJcbiAgICAgICAgICAgIHRoaXMuX2VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgZSA9PiB0aGlzLm9uUG9pbnRlck1vdmUoZSkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHN0b3AoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNUb3VjaERldmljZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBlID0+IHRoaXMub25Ub3VjaFN0YXJ0KGUpKTtcclxuICAgICAgICAgICAgdGhpcy5fZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIGUgPT4gdGhpcy5vblRvdWNoRW5kKGUpKTtcclxuICAgICAgICAgICAgdGhpcy5fZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCBlID0+IHRoaXMub25Ub3VjaE1vdmUoZSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBlID0+IHRoaXMub25Qb2ludGVyRG93bihlKSk7XHJcbiAgICAgICAgICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIGUgPT4gdGhpcy5vblBvaW50ZXJMZWF2ZShlKSk7XHJcbiAgICAgICAgICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGUgPT4gdGhpcy5vblBvaW50ZXJVcChlKSk7XHJcbiAgICAgICAgICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgZSA9PiB0aGlzLm9uUG9pbnRlck92ZXIoZSkpO1xyXG4gICAgICAgICAgICB0aGlzLl9lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGUgPT4gdGhpcy5vblBvaW50ZXJNb3ZlKGUpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5faXNSdW5uaW5nID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICByZW1vdmVMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgdGhpcy5zdG9wKCk7XHJcbiAgICB9XHJcbiAgICBvbk1vdmUob25Nb3ZlQ2FsbGJhY2spIHtcclxuICAgICAgICB0aGlzLl9vbk1vdmVDYWxsYmFjayA9IG9uTW92ZUNhbGxiYWNrO1xyXG4gICAgfVxyXG4gICAgb25Qb2ludGVyRG93bihfZSkge1xyXG4gICAgICAgIHRoaXMuX2lzUG9pbnRlckRvd24gPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgb25Qb2ludGVyVXAoX2UpIHtcclxuICAgICAgICB0aGlzLl9pc1BvaW50ZXJEb3duID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBvblBvaW50ZXJMZWF2ZShfZSkge1xyXG4gICAgICAgIHRoaXMuX2lzUG9pbnRlckRvd24gPSBmYWxzZTtcclxuICAgIH1cclxuICAgIG9uUG9pbnRlck1vdmUoZSkge1xyXG4gICAgICAgIGNvbnN0IGNsaWVudFggPSBlLm1vdmVtZW50WDtcclxuICAgICAgICBjb25zdCBjbGllbnRZID0gZS5tb3ZlbWVudFk7XHJcbiAgICAgICAgdGhpcy5fZGVsdGEgPSB7IHg6IGNsaWVudFgsIHk6IGNsaWVudFkgfTtcclxuICAgICAgICB0aGlzLl9vbk1vdmVDYWxsYmFjayh0aGlzLl9kZWx0YSk7XHJcbiAgICB9XHJcbiAgICBvblBvaW50ZXJPdmVyKF9lKSB7IH1cclxuICAgIG9uVG91Y2hTdGFydChlKSB7XHJcbiAgICAgICAgY29uc3QgY2xpZW50WCA9IGUudG91Y2hlc1swXS5jbGllbnRYO1xyXG4gICAgICAgIGNvbnN0IGNsaWVudFkgPSBlLnRvdWNoZXNbMF0uY2xpZW50WTtcclxuICAgICAgICB0aGlzLl9wb3NpdGlvbiA9IHsgeDogY2xpZW50WCwgeTogY2xpZW50WSB9O1xyXG4gICAgfVxyXG4gICAgb25Ub3VjaEVuZChfZSkge1xyXG4gICAgICAgIHRoaXMuX3Bvc2l0aW9uID0geyB4OiAwLCB5OiAwIH07XHJcbiAgICAgICAgdGhpcy5fZGVsdGEgPSB7IHg6IDAsIHk6IDAgfTtcclxuICAgICAgICB0aGlzLl9vbk1vdmVDYWxsYmFjayh0aGlzLl9kZWx0YSk7XHJcbiAgICB9XHJcbiAgICBvblRvdWNoTW92ZShlKSB7XHJcbiAgICAgICAgY29uc3QgY2xpZW50WCA9IGUudG91Y2hlc1swXS5jbGllbnRYO1xyXG4gICAgICAgIGNvbnN0IGNsaWVudFkgPSBlLnRvdWNoZXNbMF0uY2xpZW50WTtcclxuICAgICAgICB0aGlzLl9kZWx0YSA9IHsgeDogY2xpZW50WCAtIHRoaXMuX3Bvc2l0aW9uLngsIHk6IGNsaWVudFkgLSB0aGlzLl9wb3NpdGlvbi55IH07XHJcbiAgICAgICAgdGhpcy5fb25Nb3ZlQ2FsbGJhY2sodGhpcy5fZGVsdGEpO1xyXG4gICAgICAgIHRoaXMuX3Bvc2l0aW9uID0geyB4OiBjbGllbnRYLCB5OiBjbGllbnRZIH07XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0cy5Qb2ludGVyRHJhZyA9IFBvaW50ZXJEcmFnO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wb2ludGVyRHJhZy5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLlBvaW50ZXJMb2NrID0gdm9pZCAwO1xyXG5jbGFzcyBQb2ludGVyTG9jayB7XHJcbiAgICBjb25zdHJ1Y3RvcihfZWxlbWVudCwgYXV0b0xvY2sgPSB0cnVlKSB7XHJcbiAgICAgICAgdGhpcy5fZWxlbWVudCA9IF9lbGVtZW50O1xyXG4gICAgICAgIHRoaXMuX2lzUnVubmluZyA9IGZhbHNlO1xyXG4gICAgICAgIGlmIChhdXRvTG9jaylcclxuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0KCk7XHJcbiAgICB9XHJcbiAgICBpc0xvY2tlZCgpIHtcclxuICAgICAgICByZXR1cm4gISFkb2N1bWVudC5wb2ludGVyTG9ja0VsZW1lbnQ7XHJcbiAgICB9XHJcbiAgICBleGl0KCkge1xyXG4gICAgICAgIHRoaXMuX2lzUnVubmluZyA9IGZhbHNlO1xyXG4gICAgICAgIGRvY3VtZW50LmV4aXRQb2ludGVyTG9jaygpO1xyXG4gICAgICAgIHRoaXMucmVtb3ZlTGlzdGVuZXJzKCk7XHJcbiAgICB9XHJcbiAgICByZW1vdmVMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9pbnRlcmxvY2tjaGFuZ2UnLCAoKSA9PiB0aGlzLnBvaW50ZXJMb2NrQ2hhbmdlSGFuZGxlcigpKTtcclxuICAgICAgICB0aGlzLl9lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJkb3duJywgKCkgPT4gdGhpcy5wb2ludGVyRG93bkhhbmRsZXJIYW5kbGVyKCkpO1xyXG4gICAgfVxyXG4gICAgcG9pbnRlckxvY2tDaGFuZ2VIYW5kbGVyKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5faXNSdW5uaW5nKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgdGhpcy5fcmVxdWVzdCgpO1xyXG4gICAgfVxyXG4gICAgcG9pbnRlckRvd25IYW5kbGVySGFuZGxlcigpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX2lzUnVubmluZylcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnQucmVxdWVzdFBvaW50ZXJMb2NrKCk7XHJcbiAgICB9XHJcbiAgICByZXF1ZXN0KCkge1xyXG4gICAgICAgIHRoaXMuX2lzUnVubmluZyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5fcmVxdWVzdCgpO1xyXG4gICAgfVxyXG4gICAgX3JlcXVlc3QoKSB7XHJcbiAgICAgICAgLy8gbGlzdGVuIHRvIHBvaW50ZXIgbG9jayBjaGFuZ2UgZXZlbnRzXHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcmxvY2tjaGFuZ2UnLCAoKSA9PiB0aGlzLnBvaW50ZXJMb2NrQ2hhbmdlSGFuZGxlcigpLCB7XHJcbiAgICAgICAgICAgIG9uY2U6IHRydWVcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyByZXR1cm4gaWYgcG9pbnRlciBpcyBhbHJlYWR5IGxvY2tlZFxyXG4gICAgICAgIGlmICghIWRvY3VtZW50LnBvaW50ZXJMb2NrRWxlbWVudClcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIC8vIGxpc3RlbiBmb3IgcG9pbnRlcmRvd24gZXZlbnRcclxuICAgICAgICB0aGlzLl9lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJkb3duJywgKCkgPT4gdGhpcy5wb2ludGVyRG93bkhhbmRsZXJIYW5kbGVyKCksIHsgb25jZTogdHJ1ZSB9KTtcclxuICAgIH1cclxufVxyXG5leHBvcnRzLlBvaW50ZXJMb2NrID0gUG9pbnRlckxvY2s7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBvaW50ZXJMb2NrLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xyXG4vKipcclxuICogQGRlc2NyaXB0aW9uICBUaGlzIGNvZGUgaGFzIG9yaWdpbmFsbHkgYmVlbiBjb3BpZWQgZnJvbSBTa2V0Y2hib29rXHJcbiAqXHJcbiAqIEBhdXRob3IgICAgICAgc3dpZnQ1MDIgPGJsYWhhLmo1MDJAZ21haWwuY29tPiAoaHR0cDovL2pibGFoYS5hcnQvKVxyXG4gKiBAY29weXJpZ2h0ICAgIENvcHlyaWdodCAoYykgMjAxOCBzd2lmdDUwMjsgUHJvamVjdCBVcmw6IGh0dHBzOi8vZ2l0aHViLmNvbS9zd2lmdDUwMi9Ta2V0Y2hib29rXHJcbiAqIEBsaWNlbnNlICAgICAge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9zd2lmdDUwMi9Ta2V0Y2hib29rL2Jsb2IvbWFzdGVyL0xJQ0VOU0V8R1BMLTMuMH1cclxuICpcclxuICogQGF1dGhvciAgICAgICBZYW5uaWNrIERldWJlbCAoaHR0cHM6Ly9naXRodWIuY29tL3lhbmRldSlcclxuICogQGNvcHlyaWdodCAgICBDb3B5cmlnaHQgKGMpIDIwMjAgWWFubmljayBEZXViZWw7IFByb2plY3QgVXJsOiBodHRwczovL2dpdGh1Yi5jb20vZW5hYmxlM2QvZW5hYmxlM2RcclxuICogQGxpY2Vuc2UgICAgICB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2VuYWJsZTNkL2VuYWJsZTNkL2Jsb2IvbWFzdGVyL0xJQ0VOU0V8R05VIEdQTHYzfVxyXG4gKi9cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLlRoaXJkUGVyc29uQ29udHJvbHMgPSB2b2lkIDA7XHJcbmNvbnN0IGRpc3RfMSA9IHJlcXVpcmUoXCJAZW5hYmxlM2QvdGhyZWUtd3JhcHBlci9kaXN0XCIpO1xyXG5jbGFzcyBUaGlyZFBlcnNvbkNvbnRyb2xzIHtcclxuICAgIGNvbnN0cnVjdG9yKGNhbWVyYSwgdGFyZ2V0LCBjb25maWcpIHtcclxuICAgICAgICB0aGlzLmNhbWVyYSA9IGNhbWVyYTtcclxuICAgICAgICB0aGlzLnRhcmdldCA9IHRhcmdldDtcclxuICAgICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcclxuICAgICAgICBjb25zdCB7IG9mZnNldCA9IG5ldyBkaXN0XzEuVmVjdG9yMygwLCAwLCAwKSwgc2Vuc2l0aXZpdHkgPSBuZXcgZGlzdF8xLlZlY3RvcjIoMSwgMSksIHJhZGl1cyA9IDgsIHRhcmdldFJhZGl1cyA9IDEwLCBpbnRlcnBvbGF0aW9uRmFjdG9yID0gMC4wNSwgcG9pbnRlckxvY2sgPSB0cnVlLCBhdXRvVXBkYXRlID0gdHJ1ZSwgdGhldGEgPSAwLCBwaGkgPSAwLCBcclxuICAgICAgICAvKiogTWF4IFBoaSBpbiBkZWcgKi9cclxuICAgICAgICBtYXhQaGkgPSA4NSwgXHJcbiAgICAgICAgLyoqIE1pbiBQaGkgaW4gZGVnICovXHJcbiAgICAgICAgbWluUGhpID0gLTg1IH0gPSBjb25maWc7XHJcbiAgICAgICAgdGhpcy5vZmZzZXQgPSBvZmZzZXQ7XHJcbiAgICAgICAgdGhpcy5zZW5zaXRpdml0eSA9IHNlbnNpdGl2aXR5O1xyXG4gICAgICAgIHRoaXMucmFkaXVzID0gcmFkaXVzO1xyXG4gICAgICAgIHRoaXMudGFyZ2V0UmFkaXVzID0gdGFyZ2V0UmFkaXVzO1xyXG4gICAgICAgIHRoaXMuaW50ZXJwb2xhdGlvbkZhY3RvciA9IGludGVycG9sYXRpb25GYWN0b3I7XHJcbiAgICAgICAgdGhpcy50aGV0YSA9IHRoZXRhO1xyXG4gICAgICAgIHRoaXMucGhpID0gcGhpO1xyXG4gICAgICAgIHRoaXMubWF4UGhpID0gbWF4UGhpO1xyXG4gICAgICAgIHRoaXMubWluUGhpID0gbWluUGhpO1xyXG4gICAgICAgIC8vIGlmIChwb2ludGVyTG9jaykge1xyXG4gICAgICAgIC8vICAgc2NlbmUuaW5wdXQub24oJ3BvaW50ZXJkb3duJywgKCkgPT4ge1xyXG4gICAgICAgIC8vICAgICBzY2VuZS5pbnB1dC5tb3VzZS5yZXF1ZXN0UG9pbnRlckxvY2soKVxyXG4gICAgICAgIC8vICAgfSlcclxuICAgICAgICAvLyAgIHNjZW5lLmlucHV0Lm9uKCdwb2ludGVybW92ZScsIChwb2ludGVyOiBQb2ludGVyRXZlbnQpID0+IHtcclxuICAgICAgICAvLyAgICAgaWYgKHNjZW5lLmlucHV0Lm1vdXNlLmxvY2tlZCkge1xyXG4gICAgICAgIC8vICAgICAgIHRoaXMudXBkYXRlKHBvaW50ZXIubW92ZW1lbnRYLCBwb2ludGVyLm1vdmVtZW50WSlcclxuICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgIC8vICAgfSlcclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgLy8gaWYgKGF1dG9VcGRhdGUpIHtcclxuICAgICAgICAvLyAgIHNjZW5lLmV2ZW50cy5vbigndXBkYXRlJywgKCkgPT4ge1xyXG4gICAgICAgIC8vICAgICB0aGlzLnVwZGF0ZSgwLCAwKVxyXG4gICAgICAgIC8vICAgfSlcclxuICAgICAgICAvLyB9XHJcbiAgICB9XHJcbiAgICB1cGRhdGUoZGVsdGFYLCBkZWx0YVkpIHtcclxuICAgICAgICBjb25zdCB0YXJnZXQgPSB0aGlzLnRhcmdldC5wb3NpdGlvbi5jbG9uZSgpLmFkZCh0aGlzLm9mZnNldCk7XHJcbiAgICAgICAgdGhpcy50aGV0YSAtPSBkZWx0YVggKiAodGhpcy5zZW5zaXRpdml0eS54IC8gMik7XHJcbiAgICAgICAgdGhpcy50aGV0YSAlPSAzNjA7XHJcbiAgICAgICAgdGhpcy5waGkgKz0gZGVsdGFZICogKHRoaXMuc2Vuc2l0aXZpdHkueSAvIDIpO1xyXG4gICAgICAgIHRoaXMucGhpID0gTWF0aC5taW4odGhpcy5tYXhQaGksIE1hdGgubWF4KHRoaXMubWluUGhpLCB0aGlzLnBoaSkpO1xyXG4gICAgICAgIHRoaXMucmFkaXVzID0gZGlzdF8xLk1hdGhVdGlscy5sZXJwKHRoaXMucmFkaXVzLCB0aGlzLnRhcmdldFJhZGl1cywgdGhpcy5pbnRlcnBvbGF0aW9uRmFjdG9yKTtcclxuICAgICAgICB0aGlzLmNhbWVyYS5wb3NpdGlvbi54ID1cclxuICAgICAgICAgICAgdGFyZ2V0LnggKyB0aGlzLnJhZGl1cyAqIE1hdGguc2luKCh0aGlzLnRoZXRhICogTWF0aC5QSSkgLyAxODApICogTWF0aC5jb3MoKHRoaXMucGhpICogTWF0aC5QSSkgLyAxODApO1xyXG4gICAgICAgIHRoaXMuY2FtZXJhLnBvc2l0aW9uLnkgPSB0YXJnZXQueSArIHRoaXMucmFkaXVzICogTWF0aC5zaW4oKHRoaXMucGhpICogTWF0aC5QSSkgLyAxODApO1xyXG4gICAgICAgIHRoaXMuY2FtZXJhLnBvc2l0aW9uLnogPVxyXG4gICAgICAgICAgICB0YXJnZXQueiArIHRoaXMucmFkaXVzICogTWF0aC5jb3MoKHRoaXMudGhldGEgKiBNYXRoLlBJKSAvIDE4MCkgKiBNYXRoLmNvcygodGhpcy5waGkgKiBNYXRoLlBJKSAvIDE4MCk7XHJcbiAgICAgICAgdGhpcy5jYW1lcmEudXBkYXRlTWF0cml4KCk7XHJcbiAgICAgICAgdGhpcy5jYW1lcmEubG9va0F0KHRhcmdldCk7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0cy5UaGlyZFBlcnNvbkNvbnRyb2xzID0gVGhpcmRQZXJzb25Db250cm9scztcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGhpcmRQZXJzb25Db250cm9scy5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLmFkZFdhdGVyID0gdm9pZCAwO1xyXG5jb25zdCBpbmRleF8xID0gcmVxdWlyZShcIkBlbmFibGUzZC90aHJlZS13cmFwcGVyL2Rpc3QvaW5kZXhcIik7XHJcbmNvbnN0IGFkZFdhdGVyID0gKHNjZW5lLCByZW5kZXJlciwgY29uZmlnID0ge30pID0+IHtcclxuICAgIGNvbnN0IHsgd2lkdGggPSAyMCwgaGVpZ2h0ID0gMjAsIHggPSAwLCB5ID0gMCwgeiA9IDAsIGNvbG9yID0gJyNmZmZmZmYnLCBzY2FsZSA9IDQsIGZsb3dYID0gMSwgZmxvd1kgPSAxLCBub3JtYWxNYXAwID0gdW5kZWZpbmVkLCBub3JtYWxNYXAxID0gdW5kZWZpbmVkIH0gPSBjb25maWc7XHJcbiAgICAvL2dyb3VuZFxyXG4gICAgY29uc3QgZ3JvdW5kR2VvbWV0cnkgPSBuZXcgaW5kZXhfMS5QbGFuZUJ1ZmZlckdlb21ldHJ5KHdpZHRoLCBoZWlnaHQpO1xyXG4gICAgLy8gIzAwNzdiZSAoYWxzbyBrbm93biBhcyBPY2VhbiBCb2F0IEJsdWUpXHJcbiAgICBjb25zdCBncm91bmRNYXRlcmlhbCA9IG5ldyBpbmRleF8xLk1lc2hTdGFuZGFyZE1hdGVyaWFsKHsgY29sb3I6IDB4MDA3N2JlLCB0cmFuc3BhcmVudDogdHJ1ZSwgb3BhY2l0eTogMC44IH0pO1xyXG4gICAgY29uc3QgZ3JvdW5kID0gbmV3IGluZGV4XzEuTWVzaChncm91bmRHZW9tZXRyeSwgZ3JvdW5kTWF0ZXJpYWwpO1xyXG4gICAgZ3JvdW5kLnBvc2l0aW9uLnNldCh4LCB5LCB6KTtcclxuICAgIGdyb3VuZC5yb3RhdGlvbi54ID0gTWF0aC5QSSAqIC0wLjU7XHJcbiAgICBzY2VuZS5hZGQoZ3JvdW5kKTtcclxuICAgIC8vIHdhdGVyXHJcbiAgICBjb25zdCB3YXRlckdlb21ldHJ5ID0gbmV3IGluZGV4XzEuUGxhbmVCdWZmZXJHZW9tZXRyeSh3aWR0aCwgaGVpZ2h0KTtcclxuICAgIGNvbnN0IHdhdGVyID0gbmV3IGluZGV4XzEuV2F0ZXIod2F0ZXJHZW9tZXRyeSwge1xyXG4gICAgICAgIGNvbG9yOiBjb2xvcixcclxuICAgICAgICBzY2FsZTogc2NhbGUsXHJcbiAgICAgICAgZmxvd0RpcmVjdGlvbjogbmV3IGluZGV4XzEuVmVjdG9yMihmbG93WCwgZmxvd1kpLFxyXG4gICAgICAgIHRleHR1cmVXaWR0aDogMTAyNCxcclxuICAgICAgICB0ZXh0dXJlSGVpZ2h0OiAxMDI0LFxyXG4gICAgICAgIG5vcm1hbE1hcDA6IG5vcm1hbE1hcDAsXHJcbiAgICAgICAgbm9ybWFsTWFwMTogbm9ybWFsTWFwMSxcclxuICAgICAgICBlbmNvZGluZzogcmVuZGVyZXIub3V0cHV0RW5jb2RpbmdcclxuICAgIH0pO1xyXG4gICAgd2F0ZXIucG9zaXRpb24uc2V0KHgsIHkgKyAwLjEsIHopO1xyXG4gICAgd2F0ZXIucm90YXRpb24ueCA9IE1hdGguUEkgKiAtMC41O1xyXG4gICAgc2NlbmUuYWRkKHdhdGVyKTtcclxuICAgIHJldHVybiB7IGdyb3VuZCwgd2F0ZXIgfTtcclxufTtcclxuZXhwb3J0cy5hZGRXYXRlciA9IGFkZFdhdGVyO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD13YXRlci5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcclxuLyoqXHJcbiAqIEBhdXRob3IgICAgICAgWWFubmljayBEZXViZWwgKGh0dHBzOi8vZ2l0aHViLmNvbS95YW5kZXUpXHJcbiAqIEBjb3B5cmlnaHQgICAgQ29weXJpZ2h0IChjKSAyMDIwIFlhbm5pY2sgRGV1YmVsOyBQcm9qZWN0IFVybDogaHR0cHM6Ly9naXRodWIuY29tL2VuYWJsZTNkL2VuYWJsZTNkXHJcbiAqIEBsaWNlbnNlICAgICAge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9lbmFibGUzZC9lbmFibGUzZC9ibG9iL21hc3Rlci9MSUNFTlNFfEdOVSBHUEx2M31cclxuICovXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuY29uc3QgZXZlbnRlbWl0dGVyM18xID0gcmVxdWlyZShcImV2ZW50ZW1pdHRlcjNcIik7XHJcbmNvbnN0IGluZGV4XzEgPSByZXF1aXJlKFwiQGVuYWJsZTNkL3RocmVlLXdyYXBwZXIvZGlzdC9pbmRleFwiKTtcclxuY2xhc3MgUGh5c2ljc0JvZHkge1xyXG4gICAgY29uc3RydWN0b3IocGh5c2ljcywgYW1tbykge1xyXG4gICAgICAgIHRoaXMucGh5c2ljcyA9IHBoeXNpY3M7XHJcbiAgICAgICAgdGhpcy5hbW1vID0gYW1tbztcclxuICAgICAgICB0aGlzLmlnbm9yZVNjYWxlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5pc1NvZnRCb2R5ID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5vZmZzZXQgPSB7IHg6IDAsIHk6IDAsIHo6IDAgfTtcclxuICAgICAgICB0aGlzLmVycm9ycyA9IFtdO1xyXG4gICAgICAgIHRoaXMuY2hlY2tDb2xsaXNpb25zID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5icmVha2FibGUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmRpZFVwZGF0ZSA9IGZhbHNlO1xyXG4gICAgICAgIC8qKiBTa2lwIHN5bmNpbmcgdGhlIG1lc2ggdG8gdGhlIHBoeXNpY3MgYm9keS4gKi9cclxuICAgICAgICB0aGlzLnNraXBVcGRhdGUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9lbWl0VXBkYXRlRXZlbnRzID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fbmVlZFVwZGF0ZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMudG1wRXVsZXIgPSBuZXcgaW5kZXhfMS5FdWxlcigpO1xyXG4gICAgICAgIHRoaXMudG1wUXVhdGVybmlvbiA9IG5ldyBpbmRleF8xLlF1YXRlcm5pb24oKTtcclxuICAgICAgICB0aGlzLnRtcEJ0VmVjdG9yMyA9IG5ldyBBbW1vLmJ0VmVjdG9yMygpO1xyXG4gICAgICAgIHRoaXMudG1wQnRWZWN0b3IzXzEgPSBuZXcgQW1tby5idFZlY3RvcjMoKTtcclxuICAgICAgICB0aGlzLnRtcEJ0UXVhdGVybmlvbiA9IG5ldyBBbW1vLmJ0UXVhdGVybmlvbigwLCAwLCAwLCAxKTtcclxuICAgICAgICB0aGlzLmV2ZW50RW1pdHRlciA9IG5ldyBldmVudGVtaXR0ZXIzXzEuRXZlbnRFbWl0dGVyKCk7XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIHRoaXMubmFtZSA9IGFtbW8ubmFtZTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogRG9uJ3QgY2FsbCB0aGlzIG1hbnVhbGx5ISBEbyBwaHlzaWNzLmRlc3Ryb3koKSBpbnN0ZWFkLlxyXG4gICAgICovXHJcbiAgICBkZXN0cnVjdG9yKCkge1xyXG4gICAgICAgIC8vIHJlbW92ZSBldmVudHNcclxuICAgICAgICBpZiAodGhpcy5ldmVudEVtaXR0ZXIpXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRFbWl0dGVyLnJlbW92ZUFsbExpc3RlbmVycygpO1xyXG4gICAgICAgIC8vIGRlc3Ryb3kgdG1wIGFtbW8gdmFsdWVzXHJcbiAgICAgICAgQW1tby5kZXN0cm95KHRoaXMudG1wQnRWZWN0b3IzKTtcclxuICAgICAgICBBbW1vLmRlc3Ryb3kodGhpcy50bXBCdFZlY3RvcjNfMSk7XHJcbiAgICAgICAgQW1tby5kZXN0cm95KHRoaXMudG1wQnRRdWF0ZXJuaW9uKTtcclxuICAgICAgICAvLyBkZXN0b3J5IGNvbGxpc2lvbiBzaGFwZVxyXG4gICAgICAgIEFtbW8uZGVzdHJveSh0aGlzLmFtbW8uZ2V0Q29sbGlzaW9uU2hhcGUoKSk7XHJcbiAgICAgICAgLy8gZGVzdHJveSBib2R5XHJcbiAgICAgICAgQW1tby5kZXN0cm95KHRoaXMuYW1tbyk7XHJcbiAgICB9XHJcbiAgICBzZXR1cEV2ZW50RW1pdHRlcigpIHtcclxuICAgICAgICBpZiAodHlwZW9mIHRoaXMuZXZlbnRFbWl0dGVyID09PSAndW5kZWZpbmVkJylcclxuICAgICAgICAgICAgdGhpcy5ldmVudEVtaXR0ZXIgPSBuZXcgZXZlbnRlbWl0dGVyM18xLkV2ZW50RW1pdHRlcigpO1xyXG4gICAgfVxyXG4gICAgZ2V0IG5lZWRVcGRhdGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX25lZWRVcGRhdGU7XHJcbiAgICB9XHJcbiAgICBzZXQgbmVlZFVwZGF0ZShuZWVkKSB7XHJcbiAgICAgICAgaWYgKCFuZWVkICYmIHRoaXMuX25lZWRVcGRhdGUpXHJcbiAgICAgICAgICAgIHRoaXMuZGlkVXBkYXRlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLl9uZWVkVXBkYXRlID0gbmVlZDtcclxuICAgIH1cclxuICAgIG9uVXBkYXRlRXZlbnQodXBkYXRlQ2FsbGJhY2ssIG9uY2UgPSBmYWxzZSkge1xyXG4gICAgICAgIHRoaXMuc2V0dXBFdmVudEVtaXR0ZXIoKTtcclxuICAgICAgICB0aGlzLl9lbWl0VXBkYXRlRXZlbnRzID0gdHJ1ZTtcclxuICAgICAgICBpZiAob25jZSlcclxuICAgICAgICAgICAgdGhpcy5ldmVudEVtaXR0ZXIub25jZSgndXBkYXRlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdXBkYXRlQ2FsbGJhY2soKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50RW1pdHRlci5vbigndXBkYXRlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdXBkYXRlQ2FsbGJhY2soKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBnZXQgb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgdXBkYXRlOiAodXBkYXRlQ2FsbGJhY2spID0+IHRoaXMub25VcGRhdGVFdmVudCh1cGRhdGVDYWxsYmFjayksXHJcbiAgICAgICAgICAgIGNvbGxpc2lvbjogKGNvbGxpc2lvbkNhbGxiYWNrKSA9PiB0aGlzLm9uQ29sbGlzaW9uKGNvbGxpc2lvbkNhbGxiYWNrKVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBnZXQgb25jZSgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB1cGRhdGU6ICh1cGRhdGVDYWxsYmFjaykgPT4gdGhpcy5vblVwZGF0ZUV2ZW50KHVwZGF0ZUNhbGxiYWNrLCB0cnVlKVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBvbkNvbGxpc2lvbihjb2xsaXNpb25DYWxsYmFjaykge1xyXG4gICAgICAgIHRoaXMuY2hlY2tDb2xsaXNpb25zID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnBoeXNpY3MuY29sbGlzaW9uRXZlbnRzLm9uKCdjb2xsaXNpb24nLCAoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB7IGJvZGllcywgZXZlbnQgfSA9IGRhdGE7XHJcbiAgICAgICAgICAgIGlmIChib2RpZXNbMF0ubmFtZSA9PT0gdGhpcy5uYW1lKVxyXG4gICAgICAgICAgICAgICAgY29sbGlzaW9uQ2FsbGJhY2soYm9kaWVzWzFdLCBldmVudCk7XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGJvZGllc1sxXS5uYW1lID09PSB0aGlzLm5hbWUpXHJcbiAgICAgICAgICAgICAgICBjb2xsaXNpb25DYWxsYmFjayhib2RpZXNbMF0sIGV2ZW50KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKiBZb3UgaGF2ZSB0byBjYWxsIHRyYW5zZm9ybSgpIGJlZm9yZSB5b3UgY2FuIGdldCBvciBzZXQgdGhlIGJvZHkncyBwb3NpdGlvbiBvciByb3RhdGlvbi4gKGZvciBoZWFkbGVzcyBtb2RlIG9ubHkpICovXHJcbiAgICB0cmFuc2Zvcm0oKSB7XHJcbiAgICAgICAgY29uc3QgdCA9IHRoaXMucGh5c2ljcy53b3JsZFRyYW5zZm9ybTtcclxuICAgICAgICB0aGlzLmFtbW8uZ2V0TW90aW9uU3RhdGUoKS5nZXRXb3JsZFRyYW5zZm9ybSh0KTtcclxuICAgIH1cclxuICAgIC8qKiBZb3UgaGF2ZSB0byBjYWxsIHJlZnJlc2goKSBhZnRlciB5b3Ugc2V0IHRoZSBwb3NpdGlvbiBvciByb3RhdGlvbiBvZiB0aGUgYm9keS4gKGZvciBoZWFkbGVzcyBtb2RlIG9ubHkpICovXHJcbiAgICByZWZyZXNoKCkge1xyXG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLnBoeXNpY3Mud29ybGRUcmFuc2Zvcm07XHJcbiAgICAgICAgdGhpcy5hbW1vLmdldE1vdGlvblN0YXRlKCkuc2V0V29ybGRUcmFuc2Zvcm0odCk7XHJcbiAgICB9XHJcbiAgICAvKiogU2V0IHRoZSByb3RhdGlvbiBpbiByYWRpYW5zLiAoZm9yIGhlYWRsZXNzIG1vZGUgb25seSkgKi9cclxuICAgIHNldFJvdGF0aW9uKHgsIHksIHopIHtcclxuICAgICAgICBjb25zdCBlID0gdGhpcy50bXBFdWxlci5zZXQoeCwgeSwgeik7XHJcbiAgICAgICAgY29uc3QgcSA9IHRoaXMudG1wUXVhdGVybmlvbi5zZXQoMCwgMCwgMCwgMSk7XHJcbiAgICAgICAgcS5zZXRGcm9tRXVsZXIoZSk7XHJcbiAgICAgICAgdGhpcy50bXBCdFF1YXRlcm5pb24uc2V0VmFsdWUoMCwgMCwgMCwgMSk7XHJcbiAgICAgICAgY29uc3QgYW1tb1F1YXQgPSB0aGlzLnRtcEJ0UXVhdGVybmlvbjtcclxuICAgICAgICBhbW1vUXVhdC5zZXRWYWx1ZShxLngsIHEueSwgcS56LCBxLncpO1xyXG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLnBoeXNpY3Mud29ybGRUcmFuc2Zvcm07XHJcbiAgICAgICAgdC5zZXRSb3RhdGlvbihhbW1vUXVhdCk7XHJcbiAgICB9XHJcbiAgICAvKiogR2V0IHRoZSByb3RhdGlvbiBpbiByYWRpYW5zLiAoZm9yIGhlYWRsZXNzIG1vZGUgb25seSkgKi9cclxuICAgIGdldCByb3RhdGlvbigpIHtcclxuICAgICAgICAvLyBodHRwczovL3d3dy5ldWNsaWRlYW5zcGFjZS5jb20vbWF0aHMvZ2VvbWV0cnkvcm90YXRpb25zL2NvbnZlcnNpb25zL3F1YXRlcm5pb25Ub0FuZ2xlL2luZGV4Lmh0bVxyXG4gICAgICAgIGxldCB4LCB5LCB6O1xyXG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLnBoeXNpY3Mud29ybGRUcmFuc2Zvcm07XHJcbiAgICAgICAgY29uc3QgYW1tb1F1YXQgPSB0LmdldFJvdGF0aW9uKCk7XHJcbiAgICAgICAgbGV0IHExID0gdGhpcy50bXBRdWF0ZXJuaW9uLnNldChhbW1vUXVhdC54KCksIGFtbW9RdWF0LnkoKSwgYW1tb1F1YXQueigpLCBhbW1vUXVhdC53KCkpO1xyXG4gICAgICAgIGlmIChxMS53ID4gMSlcclxuICAgICAgICAgICAgcTEgPSBxMS5ub3JtYWxpemUoKTsgLy8gaWYgdz4xIGFjb3MgYW5kIHNxcnQgd2lsbCBwcm9kdWNlIGVycm9ycywgdGhpcyBjYW50IGhhcHBlbiBpZiBxdWF0ZXJuaW9uIGlzIG5vcm1hbGl6ZWRcclxuICAgICAgICBjb25zdCBhbmdsZSA9IDIgKiBNYXRoLmFjb3MocTEudyk7XHJcbiAgICAgICAgY29uc3QgcyA9IE1hdGguc3FydCgxIC0gcTEudyAqIHExLncpOyAvLyBhc3N1bWluZyBxdWF0ZXJuaW9uIG5vcm1hbGl6ZWQgdGhlbiB3IGlzIGxlc3MgdGhhbiAxLCBzbyB0ZXJtIGFsd2F5cyBwb3NpdGl2ZS5cclxuICAgICAgICBpZiAocyA8IDAuMDAxKSB7XHJcbiAgICAgICAgICAgIC8vIHRlc3QgdG8gYXZvaWQgZGl2aWRlIGJ5IHplcm8sIHMgaXMgYWx3YXlzIHBvc2l0aXZlIGR1ZSB0byBzcXJ0XHJcbiAgICAgICAgICAgIC8vIGlmIHMgY2xvc2UgdG8gemVybyB0aGVuIGRpcmVjdGlvbiBvZiBheGlzIG5vdCBpbXBvcnRhbnRcclxuICAgICAgICAgICAgeCA9IHExLng7IC8vIGlmIGl0IGlzIGltcG9ydGFudCB0aGF0IGF4aXMgaXMgbm9ybWFsaXplZCB0aGVuIHJlcGxhY2Ugd2l0aCB4PTE7IHk9ej0wO1xyXG4gICAgICAgICAgICB5ID0gcTEueTtcclxuICAgICAgICAgICAgeiA9IHExLno7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB4ID0gcTEueCAvIHM7IC8vIG5vcm1hbGl6ZWQgYXhpc1xyXG4gICAgICAgICAgICB5ID0gcTEueSAvIHM7XHJcbiAgICAgICAgICAgIHogPSBxMS56IC8gcztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHsgeDogeCAqIGFuZ2xlLCB5OiB5ICogYW5nbGUsIHo6IHogKiBhbmdsZSB9O1xyXG4gICAgfVxyXG4gICAgLyoqIFNldCBwb3NpdGlvbi4gKGZvciBoZWFkbGVzcyBtb2RlIG9ubHkpICovXHJcbiAgICBzZXRQb3NpdGlvbih4LCB5LCB6KSB7XHJcbiAgICAgICAgY29uc3QgdCA9IHRoaXMucGh5c2ljcy53b3JsZFRyYW5zZm9ybTtcclxuICAgICAgICB0LmdldE9yaWdpbigpLnNldFZhbHVlKHgsIHksIHopO1xyXG4gICAgfVxyXG4gICAgLyoqIEdldCBwb3NpdGlvbi4gKGZvciBoZWFkbGVzcyBtb2RlIG9ubHkpICovXHJcbiAgICBnZXQgcG9zaXRpb24oKSB7XHJcbiAgICAgICAgY29uc3QgdCA9IHRoaXMucGh5c2ljcy53b3JsZFRyYW5zZm9ybTtcclxuICAgICAgICByZXR1cm4geyB4OiB0LmdldE9yaWdpbigpLngoKSwgeTogdC5nZXRPcmlnaW4oKS55KCksIHo6IHQuZ2V0T3JpZ2luKCkueigpIH07XHJcbiAgICB9XHJcbiAgICBnZXQgdmVsb2NpdHkoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgeDogdGhpcy5hbW1vLmdldExpbmVhclZlbG9jaXR5KCkueCgpLFxyXG4gICAgICAgICAgICB5OiB0aGlzLmFtbW8uZ2V0TGluZWFyVmVsb2NpdHkoKS55KCksXHJcbiAgICAgICAgICAgIHo6IHRoaXMuYW1tby5nZXRMaW5lYXJWZWxvY2l0eSgpLnooKVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBnZXQgYW5ndWxhclZlbG9jaXR5KCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHg6IHRoaXMuYW1tby5nZXRBbmd1bGFyVmVsb2NpdHkoKS54KCksXHJcbiAgICAgICAgICAgIHk6IHRoaXMuYW1tby5nZXRBbmd1bGFyVmVsb2NpdHkoKS55KCksXHJcbiAgICAgICAgICAgIHo6IHRoaXMuYW1tby5nZXRBbmd1bGFyVmVsb2NpdHkoKS56KClcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgc2V0VmVsb2NpdHkoeCwgeSwgeikge1xyXG4gICAgICAgIHRoaXMudG1wQnRWZWN0b3IzLnNldFZhbHVlKHgsIHksIHopO1xyXG4gICAgICAgIHRoaXMuYW1tby5zZXRMaW5lYXJWZWxvY2l0eSh0aGlzLnRtcEJ0VmVjdG9yMyk7XHJcbiAgICB9XHJcbiAgICBzZXRWZWxvY2l0eVgodmFsdWUpIHtcclxuICAgICAgICB0aGlzLnRtcEJ0VmVjdG9yMy5zZXRWYWx1ZSh2YWx1ZSwgdGhpcy52ZWxvY2l0eS55LCB0aGlzLnZlbG9jaXR5LnopO1xyXG4gICAgICAgIHRoaXMuYW1tby5zZXRMaW5lYXJWZWxvY2l0eSh0aGlzLnRtcEJ0VmVjdG9yMyk7XHJcbiAgICB9XHJcbiAgICBzZXRWZWxvY2l0eVkodmFsdWUpIHtcclxuICAgICAgICB0aGlzLnRtcEJ0VmVjdG9yMy5zZXRWYWx1ZSh0aGlzLnZlbG9jaXR5LngsIHZhbHVlLCB0aGlzLnZlbG9jaXR5LnopO1xyXG4gICAgICAgIHRoaXMuYW1tby5zZXRMaW5lYXJWZWxvY2l0eSh0aGlzLnRtcEJ0VmVjdG9yMyk7XHJcbiAgICB9XHJcbiAgICBzZXRWZWxvY2l0eVoodmFsdWUpIHtcclxuICAgICAgICB0aGlzLnRtcEJ0VmVjdG9yMy5zZXRWYWx1ZSh0aGlzLnZlbG9jaXR5LngsIHRoaXMudmVsb2NpdHkueSwgdmFsdWUpO1xyXG4gICAgICAgIHRoaXMuYW1tby5zZXRMaW5lYXJWZWxvY2l0eSh0aGlzLnRtcEJ0VmVjdG9yMyk7XHJcbiAgICB9XHJcbiAgICBzZXRBbmd1bGFyVmVsb2NpdHkoeCwgeSwgeikge1xyXG4gICAgICAgIHRoaXMudG1wQnRWZWN0b3IzLnNldFZhbHVlKHgsIHksIHopO1xyXG4gICAgICAgIHRoaXMuYW1tby5zZXRBbmd1bGFyVmVsb2NpdHkodGhpcy50bXBCdFZlY3RvcjMpO1xyXG4gICAgfVxyXG4gICAgc2V0QW5ndWxhclZlbG9jaXR5WCh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMudG1wQnRWZWN0b3IzLnNldFZhbHVlKHZhbHVlLCB0aGlzLmFuZ3VsYXJWZWxvY2l0eS55LCB0aGlzLmFuZ3VsYXJWZWxvY2l0eS56KTtcclxuICAgICAgICB0aGlzLmFtbW8uc2V0QW5ndWxhclZlbG9jaXR5KHRoaXMudG1wQnRWZWN0b3IzKTtcclxuICAgIH1cclxuICAgIHNldEFuZ3VsYXJWZWxvY2l0eVkodmFsdWUpIHtcclxuICAgICAgICB0aGlzLnRtcEJ0VmVjdG9yMy5zZXRWYWx1ZSh0aGlzLmFuZ3VsYXJWZWxvY2l0eS54LCB2YWx1ZSwgdGhpcy5hbmd1bGFyVmVsb2NpdHkueik7XHJcbiAgICAgICAgdGhpcy5hbW1vLnNldEFuZ3VsYXJWZWxvY2l0eSh0aGlzLnRtcEJ0VmVjdG9yMyk7XHJcbiAgICB9XHJcbiAgICBzZXRBbmd1bGFyVmVsb2NpdHlaKHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy50bXBCdFZlY3RvcjMuc2V0VmFsdWUodGhpcy5hbmd1bGFyVmVsb2NpdHkueCwgdGhpcy5hbmd1bGFyVmVsb2NpdHkueSwgdmFsdWUpO1xyXG4gICAgICAgIHRoaXMuYW1tby5zZXRBbmd1bGFyVmVsb2NpdHkodGhpcy50bXBCdFZlY3RvcjMpO1xyXG4gICAgfVxyXG4gICAgLy8gQXBwbHkgRm9yY2UgbWV0aG9kc1xyXG4gICAgYXBwbHlGb3JjZSh4LCB5LCB6KSB7XHJcbiAgICAgICAgdGhpcy50bXBCdFZlY3RvcjMuc2V0VmFsdWUoeCwgeSwgeik7XHJcbiAgICAgICAgdGhpcy5hbW1vLmFwcGx5Q2VudHJhbEltcHVsc2UodGhpcy50bXBCdFZlY3RvcjMpO1xyXG4gICAgfVxyXG4gICAgYXBwbHlGb3JjZVgodmFsdWUpIHtcclxuICAgICAgICB0aGlzLnRtcEJ0VmVjdG9yMy5zZXRWYWx1ZSh2YWx1ZSwgMCwgMCk7XHJcbiAgICAgICAgdGhpcy5hbW1vLmFwcGx5Q2VudHJhbEltcHVsc2UodGhpcy50bXBCdFZlY3RvcjMpO1xyXG4gICAgfVxyXG4gICAgYXBwbHlGb3JjZVkodmFsdWUpIHtcclxuICAgICAgICB0aGlzLnRtcEJ0VmVjdG9yMy5zZXRWYWx1ZSgwLCB2YWx1ZSwgMCk7XHJcbiAgICAgICAgdGhpcy5hbW1vLmFwcGx5Q2VudHJhbEltcHVsc2UodGhpcy50bXBCdFZlY3RvcjMpO1xyXG4gICAgfVxyXG4gICAgYXBwbHlGb3JjZVoodmFsdWUpIHtcclxuICAgICAgICB0aGlzLnRtcEJ0VmVjdG9yMy5zZXRWYWx1ZSgwLCAwLCB2YWx1ZSk7XHJcbiAgICAgICAgdGhpcy5hbW1vLmFwcGx5Q2VudHJhbEltcHVsc2UodGhpcy50bXBCdFZlY3RvcjMpO1xyXG4gICAgfVxyXG4gICAgLy8gQXBwbHkgXCJTb21ldGhpbmdcIiBNZXRob2RzXHJcbiAgICBhcHBseUNlbnRyYWxGb3JjZSh4LCB5LCB6KSB7XHJcbiAgICAgICAgdGhpcy50bXBCdFZlY3RvcjMuc2V0VmFsdWUoeCwgeSwgeik7XHJcbiAgICAgICAgdGhpcy5hbW1vLmFwcGx5Q2VudHJhbEZvcmNlKHRoaXMudG1wQnRWZWN0b3IzKTtcclxuICAgIH1cclxuICAgIGFwcGx5Q2VudHJhbEltcHVsc2UoeCwgeSwgeikge1xyXG4gICAgICAgIHRoaXMudG1wQnRWZWN0b3IzLnNldFZhbHVlKHgsIHksIHopO1xyXG4gICAgICAgIHRoaXMuYW1tby5hcHBseUNlbnRyYWxJbXB1bHNlKHRoaXMudG1wQnRWZWN0b3IzKTtcclxuICAgIH1cclxuICAgIGFwcGx5Q2VudHJhbExvY2FsRm9yY2UoeCwgeSwgeikge1xyXG4gICAgICAgIHRoaXMudG1wQnRWZWN0b3IzLnNldFZhbHVlKHgsIHksIHopO1xyXG4gICAgICAgIHRoaXMuYW1tby5hcHBseUNlbnRyYWxMb2NhbEZvcmNlKHRoaXMudG1wQnRWZWN0b3IzKTtcclxuICAgIH1cclxuICAgIGFwcGx5SW1wdWxzZShpbXB1bHNlLCByZWxhdGl2ZVBvc2l0aW9uKSB7XHJcbiAgICAgICAgdGhpcy50bXBCdFZlY3RvcjMuc2V0VmFsdWUoaW1wdWxzZS54IHx8IDAsIGltcHVsc2UueSB8fCAwLCBpbXB1bHNlLnogfHwgMCk7XHJcbiAgICAgICAgdGhpcy50bXBCdFZlY3RvcjNfMS5zZXRWYWx1ZShyZWxhdGl2ZVBvc2l0aW9uLnggfHwgMCwgcmVsYXRpdmVQb3NpdGlvbi55IHx8IDAsIHJlbGF0aXZlUG9zaXRpb24ueiB8fCAwKTtcclxuICAgICAgICB0aGlzLmFtbW8uYXBwbHlJbXB1bHNlKHRoaXMudG1wQnRWZWN0b3IzLCB0aGlzLnRtcEJ0VmVjdG9yM18xKTtcclxuICAgIH1cclxuICAgIGFwcGx5TG9jYWxUb3JxdWUoeCwgeSwgeikge1xyXG4gICAgICAgIHRoaXMudG1wQnRWZWN0b3IzLnNldFZhbHVlKHgsIHksIHopO1xyXG4gICAgICAgIHRoaXMuYW1tby5hcHBseUxvY2FsVG9ycXVlKHRoaXMudG1wQnRWZWN0b3IzKTtcclxuICAgIH1cclxuICAgIGFwcGx5VG9ycXVlKHgsIHksIHopIHtcclxuICAgICAgICB0aGlzLnRtcEJ0VmVjdG9yMy5zZXRWYWx1ZSh4LCB5LCB6KTtcclxuICAgICAgICB0aGlzLmFtbW8uYXBwbHlUb3JxdWUodGhpcy50bXBCdFZlY3RvcjMpO1xyXG4gICAgfVxyXG4gICAgYXBwbHlUb3JxdWVJbXB1bHNlKHgsIHksIHopIHtcclxuICAgICAgICB0aGlzLnRtcEJ0VmVjdG9yMy5zZXRWYWx1ZSh4LCB5LCB6KTtcclxuICAgICAgICB0aGlzLmFtbW8uYXBwbHlUb3JxdWVJbXB1bHNlKHRoaXMudG1wQnRWZWN0b3IzKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQWRkIHRoZSBjb2xsaXNpb24gZmxhZ3NcclxuICAgICAqIEBwYXJhbSB2YWx1ZSAwIGlzIERZTkFNSUMsIDEgaXMgU1RBVElDLCAyIGlzIEtJTkVNQVRJQywgNCBHSE9TVFxyXG4gICAgICovXHJcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vYnVsbGV0cGh5c2ljcy9idWxsZXQzL2Jsb2IvYWFlODA0ODcyMmYyNTk2ZjdlMmJkZDUyZDJhMWRjYjUyYTIxOGYyYi9zcmMvQnVsbGV0Q29sbGlzaW9uL0NvbGxpc2lvbkRpc3BhdGNoL2J0Q29sbGlzaW9uT2JqZWN0LmgjTDEyOFxyXG4gICAgc2V0Q29sbGlzaW9uRmxhZ3ModmFsdWUpIHtcclxuICAgICAgICB0aGlzLmFtbW8uc2V0Q29sbGlzaW9uRmxhZ3ModmFsdWUpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgdGhlIGNvbGxpc2lvbiBmbGFnc1xyXG4gICAgICogQHBhcmFtIHZhbHVlIDAgaXMgRFlOQU1JQywgMSBpcyBTVEFUSUMsIDIgaXMgS0lORU1BVElDLCA0IEdIT1NUXHJcbiAgICAgKi9cclxuICAgIGdldENvbGxpc2lvbkZsYWdzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFtbW8uZ2V0Q29sbGlzaW9uRmxhZ3MoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogU2V0IHRoZSByZXN0aXR1dGlvbiAoc2FtZSBhcyBib3VuY2luZXNzKVxyXG4gICAgICogQHBhcmFtIHZhbHVlIEEgbnVtYmVyIGZyb20gMCB0byAxLlxyXG4gICAgICovXHJcbiAgICBzZXRSZXN0aXR1dGlvbih2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuYW1tby5zZXRSZXN0aXR1dGlvbih2YWx1ZSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFNldCB0aGUgYm91bmNpbmVzcyAoc2FtZSBhcyByZXN0aXR1dGlvbilcclxuICAgICAqIEBwYXJhbSB2YWx1ZSBBIG51bWJlciBmcm9tIDAgdG8gMS5cclxuICAgICAqL1xyXG4gICAgc2V0Qm91bmNpbmVzcyh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuc2V0UmVzdGl0dXRpb24odmFsdWUpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgdGhlIGZyaWN0aW9uXHJcbiAgICAgKiBAcGFyYW0gdmFsdWUgQSBudW1iZXIgZnJvbSAwIHRvIDEuXHJcbiAgICAgKi9cclxuICAgIHNldEZyaWN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5hbW1vLnNldEZyaWN0aW9uKHZhbHVlKTtcclxuICAgIH1cclxuICAgIC8qKiBTZXQgcGVyIGJvZHkgZ3Jhdml0eSAqL1xyXG4gICAgc2V0R3Jhdml0eSh4LCB5LCB6KSB7XHJcbiAgICAgICAgdGhpcy50bXBCdFZlY3RvcjMuc2V0VmFsdWUoeCwgeSwgeik7XHJcbiAgICAgICAgdGhpcy5hbW1vLnNldEdyYXZpdHkodGhpcy50bXBCdFZlY3RvcjMpO1xyXG4gICAgfVxyXG4gICAgc2V0TGluZWFyRmFjdG9yKHgsIHksIHopIHtcclxuICAgICAgICB0aGlzLnRtcEJ0VmVjdG9yMy5zZXRWYWx1ZSh4LCB5LCB6KTtcclxuICAgICAgICB0aGlzLmFtbW8uc2V0TGluZWFyRmFjdG9yKHRoaXMudG1wQnRWZWN0b3IzKTtcclxuICAgIH1cclxuICAgIHNldEFuZ3VsYXJGYWN0b3IoeCwgeSwgeikge1xyXG4gICAgICAgIHRoaXMudG1wQnRWZWN0b3IzLnNldFZhbHVlKHgsIHksIHopO1xyXG4gICAgICAgIHRoaXMuYW1tby5zZXRBbmd1bGFyRmFjdG9yKHRoaXMudG1wQnRWZWN0b3IzKTtcclxuICAgIH1cclxuICAgIHNldENjZE1vdGlvblRocmVzaG9sZCh0aHJlc2hvbGQpIHtcclxuICAgICAgICB0aGlzLmFtbW8uc2V0Q2NkTW90aW9uVGhyZXNob2xkKHRocmVzaG9sZCk7XHJcbiAgICB9XHJcbiAgICBzZXRDY2RTd2VwdFNwaGVyZVJhZGl1cyhyYWRpdXMpIHtcclxuICAgICAgICB0aGlzLmFtbW8uc2V0Q2NkU3dlcHRTcGhlcmVSYWRpdXMocmFkaXVzKTtcclxuICAgIH1cclxufVxyXG5leHBvcnRzLmRlZmF1bHQgPSBQaHlzaWNzQm9keTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGh5c2ljc0JvZHkuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5QaHlzaWNzTG9hZGVyID0gdm9pZCAwO1xyXG5jb25zdCB3YXNtTG9hZGVyXzEgPSByZXF1aXJlKFwiLi93YXNtTG9hZGVyXCIpO1xyXG5jb25zdCBQaHlzaWNzTG9hZGVyID0gKHBhdGgsIGNhbGxiYWNrKSA9PiB7XHJcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpXHJcbiAgICAgICAgd2luZG93Ll9fbG9hZFBoeXNpY3MgPSB0cnVlO1xyXG4gICAgd2FzbUxvYWRlcl8xLmRlZmF1bHQocGF0aCwgKCkgPT4ge1xyXG4gICAgICAgIEFtbW8oKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgY2FsbGJhY2soKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59O1xyXG5leHBvcnRzLlBoeXNpY3NMb2FkZXIgPSBQaHlzaWNzTG9hZGVyO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1waHlzaWNzTG9hZGVyLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xyXG4vKipcclxuICogQGF1dGhvciAgICAgICBZYW5uaWNrIERldWJlbCAoaHR0cHM6Ly9naXRodWIuY29tL3lhbmRldSlcclxuICogQGNvcHlyaWdodCAgICBDb3B5cmlnaHQgKGMpIDIwMjAgWWFubmljayBEZXViZWw7IFByb2plY3QgVXJsOiBodHRwczovL2dpdGh1Yi5jb20vZW5hYmxlM2QvZW5hYmxlM2RcclxuICogQGxpY2Vuc2UgICAgICB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2VuYWJsZTNkL2VuYWJsZTNkL2Jsb2IvbWFzdGVyL0xJQ0VOU0V8R05VIEdQTHYzfVxyXG4gKi9cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLkdyb3VwID0gZXhwb3J0cy5Qb2ludHMgPSBleHBvcnRzLkxpbmUgPSBleHBvcnRzLk1hdGVyaWFsID0gZXhwb3J0cy5NZXNoID0gZXhwb3J0cy5PYmplY3QzRCA9IGV4cG9ydHMuQW5pbWF0aW9uQWN0aW9uID0gZXhwb3J0cy5BbmltYXRpb25DbGlwID0gZXhwb3J0cy5BbmltYXRpb25NaXhlciA9IGV4cG9ydHMuRXh0ZW5kZWRNZXNoID0gZXhwb3J0cy5FeHRlbmRlZE9iamVjdDNEID0gdm9pZCAwO1xyXG5jb25zdCBleHRlbmRlZE9iamVjdDNEXzEgPSByZXF1aXJlKFwiLi9leHRlbmRlZE9iamVjdDNEXCIpO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJFeHRlbmRlZE9iamVjdDNEXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBleHRlbmRlZE9iamVjdDNEXzEuRXh0ZW5kZWRPYmplY3QzRDsgfSB9KTtcclxuY29uc3QgZXh0ZW5kZWRNZXNoXzEgPSByZXF1aXJlKFwiLi9leHRlbmRlZE1lc2hcIik7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkV4dGVuZGVkTWVzaFwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZXh0ZW5kZWRNZXNoXzEuRXh0ZW5kZWRNZXNoOyB9IH0pO1xyXG4vLyBUT0RPIGZpeCB0aGlzIGV4cG9ydFxyXG4vLyBleHBvcnQgeyBUaGlyZFBlcnNvbkNvbnRyb2xzIH0gZnJvbSAnLi4vbWlzYy90aGlyZFBlcnNvbkNvbnRyb2xzJ1xyXG52YXIgaW5kZXhfMSA9IHJlcXVpcmUoXCJAZW5hYmxlM2QvdGhyZWUtd3JhcHBlci9kaXN0L2luZGV4XCIpO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJBbmltYXRpb25NaXhlclwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gaW5kZXhfMS5BbmltYXRpb25NaXhlcjsgfSB9KTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiQW5pbWF0aW9uQ2xpcFwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gaW5kZXhfMS5BbmltYXRpb25DbGlwOyB9IH0pO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJBbmltYXRpb25BY3Rpb25cIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGluZGV4XzEuQW5pbWF0aW9uQWN0aW9uOyB9IH0pO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJPYmplY3QzRFwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gaW5kZXhfMS5PYmplY3QzRDsgfSB9KTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiTWVzaFwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gaW5kZXhfMS5NZXNoOyB9IH0pO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJNYXRlcmlhbFwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gaW5kZXhfMS5NYXRlcmlhbDsgfSB9KTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiTGluZVwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gaW5kZXhfMS5MaW5lOyB9IH0pO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJQb2ludHNcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGluZGV4XzEuUG9pbnRzOyB9IH0pO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJHcm91cFwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gaW5kZXhfMS5Hcm91cDsgfSB9KTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dHlwZXMuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXR5cGVzQW1tby5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dHlwZXNDdXN0b20uanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuLy8gSW5zcGlyZWQgYnkgaHR0cHM6Ly9naXRodWIuY29tL3BsYXljYW52YXMvZW5naW5lL2Jsb2IvbWFzdGVyL2V4YW1wbGVzL3dhc20tbG9hZGVyLmpzXHJcbmNvbnN0IHdhc21TdXBwb3J0ZWQgPSAoKCkgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBpZiAodHlwZW9mIFdlYkFzc2VtYmx5ID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgV2ViQXNzZW1ibHkuaW5zdGFudGlhdGUgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgY29uc3QgbW9kdWxlID0gbmV3IFdlYkFzc2VtYmx5Lk1vZHVsZShVaW50OEFycmF5Lm9mKDB4MCwgMHg2MSwgMHg3MywgMHg2ZCwgMHgwMSwgMHgwMCwgMHgwMCwgMHgwMCkpO1xyXG4gICAgICAgICAgICBpZiAobW9kdWxlIGluc3RhbmNlb2YgV2ViQXNzZW1ibHkuTW9kdWxlKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBXZWJBc3NlbWJseS5JbnN0YW5jZShtb2R1bGUpIGluc3RhbmNlb2YgV2ViQXNzZW1ibHkuSW5zdGFuY2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHsgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59KSgpO1xyXG5jb25zdCBsb2FkU2NyaXB0QXN5bmMgPSAodXJsLCBkb25lQ2FsbGJhY2spID0+IHtcclxuICAgIHZhciB0YWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcclxuICAgIHRhZy5vbmxvYWQgPSAoKSA9PiB7XHJcbiAgICAgICAgZG9uZUNhbGxiYWNrKCk7XHJcbiAgICB9O1xyXG4gICAgdGFnLm9uZXJyb3IgPSAoKSA9PiB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdmYWlsZWQgdG8gbG9hZCAnICsgdXJsKTtcclxuICAgIH07XHJcbiAgICB0YWcuYXN5bmMgPSB0cnVlO1xyXG4gICAgdGFnLnNyYyA9IHVybDtcclxuICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQodGFnKTtcclxufTtcclxuY29uc3QgbG9hZEFtbW9Nb2R1bGUgPSAocGF0aCwgZG9uZUNhbGxiYWNrKSA9PiB7XHJcbiAgICAvLyBjb25zb2xlLmxvZyh3YXNtU3VwcG9ydGVkID8gJ1dlYkFzc2VtYmx5IGlzIHN1cHBvcnRlZCcgOiAnV2ViQXNzZW1ibHkgaXMgbm90IHN1cHBvcnRlZCcpXHJcbiAgICBpZiAod2FzbVN1cHBvcnRlZClcclxuICAgICAgICBsb2FkU2NyaXB0QXN5bmMoYCR7cGF0aH0vYW1tby53YXNtLmpzYCwgKCkgPT4gZG9uZUNhbGxiYWNrKCkpO1xyXG4gICAgZWxzZVxyXG4gICAgICAgIGxvYWRTY3JpcHRBc3luYyhgJHtwYXRofS9hbW1vLmpzYCwgKCkgPT4gZG9uZUNhbGxiYWNrKCkpO1xyXG59O1xyXG5leHBvcnRzLmRlZmF1bHQgPSBsb2FkQW1tb01vZHVsZTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9d2FzbUxvYWRlci5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcclxuLyoqXHJcbiAqIEBhdXRob3IgICAgICAgWWFubmljayBEZXViZWwgKGh0dHBzOi8vZ2l0aHViLmNvbS95YW5kZXUpXHJcbiAqIEBjb3B5cmlnaHQgICAgQ29weXJpZ2h0IChjKSAyMDIwIFlhbm5pY2sgRGV1YmVsOyBQcm9qZWN0IFVybDogaHR0cHM6Ly9naXRodWIuY29tL2VuYWJsZTNkL2VuYWJsZTNkXHJcbiAqIEBsaWNlbnNlICAgICAge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9lbmFibGUzZC9lbmFibGUzZC9ibG9iL21hc3Rlci9MSUNFTlNFfEdOVSBHUEx2M31cclxuICovXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5UaHJlZUdyYXBoaWNzID0gdm9pZCAwO1xyXG5jb25zdCBUSFJFRSA9IHJlcXVpcmUoXCJAZW5hYmxlM2QvdGhyZWUtd3JhcHBlci9kaXN0L2luZGV4XCIpO1xyXG5jb25zdCBjYW1lcmFzXzEgPSByZXF1aXJlKFwiLi9wbHVnaW5zL2NhbWVyYXNcIik7XHJcbmNvbnN0IGluZGV4XzEgPSByZXF1aXJlKFwiQGVuYWJsZTNkL2FtbW8tcGh5c2ljcy9kaXN0L2luZGV4XCIpO1xyXG5jbGFzcyBUaHJlZUdyYXBoaWNzIHtcclxuICAgIGNvbnN0cnVjdG9yKHRocmVlR3JhcGhpY3NDb25maWcgPSB7fSkge1xyXG4gICAgICAgIHRoaXMudGhyZWVHcmFwaGljc0NvbmZpZyA9IHRocmVlR3JhcGhpY3NDb25maWc7XHJcbiAgICAgICAgY29uc3QgeyBhbmlzb3Ryb3B5ID0gMSwgY2FtZXJhID0gY2FtZXJhc18xLmRlZmF1bHQuUGVyc3BlY3RpdmUoeyB6OiAyNSwgeTogNSB9KSwgYW50aWFsaWFzID0gZmFsc2UsIHVzZVBoeXNpY3MgPSB0cnVlLCByZW5kZXJlciB9ID0gdGhyZWVHcmFwaGljc0NvbmZpZztcclxuICAgICAgICB0aGlzLnRleHR1cmVBbmlzb3Ryb3B5ID0gYW5pc290cm9weTtcclxuICAgICAgICB0aGlzLmNhbWVyYSA9IGNhbWVyYTtcclxuICAgICAgICB0aGlzLnNjZW5lID0gbmV3IFRIUkVFLlNjZW5lKCk7XHJcbiAgICAgICAgLy8gdGhpcy5yZW5kZXJlci5waHlzaWNhbGx5Q29ycmVjdExpZ2h0cyA9IHRydWVcclxuICAgICAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXIgfHwgbmV3IFRIUkVFLldlYkdMUmVuZGVyZXIoeyBhbnRpYWxpYXMgfSk7XHJcbiAgICAgICAgLy8gc2VlIGh0dHBzOi8vdGhyZWVqcy5vcmcvZG9jcy8jZXhhbXBsZXMvZW4vbG9hZGVycy9HTFRGTG9hZGVyXHJcbiAgICAgICAgLy8gdGhpcy5yZW5kZXJlci5vdXRwdXRFbmNvZGluZyA9IHNSR0JFbmNvZGluZ1xyXG4gICAgICAgIC8vIHNoYWRvd1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIuc2hhZG93TWFwLmVuYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIuc2hhZG93TWFwLnR5cGUgPSBUSFJFRS5QQ0ZTb2Z0U2hhZG93TWFwO1xyXG4gICAgICAgIC8vIGVuYWJsZSBjYWNoZVxyXG4gICAgICAgIHRoaXMuY2FjaGUgPSBUSFJFRS5DYWNoZTtcclxuICAgICAgICB0aGlzLmNhY2hlLmVuYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgIGlmICh1c2VQaHlzaWNzKSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgQW1tbyAhPT0gJ3VuZGVmaW5lZCcpXHJcbiAgICAgICAgICAgICAgICB0aGlzLnBoeXNpY3MgPSBuZXcgaW5kZXhfMS5BbW1vUGh5c2ljcyh0aGlzLnNjZW5lLCB0aHJlZUdyYXBoaWNzQ29uZmlnKTtcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tlbmFibGUzZF06IEFyZSB5b3Ugc3VyZSB5b3UgaW5jbHVkZWQgYW1tby5qcz8nKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0cy5UaHJlZUdyYXBoaWNzID0gVGhyZWVHcmFwaGljcztcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29yZS5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLk1hdGhVdGlscyA9IGV4cG9ydHMuVmVjdG9yMyA9IGV4cG9ydHMuVmVjdG9yMiA9IGV4cG9ydHMuT2JqZWN0M0QgPSBleHBvcnRzLkZCWExvYWRlciA9IGV4cG9ydHMuR0xURkxvYWRlciA9IGV4cG9ydHMuUkdCQUZvcm1hdCA9IGV4cG9ydHMuVGV4dHVyZSA9IGV4cG9ydHMuV2ViR0xSZW5kZXJlciA9IGV4cG9ydHMuVHlwZXMgPSBleHBvcnRzLlRIUkVFID0gZXhwb3J0cy5QaHlzaWNzTG9hZGVyID0gZXhwb3J0cy5UaHJlZUdyYXBoaWNzID0gdm9pZCAwO1xyXG5jb25zdCBjb3JlXzEgPSByZXF1aXJlKFwiLi9jb3JlXCIpO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJUaHJlZUdyYXBoaWNzXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBjb3JlXzEuVGhyZWVHcmFwaGljczsgfSB9KTtcclxuY29uc3QgcGh5c2ljc0xvYWRlcl8xID0gcmVxdWlyZShcIkBlbmFibGUzZC9jb21tb24vZGlzdC9waHlzaWNzTG9hZGVyXCIpO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJQaHlzaWNzTG9hZGVyXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBwaHlzaWNzTG9hZGVyXzEuUGh5c2ljc0xvYWRlcjsgfSB9KTtcclxuY29uc3QgVEhSRUUgPSByZXF1aXJlKFwiQGVuYWJsZTNkL3RocmVlLXdyYXBwZXIvZGlzdC9pbmRleFwiKTtcclxuZXhwb3J0cy5USFJFRSA9IFRIUkVFO1xyXG5jb25zdCBUeXBlcyA9IHJlcXVpcmUoXCJAZW5hYmxlM2QvY29tbW9uL2Rpc3QvdHlwZXNcIik7XHJcbmV4cG9ydHMuVHlwZXMgPSBUeXBlcztcclxuY29uc3QgdmVyc2lvbl8xID0gcmVxdWlyZShcIi4vdmVyc2lvblwiKTtcclxudmFyIGluZGV4XzEgPSByZXF1aXJlKFwiQGVuYWJsZTNkL3RocmVlLXdyYXBwZXIvZGlzdC9pbmRleFwiKTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiV2ViR0xSZW5kZXJlclwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gaW5kZXhfMS5XZWJHTFJlbmRlcmVyOyB9IH0pO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJUZXh0dXJlXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBpbmRleF8xLlRleHR1cmU7IH0gfSk7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIlJHQkFGb3JtYXRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGluZGV4XzEuUkdCQUZvcm1hdDsgfSB9KTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiR0xURkxvYWRlclwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gaW5kZXhfMS5HTFRGTG9hZGVyOyB9IH0pO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJGQlhMb2FkZXJcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGluZGV4XzEuRkJYTG9hZGVyOyB9IH0pO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJPYmplY3QzRFwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gaW5kZXhfMS5PYmplY3QzRDsgfSB9KTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiVmVjdG9yMlwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gaW5kZXhfMS5WZWN0b3IyOyB9IH0pO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJWZWN0b3IzXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBpbmRleF8xLlZlY3RvcjM7IH0gfSk7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIk1hdGhVdGlsc1wiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gaW5kZXhfMS5NYXRoVXRpbHM7IH0gfSk7XHJcbmNvbnN0IGluZm8gPSBgUG93ZXJlZCBieSBlbmFibGUzZCB2JHt2ZXJzaW9uXzEuVkVSU0lPTn1gO1xyXG5jb25zb2xlLmxvZyhgJWMgJWMgJWMgJWMgJWMgJHtpbmZvfSAlYyBodHRwczovL2VuYWJsZTNkLmlvL2AsICdiYWNrZ3JvdW5kOiAjZmYwMDAwJywgJ2JhY2tncm91bmQ6ICNmZmZmMDAnLCAnYmFja2dyb3VuZDogIzAwZmYwMCcsICdiYWNrZ3JvdW5kOiAjMDBmZmZmJywgJ2NvbG9yOiAjZmZmOyBiYWNrZ3JvdW5kOiAjMDAwMDAwOycsICdiYWNrZ3JvdW5kOiBub25lJyk7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xyXG4vKipcclxuICogQGF1dGhvciAgICAgICBZYW5uaWNrIERldWJlbCAoaHR0cHM6Ly9naXRodWIuY29tL3lhbmRldSlcclxuICogQGNvcHlyaWdodCAgICBDb3B5cmlnaHQgKGMpIDIwMjAgWWFubmljayBEZXViZWw7IFByb2plY3QgVXJsOiBodHRwczovL2dpdGh1Yi5jb20vZW5hYmxlM2QvZW5hYmxlM2RcclxuICogQGxpY2Vuc2UgICAgICB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2VuYWJsZTNkL2VuYWJsZTNkL2Jsb2IvbWFzdGVyL0xJQ0VOU0V8R05VIEdQTHYzfVxyXG4gKi9cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5jb25zdCBpbmRleF8xID0gcmVxdWlyZShcIkBlbmFibGUzZC90aHJlZS13cmFwcGVyL2Rpc3QvaW5kZXhcIik7XHJcbmNsYXNzIENhbWVyYXMge1xyXG4gICAgcGVyc3BlY3RpdmVDYW1lcmEoY29uZmlnID0ge30pIHtcclxuICAgICAgICByZXR1cm4gQ2FtZXJhcy5QZXJzcGVjdGl2ZShjb25maWcpO1xyXG4gICAgfVxyXG4gICAgb3J0aG9ncmFwaGljQ2FtZXJhKGNvbmZpZyA9IHt9KSB7XHJcbiAgICAgICAgcmV0dXJuIENhbWVyYXMuT3J0aG9ncmFwaGljKGNvbmZpZyk7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgUGVyc3BlY3RpdmUoY29uZmlnID0ge30pIHtcclxuICAgICAgICAvLyBmb3IgcGhhc2VyXHJcbiAgICAgICAgLy8gYXNwZWN0ID0gc2NlbmUuc2NhbGUuZ2FtZVNpemUuYXNwZWN0UmF0aW9cclxuICAgICAgICBjb25zdCB7IGZvdiA9IDUwLCBhc3BlY3QgPSB3aW5kb3cuaW5uZXJXaWR0aCAvIHdpbmRvdy5pbm5lckhlaWdodCwgbmVhciA9IDAuMSwgZmFyID0gMjAwMCwgeCA9IDAsIHkgPSAwLCB6ID0gMCB9ID0gY29uZmlnO1xyXG4gICAgICAgIGNvbnN0IGNhbWVyYSA9IG5ldyBpbmRleF8xLlBlcnNwZWN0aXZlQ2FtZXJhKGZvdiwgYXNwZWN0LCBuZWFyLCBmYXIpO1xyXG4gICAgICAgIGNhbWVyYS5wb3NpdGlvbi5zZXQoeCwgeSwgeik7XHJcbiAgICAgICAgcmV0dXJuIGNhbWVyYTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBPcnRob2dyYXBoaWMoY29uZmlnID0ge30pIHtcclxuICAgICAgICAvLyBmb3IgcGhhc2VyXHJcbiAgICAgICAgLy8gY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSBzY2VuZS5jYW1lcmFzLm1haW5cclxuICAgICAgICBjb25zdCB3aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xyXG4gICAgICAgIGNvbnN0IGhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcclxuICAgICAgICBjb25zdCB7IGxlZnQgPSB3aWR0aCAvIC0xMDAsIHJpZ2h0ID0gd2lkdGggLyAxMDAsIHRvcCA9IGhlaWdodCAvIDEwMCwgYm90dG9tID0gaGVpZ2h0IC8gLTEwMCwgbmVhciA9IDEsIGZhciA9IDEwMDAsIHggPSAwLCB5ID0gMCwgeiA9IDAgfSA9IGNvbmZpZztcclxuICAgICAgICBjb25zdCBjYW1lcmEgPSBuZXcgaW5kZXhfMS5PcnRob2dyYXBoaWNDYW1lcmEobGVmdCwgcmlnaHQsIHRvcCwgYm90dG9tLCBuZWFyLCBmYXIpO1xyXG4gICAgICAgIGNhbWVyYS5wb3NpdGlvbi5zZXQoeCwgeSwgeik7XHJcbiAgICAgICAgcmV0dXJuIGNhbWVyYTtcclxuICAgIH1cclxufVxyXG5leHBvcnRzLmRlZmF1bHQgPSBDYW1lcmFzO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1jYW1lcmFzLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xyXG4vKipcclxuICogQGF1dGhvciAgICAgICBZYW5uaWNrIERldWJlbCAoaHR0cHM6Ly9naXRodWIuY29tL3lhbmRldSlcclxuICogQGNvcHlyaWdodCAgICBDb3B5cmlnaHQgKGMpIDIwMjAgWWFubmljayBEZXViZWw7IFByb2plY3QgVXJsOiBodHRwczovL2dpdGh1Yi5jb20vZW5hYmxlM2QvZW5hYmxlM2RcclxuICogQGxpY2Vuc2UgICAgICB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2VuYWJsZTNkL2VuYWJsZTNkL2Jsb2IvbWFzdGVyL0xJQ0VOU0V8R05VIEdQTHYzfVxyXG4gKi9cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG4vLyBPcmlnaW5hbGx5IGNvcGllZCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9IaS1MZXZlbC90aHJlZS1jc2dcclxuLy8gd2hpY2ggaXMgYSB0eXBlc2NyaXB0IHJld3JpdGUgb2YgaHR0cHM6Ly9naXRodWIuY29tL21hbnRocmF4L1RIUkVFLUNTR01lc2hcclxuLy8gd2hpY2ggYXMgb3JpZ2luYWxseSB3cml0dGVuIGJ5IENvcHlyaWdodCAoYykgMjAxMSBFdmFuIFdhbGxhY2UgKGh0dHA6Ly9tYWRlYnlldmFuLmNvbS8pLCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXHJcbmNvbnN0IGluZGV4XzEgPSByZXF1aXJlKFwiQGVuYWJsZTNkL3RocmVlLXdyYXBwZXIvZGlzdC9pbmRleFwiKTtcclxuLyoqXHJcbiAqIENTRyB3cmFwcGVyIGZvciBlbmFibGUzZFxyXG4gKlxyXG4gKiBUaGUgQ1NHIGxpYnJhcnkgZG9lcyBub3Qgc3VwcG9ydCBidWZmZXIgZ2VvbWV0cmllcy5cclxuICogTWVhbnMgd2UgZmlyc3QgbWFrZSBzdXJlIHdlIGFyZSBkZWFsaW5nIHdpdGggZ2VvbWV0cmllc1xyXG4gKiBhbmQgdGhlbiB0cmFuc2Zvcm0gdGhlbSBiYWNrIHRvIGJ1ZmZlciBnZW9tZXRyaWVzLlxyXG4gKi9cclxuY2xhc3MgQ1NHV3JhcHBlciB7XHJcbiAgICBjb25zdHJ1Y3RvcihzY2VuZSwgdHJhbnNmb3JtKSB7XHJcbiAgICAgICAgdGhpcy5zY2VuZSA9IHNjZW5lO1xyXG4gICAgICAgIHRoaXMudHJhbnNmb3JtID0gdHJhbnNmb3JtO1xyXG4gICAgfVxyXG4gICAgdG9HZW9tZXRyeShtZXNoQSwgbWVzaEIpIHtcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgbWVzaEEuZ2VvbWV0cnkgPSB0aGlzLnRyYW5zZm9ybS5idWZmZXJHZW9tZXRyeVRvR2VvbWV0cnkobWVzaEEuZ2VvbWV0cnkpO1xyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICBtZXNoQi5nZW9tZXRyeSA9IHRoaXMudHJhbnNmb3JtLmJ1ZmZlckdlb21ldHJ5VG9HZW9tZXRyeShtZXNoQi5nZW9tZXRyeSk7XHJcbiAgICB9XHJcbiAgICB0b0J1ZmZlckdlb21ldHJ5KG1lc2hDKSB7XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIG1lc2hDLmdlb21ldHJ5ID0gdGhpcy50cmFuc2Zvcm0uZ2VvbWV0cnlUb0J1ZmZlckdlb21ldHJ5KG1lc2hDLmdlb21ldHJ5KTtcclxuICAgIH1cclxuICAgIHVuaW9uKG1lc2hBLCBtZXNoQikge1xyXG4gICAgICAgIHRoaXMudG9HZW9tZXRyeShtZXNoQSwgbWVzaEIpO1xyXG4gICAgICAgIGNvbnN0IG1lc2hDID0gdGhpcy5kb0NTRyhtZXNoQSwgbWVzaEIsICd1bmlvbicpO1xyXG4gICAgICAgIHRoaXMudG9CdWZmZXJHZW9tZXRyeShtZXNoQyk7XHJcbiAgICAgICAgcmV0dXJuIG1lc2hDO1xyXG4gICAgfVxyXG4gICAgc3VidHJhY3QobWVzaEEsIG1lc2hCKSB7XHJcbiAgICAgICAgdGhpcy50b0dlb21ldHJ5KG1lc2hBLCBtZXNoQik7XHJcbiAgICAgICAgY29uc3QgbWVzaEMgPSB0aGlzLmRvQ1NHKG1lc2hBLCBtZXNoQiwgJ3N1YnRyYWN0Jyk7XHJcbiAgICAgICAgdGhpcy50b0J1ZmZlckdlb21ldHJ5KG1lc2hDKTtcclxuICAgICAgICByZXR1cm4gbWVzaEM7XHJcbiAgICB9XHJcbiAgICBpbnRlcnNlY3QobWVzaEEsIG1lc2hCKSB7XHJcbiAgICAgICAgdGhpcy50b0dlb21ldHJ5KG1lc2hBLCBtZXNoQik7XHJcbiAgICAgICAgY29uc3QgbWVzaEMgPSB0aGlzLmRvQ1NHKG1lc2hBLCBtZXNoQiwgJ2ludGVyc2VjdCcpO1xyXG4gICAgICAgIHRoaXMudG9CdWZmZXJHZW9tZXRyeShtZXNoQyk7XHJcbiAgICAgICAgcmV0dXJuIG1lc2hDO1xyXG4gICAgfVxyXG4gICAgZG9DU0cobWVzaEEsIG1lc2hCLCBvcGVyYXRpb24pIHtcclxuICAgICAgICBtZXNoQS51cGRhdGVNYXRyaXgoKTtcclxuICAgICAgICBtZXNoQi51cGRhdGVNYXRyaXgoKTtcclxuICAgICAgICBjb25zdCBic3BBID0gQ1NHLmZyb21NZXNoKG1lc2hBKTtcclxuICAgICAgICBjb25zdCBic3BCID0gQ1NHLmZyb21NZXNoKG1lc2hCKTtcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgY29uc3QgYnNwQyA9IGJzcEFbb3BlcmF0aW9uXShic3BCKTtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBDU0cudG9NZXNoKGJzcEMsIG1lc2hBLm1hdHJpeCk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxufVxyXG5leHBvcnRzLmRlZmF1bHQgPSBDU0dXcmFwcGVyO1xyXG4vKipcclxuICogQ1NHIChDb25zdHJ1Y3RpdmUgU29saWQgR2VvbWV0cnkpIGxpYnJhcnkgZm9yIHRocmVlLmpzIHdpdGggVHlwZXNjcmlwdCBzdXBwb3J0LlxyXG4gKiBIb2xkcyBhIGJpbmFyeSBzcGFjZSBwYXJ0aXRpb24gdHJlZSByZXByZXNlbnRpbmcgYSAzRCBzb2xpZC4gVHdvIHNvbGlkcyBjYW5cclxuICogYmUgY29tYmluZWQgdXNpbmcgdGhlIGB1bmlvbigpYCwgYHN1YnRyYWN0KClgLCBhbmQgYGludGVyc2VjdCgpYCBtZXRob2RzLlxyXG4gKi9cclxuY2xhc3MgQ1NHIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMucG9seWdvbnMgPSBbXTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBmcm9tUG9seWdvbnMocG9seWdvbnMpIHtcclxuICAgICAgICBjb25zdCBjc2cgPSBuZXcgQ1NHKCk7XHJcbiAgICAgICAgY3NnLnBvbHlnb25zID0gcG9seWdvbnM7XHJcbiAgICAgICAgcmV0dXJuIGNzZztcclxuICAgIH1cclxuICAgIHN0YXRpYyBmcm9tR2VvbWV0cnkoZ2VvbSkge1xyXG4gICAgICAgIGlmIChnZW9tLmlzQnVmZmVyR2VvbWV0cnkpIHtcclxuICAgICAgICAgICAgZ2VvbSA9IG5ldyBpbmRleF8xLkdlb21ldHJ5KCkuZnJvbUJ1ZmZlckdlb21ldHJ5KGdlb20pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBmcyA9IGdlb20uZmFjZXM7XHJcbiAgICAgICAgY29uc3QgdnMgPSBnZW9tLnZlcnRpY2VzO1xyXG4gICAgICAgIGNvbnN0IHBvbHlzID0gW107XHJcbiAgICAgICAgY29uc3QgZm0gPSBbJ2EnLCAnYicsICdjJ107XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBmID0gZnNbaV07XHJcbiAgICAgICAgICAgIGNvbnN0IHZlcnRpY2VzID0gW107XHJcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgMzsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB1dnMgPSBnZW9tLmZhY2VWZXJ0ZXhVdnNbMF1baV0gIT09IHVuZGVmaW5lZCAmJiBnZW9tLmZhY2VWZXJ0ZXhVdnNbMF1baV1bal0gIT09IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICAgICAgICAgID8gZ2VvbS5mYWNlVmVydGV4VXZzWzBdW2ldW2pdXHJcbiAgICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICB2ZXJ0aWNlcy5wdXNoKG5ldyBWZXJ0ZXgodnNbZltmbVtqXV1dLCBmLnZlcnRleE5vcm1hbHNbal0sIHV2cykpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHBvbHlzLnB1c2gobmV3IFBvbHlnb24odmVydGljZXMpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIENTRy5mcm9tUG9seWdvbnMocG9seXMpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGZyb21NZXNoKG1lc2gpIHtcclxuICAgICAgICBjb25zdCBjc2cgPSBDU0cuZnJvbUdlb21ldHJ5KG1lc2guZ2VvbWV0cnkpO1xyXG4gICAgICAgIENTRy5fdG1wbTMuZ2V0Tm9ybWFsTWF0cml4KG1lc2gubWF0cml4KTtcclxuICAgICAgICBmb3IgKGNvbnN0IHAgb2YgY3NnLnBvbHlnb25zKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgdiBvZiBwLnZlcnRpY2VzKSB7XHJcbiAgICAgICAgICAgICAgICB2LnBvcy5hcHBseU1hdHJpeDQobWVzaC5tYXRyaXgpO1xyXG4gICAgICAgICAgICAgICAgdi5ub3JtYWwuYXBwbHlNYXRyaXgzKENTRy5fdG1wbTMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjc2c7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgdG9NZXNoKGNzZywgdG9NYXRyaXgpIHtcclxuICAgICAgICBjb25zdCBnZW9tID0gbmV3IGluZGV4XzEuR2VvbWV0cnkoKTtcclxuICAgICAgICBjb25zdCBwcyA9IGNzZy5wb2x5Z29ucztcclxuICAgICAgICBjb25zdCB2cyA9IGdlb20udmVydGljZXM7XHJcbiAgICAgICAgY29uc3QgZnZ1diA9IGdlb20uZmFjZVZlcnRleFV2c1swXTtcclxuICAgICAgICBmb3IgKGNvbnN0IHAgb2YgcHMpIHtcclxuICAgICAgICAgICAgY29uc3QgcHZzID0gcC52ZXJ0aWNlcztcclxuICAgICAgICAgICAgY29uc3QgdjAgPSB2cy5sZW5ndGg7XHJcbiAgICAgICAgICAgIGNvbnN0IHB2bGVuID0gcHZzLmxlbmd0aDtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBwdiBvZiBwdnMpIHtcclxuICAgICAgICAgICAgICAgIHZzLnB1c2gobmV3IGluZGV4XzEuVmVjdG9yMygpLmNvcHkocHYucG9zKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDM7IGogPD0gcHZsZW47IGorKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZmMgPSBuZXcgaW5kZXhfMS5GYWNlMyh2MCwgdjAgKyBqIC0gMiwgdjAgKyBqIC0gMSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBmdXYgPSBbXTtcclxuICAgICAgICAgICAgICAgIGZ2dXYucHVzaChmdXYpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZm5tbCA9IGZjLnZlcnRleE5vcm1hbHM7XHJcbiAgICAgICAgICAgICAgICBmbm1sLnB1c2gobmV3IGluZGV4XzEuVmVjdG9yMygpLmNvcHkocHZzWzBdLm5vcm1hbCkpO1xyXG4gICAgICAgICAgICAgICAgZm5tbC5wdXNoKG5ldyBpbmRleF8xLlZlY3RvcjMoKS5jb3B5KHB2c1tqIC0gMl0ubm9ybWFsKSk7XHJcbiAgICAgICAgICAgICAgICBmbm1sLnB1c2gobmV3IGluZGV4XzEuVmVjdG9yMygpLmNvcHkocHZzW2ogLSAxXS5ub3JtYWwpKTtcclxuICAgICAgICAgICAgICAgIC8vIGNoZWNrIGZvciB1diBwcm9wZXJ0eVxyXG4gICAgICAgICAgICAgICAgaWYgKHB2c1swXS51diAmJiBwdnNbaiAtIDJdLnV2ICYmIHB2c1tqIC0gMV0udXYpIHtcclxuICAgICAgICAgICAgICAgICAgICBmdXYucHVzaChuZXcgaW5kZXhfMS5WZWN0b3IzKCkuY29weShwdnNbMF0udXYpKTtcclxuICAgICAgICAgICAgICAgICAgICBmdXYucHVzaChuZXcgaW5kZXhfMS5WZWN0b3IzKCkuY29weShwdnNbaiAtIDJdLnV2KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZnV2LnB1c2gobmV3IGluZGV4XzEuVmVjdG9yMygpLmNvcHkocHZzW2ogLSAxXS51dikpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZmMubm9ybWFsID0gbmV3IGluZGV4XzEuVmVjdG9yMygpLmNvcHkocC5wbGFuZS5ub3JtYWwpO1xyXG4gICAgICAgICAgICAgICAgZ2VvbS5mYWNlcy5wdXNoKGZjKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBjb21wYXRpYmlsaXR5IGZpeCBmb3IgdGhyZWUuanMgPj0gcjEyMyAoRGV6ZW1iZXIgMjAyMClcclxuICAgICAgICBjb25zdCBpbnYgPSBcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgK2luZGV4XzEuUkVWSVNJT04gPj0gMTIzID8gbmV3IGluZGV4XzEuTWF0cml4NCgpLmNvcHkodG9NYXRyaXgpLmludmVydCgpIDogbmV3IGluZGV4XzEuTWF0cml4NCgpLmdldEludmVyc2UodG9NYXRyaXgpO1xyXG4gICAgICAgIGdlb20uYXBwbHlNYXRyaXg0KGludik7XHJcbiAgICAgICAgZ2VvbS52ZXJ0aWNlc05lZWRVcGRhdGUgPSBnZW9tLmVsZW1lbnRzTmVlZFVwZGF0ZSA9IGdlb20ubm9ybWFsc05lZWRVcGRhdGUgPSB0cnVlO1xyXG4gICAgICAgIGdlb20uY29tcHV0ZUJvdW5kaW5nU3BoZXJlKCk7XHJcbiAgICAgICAgZ2VvbS5jb21wdXRlQm91bmRpbmdCb3goKTtcclxuICAgICAgICBjb25zdCBtID0gbmV3IGluZGV4XzEuTWVzaChnZW9tKTtcclxuICAgICAgICBtLm1hdHJpeC5jb3B5KHRvTWF0cml4KTtcclxuICAgICAgICBtLm1hdHJpeC5kZWNvbXBvc2UobS5wb3NpdGlvbiwgbS5yb3RhdGlvbiwgbS5zY2FsZSk7XHJcbiAgICAgICAgbS51cGRhdGVNYXRyaXhXb3JsZCgpO1xyXG4gICAgICAgIHJldHVybiBtO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGlFdmFsKHRva2VucywgX2luZGV4ID0gMCkge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICBpZiAodHlwZW9mIHRva2VucyA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgQ1NHLmN1cnJlbnRPcCA9IHRva2VucztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodG9rZW5zIGluc3RhbmNlb2YgQXJyYXkpIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCB0b2tlbiBvZiB0b2tlbnMpIHtcclxuICAgICAgICAgICAgICAgIENTRy5pRXZhbCh0b2tlbiwgMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIHRva2VucyA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgICAgY29uc3Qgb3AgPSBDU0cuY3VycmVudE9wO1xyXG4gICAgICAgICAgICB0b2tlbnMudXBkYXRlTWF0cml4KCk7XHJcbiAgICAgICAgICAgIHRva2Vucy51cGRhdGVNYXRyaXhXb3JsZCgpO1xyXG4gICAgICAgICAgICBpZiAoIUNTRy5zb3VyY2VNZXNoKSB7XHJcbiAgICAgICAgICAgICAgICBDU0cuY3VycmVudFByaW0gPSBDU0cuZnJvbU1lc2goKENTRy5zb3VyY2VNZXNoID0gdG9rZW5zKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBDU0cubmV4dFByaW0gPSBDU0cuZnJvbU1lc2godG9rZW5zKTtcclxuICAgICAgICAgICAgICAgIENTRy5jdXJyZW50UHJpbSA9IENTRy5jdXJyZW50UHJpbVtvcF0oQ1NHLm5leHRQcmltKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoQ1NHLmRvUmVtb3ZlKVxyXG4gICAgICAgICAgICAgICAgKF9hID0gdG9rZW5zID09PSBudWxsIHx8IHRva2VucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogdG9rZW5zLnBhcmVudCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnJlbW92ZSh0b2tlbnMpO1xyXG4gICAgICAgIH0gLy8gdW5pb24sc3VidHJhY3QsaW50ZXJzZWN0LGludmVyc2VcclxuICAgIH1cclxuICAgIHN0YXRpYyBldmFsKHRva2VucywgZG9SZW1vdmUpIHtcclxuICAgICAgICAvLyBbWydhZGQnLG1lc2gsbWVzaCxtZXNoLG1lc2hdLFsnc3ViJyxtZXNoLG1lc2gsbWVzaCxtZXNoXV1cclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgZGVsZXRlIENTRy5jdXJyZW50T3A7XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIGRlbGV0ZSBDU0cuc291cmNlTWVzaDtcclxuICAgICAgICBDU0cuZG9SZW1vdmUgPSBkb1JlbW92ZTtcclxuICAgICAgICBDU0cuaUV2YWwodG9rZW5zKTtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBDU0cudG9NZXNoKENTRy5jdXJyZW50UHJpbSwgQ1NHLnNvdXJjZU1lc2gubWF0cml4KTtcclxuICAgICAgICByZXN1bHQubWF0ZXJpYWwgPSBDU0cuc291cmNlTWVzaC5tYXRlcmlhbDtcclxuICAgICAgICByZXN1bHQuY2FzdFNoYWRvdyA9IHJlc3VsdC5yZWNlaXZlU2hhZG93ID0gdHJ1ZTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG4gICAgY2xvbmUoKSB7XHJcbiAgICAgICAgY29uc3QgY3NnID0gbmV3IENTRygpO1xyXG4gICAgICAgIGNzZy5wb2x5Z29ucyA9IHRoaXMucG9seWdvbnMubWFwKHAgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gcC5jbG9uZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBjc2c7XHJcbiAgICB9XHJcbiAgICB0b1BvbHlnb25zKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBvbHlnb25zO1xyXG4gICAgfVxyXG4gICAgdW5pb24oY3NnKSB7XHJcbiAgICAgICAgY29uc3QgYSA9IG5ldyBOb2RlKHRoaXMuY2xvbmUoKS5wb2x5Z29ucyk7XHJcbiAgICAgICAgY29uc3QgYiA9IG5ldyBOb2RlKGNzZy5jbG9uZSgpLnBvbHlnb25zKTtcclxuICAgICAgICBhLmNsaXBUbyhiKTtcclxuICAgICAgICBiLmNsaXBUbyhhKTtcclxuICAgICAgICBiLmludmVydCgpO1xyXG4gICAgICAgIGIuY2xpcFRvKGEpO1xyXG4gICAgICAgIGIuaW52ZXJ0KCk7XHJcbiAgICAgICAgYS5idWlsZChiLmFsbFBvbHlnb25zKCkpO1xyXG4gICAgICAgIHJldHVybiBDU0cuZnJvbVBvbHlnb25zKGEuYWxsUG9seWdvbnMoKSk7XHJcbiAgICB9XHJcbiAgICBzdWJ0cmFjdChjc2cpIHtcclxuICAgICAgICBjb25zdCBhID0gbmV3IE5vZGUodGhpcy5jbG9uZSgpLnBvbHlnb25zKTtcclxuICAgICAgICBjb25zdCBiID0gbmV3IE5vZGUoY3NnLmNsb25lKCkucG9seWdvbnMpO1xyXG4gICAgICAgIGEuaW52ZXJ0KCk7XHJcbiAgICAgICAgYS5jbGlwVG8oYik7XHJcbiAgICAgICAgYi5jbGlwVG8oYSk7XHJcbiAgICAgICAgYi5pbnZlcnQoKTtcclxuICAgICAgICBiLmNsaXBUbyhhKTtcclxuICAgICAgICBiLmludmVydCgpO1xyXG4gICAgICAgIGEuYnVpbGQoYi5hbGxQb2x5Z29ucygpKTtcclxuICAgICAgICBhLmludmVydCgpO1xyXG4gICAgICAgIHJldHVybiBDU0cuZnJvbVBvbHlnb25zKGEuYWxsUG9seWdvbnMoKSk7XHJcbiAgICB9XHJcbiAgICBpbnRlcnNlY3QoY3NnKSB7XHJcbiAgICAgICAgY29uc3QgYSA9IG5ldyBOb2RlKHRoaXMuY2xvbmUoKS5wb2x5Z29ucyk7XHJcbiAgICAgICAgY29uc3QgYiA9IG5ldyBOb2RlKGNzZy5jbG9uZSgpLnBvbHlnb25zKTtcclxuICAgICAgICBhLmludmVydCgpO1xyXG4gICAgICAgIGIuY2xpcFRvKGEpO1xyXG4gICAgICAgIGIuaW52ZXJ0KCk7XHJcbiAgICAgICAgYS5jbGlwVG8oYik7XHJcbiAgICAgICAgYi5jbGlwVG8oYSk7XHJcbiAgICAgICAgYS5idWlsZChiLmFsbFBvbHlnb25zKCkpO1xyXG4gICAgICAgIGEuaW52ZXJ0KCk7XHJcbiAgICAgICAgcmV0dXJuIENTRy5mcm9tUG9seWdvbnMoYS5hbGxQb2x5Z29ucygpKTtcclxuICAgIH1cclxuICAgIGludmVyc2UoKSB7XHJcbiAgICAgICAgY29uc3QgY3NnID0gdGhpcy5jbG9uZSgpO1xyXG4gICAgICAgIGNzZy5wb2x5Z29ucy5tYXAocCA9PiB7XHJcbiAgICAgICAgICAgIHAuZmxpcCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBjc2c7XHJcbiAgICB9XHJcbn1cclxuQ1NHLl90bXBtMyA9IG5ldyBpbmRleF8xLk1hdHJpeDMoKTtcclxuLyoqXHJcbiAqIFJlcHJlc2VudHMgYSAzRCB2ZWN0b3IuXHJcbiAqL1xyXG5jbGFzcyBWZWN0b3IgZXh0ZW5kcyBpbmRleF8xLlZlY3RvcjMge1xyXG4gICAgY29uc3RydWN0b3IoeCwgeSwgeikge1xyXG4gICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAzKSB7XHJcbiAgICAgICAgICAgIHN1cGVyKHgsIHksIHopO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KHgpKSB7XHJcbiAgICAgICAgICAgIHN1cGVyKHhbMF0sIHhbMV0sIHhbMl0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgeCA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICB0aGlzLmNvcHkoeCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgY29uc3RydWN0b3IgdG8gdmVjdG9yJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY2xvbmUoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IodGhpcy54LCB0aGlzLnksIHRoaXMueik7XHJcbiAgICB9XHJcbiAgICBuZWdhdGVkKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNsb25lKCkubXVsdGlwbHlTY2FsYXIoLTEpO1xyXG4gICAgfVxyXG4gICAgcGx1cyhhKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY2xvbmUoKS5hZGQoYSk7XHJcbiAgICB9XHJcbiAgICBtaW51cyhhKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY2xvbmUoKS5zdWIoYSk7XHJcbiAgICB9XHJcbiAgICB0aW1lcyhhKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY2xvbmUoKS5tdWx0aXBseVNjYWxhcihhKTtcclxuICAgIH1cclxuICAgIGRpdmlkZWRCeShhKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY2xvbmUoKS5kaXZpZGVTY2FsYXIoYSk7XHJcbiAgICB9XHJcbiAgICBsZXJwKGEsIHQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wbHVzKGEubWludXModGhpcykudGltZXModCkpO1xyXG4gICAgfVxyXG4gICAgdW5pdCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kaXZpZGVkQnkodGhpcy5sZW5ndGgoKSk7XHJcbiAgICB9XHJcbiAgICAvLyBAdHMtaWdub3JlXHJcbiAgICBjcm9zcyhhLCB3KSB7XHJcbiAgICAgICAgcmV0dXJuIGluZGV4XzEuVmVjdG9yMy5wcm90b3R5cGUuY3Jvc3MuY2FsbCh0aGlzLmNsb25lKCksIGEpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBSZXByZXNlbnRzIGEgdmVydGV4IG9mIGEgcG9seWdvbi4gVXNlIHlvdXIgb3duIHZlcnRleCBjbGFzcyBpbnN0ZWFkIG9mIHRoaXNcclxuICogb25lIHRvIHByb3ZpZGUgYWRkaXRpb25hbCBmZWF0dXJlcyBsaWtlIHRleHR1cmUgY29vcmRpbmF0ZXMgYW5kIHZlcnRleFxyXG4gKiBjb2xvcnMuIEN1c3RvbSB2ZXJ0ZXggY2xhc3NlcyBuZWVkIHRvIHByb3ZpZGUgYSBgcG9zYCBwcm9wZXJ0eSBhbmQgYGNsb25lKClgLFxyXG4gKiBgZmxpcCgpYCwgYW5kIGBpbnRlcnBvbGF0ZSgpYCBtZXRob2RzIHRoYXQgYmVoYXZlIGFuYWxvZ291cyB0byB0aGUgb25lc1xyXG4gKiBkZWZpbmVkIGJ5IGBDU0cuVmVydGV4YC4gVGhpcyBjbGFzcyBwcm92aWRlcyBgbm9ybWFsYCBzbyBjb252ZW5pZW5jZVxyXG4gKiBmdW5jdGlvbnMgbGlrZSBgQ1NHLnNwaGVyZSgpYCBjYW4gcmV0dXJuIGEgc21vb3RoIHZlcnRleCBub3JtYWwsIGJ1dCBgbm9ybWFsYFxyXG4gKiBpcyBub3QgdXNlZCBhbnl3aGVyZSBlbHNlLlxyXG4gKi9cclxuY2xhc3MgVmVydGV4IHtcclxuICAgIGNvbnN0cnVjdG9yKHBvcywgbm9ybWFsLCB1dikge1xyXG4gICAgICAgIHRoaXMucG9zID0gbmV3IFZlY3Rvcihwb3MueCwgcG9zLnksIHBvcy56KTtcclxuICAgICAgICB0aGlzLm5vcm1hbCA9IG5ldyBWZWN0b3Iobm9ybWFsLngsIG5vcm1hbC55LCBub3JtYWwueik7XHJcbiAgICAgICAgaWYgKHV2KVxyXG4gICAgICAgICAgICB0aGlzLnV2ID0gbmV3IFZlY3Rvcih1di54LCB1di55LCB1di56KTtcclxuICAgIH1cclxuICAgIGNsb25lKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgVmVydGV4KHRoaXMucG9zLmNsb25lKCksIHRoaXMubm9ybWFsLmNsb25lKCksIHRoaXMudXYgPyB0aGlzLnV2LmNsb25lKCkgOiB1bmRlZmluZWQpO1xyXG4gICAgfVxyXG4gICAgLy8gSW52ZXJ0IGFsbCBvcmllbnRhdGlvbi1zcGVjaWZpYyBkYXRhIChlLmcuIHZlcnRleCBub3JtYWwpLiBDYWxsZWQgd2hlbiB0aGVcclxuICAgIC8vIG9yaWVudGF0aW9uIG9mIGEgcG9seWdvbiBpcyBmbGlwcGVkLlxyXG4gICAgZmxpcCgpIHtcclxuICAgICAgICB0aGlzLm5vcm1hbCA9IHRoaXMubm9ybWFsLm5lZ2F0ZWQoKTtcclxuICAgIH1cclxuICAgIC8vIENyZWF0ZSBhIG5ldyB2ZXJ0ZXggYmV0d2VlbiB0aGlzIHZlcnRleCBhbmQgYG90aGVyYCBieSBsaW5lYXJseVxyXG4gICAgLy8gaW50ZXJwb2xhdGluZyBhbGwgcHJvcGVydGllcyB1c2luZyBhIHBhcmFtZXRlciBvZiBgdGAuIFN1YmNsYXNzZXMgc2hvdWxkXHJcbiAgICAvLyBvdmVycmlkZSB0aGlzIHRvIGludGVycG9sYXRlIGFkZGl0aW9uYWwgcHJvcGVydGllcy5cclxuICAgIGludGVycG9sYXRlKG90aGVyLCB0KSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBWZXJ0ZXgodGhpcy5wb3MubGVycChvdGhlci5wb3MsIHQpLCB0aGlzLm5vcm1hbC5sZXJwKG90aGVyLm5vcm1hbCwgdCksIHRoaXMudXYgPyB0aGlzLnV2LmxlcnAob3RoZXIudXYsIHQpIDogdW5kZWZpbmVkKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogUmVwcmVzZW50cyBhIHBsYW5lIGluIDNEIHNwYWNlLlxyXG4gKi9cclxuY2xhc3MgUGxhbmUge1xyXG4gICAgY29uc3RydWN0b3Iobm9ybWFsLCB3KSB7XHJcbiAgICAgICAgdGhpcy5ub3JtYWwgPSBub3JtYWw7XHJcbiAgICAgICAgdGhpcy53ID0gdztcclxuICAgIH1cclxuICAgIHN0YXRpYyBmcm9tUG9pbnRzKGEsIGIsIGMpIHtcclxuICAgICAgICBjb25zdCBuID0gYlxyXG4gICAgICAgICAgICAubWludXMoYSlcclxuICAgICAgICAgICAgLmNyb3NzKGMubWludXMoYSkpXHJcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgLnVuaXQoKTtcclxuICAgICAgICByZXR1cm4gbmV3IFBsYW5lKG4sIG4uZG90KGEpKTtcclxuICAgIH1cclxuICAgIGNsb25lKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUGxhbmUodGhpcy5ub3JtYWwuY2xvbmUoKSwgdGhpcy53KTtcclxuICAgIH1cclxuICAgIGZsaXAoKSB7XHJcbiAgICAgICAgdGhpcy5ub3JtYWwgPSB0aGlzLm5vcm1hbC5uZWdhdGVkKCk7XHJcbiAgICAgICAgdGhpcy53ID0gLXRoaXMudztcclxuICAgIH1cclxuICAgIC8vIFNwbGl0IGBwb2x5Z29uYCBieSB0aGlzIHBsYW5lIGlmIG5lZWRlZCwgdGhlbiBwdXQgdGhlIHBvbHlnb24gb3IgcG9seWdvblxyXG4gICAgLy8gZnJhZ21lbnRzIGluIHRoZSBhcHByb3ByaWF0ZSBsaXN0cy4gQ29wbGFuYXIgcG9seWdvbnMgZ28gaW50byBlaXRoZXJcclxuICAgIC8vIGBjb3BsYW5hckZyb250YCBvciBgY29wbGFuYXJCYWNrYCBkZXBlbmRpbmcgb24gdGhlaXIgb3JpZW50YXRpb24gd2l0aFxyXG4gICAgLy8gcmVzcGVjdCB0byB0aGlzIHBsYW5lLiBQb2x5Z29ucyBpbiBmcm9udCBvciBpbiBiYWNrIG9mIHRoaXMgcGxhbmUgZ28gaW50b1xyXG4gICAgLy8gZWl0aGVyIGBmcm9udGAgb3IgYGJhY2tgLlxyXG4gICAgc3BsaXRQb2x5Z29uKHBvbHlnb24sIGNvcGxhbmFyRnJvbnQsIGNvcGxhbmFyQmFjaywgZnJvbnQsIGJhY2spIHtcclxuICAgICAgICBjb25zdCBDT1BMQU5BUiA9IDA7XHJcbiAgICAgICAgY29uc3QgRlJPTlQgPSAxO1xyXG4gICAgICAgIGNvbnN0IEJBQ0sgPSAyO1xyXG4gICAgICAgIGNvbnN0IFNQQU5OSU5HID0gMztcclxuICAgICAgICAvLyBDbGFzc2lmeSBlYWNoIHBvaW50IGFzIHdlbGwgYXMgdGhlIGVudGlyZSBwb2x5Z29uIGludG8gb25lIG9mIHRoZSBhYm92ZVxyXG4gICAgICAgIC8vIGZvdXIgY2xhc3Nlcy5cclxuICAgICAgICBsZXQgcG9seWdvblR5cGUgPSAwO1xyXG4gICAgICAgIGNvbnN0IHR5cGVzID0gW107XHJcbiAgICAgICAgZm9yIChjb25zdCB2ZXJ0ZXggb2YgcG9seWdvbi52ZXJ0aWNlcykge1xyXG4gICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5ub3JtYWwuZG90KHZlcnRleC5wb3MpIC0gdGhpcy53O1xyXG4gICAgICAgICAgICBjb25zdCB0eXBlID0gdCA8IC1QbGFuZS5FUFNJTE9OID8gQkFDSyA6IHQgPiBQbGFuZS5FUFNJTE9OID8gRlJPTlQgOiBDT1BMQU5BUjtcclxuICAgICAgICAgICAgcG9seWdvblR5cGUgfD0gdHlwZTtcclxuICAgICAgICAgICAgdHlwZXMucHVzaCh0eXBlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gUHV0IHRoZSBwb2x5Z29uIGluIHRoZSBjb3JyZWN0IGxpc3QsIHNwbGl0dGluZyBpdCB3aGVuIG5lY2Vzc2FyeS5cclxuICAgICAgICBzd2l0Y2ggKHBvbHlnb25UeXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgQ09QTEFOQVI6XHJcbiAgICAgICAgICAgICAgICA7XHJcbiAgICAgICAgICAgICAgICAodGhpcy5ub3JtYWwuZG90KHBvbHlnb24ucGxhbmUubm9ybWFsKSA+IDAgPyBjb3BsYW5hckZyb250IDogY29wbGFuYXJCYWNrKS5wdXNoKHBvbHlnb24pO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgRlJPTlQ6XHJcbiAgICAgICAgICAgICAgICBmcm9udC5wdXNoKHBvbHlnb24pO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgQkFDSzpcclxuICAgICAgICAgICAgICAgIGJhY2sucHVzaChwb2x5Z29uKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFNQQU5OSU5HOlxyXG4gICAgICAgICAgICAgICAgY29uc3QgZiA9IFtdO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYiA9IFtdO1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwb2x5Z29uLnZlcnRpY2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaiA9IChpICsgMSkgJSBwb2x5Z29uLnZlcnRpY2VzLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0aSA9IHR5cGVzW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRqID0gdHlwZXNbal07XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmkgPSBwb2x5Z29uLnZlcnRpY2VzW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZqID0gcG9seWdvbi52ZXJ0aWNlc1tqXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGkgIT09IEJBQ0spIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZi5wdXNoKHZpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRpICE9PSBGUk9OVCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiLnB1c2godGkgIT09IEJBQ0sgPyB2aS5jbG9uZSgpIDogdmkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoKHRpIHwgdGopID09PSBTUEFOTklORykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gKHRoaXMudyAtIHRoaXMubm9ybWFsLmRvdCh2aS5wb3MpKSAvIHRoaXMubm9ybWFsLmRvdCh2ai5wb3MubWludXModmkucG9zKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHYgPSB2aS5pbnRlcnBvbGF0ZSh2aiwgdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGYucHVzaCh2KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYi5wdXNoKHYuY2xvbmUoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGYubGVuZ3RoID49IDMpIHtcclxuICAgICAgICAgICAgICAgICAgICBmcm9udC5wdXNoKG5ldyBQb2x5Z29uKGYsIHBvbHlnb24uc2hhcmVkKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoYi5sZW5ndGggPj0gMykge1xyXG4gICAgICAgICAgICAgICAgICAgIGJhY2sucHVzaChuZXcgUG9seWdvbihiLCBwb2x5Z29uLnNoYXJlZCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbi8vIHRoZSB0b2xlcmFuY2UgdXNlZCBieSBgc3BsaXRQb2x5Z29uKClgIHRvIGRlY2lkZSBpZiBhXHJcbi8vIHBvaW50IGlzIG9uIHRoZSBwbGFuZS5cclxuUGxhbmUuRVBTSUxPTiA9IDFlLTU7XHJcbi8qKlxyXG4gKiBSZXByZXNlbnRzIGEgY29udmV4IHBvbHlnb24uIFRoZSB2ZXJ0aWNlcyB1c2VkIHRvIGluaXRpYWxpemUgYSBwb2x5Z29uIG11c3RcclxuICogYmUgY29wbGFuYXIgYW5kIGZvcm0gYSBjb252ZXggbG9vcC4gVGhleSBkbyBub3QgaGF2ZSB0byBiZSBgVmVydGV4YFxyXG4gKiBpbnN0YW5jZXMgYnV0IHRoZXkgbXVzdCBiZWhhdmUgc2ltaWxhcmx5IChkdWNrIHR5cGluZyBjYW4gYmUgdXNlZCBmb3JcclxuICogY3VzdG9taXphdGlvbikuXHJcbiAqXHJcbiAqIEVhY2ggY29udmV4IHBvbHlnb24gaGFzIGEgYHNoYXJlZGAgcHJvcGVydHksIHdoaWNoIGlzIHNoYXJlZCBiZXR3ZWVuIGFsbFxyXG4gKiBwb2x5Z29ucyB0aGF0IGFyZSBjbG9uZXMgb2YgZWFjaCBvdGhlciBvciB3ZXJlIHNwbGl0IGZyb20gdGhlIHNhbWUgcG9seWdvbi5cclxuICogVGhpcyBjYW4gYmUgdXNlZCB0byBkZWZpbmUgcGVyLXBvbHlnb24gcHJvcGVydGllcyAoc3VjaCBhcyBzdXJmYWNlIGNvbG9yKS5cclxuICovXHJcbmNsYXNzIFBvbHlnb24ge1xyXG4gICAgY29uc3RydWN0b3IodmVydGljZXMsIHNoYXJlZCA9IG51bGwpIHtcclxuICAgICAgICB0aGlzLnZlcnRpY2VzID0gdmVydGljZXM7XHJcbiAgICAgICAgdGhpcy5zaGFyZWQgPSBzaGFyZWQ7XHJcbiAgICAgICAgdGhpcy5wbGFuZSA9IFBsYW5lLmZyb21Qb2ludHModmVydGljZXNbMF0ucG9zLCB2ZXJ0aWNlc1sxXS5wb3MsIHZlcnRpY2VzWzJdLnBvcyk7XHJcbiAgICB9XHJcbiAgICBjbG9uZSgpIHtcclxuICAgICAgICBjb25zdCB2ZXJ0aWNlcyA9IHRoaXMudmVydGljZXMubWFwKHYgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdi5jbG9uZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBuZXcgUG9seWdvbih2ZXJ0aWNlcywgdGhpcy5zaGFyZWQpO1xyXG4gICAgfVxyXG4gICAgZmxpcCgpIHtcclxuICAgICAgICB0aGlzLnZlcnRpY2VzLnJldmVyc2UoKS5tYXAodiA9PiB7XHJcbiAgICAgICAgICAgIHYuZmxpcCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMucGxhbmUuZmxpcCgpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBIb2xkcyBhIG5vZGUgaW4gYSBCU1AgdHJlZS4gQSBCU1AgdHJlZSBpcyBidWlsdCBmcm9tIGEgY29sbGVjdGlvbiBvZiBwb2x5Z29uc1xyXG4gKiBieSBwaWNraW5nIGEgcG9seWdvbiB0byBzcGxpdCBhbG9uZy4gVGhhdCBwb2x5Z29uIChhbmQgYWxsIG90aGVyIGNvcGxhbmFyXHJcbiAqIHBvbHlnb25zKSBhcmUgYWRkZWQgZGlyZWN0bHkgdG8gdGhhdCBub2RlIGFuZCB0aGUgb3RoZXIgcG9seWdvbnMgYXJlIGFkZGVkIHRvXHJcbiAqIHRoZSBmcm9udCBhbmQvb3IgYmFjayBzdWJ0cmVlcy4gVGhpcyBpcyBub3QgYSBsZWFmeSBCU1AgdHJlZSBzaW5jZSB0aGVyZSBpc1xyXG4gKiBubyBkaXN0aW5jdGlvbiBiZXR3ZWVuIGludGVybmFsIGFuZCBsZWFmIG5vZGVzLlxyXG4gKi9cclxuY2xhc3MgTm9kZSB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb2x5Z29ucykge1xyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICBkZWxldGUgdGhpcy5wbGFuZTtcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgZGVsZXRlIHRoaXMuZnJvbnQ7XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIGRlbGV0ZSB0aGlzLmJhY2s7XHJcbiAgICAgICAgdGhpcy5wb2x5Z29ucyA9IFtdO1xyXG4gICAgICAgIGlmIChwb2x5Z29ucykge1xyXG4gICAgICAgICAgICB0aGlzLmJ1aWxkKHBvbHlnb25zKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjbG9uZSgpIHtcclxuICAgICAgICBjb25zdCBub2RlID0gbmV3IE5vZGUoKTtcclxuICAgICAgICBub2RlLnBsYW5lID0gdGhpcy5wbGFuZSAmJiB0aGlzLnBsYW5lLmNsb25lKCk7XHJcbiAgICAgICAgbm9kZS5mcm9udCA9IHRoaXMuZnJvbnQgJiYgdGhpcy5mcm9udC5jbG9uZSgpO1xyXG4gICAgICAgIG5vZGUuYmFjayA9IHRoaXMuYmFjayAmJiB0aGlzLmJhY2suY2xvbmUoKTtcclxuICAgICAgICBub2RlLnBvbHlnb25zID0gdGhpcy5wb2x5Z29ucy5tYXAocCA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBwLmNsb25lKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIG5vZGU7XHJcbiAgICB9XHJcbiAgICAvLyBDb252ZXJ0IHNvbGlkIHNwYWNlIHRvIGVtcHR5IHNwYWNlIGFuZCBlbXB0eSBzcGFjZSB0byBzb2xpZCBzcGFjZS5cclxuICAgIGludmVydCgpIHtcclxuICAgICAgICBmb3IgKGNvbnN0IHBvbHlnb24gb2YgdGhpcy5wb2x5Z29ucykge1xyXG4gICAgICAgICAgICBwb2x5Z29uLmZsaXAoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5wbGFuZS5mbGlwKCk7XHJcbiAgICAgICAgaWYgKHRoaXMuZnJvbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5mcm9udC5pbnZlcnQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuYmFjaykge1xyXG4gICAgICAgICAgICB0aGlzLmJhY2suaW52ZXJ0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHRlbXAgPSB0aGlzLmZyb250O1xyXG4gICAgICAgIHRoaXMuZnJvbnQgPSB0aGlzLmJhY2s7XHJcbiAgICAgICAgdGhpcy5iYWNrID0gdGVtcDtcclxuICAgIH1cclxuICAgIC8vIFJlY3Vyc2l2ZWx5IHJlbW92ZSBhbGwgcG9seWdvbnMgaW4gYHBvbHlnb25zYCB0aGF0IGFyZSBpbnNpZGUgdGhpcyBCU1BcclxuICAgIC8vIHRyZWUuXHJcbiAgICBjbGlwUG9seWdvbnMocG9seWdvbnMpIHtcclxuICAgICAgICBpZiAoIXRoaXMucGxhbmUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHBvbHlnb25zLnNsaWNlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBmcm9udCA9IFtdO1xyXG4gICAgICAgIGxldCBiYWNrID0gW107XHJcbiAgICAgICAgZm9yIChjb25zdCBwb2x5Z29uIG9mIHBvbHlnb25zKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGxhbmUuc3BsaXRQb2x5Z29uKHBvbHlnb24sIGZyb250LCBiYWNrLCBmcm9udCwgYmFjayk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmZyb250KSB7XHJcbiAgICAgICAgICAgIGZyb250ID0gdGhpcy5mcm9udC5jbGlwUG9seWdvbnMoZnJvbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBiYWNrID0gdGhpcy5iYWNrID8gdGhpcy5iYWNrLmNsaXBQb2x5Z29ucyhiYWNrKSA6IFtdO1xyXG4gICAgICAgIHJldHVybiBmcm9udC5jb25jYXQoYmFjayk7XHJcbiAgICB9XHJcbiAgICAvLyBSZW1vdmUgYWxsIHBvbHlnb25zIGluIHRoaXMgQlNQIHRyZWUgdGhhdCBhcmUgaW5zaWRlIHRoZSBvdGhlciBCU1AgdHJlZVxyXG4gICAgLy8gYGJzcGAuXHJcbiAgICBjbGlwVG8oYnNwKSB7XHJcbiAgICAgICAgdGhpcy5wb2x5Z29ucyA9IGJzcC5jbGlwUG9seWdvbnModGhpcy5wb2x5Z29ucyk7XHJcbiAgICAgICAgaWYgKHRoaXMuZnJvbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5mcm9udC5jbGlwVG8oYnNwKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuYmFjaykge1xyXG4gICAgICAgICAgICB0aGlzLmJhY2suY2xpcFRvKGJzcCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gUmV0dXJuIGEgbGlzdCBvZiBhbGwgcG9seWdvbnMgaW4gdGhpcyBCU1AgdHJlZS5cclxuICAgIGFsbFBvbHlnb25zKCkge1xyXG4gICAgICAgIGxldCBwb2x5Z29ucyA9IHRoaXMucG9seWdvbnMuc2xpY2UoKTtcclxuICAgICAgICBpZiAodGhpcy5mcm9udCkge1xyXG4gICAgICAgICAgICBwb2x5Z29ucyA9IHBvbHlnb25zLmNvbmNhdCh0aGlzLmZyb250LmFsbFBvbHlnb25zKCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5iYWNrKSB7XHJcbiAgICAgICAgICAgIHBvbHlnb25zID0gcG9seWdvbnMuY29uY2F0KHRoaXMuYmFjay5hbGxQb2x5Z29ucygpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHBvbHlnb25zO1xyXG4gICAgfVxyXG4gICAgLy8gQnVpbGQgYSBCU1AgdHJlZSBvdXQgb2YgYHBvbHlnb25zYC4gV2hlbiBjYWxsZWQgb24gYW4gZXhpc3RpbmcgdHJlZSwgdGhlXHJcbiAgICAvLyBuZXcgcG9seWdvbnMgYXJlIGZpbHRlcmVkIGRvd24gdG8gdGhlIGJvdHRvbSBvZiB0aGUgdHJlZSBhbmQgYmVjb21lIG5ld1xyXG4gICAgLy8gbm9kZXMgdGhlcmUuIEVhY2ggc2V0IG9mIHBvbHlnb25zIGlzIHBhcnRpdGlvbmVkIHVzaW5nIHRoZSBmaXJzdCBwb2x5Z29uXHJcbiAgICAvLyAobm8gaGV1cmlzdGljIGlzIHVzZWQgdG8gcGljayBhIGdvb2Qgc3BsaXQpLlxyXG4gICAgYnVpbGQocG9seWdvbnMpIHtcclxuICAgICAgICBpZiAoIXBvbHlnb25zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghdGhpcy5wbGFuZSkge1xyXG4gICAgICAgICAgICB0aGlzLnBsYW5lID0gcG9seWdvbnNbMF0ucGxhbmUuY2xvbmUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgZnJvbnQgPSBbXTtcclxuICAgICAgICBjb25zdCBiYWNrID0gW107XHJcbiAgICAgICAgZm9yIChjb25zdCBwb2x5Z29uIG9mIHBvbHlnb25zKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGxhbmUuc3BsaXRQb2x5Z29uKHBvbHlnb24sIHRoaXMucG9seWdvbnMsIHRoaXMucG9seWdvbnMsIGZyb250LCBiYWNrKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGZyb250Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuZnJvbnQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZnJvbnQgPSBuZXcgTm9kZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuZnJvbnQuYnVpbGQoZnJvbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYmFjay5sZW5ndGgpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmJhY2spIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYmFjayA9IG5ldyBOb2RlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5iYWNrLmJ1aWxkKGJhY2spO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1jc2cuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuY29uc3QgSGF2ZVNvbWVGdW4gPSAobnVtYmVyT2ZFbGVtZW50cyA9IDIwLCBwaHlzaWNzKSA9PiB7XHJcbiAgICBpZiAoIXdpbmRvdy5fX2xvYWRQaHlzaWNzKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1RoZXJlIGlzIG5vdCBtdWNoIGZ1biB3aXRob3V0IHBoeXNpY3MgZW5hYmxlZCEnKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICAvLyBhZGRpbmcgc29tZSBib3hlcyAod2l0aCBwaHlzaWNzKVxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1iZXJPZkVsZW1lbnRzOyBpKyspIHtcclxuICAgICAgICBjb25zdCBtYXRlcmlhbHMgPSBbJ3N0YW5kYXJkJywgJ2Jhc2ljJywgJ25vcm1hbCcsICdwaG9uZycsICdsaW5lJywgJ3BvaW50cyddO1xyXG4gICAgICAgIGNvbnN0IEJldHdlZW4gPSAobWluLCBtYXgpID0+IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4gKyAxKSArIG1pbik7XHJcbiAgICAgICAgY29uc3QgUmFuZG9tUGljayA9IChhcnJheSkgPT4gYXJyYXlbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogYXJyYXkubGVuZ3RoKV07XHJcbiAgICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPiAwLjUpIHtcclxuICAgICAgICAgICAgcGh5c2ljcy5hZGRcclxuICAgICAgICAgICAgICAgIC5ib3goe1xyXG4gICAgICAgICAgICAgICAgeDogQmV0d2VlbigtMTAsIDEwKSxcclxuICAgICAgICAgICAgICAgIHk6IEJldHdlZW4oMTAsIDIwKSxcclxuICAgICAgICAgICAgICAgIHo6IEJldHdlZW4oLTEwLCAxMCksXHJcbiAgICAgICAgICAgICAgICB3aWR0aDogQmV0d2VlbigxLCAyKSAvIDEwLFxyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiBCZXR3ZWVuKDEsIDIpIC8gMTAsXHJcbiAgICAgICAgICAgICAgICBkZXB0aDogQmV0d2VlbigxLCAyKSAvIDEwLFxyXG4gICAgICAgICAgICAgICAgbWFzczogMVxyXG4gICAgICAgICAgICB9LCB7IFtSYW5kb21QaWNrKG1hdGVyaWFscyldOiB7IGNvbG9yOiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAweGZmZmZmZikgfSB9KVxyXG4gICAgICAgICAgICAgICAgLmJvZHkuc2V0UmVzdGl0dXRpb24oTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApIC8gMjApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcGh5c2ljcy5hZGRcclxuICAgICAgICAgICAgICAgIC5zcGhlcmUoe1xyXG4gICAgICAgICAgICAgICAgeDogQmV0d2VlbigtMTAsIDEwKSxcclxuICAgICAgICAgICAgICAgIHk6IEJldHdlZW4oMTAsIDIwKSxcclxuICAgICAgICAgICAgICAgIHo6IEJldHdlZW4oLTEwLCAxMCksXHJcbiAgICAgICAgICAgICAgICByYWRpdXM6IEJldHdlZW4oMSwgMikgLyAxMCxcclxuICAgICAgICAgICAgICAgIG1hc3M6IDFcclxuICAgICAgICAgICAgfSwgeyBbUmFuZG9tUGljayhtYXRlcmlhbHMpXTogeyBjb2xvcjogTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMHhmZmZmZmYpIH0gfSlcclxuICAgICAgICAgICAgICAgIC5ib2R5LnNldFJlc3RpdHV0aW9uKE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKSAvIDIwKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcbmV4cG9ydHMuZGVmYXVsdCA9IEhhdmVTb21lRnVuO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1oYXZlU29tZUZ1bi5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcclxuLyoqXHJcbiAqIEBhdXRob3IgICAgICAgWWFubmljayBEZXViZWwgKGh0dHBzOi8vZ2l0aHViLmNvbS95YW5kZXUpXHJcbiAqIEBjb3B5cmlnaHQgICAgQ29weXJpZ2h0IChjKSAyMDIwIFlhbm5pY2sgRGV1YmVsOyBQcm9qZWN0IFVybDogaHR0cHM6Ly9naXRodWIuY29tL2VuYWJsZTNkL2VuYWJsZTNkXHJcbiAqIEBsaWNlbnNlICAgICAge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9lbmFibGUzZC9lbmFibGUzZC9ibG9iL21hc3Rlci9MSUNFTlNFfEdOVSBHUEx2M31cclxuICovXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuY29uc3QgaW5kZXhfMSA9IHJlcXVpcmUoXCJAZW5hYmxlM2QvdGhyZWUtd3JhcHBlci9kaXN0L2luZGV4XCIpO1xyXG5jb25zdCB0eXBlc18xID0gcmVxdWlyZShcIkBlbmFibGUzZC9jb21tb24vZGlzdC90eXBlc1wiKTtcclxuY29uc3QgbG9nZ2VyXzEgPSByZXF1aXJlKFwiQGVuYWJsZTNkL2NvbW1vbi9kaXN0L2xvZ2dlclwiKTtcclxuY2xhc3MgSGVpZ2h0TWFwIHtcclxuICAgIGNvbnN0cnVjdG9yKHNjZW5lKSB7XHJcbiAgICAgICAgdGhpcy5zY2VuZSA9IHNjZW5lO1xyXG4gICAgfVxyXG4gICAgYWRkKHRleHR1cmUsIGNvbmZpZyA9IHt9KSB7XHJcbiAgICAgICAgY29uc3QgaGVpZ2h0TWFwID0gdGhpcy5tYWtlKHRleHR1cmUsIGNvbmZpZyk7XHJcbiAgICAgICAgaWYgKGhlaWdodE1hcClcclxuICAgICAgICAgICAgdGhpcy5zY2VuZS5hZGQoaGVpZ2h0TWFwKTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIGxvZ2dlcl8xLmRlZmF1bHQoJ0NvdWxkIG5vdCBtYWtlIGhlaWdodG1hcCcpO1xyXG4gICAgICAgIHJldHVybiBoZWlnaHRNYXA7XHJcbiAgICB9XHJcbiAgICBtYWtlKHRleHR1cmUsIGNvbmZpZyA9IHt9KSB7XHJcbiAgICAgICAgLy8gdmFyIHNwYWNpbmdYID0gM1xyXG4gICAgICAgIC8vIHZhciBzcGFjaW5nWiA9IDNcclxuICAgICAgICAvLyB2YXIgaGVpZ2h0T2Zmc2V0ID0gMlxyXG4gICAgICAgIGNvbnN0IHsgaW1hZ2UgfSA9IHRleHR1cmU7XHJcbiAgICAgICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSBpbWFnZTtcclxuICAgICAgICBjb25zdCB7IGNvbG9yU2NhbGUgfSA9IGNvbmZpZztcclxuICAgICAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcclxuICAgICAgICBjYW52YXMud2lkdGggPSB3aWR0aDtcclxuICAgICAgICBjYW52YXMuaGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xyXG4gICAgICAgIGlmICghY3R4KVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgY3R4LmRyYXdJbWFnZSh0ZXh0dXJlLmltYWdlLCAwLCAwKTtcclxuICAgICAgICBjb25zdCBwaXhlbCA9IGN0eC5nZXRJbWFnZURhdGEoMCwgMCwgd2lkdGgsIGhlaWdodCk7XHJcbiAgICAgICAgLy8gZ2VvbWV0cnlcclxuICAgICAgICBjb25zdCBwbGFuZSA9IG5ldyBpbmRleF8xLlBsYW5lR2VvbWV0cnkoMTAsIDEwLCB3aWR0aCAtIDEsIGhlaWdodCAtIDEpO1xyXG4gICAgICAgIC8vIG1hdGVyaWFsXHJcbiAgICAgICAgbGV0IG1hdGVyaWFsQ29uZmlnID0geyBjb2xvcjogMHhjY2NjY2MsIHNpZGU6IGluZGV4XzEuRG91YmxlU2lkZSB9O1xyXG4gICAgICAgIGlmIChjb2xvclNjYWxlKVxyXG4gICAgICAgICAgICBtYXRlcmlhbENvbmZpZyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgbWF0ZXJpYWxDb25maWcpLCB7IHZlcnRleENvbG9yczogaW5kZXhfMS5GYWNlQ29sb3JzIH0pO1xyXG4gICAgICAgIGNvbnN0IG1hdGVyaWFsID0gbmV3IGluZGV4XzEuTWVzaFBob25nTWF0ZXJpYWwobWF0ZXJpYWxDb25maWcpO1xyXG4gICAgICAgIC8vIG1lc2hcclxuICAgICAgICBjb25zdCBtZXNoID0gbmV3IHR5cGVzXzEuRXh0ZW5kZWRNZXNoKHBsYW5lLCBtYXRlcmlhbCk7XHJcbiAgICAgICAgbWVzaC5yZWNlaXZlU2hhZG93ID0gbWVzaC5jYXN0U2hhZG93ID0gdHJ1ZTtcclxuICAgICAgICBtZXNoLnNoYXBlID0gJ2NvbmNhdmUnO1xyXG4gICAgICAgIC8vIGFkanVzdCBhbGwgeiB2YWx1ZXNcclxuICAgICAgICBjb25zdCBnZW8gPSBtZXNoLmdlb21ldHJ5O1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZ2VvLnZlcnRpY2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGdlby52ZXJ0aWNlc1tpXS56ID0gcGl4ZWwuZGF0YVtpICogNF0gLyAxMjA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGhlbHBlciBmdW5jdGlvbiB0byBnZXQgdGhlIGhpZ2hlc3QgcG9pbnRcclxuICAgICAgICBjb25zdCBnZXRIaWdoUG9pbnQgPSAoZ2VvbWV0cnksIGZhY2UpID0+IHtcclxuICAgICAgICAgICAgdmFyIHYxID0gZ2VvbWV0cnkudmVydGljZXNbZmFjZS5hXS56O1xyXG4gICAgICAgICAgICB2YXIgdjIgPSBnZW9tZXRyeS52ZXJ0aWNlc1tmYWNlLmJdLno7XHJcbiAgICAgICAgICAgIHZhciB2MyA9IGdlb21ldHJ5LnZlcnRpY2VzW2ZhY2UuY10uejtcclxuICAgICAgICAgICAgcmV0dXJuIE1hdGgubWF4KHYxLCB2MiwgdjMpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLy8gYXBwbHkgY29sb3Igc2NhbGUgaWYgYXZhaWxhYmxlXHJcbiAgICAgICAgaWYgKGNvbG9yU2NhbGUpXHJcbiAgICAgICAgICAgIGdlby5mYWNlcy5mb3JFYWNoKGZhY2UgPT4gKGZhY2UuY29sb3IgPSBuZXcgaW5kZXhfMS5Db2xvcihjb2xvclNjYWxlKGdldEhpZ2hQb2ludChnZW8sIGZhY2UpKS5oZXgoKSkpKTtcclxuICAgICAgICBtZXNoLnJvdGF0ZVgoLU1hdGguUEkgLyAyKTtcclxuICAgICAgICBtZXNoLnVwZGF0ZU1hdHJpeCgpO1xyXG4gICAgICAgIHBsYW5lLmNvbXB1dGVGYWNlTm9ybWFscygpO1xyXG4gICAgICAgIHBsYW5lLmNvbXB1dGVWZXJ0ZXhOb3JtYWxzKCk7XHJcbiAgICAgICAgbWVzaC5uYW1lID0gJ2hlaWdodG1hcCc7XHJcbiAgICAgICAgcmV0dXJuIG1lc2g7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0cy5kZWZhdWx0ID0gSGVpZ2h0TWFwO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1oZWlnaHRtYXAuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbi8qKlxyXG4gKiBUaGVzZSBQbHVnaW5zIGFyZSBub3QgaW5jbHVkZWQgaW4gdGhlIENvcmUgdGhyZWUtZ3JhcGhpY3MgcGFja2FnZVxyXG4gKi9cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLkNhbWVyYXMgPSBleHBvcnRzLkhhdmVTb21lRnVuID0gZXhwb3J0cy5XZWJYUiA9IGV4cG9ydHMuVHJhbnNmb3JtID0gZXhwb3J0cy5UZXh0dXJlQ3ViZSA9IGV4cG9ydHMuTWlzYyA9IGV4cG9ydHMuTWl4ZXJzID0gZXhwb3J0cy5XYXJwU3BlZWQgPSBleHBvcnRzLkhlaWdodE1hcCA9IGV4cG9ydHMuQ1NHID0gZXhwb3J0cy5GYWN0b3JpZXMgPSBleHBvcnRzLkxpZ2h0cyA9IGV4cG9ydHMuTG9hZGVycyA9IHZvaWQgMDtcclxuY29uc3QgbG9hZGVyc18xID0gcmVxdWlyZShcIi4vbG9hZGVyc1wiKTtcclxuZXhwb3J0cy5Mb2FkZXJzID0gbG9hZGVyc18xLmRlZmF1bHQ7XHJcbmNvbnN0IGxpZ2h0c18xID0gcmVxdWlyZShcIi4vbGlnaHRzXCIpO1xyXG5leHBvcnRzLkxpZ2h0cyA9IGxpZ2h0c18xLmRlZmF1bHQ7XHJcbmNvbnN0IGZhY3Rvcmllc18xID0gcmVxdWlyZShcIkBlbmFibGUzZC9jb21tb24vZGlzdC9mYWN0b3JpZXNcIik7XHJcbmV4cG9ydHMuRmFjdG9yaWVzID0gZmFjdG9yaWVzXzEuZGVmYXVsdDtcclxuY29uc3QgY3NnXzEgPSByZXF1aXJlKFwiLi9jc2dcIik7XHJcbmV4cG9ydHMuQ1NHID0gY3NnXzEuZGVmYXVsdDtcclxuY29uc3QgaGVpZ2h0bWFwXzEgPSByZXF1aXJlKFwiLi9oZWlnaHRtYXBcIik7XHJcbmV4cG9ydHMuSGVpZ2h0TWFwID0gaGVpZ2h0bWFwXzEuZGVmYXVsdDtcclxuY29uc3Qgd2FycFNwZWVkXzEgPSByZXF1aXJlKFwiLi93YXJwU3BlZWRcIik7XHJcbmV4cG9ydHMuV2FycFNwZWVkID0gd2FycFNwZWVkXzEuZGVmYXVsdDtcclxuY29uc3QgbWl4ZXJzXzEgPSByZXF1aXJlKFwiLi9taXhlcnNcIik7XHJcbmV4cG9ydHMuTWl4ZXJzID0gbWl4ZXJzXzEuZGVmYXVsdDtcclxuY29uc3QgbWlzY18xID0gcmVxdWlyZShcIi4vbWlzY1wiKTtcclxuZXhwb3J0cy5NaXNjID0gbWlzY18xLmRlZmF1bHQ7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIlRleHR1cmVDdWJlXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBtaXNjXzEuVGV4dHVyZUN1YmU7IH0gfSk7XHJcbmNvbnN0IHRyYW5zZm9ybV8xID0gcmVxdWlyZShcIi4vdHJhbnNmb3JtXCIpO1xyXG5leHBvcnRzLlRyYW5zZm9ybSA9IHRyYW5zZm9ybV8xLmRlZmF1bHQ7XHJcbmNvbnN0IHdlYnhyXzEgPSByZXF1aXJlKFwiLi93ZWJ4clwiKTtcclxuZXhwb3J0cy5XZWJYUiA9IHdlYnhyXzEuZGVmYXVsdDtcclxuY29uc3QgaGF2ZVNvbWVGdW5fMSA9IHJlcXVpcmUoXCIuL2hhdmVTb21lRnVuXCIpO1xyXG5leHBvcnRzLkhhdmVTb21lRnVuID0gaGF2ZVNvbWVGdW5fMS5kZWZhdWx0O1xyXG5jb25zdCBjYW1lcmFzXzEgPSByZXF1aXJlKFwiLi9jYW1lcmFzXCIpO1xyXG5leHBvcnRzLkNhbWVyYXMgPSBjYW1lcmFzXzEuZGVmYXVsdDtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbi8qKlxyXG4gKiBAYXV0aG9yICAgICAgIFlhbm5pY2sgRGV1YmVsIChodHRwczovL2dpdGh1Yi5jb20veWFuZGV1KVxyXG4gKiBAY29weXJpZ2h0ICAgIENvcHlyaWdodCAoYykgMjAyMCBZYW5uaWNrIERldWJlbDsgUHJvamVjdCBVcmw6IGh0dHBzOi8vZ2l0aHViLmNvbS9lbmFibGUzZC9lbmFibGUzZFxyXG4gKiBAbGljZW5zZSAgICAgIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZW5hYmxlM2QvZW5hYmxlM2QvYmxvYi9tYXN0ZXIvTElDRU5TRXxHTlUgR1BMdjN9XHJcbiAqL1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmNvbnN0IGluZGV4XzEgPSByZXF1aXJlKFwiQGVuYWJsZTNkL3RocmVlLXdyYXBwZXIvZGlzdC9pbmRleFwiKTtcclxuY29uc3QgaW5kZXhfMiA9IHJlcXVpcmUoXCJAZW5hYmxlM2QvdGhyZWUtd3JhcHBlci9kaXN0L2luZGV4XCIpO1xyXG5jb25zdCBpbmRleF8zID0gcmVxdWlyZShcIkBlbmFibGUzZC90aHJlZS13cmFwcGVyL2Rpc3QvaW5kZXhcIik7XHJcbmNsYXNzIFBvaW50TGlnaHRIZWxwZXIgZXh0ZW5kcyBpbmRleF8xLk9iamVjdDNEIHtcclxuICAgIGNvbnN0cnVjdG9yKHNjZW5lLCBsaWdodCwgc2l6ZSwgY29sb3IpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuc2NlbmUgPSBzY2VuZTtcclxuICAgICAgICB0aGlzLmxpZ2h0ID0gbGlnaHQ7XHJcbiAgICAgICAgdGhpcy5zaXplID0gc2l6ZTtcclxuICAgICAgICB0aGlzLmNvbG9yID0gY29sb3I7XHJcbiAgICAgICAgdGhpcy5nZW8gPSBuZXcgaW5kZXhfMS5TcGhlcmVCdWZmZXJHZW9tZXRyeShzaXplIHx8IDAuMiwgMTYsIDgpO1xyXG4gICAgICAgIHRoaXMubWF0ID0gbmV3IGluZGV4XzEuTWVzaEJhc2ljTWF0ZXJpYWwoeyBjb2xvcjogY29sb3IgfHwgbGlnaHQuY29sb3IgfSk7XHJcbiAgICAgICAgdGhpcy5tZXNoID0gbmV3IGluZGV4XzEuTWVzaCh0aGlzLmdlbywgdGhpcy5tYXQpO1xyXG4gICAgICAgIHRoaXMuYWRkKHRoaXMubWVzaCk7XHJcbiAgICAgICAgbGlnaHQuYWRkKHRoaXMpO1xyXG4gICAgfVxyXG4gICAgZGlzcG9zZSgpIHtcclxuICAgICAgICB0aGlzLm1lc2guZ2VvbWV0cnkuZGlzcG9zZSgpO1xyXG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheSh0aGlzLm1lc2gubWF0ZXJpYWwpKVxyXG4gICAgICAgICAgICB0aGlzLm1lc2gubWF0ZXJpYWwuZGlzcG9zZSgpO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgdGhpcy5tZXNoLm1hdGVyaWFsLmZvckVhY2gobSA9PiBtLmRpc3Bvc2UoKSk7XHJcbiAgICAgICAgdGhpcy5yZW1vdmUodGhpcy5tZXNoKTtcclxuICAgIH1cclxuICAgIHVwZGF0ZSgpIHsgfVxyXG59XHJcbmNsYXNzIExpZ2h0cyB7XHJcbiAgICBjb25zdHJ1Y3RvcihzY2VuZSkge1xyXG4gICAgICAgIHRoaXMuc2NlbmUgPSBzY2VuZTtcclxuICAgIH1cclxuICAgIGdldCBoZWxwZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgZGlyZWN0aW9uYWxMaWdodEhlbHBlcjogKGxpZ2h0LCBzaXplLCBjb2xvcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaGVscGVyID0gbmV3IGluZGV4XzMuRGlyZWN0aW9uYWxMaWdodEhlbHBlcihsaWdodCwgc2l6ZSwgY29sb3IpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY2VuZS5hZGQoaGVscGVyKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBoZWxwZXI7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNwb3RMaWdodEhlbHBlcjogKGxpZ2h0LCBjb2xvcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaGVscGVyID0gbmV3IGluZGV4XzMuU3BvdExpZ2h0SGVscGVyKGxpZ2h0LCBjb2xvcik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjZW5lLmFkZChoZWxwZXIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGhlbHBlcjtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgcG9pbnRMaWdodEhlbHBlcjogKGxpZ2h0LCBzaXplLCBjb2xvcikgPT4gbmV3IFBvaW50TGlnaHRIZWxwZXIodGhpcy5zY2VuZSwgbGlnaHQsIHNpemUsIGNvbG9yKVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBkaXJlY3Rpb25hbExpZ2h0KG9wdGlvbnMgPSB7fSkge1xyXG4gICAgICAgIGNvbnN0IHsgY29sb3IgPSAweGZmZmZmZiwgaW50ZW5zaXR5ID0gMSB9ID0gb3B0aW9ucztcclxuICAgICAgICBjb25zdCBsaWdodCA9IG5ldyBpbmRleF8yLkRpcmVjdGlvbmFsTGlnaHQoY29sb3IsIGludGVuc2l0eSk7XHJcbiAgICAgICAgbGlnaHQuY2FzdFNoYWRvdyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5zY2VuZS5hZGQobGlnaHQpO1xyXG4gICAgICAgIHJldHVybiBsaWdodDtcclxuICAgIH1cclxuICAgIGhlbWlzcGhlcmVMaWdodChvcHRpb25zID0ge30pIHtcclxuICAgICAgICBjb25zdCB7IHNreUNvbG9yID0gMHhmZmZmZmYsIGdyb3VuZENvbG9yID0gMHhmZmZmZmYsIGludGVuc2l0eSA9IDEgfSA9IG9wdGlvbnM7XHJcbiAgICAgICAgY29uc3QgbGlnaHQgPSBuZXcgaW5kZXhfMi5IZW1pc3BoZXJlTGlnaHQoc2t5Q29sb3IsIGdyb3VuZENvbG9yLCBpbnRlbnNpdHkpO1xyXG4gICAgICAgIHRoaXMuc2NlbmUuYWRkKGxpZ2h0KTtcclxuICAgICAgICByZXR1cm4gbGlnaHQ7XHJcbiAgICB9XHJcbiAgICBhbWJpZW50TGlnaHQob3B0aW9ucyA9IHt9KSB7XHJcbiAgICAgICAgY29uc3QgeyBjb2xvciA9IDB4ZmZmZmZmLCBpbnRlbnNpdHkgPSAxIH0gPSBvcHRpb25zO1xyXG4gICAgICAgIGNvbnN0IGxpZ2h0ID0gbmV3IGluZGV4XzIuQW1iaWVudExpZ2h0KGNvbG9yLCBpbnRlbnNpdHkpO1xyXG4gICAgICAgIHRoaXMuc2NlbmUuYWRkKGxpZ2h0KTtcclxuICAgICAgICByZXR1cm4gbGlnaHQ7XHJcbiAgICB9XHJcbiAgICBwb2ludExpZ2h0KG9wdGlvbnMgPSB7fSkge1xyXG4gICAgICAgIGNvbnN0IHsgY29sb3IgPSAweGZmZmZmZiwgaW50ZW5zaXR5ID0gMSwgZGlzdGFuY2UgPSAwLCBkZWNheSA9IDEgfSA9IG9wdGlvbnM7XHJcbiAgICAgICAgY29uc3QgbGlnaHQgPSBuZXcgaW5kZXhfMi5Qb2ludExpZ2h0KGNvbG9yLCBpbnRlbnNpdHksIGRpc3RhbmNlLCBkZWNheSk7XHJcbiAgICAgICAgbGlnaHQuY2FzdFNoYWRvdyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5zY2VuZS5hZGQobGlnaHQpO1xyXG4gICAgICAgIHJldHVybiBsaWdodDtcclxuICAgIH1cclxuICAgIHNwb3RMaWdodChvcHRpb25zID0ge30pIHtcclxuICAgICAgICBjb25zdCB7IGNvbG9yID0gMHhmZmZmZmYsIGludGVuc2l0eSA9IDEsIGRpc3RhbmNlID0gMCwgYW5nbGUgPSBNYXRoLlBJIC8gOCwgcGVudW1icmEgPSAwLCBkZWNheSA9IDEgfSA9IG9wdGlvbnM7XHJcbiAgICAgICAgY29uc3QgbGlnaHQgPSBuZXcgaW5kZXhfMi5TcG90TGlnaHQoY29sb3IsIGludGVuc2l0eSwgZGlzdGFuY2UsIGFuZ2xlLCBwZW51bWJyYSwgZGVjYXkpO1xyXG4gICAgICAgIGxpZ2h0LmNhc3RTaGFkb3cgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuc2NlbmUuYWRkKGxpZ2h0KTtcclxuICAgICAgICByZXR1cm4gbGlnaHQ7XHJcbiAgICB9XHJcbiAgICByZWN0QXJlYUxpZ2h0KG9wdGlvbnMgPSB7fSkge1xyXG4gICAgICAgIGNvbnN0IHsgY29sb3IgPSAweGZmZmZmZiwgaW50ZW5zaXR5ID0gMSwgd2lkdGggPSAxMCwgaGVpZ2h0ID0gMTAgfSA9IG9wdGlvbnM7XHJcbiAgICAgICAgY29uc3QgbGlnaHQgPSBuZXcgaW5kZXhfMi5SZWN0QXJlYUxpZ2h0KGNvbG9yLCBpbnRlbnNpdHksIHdpZHRoLCBoZWlnaHQpO1xyXG4gICAgICAgIHRoaXMuc2NlbmUuYWRkKGxpZ2h0KTtcclxuICAgICAgICByZXR1cm4gbGlnaHQ7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0cy5kZWZhdWx0ID0gTGlnaHRzO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1saWdodHMuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbi8qKlxyXG4gKiBAYXV0aG9yICAgICAgIFlhbm5pY2sgRGV1YmVsIChodHRwczovL2dpdGh1Yi5jb20veWFuZGV1KVxyXG4gKiBAY29weXJpZ2h0ICAgIENvcHlyaWdodCAoYykgMjAyMCBZYW5uaWNrIERldWJlbDsgUHJvamVjdCBVcmw6IGh0dHBzOi8vZ2l0aHViLmNvbS9lbmFibGUzZC9lbmFibGUzZFxyXG4gKiBAbGljZW5zZSAgICAgIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZW5hYmxlM2QvZW5hYmxlM2QvYmxvYi9tYXN0ZXIvTElDRU5TRXxHTlUgR1BMdjN9XHJcbiAqL1xyXG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn07XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuY29uc3QgaW5kZXhfMSA9IHJlcXVpcmUoXCJAZW5hYmxlM2QvdGhyZWUtd3JhcHBlci9kaXN0L2luZGV4XCIpO1xyXG5jbGFzcyBMb2FkZXJzIHtcclxuICAgIGNvbnN0cnVjdG9yKGNhY2hlLCB0ZXh0dXJlQW5pc290cm9weSkge1xyXG4gICAgICAgIHRoaXMuY2FjaGUgPSBjYWNoZTtcclxuICAgICAgICB0aGlzLnRleHR1cmVBbmlzb3Ryb3B5ID0gdGV4dHVyZUFuaXNvdHJvcHk7XHJcbiAgICB9XHJcbiAgICBnZXQgZmlsZUxvYWRlcigpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX2ZpbGVMb2FkZXIpXHJcbiAgICAgICAgICAgIHRoaXMuX2ZpbGVMb2FkZXIgPSBuZXcgaW5kZXhfMS5GaWxlTG9hZGVyKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZpbGVMb2FkZXI7XHJcbiAgICB9XHJcbiAgICBnZXQgaW1hZ2VMb2FkZXIoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9pbWdMb2FkZXIpXHJcbiAgICAgICAgICAgIHRoaXMuX2ltZ0xvYWRlciA9IG5ldyBpbmRleF8xLkltYWdlTG9hZGVyKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ltZ0xvYWRlcjtcclxuICAgIH1cclxuICAgIGdldCBzdmdMb2FkZXIoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9zdmdMb2FkZXIpXHJcbiAgICAgICAgICAgIHRoaXMuX3N2Z0xvYWRlciA9IG5ldyBpbmRleF8xLlNWR0xvYWRlcigpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zdmdMb2FkZXI7XHJcbiAgICB9XHJcbiAgICBnZXQgdGV4dHVyZUxvYWRlcigpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX3RleHR1cmVMb2FkZXIpXHJcbiAgICAgICAgICAgIHRoaXMuX3RleHR1cmVMb2FkZXIgPSBuZXcgaW5kZXhfMS5UZXh0dXJlTG9hZGVyKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RleHR1cmVMb2FkZXI7XHJcbiAgICB9XHJcbiAgICBnZXQgb2JqZWN0TG9hZGVyKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5fb2JqZWN0TG9hZGVyKVxyXG4gICAgICAgICAgICB0aGlzLl9vYmplY3RMb2FkZXIgPSBuZXcgaW5kZXhfMS5PYmplY3RMb2FkZXIoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fb2JqZWN0TG9hZGVyO1xyXG4gICAgfVxyXG4gICAgZ2V0IGdsdGZMb2FkZXIoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9nbHRmTG9hZGVyKVxyXG4gICAgICAgICAgICB0aGlzLl9nbHRmTG9hZGVyID0gbmV3IGluZGV4XzEuR0xURkxvYWRlcigpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9nbHRmTG9hZGVyO1xyXG4gICAgfVxyXG4gICAgZ2V0IGZieExvYWRlcigpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX2ZieExvYWRlcilcclxuICAgICAgICAgICAgdGhpcy5fZmJ4TG9hZGVyID0gbmV3IGluZGV4XzEuRkJYTG9hZGVyKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZieExvYWRlcjtcclxuICAgIH1cclxuICAgIHByZWxvYWQoa2V5LCB1cmwpIHtcclxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgICAgICB0aGlzLmNhY2hlLmFkZChrZXksIHVybCk7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGlzTW9kZWwgPSAvXFwuZmJ4JHxcXC5nbGIkfFxcLmdsdGYkLy50ZXN0KHVybCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpc1RleHR1cmUgPSAvXFwuanBlP2ckfFxcLnBuZyQvLnRlc3QodXJsKTtcclxuICAgICAgICAgICAgICAgIGlmIChpc1RleHR1cmUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRleHR1cmVMb2FkZXIubG9hZCh1cmwsIHRleHR1cmUgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh0ZXh0dXJlKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc01vZGVsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbGVMb2FkZXIuc2V0UmVzcG9uc2VUeXBlKCdhcnJheWJ1ZmZlcicpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmlsZUxvYWRlci5sb2FkKHVybCwgZmlsZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKGZpbGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGZpbGUodXJsKSB7XHJcbiAgICAgICAgY29uc3Qga2V5ID0gdGhpcy5jYWNoZS5nZXQodXJsKTtcclxuICAgICAgICB1cmwgPSBrZXkgPyBrZXkgOiB1cmw7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmZpbGVMb2FkZXIubG9hZCh1cmwsIGZpbGUgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoZmlsZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgc3ZnKHVybCkge1xyXG4gICAgICAgIGNvbnN0IGtleSA9IHRoaXMuY2FjaGUuZ2V0KHVybCk7XHJcbiAgICAgICAgdXJsID0ga2V5ID8ga2V5IDogdXJsO1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zdmdMb2FkZXIubG9hZCh1cmwsIHN2ZyA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShzdmcpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHRleHR1cmUodXJsKSB7XHJcbiAgICAgICAgY29uc3QgaXNCYXNlNjQgPSAvXmRhdGE6aW1hZ2VcXC9bXFxTXSs7YmFzZTY0LC9nbS50ZXN0KHVybCk7XHJcbiAgICAgICAgLy8gd2UgZG8gbm90IHdhbnQgdG8gY2FjaGUgYmFzZTY0IGltYWdlc1xyXG4gICAgICAgIGlmICghaXNCYXNlNjQpIHtcclxuICAgICAgICAgICAgY29uc3Qga2V5ID0gdGhpcy5jYWNoZS5nZXQodXJsKTtcclxuICAgICAgICAgICAgdXJsID0ga2V5ID8ga2V5IDogdXJsO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMudGV4dHVyZUxvYWRlci5sb2FkKHVybCwgKHRleHR1cmUpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIG9wdGlvbnNcclxuICAgICAgICAgICAgICAgIHRleHR1cmUuYW5pc290cm9weSA9IHRoaXMudGV4dHVyZUFuaXNvdHJvcHk7XHJcbiAgICAgICAgICAgICAgICB0ZXh0dXJlLmZvcm1hdCA9IGluZGV4XzEuUkdCQUZvcm1hdDtcclxuICAgICAgICAgICAgICAgIHRleHR1cmUubmVlZHNVcGRhdGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh0ZXh0dXJlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvLyBleGFtcGxlczogaHR0cHM6Ly9naXRodWIuY29tL21yZG9vYi90aHJlZS5qcy93aWtpL0pTT04tT2JqZWN0LVNjZW5lLWZvcm1hdC00XHJcbiAgICBvYmplY3QodXJsKSB7XHJcbiAgICAgICAgY29uc3Qga2V5ID0gdGhpcy5jYWNoZS5nZXQodXJsKTtcclxuICAgICAgICB1cmwgPSBrZXkgPyBrZXkgOiB1cmw7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLm9iamVjdExvYWRlci5sb2FkKHVybCwgKGpzb24pID0+IHtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoanNvbik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZ2x0Zih1cmwpIHtcclxuICAgICAgICBjb25zdCBrZXkgPSB0aGlzLmNhY2hlLmdldCh1cmwpO1xyXG4gICAgICAgIHVybCA9IGtleSA/IGtleSA6IHVybDtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuZ2x0ZkxvYWRlci5sb2FkKHVybCwgKGdsdGYpID0+IHtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoZ2x0Zik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZmJ4KHVybCkge1xyXG4gICAgICAgIGNvbnN0IGtleSA9IHRoaXMuY2FjaGUuZ2V0KHVybCk7XHJcbiAgICAgICAgdXJsID0ga2V5ID8ga2V5IDogdXJsO1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcclxuICAgICAgICAgICAgdGhpcy5mYnhMb2FkZXIubG9hZCh1cmwsIChmYngpID0+IHtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoZmJ4KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0cy5kZWZhdWx0ID0gTG9hZGVycztcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bG9hZGVycy5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLlRleHR1cmVDdWJlID0gdm9pZCAwO1xyXG4vLyBtaXNjXHJcbmNvbnN0IHdhdGVyXzEgPSByZXF1aXJlKFwiQGVuYWJsZTNkL2NvbW1vbi9kaXN0L21pc2Mvd2F0ZXJcIik7XHJcbmNvbnN0IGRpc3RfMSA9IHJlcXVpcmUoXCJAZW5hYmxlM2QvdGhyZWUtd3JhcHBlci9kaXN0XCIpO1xyXG5jbGFzcyBNaXNjIHtcclxuICAgIGNvbnN0cnVjdG9yKHNjZW5lLCByZW5kZXJlciwgZmFjdG9yaWVzKSB7XHJcbiAgICAgICAgdGhpcy5zY2VuZSA9IHNjZW5lO1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgICAgICB0aGlzLmZhY3RvcmllcyA9IGZhY3RvcmllcztcclxuICAgIH1cclxuICAgIHdhdGVyKGNvbmZpZyA9IHt9KSB7XHJcbiAgICAgICAgd2F0ZXJfMS5hZGRXYXRlcih0aGlzLnNjZW5lLCB0aGlzLnJlbmRlcmVyLCBjb25maWcpO1xyXG4gICAgfVxyXG4gICAgdGV4dHVyZUN1YmUodGV4dHVyZXMpIHtcclxuICAgICAgICBpZiAodGV4dHVyZXMubGVuZ3RoICE9PSA2KSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbZW5hYmxlM2RdIFlvdSBuZWVkIHRvIHBhc3MgNiB1cmxzIHRvIHRleHR1cmVDdWJlKCknKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgdGV4dHVyZUN1YmUgPSBuZXcgVGV4dHVyZUN1YmUoKTtcclxuICAgICAgICB0ZXh0dXJlcy5mb3JFYWNoKCh0ZXh0dXJlLCBpKSA9PiB7XHJcbiAgICAgICAgICAgIHRleHR1cmUud3JhcFMgPSB0ZXh0dXJlLndyYXBUID0gZGlzdF8xLlJlcGVhdFdyYXBwaW5nO1xyXG4gICAgICAgICAgICBjb25zdCBtYXRlcmlhbCA9IHRoaXMuZmFjdG9yaWVzLmFkZC5tYXRlcmlhbCh7IHBob25nOiB7IG1hcDogdGV4dHVyZSB9IH0pO1xyXG4gICAgICAgICAgICB0ZXh0dXJlQ3ViZS5tYXRlcmlhbHNbaV0gPSBtYXRlcmlhbDtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdGV4dHVyZUN1YmU7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0cy5kZWZhdWx0ID0gTWlzYztcclxuY2xhc3MgVGV4dHVyZUN1YmUge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5tYXRlcmlhbHMgPSBuZXcgQXJyYXkoNik7XHJcbiAgICB9XHJcbiAgICBnZXQgdGV4dHVyZSgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBsZWZ0OiB0aGlzLmdldFRleHR1cmUoMCksXHJcbiAgICAgICAgICAgIHJpZ2h0OiB0aGlzLmdldFRleHR1cmUoMSksXHJcbiAgICAgICAgICAgIHVwOiB0aGlzLmdldFRleHR1cmUoMiksXHJcbiAgICAgICAgICAgIGRvd246IHRoaXMuZ2V0VGV4dHVyZSgzKSxcclxuICAgICAgICAgICAgZnJvbnQ6IHRoaXMuZ2V0VGV4dHVyZSg0KSxcclxuICAgICAgICAgICAgYmFjazogdGhpcy5nZXRUZXh0dXJlKDUpXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIGdldFRleHR1cmUoaSkge1xyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICByZXR1cm4gdGhpcy5tYXRlcmlhbHNbaV0ubWFwO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydHMuVGV4dHVyZUN1YmUgPSBUZXh0dXJlQ3ViZTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWlzYy5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5jb25zdCB0eXBlc18xID0gcmVxdWlyZShcIkBlbmFibGUzZC9jb21tb24vZGlzdC90eXBlc1wiKTtcclxuY2xhc3MgTWl4ZXJzIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuX21peGVycyA9IFtdO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGUgYW4gQW5pbWF0aW9uIE1peGVyIGFuZCBhZHMgaXQgdG8gdGhlIG1peGVycyBhcnJheVxyXG4gICAgICovXHJcbiAgICBhbmltYXRpb25NaXhlcihyb290KSB7XHJcbiAgICAgICAgY29uc3QgbWl4ZXIgPSBuZXcgdHlwZXNfMS5BbmltYXRpb25NaXhlcihyb290KTtcclxuICAgICAgICB0aGlzLm1peGVycy5hZGQobWl4ZXIpO1xyXG4gICAgICAgIHJldHVybiBtaXhlcjtcclxuICAgIH1cclxuICAgIGdldCBtaXhlcnMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgY3JlYXRlOiAocm9vdCkgPT4gdGhpcy5hbmltYXRpb25NaXhlcihyb290KSxcclxuICAgICAgICAgICAgYWRkOiAoYW5pbWF0aW9uTWl4ZXIpID0+IHRoaXMuX21peGVycy5wdXNoKGFuaW1hdGlvbk1peGVyKSxcclxuICAgICAgICAgICAgZ2V0OiAoKSA9PiB0aGlzLl9taXhlcnMsXHJcbiAgICAgICAgICAgIHVwZGF0ZTogKGRlbHRhKSA9PiB7IHZhciBfYTsgcmV0dXJuIChfYSA9IHRoaXMuX21peGVycykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmZvckVhY2gobWl4ZXIgPT4gbWl4ZXIudXBkYXRlKGRlbHRhIC8gMTAwMCkpOyB9XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufVxyXG5leHBvcnRzLmRlZmF1bHQgPSBNaXhlcnM7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1peGVycy5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5jb25zdCBpbmRleF8xID0gcmVxdWlyZShcIkBlbmFibGUzZC90aHJlZS13cmFwcGVyL2Rpc3QvaW5kZXhcIik7XHJcbmNvbnN0IGluZGV4XzIgPSByZXF1aXJlKFwiQGVuYWJsZTNkL3RocmVlLXdyYXBwZXIvZGlzdC9pbmRleFwiKTtcclxuLyoqXHJcbiAqIEBhdXRob3IgICAgICAgWWFubmljayBEZXViZWwgKGh0dHBzOi8vZ2l0aHViLmNvbS95YW5kZXUpXHJcbiAqIEBjb3B5cmlnaHQgICAgQ29weXJpZ2h0IChjKSAyMDIwIFlhbm5pY2sgRGV1YmVsOyBQcm9qZWN0IFVybDogaHR0cHM6Ly9naXRodWIuY29tL2VuYWJsZTNkL2VuYWJsZTNkXHJcbiAqIEBsaWNlbnNlICAgICAge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9lbmFibGUzZC9lbmFibGUzZC9ibG9iL21hc3Rlci9MSUNFTlNFfEdOVSBHUEx2M31cclxuICovXHJcbmNsYXNzIFRyYW5zZm9ybSB7XHJcbiAgICBjb25zdHJ1Y3RvcihjYW1lcmEsIHJlbmRlcmVyKSB7XHJcbiAgICAgICAgdGhpcy5jYW1lcmEgPSBjYW1lcmE7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgfVxyXG4gICAgZ2VvbWV0cnlUb0J1ZmZlckdlb21ldHJ5KGdlb21ldHJ5KSB7XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIGlmIChnZW9tZXRyeS5pc0dlb21ldHJ5KVxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IGluZGV4XzEuQnVmZmVyR2VvbWV0cnkoKS5mcm9tR2VvbWV0cnkoZ2VvbWV0cnkpO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgcmV0dXJuIGdlb21ldHJ5O1xyXG4gICAgfVxyXG4gICAgYnVmZmVyR2VvbWV0cnlUb0dlb21ldHJ5KGJ1ZmZlckdlb21ldHJ5KSB7XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIGlmIChidWZmZXJHZW9tZXRyeS5pc0J1ZmZlckdlb21ldHJ5KVxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IGluZGV4XzEuR2VvbWV0cnkoKS5mcm9tQnVmZmVyR2VvbWV0cnkoYnVmZmVyR2VvbWV0cnkpO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgcmV0dXJuIGJ1ZmZlckdlb21ldHJ5O1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBUcmFuc2Zvcm1zIHlvdXIgc3ZnIGZpbGVzIHRvIHBhdGhzLlxyXG4gICAgICovXHJcbiAgICBmcm9tU1ZHdG9TaGFwZShzdmcsIGlzQ0NXID0gZmFsc2UsIG5vSG9sZXMpIHtcclxuICAgICAgICBpZiAoc3ZnKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHN2Z0xvYWRlciA9IG5ldyBpbmRleF8yLlNWR0xvYWRlcigpO1xyXG4gICAgICAgICAgICBjb25zdCBzaGFwZXMgPSBbXTtcclxuICAgICAgICAgICAgc3ZnTG9hZGVyLnBhcnNlKHN2ZykucGF0aHMuZm9yRWFjaChwYXRoID0+IHtcclxuICAgICAgICAgICAgICAgIHBhdGgudG9TaGFwZXMoaXNDQ1csIG5vSG9sZXMpLmZvckVhY2goc2hhcGUgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHNoYXBlcy5wdXNoKHNoYXBlKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIHNoYXBlcztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG4gICAgZnJvbTNkdG8yZChwb3NpdGlvbikge1xyXG4gICAgICAgIGNvbnN0IHZlY3RvcjMgPSBuZXcgaW5kZXhfMS5WZWN0b3IzKHBvc2l0aW9uLngsIHBvc2l0aW9uLnksIHBvc2l0aW9uLnopO1xyXG4gICAgICAgIGNvbnN0IGNhbnZhcyA9IHRoaXMucmVuZGVyZXIuZG9tRWxlbWVudDtcclxuICAgICAgICAvLyBtYXAgdG8gbm9ybWFsaXplZCBkZXZpY2UgY29vcmRpbmF0ZSAoTkRDKSBzcGFjZVxyXG4gICAgICAgIHRoaXMuY2FtZXJhLnVwZGF0ZU1hdHJpeFdvcmxkKCk7XHJcbiAgICAgICAgdmVjdG9yMy5wcm9qZWN0KHRoaXMuY2FtZXJhKTtcclxuICAgICAgICAvLyBtYXAgdG8gMkQgc2NyZWVuIHNwYWNlXHJcbiAgICAgICAgY29uc3QgeCA9IE1hdGgucm91bmQoKHZlY3RvcjMueCArIDEpICogKGNhbnZhcy53aWR0aCAvIDIpKTtcclxuICAgICAgICBjb25zdCB5ID0gTWF0aC5yb3VuZCgoLXZlY3RvcjMueSArIDEpICogKGNhbnZhcy5oZWlnaHQgLyAyKSk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBpbmRleF8xLlZlY3RvcjIoeCwgeSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0geCBYIGNvb3JkaW5hdGUgaW4gbm9ybWFsaXplZCBkZXZpY2UgY29vcmRpbmF0ZSAoTkRDKSAoLTEgdG8gKzEpLlxyXG4gICAgICogQHBhcmFtIHkgWSBjb29yZGluYXRlIGluIG5vcm1hbGl6ZWQgZGV2aWNlIGNvb3JkaW5hdGUgKE5EQykgKC0xIHRvICsxKS5cclxuICAgICAqIEBwYXJhbSBkaXN0YW5jZUZyb21DYW1lcmEgVGhlIGRpc3RhbmNlIGZyb20gdGhlIGNhbWVyYS5cclxuICAgICAqL1xyXG4gICAgZnJvbTJkdG8zZCh4LCB5LCBkaXN0YW5jZUZyb21DYW1lcmEpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgLy8gaW5pdGlhbGl6ZSB0ZW1wb3JhcnkgdmFyaWFibGVzXHJcbiAgICAgICAgaWYgKCF0aGlzLnRtcFBsYW5lKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGdlbyA9IG5ldyBpbmRleF8xLlBsYW5lQnVmZmVyR2VvbWV0cnkoMTAwMDAsIDEwMDAwKTtcclxuICAgICAgICAgICAgY29uc3QgbWF0ID0gbmV3IGluZGV4XzEuTWVzaEJhc2ljTWF0ZXJpYWwoeyB0cmFuc3BhcmVudDogdHJ1ZSwgb3BhY2l0eTogMC4yNSB9KTtcclxuICAgICAgICAgICAgdGhpcy50bXBQbGFuZSA9IG5ldyBpbmRleF8xLk1lc2goZ2VvLCBtYXQpO1xyXG4gICAgICAgICAgICB0aGlzLnRtcFBsYW5lLm5hbWUgPSAnX3RtcF9yYXljYXN0X3BsYW5lJztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0aGlzLnRtcFJheWNhc3RlcilcclxuICAgICAgICAgICAgdGhpcy50bXBSYXljYXN0ZXIgPSBuZXcgaW5kZXhfMS5SYXljYXN0ZXIoKTtcclxuICAgICAgICBpZiAoIXRoaXMudG1wVmVjdG9yMylcclxuICAgICAgICAgICAgdGhpcy50bXBWZWN0b3IzID0gbmV3IGluZGV4XzEuVmVjdG9yMygpO1xyXG4gICAgICAgIC8vIGhvbGRzIHRoZSBwb3NpdGlvbiB3ZSB3YW50IHRvIHJldHVybiBsYXRlclxyXG4gICAgICAgIGxldCBwb3NpdGlvbjtcclxuICAgICAgICAvLyBhZGQgcGxhbmUgcGFyYWxsZWwgdG8gY2FtZXJhXHJcbiAgICAgICAgdGhpcy50bXBQbGFuZS5zZXRSb3RhdGlvbkZyb21FdWxlcih0aGlzLmNhbWVyYS5yb3RhdGlvbik7XHJcbiAgICAgICAgY29uc3QgcCA9IHRoaXMuY2FtZXJhLnBvc2l0aW9uO1xyXG4gICAgICAgIHRoaXMudG1wUGxhbmUucG9zaXRpb24uc2V0KHAueCwgcC55LCBwLnopO1xyXG4gICAgICAgIC8vIGFkanVzdCB0aGUgZGlzdGFuY2Ugb2YgdGhlIHBsYW5lXHJcbiAgICAgICAgdGhpcy5jYW1lcmEuZ2V0V29ybGREaXJlY3Rpb24odGhpcy50bXBWZWN0b3IzKTtcclxuICAgICAgICB0aGlzLnRtcFBsYW5lLnBvc2l0aW9uLmFkZCh0aGlzLnRtcFZlY3RvcjMuY2xvbmUoKS5tdWx0aXBseVNjYWxhcihkaXN0YW5jZUZyb21DYW1lcmEpKTtcclxuICAgICAgICB0aGlzLnRtcFBsYW5lLnVwZGF0ZU1hdHJpeCgpO1xyXG4gICAgICAgIHRoaXMudG1wUGxhbmUudXBkYXRlTWF0cml4V29ybGQodHJ1ZSk7XHJcbiAgICAgICAgLy8gcmF5Y2FzdFxyXG4gICAgICAgIHRoaXMudG1wUmF5Y2FzdGVyLnNldEZyb21DYW1lcmEoeyB4LCB5IH0sIHRoaXMuY2FtZXJhKTtcclxuICAgICAgICAvLyBjaGVjayBpbnRlcnNlY3Rpb24gd2l0aCBwbGFuZVxyXG4gICAgICAgIGNvbnN0IGludGVyc2VjdHMgPSB0aGlzLnRtcFJheWNhc3Rlci5pbnRlcnNlY3RPYmplY3RzKFt0aGlzLnRtcFBsYW5lXSk7XHJcbiAgICAgICAgaWYgKCgoX2EgPSBpbnRlcnNlY3RzWzBdKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Eub2JqZWN0Lm5hbWUpID09PSAnX3RtcF9yYXljYXN0X3BsYW5lJylcclxuICAgICAgICAgICAgcG9zaXRpb24gPSBpbnRlcnNlY3RzWzBdLnBvaW50O1xyXG4gICAgICAgIHJldHVybiBwb3NpdGlvbjtcclxuICAgIH1cclxufVxyXG5leHBvcnRzLmRlZmF1bHQgPSBUcmFuc2Zvcm07XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRyYW5zZm9ybS5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59O1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmNvbnN0IGluZGV4XzEgPSByZXF1aXJlKFwiQGVuYWJsZTNkL3RocmVlLXdyYXBwZXIvZGlzdC9pbmRleFwiKTtcclxuY29uc3QgVEhSRUUgPSByZXF1aXJlKFwiQGVuYWJsZTNkL3RocmVlLXdyYXBwZXIvZGlzdC9pbmRleFwiKTtcclxuY2xhc3MgV2FycFNwZWVkIHtcclxuICAgIGNvbnN0cnVjdG9yKHNjZW5lLCByZW5kZXJlciwgY2FtZXJhLCBsaWdodHMsIHBoeXNpY3MsIGxvYWQsIGZhY3Rvcmllcykge1xyXG4gICAgICAgIHRoaXMuc2NlbmUgPSBzY2VuZTtcclxuICAgICAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICAgICAgdGhpcy5jYW1lcmEgPSBjYW1lcmE7XHJcbiAgICAgICAgdGhpcy5saWdodHMgPSBsaWdodHM7XHJcbiAgICAgICAgdGhpcy5waHlzaWNzID0gcGh5c2ljcztcclxuICAgICAgICB0aGlzLmxvYWQgPSBsb2FkO1xyXG4gICAgICAgIHRoaXMuZmFjdG9yaWVzID0gZmFjdG9yaWVzO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBJdCB0YWtlcyB0b29rIGxvbmcgdG8gc2V0dXAgdGhlIHRoaXJkIGRpbWVuc2lvbiB5b3VyIHNlbGY/IEdldCBzdGFydGVkIHdpdGggd2FycCBzcGVlZCBieSB1c2luZyB0aGlzIGZ1bmN0aW9uLlxyXG4gICAgICogQHBhcmFtIGZlYXR1cmVzIFBhc3MgdGhlIGZlYXR1cmVzIHlvdSB3YW50IHRvIHNldHVwLlxyXG4gICAgICovXHJcbiAgICB3YXJwU3BlZWQoLi4uZmVhdHVyZXMpIHtcclxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgICAgICBsZXQgRmVhdHVyZXMgPSB7fTtcclxuICAgICAgICAgICAgLy8gdGVzdCBmb3IgbmVnYXRpdmUgZmVhdHVyZXNcclxuICAgICAgICAgICAgY29uc3QgbmVnYXRpdmVGZWF0dXJlcyA9IGZlYXR1cmVzLmZpbHRlcihmZWF0dXJlID0+IC9eLVxcdysvLnRlc3QoZmVhdHVyZSkpO1xyXG4gICAgICAgICAgICBjb25zdCBoYXNOZWdhdGl2ZUZlYXR1cmVzID0gbmVnYXRpdmVGZWF0dXJlcy5sZW5ndGggPiAwID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgICAgICAgICAvLyBhZGQgYWxsIGZlYXR1cmVzXHJcbiAgICAgICAgICAgIGlmIChmZWF0dXJlcy5sZW5ndGggPT09IDAgfHwgaGFzTmVnYXRpdmVGZWF0dXJlcylcclxuICAgICAgICAgICAgICAgIGZlYXR1cmVzID0gWydsaWdodCcsICdjYW1lcmEnLCAnbG9va0F0Q2VudGVyJywgJ2dyb3VuZCcsICdncmlkJywgJ29yYml0Q29udHJvbHMnLCAnZm9nJywgJ3NreSddO1xyXG4gICAgICAgICAgICAvLyByZW1vdmUgdGhlIG5lZ2F0aXZlIGZlYXR1cmVzXHJcbiAgICAgICAgICAgIGlmIChoYXNOZWdhdGl2ZUZlYXR1cmVzKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBmZWF0dXJlc1RvUmVtb3ZlID0gbmVnYXRpdmVGZWF0dXJlcy5tYXAoZmVhdHVyZSA9PiBmZWF0dXJlLnN1YnN0cigxKSk7XHJcbiAgICAgICAgICAgICAgICBmZWF0dXJlc1RvUmVtb3ZlLmZvckVhY2goZmVhdHVyZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gZmVhdHVyZXMuaW5kZXhPZihmZWF0dXJlKTtcclxuICAgICAgICAgICAgICAgICAgICBmZWF0dXJlcy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gVE9ETzogYWRkIGZvZ1xyXG4gICAgICAgICAgICBpZiAoZmVhdHVyZXMuaW5jbHVkZXMoJ2ZvZycpKSB7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGZlYXR1cmVzLmluY2x1ZGVzKCdza3knKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL21yZG9vYi90aHJlZS5qcy9ibG9iL21hc3Rlci9leGFtcGxlcy93ZWJnbF9saWdodHNfaGVtaXNwaGVyZS5odG1sXHJcbiAgICAgICAgICAgICAgICAvLyBTS1lET01FXHJcbiAgICAgICAgICAgICAgICBjb25zdCB2ZXJ0ZXhTaGFkZXIgPSBbXHJcbiAgICAgICAgICAgICAgICAgICAgJ3ZhcnlpbmcgdmVjMyB2V29ybGRQb3NpdGlvbjsnLFxyXG4gICAgICAgICAgICAgICAgICAgICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICd2b2lkIG1haW4oKSB7JyxcclxuICAgICAgICAgICAgICAgICAgICAnJyxcclxuICAgICAgICAgICAgICAgICAgICAndmVjNCB3b3JsZFBvc2l0aW9uID0gbW9kZWxNYXRyaXggKiB2ZWM0KCBwb3NpdGlvbiwgMS4wICk7JyxcclxuICAgICAgICAgICAgICAgICAgICAndldvcmxkUG9zaXRpb24gPSB3b3JsZFBvc2l0aW9uLnh5ejsnLFxyXG4gICAgICAgICAgICAgICAgICAgICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICdnbF9Qb3NpdGlvbiA9IHByb2plY3Rpb25NYXRyaXggKiBtb2RlbFZpZXdNYXRyaXggKiB2ZWM0KCBwb3NpdGlvbiwgMS4wICk7JyxcclxuICAgICAgICAgICAgICAgICAgICAnJyxcclxuICAgICAgICAgICAgICAgICAgICAnfSdcclxuICAgICAgICAgICAgICAgIF0uam9pbignXFxuJyk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBmcmFnbWVudFNoYWRlciA9IFtcclxuICAgICAgICAgICAgICAgICAgICAndW5pZm9ybSB2ZWMzIHRvcENvbG9yOycsXHJcbiAgICAgICAgICAgICAgICAgICAgJ3VuaWZvcm0gdmVjMyBib3R0b21Db2xvcjsnLFxyXG4gICAgICAgICAgICAgICAgICAgICd1bmlmb3JtIGZsb2F0IG9mZnNldDsnLFxyXG4gICAgICAgICAgICAgICAgICAgICd1bmlmb3JtIGZsb2F0IGV4cG9uZW50OycsXHJcbiAgICAgICAgICAgICAgICAgICAgJycsXHJcbiAgICAgICAgICAgICAgICAgICAgJ3ZhcnlpbmcgdmVjMyB2V29ybGRQb3NpdGlvbjsnLFxyXG4gICAgICAgICAgICAgICAgICAgICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICd2b2lkIG1haW4oKSB7JyxcclxuICAgICAgICAgICAgICAgICAgICAnJyxcclxuICAgICAgICAgICAgICAgICAgICAnZmxvYXQgaCA9IG5vcm1hbGl6ZSggdldvcmxkUG9zaXRpb24gKyBvZmZzZXQgKS55OycsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2dsX0ZyYWdDb2xvciA9IHZlYzQoIG1peCggYm90dG9tQ29sb3IsIHRvcENvbG9yLCBtYXgoIHBvdyggbWF4KCBoICwgMC4wKSwgZXhwb25lbnQgKSwgMC4wICkgKSwgMS4wICk7JyxcclxuICAgICAgICAgICAgICAgICAgICAnJyxcclxuICAgICAgICAgICAgICAgICAgICAnfSdcclxuICAgICAgICAgICAgICAgIF0uam9pbignXFxuJyk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB1bmlmb3JtcyA9IHtcclxuICAgICAgICAgICAgICAgICAgICB0b3BDb2xvcjogeyB2YWx1ZTogbmV3IFRIUkVFLkNvbG9yKDB4MDA3N2ZmKSB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGJvdHRvbUNvbG9yOiB7IHZhbHVlOiBuZXcgVEhSRUUuQ29sb3IoMHhlZGY1ZmYpIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0OiB7IHZhbHVlOiAzMyB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGV4cG9uZW50OiB7IHZhbHVlOiAwLjYgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHZhciBza3lHZW8gPSBuZXcgVEhSRUUuU3BoZXJlQnVmZmVyR2VvbWV0cnkoNTAwLCAzMiwgMTUpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHNreU1hdCA9IG5ldyBUSFJFRS5TaGFkZXJNYXRlcmlhbCh7XHJcbiAgICAgICAgICAgICAgICAgICAgdW5pZm9ybXM6IHVuaWZvcm1zLFxyXG4gICAgICAgICAgICAgICAgICAgIHZlcnRleFNoYWRlcjogdmVydGV4U2hhZGVyLFxyXG4gICAgICAgICAgICAgICAgICAgIGZyYWdtZW50U2hhZGVyOiBmcmFnbWVudFNoYWRlcixcclxuICAgICAgICAgICAgICAgICAgICBzaWRlOiBUSFJFRS5CYWNrU2lkZVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2t5ID0gbmV3IFRIUkVFLk1lc2goc2t5R2VvLCBza3lNYXQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY2VuZS5hZGQoc2t5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZmVhdHVyZXMuaW5jbHVkZXMoJ2NhbWVyYScpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNhbWVyYS5wb3NpdGlvbi5zZXQoMCwgNiwgMTIpO1xyXG4gICAgICAgICAgICAgICAgRmVhdHVyZXMgPSBPYmplY3QuYXNzaWduKHsgY2FtZXJhOiB0aGlzLmNhbWVyYSB9LCBGZWF0dXJlcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGZlYXR1cmVzLmluY2x1ZGVzKCdsaWdodCcpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbnRlbnNpdHkgPSAwLjQ7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBoZW1pc3BoZXJlTGlnaHQgPSB0aGlzLmxpZ2h0cy5oZW1pc3BoZXJlTGlnaHQoeyBza3lDb2xvcjogMHhmZmZmZmYsIGdyb3VuZENvbG9yOiAweDAwMDAwMCwgaW50ZW5zaXR5IH0pO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYW1iaWVudExpZ2h0ID0gdGhpcy5saWdodHMuYW1iaWVudExpZ2h0KHsgY29sb3I6IDB4ZmZmZmZmLCBpbnRlbnNpdHkgfSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkaXJlY3Rpb25hbExpZ2h0ID0gdGhpcy5saWdodHMuZGlyZWN0aW9uYWxMaWdodCh7IGNvbG9yOiAweGZmZmZmZiwgaW50ZW5zaXR5IH0pO1xyXG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uYWxMaWdodC5wb3NpdGlvbi5zZXQoMTAwLCAyMDAsIDUwKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGQgPSAyMDtcclxuICAgICAgICAgICAgICAgIGRpcmVjdGlvbmFsTGlnaHQuc2hhZG93LmNhbWVyYS50b3AgPSBkO1xyXG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uYWxMaWdodC5zaGFkb3cuY2FtZXJhLmJvdHRvbSA9IC1kO1xyXG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uYWxMaWdodC5zaGFkb3cuY2FtZXJhLmxlZnQgPSAtZDtcclxuICAgICAgICAgICAgICAgIGRpcmVjdGlvbmFsTGlnaHQuc2hhZG93LmNhbWVyYS5yaWdodCA9IGQ7XHJcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb25hbExpZ2h0LnNoYWRvdy5tYXBTaXplLnNldCgxMDI0LCAxMDI0KTtcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMuZGlyZWN0aW9uYWxMaWdodCA9IGxpZ2h0XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsaWdodHMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYW1iaWVudExpZ2h0LFxyXG4gICAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbmFsTGlnaHQsXHJcbiAgICAgICAgICAgICAgICAgICAgaGVtaXNwaGVyZUxpZ2h0XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgRmVhdHVyZXMgPSBPYmplY3QuYXNzaWduKHsgbGlnaHRzIH0sIEZlYXR1cmVzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZmVhdHVyZXMuaW5jbHVkZXMoJ2xvb2tBdENlbnRlcicpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNhbWVyYS5sb29rQXQodGhpcy5zY2VuZS5wb3NpdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGZlYXR1cmVzLmluY2x1ZGVzKCdncm91bmQnKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gZ3JpZCAodGV4dHVyZSlcclxuICAgICAgICAgICAgICAgIGNvbnN0IGFkZEdyaWQgPSBmZWF0dXJlcy5pbmNsdWRlcygnZ3JpZCcpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZ3JpZERhdGEgPSAnZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFFQUFBQUJBQ0FZQUFBQ3FhWEhlQUFBQUJITkNTVlFJQ0FnSWZBaGtpQUFBQUFsd1NGbHpBQUFPbkFBQUR1c0JaK3E4N0FBQUFKdEpSRUZVZUp6dDBFRU53REFBeExEYk5QNlVPeGgrTkVZUTVkbDJkckZ2Mjg2NTk4R3JBN1FHNkFDdEFUcEFhNEFPMEJxZ0E3UUc2QUN0QVRwQWE0QU8wQnFnQTdRRzZBQ3RBVHBBYTRBTzBCcWdBN1FHNkFDdEFUcEFhNEFPMEJxZ0E3UUc2QUN0QVRwQWE0QU8wQnFnQTdRRzZBQ3RBVHBBYTRBTzBCcWdBN1FHNkFDdEFUcEFhNEFPMEJxZ0E3UUc2QUN0QVRwQXUzN0FEOGVhQkg1SlFkVmJBQUFBQUVsRlRrU3VRbUNDJztcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRleHR1cmUgPSB5aWVsZCB0aGlzLmxvYWQudGV4dHVyZShncmlkRGF0YSk7XHJcbiAgICAgICAgICAgICAgICB0ZXh0dXJlLndyYXBTID0gdGV4dHVyZS53cmFwVCA9IFRIUkVFLlJlcGVhdFdyYXBwaW5nO1xyXG4gICAgICAgICAgICAgICAgdGV4dHVyZS5yZXBlYXQuc2V0KDIxLCAyMSk7XHJcbiAgICAgICAgICAgICAgICAvLyBncm91bmRcclxuICAgICAgICAgICAgICAgIGNvbnN0IGdlb21ldHJ5ID0geyBuYW1lOiAnZ3JvdW5kJywgd2lkdGg6IDIxLCBoZWlnaHQ6IDIxLCBkZXB0aDogMSwgeTogLTAuNSB9O1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWF0ZXJpYWwgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGhvbmc6IHsgbWFwOiBhZGRHcmlkID8gdGV4dHVyZSA6IG51bGwsIHRyYW5zcGFyZW50OiB0cnVlLCBvcGFjaXR5OiAwLjgsIGNvbG9yOiAweGZmZmZmZiB9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgbGV0IGdyb3VuZDtcclxuICAgICAgICAgICAgICAgIGlmICh3aW5kb3cuX19sb2FkUGh5c2ljcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGdyb3VuZCA9IHRoaXMucGh5c2ljcy5hZGQuZ3JvdW5kKGdlb21ldHJ5LCBtYXRlcmlhbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZ3JvdW5kLmJvZHkuc2V0UmVzdGl0dXRpb24oMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBncm91bmQgPSB0aGlzLmZhY3Rvcmllcy5hZGQuZ3JvdW5kKGdlb21ldHJ5LCBtYXRlcmlhbCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBncm91bmQucmVjZWl2ZVNoYWRvdyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBGZWF0dXJlcyA9IE9iamVjdC5hc3NpZ24oeyBncm91bmQgfSwgRmVhdHVyZXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChmZWF0dXJlcy5pbmNsdWRlcygnb3JiaXRDb250cm9scycpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBmb3IgcGhhc2VyXHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzLnJvb3QgaXMgdGhlIHBoYXNlciBzY2VuZSAoc2NlbmUzRClcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMucm9vdC5zY2FsZS5wYXJlbnQgaW5zdGVhZCBvZiB0aGlzLnJlbmRlcmVyLmRvbUVsZW1lbnRcclxuICAgICAgICAgICAgICAgIGNvbnN0IG9yYml0Q29udHJvbHMgPSBuZXcgaW5kZXhfMS5PcmJpdENvbnRyb2xzKHRoaXMuY2FtZXJhLCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW5hYmxlM2QtcGhhc2VyLWNhbnZhcycpIHx8IHRoaXMucmVuZGVyZXIuZG9tRWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICBGZWF0dXJlcyA9IE9iamVjdC5hc3NpZ24oeyBvcmJpdENvbnRyb2xzIH0sIEZlYXR1cmVzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gRmVhdHVyZXM7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0cy5kZWZhdWx0ID0gV2FycFNwZWVkO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD13YXJwU3BlZWQuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbi8qKlxyXG4gKiBAYXV0aG9yICAgICAgIFlhbm5pY2sgRGV1YmVsIChodHRwczovL2dpdGh1Yi5jb20veWFuZGV1KVxyXG4gKiBAY29weXJpZ2h0ICAgIENvcHlyaWdodCAoYykgMjAyMCBZYW5uaWNrIERldWJlbDsgUHJvamVjdCBVcmw6IGh0dHBzOi8vZ2l0aHViLmNvbS9lbmFibGUzZC9lbmFibGUzZFxyXG4gKiBAbGljZW5zZSAgICAgIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZW5hYmxlM2QvZW5hYmxlM2QvYmxvYi9tYXN0ZXIvTElDRU5TRXxHTlUgR1BMdjN9XHJcbiAqL1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmNvbnN0IFRIUkVFID0gcmVxdWlyZShcIkBlbmFibGUzZC90aHJlZS13cmFwcGVyL2Rpc3QvaW5kZXhcIik7XHJcbmNsYXNzIFdlYlhSIHtcclxuICAgIGNvbnN0cnVjdG9yKF9yZW5kZXJlciwgX3NjZW5lLCBfY2FtZXJhKSB7XHJcbiAgICAgICAgLy8gaHR0cHM6Ly9tZWRpdW0uY29tL3NhbXN1bmctaW50ZXJuZXQtZGV2L3ZyLWxvY29tb3Rpb24tNzQwZGFmYTg1OTE0XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZXIgPSBfcmVuZGVyZXI7XHJcbiAgICAgICAgdGhpcy5fc2NlbmUgPSBfc2NlbmU7XHJcbiAgICAgICAgdGhpcy5fY2FtZXJhID0gX2NhbWVyYTtcclxuICAgICAgICB0aGlzLmNvbnRyb2xsZXJNb2RlbEZhY3RvcnkgPSBuZXcgVEhSRUUuWFJDb250cm9sbGVyTW9kZWxGYWN0b3J5KCk7XHJcbiAgICAgICAgLy8gY29uc3QgZ2VvID0gbmV3IFRIUkVFLlNwaGVyZUdlb21ldHJ5KDAuNSlcclxuICAgICAgICAvLyBjb25zdCBtYXQgPSBuZXcgVEhSRUUuTWVzaExhbWJlcnRNYXRlcmlhbCh7IGNvbG9yOiAweGZmMDAwMCB9KVxyXG4gICAgICAgIC8vIHRoaXMuZG90ID0gbmV3IFRIUkVFLk1lc2goZ2VvLCBtYXQpXHJcbiAgICAgICAgLy8gdGhpcy5kb3QucG9zaXRpb24uc2V0KDAsIDEsIDApXHJcbiAgICAgICAgdGhpcy5jYW1lcmFHcm91cCA9IG5ldyBUSFJFRS5Hcm91cCgpO1xyXG4gICAgICAgIHRoaXMuY2FtZXJhR3JvdXAuYWRkKF9jYW1lcmEpO1xyXG4gICAgICAgIF9zY2VuZS5hZGQodGhpcy5jYW1lcmFHcm91cCk7XHJcbiAgICAgICAgX3JlbmRlcmVyLnhyLmVuYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgIC8vIGFkZCB2ciBidXR0b25cclxuICAgICAgICBjb25zdCB2ckJ1dHRvbiA9IFRIUkVFLlZSQnV0dG9uLmNyZWF0ZUJ1dHRvbihfcmVuZGVyZXIpO1xyXG4gICAgICAgIHZyQnV0dG9uLnN0eWxlLmNzc1RleHQgKz0gJ2JhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC44KTsgJztcclxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHZyQnV0dG9uKTtcclxuICAgIH1cclxuICAgIGdldCBpc1ByZXNlbnRpbmcoKSB7XHJcbiAgICAgICAgdmFyIF9hLCBfYjtcclxuICAgICAgICByZXR1cm4gISEoKF9iID0gKF9hID0gdGhpcy5fcmVuZGVyZXIpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS54cikgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmlzUHJlc2VudGluZyk7XHJcbiAgICB9XHJcbiAgICBnZXRDb250cm9sbGVyKGlkKSB7XHJcbiAgICAgICAgY29uc3QgY29udHJvbGxlciA9IHRoaXMuX3JlbmRlcmVyLnhyLmdldENvbnRyb2xsZXIoaWQpO1xyXG4gICAgICAgIHRoaXMuY2FtZXJhR3JvdXAuYWRkKGNvbnRyb2xsZXIpO1xyXG4gICAgICAgIHJldHVybiBjb250cm9sbGVyO1xyXG4gICAgfVxyXG4gICAgZ2V0Q29udHJvbGxlckdyaXAoaWQpIHtcclxuICAgICAgICBjb25zdCBjb250cm9sbGVyR3JpcCA9IHRoaXMuX3JlbmRlcmVyLnhyLmdldENvbnRyb2xsZXJHcmlwKGlkKTtcclxuICAgICAgICBjb25zdCBtb2RlbCA9IHRoaXMuY29udHJvbGxlck1vZGVsRmFjdG9yeS5jcmVhdGVDb250cm9sbGVyTW9kZWwoY29udHJvbGxlckdyaXApO1xyXG4gICAgICAgIGNvbnRyb2xsZXJHcmlwLmFkZChtb2RlbCk7XHJcbiAgICAgICAgdGhpcy5jYW1lcmFHcm91cC5hZGQoY29udHJvbGxlckdyaXApO1xyXG4gICAgICAgIHJldHVybiBjb250cm9sbGVyR3JpcDtcclxuICAgIH1cclxuICAgIGdldENvbnRyb2xsZXJSYXkoZGF0YSkge1xyXG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9tcmRvb2IvdGhyZWUuanMvYmxvYi9tYXN0ZXIvZXhhbXBsZXMvd2VieHJfdnJfYmFsbHNob290ZXIuaHRtbFxyXG4gICAgICAgIGNvbnN0IHsgdGFyZ2V0UmF5TW9kZSB9ID0gZGF0YTtcclxuICAgICAgICBpZiAodGFyZ2V0UmF5TW9kZSA9PT0gJ3RyYWNrZWQtcG9pbnRlcicpIHtcclxuICAgICAgICAgICAgbGV0IGdlb21ldHJ5ID0gbmV3IFRIUkVFLkJ1ZmZlckdlb21ldHJ5KCk7XHJcbiAgICAgICAgICAgIGdlb21ldHJ5LnNldEF0dHJpYnV0ZSgncG9zaXRpb24nLCBuZXcgVEhSRUUuRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZShbMCwgMCwgMCwgMCwgMCwgLTFdLCAzKSk7XHJcbiAgICAgICAgICAgIGdlb21ldHJ5LnNldEF0dHJpYnV0ZSgnY29sb3InLCBuZXcgVEhSRUUuRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZShbMSwgMCwgMCwgMSwgMSwgMV0sIDMpKTtcclxuICAgICAgICAgICAgbGV0IG1hdGVyaWFsID0gbmV3IFRIUkVFLkxpbmVCYXNpY01hdGVyaWFsKHtcclxuICAgICAgICAgICAgICAgIHZlcnRleENvbG9yczogdHJ1ZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBUSFJFRS5MaW5lKGdlb21ldHJ5LCBtYXRlcmlhbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0YXJnZXRSYXlNb2RlID09PSAnZ2F6ZScpIHtcclxuICAgICAgICAgICAgbGV0IGdlb21ldHJ5ID0gbmV3IFRIUkVFLlJpbmdCdWZmZXJHZW9tZXRyeSgwLjAyLCAwLjA0LCAzMikudHJhbnNsYXRlKDAsIDAsIC0xKTtcclxuICAgICAgICAgICAgbGV0IG1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHsgY29sb3I6ICdyZWQnLCBvcGFjaXR5OiAwLjUsIHRyYW5zcGFyZW50OiB0cnVlIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFRIUkVFLk1lc2goZ2VvbWV0cnksIG1hdGVyaWFsKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgZ2V0IGNhbWVyYSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5XZWJYUkNhbWVyYTtcclxuICAgIH1cclxuICAgIGdldCBXZWJYUkNhbWVyYSgpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgZ3JvdXA6IHRoaXMuY2FtZXJhR3JvdXAsXHJcbiAgICAgICAgICAgIHBvc2l0aW9uOiAoX2EgPSB0aGlzLmNhbWVyYUdyb3VwKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucG9zaXRpb24sXHJcbiAgICAgICAgICAgIHJvdGF0aW9uOiB0aGlzLmlzUHJlc2VudGluZyA/IHRoaXMuX3JlbmRlcmVyLnhyLmdldENhbWVyYSh0aGlzLl9jYW1lcmEpLnJvdGF0aW9uIDogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICBnZXRXb3JsZERpcmVjdGlvbjogKHRhcmdldCkgPT4gdGhpcy5pc1ByZXNlbnRpbmcgPyB0aGlzLl9yZW5kZXJlci54ci5nZXRDYW1lcmEodGhpcy5fY2FtZXJhKS5nZXRXb3JsZERpcmVjdGlvbih0YXJnZXQpIDogdW5kZWZpbmVkXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufVxyXG5leHBvcnRzLmRlZmF1bHQgPSBXZWJYUjtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9d2VieHIuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5WRVJTSU9OID0gdm9pZCAwO1xyXG5leHBvcnRzLlZFUlNJT04gPSAnMC4yMS4wJztcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dmVyc2lvbi5qcy5tYXAiLCIhZnVuY3Rpb24odCxlKXtmb3IodmFyIG4gaW4gZSl0W25dPWVbbl19KGV4cG9ydHMsZnVuY3Rpb24odCl7dmFyIGU9e307ZnVuY3Rpb24gbihyKXtpZihlW3JdKXJldHVybiBlW3JdLmV4cG9ydHM7dmFyIGk9ZVtyXT17aTpyLGw6ITEsZXhwb3J0czp7fX07cmV0dXJuIHRbcl0uY2FsbChpLmV4cG9ydHMsaSxpLmV4cG9ydHMsbiksaS5sPSEwLGkuZXhwb3J0c31yZXR1cm4gbi5tPXQsbi5jPWUsbi5kPWZ1bmN0aW9uKHQsZSxyKXtuLm8odCxlKXx8T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsZSx7ZW51bWVyYWJsZTohMCxnZXQ6cn0pfSxuLnI9ZnVuY3Rpb24odCl7XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFN5bWJvbCYmU3ltYm9sLnRvU3RyaW5nVGFnJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxTeW1ib2wudG9TdHJpbmdUYWcse3ZhbHVlOlwiTW9kdWxlXCJ9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KX0sbi50PWZ1bmN0aW9uKHQsZSl7aWYoMSZlJiYodD1uKHQpKSw4JmUpcmV0dXJuIHQ7aWYoNCZlJiZcIm9iamVjdFwiPT10eXBlb2YgdCYmdCYmdC5fX2VzTW9kdWxlKXJldHVybiB0O3ZhciByPU9iamVjdC5jcmVhdGUobnVsbCk7aWYobi5yKHIpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiZGVmYXVsdFwiLHtlbnVtZXJhYmxlOiEwLHZhbHVlOnR9KSwyJmUmJlwic3RyaW5nXCIhPXR5cGVvZiB0KWZvcih2YXIgaSBpbiB0KW4uZChyLGksZnVuY3Rpb24oZSl7cmV0dXJuIHRbZV19LmJpbmQobnVsbCxpKSk7cmV0dXJuIHJ9LG4ubj1mdW5jdGlvbih0KXt2YXIgZT10JiZ0Ll9fZXNNb2R1bGU/ZnVuY3Rpb24oKXtyZXR1cm4gdC5kZWZhdWx0fTpmdW5jdGlvbigpe3JldHVybiB0fTtyZXR1cm4gbi5kKGUsXCJhXCIsZSksZX0sbi5vPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LGUpfSxuLnA9XCJcIixuKG4ucz00KX0oW2Z1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtuLnIoZSksbi5kKGUsXCJBQ0VTRmlsbWljVG9uZU1hcHBpbmdcIiwoZnVuY3Rpb24oKXtyZXR1cm4gbnR9KSksbi5kKGUsXCJBZGRFcXVhdGlvblwiLChmdW5jdGlvbigpe3JldHVybiBUfSkpLG4uZChlLFwiQWRkT3BlcmF0aW9uXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEt9KSksbi5kKGUsXCJBZGRpdGl2ZUFuaW1hdGlvbkJsZW5kTW9kZVwiLChmdW5jdGlvbigpe3JldHVybiBYZX0pKSxuLmQoZSxcIkFkZGl0aXZlQmxlbmRpbmdcIiwoZnVuY3Rpb24oKXtyZXR1cm4gd30pKSxuLmQoZSxcIkFscGhhRm9ybWF0XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEJ0fSkpLG4uZChlLFwiQWx3YXlzRGVwdGhcIiwoZnVuY3Rpb24oKXtyZXR1cm4ga30pKSxuLmQoZSxcIkFsd2F5c1N0ZW5jaWxGdW5jXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFNufSkpLG4uZChlLFwiQW1iaWVudExpZ2h0XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIExofSkpLG4uZChlLFwiQW1iaWVudExpZ2h0UHJvYmVcIiwoZnVuY3Rpb24oKXtyZXR1cm4gSmh9KSksbi5kKGUsXCJBbmltYXRpb25DbGlwXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIER1fSkpLG4uZChlLFwiQW5pbWF0aW9uTG9hZGVyXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFZ1fSkpLG4uZChlLFwiQW5pbWF0aW9uTWl4ZXJcIiwoZnVuY3Rpb24oKXtyZXR1cm4gQWR9KSksbi5kKGUsXCJBbmltYXRpb25PYmplY3RHcm91cFwiLChmdW5jdGlvbigpe3JldHVybiBUZH0pKSxuLmQoZSxcIkFuaW1hdGlvblV0aWxzXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIF91fSkpLG4uZChlLFwiQXJjQ3VydmVcIiwoZnVuY3Rpb24oKXtyZXR1cm4gS3V9KSksbi5kKGUsXCJBcnJheUNhbWVyYVwiLChmdW5jdGlvbigpe3JldHVybiBQc30pKSxuLmQoZSxcIkFycm93SGVscGVyXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGdwfSkpLG4uZChlLFwiQXVkaW9cIiwoZnVuY3Rpb24oKXtyZXR1cm4gc2R9KSksbi5kKGUsXCJBdWRpb0FuYWx5c2VyXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHBkfSkpLG4uZChlLFwiQXVkaW9Db250ZXh0XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHFofSkpLG4uZChlLFwiQXVkaW9MaXN0ZW5lclwiLChmdW5jdGlvbigpe3JldHVybiBhZH0pKSxuLmQoZSxcIkF1ZGlvTG9hZGVyXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFlofSkpLG4uZChlLFwiQXhlc0hlbHBlclwiLChmdW5jdGlvbigpe3JldHVybiB2cH0pKSxuLmQoZSxcIkF4aXNIZWxwZXJcIiwoZnVuY3Rpb24oKXtyZXR1cm4gdmZ9KSksbi5kKGUsXCJCYWNrU2lkZVwiLChmdW5jdGlvbigpe3JldHVybiBtfSkpLG4uZChlLFwiQmFzaWNEZXB0aFBhY2tpbmdcIiwoZnVuY3Rpb24oKXtyZXR1cm4gb259KSksbi5kKGUsXCJCYXNpY1NoYWRvd01hcFwiLChmdW5jdGlvbigpe3JldHVybiB1fSkpLG4uZChlLFwiQmluYXJ5VGV4dHVyZUxvYWRlclwiLChmdW5jdGlvbigpe3JldHVybiBfZn0pKSxuLmQoZSxcIkJvbmVcIiwoZnVuY3Rpb24oKXtyZXR1cm4gbGN9KSksbi5kKGUsXCJCb29sZWFuS2V5ZnJhbWVUcmFja1wiLChmdW5jdGlvbigpe3JldHVybiBMdX0pKSxuLmQoZSxcIkJvdW5kaW5nQm94SGVscGVyXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHlmfSkpLG4uZChlLFwiQm94MlwiLChmdW5jdGlvbigpe3JldHVybiBGZH0pKSxuLmQoZSxcIkJveDNcIiwoZnVuY3Rpb24oKXtyZXR1cm4gdHJ9KSksbi5kKGUsXCJCb3gzSGVscGVyXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGhwfSkpLG4uZChlLFwiQm94QnVmZmVyR2VvbWV0cnlcIiwoZnVuY3Rpb24oKXtyZXR1cm4gbW99KSksbi5kKGUsXCJCb3hHZW9tZXRyeVwiLChmdW5jdGlvbigpe3JldHVybiBXY30pKSxuLmQoZSxcIkJveEhlbHBlclwiLChmdW5jdGlvbigpe3JldHVybiB1cH0pKSxuLmQoZSxcIkJ1ZmZlckF0dHJpYnV0ZVwiLChmdW5jdGlvbigpe3JldHVybiBUaX0pKSxuLmQoZSxcIkJ1ZmZlckdlb21ldHJ5XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHFpfSkpLG4uZChlLFwiQnVmZmVyR2VvbWV0cnlMb2FkZXJcIiwoZnVuY3Rpb24oKXtyZXR1cm4gQmh9KSksbi5kKGUsXCJCeXRlVHlwZVwiLChmdW5jdGlvbigpe3JldHVybiBUdH0pKSxuLmQoZSxcIkNhY2hlXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEZ1fSkpLG4uZChlLFwiQ2FtZXJhXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGJvfSkpLG4uZChlLFwiQ2FtZXJhSGVscGVyXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHNwfSkpLG4uZChlLFwiQ2FudmFzUmVuZGVyZXJcIiwoZnVuY3Rpb24oKXtyZXR1cm4gVGZ9KSksbi5kKGUsXCJDYW52YXNUZXh0dXJlXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFVjfSkpLG4uZChlLFwiQ2F0bXVsbFJvbUN1cnZlM1wiLChmdW5jdGlvbigpe3JldHVybiByaH0pKSxuLmQoZSxcIkNpbmVvblRvbmVNYXBwaW5nXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGV0fSkpLG4uZChlLFwiQ2lyY2xlQnVmZmVyR2VvbWV0cnlcIiwoZnVuY3Rpb24oKXtyZXR1cm4gWGN9KSksbi5kKGUsXCJDaXJjbGVHZW9tZXRyeVwiLChmdW5jdGlvbigpe3JldHVybiBxY30pKSxuLmQoZSxcIkNsYW1wVG9FZGdlV3JhcHBpbmdcIiwoZnVuY3Rpb24oKXtyZXR1cm4gZHR9KSksbi5kKGUsXCJDbG9ja1wiLChmdW5jdGlvbigpe3JldHVybiB0ZH0pKSxuLmQoZSxcIkNsb3NlZFNwbGluZUN1cnZlM1wiLChmdW5jdGlvbigpe3JldHVybiBmZn0pKSxuLmQoZSxcIkNvbG9yXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHlpfSkpLG4uZChlLFwiQ29sb3JLZXlmcmFtZVRyYWNrXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFJ1fSkpLG4uZChlLFwiQ29tcHJlc3NlZFRleHR1cmVcIiwoZnVuY3Rpb24oKXtyZXR1cm4gRmN9KSksbi5kKGUsXCJDb21wcmVzc2VkVGV4dHVyZUxvYWRlclwiLChmdW5jdGlvbigpe3JldHVybiBqdX0pKSxuLmQoZSxcIkNvbmVCdWZmZXJHZW9tZXRyeVwiLChmdW5jdGlvbigpe3JldHVybiBLY30pKSxuLmQoZSxcIkNvbmVHZW9tZXRyeVwiLChmdW5jdGlvbigpe3JldHVybiBKY30pKSxuLmQoZSxcIkN1YmVDYW1lcmFcIiwoZnVuY3Rpb24oKXtyZXR1cm4gX299KSksbi5kKGUsXCJDdWJlR2VvbWV0cnlcIiwoZnVuY3Rpb24oKXtyZXR1cm4gV2N9KSksbi5kKGUsXCJDdWJlUmVmbGVjdGlvbk1hcHBpbmdcIiwoZnVuY3Rpb24oKXtyZXR1cm4gb3R9KSksbi5kKGUsXCJDdWJlUmVmcmFjdGlvbk1hcHBpbmdcIiwoZnVuY3Rpb24oKXtyZXR1cm4gYXR9KSksbi5kKGUsXCJDdWJlVGV4dHVyZVwiLChmdW5jdGlvbigpe3JldHVybiBNb30pKSxuLmQoZSxcIkN1YmVUZXh0dXJlTG9hZGVyXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFh1fSkpLG4uZChlLFwiQ3ViZVVWUmVmbGVjdGlvbk1hcHBpbmdcIiwoZnVuY3Rpb24oKXtyZXR1cm4gbHR9KSksbi5kKGUsXCJDdWJlVVZSZWZyYWN0aW9uTWFwcGluZ1wiLChmdW5jdGlvbigpe3JldHVybiB1dH0pKSxuLmQoZSxcIkN1YmljQmV6aWVyQ3VydmVcIiwoZnVuY3Rpb24oKXtyZXR1cm4gc2h9KSksbi5kKGUsXCJDdWJpY0JlemllckN1cnZlM1wiLChmdW5jdGlvbigpe3JldHVybiBjaH0pKSxuLmQoZSxcIkN1YmljSW50ZXJwb2xhbnRcIiwoZnVuY3Rpb24oKXtyZXR1cm4gU3V9KSksbi5kKGUsXCJDdWxsRmFjZUJhY2tcIiwoZnVuY3Rpb24oKXtyZXR1cm4gc30pKSxuLmQoZSxcIkN1bGxGYWNlRnJvbnRcIiwoZnVuY3Rpb24oKXtyZXR1cm4gY30pKSxuLmQoZSxcIkN1bGxGYWNlRnJvbnRCYWNrXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGx9KSksbi5kKGUsXCJDdWxsRmFjZU5vbmVcIiwoZnVuY3Rpb24oKXtyZXR1cm4gYX0pKSxuLmQoZSxcIkN1cnZlXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFp1fSkpLG4uZChlLFwiQ3VydmVQYXRoXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIG1ofSkpLG4uZChlLFwiQ3VzdG9tQmxlbmRpbmdcIiwoZnVuY3Rpb24oKXtyZXR1cm4gU30pKSxuLmQoZSxcIkN1c3RvbVRvbmVNYXBwaW5nXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHJ0fSkpLG4uZChlLFwiQ3lsaW5kZXJCdWZmZXJHZW9tZXRyeVwiLChmdW5jdGlvbigpe3JldHVybiBZY30pKSxuLmQoZSxcIkN5bGluZGVyR2VvbWV0cnlcIiwoZnVuY3Rpb24oKXtyZXR1cm4gWmN9KSksbi5kKGUsXCJDeWxpbmRyaWNhbFwiLChmdW5jdGlvbigpe3JldHVybiBEZH0pKSxuLmQoZSxcIkRhdGFUZXh0dXJlXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFRvfSkpLG4uZChlLFwiRGF0YVRleHR1cmUyREFycmF5XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFpvfSkpLG4uZChlLFwiRGF0YVRleHR1cmUzRFwiLChmdW5jdGlvbigpe3JldHVybiBKb30pKSxuLmQoZSxcIkRhdGFUZXh0dXJlTG9hZGVyXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHF1fSkpLG4uZChlLFwiRGF0YVV0aWxzXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGJwfSkpLG4uZChlLFwiRGVjcmVtZW50U3RlbmNpbE9wXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHBufSkpLG4uZChlLFwiRGVjcmVtZW50V3JhcFN0ZW5jaWxPcFwiLChmdW5jdGlvbigpe3JldHVybiBtbn0pKSxuLmQoZSxcIkRlZmF1bHRMb2FkaW5nTWFuYWdlclwiLChmdW5jdGlvbigpe3JldHVybiB6dX0pKSxuLmQoZSxcIkRlcHRoRm9ybWF0XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGt0fSkpLG4uZChlLFwiRGVwdGhTdGVuY2lsRm9ybWF0XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFZ0fSkpLG4uZChlLFwiRGVwdGhUZXh0dXJlXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHpjfSkpLG4uZChlLFwiRGlyZWN0aW9uYWxMaWdodFwiLChmdW5jdGlvbigpe3JldHVybiBBaH0pKSxuLmQoZSxcIkRpcmVjdGlvbmFsTGlnaHRIZWxwZXJcIiwoZnVuY3Rpb24oKXtyZXR1cm4gaXB9KSksbi5kKGUsXCJEaXNjcmV0ZUludGVycG9sYW50XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEV1fSkpLG4uZChlLFwiRG9kZWNhaGVkcm9uQnVmZmVyR2VvbWV0cnlcIiwoZnVuY3Rpb24oKXtyZXR1cm4gJGN9KSksbi5kKGUsXCJEb2RlY2FoZWRyb25HZW9tZXRyeVwiLChmdW5jdGlvbigpe3JldHVybiB0bH0pKSxuLmQoZSxcIkRvdWJsZVNpZGVcIiwoZnVuY3Rpb24oKXtyZXR1cm4gZ30pKSxuLmQoZSxcIkRzdEFscGhhRmFjdG9yXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEJ9KSksbi5kKGUsXCJEc3RDb2xvckZhY3RvclwiLChmdW5jdGlvbigpe3JldHVybiBVfSkpLG4uZChlLFwiRHluYW1pY0J1ZmZlckF0dHJpYnV0ZVwiLChmdW5jdGlvbigpe3JldHVybiByZn0pKSxuLmQoZSxcIkR5bmFtaWNDb3B5VXNhZ2VcIiwoZnVuY3Rpb24oKXtyZXR1cm4gSW59KSksbi5kKGUsXCJEeW5hbWljRHJhd1VzYWdlXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEVufSkpLG4uZChlLFwiRHluYW1pY1JlYWRVc2FnZVwiLChmdW5jdGlvbigpe3JldHVybiBSbn0pKSxuLmQoZSxcIkVkZ2VzR2VvbWV0cnlcIiwoZnVuY3Rpb24oKXtyZXR1cm4gb2x9KSksbi5kKGUsXCJFZGdlc0hlbHBlclwiLChmdW5jdGlvbigpe3JldHVybiB4Zn0pKSxuLmQoZSxcIkVsbGlwc2VDdXJ2ZVwiLChmdW5jdGlvbigpe3JldHVybiBKdX0pKSxuLmQoZSxcIkVxdWFsRGVwdGhcIiwoZnVuY3Rpb24oKXtyZXR1cm4gV30pKSxuLmQoZSxcIkVxdWFsU3RlbmNpbEZ1bmNcIiwoZnVuY3Rpb24oKXtyZXR1cm4geG59KSksbi5kKGUsXCJFcXVpcmVjdGFuZ3VsYXJSZWZsZWN0aW9uTWFwcGluZ1wiLChmdW5jdGlvbigpe3JldHVybiBzdH0pKSxuLmQoZSxcIkVxdWlyZWN0YW5ndWxhclJlZnJhY3Rpb25NYXBwaW5nXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGN0fSkpLG4uZChlLFwiRXVsZXJcIiwoZnVuY3Rpb24oKXtyZXR1cm4gT3J9KSksbi5kKGUsXCJFdmVudERpc3BhdGNoZXJcIiwoZnVuY3Rpb24oKXtyZXR1cm4gQm59KSksbi5kKGUsXCJFeHRydWRlQnVmZmVyR2VvbWV0cnlcIiwoZnVuY3Rpb24oKXtyZXR1cm4gTmx9KSksbi5kKGUsXCJFeHRydWRlR2VvbWV0cnlcIiwoZnVuY3Rpb24oKXtyZXR1cm4gQmx9KSksbi5kKGUsXCJGYWNlM1wiLChmdW5jdGlvbigpe3JldHVybiB4aX0pKSxuLmQoZSxcIkZhY2U0XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGtwfSkpLG4uZChlLFwiRmFjZUNvbG9yc1wiLChmdW5jdGlvbigpe3JldHVybiBYcH0pKSxuLmQoZSxcIkZpbGVMb2FkZXJcIiwoZnVuY3Rpb24oKXtyZXR1cm4ga3V9KSksbi5kKGUsXCJGbGF0U2hhZGluZ1wiLChmdW5jdGlvbigpe3JldHVybiB2fSkpLG4uZChlLFwiRmxvYXQxNkJ1ZmZlckF0dHJpYnV0ZVwiLChmdW5jdGlvbigpe3JldHVybiBPaX0pKSxuLmQoZSxcIkZsb2F0MzJBdHRyaWJ1dGVcIiwoZnVuY3Rpb24oKXtyZXR1cm4gZGZ9KSksbi5kKGUsXCJGbG9hdDMyQnVmZmVyQXR0cmlidXRlXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIE5pfSkpLG4uZChlLFwiRmxvYXQ2NEF0dHJpYnV0ZVwiLChmdW5jdGlvbigpe3JldHVybiBwZn0pKSxuLmQoZSxcIkZsb2F0NjRCdWZmZXJBdHRyaWJ1dGVcIiwoZnVuY3Rpb24oKXtyZXR1cm4gRGl9KSksbi5kKGUsXCJGbG9hdFR5cGVcIiwoZnVuY3Rpb24oKXtyZXR1cm4gUHR9KSksbi5kKGUsXCJGb2dcIiwoZnVuY3Rpb24oKXtyZXR1cm4gVXN9KSksbi5kKGUsXCJGb2dFeHAyXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEZzfSkpLG4uZChlLFwiRm9udFwiLChmdW5jdGlvbigpe3JldHVybiBWaH0pKSxuLmQoZSxcIkZvbnRMb2FkZXJcIiwoZnVuY3Rpb24oKXtyZXR1cm4gV2h9KSksbi5kKGUsXCJGcm9udFNpZGVcIiwoZnVuY3Rpb24oKXtyZXR1cm4gZn0pKSxuLmQoZSxcIkZydXN0dW1cIiwoZnVuY3Rpb24oKXtyZXR1cm4gTG99KSksbi5kKGUsXCJHTEJ1ZmZlckF0dHJpYnV0ZVwiLChmdW5jdGlvbigpe3JldHVybiBQZH0pKSxuLmQoZSxcIkdMU0wxXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIE5ufSkpLG4uZChlLFwiR0xTTDNcIiwoZnVuY3Rpb24oKXtyZXR1cm4gRG59KSksbi5kKGUsXCJHYW1tYUVuY29kaW5nXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFFlfSkpLG4uZChlLFwiR2VvbWV0cnlcIiwoZnVuY3Rpb24oKXtyZXR1cm4gamN9KSksbi5kKGUsXCJHZW9tZXRyeVV0aWxzXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFNmfSkpLG4uZChlLFwiR3JlYXRlckRlcHRoXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHF9KSksbi5kKGUsXCJHcmVhdGVyRXF1YWxEZXB0aFwiLChmdW5jdGlvbigpe3JldHVybiBYfSkpLG4uZChlLFwiR3JlYXRlckVxdWFsU3RlbmNpbEZ1bmNcIiwoZnVuY3Rpb24oKXtyZXR1cm4gTW59KSksbi5kKGUsXCJHcmVhdGVyU3RlbmNpbEZ1bmNcIiwoZnVuY3Rpb24oKXtyZXR1cm4gd259KSksbi5kKGUsXCJHcmlkSGVscGVyXCIsKGZ1bmN0aW9uKCl7cmV0dXJuICRkfSkpLG4uZChlLFwiR3JvdXBcIiwoZnVuY3Rpb24oKXtyZXR1cm4gQ3N9KSksbi5kKGUsXCJIYWxmRmxvYXRUeXBlXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEN0fSkpLG4uZChlLFwiSGVtaXNwaGVyZUxpZ2h0XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHhofSkpLG4uZChlLFwiSGVtaXNwaGVyZUxpZ2h0SGVscGVyXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFFkfSkpLG4uZChlLFwiSGVtaXNwaGVyZUxpZ2h0UHJvYmVcIiwoZnVuY3Rpb24oKXtyZXR1cm4gWmh9KSksbi5kKGUsXCJJY29zYWhlZHJvbkJ1ZmZlckdlb21ldHJ5XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEZsfSkpLG4uZChlLFwiSWNvc2FoZWRyb25HZW9tZXRyeVwiLChmdW5jdGlvbigpe3JldHVybiBVbH0pKSxuLmQoZSxcIkltYWdlQml0bWFwTG9hZGVyXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEhofSkpLG4uZChlLFwiSW1hZ2VMb2FkZXJcIiwoZnVuY3Rpb24oKXtyZXR1cm4gV3V9KSksbi5kKGUsXCJJbWFnZVV0aWxzXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFZufSkpLG4uZChlLFwiSW1tZWRpYXRlUmVuZGVyT2JqZWN0XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEhkfSkpLG4uZChlLFwiSW5jcmVtZW50U3RlbmNpbE9wXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGRufSkpLG4uZChlLFwiSW5jcmVtZW50V3JhcFN0ZW5jaWxPcFwiLChmdW5jdGlvbigpe3JldHVybiBmbn0pKSxuLmQoZSxcIkluc3RhbmNlZEJ1ZmZlckF0dHJpYnV0ZVwiLChmdW5jdGlvbigpe3JldHVybiBEaH0pKSxuLmQoZSxcIkluc3RhbmNlZEJ1ZmZlckdlb21ldHJ5XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIE5ofSkpLG4uZChlLFwiSW5zdGFuY2VkSW50ZXJsZWF2ZWRCdWZmZXJcIiwoZnVuY3Rpb24oKXtyZXR1cm4gUmR9KSksbi5kKGUsXCJJbnN0YW5jZWRNZXNoXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHZjfSkpLG4uZChlLFwiSW50MTZBdHRyaWJ1dGVcIiwoZnVuY3Rpb24oKXtyZXR1cm4gY2Z9KSksbi5kKGUsXCJJbnQxNkJ1ZmZlckF0dHJpYnV0ZVwiLChmdW5jdGlvbigpe3JldHVybiBSaX0pKSxuLmQoZSxcIkludDMyQXR0cmlidXRlXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHVmfSkpLG4uZChlLFwiSW50MzJCdWZmZXJBdHRyaWJ1dGVcIiwoZnVuY3Rpb24oKXtyZXR1cm4gQ2l9KSksbi5kKGUsXCJJbnQ4QXR0cmlidXRlXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIG9mfSkpLG4uZChlLFwiSW50OEJ1ZmZlckF0dHJpYnV0ZVwiLChmdW5jdGlvbigpe3JldHVybiBFaX0pKSxuLmQoZSxcIkludFR5cGVcIiwoZnVuY3Rpb24oKXtyZXR1cm4gTHR9KSksbi5kKGUsXCJJbnRlcmxlYXZlZEJ1ZmZlclwiLChmdW5jdGlvbigpe3JldHVybiBHc30pKSxuLmQoZSxcIkludGVybGVhdmVkQnVmZmVyQXR0cmlidXRlXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGtzfSkpLG4uZChlLFwiSW50ZXJwb2xhbnRcIiwoZnVuY3Rpb24oKXtyZXR1cm4gTXV9KSksbi5kKGUsXCJJbnRlcnBvbGF0ZURpc2NyZXRlXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHplfSkpLG4uZChlLFwiSW50ZXJwb2xhdGVMaW5lYXJcIiwoZnVuY3Rpb24oKXtyZXR1cm4gR2V9KSksbi5kKGUsXCJJbnRlcnBvbGF0ZVNtb290aFwiLChmdW5jdGlvbigpe3JldHVybiBIZX0pKSxuLmQoZSxcIkludmVydFN0ZW5jaWxPcFwiLChmdW5jdGlvbigpe3JldHVybiBnbn0pKSxuLmQoZSxcIkpTT05Mb2FkZXJcIiwoZnVuY3Rpb24oKXtyZXR1cm4gRWZ9KSksbi5kKGUsXCJLZWVwU3RlbmNpbE9wXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHVufSkpLG4uZChlLFwiS2V5ZnJhbWVUcmFja1wiLChmdW5jdGlvbigpe3JldHVybiBBdX0pKSxuLmQoZSxcIkxPRFwiLChmdW5jdGlvbigpe3JldHVybiBzY30pKSxuLmQoZSxcIkxhdGhlQnVmZmVyR2VvbWV0cnlcIiwoZnVuY3Rpb24oKXtyZXR1cm4gemx9KSksbi5kKGUsXCJMYXRoZUdlb21ldHJ5XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEdsfSkpLG4uZChlLFwiTGF5ZXJzXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEJyfSkpLG4uZChlLFwiTGVuc0ZsYXJlXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIExmfSkpLG4uZChlLFwiTGVzc0RlcHRoXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFZ9KSksbi5kKGUsXCJMZXNzRXF1YWxEZXB0aFwiLChmdW5jdGlvbigpe3JldHVybiBqfSkpLG4uZChlLFwiTGVzc0VxdWFsU3RlbmNpbEZ1bmNcIiwoZnVuY3Rpb24oKXtyZXR1cm4gYm59KSksbi5kKGUsXCJMZXNzU3RlbmNpbEZ1bmNcIiwoZnVuY3Rpb24oKXtyZXR1cm4geW59KSksbi5kKGUsXCJMaWdodFwiLChmdW5jdGlvbigpe3JldHVybiB5aH0pKSxuLmQoZSxcIkxpZ2h0UHJvYmVcIiwoZnVuY3Rpb24oKXtyZXR1cm4gQ2h9KSksbi5kKGUsXCJMaW5lXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFNjfSkpLG4uZChlLFwiTGluZTNcIiwoZnVuY3Rpb24oKXtyZXR1cm4gR2R9KSksbi5kKGUsXCJMaW5lQmFzaWNNYXRlcmlhbFwiLChmdW5jdGlvbigpe3JldHVybiB5Y30pKSxuLmQoZSxcIkxpbmVDdXJ2ZVwiLChmdW5jdGlvbigpe3JldHVybiBsaH0pKSxuLmQoZSxcIkxpbmVDdXJ2ZTNcIiwoZnVuY3Rpb24oKXtyZXR1cm4gdWh9KSksbi5kKGUsXCJMaW5lRGFzaGVkTWF0ZXJpYWxcIiwoZnVuY3Rpb24oKXtyZXR1cm4gYnV9KSksbi5kKGUsXCJMaW5lTG9vcFwiLChmdW5jdGlvbigpe3JldHVybiBMY30pKSxuLmQoZSxcIkxpbmVQaWVjZXNcIiwoZnVuY3Rpb24oKXtyZXR1cm4ganB9KSksbi5kKGUsXCJMaW5lU2VnbWVudHNcIiwoZnVuY3Rpb24oKXtyZXR1cm4gQWN9KSksbi5kKGUsXCJMaW5lU3RyaXBcIiwoZnVuY3Rpb24oKXtyZXR1cm4gVnB9KSksbi5kKGUsXCJMaW5lYXJFbmNvZGluZ1wiLChmdW5jdGlvbigpe3JldHVybiBKZX0pKSxuLmQoZSxcIkxpbmVhckZpbHRlclwiLChmdW5jdGlvbigpe3JldHVybiB4dH0pKSxuLmQoZSxcIkxpbmVhckludGVycG9sYW50XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFR1fSkpLG4uZChlLFwiTGluZWFyTWlwTWFwTGluZWFyRmlsdGVyXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIE10fSkpLG4uZChlLFwiTGluZWFyTWlwTWFwTmVhcmVzdEZpbHRlclwiLChmdW5jdGlvbigpe3JldHVybiB3dH0pKSxuLmQoZSxcIkxpbmVhck1pcG1hcExpbmVhckZpbHRlclwiLChmdW5jdGlvbigpe3JldHVybiBfdH0pKSxuLmQoZSxcIkxpbmVhck1pcG1hcE5lYXJlc3RGaWx0ZXJcIiwoZnVuY3Rpb24oKXtyZXR1cm4gYnR9KSksbi5kKGUsXCJMaW5lYXJUb25lTWFwcGluZ1wiLChmdW5jdGlvbigpe3JldHVybiAkfSkpLG4uZChlLFwiTG9hZGVyXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEd1fSkpLG4uZChlLFwiTG9hZGVyVXRpbHNcIiwoZnVuY3Rpb24oKXtyZXR1cm4gT2h9KSksbi5kKGUsXCJMb2FkaW5nTWFuYWdlclwiLChmdW5jdGlvbigpe3JldHVybiBVdX0pKSxuLmQoZSxcIkxvZ0x1dkVuY29kaW5nXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHRufSkpLG4uZChlLFwiTG9vcE9uY2VcIiwoZnVuY3Rpb24oKXtyZXR1cm4gQmV9KSksbi5kKGUsXCJMb29wUGluZ1BvbmdcIiwoZnVuY3Rpb24oKXtyZXR1cm4gVWV9KSksbi5kKGUsXCJMb29wUmVwZWF0XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEZlfSkpLG4uZChlLFwiTHVtaW5hbmNlQWxwaGFGb3JtYXRcIiwoZnVuY3Rpb24oKXtyZXR1cm4gR3R9KSksbi5kKGUsXCJMdW1pbmFuY2VGb3JtYXRcIiwoZnVuY3Rpb24oKXtyZXR1cm4genR9KSksbi5kKGUsXCJNT1VTRVwiLChmdW5jdGlvbigpe3JldHVybiBpfSkpLG4uZChlLFwiTWF0ZXJpYWxcIiwoZnVuY3Rpb24oKXtyZXR1cm4gd2l9KSksbi5kKGUsXCJNYXRlcmlhbExvYWRlclwiLChmdW5jdGlvbigpe3JldHVybiBJaH0pKSxuLmQoZSxcIk1hdGhcIiwoZnVuY3Rpb24oKXtyZXR1cm4gem59KSksbi5kKGUsXCJNYXRoVXRpbHNcIiwoZnVuY3Rpb24oKXtyZXR1cm4gem59KSksbi5kKGUsXCJNYXRyaXgzXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEhufSkpLG4uZChlLFwiTWF0cml4NFwiLChmdW5jdGlvbigpe3JldHVybiBUcn0pKSxuLmQoZSxcIk1heEVxdWF0aW9uXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFJ9KSksbi5kKGUsXCJNZXNoXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGhvfSkpLG4uZChlLFwiTWVzaEJhc2ljTWF0ZXJpYWxcIiwoZnVuY3Rpb24oKXtyZXR1cm4gX2l9KSksbi5kKGUsXCJNZXNoRGVwdGhNYXRlcmlhbFwiLChmdW5jdGlvbigpe3JldHVybiBTc30pKSxuLmQoZSxcIk1lc2hEaXN0YW5jZU1hdGVyaWFsXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFRzfSkpLG4uZChlLFwiTWVzaEZhY2VNYXRlcmlhbFwiLChmdW5jdGlvbigpe3JldHVybiBZcH0pKSxuLmQoZSxcIk1lc2hMYW1iZXJ0TWF0ZXJpYWxcIiwoZnVuY3Rpb24oKXtyZXR1cm4geXV9KSksbi5kKGUsXCJNZXNoTWF0Y2FwTWF0ZXJpYWxcIiwoZnVuY3Rpb24oKXtyZXR1cm4geHV9KSksbi5kKGUsXCJNZXNoTm9ybWFsTWF0ZXJpYWxcIiwoZnVuY3Rpb24oKXtyZXR1cm4gdnV9KSksbi5kKGUsXCJNZXNoUGhvbmdNYXRlcmlhbFwiLChmdW5jdGlvbigpe3JldHVybiBtdX0pKSxuLmQoZSxcIk1lc2hQaHlzaWNhbE1hdGVyaWFsXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1fSkpLG4uZChlLFwiTWVzaFN0YW5kYXJkTWF0ZXJpYWxcIiwoZnVuY3Rpb24oKXtyZXR1cm4gcHV9KSksbi5kKGUsXCJNZXNoVG9vbk1hdGVyaWFsXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGd1fSkpLG4uZChlLFwiTWluRXF1YXRpb25cIiwoZnVuY3Rpb24oKXtyZXR1cm4gTH0pKSxuLmQoZSxcIk1pcnJvcmVkUmVwZWF0V3JhcHBpbmdcIiwoZnVuY3Rpb24oKXtyZXR1cm4gcHR9KSksbi5kKGUsXCJNaXhPcGVyYXRpb25cIiwoZnVuY3Rpb24oKXtyZXR1cm4gSn0pKSxuLmQoZSxcIk11bHRpTWF0ZXJpYWxcIiwoZnVuY3Rpb24oKXtyZXR1cm4gWnB9KSksbi5kKGUsXCJNdWx0aXBseUJsZW5kaW5nXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIE19KSksbi5kKGUsXCJNdWx0aXBseU9wZXJhdGlvblwiLChmdW5jdGlvbigpe3JldHVybiBafSkpLG4uZChlLFwiTmVhcmVzdEZpbHRlclwiLChmdW5jdGlvbigpe3JldHVybiBmdH0pKSxuLmQoZSxcIk5lYXJlc3RNaXBNYXBMaW5lYXJGaWx0ZXJcIiwoZnVuY3Rpb24oKXtyZXR1cm4geXR9KSksbi5kKGUsXCJOZWFyZXN0TWlwTWFwTmVhcmVzdEZpbHRlclwiLChmdW5jdGlvbigpe3JldHVybiBndH0pKSxuLmQoZSxcIk5lYXJlc3RNaXBtYXBMaW5lYXJGaWx0ZXJcIiwoZnVuY3Rpb24oKXtyZXR1cm4gdnR9KSksbi5kKGUsXCJOZWFyZXN0TWlwbWFwTmVhcmVzdEZpbHRlclwiLChmdW5jdGlvbigpe3JldHVybiBtdH0pKSxuLmQoZSxcIk5ldmVyRGVwdGhcIiwoZnVuY3Rpb24oKXtyZXR1cm4gSH0pKSxuLmQoZSxcIk5ldmVyU3RlbmNpbEZ1bmNcIiwoZnVuY3Rpb24oKXtyZXR1cm4gdm59KSksbi5kKGUsXCJOb0JsZW5kaW5nXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHh9KSksbi5kKGUsXCJOb0NvbG9yc1wiLChmdW5jdGlvbigpe3JldHVybiBXcH0pKSxuLmQoZSxcIk5vVG9uZU1hcHBpbmdcIiwoZnVuY3Rpb24oKXtyZXR1cm4gUX0pKSxuLmQoZSxcIk5vcm1hbEFuaW1hdGlvbkJsZW5kTW9kZVwiLChmdW5jdGlvbigpe3JldHVybiBXZX0pKSxuLmQoZSxcIk5vcm1hbEJsZW5kaW5nXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGJ9KSksbi5kKGUsXCJOb3RFcXVhbERlcHRoXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFl9KSksbi5kKGUsXCJOb3RFcXVhbFN0ZW5jaWxGdW5jXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIF9ufSkpLG4uZChlLFwiTnVtYmVyS2V5ZnJhbWVUcmFja1wiLChmdW5jdGlvbigpe3JldHVybiBQdX0pKSxuLmQoZSxcIk9iamVjdDNEXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEpyfSkpLG4uZChlLFwiT2JqZWN0TG9hZGVyXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEZofSkpLG4uZChlLFwiT2JqZWN0U3BhY2VOb3JtYWxNYXBcIiwoZnVuY3Rpb24oKXtyZXR1cm4gY259KSksbi5kKGUsXCJPY3RhaGVkcm9uQnVmZmVyR2VvbWV0cnlcIiwoZnVuY3Rpb24oKXtyZXR1cm4gSGx9KSksbi5kKGUsXCJPY3RhaGVkcm9uR2VvbWV0cnlcIiwoZnVuY3Rpb24oKXtyZXR1cm4ga2x9KSksbi5kKGUsXCJPbmVGYWN0b3JcIiwoZnVuY3Rpb24oKXtyZXR1cm4gQ30pKSxuLmQoZSxcIk9uZU1pbnVzRHN0QWxwaGFGYWN0b3JcIiwoZnVuY3Rpb24oKXtyZXR1cm4gRn0pKSxuLmQoZSxcIk9uZU1pbnVzRHN0Q29sb3JGYWN0b3JcIiwoZnVuY3Rpb24oKXtyZXR1cm4gen0pKSxuLmQoZSxcIk9uZU1pbnVzU3JjQWxwaGFGYWN0b3JcIiwoZnVuY3Rpb24oKXtyZXR1cm4gRH0pKSxuLmQoZSxcIk9uZU1pbnVzU3JjQ29sb3JGYWN0b3JcIiwoZnVuY3Rpb24oKXtyZXR1cm4gT30pKSxuLmQoZSxcIk9ydGhvZ3JhcGhpY0NhbWVyYVwiLChmdW5jdGlvbigpe3JldHVybiBUaH0pKSxuLmQoZSxcIlBDRlNoYWRvd01hcFwiLChmdW5jdGlvbigpe3JldHVybiBofSkpLG4uZChlLFwiUENGU29mdFNoYWRvd01hcFwiLChmdW5jdGlvbigpe3JldHVybiBkfSkpLG4uZChlLFwiUE1SRU1HZW5lcmF0b3JcIiwoZnVuY3Rpb24oKXtyZXR1cm4gT3B9KSksbi5kKGUsXCJQYXJhbWV0cmljQnVmZmVyR2VvbWV0cnlcIiwoZnVuY3Rpb24oKXtyZXR1cm4gVmx9KSksbi5kKGUsXCJQYXJhbWV0cmljR2VvbWV0cnlcIiwoZnVuY3Rpb24oKXtyZXR1cm4gamx9KSksbi5kKGUsXCJQYXJ0aWNsZVwiLChmdW5jdGlvbigpe3JldHVybiBLcH0pKSxuLmQoZSxcIlBhcnRpY2xlQmFzaWNNYXRlcmlhbFwiLChmdW5jdGlvbigpe3JldHVybiB0Zn0pKSxuLmQoZSxcIlBhcnRpY2xlU3lzdGVtXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFFwfSkpLG4uZChlLFwiUGFydGljbGVTeXN0ZW1NYXRlcmlhbFwiLChmdW5jdGlvbigpe3JldHVybiBlZn0pKSxuLmQoZSxcIlBhdGhcIiwoZnVuY3Rpb24oKXtyZXR1cm4gZ2h9KSksbi5kKGUsXCJQZXJzcGVjdGl2ZUNhbWVyYVwiLChmdW5jdGlvbigpe3JldHVybiB3b30pKSxuLmQoZSxcIlBsYW5lXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHRpfSkpLG4uZChlLFwiUGxhbmVCdWZmZXJHZW9tZXRyeVwiLChmdW5jdGlvbigpe3JldHVybiBDb30pKSxuLmQoZSxcIlBsYW5lR2VvbWV0cnlcIiwoZnVuY3Rpb24oKXtyZXR1cm4gV2x9KSksbi5kKGUsXCJQbGFuZUhlbHBlclwiLChmdW5jdGlvbigpe3JldHVybiBkcH0pKSxuLmQoZSxcIlBvaW50Q2xvdWRcIiwoZnVuY3Rpb24oKXtyZXR1cm4gSnB9KSksbi5kKGUsXCJQb2ludENsb3VkTWF0ZXJpYWxcIiwoZnVuY3Rpb24oKXtyZXR1cm4gJHB9KSksbi5kKGUsXCJQb2ludExpZ2h0XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFNofSkpLG4uZChlLFwiUG9pbnRMaWdodEhlbHBlclwiLChmdW5jdGlvbigpe3JldHVybiBZZH0pKSxuLmQoZSxcIlBvaW50c1wiLChmdW5jdGlvbigpe3JldHVybiBOY30pKSxuLmQoZSxcIlBvaW50c01hdGVyaWFsXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFJjfSkpLG4uZChlLFwiUG9sYXJHcmlkSGVscGVyXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHRwfSkpLG4uZChlLFwiUG9seWhlZHJvbkJ1ZmZlckdlb21ldHJ5XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFFjfSkpLG4uZChlLFwiUG9seWhlZHJvbkdlb21ldHJ5XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFhsfSkpLG4uZChlLFwiUG9zaXRpb25hbEF1ZGlvXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGRkfSkpLG4uZChlLFwiUHJvcGVydHlCaW5kaW5nXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFNkfSkpLG4uZChlLFwiUHJvcGVydHlNaXhlclwiLChmdW5jdGlvbigpe3JldHVybiBmZH0pKSxuLmQoZSxcIlF1YWRyYXRpY0JlemllckN1cnZlXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGhofSkpLG4uZChlLFwiUXVhZHJhdGljQmV6aWVyQ3VydmUzXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGRofSkpLG4uZChlLFwiUXVhdGVybmlvblwiLChmdW5jdGlvbigpe3JldHVybiBKbn0pKSxuLmQoZSxcIlF1YXRlcm5pb25LZXlmcmFtZVRyYWNrXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEl1fSkpLG4uZChlLFwiUXVhdGVybmlvbkxpbmVhckludGVycG9sYW50XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEN1fSkpLG4uZChlLFwiUkVWSVNJT05cIiwoZnVuY3Rpb24oKXtyZXR1cm4gcn0pKSxuLmQoZSxcIlJHQkFEZXB0aFBhY2tpbmdcIiwoZnVuY3Rpb24oKXtyZXR1cm4gYW59KSksbi5kKGUsXCJSR0JBRm9ybWF0XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFV0fSkpLG4uZChlLFwiUkdCQUludGVnZXJGb3JtYXRcIiwoZnVuY3Rpb24oKXtyZXR1cm4gWnR9KSksbi5kKGUsXCJSR0JBX0FTVENfMTB4MTBfRm9ybWF0XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHllfSkpLG4uZChlLFwiUkdCQV9BU1RDXzEweDVfRm9ybWF0XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIG1lfSkpLG4uZChlLFwiUkdCQV9BU1RDXzEweDZfRm9ybWF0XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGdlfSkpLG4uZChlLFwiUkdCQV9BU1RDXzEweDhfRm9ybWF0XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHZlfSkpLG4uZChlLFwiUkdCQV9BU1RDXzEyeDEwX0Zvcm1hdFwiLChmdW5jdGlvbigpe3JldHVybiB4ZX0pKSxuLmQoZSxcIlJHQkFfQVNUQ18xMngxMl9Gb3JtYXRcIiwoZnVuY3Rpb24oKXtyZXR1cm4gYmV9KSksbi5kKGUsXCJSR0JBX0FTVENfNHg0X0Zvcm1hdFwiLChmdW5jdGlvbigpe3JldHVybiBzZX0pKSxuLmQoZSxcIlJHQkFfQVNUQ181eDRfRm9ybWF0XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGNlfSkpLG4uZChlLFwiUkdCQV9BU1RDXzV4NV9Gb3JtYXRcIiwoZnVuY3Rpb24oKXtyZXR1cm4gbGV9KSksbi5kKGUsXCJSR0JBX0FTVENfNng1X0Zvcm1hdFwiLChmdW5jdGlvbigpe3JldHVybiB1ZX0pKSxuLmQoZSxcIlJHQkFfQVNUQ182eDZfRm9ybWF0XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGhlfSkpLG4uZChlLFwiUkdCQV9BU1RDXzh4NV9Gb3JtYXRcIiwoZnVuY3Rpb24oKXtyZXR1cm4gZGV9KSksbi5kKGUsXCJSR0JBX0FTVENfOHg2X0Zvcm1hdFwiLChmdW5jdGlvbigpe3JldHVybiBwZX0pKSxuLmQoZSxcIlJHQkFfQVNUQ184eDhfRm9ybWF0XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGZlfSkpLG4uZChlLFwiUkdCQV9CUFRDX0Zvcm1hdFwiLChmdW5jdGlvbigpe3JldHVybiB3ZX0pKSxuLmQoZSxcIlJHQkFfRVRDMl9FQUNfRm9ybWF0XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGFlfSkpLG4uZChlLFwiUkdCQV9QVlJUQ18yQlBQVjFfRm9ybWF0XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHJlfSkpLG4uZChlLFwiUkdCQV9QVlJUQ180QlBQVjFfRm9ybWF0XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIG5lfSkpLG4uZChlLFwiUkdCQV9TM1RDX0RYVDFfRm9ybWF0XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEt0fSkpLG4uZChlLFwiUkdCQV9TM1RDX0RYVDNfRm9ybWF0XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFF0fSkpLG4uZChlLFwiUkdCQV9TM1RDX0RYVDVfRm9ybWF0XCIsKGZ1bmN0aW9uKCl7cmV0dXJuICR0fSkpLG4uZChlLFwiUkdCREVuY29kaW5nXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHJufSkpLG4uZChlLFwiUkdCRUVuY29kaW5nXCIsKGZ1bmN0aW9uKCl7cmV0dXJuICRlfSkpLG4uZChlLFwiUkdCRUZvcm1hdFwiLChmdW5jdGlvbigpe3JldHVybiBIdH0pKSxuLmQoZSxcIlJHQkZvcm1hdFwiLChmdW5jdGlvbigpe3JldHVybiBGdH0pKSxuLmQoZSxcIlJHQkludGVnZXJGb3JtYXRcIiwoZnVuY3Rpb24oKXtyZXR1cm4gWXR9KSksbi5kKGUsXCJSR0JNMTZFbmNvZGluZ1wiLChmdW5jdGlvbigpe3JldHVybiBubn0pKSxuLmQoZSxcIlJHQk03RW5jb2RpbmdcIiwoZnVuY3Rpb24oKXtyZXR1cm4gZW59KSksbi5kKGUsXCJSR0JfRVRDMV9Gb3JtYXRcIiwoZnVuY3Rpb24oKXtyZXR1cm4gaWV9KSksbi5kKGUsXCJSR0JfRVRDMl9Gb3JtYXRcIiwoZnVuY3Rpb24oKXtyZXR1cm4gb2V9KSksbi5kKGUsXCJSR0JfUFZSVENfMkJQUFYxX0Zvcm1hdFwiLChmdW5jdGlvbigpe3JldHVybiBlZX0pKSxuLmQoZSxcIlJHQl9QVlJUQ180QlBQVjFfRm9ybWF0XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHRlfSkpLG4uZChlLFwiUkdCX1MzVENfRFhUMV9Gb3JtYXRcIiwoZnVuY3Rpb24oKXtyZXR1cm4gSnR9KSksbi5kKGUsXCJSR0Zvcm1hdFwiLChmdW5jdGlvbigpe3JldHVybiBYdH0pKSxuLmQoZSxcIlJHSW50ZWdlckZvcm1hdFwiLChmdW5jdGlvbigpe3JldHVybiBxdH0pKSxuLmQoZSxcIlJhd1NoYWRlck1hdGVyaWFsXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGR1fSkpLG4uZChlLFwiUmF5XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFNyfSkpLG4uZChlLFwiUmF5Y2FzdGVyXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIENkfSkpLG4uZChlLFwiUmVjdEFyZWFMaWdodFwiLChmdW5jdGlvbigpe3JldHVybiBSaH0pKSxuLmQoZSxcIlJlZEZvcm1hdFwiLChmdW5jdGlvbigpe3JldHVybiBqdH0pKSxuLmQoZSxcIlJlZEludGVnZXJGb3JtYXRcIiwoZnVuY3Rpb24oKXtyZXR1cm4gV3R9KSksbi5kKGUsXCJSZWluaGFyZFRvbmVNYXBwaW5nXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHR0fSkpLG4uZChlLFwiUmVwZWF0V3JhcHBpbmdcIiwoZnVuY3Rpb24oKXtyZXR1cm4gaHR9KSksbi5kKGUsXCJSZXBsYWNlU3RlbmNpbE9wXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGhufSkpLG4uZChlLFwiUmV2ZXJzZVN1YnRyYWN0RXF1YXRpb25cIiwoZnVuY3Rpb24oKXtyZXR1cm4gQX0pKSxuLmQoZSxcIlJpbmdCdWZmZXJHZW9tZXRyeVwiLChmdW5jdGlvbigpe3JldHVybiBxbH0pKSxuLmQoZSxcIlJpbmdHZW9tZXRyeVwiLChmdW5jdGlvbigpe3JldHVybiBZbH0pKSxuLmQoZSxcIlNSR0I4X0FMUEhBOF9BU1RDXzEweDEwX0Zvcm1hdFwiLChmdW5jdGlvbigpe3JldHVybiBPZX0pKSxuLmQoZSxcIlNSR0I4X0FMUEhBOF9BU1RDXzEweDVfRm9ybWF0XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFBlfSkpLG4uZChlLFwiU1JHQjhfQUxQSEE4X0FTVENfMTB4Nl9Gb3JtYXRcIiwoZnVuY3Rpb24oKXtyZXR1cm4gQ2V9KSksbi5kKGUsXCJTUkdCOF9BTFBIQThfQVNUQ18xMHg4X0Zvcm1hdFwiLChmdW5jdGlvbigpe3JldHVybiBJZX0pKSxuLmQoZSxcIlNSR0I4X0FMUEhBOF9BU1RDXzEyeDEwX0Zvcm1hdFwiLChmdW5jdGlvbigpe3JldHVybiBOZX0pKSxuLmQoZSxcIlNSR0I4X0FMUEhBOF9BU1RDXzEyeDEyX0Zvcm1hdFwiLChmdW5jdGlvbigpe3JldHVybiBEZX0pKSxuLmQoZSxcIlNSR0I4X0FMUEhBOF9BU1RDXzR4NF9Gb3JtYXRcIiwoZnVuY3Rpb24oKXtyZXR1cm4gX2V9KSksbi5kKGUsXCJTUkdCOF9BTFBIQThfQVNUQ181eDRfRm9ybWF0XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIE1lfSkpLG4uZChlLFwiU1JHQjhfQUxQSEE4X0FTVENfNXg1X0Zvcm1hdFwiLChmdW5jdGlvbigpe3JldHVybiBTZX0pKSxuLmQoZSxcIlNSR0I4X0FMUEhBOF9BU1RDXzZ4NV9Gb3JtYXRcIiwoZnVuY3Rpb24oKXtyZXR1cm4gVGV9KSksbi5kKGUsXCJTUkdCOF9BTFBIQThfQVNUQ182eDZfRm9ybWF0XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEVlfSkpLG4uZChlLFwiU1JHQjhfQUxQSEE4X0FTVENfOHg1X0Zvcm1hdFwiLChmdW5jdGlvbigpe3JldHVybiBBZX0pKSxuLmQoZSxcIlNSR0I4X0FMUEhBOF9BU1RDXzh4Nl9Gb3JtYXRcIiwoZnVuY3Rpb24oKXtyZXR1cm4gTGV9KSksbi5kKGUsXCJTUkdCOF9BTFBIQThfQVNUQ184eDhfRm9ybWF0XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFJlfSkpLG4uZChlLFwiU2NlbmVcIiwoZnVuY3Rpb24oKXtyZXR1cm4genN9KSksbi5kKGUsXCJTY2VuZVV0aWxzXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEFmfSkpLG4uZChlLFwiU2hhZGVyQ2h1bmtcIiwoZnVuY3Rpb24oKXtyZXR1cm4gSW99KSksbi5kKGUsXCJTaGFkZXJMaWJcIiwoZnVuY3Rpb24oKXtyZXR1cm4gTm99KSksbi5kKGUsXCJTaGFkZXJNYXRlcmlhbFwiLChmdW5jdGlvbigpe3JldHVybiB4b30pKSxuLmQoZSxcIlNoYWRvd01hdGVyaWFsXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGh1fSkpLG4uZChlLFwiU2hhcGVcIiwoZnVuY3Rpb24oKXtyZXR1cm4gdmh9KSksbi5kKGUsXCJTaGFwZUJ1ZmZlckdlb21ldHJ5XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFpsfSkpLG4uZChlLFwiU2hhcGVHZW9tZXRyeVwiLChmdW5jdGlvbigpe3JldHVybiBKbH0pKSxuLmQoZSxcIlNoYXBlUGF0aFwiLChmdW5jdGlvbigpe3JldHVybiBraH0pKSxuLmQoZSxcIlNoYXBlVXRpbHNcIiwoZnVuY3Rpb24oKXtyZXR1cm4gQ2x9KSksbi5kKGUsXCJTaG9ydFR5cGVcIiwoZnVuY3Rpb24oKXtyZXR1cm4gRXR9KSksbi5kKGUsXCJTa2VsZXRvblwiLChmdW5jdGlvbigpe3JldHVybiBkY30pKSxuLmQoZSxcIlNrZWxldG9uSGVscGVyXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHFkfSkpLG4uZChlLFwiU2tpbm5lZE1lc2hcIiwoZnVuY3Rpb24oKXtyZXR1cm4gY2N9KSksbi5kKGUsXCJTbW9vdGhTaGFkaW5nXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHl9KSksbi5kKGUsXCJTcGhlcmVcIiwoZnVuY3Rpb24oKXtyZXR1cm4gZ3J9KSksbi5kKGUsXCJTcGhlcmVCdWZmZXJHZW9tZXRyeVwiLChmdW5jdGlvbigpe3JldHVybiBLbH0pKSxuLmQoZSxcIlNwaGVyZUdlb21ldHJ5XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFFsfSkpLG4uZChlLFwiU3BoZXJpY2FsXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIE5kfSkpLG4uZChlLFwiU3BoZXJpY2FsSGFybW9uaWNzM1wiLChmdW5jdGlvbigpe3JldHVybiBQaH0pKSxuLmQoZSxcIlNwbGluZVwiLChmdW5jdGlvbigpe3JldHVybiBnZn0pKSxuLmQoZSxcIlNwbGluZUN1cnZlXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHBofSkpLG4uZChlLFwiU3BsaW5lQ3VydmUzXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIG1mfSkpLG4uZChlLFwiU3BvdExpZ2h0XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIF9ofSkpLG4uZChlLFwiU3BvdExpZ2h0SGVscGVyXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFZkfSkpLG4uZChlLFwiU3ByaXRlXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHJjfSkpLG4uZChlLFwiU3ByaXRlTWF0ZXJpYWxcIiwoZnVuY3Rpb24oKXtyZXR1cm4gVnN9KSksbi5kKGUsXCJTcmNBbHBoYUZhY3RvclwiLChmdW5jdGlvbigpe3JldHVybiBOfSkpLG4uZChlLFwiU3JjQWxwaGFTYXR1cmF0ZUZhY3RvclwiLChmdW5jdGlvbigpe3JldHVybiBHfSkpLG4uZChlLFwiU3JjQ29sb3JGYWN0b3JcIiwoZnVuY3Rpb24oKXtyZXR1cm4gSX0pKSxuLmQoZSxcIlN0YXRpY0NvcHlVc2FnZVwiLChmdW5jdGlvbigpe3JldHVybiBDbn0pKSxuLmQoZSxcIlN0YXRpY0RyYXdVc2FnZVwiLChmdW5jdGlvbigpe3JldHVybiBUbn0pKSxuLmQoZSxcIlN0YXRpY1JlYWRVc2FnZVwiLChmdW5jdGlvbigpe3JldHVybiBMbn0pKSxuLmQoZSxcIlN0ZXJlb0NhbWVyYVwiLChmdW5jdGlvbigpe3JldHVybiAkaH0pKSxuLmQoZSxcIlN0cmVhbUNvcHlVc2FnZVwiLChmdW5jdGlvbigpe3JldHVybiBPbn0pKSxuLmQoZSxcIlN0cmVhbURyYXdVc2FnZVwiLChmdW5jdGlvbigpe3JldHVybiBBbn0pKSxuLmQoZSxcIlN0cmVhbVJlYWRVc2FnZVwiLChmdW5jdGlvbigpe3JldHVybiBQbn0pKSxuLmQoZSxcIlN0cmluZ0tleWZyYW1lVHJhY2tcIiwoZnVuY3Rpb24oKXtyZXR1cm4gT3V9KSksbi5kKGUsXCJTdWJ0cmFjdEVxdWF0aW9uXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEV9KSksbi5kKGUsXCJTdWJ0cmFjdGl2ZUJsZW5kaW5nXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIF99KSksbi5kKGUsXCJUT1VDSFwiLChmdW5jdGlvbigpe3JldHVybiBvfSkpLG4uZChlLFwiVGFuZ2VudFNwYWNlTm9ybWFsTWFwXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHNufSkpLG4uZChlLFwiVGV0cmFoZWRyb25CdWZmZXJHZW9tZXRyeVwiLChmdW5jdGlvbigpe3JldHVybiAkbH0pKSxuLmQoZSxcIlRldHJhaGVkcm9uR2VvbWV0cnlcIiwoZnVuY3Rpb24oKXtyZXR1cm4gdHV9KSksbi5kKGUsXCJUZXh0QnVmZmVyR2VvbWV0cnlcIiwoZnVuY3Rpb24oKXtyZXR1cm4gZXV9KSksbi5kKGUsXCJUZXh0R2VvbWV0cnlcIiwoZnVuY3Rpb24oKXtyZXR1cm4gbnV9KSksbi5kKGUsXCJUZXh0dXJlXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFdufSkpLG4uZChlLFwiVGV4dHVyZUxvYWRlclwiLChmdW5jdGlvbigpe3JldHVybiBZdX0pKSxuLmQoZSxcIlRvcnVzQnVmZmVyR2VvbWV0cnlcIiwoZnVuY3Rpb24oKXtyZXR1cm4gcnV9KSksbi5kKGUsXCJUb3J1c0dlb21ldHJ5XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGl1fSkpLG4uZChlLFwiVG9ydXNLbm90QnVmZmVyR2VvbWV0cnlcIiwoZnVuY3Rpb24oKXtyZXR1cm4gb3V9KSksbi5kKGUsXCJUb3J1c0tub3RHZW9tZXRyeVwiLChmdW5jdGlvbigpe3JldHVybiBhdX0pKSxuLmQoZSxcIlRyaWFuZ2xlXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGhpfSkpLG4uZChlLFwiVHJpYW5nbGVGYW5EcmF3TW9kZVwiLChmdW5jdGlvbigpe3JldHVybiBaZX0pKSxuLmQoZSxcIlRyaWFuZ2xlU3RyaXBEcmF3TW9kZVwiLChmdW5jdGlvbigpe3JldHVybiBZZX0pKSxuLmQoZSxcIlRyaWFuZ2xlc0RyYXdNb2RlXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHFlfSkpLG4uZChlLFwiVHViZUJ1ZmZlckdlb21ldHJ5XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHN1fSkpLG4uZChlLFwiVHViZUdlb21ldHJ5XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGN1fSkpLG4uZChlLFwiVVZNYXBwaW5nXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGl0fSkpLG4uZChlLFwiVWludDE2QXR0cmlidXRlXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGxmfSkpLG4uZChlLFwiVWludDE2QnVmZmVyQXR0cmlidXRlXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFBpfSkpLG4uZChlLFwiVWludDMyQXR0cmlidXRlXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGhmfSkpLG4uZChlLFwiVWludDMyQnVmZmVyQXR0cmlidXRlXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIElpfSkpLG4uZChlLFwiVWludDhBdHRyaWJ1dGVcIiwoZnVuY3Rpb24oKXtyZXR1cm4gYWZ9KSksbi5kKGUsXCJVaW50OEJ1ZmZlckF0dHJpYnV0ZVwiLChmdW5jdGlvbigpe3JldHVybiBBaX0pKSxuLmQoZSxcIlVpbnQ4Q2xhbXBlZEF0dHJpYnV0ZVwiLChmdW5jdGlvbigpe3JldHVybiBzZn0pKSxuLmQoZSxcIlVpbnQ4Q2xhbXBlZEJ1ZmZlckF0dHJpYnV0ZVwiLChmdW5jdGlvbigpe3JldHVybiBMaX0pKSxuLmQoZSxcIlVuaWZvcm1cIiwoZnVuY3Rpb24oKXtyZXR1cm4gTGR9KSksbi5kKGUsXCJVbmlmb3Jtc0xpYlwiLChmdW5jdGlvbigpe3JldHVybiBPb30pKSxuLmQoZSxcIlVuaWZvcm1zVXRpbHNcIiwoZnVuY3Rpb24oKXtyZXR1cm4geW99KSksbi5kKGUsXCJVbnNpZ25lZEJ5dGVUeXBlXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFN0fSkpLG4uZChlLFwiVW5zaWduZWRJbnQyNDhUeXBlXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIER0fSkpLG4uZChlLFwiVW5zaWduZWRJbnRUeXBlXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFJ0fSkpLG4uZChlLFwiVW5zaWduZWRTaG9ydDQ0NDRUeXBlXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEl0fSkpLG4uZChlLFwiVW5zaWduZWRTaG9ydDU1NTFUeXBlXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIE90fSkpLG4uZChlLFwiVW5zaWduZWRTaG9ydDU2NVR5cGVcIiwoZnVuY3Rpb24oKXtyZXR1cm4gTnR9KSksbi5kKGUsXCJVbnNpZ25lZFNob3J0VHlwZVwiLChmdW5jdGlvbigpe3JldHVybiBBdH0pKSxuLmQoZSxcIlZTTVNoYWRvd01hcFwiLChmdW5jdGlvbigpe3JldHVybiBwfSkpLG4uZChlLFwiVmVjdG9yMlwiLChmdW5jdGlvbigpe3JldHVybiBHbn0pKSxuLmQoZSxcIlZlY3RvcjNcIiwoZnVuY3Rpb24oKXtyZXR1cm4gS259KSksbi5kKGUsXCJWZWN0b3I0XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHFufSkpLG4uZChlLFwiVmVjdG9yS2V5ZnJhbWVUcmFja1wiLChmdW5jdGlvbigpe3JldHVybiBOdX0pKSxuLmQoZSxcIlZlcnRleFwiLChmdW5jdGlvbigpe3JldHVybiBuZn0pKSxuLmQoZSxcIlZlcnRleENvbG9yc1wiLChmdW5jdGlvbigpe3JldHVybiBxcH0pKSxuLmQoZSxcIlZpZGVvVGV4dHVyZVwiLChmdW5jdGlvbigpe3JldHVybiBCY30pKSxuLmQoZSxcIldlYkdMMVJlbmRlcmVyXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEJzfSkpLG4uZChlLFwiV2ViR0xDdWJlUmVuZGVyVGFyZ2V0XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFNvfSkpLG4uZChlLFwiV2ViR0xNdWx0aXNhbXBsZVJlbmRlclRhcmdldFwiLChmdW5jdGlvbigpe3JldHVybiBabn0pKSxuLmQoZSxcIldlYkdMUmVuZGVyVGFyZ2V0XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFlufSkpLG4uZChlLFwiV2ViR0xSZW5kZXJUYXJnZXRDdWJlXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIE1mfSkpLG4uZChlLFwiV2ViR0xSZW5kZXJlclwiLChmdW5jdGlvbigpe3JldHVybiBEc30pKSxuLmQoZSxcIldlYkdMVXRpbHNcIiwoZnVuY3Rpb24oKXtyZXR1cm4gUnN9KSksbi5kKGUsXCJXaXJlZnJhbWVHZW9tZXRyeVwiLChmdW5jdGlvbigpe3JldHVybiBsdX0pKSxuLmQoZSxcIldpcmVmcmFtZUhlbHBlclwiLChmdW5jdGlvbigpe3JldHVybiBiZn0pKSxuLmQoZSxcIldyYXBBcm91bmRFbmRpbmdcIiwoZnVuY3Rpb24oKXtyZXR1cm4gamV9KSksbi5kKGUsXCJYSFJMb2FkZXJcIiwoZnVuY3Rpb24oKXtyZXR1cm4gd2Z9KSksbi5kKGUsXCJaZXJvQ3VydmF0dXJlRW5kaW5nXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGtlfSkpLG4uZChlLFwiWmVyb0ZhY3RvclwiLChmdW5jdGlvbigpe3JldHVybiBQfSkpLG4uZChlLFwiWmVyb1Nsb3BlRW5kaW5nXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFZlfSkpLG4uZChlLFwiWmVyb1N0ZW5jaWxPcFwiLChmdW5jdGlvbigpe3JldHVybiBsbn0pKSxuLmQoZSxcInNSR0JFbmNvZGluZ1wiLChmdW5jdGlvbigpe3JldHVybiBLZX0pKTtjb25zdCByPVwiMTIzXCIsaT17TEVGVDowLE1JRERMRToxLFJJR0hUOjIsUk9UQVRFOjAsRE9MTFk6MSxQQU46Mn0sbz17Uk9UQVRFOjAsUEFOOjEsRE9MTFlfUEFOOjIsRE9MTFlfUk9UQVRFOjN9LGE9MCxzPTEsYz0yLGw9Myx1PTAsaD0xLGQ9MixwPTMsZj0wLG09MSxnPTIsdj0xLHk9Mix4PTAsYj0xLHc9MixfPTMsTT00LFM9NSxUPTEwMCxFPTEwMSxBPTEwMixMPTEwMyxSPTEwNCxQPTIwMCxDPTIwMSxJPTIwMixPPTIwMyxOPTIwNCxEPTIwNSxCPTIwNixGPTIwNyxVPTIwOCx6PTIwOSxHPTIxMCxIPTAsaz0xLFY9MixqPTMsVz00LFg9NSxxPTYsWT03LFo9MCxKPTEsSz0yLFE9MCwkPTEsdHQ9MixldD0zLG50PTQscnQ9NSxpdD0zMDAsb3Q9MzAxLGF0PTMwMixzdD0zMDMsY3Q9MzA0LGx0PTMwNix1dD0zMDcsaHQ9MWUzLGR0PTEwMDEscHQ9MTAwMixmdD0xMDAzLG10PTEwMDQsZ3Q9MTAwNCx2dD0xMDA1LHl0PTEwMDUseHQ9MTAwNixidD0xMDA3LHd0PTEwMDcsX3Q9MTAwOCxNdD0xMDA4LFN0PTEwMDksVHQ9MTAxMCxFdD0xMDExLEF0PTEwMTIsTHQ9MTAxMyxSdD0xMDE0LFB0PTEwMTUsQ3Q9MTAxNixJdD0xMDE3LE90PTEwMTgsTnQ9MTAxOSxEdD0xMDIwLEJ0PTEwMjEsRnQ9MTAyMixVdD0xMDIzLHp0PTEwMjQsR3Q9MTAyNSxIdD1VdCxrdD0xMDI2LFZ0PTEwMjcsanQ9MTAyOCxXdD0xMDI5LFh0PTEwMzAscXQ9MTAzMSxZdD0xMDMyLFp0PTEwMzMsSnQ9MzM3NzYsS3Q9MzM3NzcsUXQ9MzM3NzgsJHQ9MzM3NzksdGU9MzU4NDAsZWU9MzU4NDEsbmU9MzU4NDIscmU9MzU4NDMsaWU9MzYxOTYsb2U9Mzc0OTIsYWU9Mzc0OTYsc2U9Mzc4MDgsY2U9Mzc4MDksbGU9Mzc4MTAsdWU9Mzc4MTEsaGU9Mzc4MTIsZGU9Mzc4MTMscGU9Mzc4MTQsZmU9Mzc4MTUsbWU9Mzc4MTYsZ2U9Mzc4MTcsdmU9Mzc4MTgseWU9Mzc4MTkseGU9Mzc4MjAsYmU9Mzc4MjEsd2U9MzY0OTIsX2U9Mzc4NDAsTWU9Mzc4NDEsU2U9Mzc4NDIsVGU9Mzc4NDMsRWU9Mzc4NDQsQWU9Mzc4NDUsTGU9Mzc4NDYsUmU9Mzc4NDcsUGU9Mzc4NDgsQ2U9Mzc4NDksSWU9Mzc4NTAsT2U9Mzc4NTEsTmU9Mzc4NTIsRGU9Mzc4NTMsQmU9MjIwMCxGZT0yMjAxLFVlPTIyMDIsemU9MjMwMCxHZT0yMzAxLEhlPTIzMDIsa2U9MjQwMCxWZT0yNDAxLGplPTI0MDIsV2U9MjUwMCxYZT0yNTAxLHFlPTAsWWU9MSxaZT0yLEplPTNlMyxLZT0zMDAxLFFlPTMwMDcsJGU9MzAwMix0bj0zMDAzLGVuPTMwMDQsbm49MzAwNSxybj0zMDA2LG9uPTMyMDAsYW49MzIwMSxzbj0wLGNuPTEsbG49MCx1bj03NjgwLGhuPTc2ODEsZG49NzY4Mixwbj03NjgzLGZuPTM0MDU1LG1uPTM0MDU2LGduPTUzODYsdm49NTEyLHluPTUxMyx4bj01MTQsYm49NTE1LHduPTUxNixfbj01MTcsTW49NTE4LFNuPTUxOSxUbj0zNTA0NCxFbj0zNTA0OCxBbj0zNTA0MCxMbj0zNTA0NSxSbj0zNTA0OSxQbj0zNTA0MSxDbj0zNTA0NixJbj0zNTA1MCxPbj0zNTA0MixObj1cIjEwMFwiLERuPVwiMzAwIGVzXCI7ZnVuY3Rpb24gQm4oKXt9T2JqZWN0LmFzc2lnbihCbi5wcm90b3R5cGUse2FkZEV2ZW50TGlzdGVuZXI6ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT10aGlzLl9saXN0ZW5lcnMmJih0aGlzLl9saXN0ZW5lcnM9e30pO2NvbnN0IG49dGhpcy5fbGlzdGVuZXJzO3ZvaWQgMD09PW5bdF0mJihuW3RdPVtdKSwtMT09PW5bdF0uaW5kZXhPZihlKSYmblt0XS5wdXNoKGUpfSxoYXNFdmVudExpc3RlbmVyOmZ1bmN0aW9uKHQsZSl7aWYodm9pZCAwPT09dGhpcy5fbGlzdGVuZXJzKXJldHVybiExO2NvbnN0IG49dGhpcy5fbGlzdGVuZXJzO3JldHVybiB2b2lkIDAhPT1uW3RdJiYtMSE9PW5bdF0uaW5kZXhPZihlKX0scmVtb3ZlRXZlbnRMaXN0ZW5lcjpmdW5jdGlvbih0LGUpe2lmKHZvaWQgMD09PXRoaXMuX2xpc3RlbmVycylyZXR1cm47Y29uc3Qgbj10aGlzLl9saXN0ZW5lcnNbdF07aWYodm9pZCAwIT09bil7Y29uc3QgdD1uLmluZGV4T2YoZSk7LTEhPT10JiZuLnNwbGljZSh0LDEpfX0sZGlzcGF0Y2hFdmVudDpmdW5jdGlvbih0KXtpZih2b2lkIDA9PT10aGlzLl9saXN0ZW5lcnMpcmV0dXJuO2NvbnN0IGU9dGhpcy5fbGlzdGVuZXJzW3QudHlwZV07aWYodm9pZCAwIT09ZSl7dC50YXJnZXQ9dGhpcztjb25zdCBuPWUuc2xpY2UoMCk7Zm9yKGxldCBlPTAscj1uLmxlbmd0aDtlPHI7ZSsrKW5bZV0uY2FsbCh0aGlzLHQpfX19KTtjb25zdCBGbj1bXTtmb3IobGV0IHQ9MDt0PDI1Njt0KyspRm5bdF09KHQ8MTY/XCIwXCI6XCJcIikrdC50b1N0cmluZygxNik7bGV0IFVuPTEyMzQ1Njc7Y29uc3Qgem49e0RFRzJSQUQ6TWF0aC5QSS8xODAsUkFEMkRFRzoxODAvTWF0aC5QSSxnZW5lcmF0ZVVVSUQ6ZnVuY3Rpb24oKXtjb25zdCB0PTQyOTQ5NjcyOTUqTWF0aC5yYW5kb20oKXwwLGU9NDI5NDk2NzI5NSpNYXRoLnJhbmRvbSgpfDAsbj00Mjk0OTY3Mjk1Kk1hdGgucmFuZG9tKCl8MCxyPTQyOTQ5NjcyOTUqTWF0aC5yYW5kb20oKXwwO3JldHVybihGblsyNTUmdF0rRm5bdD4+OCYyNTVdK0ZuW3Q+PjE2JjI1NV0rRm5bdD4+MjQmMjU1XStcIi1cIitGblsyNTUmZV0rRm5bZT4+OCYyNTVdK1wiLVwiK0ZuW2U+PjE2JjE1fDY0XStGbltlPj4yNCYyNTVdK1wiLVwiK0ZuWzYzJm58MTI4XStGbltuPj44JjI1NV0rXCItXCIrRm5bbj4+MTYmMjU1XStGbltuPj4yNCYyNTVdK0ZuWzI1NSZyXStGbltyPj44JjI1NV0rRm5bcj4+MTYmMjU1XStGbltyPj4yNCYyNTVdKS50b1VwcGVyQ2FzZSgpfSxjbGFtcDpmdW5jdGlvbih0LGUsbil7cmV0dXJuIE1hdGgubWF4KGUsTWF0aC5taW4obix0KSl9LGV1Y2xpZGVhbk1vZHVsbzpmdW5jdGlvbih0LGUpe3JldHVybih0JWUrZSklZX0sbWFwTGluZWFyOmZ1bmN0aW9uKHQsZSxuLHIsaSl7cmV0dXJuIHIrKHQtZSkqKGktcikvKG4tZSl9LGxlcnA6ZnVuY3Rpb24odCxlLG4pe3JldHVybigxLW4pKnQrbiplfSxzbW9vdGhzdGVwOmZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdDw9ZT8wOnQ+PW4/MToodD0odC1lKS8obi1lKSkqdCooMy0yKnQpfSxzbW9vdGhlcnN0ZXA6ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0PD1lPzA6dD49bj8xOih0PSh0LWUpLyhuLWUpKSp0KnQqKHQqKDYqdC0xNSkrMTApfSxyYW5kSW50OmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQrTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKihlLXQrMSkpfSxyYW5kRmxvYXQ6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdCtNYXRoLnJhbmRvbSgpKihlLXQpfSxyYW5kRmxvYXRTcHJlYWQ6ZnVuY3Rpb24odCl7cmV0dXJuIHQqKC41LU1hdGgucmFuZG9tKCkpfSxzZWVkZWRSYW5kb206ZnVuY3Rpb24odCl7cmV0dXJuIHZvaWQgMCE9PXQmJihVbj10JTIxNDc0ODM2NDcpLFVuPTE2ODA3KlVuJTIxNDc0ODM2NDcsKFVuLTEpLzIxNDc0ODM2NDZ9LGRlZ1RvUmFkOmZ1bmN0aW9uKHQpe3JldHVybiB0KnpuLkRFRzJSQUR9LHJhZFRvRGVnOmZ1bmN0aW9uKHQpe3JldHVybiB0KnpuLlJBRDJERUd9LGlzUG93ZXJPZlR3bzpmdW5jdGlvbih0KXtyZXR1cm4gMD09KHQmdC0xKSYmMCE9PXR9LGNlaWxQb3dlck9mVHdvOmZ1bmN0aW9uKHQpe3JldHVybiBNYXRoLnBvdygyLE1hdGguY2VpbChNYXRoLmxvZyh0KS9NYXRoLkxOMikpfSxmbG9vclBvd2VyT2ZUd286ZnVuY3Rpb24odCl7cmV0dXJuIE1hdGgucG93KDIsTWF0aC5mbG9vcihNYXRoLmxvZyh0KS9NYXRoLkxOMikpfSxzZXRRdWF0ZXJuaW9uRnJvbVByb3BlckV1bGVyOmZ1bmN0aW9uKHQsZSxuLHIsaSl7Y29uc3Qgbz1NYXRoLmNvcyxhPU1hdGguc2luLHM9byhuLzIpLGM9YShuLzIpLGw9bygoZStyKS8yKSx1PWEoKGUrcikvMiksaD1vKChlLXIpLzIpLGQ9YSgoZS1yKS8yKSxwPW8oKHItZSkvMiksZj1hKChyLWUpLzIpO3N3aXRjaChpKXtjYXNlXCJYWVhcIjp0LnNldChzKnUsYypoLGMqZCxzKmwpO2JyZWFrO2Nhc2VcIllaWVwiOnQuc2V0KGMqZCxzKnUsYypoLHMqbCk7YnJlYWs7Y2FzZVwiWlhaXCI6dC5zZXQoYypoLGMqZCxzKnUscypsKTticmVhaztjYXNlXCJYWlhcIjp0LnNldChzKnUsYypmLGMqcCxzKmwpO2JyZWFrO2Nhc2VcIllYWVwiOnQuc2V0KGMqcCxzKnUsYypmLHMqbCk7YnJlYWs7Y2FzZVwiWllaXCI6dC5zZXQoYypmLGMqcCxzKnUscypsKTticmVhaztkZWZhdWx0OmNvbnNvbGUud2FybihcIlRIUkVFLk1hdGhVdGlsczogLnNldFF1YXRlcm5pb25Gcm9tUHJvcGVyRXVsZXIoKSBlbmNvdW50ZXJlZCBhbiB1bmtub3duIG9yZGVyOiBcIitpKX19fTtjbGFzcyBHbntjb25zdHJ1Y3Rvcih0PTAsZT0wKXtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImlzVmVjdG9yMlwiLHt2YWx1ZTohMH0pLHRoaXMueD10LHRoaXMueT1lfWdldCB3aWR0aCgpe3JldHVybiB0aGlzLnh9c2V0IHdpZHRoKHQpe3RoaXMueD10fWdldCBoZWlnaHQoKXtyZXR1cm4gdGhpcy55fXNldCBoZWlnaHQodCl7dGhpcy55PXR9c2V0KHQsZSl7cmV0dXJuIHRoaXMueD10LHRoaXMueT1lLHRoaXN9c2V0U2NhbGFyKHQpe3JldHVybiB0aGlzLng9dCx0aGlzLnk9dCx0aGlzfXNldFgodCl7cmV0dXJuIHRoaXMueD10LHRoaXN9c2V0WSh0KXtyZXR1cm4gdGhpcy55PXQsdGhpc31zZXRDb21wb25lbnQodCxlKXtzd2l0Y2godCl7Y2FzZSAwOnRoaXMueD1lO2JyZWFrO2Nhc2UgMTp0aGlzLnk9ZTticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcihcImluZGV4IGlzIG91dCBvZiByYW5nZTogXCIrdCl9cmV0dXJuIHRoaXN9Z2V0Q29tcG9uZW50KHQpe3N3aXRjaCh0KXtjYXNlIDA6cmV0dXJuIHRoaXMueDtjYXNlIDE6cmV0dXJuIHRoaXMueTtkZWZhdWx0OnRocm93IG5ldyBFcnJvcihcImluZGV4IGlzIG91dCBvZiByYW5nZTogXCIrdCl9fWNsb25lKCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMueCx0aGlzLnkpfWNvcHkodCl7cmV0dXJuIHRoaXMueD10LngsdGhpcy55PXQueSx0aGlzfWFkZCh0LGUpe3JldHVybiB2b2lkIDAhPT1lPyhjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3IyOiAuYWRkKCkgbm93IG9ubHkgYWNjZXB0cyBvbmUgYXJndW1lbnQuIFVzZSAuYWRkVmVjdG9ycyggYSwgYiApIGluc3RlYWQuXCIpLHRoaXMuYWRkVmVjdG9ycyh0LGUpKToodGhpcy54Kz10LngsdGhpcy55Kz10LnksdGhpcyl9YWRkU2NhbGFyKHQpe3JldHVybiB0aGlzLngrPXQsdGhpcy55Kz10LHRoaXN9YWRkVmVjdG9ycyh0LGUpe3JldHVybiB0aGlzLng9dC54K2UueCx0aGlzLnk9dC55K2UueSx0aGlzfWFkZFNjYWxlZFZlY3Rvcih0LGUpe3JldHVybiB0aGlzLngrPXQueCplLHRoaXMueSs9dC55KmUsdGhpc31zdWIodCxlKXtyZXR1cm4gdm9pZCAwIT09ZT8oY29uc29sZS53YXJuKFwiVEhSRUUuVmVjdG9yMjogLnN1YigpIG5vdyBvbmx5IGFjY2VwdHMgb25lIGFyZ3VtZW50LiBVc2UgLnN1YlZlY3RvcnMoIGEsIGIgKSBpbnN0ZWFkLlwiKSx0aGlzLnN1YlZlY3RvcnModCxlKSk6KHRoaXMueC09dC54LHRoaXMueS09dC55LHRoaXMpfXN1YlNjYWxhcih0KXtyZXR1cm4gdGhpcy54LT10LHRoaXMueS09dCx0aGlzfXN1YlZlY3RvcnModCxlKXtyZXR1cm4gdGhpcy54PXQueC1lLngsdGhpcy55PXQueS1lLnksdGhpc31tdWx0aXBseSh0KXtyZXR1cm4gdGhpcy54Kj10LngsdGhpcy55Kj10LnksdGhpc31tdWx0aXBseVNjYWxhcih0KXtyZXR1cm4gdGhpcy54Kj10LHRoaXMueSo9dCx0aGlzfWRpdmlkZSh0KXtyZXR1cm4gdGhpcy54Lz10LngsdGhpcy55Lz10LnksdGhpc31kaXZpZGVTY2FsYXIodCl7cmV0dXJuIHRoaXMubXVsdGlwbHlTY2FsYXIoMS90KX1hcHBseU1hdHJpeDModCl7Y29uc3QgZT10aGlzLngsbj10aGlzLnkscj10LmVsZW1lbnRzO3JldHVybiB0aGlzLng9clswXSplK3JbM10qbityWzZdLHRoaXMueT1yWzFdKmUrcls0XSpuK3JbN10sdGhpc31taW4odCl7cmV0dXJuIHRoaXMueD1NYXRoLm1pbih0aGlzLngsdC54KSx0aGlzLnk9TWF0aC5taW4odGhpcy55LHQueSksdGhpc31tYXgodCl7cmV0dXJuIHRoaXMueD1NYXRoLm1heCh0aGlzLngsdC54KSx0aGlzLnk9TWF0aC5tYXgodGhpcy55LHQueSksdGhpc31jbGFtcCh0LGUpe3JldHVybiB0aGlzLng9TWF0aC5tYXgodC54LE1hdGgubWluKGUueCx0aGlzLngpKSx0aGlzLnk9TWF0aC5tYXgodC55LE1hdGgubWluKGUueSx0aGlzLnkpKSx0aGlzfWNsYW1wU2NhbGFyKHQsZSl7cmV0dXJuIHRoaXMueD1NYXRoLm1heCh0LE1hdGgubWluKGUsdGhpcy54KSksdGhpcy55PU1hdGgubWF4KHQsTWF0aC5taW4oZSx0aGlzLnkpKSx0aGlzfWNsYW1wTGVuZ3RoKHQsZSl7Y29uc3Qgbj10aGlzLmxlbmd0aCgpO3JldHVybiB0aGlzLmRpdmlkZVNjYWxhcihufHwxKS5tdWx0aXBseVNjYWxhcihNYXRoLm1heCh0LE1hdGgubWluKGUsbikpKX1mbG9vcigpe3JldHVybiB0aGlzLng9TWF0aC5mbG9vcih0aGlzLngpLHRoaXMueT1NYXRoLmZsb29yKHRoaXMueSksdGhpc31jZWlsKCl7cmV0dXJuIHRoaXMueD1NYXRoLmNlaWwodGhpcy54KSx0aGlzLnk9TWF0aC5jZWlsKHRoaXMueSksdGhpc31yb3VuZCgpe3JldHVybiB0aGlzLng9TWF0aC5yb3VuZCh0aGlzLngpLHRoaXMueT1NYXRoLnJvdW5kKHRoaXMueSksdGhpc31yb3VuZFRvWmVybygpe3JldHVybiB0aGlzLng9dGhpcy54PDA/TWF0aC5jZWlsKHRoaXMueCk6TWF0aC5mbG9vcih0aGlzLngpLHRoaXMueT10aGlzLnk8MD9NYXRoLmNlaWwodGhpcy55KTpNYXRoLmZsb29yKHRoaXMueSksdGhpc31uZWdhdGUoKXtyZXR1cm4gdGhpcy54PS10aGlzLngsdGhpcy55PS10aGlzLnksdGhpc31kb3QodCl7cmV0dXJuIHRoaXMueCp0LngrdGhpcy55KnQueX1jcm9zcyh0KXtyZXR1cm4gdGhpcy54KnQueS10aGlzLnkqdC54fWxlbmd0aFNxKCl7cmV0dXJuIHRoaXMueCp0aGlzLngrdGhpcy55KnRoaXMueX1sZW5ndGgoKXtyZXR1cm4gTWF0aC5zcXJ0KHRoaXMueCp0aGlzLngrdGhpcy55KnRoaXMueSl9bWFuaGF0dGFuTGVuZ3RoKCl7cmV0dXJuIE1hdGguYWJzKHRoaXMueCkrTWF0aC5hYnModGhpcy55KX1ub3JtYWxpemUoKXtyZXR1cm4gdGhpcy5kaXZpZGVTY2FsYXIodGhpcy5sZW5ndGgoKXx8MSl9YW5nbGUoKXtyZXR1cm4gTWF0aC5hdGFuMigtdGhpcy55LC10aGlzLngpK01hdGguUEl9ZGlzdGFuY2VUbyh0KXtyZXR1cm4gTWF0aC5zcXJ0KHRoaXMuZGlzdGFuY2VUb1NxdWFyZWQodCkpfWRpc3RhbmNlVG9TcXVhcmVkKHQpe2NvbnN0IGU9dGhpcy54LXQueCxuPXRoaXMueS10Lnk7cmV0dXJuIGUqZStuKm59bWFuaGF0dGFuRGlzdGFuY2VUbyh0KXtyZXR1cm4gTWF0aC5hYnModGhpcy54LXQueCkrTWF0aC5hYnModGhpcy55LXQueSl9c2V0TGVuZ3RoKHQpe3JldHVybiB0aGlzLm5vcm1hbGl6ZSgpLm11bHRpcGx5U2NhbGFyKHQpfWxlcnAodCxlKXtyZXR1cm4gdGhpcy54Kz0odC54LXRoaXMueCkqZSx0aGlzLnkrPSh0LnktdGhpcy55KSplLHRoaXN9bGVycFZlY3RvcnModCxlLG4pe3JldHVybiB0aGlzLng9dC54KyhlLngtdC54KSpuLHRoaXMueT10LnkrKGUueS10LnkpKm4sdGhpc31lcXVhbHModCl7cmV0dXJuIHQueD09PXRoaXMueCYmdC55PT09dGhpcy55fWZyb21BcnJheSh0LGU9MCl7cmV0dXJuIHRoaXMueD10W2VdLHRoaXMueT10W2UrMV0sdGhpc310b0FycmF5KHQ9W10sZT0wKXtyZXR1cm4gdFtlXT10aGlzLngsdFtlKzFdPXRoaXMueSx0fWZyb21CdWZmZXJBdHRyaWJ1dGUodCxlLG4pe3JldHVybiB2b2lkIDAhPT1uJiZjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3IyOiBvZmZzZXQgaGFzIGJlZW4gcmVtb3ZlZCBmcm9tIC5mcm9tQnVmZmVyQXR0cmlidXRlKCkuXCIpLHRoaXMueD10LmdldFgoZSksdGhpcy55PXQuZ2V0WShlKSx0aGlzfXJvdGF0ZUFyb3VuZCh0LGUpe2NvbnN0IG49TWF0aC5jb3MoZSkscj1NYXRoLnNpbihlKSxpPXRoaXMueC10Lngsbz10aGlzLnktdC55O3JldHVybiB0aGlzLng9aSpuLW8qcit0LngsdGhpcy55PWkqcitvKm4rdC55LHRoaXN9cmFuZG9tKCl7cmV0dXJuIHRoaXMueD1NYXRoLnJhbmRvbSgpLHRoaXMueT1NYXRoLnJhbmRvbSgpLHRoaXN9fWNsYXNzIEhue2NvbnN0cnVjdG9yKCl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJpc01hdHJpeDNcIix7dmFsdWU6ITB9KSx0aGlzLmVsZW1lbnRzPVsxLDAsMCwwLDEsMCwwLDAsMV0sYXJndW1lbnRzLmxlbmd0aD4wJiZjb25zb2xlLmVycm9yKFwiVEhSRUUuTWF0cml4MzogdGhlIGNvbnN0cnVjdG9yIG5vIGxvbmdlciByZWFkcyBhcmd1bWVudHMuIHVzZSAuc2V0KCkgaW5zdGVhZC5cIil9c2V0KHQsZSxuLHIsaSxvLGEscyxjKXtjb25zdCBsPXRoaXMuZWxlbWVudHM7cmV0dXJuIGxbMF09dCxsWzFdPXIsbFsyXT1hLGxbM109ZSxsWzRdPWksbFs1XT1zLGxbNl09bixsWzddPW8sbFs4XT1jLHRoaXN9aWRlbnRpdHkoKXtyZXR1cm4gdGhpcy5zZXQoMSwwLDAsMCwxLDAsMCwwLDEpLHRoaXN9Y2xvbmUoKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmZyb21BcnJheSh0aGlzLmVsZW1lbnRzKX1jb3B5KHQpe2NvbnN0IGU9dGhpcy5lbGVtZW50cyxuPXQuZWxlbWVudHM7cmV0dXJuIGVbMF09blswXSxlWzFdPW5bMV0sZVsyXT1uWzJdLGVbM109blszXSxlWzRdPW5bNF0sZVs1XT1uWzVdLGVbNl09bls2XSxlWzddPW5bN10sZVs4XT1uWzhdLHRoaXN9ZXh0cmFjdEJhc2lzKHQsZSxuKXtyZXR1cm4gdC5zZXRGcm9tTWF0cml4M0NvbHVtbih0aGlzLDApLGUuc2V0RnJvbU1hdHJpeDNDb2x1bW4odGhpcywxKSxuLnNldEZyb21NYXRyaXgzQ29sdW1uKHRoaXMsMiksdGhpc31zZXRGcm9tTWF0cml4NCh0KXtjb25zdCBlPXQuZWxlbWVudHM7cmV0dXJuIHRoaXMuc2V0KGVbMF0sZVs0XSxlWzhdLGVbMV0sZVs1XSxlWzldLGVbMl0sZVs2XSxlWzEwXSksdGhpc31tdWx0aXBseSh0KXtyZXR1cm4gdGhpcy5tdWx0aXBseU1hdHJpY2VzKHRoaXMsdCl9cHJlbXVsdGlwbHkodCl7cmV0dXJuIHRoaXMubXVsdGlwbHlNYXRyaWNlcyh0LHRoaXMpfW11bHRpcGx5TWF0cmljZXModCxlKXtjb25zdCBuPXQuZWxlbWVudHMscj1lLmVsZW1lbnRzLGk9dGhpcy5lbGVtZW50cyxvPW5bMF0sYT1uWzNdLHM9bls2XSxjPW5bMV0sbD1uWzRdLHU9bls3XSxoPW5bMl0sZD1uWzVdLHA9bls4XSxmPXJbMF0sbT1yWzNdLGc9cls2XSx2PXJbMV0seT1yWzRdLHg9cls3XSxiPXJbMl0sdz1yWzVdLF89cls4XTtyZXR1cm4gaVswXT1vKmYrYSp2K3MqYixpWzNdPW8qbSthKnkrcyp3LGlbNl09bypnK2EqeCtzKl8saVsxXT1jKmYrbCp2K3UqYixpWzRdPWMqbStsKnkrdSp3LGlbN109YypnK2wqeCt1Kl8saVsyXT1oKmYrZCp2K3AqYixpWzVdPWgqbStkKnkrcCp3LGlbOF09aCpnK2QqeCtwKl8sdGhpc31tdWx0aXBseVNjYWxhcih0KXtjb25zdCBlPXRoaXMuZWxlbWVudHM7cmV0dXJuIGVbMF0qPXQsZVszXSo9dCxlWzZdKj10LGVbMV0qPXQsZVs0XSo9dCxlWzddKj10LGVbMl0qPXQsZVs1XSo9dCxlWzhdKj10LHRoaXN9ZGV0ZXJtaW5hbnQoKXtjb25zdCB0PXRoaXMuZWxlbWVudHMsZT10WzBdLG49dFsxXSxyPXRbMl0saT10WzNdLG89dFs0XSxhPXRbNV0scz10WzZdLGM9dFs3XSxsPXRbOF07cmV0dXJuIGUqbypsLWUqYSpjLW4qaSpsK24qYSpzK3IqaSpjLXIqbypzfWludmVydCgpe2NvbnN0IHQ9dGhpcy5lbGVtZW50cyxlPXRbMF0sbj10WzFdLHI9dFsyXSxpPXRbM10sbz10WzRdLGE9dFs1XSxzPXRbNl0sYz10WzddLGw9dFs4XSx1PWwqby1hKmMsaD1hKnMtbCppLGQ9YyppLW8qcyxwPWUqdStuKmgrcipkO2lmKDA9PT1wKXJldHVybiB0aGlzLnNldCgwLDAsMCwwLDAsMCwwLDAsMCk7Y29uc3QgZj0xL3A7cmV0dXJuIHRbMF09dSpmLHRbMV09KHIqYy1sKm4pKmYsdFsyXT0oYSpuLXIqbykqZix0WzNdPWgqZix0WzRdPShsKmUtcipzKSpmLHRbNV09KHIqaS1hKmUpKmYsdFs2XT1kKmYsdFs3XT0obipzLWMqZSkqZix0WzhdPShvKmUtbippKSpmLHRoaXN9dHJhbnNwb3NlKCl7bGV0IHQ7Y29uc3QgZT10aGlzLmVsZW1lbnRzO3JldHVybiB0PWVbMV0sZVsxXT1lWzNdLGVbM109dCx0PWVbMl0sZVsyXT1lWzZdLGVbNl09dCx0PWVbNV0sZVs1XT1lWzddLGVbN109dCx0aGlzfWdldE5vcm1hbE1hdHJpeCh0KXtyZXR1cm4gdGhpcy5zZXRGcm9tTWF0cml4NCh0KS5jb3B5KHRoaXMpLmludmVydCgpLnRyYW5zcG9zZSgpfXRyYW5zcG9zZUludG9BcnJheSh0KXtjb25zdCBlPXRoaXMuZWxlbWVudHM7cmV0dXJuIHRbMF09ZVswXSx0WzFdPWVbM10sdFsyXT1lWzZdLHRbM109ZVsxXSx0WzRdPWVbNF0sdFs1XT1lWzddLHRbNl09ZVsyXSx0WzddPWVbNV0sdFs4XT1lWzhdLHRoaXN9c2V0VXZUcmFuc2Zvcm0odCxlLG4scixpLG8sYSl7Y29uc3Qgcz1NYXRoLmNvcyhpKSxjPU1hdGguc2luKGkpO3RoaXMuc2V0KG4qcyxuKmMsLW4qKHMqbytjKmEpK28rdCwtcipjLHIqcywtciooLWMqbytzKmEpK2ErZSwwLDAsMSl9c2NhbGUodCxlKXtjb25zdCBuPXRoaXMuZWxlbWVudHM7cmV0dXJuIG5bMF0qPXQsblszXSo9dCxuWzZdKj10LG5bMV0qPWUsbls0XSo9ZSxuWzddKj1lLHRoaXN9cm90YXRlKHQpe2NvbnN0IGU9TWF0aC5jb3ModCksbj1NYXRoLnNpbih0KSxyPXRoaXMuZWxlbWVudHMsaT1yWzBdLG89clszXSxhPXJbNl0scz1yWzFdLGM9cls0XSxsPXJbN107cmV0dXJuIHJbMF09ZSppK24qcyxyWzNdPWUqbytuKmMscls2XT1lKmErbipsLHJbMV09LW4qaStlKnMscls0XT0tbipvK2UqYyxyWzddPS1uKmErZSpsLHRoaXN9dHJhbnNsYXRlKHQsZSl7Y29uc3Qgbj10aGlzLmVsZW1lbnRzO3JldHVybiBuWzBdKz10Km5bMl0sblszXSs9dCpuWzVdLG5bNl0rPXQqbls4XSxuWzFdKz1lKm5bMl0sbls0XSs9ZSpuWzVdLG5bN10rPWUqbls4XSx0aGlzfWVxdWFscyh0KXtjb25zdCBlPXRoaXMuZWxlbWVudHMsbj10LmVsZW1lbnRzO2ZvcihsZXQgdD0wO3Q8OTt0KyspaWYoZVt0XSE9PW5bdF0pcmV0dXJuITE7cmV0dXJuITB9ZnJvbUFycmF5KHQsZT0wKXtmb3IobGV0IG49MDtuPDk7bisrKXRoaXMuZWxlbWVudHNbbl09dFtuK2VdO3JldHVybiB0aGlzfXRvQXJyYXkodD1bXSxlPTApe2NvbnN0IG49dGhpcy5lbGVtZW50cztyZXR1cm4gdFtlXT1uWzBdLHRbZSsxXT1uWzFdLHRbZSsyXT1uWzJdLHRbZSszXT1uWzNdLHRbZSs0XT1uWzRdLHRbZSs1XT1uWzVdLHRbZSs2XT1uWzZdLHRbZSs3XT1uWzddLHRbZSs4XT1uWzhdLHR9fWxldCBrbjtjb25zdCBWbj17Z2V0RGF0YVVSTDpmdW5jdGlvbih0KXtpZigvXmRhdGE6L2kudGVzdCh0LnNyYykpcmV0dXJuIHQuc3JjO2lmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBIVE1MQ2FudmFzRWxlbWVudClyZXR1cm4gdC5zcmM7bGV0IGU7aWYodCBpbnN0YW5jZW9mIEhUTUxDYW52YXNFbGVtZW50KWU9dDtlbHNle3ZvaWQgMD09PWtuJiYoa249ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbFwiLFwiY2FudmFzXCIpKSxrbi53aWR0aD10LndpZHRoLGtuLmhlaWdodD10LmhlaWdodDtjb25zdCBuPWtuLmdldENvbnRleHQoXCIyZFwiKTt0IGluc3RhbmNlb2YgSW1hZ2VEYXRhP24ucHV0SW1hZ2VEYXRhKHQsMCwwKTpuLmRyYXdJbWFnZSh0LDAsMCx0LndpZHRoLHQuaGVpZ2h0KSxlPWtufXJldHVybiBlLndpZHRoPjIwNDh8fGUuaGVpZ2h0PjIwNDg/ZS50b0RhdGFVUkwoXCJpbWFnZS9qcGVnXCIsLjYpOmUudG9EYXRhVVJMKFwiaW1hZ2UvcG5nXCIpfX07bGV0IGpuPTA7ZnVuY3Rpb24gV24odD1Xbi5ERUZBVUxUX0lNQUdFLGU9V24uREVGQVVMVF9NQVBQSU5HLG49ZHQscj1kdCxpPXh0LG89X3QsYT1VdCxzPVN0LGM9MSxsPUplKXtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImlkXCIse3ZhbHVlOmpuKyt9KSx0aGlzLnV1aWQ9em4uZ2VuZXJhdGVVVUlEKCksdGhpcy5uYW1lPVwiXCIsdGhpcy5pbWFnZT10LHRoaXMubWlwbWFwcz1bXSx0aGlzLm1hcHBpbmc9ZSx0aGlzLndyYXBTPW4sdGhpcy53cmFwVD1yLHRoaXMubWFnRmlsdGVyPWksdGhpcy5taW5GaWx0ZXI9byx0aGlzLmFuaXNvdHJvcHk9Yyx0aGlzLmZvcm1hdD1hLHRoaXMuaW50ZXJuYWxGb3JtYXQ9bnVsbCx0aGlzLnR5cGU9cyx0aGlzLm9mZnNldD1uZXcgR24oMCwwKSx0aGlzLnJlcGVhdD1uZXcgR24oMSwxKSx0aGlzLmNlbnRlcj1uZXcgR24oMCwwKSx0aGlzLnJvdGF0aW9uPTAsdGhpcy5tYXRyaXhBdXRvVXBkYXRlPSEwLHRoaXMubWF0cml4PW5ldyBIbix0aGlzLmdlbmVyYXRlTWlwbWFwcz0hMCx0aGlzLnByZW11bHRpcGx5QWxwaGE9ITEsdGhpcy5mbGlwWT0hMCx0aGlzLnVucGFja0FsaWdubWVudD00LHRoaXMuZW5jb2Rpbmc9bCx0aGlzLnZlcnNpb249MCx0aGlzLm9uVXBkYXRlPW51bGx9ZnVuY3Rpb24gWG4odCl7cmV0dXJuXCJ1bmRlZmluZWRcIiE9dHlwZW9mIEhUTUxJbWFnZUVsZW1lbnQmJnQgaW5zdGFuY2VvZiBIVE1MSW1hZ2VFbGVtZW50fHxcInVuZGVmaW5lZFwiIT10eXBlb2YgSFRNTENhbnZhc0VsZW1lbnQmJnQgaW5zdGFuY2VvZiBIVE1MQ2FudmFzRWxlbWVudHx8XCJ1bmRlZmluZWRcIiE9dHlwZW9mIEltYWdlQml0bWFwJiZ0IGluc3RhbmNlb2YgSW1hZ2VCaXRtYXA/Vm4uZ2V0RGF0YVVSTCh0KTp0LmRhdGE/e2RhdGE6QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodC5kYXRhKSx3aWR0aDp0LndpZHRoLGhlaWdodDp0LmhlaWdodCx0eXBlOnQuZGF0YS5jb25zdHJ1Y3Rvci5uYW1lfTooY29uc29sZS53YXJuKFwiVEhSRUUuVGV4dHVyZTogVW5hYmxlIHRvIHNlcmlhbGl6ZSBUZXh0dXJlLlwiKSx7fSl9V24uREVGQVVMVF9JTUFHRT12b2lkIDAsV24uREVGQVVMVF9NQVBQSU5HPWl0LFduLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoQm4ucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6V24saXNUZXh0dXJlOiEwLHVwZGF0ZU1hdHJpeDpmdW5jdGlvbigpe3RoaXMubWF0cml4LnNldFV2VHJhbnNmb3JtKHRoaXMub2Zmc2V0LngsdGhpcy5vZmZzZXQueSx0aGlzLnJlcGVhdC54LHRoaXMucmVwZWF0LnksdGhpcy5yb3RhdGlvbix0aGlzLmNlbnRlci54LHRoaXMuY2VudGVyLnkpfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3RvcikuY29weSh0aGlzKX0sY29weTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5uYW1lPXQubmFtZSx0aGlzLmltYWdlPXQuaW1hZ2UsdGhpcy5taXBtYXBzPXQubWlwbWFwcy5zbGljZSgwKSx0aGlzLm1hcHBpbmc9dC5tYXBwaW5nLHRoaXMud3JhcFM9dC53cmFwUyx0aGlzLndyYXBUPXQud3JhcFQsdGhpcy5tYWdGaWx0ZXI9dC5tYWdGaWx0ZXIsdGhpcy5taW5GaWx0ZXI9dC5taW5GaWx0ZXIsdGhpcy5hbmlzb3Ryb3B5PXQuYW5pc290cm9weSx0aGlzLmZvcm1hdD10LmZvcm1hdCx0aGlzLmludGVybmFsRm9ybWF0PXQuaW50ZXJuYWxGb3JtYXQsdGhpcy50eXBlPXQudHlwZSx0aGlzLm9mZnNldC5jb3B5KHQub2Zmc2V0KSx0aGlzLnJlcGVhdC5jb3B5KHQucmVwZWF0KSx0aGlzLmNlbnRlci5jb3B5KHQuY2VudGVyKSx0aGlzLnJvdGF0aW9uPXQucm90YXRpb24sdGhpcy5tYXRyaXhBdXRvVXBkYXRlPXQubWF0cml4QXV0b1VwZGF0ZSx0aGlzLm1hdHJpeC5jb3B5KHQubWF0cml4KSx0aGlzLmdlbmVyYXRlTWlwbWFwcz10LmdlbmVyYXRlTWlwbWFwcyx0aGlzLnByZW11bHRpcGx5QWxwaGE9dC5wcmVtdWx0aXBseUFscGhhLHRoaXMuZmxpcFk9dC5mbGlwWSx0aGlzLnVucGFja0FsaWdubWVudD10LnVucGFja0FsaWdubWVudCx0aGlzLmVuY29kaW5nPXQuZW5jb2RpbmcsdGhpc30sdG9KU09OOmZ1bmN0aW9uKHQpe2NvbnN0IGU9dm9pZCAwPT09dHx8XCJzdHJpbmdcIj09dHlwZW9mIHQ7aWYoIWUmJnZvaWQgMCE9PXQudGV4dHVyZXNbdGhpcy51dWlkXSlyZXR1cm4gdC50ZXh0dXJlc1t0aGlzLnV1aWRdO2NvbnN0IG49e21ldGFkYXRhOnt2ZXJzaW9uOjQuNSx0eXBlOlwiVGV4dHVyZVwiLGdlbmVyYXRvcjpcIlRleHR1cmUudG9KU09OXCJ9LHV1aWQ6dGhpcy51dWlkLG5hbWU6dGhpcy5uYW1lLG1hcHBpbmc6dGhpcy5tYXBwaW5nLHJlcGVhdDpbdGhpcy5yZXBlYXQueCx0aGlzLnJlcGVhdC55XSxvZmZzZXQ6W3RoaXMub2Zmc2V0LngsdGhpcy5vZmZzZXQueV0sY2VudGVyOlt0aGlzLmNlbnRlci54LHRoaXMuY2VudGVyLnldLHJvdGF0aW9uOnRoaXMucm90YXRpb24sd3JhcDpbdGhpcy53cmFwUyx0aGlzLndyYXBUXSxmb3JtYXQ6dGhpcy5mb3JtYXQsdHlwZTp0aGlzLnR5cGUsZW5jb2Rpbmc6dGhpcy5lbmNvZGluZyxtaW5GaWx0ZXI6dGhpcy5taW5GaWx0ZXIsbWFnRmlsdGVyOnRoaXMubWFnRmlsdGVyLGFuaXNvdHJvcHk6dGhpcy5hbmlzb3Ryb3B5LGZsaXBZOnRoaXMuZmxpcFkscHJlbXVsdGlwbHlBbHBoYTp0aGlzLnByZW11bHRpcGx5QWxwaGEsdW5wYWNrQWxpZ25tZW50OnRoaXMudW5wYWNrQWxpZ25tZW50fTtpZih2b2lkIDAhPT10aGlzLmltYWdlKXtjb25zdCByPXRoaXMuaW1hZ2U7aWYodm9pZCAwPT09ci51dWlkJiYoci51dWlkPXpuLmdlbmVyYXRlVVVJRCgpKSwhZSYmdm9pZCAwPT09dC5pbWFnZXNbci51dWlkXSl7bGV0IGU7aWYoQXJyYXkuaXNBcnJheShyKSl7ZT1bXTtmb3IobGV0IHQ9MCxuPXIubGVuZ3RoO3Q8bjt0Kyspclt0XS5pc0RhdGFUZXh0dXJlP2UucHVzaChYbihyW3RdLmltYWdlKSk6ZS5wdXNoKFhuKHJbdF0pKX1lbHNlIGU9WG4ocik7dC5pbWFnZXNbci51dWlkXT17dXVpZDpyLnV1aWQsdXJsOmV9fW4uaW1hZ2U9ci51dWlkfXJldHVybiBlfHwodC50ZXh0dXJlc1t0aGlzLnV1aWRdPW4pLG59LGRpc3Bvc2U6ZnVuY3Rpb24oKXt0aGlzLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJkaXNwb3NlXCJ9KX0sdHJhbnNmb3JtVXY6ZnVuY3Rpb24odCl7aWYodGhpcy5tYXBwaW5nIT09aXQpcmV0dXJuIHQ7aWYodC5hcHBseU1hdHJpeDModGhpcy5tYXRyaXgpLHQueDwwfHx0Lng+MSlzd2l0Y2godGhpcy53cmFwUyl7Y2FzZSBodDp0Lng9dC54LU1hdGguZmxvb3IodC54KTticmVhaztjYXNlIGR0OnQueD10Lng8MD8wOjE7YnJlYWs7Y2FzZSBwdDoxPT09TWF0aC5hYnMoTWF0aC5mbG9vcih0LngpJTIpP3QueD1NYXRoLmNlaWwodC54KS10Lng6dC54PXQueC1NYXRoLmZsb29yKHQueCl9aWYodC55PDB8fHQueT4xKXN3aXRjaCh0aGlzLndyYXBUKXtjYXNlIGh0OnQueT10LnktTWF0aC5mbG9vcih0LnkpO2JyZWFrO2Nhc2UgZHQ6dC55PXQueTwwPzA6MTticmVhaztjYXNlIHB0OjE9PT1NYXRoLmFicyhNYXRoLmZsb29yKHQueSklMik/dC55PU1hdGguY2VpbCh0LnkpLXQueTp0Lnk9dC55LU1hdGguZmxvb3IodC55KX1yZXR1cm4gdGhpcy5mbGlwWSYmKHQueT0xLXQueSksdH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoV24ucHJvdG90eXBlLFwibmVlZHNVcGRhdGVcIix7c2V0OmZ1bmN0aW9uKHQpeyEwPT09dCYmdGhpcy52ZXJzaW9uKyt9fSk7Y2xhc3MgcW57Y29uc3RydWN0b3IodD0wLGU9MCxuPTAscj0xKXtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImlzVmVjdG9yNFwiLHt2YWx1ZTohMH0pLHRoaXMueD10LHRoaXMueT1lLHRoaXMuej1uLHRoaXMudz1yfWdldCB3aWR0aCgpe3JldHVybiB0aGlzLnp9c2V0IHdpZHRoKHQpe3RoaXMuej10fWdldCBoZWlnaHQoKXtyZXR1cm4gdGhpcy53fXNldCBoZWlnaHQodCl7dGhpcy53PXR9c2V0KHQsZSxuLHIpe3JldHVybiB0aGlzLng9dCx0aGlzLnk9ZSx0aGlzLno9bix0aGlzLnc9cix0aGlzfXNldFNjYWxhcih0KXtyZXR1cm4gdGhpcy54PXQsdGhpcy55PXQsdGhpcy56PXQsdGhpcy53PXQsdGhpc31zZXRYKHQpe3JldHVybiB0aGlzLng9dCx0aGlzfXNldFkodCl7cmV0dXJuIHRoaXMueT10LHRoaXN9c2V0Wih0KXtyZXR1cm4gdGhpcy56PXQsdGhpc31zZXRXKHQpe3JldHVybiB0aGlzLnc9dCx0aGlzfXNldENvbXBvbmVudCh0LGUpe3N3aXRjaCh0KXtjYXNlIDA6dGhpcy54PWU7YnJlYWs7Y2FzZSAxOnRoaXMueT1lO2JyZWFrO2Nhc2UgMjp0aGlzLno9ZTticmVhaztjYXNlIDM6dGhpcy53PWU7YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoXCJpbmRleCBpcyBvdXQgb2YgcmFuZ2U6IFwiK3QpfXJldHVybiB0aGlzfWdldENvbXBvbmVudCh0KXtzd2l0Y2godCl7Y2FzZSAwOnJldHVybiB0aGlzLng7Y2FzZSAxOnJldHVybiB0aGlzLnk7Y2FzZSAyOnJldHVybiB0aGlzLno7Y2FzZSAzOnJldHVybiB0aGlzLnc7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoXCJpbmRleCBpcyBvdXQgb2YgcmFuZ2U6IFwiK3QpfX1jbG9uZSgpe3JldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLngsdGhpcy55LHRoaXMueix0aGlzLncpfWNvcHkodCl7cmV0dXJuIHRoaXMueD10LngsdGhpcy55PXQueSx0aGlzLno9dC56LHRoaXMudz12b2lkIDAhPT10Lnc/dC53OjEsdGhpc31hZGQodCxlKXtyZXR1cm4gdm9pZCAwIT09ZT8oY29uc29sZS53YXJuKFwiVEhSRUUuVmVjdG9yNDogLmFkZCgpIG5vdyBvbmx5IGFjY2VwdHMgb25lIGFyZ3VtZW50LiBVc2UgLmFkZFZlY3RvcnMoIGEsIGIgKSBpbnN0ZWFkLlwiKSx0aGlzLmFkZFZlY3RvcnModCxlKSk6KHRoaXMueCs9dC54LHRoaXMueSs9dC55LHRoaXMueis9dC56LHRoaXMudys9dC53LHRoaXMpfWFkZFNjYWxhcih0KXtyZXR1cm4gdGhpcy54Kz10LHRoaXMueSs9dCx0aGlzLnorPXQsdGhpcy53Kz10LHRoaXN9YWRkVmVjdG9ycyh0LGUpe3JldHVybiB0aGlzLng9dC54K2UueCx0aGlzLnk9dC55K2UueSx0aGlzLno9dC56K2Uueix0aGlzLnc9dC53K2Uudyx0aGlzfWFkZFNjYWxlZFZlY3Rvcih0LGUpe3JldHVybiB0aGlzLngrPXQueCplLHRoaXMueSs9dC55KmUsdGhpcy56Kz10LnoqZSx0aGlzLncrPXQudyplLHRoaXN9c3ViKHQsZSl7cmV0dXJuIHZvaWQgMCE9PWU/KGNvbnNvbGUud2FybihcIlRIUkVFLlZlY3RvcjQ6IC5zdWIoKSBub3cgb25seSBhY2NlcHRzIG9uZSBhcmd1bWVudC4gVXNlIC5zdWJWZWN0b3JzKCBhLCBiICkgaW5zdGVhZC5cIiksdGhpcy5zdWJWZWN0b3JzKHQsZSkpOih0aGlzLngtPXQueCx0aGlzLnktPXQueSx0aGlzLnotPXQueix0aGlzLnctPXQudyx0aGlzKX1zdWJTY2FsYXIodCl7cmV0dXJuIHRoaXMueC09dCx0aGlzLnktPXQsdGhpcy56LT10LHRoaXMudy09dCx0aGlzfXN1YlZlY3RvcnModCxlKXtyZXR1cm4gdGhpcy54PXQueC1lLngsdGhpcy55PXQueS1lLnksdGhpcy56PXQuei1lLnosdGhpcy53PXQudy1lLncsdGhpc31tdWx0aXBseVNjYWxhcih0KXtyZXR1cm4gdGhpcy54Kj10LHRoaXMueSo9dCx0aGlzLnoqPXQsdGhpcy53Kj10LHRoaXN9YXBwbHlNYXRyaXg0KHQpe2NvbnN0IGU9dGhpcy54LG49dGhpcy55LHI9dGhpcy56LGk9dGhpcy53LG89dC5lbGVtZW50cztyZXR1cm4gdGhpcy54PW9bMF0qZStvWzRdKm4rb1s4XSpyK29bMTJdKmksdGhpcy55PW9bMV0qZStvWzVdKm4rb1s5XSpyK29bMTNdKmksdGhpcy56PW9bMl0qZStvWzZdKm4rb1sxMF0qcitvWzE0XSppLHRoaXMudz1vWzNdKmUrb1s3XSpuK29bMTFdKnIrb1sxNV0qaSx0aGlzfWRpdmlkZVNjYWxhcih0KXtyZXR1cm4gdGhpcy5tdWx0aXBseVNjYWxhcigxL3QpfXNldEF4aXNBbmdsZUZyb21RdWF0ZXJuaW9uKHQpe3RoaXMudz0yKk1hdGguYWNvcyh0LncpO2NvbnN0IGU9TWF0aC5zcXJ0KDEtdC53KnQudyk7cmV0dXJuIGU8MWUtND8odGhpcy54PTEsdGhpcy55PTAsdGhpcy56PTApOih0aGlzLng9dC54L2UsdGhpcy55PXQueS9lLHRoaXMuej10LnovZSksdGhpc31zZXRBeGlzQW5nbGVGcm9tUm90YXRpb25NYXRyaXgodCl7bGV0IGUsbixyLGk7Y29uc3Qgbz10LmVsZW1lbnRzLGE9b1swXSxzPW9bNF0sYz1vWzhdLGw9b1sxXSx1PW9bNV0saD1vWzldLGQ9b1syXSxwPW9bNl0sZj1vWzEwXTtpZihNYXRoLmFicyhzLWwpPC4wMSYmTWF0aC5hYnMoYy1kKTwuMDEmJk1hdGguYWJzKGgtcCk8LjAxKXtpZihNYXRoLmFicyhzK2wpPC4xJiZNYXRoLmFicyhjK2QpPC4xJiZNYXRoLmFicyhoK3ApPC4xJiZNYXRoLmFicyhhK3UrZi0zKTwuMSlyZXR1cm4gdGhpcy5zZXQoMSwwLDAsMCksdGhpcztlPU1hdGguUEk7Y29uc3QgdD0oYSsxKS8yLG89KHUrMSkvMixtPShmKzEpLzIsZz0ocytsKS80LHY9KGMrZCkvNCx5PShoK3ApLzQ7cmV0dXJuIHQ+byYmdD5tP3Q8LjAxPyhuPTAscj0uNzA3MTA2NzgxLGk9LjcwNzEwNjc4MSk6KG49TWF0aC5zcXJ0KHQpLHI9Zy9uLGk9di9uKTpvPm0/bzwuMDE/KG49LjcwNzEwNjc4MSxyPTAsaT0uNzA3MTA2NzgxKToocj1NYXRoLnNxcnQobyksbj1nL3IsaT15L3IpOm08LjAxPyhuPS43MDcxMDY3ODEscj0uNzA3MTA2NzgxLGk9MCk6KGk9TWF0aC5zcXJ0KG0pLG49di9pLHI9eS9pKSx0aGlzLnNldChuLHIsaSxlKSx0aGlzfWxldCBtPU1hdGguc3FydCgocC1oKSoocC1oKSsoYy1kKSooYy1kKSsobC1zKSoobC1zKSk7cmV0dXJuIE1hdGguYWJzKG0pPC4wMDEmJihtPTEpLHRoaXMueD0ocC1oKS9tLHRoaXMueT0oYy1kKS9tLHRoaXMuej0obC1zKS9tLHRoaXMudz1NYXRoLmFjb3MoKGErdStmLTEpLzIpLHRoaXN9bWluKHQpe3JldHVybiB0aGlzLng9TWF0aC5taW4odGhpcy54LHQueCksdGhpcy55PU1hdGgubWluKHRoaXMueSx0LnkpLHRoaXMuej1NYXRoLm1pbih0aGlzLnosdC56KSx0aGlzLnc9TWF0aC5taW4odGhpcy53LHQudyksdGhpc31tYXgodCl7cmV0dXJuIHRoaXMueD1NYXRoLm1heCh0aGlzLngsdC54KSx0aGlzLnk9TWF0aC5tYXgodGhpcy55LHQueSksdGhpcy56PU1hdGgubWF4KHRoaXMueix0LnopLHRoaXMudz1NYXRoLm1heCh0aGlzLncsdC53KSx0aGlzfWNsYW1wKHQsZSl7cmV0dXJuIHRoaXMueD1NYXRoLm1heCh0LngsTWF0aC5taW4oZS54LHRoaXMueCkpLHRoaXMueT1NYXRoLm1heCh0LnksTWF0aC5taW4oZS55LHRoaXMueSkpLHRoaXMuej1NYXRoLm1heCh0LnosTWF0aC5taW4oZS56LHRoaXMueikpLHRoaXMudz1NYXRoLm1heCh0LncsTWF0aC5taW4oZS53LHRoaXMudykpLHRoaXN9Y2xhbXBTY2FsYXIodCxlKXtyZXR1cm4gdGhpcy54PU1hdGgubWF4KHQsTWF0aC5taW4oZSx0aGlzLngpKSx0aGlzLnk9TWF0aC5tYXgodCxNYXRoLm1pbihlLHRoaXMueSkpLHRoaXMuej1NYXRoLm1heCh0LE1hdGgubWluKGUsdGhpcy56KSksdGhpcy53PU1hdGgubWF4KHQsTWF0aC5taW4oZSx0aGlzLncpKSx0aGlzfWNsYW1wTGVuZ3RoKHQsZSl7Y29uc3Qgbj10aGlzLmxlbmd0aCgpO3JldHVybiB0aGlzLmRpdmlkZVNjYWxhcihufHwxKS5tdWx0aXBseVNjYWxhcihNYXRoLm1heCh0LE1hdGgubWluKGUsbikpKX1mbG9vcigpe3JldHVybiB0aGlzLng9TWF0aC5mbG9vcih0aGlzLngpLHRoaXMueT1NYXRoLmZsb29yKHRoaXMueSksdGhpcy56PU1hdGguZmxvb3IodGhpcy56KSx0aGlzLnc9TWF0aC5mbG9vcih0aGlzLncpLHRoaXN9Y2VpbCgpe3JldHVybiB0aGlzLng9TWF0aC5jZWlsKHRoaXMueCksdGhpcy55PU1hdGguY2VpbCh0aGlzLnkpLHRoaXMuej1NYXRoLmNlaWwodGhpcy56KSx0aGlzLnc9TWF0aC5jZWlsKHRoaXMudyksdGhpc31yb3VuZCgpe3JldHVybiB0aGlzLng9TWF0aC5yb3VuZCh0aGlzLngpLHRoaXMueT1NYXRoLnJvdW5kKHRoaXMueSksdGhpcy56PU1hdGgucm91bmQodGhpcy56KSx0aGlzLnc9TWF0aC5yb3VuZCh0aGlzLncpLHRoaXN9cm91bmRUb1plcm8oKXtyZXR1cm4gdGhpcy54PXRoaXMueDwwP01hdGguY2VpbCh0aGlzLngpOk1hdGguZmxvb3IodGhpcy54KSx0aGlzLnk9dGhpcy55PDA/TWF0aC5jZWlsKHRoaXMueSk6TWF0aC5mbG9vcih0aGlzLnkpLHRoaXMuej10aGlzLno8MD9NYXRoLmNlaWwodGhpcy56KTpNYXRoLmZsb29yKHRoaXMueiksdGhpcy53PXRoaXMudzwwP01hdGguY2VpbCh0aGlzLncpOk1hdGguZmxvb3IodGhpcy53KSx0aGlzfW5lZ2F0ZSgpe3JldHVybiB0aGlzLng9LXRoaXMueCx0aGlzLnk9LXRoaXMueSx0aGlzLno9LXRoaXMueix0aGlzLnc9LXRoaXMudyx0aGlzfWRvdCh0KXtyZXR1cm4gdGhpcy54KnQueCt0aGlzLnkqdC55K3RoaXMueip0LnordGhpcy53KnQud31sZW5ndGhTcSgpe3JldHVybiB0aGlzLngqdGhpcy54K3RoaXMueSp0aGlzLnkrdGhpcy56KnRoaXMueit0aGlzLncqdGhpcy53fWxlbmd0aCgpe3JldHVybiBNYXRoLnNxcnQodGhpcy54KnRoaXMueCt0aGlzLnkqdGhpcy55K3RoaXMueip0aGlzLnordGhpcy53KnRoaXMudyl9bWFuaGF0dGFuTGVuZ3RoKCl7cmV0dXJuIE1hdGguYWJzKHRoaXMueCkrTWF0aC5hYnModGhpcy55KStNYXRoLmFicyh0aGlzLnopK01hdGguYWJzKHRoaXMudyl9bm9ybWFsaXplKCl7cmV0dXJuIHRoaXMuZGl2aWRlU2NhbGFyKHRoaXMubGVuZ3RoKCl8fDEpfXNldExlbmd0aCh0KXtyZXR1cm4gdGhpcy5ub3JtYWxpemUoKS5tdWx0aXBseVNjYWxhcih0KX1sZXJwKHQsZSl7cmV0dXJuIHRoaXMueCs9KHQueC10aGlzLngpKmUsdGhpcy55Kz0odC55LXRoaXMueSkqZSx0aGlzLnorPSh0LnotdGhpcy56KSplLHRoaXMudys9KHQudy10aGlzLncpKmUsdGhpc31sZXJwVmVjdG9ycyh0LGUsbil7cmV0dXJuIHRoaXMueD10LngrKGUueC10LngpKm4sdGhpcy55PXQueSsoZS55LXQueSkqbix0aGlzLno9dC56KyhlLnotdC56KSpuLHRoaXMudz10LncrKGUudy10LncpKm4sdGhpc31lcXVhbHModCl7cmV0dXJuIHQueD09PXRoaXMueCYmdC55PT09dGhpcy55JiZ0Lno9PT10aGlzLnomJnQudz09PXRoaXMud31mcm9tQXJyYXkodCxlPTApe3JldHVybiB0aGlzLng9dFtlXSx0aGlzLnk9dFtlKzFdLHRoaXMuej10W2UrMl0sdGhpcy53PXRbZSszXSx0aGlzfXRvQXJyYXkodD1bXSxlPTApe3JldHVybiB0W2VdPXRoaXMueCx0W2UrMV09dGhpcy55LHRbZSsyXT10aGlzLnosdFtlKzNdPXRoaXMudyx0fWZyb21CdWZmZXJBdHRyaWJ1dGUodCxlLG4pe3JldHVybiB2b2lkIDAhPT1uJiZjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3I0OiBvZmZzZXQgaGFzIGJlZW4gcmVtb3ZlZCBmcm9tIC5mcm9tQnVmZmVyQXR0cmlidXRlKCkuXCIpLHRoaXMueD10LmdldFgoZSksdGhpcy55PXQuZ2V0WShlKSx0aGlzLno9dC5nZXRaKGUpLHRoaXMudz10LmdldFcoZSksdGhpc31yYW5kb20oKXtyZXR1cm4gdGhpcy54PU1hdGgucmFuZG9tKCksdGhpcy55PU1hdGgucmFuZG9tKCksdGhpcy56PU1hdGgucmFuZG9tKCksdGhpcy53PU1hdGgucmFuZG9tKCksdGhpc319ZnVuY3Rpb24gWW4odCxlLG4pe3RoaXMud2lkdGg9dCx0aGlzLmhlaWdodD1lLHRoaXMuc2Npc3Nvcj1uZXcgcW4oMCwwLHQsZSksdGhpcy5zY2lzc29yVGVzdD0hMSx0aGlzLnZpZXdwb3J0PW5ldyBxbigwLDAsdCxlKSxuPW58fHt9LHRoaXMudGV4dHVyZT1uZXcgV24odm9pZCAwLG4ubWFwcGluZyxuLndyYXBTLG4ud3JhcFQsbi5tYWdGaWx0ZXIsbi5taW5GaWx0ZXIsbi5mb3JtYXQsbi50eXBlLG4uYW5pc290cm9weSxuLmVuY29kaW5nKSx0aGlzLnRleHR1cmUuaW1hZ2U9e30sdGhpcy50ZXh0dXJlLmltYWdlLndpZHRoPXQsdGhpcy50ZXh0dXJlLmltYWdlLmhlaWdodD1lLHRoaXMudGV4dHVyZS5nZW5lcmF0ZU1pcG1hcHM9dm9pZCAwIT09bi5nZW5lcmF0ZU1pcG1hcHMmJm4uZ2VuZXJhdGVNaXBtYXBzLHRoaXMudGV4dHVyZS5taW5GaWx0ZXI9dm9pZCAwIT09bi5taW5GaWx0ZXI/bi5taW5GaWx0ZXI6eHQsdGhpcy5kZXB0aEJ1ZmZlcj12b2lkIDA9PT1uLmRlcHRoQnVmZmVyfHxuLmRlcHRoQnVmZmVyLHRoaXMuc3RlbmNpbEJ1ZmZlcj12b2lkIDAhPT1uLnN0ZW5jaWxCdWZmZXImJm4uc3RlbmNpbEJ1ZmZlcix0aGlzLmRlcHRoVGV4dHVyZT12b2lkIDAhPT1uLmRlcHRoVGV4dHVyZT9uLmRlcHRoVGV4dHVyZTpudWxsfWZ1bmN0aW9uIFpuKHQsZSxuKXtZbi5jYWxsKHRoaXMsdCxlLG4pLHRoaXMuc2FtcGxlcz00fVluLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoQm4ucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6WW4saXNXZWJHTFJlbmRlclRhcmdldDohMCxzZXRTaXplOmZ1bmN0aW9uKHQsZSl7dGhpcy53aWR0aD09PXQmJnRoaXMuaGVpZ2h0PT09ZXx8KHRoaXMud2lkdGg9dCx0aGlzLmhlaWdodD1lLHRoaXMudGV4dHVyZS5pbWFnZS53aWR0aD10LHRoaXMudGV4dHVyZS5pbWFnZS5oZWlnaHQ9ZSx0aGlzLmRpc3Bvc2UoKSksdGhpcy52aWV3cG9ydC5zZXQoMCwwLHQsZSksdGhpcy5zY2lzc29yLnNldCgwLDAsdCxlKX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyl9LGNvcHk6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMud2lkdGg9dC53aWR0aCx0aGlzLmhlaWdodD10LmhlaWdodCx0aGlzLnZpZXdwb3J0LmNvcHkodC52aWV3cG9ydCksdGhpcy50ZXh0dXJlPXQudGV4dHVyZS5jbG9uZSgpLHRoaXMuZGVwdGhCdWZmZXI9dC5kZXB0aEJ1ZmZlcix0aGlzLnN0ZW5jaWxCdWZmZXI9dC5zdGVuY2lsQnVmZmVyLHRoaXMuZGVwdGhUZXh0dXJlPXQuZGVwdGhUZXh0dXJlLHRoaXN9LGRpc3Bvc2U6ZnVuY3Rpb24oKXt0aGlzLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJkaXNwb3NlXCJ9KX19KSxabi5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKFluLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlpuLGlzV2ViR0xNdWx0aXNhbXBsZVJlbmRlclRhcmdldDohMCxjb3B5OmZ1bmN0aW9uKHQpe3JldHVybiBZbi5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsdCksdGhpcy5zYW1wbGVzPXQuc2FtcGxlcyx0aGlzfX0pO2NsYXNzIEpue2NvbnN0cnVjdG9yKHQ9MCxlPTAsbj0wLHI9MSl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJpc1F1YXRlcm5pb25cIix7dmFsdWU6ITB9KSx0aGlzLl94PXQsdGhpcy5feT1lLHRoaXMuX3o9bix0aGlzLl93PXJ9c3RhdGljIHNsZXJwKHQsZSxuLHIpe3JldHVybiBuLmNvcHkodCkuc2xlcnAoZSxyKX1zdGF0aWMgc2xlcnBGbGF0KHQsZSxuLHIsaSxvLGEpe2xldCBzPW5bciswXSxjPW5bcisxXSxsPW5bcisyXSx1PW5bciszXTtjb25zdCBoPWlbbyswXSxkPWlbbysxXSxwPWlbbysyXSxmPWlbbyszXTtpZih1IT09Znx8cyE9PWh8fGMhPT1kfHxsIT09cCl7bGV0IHQ9MS1hO2NvbnN0IGU9cypoK2MqZCtsKnArdSpmLG49ZT49MD8xOi0xLHI9MS1lKmU7aWYocj5OdW1iZXIuRVBTSUxPTil7Y29uc3QgaT1NYXRoLnNxcnQociksbz1NYXRoLmF0YW4yKGksZSpuKTt0PU1hdGguc2luKHQqbykvaSxhPU1hdGguc2luKGEqbykvaX1jb25zdCBpPWEqbjtpZihzPXMqdCtoKmksYz1jKnQrZCppLGw9bCp0K3AqaSx1PXUqdCtmKmksdD09PTEtYSl7Y29uc3QgdD0xL01hdGguc3FydChzKnMrYypjK2wqbCt1KnUpO3MqPXQsYyo9dCxsKj10LHUqPXR9fXRbZV09cyx0W2UrMV09Yyx0W2UrMl09bCx0W2UrM109dX1zdGF0aWMgbXVsdGlwbHlRdWF0ZXJuaW9uc0ZsYXQodCxlLG4scixpLG8pe2NvbnN0IGE9bltyXSxzPW5bcisxXSxjPW5bcisyXSxsPW5bciszXSx1PWlbb10saD1pW28rMV0sZD1pW28rMl0scD1pW28rM107cmV0dXJuIHRbZV09YSpwK2wqdStzKmQtYypoLHRbZSsxXT1zKnArbCpoK2MqdS1hKmQsdFtlKzJdPWMqcCtsKmQrYSpoLXMqdSx0W2UrM109bCpwLWEqdS1zKmgtYypkLHR9Z2V0IHgoKXtyZXR1cm4gdGhpcy5feH1zZXQgeCh0KXt0aGlzLl94PXQsdGhpcy5fb25DaGFuZ2VDYWxsYmFjaygpfWdldCB5KCl7cmV0dXJuIHRoaXMuX3l9c2V0IHkodCl7dGhpcy5feT10LHRoaXMuX29uQ2hhbmdlQ2FsbGJhY2soKX1nZXQgeigpe3JldHVybiB0aGlzLl96fXNldCB6KHQpe3RoaXMuX3o9dCx0aGlzLl9vbkNoYW5nZUNhbGxiYWNrKCl9Z2V0IHcoKXtyZXR1cm4gdGhpcy5fd31zZXQgdyh0KXt0aGlzLl93PXQsdGhpcy5fb25DaGFuZ2VDYWxsYmFjaygpfXNldCh0LGUsbixyKXtyZXR1cm4gdGhpcy5feD10LHRoaXMuX3k9ZSx0aGlzLl96PW4sdGhpcy5fdz1yLHRoaXMuX29uQ2hhbmdlQ2FsbGJhY2soKSx0aGlzfWNsb25lKCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMuX3gsdGhpcy5feSx0aGlzLl96LHRoaXMuX3cpfWNvcHkodCl7cmV0dXJuIHRoaXMuX3g9dC54LHRoaXMuX3k9dC55LHRoaXMuX3o9dC56LHRoaXMuX3c9dC53LHRoaXMuX29uQ2hhbmdlQ2FsbGJhY2soKSx0aGlzfXNldEZyb21FdWxlcih0LGUpe2lmKCF0fHwhdC5pc0V1bGVyKXRocm93IG5ldyBFcnJvcihcIlRIUkVFLlF1YXRlcm5pb246IC5zZXRGcm9tRXVsZXIoKSBub3cgZXhwZWN0cyBhbiBFdWxlciByb3RhdGlvbiByYXRoZXIgdGhhbiBhIFZlY3RvcjMgYW5kIG9yZGVyLlwiKTtjb25zdCBuPXQuX3gscj10Ll95LGk9dC5feixvPXQuX29yZGVyLGE9TWF0aC5jb3Mscz1NYXRoLnNpbixjPWEobi8yKSxsPWEoci8yKSx1PWEoaS8yKSxoPXMobi8yKSxkPXMoci8yKSxwPXMoaS8yKTtzd2l0Y2gobyl7Y2FzZVwiWFlaXCI6dGhpcy5feD1oKmwqdStjKmQqcCx0aGlzLl95PWMqZCp1LWgqbCpwLHRoaXMuX3o9YypsKnAraCpkKnUsdGhpcy5fdz1jKmwqdS1oKmQqcDticmVhaztjYXNlXCJZWFpcIjp0aGlzLl94PWgqbCp1K2MqZCpwLHRoaXMuX3k9YypkKnUtaCpsKnAsdGhpcy5fej1jKmwqcC1oKmQqdSx0aGlzLl93PWMqbCp1K2gqZCpwO2JyZWFrO2Nhc2VcIlpYWVwiOnRoaXMuX3g9aCpsKnUtYypkKnAsdGhpcy5feT1jKmQqdStoKmwqcCx0aGlzLl96PWMqbCpwK2gqZCp1LHRoaXMuX3c9YypsKnUtaCpkKnA7YnJlYWs7Y2FzZVwiWllYXCI6dGhpcy5feD1oKmwqdS1jKmQqcCx0aGlzLl95PWMqZCp1K2gqbCpwLHRoaXMuX3o9YypsKnAtaCpkKnUsdGhpcy5fdz1jKmwqdStoKmQqcDticmVhaztjYXNlXCJZWlhcIjp0aGlzLl94PWgqbCp1K2MqZCpwLHRoaXMuX3k9YypkKnUraCpsKnAsdGhpcy5fej1jKmwqcC1oKmQqdSx0aGlzLl93PWMqbCp1LWgqZCpwO2JyZWFrO2Nhc2VcIlhaWVwiOnRoaXMuX3g9aCpsKnUtYypkKnAsdGhpcy5feT1jKmQqdS1oKmwqcCx0aGlzLl96PWMqbCpwK2gqZCp1LHRoaXMuX3c9YypsKnUraCpkKnA7YnJlYWs7ZGVmYXVsdDpjb25zb2xlLndhcm4oXCJUSFJFRS5RdWF0ZXJuaW9uOiAuc2V0RnJvbUV1bGVyKCkgZW5jb3VudGVyZWQgYW4gdW5rbm93biBvcmRlcjogXCIrbyl9cmV0dXJuITEhPT1lJiZ0aGlzLl9vbkNoYW5nZUNhbGxiYWNrKCksdGhpc31zZXRGcm9tQXhpc0FuZ2xlKHQsZSl7Y29uc3Qgbj1lLzIscj1NYXRoLnNpbihuKTtyZXR1cm4gdGhpcy5feD10Lngqcix0aGlzLl95PXQueSpyLHRoaXMuX3o9dC56KnIsdGhpcy5fdz1NYXRoLmNvcyhuKSx0aGlzLl9vbkNoYW5nZUNhbGxiYWNrKCksdGhpc31zZXRGcm9tUm90YXRpb25NYXRyaXgodCl7Y29uc3QgZT10LmVsZW1lbnRzLG49ZVswXSxyPWVbNF0saT1lWzhdLG89ZVsxXSxhPWVbNV0scz1lWzldLGM9ZVsyXSxsPWVbNl0sdT1lWzEwXSxoPW4rYSt1O2lmKGg+MCl7Y29uc3QgdD0uNS9NYXRoLnNxcnQoaCsxKTt0aGlzLl93PS4yNS90LHRoaXMuX3g9KGwtcykqdCx0aGlzLl95PShpLWMpKnQsdGhpcy5fej0oby1yKSp0fWVsc2UgaWYobj5hJiZuPnUpe2NvbnN0IHQ9MipNYXRoLnNxcnQoMStuLWEtdSk7dGhpcy5fdz0obC1zKS90LHRoaXMuX3g9LjI1KnQsdGhpcy5feT0ocitvKS90LHRoaXMuX3o9KGkrYykvdH1lbHNlIGlmKGE+dSl7Y29uc3QgdD0yKk1hdGguc3FydCgxK2Etbi11KTt0aGlzLl93PShpLWMpL3QsdGhpcy5feD0ocitvKS90LHRoaXMuX3k9LjI1KnQsdGhpcy5fej0ocytsKS90fWVsc2V7Y29uc3QgdD0yKk1hdGguc3FydCgxK3Utbi1hKTt0aGlzLl93PShvLXIpL3QsdGhpcy5feD0oaStjKS90LHRoaXMuX3k9KHMrbCkvdCx0aGlzLl96PS4yNSp0fXJldHVybiB0aGlzLl9vbkNoYW5nZUNhbGxiYWNrKCksdGhpc31zZXRGcm9tVW5pdFZlY3RvcnModCxlKXtsZXQgbj10LmRvdChlKSsxO3JldHVybiBuPDFlLTY/KG49MCxNYXRoLmFicyh0LngpPk1hdGguYWJzKHQueik/KHRoaXMuX3g9LXQueSx0aGlzLl95PXQueCx0aGlzLl96PTAsdGhpcy5fdz1uKToodGhpcy5feD0wLHRoaXMuX3k9LXQueix0aGlzLl96PXQueSx0aGlzLl93PW4pKToodGhpcy5feD10LnkqZS56LXQueiplLnksdGhpcy5feT10LnoqZS54LXQueCplLnosdGhpcy5fej10LngqZS55LXQueSplLngsdGhpcy5fdz1uKSx0aGlzLm5vcm1hbGl6ZSgpfWFuZ2xlVG8odCl7cmV0dXJuIDIqTWF0aC5hY29zKE1hdGguYWJzKHpuLmNsYW1wKHRoaXMuZG90KHQpLC0xLDEpKSl9cm90YXRlVG93YXJkcyh0LGUpe2NvbnN0IG49dGhpcy5hbmdsZVRvKHQpO2lmKDA9PT1uKXJldHVybiB0aGlzO2NvbnN0IHI9TWF0aC5taW4oMSxlL24pO3JldHVybiB0aGlzLnNsZXJwKHQsciksdGhpc31pZGVudGl0eSgpe3JldHVybiB0aGlzLnNldCgwLDAsMCwxKX1pbnZlcnQoKXtyZXR1cm4gdGhpcy5jb25qdWdhdGUoKX1jb25qdWdhdGUoKXtyZXR1cm4gdGhpcy5feCo9LTEsdGhpcy5feSo9LTEsdGhpcy5feio9LTEsdGhpcy5fb25DaGFuZ2VDYWxsYmFjaygpLHRoaXN9ZG90KHQpe3JldHVybiB0aGlzLl94KnQuX3grdGhpcy5feSp0Ll95K3RoaXMuX3oqdC5feit0aGlzLl93KnQuX3d9bGVuZ3RoU3EoKXtyZXR1cm4gdGhpcy5feCp0aGlzLl94K3RoaXMuX3kqdGhpcy5feSt0aGlzLl96KnRoaXMuX3ordGhpcy5fdyp0aGlzLl93fWxlbmd0aCgpe3JldHVybiBNYXRoLnNxcnQodGhpcy5feCp0aGlzLl94K3RoaXMuX3kqdGhpcy5feSt0aGlzLl96KnRoaXMuX3ordGhpcy5fdyp0aGlzLl93KX1ub3JtYWxpemUoKXtsZXQgdD10aGlzLmxlbmd0aCgpO3JldHVybiAwPT09dD8odGhpcy5feD0wLHRoaXMuX3k9MCx0aGlzLl96PTAsdGhpcy5fdz0xKToodD0xL3QsdGhpcy5feD10aGlzLl94KnQsdGhpcy5feT10aGlzLl95KnQsdGhpcy5fej10aGlzLl96KnQsdGhpcy5fdz10aGlzLl93KnQpLHRoaXMuX29uQ2hhbmdlQ2FsbGJhY2soKSx0aGlzfW11bHRpcGx5KHQsZSl7cmV0dXJuIHZvaWQgMCE9PWU/KGNvbnNvbGUud2FybihcIlRIUkVFLlF1YXRlcm5pb246IC5tdWx0aXBseSgpIG5vdyBvbmx5IGFjY2VwdHMgb25lIGFyZ3VtZW50LiBVc2UgLm11bHRpcGx5UXVhdGVybmlvbnMoIGEsIGIgKSBpbnN0ZWFkLlwiKSx0aGlzLm11bHRpcGx5UXVhdGVybmlvbnModCxlKSk6dGhpcy5tdWx0aXBseVF1YXRlcm5pb25zKHRoaXMsdCl9cHJlbXVsdGlwbHkodCl7cmV0dXJuIHRoaXMubXVsdGlwbHlRdWF0ZXJuaW9ucyh0LHRoaXMpfW11bHRpcGx5UXVhdGVybmlvbnModCxlKXtjb25zdCBuPXQuX3gscj10Ll95LGk9dC5feixvPXQuX3csYT1lLl94LHM9ZS5feSxjPWUuX3osbD1lLl93O3JldHVybiB0aGlzLl94PW4qbCtvKmErcipjLWkqcyx0aGlzLl95PXIqbCtvKnMraSphLW4qYyx0aGlzLl96PWkqbCtvKmMrbipzLXIqYSx0aGlzLl93PW8qbC1uKmEtcipzLWkqYyx0aGlzLl9vbkNoYW5nZUNhbGxiYWNrKCksdGhpc31zbGVycCh0LGUpe2lmKDA9PT1lKXJldHVybiB0aGlzO2lmKDE9PT1lKXJldHVybiB0aGlzLmNvcHkodCk7Y29uc3Qgbj10aGlzLl94LHI9dGhpcy5feSxpPXRoaXMuX3osbz10aGlzLl93O2xldCBhPW8qdC5fdytuKnQuX3grcip0Ll95K2kqdC5fejtpZihhPDA/KHRoaXMuX3c9LXQuX3csdGhpcy5feD0tdC5feCx0aGlzLl95PS10Ll95LHRoaXMuX3o9LXQuX3osYT0tYSk6dGhpcy5jb3B5KHQpLGE+PTEpcmV0dXJuIHRoaXMuX3c9byx0aGlzLl94PW4sdGhpcy5feT1yLHRoaXMuX3o9aSx0aGlzO2NvbnN0IHM9MS1hKmE7aWYoczw9TnVtYmVyLkVQU0lMT04pe2NvbnN0IHQ9MS1lO3JldHVybiB0aGlzLl93PXQqbytlKnRoaXMuX3csdGhpcy5feD10Km4rZSp0aGlzLl94LHRoaXMuX3k9dCpyK2UqdGhpcy5feSx0aGlzLl96PXQqaStlKnRoaXMuX3osdGhpcy5ub3JtYWxpemUoKSx0aGlzLl9vbkNoYW5nZUNhbGxiYWNrKCksdGhpc31jb25zdCBjPU1hdGguc3FydChzKSxsPU1hdGguYXRhbjIoYyxhKSx1PU1hdGguc2luKCgxLWUpKmwpL2MsaD1NYXRoLnNpbihlKmwpL2M7cmV0dXJuIHRoaXMuX3c9byp1K3RoaXMuX3cqaCx0aGlzLl94PW4qdSt0aGlzLl94KmgsdGhpcy5feT1yKnUrdGhpcy5feSpoLHRoaXMuX3o9aSp1K3RoaXMuX3oqaCx0aGlzLl9vbkNoYW5nZUNhbGxiYWNrKCksdGhpc31lcXVhbHModCl7cmV0dXJuIHQuX3g9PT10aGlzLl94JiZ0Ll95PT09dGhpcy5feSYmdC5fej09PXRoaXMuX3omJnQuX3c9PT10aGlzLl93fWZyb21BcnJheSh0LGU9MCl7cmV0dXJuIHRoaXMuX3g9dFtlXSx0aGlzLl95PXRbZSsxXSx0aGlzLl96PXRbZSsyXSx0aGlzLl93PXRbZSszXSx0aGlzLl9vbkNoYW5nZUNhbGxiYWNrKCksdGhpc310b0FycmF5KHQ9W10sZT0wKXtyZXR1cm4gdFtlXT10aGlzLl94LHRbZSsxXT10aGlzLl95LHRbZSsyXT10aGlzLl96LHRbZSszXT10aGlzLl93LHR9ZnJvbUJ1ZmZlckF0dHJpYnV0ZSh0LGUpe3JldHVybiB0aGlzLl94PXQuZ2V0WChlKSx0aGlzLl95PXQuZ2V0WShlKSx0aGlzLl96PXQuZ2V0WihlKSx0aGlzLl93PXQuZ2V0VyhlKSx0aGlzfV9vbkNoYW5nZSh0KXtyZXR1cm4gdGhpcy5fb25DaGFuZ2VDYWxsYmFjaz10LHRoaXN9X29uQ2hhbmdlQ2FsbGJhY2soKXt9fWNsYXNzIEtue2NvbnN0cnVjdG9yKHQ9MCxlPTAsbj0wKXtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImlzVmVjdG9yM1wiLHt2YWx1ZTohMH0pLHRoaXMueD10LHRoaXMueT1lLHRoaXMuej1ufXNldCh0LGUsbil7cmV0dXJuIHZvaWQgMD09PW4mJihuPXRoaXMueiksdGhpcy54PXQsdGhpcy55PWUsdGhpcy56PW4sdGhpc31zZXRTY2FsYXIodCl7cmV0dXJuIHRoaXMueD10LHRoaXMueT10LHRoaXMuej10LHRoaXN9c2V0WCh0KXtyZXR1cm4gdGhpcy54PXQsdGhpc31zZXRZKHQpe3JldHVybiB0aGlzLnk9dCx0aGlzfXNldFoodCl7cmV0dXJuIHRoaXMuej10LHRoaXN9c2V0Q29tcG9uZW50KHQsZSl7c3dpdGNoKHQpe2Nhc2UgMDp0aGlzLng9ZTticmVhaztjYXNlIDE6dGhpcy55PWU7YnJlYWs7Y2FzZSAyOnRoaXMuej1lO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKFwiaW5kZXggaXMgb3V0IG9mIHJhbmdlOiBcIit0KX1yZXR1cm4gdGhpc31nZXRDb21wb25lbnQodCl7c3dpdGNoKHQpe2Nhc2UgMDpyZXR1cm4gdGhpcy54O2Nhc2UgMTpyZXR1cm4gdGhpcy55O2Nhc2UgMjpyZXR1cm4gdGhpcy56O2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKFwiaW5kZXggaXMgb3V0IG9mIHJhbmdlOiBcIit0KX19Y2xvbmUoKXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy54LHRoaXMueSx0aGlzLnopfWNvcHkodCl7cmV0dXJuIHRoaXMueD10LngsdGhpcy55PXQueSx0aGlzLno9dC56LHRoaXN9YWRkKHQsZSl7cmV0dXJuIHZvaWQgMCE9PWU/KGNvbnNvbGUud2FybihcIlRIUkVFLlZlY3RvcjM6IC5hZGQoKSBub3cgb25seSBhY2NlcHRzIG9uZSBhcmd1bWVudC4gVXNlIC5hZGRWZWN0b3JzKCBhLCBiICkgaW5zdGVhZC5cIiksdGhpcy5hZGRWZWN0b3JzKHQsZSkpOih0aGlzLngrPXQueCx0aGlzLnkrPXQueSx0aGlzLnorPXQueix0aGlzKX1hZGRTY2FsYXIodCl7cmV0dXJuIHRoaXMueCs9dCx0aGlzLnkrPXQsdGhpcy56Kz10LHRoaXN9YWRkVmVjdG9ycyh0LGUpe3JldHVybiB0aGlzLng9dC54K2UueCx0aGlzLnk9dC55K2UueSx0aGlzLno9dC56K2Uueix0aGlzfWFkZFNjYWxlZFZlY3Rvcih0LGUpe3JldHVybiB0aGlzLngrPXQueCplLHRoaXMueSs9dC55KmUsdGhpcy56Kz10LnoqZSx0aGlzfXN1Yih0LGUpe3JldHVybiB2b2lkIDAhPT1lPyhjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3IzOiAuc3ViKCkgbm93IG9ubHkgYWNjZXB0cyBvbmUgYXJndW1lbnQuIFVzZSAuc3ViVmVjdG9ycyggYSwgYiApIGluc3RlYWQuXCIpLHRoaXMuc3ViVmVjdG9ycyh0LGUpKToodGhpcy54LT10LngsdGhpcy55LT10LnksdGhpcy56LT10LnosdGhpcyl9c3ViU2NhbGFyKHQpe3JldHVybiB0aGlzLngtPXQsdGhpcy55LT10LHRoaXMuei09dCx0aGlzfXN1YlZlY3RvcnModCxlKXtyZXR1cm4gdGhpcy54PXQueC1lLngsdGhpcy55PXQueS1lLnksdGhpcy56PXQuei1lLnosdGhpc31tdWx0aXBseSh0LGUpe3JldHVybiB2b2lkIDAhPT1lPyhjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3IzOiAubXVsdGlwbHkoKSBub3cgb25seSBhY2NlcHRzIG9uZSBhcmd1bWVudC4gVXNlIC5tdWx0aXBseVZlY3RvcnMoIGEsIGIgKSBpbnN0ZWFkLlwiKSx0aGlzLm11bHRpcGx5VmVjdG9ycyh0LGUpKToodGhpcy54Kj10LngsdGhpcy55Kj10LnksdGhpcy56Kj10LnosdGhpcyl9bXVsdGlwbHlTY2FsYXIodCl7cmV0dXJuIHRoaXMueCo9dCx0aGlzLnkqPXQsdGhpcy56Kj10LHRoaXN9bXVsdGlwbHlWZWN0b3JzKHQsZSl7cmV0dXJuIHRoaXMueD10LngqZS54LHRoaXMueT10LnkqZS55LHRoaXMuej10LnoqZS56LHRoaXN9YXBwbHlFdWxlcih0KXtyZXR1cm4gdCYmdC5pc0V1bGVyfHxjb25zb2xlLmVycm9yKFwiVEhSRUUuVmVjdG9yMzogLmFwcGx5RXVsZXIoKSBub3cgZXhwZWN0cyBhbiBFdWxlciByb3RhdGlvbiByYXRoZXIgdGhhbiBhIFZlY3RvcjMgYW5kIG9yZGVyLlwiKSx0aGlzLmFwcGx5UXVhdGVybmlvbigkbi5zZXRGcm9tRXVsZXIodCkpfWFwcGx5QXhpc0FuZ2xlKHQsZSl7cmV0dXJuIHRoaXMuYXBwbHlRdWF0ZXJuaW9uKCRuLnNldEZyb21BeGlzQW5nbGUodCxlKSl9YXBwbHlNYXRyaXgzKHQpe2NvbnN0IGU9dGhpcy54LG49dGhpcy55LHI9dGhpcy56LGk9dC5lbGVtZW50cztyZXR1cm4gdGhpcy54PWlbMF0qZStpWzNdKm4raVs2XSpyLHRoaXMueT1pWzFdKmUraVs0XSpuK2lbN10qcix0aGlzLno9aVsyXSplK2lbNV0qbitpWzhdKnIsdGhpc31hcHBseU5vcm1hbE1hdHJpeCh0KXtyZXR1cm4gdGhpcy5hcHBseU1hdHJpeDModCkubm9ybWFsaXplKCl9YXBwbHlNYXRyaXg0KHQpe2NvbnN0IGU9dGhpcy54LG49dGhpcy55LHI9dGhpcy56LGk9dC5lbGVtZW50cyxvPTEvKGlbM10qZStpWzddKm4raVsxMV0qcitpWzE1XSk7cmV0dXJuIHRoaXMueD0oaVswXSplK2lbNF0qbitpWzhdKnIraVsxMl0pKm8sdGhpcy55PShpWzFdKmUraVs1XSpuK2lbOV0qcitpWzEzXSkqbyx0aGlzLno9KGlbMl0qZStpWzZdKm4raVsxMF0qcitpWzE0XSkqbyx0aGlzfWFwcGx5UXVhdGVybmlvbih0KXtjb25zdCBlPXRoaXMueCxuPXRoaXMueSxyPXRoaXMueixpPXQueCxvPXQueSxhPXQueixzPXQudyxjPXMqZStvKnItYSpuLGw9cypuK2EqZS1pKnIsdT1zKnIraSpuLW8qZSxoPS1pKmUtbypuLWEqcjtyZXR1cm4gdGhpcy54PWMqcytoKi1pK2wqLWEtdSotbyx0aGlzLnk9bCpzK2gqLW8rdSotaS1jKi1hLHRoaXMuej11KnMraCotYStjKi1vLWwqLWksdGhpc31wcm9qZWN0KHQpe3JldHVybiB0aGlzLmFwcGx5TWF0cml4NCh0Lm1hdHJpeFdvcmxkSW52ZXJzZSkuYXBwbHlNYXRyaXg0KHQucHJvamVjdGlvbk1hdHJpeCl9dW5wcm9qZWN0KHQpe3JldHVybiB0aGlzLmFwcGx5TWF0cml4NCh0LnByb2plY3Rpb25NYXRyaXhJbnZlcnNlKS5hcHBseU1hdHJpeDQodC5tYXRyaXhXb3JsZCl9dHJhbnNmb3JtRGlyZWN0aW9uKHQpe2NvbnN0IGU9dGhpcy54LG49dGhpcy55LHI9dGhpcy56LGk9dC5lbGVtZW50cztyZXR1cm4gdGhpcy54PWlbMF0qZStpWzRdKm4raVs4XSpyLHRoaXMueT1pWzFdKmUraVs1XSpuK2lbOV0qcix0aGlzLno9aVsyXSplK2lbNl0qbitpWzEwXSpyLHRoaXMubm9ybWFsaXplKCl9ZGl2aWRlKHQpe3JldHVybiB0aGlzLngvPXQueCx0aGlzLnkvPXQueSx0aGlzLnovPXQueix0aGlzfWRpdmlkZVNjYWxhcih0KXtyZXR1cm4gdGhpcy5tdWx0aXBseVNjYWxhcigxL3QpfW1pbih0KXtyZXR1cm4gdGhpcy54PU1hdGgubWluKHRoaXMueCx0LngpLHRoaXMueT1NYXRoLm1pbih0aGlzLnksdC55KSx0aGlzLno9TWF0aC5taW4odGhpcy56LHQueiksdGhpc31tYXgodCl7cmV0dXJuIHRoaXMueD1NYXRoLm1heCh0aGlzLngsdC54KSx0aGlzLnk9TWF0aC5tYXgodGhpcy55LHQueSksdGhpcy56PU1hdGgubWF4KHRoaXMueix0LnopLHRoaXN9Y2xhbXAodCxlKXtyZXR1cm4gdGhpcy54PU1hdGgubWF4KHQueCxNYXRoLm1pbihlLngsdGhpcy54KSksdGhpcy55PU1hdGgubWF4KHQueSxNYXRoLm1pbihlLnksdGhpcy55KSksdGhpcy56PU1hdGgubWF4KHQueixNYXRoLm1pbihlLnosdGhpcy56KSksdGhpc31jbGFtcFNjYWxhcih0LGUpe3JldHVybiB0aGlzLng9TWF0aC5tYXgodCxNYXRoLm1pbihlLHRoaXMueCkpLHRoaXMueT1NYXRoLm1heCh0LE1hdGgubWluKGUsdGhpcy55KSksdGhpcy56PU1hdGgubWF4KHQsTWF0aC5taW4oZSx0aGlzLnopKSx0aGlzfWNsYW1wTGVuZ3RoKHQsZSl7Y29uc3Qgbj10aGlzLmxlbmd0aCgpO3JldHVybiB0aGlzLmRpdmlkZVNjYWxhcihufHwxKS5tdWx0aXBseVNjYWxhcihNYXRoLm1heCh0LE1hdGgubWluKGUsbikpKX1mbG9vcigpe3JldHVybiB0aGlzLng9TWF0aC5mbG9vcih0aGlzLngpLHRoaXMueT1NYXRoLmZsb29yKHRoaXMueSksdGhpcy56PU1hdGguZmxvb3IodGhpcy56KSx0aGlzfWNlaWwoKXtyZXR1cm4gdGhpcy54PU1hdGguY2VpbCh0aGlzLngpLHRoaXMueT1NYXRoLmNlaWwodGhpcy55KSx0aGlzLno9TWF0aC5jZWlsKHRoaXMueiksdGhpc31yb3VuZCgpe3JldHVybiB0aGlzLng9TWF0aC5yb3VuZCh0aGlzLngpLHRoaXMueT1NYXRoLnJvdW5kKHRoaXMueSksdGhpcy56PU1hdGgucm91bmQodGhpcy56KSx0aGlzfXJvdW5kVG9aZXJvKCl7cmV0dXJuIHRoaXMueD10aGlzLng8MD9NYXRoLmNlaWwodGhpcy54KTpNYXRoLmZsb29yKHRoaXMueCksdGhpcy55PXRoaXMueTwwP01hdGguY2VpbCh0aGlzLnkpOk1hdGguZmxvb3IodGhpcy55KSx0aGlzLno9dGhpcy56PDA/TWF0aC5jZWlsKHRoaXMueik6TWF0aC5mbG9vcih0aGlzLnopLHRoaXN9bmVnYXRlKCl7cmV0dXJuIHRoaXMueD0tdGhpcy54LHRoaXMueT0tdGhpcy55LHRoaXMuej0tdGhpcy56LHRoaXN9ZG90KHQpe3JldHVybiB0aGlzLngqdC54K3RoaXMueSp0LnkrdGhpcy56KnQuen1sZW5ndGhTcSgpe3JldHVybiB0aGlzLngqdGhpcy54K3RoaXMueSp0aGlzLnkrdGhpcy56KnRoaXMuen1sZW5ndGgoKXtyZXR1cm4gTWF0aC5zcXJ0KHRoaXMueCp0aGlzLngrdGhpcy55KnRoaXMueSt0aGlzLnoqdGhpcy56KX1tYW5oYXR0YW5MZW5ndGgoKXtyZXR1cm4gTWF0aC5hYnModGhpcy54KStNYXRoLmFicyh0aGlzLnkpK01hdGguYWJzKHRoaXMueil9bm9ybWFsaXplKCl7cmV0dXJuIHRoaXMuZGl2aWRlU2NhbGFyKHRoaXMubGVuZ3RoKCl8fDEpfXNldExlbmd0aCh0KXtyZXR1cm4gdGhpcy5ub3JtYWxpemUoKS5tdWx0aXBseVNjYWxhcih0KX1sZXJwKHQsZSl7cmV0dXJuIHRoaXMueCs9KHQueC10aGlzLngpKmUsdGhpcy55Kz0odC55LXRoaXMueSkqZSx0aGlzLnorPSh0LnotdGhpcy56KSplLHRoaXN9bGVycFZlY3RvcnModCxlLG4pe3JldHVybiB0aGlzLng9dC54KyhlLngtdC54KSpuLHRoaXMueT10LnkrKGUueS10LnkpKm4sdGhpcy56PXQueisoZS56LXQueikqbix0aGlzfWNyb3NzKHQsZSl7cmV0dXJuIHZvaWQgMCE9PWU/KGNvbnNvbGUud2FybihcIlRIUkVFLlZlY3RvcjM6IC5jcm9zcygpIG5vdyBvbmx5IGFjY2VwdHMgb25lIGFyZ3VtZW50LiBVc2UgLmNyb3NzVmVjdG9ycyggYSwgYiApIGluc3RlYWQuXCIpLHRoaXMuY3Jvc3NWZWN0b3JzKHQsZSkpOnRoaXMuY3Jvc3NWZWN0b3JzKHRoaXMsdCl9Y3Jvc3NWZWN0b3JzKHQsZSl7Y29uc3Qgbj10Lngscj10LnksaT10Lnosbz1lLngsYT1lLnkscz1lLno7cmV0dXJuIHRoaXMueD1yKnMtaSphLHRoaXMueT1pKm8tbipzLHRoaXMuej1uKmEtcipvLHRoaXN9cHJvamVjdE9uVmVjdG9yKHQpe2NvbnN0IGU9dC5sZW5ndGhTcSgpO2lmKDA9PT1lKXJldHVybiB0aGlzLnNldCgwLDAsMCk7Y29uc3Qgbj10LmRvdCh0aGlzKS9lO3JldHVybiB0aGlzLmNvcHkodCkubXVsdGlwbHlTY2FsYXIobil9cHJvamVjdE9uUGxhbmUodCl7cmV0dXJuIFFuLmNvcHkodGhpcykucHJvamVjdE9uVmVjdG9yKHQpLHRoaXMuc3ViKFFuKX1yZWZsZWN0KHQpe3JldHVybiB0aGlzLnN1YihRbi5jb3B5KHQpLm11bHRpcGx5U2NhbGFyKDIqdGhpcy5kb3QodCkpKX1hbmdsZVRvKHQpe2NvbnN0IGU9TWF0aC5zcXJ0KHRoaXMubGVuZ3RoU3EoKSp0Lmxlbmd0aFNxKCkpO2lmKDA9PT1lKXJldHVybiBNYXRoLlBJLzI7Y29uc3Qgbj10aGlzLmRvdCh0KS9lO3JldHVybiBNYXRoLmFjb3Moem4uY2xhbXAobiwtMSwxKSl9ZGlzdGFuY2VUbyh0KXtyZXR1cm4gTWF0aC5zcXJ0KHRoaXMuZGlzdGFuY2VUb1NxdWFyZWQodCkpfWRpc3RhbmNlVG9TcXVhcmVkKHQpe2NvbnN0IGU9dGhpcy54LXQueCxuPXRoaXMueS10Lnkscj10aGlzLnotdC56O3JldHVybiBlKmUrbipuK3Iqcn1tYW5oYXR0YW5EaXN0YW5jZVRvKHQpe3JldHVybiBNYXRoLmFicyh0aGlzLngtdC54KStNYXRoLmFicyh0aGlzLnktdC55KStNYXRoLmFicyh0aGlzLnotdC56KX1zZXRGcm9tU3BoZXJpY2FsKHQpe3JldHVybiB0aGlzLnNldEZyb21TcGhlcmljYWxDb29yZHModC5yYWRpdXMsdC5waGksdC50aGV0YSl9c2V0RnJvbVNwaGVyaWNhbENvb3Jkcyh0LGUsbil7Y29uc3Qgcj1NYXRoLnNpbihlKSp0O3JldHVybiB0aGlzLng9cipNYXRoLnNpbihuKSx0aGlzLnk9TWF0aC5jb3MoZSkqdCx0aGlzLno9cipNYXRoLmNvcyhuKSx0aGlzfXNldEZyb21DeWxpbmRyaWNhbCh0KXtyZXR1cm4gdGhpcy5zZXRGcm9tQ3lsaW5kcmljYWxDb29yZHModC5yYWRpdXMsdC50aGV0YSx0LnkpfXNldEZyb21DeWxpbmRyaWNhbENvb3Jkcyh0LGUsbil7cmV0dXJuIHRoaXMueD10Kk1hdGguc2luKGUpLHRoaXMueT1uLHRoaXMuej10Kk1hdGguY29zKGUpLHRoaXN9c2V0RnJvbU1hdHJpeFBvc2l0aW9uKHQpe2NvbnN0IGU9dC5lbGVtZW50cztyZXR1cm4gdGhpcy54PWVbMTJdLHRoaXMueT1lWzEzXSx0aGlzLno9ZVsxNF0sdGhpc31zZXRGcm9tTWF0cml4U2NhbGUodCl7Y29uc3QgZT10aGlzLnNldEZyb21NYXRyaXhDb2x1bW4odCwwKS5sZW5ndGgoKSxuPXRoaXMuc2V0RnJvbU1hdHJpeENvbHVtbih0LDEpLmxlbmd0aCgpLHI9dGhpcy5zZXRGcm9tTWF0cml4Q29sdW1uKHQsMikubGVuZ3RoKCk7cmV0dXJuIHRoaXMueD1lLHRoaXMueT1uLHRoaXMuej1yLHRoaXN9c2V0RnJvbU1hdHJpeENvbHVtbih0LGUpe3JldHVybiB0aGlzLmZyb21BcnJheSh0LmVsZW1lbnRzLDQqZSl9c2V0RnJvbU1hdHJpeDNDb2x1bW4odCxlKXtyZXR1cm4gdGhpcy5mcm9tQXJyYXkodC5lbGVtZW50cywzKmUpfWVxdWFscyh0KXtyZXR1cm4gdC54PT09dGhpcy54JiZ0Lnk9PT10aGlzLnkmJnQuej09PXRoaXMuen1mcm9tQXJyYXkodCxlPTApe3JldHVybiB0aGlzLng9dFtlXSx0aGlzLnk9dFtlKzFdLHRoaXMuej10W2UrMl0sdGhpc310b0FycmF5KHQ9W10sZT0wKXtyZXR1cm4gdFtlXT10aGlzLngsdFtlKzFdPXRoaXMueSx0W2UrMl09dGhpcy56LHR9ZnJvbUJ1ZmZlckF0dHJpYnV0ZSh0LGUsbil7cmV0dXJuIHZvaWQgMCE9PW4mJmNvbnNvbGUud2FybihcIlRIUkVFLlZlY3RvcjM6IG9mZnNldCBoYXMgYmVlbiByZW1vdmVkIGZyb20gLmZyb21CdWZmZXJBdHRyaWJ1dGUoKS5cIiksdGhpcy54PXQuZ2V0WChlKSx0aGlzLnk9dC5nZXRZKGUpLHRoaXMuej10LmdldFooZSksdGhpc31yYW5kb20oKXtyZXR1cm4gdGhpcy54PU1hdGgucmFuZG9tKCksdGhpcy55PU1hdGgucmFuZG9tKCksdGhpcy56PU1hdGgucmFuZG9tKCksdGhpc319Y29uc3QgUW49bmV3IEtuLCRuPW5ldyBKbjtjbGFzcyB0cntjb25zdHJ1Y3Rvcih0LGUpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiaXNCb3gzXCIse3ZhbHVlOiEwfSksdGhpcy5taW49dm9pZCAwIT09dD90Om5ldyBLbigxLzAsMS8wLDEvMCksdGhpcy5tYXg9dm9pZCAwIT09ZT9lOm5ldyBLbigtMS8wLC0xLzAsLTEvMCl9c2V0KHQsZSl7cmV0dXJuIHRoaXMubWluLmNvcHkodCksdGhpcy5tYXguY29weShlKSx0aGlzfXNldEZyb21BcnJheSh0KXtsZXQgZT0xLzAsbj0xLzAscj0xLzAsaT0tMS8wLG89LTEvMCxhPS0xLzA7Zm9yKGxldCBzPTAsYz10Lmxlbmd0aDtzPGM7cys9Myl7Y29uc3QgYz10W3NdLGw9dFtzKzFdLHU9dFtzKzJdO2M8ZSYmKGU9YyksbDxuJiYobj1sKSx1PHImJihyPXUpLGM+aSYmKGk9YyksbD5vJiYobz1sKSx1PmEmJihhPXUpfXJldHVybiB0aGlzLm1pbi5zZXQoZSxuLHIpLHRoaXMubWF4LnNldChpLG8sYSksdGhpc31zZXRGcm9tQnVmZmVyQXR0cmlidXRlKHQpe2xldCBlPTEvMCxuPTEvMCxyPTEvMCxpPS0xLzAsbz0tMS8wLGE9LTEvMDtmb3IobGV0IHM9MCxjPXQuY291bnQ7czxjO3MrKyl7Y29uc3QgYz10LmdldFgocyksbD10LmdldFkocyksdT10LmdldFoocyk7YzxlJiYoZT1jKSxsPG4mJihuPWwpLHU8ciYmKHI9dSksYz5pJiYoaT1jKSxsPm8mJihvPWwpLHU+YSYmKGE9dSl9cmV0dXJuIHRoaXMubWluLnNldChlLG4sciksdGhpcy5tYXguc2V0KGksbyxhKSx0aGlzfXNldEZyb21Qb2ludHModCl7dGhpcy5tYWtlRW1wdHkoKTtmb3IobGV0IGU9MCxuPXQubGVuZ3RoO2U8bjtlKyspdGhpcy5leHBhbmRCeVBvaW50KHRbZV0pO3JldHVybiB0aGlzfXNldEZyb21DZW50ZXJBbmRTaXplKHQsZSl7Y29uc3Qgbj1yci5jb3B5KGUpLm11bHRpcGx5U2NhbGFyKC41KTtyZXR1cm4gdGhpcy5taW4uY29weSh0KS5zdWIobiksdGhpcy5tYXguY29weSh0KS5hZGQobiksdGhpc31zZXRGcm9tT2JqZWN0KHQpe3JldHVybiB0aGlzLm1ha2VFbXB0eSgpLHRoaXMuZXhwYW5kQnlPYmplY3QodCl9Y2xvbmUoKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyl9Y29weSh0KXtyZXR1cm4gdGhpcy5taW4uY29weSh0Lm1pbiksdGhpcy5tYXguY29weSh0Lm1heCksdGhpc31tYWtlRW1wdHkoKXtyZXR1cm4gdGhpcy5taW4ueD10aGlzLm1pbi55PXRoaXMubWluLno9MS8wLHRoaXMubWF4Lng9dGhpcy5tYXgueT10aGlzLm1heC56PS0xLzAsdGhpc31pc0VtcHR5KCl7cmV0dXJuIHRoaXMubWF4Lng8dGhpcy5taW4ueHx8dGhpcy5tYXgueTx0aGlzLm1pbi55fHx0aGlzLm1heC56PHRoaXMubWluLnp9Z2V0Q2VudGVyKHQpe3JldHVybiB2b2lkIDA9PT10JiYoY29uc29sZS53YXJuKFwiVEhSRUUuQm94MzogLmdldENlbnRlcigpIHRhcmdldCBpcyBub3cgcmVxdWlyZWRcIiksdD1uZXcgS24pLHRoaXMuaXNFbXB0eSgpP3Quc2V0KDAsMCwwKTp0LmFkZFZlY3RvcnModGhpcy5taW4sdGhpcy5tYXgpLm11bHRpcGx5U2NhbGFyKC41KX1nZXRTaXplKHQpe3JldHVybiB2b2lkIDA9PT10JiYoY29uc29sZS53YXJuKFwiVEhSRUUuQm94MzogLmdldFNpemUoKSB0YXJnZXQgaXMgbm93IHJlcXVpcmVkXCIpLHQ9bmV3IEtuKSx0aGlzLmlzRW1wdHkoKT90LnNldCgwLDAsMCk6dC5zdWJWZWN0b3JzKHRoaXMubWF4LHRoaXMubWluKX1leHBhbmRCeVBvaW50KHQpe3JldHVybiB0aGlzLm1pbi5taW4odCksdGhpcy5tYXgubWF4KHQpLHRoaXN9ZXhwYW5kQnlWZWN0b3IodCl7cmV0dXJuIHRoaXMubWluLnN1Yih0KSx0aGlzLm1heC5hZGQodCksdGhpc31leHBhbmRCeVNjYWxhcih0KXtyZXR1cm4gdGhpcy5taW4uYWRkU2NhbGFyKC10KSx0aGlzLm1heC5hZGRTY2FsYXIodCksdGhpc31leHBhbmRCeU9iamVjdCh0KXt0LnVwZGF0ZVdvcmxkTWF0cml4KCExLCExKTtjb25zdCBlPXQuZ2VvbWV0cnk7dm9pZCAwIT09ZSYmKG51bGw9PT1lLmJvdW5kaW5nQm94JiZlLmNvbXB1dGVCb3VuZGluZ0JveCgpLGlyLmNvcHkoZS5ib3VuZGluZ0JveCksaXIuYXBwbHlNYXRyaXg0KHQubWF0cml4V29ybGQpLHRoaXMudW5pb24oaXIpKTtjb25zdCBuPXQuY2hpbGRyZW47Zm9yKGxldCB0PTAsZT1uLmxlbmd0aDt0PGU7dCsrKXRoaXMuZXhwYW5kQnlPYmplY3Qoblt0XSk7cmV0dXJuIHRoaXN9Y29udGFpbnNQb2ludCh0KXtyZXR1cm4hKHQueDx0aGlzLm1pbi54fHx0Lng+dGhpcy5tYXgueHx8dC55PHRoaXMubWluLnl8fHQueT50aGlzLm1heC55fHx0Lno8dGhpcy5taW4uenx8dC56PnRoaXMubWF4LnopfWNvbnRhaW5zQm94KHQpe3JldHVybiB0aGlzLm1pbi54PD10Lm1pbi54JiZ0Lm1heC54PD10aGlzLm1heC54JiZ0aGlzLm1pbi55PD10Lm1pbi55JiZ0Lm1heC55PD10aGlzLm1heC55JiZ0aGlzLm1pbi56PD10Lm1pbi56JiZ0Lm1heC56PD10aGlzLm1heC56fWdldFBhcmFtZXRlcih0LGUpe3JldHVybiB2b2lkIDA9PT1lJiYoY29uc29sZS53YXJuKFwiVEhSRUUuQm94MzogLmdldFBhcmFtZXRlcigpIHRhcmdldCBpcyBub3cgcmVxdWlyZWRcIiksZT1uZXcgS24pLGUuc2V0KCh0LngtdGhpcy5taW4ueCkvKHRoaXMubWF4LngtdGhpcy5taW4ueCksKHQueS10aGlzLm1pbi55KS8odGhpcy5tYXgueS10aGlzLm1pbi55KSwodC56LXRoaXMubWluLnopLyh0aGlzLm1heC56LXRoaXMubWluLnopKX1pbnRlcnNlY3RzQm94KHQpe3JldHVybiEodC5tYXgueDx0aGlzLm1pbi54fHx0Lm1pbi54PnRoaXMubWF4Lnh8fHQubWF4Lnk8dGhpcy5taW4ueXx8dC5taW4ueT50aGlzLm1heC55fHx0Lm1heC56PHRoaXMubWluLnp8fHQubWluLno+dGhpcy5tYXgueil9aW50ZXJzZWN0c1NwaGVyZSh0KXtyZXR1cm4gdGhpcy5jbGFtcFBvaW50KHQuY2VudGVyLHJyKSxyci5kaXN0YW5jZVRvU3F1YXJlZCh0LmNlbnRlcik8PXQucmFkaXVzKnQucmFkaXVzfWludGVyc2VjdHNQbGFuZSh0KXtsZXQgZSxuO3JldHVybiB0Lm5vcm1hbC54PjA/KGU9dC5ub3JtYWwueCp0aGlzLm1pbi54LG49dC5ub3JtYWwueCp0aGlzLm1heC54KTooZT10Lm5vcm1hbC54KnRoaXMubWF4Lngsbj10Lm5vcm1hbC54KnRoaXMubWluLngpLHQubm9ybWFsLnk+MD8oZSs9dC5ub3JtYWwueSp0aGlzLm1pbi55LG4rPXQubm9ybWFsLnkqdGhpcy5tYXgueSk6KGUrPXQubm9ybWFsLnkqdGhpcy5tYXgueSxuKz10Lm5vcm1hbC55KnRoaXMubWluLnkpLHQubm9ybWFsLno+MD8oZSs9dC5ub3JtYWwueip0aGlzLm1pbi56LG4rPXQubm9ybWFsLnoqdGhpcy5tYXgueik6KGUrPXQubm9ybWFsLnoqdGhpcy5tYXgueixuKz10Lm5vcm1hbC56KnRoaXMubWluLnopLGU8PS10LmNvbnN0YW50JiZuPj0tdC5jb25zdGFudH1pbnRlcnNlY3RzVHJpYW5nbGUodCl7aWYodGhpcy5pc0VtcHR5KCkpcmV0dXJuITE7dGhpcy5nZXRDZW50ZXIoaHIpLGRyLnN1YlZlY3RvcnModGhpcy5tYXgsaHIpLG9yLnN1YlZlY3RvcnModC5hLGhyKSxhci5zdWJWZWN0b3JzKHQuYixociksc3Iuc3ViVmVjdG9ycyh0LmMsaHIpLGNyLnN1YlZlY3RvcnMoYXIsb3IpLGxyLnN1YlZlY3RvcnMoc3IsYXIpLHVyLnN1YlZlY3RvcnMob3Isc3IpO2xldCBlPVswLC1jci56LGNyLnksMCwtbHIueixsci55LDAsLXVyLnosdXIueSxjci56LDAsLWNyLngsbHIueiwwLC1sci54LHVyLnosMCwtdXIueCwtY3IueSxjci54LDAsLWxyLnksbHIueCwwLC11ci55LHVyLngsMF07cmV0dXJuISFlcihlLG9yLGFyLHNyLGRyKSYmKGU9WzEsMCwwLDAsMSwwLDAsMCwxXSwhIWVyKGUsb3IsYXIsc3IsZHIpJiYocHIuY3Jvc3NWZWN0b3JzKGNyLGxyKSxlPVtwci54LHByLnkscHIuel0sZXIoZSxvcixhcixzcixkcikpKX1jbGFtcFBvaW50KHQsZSl7cmV0dXJuIHZvaWQgMD09PWUmJihjb25zb2xlLndhcm4oXCJUSFJFRS5Cb3gzOiAuY2xhbXBQb2ludCgpIHRhcmdldCBpcyBub3cgcmVxdWlyZWRcIiksZT1uZXcgS24pLGUuY29weSh0KS5jbGFtcCh0aGlzLm1pbix0aGlzLm1heCl9ZGlzdGFuY2VUb1BvaW50KHQpe3JldHVybiByci5jb3B5KHQpLmNsYW1wKHRoaXMubWluLHRoaXMubWF4KS5zdWIodCkubGVuZ3RoKCl9Z2V0Qm91bmRpbmdTcGhlcmUodCl7cmV0dXJuIHZvaWQgMD09PXQmJmNvbnNvbGUuZXJyb3IoXCJUSFJFRS5Cb3gzOiAuZ2V0Qm91bmRpbmdTcGhlcmUoKSB0YXJnZXQgaXMgbm93IHJlcXVpcmVkXCIpLHRoaXMuZ2V0Q2VudGVyKHQuY2VudGVyKSx0LnJhZGl1cz0uNSp0aGlzLmdldFNpemUocnIpLmxlbmd0aCgpLHR9aW50ZXJzZWN0KHQpe3JldHVybiB0aGlzLm1pbi5tYXgodC5taW4pLHRoaXMubWF4Lm1pbih0Lm1heCksdGhpcy5pc0VtcHR5KCkmJnRoaXMubWFrZUVtcHR5KCksdGhpc311bmlvbih0KXtyZXR1cm4gdGhpcy5taW4ubWluKHQubWluKSx0aGlzLm1heC5tYXgodC5tYXgpLHRoaXN9YXBwbHlNYXRyaXg0KHQpe3JldHVybiB0aGlzLmlzRW1wdHkoKXx8KG5yWzBdLnNldCh0aGlzLm1pbi54LHRoaXMubWluLnksdGhpcy5taW4ueikuYXBwbHlNYXRyaXg0KHQpLG5yWzFdLnNldCh0aGlzLm1pbi54LHRoaXMubWluLnksdGhpcy5tYXgueikuYXBwbHlNYXRyaXg0KHQpLG5yWzJdLnNldCh0aGlzLm1pbi54LHRoaXMubWF4LnksdGhpcy5taW4ueikuYXBwbHlNYXRyaXg0KHQpLG5yWzNdLnNldCh0aGlzLm1pbi54LHRoaXMubWF4LnksdGhpcy5tYXgueikuYXBwbHlNYXRyaXg0KHQpLG5yWzRdLnNldCh0aGlzLm1heC54LHRoaXMubWluLnksdGhpcy5taW4ueikuYXBwbHlNYXRyaXg0KHQpLG5yWzVdLnNldCh0aGlzLm1heC54LHRoaXMubWluLnksdGhpcy5tYXgueikuYXBwbHlNYXRyaXg0KHQpLG5yWzZdLnNldCh0aGlzLm1heC54LHRoaXMubWF4LnksdGhpcy5taW4ueikuYXBwbHlNYXRyaXg0KHQpLG5yWzddLnNldCh0aGlzLm1heC54LHRoaXMubWF4LnksdGhpcy5tYXgueikuYXBwbHlNYXRyaXg0KHQpLHRoaXMuc2V0RnJvbVBvaW50cyhucikpLHRoaXN9dHJhbnNsYXRlKHQpe3JldHVybiB0aGlzLm1pbi5hZGQodCksdGhpcy5tYXguYWRkKHQpLHRoaXN9ZXF1YWxzKHQpe3JldHVybiB0Lm1pbi5lcXVhbHModGhpcy5taW4pJiZ0Lm1heC5lcXVhbHModGhpcy5tYXgpfX1mdW5jdGlvbiBlcih0LGUsbixyLGkpe2ZvcihsZXQgbz0wLGE9dC5sZW5ndGgtMztvPD1hO28rPTMpe2ZyLmZyb21BcnJheSh0LG8pO2NvbnN0IGE9aS54Kk1hdGguYWJzKGZyLngpK2kueSpNYXRoLmFicyhmci55KStpLnoqTWF0aC5hYnMoZnIueikscz1lLmRvdChmciksYz1uLmRvdChmciksbD1yLmRvdChmcik7aWYoTWF0aC5tYXgoLU1hdGgubWF4KHMsYyxsKSxNYXRoLm1pbihzLGMsbCkpPmEpcmV0dXJuITF9cmV0dXJuITB9Y29uc3QgbnI9W25ldyBLbixuZXcgS24sbmV3IEtuLG5ldyBLbixuZXcgS24sbmV3IEtuLG5ldyBLbixuZXcgS25dLHJyPW5ldyBLbixpcj1uZXcgdHIsb3I9bmV3IEtuLGFyPW5ldyBLbixzcj1uZXcgS24sY3I9bmV3IEtuLGxyPW5ldyBLbix1cj1uZXcgS24saHI9bmV3IEtuLGRyPW5ldyBLbixwcj1uZXcgS24sZnI9bmV3IEtuLG1yPW5ldyB0cjtjbGFzcyBncntjb25zdHJ1Y3Rvcih0LGUpe3RoaXMuY2VudGVyPXZvaWQgMCE9PXQ/dDpuZXcgS24sdGhpcy5yYWRpdXM9dm9pZCAwIT09ZT9lOi0xfXNldCh0LGUpe3JldHVybiB0aGlzLmNlbnRlci5jb3B5KHQpLHRoaXMucmFkaXVzPWUsdGhpc31zZXRGcm9tUG9pbnRzKHQsZSl7Y29uc3Qgbj10aGlzLmNlbnRlcjt2b2lkIDAhPT1lP24uY29weShlKTptci5zZXRGcm9tUG9pbnRzKHQpLmdldENlbnRlcihuKTtsZXQgcj0wO2ZvcihsZXQgZT0wLGk9dC5sZW5ndGg7ZTxpO2UrKylyPU1hdGgubWF4KHIsbi5kaXN0YW5jZVRvU3F1YXJlZCh0W2VdKSk7cmV0dXJuIHRoaXMucmFkaXVzPU1hdGguc3FydChyKSx0aGlzfWNsb25lKCl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKS5jb3B5KHRoaXMpfWNvcHkodCl7cmV0dXJuIHRoaXMuY2VudGVyLmNvcHkodC5jZW50ZXIpLHRoaXMucmFkaXVzPXQucmFkaXVzLHRoaXN9aXNFbXB0eSgpe3JldHVybiB0aGlzLnJhZGl1czwwfW1ha2VFbXB0eSgpe3JldHVybiB0aGlzLmNlbnRlci5zZXQoMCwwLDApLHRoaXMucmFkaXVzPS0xLHRoaXN9Y29udGFpbnNQb2ludCh0KXtyZXR1cm4gdC5kaXN0YW5jZVRvU3F1YXJlZCh0aGlzLmNlbnRlcik8PXRoaXMucmFkaXVzKnRoaXMucmFkaXVzfWRpc3RhbmNlVG9Qb2ludCh0KXtyZXR1cm4gdC5kaXN0YW5jZVRvKHRoaXMuY2VudGVyKS10aGlzLnJhZGl1c31pbnRlcnNlY3RzU3BoZXJlKHQpe2NvbnN0IGU9dGhpcy5yYWRpdXMrdC5yYWRpdXM7cmV0dXJuIHQuY2VudGVyLmRpc3RhbmNlVG9TcXVhcmVkKHRoaXMuY2VudGVyKTw9ZSplfWludGVyc2VjdHNCb3godCl7cmV0dXJuIHQuaW50ZXJzZWN0c1NwaGVyZSh0aGlzKX1pbnRlcnNlY3RzUGxhbmUodCl7cmV0dXJuIE1hdGguYWJzKHQuZGlzdGFuY2VUb1BvaW50KHRoaXMuY2VudGVyKSk8PXRoaXMucmFkaXVzfWNsYW1wUG9pbnQodCxlKXtjb25zdCBuPXRoaXMuY2VudGVyLmRpc3RhbmNlVG9TcXVhcmVkKHQpO3JldHVybiB2b2lkIDA9PT1lJiYoY29uc29sZS53YXJuKFwiVEhSRUUuU3BoZXJlOiAuY2xhbXBQb2ludCgpIHRhcmdldCBpcyBub3cgcmVxdWlyZWRcIiksZT1uZXcgS24pLGUuY29weSh0KSxuPnRoaXMucmFkaXVzKnRoaXMucmFkaXVzJiYoZS5zdWIodGhpcy5jZW50ZXIpLm5vcm1hbGl6ZSgpLGUubXVsdGlwbHlTY2FsYXIodGhpcy5yYWRpdXMpLmFkZCh0aGlzLmNlbnRlcikpLGV9Z2V0Qm91bmRpbmdCb3godCl7cmV0dXJuIHZvaWQgMD09PXQmJihjb25zb2xlLndhcm4oXCJUSFJFRS5TcGhlcmU6IC5nZXRCb3VuZGluZ0JveCgpIHRhcmdldCBpcyBub3cgcmVxdWlyZWRcIiksdD1uZXcgdHIpLHRoaXMuaXNFbXB0eSgpPyh0Lm1ha2VFbXB0eSgpLHQpOih0LnNldCh0aGlzLmNlbnRlcix0aGlzLmNlbnRlciksdC5leHBhbmRCeVNjYWxhcih0aGlzLnJhZGl1cyksdCl9YXBwbHlNYXRyaXg0KHQpe3JldHVybiB0aGlzLmNlbnRlci5hcHBseU1hdHJpeDQodCksdGhpcy5yYWRpdXM9dGhpcy5yYWRpdXMqdC5nZXRNYXhTY2FsZU9uQXhpcygpLHRoaXN9dHJhbnNsYXRlKHQpe3JldHVybiB0aGlzLmNlbnRlci5hZGQodCksdGhpc31lcXVhbHModCl7cmV0dXJuIHQuY2VudGVyLmVxdWFscyh0aGlzLmNlbnRlcikmJnQucmFkaXVzPT09dGhpcy5yYWRpdXN9fWNvbnN0IHZyPW5ldyBLbix5cj1uZXcgS24seHI9bmV3IEtuLGJyPW5ldyBLbix3cj1uZXcgS24sX3I9bmV3IEtuLE1yPW5ldyBLbjtjbGFzcyBTcntjb25zdHJ1Y3Rvcih0LGUpe3RoaXMub3JpZ2luPXZvaWQgMCE9PXQ/dDpuZXcgS24sdGhpcy5kaXJlY3Rpb249dm9pZCAwIT09ZT9lOm5ldyBLbigwLDAsLTEpfXNldCh0LGUpe3JldHVybiB0aGlzLm9yaWdpbi5jb3B5KHQpLHRoaXMuZGlyZWN0aW9uLmNvcHkoZSksdGhpc31jbG9uZSgpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3RvcikuY29weSh0aGlzKX1jb3B5KHQpe3JldHVybiB0aGlzLm9yaWdpbi5jb3B5KHQub3JpZ2luKSx0aGlzLmRpcmVjdGlvbi5jb3B5KHQuZGlyZWN0aW9uKSx0aGlzfWF0KHQsZSl7cmV0dXJuIHZvaWQgMD09PWUmJihjb25zb2xlLndhcm4oXCJUSFJFRS5SYXk6IC5hdCgpIHRhcmdldCBpcyBub3cgcmVxdWlyZWRcIiksZT1uZXcgS24pLGUuY29weSh0aGlzLmRpcmVjdGlvbikubXVsdGlwbHlTY2FsYXIodCkuYWRkKHRoaXMub3JpZ2luKX1sb29rQXQodCl7cmV0dXJuIHRoaXMuZGlyZWN0aW9uLmNvcHkodCkuc3ViKHRoaXMub3JpZ2luKS5ub3JtYWxpemUoKSx0aGlzfXJlY2FzdCh0KXtyZXR1cm4gdGhpcy5vcmlnaW4uY29weSh0aGlzLmF0KHQsdnIpKSx0aGlzfWNsb3Nlc3RQb2ludFRvUG9pbnQodCxlKXt2b2lkIDA9PT1lJiYoY29uc29sZS53YXJuKFwiVEhSRUUuUmF5OiAuY2xvc2VzdFBvaW50VG9Qb2ludCgpIHRhcmdldCBpcyBub3cgcmVxdWlyZWRcIiksZT1uZXcgS24pLGUuc3ViVmVjdG9ycyh0LHRoaXMub3JpZ2luKTtjb25zdCBuPWUuZG90KHRoaXMuZGlyZWN0aW9uKTtyZXR1cm4gbjwwP2UuY29weSh0aGlzLm9yaWdpbik6ZS5jb3B5KHRoaXMuZGlyZWN0aW9uKS5tdWx0aXBseVNjYWxhcihuKS5hZGQodGhpcy5vcmlnaW4pfWRpc3RhbmNlVG9Qb2ludCh0KXtyZXR1cm4gTWF0aC5zcXJ0KHRoaXMuZGlzdGFuY2VTcVRvUG9pbnQodCkpfWRpc3RhbmNlU3FUb1BvaW50KHQpe2NvbnN0IGU9dnIuc3ViVmVjdG9ycyh0LHRoaXMub3JpZ2luKS5kb3QodGhpcy5kaXJlY3Rpb24pO3JldHVybiBlPDA/dGhpcy5vcmlnaW4uZGlzdGFuY2VUb1NxdWFyZWQodCk6KHZyLmNvcHkodGhpcy5kaXJlY3Rpb24pLm11bHRpcGx5U2NhbGFyKGUpLmFkZCh0aGlzLm9yaWdpbiksdnIuZGlzdGFuY2VUb1NxdWFyZWQodCkpfWRpc3RhbmNlU3FUb1NlZ21lbnQodCxlLG4scil7eXIuY29weSh0KS5hZGQoZSkubXVsdGlwbHlTY2FsYXIoLjUpLHhyLmNvcHkoZSkuc3ViKHQpLm5vcm1hbGl6ZSgpLGJyLmNvcHkodGhpcy5vcmlnaW4pLnN1Yih5cik7Y29uc3QgaT0uNSp0LmRpc3RhbmNlVG8oZSksbz0tdGhpcy5kaXJlY3Rpb24uZG90KHhyKSxhPWJyLmRvdCh0aGlzLmRpcmVjdGlvbikscz0tYnIuZG90KHhyKSxjPWJyLmxlbmd0aFNxKCksbD1NYXRoLmFicygxLW8qbyk7bGV0IHUsaCxkLHA7aWYobD4wKWlmKHU9bypzLWEsaD1vKmEtcyxwPWkqbCx1Pj0wKWlmKGg+PS1wKWlmKGg8PXApe2NvbnN0IHQ9MS9sO3UqPXQsaCo9dCxkPXUqKHUrbypoKzIqYSkraCoobyp1K2grMipzKStjfWVsc2UgaD1pLHU9TWF0aC5tYXgoMCwtKG8qaCthKSksZD0tdSp1K2gqKGgrMipzKStjO2Vsc2UgaD0taSx1PU1hdGgubWF4KDAsLShvKmgrYSkpLGQ9LXUqdStoKihoKzIqcykrYztlbHNlIGg8PS1wPyh1PU1hdGgubWF4KDAsLSgtbyppK2EpKSxoPXU+MD8taTpNYXRoLm1pbihNYXRoLm1heCgtaSwtcyksaSksZD0tdSp1K2gqKGgrMipzKStjKTpoPD1wPyh1PTAsaD1NYXRoLm1pbihNYXRoLm1heCgtaSwtcyksaSksZD1oKihoKzIqcykrYyk6KHU9TWF0aC5tYXgoMCwtKG8qaSthKSksaD11PjA/aTpNYXRoLm1pbihNYXRoLm1heCgtaSwtcyksaSksZD0tdSp1K2gqKGgrMipzKStjKTtlbHNlIGg9bz4wPy1pOmksdT1NYXRoLm1heCgwLC0obypoK2EpKSxkPS11KnUraCooaCsyKnMpK2M7cmV0dXJuIG4mJm4uY29weSh0aGlzLmRpcmVjdGlvbikubXVsdGlwbHlTY2FsYXIodSkuYWRkKHRoaXMub3JpZ2luKSxyJiZyLmNvcHkoeHIpLm11bHRpcGx5U2NhbGFyKGgpLmFkZCh5ciksZH1pbnRlcnNlY3RTcGhlcmUodCxlKXt2ci5zdWJWZWN0b3JzKHQuY2VudGVyLHRoaXMub3JpZ2luKTtjb25zdCBuPXZyLmRvdCh0aGlzLmRpcmVjdGlvbikscj12ci5kb3QodnIpLW4qbixpPXQucmFkaXVzKnQucmFkaXVzO2lmKHI+aSlyZXR1cm4gbnVsbDtjb25zdCBvPU1hdGguc3FydChpLXIpLGE9bi1vLHM9bitvO3JldHVybiBhPDAmJnM8MD9udWxsOmE8MD90aGlzLmF0KHMsZSk6dGhpcy5hdChhLGUpfWludGVyc2VjdHNTcGhlcmUodCl7cmV0dXJuIHRoaXMuZGlzdGFuY2VTcVRvUG9pbnQodC5jZW50ZXIpPD10LnJhZGl1cyp0LnJhZGl1c31kaXN0YW5jZVRvUGxhbmUodCl7Y29uc3QgZT10Lm5vcm1hbC5kb3QodGhpcy5kaXJlY3Rpb24pO2lmKDA9PT1lKXJldHVybiAwPT09dC5kaXN0YW5jZVRvUG9pbnQodGhpcy5vcmlnaW4pPzA6bnVsbDtjb25zdCBuPS0odGhpcy5vcmlnaW4uZG90KHQubm9ybWFsKSt0LmNvbnN0YW50KS9lO3JldHVybiBuPj0wP246bnVsbH1pbnRlcnNlY3RQbGFuZSh0LGUpe2NvbnN0IG49dGhpcy5kaXN0YW5jZVRvUGxhbmUodCk7cmV0dXJuIG51bGw9PT1uP251bGw6dGhpcy5hdChuLGUpfWludGVyc2VjdHNQbGFuZSh0KXtjb25zdCBlPXQuZGlzdGFuY2VUb1BvaW50KHRoaXMub3JpZ2luKTtpZigwPT09ZSlyZXR1cm4hMDtyZXR1cm4gdC5ub3JtYWwuZG90KHRoaXMuZGlyZWN0aW9uKSplPDB9aW50ZXJzZWN0Qm94KHQsZSl7bGV0IG4scixpLG8sYSxzO2NvbnN0IGM9MS90aGlzLmRpcmVjdGlvbi54LGw9MS90aGlzLmRpcmVjdGlvbi55LHU9MS90aGlzLmRpcmVjdGlvbi56LGg9dGhpcy5vcmlnaW47cmV0dXJuIGM+PTA/KG49KHQubWluLngtaC54KSpjLHI9KHQubWF4LngtaC54KSpjKToobj0odC5tYXgueC1oLngpKmMscj0odC5taW4ueC1oLngpKmMpLGw+PTA/KGk9KHQubWluLnktaC55KSpsLG89KHQubWF4LnktaC55KSpsKTooaT0odC5tYXgueS1oLnkpKmwsbz0odC5taW4ueS1oLnkpKmwpLG4+b3x8aT5yP251bGw6KChpPm58fG4hPW4pJiYobj1pKSwobzxyfHxyIT1yKSYmKHI9byksdT49MD8oYT0odC5taW4uei1oLnopKnUscz0odC5tYXguei1oLnopKnUpOihhPSh0Lm1heC56LWgueikqdSxzPSh0Lm1pbi56LWgueikqdSksbj5zfHxhPnI/bnVsbDooKGE+bnx8biE9bikmJihuPWEpLChzPHJ8fHIhPXIpJiYocj1zKSxyPDA/bnVsbDp0aGlzLmF0KG4+PTA/bjpyLGUpKSl9aW50ZXJzZWN0c0JveCh0KXtyZXR1cm4gbnVsbCE9PXRoaXMuaW50ZXJzZWN0Qm94KHQsdnIpfWludGVyc2VjdFRyaWFuZ2xlKHQsZSxuLHIsaSl7d3Iuc3ViVmVjdG9ycyhlLHQpLF9yLnN1YlZlY3RvcnMobix0KSxNci5jcm9zc1ZlY3RvcnMod3IsX3IpO2xldCBvLGE9dGhpcy5kaXJlY3Rpb24uZG90KE1yKTtpZihhPjApe2lmKHIpcmV0dXJuIG51bGw7bz0xfWVsc2V7aWYoIShhPDApKXJldHVybiBudWxsO289LTEsYT0tYX1ici5zdWJWZWN0b3JzKHRoaXMub3JpZ2luLHQpO2NvbnN0IHM9byp0aGlzLmRpcmVjdGlvbi5kb3QoX3IuY3Jvc3NWZWN0b3JzKGJyLF9yKSk7aWYoczwwKXJldHVybiBudWxsO2NvbnN0IGM9byp0aGlzLmRpcmVjdGlvbi5kb3Qod3IuY3Jvc3MoYnIpKTtpZihjPDApcmV0dXJuIG51bGw7aWYocytjPmEpcmV0dXJuIG51bGw7Y29uc3QgbD0tbypici5kb3QoTXIpO3JldHVybiBsPDA/bnVsbDp0aGlzLmF0KGwvYSxpKX1hcHBseU1hdHJpeDQodCl7cmV0dXJuIHRoaXMub3JpZ2luLmFwcGx5TWF0cml4NCh0KSx0aGlzLmRpcmVjdGlvbi50cmFuc2Zvcm1EaXJlY3Rpb24odCksdGhpc31lcXVhbHModCl7cmV0dXJuIHQub3JpZ2luLmVxdWFscyh0aGlzLm9yaWdpbikmJnQuZGlyZWN0aW9uLmVxdWFscyh0aGlzLmRpcmVjdGlvbil9fWNsYXNzIFRye2NvbnN0cnVjdG9yKCl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJpc01hdHJpeDRcIix7dmFsdWU6ITB9KSx0aGlzLmVsZW1lbnRzPVsxLDAsMCwwLDAsMSwwLDAsMCwwLDEsMCwwLDAsMCwxXSxhcmd1bWVudHMubGVuZ3RoPjAmJmNvbnNvbGUuZXJyb3IoXCJUSFJFRS5NYXRyaXg0OiB0aGUgY29uc3RydWN0b3Igbm8gbG9uZ2VyIHJlYWRzIGFyZ3VtZW50cy4gdXNlIC5zZXQoKSBpbnN0ZWFkLlwiKX1zZXQodCxlLG4scixpLG8sYSxzLGMsbCx1LGgsZCxwLGYsbSl7Y29uc3QgZz10aGlzLmVsZW1lbnRzO3JldHVybiBnWzBdPXQsZ1s0XT1lLGdbOF09bixnWzEyXT1yLGdbMV09aSxnWzVdPW8sZ1s5XT1hLGdbMTNdPXMsZ1syXT1jLGdbNl09bCxnWzEwXT11LGdbMTRdPWgsZ1szXT1kLGdbN109cCxnWzExXT1mLGdbMTVdPW0sdGhpc31pZGVudGl0eSgpe3JldHVybiB0aGlzLnNldCgxLDAsMCwwLDAsMSwwLDAsMCwwLDEsMCwwLDAsMCwxKSx0aGlzfWNsb25lKCl7cmV0dXJuKG5ldyBUcikuZnJvbUFycmF5KHRoaXMuZWxlbWVudHMpfWNvcHkodCl7Y29uc3QgZT10aGlzLmVsZW1lbnRzLG49dC5lbGVtZW50cztyZXR1cm4gZVswXT1uWzBdLGVbMV09blsxXSxlWzJdPW5bMl0sZVszXT1uWzNdLGVbNF09bls0XSxlWzVdPW5bNV0sZVs2XT1uWzZdLGVbN109bls3XSxlWzhdPW5bOF0sZVs5XT1uWzldLGVbMTBdPW5bMTBdLGVbMTFdPW5bMTFdLGVbMTJdPW5bMTJdLGVbMTNdPW5bMTNdLGVbMTRdPW5bMTRdLGVbMTVdPW5bMTVdLHRoaXN9Y29weVBvc2l0aW9uKHQpe2NvbnN0IGU9dGhpcy5lbGVtZW50cyxuPXQuZWxlbWVudHM7cmV0dXJuIGVbMTJdPW5bMTJdLGVbMTNdPW5bMTNdLGVbMTRdPW5bMTRdLHRoaXN9ZXh0cmFjdEJhc2lzKHQsZSxuKXtyZXR1cm4gdC5zZXRGcm9tTWF0cml4Q29sdW1uKHRoaXMsMCksZS5zZXRGcm9tTWF0cml4Q29sdW1uKHRoaXMsMSksbi5zZXRGcm9tTWF0cml4Q29sdW1uKHRoaXMsMiksdGhpc31tYWtlQmFzaXModCxlLG4pe3JldHVybiB0aGlzLnNldCh0LngsZS54LG4ueCwwLHQueSxlLnksbi55LDAsdC56LGUueixuLnosMCwwLDAsMCwxKSx0aGlzfWV4dHJhY3RSb3RhdGlvbih0KXtjb25zdCBlPXRoaXMuZWxlbWVudHMsbj10LmVsZW1lbnRzLHI9MS9Fci5zZXRGcm9tTWF0cml4Q29sdW1uKHQsMCkubGVuZ3RoKCksaT0xL0VyLnNldEZyb21NYXRyaXhDb2x1bW4odCwxKS5sZW5ndGgoKSxvPTEvRXIuc2V0RnJvbU1hdHJpeENvbHVtbih0LDIpLmxlbmd0aCgpO3JldHVybiBlWzBdPW5bMF0qcixlWzFdPW5bMV0qcixlWzJdPW5bMl0qcixlWzNdPTAsZVs0XT1uWzRdKmksZVs1XT1uWzVdKmksZVs2XT1uWzZdKmksZVs3XT0wLGVbOF09bls4XSpvLGVbOV09bls5XSpvLGVbMTBdPW5bMTBdKm8sZVsxMV09MCxlWzEyXT0wLGVbMTNdPTAsZVsxNF09MCxlWzE1XT0xLHRoaXN9bWFrZVJvdGF0aW9uRnJvbUV1bGVyKHQpe3QmJnQuaXNFdWxlcnx8Y29uc29sZS5lcnJvcihcIlRIUkVFLk1hdHJpeDQ6IC5tYWtlUm90YXRpb25Gcm9tRXVsZXIoKSBub3cgZXhwZWN0cyBhIEV1bGVyIHJvdGF0aW9uIHJhdGhlciB0aGFuIGEgVmVjdG9yMyBhbmQgb3JkZXIuXCIpO2NvbnN0IGU9dGhpcy5lbGVtZW50cyxuPXQueCxyPXQueSxpPXQueixvPU1hdGguY29zKG4pLGE9TWF0aC5zaW4obikscz1NYXRoLmNvcyhyKSxjPU1hdGguc2luKHIpLGw9TWF0aC5jb3MoaSksdT1NYXRoLnNpbihpKTtpZihcIlhZWlwiPT09dC5vcmRlcil7Y29uc3QgdD1vKmwsbj1vKnUscj1hKmwsaT1hKnU7ZVswXT1zKmwsZVs0XT0tcyp1LGVbOF09YyxlWzFdPW4rcipjLGVbNV09dC1pKmMsZVs5XT0tYSpzLGVbMl09aS10KmMsZVs2XT1yK24qYyxlWzEwXT1vKnN9ZWxzZSBpZihcIllYWlwiPT09dC5vcmRlcil7Y29uc3QgdD1zKmwsbj1zKnUscj1jKmwsaT1jKnU7ZVswXT10K2kqYSxlWzRdPXIqYS1uLGVbOF09bypjLGVbMV09byp1LGVbNV09bypsLGVbOV09LWEsZVsyXT1uKmEtcixlWzZdPWkrdCphLGVbMTBdPW8qc31lbHNlIGlmKFwiWlhZXCI9PT10Lm9yZGVyKXtjb25zdCB0PXMqbCxuPXMqdSxyPWMqbCxpPWMqdTtlWzBdPXQtaSphLGVbNF09LW8qdSxlWzhdPXIrbiphLGVbMV09bityKmEsZVs1XT1vKmwsZVs5XT1pLXQqYSxlWzJdPS1vKmMsZVs2XT1hLGVbMTBdPW8qc31lbHNlIGlmKFwiWllYXCI9PT10Lm9yZGVyKXtjb25zdCB0PW8qbCxuPW8qdSxyPWEqbCxpPWEqdTtlWzBdPXMqbCxlWzRdPXIqYy1uLGVbOF09dCpjK2ksZVsxXT1zKnUsZVs1XT1pKmMrdCxlWzldPW4qYy1yLGVbMl09LWMsZVs2XT1hKnMsZVsxMF09bypzfWVsc2UgaWYoXCJZWlhcIj09PXQub3JkZXIpe2NvbnN0IHQ9bypzLG49bypjLHI9YSpzLGk9YSpjO2VbMF09cypsLGVbNF09aS10KnUsZVs4XT1yKnUrbixlWzFdPXUsZVs1XT1vKmwsZVs5XT0tYSpsLGVbMl09LWMqbCxlWzZdPW4qdStyLGVbMTBdPXQtaSp1fWVsc2UgaWYoXCJYWllcIj09PXQub3JkZXIpe2NvbnN0IHQ9bypzLG49bypjLHI9YSpzLGk9YSpjO2VbMF09cypsLGVbNF09LXUsZVs4XT1jKmwsZVsxXT10KnUraSxlWzVdPW8qbCxlWzldPW4qdS1yLGVbMl09cip1LW4sZVs2XT1hKmwsZVsxMF09aSp1K3R9cmV0dXJuIGVbM109MCxlWzddPTAsZVsxMV09MCxlWzEyXT0wLGVbMTNdPTAsZVsxNF09MCxlWzE1XT0xLHRoaXN9bWFrZVJvdGF0aW9uRnJvbVF1YXRlcm5pb24odCl7cmV0dXJuIHRoaXMuY29tcG9zZShMcix0LFJyKX1sb29rQXQodCxlLG4pe2NvbnN0IHI9dGhpcy5lbGVtZW50cztyZXR1cm4gSXIuc3ViVmVjdG9ycyh0LGUpLDA9PT1Jci5sZW5ndGhTcSgpJiYoSXIuej0xKSxJci5ub3JtYWxpemUoKSxQci5jcm9zc1ZlY3RvcnMobixJciksMD09PVByLmxlbmd0aFNxKCkmJigxPT09TWF0aC5hYnMobi56KT9Jci54Kz0xZS00OklyLnorPTFlLTQsSXIubm9ybWFsaXplKCksUHIuY3Jvc3NWZWN0b3JzKG4sSXIpKSxQci5ub3JtYWxpemUoKSxDci5jcm9zc1ZlY3RvcnMoSXIsUHIpLHJbMF09UHIueCxyWzRdPUNyLngscls4XT1Jci54LHJbMV09UHIueSxyWzVdPUNyLnkscls5XT1Jci55LHJbMl09UHIueixyWzZdPUNyLnosclsxMF09SXIueix0aGlzfW11bHRpcGx5KHQsZSl7cmV0dXJuIHZvaWQgMCE9PWU/KGNvbnNvbGUud2FybihcIlRIUkVFLk1hdHJpeDQ6IC5tdWx0aXBseSgpIG5vdyBvbmx5IGFjY2VwdHMgb25lIGFyZ3VtZW50LiBVc2UgLm11bHRpcGx5TWF0cmljZXMoIGEsIGIgKSBpbnN0ZWFkLlwiKSx0aGlzLm11bHRpcGx5TWF0cmljZXModCxlKSk6dGhpcy5tdWx0aXBseU1hdHJpY2VzKHRoaXMsdCl9cHJlbXVsdGlwbHkodCl7cmV0dXJuIHRoaXMubXVsdGlwbHlNYXRyaWNlcyh0LHRoaXMpfW11bHRpcGx5TWF0cmljZXModCxlKXtjb25zdCBuPXQuZWxlbWVudHMscj1lLmVsZW1lbnRzLGk9dGhpcy5lbGVtZW50cyxvPW5bMF0sYT1uWzRdLHM9bls4XSxjPW5bMTJdLGw9blsxXSx1PW5bNV0saD1uWzldLGQ9blsxM10scD1uWzJdLGY9bls2XSxtPW5bMTBdLGc9blsxNF0sdj1uWzNdLHk9bls3XSx4PW5bMTFdLGI9blsxNV0sdz1yWzBdLF89cls0XSxNPXJbOF0sUz1yWzEyXSxUPXJbMV0sRT1yWzVdLEE9cls5XSxMPXJbMTNdLFI9clsyXSxQPXJbNl0sQz1yWzEwXSxJPXJbMTRdLE89clszXSxOPXJbN10sRD1yWzExXSxCPXJbMTVdO3JldHVybiBpWzBdPW8qdythKlQrcypSK2MqTyxpWzRdPW8qXythKkUrcypQK2MqTixpWzhdPW8qTSthKkErcypDK2MqRCxpWzEyXT1vKlMrYSpMK3MqSStjKkIsaVsxXT1sKncrdSpUK2gqUitkKk8saVs1XT1sKl8rdSpFK2gqUCtkKk4saVs5XT1sKk0rdSpBK2gqQytkKkQsaVsxM109bCpTK3UqTCtoKkkrZCpCLGlbMl09cCp3K2YqVCttKlIrZypPLGlbNl09cCpfK2YqRSttKlArZypOLGlbMTBdPXAqTStmKkErbSpDK2cqRCxpWzE0XT1wKlMrZipMK20qSStnKkIsaVszXT12KncreSpUK3gqUitiKk8saVs3XT12Kl8reSpFK3gqUCtiKk4saVsxMV09dipNK3kqQSt4KkMrYipELGlbMTVdPXYqUyt5KkwreCpJK2IqQix0aGlzfW11bHRpcGx5U2NhbGFyKHQpe2NvbnN0IGU9dGhpcy5lbGVtZW50cztyZXR1cm4gZVswXSo9dCxlWzRdKj10LGVbOF0qPXQsZVsxMl0qPXQsZVsxXSo9dCxlWzVdKj10LGVbOV0qPXQsZVsxM10qPXQsZVsyXSo9dCxlWzZdKj10LGVbMTBdKj10LGVbMTRdKj10LGVbM10qPXQsZVs3XSo9dCxlWzExXSo9dCxlWzE1XSo9dCx0aGlzfWRldGVybWluYW50KCl7Y29uc3QgdD10aGlzLmVsZW1lbnRzLGU9dFswXSxuPXRbNF0scj10WzhdLGk9dFsxMl0sbz10WzFdLGE9dFs1XSxzPXRbOV0sYz10WzEzXSxsPXRbMl0sdT10WzZdLGg9dFsxMF0sZD10WzE0XTtyZXR1cm4gdFszXSooK2kqcyp1LXIqYyp1LWkqYSpoK24qYypoK3IqYSpkLW4qcypkKSt0WzddKigrZSpzKmQtZSpjKmgraSpvKmgtcipvKmQrcipjKmwtaSpzKmwpK3RbMTFdKigrZSpjKnUtZSphKmQtaSpvKnUrbipvKmQraSphKmwtbipjKmwpK3RbMTVdKigtciphKmwtZSpzKnUrZSphKmgrcipvKnUtbipvKmgrbipzKmwpfXRyYW5zcG9zZSgpe2NvbnN0IHQ9dGhpcy5lbGVtZW50cztsZXQgZTtyZXR1cm4gZT10WzFdLHRbMV09dFs0XSx0WzRdPWUsZT10WzJdLHRbMl09dFs4XSx0WzhdPWUsZT10WzZdLHRbNl09dFs5XSx0WzldPWUsZT10WzNdLHRbM109dFsxMl0sdFsxMl09ZSxlPXRbN10sdFs3XT10WzEzXSx0WzEzXT1lLGU9dFsxMV0sdFsxMV09dFsxNF0sdFsxNF09ZSx0aGlzfXNldFBvc2l0aW9uKHQsZSxuKXtjb25zdCByPXRoaXMuZWxlbWVudHM7cmV0dXJuIHQuaXNWZWN0b3IzPyhyWzEyXT10LngsclsxM109dC55LHJbMTRdPXQueik6KHJbMTJdPXQsclsxM109ZSxyWzE0XT1uKSx0aGlzfWludmVydCgpe2NvbnN0IHQ9dGhpcy5lbGVtZW50cyxlPXRbMF0sbj10WzFdLHI9dFsyXSxpPXRbM10sbz10WzRdLGE9dFs1XSxzPXRbNl0sYz10WzddLGw9dFs4XSx1PXRbOV0saD10WzEwXSxkPXRbMTFdLHA9dFsxMl0sZj10WzEzXSxtPXRbMTRdLGc9dFsxNV0sdj11Km0qYy1mKmgqYytmKnMqZC1hKm0qZC11KnMqZythKmgqZyx5PXAqaCpjLWwqbSpjLXAqcypkK28qbSpkK2wqcypnLW8qaCpnLHg9bCpmKmMtcCp1KmMrcCphKmQtbypmKmQtbCphKmcrbyp1KmcsYj1wKnUqcy1sKmYqcy1wKmEqaCtvKmYqaCtsKmEqbS1vKnUqbSx3PWUqdituKnkrcip4K2kqYjtpZigwPT09dylyZXR1cm4gdGhpcy5zZXQoMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCk7Y29uc3QgXz0xL3c7cmV0dXJuIHRbMF09dipfLHRbMV09KGYqaCppLXUqbSppLWYqcipkK24qbSpkK3UqcipnLW4qaCpnKSpfLHRbMl09KGEqbSppLWYqcyppK2YqcipjLW4qbSpjLWEqcipnK24qcypnKSpfLHRbM109KHUqcyppLWEqaCppLXUqcipjK24qaCpjK2EqcipkLW4qcypkKSpfLHRbNF09eSpfLHRbNV09KGwqbSppLXAqaCppK3AqcipkLWUqbSpkLWwqcipnK2UqaCpnKSpfLHRbNl09KHAqcyppLW8qbSppLXAqcipjK2UqbSpjK28qcipnLWUqcypnKSpfLHRbN109KG8qaCppLWwqcyppK2wqcipjLWUqaCpjLW8qcipkK2UqcypkKSpfLHRbOF09eCpfLHRbOV09KHAqdSppLWwqZippLXAqbipkK2UqZipkK2wqbipnLWUqdSpnKSpfLHRbMTBdPShvKmYqaS1wKmEqaStwKm4qYy1lKmYqYy1vKm4qZytlKmEqZykqXyx0WzExXT0obCphKmktbyp1KmktbCpuKmMrZSp1KmMrbypuKmQtZSphKmQpKl8sdFsxMl09YipfLHRbMTNdPShsKmYqci1wKnUqcitwKm4qaC1lKmYqaC1sKm4qbStlKnUqbSkqXyx0WzE0XT0ocCphKnItbypmKnItcCpuKnMrZSpmKnMrbypuKm0tZSphKm0pKl8sdFsxNV09KG8qdSpyLWwqYSpyK2wqbipzLWUqdSpzLW8qbipoK2UqYSpoKSpfLHRoaXN9c2NhbGUodCl7Y29uc3QgZT10aGlzLmVsZW1lbnRzLG49dC54LHI9dC55LGk9dC56O3JldHVybiBlWzBdKj1uLGVbNF0qPXIsZVs4XSo9aSxlWzFdKj1uLGVbNV0qPXIsZVs5XSo9aSxlWzJdKj1uLGVbNl0qPXIsZVsxMF0qPWksZVszXSo9bixlWzddKj1yLGVbMTFdKj1pLHRoaXN9Z2V0TWF4U2NhbGVPbkF4aXMoKXtjb25zdCB0PXRoaXMuZWxlbWVudHMsZT10WzBdKnRbMF0rdFsxXSp0WzFdK3RbMl0qdFsyXSxuPXRbNF0qdFs0XSt0WzVdKnRbNV0rdFs2XSp0WzZdLHI9dFs4XSp0WzhdK3RbOV0qdFs5XSt0WzEwXSp0WzEwXTtyZXR1cm4gTWF0aC5zcXJ0KE1hdGgubWF4KGUsbixyKSl9bWFrZVRyYW5zbGF0aW9uKHQsZSxuKXtyZXR1cm4gdGhpcy5zZXQoMSwwLDAsdCwwLDEsMCxlLDAsMCwxLG4sMCwwLDAsMSksdGhpc31tYWtlUm90YXRpb25YKHQpe2NvbnN0IGU9TWF0aC5jb3ModCksbj1NYXRoLnNpbih0KTtyZXR1cm4gdGhpcy5zZXQoMSwwLDAsMCwwLGUsLW4sMCwwLG4sZSwwLDAsMCwwLDEpLHRoaXN9bWFrZVJvdGF0aW9uWSh0KXtjb25zdCBlPU1hdGguY29zKHQpLG49TWF0aC5zaW4odCk7cmV0dXJuIHRoaXMuc2V0KGUsMCxuLDAsMCwxLDAsMCwtbiwwLGUsMCwwLDAsMCwxKSx0aGlzfW1ha2VSb3RhdGlvbloodCl7Y29uc3QgZT1NYXRoLmNvcyh0KSxuPU1hdGguc2luKHQpO3JldHVybiB0aGlzLnNldChlLC1uLDAsMCxuLGUsMCwwLDAsMCwxLDAsMCwwLDAsMSksdGhpc31tYWtlUm90YXRpb25BeGlzKHQsZSl7Y29uc3Qgbj1NYXRoLmNvcyhlKSxyPU1hdGguc2luKGUpLGk9MS1uLG89dC54LGE9dC55LHM9dC56LGM9aSpvLGw9aSphO3JldHVybiB0aGlzLnNldChjKm8rbixjKmEtcipzLGMqcytyKmEsMCxjKmErcipzLGwqYStuLGwqcy1yKm8sMCxjKnMtciphLGwqcytyKm8saSpzKnMrbiwwLDAsMCwwLDEpLHRoaXN9bWFrZVNjYWxlKHQsZSxuKXtyZXR1cm4gdGhpcy5zZXQodCwwLDAsMCwwLGUsMCwwLDAsMCxuLDAsMCwwLDAsMSksdGhpc31tYWtlU2hlYXIodCxlLG4pe3JldHVybiB0aGlzLnNldCgxLGUsbiwwLHQsMSxuLDAsdCxlLDEsMCwwLDAsMCwxKSx0aGlzfWNvbXBvc2UodCxlLG4pe2NvbnN0IHI9dGhpcy5lbGVtZW50cyxpPWUuX3gsbz1lLl95LGE9ZS5feixzPWUuX3csYz1pK2ksbD1vK28sdT1hK2EsaD1pKmMsZD1pKmwscD1pKnUsZj1vKmwsbT1vKnUsZz1hKnUsdj1zKmMseT1zKmwseD1zKnUsYj1uLngsdz1uLnksXz1uLno7cmV0dXJuIHJbMF09KDEtKGYrZykpKmIsclsxXT0oZCt4KSpiLHJbMl09KHAteSkqYixyWzNdPTAscls0XT0oZC14KSp3LHJbNV09KDEtKGgrZykpKncscls2XT0obSt2KSp3LHJbN109MCxyWzhdPShwK3kpKl8scls5XT0obS12KSpfLHJbMTBdPSgxLShoK2YpKSpfLHJbMTFdPTAsclsxMl09dC54LHJbMTNdPXQueSxyWzE0XT10LnosclsxNV09MSx0aGlzfWRlY29tcG9zZSh0LGUsbil7Y29uc3Qgcj10aGlzLmVsZW1lbnRzO2xldCBpPUVyLnNldChyWzBdLHJbMV0sclsyXSkubGVuZ3RoKCk7Y29uc3Qgbz1Fci5zZXQocls0XSxyWzVdLHJbNl0pLmxlbmd0aCgpLGE9RXIuc2V0KHJbOF0scls5XSxyWzEwXSkubGVuZ3RoKCk7dGhpcy5kZXRlcm1pbmFudCgpPDAmJihpPS1pKSx0Lng9clsxMl0sdC55PXJbMTNdLHQuej1yWzE0XSxBci5jb3B5KHRoaXMpO2NvbnN0IHM9MS9pLGM9MS9vLGw9MS9hO3JldHVybiBBci5lbGVtZW50c1swXSo9cyxBci5lbGVtZW50c1sxXSo9cyxBci5lbGVtZW50c1syXSo9cyxBci5lbGVtZW50c1s0XSo9YyxBci5lbGVtZW50c1s1XSo9YyxBci5lbGVtZW50c1s2XSo9YyxBci5lbGVtZW50c1s4XSo9bCxBci5lbGVtZW50c1s5XSo9bCxBci5lbGVtZW50c1sxMF0qPWwsZS5zZXRGcm9tUm90YXRpb25NYXRyaXgoQXIpLG4ueD1pLG4ueT1vLG4uej1hLHRoaXN9bWFrZVBlcnNwZWN0aXZlKHQsZSxuLHIsaSxvKXt2b2lkIDA9PT1vJiZjb25zb2xlLndhcm4oXCJUSFJFRS5NYXRyaXg0OiAubWFrZVBlcnNwZWN0aXZlKCkgaGFzIGJlZW4gcmVkZWZpbmVkIGFuZCBoYXMgYSBuZXcgc2lnbmF0dXJlLiBQbGVhc2UgY2hlY2sgdGhlIGRvY3MuXCIpO2NvbnN0IGE9dGhpcy5lbGVtZW50cyxzPTIqaS8oZS10KSxjPTIqaS8obi1yKSxsPShlK3QpLyhlLXQpLHU9KG4rcikvKG4tciksaD0tKG8raSkvKG8taSksZD0tMipvKmkvKG8taSk7cmV0dXJuIGFbMF09cyxhWzRdPTAsYVs4XT1sLGFbMTJdPTAsYVsxXT0wLGFbNV09YyxhWzldPXUsYVsxM109MCxhWzJdPTAsYVs2XT0wLGFbMTBdPWgsYVsxNF09ZCxhWzNdPTAsYVs3XT0wLGFbMTFdPS0xLGFbMTVdPTAsdGhpc31tYWtlT3J0aG9ncmFwaGljKHQsZSxuLHIsaSxvKXtjb25zdCBhPXRoaXMuZWxlbWVudHMscz0xLyhlLXQpLGM9MS8obi1yKSxsPTEvKG8taSksdT0oZSt0KSpzLGg9KG4rcikqYyxkPShvK2kpKmw7cmV0dXJuIGFbMF09MipzLGFbNF09MCxhWzhdPTAsYVsxMl09LXUsYVsxXT0wLGFbNV09MipjLGFbOV09MCxhWzEzXT0taCxhWzJdPTAsYVs2XT0wLGFbMTBdPS0yKmwsYVsxNF09LWQsYVszXT0wLGFbN109MCxhWzExXT0wLGFbMTVdPTEsdGhpc31lcXVhbHModCl7Y29uc3QgZT10aGlzLmVsZW1lbnRzLG49dC5lbGVtZW50cztmb3IobGV0IHQ9MDt0PDE2O3QrKylpZihlW3RdIT09blt0XSlyZXR1cm4hMTtyZXR1cm4hMH1mcm9tQXJyYXkodCxlPTApe2ZvcihsZXQgbj0wO248MTY7bisrKXRoaXMuZWxlbWVudHNbbl09dFtuK2VdO3JldHVybiB0aGlzfXRvQXJyYXkodD1bXSxlPTApe2NvbnN0IG49dGhpcy5lbGVtZW50cztyZXR1cm4gdFtlXT1uWzBdLHRbZSsxXT1uWzFdLHRbZSsyXT1uWzJdLHRbZSszXT1uWzNdLHRbZSs0XT1uWzRdLHRbZSs1XT1uWzVdLHRbZSs2XT1uWzZdLHRbZSs3XT1uWzddLHRbZSs4XT1uWzhdLHRbZSs5XT1uWzldLHRbZSsxMF09blsxMF0sdFtlKzExXT1uWzExXSx0W2UrMTJdPW5bMTJdLHRbZSsxM109blsxM10sdFtlKzE0XT1uWzE0XSx0W2UrMTVdPW5bMTVdLHR9fWNvbnN0IEVyPW5ldyBLbixBcj1uZXcgVHIsTHI9bmV3IEtuKDAsMCwwKSxScj1uZXcgS24oMSwxLDEpLFByPW5ldyBLbixDcj1uZXcgS24sSXI9bmV3IEtuO2NsYXNzIE9ye2NvbnN0cnVjdG9yKHQ9MCxlPTAsbj0wLHI9T3IuRGVmYXVsdE9yZGVyKXtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImlzRXVsZXJcIix7dmFsdWU6ITB9KSx0aGlzLl94PXQsdGhpcy5feT1lLHRoaXMuX3o9bix0aGlzLl9vcmRlcj1yfWdldCB4KCl7cmV0dXJuIHRoaXMuX3h9c2V0IHgodCl7dGhpcy5feD10LHRoaXMuX29uQ2hhbmdlQ2FsbGJhY2soKX1nZXQgeSgpe3JldHVybiB0aGlzLl95fXNldCB5KHQpe3RoaXMuX3k9dCx0aGlzLl9vbkNoYW5nZUNhbGxiYWNrKCl9Z2V0IHooKXtyZXR1cm4gdGhpcy5fen1zZXQgeih0KXt0aGlzLl96PXQsdGhpcy5fb25DaGFuZ2VDYWxsYmFjaygpfWdldCBvcmRlcigpe3JldHVybiB0aGlzLl9vcmRlcn1zZXQgb3JkZXIodCl7dGhpcy5fb3JkZXI9dCx0aGlzLl9vbkNoYW5nZUNhbGxiYWNrKCl9c2V0KHQsZSxuLHIpe3JldHVybiB0aGlzLl94PXQsdGhpcy5feT1lLHRoaXMuX3o9bix0aGlzLl9vcmRlcj1yfHx0aGlzLl9vcmRlcix0aGlzLl9vbkNoYW5nZUNhbGxiYWNrKCksdGhpc31jbG9uZSgpe3JldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLl94LHRoaXMuX3ksdGhpcy5feix0aGlzLl9vcmRlcil9Y29weSh0KXtyZXR1cm4gdGhpcy5feD10Ll94LHRoaXMuX3k9dC5feSx0aGlzLl96PXQuX3osdGhpcy5fb3JkZXI9dC5fb3JkZXIsdGhpcy5fb25DaGFuZ2VDYWxsYmFjaygpLHRoaXN9c2V0RnJvbVJvdGF0aW9uTWF0cml4KHQsZSxuKXtjb25zdCByPXpuLmNsYW1wLGk9dC5lbGVtZW50cyxvPWlbMF0sYT1pWzRdLHM9aVs4XSxjPWlbMV0sbD1pWzVdLHU9aVs5XSxoPWlbMl0sZD1pWzZdLHA9aVsxMF07c3dpdGNoKGU9ZXx8dGhpcy5fb3JkZXIpe2Nhc2VcIlhZWlwiOnRoaXMuX3k9TWF0aC5hc2luKHIocywtMSwxKSksTWF0aC5hYnMocyk8Ljk5OTk5OTk/KHRoaXMuX3g9TWF0aC5hdGFuMigtdSxwKSx0aGlzLl96PU1hdGguYXRhbjIoLWEsbykpOih0aGlzLl94PU1hdGguYXRhbjIoZCxsKSx0aGlzLl96PTApO2JyZWFrO2Nhc2VcIllYWlwiOnRoaXMuX3g9TWF0aC5hc2luKC1yKHUsLTEsMSkpLE1hdGguYWJzKHUpPC45OTk5OTk5Pyh0aGlzLl95PU1hdGguYXRhbjIocyxwKSx0aGlzLl96PU1hdGguYXRhbjIoYyxsKSk6KHRoaXMuX3k9TWF0aC5hdGFuMigtaCxvKSx0aGlzLl96PTApO2JyZWFrO2Nhc2VcIlpYWVwiOnRoaXMuX3g9TWF0aC5hc2luKHIoZCwtMSwxKSksTWF0aC5hYnMoZCk8Ljk5OTk5OTk/KHRoaXMuX3k9TWF0aC5hdGFuMigtaCxwKSx0aGlzLl96PU1hdGguYXRhbjIoLWEsbCkpOih0aGlzLl95PTAsdGhpcy5fej1NYXRoLmF0YW4yKGMsbykpO2JyZWFrO2Nhc2VcIlpZWFwiOnRoaXMuX3k9TWF0aC5hc2luKC1yKGgsLTEsMSkpLE1hdGguYWJzKGgpPC45OTk5OTk5Pyh0aGlzLl94PU1hdGguYXRhbjIoZCxwKSx0aGlzLl96PU1hdGguYXRhbjIoYyxvKSk6KHRoaXMuX3g9MCx0aGlzLl96PU1hdGguYXRhbjIoLWEsbCkpO2JyZWFrO2Nhc2VcIllaWFwiOnRoaXMuX3o9TWF0aC5hc2luKHIoYywtMSwxKSksTWF0aC5hYnMoYyk8Ljk5OTk5OTk/KHRoaXMuX3g9TWF0aC5hdGFuMigtdSxsKSx0aGlzLl95PU1hdGguYXRhbjIoLWgsbykpOih0aGlzLl94PTAsdGhpcy5feT1NYXRoLmF0YW4yKHMscCkpO2JyZWFrO2Nhc2VcIlhaWVwiOnRoaXMuX3o9TWF0aC5hc2luKC1yKGEsLTEsMSkpLE1hdGguYWJzKGEpPC45OTk5OTk5Pyh0aGlzLl94PU1hdGguYXRhbjIoZCxsKSx0aGlzLl95PU1hdGguYXRhbjIocyxvKSk6KHRoaXMuX3g9TWF0aC5hdGFuMigtdSxwKSx0aGlzLl95PTApO2JyZWFrO2RlZmF1bHQ6Y29uc29sZS53YXJuKFwiVEhSRUUuRXVsZXI6IC5zZXRGcm9tUm90YXRpb25NYXRyaXgoKSBlbmNvdW50ZXJlZCBhbiB1bmtub3duIG9yZGVyOiBcIitlKX1yZXR1cm4gdGhpcy5fb3JkZXI9ZSwhMSE9PW4mJnRoaXMuX29uQ2hhbmdlQ2FsbGJhY2soKSx0aGlzfXNldEZyb21RdWF0ZXJuaW9uKHQsZSxuKXtyZXR1cm4gTnIubWFrZVJvdGF0aW9uRnJvbVF1YXRlcm5pb24odCksdGhpcy5zZXRGcm9tUm90YXRpb25NYXRyaXgoTnIsZSxuKX1zZXRGcm9tVmVjdG9yMyh0LGUpe3JldHVybiB0aGlzLnNldCh0LngsdC55LHQueixlfHx0aGlzLl9vcmRlcil9cmVvcmRlcih0KXtyZXR1cm4gRHIuc2V0RnJvbUV1bGVyKHRoaXMpLHRoaXMuc2V0RnJvbVF1YXRlcm5pb24oRHIsdCl9ZXF1YWxzKHQpe3JldHVybiB0Ll94PT09dGhpcy5feCYmdC5feT09PXRoaXMuX3kmJnQuX3o9PT10aGlzLl96JiZ0Ll9vcmRlcj09PXRoaXMuX29yZGVyfWZyb21BcnJheSh0KXtyZXR1cm4gdGhpcy5feD10WzBdLHRoaXMuX3k9dFsxXSx0aGlzLl96PXRbMl0sdm9pZCAwIT09dFszXSYmKHRoaXMuX29yZGVyPXRbM10pLHRoaXMuX29uQ2hhbmdlQ2FsbGJhY2soKSx0aGlzfXRvQXJyYXkodD1bXSxlPTApe3JldHVybiB0W2VdPXRoaXMuX3gsdFtlKzFdPXRoaXMuX3ksdFtlKzJdPXRoaXMuX3osdFtlKzNdPXRoaXMuX29yZGVyLHR9dG9WZWN0b3IzKHQpe3JldHVybiB0P3Quc2V0KHRoaXMuX3gsdGhpcy5feSx0aGlzLl96KTpuZXcgS24odGhpcy5feCx0aGlzLl95LHRoaXMuX3opfV9vbkNoYW5nZSh0KXtyZXR1cm4gdGhpcy5fb25DaGFuZ2VDYWxsYmFjaz10LHRoaXN9X29uQ2hhbmdlQ2FsbGJhY2soKXt9fU9yLkRlZmF1bHRPcmRlcj1cIlhZWlwiLE9yLlJvdGF0aW9uT3JkZXJzPVtcIlhZWlwiLFwiWVpYXCIsXCJaWFlcIixcIlhaWVwiLFwiWVhaXCIsXCJaWVhcIl07Y29uc3QgTnI9bmV3IFRyLERyPW5ldyBKbjtjbGFzcyBCcntjb25zdHJ1Y3Rvcigpe3RoaXMubWFzaz0xfXNldCh0KXt0aGlzLm1hc2s9MTw8dHwwfWVuYWJsZSh0KXt0aGlzLm1hc2t8PTE8PHR8MH1lbmFibGVBbGwoKXt0aGlzLm1hc2s9LTF9dG9nZ2xlKHQpe3RoaXMubWFza149MTw8dHwwfWRpc2FibGUodCl7dGhpcy5tYXNrJj1+KDE8PHR8MCl9ZGlzYWJsZUFsbCgpe3RoaXMubWFzaz0wfXRlc3QodCl7cmV0dXJuIDAhPSh0aGlzLm1hc2smdC5tYXNrKX19bGV0IEZyPTA7Y29uc3QgVXI9bmV3IEtuLHpyPW5ldyBKbixHcj1uZXcgVHIsSHI9bmV3IEtuLGtyPW5ldyBLbixWcj1uZXcgS24sanI9bmV3IEpuLFdyPW5ldyBLbigxLDAsMCksWHI9bmV3IEtuKDAsMSwwKSxxcj1uZXcgS24oMCwwLDEpLFlyPXt0eXBlOlwiYWRkZWRcIn0sWnI9e3R5cGU6XCJyZW1vdmVkXCJ9O2Z1bmN0aW9uIEpyKCl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJpZFwiLHt2YWx1ZTpGcisrfSksdGhpcy51dWlkPXpuLmdlbmVyYXRlVVVJRCgpLHRoaXMubmFtZT1cIlwiLHRoaXMudHlwZT1cIk9iamVjdDNEXCIsdGhpcy5wYXJlbnQ9bnVsbCx0aGlzLmNoaWxkcmVuPVtdLHRoaXMudXA9SnIuRGVmYXVsdFVwLmNsb25lKCk7Y29uc3QgdD1uZXcgS24sZT1uZXcgT3Isbj1uZXcgSm4scj1uZXcgS24oMSwxLDEpO2UuX29uQ2hhbmdlKChmdW5jdGlvbigpe24uc2V0RnJvbUV1bGVyKGUsITEpfSkpLG4uX29uQ2hhbmdlKChmdW5jdGlvbigpe2Uuc2V0RnJvbVF1YXRlcm5pb24obix2b2lkIDAsITEpfSkpLE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMse3Bvc2l0aW9uOntjb25maWd1cmFibGU6ITAsZW51bWVyYWJsZTohMCx2YWx1ZTp0fSxyb3RhdGlvbjp7Y29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITAsdmFsdWU6ZX0scXVhdGVybmlvbjp7Y29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITAsdmFsdWU6bn0sc2NhbGU6e2NvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwLHZhbHVlOnJ9LG1vZGVsVmlld01hdHJpeDp7dmFsdWU6bmV3IFRyfSxub3JtYWxNYXRyaXg6e3ZhbHVlOm5ldyBIbn19KSx0aGlzLm1hdHJpeD1uZXcgVHIsdGhpcy5tYXRyaXhXb3JsZD1uZXcgVHIsdGhpcy5tYXRyaXhBdXRvVXBkYXRlPUpyLkRlZmF1bHRNYXRyaXhBdXRvVXBkYXRlLHRoaXMubWF0cml4V29ybGROZWVkc1VwZGF0ZT0hMSx0aGlzLmxheWVycz1uZXcgQnIsdGhpcy52aXNpYmxlPSEwLHRoaXMuY2FzdFNoYWRvdz0hMSx0aGlzLnJlY2VpdmVTaGFkb3c9ITEsdGhpcy5mcnVzdHVtQ3VsbGVkPSEwLHRoaXMucmVuZGVyT3JkZXI9MCx0aGlzLmFuaW1hdGlvbnM9W10sdGhpcy51c2VyRGF0YT17fX1Kci5EZWZhdWx0VXA9bmV3IEtuKDAsMSwwKSxKci5EZWZhdWx0TWF0cml4QXV0b1VwZGF0ZT0hMCxKci5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKEJuLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOkpyLGlzT2JqZWN0M0Q6ITAsb25CZWZvcmVSZW5kZXI6ZnVuY3Rpb24oKXt9LG9uQWZ0ZXJSZW5kZXI6ZnVuY3Rpb24oKXt9LGFwcGx5TWF0cml4NDpmdW5jdGlvbih0KXt0aGlzLm1hdHJpeEF1dG9VcGRhdGUmJnRoaXMudXBkYXRlTWF0cml4KCksdGhpcy5tYXRyaXgucHJlbXVsdGlwbHkodCksdGhpcy5tYXRyaXguZGVjb21wb3NlKHRoaXMucG9zaXRpb24sdGhpcy5xdWF0ZXJuaW9uLHRoaXMuc2NhbGUpfSxhcHBseVF1YXRlcm5pb246ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucXVhdGVybmlvbi5wcmVtdWx0aXBseSh0KSx0aGlzfSxzZXRSb3RhdGlvbkZyb21BeGlzQW5nbGU6ZnVuY3Rpb24odCxlKXt0aGlzLnF1YXRlcm5pb24uc2V0RnJvbUF4aXNBbmdsZSh0LGUpfSxzZXRSb3RhdGlvbkZyb21FdWxlcjpmdW5jdGlvbih0KXt0aGlzLnF1YXRlcm5pb24uc2V0RnJvbUV1bGVyKHQsITApfSxzZXRSb3RhdGlvbkZyb21NYXRyaXg6ZnVuY3Rpb24odCl7dGhpcy5xdWF0ZXJuaW9uLnNldEZyb21Sb3RhdGlvbk1hdHJpeCh0KX0sc2V0Um90YXRpb25Gcm9tUXVhdGVybmlvbjpmdW5jdGlvbih0KXt0aGlzLnF1YXRlcm5pb24uY29weSh0KX0scm90YXRlT25BeGlzOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHpyLnNldEZyb21BeGlzQW5nbGUodCxlKSx0aGlzLnF1YXRlcm5pb24ubXVsdGlwbHkoenIpLHRoaXN9LHJvdGF0ZU9uV29ybGRBeGlzOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHpyLnNldEZyb21BeGlzQW5nbGUodCxlKSx0aGlzLnF1YXRlcm5pb24ucHJlbXVsdGlwbHkoenIpLHRoaXN9LHJvdGF0ZVg6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucm90YXRlT25BeGlzKFdyLHQpfSxyb3RhdGVZOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnJvdGF0ZU9uQXhpcyhYcix0KX0scm90YXRlWjpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5yb3RhdGVPbkF4aXMocXIsdCl9LHRyYW5zbGF0ZU9uQXhpczpmdW5jdGlvbih0LGUpe3JldHVybiBVci5jb3B5KHQpLmFwcGx5UXVhdGVybmlvbih0aGlzLnF1YXRlcm5pb24pLHRoaXMucG9zaXRpb24uYWRkKFVyLm11bHRpcGx5U2NhbGFyKGUpKSx0aGlzfSx0cmFuc2xhdGVYOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnRyYW5zbGF0ZU9uQXhpcyhXcix0KX0sdHJhbnNsYXRlWTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy50cmFuc2xhdGVPbkF4aXMoWHIsdCl9LHRyYW5zbGF0ZVo6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMudHJhbnNsYXRlT25BeGlzKHFyLHQpfSxsb2NhbFRvV29ybGQ6ZnVuY3Rpb24odCl7cmV0dXJuIHQuYXBwbHlNYXRyaXg0KHRoaXMubWF0cml4V29ybGQpfSx3b3JsZFRvTG9jYWw6ZnVuY3Rpb24odCl7cmV0dXJuIHQuYXBwbHlNYXRyaXg0KEdyLmNvcHkodGhpcy5tYXRyaXhXb3JsZCkuaW52ZXJ0KCkpfSxsb29rQXQ6ZnVuY3Rpb24odCxlLG4pe3QuaXNWZWN0b3IzP0hyLmNvcHkodCk6SHIuc2V0KHQsZSxuKTtjb25zdCByPXRoaXMucGFyZW50O3RoaXMudXBkYXRlV29ybGRNYXRyaXgoITAsITEpLGtyLnNldEZyb21NYXRyaXhQb3NpdGlvbih0aGlzLm1hdHJpeFdvcmxkKSx0aGlzLmlzQ2FtZXJhfHx0aGlzLmlzTGlnaHQ/R3IubG9va0F0KGtyLEhyLHRoaXMudXApOkdyLmxvb2tBdChIcixrcix0aGlzLnVwKSx0aGlzLnF1YXRlcm5pb24uc2V0RnJvbVJvdGF0aW9uTWF0cml4KEdyKSxyJiYoR3IuZXh0cmFjdFJvdGF0aW9uKHIubWF0cml4V29ybGQpLHpyLnNldEZyb21Sb3RhdGlvbk1hdHJpeChHciksdGhpcy5xdWF0ZXJuaW9uLnByZW11bHRpcGx5KHpyLmludmVydCgpKSl9LGFkZDpmdW5jdGlvbih0KXtpZihhcmd1bWVudHMubGVuZ3RoPjEpe2ZvcihsZXQgdD0wO3Q8YXJndW1lbnRzLmxlbmd0aDt0KyspdGhpcy5hZGQoYXJndW1lbnRzW3RdKTtyZXR1cm4gdGhpc31yZXR1cm4gdD09PXRoaXM/KGNvbnNvbGUuZXJyb3IoXCJUSFJFRS5PYmplY3QzRC5hZGQ6IG9iamVjdCBjYW4ndCBiZSBhZGRlZCBhcyBhIGNoaWxkIG9mIGl0c2VsZi5cIix0KSx0aGlzKToodCYmdC5pc09iamVjdDNEPyhudWxsIT09dC5wYXJlbnQmJnQucGFyZW50LnJlbW92ZSh0KSx0LnBhcmVudD10aGlzLHRoaXMuY2hpbGRyZW4ucHVzaCh0KSx0LmRpc3BhdGNoRXZlbnQoWXIpKTpjb25zb2xlLmVycm9yKFwiVEhSRUUuT2JqZWN0M0QuYWRkOiBvYmplY3Qgbm90IGFuIGluc3RhbmNlIG9mIFRIUkVFLk9iamVjdDNELlwiLHQpLHRoaXMpfSxyZW1vdmU6ZnVuY3Rpb24odCl7aWYoYXJndW1lbnRzLmxlbmd0aD4xKXtmb3IobGV0IHQ9MDt0PGFyZ3VtZW50cy5sZW5ndGg7dCsrKXRoaXMucmVtb3ZlKGFyZ3VtZW50c1t0XSk7cmV0dXJuIHRoaXN9Y29uc3QgZT10aGlzLmNoaWxkcmVuLmluZGV4T2YodCk7cmV0dXJuLTEhPT1lJiYodC5wYXJlbnQ9bnVsbCx0aGlzLmNoaWxkcmVuLnNwbGljZShlLDEpLHQuZGlzcGF0Y2hFdmVudChacikpLHRoaXN9LGNsZWFyOmZ1bmN0aW9uKCl7Zm9yKGxldCB0PTA7dDx0aGlzLmNoaWxkcmVuLmxlbmd0aDt0Kyspe2NvbnN0IGU9dGhpcy5jaGlsZHJlblt0XTtlLnBhcmVudD1udWxsLGUuZGlzcGF0Y2hFdmVudChacil9cmV0dXJuIHRoaXMuY2hpbGRyZW4ubGVuZ3RoPTAsdGhpc30sYXR0YWNoOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnVwZGF0ZVdvcmxkTWF0cml4KCEwLCExKSxHci5jb3B5KHRoaXMubWF0cml4V29ybGQpLmludmVydCgpLG51bGwhPT10LnBhcmVudCYmKHQucGFyZW50LnVwZGF0ZVdvcmxkTWF0cml4KCEwLCExKSxHci5tdWx0aXBseSh0LnBhcmVudC5tYXRyaXhXb3JsZCkpLHQuYXBwbHlNYXRyaXg0KEdyKSx0LnVwZGF0ZVdvcmxkTWF0cml4KCExLCExKSx0aGlzLmFkZCh0KSx0aGlzfSxnZXRPYmplY3RCeUlkOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmdldE9iamVjdEJ5UHJvcGVydHkoXCJpZFwiLHQpfSxnZXRPYmplY3RCeU5hbWU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZ2V0T2JqZWN0QnlQcm9wZXJ0eShcIm5hbWVcIix0KX0sZ2V0T2JqZWN0QnlQcm9wZXJ0eTpmdW5jdGlvbih0LGUpe2lmKHRoaXNbdF09PT1lKXJldHVybiB0aGlzO2ZvcihsZXQgbj0wLHI9dGhpcy5jaGlsZHJlbi5sZW5ndGg7bjxyO24rKyl7Y29uc3Qgcj10aGlzLmNoaWxkcmVuW25dLmdldE9iamVjdEJ5UHJvcGVydHkodCxlKTtpZih2b2lkIDAhPT1yKXJldHVybiByfX0sZ2V0V29ybGRQb3NpdGlvbjpmdW5jdGlvbih0KXtyZXR1cm4gdm9pZCAwPT09dCYmKGNvbnNvbGUud2FybihcIlRIUkVFLk9iamVjdDNEOiAuZ2V0V29ybGRQb3NpdGlvbigpIHRhcmdldCBpcyBub3cgcmVxdWlyZWRcIiksdD1uZXcgS24pLHRoaXMudXBkYXRlV29ybGRNYXRyaXgoITAsITEpLHQuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKHRoaXMubWF0cml4V29ybGQpfSxnZXRXb3JsZFF1YXRlcm5pb246ZnVuY3Rpb24odCl7cmV0dXJuIHZvaWQgMD09PXQmJihjb25zb2xlLndhcm4oXCJUSFJFRS5PYmplY3QzRDogLmdldFdvcmxkUXVhdGVybmlvbigpIHRhcmdldCBpcyBub3cgcmVxdWlyZWRcIiksdD1uZXcgSm4pLHRoaXMudXBkYXRlV29ybGRNYXRyaXgoITAsITEpLHRoaXMubWF0cml4V29ybGQuZGVjb21wb3NlKGtyLHQsVnIpLHR9LGdldFdvcmxkU2NhbGU6ZnVuY3Rpb24odCl7cmV0dXJuIHZvaWQgMD09PXQmJihjb25zb2xlLndhcm4oXCJUSFJFRS5PYmplY3QzRDogLmdldFdvcmxkU2NhbGUoKSB0YXJnZXQgaXMgbm93IHJlcXVpcmVkXCIpLHQ9bmV3IEtuKSx0aGlzLnVwZGF0ZVdvcmxkTWF0cml4KCEwLCExKSx0aGlzLm1hdHJpeFdvcmxkLmRlY29tcG9zZShrcixqcix0KSx0fSxnZXRXb3JsZERpcmVjdGlvbjpmdW5jdGlvbih0KXt2b2lkIDA9PT10JiYoY29uc29sZS53YXJuKFwiVEhSRUUuT2JqZWN0M0Q6IC5nZXRXb3JsZERpcmVjdGlvbigpIHRhcmdldCBpcyBub3cgcmVxdWlyZWRcIiksdD1uZXcgS24pLHRoaXMudXBkYXRlV29ybGRNYXRyaXgoITAsITEpO2NvbnN0IGU9dGhpcy5tYXRyaXhXb3JsZC5lbGVtZW50cztyZXR1cm4gdC5zZXQoZVs4XSxlWzldLGVbMTBdKS5ub3JtYWxpemUoKX0scmF5Y2FzdDpmdW5jdGlvbigpe30sdHJhdmVyc2U6ZnVuY3Rpb24odCl7dCh0aGlzKTtjb25zdCBlPXRoaXMuY2hpbGRyZW47Zm9yKGxldCBuPTAscj1lLmxlbmd0aDtuPHI7bisrKWVbbl0udHJhdmVyc2UodCl9LHRyYXZlcnNlVmlzaWJsZTpmdW5jdGlvbih0KXtpZighMT09PXRoaXMudmlzaWJsZSlyZXR1cm47dCh0aGlzKTtjb25zdCBlPXRoaXMuY2hpbGRyZW47Zm9yKGxldCBuPTAscj1lLmxlbmd0aDtuPHI7bisrKWVbbl0udHJhdmVyc2VWaXNpYmxlKHQpfSx0cmF2ZXJzZUFuY2VzdG9yczpmdW5jdGlvbih0KXtjb25zdCBlPXRoaXMucGFyZW50O251bGwhPT1lJiYodChlKSxlLnRyYXZlcnNlQW5jZXN0b3JzKHQpKX0sdXBkYXRlTWF0cml4OmZ1bmN0aW9uKCl7dGhpcy5tYXRyaXguY29tcG9zZSh0aGlzLnBvc2l0aW9uLHRoaXMucXVhdGVybmlvbix0aGlzLnNjYWxlKSx0aGlzLm1hdHJpeFdvcmxkTmVlZHNVcGRhdGU9ITB9LHVwZGF0ZU1hdHJpeFdvcmxkOmZ1bmN0aW9uKHQpe3RoaXMubWF0cml4QXV0b1VwZGF0ZSYmdGhpcy51cGRhdGVNYXRyaXgoKSwodGhpcy5tYXRyaXhXb3JsZE5lZWRzVXBkYXRlfHx0KSYmKG51bGw9PT10aGlzLnBhcmVudD90aGlzLm1hdHJpeFdvcmxkLmNvcHkodGhpcy5tYXRyaXgpOnRoaXMubWF0cml4V29ybGQubXVsdGlwbHlNYXRyaWNlcyh0aGlzLnBhcmVudC5tYXRyaXhXb3JsZCx0aGlzLm1hdHJpeCksdGhpcy5tYXRyaXhXb3JsZE5lZWRzVXBkYXRlPSExLHQ9ITApO2NvbnN0IGU9dGhpcy5jaGlsZHJlbjtmb3IobGV0IG49MCxyPWUubGVuZ3RoO248cjtuKyspZVtuXS51cGRhdGVNYXRyaXhXb3JsZCh0KX0sdXBkYXRlV29ybGRNYXRyaXg6ZnVuY3Rpb24odCxlKXtjb25zdCBuPXRoaXMucGFyZW50O2lmKCEwPT09dCYmbnVsbCE9PW4mJm4udXBkYXRlV29ybGRNYXRyaXgoITAsITEpLHRoaXMubWF0cml4QXV0b1VwZGF0ZSYmdGhpcy51cGRhdGVNYXRyaXgoKSxudWxsPT09dGhpcy5wYXJlbnQ/dGhpcy5tYXRyaXhXb3JsZC5jb3B5KHRoaXMubWF0cml4KTp0aGlzLm1hdHJpeFdvcmxkLm11bHRpcGx5TWF0cmljZXModGhpcy5wYXJlbnQubWF0cml4V29ybGQsdGhpcy5tYXRyaXgpLCEwPT09ZSl7Y29uc3QgdD10aGlzLmNoaWxkcmVuO2ZvcihsZXQgZT0wLG49dC5sZW5ndGg7ZTxuO2UrKyl0W2VdLnVwZGF0ZVdvcmxkTWF0cml4KCExLCEwKX19LHRvSlNPTjpmdW5jdGlvbih0KXtjb25zdCBlPXZvaWQgMD09PXR8fFwic3RyaW5nXCI9PXR5cGVvZiB0LG49e307ZSYmKHQ9e2dlb21ldHJpZXM6e30sbWF0ZXJpYWxzOnt9LHRleHR1cmVzOnt9LGltYWdlczp7fSxzaGFwZXM6e30sc2tlbGV0b25zOnt9LGFuaW1hdGlvbnM6e319LG4ubWV0YWRhdGE9e3ZlcnNpb246NC41LHR5cGU6XCJPYmplY3RcIixnZW5lcmF0b3I6XCJPYmplY3QzRC50b0pTT05cIn0pO2NvbnN0IHI9e307ZnVuY3Rpb24gaShlLG4pe3JldHVybiB2b2lkIDA9PT1lW24udXVpZF0mJihlW24udXVpZF09bi50b0pTT04odCkpLG4udXVpZH1pZihyLnV1aWQ9dGhpcy51dWlkLHIudHlwZT10aGlzLnR5cGUsXCJcIiE9PXRoaXMubmFtZSYmKHIubmFtZT10aGlzLm5hbWUpLCEwPT09dGhpcy5jYXN0U2hhZG93JiYoci5jYXN0U2hhZG93PSEwKSwhMD09PXRoaXMucmVjZWl2ZVNoYWRvdyYmKHIucmVjZWl2ZVNoYWRvdz0hMCksITE9PT10aGlzLnZpc2libGUmJihyLnZpc2libGU9ITEpLCExPT09dGhpcy5mcnVzdHVtQ3VsbGVkJiYoci5mcnVzdHVtQ3VsbGVkPSExKSwwIT09dGhpcy5yZW5kZXJPcmRlciYmKHIucmVuZGVyT3JkZXI9dGhpcy5yZW5kZXJPcmRlciksXCJ7fVwiIT09SlNPTi5zdHJpbmdpZnkodGhpcy51c2VyRGF0YSkmJihyLnVzZXJEYXRhPXRoaXMudXNlckRhdGEpLHIubGF5ZXJzPXRoaXMubGF5ZXJzLm1hc2ssci5tYXRyaXg9dGhpcy5tYXRyaXgudG9BcnJheSgpLCExPT09dGhpcy5tYXRyaXhBdXRvVXBkYXRlJiYoci5tYXRyaXhBdXRvVXBkYXRlPSExKSx0aGlzLmlzSW5zdGFuY2VkTWVzaCYmKHIudHlwZT1cIkluc3RhbmNlZE1lc2hcIixyLmNvdW50PXRoaXMuY291bnQsci5pbnN0YW5jZU1hdHJpeD10aGlzLmluc3RhbmNlTWF0cml4LnRvSlNPTigpKSx0aGlzLmlzTWVzaHx8dGhpcy5pc0xpbmV8fHRoaXMuaXNQb2ludHMpe3IuZ2VvbWV0cnk9aSh0Lmdlb21ldHJpZXMsdGhpcy5nZW9tZXRyeSk7Y29uc3QgZT10aGlzLmdlb21ldHJ5LnBhcmFtZXRlcnM7aWYodm9pZCAwIT09ZSYmdm9pZCAwIT09ZS5zaGFwZXMpe2NvbnN0IG49ZS5zaGFwZXM7aWYoQXJyYXkuaXNBcnJheShuKSlmb3IobGV0IGU9MCxyPW4ubGVuZ3RoO2U8cjtlKyspe2NvbnN0IHI9bltlXTtpKHQuc2hhcGVzLHIpfWVsc2UgaSh0LnNoYXBlcyxuKX19aWYodGhpcy5pc1NraW5uZWRNZXNoJiYoci5iaW5kTW9kZT10aGlzLmJpbmRNb2RlLHIuYmluZE1hdHJpeD10aGlzLmJpbmRNYXRyaXgudG9BcnJheSgpLHZvaWQgMCE9PXRoaXMuc2tlbGV0b24mJihpKHQuc2tlbGV0b25zLHRoaXMuc2tlbGV0b24pLHIuc2tlbGV0b249dGhpcy5za2VsZXRvbi51dWlkKSksdm9pZCAwIT09dGhpcy5tYXRlcmlhbClpZihBcnJheS5pc0FycmF5KHRoaXMubWF0ZXJpYWwpKXtjb25zdCBlPVtdO2ZvcihsZXQgbj0wLHI9dGhpcy5tYXRlcmlhbC5sZW5ndGg7bjxyO24rKyllLnB1c2goaSh0Lm1hdGVyaWFscyx0aGlzLm1hdGVyaWFsW25dKSk7ci5tYXRlcmlhbD1lfWVsc2Ugci5tYXRlcmlhbD1pKHQubWF0ZXJpYWxzLHRoaXMubWF0ZXJpYWwpO2lmKHRoaXMuY2hpbGRyZW4ubGVuZ3RoPjApe3IuY2hpbGRyZW49W107Zm9yKGxldCBlPTA7ZTx0aGlzLmNoaWxkcmVuLmxlbmd0aDtlKyspci5jaGlsZHJlbi5wdXNoKHRoaXMuY2hpbGRyZW5bZV0udG9KU09OKHQpLm9iamVjdCl9aWYodGhpcy5hbmltYXRpb25zLmxlbmd0aD4wKXtyLmFuaW1hdGlvbnM9W107Zm9yKGxldCBlPTA7ZTx0aGlzLmFuaW1hdGlvbnMubGVuZ3RoO2UrKyl7Y29uc3Qgbj10aGlzLmFuaW1hdGlvbnNbZV07ci5hbmltYXRpb25zLnB1c2goaSh0LmFuaW1hdGlvbnMsbikpfX1pZihlKXtjb25zdCBlPW8odC5nZW9tZXRyaWVzKSxyPW8odC5tYXRlcmlhbHMpLGk9byh0LnRleHR1cmVzKSxhPW8odC5pbWFnZXMpLHM9byh0LnNoYXBlcyksYz1vKHQuc2tlbGV0b25zKSxsPW8odC5hbmltYXRpb25zKTtlLmxlbmd0aD4wJiYobi5nZW9tZXRyaWVzPWUpLHIubGVuZ3RoPjAmJihuLm1hdGVyaWFscz1yKSxpLmxlbmd0aD4wJiYobi50ZXh0dXJlcz1pKSxhLmxlbmd0aD4wJiYobi5pbWFnZXM9YSkscy5sZW5ndGg+MCYmKG4uc2hhcGVzPXMpLGMubGVuZ3RoPjAmJihuLnNrZWxldG9ucz1jKSxsLmxlbmd0aD4wJiYobi5hbmltYXRpb25zPWwpfXJldHVybiBuLm9iamVjdD1yLG47ZnVuY3Rpb24gbyh0KXtjb25zdCBlPVtdO2Zvcihjb25zdCBuIGluIHQpe2NvbnN0IHI9dFtuXTtkZWxldGUgci5tZXRhZGF0YSxlLnB1c2gocil9cmV0dXJuIGV9fSxjbG9uZTpmdW5jdGlvbih0KXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyx0KX0sY29weTpmdW5jdGlvbih0LGU9ITApe2lmKHRoaXMubmFtZT10Lm5hbWUsdGhpcy51cC5jb3B5KHQudXApLHRoaXMucG9zaXRpb24uY29weSh0LnBvc2l0aW9uKSx0aGlzLnJvdGF0aW9uLm9yZGVyPXQucm90YXRpb24ub3JkZXIsdGhpcy5xdWF0ZXJuaW9uLmNvcHkodC5xdWF0ZXJuaW9uKSx0aGlzLnNjYWxlLmNvcHkodC5zY2FsZSksdGhpcy5tYXRyaXguY29weSh0Lm1hdHJpeCksdGhpcy5tYXRyaXhXb3JsZC5jb3B5KHQubWF0cml4V29ybGQpLHRoaXMubWF0cml4QXV0b1VwZGF0ZT10Lm1hdHJpeEF1dG9VcGRhdGUsdGhpcy5tYXRyaXhXb3JsZE5lZWRzVXBkYXRlPXQubWF0cml4V29ybGROZWVkc1VwZGF0ZSx0aGlzLmxheWVycy5tYXNrPXQubGF5ZXJzLm1hc2ssdGhpcy52aXNpYmxlPXQudmlzaWJsZSx0aGlzLmNhc3RTaGFkb3c9dC5jYXN0U2hhZG93LHRoaXMucmVjZWl2ZVNoYWRvdz10LnJlY2VpdmVTaGFkb3csdGhpcy5mcnVzdHVtQ3VsbGVkPXQuZnJ1c3R1bUN1bGxlZCx0aGlzLnJlbmRlck9yZGVyPXQucmVuZGVyT3JkZXIsdGhpcy51c2VyRGF0YT1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHQudXNlckRhdGEpKSwhMD09PWUpZm9yKGxldCBlPTA7ZTx0LmNoaWxkcmVuLmxlbmd0aDtlKyspe2NvbnN0IG49dC5jaGlsZHJlbltlXTt0aGlzLmFkZChuLmNsb25lKCkpfXJldHVybiB0aGlzfX0pO2NvbnN0IEtyPW5ldyBLbixRcj1uZXcgS24sJHI9bmV3IEhuO2NsYXNzIHRpe2NvbnN0cnVjdG9yKHQsZSl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJpc1BsYW5lXCIse3ZhbHVlOiEwfSksdGhpcy5ub3JtYWw9dm9pZCAwIT09dD90Om5ldyBLbigxLDAsMCksdGhpcy5jb25zdGFudD12b2lkIDAhPT1lP2U6MH1zZXQodCxlKXtyZXR1cm4gdGhpcy5ub3JtYWwuY29weSh0KSx0aGlzLmNvbnN0YW50PWUsdGhpc31zZXRDb21wb25lbnRzKHQsZSxuLHIpe3JldHVybiB0aGlzLm5vcm1hbC5zZXQodCxlLG4pLHRoaXMuY29uc3RhbnQ9cix0aGlzfXNldEZyb21Ob3JtYWxBbmRDb3BsYW5hclBvaW50KHQsZSl7cmV0dXJuIHRoaXMubm9ybWFsLmNvcHkodCksdGhpcy5jb25zdGFudD0tZS5kb3QodGhpcy5ub3JtYWwpLHRoaXN9c2V0RnJvbUNvcGxhbmFyUG9pbnRzKHQsZSxuKXtjb25zdCByPUtyLnN1YlZlY3RvcnMobixlKS5jcm9zcyhRci5zdWJWZWN0b3JzKHQsZSkpLm5vcm1hbGl6ZSgpO3JldHVybiB0aGlzLnNldEZyb21Ob3JtYWxBbmRDb3BsYW5hclBvaW50KHIsdCksdGhpc31jbG9uZSgpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3RvcikuY29weSh0aGlzKX1jb3B5KHQpe3JldHVybiB0aGlzLm5vcm1hbC5jb3B5KHQubm9ybWFsKSx0aGlzLmNvbnN0YW50PXQuY29uc3RhbnQsdGhpc31ub3JtYWxpemUoKXtjb25zdCB0PTEvdGhpcy5ub3JtYWwubGVuZ3RoKCk7cmV0dXJuIHRoaXMubm9ybWFsLm11bHRpcGx5U2NhbGFyKHQpLHRoaXMuY29uc3RhbnQqPXQsdGhpc31uZWdhdGUoKXtyZXR1cm4gdGhpcy5jb25zdGFudCo9LTEsdGhpcy5ub3JtYWwubmVnYXRlKCksdGhpc31kaXN0YW5jZVRvUG9pbnQodCl7cmV0dXJuIHRoaXMubm9ybWFsLmRvdCh0KSt0aGlzLmNvbnN0YW50fWRpc3RhbmNlVG9TcGhlcmUodCl7cmV0dXJuIHRoaXMuZGlzdGFuY2VUb1BvaW50KHQuY2VudGVyKS10LnJhZGl1c31wcm9qZWN0UG9pbnQodCxlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGNvbnNvbGUud2FybihcIlRIUkVFLlBsYW5lOiAucHJvamVjdFBvaW50KCkgdGFyZ2V0IGlzIG5vdyByZXF1aXJlZFwiKSxlPW5ldyBLbiksZS5jb3B5KHRoaXMubm9ybWFsKS5tdWx0aXBseVNjYWxhcigtdGhpcy5kaXN0YW5jZVRvUG9pbnQodCkpLmFkZCh0KX1pbnRlcnNlY3RMaW5lKHQsZSl7dm9pZCAwPT09ZSYmKGNvbnNvbGUud2FybihcIlRIUkVFLlBsYW5lOiAuaW50ZXJzZWN0TGluZSgpIHRhcmdldCBpcyBub3cgcmVxdWlyZWRcIiksZT1uZXcgS24pO2NvbnN0IG49dC5kZWx0YShLcikscj10aGlzLm5vcm1hbC5kb3Qobik7aWYoMD09PXIpcmV0dXJuIDA9PT10aGlzLmRpc3RhbmNlVG9Qb2ludCh0LnN0YXJ0KT9lLmNvcHkodC5zdGFydCk6dm9pZCAwO2NvbnN0IGk9LSh0LnN0YXJ0LmRvdCh0aGlzLm5vcm1hbCkrdGhpcy5jb25zdGFudCkvcjtyZXR1cm4gaTwwfHxpPjE/dm9pZCAwOmUuY29weShuKS5tdWx0aXBseVNjYWxhcihpKS5hZGQodC5zdGFydCl9aW50ZXJzZWN0c0xpbmUodCl7Y29uc3QgZT10aGlzLmRpc3RhbmNlVG9Qb2ludCh0LnN0YXJ0KSxuPXRoaXMuZGlzdGFuY2VUb1BvaW50KHQuZW5kKTtyZXR1cm4gZTwwJiZuPjB8fG48MCYmZT4wfWludGVyc2VjdHNCb3godCl7cmV0dXJuIHQuaW50ZXJzZWN0c1BsYW5lKHRoaXMpfWludGVyc2VjdHNTcGhlcmUodCl7cmV0dXJuIHQuaW50ZXJzZWN0c1BsYW5lKHRoaXMpfWNvcGxhbmFyUG9pbnQodCl7cmV0dXJuIHZvaWQgMD09PXQmJihjb25zb2xlLndhcm4oXCJUSFJFRS5QbGFuZTogLmNvcGxhbmFyUG9pbnQoKSB0YXJnZXQgaXMgbm93IHJlcXVpcmVkXCIpLHQ9bmV3IEtuKSx0LmNvcHkodGhpcy5ub3JtYWwpLm11bHRpcGx5U2NhbGFyKC10aGlzLmNvbnN0YW50KX1hcHBseU1hdHJpeDQodCxlKXtjb25zdCBuPWV8fCRyLmdldE5vcm1hbE1hdHJpeCh0KSxyPXRoaXMuY29wbGFuYXJQb2ludChLcikuYXBwbHlNYXRyaXg0KHQpLGk9dGhpcy5ub3JtYWwuYXBwbHlNYXRyaXgzKG4pLm5vcm1hbGl6ZSgpO3JldHVybiB0aGlzLmNvbnN0YW50PS1yLmRvdChpKSx0aGlzfXRyYW5zbGF0ZSh0KXtyZXR1cm4gdGhpcy5jb25zdGFudC09dC5kb3QodGhpcy5ub3JtYWwpLHRoaXN9ZXF1YWxzKHQpe3JldHVybiB0Lm5vcm1hbC5lcXVhbHModGhpcy5ub3JtYWwpJiZ0LmNvbnN0YW50PT09dGhpcy5jb25zdGFudH19Y29uc3QgZWk9bmV3IEtuLG5pPW5ldyBLbixyaT1uZXcgS24saWk9bmV3IEtuLG9pPW5ldyBLbixhaT1uZXcgS24sc2k9bmV3IEtuLGNpPW5ldyBLbixsaT1uZXcgS24sdWk9bmV3IEtuO2NsYXNzIGhpe2NvbnN0cnVjdG9yKHQsZSxuKXt0aGlzLmE9dm9pZCAwIT09dD90Om5ldyBLbix0aGlzLmI9dm9pZCAwIT09ZT9lOm5ldyBLbix0aGlzLmM9dm9pZCAwIT09bj9uOm5ldyBLbn1zdGF0aWMgZ2V0Tm9ybWFsKHQsZSxuLHIpe3ZvaWQgMD09PXImJihjb25zb2xlLndhcm4oXCJUSFJFRS5UcmlhbmdsZTogLmdldE5vcm1hbCgpIHRhcmdldCBpcyBub3cgcmVxdWlyZWRcIikscj1uZXcgS24pLHIuc3ViVmVjdG9ycyhuLGUpLGVpLnN1YlZlY3RvcnModCxlKSxyLmNyb3NzKGVpKTtjb25zdCBpPXIubGVuZ3RoU3EoKTtyZXR1cm4gaT4wP3IubXVsdGlwbHlTY2FsYXIoMS9NYXRoLnNxcnQoaSkpOnIuc2V0KDAsMCwwKX1zdGF0aWMgZ2V0QmFyeWNvb3JkKHQsZSxuLHIsaSl7ZWkuc3ViVmVjdG9ycyhyLGUpLG5pLnN1YlZlY3RvcnMobixlKSxyaS5zdWJWZWN0b3JzKHQsZSk7Y29uc3Qgbz1laS5kb3QoZWkpLGE9ZWkuZG90KG5pKSxzPWVpLmRvdChyaSksYz1uaS5kb3QobmkpLGw9bmkuZG90KHJpKSx1PW8qYy1hKmE7aWYodm9pZCAwPT09aSYmKGNvbnNvbGUud2FybihcIlRIUkVFLlRyaWFuZ2xlOiAuZ2V0QmFyeWNvb3JkKCkgdGFyZ2V0IGlzIG5vdyByZXF1aXJlZFwiKSxpPW5ldyBLbiksMD09PXUpcmV0dXJuIGkuc2V0KC0yLC0xLC0xKTtjb25zdCBoPTEvdSxkPShjKnMtYSpsKSpoLHA9KG8qbC1hKnMpKmg7cmV0dXJuIGkuc2V0KDEtZC1wLHAsZCl9c3RhdGljIGNvbnRhaW5zUG9pbnQodCxlLG4scil7cmV0dXJuIHRoaXMuZ2V0QmFyeWNvb3JkKHQsZSxuLHIsaWkpLGlpLng+PTAmJmlpLnk+PTAmJmlpLngraWkueTw9MX1zdGF0aWMgZ2V0VVYodCxlLG4scixpLG8sYSxzKXtyZXR1cm4gdGhpcy5nZXRCYXJ5Y29vcmQodCxlLG4scixpaSkscy5zZXQoMCwwKSxzLmFkZFNjYWxlZFZlY3RvcihpLGlpLngpLHMuYWRkU2NhbGVkVmVjdG9yKG8saWkueSkscy5hZGRTY2FsZWRWZWN0b3IoYSxpaS56KSxzfXN0YXRpYyBpc0Zyb250RmFjaW5nKHQsZSxuLHIpe3JldHVybiBlaS5zdWJWZWN0b3JzKG4sZSksbmkuc3ViVmVjdG9ycyh0LGUpLGVpLmNyb3NzKG5pKS5kb3Qocik8MH1zZXQodCxlLG4pe3JldHVybiB0aGlzLmEuY29weSh0KSx0aGlzLmIuY29weShlKSx0aGlzLmMuY29weShuKSx0aGlzfXNldEZyb21Qb2ludHNBbmRJbmRpY2VzKHQsZSxuLHIpe3JldHVybiB0aGlzLmEuY29weSh0W2VdKSx0aGlzLmIuY29weSh0W25dKSx0aGlzLmMuY29weSh0W3JdKSx0aGlzfWNsb25lKCl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKS5jb3B5KHRoaXMpfWNvcHkodCl7cmV0dXJuIHRoaXMuYS5jb3B5KHQuYSksdGhpcy5iLmNvcHkodC5iKSx0aGlzLmMuY29weSh0LmMpLHRoaXN9Z2V0QXJlYSgpe3JldHVybiBlaS5zdWJWZWN0b3JzKHRoaXMuYyx0aGlzLmIpLG5pLnN1YlZlY3RvcnModGhpcy5hLHRoaXMuYiksLjUqZWkuY3Jvc3MobmkpLmxlbmd0aCgpfWdldE1pZHBvaW50KHQpe3JldHVybiB2b2lkIDA9PT10JiYoY29uc29sZS53YXJuKFwiVEhSRUUuVHJpYW5nbGU6IC5nZXRNaWRwb2ludCgpIHRhcmdldCBpcyBub3cgcmVxdWlyZWRcIiksdD1uZXcgS24pLHQuYWRkVmVjdG9ycyh0aGlzLmEsdGhpcy5iKS5hZGQodGhpcy5jKS5tdWx0aXBseVNjYWxhcigxLzMpfWdldE5vcm1hbCh0KXtyZXR1cm4gaGkuZ2V0Tm9ybWFsKHRoaXMuYSx0aGlzLmIsdGhpcy5jLHQpfWdldFBsYW5lKHQpe3JldHVybiB2b2lkIDA9PT10JiYoY29uc29sZS53YXJuKFwiVEhSRUUuVHJpYW5nbGU6IC5nZXRQbGFuZSgpIHRhcmdldCBpcyBub3cgcmVxdWlyZWRcIiksdD1uZXcgdGkpLHQuc2V0RnJvbUNvcGxhbmFyUG9pbnRzKHRoaXMuYSx0aGlzLmIsdGhpcy5jKX1nZXRCYXJ5Y29vcmQodCxlKXtyZXR1cm4gaGkuZ2V0QmFyeWNvb3JkKHQsdGhpcy5hLHRoaXMuYix0aGlzLmMsZSl9Z2V0VVYodCxlLG4scixpKXtyZXR1cm4gaGkuZ2V0VVYodCx0aGlzLmEsdGhpcy5iLHRoaXMuYyxlLG4scixpKX1jb250YWluc1BvaW50KHQpe3JldHVybiBoaS5jb250YWluc1BvaW50KHQsdGhpcy5hLHRoaXMuYix0aGlzLmMpfWlzRnJvbnRGYWNpbmcodCl7cmV0dXJuIGhpLmlzRnJvbnRGYWNpbmcodGhpcy5hLHRoaXMuYix0aGlzLmMsdCl9aW50ZXJzZWN0c0JveCh0KXtyZXR1cm4gdC5pbnRlcnNlY3RzVHJpYW5nbGUodGhpcyl9Y2xvc2VzdFBvaW50VG9Qb2ludCh0LGUpe3ZvaWQgMD09PWUmJihjb25zb2xlLndhcm4oXCJUSFJFRS5UcmlhbmdsZTogLmNsb3Nlc3RQb2ludFRvUG9pbnQoKSB0YXJnZXQgaXMgbm93IHJlcXVpcmVkXCIpLGU9bmV3IEtuKTtjb25zdCBuPXRoaXMuYSxyPXRoaXMuYixpPXRoaXMuYztsZXQgbyxhO29pLnN1YlZlY3RvcnMocixuKSxhaS5zdWJWZWN0b3JzKGksbiksY2kuc3ViVmVjdG9ycyh0LG4pO2NvbnN0IHM9b2kuZG90KGNpKSxjPWFpLmRvdChjaSk7aWYoczw9MCYmYzw9MClyZXR1cm4gZS5jb3B5KG4pO2xpLnN1YlZlY3RvcnModCxyKTtjb25zdCBsPW9pLmRvdChsaSksdT1haS5kb3QobGkpO2lmKGw+PTAmJnU8PWwpcmV0dXJuIGUuY29weShyKTtjb25zdCBoPXMqdS1sKmM7aWYoaDw9MCYmcz49MCYmbDw9MClyZXR1cm4gbz1zLyhzLWwpLGUuY29weShuKS5hZGRTY2FsZWRWZWN0b3Iob2ksbyk7dWkuc3ViVmVjdG9ycyh0LGkpO2NvbnN0IGQ9b2kuZG90KHVpKSxwPWFpLmRvdCh1aSk7aWYocD49MCYmZDw9cClyZXR1cm4gZS5jb3B5KGkpO2NvbnN0IGY9ZCpjLXMqcDtpZihmPD0wJiZjPj0wJiZwPD0wKXJldHVybiBhPWMvKGMtcCksZS5jb3B5KG4pLmFkZFNjYWxlZFZlY3RvcihhaSxhKTtjb25zdCBtPWwqcC1kKnU7aWYobTw9MCYmdS1sPj0wJiZkLXA+PTApcmV0dXJuIHNpLnN1YlZlY3RvcnMoaSxyKSxhPSh1LWwpLyh1LWwrKGQtcCkpLGUuY29weShyKS5hZGRTY2FsZWRWZWN0b3Ioc2ksYSk7Y29uc3QgZz0xLyhtK2YraCk7cmV0dXJuIG89ZipnLGE9aCpnLGUuY29weShuKS5hZGRTY2FsZWRWZWN0b3Iob2ksbykuYWRkU2NhbGVkVmVjdG9yKGFpLGEpfWVxdWFscyh0KXtyZXR1cm4gdC5hLmVxdWFscyh0aGlzLmEpJiZ0LmIuZXF1YWxzKHRoaXMuYikmJnQuYy5lcXVhbHModGhpcy5jKX19Y29uc3QgZGk9e2FsaWNlYmx1ZToxNTc5MjM4MyxhbnRpcXVld2hpdGU6MTY0NDQzNzUsYXF1YTo2NTUzNSxhcXVhbWFyaW5lOjgzODg1NjQsYXp1cmU6MTU3OTQxNzUsYmVpZ2U6MTYxMTkyNjAsYmlzcXVlOjE2NzcwMjQ0LGJsYWNrOjAsYmxhbmNoZWRhbG1vbmQ6MTY3NzIwNDUsYmx1ZToyNTUsYmx1ZXZpb2xldDo5MDU1MjAyLGJyb3duOjEwODI0MjM0LGJ1cmx5d29vZDoxNDU5NjIzMSxjYWRldGJsdWU6NjI2NjUyOCxjaGFydHJldXNlOjgzODgzNTIsY2hvY29sYXRlOjEzNzg5NDcwLGNvcmFsOjE2NzQ0MjcyLGNvcm5mbG93ZXJibHVlOjY1OTE5ODEsY29ybnNpbGs6MTY3NzUzODgsY3JpbXNvbjoxNDQyMzEwMCxjeWFuOjY1NTM1LGRhcmtibHVlOjEzOSxkYXJrY3lhbjozNTcyMyxkYXJrZ29sZGVucm9kOjEyMDkyOTM5LGRhcmtncmF5OjExMTE5MDE3LGRhcmtncmVlbjoyNTYwMCxkYXJrZ3JleToxMTExOTAxNyxkYXJra2hha2k6MTI0MzMyNTksZGFya21hZ2VudGE6OTEwOTY0MyxkYXJrb2xpdmVncmVlbjo1NTk3OTk5LGRhcmtvcmFuZ2U6MTY3NDc1MjAsZGFya29yY2hpZDoxMDA0MDAxMixkYXJrcmVkOjkxMDk1MDQsZGFya3NhbG1vbjoxNTMwODQxMCxkYXJrc2VhZ3JlZW46OTQxOTkxOSxkYXJrc2xhdGVibHVlOjQ3MzQzNDcsZGFya3NsYXRlZ3JheTozMTAwNDk1LGRhcmtzbGF0ZWdyZXk6MzEwMDQ5NSxkYXJrdHVycXVvaXNlOjUyOTQ1LGRhcmt2aW9sZXQ6OTY5OTUzOSxkZWVwcGluazoxNjcxNjk0NyxkZWVwc2t5Ymx1ZTo0OTE1MSxkaW1ncmF5OjY5MDgyNjUsZGltZ3JleTo2OTA4MjY1LGRvZGdlcmJsdWU6MjAwMzE5OSxmaXJlYnJpY2s6MTE2NzQxNDYsZmxvcmFsd2hpdGU6MTY3NzU5MjAsZm9yZXN0Z3JlZW46MjI2Mzg0MixmdWNoc2lhOjE2NzExOTM1LGdhaW5zYm9ybzoxNDQ3NDQ2MCxnaG9zdHdoaXRlOjE2MzE2NjcxLGdvbGQ6MTY3NjY3MjAsZ29sZGVucm9kOjE0MzI5MTIwLGdyYXk6ODQyMTUwNCxncmVlbjozMjc2OCxncmVlbnllbGxvdzoxMTQwMzA1NSxncmV5Ojg0MjE1MDQsaG9uZXlkZXc6MTU3OTQxNjAsaG90cGluazoxNjczODc0MCxpbmRpYW5yZWQ6MTM0NTg1MjQsaW5kaWdvOjQ5MTUzMzAsaXZvcnk6MTY3NzcyMDAsa2hha2k6MTU3ODc2NjAsbGF2ZW5kZXI6MTUxMzI0MTAsbGF2ZW5kZXJibHVzaDoxNjc3MzM2NSxsYXduZ3JlZW46ODE5MDk3NixsZW1vbmNoaWZmb246MTY3NzU4ODUsbGlnaHRibHVlOjExMzkzMjU0LGxpZ2h0Y29yYWw6MTU3NjE1MzYsbGlnaHRjeWFuOjE0NzQ1NTk5LGxpZ2h0Z29sZGVucm9keWVsbG93OjE2NDQ4MjEwLGxpZ2h0Z3JheToxMzg4MjMyMyxsaWdodGdyZWVuOjk0OTgyNTYsbGlnaHRncmV5OjEzODgyMzIzLGxpZ2h0cGluazoxNjc1ODQ2NSxsaWdodHNhbG1vbjoxNjc1Mjc2MixsaWdodHNlYWdyZWVuOjIxNDI4OTAsbGlnaHRza3libHVlOjg5MDAzNDYsbGlnaHRzbGF0ZWdyYXk6NzgzMzc1MyxsaWdodHNsYXRlZ3JleTo3ODMzNzUzLGxpZ2h0c3RlZWxibHVlOjExNTg0NzM0LGxpZ2h0eWVsbG93OjE2Nzc3MTg0LGxpbWU6NjUyODAsbGltZWdyZWVuOjMzMjkzMzAsbGluZW46MTY0NDU2NzAsbWFnZW50YToxNjcxMTkzNSxtYXJvb246ODM4ODYwOCxtZWRpdW1hcXVhbWFyaW5lOjY3MzczMjIsbWVkaXVtYmx1ZToyMDUsbWVkaXVtb3JjaGlkOjEyMjExNjY3LG1lZGl1bXB1cnBsZTo5NjYyNjgzLG1lZGl1bXNlYWdyZWVuOjM5NzgwOTcsbWVkaXVtc2xhdGVibHVlOjgwODc3OTAsbWVkaXVtc3ByaW5nZ3JlZW46NjQxNTQsbWVkaXVtdHVycXVvaXNlOjQ3NzIzMDAsbWVkaXVtdmlvbGV0cmVkOjEzMDQ3MTczLG1pZG5pZ2h0Ymx1ZToxNjQ0OTEyLG1pbnRjcmVhbToxNjEyMTg1MCxtaXN0eXJvc2U6MTY3NzAyNzMsbW9jY2FzaW46MTY3NzAyMjksbmF2YWpvd2hpdGU6MTY3Njg2ODUsbmF2eToxMjgsb2xkbGFjZToxNjY0MzU1OCxvbGl2ZTo4NDIxMzc2LG9saXZlZHJhYjo3MDQ4NzM5LG9yYW5nZToxNjc1MzkyMCxvcmFuZ2VyZWQ6MTY3MjkzNDQsb3JjaGlkOjE0MzE1NzM0LHBhbGVnb2xkZW5yb2Q6MTU2NTcxMzAscGFsZWdyZWVuOjEwMDI1ODgwLHBhbGV0dXJxdW9pc2U6MTE1Mjk5NjYscGFsZXZpb2xldHJlZDoxNDM4MTIwMyxwYXBheWF3aGlwOjE2NzczMDc3LHBlYWNocHVmZjoxNjc2NzY3MyxwZXJ1OjEzNDY4OTkxLHBpbms6MTY3NjEwMzUscGx1bToxNDUyNDYzNyxwb3dkZXJibHVlOjExNTkxOTEwLHB1cnBsZTo4Mzg4NzM2LHJlYmVjY2FwdXJwbGU6NjY5Nzg4MSxyZWQ6MTY3MTE2ODAscm9zeWJyb3duOjEyMzU3NTE5LHJveWFsYmx1ZTo0Mjg2OTQ1LHNhZGRsZWJyb3duOjkxMjcxODcsc2FsbW9uOjE2NDE2ODgyLHNhbmR5YnJvd246MTYwMzI4NjQsc2VhZ3JlZW46MzA1MDMyNyxzZWFzaGVsbDoxNjc3NDYzOCxzaWVubmE6MTA1MDY3OTcsc2lsdmVyOjEyNjMyMjU2LHNreWJsdWU6ODkwMDMzMSxzbGF0ZWJsdWU6Njk3MDA2MSxzbGF0ZWdyYXk6NzM3Mjk0NCxzbGF0ZWdyZXk6NzM3Mjk0NCxzbm93OjE2Nzc1OTMwLHNwcmluZ2dyZWVuOjY1NDA3LHN0ZWVsYmx1ZTo0NjIwOTgwLHRhbjoxMzgwODc4MCx0ZWFsOjMyODk2LHRoaXN0bGU6MTQyMDQ4ODgsdG9tYXRvOjE2NzM3MDk1LHR1cnF1b2lzZTo0MjUxODU2LHZpb2xldDoxNTYzMTA4Nix3aGVhdDoxNjExMzMzMSx3aGl0ZToxNjc3NzIxNSx3aGl0ZXNtb2tlOjE2MTE5Mjg1LHllbGxvdzoxNjc3Njk2MCx5ZWxsb3dncmVlbjoxMDE0NTA3NH0scGk9e2g6MCxzOjAsbDowfSxmaT17aDowLHM6MCxsOjB9O2Z1bmN0aW9uIG1pKHQsZSxuKXtyZXR1cm4gbjwwJiYobis9MSksbj4xJiYobi09MSksbjwxLzY/dCs2KihlLXQpKm46bjwuNT9lOm48Mi8zP3QrNiooZS10KSooMi8zLW4pOnR9ZnVuY3Rpb24gZ2kodCl7cmV0dXJuIHQ8LjA0MDQ1Py4wNzczOTkzODA4KnQ6TWF0aC5wb3coLjk0Nzg2NzI5ODYqdCsuMDUyMTMyNzAxNCwyLjQpfWZ1bmN0aW9uIHZpKHQpe3JldHVybiB0PC4wMDMxMzA4PzEyLjkyKnQ6MS4wNTUqTWF0aC5wb3codCwuNDE2NjYpLS4wNTV9Y2xhc3MgeWl7Y29uc3RydWN0b3IodCxlLG4pe3JldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImlzQ29sb3JcIix7dmFsdWU6ITB9KSx2b2lkIDA9PT1lJiZ2b2lkIDA9PT1uP3RoaXMuc2V0KHQpOnRoaXMuc2V0UkdCKHQsZSxuKX1zZXQodCl7cmV0dXJuIHQmJnQuaXNDb2xvcj90aGlzLmNvcHkodCk6XCJudW1iZXJcIj09dHlwZW9mIHQ/dGhpcy5zZXRIZXgodCk6XCJzdHJpbmdcIj09dHlwZW9mIHQmJnRoaXMuc2V0U3R5bGUodCksdGhpc31zZXRTY2FsYXIodCl7cmV0dXJuIHRoaXMucj10LHRoaXMuZz10LHRoaXMuYj10LHRoaXN9c2V0SGV4KHQpe3JldHVybiB0PU1hdGguZmxvb3IodCksdGhpcy5yPSh0Pj4xNiYyNTUpLzI1NSx0aGlzLmc9KHQ+PjgmMjU1KS8yNTUsdGhpcy5iPSgyNTUmdCkvMjU1LHRoaXN9c2V0UkdCKHQsZSxuKXtyZXR1cm4gdGhpcy5yPXQsdGhpcy5nPWUsdGhpcy5iPW4sdGhpc31zZXRIU0wodCxlLG4pe2lmKHQ9em4uZXVjbGlkZWFuTW9kdWxvKHQsMSksZT16bi5jbGFtcChlLDAsMSksbj16bi5jbGFtcChuLDAsMSksMD09PWUpdGhpcy5yPXRoaXMuZz10aGlzLmI9bjtlbHNle2NvbnN0IHI9bjw9LjU/biooMStlKTpuK2UtbiplLGk9MipuLXI7dGhpcy5yPW1pKGkscix0KzEvMyksdGhpcy5nPW1pKGkscix0KSx0aGlzLmI9bWkoaSxyLHQtMS8zKX1yZXR1cm4gdGhpc31zZXRTdHlsZSh0KXtmdW5jdGlvbiBlKGUpe3ZvaWQgMCE9PWUmJnBhcnNlRmxvYXQoZSk8MSYmY29uc29sZS53YXJuKFwiVEhSRUUuQ29sb3I6IEFscGhhIGNvbXBvbmVudCBvZiBcIit0K1wiIHdpbGwgYmUgaWdub3JlZC5cIil9bGV0IG47aWYobj0vXigoPzpyZ2J8aHNsKWE/KVxcKFxccyooW15cXCldKilcXCkvLmV4ZWModCkpe2xldCB0O2NvbnN0IHI9blsxXSxpPW5bMl07c3dpdGNoKHIpe2Nhc2VcInJnYlwiOmNhc2VcInJnYmFcIjppZih0PS9eKFxcZCspXFxzKixcXHMqKFxcZCspXFxzKixcXHMqKFxcZCspXFxzKigsXFxzKihbMC05XSpcXC4/WzAtOV0rKVxccyopPyQvLmV4ZWMoaSkpcmV0dXJuIHRoaXMucj1NYXRoLm1pbigyNTUscGFyc2VJbnQodFsxXSwxMCkpLzI1NSx0aGlzLmc9TWF0aC5taW4oMjU1LHBhcnNlSW50KHRbMl0sMTApKS8yNTUsdGhpcy5iPU1hdGgubWluKDI1NSxwYXJzZUludCh0WzNdLDEwKSkvMjU1LGUodFs1XSksdGhpcztpZih0PS9eKFxcZCspXFwlXFxzKixcXHMqKFxcZCspXFwlXFxzKixcXHMqKFxcZCspXFwlXFxzKigsXFxzKihbMC05XSpcXC4/WzAtOV0rKVxccyopPyQvLmV4ZWMoaSkpcmV0dXJuIHRoaXMucj1NYXRoLm1pbigxMDAscGFyc2VJbnQodFsxXSwxMCkpLzEwMCx0aGlzLmc9TWF0aC5taW4oMTAwLHBhcnNlSW50KHRbMl0sMTApKS8xMDAsdGhpcy5iPU1hdGgubWluKDEwMCxwYXJzZUludCh0WzNdLDEwKSkvMTAwLGUodFs1XSksdGhpczticmVhaztjYXNlXCJoc2xcIjpjYXNlXCJoc2xhXCI6aWYodD0vXihbMC05XSpcXC4/WzAtOV0rKVxccyosXFxzKihcXGQrKVxcJVxccyosXFxzKihcXGQrKVxcJVxccyooLFxccyooWzAtOV0qXFwuP1swLTldKylcXHMqKT8kLy5leGVjKGkpKXtjb25zdCBuPXBhcnNlRmxvYXQodFsxXSkvMzYwLHI9cGFyc2VJbnQodFsyXSwxMCkvMTAwLGk9cGFyc2VJbnQodFszXSwxMCkvMTAwO3JldHVybiBlKHRbNV0pLHRoaXMuc2V0SFNMKG4scixpKX19fWVsc2UgaWYobj0vXlxcIyhbQS1GYS1mMC05XSspJC8uZXhlYyh0KSl7Y29uc3QgdD1uWzFdLGU9dC5sZW5ndGg7aWYoMz09PWUpcmV0dXJuIHRoaXMucj1wYXJzZUludCh0LmNoYXJBdCgwKSt0LmNoYXJBdCgwKSwxNikvMjU1LHRoaXMuZz1wYXJzZUludCh0LmNoYXJBdCgxKSt0LmNoYXJBdCgxKSwxNikvMjU1LHRoaXMuYj1wYXJzZUludCh0LmNoYXJBdCgyKSt0LmNoYXJBdCgyKSwxNikvMjU1LHRoaXM7aWYoNj09PWUpcmV0dXJuIHRoaXMucj1wYXJzZUludCh0LmNoYXJBdCgwKSt0LmNoYXJBdCgxKSwxNikvMjU1LHRoaXMuZz1wYXJzZUludCh0LmNoYXJBdCgyKSt0LmNoYXJBdCgzKSwxNikvMjU1LHRoaXMuYj1wYXJzZUludCh0LmNoYXJBdCg0KSt0LmNoYXJBdCg1KSwxNikvMjU1LHRoaXN9cmV0dXJuIHQmJnQubGVuZ3RoPjA/dGhpcy5zZXRDb2xvck5hbWUodCk6dGhpc31zZXRDb2xvck5hbWUodCl7Y29uc3QgZT1kaVt0XTtyZXR1cm4gdm9pZCAwIT09ZT90aGlzLnNldEhleChlKTpjb25zb2xlLndhcm4oXCJUSFJFRS5Db2xvcjogVW5rbm93biBjb2xvciBcIit0KSx0aGlzfWNsb25lKCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMucix0aGlzLmcsdGhpcy5iKX1jb3B5KHQpe3JldHVybiB0aGlzLnI9dC5yLHRoaXMuZz10LmcsdGhpcy5iPXQuYix0aGlzfWNvcHlHYW1tYVRvTGluZWFyKHQsZT0yKXtyZXR1cm4gdGhpcy5yPU1hdGgucG93KHQucixlKSx0aGlzLmc9TWF0aC5wb3codC5nLGUpLHRoaXMuYj1NYXRoLnBvdyh0LmIsZSksdGhpc31jb3B5TGluZWFyVG9HYW1tYSh0LGU9Mil7Y29uc3Qgbj1lPjA/MS9lOjE7cmV0dXJuIHRoaXMucj1NYXRoLnBvdyh0LnIsbiksdGhpcy5nPU1hdGgucG93KHQuZyxuKSx0aGlzLmI9TWF0aC5wb3codC5iLG4pLHRoaXN9Y29udmVydEdhbW1hVG9MaW5lYXIodCl7cmV0dXJuIHRoaXMuY29weUdhbW1hVG9MaW5lYXIodGhpcyx0KSx0aGlzfWNvbnZlcnRMaW5lYXJUb0dhbW1hKHQpe3JldHVybiB0aGlzLmNvcHlMaW5lYXJUb0dhbW1hKHRoaXMsdCksdGhpc31jb3B5U1JHQlRvTGluZWFyKHQpe3JldHVybiB0aGlzLnI9Z2kodC5yKSx0aGlzLmc9Z2kodC5nKSx0aGlzLmI9Z2kodC5iKSx0aGlzfWNvcHlMaW5lYXJUb1NSR0IodCl7cmV0dXJuIHRoaXMucj12aSh0LnIpLHRoaXMuZz12aSh0LmcpLHRoaXMuYj12aSh0LmIpLHRoaXN9Y29udmVydFNSR0JUb0xpbmVhcigpe3JldHVybiB0aGlzLmNvcHlTUkdCVG9MaW5lYXIodGhpcyksdGhpc31jb252ZXJ0TGluZWFyVG9TUkdCKCl7cmV0dXJuIHRoaXMuY29weUxpbmVhclRvU1JHQih0aGlzKSx0aGlzfWdldEhleCgpe3JldHVybiAyNTUqdGhpcy5yPDwxNl4yNTUqdGhpcy5nPDw4XjI1NSp0aGlzLmI8PDB9Z2V0SGV4U3RyaW5nKCl7cmV0dXJuKFwiMDAwMDAwXCIrdGhpcy5nZXRIZXgoKS50b1N0cmluZygxNikpLnNsaWNlKC02KX1nZXRIU0wodCl7dm9pZCAwPT09dCYmKGNvbnNvbGUud2FybihcIlRIUkVFLkNvbG9yOiAuZ2V0SFNMKCkgdGFyZ2V0IGlzIG5vdyByZXF1aXJlZFwiKSx0PXtoOjAsczowLGw6MH0pO2NvbnN0IGU9dGhpcy5yLG49dGhpcy5nLHI9dGhpcy5iLGk9TWF0aC5tYXgoZSxuLHIpLG89TWF0aC5taW4oZSxuLHIpO2xldCBhLHM7Y29uc3QgYz0obytpKS8yO2lmKG89PT1pKWE9MCxzPTA7ZWxzZXtjb25zdCB0PWktbztzd2l0Y2gocz1jPD0uNT90LyhpK28pOnQvKDItaS1vKSxpKXtjYXNlIGU6YT0obi1yKS90KyhuPHI/NjowKTticmVhaztjYXNlIG46YT0oci1lKS90KzI7YnJlYWs7Y2FzZSByOmE9KGUtbikvdCs0fWEvPTZ9cmV0dXJuIHQuaD1hLHQucz1zLHQubD1jLHR9Z2V0U3R5bGUoKXtyZXR1cm5cInJnYihcIisoMjU1KnRoaXMucnwwKStcIixcIisoMjU1KnRoaXMuZ3wwKStcIixcIisoMjU1KnRoaXMuYnwwKStcIilcIn1vZmZzZXRIU0wodCxlLG4pe3JldHVybiB0aGlzLmdldEhTTChwaSkscGkuaCs9dCxwaS5zKz1lLHBpLmwrPW4sdGhpcy5zZXRIU0wocGkuaCxwaS5zLHBpLmwpLHRoaXN9YWRkKHQpe3JldHVybiB0aGlzLnIrPXQucix0aGlzLmcrPXQuZyx0aGlzLmIrPXQuYix0aGlzfWFkZENvbG9ycyh0LGUpe3JldHVybiB0aGlzLnI9dC5yK2Uucix0aGlzLmc9dC5nK2UuZyx0aGlzLmI9dC5iK2UuYix0aGlzfWFkZFNjYWxhcih0KXtyZXR1cm4gdGhpcy5yKz10LHRoaXMuZys9dCx0aGlzLmIrPXQsdGhpc31zdWIodCl7cmV0dXJuIHRoaXMucj1NYXRoLm1heCgwLHRoaXMuci10LnIpLHRoaXMuZz1NYXRoLm1heCgwLHRoaXMuZy10LmcpLHRoaXMuYj1NYXRoLm1heCgwLHRoaXMuYi10LmIpLHRoaXN9bXVsdGlwbHkodCl7cmV0dXJuIHRoaXMucio9dC5yLHRoaXMuZyo9dC5nLHRoaXMuYio9dC5iLHRoaXN9bXVsdGlwbHlTY2FsYXIodCl7cmV0dXJuIHRoaXMucio9dCx0aGlzLmcqPXQsdGhpcy5iKj10LHRoaXN9bGVycCh0LGUpe3JldHVybiB0aGlzLnIrPSh0LnItdGhpcy5yKSplLHRoaXMuZys9KHQuZy10aGlzLmcpKmUsdGhpcy5iKz0odC5iLXRoaXMuYikqZSx0aGlzfWxlcnBIU0wodCxlKXt0aGlzLmdldEhTTChwaSksdC5nZXRIU0woZmkpO2NvbnN0IG49em4ubGVycChwaS5oLGZpLmgsZSkscj16bi5sZXJwKHBpLnMsZmkucyxlKSxpPXpuLmxlcnAocGkubCxmaS5sLGUpO3JldHVybiB0aGlzLnNldEhTTChuLHIsaSksdGhpc31lcXVhbHModCl7cmV0dXJuIHQucj09PXRoaXMuciYmdC5nPT09dGhpcy5nJiZ0LmI9PT10aGlzLmJ9ZnJvbUFycmF5KHQsZT0wKXtyZXR1cm4gdGhpcy5yPXRbZV0sdGhpcy5nPXRbZSsxXSx0aGlzLmI9dFtlKzJdLHRoaXN9dG9BcnJheSh0PVtdLGU9MCl7cmV0dXJuIHRbZV09dGhpcy5yLHRbZSsxXT10aGlzLmcsdFtlKzJdPXRoaXMuYix0fWZyb21CdWZmZXJBdHRyaWJ1dGUodCxlKXtyZXR1cm4gdGhpcy5yPXQuZ2V0WChlKSx0aGlzLmc9dC5nZXRZKGUpLHRoaXMuYj10LmdldFooZSksITA9PT10Lm5vcm1hbGl6ZWQmJih0aGlzLnIvPTI1NSx0aGlzLmcvPTI1NSx0aGlzLmIvPTI1NSksdGhpc310b0pTT04oKXtyZXR1cm4gdGhpcy5nZXRIZXgoKX19eWkuTkFNRVM9ZGkseWkucHJvdG90eXBlLnI9MSx5aS5wcm90b3R5cGUuZz0xLHlpLnByb3RvdHlwZS5iPTE7Y2xhc3MgeGl7Y29uc3RydWN0b3IodCxlLG4scixpLG89MCl7dGhpcy5hPXQsdGhpcy5iPWUsdGhpcy5jPW4sdGhpcy5ub3JtYWw9ciYmci5pc1ZlY3RvcjM/cjpuZXcgS24sdGhpcy52ZXJ0ZXhOb3JtYWxzPUFycmF5LmlzQXJyYXkocik/cjpbXSx0aGlzLmNvbG9yPWkmJmkuaXNDb2xvcj9pOm5ldyB5aSx0aGlzLnZlcnRleENvbG9ycz1BcnJheS5pc0FycmF5KGkpP2k6W10sdGhpcy5tYXRlcmlhbEluZGV4PW99Y2xvbmUoKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyl9Y29weSh0KXt0aGlzLmE9dC5hLHRoaXMuYj10LmIsdGhpcy5jPXQuYyx0aGlzLm5vcm1hbC5jb3B5KHQubm9ybWFsKSx0aGlzLmNvbG9yLmNvcHkodC5jb2xvciksdGhpcy5tYXRlcmlhbEluZGV4PXQubWF0ZXJpYWxJbmRleDtmb3IobGV0IGU9MCxuPXQudmVydGV4Tm9ybWFscy5sZW5ndGg7ZTxuO2UrKyl0aGlzLnZlcnRleE5vcm1hbHNbZV09dC52ZXJ0ZXhOb3JtYWxzW2VdLmNsb25lKCk7Zm9yKGxldCBlPTAsbj10LnZlcnRleENvbG9ycy5sZW5ndGg7ZTxuO2UrKyl0aGlzLnZlcnRleENvbG9yc1tlXT10LnZlcnRleENvbG9yc1tlXS5jbG9uZSgpO3JldHVybiB0aGlzfX1sZXQgYmk9MDtmdW5jdGlvbiB3aSgpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiaWRcIix7dmFsdWU6YmkrK30pLHRoaXMudXVpZD16bi5nZW5lcmF0ZVVVSUQoKSx0aGlzLm5hbWU9XCJcIix0aGlzLnR5cGU9XCJNYXRlcmlhbFwiLHRoaXMuZm9nPSEwLHRoaXMuYmxlbmRpbmc9Yix0aGlzLnNpZGU9Zix0aGlzLmZsYXRTaGFkaW5nPSExLHRoaXMudmVydGV4Q29sb3JzPSExLHRoaXMub3BhY2l0eT0xLHRoaXMudHJhbnNwYXJlbnQ9ITEsdGhpcy5ibGVuZFNyYz1OLHRoaXMuYmxlbmREc3Q9RCx0aGlzLmJsZW5kRXF1YXRpb249VCx0aGlzLmJsZW5kU3JjQWxwaGE9bnVsbCx0aGlzLmJsZW5kRHN0QWxwaGE9bnVsbCx0aGlzLmJsZW5kRXF1YXRpb25BbHBoYT1udWxsLHRoaXMuZGVwdGhGdW5jPWosdGhpcy5kZXB0aFRlc3Q9ITAsdGhpcy5kZXB0aFdyaXRlPSEwLHRoaXMuc3RlbmNpbFdyaXRlTWFzaz0yNTUsdGhpcy5zdGVuY2lsRnVuYz1Tbix0aGlzLnN0ZW5jaWxSZWY9MCx0aGlzLnN0ZW5jaWxGdW5jTWFzaz0yNTUsdGhpcy5zdGVuY2lsRmFpbD11bix0aGlzLnN0ZW5jaWxaRmFpbD11bix0aGlzLnN0ZW5jaWxaUGFzcz11bix0aGlzLnN0ZW5jaWxXcml0ZT0hMSx0aGlzLmNsaXBwaW5nUGxhbmVzPW51bGwsdGhpcy5jbGlwSW50ZXJzZWN0aW9uPSExLHRoaXMuY2xpcFNoYWRvd3M9ITEsdGhpcy5zaGFkb3dTaWRlPW51bGwsdGhpcy5jb2xvcldyaXRlPSEwLHRoaXMucHJlY2lzaW9uPW51bGwsdGhpcy5wb2x5Z29uT2Zmc2V0PSExLHRoaXMucG9seWdvbk9mZnNldEZhY3Rvcj0wLHRoaXMucG9seWdvbk9mZnNldFVuaXRzPTAsdGhpcy5kaXRoZXJpbmc9ITEsdGhpcy5hbHBoYVRlc3Q9MCx0aGlzLnByZW11bHRpcGxpZWRBbHBoYT0hMSx0aGlzLnZpc2libGU9ITAsdGhpcy50b25lTWFwcGVkPSEwLHRoaXMudXNlckRhdGE9e30sdGhpcy52ZXJzaW9uPTB9ZnVuY3Rpb24gX2kodCl7d2kuY2FsbCh0aGlzKSx0aGlzLnR5cGU9XCJNZXNoQmFzaWNNYXRlcmlhbFwiLHRoaXMuY29sb3I9bmV3IHlpKDE2Nzc3MjE1KSx0aGlzLm1hcD1udWxsLHRoaXMubGlnaHRNYXA9bnVsbCx0aGlzLmxpZ2h0TWFwSW50ZW5zaXR5PTEsdGhpcy5hb01hcD1udWxsLHRoaXMuYW9NYXBJbnRlbnNpdHk9MSx0aGlzLnNwZWN1bGFyTWFwPW51bGwsdGhpcy5hbHBoYU1hcD1udWxsLHRoaXMuZW52TWFwPW51bGwsdGhpcy5jb21iaW5lPVosdGhpcy5yZWZsZWN0aXZpdHk9MSx0aGlzLnJlZnJhY3Rpb25SYXRpbz0uOTgsdGhpcy53aXJlZnJhbWU9ITEsdGhpcy53aXJlZnJhbWVMaW5ld2lkdGg9MSx0aGlzLndpcmVmcmFtZUxpbmVjYXA9XCJyb3VuZFwiLHRoaXMud2lyZWZyYW1lTGluZWpvaW49XCJyb3VuZFwiLHRoaXMuc2tpbm5pbmc9ITEsdGhpcy5tb3JwaFRhcmdldHM9ITEsdGhpcy5zZXRWYWx1ZXModCl9d2kucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShCbi5wcm90b3R5cGUpLHtjb25zdHJ1Y3Rvcjp3aSxpc01hdGVyaWFsOiEwLG9uQmVmb3JlQ29tcGlsZTpmdW5jdGlvbigpe30sY3VzdG9tUHJvZ3JhbUNhY2hlS2V5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub25CZWZvcmVDb21waWxlLnRvU3RyaW5nKCl9LHNldFZhbHVlczpmdW5jdGlvbih0KXtpZih2b2lkIDAhPT10KWZvcihjb25zdCBlIGluIHQpe2NvbnN0IG49dFtlXTtpZih2b2lkIDA9PT1uKXtjb25zb2xlLndhcm4oXCJUSFJFRS5NYXRlcmlhbDogJ1wiK2UrXCInIHBhcmFtZXRlciBpcyB1bmRlZmluZWQuXCIpO2NvbnRpbnVlfWlmKFwic2hhZGluZ1wiPT09ZSl7Y29uc29sZS53YXJuKFwiVEhSRUUuXCIrdGhpcy50eXBlK1wiOiAuc2hhZGluZyBoYXMgYmVlbiByZW1vdmVkLiBVc2UgdGhlIGJvb2xlYW4gLmZsYXRTaGFkaW5nIGluc3RlYWQuXCIpLHRoaXMuZmxhdFNoYWRpbmc9bj09PXY7Y29udGludWV9Y29uc3Qgcj10aGlzW2VdO3ZvaWQgMCE9PXI/ciYmci5pc0NvbG9yP3Iuc2V0KG4pOnImJnIuaXNWZWN0b3IzJiZuJiZuLmlzVmVjdG9yMz9yLmNvcHkobik6dGhpc1tlXT1uOmNvbnNvbGUud2FybihcIlRIUkVFLlwiK3RoaXMudHlwZStcIjogJ1wiK2UrXCInIGlzIG5vdCBhIHByb3BlcnR5IG9mIHRoaXMgbWF0ZXJpYWwuXCIpfX0sdG9KU09OOmZ1bmN0aW9uKHQpe2NvbnN0IGU9dm9pZCAwPT09dHx8XCJzdHJpbmdcIj09dHlwZW9mIHQ7ZSYmKHQ9e3RleHR1cmVzOnt9LGltYWdlczp7fX0pO2NvbnN0IG49e21ldGFkYXRhOnt2ZXJzaW9uOjQuNSx0eXBlOlwiTWF0ZXJpYWxcIixnZW5lcmF0b3I6XCJNYXRlcmlhbC50b0pTT05cIn19O2Z1bmN0aW9uIHIodCl7Y29uc3QgZT1bXTtmb3IoY29uc3QgbiBpbiB0KXtjb25zdCByPXRbbl07ZGVsZXRlIHIubWV0YWRhdGEsZS5wdXNoKHIpfXJldHVybiBlfWlmKG4udXVpZD10aGlzLnV1aWQsbi50eXBlPXRoaXMudHlwZSxcIlwiIT09dGhpcy5uYW1lJiYobi5uYW1lPXRoaXMubmFtZSksdGhpcy5jb2xvciYmdGhpcy5jb2xvci5pc0NvbG9yJiYobi5jb2xvcj10aGlzLmNvbG9yLmdldEhleCgpKSx2b2lkIDAhPT10aGlzLnJvdWdobmVzcyYmKG4ucm91Z2huZXNzPXRoaXMucm91Z2huZXNzKSx2b2lkIDAhPT10aGlzLm1ldGFsbmVzcyYmKG4ubWV0YWxuZXNzPXRoaXMubWV0YWxuZXNzKSx0aGlzLnNoZWVuJiZ0aGlzLnNoZWVuLmlzQ29sb3ImJihuLnNoZWVuPXRoaXMuc2hlZW4uZ2V0SGV4KCkpLHRoaXMuZW1pc3NpdmUmJnRoaXMuZW1pc3NpdmUuaXNDb2xvciYmKG4uZW1pc3NpdmU9dGhpcy5lbWlzc2l2ZS5nZXRIZXgoKSksdGhpcy5lbWlzc2l2ZUludGVuc2l0eSYmMSE9PXRoaXMuZW1pc3NpdmVJbnRlbnNpdHkmJihuLmVtaXNzaXZlSW50ZW5zaXR5PXRoaXMuZW1pc3NpdmVJbnRlbnNpdHkpLHRoaXMuc3BlY3VsYXImJnRoaXMuc3BlY3VsYXIuaXNDb2xvciYmKG4uc3BlY3VsYXI9dGhpcy5zcGVjdWxhci5nZXRIZXgoKSksdm9pZCAwIT09dGhpcy5zaGluaW5lc3MmJihuLnNoaW5pbmVzcz10aGlzLnNoaW5pbmVzcyksdm9pZCAwIT09dGhpcy5jbGVhcmNvYXQmJihuLmNsZWFyY29hdD10aGlzLmNsZWFyY29hdCksdm9pZCAwIT09dGhpcy5jbGVhcmNvYXRSb3VnaG5lc3MmJihuLmNsZWFyY29hdFJvdWdobmVzcz10aGlzLmNsZWFyY29hdFJvdWdobmVzcyksdGhpcy5jbGVhcmNvYXRNYXAmJnRoaXMuY2xlYXJjb2F0TWFwLmlzVGV4dHVyZSYmKG4uY2xlYXJjb2F0TWFwPXRoaXMuY2xlYXJjb2F0TWFwLnRvSlNPTih0KS51dWlkKSx0aGlzLmNsZWFyY29hdFJvdWdobmVzc01hcCYmdGhpcy5jbGVhcmNvYXRSb3VnaG5lc3NNYXAuaXNUZXh0dXJlJiYobi5jbGVhcmNvYXRSb3VnaG5lc3NNYXA9dGhpcy5jbGVhcmNvYXRSb3VnaG5lc3NNYXAudG9KU09OKHQpLnV1aWQpLHRoaXMuY2xlYXJjb2F0Tm9ybWFsTWFwJiZ0aGlzLmNsZWFyY29hdE5vcm1hbE1hcC5pc1RleHR1cmUmJihuLmNsZWFyY29hdE5vcm1hbE1hcD10aGlzLmNsZWFyY29hdE5vcm1hbE1hcC50b0pTT04odCkudXVpZCxuLmNsZWFyY29hdE5vcm1hbFNjYWxlPXRoaXMuY2xlYXJjb2F0Tm9ybWFsU2NhbGUudG9BcnJheSgpKSx0aGlzLm1hcCYmdGhpcy5tYXAuaXNUZXh0dXJlJiYobi5tYXA9dGhpcy5tYXAudG9KU09OKHQpLnV1aWQpLHRoaXMubWF0Y2FwJiZ0aGlzLm1hdGNhcC5pc1RleHR1cmUmJihuLm1hdGNhcD10aGlzLm1hdGNhcC50b0pTT04odCkudXVpZCksdGhpcy5hbHBoYU1hcCYmdGhpcy5hbHBoYU1hcC5pc1RleHR1cmUmJihuLmFscGhhTWFwPXRoaXMuYWxwaGFNYXAudG9KU09OKHQpLnV1aWQpLHRoaXMubGlnaHRNYXAmJnRoaXMubGlnaHRNYXAuaXNUZXh0dXJlJiYobi5saWdodE1hcD10aGlzLmxpZ2h0TWFwLnRvSlNPTih0KS51dWlkKSx0aGlzLmFvTWFwJiZ0aGlzLmFvTWFwLmlzVGV4dHVyZSYmKG4uYW9NYXA9dGhpcy5hb01hcC50b0pTT04odCkudXVpZCxuLmFvTWFwSW50ZW5zaXR5PXRoaXMuYW9NYXBJbnRlbnNpdHkpLHRoaXMuYnVtcE1hcCYmdGhpcy5idW1wTWFwLmlzVGV4dHVyZSYmKG4uYnVtcE1hcD10aGlzLmJ1bXBNYXAudG9KU09OKHQpLnV1aWQsbi5idW1wU2NhbGU9dGhpcy5idW1wU2NhbGUpLHRoaXMubm9ybWFsTWFwJiZ0aGlzLm5vcm1hbE1hcC5pc1RleHR1cmUmJihuLm5vcm1hbE1hcD10aGlzLm5vcm1hbE1hcC50b0pTT04odCkudXVpZCxuLm5vcm1hbE1hcFR5cGU9dGhpcy5ub3JtYWxNYXBUeXBlLG4ubm9ybWFsU2NhbGU9dGhpcy5ub3JtYWxTY2FsZS50b0FycmF5KCkpLHRoaXMuZGlzcGxhY2VtZW50TWFwJiZ0aGlzLmRpc3BsYWNlbWVudE1hcC5pc1RleHR1cmUmJihuLmRpc3BsYWNlbWVudE1hcD10aGlzLmRpc3BsYWNlbWVudE1hcC50b0pTT04odCkudXVpZCxuLmRpc3BsYWNlbWVudFNjYWxlPXRoaXMuZGlzcGxhY2VtZW50U2NhbGUsbi5kaXNwbGFjZW1lbnRCaWFzPXRoaXMuZGlzcGxhY2VtZW50QmlhcyksdGhpcy5yb3VnaG5lc3NNYXAmJnRoaXMucm91Z2huZXNzTWFwLmlzVGV4dHVyZSYmKG4ucm91Z2huZXNzTWFwPXRoaXMucm91Z2huZXNzTWFwLnRvSlNPTih0KS51dWlkKSx0aGlzLm1ldGFsbmVzc01hcCYmdGhpcy5tZXRhbG5lc3NNYXAuaXNUZXh0dXJlJiYobi5tZXRhbG5lc3NNYXA9dGhpcy5tZXRhbG5lc3NNYXAudG9KU09OKHQpLnV1aWQpLHRoaXMuZW1pc3NpdmVNYXAmJnRoaXMuZW1pc3NpdmVNYXAuaXNUZXh0dXJlJiYobi5lbWlzc2l2ZU1hcD10aGlzLmVtaXNzaXZlTWFwLnRvSlNPTih0KS51dWlkKSx0aGlzLnNwZWN1bGFyTWFwJiZ0aGlzLnNwZWN1bGFyTWFwLmlzVGV4dHVyZSYmKG4uc3BlY3VsYXJNYXA9dGhpcy5zcGVjdWxhck1hcC50b0pTT04odCkudXVpZCksdGhpcy5lbnZNYXAmJnRoaXMuZW52TWFwLmlzVGV4dHVyZSYmKG4uZW52TWFwPXRoaXMuZW52TWFwLnRvSlNPTih0KS51dWlkLG4ucmVmbGVjdGl2aXR5PXRoaXMucmVmbGVjdGl2aXR5LG4ucmVmcmFjdGlvblJhdGlvPXRoaXMucmVmcmFjdGlvblJhdGlvLHZvaWQgMCE9PXRoaXMuY29tYmluZSYmKG4uY29tYmluZT10aGlzLmNvbWJpbmUpLHZvaWQgMCE9PXRoaXMuZW52TWFwSW50ZW5zaXR5JiYobi5lbnZNYXBJbnRlbnNpdHk9dGhpcy5lbnZNYXBJbnRlbnNpdHkpKSx0aGlzLmdyYWRpZW50TWFwJiZ0aGlzLmdyYWRpZW50TWFwLmlzVGV4dHVyZSYmKG4uZ3JhZGllbnRNYXA9dGhpcy5ncmFkaWVudE1hcC50b0pTT04odCkudXVpZCksdm9pZCAwIT09dGhpcy5zaXplJiYobi5zaXplPXRoaXMuc2l6ZSksdm9pZCAwIT09dGhpcy5zaXplQXR0ZW51YXRpb24mJihuLnNpemVBdHRlbnVhdGlvbj10aGlzLnNpemVBdHRlbnVhdGlvbiksdGhpcy5ibGVuZGluZyE9PWImJihuLmJsZW5kaW5nPXRoaXMuYmxlbmRpbmcpLCEwPT09dGhpcy5mbGF0U2hhZGluZyYmKG4uZmxhdFNoYWRpbmc9dGhpcy5mbGF0U2hhZGluZyksdGhpcy5zaWRlIT09ZiYmKG4uc2lkZT10aGlzLnNpZGUpLHRoaXMudmVydGV4Q29sb3JzJiYobi52ZXJ0ZXhDb2xvcnM9ITApLHRoaXMub3BhY2l0eTwxJiYobi5vcGFjaXR5PXRoaXMub3BhY2l0eSksITA9PT10aGlzLnRyYW5zcGFyZW50JiYobi50cmFuc3BhcmVudD10aGlzLnRyYW5zcGFyZW50KSxuLmRlcHRoRnVuYz10aGlzLmRlcHRoRnVuYyxuLmRlcHRoVGVzdD10aGlzLmRlcHRoVGVzdCxuLmRlcHRoV3JpdGU9dGhpcy5kZXB0aFdyaXRlLG4uc3RlbmNpbFdyaXRlPXRoaXMuc3RlbmNpbFdyaXRlLG4uc3RlbmNpbFdyaXRlTWFzaz10aGlzLnN0ZW5jaWxXcml0ZU1hc2ssbi5zdGVuY2lsRnVuYz10aGlzLnN0ZW5jaWxGdW5jLG4uc3RlbmNpbFJlZj10aGlzLnN0ZW5jaWxSZWYsbi5zdGVuY2lsRnVuY01hc2s9dGhpcy5zdGVuY2lsRnVuY01hc2ssbi5zdGVuY2lsRmFpbD10aGlzLnN0ZW5jaWxGYWlsLG4uc3RlbmNpbFpGYWlsPXRoaXMuc3RlbmNpbFpGYWlsLG4uc3RlbmNpbFpQYXNzPXRoaXMuc3RlbmNpbFpQYXNzLHRoaXMucm90YXRpb24mJjAhPT10aGlzLnJvdGF0aW9uJiYobi5yb3RhdGlvbj10aGlzLnJvdGF0aW9uKSwhMD09PXRoaXMucG9seWdvbk9mZnNldCYmKG4ucG9seWdvbk9mZnNldD0hMCksMCE9PXRoaXMucG9seWdvbk9mZnNldEZhY3RvciYmKG4ucG9seWdvbk9mZnNldEZhY3Rvcj10aGlzLnBvbHlnb25PZmZzZXRGYWN0b3IpLDAhPT10aGlzLnBvbHlnb25PZmZzZXRVbml0cyYmKG4ucG9seWdvbk9mZnNldFVuaXRzPXRoaXMucG9seWdvbk9mZnNldFVuaXRzKSx0aGlzLmxpbmV3aWR0aCYmMSE9PXRoaXMubGluZXdpZHRoJiYobi5saW5ld2lkdGg9dGhpcy5saW5ld2lkdGgpLHZvaWQgMCE9PXRoaXMuZGFzaFNpemUmJihuLmRhc2hTaXplPXRoaXMuZGFzaFNpemUpLHZvaWQgMCE9PXRoaXMuZ2FwU2l6ZSYmKG4uZ2FwU2l6ZT10aGlzLmdhcFNpemUpLHZvaWQgMCE9PXRoaXMuc2NhbGUmJihuLnNjYWxlPXRoaXMuc2NhbGUpLCEwPT09dGhpcy5kaXRoZXJpbmcmJihuLmRpdGhlcmluZz0hMCksdGhpcy5hbHBoYVRlc3Q+MCYmKG4uYWxwaGFUZXN0PXRoaXMuYWxwaGFUZXN0KSwhMD09PXRoaXMucHJlbXVsdGlwbGllZEFscGhhJiYobi5wcmVtdWx0aXBsaWVkQWxwaGE9dGhpcy5wcmVtdWx0aXBsaWVkQWxwaGEpLCEwPT09dGhpcy53aXJlZnJhbWUmJihuLndpcmVmcmFtZT10aGlzLndpcmVmcmFtZSksdGhpcy53aXJlZnJhbWVMaW5ld2lkdGg+MSYmKG4ud2lyZWZyYW1lTGluZXdpZHRoPXRoaXMud2lyZWZyYW1lTGluZXdpZHRoKSxcInJvdW5kXCIhPT10aGlzLndpcmVmcmFtZUxpbmVjYXAmJihuLndpcmVmcmFtZUxpbmVjYXA9dGhpcy53aXJlZnJhbWVMaW5lY2FwKSxcInJvdW5kXCIhPT10aGlzLndpcmVmcmFtZUxpbmVqb2luJiYobi53aXJlZnJhbWVMaW5lam9pbj10aGlzLndpcmVmcmFtZUxpbmVqb2luKSwhMD09PXRoaXMubW9ycGhUYXJnZXRzJiYobi5tb3JwaFRhcmdldHM9ITApLCEwPT09dGhpcy5tb3JwaE5vcm1hbHMmJihuLm1vcnBoTm9ybWFscz0hMCksITA9PT10aGlzLnNraW5uaW5nJiYobi5za2lubmluZz0hMCksITE9PT10aGlzLnZpc2libGUmJihuLnZpc2libGU9ITEpLCExPT09dGhpcy50b25lTWFwcGVkJiYobi50b25lTWFwcGVkPSExKSxcInt9XCIhPT1KU09OLnN0cmluZ2lmeSh0aGlzLnVzZXJEYXRhKSYmKG4udXNlckRhdGE9dGhpcy51c2VyRGF0YSksZSl7Y29uc3QgZT1yKHQudGV4dHVyZXMpLGk9cih0LmltYWdlcyk7ZS5sZW5ndGg+MCYmKG4udGV4dHVyZXM9ZSksaS5sZW5ndGg+MCYmKG4uaW1hZ2VzPWkpfXJldHVybiBufSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3RvcikuY29weSh0aGlzKX0sY29weTpmdW5jdGlvbih0KXt0aGlzLm5hbWU9dC5uYW1lLHRoaXMuZm9nPXQuZm9nLHRoaXMuYmxlbmRpbmc9dC5ibGVuZGluZyx0aGlzLnNpZGU9dC5zaWRlLHRoaXMuZmxhdFNoYWRpbmc9dC5mbGF0U2hhZGluZyx0aGlzLnZlcnRleENvbG9ycz10LnZlcnRleENvbG9ycyx0aGlzLm9wYWNpdHk9dC5vcGFjaXR5LHRoaXMudHJhbnNwYXJlbnQ9dC50cmFuc3BhcmVudCx0aGlzLmJsZW5kU3JjPXQuYmxlbmRTcmMsdGhpcy5ibGVuZERzdD10LmJsZW5kRHN0LHRoaXMuYmxlbmRFcXVhdGlvbj10LmJsZW5kRXF1YXRpb24sdGhpcy5ibGVuZFNyY0FscGhhPXQuYmxlbmRTcmNBbHBoYSx0aGlzLmJsZW5kRHN0QWxwaGE9dC5ibGVuZERzdEFscGhhLHRoaXMuYmxlbmRFcXVhdGlvbkFscGhhPXQuYmxlbmRFcXVhdGlvbkFscGhhLHRoaXMuZGVwdGhGdW5jPXQuZGVwdGhGdW5jLHRoaXMuZGVwdGhUZXN0PXQuZGVwdGhUZXN0LHRoaXMuZGVwdGhXcml0ZT10LmRlcHRoV3JpdGUsdGhpcy5zdGVuY2lsV3JpdGVNYXNrPXQuc3RlbmNpbFdyaXRlTWFzayx0aGlzLnN0ZW5jaWxGdW5jPXQuc3RlbmNpbEZ1bmMsdGhpcy5zdGVuY2lsUmVmPXQuc3RlbmNpbFJlZix0aGlzLnN0ZW5jaWxGdW5jTWFzaz10LnN0ZW5jaWxGdW5jTWFzayx0aGlzLnN0ZW5jaWxGYWlsPXQuc3RlbmNpbEZhaWwsdGhpcy5zdGVuY2lsWkZhaWw9dC5zdGVuY2lsWkZhaWwsdGhpcy5zdGVuY2lsWlBhc3M9dC5zdGVuY2lsWlBhc3MsdGhpcy5zdGVuY2lsV3JpdGU9dC5zdGVuY2lsV3JpdGU7Y29uc3QgZT10LmNsaXBwaW5nUGxhbmVzO2xldCBuPW51bGw7aWYobnVsbCE9PWUpe2NvbnN0IHQ9ZS5sZW5ndGg7bj1uZXcgQXJyYXkodCk7Zm9yKGxldCByPTA7ciE9PXQ7KytyKW5bcl09ZVtyXS5jbG9uZSgpfXJldHVybiB0aGlzLmNsaXBwaW5nUGxhbmVzPW4sdGhpcy5jbGlwSW50ZXJzZWN0aW9uPXQuY2xpcEludGVyc2VjdGlvbix0aGlzLmNsaXBTaGFkb3dzPXQuY2xpcFNoYWRvd3MsdGhpcy5zaGFkb3dTaWRlPXQuc2hhZG93U2lkZSx0aGlzLmNvbG9yV3JpdGU9dC5jb2xvcldyaXRlLHRoaXMucHJlY2lzaW9uPXQucHJlY2lzaW9uLHRoaXMucG9seWdvbk9mZnNldD10LnBvbHlnb25PZmZzZXQsdGhpcy5wb2x5Z29uT2Zmc2V0RmFjdG9yPXQucG9seWdvbk9mZnNldEZhY3Rvcix0aGlzLnBvbHlnb25PZmZzZXRVbml0cz10LnBvbHlnb25PZmZzZXRVbml0cyx0aGlzLmRpdGhlcmluZz10LmRpdGhlcmluZyx0aGlzLmFscGhhVGVzdD10LmFscGhhVGVzdCx0aGlzLnByZW11bHRpcGxpZWRBbHBoYT10LnByZW11bHRpcGxpZWRBbHBoYSx0aGlzLnZpc2libGU9dC52aXNpYmxlLHRoaXMudG9uZU1hcHBlZD10LnRvbmVNYXBwZWQsdGhpcy51c2VyRGF0YT1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHQudXNlckRhdGEpKSx0aGlzfSxkaXNwb3NlOmZ1bmN0aW9uKCl7dGhpcy5kaXNwYXRjaEV2ZW50KHt0eXBlOlwiZGlzcG9zZVwifSl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpLnByb3RvdHlwZSxcIm5lZWRzVXBkYXRlXCIse3NldDpmdW5jdGlvbih0KXshMD09PXQmJnRoaXMudmVyc2lvbisrfX0pLF9pLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHdpLnByb3RvdHlwZSksX2kucHJvdG90eXBlLmNvbnN0cnVjdG9yPV9pLF9pLnByb3RvdHlwZS5pc01lc2hCYXNpY01hdGVyaWFsPSEwLF9pLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKHQpe3JldHVybiB3aS5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsdCksdGhpcy5jb2xvci5jb3B5KHQuY29sb3IpLHRoaXMubWFwPXQubWFwLHRoaXMubGlnaHRNYXA9dC5saWdodE1hcCx0aGlzLmxpZ2h0TWFwSW50ZW5zaXR5PXQubGlnaHRNYXBJbnRlbnNpdHksdGhpcy5hb01hcD10LmFvTWFwLHRoaXMuYW9NYXBJbnRlbnNpdHk9dC5hb01hcEludGVuc2l0eSx0aGlzLnNwZWN1bGFyTWFwPXQuc3BlY3VsYXJNYXAsdGhpcy5hbHBoYU1hcD10LmFscGhhTWFwLHRoaXMuZW52TWFwPXQuZW52TWFwLHRoaXMuY29tYmluZT10LmNvbWJpbmUsdGhpcy5yZWZsZWN0aXZpdHk9dC5yZWZsZWN0aXZpdHksdGhpcy5yZWZyYWN0aW9uUmF0aW89dC5yZWZyYWN0aW9uUmF0aW8sdGhpcy53aXJlZnJhbWU9dC53aXJlZnJhbWUsdGhpcy53aXJlZnJhbWVMaW5ld2lkdGg9dC53aXJlZnJhbWVMaW5ld2lkdGgsdGhpcy53aXJlZnJhbWVMaW5lY2FwPXQud2lyZWZyYW1lTGluZWNhcCx0aGlzLndpcmVmcmFtZUxpbmVqb2luPXQud2lyZWZyYW1lTGluZWpvaW4sdGhpcy5za2lubmluZz10LnNraW5uaW5nLHRoaXMubW9ycGhUYXJnZXRzPXQubW9ycGhUYXJnZXRzLHRoaXN9O2NvbnN0IE1pPW5ldyBLbixTaT1uZXcgR247ZnVuY3Rpb24gVGkodCxlLG4pe2lmKEFycmF5LmlzQXJyYXkodCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlRIUkVFLkJ1ZmZlckF0dHJpYnV0ZTogYXJyYXkgc2hvdWxkIGJlIGEgVHlwZWQgQXJyYXkuXCIpO3RoaXMubmFtZT1cIlwiLHRoaXMuYXJyYXk9dCx0aGlzLml0ZW1TaXplPWUsdGhpcy5jb3VudD12b2lkIDAhPT10P3QubGVuZ3RoL2U6MCx0aGlzLm5vcm1hbGl6ZWQ9ITA9PT1uLHRoaXMudXNhZ2U9VG4sdGhpcy51cGRhdGVSYW5nZT17b2Zmc2V0OjAsY291bnQ6LTF9LHRoaXMudmVyc2lvbj0wfWZ1bmN0aW9uIEVpKHQsZSxuKXtUaS5jYWxsKHRoaXMsbmV3IEludDhBcnJheSh0KSxlLG4pfWZ1bmN0aW9uIEFpKHQsZSxuKXtUaS5jYWxsKHRoaXMsbmV3IFVpbnQ4QXJyYXkodCksZSxuKX1mdW5jdGlvbiBMaSh0LGUsbil7VGkuY2FsbCh0aGlzLG5ldyBVaW50OENsYW1wZWRBcnJheSh0KSxlLG4pfWZ1bmN0aW9uIFJpKHQsZSxuKXtUaS5jYWxsKHRoaXMsbmV3IEludDE2QXJyYXkodCksZSxuKX1mdW5jdGlvbiBQaSh0LGUsbil7VGkuY2FsbCh0aGlzLG5ldyBVaW50MTZBcnJheSh0KSxlLG4pfWZ1bmN0aW9uIENpKHQsZSxuKXtUaS5jYWxsKHRoaXMsbmV3IEludDMyQXJyYXkodCksZSxuKX1mdW5jdGlvbiBJaSh0LGUsbil7VGkuY2FsbCh0aGlzLG5ldyBVaW50MzJBcnJheSh0KSxlLG4pfWZ1bmN0aW9uIE9pKHQsZSxuKXtUaS5jYWxsKHRoaXMsbmV3IFVpbnQxNkFycmF5KHQpLGUsbil9ZnVuY3Rpb24gTmkodCxlLG4pe1RpLmNhbGwodGhpcyxuZXcgRmxvYXQzMkFycmF5KHQpLGUsbil9ZnVuY3Rpb24gRGkodCxlLG4pe1RpLmNhbGwodGhpcyxuZXcgRmxvYXQ2NEFycmF5KHQpLGUsbil9T2JqZWN0LmRlZmluZVByb3BlcnR5KFRpLnByb3RvdHlwZSxcIm5lZWRzVXBkYXRlXCIse3NldDpmdW5jdGlvbih0KXshMD09PXQmJnRoaXMudmVyc2lvbisrfX0pLE9iamVjdC5hc3NpZ24oVGkucHJvdG90eXBlLHtpc0J1ZmZlckF0dHJpYnV0ZTohMCxvblVwbG9hZENhbGxiYWNrOmZ1bmN0aW9uKCl7fSxzZXRVc2FnZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy51c2FnZT10LHRoaXN9LGNvcHk6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMubmFtZT10Lm5hbWUsdGhpcy5hcnJheT1uZXcgdC5hcnJheS5jb25zdHJ1Y3Rvcih0LmFycmF5KSx0aGlzLml0ZW1TaXplPXQuaXRlbVNpemUsdGhpcy5jb3VudD10LmNvdW50LHRoaXMubm9ybWFsaXplZD10Lm5vcm1hbGl6ZWQsdGhpcy51c2FnZT10LnVzYWdlLHRoaXN9LGNvcHlBdDpmdW5jdGlvbih0LGUsbil7dCo9dGhpcy5pdGVtU2l6ZSxuKj1lLml0ZW1TaXplO2ZvcihsZXQgcj0wLGk9dGhpcy5pdGVtU2l6ZTtyPGk7cisrKXRoaXMuYXJyYXlbdCtyXT1lLmFycmF5W24rcl07cmV0dXJuIHRoaXN9LGNvcHlBcnJheTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5hcnJheS5zZXQodCksdGhpc30sY29weUNvbG9yc0FycmF5OmZ1bmN0aW9uKHQpe2NvbnN0IGU9dGhpcy5hcnJheTtsZXQgbj0wO2ZvcihsZXQgcj0wLGk9dC5sZW5ndGg7cjxpO3IrKyl7bGV0IGk9dFtyXTt2b2lkIDA9PT1pJiYoY29uc29sZS53YXJuKFwiVEhSRUUuQnVmZmVyQXR0cmlidXRlLmNvcHlDb2xvcnNBcnJheSgpOiBjb2xvciBpcyB1bmRlZmluZWRcIixyKSxpPW5ldyB5aSksZVtuKytdPWkucixlW24rK109aS5nLGVbbisrXT1pLmJ9cmV0dXJuIHRoaXN9LGNvcHlWZWN0b3Iyc0FycmF5OmZ1bmN0aW9uKHQpe2NvbnN0IGU9dGhpcy5hcnJheTtsZXQgbj0wO2ZvcihsZXQgcj0wLGk9dC5sZW5ndGg7cjxpO3IrKyl7bGV0IGk9dFtyXTt2b2lkIDA9PT1pJiYoY29uc29sZS53YXJuKFwiVEhSRUUuQnVmZmVyQXR0cmlidXRlLmNvcHlWZWN0b3Iyc0FycmF5KCk6IHZlY3RvciBpcyB1bmRlZmluZWRcIixyKSxpPW5ldyBHbiksZVtuKytdPWkueCxlW24rK109aS55fXJldHVybiB0aGlzfSxjb3B5VmVjdG9yM3NBcnJheTpmdW5jdGlvbih0KXtjb25zdCBlPXRoaXMuYXJyYXk7bGV0IG49MDtmb3IobGV0IHI9MCxpPXQubGVuZ3RoO3I8aTtyKyspe2xldCBpPXRbcl07dm9pZCAwPT09aSYmKGNvbnNvbGUud2FybihcIlRIUkVFLkJ1ZmZlckF0dHJpYnV0ZS5jb3B5VmVjdG9yM3NBcnJheSgpOiB2ZWN0b3IgaXMgdW5kZWZpbmVkXCIsciksaT1uZXcgS24pLGVbbisrXT1pLngsZVtuKytdPWkueSxlW24rK109aS56fXJldHVybiB0aGlzfSxjb3B5VmVjdG9yNHNBcnJheTpmdW5jdGlvbih0KXtjb25zdCBlPXRoaXMuYXJyYXk7bGV0IG49MDtmb3IobGV0IHI9MCxpPXQubGVuZ3RoO3I8aTtyKyspe2xldCBpPXRbcl07dm9pZCAwPT09aSYmKGNvbnNvbGUud2FybihcIlRIUkVFLkJ1ZmZlckF0dHJpYnV0ZS5jb3B5VmVjdG9yNHNBcnJheSgpOiB2ZWN0b3IgaXMgdW5kZWZpbmVkXCIsciksaT1uZXcgcW4pLGVbbisrXT1pLngsZVtuKytdPWkueSxlW24rK109aS56LGVbbisrXT1pLnd9cmV0dXJuIHRoaXN9LGFwcGx5TWF0cml4MzpmdW5jdGlvbih0KXtpZigyPT09dGhpcy5pdGVtU2l6ZSlmb3IobGV0IGU9MCxuPXRoaXMuY291bnQ7ZTxuO2UrKylTaS5mcm9tQnVmZmVyQXR0cmlidXRlKHRoaXMsZSksU2kuYXBwbHlNYXRyaXgzKHQpLHRoaXMuc2V0WFkoZSxTaS54LFNpLnkpO2Vsc2UgaWYoMz09PXRoaXMuaXRlbVNpemUpZm9yKGxldCBlPTAsbj10aGlzLmNvdW50O2U8bjtlKyspTWkuZnJvbUJ1ZmZlckF0dHJpYnV0ZSh0aGlzLGUpLE1pLmFwcGx5TWF0cml4Myh0KSx0aGlzLnNldFhZWihlLE1pLngsTWkueSxNaS56KTtyZXR1cm4gdGhpc30sYXBwbHlNYXRyaXg0OmZ1bmN0aW9uKHQpe2ZvcihsZXQgZT0wLG49dGhpcy5jb3VudDtlPG47ZSsrKU1pLng9dGhpcy5nZXRYKGUpLE1pLnk9dGhpcy5nZXRZKGUpLE1pLno9dGhpcy5nZXRaKGUpLE1pLmFwcGx5TWF0cml4NCh0KSx0aGlzLnNldFhZWihlLE1pLngsTWkueSxNaS56KTtyZXR1cm4gdGhpc30sYXBwbHlOb3JtYWxNYXRyaXg6ZnVuY3Rpb24odCl7Zm9yKGxldCBlPTAsbj10aGlzLmNvdW50O2U8bjtlKyspTWkueD10aGlzLmdldFgoZSksTWkueT10aGlzLmdldFkoZSksTWkuej10aGlzLmdldFooZSksTWkuYXBwbHlOb3JtYWxNYXRyaXgodCksdGhpcy5zZXRYWVooZSxNaS54LE1pLnksTWkueik7cmV0dXJuIHRoaXN9LHRyYW5zZm9ybURpcmVjdGlvbjpmdW5jdGlvbih0KXtmb3IobGV0IGU9MCxuPXRoaXMuY291bnQ7ZTxuO2UrKylNaS54PXRoaXMuZ2V0WChlKSxNaS55PXRoaXMuZ2V0WShlKSxNaS56PXRoaXMuZ2V0WihlKSxNaS50cmFuc2Zvcm1EaXJlY3Rpb24odCksdGhpcy5zZXRYWVooZSxNaS54LE1pLnksTWkueik7cmV0dXJuIHRoaXN9LHNldDpmdW5jdGlvbih0LGU9MCl7cmV0dXJuIHRoaXMuYXJyYXkuc2V0KHQsZSksdGhpc30sZ2V0WDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5hcnJheVt0KnRoaXMuaXRlbVNpemVdfSxzZXRYOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuYXJyYXlbdCp0aGlzLml0ZW1TaXplXT1lLHRoaXN9LGdldFk6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuYXJyYXlbdCp0aGlzLml0ZW1TaXplKzFdfSxzZXRZOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuYXJyYXlbdCp0aGlzLml0ZW1TaXplKzFdPWUsdGhpc30sZ2V0WjpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5hcnJheVt0KnRoaXMuaXRlbVNpemUrMl19LHNldFo6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5hcnJheVt0KnRoaXMuaXRlbVNpemUrMl09ZSx0aGlzfSxnZXRXOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmFycmF5W3QqdGhpcy5pdGVtU2l6ZSszXX0sc2V0VzpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmFycmF5W3QqdGhpcy5pdGVtU2l6ZSszXT1lLHRoaXN9LHNldFhZOmZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdCo9dGhpcy5pdGVtU2l6ZSx0aGlzLmFycmF5W3QrMF09ZSx0aGlzLmFycmF5W3QrMV09bix0aGlzfSxzZXRYWVo6ZnVuY3Rpb24odCxlLG4scil7cmV0dXJuIHQqPXRoaXMuaXRlbVNpemUsdGhpcy5hcnJheVt0KzBdPWUsdGhpcy5hcnJheVt0KzFdPW4sdGhpcy5hcnJheVt0KzJdPXIsdGhpc30sc2V0WFlaVzpmdW5jdGlvbih0LGUsbixyLGkpe3JldHVybiB0Kj10aGlzLml0ZW1TaXplLHRoaXMuYXJyYXlbdCswXT1lLHRoaXMuYXJyYXlbdCsxXT1uLHRoaXMuYXJyYXlbdCsyXT1yLHRoaXMuYXJyYXlbdCszXT1pLHRoaXN9LG9uVXBsb2FkOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm9uVXBsb2FkQ2FsbGJhY2s9dCx0aGlzfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLmFycmF5LHRoaXMuaXRlbVNpemUpLmNvcHkodGhpcyl9LHRvSlNPTjpmdW5jdGlvbigpe3JldHVybntpdGVtU2l6ZTp0aGlzLml0ZW1TaXplLHR5cGU6dGhpcy5hcnJheS5jb25zdHJ1Y3Rvci5uYW1lLGFycmF5OkFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRoaXMuYXJyYXkpLG5vcm1hbGl6ZWQ6dGhpcy5ub3JtYWxpemVkfX19KSxFaS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUaS5wcm90b3R5cGUpLEVpLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1FaSxBaS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUaS5wcm90b3R5cGUpLEFpLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1BaSxMaS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUaS5wcm90b3R5cGUpLExpLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1MaSxSaS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUaS5wcm90b3R5cGUpLFJpLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1SaSxQaS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUaS5wcm90b3R5cGUpLFBpLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1QaSxDaS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUaS5wcm90b3R5cGUpLENpLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1DaSxJaS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUaS5wcm90b3R5cGUpLElpLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1JaSxPaS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUaS5wcm90b3R5cGUpLE9pLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1PaSxPaS5wcm90b3R5cGUuaXNGbG9hdDE2QnVmZmVyQXR0cmlidXRlPSEwLE5pLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRpLnByb3RvdHlwZSksTmkucHJvdG90eXBlLmNvbnN0cnVjdG9yPU5pLERpLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRpLnByb3RvdHlwZSksRGkucHJvdG90eXBlLmNvbnN0cnVjdG9yPURpO2NsYXNzIEJpe2NvbnN0cnVjdG9yKCl7dGhpcy52ZXJ0aWNlcz1bXSx0aGlzLm5vcm1hbHM9W10sdGhpcy5jb2xvcnM9W10sdGhpcy51dnM9W10sdGhpcy51dnMyPVtdLHRoaXMuZ3JvdXBzPVtdLHRoaXMubW9ycGhUYXJnZXRzPXt9LHRoaXMuc2tpbldlaWdodHM9W10sdGhpcy5za2luSW5kaWNlcz1bXSx0aGlzLmJvdW5kaW5nQm94PW51bGwsdGhpcy5ib3VuZGluZ1NwaGVyZT1udWxsLHRoaXMudmVydGljZXNOZWVkVXBkYXRlPSExLHRoaXMubm9ybWFsc05lZWRVcGRhdGU9ITEsdGhpcy5jb2xvcnNOZWVkVXBkYXRlPSExLHRoaXMudXZzTmVlZFVwZGF0ZT0hMSx0aGlzLmdyb3Vwc05lZWRVcGRhdGU9ITF9Y29tcHV0ZUdyb3Vwcyh0KXtjb25zdCBlPVtdO2xldCBuLHIsaT12b2lkIDA7Y29uc3Qgbz10LmZhY2VzO2ZvcihyPTA7cjxvLmxlbmd0aDtyKyspe2NvbnN0IHQ9b1tyXTt0Lm1hdGVyaWFsSW5kZXghPT1pJiYoaT10Lm1hdGVyaWFsSW5kZXgsdm9pZCAwIT09biYmKG4uY291bnQ9MypyLW4uc3RhcnQsZS5wdXNoKG4pKSxuPXtzdGFydDozKnIsbWF0ZXJpYWxJbmRleDppfSl9dm9pZCAwIT09biYmKG4uY291bnQ9MypyLW4uc3RhcnQsZS5wdXNoKG4pKSx0aGlzLmdyb3Vwcz1lfWZyb21HZW9tZXRyeSh0KXtjb25zdCBlPXQuZmFjZXMsbj10LnZlcnRpY2VzLHI9dC5mYWNlVmVydGV4VXZzLGk9clswXSYmclswXS5sZW5ndGg+MCxvPXJbMV0mJnJbMV0ubGVuZ3RoPjAsYT10Lm1vcnBoVGFyZ2V0cyxzPWEubGVuZ3RoO2xldCBjO2lmKHM+MCl7Yz1bXTtmb3IobGV0IHQ9MDt0PHM7dCsrKWNbdF09e25hbWU6YVt0XS5uYW1lLGRhdGE6W119O3RoaXMubW9ycGhUYXJnZXRzLnBvc2l0aW9uPWN9Y29uc3QgbD10Lm1vcnBoTm9ybWFscyx1PWwubGVuZ3RoO2xldCBoO2lmKHU+MCl7aD1bXTtmb3IobGV0IHQ9MDt0PHU7dCsrKWhbdF09e25hbWU6bFt0XS5uYW1lLGRhdGE6W119O3RoaXMubW9ycGhUYXJnZXRzLm5vcm1hbD1ofWNvbnN0IGQ9dC5za2luSW5kaWNlcyxwPXQuc2tpbldlaWdodHMsZj1kLmxlbmd0aD09PW4ubGVuZ3RoLG09cC5sZW5ndGg9PT1uLmxlbmd0aDtuLmxlbmd0aD4wJiYwPT09ZS5sZW5ndGgmJmNvbnNvbGUuZXJyb3IoXCJUSFJFRS5EaXJlY3RHZW9tZXRyeTogRmFjZWxlc3MgZ2VvbWV0cmllcyBhcmUgbm90IHN1cHBvcnRlZC5cIik7Zm9yKGxldCB0PTA7dDxlLmxlbmd0aDt0Kyspe2NvbnN0IGc9ZVt0XTt0aGlzLnZlcnRpY2VzLnB1c2gobltnLmFdLG5bZy5iXSxuW2cuY10pO2NvbnN0IHY9Zy52ZXJ0ZXhOb3JtYWxzO2lmKDM9PT12Lmxlbmd0aCl0aGlzLm5vcm1hbHMucHVzaCh2WzBdLHZbMV0sdlsyXSk7ZWxzZXtjb25zdCB0PWcubm9ybWFsO3RoaXMubm9ybWFscy5wdXNoKHQsdCx0KX1jb25zdCB5PWcudmVydGV4Q29sb3JzO2lmKDM9PT15Lmxlbmd0aCl0aGlzLmNvbG9ycy5wdXNoKHlbMF0seVsxXSx5WzJdKTtlbHNle2NvbnN0IHQ9Zy5jb2xvcjt0aGlzLmNvbG9ycy5wdXNoKHQsdCx0KX1pZighMD09PWkpe2NvbnN0IGU9clswXVt0XTt2b2lkIDAhPT1lP3RoaXMudXZzLnB1c2goZVswXSxlWzFdLGVbMl0pOihjb25zb2xlLndhcm4oXCJUSFJFRS5EaXJlY3RHZW9tZXRyeS5mcm9tR2VvbWV0cnkoKTogVW5kZWZpbmVkIHZlcnRleFV2IFwiLHQpLHRoaXMudXZzLnB1c2gobmV3IEduLG5ldyBHbixuZXcgR24pKX1pZighMD09PW8pe2NvbnN0IGU9clsxXVt0XTt2b2lkIDAhPT1lP3RoaXMudXZzMi5wdXNoKGVbMF0sZVsxXSxlWzJdKTooY29uc29sZS53YXJuKFwiVEhSRUUuRGlyZWN0R2VvbWV0cnkuZnJvbUdlb21ldHJ5KCk6IFVuZGVmaW5lZCB2ZXJ0ZXhVdjIgXCIsdCksdGhpcy51dnMyLnB1c2gobmV3IEduLG5ldyBHbixuZXcgR24pKX1mb3IobGV0IHQ9MDt0PHM7dCsrKXtjb25zdCBlPWFbdF0udmVydGljZXM7Y1t0XS5kYXRhLnB1c2goZVtnLmFdLGVbZy5iXSxlW2cuY10pfWZvcihsZXQgZT0wO2U8dTtlKyspe2NvbnN0IG49bFtlXS52ZXJ0ZXhOb3JtYWxzW3RdO2hbZV0uZGF0YS5wdXNoKG4uYSxuLmIsbi5jKX1mJiZ0aGlzLnNraW5JbmRpY2VzLnB1c2goZFtnLmFdLGRbZy5iXSxkW2cuY10pLG0mJnRoaXMuc2tpbldlaWdodHMucHVzaChwW2cuYV0scFtnLmJdLHBbZy5jXSl9cmV0dXJuIHRoaXMuY29tcHV0ZUdyb3Vwcyh0KSx0aGlzLnZlcnRpY2VzTmVlZFVwZGF0ZT10LnZlcnRpY2VzTmVlZFVwZGF0ZSx0aGlzLm5vcm1hbHNOZWVkVXBkYXRlPXQubm9ybWFsc05lZWRVcGRhdGUsdGhpcy5jb2xvcnNOZWVkVXBkYXRlPXQuY29sb3JzTmVlZFVwZGF0ZSx0aGlzLnV2c05lZWRVcGRhdGU9dC51dnNOZWVkVXBkYXRlLHRoaXMuZ3JvdXBzTmVlZFVwZGF0ZT10Lmdyb3Vwc05lZWRVcGRhdGUsbnVsbCE9PXQuYm91bmRpbmdTcGhlcmUmJih0aGlzLmJvdW5kaW5nU3BoZXJlPXQuYm91bmRpbmdTcGhlcmUuY2xvbmUoKSksbnVsbCE9PXQuYm91bmRpbmdCb3gmJih0aGlzLmJvdW5kaW5nQm94PXQuYm91bmRpbmdCb3guY2xvbmUoKSksdGhpc319ZnVuY3Rpb24gRmkodCl7aWYoMD09PXQubGVuZ3RoKXJldHVybi0xLzA7bGV0IGU9dFswXTtmb3IobGV0IG49MSxyPXQubGVuZ3RoO248cjsrK24pdFtuXT5lJiYoZT10W25dKTtyZXR1cm4gZX1jb25zdCBVaT17SW50OEFycmF5OkludDhBcnJheSxVaW50OEFycmF5OlVpbnQ4QXJyYXksVWludDhDbGFtcGVkQXJyYXk6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFVpbnQ4Q2xhbXBlZEFycmF5P1VpbnQ4Q2xhbXBlZEFycmF5OlVpbnQ4QXJyYXksSW50MTZBcnJheTpJbnQxNkFycmF5LFVpbnQxNkFycmF5OlVpbnQxNkFycmF5LEludDMyQXJyYXk6SW50MzJBcnJheSxVaW50MzJBcnJheTpVaW50MzJBcnJheSxGbG9hdDMyQXJyYXk6RmxvYXQzMkFycmF5LEZsb2F0NjRBcnJheTpGbG9hdDY0QXJyYXl9O2Z1bmN0aW9uIHppKHQsZSl7cmV0dXJuIG5ldyBVaVt0XShlKX1sZXQgR2k9MTtjb25zdCBIaT1uZXcgVHIsa2k9bmV3IEpyLFZpPW5ldyBLbixqaT1uZXcgdHIsV2k9bmV3IHRyLFhpPW5ldyBLbjtmdW5jdGlvbiBxaSgpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiaWRcIix7dmFsdWU6R2krPTJ9KSx0aGlzLnV1aWQ9em4uZ2VuZXJhdGVVVUlEKCksdGhpcy5uYW1lPVwiXCIsdGhpcy50eXBlPVwiQnVmZmVyR2VvbWV0cnlcIix0aGlzLmluZGV4PW51bGwsdGhpcy5hdHRyaWJ1dGVzPXt9LHRoaXMubW9ycGhBdHRyaWJ1dGVzPXt9LHRoaXMubW9ycGhUYXJnZXRzUmVsYXRpdmU9ITEsdGhpcy5ncm91cHM9W10sdGhpcy5ib3VuZGluZ0JveD1udWxsLHRoaXMuYm91bmRpbmdTcGhlcmU9bnVsbCx0aGlzLmRyYXdSYW5nZT17c3RhcnQ6MCxjb3VudDoxLzB9LHRoaXMudXNlckRhdGE9e319cWkucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShCbi5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpxaSxpc0J1ZmZlckdlb21ldHJ5OiEwLGdldEluZGV4OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW5kZXh9LHNldEluZGV4OmZ1bmN0aW9uKHQpe3JldHVybiBBcnJheS5pc0FycmF5KHQpP3RoaXMuaW5kZXg9bmV3KEZpKHQpPjY1NTM1P0lpOlBpKSh0LDEpOnRoaXMuaW5kZXg9dCx0aGlzfSxnZXRBdHRyaWJ1dGU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuYXR0cmlidXRlc1t0XX0sc2V0QXR0cmlidXRlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuYXR0cmlidXRlc1t0XT1lLHRoaXN9LGRlbGV0ZUF0dHJpYnV0ZTpmdW5jdGlvbih0KXtyZXR1cm4gZGVsZXRlIHRoaXMuYXR0cmlidXRlc1t0XSx0aGlzfSxoYXNBdHRyaWJ1dGU6ZnVuY3Rpb24odCl7cmV0dXJuIHZvaWQgMCE9PXRoaXMuYXR0cmlidXRlc1t0XX0sYWRkR3JvdXA6ZnVuY3Rpb24odCxlLG49MCl7dGhpcy5ncm91cHMucHVzaCh7c3RhcnQ6dCxjb3VudDplLG1hdGVyaWFsSW5kZXg6bn0pfSxjbGVhckdyb3VwczpmdW5jdGlvbigpe3RoaXMuZ3JvdXBzPVtdfSxzZXREcmF3UmFuZ2U6ZnVuY3Rpb24odCxlKXt0aGlzLmRyYXdSYW5nZS5zdGFydD10LHRoaXMuZHJhd1JhbmdlLmNvdW50PWV9LGFwcGx5TWF0cml4NDpmdW5jdGlvbih0KXtjb25zdCBlPXRoaXMuYXR0cmlidXRlcy5wb3NpdGlvbjt2b2lkIDAhPT1lJiYoZS5hcHBseU1hdHJpeDQodCksZS5uZWVkc1VwZGF0ZT0hMCk7Y29uc3Qgbj10aGlzLmF0dHJpYnV0ZXMubm9ybWFsO2lmKHZvaWQgMCE9PW4pe2NvbnN0IGU9KG5ldyBIbikuZ2V0Tm9ybWFsTWF0cml4KHQpO24uYXBwbHlOb3JtYWxNYXRyaXgoZSksbi5uZWVkc1VwZGF0ZT0hMH1jb25zdCByPXRoaXMuYXR0cmlidXRlcy50YW5nZW50O3JldHVybiB2b2lkIDAhPT1yJiYoci50cmFuc2Zvcm1EaXJlY3Rpb24odCksci5uZWVkc1VwZGF0ZT0hMCksbnVsbCE9PXRoaXMuYm91bmRpbmdCb3gmJnRoaXMuY29tcHV0ZUJvdW5kaW5nQm94KCksbnVsbCE9PXRoaXMuYm91bmRpbmdTcGhlcmUmJnRoaXMuY29tcHV0ZUJvdW5kaW5nU3BoZXJlKCksdGhpc30scm90YXRlWDpmdW5jdGlvbih0KXtyZXR1cm4gSGkubWFrZVJvdGF0aW9uWCh0KSx0aGlzLmFwcGx5TWF0cml4NChIaSksdGhpc30scm90YXRlWTpmdW5jdGlvbih0KXtyZXR1cm4gSGkubWFrZVJvdGF0aW9uWSh0KSx0aGlzLmFwcGx5TWF0cml4NChIaSksdGhpc30scm90YXRlWjpmdW5jdGlvbih0KXtyZXR1cm4gSGkubWFrZVJvdGF0aW9uWih0KSx0aGlzLmFwcGx5TWF0cml4NChIaSksdGhpc30sdHJhbnNsYXRlOmZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gSGkubWFrZVRyYW5zbGF0aW9uKHQsZSxuKSx0aGlzLmFwcGx5TWF0cml4NChIaSksdGhpc30sc2NhbGU6ZnVuY3Rpb24odCxlLG4pe3JldHVybiBIaS5tYWtlU2NhbGUodCxlLG4pLHRoaXMuYXBwbHlNYXRyaXg0KEhpKSx0aGlzfSxsb29rQXQ6ZnVuY3Rpb24odCl7cmV0dXJuIGtpLmxvb2tBdCh0KSxraS51cGRhdGVNYXRyaXgoKSx0aGlzLmFwcGx5TWF0cml4NChraS5tYXRyaXgpLHRoaXN9LGNlbnRlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbXB1dGVCb3VuZGluZ0JveCgpLHRoaXMuYm91bmRpbmdCb3guZ2V0Q2VudGVyKFZpKS5uZWdhdGUoKSx0aGlzLnRyYW5zbGF0ZShWaS54LFZpLnksVmkueiksdGhpc30sc2V0RnJvbU9iamVjdDpmdW5jdGlvbih0KXtjb25zdCBlPXQuZ2VvbWV0cnk7aWYodC5pc1BvaW50c3x8dC5pc0xpbmUpe2NvbnN0IHQ9bmV3IE5pKDMqZS52ZXJ0aWNlcy5sZW5ndGgsMyksbj1uZXcgTmkoMyplLmNvbG9ycy5sZW5ndGgsMyk7aWYodGhpcy5zZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLHQuY29weVZlY3RvcjNzQXJyYXkoZS52ZXJ0aWNlcykpLHRoaXMuc2V0QXR0cmlidXRlKFwiY29sb3JcIixuLmNvcHlDb2xvcnNBcnJheShlLmNvbG9ycykpLGUubGluZURpc3RhbmNlcyYmZS5saW5lRGlzdGFuY2VzLmxlbmd0aD09PWUudmVydGljZXMubGVuZ3RoKXtjb25zdCB0PW5ldyBOaShlLmxpbmVEaXN0YW5jZXMubGVuZ3RoLDEpO3RoaXMuc2V0QXR0cmlidXRlKFwibGluZURpc3RhbmNlXCIsdC5jb3B5QXJyYXkoZS5saW5lRGlzdGFuY2VzKSl9bnVsbCE9PWUuYm91bmRpbmdTcGhlcmUmJih0aGlzLmJvdW5kaW5nU3BoZXJlPWUuYm91bmRpbmdTcGhlcmUuY2xvbmUoKSksbnVsbCE9PWUuYm91bmRpbmdCb3gmJih0aGlzLmJvdW5kaW5nQm94PWUuYm91bmRpbmdCb3guY2xvbmUoKSl9ZWxzZSB0LmlzTWVzaCYmZSYmZS5pc0dlb21ldHJ5JiZ0aGlzLmZyb21HZW9tZXRyeShlKTtyZXR1cm4gdGhpc30sc2V0RnJvbVBvaW50czpmdW5jdGlvbih0KXtjb25zdCBlPVtdO2ZvcihsZXQgbj0wLHI9dC5sZW5ndGg7bjxyO24rKyl7Y29uc3Qgcj10W25dO2UucHVzaChyLngsci55LHIuenx8MCl9cmV0dXJuIHRoaXMuc2V0QXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgTmkoZSwzKSksdGhpc30sdXBkYXRlRnJvbU9iamVjdDpmdW5jdGlvbih0KXtsZXQgZT10Lmdlb21ldHJ5O2lmKHQuaXNNZXNoKXtsZXQgdD1lLl9fZGlyZWN0R2VvbWV0cnk7aWYoITA9PT1lLmVsZW1lbnRzTmVlZFVwZGF0ZSYmKHQ9dm9pZCAwLGUuZWxlbWVudHNOZWVkVXBkYXRlPSExKSx2b2lkIDA9PT10KXJldHVybiB0aGlzLmZyb21HZW9tZXRyeShlKTt0LnZlcnRpY2VzTmVlZFVwZGF0ZT1lLnZlcnRpY2VzTmVlZFVwZGF0ZSx0Lm5vcm1hbHNOZWVkVXBkYXRlPWUubm9ybWFsc05lZWRVcGRhdGUsdC5jb2xvcnNOZWVkVXBkYXRlPWUuY29sb3JzTmVlZFVwZGF0ZSx0LnV2c05lZWRVcGRhdGU9ZS51dnNOZWVkVXBkYXRlLHQuZ3JvdXBzTmVlZFVwZGF0ZT1lLmdyb3Vwc05lZWRVcGRhdGUsZS52ZXJ0aWNlc05lZWRVcGRhdGU9ITEsZS5ub3JtYWxzTmVlZFVwZGF0ZT0hMSxlLmNvbG9yc05lZWRVcGRhdGU9ITEsZS51dnNOZWVkVXBkYXRlPSExLGUuZ3JvdXBzTmVlZFVwZGF0ZT0hMSxlPXR9aWYoITA9PT1lLnZlcnRpY2VzTmVlZFVwZGF0ZSl7Y29uc3QgdD10aGlzLmF0dHJpYnV0ZXMucG9zaXRpb247dm9pZCAwIT09dCYmKHQuY29weVZlY3RvcjNzQXJyYXkoZS52ZXJ0aWNlcyksdC5uZWVkc1VwZGF0ZT0hMCksZS52ZXJ0aWNlc05lZWRVcGRhdGU9ITF9aWYoITA9PT1lLm5vcm1hbHNOZWVkVXBkYXRlKXtjb25zdCB0PXRoaXMuYXR0cmlidXRlcy5ub3JtYWw7dm9pZCAwIT09dCYmKHQuY29weVZlY3RvcjNzQXJyYXkoZS5ub3JtYWxzKSx0Lm5lZWRzVXBkYXRlPSEwKSxlLm5vcm1hbHNOZWVkVXBkYXRlPSExfWlmKCEwPT09ZS5jb2xvcnNOZWVkVXBkYXRlKXtjb25zdCB0PXRoaXMuYXR0cmlidXRlcy5jb2xvcjt2b2lkIDAhPT10JiYodC5jb3B5Q29sb3JzQXJyYXkoZS5jb2xvcnMpLHQubmVlZHNVcGRhdGU9ITApLGUuY29sb3JzTmVlZFVwZGF0ZT0hMX1pZihlLnV2c05lZWRVcGRhdGUpe2NvbnN0IHQ9dGhpcy5hdHRyaWJ1dGVzLnV2O3ZvaWQgMCE9PXQmJih0LmNvcHlWZWN0b3Iyc0FycmF5KGUudXZzKSx0Lm5lZWRzVXBkYXRlPSEwKSxlLnV2c05lZWRVcGRhdGU9ITF9aWYoZS5saW5lRGlzdGFuY2VzTmVlZFVwZGF0ZSl7Y29uc3QgdD10aGlzLmF0dHJpYnV0ZXMubGluZURpc3RhbmNlO3ZvaWQgMCE9PXQmJih0LmNvcHlBcnJheShlLmxpbmVEaXN0YW5jZXMpLHQubmVlZHNVcGRhdGU9ITApLGUubGluZURpc3RhbmNlc05lZWRVcGRhdGU9ITF9cmV0dXJuIGUuZ3JvdXBzTmVlZFVwZGF0ZSYmKGUuY29tcHV0ZUdyb3Vwcyh0Lmdlb21ldHJ5KSx0aGlzLmdyb3Vwcz1lLmdyb3VwcyxlLmdyb3Vwc05lZWRVcGRhdGU9ITEpLHRoaXN9LGZyb21HZW9tZXRyeTpmdW5jdGlvbih0KXtyZXR1cm4gdC5fX2RpcmVjdEdlb21ldHJ5PShuZXcgQmkpLmZyb21HZW9tZXRyeSh0KSx0aGlzLmZyb21EaXJlY3RHZW9tZXRyeSh0Ll9fZGlyZWN0R2VvbWV0cnkpfSxmcm9tRGlyZWN0R2VvbWV0cnk6ZnVuY3Rpb24odCl7Y29uc3QgZT1uZXcgRmxvYXQzMkFycmF5KDMqdC52ZXJ0aWNlcy5sZW5ndGgpO2lmKHRoaXMuc2V0QXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgVGkoZSwzKS5jb3B5VmVjdG9yM3NBcnJheSh0LnZlcnRpY2VzKSksdC5ub3JtYWxzLmxlbmd0aD4wKXtjb25zdCBlPW5ldyBGbG9hdDMyQXJyYXkoMyp0Lm5vcm1hbHMubGVuZ3RoKTt0aGlzLnNldEF0dHJpYnV0ZShcIm5vcm1hbFwiLG5ldyBUaShlLDMpLmNvcHlWZWN0b3Izc0FycmF5KHQubm9ybWFscykpfWlmKHQuY29sb3JzLmxlbmd0aD4wKXtjb25zdCBlPW5ldyBGbG9hdDMyQXJyYXkoMyp0LmNvbG9ycy5sZW5ndGgpO3RoaXMuc2V0QXR0cmlidXRlKFwiY29sb3JcIixuZXcgVGkoZSwzKS5jb3B5Q29sb3JzQXJyYXkodC5jb2xvcnMpKX1pZih0LnV2cy5sZW5ndGg+MCl7Y29uc3QgZT1uZXcgRmxvYXQzMkFycmF5KDIqdC51dnMubGVuZ3RoKTt0aGlzLnNldEF0dHJpYnV0ZShcInV2XCIsbmV3IFRpKGUsMikuY29weVZlY3RvcjJzQXJyYXkodC51dnMpKX1pZih0LnV2czIubGVuZ3RoPjApe2NvbnN0IGU9bmV3IEZsb2F0MzJBcnJheSgyKnQudXZzMi5sZW5ndGgpO3RoaXMuc2V0QXR0cmlidXRlKFwidXYyXCIsbmV3IFRpKGUsMikuY29weVZlY3RvcjJzQXJyYXkodC51dnMyKSl9dGhpcy5ncm91cHM9dC5ncm91cHM7Zm9yKGNvbnN0IGUgaW4gdC5tb3JwaFRhcmdldHMpe2NvbnN0IG49W10scj10Lm1vcnBoVGFyZ2V0c1tlXTtmb3IobGV0IHQ9MCxlPXIubGVuZ3RoO3Q8ZTt0Kyspe2NvbnN0IGU9clt0XSxpPW5ldyBOaSgzKmUuZGF0YS5sZW5ndGgsMyk7aS5uYW1lPWUubmFtZSxuLnB1c2goaS5jb3B5VmVjdG9yM3NBcnJheShlLmRhdGEpKX10aGlzLm1vcnBoQXR0cmlidXRlc1tlXT1ufWlmKHQuc2tpbkluZGljZXMubGVuZ3RoPjApe2NvbnN0IGU9bmV3IE5pKDQqdC5za2luSW5kaWNlcy5sZW5ndGgsNCk7dGhpcy5zZXRBdHRyaWJ1dGUoXCJza2luSW5kZXhcIixlLmNvcHlWZWN0b3I0c0FycmF5KHQuc2tpbkluZGljZXMpKX1pZih0LnNraW5XZWlnaHRzLmxlbmd0aD4wKXtjb25zdCBlPW5ldyBOaSg0KnQuc2tpbldlaWdodHMubGVuZ3RoLDQpO3RoaXMuc2V0QXR0cmlidXRlKFwic2tpbldlaWdodFwiLGUuY29weVZlY3RvcjRzQXJyYXkodC5za2luV2VpZ2h0cykpfXJldHVybiBudWxsIT09dC5ib3VuZGluZ1NwaGVyZSYmKHRoaXMuYm91bmRpbmdTcGhlcmU9dC5ib3VuZGluZ1NwaGVyZS5jbG9uZSgpKSxudWxsIT09dC5ib3VuZGluZ0JveCYmKHRoaXMuYm91bmRpbmdCb3g9dC5ib3VuZGluZ0JveC5jbG9uZSgpKSx0aGlzfSxjb21wdXRlQm91bmRpbmdCb3g6ZnVuY3Rpb24oKXtudWxsPT09dGhpcy5ib3VuZGluZ0JveCYmKHRoaXMuYm91bmRpbmdCb3g9bmV3IHRyKTtjb25zdCB0PXRoaXMuYXR0cmlidXRlcy5wb3NpdGlvbixlPXRoaXMubW9ycGhBdHRyaWJ1dGVzLnBvc2l0aW9uO2lmKHQmJnQuaXNHTEJ1ZmZlckF0dHJpYnV0ZSlyZXR1cm4gY29uc29sZS5lcnJvcignVEhSRUUuQnVmZmVyR2VvbWV0cnkuY29tcHV0ZUJvdW5kaW5nQm94KCk6IEdMQnVmZmVyQXR0cmlidXRlIHJlcXVpcmVzIGEgbWFudWFsIGJvdW5kaW5nIGJveC4gQWx0ZXJuYXRpdmVseSBzZXQgXCJtZXNoLmZydXN0dW1DdWxsZWRcIiB0byBcImZhbHNlXCIuJyx0aGlzKSx2b2lkIHRoaXMuYm91bmRpbmdCb3guc2V0KG5ldyBLbigtMS8wLC0xLzAsLTEvMCksbmV3IEtuKDEvMCwxLzAsMS8wKSk7aWYodm9pZCAwIT09dCl7aWYodGhpcy5ib3VuZGluZ0JveC5zZXRGcm9tQnVmZmVyQXR0cmlidXRlKHQpLGUpZm9yKGxldCB0PTAsbj1lLmxlbmd0aDt0PG47dCsrKXtjb25zdCBuPWVbdF07amkuc2V0RnJvbUJ1ZmZlckF0dHJpYnV0ZShuKSx0aGlzLm1vcnBoVGFyZ2V0c1JlbGF0aXZlPyhYaS5hZGRWZWN0b3JzKHRoaXMuYm91bmRpbmdCb3gubWluLGppLm1pbiksdGhpcy5ib3VuZGluZ0JveC5leHBhbmRCeVBvaW50KFhpKSxYaS5hZGRWZWN0b3JzKHRoaXMuYm91bmRpbmdCb3gubWF4LGppLm1heCksdGhpcy5ib3VuZGluZ0JveC5leHBhbmRCeVBvaW50KFhpKSk6KHRoaXMuYm91bmRpbmdCb3guZXhwYW5kQnlQb2ludChqaS5taW4pLHRoaXMuYm91bmRpbmdCb3guZXhwYW5kQnlQb2ludChqaS5tYXgpKX19ZWxzZSB0aGlzLmJvdW5kaW5nQm94Lm1ha2VFbXB0eSgpOyhpc05hTih0aGlzLmJvdW5kaW5nQm94Lm1pbi54KXx8aXNOYU4odGhpcy5ib3VuZGluZ0JveC5taW4ueSl8fGlzTmFOKHRoaXMuYm91bmRpbmdCb3gubWluLnopKSYmY29uc29sZS5lcnJvcignVEhSRUUuQnVmZmVyR2VvbWV0cnkuY29tcHV0ZUJvdW5kaW5nQm94KCk6IENvbXB1dGVkIG1pbi9tYXggaGF2ZSBOYU4gdmFsdWVzLiBUaGUgXCJwb3NpdGlvblwiIGF0dHJpYnV0ZSBpcyBsaWtlbHkgdG8gaGF2ZSBOYU4gdmFsdWVzLicsdGhpcyl9LGNvbXB1dGVCb3VuZGluZ1NwaGVyZTpmdW5jdGlvbigpe251bGw9PT10aGlzLmJvdW5kaW5nU3BoZXJlJiYodGhpcy5ib3VuZGluZ1NwaGVyZT1uZXcgZ3IpO2NvbnN0IHQ9dGhpcy5hdHRyaWJ1dGVzLnBvc2l0aW9uLGU9dGhpcy5tb3JwaEF0dHJpYnV0ZXMucG9zaXRpb247aWYodCYmdC5pc0dMQnVmZmVyQXR0cmlidXRlKXJldHVybiBjb25zb2xlLmVycm9yKCdUSFJFRS5CdWZmZXJHZW9tZXRyeS5jb21wdXRlQm91bmRpbmdTcGhlcmUoKTogR0xCdWZmZXJBdHRyaWJ1dGUgcmVxdWlyZXMgYSBtYW51YWwgYm91bmRpbmcgc3BoZXJlLiBBbHRlcm5hdGl2ZWx5IHNldCBcIm1lc2guZnJ1c3R1bUN1bGxlZFwiIHRvIFwiZmFsc2VcIi4nLHRoaXMpLHZvaWQgdGhpcy5ib3VuZGluZ1NwaGVyZS5zZXQobmV3IEtuLDEvMCk7aWYodCl7Y29uc3Qgbj10aGlzLmJvdW5kaW5nU3BoZXJlLmNlbnRlcjtpZihqaS5zZXRGcm9tQnVmZmVyQXR0cmlidXRlKHQpLGUpZm9yKGxldCB0PTAsbj1lLmxlbmd0aDt0PG47dCsrKXtjb25zdCBuPWVbdF07V2kuc2V0RnJvbUJ1ZmZlckF0dHJpYnV0ZShuKSx0aGlzLm1vcnBoVGFyZ2V0c1JlbGF0aXZlPyhYaS5hZGRWZWN0b3JzKGppLm1pbixXaS5taW4pLGppLmV4cGFuZEJ5UG9pbnQoWGkpLFhpLmFkZFZlY3RvcnMoamkubWF4LFdpLm1heCksamkuZXhwYW5kQnlQb2ludChYaSkpOihqaS5leHBhbmRCeVBvaW50KFdpLm1pbiksamkuZXhwYW5kQnlQb2ludChXaS5tYXgpKX1qaS5nZXRDZW50ZXIobik7bGV0IHI9MDtmb3IobGV0IGU9MCxpPXQuY291bnQ7ZTxpO2UrKylYaS5mcm9tQnVmZmVyQXR0cmlidXRlKHQsZSkscj1NYXRoLm1heChyLG4uZGlzdGFuY2VUb1NxdWFyZWQoWGkpKTtpZihlKWZvcihsZXQgaT0wLG89ZS5sZW5ndGg7aTxvO2krKyl7Y29uc3Qgbz1lW2ldLGE9dGhpcy5tb3JwaFRhcmdldHNSZWxhdGl2ZTtmb3IobGV0IGU9MCxpPW8uY291bnQ7ZTxpO2UrKylYaS5mcm9tQnVmZmVyQXR0cmlidXRlKG8sZSksYSYmKFZpLmZyb21CdWZmZXJBdHRyaWJ1dGUodCxlKSxYaS5hZGQoVmkpKSxyPU1hdGgubWF4KHIsbi5kaXN0YW5jZVRvU3F1YXJlZChYaSkpfXRoaXMuYm91bmRpbmdTcGhlcmUucmFkaXVzPU1hdGguc3FydChyKSxpc05hTih0aGlzLmJvdW5kaW5nU3BoZXJlLnJhZGl1cykmJmNvbnNvbGUuZXJyb3IoJ1RIUkVFLkJ1ZmZlckdlb21ldHJ5LmNvbXB1dGVCb3VuZGluZ1NwaGVyZSgpOiBDb21wdXRlZCByYWRpdXMgaXMgTmFOLiBUaGUgXCJwb3NpdGlvblwiIGF0dHJpYnV0ZSBpcyBsaWtlbHkgdG8gaGF2ZSBOYU4gdmFsdWVzLicsdGhpcyl9fSxjb21wdXRlRmFjZU5vcm1hbHM6ZnVuY3Rpb24oKXt9LGNvbXB1dGVWZXJ0ZXhOb3JtYWxzOmZ1bmN0aW9uKCl7Y29uc3QgdD10aGlzLmluZGV4LGU9dGhpcy5nZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiKTtpZih2b2lkIDAhPT1lKXtsZXQgbj10aGlzLmdldEF0dHJpYnV0ZShcIm5vcm1hbFwiKTtpZih2b2lkIDA9PT1uKW49bmV3IFRpKG5ldyBGbG9hdDMyQXJyYXkoMyplLmNvdW50KSwzKSx0aGlzLnNldEF0dHJpYnV0ZShcIm5vcm1hbFwiLG4pO2Vsc2UgZm9yKGxldCB0PTAsZT1uLmNvdW50O3Q8ZTt0Kyspbi5zZXRYWVoodCwwLDAsMCk7Y29uc3Qgcj1uZXcgS24saT1uZXcgS24sbz1uZXcgS24sYT1uZXcgS24scz1uZXcgS24sYz1uZXcgS24sbD1uZXcgS24sdT1uZXcgS247aWYodClmb3IobGV0IGg9MCxkPXQuY291bnQ7aDxkO2grPTMpe2NvbnN0IGQ9dC5nZXRYKGgrMCkscD10LmdldFgoaCsxKSxmPXQuZ2V0WChoKzIpO3IuZnJvbUJ1ZmZlckF0dHJpYnV0ZShlLGQpLGkuZnJvbUJ1ZmZlckF0dHJpYnV0ZShlLHApLG8uZnJvbUJ1ZmZlckF0dHJpYnV0ZShlLGYpLGwuc3ViVmVjdG9ycyhvLGkpLHUuc3ViVmVjdG9ycyhyLGkpLGwuY3Jvc3ModSksYS5mcm9tQnVmZmVyQXR0cmlidXRlKG4sZCkscy5mcm9tQnVmZmVyQXR0cmlidXRlKG4scCksYy5mcm9tQnVmZmVyQXR0cmlidXRlKG4sZiksYS5hZGQobCkscy5hZGQobCksYy5hZGQobCksbi5zZXRYWVooZCxhLngsYS55LGEueiksbi5zZXRYWVoocCxzLngscy55LHMueiksbi5zZXRYWVooZixjLngsYy55LGMueil9ZWxzZSBmb3IobGV0IHQ9MCxhPWUuY291bnQ7dDxhO3QrPTMpci5mcm9tQnVmZmVyQXR0cmlidXRlKGUsdCswKSxpLmZyb21CdWZmZXJBdHRyaWJ1dGUoZSx0KzEpLG8uZnJvbUJ1ZmZlckF0dHJpYnV0ZShlLHQrMiksbC5zdWJWZWN0b3JzKG8saSksdS5zdWJWZWN0b3JzKHIsaSksbC5jcm9zcyh1KSxuLnNldFhZWih0KzAsbC54LGwueSxsLnopLG4uc2V0WFlaKHQrMSxsLngsbC55LGwueiksbi5zZXRYWVoodCsyLGwueCxsLnksbC56KTt0aGlzLm5vcm1hbGl6ZU5vcm1hbHMoKSxuLm5lZWRzVXBkYXRlPSEwfX0sbWVyZ2U6ZnVuY3Rpb24odCxlKXtpZighdHx8IXQuaXNCdWZmZXJHZW9tZXRyeSlyZXR1cm4gdm9pZCBjb25zb2xlLmVycm9yKFwiVEhSRUUuQnVmZmVyR2VvbWV0cnkubWVyZ2UoKTogZ2VvbWV0cnkgbm90IGFuIGluc3RhbmNlIG9mIFRIUkVFLkJ1ZmZlckdlb21ldHJ5LlwiLHQpO3ZvaWQgMD09PWUmJihlPTAsY29uc29sZS53YXJuKFwiVEhSRUUuQnVmZmVyR2VvbWV0cnkubWVyZ2UoKTogT3ZlcndyaXRpbmcgb3JpZ2luYWwgZ2VvbWV0cnksIHN0YXJ0aW5nIGF0IG9mZnNldD0wLiBVc2UgQnVmZmVyR2VvbWV0cnlVdGlscy5tZXJnZUJ1ZmZlckdlb21ldHJpZXMoKSBmb3IgbG9zc2xlc3MgbWVyZ2UuXCIpKTtjb25zdCBuPXRoaXMuYXR0cmlidXRlcztmb3IoY29uc3QgciBpbiBuKXtpZih2b2lkIDA9PT10LmF0dHJpYnV0ZXNbcl0pY29udGludWU7Y29uc3QgaT1uW3JdLmFycmF5LG89dC5hdHRyaWJ1dGVzW3JdLGE9by5hcnJheSxzPW8uaXRlbVNpemUqZSxjPU1hdGgubWluKGEubGVuZ3RoLGkubGVuZ3RoLXMpO2ZvcihsZXQgdD0wLGU9czt0PGM7dCsrLGUrKylpW2VdPWFbdF19cmV0dXJuIHRoaXN9LG5vcm1hbGl6ZU5vcm1hbHM6ZnVuY3Rpb24oKXtjb25zdCB0PXRoaXMuYXR0cmlidXRlcy5ub3JtYWw7Zm9yKGxldCBlPTAsbj10LmNvdW50O2U8bjtlKyspWGkuZnJvbUJ1ZmZlckF0dHJpYnV0ZSh0LGUpLFhpLm5vcm1hbGl6ZSgpLHQuc2V0WFlaKGUsWGkueCxYaS55LFhpLnopfSx0b05vbkluZGV4ZWQ6ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Y29uc3Qgbj10LmFycmF5LHI9dC5pdGVtU2l6ZSxpPXQubm9ybWFsaXplZCxvPW5ldyBuLmNvbnN0cnVjdG9yKGUubGVuZ3RoKnIpO2xldCBhPTAscz0wO2ZvcihsZXQgdD0wLGk9ZS5sZW5ndGg7dDxpO3QrKyl7YT1lW3RdKnI7Zm9yKGxldCB0PTA7dDxyO3QrKylvW3MrK109blthKytdfXJldHVybiBuZXcgVGkobyxyLGkpfWlmKG51bGw9PT10aGlzLmluZGV4KXJldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5CdWZmZXJHZW9tZXRyeS50b05vbkluZGV4ZWQoKTogR2VvbWV0cnkgaXMgYWxyZWFkeSBub24taW5kZXhlZC5cIiksdGhpcztjb25zdCBlPW5ldyBxaSxuPXRoaXMuaW5kZXguYXJyYXkscj10aGlzLmF0dHJpYnV0ZXM7Zm9yKGNvbnN0IGkgaW4gcil7Y29uc3Qgbz10KHJbaV0sbik7ZS5zZXRBdHRyaWJ1dGUoaSxvKX1jb25zdCBpPXRoaXMubW9ycGhBdHRyaWJ1dGVzO2Zvcihjb25zdCByIGluIGkpe2NvbnN0IG89W10sYT1pW3JdO2ZvcihsZXQgZT0wLHI9YS5sZW5ndGg7ZTxyO2UrKyl7Y29uc3Qgcj10KGFbZV0sbik7by5wdXNoKHIpfWUubW9ycGhBdHRyaWJ1dGVzW3JdPW99ZS5tb3JwaFRhcmdldHNSZWxhdGl2ZT10aGlzLm1vcnBoVGFyZ2V0c1JlbGF0aXZlO2NvbnN0IG89dGhpcy5ncm91cHM7Zm9yKGxldCB0PTAsbj1vLmxlbmd0aDt0PG47dCsrKXtjb25zdCBuPW9bdF07ZS5hZGRHcm91cChuLnN0YXJ0LG4uY291bnQsbi5tYXRlcmlhbEluZGV4KX1yZXR1cm4gZX0sdG9KU09OOmZ1bmN0aW9uKCl7Y29uc3QgdD17bWV0YWRhdGE6e3ZlcnNpb246NC41LHR5cGU6XCJCdWZmZXJHZW9tZXRyeVwiLGdlbmVyYXRvcjpcIkJ1ZmZlckdlb21ldHJ5LnRvSlNPTlwifX07aWYodC51dWlkPXRoaXMudXVpZCx0LnR5cGU9dGhpcy50eXBlLFwiXCIhPT10aGlzLm5hbWUmJih0Lm5hbWU9dGhpcy5uYW1lKSxPYmplY3Qua2V5cyh0aGlzLnVzZXJEYXRhKS5sZW5ndGg+MCYmKHQudXNlckRhdGE9dGhpcy51c2VyRGF0YSksdm9pZCAwIT09dGhpcy5wYXJhbWV0ZXJzKXtjb25zdCBlPXRoaXMucGFyYW1ldGVycztmb3IoY29uc3QgbiBpbiBlKXZvaWQgMCE9PWVbbl0mJih0W25dPWVbbl0pO3JldHVybiB0fXQuZGF0YT17YXR0cmlidXRlczp7fX07Y29uc3QgZT10aGlzLmluZGV4O251bGwhPT1lJiYodC5kYXRhLmluZGV4PXt0eXBlOmUuYXJyYXkuY29uc3RydWN0b3IubmFtZSxhcnJheTpBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChlLmFycmF5KX0pO2NvbnN0IG49dGhpcy5hdHRyaWJ1dGVzO2Zvcihjb25zdCBlIGluIG4pe2NvbnN0IHI9bltlXSxpPXIudG9KU09OKHQuZGF0YSk7XCJcIiE9PXIubmFtZSYmKGkubmFtZT1yLm5hbWUpLHQuZGF0YS5hdHRyaWJ1dGVzW2VdPWl9Y29uc3Qgcj17fTtsZXQgaT0hMTtmb3IoY29uc3QgZSBpbiB0aGlzLm1vcnBoQXR0cmlidXRlcyl7Y29uc3Qgbj10aGlzLm1vcnBoQXR0cmlidXRlc1tlXSxvPVtdO2ZvcihsZXQgZT0wLHI9bi5sZW5ndGg7ZTxyO2UrKyl7Y29uc3Qgcj1uW2VdLGk9ci50b0pTT04odC5kYXRhKTtcIlwiIT09ci5uYW1lJiYoaS5uYW1lPXIubmFtZSksby5wdXNoKGkpfW8ubGVuZ3RoPjAmJihyW2VdPW8saT0hMCl9aSYmKHQuZGF0YS5tb3JwaEF0dHJpYnV0ZXM9cix0LmRhdGEubW9ycGhUYXJnZXRzUmVsYXRpdmU9dGhpcy5tb3JwaFRhcmdldHNSZWxhdGl2ZSk7Y29uc3Qgbz10aGlzLmdyb3VwcztvLmxlbmd0aD4wJiYodC5kYXRhLmdyb3Vwcz1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG8pKSk7Y29uc3QgYT10aGlzLmJvdW5kaW5nU3BoZXJlO3JldHVybiBudWxsIT09YSYmKHQuZGF0YS5ib3VuZGluZ1NwaGVyZT17Y2VudGVyOmEuY2VudGVyLnRvQXJyYXkoKSxyYWRpdXM6YS5yYWRpdXN9KSx0fSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgcWkpLmNvcHkodGhpcyl9LGNvcHk6ZnVuY3Rpb24odCl7dGhpcy5pbmRleD1udWxsLHRoaXMuYXR0cmlidXRlcz17fSx0aGlzLm1vcnBoQXR0cmlidXRlcz17fSx0aGlzLmdyb3Vwcz1bXSx0aGlzLmJvdW5kaW5nQm94PW51bGwsdGhpcy5ib3VuZGluZ1NwaGVyZT1udWxsO2NvbnN0IGU9e307dGhpcy5uYW1lPXQubmFtZTtjb25zdCBuPXQuaW5kZXg7bnVsbCE9PW4mJnRoaXMuc2V0SW5kZXgobi5jbG9uZShlKSk7Y29uc3Qgcj10LmF0dHJpYnV0ZXM7Zm9yKGNvbnN0IHQgaW4gcil7Y29uc3Qgbj1yW3RdO3RoaXMuc2V0QXR0cmlidXRlKHQsbi5jbG9uZShlKSl9Y29uc3QgaT10Lm1vcnBoQXR0cmlidXRlcztmb3IoY29uc3QgdCBpbiBpKXtjb25zdCBuPVtdLHI9aVt0XTtmb3IobGV0IHQ9MCxpPXIubGVuZ3RoO3Q8aTt0Kyspbi5wdXNoKHJbdF0uY2xvbmUoZSkpO3RoaXMubW9ycGhBdHRyaWJ1dGVzW3RdPW59dGhpcy5tb3JwaFRhcmdldHNSZWxhdGl2ZT10Lm1vcnBoVGFyZ2V0c1JlbGF0aXZlO2NvbnN0IG89dC5ncm91cHM7Zm9yKGxldCB0PTAsZT1vLmxlbmd0aDt0PGU7dCsrKXtjb25zdCBlPW9bdF07dGhpcy5hZGRHcm91cChlLnN0YXJ0LGUuY291bnQsZS5tYXRlcmlhbEluZGV4KX1jb25zdCBhPXQuYm91bmRpbmdCb3g7bnVsbCE9PWEmJih0aGlzLmJvdW5kaW5nQm94PWEuY2xvbmUoKSk7Y29uc3Qgcz10LmJvdW5kaW5nU3BoZXJlO3JldHVybiBudWxsIT09cyYmKHRoaXMuYm91bmRpbmdTcGhlcmU9cy5jbG9uZSgpKSx0aGlzLmRyYXdSYW5nZS5zdGFydD10LmRyYXdSYW5nZS5zdGFydCx0aGlzLmRyYXdSYW5nZS5jb3VudD10LmRyYXdSYW5nZS5jb3VudCx0aGlzLnVzZXJEYXRhPXQudXNlckRhdGEsdGhpc30sZGlzcG9zZTpmdW5jdGlvbigpe3RoaXMuZGlzcGF0Y2hFdmVudCh7dHlwZTpcImRpc3Bvc2VcIn0pfX0pO2NvbnN0IFlpPW5ldyBUcixaaT1uZXcgU3IsSmk9bmV3IGdyLEtpPW5ldyBLbixRaT1uZXcgS24sJGk9bmV3IEtuLHRvPW5ldyBLbixlbz1uZXcgS24sbm89bmV3IEtuLHJvPW5ldyBLbixpbz1uZXcgS24sb289bmV3IEtuLGFvPW5ldyBHbixzbz1uZXcgR24sY289bmV3IEduLGxvPW5ldyBLbix1bz1uZXcgS247ZnVuY3Rpb24gaG8odCxlKXtKci5jYWxsKHRoaXMpLHRoaXMudHlwZT1cIk1lc2hcIix0aGlzLmdlb21ldHJ5PXZvaWQgMCE9PXQ/dDpuZXcgcWksdGhpcy5tYXRlcmlhbD12b2lkIDAhPT1lP2U6bmV3IF9pLHRoaXMudXBkYXRlTW9ycGhUYXJnZXRzKCl9ZnVuY3Rpb24gcG8odCxlLG4scixpLG8sYSxzKXtsZXQgYztpZihjPWUuc2lkZT09PW0/ci5pbnRlcnNlY3RUcmlhbmdsZShhLG8saSwhMCxzKTpyLmludGVyc2VjdFRyaWFuZ2xlKGksbyxhLGUuc2lkZSE9PWcscyksbnVsbD09PWMpcmV0dXJuIG51bGw7dW8uY29weShzKSx1by5hcHBseU1hdHJpeDQodC5tYXRyaXhXb3JsZCk7Y29uc3QgbD1uLnJheS5vcmlnaW4uZGlzdGFuY2VUbyh1byk7cmV0dXJuIGw8bi5uZWFyfHxsPm4uZmFyP251bGw6e2Rpc3RhbmNlOmwscG9pbnQ6dW8uY2xvbmUoKSxvYmplY3Q6dH19ZnVuY3Rpb24gZm8odCxlLG4scixpLG8sYSxzLGMsbCx1LGgpe0tpLmZyb21CdWZmZXJBdHRyaWJ1dGUoaSxsKSxRaS5mcm9tQnVmZmVyQXR0cmlidXRlKGksdSksJGkuZnJvbUJ1ZmZlckF0dHJpYnV0ZShpLGgpO2NvbnN0IGQ9dC5tb3JwaFRhcmdldEluZmx1ZW5jZXM7aWYoZS5tb3JwaFRhcmdldHMmJm8mJmQpe3JvLnNldCgwLDAsMCksaW8uc2V0KDAsMCwwKSxvby5zZXQoMCwwLDApO2ZvcihsZXQgdD0wLGU9by5sZW5ndGg7dDxlO3QrKyl7Y29uc3QgZT1kW3RdLG49b1t0XTswIT09ZSYmKHRvLmZyb21CdWZmZXJBdHRyaWJ1dGUobixsKSxlby5mcm9tQnVmZmVyQXR0cmlidXRlKG4sdSksbm8uZnJvbUJ1ZmZlckF0dHJpYnV0ZShuLGgpLGE/KHJvLmFkZFNjYWxlZFZlY3Rvcih0byxlKSxpby5hZGRTY2FsZWRWZWN0b3IoZW8sZSksb28uYWRkU2NhbGVkVmVjdG9yKG5vLGUpKToocm8uYWRkU2NhbGVkVmVjdG9yKHRvLnN1YihLaSksZSksaW8uYWRkU2NhbGVkVmVjdG9yKGVvLnN1YihRaSksZSksb28uYWRkU2NhbGVkVmVjdG9yKG5vLnN1YigkaSksZSkpKX1LaS5hZGQocm8pLFFpLmFkZChpbyksJGkuYWRkKG9vKX10LmlzU2tpbm5lZE1lc2gmJih0LmJvbmVUcmFuc2Zvcm0obCxLaSksdC5ib25lVHJhbnNmb3JtKHUsUWkpLHQuYm9uZVRyYW5zZm9ybShoLCRpKSk7Y29uc3QgcD1wbyh0LGUsbixyLEtpLFFpLCRpLGxvKTtpZihwKXtzJiYoYW8uZnJvbUJ1ZmZlckF0dHJpYnV0ZShzLGwpLHNvLmZyb21CdWZmZXJBdHRyaWJ1dGUocyx1KSxjby5mcm9tQnVmZmVyQXR0cmlidXRlKHMsaCkscC51dj1oaS5nZXRVVihsbyxLaSxRaSwkaSxhbyxzbyxjbyxuZXcgR24pKSxjJiYoYW8uZnJvbUJ1ZmZlckF0dHJpYnV0ZShjLGwpLHNvLmZyb21CdWZmZXJBdHRyaWJ1dGUoYyx1KSxjby5mcm9tQnVmZmVyQXR0cmlidXRlKGMsaCkscC51djI9aGkuZ2V0VVYobG8sS2ksUWksJGksYW8sc28sY28sbmV3IEduKSk7Y29uc3QgdD1uZXcgeGkobCx1LGgpO2hpLmdldE5vcm1hbChLaSxRaSwkaSx0Lm5vcm1hbCkscC5mYWNlPXR9cmV0dXJuIHB9aG8ucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShKci5wcm90b3R5cGUpLHtjb25zdHJ1Y3Rvcjpobyxpc01lc2g6ITAsY29weTpmdW5jdGlvbih0KXtyZXR1cm4gSnIucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLHQpLHZvaWQgMCE9PXQubW9ycGhUYXJnZXRJbmZsdWVuY2VzJiYodGhpcy5tb3JwaFRhcmdldEluZmx1ZW5jZXM9dC5tb3JwaFRhcmdldEluZmx1ZW5jZXMuc2xpY2UoKSksdm9pZCAwIT09dC5tb3JwaFRhcmdldERpY3Rpb25hcnkmJih0aGlzLm1vcnBoVGFyZ2V0RGljdGlvbmFyeT1PYmplY3QuYXNzaWduKHt9LHQubW9ycGhUYXJnZXREaWN0aW9uYXJ5KSksdGhpcy5tYXRlcmlhbD10Lm1hdGVyaWFsLHRoaXMuZ2VvbWV0cnk9dC5nZW9tZXRyeSx0aGlzfSx1cGRhdGVNb3JwaFRhcmdldHM6ZnVuY3Rpb24oKXtjb25zdCB0PXRoaXMuZ2VvbWV0cnk7aWYodC5pc0J1ZmZlckdlb21ldHJ5KXtjb25zdCBlPXQubW9ycGhBdHRyaWJ1dGVzLG49T2JqZWN0LmtleXMoZSk7aWYobi5sZW5ndGg+MCl7Y29uc3QgdD1lW25bMF1dO2lmKHZvaWQgMCE9PXQpe3RoaXMubW9ycGhUYXJnZXRJbmZsdWVuY2VzPVtdLHRoaXMubW9ycGhUYXJnZXREaWN0aW9uYXJ5PXt9O2ZvcihsZXQgZT0wLG49dC5sZW5ndGg7ZTxuO2UrKyl7Y29uc3Qgbj10W2VdLm5hbWV8fFN0cmluZyhlKTt0aGlzLm1vcnBoVGFyZ2V0SW5mbHVlbmNlcy5wdXNoKDApLHRoaXMubW9ycGhUYXJnZXREaWN0aW9uYXJ5W25dPWV9fX19ZWxzZXtjb25zdCBlPXQubW9ycGhUYXJnZXRzO3ZvaWQgMCE9PWUmJmUubGVuZ3RoPjAmJmNvbnNvbGUuZXJyb3IoXCJUSFJFRS5NZXNoLnVwZGF0ZU1vcnBoVGFyZ2V0cygpIG5vIGxvbmdlciBzdXBwb3J0cyBUSFJFRS5HZW9tZXRyeS4gVXNlIFRIUkVFLkJ1ZmZlckdlb21ldHJ5IGluc3RlYWQuXCIpfX0scmF5Y2FzdDpmdW5jdGlvbih0LGUpe2NvbnN0IG49dGhpcy5nZW9tZXRyeSxyPXRoaXMubWF0ZXJpYWwsaT10aGlzLm1hdHJpeFdvcmxkO2lmKHZvaWQgMD09PXIpcmV0dXJuO2lmKG51bGw9PT1uLmJvdW5kaW5nU3BoZXJlJiZuLmNvbXB1dGVCb3VuZGluZ1NwaGVyZSgpLEppLmNvcHkobi5ib3VuZGluZ1NwaGVyZSksSmkuYXBwbHlNYXRyaXg0KGkpLCExPT09dC5yYXkuaW50ZXJzZWN0c1NwaGVyZShKaSkpcmV0dXJuO2lmKFlpLmNvcHkoaSkuaW52ZXJ0KCksWmkuY29weSh0LnJheSkuYXBwbHlNYXRyaXg0KFlpKSxudWxsIT09bi5ib3VuZGluZ0JveCYmITE9PT1aaS5pbnRlcnNlY3RzQm94KG4uYm91bmRpbmdCb3gpKXJldHVybjtsZXQgbztpZihuLmlzQnVmZmVyR2VvbWV0cnkpe2NvbnN0IGk9bi5pbmRleCxhPW4uYXR0cmlidXRlcy5wb3NpdGlvbixzPW4ubW9ycGhBdHRyaWJ1dGVzLnBvc2l0aW9uLGM9bi5tb3JwaFRhcmdldHNSZWxhdGl2ZSxsPW4uYXR0cmlidXRlcy51dix1PW4uYXR0cmlidXRlcy51djIsaD1uLmdyb3VwcyxkPW4uZHJhd1JhbmdlO2lmKG51bGwhPT1pKWlmKEFycmF5LmlzQXJyYXkocikpZm9yKGxldCBuPTAscD1oLmxlbmd0aDtuPHA7bisrKXtjb25zdCBwPWhbbl0sZj1yW3AubWF0ZXJpYWxJbmRleF07Zm9yKGxldCBuPU1hdGgubWF4KHAuc3RhcnQsZC5zdGFydCkscj1NYXRoLm1pbihwLnN0YXJ0K3AuY291bnQsZC5zdGFydCtkLmNvdW50KTtuPHI7bis9Myl7Y29uc3Qgcj1pLmdldFgobiksaD1pLmdldFgobisxKSxkPWkuZ2V0WChuKzIpO289Zm8odGhpcyxmLHQsWmksYSxzLGMsbCx1LHIsaCxkKSxvJiYoby5mYWNlSW5kZXg9TWF0aC5mbG9vcihuLzMpLG8uZmFjZS5tYXRlcmlhbEluZGV4PXAubWF0ZXJpYWxJbmRleCxlLnB1c2gobykpfX1lbHNle2ZvcihsZXQgbj1NYXRoLm1heCgwLGQuc3RhcnQpLGg9TWF0aC5taW4oaS5jb3VudCxkLnN0YXJ0K2QuY291bnQpO248aDtuKz0zKXtjb25zdCBoPWkuZ2V0WChuKSxkPWkuZ2V0WChuKzEpLHA9aS5nZXRYKG4rMik7bz1mbyh0aGlzLHIsdCxaaSxhLHMsYyxsLHUsaCxkLHApLG8mJihvLmZhY2VJbmRleD1NYXRoLmZsb29yKG4vMyksZS5wdXNoKG8pKX19ZWxzZSBpZih2b2lkIDAhPT1hKWlmKEFycmF5LmlzQXJyYXkocikpZm9yKGxldCBuPTAsaT1oLmxlbmd0aDtuPGk7bisrKXtjb25zdCBpPWhbbl0scD1yW2kubWF0ZXJpYWxJbmRleF07Zm9yKGxldCBuPU1hdGgubWF4KGkuc3RhcnQsZC5zdGFydCkscj1NYXRoLm1pbihpLnN0YXJ0K2kuY291bnQsZC5zdGFydCtkLmNvdW50KTtuPHI7bis9Myl7bz1mbyh0aGlzLHAsdCxaaSxhLHMsYyxsLHUsbixuKzEsbisyKSxvJiYoby5mYWNlSW5kZXg9TWF0aC5mbG9vcihuLzMpLG8uZmFjZS5tYXRlcmlhbEluZGV4PWkubWF0ZXJpYWxJbmRleCxlLnB1c2gobykpfX1lbHNle2ZvcihsZXQgbj1NYXRoLm1heCgwLGQuc3RhcnQpLGk9TWF0aC5taW4oYS5jb3VudCxkLnN0YXJ0K2QuY291bnQpO248aTtuKz0zKXtvPWZvKHRoaXMscix0LFppLGEscyxjLGwsdSxuLG4rMSxuKzIpLG8mJihvLmZhY2VJbmRleD1NYXRoLmZsb29yKG4vMyksZS5wdXNoKG8pKX19fWVsc2UgaWYobi5pc0dlb21ldHJ5KXtjb25zdCBpPUFycmF5LmlzQXJyYXkociksYT1uLnZlcnRpY2VzLHM9bi5mYWNlcztsZXQgYztjb25zdCBsPW4uZmFjZVZlcnRleFV2c1swXTtsLmxlbmd0aD4wJiYoYz1sKTtmb3IobGV0IG49MCxsPXMubGVuZ3RoO248bDtuKyspe2NvbnN0IGw9c1tuXSx1PWk/cltsLm1hdGVyaWFsSW5kZXhdOnI7aWYodm9pZCAwPT09dSljb250aW51ZTtjb25zdCBoPWFbbC5hXSxkPWFbbC5iXSxwPWFbbC5jXTtpZihvPXBvKHRoaXMsdSx0LFppLGgsZCxwLGxvKSxvKXtpZihjJiZjW25dKXtjb25zdCB0PWNbbl07YW8uY29weSh0WzBdKSxzby5jb3B5KHRbMV0pLGNvLmNvcHkodFsyXSksby51dj1oaS5nZXRVVihsbyxoLGQscCxhbyxzbyxjbyxuZXcgR24pfW8uZmFjZT1sLG8uZmFjZUluZGV4PW4sZS5wdXNoKG8pfX19fX0pO2NsYXNzIG1vIGV4dGVuZHMgcWl7Y29uc3RydWN0b3IodD0xLGU9MSxuPTEscj0xLGk9MSxvPTEpe3N1cGVyKCksdGhpcy50eXBlPVwiQm94QnVmZmVyR2VvbWV0cnlcIix0aGlzLnBhcmFtZXRlcnM9e3dpZHRoOnQsaGVpZ2h0OmUsZGVwdGg6bix3aWR0aFNlZ21lbnRzOnIsaGVpZ2h0U2VnbWVudHM6aSxkZXB0aFNlZ21lbnRzOm99O2NvbnN0IGE9dGhpcztyPU1hdGguZmxvb3IociksaT1NYXRoLmZsb29yKGkpLG89TWF0aC5mbG9vcihvKTtjb25zdCBzPVtdLGM9W10sbD1bXSx1PVtdO2xldCBoPTAsZD0wO2Z1bmN0aW9uIHAodCxlLG4scixpLG8scCxmLG0sZyx2KXtjb25zdCB5PW8vbSx4PXAvZyxiPW8vMix3PXAvMixfPWYvMixNPW0rMSxTPWcrMTtsZXQgVD0wLEU9MDtjb25zdCBBPW5ldyBLbjtmb3IobGV0IG89MDtvPFM7bysrKXtjb25zdCBhPW8qeC13O2ZvcihsZXQgcz0wO3M8TTtzKyspe2NvbnN0IGg9cyp5LWI7QVt0XT1oKnIsQVtlXT1hKmksQVtuXT1fLGMucHVzaChBLngsQS55LEEueiksQVt0XT0wLEFbZV09MCxBW25dPWY+MD8xOi0xLGwucHVzaChBLngsQS55LEEueiksdS5wdXNoKHMvbSksdS5wdXNoKDEtby9nKSxUKz0xfX1mb3IobGV0IHQ9MDt0PGc7dCsrKWZvcihsZXQgZT0wO2U8bTtlKyspe2NvbnN0IG49aCtlK00qdCxyPWgrZStNKih0KzEpLGk9aCsoZSsxKStNKih0KzEpLG89aCsoZSsxKStNKnQ7cy5wdXNoKG4scixvKSxzLnB1c2gocixpLG8pLEUrPTZ9YS5hZGRHcm91cChkLEUsdiksZCs9RSxoKz1UfXAoXCJ6XCIsXCJ5XCIsXCJ4XCIsLTEsLTEsbixlLHQsbyxpLDApLHAoXCJ6XCIsXCJ5XCIsXCJ4XCIsMSwtMSxuLGUsLXQsbyxpLDEpLHAoXCJ4XCIsXCJ6XCIsXCJ5XCIsMSwxLHQsbixlLHIsbywyKSxwKFwieFwiLFwielwiLFwieVwiLDEsLTEsdCxuLC1lLHIsbywzKSxwKFwieFwiLFwieVwiLFwielwiLDEsLTEsdCxlLG4scixpLDQpLHAoXCJ4XCIsXCJ5XCIsXCJ6XCIsLTEsLTEsdCxlLC1uLHIsaSw1KSx0aGlzLnNldEluZGV4KHMpLHRoaXMuc2V0QXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgTmkoYywzKSksdGhpcy5zZXRBdHRyaWJ1dGUoXCJub3JtYWxcIixuZXcgTmkobCwzKSksdGhpcy5zZXRBdHRyaWJ1dGUoXCJ1dlwiLG5ldyBOaSh1LDIpKX19ZnVuY3Rpb24gZ28odCl7Y29uc3QgZT17fTtmb3IoY29uc3QgbiBpbiB0KXtlW25dPXt9O2Zvcihjb25zdCByIGluIHRbbl0pe2NvbnN0IGk9dFtuXVtyXTtpJiYoaS5pc0NvbG9yfHxpLmlzTWF0cml4M3x8aS5pc01hdHJpeDR8fGkuaXNWZWN0b3IyfHxpLmlzVmVjdG9yM3x8aS5pc1ZlY3RvcjR8fGkuaXNUZXh0dXJlKT9lW25dW3JdPWkuY2xvbmUoKTpBcnJheS5pc0FycmF5KGkpP2Vbbl1bcl09aS5zbGljZSgpOmVbbl1bcl09aX19cmV0dXJuIGV9ZnVuY3Rpb24gdm8odCl7Y29uc3QgZT17fTtmb3IobGV0IG49MDtuPHQubGVuZ3RoO24rKyl7Y29uc3Qgcj1nbyh0W25dKTtmb3IoY29uc3QgdCBpbiByKWVbdF09clt0XX1yZXR1cm4gZX1jb25zdCB5bz17Y2xvbmU6Z28sbWVyZ2U6dm99O2Z1bmN0aW9uIHhvKHQpe3dpLmNhbGwodGhpcyksdGhpcy50eXBlPVwiU2hhZGVyTWF0ZXJpYWxcIix0aGlzLmRlZmluZXM9e30sdGhpcy51bmlmb3Jtcz17fSx0aGlzLnZlcnRleFNoYWRlcj1cInZvaWQgbWFpbigpIHtcXG5cXHRnbF9Qb3NpdGlvbiA9IHByb2plY3Rpb25NYXRyaXggKiBtb2RlbFZpZXdNYXRyaXggKiB2ZWM0KCBwb3NpdGlvbiwgMS4wICk7XFxufVwiLHRoaXMuZnJhZ21lbnRTaGFkZXI9XCJ2b2lkIG1haW4oKSB7XFxuXFx0Z2xfRnJhZ0NvbG9yID0gdmVjNCggMS4wLCAwLjAsIDAuMCwgMS4wICk7XFxufVwiLHRoaXMubGluZXdpZHRoPTEsdGhpcy53aXJlZnJhbWU9ITEsdGhpcy53aXJlZnJhbWVMaW5ld2lkdGg9MSx0aGlzLmZvZz0hMSx0aGlzLmxpZ2h0cz0hMSx0aGlzLmNsaXBwaW5nPSExLHRoaXMuc2tpbm5pbmc9ITEsdGhpcy5tb3JwaFRhcmdldHM9ITEsdGhpcy5tb3JwaE5vcm1hbHM9ITEsdGhpcy5leHRlbnNpb25zPXtkZXJpdmF0aXZlczohMSxmcmFnRGVwdGg6ITEsZHJhd0J1ZmZlcnM6ITEsc2hhZGVyVGV4dHVyZUxPRDohMX0sdGhpcy5kZWZhdWx0QXR0cmlidXRlVmFsdWVzPXtjb2xvcjpbMSwxLDFdLHV2OlswLDBdLHV2MjpbMCwwXX0sdGhpcy5pbmRleDBBdHRyaWJ1dGVOYW1lPXZvaWQgMCx0aGlzLnVuaWZvcm1zTmVlZFVwZGF0ZT0hMSx0aGlzLmdsc2xWZXJzaW9uPW51bGwsdm9pZCAwIT09dCYmKHZvaWQgMCE9PXQuYXR0cmlidXRlcyYmY29uc29sZS5lcnJvcihcIlRIUkVFLlNoYWRlck1hdGVyaWFsOiBhdHRyaWJ1dGVzIHNob3VsZCBub3cgYmUgZGVmaW5lZCBpbiBUSFJFRS5CdWZmZXJHZW9tZXRyeSBpbnN0ZWFkLlwiKSx0aGlzLnNldFZhbHVlcyh0KSl9ZnVuY3Rpb24gYm8oKXtKci5jYWxsKHRoaXMpLHRoaXMudHlwZT1cIkNhbWVyYVwiLHRoaXMubWF0cml4V29ybGRJbnZlcnNlPW5ldyBUcix0aGlzLnByb2plY3Rpb25NYXRyaXg9bmV3IFRyLHRoaXMucHJvamVjdGlvbk1hdHJpeEludmVyc2U9bmV3IFRyfWZ1bmN0aW9uIHdvKHQ9NTAsZT0xLG49LjEscj0yZTMpe2JvLmNhbGwodGhpcyksdGhpcy50eXBlPVwiUGVyc3BlY3RpdmVDYW1lcmFcIix0aGlzLmZvdj10LHRoaXMuem9vbT0xLHRoaXMubmVhcj1uLHRoaXMuZmFyPXIsdGhpcy5mb2N1cz0xMCx0aGlzLmFzcGVjdD1lLHRoaXMudmlldz1udWxsLHRoaXMuZmlsbUdhdWdlPTM1LHRoaXMuZmlsbU9mZnNldD0wLHRoaXMudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpfXhvLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHdpLnByb3RvdHlwZSkseG8ucHJvdG90eXBlLmNvbnN0cnVjdG9yPXhvLHhvLnByb3RvdHlwZS5pc1NoYWRlck1hdGVyaWFsPSEwLHhvLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKHQpe3JldHVybiB3aS5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsdCksdGhpcy5mcmFnbWVudFNoYWRlcj10LmZyYWdtZW50U2hhZGVyLHRoaXMudmVydGV4U2hhZGVyPXQudmVydGV4U2hhZGVyLHRoaXMudW5pZm9ybXM9Z28odC51bmlmb3JtcyksdGhpcy5kZWZpbmVzPU9iamVjdC5hc3NpZ24oe30sdC5kZWZpbmVzKSx0aGlzLndpcmVmcmFtZT10LndpcmVmcmFtZSx0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD10LndpcmVmcmFtZUxpbmV3aWR0aCx0aGlzLmxpZ2h0cz10LmxpZ2h0cyx0aGlzLmNsaXBwaW5nPXQuY2xpcHBpbmcsdGhpcy5za2lubmluZz10LnNraW5uaW5nLHRoaXMubW9ycGhUYXJnZXRzPXQubW9ycGhUYXJnZXRzLHRoaXMubW9ycGhOb3JtYWxzPXQubW9ycGhOb3JtYWxzLHRoaXMuZXh0ZW5zaW9ucz1PYmplY3QuYXNzaWduKHt9LHQuZXh0ZW5zaW9ucyksdGhpcy5nbHNsVmVyc2lvbj10Lmdsc2xWZXJzaW9uLHRoaXN9LHhvLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24odCl7Y29uc3QgZT13aS5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyx0KTtlLmdsc2xWZXJzaW9uPXRoaXMuZ2xzbFZlcnNpb24sZS51bmlmb3Jtcz17fTtmb3IoY29uc3QgbiBpbiB0aGlzLnVuaWZvcm1zKXtjb25zdCByPXRoaXMudW5pZm9ybXNbbl0udmFsdWU7ciYmci5pc1RleHR1cmU/ZS51bmlmb3Jtc1tuXT17dHlwZTpcInRcIix2YWx1ZTpyLnRvSlNPTih0KS51dWlkfTpyJiZyLmlzQ29sb3I/ZS51bmlmb3Jtc1tuXT17dHlwZTpcImNcIix2YWx1ZTpyLmdldEhleCgpfTpyJiZyLmlzVmVjdG9yMj9lLnVuaWZvcm1zW25dPXt0eXBlOlwidjJcIix2YWx1ZTpyLnRvQXJyYXkoKX06ciYmci5pc1ZlY3RvcjM/ZS51bmlmb3Jtc1tuXT17dHlwZTpcInYzXCIsdmFsdWU6ci50b0FycmF5KCl9OnImJnIuaXNWZWN0b3I0P2UudW5pZm9ybXNbbl09e3R5cGU6XCJ2NFwiLHZhbHVlOnIudG9BcnJheSgpfTpyJiZyLmlzTWF0cml4Mz9lLnVuaWZvcm1zW25dPXt0eXBlOlwibTNcIix2YWx1ZTpyLnRvQXJyYXkoKX06ciYmci5pc01hdHJpeDQ/ZS51bmlmb3Jtc1tuXT17dHlwZTpcIm00XCIsdmFsdWU6ci50b0FycmF5KCl9OmUudW5pZm9ybXNbbl09e3ZhbHVlOnJ9fU9iamVjdC5rZXlzKHRoaXMuZGVmaW5lcykubGVuZ3RoPjAmJihlLmRlZmluZXM9dGhpcy5kZWZpbmVzKSxlLnZlcnRleFNoYWRlcj10aGlzLnZlcnRleFNoYWRlcixlLmZyYWdtZW50U2hhZGVyPXRoaXMuZnJhZ21lbnRTaGFkZXI7Y29uc3Qgbj17fTtmb3IoY29uc3QgdCBpbiB0aGlzLmV4dGVuc2lvbnMpITA9PT10aGlzLmV4dGVuc2lvbnNbdF0mJihuW3RdPSEwKTtyZXR1cm4gT2JqZWN0LmtleXMobikubGVuZ3RoPjAmJihlLmV4dGVuc2lvbnM9biksZX0sYm8ucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShKci5wcm90b3R5cGUpLHtjb25zdHJ1Y3Rvcjpibyxpc0NhbWVyYTohMCxjb3B5OmZ1bmN0aW9uKHQsZSl7cmV0dXJuIEpyLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyx0LGUpLHRoaXMubWF0cml4V29ybGRJbnZlcnNlLmNvcHkodC5tYXRyaXhXb3JsZEludmVyc2UpLHRoaXMucHJvamVjdGlvbk1hdHJpeC5jb3B5KHQucHJvamVjdGlvbk1hdHJpeCksdGhpcy5wcm9qZWN0aW9uTWF0cml4SW52ZXJzZS5jb3B5KHQucHJvamVjdGlvbk1hdHJpeEludmVyc2UpLHRoaXN9LGdldFdvcmxkRGlyZWN0aW9uOmZ1bmN0aW9uKHQpe3ZvaWQgMD09PXQmJihjb25zb2xlLndhcm4oXCJUSFJFRS5DYW1lcmE6IC5nZXRXb3JsZERpcmVjdGlvbigpIHRhcmdldCBpcyBub3cgcmVxdWlyZWRcIiksdD1uZXcgS24pLHRoaXMudXBkYXRlV29ybGRNYXRyaXgoITAsITEpO2NvbnN0IGU9dGhpcy5tYXRyaXhXb3JsZC5lbGVtZW50cztyZXR1cm4gdC5zZXQoLWVbOF0sLWVbOV0sLWVbMTBdKS5ub3JtYWxpemUoKX0sdXBkYXRlTWF0cml4V29ybGQ6ZnVuY3Rpb24odCl7SnIucHJvdG90eXBlLnVwZGF0ZU1hdHJpeFdvcmxkLmNhbGwodGhpcyx0KSx0aGlzLm1hdHJpeFdvcmxkSW52ZXJzZS5jb3B5KHRoaXMubWF0cml4V29ybGQpLmludmVydCgpfSx1cGRhdGVXb3JsZE1hdHJpeDpmdW5jdGlvbih0LGUpe0pyLnByb3RvdHlwZS51cGRhdGVXb3JsZE1hdHJpeC5jYWxsKHRoaXMsdCxlKSx0aGlzLm1hdHJpeFdvcmxkSW52ZXJzZS5jb3B5KHRoaXMubWF0cml4V29ybGQpLmludmVydCgpfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3RvcikuY29weSh0aGlzKX19KSx3by5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKGJvLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOndvLGlzUGVyc3BlY3RpdmVDYW1lcmE6ITAsY29weTpmdW5jdGlvbih0LGUpe3JldHVybiBiby5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsdCxlKSx0aGlzLmZvdj10LmZvdix0aGlzLnpvb209dC56b29tLHRoaXMubmVhcj10Lm5lYXIsdGhpcy5mYXI9dC5mYXIsdGhpcy5mb2N1cz10LmZvY3VzLHRoaXMuYXNwZWN0PXQuYXNwZWN0LHRoaXMudmlldz1udWxsPT09dC52aWV3P251bGw6T2JqZWN0LmFzc2lnbih7fSx0LnZpZXcpLHRoaXMuZmlsbUdhdWdlPXQuZmlsbUdhdWdlLHRoaXMuZmlsbU9mZnNldD10LmZpbG1PZmZzZXQsdGhpc30sc2V0Rm9jYWxMZW5ndGg6ZnVuY3Rpb24odCl7Y29uc3QgZT0uNSp0aGlzLmdldEZpbG1IZWlnaHQoKS90O3RoaXMuZm92PTIqem4uUkFEMkRFRypNYXRoLmF0YW4oZSksdGhpcy51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCl9LGdldEZvY2FsTGVuZ3RoOmZ1bmN0aW9uKCl7Y29uc3QgdD1NYXRoLnRhbiguNSp6bi5ERUcyUkFEKnRoaXMuZm92KTtyZXR1cm4uNSp0aGlzLmdldEZpbG1IZWlnaHQoKS90fSxnZXRFZmZlY3RpdmVGT1Y6ZnVuY3Rpb24oKXtyZXR1cm4gMip6bi5SQUQyREVHKk1hdGguYXRhbihNYXRoLnRhbiguNSp6bi5ERUcyUkFEKnRoaXMuZm92KS90aGlzLnpvb20pfSxnZXRGaWxtV2lkdGg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5maWxtR2F1Z2UqTWF0aC5taW4odGhpcy5hc3BlY3QsMSl9LGdldEZpbG1IZWlnaHQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5maWxtR2F1Z2UvTWF0aC5tYXgodGhpcy5hc3BlY3QsMSl9LHNldFZpZXdPZmZzZXQ6ZnVuY3Rpb24odCxlLG4scixpLG8pe3RoaXMuYXNwZWN0PXQvZSxudWxsPT09dGhpcy52aWV3JiYodGhpcy52aWV3PXtlbmFibGVkOiEwLGZ1bGxXaWR0aDoxLGZ1bGxIZWlnaHQ6MSxvZmZzZXRYOjAsb2Zmc2V0WTowLHdpZHRoOjEsaGVpZ2h0OjF9KSx0aGlzLnZpZXcuZW5hYmxlZD0hMCx0aGlzLnZpZXcuZnVsbFdpZHRoPXQsdGhpcy52aWV3LmZ1bGxIZWlnaHQ9ZSx0aGlzLnZpZXcub2Zmc2V0WD1uLHRoaXMudmlldy5vZmZzZXRZPXIsdGhpcy52aWV3LndpZHRoPWksdGhpcy52aWV3LmhlaWdodD1vLHRoaXMudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpfSxjbGVhclZpZXdPZmZzZXQ6ZnVuY3Rpb24oKXtudWxsIT09dGhpcy52aWV3JiYodGhpcy52aWV3LmVuYWJsZWQ9ITEpLHRoaXMudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpfSx1cGRhdGVQcm9qZWN0aW9uTWF0cml4OmZ1bmN0aW9uKCl7Y29uc3QgdD10aGlzLm5lYXI7bGV0IGU9dCpNYXRoLnRhbiguNSp6bi5ERUcyUkFEKnRoaXMuZm92KS90aGlzLnpvb20sbj0yKmUscj10aGlzLmFzcGVjdCpuLGk9LS41KnI7Y29uc3Qgbz10aGlzLnZpZXc7aWYobnVsbCE9PXRoaXMudmlldyYmdGhpcy52aWV3LmVuYWJsZWQpe2NvbnN0IHQ9by5mdWxsV2lkdGgsYT1vLmZ1bGxIZWlnaHQ7aSs9by5vZmZzZXRYKnIvdCxlLT1vLm9mZnNldFkqbi9hLHIqPW8ud2lkdGgvdCxuKj1vLmhlaWdodC9hfWNvbnN0IGE9dGhpcy5maWxtT2Zmc2V0OzAhPT1hJiYoaSs9dCphL3RoaXMuZ2V0RmlsbVdpZHRoKCkpLHRoaXMucHJvamVjdGlvbk1hdHJpeC5tYWtlUGVyc3BlY3RpdmUoaSxpK3IsZSxlLW4sdCx0aGlzLmZhciksdGhpcy5wcm9qZWN0aW9uTWF0cml4SW52ZXJzZS5jb3B5KHRoaXMucHJvamVjdGlvbk1hdHJpeCkuaW52ZXJ0KCl9LHRvSlNPTjpmdW5jdGlvbih0KXtjb25zdCBlPUpyLnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzLHQpO3JldHVybiBlLm9iamVjdC5mb3Y9dGhpcy5mb3YsZS5vYmplY3Quem9vbT10aGlzLnpvb20sZS5vYmplY3QubmVhcj10aGlzLm5lYXIsZS5vYmplY3QuZmFyPXRoaXMuZmFyLGUub2JqZWN0LmZvY3VzPXRoaXMuZm9jdXMsZS5vYmplY3QuYXNwZWN0PXRoaXMuYXNwZWN0LG51bGwhPT10aGlzLnZpZXcmJihlLm9iamVjdC52aWV3PU9iamVjdC5hc3NpZ24oe30sdGhpcy52aWV3KSksZS5vYmplY3QuZmlsbUdhdWdlPXRoaXMuZmlsbUdhdWdlLGUub2JqZWN0LmZpbG1PZmZzZXQ9dGhpcy5maWxtT2Zmc2V0LGV9fSk7ZnVuY3Rpb24gX28odCxlLG4pe2lmKEpyLmNhbGwodGhpcyksdGhpcy50eXBlPVwiQ3ViZUNhbWVyYVwiLCEwIT09bi5pc1dlYkdMQ3ViZVJlbmRlclRhcmdldClyZXR1cm4gdm9pZCBjb25zb2xlLmVycm9yKFwiVEhSRUUuQ3ViZUNhbWVyYTogVGhlIGNvbnN0cnVjdG9yIG5vdyBleHBlY3RzIGFuIGluc3RhbmNlIG9mIFdlYkdMQ3ViZVJlbmRlclRhcmdldCBhcyB0aGlyZCBwYXJhbWV0ZXIuXCIpO3RoaXMucmVuZGVyVGFyZ2V0PW47Y29uc3Qgcj1uZXcgd28oOTAsMSx0LGUpO3IubGF5ZXJzPXRoaXMubGF5ZXJzLHIudXAuc2V0KDAsLTEsMCksci5sb29rQXQobmV3IEtuKDEsMCwwKSksdGhpcy5hZGQocik7Y29uc3QgaT1uZXcgd28oOTAsMSx0LGUpO2kubGF5ZXJzPXRoaXMubGF5ZXJzLGkudXAuc2V0KDAsLTEsMCksaS5sb29rQXQobmV3IEtuKC0xLDAsMCkpLHRoaXMuYWRkKGkpO2NvbnN0IG89bmV3IHdvKDkwLDEsdCxlKTtvLmxheWVycz10aGlzLmxheWVycyxvLnVwLnNldCgwLDAsMSksby5sb29rQXQobmV3IEtuKDAsMSwwKSksdGhpcy5hZGQobyk7Y29uc3QgYT1uZXcgd28oOTAsMSx0LGUpO2EubGF5ZXJzPXRoaXMubGF5ZXJzLGEudXAuc2V0KDAsMCwtMSksYS5sb29rQXQobmV3IEtuKDAsLTEsMCkpLHRoaXMuYWRkKGEpO2NvbnN0IHM9bmV3IHdvKDkwLDEsdCxlKTtzLmxheWVycz10aGlzLmxheWVycyxzLnVwLnNldCgwLC0xLDApLHMubG9va0F0KG5ldyBLbigwLDAsMSkpLHRoaXMuYWRkKHMpO2NvbnN0IGM9bmV3IHdvKDkwLDEsdCxlKTtjLmxheWVycz10aGlzLmxheWVycyxjLnVwLnNldCgwLC0xLDApLGMubG9va0F0KG5ldyBLbigwLDAsLTEpKSx0aGlzLmFkZChjKSx0aGlzLnVwZGF0ZT1mdW5jdGlvbih0LGUpe251bGw9PT10aGlzLnBhcmVudCYmdGhpcy51cGRhdGVNYXRyaXhXb3JsZCgpO2NvbnN0IGw9dC54ci5lbmFibGVkLHU9dC5nZXRSZW5kZXJUYXJnZXQoKTt0LnhyLmVuYWJsZWQ9ITE7Y29uc3QgaD1uLnRleHR1cmUuZ2VuZXJhdGVNaXBtYXBzO24udGV4dHVyZS5nZW5lcmF0ZU1pcG1hcHM9ITEsdC5zZXRSZW5kZXJUYXJnZXQobiwwKSx0LnJlbmRlcihlLHIpLHQuc2V0UmVuZGVyVGFyZ2V0KG4sMSksdC5yZW5kZXIoZSxpKSx0LnNldFJlbmRlclRhcmdldChuLDIpLHQucmVuZGVyKGUsbyksdC5zZXRSZW5kZXJUYXJnZXQobiwzKSx0LnJlbmRlcihlLGEpLHQuc2V0UmVuZGVyVGFyZ2V0KG4sNCksdC5yZW5kZXIoZSxzKSxuLnRleHR1cmUuZ2VuZXJhdGVNaXBtYXBzPWgsdC5zZXRSZW5kZXJUYXJnZXQobiw1KSx0LnJlbmRlcihlLGMpLHQuc2V0UmVuZGVyVGFyZ2V0KHUpLHQueHIuZW5hYmxlZD1sfX1mdW5jdGlvbiBNbyh0LGUsbixyLGksbyxhLHMsYyxsKXt0PXZvaWQgMCE9PXQ/dDpbXSxlPXZvaWQgMCE9PWU/ZTpvdCxhPXZvaWQgMCE9PWE/YTpGdCxXbi5jYWxsKHRoaXMsdCxlLG4scixpLG8sYSxzLGMsbCksdGhpcy5mbGlwWT0hMSx0aGlzLl9uZWVkc0ZsaXBFbnZNYXA9ITB9ZnVuY3Rpb24gU28odCxlLG4pe051bWJlci5pc0ludGVnZXIoZSkmJihjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTEN1YmVSZW5kZXJUYXJnZXQ6IGNvbnN0cnVjdG9yIHNpZ25hdHVyZSBpcyBub3cgV2ViR0xDdWJlUmVuZGVyVGFyZ2V0KCBzaXplLCBvcHRpb25zIClcIiksZT1uKSxZbi5jYWxsKHRoaXMsdCx0LGUpLGU9ZXx8e30sdGhpcy50ZXh0dXJlPW5ldyBNbyh2b2lkIDAsZS5tYXBwaW5nLGUud3JhcFMsZS53cmFwVCxlLm1hZ0ZpbHRlcixlLm1pbkZpbHRlcixlLmZvcm1hdCxlLnR5cGUsZS5hbmlzb3Ryb3B5LGUuZW5jb2RpbmcpLHRoaXMudGV4dHVyZS5fbmVlZHNGbGlwRW52TWFwPSExfWZ1bmN0aW9uIFRvKHQsZSxuLHIsaSxvLGEscyxjLGwsdSxoKXtXbi5jYWxsKHRoaXMsbnVsbCxvLGEscyxjLGwscixpLHUsaCksdGhpcy5pbWFnZT17ZGF0YTp0fHxudWxsLHdpZHRoOmV8fDEsaGVpZ2h0Om58fDF9LHRoaXMubWFnRmlsdGVyPXZvaWQgMCE9PWM/YzpmdCx0aGlzLm1pbkZpbHRlcj12b2lkIDAhPT1sP2w6ZnQsdGhpcy5nZW5lcmF0ZU1pcG1hcHM9ITEsdGhpcy5mbGlwWT0hMSx0aGlzLnVucGFja0FsaWdubWVudD0xLHRoaXMubmVlZHNVcGRhdGU9ITB9X28ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoSnIucHJvdG90eXBlKSxfby5wcm90b3R5cGUuY29uc3RydWN0b3I9X28sTW8ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoV24ucHJvdG90eXBlKSxNby5wcm90b3R5cGUuY29uc3RydWN0b3I9TW8sTW8ucHJvdG90eXBlLmlzQ3ViZVRleHR1cmU9ITAsT2JqZWN0LmRlZmluZVByb3BlcnR5KE1vLnByb3RvdHlwZSxcImltYWdlc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbWFnZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuaW1hZ2U9dH19KSxTby5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShZbi5wcm90b3R5cGUpLFNvLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1TbyxTby5wcm90b3R5cGUuaXNXZWJHTEN1YmVSZW5kZXJUYXJnZXQ9ITAsU28ucHJvdG90eXBlLmZyb21FcXVpcmVjdGFuZ3VsYXJUZXh0dXJlPWZ1bmN0aW9uKHQsZSl7dGhpcy50ZXh0dXJlLnR5cGU9ZS50eXBlLHRoaXMudGV4dHVyZS5mb3JtYXQ9VXQsdGhpcy50ZXh0dXJlLmVuY29kaW5nPWUuZW5jb2RpbmcsdGhpcy50ZXh0dXJlLmdlbmVyYXRlTWlwbWFwcz1lLmdlbmVyYXRlTWlwbWFwcyx0aGlzLnRleHR1cmUubWluRmlsdGVyPWUubWluRmlsdGVyLHRoaXMudGV4dHVyZS5tYWdGaWx0ZXI9ZS5tYWdGaWx0ZXI7Y29uc3Qgbj17dW5pZm9ybXM6e3RFcXVpcmVjdDp7dmFsdWU6bnVsbH19LHZlcnRleFNoYWRlcjpcIlxcblxcblxcdFxcdFxcdHZhcnlpbmcgdmVjMyB2V29ybGREaXJlY3Rpb247XFxuXFxuXFx0XFx0XFx0dmVjMyB0cmFuc2Zvcm1EaXJlY3Rpb24oIGluIHZlYzMgZGlyLCBpbiBtYXQ0IG1hdHJpeCApIHtcXG5cXG5cXHRcXHRcXHRcXHRyZXR1cm4gbm9ybWFsaXplKCAoIG1hdHJpeCAqIHZlYzQoIGRpciwgMC4wICkgKS54eXogKTtcXG5cXG5cXHRcXHRcXHR9XFxuXFxuXFx0XFx0XFx0dm9pZCBtYWluKCkge1xcblxcblxcdFxcdFxcdFxcdHZXb3JsZERpcmVjdGlvbiA9IHRyYW5zZm9ybURpcmVjdGlvbiggcG9zaXRpb24sIG1vZGVsTWF0cml4ICk7XFxuXFxuXFx0XFx0XFx0XFx0I2luY2x1ZGUgPGJlZ2luX3ZlcnRleD5cXG5cXHRcXHRcXHRcXHQjaW5jbHVkZSA8cHJvamVjdF92ZXJ0ZXg+XFxuXFxuXFx0XFx0XFx0fVxcblxcdFxcdFwiLGZyYWdtZW50U2hhZGVyOlwiXFxuXFxuXFx0XFx0XFx0dW5pZm9ybSBzYW1wbGVyMkQgdEVxdWlyZWN0O1xcblxcblxcdFxcdFxcdHZhcnlpbmcgdmVjMyB2V29ybGREaXJlY3Rpb247XFxuXFxuXFx0XFx0XFx0I2luY2x1ZGUgPGNvbW1vbj5cXG5cXG5cXHRcXHRcXHR2b2lkIG1haW4oKSB7XFxuXFxuXFx0XFx0XFx0XFx0dmVjMyBkaXJlY3Rpb24gPSBub3JtYWxpemUoIHZXb3JsZERpcmVjdGlvbiApO1xcblxcblxcdFxcdFxcdFxcdHZlYzIgc2FtcGxlVVYgPSBlcXVpcmVjdFV2KCBkaXJlY3Rpb24gKTtcXG5cXG5cXHRcXHRcXHRcXHRnbF9GcmFnQ29sb3IgPSB0ZXh0dXJlMkQoIHRFcXVpcmVjdCwgc2FtcGxlVVYgKTtcXG5cXG5cXHRcXHRcXHR9XFxuXFx0XFx0XCJ9LHI9bmV3IG1vKDUsNSw1KSxpPW5ldyB4byh7bmFtZTpcIkN1YmVtYXBGcm9tRXF1aXJlY3RcIix1bmlmb3JtczpnbyhuLnVuaWZvcm1zKSx2ZXJ0ZXhTaGFkZXI6bi52ZXJ0ZXhTaGFkZXIsZnJhZ21lbnRTaGFkZXI6bi5mcmFnbWVudFNoYWRlcixzaWRlOm0sYmxlbmRpbmc6eH0pO2kudW5pZm9ybXMudEVxdWlyZWN0LnZhbHVlPWU7Y29uc3Qgbz1uZXcgaG8ocixpKSxhPWUubWluRmlsdGVyO2UubWluRmlsdGVyPT09X3QmJihlLm1pbkZpbHRlcj14dCk7cmV0dXJuIG5ldyBfbygxLDEwLHRoaXMpLnVwZGF0ZSh0LG8pLGUubWluRmlsdGVyPWEsby5nZW9tZXRyeS5kaXNwb3NlKCksby5tYXRlcmlhbC5kaXNwb3NlKCksdGhpc30sU28ucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKHQsZSxuLHIpe2NvbnN0IGk9dC5nZXRSZW5kZXJUYXJnZXQoKTtmb3IobGV0IGk9MDtpPDY7aSsrKXQuc2V0UmVuZGVyVGFyZ2V0KHRoaXMsaSksdC5jbGVhcihlLG4scik7dC5zZXRSZW5kZXJUYXJnZXQoaSl9LFRvLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFduLnByb3RvdHlwZSksVG8ucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRvLFRvLnByb3RvdHlwZS5pc0RhdGFUZXh0dXJlPSEwO2NvbnN0IEVvPW5ldyBncixBbz1uZXcgS247Y2xhc3MgTG97Y29uc3RydWN0b3IodCxlLG4scixpLG8pe3RoaXMucGxhbmVzPVt2b2lkIDAhPT10P3Q6bmV3IHRpLHZvaWQgMCE9PWU/ZTpuZXcgdGksdm9pZCAwIT09bj9uOm5ldyB0aSx2b2lkIDAhPT1yP3I6bmV3IHRpLHZvaWQgMCE9PWk/aTpuZXcgdGksdm9pZCAwIT09bz9vOm5ldyB0aV19c2V0KHQsZSxuLHIsaSxvKXtjb25zdCBhPXRoaXMucGxhbmVzO3JldHVybiBhWzBdLmNvcHkodCksYVsxXS5jb3B5KGUpLGFbMl0uY29weShuKSxhWzNdLmNvcHkociksYVs0XS5jb3B5KGkpLGFbNV0uY29weShvKSx0aGlzfWNsb25lKCl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKS5jb3B5KHRoaXMpfWNvcHkodCl7Y29uc3QgZT10aGlzLnBsYW5lcztmb3IobGV0IG49MDtuPDY7bisrKWVbbl0uY29weSh0LnBsYW5lc1tuXSk7cmV0dXJuIHRoaXN9c2V0RnJvbVByb2plY3Rpb25NYXRyaXgodCl7Y29uc3QgZT10aGlzLnBsYW5lcyxuPXQuZWxlbWVudHMscj1uWzBdLGk9blsxXSxvPW5bMl0sYT1uWzNdLHM9bls0XSxjPW5bNV0sbD1uWzZdLHU9bls3XSxoPW5bOF0sZD1uWzldLHA9blsxMF0sZj1uWzExXSxtPW5bMTJdLGc9blsxM10sdj1uWzE0XSx5PW5bMTVdO3JldHVybiBlWzBdLnNldENvbXBvbmVudHMoYS1yLHUtcyxmLWgseS1tKS5ub3JtYWxpemUoKSxlWzFdLnNldENvbXBvbmVudHMoYStyLHUrcyxmK2gseSttKS5ub3JtYWxpemUoKSxlWzJdLnNldENvbXBvbmVudHMoYStpLHUrYyxmK2QseStnKS5ub3JtYWxpemUoKSxlWzNdLnNldENvbXBvbmVudHMoYS1pLHUtYyxmLWQseS1nKS5ub3JtYWxpemUoKSxlWzRdLnNldENvbXBvbmVudHMoYS1vLHUtbCxmLXAseS12KS5ub3JtYWxpemUoKSxlWzVdLnNldENvbXBvbmVudHMoYStvLHUrbCxmK3AseSt2KS5ub3JtYWxpemUoKSx0aGlzfWludGVyc2VjdHNPYmplY3QodCl7Y29uc3QgZT10Lmdlb21ldHJ5O3JldHVybiBudWxsPT09ZS5ib3VuZGluZ1NwaGVyZSYmZS5jb21wdXRlQm91bmRpbmdTcGhlcmUoKSxFby5jb3B5KGUuYm91bmRpbmdTcGhlcmUpLmFwcGx5TWF0cml4NCh0Lm1hdHJpeFdvcmxkKSx0aGlzLmludGVyc2VjdHNTcGhlcmUoRW8pfWludGVyc2VjdHNTcHJpdGUodCl7cmV0dXJuIEVvLmNlbnRlci5zZXQoMCwwLDApLEVvLnJhZGl1cz0uNzA3MTA2NzgxMTg2NTQ3NixFby5hcHBseU1hdHJpeDQodC5tYXRyaXhXb3JsZCksdGhpcy5pbnRlcnNlY3RzU3BoZXJlKEVvKX1pbnRlcnNlY3RzU3BoZXJlKHQpe2NvbnN0IGU9dGhpcy5wbGFuZXMsbj10LmNlbnRlcixyPS10LnJhZGl1cztmb3IobGV0IHQ9MDt0PDY7dCsrKXtpZihlW3RdLmRpc3RhbmNlVG9Qb2ludChuKTxyKXJldHVybiExfXJldHVybiEwfWludGVyc2VjdHNCb3godCl7Y29uc3QgZT10aGlzLnBsYW5lcztmb3IobGV0IG49MDtuPDY7bisrKXtjb25zdCByPWVbbl07aWYoQW8ueD1yLm5vcm1hbC54PjA/dC5tYXgueDp0Lm1pbi54LEFvLnk9ci5ub3JtYWwueT4wP3QubWF4Lnk6dC5taW4ueSxBby56PXIubm9ybWFsLno+MD90Lm1heC56OnQubWluLnosci5kaXN0YW5jZVRvUG9pbnQoQW8pPDApcmV0dXJuITF9cmV0dXJuITB9Y29udGFpbnNQb2ludCh0KXtjb25zdCBlPXRoaXMucGxhbmVzO2ZvcihsZXQgbj0wO248NjtuKyspaWYoZVtuXS5kaXN0YW5jZVRvUG9pbnQodCk8MClyZXR1cm4hMTtyZXR1cm4hMH19ZnVuY3Rpb24gUm8oKXtsZXQgdD1udWxsLGU9ITEsbj1udWxsLHI9bnVsbDtmdW5jdGlvbiBpKGUsbyl7bihlLG8pLHI9dC5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoaSl9cmV0dXJue3N0YXJ0OmZ1bmN0aW9uKCl7ITAhPT1lJiZudWxsIT09biYmKHI9dC5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoaSksZT0hMCl9LHN0b3A6ZnVuY3Rpb24oKXt0LmNhbmNlbEFuaW1hdGlvbkZyYW1lKHIpLGU9ITF9LHNldEFuaW1hdGlvbkxvb3A6ZnVuY3Rpb24odCl7bj10fSxzZXRDb250ZXh0OmZ1bmN0aW9uKGUpe3Q9ZX19fWZ1bmN0aW9uIFBvKHQsZSl7Y29uc3Qgbj1lLmlzV2ViR0wyLHI9bmV3IFdlYWtNYXA7cmV0dXJue2dldDpmdW5jdGlvbih0KXtyZXR1cm4gdC5pc0ludGVybGVhdmVkQnVmZmVyQXR0cmlidXRlJiYodD10LmRhdGEpLHIuZ2V0KHQpfSxyZW1vdmU6ZnVuY3Rpb24oZSl7ZS5pc0ludGVybGVhdmVkQnVmZmVyQXR0cmlidXRlJiYoZT1lLmRhdGEpO2NvbnN0IG49ci5nZXQoZSk7biYmKHQuZGVsZXRlQnVmZmVyKG4uYnVmZmVyKSxyLmRlbGV0ZShlKSl9LHVwZGF0ZTpmdW5jdGlvbihlLGkpe2lmKGUuaXNHTEJ1ZmZlckF0dHJpYnV0ZSl7Y29uc3QgdD1yLmdldChlKTtyZXR1cm4gdm9pZCgoIXR8fHQudmVyc2lvbjxlLnZlcnNpb24pJiZyLnNldChlLHtidWZmZXI6ZS5idWZmZXIsdHlwZTplLnR5cGUsYnl0ZXNQZXJFbGVtZW50OmUuZWxlbWVudFNpemUsdmVyc2lvbjplLnZlcnNpb259KSl9ZS5pc0ludGVybGVhdmVkQnVmZmVyQXR0cmlidXRlJiYoZT1lLmRhdGEpO2NvbnN0IG89ci5nZXQoZSk7dm9pZCAwPT09bz9yLnNldChlLGZ1bmN0aW9uKGUscil7Y29uc3QgaT1lLmFycmF5LG89ZS51c2FnZSxhPXQuY3JlYXRlQnVmZmVyKCk7dC5iaW5kQnVmZmVyKHIsYSksdC5idWZmZXJEYXRhKHIsaSxvKSxlLm9uVXBsb2FkQ2FsbGJhY2soKTtsZXQgcz01MTI2O3JldHVybiBpIGluc3RhbmNlb2YgRmxvYXQzMkFycmF5P3M9NTEyNjppIGluc3RhbmNlb2YgRmxvYXQ2NEFycmF5P2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMQXR0cmlidXRlczogVW5zdXBwb3J0ZWQgZGF0YSBidWZmZXIgZm9ybWF0OiBGbG9hdDY0QXJyYXkuXCIpOmkgaW5zdGFuY2VvZiBVaW50MTZBcnJheT9lLmlzRmxvYXQxNkJ1ZmZlckF0dHJpYnV0ZT9uP3M9NTEzMTpjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTEF0dHJpYnV0ZXM6IFVzYWdlIG9mIEZsb2F0MTZCdWZmZXJBdHRyaWJ1dGUgcmVxdWlyZXMgV2ViR0wyLlwiKTpzPTUxMjM6aSBpbnN0YW5jZW9mIEludDE2QXJyYXk/cz01MTIyOmkgaW5zdGFuY2VvZiBVaW50MzJBcnJheT9zPTUxMjU6aSBpbnN0YW5jZW9mIEludDMyQXJyYXk/cz01MTI0OmkgaW5zdGFuY2VvZiBJbnQ4QXJyYXk/cz01MTIwOmkgaW5zdGFuY2VvZiBVaW50OEFycmF5JiYocz01MTIxKSx7YnVmZmVyOmEsdHlwZTpzLGJ5dGVzUGVyRWxlbWVudDppLkJZVEVTX1BFUl9FTEVNRU5ULHZlcnNpb246ZS52ZXJzaW9ufX0oZSxpKSk6by52ZXJzaW9uPGUudmVyc2lvbiYmKCFmdW5jdGlvbihlLHIsaSl7Y29uc3Qgbz1yLmFycmF5LGE9ci51cGRhdGVSYW5nZTt0LmJpbmRCdWZmZXIoaSxlKSwtMT09PWEuY291bnQ/dC5idWZmZXJTdWJEYXRhKGksMCxvKToobj90LmJ1ZmZlclN1YkRhdGEoaSxhLm9mZnNldCpvLkJZVEVTX1BFUl9FTEVNRU5ULG8sYS5vZmZzZXQsYS5jb3VudCk6dC5idWZmZXJTdWJEYXRhKGksYS5vZmZzZXQqby5CWVRFU19QRVJfRUxFTUVOVCxvLnN1YmFycmF5KGEub2Zmc2V0LGEub2Zmc2V0K2EuY291bnQpKSxhLmNvdW50PS0xKX0oby5idWZmZXIsZSxpKSxvLnZlcnNpb249ZS52ZXJzaW9uKX19fWNsYXNzIENvIGV4dGVuZHMgcWl7Y29uc3RydWN0b3IodD0xLGU9MSxuPTEscj0xKXtzdXBlcigpLHRoaXMudHlwZT1cIlBsYW5lQnVmZmVyR2VvbWV0cnlcIix0aGlzLnBhcmFtZXRlcnM9e3dpZHRoOnQsaGVpZ2h0OmUsd2lkdGhTZWdtZW50czpuLGhlaWdodFNlZ21lbnRzOnJ9O2NvbnN0IGk9dC8yLG89ZS8yLGE9TWF0aC5mbG9vcihuKSxzPU1hdGguZmxvb3IociksYz1hKzEsbD1zKzEsdT10L2EsaD1lL3MsZD1bXSxwPVtdLGY9W10sbT1bXTtmb3IobGV0IHQ9MDt0PGw7dCsrKXtjb25zdCBlPXQqaC1vO2ZvcihsZXQgbj0wO248YztuKyspe2NvbnN0IHI9bip1LWk7cC5wdXNoKHIsLWUsMCksZi5wdXNoKDAsMCwxKSxtLnB1c2gobi9hKSxtLnB1c2goMS10L3MpfX1mb3IobGV0IHQ9MDt0PHM7dCsrKWZvcihsZXQgZT0wO2U8YTtlKyspe2NvbnN0IG49ZStjKnQscj1lK2MqKHQrMSksaT1lKzErYyoodCsxKSxvPWUrMStjKnQ7ZC5wdXNoKG4scixvKSxkLnB1c2gocixpLG8pfXRoaXMuc2V0SW5kZXgoZCksdGhpcy5zZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBOaShwLDMpKSx0aGlzLnNldEF0dHJpYnV0ZShcIm5vcm1hbFwiLG5ldyBOaShmLDMpKSx0aGlzLnNldEF0dHJpYnV0ZShcInV2XCIsbmV3IE5pKG0sMikpfX1jb25zdCBJbz17YWxwaGFtYXBfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX0FMUEhBTUFQXFxuXFx0ZGlmZnVzZUNvbG9yLmEgKj0gdGV4dHVyZTJEKCBhbHBoYU1hcCwgdlV2ICkuZztcXG4jZW5kaWZcIixhbHBoYW1hcF9wYXJzX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9BTFBIQU1BUFxcblxcdHVuaWZvcm0gc2FtcGxlcjJEIGFscGhhTWFwO1xcbiNlbmRpZlwiLGFscGhhdGVzdF9mcmFnbWVudDpcIiNpZmRlZiBBTFBIQVRFU1RcXG5cXHRpZiAoIGRpZmZ1c2VDb2xvci5hIDwgQUxQSEFURVNUICkgZGlzY2FyZDtcXG4jZW5kaWZcIixhb21hcF9mcmFnbWVudDpcIiNpZmRlZiBVU0VfQU9NQVBcXG5cXHRmbG9hdCBhbWJpZW50T2NjbHVzaW9uID0gKCB0ZXh0dXJlMkQoIGFvTWFwLCB2VXYyICkuciAtIDEuMCApICogYW9NYXBJbnRlbnNpdHkgKyAxLjA7XFxuXFx0cmVmbGVjdGVkTGlnaHQuaW5kaXJlY3REaWZmdXNlICo9IGFtYmllbnRPY2NsdXNpb247XFxuXFx0I2lmIGRlZmluZWQoIFVTRV9FTlZNQVAgKSAmJiBkZWZpbmVkKCBTVEFOREFSRCApXFxuXFx0XFx0ZmxvYXQgZG90TlYgPSBzYXR1cmF0ZSggZG90KCBnZW9tZXRyeS5ub3JtYWwsIGdlb21ldHJ5LnZpZXdEaXIgKSApO1xcblxcdFxcdHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0U3BlY3VsYXIgKj0gY29tcHV0ZVNwZWN1bGFyT2NjbHVzaW9uKCBkb3ROViwgYW1iaWVudE9jY2x1c2lvbiwgbWF0ZXJpYWwuc3BlY3VsYXJSb3VnaG5lc3MgKTtcXG5cXHQjZW5kaWZcXG4jZW5kaWZcIixhb21hcF9wYXJzX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9BT01BUFxcblxcdHVuaWZvcm0gc2FtcGxlcjJEIGFvTWFwO1xcblxcdHVuaWZvcm0gZmxvYXQgYW9NYXBJbnRlbnNpdHk7XFxuI2VuZGlmXCIsYmVnaW5fdmVydGV4OlwidmVjMyB0cmFuc2Zvcm1lZCA9IHZlYzMoIHBvc2l0aW9uICk7XCIsYmVnaW5ub3JtYWxfdmVydGV4OlwidmVjMyBvYmplY3ROb3JtYWwgPSB2ZWMzKCBub3JtYWwgKTtcXG4jaWZkZWYgVVNFX1RBTkdFTlRcXG5cXHR2ZWMzIG9iamVjdFRhbmdlbnQgPSB2ZWMzKCB0YW5nZW50Lnh5eiApO1xcbiNlbmRpZlwiLGJzZGZzOlwidmVjMiBpbnRlZ3JhdGVTcGVjdWxhckJSREYoIGNvbnN0IGluIGZsb2F0IGRvdE5WLCBjb25zdCBpbiBmbG9hdCByb3VnaG5lc3MgKSB7XFxuXFx0Y29uc3QgdmVjNCBjMCA9IHZlYzQoIC0gMSwgLSAwLjAyNzUsIC0gMC41NzIsIDAuMDIyICk7XFxuXFx0Y29uc3QgdmVjNCBjMSA9IHZlYzQoIDEsIDAuMDQyNSwgMS4wNCwgLSAwLjA0ICk7XFxuXFx0dmVjNCByID0gcm91Z2huZXNzICogYzAgKyBjMTtcXG5cXHRmbG9hdCBhMDA0ID0gbWluKCByLnggKiByLngsIGV4cDIoIC0gOS4yOCAqIGRvdE5WICkgKSAqIHIueCArIHIueTtcXG5cXHRyZXR1cm4gdmVjMiggLTEuMDQsIDEuMDQgKSAqIGEwMDQgKyByLnp3O1xcbn1cXG5mbG9hdCBwdW5jdHVhbExpZ2h0SW50ZW5zaXR5VG9JcnJhZGlhbmNlRmFjdG9yKCBjb25zdCBpbiBmbG9hdCBsaWdodERpc3RhbmNlLCBjb25zdCBpbiBmbG9hdCBjdXRvZmZEaXN0YW5jZSwgY29uc3QgaW4gZmxvYXQgZGVjYXlFeHBvbmVudCApIHtcXG4jaWYgZGVmaW5lZCAoIFBIWVNJQ0FMTFlfQ09SUkVDVF9MSUdIVFMgKVxcblxcdGZsb2F0IGRpc3RhbmNlRmFsbG9mZiA9IDEuMCAvIG1heCggcG93KCBsaWdodERpc3RhbmNlLCBkZWNheUV4cG9uZW50ICksIDAuMDEgKTtcXG5cXHRpZiggY3V0b2ZmRGlzdGFuY2UgPiAwLjAgKSB7XFxuXFx0XFx0ZGlzdGFuY2VGYWxsb2ZmICo9IHBvdzIoIHNhdHVyYXRlKCAxLjAgLSBwb3c0KCBsaWdodERpc3RhbmNlIC8gY3V0b2ZmRGlzdGFuY2UgKSApICk7XFxuXFx0fVxcblxcdHJldHVybiBkaXN0YW5jZUZhbGxvZmY7XFxuI2Vsc2VcXG5cXHRpZiggY3V0b2ZmRGlzdGFuY2UgPiAwLjAgJiYgZGVjYXlFeHBvbmVudCA+IDAuMCApIHtcXG5cXHRcXHRyZXR1cm4gcG93KCBzYXR1cmF0ZSggLWxpZ2h0RGlzdGFuY2UgLyBjdXRvZmZEaXN0YW5jZSArIDEuMCApLCBkZWNheUV4cG9uZW50ICk7XFxuXFx0fVxcblxcdHJldHVybiAxLjA7XFxuI2VuZGlmXFxufVxcbnZlYzMgQlJERl9EaWZmdXNlX0xhbWJlcnQoIGNvbnN0IGluIHZlYzMgZGlmZnVzZUNvbG9yICkge1xcblxcdHJldHVybiBSRUNJUFJPQ0FMX1BJICogZGlmZnVzZUNvbG9yO1xcbn1cXG52ZWMzIEZfU2NobGljayggY29uc3QgaW4gdmVjMyBzcGVjdWxhckNvbG9yLCBjb25zdCBpbiBmbG9hdCBkb3RMSCApIHtcXG5cXHRmbG9hdCBmcmVzbmVsID0gZXhwMiggKCAtNS41NTQ3MyAqIGRvdExIIC0gNi45ODMxNiApICogZG90TEggKTtcXG5cXHRyZXR1cm4gKCAxLjAgLSBzcGVjdWxhckNvbG9yICkgKiBmcmVzbmVsICsgc3BlY3VsYXJDb2xvcjtcXG59XFxudmVjMyBGX1NjaGxpY2tfUm91Z2huZXNzRGVwZW5kZW50KCBjb25zdCBpbiB2ZWMzIEYwLCBjb25zdCBpbiBmbG9hdCBkb3ROViwgY29uc3QgaW4gZmxvYXQgcm91Z2huZXNzICkge1xcblxcdGZsb2F0IGZyZXNuZWwgPSBleHAyKCAoIC01LjU1NDczICogZG90TlYgLSA2Ljk4MzE2ICkgKiBkb3ROViApO1xcblxcdHZlYzMgRnIgPSBtYXgoIHZlYzMoIDEuMCAtIHJvdWdobmVzcyApLCBGMCApIC0gRjA7XFxuXFx0cmV0dXJuIEZyICogZnJlc25lbCArIEYwO1xcbn1cXG5mbG9hdCBHX0dHWF9TbWl0aCggY29uc3QgaW4gZmxvYXQgYWxwaGEsIGNvbnN0IGluIGZsb2F0IGRvdE5MLCBjb25zdCBpbiBmbG9hdCBkb3ROViApIHtcXG5cXHRmbG9hdCBhMiA9IHBvdzIoIGFscGhhICk7XFxuXFx0ZmxvYXQgZ2wgPSBkb3ROTCArIHNxcnQoIGEyICsgKCAxLjAgLSBhMiApICogcG93MiggZG90TkwgKSApO1xcblxcdGZsb2F0IGd2ID0gZG90TlYgKyBzcXJ0KCBhMiArICggMS4wIC0gYTIgKSAqIHBvdzIoIGRvdE5WICkgKTtcXG5cXHRyZXR1cm4gMS4wIC8gKCBnbCAqIGd2ICk7XFxufVxcbmZsb2F0IEdfR0dYX1NtaXRoQ29ycmVsYXRlZCggY29uc3QgaW4gZmxvYXQgYWxwaGEsIGNvbnN0IGluIGZsb2F0IGRvdE5MLCBjb25zdCBpbiBmbG9hdCBkb3ROViApIHtcXG5cXHRmbG9hdCBhMiA9IHBvdzIoIGFscGhhICk7XFxuXFx0ZmxvYXQgZ3YgPSBkb3ROTCAqIHNxcnQoIGEyICsgKCAxLjAgLSBhMiApICogcG93MiggZG90TlYgKSApO1xcblxcdGZsb2F0IGdsID0gZG90TlYgKiBzcXJ0KCBhMiArICggMS4wIC0gYTIgKSAqIHBvdzIoIGRvdE5MICkgKTtcXG5cXHRyZXR1cm4gMC41IC8gbWF4KCBndiArIGdsLCBFUFNJTE9OICk7XFxufVxcbmZsb2F0IERfR0dYKCBjb25zdCBpbiBmbG9hdCBhbHBoYSwgY29uc3QgaW4gZmxvYXQgZG90TkggKSB7XFxuXFx0ZmxvYXQgYTIgPSBwb3cyKCBhbHBoYSApO1xcblxcdGZsb2F0IGRlbm9tID0gcG93MiggZG90TkggKSAqICggYTIgLSAxLjAgKSArIDEuMDtcXG5cXHRyZXR1cm4gUkVDSVBST0NBTF9QSSAqIGEyIC8gcG93MiggZGVub20gKTtcXG59XFxudmVjMyBCUkRGX1NwZWN1bGFyX0dHWCggY29uc3QgaW4gSW5jaWRlbnRMaWdodCBpbmNpZGVudExpZ2h0LCBjb25zdCBpbiB2ZWMzIHZpZXdEaXIsIGNvbnN0IGluIHZlYzMgbm9ybWFsLCBjb25zdCBpbiB2ZWMzIHNwZWN1bGFyQ29sb3IsIGNvbnN0IGluIGZsb2F0IHJvdWdobmVzcyApIHtcXG5cXHRmbG9hdCBhbHBoYSA9IHBvdzIoIHJvdWdobmVzcyApO1xcblxcdHZlYzMgaGFsZkRpciA9IG5vcm1hbGl6ZSggaW5jaWRlbnRMaWdodC5kaXJlY3Rpb24gKyB2aWV3RGlyICk7XFxuXFx0ZmxvYXQgZG90TkwgPSBzYXR1cmF0ZSggZG90KCBub3JtYWwsIGluY2lkZW50TGlnaHQuZGlyZWN0aW9uICkgKTtcXG5cXHRmbG9hdCBkb3ROViA9IHNhdHVyYXRlKCBkb3QoIG5vcm1hbCwgdmlld0RpciApICk7XFxuXFx0ZmxvYXQgZG90TkggPSBzYXR1cmF0ZSggZG90KCBub3JtYWwsIGhhbGZEaXIgKSApO1xcblxcdGZsb2F0IGRvdExIID0gc2F0dXJhdGUoIGRvdCggaW5jaWRlbnRMaWdodC5kaXJlY3Rpb24sIGhhbGZEaXIgKSApO1xcblxcdHZlYzMgRiA9IEZfU2NobGljayggc3BlY3VsYXJDb2xvciwgZG90TEggKTtcXG5cXHRmbG9hdCBHID0gR19HR1hfU21pdGhDb3JyZWxhdGVkKCBhbHBoYSwgZG90TkwsIGRvdE5WICk7XFxuXFx0ZmxvYXQgRCA9IERfR0dYKCBhbHBoYSwgZG90TkggKTtcXG5cXHRyZXR1cm4gRiAqICggRyAqIEQgKTtcXG59XFxudmVjMiBMVENfVXYoIGNvbnN0IGluIHZlYzMgTiwgY29uc3QgaW4gdmVjMyBWLCBjb25zdCBpbiBmbG9hdCByb3VnaG5lc3MgKSB7XFxuXFx0Y29uc3QgZmxvYXQgTFVUX1NJWkUgPSA2NC4wO1xcblxcdGNvbnN0IGZsb2F0IExVVF9TQ0FMRSA9ICggTFVUX1NJWkUgLSAxLjAgKSAvIExVVF9TSVpFO1xcblxcdGNvbnN0IGZsb2F0IExVVF9CSUFTID0gMC41IC8gTFVUX1NJWkU7XFxuXFx0ZmxvYXQgZG90TlYgPSBzYXR1cmF0ZSggZG90KCBOLCBWICkgKTtcXG5cXHR2ZWMyIHV2ID0gdmVjMiggcm91Z2huZXNzLCBzcXJ0KCAxLjAgLSBkb3ROViApICk7XFxuXFx0dXYgPSB1diAqIExVVF9TQ0FMRSArIExVVF9CSUFTO1xcblxcdHJldHVybiB1djtcXG59XFxuZmxvYXQgTFRDX0NsaXBwZWRTcGhlcmVGb3JtRmFjdG9yKCBjb25zdCBpbiB2ZWMzIGYgKSB7XFxuXFx0ZmxvYXQgbCA9IGxlbmd0aCggZiApO1xcblxcdHJldHVybiBtYXgoICggbCAqIGwgKyBmLnogKSAvICggbCArIDEuMCApLCAwLjAgKTtcXG59XFxudmVjMyBMVENfRWRnZVZlY3RvckZvcm1GYWN0b3IoIGNvbnN0IGluIHZlYzMgdjEsIGNvbnN0IGluIHZlYzMgdjIgKSB7XFxuXFx0ZmxvYXQgeCA9IGRvdCggdjEsIHYyICk7XFxuXFx0ZmxvYXQgeSA9IGFicyggeCApO1xcblxcdGZsb2F0IGEgPSAwLjg1NDM5ODUgKyAoIDAuNDk2NTE1NSArIDAuMDE0NTIwNiAqIHkgKSAqIHk7XFxuXFx0ZmxvYXQgYiA9IDMuNDE3NTk0MCArICggNC4xNjE2NzI0ICsgeSApICogeTtcXG5cXHRmbG9hdCB2ID0gYSAvIGI7XFxuXFx0ZmxvYXQgdGhldGFfc2ludGhldGEgPSAoIHggPiAwLjAgKSA/IHYgOiAwLjUgKiBpbnZlcnNlc3FydCggbWF4KCAxLjAgLSB4ICogeCwgMWUtNyApICkgLSB2O1xcblxcdHJldHVybiBjcm9zcyggdjEsIHYyICkgKiB0aGV0YV9zaW50aGV0YTtcXG59XFxudmVjMyBMVENfRXZhbHVhdGUoIGNvbnN0IGluIHZlYzMgTiwgY29uc3QgaW4gdmVjMyBWLCBjb25zdCBpbiB2ZWMzIFAsIGNvbnN0IGluIG1hdDMgbUludiwgY29uc3QgaW4gdmVjMyByZWN0Q29vcmRzWyA0IF0gKSB7XFxuXFx0dmVjMyB2MSA9IHJlY3RDb29yZHNbIDEgXSAtIHJlY3RDb29yZHNbIDAgXTtcXG5cXHR2ZWMzIHYyID0gcmVjdENvb3Jkc1sgMyBdIC0gcmVjdENvb3Jkc1sgMCBdO1xcblxcdHZlYzMgbGlnaHROb3JtYWwgPSBjcm9zcyggdjEsIHYyICk7XFxuXFx0aWYoIGRvdCggbGlnaHROb3JtYWwsIFAgLSByZWN0Q29vcmRzWyAwIF0gKSA8IDAuMCApIHJldHVybiB2ZWMzKCAwLjAgKTtcXG5cXHR2ZWMzIFQxLCBUMjtcXG5cXHRUMSA9IG5vcm1hbGl6ZSggViAtIE4gKiBkb3QoIFYsIE4gKSApO1xcblxcdFQyID0gLSBjcm9zcyggTiwgVDEgKTtcXG5cXHRtYXQzIG1hdCA9IG1JbnYgKiB0cmFuc3Bvc2VNYXQzKCBtYXQzKCBUMSwgVDIsIE4gKSApO1xcblxcdHZlYzMgY29vcmRzWyA0IF07XFxuXFx0Y29vcmRzWyAwIF0gPSBtYXQgKiAoIHJlY3RDb29yZHNbIDAgXSAtIFAgKTtcXG5cXHRjb29yZHNbIDEgXSA9IG1hdCAqICggcmVjdENvb3Jkc1sgMSBdIC0gUCApO1xcblxcdGNvb3Jkc1sgMiBdID0gbWF0ICogKCByZWN0Q29vcmRzWyAyIF0gLSBQICk7XFxuXFx0Y29vcmRzWyAzIF0gPSBtYXQgKiAoIHJlY3RDb29yZHNbIDMgXSAtIFAgKTtcXG5cXHRjb29yZHNbIDAgXSA9IG5vcm1hbGl6ZSggY29vcmRzWyAwIF0gKTtcXG5cXHRjb29yZHNbIDEgXSA9IG5vcm1hbGl6ZSggY29vcmRzWyAxIF0gKTtcXG5cXHRjb29yZHNbIDIgXSA9IG5vcm1hbGl6ZSggY29vcmRzWyAyIF0gKTtcXG5cXHRjb29yZHNbIDMgXSA9IG5vcm1hbGl6ZSggY29vcmRzWyAzIF0gKTtcXG5cXHR2ZWMzIHZlY3RvckZvcm1GYWN0b3IgPSB2ZWMzKCAwLjAgKTtcXG5cXHR2ZWN0b3JGb3JtRmFjdG9yICs9IExUQ19FZGdlVmVjdG9yRm9ybUZhY3RvciggY29vcmRzWyAwIF0sIGNvb3Jkc1sgMSBdICk7XFxuXFx0dmVjdG9yRm9ybUZhY3RvciArPSBMVENfRWRnZVZlY3RvckZvcm1GYWN0b3IoIGNvb3Jkc1sgMSBdLCBjb29yZHNbIDIgXSApO1xcblxcdHZlY3RvckZvcm1GYWN0b3IgKz0gTFRDX0VkZ2VWZWN0b3JGb3JtRmFjdG9yKCBjb29yZHNbIDIgXSwgY29vcmRzWyAzIF0gKTtcXG5cXHR2ZWN0b3JGb3JtRmFjdG9yICs9IExUQ19FZGdlVmVjdG9yRm9ybUZhY3RvciggY29vcmRzWyAzIF0sIGNvb3Jkc1sgMCBdICk7XFxuXFx0ZmxvYXQgcmVzdWx0ID0gTFRDX0NsaXBwZWRTcGhlcmVGb3JtRmFjdG9yKCB2ZWN0b3JGb3JtRmFjdG9yICk7XFxuXFx0cmV0dXJuIHZlYzMoIHJlc3VsdCApO1xcbn1cXG52ZWMzIEJSREZfU3BlY3VsYXJfR0dYX0Vudmlyb25tZW50KCBjb25zdCBpbiB2ZWMzIHZpZXdEaXIsIGNvbnN0IGluIHZlYzMgbm9ybWFsLCBjb25zdCBpbiB2ZWMzIHNwZWN1bGFyQ29sb3IsIGNvbnN0IGluIGZsb2F0IHJvdWdobmVzcyApIHtcXG5cXHRmbG9hdCBkb3ROViA9IHNhdHVyYXRlKCBkb3QoIG5vcm1hbCwgdmlld0RpciApICk7XFxuXFx0dmVjMiBicmRmID0gaW50ZWdyYXRlU3BlY3VsYXJCUkRGKCBkb3ROViwgcm91Z2huZXNzICk7XFxuXFx0cmV0dXJuIHNwZWN1bGFyQ29sb3IgKiBicmRmLnggKyBicmRmLnk7XFxufVxcbnZvaWQgQlJERl9TcGVjdWxhcl9NdWx0aXNjYXR0ZXJpbmdfRW52aXJvbm1lbnQoIGNvbnN0IGluIEdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnksIGNvbnN0IGluIHZlYzMgc3BlY3VsYXJDb2xvciwgY29uc3QgaW4gZmxvYXQgcm91Z2huZXNzLCBpbm91dCB2ZWMzIHNpbmdsZVNjYXR0ZXIsIGlub3V0IHZlYzMgbXVsdGlTY2F0dGVyICkge1xcblxcdGZsb2F0IGRvdE5WID0gc2F0dXJhdGUoIGRvdCggZ2VvbWV0cnkubm9ybWFsLCBnZW9tZXRyeS52aWV3RGlyICkgKTtcXG5cXHR2ZWMzIEYgPSBGX1NjaGxpY2tfUm91Z2huZXNzRGVwZW5kZW50KCBzcGVjdWxhckNvbG9yLCBkb3ROViwgcm91Z2huZXNzICk7XFxuXFx0dmVjMiBicmRmID0gaW50ZWdyYXRlU3BlY3VsYXJCUkRGKCBkb3ROViwgcm91Z2huZXNzICk7XFxuXFx0dmVjMyBGc3NFc3MgPSBGICogYnJkZi54ICsgYnJkZi55O1xcblxcdGZsb2F0IEVzcyA9IGJyZGYueCArIGJyZGYueTtcXG5cXHRmbG9hdCBFbXMgPSAxLjAgLSBFc3M7XFxuXFx0dmVjMyBGYXZnID0gc3BlY3VsYXJDb2xvciArICggMS4wIC0gc3BlY3VsYXJDb2xvciApICogMC4wNDc2MTk7XFx0dmVjMyBGbXMgPSBGc3NFc3MgKiBGYXZnIC8gKCAxLjAgLSBFbXMgKiBGYXZnICk7XFxuXFx0c2luZ2xlU2NhdHRlciArPSBGc3NFc3M7XFxuXFx0bXVsdGlTY2F0dGVyICs9IEZtcyAqIEVtcztcXG59XFxuZmxvYXQgR19CbGlublBob25nX0ltcGxpY2l0KCApIHtcXG5cXHRyZXR1cm4gMC4yNTtcXG59XFxuZmxvYXQgRF9CbGlublBob25nKCBjb25zdCBpbiBmbG9hdCBzaGluaW5lc3MsIGNvbnN0IGluIGZsb2F0IGRvdE5IICkge1xcblxcdHJldHVybiBSRUNJUFJPQ0FMX1BJICogKCBzaGluaW5lc3MgKiAwLjUgKyAxLjAgKSAqIHBvdyggZG90TkgsIHNoaW5pbmVzcyApO1xcbn1cXG52ZWMzIEJSREZfU3BlY3VsYXJfQmxpbm5QaG9uZyggY29uc3QgaW4gSW5jaWRlbnRMaWdodCBpbmNpZGVudExpZ2h0LCBjb25zdCBpbiBHZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5LCBjb25zdCBpbiB2ZWMzIHNwZWN1bGFyQ29sb3IsIGNvbnN0IGluIGZsb2F0IHNoaW5pbmVzcyApIHtcXG5cXHR2ZWMzIGhhbGZEaXIgPSBub3JtYWxpemUoIGluY2lkZW50TGlnaHQuZGlyZWN0aW9uICsgZ2VvbWV0cnkudmlld0RpciApO1xcblxcdGZsb2F0IGRvdE5IID0gc2F0dXJhdGUoIGRvdCggZ2VvbWV0cnkubm9ybWFsLCBoYWxmRGlyICkgKTtcXG5cXHRmbG9hdCBkb3RMSCA9IHNhdHVyYXRlKCBkb3QoIGluY2lkZW50TGlnaHQuZGlyZWN0aW9uLCBoYWxmRGlyICkgKTtcXG5cXHR2ZWMzIEYgPSBGX1NjaGxpY2soIHNwZWN1bGFyQ29sb3IsIGRvdExIICk7XFxuXFx0ZmxvYXQgRyA9IEdfQmxpbm5QaG9uZ19JbXBsaWNpdCggKTtcXG5cXHRmbG9hdCBEID0gRF9CbGlublBob25nKCBzaGluaW5lc3MsIGRvdE5IICk7XFxuXFx0cmV0dXJuIEYgKiAoIEcgKiBEICk7XFxufVxcbmZsb2F0IEdHWFJvdWdobmVzc1RvQmxpbm5FeHBvbmVudCggY29uc3QgaW4gZmxvYXQgZ2d4Um91Z2huZXNzICkge1xcblxcdHJldHVybiAoIDIuMCAvIHBvdzIoIGdneFJvdWdobmVzcyArIDAuMDAwMSApIC0gMi4wICk7XFxufVxcbmZsb2F0IEJsaW5uRXhwb25lbnRUb0dHWFJvdWdobmVzcyggY29uc3QgaW4gZmxvYXQgYmxpbm5FeHBvbmVudCApIHtcXG5cXHRyZXR1cm4gc3FydCggMi4wIC8gKCBibGlubkV4cG9uZW50ICsgMi4wICkgKTtcXG59XFxuI2lmIGRlZmluZWQoIFVTRV9TSEVFTiApXFxuZmxvYXQgRF9DaGFybGllKGZsb2F0IHJvdWdobmVzcywgZmxvYXQgTm9IKSB7XFxuXFx0ZmxvYXQgaW52QWxwaGEgPSAxLjAgLyByb3VnaG5lc3M7XFxuXFx0ZmxvYXQgY29zMmggPSBOb0ggKiBOb0g7XFxuXFx0ZmxvYXQgc2luMmggPSBtYXgoMS4wIC0gY29zMmgsIDAuMDA3ODEyNSk7XFx0cmV0dXJuICgyLjAgKyBpbnZBbHBoYSkgKiBwb3coc2luMmgsIGludkFscGhhICogMC41KSAvICgyLjAgKiBQSSk7XFxufVxcbmZsb2F0IFZfTmV1YmVsdChmbG9hdCBOb1YsIGZsb2F0IE5vTCkge1xcblxcdHJldHVybiBzYXR1cmF0ZSgxLjAgLyAoNC4wICogKE5vTCArIE5vViAtIE5vTCAqIE5vVikpKTtcXG59XFxudmVjMyBCUkRGX1NwZWN1bGFyX1NoZWVuKCBjb25zdCBpbiBmbG9hdCByb3VnaG5lc3MsIGNvbnN0IGluIHZlYzMgTCwgY29uc3QgaW4gR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeSwgdmVjMyBzcGVjdWxhckNvbG9yICkge1xcblxcdHZlYzMgTiA9IGdlb21ldHJ5Lm5vcm1hbDtcXG5cXHR2ZWMzIFYgPSBnZW9tZXRyeS52aWV3RGlyO1xcblxcdHZlYzMgSCA9IG5vcm1hbGl6ZSggViArIEwgKTtcXG5cXHRmbG9hdCBkb3ROSCA9IHNhdHVyYXRlKCBkb3QoIE4sIEggKSApO1xcblxcdHJldHVybiBzcGVjdWxhckNvbG9yICogRF9DaGFybGllKCByb3VnaG5lc3MsIGRvdE5IICkgKiBWX05ldWJlbHQoIGRvdChOLCBWKSwgZG90KE4sIEwpICk7XFxufVxcbiNlbmRpZlwiLGJ1bXBtYXBfcGFyc19mcmFnbWVudDpcIiNpZmRlZiBVU0VfQlVNUE1BUFxcblxcdHVuaWZvcm0gc2FtcGxlcjJEIGJ1bXBNYXA7XFxuXFx0dW5pZm9ybSBmbG9hdCBidW1wU2NhbGU7XFxuXFx0dmVjMiBkSGR4eV9md2QoKSB7XFxuXFx0XFx0dmVjMiBkU1RkeCA9IGRGZHgoIHZVdiApO1xcblxcdFxcdHZlYzIgZFNUZHkgPSBkRmR5KCB2VXYgKTtcXG5cXHRcXHRmbG9hdCBIbGwgPSBidW1wU2NhbGUgKiB0ZXh0dXJlMkQoIGJ1bXBNYXAsIHZVdiApLng7XFxuXFx0XFx0ZmxvYXQgZEJ4ID0gYnVtcFNjYWxlICogdGV4dHVyZTJEKCBidW1wTWFwLCB2VXYgKyBkU1RkeCApLnggLSBIbGw7XFxuXFx0XFx0ZmxvYXQgZEJ5ID0gYnVtcFNjYWxlICogdGV4dHVyZTJEKCBidW1wTWFwLCB2VXYgKyBkU1RkeSApLnggLSBIbGw7XFxuXFx0XFx0cmV0dXJuIHZlYzIoIGRCeCwgZEJ5ICk7XFxuXFx0fVxcblxcdHZlYzMgcGVydHVyYk5vcm1hbEFyYiggdmVjMyBzdXJmX3BvcywgdmVjMyBzdXJmX25vcm0sIHZlYzIgZEhkeHkgKSB7XFxuXFx0XFx0dmVjMyB2U2lnbWFYID0gdmVjMyggZEZkeCggc3VyZl9wb3MueCApLCBkRmR4KCBzdXJmX3Bvcy55ICksIGRGZHgoIHN1cmZfcG9zLnogKSApO1xcblxcdFxcdHZlYzMgdlNpZ21hWSA9IHZlYzMoIGRGZHkoIHN1cmZfcG9zLnggKSwgZEZkeSggc3VyZl9wb3MueSApLCBkRmR5KCBzdXJmX3Bvcy56ICkgKTtcXG5cXHRcXHR2ZWMzIHZOID0gc3VyZl9ub3JtO1xcblxcdFxcdHZlYzMgUjEgPSBjcm9zcyggdlNpZ21hWSwgdk4gKTtcXG5cXHRcXHR2ZWMzIFIyID0gY3Jvc3MoIHZOLCB2U2lnbWFYICk7XFxuXFx0XFx0ZmxvYXQgZkRldCA9IGRvdCggdlNpZ21hWCwgUjEgKTtcXG5cXHRcXHRmRGV0ICo9ICggZmxvYXQoIGdsX0Zyb250RmFjaW5nICkgKiAyLjAgLSAxLjAgKTtcXG5cXHRcXHR2ZWMzIHZHcmFkID0gc2lnbiggZkRldCApICogKCBkSGR4eS54ICogUjEgKyBkSGR4eS55ICogUjIgKTtcXG5cXHRcXHRyZXR1cm4gbm9ybWFsaXplKCBhYnMoIGZEZXQgKSAqIHN1cmZfbm9ybSAtIHZHcmFkICk7XFxuXFx0fVxcbiNlbmRpZlwiLGNsaXBwaW5nX3BsYW5lc19mcmFnbWVudDpcIiNpZiBOVU1fQ0xJUFBJTkdfUExBTkVTID4gMFxcblxcdHZlYzQgcGxhbmU7XFxuXFx0I3ByYWdtYSB1bnJvbGxfbG9vcF9zdGFydFxcblxcdGZvciAoIGludCBpID0gMDsgaSA8IFVOSU9OX0NMSVBQSU5HX1BMQU5FUzsgaSArKyApIHtcXG5cXHRcXHRwbGFuZSA9IGNsaXBwaW5nUGxhbmVzWyBpIF07XFxuXFx0XFx0aWYgKCBkb3QoIHZDbGlwUG9zaXRpb24sIHBsYW5lLnh5eiApID4gcGxhbmUudyApIGRpc2NhcmQ7XFxuXFx0fVxcblxcdCNwcmFnbWEgdW5yb2xsX2xvb3BfZW5kXFxuXFx0I2lmIFVOSU9OX0NMSVBQSU5HX1BMQU5FUyA8IE5VTV9DTElQUElOR19QTEFORVNcXG5cXHRcXHRib29sIGNsaXBwZWQgPSB0cnVlO1xcblxcdFxcdCNwcmFnbWEgdW5yb2xsX2xvb3Bfc3RhcnRcXG5cXHRcXHRmb3IgKCBpbnQgaSA9IFVOSU9OX0NMSVBQSU5HX1BMQU5FUzsgaSA8IE5VTV9DTElQUElOR19QTEFORVM7IGkgKysgKSB7XFxuXFx0XFx0XFx0cGxhbmUgPSBjbGlwcGluZ1BsYW5lc1sgaSBdO1xcblxcdFxcdFxcdGNsaXBwZWQgPSAoIGRvdCggdkNsaXBQb3NpdGlvbiwgcGxhbmUueHl6ICkgPiBwbGFuZS53ICkgJiYgY2xpcHBlZDtcXG5cXHRcXHR9XFxuXFx0XFx0I3ByYWdtYSB1bnJvbGxfbG9vcF9lbmRcXG5cXHRcXHRpZiAoIGNsaXBwZWQgKSBkaXNjYXJkO1xcblxcdCNlbmRpZlxcbiNlbmRpZlwiLGNsaXBwaW5nX3BsYW5lc19wYXJzX2ZyYWdtZW50OlwiI2lmIE5VTV9DTElQUElOR19QTEFORVMgPiAwXFxuXFx0dmFyeWluZyB2ZWMzIHZDbGlwUG9zaXRpb247XFxuXFx0dW5pZm9ybSB2ZWM0IGNsaXBwaW5nUGxhbmVzWyBOVU1fQ0xJUFBJTkdfUExBTkVTIF07XFxuI2VuZGlmXCIsY2xpcHBpbmdfcGxhbmVzX3BhcnNfdmVydGV4OlwiI2lmIE5VTV9DTElQUElOR19QTEFORVMgPiAwXFxuXFx0dmFyeWluZyB2ZWMzIHZDbGlwUG9zaXRpb247XFxuI2VuZGlmXCIsY2xpcHBpbmdfcGxhbmVzX3ZlcnRleDpcIiNpZiBOVU1fQ0xJUFBJTkdfUExBTkVTID4gMFxcblxcdHZDbGlwUG9zaXRpb24gPSAtIG12UG9zaXRpb24ueHl6O1xcbiNlbmRpZlwiLGNvbG9yX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9DT0xPUlxcblxcdGRpZmZ1c2VDb2xvci5yZ2IgKj0gdkNvbG9yO1xcbiNlbmRpZlwiLGNvbG9yX3BhcnNfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX0NPTE9SXFxuXFx0dmFyeWluZyB2ZWMzIHZDb2xvcjtcXG4jZW5kaWZcIixjb2xvcl9wYXJzX3ZlcnRleDpcIiNpZiBkZWZpbmVkKCBVU0VfQ09MT1IgKSB8fCBkZWZpbmVkKCBVU0VfSU5TVEFOQ0lOR19DT0xPUiApXFxuXFx0dmFyeWluZyB2ZWMzIHZDb2xvcjtcXG4jZW5kaWZcIixjb2xvcl92ZXJ0ZXg6XCIjaWYgZGVmaW5lZCggVVNFX0NPTE9SICkgfHwgZGVmaW5lZCggVVNFX0lOU1RBTkNJTkdfQ09MT1IgKVxcblxcdHZDb2xvciA9IHZlYzMoIDEuMCApO1xcbiNlbmRpZlxcbiNpZmRlZiBVU0VfQ09MT1JcXG5cXHR2Q29sb3IueHl6ICo9IGNvbG9yLnh5ejtcXG4jZW5kaWZcXG4jaWZkZWYgVVNFX0lOU1RBTkNJTkdfQ09MT1JcXG5cXHR2Q29sb3IueHl6ICo9IGluc3RhbmNlQ29sb3IueHl6O1xcbiNlbmRpZlwiLGNvbW1vbjpcIiNkZWZpbmUgUEkgMy4xNDE1OTI2NTM1ODk3OTNcXG4jZGVmaW5lIFBJMiA2LjI4MzE4NTMwNzE3OTU4NlxcbiNkZWZpbmUgUElfSEFMRiAxLjU3MDc5NjMyNjc5NDg5NjZcXG4jZGVmaW5lIFJFQ0lQUk9DQUxfUEkgMC4zMTgzMDk4ODYxODM3OTA3XFxuI2RlZmluZSBSRUNJUFJPQ0FMX1BJMiAwLjE1OTE1NDk0MzA5MTg5NTM1XFxuI2RlZmluZSBFUFNJTE9OIDFlLTZcXG4jaWZuZGVmIHNhdHVyYXRlXFxuI2RlZmluZSBzYXR1cmF0ZShhKSBjbGFtcCggYSwgMC4wLCAxLjAgKVxcbiNlbmRpZlxcbiNkZWZpbmUgd2hpdGVDb21wbGVtZW50KGEpICggMS4wIC0gc2F0dXJhdGUoIGEgKSApXFxuZmxvYXQgcG93MiggY29uc3QgaW4gZmxvYXQgeCApIHsgcmV0dXJuIHgqeDsgfVxcbmZsb2F0IHBvdzMoIGNvbnN0IGluIGZsb2F0IHggKSB7IHJldHVybiB4KngqeDsgfVxcbmZsb2F0IHBvdzQoIGNvbnN0IGluIGZsb2F0IHggKSB7IGZsb2F0IHgyID0geCp4OyByZXR1cm4geDIqeDI7IH1cXG5mbG9hdCBhdmVyYWdlKCBjb25zdCBpbiB2ZWMzIGNvbG9yICkgeyByZXR1cm4gZG90KCBjb2xvciwgdmVjMyggMC4zMzMzICkgKTsgfVxcbmhpZ2hwIGZsb2F0IHJhbmQoIGNvbnN0IGluIHZlYzIgdXYgKSB7XFxuXFx0Y29uc3QgaGlnaHAgZmxvYXQgYSA9IDEyLjk4OTgsIGIgPSA3OC4yMzMsIGMgPSA0Mzc1OC41NDUzO1xcblxcdGhpZ2hwIGZsb2F0IGR0ID0gZG90KCB1di54eSwgdmVjMiggYSxiICkgKSwgc24gPSBtb2QoIGR0LCBQSSApO1xcblxcdHJldHVybiBmcmFjdChzaW4oc24pICogYyk7XFxufVxcbiNpZmRlZiBISUdIX1BSRUNJU0lPTlxcblxcdGZsb2F0IHByZWNpc2lvblNhZmVMZW5ndGgoIHZlYzMgdiApIHsgcmV0dXJuIGxlbmd0aCggdiApOyB9XFxuI2Vsc2VcXG5cXHRmbG9hdCBtYXgzKCB2ZWMzIHYgKSB7IHJldHVybiBtYXgoIG1heCggdi54LCB2LnkgKSwgdi56ICk7IH1cXG5cXHRmbG9hdCBwcmVjaXNpb25TYWZlTGVuZ3RoKCB2ZWMzIHYgKSB7XFxuXFx0XFx0ZmxvYXQgbWF4Q29tcG9uZW50ID0gbWF4MyggYWJzKCB2ICkgKTtcXG5cXHRcXHRyZXR1cm4gbGVuZ3RoKCB2IC8gbWF4Q29tcG9uZW50ICkgKiBtYXhDb21wb25lbnQ7XFxuXFx0fVxcbiNlbmRpZlxcbnN0cnVjdCBJbmNpZGVudExpZ2h0IHtcXG5cXHR2ZWMzIGNvbG9yO1xcblxcdHZlYzMgZGlyZWN0aW9uO1xcblxcdGJvb2wgdmlzaWJsZTtcXG59O1xcbnN0cnVjdCBSZWZsZWN0ZWRMaWdodCB7XFxuXFx0dmVjMyBkaXJlY3REaWZmdXNlO1xcblxcdHZlYzMgZGlyZWN0U3BlY3VsYXI7XFxuXFx0dmVjMyBpbmRpcmVjdERpZmZ1c2U7XFxuXFx0dmVjMyBpbmRpcmVjdFNwZWN1bGFyO1xcbn07XFxuc3RydWN0IEdlb21ldHJpY0NvbnRleHQge1xcblxcdHZlYzMgcG9zaXRpb247XFxuXFx0dmVjMyBub3JtYWw7XFxuXFx0dmVjMyB2aWV3RGlyO1xcbiNpZmRlZiBDTEVBUkNPQVRcXG5cXHR2ZWMzIGNsZWFyY29hdE5vcm1hbDtcXG4jZW5kaWZcXG59O1xcbnZlYzMgdHJhbnNmb3JtRGlyZWN0aW9uKCBpbiB2ZWMzIGRpciwgaW4gbWF0NCBtYXRyaXggKSB7XFxuXFx0cmV0dXJuIG5vcm1hbGl6ZSggKCBtYXRyaXggKiB2ZWM0KCBkaXIsIDAuMCApICkueHl6ICk7XFxufVxcbnZlYzMgaW52ZXJzZVRyYW5zZm9ybURpcmVjdGlvbiggaW4gdmVjMyBkaXIsIGluIG1hdDQgbWF0cml4ICkge1xcblxcdHJldHVybiBub3JtYWxpemUoICggdmVjNCggZGlyLCAwLjAgKSAqIG1hdHJpeCApLnh5eiApO1xcbn1cXG52ZWMzIHByb2plY3RPblBsYW5lKGluIHZlYzMgcG9pbnQsIGluIHZlYzMgcG9pbnRPblBsYW5lLCBpbiB2ZWMzIHBsYW5lTm9ybWFsICkge1xcblxcdGZsb2F0IGRpc3RhbmNlID0gZG90KCBwbGFuZU5vcm1hbCwgcG9pbnQgLSBwb2ludE9uUGxhbmUgKTtcXG5cXHRyZXR1cm4gLSBkaXN0YW5jZSAqIHBsYW5lTm9ybWFsICsgcG9pbnQ7XFxufVxcbmZsb2F0IHNpZGVPZlBsYW5lKCBpbiB2ZWMzIHBvaW50LCBpbiB2ZWMzIHBvaW50T25QbGFuZSwgaW4gdmVjMyBwbGFuZU5vcm1hbCApIHtcXG5cXHRyZXR1cm4gc2lnbiggZG90KCBwb2ludCAtIHBvaW50T25QbGFuZSwgcGxhbmVOb3JtYWwgKSApO1xcbn1cXG52ZWMzIGxpbmVQbGFuZUludGVyc2VjdCggaW4gdmVjMyBwb2ludE9uTGluZSwgaW4gdmVjMyBsaW5lRGlyZWN0aW9uLCBpbiB2ZWMzIHBvaW50T25QbGFuZSwgaW4gdmVjMyBwbGFuZU5vcm1hbCApIHtcXG5cXHRyZXR1cm4gbGluZURpcmVjdGlvbiAqICggZG90KCBwbGFuZU5vcm1hbCwgcG9pbnRPblBsYW5lIC0gcG9pbnRPbkxpbmUgKSAvIGRvdCggcGxhbmVOb3JtYWwsIGxpbmVEaXJlY3Rpb24gKSApICsgcG9pbnRPbkxpbmU7XFxufVxcbm1hdDMgdHJhbnNwb3NlTWF0MyggY29uc3QgaW4gbWF0MyBtICkge1xcblxcdG1hdDMgdG1wO1xcblxcdHRtcFsgMCBdID0gdmVjMyggbVsgMCBdLngsIG1bIDEgXS54LCBtWyAyIF0ueCApO1xcblxcdHRtcFsgMSBdID0gdmVjMyggbVsgMCBdLnksIG1bIDEgXS55LCBtWyAyIF0ueSApO1xcblxcdHRtcFsgMiBdID0gdmVjMyggbVsgMCBdLnosIG1bIDEgXS56LCBtWyAyIF0ueiApO1xcblxcdHJldHVybiB0bXA7XFxufVxcbmZsb2F0IGxpbmVhclRvUmVsYXRpdmVMdW1pbmFuY2UoIGNvbnN0IGluIHZlYzMgY29sb3IgKSB7XFxuXFx0dmVjMyB3ZWlnaHRzID0gdmVjMyggMC4yMTI2LCAwLjcxNTIsIDAuMDcyMiApO1xcblxcdHJldHVybiBkb3QoIHdlaWdodHMsIGNvbG9yLnJnYiApO1xcbn1cXG5ib29sIGlzUGVyc3BlY3RpdmVNYXRyaXgoIG1hdDQgbSApIHtcXG5cXHRyZXR1cm4gbVsgMiBdWyAzIF0gPT0gLSAxLjA7XFxufVxcbnZlYzIgZXF1aXJlY3RVdiggaW4gdmVjMyBkaXIgKSB7XFxuXFx0ZmxvYXQgdSA9IGF0YW4oIGRpci56LCBkaXIueCApICogUkVDSVBST0NBTF9QSTIgKyAwLjU7XFxuXFx0ZmxvYXQgdiA9IGFzaW4oIGNsYW1wKCBkaXIueSwgLSAxLjAsIDEuMCApICkgKiBSRUNJUFJPQ0FMX1BJICsgMC41O1xcblxcdHJldHVybiB2ZWMyKCB1LCB2ICk7XFxufVwiLGN1YmVfdXZfcmVmbGVjdGlvbl9mcmFnbWVudDpcIiNpZmRlZiBFTlZNQVBfVFlQRV9DVUJFX1VWXFxuXFx0I2RlZmluZSBjdWJlVVZfbWF4TWlwTGV2ZWwgOC4wXFxuXFx0I2RlZmluZSBjdWJlVVZfbWluTWlwTGV2ZWwgNC4wXFxuXFx0I2RlZmluZSBjdWJlVVZfbWF4VGlsZVNpemUgMjU2LjBcXG5cXHQjZGVmaW5lIGN1YmVVVl9taW5UaWxlU2l6ZSAxNi4wXFxuXFx0ZmxvYXQgZ2V0RmFjZSggdmVjMyBkaXJlY3Rpb24gKSB7XFxuXFx0XFx0dmVjMyBhYnNEaXJlY3Rpb24gPSBhYnMoIGRpcmVjdGlvbiApO1xcblxcdFxcdGZsb2F0IGZhY2UgPSAtIDEuMDtcXG5cXHRcXHRpZiAoIGFic0RpcmVjdGlvbi54ID4gYWJzRGlyZWN0aW9uLnogKSB7XFxuXFx0XFx0XFx0aWYgKCBhYnNEaXJlY3Rpb24ueCA+IGFic0RpcmVjdGlvbi55IClcXG5cXHRcXHRcXHRcXHRmYWNlID0gZGlyZWN0aW9uLnggPiAwLjAgPyAwLjAgOiAzLjA7XFxuXFx0XFx0XFx0ZWxzZVxcblxcdFxcdFxcdFxcdGZhY2UgPSBkaXJlY3Rpb24ueSA+IDAuMCA/IDEuMCA6IDQuMDtcXG5cXHRcXHR9IGVsc2Uge1xcblxcdFxcdFxcdGlmICggYWJzRGlyZWN0aW9uLnogPiBhYnNEaXJlY3Rpb24ueSApXFxuXFx0XFx0XFx0XFx0ZmFjZSA9IGRpcmVjdGlvbi56ID4gMC4wID8gMi4wIDogNS4wO1xcblxcdFxcdFxcdGVsc2VcXG5cXHRcXHRcXHRcXHRmYWNlID0gZGlyZWN0aW9uLnkgPiAwLjAgPyAxLjAgOiA0LjA7XFxuXFx0XFx0fVxcblxcdFxcdHJldHVybiBmYWNlO1xcblxcdH1cXG5cXHR2ZWMyIGdldFVWKCB2ZWMzIGRpcmVjdGlvbiwgZmxvYXQgZmFjZSApIHtcXG5cXHRcXHR2ZWMyIHV2O1xcblxcdFxcdGlmICggZmFjZSA9PSAwLjAgKSB7XFxuXFx0XFx0XFx0dXYgPSB2ZWMyKCBkaXJlY3Rpb24ueiwgZGlyZWN0aW9uLnkgKSAvIGFicyggZGlyZWN0aW9uLnggKTtcXG5cXHRcXHR9IGVsc2UgaWYgKCBmYWNlID09IDEuMCApIHtcXG5cXHRcXHRcXHR1diA9IHZlYzIoIC0gZGlyZWN0aW9uLngsIC0gZGlyZWN0aW9uLnogKSAvIGFicyggZGlyZWN0aW9uLnkgKTtcXG5cXHRcXHR9IGVsc2UgaWYgKCBmYWNlID09IDIuMCApIHtcXG5cXHRcXHRcXHR1diA9IHZlYzIoIC0gZGlyZWN0aW9uLngsIGRpcmVjdGlvbi55ICkgLyBhYnMoIGRpcmVjdGlvbi56ICk7XFxuXFx0XFx0fSBlbHNlIGlmICggZmFjZSA9PSAzLjAgKSB7XFxuXFx0XFx0XFx0dXYgPSB2ZWMyKCAtIGRpcmVjdGlvbi56LCBkaXJlY3Rpb24ueSApIC8gYWJzKCBkaXJlY3Rpb24ueCApO1xcblxcdFxcdH0gZWxzZSBpZiAoIGZhY2UgPT0gNC4wICkge1xcblxcdFxcdFxcdHV2ID0gdmVjMiggLSBkaXJlY3Rpb24ueCwgZGlyZWN0aW9uLnogKSAvIGFicyggZGlyZWN0aW9uLnkgKTtcXG5cXHRcXHR9IGVsc2Uge1xcblxcdFxcdFxcdHV2ID0gdmVjMiggZGlyZWN0aW9uLngsIGRpcmVjdGlvbi55ICkgLyBhYnMoIGRpcmVjdGlvbi56ICk7XFxuXFx0XFx0fVxcblxcdFxcdHJldHVybiAwLjUgKiAoIHV2ICsgMS4wICk7XFxuXFx0fVxcblxcdHZlYzMgYmlsaW5lYXJDdWJlVVYoIHNhbXBsZXIyRCBlbnZNYXAsIHZlYzMgZGlyZWN0aW9uLCBmbG9hdCBtaXBJbnQgKSB7XFxuXFx0XFx0ZmxvYXQgZmFjZSA9IGdldEZhY2UoIGRpcmVjdGlvbiApO1xcblxcdFxcdGZsb2F0IGZpbHRlckludCA9IG1heCggY3ViZVVWX21pbk1pcExldmVsIC0gbWlwSW50LCAwLjAgKTtcXG5cXHRcXHRtaXBJbnQgPSBtYXgoIG1pcEludCwgY3ViZVVWX21pbk1pcExldmVsICk7XFxuXFx0XFx0ZmxvYXQgZmFjZVNpemUgPSBleHAyKCBtaXBJbnQgKTtcXG5cXHRcXHRmbG9hdCB0ZXhlbFNpemUgPSAxLjAgLyAoIDMuMCAqIGN1YmVVVl9tYXhUaWxlU2l6ZSApO1xcblxcdFxcdHZlYzIgdXYgPSBnZXRVViggZGlyZWN0aW9uLCBmYWNlICkgKiAoIGZhY2VTaXplIC0gMS4wICk7XFxuXFx0XFx0dmVjMiBmID0gZnJhY3QoIHV2ICk7XFxuXFx0XFx0dXYgKz0gMC41IC0gZjtcXG5cXHRcXHRpZiAoIGZhY2UgPiAyLjAgKSB7XFxuXFx0XFx0XFx0dXYueSArPSBmYWNlU2l6ZTtcXG5cXHRcXHRcXHRmYWNlIC09IDMuMDtcXG5cXHRcXHR9XFxuXFx0XFx0dXYueCArPSBmYWNlICogZmFjZVNpemU7XFxuXFx0XFx0aWYgKCBtaXBJbnQgPCBjdWJlVVZfbWF4TWlwTGV2ZWwgKSB7XFxuXFx0XFx0XFx0dXYueSArPSAyLjAgKiBjdWJlVVZfbWF4VGlsZVNpemU7XFxuXFx0XFx0fVxcblxcdFxcdHV2LnkgKz0gZmlsdGVySW50ICogMi4wICogY3ViZVVWX21pblRpbGVTaXplO1xcblxcdFxcdHV2LnggKz0gMy4wICogbWF4KCAwLjAsIGN1YmVVVl9tYXhUaWxlU2l6ZSAtIDIuMCAqIGZhY2VTaXplICk7XFxuXFx0XFx0dXYgKj0gdGV4ZWxTaXplO1xcblxcdFxcdHZlYzMgdGwgPSBlbnZNYXBUZXhlbFRvTGluZWFyKCB0ZXh0dXJlMkQoIGVudk1hcCwgdXYgKSApLnJnYjtcXG5cXHRcXHR1di54ICs9IHRleGVsU2l6ZTtcXG5cXHRcXHR2ZWMzIHRyID0gZW52TWFwVGV4ZWxUb0xpbmVhciggdGV4dHVyZTJEKCBlbnZNYXAsIHV2ICkgKS5yZ2I7XFxuXFx0XFx0dXYueSArPSB0ZXhlbFNpemU7XFxuXFx0XFx0dmVjMyBiciA9IGVudk1hcFRleGVsVG9MaW5lYXIoIHRleHR1cmUyRCggZW52TWFwLCB1diApICkucmdiO1xcblxcdFxcdHV2LnggLT0gdGV4ZWxTaXplO1xcblxcdFxcdHZlYzMgYmwgPSBlbnZNYXBUZXhlbFRvTGluZWFyKCB0ZXh0dXJlMkQoIGVudk1hcCwgdXYgKSApLnJnYjtcXG5cXHRcXHR2ZWMzIHRtID0gbWl4KCB0bCwgdHIsIGYueCApO1xcblxcdFxcdHZlYzMgYm0gPSBtaXgoIGJsLCBiciwgZi54ICk7XFxuXFx0XFx0cmV0dXJuIG1peCggdG0sIGJtLCBmLnkgKTtcXG5cXHR9XFxuXFx0I2RlZmluZSByMCAxLjBcXG5cXHQjZGVmaW5lIHYwIDAuMzM5XFxuXFx0I2RlZmluZSBtMCAtIDIuMFxcblxcdCNkZWZpbmUgcjEgMC44XFxuXFx0I2RlZmluZSB2MSAwLjI3NlxcblxcdCNkZWZpbmUgbTEgLSAxLjBcXG5cXHQjZGVmaW5lIHI0IDAuNFxcblxcdCNkZWZpbmUgdjQgMC4wNDZcXG5cXHQjZGVmaW5lIG00IDIuMFxcblxcdCNkZWZpbmUgcjUgMC4zMDVcXG5cXHQjZGVmaW5lIHY1IDAuMDE2XFxuXFx0I2RlZmluZSBtNSAzLjBcXG5cXHQjZGVmaW5lIHI2IDAuMjFcXG5cXHQjZGVmaW5lIHY2IDAuMDAzOFxcblxcdCNkZWZpbmUgbTYgNC4wXFxuXFx0ZmxvYXQgcm91Z2huZXNzVG9NaXAoIGZsb2F0IHJvdWdobmVzcyApIHtcXG5cXHRcXHRmbG9hdCBtaXAgPSAwLjA7XFxuXFx0XFx0aWYgKCByb3VnaG5lc3MgPj0gcjEgKSB7XFxuXFx0XFx0XFx0bWlwID0gKCByMCAtIHJvdWdobmVzcyApICogKCBtMSAtIG0wICkgLyAoIHIwIC0gcjEgKSArIG0wO1xcblxcdFxcdH0gZWxzZSBpZiAoIHJvdWdobmVzcyA+PSByNCApIHtcXG5cXHRcXHRcXHRtaXAgPSAoIHIxIC0gcm91Z2huZXNzICkgKiAoIG00IC0gbTEgKSAvICggcjEgLSByNCApICsgbTE7XFxuXFx0XFx0fSBlbHNlIGlmICggcm91Z2huZXNzID49IHI1ICkge1xcblxcdFxcdFxcdG1pcCA9ICggcjQgLSByb3VnaG5lc3MgKSAqICggbTUgLSBtNCApIC8gKCByNCAtIHI1ICkgKyBtNDtcXG5cXHRcXHR9IGVsc2UgaWYgKCByb3VnaG5lc3MgPj0gcjYgKSB7XFxuXFx0XFx0XFx0bWlwID0gKCByNSAtIHJvdWdobmVzcyApICogKCBtNiAtIG01ICkgLyAoIHI1IC0gcjYgKSArIG01O1xcblxcdFxcdH0gZWxzZSB7XFxuXFx0XFx0XFx0bWlwID0gLSAyLjAgKiBsb2cyKCAxLjE2ICogcm91Z2huZXNzICk7XFx0XFx0fVxcblxcdFxcdHJldHVybiBtaXA7XFxuXFx0fVxcblxcdHZlYzQgdGV4dHVyZUN1YmVVViggc2FtcGxlcjJEIGVudk1hcCwgdmVjMyBzYW1wbGVEaXIsIGZsb2F0IHJvdWdobmVzcyApIHtcXG5cXHRcXHRmbG9hdCBtaXAgPSBjbGFtcCggcm91Z2huZXNzVG9NaXAoIHJvdWdobmVzcyApLCBtMCwgY3ViZVVWX21heE1pcExldmVsICk7XFxuXFx0XFx0ZmxvYXQgbWlwRiA9IGZyYWN0KCBtaXAgKTtcXG5cXHRcXHRmbG9hdCBtaXBJbnQgPSBmbG9vciggbWlwICk7XFxuXFx0XFx0dmVjMyBjb2xvcjAgPSBiaWxpbmVhckN1YmVVViggZW52TWFwLCBzYW1wbGVEaXIsIG1pcEludCApO1xcblxcdFxcdGlmICggbWlwRiA9PSAwLjAgKSB7XFxuXFx0XFx0XFx0cmV0dXJuIHZlYzQoIGNvbG9yMCwgMS4wICk7XFxuXFx0XFx0fSBlbHNlIHtcXG5cXHRcXHRcXHR2ZWMzIGNvbG9yMSA9IGJpbGluZWFyQ3ViZVVWKCBlbnZNYXAsIHNhbXBsZURpciwgbWlwSW50ICsgMS4wICk7XFxuXFx0XFx0XFx0cmV0dXJuIHZlYzQoIG1peCggY29sb3IwLCBjb2xvcjEsIG1pcEYgKSwgMS4wICk7XFxuXFx0XFx0fVxcblxcdH1cXG4jZW5kaWZcIixkZWZhdWx0bm9ybWFsX3ZlcnRleDpcInZlYzMgdHJhbnNmb3JtZWROb3JtYWwgPSBvYmplY3ROb3JtYWw7XFxuI2lmZGVmIFVTRV9JTlNUQU5DSU5HXFxuXFx0bWF0MyBtID0gbWF0MyggaW5zdGFuY2VNYXRyaXggKTtcXG5cXHR0cmFuc2Zvcm1lZE5vcm1hbCAvPSB2ZWMzKCBkb3QoIG1bIDAgXSwgbVsgMCBdICksIGRvdCggbVsgMSBdLCBtWyAxIF0gKSwgZG90KCBtWyAyIF0sIG1bIDIgXSApICk7XFxuXFx0dHJhbnNmb3JtZWROb3JtYWwgPSBtICogdHJhbnNmb3JtZWROb3JtYWw7XFxuI2VuZGlmXFxudHJhbnNmb3JtZWROb3JtYWwgPSBub3JtYWxNYXRyaXggKiB0cmFuc2Zvcm1lZE5vcm1hbDtcXG4jaWZkZWYgRkxJUF9TSURFRFxcblxcdHRyYW5zZm9ybWVkTm9ybWFsID0gLSB0cmFuc2Zvcm1lZE5vcm1hbDtcXG4jZW5kaWZcXG4jaWZkZWYgVVNFX1RBTkdFTlRcXG5cXHR2ZWMzIHRyYW5zZm9ybWVkVGFuZ2VudCA9ICggbW9kZWxWaWV3TWF0cml4ICogdmVjNCggb2JqZWN0VGFuZ2VudCwgMC4wICkgKS54eXo7XFxuXFx0I2lmZGVmIEZMSVBfU0lERURcXG5cXHRcXHR0cmFuc2Zvcm1lZFRhbmdlbnQgPSAtIHRyYW5zZm9ybWVkVGFuZ2VudDtcXG5cXHQjZW5kaWZcXG4jZW5kaWZcIixkaXNwbGFjZW1lbnRtYXBfcGFyc192ZXJ0ZXg6XCIjaWZkZWYgVVNFX0RJU1BMQUNFTUVOVE1BUFxcblxcdHVuaWZvcm0gc2FtcGxlcjJEIGRpc3BsYWNlbWVudE1hcDtcXG5cXHR1bmlmb3JtIGZsb2F0IGRpc3BsYWNlbWVudFNjYWxlO1xcblxcdHVuaWZvcm0gZmxvYXQgZGlzcGxhY2VtZW50QmlhcztcXG4jZW5kaWZcIixkaXNwbGFjZW1lbnRtYXBfdmVydGV4OlwiI2lmZGVmIFVTRV9ESVNQTEFDRU1FTlRNQVBcXG5cXHR0cmFuc2Zvcm1lZCArPSBub3JtYWxpemUoIG9iamVjdE5vcm1hbCApICogKCB0ZXh0dXJlMkQoIGRpc3BsYWNlbWVudE1hcCwgdlV2ICkueCAqIGRpc3BsYWNlbWVudFNjYWxlICsgZGlzcGxhY2VtZW50QmlhcyApO1xcbiNlbmRpZlwiLGVtaXNzaXZlbWFwX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9FTUlTU0lWRU1BUFxcblxcdHZlYzQgZW1pc3NpdmVDb2xvciA9IHRleHR1cmUyRCggZW1pc3NpdmVNYXAsIHZVdiApO1xcblxcdGVtaXNzaXZlQ29sb3IucmdiID0gZW1pc3NpdmVNYXBUZXhlbFRvTGluZWFyKCBlbWlzc2l2ZUNvbG9yICkucmdiO1xcblxcdHRvdGFsRW1pc3NpdmVSYWRpYW5jZSAqPSBlbWlzc2l2ZUNvbG9yLnJnYjtcXG4jZW5kaWZcIixlbWlzc2l2ZW1hcF9wYXJzX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9FTUlTU0lWRU1BUFxcblxcdHVuaWZvcm0gc2FtcGxlcjJEIGVtaXNzaXZlTWFwO1xcbiNlbmRpZlwiLGVuY29kaW5nc19mcmFnbWVudDpcImdsX0ZyYWdDb2xvciA9IGxpbmVhclRvT3V0cHV0VGV4ZWwoIGdsX0ZyYWdDb2xvciApO1wiLGVuY29kaW5nc19wYXJzX2ZyYWdtZW50OlwiXFxudmVjNCBMaW5lYXJUb0xpbmVhciggaW4gdmVjNCB2YWx1ZSApIHtcXG5cXHRyZXR1cm4gdmFsdWU7XFxufVxcbnZlYzQgR2FtbWFUb0xpbmVhciggaW4gdmVjNCB2YWx1ZSwgaW4gZmxvYXQgZ2FtbWFGYWN0b3IgKSB7XFxuXFx0cmV0dXJuIHZlYzQoIHBvdyggdmFsdWUucmdiLCB2ZWMzKCBnYW1tYUZhY3RvciApICksIHZhbHVlLmEgKTtcXG59XFxudmVjNCBMaW5lYXJUb0dhbW1hKCBpbiB2ZWM0IHZhbHVlLCBpbiBmbG9hdCBnYW1tYUZhY3RvciApIHtcXG5cXHRyZXR1cm4gdmVjNCggcG93KCB2YWx1ZS5yZ2IsIHZlYzMoIDEuMCAvIGdhbW1hRmFjdG9yICkgKSwgdmFsdWUuYSApO1xcbn1cXG52ZWM0IHNSR0JUb0xpbmVhciggaW4gdmVjNCB2YWx1ZSApIHtcXG5cXHRyZXR1cm4gdmVjNCggbWl4KCBwb3coIHZhbHVlLnJnYiAqIDAuOTQ3ODY3Mjk4NiArIHZlYzMoIDAuMDUyMTMyNzAxNCApLCB2ZWMzKCAyLjQgKSApLCB2YWx1ZS5yZ2IgKiAwLjA3NzM5OTM4MDgsIHZlYzMoIGxlc3NUaGFuRXF1YWwoIHZhbHVlLnJnYiwgdmVjMyggMC4wNDA0NSApICkgKSApLCB2YWx1ZS5hICk7XFxufVxcbnZlYzQgTGluZWFyVG9zUkdCKCBpbiB2ZWM0IHZhbHVlICkge1xcblxcdHJldHVybiB2ZWM0KCBtaXgoIHBvdyggdmFsdWUucmdiLCB2ZWMzKCAwLjQxNjY2ICkgKSAqIDEuMDU1IC0gdmVjMyggMC4wNTUgKSwgdmFsdWUucmdiICogMTIuOTIsIHZlYzMoIGxlc3NUaGFuRXF1YWwoIHZhbHVlLnJnYiwgdmVjMyggMC4wMDMxMzA4ICkgKSApICksIHZhbHVlLmEgKTtcXG59XFxudmVjNCBSR0JFVG9MaW5lYXIoIGluIHZlYzQgdmFsdWUgKSB7XFxuXFx0cmV0dXJuIHZlYzQoIHZhbHVlLnJnYiAqIGV4cDIoIHZhbHVlLmEgKiAyNTUuMCAtIDEyOC4wICksIDEuMCApO1xcbn1cXG52ZWM0IExpbmVhclRvUkdCRSggaW4gdmVjNCB2YWx1ZSApIHtcXG5cXHRmbG9hdCBtYXhDb21wb25lbnQgPSBtYXgoIG1heCggdmFsdWUuciwgdmFsdWUuZyApLCB2YWx1ZS5iICk7XFxuXFx0ZmxvYXQgZkV4cCA9IGNsYW1wKCBjZWlsKCBsb2cyKCBtYXhDb21wb25lbnQgKSApLCAtMTI4LjAsIDEyNy4wICk7XFxuXFx0cmV0dXJuIHZlYzQoIHZhbHVlLnJnYiAvIGV4cDIoIGZFeHAgKSwgKCBmRXhwICsgMTI4LjAgKSAvIDI1NS4wICk7XFxufVxcbnZlYzQgUkdCTVRvTGluZWFyKCBpbiB2ZWM0IHZhbHVlLCBpbiBmbG9hdCBtYXhSYW5nZSApIHtcXG5cXHRyZXR1cm4gdmVjNCggdmFsdWUucmdiICogdmFsdWUuYSAqIG1heFJhbmdlLCAxLjAgKTtcXG59XFxudmVjNCBMaW5lYXJUb1JHQk0oIGluIHZlYzQgdmFsdWUsIGluIGZsb2F0IG1heFJhbmdlICkge1xcblxcdGZsb2F0IG1heFJHQiA9IG1heCggdmFsdWUuciwgbWF4KCB2YWx1ZS5nLCB2YWx1ZS5iICkgKTtcXG5cXHRmbG9hdCBNID0gY2xhbXAoIG1heFJHQiAvIG1heFJhbmdlLCAwLjAsIDEuMCApO1xcblxcdE0gPSBjZWlsKCBNICogMjU1LjAgKSAvIDI1NS4wO1xcblxcdHJldHVybiB2ZWM0KCB2YWx1ZS5yZ2IgLyAoIE0gKiBtYXhSYW5nZSApLCBNICk7XFxufVxcbnZlYzQgUkdCRFRvTGluZWFyKCBpbiB2ZWM0IHZhbHVlLCBpbiBmbG9hdCBtYXhSYW5nZSApIHtcXG5cXHRyZXR1cm4gdmVjNCggdmFsdWUucmdiICogKCAoIG1heFJhbmdlIC8gMjU1LjAgKSAvIHZhbHVlLmEgKSwgMS4wICk7XFxufVxcbnZlYzQgTGluZWFyVG9SR0JEKCBpbiB2ZWM0IHZhbHVlLCBpbiBmbG9hdCBtYXhSYW5nZSApIHtcXG5cXHRmbG9hdCBtYXhSR0IgPSBtYXgoIHZhbHVlLnIsIG1heCggdmFsdWUuZywgdmFsdWUuYiApICk7XFxuXFx0ZmxvYXQgRCA9IG1heCggbWF4UmFuZ2UgLyBtYXhSR0IsIDEuMCApO1xcblxcdEQgPSBjbGFtcCggZmxvb3IoIEQgKSAvIDI1NS4wLCAwLjAsIDEuMCApO1xcblxcdHJldHVybiB2ZWM0KCB2YWx1ZS5yZ2IgKiAoIEQgKiAoIDI1NS4wIC8gbWF4UmFuZ2UgKSApLCBEICk7XFxufVxcbmNvbnN0IG1hdDMgY0xvZ0x1dk0gPSBtYXQzKCAwLjIyMDksIDAuMzM5MCwgMC40MTg0LCAwLjExMzgsIDAuNjc4MCwgMC43MzE5LCAwLjAxMDIsIDAuMTEzMCwgMC4yOTY5ICk7XFxudmVjNCBMaW5lYXJUb0xvZ0x1diggaW4gdmVjNCB2YWx1ZSApIHtcXG5cXHR2ZWMzIFhwX1lfWFlacCA9IGNMb2dMdXZNICogdmFsdWUucmdiO1xcblxcdFhwX1lfWFlacCA9IG1heCggWHBfWV9YWVpwLCB2ZWMzKCAxZS02LCAxZS02LCAxZS02ICkgKTtcXG5cXHR2ZWM0IHZSZXN1bHQ7XFxuXFx0dlJlc3VsdC54eSA9IFhwX1lfWFlacC54eSAvIFhwX1lfWFlacC56O1xcblxcdGZsb2F0IExlID0gMi4wICogbG9nMihYcF9ZX1hZWnAueSkgKyAxMjcuMDtcXG5cXHR2UmVzdWx0LncgPSBmcmFjdCggTGUgKTtcXG5cXHR2UmVzdWx0LnogPSAoIExlIC0gKCBmbG9vciggdlJlc3VsdC53ICogMjU1LjAgKSApIC8gMjU1LjAgKSAvIDI1NS4wO1xcblxcdHJldHVybiB2UmVzdWx0O1xcbn1cXG5jb25zdCBtYXQzIGNMb2dMdXZJbnZlcnNlTSA9IG1hdDMoIDYuMDAxNCwgLTIuNzAwOCwgLTEuNzk5NiwgLTEuMzMyMCwgMy4xMDI5LCAtNS43NzIxLCAwLjMwMDgsIC0xLjA4ODIsIDUuNjI2OCApO1xcbnZlYzQgTG9nTHV2VG9MaW5lYXIoIGluIHZlYzQgdmFsdWUgKSB7XFxuXFx0ZmxvYXQgTGUgPSB2YWx1ZS56ICogMjU1LjAgKyB2YWx1ZS53O1xcblxcdHZlYzMgWHBfWV9YWVpwO1xcblxcdFhwX1lfWFlacC55ID0gZXhwMiggKCBMZSAtIDEyNy4wICkgLyAyLjAgKTtcXG5cXHRYcF9ZX1hZWnAueiA9IFhwX1lfWFlacC55IC8gdmFsdWUueTtcXG5cXHRYcF9ZX1hZWnAueCA9IHZhbHVlLnggKiBYcF9ZX1hZWnAuejtcXG5cXHR2ZWMzIHZSR0IgPSBjTG9nTHV2SW52ZXJzZU0gKiBYcF9ZX1hZWnAucmdiO1xcblxcdHJldHVybiB2ZWM0KCBtYXgoIHZSR0IsIDAuMCApLCAxLjAgKTtcXG59XCIsZW52bWFwX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9FTlZNQVBcXG5cXHQjaWZkZWYgRU5WX1dPUkxEUE9TXFxuXFx0XFx0dmVjMyBjYW1lcmFUb0ZyYWc7XFxuXFx0XFx0aWYgKCBpc09ydGhvZ3JhcGhpYyApIHtcXG5cXHRcXHRcXHRjYW1lcmFUb0ZyYWcgPSBub3JtYWxpemUoIHZlYzMoIC0gdmlld01hdHJpeFsgMCBdWyAyIF0sIC0gdmlld01hdHJpeFsgMSBdWyAyIF0sIC0gdmlld01hdHJpeFsgMiBdWyAyIF0gKSApO1xcblxcdFxcdH0gZWxzZSB7XFxuXFx0XFx0XFx0Y2FtZXJhVG9GcmFnID0gbm9ybWFsaXplKCB2V29ybGRQb3NpdGlvbiAtIGNhbWVyYVBvc2l0aW9uICk7XFxuXFx0XFx0fVxcblxcdFxcdHZlYzMgd29ybGROb3JtYWwgPSBpbnZlcnNlVHJhbnNmb3JtRGlyZWN0aW9uKCBub3JtYWwsIHZpZXdNYXRyaXggKTtcXG5cXHRcXHQjaWZkZWYgRU5WTUFQX01PREVfUkVGTEVDVElPTlxcblxcdFxcdFxcdHZlYzMgcmVmbGVjdFZlYyA9IHJlZmxlY3QoIGNhbWVyYVRvRnJhZywgd29ybGROb3JtYWwgKTtcXG5cXHRcXHQjZWxzZVxcblxcdFxcdFxcdHZlYzMgcmVmbGVjdFZlYyA9IHJlZnJhY3QoIGNhbWVyYVRvRnJhZywgd29ybGROb3JtYWwsIHJlZnJhY3Rpb25SYXRpbyApO1xcblxcdFxcdCNlbmRpZlxcblxcdCNlbHNlXFxuXFx0XFx0dmVjMyByZWZsZWN0VmVjID0gdlJlZmxlY3Q7XFxuXFx0I2VuZGlmXFxuXFx0I2lmZGVmIEVOVk1BUF9UWVBFX0NVQkVcXG5cXHRcXHR2ZWM0IGVudkNvbG9yID0gdGV4dHVyZUN1YmUoIGVudk1hcCwgdmVjMyggZmxpcEVudk1hcCAqIHJlZmxlY3RWZWMueCwgcmVmbGVjdFZlYy55eiApICk7XFxuXFx0I2VsaWYgZGVmaW5lZCggRU5WTUFQX1RZUEVfQ1VCRV9VViApXFxuXFx0XFx0dmVjNCBlbnZDb2xvciA9IHRleHR1cmVDdWJlVVYoIGVudk1hcCwgcmVmbGVjdFZlYywgMC4wICk7XFxuXFx0I2Vsc2VcXG5cXHRcXHR2ZWM0IGVudkNvbG9yID0gdmVjNCggMC4wICk7XFxuXFx0I2VuZGlmXFxuXFx0I2lmbmRlZiBFTlZNQVBfVFlQRV9DVUJFX1VWXFxuXFx0XFx0ZW52Q29sb3IgPSBlbnZNYXBUZXhlbFRvTGluZWFyKCBlbnZDb2xvciApO1xcblxcdCNlbmRpZlxcblxcdCNpZmRlZiBFTlZNQVBfQkxFTkRJTkdfTVVMVElQTFlcXG5cXHRcXHRvdXRnb2luZ0xpZ2h0ID0gbWl4KCBvdXRnb2luZ0xpZ2h0LCBvdXRnb2luZ0xpZ2h0ICogZW52Q29sb3IueHl6LCBzcGVjdWxhclN0cmVuZ3RoICogcmVmbGVjdGl2aXR5ICk7XFxuXFx0I2VsaWYgZGVmaW5lZCggRU5WTUFQX0JMRU5ESU5HX01JWCApXFxuXFx0XFx0b3V0Z29pbmdMaWdodCA9IG1peCggb3V0Z29pbmdMaWdodCwgZW52Q29sb3IueHl6LCBzcGVjdWxhclN0cmVuZ3RoICogcmVmbGVjdGl2aXR5ICk7XFxuXFx0I2VsaWYgZGVmaW5lZCggRU5WTUFQX0JMRU5ESU5HX0FERCApXFxuXFx0XFx0b3V0Z29pbmdMaWdodCArPSBlbnZDb2xvci54eXogKiBzcGVjdWxhclN0cmVuZ3RoICogcmVmbGVjdGl2aXR5O1xcblxcdCNlbmRpZlxcbiNlbmRpZlwiLGVudm1hcF9jb21tb25fcGFyc19mcmFnbWVudDpcIiNpZmRlZiBVU0VfRU5WTUFQXFxuXFx0dW5pZm9ybSBmbG9hdCBlbnZNYXBJbnRlbnNpdHk7XFxuXFx0dW5pZm9ybSBmbG9hdCBmbGlwRW52TWFwO1xcblxcdHVuaWZvcm0gaW50IG1heE1pcExldmVsO1xcblxcdCNpZmRlZiBFTlZNQVBfVFlQRV9DVUJFXFxuXFx0XFx0dW5pZm9ybSBzYW1wbGVyQ3ViZSBlbnZNYXA7XFxuXFx0I2Vsc2VcXG5cXHRcXHR1bmlmb3JtIHNhbXBsZXIyRCBlbnZNYXA7XFxuXFx0I2VuZGlmXFxuXFx0XFxuI2VuZGlmXCIsZW52bWFwX3BhcnNfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX0VOVk1BUFxcblxcdHVuaWZvcm0gZmxvYXQgcmVmbGVjdGl2aXR5O1xcblxcdCNpZiBkZWZpbmVkKCBVU0VfQlVNUE1BUCApIHx8IGRlZmluZWQoIFVTRV9OT1JNQUxNQVAgKSB8fCBkZWZpbmVkKCBQSE9ORyApXFxuXFx0XFx0I2RlZmluZSBFTlZfV09STERQT1NcXG5cXHQjZW5kaWZcXG5cXHQjaWZkZWYgRU5WX1dPUkxEUE9TXFxuXFx0XFx0dmFyeWluZyB2ZWMzIHZXb3JsZFBvc2l0aW9uO1xcblxcdFxcdHVuaWZvcm0gZmxvYXQgcmVmcmFjdGlvblJhdGlvO1xcblxcdCNlbHNlXFxuXFx0XFx0dmFyeWluZyB2ZWMzIHZSZWZsZWN0O1xcblxcdCNlbmRpZlxcbiNlbmRpZlwiLGVudm1hcF9wYXJzX3ZlcnRleDpcIiNpZmRlZiBVU0VfRU5WTUFQXFxuXFx0I2lmIGRlZmluZWQoIFVTRV9CVU1QTUFQICkgfHwgZGVmaW5lZCggVVNFX05PUk1BTE1BUCApIHx8ZGVmaW5lZCggUEhPTkcgKVxcblxcdFxcdCNkZWZpbmUgRU5WX1dPUkxEUE9TXFxuXFx0I2VuZGlmXFxuXFx0I2lmZGVmIEVOVl9XT1JMRFBPU1xcblxcdFxcdFxcblxcdFxcdHZhcnlpbmcgdmVjMyB2V29ybGRQb3NpdGlvbjtcXG5cXHQjZWxzZVxcblxcdFxcdHZhcnlpbmcgdmVjMyB2UmVmbGVjdDtcXG5cXHRcXHR1bmlmb3JtIGZsb2F0IHJlZnJhY3Rpb25SYXRpbztcXG5cXHQjZW5kaWZcXG4jZW5kaWZcIixlbnZtYXBfcGh5c2ljYWxfcGFyc19mcmFnbWVudDpcIiNpZiBkZWZpbmVkKCBVU0VfRU5WTUFQIClcXG5cXHQjaWZkZWYgRU5WTUFQX01PREVfUkVGUkFDVElPTlxcblxcdFxcdHVuaWZvcm0gZmxvYXQgcmVmcmFjdGlvblJhdGlvO1xcblxcdCNlbmRpZlxcblxcdHZlYzMgZ2V0TGlnaHRQcm9iZUluZGlyZWN0SXJyYWRpYW5jZSggY29uc3QgaW4gR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeSwgY29uc3QgaW4gaW50IG1heE1JUExldmVsICkge1xcblxcdFxcdHZlYzMgd29ybGROb3JtYWwgPSBpbnZlcnNlVHJhbnNmb3JtRGlyZWN0aW9uKCBnZW9tZXRyeS5ub3JtYWwsIHZpZXdNYXRyaXggKTtcXG5cXHRcXHQjaWZkZWYgRU5WTUFQX1RZUEVfQ1VCRVxcblxcdFxcdFxcdHZlYzMgcXVlcnlWZWMgPSB2ZWMzKCBmbGlwRW52TWFwICogd29ybGROb3JtYWwueCwgd29ybGROb3JtYWwueXogKTtcXG5cXHRcXHRcXHQjaWZkZWYgVEVYVFVSRV9MT0RfRVhUXFxuXFx0XFx0XFx0XFx0dmVjNCBlbnZNYXBDb2xvciA9IHRleHR1cmVDdWJlTG9kRVhUKCBlbnZNYXAsIHF1ZXJ5VmVjLCBmbG9hdCggbWF4TUlQTGV2ZWwgKSApO1xcblxcdFxcdFxcdCNlbHNlXFxuXFx0XFx0XFx0XFx0dmVjNCBlbnZNYXBDb2xvciA9IHRleHR1cmVDdWJlKCBlbnZNYXAsIHF1ZXJ5VmVjLCBmbG9hdCggbWF4TUlQTGV2ZWwgKSApO1xcblxcdFxcdFxcdCNlbmRpZlxcblxcdFxcdFxcdGVudk1hcENvbG9yLnJnYiA9IGVudk1hcFRleGVsVG9MaW5lYXIoIGVudk1hcENvbG9yICkucmdiO1xcblxcdFxcdCNlbGlmIGRlZmluZWQoIEVOVk1BUF9UWVBFX0NVQkVfVVYgKVxcblxcdFxcdFxcdHZlYzQgZW52TWFwQ29sb3IgPSB0ZXh0dXJlQ3ViZVVWKCBlbnZNYXAsIHdvcmxkTm9ybWFsLCAxLjAgKTtcXG5cXHRcXHQjZWxzZVxcblxcdFxcdFxcdHZlYzQgZW52TWFwQ29sb3IgPSB2ZWM0KCAwLjAgKTtcXG5cXHRcXHQjZW5kaWZcXG5cXHRcXHRyZXR1cm4gUEkgKiBlbnZNYXBDb2xvci5yZ2IgKiBlbnZNYXBJbnRlbnNpdHk7XFxuXFx0fVxcblxcdGZsb2F0IGdldFNwZWN1bGFyTUlQTGV2ZWwoIGNvbnN0IGluIGZsb2F0IHJvdWdobmVzcywgY29uc3QgaW4gaW50IG1heE1JUExldmVsICkge1xcblxcdFxcdGZsb2F0IG1heE1JUExldmVsU2NhbGFyID0gZmxvYXQoIG1heE1JUExldmVsICk7XFxuXFx0XFx0ZmxvYXQgc2lnbWEgPSBQSSAqIHJvdWdobmVzcyAqIHJvdWdobmVzcyAvICggMS4wICsgcm91Z2huZXNzICk7XFxuXFx0XFx0ZmxvYXQgZGVzaXJlZE1JUExldmVsID0gbWF4TUlQTGV2ZWxTY2FsYXIgKyBsb2cyKCBzaWdtYSApO1xcblxcdFxcdHJldHVybiBjbGFtcCggZGVzaXJlZE1JUExldmVsLCAwLjAsIG1heE1JUExldmVsU2NhbGFyICk7XFxuXFx0fVxcblxcdHZlYzMgZ2V0TGlnaHRQcm9iZUluZGlyZWN0UmFkaWFuY2UoIGNvbnN0IGluIHZlYzMgdmlld0RpciwgY29uc3QgaW4gdmVjMyBub3JtYWwsIGNvbnN0IGluIGZsb2F0IHJvdWdobmVzcywgY29uc3QgaW4gaW50IG1heE1JUExldmVsICkge1xcblxcdFxcdCNpZmRlZiBFTlZNQVBfTU9ERV9SRUZMRUNUSU9OXFxuXFx0XFx0XFx0dmVjMyByZWZsZWN0VmVjID0gcmVmbGVjdCggLXZpZXdEaXIsIG5vcm1hbCApO1xcblxcdFxcdFxcdHJlZmxlY3RWZWMgPSBub3JtYWxpemUoIG1peCggcmVmbGVjdFZlYywgbm9ybWFsLCByb3VnaG5lc3MgKiByb3VnaG5lc3MpICk7XFxuXFx0XFx0I2Vsc2VcXG5cXHRcXHRcXHR2ZWMzIHJlZmxlY3RWZWMgPSByZWZyYWN0KCAtdmlld0Rpciwgbm9ybWFsLCByZWZyYWN0aW9uUmF0aW8gKTtcXG5cXHRcXHQjZW5kaWZcXG5cXHRcXHRyZWZsZWN0VmVjID0gaW52ZXJzZVRyYW5zZm9ybURpcmVjdGlvbiggcmVmbGVjdFZlYywgdmlld01hdHJpeCApO1xcblxcdFxcdGZsb2F0IHNwZWN1bGFyTUlQTGV2ZWwgPSBnZXRTcGVjdWxhck1JUExldmVsKCByb3VnaG5lc3MsIG1heE1JUExldmVsICk7XFxuXFx0XFx0I2lmZGVmIEVOVk1BUF9UWVBFX0NVQkVcXG5cXHRcXHRcXHR2ZWMzIHF1ZXJ5UmVmbGVjdFZlYyA9IHZlYzMoIGZsaXBFbnZNYXAgKiByZWZsZWN0VmVjLngsIHJlZmxlY3RWZWMueXogKTtcXG5cXHRcXHRcXHQjaWZkZWYgVEVYVFVSRV9MT0RfRVhUXFxuXFx0XFx0XFx0XFx0dmVjNCBlbnZNYXBDb2xvciA9IHRleHR1cmVDdWJlTG9kRVhUKCBlbnZNYXAsIHF1ZXJ5UmVmbGVjdFZlYywgc3BlY3VsYXJNSVBMZXZlbCApO1xcblxcdFxcdFxcdCNlbHNlXFxuXFx0XFx0XFx0XFx0dmVjNCBlbnZNYXBDb2xvciA9IHRleHR1cmVDdWJlKCBlbnZNYXAsIHF1ZXJ5UmVmbGVjdFZlYywgc3BlY3VsYXJNSVBMZXZlbCApO1xcblxcdFxcdFxcdCNlbmRpZlxcblxcdFxcdFxcdGVudk1hcENvbG9yLnJnYiA9IGVudk1hcFRleGVsVG9MaW5lYXIoIGVudk1hcENvbG9yICkucmdiO1xcblxcdFxcdCNlbGlmIGRlZmluZWQoIEVOVk1BUF9UWVBFX0NVQkVfVVYgKVxcblxcdFxcdFxcdHZlYzQgZW52TWFwQ29sb3IgPSB0ZXh0dXJlQ3ViZVVWKCBlbnZNYXAsIHJlZmxlY3RWZWMsIHJvdWdobmVzcyApO1xcblxcdFxcdCNlbmRpZlxcblxcdFxcdHJldHVybiBlbnZNYXBDb2xvci5yZ2IgKiBlbnZNYXBJbnRlbnNpdHk7XFxuXFx0fVxcbiNlbmRpZlwiLGVudm1hcF92ZXJ0ZXg6XCIjaWZkZWYgVVNFX0VOVk1BUFxcblxcdCNpZmRlZiBFTlZfV09STERQT1NcXG5cXHRcXHR2V29ybGRQb3NpdGlvbiA9IHdvcmxkUG9zaXRpb24ueHl6O1xcblxcdCNlbHNlXFxuXFx0XFx0dmVjMyBjYW1lcmFUb1ZlcnRleDtcXG5cXHRcXHRpZiAoIGlzT3J0aG9ncmFwaGljICkge1xcblxcdFxcdFxcdGNhbWVyYVRvVmVydGV4ID0gbm9ybWFsaXplKCB2ZWMzKCAtIHZpZXdNYXRyaXhbIDAgXVsgMiBdLCAtIHZpZXdNYXRyaXhbIDEgXVsgMiBdLCAtIHZpZXdNYXRyaXhbIDIgXVsgMiBdICkgKTtcXG5cXHRcXHR9IGVsc2Uge1xcblxcdFxcdFxcdGNhbWVyYVRvVmVydGV4ID0gbm9ybWFsaXplKCB3b3JsZFBvc2l0aW9uLnh5eiAtIGNhbWVyYVBvc2l0aW9uICk7XFxuXFx0XFx0fVxcblxcdFxcdHZlYzMgd29ybGROb3JtYWwgPSBpbnZlcnNlVHJhbnNmb3JtRGlyZWN0aW9uKCB0cmFuc2Zvcm1lZE5vcm1hbCwgdmlld01hdHJpeCApO1xcblxcdFxcdCNpZmRlZiBFTlZNQVBfTU9ERV9SRUZMRUNUSU9OXFxuXFx0XFx0XFx0dlJlZmxlY3QgPSByZWZsZWN0KCBjYW1lcmFUb1ZlcnRleCwgd29ybGROb3JtYWwgKTtcXG5cXHRcXHQjZWxzZVxcblxcdFxcdFxcdHZSZWZsZWN0ID0gcmVmcmFjdCggY2FtZXJhVG9WZXJ0ZXgsIHdvcmxkTm9ybWFsLCByZWZyYWN0aW9uUmF0aW8gKTtcXG5cXHRcXHQjZW5kaWZcXG5cXHQjZW5kaWZcXG4jZW5kaWZcIixmb2dfdmVydGV4OlwiI2lmZGVmIFVTRV9GT0dcXG5cXHRmb2dEZXB0aCA9IC0gbXZQb3NpdGlvbi56O1xcbiNlbmRpZlwiLGZvZ19wYXJzX3ZlcnRleDpcIiNpZmRlZiBVU0VfRk9HXFxuXFx0dmFyeWluZyBmbG9hdCBmb2dEZXB0aDtcXG4jZW5kaWZcIixmb2dfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX0ZPR1xcblxcdCNpZmRlZiBGT0dfRVhQMlxcblxcdFxcdGZsb2F0IGZvZ0ZhY3RvciA9IDEuMCAtIGV4cCggLSBmb2dEZW5zaXR5ICogZm9nRGVuc2l0eSAqIGZvZ0RlcHRoICogZm9nRGVwdGggKTtcXG5cXHQjZWxzZVxcblxcdFxcdGZsb2F0IGZvZ0ZhY3RvciA9IHNtb290aHN0ZXAoIGZvZ05lYXIsIGZvZ0ZhciwgZm9nRGVwdGggKTtcXG5cXHQjZW5kaWZcXG5cXHRnbF9GcmFnQ29sb3IucmdiID0gbWl4KCBnbF9GcmFnQ29sb3IucmdiLCBmb2dDb2xvciwgZm9nRmFjdG9yICk7XFxuI2VuZGlmXCIsZm9nX3BhcnNfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX0ZPR1xcblxcdHVuaWZvcm0gdmVjMyBmb2dDb2xvcjtcXG5cXHR2YXJ5aW5nIGZsb2F0IGZvZ0RlcHRoO1xcblxcdCNpZmRlZiBGT0dfRVhQMlxcblxcdFxcdHVuaWZvcm0gZmxvYXQgZm9nRGVuc2l0eTtcXG5cXHQjZWxzZVxcblxcdFxcdHVuaWZvcm0gZmxvYXQgZm9nTmVhcjtcXG5cXHRcXHR1bmlmb3JtIGZsb2F0IGZvZ0ZhcjtcXG5cXHQjZW5kaWZcXG4jZW5kaWZcIixncmFkaWVudG1hcF9wYXJzX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9HUkFESUVOVE1BUFxcblxcdHVuaWZvcm0gc2FtcGxlcjJEIGdyYWRpZW50TWFwO1xcbiNlbmRpZlxcbnZlYzMgZ2V0R3JhZGllbnRJcnJhZGlhbmNlKCB2ZWMzIG5vcm1hbCwgdmVjMyBsaWdodERpcmVjdGlvbiApIHtcXG5cXHRmbG9hdCBkb3ROTCA9IGRvdCggbm9ybWFsLCBsaWdodERpcmVjdGlvbiApO1xcblxcdHZlYzIgY29vcmQgPSB2ZWMyKCBkb3ROTCAqIDAuNSArIDAuNSwgMC4wICk7XFxuXFx0I2lmZGVmIFVTRV9HUkFESUVOVE1BUFxcblxcdFxcdHJldHVybiB0ZXh0dXJlMkQoIGdyYWRpZW50TWFwLCBjb29yZCApLnJnYjtcXG5cXHQjZWxzZVxcblxcdFxcdHJldHVybiAoIGNvb3JkLnggPCAwLjcgKSA/IHZlYzMoIDAuNyApIDogdmVjMyggMS4wICk7XFxuXFx0I2VuZGlmXFxufVwiLGxpZ2h0bWFwX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9MSUdIVE1BUFxcblxcdHZlYzQgbGlnaHRNYXBUZXhlbD0gdGV4dHVyZTJEKCBsaWdodE1hcCwgdlV2MiApO1xcblxcdHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0RGlmZnVzZSArPSBQSSAqIGxpZ2h0TWFwVGV4ZWxUb0xpbmVhciggbGlnaHRNYXBUZXhlbCApLnJnYiAqIGxpZ2h0TWFwSW50ZW5zaXR5O1xcbiNlbmRpZlwiLGxpZ2h0bWFwX3BhcnNfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX0xJR0hUTUFQXFxuXFx0dW5pZm9ybSBzYW1wbGVyMkQgbGlnaHRNYXA7XFxuXFx0dW5pZm9ybSBmbG9hdCBsaWdodE1hcEludGVuc2l0eTtcXG4jZW5kaWZcIixsaWdodHNfbGFtYmVydF92ZXJ0ZXg6XCJ2ZWMzIGRpZmZ1c2UgPSB2ZWMzKCAxLjAgKTtcXG5HZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5O1xcbmdlb21ldHJ5LnBvc2l0aW9uID0gbXZQb3NpdGlvbi54eXo7XFxuZ2VvbWV0cnkubm9ybWFsID0gbm9ybWFsaXplKCB0cmFuc2Zvcm1lZE5vcm1hbCApO1xcbmdlb21ldHJ5LnZpZXdEaXIgPSAoIGlzT3J0aG9ncmFwaGljICkgPyB2ZWMzKCAwLCAwLCAxICkgOiBub3JtYWxpemUoIC1tdlBvc2l0aW9uLnh5eiApO1xcbkdlb21ldHJpY0NvbnRleHQgYmFja0dlb21ldHJ5O1xcbmJhY2tHZW9tZXRyeS5wb3NpdGlvbiA9IGdlb21ldHJ5LnBvc2l0aW9uO1xcbmJhY2tHZW9tZXRyeS5ub3JtYWwgPSAtZ2VvbWV0cnkubm9ybWFsO1xcbmJhY2tHZW9tZXRyeS52aWV3RGlyID0gZ2VvbWV0cnkudmlld0RpcjtcXG52TGlnaHRGcm9udCA9IHZlYzMoIDAuMCApO1xcbnZJbmRpcmVjdEZyb250ID0gdmVjMyggMC4wICk7XFxuI2lmZGVmIERPVUJMRV9TSURFRFxcblxcdHZMaWdodEJhY2sgPSB2ZWMzKCAwLjAgKTtcXG5cXHR2SW5kaXJlY3RCYWNrID0gdmVjMyggMC4wICk7XFxuI2VuZGlmXFxuSW5jaWRlbnRMaWdodCBkaXJlY3RMaWdodDtcXG5mbG9hdCBkb3ROTDtcXG52ZWMzIGRpcmVjdExpZ2h0Q29sb3JfRGlmZnVzZTtcXG52SW5kaXJlY3RGcm9udCArPSBnZXRBbWJpZW50TGlnaHRJcnJhZGlhbmNlKCBhbWJpZW50TGlnaHRDb2xvciApO1xcbnZJbmRpcmVjdEZyb250ICs9IGdldExpZ2h0UHJvYmVJcnJhZGlhbmNlKCBsaWdodFByb2JlLCBnZW9tZXRyeSApO1xcbiNpZmRlZiBET1VCTEVfU0lERURcXG5cXHR2SW5kaXJlY3RCYWNrICs9IGdldEFtYmllbnRMaWdodElycmFkaWFuY2UoIGFtYmllbnRMaWdodENvbG9yICk7XFxuXFx0dkluZGlyZWN0QmFjayArPSBnZXRMaWdodFByb2JlSXJyYWRpYW5jZSggbGlnaHRQcm9iZSwgYmFja0dlb21ldHJ5ICk7XFxuI2VuZGlmXFxuI2lmIE5VTV9QT0lOVF9MSUdIVFMgPiAwXFxuXFx0I3ByYWdtYSB1bnJvbGxfbG9vcF9zdGFydFxcblxcdGZvciAoIGludCBpID0gMDsgaSA8IE5VTV9QT0lOVF9MSUdIVFM7IGkgKysgKSB7XFxuXFx0XFx0Z2V0UG9pbnREaXJlY3RMaWdodElycmFkaWFuY2UoIHBvaW50TGlnaHRzWyBpIF0sIGdlb21ldHJ5LCBkaXJlY3RMaWdodCApO1xcblxcdFxcdGRvdE5MID0gZG90KCBnZW9tZXRyeS5ub3JtYWwsIGRpcmVjdExpZ2h0LmRpcmVjdGlvbiApO1xcblxcdFxcdGRpcmVjdExpZ2h0Q29sb3JfRGlmZnVzZSA9IFBJICogZGlyZWN0TGlnaHQuY29sb3I7XFxuXFx0XFx0dkxpZ2h0RnJvbnQgKz0gc2F0dXJhdGUoIGRvdE5MICkgKiBkaXJlY3RMaWdodENvbG9yX0RpZmZ1c2U7XFxuXFx0XFx0I2lmZGVmIERPVUJMRV9TSURFRFxcblxcdFxcdFxcdHZMaWdodEJhY2sgKz0gc2F0dXJhdGUoIC1kb3ROTCApICogZGlyZWN0TGlnaHRDb2xvcl9EaWZmdXNlO1xcblxcdFxcdCNlbmRpZlxcblxcdH1cXG5cXHQjcHJhZ21hIHVucm9sbF9sb29wX2VuZFxcbiNlbmRpZlxcbiNpZiBOVU1fU1BPVF9MSUdIVFMgPiAwXFxuXFx0I3ByYWdtYSB1bnJvbGxfbG9vcF9zdGFydFxcblxcdGZvciAoIGludCBpID0gMDsgaSA8IE5VTV9TUE9UX0xJR0hUUzsgaSArKyApIHtcXG5cXHRcXHRnZXRTcG90RGlyZWN0TGlnaHRJcnJhZGlhbmNlKCBzcG90TGlnaHRzWyBpIF0sIGdlb21ldHJ5LCBkaXJlY3RMaWdodCApO1xcblxcdFxcdGRvdE5MID0gZG90KCBnZW9tZXRyeS5ub3JtYWwsIGRpcmVjdExpZ2h0LmRpcmVjdGlvbiApO1xcblxcdFxcdGRpcmVjdExpZ2h0Q29sb3JfRGlmZnVzZSA9IFBJICogZGlyZWN0TGlnaHQuY29sb3I7XFxuXFx0XFx0dkxpZ2h0RnJvbnQgKz0gc2F0dXJhdGUoIGRvdE5MICkgKiBkaXJlY3RMaWdodENvbG9yX0RpZmZ1c2U7XFxuXFx0XFx0I2lmZGVmIERPVUJMRV9TSURFRFxcblxcdFxcdFxcdHZMaWdodEJhY2sgKz0gc2F0dXJhdGUoIC1kb3ROTCApICogZGlyZWN0TGlnaHRDb2xvcl9EaWZmdXNlO1xcblxcdFxcdCNlbmRpZlxcblxcdH1cXG5cXHQjcHJhZ21hIHVucm9sbF9sb29wX2VuZFxcbiNlbmRpZlxcbiNpZiBOVU1fRElSX0xJR0hUUyA+IDBcXG5cXHQjcHJhZ21hIHVucm9sbF9sb29wX3N0YXJ0XFxuXFx0Zm9yICggaW50IGkgPSAwOyBpIDwgTlVNX0RJUl9MSUdIVFM7IGkgKysgKSB7XFxuXFx0XFx0Z2V0RGlyZWN0aW9uYWxEaXJlY3RMaWdodElycmFkaWFuY2UoIGRpcmVjdGlvbmFsTGlnaHRzWyBpIF0sIGdlb21ldHJ5LCBkaXJlY3RMaWdodCApO1xcblxcdFxcdGRvdE5MID0gZG90KCBnZW9tZXRyeS5ub3JtYWwsIGRpcmVjdExpZ2h0LmRpcmVjdGlvbiApO1xcblxcdFxcdGRpcmVjdExpZ2h0Q29sb3JfRGlmZnVzZSA9IFBJICogZGlyZWN0TGlnaHQuY29sb3I7XFxuXFx0XFx0dkxpZ2h0RnJvbnQgKz0gc2F0dXJhdGUoIGRvdE5MICkgKiBkaXJlY3RMaWdodENvbG9yX0RpZmZ1c2U7XFxuXFx0XFx0I2lmZGVmIERPVUJMRV9TSURFRFxcblxcdFxcdFxcdHZMaWdodEJhY2sgKz0gc2F0dXJhdGUoIC1kb3ROTCApICogZGlyZWN0TGlnaHRDb2xvcl9EaWZmdXNlO1xcblxcdFxcdCNlbmRpZlxcblxcdH1cXG5cXHQjcHJhZ21hIHVucm9sbF9sb29wX2VuZFxcbiNlbmRpZlxcbiNpZiBOVU1fSEVNSV9MSUdIVFMgPiAwXFxuXFx0I3ByYWdtYSB1bnJvbGxfbG9vcF9zdGFydFxcblxcdGZvciAoIGludCBpID0gMDsgaSA8IE5VTV9IRU1JX0xJR0hUUzsgaSArKyApIHtcXG5cXHRcXHR2SW5kaXJlY3RGcm9udCArPSBnZXRIZW1pc3BoZXJlTGlnaHRJcnJhZGlhbmNlKCBoZW1pc3BoZXJlTGlnaHRzWyBpIF0sIGdlb21ldHJ5ICk7XFxuXFx0XFx0I2lmZGVmIERPVUJMRV9TSURFRFxcblxcdFxcdFxcdHZJbmRpcmVjdEJhY2sgKz0gZ2V0SGVtaXNwaGVyZUxpZ2h0SXJyYWRpYW5jZSggaGVtaXNwaGVyZUxpZ2h0c1sgaSBdLCBiYWNrR2VvbWV0cnkgKTtcXG5cXHRcXHQjZW5kaWZcXG5cXHR9XFxuXFx0I3ByYWdtYSB1bnJvbGxfbG9vcF9lbmRcXG4jZW5kaWZcIixsaWdodHNfcGFyc19iZWdpbjpcInVuaWZvcm0gYm9vbCByZWNlaXZlU2hhZG93O1xcbnVuaWZvcm0gdmVjMyBhbWJpZW50TGlnaHRDb2xvcjtcXG51bmlmb3JtIHZlYzMgbGlnaHRQcm9iZVsgOSBdO1xcbnZlYzMgc2hHZXRJcnJhZGlhbmNlQXQoIGluIHZlYzMgbm9ybWFsLCBpbiB2ZWMzIHNoQ29lZmZpY2llbnRzWyA5IF0gKSB7XFxuXFx0ZmxvYXQgeCA9IG5vcm1hbC54LCB5ID0gbm9ybWFsLnksIHogPSBub3JtYWwuejtcXG5cXHR2ZWMzIHJlc3VsdCA9IHNoQ29lZmZpY2llbnRzWyAwIF0gKiAwLjg4NjIyNztcXG5cXHRyZXN1bHQgKz0gc2hDb2VmZmljaWVudHNbIDEgXSAqIDIuMCAqIDAuNTExNjY0ICogeTtcXG5cXHRyZXN1bHQgKz0gc2hDb2VmZmljaWVudHNbIDIgXSAqIDIuMCAqIDAuNTExNjY0ICogejtcXG5cXHRyZXN1bHQgKz0gc2hDb2VmZmljaWVudHNbIDMgXSAqIDIuMCAqIDAuNTExNjY0ICogeDtcXG5cXHRyZXN1bHQgKz0gc2hDb2VmZmljaWVudHNbIDQgXSAqIDIuMCAqIDAuNDI5MDQzICogeCAqIHk7XFxuXFx0cmVzdWx0ICs9IHNoQ29lZmZpY2llbnRzWyA1IF0gKiAyLjAgKiAwLjQyOTA0MyAqIHkgKiB6O1xcblxcdHJlc3VsdCArPSBzaENvZWZmaWNpZW50c1sgNiBdICogKCAwLjc0MzEyNSAqIHogKiB6IC0gMC4yNDc3MDggKTtcXG5cXHRyZXN1bHQgKz0gc2hDb2VmZmljaWVudHNbIDcgXSAqIDIuMCAqIDAuNDI5MDQzICogeCAqIHo7XFxuXFx0cmVzdWx0ICs9IHNoQ29lZmZpY2llbnRzWyA4IF0gKiAwLjQyOTA0MyAqICggeCAqIHggLSB5ICogeSApO1xcblxcdHJldHVybiByZXN1bHQ7XFxufVxcbnZlYzMgZ2V0TGlnaHRQcm9iZUlycmFkaWFuY2UoIGNvbnN0IGluIHZlYzMgbGlnaHRQcm9iZVsgOSBdLCBjb25zdCBpbiBHZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5ICkge1xcblxcdHZlYzMgd29ybGROb3JtYWwgPSBpbnZlcnNlVHJhbnNmb3JtRGlyZWN0aW9uKCBnZW9tZXRyeS5ub3JtYWwsIHZpZXdNYXRyaXggKTtcXG5cXHR2ZWMzIGlycmFkaWFuY2UgPSBzaEdldElycmFkaWFuY2VBdCggd29ybGROb3JtYWwsIGxpZ2h0UHJvYmUgKTtcXG5cXHRyZXR1cm4gaXJyYWRpYW5jZTtcXG59XFxudmVjMyBnZXRBbWJpZW50TGlnaHRJcnJhZGlhbmNlKCBjb25zdCBpbiB2ZWMzIGFtYmllbnRMaWdodENvbG9yICkge1xcblxcdHZlYzMgaXJyYWRpYW5jZSA9IGFtYmllbnRMaWdodENvbG9yO1xcblxcdCNpZm5kZWYgUEhZU0lDQUxMWV9DT1JSRUNUX0xJR0hUU1xcblxcdFxcdGlycmFkaWFuY2UgKj0gUEk7XFxuXFx0I2VuZGlmXFxuXFx0cmV0dXJuIGlycmFkaWFuY2U7XFxufVxcbiNpZiBOVU1fRElSX0xJR0hUUyA+IDBcXG5cXHRzdHJ1Y3QgRGlyZWN0aW9uYWxMaWdodCB7XFxuXFx0XFx0dmVjMyBkaXJlY3Rpb247XFxuXFx0XFx0dmVjMyBjb2xvcjtcXG5cXHR9O1xcblxcdHVuaWZvcm0gRGlyZWN0aW9uYWxMaWdodCBkaXJlY3Rpb25hbExpZ2h0c1sgTlVNX0RJUl9MSUdIVFMgXTtcXG5cXHR2b2lkIGdldERpcmVjdGlvbmFsRGlyZWN0TGlnaHRJcnJhZGlhbmNlKCBjb25zdCBpbiBEaXJlY3Rpb25hbExpZ2h0IGRpcmVjdGlvbmFsTGlnaHQsIGNvbnN0IGluIEdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnksIG91dCBJbmNpZGVudExpZ2h0IGRpcmVjdExpZ2h0ICkge1xcblxcdFxcdGRpcmVjdExpZ2h0LmNvbG9yID0gZGlyZWN0aW9uYWxMaWdodC5jb2xvcjtcXG5cXHRcXHRkaXJlY3RMaWdodC5kaXJlY3Rpb24gPSBkaXJlY3Rpb25hbExpZ2h0LmRpcmVjdGlvbjtcXG5cXHRcXHRkaXJlY3RMaWdodC52aXNpYmxlID0gdHJ1ZTtcXG5cXHR9XFxuI2VuZGlmXFxuI2lmIE5VTV9QT0lOVF9MSUdIVFMgPiAwXFxuXFx0c3RydWN0IFBvaW50TGlnaHQge1xcblxcdFxcdHZlYzMgcG9zaXRpb247XFxuXFx0XFx0dmVjMyBjb2xvcjtcXG5cXHRcXHRmbG9hdCBkaXN0YW5jZTtcXG5cXHRcXHRmbG9hdCBkZWNheTtcXG5cXHR9O1xcblxcdHVuaWZvcm0gUG9pbnRMaWdodCBwb2ludExpZ2h0c1sgTlVNX1BPSU5UX0xJR0hUUyBdO1xcblxcdHZvaWQgZ2V0UG9pbnREaXJlY3RMaWdodElycmFkaWFuY2UoIGNvbnN0IGluIFBvaW50TGlnaHQgcG9pbnRMaWdodCwgY29uc3QgaW4gR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeSwgb3V0IEluY2lkZW50TGlnaHQgZGlyZWN0TGlnaHQgKSB7XFxuXFx0XFx0dmVjMyBsVmVjdG9yID0gcG9pbnRMaWdodC5wb3NpdGlvbiAtIGdlb21ldHJ5LnBvc2l0aW9uO1xcblxcdFxcdGRpcmVjdExpZ2h0LmRpcmVjdGlvbiA9IG5vcm1hbGl6ZSggbFZlY3RvciApO1xcblxcdFxcdGZsb2F0IGxpZ2h0RGlzdGFuY2UgPSBsZW5ndGgoIGxWZWN0b3IgKTtcXG5cXHRcXHRkaXJlY3RMaWdodC5jb2xvciA9IHBvaW50TGlnaHQuY29sb3I7XFxuXFx0XFx0ZGlyZWN0TGlnaHQuY29sb3IgKj0gcHVuY3R1YWxMaWdodEludGVuc2l0eVRvSXJyYWRpYW5jZUZhY3RvciggbGlnaHREaXN0YW5jZSwgcG9pbnRMaWdodC5kaXN0YW5jZSwgcG9pbnRMaWdodC5kZWNheSApO1xcblxcdFxcdGRpcmVjdExpZ2h0LnZpc2libGUgPSAoIGRpcmVjdExpZ2h0LmNvbG9yICE9IHZlYzMoIDAuMCApICk7XFxuXFx0fVxcbiNlbmRpZlxcbiNpZiBOVU1fU1BPVF9MSUdIVFMgPiAwXFxuXFx0c3RydWN0IFNwb3RMaWdodCB7XFxuXFx0XFx0dmVjMyBwb3NpdGlvbjtcXG5cXHRcXHR2ZWMzIGRpcmVjdGlvbjtcXG5cXHRcXHR2ZWMzIGNvbG9yO1xcblxcdFxcdGZsb2F0IGRpc3RhbmNlO1xcblxcdFxcdGZsb2F0IGRlY2F5O1xcblxcdFxcdGZsb2F0IGNvbmVDb3M7XFxuXFx0XFx0ZmxvYXQgcGVudW1icmFDb3M7XFxuXFx0fTtcXG5cXHR1bmlmb3JtIFNwb3RMaWdodCBzcG90TGlnaHRzWyBOVU1fU1BPVF9MSUdIVFMgXTtcXG5cXHR2b2lkIGdldFNwb3REaXJlY3RMaWdodElycmFkaWFuY2UoIGNvbnN0IGluIFNwb3RMaWdodCBzcG90TGlnaHQsIGNvbnN0IGluIEdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnksIG91dCBJbmNpZGVudExpZ2h0IGRpcmVjdExpZ2h0ICkge1xcblxcdFxcdHZlYzMgbFZlY3RvciA9IHNwb3RMaWdodC5wb3NpdGlvbiAtIGdlb21ldHJ5LnBvc2l0aW9uO1xcblxcdFxcdGRpcmVjdExpZ2h0LmRpcmVjdGlvbiA9IG5vcm1hbGl6ZSggbFZlY3RvciApO1xcblxcdFxcdGZsb2F0IGxpZ2h0RGlzdGFuY2UgPSBsZW5ndGgoIGxWZWN0b3IgKTtcXG5cXHRcXHRmbG9hdCBhbmdsZUNvcyA9IGRvdCggZGlyZWN0TGlnaHQuZGlyZWN0aW9uLCBzcG90TGlnaHQuZGlyZWN0aW9uICk7XFxuXFx0XFx0aWYgKCBhbmdsZUNvcyA+IHNwb3RMaWdodC5jb25lQ29zICkge1xcblxcdFxcdFxcdGZsb2F0IHNwb3RFZmZlY3QgPSBzbW9vdGhzdGVwKCBzcG90TGlnaHQuY29uZUNvcywgc3BvdExpZ2h0LnBlbnVtYnJhQ29zLCBhbmdsZUNvcyApO1xcblxcdFxcdFxcdGRpcmVjdExpZ2h0LmNvbG9yID0gc3BvdExpZ2h0LmNvbG9yO1xcblxcdFxcdFxcdGRpcmVjdExpZ2h0LmNvbG9yICo9IHNwb3RFZmZlY3QgKiBwdW5jdHVhbExpZ2h0SW50ZW5zaXR5VG9JcnJhZGlhbmNlRmFjdG9yKCBsaWdodERpc3RhbmNlLCBzcG90TGlnaHQuZGlzdGFuY2UsIHNwb3RMaWdodC5kZWNheSApO1xcblxcdFxcdFxcdGRpcmVjdExpZ2h0LnZpc2libGUgPSB0cnVlO1xcblxcdFxcdH0gZWxzZSB7XFxuXFx0XFx0XFx0ZGlyZWN0TGlnaHQuY29sb3IgPSB2ZWMzKCAwLjAgKTtcXG5cXHRcXHRcXHRkaXJlY3RMaWdodC52aXNpYmxlID0gZmFsc2U7XFxuXFx0XFx0fVxcblxcdH1cXG4jZW5kaWZcXG4jaWYgTlVNX1JFQ1RfQVJFQV9MSUdIVFMgPiAwXFxuXFx0c3RydWN0IFJlY3RBcmVhTGlnaHQge1xcblxcdFxcdHZlYzMgY29sb3I7XFxuXFx0XFx0dmVjMyBwb3NpdGlvbjtcXG5cXHRcXHR2ZWMzIGhhbGZXaWR0aDtcXG5cXHRcXHR2ZWMzIGhhbGZIZWlnaHQ7XFxuXFx0fTtcXG5cXHR1bmlmb3JtIHNhbXBsZXIyRCBsdGNfMTtcXHR1bmlmb3JtIHNhbXBsZXIyRCBsdGNfMjtcXG5cXHR1bmlmb3JtIFJlY3RBcmVhTGlnaHQgcmVjdEFyZWFMaWdodHNbIE5VTV9SRUNUX0FSRUFfTElHSFRTIF07XFxuI2VuZGlmXFxuI2lmIE5VTV9IRU1JX0xJR0hUUyA+IDBcXG5cXHRzdHJ1Y3QgSGVtaXNwaGVyZUxpZ2h0IHtcXG5cXHRcXHR2ZWMzIGRpcmVjdGlvbjtcXG5cXHRcXHR2ZWMzIHNreUNvbG9yO1xcblxcdFxcdHZlYzMgZ3JvdW5kQ29sb3I7XFxuXFx0fTtcXG5cXHR1bmlmb3JtIEhlbWlzcGhlcmVMaWdodCBoZW1pc3BoZXJlTGlnaHRzWyBOVU1fSEVNSV9MSUdIVFMgXTtcXG5cXHR2ZWMzIGdldEhlbWlzcGhlcmVMaWdodElycmFkaWFuY2UoIGNvbnN0IGluIEhlbWlzcGhlcmVMaWdodCBoZW1pTGlnaHQsIGNvbnN0IGluIEdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnkgKSB7XFxuXFx0XFx0ZmxvYXQgZG90TkwgPSBkb3QoIGdlb21ldHJ5Lm5vcm1hbCwgaGVtaUxpZ2h0LmRpcmVjdGlvbiApO1xcblxcdFxcdGZsb2F0IGhlbWlEaWZmdXNlV2VpZ2h0ID0gMC41ICogZG90TkwgKyAwLjU7XFxuXFx0XFx0dmVjMyBpcnJhZGlhbmNlID0gbWl4KCBoZW1pTGlnaHQuZ3JvdW5kQ29sb3IsIGhlbWlMaWdodC5za3lDb2xvciwgaGVtaURpZmZ1c2VXZWlnaHQgKTtcXG5cXHRcXHQjaWZuZGVmIFBIWVNJQ0FMTFlfQ09SUkVDVF9MSUdIVFNcXG5cXHRcXHRcXHRpcnJhZGlhbmNlICo9IFBJO1xcblxcdFxcdCNlbmRpZlxcblxcdFxcdHJldHVybiBpcnJhZGlhbmNlO1xcblxcdH1cXG4jZW5kaWZcIixsaWdodHNfdG9vbl9mcmFnbWVudDpcIlRvb25NYXRlcmlhbCBtYXRlcmlhbDtcXG5tYXRlcmlhbC5kaWZmdXNlQ29sb3IgPSBkaWZmdXNlQ29sb3IucmdiO1wiLGxpZ2h0c190b29uX3BhcnNfZnJhZ21lbnQ6XCJ2YXJ5aW5nIHZlYzMgdlZpZXdQb3NpdGlvbjtcXG4jaWZuZGVmIEZMQVRfU0hBREVEXFxuXFx0dmFyeWluZyB2ZWMzIHZOb3JtYWw7XFxuI2VuZGlmXFxuc3RydWN0IFRvb25NYXRlcmlhbCB7XFxuXFx0dmVjMyBkaWZmdXNlQ29sb3I7XFxufTtcXG52b2lkIFJFX0RpcmVjdF9Ub29uKCBjb25zdCBpbiBJbmNpZGVudExpZ2h0IGRpcmVjdExpZ2h0LCBjb25zdCBpbiBHZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5LCBjb25zdCBpbiBUb29uTWF0ZXJpYWwgbWF0ZXJpYWwsIGlub3V0IFJlZmxlY3RlZExpZ2h0IHJlZmxlY3RlZExpZ2h0ICkge1xcblxcdHZlYzMgaXJyYWRpYW5jZSA9IGdldEdyYWRpZW50SXJyYWRpYW5jZSggZ2VvbWV0cnkubm9ybWFsLCBkaXJlY3RMaWdodC5kaXJlY3Rpb24gKSAqIGRpcmVjdExpZ2h0LmNvbG9yO1xcblxcdCNpZm5kZWYgUEhZU0lDQUxMWV9DT1JSRUNUX0xJR0hUU1xcblxcdFxcdGlycmFkaWFuY2UgKj0gUEk7XFxuXFx0I2VuZGlmXFxuXFx0cmVmbGVjdGVkTGlnaHQuZGlyZWN0RGlmZnVzZSArPSBpcnJhZGlhbmNlICogQlJERl9EaWZmdXNlX0xhbWJlcnQoIG1hdGVyaWFsLmRpZmZ1c2VDb2xvciApO1xcbn1cXG52b2lkIFJFX0luZGlyZWN0RGlmZnVzZV9Ub29uKCBjb25zdCBpbiB2ZWMzIGlycmFkaWFuY2UsIGNvbnN0IGluIEdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnksIGNvbnN0IGluIFRvb25NYXRlcmlhbCBtYXRlcmlhbCwgaW5vdXQgUmVmbGVjdGVkTGlnaHQgcmVmbGVjdGVkTGlnaHQgKSB7XFxuXFx0cmVmbGVjdGVkTGlnaHQuaW5kaXJlY3REaWZmdXNlICs9IGlycmFkaWFuY2UgKiBCUkRGX0RpZmZ1c2VfTGFtYmVydCggbWF0ZXJpYWwuZGlmZnVzZUNvbG9yICk7XFxufVxcbiNkZWZpbmUgUkVfRGlyZWN0XFx0XFx0XFx0XFx0UkVfRGlyZWN0X1Rvb25cXG4jZGVmaW5lIFJFX0luZGlyZWN0RGlmZnVzZVxcdFxcdFJFX0luZGlyZWN0RGlmZnVzZV9Ub29uXFxuI2RlZmluZSBNYXRlcmlhbF9MaWdodFByb2JlTE9EKCBtYXRlcmlhbCApXFx0KDApXCIsbGlnaHRzX3Bob25nX2ZyYWdtZW50OlwiQmxpbm5QaG9uZ01hdGVyaWFsIG1hdGVyaWFsO1xcbm1hdGVyaWFsLmRpZmZ1c2VDb2xvciA9IGRpZmZ1c2VDb2xvci5yZ2I7XFxubWF0ZXJpYWwuc3BlY3VsYXJDb2xvciA9IHNwZWN1bGFyO1xcbm1hdGVyaWFsLnNwZWN1bGFyU2hpbmluZXNzID0gc2hpbmluZXNzO1xcbm1hdGVyaWFsLnNwZWN1bGFyU3RyZW5ndGggPSBzcGVjdWxhclN0cmVuZ3RoO1wiLGxpZ2h0c19waG9uZ19wYXJzX2ZyYWdtZW50OlwidmFyeWluZyB2ZWMzIHZWaWV3UG9zaXRpb247XFxuI2lmbmRlZiBGTEFUX1NIQURFRFxcblxcdHZhcnlpbmcgdmVjMyB2Tm9ybWFsO1xcbiNlbmRpZlxcbnN0cnVjdCBCbGlublBob25nTWF0ZXJpYWwge1xcblxcdHZlYzMgZGlmZnVzZUNvbG9yO1xcblxcdHZlYzMgc3BlY3VsYXJDb2xvcjtcXG5cXHRmbG9hdCBzcGVjdWxhclNoaW5pbmVzcztcXG5cXHRmbG9hdCBzcGVjdWxhclN0cmVuZ3RoO1xcbn07XFxudm9pZCBSRV9EaXJlY3RfQmxpbm5QaG9uZyggY29uc3QgaW4gSW5jaWRlbnRMaWdodCBkaXJlY3RMaWdodCwgY29uc3QgaW4gR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeSwgY29uc3QgaW4gQmxpbm5QaG9uZ01hdGVyaWFsIG1hdGVyaWFsLCBpbm91dCBSZWZsZWN0ZWRMaWdodCByZWZsZWN0ZWRMaWdodCApIHtcXG5cXHRmbG9hdCBkb3ROTCA9IHNhdHVyYXRlKCBkb3QoIGdlb21ldHJ5Lm5vcm1hbCwgZGlyZWN0TGlnaHQuZGlyZWN0aW9uICkgKTtcXG5cXHR2ZWMzIGlycmFkaWFuY2UgPSBkb3ROTCAqIGRpcmVjdExpZ2h0LmNvbG9yO1xcblxcdCNpZm5kZWYgUEhZU0lDQUxMWV9DT1JSRUNUX0xJR0hUU1xcblxcdFxcdGlycmFkaWFuY2UgKj0gUEk7XFxuXFx0I2VuZGlmXFxuXFx0cmVmbGVjdGVkTGlnaHQuZGlyZWN0RGlmZnVzZSArPSBpcnJhZGlhbmNlICogQlJERl9EaWZmdXNlX0xhbWJlcnQoIG1hdGVyaWFsLmRpZmZ1c2VDb2xvciApO1xcblxcdHJlZmxlY3RlZExpZ2h0LmRpcmVjdFNwZWN1bGFyICs9IGlycmFkaWFuY2UgKiBCUkRGX1NwZWN1bGFyX0JsaW5uUGhvbmcoIGRpcmVjdExpZ2h0LCBnZW9tZXRyeSwgbWF0ZXJpYWwuc3BlY3VsYXJDb2xvciwgbWF0ZXJpYWwuc3BlY3VsYXJTaGluaW5lc3MgKSAqIG1hdGVyaWFsLnNwZWN1bGFyU3RyZW5ndGg7XFxufVxcbnZvaWQgUkVfSW5kaXJlY3REaWZmdXNlX0JsaW5uUGhvbmcoIGNvbnN0IGluIHZlYzMgaXJyYWRpYW5jZSwgY29uc3QgaW4gR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeSwgY29uc3QgaW4gQmxpbm5QaG9uZ01hdGVyaWFsIG1hdGVyaWFsLCBpbm91dCBSZWZsZWN0ZWRMaWdodCByZWZsZWN0ZWRMaWdodCApIHtcXG5cXHRyZWZsZWN0ZWRMaWdodC5pbmRpcmVjdERpZmZ1c2UgKz0gaXJyYWRpYW5jZSAqIEJSREZfRGlmZnVzZV9MYW1iZXJ0KCBtYXRlcmlhbC5kaWZmdXNlQ29sb3IgKTtcXG59XFxuI2RlZmluZSBSRV9EaXJlY3RcXHRcXHRcXHRcXHRSRV9EaXJlY3RfQmxpbm5QaG9uZ1xcbiNkZWZpbmUgUkVfSW5kaXJlY3REaWZmdXNlXFx0XFx0UkVfSW5kaXJlY3REaWZmdXNlX0JsaW5uUGhvbmdcXG4jZGVmaW5lIE1hdGVyaWFsX0xpZ2h0UHJvYmVMT0QoIG1hdGVyaWFsIClcXHQoMClcIixsaWdodHNfcGh5c2ljYWxfZnJhZ21lbnQ6XCJQaHlzaWNhbE1hdGVyaWFsIG1hdGVyaWFsO1xcbm1hdGVyaWFsLmRpZmZ1c2VDb2xvciA9IGRpZmZ1c2VDb2xvci5yZ2IgKiAoIDEuMCAtIG1ldGFsbmVzc0ZhY3RvciApO1xcbnZlYzMgZHh5ID0gbWF4KCBhYnMoIGRGZHgoIGdlb21ldHJ5Tm9ybWFsICkgKSwgYWJzKCBkRmR5KCBnZW9tZXRyeU5vcm1hbCApICkgKTtcXG5mbG9hdCBnZW9tZXRyeVJvdWdobmVzcyA9IG1heCggbWF4KCBkeHkueCwgZHh5LnkgKSwgZHh5LnogKTtcXG5tYXRlcmlhbC5zcGVjdWxhclJvdWdobmVzcyA9IG1heCggcm91Z2huZXNzRmFjdG9yLCAwLjA1MjUgKTttYXRlcmlhbC5zcGVjdWxhclJvdWdobmVzcyArPSBnZW9tZXRyeVJvdWdobmVzcztcXG5tYXRlcmlhbC5zcGVjdWxhclJvdWdobmVzcyA9IG1pbiggbWF0ZXJpYWwuc3BlY3VsYXJSb3VnaG5lc3MsIDEuMCApO1xcbiNpZmRlZiBSRUZMRUNUSVZJVFlcXG5cXHRtYXRlcmlhbC5zcGVjdWxhckNvbG9yID0gbWl4KCB2ZWMzKCBNQVhJTVVNX1NQRUNVTEFSX0NPRUZGSUNJRU5UICogcG93MiggcmVmbGVjdGl2aXR5ICkgKSwgZGlmZnVzZUNvbG9yLnJnYiwgbWV0YWxuZXNzRmFjdG9yICk7XFxuI2Vsc2VcXG5cXHRtYXRlcmlhbC5zcGVjdWxhckNvbG9yID0gbWl4KCB2ZWMzKCBERUZBVUxUX1NQRUNVTEFSX0NPRUZGSUNJRU5UICksIGRpZmZ1c2VDb2xvci5yZ2IsIG1ldGFsbmVzc0ZhY3RvciApO1xcbiNlbmRpZlxcbiNpZmRlZiBDTEVBUkNPQVRcXG5cXHRtYXRlcmlhbC5jbGVhcmNvYXQgPSBjbGVhcmNvYXQ7XFxuXFx0bWF0ZXJpYWwuY2xlYXJjb2F0Um91Z2huZXNzID0gY2xlYXJjb2F0Um91Z2huZXNzO1xcblxcdCNpZmRlZiBVU0VfQ0xFQVJDT0FUTUFQXFxuXFx0XFx0bWF0ZXJpYWwuY2xlYXJjb2F0ICo9IHRleHR1cmUyRCggY2xlYXJjb2F0TWFwLCB2VXYgKS54O1xcblxcdCNlbmRpZlxcblxcdCNpZmRlZiBVU0VfQ0xFQVJDT0FUX1JPVUdITkVTU01BUFxcblxcdFxcdG1hdGVyaWFsLmNsZWFyY29hdFJvdWdobmVzcyAqPSB0ZXh0dXJlMkQoIGNsZWFyY29hdFJvdWdobmVzc01hcCwgdlV2ICkueTtcXG5cXHQjZW5kaWZcXG5cXHRtYXRlcmlhbC5jbGVhcmNvYXQgPSBzYXR1cmF0ZSggbWF0ZXJpYWwuY2xlYXJjb2F0ICk7XFx0bWF0ZXJpYWwuY2xlYXJjb2F0Um91Z2huZXNzID0gbWF4KCBtYXRlcmlhbC5jbGVhcmNvYXRSb3VnaG5lc3MsIDAuMDUyNSApO1xcblxcdG1hdGVyaWFsLmNsZWFyY29hdFJvdWdobmVzcyArPSBnZW9tZXRyeVJvdWdobmVzcztcXG5cXHRtYXRlcmlhbC5jbGVhcmNvYXRSb3VnaG5lc3MgPSBtaW4oIG1hdGVyaWFsLmNsZWFyY29hdFJvdWdobmVzcywgMS4wICk7XFxuI2VuZGlmXFxuI2lmZGVmIFVTRV9TSEVFTlxcblxcdG1hdGVyaWFsLnNoZWVuQ29sb3IgPSBzaGVlbjtcXG4jZW5kaWZcIixsaWdodHNfcGh5c2ljYWxfcGFyc19mcmFnbWVudDpcInN0cnVjdCBQaHlzaWNhbE1hdGVyaWFsIHtcXG5cXHR2ZWMzIGRpZmZ1c2VDb2xvcjtcXG5cXHRmbG9hdCBzcGVjdWxhclJvdWdobmVzcztcXG5cXHR2ZWMzIHNwZWN1bGFyQ29sb3I7XFxuI2lmZGVmIENMRUFSQ09BVFxcblxcdGZsb2F0IGNsZWFyY29hdDtcXG5cXHRmbG9hdCBjbGVhcmNvYXRSb3VnaG5lc3M7XFxuI2VuZGlmXFxuI2lmZGVmIFVTRV9TSEVFTlxcblxcdHZlYzMgc2hlZW5Db2xvcjtcXG4jZW5kaWZcXG59O1xcbiNkZWZpbmUgTUFYSU1VTV9TUEVDVUxBUl9DT0VGRklDSUVOVCAwLjE2XFxuI2RlZmluZSBERUZBVUxUX1NQRUNVTEFSX0NPRUZGSUNJRU5UIDAuMDRcXG5mbG9hdCBjbGVhcmNvYXRESFJBcHByb3goIGNvbnN0IGluIGZsb2F0IHJvdWdobmVzcywgY29uc3QgaW4gZmxvYXQgZG90TkwgKSB7XFxuXFx0cmV0dXJuIERFRkFVTFRfU1BFQ1VMQVJfQ09FRkZJQ0lFTlQgKyAoIDEuMCAtIERFRkFVTFRfU1BFQ1VMQVJfQ09FRkZJQ0lFTlQgKSAqICggcG93KCAxLjAgLSBkb3ROTCwgNS4wICkgKiBwb3coIDEuMCAtIHJvdWdobmVzcywgMi4wICkgKTtcXG59XFxuI2lmIE5VTV9SRUNUX0FSRUFfTElHSFRTID4gMFxcblxcdHZvaWQgUkVfRGlyZWN0X1JlY3RBcmVhX1BoeXNpY2FsKCBjb25zdCBpbiBSZWN0QXJlYUxpZ2h0IHJlY3RBcmVhTGlnaHQsIGNvbnN0IGluIEdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnksIGNvbnN0IGluIFBoeXNpY2FsTWF0ZXJpYWwgbWF0ZXJpYWwsIGlub3V0IFJlZmxlY3RlZExpZ2h0IHJlZmxlY3RlZExpZ2h0ICkge1xcblxcdFxcdHZlYzMgbm9ybWFsID0gZ2VvbWV0cnkubm9ybWFsO1xcblxcdFxcdHZlYzMgdmlld0RpciA9IGdlb21ldHJ5LnZpZXdEaXI7XFxuXFx0XFx0dmVjMyBwb3NpdGlvbiA9IGdlb21ldHJ5LnBvc2l0aW9uO1xcblxcdFxcdHZlYzMgbGlnaHRQb3MgPSByZWN0QXJlYUxpZ2h0LnBvc2l0aW9uO1xcblxcdFxcdHZlYzMgaGFsZldpZHRoID0gcmVjdEFyZWFMaWdodC5oYWxmV2lkdGg7XFxuXFx0XFx0dmVjMyBoYWxmSGVpZ2h0ID0gcmVjdEFyZWFMaWdodC5oYWxmSGVpZ2h0O1xcblxcdFxcdHZlYzMgbGlnaHRDb2xvciA9IHJlY3RBcmVhTGlnaHQuY29sb3I7XFxuXFx0XFx0ZmxvYXQgcm91Z2huZXNzID0gbWF0ZXJpYWwuc3BlY3VsYXJSb3VnaG5lc3M7XFxuXFx0XFx0dmVjMyByZWN0Q29vcmRzWyA0IF07XFxuXFx0XFx0cmVjdENvb3Jkc1sgMCBdID0gbGlnaHRQb3MgKyBoYWxmV2lkdGggLSBoYWxmSGVpZ2h0O1xcdFxcdHJlY3RDb29yZHNbIDEgXSA9IGxpZ2h0UG9zIC0gaGFsZldpZHRoIC0gaGFsZkhlaWdodDtcXG5cXHRcXHRyZWN0Q29vcmRzWyAyIF0gPSBsaWdodFBvcyAtIGhhbGZXaWR0aCArIGhhbGZIZWlnaHQ7XFxuXFx0XFx0cmVjdENvb3Jkc1sgMyBdID0gbGlnaHRQb3MgKyBoYWxmV2lkdGggKyBoYWxmSGVpZ2h0O1xcblxcdFxcdHZlYzIgdXYgPSBMVENfVXYoIG5vcm1hbCwgdmlld0Rpciwgcm91Z2huZXNzICk7XFxuXFx0XFx0dmVjNCB0MSA9IHRleHR1cmUyRCggbHRjXzEsIHV2ICk7XFxuXFx0XFx0dmVjNCB0MiA9IHRleHR1cmUyRCggbHRjXzIsIHV2ICk7XFxuXFx0XFx0bWF0MyBtSW52ID0gbWF0MyhcXG5cXHRcXHRcXHR2ZWMzKCB0MS54LCAwLCB0MS55ICksXFxuXFx0XFx0XFx0dmVjMyggICAgMCwgMSwgICAgMCApLFxcblxcdFxcdFxcdHZlYzMoIHQxLnosIDAsIHQxLncgKVxcblxcdFxcdCk7XFxuXFx0XFx0dmVjMyBmcmVzbmVsID0gKCBtYXRlcmlhbC5zcGVjdWxhckNvbG9yICogdDIueCArICggdmVjMyggMS4wICkgLSBtYXRlcmlhbC5zcGVjdWxhckNvbG9yICkgKiB0Mi55ICk7XFxuXFx0XFx0cmVmbGVjdGVkTGlnaHQuZGlyZWN0U3BlY3VsYXIgKz0gbGlnaHRDb2xvciAqIGZyZXNuZWwgKiBMVENfRXZhbHVhdGUoIG5vcm1hbCwgdmlld0RpciwgcG9zaXRpb24sIG1JbnYsIHJlY3RDb29yZHMgKTtcXG5cXHRcXHRyZWZsZWN0ZWRMaWdodC5kaXJlY3REaWZmdXNlICs9IGxpZ2h0Q29sb3IgKiBtYXRlcmlhbC5kaWZmdXNlQ29sb3IgKiBMVENfRXZhbHVhdGUoIG5vcm1hbCwgdmlld0RpciwgcG9zaXRpb24sIG1hdDMoIDEuMCApLCByZWN0Q29vcmRzICk7XFxuXFx0fVxcbiNlbmRpZlxcbnZvaWQgUkVfRGlyZWN0X1BoeXNpY2FsKCBjb25zdCBpbiBJbmNpZGVudExpZ2h0IGRpcmVjdExpZ2h0LCBjb25zdCBpbiBHZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5LCBjb25zdCBpbiBQaHlzaWNhbE1hdGVyaWFsIG1hdGVyaWFsLCBpbm91dCBSZWZsZWN0ZWRMaWdodCByZWZsZWN0ZWRMaWdodCApIHtcXG5cXHRmbG9hdCBkb3ROTCA9IHNhdHVyYXRlKCBkb3QoIGdlb21ldHJ5Lm5vcm1hbCwgZGlyZWN0TGlnaHQuZGlyZWN0aW9uICkgKTtcXG5cXHR2ZWMzIGlycmFkaWFuY2UgPSBkb3ROTCAqIGRpcmVjdExpZ2h0LmNvbG9yO1xcblxcdCNpZm5kZWYgUEhZU0lDQUxMWV9DT1JSRUNUX0xJR0hUU1xcblxcdFxcdGlycmFkaWFuY2UgKj0gUEk7XFxuXFx0I2VuZGlmXFxuXFx0I2lmZGVmIENMRUFSQ09BVFxcblxcdFxcdGZsb2F0IGNjRG90TkwgPSBzYXR1cmF0ZSggZG90KCBnZW9tZXRyeS5jbGVhcmNvYXROb3JtYWwsIGRpcmVjdExpZ2h0LmRpcmVjdGlvbiApICk7XFxuXFx0XFx0dmVjMyBjY0lycmFkaWFuY2UgPSBjY0RvdE5MICogZGlyZWN0TGlnaHQuY29sb3I7XFxuXFx0XFx0I2lmbmRlZiBQSFlTSUNBTExZX0NPUlJFQ1RfTElHSFRTXFxuXFx0XFx0XFx0Y2NJcnJhZGlhbmNlICo9IFBJO1xcblxcdFxcdCNlbmRpZlxcblxcdFxcdGZsb2F0IGNsZWFyY29hdERIUiA9IG1hdGVyaWFsLmNsZWFyY29hdCAqIGNsZWFyY29hdERIUkFwcHJveCggbWF0ZXJpYWwuY2xlYXJjb2F0Um91Z2huZXNzLCBjY0RvdE5MICk7XFxuXFx0XFx0cmVmbGVjdGVkTGlnaHQuZGlyZWN0U3BlY3VsYXIgKz0gY2NJcnJhZGlhbmNlICogbWF0ZXJpYWwuY2xlYXJjb2F0ICogQlJERl9TcGVjdWxhcl9HR1goIGRpcmVjdExpZ2h0LCBnZW9tZXRyeS52aWV3RGlyLCBnZW9tZXRyeS5jbGVhcmNvYXROb3JtYWwsIHZlYzMoIERFRkFVTFRfU1BFQ1VMQVJfQ09FRkZJQ0lFTlQgKSwgbWF0ZXJpYWwuY2xlYXJjb2F0Um91Z2huZXNzICk7XFxuXFx0I2Vsc2VcXG5cXHRcXHRmbG9hdCBjbGVhcmNvYXRESFIgPSAwLjA7XFxuXFx0I2VuZGlmXFxuXFx0I2lmZGVmIFVTRV9TSEVFTlxcblxcdFxcdHJlZmxlY3RlZExpZ2h0LmRpcmVjdFNwZWN1bGFyICs9ICggMS4wIC0gY2xlYXJjb2F0REhSICkgKiBpcnJhZGlhbmNlICogQlJERl9TcGVjdWxhcl9TaGVlbihcXG5cXHRcXHRcXHRtYXRlcmlhbC5zcGVjdWxhclJvdWdobmVzcyxcXG5cXHRcXHRcXHRkaXJlY3RMaWdodC5kaXJlY3Rpb24sXFxuXFx0XFx0XFx0Z2VvbWV0cnksXFxuXFx0XFx0XFx0bWF0ZXJpYWwuc2hlZW5Db2xvclxcblxcdFxcdCk7XFxuXFx0I2Vsc2VcXG5cXHRcXHRyZWZsZWN0ZWRMaWdodC5kaXJlY3RTcGVjdWxhciArPSAoIDEuMCAtIGNsZWFyY29hdERIUiApICogaXJyYWRpYW5jZSAqIEJSREZfU3BlY3VsYXJfR0dYKCBkaXJlY3RMaWdodCwgZ2VvbWV0cnkudmlld0RpciwgZ2VvbWV0cnkubm9ybWFsLCBtYXRlcmlhbC5zcGVjdWxhckNvbG9yLCBtYXRlcmlhbC5zcGVjdWxhclJvdWdobmVzcyk7XFxuXFx0I2VuZGlmXFxuXFx0cmVmbGVjdGVkTGlnaHQuZGlyZWN0RGlmZnVzZSArPSAoIDEuMCAtIGNsZWFyY29hdERIUiApICogaXJyYWRpYW5jZSAqIEJSREZfRGlmZnVzZV9MYW1iZXJ0KCBtYXRlcmlhbC5kaWZmdXNlQ29sb3IgKTtcXG59XFxudm9pZCBSRV9JbmRpcmVjdERpZmZ1c2VfUGh5c2ljYWwoIGNvbnN0IGluIHZlYzMgaXJyYWRpYW5jZSwgY29uc3QgaW4gR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeSwgY29uc3QgaW4gUGh5c2ljYWxNYXRlcmlhbCBtYXRlcmlhbCwgaW5vdXQgUmVmbGVjdGVkTGlnaHQgcmVmbGVjdGVkTGlnaHQgKSB7XFxuXFx0cmVmbGVjdGVkTGlnaHQuaW5kaXJlY3REaWZmdXNlICs9IGlycmFkaWFuY2UgKiBCUkRGX0RpZmZ1c2VfTGFtYmVydCggbWF0ZXJpYWwuZGlmZnVzZUNvbG9yICk7XFxufVxcbnZvaWQgUkVfSW5kaXJlY3RTcGVjdWxhcl9QaHlzaWNhbCggY29uc3QgaW4gdmVjMyByYWRpYW5jZSwgY29uc3QgaW4gdmVjMyBpcnJhZGlhbmNlLCBjb25zdCBpbiB2ZWMzIGNsZWFyY29hdFJhZGlhbmNlLCBjb25zdCBpbiBHZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5LCBjb25zdCBpbiBQaHlzaWNhbE1hdGVyaWFsIG1hdGVyaWFsLCBpbm91dCBSZWZsZWN0ZWRMaWdodCByZWZsZWN0ZWRMaWdodCkge1xcblxcdCNpZmRlZiBDTEVBUkNPQVRcXG5cXHRcXHRmbG9hdCBjY0RvdE5WID0gc2F0dXJhdGUoIGRvdCggZ2VvbWV0cnkuY2xlYXJjb2F0Tm9ybWFsLCBnZW9tZXRyeS52aWV3RGlyICkgKTtcXG5cXHRcXHRyZWZsZWN0ZWRMaWdodC5pbmRpcmVjdFNwZWN1bGFyICs9IGNsZWFyY29hdFJhZGlhbmNlICogbWF0ZXJpYWwuY2xlYXJjb2F0ICogQlJERl9TcGVjdWxhcl9HR1hfRW52aXJvbm1lbnQoIGdlb21ldHJ5LnZpZXdEaXIsIGdlb21ldHJ5LmNsZWFyY29hdE5vcm1hbCwgdmVjMyggREVGQVVMVF9TUEVDVUxBUl9DT0VGRklDSUVOVCApLCBtYXRlcmlhbC5jbGVhcmNvYXRSb3VnaG5lc3MgKTtcXG5cXHRcXHRmbG9hdCBjY0RvdE5MID0gY2NEb3ROVjtcXG5cXHRcXHRmbG9hdCBjbGVhcmNvYXRESFIgPSBtYXRlcmlhbC5jbGVhcmNvYXQgKiBjbGVhcmNvYXRESFJBcHByb3goIG1hdGVyaWFsLmNsZWFyY29hdFJvdWdobmVzcywgY2NEb3ROTCApO1xcblxcdCNlbHNlXFxuXFx0XFx0ZmxvYXQgY2xlYXJjb2F0REhSID0gMC4wO1xcblxcdCNlbmRpZlxcblxcdGZsb2F0IGNsZWFyY29hdEludiA9IDEuMCAtIGNsZWFyY29hdERIUjtcXG5cXHR2ZWMzIHNpbmdsZVNjYXR0ZXJpbmcgPSB2ZWMzKCAwLjAgKTtcXG5cXHR2ZWMzIG11bHRpU2NhdHRlcmluZyA9IHZlYzMoIDAuMCApO1xcblxcdHZlYzMgY29zaW5lV2VpZ2h0ZWRJcnJhZGlhbmNlID0gaXJyYWRpYW5jZSAqIFJFQ0lQUk9DQUxfUEk7XFxuXFx0QlJERl9TcGVjdWxhcl9NdWx0aXNjYXR0ZXJpbmdfRW52aXJvbm1lbnQoIGdlb21ldHJ5LCBtYXRlcmlhbC5zcGVjdWxhckNvbG9yLCBtYXRlcmlhbC5zcGVjdWxhclJvdWdobmVzcywgc2luZ2xlU2NhdHRlcmluZywgbXVsdGlTY2F0dGVyaW5nICk7XFxuXFx0dmVjMyBkaWZmdXNlID0gbWF0ZXJpYWwuZGlmZnVzZUNvbG9yICogKCAxLjAgLSAoIHNpbmdsZVNjYXR0ZXJpbmcgKyBtdWx0aVNjYXR0ZXJpbmcgKSApO1xcblxcdHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0U3BlY3VsYXIgKz0gY2xlYXJjb2F0SW52ICogcmFkaWFuY2UgKiBzaW5nbGVTY2F0dGVyaW5nO1xcblxcdHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0U3BlY3VsYXIgKz0gbXVsdGlTY2F0dGVyaW5nICogY29zaW5lV2VpZ2h0ZWRJcnJhZGlhbmNlO1xcblxcdHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0RGlmZnVzZSArPSBkaWZmdXNlICogY29zaW5lV2VpZ2h0ZWRJcnJhZGlhbmNlO1xcbn1cXG4jZGVmaW5lIFJFX0RpcmVjdFxcdFxcdFxcdFxcdFJFX0RpcmVjdF9QaHlzaWNhbFxcbiNkZWZpbmUgUkVfRGlyZWN0X1JlY3RBcmVhXFx0XFx0UkVfRGlyZWN0X1JlY3RBcmVhX1BoeXNpY2FsXFxuI2RlZmluZSBSRV9JbmRpcmVjdERpZmZ1c2VcXHRcXHRSRV9JbmRpcmVjdERpZmZ1c2VfUGh5c2ljYWxcXG4jZGVmaW5lIFJFX0luZGlyZWN0U3BlY3VsYXJcXHRcXHRSRV9JbmRpcmVjdFNwZWN1bGFyX1BoeXNpY2FsXFxuZmxvYXQgY29tcHV0ZVNwZWN1bGFyT2NjbHVzaW9uKCBjb25zdCBpbiBmbG9hdCBkb3ROViwgY29uc3QgaW4gZmxvYXQgYW1iaWVudE9jY2x1c2lvbiwgY29uc3QgaW4gZmxvYXQgcm91Z2huZXNzICkge1xcblxcdHJldHVybiBzYXR1cmF0ZSggcG93KCBkb3ROViArIGFtYmllbnRPY2NsdXNpb24sIGV4cDIoIC0gMTYuMCAqIHJvdWdobmVzcyAtIDEuMCApICkgLSAxLjAgKyBhbWJpZW50T2NjbHVzaW9uICk7XFxufVwiLGxpZ2h0c19mcmFnbWVudF9iZWdpbjpcIlxcbkdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnk7XFxuZ2VvbWV0cnkucG9zaXRpb24gPSAtIHZWaWV3UG9zaXRpb247XFxuZ2VvbWV0cnkubm9ybWFsID0gbm9ybWFsO1xcbmdlb21ldHJ5LnZpZXdEaXIgPSAoIGlzT3J0aG9ncmFwaGljICkgPyB2ZWMzKCAwLCAwLCAxICkgOiBub3JtYWxpemUoIHZWaWV3UG9zaXRpb24gKTtcXG4jaWZkZWYgQ0xFQVJDT0FUXFxuXFx0Z2VvbWV0cnkuY2xlYXJjb2F0Tm9ybWFsID0gY2xlYXJjb2F0Tm9ybWFsO1xcbiNlbmRpZlxcbkluY2lkZW50TGlnaHQgZGlyZWN0TGlnaHQ7XFxuI2lmICggTlVNX1BPSU5UX0xJR0hUUyA+IDAgKSAmJiBkZWZpbmVkKCBSRV9EaXJlY3QgKVxcblxcdFBvaW50TGlnaHQgcG9pbnRMaWdodDtcXG5cXHQjaWYgZGVmaW5lZCggVVNFX1NIQURPV01BUCApICYmIE5VTV9QT0lOVF9MSUdIVF9TSEFET1dTID4gMFxcblxcdFBvaW50TGlnaHRTaGFkb3cgcG9pbnRMaWdodFNoYWRvdztcXG5cXHQjZW5kaWZcXG5cXHQjcHJhZ21hIHVucm9sbF9sb29wX3N0YXJ0XFxuXFx0Zm9yICggaW50IGkgPSAwOyBpIDwgTlVNX1BPSU5UX0xJR0hUUzsgaSArKyApIHtcXG5cXHRcXHRwb2ludExpZ2h0ID0gcG9pbnRMaWdodHNbIGkgXTtcXG5cXHRcXHRnZXRQb2ludERpcmVjdExpZ2h0SXJyYWRpYW5jZSggcG9pbnRMaWdodCwgZ2VvbWV0cnksIGRpcmVjdExpZ2h0ICk7XFxuXFx0XFx0I2lmIGRlZmluZWQoIFVTRV9TSEFET1dNQVAgKSAmJiAoIFVOUk9MTEVEX0xPT1BfSU5ERVggPCBOVU1fUE9JTlRfTElHSFRfU0hBRE9XUyApXFxuXFx0XFx0cG9pbnRMaWdodFNoYWRvdyA9IHBvaW50TGlnaHRTaGFkb3dzWyBpIF07XFxuXFx0XFx0ZGlyZWN0TGlnaHQuY29sb3IgKj0gYWxsKCBidmVjMiggZGlyZWN0TGlnaHQudmlzaWJsZSwgcmVjZWl2ZVNoYWRvdyApICkgPyBnZXRQb2ludFNoYWRvdyggcG9pbnRTaGFkb3dNYXBbIGkgXSwgcG9pbnRMaWdodFNoYWRvdy5zaGFkb3dNYXBTaXplLCBwb2ludExpZ2h0U2hhZG93LnNoYWRvd0JpYXMsIHBvaW50TGlnaHRTaGFkb3cuc2hhZG93UmFkaXVzLCB2UG9pbnRTaGFkb3dDb29yZFsgaSBdLCBwb2ludExpZ2h0U2hhZG93LnNoYWRvd0NhbWVyYU5lYXIsIHBvaW50TGlnaHRTaGFkb3cuc2hhZG93Q2FtZXJhRmFyICkgOiAxLjA7XFxuXFx0XFx0I2VuZGlmXFxuXFx0XFx0UkVfRGlyZWN0KCBkaXJlY3RMaWdodCwgZ2VvbWV0cnksIG1hdGVyaWFsLCByZWZsZWN0ZWRMaWdodCApO1xcblxcdH1cXG5cXHQjcHJhZ21hIHVucm9sbF9sb29wX2VuZFxcbiNlbmRpZlxcbiNpZiAoIE5VTV9TUE9UX0xJR0hUUyA+IDAgKSAmJiBkZWZpbmVkKCBSRV9EaXJlY3QgKVxcblxcdFNwb3RMaWdodCBzcG90TGlnaHQ7XFxuXFx0I2lmIGRlZmluZWQoIFVTRV9TSEFET1dNQVAgKSAmJiBOVU1fU1BPVF9MSUdIVF9TSEFET1dTID4gMFxcblxcdFNwb3RMaWdodFNoYWRvdyBzcG90TGlnaHRTaGFkb3c7XFxuXFx0I2VuZGlmXFxuXFx0I3ByYWdtYSB1bnJvbGxfbG9vcF9zdGFydFxcblxcdGZvciAoIGludCBpID0gMDsgaSA8IE5VTV9TUE9UX0xJR0hUUzsgaSArKyApIHtcXG5cXHRcXHRzcG90TGlnaHQgPSBzcG90TGlnaHRzWyBpIF07XFxuXFx0XFx0Z2V0U3BvdERpcmVjdExpZ2h0SXJyYWRpYW5jZSggc3BvdExpZ2h0LCBnZW9tZXRyeSwgZGlyZWN0TGlnaHQgKTtcXG5cXHRcXHQjaWYgZGVmaW5lZCggVVNFX1NIQURPV01BUCApICYmICggVU5ST0xMRURfTE9PUF9JTkRFWCA8IE5VTV9TUE9UX0xJR0hUX1NIQURPV1MgKVxcblxcdFxcdHNwb3RMaWdodFNoYWRvdyA9IHNwb3RMaWdodFNoYWRvd3NbIGkgXTtcXG5cXHRcXHRkaXJlY3RMaWdodC5jb2xvciAqPSBhbGwoIGJ2ZWMyKCBkaXJlY3RMaWdodC52aXNpYmxlLCByZWNlaXZlU2hhZG93ICkgKSA/IGdldFNoYWRvdyggc3BvdFNoYWRvd01hcFsgaSBdLCBzcG90TGlnaHRTaGFkb3cuc2hhZG93TWFwU2l6ZSwgc3BvdExpZ2h0U2hhZG93LnNoYWRvd0JpYXMsIHNwb3RMaWdodFNoYWRvdy5zaGFkb3dSYWRpdXMsIHZTcG90U2hhZG93Q29vcmRbIGkgXSApIDogMS4wO1xcblxcdFxcdCNlbmRpZlxcblxcdFxcdFJFX0RpcmVjdCggZGlyZWN0TGlnaHQsIGdlb21ldHJ5LCBtYXRlcmlhbCwgcmVmbGVjdGVkTGlnaHQgKTtcXG5cXHR9XFxuXFx0I3ByYWdtYSB1bnJvbGxfbG9vcF9lbmRcXG4jZW5kaWZcXG4jaWYgKCBOVU1fRElSX0xJR0hUUyA+IDAgKSAmJiBkZWZpbmVkKCBSRV9EaXJlY3QgKVxcblxcdERpcmVjdGlvbmFsTGlnaHQgZGlyZWN0aW9uYWxMaWdodDtcXG5cXHQjaWYgZGVmaW5lZCggVVNFX1NIQURPV01BUCApICYmIE5VTV9ESVJfTElHSFRfU0hBRE9XUyA+IDBcXG5cXHREaXJlY3Rpb25hbExpZ2h0U2hhZG93IGRpcmVjdGlvbmFsTGlnaHRTaGFkb3c7XFxuXFx0I2VuZGlmXFxuXFx0I3ByYWdtYSB1bnJvbGxfbG9vcF9zdGFydFxcblxcdGZvciAoIGludCBpID0gMDsgaSA8IE5VTV9ESVJfTElHSFRTOyBpICsrICkge1xcblxcdFxcdGRpcmVjdGlvbmFsTGlnaHQgPSBkaXJlY3Rpb25hbExpZ2h0c1sgaSBdO1xcblxcdFxcdGdldERpcmVjdGlvbmFsRGlyZWN0TGlnaHRJcnJhZGlhbmNlKCBkaXJlY3Rpb25hbExpZ2h0LCBnZW9tZXRyeSwgZGlyZWN0TGlnaHQgKTtcXG5cXHRcXHQjaWYgZGVmaW5lZCggVVNFX1NIQURPV01BUCApICYmICggVU5ST0xMRURfTE9PUF9JTkRFWCA8IE5VTV9ESVJfTElHSFRfU0hBRE9XUyApXFxuXFx0XFx0ZGlyZWN0aW9uYWxMaWdodFNoYWRvdyA9IGRpcmVjdGlvbmFsTGlnaHRTaGFkb3dzWyBpIF07XFxuXFx0XFx0ZGlyZWN0TGlnaHQuY29sb3IgKj0gYWxsKCBidmVjMiggZGlyZWN0TGlnaHQudmlzaWJsZSwgcmVjZWl2ZVNoYWRvdyApICkgPyBnZXRTaGFkb3coIGRpcmVjdGlvbmFsU2hhZG93TWFwWyBpIF0sIGRpcmVjdGlvbmFsTGlnaHRTaGFkb3cuc2hhZG93TWFwU2l6ZSwgZGlyZWN0aW9uYWxMaWdodFNoYWRvdy5zaGFkb3dCaWFzLCBkaXJlY3Rpb25hbExpZ2h0U2hhZG93LnNoYWRvd1JhZGl1cywgdkRpcmVjdGlvbmFsU2hhZG93Q29vcmRbIGkgXSApIDogMS4wO1xcblxcdFxcdCNlbmRpZlxcblxcdFxcdFJFX0RpcmVjdCggZGlyZWN0TGlnaHQsIGdlb21ldHJ5LCBtYXRlcmlhbCwgcmVmbGVjdGVkTGlnaHQgKTtcXG5cXHR9XFxuXFx0I3ByYWdtYSB1bnJvbGxfbG9vcF9lbmRcXG4jZW5kaWZcXG4jaWYgKCBOVU1fUkVDVF9BUkVBX0xJR0hUUyA+IDAgKSAmJiBkZWZpbmVkKCBSRV9EaXJlY3RfUmVjdEFyZWEgKVxcblxcdFJlY3RBcmVhTGlnaHQgcmVjdEFyZWFMaWdodDtcXG5cXHQjcHJhZ21hIHVucm9sbF9sb29wX3N0YXJ0XFxuXFx0Zm9yICggaW50IGkgPSAwOyBpIDwgTlVNX1JFQ1RfQVJFQV9MSUdIVFM7IGkgKysgKSB7XFxuXFx0XFx0cmVjdEFyZWFMaWdodCA9IHJlY3RBcmVhTGlnaHRzWyBpIF07XFxuXFx0XFx0UkVfRGlyZWN0X1JlY3RBcmVhKCByZWN0QXJlYUxpZ2h0LCBnZW9tZXRyeSwgbWF0ZXJpYWwsIHJlZmxlY3RlZExpZ2h0ICk7XFxuXFx0fVxcblxcdCNwcmFnbWEgdW5yb2xsX2xvb3BfZW5kXFxuI2VuZGlmXFxuI2lmIGRlZmluZWQoIFJFX0luZGlyZWN0RGlmZnVzZSApXFxuXFx0dmVjMyBpYmxJcnJhZGlhbmNlID0gdmVjMyggMC4wICk7XFxuXFx0dmVjMyBpcnJhZGlhbmNlID0gZ2V0QW1iaWVudExpZ2h0SXJyYWRpYW5jZSggYW1iaWVudExpZ2h0Q29sb3IgKTtcXG5cXHRpcnJhZGlhbmNlICs9IGdldExpZ2h0UHJvYmVJcnJhZGlhbmNlKCBsaWdodFByb2JlLCBnZW9tZXRyeSApO1xcblxcdCNpZiAoIE5VTV9IRU1JX0xJR0hUUyA+IDAgKVxcblxcdFxcdCNwcmFnbWEgdW5yb2xsX2xvb3Bfc3RhcnRcXG5cXHRcXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBOVU1fSEVNSV9MSUdIVFM7IGkgKysgKSB7XFxuXFx0XFx0XFx0aXJyYWRpYW5jZSArPSBnZXRIZW1pc3BoZXJlTGlnaHRJcnJhZGlhbmNlKCBoZW1pc3BoZXJlTGlnaHRzWyBpIF0sIGdlb21ldHJ5ICk7XFxuXFx0XFx0fVxcblxcdFxcdCNwcmFnbWEgdW5yb2xsX2xvb3BfZW5kXFxuXFx0I2VuZGlmXFxuI2VuZGlmXFxuI2lmIGRlZmluZWQoIFJFX0luZGlyZWN0U3BlY3VsYXIgKVxcblxcdHZlYzMgcmFkaWFuY2UgPSB2ZWMzKCAwLjAgKTtcXG5cXHR2ZWMzIGNsZWFyY29hdFJhZGlhbmNlID0gdmVjMyggMC4wICk7XFxuI2VuZGlmXCIsbGlnaHRzX2ZyYWdtZW50X21hcHM6XCIjaWYgZGVmaW5lZCggUkVfSW5kaXJlY3REaWZmdXNlIClcXG5cXHQjaWZkZWYgVVNFX0xJR0hUTUFQXFxuXFx0XFx0dmVjNCBsaWdodE1hcFRleGVsPSB0ZXh0dXJlMkQoIGxpZ2h0TWFwLCB2VXYyICk7XFxuXFx0XFx0dmVjMyBsaWdodE1hcElycmFkaWFuY2UgPSBsaWdodE1hcFRleGVsVG9MaW5lYXIoIGxpZ2h0TWFwVGV4ZWwgKS5yZ2IgKiBsaWdodE1hcEludGVuc2l0eTtcXG5cXHRcXHQjaWZuZGVmIFBIWVNJQ0FMTFlfQ09SUkVDVF9MSUdIVFNcXG5cXHRcXHRcXHRsaWdodE1hcElycmFkaWFuY2UgKj0gUEk7XFxuXFx0XFx0I2VuZGlmXFxuXFx0XFx0aXJyYWRpYW5jZSArPSBsaWdodE1hcElycmFkaWFuY2U7XFxuXFx0I2VuZGlmXFxuXFx0I2lmIGRlZmluZWQoIFVTRV9FTlZNQVAgKSAmJiBkZWZpbmVkKCBTVEFOREFSRCApICYmIGRlZmluZWQoIEVOVk1BUF9UWVBFX0NVQkVfVVYgKVxcblxcdFxcdGlibElycmFkaWFuY2UgKz0gZ2V0TGlnaHRQcm9iZUluZGlyZWN0SXJyYWRpYW5jZSggZ2VvbWV0cnksIG1heE1pcExldmVsICk7XFxuXFx0I2VuZGlmXFxuI2VuZGlmXFxuI2lmIGRlZmluZWQoIFVTRV9FTlZNQVAgKSAmJiBkZWZpbmVkKCBSRV9JbmRpcmVjdFNwZWN1bGFyIClcXG5cXHRyYWRpYW5jZSArPSBnZXRMaWdodFByb2JlSW5kaXJlY3RSYWRpYW5jZSggZ2VvbWV0cnkudmlld0RpciwgZ2VvbWV0cnkubm9ybWFsLCBtYXRlcmlhbC5zcGVjdWxhclJvdWdobmVzcywgbWF4TWlwTGV2ZWwgKTtcXG5cXHQjaWZkZWYgQ0xFQVJDT0FUXFxuXFx0XFx0Y2xlYXJjb2F0UmFkaWFuY2UgKz0gZ2V0TGlnaHRQcm9iZUluZGlyZWN0UmFkaWFuY2UoIGdlb21ldHJ5LnZpZXdEaXIsIGdlb21ldHJ5LmNsZWFyY29hdE5vcm1hbCwgbWF0ZXJpYWwuY2xlYXJjb2F0Um91Z2huZXNzLCBtYXhNaXBMZXZlbCApO1xcblxcdCNlbmRpZlxcbiNlbmRpZlwiLGxpZ2h0c19mcmFnbWVudF9lbmQ6XCIjaWYgZGVmaW5lZCggUkVfSW5kaXJlY3REaWZmdXNlIClcXG5cXHRSRV9JbmRpcmVjdERpZmZ1c2UoIGlycmFkaWFuY2UsIGdlb21ldHJ5LCBtYXRlcmlhbCwgcmVmbGVjdGVkTGlnaHQgKTtcXG4jZW5kaWZcXG4jaWYgZGVmaW5lZCggUkVfSW5kaXJlY3RTcGVjdWxhciApXFxuXFx0UkVfSW5kaXJlY3RTcGVjdWxhciggcmFkaWFuY2UsIGlibElycmFkaWFuY2UsIGNsZWFyY29hdFJhZGlhbmNlLCBnZW9tZXRyeSwgbWF0ZXJpYWwsIHJlZmxlY3RlZExpZ2h0ICk7XFxuI2VuZGlmXCIsbG9nZGVwdGhidWZfZnJhZ21lbnQ6XCIjaWYgZGVmaW5lZCggVVNFX0xPR0RFUFRIQlVGICkgJiYgZGVmaW5lZCggVVNFX0xPR0RFUFRIQlVGX0VYVCApXFxuXFx0Z2xfRnJhZ0RlcHRoRVhUID0gdklzUGVyc3BlY3RpdmUgPT0gMC4wID8gZ2xfRnJhZ0Nvb3JkLnogOiBsb2cyKCB2RnJhZ0RlcHRoICkgKiBsb2dEZXB0aEJ1ZkZDICogMC41O1xcbiNlbmRpZlwiLGxvZ2RlcHRoYnVmX3BhcnNfZnJhZ21lbnQ6XCIjaWYgZGVmaW5lZCggVVNFX0xPR0RFUFRIQlVGICkgJiYgZGVmaW5lZCggVVNFX0xPR0RFUFRIQlVGX0VYVCApXFxuXFx0dW5pZm9ybSBmbG9hdCBsb2dEZXB0aEJ1ZkZDO1xcblxcdHZhcnlpbmcgZmxvYXQgdkZyYWdEZXB0aDtcXG5cXHR2YXJ5aW5nIGZsb2F0IHZJc1BlcnNwZWN0aXZlO1xcbiNlbmRpZlwiLGxvZ2RlcHRoYnVmX3BhcnNfdmVydGV4OlwiI2lmZGVmIFVTRV9MT0dERVBUSEJVRlxcblxcdCNpZmRlZiBVU0VfTE9HREVQVEhCVUZfRVhUXFxuXFx0XFx0dmFyeWluZyBmbG9hdCB2RnJhZ0RlcHRoO1xcblxcdFxcdHZhcnlpbmcgZmxvYXQgdklzUGVyc3BlY3RpdmU7XFxuXFx0I2Vsc2VcXG5cXHRcXHR1bmlmb3JtIGZsb2F0IGxvZ0RlcHRoQnVmRkM7XFxuXFx0I2VuZGlmXFxuI2VuZGlmXCIsbG9nZGVwdGhidWZfdmVydGV4OlwiI2lmZGVmIFVTRV9MT0dERVBUSEJVRlxcblxcdCNpZmRlZiBVU0VfTE9HREVQVEhCVUZfRVhUXFxuXFx0XFx0dkZyYWdEZXB0aCA9IDEuMCArIGdsX1Bvc2l0aW9uLnc7XFxuXFx0XFx0dklzUGVyc3BlY3RpdmUgPSBmbG9hdCggaXNQZXJzcGVjdGl2ZU1hdHJpeCggcHJvamVjdGlvbk1hdHJpeCApICk7XFxuXFx0I2Vsc2VcXG5cXHRcXHRpZiAoIGlzUGVyc3BlY3RpdmVNYXRyaXgoIHByb2plY3Rpb25NYXRyaXggKSApIHtcXG5cXHRcXHRcXHRnbF9Qb3NpdGlvbi56ID0gbG9nMiggbWF4KCBFUFNJTE9OLCBnbF9Qb3NpdGlvbi53ICsgMS4wICkgKSAqIGxvZ0RlcHRoQnVmRkMgLSAxLjA7XFxuXFx0XFx0XFx0Z2xfUG9zaXRpb24ueiAqPSBnbF9Qb3NpdGlvbi53O1xcblxcdFxcdH1cXG5cXHQjZW5kaWZcXG4jZW5kaWZcIixtYXBfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX01BUFxcblxcdHZlYzQgdGV4ZWxDb2xvciA9IHRleHR1cmUyRCggbWFwLCB2VXYgKTtcXG5cXHR0ZXhlbENvbG9yID0gbWFwVGV4ZWxUb0xpbmVhciggdGV4ZWxDb2xvciApO1xcblxcdGRpZmZ1c2VDb2xvciAqPSB0ZXhlbENvbG9yO1xcbiNlbmRpZlwiLG1hcF9wYXJzX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9NQVBcXG5cXHR1bmlmb3JtIHNhbXBsZXIyRCBtYXA7XFxuI2VuZGlmXCIsbWFwX3BhcnRpY2xlX2ZyYWdtZW50OlwiI2lmIGRlZmluZWQoIFVTRV9NQVAgKSB8fCBkZWZpbmVkKCBVU0VfQUxQSEFNQVAgKVxcblxcdHZlYzIgdXYgPSAoIHV2VHJhbnNmb3JtICogdmVjMyggZ2xfUG9pbnRDb29yZC54LCAxLjAgLSBnbF9Qb2ludENvb3JkLnksIDEgKSApLnh5O1xcbiNlbmRpZlxcbiNpZmRlZiBVU0VfTUFQXFxuXFx0dmVjNCBtYXBUZXhlbCA9IHRleHR1cmUyRCggbWFwLCB1diApO1xcblxcdGRpZmZ1c2VDb2xvciAqPSBtYXBUZXhlbFRvTGluZWFyKCBtYXBUZXhlbCApO1xcbiNlbmRpZlxcbiNpZmRlZiBVU0VfQUxQSEFNQVBcXG5cXHRkaWZmdXNlQ29sb3IuYSAqPSB0ZXh0dXJlMkQoIGFscGhhTWFwLCB1diApLmc7XFxuI2VuZGlmXCIsbWFwX3BhcnRpY2xlX3BhcnNfZnJhZ21lbnQ6XCIjaWYgZGVmaW5lZCggVVNFX01BUCApIHx8IGRlZmluZWQoIFVTRV9BTFBIQU1BUCApXFxuXFx0dW5pZm9ybSBtYXQzIHV2VHJhbnNmb3JtO1xcbiNlbmRpZlxcbiNpZmRlZiBVU0VfTUFQXFxuXFx0dW5pZm9ybSBzYW1wbGVyMkQgbWFwO1xcbiNlbmRpZlxcbiNpZmRlZiBVU0VfQUxQSEFNQVBcXG5cXHR1bmlmb3JtIHNhbXBsZXIyRCBhbHBoYU1hcDtcXG4jZW5kaWZcIixtZXRhbG5lc3NtYXBfZnJhZ21lbnQ6XCJmbG9hdCBtZXRhbG5lc3NGYWN0b3IgPSBtZXRhbG5lc3M7XFxuI2lmZGVmIFVTRV9NRVRBTE5FU1NNQVBcXG5cXHR2ZWM0IHRleGVsTWV0YWxuZXNzID0gdGV4dHVyZTJEKCBtZXRhbG5lc3NNYXAsIHZVdiApO1xcblxcdG1ldGFsbmVzc0ZhY3RvciAqPSB0ZXhlbE1ldGFsbmVzcy5iO1xcbiNlbmRpZlwiLG1ldGFsbmVzc21hcF9wYXJzX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9NRVRBTE5FU1NNQVBcXG5cXHR1bmlmb3JtIHNhbXBsZXIyRCBtZXRhbG5lc3NNYXA7XFxuI2VuZGlmXCIsbW9ycGhub3JtYWxfdmVydGV4OlwiI2lmZGVmIFVTRV9NT1JQSE5PUk1BTFNcXG5cXHRvYmplY3ROb3JtYWwgKj0gbW9ycGhUYXJnZXRCYXNlSW5mbHVlbmNlO1xcblxcdG9iamVjdE5vcm1hbCArPSBtb3JwaE5vcm1hbDAgKiBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDAgXTtcXG5cXHRvYmplY3ROb3JtYWwgKz0gbW9ycGhOb3JtYWwxICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyAxIF07XFxuXFx0b2JqZWN0Tm9ybWFsICs9IG1vcnBoTm9ybWFsMiAqIG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgMiBdO1xcblxcdG9iamVjdE5vcm1hbCArPSBtb3JwaE5vcm1hbDMgKiBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDMgXTtcXG4jZW5kaWZcIixtb3JwaHRhcmdldF9wYXJzX3ZlcnRleDpcIiNpZmRlZiBVU0VfTU9SUEhUQVJHRVRTXFxuXFx0dW5pZm9ybSBmbG9hdCBtb3JwaFRhcmdldEJhc2VJbmZsdWVuY2U7XFxuXFx0I2lmbmRlZiBVU0VfTU9SUEhOT1JNQUxTXFxuXFx0XFx0dW5pZm9ybSBmbG9hdCBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDggXTtcXG5cXHQjZWxzZVxcblxcdFxcdHVuaWZvcm0gZmxvYXQgbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyA0IF07XFxuXFx0I2VuZGlmXFxuI2VuZGlmXCIsbW9ycGh0YXJnZXRfdmVydGV4OlwiI2lmZGVmIFVTRV9NT1JQSFRBUkdFVFNcXG5cXHR0cmFuc2Zvcm1lZCAqPSBtb3JwaFRhcmdldEJhc2VJbmZsdWVuY2U7XFxuXFx0dHJhbnNmb3JtZWQgKz0gbW9ycGhUYXJnZXQwICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyAwIF07XFxuXFx0dHJhbnNmb3JtZWQgKz0gbW9ycGhUYXJnZXQxICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyAxIF07XFxuXFx0dHJhbnNmb3JtZWQgKz0gbW9ycGhUYXJnZXQyICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyAyIF07XFxuXFx0dHJhbnNmb3JtZWQgKz0gbW9ycGhUYXJnZXQzICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyAzIF07XFxuXFx0I2lmbmRlZiBVU0VfTU9SUEhOT1JNQUxTXFxuXFx0XFx0dHJhbnNmb3JtZWQgKz0gbW9ycGhUYXJnZXQ0ICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyA0IF07XFxuXFx0XFx0dHJhbnNmb3JtZWQgKz0gbW9ycGhUYXJnZXQ1ICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyA1IF07XFxuXFx0XFx0dHJhbnNmb3JtZWQgKz0gbW9ycGhUYXJnZXQ2ICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyA2IF07XFxuXFx0XFx0dHJhbnNmb3JtZWQgKz0gbW9ycGhUYXJnZXQ3ICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyA3IF07XFxuXFx0I2VuZGlmXFxuI2VuZGlmXCIsbm9ybWFsX2ZyYWdtZW50X2JlZ2luOlwiI2lmZGVmIEZMQVRfU0hBREVEXFxuXFx0dmVjMyBmZHggPSB2ZWMzKCBkRmR4KCB2Vmlld1Bvc2l0aW9uLnggKSwgZEZkeCggdlZpZXdQb3NpdGlvbi55ICksIGRGZHgoIHZWaWV3UG9zaXRpb24ueiApICk7XFxuXFx0dmVjMyBmZHkgPSB2ZWMzKCBkRmR5KCB2Vmlld1Bvc2l0aW9uLnggKSwgZEZkeSggdlZpZXdQb3NpdGlvbi55ICksIGRGZHkoIHZWaWV3UG9zaXRpb24ueiApICk7XFxuXFx0dmVjMyBub3JtYWwgPSBub3JtYWxpemUoIGNyb3NzKCBmZHgsIGZkeSApICk7XFxuI2Vsc2VcXG5cXHR2ZWMzIG5vcm1hbCA9IG5vcm1hbGl6ZSggdk5vcm1hbCApO1xcblxcdCNpZmRlZiBET1VCTEVfU0lERURcXG5cXHRcXHRub3JtYWwgPSBub3JtYWwgKiAoIGZsb2F0KCBnbF9Gcm9udEZhY2luZyApICogMi4wIC0gMS4wICk7XFxuXFx0I2VuZGlmXFxuXFx0I2lmZGVmIFVTRV9UQU5HRU5UXFxuXFx0XFx0dmVjMyB0YW5nZW50ID0gbm9ybWFsaXplKCB2VGFuZ2VudCApO1xcblxcdFxcdHZlYzMgYml0YW5nZW50ID0gbm9ybWFsaXplKCB2Qml0YW5nZW50ICk7XFxuXFx0XFx0I2lmZGVmIERPVUJMRV9TSURFRFxcblxcdFxcdFxcdHRhbmdlbnQgPSB0YW5nZW50ICogKCBmbG9hdCggZ2xfRnJvbnRGYWNpbmcgKSAqIDIuMCAtIDEuMCApO1xcblxcdFxcdFxcdGJpdGFuZ2VudCA9IGJpdGFuZ2VudCAqICggZmxvYXQoIGdsX0Zyb250RmFjaW5nICkgKiAyLjAgLSAxLjAgKTtcXG5cXHRcXHQjZW5kaWZcXG5cXHRcXHQjaWYgZGVmaW5lZCggVEFOR0VOVFNQQUNFX05PUk1BTE1BUCApIHx8IGRlZmluZWQoIFVTRV9DTEVBUkNPQVRfTk9STUFMTUFQIClcXG5cXHRcXHRcXHRtYXQzIHZUQk4gPSBtYXQzKCB0YW5nZW50LCBiaXRhbmdlbnQsIG5vcm1hbCApO1xcblxcdFxcdCNlbmRpZlxcblxcdCNlbmRpZlxcbiNlbmRpZlxcbnZlYzMgZ2VvbWV0cnlOb3JtYWwgPSBub3JtYWw7XCIsbm9ybWFsX2ZyYWdtZW50X21hcHM6XCIjaWZkZWYgT0JKRUNUU1BBQ0VfTk9STUFMTUFQXFxuXFx0bm9ybWFsID0gdGV4dHVyZTJEKCBub3JtYWxNYXAsIHZVdiApLnh5eiAqIDIuMCAtIDEuMDtcXG5cXHQjaWZkZWYgRkxJUF9TSURFRFxcblxcdFxcdG5vcm1hbCA9IC0gbm9ybWFsO1xcblxcdCNlbmRpZlxcblxcdCNpZmRlZiBET1VCTEVfU0lERURcXG5cXHRcXHRub3JtYWwgPSBub3JtYWwgKiAoIGZsb2F0KCBnbF9Gcm9udEZhY2luZyApICogMi4wIC0gMS4wICk7XFxuXFx0I2VuZGlmXFxuXFx0bm9ybWFsID0gbm9ybWFsaXplKCBub3JtYWxNYXRyaXggKiBub3JtYWwgKTtcXG4jZWxpZiBkZWZpbmVkKCBUQU5HRU5UU1BBQ0VfTk9STUFMTUFQIClcXG5cXHR2ZWMzIG1hcE4gPSB0ZXh0dXJlMkQoIG5vcm1hbE1hcCwgdlV2ICkueHl6ICogMi4wIC0gMS4wO1xcblxcdG1hcE4ueHkgKj0gbm9ybWFsU2NhbGU7XFxuXFx0I2lmZGVmIFVTRV9UQU5HRU5UXFxuXFx0XFx0bm9ybWFsID0gbm9ybWFsaXplKCB2VEJOICogbWFwTiApO1xcblxcdCNlbHNlXFxuXFx0XFx0bm9ybWFsID0gcGVydHVyYk5vcm1hbDJBcmIoIC12Vmlld1Bvc2l0aW9uLCBub3JtYWwsIG1hcE4gKTtcXG5cXHQjZW5kaWZcXG4jZWxpZiBkZWZpbmVkKCBVU0VfQlVNUE1BUCApXFxuXFx0bm9ybWFsID0gcGVydHVyYk5vcm1hbEFyYiggLXZWaWV3UG9zaXRpb24sIG5vcm1hbCwgZEhkeHlfZndkKCkgKTtcXG4jZW5kaWZcIixub3JtYWxtYXBfcGFyc19mcmFnbWVudDpcIiNpZmRlZiBVU0VfTk9STUFMTUFQXFxuXFx0dW5pZm9ybSBzYW1wbGVyMkQgbm9ybWFsTWFwO1xcblxcdHVuaWZvcm0gdmVjMiBub3JtYWxTY2FsZTtcXG4jZW5kaWZcXG4jaWZkZWYgT0JKRUNUU1BBQ0VfTk9STUFMTUFQXFxuXFx0dW5pZm9ybSBtYXQzIG5vcm1hbE1hdHJpeDtcXG4jZW5kaWZcXG4jaWYgISBkZWZpbmVkICggVVNFX1RBTkdFTlQgKSAmJiAoIGRlZmluZWQgKCBUQU5HRU5UU1BBQ0VfTk9STUFMTUFQICkgfHwgZGVmaW5lZCAoIFVTRV9DTEVBUkNPQVRfTk9STUFMTUFQICkgKVxcblxcdHZlYzMgcGVydHVyYk5vcm1hbDJBcmIoIHZlYzMgZXllX3BvcywgdmVjMyBzdXJmX25vcm0sIHZlYzMgbWFwTiApIHtcXG5cXHRcXHR2ZWMzIHEwID0gdmVjMyggZEZkeCggZXllX3Bvcy54ICksIGRGZHgoIGV5ZV9wb3MueSApLCBkRmR4KCBleWVfcG9zLnogKSApO1xcblxcdFxcdHZlYzMgcTEgPSB2ZWMzKCBkRmR5KCBleWVfcG9zLnggKSwgZEZkeSggZXllX3Bvcy55ICksIGRGZHkoIGV5ZV9wb3MueiApICk7XFxuXFx0XFx0dmVjMiBzdDAgPSBkRmR4KCB2VXYuc3QgKTtcXG5cXHRcXHR2ZWMyIHN0MSA9IGRGZHkoIHZVdi5zdCApO1xcblxcdFxcdGZsb2F0IHNjYWxlID0gc2lnbiggc3QxLnQgKiBzdDAucyAtIHN0MC50ICogc3QxLnMgKTtcXG5cXHRcXHR2ZWMzIFMgPSBub3JtYWxpemUoICggcTAgKiBzdDEudCAtIHExICogc3QwLnQgKSAqIHNjYWxlICk7XFxuXFx0XFx0dmVjMyBUID0gbm9ybWFsaXplKCAoIC0gcTAgKiBzdDEucyArIHExICogc3QwLnMgKSAqIHNjYWxlICk7XFxuXFx0XFx0dmVjMyBOID0gbm9ybWFsaXplKCBzdXJmX25vcm0gKTtcXG5cXHRcXHRtYXQzIHRzbiA9IG1hdDMoIFMsIFQsIE4gKTtcXG5cXHRcXHRtYXBOLnh5ICo9ICggZmxvYXQoIGdsX0Zyb250RmFjaW5nICkgKiAyLjAgLSAxLjAgKTtcXG5cXHRcXHRyZXR1cm4gbm9ybWFsaXplKCB0c24gKiBtYXBOICk7XFxuXFx0fVxcbiNlbmRpZlwiLGNsZWFyY29hdF9ub3JtYWxfZnJhZ21lbnRfYmVnaW46XCIjaWZkZWYgQ0xFQVJDT0FUXFxuXFx0dmVjMyBjbGVhcmNvYXROb3JtYWwgPSBnZW9tZXRyeU5vcm1hbDtcXG4jZW5kaWZcIixjbGVhcmNvYXRfbm9ybWFsX2ZyYWdtZW50X21hcHM6XCIjaWZkZWYgVVNFX0NMRUFSQ09BVF9OT1JNQUxNQVBcXG5cXHR2ZWMzIGNsZWFyY29hdE1hcE4gPSB0ZXh0dXJlMkQoIGNsZWFyY29hdE5vcm1hbE1hcCwgdlV2ICkueHl6ICogMi4wIC0gMS4wO1xcblxcdGNsZWFyY29hdE1hcE4ueHkgKj0gY2xlYXJjb2F0Tm9ybWFsU2NhbGU7XFxuXFx0I2lmZGVmIFVTRV9UQU5HRU5UXFxuXFx0XFx0Y2xlYXJjb2F0Tm9ybWFsID0gbm9ybWFsaXplKCB2VEJOICogY2xlYXJjb2F0TWFwTiApO1xcblxcdCNlbHNlXFxuXFx0XFx0Y2xlYXJjb2F0Tm9ybWFsID0gcGVydHVyYk5vcm1hbDJBcmIoIC0gdlZpZXdQb3NpdGlvbiwgY2xlYXJjb2F0Tm9ybWFsLCBjbGVhcmNvYXRNYXBOICk7XFxuXFx0I2VuZGlmXFxuI2VuZGlmXCIsY2xlYXJjb2F0X3BhcnNfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX0NMRUFSQ09BVE1BUFxcblxcdHVuaWZvcm0gc2FtcGxlcjJEIGNsZWFyY29hdE1hcDtcXG4jZW5kaWZcXG4jaWZkZWYgVVNFX0NMRUFSQ09BVF9ST1VHSE5FU1NNQVBcXG5cXHR1bmlmb3JtIHNhbXBsZXIyRCBjbGVhcmNvYXRSb3VnaG5lc3NNYXA7XFxuI2VuZGlmXFxuI2lmZGVmIFVTRV9DTEVBUkNPQVRfTk9STUFMTUFQXFxuXFx0dW5pZm9ybSBzYW1wbGVyMkQgY2xlYXJjb2F0Tm9ybWFsTWFwO1xcblxcdHVuaWZvcm0gdmVjMiBjbGVhcmNvYXROb3JtYWxTY2FsZTtcXG4jZW5kaWZcIixwYWNraW5nOlwidmVjMyBwYWNrTm9ybWFsVG9SR0IoIGNvbnN0IGluIHZlYzMgbm9ybWFsICkge1xcblxcdHJldHVybiBub3JtYWxpemUoIG5vcm1hbCApICogMC41ICsgMC41O1xcbn1cXG52ZWMzIHVucGFja1JHQlRvTm9ybWFsKCBjb25zdCBpbiB2ZWMzIHJnYiApIHtcXG5cXHRyZXR1cm4gMi4wICogcmdiLnh5eiAtIDEuMDtcXG59XFxuY29uc3QgZmxvYXQgUGFja1Vwc2NhbGUgPSAyNTYuIC8gMjU1Ljtjb25zdCBmbG9hdCBVbnBhY2tEb3duc2NhbGUgPSAyNTUuIC8gMjU2LjtcXG5jb25zdCB2ZWMzIFBhY2tGYWN0b3JzID0gdmVjMyggMjU2LiAqIDI1Ni4gKiAyNTYuLCAyNTYuICogMjU2LiwgMjU2LiApO1xcbmNvbnN0IHZlYzQgVW5wYWNrRmFjdG9ycyA9IFVucGFja0Rvd25zY2FsZSAvIHZlYzQoIFBhY2tGYWN0b3JzLCAxLiApO1xcbmNvbnN0IGZsb2F0IFNoaWZ0UmlnaHQ4ID0gMS4gLyAyNTYuO1xcbnZlYzQgcGFja0RlcHRoVG9SR0JBKCBjb25zdCBpbiBmbG9hdCB2ICkge1xcblxcdHZlYzQgciA9IHZlYzQoIGZyYWN0KCB2ICogUGFja0ZhY3RvcnMgKSwgdiApO1xcblxcdHIueXp3IC09IHIueHl6ICogU2hpZnRSaWdodDg7XFx0cmV0dXJuIHIgKiBQYWNrVXBzY2FsZTtcXG59XFxuZmxvYXQgdW5wYWNrUkdCQVRvRGVwdGgoIGNvbnN0IGluIHZlYzQgdiApIHtcXG5cXHRyZXR1cm4gZG90KCB2LCBVbnBhY2tGYWN0b3JzICk7XFxufVxcbnZlYzQgcGFjazJIYWxmVG9SR0JBKCB2ZWMyIHYgKSB7XFxuXFx0dmVjNCByID0gdmVjNCggdi54LCBmcmFjdCggdi54ICogMjU1LjAgKSwgdi55LCBmcmFjdCggdi55ICogMjU1LjAgKSk7XFxuXFx0cmV0dXJuIHZlYzQoIHIueCAtIHIueSAvIDI1NS4wLCByLnksIHIueiAtIHIudyAvIDI1NS4wLCByLncpO1xcbn1cXG52ZWMyIHVucGFja1JHQkFUbzJIYWxmKCB2ZWM0IHYgKSB7XFxuXFx0cmV0dXJuIHZlYzIoIHYueCArICggdi55IC8gMjU1LjAgKSwgdi56ICsgKCB2LncgLyAyNTUuMCApICk7XFxufVxcbmZsb2F0IHZpZXdaVG9PcnRob2dyYXBoaWNEZXB0aCggY29uc3QgaW4gZmxvYXQgdmlld1osIGNvbnN0IGluIGZsb2F0IG5lYXIsIGNvbnN0IGluIGZsb2F0IGZhciApIHtcXG5cXHRyZXR1cm4gKCB2aWV3WiArIG5lYXIgKSAvICggbmVhciAtIGZhciApO1xcbn1cXG5mbG9hdCBvcnRob2dyYXBoaWNEZXB0aFRvVmlld1ooIGNvbnN0IGluIGZsb2F0IGxpbmVhckNsaXBaLCBjb25zdCBpbiBmbG9hdCBuZWFyLCBjb25zdCBpbiBmbG9hdCBmYXIgKSB7XFxuXFx0cmV0dXJuIGxpbmVhckNsaXBaICogKCBuZWFyIC0gZmFyICkgLSBuZWFyO1xcbn1cXG5mbG9hdCB2aWV3WlRvUGVyc3BlY3RpdmVEZXB0aCggY29uc3QgaW4gZmxvYXQgdmlld1osIGNvbnN0IGluIGZsb2F0IG5lYXIsIGNvbnN0IGluIGZsb2F0IGZhciApIHtcXG5cXHRyZXR1cm4gKCggbmVhciArIHZpZXdaICkgKiBmYXIgKSAvICgoIGZhciAtIG5lYXIgKSAqIHZpZXdaICk7XFxufVxcbmZsb2F0IHBlcnNwZWN0aXZlRGVwdGhUb1ZpZXdaKCBjb25zdCBpbiBmbG9hdCBpbnZDbGlwWiwgY29uc3QgaW4gZmxvYXQgbmVhciwgY29uc3QgaW4gZmxvYXQgZmFyICkge1xcblxcdHJldHVybiAoIG5lYXIgKiBmYXIgKSAvICggKCBmYXIgLSBuZWFyICkgKiBpbnZDbGlwWiAtIGZhciApO1xcbn1cIixwcmVtdWx0aXBsaWVkX2FscGhhX2ZyYWdtZW50OlwiI2lmZGVmIFBSRU1VTFRJUExJRURfQUxQSEFcXG5cXHRnbF9GcmFnQ29sb3IucmdiICo9IGdsX0ZyYWdDb2xvci5hO1xcbiNlbmRpZlwiLHByb2plY3RfdmVydGV4OlwidmVjNCBtdlBvc2l0aW9uID0gdmVjNCggdHJhbnNmb3JtZWQsIDEuMCApO1xcbiNpZmRlZiBVU0VfSU5TVEFOQ0lOR1xcblxcdG12UG9zaXRpb24gPSBpbnN0YW5jZU1hdHJpeCAqIG12UG9zaXRpb247XFxuI2VuZGlmXFxubXZQb3NpdGlvbiA9IG1vZGVsVmlld01hdHJpeCAqIG12UG9zaXRpb247XFxuZ2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogbXZQb3NpdGlvbjtcIixkaXRoZXJpbmdfZnJhZ21lbnQ6XCIjaWZkZWYgRElUSEVSSU5HXFxuXFx0Z2xfRnJhZ0NvbG9yLnJnYiA9IGRpdGhlcmluZyggZ2xfRnJhZ0NvbG9yLnJnYiApO1xcbiNlbmRpZlwiLGRpdGhlcmluZ19wYXJzX2ZyYWdtZW50OlwiI2lmZGVmIERJVEhFUklOR1xcblxcdHZlYzMgZGl0aGVyaW5nKCB2ZWMzIGNvbG9yICkge1xcblxcdFxcdGZsb2F0IGdyaWRfcG9zaXRpb24gPSByYW5kKCBnbF9GcmFnQ29vcmQueHkgKTtcXG5cXHRcXHR2ZWMzIGRpdGhlcl9zaGlmdF9SR0IgPSB2ZWMzKCAwLjI1IC8gMjU1LjAsIC0wLjI1IC8gMjU1LjAsIDAuMjUgLyAyNTUuMCApO1xcblxcdFxcdGRpdGhlcl9zaGlmdF9SR0IgPSBtaXgoIDIuMCAqIGRpdGhlcl9zaGlmdF9SR0IsIC0yLjAgKiBkaXRoZXJfc2hpZnRfUkdCLCBncmlkX3Bvc2l0aW9uICk7XFxuXFx0XFx0cmV0dXJuIGNvbG9yICsgZGl0aGVyX3NoaWZ0X1JHQjtcXG5cXHR9XFxuI2VuZGlmXCIscm91Z2huZXNzbWFwX2ZyYWdtZW50OlwiZmxvYXQgcm91Z2huZXNzRmFjdG9yID0gcm91Z2huZXNzO1xcbiNpZmRlZiBVU0VfUk9VR0hORVNTTUFQXFxuXFx0dmVjNCB0ZXhlbFJvdWdobmVzcyA9IHRleHR1cmUyRCggcm91Z2huZXNzTWFwLCB2VXYgKTtcXG5cXHRyb3VnaG5lc3NGYWN0b3IgKj0gdGV4ZWxSb3VnaG5lc3MuZztcXG4jZW5kaWZcIixyb3VnaG5lc3NtYXBfcGFyc19mcmFnbWVudDpcIiNpZmRlZiBVU0VfUk9VR0hORVNTTUFQXFxuXFx0dW5pZm9ybSBzYW1wbGVyMkQgcm91Z2huZXNzTWFwO1xcbiNlbmRpZlwiLHNoYWRvd21hcF9wYXJzX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9TSEFET1dNQVBcXG5cXHQjaWYgTlVNX0RJUl9MSUdIVF9TSEFET1dTID4gMFxcblxcdFxcdHVuaWZvcm0gc2FtcGxlcjJEIGRpcmVjdGlvbmFsU2hhZG93TWFwWyBOVU1fRElSX0xJR0hUX1NIQURPV1MgXTtcXG5cXHRcXHR2YXJ5aW5nIHZlYzQgdkRpcmVjdGlvbmFsU2hhZG93Q29vcmRbIE5VTV9ESVJfTElHSFRfU0hBRE9XUyBdO1xcblxcdFxcdHN0cnVjdCBEaXJlY3Rpb25hbExpZ2h0U2hhZG93IHtcXG5cXHRcXHRcXHRmbG9hdCBzaGFkb3dCaWFzO1xcblxcdFxcdFxcdGZsb2F0IHNoYWRvd05vcm1hbEJpYXM7XFxuXFx0XFx0XFx0ZmxvYXQgc2hhZG93UmFkaXVzO1xcblxcdFxcdFxcdHZlYzIgc2hhZG93TWFwU2l6ZTtcXG5cXHRcXHR9O1xcblxcdFxcdHVuaWZvcm0gRGlyZWN0aW9uYWxMaWdodFNoYWRvdyBkaXJlY3Rpb25hbExpZ2h0U2hhZG93c1sgTlVNX0RJUl9MSUdIVF9TSEFET1dTIF07XFxuXFx0I2VuZGlmXFxuXFx0I2lmIE5VTV9TUE9UX0xJR0hUX1NIQURPV1MgPiAwXFxuXFx0XFx0dW5pZm9ybSBzYW1wbGVyMkQgc3BvdFNoYWRvd01hcFsgTlVNX1NQT1RfTElHSFRfU0hBRE9XUyBdO1xcblxcdFxcdHZhcnlpbmcgdmVjNCB2U3BvdFNoYWRvd0Nvb3JkWyBOVU1fU1BPVF9MSUdIVF9TSEFET1dTIF07XFxuXFx0XFx0c3RydWN0IFNwb3RMaWdodFNoYWRvdyB7XFxuXFx0XFx0XFx0ZmxvYXQgc2hhZG93QmlhcztcXG5cXHRcXHRcXHRmbG9hdCBzaGFkb3dOb3JtYWxCaWFzO1xcblxcdFxcdFxcdGZsb2F0IHNoYWRvd1JhZGl1cztcXG5cXHRcXHRcXHR2ZWMyIHNoYWRvd01hcFNpemU7XFxuXFx0XFx0fTtcXG5cXHRcXHR1bmlmb3JtIFNwb3RMaWdodFNoYWRvdyBzcG90TGlnaHRTaGFkb3dzWyBOVU1fU1BPVF9MSUdIVF9TSEFET1dTIF07XFxuXFx0I2VuZGlmXFxuXFx0I2lmIE5VTV9QT0lOVF9MSUdIVF9TSEFET1dTID4gMFxcblxcdFxcdHVuaWZvcm0gc2FtcGxlcjJEIHBvaW50U2hhZG93TWFwWyBOVU1fUE9JTlRfTElHSFRfU0hBRE9XUyBdO1xcblxcdFxcdHZhcnlpbmcgdmVjNCB2UG9pbnRTaGFkb3dDb29yZFsgTlVNX1BPSU5UX0xJR0hUX1NIQURPV1MgXTtcXG5cXHRcXHRzdHJ1Y3QgUG9pbnRMaWdodFNoYWRvdyB7XFxuXFx0XFx0XFx0ZmxvYXQgc2hhZG93QmlhcztcXG5cXHRcXHRcXHRmbG9hdCBzaGFkb3dOb3JtYWxCaWFzO1xcblxcdFxcdFxcdGZsb2F0IHNoYWRvd1JhZGl1cztcXG5cXHRcXHRcXHR2ZWMyIHNoYWRvd01hcFNpemU7XFxuXFx0XFx0XFx0ZmxvYXQgc2hhZG93Q2FtZXJhTmVhcjtcXG5cXHRcXHRcXHRmbG9hdCBzaGFkb3dDYW1lcmFGYXI7XFxuXFx0XFx0fTtcXG5cXHRcXHR1bmlmb3JtIFBvaW50TGlnaHRTaGFkb3cgcG9pbnRMaWdodFNoYWRvd3NbIE5VTV9QT0lOVF9MSUdIVF9TSEFET1dTIF07XFxuXFx0I2VuZGlmXFxuXFx0ZmxvYXQgdGV4dHVyZTJEQ29tcGFyZSggc2FtcGxlcjJEIGRlcHRocywgdmVjMiB1diwgZmxvYXQgY29tcGFyZSApIHtcXG5cXHRcXHRyZXR1cm4gc3RlcCggY29tcGFyZSwgdW5wYWNrUkdCQVRvRGVwdGgoIHRleHR1cmUyRCggZGVwdGhzLCB1diApICkgKTtcXG5cXHR9XFxuXFx0dmVjMiB0ZXh0dXJlMkREaXN0cmlidXRpb24oIHNhbXBsZXIyRCBzaGFkb3csIHZlYzIgdXYgKSB7XFxuXFx0XFx0cmV0dXJuIHVucGFja1JHQkFUbzJIYWxmKCB0ZXh0dXJlMkQoIHNoYWRvdywgdXYgKSApO1xcblxcdH1cXG5cXHRmbG9hdCBWU01TaGFkb3cgKHNhbXBsZXIyRCBzaGFkb3csIHZlYzIgdXYsIGZsb2F0IGNvbXBhcmUgKXtcXG5cXHRcXHRmbG9hdCBvY2NsdXNpb24gPSAxLjA7XFxuXFx0XFx0dmVjMiBkaXN0cmlidXRpb24gPSB0ZXh0dXJlMkREaXN0cmlidXRpb24oIHNoYWRvdywgdXYgKTtcXG5cXHRcXHRmbG9hdCBoYXJkX3NoYWRvdyA9IHN0ZXAoIGNvbXBhcmUgLCBkaXN0cmlidXRpb24ueCApO1xcblxcdFxcdGlmIChoYXJkX3NoYWRvdyAhPSAxLjAgKSB7XFxuXFx0XFx0XFx0ZmxvYXQgZGlzdGFuY2UgPSBjb21wYXJlIC0gZGlzdHJpYnV0aW9uLnggO1xcblxcdFxcdFxcdGZsb2F0IHZhcmlhbmNlID0gbWF4KCAwLjAwMDAwLCBkaXN0cmlidXRpb24ueSAqIGRpc3RyaWJ1dGlvbi55ICk7XFxuXFx0XFx0XFx0ZmxvYXQgc29mdG5lc3NfcHJvYmFiaWxpdHkgPSB2YXJpYW5jZSAvICh2YXJpYW5jZSArIGRpc3RhbmNlICogZGlzdGFuY2UgKTtcXHRcXHRcXHRzb2Z0bmVzc19wcm9iYWJpbGl0eSA9IGNsYW1wKCAoIHNvZnRuZXNzX3Byb2JhYmlsaXR5IC0gMC4zICkgLyAoIDAuOTUgLSAwLjMgKSwgMC4wLCAxLjAgKTtcXHRcXHRcXHRvY2NsdXNpb24gPSBjbGFtcCggbWF4KCBoYXJkX3NoYWRvdywgc29mdG5lc3NfcHJvYmFiaWxpdHkgKSwgMC4wLCAxLjAgKTtcXG5cXHRcXHR9XFxuXFx0XFx0cmV0dXJuIG9jY2x1c2lvbjtcXG5cXHR9XFxuXFx0ZmxvYXQgZ2V0U2hhZG93KCBzYW1wbGVyMkQgc2hhZG93TWFwLCB2ZWMyIHNoYWRvd01hcFNpemUsIGZsb2F0IHNoYWRvd0JpYXMsIGZsb2F0IHNoYWRvd1JhZGl1cywgdmVjNCBzaGFkb3dDb29yZCApIHtcXG5cXHRcXHRmbG9hdCBzaGFkb3cgPSAxLjA7XFxuXFx0XFx0c2hhZG93Q29vcmQueHl6IC89IHNoYWRvd0Nvb3JkLnc7XFxuXFx0XFx0c2hhZG93Q29vcmQueiArPSBzaGFkb3dCaWFzO1xcblxcdFxcdGJ2ZWM0IGluRnJ1c3R1bVZlYyA9IGJ2ZWM0ICggc2hhZG93Q29vcmQueCA+PSAwLjAsIHNoYWRvd0Nvb3JkLnggPD0gMS4wLCBzaGFkb3dDb29yZC55ID49IDAuMCwgc2hhZG93Q29vcmQueSA8PSAxLjAgKTtcXG5cXHRcXHRib29sIGluRnJ1c3R1bSA9IGFsbCggaW5GcnVzdHVtVmVjICk7XFxuXFx0XFx0YnZlYzIgZnJ1c3R1bVRlc3RWZWMgPSBidmVjMiggaW5GcnVzdHVtLCBzaGFkb3dDb29yZC56IDw9IDEuMCApO1xcblxcdFxcdGJvb2wgZnJ1c3R1bVRlc3QgPSBhbGwoIGZydXN0dW1UZXN0VmVjICk7XFxuXFx0XFx0aWYgKCBmcnVzdHVtVGVzdCApIHtcXG5cXHRcXHQjaWYgZGVmaW5lZCggU0hBRE9XTUFQX1RZUEVfUENGIClcXG5cXHRcXHRcXHR2ZWMyIHRleGVsU2l6ZSA9IHZlYzIoIDEuMCApIC8gc2hhZG93TWFwU2l6ZTtcXG5cXHRcXHRcXHRmbG9hdCBkeDAgPSAtIHRleGVsU2l6ZS54ICogc2hhZG93UmFkaXVzO1xcblxcdFxcdFxcdGZsb2F0IGR5MCA9IC0gdGV4ZWxTaXplLnkgKiBzaGFkb3dSYWRpdXM7XFxuXFx0XFx0XFx0ZmxvYXQgZHgxID0gKyB0ZXhlbFNpemUueCAqIHNoYWRvd1JhZGl1cztcXG5cXHRcXHRcXHRmbG9hdCBkeTEgPSArIHRleGVsU2l6ZS55ICogc2hhZG93UmFkaXVzO1xcblxcdFxcdFxcdGZsb2F0IGR4MiA9IGR4MCAvIDIuMDtcXG5cXHRcXHRcXHRmbG9hdCBkeTIgPSBkeTAgLyAyLjA7XFxuXFx0XFx0XFx0ZmxvYXQgZHgzID0gZHgxIC8gMi4wO1xcblxcdFxcdFxcdGZsb2F0IGR5MyA9IGR5MSAvIDIuMDtcXG5cXHRcXHRcXHRzaGFkb3cgPSAoXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIGR4MCwgZHkwICksIHNoYWRvd0Nvb3JkLnogKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIDAuMCwgZHkwICksIHNoYWRvd0Nvb3JkLnogKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIGR4MSwgZHkwICksIHNoYWRvd0Nvb3JkLnogKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIGR4MiwgZHkyICksIHNoYWRvd0Nvb3JkLnogKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIDAuMCwgZHkyICksIHNoYWRvd0Nvb3JkLnogKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIGR4MywgZHkyICksIHNoYWRvd0Nvb3JkLnogKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIGR4MCwgMC4wICksIHNoYWRvd0Nvb3JkLnogKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIGR4MiwgMC4wICksIHNoYWRvd0Nvb3JkLnogKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBzaGFkb3dDb29yZC54eSwgc2hhZG93Q29vcmQueiApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgzLCAwLjAgKSwgc2hhZG93Q29vcmQueiApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgxLCAwLjAgKSwgc2hhZG93Q29vcmQueiApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgyLCBkeTMgKSwgc2hhZG93Q29vcmQueiApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggMC4wLCBkeTMgKSwgc2hhZG93Q29vcmQueiApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgzLCBkeTMgKSwgc2hhZG93Q29vcmQueiApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgwLCBkeTEgKSwgc2hhZG93Q29vcmQueiApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggMC4wLCBkeTEgKSwgc2hhZG93Q29vcmQueiApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgxLCBkeTEgKSwgc2hhZG93Q29vcmQueiApXFxuXFx0XFx0XFx0KSAqICggMS4wIC8gMTcuMCApO1xcblxcdFxcdCNlbGlmIGRlZmluZWQoIFNIQURPV01BUF9UWVBFX1BDRl9TT0ZUIClcXG5cXHRcXHRcXHR2ZWMyIHRleGVsU2l6ZSA9IHZlYzIoIDEuMCApIC8gc2hhZG93TWFwU2l6ZTtcXG5cXHRcXHRcXHRmbG9hdCBkeCA9IHRleGVsU2l6ZS54O1xcblxcdFxcdFxcdGZsb2F0IGR5ID0gdGV4ZWxTaXplLnk7XFxuXFx0XFx0XFx0dmVjMiB1diA9IHNoYWRvd0Nvb3JkLnh5O1xcblxcdFxcdFxcdHZlYzIgZiA9IGZyYWN0KCB1diAqIHNoYWRvd01hcFNpemUgKyAwLjUgKTtcXG5cXHRcXHRcXHR1diAtPSBmICogdGV4ZWxTaXplO1xcblxcdFxcdFxcdHNoYWRvdyA9IChcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHV2LCBzaGFkb3dDb29yZC56ICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgdXYgKyB2ZWMyKCBkeCwgMC4wICksIHNoYWRvd0Nvb3JkLnogKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCB1diArIHZlYzIoIDAuMCwgZHkgKSwgc2hhZG93Q29vcmQueiApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHV2ICsgdGV4ZWxTaXplLCBzaGFkb3dDb29yZC56ICkgK1xcblxcdFxcdFxcdFxcdG1peCggdGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCB1diArIHZlYzIoIC1keCwgMC4wICksIHNoYWRvd0Nvb3JkLnogKSwgXFxuXFx0XFx0XFx0XFx0XFx0IHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgdXYgKyB2ZWMyKCAyLjAgKiBkeCwgMC4wICksIHNoYWRvd0Nvb3JkLnogKSxcXG5cXHRcXHRcXHRcXHRcXHQgZi54ICkgK1xcblxcdFxcdFxcdFxcdG1peCggdGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCB1diArIHZlYzIoIC1keCwgZHkgKSwgc2hhZG93Q29vcmQueiApLCBcXG5cXHRcXHRcXHRcXHRcXHQgdGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCB1diArIHZlYzIoIDIuMCAqIGR4LCBkeSApLCBzaGFkb3dDb29yZC56ICksXFxuXFx0XFx0XFx0XFx0XFx0IGYueCApICtcXG5cXHRcXHRcXHRcXHRtaXgoIHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgdXYgKyB2ZWMyKCAwLjAsIC1keSApLCBzaGFkb3dDb29yZC56ICksIFxcblxcdFxcdFxcdFxcdFxcdCB0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHV2ICsgdmVjMiggMC4wLCAyLjAgKiBkeSApLCBzaGFkb3dDb29yZC56ICksXFxuXFx0XFx0XFx0XFx0XFx0IGYueSApICtcXG5cXHRcXHRcXHRcXHRtaXgoIHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgdXYgKyB2ZWMyKCBkeCwgLWR5ICksIHNoYWRvd0Nvb3JkLnogKSwgXFxuXFx0XFx0XFx0XFx0XFx0IHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgdXYgKyB2ZWMyKCBkeCwgMi4wICogZHkgKSwgc2hhZG93Q29vcmQueiApLFxcblxcdFxcdFxcdFxcdFxcdCBmLnkgKSArXFxuXFx0XFx0XFx0XFx0bWl4KCBtaXgoIHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgdXYgKyB2ZWMyKCAtZHgsIC1keSApLCBzaGFkb3dDb29yZC56ICksIFxcblxcdFxcdFxcdFxcdFxcdFxcdCAgdGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCB1diArIHZlYzIoIDIuMCAqIGR4LCAtZHkgKSwgc2hhZG93Q29vcmQueiApLFxcblxcdFxcdFxcdFxcdFxcdFxcdCAgZi54ICksXFxuXFx0XFx0XFx0XFx0XFx0IG1peCggdGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCB1diArIHZlYzIoIC1keCwgMi4wICogZHkgKSwgc2hhZG93Q29vcmQueiApLCBcXG5cXHRcXHRcXHRcXHRcXHRcXHQgIHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgdXYgKyB2ZWMyKCAyLjAgKiBkeCwgMi4wICogZHkgKSwgc2hhZG93Q29vcmQueiApLFxcblxcdFxcdFxcdFxcdFxcdFxcdCAgZi54ICksXFxuXFx0XFx0XFx0XFx0XFx0IGYueSApXFxuXFx0XFx0XFx0KSAqICggMS4wIC8gOS4wICk7XFxuXFx0XFx0I2VsaWYgZGVmaW5lZCggU0hBRE9XTUFQX1RZUEVfVlNNIClcXG5cXHRcXHRcXHRzaGFkb3cgPSBWU01TaGFkb3coIHNoYWRvd01hcCwgc2hhZG93Q29vcmQueHksIHNoYWRvd0Nvb3JkLnogKTtcXG5cXHRcXHQjZWxzZVxcblxcdFxcdFxcdHNoYWRvdyA9IHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgc2hhZG93Q29vcmQueHksIHNoYWRvd0Nvb3JkLnogKTtcXG5cXHRcXHQjZW5kaWZcXG5cXHRcXHR9XFxuXFx0XFx0cmV0dXJuIHNoYWRvdztcXG5cXHR9XFxuXFx0dmVjMiBjdWJlVG9VViggdmVjMyB2LCBmbG9hdCB0ZXhlbFNpemVZICkge1xcblxcdFxcdHZlYzMgYWJzViA9IGFicyggdiApO1xcblxcdFxcdGZsb2F0IHNjYWxlVG9DdWJlID0gMS4wIC8gbWF4KCBhYnNWLngsIG1heCggYWJzVi55LCBhYnNWLnogKSApO1xcblxcdFxcdGFic1YgKj0gc2NhbGVUb0N1YmU7XFxuXFx0XFx0diAqPSBzY2FsZVRvQ3ViZSAqICggMS4wIC0gMi4wICogdGV4ZWxTaXplWSApO1xcblxcdFxcdHZlYzIgcGxhbmFyID0gdi54eTtcXG5cXHRcXHRmbG9hdCBhbG1vc3RBVGV4ZWwgPSAxLjUgKiB0ZXhlbFNpemVZO1xcblxcdFxcdGZsb2F0IGFsbW9zdE9uZSA9IDEuMCAtIGFsbW9zdEFUZXhlbDtcXG5cXHRcXHRpZiAoIGFic1YueiA+PSBhbG1vc3RPbmUgKSB7XFxuXFx0XFx0XFx0aWYgKCB2LnogPiAwLjAgKVxcblxcdFxcdFxcdFxcdHBsYW5hci54ID0gNC4wIC0gdi54O1xcblxcdFxcdH0gZWxzZSBpZiAoIGFic1YueCA+PSBhbG1vc3RPbmUgKSB7XFxuXFx0XFx0XFx0ZmxvYXQgc2lnblggPSBzaWduKCB2LnggKTtcXG5cXHRcXHRcXHRwbGFuYXIueCA9IHYueiAqIHNpZ25YICsgMi4wICogc2lnblg7XFxuXFx0XFx0fSBlbHNlIGlmICggYWJzVi55ID49IGFsbW9zdE9uZSApIHtcXG5cXHRcXHRcXHRmbG9hdCBzaWduWSA9IHNpZ24oIHYueSApO1xcblxcdFxcdFxcdHBsYW5hci54ID0gdi54ICsgMi4wICogc2lnblkgKyAyLjA7XFxuXFx0XFx0XFx0cGxhbmFyLnkgPSB2LnogKiBzaWduWSAtIDIuMDtcXG5cXHRcXHR9XFxuXFx0XFx0cmV0dXJuIHZlYzIoIDAuMTI1LCAwLjI1ICkgKiBwbGFuYXIgKyB2ZWMyKCAwLjM3NSwgMC43NSApO1xcblxcdH1cXG5cXHRmbG9hdCBnZXRQb2ludFNoYWRvdyggc2FtcGxlcjJEIHNoYWRvd01hcCwgdmVjMiBzaGFkb3dNYXBTaXplLCBmbG9hdCBzaGFkb3dCaWFzLCBmbG9hdCBzaGFkb3dSYWRpdXMsIHZlYzQgc2hhZG93Q29vcmQsIGZsb2F0IHNoYWRvd0NhbWVyYU5lYXIsIGZsb2F0IHNoYWRvd0NhbWVyYUZhciApIHtcXG5cXHRcXHR2ZWMyIHRleGVsU2l6ZSA9IHZlYzIoIDEuMCApIC8gKCBzaGFkb3dNYXBTaXplICogdmVjMiggNC4wLCAyLjAgKSApO1xcblxcdFxcdHZlYzMgbGlnaHRUb1Bvc2l0aW9uID0gc2hhZG93Q29vcmQueHl6O1xcblxcdFxcdGZsb2F0IGRwID0gKCBsZW5ndGgoIGxpZ2h0VG9Qb3NpdGlvbiApIC0gc2hhZG93Q2FtZXJhTmVhciApIC8gKCBzaGFkb3dDYW1lcmFGYXIgLSBzaGFkb3dDYW1lcmFOZWFyICk7XFx0XFx0ZHAgKz0gc2hhZG93QmlhcztcXG5cXHRcXHR2ZWMzIGJkM0QgPSBub3JtYWxpemUoIGxpZ2h0VG9Qb3NpdGlvbiApO1xcblxcdFxcdCNpZiBkZWZpbmVkKCBTSEFET1dNQVBfVFlQRV9QQ0YgKSB8fCBkZWZpbmVkKCBTSEFET1dNQVBfVFlQRV9QQ0ZfU09GVCApIHx8IGRlZmluZWQoIFNIQURPV01BUF9UWVBFX1ZTTSApXFxuXFx0XFx0XFx0dmVjMiBvZmZzZXQgPSB2ZWMyKCAtIDEsIDEgKSAqIHNoYWRvd1JhZGl1cyAqIHRleGVsU2l6ZS55O1xcblxcdFxcdFxcdHJldHVybiAoXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBjdWJlVG9VViggYmQzRCArIG9mZnNldC54eXksIHRleGVsU2l6ZS55ICksIGRwICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgY3ViZVRvVVYoIGJkM0QgKyBvZmZzZXQueXl5LCB0ZXhlbFNpemUueSApLCBkcCApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIGN1YmVUb1VWKCBiZDNEICsgb2Zmc2V0Lnh5eCwgdGV4ZWxTaXplLnkgKSwgZHAgKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBjdWJlVG9VViggYmQzRCArIG9mZnNldC55eXgsIHRleGVsU2l6ZS55ICksIGRwICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgY3ViZVRvVVYoIGJkM0QsIHRleGVsU2l6ZS55ICksIGRwICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgY3ViZVRvVVYoIGJkM0QgKyBvZmZzZXQueHh5LCB0ZXhlbFNpemUueSApLCBkcCApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIGN1YmVUb1VWKCBiZDNEICsgb2Zmc2V0Lnl4eSwgdGV4ZWxTaXplLnkgKSwgZHAgKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBjdWJlVG9VViggYmQzRCArIG9mZnNldC54eHgsIHRleGVsU2l6ZS55ICksIGRwICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgY3ViZVRvVVYoIGJkM0QgKyBvZmZzZXQueXh4LCB0ZXhlbFNpemUueSApLCBkcCApXFxuXFx0XFx0XFx0KSAqICggMS4wIC8gOS4wICk7XFxuXFx0XFx0I2Vsc2VcXG5cXHRcXHRcXHRyZXR1cm4gdGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBjdWJlVG9VViggYmQzRCwgdGV4ZWxTaXplLnkgKSwgZHAgKTtcXG5cXHRcXHQjZW5kaWZcXG5cXHR9XFxuI2VuZGlmXCIsc2hhZG93bWFwX3BhcnNfdmVydGV4OlwiI2lmZGVmIFVTRV9TSEFET1dNQVBcXG5cXHQjaWYgTlVNX0RJUl9MSUdIVF9TSEFET1dTID4gMFxcblxcdFxcdHVuaWZvcm0gbWF0NCBkaXJlY3Rpb25hbFNoYWRvd01hdHJpeFsgTlVNX0RJUl9MSUdIVF9TSEFET1dTIF07XFxuXFx0XFx0dmFyeWluZyB2ZWM0IHZEaXJlY3Rpb25hbFNoYWRvd0Nvb3JkWyBOVU1fRElSX0xJR0hUX1NIQURPV1MgXTtcXG5cXHRcXHRzdHJ1Y3QgRGlyZWN0aW9uYWxMaWdodFNoYWRvdyB7XFxuXFx0XFx0XFx0ZmxvYXQgc2hhZG93QmlhcztcXG5cXHRcXHRcXHRmbG9hdCBzaGFkb3dOb3JtYWxCaWFzO1xcblxcdFxcdFxcdGZsb2F0IHNoYWRvd1JhZGl1cztcXG5cXHRcXHRcXHR2ZWMyIHNoYWRvd01hcFNpemU7XFxuXFx0XFx0fTtcXG5cXHRcXHR1bmlmb3JtIERpcmVjdGlvbmFsTGlnaHRTaGFkb3cgZGlyZWN0aW9uYWxMaWdodFNoYWRvd3NbIE5VTV9ESVJfTElHSFRfU0hBRE9XUyBdO1xcblxcdCNlbmRpZlxcblxcdCNpZiBOVU1fU1BPVF9MSUdIVF9TSEFET1dTID4gMFxcblxcdFxcdHVuaWZvcm0gbWF0NCBzcG90U2hhZG93TWF0cml4WyBOVU1fU1BPVF9MSUdIVF9TSEFET1dTIF07XFxuXFx0XFx0dmFyeWluZyB2ZWM0IHZTcG90U2hhZG93Q29vcmRbIE5VTV9TUE9UX0xJR0hUX1NIQURPV1MgXTtcXG5cXHRcXHRzdHJ1Y3QgU3BvdExpZ2h0U2hhZG93IHtcXG5cXHRcXHRcXHRmbG9hdCBzaGFkb3dCaWFzO1xcblxcdFxcdFxcdGZsb2F0IHNoYWRvd05vcm1hbEJpYXM7XFxuXFx0XFx0XFx0ZmxvYXQgc2hhZG93UmFkaXVzO1xcblxcdFxcdFxcdHZlYzIgc2hhZG93TWFwU2l6ZTtcXG5cXHRcXHR9O1xcblxcdFxcdHVuaWZvcm0gU3BvdExpZ2h0U2hhZG93IHNwb3RMaWdodFNoYWRvd3NbIE5VTV9TUE9UX0xJR0hUX1NIQURPV1MgXTtcXG5cXHQjZW5kaWZcXG5cXHQjaWYgTlVNX1BPSU5UX0xJR0hUX1NIQURPV1MgPiAwXFxuXFx0XFx0dW5pZm9ybSBtYXQ0IHBvaW50U2hhZG93TWF0cml4WyBOVU1fUE9JTlRfTElHSFRfU0hBRE9XUyBdO1xcblxcdFxcdHZhcnlpbmcgdmVjNCB2UG9pbnRTaGFkb3dDb29yZFsgTlVNX1BPSU5UX0xJR0hUX1NIQURPV1MgXTtcXG5cXHRcXHRzdHJ1Y3QgUG9pbnRMaWdodFNoYWRvdyB7XFxuXFx0XFx0XFx0ZmxvYXQgc2hhZG93QmlhcztcXG5cXHRcXHRcXHRmbG9hdCBzaGFkb3dOb3JtYWxCaWFzO1xcblxcdFxcdFxcdGZsb2F0IHNoYWRvd1JhZGl1cztcXG5cXHRcXHRcXHR2ZWMyIHNoYWRvd01hcFNpemU7XFxuXFx0XFx0XFx0ZmxvYXQgc2hhZG93Q2FtZXJhTmVhcjtcXG5cXHRcXHRcXHRmbG9hdCBzaGFkb3dDYW1lcmFGYXI7XFxuXFx0XFx0fTtcXG5cXHRcXHR1bmlmb3JtIFBvaW50TGlnaHRTaGFkb3cgcG9pbnRMaWdodFNoYWRvd3NbIE5VTV9QT0lOVF9MSUdIVF9TSEFET1dTIF07XFxuXFx0I2VuZGlmXFxuI2VuZGlmXCIsc2hhZG93bWFwX3ZlcnRleDpcIiNpZmRlZiBVU0VfU0hBRE9XTUFQXFxuXFx0I2lmIE5VTV9ESVJfTElHSFRfU0hBRE9XUyA+IDAgfHwgTlVNX1NQT1RfTElHSFRfU0hBRE9XUyA+IDAgfHwgTlVNX1BPSU5UX0xJR0hUX1NIQURPV1MgPiAwXFxuXFx0XFx0dmVjMyBzaGFkb3dXb3JsZE5vcm1hbCA9IGludmVyc2VUcmFuc2Zvcm1EaXJlY3Rpb24oIHRyYW5zZm9ybWVkTm9ybWFsLCB2aWV3TWF0cml4ICk7XFxuXFx0XFx0dmVjNCBzaGFkb3dXb3JsZFBvc2l0aW9uO1xcblxcdCNlbmRpZlxcblxcdCNpZiBOVU1fRElSX0xJR0hUX1NIQURPV1MgPiAwXFxuXFx0I3ByYWdtYSB1bnJvbGxfbG9vcF9zdGFydFxcblxcdGZvciAoIGludCBpID0gMDsgaSA8IE5VTV9ESVJfTElHSFRfU0hBRE9XUzsgaSArKyApIHtcXG5cXHRcXHRzaGFkb3dXb3JsZFBvc2l0aW9uID0gd29ybGRQb3NpdGlvbiArIHZlYzQoIHNoYWRvd1dvcmxkTm9ybWFsICogZGlyZWN0aW9uYWxMaWdodFNoYWRvd3NbIGkgXS5zaGFkb3dOb3JtYWxCaWFzLCAwICk7XFxuXFx0XFx0dkRpcmVjdGlvbmFsU2hhZG93Q29vcmRbIGkgXSA9IGRpcmVjdGlvbmFsU2hhZG93TWF0cml4WyBpIF0gKiBzaGFkb3dXb3JsZFBvc2l0aW9uO1xcblxcdH1cXG5cXHQjcHJhZ21hIHVucm9sbF9sb29wX2VuZFxcblxcdCNlbmRpZlxcblxcdCNpZiBOVU1fU1BPVF9MSUdIVF9TSEFET1dTID4gMFxcblxcdCNwcmFnbWEgdW5yb2xsX2xvb3Bfc3RhcnRcXG5cXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBOVU1fU1BPVF9MSUdIVF9TSEFET1dTOyBpICsrICkge1xcblxcdFxcdHNoYWRvd1dvcmxkUG9zaXRpb24gPSB3b3JsZFBvc2l0aW9uICsgdmVjNCggc2hhZG93V29ybGROb3JtYWwgKiBzcG90TGlnaHRTaGFkb3dzWyBpIF0uc2hhZG93Tm9ybWFsQmlhcywgMCApO1xcblxcdFxcdHZTcG90U2hhZG93Q29vcmRbIGkgXSA9IHNwb3RTaGFkb3dNYXRyaXhbIGkgXSAqIHNoYWRvd1dvcmxkUG9zaXRpb247XFxuXFx0fVxcblxcdCNwcmFnbWEgdW5yb2xsX2xvb3BfZW5kXFxuXFx0I2VuZGlmXFxuXFx0I2lmIE5VTV9QT0lOVF9MSUdIVF9TSEFET1dTID4gMFxcblxcdCNwcmFnbWEgdW5yb2xsX2xvb3Bfc3RhcnRcXG5cXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBOVU1fUE9JTlRfTElHSFRfU0hBRE9XUzsgaSArKyApIHtcXG5cXHRcXHRzaGFkb3dXb3JsZFBvc2l0aW9uID0gd29ybGRQb3NpdGlvbiArIHZlYzQoIHNoYWRvd1dvcmxkTm9ybWFsICogcG9pbnRMaWdodFNoYWRvd3NbIGkgXS5zaGFkb3dOb3JtYWxCaWFzLCAwICk7XFxuXFx0XFx0dlBvaW50U2hhZG93Q29vcmRbIGkgXSA9IHBvaW50U2hhZG93TWF0cml4WyBpIF0gKiBzaGFkb3dXb3JsZFBvc2l0aW9uO1xcblxcdH1cXG5cXHQjcHJhZ21hIHVucm9sbF9sb29wX2VuZFxcblxcdCNlbmRpZlxcbiNlbmRpZlwiLHNoYWRvd21hc2tfcGFyc19mcmFnbWVudDpcImZsb2F0IGdldFNoYWRvd01hc2soKSB7XFxuXFx0ZmxvYXQgc2hhZG93ID0gMS4wO1xcblxcdCNpZmRlZiBVU0VfU0hBRE9XTUFQXFxuXFx0I2lmIE5VTV9ESVJfTElHSFRfU0hBRE9XUyA+IDBcXG5cXHREaXJlY3Rpb25hbExpZ2h0U2hhZG93IGRpcmVjdGlvbmFsTGlnaHQ7XFxuXFx0I3ByYWdtYSB1bnJvbGxfbG9vcF9zdGFydFxcblxcdGZvciAoIGludCBpID0gMDsgaSA8IE5VTV9ESVJfTElHSFRfU0hBRE9XUzsgaSArKyApIHtcXG5cXHRcXHRkaXJlY3Rpb25hbExpZ2h0ID0gZGlyZWN0aW9uYWxMaWdodFNoYWRvd3NbIGkgXTtcXG5cXHRcXHRzaGFkb3cgKj0gcmVjZWl2ZVNoYWRvdyA/IGdldFNoYWRvdyggZGlyZWN0aW9uYWxTaGFkb3dNYXBbIGkgXSwgZGlyZWN0aW9uYWxMaWdodC5zaGFkb3dNYXBTaXplLCBkaXJlY3Rpb25hbExpZ2h0LnNoYWRvd0JpYXMsIGRpcmVjdGlvbmFsTGlnaHQuc2hhZG93UmFkaXVzLCB2RGlyZWN0aW9uYWxTaGFkb3dDb29yZFsgaSBdICkgOiAxLjA7XFxuXFx0fVxcblxcdCNwcmFnbWEgdW5yb2xsX2xvb3BfZW5kXFxuXFx0I2VuZGlmXFxuXFx0I2lmIE5VTV9TUE9UX0xJR0hUX1NIQURPV1MgPiAwXFxuXFx0U3BvdExpZ2h0U2hhZG93IHNwb3RMaWdodDtcXG5cXHQjcHJhZ21hIHVucm9sbF9sb29wX3N0YXJ0XFxuXFx0Zm9yICggaW50IGkgPSAwOyBpIDwgTlVNX1NQT1RfTElHSFRfU0hBRE9XUzsgaSArKyApIHtcXG5cXHRcXHRzcG90TGlnaHQgPSBzcG90TGlnaHRTaGFkb3dzWyBpIF07XFxuXFx0XFx0c2hhZG93ICo9IHJlY2VpdmVTaGFkb3cgPyBnZXRTaGFkb3coIHNwb3RTaGFkb3dNYXBbIGkgXSwgc3BvdExpZ2h0LnNoYWRvd01hcFNpemUsIHNwb3RMaWdodC5zaGFkb3dCaWFzLCBzcG90TGlnaHQuc2hhZG93UmFkaXVzLCB2U3BvdFNoYWRvd0Nvb3JkWyBpIF0gKSA6IDEuMDtcXG5cXHR9XFxuXFx0I3ByYWdtYSB1bnJvbGxfbG9vcF9lbmRcXG5cXHQjZW5kaWZcXG5cXHQjaWYgTlVNX1BPSU5UX0xJR0hUX1NIQURPV1MgPiAwXFxuXFx0UG9pbnRMaWdodFNoYWRvdyBwb2ludExpZ2h0O1xcblxcdCNwcmFnbWEgdW5yb2xsX2xvb3Bfc3RhcnRcXG5cXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBOVU1fUE9JTlRfTElHSFRfU0hBRE9XUzsgaSArKyApIHtcXG5cXHRcXHRwb2ludExpZ2h0ID0gcG9pbnRMaWdodFNoYWRvd3NbIGkgXTtcXG5cXHRcXHRzaGFkb3cgKj0gcmVjZWl2ZVNoYWRvdyA/IGdldFBvaW50U2hhZG93KCBwb2ludFNoYWRvd01hcFsgaSBdLCBwb2ludExpZ2h0LnNoYWRvd01hcFNpemUsIHBvaW50TGlnaHQuc2hhZG93QmlhcywgcG9pbnRMaWdodC5zaGFkb3dSYWRpdXMsIHZQb2ludFNoYWRvd0Nvb3JkWyBpIF0sIHBvaW50TGlnaHQuc2hhZG93Q2FtZXJhTmVhciwgcG9pbnRMaWdodC5zaGFkb3dDYW1lcmFGYXIgKSA6IDEuMDtcXG5cXHR9XFxuXFx0I3ByYWdtYSB1bnJvbGxfbG9vcF9lbmRcXG5cXHQjZW5kaWZcXG5cXHQjZW5kaWZcXG5cXHRyZXR1cm4gc2hhZG93O1xcbn1cIixza2luYmFzZV92ZXJ0ZXg6XCIjaWZkZWYgVVNFX1NLSU5OSU5HXFxuXFx0bWF0NCBib25lTWF0WCA9IGdldEJvbmVNYXRyaXgoIHNraW5JbmRleC54ICk7XFxuXFx0bWF0NCBib25lTWF0WSA9IGdldEJvbmVNYXRyaXgoIHNraW5JbmRleC55ICk7XFxuXFx0bWF0NCBib25lTWF0WiA9IGdldEJvbmVNYXRyaXgoIHNraW5JbmRleC56ICk7XFxuXFx0bWF0NCBib25lTWF0VyA9IGdldEJvbmVNYXRyaXgoIHNraW5JbmRleC53ICk7XFxuI2VuZGlmXCIsc2tpbm5pbmdfcGFyc192ZXJ0ZXg6XCIjaWZkZWYgVVNFX1NLSU5OSU5HXFxuXFx0dW5pZm9ybSBtYXQ0IGJpbmRNYXRyaXg7XFxuXFx0dW5pZm9ybSBtYXQ0IGJpbmRNYXRyaXhJbnZlcnNlO1xcblxcdCNpZmRlZiBCT05FX1RFWFRVUkVcXG5cXHRcXHR1bmlmb3JtIGhpZ2hwIHNhbXBsZXIyRCBib25lVGV4dHVyZTtcXG5cXHRcXHR1bmlmb3JtIGludCBib25lVGV4dHVyZVNpemU7XFxuXFx0XFx0bWF0NCBnZXRCb25lTWF0cml4KCBjb25zdCBpbiBmbG9hdCBpICkge1xcblxcdFxcdFxcdGZsb2F0IGogPSBpICogNC4wO1xcblxcdFxcdFxcdGZsb2F0IHggPSBtb2QoIGosIGZsb2F0KCBib25lVGV4dHVyZVNpemUgKSApO1xcblxcdFxcdFxcdGZsb2F0IHkgPSBmbG9vciggaiAvIGZsb2F0KCBib25lVGV4dHVyZVNpemUgKSApO1xcblxcdFxcdFxcdGZsb2F0IGR4ID0gMS4wIC8gZmxvYXQoIGJvbmVUZXh0dXJlU2l6ZSApO1xcblxcdFxcdFxcdGZsb2F0IGR5ID0gMS4wIC8gZmxvYXQoIGJvbmVUZXh0dXJlU2l6ZSApO1xcblxcdFxcdFxcdHkgPSBkeSAqICggeSArIDAuNSApO1xcblxcdFxcdFxcdHZlYzQgdjEgPSB0ZXh0dXJlMkQoIGJvbmVUZXh0dXJlLCB2ZWMyKCBkeCAqICggeCArIDAuNSApLCB5ICkgKTtcXG5cXHRcXHRcXHR2ZWM0IHYyID0gdGV4dHVyZTJEKCBib25lVGV4dHVyZSwgdmVjMiggZHggKiAoIHggKyAxLjUgKSwgeSApICk7XFxuXFx0XFx0XFx0dmVjNCB2MyA9IHRleHR1cmUyRCggYm9uZVRleHR1cmUsIHZlYzIoIGR4ICogKCB4ICsgMi41ICksIHkgKSApO1xcblxcdFxcdFxcdHZlYzQgdjQgPSB0ZXh0dXJlMkQoIGJvbmVUZXh0dXJlLCB2ZWMyKCBkeCAqICggeCArIDMuNSApLCB5ICkgKTtcXG5cXHRcXHRcXHRtYXQ0IGJvbmUgPSBtYXQ0KCB2MSwgdjIsIHYzLCB2NCApO1xcblxcdFxcdFxcdHJldHVybiBib25lO1xcblxcdFxcdH1cXG5cXHQjZWxzZVxcblxcdFxcdHVuaWZvcm0gbWF0NCBib25lTWF0cmljZXNbIE1BWF9CT05FUyBdO1xcblxcdFxcdG1hdDQgZ2V0Qm9uZU1hdHJpeCggY29uc3QgaW4gZmxvYXQgaSApIHtcXG5cXHRcXHRcXHRtYXQ0IGJvbmUgPSBib25lTWF0cmljZXNbIGludChpKSBdO1xcblxcdFxcdFxcdHJldHVybiBib25lO1xcblxcdFxcdH1cXG5cXHQjZW5kaWZcXG4jZW5kaWZcIixza2lubmluZ192ZXJ0ZXg6XCIjaWZkZWYgVVNFX1NLSU5OSU5HXFxuXFx0dmVjNCBza2luVmVydGV4ID0gYmluZE1hdHJpeCAqIHZlYzQoIHRyYW5zZm9ybWVkLCAxLjAgKTtcXG5cXHR2ZWM0IHNraW5uZWQgPSB2ZWM0KCAwLjAgKTtcXG5cXHRza2lubmVkICs9IGJvbmVNYXRYICogc2tpblZlcnRleCAqIHNraW5XZWlnaHQueDtcXG5cXHRza2lubmVkICs9IGJvbmVNYXRZICogc2tpblZlcnRleCAqIHNraW5XZWlnaHQueTtcXG5cXHRza2lubmVkICs9IGJvbmVNYXRaICogc2tpblZlcnRleCAqIHNraW5XZWlnaHQuejtcXG5cXHRza2lubmVkICs9IGJvbmVNYXRXICogc2tpblZlcnRleCAqIHNraW5XZWlnaHQudztcXG5cXHR0cmFuc2Zvcm1lZCA9ICggYmluZE1hdHJpeEludmVyc2UgKiBza2lubmVkICkueHl6O1xcbiNlbmRpZlwiLHNraW5ub3JtYWxfdmVydGV4OlwiI2lmZGVmIFVTRV9TS0lOTklOR1xcblxcdG1hdDQgc2tpbk1hdHJpeCA9IG1hdDQoIDAuMCApO1xcblxcdHNraW5NYXRyaXggKz0gc2tpbldlaWdodC54ICogYm9uZU1hdFg7XFxuXFx0c2tpbk1hdHJpeCArPSBza2luV2VpZ2h0LnkgKiBib25lTWF0WTtcXG5cXHRza2luTWF0cml4ICs9IHNraW5XZWlnaHQueiAqIGJvbmVNYXRaO1xcblxcdHNraW5NYXRyaXggKz0gc2tpbldlaWdodC53ICogYm9uZU1hdFc7XFxuXFx0c2tpbk1hdHJpeCA9IGJpbmRNYXRyaXhJbnZlcnNlICogc2tpbk1hdHJpeCAqIGJpbmRNYXRyaXg7XFxuXFx0b2JqZWN0Tm9ybWFsID0gdmVjNCggc2tpbk1hdHJpeCAqIHZlYzQoIG9iamVjdE5vcm1hbCwgMC4wICkgKS54eXo7XFxuXFx0I2lmZGVmIFVTRV9UQU5HRU5UXFxuXFx0XFx0b2JqZWN0VGFuZ2VudCA9IHZlYzQoIHNraW5NYXRyaXggKiB2ZWM0KCBvYmplY3RUYW5nZW50LCAwLjAgKSApLnh5ejtcXG5cXHQjZW5kaWZcXG4jZW5kaWZcIixzcGVjdWxhcm1hcF9mcmFnbWVudDpcImZsb2F0IHNwZWN1bGFyU3RyZW5ndGg7XFxuI2lmZGVmIFVTRV9TUEVDVUxBUk1BUFxcblxcdHZlYzQgdGV4ZWxTcGVjdWxhciA9IHRleHR1cmUyRCggc3BlY3VsYXJNYXAsIHZVdiApO1xcblxcdHNwZWN1bGFyU3RyZW5ndGggPSB0ZXhlbFNwZWN1bGFyLnI7XFxuI2Vsc2VcXG5cXHRzcGVjdWxhclN0cmVuZ3RoID0gMS4wO1xcbiNlbmRpZlwiLHNwZWN1bGFybWFwX3BhcnNfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX1NQRUNVTEFSTUFQXFxuXFx0dW5pZm9ybSBzYW1wbGVyMkQgc3BlY3VsYXJNYXA7XFxuI2VuZGlmXCIsdG9uZW1hcHBpbmdfZnJhZ21lbnQ6XCIjaWYgZGVmaW5lZCggVE9ORV9NQVBQSU5HIClcXG5cXHRnbF9GcmFnQ29sb3IucmdiID0gdG9uZU1hcHBpbmcoIGdsX0ZyYWdDb2xvci5yZ2IgKTtcXG4jZW5kaWZcIix0b25lbWFwcGluZ19wYXJzX2ZyYWdtZW50OlwiI2lmbmRlZiBzYXR1cmF0ZVxcbiNkZWZpbmUgc2F0dXJhdGUoYSkgY2xhbXAoIGEsIDAuMCwgMS4wIClcXG4jZW5kaWZcXG51bmlmb3JtIGZsb2F0IHRvbmVNYXBwaW5nRXhwb3N1cmU7XFxudmVjMyBMaW5lYXJUb25lTWFwcGluZyggdmVjMyBjb2xvciApIHtcXG5cXHRyZXR1cm4gdG9uZU1hcHBpbmdFeHBvc3VyZSAqIGNvbG9yO1xcbn1cXG52ZWMzIFJlaW5oYXJkVG9uZU1hcHBpbmcoIHZlYzMgY29sb3IgKSB7XFxuXFx0Y29sb3IgKj0gdG9uZU1hcHBpbmdFeHBvc3VyZTtcXG5cXHRyZXR1cm4gc2F0dXJhdGUoIGNvbG9yIC8gKCB2ZWMzKCAxLjAgKSArIGNvbG9yICkgKTtcXG59XFxudmVjMyBPcHRpbWl6ZWRDaW5lb25Ub25lTWFwcGluZyggdmVjMyBjb2xvciApIHtcXG5cXHRjb2xvciAqPSB0b25lTWFwcGluZ0V4cG9zdXJlO1xcblxcdGNvbG9yID0gbWF4KCB2ZWMzKCAwLjAgKSwgY29sb3IgLSAwLjAwNCApO1xcblxcdHJldHVybiBwb3coICggY29sb3IgKiAoIDYuMiAqIGNvbG9yICsgMC41ICkgKSAvICggY29sb3IgKiAoIDYuMiAqIGNvbG9yICsgMS43ICkgKyAwLjA2ICksIHZlYzMoIDIuMiApICk7XFxufVxcbnZlYzMgUlJUQW5kT0RURml0KCB2ZWMzIHYgKSB7XFxuXFx0dmVjMyBhID0gdiAqICggdiArIDAuMDI0NTc4NiApIC0gMC4wMDAwOTA1Mzc7XFxuXFx0dmVjMyBiID0gdiAqICggMC45ODM3MjkgKiB2ICsgMC40MzI5NTEwICkgKyAwLjIzODA4MTtcXG5cXHRyZXR1cm4gYSAvIGI7XFxufVxcbnZlYzMgQUNFU0ZpbG1pY1RvbmVNYXBwaW5nKCB2ZWMzIGNvbG9yICkge1xcblxcdGNvbnN0IG1hdDMgQUNFU0lucHV0TWF0ID0gbWF0MyhcXG5cXHRcXHR2ZWMzKCAwLjU5NzE5LCAwLjA3NjAwLCAwLjAyODQwICksXFx0XFx0dmVjMyggMC4zNTQ1OCwgMC45MDgzNCwgMC4xMzM4MyApLFxcblxcdFxcdHZlYzMoIDAuMDQ4MjMsIDAuMDE1NjYsIDAuODM3NzcgKVxcblxcdCk7XFxuXFx0Y29uc3QgbWF0MyBBQ0VTT3V0cHV0TWF0ID0gbWF0MyhcXG5cXHRcXHR2ZWMzKCAgMS42MDQ3NSwgLTAuMTAyMDgsIC0wLjAwMzI3ICksXFx0XFx0dmVjMyggLTAuNTMxMDgsICAxLjEwODEzLCAtMC4wNzI3NiApLFxcblxcdFxcdHZlYzMoIC0wLjA3MzY3LCAtMC4wMDYwNSwgIDEuMDc2MDIgKVxcblxcdCk7XFxuXFx0Y29sb3IgKj0gdG9uZU1hcHBpbmdFeHBvc3VyZSAvIDAuNjtcXG5cXHRjb2xvciA9IEFDRVNJbnB1dE1hdCAqIGNvbG9yO1xcblxcdGNvbG9yID0gUlJUQW5kT0RURml0KCBjb2xvciApO1xcblxcdGNvbG9yID0gQUNFU091dHB1dE1hdCAqIGNvbG9yO1xcblxcdHJldHVybiBzYXR1cmF0ZSggY29sb3IgKTtcXG59XFxudmVjMyBDdXN0b21Ub25lTWFwcGluZyggdmVjMyBjb2xvciApIHsgcmV0dXJuIGNvbG9yOyB9XCIsdHJhbnNtaXNzaW9ubWFwX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9UUkFOU01JU1NJT05NQVBcXG5cXHR0b3RhbFRyYW5zbWlzc2lvbiAqPSB0ZXh0dXJlMkQoIHRyYW5zbWlzc2lvbk1hcCwgdlV2ICkucjtcXG4jZW5kaWZcIix0cmFuc21pc3Npb25tYXBfcGFyc19mcmFnbWVudDpcIiNpZmRlZiBVU0VfVFJBTlNNSVNTSU9OTUFQXFxuXFx0dW5pZm9ybSBzYW1wbGVyMkQgdHJhbnNtaXNzaW9uTWFwO1xcbiNlbmRpZlwiLHV2X3BhcnNfZnJhZ21lbnQ6XCIjaWYgKCBkZWZpbmVkKCBVU0VfVVYgKSAmJiAhIGRlZmluZWQoIFVWU19WRVJURVhfT05MWSApIClcXG5cXHR2YXJ5aW5nIHZlYzIgdlV2O1xcbiNlbmRpZlwiLHV2X3BhcnNfdmVydGV4OlwiI2lmZGVmIFVTRV9VVlxcblxcdCNpZmRlZiBVVlNfVkVSVEVYX09OTFlcXG5cXHRcXHR2ZWMyIHZVdjtcXG5cXHQjZWxzZVxcblxcdFxcdHZhcnlpbmcgdmVjMiB2VXY7XFxuXFx0I2VuZGlmXFxuXFx0dW5pZm9ybSBtYXQzIHV2VHJhbnNmb3JtO1xcbiNlbmRpZlwiLHV2X3ZlcnRleDpcIiNpZmRlZiBVU0VfVVZcXG5cXHR2VXYgPSAoIHV2VHJhbnNmb3JtICogdmVjMyggdXYsIDEgKSApLnh5O1xcbiNlbmRpZlwiLHV2Ml9wYXJzX2ZyYWdtZW50OlwiI2lmIGRlZmluZWQoIFVTRV9MSUdIVE1BUCApIHx8IGRlZmluZWQoIFVTRV9BT01BUCApXFxuXFx0dmFyeWluZyB2ZWMyIHZVdjI7XFxuI2VuZGlmXCIsdXYyX3BhcnNfdmVydGV4OlwiI2lmIGRlZmluZWQoIFVTRV9MSUdIVE1BUCApIHx8IGRlZmluZWQoIFVTRV9BT01BUCApXFxuXFx0YXR0cmlidXRlIHZlYzIgdXYyO1xcblxcdHZhcnlpbmcgdmVjMiB2VXYyO1xcblxcdHVuaWZvcm0gbWF0MyB1djJUcmFuc2Zvcm07XFxuI2VuZGlmXCIsdXYyX3ZlcnRleDpcIiNpZiBkZWZpbmVkKCBVU0VfTElHSFRNQVAgKSB8fCBkZWZpbmVkKCBVU0VfQU9NQVAgKVxcblxcdHZVdjIgPSAoIHV2MlRyYW5zZm9ybSAqIHZlYzMoIHV2MiwgMSApICkueHk7XFxuI2VuZGlmXCIsd29ybGRwb3NfdmVydGV4OlwiI2lmIGRlZmluZWQoIFVTRV9FTlZNQVAgKSB8fCBkZWZpbmVkKCBESVNUQU5DRSApIHx8IGRlZmluZWQgKCBVU0VfU0hBRE9XTUFQIClcXG5cXHR2ZWM0IHdvcmxkUG9zaXRpb24gPSB2ZWM0KCB0cmFuc2Zvcm1lZCwgMS4wICk7XFxuXFx0I2lmZGVmIFVTRV9JTlNUQU5DSU5HXFxuXFx0XFx0d29ybGRQb3NpdGlvbiA9IGluc3RhbmNlTWF0cml4ICogd29ybGRQb3NpdGlvbjtcXG5cXHQjZW5kaWZcXG5cXHR3b3JsZFBvc2l0aW9uID0gbW9kZWxNYXRyaXggKiB3b3JsZFBvc2l0aW9uO1xcbiNlbmRpZlwiLGJhY2tncm91bmRfZnJhZzpcInVuaWZvcm0gc2FtcGxlcjJEIHQyRDtcXG52YXJ5aW5nIHZlYzIgdlV2O1xcbnZvaWQgbWFpbigpIHtcXG5cXHR2ZWM0IHRleENvbG9yID0gdGV4dHVyZTJEKCB0MkQsIHZVdiApO1xcblxcdGdsX0ZyYWdDb2xvciA9IG1hcFRleGVsVG9MaW5lYXIoIHRleENvbG9yICk7XFxuXFx0I2luY2x1ZGUgPHRvbmVtYXBwaW5nX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxlbmNvZGluZ3NfZnJhZ21lbnQ+XFxufVwiLGJhY2tncm91bmRfdmVydDpcInZhcnlpbmcgdmVjMiB2VXY7XFxudW5pZm9ybSBtYXQzIHV2VHJhbnNmb3JtO1xcbnZvaWQgbWFpbigpIHtcXG5cXHR2VXYgPSAoIHV2VHJhbnNmb3JtICogdmVjMyggdXYsIDEgKSApLnh5O1xcblxcdGdsX1Bvc2l0aW9uID0gdmVjNCggcG9zaXRpb24ueHksIDEuMCwgMS4wICk7XFxufVwiLGN1YmVfZnJhZzpcIiNpbmNsdWRlIDxlbnZtYXBfY29tbW9uX3BhcnNfZnJhZ21lbnQ+XFxudW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xcbnZhcnlpbmcgdmVjMyB2V29ybGREaXJlY3Rpb247XFxuI2luY2x1ZGUgPGN1YmVfdXZfcmVmbGVjdGlvbl9mcmFnbWVudD5cXG52b2lkIG1haW4oKSB7XFxuXFx0dmVjMyB2UmVmbGVjdCA9IHZXb3JsZERpcmVjdGlvbjtcXG5cXHQjaW5jbHVkZSA8ZW52bWFwX2ZyYWdtZW50PlxcblxcdGdsX0ZyYWdDb2xvciA9IGVudkNvbG9yO1xcblxcdGdsX0ZyYWdDb2xvci5hICo9IG9wYWNpdHk7XFxuXFx0I2luY2x1ZGUgPHRvbmVtYXBwaW5nX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxlbmNvZGluZ3NfZnJhZ21lbnQ+XFxufVwiLGN1YmVfdmVydDpcInZhcnlpbmcgdmVjMyB2V29ybGREaXJlY3Rpb247XFxuI2luY2x1ZGUgPGNvbW1vbj5cXG52b2lkIG1haW4oKSB7XFxuXFx0dldvcmxkRGlyZWN0aW9uID0gdHJhbnNmb3JtRGlyZWN0aW9uKCBwb3NpdGlvbiwgbW9kZWxNYXRyaXggKTtcXG5cXHQjaW5jbHVkZSA8YmVnaW5fdmVydGV4PlxcblxcdCNpbmNsdWRlIDxwcm9qZWN0X3ZlcnRleD5cXG5cXHRnbF9Qb3NpdGlvbi56ID0gZ2xfUG9zaXRpb24udztcXG59XCIsZGVwdGhfZnJhZzpcIiNpZiBERVBUSF9QQUNLSU5HID09IDMyMDBcXG5cXHR1bmlmb3JtIGZsb2F0IG9wYWNpdHk7XFxuI2VuZGlmXFxuI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8cGFja2luZz5cXG4jaW5jbHVkZSA8dXZfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGFscGhhbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX2ZyYWdtZW50PlxcbnZhcnlpbmcgdmVjMiB2SGlnaFByZWNpc2lvblpXO1xcbnZvaWQgbWFpbigpIHtcXG5cXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX2ZyYWdtZW50PlxcblxcdHZlYzQgZGlmZnVzZUNvbG9yID0gdmVjNCggMS4wICk7XFxuXFx0I2lmIERFUFRIX1BBQ0tJTkcgPT0gMzIwMFxcblxcdFxcdGRpZmZ1c2VDb2xvci5hID0gb3BhY2l0eTtcXG5cXHQjZW5kaWZcXG5cXHQjaW5jbHVkZSA8bWFwX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxhbHBoYW1hcF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8YWxwaGF0ZXN0X2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9mcmFnbWVudD5cXG5cXHRmbG9hdCBmcmFnQ29vcmRaID0gMC41ICogdkhpZ2hQcmVjaXNpb25aV1swXSAvIHZIaWdoUHJlY2lzaW9uWldbMV0gKyAwLjU7XFxuXFx0I2lmIERFUFRIX1BBQ0tJTkcgPT0gMzIwMFxcblxcdFxcdGdsX0ZyYWdDb2xvciA9IHZlYzQoIHZlYzMoIDEuMCAtIGZyYWdDb29yZFogKSwgb3BhY2l0eSApO1xcblxcdCNlbGlmIERFUFRIX1BBQ0tJTkcgPT0gMzIwMVxcblxcdFxcdGdsX0ZyYWdDb2xvciA9IHBhY2tEZXB0aFRvUkdCQSggZnJhZ0Nvb3JkWiApO1xcblxcdCNlbmRpZlxcbn1cIixkZXB0aF92ZXJ0OlwiI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8dXZfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGRpc3BsYWNlbWVudG1hcF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8bW9ycGh0YXJnZXRfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPHNraW5uaW5nX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfdmVydGV4PlxcbnZhcnlpbmcgdmVjMiB2SGlnaFByZWNpc2lvblpXO1xcbnZvaWQgbWFpbigpIHtcXG5cXHQjaW5jbHVkZSA8dXZfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2luYmFzZV92ZXJ0ZXg+XFxuXFx0I2lmZGVmIFVTRV9ESVNQTEFDRU1FTlRNQVBcXG5cXHRcXHQjaW5jbHVkZSA8YmVnaW5ub3JtYWxfdmVydGV4PlxcblxcdFxcdCNpbmNsdWRlIDxtb3JwaG5vcm1hbF92ZXJ0ZXg+XFxuXFx0XFx0I2luY2x1ZGUgPHNraW5ub3JtYWxfdmVydGV4PlxcblxcdCNlbmRpZlxcblxcdCNpbmNsdWRlIDxiZWdpbl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPG1vcnBodGFyZ2V0X3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8c2tpbm5pbmdfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxkaXNwbGFjZW1lbnRtYXBfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxwcm9qZWN0X3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bG9nZGVwdGhidWZfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfdmVydGV4PlxcblxcdHZIaWdoUHJlY2lzaW9uWlcgPSBnbF9Qb3NpdGlvbi56dztcXG59XCIsZGlzdGFuY2VSR0JBX2ZyYWc6XCIjZGVmaW5lIERJU1RBTkNFXFxudW5pZm9ybSB2ZWMzIHJlZmVyZW5jZVBvc2l0aW9uO1xcbnVuaWZvcm0gZmxvYXQgbmVhckRpc3RhbmNlO1xcbnVuaWZvcm0gZmxvYXQgZmFyRGlzdGFuY2U7XFxudmFyeWluZyB2ZWMzIHZXb3JsZFBvc2l0aW9uO1xcbiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPHBhY2tpbmc+XFxuI2luY2x1ZGUgPHV2X3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPG1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxhbHBoYW1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc19mcmFnbWVudD5cXG52b2lkIG1haW4gKCkge1xcblxcdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfZnJhZ21lbnQ+XFxuXFx0dmVjNCBkaWZmdXNlQ29sb3IgPSB2ZWM0KCAxLjAgKTtcXG5cXHQjaW5jbHVkZSA8bWFwX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxhbHBoYW1hcF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8YWxwaGF0ZXN0X2ZyYWdtZW50PlxcblxcdGZsb2F0IGRpc3QgPSBsZW5ndGgoIHZXb3JsZFBvc2l0aW9uIC0gcmVmZXJlbmNlUG9zaXRpb24gKTtcXG5cXHRkaXN0ID0gKCBkaXN0IC0gbmVhckRpc3RhbmNlICkgLyAoIGZhckRpc3RhbmNlIC0gbmVhckRpc3RhbmNlICk7XFxuXFx0ZGlzdCA9IHNhdHVyYXRlKCBkaXN0ICk7XFxuXFx0Z2xfRnJhZ0NvbG9yID0gcGFja0RlcHRoVG9SR0JBKCBkaXN0ICk7XFxufVwiLGRpc3RhbmNlUkdCQV92ZXJ0OlwiI2RlZmluZSBESVNUQU5DRVxcbnZhcnlpbmcgdmVjMyB2V29ybGRQb3NpdGlvbjtcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDx1dl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8ZGlzcGxhY2VtZW50bWFwX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxtb3JwaHRhcmdldF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8c2tpbm5pbmdfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX3ZlcnRleD5cXG52b2lkIG1haW4oKSB7XFxuXFx0I2luY2x1ZGUgPHV2X3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8c2tpbmJhc2VfdmVydGV4PlxcblxcdCNpZmRlZiBVU0VfRElTUExBQ0VNRU5UTUFQXFxuXFx0XFx0I2luY2x1ZGUgPGJlZ2lubm9ybWFsX3ZlcnRleD5cXG5cXHRcXHQjaW5jbHVkZSA8bW9ycGhub3JtYWxfdmVydGV4PlxcblxcdFxcdCNpbmNsdWRlIDxza2lubm9ybWFsX3ZlcnRleD5cXG5cXHQjZW5kaWZcXG5cXHQjaW5jbHVkZSA8YmVnaW5fdmVydGV4PlxcblxcdCNpbmNsdWRlIDxtb3JwaHRhcmdldF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5uaW5nX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8ZGlzcGxhY2VtZW50bWFwX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8cHJvamVjdF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHdvcmxkcG9zX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3ZlcnRleD5cXG5cXHR2V29ybGRQb3NpdGlvbiA9IHdvcmxkUG9zaXRpb24ueHl6O1xcbn1cIixlcXVpcmVjdF9mcmFnOlwidW5pZm9ybSBzYW1wbGVyMkQgdEVxdWlyZWN0O1xcbnZhcnlpbmcgdmVjMyB2V29ybGREaXJlY3Rpb247XFxuI2luY2x1ZGUgPGNvbW1vbj5cXG52b2lkIG1haW4oKSB7XFxuXFx0dmVjMyBkaXJlY3Rpb24gPSBub3JtYWxpemUoIHZXb3JsZERpcmVjdGlvbiApO1xcblxcdHZlYzIgc2FtcGxlVVYgPSBlcXVpcmVjdFV2KCBkaXJlY3Rpb24gKTtcXG5cXHR2ZWM0IHRleENvbG9yID0gdGV4dHVyZTJEKCB0RXF1aXJlY3QsIHNhbXBsZVVWICk7XFxuXFx0Z2xfRnJhZ0NvbG9yID0gbWFwVGV4ZWxUb0xpbmVhciggdGV4Q29sb3IgKTtcXG5cXHQjaW5jbHVkZSA8dG9uZW1hcHBpbmdfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGVuY29kaW5nc19mcmFnbWVudD5cXG59XCIsZXF1aXJlY3RfdmVydDpcInZhcnlpbmcgdmVjMyB2V29ybGREaXJlY3Rpb247XFxuI2luY2x1ZGUgPGNvbW1vbj5cXG52b2lkIG1haW4oKSB7XFxuXFx0dldvcmxkRGlyZWN0aW9uID0gdHJhbnNmb3JtRGlyZWN0aW9uKCBwb3NpdGlvbiwgbW9kZWxNYXRyaXggKTtcXG5cXHQjaW5jbHVkZSA8YmVnaW5fdmVydGV4PlxcblxcdCNpbmNsdWRlIDxwcm9qZWN0X3ZlcnRleD5cXG59XCIsbGluZWRhc2hlZF9mcmFnOlwidW5pZm9ybSB2ZWMzIGRpZmZ1c2U7XFxudW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xcbnVuaWZvcm0gZmxvYXQgZGFzaFNpemU7XFxudW5pZm9ybSBmbG9hdCB0b3RhbFNpemU7XFxudmFyeWluZyBmbG9hdCB2TGluZURpc3RhbmNlO1xcbiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPGNvbG9yX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGZvZ19wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc19mcmFnbWVudD5cXG52b2lkIG1haW4oKSB7XFxuXFx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19mcmFnbWVudD5cXG5cXHRpZiAoIG1vZCggdkxpbmVEaXN0YW5jZSwgdG90YWxTaXplICkgPiBkYXNoU2l6ZSApIHtcXG5cXHRcXHRkaXNjYXJkO1xcblxcdH1cXG5cXHR2ZWMzIG91dGdvaW5nTGlnaHQgPSB2ZWMzKCAwLjAgKTtcXG5cXHR2ZWM0IGRpZmZ1c2VDb2xvciA9IHZlYzQoIGRpZmZ1c2UsIG9wYWNpdHkgKTtcXG5cXHQjaW5jbHVkZSA8bG9nZGVwdGhidWZfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGNvbG9yX2ZyYWdtZW50PlxcblxcdG91dGdvaW5nTGlnaHQgPSBkaWZmdXNlQ29sb3IucmdiO1xcblxcdGdsX0ZyYWdDb2xvciA9IHZlYzQoIG91dGdvaW5nTGlnaHQsIGRpZmZ1c2VDb2xvci5hICk7XFxuXFx0I2luY2x1ZGUgPHRvbmVtYXBwaW5nX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxlbmNvZGluZ3NfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGZvZ19mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8cHJlbXVsdGlwbGllZF9hbHBoYV9mcmFnbWVudD5cXG59XCIsbGluZWRhc2hlZF92ZXJ0OlwidW5pZm9ybSBmbG9hdCBzY2FsZTtcXG5hdHRyaWJ1dGUgZmxvYXQgbGluZURpc3RhbmNlO1xcbnZhcnlpbmcgZmxvYXQgdkxpbmVEaXN0YW5jZTtcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDxjb2xvcl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8Zm9nX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxtb3JwaHRhcmdldF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX3ZlcnRleD5cXG52b2lkIG1haW4oKSB7XFxuXFx0dkxpbmVEaXN0YW5jZSA9IHNjYWxlICogbGluZURpc3RhbmNlO1xcblxcdCNpbmNsdWRlIDxjb2xvcl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGJlZ2luX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bW9ycGh0YXJnZXRfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxwcm9qZWN0X3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bG9nZGVwdGhidWZfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxmb2dfdmVydGV4Plxcbn1cIixtZXNoYmFzaWNfZnJhZzpcInVuaWZvcm0gdmVjMyBkaWZmdXNlO1xcbnVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcXG4jaWZuZGVmIEZMQVRfU0hBREVEXFxuXFx0dmFyeWluZyB2ZWMzIHZOb3JtYWw7XFxuI2VuZGlmXFxuI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8ZGl0aGVyaW5nX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGNvbG9yX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPHV2X3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPHV2Ml9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8YWxwaGFtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8YW9tYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bGlnaHRtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8ZW52bWFwX2NvbW1vbl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxlbnZtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Y3ViZV91dl9yZWZsZWN0aW9uX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxmb2dfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8c3BlY3VsYXJtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfZnJhZ21lbnQ+XFxudm9pZCBtYWluKCkge1xcblxcdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfZnJhZ21lbnQ+XFxuXFx0dmVjNCBkaWZmdXNlQ29sb3IgPSB2ZWM0KCBkaWZmdXNlLCBvcGFjaXR5ICk7XFxuXFx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGNvbG9yX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxhbHBoYW1hcF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8YWxwaGF0ZXN0X2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxzcGVjdWxhcm1hcF9mcmFnbWVudD5cXG5cXHRSZWZsZWN0ZWRMaWdodCByZWZsZWN0ZWRMaWdodCA9IFJlZmxlY3RlZExpZ2h0KCB2ZWMzKCAwLjAgKSwgdmVjMyggMC4wICksIHZlYzMoIDAuMCApLCB2ZWMzKCAwLjAgKSApO1xcblxcdCNpZmRlZiBVU0VfTElHSFRNQVBcXG5cXHRcXG5cXHRcXHR2ZWM0IGxpZ2h0TWFwVGV4ZWw9IHRleHR1cmUyRCggbGlnaHRNYXAsIHZVdjIgKTtcXG5cXHRcXHRyZWZsZWN0ZWRMaWdodC5pbmRpcmVjdERpZmZ1c2UgKz0gbGlnaHRNYXBUZXhlbFRvTGluZWFyKCBsaWdodE1hcFRleGVsICkucmdiICogbGlnaHRNYXBJbnRlbnNpdHk7XFxuXFx0I2Vsc2VcXG5cXHRcXHRyZWZsZWN0ZWRMaWdodC5pbmRpcmVjdERpZmZ1c2UgKz0gdmVjMyggMS4wICk7XFxuXFx0I2VuZGlmXFxuXFx0I2luY2x1ZGUgPGFvbWFwX2ZyYWdtZW50PlxcblxcdHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0RGlmZnVzZSAqPSBkaWZmdXNlQ29sb3IucmdiO1xcblxcdHZlYzMgb3V0Z29pbmdMaWdodCA9IHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0RGlmZnVzZTtcXG5cXHQjaW5jbHVkZSA8ZW52bWFwX2ZyYWdtZW50PlxcblxcdGdsX0ZyYWdDb2xvciA9IHZlYzQoIG91dGdvaW5nTGlnaHQsIGRpZmZ1c2VDb2xvci5hICk7XFxuXFx0I2luY2x1ZGUgPHRvbmVtYXBwaW5nX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxlbmNvZGluZ3NfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGZvZ19mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8cHJlbXVsdGlwbGllZF9hbHBoYV9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8ZGl0aGVyaW5nX2ZyYWdtZW50Plxcbn1cIixtZXNoYmFzaWNfdmVydDpcIiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPHV2X3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDx1djJfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGVudm1hcF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8Y29sb3JfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGZvZ19wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8bW9ycGh0YXJnZXRfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPHNraW5uaW5nX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfdmVydGV4PlxcbnZvaWQgbWFpbigpIHtcXG5cXHQjaW5jbHVkZSA8dXZfdmVydGV4PlxcblxcdCNpbmNsdWRlIDx1djJfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxjb2xvcl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5iYXNlX3ZlcnRleD5cXG5cXHQjaWZkZWYgVVNFX0VOVk1BUFxcblxcdCNpbmNsdWRlIDxiZWdpbm5vcm1hbF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPG1vcnBobm9ybWFsX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8c2tpbm5vcm1hbF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGRlZmF1bHRub3JtYWxfdmVydGV4PlxcblxcdCNlbmRpZlxcblxcdCNpbmNsdWRlIDxiZWdpbl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPG1vcnBodGFyZ2V0X3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8c2tpbm5pbmdfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxwcm9qZWN0X3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bG9nZGVwdGhidWZfdmVydGV4PlxcblxcdCNpbmNsdWRlIDx3b3JsZHBvc192ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc192ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGVudm1hcF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGZvZ192ZXJ0ZXg+XFxufVwiLG1lc2hsYW1iZXJ0X2ZyYWc6XCJ1bmlmb3JtIHZlYzMgZGlmZnVzZTtcXG51bmlmb3JtIHZlYzMgZW1pc3NpdmU7XFxudW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xcbnZhcnlpbmcgdmVjMyB2TGlnaHRGcm9udDtcXG52YXJ5aW5nIHZlYzMgdkluZGlyZWN0RnJvbnQ7XFxuI2lmZGVmIERPVUJMRV9TSURFRFxcblxcdHZhcnlpbmcgdmVjMyB2TGlnaHRCYWNrO1xcblxcdHZhcnlpbmcgdmVjMyB2SW5kaXJlY3RCYWNrO1xcbiNlbmRpZlxcbiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPHBhY2tpbmc+XFxuI2luY2x1ZGUgPGRpdGhlcmluZ19wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxjb2xvcl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDx1dl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDx1djJfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGFscGhhbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGFvbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGxpZ2h0bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGVtaXNzaXZlbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGVudm1hcF9jb21tb25fcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8ZW52bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGN1YmVfdXZfcmVmbGVjdGlvbl9mcmFnbWVudD5cXG4jaW5jbHVkZSA8YnNkZnM+XFxuI2luY2x1ZGUgPGxpZ2h0c19wYXJzX2JlZ2luPlxcbiNpbmNsdWRlIDxmb2dfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8c2hhZG93bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPHNoYWRvd21hc2tfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8c3BlY3VsYXJtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfZnJhZ21lbnQ+XFxudm9pZCBtYWluKCkge1xcblxcdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfZnJhZ21lbnQ+XFxuXFx0dmVjNCBkaWZmdXNlQ29sb3IgPSB2ZWM0KCBkaWZmdXNlLCBvcGFjaXR5ICk7XFxuXFx0UmVmbGVjdGVkTGlnaHQgcmVmbGVjdGVkTGlnaHQgPSBSZWZsZWN0ZWRMaWdodCggdmVjMyggMC4wICksIHZlYzMoIDAuMCApLCB2ZWMzKCAwLjAgKSwgdmVjMyggMC4wICkgKTtcXG5cXHR2ZWMzIHRvdGFsRW1pc3NpdmVSYWRpYW5jZSA9IGVtaXNzaXZlO1xcblxcdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8bWFwX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxjb2xvcl9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8YWxwaGFtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGFscGhhdGVzdF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8c3BlY3VsYXJtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGVtaXNzaXZlbWFwX2ZyYWdtZW50PlxcblxcdCNpZmRlZiBET1VCTEVfU0lERURcXG5cXHRcXHRyZWZsZWN0ZWRMaWdodC5pbmRpcmVjdERpZmZ1c2UgKz0gKCBnbF9Gcm9udEZhY2luZyApID8gdkluZGlyZWN0RnJvbnQgOiB2SW5kaXJlY3RCYWNrO1xcblxcdCNlbHNlXFxuXFx0XFx0cmVmbGVjdGVkTGlnaHQuaW5kaXJlY3REaWZmdXNlICs9IHZJbmRpcmVjdEZyb250O1xcblxcdCNlbmRpZlxcblxcdCNpbmNsdWRlIDxsaWdodG1hcF9mcmFnbWVudD5cXG5cXHRyZWZsZWN0ZWRMaWdodC5pbmRpcmVjdERpZmZ1c2UgKj0gQlJERl9EaWZmdXNlX0xhbWJlcnQoIGRpZmZ1c2VDb2xvci5yZ2IgKTtcXG5cXHQjaWZkZWYgRE9VQkxFX1NJREVEXFxuXFx0XFx0cmVmbGVjdGVkTGlnaHQuZGlyZWN0RGlmZnVzZSA9ICggZ2xfRnJvbnRGYWNpbmcgKSA/IHZMaWdodEZyb250IDogdkxpZ2h0QmFjaztcXG5cXHQjZWxzZVxcblxcdFxcdHJlZmxlY3RlZExpZ2h0LmRpcmVjdERpZmZ1c2UgPSB2TGlnaHRGcm9udDtcXG5cXHQjZW5kaWZcXG5cXHRyZWZsZWN0ZWRMaWdodC5kaXJlY3REaWZmdXNlICo9IEJSREZfRGlmZnVzZV9MYW1iZXJ0KCBkaWZmdXNlQ29sb3IucmdiICkgKiBnZXRTaGFkb3dNYXNrKCk7XFxuXFx0I2luY2x1ZGUgPGFvbWFwX2ZyYWdtZW50PlxcblxcdHZlYzMgb3V0Z29pbmdMaWdodCA9IHJlZmxlY3RlZExpZ2h0LmRpcmVjdERpZmZ1c2UgKyByZWZsZWN0ZWRMaWdodC5pbmRpcmVjdERpZmZ1c2UgKyB0b3RhbEVtaXNzaXZlUmFkaWFuY2U7XFxuXFx0I2luY2x1ZGUgPGVudm1hcF9mcmFnbWVudD5cXG5cXHRnbF9GcmFnQ29sb3IgPSB2ZWM0KCBvdXRnb2luZ0xpZ2h0LCBkaWZmdXNlQ29sb3IuYSApO1xcblxcdCNpbmNsdWRlIDx0b25lbWFwcGluZ19mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8ZW5jb2RpbmdzX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxmb2dfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPHByZW11bHRpcGxpZWRfYWxwaGFfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGRpdGhlcmluZ19mcmFnbWVudD5cXG59XCIsbWVzaGxhbWJlcnRfdmVydDpcIiNkZWZpbmUgTEFNQkVSVFxcbnZhcnlpbmcgdmVjMyB2TGlnaHRGcm9udDtcXG52YXJ5aW5nIHZlYzMgdkluZGlyZWN0RnJvbnQ7XFxuI2lmZGVmIERPVUJMRV9TSURFRFxcblxcdHZhcnlpbmcgdmVjMyB2TGlnaHRCYWNrO1xcblxcdHZhcnlpbmcgdmVjMyB2SW5kaXJlY3RCYWNrO1xcbiNlbmRpZlxcbiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPHV2X3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDx1djJfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGVudm1hcF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8YnNkZnM+XFxuI2luY2x1ZGUgPGxpZ2h0c19wYXJzX2JlZ2luPlxcbiNpbmNsdWRlIDxjb2xvcl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8Zm9nX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxtb3JwaHRhcmdldF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8c2tpbm5pbmdfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPHNoYWRvd21hcF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX3ZlcnRleD5cXG52b2lkIG1haW4oKSB7XFxuXFx0I2luY2x1ZGUgPHV2X3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8dXYyX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8Y29sb3JfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxiZWdpbm5vcm1hbF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPG1vcnBobm9ybWFsX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8c2tpbmJhc2VfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2lubm9ybWFsX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8ZGVmYXVsdG5vcm1hbF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGJlZ2luX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bW9ycGh0YXJnZXRfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2lubmluZ192ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHByb2plY3RfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc192ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHdvcmxkcG9zX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8ZW52bWFwX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bGlnaHRzX2xhbWJlcnRfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxzaGFkb3dtYXBfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxmb2dfdmVydGV4Plxcbn1cIixtZXNobWF0Y2FwX2ZyYWc6XCIjZGVmaW5lIE1BVENBUFxcbnVuaWZvcm0gdmVjMyBkaWZmdXNlO1xcbnVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcXG51bmlmb3JtIHNhbXBsZXIyRCBtYXRjYXA7XFxudmFyeWluZyB2ZWMzIHZWaWV3UG9zaXRpb247XFxuI2lmbmRlZiBGTEFUX1NIQURFRFxcblxcdHZhcnlpbmcgdmVjMyB2Tm9ybWFsO1xcbiNlbmRpZlxcbiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPGRpdGhlcmluZ19wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxjb2xvcl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDx1dl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8YWxwaGFtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Zm9nX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGJ1bXBtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bm9ybWFsbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX2ZyYWdtZW50PlxcbnZvaWQgbWFpbigpIHtcXG5cXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX2ZyYWdtZW50PlxcblxcdHZlYzQgZGlmZnVzZUNvbG9yID0gdmVjNCggZGlmZnVzZSwgb3BhY2l0eSApO1xcblxcdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8bWFwX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxjb2xvcl9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8YWxwaGFtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGFscGhhdGVzdF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8bm9ybWFsX2ZyYWdtZW50X2JlZ2luPlxcblxcdCNpbmNsdWRlIDxub3JtYWxfZnJhZ21lbnRfbWFwcz5cXG5cXHR2ZWMzIHZpZXdEaXIgPSBub3JtYWxpemUoIHZWaWV3UG9zaXRpb24gKTtcXG5cXHR2ZWMzIHggPSBub3JtYWxpemUoIHZlYzMoIHZpZXdEaXIueiwgMC4wLCAtIHZpZXdEaXIueCApICk7XFxuXFx0dmVjMyB5ID0gY3Jvc3MoIHZpZXdEaXIsIHggKTtcXG5cXHR2ZWMyIHV2ID0gdmVjMiggZG90KCB4LCBub3JtYWwgKSwgZG90KCB5LCBub3JtYWwgKSApICogMC40OTUgKyAwLjU7XFxuXFx0I2lmZGVmIFVTRV9NQVRDQVBcXG5cXHRcXHR2ZWM0IG1hdGNhcENvbG9yID0gdGV4dHVyZTJEKCBtYXRjYXAsIHV2ICk7XFxuXFx0XFx0bWF0Y2FwQ29sb3IgPSBtYXRjYXBUZXhlbFRvTGluZWFyKCBtYXRjYXBDb2xvciApO1xcblxcdCNlbHNlXFxuXFx0XFx0dmVjNCBtYXRjYXBDb2xvciA9IHZlYzQoIDEuMCApO1xcblxcdCNlbmRpZlxcblxcdHZlYzMgb3V0Z29pbmdMaWdodCA9IGRpZmZ1c2VDb2xvci5yZ2IgKiBtYXRjYXBDb2xvci5yZ2I7XFxuXFx0Z2xfRnJhZ0NvbG9yID0gdmVjNCggb3V0Z29pbmdMaWdodCwgZGlmZnVzZUNvbG9yLmEgKTtcXG5cXHQjaW5jbHVkZSA8dG9uZW1hcHBpbmdfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGVuY29kaW5nc19mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8Zm9nX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxwcmVtdWx0aXBsaWVkX2FscGhhX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxkaXRoZXJpbmdfZnJhZ21lbnQ+XFxufVwiLG1lc2htYXRjYXBfdmVydDpcIiNkZWZpbmUgTUFUQ0FQXFxudmFyeWluZyB2ZWMzIHZWaWV3UG9zaXRpb247XFxuI2lmbmRlZiBGTEFUX1NIQURFRFxcblxcdHZhcnlpbmcgdmVjMyB2Tm9ybWFsO1xcbiNlbmRpZlxcbiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPHV2X3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxjb2xvcl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8ZGlzcGxhY2VtZW50bWFwX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxmb2dfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPG1vcnBodGFyZ2V0X3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxza2lubmluZ19wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX3ZlcnRleD5cXG52b2lkIG1haW4oKSB7XFxuXFx0I2luY2x1ZGUgPHV2X3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8Y29sb3JfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxiZWdpbm5vcm1hbF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPG1vcnBobm9ybWFsX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8c2tpbmJhc2VfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2lubm9ybWFsX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8ZGVmYXVsdG5vcm1hbF92ZXJ0ZXg+XFxuXFx0I2lmbmRlZiBGTEFUX1NIQURFRFxcblxcdFxcdHZOb3JtYWwgPSBub3JtYWxpemUoIHRyYW5zZm9ybWVkTm9ybWFsICk7XFxuXFx0I2VuZGlmXFxuXFx0I2luY2x1ZGUgPGJlZ2luX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bW9ycGh0YXJnZXRfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2lubmluZ192ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGRpc3BsYWNlbWVudG1hcF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHByb2plY3RfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc192ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGZvZ192ZXJ0ZXg+XFxuXFx0dlZpZXdQb3NpdGlvbiA9IC0gbXZQb3NpdGlvbi54eXo7XFxufVwiLG1lc2h0b29uX2ZyYWc6XCIjZGVmaW5lIFRPT05cXG51bmlmb3JtIHZlYzMgZGlmZnVzZTtcXG51bmlmb3JtIHZlYzMgZW1pc3NpdmU7XFxudW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xcbiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPHBhY2tpbmc+XFxuI2luY2x1ZGUgPGRpdGhlcmluZ19wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxjb2xvcl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDx1dl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDx1djJfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGFscGhhbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGFvbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGxpZ2h0bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGVtaXNzaXZlbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGdyYWRpZW50bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGZvZ19wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxic2Rmcz5cXG4jaW5jbHVkZSA8bGlnaHRzX3BhcnNfYmVnaW4+XFxuI2luY2x1ZGUgPGxpZ2h0c190b29uX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPHNoYWRvd21hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxidW1wbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPG5vcm1hbG1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc19mcmFnbWVudD5cXG52b2lkIG1haW4oKSB7XFxuXFx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19mcmFnbWVudD5cXG5cXHR2ZWM0IGRpZmZ1c2VDb2xvciA9IHZlYzQoIGRpZmZ1c2UsIG9wYWNpdHkgKTtcXG5cXHRSZWZsZWN0ZWRMaWdodCByZWZsZWN0ZWRMaWdodCA9IFJlZmxlY3RlZExpZ2h0KCB2ZWMzKCAwLjAgKSwgdmVjMyggMC4wICksIHZlYzMoIDAuMCApLCB2ZWMzKCAwLjAgKSApO1xcblxcdHZlYzMgdG90YWxFbWlzc2l2ZVJhZGlhbmNlID0gZW1pc3NpdmU7XFxuXFx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGNvbG9yX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxhbHBoYW1hcF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8YWxwaGF0ZXN0X2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxub3JtYWxfZnJhZ21lbnRfYmVnaW4+XFxuXFx0I2luY2x1ZGUgPG5vcm1hbF9mcmFnbWVudF9tYXBzPlxcblxcdCNpbmNsdWRlIDxlbWlzc2l2ZW1hcF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8bGlnaHRzX3Rvb25fZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGxpZ2h0c19mcmFnbWVudF9iZWdpbj5cXG5cXHQjaW5jbHVkZSA8bGlnaHRzX2ZyYWdtZW50X21hcHM+XFxuXFx0I2luY2x1ZGUgPGxpZ2h0c19mcmFnbWVudF9lbmQ+XFxuXFx0I2luY2x1ZGUgPGFvbWFwX2ZyYWdtZW50PlxcblxcdHZlYzMgb3V0Z29pbmdMaWdodCA9IHJlZmxlY3RlZExpZ2h0LmRpcmVjdERpZmZ1c2UgKyByZWZsZWN0ZWRMaWdodC5pbmRpcmVjdERpZmZ1c2UgKyB0b3RhbEVtaXNzaXZlUmFkaWFuY2U7XFxuXFx0Z2xfRnJhZ0NvbG9yID0gdmVjNCggb3V0Z29pbmdMaWdodCwgZGlmZnVzZUNvbG9yLmEgKTtcXG5cXHQjaW5jbHVkZSA8dG9uZW1hcHBpbmdfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGVuY29kaW5nc19mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8Zm9nX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxwcmVtdWx0aXBsaWVkX2FscGhhX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxkaXRoZXJpbmdfZnJhZ21lbnQ+XFxufVwiLG1lc2h0b29uX3ZlcnQ6XCIjZGVmaW5lIFRPT05cXG52YXJ5aW5nIHZlYzMgdlZpZXdQb3NpdGlvbjtcXG4jaWZuZGVmIEZMQVRfU0hBREVEXFxuXFx0dmFyeWluZyB2ZWMzIHZOb3JtYWw7XFxuI2VuZGlmXFxuI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8dXZfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPHV2Ml9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8ZGlzcGxhY2VtZW50bWFwX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxjb2xvcl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8Zm9nX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxtb3JwaHRhcmdldF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8c2tpbm5pbmdfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPHNoYWRvd21hcF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX3ZlcnRleD5cXG52b2lkIG1haW4oKSB7XFxuXFx0I2luY2x1ZGUgPHV2X3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8dXYyX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8Y29sb3JfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxiZWdpbm5vcm1hbF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPG1vcnBobm9ybWFsX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8c2tpbmJhc2VfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2lubm9ybWFsX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8ZGVmYXVsdG5vcm1hbF92ZXJ0ZXg+XFxuI2lmbmRlZiBGTEFUX1NIQURFRFxcblxcdHZOb3JtYWwgPSBub3JtYWxpemUoIHRyYW5zZm9ybWVkTm9ybWFsICk7XFxuI2VuZGlmXFxuXFx0I2luY2x1ZGUgPGJlZ2luX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bW9ycGh0YXJnZXRfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2lubmluZ192ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGRpc3BsYWNlbWVudG1hcF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHByb2plY3RfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc192ZXJ0ZXg+XFxuXFx0dlZpZXdQb3NpdGlvbiA9IC0gbXZQb3NpdGlvbi54eXo7XFxuXFx0I2luY2x1ZGUgPHdvcmxkcG9zX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8c2hhZG93bWFwX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8Zm9nX3ZlcnRleD5cXG59XCIsbWVzaHBob25nX2ZyYWc6XCIjZGVmaW5lIFBIT05HXFxudW5pZm9ybSB2ZWMzIGRpZmZ1c2U7XFxudW5pZm9ybSB2ZWMzIGVtaXNzaXZlO1xcbnVuaWZvcm0gdmVjMyBzcGVjdWxhcjtcXG51bmlmb3JtIGZsb2F0IHNoaW5pbmVzcztcXG51bmlmb3JtIGZsb2F0IG9wYWNpdHk7XFxuI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8cGFja2luZz5cXG4jaW5jbHVkZSA8ZGl0aGVyaW5nX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGNvbG9yX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPHV2X3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPHV2Ml9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8YWxwaGFtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8YW9tYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bGlnaHRtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8ZW1pc3NpdmVtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8ZW52bWFwX2NvbW1vbl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxlbnZtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Y3ViZV91dl9yZWZsZWN0aW9uX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxmb2dfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8YnNkZnM+XFxuI2luY2x1ZGUgPGxpZ2h0c19wYXJzX2JlZ2luPlxcbiNpbmNsdWRlIDxsaWdodHNfcGhvbmdfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8c2hhZG93bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGJ1bXBtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bm9ybWFsbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPHNwZWN1bGFybWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX2ZyYWdtZW50PlxcbnZvaWQgbWFpbigpIHtcXG5cXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX2ZyYWdtZW50PlxcblxcdHZlYzQgZGlmZnVzZUNvbG9yID0gdmVjNCggZGlmZnVzZSwgb3BhY2l0eSApO1xcblxcdFJlZmxlY3RlZExpZ2h0IHJlZmxlY3RlZExpZ2h0ID0gUmVmbGVjdGVkTGlnaHQoIHZlYzMoIDAuMCApLCB2ZWMzKCAwLjAgKSwgdmVjMyggMC4wICksIHZlYzMoIDAuMCApICk7XFxuXFx0dmVjMyB0b3RhbEVtaXNzaXZlUmFkaWFuY2UgPSBlbWlzc2l2ZTtcXG5cXHQjaW5jbHVkZSA8bG9nZGVwdGhidWZfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPG1hcF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8Y29sb3JfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGFscGhhbWFwX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxhbHBoYXRlc3RfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPHNwZWN1bGFybWFwX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxub3JtYWxfZnJhZ21lbnRfYmVnaW4+XFxuXFx0I2luY2x1ZGUgPG5vcm1hbF9mcmFnbWVudF9tYXBzPlxcblxcdCNpbmNsdWRlIDxlbWlzc2l2ZW1hcF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8bGlnaHRzX3Bob25nX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxsaWdodHNfZnJhZ21lbnRfYmVnaW4+XFxuXFx0I2luY2x1ZGUgPGxpZ2h0c19mcmFnbWVudF9tYXBzPlxcblxcdCNpbmNsdWRlIDxsaWdodHNfZnJhZ21lbnRfZW5kPlxcblxcdCNpbmNsdWRlIDxhb21hcF9mcmFnbWVudD5cXG5cXHR2ZWMzIG91dGdvaW5nTGlnaHQgPSByZWZsZWN0ZWRMaWdodC5kaXJlY3REaWZmdXNlICsgcmVmbGVjdGVkTGlnaHQuaW5kaXJlY3REaWZmdXNlICsgcmVmbGVjdGVkTGlnaHQuZGlyZWN0U3BlY3VsYXIgKyByZWZsZWN0ZWRMaWdodC5pbmRpcmVjdFNwZWN1bGFyICsgdG90YWxFbWlzc2l2ZVJhZGlhbmNlO1xcblxcdCNpbmNsdWRlIDxlbnZtYXBfZnJhZ21lbnQ+XFxuXFx0Z2xfRnJhZ0NvbG9yID0gdmVjNCggb3V0Z29pbmdMaWdodCwgZGlmZnVzZUNvbG9yLmEgKTtcXG5cXHQjaW5jbHVkZSA8dG9uZW1hcHBpbmdfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGVuY29kaW5nc19mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8Zm9nX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxwcmVtdWx0aXBsaWVkX2FscGhhX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxkaXRoZXJpbmdfZnJhZ21lbnQ+XFxufVwiLG1lc2hwaG9uZ192ZXJ0OlwiI2RlZmluZSBQSE9OR1xcbnZhcnlpbmcgdmVjMyB2Vmlld1Bvc2l0aW9uO1xcbiNpZm5kZWYgRkxBVF9TSEFERURcXG5cXHR2YXJ5aW5nIHZlYzMgdk5vcm1hbDtcXG4jZW5kaWZcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDx1dl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8dXYyX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxkaXNwbGFjZW1lbnRtYXBfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGVudm1hcF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8Y29sb3JfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGZvZ19wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8bW9ycGh0YXJnZXRfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPHNraW5uaW5nX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxzaGFkb3dtYXBfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc192ZXJ0ZXg+XFxudm9pZCBtYWluKCkge1xcblxcdCNpbmNsdWRlIDx1dl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHV2Ml92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGNvbG9yX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8YmVnaW5ub3JtYWxfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxtb3JwaG5vcm1hbF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5iYXNlX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8c2tpbm5vcm1hbF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGRlZmF1bHRub3JtYWxfdmVydGV4PlxcbiNpZm5kZWYgRkxBVF9TSEFERURcXG5cXHR2Tm9ybWFsID0gbm9ybWFsaXplKCB0cmFuc2Zvcm1lZE5vcm1hbCApO1xcbiNlbmRpZlxcblxcdCNpbmNsdWRlIDxiZWdpbl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPG1vcnBodGFyZ2V0X3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8c2tpbm5pbmdfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxkaXNwbGFjZW1lbnRtYXBfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxwcm9qZWN0X3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bG9nZGVwdGhidWZfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfdmVydGV4PlxcblxcdHZWaWV3UG9zaXRpb24gPSAtIG12UG9zaXRpb24ueHl6O1xcblxcdCNpbmNsdWRlIDx3b3JsZHBvc192ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGVudm1hcF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNoYWRvd21hcF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGZvZ192ZXJ0ZXg+XFxufVwiLG1lc2hwaHlzaWNhbF9mcmFnOlwiI2RlZmluZSBTVEFOREFSRFxcbiNpZmRlZiBQSFlTSUNBTFxcblxcdCNkZWZpbmUgUkVGTEVDVElWSVRZXFxuXFx0I2RlZmluZSBDTEVBUkNPQVRcXG5cXHQjZGVmaW5lIFRSQU5TTUlTU0lPTlxcbiNlbmRpZlxcbnVuaWZvcm0gdmVjMyBkaWZmdXNlO1xcbnVuaWZvcm0gdmVjMyBlbWlzc2l2ZTtcXG51bmlmb3JtIGZsb2F0IHJvdWdobmVzcztcXG51bmlmb3JtIGZsb2F0IG1ldGFsbmVzcztcXG51bmlmb3JtIGZsb2F0IG9wYWNpdHk7XFxuI2lmZGVmIFRSQU5TTUlTU0lPTlxcblxcdHVuaWZvcm0gZmxvYXQgdHJhbnNtaXNzaW9uO1xcbiNlbmRpZlxcbiNpZmRlZiBSRUZMRUNUSVZJVFlcXG5cXHR1bmlmb3JtIGZsb2F0IHJlZmxlY3Rpdml0eTtcXG4jZW5kaWZcXG4jaWZkZWYgQ0xFQVJDT0FUXFxuXFx0dW5pZm9ybSBmbG9hdCBjbGVhcmNvYXQ7XFxuXFx0dW5pZm9ybSBmbG9hdCBjbGVhcmNvYXRSb3VnaG5lc3M7XFxuI2VuZGlmXFxuI2lmZGVmIFVTRV9TSEVFTlxcblxcdHVuaWZvcm0gdmVjMyBzaGVlbjtcXG4jZW5kaWZcXG52YXJ5aW5nIHZlYzMgdlZpZXdQb3NpdGlvbjtcXG4jaWZuZGVmIEZMQVRfU0hBREVEXFxuXFx0dmFyeWluZyB2ZWMzIHZOb3JtYWw7XFxuXFx0I2lmZGVmIFVTRV9UQU5HRU5UXFxuXFx0XFx0dmFyeWluZyB2ZWMzIHZUYW5nZW50O1xcblxcdFxcdHZhcnlpbmcgdmVjMyB2Qml0YW5nZW50O1xcblxcdCNlbmRpZlxcbiNlbmRpZlxcbiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPHBhY2tpbmc+XFxuI2luY2x1ZGUgPGRpdGhlcmluZ19wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxjb2xvcl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDx1dl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDx1djJfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGFscGhhbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGFvbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGxpZ2h0bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGVtaXNzaXZlbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPHRyYW5zbWlzc2lvbm1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxic2Rmcz5cXG4jaW5jbHVkZSA8Y3ViZV91dl9yZWZsZWN0aW9uX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxlbnZtYXBfY29tbW9uX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGVudm1hcF9waHlzaWNhbF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxmb2dfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bGlnaHRzX3BhcnNfYmVnaW4+XFxuI2luY2x1ZGUgPGxpZ2h0c19waHlzaWNhbF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxzaGFkb3dtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8YnVtcG1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxub3JtYWxtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Y2xlYXJjb2F0X3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPHJvdWdobmVzc21hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxtZXRhbG5lc3NtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfZnJhZ21lbnQ+XFxudm9pZCBtYWluKCkge1xcblxcdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfZnJhZ21lbnQ+XFxuXFx0dmVjNCBkaWZmdXNlQ29sb3IgPSB2ZWM0KCBkaWZmdXNlLCBvcGFjaXR5ICk7XFxuXFx0UmVmbGVjdGVkTGlnaHQgcmVmbGVjdGVkTGlnaHQgPSBSZWZsZWN0ZWRMaWdodCggdmVjMyggMC4wICksIHZlYzMoIDAuMCApLCB2ZWMzKCAwLjAgKSwgdmVjMyggMC4wICkgKTtcXG5cXHR2ZWMzIHRvdGFsRW1pc3NpdmVSYWRpYW5jZSA9IGVtaXNzaXZlO1xcblxcdCNpZmRlZiBUUkFOU01JU1NJT05cXG5cXHRcXHRmbG9hdCB0b3RhbFRyYW5zbWlzc2lvbiA9IHRyYW5zbWlzc2lvbjtcXG5cXHQjZW5kaWZcXG5cXHQjaW5jbHVkZSA8bG9nZGVwdGhidWZfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPG1hcF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8Y29sb3JfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGFscGhhbWFwX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxhbHBoYXRlc3RfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPHJvdWdobmVzc21hcF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8bWV0YWxuZXNzbWFwX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxub3JtYWxfZnJhZ21lbnRfYmVnaW4+XFxuXFx0I2luY2x1ZGUgPG5vcm1hbF9mcmFnbWVudF9tYXBzPlxcblxcdCNpbmNsdWRlIDxjbGVhcmNvYXRfbm9ybWFsX2ZyYWdtZW50X2JlZ2luPlxcblxcdCNpbmNsdWRlIDxjbGVhcmNvYXRfbm9ybWFsX2ZyYWdtZW50X21hcHM+XFxuXFx0I2luY2x1ZGUgPGVtaXNzaXZlbWFwX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDx0cmFuc21pc3Npb25tYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGxpZ2h0c19waHlzaWNhbF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8bGlnaHRzX2ZyYWdtZW50X2JlZ2luPlxcblxcdCNpbmNsdWRlIDxsaWdodHNfZnJhZ21lbnRfbWFwcz5cXG5cXHQjaW5jbHVkZSA8bGlnaHRzX2ZyYWdtZW50X2VuZD5cXG5cXHQjaW5jbHVkZSA8YW9tYXBfZnJhZ21lbnQ+XFxuXFx0dmVjMyBvdXRnb2luZ0xpZ2h0ID0gcmVmbGVjdGVkTGlnaHQuZGlyZWN0RGlmZnVzZSArIHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0RGlmZnVzZSArIHJlZmxlY3RlZExpZ2h0LmRpcmVjdFNwZWN1bGFyICsgcmVmbGVjdGVkTGlnaHQuaW5kaXJlY3RTcGVjdWxhciArIHRvdGFsRW1pc3NpdmVSYWRpYW5jZTtcXG5cXHQjaWZkZWYgVFJBTlNNSVNTSU9OXFxuXFx0XFx0ZGlmZnVzZUNvbG9yLmEgKj0gbWl4KCBzYXR1cmF0ZSggMS4gLSB0b3RhbFRyYW5zbWlzc2lvbiArIGxpbmVhclRvUmVsYXRpdmVMdW1pbmFuY2UoIHJlZmxlY3RlZExpZ2h0LmRpcmVjdFNwZWN1bGFyICsgcmVmbGVjdGVkTGlnaHQuaW5kaXJlY3RTcGVjdWxhciApICksIDEuMCwgbWV0YWxuZXNzICk7XFxuXFx0I2VuZGlmXFxuXFx0Z2xfRnJhZ0NvbG9yID0gdmVjNCggb3V0Z29pbmdMaWdodCwgZGlmZnVzZUNvbG9yLmEgKTtcXG5cXHQjaW5jbHVkZSA8dG9uZW1hcHBpbmdfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGVuY29kaW5nc19mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8Zm9nX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxwcmVtdWx0aXBsaWVkX2FscGhhX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxkaXRoZXJpbmdfZnJhZ21lbnQ+XFxufVwiLG1lc2hwaHlzaWNhbF92ZXJ0OlwiI2RlZmluZSBTVEFOREFSRFxcbnZhcnlpbmcgdmVjMyB2Vmlld1Bvc2l0aW9uO1xcbiNpZm5kZWYgRkxBVF9TSEFERURcXG5cXHR2YXJ5aW5nIHZlYzMgdk5vcm1hbDtcXG5cXHQjaWZkZWYgVVNFX1RBTkdFTlRcXG5cXHRcXHR2YXJ5aW5nIHZlYzMgdlRhbmdlbnQ7XFxuXFx0XFx0dmFyeWluZyB2ZWMzIHZCaXRhbmdlbnQ7XFxuXFx0I2VuZGlmXFxuI2VuZGlmXFxuI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8dXZfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPHV2Ml9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8ZGlzcGxhY2VtZW50bWFwX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxjb2xvcl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8Zm9nX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxtb3JwaHRhcmdldF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8c2tpbm5pbmdfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPHNoYWRvd21hcF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX3ZlcnRleD5cXG52b2lkIG1haW4oKSB7XFxuXFx0I2luY2x1ZGUgPHV2X3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8dXYyX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8Y29sb3JfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxiZWdpbm5vcm1hbF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPG1vcnBobm9ybWFsX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8c2tpbmJhc2VfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2lubm9ybWFsX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8ZGVmYXVsdG5vcm1hbF92ZXJ0ZXg+XFxuI2lmbmRlZiBGTEFUX1NIQURFRFxcblxcdHZOb3JtYWwgPSBub3JtYWxpemUoIHRyYW5zZm9ybWVkTm9ybWFsICk7XFxuXFx0I2lmZGVmIFVTRV9UQU5HRU5UXFxuXFx0XFx0dlRhbmdlbnQgPSBub3JtYWxpemUoIHRyYW5zZm9ybWVkVGFuZ2VudCApO1xcblxcdFxcdHZCaXRhbmdlbnQgPSBub3JtYWxpemUoIGNyb3NzKCB2Tm9ybWFsLCB2VGFuZ2VudCApICogdGFuZ2VudC53ICk7XFxuXFx0I2VuZGlmXFxuI2VuZGlmXFxuXFx0I2luY2x1ZGUgPGJlZ2luX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bW9ycGh0YXJnZXRfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2lubmluZ192ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGRpc3BsYWNlbWVudG1hcF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHByb2plY3RfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc192ZXJ0ZXg+XFxuXFx0dlZpZXdQb3NpdGlvbiA9IC0gbXZQb3NpdGlvbi54eXo7XFxuXFx0I2luY2x1ZGUgPHdvcmxkcG9zX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8c2hhZG93bWFwX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8Zm9nX3ZlcnRleD5cXG59XCIsbm9ybWFsX2ZyYWc6XCIjZGVmaW5lIE5PUk1BTFxcbnVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcXG4jaWYgZGVmaW5lZCggRkxBVF9TSEFERUQgKSB8fCBkZWZpbmVkKCBVU0VfQlVNUE1BUCApIHx8IGRlZmluZWQoIFRBTkdFTlRTUEFDRV9OT1JNQUxNQVAgKVxcblxcdHZhcnlpbmcgdmVjMyB2Vmlld1Bvc2l0aW9uO1xcbiNlbmRpZlxcbiNpZm5kZWYgRkxBVF9TSEFERURcXG5cXHR2YXJ5aW5nIHZlYzMgdk5vcm1hbDtcXG5cXHQjaWZkZWYgVVNFX1RBTkdFTlRcXG5cXHRcXHR2YXJ5aW5nIHZlYzMgdlRhbmdlbnQ7XFxuXFx0XFx0dmFyeWluZyB2ZWMzIHZCaXRhbmdlbnQ7XFxuXFx0I2VuZGlmXFxuI2VuZGlmXFxuI2luY2x1ZGUgPHBhY2tpbmc+XFxuI2luY2x1ZGUgPHV2X3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGJ1bXBtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bm9ybWFsbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX2ZyYWdtZW50PlxcbnZvaWQgbWFpbigpIHtcXG5cXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8bm9ybWFsX2ZyYWdtZW50X2JlZ2luPlxcblxcdCNpbmNsdWRlIDxub3JtYWxfZnJhZ21lbnRfbWFwcz5cXG5cXHRnbF9GcmFnQ29sb3IgPSB2ZWM0KCBwYWNrTm9ybWFsVG9SR0IoIG5vcm1hbCApLCBvcGFjaXR5ICk7XFxufVwiLG5vcm1hbF92ZXJ0OlwiI2RlZmluZSBOT1JNQUxcXG4jaWYgZGVmaW5lZCggRkxBVF9TSEFERUQgKSB8fCBkZWZpbmVkKCBVU0VfQlVNUE1BUCApIHx8IGRlZmluZWQoIFRBTkdFTlRTUEFDRV9OT1JNQUxNQVAgKVxcblxcdHZhcnlpbmcgdmVjMyB2Vmlld1Bvc2l0aW9uO1xcbiNlbmRpZlxcbiNpZm5kZWYgRkxBVF9TSEFERURcXG5cXHR2YXJ5aW5nIHZlYzMgdk5vcm1hbDtcXG5cXHQjaWZkZWYgVVNFX1RBTkdFTlRcXG5cXHRcXHR2YXJ5aW5nIHZlYzMgdlRhbmdlbnQ7XFxuXFx0XFx0dmFyeWluZyB2ZWMzIHZCaXRhbmdlbnQ7XFxuXFx0I2VuZGlmXFxuI2VuZGlmXFxuI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8dXZfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGRpc3BsYWNlbWVudG1hcF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8bW9ycGh0YXJnZXRfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPHNraW5uaW5nX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfdmVydGV4PlxcbnZvaWQgbWFpbigpIHtcXG5cXHQjaW5jbHVkZSA8dXZfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxiZWdpbm5vcm1hbF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPG1vcnBobm9ybWFsX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8c2tpbmJhc2VfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2lubm9ybWFsX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8ZGVmYXVsdG5vcm1hbF92ZXJ0ZXg+XFxuI2lmbmRlZiBGTEFUX1NIQURFRFxcblxcdHZOb3JtYWwgPSBub3JtYWxpemUoIHRyYW5zZm9ybWVkTm9ybWFsICk7XFxuXFx0I2lmZGVmIFVTRV9UQU5HRU5UXFxuXFx0XFx0dlRhbmdlbnQgPSBub3JtYWxpemUoIHRyYW5zZm9ybWVkVGFuZ2VudCApO1xcblxcdFxcdHZCaXRhbmdlbnQgPSBub3JtYWxpemUoIGNyb3NzKCB2Tm9ybWFsLCB2VGFuZ2VudCApICogdGFuZ2VudC53ICk7XFxuXFx0I2VuZGlmXFxuI2VuZGlmXFxuXFx0I2luY2x1ZGUgPGJlZ2luX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bW9ycGh0YXJnZXRfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2lubmluZ192ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGRpc3BsYWNlbWVudG1hcF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHByb2plY3RfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc192ZXJ0ZXg+XFxuI2lmIGRlZmluZWQoIEZMQVRfU0hBREVEICkgfHwgZGVmaW5lZCggVVNFX0JVTVBNQVAgKSB8fCBkZWZpbmVkKCBUQU5HRU5UU1BBQ0VfTk9STUFMTUFQIClcXG5cXHR2Vmlld1Bvc2l0aW9uID0gLSBtdlBvc2l0aW9uLnh5ejtcXG4jZW5kaWZcXG59XCIscG9pbnRzX2ZyYWc6XCJ1bmlmb3JtIHZlYzMgZGlmZnVzZTtcXG51bmlmb3JtIGZsb2F0IG9wYWNpdHk7XFxuI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8Y29sb3JfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bWFwX3BhcnRpY2xlX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGZvZ19wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc19mcmFnbWVudD5cXG52b2lkIG1haW4oKSB7XFxuXFx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19mcmFnbWVudD5cXG5cXHR2ZWMzIG91dGdvaW5nTGlnaHQgPSB2ZWMzKCAwLjAgKTtcXG5cXHR2ZWM0IGRpZmZ1c2VDb2xvciA9IHZlYzQoIGRpZmZ1c2UsIG9wYWNpdHkgKTtcXG5cXHQjaW5jbHVkZSA8bG9nZGVwdGhidWZfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPG1hcF9wYXJ0aWNsZV9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8Y29sb3JfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGFscGhhdGVzdF9mcmFnbWVudD5cXG5cXHRvdXRnb2luZ0xpZ2h0ID0gZGlmZnVzZUNvbG9yLnJnYjtcXG5cXHRnbF9GcmFnQ29sb3IgPSB2ZWM0KCBvdXRnb2luZ0xpZ2h0LCBkaWZmdXNlQ29sb3IuYSApO1xcblxcdCNpbmNsdWRlIDx0b25lbWFwcGluZ19mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8ZW5jb2RpbmdzX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxmb2dfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPHByZW11bHRpcGxpZWRfYWxwaGFfZnJhZ21lbnQ+XFxufVwiLHBvaW50c192ZXJ0OlwidW5pZm9ybSBmbG9hdCBzaXplO1xcbnVuaWZvcm0gZmxvYXQgc2NhbGU7XFxuI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8Y29sb3JfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGZvZ19wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8bW9ycGh0YXJnZXRfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc192ZXJ0ZXg+XFxudm9pZCBtYWluKCkge1xcblxcdCNpbmNsdWRlIDxjb2xvcl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGJlZ2luX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bW9ycGh0YXJnZXRfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxwcm9qZWN0X3ZlcnRleD5cXG5cXHRnbF9Qb2ludFNpemUgPSBzaXplO1xcblxcdCNpZmRlZiBVU0VfU0laRUFUVEVOVUFUSU9OXFxuXFx0XFx0Ym9vbCBpc1BlcnNwZWN0aXZlID0gaXNQZXJzcGVjdGl2ZU1hdHJpeCggcHJvamVjdGlvbk1hdHJpeCApO1xcblxcdFxcdGlmICggaXNQZXJzcGVjdGl2ZSApIGdsX1BvaW50U2l6ZSAqPSAoIHNjYWxlIC8gLSBtdlBvc2l0aW9uLnogKTtcXG5cXHQjZW5kaWZcXG5cXHQjaW5jbHVkZSA8bG9nZGVwdGhidWZfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfdmVydGV4PlxcblxcdCNpbmNsdWRlIDx3b3JsZHBvc192ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGZvZ192ZXJ0ZXg+XFxufVwiLHNoYWRvd19mcmFnOlwidW5pZm9ybSB2ZWMzIGNvbG9yO1xcbnVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDxwYWNraW5nPlxcbiNpbmNsdWRlIDxmb2dfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8YnNkZnM+XFxuI2luY2x1ZGUgPGxpZ2h0c19wYXJzX2JlZ2luPlxcbiNpbmNsdWRlIDxzaGFkb3dtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8c2hhZG93bWFza19wYXJzX2ZyYWdtZW50PlxcbnZvaWQgbWFpbigpIHtcXG5cXHRnbF9GcmFnQ29sb3IgPSB2ZWM0KCBjb2xvciwgb3BhY2l0eSAqICggMS4wIC0gZ2V0U2hhZG93TWFzaygpICkgKTtcXG5cXHQjaW5jbHVkZSA8dG9uZW1hcHBpbmdfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGVuY29kaW5nc19mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8Zm9nX2ZyYWdtZW50Plxcbn1cIixzaGFkb3dfdmVydDpcIiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPGZvZ19wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8c2hhZG93bWFwX3BhcnNfdmVydGV4PlxcbnZvaWQgbWFpbigpIHtcXG5cXHQjaW5jbHVkZSA8YmVnaW5fdmVydGV4PlxcblxcdCNpbmNsdWRlIDxwcm9qZWN0X3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8d29ybGRwb3NfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxiZWdpbm5vcm1hbF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPG1vcnBobm9ybWFsX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8c2tpbmJhc2VfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2lubm9ybWFsX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8ZGVmYXVsdG5vcm1hbF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNoYWRvd21hcF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGZvZ192ZXJ0ZXg+XFxufVwiLHNwcml0ZV9mcmFnOlwidW5pZm9ybSB2ZWMzIGRpZmZ1c2U7XFxudW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xcbiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPHV2X3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPG1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxhbHBoYW1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxmb2dfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfZnJhZ21lbnQ+XFxudm9pZCBtYWluKCkge1xcblxcdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfZnJhZ21lbnQ+XFxuXFx0dmVjMyBvdXRnb2luZ0xpZ2h0ID0gdmVjMyggMC4wICk7XFxuXFx0dmVjNCBkaWZmdXNlQ29sb3IgPSB2ZWM0KCBkaWZmdXNlLCBvcGFjaXR5ICk7XFxuXFx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGFscGhhbWFwX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxhbHBoYXRlc3RfZnJhZ21lbnQ+XFxuXFx0b3V0Z29pbmdMaWdodCA9IGRpZmZ1c2VDb2xvci5yZ2I7XFxuXFx0Z2xfRnJhZ0NvbG9yID0gdmVjNCggb3V0Z29pbmdMaWdodCwgZGlmZnVzZUNvbG9yLmEgKTtcXG5cXHQjaW5jbHVkZSA8dG9uZW1hcHBpbmdfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGVuY29kaW5nc19mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8Zm9nX2ZyYWdtZW50Plxcbn1cIixzcHJpdGVfdmVydDpcInVuaWZvcm0gZmxvYXQgcm90YXRpb247XFxudW5pZm9ybSB2ZWMyIGNlbnRlcjtcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDx1dl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8Zm9nX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfdmVydGV4PlxcbnZvaWQgbWFpbigpIHtcXG5cXHQjaW5jbHVkZSA8dXZfdmVydGV4PlxcblxcdHZlYzQgbXZQb3NpdGlvbiA9IG1vZGVsVmlld01hdHJpeCAqIHZlYzQoIDAuMCwgMC4wLCAwLjAsIDEuMCApO1xcblxcdHZlYzIgc2NhbGU7XFxuXFx0c2NhbGUueCA9IGxlbmd0aCggdmVjMyggbW9kZWxNYXRyaXhbIDAgXS54LCBtb2RlbE1hdHJpeFsgMCBdLnksIG1vZGVsTWF0cml4WyAwIF0ueiApICk7XFxuXFx0c2NhbGUueSA9IGxlbmd0aCggdmVjMyggbW9kZWxNYXRyaXhbIDEgXS54LCBtb2RlbE1hdHJpeFsgMSBdLnksIG1vZGVsTWF0cml4WyAxIF0ueiApICk7XFxuXFx0I2lmbmRlZiBVU0VfU0laRUFUVEVOVUFUSU9OXFxuXFx0XFx0Ym9vbCBpc1BlcnNwZWN0aXZlID0gaXNQZXJzcGVjdGl2ZU1hdHJpeCggcHJvamVjdGlvbk1hdHJpeCApO1xcblxcdFxcdGlmICggaXNQZXJzcGVjdGl2ZSApIHNjYWxlICo9IC0gbXZQb3NpdGlvbi56O1xcblxcdCNlbmRpZlxcblxcdHZlYzIgYWxpZ25lZFBvc2l0aW9uID0gKCBwb3NpdGlvbi54eSAtICggY2VudGVyIC0gdmVjMiggMC41ICkgKSApICogc2NhbGU7XFxuXFx0dmVjMiByb3RhdGVkUG9zaXRpb247XFxuXFx0cm90YXRlZFBvc2l0aW9uLnggPSBjb3MoIHJvdGF0aW9uICkgKiBhbGlnbmVkUG9zaXRpb24ueCAtIHNpbiggcm90YXRpb24gKSAqIGFsaWduZWRQb3NpdGlvbi55O1xcblxcdHJvdGF0ZWRQb3NpdGlvbi55ID0gc2luKCByb3RhdGlvbiApICogYWxpZ25lZFBvc2l0aW9uLnggKyBjb3MoIHJvdGF0aW9uICkgKiBhbGlnbmVkUG9zaXRpb24ueTtcXG5cXHRtdlBvc2l0aW9uLnh5ICs9IHJvdGF0ZWRQb3NpdGlvbjtcXG5cXHRnbF9Qb3NpdGlvbiA9IHByb2plY3Rpb25NYXRyaXggKiBtdlBvc2l0aW9uO1xcblxcdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc192ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGZvZ192ZXJ0ZXg+XFxufVwifSxPbz17Y29tbW9uOntkaWZmdXNlOnt2YWx1ZTpuZXcgeWkoMTU2NTg3MzQpfSxvcGFjaXR5Ont2YWx1ZToxfSxtYXA6e3ZhbHVlOm51bGx9LHV2VHJhbnNmb3JtOnt2YWx1ZTpuZXcgSG59LHV2MlRyYW5zZm9ybTp7dmFsdWU6bmV3IEhufSxhbHBoYU1hcDp7dmFsdWU6bnVsbH19LHNwZWN1bGFybWFwOntzcGVjdWxhck1hcDp7dmFsdWU6bnVsbH19LGVudm1hcDp7ZW52TWFwOnt2YWx1ZTpudWxsfSxmbGlwRW52TWFwOnt2YWx1ZTotMX0scmVmbGVjdGl2aXR5Ont2YWx1ZToxfSxyZWZyYWN0aW9uUmF0aW86e3ZhbHVlOi45OH0sbWF4TWlwTGV2ZWw6e3ZhbHVlOjB9fSxhb21hcDp7YW9NYXA6e3ZhbHVlOm51bGx9LGFvTWFwSW50ZW5zaXR5Ont2YWx1ZToxfX0sbGlnaHRtYXA6e2xpZ2h0TWFwOnt2YWx1ZTpudWxsfSxsaWdodE1hcEludGVuc2l0eTp7dmFsdWU6MX19LGVtaXNzaXZlbWFwOntlbWlzc2l2ZU1hcDp7dmFsdWU6bnVsbH19LGJ1bXBtYXA6e2J1bXBNYXA6e3ZhbHVlOm51bGx9LGJ1bXBTY2FsZTp7dmFsdWU6MX19LG5vcm1hbG1hcDp7bm9ybWFsTWFwOnt2YWx1ZTpudWxsfSxub3JtYWxTY2FsZTp7dmFsdWU6bmV3IEduKDEsMSl9fSxkaXNwbGFjZW1lbnRtYXA6e2Rpc3BsYWNlbWVudE1hcDp7dmFsdWU6bnVsbH0sZGlzcGxhY2VtZW50U2NhbGU6e3ZhbHVlOjF9LGRpc3BsYWNlbWVudEJpYXM6e3ZhbHVlOjB9fSxyb3VnaG5lc3NtYXA6e3JvdWdobmVzc01hcDp7dmFsdWU6bnVsbH19LG1ldGFsbmVzc21hcDp7bWV0YWxuZXNzTWFwOnt2YWx1ZTpudWxsfX0sZ3JhZGllbnRtYXA6e2dyYWRpZW50TWFwOnt2YWx1ZTpudWxsfX0sZm9nOntmb2dEZW5zaXR5Ont2YWx1ZToyNWUtNX0sZm9nTmVhcjp7dmFsdWU6MX0sZm9nRmFyOnt2YWx1ZToyZTN9LGZvZ0NvbG9yOnt2YWx1ZTpuZXcgeWkoMTY3NzcyMTUpfX0sbGlnaHRzOnthbWJpZW50TGlnaHRDb2xvcjp7dmFsdWU6W119LGxpZ2h0UHJvYmU6e3ZhbHVlOltdfSxkaXJlY3Rpb25hbExpZ2h0czp7dmFsdWU6W10scHJvcGVydGllczp7ZGlyZWN0aW9uOnt9LGNvbG9yOnt9fX0sZGlyZWN0aW9uYWxMaWdodFNoYWRvd3M6e3ZhbHVlOltdLHByb3BlcnRpZXM6e3NoYWRvd0JpYXM6e30sc2hhZG93Tm9ybWFsQmlhczp7fSxzaGFkb3dSYWRpdXM6e30sc2hhZG93TWFwU2l6ZTp7fX19LGRpcmVjdGlvbmFsU2hhZG93TWFwOnt2YWx1ZTpbXX0sZGlyZWN0aW9uYWxTaGFkb3dNYXRyaXg6e3ZhbHVlOltdfSxzcG90TGlnaHRzOnt2YWx1ZTpbXSxwcm9wZXJ0aWVzOntjb2xvcjp7fSxwb3NpdGlvbjp7fSxkaXJlY3Rpb246e30sZGlzdGFuY2U6e30sY29uZUNvczp7fSxwZW51bWJyYUNvczp7fSxkZWNheTp7fX19LHNwb3RMaWdodFNoYWRvd3M6e3ZhbHVlOltdLHByb3BlcnRpZXM6e3NoYWRvd0JpYXM6e30sc2hhZG93Tm9ybWFsQmlhczp7fSxzaGFkb3dSYWRpdXM6e30sc2hhZG93TWFwU2l6ZTp7fX19LHNwb3RTaGFkb3dNYXA6e3ZhbHVlOltdfSxzcG90U2hhZG93TWF0cml4Ont2YWx1ZTpbXX0scG9pbnRMaWdodHM6e3ZhbHVlOltdLHByb3BlcnRpZXM6e2NvbG9yOnt9LHBvc2l0aW9uOnt9LGRlY2F5Ont9LGRpc3RhbmNlOnt9fX0scG9pbnRMaWdodFNoYWRvd3M6e3ZhbHVlOltdLHByb3BlcnRpZXM6e3NoYWRvd0JpYXM6e30sc2hhZG93Tm9ybWFsQmlhczp7fSxzaGFkb3dSYWRpdXM6e30sc2hhZG93TWFwU2l6ZTp7fSxzaGFkb3dDYW1lcmFOZWFyOnt9LHNoYWRvd0NhbWVyYUZhcjp7fX19LHBvaW50U2hhZG93TWFwOnt2YWx1ZTpbXX0scG9pbnRTaGFkb3dNYXRyaXg6e3ZhbHVlOltdfSxoZW1pc3BoZXJlTGlnaHRzOnt2YWx1ZTpbXSxwcm9wZXJ0aWVzOntkaXJlY3Rpb246e30sc2t5Q29sb3I6e30sZ3JvdW5kQ29sb3I6e319fSxyZWN0QXJlYUxpZ2h0czp7dmFsdWU6W10scHJvcGVydGllczp7Y29sb3I6e30scG9zaXRpb246e30sd2lkdGg6e30saGVpZ2h0Ont9fX0sbHRjXzE6e3ZhbHVlOm51bGx9LGx0Y18yOnt2YWx1ZTpudWxsfX0scG9pbnRzOntkaWZmdXNlOnt2YWx1ZTpuZXcgeWkoMTU2NTg3MzQpfSxvcGFjaXR5Ont2YWx1ZToxfSxzaXplOnt2YWx1ZToxfSxzY2FsZTp7dmFsdWU6MX0sbWFwOnt2YWx1ZTpudWxsfSxhbHBoYU1hcDp7dmFsdWU6bnVsbH0sdXZUcmFuc2Zvcm06e3ZhbHVlOm5ldyBIbn19LHNwcml0ZTp7ZGlmZnVzZTp7dmFsdWU6bmV3IHlpKDE1NjU4NzM0KX0sb3BhY2l0eTp7dmFsdWU6MX0sY2VudGVyOnt2YWx1ZTpuZXcgR24oLjUsLjUpfSxyb3RhdGlvbjp7dmFsdWU6MH0sbWFwOnt2YWx1ZTpudWxsfSxhbHBoYU1hcDp7dmFsdWU6bnVsbH0sdXZUcmFuc2Zvcm06e3ZhbHVlOm5ldyBIbn19fSxObz17YmFzaWM6e3VuaWZvcm1zOnZvKFtPby5jb21tb24sT28uc3BlY3VsYXJtYXAsT28uZW52bWFwLE9vLmFvbWFwLE9vLmxpZ2h0bWFwLE9vLmZvZ10pLHZlcnRleFNoYWRlcjpJby5tZXNoYmFzaWNfdmVydCxmcmFnbWVudFNoYWRlcjpJby5tZXNoYmFzaWNfZnJhZ30sbGFtYmVydDp7dW5pZm9ybXM6dm8oW09vLmNvbW1vbixPby5zcGVjdWxhcm1hcCxPby5lbnZtYXAsT28uYW9tYXAsT28ubGlnaHRtYXAsT28uZW1pc3NpdmVtYXAsT28uZm9nLE9vLmxpZ2h0cyx7ZW1pc3NpdmU6e3ZhbHVlOm5ldyB5aSgwKX19XSksdmVydGV4U2hhZGVyOklvLm1lc2hsYW1iZXJ0X3ZlcnQsZnJhZ21lbnRTaGFkZXI6SW8ubWVzaGxhbWJlcnRfZnJhZ30scGhvbmc6e3VuaWZvcm1zOnZvKFtPby5jb21tb24sT28uc3BlY3VsYXJtYXAsT28uZW52bWFwLE9vLmFvbWFwLE9vLmxpZ2h0bWFwLE9vLmVtaXNzaXZlbWFwLE9vLmJ1bXBtYXAsT28ubm9ybWFsbWFwLE9vLmRpc3BsYWNlbWVudG1hcCxPby5mb2csT28ubGlnaHRzLHtlbWlzc2l2ZTp7dmFsdWU6bmV3IHlpKDApfSxzcGVjdWxhcjp7dmFsdWU6bmV3IHlpKDExMTg0ODEpfSxzaGluaW5lc3M6e3ZhbHVlOjMwfX1dKSx2ZXJ0ZXhTaGFkZXI6SW8ubWVzaHBob25nX3ZlcnQsZnJhZ21lbnRTaGFkZXI6SW8ubWVzaHBob25nX2ZyYWd9LHN0YW5kYXJkOnt1bmlmb3Jtczp2byhbT28uY29tbW9uLE9vLmVudm1hcCxPby5hb21hcCxPby5saWdodG1hcCxPby5lbWlzc2l2ZW1hcCxPby5idW1wbWFwLE9vLm5vcm1hbG1hcCxPby5kaXNwbGFjZW1lbnRtYXAsT28ucm91Z2huZXNzbWFwLE9vLm1ldGFsbmVzc21hcCxPby5mb2csT28ubGlnaHRzLHtlbWlzc2l2ZTp7dmFsdWU6bmV3IHlpKDApfSxyb3VnaG5lc3M6e3ZhbHVlOjF9LG1ldGFsbmVzczp7dmFsdWU6MH0sZW52TWFwSW50ZW5zaXR5Ont2YWx1ZToxfX1dKSx2ZXJ0ZXhTaGFkZXI6SW8ubWVzaHBoeXNpY2FsX3ZlcnQsZnJhZ21lbnRTaGFkZXI6SW8ubWVzaHBoeXNpY2FsX2ZyYWd9LHRvb246e3VuaWZvcm1zOnZvKFtPby5jb21tb24sT28uYW9tYXAsT28ubGlnaHRtYXAsT28uZW1pc3NpdmVtYXAsT28uYnVtcG1hcCxPby5ub3JtYWxtYXAsT28uZGlzcGxhY2VtZW50bWFwLE9vLmdyYWRpZW50bWFwLE9vLmZvZyxPby5saWdodHMse2VtaXNzaXZlOnt2YWx1ZTpuZXcgeWkoMCl9fV0pLHZlcnRleFNoYWRlcjpJby5tZXNodG9vbl92ZXJ0LGZyYWdtZW50U2hhZGVyOklvLm1lc2h0b29uX2ZyYWd9LG1hdGNhcDp7dW5pZm9ybXM6dm8oW09vLmNvbW1vbixPby5idW1wbWFwLE9vLm5vcm1hbG1hcCxPby5kaXNwbGFjZW1lbnRtYXAsT28uZm9nLHttYXRjYXA6e3ZhbHVlOm51bGx9fV0pLHZlcnRleFNoYWRlcjpJby5tZXNobWF0Y2FwX3ZlcnQsZnJhZ21lbnRTaGFkZXI6SW8ubWVzaG1hdGNhcF9mcmFnfSxwb2ludHM6e3VuaWZvcm1zOnZvKFtPby5wb2ludHMsT28uZm9nXSksdmVydGV4U2hhZGVyOklvLnBvaW50c192ZXJ0LGZyYWdtZW50U2hhZGVyOklvLnBvaW50c19mcmFnfSxkYXNoZWQ6e3VuaWZvcm1zOnZvKFtPby5jb21tb24sT28uZm9nLHtzY2FsZTp7dmFsdWU6MX0sZGFzaFNpemU6e3ZhbHVlOjF9LHRvdGFsU2l6ZTp7dmFsdWU6Mn19XSksdmVydGV4U2hhZGVyOklvLmxpbmVkYXNoZWRfdmVydCxmcmFnbWVudFNoYWRlcjpJby5saW5lZGFzaGVkX2ZyYWd9LGRlcHRoOnt1bmlmb3Jtczp2byhbT28uY29tbW9uLE9vLmRpc3BsYWNlbWVudG1hcF0pLHZlcnRleFNoYWRlcjpJby5kZXB0aF92ZXJ0LGZyYWdtZW50U2hhZGVyOklvLmRlcHRoX2ZyYWd9LG5vcm1hbDp7dW5pZm9ybXM6dm8oW09vLmNvbW1vbixPby5idW1wbWFwLE9vLm5vcm1hbG1hcCxPby5kaXNwbGFjZW1lbnRtYXAse29wYWNpdHk6e3ZhbHVlOjF9fV0pLHZlcnRleFNoYWRlcjpJby5ub3JtYWxfdmVydCxmcmFnbWVudFNoYWRlcjpJby5ub3JtYWxfZnJhZ30sc3ByaXRlOnt1bmlmb3Jtczp2byhbT28uc3ByaXRlLE9vLmZvZ10pLHZlcnRleFNoYWRlcjpJby5zcHJpdGVfdmVydCxmcmFnbWVudFNoYWRlcjpJby5zcHJpdGVfZnJhZ30sYmFja2dyb3VuZDp7dW5pZm9ybXM6e3V2VHJhbnNmb3JtOnt2YWx1ZTpuZXcgSG59LHQyRDp7dmFsdWU6bnVsbH19LHZlcnRleFNoYWRlcjpJby5iYWNrZ3JvdW5kX3ZlcnQsZnJhZ21lbnRTaGFkZXI6SW8uYmFja2dyb3VuZF9mcmFnfSxjdWJlOnt1bmlmb3Jtczp2byhbT28uZW52bWFwLHtvcGFjaXR5Ont2YWx1ZToxfX1dKSx2ZXJ0ZXhTaGFkZXI6SW8uY3ViZV92ZXJ0LGZyYWdtZW50U2hhZGVyOklvLmN1YmVfZnJhZ30sZXF1aXJlY3Q6e3VuaWZvcm1zOnt0RXF1aXJlY3Q6e3ZhbHVlOm51bGx9fSx2ZXJ0ZXhTaGFkZXI6SW8uZXF1aXJlY3RfdmVydCxmcmFnbWVudFNoYWRlcjpJby5lcXVpcmVjdF9mcmFnfSxkaXN0YW5jZVJHQkE6e3VuaWZvcm1zOnZvKFtPby5jb21tb24sT28uZGlzcGxhY2VtZW50bWFwLHtyZWZlcmVuY2VQb3NpdGlvbjp7dmFsdWU6bmV3IEtufSxuZWFyRGlzdGFuY2U6e3ZhbHVlOjF9LGZhckRpc3RhbmNlOnt2YWx1ZToxZTN9fV0pLHZlcnRleFNoYWRlcjpJby5kaXN0YW5jZVJHQkFfdmVydCxmcmFnbWVudFNoYWRlcjpJby5kaXN0YW5jZVJHQkFfZnJhZ30sc2hhZG93Ont1bmlmb3Jtczp2byhbT28ubGlnaHRzLE9vLmZvZyx7Y29sb3I6e3ZhbHVlOm5ldyB5aSgwKX0sb3BhY2l0eTp7dmFsdWU6MX19XSksdmVydGV4U2hhZGVyOklvLnNoYWRvd192ZXJ0LGZyYWdtZW50U2hhZGVyOklvLnNoYWRvd19mcmFnfX07ZnVuY3Rpb24gRG8odCxlLG4scixpKXtjb25zdCBvPW5ldyB5aSgwKTtsZXQgYSxzLGM9MCxsPW51bGwsdT0wLGg9bnVsbDtmdW5jdGlvbiBkKHQsZSl7bi5idWZmZXJzLmNvbG9yLnNldENsZWFyKHQucix0LmcsdC5iLGUsaSl9cmV0dXJue2dldENsZWFyQ29sb3I6ZnVuY3Rpb24oKXtyZXR1cm4gb30sc2V0Q2xlYXJDb2xvcjpmdW5jdGlvbih0LGU9MSl7by5zZXQodCksYz1lLGQobyxjKX0sZ2V0Q2xlYXJBbHBoYTpmdW5jdGlvbigpe3JldHVybiBjfSxzZXRDbGVhckFscGhhOmZ1bmN0aW9uKHQpe2M9dCxkKG8sYyl9LHJlbmRlcjpmdW5jdGlvbihuLGkscCxnKXtsZXQgdj0hMD09PWkuaXNTY2VuZT9pLmJhY2tncm91bmQ6bnVsbDt2JiZ2LmlzVGV4dHVyZSYmKHY9ZS5nZXQodikpO2NvbnN0IHk9dC54cix4PXkuZ2V0U2Vzc2lvbiYmeS5nZXRTZXNzaW9uKCk7eCYmXCJhZGRpdGl2ZVwiPT09eC5lbnZpcm9ubWVudEJsZW5kTW9kZSYmKHY9bnVsbCksbnVsbD09PXY/ZChvLGMpOnYmJnYuaXNDb2xvciYmKGQodiwxKSxnPSEwKSwodC5hdXRvQ2xlYXJ8fGcpJiZ0LmNsZWFyKHQuYXV0b0NsZWFyQ29sb3IsdC5hdXRvQ2xlYXJEZXB0aCx0LmF1dG9DbGVhclN0ZW5jaWwpLHYmJih2LmlzQ3ViZVRleHR1cmV8fHYuaXNXZWJHTEN1YmVSZW5kZXJUYXJnZXR8fHYubWFwcGluZz09PWx0KT8odm9pZCAwPT09cyYmKHM9bmV3IGhvKG5ldyBtbygxLDEsMSksbmV3IHhvKHtuYW1lOlwiQmFja2dyb3VuZEN1YmVNYXRlcmlhbFwiLHVuaWZvcm1zOmdvKE5vLmN1YmUudW5pZm9ybXMpLHZlcnRleFNoYWRlcjpOby5jdWJlLnZlcnRleFNoYWRlcixmcmFnbWVudFNoYWRlcjpOby5jdWJlLmZyYWdtZW50U2hhZGVyLHNpZGU6bSxkZXB0aFRlc3Q6ITEsZGVwdGhXcml0ZTohMSxmb2c6ITF9KSkscy5nZW9tZXRyeS5kZWxldGVBdHRyaWJ1dGUoXCJub3JtYWxcIikscy5nZW9tZXRyeS5kZWxldGVBdHRyaWJ1dGUoXCJ1dlwiKSxzLm9uQmVmb3JlUmVuZGVyPWZ1bmN0aW9uKHQsZSxuKXt0aGlzLm1hdHJpeFdvcmxkLmNvcHlQb3NpdGlvbihuLm1hdHJpeFdvcmxkKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHMubWF0ZXJpYWwsXCJlbnZNYXBcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudW5pZm9ybXMuZW52TWFwLnZhbHVlfX0pLHIudXBkYXRlKHMpKSx2LmlzV2ViR0xDdWJlUmVuZGVyVGFyZ2V0JiYodj12LnRleHR1cmUpLHMubWF0ZXJpYWwudW5pZm9ybXMuZW52TWFwLnZhbHVlPXYscy5tYXRlcmlhbC51bmlmb3Jtcy5mbGlwRW52TWFwLnZhbHVlPXYuaXNDdWJlVGV4dHVyZSYmdi5fbmVlZHNGbGlwRW52TWFwPy0xOjEsbD09PXYmJnU9PT12LnZlcnNpb24mJmg9PT10LnRvbmVNYXBwaW5nfHwocy5tYXRlcmlhbC5uZWVkc1VwZGF0ZT0hMCxsPXYsdT12LnZlcnNpb24saD10LnRvbmVNYXBwaW5nKSxuLnVuc2hpZnQocyxzLmdlb21ldHJ5LHMubWF0ZXJpYWwsMCwwLG51bGwpKTp2JiZ2LmlzVGV4dHVyZSYmKHZvaWQgMD09PWEmJihhPW5ldyBobyhuZXcgQ28oMiwyKSxuZXcgeG8oe25hbWU6XCJCYWNrZ3JvdW5kTWF0ZXJpYWxcIix1bmlmb3JtczpnbyhOby5iYWNrZ3JvdW5kLnVuaWZvcm1zKSx2ZXJ0ZXhTaGFkZXI6Tm8uYmFja2dyb3VuZC52ZXJ0ZXhTaGFkZXIsZnJhZ21lbnRTaGFkZXI6Tm8uYmFja2dyb3VuZC5mcmFnbWVudFNoYWRlcixzaWRlOmYsZGVwdGhUZXN0OiExLGRlcHRoV3JpdGU6ITEsZm9nOiExfSkpLGEuZ2VvbWV0cnkuZGVsZXRlQXR0cmlidXRlKFwibm9ybWFsXCIpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLm1hdGVyaWFsLFwibWFwXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnVuaWZvcm1zLnQyRC52YWx1ZX19KSxyLnVwZGF0ZShhKSksYS5tYXRlcmlhbC51bmlmb3Jtcy50MkQudmFsdWU9diwhMD09PXYubWF0cml4QXV0b1VwZGF0ZSYmdi51cGRhdGVNYXRyaXgoKSxhLm1hdGVyaWFsLnVuaWZvcm1zLnV2VHJhbnNmb3JtLnZhbHVlLmNvcHkodi5tYXRyaXgpLGw9PT12JiZ1PT09di52ZXJzaW9uJiZoPT09dC50b25lTWFwcGluZ3x8KGEubWF0ZXJpYWwubmVlZHNVcGRhdGU9ITAsbD12LHU9di52ZXJzaW9uLGg9dC50b25lTWFwcGluZyksbi51bnNoaWZ0KGEsYS5nZW9tZXRyeSxhLm1hdGVyaWFsLDAsMCxudWxsKSl9fX1mdW5jdGlvbiBCbyh0LGUsbixyKXtjb25zdCBpPXQuZ2V0UGFyYW1ldGVyKDM0OTIxKSxvPXIuaXNXZWJHTDI/bnVsbDplLmdldChcIk9FU192ZXJ0ZXhfYXJyYXlfb2JqZWN0XCIpLGE9ci5pc1dlYkdMMnx8bnVsbCE9PW8scz17fSxjPWQobnVsbCk7bGV0IGw9YztmdW5jdGlvbiB1KGUpe3JldHVybiByLmlzV2ViR0wyP3QuYmluZFZlcnRleEFycmF5KGUpOm8uYmluZFZlcnRleEFycmF5T0VTKGUpfWZ1bmN0aW9uIGgoZSl7cmV0dXJuIHIuaXNXZWJHTDI/dC5kZWxldGVWZXJ0ZXhBcnJheShlKTpvLmRlbGV0ZVZlcnRleEFycmF5T0VTKGUpfWZ1bmN0aW9uIGQodCl7Y29uc3QgZT1bXSxuPVtdLHI9W107Zm9yKGxldCB0PTA7dDxpO3QrKyllW3RdPTAsblt0XT0wLHJbdF09MDtyZXR1cm57Z2VvbWV0cnk6bnVsbCxwcm9ncmFtOm51bGwsd2lyZWZyYW1lOiExLG5ld0F0dHJpYnV0ZXM6ZSxlbmFibGVkQXR0cmlidXRlczpuLGF0dHJpYnV0ZURpdmlzb3JzOnIsb2JqZWN0OnQsYXR0cmlidXRlczp7fSxpbmRleDpudWxsfX1mdW5jdGlvbiBwKCl7Y29uc3QgdD1sLm5ld0F0dHJpYnV0ZXM7Zm9yKGxldCBlPTAsbj10Lmxlbmd0aDtlPG47ZSsrKXRbZV09MH1mdW5jdGlvbiBmKHQpe20odCwwKX1mdW5jdGlvbiBtKG4saSl7Y29uc3Qgbz1sLm5ld0F0dHJpYnV0ZXMsYT1sLmVuYWJsZWRBdHRyaWJ1dGVzLHM9bC5hdHRyaWJ1dGVEaXZpc29ycztpZihvW25dPTEsMD09PWFbbl0mJih0LmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KG4pLGFbbl09MSksc1tuXSE9PWkpeyhyLmlzV2ViR0wyP3Q6ZS5nZXQoXCJBTkdMRV9pbnN0YW5jZWRfYXJyYXlzXCIpKVtyLmlzV2ViR0wyP1widmVydGV4QXR0cmliRGl2aXNvclwiOlwidmVydGV4QXR0cmliRGl2aXNvckFOR0xFXCJdKG4saSksc1tuXT1pfX1mdW5jdGlvbiBnKCl7Y29uc3QgZT1sLm5ld0F0dHJpYnV0ZXMsbj1sLmVuYWJsZWRBdHRyaWJ1dGVzO2ZvcihsZXQgcj0wLGk9bi5sZW5ndGg7cjxpO3IrKyluW3JdIT09ZVtyXSYmKHQuZGlzYWJsZVZlcnRleEF0dHJpYkFycmF5KHIpLG5bcl09MCl9ZnVuY3Rpb24gdihlLG4saSxvLGEscyl7ITAhPT1yLmlzV2ViR0wyfHw1MTI0IT09aSYmNTEyNSE9PWk/dC52ZXJ0ZXhBdHRyaWJQb2ludGVyKGUsbixpLG8sYSxzKTp0LnZlcnRleEF0dHJpYklQb2ludGVyKGUsbixpLGEscyl9ZnVuY3Rpb24geSgpe3goKSxsIT09YyYmKGw9Yyx1KGwub2JqZWN0KSl9ZnVuY3Rpb24geCgpe2MuZ2VvbWV0cnk9bnVsbCxjLnByb2dyYW09bnVsbCxjLndpcmVmcmFtZT0hMX1yZXR1cm57c2V0dXA6ZnVuY3Rpb24oaSxjLGgseSx4KXtsZXQgYj0hMTtpZihhKXtjb25zdCBlPWZ1bmN0aW9uKGUsbixpKXtjb25zdCBhPSEwPT09aS53aXJlZnJhbWU7bGV0IGM9c1tlLmlkXTt2b2lkIDA9PT1jJiYoYz17fSxzW2UuaWRdPWMpO2xldCBsPWNbbi5pZF07dm9pZCAwPT09bCYmKGw9e30sY1tuLmlkXT1sKTtsZXQgdT1sW2FdO3ZvaWQgMD09PXUmJih1PWQoci5pc1dlYkdMMj90LmNyZWF0ZVZlcnRleEFycmF5KCk6by5jcmVhdGVWZXJ0ZXhBcnJheU9FUygpKSxsW2FdPXUpO3JldHVybiB1fSh5LGgsYyk7bCE9PWUmJihsPWUsdShsLm9iamVjdCkpLGI9ZnVuY3Rpb24odCxlKXtjb25zdCBuPWwuYXR0cmlidXRlcyxyPXQuYXR0cmlidXRlcztsZXQgaT0wO2Zvcihjb25zdCB0IGluIHIpe2NvbnN0IGU9blt0XSxvPXJbdF07aWYodm9pZCAwPT09ZSlyZXR1cm4hMDtpZihlLmF0dHJpYnV0ZSE9PW8pcmV0dXJuITA7aWYoZS5kYXRhIT09by5kYXRhKXJldHVybiEwO2krK31yZXR1cm4gbC5hdHRyaWJ1dGVzTnVtIT09aXx8bC5pbmRleCE9PWV9KHkseCksYiYmZnVuY3Rpb24odCxlKXtjb25zdCBuPXt9LHI9dC5hdHRyaWJ1dGVzO2xldCBpPTA7Zm9yKGNvbnN0IHQgaW4gcil7Y29uc3QgZT1yW3RdLG89e307by5hdHRyaWJ1dGU9ZSxlLmRhdGEmJihvLmRhdGE9ZS5kYXRhKSxuW3RdPW8saSsrfWwuYXR0cmlidXRlcz1uLGwuYXR0cmlidXRlc051bT1pLGwuaW5kZXg9ZX0oeSx4KX1lbHNle2NvbnN0IHQ9ITA9PT1jLndpcmVmcmFtZTtsLmdlb21ldHJ5PT09eS5pZCYmbC5wcm9ncmFtPT09aC5pZCYmbC53aXJlZnJhbWU9PT10fHwobC5nZW9tZXRyeT15LmlkLGwucHJvZ3JhbT1oLmlkLGwud2lyZWZyYW1lPXQsYj0hMCl9ITA9PT1pLmlzSW5zdGFuY2VkTWVzaCYmKGI9ITApLG51bGwhPT14JiZuLnVwZGF0ZSh4LDM0OTYzKSxiJiYoIWZ1bmN0aW9uKGksbyxhLHMpe2lmKCExPT09ci5pc1dlYkdMMiYmKGkuaXNJbnN0YW5jZWRNZXNofHxzLmlzSW5zdGFuY2VkQnVmZmVyR2VvbWV0cnkpJiZudWxsPT09ZS5nZXQoXCJBTkdMRV9pbnN0YW5jZWRfYXJyYXlzXCIpKXJldHVybjtwKCk7Y29uc3QgYz1zLmF0dHJpYnV0ZXMsbD1hLmdldEF0dHJpYnV0ZXMoKSx1PW8uZGVmYXVsdEF0dHJpYnV0ZVZhbHVlcztmb3IoY29uc3QgZSBpbiBsKXtjb25zdCByPWxbZV07aWYocj49MCl7Y29uc3Qgbz1jW2VdO2lmKHZvaWQgMCE9PW8pe2NvbnN0IGU9by5ub3JtYWxpemVkLGk9by5pdGVtU2l6ZSxhPW4uZ2V0KG8pO2lmKHZvaWQgMD09PWEpY29udGludWU7Y29uc3QgYz1hLmJ1ZmZlcixsPWEudHlwZSx1PWEuYnl0ZXNQZXJFbGVtZW50O2lmKG8uaXNJbnRlcmxlYXZlZEJ1ZmZlckF0dHJpYnV0ZSl7Y29uc3Qgbj1vLmRhdGEsYT1uLnN0cmlkZSxoPW8ub2Zmc2V0O24mJm4uaXNJbnN0YW5jZWRJbnRlcmxlYXZlZEJ1ZmZlcj8obShyLG4ubWVzaFBlckF0dHJpYnV0ZSksdm9pZCAwPT09cy5fbWF4SW5zdGFuY2VDb3VudCYmKHMuX21heEluc3RhbmNlQ291bnQ9bi5tZXNoUGVyQXR0cmlidXRlKm4uY291bnQpKTpmKHIpLHQuYmluZEJ1ZmZlcigzNDk2MixjKSx2KHIsaSxsLGUsYSp1LGgqdSl9ZWxzZSBvLmlzSW5zdGFuY2VkQnVmZmVyQXR0cmlidXRlPyhtKHIsby5tZXNoUGVyQXR0cmlidXRlKSx2b2lkIDA9PT1zLl9tYXhJbnN0YW5jZUNvdW50JiYocy5fbWF4SW5zdGFuY2VDb3VudD1vLm1lc2hQZXJBdHRyaWJ1dGUqby5jb3VudCkpOmYociksdC5iaW5kQnVmZmVyKDM0OTYyLGMpLHYocixpLGwsZSwwLDApfWVsc2UgaWYoXCJpbnN0YW5jZU1hdHJpeFwiPT09ZSl7Y29uc3QgZT1uLmdldChpLmluc3RhbmNlTWF0cml4KTtpZih2b2lkIDA9PT1lKWNvbnRpbnVlO2NvbnN0IG89ZS5idWZmZXIsYT1lLnR5cGU7bShyKzAsMSksbShyKzEsMSksbShyKzIsMSksbShyKzMsMSksdC5iaW5kQnVmZmVyKDM0OTYyLG8pLHQudmVydGV4QXR0cmliUG9pbnRlcihyKzAsNCxhLCExLDY0LDApLHQudmVydGV4QXR0cmliUG9pbnRlcihyKzEsNCxhLCExLDY0LDE2KSx0LnZlcnRleEF0dHJpYlBvaW50ZXIocisyLDQsYSwhMSw2NCwzMiksdC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHIrMyw0LGEsITEsNjQsNDgpfWVsc2UgaWYoXCJpbnN0YW5jZUNvbG9yXCI9PT1lKXtjb25zdCBlPW4uZ2V0KGkuaW5zdGFuY2VDb2xvcik7aWYodm9pZCAwPT09ZSljb250aW51ZTtjb25zdCBvPWUuYnVmZmVyLGE9ZS50eXBlO20ociwxKSx0LmJpbmRCdWZmZXIoMzQ5NjIsbyksdC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHIsMyxhLCExLDEyLDApfWVsc2UgaWYodm9pZCAwIT09dSl7Y29uc3Qgbj11W2VdO2lmKHZvaWQgMCE9PW4pc3dpdGNoKG4ubGVuZ3RoKXtjYXNlIDI6dC52ZXJ0ZXhBdHRyaWIyZnYocixuKTticmVhaztjYXNlIDM6dC52ZXJ0ZXhBdHRyaWIzZnYocixuKTticmVhaztjYXNlIDQ6dC52ZXJ0ZXhBdHRyaWI0ZnYocixuKTticmVhaztkZWZhdWx0OnQudmVydGV4QXR0cmliMWZ2KHIsbil9fX19ZygpfShpLGMsaCx5KSxudWxsIT09eCYmdC5iaW5kQnVmZmVyKDM0OTYzLG4uZ2V0KHgpLmJ1ZmZlcikpfSxyZXNldDp5LHJlc2V0RGVmYXVsdFN0YXRlOngsZGlzcG9zZTpmdW5jdGlvbigpe3koKTtmb3IoY29uc3QgdCBpbiBzKXtjb25zdCBlPXNbdF07Zm9yKGNvbnN0IHQgaW4gZSl7Y29uc3Qgbj1lW3RdO2Zvcihjb25zdCB0IGluIG4paChuW3RdLm9iamVjdCksZGVsZXRlIG5bdF07ZGVsZXRlIGVbdF19ZGVsZXRlIHNbdF19fSxyZWxlYXNlU3RhdGVzT2ZHZW9tZXRyeTpmdW5jdGlvbih0KXtpZih2b2lkIDA9PT1zW3QuaWRdKXJldHVybjtjb25zdCBlPXNbdC5pZF07Zm9yKGNvbnN0IHQgaW4gZSl7Y29uc3Qgbj1lW3RdO2Zvcihjb25zdCB0IGluIG4paChuW3RdLm9iamVjdCksZGVsZXRlIG5bdF07ZGVsZXRlIGVbdF19ZGVsZXRlIHNbdC5pZF19LHJlbGVhc2VTdGF0ZXNPZlByb2dyYW06ZnVuY3Rpb24odCl7Zm9yKGNvbnN0IGUgaW4gcyl7Y29uc3Qgbj1zW2VdO2lmKHZvaWQgMD09PW5bdC5pZF0pY29udGludWU7Y29uc3Qgcj1uW3QuaWRdO2Zvcihjb25zdCB0IGluIHIpaChyW3RdLm9iamVjdCksZGVsZXRlIHJbdF07ZGVsZXRlIG5bdC5pZF19fSxpbml0QXR0cmlidXRlczpwLGVuYWJsZUF0dHJpYnV0ZTpmLGRpc2FibGVVbnVzZWRBdHRyaWJ1dGVzOmd9fWZ1bmN0aW9uIEZvKHQsZSxuLHIpe2NvbnN0IGk9ci5pc1dlYkdMMjtsZXQgbzt0aGlzLnNldE1vZGU9ZnVuY3Rpb24odCl7bz10fSx0aGlzLnJlbmRlcj1mdW5jdGlvbihlLHIpe3QuZHJhd0FycmF5cyhvLGUsciksbi51cGRhdGUocixvLDEpfSx0aGlzLnJlbmRlckluc3RhbmNlcz1mdW5jdGlvbihyLGEscyl7aWYoMD09PXMpcmV0dXJuO2xldCBjLGw7aWYoaSljPXQsbD1cImRyYXdBcnJheXNJbnN0YW5jZWRcIjtlbHNlIGlmKGM9ZS5nZXQoXCJBTkdMRV9pbnN0YW5jZWRfYXJyYXlzXCIpLGw9XCJkcmF3QXJyYXlzSW5zdGFuY2VkQU5HTEVcIixudWxsPT09YylyZXR1cm4gdm9pZCBjb25zb2xlLmVycm9yKFwiVEhSRUUuV2ViR0xCdWZmZXJSZW5kZXJlcjogdXNpbmcgVEhSRUUuSW5zdGFuY2VkQnVmZmVyR2VvbWV0cnkgYnV0IGhhcmR3YXJlIGRvZXMgbm90IHN1cHBvcnQgZXh0ZW5zaW9uIEFOR0xFX2luc3RhbmNlZF9hcnJheXMuXCIpO2NbbF0obyxyLGEscyksbi51cGRhdGUoYSxvLHMpfX1mdW5jdGlvbiBVbyh0LGUsbil7bGV0IHI7ZnVuY3Rpb24gaShlKXtpZihcImhpZ2hwXCI9PT1lKXtpZih0LmdldFNoYWRlclByZWNpc2lvbkZvcm1hdCgzNTYzMywzNjMzOCkucHJlY2lzaW9uPjAmJnQuZ2V0U2hhZGVyUHJlY2lzaW9uRm9ybWF0KDM1NjMyLDM2MzM4KS5wcmVjaXNpb24+MClyZXR1cm5cImhpZ2hwXCI7ZT1cIm1lZGl1bXBcIn1yZXR1cm5cIm1lZGl1bXBcIj09PWUmJnQuZ2V0U2hhZGVyUHJlY2lzaW9uRm9ybWF0KDM1NjMzLDM2MzM3KS5wcmVjaXNpb24+MCYmdC5nZXRTaGFkZXJQcmVjaXNpb25Gb3JtYXQoMzU2MzIsMzYzMzcpLnByZWNpc2lvbj4wP1wibWVkaXVtcFwiOlwibG93cFwifWNvbnN0IG89XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQmJnQgaW5zdGFuY2VvZiBXZWJHTDJSZW5kZXJpbmdDb250ZXh0fHxcInVuZGVmaW5lZFwiIT10eXBlb2YgV2ViR0wyQ29tcHV0ZVJlbmRlcmluZ0NvbnRleHQmJnQgaW5zdGFuY2VvZiBXZWJHTDJDb21wdXRlUmVuZGVyaW5nQ29udGV4dDtsZXQgYT12b2lkIDAhPT1uLnByZWNpc2lvbj9uLnByZWNpc2lvbjpcImhpZ2hwXCI7Y29uc3Qgcz1pKGEpO3MhPT1hJiYoY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjpcIixhLFwibm90IHN1cHBvcnRlZCwgdXNpbmdcIixzLFwiaW5zdGVhZC5cIiksYT1zKTtjb25zdCBjPSEwPT09bi5sb2dhcml0aG1pY0RlcHRoQnVmZmVyLGw9dC5nZXRQYXJhbWV0ZXIoMzQ5MzApLHU9dC5nZXRQYXJhbWV0ZXIoMzU2NjApLGg9dC5nZXRQYXJhbWV0ZXIoMzM3OSksZD10LmdldFBhcmFtZXRlcigzNDA3NikscD10LmdldFBhcmFtZXRlcigzNDkyMSksZj10LmdldFBhcmFtZXRlcigzNjM0NyksbT10LmdldFBhcmFtZXRlcigzNjM0OCksZz10LmdldFBhcmFtZXRlcigzNjM0OSksdj11PjAseT1vfHwhIWUuZ2V0KFwiT0VTX3RleHR1cmVfZmxvYXRcIik7cmV0dXJue2lzV2ViR0wyOm8sZ2V0TWF4QW5pc290cm9weTpmdW5jdGlvbigpe2lmKHZvaWQgMCE9PXIpcmV0dXJuIHI7Y29uc3Qgbj1lLmdldChcIkVYVF90ZXh0dXJlX2ZpbHRlcl9hbmlzb3Ryb3BpY1wiKTtyZXR1cm4gcj1udWxsIT09bj90LmdldFBhcmFtZXRlcihuLk1BWF9URVhUVVJFX01BWF9BTklTT1RST1BZX0VYVCk6MCxyfSxnZXRNYXhQcmVjaXNpb246aSxwcmVjaXNpb246YSxsb2dhcml0aG1pY0RlcHRoQnVmZmVyOmMsbWF4VGV4dHVyZXM6bCxtYXhWZXJ0ZXhUZXh0dXJlczp1LG1heFRleHR1cmVTaXplOmgsbWF4Q3ViZW1hcFNpemU6ZCxtYXhBdHRyaWJ1dGVzOnAsbWF4VmVydGV4VW5pZm9ybXM6ZixtYXhWYXJ5aW5nczptLG1heEZyYWdtZW50VW5pZm9ybXM6Zyx2ZXJ0ZXhUZXh0dXJlczp2LGZsb2F0RnJhZ21lbnRUZXh0dXJlczp5LGZsb2F0VmVydGV4VGV4dHVyZXM6diYmeSxtYXhTYW1wbGVzOm8/dC5nZXRQYXJhbWV0ZXIoMzYxODMpOjB9fWZ1bmN0aW9uIHpvKHQpe2NvbnN0IGU9dGhpcztsZXQgbj1udWxsLHI9MCxpPSExLG89ITE7Y29uc3QgYT1uZXcgdGkscz1uZXcgSG4sYz17dmFsdWU6bnVsbCxuZWVkc1VwZGF0ZTohMX07ZnVuY3Rpb24gbCgpe2MudmFsdWUhPT1uJiYoYy52YWx1ZT1uLGMubmVlZHNVcGRhdGU9cj4wKSxlLm51bVBsYW5lcz1yLGUubnVtSW50ZXJzZWN0aW9uPTB9ZnVuY3Rpb24gdSh0LG4scixpKXtjb25zdCBvPW51bGwhPT10P3QubGVuZ3RoOjA7bGV0IGw9bnVsbDtpZigwIT09byl7aWYobD1jLnZhbHVlLCEwIT09aXx8bnVsbD09PWwpe2NvbnN0IGU9cis0Km8saT1uLm1hdHJpeFdvcmxkSW52ZXJzZTtzLmdldE5vcm1hbE1hdHJpeChpKSwobnVsbD09PWx8fGwubGVuZ3RoPGUpJiYobD1uZXcgRmxvYXQzMkFycmF5KGUpKTtmb3IobGV0IGU9MCxuPXI7ZSE9PW87KytlLG4rPTQpYS5jb3B5KHRbZV0pLmFwcGx5TWF0cml4NChpLHMpLGEubm9ybWFsLnRvQXJyYXkobCxuKSxsW24rM109YS5jb25zdGFudH1jLnZhbHVlPWwsYy5uZWVkc1VwZGF0ZT0hMH1yZXR1cm4gZS5udW1QbGFuZXM9byxlLm51bUludGVyc2VjdGlvbj0wLGx9dGhpcy51bmlmb3JtPWMsdGhpcy5udW1QbGFuZXM9MCx0aGlzLm51bUludGVyc2VjdGlvbj0wLHRoaXMuaW5pdD1mdW5jdGlvbih0LGUsbyl7Y29uc3QgYT0wIT09dC5sZW5ndGh8fGV8fDAhPT1yfHxpO3JldHVybiBpPWUsbj11KHQsbywwKSxyPXQubGVuZ3RoLGF9LHRoaXMuYmVnaW5TaGFkb3dzPWZ1bmN0aW9uKCl7bz0hMCx1KG51bGwpfSx0aGlzLmVuZFNoYWRvd3M9ZnVuY3Rpb24oKXtvPSExLGwoKX0sdGhpcy5zZXRTdGF0ZT1mdW5jdGlvbihlLGEscyl7Y29uc3QgaD1lLmNsaXBwaW5nUGxhbmVzLGQ9ZS5jbGlwSW50ZXJzZWN0aW9uLHA9ZS5jbGlwU2hhZG93cyxmPXQuZ2V0KGUpO2lmKCFpfHxudWxsPT09aHx8MD09PWgubGVuZ3RofHxvJiYhcClvP3UobnVsbCk6bCgpO2Vsc2V7Y29uc3QgdD1vPzA6cixlPTQqdDtsZXQgaT1mLmNsaXBwaW5nU3RhdGV8fG51bGw7Yy52YWx1ZT1pLGk9dShoLGEsZSxzKTtmb3IobGV0IHQ9MDt0IT09ZTsrK3QpaVt0XT1uW3RdO2YuY2xpcHBpbmdTdGF0ZT1pLHRoaXMubnVtSW50ZXJzZWN0aW9uPWQ/dGhpcy5udW1QbGFuZXM6MCx0aGlzLm51bVBsYW5lcys9dH19fWZ1bmN0aW9uIEdvKHQpe2xldCBlPW5ldyBXZWFrTWFwO2Z1bmN0aW9uIG4odCxlKXtyZXR1cm4gZT09PXN0P3QubWFwcGluZz1vdDplPT09Y3QmJih0Lm1hcHBpbmc9YXQpLHR9ZnVuY3Rpb24gcih0KXtjb25zdCBuPXQudGFyZ2V0O24ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImRpc3Bvc2VcIixyKTtjb25zdCBpPWUuZ2V0KG4pO3ZvaWQgMCE9PWkmJihlLmRlbGV0ZShuKSxpLmRpc3Bvc2UoKSl9cmV0dXJue2dldDpmdW5jdGlvbihpKXtpZihpJiZpLmlzVGV4dHVyZSl7Y29uc3Qgbz1pLm1hcHBpbmc7aWYobz09PXN0fHxvPT09Y3Qpe2lmKGUuaGFzKGkpKXtyZXR1cm4gbihlLmdldChpKS50ZXh0dXJlLGkubWFwcGluZyl9e2NvbnN0IG89aS5pbWFnZTtpZihvJiZvLmhlaWdodD4wKXtjb25zdCBhPXQuZ2V0UmVuZGVyTGlzdCgpLHM9dC5nZXRSZW5kZXJUYXJnZXQoKSxjPXQuZ2V0UmVuZGVyU3RhdGUoKSxsPW5ldyBTbyhvLmhlaWdodC8yKTtyZXR1cm4gbC5mcm9tRXF1aXJlY3Rhbmd1bGFyVGV4dHVyZSh0LGkpLGUuc2V0KGksbCksdC5zZXRSZW5kZXJUYXJnZXQocyksdC5zZXRSZW5kZXJMaXN0KGEpLHQuc2V0UmVuZGVyU3RhdGUoYyksaS5hZGRFdmVudExpc3RlbmVyKFwiZGlzcG9zZVwiLHIpLG4obC50ZXh0dXJlLGkubWFwcGluZyl9cmV0dXJuIG51bGx9fX1yZXR1cm4gaX0sZGlzcG9zZTpmdW5jdGlvbigpe2U9bmV3IFdlYWtNYXB9fX1mdW5jdGlvbiBIbyh0KXtjb25zdCBlPXt9O3JldHVybntoYXM6ZnVuY3Rpb24obil7aWYodm9pZCAwIT09ZVtuXSlyZXR1cm4gbnVsbCE9PWVbbl07bGV0IHI7c3dpdGNoKG4pe2Nhc2VcIldFQkdMX2RlcHRoX3RleHR1cmVcIjpyPXQuZ2V0RXh0ZW5zaW9uKFwiV0VCR0xfZGVwdGhfdGV4dHVyZVwiKXx8dC5nZXRFeHRlbnNpb24oXCJNT1pfV0VCR0xfZGVwdGhfdGV4dHVyZVwiKXx8dC5nZXRFeHRlbnNpb24oXCJXRUJLSVRfV0VCR0xfZGVwdGhfdGV4dHVyZVwiKTticmVhaztjYXNlXCJFWFRfdGV4dHVyZV9maWx0ZXJfYW5pc290cm9waWNcIjpyPXQuZ2V0RXh0ZW5zaW9uKFwiRVhUX3RleHR1cmVfZmlsdGVyX2FuaXNvdHJvcGljXCIpfHx0LmdldEV4dGVuc2lvbihcIk1PWl9FWFRfdGV4dHVyZV9maWx0ZXJfYW5pc290cm9waWNcIil8fHQuZ2V0RXh0ZW5zaW9uKFwiV0VCS0lUX0VYVF90ZXh0dXJlX2ZpbHRlcl9hbmlzb3Ryb3BpY1wiKTticmVhaztjYXNlXCJXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfczN0Y1wiOnI9dC5nZXRFeHRlbnNpb24oXCJXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfczN0Y1wiKXx8dC5nZXRFeHRlbnNpb24oXCJNT1pfV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3MzdGNcIil8fHQuZ2V0RXh0ZW5zaW9uKFwiV0VCS0lUX1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9zM3RjXCIpO2JyZWFrO2Nhc2VcIldFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9wdnJ0Y1wiOnI9dC5nZXRFeHRlbnNpb24oXCJXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfcHZydGNcIil8fHQuZ2V0RXh0ZW5zaW9uKFwiV0VCS0lUX1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9wdnJ0Y1wiKTticmVhaztkZWZhdWx0OnI9dC5nZXRFeHRlbnNpb24obil9cmV0dXJuIGVbbl09cixudWxsIT09cn0sZ2V0OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmhhcyh0KXx8Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogXCIrdCtcIiBleHRlbnNpb24gbm90IHN1cHBvcnRlZC5cIiksZVt0XX19fWZ1bmN0aW9uIGtvKHQsZSxuLHIpe2NvbnN0IGk9bmV3IFdlYWtNYXAsbz1uZXcgV2Vha01hcDtmdW5jdGlvbiBhKHQpe2NvbnN0IHM9dC50YXJnZXQsYz1pLmdldChzKTtudWxsIT09Yy5pbmRleCYmZS5yZW1vdmUoYy5pbmRleCk7Zm9yKGNvbnN0IHQgaW4gYy5hdHRyaWJ1dGVzKWUucmVtb3ZlKGMuYXR0cmlidXRlc1t0XSk7cy5yZW1vdmVFdmVudExpc3RlbmVyKFwiZGlzcG9zZVwiLGEpLGkuZGVsZXRlKHMpO2NvbnN0IGw9by5nZXQoYyk7bCYmKGUucmVtb3ZlKGwpLG8uZGVsZXRlKGMpKSxyLnJlbGVhc2VTdGF0ZXNPZkdlb21ldHJ5KGMpLCEwPT09cy5pc0luc3RhbmNlZEJ1ZmZlckdlb21ldHJ5JiZkZWxldGUgcy5fbWF4SW5zdGFuY2VDb3VudCxuLm1lbW9yeS5nZW9tZXRyaWVzLS19ZnVuY3Rpb24gcyh0KXtjb25zdCBuPVtdLHI9dC5pbmRleCxpPXQuYXR0cmlidXRlcy5wb3NpdGlvbjtsZXQgYT0wO2lmKG51bGwhPT1yKXtjb25zdCB0PXIuYXJyYXk7YT1yLnZlcnNpb247Zm9yKGxldCBlPTAscj10Lmxlbmd0aDtlPHI7ZSs9Myl7Y29uc3Qgcj10W2UrMF0saT10W2UrMV0sbz10W2UrMl07bi5wdXNoKHIsaSxpLG8sbyxyKX19ZWxzZXtjb25zdCB0PWkuYXJyYXk7YT1pLnZlcnNpb247Zm9yKGxldCBlPTAscj10Lmxlbmd0aC8zLTE7ZTxyO2UrPTMpe2NvbnN0IHQ9ZSswLHI9ZSsxLGk9ZSsyO24ucHVzaCh0LHIscixpLGksdCl9fWNvbnN0IHM9bmV3KEZpKG4pPjY1NTM1P0lpOlBpKShuLDEpO3MudmVyc2lvbj1hO2NvbnN0IGM9by5nZXQodCk7YyYmZS5yZW1vdmUoYyksby5zZXQodCxzKX1yZXR1cm57Z2V0OmZ1bmN0aW9uKHQsZSl7bGV0IHI9aS5nZXQoZSk7cmV0dXJuIHJ8fChlLmFkZEV2ZW50TGlzdGVuZXIoXCJkaXNwb3NlXCIsYSksZS5pc0J1ZmZlckdlb21ldHJ5P3I9ZTplLmlzR2VvbWV0cnkmJih2b2lkIDA9PT1lLl9idWZmZXJHZW9tZXRyeSYmKGUuX2J1ZmZlckdlb21ldHJ5PShuZXcgcWkpLnNldEZyb21PYmplY3QodCkpLHI9ZS5fYnVmZmVyR2VvbWV0cnkpLGkuc2V0KGUsciksbi5tZW1vcnkuZ2VvbWV0cmllcysrLHIpfSx1cGRhdGU6ZnVuY3Rpb24odCl7Y29uc3Qgbj10LmF0dHJpYnV0ZXM7Zm9yKGNvbnN0IHQgaW4gbillLnVwZGF0ZShuW3RdLDM0OTYyKTtjb25zdCByPXQubW9ycGhBdHRyaWJ1dGVzO2Zvcihjb25zdCB0IGluIHIpe2NvbnN0IG49clt0XTtmb3IobGV0IHQ9MCxyPW4ubGVuZ3RoO3Q8cjt0KyspZS51cGRhdGUoblt0XSwzNDk2Mil9fSxnZXRXaXJlZnJhbWVBdHRyaWJ1dGU6ZnVuY3Rpb24odCl7Y29uc3QgZT1vLmdldCh0KTtpZihlKXtjb25zdCBuPXQuaW5kZXg7bnVsbCE9PW4mJmUudmVyc2lvbjxuLnZlcnNpb24mJnModCl9ZWxzZSBzKHQpO3JldHVybiBvLmdldCh0KX19fWZ1bmN0aW9uIFZvKHQsZSxuLHIpe2NvbnN0IGk9ci5pc1dlYkdMMjtsZXQgbyxhLHM7dGhpcy5zZXRNb2RlPWZ1bmN0aW9uKHQpe289dH0sdGhpcy5zZXRJbmRleD1mdW5jdGlvbih0KXthPXQudHlwZSxzPXQuYnl0ZXNQZXJFbGVtZW50fSx0aGlzLnJlbmRlcj1mdW5jdGlvbihlLHIpe3QuZHJhd0VsZW1lbnRzKG8scixhLGUqcyksbi51cGRhdGUocixvLDEpfSx0aGlzLnJlbmRlckluc3RhbmNlcz1mdW5jdGlvbihyLGMsbCl7aWYoMD09PWwpcmV0dXJuO2xldCB1LGg7aWYoaSl1PXQsaD1cImRyYXdFbGVtZW50c0luc3RhbmNlZFwiO2Vsc2UgaWYodT1lLmdldChcIkFOR0xFX2luc3RhbmNlZF9hcnJheXNcIiksaD1cImRyYXdFbGVtZW50c0luc3RhbmNlZEFOR0xFXCIsbnVsbD09PXUpcmV0dXJuIHZvaWQgY29uc29sZS5lcnJvcihcIlRIUkVFLldlYkdMSW5kZXhlZEJ1ZmZlclJlbmRlcmVyOiB1c2luZyBUSFJFRS5JbnN0YW5jZWRCdWZmZXJHZW9tZXRyeSBidXQgaGFyZHdhcmUgZG9lcyBub3Qgc3VwcG9ydCBleHRlbnNpb24gQU5HTEVfaW5zdGFuY2VkX2FycmF5cy5cIik7dVtoXShvLGMsYSxyKnMsbCksbi51cGRhdGUoYyxvLGwpfX1mdW5jdGlvbiBqbyh0KXtjb25zdCBlPXtmcmFtZTowLGNhbGxzOjAsdHJpYW5nbGVzOjAscG9pbnRzOjAsbGluZXM6MH07cmV0dXJue21lbW9yeTp7Z2VvbWV0cmllczowLHRleHR1cmVzOjB9LHJlbmRlcjplLHByb2dyYW1zOm51bGwsYXV0b1Jlc2V0OiEwLHJlc2V0OmZ1bmN0aW9uKCl7ZS5mcmFtZSsrLGUuY2FsbHM9MCxlLnRyaWFuZ2xlcz0wLGUucG9pbnRzPTAsZS5saW5lcz0wfSx1cGRhdGU6ZnVuY3Rpb24odCxuLHIpe3N3aXRjaChlLmNhbGxzKyssbil7Y2FzZSA0OmUudHJpYW5nbGVzKz1yKih0LzMpO2JyZWFrO2Nhc2UgMTplLmxpbmVzKz1yKih0LzIpO2JyZWFrO2Nhc2UgMzplLmxpbmVzKz1yKih0LTEpO2JyZWFrO2Nhc2UgMjplLmxpbmVzKz1yKnQ7YnJlYWs7Y2FzZSAwOmUucG9pbnRzKz1yKnQ7YnJlYWs7ZGVmYXVsdDpjb25zb2xlLmVycm9yKFwiVEhSRUUuV2ViR0xJbmZvOiBVbmtub3duIGRyYXcgbW9kZTpcIixuKX19fX1mdW5jdGlvbiBXbyh0LGUpe3JldHVybiB0WzBdLWVbMF19ZnVuY3Rpb24gWG8odCxlKXtyZXR1cm4gTWF0aC5hYnMoZVsxXSktTWF0aC5hYnModFsxXSl9ZnVuY3Rpb24gcW8odCl7Y29uc3QgZT17fSxuPW5ldyBGbG9hdDMyQXJyYXkoOCkscj1bXTtmb3IobGV0IHQ9MDt0PDg7dCsrKXJbdF09W3QsMF07cmV0dXJue3VwZGF0ZTpmdW5jdGlvbihpLG8sYSxzKXtjb25zdCBjPWkubW9ycGhUYXJnZXRJbmZsdWVuY2VzLGw9dm9pZCAwPT09Yz8wOmMubGVuZ3RoO2xldCB1PWVbby5pZF07aWYodm9pZCAwPT09dSl7dT1bXTtmb3IobGV0IHQ9MDt0PGw7dCsrKXVbdF09W3QsMF07ZVtvLmlkXT11fWZvcihsZXQgdD0wO3Q8bDt0Kyspe2NvbnN0IGU9dVt0XTtlWzBdPXQsZVsxXT1jW3RdfXUuc29ydChYbyk7Zm9yKGxldCB0PTA7dDw4O3QrKyl0PGwmJnVbdF1bMV0/KHJbdF1bMF09dVt0XVswXSxyW3RdWzFdPXVbdF1bMV0pOihyW3RdWzBdPU51bWJlci5NQVhfU0FGRV9JTlRFR0VSLHJbdF1bMV09MCk7ci5zb3J0KFdvKTtjb25zdCBoPWEubW9ycGhUYXJnZXRzJiZvLm1vcnBoQXR0cmlidXRlcy5wb3NpdGlvbixkPWEubW9ycGhOb3JtYWxzJiZvLm1vcnBoQXR0cmlidXRlcy5ub3JtYWw7bGV0IHA9MDtmb3IobGV0IHQ9MDt0PDg7dCsrKXtjb25zdCBlPXJbdF0saT1lWzBdLGE9ZVsxXTtpIT09TnVtYmVyLk1BWF9TQUZFX0lOVEVHRVImJmE/KGgmJm8uZ2V0QXR0cmlidXRlKFwibW9ycGhUYXJnZXRcIit0KSE9PWhbaV0mJm8uc2V0QXR0cmlidXRlKFwibW9ycGhUYXJnZXRcIit0LGhbaV0pLGQmJm8uZ2V0QXR0cmlidXRlKFwibW9ycGhOb3JtYWxcIit0KSE9PWRbaV0mJm8uc2V0QXR0cmlidXRlKFwibW9ycGhOb3JtYWxcIit0LGRbaV0pLG5bdF09YSxwKz1hKTooaCYmITA9PT1vLmhhc0F0dHJpYnV0ZShcIm1vcnBoVGFyZ2V0XCIrdCkmJm8uZGVsZXRlQXR0cmlidXRlKFwibW9ycGhUYXJnZXRcIit0KSxkJiYhMD09PW8uaGFzQXR0cmlidXRlKFwibW9ycGhOb3JtYWxcIit0KSYmby5kZWxldGVBdHRyaWJ1dGUoXCJtb3JwaE5vcm1hbFwiK3QpLG5bdF09MCl9Y29uc3QgZj1vLm1vcnBoVGFyZ2V0c1JlbGF0aXZlPzE6MS1wO3MuZ2V0VW5pZm9ybXMoKS5zZXRWYWx1ZSh0LFwibW9ycGhUYXJnZXRCYXNlSW5mbHVlbmNlXCIsZikscy5nZXRVbmlmb3JtcygpLnNldFZhbHVlKHQsXCJtb3JwaFRhcmdldEluZmx1ZW5jZXNcIixuKX19fWZ1bmN0aW9uIFlvKHQsZSxuLHIpe2xldCBpPW5ldyBXZWFrTWFwO3JldHVybnt1cGRhdGU6ZnVuY3Rpb24odCl7Y29uc3Qgbz1yLnJlbmRlci5mcmFtZSxhPXQuZ2VvbWV0cnkscz1lLmdldCh0LGEpO3JldHVybiBpLmdldChzKSE9PW8mJihhLmlzR2VvbWV0cnkmJnMudXBkYXRlRnJvbU9iamVjdCh0KSxlLnVwZGF0ZShzKSxpLnNldChzLG8pKSx0LmlzSW5zdGFuY2VkTWVzaCYmKG4udXBkYXRlKHQuaW5zdGFuY2VNYXRyaXgsMzQ5NjIpLG51bGwhPT10Lmluc3RhbmNlQ29sb3ImJm4udXBkYXRlKHQuaW5zdGFuY2VDb2xvciwzNDk2MikpLHN9LGRpc3Bvc2U6ZnVuY3Rpb24oKXtpPW5ldyBXZWFrTWFwfX19ZnVuY3Rpb24gWm8odD1udWxsLGU9MSxuPTEscj0xKXtXbi5jYWxsKHRoaXMsbnVsbCksdGhpcy5pbWFnZT17ZGF0YTp0LHdpZHRoOmUsaGVpZ2h0Om4sZGVwdGg6cn0sdGhpcy5tYWdGaWx0ZXI9ZnQsdGhpcy5taW5GaWx0ZXI9ZnQsdGhpcy53cmFwUj1kdCx0aGlzLmdlbmVyYXRlTWlwbWFwcz0hMSx0aGlzLmZsaXBZPSExLHRoaXMubmVlZHNVcGRhdGU9ITB9ZnVuY3Rpb24gSm8odD1udWxsLGU9MSxuPTEscj0xKXtXbi5jYWxsKHRoaXMsbnVsbCksdGhpcy5pbWFnZT17ZGF0YTp0LHdpZHRoOmUsaGVpZ2h0Om4sZGVwdGg6cn0sdGhpcy5tYWdGaWx0ZXI9ZnQsdGhpcy5taW5GaWx0ZXI9ZnQsdGhpcy53cmFwUj1kdCx0aGlzLmdlbmVyYXRlTWlwbWFwcz0hMSx0aGlzLmZsaXBZPSExLHRoaXMubmVlZHNVcGRhdGU9ITB9Tm8ucGh5c2ljYWw9e3VuaWZvcm1zOnZvKFtOby5zdGFuZGFyZC51bmlmb3Jtcyx7Y2xlYXJjb2F0Ont2YWx1ZTowfSxjbGVhcmNvYXRNYXA6e3ZhbHVlOm51bGx9LGNsZWFyY29hdFJvdWdobmVzczp7dmFsdWU6MH0sY2xlYXJjb2F0Um91Z2huZXNzTWFwOnt2YWx1ZTpudWxsfSxjbGVhcmNvYXROb3JtYWxTY2FsZTp7dmFsdWU6bmV3IEduKDEsMSl9LGNsZWFyY29hdE5vcm1hbE1hcDp7dmFsdWU6bnVsbH0sc2hlZW46e3ZhbHVlOm5ldyB5aSgwKX0sdHJhbnNtaXNzaW9uOnt2YWx1ZTowfSx0cmFuc21pc3Npb25NYXA6e3ZhbHVlOm51bGx9fV0pLHZlcnRleFNoYWRlcjpJby5tZXNocGh5c2ljYWxfdmVydCxmcmFnbWVudFNoYWRlcjpJby5tZXNocGh5c2ljYWxfZnJhZ30sWm8ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoV24ucHJvdG90eXBlKSxaby5wcm90b3R5cGUuY29uc3RydWN0b3I9Wm8sWm8ucHJvdG90eXBlLmlzRGF0YVRleHR1cmUyREFycmF5PSEwLEpvLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFduLnByb3RvdHlwZSksSm8ucHJvdG90eXBlLmNvbnN0cnVjdG9yPUpvLEpvLnByb3RvdHlwZS5pc0RhdGFUZXh0dXJlM0Q9ITA7Y29uc3QgS289bmV3IFduLFFvPW5ldyBabywkbz1uZXcgSm8sdGE9bmV3IE1vLGVhPVtdLG5hPVtdLHJhPW5ldyBGbG9hdDMyQXJyYXkoMTYpLGlhPW5ldyBGbG9hdDMyQXJyYXkoOSksb2E9bmV3IEZsb2F0MzJBcnJheSg0KTtmdW5jdGlvbiBhYSh0LGUsbil7Y29uc3Qgcj10WzBdO2lmKHI8PTB8fHI+MClyZXR1cm4gdDtjb25zdCBpPWUqbjtsZXQgbz1lYVtpXTtpZih2b2lkIDA9PT1vJiYobz1uZXcgRmxvYXQzMkFycmF5KGkpLGVhW2ldPW8pLDAhPT1lKXtyLnRvQXJyYXkobywwKTtmb3IobGV0IHI9MSxpPTA7ciE9PWU7KytyKWkrPW4sdFtyXS50b0FycmF5KG8saSl9cmV0dXJuIG99ZnVuY3Rpb24gc2EodCxlKXtpZih0Lmxlbmd0aCE9PWUubGVuZ3RoKXJldHVybiExO2ZvcihsZXQgbj0wLHI9dC5sZW5ndGg7bjxyO24rKylpZih0W25dIT09ZVtuXSlyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiBjYSh0LGUpe2ZvcihsZXQgbj0wLHI9ZS5sZW5ndGg7bjxyO24rKyl0W25dPWVbbl19ZnVuY3Rpb24gbGEodCxlKXtsZXQgbj1uYVtlXTt2b2lkIDA9PT1uJiYobj1uZXcgSW50MzJBcnJheShlKSxuYVtlXT1uKTtmb3IobGV0IHI9MDtyIT09ZTsrK3IpbltyXT10LmFsbG9jYXRlVGV4dHVyZVVuaXQoKTtyZXR1cm4gbn1mdW5jdGlvbiB1YSh0LGUpe2NvbnN0IG49dGhpcy5jYWNoZTtuWzBdIT09ZSYmKHQudW5pZm9ybTFmKHRoaXMuYWRkcixlKSxuWzBdPWUpfWZ1bmN0aW9uIGhhKHQsZSl7Y29uc3Qgbj10aGlzLmNhY2hlO2lmKHZvaWQgMCE9PWUueCluWzBdPT09ZS54JiZuWzFdPT09ZS55fHwodC51bmlmb3JtMmYodGhpcy5hZGRyLGUueCxlLnkpLG5bMF09ZS54LG5bMV09ZS55KTtlbHNle2lmKHNhKG4sZSkpcmV0dXJuO3QudW5pZm9ybTJmdih0aGlzLmFkZHIsZSksY2EobixlKX19ZnVuY3Rpb24gZGEodCxlKXtjb25zdCBuPXRoaXMuY2FjaGU7aWYodm9pZCAwIT09ZS54KW5bMF09PT1lLngmJm5bMV09PT1lLnkmJm5bMl09PT1lLnp8fCh0LnVuaWZvcm0zZih0aGlzLmFkZHIsZS54LGUueSxlLnopLG5bMF09ZS54LG5bMV09ZS55LG5bMl09ZS56KTtlbHNlIGlmKHZvaWQgMCE9PWUuciluWzBdPT09ZS5yJiZuWzFdPT09ZS5nJiZuWzJdPT09ZS5ifHwodC51bmlmb3JtM2YodGhpcy5hZGRyLGUucixlLmcsZS5iKSxuWzBdPWUucixuWzFdPWUuZyxuWzJdPWUuYik7ZWxzZXtpZihzYShuLGUpKXJldHVybjt0LnVuaWZvcm0zZnYodGhpcy5hZGRyLGUpLGNhKG4sZSl9fWZ1bmN0aW9uIHBhKHQsZSl7Y29uc3Qgbj10aGlzLmNhY2hlO2lmKHZvaWQgMCE9PWUueCluWzBdPT09ZS54JiZuWzFdPT09ZS55JiZuWzJdPT09ZS56JiZuWzNdPT09ZS53fHwodC51bmlmb3JtNGYodGhpcy5hZGRyLGUueCxlLnksZS56LGUudyksblswXT1lLngsblsxXT1lLnksblsyXT1lLnosblszXT1lLncpO2Vsc2V7aWYoc2EobixlKSlyZXR1cm47dC51bmlmb3JtNGZ2KHRoaXMuYWRkcixlKSxjYShuLGUpfX1mdW5jdGlvbiBmYSh0LGUpe2NvbnN0IG49dGhpcy5jYWNoZSxyPWUuZWxlbWVudHM7aWYodm9pZCAwPT09cil7aWYoc2EobixlKSlyZXR1cm47dC51bmlmb3JtTWF0cml4MmZ2KHRoaXMuYWRkciwhMSxlKSxjYShuLGUpfWVsc2V7aWYoc2EobixyKSlyZXR1cm47b2Euc2V0KHIpLHQudW5pZm9ybU1hdHJpeDJmdih0aGlzLmFkZHIsITEsb2EpLGNhKG4scil9fWZ1bmN0aW9uIG1hKHQsZSl7Y29uc3Qgbj10aGlzLmNhY2hlLHI9ZS5lbGVtZW50cztpZih2b2lkIDA9PT1yKXtpZihzYShuLGUpKXJldHVybjt0LnVuaWZvcm1NYXRyaXgzZnYodGhpcy5hZGRyLCExLGUpLGNhKG4sZSl9ZWxzZXtpZihzYShuLHIpKXJldHVybjtpYS5zZXQociksdC51bmlmb3JtTWF0cml4M2Z2KHRoaXMuYWRkciwhMSxpYSksY2EobixyKX19ZnVuY3Rpb24gZ2EodCxlKXtjb25zdCBuPXRoaXMuY2FjaGUscj1lLmVsZW1lbnRzO2lmKHZvaWQgMD09PXIpe2lmKHNhKG4sZSkpcmV0dXJuO3QudW5pZm9ybU1hdHJpeDRmdih0aGlzLmFkZHIsITEsZSksY2EobixlKX1lbHNle2lmKHNhKG4scikpcmV0dXJuO3JhLnNldChyKSx0LnVuaWZvcm1NYXRyaXg0ZnYodGhpcy5hZGRyLCExLHJhKSxjYShuLHIpfX1mdW5jdGlvbiB2YSh0LGUsbil7Y29uc3Qgcj10aGlzLmNhY2hlLGk9bi5hbGxvY2F0ZVRleHR1cmVVbml0KCk7clswXSE9PWkmJih0LnVuaWZvcm0xaSh0aGlzLmFkZHIsaSksclswXT1pKSxuLnNhZmVTZXRUZXh0dXJlMkQoZXx8S28saSl9ZnVuY3Rpb24geWEodCxlLG4pe2NvbnN0IHI9dGhpcy5jYWNoZSxpPW4uYWxsb2NhdGVUZXh0dXJlVW5pdCgpO3JbMF0hPT1pJiYodC51bmlmb3JtMWkodGhpcy5hZGRyLGkpLHJbMF09aSksbi5zZXRUZXh0dXJlMkRBcnJheShlfHxRbyxpKX1mdW5jdGlvbiB4YSh0LGUsbil7Y29uc3Qgcj10aGlzLmNhY2hlLGk9bi5hbGxvY2F0ZVRleHR1cmVVbml0KCk7clswXSE9PWkmJih0LnVuaWZvcm0xaSh0aGlzLmFkZHIsaSksclswXT1pKSxuLnNldFRleHR1cmUzRChlfHwkbyxpKX1mdW5jdGlvbiBiYSh0LGUsbil7Y29uc3Qgcj10aGlzLmNhY2hlLGk9bi5hbGxvY2F0ZVRleHR1cmVVbml0KCk7clswXSE9PWkmJih0LnVuaWZvcm0xaSh0aGlzLmFkZHIsaSksclswXT1pKSxuLnNhZmVTZXRUZXh0dXJlQ3ViZShlfHx0YSxpKX1mdW5jdGlvbiB3YSh0LGUpe2NvbnN0IG49dGhpcy5jYWNoZTtuWzBdIT09ZSYmKHQudW5pZm9ybTFpKHRoaXMuYWRkcixlKSxuWzBdPWUpfWZ1bmN0aW9uIF9hKHQsZSl7Y29uc3Qgbj10aGlzLmNhY2hlO3NhKG4sZSl8fCh0LnVuaWZvcm0yaXYodGhpcy5hZGRyLGUpLGNhKG4sZSkpfWZ1bmN0aW9uIE1hKHQsZSl7Y29uc3Qgbj10aGlzLmNhY2hlO3NhKG4sZSl8fCh0LnVuaWZvcm0zaXYodGhpcy5hZGRyLGUpLGNhKG4sZSkpfWZ1bmN0aW9uIFNhKHQsZSl7Y29uc3Qgbj10aGlzLmNhY2hlO3NhKG4sZSl8fCh0LnVuaWZvcm00aXYodGhpcy5hZGRyLGUpLGNhKG4sZSkpfWZ1bmN0aW9uIFRhKHQsZSl7Y29uc3Qgbj10aGlzLmNhY2hlO25bMF0hPT1lJiYodC51bmlmb3JtMXVpKHRoaXMuYWRkcixlKSxuWzBdPWUpfWZ1bmN0aW9uIEVhKHQsZSl7dC51bmlmb3JtMWZ2KHRoaXMuYWRkcixlKX1mdW5jdGlvbiBBYSh0LGUpe3QudW5pZm9ybTFpdih0aGlzLmFkZHIsZSl9ZnVuY3Rpb24gTGEodCxlKXt0LnVuaWZvcm0yaXYodGhpcy5hZGRyLGUpfWZ1bmN0aW9uIFJhKHQsZSl7dC51bmlmb3JtM2l2KHRoaXMuYWRkcixlKX1mdW5jdGlvbiBQYSh0LGUpe3QudW5pZm9ybTRpdih0aGlzLmFkZHIsZSl9ZnVuY3Rpb24gQ2EodCxlKXtjb25zdCBuPWFhKGUsdGhpcy5zaXplLDIpO3QudW5pZm9ybTJmdih0aGlzLmFkZHIsbil9ZnVuY3Rpb24gSWEodCxlKXtjb25zdCBuPWFhKGUsdGhpcy5zaXplLDMpO3QudW5pZm9ybTNmdih0aGlzLmFkZHIsbil9ZnVuY3Rpb24gT2EodCxlKXtjb25zdCBuPWFhKGUsdGhpcy5zaXplLDQpO3QudW5pZm9ybTRmdih0aGlzLmFkZHIsbil9ZnVuY3Rpb24gTmEodCxlKXtjb25zdCBuPWFhKGUsdGhpcy5zaXplLDQpO3QudW5pZm9ybU1hdHJpeDJmdih0aGlzLmFkZHIsITEsbil9ZnVuY3Rpb24gRGEodCxlKXtjb25zdCBuPWFhKGUsdGhpcy5zaXplLDkpO3QudW5pZm9ybU1hdHJpeDNmdih0aGlzLmFkZHIsITEsbil9ZnVuY3Rpb24gQmEodCxlKXtjb25zdCBuPWFhKGUsdGhpcy5zaXplLDE2KTt0LnVuaWZvcm1NYXRyaXg0ZnYodGhpcy5hZGRyLCExLG4pfWZ1bmN0aW9uIEZhKHQsZSxuKXtjb25zdCByPWUubGVuZ3RoLGk9bGEobixyKTt0LnVuaWZvcm0xaXYodGhpcy5hZGRyLGkpO2ZvcihsZXQgdD0wO3QhPT1yOysrdCluLnNhZmVTZXRUZXh0dXJlMkQoZVt0XXx8S28saVt0XSl9ZnVuY3Rpb24gVWEodCxlLG4pe2NvbnN0IHI9ZS5sZW5ndGgsaT1sYShuLHIpO3QudW5pZm9ybTFpdih0aGlzLmFkZHIsaSk7Zm9yKGxldCB0PTA7dCE9PXI7Kyt0KW4uc2FmZVNldFRleHR1cmVDdWJlKGVbdF18fHRhLGlbdF0pfWZ1bmN0aW9uIHphKHQsZSxuKXt0aGlzLmlkPXQsdGhpcy5hZGRyPW4sdGhpcy5jYWNoZT1bXSx0aGlzLnNldFZhbHVlPWZ1bmN0aW9uKHQpe3N3aXRjaCh0KXtjYXNlIDUxMjY6cmV0dXJuIHVhO2Nhc2UgMzU2NjQ6cmV0dXJuIGhhO2Nhc2UgMzU2NjU6cmV0dXJuIGRhO2Nhc2UgMzU2NjY6cmV0dXJuIHBhO2Nhc2UgMzU2NzQ6cmV0dXJuIGZhO2Nhc2UgMzU2NzU6cmV0dXJuIG1hO2Nhc2UgMzU2NzY6cmV0dXJuIGdhO2Nhc2UgNTEyNDpjYXNlIDM1NjcwOnJldHVybiB3YTtjYXNlIDM1NjY3OmNhc2UgMzU2NzE6cmV0dXJuIF9hO2Nhc2UgMzU2Njg6Y2FzZSAzNTY3MjpyZXR1cm4gTWE7Y2FzZSAzNTY2OTpjYXNlIDM1NjczOnJldHVybiBTYTtjYXNlIDUxMjU6cmV0dXJuIFRhO2Nhc2UgMzU2Nzg6Y2FzZSAzNjE5ODpjYXNlIDM2Mjk4OmNhc2UgMzYzMDY6Y2FzZSAzNTY4MjpyZXR1cm4gdmE7Y2FzZSAzNTY3OTpjYXNlIDM2Mjk5OmNhc2UgMzYzMDc6cmV0dXJuIHhhO2Nhc2UgMzU2ODA6Y2FzZSAzNjMwMDpjYXNlIDM2MzA4OmNhc2UgMzYyOTM6cmV0dXJuIGJhO2Nhc2UgMzYyODk6Y2FzZSAzNjMwMzpjYXNlIDM2MzExOmNhc2UgMzYyOTI6cmV0dXJuIHlhfX0oZS50eXBlKX1mdW5jdGlvbiBHYSh0LGUsbil7dGhpcy5pZD10LHRoaXMuYWRkcj1uLHRoaXMuY2FjaGU9W10sdGhpcy5zaXplPWUuc2l6ZSx0aGlzLnNldFZhbHVlPWZ1bmN0aW9uKHQpe3N3aXRjaCh0KXtjYXNlIDUxMjY6cmV0dXJuIEVhO2Nhc2UgMzU2NjQ6cmV0dXJuIENhO2Nhc2UgMzU2NjU6cmV0dXJuIElhO2Nhc2UgMzU2NjY6cmV0dXJuIE9hO2Nhc2UgMzU2NzQ6cmV0dXJuIE5hO2Nhc2UgMzU2NzU6cmV0dXJuIERhO2Nhc2UgMzU2NzY6cmV0dXJuIEJhO2Nhc2UgNTEyNDpjYXNlIDM1NjcwOnJldHVybiBBYTtjYXNlIDM1NjY3OmNhc2UgMzU2NzE6cmV0dXJuIExhO2Nhc2UgMzU2Njg6Y2FzZSAzNTY3MjpyZXR1cm4gUmE7Y2FzZSAzNTY2OTpjYXNlIDM1NjczOnJldHVybiBQYTtjYXNlIDM1Njc4OmNhc2UgMzYxOTg6Y2FzZSAzNjI5ODpjYXNlIDM2MzA2OmNhc2UgMzU2ODI6cmV0dXJuIEZhO2Nhc2UgMzU2ODA6Y2FzZSAzNjMwMDpjYXNlIDM2MzA4OmNhc2UgMzYyOTM6cmV0dXJuIFVhfX0oZS50eXBlKX1mdW5jdGlvbiBIYSh0KXt0aGlzLmlkPXQsdGhpcy5zZXE9W10sdGhpcy5tYXA9e319R2EucHJvdG90eXBlLnVwZGF0ZUNhY2hlPWZ1bmN0aW9uKHQpe2NvbnN0IGU9dGhpcy5jYWNoZTt0IGluc3RhbmNlb2YgRmxvYXQzMkFycmF5JiZlLmxlbmd0aCE9PXQubGVuZ3RoJiYodGhpcy5jYWNoZT1uZXcgRmxvYXQzMkFycmF5KHQubGVuZ3RoKSksY2EoZSx0KX0sSGEucHJvdG90eXBlLnNldFZhbHVlPWZ1bmN0aW9uKHQsZSxuKXtjb25zdCByPXRoaXMuc2VxO2ZvcihsZXQgaT0wLG89ci5sZW5ndGg7aSE9PW87KytpKXtjb25zdCBvPXJbaV07by5zZXRWYWx1ZSh0LGVbby5pZF0sbil9fTtjb25zdCBrYT0vKFtcXHdcXGRfXSspKFxcXSk/KFxcW3xcXC4pPy9nO2Z1bmN0aW9uIFZhKHQsZSl7dC5zZXEucHVzaChlKSx0Lm1hcFtlLmlkXT1lfWZ1bmN0aW9uIGphKHQsZSxuKXtjb25zdCByPXQubmFtZSxpPXIubGVuZ3RoO2ZvcihrYS5sYXN0SW5kZXg9MDs7KXtjb25zdCBvPWthLmV4ZWMociksYT1rYS5sYXN0SW5kZXg7bGV0IHM9b1sxXTtjb25zdCBjPVwiXVwiPT09b1syXSxsPW9bM107aWYoYyYmKHN8PTApLHZvaWQgMD09PWx8fFwiW1wiPT09bCYmYSsyPT09aSl7VmEobix2b2lkIDA9PT1sP25ldyB6YShzLHQsZSk6bmV3IEdhKHMsdCxlKSk7YnJlYWt9e2xldCB0PW4ubWFwW3NdO3ZvaWQgMD09PXQmJih0PW5ldyBIYShzKSxWYShuLHQpKSxuPXR9fX1mdW5jdGlvbiBXYSh0LGUpe3RoaXMuc2VxPVtdLHRoaXMubWFwPXt9O2NvbnN0IG49dC5nZXRQcm9ncmFtUGFyYW1ldGVyKGUsMzU3MTgpO2ZvcihsZXQgcj0wO3I8bjsrK3Ipe2NvbnN0IG49dC5nZXRBY3RpdmVVbmlmb3JtKGUscik7amEobix0LmdldFVuaWZvcm1Mb2NhdGlvbihlLG4ubmFtZSksdGhpcyl9fWZ1bmN0aW9uIFhhKHQsZSxuKXtjb25zdCByPXQuY3JlYXRlU2hhZGVyKGUpO3JldHVybiB0LnNoYWRlclNvdXJjZShyLG4pLHQuY29tcGlsZVNoYWRlcihyKSxyfVdhLnByb3RvdHlwZS5zZXRWYWx1ZT1mdW5jdGlvbih0LGUsbixyKXtjb25zdCBpPXRoaXMubWFwW2VdO3ZvaWQgMCE9PWkmJmkuc2V0VmFsdWUodCxuLHIpfSxXYS5wcm90b3R5cGUuc2V0T3B0aW9uYWw9ZnVuY3Rpb24odCxlLG4pe2NvbnN0IHI9ZVtuXTt2b2lkIDAhPT1yJiZ0aGlzLnNldFZhbHVlKHQsbixyKX0sV2EudXBsb2FkPWZ1bmN0aW9uKHQsZSxuLHIpe2ZvcihsZXQgaT0wLG89ZS5sZW5ndGg7aSE9PW87KytpKXtjb25zdCBvPWVbaV0sYT1uW28uaWRdOyExIT09YS5uZWVkc1VwZGF0ZSYmby5zZXRWYWx1ZSh0LGEudmFsdWUscil9fSxXYS5zZXFXaXRoVmFsdWU9ZnVuY3Rpb24odCxlKXtjb25zdCBuPVtdO2ZvcihsZXQgcj0wLGk9dC5sZW5ndGg7ciE9PWk7KytyKXtjb25zdCBpPXRbcl07aS5pZCBpbiBlJiZuLnB1c2goaSl9cmV0dXJuIG59O2xldCBxYT0wO2Z1bmN0aW9uIFlhKHQpe3N3aXRjaCh0KXtjYXNlIEplOnJldHVybltcIkxpbmVhclwiLFwiKCB2YWx1ZSApXCJdO2Nhc2UgS2U6cmV0dXJuW1wic1JHQlwiLFwiKCB2YWx1ZSApXCJdO2Nhc2UgJGU6cmV0dXJuW1wiUkdCRVwiLFwiKCB2YWx1ZSApXCJdO2Nhc2UgZW46cmV0dXJuW1wiUkdCTVwiLFwiKCB2YWx1ZSwgNy4wIClcIl07Y2FzZSBubjpyZXR1cm5bXCJSR0JNXCIsXCIoIHZhbHVlLCAxNi4wIClcIl07Y2FzZSBybjpyZXR1cm5bXCJSR0JEXCIsXCIoIHZhbHVlLCAyNTYuMCApXCJdO2Nhc2UgUWU6cmV0dXJuW1wiR2FtbWFcIixcIiggdmFsdWUsIGZsb2F0KCBHQU1NQV9GQUNUT1IgKSApXCJdO2Nhc2UgdG46cmV0dXJuW1wiTG9nTHV2XCIsXCIoIHZhbHVlIClcIl07ZGVmYXVsdDpyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xQcm9ncmFtOiBVbnN1cHBvcnRlZCBlbmNvZGluZzpcIix0KSxbXCJMaW5lYXJcIixcIiggdmFsdWUgKVwiXX19ZnVuY3Rpb24gWmEodCxlLG4pe2NvbnN0IHI9dC5nZXRTaGFkZXJQYXJhbWV0ZXIoZSwzNTcxMyksaT10LmdldFNoYWRlckluZm9Mb2coZSkudHJpbSgpO2lmKHImJlwiXCI9PT1pKXJldHVyblwiXCI7cmV0dXJuXCJUSFJFRS5XZWJHTFNoYWRlcjogZ2wuZ2V0U2hhZGVySW5mb0xvZygpIFwiK24rXCJcXG5cIitpK2Z1bmN0aW9uKHQpe2NvbnN0IGU9dC5zcGxpdChcIlxcblwiKTtmb3IobGV0IHQ9MDt0PGUubGVuZ3RoO3QrKyllW3RdPXQrMStcIjogXCIrZVt0XTtyZXR1cm4gZS5qb2luKFwiXFxuXCIpfSh0LmdldFNoYWRlclNvdXJjZShlKSl9ZnVuY3Rpb24gSmEodCxlKXtjb25zdCBuPVlhKGUpO3JldHVyblwidmVjNCBcIit0K1wiKCB2ZWM0IHZhbHVlICkgeyByZXR1cm4gXCIrblswXStcIlRvTGluZWFyXCIrblsxXStcIjsgfVwifWZ1bmN0aW9uIEthKHQsZSl7Y29uc3Qgbj1ZYShlKTtyZXR1cm5cInZlYzQgXCIrdCtcIiggdmVjNCB2YWx1ZSApIHsgcmV0dXJuIExpbmVhclRvXCIrblswXStuWzFdK1wiOyB9XCJ9ZnVuY3Rpb24gUWEodCxlKXtsZXQgbjtzd2l0Y2goZSl7Y2FzZSAkOm49XCJMaW5lYXJcIjticmVhaztjYXNlIHR0Om49XCJSZWluaGFyZFwiO2JyZWFrO2Nhc2UgZXQ6bj1cIk9wdGltaXplZENpbmVvblwiO2JyZWFrO2Nhc2UgbnQ6bj1cIkFDRVNGaWxtaWNcIjticmVhaztjYXNlIHJ0Om49XCJDdXN0b21cIjticmVhaztkZWZhdWx0OmNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUHJvZ3JhbTogVW5zdXBwb3J0ZWQgdG9uZU1hcHBpbmc6XCIsZSksbj1cIkxpbmVhclwifXJldHVyblwidmVjMyBcIit0K1wiKCB2ZWMzIGNvbG9yICkgeyByZXR1cm4gXCIrbitcIlRvbmVNYXBwaW5nKCBjb2xvciApOyB9XCJ9ZnVuY3Rpb24gJGEodCl7cmV0dXJuXCJcIiE9PXR9ZnVuY3Rpb24gdHModCxlKXtyZXR1cm4gdC5yZXBsYWNlKC9OVU1fRElSX0xJR0hUUy9nLGUubnVtRGlyTGlnaHRzKS5yZXBsYWNlKC9OVU1fU1BPVF9MSUdIVFMvZyxlLm51bVNwb3RMaWdodHMpLnJlcGxhY2UoL05VTV9SRUNUX0FSRUFfTElHSFRTL2csZS5udW1SZWN0QXJlYUxpZ2h0cykucmVwbGFjZSgvTlVNX1BPSU5UX0xJR0hUUy9nLGUubnVtUG9pbnRMaWdodHMpLnJlcGxhY2UoL05VTV9IRU1JX0xJR0hUUy9nLGUubnVtSGVtaUxpZ2h0cykucmVwbGFjZSgvTlVNX0RJUl9MSUdIVF9TSEFET1dTL2csZS5udW1EaXJMaWdodFNoYWRvd3MpLnJlcGxhY2UoL05VTV9TUE9UX0xJR0hUX1NIQURPV1MvZyxlLm51bVNwb3RMaWdodFNoYWRvd3MpLnJlcGxhY2UoL05VTV9QT0lOVF9MSUdIVF9TSEFET1dTL2csZS5udW1Qb2ludExpZ2h0U2hhZG93cyl9ZnVuY3Rpb24gZXModCxlKXtyZXR1cm4gdC5yZXBsYWNlKC9OVU1fQ0xJUFBJTkdfUExBTkVTL2csZS5udW1DbGlwcGluZ1BsYW5lcykucmVwbGFjZSgvVU5JT05fQ0xJUFBJTkdfUExBTkVTL2csZS5udW1DbGlwcGluZ1BsYW5lcy1lLm51bUNsaXBJbnRlcnNlY3Rpb24pfWNvbnN0IG5zPS9eWyBcXHRdKiNpbmNsdWRlICs8KFtcXHdcXGQuL10rKT4vZ207ZnVuY3Rpb24gcnModCl7cmV0dXJuIHQucmVwbGFjZShucyxpcyl9ZnVuY3Rpb24gaXModCxlKXtjb25zdCBuPUlvW2VdO2lmKHZvaWQgMD09PW4pdGhyb3cgbmV3IEVycm9yKFwiQ2FuIG5vdCByZXNvbHZlICNpbmNsdWRlIDxcIitlK1wiPlwiKTtyZXR1cm4gcnMobil9Y29uc3Qgb3M9LyNwcmFnbWEgdW5yb2xsX2xvb3BbXFxzXSs/Zm9yIFxcKCBpbnQgaSBcXD0gKFxcZCspXFw7IGkgPCAoXFxkKylcXDsgaSBcXCtcXCsgXFwpIFxceyhbXFxzXFxTXSs/KSg/PVxcfSlcXH0vZyxhcz0vI3ByYWdtYSB1bnJvbGxfbG9vcF9zdGFydFxccytmb3JcXHMqXFwoXFxzKmludFxccytpXFxzKj1cXHMqKFxcZCspXFxzKjtcXHMqaVxccyo8XFxzKihcXGQrKVxccyo7XFxzKmlcXHMqXFwrXFwrXFxzKlxcKVxccyp7KFtcXHNcXFNdKz8pfVxccysjcHJhZ21hIHVucm9sbF9sb29wX2VuZC9nO2Z1bmN0aW9uIHNzKHQpe3JldHVybiB0LnJlcGxhY2UoYXMsbHMpLnJlcGxhY2Uob3MsY3MpfWZ1bmN0aW9uIGNzKHQsZSxuLHIpe3JldHVybiBjb25zb2xlLndhcm4oXCJXZWJHTFByb2dyYW06ICNwcmFnbWEgdW5yb2xsX2xvb3Agc2hhZGVyIHN5bnRheCBpcyBkZXByZWNhdGVkLiBQbGVhc2UgdXNlICNwcmFnbWEgdW5yb2xsX2xvb3Bfc3RhcnQgc3ludGF4IGluc3RlYWQuXCIpLGxzKHQsZSxuLHIpfWZ1bmN0aW9uIGxzKHQsZSxuLHIpe2xldCBpPVwiXCI7Zm9yKGxldCB0PXBhcnNlSW50KGUpO3Q8cGFyc2VJbnQobik7dCsrKWkrPXIucmVwbGFjZSgvXFxbXFxzKmlcXHMqXFxdL2csXCJbIFwiK3QrXCIgXVwiKS5yZXBsYWNlKC9VTlJPTExFRF9MT09QX0lOREVYL2csdCk7cmV0dXJuIGl9ZnVuY3Rpb24gdXModCl7bGV0IGU9XCJwcmVjaXNpb24gXCIrdC5wcmVjaXNpb24rXCIgZmxvYXQ7XFxucHJlY2lzaW9uIFwiK3QucHJlY2lzaW9uK1wiIGludDtcIjtyZXR1cm5cImhpZ2hwXCI9PT10LnByZWNpc2lvbj9lKz1cIlxcbiNkZWZpbmUgSElHSF9QUkVDSVNJT05cIjpcIm1lZGl1bXBcIj09PXQucHJlY2lzaW9uP2UrPVwiXFxuI2RlZmluZSBNRURJVU1fUFJFQ0lTSU9OXCI6XCJsb3dwXCI9PT10LnByZWNpc2lvbiYmKGUrPVwiXFxuI2RlZmluZSBMT1dfUFJFQ0lTSU9OXCIpLGV9ZnVuY3Rpb24gaHModCxlLG4scil7Y29uc3QgaT10LmdldENvbnRleHQoKSxvPW4uZGVmaW5lcztsZXQgYT1uLnZlcnRleFNoYWRlcixzPW4uZnJhZ21lbnRTaGFkZXI7Y29uc3QgYz1mdW5jdGlvbih0KXtsZXQgZT1cIlNIQURPV01BUF9UWVBFX0JBU0lDXCI7cmV0dXJuIHQuc2hhZG93TWFwVHlwZT09PWg/ZT1cIlNIQURPV01BUF9UWVBFX1BDRlwiOnQuc2hhZG93TWFwVHlwZT09PWQ/ZT1cIlNIQURPV01BUF9UWVBFX1BDRl9TT0ZUXCI6dC5zaGFkb3dNYXBUeXBlPT09cCYmKGU9XCJTSEFET1dNQVBfVFlQRV9WU01cIiksZX0obiksbD1mdW5jdGlvbih0KXtsZXQgZT1cIkVOVk1BUF9UWVBFX0NVQkVcIjtpZih0LmVudk1hcClzd2l0Y2godC5lbnZNYXBNb2RlKXtjYXNlIG90OmNhc2UgYXQ6ZT1cIkVOVk1BUF9UWVBFX0NVQkVcIjticmVhaztjYXNlIGx0OmNhc2UgdXQ6ZT1cIkVOVk1BUF9UWVBFX0NVQkVfVVZcIn1yZXR1cm4gZX0obiksdT1mdW5jdGlvbih0KXtsZXQgZT1cIkVOVk1BUF9NT0RFX1JFRkxFQ1RJT05cIjtpZih0LmVudk1hcClzd2l0Y2godC5lbnZNYXBNb2RlKXtjYXNlIGF0OmNhc2UgdXQ6ZT1cIkVOVk1BUF9NT0RFX1JFRlJBQ1RJT05cIn1yZXR1cm4gZX0obiksZj1mdW5jdGlvbih0KXtsZXQgZT1cIkVOVk1BUF9CTEVORElOR19OT05FXCI7aWYodC5lbnZNYXApc3dpdGNoKHQuY29tYmluZSl7Y2FzZSBaOmU9XCJFTlZNQVBfQkxFTkRJTkdfTVVMVElQTFlcIjticmVhaztjYXNlIEo6ZT1cIkVOVk1BUF9CTEVORElOR19NSVhcIjticmVhaztjYXNlIEs6ZT1cIkVOVk1BUF9CTEVORElOR19BRERcIn1yZXR1cm4gZX0obiksbT10LmdhbW1hRmFjdG9yPjA/dC5nYW1tYUZhY3RvcjoxLGc9bi5pc1dlYkdMMj9cIlwiOmZ1bmN0aW9uKHQpe3JldHVyblt0LmV4dGVuc2lvbkRlcml2YXRpdmVzfHx0LmVudk1hcEN1YmVVVnx8dC5idW1wTWFwfHx0LnRhbmdlbnRTcGFjZU5vcm1hbE1hcHx8dC5jbGVhcmNvYXROb3JtYWxNYXB8fHQuZmxhdFNoYWRpbmd8fFwicGh5c2ljYWxcIj09PXQuc2hhZGVySUQ/XCIjZXh0ZW5zaW9uIEdMX09FU19zdGFuZGFyZF9kZXJpdmF0aXZlcyA6IGVuYWJsZVwiOlwiXCIsKHQuZXh0ZW5zaW9uRnJhZ0RlcHRofHx0LmxvZ2FyaXRobWljRGVwdGhCdWZmZXIpJiZ0LnJlbmRlcmVyRXh0ZW5zaW9uRnJhZ0RlcHRoP1wiI2V4dGVuc2lvbiBHTF9FWFRfZnJhZ19kZXB0aCA6IGVuYWJsZVwiOlwiXCIsdC5leHRlbnNpb25EcmF3QnVmZmVycyYmdC5yZW5kZXJlckV4dGVuc2lvbkRyYXdCdWZmZXJzP1wiI2V4dGVuc2lvbiBHTF9FWFRfZHJhd19idWZmZXJzIDogcmVxdWlyZVwiOlwiXCIsKHQuZXh0ZW5zaW9uU2hhZGVyVGV4dHVyZUxPRHx8dC5lbnZNYXApJiZ0LnJlbmRlcmVyRXh0ZW5zaW9uU2hhZGVyVGV4dHVyZUxvZD9cIiNleHRlbnNpb24gR0xfRVhUX3NoYWRlcl90ZXh0dXJlX2xvZCA6IGVuYWJsZVwiOlwiXCJdLmZpbHRlcigkYSkuam9pbihcIlxcblwiKX0obiksdj1mdW5jdGlvbih0KXtjb25zdCBlPVtdO2Zvcihjb25zdCBuIGluIHQpe2NvbnN0IHI9dFtuXTshMSE9PXImJmUucHVzaChcIiNkZWZpbmUgXCIrbitcIiBcIityKX1yZXR1cm4gZS5qb2luKFwiXFxuXCIpfShvKSx5PWkuY3JlYXRlUHJvZ3JhbSgpO2xldCB4LGIsdz1uLmdsc2xWZXJzaW9uP1wiI3ZlcnNpb24gXCIrbi5nbHNsVmVyc2lvbitcIlxcblwiOlwiXCI7bi5pc1Jhd1NoYWRlck1hdGVyaWFsPyh4PVt2XS5maWx0ZXIoJGEpLmpvaW4oXCJcXG5cIikseC5sZW5ndGg+MCYmKHgrPVwiXFxuXCIpLGI9W2csdl0uZmlsdGVyKCRhKS5qb2luKFwiXFxuXCIpLGIubGVuZ3RoPjAmJihiKz1cIlxcblwiKSk6KHg9W3VzKG4pLFwiI2RlZmluZSBTSEFERVJfTkFNRSBcIituLnNoYWRlck5hbWUsdixuLmluc3RhbmNpbmc/XCIjZGVmaW5lIFVTRV9JTlNUQU5DSU5HXCI6XCJcIixuLmluc3RhbmNpbmdDb2xvcj9cIiNkZWZpbmUgVVNFX0lOU1RBTkNJTkdfQ09MT1JcIjpcIlwiLG4uc3VwcG9ydHNWZXJ0ZXhUZXh0dXJlcz9cIiNkZWZpbmUgVkVSVEVYX1RFWFRVUkVTXCI6XCJcIixcIiNkZWZpbmUgR0FNTUFfRkFDVE9SIFwiK20sXCIjZGVmaW5lIE1BWF9CT05FUyBcIituLm1heEJvbmVzLG4udXNlRm9nJiZuLmZvZz9cIiNkZWZpbmUgVVNFX0ZPR1wiOlwiXCIsbi51c2VGb2cmJm4uZm9nRXhwMj9cIiNkZWZpbmUgRk9HX0VYUDJcIjpcIlwiLG4ubWFwP1wiI2RlZmluZSBVU0VfTUFQXCI6XCJcIixuLmVudk1hcD9cIiNkZWZpbmUgVVNFX0VOVk1BUFwiOlwiXCIsbi5lbnZNYXA/XCIjZGVmaW5lIFwiK3U6XCJcIixuLmxpZ2h0TWFwP1wiI2RlZmluZSBVU0VfTElHSFRNQVBcIjpcIlwiLG4uYW9NYXA/XCIjZGVmaW5lIFVTRV9BT01BUFwiOlwiXCIsbi5lbWlzc2l2ZU1hcD9cIiNkZWZpbmUgVVNFX0VNSVNTSVZFTUFQXCI6XCJcIixuLmJ1bXBNYXA/XCIjZGVmaW5lIFVTRV9CVU1QTUFQXCI6XCJcIixuLm5vcm1hbE1hcD9cIiNkZWZpbmUgVVNFX05PUk1BTE1BUFwiOlwiXCIsbi5ub3JtYWxNYXAmJm4ub2JqZWN0U3BhY2VOb3JtYWxNYXA/XCIjZGVmaW5lIE9CSkVDVFNQQUNFX05PUk1BTE1BUFwiOlwiXCIsbi5ub3JtYWxNYXAmJm4udGFuZ2VudFNwYWNlTm9ybWFsTWFwP1wiI2RlZmluZSBUQU5HRU5UU1BBQ0VfTk9STUFMTUFQXCI6XCJcIixuLmNsZWFyY29hdE1hcD9cIiNkZWZpbmUgVVNFX0NMRUFSQ09BVE1BUFwiOlwiXCIsbi5jbGVhcmNvYXRSb3VnaG5lc3NNYXA/XCIjZGVmaW5lIFVTRV9DTEVBUkNPQVRfUk9VR0hORVNTTUFQXCI6XCJcIixuLmNsZWFyY29hdE5vcm1hbE1hcD9cIiNkZWZpbmUgVVNFX0NMRUFSQ09BVF9OT1JNQUxNQVBcIjpcIlwiLG4uZGlzcGxhY2VtZW50TWFwJiZuLnN1cHBvcnRzVmVydGV4VGV4dHVyZXM/XCIjZGVmaW5lIFVTRV9ESVNQTEFDRU1FTlRNQVBcIjpcIlwiLG4uc3BlY3VsYXJNYXA/XCIjZGVmaW5lIFVTRV9TUEVDVUxBUk1BUFwiOlwiXCIsbi5yb3VnaG5lc3NNYXA/XCIjZGVmaW5lIFVTRV9ST1VHSE5FU1NNQVBcIjpcIlwiLG4ubWV0YWxuZXNzTWFwP1wiI2RlZmluZSBVU0VfTUVUQUxORVNTTUFQXCI6XCJcIixuLmFscGhhTWFwP1wiI2RlZmluZSBVU0VfQUxQSEFNQVBcIjpcIlwiLG4udHJhbnNtaXNzaW9uTWFwP1wiI2RlZmluZSBVU0VfVFJBTlNNSVNTSU9OTUFQXCI6XCJcIixuLnZlcnRleFRhbmdlbnRzP1wiI2RlZmluZSBVU0VfVEFOR0VOVFwiOlwiXCIsbi52ZXJ0ZXhDb2xvcnM/XCIjZGVmaW5lIFVTRV9DT0xPUlwiOlwiXCIsbi52ZXJ0ZXhVdnM/XCIjZGVmaW5lIFVTRV9VVlwiOlwiXCIsbi51dnNWZXJ0ZXhPbmx5P1wiI2RlZmluZSBVVlNfVkVSVEVYX09OTFlcIjpcIlwiLG4uZmxhdFNoYWRpbmc/XCIjZGVmaW5lIEZMQVRfU0hBREVEXCI6XCJcIixuLnNraW5uaW5nP1wiI2RlZmluZSBVU0VfU0tJTk5JTkdcIjpcIlwiLG4udXNlVmVydGV4VGV4dHVyZT9cIiNkZWZpbmUgQk9ORV9URVhUVVJFXCI6XCJcIixuLm1vcnBoVGFyZ2V0cz9cIiNkZWZpbmUgVVNFX01PUlBIVEFSR0VUU1wiOlwiXCIsbi5tb3JwaE5vcm1hbHMmJiExPT09bi5mbGF0U2hhZGluZz9cIiNkZWZpbmUgVVNFX01PUlBITk9STUFMU1wiOlwiXCIsbi5kb3VibGVTaWRlZD9cIiNkZWZpbmUgRE9VQkxFX1NJREVEXCI6XCJcIixuLmZsaXBTaWRlZD9cIiNkZWZpbmUgRkxJUF9TSURFRFwiOlwiXCIsbi5zaGFkb3dNYXBFbmFibGVkP1wiI2RlZmluZSBVU0VfU0hBRE9XTUFQXCI6XCJcIixuLnNoYWRvd01hcEVuYWJsZWQ/XCIjZGVmaW5lIFwiK2M6XCJcIixuLnNpemVBdHRlbnVhdGlvbj9cIiNkZWZpbmUgVVNFX1NJWkVBVFRFTlVBVElPTlwiOlwiXCIsbi5sb2dhcml0aG1pY0RlcHRoQnVmZmVyP1wiI2RlZmluZSBVU0VfTE9HREVQVEhCVUZcIjpcIlwiLG4ubG9nYXJpdGhtaWNEZXB0aEJ1ZmZlciYmbi5yZW5kZXJlckV4dGVuc2lvbkZyYWdEZXB0aD9cIiNkZWZpbmUgVVNFX0xPR0RFUFRIQlVGX0VYVFwiOlwiXCIsXCJ1bmlmb3JtIG1hdDQgbW9kZWxNYXRyaXg7XCIsXCJ1bmlmb3JtIG1hdDQgbW9kZWxWaWV3TWF0cml4O1wiLFwidW5pZm9ybSBtYXQ0IHByb2plY3Rpb25NYXRyaXg7XCIsXCJ1bmlmb3JtIG1hdDQgdmlld01hdHJpeDtcIixcInVuaWZvcm0gbWF0MyBub3JtYWxNYXRyaXg7XCIsXCJ1bmlmb3JtIHZlYzMgY2FtZXJhUG9zaXRpb247XCIsXCJ1bmlmb3JtIGJvb2wgaXNPcnRob2dyYXBoaWM7XCIsXCIjaWZkZWYgVVNFX0lOU1RBTkNJTkdcIixcIlxcdGF0dHJpYnV0ZSBtYXQ0IGluc3RhbmNlTWF0cml4O1wiLFwiI2VuZGlmXCIsXCIjaWZkZWYgVVNFX0lOU1RBTkNJTkdfQ09MT1JcIixcIlxcdGF0dHJpYnV0ZSB2ZWMzIGluc3RhbmNlQ29sb3I7XCIsXCIjZW5kaWZcIixcImF0dHJpYnV0ZSB2ZWMzIHBvc2l0aW9uO1wiLFwiYXR0cmlidXRlIHZlYzMgbm9ybWFsO1wiLFwiYXR0cmlidXRlIHZlYzIgdXY7XCIsXCIjaWZkZWYgVVNFX1RBTkdFTlRcIixcIlxcdGF0dHJpYnV0ZSB2ZWM0IHRhbmdlbnQ7XCIsXCIjZW5kaWZcIixcIiNpZmRlZiBVU0VfQ09MT1JcIixcIlxcdGF0dHJpYnV0ZSB2ZWMzIGNvbG9yO1wiLFwiI2VuZGlmXCIsXCIjaWZkZWYgVVNFX01PUlBIVEFSR0VUU1wiLFwiXFx0YXR0cmlidXRlIHZlYzMgbW9ycGhUYXJnZXQwO1wiLFwiXFx0YXR0cmlidXRlIHZlYzMgbW9ycGhUYXJnZXQxO1wiLFwiXFx0YXR0cmlidXRlIHZlYzMgbW9ycGhUYXJnZXQyO1wiLFwiXFx0YXR0cmlidXRlIHZlYzMgbW9ycGhUYXJnZXQzO1wiLFwiXFx0I2lmZGVmIFVTRV9NT1JQSE5PUk1BTFNcIixcIlxcdFxcdGF0dHJpYnV0ZSB2ZWMzIG1vcnBoTm9ybWFsMDtcIixcIlxcdFxcdGF0dHJpYnV0ZSB2ZWMzIG1vcnBoTm9ybWFsMTtcIixcIlxcdFxcdGF0dHJpYnV0ZSB2ZWMzIG1vcnBoTm9ybWFsMjtcIixcIlxcdFxcdGF0dHJpYnV0ZSB2ZWMzIG1vcnBoTm9ybWFsMztcIixcIlxcdCNlbHNlXCIsXCJcXHRcXHRhdHRyaWJ1dGUgdmVjMyBtb3JwaFRhcmdldDQ7XCIsXCJcXHRcXHRhdHRyaWJ1dGUgdmVjMyBtb3JwaFRhcmdldDU7XCIsXCJcXHRcXHRhdHRyaWJ1dGUgdmVjMyBtb3JwaFRhcmdldDY7XCIsXCJcXHRcXHRhdHRyaWJ1dGUgdmVjMyBtb3JwaFRhcmdldDc7XCIsXCJcXHQjZW5kaWZcIixcIiNlbmRpZlwiLFwiI2lmZGVmIFVTRV9TS0lOTklOR1wiLFwiXFx0YXR0cmlidXRlIHZlYzQgc2tpbkluZGV4O1wiLFwiXFx0YXR0cmlidXRlIHZlYzQgc2tpbldlaWdodDtcIixcIiNlbmRpZlwiLFwiXFxuXCJdLmZpbHRlcigkYSkuam9pbihcIlxcblwiKSxiPVtnLHVzKG4pLFwiI2RlZmluZSBTSEFERVJfTkFNRSBcIituLnNoYWRlck5hbWUsdixuLmFscGhhVGVzdD9cIiNkZWZpbmUgQUxQSEFURVNUIFwiK24uYWxwaGFUZXN0KyhuLmFscGhhVGVzdCUxP1wiXCI6XCIuMFwiKTpcIlwiLFwiI2RlZmluZSBHQU1NQV9GQUNUT1IgXCIrbSxuLnVzZUZvZyYmbi5mb2c/XCIjZGVmaW5lIFVTRV9GT0dcIjpcIlwiLG4udXNlRm9nJiZuLmZvZ0V4cDI/XCIjZGVmaW5lIEZPR19FWFAyXCI6XCJcIixuLm1hcD9cIiNkZWZpbmUgVVNFX01BUFwiOlwiXCIsbi5tYXRjYXA/XCIjZGVmaW5lIFVTRV9NQVRDQVBcIjpcIlwiLG4uZW52TWFwP1wiI2RlZmluZSBVU0VfRU5WTUFQXCI6XCJcIixuLmVudk1hcD9cIiNkZWZpbmUgXCIrbDpcIlwiLG4uZW52TWFwP1wiI2RlZmluZSBcIit1OlwiXCIsbi5lbnZNYXA/XCIjZGVmaW5lIFwiK2Y6XCJcIixuLmxpZ2h0TWFwP1wiI2RlZmluZSBVU0VfTElHSFRNQVBcIjpcIlwiLG4uYW9NYXA/XCIjZGVmaW5lIFVTRV9BT01BUFwiOlwiXCIsbi5lbWlzc2l2ZU1hcD9cIiNkZWZpbmUgVVNFX0VNSVNTSVZFTUFQXCI6XCJcIixuLmJ1bXBNYXA/XCIjZGVmaW5lIFVTRV9CVU1QTUFQXCI6XCJcIixuLm5vcm1hbE1hcD9cIiNkZWZpbmUgVVNFX05PUk1BTE1BUFwiOlwiXCIsbi5ub3JtYWxNYXAmJm4ub2JqZWN0U3BhY2VOb3JtYWxNYXA/XCIjZGVmaW5lIE9CSkVDVFNQQUNFX05PUk1BTE1BUFwiOlwiXCIsbi5ub3JtYWxNYXAmJm4udGFuZ2VudFNwYWNlTm9ybWFsTWFwP1wiI2RlZmluZSBUQU5HRU5UU1BBQ0VfTk9STUFMTUFQXCI6XCJcIixuLmNsZWFyY29hdE1hcD9cIiNkZWZpbmUgVVNFX0NMRUFSQ09BVE1BUFwiOlwiXCIsbi5jbGVhcmNvYXRSb3VnaG5lc3NNYXA/XCIjZGVmaW5lIFVTRV9DTEVBUkNPQVRfUk9VR0hORVNTTUFQXCI6XCJcIixuLmNsZWFyY29hdE5vcm1hbE1hcD9cIiNkZWZpbmUgVVNFX0NMRUFSQ09BVF9OT1JNQUxNQVBcIjpcIlwiLG4uc3BlY3VsYXJNYXA/XCIjZGVmaW5lIFVTRV9TUEVDVUxBUk1BUFwiOlwiXCIsbi5yb3VnaG5lc3NNYXA/XCIjZGVmaW5lIFVTRV9ST1VHSE5FU1NNQVBcIjpcIlwiLG4ubWV0YWxuZXNzTWFwP1wiI2RlZmluZSBVU0VfTUVUQUxORVNTTUFQXCI6XCJcIixuLmFscGhhTWFwP1wiI2RlZmluZSBVU0VfQUxQSEFNQVBcIjpcIlwiLG4uc2hlZW4/XCIjZGVmaW5lIFVTRV9TSEVFTlwiOlwiXCIsbi50cmFuc21pc3Npb25NYXA/XCIjZGVmaW5lIFVTRV9UUkFOU01JU1NJT05NQVBcIjpcIlwiLG4udmVydGV4VGFuZ2VudHM/XCIjZGVmaW5lIFVTRV9UQU5HRU5UXCI6XCJcIixuLnZlcnRleENvbG9yc3x8bi5pbnN0YW5jaW5nQ29sb3I/XCIjZGVmaW5lIFVTRV9DT0xPUlwiOlwiXCIsbi52ZXJ0ZXhVdnM/XCIjZGVmaW5lIFVTRV9VVlwiOlwiXCIsbi51dnNWZXJ0ZXhPbmx5P1wiI2RlZmluZSBVVlNfVkVSVEVYX09OTFlcIjpcIlwiLG4uZ3JhZGllbnRNYXA/XCIjZGVmaW5lIFVTRV9HUkFESUVOVE1BUFwiOlwiXCIsbi5mbGF0U2hhZGluZz9cIiNkZWZpbmUgRkxBVF9TSEFERURcIjpcIlwiLG4uZG91YmxlU2lkZWQ/XCIjZGVmaW5lIERPVUJMRV9TSURFRFwiOlwiXCIsbi5mbGlwU2lkZWQ/XCIjZGVmaW5lIEZMSVBfU0lERURcIjpcIlwiLG4uc2hhZG93TWFwRW5hYmxlZD9cIiNkZWZpbmUgVVNFX1NIQURPV01BUFwiOlwiXCIsbi5zaGFkb3dNYXBFbmFibGVkP1wiI2RlZmluZSBcIitjOlwiXCIsbi5wcmVtdWx0aXBsaWVkQWxwaGE/XCIjZGVmaW5lIFBSRU1VTFRJUExJRURfQUxQSEFcIjpcIlwiLG4ucGh5c2ljYWxseUNvcnJlY3RMaWdodHM/XCIjZGVmaW5lIFBIWVNJQ0FMTFlfQ09SUkVDVF9MSUdIVFNcIjpcIlwiLG4ubG9nYXJpdGhtaWNEZXB0aEJ1ZmZlcj9cIiNkZWZpbmUgVVNFX0xPR0RFUFRIQlVGXCI6XCJcIixuLmxvZ2FyaXRobWljRGVwdGhCdWZmZXImJm4ucmVuZGVyZXJFeHRlbnNpb25GcmFnRGVwdGg/XCIjZGVmaW5lIFVTRV9MT0dERVBUSEJVRl9FWFRcIjpcIlwiLChuLmV4dGVuc2lvblNoYWRlclRleHR1cmVMT0R8fG4uZW52TWFwKSYmbi5yZW5kZXJlckV4dGVuc2lvblNoYWRlclRleHR1cmVMb2Q/XCIjZGVmaW5lIFRFWFRVUkVfTE9EX0VYVFwiOlwiXCIsXCJ1bmlmb3JtIG1hdDQgdmlld01hdHJpeDtcIixcInVuaWZvcm0gdmVjMyBjYW1lcmFQb3NpdGlvbjtcIixcInVuaWZvcm0gYm9vbCBpc09ydGhvZ3JhcGhpYztcIixuLnRvbmVNYXBwaW5nIT09UT9cIiNkZWZpbmUgVE9ORV9NQVBQSU5HXCI6XCJcIixuLnRvbmVNYXBwaW5nIT09UT9Jby50b25lbWFwcGluZ19wYXJzX2ZyYWdtZW50OlwiXCIsbi50b25lTWFwcGluZyE9PVE/UWEoXCJ0b25lTWFwcGluZ1wiLG4udG9uZU1hcHBpbmcpOlwiXCIsbi5kaXRoZXJpbmc/XCIjZGVmaW5lIERJVEhFUklOR1wiOlwiXCIsSW8uZW5jb2RpbmdzX3BhcnNfZnJhZ21lbnQsbi5tYXA/SmEoXCJtYXBUZXhlbFRvTGluZWFyXCIsbi5tYXBFbmNvZGluZyk6XCJcIixuLm1hdGNhcD9KYShcIm1hdGNhcFRleGVsVG9MaW5lYXJcIixuLm1hdGNhcEVuY29kaW5nKTpcIlwiLG4uZW52TWFwP0phKFwiZW52TWFwVGV4ZWxUb0xpbmVhclwiLG4uZW52TWFwRW5jb2RpbmcpOlwiXCIsbi5lbWlzc2l2ZU1hcD9KYShcImVtaXNzaXZlTWFwVGV4ZWxUb0xpbmVhclwiLG4uZW1pc3NpdmVNYXBFbmNvZGluZyk6XCJcIixuLmxpZ2h0TWFwP0phKFwibGlnaHRNYXBUZXhlbFRvTGluZWFyXCIsbi5saWdodE1hcEVuY29kaW5nKTpcIlwiLEthKFwibGluZWFyVG9PdXRwdXRUZXhlbFwiLG4ub3V0cHV0RW5jb2RpbmcpLG4uZGVwdGhQYWNraW5nP1wiI2RlZmluZSBERVBUSF9QQUNLSU5HIFwiK24uZGVwdGhQYWNraW5nOlwiXCIsXCJcXG5cIl0uZmlsdGVyKCRhKS5qb2luKFwiXFxuXCIpKSxhPXJzKGEpLGE9dHMoYSxuKSxhPWVzKGEsbikscz1ycyhzKSxzPXRzKHMsbikscz1lcyhzLG4pLGE9c3MoYSkscz1zcyhzKSxuLmlzV2ViR0wyJiYhMCE9PW4uaXNSYXdTaGFkZXJNYXRlcmlhbCYmKHc9XCIjdmVyc2lvbiAzMDAgZXNcXG5cIix4PVtcIiNkZWZpbmUgYXR0cmlidXRlIGluXCIsXCIjZGVmaW5lIHZhcnlpbmcgb3V0XCIsXCIjZGVmaW5lIHRleHR1cmUyRCB0ZXh0dXJlXCJdLmpvaW4oXCJcXG5cIikrXCJcXG5cIit4LGI9W1wiI2RlZmluZSB2YXJ5aW5nIGluXCIsbi5nbHNsVmVyc2lvbj09PURuP1wiXCI6XCJvdXQgaGlnaHAgdmVjNCBwY19mcmFnQ29sb3I7XCIsbi5nbHNsVmVyc2lvbj09PURuP1wiXCI6XCIjZGVmaW5lIGdsX0ZyYWdDb2xvciBwY19mcmFnQ29sb3JcIixcIiNkZWZpbmUgZ2xfRnJhZ0RlcHRoRVhUIGdsX0ZyYWdEZXB0aFwiLFwiI2RlZmluZSB0ZXh0dXJlMkQgdGV4dHVyZVwiLFwiI2RlZmluZSB0ZXh0dXJlQ3ViZSB0ZXh0dXJlXCIsXCIjZGVmaW5lIHRleHR1cmUyRFByb2ogdGV4dHVyZVByb2pcIixcIiNkZWZpbmUgdGV4dHVyZTJETG9kRVhUIHRleHR1cmVMb2RcIixcIiNkZWZpbmUgdGV4dHVyZTJEUHJvakxvZEVYVCB0ZXh0dXJlUHJvakxvZFwiLFwiI2RlZmluZSB0ZXh0dXJlQ3ViZUxvZEVYVCB0ZXh0dXJlTG9kXCIsXCIjZGVmaW5lIHRleHR1cmUyREdyYWRFWFQgdGV4dHVyZUdyYWRcIixcIiNkZWZpbmUgdGV4dHVyZTJEUHJvakdyYWRFWFQgdGV4dHVyZVByb2pHcmFkXCIsXCIjZGVmaW5lIHRleHR1cmVDdWJlR3JhZEVYVCB0ZXh0dXJlR3JhZFwiXS5qb2luKFwiXFxuXCIpK1wiXFxuXCIrYik7Y29uc3QgXz13K2IrcyxNPVhhKGksMzU2MzMsdyt4K2EpLFM9WGEoaSwzNTYzMixfKTtpZihpLmF0dGFjaFNoYWRlcih5LE0pLGkuYXR0YWNoU2hhZGVyKHksUyksdm9pZCAwIT09bi5pbmRleDBBdHRyaWJ1dGVOYW1lP2kuYmluZEF0dHJpYkxvY2F0aW9uKHksMCxuLmluZGV4MEF0dHJpYnV0ZU5hbWUpOiEwPT09bi5tb3JwaFRhcmdldHMmJmkuYmluZEF0dHJpYkxvY2F0aW9uKHksMCxcInBvc2l0aW9uXCIpLGkubGlua1Byb2dyYW0oeSksdC5kZWJ1Zy5jaGVja1NoYWRlckVycm9ycyl7Y29uc3QgdD1pLmdldFByb2dyYW1JbmZvTG9nKHkpLnRyaW0oKSxlPWkuZ2V0U2hhZGVySW5mb0xvZyhNKS50cmltKCksbj1pLmdldFNoYWRlckluZm9Mb2coUykudHJpbSgpO2xldCByPSEwLG89ITA7aWYoITE9PT1pLmdldFByb2dyYW1QYXJhbWV0ZXIoeSwzNTcxNCkpe3I9ITE7Y29uc3QgZT1aYShpLE0sXCJ2ZXJ0ZXhcIiksbj1aYShpLFMsXCJmcmFnbWVudFwiKTtjb25zb2xlLmVycm9yKFwiVEhSRUUuV2ViR0xQcm9ncmFtOiBzaGFkZXIgZXJyb3I6IFwiLGkuZ2V0RXJyb3IoKSxcIjM1NzE1XCIsaS5nZXRQcm9ncmFtUGFyYW1ldGVyKHksMzU3MTUpLFwiZ2wuZ2V0UHJvZ3JhbUluZm9Mb2dcIix0LGUsbil9ZWxzZVwiXCIhPT10P2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUHJvZ3JhbTogZ2wuZ2V0UHJvZ3JhbUluZm9Mb2coKVwiLHQpOlwiXCIhPT1lJiZcIlwiIT09bnx8KG89ITEpO28mJih0aGlzLmRpYWdub3N0aWNzPXtydW5uYWJsZTpyLHByb2dyYW1Mb2c6dCx2ZXJ0ZXhTaGFkZXI6e2xvZzplLHByZWZpeDp4fSxmcmFnbWVudFNoYWRlcjp7bG9nOm4scHJlZml4OmJ9fSl9bGV0IFQsRTtyZXR1cm4gaS5kZWxldGVTaGFkZXIoTSksaS5kZWxldGVTaGFkZXIoUyksdGhpcy5nZXRVbmlmb3Jtcz1mdW5jdGlvbigpe3JldHVybiB2b2lkIDA9PT1UJiYoVD1uZXcgV2EoaSx5KSksVH0sdGhpcy5nZXRBdHRyaWJ1dGVzPWZ1bmN0aW9uKCl7cmV0dXJuIHZvaWQgMD09PUUmJihFPWZ1bmN0aW9uKHQsZSl7Y29uc3Qgbj17fSxyPXQuZ2V0UHJvZ3JhbVBhcmFtZXRlcihlLDM1NzIxKTtmb3IobGV0IGk9MDtpPHI7aSsrKXtjb25zdCByPXQuZ2V0QWN0aXZlQXR0cmliKGUsaSkubmFtZTtuW3JdPXQuZ2V0QXR0cmliTG9jYXRpb24oZSxyKX1yZXR1cm4gbn0oaSx5KSksRX0sdGhpcy5kZXN0cm95PWZ1bmN0aW9uKCl7ci5yZWxlYXNlU3RhdGVzT2ZQcm9ncmFtKHRoaXMpLGkuZGVsZXRlUHJvZ3JhbSh5KSx0aGlzLnByb2dyYW09dm9pZCAwfSx0aGlzLm5hbWU9bi5zaGFkZXJOYW1lLHRoaXMuaWQ9cWErKyx0aGlzLmNhY2hlS2V5PWUsdGhpcy51c2VkVGltZXM9MSx0aGlzLnByb2dyYW09eSx0aGlzLnZlcnRleFNoYWRlcj1NLHRoaXMuZnJhZ21lbnRTaGFkZXI9Uyx0aGlzfWZ1bmN0aW9uIGRzKHQsZSxuLHIsaSxvKXtjb25zdCBhPVtdLHM9ci5pc1dlYkdMMixjPXIubG9nYXJpdGhtaWNEZXB0aEJ1ZmZlcixsPXIuZmxvYXRWZXJ0ZXhUZXh0dXJlcyx1PXIubWF4VmVydGV4VW5pZm9ybXMsaD1yLnZlcnRleFRleHR1cmVzO2xldCBkPXIucHJlY2lzaW9uO2NvbnN0IHA9e01lc2hEZXB0aE1hdGVyaWFsOlwiZGVwdGhcIixNZXNoRGlzdGFuY2VNYXRlcmlhbDpcImRpc3RhbmNlUkdCQVwiLE1lc2hOb3JtYWxNYXRlcmlhbDpcIm5vcm1hbFwiLE1lc2hCYXNpY01hdGVyaWFsOlwiYmFzaWNcIixNZXNoTGFtYmVydE1hdGVyaWFsOlwibGFtYmVydFwiLE1lc2hQaG9uZ01hdGVyaWFsOlwicGhvbmdcIixNZXNoVG9vbk1hdGVyaWFsOlwidG9vblwiLE1lc2hTdGFuZGFyZE1hdGVyaWFsOlwicGh5c2ljYWxcIixNZXNoUGh5c2ljYWxNYXRlcmlhbDpcInBoeXNpY2FsXCIsTWVzaE1hdGNhcE1hdGVyaWFsOlwibWF0Y2FwXCIsTGluZUJhc2ljTWF0ZXJpYWw6XCJiYXNpY1wiLExpbmVEYXNoZWRNYXRlcmlhbDpcImRhc2hlZFwiLFBvaW50c01hdGVyaWFsOlwicG9pbnRzXCIsU2hhZG93TWF0ZXJpYWw6XCJzaGFkb3dcIixTcHJpdGVNYXRlcmlhbDpcInNwcml0ZVwifSxmPVtcInByZWNpc2lvblwiLFwiaXNXZWJHTDJcIixcInN1cHBvcnRzVmVydGV4VGV4dHVyZXNcIixcIm91dHB1dEVuY29kaW5nXCIsXCJpbnN0YW5jaW5nXCIsXCJpbnN0YW5jaW5nQ29sb3JcIixcIm1hcFwiLFwibWFwRW5jb2RpbmdcIixcIm1hdGNhcFwiLFwibWF0Y2FwRW5jb2RpbmdcIixcImVudk1hcFwiLFwiZW52TWFwTW9kZVwiLFwiZW52TWFwRW5jb2RpbmdcIixcImVudk1hcEN1YmVVVlwiLFwibGlnaHRNYXBcIixcImxpZ2h0TWFwRW5jb2RpbmdcIixcImFvTWFwXCIsXCJlbWlzc2l2ZU1hcFwiLFwiZW1pc3NpdmVNYXBFbmNvZGluZ1wiLFwiYnVtcE1hcFwiLFwibm9ybWFsTWFwXCIsXCJvYmplY3RTcGFjZU5vcm1hbE1hcFwiLFwidGFuZ2VudFNwYWNlTm9ybWFsTWFwXCIsXCJjbGVhcmNvYXRNYXBcIixcImNsZWFyY29hdFJvdWdobmVzc01hcFwiLFwiY2xlYXJjb2F0Tm9ybWFsTWFwXCIsXCJkaXNwbGFjZW1lbnRNYXBcIixcInNwZWN1bGFyTWFwXCIsXCJyb3VnaG5lc3NNYXBcIixcIm1ldGFsbmVzc01hcFwiLFwiZ3JhZGllbnRNYXBcIixcImFscGhhTWFwXCIsXCJjb21iaW5lXCIsXCJ2ZXJ0ZXhDb2xvcnNcIixcInZlcnRleFRhbmdlbnRzXCIsXCJ2ZXJ0ZXhVdnNcIixcInV2c1ZlcnRleE9ubHlcIixcImZvZ1wiLFwidXNlRm9nXCIsXCJmb2dFeHAyXCIsXCJmbGF0U2hhZGluZ1wiLFwic2l6ZUF0dGVudWF0aW9uXCIsXCJsb2dhcml0aG1pY0RlcHRoQnVmZmVyXCIsXCJza2lubmluZ1wiLFwibWF4Qm9uZXNcIixcInVzZVZlcnRleFRleHR1cmVcIixcIm1vcnBoVGFyZ2V0c1wiLFwibW9ycGhOb3JtYWxzXCIsXCJtYXhNb3JwaFRhcmdldHNcIixcIm1heE1vcnBoTm9ybWFsc1wiLFwicHJlbXVsdGlwbGllZEFscGhhXCIsXCJudW1EaXJMaWdodHNcIixcIm51bVBvaW50TGlnaHRzXCIsXCJudW1TcG90TGlnaHRzXCIsXCJudW1IZW1pTGlnaHRzXCIsXCJudW1SZWN0QXJlYUxpZ2h0c1wiLFwibnVtRGlyTGlnaHRTaGFkb3dzXCIsXCJudW1Qb2ludExpZ2h0U2hhZG93c1wiLFwibnVtU3BvdExpZ2h0U2hhZG93c1wiLFwic2hhZG93TWFwRW5hYmxlZFwiLFwic2hhZG93TWFwVHlwZVwiLFwidG9uZU1hcHBpbmdcIixcInBoeXNpY2FsbHlDb3JyZWN0TGlnaHRzXCIsXCJhbHBoYVRlc3RcIixcImRvdWJsZVNpZGVkXCIsXCJmbGlwU2lkZWRcIixcIm51bUNsaXBwaW5nUGxhbmVzXCIsXCJudW1DbGlwSW50ZXJzZWN0aW9uXCIsXCJkZXB0aFBhY2tpbmdcIixcImRpdGhlcmluZ1wiLFwic2hlZW5cIixcInRyYW5zbWlzc2lvbk1hcFwiXTtmdW5jdGlvbiB2KHQpe2xldCBlO3JldHVybiB0P3QuaXNUZXh0dXJlP2U9dC5lbmNvZGluZzp0LmlzV2ViR0xSZW5kZXJUYXJnZXQmJihjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFByb2dyYW1zLmdldFRleHR1cmVFbmNvZGluZ0Zyb21NYXA6IGRvbid0IHVzZSByZW5kZXIgdGFyZ2V0cyBhcyB0ZXh0dXJlcy4gVXNlIHRoZWlyIC50ZXh0dXJlIHByb3BlcnR5IGluc3RlYWQuXCIpLGU9dC50ZXh0dXJlLmVuY29kaW5nKTplPUplLGV9cmV0dXJue2dldFBhcmFtZXRlcnM6ZnVuY3Rpb24oaSxhLGYseSx4KXtjb25zdCBiPXkuZm9nLHc9aS5pc01lc2hTdGFuZGFyZE1hdGVyaWFsP3kuZW52aXJvbm1lbnQ6bnVsbCxfPWUuZ2V0KGkuZW52TWFwfHx3KSxNPXBbaS50eXBlXSxTPXguaXNTa2lubmVkTWVzaD9mdW5jdGlvbih0KXtjb25zdCBlPXQuc2tlbGV0b24uYm9uZXM7aWYobClyZXR1cm4gMTAyNDt7Y29uc3QgdD11LG49TWF0aC5mbG9vcigodC0yMCkvNCkscj1NYXRoLm1pbihuLGUubGVuZ3RoKTtyZXR1cm4gcjxlLmxlbmd0aD8oY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogU2tlbGV0b24gaGFzIFwiK2UubGVuZ3RoK1wiIGJvbmVzLiBUaGlzIEdQVSBzdXBwb3J0cyBcIityK1wiLlwiKSwwKTpyfX0oeCk6MDtsZXQgVCxFO2lmKG51bGwhPT1pLnByZWNpc2lvbiYmKGQ9ci5nZXRNYXhQcmVjaXNpb24oaS5wcmVjaXNpb24pLGQhPT1pLnByZWNpc2lvbiYmY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xQcm9ncmFtLmdldFBhcmFtZXRlcnM6XCIsaS5wcmVjaXNpb24sXCJub3Qgc3VwcG9ydGVkLCB1c2luZ1wiLGQsXCJpbnN0ZWFkLlwiKSksTSl7Y29uc3QgdD1Ob1tNXTtUPXQudmVydGV4U2hhZGVyLEU9dC5mcmFnbWVudFNoYWRlcn1lbHNlIFQ9aS52ZXJ0ZXhTaGFkZXIsRT1pLmZyYWdtZW50U2hhZGVyO2NvbnN0IEE9dC5nZXRSZW5kZXJUYXJnZXQoKTtyZXR1cm57aXNXZWJHTDI6cyxzaGFkZXJJRDpNLHNoYWRlck5hbWU6aS50eXBlLHZlcnRleFNoYWRlcjpULGZyYWdtZW50U2hhZGVyOkUsZGVmaW5lczppLmRlZmluZXMsaXNSYXdTaGFkZXJNYXRlcmlhbDohMD09PWkuaXNSYXdTaGFkZXJNYXRlcmlhbCxnbHNsVmVyc2lvbjppLmdsc2xWZXJzaW9uLHByZWNpc2lvbjpkLGluc3RhbmNpbmc6ITA9PT14LmlzSW5zdGFuY2VkTWVzaCxpbnN0YW5jaW5nQ29sb3I6ITA9PT14LmlzSW5zdGFuY2VkTWVzaCYmbnVsbCE9PXguaW5zdGFuY2VDb2xvcixzdXBwb3J0c1ZlcnRleFRleHR1cmVzOmgsb3V0cHV0RW5jb2Rpbmc6bnVsbCE9PUE/dihBLnRleHR1cmUpOnQub3V0cHV0RW5jb2RpbmcsbWFwOiEhaS5tYXAsbWFwRW5jb2Rpbmc6dihpLm1hcCksbWF0Y2FwOiEhaS5tYXRjYXAsbWF0Y2FwRW5jb2Rpbmc6dihpLm1hdGNhcCksZW52TWFwOiEhXyxlbnZNYXBNb2RlOl8mJl8ubWFwcGluZyxlbnZNYXBFbmNvZGluZzp2KF8pLGVudk1hcEN1YmVVVjohIV8mJihfLm1hcHBpbmc9PT1sdHx8Xy5tYXBwaW5nPT09dXQpLGxpZ2h0TWFwOiEhaS5saWdodE1hcCxsaWdodE1hcEVuY29kaW5nOnYoaS5saWdodE1hcCksYW9NYXA6ISFpLmFvTWFwLGVtaXNzaXZlTWFwOiEhaS5lbWlzc2l2ZU1hcCxlbWlzc2l2ZU1hcEVuY29kaW5nOnYoaS5lbWlzc2l2ZU1hcCksYnVtcE1hcDohIWkuYnVtcE1hcCxub3JtYWxNYXA6ISFpLm5vcm1hbE1hcCxvYmplY3RTcGFjZU5vcm1hbE1hcDppLm5vcm1hbE1hcFR5cGU9PT1jbix0YW5nZW50U3BhY2VOb3JtYWxNYXA6aS5ub3JtYWxNYXBUeXBlPT09c24sY2xlYXJjb2F0TWFwOiEhaS5jbGVhcmNvYXRNYXAsY2xlYXJjb2F0Um91Z2huZXNzTWFwOiEhaS5jbGVhcmNvYXRSb3VnaG5lc3NNYXAsY2xlYXJjb2F0Tm9ybWFsTWFwOiEhaS5jbGVhcmNvYXROb3JtYWxNYXAsZGlzcGxhY2VtZW50TWFwOiEhaS5kaXNwbGFjZW1lbnRNYXAscm91Z2huZXNzTWFwOiEhaS5yb3VnaG5lc3NNYXAsbWV0YWxuZXNzTWFwOiEhaS5tZXRhbG5lc3NNYXAsc3BlY3VsYXJNYXA6ISFpLnNwZWN1bGFyTWFwLGFscGhhTWFwOiEhaS5hbHBoYU1hcCxncmFkaWVudE1hcDohIWkuZ3JhZGllbnRNYXAsc2hlZW46ISFpLnNoZWVuLHRyYW5zbWlzc2lvbk1hcDohIWkudHJhbnNtaXNzaW9uTWFwLGNvbWJpbmU6aS5jb21iaW5lLHZlcnRleFRhbmdlbnRzOmkubm9ybWFsTWFwJiZpLnZlcnRleFRhbmdlbnRzLHZlcnRleENvbG9yczppLnZlcnRleENvbG9ycyx2ZXJ0ZXhVdnM6ISEoaS5tYXB8fGkuYnVtcE1hcHx8aS5ub3JtYWxNYXB8fGkuc3BlY3VsYXJNYXB8fGkuYWxwaGFNYXB8fGkuZW1pc3NpdmVNYXB8fGkucm91Z2huZXNzTWFwfHxpLm1ldGFsbmVzc01hcHx8aS5jbGVhcmNvYXRNYXB8fGkuY2xlYXJjb2F0Um91Z2huZXNzTWFwfHxpLmNsZWFyY29hdE5vcm1hbE1hcHx8aS5kaXNwbGFjZW1lbnRNYXB8fGkudHJhbnNtaXNzaW9uTWFwKSx1dnNWZXJ0ZXhPbmx5OiEoaS5tYXB8fGkuYnVtcE1hcHx8aS5ub3JtYWxNYXB8fGkuc3BlY3VsYXJNYXB8fGkuYWxwaGFNYXB8fGkuZW1pc3NpdmVNYXB8fGkucm91Z2huZXNzTWFwfHxpLm1ldGFsbmVzc01hcHx8aS5jbGVhcmNvYXROb3JtYWxNYXB8fGkudHJhbnNtaXNzaW9uTWFwfHwhaS5kaXNwbGFjZW1lbnRNYXApLGZvZzohIWIsdXNlRm9nOmkuZm9nLGZvZ0V4cDI6YiYmYi5pc0ZvZ0V4cDIsZmxhdFNoYWRpbmc6aS5mbGF0U2hhZGluZyxzaXplQXR0ZW51YXRpb246aS5zaXplQXR0ZW51YXRpb24sbG9nYXJpdGhtaWNEZXB0aEJ1ZmZlcjpjLHNraW5uaW5nOmkuc2tpbm5pbmcmJlM+MCxtYXhCb25lczpTLHVzZVZlcnRleFRleHR1cmU6bCxtb3JwaFRhcmdldHM6aS5tb3JwaFRhcmdldHMsbW9ycGhOb3JtYWxzOmkubW9ycGhOb3JtYWxzLG1heE1vcnBoVGFyZ2V0czp0Lm1heE1vcnBoVGFyZ2V0cyxtYXhNb3JwaE5vcm1hbHM6dC5tYXhNb3JwaE5vcm1hbHMsbnVtRGlyTGlnaHRzOmEuZGlyZWN0aW9uYWwubGVuZ3RoLG51bVBvaW50TGlnaHRzOmEucG9pbnQubGVuZ3RoLG51bVNwb3RMaWdodHM6YS5zcG90Lmxlbmd0aCxudW1SZWN0QXJlYUxpZ2h0czphLnJlY3RBcmVhLmxlbmd0aCxudW1IZW1pTGlnaHRzOmEuaGVtaS5sZW5ndGgsbnVtRGlyTGlnaHRTaGFkb3dzOmEuZGlyZWN0aW9uYWxTaGFkb3dNYXAubGVuZ3RoLG51bVBvaW50TGlnaHRTaGFkb3dzOmEucG9pbnRTaGFkb3dNYXAubGVuZ3RoLG51bVNwb3RMaWdodFNoYWRvd3M6YS5zcG90U2hhZG93TWFwLmxlbmd0aCxudW1DbGlwcGluZ1BsYW5lczpvLm51bVBsYW5lcyxudW1DbGlwSW50ZXJzZWN0aW9uOm8ubnVtSW50ZXJzZWN0aW9uLGRpdGhlcmluZzppLmRpdGhlcmluZyxzaGFkb3dNYXBFbmFibGVkOnQuc2hhZG93TWFwLmVuYWJsZWQmJmYubGVuZ3RoPjAsc2hhZG93TWFwVHlwZTp0LnNoYWRvd01hcC50eXBlLHRvbmVNYXBwaW5nOmkudG9uZU1hcHBlZD90LnRvbmVNYXBwaW5nOlEscGh5c2ljYWxseUNvcnJlY3RMaWdodHM6dC5waHlzaWNhbGx5Q29ycmVjdExpZ2h0cyxwcmVtdWx0aXBsaWVkQWxwaGE6aS5wcmVtdWx0aXBsaWVkQWxwaGEsYWxwaGFUZXN0OmkuYWxwaGFUZXN0LGRvdWJsZVNpZGVkOmkuc2lkZT09PWcsZmxpcFNpZGVkOmkuc2lkZT09PW0sZGVwdGhQYWNraW5nOnZvaWQgMCE9PWkuZGVwdGhQYWNraW5nJiZpLmRlcHRoUGFja2luZyxpbmRleDBBdHRyaWJ1dGVOYW1lOmkuaW5kZXgwQXR0cmlidXRlTmFtZSxleHRlbnNpb25EZXJpdmF0aXZlczppLmV4dGVuc2lvbnMmJmkuZXh0ZW5zaW9ucy5kZXJpdmF0aXZlcyxleHRlbnNpb25GcmFnRGVwdGg6aS5leHRlbnNpb25zJiZpLmV4dGVuc2lvbnMuZnJhZ0RlcHRoLGV4dGVuc2lvbkRyYXdCdWZmZXJzOmkuZXh0ZW5zaW9ucyYmaS5leHRlbnNpb25zLmRyYXdCdWZmZXJzLGV4dGVuc2lvblNoYWRlclRleHR1cmVMT0Q6aS5leHRlbnNpb25zJiZpLmV4dGVuc2lvbnMuc2hhZGVyVGV4dHVyZUxPRCxyZW5kZXJlckV4dGVuc2lvbkZyYWdEZXB0aDpzfHxuLmhhcyhcIkVYVF9mcmFnX2RlcHRoXCIpLHJlbmRlcmVyRXh0ZW5zaW9uRHJhd0J1ZmZlcnM6c3x8bi5oYXMoXCJXRUJHTF9kcmF3X2J1ZmZlcnNcIikscmVuZGVyZXJFeHRlbnNpb25TaGFkZXJUZXh0dXJlTG9kOnN8fG4uaGFzKFwiRVhUX3NoYWRlcl90ZXh0dXJlX2xvZFwiKSxjdXN0b21Qcm9ncmFtQ2FjaGVLZXk6aS5jdXN0b21Qcm9ncmFtQ2FjaGVLZXkoKX19LGdldFByb2dyYW1DYWNoZUtleTpmdW5jdGlvbihlKXtjb25zdCBuPVtdO2lmKGUuc2hhZGVySUQ/bi5wdXNoKGUuc2hhZGVySUQpOihuLnB1c2goZS5mcmFnbWVudFNoYWRlciksbi5wdXNoKGUudmVydGV4U2hhZGVyKSksdm9pZCAwIT09ZS5kZWZpbmVzKWZvcihjb25zdCB0IGluIGUuZGVmaW5lcyluLnB1c2godCksbi5wdXNoKGUuZGVmaW5lc1t0XSk7aWYoITE9PT1lLmlzUmF3U2hhZGVyTWF0ZXJpYWwpe2ZvcihsZXQgdD0wO3Q8Zi5sZW5ndGg7dCsrKW4ucHVzaChlW2ZbdF1dKTtuLnB1c2godC5vdXRwdXRFbmNvZGluZyksbi5wdXNoKHQuZ2FtbWFGYWN0b3IpfXJldHVybiBuLnB1c2goZS5jdXN0b21Qcm9ncmFtQ2FjaGVLZXkpLG4uam9pbigpfSxnZXRVbmlmb3JtczpmdW5jdGlvbih0KXtjb25zdCBlPXBbdC50eXBlXTtsZXQgbjtpZihlKXtjb25zdCB0PU5vW2VdO249eW8uY2xvbmUodC51bmlmb3Jtcyl9ZWxzZSBuPXQudW5pZm9ybXM7cmV0dXJuIG59LGFjcXVpcmVQcm9ncmFtOmZ1bmN0aW9uKGUsbil7bGV0IHI7Zm9yKGxldCB0PTAsZT1hLmxlbmd0aDt0PGU7dCsrKXtjb25zdCBlPWFbdF07aWYoZS5jYWNoZUtleT09PW4pe3I9ZSwrK3IudXNlZFRpbWVzO2JyZWFrfX1yZXR1cm4gdm9pZCAwPT09ciYmKHI9bmV3IGhzKHQsbixlLGkpLGEucHVzaChyKSkscn0scmVsZWFzZVByb2dyYW06ZnVuY3Rpb24odCl7aWYoMD09LS10LnVzZWRUaW1lcyl7Y29uc3QgZT1hLmluZGV4T2YodCk7YVtlXT1hW2EubGVuZ3RoLTFdLGEucG9wKCksdC5kZXN0cm95KCl9fSxwcm9ncmFtczphfX1mdW5jdGlvbiBwcygpe2xldCB0PW5ldyBXZWFrTWFwO3JldHVybntnZXQ6ZnVuY3Rpb24oZSl7bGV0IG49dC5nZXQoZSk7cmV0dXJuIHZvaWQgMD09PW4mJihuPXt9LHQuc2V0KGUsbikpLG59LHJlbW92ZTpmdW5jdGlvbihlKXt0LmRlbGV0ZShlKX0sdXBkYXRlOmZ1bmN0aW9uKGUsbixyKXt0LmdldChlKVtuXT1yfSxkaXNwb3NlOmZ1bmN0aW9uKCl7dD1uZXcgV2Vha01hcH19fWZ1bmN0aW9uIGZzKHQsZSl7cmV0dXJuIHQuZ3JvdXBPcmRlciE9PWUuZ3JvdXBPcmRlcj90Lmdyb3VwT3JkZXItZS5ncm91cE9yZGVyOnQucmVuZGVyT3JkZXIhPT1lLnJlbmRlck9yZGVyP3QucmVuZGVyT3JkZXItZS5yZW5kZXJPcmRlcjp0LnByb2dyYW0hPT1lLnByb2dyYW0/dC5wcm9ncmFtLmlkLWUucHJvZ3JhbS5pZDp0Lm1hdGVyaWFsLmlkIT09ZS5tYXRlcmlhbC5pZD90Lm1hdGVyaWFsLmlkLWUubWF0ZXJpYWwuaWQ6dC56IT09ZS56P3Quei1lLno6dC5pZC1lLmlkfWZ1bmN0aW9uIG1zKHQsZSl7cmV0dXJuIHQuZ3JvdXBPcmRlciE9PWUuZ3JvdXBPcmRlcj90Lmdyb3VwT3JkZXItZS5ncm91cE9yZGVyOnQucmVuZGVyT3JkZXIhPT1lLnJlbmRlck9yZGVyP3QucmVuZGVyT3JkZXItZS5yZW5kZXJPcmRlcjp0LnohPT1lLno/ZS56LXQuejp0LmlkLWUuaWR9ZnVuY3Rpb24gZ3ModCl7Y29uc3QgZT1bXTtsZXQgbj0wO2NvbnN0IHI9W10saT1bXSxvPXtpZDotMX07ZnVuY3Rpb24gYShyLGksYSxzLGMsbCl7bGV0IHU9ZVtuXTtjb25zdCBoPXQuZ2V0KGEpO3JldHVybiB2b2lkIDA9PT11Pyh1PXtpZDpyLmlkLG9iamVjdDpyLGdlb21ldHJ5OmksbWF0ZXJpYWw6YSxwcm9ncmFtOmgucHJvZ3JhbXx8byxncm91cE9yZGVyOnMscmVuZGVyT3JkZXI6ci5yZW5kZXJPcmRlcix6OmMsZ3JvdXA6bH0sZVtuXT11KToodS5pZD1yLmlkLHUub2JqZWN0PXIsdS5nZW9tZXRyeT1pLHUubWF0ZXJpYWw9YSx1LnByb2dyYW09aC5wcm9ncmFtfHxvLHUuZ3JvdXBPcmRlcj1zLHUucmVuZGVyT3JkZXI9ci5yZW5kZXJPcmRlcix1Lno9Yyx1Lmdyb3VwPWwpLG4rKyx1fXJldHVybntvcGFxdWU6cix0cmFuc3BhcmVudDppLGluaXQ6ZnVuY3Rpb24oKXtuPTAsci5sZW5ndGg9MCxpLmxlbmd0aD0wfSxwdXNoOmZ1bmN0aW9uKHQsZSxuLG8scyxjKXtjb25zdCBsPWEodCxlLG4sbyxzLGMpOyghMD09PW4udHJhbnNwYXJlbnQ/aTpyKS5wdXNoKGwpfSx1bnNoaWZ0OmZ1bmN0aW9uKHQsZSxuLG8scyxjKXtjb25zdCBsPWEodCxlLG4sbyxzLGMpOyghMD09PW4udHJhbnNwYXJlbnQ/aTpyKS51bnNoaWZ0KGwpfSxmaW5pc2g6ZnVuY3Rpb24oKXtmb3IobGV0IHQ9bixyPWUubGVuZ3RoO3Q8cjt0Kyspe2NvbnN0IG49ZVt0XTtpZihudWxsPT09bi5pZClicmVhaztuLmlkPW51bGwsbi5vYmplY3Q9bnVsbCxuLmdlb21ldHJ5PW51bGwsbi5tYXRlcmlhbD1udWxsLG4ucHJvZ3JhbT1udWxsLG4uZ3JvdXA9bnVsbH19LHNvcnQ6ZnVuY3Rpb24odCxlKXtyLmxlbmd0aD4xJiZyLnNvcnQodHx8ZnMpLGkubGVuZ3RoPjEmJmkuc29ydChlfHxtcyl9fX1mdW5jdGlvbiB2cyh0KXtsZXQgZT1uZXcgV2Vha01hcDtyZXR1cm57Z2V0OmZ1bmN0aW9uKG4scil7Y29uc3QgaT1lLmdldChuKTtsZXQgbztyZXR1cm4gdm9pZCAwPT09aT8obz1uZXcgZ3ModCksZS5zZXQobixuZXcgV2Vha01hcCksZS5nZXQobikuc2V0KHIsbykpOihvPWkuZ2V0KHIpLHZvaWQgMD09PW8mJihvPW5ldyBncyh0KSxpLnNldChyLG8pKSksb30sZGlzcG9zZTpmdW5jdGlvbigpe2U9bmV3IFdlYWtNYXB9fX1mdW5jdGlvbiB5cygpe2NvbnN0IHQ9e307cmV0dXJue2dldDpmdW5jdGlvbihlKXtpZih2b2lkIDAhPT10W2UuaWRdKXJldHVybiB0W2UuaWRdO2xldCBuO3N3aXRjaChlLnR5cGUpe2Nhc2VcIkRpcmVjdGlvbmFsTGlnaHRcIjpuPXtkaXJlY3Rpb246bmV3IEtuLGNvbG9yOm5ldyB5aX07YnJlYWs7Y2FzZVwiU3BvdExpZ2h0XCI6bj17cG9zaXRpb246bmV3IEtuLGRpcmVjdGlvbjpuZXcgS24sY29sb3I6bmV3IHlpLGRpc3RhbmNlOjAsY29uZUNvczowLHBlbnVtYnJhQ29zOjAsZGVjYXk6MH07YnJlYWs7Y2FzZVwiUG9pbnRMaWdodFwiOm49e3Bvc2l0aW9uOm5ldyBLbixjb2xvcjpuZXcgeWksZGlzdGFuY2U6MCxkZWNheTowfTticmVhaztjYXNlXCJIZW1pc3BoZXJlTGlnaHRcIjpuPXtkaXJlY3Rpb246bmV3IEtuLHNreUNvbG9yOm5ldyB5aSxncm91bmRDb2xvcjpuZXcgeWl9O2JyZWFrO2Nhc2VcIlJlY3RBcmVhTGlnaHRcIjpuPXtjb2xvcjpuZXcgeWkscG9zaXRpb246bmV3IEtuLGhhbGZXaWR0aDpuZXcgS24saGFsZkhlaWdodDpuZXcgS259fXJldHVybiB0W2UuaWRdPW4sbn19fWxldCB4cz0wO2Z1bmN0aW9uIGJzKHQsZSl7cmV0dXJuKGUuY2FzdFNoYWRvdz8xOjApLSh0LmNhc3RTaGFkb3c/MTowKX1mdW5jdGlvbiB3cyh0LGUpe2NvbnN0IG49bmV3IHlzLHI9ZnVuY3Rpb24oKXtjb25zdCB0PXt9O3JldHVybntnZXQ6ZnVuY3Rpb24oZSl7aWYodm9pZCAwIT09dFtlLmlkXSlyZXR1cm4gdFtlLmlkXTtsZXQgbjtzd2l0Y2goZS50eXBlKXtjYXNlXCJEaXJlY3Rpb25hbExpZ2h0XCI6Y2FzZVwiU3BvdExpZ2h0XCI6bj17c2hhZG93QmlhczowLHNoYWRvd05vcm1hbEJpYXM6MCxzaGFkb3dSYWRpdXM6MSxzaGFkb3dNYXBTaXplOm5ldyBHbn07YnJlYWs7Y2FzZVwiUG9pbnRMaWdodFwiOm49e3NoYWRvd0JpYXM6MCxzaGFkb3dOb3JtYWxCaWFzOjAsc2hhZG93UmFkaXVzOjEsc2hhZG93TWFwU2l6ZTpuZXcgR24sc2hhZG93Q2FtZXJhTmVhcjoxLHNoYWRvd0NhbWVyYUZhcjoxZTN9fXJldHVybiB0W2UuaWRdPW4sbn19fSgpLGk9e3ZlcnNpb246MCxoYXNoOntkaXJlY3Rpb25hbExlbmd0aDotMSxwb2ludExlbmd0aDotMSxzcG90TGVuZ3RoOi0xLHJlY3RBcmVhTGVuZ3RoOi0xLGhlbWlMZW5ndGg6LTEsbnVtRGlyZWN0aW9uYWxTaGFkb3dzOi0xLG51bVBvaW50U2hhZG93czotMSxudW1TcG90U2hhZG93czotMX0sYW1iaWVudDpbMCwwLDBdLHByb2JlOltdLGRpcmVjdGlvbmFsOltdLGRpcmVjdGlvbmFsU2hhZG93OltdLGRpcmVjdGlvbmFsU2hhZG93TWFwOltdLGRpcmVjdGlvbmFsU2hhZG93TWF0cml4OltdLHNwb3Q6W10sc3BvdFNoYWRvdzpbXSxzcG90U2hhZG93TWFwOltdLHNwb3RTaGFkb3dNYXRyaXg6W10scmVjdEFyZWE6W10scmVjdEFyZWFMVEMxOm51bGwscmVjdEFyZWFMVEMyOm51bGwscG9pbnQ6W10scG9pbnRTaGFkb3c6W10scG9pbnRTaGFkb3dNYXA6W10scG9pbnRTaGFkb3dNYXRyaXg6W10saGVtaTpbXX07Zm9yKGxldCB0PTA7dDw5O3QrKylpLnByb2JlLnB1c2gobmV3IEtuKTtjb25zdCBvPW5ldyBLbixhPW5ldyBUcixzPW5ldyBUcjtyZXR1cm57c2V0dXA6ZnVuY3Rpb24oYyxsLHUpe2xldCBoPTAsZD0wLHA9MDtmb3IobGV0IHQ9MDt0PDk7dCsrKWkucHJvYmVbdF0uc2V0KDAsMCwwKTtsZXQgZj0wLG09MCxnPTAsdj0wLHk9MCx4PTAsYj0wLHc9MDtjb25zdCBfPXUubWF0cml4V29ybGRJbnZlcnNlO2Muc29ydChicyk7Zm9yKGxldCB0PTAsZT1jLmxlbmd0aDt0PGU7dCsrKXtjb25zdCBlPWNbdF0sbD1lLmNvbG9yLHU9ZS5pbnRlbnNpdHksTT1lLmRpc3RhbmNlLFM9ZS5zaGFkb3cmJmUuc2hhZG93Lm1hcD9lLnNoYWRvdy5tYXAudGV4dHVyZTpudWxsO2lmKGUuaXNBbWJpZW50TGlnaHQpaCs9bC5yKnUsZCs9bC5nKnUscCs9bC5iKnU7ZWxzZSBpZihlLmlzTGlnaHRQcm9iZSlmb3IobGV0IHQ9MDt0PDk7dCsrKWkucHJvYmVbdF0uYWRkU2NhbGVkVmVjdG9yKGUuc2guY29lZmZpY2llbnRzW3RdLHUpO2Vsc2UgaWYoZS5pc0RpcmVjdGlvbmFsTGlnaHQpe2NvbnN0IHQ9bi5nZXQoZSk7aWYodC5jb2xvci5jb3B5KGUuY29sb3IpLm11bHRpcGx5U2NhbGFyKGUuaW50ZW5zaXR5KSx0LmRpcmVjdGlvbi5zZXRGcm9tTWF0cml4UG9zaXRpb24oZS5tYXRyaXhXb3JsZCksby5zZXRGcm9tTWF0cml4UG9zaXRpb24oZS50YXJnZXQubWF0cml4V29ybGQpLHQuZGlyZWN0aW9uLnN1YihvKSx0LmRpcmVjdGlvbi50cmFuc2Zvcm1EaXJlY3Rpb24oXyksZS5jYXN0U2hhZG93KXtjb25zdCB0PWUuc2hhZG93LG49ci5nZXQoZSk7bi5zaGFkb3dCaWFzPXQuYmlhcyxuLnNoYWRvd05vcm1hbEJpYXM9dC5ub3JtYWxCaWFzLG4uc2hhZG93UmFkaXVzPXQucmFkaXVzLG4uc2hhZG93TWFwU2l6ZT10Lm1hcFNpemUsaS5kaXJlY3Rpb25hbFNoYWRvd1tmXT1uLGkuZGlyZWN0aW9uYWxTaGFkb3dNYXBbZl09UyxpLmRpcmVjdGlvbmFsU2hhZG93TWF0cml4W2ZdPWUuc2hhZG93Lm1hdHJpeCx4Kyt9aS5kaXJlY3Rpb25hbFtmXT10LGYrK31lbHNlIGlmKGUuaXNTcG90TGlnaHQpe2NvbnN0IHQ9bi5nZXQoZSk7aWYodC5wb3NpdGlvbi5zZXRGcm9tTWF0cml4UG9zaXRpb24oZS5tYXRyaXhXb3JsZCksdC5wb3NpdGlvbi5hcHBseU1hdHJpeDQoXyksdC5jb2xvci5jb3B5KGwpLm11bHRpcGx5U2NhbGFyKHUpLHQuZGlzdGFuY2U9TSx0LmRpcmVjdGlvbi5zZXRGcm9tTWF0cml4UG9zaXRpb24oZS5tYXRyaXhXb3JsZCksby5zZXRGcm9tTWF0cml4UG9zaXRpb24oZS50YXJnZXQubWF0cml4V29ybGQpLHQuZGlyZWN0aW9uLnN1YihvKSx0LmRpcmVjdGlvbi50cmFuc2Zvcm1EaXJlY3Rpb24oXyksdC5jb25lQ29zPU1hdGguY29zKGUuYW5nbGUpLHQucGVudW1icmFDb3M9TWF0aC5jb3MoZS5hbmdsZSooMS1lLnBlbnVtYnJhKSksdC5kZWNheT1lLmRlY2F5LGUuY2FzdFNoYWRvdyl7Y29uc3QgdD1lLnNoYWRvdyxuPXIuZ2V0KGUpO24uc2hhZG93Qmlhcz10LmJpYXMsbi5zaGFkb3dOb3JtYWxCaWFzPXQubm9ybWFsQmlhcyxuLnNoYWRvd1JhZGl1cz10LnJhZGl1cyxuLnNoYWRvd01hcFNpemU9dC5tYXBTaXplLGkuc3BvdFNoYWRvd1tnXT1uLGkuc3BvdFNoYWRvd01hcFtnXT1TLGkuc3BvdFNoYWRvd01hdHJpeFtnXT1lLnNoYWRvdy5tYXRyaXgsdysrfWkuc3BvdFtnXT10LGcrK31lbHNlIGlmKGUuaXNSZWN0QXJlYUxpZ2h0KXtjb25zdCB0PW4uZ2V0KGUpO3QuY29sb3IuY29weShsKS5tdWx0aXBseVNjYWxhcih1KSx0LnBvc2l0aW9uLnNldEZyb21NYXRyaXhQb3NpdGlvbihlLm1hdHJpeFdvcmxkKSx0LnBvc2l0aW9uLmFwcGx5TWF0cml4NChfKSxzLmlkZW50aXR5KCksYS5jb3B5KGUubWF0cml4V29ybGQpLGEucHJlbXVsdGlwbHkoXykscy5leHRyYWN0Um90YXRpb24oYSksdC5oYWxmV2lkdGguc2V0KC41KmUud2lkdGgsMCwwKSx0LmhhbGZIZWlnaHQuc2V0KDAsLjUqZS5oZWlnaHQsMCksdC5oYWxmV2lkdGguYXBwbHlNYXRyaXg0KHMpLHQuaGFsZkhlaWdodC5hcHBseU1hdHJpeDQocyksaS5yZWN0QXJlYVt2XT10LHYrK31lbHNlIGlmKGUuaXNQb2ludExpZ2h0KXtjb25zdCB0PW4uZ2V0KGUpO2lmKHQucG9zaXRpb24uc2V0RnJvbU1hdHJpeFBvc2l0aW9uKGUubWF0cml4V29ybGQpLHQucG9zaXRpb24uYXBwbHlNYXRyaXg0KF8pLHQuY29sb3IuY29weShlLmNvbG9yKS5tdWx0aXBseVNjYWxhcihlLmludGVuc2l0eSksdC5kaXN0YW5jZT1lLmRpc3RhbmNlLHQuZGVjYXk9ZS5kZWNheSxlLmNhc3RTaGFkb3cpe2NvbnN0IHQ9ZS5zaGFkb3csbj1yLmdldChlKTtuLnNoYWRvd0JpYXM9dC5iaWFzLG4uc2hhZG93Tm9ybWFsQmlhcz10Lm5vcm1hbEJpYXMsbi5zaGFkb3dSYWRpdXM9dC5yYWRpdXMsbi5zaGFkb3dNYXBTaXplPXQubWFwU2l6ZSxuLnNoYWRvd0NhbWVyYU5lYXI9dC5jYW1lcmEubmVhcixuLnNoYWRvd0NhbWVyYUZhcj10LmNhbWVyYS5mYXIsaS5wb2ludFNoYWRvd1ttXT1uLGkucG9pbnRTaGFkb3dNYXBbbV09UyxpLnBvaW50U2hhZG93TWF0cml4W21dPWUuc2hhZG93Lm1hdHJpeCxiKyt9aS5wb2ludFttXT10LG0rK31lbHNlIGlmKGUuaXNIZW1pc3BoZXJlTGlnaHQpe2NvbnN0IHQ9bi5nZXQoZSk7dC5kaXJlY3Rpb24uc2V0RnJvbU1hdHJpeFBvc2l0aW9uKGUubWF0cml4V29ybGQpLHQuZGlyZWN0aW9uLnRyYW5zZm9ybURpcmVjdGlvbihfKSx0LmRpcmVjdGlvbi5ub3JtYWxpemUoKSx0LnNreUNvbG9yLmNvcHkoZS5jb2xvcikubXVsdGlwbHlTY2FsYXIodSksdC5ncm91bmRDb2xvci5jb3B5KGUuZ3JvdW5kQ29sb3IpLm11bHRpcGx5U2NhbGFyKHUpLGkuaGVtaVt5XT10LHkrK319dj4wJiYoZS5pc1dlYkdMMnx8ITA9PT10LmhhcyhcIk9FU190ZXh0dXJlX2Zsb2F0X2xpbmVhclwiKT8oaS5yZWN0QXJlYUxUQzE9T28uTFRDX0ZMT0FUXzEsaS5yZWN0QXJlYUxUQzI9T28uTFRDX0ZMT0FUXzIpOiEwPT09dC5oYXMoXCJPRVNfdGV4dHVyZV9oYWxmX2Zsb2F0X2xpbmVhclwiKT8oaS5yZWN0QXJlYUxUQzE9T28uTFRDX0hBTEZfMSxpLnJlY3RBcmVhTFRDMj1Pby5MVENfSEFMRl8yKTpjb25zb2xlLmVycm9yKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogVW5hYmxlIHRvIHVzZSBSZWN0QXJlYUxpZ2h0LiBNaXNzaW5nIFdlYkdMIGV4dGVuc2lvbnMuXCIpKSxpLmFtYmllbnRbMF09aCxpLmFtYmllbnRbMV09ZCxpLmFtYmllbnRbMl09cDtjb25zdCBNPWkuaGFzaDtNLmRpcmVjdGlvbmFsTGVuZ3RoPT09ZiYmTS5wb2ludExlbmd0aD09PW0mJk0uc3BvdExlbmd0aD09PWcmJk0ucmVjdEFyZWFMZW5ndGg9PT12JiZNLmhlbWlMZW5ndGg9PT15JiZNLm51bURpcmVjdGlvbmFsU2hhZG93cz09PXgmJk0ubnVtUG9pbnRTaGFkb3dzPT09YiYmTS5udW1TcG90U2hhZG93cz09PXd8fChpLmRpcmVjdGlvbmFsLmxlbmd0aD1mLGkuc3BvdC5sZW5ndGg9ZyxpLnJlY3RBcmVhLmxlbmd0aD12LGkucG9pbnQubGVuZ3RoPW0saS5oZW1pLmxlbmd0aD15LGkuZGlyZWN0aW9uYWxTaGFkb3cubGVuZ3RoPXgsaS5kaXJlY3Rpb25hbFNoYWRvd01hcC5sZW5ndGg9eCxpLnBvaW50U2hhZG93Lmxlbmd0aD1iLGkucG9pbnRTaGFkb3dNYXAubGVuZ3RoPWIsaS5zcG90U2hhZG93Lmxlbmd0aD13LGkuc3BvdFNoYWRvd01hcC5sZW5ndGg9dyxpLmRpcmVjdGlvbmFsU2hhZG93TWF0cml4Lmxlbmd0aD14LGkucG9pbnRTaGFkb3dNYXRyaXgubGVuZ3RoPWIsaS5zcG90U2hhZG93TWF0cml4Lmxlbmd0aD13LE0uZGlyZWN0aW9uYWxMZW5ndGg9ZixNLnBvaW50TGVuZ3RoPW0sTS5zcG90TGVuZ3RoPWcsTS5yZWN0QXJlYUxlbmd0aD12LE0uaGVtaUxlbmd0aD15LE0ubnVtRGlyZWN0aW9uYWxTaGFkb3dzPXgsTS5udW1Qb2ludFNoYWRvd3M9YixNLm51bVNwb3RTaGFkb3dzPXcsaS52ZXJzaW9uPXhzKyspfSxzdGF0ZTppfX1mdW5jdGlvbiBfcyh0LGUpe2NvbnN0IG49bmV3IHdzKHQsZSkscj1bXSxpPVtdO3JldHVybntpbml0OmZ1bmN0aW9uKCl7ci5sZW5ndGg9MCxpLmxlbmd0aD0wfSxzdGF0ZTp7bGlnaHRzQXJyYXk6cixzaGFkb3dzQXJyYXk6aSxsaWdodHM6bn0sc2V0dXBMaWdodHM6ZnVuY3Rpb24odCl7bi5zZXR1cChyLGksdCl9LHB1c2hMaWdodDpmdW5jdGlvbih0KXtyLnB1c2godCl9LHB1c2hTaGFkb3c6ZnVuY3Rpb24odCl7aS5wdXNoKHQpfX19ZnVuY3Rpb24gTXModCxlKXtsZXQgbj1uZXcgV2Vha01hcDtyZXR1cm57Z2V0OmZ1bmN0aW9uKHIsaSl7bGV0IG87cmV0dXJuITE9PT1uLmhhcyhyKT8obz1uZXcgX3ModCxlKSxuLnNldChyLG5ldyBXZWFrTWFwKSxuLmdldChyKS5zZXQoaSxvKSk6ITE9PT1uLmdldChyKS5oYXMoaSk/KG89bmV3IF9zKHQsZSksbi5nZXQocikuc2V0KGksbykpOm89bi5nZXQocikuZ2V0KGkpLG99LGRpc3Bvc2U6ZnVuY3Rpb24oKXtuPW5ldyBXZWFrTWFwfX19ZnVuY3Rpb24gU3ModCl7d2kuY2FsbCh0aGlzKSx0aGlzLnR5cGU9XCJNZXNoRGVwdGhNYXRlcmlhbFwiLHRoaXMuZGVwdGhQYWNraW5nPW9uLHRoaXMuc2tpbm5pbmc9ITEsdGhpcy5tb3JwaFRhcmdldHM9ITEsdGhpcy5tYXA9bnVsbCx0aGlzLmFscGhhTWFwPW51bGwsdGhpcy5kaXNwbGFjZW1lbnRNYXA9bnVsbCx0aGlzLmRpc3BsYWNlbWVudFNjYWxlPTEsdGhpcy5kaXNwbGFjZW1lbnRCaWFzPTAsdGhpcy53aXJlZnJhbWU9ITEsdGhpcy53aXJlZnJhbWVMaW5ld2lkdGg9MSx0aGlzLmZvZz0hMSx0aGlzLnNldFZhbHVlcyh0KX1mdW5jdGlvbiBUcyh0KXt3aS5jYWxsKHRoaXMpLHRoaXMudHlwZT1cIk1lc2hEaXN0YW5jZU1hdGVyaWFsXCIsdGhpcy5yZWZlcmVuY2VQb3NpdGlvbj1uZXcgS24sdGhpcy5uZWFyRGlzdGFuY2U9MSx0aGlzLmZhckRpc3RhbmNlPTFlMyx0aGlzLnNraW5uaW5nPSExLHRoaXMubW9ycGhUYXJnZXRzPSExLHRoaXMubWFwPW51bGwsdGhpcy5hbHBoYU1hcD1udWxsLHRoaXMuZGlzcGxhY2VtZW50TWFwPW51bGwsdGhpcy5kaXNwbGFjZW1lbnRTY2FsZT0xLHRoaXMuZGlzcGxhY2VtZW50Qmlhcz0wLHRoaXMuZm9nPSExLHRoaXMuc2V0VmFsdWVzKHQpfVNzLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHdpLnByb3RvdHlwZSksU3MucHJvdG90eXBlLmNvbnN0cnVjdG9yPVNzLFNzLnByb3RvdHlwZS5pc01lc2hEZXB0aE1hdGVyaWFsPSEwLFNzLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKHQpe3JldHVybiB3aS5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsdCksdGhpcy5kZXB0aFBhY2tpbmc9dC5kZXB0aFBhY2tpbmcsdGhpcy5za2lubmluZz10LnNraW5uaW5nLHRoaXMubW9ycGhUYXJnZXRzPXQubW9ycGhUYXJnZXRzLHRoaXMubWFwPXQubWFwLHRoaXMuYWxwaGFNYXA9dC5hbHBoYU1hcCx0aGlzLmRpc3BsYWNlbWVudE1hcD10LmRpc3BsYWNlbWVudE1hcCx0aGlzLmRpc3BsYWNlbWVudFNjYWxlPXQuZGlzcGxhY2VtZW50U2NhbGUsdGhpcy5kaXNwbGFjZW1lbnRCaWFzPXQuZGlzcGxhY2VtZW50Qmlhcyx0aGlzLndpcmVmcmFtZT10LndpcmVmcmFtZSx0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD10LndpcmVmcmFtZUxpbmV3aWR0aCx0aGlzfSxUcy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh3aS5wcm90b3R5cGUpLFRzLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1UcyxUcy5wcm90b3R5cGUuaXNNZXNoRGlzdGFuY2VNYXRlcmlhbD0hMCxUcy5wcm90b3R5cGUuY29weT1mdW5jdGlvbih0KXtyZXR1cm4gd2kucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLHQpLHRoaXMucmVmZXJlbmNlUG9zaXRpb24uY29weSh0LnJlZmVyZW5jZVBvc2l0aW9uKSx0aGlzLm5lYXJEaXN0YW5jZT10Lm5lYXJEaXN0YW5jZSx0aGlzLmZhckRpc3RhbmNlPXQuZmFyRGlzdGFuY2UsdGhpcy5za2lubmluZz10LnNraW5uaW5nLHRoaXMubW9ycGhUYXJnZXRzPXQubW9ycGhUYXJnZXRzLHRoaXMubWFwPXQubWFwLHRoaXMuYWxwaGFNYXA9dC5hbHBoYU1hcCx0aGlzLmRpc3BsYWNlbWVudE1hcD10LmRpc3BsYWNlbWVudE1hcCx0aGlzLmRpc3BsYWNlbWVudFNjYWxlPXQuZGlzcGxhY2VtZW50U2NhbGUsdGhpcy5kaXNwbGFjZW1lbnRCaWFzPXQuZGlzcGxhY2VtZW50Qmlhcyx0aGlzfTtmdW5jdGlvbiBFcyh0LGUsbil7bGV0IHI9bmV3IExvO2NvbnN0IGk9bmV3IEduLG89bmV3IEduLGE9bmV3IHFuLHM9W10sYz1bXSxsPXt9LHU9ezA6bSwxOmYsMjpnfSxkPW5ldyB4byh7ZGVmaW5lczp7U0FNUExFX1JBVEU6Mi84LEhBTEZfU0FNUExFX1JBVEU6MS84fSx1bmlmb3Jtczp7c2hhZG93X3Bhc3M6e3ZhbHVlOm51bGx9LHJlc29sdXRpb246e3ZhbHVlOm5ldyBHbn0scmFkaXVzOnt2YWx1ZTo0fX0sdmVydGV4U2hhZGVyOlwidm9pZCBtYWluKCkge1xcblxcdGdsX1Bvc2l0aW9uID0gdmVjNCggcG9zaXRpb24sIDEuMCApO1xcbn1cIixmcmFnbWVudFNoYWRlcjpcInVuaWZvcm0gc2FtcGxlcjJEIHNoYWRvd19wYXNzO1xcbnVuaWZvcm0gdmVjMiByZXNvbHV0aW9uO1xcbnVuaWZvcm0gZmxvYXQgcmFkaXVzO1xcbiNpbmNsdWRlIDxwYWNraW5nPlxcbnZvaWQgbWFpbigpIHtcXG5cXHRmbG9hdCBtZWFuID0gMC4wO1xcblxcdGZsb2F0IHNxdWFyZWRfbWVhbiA9IDAuMDtcXG5cXHRmbG9hdCBkZXB0aCA9IHVucGFja1JHQkFUb0RlcHRoKCB0ZXh0dXJlMkQoIHNoYWRvd19wYXNzLCAoIGdsX0ZyYWdDb29yZC54eSApIC8gcmVzb2x1dGlvbiApICk7XFxuXFx0Zm9yICggZmxvYXQgaSA9IC0xLjA7IGkgPCAxLjAgOyBpICs9IFNBTVBMRV9SQVRFKSB7XFxuXFx0XFx0I2lmZGVmIEhPUklaT05BTF9QQVNTXFxuXFx0XFx0XFx0dmVjMiBkaXN0cmlidXRpb24gPSB1bnBhY2tSR0JBVG8ySGFsZiggdGV4dHVyZTJEKCBzaGFkb3dfcGFzcywgKCBnbF9GcmFnQ29vcmQueHkgKyB2ZWMyKCBpLCAwLjAgKSAqIHJhZGl1cyApIC8gcmVzb2x1dGlvbiApICk7XFxuXFx0XFx0XFx0bWVhbiArPSBkaXN0cmlidXRpb24ueDtcXG5cXHRcXHRcXHRzcXVhcmVkX21lYW4gKz0gZGlzdHJpYnV0aW9uLnkgKiBkaXN0cmlidXRpb24ueSArIGRpc3RyaWJ1dGlvbi54ICogZGlzdHJpYnV0aW9uLng7XFxuXFx0XFx0I2Vsc2VcXG5cXHRcXHRcXHRmbG9hdCBkZXB0aCA9IHVucGFja1JHQkFUb0RlcHRoKCB0ZXh0dXJlMkQoIHNoYWRvd19wYXNzLCAoIGdsX0ZyYWdDb29yZC54eSArIHZlYzIoIDAuMCwgaSApICogcmFkaXVzICkgLyByZXNvbHV0aW9uICkgKTtcXG5cXHRcXHRcXHRtZWFuICs9IGRlcHRoO1xcblxcdFxcdFxcdHNxdWFyZWRfbWVhbiArPSBkZXB0aCAqIGRlcHRoO1xcblxcdFxcdCNlbmRpZlxcblxcdH1cXG5cXHRtZWFuID0gbWVhbiAqIEhBTEZfU0FNUExFX1JBVEU7XFxuXFx0c3F1YXJlZF9tZWFuID0gc3F1YXJlZF9tZWFuICogSEFMRl9TQU1QTEVfUkFURTtcXG5cXHRmbG9hdCBzdGRfZGV2ID0gc3FydCggc3F1YXJlZF9tZWFuIC0gbWVhbiAqIG1lYW4gKTtcXG5cXHRnbF9GcmFnQ29sb3IgPSBwYWNrMkhhbGZUb1JHQkEoIHZlYzIoIG1lYW4sIHN0ZF9kZXYgKSApO1xcbn1cIn0pLHY9ZC5jbG9uZSgpO3YuZGVmaW5lcy5IT1JJWk9OQUxfUEFTUz0xO2NvbnN0IHk9bmV3IHFpO3kuc2V0QXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgVGkobmV3IEZsb2F0MzJBcnJheShbLTEsLTEsLjUsMywtMSwuNSwtMSwzLC41XSksMykpO2NvbnN0IGI9bmV3IGhvKHksZCksdz10aGlzO2Z1bmN0aW9uIF8obixyKXtjb25zdCBpPWUudXBkYXRlKGIpO2QudW5pZm9ybXMuc2hhZG93X3Bhc3MudmFsdWU9bi5tYXAudGV4dHVyZSxkLnVuaWZvcm1zLnJlc29sdXRpb24udmFsdWU9bi5tYXBTaXplLGQudW5pZm9ybXMucmFkaXVzLnZhbHVlPW4ucmFkaXVzLHQuc2V0UmVuZGVyVGFyZ2V0KG4ubWFwUGFzcyksdC5jbGVhcigpLHQucmVuZGVyQnVmZmVyRGlyZWN0KHIsbnVsbCxpLGQsYixudWxsKSx2LnVuaWZvcm1zLnNoYWRvd19wYXNzLnZhbHVlPW4ubWFwUGFzcy50ZXh0dXJlLHYudW5pZm9ybXMucmVzb2x1dGlvbi52YWx1ZT1uLm1hcFNpemUsdi51bmlmb3Jtcy5yYWRpdXMudmFsdWU9bi5yYWRpdXMsdC5zZXRSZW5kZXJUYXJnZXQobi5tYXApLHQuY2xlYXIoKSx0LnJlbmRlckJ1ZmZlckRpcmVjdChyLG51bGwsaSx2LGIsbnVsbCl9ZnVuY3Rpb24gTSh0LGUsbil7Y29uc3Qgcj10PDwwfGU8PDF8bjw8MjtsZXQgaT1zW3JdO3JldHVybiB2b2lkIDA9PT1pJiYoaT1uZXcgU3Moe2RlcHRoUGFja2luZzphbixtb3JwaFRhcmdldHM6dCxza2lubmluZzplfSksc1tyXT1pKSxpfWZ1bmN0aW9uIFModCxlLG4pe2NvbnN0IHI9dDw8MHxlPDwxfG48PDI7bGV0IGk9Y1tyXTtyZXR1cm4gdm9pZCAwPT09aSYmKGk9bmV3IFRzKHttb3JwaFRhcmdldHM6dCxza2lubmluZzplfSksY1tyXT1pKSxpfWZ1bmN0aW9uIFQoZSxuLHIsaSxvLGEscyl7bGV0IGM9bnVsbCxoPU0sZD1lLmN1c3RvbURlcHRoTWF0ZXJpYWw7aWYoITA9PT1pLmlzUG9pbnRMaWdodCYmKGg9UyxkPWUuY3VzdG9tRGlzdGFuY2VNYXRlcmlhbCksdm9pZCAwPT09ZCl7bGV0IHQ9ITE7ITA9PT1yLm1vcnBoVGFyZ2V0cyYmKHQ9bi5tb3JwaEF0dHJpYnV0ZXMmJm4ubW9ycGhBdHRyaWJ1dGVzLnBvc2l0aW9uJiZuLm1vcnBoQXR0cmlidXRlcy5wb3NpdGlvbi5sZW5ndGg+MCk7bGV0IGk9ITE7ITA9PT1lLmlzU2tpbm5lZE1lc2gmJighMD09PXIuc2tpbm5pbmc/aT0hMDpjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFNoYWRvd01hcDogVEhSRUUuU2tpbm5lZE1lc2ggd2l0aCBtYXRlcmlhbC5za2lubmluZyBzZXQgdG8gZmFsc2U6XCIsZSkpO2M9aCh0LGksITA9PT1lLmlzSW5zdGFuY2VkTWVzaCl9ZWxzZSBjPWQ7aWYodC5sb2NhbENsaXBwaW5nRW5hYmxlZCYmITA9PT1yLmNsaXBTaGFkb3dzJiYwIT09ci5jbGlwcGluZ1BsYW5lcy5sZW5ndGgpe2NvbnN0IHQ9Yy51dWlkLGU9ci51dWlkO2xldCBuPWxbdF07dm9pZCAwPT09biYmKG49e30sbFt0XT1uKTtsZXQgaT1uW2VdO3ZvaWQgMD09PWkmJihpPWMuY2xvbmUoKSxuW2VdPWkpLGM9aX1yZXR1cm4gYy52aXNpYmxlPXIudmlzaWJsZSxjLndpcmVmcmFtZT1yLndpcmVmcmFtZSxjLnNpZGU9cz09PXA/bnVsbCE9PXIuc2hhZG93U2lkZT9yLnNoYWRvd1NpZGU6ci5zaWRlOm51bGwhPT1yLnNoYWRvd1NpZGU/ci5zaGFkb3dTaWRlOnVbci5zaWRlXSxjLmNsaXBTaGFkb3dzPXIuY2xpcFNoYWRvd3MsYy5jbGlwcGluZ1BsYW5lcz1yLmNsaXBwaW5nUGxhbmVzLGMuY2xpcEludGVyc2VjdGlvbj1yLmNsaXBJbnRlcnNlY3Rpb24sYy53aXJlZnJhbWVMaW5ld2lkdGg9ci53aXJlZnJhbWVMaW5ld2lkdGgsYy5saW5ld2lkdGg9ci5saW5ld2lkdGgsITA9PT1pLmlzUG9pbnRMaWdodCYmITA9PT1jLmlzTWVzaERpc3RhbmNlTWF0ZXJpYWwmJihjLnJlZmVyZW5jZVBvc2l0aW9uLnNldEZyb21NYXRyaXhQb3NpdGlvbihpLm1hdHJpeFdvcmxkKSxjLm5lYXJEaXN0YW5jZT1vLGMuZmFyRGlzdGFuY2U9YSksY31mdW5jdGlvbiBFKG4saSxvLGEscyl7aWYoITE9PT1uLnZpc2libGUpcmV0dXJuO2lmKG4ubGF5ZXJzLnRlc3QoaS5sYXllcnMpJiYobi5pc01lc2h8fG4uaXNMaW5lfHxuLmlzUG9pbnRzKSYmKG4uY2FzdFNoYWRvd3x8bi5yZWNlaXZlU2hhZG93JiZzPT09cCkmJighbi5mcnVzdHVtQ3VsbGVkfHxyLmludGVyc2VjdHNPYmplY3QobikpKXtuLm1vZGVsVmlld01hdHJpeC5tdWx0aXBseU1hdHJpY2VzKG8ubWF0cml4V29ybGRJbnZlcnNlLG4ubWF0cml4V29ybGQpO2NvbnN0IHI9ZS51cGRhdGUobiksaT1uLm1hdGVyaWFsO2lmKEFycmF5LmlzQXJyYXkoaSkpe2NvbnN0IGU9ci5ncm91cHM7Zm9yKGxldCBjPTAsbD1lLmxlbmd0aDtjPGw7YysrKXtjb25zdCBsPWVbY10sdT1pW2wubWF0ZXJpYWxJbmRleF07aWYodSYmdS52aXNpYmxlKXtjb25zdCBlPVQobixyLHUsYSxvLm5lYXIsby5mYXIscyk7dC5yZW5kZXJCdWZmZXJEaXJlY3QobyxudWxsLHIsZSxuLGwpfX19ZWxzZSBpZihpLnZpc2libGUpe2NvbnN0IGU9VChuLHIsaSxhLG8ubmVhcixvLmZhcixzKTt0LnJlbmRlckJ1ZmZlckRpcmVjdChvLG51bGwscixlLG4sbnVsbCl9fWNvbnN0IGM9bi5jaGlsZHJlbjtmb3IobGV0IHQ9MCxlPWMubGVuZ3RoO3Q8ZTt0KyspRShjW3RdLGksbyxhLHMpfXRoaXMuZW5hYmxlZD0hMSx0aGlzLmF1dG9VcGRhdGU9ITAsdGhpcy5uZWVkc1VwZGF0ZT0hMSx0aGlzLnR5cGU9aCx0aGlzLnJlbmRlcj1mdW5jdGlvbihlLHMsYyl7aWYoITE9PT13LmVuYWJsZWQpcmV0dXJuO2lmKCExPT09dy5hdXRvVXBkYXRlJiYhMT09PXcubmVlZHNVcGRhdGUpcmV0dXJuO2lmKDA9PT1lLmxlbmd0aClyZXR1cm47Y29uc3QgbD10LmdldFJlbmRlclRhcmdldCgpLHU9dC5nZXRBY3RpdmVDdWJlRmFjZSgpLGg9dC5nZXRBY3RpdmVNaXBtYXBMZXZlbCgpLGQ9dC5zdGF0ZTtkLnNldEJsZW5kaW5nKHgpLGQuYnVmZmVycy5jb2xvci5zZXRDbGVhcigxLDEsMSwxKSxkLmJ1ZmZlcnMuZGVwdGguc2V0VGVzdCghMCksZC5zZXRTY2lzc29yVGVzdCghMSk7Zm9yKGxldCBsPTAsdT1lLmxlbmd0aDtsPHU7bCsrKXtjb25zdCB1PWVbbF0saD11LnNoYWRvdztpZih2b2lkIDA9PT1oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFNoYWRvd01hcDpcIix1LFwiaGFzIG5vIHNoYWRvdy5cIik7Y29udGludWV9aWYoITE9PT1oLmF1dG9VcGRhdGUmJiExPT09aC5uZWVkc1VwZGF0ZSljb250aW51ZTtpLmNvcHkoaC5tYXBTaXplKTtjb25zdCBmPWguZ2V0RnJhbWVFeHRlbnRzKCk7aWYoaS5tdWx0aXBseShmKSxvLmNvcHkoaC5tYXBTaXplKSwoaS54Pm58fGkueT5uKSYmKGkueD5uJiYoby54PU1hdGguZmxvb3Iobi9mLngpLGkueD1vLngqZi54LGgubWFwU2l6ZS54PW8ueCksaS55Pm4mJihvLnk9TWF0aC5mbG9vcihuL2YueSksaS55PW8ueSpmLnksaC5tYXBTaXplLnk9by55KSksbnVsbD09PWgubWFwJiYhaC5pc1BvaW50TGlnaHRTaGFkb3cmJnRoaXMudHlwZT09PXApe2NvbnN0IHQ9e21pbkZpbHRlcjp4dCxtYWdGaWx0ZXI6eHQsZm9ybWF0OlV0fTtoLm1hcD1uZXcgWW4oaS54LGkueSx0KSxoLm1hcC50ZXh0dXJlLm5hbWU9dS5uYW1lK1wiLnNoYWRvd01hcFwiLGgubWFwUGFzcz1uZXcgWW4oaS54LGkueSx0KSxoLmNhbWVyYS51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCl9aWYobnVsbD09PWgubWFwKXtjb25zdCB0PXttaW5GaWx0ZXI6ZnQsbWFnRmlsdGVyOmZ0LGZvcm1hdDpVdH07aC5tYXA9bmV3IFluKGkueCxpLnksdCksaC5tYXAudGV4dHVyZS5uYW1lPXUubmFtZStcIi5zaGFkb3dNYXBcIixoLmNhbWVyYS51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCl9dC5zZXRSZW5kZXJUYXJnZXQoaC5tYXApLHQuY2xlYXIoKTtjb25zdCBtPWguZ2V0Vmlld3BvcnRDb3VudCgpO2ZvcihsZXQgdD0wO3Q8bTt0Kyspe2NvbnN0IGU9aC5nZXRWaWV3cG9ydCh0KTthLnNldChvLngqZS54LG8ueSplLnksby54KmUueixvLnkqZS53KSxkLnZpZXdwb3J0KGEpLGgudXBkYXRlTWF0cmljZXModSx0KSxyPWguZ2V0RnJ1c3R1bSgpLEUocyxjLGguY2FtZXJhLHUsdGhpcy50eXBlKX1oLmlzUG9pbnRMaWdodFNoYWRvd3x8dGhpcy50eXBlIT09cHx8XyhoLGMpLGgubmVlZHNVcGRhdGU9ITF9dy5uZWVkc1VwZGF0ZT0hMSx0LnNldFJlbmRlclRhcmdldChsLHUsaCl9fWZ1bmN0aW9uIEFzKHQsZSxuKXtjb25zdCByPW4uaXNXZWJHTDI7Y29uc3QgaT1uZXcgZnVuY3Rpb24oKXtsZXQgZT0hMTtjb25zdCBuPW5ldyBxbjtsZXQgcj1udWxsO2NvbnN0IGk9bmV3IHFuKDAsMCwwLDApO3JldHVybntzZXRNYXNrOmZ1bmN0aW9uKG4pe3I9PT1ufHxlfHwodC5jb2xvck1hc2sobixuLG4sbikscj1uKX0sc2V0TG9ja2VkOmZ1bmN0aW9uKHQpe2U9dH0sc2V0Q2xlYXI6ZnVuY3Rpb24oZSxyLG8sYSxzKXshMD09PXMmJihlKj1hLHIqPWEsbyo9YSksbi5zZXQoZSxyLG8sYSksITE9PT1pLmVxdWFscyhuKSYmKHQuY2xlYXJDb2xvcihlLHIsbyxhKSxpLmNvcHkobikpfSxyZXNldDpmdW5jdGlvbigpe2U9ITEscj1udWxsLGkuc2V0KC0xLDAsMCwwKX19fSxvPW5ldyBmdW5jdGlvbigpe2xldCBlPSExLG49bnVsbCxyPW51bGwsaT1udWxsO3JldHVybntzZXRUZXN0OmZ1bmN0aW9uKHQpe3Q/ZnQoMjkyOSk6bXQoMjkyOSl9LHNldE1hc2s6ZnVuY3Rpb24ocil7bj09PXJ8fGV8fCh0LmRlcHRoTWFzayhyKSxuPXIpfSxzZXRGdW5jOmZ1bmN0aW9uKGUpe2lmKHIhPT1lKXtpZihlKXN3aXRjaChlKXtjYXNlIEg6dC5kZXB0aEZ1bmMoNTEyKTticmVhaztjYXNlIGs6dC5kZXB0aEZ1bmMoNTE5KTticmVhaztjYXNlIFY6dC5kZXB0aEZ1bmMoNTEzKTticmVhaztjYXNlIGo6dC5kZXB0aEZ1bmMoNTE1KTticmVhaztjYXNlIFc6dC5kZXB0aEZ1bmMoNTE0KTticmVhaztjYXNlIFg6dC5kZXB0aEZ1bmMoNTE4KTticmVhaztjYXNlIHE6dC5kZXB0aEZ1bmMoNTE2KTticmVhaztjYXNlIFk6dC5kZXB0aEZ1bmMoNTE3KTticmVhaztkZWZhdWx0OnQuZGVwdGhGdW5jKDUxNSl9ZWxzZSB0LmRlcHRoRnVuYyg1MTUpO3I9ZX19LHNldExvY2tlZDpmdW5jdGlvbih0KXtlPXR9LHNldENsZWFyOmZ1bmN0aW9uKGUpe2khPT1lJiYodC5jbGVhckRlcHRoKGUpLGk9ZSl9LHJlc2V0OmZ1bmN0aW9uKCl7ZT0hMSxuPW51bGwscj1udWxsLGk9bnVsbH19fSxsPW5ldyBmdW5jdGlvbigpe2xldCBlPSExLG49bnVsbCxyPW51bGwsaT1udWxsLG89bnVsbCxhPW51bGwscz1udWxsLGM9bnVsbCxsPW51bGw7cmV0dXJue3NldFRlc3Q6ZnVuY3Rpb24odCl7ZXx8KHQ/ZnQoMjk2MCk6bXQoMjk2MCkpfSxzZXRNYXNrOmZ1bmN0aW9uKHIpe249PT1yfHxlfHwodC5zdGVuY2lsTWFzayhyKSxuPXIpfSxzZXRGdW5jOmZ1bmN0aW9uKGUsbixhKXtyPT09ZSYmaT09PW4mJm89PT1hfHwodC5zdGVuY2lsRnVuYyhlLG4sYSkscj1lLGk9bixvPWEpfSxzZXRPcDpmdW5jdGlvbihlLG4scil7YT09PWUmJnM9PT1uJiZjPT09cnx8KHQuc3RlbmNpbE9wKGUsbixyKSxhPWUscz1uLGM9cil9LHNldExvY2tlZDpmdW5jdGlvbih0KXtlPXR9LHNldENsZWFyOmZ1bmN0aW9uKGUpe2whPT1lJiYodC5jbGVhclN0ZW5jaWwoZSksbD1lKX0scmVzZXQ6ZnVuY3Rpb24oKXtlPSExLG49bnVsbCxyPW51bGwsaT1udWxsLG89bnVsbCxhPW51bGwscz1udWxsLGM9bnVsbCxsPW51bGx9fX07bGV0IHU9e30saD1udWxsLGQ9bnVsbCxwPW51bGwsZj1udWxsLHY9bnVsbCx5PW51bGwsWj1udWxsLEo9bnVsbCxLPW51bGwsUT0hMSwkPW51bGwsdHQ9bnVsbCxldD1udWxsLG50PW51bGwscnQ9bnVsbDtjb25zdCBpdD10LmdldFBhcmFtZXRlcigzNTY2MSk7bGV0IG90PSExLGF0PTA7Y29uc3Qgc3Q9dC5nZXRQYXJhbWV0ZXIoNzkzOCk7LTEhPT1zdC5pbmRleE9mKFwiV2ViR0xcIik/KGF0PXBhcnNlRmxvYXQoL15XZWJHTFxcIChbMC05XSkvLmV4ZWMoc3QpWzFdKSxvdD1hdD49MSk6LTEhPT1zdC5pbmRleE9mKFwiT3BlbkdMIEVTXCIpJiYoYXQ9cGFyc2VGbG9hdCgvXk9wZW5HTFxcIEVTXFwgKFswLTldKS8uZXhlYyhzdClbMV0pLG90PWF0Pj0yKTtsZXQgY3Q9bnVsbCxsdD17fTtjb25zdCB1dD1uZXcgcW4saHQ9bmV3IHFuO2Z1bmN0aW9uIGR0KGUsbixyKXtjb25zdCBpPW5ldyBVaW50OEFycmF5KDQpLG89dC5jcmVhdGVUZXh0dXJlKCk7dC5iaW5kVGV4dHVyZShlLG8pLHQudGV4UGFyYW1ldGVyaShlLDEwMjQxLDk3MjgpLHQudGV4UGFyYW1ldGVyaShlLDEwMjQwLDk3MjgpO2ZvcihsZXQgZT0wO2U8cjtlKyspdC50ZXhJbWFnZTJEKG4rZSwwLDY0MDgsMSwxLDAsNjQwOCw1MTIxLGkpO3JldHVybiBvfWNvbnN0IHB0PXt9O2Z1bmN0aW9uIGZ0KGUpeyEwIT09dVtlXSYmKHQuZW5hYmxlKGUpLHVbZV09ITApfWZ1bmN0aW9uIG10KGUpeyExIT09dVtlXSYmKHQuZGlzYWJsZShlKSx1W2VdPSExKX1wdFszNTUzXT1kdCgzNTUzLDM1NTMsMSkscHRbMzQwNjddPWR0KDM0MDY3LDM0MDY5LDYpLGkuc2V0Q2xlYXIoMCwwLDAsMSksby5zZXRDbGVhcigxKSxsLnNldENsZWFyKDApLGZ0KDI5MjkpLG8uc2V0RnVuYyhqKSx4dCghMSksYnQocyksZnQoMjg4NCkseXQoeCk7Y29uc3QgZ3Q9e1tUXTozMjc3NCxbRV06MzI3NzgsW0FdOjMyNzc5fTtpZihyKWd0W0xdPTMyNzc1LGd0W1JdPTMyNzc2O2Vsc2V7Y29uc3QgdD1lLmdldChcIkVYVF9ibGVuZF9taW5tYXhcIik7bnVsbCE9PXQmJihndFtMXT10Lk1JTl9FWFQsZ3RbUl09dC5NQVhfRVhUKX1jb25zdCB2dD17W1BdOjAsW0NdOjEsW0ldOjc2OCxbTl06NzcwLFtHXTo3NzYsW1VdOjc3NCxbQl06NzcyLFtPXTo3NjksW0RdOjc3MSxbel06Nzc1LFtGXTo3NzN9O2Z1bmN0aW9uIHl0KGUsbixyLGksbyxhLHMsYyl7aWYoZSE9PXgpe2lmKGR8fChmdCgzMDQyKSxkPSEwKSxlPT09UylvPW98fG4sYT1hfHxyLHM9c3x8aSxuPT09ZiYmbz09PVp8fCh0LmJsZW5kRXF1YXRpb25TZXBhcmF0ZShndFtuXSxndFtvXSksZj1uLFo9bykscj09PXYmJmk9PT15JiZhPT09SiYmcz09PUt8fCh0LmJsZW5kRnVuY1NlcGFyYXRlKHZ0W3JdLHZ0W2ldLHZ0W2FdLHZ0W3NdKSx2PXIseT1pLEo9YSxLPXMpLHA9ZSxRPW51bGw7ZWxzZSBpZihlIT09cHx8YyE9PVEpe2lmKGY9PT1UJiZaPT09VHx8KHQuYmxlbmRFcXVhdGlvbigzMjc3NCksZj1ULFo9VCksYylzd2l0Y2goZSl7Y2FzZSBiOnQuYmxlbmRGdW5jU2VwYXJhdGUoMSw3NzEsMSw3NzEpO2JyZWFrO2Nhc2Ugdzp0LmJsZW5kRnVuYygxLDEpO2JyZWFrO2Nhc2UgXzp0LmJsZW5kRnVuY1NlcGFyYXRlKDAsMCw3NjksNzcxKTticmVhaztjYXNlIE06dC5ibGVuZEZ1bmNTZXBhcmF0ZSgwLDc2OCwwLDc3MCk7YnJlYWs7ZGVmYXVsdDpjb25zb2xlLmVycm9yKFwiVEhSRUUuV2ViR0xTdGF0ZTogSW52YWxpZCBibGVuZGluZzogXCIsZSl9ZWxzZSBzd2l0Y2goZSl7Y2FzZSBiOnQuYmxlbmRGdW5jU2VwYXJhdGUoNzcwLDc3MSwxLDc3MSk7YnJlYWs7Y2FzZSB3OnQuYmxlbmRGdW5jKDc3MCwxKTticmVhaztjYXNlIF86dC5ibGVuZEZ1bmMoMCw3NjkpO2JyZWFrO2Nhc2UgTTp0LmJsZW5kRnVuYygwLDc2OCk7YnJlYWs7ZGVmYXVsdDpjb25zb2xlLmVycm9yKFwiVEhSRUUuV2ViR0xTdGF0ZTogSW52YWxpZCBibGVuZGluZzogXCIsZSl9dj1udWxsLHk9bnVsbCxKPW51bGwsSz1udWxsLHA9ZSxRPWN9fWVsc2UgZCYmKG10KDMwNDIpLGQ9ITEpfWZ1bmN0aW9uIHh0KGUpeyQhPT1lJiYoZT90LmZyb250RmFjZSgyMzA0KTp0LmZyb250RmFjZSgyMzA1KSwkPWUpfWZ1bmN0aW9uIGJ0KGUpe2UhPT1hPyhmdCgyODg0KSxlIT09dHQmJihlPT09cz90LmN1bGxGYWNlKDEwMjkpOmU9PT1jP3QuY3VsbEZhY2UoMTAyOCk6dC5jdWxsRmFjZSgxMDMyKSkpOm10KDI4ODQpLHR0PWV9ZnVuY3Rpb24gd3QoZSxuLHIpe2U/KGZ0KDMyODIzKSxudD09PW4mJnJ0PT09cnx8KHQucG9seWdvbk9mZnNldChuLHIpLG50PW4scnQ9cikpOm10KDMyODIzKX1mdW5jdGlvbiBfdChlKXt2b2lkIDA9PT1lJiYoZT0zMzk4NCtpdC0xKSxjdCE9PWUmJih0LmFjdGl2ZVRleHR1cmUoZSksY3Q9ZSl9cmV0dXJue2J1ZmZlcnM6e2NvbG9yOmksZGVwdGg6byxzdGVuY2lsOmx9LGVuYWJsZTpmdCxkaXNhYmxlOm10LHVzZVByb2dyYW06ZnVuY3Rpb24oZSl7cmV0dXJuIGghPT1lJiYodC51c2VQcm9ncmFtKGUpLGg9ZSwhMCl9LHNldEJsZW5kaW5nOnl0LHNldE1hdGVyaWFsOmZ1bmN0aW9uKHQsZSl7dC5zaWRlPT09Zz9tdCgyODg0KTpmdCgyODg0KTtsZXQgbj10LnNpZGU9PT1tO2UmJihuPSFuKSx4dChuKSx0LmJsZW5kaW5nPT09YiYmITE9PT10LnRyYW5zcGFyZW50P3l0KHgpOnl0KHQuYmxlbmRpbmcsdC5ibGVuZEVxdWF0aW9uLHQuYmxlbmRTcmMsdC5ibGVuZERzdCx0LmJsZW5kRXF1YXRpb25BbHBoYSx0LmJsZW5kU3JjQWxwaGEsdC5ibGVuZERzdEFscGhhLHQucHJlbXVsdGlwbGllZEFscGhhKSxvLnNldEZ1bmModC5kZXB0aEZ1bmMpLG8uc2V0VGVzdCh0LmRlcHRoVGVzdCksby5zZXRNYXNrKHQuZGVwdGhXcml0ZSksaS5zZXRNYXNrKHQuY29sb3JXcml0ZSk7Y29uc3Qgcj10LnN0ZW5jaWxXcml0ZTtsLnNldFRlc3QociksciYmKGwuc2V0TWFzayh0LnN0ZW5jaWxXcml0ZU1hc2spLGwuc2V0RnVuYyh0LnN0ZW5jaWxGdW5jLHQuc3RlbmNpbFJlZix0LnN0ZW5jaWxGdW5jTWFzayksbC5zZXRPcCh0LnN0ZW5jaWxGYWlsLHQuc3RlbmNpbFpGYWlsLHQuc3RlbmNpbFpQYXNzKSksd3QodC5wb2x5Z29uT2Zmc2V0LHQucG9seWdvbk9mZnNldEZhY3Rvcix0LnBvbHlnb25PZmZzZXRVbml0cyl9LHNldEZsaXBTaWRlZDp4dCxzZXRDdWxsRmFjZTpidCxzZXRMaW5lV2lkdGg6ZnVuY3Rpb24oZSl7ZSE9PWV0JiYob3QmJnQubGluZVdpZHRoKGUpLGV0PWUpfSxzZXRQb2x5Z29uT2Zmc2V0Ond0LHNldFNjaXNzb3JUZXN0OmZ1bmN0aW9uKHQpe3Q/ZnQoMzA4OSk6bXQoMzA4OSl9LGFjdGl2ZVRleHR1cmU6X3QsYmluZFRleHR1cmU6ZnVuY3Rpb24oZSxuKXtudWxsPT09Y3QmJl90KCk7bGV0IHI9bHRbY3RdO3ZvaWQgMD09PXImJihyPXt0eXBlOnZvaWQgMCx0ZXh0dXJlOnZvaWQgMH0sbHRbY3RdPXIpLHIudHlwZT09PWUmJnIudGV4dHVyZT09PW58fCh0LmJpbmRUZXh0dXJlKGUsbnx8cHRbZV0pLHIudHlwZT1lLHIudGV4dHVyZT1uKX0sdW5iaW5kVGV4dHVyZTpmdW5jdGlvbigpe2NvbnN0IGU9bHRbY3RdO3ZvaWQgMCE9PWUmJnZvaWQgMCE9PWUudHlwZSYmKHQuYmluZFRleHR1cmUoZS50eXBlLG51bGwpLGUudHlwZT12b2lkIDAsZS50ZXh0dXJlPXZvaWQgMCl9LGNvbXByZXNzZWRUZXhJbWFnZTJEOmZ1bmN0aW9uKCl7dHJ5e3QuY29tcHJlc3NlZFRleEltYWdlMkQuYXBwbHkodCxhcmd1bWVudHMpfWNhdGNoKHQpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5XZWJHTFN0YXRlOlwiLHQpfX0sdGV4SW1hZ2UyRDpmdW5jdGlvbigpe3RyeXt0LnRleEltYWdlMkQuYXBwbHkodCxhcmd1bWVudHMpfWNhdGNoKHQpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5XZWJHTFN0YXRlOlwiLHQpfX0sdGV4SW1hZ2UzRDpmdW5jdGlvbigpe3RyeXt0LnRleEltYWdlM0QuYXBwbHkodCxhcmd1bWVudHMpfWNhdGNoKHQpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5XZWJHTFN0YXRlOlwiLHQpfX0sc2Npc3NvcjpmdW5jdGlvbihlKXshMT09PXV0LmVxdWFscyhlKSYmKHQuc2Npc3NvcihlLngsZS55LGUueixlLncpLHV0LmNvcHkoZSkpfSx2aWV3cG9ydDpmdW5jdGlvbihlKXshMT09PWh0LmVxdWFscyhlKSYmKHQudmlld3BvcnQoZS54LGUueSxlLnosZS53KSxodC5jb3B5KGUpKX0scmVzZXQ6ZnVuY3Rpb24oKXt1PXt9LGN0PW51bGwsbHQ9e30saD1udWxsLGQ9bnVsbCxwPW51bGwsZj1udWxsLHY9bnVsbCx5PW51bGwsWj1udWxsLEo9bnVsbCxLPW51bGwsUT0hMSwkPW51bGwsdHQ9bnVsbCxldD1udWxsLG50PW51bGwscnQ9bnVsbCxpLnJlc2V0KCksby5yZXNldCgpLGwucmVzZXQoKX19fWZ1bmN0aW9uIExzKHQsZSxuLHIsaSxvLGEpe2NvbnN0IHM9aS5pc1dlYkdMMixjPWkubWF4VGV4dHVyZXMsbD1pLm1heEN1YmVtYXBTaXplLHU9aS5tYXhUZXh0dXJlU2l6ZSxoPWkubWF4U2FtcGxlcyxkPW5ldyBXZWFrTWFwO2xldCBwLGY9ITE7dHJ5e2Y9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIE9mZnNjcmVlbkNhbnZhcyYmbnVsbCE9PW5ldyBPZmZzY3JlZW5DYW52YXMoMSwxKS5nZXRDb250ZXh0KFwiMmRcIil9Y2F0Y2godCl7fWZ1bmN0aW9uIG0odCxlKXtyZXR1cm4gZj9uZXcgT2Zmc2NyZWVuQ2FudmFzKHQsZSk6ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbFwiLFwiY2FudmFzXCIpfWZ1bmN0aW9uIGcodCxlLG4scil7bGV0IGk9MTtpZigodC53aWR0aD5yfHx0LmhlaWdodD5yKSYmKGk9ci9NYXRoLm1heCh0LndpZHRoLHQuaGVpZ2h0KSksaTwxfHwhMD09PWUpe2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBIVE1MSW1hZ2VFbGVtZW50JiZ0IGluc3RhbmNlb2YgSFRNTEltYWdlRWxlbWVudHx8XCJ1bmRlZmluZWRcIiE9dHlwZW9mIEhUTUxDYW52YXNFbGVtZW50JiZ0IGluc3RhbmNlb2YgSFRNTENhbnZhc0VsZW1lbnR8fFwidW5kZWZpbmVkXCIhPXR5cGVvZiBJbWFnZUJpdG1hcCYmdCBpbnN0YW5jZW9mIEltYWdlQml0bWFwKXtjb25zdCByPWU/em4uZmxvb3JQb3dlck9mVHdvOk1hdGguZmxvb3Isbz1yKGkqdC53aWR0aCksYT1yKGkqdC5oZWlnaHQpO3ZvaWQgMD09PXAmJihwPW0obyxhKSk7Y29uc3Qgcz1uP20obyxhKTpwO3Mud2lkdGg9byxzLmhlaWdodD1hO3JldHVybiBzLmdldENvbnRleHQoXCIyZFwiKS5kcmF3SW1hZ2UodCwwLDAsbyxhKSxjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiBUZXh0dXJlIGhhcyBiZWVuIHJlc2l6ZWQgZnJvbSAoXCIrdC53aWR0aCtcInhcIit0LmhlaWdodCtcIikgdG8gKFwiK28rXCJ4XCIrYStcIikuXCIpLHN9cmV0dXJuXCJkYXRhXCJpbiB0JiZjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiBJbWFnZSBpbiBEYXRhVGV4dHVyZSBpcyB0b28gYmlnIChcIit0LndpZHRoK1wieFwiK3QuaGVpZ2h0K1wiKS5cIiksdH1yZXR1cm4gdH1mdW5jdGlvbiB2KHQpe3JldHVybiB6bi5pc1Bvd2VyT2ZUd28odC53aWR0aCkmJnpuLmlzUG93ZXJPZlR3byh0LmhlaWdodCl9ZnVuY3Rpb24geSh0LGUpe3JldHVybiB0LmdlbmVyYXRlTWlwbWFwcyYmZSYmdC5taW5GaWx0ZXIhPT1mdCYmdC5taW5GaWx0ZXIhPT14dH1mdW5jdGlvbiB4KGUsbixpLG8pe3QuZ2VuZXJhdGVNaXBtYXAoZSk7ci5nZXQobikuX19tYXhNaXBMZXZlbD1NYXRoLmxvZyhNYXRoLm1heChpLG8pKSpNYXRoLkxPRzJFfWZ1bmN0aW9uIGIobixyLGkpe2lmKCExPT09cylyZXR1cm4gcjtpZihudWxsIT09bil7aWYodm9pZCAwIT09dFtuXSlyZXR1cm4gdFtuXTtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiBBdHRlbXB0IHRvIHVzZSBub24tZXhpc3RpbmcgV2ViR0wgaW50ZXJuYWwgZm9ybWF0ICdcIituK1wiJ1wiKX1sZXQgbz1yO3JldHVybiA2NDAzPT09ciYmKDUxMjY9PT1pJiYobz0zMzMyNiksNTEzMT09PWkmJihvPTMzMzI1KSw1MTIxPT09aSYmKG89MzMzMjEpKSw2NDA3PT09ciYmKDUxMjY9PT1pJiYobz0zNDgzNyksNTEzMT09PWkmJihvPTM0ODQzKSw1MTIxPT09aSYmKG89MzI4NDkpKSw2NDA4PT09ciYmKDUxMjY9PT1pJiYobz0zNDgzNiksNTEzMT09PWkmJihvPTM0ODQyKSw1MTIxPT09aSYmKG89MzI4NTYpKSwzMzMyNSE9PW8mJjMzMzI2IT09byYmMzQ4NDIhPT1vJiYzNDgzNiE9PW98fGUuZ2V0KFwiRVhUX2NvbG9yX2J1ZmZlcl9mbG9hdFwiKSxvfWZ1bmN0aW9uIHcodCl7cmV0dXJuIHQ9PT1mdHx8dD09PW10fHx0PT09dnQ/OTcyODo5NzI5fWZ1bmN0aW9uIF8oZSl7Y29uc3Qgbj1lLnRhcmdldDtuLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJkaXNwb3NlXCIsXyksZnVuY3Rpb24oZSl7Y29uc3Qgbj1yLmdldChlKTtpZih2b2lkIDA9PT1uLl9fd2ViZ2xJbml0KXJldHVybjt0LmRlbGV0ZVRleHR1cmUobi5fX3dlYmdsVGV4dHVyZSksci5yZW1vdmUoZSl9KG4pLG4uaXNWaWRlb1RleHR1cmUmJmQuZGVsZXRlKG4pLGEubWVtb3J5LnRleHR1cmVzLS19ZnVuY3Rpb24gTShlKXtjb25zdCBuPWUudGFyZ2V0O24ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImRpc3Bvc2VcIixNKSxmdW5jdGlvbihlKXtjb25zdCBuPXIuZ2V0KGUpLGk9ci5nZXQoZS50ZXh0dXJlKTtpZighZSlyZXR1cm47dm9pZCAwIT09aS5fX3dlYmdsVGV4dHVyZSYmdC5kZWxldGVUZXh0dXJlKGkuX193ZWJnbFRleHR1cmUpO2UuZGVwdGhUZXh0dXJlJiZlLmRlcHRoVGV4dHVyZS5kaXNwb3NlKCk7aWYoZS5pc1dlYkdMQ3ViZVJlbmRlclRhcmdldClmb3IobGV0IGU9MDtlPDY7ZSsrKXQuZGVsZXRlRnJhbWVidWZmZXIobi5fX3dlYmdsRnJhbWVidWZmZXJbZV0pLG4uX193ZWJnbERlcHRoYnVmZmVyJiZ0LmRlbGV0ZVJlbmRlcmJ1ZmZlcihuLl9fd2ViZ2xEZXB0aGJ1ZmZlcltlXSk7ZWxzZSB0LmRlbGV0ZUZyYW1lYnVmZmVyKG4uX193ZWJnbEZyYW1lYnVmZmVyKSxuLl9fd2ViZ2xEZXB0aGJ1ZmZlciYmdC5kZWxldGVSZW5kZXJidWZmZXIobi5fX3dlYmdsRGVwdGhidWZmZXIpLG4uX193ZWJnbE11bHRpc2FtcGxlZEZyYW1lYnVmZmVyJiZ0LmRlbGV0ZUZyYW1lYnVmZmVyKG4uX193ZWJnbE11bHRpc2FtcGxlZEZyYW1lYnVmZmVyKSxuLl9fd2ViZ2xDb2xvclJlbmRlcmJ1ZmZlciYmdC5kZWxldGVSZW5kZXJidWZmZXIobi5fX3dlYmdsQ29sb3JSZW5kZXJidWZmZXIpLG4uX193ZWJnbERlcHRoUmVuZGVyYnVmZmVyJiZ0LmRlbGV0ZVJlbmRlcmJ1ZmZlcihuLl9fd2ViZ2xEZXB0aFJlbmRlcmJ1ZmZlcik7ci5yZW1vdmUoZS50ZXh0dXJlKSxyLnJlbW92ZShlKX0obiksYS5tZW1vcnkudGV4dHVyZXMtLX1sZXQgUz0wO2Z1bmN0aW9uIFQodCxlKXtjb25zdCBpPXIuZ2V0KHQpO2lmKHQuaXNWaWRlb1RleHR1cmUmJmZ1bmN0aW9uKHQpe2NvbnN0IGU9YS5yZW5kZXIuZnJhbWU7ZC5nZXQodCkhPT1lJiYoZC5zZXQodCxlKSx0LnVwZGF0ZSgpKX0odCksdC52ZXJzaW9uPjAmJmkuX192ZXJzaW9uIT09dC52ZXJzaW9uKXtjb25zdCBuPXQuaW1hZ2U7aWYodm9pZCAwPT09biljb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiBUZXh0dXJlIG1hcmtlZCBmb3IgdXBkYXRlIGJ1dCBpbWFnZSBpcyB1bmRlZmluZWRcIik7ZWxzZXtpZighMSE9PW4uY29tcGxldGUpcmV0dXJuIHZvaWQgQyhpLHQsZSk7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogVGV4dHVyZSBtYXJrZWQgZm9yIHVwZGF0ZSBidXQgaW1hZ2UgaXMgaW5jb21wbGV0ZVwiKX19bi5hY3RpdmVUZXh0dXJlKDMzOTg0K2UpLG4uYmluZFRleHR1cmUoMzU1MyxpLl9fd2ViZ2xUZXh0dXJlKX1mdW5jdGlvbiBFKGUsaSl7Y29uc3QgYT1yLmdldChlKTtlLnZlcnNpb24+MCYmYS5fX3ZlcnNpb24hPT1lLnZlcnNpb24/ZnVuY3Rpb24oZSxyLGkpe2lmKDYhPT1yLmltYWdlLmxlbmd0aClyZXR1cm47UChlLHIpLG4uYWN0aXZlVGV4dHVyZSgzMzk4NCtpKSxuLmJpbmRUZXh0dXJlKDM0MDY3LGUuX193ZWJnbFRleHR1cmUpLHQucGl4ZWxTdG9yZWkoMzc0NDAsci5mbGlwWSk7Y29uc3QgYT1yJiYoci5pc0NvbXByZXNzZWRUZXh0dXJlfHxyLmltYWdlWzBdLmlzQ29tcHJlc3NlZFRleHR1cmUpLGM9ci5pbWFnZVswXSYmci5pbWFnZVswXS5pc0RhdGFUZXh0dXJlLHU9W107Zm9yKGxldCB0PTA7dDw2O3QrKyl1W3RdPWF8fGM/Yz9yLmltYWdlW3RdLmltYWdlOnIuaW1hZ2VbdF06ZyhyLmltYWdlW3RdLCExLCEwLGwpO2NvbnN0IGg9dVswXSxkPXYoaCl8fHMscD1vLmNvbnZlcnQoci5mb3JtYXQpLGY9by5jb252ZXJ0KHIudHlwZSksbT1iKHIuaW50ZXJuYWxGb3JtYXQscCxmKTtsZXQgdztpZihSKDM0MDY3LHIsZCksYSl7Zm9yKGxldCB0PTA7dDw2O3QrKyl7dz11W3RdLm1pcG1hcHM7Zm9yKGxldCBlPTA7ZTx3Lmxlbmd0aDtlKyspe2NvbnN0IGk9d1tlXTtyLmZvcm1hdCE9PVV0JiZyLmZvcm1hdCE9PUZ0P251bGwhPT1wP24uY29tcHJlc3NlZFRleEltYWdlMkQoMzQwNjkrdCxlLG0saS53aWR0aCxpLmhlaWdodCwwLGkuZGF0YSk6Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogQXR0ZW1wdCB0byBsb2FkIHVuc3VwcG9ydGVkIGNvbXByZXNzZWQgdGV4dHVyZSBmb3JtYXQgaW4gLnNldFRleHR1cmVDdWJlKClcIik6bi50ZXhJbWFnZTJEKDM0MDY5K3QsZSxtLGkud2lkdGgsaS5oZWlnaHQsMCxwLGYsaS5kYXRhKX19ZS5fX21heE1pcExldmVsPXcubGVuZ3RoLTF9ZWxzZXt3PXIubWlwbWFwcztmb3IobGV0IHQ9MDt0PDY7dCsrKWlmKGMpe24udGV4SW1hZ2UyRCgzNDA2OSt0LDAsbSx1W3RdLndpZHRoLHVbdF0uaGVpZ2h0LDAscCxmLHVbdF0uZGF0YSk7Zm9yKGxldCBlPTA7ZTx3Lmxlbmd0aDtlKyspe2NvbnN0IHI9d1tlXS5pbWFnZVt0XS5pbWFnZTtuLnRleEltYWdlMkQoMzQwNjkrdCxlKzEsbSxyLndpZHRoLHIuaGVpZ2h0LDAscCxmLHIuZGF0YSl9fWVsc2V7bi50ZXhJbWFnZTJEKDM0MDY5K3QsMCxtLHAsZix1W3RdKTtmb3IobGV0IGU9MDtlPHcubGVuZ3RoO2UrKyl7Y29uc3Qgcj13W2VdO24udGV4SW1hZ2UyRCgzNDA2OSt0LGUrMSxtLHAsZixyLmltYWdlW3RdKX19ZS5fX21heE1pcExldmVsPXcubGVuZ3RofXkocixkKSYmeCgzNDA2NyxyLGgud2lkdGgsaC5oZWlnaHQpO2UuX192ZXJzaW9uPXIudmVyc2lvbixyLm9uVXBkYXRlJiZyLm9uVXBkYXRlKHIpfShhLGUsaSk6KG4uYWN0aXZlVGV4dHVyZSgzMzk4NCtpKSxuLmJpbmRUZXh0dXJlKDM0MDY3LGEuX193ZWJnbFRleHR1cmUpKX1jb25zdCBBPXtbaHRdOjEwNDk3LFtkdF06MzMwNzEsW3B0XTozMzY0OH0sTD17W2Z0XTo5NzI4LFttdF06OTk4NCxbdnRdOjk5ODYsW3h0XTo5NzI5LFtidF06OTk4NSxbX3RdOjk5ODd9O2Z1bmN0aW9uIFIobixvLGEpe2E/KHQudGV4UGFyYW1ldGVyaShuLDEwMjQyLEFbby53cmFwU10pLHQudGV4UGFyYW1ldGVyaShuLDEwMjQzLEFbby53cmFwVF0pLDMyODc5IT09biYmMzU4NjYhPT1ufHx0LnRleFBhcmFtZXRlcmkobiwzMjg4MixBW28ud3JhcFJdKSx0LnRleFBhcmFtZXRlcmkobiwxMDI0MCxMW28ubWFnRmlsdGVyXSksdC50ZXhQYXJhbWV0ZXJpKG4sMTAyNDEsTFtvLm1pbkZpbHRlcl0pKToodC50ZXhQYXJhbWV0ZXJpKG4sMTAyNDIsMzMwNzEpLHQudGV4UGFyYW1ldGVyaShuLDEwMjQzLDMzMDcxKSwzMjg3OSE9PW4mJjM1ODY2IT09bnx8dC50ZXhQYXJhbWV0ZXJpKG4sMzI4ODIsMzMwNzEpLG8ud3JhcFM9PT1kdCYmby53cmFwVD09PWR0fHxjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiBUZXh0dXJlIGlzIG5vdCBwb3dlciBvZiB0d28uIFRleHR1cmUud3JhcFMgYW5kIFRleHR1cmUud3JhcFQgc2hvdWxkIGJlIHNldCB0byBUSFJFRS5DbGFtcFRvRWRnZVdyYXBwaW5nLlwiKSx0LnRleFBhcmFtZXRlcmkobiwxMDI0MCx3KG8ubWFnRmlsdGVyKSksdC50ZXhQYXJhbWV0ZXJpKG4sMTAyNDEsdyhvLm1pbkZpbHRlcikpLG8ubWluRmlsdGVyIT09ZnQmJm8ubWluRmlsdGVyIT09eHQmJmNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IFRleHR1cmUgaXMgbm90IHBvd2VyIG9mIHR3by4gVGV4dHVyZS5taW5GaWx0ZXIgc2hvdWxkIGJlIHNldCB0byBUSFJFRS5OZWFyZXN0RmlsdGVyIG9yIFRIUkVFLkxpbmVhckZpbHRlci5cIikpO2NvbnN0IGM9ZS5nZXQoXCJFWFRfdGV4dHVyZV9maWx0ZXJfYW5pc290cm9waWNcIik7aWYoYyl7aWYoby50eXBlPT09UHQmJm51bGw9PT1lLmdldChcIk9FU190ZXh0dXJlX2Zsb2F0X2xpbmVhclwiKSlyZXR1cm47aWYoby50eXBlPT09Q3QmJm51bGw9PT0oc3x8ZS5nZXQoXCJPRVNfdGV4dHVyZV9oYWxmX2Zsb2F0X2xpbmVhclwiKSkpcmV0dXJuOyhvLmFuaXNvdHJvcHk+MXx8ci5nZXQobykuX19jdXJyZW50QW5pc290cm9weSkmJih0LnRleFBhcmFtZXRlcmYobixjLlRFWFRVUkVfTUFYX0FOSVNPVFJPUFlfRVhULE1hdGgubWluKG8uYW5pc290cm9weSxpLmdldE1heEFuaXNvdHJvcHkoKSkpLHIuZ2V0KG8pLl9fY3VycmVudEFuaXNvdHJvcHk9by5hbmlzb3Ryb3B5KX19ZnVuY3Rpb24gUChlLG4pe3ZvaWQgMD09PWUuX193ZWJnbEluaXQmJihlLl9fd2ViZ2xJbml0PSEwLG4uYWRkRXZlbnRMaXN0ZW5lcihcImRpc3Bvc2VcIixfKSxlLl9fd2ViZ2xUZXh0dXJlPXQuY3JlYXRlVGV4dHVyZSgpLGEubWVtb3J5LnRleHR1cmVzKyspfWZ1bmN0aW9uIEMoZSxyLGkpe2xldCBhPTM1NTM7ci5pc0RhdGFUZXh0dXJlMkRBcnJheSYmKGE9MzU4NjYpLHIuaXNEYXRhVGV4dHVyZTNEJiYoYT0zMjg3OSksUChlLHIpLG4uYWN0aXZlVGV4dHVyZSgzMzk4NCtpKSxuLmJpbmRUZXh0dXJlKGEsZS5fX3dlYmdsVGV4dHVyZSksdC5waXhlbFN0b3JlaSgzNzQ0MCxyLmZsaXBZKSx0LnBpeGVsU3RvcmVpKDM3NDQxLHIucHJlbXVsdGlwbHlBbHBoYSksdC5waXhlbFN0b3JlaSgzMzE3LHIudW5wYWNrQWxpZ25tZW50KTtjb25zdCBjPWZ1bmN0aW9uKHQpe3JldHVybiFzJiYodC53cmFwUyE9PWR0fHx0LndyYXBUIT09ZHR8fHQubWluRmlsdGVyIT09ZnQmJnQubWluRmlsdGVyIT09eHQpfShyKSYmITE9PT12KHIuaW1hZ2UpLGw9ZyhyLmltYWdlLGMsITEsdSksaD12KGwpfHxzLGQ9by5jb252ZXJ0KHIuZm9ybWF0KTtsZXQgcCxmPW8uY29udmVydChyLnR5cGUpLG09YihyLmludGVybmFsRm9ybWF0LGQsZik7UihhLHIsaCk7Y29uc3Qgdz1yLm1pcG1hcHM7aWYoci5pc0RlcHRoVGV4dHVyZSltPTY0MDIscz9tPXIudHlwZT09PVB0PzM2MDEyOnIudHlwZT09PVJ0PzMzMTkwOnIudHlwZT09PUR0PzM1MDU2OjMzMTg5OnIudHlwZT09PVB0JiZjb25zb2xlLmVycm9yKFwiV2ViR0xSZW5kZXJlcjogRmxvYXRpbmcgcG9pbnQgZGVwdGggdGV4dHVyZSByZXF1aXJlcyBXZWJHTDIuXCIpLHIuZm9ybWF0PT09a3QmJjY0MDI9PT1tJiZyLnR5cGUhPT1BdCYmci50eXBlIT09UnQmJihjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiBVc2UgVW5zaWduZWRTaG9ydFR5cGUgb3IgVW5zaWduZWRJbnRUeXBlIGZvciBEZXB0aEZvcm1hdCBEZXB0aFRleHR1cmUuXCIpLHIudHlwZT1BdCxmPW8uY29udmVydChyLnR5cGUpKSxyLmZvcm1hdD09PVZ0JiY2NDAyPT09bSYmKG09MzQwNDEsci50eXBlIT09RHQmJihjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiBVc2UgVW5zaWduZWRJbnQyNDhUeXBlIGZvciBEZXB0aFN0ZW5jaWxGb3JtYXQgRGVwdGhUZXh0dXJlLlwiKSxyLnR5cGU9RHQsZj1vLmNvbnZlcnQoci50eXBlKSkpLG4udGV4SW1hZ2UyRCgzNTUzLDAsbSxsLndpZHRoLGwuaGVpZ2h0LDAsZCxmLG51bGwpO2Vsc2UgaWYoci5pc0RhdGFUZXh0dXJlKWlmKHcubGVuZ3RoPjAmJmgpe2ZvcihsZXQgdD0wLGU9dy5sZW5ndGg7dDxlO3QrKylwPXdbdF0sbi50ZXhJbWFnZTJEKDM1NTMsdCxtLHAud2lkdGgscC5oZWlnaHQsMCxkLGYscC5kYXRhKTtyLmdlbmVyYXRlTWlwbWFwcz0hMSxlLl9fbWF4TWlwTGV2ZWw9dy5sZW5ndGgtMX1lbHNlIG4udGV4SW1hZ2UyRCgzNTUzLDAsbSxsLndpZHRoLGwuaGVpZ2h0LDAsZCxmLGwuZGF0YSksZS5fX21heE1pcExldmVsPTA7ZWxzZSBpZihyLmlzQ29tcHJlc3NlZFRleHR1cmUpe2ZvcihsZXQgdD0wLGU9dy5sZW5ndGg7dDxlO3QrKylwPXdbdF0sci5mb3JtYXQhPT1VdCYmci5mb3JtYXQhPT1GdD9udWxsIT09ZD9uLmNvbXByZXNzZWRUZXhJbWFnZTJEKDM1NTMsdCxtLHAud2lkdGgscC5oZWlnaHQsMCxwLmRhdGEpOmNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IEF0dGVtcHQgdG8gbG9hZCB1bnN1cHBvcnRlZCBjb21wcmVzc2VkIHRleHR1cmUgZm9ybWF0IGluIC51cGxvYWRUZXh0dXJlKClcIik6bi50ZXhJbWFnZTJEKDM1NTMsdCxtLHAud2lkdGgscC5oZWlnaHQsMCxkLGYscC5kYXRhKTtlLl9fbWF4TWlwTGV2ZWw9dy5sZW5ndGgtMX1lbHNlIGlmKHIuaXNEYXRhVGV4dHVyZTJEQXJyYXkpbi50ZXhJbWFnZTNEKDM1ODY2LDAsbSxsLndpZHRoLGwuaGVpZ2h0LGwuZGVwdGgsMCxkLGYsbC5kYXRhKSxlLl9fbWF4TWlwTGV2ZWw9MDtlbHNlIGlmKHIuaXNEYXRhVGV4dHVyZTNEKW4udGV4SW1hZ2UzRCgzMjg3OSwwLG0sbC53aWR0aCxsLmhlaWdodCxsLmRlcHRoLDAsZCxmLGwuZGF0YSksZS5fX21heE1pcExldmVsPTA7ZWxzZSBpZih3Lmxlbmd0aD4wJiZoKXtmb3IobGV0IHQ9MCxlPXcubGVuZ3RoO3Q8ZTt0KyspcD13W3RdLG4udGV4SW1hZ2UyRCgzNTUzLHQsbSxkLGYscCk7ci5nZW5lcmF0ZU1pcG1hcHM9ITEsZS5fX21heE1pcExldmVsPXcubGVuZ3RoLTF9ZWxzZSBuLnRleEltYWdlMkQoMzU1MywwLG0sZCxmLGwpLGUuX19tYXhNaXBMZXZlbD0wO3kocixoKSYmeChhLHIsbC53aWR0aCxsLmhlaWdodCksZS5fX3ZlcnNpb249ci52ZXJzaW9uLHIub25VcGRhdGUmJnIub25VcGRhdGUocil9ZnVuY3Rpb24gSShlLGksYSxzKXtjb25zdCBjPW8uY29udmVydChpLnRleHR1cmUuZm9ybWF0KSxsPW8uY29udmVydChpLnRleHR1cmUudHlwZSksdT1iKGkudGV4dHVyZS5pbnRlcm5hbEZvcm1hdCxjLGwpO24udGV4SW1hZ2UyRChzLDAsdSxpLndpZHRoLGkuaGVpZ2h0LDAsYyxsLG51bGwpLHQuYmluZEZyYW1lYnVmZmVyKDM2MTYwLGUpLHQuZnJhbWVidWZmZXJUZXh0dXJlMkQoMzYxNjAsYSxzLHIuZ2V0KGkudGV4dHVyZSkuX193ZWJnbFRleHR1cmUsMCksdC5iaW5kRnJhbWVidWZmZXIoMzYxNjAsbnVsbCl9ZnVuY3Rpb24gTyhlLG4scil7aWYodC5iaW5kUmVuZGVyYnVmZmVyKDM2MTYxLGUpLG4uZGVwdGhCdWZmZXImJiFuLnN0ZW5jaWxCdWZmZXIpe2xldCBpPTMzMTg5O2lmKHIpe2NvbnN0IGU9bi5kZXB0aFRleHR1cmU7ZSYmZS5pc0RlcHRoVGV4dHVyZSYmKGUudHlwZT09PVB0P2k9MzYwMTI6ZS50eXBlPT09UnQmJihpPTMzMTkwKSk7Y29uc3Qgcj1EKG4pO3QucmVuZGVyYnVmZmVyU3RvcmFnZU11bHRpc2FtcGxlKDM2MTYxLHIsaSxuLndpZHRoLG4uaGVpZ2h0KX1lbHNlIHQucmVuZGVyYnVmZmVyU3RvcmFnZSgzNjE2MSxpLG4ud2lkdGgsbi5oZWlnaHQpO3QuZnJhbWVidWZmZXJSZW5kZXJidWZmZXIoMzYxNjAsMzYwOTYsMzYxNjEsZSl9ZWxzZSBpZihuLmRlcHRoQnVmZmVyJiZuLnN0ZW5jaWxCdWZmZXIpe2lmKHIpe2NvbnN0IGU9RChuKTt0LnJlbmRlcmJ1ZmZlclN0b3JhZ2VNdWx0aXNhbXBsZSgzNjE2MSxlLDM1MDU2LG4ud2lkdGgsbi5oZWlnaHQpfWVsc2UgdC5yZW5kZXJidWZmZXJTdG9yYWdlKDM2MTYxLDM0MDQxLG4ud2lkdGgsbi5oZWlnaHQpO3QuZnJhbWVidWZmZXJSZW5kZXJidWZmZXIoMzYxNjAsMzMzMDYsMzYxNjEsZSl9ZWxzZXtjb25zdCBlPW8uY29udmVydChuLnRleHR1cmUuZm9ybWF0KSxpPW8uY29udmVydChuLnRleHR1cmUudHlwZSksYT1iKG4udGV4dHVyZS5pbnRlcm5hbEZvcm1hdCxlLGkpO2lmKHIpe2NvbnN0IGU9RChuKTt0LnJlbmRlcmJ1ZmZlclN0b3JhZ2VNdWx0aXNhbXBsZSgzNjE2MSxlLGEsbi53aWR0aCxuLmhlaWdodCl9ZWxzZSB0LnJlbmRlcmJ1ZmZlclN0b3JhZ2UoMzYxNjEsYSxuLndpZHRoLG4uaGVpZ2h0KX10LmJpbmRSZW5kZXJidWZmZXIoMzYxNjEsbnVsbCl9ZnVuY3Rpb24gTihlKXtjb25zdCBuPXIuZ2V0KGUpLGk9ITA9PT1lLmlzV2ViR0xDdWJlUmVuZGVyVGFyZ2V0O2lmKGUuZGVwdGhUZXh0dXJlKXtpZihpKXRocm93IG5ldyBFcnJvcihcInRhcmdldC5kZXB0aFRleHR1cmUgbm90IHN1cHBvcnRlZCBpbiBDdWJlIHJlbmRlciB0YXJnZXRzXCIpOyFmdW5jdGlvbihlLG4pe2lmKG4mJm4uaXNXZWJHTEN1YmVSZW5kZXJUYXJnZXQpdGhyb3cgbmV3IEVycm9yKFwiRGVwdGggVGV4dHVyZSB3aXRoIGN1YmUgcmVuZGVyIHRhcmdldHMgaXMgbm90IHN1cHBvcnRlZFwiKTtpZih0LmJpbmRGcmFtZWJ1ZmZlcigzNjE2MCxlKSwhbi5kZXB0aFRleHR1cmV8fCFuLmRlcHRoVGV4dHVyZS5pc0RlcHRoVGV4dHVyZSl0aHJvdyBuZXcgRXJyb3IoXCJyZW5kZXJUYXJnZXQuZGVwdGhUZXh0dXJlIG11c3QgYmUgYW4gaW5zdGFuY2Ugb2YgVEhSRUUuRGVwdGhUZXh0dXJlXCIpO3IuZ2V0KG4uZGVwdGhUZXh0dXJlKS5fX3dlYmdsVGV4dHVyZSYmbi5kZXB0aFRleHR1cmUuaW1hZ2Uud2lkdGg9PT1uLndpZHRoJiZuLmRlcHRoVGV4dHVyZS5pbWFnZS5oZWlnaHQ9PT1uLmhlaWdodHx8KG4uZGVwdGhUZXh0dXJlLmltYWdlLndpZHRoPW4ud2lkdGgsbi5kZXB0aFRleHR1cmUuaW1hZ2UuaGVpZ2h0PW4uaGVpZ2h0LG4uZGVwdGhUZXh0dXJlLm5lZWRzVXBkYXRlPSEwKSxUKG4uZGVwdGhUZXh0dXJlLDApO2NvbnN0IGk9ci5nZXQobi5kZXB0aFRleHR1cmUpLl9fd2ViZ2xUZXh0dXJlO2lmKG4uZGVwdGhUZXh0dXJlLmZvcm1hdD09PWt0KXQuZnJhbWVidWZmZXJUZXh0dXJlMkQoMzYxNjAsMzYwOTYsMzU1MyxpLDApO2Vsc2V7aWYobi5kZXB0aFRleHR1cmUuZm9ybWF0IT09VnQpdGhyb3cgbmV3IEVycm9yKFwiVW5rbm93biBkZXB0aFRleHR1cmUgZm9ybWF0XCIpO3QuZnJhbWVidWZmZXJUZXh0dXJlMkQoMzYxNjAsMzMzMDYsMzU1MyxpLDApfX0obi5fX3dlYmdsRnJhbWVidWZmZXIsZSl9ZWxzZSBpZihpKXtuLl9fd2ViZ2xEZXB0aGJ1ZmZlcj1bXTtmb3IobGV0IHI9MDtyPDY7cisrKXQuYmluZEZyYW1lYnVmZmVyKDM2MTYwLG4uX193ZWJnbEZyYW1lYnVmZmVyW3JdKSxuLl9fd2ViZ2xEZXB0aGJ1ZmZlcltyXT10LmNyZWF0ZVJlbmRlcmJ1ZmZlcigpLE8obi5fX3dlYmdsRGVwdGhidWZmZXJbcl0sZSwhMSl9ZWxzZSB0LmJpbmRGcmFtZWJ1ZmZlcigzNjE2MCxuLl9fd2ViZ2xGcmFtZWJ1ZmZlciksbi5fX3dlYmdsRGVwdGhidWZmZXI9dC5jcmVhdGVSZW5kZXJidWZmZXIoKSxPKG4uX193ZWJnbERlcHRoYnVmZmVyLGUsITEpO3QuYmluZEZyYW1lYnVmZmVyKDM2MTYwLG51bGwpfWZ1bmN0aW9uIEQodCl7cmV0dXJuIHMmJnQuaXNXZWJHTE11bHRpc2FtcGxlUmVuZGVyVGFyZ2V0P01hdGgubWluKGgsdC5zYW1wbGVzKTowfWxldCBCPSExLEY9ITE7dGhpcy5hbGxvY2F0ZVRleHR1cmVVbml0PWZ1bmN0aW9uKCl7Y29uc3QgdD1TO3JldHVybiB0Pj1jJiZjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFRleHR1cmVzOiBUcnlpbmcgdG8gdXNlIFwiK3QrXCIgdGV4dHVyZSB1bml0cyB3aGlsZSB0aGlzIEdQVSBzdXBwb3J0cyBvbmx5IFwiK2MpLFMrPTEsdH0sdGhpcy5yZXNldFRleHR1cmVVbml0cz1mdW5jdGlvbigpe1M9MH0sdGhpcy5zZXRUZXh0dXJlMkQ9VCx0aGlzLnNldFRleHR1cmUyREFycmF5PWZ1bmN0aW9uKHQsZSl7Y29uc3QgaT1yLmdldCh0KTt0LnZlcnNpb24+MCYmaS5fX3ZlcnNpb24hPT10LnZlcnNpb24/QyhpLHQsZSk6KG4uYWN0aXZlVGV4dHVyZSgzMzk4NCtlKSxuLmJpbmRUZXh0dXJlKDM1ODY2LGkuX193ZWJnbFRleHR1cmUpKX0sdGhpcy5zZXRUZXh0dXJlM0Q9ZnVuY3Rpb24odCxlKXtjb25zdCBpPXIuZ2V0KHQpO3QudmVyc2lvbj4wJiZpLl9fdmVyc2lvbiE9PXQudmVyc2lvbj9DKGksdCxlKToobi5hY3RpdmVUZXh0dXJlKDMzOTg0K2UpLG4uYmluZFRleHR1cmUoMzI4NzksaS5fX3dlYmdsVGV4dHVyZSkpfSx0aGlzLnNldFRleHR1cmVDdWJlPUUsdGhpcy5zZXR1cFJlbmRlclRhcmdldD1mdW5jdGlvbihlKXtjb25zdCBpPXIuZ2V0KGUpLGM9ci5nZXQoZS50ZXh0dXJlKTtlLmFkZEV2ZW50TGlzdGVuZXIoXCJkaXNwb3NlXCIsTSksYy5fX3dlYmdsVGV4dHVyZT10LmNyZWF0ZVRleHR1cmUoKSxhLm1lbW9yeS50ZXh0dXJlcysrO2NvbnN0IGw9ITA9PT1lLmlzV2ViR0xDdWJlUmVuZGVyVGFyZ2V0LHU9ITA9PT1lLmlzV2ViR0xNdWx0aXNhbXBsZVJlbmRlclRhcmdldCxoPXYoZSl8fHM7aWYoIXN8fGUudGV4dHVyZS5mb3JtYXQhPT1GdHx8ZS50ZXh0dXJlLnR5cGUhPT1QdCYmZS50ZXh0dXJlLnR5cGUhPT1DdHx8KGUudGV4dHVyZS5mb3JtYXQ9VXQsY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogUmVuZGVyaW5nIHRvIHRleHR1cmVzIHdpdGggUkdCIGZvcm1hdCBpcyBub3Qgc3VwcG9ydGVkLiBVc2luZyBSR0JBIGZvcm1hdCBpbnN0ZWFkLlwiKSksbCl7aS5fX3dlYmdsRnJhbWVidWZmZXI9W107Zm9yKGxldCBlPTA7ZTw2O2UrKylpLl9fd2ViZ2xGcmFtZWJ1ZmZlcltlXT10LmNyZWF0ZUZyYW1lYnVmZmVyKCl9ZWxzZSBpZihpLl9fd2ViZ2xGcmFtZWJ1ZmZlcj10LmNyZWF0ZUZyYW1lYnVmZmVyKCksdSlpZihzKXtpLl9fd2ViZ2xNdWx0aXNhbXBsZWRGcmFtZWJ1ZmZlcj10LmNyZWF0ZUZyYW1lYnVmZmVyKCksaS5fX3dlYmdsQ29sb3JSZW5kZXJidWZmZXI9dC5jcmVhdGVSZW5kZXJidWZmZXIoKSx0LmJpbmRSZW5kZXJidWZmZXIoMzYxNjEsaS5fX3dlYmdsQ29sb3JSZW5kZXJidWZmZXIpO2NvbnN0IG49by5jb252ZXJ0KGUudGV4dHVyZS5mb3JtYXQpLHI9by5jb252ZXJ0KGUudGV4dHVyZS50eXBlKSxhPWIoZS50ZXh0dXJlLmludGVybmFsRm9ybWF0LG4scikscz1EKGUpO3QucmVuZGVyYnVmZmVyU3RvcmFnZU11bHRpc2FtcGxlKDM2MTYxLHMsYSxlLndpZHRoLGUuaGVpZ2h0KSx0LmJpbmRGcmFtZWJ1ZmZlcigzNjE2MCxpLl9fd2ViZ2xNdWx0aXNhbXBsZWRGcmFtZWJ1ZmZlciksdC5mcmFtZWJ1ZmZlclJlbmRlcmJ1ZmZlcigzNjE2MCwzNjA2NCwzNjE2MSxpLl9fd2ViZ2xDb2xvclJlbmRlcmJ1ZmZlciksdC5iaW5kUmVuZGVyYnVmZmVyKDM2MTYxLG51bGwpLGUuZGVwdGhCdWZmZXImJihpLl9fd2ViZ2xEZXB0aFJlbmRlcmJ1ZmZlcj10LmNyZWF0ZVJlbmRlcmJ1ZmZlcigpLE8oaS5fX3dlYmdsRGVwdGhSZW5kZXJidWZmZXIsZSwhMCkpLHQuYmluZEZyYW1lYnVmZmVyKDM2MTYwLG51bGwpfWVsc2UgY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogV2ViR0xNdWx0aXNhbXBsZVJlbmRlclRhcmdldCBjYW4gb25seSBiZSB1c2VkIHdpdGggV2ViR0wyLlwiKTtpZihsKXtuLmJpbmRUZXh0dXJlKDM0MDY3LGMuX193ZWJnbFRleHR1cmUpLFIoMzQwNjcsZS50ZXh0dXJlLGgpO2ZvcihsZXQgdD0wO3Q8Njt0KyspSShpLl9fd2ViZ2xGcmFtZWJ1ZmZlclt0XSxlLDM2MDY0LDM0MDY5K3QpO3koZS50ZXh0dXJlLGgpJiZ4KDM0MDY3LGUudGV4dHVyZSxlLndpZHRoLGUuaGVpZ2h0KSxuLmJpbmRUZXh0dXJlKDM0MDY3LG51bGwpfWVsc2Ugbi5iaW5kVGV4dHVyZSgzNTUzLGMuX193ZWJnbFRleHR1cmUpLFIoMzU1MyxlLnRleHR1cmUsaCksSShpLl9fd2ViZ2xGcmFtZWJ1ZmZlcixlLDM2MDY0LDM1NTMpLHkoZS50ZXh0dXJlLGgpJiZ4KDM1NTMsZS50ZXh0dXJlLGUud2lkdGgsZS5oZWlnaHQpLG4uYmluZFRleHR1cmUoMzU1MyxudWxsKTtlLmRlcHRoQnVmZmVyJiZOKGUpfSx0aGlzLnVwZGF0ZVJlbmRlclRhcmdldE1pcG1hcD1mdW5jdGlvbih0KXtjb25zdCBlPXQudGV4dHVyZTtpZih5KGUsdih0KXx8cykpe2NvbnN0IGk9dC5pc1dlYkdMQ3ViZVJlbmRlclRhcmdldD8zNDA2NzozNTUzLG89ci5nZXQoZSkuX193ZWJnbFRleHR1cmU7bi5iaW5kVGV4dHVyZShpLG8pLHgoaSxlLHQud2lkdGgsdC5oZWlnaHQpLG4uYmluZFRleHR1cmUoaSxudWxsKX19LHRoaXMudXBkYXRlTXVsdGlzYW1wbGVSZW5kZXJUYXJnZXQ9ZnVuY3Rpb24oZSl7aWYoZS5pc1dlYkdMTXVsdGlzYW1wbGVSZW5kZXJUYXJnZXQpaWYocyl7Y29uc3Qgbj1yLmdldChlKTt0LmJpbmRGcmFtZWJ1ZmZlcigzNjAwOCxuLl9fd2ViZ2xNdWx0aXNhbXBsZWRGcmFtZWJ1ZmZlciksdC5iaW5kRnJhbWVidWZmZXIoMzYwMDksbi5fX3dlYmdsRnJhbWVidWZmZXIpO2NvbnN0IGk9ZS53aWR0aCxvPWUuaGVpZ2h0O2xldCBhPTE2Mzg0O2UuZGVwdGhCdWZmZXImJihhfD0yNTYpLGUuc3RlbmNpbEJ1ZmZlciYmKGF8PTEwMjQpLHQuYmxpdEZyYW1lYnVmZmVyKDAsMCxpLG8sMCwwLGksbyxhLDk3MjgpLHQuYmluZEZyYW1lYnVmZmVyKDM2MTYwLG4uX193ZWJnbE11bHRpc2FtcGxlZEZyYW1lYnVmZmVyKX1lbHNlIGNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IFdlYkdMTXVsdGlzYW1wbGVSZW5kZXJUYXJnZXQgY2FuIG9ubHkgYmUgdXNlZCB3aXRoIFdlYkdMMi5cIil9LHRoaXMuc2FmZVNldFRleHR1cmUyRD1mdW5jdGlvbih0LGUpe3QmJnQuaXNXZWJHTFJlbmRlclRhcmdldCYmKCExPT09QiYmKGNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMVGV4dHVyZXMuc2FmZVNldFRleHR1cmUyRDogZG9uJ3QgdXNlIHJlbmRlciB0YXJnZXRzIGFzIHRleHR1cmVzLiBVc2UgdGhlaXIgLnRleHR1cmUgcHJvcGVydHkgaW5zdGVhZC5cIiksQj0hMCksdD10LnRleHR1cmUpLFQodCxlKX0sdGhpcy5zYWZlU2V0VGV4dHVyZUN1YmU9ZnVuY3Rpb24odCxlKXt0JiZ0LmlzV2ViR0xDdWJlUmVuZGVyVGFyZ2V0JiYoITE9PT1GJiYoY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xUZXh0dXJlcy5zYWZlU2V0VGV4dHVyZUN1YmU6IGRvbid0IHVzZSBjdWJlIHJlbmRlciB0YXJnZXRzIGFzIHRleHR1cmVzLiBVc2UgdGhlaXIgLnRleHR1cmUgcHJvcGVydHkgaW5zdGVhZC5cIiksRj0hMCksdD10LnRleHR1cmUpLEUodCxlKX19ZnVuY3Rpb24gUnModCxlLG4pe2NvbnN0IHI9bi5pc1dlYkdMMjtyZXR1cm57Y29udmVydDpmdW5jdGlvbih0KXtsZXQgbjtpZih0PT09U3QpcmV0dXJuIDUxMjE7aWYodD09PUl0KXJldHVybiAzMjgxOTtpZih0PT09T3QpcmV0dXJuIDMyODIwO2lmKHQ9PT1OdClyZXR1cm4gMzM2MzU7aWYodD09PVR0KXJldHVybiA1MTIwO2lmKHQ9PT1FdClyZXR1cm4gNTEyMjtpZih0PT09QXQpcmV0dXJuIDUxMjM7aWYodD09PUx0KXJldHVybiA1MTI0O2lmKHQ9PT1SdClyZXR1cm4gNTEyNTtpZih0PT09UHQpcmV0dXJuIDUxMjY7aWYodD09PUN0KXJldHVybiByPzUxMzE6KG49ZS5nZXQoXCJPRVNfdGV4dHVyZV9oYWxmX2Zsb2F0XCIpLG51bGwhPT1uP24uSEFMRl9GTE9BVF9PRVM6bnVsbCk7aWYodD09PUJ0KXJldHVybiA2NDA2O2lmKHQ9PT1GdClyZXR1cm4gNjQwNztpZih0PT09VXQpcmV0dXJuIDY0MDg7aWYodD09PXp0KXJldHVybiA2NDA5O2lmKHQ9PT1HdClyZXR1cm4gNjQxMDtpZih0PT09a3QpcmV0dXJuIDY0MDI7aWYodD09PVZ0KXJldHVybiAzNDA0MTtpZih0PT09anQpcmV0dXJuIDY0MDM7aWYodD09PVd0KXJldHVybiAzNjI0NDtpZih0PT09WHQpcmV0dXJuIDMzMzE5O2lmKHQ9PT1xdClyZXR1cm4gMzMzMjA7aWYodD09PVl0KXJldHVybiAzNjI0ODtpZih0PT09WnQpcmV0dXJuIDM2MjQ5O2lmKHQ9PT1KdHx8dD09PUt0fHx0PT09UXR8fHQ9PT0kdCl7aWYobj1lLmdldChcIldFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9zM3RjXCIpLG51bGw9PT1uKXJldHVybiBudWxsO2lmKHQ9PT1KdClyZXR1cm4gbi5DT01QUkVTU0VEX1JHQl9TM1RDX0RYVDFfRVhUO2lmKHQ9PT1LdClyZXR1cm4gbi5DT01QUkVTU0VEX1JHQkFfUzNUQ19EWFQxX0VYVDtpZih0PT09UXQpcmV0dXJuIG4uQ09NUFJFU1NFRF9SR0JBX1MzVENfRFhUM19FWFQ7aWYodD09PSR0KXJldHVybiBuLkNPTVBSRVNTRURfUkdCQV9TM1RDX0RYVDVfRVhUfWlmKHQ9PT10ZXx8dD09PWVlfHx0PT09bmV8fHQ9PT1yZSl7aWYobj1lLmdldChcIldFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9wdnJ0Y1wiKSxudWxsPT09bilyZXR1cm4gbnVsbDtpZih0PT09dGUpcmV0dXJuIG4uQ09NUFJFU1NFRF9SR0JfUFZSVENfNEJQUFYxX0lNRztpZih0PT09ZWUpcmV0dXJuIG4uQ09NUFJFU1NFRF9SR0JfUFZSVENfMkJQUFYxX0lNRztpZih0PT09bmUpcmV0dXJuIG4uQ09NUFJFU1NFRF9SR0JBX1BWUlRDXzRCUFBWMV9JTUc7aWYodD09PXJlKXJldHVybiBuLkNPTVBSRVNTRURfUkdCQV9QVlJUQ18yQlBQVjFfSU1HfWlmKHQ9PT1pZSlyZXR1cm4gbj1lLmdldChcIldFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9ldGMxXCIpLG51bGwhPT1uP24uQ09NUFJFU1NFRF9SR0JfRVRDMV9XRUJHTDpudWxsO2lmKCh0PT09b2V8fHQ9PT1hZSkmJihuPWUuZ2V0KFwiV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX2V0Y1wiKSxudWxsIT09bikpe2lmKHQ9PT1vZSlyZXR1cm4gbi5DT01QUkVTU0VEX1JHQjhfRVRDMjtpZih0PT09YWUpcmV0dXJuIG4uQ09NUFJFU1NFRF9SR0JBOF9FVEMyX0VBQ31yZXR1cm4gdD09PXNlfHx0PT09Y2V8fHQ9PT1sZXx8dD09PXVlfHx0PT09aGV8fHQ9PT1kZXx8dD09PXBlfHx0PT09ZmV8fHQ9PT1tZXx8dD09PWdlfHx0PT09dmV8fHQ9PT15ZXx8dD09PXhlfHx0PT09YmV8fHQ9PT1fZXx8dD09PU1lfHx0PT09U2V8fHQ9PT1UZXx8dD09PUVlfHx0PT09QWV8fHQ9PT1MZXx8dD09PVJlfHx0PT09UGV8fHQ9PT1DZXx8dD09PUllfHx0PT09T2V8fHQ9PT1OZXx8dD09PURlPyhuPWUuZ2V0KFwiV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX2FzdGNcIiksbnVsbCE9PW4/dDpudWxsKTp0PT09d2U/KG49ZS5nZXQoXCJFWFRfdGV4dHVyZV9jb21wcmVzc2lvbl9icHRjXCIpLG51bGwhPT1uP3Q6bnVsbCk6dD09PUR0P3I/MzQwNDI6KG49ZS5nZXQoXCJXRUJHTF9kZXB0aF90ZXh0dXJlXCIpLG51bGwhPT1uP24uVU5TSUdORURfSU5UXzI0XzhfV0VCR0w6bnVsbCk6dm9pZCAwfX19ZnVuY3Rpb24gUHModD1bXSl7d28uY2FsbCh0aGlzKSx0aGlzLmNhbWVyYXM9dH1mdW5jdGlvbiBDcygpe0pyLmNhbGwodGhpcyksdGhpcy50eXBlPVwiR3JvdXBcIn1mdW5jdGlvbiBJcygpe3RoaXMuX3RhcmdldFJheT1udWxsLHRoaXMuX2dyaXA9bnVsbCx0aGlzLl9oYW5kPW51bGx9ZnVuY3Rpb24gT3ModCxlKXtjb25zdCBuPXRoaXM7bGV0IHI9bnVsbCxpPTEsbz1udWxsLGE9XCJsb2NhbC1mbG9vclwiLHM9bnVsbDtjb25zdCBjPVtdLGw9bmV3IE1hcCx1PW5ldyB3bzt1LmxheWVycy5lbmFibGUoMSksdS52aWV3cG9ydD1uZXcgcW47Y29uc3QgaD1uZXcgd287aC5sYXllcnMuZW5hYmxlKDIpLGgudmlld3BvcnQ9bmV3IHFuO2NvbnN0IGQ9W3UsaF0scD1uZXcgUHM7cC5sYXllcnMuZW5hYmxlKDEpLHAubGF5ZXJzLmVuYWJsZSgyKTtsZXQgZj1udWxsLG09bnVsbDtmdW5jdGlvbiBnKHQpe2NvbnN0IGU9bC5nZXQodC5pbnB1dFNvdXJjZSk7ZSYmZS5kaXNwYXRjaEV2ZW50KHt0eXBlOnQudHlwZSxkYXRhOnQuaW5wdXRTb3VyY2V9KX1mdW5jdGlvbiB2KCl7bC5mb3JFYWNoKChmdW5jdGlvbih0LGUpe3QuZGlzY29ubmVjdChlKX0pKSxsLmNsZWFyKCksdC5zZXRGcmFtZWJ1ZmZlcihudWxsKSx0LnNldFJlbmRlclRhcmdldCh0LmdldFJlbmRlclRhcmdldCgpKSxTLnN0b3AoKSxuLmlzUHJlc2VudGluZz0hMSxuLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJzZXNzaW9uZW5kXCJ9KX1mdW5jdGlvbiB5KHQpe289dCxTLnNldENvbnRleHQociksUy5zdGFydCgpLG4uaXNQcmVzZW50aW5nPSEwLG4uZGlzcGF0Y2hFdmVudCh7dHlwZTpcInNlc3Npb25zdGFydFwifSl9ZnVuY3Rpb24geCh0KXtjb25zdCBlPXIuaW5wdXRTb3VyY2VzO2ZvcihsZXQgdD0wO3Q8Yy5sZW5ndGg7dCsrKWwuc2V0KGVbdF0sY1t0XSk7Zm9yKGxldCBlPTA7ZTx0LnJlbW92ZWQubGVuZ3RoO2UrKyl7Y29uc3Qgbj10LnJlbW92ZWRbZV0scj1sLmdldChuKTtyJiYoci5kaXNwYXRjaEV2ZW50KHt0eXBlOlwiZGlzY29ubmVjdGVkXCIsZGF0YTpufSksbC5kZWxldGUobikpfWZvcihsZXQgZT0wO2U8dC5hZGRlZC5sZW5ndGg7ZSsrKXtjb25zdCBuPXQuYWRkZWRbZV0scj1sLmdldChuKTtyJiZyLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJjb25uZWN0ZWRcIixkYXRhOm59KX19dGhpcy5lbmFibGVkPSExLHRoaXMuaXNQcmVzZW50aW5nPSExLHRoaXMuZ2V0Q29udHJvbGxlcj1mdW5jdGlvbih0KXtsZXQgZT1jW3RdO3JldHVybiB2b2lkIDA9PT1lJiYoZT1uZXcgSXMsY1t0XT1lKSxlLmdldFRhcmdldFJheVNwYWNlKCl9LHRoaXMuZ2V0Q29udHJvbGxlckdyaXA9ZnVuY3Rpb24odCl7bGV0IGU9Y1t0XTtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9bmV3IElzLGNbdF09ZSksZS5nZXRHcmlwU3BhY2UoKX0sdGhpcy5nZXRIYW5kPWZ1bmN0aW9uKHQpe2xldCBlPWNbdF07cmV0dXJuIHZvaWQgMD09PWUmJihlPW5ldyBJcyxjW3RdPWUpLGUuZ2V0SGFuZFNwYWNlKCl9LHRoaXMuc2V0RnJhbWVidWZmZXJTY2FsZUZhY3Rvcj1mdW5jdGlvbih0KXtpPXQsITA9PT1uLmlzUHJlc2VudGluZyYmY29uc29sZS53YXJuKFwiVEhSRUUuV2ViWFJNYW5hZ2VyOiBDYW5ub3QgY2hhbmdlIGZyYW1lYnVmZmVyIHNjYWxlIHdoaWxlIHByZXNlbnRpbmcuXCIpfSx0aGlzLnNldFJlZmVyZW5jZVNwYWNlVHlwZT1mdW5jdGlvbih0KXthPXQsITA9PT1uLmlzUHJlc2VudGluZyYmY29uc29sZS53YXJuKFwiVEhSRUUuV2ViWFJNYW5hZ2VyOiBDYW5ub3QgY2hhbmdlIHJlZmVyZW5jZSBzcGFjZSB0eXBlIHdoaWxlIHByZXNlbnRpbmcuXCIpfSx0aGlzLmdldFJlZmVyZW5jZVNwYWNlPWZ1bmN0aW9uKCl7cmV0dXJuIG99LHRoaXMuZ2V0U2Vzc2lvbj1mdW5jdGlvbigpe3JldHVybiByfSx0aGlzLnNldFNlc3Npb249ZnVuY3Rpb24odCl7aWYocj10LG51bGwhPT1yKXtyLmFkZEV2ZW50TGlzdGVuZXIoXCJzZWxlY3RcIixnKSxyLmFkZEV2ZW50TGlzdGVuZXIoXCJzZWxlY3RzdGFydFwiLGcpLHIuYWRkRXZlbnRMaXN0ZW5lcihcInNlbGVjdGVuZFwiLGcpLHIuYWRkRXZlbnRMaXN0ZW5lcihcInNxdWVlemVcIixnKSxyLmFkZEV2ZW50TGlzdGVuZXIoXCJzcXVlZXplc3RhcnRcIixnKSxyLmFkZEV2ZW50TGlzdGVuZXIoXCJzcXVlZXplZW5kXCIsZyksci5hZGRFdmVudExpc3RlbmVyKFwiZW5kXCIsdik7Y29uc3QgdD1lLmdldENvbnRleHRBdHRyaWJ1dGVzKCk7ITAhPT10LnhyQ29tcGF0aWJsZSYmZS5tYWtlWFJDb21wYXRpYmxlKCk7Y29uc3Qgbj17YW50aWFsaWFzOnQuYW50aWFsaWFzLGFscGhhOnQuYWxwaGEsZGVwdGg6dC5kZXB0aCxzdGVuY2lsOnQuc3RlbmNpbCxmcmFtZWJ1ZmZlclNjYWxlRmFjdG9yOml9LG89bmV3IFhSV2ViR0xMYXllcihyLGUsbik7ci51cGRhdGVSZW5kZXJTdGF0ZSh7YmFzZUxheWVyOm99KSxyLnJlcXVlc3RSZWZlcmVuY2VTcGFjZShhKS50aGVuKHkpLHIuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0c291cmNlc2NoYW5nZVwiLHgpfX07Y29uc3QgYj1uZXcgS24sdz1uZXcgS247ZnVuY3Rpb24gXyh0LGUpe251bGw9PT1lP3QubWF0cml4V29ybGQuY29weSh0Lm1hdHJpeCk6dC5tYXRyaXhXb3JsZC5tdWx0aXBseU1hdHJpY2VzKGUubWF0cml4V29ybGQsdC5tYXRyaXgpLHQubWF0cml4V29ybGRJbnZlcnNlLmNvcHkodC5tYXRyaXhXb3JsZCkuaW52ZXJ0KCl9dGhpcy5nZXRDYW1lcmE9ZnVuY3Rpb24odCl7cC5uZWFyPWgubmVhcj11Lm5lYXI9dC5uZWFyLHAuZmFyPWguZmFyPXUuZmFyPXQuZmFyLGY9PT1wLm5lYXImJm09PT1wLmZhcnx8KHIudXBkYXRlUmVuZGVyU3RhdGUoe2RlcHRoTmVhcjpwLm5lYXIsZGVwdGhGYXI6cC5mYXJ9KSxmPXAubmVhcixtPXAuZmFyKTtjb25zdCBlPXQucGFyZW50LG49cC5jYW1lcmFzO18ocCxlKTtmb3IobGV0IHQ9MDt0PG4ubGVuZ3RoO3QrKylfKG5bdF0sZSk7dC5tYXRyaXhXb3JsZC5jb3B5KHAubWF0cml4V29ybGQpO2NvbnN0IGk9dC5jaGlsZHJlbjtmb3IobGV0IHQ9MCxlPWkubGVuZ3RoO3Q8ZTt0KyspaVt0XS51cGRhdGVNYXRyaXhXb3JsZCghMCk7cmV0dXJuIDI9PT1uLmxlbmd0aD9mdW5jdGlvbih0LGUsbil7Yi5zZXRGcm9tTWF0cml4UG9zaXRpb24oZS5tYXRyaXhXb3JsZCksdy5zZXRGcm9tTWF0cml4UG9zaXRpb24obi5tYXRyaXhXb3JsZCk7Y29uc3Qgcj1iLmRpc3RhbmNlVG8odyksaT1lLnByb2plY3Rpb25NYXRyaXguZWxlbWVudHMsbz1uLnByb2plY3Rpb25NYXRyaXguZWxlbWVudHMsYT1pWzE0XS8oaVsxMF0tMSkscz1pWzE0XS8oaVsxMF0rMSksYz0oaVs5XSsxKS9pWzVdLGw9KGlbOV0tMSkvaVs1XSx1PShpWzhdLTEpL2lbMF0saD0ob1s4XSsxKS9vWzBdLGQ9YSp1LHA9YSpoLGY9ci8oLXUraCksbT1mKi11O2UubWF0cml4V29ybGQuZGVjb21wb3NlKHQucG9zaXRpb24sdC5xdWF0ZXJuaW9uLHQuc2NhbGUpLHQudHJhbnNsYXRlWChtKSx0LnRyYW5zbGF0ZVooZiksdC5tYXRyaXhXb3JsZC5jb21wb3NlKHQucG9zaXRpb24sdC5xdWF0ZXJuaW9uLHQuc2NhbGUpLHQubWF0cml4V29ybGRJbnZlcnNlLmNvcHkodC5tYXRyaXhXb3JsZCkuaW52ZXJ0KCk7Y29uc3QgZz1hK2Ysdj1zK2YseT1kLW0seD1wKyhyLW0pLF89YypzL3YqZyxNPWwqcy92Kmc7dC5wcm9qZWN0aW9uTWF0cml4Lm1ha2VQZXJzcGVjdGl2ZSh5LHgsXyxNLGcsdil9KHAsdSxoKTpwLnByb2plY3Rpb25NYXRyaXguY29weSh1LnByb2plY3Rpb25NYXRyaXgpLHB9O2xldCBNPW51bGw7Y29uc3QgUz1uZXcgUm87Uy5zZXRBbmltYXRpb25Mb29wKChmdW5jdGlvbihlLG4pe2lmKHM9bi5nZXRWaWV3ZXJQb3NlKG8pLG51bGwhPT1zKXtjb25zdCBlPXMudmlld3Msbj1yLnJlbmRlclN0YXRlLmJhc2VMYXllcjt0LnNldEZyYW1lYnVmZmVyKG4uZnJhbWVidWZmZXIpO2xldCBpPSExO2UubGVuZ3RoIT09cC5jYW1lcmFzLmxlbmd0aCYmKHAuY2FtZXJhcy5sZW5ndGg9MCxpPSEwKTtmb3IobGV0IHQ9MDt0PGUubGVuZ3RoO3QrKyl7Y29uc3Qgcj1lW3RdLG89bi5nZXRWaWV3cG9ydChyKSxhPWRbdF07YS5tYXRyaXguZnJvbUFycmF5KHIudHJhbnNmb3JtLm1hdHJpeCksYS5wcm9qZWN0aW9uTWF0cml4LmZyb21BcnJheShyLnByb2plY3Rpb25NYXRyaXgpLGEudmlld3BvcnQuc2V0KG8ueCxvLnksby53aWR0aCxvLmhlaWdodCksMD09PXQmJnAubWF0cml4LmNvcHkoYS5tYXRyaXgpLCEwPT09aSYmcC5jYW1lcmFzLnB1c2goYSl9fWNvbnN0IGk9ci5pbnB1dFNvdXJjZXM7Zm9yKGxldCB0PTA7dDxjLmxlbmd0aDt0Kyspe2NvbnN0IGU9Y1t0XSxyPWlbdF07ZS51cGRhdGUocixuLG8pfU0mJk0oZSxuKX0pKSx0aGlzLnNldEFuaW1hdGlvbkxvb3A9ZnVuY3Rpb24odCl7TT10fSx0aGlzLmRpc3Bvc2U9ZnVuY3Rpb24oKXt9fWZ1bmN0aW9uIE5zKHQpe2Z1bmN0aW9uIGUoZSxuKXtlLm9wYWNpdHkudmFsdWU9bi5vcGFjaXR5LG4uY29sb3ImJmUuZGlmZnVzZS52YWx1ZS5jb3B5KG4uY29sb3IpLG4uZW1pc3NpdmUmJmUuZW1pc3NpdmUudmFsdWUuY29weShuLmVtaXNzaXZlKS5tdWx0aXBseVNjYWxhcihuLmVtaXNzaXZlSW50ZW5zaXR5KSxuLm1hcCYmKGUubWFwLnZhbHVlPW4ubWFwKSxuLmFscGhhTWFwJiYoZS5hbHBoYU1hcC52YWx1ZT1uLmFscGhhTWFwKSxuLnNwZWN1bGFyTWFwJiYoZS5zcGVjdWxhck1hcC52YWx1ZT1uLnNwZWN1bGFyTWFwKTtjb25zdCByPXQuZ2V0KG4pLmVudk1hcDtpZihyKXtlLmVudk1hcC52YWx1ZT1yLGUuZmxpcEVudk1hcC52YWx1ZT1yLmlzQ3ViZVRleHR1cmUmJnIuX25lZWRzRmxpcEVudk1hcD8tMToxLGUucmVmbGVjdGl2aXR5LnZhbHVlPW4ucmVmbGVjdGl2aXR5LGUucmVmcmFjdGlvblJhdGlvLnZhbHVlPW4ucmVmcmFjdGlvblJhdGlvO2NvbnN0IGk9dC5nZXQocikuX19tYXhNaXBMZXZlbDt2b2lkIDAhPT1pJiYoZS5tYXhNaXBMZXZlbC52YWx1ZT1pKX1sZXQgaSxvO24ubGlnaHRNYXAmJihlLmxpZ2h0TWFwLnZhbHVlPW4ubGlnaHRNYXAsZS5saWdodE1hcEludGVuc2l0eS52YWx1ZT1uLmxpZ2h0TWFwSW50ZW5zaXR5KSxuLmFvTWFwJiYoZS5hb01hcC52YWx1ZT1uLmFvTWFwLGUuYW9NYXBJbnRlbnNpdHkudmFsdWU9bi5hb01hcEludGVuc2l0eSksbi5tYXA/aT1uLm1hcDpuLnNwZWN1bGFyTWFwP2k9bi5zcGVjdWxhck1hcDpuLmRpc3BsYWNlbWVudE1hcD9pPW4uZGlzcGxhY2VtZW50TWFwOm4ubm9ybWFsTWFwP2k9bi5ub3JtYWxNYXA6bi5idW1wTWFwP2k9bi5idW1wTWFwOm4ucm91Z2huZXNzTWFwP2k9bi5yb3VnaG5lc3NNYXA6bi5tZXRhbG5lc3NNYXA/aT1uLm1ldGFsbmVzc01hcDpuLmFscGhhTWFwP2k9bi5hbHBoYU1hcDpuLmVtaXNzaXZlTWFwP2k9bi5lbWlzc2l2ZU1hcDpuLmNsZWFyY29hdE1hcD9pPW4uY2xlYXJjb2F0TWFwOm4uY2xlYXJjb2F0Tm9ybWFsTWFwP2k9bi5jbGVhcmNvYXROb3JtYWxNYXA6bi5jbGVhcmNvYXRSb3VnaG5lc3NNYXAmJihpPW4uY2xlYXJjb2F0Um91Z2huZXNzTWFwKSx2b2lkIDAhPT1pJiYoaS5pc1dlYkdMUmVuZGVyVGFyZ2V0JiYoaT1pLnRleHR1cmUpLCEwPT09aS5tYXRyaXhBdXRvVXBkYXRlJiZpLnVwZGF0ZU1hdHJpeCgpLGUudXZUcmFuc2Zvcm0udmFsdWUuY29weShpLm1hdHJpeCkpLG4uYW9NYXA/bz1uLmFvTWFwOm4ubGlnaHRNYXAmJihvPW4ubGlnaHRNYXApLHZvaWQgMCE9PW8mJihvLmlzV2ViR0xSZW5kZXJUYXJnZXQmJihvPW8udGV4dHVyZSksITA9PT1vLm1hdHJpeEF1dG9VcGRhdGUmJm8udXBkYXRlTWF0cml4KCksZS51djJUcmFuc2Zvcm0udmFsdWUuY29weShvLm1hdHJpeCkpfWZ1bmN0aW9uIG4oZSxuKXtlLnJvdWdobmVzcy52YWx1ZT1uLnJvdWdobmVzcyxlLm1ldGFsbmVzcy52YWx1ZT1uLm1ldGFsbmVzcyxuLnJvdWdobmVzc01hcCYmKGUucm91Z2huZXNzTWFwLnZhbHVlPW4ucm91Z2huZXNzTWFwKSxuLm1ldGFsbmVzc01hcCYmKGUubWV0YWxuZXNzTWFwLnZhbHVlPW4ubWV0YWxuZXNzTWFwKSxuLmVtaXNzaXZlTWFwJiYoZS5lbWlzc2l2ZU1hcC52YWx1ZT1uLmVtaXNzaXZlTWFwKSxuLmJ1bXBNYXAmJihlLmJ1bXBNYXAudmFsdWU9bi5idW1wTWFwLGUuYnVtcFNjYWxlLnZhbHVlPW4uYnVtcFNjYWxlLG4uc2lkZT09PW0mJihlLmJ1bXBTY2FsZS52YWx1ZSo9LTEpKSxuLm5vcm1hbE1hcCYmKGUubm9ybWFsTWFwLnZhbHVlPW4ubm9ybWFsTWFwLGUubm9ybWFsU2NhbGUudmFsdWUuY29weShuLm5vcm1hbFNjYWxlKSxuLnNpZGU9PT1tJiZlLm5vcm1hbFNjYWxlLnZhbHVlLm5lZ2F0ZSgpKSxuLmRpc3BsYWNlbWVudE1hcCYmKGUuZGlzcGxhY2VtZW50TWFwLnZhbHVlPW4uZGlzcGxhY2VtZW50TWFwLGUuZGlzcGxhY2VtZW50U2NhbGUudmFsdWU9bi5kaXNwbGFjZW1lbnRTY2FsZSxlLmRpc3BsYWNlbWVudEJpYXMudmFsdWU9bi5kaXNwbGFjZW1lbnRCaWFzKTt0LmdldChuKS5lbnZNYXAmJihlLmVudk1hcEludGVuc2l0eS52YWx1ZT1uLmVudk1hcEludGVuc2l0eSl9cmV0dXJue3JlZnJlc2hGb2dVbmlmb3JtczpmdW5jdGlvbih0LGUpe3QuZm9nQ29sb3IudmFsdWUuY29weShlLmNvbG9yKSxlLmlzRm9nPyh0LmZvZ05lYXIudmFsdWU9ZS5uZWFyLHQuZm9nRmFyLnZhbHVlPWUuZmFyKTplLmlzRm9nRXhwMiYmKHQuZm9nRGVuc2l0eS52YWx1ZT1lLmRlbnNpdHkpfSxyZWZyZXNoTWF0ZXJpYWxVbmlmb3JtczpmdW5jdGlvbih0LHIsaSxvKXtyLmlzTWVzaEJhc2ljTWF0ZXJpYWw/ZSh0LHIpOnIuaXNNZXNoTGFtYmVydE1hdGVyaWFsPyhlKHQsciksZnVuY3Rpb24odCxlKXtlLmVtaXNzaXZlTWFwJiYodC5lbWlzc2l2ZU1hcC52YWx1ZT1lLmVtaXNzaXZlTWFwKX0odCxyKSk6ci5pc01lc2hUb29uTWF0ZXJpYWw/KGUodCxyKSxmdW5jdGlvbih0LGUpe2UuZ3JhZGllbnRNYXAmJih0LmdyYWRpZW50TWFwLnZhbHVlPWUuZ3JhZGllbnRNYXApO2UuZW1pc3NpdmVNYXAmJih0LmVtaXNzaXZlTWFwLnZhbHVlPWUuZW1pc3NpdmVNYXApO2UuYnVtcE1hcCYmKHQuYnVtcE1hcC52YWx1ZT1lLmJ1bXBNYXAsdC5idW1wU2NhbGUudmFsdWU9ZS5idW1wU2NhbGUsZS5zaWRlPT09bSYmKHQuYnVtcFNjYWxlLnZhbHVlKj0tMSkpO2Uubm9ybWFsTWFwJiYodC5ub3JtYWxNYXAudmFsdWU9ZS5ub3JtYWxNYXAsdC5ub3JtYWxTY2FsZS52YWx1ZS5jb3B5KGUubm9ybWFsU2NhbGUpLGUuc2lkZT09PW0mJnQubm9ybWFsU2NhbGUudmFsdWUubmVnYXRlKCkpO2UuZGlzcGxhY2VtZW50TWFwJiYodC5kaXNwbGFjZW1lbnRNYXAudmFsdWU9ZS5kaXNwbGFjZW1lbnRNYXAsdC5kaXNwbGFjZW1lbnRTY2FsZS52YWx1ZT1lLmRpc3BsYWNlbWVudFNjYWxlLHQuZGlzcGxhY2VtZW50Qmlhcy52YWx1ZT1lLmRpc3BsYWNlbWVudEJpYXMpfSh0LHIpKTpyLmlzTWVzaFBob25nTWF0ZXJpYWw/KGUodCxyKSxmdW5jdGlvbih0LGUpe3Quc3BlY3VsYXIudmFsdWUuY29weShlLnNwZWN1bGFyKSx0LnNoaW5pbmVzcy52YWx1ZT1NYXRoLm1heChlLnNoaW5pbmVzcywxZS00KSxlLmVtaXNzaXZlTWFwJiYodC5lbWlzc2l2ZU1hcC52YWx1ZT1lLmVtaXNzaXZlTWFwKTtlLmJ1bXBNYXAmJih0LmJ1bXBNYXAudmFsdWU9ZS5idW1wTWFwLHQuYnVtcFNjYWxlLnZhbHVlPWUuYnVtcFNjYWxlLGUuc2lkZT09PW0mJih0LmJ1bXBTY2FsZS52YWx1ZSo9LTEpKTtlLm5vcm1hbE1hcCYmKHQubm9ybWFsTWFwLnZhbHVlPWUubm9ybWFsTWFwLHQubm9ybWFsU2NhbGUudmFsdWUuY29weShlLm5vcm1hbFNjYWxlKSxlLnNpZGU9PT1tJiZ0Lm5vcm1hbFNjYWxlLnZhbHVlLm5lZ2F0ZSgpKTtlLmRpc3BsYWNlbWVudE1hcCYmKHQuZGlzcGxhY2VtZW50TWFwLnZhbHVlPWUuZGlzcGxhY2VtZW50TWFwLHQuZGlzcGxhY2VtZW50U2NhbGUudmFsdWU9ZS5kaXNwbGFjZW1lbnRTY2FsZSx0LmRpc3BsYWNlbWVudEJpYXMudmFsdWU9ZS5kaXNwbGFjZW1lbnRCaWFzKX0odCxyKSk6ci5pc01lc2hTdGFuZGFyZE1hdGVyaWFsPyhlKHQsciksci5pc01lc2hQaHlzaWNhbE1hdGVyaWFsP2Z1bmN0aW9uKHQsZSl7bih0LGUpLHQucmVmbGVjdGl2aXR5LnZhbHVlPWUucmVmbGVjdGl2aXR5LHQuY2xlYXJjb2F0LnZhbHVlPWUuY2xlYXJjb2F0LHQuY2xlYXJjb2F0Um91Z2huZXNzLnZhbHVlPWUuY2xlYXJjb2F0Um91Z2huZXNzLGUuc2hlZW4mJnQuc2hlZW4udmFsdWUuY29weShlLnNoZWVuKTtlLmNsZWFyY29hdE1hcCYmKHQuY2xlYXJjb2F0TWFwLnZhbHVlPWUuY2xlYXJjb2F0TWFwKTtlLmNsZWFyY29hdFJvdWdobmVzc01hcCYmKHQuY2xlYXJjb2F0Um91Z2huZXNzTWFwLnZhbHVlPWUuY2xlYXJjb2F0Um91Z2huZXNzTWFwKTtlLmNsZWFyY29hdE5vcm1hbE1hcCYmKHQuY2xlYXJjb2F0Tm9ybWFsU2NhbGUudmFsdWUuY29weShlLmNsZWFyY29hdE5vcm1hbFNjYWxlKSx0LmNsZWFyY29hdE5vcm1hbE1hcC52YWx1ZT1lLmNsZWFyY29hdE5vcm1hbE1hcCxlLnNpZGU9PT1tJiZ0LmNsZWFyY29hdE5vcm1hbFNjYWxlLnZhbHVlLm5lZ2F0ZSgpKTt0LnRyYW5zbWlzc2lvbi52YWx1ZT1lLnRyYW5zbWlzc2lvbixlLnRyYW5zbWlzc2lvbk1hcCYmKHQudHJhbnNtaXNzaW9uTWFwLnZhbHVlPWUudHJhbnNtaXNzaW9uTWFwKX0odCxyKTpuKHQscikpOnIuaXNNZXNoTWF0Y2FwTWF0ZXJpYWw/KGUodCxyKSxmdW5jdGlvbih0LGUpe2UubWF0Y2FwJiYodC5tYXRjYXAudmFsdWU9ZS5tYXRjYXApO2UuYnVtcE1hcCYmKHQuYnVtcE1hcC52YWx1ZT1lLmJ1bXBNYXAsdC5idW1wU2NhbGUudmFsdWU9ZS5idW1wU2NhbGUsZS5zaWRlPT09bSYmKHQuYnVtcFNjYWxlLnZhbHVlKj0tMSkpO2Uubm9ybWFsTWFwJiYodC5ub3JtYWxNYXAudmFsdWU9ZS5ub3JtYWxNYXAsdC5ub3JtYWxTY2FsZS52YWx1ZS5jb3B5KGUubm9ybWFsU2NhbGUpLGUuc2lkZT09PW0mJnQubm9ybWFsU2NhbGUudmFsdWUubmVnYXRlKCkpO2UuZGlzcGxhY2VtZW50TWFwJiYodC5kaXNwbGFjZW1lbnRNYXAudmFsdWU9ZS5kaXNwbGFjZW1lbnRNYXAsdC5kaXNwbGFjZW1lbnRTY2FsZS52YWx1ZT1lLmRpc3BsYWNlbWVudFNjYWxlLHQuZGlzcGxhY2VtZW50Qmlhcy52YWx1ZT1lLmRpc3BsYWNlbWVudEJpYXMpfSh0LHIpKTpyLmlzTWVzaERlcHRoTWF0ZXJpYWw/KGUodCxyKSxmdW5jdGlvbih0LGUpe2UuZGlzcGxhY2VtZW50TWFwJiYodC5kaXNwbGFjZW1lbnRNYXAudmFsdWU9ZS5kaXNwbGFjZW1lbnRNYXAsdC5kaXNwbGFjZW1lbnRTY2FsZS52YWx1ZT1lLmRpc3BsYWNlbWVudFNjYWxlLHQuZGlzcGxhY2VtZW50Qmlhcy52YWx1ZT1lLmRpc3BsYWNlbWVudEJpYXMpfSh0LHIpKTpyLmlzTWVzaERpc3RhbmNlTWF0ZXJpYWw/KGUodCxyKSxmdW5jdGlvbih0LGUpe2UuZGlzcGxhY2VtZW50TWFwJiYodC5kaXNwbGFjZW1lbnRNYXAudmFsdWU9ZS5kaXNwbGFjZW1lbnRNYXAsdC5kaXNwbGFjZW1lbnRTY2FsZS52YWx1ZT1lLmRpc3BsYWNlbWVudFNjYWxlLHQuZGlzcGxhY2VtZW50Qmlhcy52YWx1ZT1lLmRpc3BsYWNlbWVudEJpYXMpO3QucmVmZXJlbmNlUG9zaXRpb24udmFsdWUuY29weShlLnJlZmVyZW5jZVBvc2l0aW9uKSx0Lm5lYXJEaXN0YW5jZS52YWx1ZT1lLm5lYXJEaXN0YW5jZSx0LmZhckRpc3RhbmNlLnZhbHVlPWUuZmFyRGlzdGFuY2V9KHQscikpOnIuaXNNZXNoTm9ybWFsTWF0ZXJpYWw/KGUodCxyKSxmdW5jdGlvbih0LGUpe2UuYnVtcE1hcCYmKHQuYnVtcE1hcC52YWx1ZT1lLmJ1bXBNYXAsdC5idW1wU2NhbGUudmFsdWU9ZS5idW1wU2NhbGUsZS5zaWRlPT09bSYmKHQuYnVtcFNjYWxlLnZhbHVlKj0tMSkpO2Uubm9ybWFsTWFwJiYodC5ub3JtYWxNYXAudmFsdWU9ZS5ub3JtYWxNYXAsdC5ub3JtYWxTY2FsZS52YWx1ZS5jb3B5KGUubm9ybWFsU2NhbGUpLGUuc2lkZT09PW0mJnQubm9ybWFsU2NhbGUudmFsdWUubmVnYXRlKCkpO2UuZGlzcGxhY2VtZW50TWFwJiYodC5kaXNwbGFjZW1lbnRNYXAudmFsdWU9ZS5kaXNwbGFjZW1lbnRNYXAsdC5kaXNwbGFjZW1lbnRTY2FsZS52YWx1ZT1lLmRpc3BsYWNlbWVudFNjYWxlLHQuZGlzcGxhY2VtZW50Qmlhcy52YWx1ZT1lLmRpc3BsYWNlbWVudEJpYXMpfSh0LHIpKTpyLmlzTGluZUJhc2ljTWF0ZXJpYWw/KGZ1bmN0aW9uKHQsZSl7dC5kaWZmdXNlLnZhbHVlLmNvcHkoZS5jb2xvciksdC5vcGFjaXR5LnZhbHVlPWUub3BhY2l0eX0odCxyKSxyLmlzTGluZURhc2hlZE1hdGVyaWFsJiZmdW5jdGlvbih0LGUpe3QuZGFzaFNpemUudmFsdWU9ZS5kYXNoU2l6ZSx0LnRvdGFsU2l6ZS52YWx1ZT1lLmRhc2hTaXplK2UuZ2FwU2l6ZSx0LnNjYWxlLnZhbHVlPWUuc2NhbGV9KHQscikpOnIuaXNQb2ludHNNYXRlcmlhbD9mdW5jdGlvbih0LGUsbixyKXt0LmRpZmZ1c2UudmFsdWUuY29weShlLmNvbG9yKSx0Lm9wYWNpdHkudmFsdWU9ZS5vcGFjaXR5LHQuc2l6ZS52YWx1ZT1lLnNpemUqbix0LnNjYWxlLnZhbHVlPS41KnIsZS5tYXAmJih0Lm1hcC52YWx1ZT1lLm1hcCk7ZS5hbHBoYU1hcCYmKHQuYWxwaGFNYXAudmFsdWU9ZS5hbHBoYU1hcCk7bGV0IGk7ZS5tYXA/aT1lLm1hcDplLmFscGhhTWFwJiYoaT1lLmFscGhhTWFwKTt2b2lkIDAhPT1pJiYoITA9PT1pLm1hdHJpeEF1dG9VcGRhdGUmJmkudXBkYXRlTWF0cml4KCksdC51dlRyYW5zZm9ybS52YWx1ZS5jb3B5KGkubWF0cml4KSl9KHQscixpLG8pOnIuaXNTcHJpdGVNYXRlcmlhbD9mdW5jdGlvbih0LGUpe3QuZGlmZnVzZS52YWx1ZS5jb3B5KGUuY29sb3IpLHQub3BhY2l0eS52YWx1ZT1lLm9wYWNpdHksdC5yb3RhdGlvbi52YWx1ZT1lLnJvdGF0aW9uLGUubWFwJiYodC5tYXAudmFsdWU9ZS5tYXApO2UuYWxwaGFNYXAmJih0LmFscGhhTWFwLnZhbHVlPWUuYWxwaGFNYXApO2xldCBuO2UubWFwP249ZS5tYXA6ZS5hbHBoYU1hcCYmKG49ZS5hbHBoYU1hcCk7dm9pZCAwIT09biYmKCEwPT09bi5tYXRyaXhBdXRvVXBkYXRlJiZuLnVwZGF0ZU1hdHJpeCgpLHQudXZUcmFuc2Zvcm0udmFsdWUuY29weShuLm1hdHJpeCkpfSh0LHIpOnIuaXNTaGFkb3dNYXRlcmlhbD8odC5jb2xvci52YWx1ZS5jb3B5KHIuY29sb3IpLHQub3BhY2l0eS52YWx1ZT1yLm9wYWNpdHkpOnIuaXNTaGFkZXJNYXRlcmlhbCYmKHIudW5pZm9ybXNOZWVkVXBkYXRlPSExKX19fWZ1bmN0aW9uIERzKHQpe2NvbnN0IGU9dm9pZCAwIT09KHQ9dHx8e30pLmNhbnZhcz90LmNhbnZhczpmdW5jdGlvbigpe2NvbnN0IHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbFwiLFwiY2FudmFzXCIpO3JldHVybiB0LnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiLHR9KCksbj12b2lkIDAhPT10LmNvbnRleHQ/dC5jb250ZXh0Om51bGwscj12b2lkIDAhPT10LmFscGhhJiZ0LmFscGhhLGk9dm9pZCAwPT09dC5kZXB0aHx8dC5kZXB0aCxvPXZvaWQgMD09PXQuc3RlbmNpbHx8dC5zdGVuY2lsLGE9dm9pZCAwIT09dC5hbnRpYWxpYXMmJnQuYW50aWFsaWFzLHM9dm9pZCAwPT09dC5wcmVtdWx0aXBsaWVkQWxwaGF8fHQucHJlbXVsdGlwbGllZEFscGhhLGM9dm9pZCAwIT09dC5wcmVzZXJ2ZURyYXdpbmdCdWZmZXImJnQucHJlc2VydmVEcmF3aW5nQnVmZmVyLGw9dm9pZCAwIT09dC5wb3dlclByZWZlcmVuY2U/dC5wb3dlclByZWZlcmVuY2U6XCJkZWZhdWx0XCIsdT12b2lkIDAhPT10LmZhaWxJZk1ham9yUGVyZm9ybWFuY2VDYXZlYXQmJnQuZmFpbElmTWFqb3JQZXJmb3JtYW5jZUNhdmVhdDtsZXQgaD1udWxsLGQ9bnVsbDt0aGlzLmRvbUVsZW1lbnQ9ZSx0aGlzLmRlYnVnPXtjaGVja1NoYWRlckVycm9yczohMH0sdGhpcy5hdXRvQ2xlYXI9ITAsdGhpcy5hdXRvQ2xlYXJDb2xvcj0hMCx0aGlzLmF1dG9DbGVhckRlcHRoPSEwLHRoaXMuYXV0b0NsZWFyU3RlbmNpbD0hMCx0aGlzLnNvcnRPYmplY3RzPSEwLHRoaXMuY2xpcHBpbmdQbGFuZXM9W10sdGhpcy5sb2NhbENsaXBwaW5nRW5hYmxlZD0hMSx0aGlzLmdhbW1hRmFjdG9yPTIsdGhpcy5vdXRwdXRFbmNvZGluZz1KZSx0aGlzLnBoeXNpY2FsbHlDb3JyZWN0TGlnaHRzPSExLHRoaXMudG9uZU1hcHBpbmc9USx0aGlzLnRvbmVNYXBwaW5nRXhwb3N1cmU9MSx0aGlzLm1heE1vcnBoVGFyZ2V0cz04LHRoaXMubWF4TW9ycGhOb3JtYWxzPTQ7Y29uc3QgcD10aGlzO2xldCBmPSExLG09bnVsbCxnPTAsdj0wLHk9bnVsbCx4PW51bGwsYj0tMSx3PW51bGwsXz1udWxsO2NvbnN0IE09bmV3IHFuLFM9bmV3IHFuO2xldCBUPW51bGwsRT1lLndpZHRoLEE9ZS5oZWlnaHQsTD0xLFI9bnVsbCxQPW51bGw7Y29uc3QgQz1uZXcgcW4oMCwwLEUsQSksST1uZXcgcW4oMCwwLEUsQSk7bGV0IE89ITE7Y29uc3QgTj1uZXcgTG87bGV0IEQ9ITEsQj0hMTtjb25zdCBGPW5ldyBUcixVPW5ldyBLbix6PXtiYWNrZ3JvdW5kOm51bGwsZm9nOm51bGwsZW52aXJvbm1lbnQ6bnVsbCxvdmVycmlkZU1hdGVyaWFsOm51bGwsaXNTY2VuZTohMH07ZnVuY3Rpb24gRygpe3JldHVybiBudWxsPT09eT9MOjF9bGV0IEgsayxWLGosVyxYLHEsWSxaLEosSywkLHR0LGV0LG50LHJ0LGl0LG90LGF0LHN0LGN0LGx0PW47ZnVuY3Rpb24gdXQodCxuKXtmb3IobGV0IHI9MDtyPHQubGVuZ3RoO3IrKyl7Y29uc3QgaT10W3JdLG89ZS5nZXRDb250ZXh0KGksbik7aWYobnVsbCE9PW8pcmV0dXJuIG99cmV0dXJuIG51bGx9dHJ5e2NvbnN0IHQ9e2FscGhhOnIsZGVwdGg6aSxzdGVuY2lsOm8sYW50aWFsaWFzOmEscHJlbXVsdGlwbGllZEFscGhhOnMscHJlc2VydmVEcmF3aW5nQnVmZmVyOmMscG93ZXJQcmVmZXJlbmNlOmwsZmFpbElmTWFqb3JQZXJmb3JtYW5jZUNhdmVhdDp1fTtpZihlLmFkZEV2ZW50TGlzdGVuZXIoXCJ3ZWJnbGNvbnRleHRsb3N0XCIsZnQsITEpLGUuYWRkRXZlbnRMaXN0ZW5lcihcIndlYmdsY29udGV4dHJlc3RvcmVkXCIsbXQsITEpLG51bGw9PT1sdCl7Y29uc3QgZT1bXCJ3ZWJnbDJcIixcIndlYmdsXCIsXCJleHBlcmltZW50YWwtd2ViZ2xcIl07aWYoITA9PT1wLmlzV2ViR0wxUmVuZGVyZXImJmUuc2hpZnQoKSxsdD11dChlLHQpLG51bGw9PT1sdCl0aHJvdyB1dChlKT9uZXcgRXJyb3IoXCJFcnJvciBjcmVhdGluZyBXZWJHTCBjb250ZXh0IHdpdGggeW91ciBzZWxlY3RlZCBhdHRyaWJ1dGVzLlwiKTpuZXcgRXJyb3IoXCJFcnJvciBjcmVhdGluZyBXZWJHTCBjb250ZXh0LlwiKX12b2lkIDA9PT1sdC5nZXRTaGFkZXJQcmVjaXNpb25Gb3JtYXQmJihsdC5nZXRTaGFkZXJQcmVjaXNpb25Gb3JtYXQ9ZnVuY3Rpb24oKXtyZXR1cm57cmFuZ2VNaW46MSxyYW5nZU1heDoxLHByZWNpc2lvbjoxfX0pfWNhdGNoKHQpe3Rocm93IGNvbnNvbGUuZXJyb3IoXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiBcIit0Lm1lc3NhZ2UpLHR9ZnVuY3Rpb24gaHQoKXtIPW5ldyBIbyhsdCksaz1uZXcgVW8obHQsSCx0KSwhMT09PWsuaXNXZWJHTDImJihILmdldChcIldFQkdMX2RlcHRoX3RleHR1cmVcIiksSC5nZXQoXCJPRVNfdGV4dHVyZV9mbG9hdFwiKSxILmdldChcIk9FU190ZXh0dXJlX2hhbGZfZmxvYXRcIiksSC5nZXQoXCJPRVNfdGV4dHVyZV9oYWxmX2Zsb2F0X2xpbmVhclwiKSxILmdldChcIk9FU19zdGFuZGFyZF9kZXJpdmF0aXZlc1wiKSxILmdldChcIk9FU19lbGVtZW50X2luZGV4X3VpbnRcIiksSC5nZXQoXCJPRVNfdmVydGV4X2FycmF5X29iamVjdFwiKSxILmdldChcIkFOR0xFX2luc3RhbmNlZF9hcnJheXNcIikpLEguZ2V0KFwiT0VTX3RleHR1cmVfZmxvYXRfbGluZWFyXCIpLHN0PW5ldyBScyhsdCxILGspLFY9bmV3IEFzKGx0LEgsayksVi5zY2lzc29yKFMuY29weShJKS5tdWx0aXBseVNjYWxhcihMKS5mbG9vcigpKSxWLnZpZXdwb3J0KE0uY29weShDKS5tdWx0aXBseVNjYWxhcihMKS5mbG9vcigpKSxqPW5ldyBqbyhsdCksVz1uZXcgcHMsWD1uZXcgTHMobHQsSCxWLFcsayxzdCxqKSxxPW5ldyBHbyhwKSxZPW5ldyBQbyhsdCxrKSxjdD1uZXcgQm8obHQsSCxZLGspLFo9bmV3IGtvKGx0LFksaixjdCksSj1uZXcgWW8obHQsWixZLGopLGl0PW5ldyBxbyhsdCksbnQ9bmV3IHpvKFcpLEs9bmV3IGRzKHAscSxILGssY3QsbnQpLCQ9bmV3IE5zKFcpLHR0PW5ldyB2cyhXKSxldD1uZXcgTXMoSCxrKSxydD1uZXcgRG8ocCxxLFYsSixzKSxvdD1uZXcgRm8obHQsSCxqLGspLGF0PW5ldyBWbyhsdCxILGosayksai5wcm9ncmFtcz1LLnByb2dyYW1zLHAuY2FwYWJpbGl0aWVzPWsscC5leHRlbnNpb25zPUgscC5wcm9wZXJ0aWVzPVcscC5yZW5kZXJMaXN0cz10dCxwLnN0YXRlPVYscC5pbmZvPWp9aHQoKTtjb25zdCBkdD1uZXcgT3MocCxsdCk7dGhpcy54cj1kdDtjb25zdCBwdD1uZXcgRXMocCxKLGsubWF4VGV4dHVyZVNpemUpO2Z1bmN0aW9uIGZ0KHQpe3QucHJldmVudERlZmF1bHQoKSxjb25zb2xlLmxvZyhcIlRIUkVFLldlYkdMUmVuZGVyZXI6IENvbnRleHQgTG9zdC5cIiksZj0hMH1mdW5jdGlvbiBtdCgpe2NvbnNvbGUubG9nKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogQ29udGV4dCBSZXN0b3JlZC5cIiksZj0hMSxodCgpfWZ1bmN0aW9uIGd0KHQpe2NvbnN0IGU9dC50YXJnZXQ7ZS5yZW1vdmVFdmVudExpc3RlbmVyKFwiZGlzcG9zZVwiLGd0KSxmdW5jdGlvbih0KXt2dCh0KSxXLnJlbW92ZSh0KX0oZSl9ZnVuY3Rpb24gdnQodCl7Y29uc3QgZT1XLmdldCh0KS5wcm9ncmFtO3ZvaWQgMCE9PWUmJksucmVsZWFzZVByb2dyYW0oZSl9dGhpcy5zaGFkb3dNYXA9cHQsdGhpcy5nZXRDb250ZXh0PWZ1bmN0aW9uKCl7cmV0dXJuIGx0fSx0aGlzLmdldENvbnRleHRBdHRyaWJ1dGVzPWZ1bmN0aW9uKCl7cmV0dXJuIGx0LmdldENvbnRleHRBdHRyaWJ1dGVzKCl9LHRoaXMuZm9yY2VDb250ZXh0TG9zcz1mdW5jdGlvbigpe2NvbnN0IHQ9SC5nZXQoXCJXRUJHTF9sb3NlX2NvbnRleHRcIik7dCYmdC5sb3NlQ29udGV4dCgpfSx0aGlzLmZvcmNlQ29udGV4dFJlc3RvcmU9ZnVuY3Rpb24oKXtjb25zdCB0PUguZ2V0KFwiV0VCR0xfbG9zZV9jb250ZXh0XCIpO3QmJnQucmVzdG9yZUNvbnRleHQoKX0sdGhpcy5nZXRQaXhlbFJhdGlvPWZ1bmN0aW9uKCl7cmV0dXJuIEx9LHRoaXMuc2V0UGl4ZWxSYXRpbz1mdW5jdGlvbih0KXt2b2lkIDAhPT10JiYoTD10LHRoaXMuc2V0U2l6ZShFLEEsITEpKX0sdGhpcy5nZXRTaXplPWZ1bmN0aW9uKHQpe3JldHVybiB2b2lkIDA9PT10JiYoY29uc29sZS53YXJuKFwiV2ViR0xSZW5kZXJlcjogLmdldHNpemUoKSBub3cgcmVxdWlyZXMgYSBWZWN0b3IyIGFzIGFuIGFyZ3VtZW50XCIpLHQ9bmV3IEduKSx0LnNldChFLEEpfSx0aGlzLnNldFNpemU9ZnVuY3Rpb24odCxuLHIpe2R0LmlzUHJlc2VudGluZz9jb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiBDYW4ndCBjaGFuZ2Ugc2l6ZSB3aGlsZSBWUiBkZXZpY2UgaXMgcHJlc2VudGluZy5cIik6KEU9dCxBPW4sZS53aWR0aD1NYXRoLmZsb29yKHQqTCksZS5oZWlnaHQ9TWF0aC5mbG9vcihuKkwpLCExIT09ciYmKGUuc3R5bGUud2lkdGg9dCtcInB4XCIsZS5zdHlsZS5oZWlnaHQ9bitcInB4XCIpLHRoaXMuc2V0Vmlld3BvcnQoMCwwLHQsbikpfSx0aGlzLmdldERyYXdpbmdCdWZmZXJTaXplPWZ1bmN0aW9uKHQpe3JldHVybiB2b2lkIDA9PT10JiYoY29uc29sZS53YXJuKFwiV2ViR0xSZW5kZXJlcjogLmdldGRyYXdpbmdCdWZmZXJTaXplKCkgbm93IHJlcXVpcmVzIGEgVmVjdG9yMiBhcyBhbiBhcmd1bWVudFwiKSx0PW5ldyBHbiksdC5zZXQoRSpMLEEqTCkuZmxvb3IoKX0sdGhpcy5zZXREcmF3aW5nQnVmZmVyU2l6ZT1mdW5jdGlvbih0LG4scil7RT10LEE9bixMPXIsZS53aWR0aD1NYXRoLmZsb29yKHQqciksZS5oZWlnaHQ9TWF0aC5mbG9vcihuKnIpLHRoaXMuc2V0Vmlld3BvcnQoMCwwLHQsbil9LHRoaXMuZ2V0Q3VycmVudFZpZXdwb3J0PWZ1bmN0aW9uKHQpe3JldHVybiB2b2lkIDA9PT10JiYoY29uc29sZS53YXJuKFwiV2ViR0xSZW5kZXJlcjogLmdldEN1cnJlbnRWaWV3cG9ydCgpIG5vdyByZXF1aXJlcyBhIFZlY3RvcjQgYXMgYW4gYXJndW1lbnRcIiksdD1uZXcgcW4pLHQuY29weShNKX0sdGhpcy5nZXRWaWV3cG9ydD1mdW5jdGlvbih0KXtyZXR1cm4gdC5jb3B5KEMpfSx0aGlzLnNldFZpZXdwb3J0PWZ1bmN0aW9uKHQsZSxuLHIpe3QuaXNWZWN0b3I0P0Muc2V0KHQueCx0LnksdC56LHQudyk6Qy5zZXQodCxlLG4sciksVi52aWV3cG9ydChNLmNvcHkoQykubXVsdGlwbHlTY2FsYXIoTCkuZmxvb3IoKSl9LHRoaXMuZ2V0U2Npc3Nvcj1mdW5jdGlvbih0KXtyZXR1cm4gdC5jb3B5KEkpfSx0aGlzLnNldFNjaXNzb3I9ZnVuY3Rpb24odCxlLG4scil7dC5pc1ZlY3RvcjQ/SS5zZXQodC54LHQueSx0LnosdC53KTpJLnNldCh0LGUsbixyKSxWLnNjaXNzb3IoUy5jb3B5KEkpLm11bHRpcGx5U2NhbGFyKEwpLmZsb29yKCkpfSx0aGlzLmdldFNjaXNzb3JUZXN0PWZ1bmN0aW9uKCl7cmV0dXJuIE99LHRoaXMuc2V0U2Npc3NvclRlc3Q9ZnVuY3Rpb24odCl7Vi5zZXRTY2lzc29yVGVzdChPPXQpfSx0aGlzLnNldE9wYXF1ZVNvcnQ9ZnVuY3Rpb24odCl7Uj10fSx0aGlzLnNldFRyYW5zcGFyZW50U29ydD1mdW5jdGlvbih0KXtQPXR9LHRoaXMuZ2V0Q2xlYXJDb2xvcj1mdW5jdGlvbigpe3JldHVybiBydC5nZXRDbGVhckNvbG9yKCl9LHRoaXMuc2V0Q2xlYXJDb2xvcj1mdW5jdGlvbigpe3J0LnNldENsZWFyQ29sb3IuYXBwbHkocnQsYXJndW1lbnRzKX0sdGhpcy5nZXRDbGVhckFscGhhPWZ1bmN0aW9uKCl7cmV0dXJuIHJ0LmdldENsZWFyQWxwaGEoKX0sdGhpcy5zZXRDbGVhckFscGhhPWZ1bmN0aW9uKCl7cnQuc2V0Q2xlYXJBbHBoYS5hcHBseShydCxhcmd1bWVudHMpfSx0aGlzLmNsZWFyPWZ1bmN0aW9uKHQsZSxuKXtsZXQgcj0wOyh2b2lkIDA9PT10fHx0KSYmKHJ8PTE2Mzg0KSwodm9pZCAwPT09ZXx8ZSkmJihyfD0yNTYpLCh2b2lkIDA9PT1ufHxuKSYmKHJ8PTEwMjQpLGx0LmNsZWFyKHIpfSx0aGlzLmNsZWFyQ29sb3I9ZnVuY3Rpb24oKXt0aGlzLmNsZWFyKCEwLCExLCExKX0sdGhpcy5jbGVhckRlcHRoPWZ1bmN0aW9uKCl7dGhpcy5jbGVhcighMSwhMCwhMSl9LHRoaXMuY2xlYXJTdGVuY2lsPWZ1bmN0aW9uKCl7dGhpcy5jbGVhcighMSwhMSwhMCl9LHRoaXMuZGlzcG9zZT1mdW5jdGlvbigpe2UucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIndlYmdsY29udGV4dGxvc3RcIixmdCwhMSksZS5yZW1vdmVFdmVudExpc3RlbmVyKFwid2ViZ2xjb250ZXh0cmVzdG9yZWRcIixtdCwhMSksdHQuZGlzcG9zZSgpLGV0LmRpc3Bvc2UoKSxXLmRpc3Bvc2UoKSxxLmRpc3Bvc2UoKSxKLmRpc3Bvc2UoKSxjdC5kaXNwb3NlKCksZHQuZGlzcG9zZSgpLHh0LnN0b3AoKX0sdGhpcy5yZW5kZXJCdWZmZXJJbW1lZGlhdGU9ZnVuY3Rpb24odCxlKXtjdC5pbml0QXR0cmlidXRlcygpO2NvbnN0IG49Vy5nZXQodCk7dC5oYXNQb3NpdGlvbnMmJiFuLnBvc2l0aW9uJiYobi5wb3NpdGlvbj1sdC5jcmVhdGVCdWZmZXIoKSksdC5oYXNOb3JtYWxzJiYhbi5ub3JtYWwmJihuLm5vcm1hbD1sdC5jcmVhdGVCdWZmZXIoKSksdC5oYXNVdnMmJiFuLnV2JiYobi51dj1sdC5jcmVhdGVCdWZmZXIoKSksdC5oYXNDb2xvcnMmJiFuLmNvbG9yJiYobi5jb2xvcj1sdC5jcmVhdGVCdWZmZXIoKSk7Y29uc3Qgcj1lLmdldEF0dHJpYnV0ZXMoKTt0Lmhhc1Bvc2l0aW9ucyYmKGx0LmJpbmRCdWZmZXIoMzQ5NjIsbi5wb3NpdGlvbiksbHQuYnVmZmVyRGF0YSgzNDk2Mix0LnBvc2l0aW9uQXJyYXksMzUwNDgpLGN0LmVuYWJsZUF0dHJpYnV0ZShyLnBvc2l0aW9uKSxsdC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHIucG9zaXRpb24sMyw1MTI2LCExLDAsMCkpLHQuaGFzTm9ybWFscyYmKGx0LmJpbmRCdWZmZXIoMzQ5NjIsbi5ub3JtYWwpLGx0LmJ1ZmZlckRhdGEoMzQ5NjIsdC5ub3JtYWxBcnJheSwzNTA0OCksY3QuZW5hYmxlQXR0cmlidXRlKHIubm9ybWFsKSxsdC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHIubm9ybWFsLDMsNTEyNiwhMSwwLDApKSx0Lmhhc1V2cyYmKGx0LmJpbmRCdWZmZXIoMzQ5NjIsbi51diksbHQuYnVmZmVyRGF0YSgzNDk2Mix0LnV2QXJyYXksMzUwNDgpLGN0LmVuYWJsZUF0dHJpYnV0ZShyLnV2KSxsdC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHIudXYsMiw1MTI2LCExLDAsMCkpLHQuaGFzQ29sb3JzJiYobHQuYmluZEJ1ZmZlcigzNDk2MixuLmNvbG9yKSxsdC5idWZmZXJEYXRhKDM0OTYyLHQuY29sb3JBcnJheSwzNTA0OCksY3QuZW5hYmxlQXR0cmlidXRlKHIuY29sb3IpLGx0LnZlcnRleEF0dHJpYlBvaW50ZXIoci5jb2xvciwzLDUxMjYsITEsMCwwKSksY3QuZGlzYWJsZVVudXNlZEF0dHJpYnV0ZXMoKSxsdC5kcmF3QXJyYXlzKDQsMCx0LmNvdW50KSx0LmNvdW50PTB9LHRoaXMucmVuZGVyQnVmZmVyRGlyZWN0PWZ1bmN0aW9uKHQsZSxuLHIsaSxvKXtudWxsPT09ZSYmKGU9eik7Y29uc3QgYT1pLmlzTWVzaCYmaS5tYXRyaXhXb3JsZC5kZXRlcm1pbmFudCgpPDAscz1UdCh0LGUscixpKTtWLnNldE1hdGVyaWFsKHIsYSk7bGV0IGM9bi5pbmRleDtjb25zdCBsPW4uYXR0cmlidXRlcy5wb3NpdGlvbjtpZihudWxsPT09Yyl7aWYodm9pZCAwPT09bHx8MD09PWwuY291bnQpcmV0dXJufWVsc2UgaWYoMD09PWMuY291bnQpcmV0dXJuO2xldCB1LGg9MTshMD09PXIud2lyZWZyYW1lJiYoYz1aLmdldFdpcmVmcmFtZUF0dHJpYnV0ZShuKSxoPTIpLChyLm1vcnBoVGFyZ2V0c3x8ci5tb3JwaE5vcm1hbHMpJiZpdC51cGRhdGUoaSxuLHIscyksY3Quc2V0dXAoaSxyLHMsbixjKTtsZXQgZD1vdDtudWxsIT09YyYmKHU9WS5nZXQoYyksZD1hdCxkLnNldEluZGV4KHUpKTtjb25zdCBwPW51bGwhPT1jP2MuY291bnQ6bC5jb3VudCxmPW4uZHJhd1JhbmdlLnN0YXJ0KmgsbT1uLmRyYXdSYW5nZS5jb3VudCpoLGc9bnVsbCE9PW8/by5zdGFydCpoOjAsdj1udWxsIT09bz9vLmNvdW50Kmg6MS8wLHk9TWF0aC5tYXgoZixnKSx4PU1hdGgubWluKHAsZittLGcrdiktMSxiPU1hdGgubWF4KDAseC15KzEpO2lmKDAhPT1iKXtpZihpLmlzTWVzaCkhMD09PXIud2lyZWZyYW1lPyhWLnNldExpbmVXaWR0aChyLndpcmVmcmFtZUxpbmV3aWR0aCpHKCkpLGQuc2V0TW9kZSgxKSk6ZC5zZXRNb2RlKDQpO2Vsc2UgaWYoaS5pc0xpbmUpe2xldCB0PXIubGluZXdpZHRoO3ZvaWQgMD09PXQmJih0PTEpLFYuc2V0TGluZVdpZHRoKHQqRygpKSxpLmlzTGluZVNlZ21lbnRzP2Quc2V0TW9kZSgxKTppLmlzTGluZUxvb3A/ZC5zZXRNb2RlKDIpOmQuc2V0TW9kZSgzKX1lbHNlIGkuaXNQb2ludHM/ZC5zZXRNb2RlKDApOmkuaXNTcHJpdGUmJmQuc2V0TW9kZSg0KTtpZihpLmlzSW5zdGFuY2VkTWVzaClkLnJlbmRlckluc3RhbmNlcyh5LGIsaS5jb3VudCk7ZWxzZSBpZihuLmlzSW5zdGFuY2VkQnVmZmVyR2VvbWV0cnkpe2NvbnN0IHQ9TWF0aC5taW4obi5pbnN0YW5jZUNvdW50LG4uX21heEluc3RhbmNlQ291bnQpO2QucmVuZGVySW5zdGFuY2VzKHksYix0KX1lbHNlIGQucmVuZGVyKHksYil9fSx0aGlzLmNvbXBpbGU9ZnVuY3Rpb24odCxlKXtkPWV0LmdldCh0LGUpLGQuaW5pdCgpLHQudHJhdmVyc2VWaXNpYmxlKChmdW5jdGlvbih0KXt0LmlzTGlnaHQmJnQubGF5ZXJzLnRlc3QoZS5sYXllcnMpJiYoZC5wdXNoTGlnaHQodCksdC5jYXN0U2hhZG93JiZkLnB1c2hTaGFkb3codCkpfSkpLGQuc2V0dXBMaWdodHMoZSk7Y29uc3Qgbj1uZXcgV2Vha01hcDt0LnRyYXZlcnNlKChmdW5jdGlvbihlKXtjb25zdCByPWUubWF0ZXJpYWw7aWYocilpZihBcnJheS5pc0FycmF5KHIpKWZvcihsZXQgaT0wO2k8ci5sZW5ndGg7aSsrKXtjb25zdCBvPXJbaV07ITE9PT1uLmhhcyhvKSYmKE10KG8sdCxlKSxuLnNldChvKSl9ZWxzZSExPT09bi5oYXMocikmJihNdChyLHQsZSksbi5zZXQocikpfSkpfTtsZXQgeXQ9bnVsbDtjb25zdCB4dD1uZXcgUm87ZnVuY3Rpb24gYnQodCxlLG4scil7aWYoITE9PT10LnZpc2libGUpcmV0dXJuO2lmKHQubGF5ZXJzLnRlc3QoZS5sYXllcnMpKWlmKHQuaXNHcm91cCluPXQucmVuZGVyT3JkZXI7ZWxzZSBpZih0LmlzTE9EKSEwPT09dC5hdXRvVXBkYXRlJiZ0LnVwZGF0ZShlKTtlbHNlIGlmKHQuaXNMaWdodClkLnB1c2hMaWdodCh0KSx0LmNhc3RTaGFkb3cmJmQucHVzaFNoYWRvdyh0KTtlbHNlIGlmKHQuaXNTcHJpdGUpe2lmKCF0LmZydXN0dW1DdWxsZWR8fE4uaW50ZXJzZWN0c1Nwcml0ZSh0KSl7ciYmVS5zZXRGcm9tTWF0cml4UG9zaXRpb24odC5tYXRyaXhXb3JsZCkuYXBwbHlNYXRyaXg0KEYpO2NvbnN0IGU9Si51cGRhdGUodCksaT10Lm1hdGVyaWFsO2kudmlzaWJsZSYmaC5wdXNoKHQsZSxpLG4sVS56LG51bGwpfX1lbHNlIGlmKHQuaXNJbW1lZGlhdGVSZW5kZXJPYmplY3QpciYmVS5zZXRGcm9tTWF0cml4UG9zaXRpb24odC5tYXRyaXhXb3JsZCkuYXBwbHlNYXRyaXg0KEYpLGgucHVzaCh0LG51bGwsdC5tYXRlcmlhbCxuLFUueixudWxsKTtlbHNlIGlmKCh0LmlzTWVzaHx8dC5pc0xpbmV8fHQuaXNQb2ludHMpJiYodC5pc1NraW5uZWRNZXNoJiZ0LnNrZWxldG9uLmZyYW1lIT09ai5yZW5kZXIuZnJhbWUmJih0LnNrZWxldG9uLnVwZGF0ZSgpLHQuc2tlbGV0b24uZnJhbWU9ai5yZW5kZXIuZnJhbWUpLCF0LmZydXN0dW1DdWxsZWR8fE4uaW50ZXJzZWN0c09iamVjdCh0KSkpe3ImJlUuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKHQubWF0cml4V29ybGQpLmFwcGx5TWF0cml4NChGKTtjb25zdCBlPUoudXBkYXRlKHQpLGk9dC5tYXRlcmlhbDtpZihBcnJheS5pc0FycmF5KGkpKXtjb25zdCByPWUuZ3JvdXBzO2ZvcihsZXQgbz0wLGE9ci5sZW5ndGg7bzxhO28rKyl7Y29uc3QgYT1yW29dLHM9aVthLm1hdGVyaWFsSW5kZXhdO3MmJnMudmlzaWJsZSYmaC5wdXNoKHQsZSxzLG4sVS56LGEpfX1lbHNlIGkudmlzaWJsZSYmaC5wdXNoKHQsZSxpLG4sVS56LG51bGwpfWNvbnN0IGk9dC5jaGlsZHJlbjtmb3IobGV0IHQ9MCxvPWkubGVuZ3RoO3Q8bzt0KyspYnQoaVt0XSxlLG4scil9ZnVuY3Rpb24gd3QodCxlLG4pe2NvbnN0IHI9ITA9PT1lLmlzU2NlbmU/ZS5vdmVycmlkZU1hdGVyaWFsOm51bGw7Zm9yKGxldCBpPTAsbz10Lmxlbmd0aDtpPG87aSsrKXtjb25zdCBvPXRbaV0sYT1vLm9iamVjdCxzPW8uZ2VvbWV0cnksYz1udWxsPT09cj9vLm1hdGVyaWFsOnIsbD1vLmdyb3VwO2lmKG4uaXNBcnJheUNhbWVyYSl7Xz1uO2NvbnN0IHQ9bi5jYW1lcmFzO2ZvcihsZXQgbj0wLHI9dC5sZW5ndGg7bjxyO24rKyl7Y29uc3Qgcj10W25dO2EubGF5ZXJzLnRlc3Qoci5sYXllcnMpJiYoVi52aWV3cG9ydChNLmNvcHkoci52aWV3cG9ydCkpLGQuc2V0dXBMaWdodHMociksX3QoYSxlLHIscyxjLGwpKX19ZWxzZSBfPW51bGwsX3QoYSxlLG4scyxjLGwpfX1mdW5jdGlvbiBfdCh0LGUsbixyLGksbyl7aWYodC5vbkJlZm9yZVJlbmRlcihwLGUsbixyLGksbyksZD1ldC5nZXQoZSxffHxuKSx0Lm1vZGVsVmlld01hdHJpeC5tdWx0aXBseU1hdHJpY2VzKG4ubWF0cml4V29ybGRJbnZlcnNlLHQubWF0cml4V29ybGQpLHQubm9ybWFsTWF0cml4LmdldE5vcm1hbE1hdHJpeCh0Lm1vZGVsVmlld01hdHJpeCksdC5pc0ltbWVkaWF0ZVJlbmRlck9iamVjdCl7Y29uc3Qgcj1UdChuLGUsaSx0KTtWLnNldE1hdGVyaWFsKGkpLGN0LnJlc2V0KCksZnVuY3Rpb24odCxlKXt0LnJlbmRlcigoZnVuY3Rpb24odCl7cC5yZW5kZXJCdWZmZXJJbW1lZGlhdGUodCxlKX0pKX0odCxyKX1lbHNlIHAucmVuZGVyQnVmZmVyRGlyZWN0KG4sZSxyLGksdCxvKTt0Lm9uQWZ0ZXJSZW5kZXIocCxlLG4scixpLG8pLGQ9ZXQuZ2V0KGUsX3x8bil9ZnVuY3Rpb24gTXQodCxlLG4peyEwIT09ZS5pc1NjZW5lJiYoZT16KTtjb25zdCByPVcuZ2V0KHQpLGk9ZC5zdGF0ZS5saWdodHMsbz1kLnN0YXRlLnNoYWRvd3NBcnJheSxhPWkuc3RhdGUudmVyc2lvbixzPUsuZ2V0UGFyYW1ldGVycyh0LGkuc3RhdGUsbyxlLG4pLGM9Sy5nZXRQcm9ncmFtQ2FjaGVLZXkocyk7bGV0IGw9ci5wcm9ncmFtLHU9ITA7aWYodm9pZCAwPT09bCl0LmFkZEV2ZW50TGlzdGVuZXIoXCJkaXNwb3NlXCIsZ3QpO2Vsc2UgaWYobC5jYWNoZUtleSE9PWMpdnQodCk7ZWxzZSBpZihyLmxpZ2h0c1N0YXRlVmVyc2lvbiE9PWEpdT0hMTtlbHNle2lmKHZvaWQgMCE9PXMuc2hhZGVySUQpe2NvbnN0IG49dC5pc01lc2hTdGFuZGFyZE1hdGVyaWFsP2UuZW52aXJvbm1lbnQ6bnVsbDtyZXR1cm4gdm9pZChyLmVudk1hcD1xLmdldCh0LmVudk1hcHx8bikpfXU9ITF9dSYmKHMudW5pZm9ybXM9Sy5nZXRVbmlmb3Jtcyh0KSx0Lm9uQmVmb3JlQ29tcGlsZShzLHApLGw9Sy5hY3F1aXJlUHJvZ3JhbShzLGMpLHIucHJvZ3JhbT1sLHIudW5pZm9ybXM9cy51bmlmb3JtcyxyLm91dHB1dEVuY29kaW5nPXMub3V0cHV0RW5jb2RpbmcpO2NvbnN0IGg9ci51bmlmb3JtczsodC5pc1NoYWRlck1hdGVyaWFsfHx0LmlzUmF3U2hhZGVyTWF0ZXJpYWwpJiYhMCE9PXQuY2xpcHBpbmd8fChyLm51bUNsaXBwaW5nUGxhbmVzPW50Lm51bVBsYW5lcyxyLm51bUludGVyc2VjdGlvbj1udC5udW1JbnRlcnNlY3Rpb24saC5jbGlwcGluZ1BsYW5lcz1udC51bmlmb3JtKSxyLmVudmlyb25tZW50PXQuaXNNZXNoU3RhbmRhcmRNYXRlcmlhbD9lLmVudmlyb25tZW50Om51bGwsci5mb2c9ZS5mb2csci5lbnZNYXA9cS5nZXQodC5lbnZNYXB8fHIuZW52aXJvbm1lbnQpLHIubmVlZHNMaWdodHM9ZnVuY3Rpb24odCl7cmV0dXJuIHQuaXNNZXNoTGFtYmVydE1hdGVyaWFsfHx0LmlzTWVzaFRvb25NYXRlcmlhbHx8dC5pc01lc2hQaG9uZ01hdGVyaWFsfHx0LmlzTWVzaFN0YW5kYXJkTWF0ZXJpYWx8fHQuaXNTaGFkb3dNYXRlcmlhbHx8dC5pc1NoYWRlck1hdGVyaWFsJiYhMD09PXQubGlnaHRzfSh0KSxyLmxpZ2h0c1N0YXRlVmVyc2lvbj1hLHIubmVlZHNMaWdodHMmJihoLmFtYmllbnRMaWdodENvbG9yLnZhbHVlPWkuc3RhdGUuYW1iaWVudCxoLmxpZ2h0UHJvYmUudmFsdWU9aS5zdGF0ZS5wcm9iZSxoLmRpcmVjdGlvbmFsTGlnaHRzLnZhbHVlPWkuc3RhdGUuZGlyZWN0aW9uYWwsaC5kaXJlY3Rpb25hbExpZ2h0U2hhZG93cy52YWx1ZT1pLnN0YXRlLmRpcmVjdGlvbmFsU2hhZG93LGguc3BvdExpZ2h0cy52YWx1ZT1pLnN0YXRlLnNwb3QsaC5zcG90TGlnaHRTaGFkb3dzLnZhbHVlPWkuc3RhdGUuc3BvdFNoYWRvdyxoLnJlY3RBcmVhTGlnaHRzLnZhbHVlPWkuc3RhdGUucmVjdEFyZWEsaC5sdGNfMS52YWx1ZT1pLnN0YXRlLnJlY3RBcmVhTFRDMSxoLmx0Y18yLnZhbHVlPWkuc3RhdGUucmVjdEFyZWFMVEMyLGgucG9pbnRMaWdodHMudmFsdWU9aS5zdGF0ZS5wb2ludCxoLnBvaW50TGlnaHRTaGFkb3dzLnZhbHVlPWkuc3RhdGUucG9pbnRTaGFkb3csaC5oZW1pc3BoZXJlTGlnaHRzLnZhbHVlPWkuc3RhdGUuaGVtaSxoLmRpcmVjdGlvbmFsU2hhZG93TWFwLnZhbHVlPWkuc3RhdGUuZGlyZWN0aW9uYWxTaGFkb3dNYXAsaC5kaXJlY3Rpb25hbFNoYWRvd01hdHJpeC52YWx1ZT1pLnN0YXRlLmRpcmVjdGlvbmFsU2hhZG93TWF0cml4LGguc3BvdFNoYWRvd01hcC52YWx1ZT1pLnN0YXRlLnNwb3RTaGFkb3dNYXAsaC5zcG90U2hhZG93TWF0cml4LnZhbHVlPWkuc3RhdGUuc3BvdFNoYWRvd01hdHJpeCxoLnBvaW50U2hhZG93TWFwLnZhbHVlPWkuc3RhdGUucG9pbnRTaGFkb3dNYXAsaC5wb2ludFNoYWRvd01hdHJpeC52YWx1ZT1pLnN0YXRlLnBvaW50U2hhZG93TWF0cml4KTtjb25zdCBmPXIucHJvZ3JhbS5nZXRVbmlmb3JtcygpLG09V2Euc2VxV2l0aFZhbHVlKGYuc2VxLGgpO3IudW5pZm9ybXNMaXN0PW19ZnVuY3Rpb24gVHQodCxlLG4scil7ITAhPT1lLmlzU2NlbmUmJihlPXopLFgucmVzZXRUZXh0dXJlVW5pdHMoKTtjb25zdCBpPWUuZm9nLG89bi5pc01lc2hTdGFuZGFyZE1hdGVyaWFsP2UuZW52aXJvbm1lbnQ6bnVsbCxhPW51bGw9PT15P3Aub3V0cHV0RW5jb2Rpbmc6eS50ZXh0dXJlLmVuY29kaW5nLHM9cS5nZXQobi5lbnZNYXB8fG8pLGM9Vy5nZXQobiksbD1kLnN0YXRlLmxpZ2h0cztpZighMD09PUQmJighMD09PUJ8fHQhPT13KSl7Y29uc3QgZT10PT09dyYmbi5pZD09PWI7bnQuc2V0U3RhdGUobix0LGUpfW4udmVyc2lvbj09PWMuX192ZXJzaW9uP24uZm9nJiZjLmZvZyE9PWl8fGMuZW52aXJvbm1lbnQhPT1vfHxjLm5lZWRzTGlnaHRzJiZjLmxpZ2h0c1N0YXRlVmVyc2lvbiE9PWwuc3RhdGUudmVyc2lvbj9NdChuLGUscik6dm9pZCAwPT09Yy5udW1DbGlwcGluZ1BsYW5lc3x8Yy5udW1DbGlwcGluZ1BsYW5lcz09PW50Lm51bVBsYW5lcyYmYy5udW1JbnRlcnNlY3Rpb249PT1udC5udW1JbnRlcnNlY3Rpb24/KGMub3V0cHV0RW5jb2RpbmchPT1hfHxjLmVudk1hcCE9PXMpJiZNdChuLGUscik6TXQobixlLHIpOihNdChuLGUsciksYy5fX3ZlcnNpb249bi52ZXJzaW9uKTtsZXQgdT0hMSxoPSExLGY9ITE7Y29uc3QgbT1jLnByb2dyYW0sZz1tLmdldFVuaWZvcm1zKCksdj1jLnVuaWZvcm1zO2lmKFYudXNlUHJvZ3JhbShtLnByb2dyYW0pJiYodT0hMCxoPSEwLGY9ITApLG4uaWQhPT1iJiYoYj1uLmlkLGg9ITApLHV8fHchPT10KXtpZihnLnNldFZhbHVlKGx0LFwicHJvamVjdGlvbk1hdHJpeFwiLHQucHJvamVjdGlvbk1hdHJpeCksay5sb2dhcml0aG1pY0RlcHRoQnVmZmVyJiZnLnNldFZhbHVlKGx0LFwibG9nRGVwdGhCdWZGQ1wiLDIvKE1hdGgubG9nKHQuZmFyKzEpL01hdGguTE4yKSksdyE9PXQmJih3PXQsaD0hMCxmPSEwKSxuLmlzU2hhZGVyTWF0ZXJpYWx8fG4uaXNNZXNoUGhvbmdNYXRlcmlhbHx8bi5pc01lc2hUb29uTWF0ZXJpYWx8fG4uaXNNZXNoU3RhbmRhcmRNYXRlcmlhbHx8bi5lbnZNYXApe2NvbnN0IGU9Zy5tYXAuY2FtZXJhUG9zaXRpb247dm9pZCAwIT09ZSYmZS5zZXRWYWx1ZShsdCxVLnNldEZyb21NYXRyaXhQb3NpdGlvbih0Lm1hdHJpeFdvcmxkKSl9KG4uaXNNZXNoUGhvbmdNYXRlcmlhbHx8bi5pc01lc2hUb29uTWF0ZXJpYWx8fG4uaXNNZXNoTGFtYmVydE1hdGVyaWFsfHxuLmlzTWVzaEJhc2ljTWF0ZXJpYWx8fG4uaXNNZXNoU3RhbmRhcmRNYXRlcmlhbHx8bi5pc1NoYWRlck1hdGVyaWFsKSYmZy5zZXRWYWx1ZShsdCxcImlzT3J0aG9ncmFwaGljXCIsITA9PT10LmlzT3J0aG9ncmFwaGljQ2FtZXJhKSwobi5pc01lc2hQaG9uZ01hdGVyaWFsfHxuLmlzTWVzaFRvb25NYXRlcmlhbHx8bi5pc01lc2hMYW1iZXJ0TWF0ZXJpYWx8fG4uaXNNZXNoQmFzaWNNYXRlcmlhbHx8bi5pc01lc2hTdGFuZGFyZE1hdGVyaWFsfHxuLmlzU2hhZGVyTWF0ZXJpYWx8fG4uaXNTaGFkb3dNYXRlcmlhbHx8bi5za2lubmluZykmJmcuc2V0VmFsdWUobHQsXCJ2aWV3TWF0cml4XCIsdC5tYXRyaXhXb3JsZEludmVyc2UpfWlmKG4uc2tpbm5pbmcpe2cuc2V0T3B0aW9uYWwobHQscixcImJpbmRNYXRyaXhcIiksZy5zZXRPcHRpb25hbChsdCxyLFwiYmluZE1hdHJpeEludmVyc2VcIik7Y29uc3QgdD1yLnNrZWxldG9uO2lmKHQpe2NvbnN0IGU9dC5ib25lcztpZihrLmZsb2F0VmVydGV4VGV4dHVyZXMpe2lmKG51bGw9PT10LmJvbmVUZXh0dXJlKXtsZXQgbj1NYXRoLnNxcnQoNCplLmxlbmd0aCk7bj16bi5jZWlsUG93ZXJPZlR3byhuKSxuPU1hdGgubWF4KG4sNCk7Y29uc3Qgcj1uZXcgRmxvYXQzMkFycmF5KG4qbio0KTtyLnNldCh0LmJvbmVNYXRyaWNlcyk7Y29uc3QgaT1uZXcgVG8ocixuLG4sVXQsUHQpO3QuYm9uZU1hdHJpY2VzPXIsdC5ib25lVGV4dHVyZT1pLHQuYm9uZVRleHR1cmVTaXplPW59Zy5zZXRWYWx1ZShsdCxcImJvbmVUZXh0dXJlXCIsdC5ib25lVGV4dHVyZSxYKSxnLnNldFZhbHVlKGx0LFwiYm9uZVRleHR1cmVTaXplXCIsdC5ib25lVGV4dHVyZVNpemUpfWVsc2UgZy5zZXRPcHRpb25hbChsdCx0LFwiYm9uZU1hdHJpY2VzXCIpfX12YXIgeCxfO3JldHVybihofHxjLnJlY2VpdmVTaGFkb3chPT1yLnJlY2VpdmVTaGFkb3cpJiYoYy5yZWNlaXZlU2hhZG93PXIucmVjZWl2ZVNoYWRvdyxnLnNldFZhbHVlKGx0LFwicmVjZWl2ZVNoYWRvd1wiLHIucmVjZWl2ZVNoYWRvdykpLGgmJihnLnNldFZhbHVlKGx0LFwidG9uZU1hcHBpbmdFeHBvc3VyZVwiLHAudG9uZU1hcHBpbmdFeHBvc3VyZSksYy5uZWVkc0xpZ2h0cyYmKF89ZiwoeD12KS5hbWJpZW50TGlnaHRDb2xvci5uZWVkc1VwZGF0ZT1fLHgubGlnaHRQcm9iZS5uZWVkc1VwZGF0ZT1fLHguZGlyZWN0aW9uYWxMaWdodHMubmVlZHNVcGRhdGU9Xyx4LmRpcmVjdGlvbmFsTGlnaHRTaGFkb3dzLm5lZWRzVXBkYXRlPV8seC5wb2ludExpZ2h0cy5uZWVkc1VwZGF0ZT1fLHgucG9pbnRMaWdodFNoYWRvd3MubmVlZHNVcGRhdGU9Xyx4LnNwb3RMaWdodHMubmVlZHNVcGRhdGU9Xyx4LnNwb3RMaWdodFNoYWRvd3MubmVlZHNVcGRhdGU9Xyx4LnJlY3RBcmVhTGlnaHRzLm5lZWRzVXBkYXRlPV8seC5oZW1pc3BoZXJlTGlnaHRzLm5lZWRzVXBkYXRlPV8pLGkmJm4uZm9nJiYkLnJlZnJlc2hGb2dVbmlmb3Jtcyh2LGkpLCQucmVmcmVzaE1hdGVyaWFsVW5pZm9ybXModixuLEwsQSksV2EudXBsb2FkKGx0LGMudW5pZm9ybXNMaXN0LHYsWCkpLG4uaXNTaGFkZXJNYXRlcmlhbCYmITA9PT1uLnVuaWZvcm1zTmVlZFVwZGF0ZSYmKFdhLnVwbG9hZChsdCxjLnVuaWZvcm1zTGlzdCx2LFgpLG4udW5pZm9ybXNOZWVkVXBkYXRlPSExKSxuLmlzU3ByaXRlTWF0ZXJpYWwmJmcuc2V0VmFsdWUobHQsXCJjZW50ZXJcIixyLmNlbnRlciksZy5zZXRWYWx1ZShsdCxcIm1vZGVsVmlld01hdHJpeFwiLHIubW9kZWxWaWV3TWF0cml4KSxnLnNldFZhbHVlKGx0LFwibm9ybWFsTWF0cml4XCIsci5ub3JtYWxNYXRyaXgpLGcuc2V0VmFsdWUobHQsXCJtb2RlbE1hdHJpeFwiLHIubWF0cml4V29ybGQpLG19eHQuc2V0QW5pbWF0aW9uTG9vcCgoZnVuY3Rpb24odCl7ZHQuaXNQcmVzZW50aW5nfHx5dCYmeXQodCl9KSksXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdyYmeHQuc2V0Q29udGV4dCh3aW5kb3cpLHRoaXMuc2V0QW5pbWF0aW9uTG9vcD1mdW5jdGlvbih0KXt5dD10LGR0LnNldEFuaW1hdGlvbkxvb3AodCksbnVsbD09PXQ/eHQuc3RvcCgpOnh0LnN0YXJ0KCl9LHRoaXMucmVuZGVyPWZ1bmN0aW9uKHQsZSl7bGV0IG4scjtpZih2b2lkIDAhPT1hcmd1bWVudHNbMl0mJihjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyLnJlbmRlcigpOiB0aGUgcmVuZGVyVGFyZ2V0IGFyZ3VtZW50IGhhcyBiZWVuIHJlbW92ZWQuIFVzZSAuc2V0UmVuZGVyVGFyZ2V0KCkgaW5zdGVhZC5cIiksbj1hcmd1bWVudHNbMl0pLHZvaWQgMCE9PWFyZ3VtZW50c1szXSYmKGNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXIucmVuZGVyKCk6IHRoZSBmb3JjZUNsZWFyIGFyZ3VtZW50IGhhcyBiZWVuIHJlbW92ZWQuIFVzZSAuY2xlYXIoKSBpbnN0ZWFkLlwiKSxyPWFyZ3VtZW50c1szXSksdm9pZCAwIT09ZSYmITAhPT1lLmlzQ2FtZXJhKXJldHVybiB2b2lkIGNvbnNvbGUuZXJyb3IoXCJUSFJFRS5XZWJHTFJlbmRlcmVyLnJlbmRlcjogY2FtZXJhIGlzIG5vdCBhbiBpbnN0YW5jZSBvZiBUSFJFRS5DYW1lcmEuXCIpO2lmKCEwPT09ZilyZXR1cm47Y3QucmVzZXREZWZhdWx0U3RhdGUoKSxiPS0xLHc9bnVsbCwhMD09PXQuYXV0b1VwZGF0ZSYmdC51cGRhdGVNYXRyaXhXb3JsZCgpLG51bGw9PT1lLnBhcmVudCYmZS51cGRhdGVNYXRyaXhXb3JsZCgpLCEwPT09ZHQuZW5hYmxlZCYmITA9PT1kdC5pc1ByZXNlbnRpbmcmJihlPWR0LmdldENhbWVyYShlKSksITA9PT10LmlzU2NlbmUmJnQub25CZWZvcmVSZW5kZXIocCx0LGUsbnx8eSksZD1ldC5nZXQodCxlKSxkLmluaXQoKSxGLm11bHRpcGx5TWF0cmljZXMoZS5wcm9qZWN0aW9uTWF0cml4LGUubWF0cml4V29ybGRJbnZlcnNlKSxOLnNldEZyb21Qcm9qZWN0aW9uTWF0cml4KEYpLEI9dGhpcy5sb2NhbENsaXBwaW5nRW5hYmxlZCxEPW50LmluaXQodGhpcy5jbGlwcGluZ1BsYW5lcyxCLGUpLGg9dHQuZ2V0KHQsZSksaC5pbml0KCksYnQodCxlLDAscC5zb3J0T2JqZWN0cyksaC5maW5pc2goKSwhMD09PXAuc29ydE9iamVjdHMmJmguc29ydChSLFApLCEwPT09RCYmbnQuYmVnaW5TaGFkb3dzKCk7Y29uc3QgaT1kLnN0YXRlLnNoYWRvd3NBcnJheTtwdC5yZW5kZXIoaSx0LGUpLGQuc2V0dXBMaWdodHMoZSksITA9PT1EJiZudC5lbmRTaGFkb3dzKCksITA9PT10aGlzLmluZm8uYXV0b1Jlc2V0JiZ0aGlzLmluZm8ucmVzZXQoKSx2b2lkIDAhPT1uJiZ0aGlzLnNldFJlbmRlclRhcmdldChuKSxydC5yZW5kZXIoaCx0LGUscik7Y29uc3Qgbz1oLm9wYXF1ZSxhPWgudHJhbnNwYXJlbnQ7by5sZW5ndGg+MCYmd3Qobyx0LGUpLGEubGVuZ3RoPjAmJnd0KGEsdCxlKSwhMD09PXQuaXNTY2VuZSYmdC5vbkFmdGVyUmVuZGVyKHAsdCxlKSxudWxsIT09eSYmKFgudXBkYXRlUmVuZGVyVGFyZ2V0TWlwbWFwKHkpLFgudXBkYXRlTXVsdGlzYW1wbGVSZW5kZXJUYXJnZXQoeSkpLFYuYnVmZmVycy5kZXB0aC5zZXRUZXN0KCEwKSxWLmJ1ZmZlcnMuZGVwdGguc2V0TWFzayghMCksVi5idWZmZXJzLmNvbG9yLnNldE1hc2soITApLFYuc2V0UG9seWdvbk9mZnNldCghMSksaD1udWxsLGQ9bnVsbH0sdGhpcy5zZXRGcmFtZWJ1ZmZlcj1mdW5jdGlvbih0KXttIT09dCYmbnVsbD09PXkmJmx0LmJpbmRGcmFtZWJ1ZmZlcigzNjE2MCx0KSxtPXR9LHRoaXMuZ2V0QWN0aXZlQ3ViZUZhY2U9ZnVuY3Rpb24oKXtyZXR1cm4gZ30sdGhpcy5nZXRBY3RpdmVNaXBtYXBMZXZlbD1mdW5jdGlvbigpe3JldHVybiB2fSx0aGlzLmdldFJlbmRlckxpc3Q9ZnVuY3Rpb24oKXtyZXR1cm4gaH0sdGhpcy5zZXRSZW5kZXJMaXN0PWZ1bmN0aW9uKHQpe2g9dH0sdGhpcy5nZXRSZW5kZXJTdGF0ZT1mdW5jdGlvbigpe3JldHVybiBkfSx0aGlzLnNldFJlbmRlclN0YXRlPWZ1bmN0aW9uKHQpe2Q9dH0sdGhpcy5nZXRSZW5kZXJUYXJnZXQ9ZnVuY3Rpb24oKXtyZXR1cm4geX0sdGhpcy5zZXRSZW5kZXJUYXJnZXQ9ZnVuY3Rpb24odCxlPTAsbj0wKXt5PXQsZz1lLHY9bix0JiZ2b2lkIDA9PT1XLmdldCh0KS5fX3dlYmdsRnJhbWVidWZmZXImJlguc2V0dXBSZW5kZXJUYXJnZXQodCk7bGV0IHI9bSxpPSExO2lmKHQpe2NvbnN0IG49Vy5nZXQodCkuX193ZWJnbEZyYW1lYnVmZmVyO3QuaXNXZWJHTEN1YmVSZW5kZXJUYXJnZXQ/KHI9bltlXSxpPSEwKTpyPXQuaXNXZWJHTE11bHRpc2FtcGxlUmVuZGVyVGFyZ2V0P1cuZ2V0KHQpLl9fd2ViZ2xNdWx0aXNhbXBsZWRGcmFtZWJ1ZmZlcjpuLE0uY29weSh0LnZpZXdwb3J0KSxTLmNvcHkodC5zY2lzc29yKSxUPXQuc2Npc3NvclRlc3R9ZWxzZSBNLmNvcHkoQykubXVsdGlwbHlTY2FsYXIoTCkuZmxvb3IoKSxTLmNvcHkoSSkubXVsdGlwbHlTY2FsYXIoTCkuZmxvb3IoKSxUPU87aWYoeCE9PXImJihsdC5iaW5kRnJhbWVidWZmZXIoMzYxNjAscikseD1yKSxWLnZpZXdwb3J0KE0pLFYuc2Npc3NvcihTKSxWLnNldFNjaXNzb3JUZXN0KFQpLGkpe2NvbnN0IHI9Vy5nZXQodC50ZXh0dXJlKTtsdC5mcmFtZWJ1ZmZlclRleHR1cmUyRCgzNjE2MCwzNjA2NCwzNDA2OStlLHIuX193ZWJnbFRleHR1cmUsbil9fSx0aGlzLnJlYWRSZW5kZXJUYXJnZXRQaXhlbHM9ZnVuY3Rpb24odCxlLG4scixpLG8sYSl7aWYoIXR8fCF0LmlzV2ViR0xSZW5kZXJUYXJnZXQpcmV0dXJuIHZvaWQgY29uc29sZS5lcnJvcihcIlRIUkVFLldlYkdMUmVuZGVyZXIucmVhZFJlbmRlclRhcmdldFBpeGVsczogcmVuZGVyVGFyZ2V0IGlzIG5vdCBUSFJFRS5XZWJHTFJlbmRlclRhcmdldC5cIik7bGV0IHM9Vy5nZXQodCkuX193ZWJnbEZyYW1lYnVmZmVyO2lmKHQuaXNXZWJHTEN1YmVSZW5kZXJUYXJnZXQmJnZvaWQgMCE9PWEmJihzPXNbYV0pLHMpe2xldCBhPSExO3MhPT14JiYobHQuYmluZEZyYW1lYnVmZmVyKDM2MTYwLHMpLGE9ITApO3RyeXtjb25zdCBzPXQudGV4dHVyZSxjPXMuZm9ybWF0LGw9cy50eXBlO2lmKGMhPT1VdCYmc3QuY29udmVydChjKSE9PWx0LmdldFBhcmFtZXRlcigzNTczOSkpcmV0dXJuIHZvaWQgY29uc29sZS5lcnJvcihcIlRIUkVFLldlYkdMUmVuZGVyZXIucmVhZFJlbmRlclRhcmdldFBpeGVsczogcmVuZGVyVGFyZ2V0IGlzIG5vdCBpbiBSR0JBIG9yIGltcGxlbWVudGF0aW9uIGRlZmluZWQgZm9ybWF0LlwiKTtpZighKGw9PT1TdHx8c3QuY29udmVydChsKT09PWx0LmdldFBhcmFtZXRlcigzNTczOCl8fGw9PT1QdCYmKGsuaXNXZWJHTDJ8fEguZ2V0KFwiT0VTX3RleHR1cmVfZmxvYXRcIil8fEguZ2V0KFwiV0VCR0xfY29sb3JfYnVmZmVyX2Zsb2F0XCIpKXx8bD09PUN0JiYoay5pc1dlYkdMMj9ILmdldChcIkVYVF9jb2xvcl9idWZmZXJfZmxvYXRcIik6SC5nZXQoXCJFWFRfY29sb3JfYnVmZmVyX2hhbGZfZmxvYXRcIikpKSlyZXR1cm4gdm9pZCBjb25zb2xlLmVycm9yKFwiVEhSRUUuV2ViR0xSZW5kZXJlci5yZWFkUmVuZGVyVGFyZ2V0UGl4ZWxzOiByZW5kZXJUYXJnZXQgaXMgbm90IGluIFVuc2lnbmVkQnl0ZVR5cGUgb3IgaW1wbGVtZW50YXRpb24gZGVmaW5lZCB0eXBlLlwiKTszNjA1Mz09PWx0LmNoZWNrRnJhbWVidWZmZXJTdGF0dXMoMzYxNjApP2U+PTAmJmU8PXQud2lkdGgtciYmbj49MCYmbjw9dC5oZWlnaHQtaSYmbHQucmVhZFBpeGVscyhlLG4scixpLHN0LmNvbnZlcnQoYyksc3QuY29udmVydChsKSxvKTpjb25zb2xlLmVycm9yKFwiVEhSRUUuV2ViR0xSZW5kZXJlci5yZWFkUmVuZGVyVGFyZ2V0UGl4ZWxzOiByZWFkUGl4ZWxzIGZyb20gcmVuZGVyVGFyZ2V0IGZhaWxlZC4gRnJhbWVidWZmZXIgbm90IGNvbXBsZXRlLlwiKX1maW5hbGx5e2EmJmx0LmJpbmRGcmFtZWJ1ZmZlcigzNjE2MCx4KX19fSx0aGlzLmNvcHlGcmFtZWJ1ZmZlclRvVGV4dHVyZT1mdW5jdGlvbih0LGUsbj0wKXtjb25zdCByPU1hdGgucG93KDIsLW4pLGk9TWF0aC5mbG9vcihlLmltYWdlLndpZHRoKnIpLG89TWF0aC5mbG9vcihlLmltYWdlLmhlaWdodCpyKSxhPXN0LmNvbnZlcnQoZS5mb3JtYXQpO1guc2V0VGV4dHVyZTJEKGUsMCksbHQuY29weVRleEltYWdlMkQoMzU1MyxuLGEsdC54LHQueSxpLG8sMCksVi51bmJpbmRUZXh0dXJlKCl9LHRoaXMuY29weVRleHR1cmVUb1RleHR1cmU9ZnVuY3Rpb24odCxlLG4scj0wKXtjb25zdCBpPWUuaW1hZ2Uud2lkdGgsbz1lLmltYWdlLmhlaWdodCxhPXN0LmNvbnZlcnQobi5mb3JtYXQpLHM9c3QuY29udmVydChuLnR5cGUpO1guc2V0VGV4dHVyZTJEKG4sMCksbHQucGl4ZWxTdG9yZWkoMzc0NDAsbi5mbGlwWSksbHQucGl4ZWxTdG9yZWkoMzc0NDEsbi5wcmVtdWx0aXBseUFscGhhKSxsdC5waXhlbFN0b3JlaSgzMzE3LG4udW5wYWNrQWxpZ25tZW50KSxlLmlzRGF0YVRleHR1cmU/bHQudGV4U3ViSW1hZ2UyRCgzNTUzLHIsdC54LHQueSxpLG8sYSxzLGUuaW1hZ2UuZGF0YSk6ZS5pc0NvbXByZXNzZWRUZXh0dXJlP2x0LmNvbXByZXNzZWRUZXhTdWJJbWFnZTJEKDM1NTMscix0LngsdC55LGUubWlwbWFwc1swXS53aWR0aCxlLm1pcG1hcHNbMF0uaGVpZ2h0LGEsZS5taXBtYXBzWzBdLmRhdGEpOmx0LnRleFN1YkltYWdlMkQoMzU1MyxyLHQueCx0LnksYSxzLGUuaW1hZ2UpLDA9PT1yJiZuLmdlbmVyYXRlTWlwbWFwcyYmbHQuZ2VuZXJhdGVNaXBtYXAoMzU1MyksVi51bmJpbmRUZXh0dXJlKCl9LHRoaXMuaW5pdFRleHR1cmU9ZnVuY3Rpb24odCl7WC5zZXRUZXh0dXJlMkQodCwwKSxWLnVuYmluZFRleHR1cmUoKX0sXCJ1bmRlZmluZWRcIiE9dHlwZW9mIF9fVEhSRUVfREVWVE9PTFNfXyYmX19USFJFRV9ERVZUT09MU19fLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KFwib2JzZXJ2ZVwiLHtkZXRhaWw6dGhpc30pKX1mdW5jdGlvbiBCcyh0KXtEcy5jYWxsKHRoaXMsdCl9UHMucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZSh3by5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpQcyxpc0FycmF5Q2FtZXJhOiEwfSksQ3MucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShKci5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpDcyxpc0dyb3VwOiEwfSksT2JqZWN0LmFzc2lnbihJcy5wcm90b3R5cGUse2NvbnN0cnVjdG9yOklzLGdldEhhbmRTcGFjZTpmdW5jdGlvbigpe2lmKG51bGw9PT10aGlzLl9oYW5kJiYodGhpcy5faGFuZD1uZXcgQ3MsdGhpcy5faGFuZC5tYXRyaXhBdXRvVXBkYXRlPSExLHRoaXMuX2hhbmQudmlzaWJsZT0hMSx0aGlzLl9oYW5kLmpvaW50cz1bXSx0aGlzLl9oYW5kLmlucHV0U3RhdGU9e3BpbmNoaW5nOiExfSx3aW5kb3cuWFJIYW5kKSlmb3IobGV0IHQ9MDt0PD13aW5kb3cuWFJIYW5kLkxJVFRMRV9QSEFMQU5YX1RJUDt0Kyspe2NvbnN0IHQ9bmV3IENzO3QubWF0cml4QXV0b1VwZGF0ZT0hMSx0LnZpc2libGU9ITEsdGhpcy5faGFuZC5qb2ludHMucHVzaCh0KSx0aGlzLl9oYW5kLmFkZCh0KX1yZXR1cm4gdGhpcy5faGFuZH0sZ2V0VGFyZ2V0UmF5U3BhY2U6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbD09PXRoaXMuX3RhcmdldFJheSYmKHRoaXMuX3RhcmdldFJheT1uZXcgQ3MsdGhpcy5fdGFyZ2V0UmF5Lm1hdHJpeEF1dG9VcGRhdGU9ITEsdGhpcy5fdGFyZ2V0UmF5LnZpc2libGU9ITEpLHRoaXMuX3RhcmdldFJheX0sZ2V0R3JpcFNwYWNlOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PT10aGlzLl9ncmlwJiYodGhpcy5fZ3JpcD1uZXcgQ3MsdGhpcy5fZ3JpcC5tYXRyaXhBdXRvVXBkYXRlPSExLHRoaXMuX2dyaXAudmlzaWJsZT0hMSksdGhpcy5fZ3JpcH0sZGlzcGF0Y2hFdmVudDpmdW5jdGlvbih0KXtyZXR1cm4gbnVsbCE9PXRoaXMuX3RhcmdldFJheSYmdGhpcy5fdGFyZ2V0UmF5LmRpc3BhdGNoRXZlbnQodCksbnVsbCE9PXRoaXMuX2dyaXAmJnRoaXMuX2dyaXAuZGlzcGF0Y2hFdmVudCh0KSxudWxsIT09dGhpcy5faGFuZCYmdGhpcy5faGFuZC5kaXNwYXRjaEV2ZW50KHQpLHRoaXN9LGRpc2Nvbm5lY3Q6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZGlzcGF0Y2hFdmVudCh7dHlwZTpcImRpc2Nvbm5lY3RlZFwiLGRhdGE6dH0pLG51bGwhPT10aGlzLl90YXJnZXRSYXkmJih0aGlzLl90YXJnZXRSYXkudmlzaWJsZT0hMSksbnVsbCE9PXRoaXMuX2dyaXAmJih0aGlzLl9ncmlwLnZpc2libGU9ITEpLG51bGwhPT10aGlzLl9oYW5kJiYodGhpcy5faGFuZC52aXNpYmxlPSExKSx0aGlzfSx1cGRhdGU6ZnVuY3Rpb24odCxlLG4pe2xldCByPW51bGwsaT1udWxsLG89bnVsbDtjb25zdCBhPXRoaXMuX3RhcmdldFJheSxzPXRoaXMuX2dyaXAsYz10aGlzLl9oYW5kO2lmKHQmJlwidmlzaWJsZS1ibHVycmVkXCIhPT1lLnNlc3Npb24udmlzaWJpbGl0eVN0YXRlKWlmKGMmJnQuaGFuZCl7bz0hMDtmb3IobGV0IHI9MDtyPD13aW5kb3cuWFJIYW5kLkxJVFRMRV9QSEFMQU5YX1RJUDtyKyspaWYodC5oYW5kW3JdKXtjb25zdCBpPWUuZ2V0Sm9pbnRQb3NlKHQuaGFuZFtyXSxuKSxvPWMuam9pbnRzW3JdO251bGwhPT1pJiYoby5tYXRyaXguZnJvbUFycmF5KGkudHJhbnNmb3JtLm1hdHJpeCksby5tYXRyaXguZGVjb21wb3NlKG8ucG9zaXRpb24sby5yb3RhdGlvbixvLnNjYWxlKSxvLmpvaW50UmFkaXVzPWkucmFkaXVzKSxvLnZpc2libGU9bnVsbCE9PWk7Y29uc3QgYT1jLmpvaW50c1t3aW5kb3cuWFJIYW5kLklOREVYX1BIQUxBTlhfVElQXSxzPWMuam9pbnRzW3dpbmRvdy5YUkhhbmQuVEhVTUJfUEhBTEFOWF9USVBdLGw9YS5wb3NpdGlvbi5kaXN0YW5jZVRvKHMucG9zaXRpb24pLHU9LjAyLGg9LjAwNTtjLmlucHV0U3RhdGUucGluY2hpbmcmJmw+dStoPyhjLmlucHV0U3RhdGUucGluY2hpbmc9ITEsdGhpcy5kaXNwYXRjaEV2ZW50KHt0eXBlOlwicGluY2hlbmRcIixoYW5kZWRuZXNzOnQuaGFuZGVkbmVzcyx0YXJnZXQ6dGhpc30pKTohYy5pbnB1dFN0YXRlLnBpbmNoaW5nJiZsPD11LWgmJihjLmlucHV0U3RhdGUucGluY2hpbmc9ITAsdGhpcy5kaXNwYXRjaEV2ZW50KHt0eXBlOlwicGluY2hzdGFydFwiLGhhbmRlZG5lc3M6dC5oYW5kZWRuZXNzLHRhcmdldDp0aGlzfSkpfX1lbHNlIG51bGwhPT1hJiYocj1lLmdldFBvc2UodC50YXJnZXRSYXlTcGFjZSxuKSxudWxsIT09ciYmKGEubWF0cml4LmZyb21BcnJheShyLnRyYW5zZm9ybS5tYXRyaXgpLGEubWF0cml4LmRlY29tcG9zZShhLnBvc2l0aW9uLGEucm90YXRpb24sYS5zY2FsZSkpKSxudWxsIT09cyYmdC5ncmlwU3BhY2UmJihpPWUuZ2V0UG9zZSh0LmdyaXBTcGFjZSxuKSxudWxsIT09aSYmKHMubWF0cml4LmZyb21BcnJheShpLnRyYW5zZm9ybS5tYXRyaXgpLHMubWF0cml4LmRlY29tcG9zZShzLnBvc2l0aW9uLHMucm90YXRpb24scy5zY2FsZSkpKTtyZXR1cm4gbnVsbCE9PWEmJihhLnZpc2libGU9bnVsbCE9PXIpLG51bGwhPT1zJiYocy52aXNpYmxlPW51bGwhPT1pKSxudWxsIT09YyYmKGMudmlzaWJsZT1udWxsIT09byksdGhpc319KSxPYmplY3QuYXNzaWduKE9zLnByb3RvdHlwZSxCbi5wcm90b3R5cGUpLEJzLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoRHMucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6QnMsaXNXZWJHTDFSZW5kZXJlcjohMH0pO2NsYXNzIEZze2NvbnN0cnVjdG9yKHQsZSl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJpc0ZvZ0V4cDJcIix7dmFsdWU6ITB9KSx0aGlzLm5hbWU9XCJcIix0aGlzLmNvbG9yPW5ldyB5aSh0KSx0aGlzLmRlbnNpdHk9dm9pZCAwIT09ZT9lOjI1ZS01fWNsb25lKCl7cmV0dXJuIG5ldyBGcyh0aGlzLmNvbG9yLHRoaXMuZGVuc2l0eSl9dG9KU09OKCl7cmV0dXJue3R5cGU6XCJGb2dFeHAyXCIsY29sb3I6dGhpcy5jb2xvci5nZXRIZXgoKSxkZW5zaXR5OnRoaXMuZGVuc2l0eX19fWNsYXNzIFVze2NvbnN0cnVjdG9yKHQsZSxuKXtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImlzRm9nXCIse3ZhbHVlOiEwfSksdGhpcy5uYW1lPVwiXCIsdGhpcy5jb2xvcj1uZXcgeWkodCksdGhpcy5uZWFyPXZvaWQgMCE9PWU/ZToxLHRoaXMuZmFyPXZvaWQgMCE9PW4/bjoxZTN9Y2xvbmUoKXtyZXR1cm4gbmV3IFVzKHRoaXMuY29sb3IsdGhpcy5uZWFyLHRoaXMuZmFyKX10b0pTT04oKXtyZXR1cm57dHlwZTpcIkZvZ1wiLGNvbG9yOnRoaXMuY29sb3IuZ2V0SGV4KCksbmVhcjp0aGlzLm5lYXIsZmFyOnRoaXMuZmFyfX19Y2xhc3MgenMgZXh0ZW5kcyBKcntjb25zdHJ1Y3Rvcigpe3N1cGVyKCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJpc1NjZW5lXCIse3ZhbHVlOiEwfSksdGhpcy50eXBlPVwiU2NlbmVcIix0aGlzLmJhY2tncm91bmQ9bnVsbCx0aGlzLmVudmlyb25tZW50PW51bGwsdGhpcy5mb2c9bnVsbCx0aGlzLm92ZXJyaWRlTWF0ZXJpYWw9bnVsbCx0aGlzLmF1dG9VcGRhdGU9ITAsXCJ1bmRlZmluZWRcIiE9dHlwZW9mIF9fVEhSRUVfREVWVE9PTFNfXyYmX19USFJFRV9ERVZUT09MU19fLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KFwib2JzZXJ2ZVwiLHtkZXRhaWw6dGhpc30pKX1jb3B5KHQsZSl7cmV0dXJuIHN1cGVyLmNvcHkodCxlKSxudWxsIT09dC5iYWNrZ3JvdW5kJiYodGhpcy5iYWNrZ3JvdW5kPXQuYmFja2dyb3VuZC5jbG9uZSgpKSxudWxsIT09dC5lbnZpcm9ubWVudCYmKHRoaXMuZW52aXJvbm1lbnQ9dC5lbnZpcm9ubWVudC5jbG9uZSgpKSxudWxsIT09dC5mb2cmJih0aGlzLmZvZz10LmZvZy5jbG9uZSgpKSxudWxsIT09dC5vdmVycmlkZU1hdGVyaWFsJiYodGhpcy5vdmVycmlkZU1hdGVyaWFsPXQub3ZlcnJpZGVNYXRlcmlhbC5jbG9uZSgpKSx0aGlzLmF1dG9VcGRhdGU9dC5hdXRvVXBkYXRlLHRoaXMubWF0cml4QXV0b1VwZGF0ZT10Lm1hdHJpeEF1dG9VcGRhdGUsdGhpc310b0pTT04odCl7Y29uc3QgZT1zdXBlci50b0pTT04odCk7cmV0dXJuIG51bGwhPT10aGlzLmJhY2tncm91bmQmJihlLm9iamVjdC5iYWNrZ3JvdW5kPXRoaXMuYmFja2dyb3VuZC50b0pTT04odCkpLG51bGwhPT10aGlzLmVudmlyb25tZW50JiYoZS5vYmplY3QuZW52aXJvbm1lbnQ9dGhpcy5lbnZpcm9ubWVudC50b0pTT04odCkpLG51bGwhPT10aGlzLmZvZyYmKGUub2JqZWN0LmZvZz10aGlzLmZvZy50b0pTT04oKSksZX19ZnVuY3Rpb24gR3ModCxlKXt0aGlzLmFycmF5PXQsdGhpcy5zdHJpZGU9ZSx0aGlzLmNvdW50PXZvaWQgMCE9PXQ/dC5sZW5ndGgvZTowLHRoaXMudXNhZ2U9VG4sdGhpcy51cGRhdGVSYW5nZT17b2Zmc2V0OjAsY291bnQ6LTF9LHRoaXMudmVyc2lvbj0wLHRoaXMudXVpZD16bi5nZW5lcmF0ZVVVSUQoKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoR3MucHJvdG90eXBlLFwibmVlZHNVcGRhdGVcIix7c2V0OmZ1bmN0aW9uKHQpeyEwPT09dCYmdGhpcy52ZXJzaW9uKyt9fSksT2JqZWN0LmFzc2lnbihHcy5wcm90b3R5cGUse2lzSW50ZXJsZWF2ZWRCdWZmZXI6ITAsb25VcGxvYWRDYWxsYmFjazpmdW5jdGlvbigpe30sc2V0VXNhZ2U6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMudXNhZ2U9dCx0aGlzfSxjb3B5OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmFycmF5PW5ldyB0LmFycmF5LmNvbnN0cnVjdG9yKHQuYXJyYXkpLHRoaXMuY291bnQ9dC5jb3VudCx0aGlzLnN0cmlkZT10LnN0cmlkZSx0aGlzLnVzYWdlPXQudXNhZ2UsdGhpc30sY29weUF0OmZ1bmN0aW9uKHQsZSxuKXt0Kj10aGlzLnN0cmlkZSxuKj1lLnN0cmlkZTtmb3IobGV0IHI9MCxpPXRoaXMuc3RyaWRlO3I8aTtyKyspdGhpcy5hcnJheVt0K3JdPWUuYXJyYXlbbityXTtyZXR1cm4gdGhpc30sc2V0OmZ1bmN0aW9uKHQsZT0wKXtyZXR1cm4gdGhpcy5hcnJheS5zZXQodCxlKSx0aGlzfSxjbG9uZTpmdW5jdGlvbih0KXt2b2lkIDA9PT10LmFycmF5QnVmZmVycyYmKHQuYXJyYXlCdWZmZXJzPXt9KSx2b2lkIDA9PT10aGlzLmFycmF5LmJ1ZmZlci5fdXVpZCYmKHRoaXMuYXJyYXkuYnVmZmVyLl91dWlkPXpuLmdlbmVyYXRlVVVJRCgpKSx2b2lkIDA9PT10LmFycmF5QnVmZmVyc1t0aGlzLmFycmF5LmJ1ZmZlci5fdXVpZF0mJih0LmFycmF5QnVmZmVyc1t0aGlzLmFycmF5LmJ1ZmZlci5fdXVpZF09dGhpcy5hcnJheS5zbGljZSgwKS5idWZmZXIpO2NvbnN0IGU9bmV3IEdzKG5ldyB0aGlzLmFycmF5LmNvbnN0cnVjdG9yKHQuYXJyYXlCdWZmZXJzW3RoaXMuYXJyYXkuYnVmZmVyLl91dWlkXSksdGhpcy5zdHJpZGUpO3JldHVybiBlLnNldFVzYWdlKHRoaXMudXNhZ2UpLGV9LG9uVXBsb2FkOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm9uVXBsb2FkQ2FsbGJhY2s9dCx0aGlzfSx0b0pTT046ZnVuY3Rpb24odCl7cmV0dXJuIHZvaWQgMD09PXQuYXJyYXlCdWZmZXJzJiYodC5hcnJheUJ1ZmZlcnM9e30pLHZvaWQgMD09PXRoaXMuYXJyYXkuYnVmZmVyLl91dWlkJiYodGhpcy5hcnJheS5idWZmZXIuX3V1aWQ9em4uZ2VuZXJhdGVVVUlEKCkpLHZvaWQgMD09PXQuYXJyYXlCdWZmZXJzW3RoaXMuYXJyYXkuYnVmZmVyLl91dWlkXSYmKHQuYXJyYXlCdWZmZXJzW3RoaXMuYXJyYXkuYnVmZmVyLl91dWlkXT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChuZXcgVWludDMyQXJyYXkodGhpcy5hcnJheS5idWZmZXIpKSkse3V1aWQ6dGhpcy51dWlkLGJ1ZmZlcjp0aGlzLmFycmF5LmJ1ZmZlci5fdXVpZCx0eXBlOnRoaXMuYXJyYXkuY29uc3RydWN0b3IubmFtZSxzdHJpZGU6dGhpcy5zdHJpZGV9fX0pO2NvbnN0IEhzPW5ldyBLbjtmdW5jdGlvbiBrcyh0LGUsbixyKXt0aGlzLm5hbWU9XCJcIix0aGlzLmRhdGE9dCx0aGlzLml0ZW1TaXplPWUsdGhpcy5vZmZzZXQ9bix0aGlzLm5vcm1hbGl6ZWQ9ITA9PT1yfWZ1bmN0aW9uIFZzKHQpe3dpLmNhbGwodGhpcyksdGhpcy50eXBlPVwiU3ByaXRlTWF0ZXJpYWxcIix0aGlzLmNvbG9yPW5ldyB5aSgxNjc3NzIxNSksdGhpcy5tYXA9bnVsbCx0aGlzLmFscGhhTWFwPW51bGwsdGhpcy5yb3RhdGlvbj0wLHRoaXMuc2l6ZUF0dGVudWF0aW9uPSEwLHRoaXMudHJhbnNwYXJlbnQ9ITAsdGhpcy5zZXRWYWx1ZXModCl9bGV0IGpzO09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGtzLnByb3RvdHlwZSx7Y291bnQ6e2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRhdGEuY291bnR9fSxhcnJheTp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGF0YS5hcnJheX19LG5lZWRzVXBkYXRlOntzZXQ6ZnVuY3Rpb24odCl7dGhpcy5kYXRhLm5lZWRzVXBkYXRlPXR9fX0pLE9iamVjdC5hc3NpZ24oa3MucHJvdG90eXBlLHtpc0ludGVybGVhdmVkQnVmZmVyQXR0cmlidXRlOiEwLGFwcGx5TWF0cml4NDpmdW5jdGlvbih0KXtmb3IobGV0IGU9MCxuPXRoaXMuZGF0YS5jb3VudDtlPG47ZSsrKUhzLng9dGhpcy5nZXRYKGUpLEhzLnk9dGhpcy5nZXRZKGUpLEhzLno9dGhpcy5nZXRaKGUpLEhzLmFwcGx5TWF0cml4NCh0KSx0aGlzLnNldFhZWihlLEhzLngsSHMueSxIcy56KTtyZXR1cm4gdGhpc30sc2V0WDpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmRhdGEuYXJyYXlbdCp0aGlzLmRhdGEuc3RyaWRlK3RoaXMub2Zmc2V0XT1lLHRoaXN9LHNldFk6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5kYXRhLmFycmF5W3QqdGhpcy5kYXRhLnN0cmlkZSt0aGlzLm9mZnNldCsxXT1lLHRoaXN9LHNldFo6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5kYXRhLmFycmF5W3QqdGhpcy5kYXRhLnN0cmlkZSt0aGlzLm9mZnNldCsyXT1lLHRoaXN9LHNldFc6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5kYXRhLmFycmF5W3QqdGhpcy5kYXRhLnN0cmlkZSt0aGlzLm9mZnNldCszXT1lLHRoaXN9LGdldFg6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZGF0YS5hcnJheVt0KnRoaXMuZGF0YS5zdHJpZGUrdGhpcy5vZmZzZXRdfSxnZXRZOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmRhdGEuYXJyYXlbdCp0aGlzLmRhdGEuc3RyaWRlK3RoaXMub2Zmc2V0KzFdfSxnZXRaOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmRhdGEuYXJyYXlbdCp0aGlzLmRhdGEuc3RyaWRlK3RoaXMub2Zmc2V0KzJdfSxnZXRXOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmRhdGEuYXJyYXlbdCp0aGlzLmRhdGEuc3RyaWRlK3RoaXMub2Zmc2V0KzNdfSxzZXRYWTpmdW5jdGlvbih0LGUsbil7cmV0dXJuIHQ9dCp0aGlzLmRhdGEuc3RyaWRlK3RoaXMub2Zmc2V0LHRoaXMuZGF0YS5hcnJheVt0KzBdPWUsdGhpcy5kYXRhLmFycmF5W3QrMV09bix0aGlzfSxzZXRYWVo6ZnVuY3Rpb24odCxlLG4scil7cmV0dXJuIHQ9dCp0aGlzLmRhdGEuc3RyaWRlK3RoaXMub2Zmc2V0LHRoaXMuZGF0YS5hcnJheVt0KzBdPWUsdGhpcy5kYXRhLmFycmF5W3QrMV09bix0aGlzLmRhdGEuYXJyYXlbdCsyXT1yLHRoaXN9LHNldFhZWlc6ZnVuY3Rpb24odCxlLG4scixpKXtyZXR1cm4gdD10KnRoaXMuZGF0YS5zdHJpZGUrdGhpcy5vZmZzZXQsdGhpcy5kYXRhLmFycmF5W3QrMF09ZSx0aGlzLmRhdGEuYXJyYXlbdCsxXT1uLHRoaXMuZGF0YS5hcnJheVt0KzJdPXIsdGhpcy5kYXRhLmFycmF5W3QrM109aSx0aGlzfSxjbG9uZTpmdW5jdGlvbih0KXtpZih2b2lkIDA9PT10KXtjb25zb2xlLmxvZyhcIlRIUkVFLkludGVybGVhdmVkQnVmZmVyQXR0cmlidXRlLmNsb25lKCk6IENsb25pbmcgYW4gaW50ZXJsYXZlZCBidWZmZXIgYXR0cmlidXRlIHdpbGwgZGVpbnRlcmxlYXZlIGJ1ZmZlciBkYXRhLlwiKTtjb25zdCB0PVtdO2ZvcihsZXQgZT0wO2U8dGhpcy5jb3VudDtlKyspe2NvbnN0IG49ZSp0aGlzLmRhdGEuc3RyaWRlK3RoaXMub2Zmc2V0O2ZvcihsZXQgZT0wO2U8dGhpcy5pdGVtU2l6ZTtlKyspdC5wdXNoKHRoaXMuZGF0YS5hcnJheVtuK2VdKX1yZXR1cm4gbmV3IFRpKG5ldyB0aGlzLmFycmF5LmNvbnN0cnVjdG9yKHQpLHRoaXMuaXRlbVNpemUsdGhpcy5ub3JtYWxpemVkKX1yZXR1cm4gdm9pZCAwPT09dC5pbnRlcmxlYXZlZEJ1ZmZlcnMmJih0LmludGVybGVhdmVkQnVmZmVycz17fSksdm9pZCAwPT09dC5pbnRlcmxlYXZlZEJ1ZmZlcnNbdGhpcy5kYXRhLnV1aWRdJiYodC5pbnRlcmxlYXZlZEJ1ZmZlcnNbdGhpcy5kYXRhLnV1aWRdPXRoaXMuZGF0YS5jbG9uZSh0KSksbmV3IGtzKHQuaW50ZXJsZWF2ZWRCdWZmZXJzW3RoaXMuZGF0YS51dWlkXSx0aGlzLml0ZW1TaXplLHRoaXMub2Zmc2V0LHRoaXMubm9ybWFsaXplZCl9LHRvSlNPTjpmdW5jdGlvbih0KXtpZih2b2lkIDA9PT10KXtjb25zb2xlLmxvZyhcIlRIUkVFLkludGVybGVhdmVkQnVmZmVyQXR0cmlidXRlLnRvSlNPTigpOiBTZXJpYWxpemluZyBhbiBpbnRlcmxhdmVkIGJ1ZmZlciBhdHRyaWJ1dGUgd2lsbCBkZWludGVybGVhdmUgYnVmZmVyIGRhdGEuXCIpO2NvbnN0IHQ9W107Zm9yKGxldCBlPTA7ZTx0aGlzLmNvdW50O2UrKyl7Y29uc3Qgbj1lKnRoaXMuZGF0YS5zdHJpZGUrdGhpcy5vZmZzZXQ7Zm9yKGxldCBlPTA7ZTx0aGlzLml0ZW1TaXplO2UrKyl0LnB1c2godGhpcy5kYXRhLmFycmF5W24rZV0pfXJldHVybntpdGVtU2l6ZTp0aGlzLml0ZW1TaXplLHR5cGU6dGhpcy5hcnJheS5jb25zdHJ1Y3Rvci5uYW1lLGFycmF5OnQsbm9ybWFsaXplZDp0aGlzLm5vcm1hbGl6ZWR9fXJldHVybiB2b2lkIDA9PT10LmludGVybGVhdmVkQnVmZmVycyYmKHQuaW50ZXJsZWF2ZWRCdWZmZXJzPXt9KSx2b2lkIDA9PT10LmludGVybGVhdmVkQnVmZmVyc1t0aGlzLmRhdGEudXVpZF0mJih0LmludGVybGVhdmVkQnVmZmVyc1t0aGlzLmRhdGEudXVpZF09dGhpcy5kYXRhLnRvSlNPTih0KSkse2lzSW50ZXJsZWF2ZWRCdWZmZXJBdHRyaWJ1dGU6ITAsaXRlbVNpemU6dGhpcy5pdGVtU2l6ZSxkYXRhOnRoaXMuZGF0YS51dWlkLG9mZnNldDp0aGlzLm9mZnNldCxub3JtYWxpemVkOnRoaXMubm9ybWFsaXplZH19fSksVnMucHJvdG90eXBlPU9iamVjdC5jcmVhdGUod2kucHJvdG90eXBlKSxWcy5wcm90b3R5cGUuY29uc3RydWN0b3I9VnMsVnMucHJvdG90eXBlLmlzU3ByaXRlTWF0ZXJpYWw9ITAsVnMucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24odCl7cmV0dXJuIHdpLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyx0KSx0aGlzLmNvbG9yLmNvcHkodC5jb2xvciksdGhpcy5tYXA9dC5tYXAsdGhpcy5hbHBoYU1hcD10LmFscGhhTWFwLHRoaXMucm90YXRpb249dC5yb3RhdGlvbix0aGlzLnNpemVBdHRlbnVhdGlvbj10LnNpemVBdHRlbnVhdGlvbix0aGlzfTtjb25zdCBXcz1uZXcgS24sWHM9bmV3IEtuLHFzPW5ldyBLbixZcz1uZXcgR24sWnM9bmV3IEduLEpzPW5ldyBUcixLcz1uZXcgS24sUXM9bmV3IEtuLCRzPW5ldyBLbix0Yz1uZXcgR24sZWM9bmV3IEduLG5jPW5ldyBHbjtmdW5jdGlvbiByYyh0KXtpZihKci5jYWxsKHRoaXMpLHRoaXMudHlwZT1cIlNwcml0ZVwiLHZvaWQgMD09PWpzKXtqcz1uZXcgcWk7Y29uc3QgdD1uZXcgR3MobmV3IEZsb2F0MzJBcnJheShbLS41LC0uNSwwLDAsMCwuNSwtLjUsMCwxLDAsLjUsLjUsMCwxLDEsLS41LC41LDAsMCwxXSksNSk7anMuc2V0SW5kZXgoWzAsMSwyLDAsMiwzXSksanMuc2V0QXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcga3ModCwzLDAsITEpKSxqcy5zZXRBdHRyaWJ1dGUoXCJ1dlwiLG5ldyBrcyh0LDIsMywhMSkpfXRoaXMuZ2VvbWV0cnk9anMsdGhpcy5tYXRlcmlhbD12b2lkIDAhPT10P3Q6bmV3IFZzLHRoaXMuY2VudGVyPW5ldyBHbiguNSwuNSl9ZnVuY3Rpb24gaWModCxlLG4scixpLG8pe1lzLnN1YlZlY3RvcnModCxuKS5hZGRTY2FsYXIoLjUpLm11bHRpcGx5KHIpLHZvaWQgMCE9PWk/KFpzLng9bypZcy54LWkqWXMueSxacy55PWkqWXMueCtvKllzLnkpOlpzLmNvcHkoWXMpLHQuY29weShlKSx0LngrPVpzLngsdC55Kz1acy55LHQuYXBwbHlNYXRyaXg0KEpzKX1yYy5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKEpyLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOnJjLGlzU3ByaXRlOiEwLHJheWNhc3Q6ZnVuY3Rpb24odCxlKXtudWxsPT09dC5jYW1lcmEmJmNvbnNvbGUuZXJyb3IoJ1RIUkVFLlNwcml0ZTogXCJSYXljYXN0ZXIuY2FtZXJhXCIgbmVlZHMgdG8gYmUgc2V0IGluIG9yZGVyIHRvIHJheWNhc3QgYWdhaW5zdCBzcHJpdGVzLicpLFhzLnNldEZyb21NYXRyaXhTY2FsZSh0aGlzLm1hdHJpeFdvcmxkKSxKcy5jb3B5KHQuY2FtZXJhLm1hdHJpeFdvcmxkKSx0aGlzLm1vZGVsVmlld01hdHJpeC5tdWx0aXBseU1hdHJpY2VzKHQuY2FtZXJhLm1hdHJpeFdvcmxkSW52ZXJzZSx0aGlzLm1hdHJpeFdvcmxkKSxxcy5zZXRGcm9tTWF0cml4UG9zaXRpb24odGhpcy5tb2RlbFZpZXdNYXRyaXgpLHQuY2FtZXJhLmlzUGVyc3BlY3RpdmVDYW1lcmEmJiExPT09dGhpcy5tYXRlcmlhbC5zaXplQXR0ZW51YXRpb24mJlhzLm11bHRpcGx5U2NhbGFyKC1xcy56KTtjb25zdCBuPXRoaXMubWF0ZXJpYWwucm90YXRpb247bGV0IHIsaTswIT09biYmKGk9TWF0aC5jb3Mobikscj1NYXRoLnNpbihuKSk7Y29uc3Qgbz10aGlzLmNlbnRlcjtpYyhLcy5zZXQoLS41LC0uNSwwKSxxcyxvLFhzLHIsaSksaWMoUXMuc2V0KC41LC0uNSwwKSxxcyxvLFhzLHIsaSksaWMoJHMuc2V0KC41LC41LDApLHFzLG8sWHMscixpKSx0Yy5zZXQoMCwwKSxlYy5zZXQoMSwwKSxuYy5zZXQoMSwxKTtsZXQgYT10LnJheS5pbnRlcnNlY3RUcmlhbmdsZShLcyxRcywkcywhMSxXcyk7aWYobnVsbD09PWEmJihpYyhRcy5zZXQoLS41LC41LDApLHFzLG8sWHMscixpKSxlYy5zZXQoMCwxKSxhPXQucmF5LmludGVyc2VjdFRyaWFuZ2xlKEtzLCRzLFFzLCExLFdzKSxudWxsPT09YSkpcmV0dXJuO2NvbnN0IHM9dC5yYXkub3JpZ2luLmRpc3RhbmNlVG8oV3MpO3M8dC5uZWFyfHxzPnQuZmFyfHxlLnB1c2goe2Rpc3RhbmNlOnMscG9pbnQ6V3MuY2xvbmUoKSx1djpoaS5nZXRVVihXcyxLcyxRcywkcyx0YyxlYyxuYyxuZXcgR24pLGZhY2U6bnVsbCxvYmplY3Q6dGhpc30pfSxjb3B5OmZ1bmN0aW9uKHQpe3JldHVybiBKci5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsdCksdm9pZCAwIT09dC5jZW50ZXImJnRoaXMuY2VudGVyLmNvcHkodC5jZW50ZXIpLHRoaXMubWF0ZXJpYWw9dC5tYXRlcmlhbCx0aGlzfX0pO2NvbnN0IG9jPW5ldyBLbixhYz1uZXcgS247ZnVuY3Rpb24gc2MoKXtKci5jYWxsKHRoaXMpLHRoaXMuX2N1cnJlbnRMZXZlbD0wLHRoaXMudHlwZT1cIkxPRFwiLE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMse2xldmVsczp7ZW51bWVyYWJsZTohMCx2YWx1ZTpbXX19KSx0aGlzLmF1dG9VcGRhdGU9ITB9ZnVuY3Rpb24gY2ModCxlKXt0JiZ0LmlzR2VvbWV0cnkmJmNvbnNvbGUuZXJyb3IoXCJUSFJFRS5Ta2lubmVkTWVzaCBubyBsb25nZXIgc3VwcG9ydHMgVEhSRUUuR2VvbWV0cnkuIFVzZSBUSFJFRS5CdWZmZXJHZW9tZXRyeSBpbnN0ZWFkLlwiKSxoby5jYWxsKHRoaXMsdCxlKSx0aGlzLnR5cGU9XCJTa2lubmVkTWVzaFwiLHRoaXMuYmluZE1vZGU9XCJhdHRhY2hlZFwiLHRoaXMuYmluZE1hdHJpeD1uZXcgVHIsdGhpcy5iaW5kTWF0cml4SW52ZXJzZT1uZXcgVHJ9ZnVuY3Rpb24gbGMoKXtKci5jYWxsKHRoaXMpLHRoaXMudHlwZT1cIkJvbmVcIn1zYy5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKEpyLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOnNjLGlzTE9EOiEwLGNvcHk6ZnVuY3Rpb24odCl7SnIucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLHQsITEpO2NvbnN0IGU9dC5sZXZlbHM7Zm9yKGxldCB0PTAsbj1lLmxlbmd0aDt0PG47dCsrKXtjb25zdCBuPWVbdF07dGhpcy5hZGRMZXZlbChuLm9iamVjdC5jbG9uZSgpLG4uZGlzdGFuY2UpfXJldHVybiB0aGlzLmF1dG9VcGRhdGU9dC5hdXRvVXBkYXRlLHRoaXN9LGFkZExldmVsOmZ1bmN0aW9uKHQsZT0wKXtlPU1hdGguYWJzKGUpO2NvbnN0IG49dGhpcy5sZXZlbHM7bGV0IHI7Zm9yKHI9MDtyPG4ubGVuZ3RoJiYhKGU8bltyXS5kaXN0YW5jZSk7cisrKTtyZXR1cm4gbi5zcGxpY2UociwwLHtkaXN0YW5jZTplLG9iamVjdDp0fSksdGhpcy5hZGQodCksdGhpc30sZ2V0Q3VycmVudExldmVsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2N1cnJlbnRMZXZlbH0sZ2V0T2JqZWN0Rm9yRGlzdGFuY2U6ZnVuY3Rpb24odCl7Y29uc3QgZT10aGlzLmxldmVscztpZihlLmxlbmd0aD4wKXtsZXQgbixyO2ZvcihuPTEscj1lLmxlbmd0aDtuPHImJiEodDxlW25dLmRpc3RhbmNlKTtuKyspO3JldHVybiBlW24tMV0ub2JqZWN0fXJldHVybiBudWxsfSxyYXljYXN0OmZ1bmN0aW9uKHQsZSl7aWYodGhpcy5sZXZlbHMubGVuZ3RoPjApe29jLnNldEZyb21NYXRyaXhQb3NpdGlvbih0aGlzLm1hdHJpeFdvcmxkKTtjb25zdCBuPXQucmF5Lm9yaWdpbi5kaXN0YW5jZVRvKG9jKTt0aGlzLmdldE9iamVjdEZvckRpc3RhbmNlKG4pLnJheWNhc3QodCxlKX19LHVwZGF0ZTpmdW5jdGlvbih0KXtjb25zdCBlPXRoaXMubGV2ZWxzO2lmKGUubGVuZ3RoPjEpe29jLnNldEZyb21NYXRyaXhQb3NpdGlvbih0Lm1hdHJpeFdvcmxkKSxhYy5zZXRGcm9tTWF0cml4UG9zaXRpb24odGhpcy5tYXRyaXhXb3JsZCk7Y29uc3Qgbj1vYy5kaXN0YW5jZVRvKGFjKS90Lnpvb207bGV0IHIsaTtmb3IoZVswXS5vYmplY3QudmlzaWJsZT0hMCxyPTEsaT1lLmxlbmd0aDtyPGkmJm4+PWVbcl0uZGlzdGFuY2U7cisrKWVbci0xXS5vYmplY3QudmlzaWJsZT0hMSxlW3JdLm9iamVjdC52aXNpYmxlPSEwO2Zvcih0aGlzLl9jdXJyZW50TGV2ZWw9ci0xO3I8aTtyKyspZVtyXS5vYmplY3QudmlzaWJsZT0hMX19LHRvSlNPTjpmdW5jdGlvbih0KXtjb25zdCBlPUpyLnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzLHQpOyExPT09dGhpcy5hdXRvVXBkYXRlJiYoZS5vYmplY3QuYXV0b1VwZGF0ZT0hMSksZS5vYmplY3QubGV2ZWxzPVtdO2NvbnN0IG49dGhpcy5sZXZlbHM7Zm9yKGxldCB0PTAscj1uLmxlbmd0aDt0PHI7dCsrKXtjb25zdCByPW5bdF07ZS5vYmplY3QubGV2ZWxzLnB1c2goe29iamVjdDpyLm9iamVjdC51dWlkLGRpc3RhbmNlOnIuZGlzdGFuY2V9KX1yZXR1cm4gZX19KSxjYy5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKGhvLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOmNjLGlzU2tpbm5lZE1lc2g6ITAsY29weTpmdW5jdGlvbih0KXtyZXR1cm4gaG8ucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLHQpLHRoaXMuYmluZE1vZGU9dC5iaW5kTW9kZSx0aGlzLmJpbmRNYXRyaXguY29weSh0LmJpbmRNYXRyaXgpLHRoaXMuYmluZE1hdHJpeEludmVyc2UuY29weSh0LmJpbmRNYXRyaXhJbnZlcnNlKSx0aGlzLnNrZWxldG9uPXQuc2tlbGV0b24sdGhpc30sYmluZDpmdW5jdGlvbih0LGUpe3RoaXMuc2tlbGV0b249dCx2b2lkIDA9PT1lJiYodGhpcy51cGRhdGVNYXRyaXhXb3JsZCghMCksdGhpcy5za2VsZXRvbi5jYWxjdWxhdGVJbnZlcnNlcygpLGU9dGhpcy5tYXRyaXhXb3JsZCksdGhpcy5iaW5kTWF0cml4LmNvcHkoZSksdGhpcy5iaW5kTWF0cml4SW52ZXJzZS5jb3B5KGUpLmludmVydCgpfSxwb3NlOmZ1bmN0aW9uKCl7dGhpcy5za2VsZXRvbi5wb3NlKCl9LG5vcm1hbGl6ZVNraW5XZWlnaHRzOmZ1bmN0aW9uKCl7Y29uc3QgdD1uZXcgcW4sZT10aGlzLmdlb21ldHJ5LmF0dHJpYnV0ZXMuc2tpbldlaWdodDtmb3IobGV0IG49MCxyPWUuY291bnQ7bjxyO24rKyl7dC54PWUuZ2V0WChuKSx0Lnk9ZS5nZXRZKG4pLHQuej1lLmdldFoobiksdC53PWUuZ2V0VyhuKTtjb25zdCByPTEvdC5tYW5oYXR0YW5MZW5ndGgoKTtyIT09MS8wP3QubXVsdGlwbHlTY2FsYXIocik6dC5zZXQoMSwwLDAsMCksZS5zZXRYWVpXKG4sdC54LHQueSx0LnosdC53KX19LHVwZGF0ZU1hdHJpeFdvcmxkOmZ1bmN0aW9uKHQpe2hvLnByb3RvdHlwZS51cGRhdGVNYXRyaXhXb3JsZC5jYWxsKHRoaXMsdCksXCJhdHRhY2hlZFwiPT09dGhpcy5iaW5kTW9kZT90aGlzLmJpbmRNYXRyaXhJbnZlcnNlLmNvcHkodGhpcy5tYXRyaXhXb3JsZCkuaW52ZXJ0KCk6XCJkZXRhY2hlZFwiPT09dGhpcy5iaW5kTW9kZT90aGlzLmJpbmRNYXRyaXhJbnZlcnNlLmNvcHkodGhpcy5iaW5kTWF0cml4KS5pbnZlcnQoKTpjb25zb2xlLndhcm4oXCJUSFJFRS5Ta2lubmVkTWVzaDogVW5yZWNvZ25pemVkIGJpbmRNb2RlOiBcIit0aGlzLmJpbmRNb2RlKX0sYm9uZVRyYW5zZm9ybTpmdW5jdGlvbigpe2NvbnN0IHQ9bmV3IEtuLGU9bmV3IHFuLG49bmV3IHFuLHI9bmV3IEtuLGk9bmV3IFRyO3JldHVybiBmdW5jdGlvbihvLGEpe2NvbnN0IHM9dGhpcy5za2VsZXRvbixjPXRoaXMuZ2VvbWV0cnk7ZS5mcm9tQnVmZmVyQXR0cmlidXRlKGMuYXR0cmlidXRlcy5za2luSW5kZXgsbyksbi5mcm9tQnVmZmVyQXR0cmlidXRlKGMuYXR0cmlidXRlcy5za2luV2VpZ2h0LG8pLHQuZnJvbUJ1ZmZlckF0dHJpYnV0ZShjLmF0dHJpYnV0ZXMucG9zaXRpb24sbykuYXBwbHlNYXRyaXg0KHRoaXMuYmluZE1hdHJpeCksYS5zZXQoMCwwLDApO2ZvcihsZXQgbz0wO288NDtvKyspe2NvbnN0IGM9bi5nZXRDb21wb25lbnQobyk7aWYoMCE9PWMpe2NvbnN0IG49ZS5nZXRDb21wb25lbnQobyk7aS5tdWx0aXBseU1hdHJpY2VzKHMuYm9uZXNbbl0ubWF0cml4V29ybGQscy5ib25lSW52ZXJzZXNbbl0pLGEuYWRkU2NhbGVkVmVjdG9yKHIuY29weSh0KS5hcHBseU1hdHJpeDQoaSksYyl9fXJldHVybiBhLmFwcGx5TWF0cml4NCh0aGlzLmJpbmRNYXRyaXhJbnZlcnNlKX19KCl9KSxsYy5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKEpyLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOmxjLGlzQm9uZTohMH0pO2NvbnN0IHVjPW5ldyBUcixoYz1uZXcgVHI7ZnVuY3Rpb24gZGModD1bXSxlPVtdKXt0aGlzLnV1aWQ9em4uZ2VuZXJhdGVVVUlEKCksdGhpcy5ib25lcz10LnNsaWNlKDApLHRoaXMuYm9uZUludmVyc2VzPWUsdGhpcy5ib25lTWF0cmljZXM9bnVsbCx0aGlzLmJvbmVUZXh0dXJlPW51bGwsdGhpcy5ib25lVGV4dHVyZVNpemU9MCx0aGlzLmZyYW1lPS0xLHRoaXMuaW5pdCgpfU9iamVjdC5hc3NpZ24oZGMucHJvdG90eXBlLHtpbml0OmZ1bmN0aW9uKCl7Y29uc3QgdD10aGlzLmJvbmVzLGU9dGhpcy5ib25lSW52ZXJzZXM7aWYodGhpcy5ib25lTWF0cmljZXM9bmV3IEZsb2F0MzJBcnJheSgxNip0Lmxlbmd0aCksMD09PWUubGVuZ3RoKXRoaXMuY2FsY3VsYXRlSW52ZXJzZXMoKTtlbHNlIGlmKHQubGVuZ3RoIT09ZS5sZW5ndGgpe2NvbnNvbGUud2FybihcIlRIUkVFLlNrZWxldG9uOiBOdW1iZXIgb2YgaW52ZXJzZSBib25lIG1hdHJpY2VzIGRvZXMgbm90IG1hdGNoIGFtb3VudCBvZiBib25lcy5cIiksdGhpcy5ib25lSW52ZXJzZXM9W107Zm9yKGxldCB0PTAsZT10aGlzLmJvbmVzLmxlbmd0aDt0PGU7dCsrKXRoaXMuYm9uZUludmVyc2VzLnB1c2gobmV3IFRyKX19LGNhbGN1bGF0ZUludmVyc2VzOmZ1bmN0aW9uKCl7dGhpcy5ib25lSW52ZXJzZXMubGVuZ3RoPTA7Zm9yKGxldCB0PTAsZT10aGlzLmJvbmVzLmxlbmd0aDt0PGU7dCsrKXtjb25zdCBlPW5ldyBUcjt0aGlzLmJvbmVzW3RdJiZlLmNvcHkodGhpcy5ib25lc1t0XS5tYXRyaXhXb3JsZCkuaW52ZXJ0KCksdGhpcy5ib25lSW52ZXJzZXMucHVzaChlKX19LHBvc2U6ZnVuY3Rpb24oKXtmb3IobGV0IHQ9MCxlPXRoaXMuYm9uZXMubGVuZ3RoO3Q8ZTt0Kyspe2NvbnN0IGU9dGhpcy5ib25lc1t0XTtlJiZlLm1hdHJpeFdvcmxkLmNvcHkodGhpcy5ib25lSW52ZXJzZXNbdF0pLmludmVydCgpfWZvcihsZXQgdD0wLGU9dGhpcy5ib25lcy5sZW5ndGg7dDxlO3QrKyl7Y29uc3QgZT10aGlzLmJvbmVzW3RdO2UmJihlLnBhcmVudCYmZS5wYXJlbnQuaXNCb25lPyhlLm1hdHJpeC5jb3B5KGUucGFyZW50Lm1hdHJpeFdvcmxkKS5pbnZlcnQoKSxlLm1hdHJpeC5tdWx0aXBseShlLm1hdHJpeFdvcmxkKSk6ZS5tYXRyaXguY29weShlLm1hdHJpeFdvcmxkKSxlLm1hdHJpeC5kZWNvbXBvc2UoZS5wb3NpdGlvbixlLnF1YXRlcm5pb24sZS5zY2FsZSkpfX0sdXBkYXRlOmZ1bmN0aW9uKCl7Y29uc3QgdD10aGlzLmJvbmVzLGU9dGhpcy5ib25lSW52ZXJzZXMsbj10aGlzLmJvbmVNYXRyaWNlcyxyPXRoaXMuYm9uZVRleHR1cmU7Zm9yKGxldCByPTAsaT10Lmxlbmd0aDtyPGk7cisrKXtjb25zdCBpPXRbcl0/dFtyXS5tYXRyaXhXb3JsZDpoYzt1Yy5tdWx0aXBseU1hdHJpY2VzKGksZVtyXSksdWMudG9BcnJheShuLDE2KnIpfW51bGwhPT1yJiYoci5uZWVkc1VwZGF0ZT0hMCl9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBkYyh0aGlzLmJvbmVzLHRoaXMuYm9uZUludmVyc2VzKX0sZ2V0Qm9uZUJ5TmFtZTpmdW5jdGlvbih0KXtmb3IobGV0IGU9MCxuPXRoaXMuYm9uZXMubGVuZ3RoO2U8bjtlKyspe2NvbnN0IG49dGhpcy5ib25lc1tlXTtpZihuLm5hbWU9PT10KXJldHVybiBufX0sZGlzcG9zZTpmdW5jdGlvbigpe251bGwhPT10aGlzLmJvbmVUZXh0dXJlJiYodGhpcy5ib25lVGV4dHVyZS5kaXNwb3NlKCksdGhpcy5ib25lVGV4dHVyZT1udWxsKX0sZnJvbUpTT046ZnVuY3Rpb24odCxlKXt0aGlzLnV1aWQ9dC51dWlkO2ZvcihsZXQgbj0wLHI9dC5ib25lcy5sZW5ndGg7bjxyO24rKyl7Y29uc3Qgcj10LmJvbmVzW25dO2xldCBpPWVbcl07dm9pZCAwPT09aSYmKGNvbnNvbGUud2FybihcIlRIUkVFLlNrZWxldG9uOiBObyBib25lIGZvdW5kIHdpdGggVVVJRDpcIixyKSxpPW5ldyBsYyksdGhpcy5ib25lcy5wdXNoKGkpLHRoaXMuYm9uZUludmVyc2VzLnB1c2goKG5ldyBUcikuZnJvbUFycmF5KHQuYm9uZUludmVyc2VzW25dKSl9cmV0dXJuIHRoaXMuaW5pdCgpLHRoaXN9LHRvSlNPTjpmdW5jdGlvbigpe2NvbnN0IHQ9e21ldGFkYXRhOnt2ZXJzaW9uOjQuNSx0eXBlOlwiU2tlbGV0b25cIixnZW5lcmF0b3I6XCJTa2VsZXRvbi50b0pTT05cIn0sYm9uZXM6W10sYm9uZUludmVyc2VzOltdfTt0LnV1aWQ9dGhpcy51dWlkO2NvbnN0IGU9dGhpcy5ib25lcyxuPXRoaXMuYm9uZUludmVyc2VzO2ZvcihsZXQgcj0wLGk9ZS5sZW5ndGg7cjxpO3IrKyl7Y29uc3QgaT1lW3JdO3QuYm9uZXMucHVzaChpLnV1aWQpO2NvbnN0IG89bltyXTt0LmJvbmVJbnZlcnNlcy5wdXNoKG8udG9BcnJheSgpKX1yZXR1cm4gdH19KTtjb25zdCBwYz1uZXcgVHIsZmM9bmV3IFRyLG1jPVtdLGdjPW5ldyBobztmdW5jdGlvbiB2Yyh0LGUsbil7aG8uY2FsbCh0aGlzLHQsZSksdGhpcy5pbnN0YW5jZU1hdHJpeD1uZXcgVGkobmV3IEZsb2F0MzJBcnJheSgxNipuKSwxNiksdGhpcy5pbnN0YW5jZUNvbG9yPW51bGwsdGhpcy5jb3VudD1uLHRoaXMuZnJ1c3R1bUN1bGxlZD0hMX1mdW5jdGlvbiB5Yyh0KXt3aS5jYWxsKHRoaXMpLHRoaXMudHlwZT1cIkxpbmVCYXNpY01hdGVyaWFsXCIsdGhpcy5jb2xvcj1uZXcgeWkoMTY3NzcyMTUpLHRoaXMubGluZXdpZHRoPTEsdGhpcy5saW5lY2FwPVwicm91bmRcIix0aGlzLmxpbmVqb2luPVwicm91bmRcIix0aGlzLm1vcnBoVGFyZ2V0cz0hMSx0aGlzLnNldFZhbHVlcyh0KX12Yy5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKGhvLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOnZjLGlzSW5zdGFuY2VkTWVzaDohMCxjb3B5OmZ1bmN0aW9uKHQpe3JldHVybiBoby5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsdCksdGhpcy5pbnN0YW5jZU1hdHJpeC5jb3B5KHQuaW5zdGFuY2VNYXRyaXgpLHRoaXMuY291bnQ9dC5jb3VudCx0aGlzfSxnZXRDb2xvckF0OmZ1bmN0aW9uKHQsZSl7ZS5mcm9tQXJyYXkodGhpcy5pbnN0YW5jZUNvbG9yLmFycmF5LDMqdCl9LGdldE1hdHJpeEF0OmZ1bmN0aW9uKHQsZSl7ZS5mcm9tQXJyYXkodGhpcy5pbnN0YW5jZU1hdHJpeC5hcnJheSwxNip0KX0scmF5Y2FzdDpmdW5jdGlvbih0LGUpe2NvbnN0IG49dGhpcy5tYXRyaXhXb3JsZCxyPXRoaXMuY291bnQ7aWYoZ2MuZ2VvbWV0cnk9dGhpcy5nZW9tZXRyeSxnYy5tYXRlcmlhbD10aGlzLm1hdGVyaWFsLHZvaWQgMCE9PWdjLm1hdGVyaWFsKWZvcihsZXQgaT0wO2k8cjtpKyspe3RoaXMuZ2V0TWF0cml4QXQoaSxwYyksZmMubXVsdGlwbHlNYXRyaWNlcyhuLHBjKSxnYy5tYXRyaXhXb3JsZD1mYyxnYy5yYXljYXN0KHQsbWMpO2ZvcihsZXQgdD0wLG49bWMubGVuZ3RoO3Q8bjt0Kyspe2NvbnN0IG49bWNbdF07bi5pbnN0YW5jZUlkPWksbi5vYmplY3Q9dGhpcyxlLnB1c2gobil9bWMubGVuZ3RoPTB9fSxzZXRDb2xvckF0OmZ1bmN0aW9uKHQsZSl7bnVsbD09PXRoaXMuaW5zdGFuY2VDb2xvciYmKHRoaXMuaW5zdGFuY2VDb2xvcj1uZXcgVGkobmV3IEZsb2F0MzJBcnJheSgzKnRoaXMuY291bnQpLDMpKSxlLnRvQXJyYXkodGhpcy5pbnN0YW5jZUNvbG9yLmFycmF5LDMqdCl9LHNldE1hdHJpeEF0OmZ1bmN0aW9uKHQsZSl7ZS50b0FycmF5KHRoaXMuaW5zdGFuY2VNYXRyaXguYXJyYXksMTYqdCl9LHVwZGF0ZU1vcnBoVGFyZ2V0czpmdW5jdGlvbigpe319KSx5Yy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh3aS5wcm90b3R5cGUpLHljLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj15Yyx5Yy5wcm90b3R5cGUuaXNMaW5lQmFzaWNNYXRlcmlhbD0hMCx5Yy5wcm90b3R5cGUuY29weT1mdW5jdGlvbih0KXtyZXR1cm4gd2kucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLHQpLHRoaXMuY29sb3IuY29weSh0LmNvbG9yKSx0aGlzLmxpbmV3aWR0aD10LmxpbmV3aWR0aCx0aGlzLmxpbmVjYXA9dC5saW5lY2FwLHRoaXMubGluZWpvaW49dC5saW5lam9pbix0aGlzLm1vcnBoVGFyZ2V0cz10Lm1vcnBoVGFyZ2V0cyx0aGlzfTtjb25zdCB4Yz1uZXcgS24sYmM9bmV3IEtuLHdjPW5ldyBUcixfYz1uZXcgU3IsTWM9bmV3IGdyO2Z1bmN0aW9uIFNjKHQsZSxuKXsxPT09biYmY29uc29sZS5lcnJvcihcIlRIUkVFLkxpbmU6IHBhcmFtZXRlciBUSFJFRS5MaW5lUGllY2VzIG5vIGxvbmdlciBzdXBwb3J0ZWQuIFVzZSBUSFJFRS5MaW5lU2VnbWVudHMgaW5zdGVhZC5cIiksSnIuY2FsbCh0aGlzKSx0aGlzLnR5cGU9XCJMaW5lXCIsdGhpcy5nZW9tZXRyeT12b2lkIDAhPT10P3Q6bmV3IHFpLHRoaXMubWF0ZXJpYWw9dm9pZCAwIT09ZT9lOm5ldyB5Yyx0aGlzLnVwZGF0ZU1vcnBoVGFyZ2V0cygpfVNjLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoSnIucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6U2MsaXNMaW5lOiEwLGNvcHk6ZnVuY3Rpb24odCl7cmV0dXJuIEpyLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyx0KSx0aGlzLm1hdGVyaWFsPXQubWF0ZXJpYWwsdGhpcy5nZW9tZXRyeT10Lmdlb21ldHJ5LHRoaXN9LGNvbXB1dGVMaW5lRGlzdGFuY2VzOmZ1bmN0aW9uKCl7Y29uc3QgdD10aGlzLmdlb21ldHJ5O2lmKHQuaXNCdWZmZXJHZW9tZXRyeSlpZihudWxsPT09dC5pbmRleCl7Y29uc3QgZT10LmF0dHJpYnV0ZXMucG9zaXRpb24sbj1bMF07Zm9yKGxldCB0PTEscj1lLmNvdW50O3Q8cjt0KyspeGMuZnJvbUJ1ZmZlckF0dHJpYnV0ZShlLHQtMSksYmMuZnJvbUJ1ZmZlckF0dHJpYnV0ZShlLHQpLG5bdF09blt0LTFdLG5bdF0rPXhjLmRpc3RhbmNlVG8oYmMpO3Quc2V0QXR0cmlidXRlKFwibGluZURpc3RhbmNlXCIsbmV3IE5pKG4sMSkpfWVsc2UgY29uc29sZS53YXJuKFwiVEhSRUUuTGluZS5jb21wdXRlTGluZURpc3RhbmNlcygpOiBDb21wdXRhdGlvbiBvbmx5IHBvc3NpYmxlIHdpdGggbm9uLWluZGV4ZWQgQnVmZmVyR2VvbWV0cnkuXCIpO2Vsc2UgaWYodC5pc0dlb21ldHJ5KXtjb25zdCBlPXQudmVydGljZXMsbj10LmxpbmVEaXN0YW5jZXM7blswXT0wO2ZvcihsZXQgdD0xLHI9ZS5sZW5ndGg7dDxyO3QrKyluW3RdPW5bdC0xXSxuW3RdKz1lW3QtMV0uZGlzdGFuY2VUbyhlW3RdKX1yZXR1cm4gdGhpc30scmF5Y2FzdDpmdW5jdGlvbih0LGUpe2NvbnN0IG49dGhpcy5nZW9tZXRyeSxyPXRoaXMubWF0cml4V29ybGQsaT10LnBhcmFtcy5MaW5lLnRocmVzaG9sZDtpZihudWxsPT09bi5ib3VuZGluZ1NwaGVyZSYmbi5jb21wdXRlQm91bmRpbmdTcGhlcmUoKSxNYy5jb3B5KG4uYm91bmRpbmdTcGhlcmUpLE1jLmFwcGx5TWF0cml4NChyKSxNYy5yYWRpdXMrPWksITE9PT10LnJheS5pbnRlcnNlY3RzU3BoZXJlKE1jKSlyZXR1cm47d2MuY29weShyKS5pbnZlcnQoKSxfYy5jb3B5KHQucmF5KS5hcHBseU1hdHJpeDQod2MpO2NvbnN0IG89aS8oKHRoaXMuc2NhbGUueCt0aGlzLnNjYWxlLnkrdGhpcy5zY2FsZS56KS8zKSxhPW8qbyxzPW5ldyBLbixjPW5ldyBLbixsPW5ldyBLbix1PW5ldyBLbixoPXRoaXMuaXNMaW5lU2VnbWVudHM/MjoxO2lmKG4uaXNCdWZmZXJHZW9tZXRyeSl7Y29uc3Qgcj1uLmluZGV4LGk9bi5hdHRyaWJ1dGVzLnBvc2l0aW9uO2lmKG51bGwhPT1yKXtjb25zdCBuPXIuYXJyYXk7Zm9yKGxldCByPTAsbz1uLmxlbmd0aC0xO3I8bztyKz1oKXtjb25zdCBvPW5bcl0saD1uW3IrMV07cy5mcm9tQnVmZmVyQXR0cmlidXRlKGksbyksYy5mcm9tQnVmZmVyQXR0cmlidXRlKGksaCk7aWYoX2MuZGlzdGFuY2VTcVRvU2VnbWVudChzLGMsdSxsKT5hKWNvbnRpbnVlO3UuYXBwbHlNYXRyaXg0KHRoaXMubWF0cml4V29ybGQpO2NvbnN0IGQ9dC5yYXkub3JpZ2luLmRpc3RhbmNlVG8odSk7ZDx0Lm5lYXJ8fGQ+dC5mYXJ8fGUucHVzaCh7ZGlzdGFuY2U6ZCxwb2ludDpsLmNsb25lKCkuYXBwbHlNYXRyaXg0KHRoaXMubWF0cml4V29ybGQpLGluZGV4OnIsZmFjZTpudWxsLGZhY2VJbmRleDpudWxsLG9iamVjdDp0aGlzfSl9fWVsc2UgZm9yKGxldCBuPTAscj1pLmNvdW50LTE7bjxyO24rPWgpe3MuZnJvbUJ1ZmZlckF0dHJpYnV0ZShpLG4pLGMuZnJvbUJ1ZmZlckF0dHJpYnV0ZShpLG4rMSk7aWYoX2MuZGlzdGFuY2VTcVRvU2VnbWVudChzLGMsdSxsKT5hKWNvbnRpbnVlO3UuYXBwbHlNYXRyaXg0KHRoaXMubWF0cml4V29ybGQpO2NvbnN0IHI9dC5yYXkub3JpZ2luLmRpc3RhbmNlVG8odSk7cjx0Lm5lYXJ8fHI+dC5mYXJ8fGUucHVzaCh7ZGlzdGFuY2U6cixwb2ludDpsLmNsb25lKCkuYXBwbHlNYXRyaXg0KHRoaXMubWF0cml4V29ybGQpLGluZGV4Om4sZmFjZTpudWxsLGZhY2VJbmRleDpudWxsLG9iamVjdDp0aGlzfSl9fWVsc2UgaWYobi5pc0dlb21ldHJ5KXtjb25zdCByPW4udmVydGljZXMsaT1yLmxlbmd0aDtmb3IobGV0IG49MDtuPGktMTtuKz1oKXtpZihfYy5kaXN0YW5jZVNxVG9TZWdtZW50KHJbbl0scltuKzFdLHUsbCk+YSljb250aW51ZTt1LmFwcGx5TWF0cml4NCh0aGlzLm1hdHJpeFdvcmxkKTtjb25zdCBpPXQucmF5Lm9yaWdpbi5kaXN0YW5jZVRvKHUpO2k8dC5uZWFyfHxpPnQuZmFyfHxlLnB1c2goe2Rpc3RhbmNlOmkscG9pbnQ6bC5jbG9uZSgpLmFwcGx5TWF0cml4NCh0aGlzLm1hdHJpeFdvcmxkKSxpbmRleDpuLGZhY2U6bnVsbCxmYWNlSW5kZXg6bnVsbCxvYmplY3Q6dGhpc30pfX19LHVwZGF0ZU1vcnBoVGFyZ2V0czpmdW5jdGlvbigpe2NvbnN0IHQ9dGhpcy5nZW9tZXRyeTtpZih0LmlzQnVmZmVyR2VvbWV0cnkpe2NvbnN0IGU9dC5tb3JwaEF0dHJpYnV0ZXMsbj1PYmplY3Qua2V5cyhlKTtpZihuLmxlbmd0aD4wKXtjb25zdCB0PWVbblswXV07aWYodm9pZCAwIT09dCl7dGhpcy5tb3JwaFRhcmdldEluZmx1ZW5jZXM9W10sdGhpcy5tb3JwaFRhcmdldERpY3Rpb25hcnk9e307Zm9yKGxldCBlPTAsbj10Lmxlbmd0aDtlPG47ZSsrKXtjb25zdCBuPXRbZV0ubmFtZXx8U3RyaW5nKGUpO3RoaXMubW9ycGhUYXJnZXRJbmZsdWVuY2VzLnB1c2goMCksdGhpcy5tb3JwaFRhcmdldERpY3Rpb25hcnlbbl09ZX19fX1lbHNle2NvbnN0IGU9dC5tb3JwaFRhcmdldHM7dm9pZCAwIT09ZSYmZS5sZW5ndGg+MCYmY29uc29sZS5lcnJvcihcIlRIUkVFLkxpbmUudXBkYXRlTW9ycGhUYXJnZXRzKCkgZG9lcyBub3Qgc3VwcG9ydCBUSFJFRS5HZW9tZXRyeS4gVXNlIFRIUkVFLkJ1ZmZlckdlb21ldHJ5IGluc3RlYWQuXCIpfX19KTtjb25zdCBUYz1uZXcgS24sRWM9bmV3IEtuO2Z1bmN0aW9uIEFjKHQsZSl7U2MuY2FsbCh0aGlzLHQsZSksdGhpcy50eXBlPVwiTGluZVNlZ21lbnRzXCJ9ZnVuY3Rpb24gTGModCxlKXtTYy5jYWxsKHRoaXMsdCxlKSx0aGlzLnR5cGU9XCJMaW5lTG9vcFwifWZ1bmN0aW9uIFJjKHQpe3dpLmNhbGwodGhpcyksdGhpcy50eXBlPVwiUG9pbnRzTWF0ZXJpYWxcIix0aGlzLmNvbG9yPW5ldyB5aSgxNjc3NzIxNSksdGhpcy5tYXA9bnVsbCx0aGlzLmFscGhhTWFwPW51bGwsdGhpcy5zaXplPTEsdGhpcy5zaXplQXR0ZW51YXRpb249ITAsdGhpcy5tb3JwaFRhcmdldHM9ITEsdGhpcy5zZXRWYWx1ZXModCl9QWMucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShTYy5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpBYyxpc0xpbmVTZWdtZW50czohMCxjb21wdXRlTGluZURpc3RhbmNlczpmdW5jdGlvbigpe2NvbnN0IHQ9dGhpcy5nZW9tZXRyeTtpZih0LmlzQnVmZmVyR2VvbWV0cnkpaWYobnVsbD09PXQuaW5kZXgpe2NvbnN0IGU9dC5hdHRyaWJ1dGVzLnBvc2l0aW9uLG49W107Zm9yKGxldCB0PTAscj1lLmNvdW50O3Q8cjt0Kz0yKVRjLmZyb21CdWZmZXJBdHRyaWJ1dGUoZSx0KSxFYy5mcm9tQnVmZmVyQXR0cmlidXRlKGUsdCsxKSxuW3RdPTA9PT10PzA6blt0LTFdLG5bdCsxXT1uW3RdK1RjLmRpc3RhbmNlVG8oRWMpO3Quc2V0QXR0cmlidXRlKFwibGluZURpc3RhbmNlXCIsbmV3IE5pKG4sMSkpfWVsc2UgY29uc29sZS53YXJuKFwiVEhSRUUuTGluZVNlZ21lbnRzLmNvbXB1dGVMaW5lRGlzdGFuY2VzKCk6IENvbXB1dGF0aW9uIG9ubHkgcG9zc2libGUgd2l0aCBub24taW5kZXhlZCBCdWZmZXJHZW9tZXRyeS5cIik7ZWxzZSBpZih0LmlzR2VvbWV0cnkpe2NvbnN0IGU9dC52ZXJ0aWNlcyxuPXQubGluZURpc3RhbmNlcztmb3IobGV0IHQ9MCxyPWUubGVuZ3RoO3Q8cjt0Kz0yKVRjLmNvcHkoZVt0XSksRWMuY29weShlW3QrMV0pLG5bdF09MD09PXQ/MDpuW3QtMV0sblt0KzFdPW5bdF0rVGMuZGlzdGFuY2VUbyhFYyl9cmV0dXJuIHRoaXN9fSksTGMucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShTYy5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpMYyxpc0xpbmVMb29wOiEwfSksUmMucHJvdG90eXBlPU9iamVjdC5jcmVhdGUod2kucHJvdG90eXBlKSxSYy5wcm90b3R5cGUuY29uc3RydWN0b3I9UmMsUmMucHJvdG90eXBlLmlzUG9pbnRzTWF0ZXJpYWw9ITAsUmMucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24odCl7cmV0dXJuIHdpLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyx0KSx0aGlzLmNvbG9yLmNvcHkodC5jb2xvciksdGhpcy5tYXA9dC5tYXAsdGhpcy5hbHBoYU1hcD10LmFscGhhTWFwLHRoaXMuc2l6ZT10LnNpemUsdGhpcy5zaXplQXR0ZW51YXRpb249dC5zaXplQXR0ZW51YXRpb24sdGhpcy5tb3JwaFRhcmdldHM9dC5tb3JwaFRhcmdldHMsdGhpc307Y29uc3QgUGM9bmV3IFRyLENjPW5ldyBTcixJYz1uZXcgZ3IsT2M9bmV3IEtuO2Z1bmN0aW9uIE5jKHQsZSl7SnIuY2FsbCh0aGlzKSx0aGlzLnR5cGU9XCJQb2ludHNcIix0aGlzLmdlb21ldHJ5PXZvaWQgMCE9PXQ/dDpuZXcgcWksdGhpcy5tYXRlcmlhbD12b2lkIDAhPT1lP2U6bmV3IFJjLHRoaXMudXBkYXRlTW9ycGhUYXJnZXRzKCl9ZnVuY3Rpb24gRGModCxlLG4scixpLG8sYSl7Y29uc3Qgcz1DYy5kaXN0YW5jZVNxVG9Qb2ludCh0KTtpZihzPG4pe2NvbnN0IG49bmV3IEtuO0NjLmNsb3Nlc3RQb2ludFRvUG9pbnQodCxuKSxuLmFwcGx5TWF0cml4NChyKTtjb25zdCBjPWkucmF5Lm9yaWdpbi5kaXN0YW5jZVRvKG4pO2lmKGM8aS5uZWFyfHxjPmkuZmFyKXJldHVybjtvLnB1c2goe2Rpc3RhbmNlOmMsZGlzdGFuY2VUb1JheTpNYXRoLnNxcnQocykscG9pbnQ6bixpbmRleDplLGZhY2U6bnVsbCxvYmplY3Q6YX0pfX1mdW5jdGlvbiBCYyh0LGUsbixyLGksbyxhLHMsYyl7V24uY2FsbCh0aGlzLHQsZSxuLHIsaSxvLGEscyxjKSx0aGlzLmZvcm1hdD12b2lkIDAhPT1hP2E6RnQsdGhpcy5taW5GaWx0ZXI9dm9pZCAwIT09bz9vOnh0LHRoaXMubWFnRmlsdGVyPXZvaWQgMCE9PWk/aTp4dCx0aGlzLmdlbmVyYXRlTWlwbWFwcz0hMTtjb25zdCBsPXRoaXM7XCJyZXF1ZXN0VmlkZW9GcmFtZUNhbGxiYWNrXCJpbiB0JiZ0LnJlcXVlc3RWaWRlb0ZyYW1lQ2FsbGJhY2soKGZ1bmN0aW9uIGUoKXtsLm5lZWRzVXBkYXRlPSEwLHQucmVxdWVzdFZpZGVvRnJhbWVDYWxsYmFjayhlKX0pKX1mdW5jdGlvbiBGYyh0LGUsbixyLGksbyxhLHMsYyxsLHUsaCl7V24uY2FsbCh0aGlzLG51bGwsbyxhLHMsYyxsLHIsaSx1LGgpLHRoaXMuaW1hZ2U9e3dpZHRoOmUsaGVpZ2h0Om59LHRoaXMubWlwbWFwcz10LHRoaXMuZmxpcFk9ITEsdGhpcy5nZW5lcmF0ZU1pcG1hcHM9ITF9ZnVuY3Rpb24gVWModCxlLG4scixpLG8sYSxzLGMpe1duLmNhbGwodGhpcyx0LGUsbixyLGksbyxhLHMsYyksdGhpcy5uZWVkc1VwZGF0ZT0hMH1mdW5jdGlvbiB6Yyh0LGUsbixyLGksbyxhLHMsYyxsKXtpZigobD12b2lkIDAhPT1sP2w6a3QpIT09a3QmJmwhPT1WdCl0aHJvdyBuZXcgRXJyb3IoXCJEZXB0aFRleHR1cmUgZm9ybWF0IG11c3QgYmUgZWl0aGVyIFRIUkVFLkRlcHRoRm9ybWF0IG9yIFRIUkVFLkRlcHRoU3RlbmNpbEZvcm1hdFwiKTt2b2lkIDA9PT1uJiZsPT09a3QmJihuPUF0KSx2b2lkIDA9PT1uJiZsPT09VnQmJihuPUR0KSxXbi5jYWxsKHRoaXMsbnVsbCxyLGksbyxhLHMsbCxuLGMpLHRoaXMuaW1hZ2U9e3dpZHRoOnQsaGVpZ2h0OmV9LHRoaXMubWFnRmlsdGVyPXZvaWQgMCE9PWE/YTpmdCx0aGlzLm1pbkZpbHRlcj12b2lkIDAhPT1zP3M6ZnQsdGhpcy5mbGlwWT0hMSx0aGlzLmdlbmVyYXRlTWlwbWFwcz0hMX1OYy5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKEpyLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOk5jLGlzUG9pbnRzOiEwLGNvcHk6ZnVuY3Rpb24odCl7cmV0dXJuIEpyLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyx0KSx0aGlzLm1hdGVyaWFsPXQubWF0ZXJpYWwsdGhpcy5nZW9tZXRyeT10Lmdlb21ldHJ5LHRoaXN9LHJheWNhc3Q6ZnVuY3Rpb24odCxlKXtjb25zdCBuPXRoaXMuZ2VvbWV0cnkscj10aGlzLm1hdHJpeFdvcmxkLGk9dC5wYXJhbXMuUG9pbnRzLnRocmVzaG9sZDtpZihudWxsPT09bi5ib3VuZGluZ1NwaGVyZSYmbi5jb21wdXRlQm91bmRpbmdTcGhlcmUoKSxJYy5jb3B5KG4uYm91bmRpbmdTcGhlcmUpLEljLmFwcGx5TWF0cml4NChyKSxJYy5yYWRpdXMrPWksITE9PT10LnJheS5pbnRlcnNlY3RzU3BoZXJlKEljKSlyZXR1cm47UGMuY29weShyKS5pbnZlcnQoKSxDYy5jb3B5KHQucmF5KS5hcHBseU1hdHJpeDQoUGMpO2NvbnN0IG89aS8oKHRoaXMuc2NhbGUueCt0aGlzLnNjYWxlLnkrdGhpcy5zY2FsZS56KS8zKSxhPW8qbztpZihuLmlzQnVmZmVyR2VvbWV0cnkpe2NvbnN0IGk9bi5pbmRleCxvPW4uYXR0cmlidXRlcy5wb3NpdGlvbjtpZihudWxsIT09aSl7Y29uc3Qgbj1pLmFycmF5O2ZvcihsZXQgaT0wLHM9bi5sZW5ndGg7aTxzO2krKyl7Y29uc3Qgcz1uW2ldO09jLmZyb21CdWZmZXJBdHRyaWJ1dGUobyxzKSxEYyhPYyxzLGEscix0LGUsdGhpcyl9fWVsc2UgZm9yKGxldCBuPTAsaT1vLmNvdW50O248aTtuKyspT2MuZnJvbUJ1ZmZlckF0dHJpYnV0ZShvLG4pLERjKE9jLG4sYSxyLHQsZSx0aGlzKX1lbHNle2NvbnN0IGk9bi52ZXJ0aWNlcztmb3IobGV0IG49MCxvPWkubGVuZ3RoO248bztuKyspRGMoaVtuXSxuLGEscix0LGUsdGhpcyl9fSx1cGRhdGVNb3JwaFRhcmdldHM6ZnVuY3Rpb24oKXtjb25zdCB0PXRoaXMuZ2VvbWV0cnk7aWYodC5pc0J1ZmZlckdlb21ldHJ5KXtjb25zdCBlPXQubW9ycGhBdHRyaWJ1dGVzLG49T2JqZWN0LmtleXMoZSk7aWYobi5sZW5ndGg+MCl7Y29uc3QgdD1lW25bMF1dO2lmKHZvaWQgMCE9PXQpe3RoaXMubW9ycGhUYXJnZXRJbmZsdWVuY2VzPVtdLHRoaXMubW9ycGhUYXJnZXREaWN0aW9uYXJ5PXt9O2ZvcihsZXQgZT0wLG49dC5sZW5ndGg7ZTxuO2UrKyl7Y29uc3Qgbj10W2VdLm5hbWV8fFN0cmluZyhlKTt0aGlzLm1vcnBoVGFyZ2V0SW5mbHVlbmNlcy5wdXNoKDApLHRoaXMubW9ycGhUYXJnZXREaWN0aW9uYXJ5W25dPWV9fX19ZWxzZXtjb25zdCBlPXQubW9ycGhUYXJnZXRzO3ZvaWQgMCE9PWUmJmUubGVuZ3RoPjAmJmNvbnNvbGUuZXJyb3IoXCJUSFJFRS5Qb2ludHMudXBkYXRlTW9ycGhUYXJnZXRzKCkgZG9lcyBub3Qgc3VwcG9ydCBUSFJFRS5HZW9tZXRyeS4gVXNlIFRIUkVFLkJ1ZmZlckdlb21ldHJ5IGluc3RlYWQuXCIpfX19KSxCYy5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKFduLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOkJjLGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMuaW1hZ2UpLmNvcHkodGhpcyl9LGlzVmlkZW9UZXh0dXJlOiEwLHVwZGF0ZTpmdW5jdGlvbigpe2NvbnN0IHQ9dGhpcy5pbWFnZTshMT09PVwicmVxdWVzdFZpZGVvRnJhbWVDYWxsYmFja1wiaW4gdCYmdC5yZWFkeVN0YXRlPj10LkhBVkVfQ1VSUkVOVF9EQVRBJiYodGhpcy5uZWVkc1VwZGF0ZT0hMCl9fSksRmMucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoV24ucHJvdG90eXBlKSxGYy5wcm90b3R5cGUuY29uc3RydWN0b3I9RmMsRmMucHJvdG90eXBlLmlzQ29tcHJlc3NlZFRleHR1cmU9ITAsVWMucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoV24ucHJvdG90eXBlKSxVYy5wcm90b3R5cGUuY29uc3RydWN0b3I9VWMsVWMucHJvdG90eXBlLmlzQ2FudmFzVGV4dHVyZT0hMCx6Yy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShXbi5wcm90b3R5cGUpLHpjLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj16Yyx6Yy5wcm90b3R5cGUuaXNEZXB0aFRleHR1cmU9ITA7bGV0IEdjPTA7Y29uc3QgSGM9bmV3IFRyLGtjPW5ldyBKcixWYz1uZXcgS247ZnVuY3Rpb24gamMoKXtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImlkXCIse3ZhbHVlOkdjKz0yfSksdGhpcy51dWlkPXpuLmdlbmVyYXRlVVVJRCgpLHRoaXMubmFtZT1cIlwiLHRoaXMudHlwZT1cIkdlb21ldHJ5XCIsdGhpcy52ZXJ0aWNlcz1bXSx0aGlzLmNvbG9ycz1bXSx0aGlzLmZhY2VzPVtdLHRoaXMuZmFjZVZlcnRleFV2cz1bW11dLHRoaXMubW9ycGhUYXJnZXRzPVtdLHRoaXMubW9ycGhOb3JtYWxzPVtdLHRoaXMuc2tpbldlaWdodHM9W10sdGhpcy5za2luSW5kaWNlcz1bXSx0aGlzLmxpbmVEaXN0YW5jZXM9W10sdGhpcy5ib3VuZGluZ0JveD1udWxsLHRoaXMuYm91bmRpbmdTcGhlcmU9bnVsbCx0aGlzLmVsZW1lbnRzTmVlZFVwZGF0ZT0hMSx0aGlzLnZlcnRpY2VzTmVlZFVwZGF0ZT0hMSx0aGlzLnV2c05lZWRVcGRhdGU9ITEsdGhpcy5ub3JtYWxzTmVlZFVwZGF0ZT0hMSx0aGlzLmNvbG9yc05lZWRVcGRhdGU9ITEsdGhpcy5saW5lRGlzdGFuY2VzTmVlZFVwZGF0ZT0hMSx0aGlzLmdyb3Vwc05lZWRVcGRhdGU9ITF9amMucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShCbi5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpqYyxpc0dlb21ldHJ5OiEwLGFwcGx5TWF0cml4NDpmdW5jdGlvbih0KXtjb25zdCBlPShuZXcgSG4pLmdldE5vcm1hbE1hdHJpeCh0KTtmb3IobGV0IGU9MCxuPXRoaXMudmVydGljZXMubGVuZ3RoO2U8bjtlKyspe3RoaXMudmVydGljZXNbZV0uYXBwbHlNYXRyaXg0KHQpfWZvcihsZXQgdD0wLG49dGhpcy5mYWNlcy5sZW5ndGg7dDxuO3QrKyl7Y29uc3Qgbj10aGlzLmZhY2VzW3RdO24ubm9ybWFsLmFwcGx5TWF0cml4MyhlKS5ub3JtYWxpemUoKTtmb3IobGV0IHQ9MCxyPW4udmVydGV4Tm9ybWFscy5sZW5ndGg7dDxyO3QrKyluLnZlcnRleE5vcm1hbHNbdF0uYXBwbHlNYXRyaXgzKGUpLm5vcm1hbGl6ZSgpfXJldHVybiBudWxsIT09dGhpcy5ib3VuZGluZ0JveCYmdGhpcy5jb21wdXRlQm91bmRpbmdCb3goKSxudWxsIT09dGhpcy5ib3VuZGluZ1NwaGVyZSYmdGhpcy5jb21wdXRlQm91bmRpbmdTcGhlcmUoKSx0aGlzLnZlcnRpY2VzTmVlZFVwZGF0ZT0hMCx0aGlzLm5vcm1hbHNOZWVkVXBkYXRlPSEwLHRoaXN9LHJvdGF0ZVg6ZnVuY3Rpb24odCl7cmV0dXJuIEhjLm1ha2VSb3RhdGlvblgodCksdGhpcy5hcHBseU1hdHJpeDQoSGMpLHRoaXN9LHJvdGF0ZVk6ZnVuY3Rpb24odCl7cmV0dXJuIEhjLm1ha2VSb3RhdGlvblkodCksdGhpcy5hcHBseU1hdHJpeDQoSGMpLHRoaXN9LHJvdGF0ZVo6ZnVuY3Rpb24odCl7cmV0dXJuIEhjLm1ha2VSb3RhdGlvbloodCksdGhpcy5hcHBseU1hdHJpeDQoSGMpLHRoaXN9LHRyYW5zbGF0ZTpmdW5jdGlvbih0LGUsbil7cmV0dXJuIEhjLm1ha2VUcmFuc2xhdGlvbih0LGUsbiksdGhpcy5hcHBseU1hdHJpeDQoSGMpLHRoaXN9LHNjYWxlOmZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gSGMubWFrZVNjYWxlKHQsZSxuKSx0aGlzLmFwcGx5TWF0cml4NChIYyksdGhpc30sbG9va0F0OmZ1bmN0aW9uKHQpe3JldHVybiBrYy5sb29rQXQodCksa2MudXBkYXRlTWF0cml4KCksdGhpcy5hcHBseU1hdHJpeDQoa2MubWF0cml4KSx0aGlzfSxmcm9tQnVmZmVyR2VvbWV0cnk6ZnVuY3Rpb24odCl7Y29uc3QgZT10aGlzLG49bnVsbCE9PXQuaW5kZXg/dC5pbmRleDp2b2lkIDAscj10LmF0dHJpYnV0ZXM7aWYodm9pZCAwPT09ci5wb3NpdGlvbilyZXR1cm4gY29uc29sZS5lcnJvcihcIlRIUkVFLkdlb21ldHJ5LmZyb21CdWZmZXJHZW9tZXRyeSgpOiBQb3NpdGlvbiBhdHRyaWJ1dGUgcmVxdWlyZWQgZm9yIGNvbnZlcnNpb24uXCIpLHRoaXM7Y29uc3QgaT1yLnBvc2l0aW9uLG89ci5ub3JtYWwsYT1yLmNvbG9yLHM9ci51dixjPXIudXYyO3ZvaWQgMCE9PWMmJih0aGlzLmZhY2VWZXJ0ZXhVdnNbMV09W10pO2ZvcihsZXQgdD0wO3Q8aS5jb3VudDt0KyspZS52ZXJ0aWNlcy5wdXNoKChuZXcgS24pLmZyb21CdWZmZXJBdHRyaWJ1dGUoaSx0KSksdm9pZCAwIT09YSYmZS5jb2xvcnMucHVzaCgobmV3IHlpKS5mcm9tQnVmZmVyQXR0cmlidXRlKGEsdCkpO2Z1bmN0aW9uIGwodCxuLHIsaSl7Y29uc3QgbD12b2lkIDA9PT1hP1tdOltlLmNvbG9yc1t0XS5jbG9uZSgpLGUuY29sb3JzW25dLmNsb25lKCksZS5jb2xvcnNbcl0uY2xvbmUoKV0sdT12b2lkIDA9PT1vP1tdOlsobmV3IEtuKS5mcm9tQnVmZmVyQXR0cmlidXRlKG8sdCksKG5ldyBLbikuZnJvbUJ1ZmZlckF0dHJpYnV0ZShvLG4pLChuZXcgS24pLmZyb21CdWZmZXJBdHRyaWJ1dGUobyxyKV0saD1uZXcgeGkodCxuLHIsdSxsLGkpO2UuZmFjZXMucHVzaChoKSx2b2lkIDAhPT1zJiZlLmZhY2VWZXJ0ZXhVdnNbMF0ucHVzaChbKG5ldyBHbikuZnJvbUJ1ZmZlckF0dHJpYnV0ZShzLHQpLChuZXcgR24pLmZyb21CdWZmZXJBdHRyaWJ1dGUocyxuKSwobmV3IEduKS5mcm9tQnVmZmVyQXR0cmlidXRlKHMscildKSx2b2lkIDAhPT1jJiZlLmZhY2VWZXJ0ZXhVdnNbMV0ucHVzaChbKG5ldyBHbikuZnJvbUJ1ZmZlckF0dHJpYnV0ZShjLHQpLChuZXcgR24pLmZyb21CdWZmZXJBdHRyaWJ1dGUoYyxuKSwobmV3IEduKS5mcm9tQnVmZmVyQXR0cmlidXRlKGMscildKX1jb25zdCB1PXQuZ3JvdXBzO2lmKHUubGVuZ3RoPjApZm9yKGxldCB0PTA7dDx1Lmxlbmd0aDt0Kyspe2NvbnN0IGU9dVt0XSxyPWUuc3RhcnQ7Zm9yKGxldCB0PXIsaT1yK2UuY291bnQ7dDxpO3QrPTMpdm9pZCAwIT09bj9sKG4uZ2V0WCh0KSxuLmdldFgodCsxKSxuLmdldFgodCsyKSxlLm1hdGVyaWFsSW5kZXgpOmwodCx0KzEsdCsyLGUubWF0ZXJpYWxJbmRleCl9ZWxzZSBpZih2b2lkIDAhPT1uKWZvcihsZXQgdD0wO3Q8bi5jb3VudDt0Kz0zKWwobi5nZXRYKHQpLG4uZ2V0WCh0KzEpLG4uZ2V0WCh0KzIpKTtlbHNlIGZvcihsZXQgdD0wO3Q8aS5jb3VudDt0Kz0zKWwodCx0KzEsdCsyKTtyZXR1cm4gdGhpcy5jb21wdXRlRmFjZU5vcm1hbHMoKSxudWxsIT09dC5ib3VuZGluZ0JveCYmKHRoaXMuYm91bmRpbmdCb3g9dC5ib3VuZGluZ0JveC5jbG9uZSgpKSxudWxsIT09dC5ib3VuZGluZ1NwaGVyZSYmKHRoaXMuYm91bmRpbmdTcGhlcmU9dC5ib3VuZGluZ1NwaGVyZS5jbG9uZSgpKSx0aGlzfSxjZW50ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb21wdXRlQm91bmRpbmdCb3goKSx0aGlzLmJvdW5kaW5nQm94LmdldENlbnRlcihWYykubmVnYXRlKCksdGhpcy50cmFuc2xhdGUoVmMueCxWYy55LFZjLnopLHRoaXN9LG5vcm1hbGl6ZTpmdW5jdGlvbigpe3RoaXMuY29tcHV0ZUJvdW5kaW5nU3BoZXJlKCk7Y29uc3QgdD10aGlzLmJvdW5kaW5nU3BoZXJlLmNlbnRlcixlPXRoaXMuYm91bmRpbmdTcGhlcmUucmFkaXVzLG49MD09PWU/MToxL2Uscj1uZXcgVHI7cmV0dXJuIHIuc2V0KG4sMCwwLC1uKnQueCwwLG4sMCwtbip0LnksMCwwLG4sLW4qdC56LDAsMCwwLDEpLHRoaXMuYXBwbHlNYXRyaXg0KHIpLHRoaXN9LGNvbXB1dGVGYWNlTm9ybWFsczpmdW5jdGlvbigpe2NvbnN0IHQ9bmV3IEtuLGU9bmV3IEtuO2ZvcihsZXQgbj0wLHI9dGhpcy5mYWNlcy5sZW5ndGg7bjxyO24rKyl7Y29uc3Qgcj10aGlzLmZhY2VzW25dLGk9dGhpcy52ZXJ0aWNlc1tyLmFdLG89dGhpcy52ZXJ0aWNlc1tyLmJdLGE9dGhpcy52ZXJ0aWNlc1tyLmNdO3Quc3ViVmVjdG9ycyhhLG8pLGUuc3ViVmVjdG9ycyhpLG8pLHQuY3Jvc3MoZSksdC5ub3JtYWxpemUoKSxyLm5vcm1hbC5jb3B5KHQpfX0sY29tcHV0ZVZlcnRleE5vcm1hbHM6ZnVuY3Rpb24odD0hMCl7Y29uc3QgZT1uZXcgQXJyYXkodGhpcy52ZXJ0aWNlcy5sZW5ndGgpO2ZvcihsZXQgdD0wLG49dGhpcy52ZXJ0aWNlcy5sZW5ndGg7dDxuO3QrKyllW3RdPW5ldyBLbjtpZih0KXtjb25zdCB0PW5ldyBLbixuPW5ldyBLbjtmb3IobGV0IHI9MCxpPXRoaXMuZmFjZXMubGVuZ3RoO3I8aTtyKyspe2NvbnN0IGk9dGhpcy5mYWNlc1tyXSxvPXRoaXMudmVydGljZXNbaS5hXSxhPXRoaXMudmVydGljZXNbaS5iXSxzPXRoaXMudmVydGljZXNbaS5jXTt0LnN1YlZlY3RvcnMocyxhKSxuLnN1YlZlY3RvcnMobyxhKSx0LmNyb3NzKG4pLGVbaS5hXS5hZGQodCksZVtpLmJdLmFkZCh0KSxlW2kuY10uYWRkKHQpfX1lbHNle3RoaXMuY29tcHV0ZUZhY2VOb3JtYWxzKCk7Zm9yKGxldCB0PTAsbj10aGlzLmZhY2VzLmxlbmd0aDt0PG47dCsrKXtjb25zdCBuPXRoaXMuZmFjZXNbdF07ZVtuLmFdLmFkZChuLm5vcm1hbCksZVtuLmJdLmFkZChuLm5vcm1hbCksZVtuLmNdLmFkZChuLm5vcm1hbCl9fWZvcihsZXQgdD0wLG49dGhpcy52ZXJ0aWNlcy5sZW5ndGg7dDxuO3QrKyllW3RdLm5vcm1hbGl6ZSgpO2ZvcihsZXQgdD0wLG49dGhpcy5mYWNlcy5sZW5ndGg7dDxuO3QrKyl7Y29uc3Qgbj10aGlzLmZhY2VzW3RdLHI9bi52ZXJ0ZXhOb3JtYWxzOzM9PT1yLmxlbmd0aD8oclswXS5jb3B5KGVbbi5hXSksclsxXS5jb3B5KGVbbi5iXSksclsyXS5jb3B5KGVbbi5jXSkpOihyWzBdPWVbbi5hXS5jbG9uZSgpLHJbMV09ZVtuLmJdLmNsb25lKCksclsyXT1lW24uY10uY2xvbmUoKSl9dGhpcy5mYWNlcy5sZW5ndGg+MCYmKHRoaXMubm9ybWFsc05lZWRVcGRhdGU9ITApfSxjb21wdXRlRmxhdFZlcnRleE5vcm1hbHM6ZnVuY3Rpb24oKXt0aGlzLmNvbXB1dGVGYWNlTm9ybWFscygpO2ZvcihsZXQgdD0wLGU9dGhpcy5mYWNlcy5sZW5ndGg7dDxlO3QrKyl7Y29uc3QgZT10aGlzLmZhY2VzW3RdLG49ZS52ZXJ0ZXhOb3JtYWxzOzM9PT1uLmxlbmd0aD8oblswXS5jb3B5KGUubm9ybWFsKSxuWzFdLmNvcHkoZS5ub3JtYWwpLG5bMl0uY29weShlLm5vcm1hbCkpOihuWzBdPWUubm9ybWFsLmNsb25lKCksblsxXT1lLm5vcm1hbC5jbG9uZSgpLG5bMl09ZS5ub3JtYWwuY2xvbmUoKSl9dGhpcy5mYWNlcy5sZW5ndGg+MCYmKHRoaXMubm9ybWFsc05lZWRVcGRhdGU9ITApfSxjb21wdXRlTW9ycGhOb3JtYWxzOmZ1bmN0aW9uKCl7Zm9yKGxldCB0PTAsZT10aGlzLmZhY2VzLmxlbmd0aDt0PGU7dCsrKXtjb25zdCBlPXRoaXMuZmFjZXNbdF07ZS5fX29yaWdpbmFsRmFjZU5vcm1hbD9lLl9fb3JpZ2luYWxGYWNlTm9ybWFsLmNvcHkoZS5ub3JtYWwpOmUuX19vcmlnaW5hbEZhY2VOb3JtYWw9ZS5ub3JtYWwuY2xvbmUoKSxlLl9fb3JpZ2luYWxWZXJ0ZXhOb3JtYWxzfHwoZS5fX29yaWdpbmFsVmVydGV4Tm9ybWFscz1bXSk7Zm9yKGxldCB0PTAsbj1lLnZlcnRleE5vcm1hbHMubGVuZ3RoO3Q8bjt0KyspZS5fX29yaWdpbmFsVmVydGV4Tm9ybWFsc1t0XT9lLl9fb3JpZ2luYWxWZXJ0ZXhOb3JtYWxzW3RdLmNvcHkoZS52ZXJ0ZXhOb3JtYWxzW3RdKTplLl9fb3JpZ2luYWxWZXJ0ZXhOb3JtYWxzW3RdPWUudmVydGV4Tm9ybWFsc1t0XS5jbG9uZSgpfWNvbnN0IHQ9bmV3IGpjO3QuZmFjZXM9dGhpcy5mYWNlcztmb3IobGV0IGU9MCxuPXRoaXMubW9ycGhUYXJnZXRzLmxlbmd0aDtlPG47ZSsrKXtpZighdGhpcy5tb3JwaE5vcm1hbHNbZV0pe3RoaXMubW9ycGhOb3JtYWxzW2VdPXt9LHRoaXMubW9ycGhOb3JtYWxzW2VdLmZhY2VOb3JtYWxzPVtdLHRoaXMubW9ycGhOb3JtYWxzW2VdLnZlcnRleE5vcm1hbHM9W107Y29uc3QgdD10aGlzLm1vcnBoTm9ybWFsc1tlXS5mYWNlTm9ybWFscyxuPXRoaXMubW9ycGhOb3JtYWxzW2VdLnZlcnRleE5vcm1hbHM7Zm9yKGxldCBlPTAscj10aGlzLmZhY2VzLmxlbmd0aDtlPHI7ZSsrKXtjb25zdCBlPW5ldyBLbixyPXthOm5ldyBLbixiOm5ldyBLbixjOm5ldyBLbn07dC5wdXNoKGUpLG4ucHVzaChyKX19Y29uc3Qgbj10aGlzLm1vcnBoTm9ybWFsc1tlXTt0LnZlcnRpY2VzPXRoaXMubW9ycGhUYXJnZXRzW2VdLnZlcnRpY2VzLHQuY29tcHV0ZUZhY2VOb3JtYWxzKCksdC5jb21wdXRlVmVydGV4Tm9ybWFscygpO2ZvcihsZXQgdD0wLGU9dGhpcy5mYWNlcy5sZW5ndGg7dDxlO3QrKyl7Y29uc3QgZT10aGlzLmZhY2VzW3RdLHI9bi5mYWNlTm9ybWFsc1t0XSxpPW4udmVydGV4Tm9ybWFsc1t0XTtyLmNvcHkoZS5ub3JtYWwpLGkuYS5jb3B5KGUudmVydGV4Tm9ybWFsc1swXSksaS5iLmNvcHkoZS52ZXJ0ZXhOb3JtYWxzWzFdKSxpLmMuY29weShlLnZlcnRleE5vcm1hbHNbMl0pfX1mb3IobGV0IHQ9MCxlPXRoaXMuZmFjZXMubGVuZ3RoO3Q8ZTt0Kyspe2NvbnN0IGU9dGhpcy5mYWNlc1t0XTtlLm5vcm1hbD1lLl9fb3JpZ2luYWxGYWNlTm9ybWFsLGUudmVydGV4Tm9ybWFscz1lLl9fb3JpZ2luYWxWZXJ0ZXhOb3JtYWxzfX0sY29tcHV0ZUJvdW5kaW5nQm94OmZ1bmN0aW9uKCl7bnVsbD09PXRoaXMuYm91bmRpbmdCb3gmJih0aGlzLmJvdW5kaW5nQm94PW5ldyB0ciksdGhpcy5ib3VuZGluZ0JveC5zZXRGcm9tUG9pbnRzKHRoaXMudmVydGljZXMpfSxjb21wdXRlQm91bmRpbmdTcGhlcmU6ZnVuY3Rpb24oKXtudWxsPT09dGhpcy5ib3VuZGluZ1NwaGVyZSYmKHRoaXMuYm91bmRpbmdTcGhlcmU9bmV3IGdyKSx0aGlzLmJvdW5kaW5nU3BoZXJlLnNldEZyb21Qb2ludHModGhpcy52ZXJ0aWNlcyl9LG1lcmdlOmZ1bmN0aW9uKHQsZSxuPTApe2lmKCF0fHwhdC5pc0dlb21ldHJ5KXJldHVybiB2b2lkIGNvbnNvbGUuZXJyb3IoXCJUSFJFRS5HZW9tZXRyeS5tZXJnZSgpOiBnZW9tZXRyeSBub3QgYW4gaW5zdGFuY2Ugb2YgVEhSRUUuR2VvbWV0cnkuXCIsdCk7bGV0IHI7Y29uc3QgaT10aGlzLnZlcnRpY2VzLmxlbmd0aCxvPXRoaXMudmVydGljZXMsYT10LnZlcnRpY2VzLHM9dGhpcy5mYWNlcyxjPXQuZmFjZXMsbD10aGlzLmNvbG9ycyx1PXQuY29sb3JzO3ZvaWQgMCE9PWUmJihyPShuZXcgSG4pLmdldE5vcm1hbE1hdHJpeChlKSk7Zm9yKGxldCB0PTAsbj1hLmxlbmd0aDt0PG47dCsrKXtjb25zdCBuPWFbdF0uY2xvbmUoKTt2b2lkIDAhPT1lJiZuLmFwcGx5TWF0cml4NChlKSxvLnB1c2gobil9Zm9yKGxldCB0PTAsZT11Lmxlbmd0aDt0PGU7dCsrKWwucHVzaCh1W3RdLmNsb25lKCkpO2ZvcihsZXQgdD0wLGU9Yy5sZW5ndGg7dDxlO3QrKyl7Y29uc3QgZT1jW3RdO2xldCBvLGE7Y29uc3QgbD1lLnZlcnRleE5vcm1hbHMsdT1lLnZlcnRleENvbG9ycyxoPW5ldyB4aShlLmEraSxlLmIraSxlLmMraSk7aC5ub3JtYWwuY29weShlLm5vcm1hbCksdm9pZCAwIT09ciYmaC5ub3JtYWwuYXBwbHlNYXRyaXgzKHIpLm5vcm1hbGl6ZSgpO2ZvcihsZXQgdD0wLGU9bC5sZW5ndGg7dDxlO3QrKylvPWxbdF0uY2xvbmUoKSx2b2lkIDAhPT1yJiZvLmFwcGx5TWF0cml4MyhyKS5ub3JtYWxpemUoKSxoLnZlcnRleE5vcm1hbHMucHVzaChvKTtoLmNvbG9yLmNvcHkoZS5jb2xvcik7Zm9yKGxldCB0PTAsZT11Lmxlbmd0aDt0PGU7dCsrKWE9dVt0XSxoLnZlcnRleENvbG9ycy5wdXNoKGEuY2xvbmUoKSk7aC5tYXRlcmlhbEluZGV4PWUubWF0ZXJpYWxJbmRleCtuLHMucHVzaChoKX1mb3IobGV0IGU9MCxuPXQuZmFjZVZlcnRleFV2cy5sZW5ndGg7ZTxuO2UrKyl7Y29uc3Qgbj10LmZhY2VWZXJ0ZXhVdnNbZV07dm9pZCAwPT09dGhpcy5mYWNlVmVydGV4VXZzW2VdJiYodGhpcy5mYWNlVmVydGV4VXZzW2VdPVtdKTtmb3IobGV0IHQ9MCxyPW4ubGVuZ3RoO3Q8cjt0Kyspe2NvbnN0IHI9blt0XSxpPVtdO2ZvcihsZXQgdD0wLGU9ci5sZW5ndGg7dDxlO3QrKylpLnB1c2goclt0XS5jbG9uZSgpKTt0aGlzLmZhY2VWZXJ0ZXhVdnNbZV0ucHVzaChpKX19fSxtZXJnZU1lc2g6ZnVuY3Rpb24odCl7dCYmdC5pc01lc2g/KHQubWF0cml4QXV0b1VwZGF0ZSYmdC51cGRhdGVNYXRyaXgoKSx0aGlzLm1lcmdlKHQuZ2VvbWV0cnksdC5tYXRyaXgpKTpjb25zb2xlLmVycm9yKFwiVEhSRUUuR2VvbWV0cnkubWVyZ2VNZXNoKCk6IG1lc2ggbm90IGFuIGluc3RhbmNlIG9mIFRIUkVFLk1lc2guXCIsdCl9LG1lcmdlVmVydGljZXM6ZnVuY3Rpb24odD00KXtjb25zdCBlPXt9LG49W10scj1bXSxpPU1hdGgucG93KDEwLHQpO2ZvcihsZXQgdD0wLG89dGhpcy52ZXJ0aWNlcy5sZW5ndGg7dDxvO3QrKyl7Y29uc3Qgbz10aGlzLnZlcnRpY2VzW3RdLGE9TWF0aC5yb3VuZChvLngqaSkrXCJfXCIrTWF0aC5yb3VuZChvLnkqaSkrXCJfXCIrTWF0aC5yb3VuZChvLnoqaSk7dm9pZCAwPT09ZVthXT8oZVthXT10LG4ucHVzaCh0aGlzLnZlcnRpY2VzW3RdKSxyW3RdPW4ubGVuZ3RoLTEpOnJbdF09cltlW2FdXX1jb25zdCBvPVtdO2ZvcihsZXQgdD0wLGU9dGhpcy5mYWNlcy5sZW5ndGg7dDxlO3QrKyl7Y29uc3QgZT10aGlzLmZhY2VzW3RdO2UuYT1yW2UuYV0sZS5iPXJbZS5iXSxlLmM9cltlLmNdO2NvbnN0IG49W2UuYSxlLmIsZS5jXTtmb3IobGV0IGU9MDtlPDM7ZSsrKWlmKG5bZV09PT1uWyhlKzEpJTNdKXtvLnB1c2godCk7YnJlYWt9fWZvcihsZXQgdD1vLmxlbmd0aC0xO3Q+PTA7dC0tKXtjb25zdCBlPW9bdF07dGhpcy5mYWNlcy5zcGxpY2UoZSwxKTtmb3IobGV0IHQ9MCxuPXRoaXMuZmFjZVZlcnRleFV2cy5sZW5ndGg7dDxuO3QrKyl0aGlzLmZhY2VWZXJ0ZXhVdnNbdF0uc3BsaWNlKGUsMSl9Y29uc3QgYT10aGlzLnZlcnRpY2VzLmxlbmd0aC1uLmxlbmd0aDtyZXR1cm4gdGhpcy52ZXJ0aWNlcz1uLGF9LHNldEZyb21Qb2ludHM6ZnVuY3Rpb24odCl7dGhpcy52ZXJ0aWNlcz1bXTtmb3IobGV0IGU9MCxuPXQubGVuZ3RoO2U8bjtlKyspe2NvbnN0IG49dFtlXTt0aGlzLnZlcnRpY2VzLnB1c2gobmV3IEtuKG4ueCxuLnksbi56fHwwKSl9cmV0dXJuIHRoaXN9LHNvcnRGYWNlc0J5TWF0ZXJpYWxJbmRleDpmdW5jdGlvbigpe2NvbnN0IHQ9dGhpcy5mYWNlcyxlPXQubGVuZ3RoO2ZvcihsZXQgbj0wO248ZTtuKyspdFtuXS5faWQ9bjt0LnNvcnQoKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQubWF0ZXJpYWxJbmRleC1lLm1hdGVyaWFsSW5kZXh9KSk7Y29uc3Qgbj10aGlzLmZhY2VWZXJ0ZXhVdnNbMF0scj10aGlzLmZhY2VWZXJ0ZXhVdnNbMV07bGV0IGksbztuJiZuLmxlbmd0aD09PWUmJihpPVtdKSxyJiZyLmxlbmd0aD09PWUmJihvPVtdKTtmb3IobGV0IGE9MDthPGU7YSsrKXtjb25zdCBlPXRbYV0uX2lkO2kmJmkucHVzaChuW2VdKSxvJiZvLnB1c2gocltlXSl9aSYmKHRoaXMuZmFjZVZlcnRleFV2c1swXT1pKSxvJiYodGhpcy5mYWNlVmVydGV4VXZzWzFdPW8pfSx0b0pTT046ZnVuY3Rpb24oKXtjb25zdCB0PXttZXRhZGF0YTp7dmVyc2lvbjo0LjUsdHlwZTpcIkdlb21ldHJ5XCIsZ2VuZXJhdG9yOlwiR2VvbWV0cnkudG9KU09OXCJ9fTtpZih0LnV1aWQ9dGhpcy51dWlkLHQudHlwZT10aGlzLnR5cGUsXCJcIiE9PXRoaXMubmFtZSYmKHQubmFtZT10aGlzLm5hbWUpLHZvaWQgMCE9PXRoaXMucGFyYW1ldGVycyl7Y29uc3QgZT10aGlzLnBhcmFtZXRlcnM7Zm9yKGNvbnN0IG4gaW4gZSl2b2lkIDAhPT1lW25dJiYodFtuXT1lW25dKTtyZXR1cm4gdH1jb25zdCBlPVtdO2ZvcihsZXQgdD0wO3Q8dGhpcy52ZXJ0aWNlcy5sZW5ndGg7dCsrKXtjb25zdCBuPXRoaXMudmVydGljZXNbdF07ZS5wdXNoKG4ueCxuLnksbi56KX1jb25zdCBuPVtdLHI9W10saT17fSxvPVtdLGE9e30scz1bXSxjPXt9O2ZvcihsZXQgdD0wO3Q8dGhpcy5mYWNlcy5sZW5ndGg7dCsrKXtjb25zdCBlPXRoaXMuZmFjZXNbdF0scj0hMCxpPSExLG89dm9pZCAwIT09dGhpcy5mYWNlVmVydGV4VXZzWzBdW3RdLGE9ZS5ub3JtYWwubGVuZ3RoKCk+MCxzPWUudmVydGV4Tm9ybWFscy5sZW5ndGg+MCxjPTEhPT1lLmNvbG9yLnJ8fDEhPT1lLmNvbG9yLmd8fDEhPT1lLmNvbG9yLmIscD1lLnZlcnRleENvbG9ycy5sZW5ndGg+MDtsZXQgZj0wO2lmKGY9bChmLDAsMCksZj1sKGYsMSxyKSxmPWwoZiwyLGkpLGY9bChmLDMsbyksZj1sKGYsNCxhKSxmPWwoZiw1LHMpLGY9bChmLDYsYyksZj1sKGYsNyxwKSxuLnB1c2goZiksbi5wdXNoKGUuYSxlLmIsZS5jKSxuLnB1c2goZS5tYXRlcmlhbEluZGV4KSxvKXtjb25zdCBlPXRoaXMuZmFjZVZlcnRleFV2c1swXVt0XTtuLnB1c2goZChlWzBdKSxkKGVbMV0pLGQoZVsyXSkpfWlmKGEmJm4ucHVzaCh1KGUubm9ybWFsKSkscyl7Y29uc3QgdD1lLnZlcnRleE5vcm1hbHM7bi5wdXNoKHUodFswXSksdSh0WzFdKSx1KHRbMl0pKX1pZihjJiZuLnB1c2goaChlLmNvbG9yKSkscCl7Y29uc3QgdD1lLnZlcnRleENvbG9ycztuLnB1c2goaCh0WzBdKSxoKHRbMV0pLGgodFsyXSkpfX1mdW5jdGlvbiBsKHQsZSxuKXtyZXR1cm4gbj90fDE8PGU6dCZ+KDE8PGUpfWZ1bmN0aW9uIHUodCl7Y29uc3QgZT10LngudG9TdHJpbmcoKSt0LnkudG9TdHJpbmcoKSt0LnoudG9TdHJpbmcoKTtyZXR1cm4gdm9pZCAwIT09aVtlXXx8KGlbZV09ci5sZW5ndGgvMyxyLnB1c2godC54LHQueSx0LnopKSxpW2VdfWZ1bmN0aW9uIGgodCl7Y29uc3QgZT10LnIudG9TdHJpbmcoKSt0LmcudG9TdHJpbmcoKSt0LmIudG9TdHJpbmcoKTtyZXR1cm4gdm9pZCAwIT09YVtlXXx8KGFbZV09by5sZW5ndGgsby5wdXNoKHQuZ2V0SGV4KCkpKSxhW2VdfWZ1bmN0aW9uIGQodCl7Y29uc3QgZT10LngudG9TdHJpbmcoKSt0LnkudG9TdHJpbmcoKTtyZXR1cm4gdm9pZCAwIT09Y1tlXXx8KGNbZV09cy5sZW5ndGgvMixzLnB1c2godC54LHQueSkpLGNbZV19cmV0dXJuIHQuZGF0YT17fSx0LmRhdGEudmVydGljZXM9ZSx0LmRhdGEubm9ybWFscz1yLG8ubGVuZ3RoPjAmJih0LmRhdGEuY29sb3JzPW8pLHMubGVuZ3RoPjAmJih0LmRhdGEudXZzPVtzXSksdC5kYXRhLmZhY2VzPW4sdH0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IGpjKS5jb3B5KHRoaXMpfSxjb3B5OmZ1bmN0aW9uKHQpe3RoaXMudmVydGljZXM9W10sdGhpcy5jb2xvcnM9W10sdGhpcy5mYWNlcz1bXSx0aGlzLmZhY2VWZXJ0ZXhVdnM9W1tdXSx0aGlzLm1vcnBoVGFyZ2V0cz1bXSx0aGlzLm1vcnBoTm9ybWFscz1bXSx0aGlzLnNraW5XZWlnaHRzPVtdLHRoaXMuc2tpbkluZGljZXM9W10sdGhpcy5saW5lRGlzdGFuY2VzPVtdLHRoaXMuYm91bmRpbmdCb3g9bnVsbCx0aGlzLmJvdW5kaW5nU3BoZXJlPW51bGwsdGhpcy5uYW1lPXQubmFtZTtjb25zdCBlPXQudmVydGljZXM7Zm9yKGxldCB0PTAsbj1lLmxlbmd0aDt0PG47dCsrKXRoaXMudmVydGljZXMucHVzaChlW3RdLmNsb25lKCkpO2NvbnN0IG49dC5jb2xvcnM7Zm9yKGxldCB0PTAsZT1uLmxlbmd0aDt0PGU7dCsrKXRoaXMuY29sb3JzLnB1c2goblt0XS5jbG9uZSgpKTtjb25zdCByPXQuZmFjZXM7Zm9yKGxldCB0PTAsZT1yLmxlbmd0aDt0PGU7dCsrKXRoaXMuZmFjZXMucHVzaChyW3RdLmNsb25lKCkpO2ZvcihsZXQgZT0wLG49dC5mYWNlVmVydGV4VXZzLmxlbmd0aDtlPG47ZSsrKXtjb25zdCBuPXQuZmFjZVZlcnRleFV2c1tlXTt2b2lkIDA9PT10aGlzLmZhY2VWZXJ0ZXhVdnNbZV0mJih0aGlzLmZhY2VWZXJ0ZXhVdnNbZV09W10pO2ZvcihsZXQgdD0wLHI9bi5sZW5ndGg7dDxyO3QrKyl7Y29uc3Qgcj1uW3RdLGk9W107Zm9yKGxldCB0PTAsZT1yLmxlbmd0aDt0PGU7dCsrKXtjb25zdCBlPXJbdF07aS5wdXNoKGUuY2xvbmUoKSl9dGhpcy5mYWNlVmVydGV4VXZzW2VdLnB1c2goaSl9fWNvbnN0IGk9dC5tb3JwaFRhcmdldHM7Zm9yKGxldCB0PTAsZT1pLmxlbmd0aDt0PGU7dCsrKXtjb25zdCBlPXt9O2lmKGUubmFtZT1pW3RdLm5hbWUsdm9pZCAwIT09aVt0XS52ZXJ0aWNlcyl7ZS52ZXJ0aWNlcz1bXTtmb3IobGV0IG49MCxyPWlbdF0udmVydGljZXMubGVuZ3RoO248cjtuKyspZS52ZXJ0aWNlcy5wdXNoKGlbdF0udmVydGljZXNbbl0uY2xvbmUoKSl9aWYodm9pZCAwIT09aVt0XS5ub3JtYWxzKXtlLm5vcm1hbHM9W107Zm9yKGxldCBuPTAscj1pW3RdLm5vcm1hbHMubGVuZ3RoO248cjtuKyspZS5ub3JtYWxzLnB1c2goaVt0XS5ub3JtYWxzW25dLmNsb25lKCkpfXRoaXMubW9ycGhUYXJnZXRzLnB1c2goZSl9Y29uc3Qgbz10Lm1vcnBoTm9ybWFscztmb3IobGV0IHQ9MCxlPW8ubGVuZ3RoO3Q8ZTt0Kyspe2NvbnN0IGU9e307aWYodm9pZCAwIT09b1t0XS52ZXJ0ZXhOb3JtYWxzKXtlLnZlcnRleE5vcm1hbHM9W107Zm9yKGxldCBuPTAscj1vW3RdLnZlcnRleE5vcm1hbHMubGVuZ3RoO248cjtuKyspe2NvbnN0IHI9b1t0XS52ZXJ0ZXhOb3JtYWxzW25dLGk9e307aS5hPXIuYS5jbG9uZSgpLGkuYj1yLmIuY2xvbmUoKSxpLmM9ci5jLmNsb25lKCksZS52ZXJ0ZXhOb3JtYWxzLnB1c2goaSl9fWlmKHZvaWQgMCE9PW9bdF0uZmFjZU5vcm1hbHMpe2UuZmFjZU5vcm1hbHM9W107Zm9yKGxldCBuPTAscj1vW3RdLmZhY2VOb3JtYWxzLmxlbmd0aDtuPHI7bisrKWUuZmFjZU5vcm1hbHMucHVzaChvW3RdLmZhY2VOb3JtYWxzW25dLmNsb25lKCkpfXRoaXMubW9ycGhOb3JtYWxzLnB1c2goZSl9Y29uc3QgYT10LnNraW5XZWlnaHRzO2ZvcihsZXQgdD0wLGU9YS5sZW5ndGg7dDxlO3QrKyl0aGlzLnNraW5XZWlnaHRzLnB1c2goYVt0XS5jbG9uZSgpKTtjb25zdCBzPXQuc2tpbkluZGljZXM7Zm9yKGxldCB0PTAsZT1zLmxlbmd0aDt0PGU7dCsrKXRoaXMuc2tpbkluZGljZXMucHVzaChzW3RdLmNsb25lKCkpO2NvbnN0IGM9dC5saW5lRGlzdGFuY2VzO2ZvcihsZXQgdD0wLGU9Yy5sZW5ndGg7dDxlO3QrKyl0aGlzLmxpbmVEaXN0YW5jZXMucHVzaChjW3RdKTtjb25zdCBsPXQuYm91bmRpbmdCb3g7bnVsbCE9PWwmJih0aGlzLmJvdW5kaW5nQm94PWwuY2xvbmUoKSk7Y29uc3QgdT10LmJvdW5kaW5nU3BoZXJlO3JldHVybiBudWxsIT09dSYmKHRoaXMuYm91bmRpbmdTcGhlcmU9dS5jbG9uZSgpKSx0aGlzLmVsZW1lbnRzTmVlZFVwZGF0ZT10LmVsZW1lbnRzTmVlZFVwZGF0ZSx0aGlzLnZlcnRpY2VzTmVlZFVwZGF0ZT10LnZlcnRpY2VzTmVlZFVwZGF0ZSx0aGlzLnV2c05lZWRVcGRhdGU9dC51dnNOZWVkVXBkYXRlLHRoaXMubm9ybWFsc05lZWRVcGRhdGU9dC5ub3JtYWxzTmVlZFVwZGF0ZSx0aGlzLmNvbG9yc05lZWRVcGRhdGU9dC5jb2xvcnNOZWVkVXBkYXRlLHRoaXMubGluZURpc3RhbmNlc05lZWRVcGRhdGU9dC5saW5lRGlzdGFuY2VzTmVlZFVwZGF0ZSx0aGlzLmdyb3Vwc05lZWRVcGRhdGU9dC5ncm91cHNOZWVkVXBkYXRlLHRoaXN9LGRpc3Bvc2U6ZnVuY3Rpb24oKXt0aGlzLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJkaXNwb3NlXCJ9KX19KTtjbGFzcyBXYyBleHRlbmRzIGpje2NvbnN0cnVjdG9yKHQsZSxuLHIsaSxvKXtzdXBlcigpLHRoaXMudHlwZT1cIkJveEdlb21ldHJ5XCIsdGhpcy5wYXJhbWV0ZXJzPXt3aWR0aDp0LGhlaWdodDplLGRlcHRoOm4sd2lkdGhTZWdtZW50czpyLGhlaWdodFNlZ21lbnRzOmksZGVwdGhTZWdtZW50czpvfSx0aGlzLmZyb21CdWZmZXJHZW9tZXRyeShuZXcgbW8odCxlLG4scixpLG8pKSx0aGlzLm1lcmdlVmVydGljZXMoKX19Y2xhc3MgWGMgZXh0ZW5kcyBxaXtjb25zdHJ1Y3Rvcih0PTEsZT04LG49MCxyPTIqTWF0aC5QSSl7c3VwZXIoKSx0aGlzLnR5cGU9XCJDaXJjbGVCdWZmZXJHZW9tZXRyeVwiLHRoaXMucGFyYW1ldGVycz17cmFkaXVzOnQsc2VnbWVudHM6ZSx0aGV0YVN0YXJ0Om4sdGhldGFMZW5ndGg6cn0sZT1NYXRoLm1heCgzLGUpO2NvbnN0IGk9W10sbz1bXSxhPVtdLHM9W10sYz1uZXcgS24sbD1uZXcgR247by5wdXNoKDAsMCwwKSxhLnB1c2goMCwwLDEpLHMucHVzaCguNSwuNSk7Zm9yKGxldCBpPTAsdT0zO2k8PWU7aSsrLHUrPTMpe2NvbnN0IGg9bitpL2UqcjtjLng9dCpNYXRoLmNvcyhoKSxjLnk9dCpNYXRoLnNpbihoKSxvLnB1c2goYy54LGMueSxjLnopLGEucHVzaCgwLDAsMSksbC54PShvW3VdL3QrMSkvMixsLnk9KG9bdSsxXS90KzEpLzIscy5wdXNoKGwueCxsLnkpfWZvcihsZXQgdD0xO3Q8PWU7dCsrKWkucHVzaCh0LHQrMSwwKTt0aGlzLnNldEluZGV4KGkpLHRoaXMuc2V0QXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgTmkobywzKSksdGhpcy5zZXRBdHRyaWJ1dGUoXCJub3JtYWxcIixuZXcgTmkoYSwzKSksdGhpcy5zZXRBdHRyaWJ1dGUoXCJ1dlwiLG5ldyBOaShzLDIpKX19Y2xhc3MgcWMgZXh0ZW5kcyBqY3tjb25zdHJ1Y3Rvcih0LGUsbixyKXtzdXBlcigpLHRoaXMudHlwZT1cIkNpcmNsZUdlb21ldHJ5XCIsdGhpcy5wYXJhbWV0ZXJzPXtyYWRpdXM6dCxzZWdtZW50czplLHRoZXRhU3RhcnQ6bix0aGV0YUxlbmd0aDpyfSx0aGlzLmZyb21CdWZmZXJHZW9tZXRyeShuZXcgWGModCxlLG4scikpLHRoaXMubWVyZ2VWZXJ0aWNlcygpfX1jbGFzcyBZYyBleHRlbmRzIHFpe2NvbnN0cnVjdG9yKHQ9MSxlPTEsbj0xLHI9OCxpPTEsbz0hMSxhPTAscz0yKk1hdGguUEkpe3N1cGVyKCksdGhpcy50eXBlPVwiQ3lsaW5kZXJCdWZmZXJHZW9tZXRyeVwiLHRoaXMucGFyYW1ldGVycz17cmFkaXVzVG9wOnQscmFkaXVzQm90dG9tOmUsaGVpZ2h0Om4scmFkaWFsU2VnbWVudHM6cixoZWlnaHRTZWdtZW50czppLG9wZW5FbmRlZDpvLHRoZXRhU3RhcnQ6YSx0aGV0YUxlbmd0aDpzfTtjb25zdCBjPXRoaXM7cj1NYXRoLmZsb29yKHIpLGk9TWF0aC5mbG9vcihpKTtjb25zdCBsPVtdLHU9W10saD1bXSxkPVtdO2xldCBwPTA7Y29uc3QgZj1bXSxtPW4vMjtsZXQgZz0wO2Z1bmN0aW9uIHYobil7Y29uc3QgaT1wLG89bmV3IEduLGY9bmV3IEtuO2xldCB2PTA7Y29uc3QgeT0hMD09PW4/dDplLHg9ITA9PT1uPzE6LTE7Zm9yKGxldCB0PTE7dDw9cjt0KyspdS5wdXNoKDAsbSp4LDApLGgucHVzaCgwLHgsMCksZC5wdXNoKC41LC41KSxwKys7Y29uc3QgYj1wO2ZvcihsZXQgdD0wO3Q8PXI7dCsrKXtjb25zdCBlPXQvcipzK2Esbj1NYXRoLmNvcyhlKSxpPU1hdGguc2luKGUpO2YueD15KmksZi55PW0qeCxmLno9eSpuLHUucHVzaChmLngsZi55LGYueiksaC5wdXNoKDAseCwwKSxvLng9LjUqbisuNSxvLnk9LjUqaSp4Ky41LGQucHVzaChvLngsby55KSxwKyt9Zm9yKGxldCB0PTA7dDxyO3QrKyl7Y29uc3QgZT1pK3Qscj1iK3Q7ITA9PT1uP2wucHVzaChyLHIrMSxlKTpsLnB1c2gocisxLHIsZSksdis9M31jLmFkZEdyb3VwKGcsdiwhMD09PW4/MToyKSxnKz12fSFmdW5jdGlvbigpe2NvbnN0IG89bmV3IEtuLHY9bmV3IEtuO2xldCB5PTA7Y29uc3QgeD0oZS10KS9uO2ZvcihsZXQgYz0wO2M8PWk7YysrKXtjb25zdCBsPVtdLGc9Yy9pLHk9ZyooZS10KSt0O2ZvcihsZXQgdD0wO3Q8PXI7dCsrKXtjb25zdCBlPXQvcixpPWUqcythLGM9TWF0aC5zaW4oaSksZj1NYXRoLmNvcyhpKTt2Lng9eSpjLHYueT0tZypuK20sdi56PXkqZix1LnB1c2godi54LHYueSx2LnopLG8uc2V0KGMseCxmKS5ub3JtYWxpemUoKSxoLnB1c2goby54LG8ueSxvLnopLGQucHVzaChlLDEtZyksbC5wdXNoKHArKyl9Zi5wdXNoKGwpfWZvcihsZXQgdD0wO3Q8cjt0KyspZm9yKGxldCBlPTA7ZTxpO2UrKyl7Y29uc3Qgbj1mW2VdW3RdLHI9ZltlKzFdW3RdLGk9ZltlKzFdW3QrMV0sbz1mW2VdW3QrMV07bC5wdXNoKG4scixvKSxsLnB1c2gocixpLG8pLHkrPTZ9Yy5hZGRHcm91cChnLHksMCksZys9eX0oKSwhMT09PW8mJih0PjAmJnYoITApLGU+MCYmdighMSkpLHRoaXMuc2V0SW5kZXgobCksdGhpcy5zZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBOaSh1LDMpKSx0aGlzLnNldEF0dHJpYnV0ZShcIm5vcm1hbFwiLG5ldyBOaShoLDMpKSx0aGlzLnNldEF0dHJpYnV0ZShcInV2XCIsbmV3IE5pKGQsMikpfX1jbGFzcyBaYyBleHRlbmRzIGpje2NvbnN0cnVjdG9yKHQsZSxuLHIsaSxvLGEscyl7c3VwZXIoKSx0aGlzLnR5cGU9XCJDeWxpbmRlckdlb21ldHJ5XCIsdGhpcy5wYXJhbWV0ZXJzPXtyYWRpdXNUb3A6dCxyYWRpdXNCb3R0b206ZSxoZWlnaHQ6bixyYWRpYWxTZWdtZW50czpyLGhlaWdodFNlZ21lbnRzOmksb3BlbkVuZGVkOm8sdGhldGFTdGFydDphLHRoZXRhTGVuZ3RoOnN9LHRoaXMuZnJvbUJ1ZmZlckdlb21ldHJ5KG5ldyBZYyh0LGUsbixyLGksbyxhLHMpKSx0aGlzLm1lcmdlVmVydGljZXMoKX19Y2xhc3MgSmMgZXh0ZW5kcyBaY3tjb25zdHJ1Y3Rvcih0LGUsbixyLGksbyxhKXtzdXBlcigwLHQsZSxuLHIsaSxvLGEpLHRoaXMudHlwZT1cIkNvbmVHZW9tZXRyeVwiLHRoaXMucGFyYW1ldGVycz17cmFkaXVzOnQsaGVpZ2h0OmUscmFkaWFsU2VnbWVudHM6bixoZWlnaHRTZWdtZW50czpyLG9wZW5FbmRlZDppLHRoZXRhU3RhcnQ6byx0aGV0YUxlbmd0aDphfX19Y2xhc3MgS2MgZXh0ZW5kcyBZY3tjb25zdHJ1Y3Rvcih0PTEsZT0xLG49OCxyPTEsaT0hMSxvPTAsYT0yKk1hdGguUEkpe3N1cGVyKDAsdCxlLG4scixpLG8sYSksdGhpcy50eXBlPVwiQ29uZUJ1ZmZlckdlb21ldHJ5XCIsdGhpcy5wYXJhbWV0ZXJzPXtyYWRpdXM6dCxoZWlnaHQ6ZSxyYWRpYWxTZWdtZW50czpuLGhlaWdodFNlZ21lbnRzOnIsb3BlbkVuZGVkOmksdGhldGFTdGFydDpvLHRoZXRhTGVuZ3RoOmF9fX1jbGFzcyBRYyBleHRlbmRzIHFpe2NvbnN0cnVjdG9yKHQsZSxuPTEscj0wKXtzdXBlcigpLHRoaXMudHlwZT1cIlBvbHloZWRyb25CdWZmZXJHZW9tZXRyeVwiLHRoaXMucGFyYW1ldGVycz17dmVydGljZXM6dCxpbmRpY2VzOmUscmFkaXVzOm4sZGV0YWlsOnJ9O2NvbnN0IGk9W10sbz1bXTtmdW5jdGlvbiBhKHQsZSxuLHIpe2NvbnN0IGk9cisxLG89W107Zm9yKGxldCByPTA7cjw9aTtyKyspe29bcl09W107Y29uc3QgYT10LmNsb25lKCkubGVycChuLHIvaSkscz1lLmNsb25lKCkubGVycChuLHIvaSksYz1pLXI7Zm9yKGxldCB0PTA7dDw9Yzt0Kyspb1tyXVt0XT0wPT09dCYmcj09PWk/YTphLmNsb25lKCkubGVycChzLHQvYyl9Zm9yKGxldCB0PTA7dDxpO3QrKylmb3IobGV0IGU9MDtlPDIqKGktdCktMTtlKyspe2NvbnN0IG49TWF0aC5mbG9vcihlLzIpO2UlMj09MD8ocyhvW3RdW24rMV0pLHMob1t0KzFdW25dKSxzKG9bdF1bbl0pKToocyhvW3RdW24rMV0pLHMob1t0KzFdW24rMV0pLHMob1t0KzFdW25dKSl9fWZ1bmN0aW9uIHModCl7aS5wdXNoKHQueCx0LnksdC56KX1mdW5jdGlvbiBjKGUsbil7Y29uc3Qgcj0zKmU7bi54PXRbciswXSxuLnk9dFtyKzFdLG4uej10W3IrMl19ZnVuY3Rpb24gbCh0LGUsbixyKXtyPDAmJjE9PT10LngmJihvW2VdPXQueC0xKSwwPT09bi54JiYwPT09bi56JiYob1tlXT1yLzIvTWF0aC5QSSsuNSl9ZnVuY3Rpb24gdSh0KXtyZXR1cm4gTWF0aC5hdGFuMih0LnosLXQueCl9IWZ1bmN0aW9uKHQpe2NvbnN0IG49bmV3IEtuLHI9bmV3IEtuLGk9bmV3IEtuO2ZvcihsZXQgbz0wO288ZS5sZW5ndGg7bys9MyljKGVbbyswXSxuKSxjKGVbbysxXSxyKSxjKGVbbysyXSxpKSxhKG4scixpLHQpfShyKSxmdW5jdGlvbih0KXtjb25zdCBlPW5ldyBLbjtmb3IobGV0IG49MDtuPGkubGVuZ3RoO24rPTMpZS54PWlbbiswXSxlLnk9aVtuKzFdLGUuej1pW24rMl0sZS5ub3JtYWxpemUoKS5tdWx0aXBseVNjYWxhcih0KSxpW24rMF09ZS54LGlbbisxXT1lLnksaVtuKzJdPWUuen0obiksZnVuY3Rpb24oKXtjb25zdCB0PW5ldyBLbjtmb3IobGV0IG49MDtuPGkubGVuZ3RoO24rPTMpe3QueD1pW24rMF0sdC55PWlbbisxXSx0Lno9aVtuKzJdO2NvbnN0IHI9dSh0KS8yL01hdGguUEkrLjUsYT0oZT10LE1hdGguYXRhbjIoLWUueSxNYXRoLnNxcnQoZS54KmUueCtlLnoqZS56KSkvTWF0aC5QSSsuNSk7by5wdXNoKHIsMS1hKX12YXIgZTsoZnVuY3Rpb24oKXtjb25zdCB0PW5ldyBLbixlPW5ldyBLbixuPW5ldyBLbixyPW5ldyBLbixhPW5ldyBHbixzPW5ldyBHbixjPW5ldyBHbjtmb3IobGV0IGg9MCxkPTA7aDxpLmxlbmd0aDtoKz05LGQrPTYpe3Quc2V0KGlbaCswXSxpW2grMV0saVtoKzJdKSxlLnNldChpW2grM10saVtoKzRdLGlbaCs1XSksbi5zZXQoaVtoKzZdLGlbaCs3XSxpW2grOF0pLGEuc2V0KG9bZCswXSxvW2QrMV0pLHMuc2V0KG9bZCsyXSxvW2QrM10pLGMuc2V0KG9bZCs0XSxvW2QrNV0pLHIuY29weSh0KS5hZGQoZSkuYWRkKG4pLmRpdmlkZVNjYWxhcigzKTtjb25zdCBwPXUocik7bChhLGQrMCx0LHApLGwocyxkKzIsZSxwKSxsKGMsZCs0LG4scCl9fSkoKSxmdW5jdGlvbigpe2ZvcihsZXQgdD0wO3Q8by5sZW5ndGg7dCs9Nil7Y29uc3QgZT1vW3QrMF0sbj1vW3QrMl0scj1vW3QrNF0saT1NYXRoLm1heChlLG4sciksYT1NYXRoLm1pbihlLG4scik7aT4uOSYmYTwuMSYmKGU8LjImJihvW3QrMF0rPTEpLG48LjImJihvW3QrMl0rPTEpLHI8LjImJihvW3QrNF0rPTEpKX19KCl9KCksdGhpcy5zZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBOaShpLDMpKSx0aGlzLnNldEF0dHJpYnV0ZShcIm5vcm1hbFwiLG5ldyBOaShpLnNsaWNlKCksMykpLHRoaXMuc2V0QXR0cmlidXRlKFwidXZcIixuZXcgTmkobywyKSksMD09PXI/dGhpcy5jb21wdXRlVmVydGV4Tm9ybWFscygpOnRoaXMubm9ybWFsaXplTm9ybWFscygpfX1jbGFzcyAkYyBleHRlbmRzIFFje2NvbnN0cnVjdG9yKHQ9MSxlPTApe2NvbnN0IG49KDErTWF0aC5zcXJ0KDUpKS8yLHI9MS9uO3N1cGVyKFstMSwtMSwtMSwtMSwtMSwxLC0xLDEsLTEsLTEsMSwxLDEsLTEsLTEsMSwtMSwxLDEsMSwtMSwxLDEsMSwwLC1yLC1uLDAsLXIsbiwwLHIsLW4sMCxyLG4sLXIsLW4sMCwtcixuLDAsciwtbiwwLHIsbiwwLC1uLDAsLXIsbiwwLC1yLC1uLDAscixuLDAscl0sWzMsMTEsNywzLDcsMTUsMywxNSwxMyw3LDE5LDE3LDcsMTcsNiw3LDYsMTUsMTcsNCw4LDE3LDgsMTAsMTcsMTAsNiw4LDAsMTYsOCwxNiwyLDgsMiwxMCwwLDEyLDEsMCwxLDE4LDAsMTgsMTYsNiwxMCwyLDYsMiwxMyw2LDEzLDE1LDIsMTYsMTgsMiwxOCwzLDIsMywxMywxOCwxLDksMTgsOSwxMSwxOCwxMSwzLDQsMTQsMTIsNCwxMiwwLDQsMCw4LDExLDksNSwxMSw1LDE5LDExLDE5LDcsMTksNSwxNCwxOSwxNCw0LDE5LDQsMTcsMSwxMiwxNCwxLDE0LDUsMSw1LDldLHQsZSksdGhpcy50eXBlPVwiRG9kZWNhaGVkcm9uQnVmZmVyR2VvbWV0cnlcIix0aGlzLnBhcmFtZXRlcnM9e3JhZGl1czp0LGRldGFpbDplfX19Y2xhc3MgdGwgZXh0ZW5kcyBqY3tjb25zdHJ1Y3Rvcih0LGUpe3N1cGVyKCksdGhpcy50eXBlPVwiRG9kZWNhaGVkcm9uR2VvbWV0cnlcIix0aGlzLnBhcmFtZXRlcnM9e3JhZGl1czp0LGRldGFpbDplfSx0aGlzLmZyb21CdWZmZXJHZW9tZXRyeShuZXcgJGModCxlKSksdGhpcy5tZXJnZVZlcnRpY2VzKCl9fWNvbnN0IGVsPW5ldyBLbixubD1uZXcgS24scmw9bmV3IEtuLGlsPW5ldyBoaTtjbGFzcyBvbCBleHRlbmRzIHFpe2NvbnN0cnVjdG9yKHQsZSl7c3VwZXIoKSx0aGlzLnR5cGU9XCJFZGdlc0dlb21ldHJ5XCIsdGhpcy5wYXJhbWV0ZXJzPXt0aHJlc2hvbGRBbmdsZTplfSxlPXZvaWQgMCE9PWU/ZToxLHQuaXNHZW9tZXRyeSYmKHQ9KG5ldyBxaSkuZnJvbUdlb21ldHJ5KHQpKTtjb25zdCBuPU1hdGgucG93KDEwLDQpLHI9TWF0aC5jb3Moem4uREVHMlJBRCplKSxpPXQuZ2V0SW5kZXgoKSxvPXQuZ2V0QXR0cmlidXRlKFwicG9zaXRpb25cIiksYT1pP2kuY291bnQ6by5jb3VudCxzPVswLDAsMF0sYz1bXCJhXCIsXCJiXCIsXCJjXCJdLGw9bmV3IEFycmF5KDMpLHU9e30saD1bXTtmb3IobGV0IHQ9MDt0PGE7dCs9Myl7aT8oc1swXT1pLmdldFgodCksc1sxXT1pLmdldFgodCsxKSxzWzJdPWkuZ2V0WCh0KzIpKTooc1swXT10LHNbMV09dCsxLHNbMl09dCsyKTtjb25zdHthOmUsYjphLGM6ZH09aWw7aWYoZS5mcm9tQnVmZmVyQXR0cmlidXRlKG8sc1swXSksYS5mcm9tQnVmZmVyQXR0cmlidXRlKG8sc1sxXSksZC5mcm9tQnVmZmVyQXR0cmlidXRlKG8sc1syXSksaWwuZ2V0Tm9ybWFsKHJsKSxsWzBdPWAke01hdGgucm91bmQoZS54Km4pfSwke01hdGgucm91bmQoZS55Km4pfSwke01hdGgucm91bmQoZS56Km4pfWAsbFsxXT1gJHtNYXRoLnJvdW5kKGEueCpuKX0sJHtNYXRoLnJvdW5kKGEueSpuKX0sJHtNYXRoLnJvdW5kKGEueipuKX1gLGxbMl09YCR7TWF0aC5yb3VuZChkLngqbil9LCR7TWF0aC5yb3VuZChkLnkqbil9LCR7TWF0aC5yb3VuZChkLnoqbil9YCxsWzBdIT09bFsxXSYmbFsxXSE9PWxbMl0mJmxbMl0hPT1sWzBdKWZvcihsZXQgdD0wO3Q8Mzt0Kyspe2NvbnN0IGU9KHQrMSklMyxuPWxbdF0saT1sW2VdLG89aWxbY1t0XV0sYT1pbFtjW2VdXSxkPWAke259XyR7aX1gLHA9YCR7aX1fJHtufWA7cCBpbiB1JiZ1W3BdPyhybC5kb3QodVtwXS5ub3JtYWwpPD1yJiYoaC5wdXNoKG8ueCxvLnksby56KSxoLnB1c2goYS54LGEueSxhLnopKSx1W3BdPW51bGwpOmQgaW4gdXx8KHVbZF09e2luZGV4MDpzW3RdLGluZGV4MTpzW2VdLG5vcm1hbDpybC5jbG9uZSgpfSl9fWZvcihjb25zdCB0IGluIHUpaWYodVt0XSl7Y29uc3R7aW5kZXgwOmUsaW5kZXgxOm59PXVbdF07ZWwuZnJvbUJ1ZmZlckF0dHJpYnV0ZShvLGUpLG5sLmZyb21CdWZmZXJBdHRyaWJ1dGUobyxuKSxoLnB1c2goZWwueCxlbC55LGVsLnopLGgucHVzaChubC54LG5sLnksbmwueil9dGhpcy5zZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBOaShoLDMpKX19Y29uc3QgYWw9ZnVuY3Rpb24odCxlLG4pe249bnx8Mjtjb25zdCByPWUmJmUubGVuZ3RoLGk9cj9lWzBdKm46dC5sZW5ndGg7bGV0IG89c2wodCwwLGksbiwhMCk7Y29uc3QgYT1bXTtpZighb3x8by5uZXh0PT09by5wcmV2KXJldHVybiBhO2xldCBzLGMsbCx1LGgsZCxwO2lmKHImJihvPWZ1bmN0aW9uKHQsZSxuLHIpe2NvbnN0IGk9W107bGV0IG8sYSxzLGMsbDtmb3Iobz0wLGE9ZS5sZW5ndGg7bzxhO28rKylzPWVbb10qcixjPW88YS0xP2VbbysxXSpyOnQubGVuZ3RoLGw9c2wodCxzLGMsciwhMSksbD09PWwubmV4dCYmKGwuc3RlaW5lcj0hMCksaS5wdXNoKHlsKGwpKTtmb3IoaS5zb3J0KGZsKSxvPTA7bzxpLmxlbmd0aDtvKyspbWwoaVtvXSxuKSxuPWNsKG4sbi5uZXh0KTtyZXR1cm4gbn0odCxlLG8sbikpLHQubGVuZ3RoPjgwKm4pe3M9bD10WzBdLGM9dT10WzFdO2ZvcihsZXQgZT1uO2U8aTtlKz1uKWg9dFtlXSxkPXRbZSsxXSxoPHMmJihzPWgpLGQ8YyYmKGM9ZCksaD5sJiYobD1oKSxkPnUmJih1PWQpO3A9TWF0aC5tYXgobC1zLHUtYykscD0wIT09cD8xL3A6MH1yZXR1cm4gbGwobyxhLG4scyxjLHApLGF9O2Z1bmN0aW9uIHNsKHQsZSxuLHIsaSl7bGV0IG8sYTtpZihpPT09ZnVuY3Rpb24odCxlLG4scil7bGV0IGk9MDtmb3IobGV0IG89ZSxhPW4tcjtvPG47bys9cilpKz0odFthXS10W29dKSoodFtvKzFdK3RbYSsxXSksYT1vO3JldHVybiBpfSh0LGUsbixyKT4wKWZvcihvPWU7bzxuO28rPXIpYT1MbChvLHRbb10sdFtvKzFdLGEpO2Vsc2UgZm9yKG89bi1yO28+PWU7by09cilhPUxsKG8sdFtvXSx0W28rMV0sYSk7cmV0dXJuIGEmJl9sKGEsYS5uZXh0KSYmKFJsKGEpLGE9YS5uZXh0KSxhfWZ1bmN0aW9uIGNsKHQsZSl7aWYoIXQpcmV0dXJuIHQ7ZXx8KGU9dCk7bGV0IG4scj10O2Rve2lmKG49ITEsci5zdGVpbmVyfHwhX2wocixyLm5leHQpJiYwIT09d2woci5wcmV2LHIsci5uZXh0KSlyPXIubmV4dDtlbHNle2lmKFJsKHIpLHI9ZT1yLnByZXYscj09PXIubmV4dClicmVhaztuPSEwfX13aGlsZShufHxyIT09ZSk7cmV0dXJuIGV9ZnVuY3Rpb24gbGwodCxlLG4scixpLG8sYSl7aWYoIXQpcmV0dXJuOyFhJiZvJiZmdW5jdGlvbih0LGUsbixyKXtsZXQgaT10O2Rve251bGw9PT1pLnomJihpLno9dmwoaS54LGkueSxlLG4scikpLGkucHJldlo9aS5wcmV2LGkubmV4dFo9aS5uZXh0LGk9aS5uZXh0fXdoaWxlKGkhPT10KTtpLnByZXZaLm5leHRaPW51bGwsaS5wcmV2Wj1udWxsLGZ1bmN0aW9uKHQpe2xldCBlLG4scixpLG8sYSxzLGMsbD0xO2Rve2ZvcihuPXQsdD1udWxsLG89bnVsbCxhPTA7bjspe2ZvcihhKysscj1uLHM9MCxlPTA7ZTxsJiYocysrLHI9ci5uZXh0WixyKTtlKyspO2ZvcihjPWw7cz4wfHxjPjAmJnI7KTAhPT1zJiYoMD09PWN8fCFyfHxuLno8PXIueik/KGk9bixuPW4ubmV4dFoscy0tKTooaT1yLHI9ci5uZXh0WixjLS0pLG8/by5uZXh0Wj1pOnQ9aSxpLnByZXZaPW8sbz1pO249cn1vLm5leHRaPW51bGwsbCo9Mn13aGlsZShhPjEpfShpKX0odCxyLGksbyk7bGV0IHMsYyxsPXQ7Zm9yKDt0LnByZXYhPT10Lm5leHQ7KWlmKHM9dC5wcmV2LGM9dC5uZXh0LG8/aGwodCxyLGksbyk6dWwodCkpZS5wdXNoKHMuaS9uKSxlLnB1c2godC5pL24pLGUucHVzaChjLmkvbiksUmwodCksdD1jLm5leHQsbD1jLm5leHQ7ZWxzZSBpZigodD1jKT09PWwpe2E/MT09PWE/bGwodD1kbChjbCh0KSxlLG4pLGUsbixyLGksbywyKToyPT09YSYmcGwodCxlLG4scixpLG8pOmxsKGNsKHQpLGUsbixyLGksbywxKTticmVha319ZnVuY3Rpb24gdWwodCl7Y29uc3QgZT10LnByZXYsbj10LHI9dC5uZXh0O2lmKHdsKGUsbixyKT49MClyZXR1cm4hMTtsZXQgaT10Lm5leHQubmV4dDtmb3IoO2khPT10LnByZXY7KXtpZih4bChlLngsZS55LG4ueCxuLnksci54LHIueSxpLngsaS55KSYmd2woaS5wcmV2LGksaS5uZXh0KT49MClyZXR1cm4hMTtpPWkubmV4dH1yZXR1cm4hMH1mdW5jdGlvbiBobCh0LGUsbixyKXtjb25zdCBpPXQucHJldixvPXQsYT10Lm5leHQ7aWYod2woaSxvLGEpPj0wKXJldHVybiExO2NvbnN0IHM9aS54PG8ueD9pLng8YS54P2kueDphLng6by54PGEueD9vLng6YS54LGM9aS55PG8ueT9pLnk8YS55P2kueTphLnk6by55PGEueT9vLnk6YS55LGw9aS54Pm8ueD9pLng+YS54P2kueDphLng6by54PmEueD9vLng6YS54LHU9aS55Pm8ueT9pLnk+YS55P2kueTphLnk6by55PmEueT9vLnk6YS55LGg9dmwocyxjLGUsbixyKSxkPXZsKGwsdSxlLG4scik7bGV0IHA9dC5wcmV2WixmPXQubmV4dFo7Zm9yKDtwJiZwLno+PWgmJmYmJmYuejw9ZDspe2lmKHAhPT10LnByZXYmJnAhPT10Lm5leHQmJnhsKGkueCxpLnksby54LG8ueSxhLngsYS55LHAueCxwLnkpJiZ3bChwLnByZXYscCxwLm5leHQpPj0wKXJldHVybiExO2lmKHA9cC5wcmV2WixmIT09dC5wcmV2JiZmIT09dC5uZXh0JiZ4bChpLngsaS55LG8ueCxvLnksYS54LGEueSxmLngsZi55KSYmd2woZi5wcmV2LGYsZi5uZXh0KT49MClyZXR1cm4hMTtmPWYubmV4dFp9Zm9yKDtwJiZwLno+PWg7KXtpZihwIT09dC5wcmV2JiZwIT09dC5uZXh0JiZ4bChpLngsaS55LG8ueCxvLnksYS54LGEueSxwLngscC55KSYmd2wocC5wcmV2LHAscC5uZXh0KT49MClyZXR1cm4hMTtwPXAucHJldlp9Zm9yKDtmJiZmLno8PWQ7KXtpZihmIT09dC5wcmV2JiZmIT09dC5uZXh0JiZ4bChpLngsaS55LG8ueCxvLnksYS54LGEueSxmLngsZi55KSYmd2woZi5wcmV2LGYsZi5uZXh0KT49MClyZXR1cm4hMTtmPWYubmV4dFp9cmV0dXJuITB9ZnVuY3Rpb24gZGwodCxlLG4pe2xldCByPXQ7ZG97Y29uc3QgaT1yLnByZXYsbz1yLm5leHQubmV4dDshX2woaSxvKSYmTWwoaSxyLHIubmV4dCxvKSYmRWwoaSxvKSYmRWwobyxpKSYmKGUucHVzaChpLmkvbiksZS5wdXNoKHIuaS9uKSxlLnB1c2goby5pL24pLFJsKHIpLFJsKHIubmV4dCkscj10PW8pLHI9ci5uZXh0fXdoaWxlKHIhPT10KTtyZXR1cm4gY2wocil9ZnVuY3Rpb24gcGwodCxlLG4scixpLG8pe2xldCBhPXQ7ZG97bGV0IHQ9YS5uZXh0Lm5leHQ7Zm9yKDt0IT09YS5wcmV2Oyl7aWYoYS5pIT09dC5pJiZibChhLHQpKXtsZXQgcz1BbChhLHQpO3JldHVybiBhPWNsKGEsYS5uZXh0KSxzPWNsKHMscy5uZXh0KSxsbChhLGUsbixyLGksbyksdm9pZCBsbChzLGUsbixyLGksbyl9dD10Lm5leHR9YT1hLm5leHR9d2hpbGUoYSE9PXQpfWZ1bmN0aW9uIGZsKHQsZSl7cmV0dXJuIHQueC1lLnh9ZnVuY3Rpb24gbWwodCxlKXtpZihlPWZ1bmN0aW9uKHQsZSl7bGV0IG49ZTtjb25zdCByPXQueCxpPXQueTtsZXQgbyxhPS0xLzA7ZG97aWYoaTw9bi55JiZpPj1uLm5leHQueSYmbi5uZXh0LnkhPT1uLnkpe2NvbnN0IHQ9bi54KyhpLW4ueSkqKG4ubmV4dC54LW4ueCkvKG4ubmV4dC55LW4ueSk7aWYodDw9ciYmdD5hKXtpZihhPXQsdD09PXIpe2lmKGk9PT1uLnkpcmV0dXJuIG47aWYoaT09PW4ubmV4dC55KXJldHVybiBuLm5leHR9bz1uLng8bi5uZXh0Lng/bjpuLm5leHR9fW49bi5uZXh0fXdoaWxlKG4hPT1lKTtpZighbylyZXR1cm4gbnVsbDtpZihyPT09YSlyZXR1cm4gbztjb25zdCBzPW8sYz1vLngsbD1vLnk7bGV0IHUsaD0xLzA7bj1vO2Rve3I+PW4ueCYmbi54Pj1jJiZyIT09bi54JiZ4bChpPGw/cjphLGksYyxsLGk8bD9hOnIsaSxuLngsbi55KSYmKHU9TWF0aC5hYnMoaS1uLnkpLyhyLW4ueCksRWwobix0KSYmKHU8aHx8dT09PWgmJihuLng+by54fHxuLng9PT1vLngmJmdsKG8sbikpKSYmKG89bixoPXUpKSxuPW4ubmV4dH13aGlsZShuIT09cyk7cmV0dXJuIG99KHQsZSkpe2NvbnN0IG49QWwoZSx0KTtjbChlLGUubmV4dCksY2wobixuLm5leHQpfX1mdW5jdGlvbiBnbCh0LGUpe3JldHVybiB3bCh0LnByZXYsdCxlLnByZXYpPDAmJndsKGUubmV4dCx0LHQubmV4dCk8MH1mdW5jdGlvbiB2bCh0LGUsbixyLGkpe3JldHVybih0PTE0MzE2NTU3NjUmKCh0PTg1ODk5MzQ1OSYoKHQ9MjUyNjQ1MTM1JigodD0xNjcxMTkzNSYoKHQ9MzI3NjcqKHQtbikqaSl8dDw8OCkpfHQ8PDQpKXx0PDwyKSl8dDw8MSkpfChlPTE0MzE2NTU3NjUmKChlPTg1ODk5MzQ1OSYoKGU9MjUyNjQ1MTM1JigoZT0xNjcxMTkzNSYoKGU9MzI3NjcqKGUtcikqaSl8ZTw8OCkpfGU8PDQpKXxlPDwyKSl8ZTw8MSkpPDwxfWZ1bmN0aW9uIHlsKHQpe2xldCBlPXQsbj10O2RveyhlLng8bi54fHxlLng9PT1uLngmJmUueTxuLnkpJiYobj1lKSxlPWUubmV4dH13aGlsZShlIT09dCk7cmV0dXJuIG59ZnVuY3Rpb24geGwodCxlLG4scixpLG8sYSxzKXtyZXR1cm4oaS1hKSooZS1zKS0odC1hKSooby1zKT49MCYmKHQtYSkqKHItcyktKG4tYSkqKGUtcyk+PTAmJihuLWEpKihvLXMpLShpLWEpKihyLXMpPj0wfWZ1bmN0aW9uIGJsKHQsZSl7cmV0dXJuIHQubmV4dC5pIT09ZS5pJiZ0LnByZXYuaSE9PWUuaSYmIWZ1bmN0aW9uKHQsZSl7bGV0IG49dDtkb3tpZihuLmkhPT10LmkmJm4ubmV4dC5pIT09dC5pJiZuLmkhPT1lLmkmJm4ubmV4dC5pIT09ZS5pJiZNbChuLG4ubmV4dCx0LGUpKXJldHVybiEwO249bi5uZXh0fXdoaWxlKG4hPT10KTtyZXR1cm4hMX0odCxlKSYmKEVsKHQsZSkmJkVsKGUsdCkmJmZ1bmN0aW9uKHQsZSl7bGV0IG49dCxyPSExO2NvbnN0IGk9KHQueCtlLngpLzIsbz0odC55K2UueSkvMjtkb3tuLnk+byE9bi5uZXh0Lnk+byYmbi5uZXh0LnkhPT1uLnkmJmk8KG4ubmV4dC54LW4ueCkqKG8tbi55KS8obi5uZXh0Lnktbi55KStuLngmJihyPSFyKSxuPW4ubmV4dH13aGlsZShuIT09dCk7cmV0dXJuIHJ9KHQsZSkmJih3bCh0LnByZXYsdCxlLnByZXYpfHx3bCh0LGUucHJldixlKSl8fF9sKHQsZSkmJndsKHQucHJldix0LHQubmV4dCk+MCYmd2woZS5wcmV2LGUsZS5uZXh0KT4wKX1mdW5jdGlvbiB3bCh0LGUsbil7cmV0dXJuKGUueS10LnkpKihuLngtZS54KS0oZS54LXQueCkqKG4ueS1lLnkpfWZ1bmN0aW9uIF9sKHQsZSl7cmV0dXJuIHQueD09PWUueCYmdC55PT09ZS55fWZ1bmN0aW9uIE1sKHQsZSxuLHIpe2NvbnN0IGk9VGwod2wodCxlLG4pKSxvPVRsKHdsKHQsZSxyKSksYT1UbCh3bChuLHIsdCkpLHM9VGwod2wobixyLGUpKTtyZXR1cm4gaSE9PW8mJmEhPT1zfHwoISgwIT09aXx8IVNsKHQsbixlKSl8fCghKDAhPT1vfHwhU2wodCxyLGUpKXx8KCEoMCE9PWF8fCFTbChuLHQscikpfHwhKDAhPT1zfHwhU2wobixlLHIpKSkpKX1mdW5jdGlvbiBTbCh0LGUsbil7cmV0dXJuIGUueDw9TWF0aC5tYXgodC54LG4ueCkmJmUueD49TWF0aC5taW4odC54LG4ueCkmJmUueTw9TWF0aC5tYXgodC55LG4ueSkmJmUueT49TWF0aC5taW4odC55LG4ueSl9ZnVuY3Rpb24gVGwodCl7cmV0dXJuIHQ+MD8xOnQ8MD8tMTowfWZ1bmN0aW9uIEVsKHQsZSl7cmV0dXJuIHdsKHQucHJldix0LHQubmV4dCk8MD93bCh0LGUsdC5uZXh0KT49MCYmd2wodCx0LnByZXYsZSk+PTA6d2wodCxlLHQucHJldik8MHx8d2wodCx0Lm5leHQsZSk8MH1mdW5jdGlvbiBBbCh0LGUpe2NvbnN0IG49bmV3IFBsKHQuaSx0LngsdC55KSxyPW5ldyBQbChlLmksZS54LGUueSksaT10Lm5leHQsbz1lLnByZXY7cmV0dXJuIHQubmV4dD1lLGUucHJldj10LG4ubmV4dD1pLGkucHJldj1uLHIubmV4dD1uLG4ucHJldj1yLG8ubmV4dD1yLHIucHJldj1vLHJ9ZnVuY3Rpb24gTGwodCxlLG4scil7Y29uc3QgaT1uZXcgUGwodCxlLG4pO3JldHVybiByPyhpLm5leHQ9ci5uZXh0LGkucHJldj1yLHIubmV4dC5wcmV2PWksci5uZXh0PWkpOihpLnByZXY9aSxpLm5leHQ9aSksaX1mdW5jdGlvbiBSbCh0KXt0Lm5leHQucHJldj10LnByZXYsdC5wcmV2Lm5leHQ9dC5uZXh0LHQucHJldlomJih0LnByZXZaLm5leHRaPXQubmV4dFopLHQubmV4dFomJih0Lm5leHRaLnByZXZaPXQucHJldlopfWZ1bmN0aW9uIFBsKHQsZSxuKXt0aGlzLmk9dCx0aGlzLng9ZSx0aGlzLnk9bix0aGlzLnByZXY9bnVsbCx0aGlzLm5leHQ9bnVsbCx0aGlzLno9bnVsbCx0aGlzLnByZXZaPW51bGwsdGhpcy5uZXh0Wj1udWxsLHRoaXMuc3RlaW5lcj0hMX1jb25zdCBDbD17YXJlYTpmdW5jdGlvbih0KXtjb25zdCBlPXQubGVuZ3RoO2xldCBuPTA7Zm9yKGxldCByPWUtMSxpPTA7aTxlO3I9aSsrKW4rPXRbcl0ueCp0W2ldLnktdFtpXS54KnRbcl0ueTtyZXR1cm4uNSpufSxpc0Nsb2NrV2lzZTpmdW5jdGlvbih0KXtyZXR1cm4gQ2wuYXJlYSh0KTwwfSx0cmlhbmd1bGF0ZVNoYXBlOmZ1bmN0aW9uKHQsZSl7Y29uc3Qgbj1bXSxyPVtdLGk9W107SWwodCksT2wobix0KTtsZXQgbz10Lmxlbmd0aDtlLmZvckVhY2goSWwpO2ZvcihsZXQgdD0wO3Q8ZS5sZW5ndGg7dCsrKXIucHVzaChvKSxvKz1lW3RdLmxlbmd0aCxPbChuLGVbdF0pO2NvbnN0IGE9YWwobixyKTtmb3IobGV0IHQ9MDt0PGEubGVuZ3RoO3QrPTMpaS5wdXNoKGEuc2xpY2UodCx0KzMpKTtyZXR1cm4gaX19O2Z1bmN0aW9uIElsKHQpe2NvbnN0IGU9dC5sZW5ndGg7ZT4yJiZ0W2UtMV0uZXF1YWxzKHRbMF0pJiZ0LnBvcCgpfWZ1bmN0aW9uIE9sKHQsZSl7Zm9yKGxldCBuPTA7bjxlLmxlbmd0aDtuKyspdC5wdXNoKGVbbl0ueCksdC5wdXNoKGVbbl0ueSl9Y2xhc3MgTmwgZXh0ZW5kcyBxaXtjb25zdHJ1Y3Rvcih0LGUpe3N1cGVyKCksdGhpcy50eXBlPVwiRXh0cnVkZUJ1ZmZlckdlb21ldHJ5XCIsdGhpcy5wYXJhbWV0ZXJzPXtzaGFwZXM6dCxvcHRpb25zOmV9LHQ9QXJyYXkuaXNBcnJheSh0KT90Olt0XTtjb25zdCBuPXRoaXMscj1bXSxpPVtdO2ZvcihsZXQgZT0wLG49dC5sZW5ndGg7ZTxuO2UrKyl7byh0W2VdKX1mdW5jdGlvbiBvKHQpe2NvbnN0IG89W10sYT12b2lkIDAhPT1lLmN1cnZlU2VnbWVudHM/ZS5jdXJ2ZVNlZ21lbnRzOjEyLHM9dm9pZCAwIT09ZS5zdGVwcz9lLnN0ZXBzOjE7bGV0IGM9dm9pZCAwIT09ZS5kZXB0aD9lLmRlcHRoOjEwMCxsPXZvaWQgMD09PWUuYmV2ZWxFbmFibGVkfHxlLmJldmVsRW5hYmxlZCx1PXZvaWQgMCE9PWUuYmV2ZWxUaGlja25lc3M/ZS5iZXZlbFRoaWNrbmVzczo2LGg9dm9pZCAwIT09ZS5iZXZlbFNpemU/ZS5iZXZlbFNpemU6dS0yLGQ9dm9pZCAwIT09ZS5iZXZlbE9mZnNldD9lLmJldmVsT2Zmc2V0OjAscD12b2lkIDAhPT1lLmJldmVsU2VnbWVudHM/ZS5iZXZlbFNlZ21lbnRzOjM7Y29uc3QgZj1lLmV4dHJ1ZGVQYXRoLG09dm9pZCAwIT09ZS5VVkdlbmVyYXRvcj9lLlVWR2VuZXJhdG9yOkRsO3ZvaWQgMCE9PWUuYW1vdW50JiYoY29uc29sZS53YXJuKFwiVEhSRUUuRXh0cnVkZUJ1ZmZlckdlb21ldHJ5OiBhbW91bnQgaGFzIGJlZW4gcmVuYW1lZCB0byBkZXB0aC5cIiksYz1lLmFtb3VudCk7bGV0IGcsdix5LHgsYix3PSExO2YmJihnPWYuZ2V0U3BhY2VkUG9pbnRzKHMpLHc9ITAsbD0hMSx2PWYuY29tcHV0ZUZyZW5ldEZyYW1lcyhzLCExKSx5PW5ldyBLbix4PW5ldyBLbixiPW5ldyBLbiksbHx8KHA9MCx1PTAsaD0wLGQ9MCk7Y29uc3QgXz10LmV4dHJhY3RQb2ludHMoYSk7bGV0IE09Xy5zaGFwZTtjb25zdCBTPV8uaG9sZXM7aWYoIUNsLmlzQ2xvY2tXaXNlKE0pKXtNPU0ucmV2ZXJzZSgpO2ZvcihsZXQgdD0wLGU9Uy5sZW5ndGg7dDxlO3QrKyl7Y29uc3QgZT1TW3RdO0NsLmlzQ2xvY2tXaXNlKGUpJiYoU1t0XT1lLnJldmVyc2UoKSl9fWNvbnN0IFQ9Q2wudHJpYW5ndWxhdGVTaGFwZShNLFMpLEU9TTtmb3IobGV0IHQ9MCxlPVMubGVuZ3RoO3Q8ZTt0Kyspe2NvbnN0IGU9U1t0XTtNPU0uY29uY2F0KGUpfWZ1bmN0aW9uIEEodCxlLG4pe3JldHVybiBlfHxjb25zb2xlLmVycm9yKFwiVEhSRUUuRXh0cnVkZUdlb21ldHJ5OiB2ZWMgZG9lcyBub3QgZXhpc3RcIiksZS5jbG9uZSgpLm11bHRpcGx5U2NhbGFyKG4pLmFkZCh0KX1jb25zdCBMPU0ubGVuZ3RoLFI9VC5sZW5ndGg7ZnVuY3Rpb24gUCh0LGUsbil7bGV0IHIsaSxvO2NvbnN0IGE9dC54LWUueCxzPXQueS1lLnksYz1uLngtdC54LGw9bi55LXQueSx1PWEqYStzKnMsaD1hKmwtcypjO2lmKE1hdGguYWJzKGgpPk51bWJlci5FUFNJTE9OKXtjb25zdCBoPU1hdGguc3FydCh1KSxkPU1hdGguc3FydChjKmMrbCpsKSxwPWUueC1zL2gsZj1lLnkrYS9oLG09KChuLngtbC9kLXApKmwtKG4ueStjL2QtZikqYykvKGEqbC1zKmMpO3I9cCthKm0tdC54LGk9ZitzKm0tdC55O2NvbnN0IGc9cipyK2kqaTtpZihnPD0yKXJldHVybiBuZXcgR24ocixpKTtvPU1hdGguc3FydChnLzIpfWVsc2V7bGV0IHQ9ITE7YT5OdW1iZXIuRVBTSUxPTj9jPk51bWJlci5FUFNJTE9OJiYodD0hMCk6YTwtTnVtYmVyLkVQU0lMT04/YzwtTnVtYmVyLkVQU0lMT04mJih0PSEwKTpNYXRoLnNpZ24ocyk9PT1NYXRoLnNpZ24obCkmJih0PSEwKSx0PyhyPS1zLGk9YSxvPU1hdGguc3FydCh1KSk6KHI9YSxpPXMsbz1NYXRoLnNxcnQodS8yKSl9cmV0dXJuIG5ldyBHbihyL28saS9vKX1jb25zdCBDPVtdO2ZvcihsZXQgdD0wLGU9RS5sZW5ndGgsbj1lLTEscj10KzE7dDxlO3QrKyxuKysscisrKW49PT1lJiYobj0wKSxyPT09ZSYmKHI9MCksQ1t0XT1QKEVbdF0sRVtuXSxFW3JdKTtjb25zdCBJPVtdO2xldCBPLE49Qy5jb25jYXQoKTtmb3IobGV0IHQ9MCxlPVMubGVuZ3RoO3Q8ZTt0Kyspe2NvbnN0IGU9U1t0XTtPPVtdO2ZvcihsZXQgdD0wLG49ZS5sZW5ndGgscj1uLTEsaT10KzE7dDxuO3QrKyxyKyssaSsrKXI9PT1uJiYocj0wKSxpPT09biYmKGk9MCksT1t0XT1QKGVbdF0sZVtyXSxlW2ldKTtJLnB1c2goTyksTj1OLmNvbmNhdChPKX1mb3IobGV0IHQ9MDt0PHA7dCsrKXtjb25zdCBlPXQvcCxuPXUqTWF0aC5jb3MoZSpNYXRoLlBJLzIpLHI9aCpNYXRoLnNpbihlKk1hdGguUEkvMikrZDtmb3IobGV0IHQ9MCxlPUUubGVuZ3RoO3Q8ZTt0Kyspe2NvbnN0IGU9QShFW3RdLENbdF0scik7RihlLngsZS55LC1uKX1mb3IobGV0IHQ9MCxlPVMubGVuZ3RoO3Q8ZTt0Kyspe2NvbnN0IGU9U1t0XTtPPUlbdF07Zm9yKGxldCB0PTAsaT1lLmxlbmd0aDt0PGk7dCsrKXtjb25zdCBpPUEoZVt0XSxPW3RdLHIpO0YoaS54LGkueSwtbil9fX1jb25zdCBEPWgrZDtmb3IobGV0IHQ9MDt0PEw7dCsrKXtjb25zdCBlPWw/QShNW3RdLE5bdF0sRCk6TVt0XTt3Pyh4LmNvcHkodi5ub3JtYWxzWzBdKS5tdWx0aXBseVNjYWxhcihlLngpLHkuY29weSh2LmJpbm9ybWFsc1swXSkubXVsdGlwbHlTY2FsYXIoZS55KSxiLmNvcHkoZ1swXSkuYWRkKHgpLmFkZCh5KSxGKGIueCxiLnksYi56KSk6RihlLngsZS55LDApfWZvcihsZXQgdD0xO3Q8PXM7dCsrKWZvcihsZXQgZT0wO2U8TDtlKyspe2NvbnN0IG49bD9BKE1bZV0sTltlXSxEKTpNW2VdO3c/KHguY29weSh2Lm5vcm1hbHNbdF0pLm11bHRpcGx5U2NhbGFyKG4ueCkseS5jb3B5KHYuYmlub3JtYWxzW3RdKS5tdWx0aXBseVNjYWxhcihuLnkpLGIuY29weShnW3RdKS5hZGQoeCkuYWRkKHkpLEYoYi54LGIueSxiLnopKTpGKG4ueCxuLnksYy9zKnQpfWZvcihsZXQgdD1wLTE7dD49MDt0LS0pe2NvbnN0IGU9dC9wLG49dSpNYXRoLmNvcyhlKk1hdGguUEkvMikscj1oKk1hdGguc2luKGUqTWF0aC5QSS8yKStkO2ZvcihsZXQgdD0wLGU9RS5sZW5ndGg7dDxlO3QrKyl7Y29uc3QgZT1BKEVbdF0sQ1t0XSxyKTtGKGUueCxlLnksYytuKX1mb3IobGV0IHQ9MCxlPVMubGVuZ3RoO3Q8ZTt0Kyspe2NvbnN0IGU9U1t0XTtPPUlbdF07Zm9yKGxldCB0PTAsaT1lLmxlbmd0aDt0PGk7dCsrKXtjb25zdCBpPUEoZVt0XSxPW3RdLHIpO3c/RihpLngsaS55K2dbcy0xXS55LGdbcy0xXS54K24pOkYoaS54LGkueSxjK24pfX19ZnVuY3Rpb24gQih0LGUpe2xldCBuPXQubGVuZ3RoO2Zvcig7LS1uPj0wOyl7Y29uc3Qgcj1uO2xldCBpPW4tMTtpPDAmJihpPXQubGVuZ3RoLTEpO2ZvcihsZXQgdD0wLG49cysyKnA7dDxuO3QrKyl7Y29uc3Qgbj1MKnQsbz1MKih0KzEpO3ooZStyK24sZStpK24sZStpK28sZStyK28pfX19ZnVuY3Rpb24gRih0LGUsbil7by5wdXNoKHQpLG8ucHVzaChlKSxvLnB1c2gobil9ZnVuY3Rpb24gVSh0LGUsaSl7Ryh0KSxHKGUpLEcoaSk7Y29uc3Qgbz1yLmxlbmd0aC8zLGE9bS5nZW5lcmF0ZVRvcFVWKG4scixvLTMsby0yLG8tMSk7SChhWzBdKSxIKGFbMV0pLEgoYVsyXSl9ZnVuY3Rpb24geih0LGUsaSxvKXtHKHQpLEcoZSksRyhvKSxHKGUpLEcoaSksRyhvKTtjb25zdCBhPXIubGVuZ3RoLzMscz1tLmdlbmVyYXRlU2lkZVdhbGxVVihuLHIsYS02LGEtMyxhLTIsYS0xKTtIKHNbMF0pLEgoc1sxXSksSChzWzNdKSxIKHNbMV0pLEgoc1syXSksSChzWzNdKX1mdW5jdGlvbiBHKHQpe3IucHVzaChvWzMqdCswXSksci5wdXNoKG9bMyp0KzFdKSxyLnB1c2gob1szKnQrMl0pfWZ1bmN0aW9uIEgodCl7aS5wdXNoKHQueCksaS5wdXNoKHQueSl9IWZ1bmN0aW9uKCl7Y29uc3QgdD1yLmxlbmd0aC8zO2lmKGwpe2xldCB0PTAsZT1MKnQ7Zm9yKGxldCB0PTA7dDxSO3QrKyl7Y29uc3Qgbj1UW3RdO1UoblsyXStlLG5bMV0rZSxuWzBdK2UpfXQ9cysyKnAsZT1MKnQ7Zm9yKGxldCB0PTA7dDxSO3QrKyl7Y29uc3Qgbj1UW3RdO1UoblswXStlLG5bMV0rZSxuWzJdK2UpfX1lbHNle2ZvcihsZXQgdD0wO3Q8Ujt0Kyspe2NvbnN0IGU9VFt0XTtVKGVbMl0sZVsxXSxlWzBdKX1mb3IobGV0IHQ9MDt0PFI7dCsrKXtjb25zdCBlPVRbdF07VShlWzBdK0wqcyxlWzFdK0wqcyxlWzJdK0wqcyl9fW4uYWRkR3JvdXAodCxyLmxlbmd0aC8zLXQsMCl9KCksZnVuY3Rpb24oKXtjb25zdCB0PXIubGVuZ3RoLzM7bGV0IGU9MDtCKEUsZSksZSs9RS5sZW5ndGg7Zm9yKGxldCB0PTAsbj1TLmxlbmd0aDt0PG47dCsrKXtjb25zdCBuPVNbdF07QihuLGUpLGUrPW4ubGVuZ3RofW4uYWRkR3JvdXAodCxyLmxlbmd0aC8zLXQsMSl9KCl9dGhpcy5zZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBOaShyLDMpKSx0aGlzLnNldEF0dHJpYnV0ZShcInV2XCIsbmV3IE5pKGksMikpLHRoaXMuY29tcHV0ZVZlcnRleE5vcm1hbHMoKX10b0pTT04oKXtjb25zdCB0PXFpLnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzKTtyZXR1cm4gZnVuY3Rpb24odCxlLG4pe2lmKG4uc2hhcGVzPVtdLEFycmF5LmlzQXJyYXkodCkpZm9yKGxldCBlPTAscj10Lmxlbmd0aDtlPHI7ZSsrKXtjb25zdCByPXRbZV07bi5zaGFwZXMucHVzaChyLnV1aWQpfWVsc2Ugbi5zaGFwZXMucHVzaCh0LnV1aWQpO3ZvaWQgMCE9PWUuZXh0cnVkZVBhdGgmJihuLm9wdGlvbnMuZXh0cnVkZVBhdGg9ZS5leHRydWRlUGF0aC50b0pTT04oKSk7cmV0dXJuIG59KHRoaXMucGFyYW1ldGVycy5zaGFwZXMsdGhpcy5wYXJhbWV0ZXJzLm9wdGlvbnMsdCl9fWNvbnN0IERsPXtnZW5lcmF0ZVRvcFVWOmZ1bmN0aW9uKHQsZSxuLHIsaSl7Y29uc3Qgbz1lWzMqbl0sYT1lWzMqbisxXSxzPWVbMypyXSxjPWVbMypyKzFdLGw9ZVszKmldLHU9ZVszKmkrMV07cmV0dXJuW25ldyBHbihvLGEpLG5ldyBHbihzLGMpLG5ldyBHbihsLHUpXX0sZ2VuZXJhdGVTaWRlV2FsbFVWOmZ1bmN0aW9uKHQsZSxuLHIsaSxvKXtjb25zdCBhPWVbMypuXSxzPWVbMypuKzFdLGM9ZVszKm4rMl0sbD1lWzMqcl0sdT1lWzMqcisxXSxoPWVbMypyKzJdLGQ9ZVszKmldLHA9ZVszKmkrMV0sZj1lWzMqaSsyXSxtPWVbMypvXSxnPWVbMypvKzFdLHY9ZVszKm8rMl07cmV0dXJuIE1hdGguYWJzKHMtdSk8LjAxP1tuZXcgR24oYSwxLWMpLG5ldyBHbihsLDEtaCksbmV3IEduKGQsMS1mKSxuZXcgR24obSwxLXYpXTpbbmV3IEduKHMsMS1jKSxuZXcgR24odSwxLWgpLG5ldyBHbihwLDEtZiksbmV3IEduKGcsMS12KV19fTtjbGFzcyBCbCBleHRlbmRzIGpje2NvbnN0cnVjdG9yKHQsZSl7c3VwZXIoKSx0aGlzLnR5cGU9XCJFeHRydWRlR2VvbWV0cnlcIix0aGlzLnBhcmFtZXRlcnM9e3NoYXBlczp0LG9wdGlvbnM6ZX0sdGhpcy5mcm9tQnVmZmVyR2VvbWV0cnkobmV3IE5sKHQsZSkpLHRoaXMubWVyZ2VWZXJ0aWNlcygpfXRvSlNPTigpe2NvbnN0IHQ9c3VwZXIudG9KU09OKCk7cmV0dXJuIGZ1bmN0aW9uKHQsZSxuKXtpZihuLnNoYXBlcz1bXSxBcnJheS5pc0FycmF5KHQpKWZvcihsZXQgZT0wLHI9dC5sZW5ndGg7ZTxyO2UrKyl7Y29uc3Qgcj10W2VdO24uc2hhcGVzLnB1c2goci51dWlkKX1lbHNlIG4uc2hhcGVzLnB1c2godC51dWlkKTt2b2lkIDAhPT1lLmV4dHJ1ZGVQYXRoJiYobi5vcHRpb25zLmV4dHJ1ZGVQYXRoPWUuZXh0cnVkZVBhdGgudG9KU09OKCkpO3JldHVybiBufSh0aGlzLnBhcmFtZXRlcnMuc2hhcGVzLHRoaXMucGFyYW1ldGVycy5vcHRpb25zLHQpfX1jbGFzcyBGbCBleHRlbmRzIFFje2NvbnN0cnVjdG9yKHQ9MSxlPTApe2NvbnN0IG49KDErTWF0aC5zcXJ0KDUpKS8yO3N1cGVyKFstMSxuLDAsMSxuLDAsLTEsLW4sMCwxLC1uLDAsMCwtMSxuLDAsMSxuLDAsLTEsLW4sMCwxLC1uLG4sMCwtMSxuLDAsMSwtbiwwLC0xLC1uLDAsMV0sWzAsMTEsNSwwLDUsMSwwLDEsNywwLDcsMTAsMCwxMCwxMSwxLDUsOSw1LDExLDQsMTEsMTAsMiwxMCw3LDYsNywxLDgsMyw5LDQsMyw0LDIsMywyLDYsMyw2LDgsMyw4LDksNCw5LDUsMiw0LDExLDYsMiwxMCw4LDYsNyw5LDgsMV0sdCxlKSx0aGlzLnR5cGU9XCJJY29zYWhlZHJvbkJ1ZmZlckdlb21ldHJ5XCIsdGhpcy5wYXJhbWV0ZXJzPXtyYWRpdXM6dCxkZXRhaWw6ZX19fWNsYXNzIFVsIGV4dGVuZHMgamN7Y29uc3RydWN0b3IodCxlKXtzdXBlcigpLHRoaXMudHlwZT1cIkljb3NhaGVkcm9uR2VvbWV0cnlcIix0aGlzLnBhcmFtZXRlcnM9e3JhZGl1czp0LGRldGFpbDplfSx0aGlzLmZyb21CdWZmZXJHZW9tZXRyeShuZXcgRmwodCxlKSksdGhpcy5tZXJnZVZlcnRpY2VzKCl9fWNsYXNzIHpsIGV4dGVuZHMgcWl7Y29uc3RydWN0b3IodCxlPTEyLG49MCxyPTIqTWF0aC5QSSl7c3VwZXIoKSx0aGlzLnR5cGU9XCJMYXRoZUJ1ZmZlckdlb21ldHJ5XCIsdGhpcy5wYXJhbWV0ZXJzPXtwb2ludHM6dCxzZWdtZW50czplLHBoaVN0YXJ0Om4scGhpTGVuZ3RoOnJ9LGU9TWF0aC5mbG9vcihlKSxyPXpuLmNsYW1wKHIsMCwyKk1hdGguUEkpO2NvbnN0IGk9W10sbz1bXSxhPVtdLHM9MS9lLGM9bmV3IEtuLGw9bmV3IEduO2ZvcihsZXQgaT0wO2k8PWU7aSsrKXtjb25zdCB1PW4raSpzKnIsaD1NYXRoLnNpbih1KSxkPU1hdGguY29zKHUpO2ZvcihsZXQgbj0wO248PXQubGVuZ3RoLTE7bisrKWMueD10W25dLngqaCxjLnk9dFtuXS55LGMuej10W25dLngqZCxvLnB1c2goYy54LGMueSxjLnopLGwueD1pL2UsbC55PW4vKHQubGVuZ3RoLTEpLGEucHVzaChsLngsbC55KX1mb3IobGV0IG49MDtuPGU7bisrKWZvcihsZXQgZT0wO2U8dC5sZW5ndGgtMTtlKyspe2NvbnN0IHI9ZStuKnQubGVuZ3RoLG89cixhPXIrdC5sZW5ndGgscz1yK3QubGVuZ3RoKzEsYz1yKzE7aS5wdXNoKG8sYSxjKSxpLnB1c2goYSxzLGMpfWlmKHRoaXMuc2V0SW5kZXgoaSksdGhpcy5zZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBOaShvLDMpKSx0aGlzLnNldEF0dHJpYnV0ZShcInV2XCIsbmV3IE5pKGEsMikpLHRoaXMuY29tcHV0ZVZlcnRleE5vcm1hbHMoKSxyPT09MipNYXRoLlBJKXtjb25zdCBuPXRoaXMuYXR0cmlidXRlcy5ub3JtYWwuYXJyYXkscj1uZXcgS24saT1uZXcgS24sbz1uZXcgS24sYT1lKnQubGVuZ3RoKjM7Zm9yKGxldCBlPTAscz0wO2U8dC5sZW5ndGg7ZSsrLHMrPTMpci54PW5bcyswXSxyLnk9bltzKzFdLHIuej1uW3MrMl0saS54PW5bYStzKzBdLGkueT1uW2ErcysxXSxpLno9blthK3MrMl0sby5hZGRWZWN0b3JzKHIsaSkubm9ybWFsaXplKCksbltzKzBdPW5bYStzKzBdPW8ueCxuW3MrMV09blthK3MrMV09by55LG5bcysyXT1uW2ErcysyXT1vLnp9fX1jbGFzcyBHbCBleHRlbmRzIGpje2NvbnN0cnVjdG9yKHQsZSxuLHIpe3N1cGVyKCksdGhpcy50eXBlPVwiTGF0aGVHZW9tZXRyeVwiLHRoaXMucGFyYW1ldGVycz17cG9pbnRzOnQsc2VnbWVudHM6ZSxwaGlTdGFydDpuLHBoaUxlbmd0aDpyfSx0aGlzLmZyb21CdWZmZXJHZW9tZXRyeShuZXcgemwodCxlLG4scikpLHRoaXMubWVyZ2VWZXJ0aWNlcygpfX1jbGFzcyBIbCBleHRlbmRzIFFje2NvbnN0cnVjdG9yKHQ9MSxlPTApe3N1cGVyKFsxLDAsMCwtMSwwLDAsMCwxLDAsMCwtMSwwLDAsMCwxLDAsMCwtMV0sWzAsMiw0LDAsNCwzLDAsMyw1LDAsNSwyLDEsMiw1LDEsNSwzLDEsMyw0LDEsNCwyXSx0LGUpLHRoaXMudHlwZT1cIk9jdGFoZWRyb25CdWZmZXJHZW9tZXRyeVwiLHRoaXMucGFyYW1ldGVycz17cmFkaXVzOnQsZGV0YWlsOmV9fX1jbGFzcyBrbCBleHRlbmRzIGpje2NvbnN0cnVjdG9yKHQsZSl7c3VwZXIoKSx0aGlzLnR5cGU9XCJPY3RhaGVkcm9uR2VvbWV0cnlcIix0aGlzLnBhcmFtZXRlcnM9e3JhZGl1czp0LGRldGFpbDplfSx0aGlzLmZyb21CdWZmZXJHZW9tZXRyeShuZXcgSGwodCxlKSksdGhpcy5tZXJnZVZlcnRpY2VzKCl9fWZ1bmN0aW9uIFZsKHQsZSxuKXtxaS5jYWxsKHRoaXMpLHRoaXMudHlwZT1cIlBhcmFtZXRyaWNCdWZmZXJHZW9tZXRyeVwiLHRoaXMucGFyYW1ldGVycz17ZnVuYzp0LHNsaWNlczplLHN0YWNrczpufTtjb25zdCByPVtdLGk9W10sbz1bXSxhPVtdLHM9MWUtNSxjPW5ldyBLbixsPW5ldyBLbix1PW5ldyBLbixoPW5ldyBLbixkPW5ldyBLbjt0Lmxlbmd0aDwzJiZjb25zb2xlLmVycm9yKFwiVEhSRUUuUGFyYW1ldHJpY0dlb21ldHJ5OiBGdW5jdGlvbiBtdXN0IG5vdyBtb2RpZnkgYSBWZWN0b3IzIGFzIHRoaXJkIHBhcmFtZXRlci5cIik7Y29uc3QgcD1lKzE7Zm9yKGxldCByPTA7cjw9bjtyKyspe2NvbnN0IHA9ci9uO2ZvcihsZXQgbj0wO248PWU7bisrKXtjb25zdCByPW4vZTt0KHIscCxsKSxpLnB1c2gobC54LGwueSxsLnopLHItcz49MD8odChyLXMscCx1KSxoLnN1YlZlY3RvcnMobCx1KSk6KHQocitzLHAsdSksaC5zdWJWZWN0b3JzKHUsbCkpLHAtcz49MD8odChyLHAtcyx1KSxkLnN1YlZlY3RvcnMobCx1KSk6KHQocixwK3MsdSksZC5zdWJWZWN0b3JzKHUsbCkpLGMuY3Jvc3NWZWN0b3JzKGgsZCkubm9ybWFsaXplKCksby5wdXNoKGMueCxjLnksYy56KSxhLnB1c2gocixwKX19Zm9yKGxldCB0PTA7dDxuO3QrKylmb3IobGV0IG49MDtuPGU7bisrKXtjb25zdCBlPXQqcCtuLGk9dCpwK24rMSxvPSh0KzEpKnArbisxLGE9KHQrMSkqcCtuO3IucHVzaChlLGksYSksci5wdXNoKGksbyxhKX10aGlzLnNldEluZGV4KHIpLHRoaXMuc2V0QXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgTmkoaSwzKSksdGhpcy5zZXRBdHRyaWJ1dGUoXCJub3JtYWxcIixuZXcgTmkobywzKSksdGhpcy5zZXRBdHRyaWJ1dGUoXCJ1dlwiLG5ldyBOaShhLDIpKX1mdW5jdGlvbiBqbCh0LGUsbil7amMuY2FsbCh0aGlzKSx0aGlzLnR5cGU9XCJQYXJhbWV0cmljR2VvbWV0cnlcIix0aGlzLnBhcmFtZXRlcnM9e2Z1bmM6dCxzbGljZXM6ZSxzdGFja3M6bn0sdGhpcy5mcm9tQnVmZmVyR2VvbWV0cnkobmV3IFZsKHQsZSxuKSksdGhpcy5tZXJnZVZlcnRpY2VzKCl9VmwucHJvdG90eXBlPU9iamVjdC5jcmVhdGUocWkucHJvdG90eXBlKSxWbC5wcm90b3R5cGUuY29uc3RydWN0b3I9VmwsamwucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoamMucHJvdG90eXBlKSxqbC5wcm90b3R5cGUuY29uc3RydWN0b3I9amw7Y2xhc3MgV2wgZXh0ZW5kcyBqY3tjb25zdHJ1Y3Rvcih0LGUsbixyKXtzdXBlcigpLHRoaXMudHlwZT1cIlBsYW5lR2VvbWV0cnlcIix0aGlzLnBhcmFtZXRlcnM9e3dpZHRoOnQsaGVpZ2h0OmUsd2lkdGhTZWdtZW50czpuLGhlaWdodFNlZ21lbnRzOnJ9LHRoaXMuZnJvbUJ1ZmZlckdlb21ldHJ5KG5ldyBDbyh0LGUsbixyKSksdGhpcy5tZXJnZVZlcnRpY2VzKCl9fWNsYXNzIFhsIGV4dGVuZHMgamN7Y29uc3RydWN0b3IodCxlLG4scil7c3VwZXIoKSx0aGlzLnR5cGU9XCJQb2x5aGVkcm9uR2VvbWV0cnlcIix0aGlzLnBhcmFtZXRlcnM9e3ZlcnRpY2VzOnQsaW5kaWNlczplLHJhZGl1czpuLGRldGFpbDpyfSx0aGlzLmZyb21CdWZmZXJHZW9tZXRyeShuZXcgUWModCxlLG4scikpLHRoaXMubWVyZ2VWZXJ0aWNlcygpfX1jbGFzcyBxbCBleHRlbmRzIHFpe2NvbnN0cnVjdG9yKHQ9LjUsZT0xLG49OCxyPTEsaT0wLG89MipNYXRoLlBJKXtzdXBlcigpLHRoaXMudHlwZT1cIlJpbmdCdWZmZXJHZW9tZXRyeVwiLHRoaXMucGFyYW1ldGVycz17aW5uZXJSYWRpdXM6dCxvdXRlclJhZGl1czplLHRoZXRhU2VnbWVudHM6bixwaGlTZWdtZW50czpyLHRoZXRhU3RhcnQ6aSx0aGV0YUxlbmd0aDpvfSxuPU1hdGgubWF4KDMsbik7Y29uc3QgYT1bXSxzPVtdLGM9W10sbD1bXTtsZXQgdT10O2NvbnN0IGg9KGUtdCkvKHI9TWF0aC5tYXgoMSxyKSksZD1uZXcgS24scD1uZXcgR247Zm9yKGxldCB0PTA7dDw9cjt0Kyspe2ZvcihsZXQgdD0wO3Q8PW47dCsrKXtjb25zdCByPWkrdC9uKm87ZC54PXUqTWF0aC5jb3MociksZC55PXUqTWF0aC5zaW4ocikscy5wdXNoKGQueCxkLnksZC56KSxjLnB1c2goMCwwLDEpLHAueD0oZC54L2UrMSkvMixwLnk9KGQueS9lKzEpLzIsbC5wdXNoKHAueCxwLnkpfXUrPWh9Zm9yKGxldCB0PTA7dDxyO3QrKyl7Y29uc3QgZT10KihuKzEpO2ZvcihsZXQgdD0wO3Q8bjt0Kyspe2NvbnN0IHI9dCtlLGk9cixvPXIrbisxLHM9cituKzIsYz1yKzE7YS5wdXNoKGksbyxjKSxhLnB1c2gobyxzLGMpfX10aGlzLnNldEluZGV4KGEpLHRoaXMuc2V0QXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgTmkocywzKSksdGhpcy5zZXRBdHRyaWJ1dGUoXCJub3JtYWxcIixuZXcgTmkoYywzKSksdGhpcy5zZXRBdHRyaWJ1dGUoXCJ1dlwiLG5ldyBOaShsLDIpKX19Y2xhc3MgWWwgZXh0ZW5kcyBqY3tjb25zdHJ1Y3Rvcih0LGUsbixyLGksbyl7c3VwZXIoKSx0aGlzLnR5cGU9XCJSaW5nR2VvbWV0cnlcIix0aGlzLnBhcmFtZXRlcnM9e2lubmVyUmFkaXVzOnQsb3V0ZXJSYWRpdXM6ZSx0aGV0YVNlZ21lbnRzOm4scGhpU2VnbWVudHM6cix0aGV0YVN0YXJ0OmksdGhldGFMZW5ndGg6b30sdGhpcy5mcm9tQnVmZmVyR2VvbWV0cnkobmV3IHFsKHQsZSxuLHIsaSxvKSksdGhpcy5tZXJnZVZlcnRpY2VzKCl9fWNsYXNzIFpsIGV4dGVuZHMgcWl7Y29uc3RydWN0b3IodCxlPTEyKXtzdXBlcigpLHRoaXMudHlwZT1cIlNoYXBlQnVmZmVyR2VvbWV0cnlcIix0aGlzLnBhcmFtZXRlcnM9e3NoYXBlczp0LGN1cnZlU2VnbWVudHM6ZX07Y29uc3Qgbj1bXSxyPVtdLGk9W10sbz1bXTtsZXQgYT0wLHM9MDtpZighMT09PUFycmF5LmlzQXJyYXkodCkpYyh0KTtlbHNlIGZvcihsZXQgZT0wO2U8dC5sZW5ndGg7ZSsrKWModFtlXSksdGhpcy5hZGRHcm91cChhLHMsZSksYSs9cyxzPTA7ZnVuY3Rpb24gYyh0KXtjb25zdCBhPXIubGVuZ3RoLzMsYz10LmV4dHJhY3RQb2ludHMoZSk7bGV0IGw9Yy5zaGFwZTtjb25zdCB1PWMuaG9sZXM7ITE9PT1DbC5pc0Nsb2NrV2lzZShsKSYmKGw9bC5yZXZlcnNlKCkpO2ZvcihsZXQgdD0wLGU9dS5sZW5ndGg7dDxlO3QrKyl7Y29uc3QgZT11W3RdOyEwPT09Q2wuaXNDbG9ja1dpc2UoZSkmJih1W3RdPWUucmV2ZXJzZSgpKX1jb25zdCBoPUNsLnRyaWFuZ3VsYXRlU2hhcGUobCx1KTtmb3IobGV0IHQ9MCxlPXUubGVuZ3RoO3Q8ZTt0Kyspe2NvbnN0IGU9dVt0XTtsPWwuY29uY2F0KGUpfWZvcihsZXQgdD0wLGU9bC5sZW5ndGg7dDxlO3QrKyl7Y29uc3QgZT1sW3RdO3IucHVzaChlLngsZS55LDApLGkucHVzaCgwLDAsMSksby5wdXNoKGUueCxlLnkpfWZvcihsZXQgdD0wLGU9aC5sZW5ndGg7dDxlO3QrKyl7Y29uc3QgZT1oW3RdLHI9ZVswXSthLGk9ZVsxXSthLG89ZVsyXSthO24ucHVzaChyLGksbykscys9M319dGhpcy5zZXRJbmRleChuKSx0aGlzLnNldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IE5pKHIsMykpLHRoaXMuc2V0QXR0cmlidXRlKFwibm9ybWFsXCIsbmV3IE5pKGksMykpLHRoaXMuc2V0QXR0cmlidXRlKFwidXZcIixuZXcgTmkobywyKSl9dG9KU09OKCl7Y29uc3QgdD1xaS5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7cmV0dXJuIGZ1bmN0aW9uKHQsZSl7aWYoZS5zaGFwZXM9W10sQXJyYXkuaXNBcnJheSh0KSlmb3IobGV0IG49MCxyPXQubGVuZ3RoO248cjtuKyspe2NvbnN0IHI9dFtuXTtlLnNoYXBlcy5wdXNoKHIudXVpZCl9ZWxzZSBlLnNoYXBlcy5wdXNoKHQudXVpZCk7cmV0dXJuIGV9KHRoaXMucGFyYW1ldGVycy5zaGFwZXMsdCl9fWNsYXNzIEpsIGV4dGVuZHMgamN7Y29uc3RydWN0b3IodCxlKXtzdXBlcigpLHRoaXMudHlwZT1cIlNoYXBlR2VvbWV0cnlcIixcIm9iamVjdFwiPT10eXBlb2YgZSYmKGNvbnNvbGUud2FybihcIlRIUkVFLlNoYXBlR2VvbWV0cnk6IE9wdGlvbnMgcGFyYW1ldGVyIGhhcyBiZWVuIHJlbW92ZWQuXCIpLGU9ZS5jdXJ2ZVNlZ21lbnRzKSx0aGlzLnBhcmFtZXRlcnM9e3NoYXBlczp0LGN1cnZlU2VnbWVudHM6ZX0sdGhpcy5mcm9tQnVmZmVyR2VvbWV0cnkobmV3IFpsKHQsZSkpLHRoaXMubWVyZ2VWZXJ0aWNlcygpfXRvSlNPTigpe2NvbnN0IHQ9amMucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMpO3JldHVybiBmdW5jdGlvbih0LGUpe2lmKGUuc2hhcGVzPVtdLEFycmF5LmlzQXJyYXkodCkpZm9yKGxldCBuPTAscj10Lmxlbmd0aDtuPHI7bisrKXtjb25zdCByPXRbbl07ZS5zaGFwZXMucHVzaChyLnV1aWQpfWVsc2UgZS5zaGFwZXMucHVzaCh0LnV1aWQpO3JldHVybiBlfSh0aGlzLnBhcmFtZXRlcnMuc2hhcGVzLHQpfX1jbGFzcyBLbCBleHRlbmRzIHFpe2NvbnN0cnVjdG9yKHQ9MSxlPTgsbj02LHI9MCxpPTIqTWF0aC5QSSxvPTAsYT1NYXRoLlBJKXtzdXBlcigpLHRoaXMudHlwZT1cIlNwaGVyZUJ1ZmZlckdlb21ldHJ5XCIsdGhpcy5wYXJhbWV0ZXJzPXtyYWRpdXM6dCx3aWR0aFNlZ21lbnRzOmUsaGVpZ2h0U2VnbWVudHM6bixwaGlTdGFydDpyLHBoaUxlbmd0aDppLHRoZXRhU3RhcnQ6byx0aGV0YUxlbmd0aDphfSxlPU1hdGgubWF4KDMsTWF0aC5mbG9vcihlKSksbj1NYXRoLm1heCgyLE1hdGguZmxvb3IobikpO2NvbnN0IHM9TWF0aC5taW4obythLE1hdGguUEkpO2xldCBjPTA7Y29uc3QgbD1bXSx1PW5ldyBLbixoPW5ldyBLbixkPVtdLHA9W10sZj1bXSxtPVtdO2ZvcihsZXQgZD0wO2Q8PW47ZCsrKXtjb25zdCBnPVtdLHY9ZC9uO2xldCB5PTA7MD09ZCYmMD09bz95PS41L2U6ZD09biYmcz09TWF0aC5QSSYmKHk9LS41L2UpO2ZvcihsZXQgbj0wO248PWU7bisrKXtjb25zdCBzPW4vZTt1Lng9LXQqTWF0aC5jb3MocitzKmkpKk1hdGguc2luKG8rdiphKSx1Lnk9dCpNYXRoLmNvcyhvK3YqYSksdS56PXQqTWF0aC5zaW4ocitzKmkpKk1hdGguc2luKG8rdiphKSxwLnB1c2godS54LHUueSx1LnopLGguY29weSh1KS5ub3JtYWxpemUoKSxmLnB1c2goaC54LGgueSxoLnopLG0ucHVzaChzK3ksMS12KSxnLnB1c2goYysrKX1sLnB1c2goZyl9Zm9yKGxldCB0PTA7dDxuO3QrKylmb3IobGV0IHI9MDtyPGU7cisrKXtjb25zdCBlPWxbdF1bcisxXSxpPWxbdF1bcl0sYT1sW3QrMV1bcl0sYz1sW3QrMV1bcisxXTsoMCE9PXR8fG8+MCkmJmQucHVzaChlLGksYyksKHQhPT1uLTF8fHM8TWF0aC5QSSkmJmQucHVzaChpLGEsYyl9dGhpcy5zZXRJbmRleChkKSx0aGlzLnNldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IE5pKHAsMykpLHRoaXMuc2V0QXR0cmlidXRlKFwibm9ybWFsXCIsbmV3IE5pKGYsMykpLHRoaXMuc2V0QXR0cmlidXRlKFwidXZcIixuZXcgTmkobSwyKSl9fWNsYXNzIFFsIGV4dGVuZHMgamN7Y29uc3RydWN0b3IodCxlLG4scixpLG8sYSl7c3VwZXIoKSx0aGlzLnR5cGU9XCJTcGhlcmVHZW9tZXRyeVwiLHRoaXMucGFyYW1ldGVycz17cmFkaXVzOnQsd2lkdGhTZWdtZW50czplLGhlaWdodFNlZ21lbnRzOm4scGhpU3RhcnQ6cixwaGlMZW5ndGg6aSx0aGV0YVN0YXJ0Om8sdGhldGFMZW5ndGg6YX0sdGhpcy5mcm9tQnVmZmVyR2VvbWV0cnkobmV3IEtsKHQsZSxuLHIsaSxvLGEpKSx0aGlzLm1lcmdlVmVydGljZXMoKX19Y2xhc3MgJGwgZXh0ZW5kcyBRY3tjb25zdHJ1Y3Rvcih0PTEsZT0wKXtzdXBlcihbMSwxLDEsLTEsLTEsMSwtMSwxLC0xLDEsLTEsLTFdLFsyLDEsMCwwLDMsMiwxLDMsMCwyLDMsMV0sdCxlKSx0aGlzLnR5cGU9XCJUZXRyYWhlZHJvbkJ1ZmZlckdlb21ldHJ5XCIsdGhpcy5wYXJhbWV0ZXJzPXtyYWRpdXM6dCxkZXRhaWw6ZX19fWNsYXNzIHR1IGV4dGVuZHMgamN7Y29uc3RydWN0b3IodCxlKXtzdXBlcigpLHRoaXMudHlwZT1cIlRldHJhaGVkcm9uR2VvbWV0cnlcIix0aGlzLnBhcmFtZXRlcnM9e3JhZGl1czp0LGRldGFpbDplfSx0aGlzLmZyb21CdWZmZXJHZW9tZXRyeShuZXcgJGwodCxlKSksdGhpcy5tZXJnZVZlcnRpY2VzKCl9fWNsYXNzIGV1IGV4dGVuZHMgTmx7Y29uc3RydWN0b3IodCxlPXt9KXtjb25zdCBuPWUuZm9udDtpZighbnx8IW4uaXNGb250KXJldHVybiBjb25zb2xlLmVycm9yKFwiVEhSRUUuVGV4dEdlb21ldHJ5OiBmb250IHBhcmFtZXRlciBpcyBub3QgYW4gaW5zdGFuY2Ugb2YgVEhSRUUuRm9udC5cIiksbmV3IHFpO2NvbnN0IHI9bi5nZW5lcmF0ZVNoYXBlcyh0LGUuc2l6ZSk7ZS5kZXB0aD12b2lkIDAhPT1lLmhlaWdodD9lLmhlaWdodDo1MCx2b2lkIDA9PT1lLmJldmVsVGhpY2tuZXNzJiYoZS5iZXZlbFRoaWNrbmVzcz0xMCksdm9pZCAwPT09ZS5iZXZlbFNpemUmJihlLmJldmVsU2l6ZT04KSx2b2lkIDA9PT1lLmJldmVsRW5hYmxlZCYmKGUuYmV2ZWxFbmFibGVkPSExKSxzdXBlcihyLGUpLHRoaXMudHlwZT1cIlRleHRCdWZmZXJHZW9tZXRyeVwifX1jbGFzcyBudSBleHRlbmRzIGpje2NvbnN0cnVjdG9yKHQsZSl7c3VwZXIoKSx0aGlzLnR5cGU9XCJUZXh0R2VvbWV0cnlcIix0aGlzLnBhcmFtZXRlcnM9e3RleHQ6dCxwYXJhbWV0ZXJzOmV9LHRoaXMuZnJvbUJ1ZmZlckdlb21ldHJ5KG5ldyBldSh0LGUpKSx0aGlzLm1lcmdlVmVydGljZXMoKX19Y2xhc3MgcnUgZXh0ZW5kcyBxaXtjb25zdHJ1Y3Rvcih0PTEsZT0uNCxuPTgscj02LGk9MipNYXRoLlBJKXtzdXBlcigpLHRoaXMudHlwZT1cIlRvcnVzQnVmZmVyR2VvbWV0cnlcIix0aGlzLnBhcmFtZXRlcnM9e3JhZGl1czp0LHR1YmU6ZSxyYWRpYWxTZWdtZW50czpuLHR1YnVsYXJTZWdtZW50czpyLGFyYzppfSxuPU1hdGguZmxvb3Iobikscj1NYXRoLmZsb29yKHIpO2NvbnN0IG89W10sYT1bXSxzPVtdLGM9W10sbD1uZXcgS24sdT1uZXcgS24saD1uZXcgS247Zm9yKGxldCBvPTA7bzw9bjtvKyspZm9yKGxldCBkPTA7ZDw9cjtkKyspe2NvbnN0IHA9ZC9yKmksZj1vL24qTWF0aC5QSSoyO3UueD0odCtlKk1hdGguY29zKGYpKSpNYXRoLmNvcyhwKSx1Lnk9KHQrZSpNYXRoLmNvcyhmKSkqTWF0aC5zaW4ocCksdS56PWUqTWF0aC5zaW4oZiksYS5wdXNoKHUueCx1LnksdS56KSxsLng9dCpNYXRoLmNvcyhwKSxsLnk9dCpNYXRoLnNpbihwKSxoLnN1YlZlY3RvcnModSxsKS5ub3JtYWxpemUoKSxzLnB1c2goaC54LGgueSxoLnopLGMucHVzaChkL3IpLGMucHVzaChvL24pfWZvcihsZXQgdD0xO3Q8PW47dCsrKWZvcihsZXQgZT0xO2U8PXI7ZSsrKXtjb25zdCBuPShyKzEpKnQrZS0xLGk9KHIrMSkqKHQtMSkrZS0xLGE9KHIrMSkqKHQtMSkrZSxzPShyKzEpKnQrZTtvLnB1c2gobixpLHMpLG8ucHVzaChpLGEscyl9dGhpcy5zZXRJbmRleChvKSx0aGlzLnNldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IE5pKGEsMykpLHRoaXMuc2V0QXR0cmlidXRlKFwibm9ybWFsXCIsbmV3IE5pKHMsMykpLHRoaXMuc2V0QXR0cmlidXRlKFwidXZcIixuZXcgTmkoYywyKSl9fWNsYXNzIGl1IGV4dGVuZHMgamN7Y29uc3RydWN0b3IodCxlLG4scixpKXtzdXBlcigpLHRoaXMudHlwZT1cIlRvcnVzR2VvbWV0cnlcIix0aGlzLnBhcmFtZXRlcnM9e3JhZGl1czp0LHR1YmU6ZSxyYWRpYWxTZWdtZW50czpuLHR1YnVsYXJTZWdtZW50czpyLGFyYzppfSx0aGlzLmZyb21CdWZmZXJHZW9tZXRyeShuZXcgcnUodCxlLG4scixpKSksdGhpcy5tZXJnZVZlcnRpY2VzKCl9fWNsYXNzIG91IGV4dGVuZHMgcWl7Y29uc3RydWN0b3IodD0xLGU9LjQsbj02NCxyPTgsaT0yLG89Myl7c3VwZXIoKSx0aGlzLnR5cGU9XCJUb3J1c0tub3RCdWZmZXJHZW9tZXRyeVwiLHRoaXMucGFyYW1ldGVycz17cmFkaXVzOnQsdHViZTplLHR1YnVsYXJTZWdtZW50czpuLHJhZGlhbFNlZ21lbnRzOnIscDppLHE6b30sbj1NYXRoLmZsb29yKG4pLHI9TWF0aC5mbG9vcihyKTtjb25zdCBhPVtdLHM9W10sYz1bXSxsPVtdLHU9bmV3IEtuLGg9bmV3IEtuLGQ9bmV3IEtuLHA9bmV3IEtuLGY9bmV3IEtuLG09bmV3IEtuLGc9bmV3IEtuO2ZvcihsZXQgYT0wO2E8PW47KythKXtjb25zdCB5PWEvbippKk1hdGguUEkqMjt2KHksaSxvLHQsZCksdih5Ky4wMSxpLG8sdCxwKSxtLnN1YlZlY3RvcnMocCxkKSxnLmFkZFZlY3RvcnMocCxkKSxmLmNyb3NzVmVjdG9ycyhtLGcpLGcuY3Jvc3NWZWN0b3JzKGYsbSksZi5ub3JtYWxpemUoKSxnLm5vcm1hbGl6ZSgpO2ZvcihsZXQgdD0wO3Q8PXI7Kyt0KXtjb25zdCBpPXQvcipNYXRoLlBJKjIsbz0tZSpNYXRoLmNvcyhpKSxwPWUqTWF0aC5zaW4oaSk7dS54PWQueCsobypnLngrcCpmLngpLHUueT1kLnkrKG8qZy55K3AqZi55KSx1Lno9ZC56KyhvKmcueitwKmYueikscy5wdXNoKHUueCx1LnksdS56KSxoLnN1YlZlY3RvcnModSxkKS5ub3JtYWxpemUoKSxjLnB1c2goaC54LGgueSxoLnopLGwucHVzaChhL24pLGwucHVzaCh0L3IpfX1mb3IobGV0IHQ9MTt0PD1uO3QrKylmb3IobGV0IGU9MTtlPD1yO2UrKyl7Y29uc3Qgbj0ocisxKSoodC0xKSsoZS0xKSxpPShyKzEpKnQrKGUtMSksbz0ocisxKSp0K2Uscz0ocisxKSoodC0xKStlO2EucHVzaChuLGkscyksYS5wdXNoKGksbyxzKX1mdW5jdGlvbiB2KHQsZSxuLHIsaSl7Y29uc3Qgbz1NYXRoLmNvcyh0KSxhPU1hdGguc2luKHQpLHM9bi9lKnQsYz1NYXRoLmNvcyhzKTtpLng9ciooMitjKSouNSpvLGkueT1yKigyK2MpKmEqLjUsaS56PXIqTWF0aC5zaW4ocykqLjV9dGhpcy5zZXRJbmRleChhKSx0aGlzLnNldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IE5pKHMsMykpLHRoaXMuc2V0QXR0cmlidXRlKFwibm9ybWFsXCIsbmV3IE5pKGMsMykpLHRoaXMuc2V0QXR0cmlidXRlKFwidXZcIixuZXcgTmkobCwyKSl9fWNsYXNzIGF1IGV4dGVuZHMgamN7Y29uc3RydWN0b3IodCxlLG4scixpLG8sYSl7c3VwZXIoKSx0aGlzLnR5cGU9XCJUb3J1c0tub3RHZW9tZXRyeVwiLHRoaXMucGFyYW1ldGVycz17cmFkaXVzOnQsdHViZTplLHR1YnVsYXJTZWdtZW50czpuLHJhZGlhbFNlZ21lbnRzOnIscDppLHE6b30sdm9pZCAwIT09YSYmY29uc29sZS53YXJuKFwiVEhSRUUuVG9ydXNLbm90R2VvbWV0cnk6IGhlaWdodFNjYWxlIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFVzZSAuc2NhbGUoIHgsIHksIHogKSBpbnN0ZWFkLlwiKSx0aGlzLmZyb21CdWZmZXJHZW9tZXRyeShuZXcgb3UodCxlLG4scixpLG8pKSx0aGlzLm1lcmdlVmVydGljZXMoKX19Y2xhc3Mgc3UgZXh0ZW5kcyBxaXtjb25zdHJ1Y3Rvcih0LGU9NjQsbj0xLHI9OCxpPSExKXtzdXBlcigpLHRoaXMudHlwZT1cIlR1YmVCdWZmZXJHZW9tZXRyeVwiLHRoaXMucGFyYW1ldGVycz17cGF0aDp0LHR1YnVsYXJTZWdtZW50czplLHJhZGl1czpuLHJhZGlhbFNlZ21lbnRzOnIsY2xvc2VkOml9O2NvbnN0IG89dC5jb21wdXRlRnJlbmV0RnJhbWVzKGUsaSk7dGhpcy50YW5nZW50cz1vLnRhbmdlbnRzLHRoaXMubm9ybWFscz1vLm5vcm1hbHMsdGhpcy5iaW5vcm1hbHM9by5iaW5vcm1hbHM7Y29uc3QgYT1uZXcgS24scz1uZXcgS24sYz1uZXcgR247bGV0IGw9bmV3IEtuO2NvbnN0IHU9W10saD1bXSxkPVtdLHA9W107ZnVuY3Rpb24gZihpKXtsPXQuZ2V0UG9pbnRBdChpL2UsbCk7Y29uc3QgYz1vLm5vcm1hbHNbaV0sZD1vLmJpbm9ybWFsc1tpXTtmb3IobGV0IHQ9MDt0PD1yO3QrKyl7Y29uc3QgZT10L3IqTWF0aC5QSSoyLGk9TWF0aC5zaW4oZSksbz0tTWF0aC5jb3MoZSk7cy54PW8qYy54K2kqZC54LHMueT1vKmMueStpKmQueSxzLno9bypjLnoraSpkLnoscy5ub3JtYWxpemUoKSxoLnB1c2gocy54LHMueSxzLnopLGEueD1sLngrbipzLngsYS55PWwueStuKnMueSxhLno9bC56K24qcy56LHUucHVzaChhLngsYS55LGEueil9fSFmdW5jdGlvbigpe2ZvcihsZXQgdD0wO3Q8ZTt0KyspZih0KTtmKCExPT09aT9lOjApLGZ1bmN0aW9uKCl7Zm9yKGxldCB0PTA7dDw9ZTt0KyspZm9yKGxldCBuPTA7bjw9cjtuKyspYy54PXQvZSxjLnk9bi9yLGQucHVzaChjLngsYy55KX0oKSxmdW5jdGlvbigpe2ZvcihsZXQgdD0xO3Q8PWU7dCsrKWZvcihsZXQgZT0xO2U8PXI7ZSsrKXtjb25zdCBuPShyKzEpKih0LTEpKyhlLTEpLGk9KHIrMSkqdCsoZS0xKSxvPShyKzEpKnQrZSxhPShyKzEpKih0LTEpK2U7cC5wdXNoKG4saSxhKSxwLnB1c2goaSxvLGEpfX0oKX0oKSx0aGlzLnNldEluZGV4KHApLHRoaXMuc2V0QXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgTmkodSwzKSksdGhpcy5zZXRBdHRyaWJ1dGUoXCJub3JtYWxcIixuZXcgTmkoaCwzKSksdGhpcy5zZXRBdHRyaWJ1dGUoXCJ1dlwiLG5ldyBOaShkLDIpKX10b0pTT04oKXtjb25zdCB0PXFpLnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzKTtyZXR1cm4gdC5wYXRoPXRoaXMucGFyYW1ldGVycy5wYXRoLnRvSlNPTigpLHR9fWNsYXNzIGN1IGV4dGVuZHMgamN7Y29uc3RydWN0b3IodCxlLG4scixpLG8pe3N1cGVyKCksdGhpcy50eXBlPVwiVHViZUdlb21ldHJ5XCIsdGhpcy5wYXJhbWV0ZXJzPXtwYXRoOnQsdHVidWxhclNlZ21lbnRzOmUscmFkaXVzOm4scmFkaWFsU2VnbWVudHM6cixjbG9zZWQ6aX0sdm9pZCAwIT09byYmY29uc29sZS53YXJuKFwiVEhSRUUuVHViZUdlb21ldHJ5OiB0YXBlciBoYXMgYmVlbiByZW1vdmVkLlwiKTtjb25zdCBhPW5ldyBzdSh0LGUsbixyLGkpO3RoaXMudGFuZ2VudHM9YS50YW5nZW50cyx0aGlzLm5vcm1hbHM9YS5ub3JtYWxzLHRoaXMuYmlub3JtYWxzPWEuYmlub3JtYWxzLHRoaXMuZnJvbUJ1ZmZlckdlb21ldHJ5KGEpLHRoaXMubWVyZ2VWZXJ0aWNlcygpfX1jbGFzcyBsdSBleHRlbmRzIHFpe2NvbnN0cnVjdG9yKHQpe3N1cGVyKCksdGhpcy50eXBlPVwiV2lyZWZyYW1lR2VvbWV0cnlcIjtjb25zdCBlPVtdLG49WzAsMF0scj17fSxpPVtcImFcIixcImJcIixcImNcIl07aWYodCYmdC5pc0dlb21ldHJ5KXtjb25zdCBvPXQuZmFjZXM7Zm9yKGxldCB0PTAsZT1vLmxlbmd0aDt0PGU7dCsrKXtjb25zdCBlPW9bdF07Zm9yKGxldCB0PTA7dDwzO3QrKyl7Y29uc3Qgbz1lW2lbdF1dLGE9ZVtpWyh0KzEpJTNdXTtuWzBdPU1hdGgubWluKG8sYSksblsxXT1NYXRoLm1heChvLGEpO2NvbnN0IHM9blswXStcIixcIituWzFdO3ZvaWQgMD09PXJbc10mJihyW3NdPXtpbmRleDE6blswXSxpbmRleDI6blsxXX0pfX1mb3IoY29uc3QgbiBpbiByKXtjb25zdCBpPXJbbl07bGV0IG89dC52ZXJ0aWNlc1tpLmluZGV4MV07ZS5wdXNoKG8ueCxvLnksby56KSxvPXQudmVydGljZXNbaS5pbmRleDJdLGUucHVzaChvLngsby55LG8ueil9fWVsc2UgaWYodCYmdC5pc0J1ZmZlckdlb21ldHJ5KXtjb25zdCBpPW5ldyBLbjtpZihudWxsIT09dC5pbmRleCl7Y29uc3Qgbz10LmF0dHJpYnV0ZXMucG9zaXRpb24sYT10LmluZGV4O2xldCBzPXQuZ3JvdXBzOzA9PT1zLmxlbmd0aCYmKHM9W3tzdGFydDowLGNvdW50OmEuY291bnQsbWF0ZXJpYWxJbmRleDowfV0pO2ZvcihsZXQgdD0wLGU9cy5sZW5ndGg7dDxlOysrdCl7Y29uc3QgZT1zW3RdLGk9ZS5zdGFydDtmb3IobGV0IHQ9aSxvPWkrZS5jb3VudDt0PG87dCs9Mylmb3IobGV0IGU9MDtlPDM7ZSsrKXtjb25zdCBpPWEuZ2V0WCh0K2UpLG89YS5nZXRYKHQrKGUrMSklMyk7blswXT1NYXRoLm1pbihpLG8pLG5bMV09TWF0aC5tYXgoaSxvKTtjb25zdCBzPW5bMF0rXCIsXCIrblsxXTt2b2lkIDA9PT1yW3NdJiYocltzXT17aW5kZXgxOm5bMF0saW5kZXgyOm5bMV19KX19Zm9yKGNvbnN0IHQgaW4gcil7Y29uc3Qgbj1yW3RdO2kuZnJvbUJ1ZmZlckF0dHJpYnV0ZShvLG4uaW5kZXgxKSxlLnB1c2goaS54LGkueSxpLnopLGkuZnJvbUJ1ZmZlckF0dHJpYnV0ZShvLG4uaW5kZXgyKSxlLnB1c2goaS54LGkueSxpLnopfX1lbHNle2NvbnN0IG49dC5hdHRyaWJ1dGVzLnBvc2l0aW9uO2ZvcihsZXQgdD0wLHI9bi5jb3VudC8zO3Q8cjt0KyspZm9yKGxldCByPTA7cjwzO3IrKyl7Y29uc3Qgbz0zKnQrcjtpLmZyb21CdWZmZXJBdHRyaWJ1dGUobixvKSxlLnB1c2goaS54LGkueSxpLnopO2NvbnN0IGE9Myp0KyhyKzEpJTM7aS5mcm9tQnVmZmVyQXR0cmlidXRlKG4sYSksZS5wdXNoKGkueCxpLnksaS56KX19fXRoaXMuc2V0QXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgTmkoZSwzKSl9fXZhciB1dT1PYmplY3QuZnJlZXplKHtfX3Byb3RvX186bnVsbCxCb3hHZW9tZXRyeTpXYyxCb3hCdWZmZXJHZW9tZXRyeTptbyxDaXJjbGVHZW9tZXRyeTpxYyxDaXJjbGVCdWZmZXJHZW9tZXRyeTpYYyxDb25lR2VvbWV0cnk6SmMsQ29uZUJ1ZmZlckdlb21ldHJ5OktjLEN5bGluZGVyR2VvbWV0cnk6WmMsQ3lsaW5kZXJCdWZmZXJHZW9tZXRyeTpZYyxEb2RlY2FoZWRyb25HZW9tZXRyeTp0bCxEb2RlY2FoZWRyb25CdWZmZXJHZW9tZXRyeTokYyxFZGdlc0dlb21ldHJ5Om9sLEV4dHJ1ZGVHZW9tZXRyeTpCbCxFeHRydWRlQnVmZmVyR2VvbWV0cnk6TmwsSWNvc2FoZWRyb25HZW9tZXRyeTpVbCxJY29zYWhlZHJvbkJ1ZmZlckdlb21ldHJ5OkZsLExhdGhlR2VvbWV0cnk6R2wsTGF0aGVCdWZmZXJHZW9tZXRyeTp6bCxPY3RhaGVkcm9uR2VvbWV0cnk6a2wsT2N0YWhlZHJvbkJ1ZmZlckdlb21ldHJ5OkhsLFBhcmFtZXRyaWNHZW9tZXRyeTpqbCxQYXJhbWV0cmljQnVmZmVyR2VvbWV0cnk6VmwsUGxhbmVHZW9tZXRyeTpXbCxQbGFuZUJ1ZmZlckdlb21ldHJ5OkNvLFBvbHloZWRyb25HZW9tZXRyeTpYbCxQb2x5aGVkcm9uQnVmZmVyR2VvbWV0cnk6UWMsUmluZ0dlb21ldHJ5OllsLFJpbmdCdWZmZXJHZW9tZXRyeTpxbCxTaGFwZUdlb21ldHJ5OkpsLFNoYXBlQnVmZmVyR2VvbWV0cnk6WmwsU3BoZXJlR2VvbWV0cnk6UWwsU3BoZXJlQnVmZmVyR2VvbWV0cnk6S2wsVGV0cmFoZWRyb25HZW9tZXRyeTp0dSxUZXRyYWhlZHJvbkJ1ZmZlckdlb21ldHJ5OiRsLFRleHRHZW9tZXRyeTpudSxUZXh0QnVmZmVyR2VvbWV0cnk6ZXUsVG9ydXNHZW9tZXRyeTppdSxUb3J1c0J1ZmZlckdlb21ldHJ5OnJ1LFRvcnVzS25vdEdlb21ldHJ5OmF1LFRvcnVzS25vdEJ1ZmZlckdlb21ldHJ5Om91LFR1YmVHZW9tZXRyeTpjdSxUdWJlQnVmZmVyR2VvbWV0cnk6c3UsV2lyZWZyYW1lR2VvbWV0cnk6bHV9KTtmdW5jdGlvbiBodSh0KXt3aS5jYWxsKHRoaXMpLHRoaXMudHlwZT1cIlNoYWRvd01hdGVyaWFsXCIsdGhpcy5jb2xvcj1uZXcgeWkoMCksdGhpcy50cmFuc3BhcmVudD0hMCx0aGlzLnNldFZhbHVlcyh0KX1mdW5jdGlvbiBkdSh0KXt4by5jYWxsKHRoaXMsdCksdGhpcy50eXBlPVwiUmF3U2hhZGVyTWF0ZXJpYWxcIn1mdW5jdGlvbiBwdSh0KXt3aS5jYWxsKHRoaXMpLHRoaXMuZGVmaW5lcz17U1RBTkRBUkQ6XCJcIn0sdGhpcy50eXBlPVwiTWVzaFN0YW5kYXJkTWF0ZXJpYWxcIix0aGlzLmNvbG9yPW5ldyB5aSgxNjc3NzIxNSksdGhpcy5yb3VnaG5lc3M9MSx0aGlzLm1ldGFsbmVzcz0wLHRoaXMubWFwPW51bGwsdGhpcy5saWdodE1hcD1udWxsLHRoaXMubGlnaHRNYXBJbnRlbnNpdHk9MSx0aGlzLmFvTWFwPW51bGwsdGhpcy5hb01hcEludGVuc2l0eT0xLHRoaXMuZW1pc3NpdmU9bmV3IHlpKDApLHRoaXMuZW1pc3NpdmVJbnRlbnNpdHk9MSx0aGlzLmVtaXNzaXZlTWFwPW51bGwsdGhpcy5idW1wTWFwPW51bGwsdGhpcy5idW1wU2NhbGU9MSx0aGlzLm5vcm1hbE1hcD1udWxsLHRoaXMubm9ybWFsTWFwVHlwZT1zbix0aGlzLm5vcm1hbFNjYWxlPW5ldyBHbigxLDEpLHRoaXMuZGlzcGxhY2VtZW50TWFwPW51bGwsdGhpcy5kaXNwbGFjZW1lbnRTY2FsZT0xLHRoaXMuZGlzcGxhY2VtZW50Qmlhcz0wLHRoaXMucm91Z2huZXNzTWFwPW51bGwsdGhpcy5tZXRhbG5lc3NNYXA9bnVsbCx0aGlzLmFscGhhTWFwPW51bGwsdGhpcy5lbnZNYXA9bnVsbCx0aGlzLmVudk1hcEludGVuc2l0eT0xLHRoaXMucmVmcmFjdGlvblJhdGlvPS45OCx0aGlzLndpcmVmcmFtZT0hMSx0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD0xLHRoaXMud2lyZWZyYW1lTGluZWNhcD1cInJvdW5kXCIsdGhpcy53aXJlZnJhbWVMaW5lam9pbj1cInJvdW5kXCIsdGhpcy5za2lubmluZz0hMSx0aGlzLm1vcnBoVGFyZ2V0cz0hMSx0aGlzLm1vcnBoTm9ybWFscz0hMSx0aGlzLnZlcnRleFRhbmdlbnRzPSExLHRoaXMuc2V0VmFsdWVzKHQpfWZ1bmN0aW9uIGZ1KHQpe3B1LmNhbGwodGhpcyksdGhpcy5kZWZpbmVzPXtTVEFOREFSRDpcIlwiLFBIWVNJQ0FMOlwiXCJ9LHRoaXMudHlwZT1cIk1lc2hQaHlzaWNhbE1hdGVyaWFsXCIsdGhpcy5jbGVhcmNvYXQ9MCx0aGlzLmNsZWFyY29hdE1hcD1udWxsLHRoaXMuY2xlYXJjb2F0Um91Z2huZXNzPTAsdGhpcy5jbGVhcmNvYXRSb3VnaG5lc3NNYXA9bnVsbCx0aGlzLmNsZWFyY29hdE5vcm1hbFNjYWxlPW5ldyBHbigxLDEpLHRoaXMuY2xlYXJjb2F0Tm9ybWFsTWFwPW51bGwsdGhpcy5yZWZsZWN0aXZpdHk9LjUsT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJpb3JcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuKDErLjQqdGhpcy5yZWZsZWN0aXZpdHkpLygxLS40KnRoaXMucmVmbGVjdGl2aXR5KX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMucmVmbGVjdGl2aXR5PXpuLmNsYW1wKDIuNSoodC0xKS8odCsxKSwwLDEpfX0pLHRoaXMuc2hlZW49bnVsbCx0aGlzLnRyYW5zbWlzc2lvbj0wLHRoaXMudHJhbnNtaXNzaW9uTWFwPW51bGwsdGhpcy5zZXRWYWx1ZXModCl9ZnVuY3Rpb24gbXUodCl7d2kuY2FsbCh0aGlzKSx0aGlzLnR5cGU9XCJNZXNoUGhvbmdNYXRlcmlhbFwiLHRoaXMuY29sb3I9bmV3IHlpKDE2Nzc3MjE1KSx0aGlzLnNwZWN1bGFyPW5ldyB5aSgxMTE4NDgxKSx0aGlzLnNoaW5pbmVzcz0zMCx0aGlzLm1hcD1udWxsLHRoaXMubGlnaHRNYXA9bnVsbCx0aGlzLmxpZ2h0TWFwSW50ZW5zaXR5PTEsdGhpcy5hb01hcD1udWxsLHRoaXMuYW9NYXBJbnRlbnNpdHk9MSx0aGlzLmVtaXNzaXZlPW5ldyB5aSgwKSx0aGlzLmVtaXNzaXZlSW50ZW5zaXR5PTEsdGhpcy5lbWlzc2l2ZU1hcD1udWxsLHRoaXMuYnVtcE1hcD1udWxsLHRoaXMuYnVtcFNjYWxlPTEsdGhpcy5ub3JtYWxNYXA9bnVsbCx0aGlzLm5vcm1hbE1hcFR5cGU9c24sdGhpcy5ub3JtYWxTY2FsZT1uZXcgR24oMSwxKSx0aGlzLmRpc3BsYWNlbWVudE1hcD1udWxsLHRoaXMuZGlzcGxhY2VtZW50U2NhbGU9MSx0aGlzLmRpc3BsYWNlbWVudEJpYXM9MCx0aGlzLnNwZWN1bGFyTWFwPW51bGwsdGhpcy5hbHBoYU1hcD1udWxsLHRoaXMuZW52TWFwPW51bGwsdGhpcy5jb21iaW5lPVosdGhpcy5yZWZsZWN0aXZpdHk9MSx0aGlzLnJlZnJhY3Rpb25SYXRpbz0uOTgsdGhpcy53aXJlZnJhbWU9ITEsdGhpcy53aXJlZnJhbWVMaW5ld2lkdGg9MSx0aGlzLndpcmVmcmFtZUxpbmVjYXA9XCJyb3VuZFwiLHRoaXMud2lyZWZyYW1lTGluZWpvaW49XCJyb3VuZFwiLHRoaXMuc2tpbm5pbmc9ITEsdGhpcy5tb3JwaFRhcmdldHM9ITEsdGhpcy5tb3JwaE5vcm1hbHM9ITEsdGhpcy5zZXRWYWx1ZXModCl9ZnVuY3Rpb24gZ3UodCl7d2kuY2FsbCh0aGlzKSx0aGlzLmRlZmluZXM9e1RPT046XCJcIn0sdGhpcy50eXBlPVwiTWVzaFRvb25NYXRlcmlhbFwiLHRoaXMuY29sb3I9bmV3IHlpKDE2Nzc3MjE1KSx0aGlzLm1hcD1udWxsLHRoaXMuZ3JhZGllbnRNYXA9bnVsbCx0aGlzLmxpZ2h0TWFwPW51bGwsdGhpcy5saWdodE1hcEludGVuc2l0eT0xLHRoaXMuYW9NYXA9bnVsbCx0aGlzLmFvTWFwSW50ZW5zaXR5PTEsdGhpcy5lbWlzc2l2ZT1uZXcgeWkoMCksdGhpcy5lbWlzc2l2ZUludGVuc2l0eT0xLHRoaXMuZW1pc3NpdmVNYXA9bnVsbCx0aGlzLmJ1bXBNYXA9bnVsbCx0aGlzLmJ1bXBTY2FsZT0xLHRoaXMubm9ybWFsTWFwPW51bGwsdGhpcy5ub3JtYWxNYXBUeXBlPXNuLHRoaXMubm9ybWFsU2NhbGU9bmV3IEduKDEsMSksdGhpcy5kaXNwbGFjZW1lbnRNYXA9bnVsbCx0aGlzLmRpc3BsYWNlbWVudFNjYWxlPTEsdGhpcy5kaXNwbGFjZW1lbnRCaWFzPTAsdGhpcy5hbHBoYU1hcD1udWxsLHRoaXMud2lyZWZyYW1lPSExLHRoaXMud2lyZWZyYW1lTGluZXdpZHRoPTEsdGhpcy53aXJlZnJhbWVMaW5lY2FwPVwicm91bmRcIix0aGlzLndpcmVmcmFtZUxpbmVqb2luPVwicm91bmRcIix0aGlzLnNraW5uaW5nPSExLHRoaXMubW9ycGhUYXJnZXRzPSExLHRoaXMubW9ycGhOb3JtYWxzPSExLHRoaXMuc2V0VmFsdWVzKHQpfWZ1bmN0aW9uIHZ1KHQpe3dpLmNhbGwodGhpcyksdGhpcy50eXBlPVwiTWVzaE5vcm1hbE1hdGVyaWFsXCIsdGhpcy5idW1wTWFwPW51bGwsdGhpcy5idW1wU2NhbGU9MSx0aGlzLm5vcm1hbE1hcD1udWxsLHRoaXMubm9ybWFsTWFwVHlwZT1zbix0aGlzLm5vcm1hbFNjYWxlPW5ldyBHbigxLDEpLHRoaXMuZGlzcGxhY2VtZW50TWFwPW51bGwsdGhpcy5kaXNwbGFjZW1lbnRTY2FsZT0xLHRoaXMuZGlzcGxhY2VtZW50Qmlhcz0wLHRoaXMud2lyZWZyYW1lPSExLHRoaXMud2lyZWZyYW1lTGluZXdpZHRoPTEsdGhpcy5mb2c9ITEsdGhpcy5za2lubmluZz0hMSx0aGlzLm1vcnBoVGFyZ2V0cz0hMSx0aGlzLm1vcnBoTm9ybWFscz0hMSx0aGlzLnNldFZhbHVlcyh0KX1mdW5jdGlvbiB5dSh0KXt3aS5jYWxsKHRoaXMpLHRoaXMudHlwZT1cIk1lc2hMYW1iZXJ0TWF0ZXJpYWxcIix0aGlzLmNvbG9yPW5ldyB5aSgxNjc3NzIxNSksdGhpcy5tYXA9bnVsbCx0aGlzLmxpZ2h0TWFwPW51bGwsdGhpcy5saWdodE1hcEludGVuc2l0eT0xLHRoaXMuYW9NYXA9bnVsbCx0aGlzLmFvTWFwSW50ZW5zaXR5PTEsdGhpcy5lbWlzc2l2ZT1uZXcgeWkoMCksdGhpcy5lbWlzc2l2ZUludGVuc2l0eT0xLHRoaXMuZW1pc3NpdmVNYXA9bnVsbCx0aGlzLnNwZWN1bGFyTWFwPW51bGwsdGhpcy5hbHBoYU1hcD1udWxsLHRoaXMuZW52TWFwPW51bGwsdGhpcy5jb21iaW5lPVosdGhpcy5yZWZsZWN0aXZpdHk9MSx0aGlzLnJlZnJhY3Rpb25SYXRpbz0uOTgsdGhpcy53aXJlZnJhbWU9ITEsdGhpcy53aXJlZnJhbWVMaW5ld2lkdGg9MSx0aGlzLndpcmVmcmFtZUxpbmVjYXA9XCJyb3VuZFwiLHRoaXMud2lyZWZyYW1lTGluZWpvaW49XCJyb3VuZFwiLHRoaXMuc2tpbm5pbmc9ITEsdGhpcy5tb3JwaFRhcmdldHM9ITEsdGhpcy5tb3JwaE5vcm1hbHM9ITEsdGhpcy5zZXRWYWx1ZXModCl9ZnVuY3Rpb24geHUodCl7d2kuY2FsbCh0aGlzKSx0aGlzLmRlZmluZXM9e01BVENBUDpcIlwifSx0aGlzLnR5cGU9XCJNZXNoTWF0Y2FwTWF0ZXJpYWxcIix0aGlzLmNvbG9yPW5ldyB5aSgxNjc3NzIxNSksdGhpcy5tYXRjYXA9bnVsbCx0aGlzLm1hcD1udWxsLHRoaXMuYnVtcE1hcD1udWxsLHRoaXMuYnVtcFNjYWxlPTEsdGhpcy5ub3JtYWxNYXA9bnVsbCx0aGlzLm5vcm1hbE1hcFR5cGU9c24sdGhpcy5ub3JtYWxTY2FsZT1uZXcgR24oMSwxKSx0aGlzLmRpc3BsYWNlbWVudE1hcD1udWxsLHRoaXMuZGlzcGxhY2VtZW50U2NhbGU9MSx0aGlzLmRpc3BsYWNlbWVudEJpYXM9MCx0aGlzLmFscGhhTWFwPW51bGwsdGhpcy5za2lubmluZz0hMSx0aGlzLm1vcnBoVGFyZ2V0cz0hMSx0aGlzLm1vcnBoTm9ybWFscz0hMSx0aGlzLnNldFZhbHVlcyh0KX1mdW5jdGlvbiBidSh0KXt5Yy5jYWxsKHRoaXMpLHRoaXMudHlwZT1cIkxpbmVEYXNoZWRNYXRlcmlhbFwiLHRoaXMuc2NhbGU9MSx0aGlzLmRhc2hTaXplPTMsdGhpcy5nYXBTaXplPTEsdGhpcy5zZXRWYWx1ZXModCl9aHUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUod2kucHJvdG90eXBlKSxodS5wcm90b3R5cGUuY29uc3RydWN0b3I9aHUsaHUucHJvdG90eXBlLmlzU2hhZG93TWF0ZXJpYWw9ITAsaHUucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24odCl7cmV0dXJuIHdpLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyx0KSx0aGlzLmNvbG9yLmNvcHkodC5jb2xvciksdGhpc30sZHUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoeG8ucHJvdG90eXBlKSxkdS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZHUsZHUucHJvdG90eXBlLmlzUmF3U2hhZGVyTWF0ZXJpYWw9ITAscHUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUod2kucHJvdG90eXBlKSxwdS5wcm90b3R5cGUuY29uc3RydWN0b3I9cHUscHUucHJvdG90eXBlLmlzTWVzaFN0YW5kYXJkTWF0ZXJpYWw9ITAscHUucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24odCl7cmV0dXJuIHdpLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyx0KSx0aGlzLmRlZmluZXM9e1NUQU5EQVJEOlwiXCJ9LHRoaXMuY29sb3IuY29weSh0LmNvbG9yKSx0aGlzLnJvdWdobmVzcz10LnJvdWdobmVzcyx0aGlzLm1ldGFsbmVzcz10Lm1ldGFsbmVzcyx0aGlzLm1hcD10Lm1hcCx0aGlzLmxpZ2h0TWFwPXQubGlnaHRNYXAsdGhpcy5saWdodE1hcEludGVuc2l0eT10LmxpZ2h0TWFwSW50ZW5zaXR5LHRoaXMuYW9NYXA9dC5hb01hcCx0aGlzLmFvTWFwSW50ZW5zaXR5PXQuYW9NYXBJbnRlbnNpdHksdGhpcy5lbWlzc2l2ZS5jb3B5KHQuZW1pc3NpdmUpLHRoaXMuZW1pc3NpdmVNYXA9dC5lbWlzc2l2ZU1hcCx0aGlzLmVtaXNzaXZlSW50ZW5zaXR5PXQuZW1pc3NpdmVJbnRlbnNpdHksdGhpcy5idW1wTWFwPXQuYnVtcE1hcCx0aGlzLmJ1bXBTY2FsZT10LmJ1bXBTY2FsZSx0aGlzLm5vcm1hbE1hcD10Lm5vcm1hbE1hcCx0aGlzLm5vcm1hbE1hcFR5cGU9dC5ub3JtYWxNYXBUeXBlLHRoaXMubm9ybWFsU2NhbGUuY29weSh0Lm5vcm1hbFNjYWxlKSx0aGlzLmRpc3BsYWNlbWVudE1hcD10LmRpc3BsYWNlbWVudE1hcCx0aGlzLmRpc3BsYWNlbWVudFNjYWxlPXQuZGlzcGxhY2VtZW50U2NhbGUsdGhpcy5kaXNwbGFjZW1lbnRCaWFzPXQuZGlzcGxhY2VtZW50Qmlhcyx0aGlzLnJvdWdobmVzc01hcD10LnJvdWdobmVzc01hcCx0aGlzLm1ldGFsbmVzc01hcD10Lm1ldGFsbmVzc01hcCx0aGlzLmFscGhhTWFwPXQuYWxwaGFNYXAsdGhpcy5lbnZNYXA9dC5lbnZNYXAsdGhpcy5lbnZNYXBJbnRlbnNpdHk9dC5lbnZNYXBJbnRlbnNpdHksdGhpcy5yZWZyYWN0aW9uUmF0aW89dC5yZWZyYWN0aW9uUmF0aW8sdGhpcy53aXJlZnJhbWU9dC53aXJlZnJhbWUsdGhpcy53aXJlZnJhbWVMaW5ld2lkdGg9dC53aXJlZnJhbWVMaW5ld2lkdGgsdGhpcy53aXJlZnJhbWVMaW5lY2FwPXQud2lyZWZyYW1lTGluZWNhcCx0aGlzLndpcmVmcmFtZUxpbmVqb2luPXQud2lyZWZyYW1lTGluZWpvaW4sdGhpcy5za2lubmluZz10LnNraW5uaW5nLHRoaXMubW9ycGhUYXJnZXRzPXQubW9ycGhUYXJnZXRzLHRoaXMubW9ycGhOb3JtYWxzPXQubW9ycGhOb3JtYWxzLHRoaXMudmVydGV4VGFuZ2VudHM9dC52ZXJ0ZXhUYW5nZW50cyx0aGlzfSxmdS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShwdS5wcm90b3R5cGUpLGZ1LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1mdSxmdS5wcm90b3R5cGUuaXNNZXNoUGh5c2ljYWxNYXRlcmlhbD0hMCxmdS5wcm90b3R5cGUuY29weT1mdW5jdGlvbih0KXtyZXR1cm4gcHUucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLHQpLHRoaXMuZGVmaW5lcz17U1RBTkRBUkQ6XCJcIixQSFlTSUNBTDpcIlwifSx0aGlzLmNsZWFyY29hdD10LmNsZWFyY29hdCx0aGlzLmNsZWFyY29hdE1hcD10LmNsZWFyY29hdE1hcCx0aGlzLmNsZWFyY29hdFJvdWdobmVzcz10LmNsZWFyY29hdFJvdWdobmVzcyx0aGlzLmNsZWFyY29hdFJvdWdobmVzc01hcD10LmNsZWFyY29hdFJvdWdobmVzc01hcCx0aGlzLmNsZWFyY29hdE5vcm1hbE1hcD10LmNsZWFyY29hdE5vcm1hbE1hcCx0aGlzLmNsZWFyY29hdE5vcm1hbFNjYWxlLmNvcHkodC5jbGVhcmNvYXROb3JtYWxTY2FsZSksdGhpcy5yZWZsZWN0aXZpdHk9dC5yZWZsZWN0aXZpdHksdC5zaGVlbj90aGlzLnNoZWVuPSh0aGlzLnNoZWVufHxuZXcgeWkpLmNvcHkodC5zaGVlbik6dGhpcy5zaGVlbj1udWxsLHRoaXMudHJhbnNtaXNzaW9uPXQudHJhbnNtaXNzaW9uLHRoaXMudHJhbnNtaXNzaW9uTWFwPXQudHJhbnNtaXNzaW9uTWFwLHRoaXN9LG11LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHdpLnByb3RvdHlwZSksbXUucHJvdG90eXBlLmNvbnN0cnVjdG9yPW11LG11LnByb3RvdHlwZS5pc01lc2hQaG9uZ01hdGVyaWFsPSEwLG11LnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKHQpe3JldHVybiB3aS5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsdCksdGhpcy5jb2xvci5jb3B5KHQuY29sb3IpLHRoaXMuc3BlY3VsYXIuY29weSh0LnNwZWN1bGFyKSx0aGlzLnNoaW5pbmVzcz10LnNoaW5pbmVzcyx0aGlzLm1hcD10Lm1hcCx0aGlzLmxpZ2h0TWFwPXQubGlnaHRNYXAsdGhpcy5saWdodE1hcEludGVuc2l0eT10LmxpZ2h0TWFwSW50ZW5zaXR5LHRoaXMuYW9NYXA9dC5hb01hcCx0aGlzLmFvTWFwSW50ZW5zaXR5PXQuYW9NYXBJbnRlbnNpdHksdGhpcy5lbWlzc2l2ZS5jb3B5KHQuZW1pc3NpdmUpLHRoaXMuZW1pc3NpdmVNYXA9dC5lbWlzc2l2ZU1hcCx0aGlzLmVtaXNzaXZlSW50ZW5zaXR5PXQuZW1pc3NpdmVJbnRlbnNpdHksdGhpcy5idW1wTWFwPXQuYnVtcE1hcCx0aGlzLmJ1bXBTY2FsZT10LmJ1bXBTY2FsZSx0aGlzLm5vcm1hbE1hcD10Lm5vcm1hbE1hcCx0aGlzLm5vcm1hbE1hcFR5cGU9dC5ub3JtYWxNYXBUeXBlLHRoaXMubm9ybWFsU2NhbGUuY29weSh0Lm5vcm1hbFNjYWxlKSx0aGlzLmRpc3BsYWNlbWVudE1hcD10LmRpc3BsYWNlbWVudE1hcCx0aGlzLmRpc3BsYWNlbWVudFNjYWxlPXQuZGlzcGxhY2VtZW50U2NhbGUsdGhpcy5kaXNwbGFjZW1lbnRCaWFzPXQuZGlzcGxhY2VtZW50Qmlhcyx0aGlzLnNwZWN1bGFyTWFwPXQuc3BlY3VsYXJNYXAsdGhpcy5hbHBoYU1hcD10LmFscGhhTWFwLHRoaXMuZW52TWFwPXQuZW52TWFwLHRoaXMuY29tYmluZT10LmNvbWJpbmUsdGhpcy5yZWZsZWN0aXZpdHk9dC5yZWZsZWN0aXZpdHksdGhpcy5yZWZyYWN0aW9uUmF0aW89dC5yZWZyYWN0aW9uUmF0aW8sdGhpcy53aXJlZnJhbWU9dC53aXJlZnJhbWUsdGhpcy53aXJlZnJhbWVMaW5ld2lkdGg9dC53aXJlZnJhbWVMaW5ld2lkdGgsdGhpcy53aXJlZnJhbWVMaW5lY2FwPXQud2lyZWZyYW1lTGluZWNhcCx0aGlzLndpcmVmcmFtZUxpbmVqb2luPXQud2lyZWZyYW1lTGluZWpvaW4sdGhpcy5za2lubmluZz10LnNraW5uaW5nLHRoaXMubW9ycGhUYXJnZXRzPXQubW9ycGhUYXJnZXRzLHRoaXMubW9ycGhOb3JtYWxzPXQubW9ycGhOb3JtYWxzLHRoaXN9LGd1LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHdpLnByb3RvdHlwZSksZ3UucHJvdG90eXBlLmNvbnN0cnVjdG9yPWd1LGd1LnByb3RvdHlwZS5pc01lc2hUb29uTWF0ZXJpYWw9ITAsZ3UucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24odCl7cmV0dXJuIHdpLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyx0KSx0aGlzLmNvbG9yLmNvcHkodC5jb2xvciksdGhpcy5tYXA9dC5tYXAsdGhpcy5ncmFkaWVudE1hcD10LmdyYWRpZW50TWFwLHRoaXMubGlnaHRNYXA9dC5saWdodE1hcCx0aGlzLmxpZ2h0TWFwSW50ZW5zaXR5PXQubGlnaHRNYXBJbnRlbnNpdHksdGhpcy5hb01hcD10LmFvTWFwLHRoaXMuYW9NYXBJbnRlbnNpdHk9dC5hb01hcEludGVuc2l0eSx0aGlzLmVtaXNzaXZlLmNvcHkodC5lbWlzc2l2ZSksdGhpcy5lbWlzc2l2ZU1hcD10LmVtaXNzaXZlTWFwLHRoaXMuZW1pc3NpdmVJbnRlbnNpdHk9dC5lbWlzc2l2ZUludGVuc2l0eSx0aGlzLmJ1bXBNYXA9dC5idW1wTWFwLHRoaXMuYnVtcFNjYWxlPXQuYnVtcFNjYWxlLHRoaXMubm9ybWFsTWFwPXQubm9ybWFsTWFwLHRoaXMubm9ybWFsTWFwVHlwZT10Lm5vcm1hbE1hcFR5cGUsdGhpcy5ub3JtYWxTY2FsZS5jb3B5KHQubm9ybWFsU2NhbGUpLHRoaXMuZGlzcGxhY2VtZW50TWFwPXQuZGlzcGxhY2VtZW50TWFwLHRoaXMuZGlzcGxhY2VtZW50U2NhbGU9dC5kaXNwbGFjZW1lbnRTY2FsZSx0aGlzLmRpc3BsYWNlbWVudEJpYXM9dC5kaXNwbGFjZW1lbnRCaWFzLHRoaXMuYWxwaGFNYXA9dC5hbHBoYU1hcCx0aGlzLndpcmVmcmFtZT10LndpcmVmcmFtZSx0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD10LndpcmVmcmFtZUxpbmV3aWR0aCx0aGlzLndpcmVmcmFtZUxpbmVjYXA9dC53aXJlZnJhbWVMaW5lY2FwLHRoaXMud2lyZWZyYW1lTGluZWpvaW49dC53aXJlZnJhbWVMaW5lam9pbix0aGlzLnNraW5uaW5nPXQuc2tpbm5pbmcsdGhpcy5tb3JwaFRhcmdldHM9dC5tb3JwaFRhcmdldHMsdGhpcy5tb3JwaE5vcm1hbHM9dC5tb3JwaE5vcm1hbHMsdGhpc30sdnUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUod2kucHJvdG90eXBlKSx2dS5wcm90b3R5cGUuY29uc3RydWN0b3I9dnUsdnUucHJvdG90eXBlLmlzTWVzaE5vcm1hbE1hdGVyaWFsPSEwLHZ1LnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKHQpe3JldHVybiB3aS5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsdCksdGhpcy5idW1wTWFwPXQuYnVtcE1hcCx0aGlzLmJ1bXBTY2FsZT10LmJ1bXBTY2FsZSx0aGlzLm5vcm1hbE1hcD10Lm5vcm1hbE1hcCx0aGlzLm5vcm1hbE1hcFR5cGU9dC5ub3JtYWxNYXBUeXBlLHRoaXMubm9ybWFsU2NhbGUuY29weSh0Lm5vcm1hbFNjYWxlKSx0aGlzLmRpc3BsYWNlbWVudE1hcD10LmRpc3BsYWNlbWVudE1hcCx0aGlzLmRpc3BsYWNlbWVudFNjYWxlPXQuZGlzcGxhY2VtZW50U2NhbGUsdGhpcy5kaXNwbGFjZW1lbnRCaWFzPXQuZGlzcGxhY2VtZW50Qmlhcyx0aGlzLndpcmVmcmFtZT10LndpcmVmcmFtZSx0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD10LndpcmVmcmFtZUxpbmV3aWR0aCx0aGlzLnNraW5uaW5nPXQuc2tpbm5pbmcsdGhpcy5tb3JwaFRhcmdldHM9dC5tb3JwaFRhcmdldHMsdGhpcy5tb3JwaE5vcm1hbHM9dC5tb3JwaE5vcm1hbHMsdGhpc30seXUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUod2kucHJvdG90eXBlKSx5dS5wcm90b3R5cGUuY29uc3RydWN0b3I9eXUseXUucHJvdG90eXBlLmlzTWVzaExhbWJlcnRNYXRlcmlhbD0hMCx5dS5wcm90b3R5cGUuY29weT1mdW5jdGlvbih0KXtyZXR1cm4gd2kucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLHQpLHRoaXMuY29sb3IuY29weSh0LmNvbG9yKSx0aGlzLm1hcD10Lm1hcCx0aGlzLmxpZ2h0TWFwPXQubGlnaHRNYXAsdGhpcy5saWdodE1hcEludGVuc2l0eT10LmxpZ2h0TWFwSW50ZW5zaXR5LHRoaXMuYW9NYXA9dC5hb01hcCx0aGlzLmFvTWFwSW50ZW5zaXR5PXQuYW9NYXBJbnRlbnNpdHksdGhpcy5lbWlzc2l2ZS5jb3B5KHQuZW1pc3NpdmUpLHRoaXMuZW1pc3NpdmVNYXA9dC5lbWlzc2l2ZU1hcCx0aGlzLmVtaXNzaXZlSW50ZW5zaXR5PXQuZW1pc3NpdmVJbnRlbnNpdHksdGhpcy5zcGVjdWxhck1hcD10LnNwZWN1bGFyTWFwLHRoaXMuYWxwaGFNYXA9dC5hbHBoYU1hcCx0aGlzLmVudk1hcD10LmVudk1hcCx0aGlzLmNvbWJpbmU9dC5jb21iaW5lLHRoaXMucmVmbGVjdGl2aXR5PXQucmVmbGVjdGl2aXR5LHRoaXMucmVmcmFjdGlvblJhdGlvPXQucmVmcmFjdGlvblJhdGlvLHRoaXMud2lyZWZyYW1lPXQud2lyZWZyYW1lLHRoaXMud2lyZWZyYW1lTGluZXdpZHRoPXQud2lyZWZyYW1lTGluZXdpZHRoLHRoaXMud2lyZWZyYW1lTGluZWNhcD10LndpcmVmcmFtZUxpbmVjYXAsdGhpcy53aXJlZnJhbWVMaW5lam9pbj10LndpcmVmcmFtZUxpbmVqb2luLHRoaXMuc2tpbm5pbmc9dC5za2lubmluZyx0aGlzLm1vcnBoVGFyZ2V0cz10Lm1vcnBoVGFyZ2V0cyx0aGlzLm1vcnBoTm9ybWFscz10Lm1vcnBoTm9ybWFscyx0aGlzfSx4dS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh3aS5wcm90b3R5cGUpLHh1LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj14dSx4dS5wcm90b3R5cGUuaXNNZXNoTWF0Y2FwTWF0ZXJpYWw9ITAseHUucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24odCl7cmV0dXJuIHdpLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyx0KSx0aGlzLmRlZmluZXM9e01BVENBUDpcIlwifSx0aGlzLmNvbG9yLmNvcHkodC5jb2xvciksdGhpcy5tYXRjYXA9dC5tYXRjYXAsdGhpcy5tYXA9dC5tYXAsdGhpcy5idW1wTWFwPXQuYnVtcE1hcCx0aGlzLmJ1bXBTY2FsZT10LmJ1bXBTY2FsZSx0aGlzLm5vcm1hbE1hcD10Lm5vcm1hbE1hcCx0aGlzLm5vcm1hbE1hcFR5cGU9dC5ub3JtYWxNYXBUeXBlLHRoaXMubm9ybWFsU2NhbGUuY29weSh0Lm5vcm1hbFNjYWxlKSx0aGlzLmRpc3BsYWNlbWVudE1hcD10LmRpc3BsYWNlbWVudE1hcCx0aGlzLmRpc3BsYWNlbWVudFNjYWxlPXQuZGlzcGxhY2VtZW50U2NhbGUsdGhpcy5kaXNwbGFjZW1lbnRCaWFzPXQuZGlzcGxhY2VtZW50Qmlhcyx0aGlzLmFscGhhTWFwPXQuYWxwaGFNYXAsdGhpcy5za2lubmluZz10LnNraW5uaW5nLHRoaXMubW9ycGhUYXJnZXRzPXQubW9ycGhUYXJnZXRzLHRoaXMubW9ycGhOb3JtYWxzPXQubW9ycGhOb3JtYWxzLHRoaXN9LGJ1LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHljLnByb3RvdHlwZSksYnUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWJ1LGJ1LnByb3RvdHlwZS5pc0xpbmVEYXNoZWRNYXRlcmlhbD0hMCxidS5wcm90b3R5cGUuY29weT1mdW5jdGlvbih0KXtyZXR1cm4geWMucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLHQpLHRoaXMuc2NhbGU9dC5zY2FsZSx0aGlzLmRhc2hTaXplPXQuZGFzaFNpemUsdGhpcy5nYXBTaXplPXQuZ2FwU2l6ZSx0aGlzfTt2YXIgd3U9T2JqZWN0LmZyZWV6ZSh7X19wcm90b19fOm51bGwsU2hhZG93TWF0ZXJpYWw6aHUsU3ByaXRlTWF0ZXJpYWw6VnMsUmF3U2hhZGVyTWF0ZXJpYWw6ZHUsU2hhZGVyTWF0ZXJpYWw6eG8sUG9pbnRzTWF0ZXJpYWw6UmMsTWVzaFBoeXNpY2FsTWF0ZXJpYWw6ZnUsTWVzaFN0YW5kYXJkTWF0ZXJpYWw6cHUsTWVzaFBob25nTWF0ZXJpYWw6bXUsTWVzaFRvb25NYXRlcmlhbDpndSxNZXNoTm9ybWFsTWF0ZXJpYWw6dnUsTWVzaExhbWJlcnRNYXRlcmlhbDp5dSxNZXNoRGVwdGhNYXRlcmlhbDpTcyxNZXNoRGlzdGFuY2VNYXRlcmlhbDpUcyxNZXNoQmFzaWNNYXRlcmlhbDpfaSxNZXNoTWF0Y2FwTWF0ZXJpYWw6eHUsTGluZURhc2hlZE1hdGVyaWFsOmJ1LExpbmVCYXNpY01hdGVyaWFsOnljLE1hdGVyaWFsOndpfSk7Y29uc3QgX3U9e2FycmF5U2xpY2U6ZnVuY3Rpb24odCxlLG4pe3JldHVybiBfdS5pc1R5cGVkQXJyYXkodCk/bmV3IHQuY29uc3RydWN0b3IodC5zdWJhcnJheShlLHZvaWQgMCE9PW4/bjp0Lmxlbmd0aCkpOnQuc2xpY2UoZSxuKX0sY29udmVydEFycmF5OmZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4hdHx8IW4mJnQuY29uc3RydWN0b3I9PT1lP3Q6XCJudW1iZXJcIj09dHlwZW9mIGUuQllURVNfUEVSX0VMRU1FTlQ/bmV3IGUodCk6QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodCl9LGlzVHlwZWRBcnJheTpmdW5jdGlvbih0KXtyZXR1cm4gQXJyYXlCdWZmZXIuaXNWaWV3KHQpJiYhKHQgaW5zdGFuY2VvZiBEYXRhVmlldyl9LGdldEtleWZyYW1lT3JkZXI6ZnVuY3Rpb24odCl7Y29uc3QgZT10Lmxlbmd0aCxuPW5ldyBBcnJheShlKTtmb3IobGV0IHQ9MDt0IT09ZTsrK3Qpblt0XT10O3JldHVybiBuLnNvcnQoKGZ1bmN0aW9uKGUsbil7cmV0dXJuIHRbZV0tdFtuXX0pKSxufSxzb3J0ZWRBcnJheTpmdW5jdGlvbih0LGUsbil7Y29uc3Qgcj10Lmxlbmd0aCxpPW5ldyB0LmNvbnN0cnVjdG9yKHIpO2ZvcihsZXQgbz0wLGE9MDthIT09cjsrK28pe2NvbnN0IHI9bltvXSplO2ZvcihsZXQgbj0wO24hPT1lOysrbilpW2ErK109dFtyK25dfXJldHVybiBpfSxmbGF0dGVuSlNPTjpmdW5jdGlvbih0LGUsbixyKXtsZXQgaT0xLG89dFswXTtmb3IoO3ZvaWQgMCE9PW8mJnZvaWQgMD09PW9bcl07KW89dFtpKytdO2lmKHZvaWQgMD09PW8pcmV0dXJuO2xldCBhPW9bcl07aWYodm9pZCAwIT09YSlpZihBcnJheS5pc0FycmF5KGEpKWRve2E9b1tyXSx2b2lkIDAhPT1hJiYoZS5wdXNoKG8udGltZSksbi5wdXNoLmFwcGx5KG4sYSkpLG89dFtpKytdfXdoaWxlKHZvaWQgMCE9PW8pO2Vsc2UgaWYodm9pZCAwIT09YS50b0FycmF5KWRve2E9b1tyXSx2b2lkIDAhPT1hJiYoZS5wdXNoKG8udGltZSksYS50b0FycmF5KG4sbi5sZW5ndGgpKSxvPXRbaSsrXX13aGlsZSh2b2lkIDAhPT1vKTtlbHNlIGRve2E9b1tyXSx2b2lkIDAhPT1hJiYoZS5wdXNoKG8udGltZSksbi5wdXNoKGEpKSxvPXRbaSsrXX13aGlsZSh2b2lkIDAhPT1vKX0sc3ViY2xpcDpmdW5jdGlvbih0LGUsbixyLGk9MzApe2NvbnN0IG89dC5jbG9uZSgpO28ubmFtZT1lO2NvbnN0IGE9W107Zm9yKGxldCB0PTA7dDxvLnRyYWNrcy5sZW5ndGg7Kyt0KXtjb25zdCBlPW8udHJhY2tzW3RdLHM9ZS5nZXRWYWx1ZVNpemUoKSxjPVtdLGw9W107Zm9yKGxldCB0PTA7dDxlLnRpbWVzLmxlbmd0aDsrK3Qpe2NvbnN0IG89ZS50aW1lc1t0XSppO2lmKCEobzxufHxvPj1yKSl7Yy5wdXNoKGUudGltZXNbdF0pO2ZvcihsZXQgbj0wO248czsrK24pbC5wdXNoKGUudmFsdWVzW3QqcytuXSl9fTAhPT1jLmxlbmd0aCYmKGUudGltZXM9X3UuY29udmVydEFycmF5KGMsZS50aW1lcy5jb25zdHJ1Y3RvciksZS52YWx1ZXM9X3UuY29udmVydEFycmF5KGwsZS52YWx1ZXMuY29uc3RydWN0b3IpLGEucHVzaChlKSl9by50cmFja3M9YTtsZXQgcz0xLzA7Zm9yKGxldCB0PTA7dDxvLnRyYWNrcy5sZW5ndGg7Kyt0KXM+by50cmFja3NbdF0udGltZXNbMF0mJihzPW8udHJhY2tzW3RdLnRpbWVzWzBdKTtmb3IobGV0IHQ9MDt0PG8udHJhY2tzLmxlbmd0aDsrK3Qpby50cmFja3NbdF0uc2hpZnQoLTEqcyk7cmV0dXJuIG8ucmVzZXREdXJhdGlvbigpLG99LG1ha2VDbGlwQWRkaXRpdmU6ZnVuY3Rpb24odCxlPTAsbj10LHI9MzApe3I8PTAmJihyPTMwKTtjb25zdCBpPW4udHJhY2tzLmxlbmd0aCxvPWUvcjtmb3IobGV0IGU9MDtlPGk7KytlKXtjb25zdCByPW4udHJhY2tzW2VdLGk9ci5WYWx1ZVR5cGVOYW1lO2lmKFwiYm9vbFwiPT09aXx8XCJzdHJpbmdcIj09PWkpY29udGludWU7Y29uc3QgYT10LnRyYWNrcy5maW5kKChmdW5jdGlvbih0KXtyZXR1cm4gdC5uYW1lPT09ci5uYW1lJiZ0LlZhbHVlVHlwZU5hbWU9PT1pfSkpO2lmKHZvaWQgMD09PWEpY29udGludWU7bGV0IHM9MDtjb25zdCBjPXIuZ2V0VmFsdWVTaXplKCk7ci5jcmVhdGVJbnRlcnBvbGFudC5pc0ludGVycG9sYW50RmFjdG9yeU1ldGhvZEdMVEZDdWJpY1NwbGluZSYmKHM9Yy8zKTtsZXQgbD0wO2NvbnN0IHU9YS5nZXRWYWx1ZVNpemUoKTthLmNyZWF0ZUludGVycG9sYW50LmlzSW50ZXJwb2xhbnRGYWN0b3J5TWV0aG9kR0xURkN1YmljU3BsaW5lJiYobD11LzMpO2NvbnN0IGg9ci50aW1lcy5sZW5ndGgtMTtsZXQgZDtpZihvPD1yLnRpbWVzWzBdKXtjb25zdCB0PXMsZT1jLXM7ZD1fdS5hcnJheVNsaWNlKHIudmFsdWVzLHQsZSl9ZWxzZSBpZihvPj1yLnRpbWVzW2hdKXtjb25zdCB0PWgqYytzLGU9dCtjLXM7ZD1fdS5hcnJheVNsaWNlKHIudmFsdWVzLHQsZSl9ZWxzZXtjb25zdCB0PXIuY3JlYXRlSW50ZXJwb2xhbnQoKSxlPXMsbj1jLXM7dC5ldmFsdWF0ZShvKSxkPV91LmFycmF5U2xpY2UodC5yZXN1bHRCdWZmZXIsZSxuKX1pZihcInF1YXRlcm5pb25cIj09PWkpeyhuZXcgSm4pLmZyb21BcnJheShkKS5ub3JtYWxpemUoKS5jb25qdWdhdGUoKS50b0FycmF5KGQpfWNvbnN0IHA9YS50aW1lcy5sZW5ndGg7Zm9yKGxldCB0PTA7dDxwOysrdCl7Y29uc3QgZT10KnUrbDtpZihcInF1YXRlcm5pb25cIj09PWkpSm4ubXVsdGlwbHlRdWF0ZXJuaW9uc0ZsYXQoYS52YWx1ZXMsZSxkLDAsYS52YWx1ZXMsZSk7ZWxzZXtjb25zdCB0PXUtMipsO2ZvcihsZXQgbj0wO248dDsrK24pYS52YWx1ZXNbZStuXS09ZFtuXX19fXJldHVybiB0LmJsZW5kTW9kZT1YZSx0fX07ZnVuY3Rpb24gTXUodCxlLG4scil7dGhpcy5wYXJhbWV0ZXJQb3NpdGlvbnM9dCx0aGlzLl9jYWNoZWRJbmRleD0wLHRoaXMucmVzdWx0QnVmZmVyPXZvaWQgMCE9PXI/cjpuZXcgZS5jb25zdHJ1Y3RvcihuKSx0aGlzLnNhbXBsZVZhbHVlcz1lLHRoaXMudmFsdWVTaXplPW59ZnVuY3Rpb24gU3UodCxlLG4scil7TXUuY2FsbCh0aGlzLHQsZSxuLHIpLHRoaXMuX3dlaWdodFByZXY9LTAsdGhpcy5fb2Zmc2V0UHJldj0tMCx0aGlzLl93ZWlnaHROZXh0PS0wLHRoaXMuX29mZnNldE5leHQ9LTB9ZnVuY3Rpb24gVHUodCxlLG4scil7TXUuY2FsbCh0aGlzLHQsZSxuLHIpfWZ1bmN0aW9uIEV1KHQsZSxuLHIpe011LmNhbGwodGhpcyx0LGUsbixyKX1mdW5jdGlvbiBBdSh0LGUsbixyKXtpZih2b2lkIDA9PT10KXRocm93IG5ldyBFcnJvcihcIlRIUkVFLktleWZyYW1lVHJhY2s6IHRyYWNrIG5hbWUgaXMgdW5kZWZpbmVkXCIpO2lmKHZvaWQgMD09PWV8fDA9PT1lLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoXCJUSFJFRS5LZXlmcmFtZVRyYWNrOiBubyBrZXlmcmFtZXMgaW4gdHJhY2sgbmFtZWQgXCIrdCk7dGhpcy5uYW1lPXQsdGhpcy50aW1lcz1fdS5jb252ZXJ0QXJyYXkoZSx0aGlzLlRpbWVCdWZmZXJUeXBlKSx0aGlzLnZhbHVlcz1fdS5jb252ZXJ0QXJyYXkobix0aGlzLlZhbHVlQnVmZmVyVHlwZSksdGhpcy5zZXRJbnRlcnBvbGF0aW9uKHJ8fHRoaXMuRGVmYXVsdEludGVycG9sYXRpb24pfWZ1bmN0aW9uIEx1KHQsZSxuKXtBdS5jYWxsKHRoaXMsdCxlLG4pfWZ1bmN0aW9uIFJ1KHQsZSxuLHIpe0F1LmNhbGwodGhpcyx0LGUsbixyKX1mdW5jdGlvbiBQdSh0LGUsbixyKXtBdS5jYWxsKHRoaXMsdCxlLG4scil9ZnVuY3Rpb24gQ3UodCxlLG4scil7TXUuY2FsbCh0aGlzLHQsZSxuLHIpfWZ1bmN0aW9uIEl1KHQsZSxuLHIpe0F1LmNhbGwodGhpcyx0LGUsbixyKX1mdW5jdGlvbiBPdSh0LGUsbixyKXtBdS5jYWxsKHRoaXMsdCxlLG4scil9ZnVuY3Rpb24gTnUodCxlLG4scil7QXUuY2FsbCh0aGlzLHQsZSxuLHIpfWZ1bmN0aW9uIER1KHQsZSxuLHIpe3RoaXMubmFtZT10LHRoaXMudHJhY2tzPW4sdGhpcy5kdXJhdGlvbj12b2lkIDAhPT1lP2U6LTEsdGhpcy5ibGVuZE1vZGU9dm9pZCAwIT09cj9yOldlLHRoaXMudXVpZD16bi5nZW5lcmF0ZVVVSUQoKSx0aGlzLmR1cmF0aW9uPDAmJnRoaXMucmVzZXREdXJhdGlvbigpfWZ1bmN0aW9uIEJ1KHQpe2lmKHZvaWQgMD09PXQudHlwZSl0aHJvdyBuZXcgRXJyb3IoXCJUSFJFRS5LZXlmcmFtZVRyYWNrOiB0cmFjayB0eXBlIHVuZGVmaW5lZCwgY2FuIG5vdCBwYXJzZVwiKTtjb25zdCBlPWZ1bmN0aW9uKHQpe3N3aXRjaCh0LnRvTG93ZXJDYXNlKCkpe2Nhc2VcInNjYWxhclwiOmNhc2VcImRvdWJsZVwiOmNhc2VcImZsb2F0XCI6Y2FzZVwibnVtYmVyXCI6Y2FzZVwiaW50ZWdlclwiOnJldHVybiBQdTtjYXNlXCJ2ZWN0b3JcIjpjYXNlXCJ2ZWN0b3IyXCI6Y2FzZVwidmVjdG9yM1wiOmNhc2VcInZlY3RvcjRcIjpyZXR1cm4gTnU7Y2FzZVwiY29sb3JcIjpyZXR1cm4gUnU7Y2FzZVwicXVhdGVybmlvblwiOnJldHVybiBJdTtjYXNlXCJib29sXCI6Y2FzZVwiYm9vbGVhblwiOnJldHVybiBMdTtjYXNlXCJzdHJpbmdcIjpyZXR1cm4gT3V9dGhyb3cgbmV3IEVycm9yKFwiVEhSRUUuS2V5ZnJhbWVUcmFjazogVW5zdXBwb3J0ZWQgdHlwZU5hbWU6IFwiK3QpfSh0LnR5cGUpO2lmKHZvaWQgMD09PXQudGltZXMpe2NvbnN0IGU9W10sbj1bXTtfdS5mbGF0dGVuSlNPTih0LmtleXMsZSxuLFwidmFsdWVcIiksdC50aW1lcz1lLHQudmFsdWVzPW59cmV0dXJuIHZvaWQgMCE9PWUucGFyc2U/ZS5wYXJzZSh0KTpuZXcgZSh0Lm5hbWUsdC50aW1lcyx0LnZhbHVlcyx0LmludGVycG9sYXRpb24pfU9iamVjdC5hc3NpZ24oTXUucHJvdG90eXBlLHtldmFsdWF0ZTpmdW5jdGlvbih0KXtjb25zdCBlPXRoaXMucGFyYW1ldGVyUG9zaXRpb25zO2xldCBuPXRoaXMuX2NhY2hlZEluZGV4LHI9ZVtuXSxpPWVbbi0xXTt0OntlOntsZXQgbztuOntyOmlmKCEodDxyKSl7Zm9yKGxldCBvPW4rMjs7KXtpZih2b2lkIDA9PT1yKXtpZih0PGkpYnJlYWsgcjtyZXR1cm4gbj1lLmxlbmd0aCx0aGlzLl9jYWNoZWRJbmRleD1uLHRoaXMuYWZ0ZXJFbmRfKG4tMSx0LGkpfWlmKG49PT1vKWJyZWFrO2lmKGk9cixyPWVbKytuXSx0PHIpYnJlYWsgZX1vPWUubGVuZ3RoO2JyZWFrIG59aWYodD49aSlicmVhayB0O3tjb25zdCBhPWVbMV07dDxhJiYobj0yLGk9YSk7Zm9yKGxldCBvPW4tMjs7KXtpZih2b2lkIDA9PT1pKXJldHVybiB0aGlzLl9jYWNoZWRJbmRleD0wLHRoaXMuYmVmb3JlU3RhcnRfKDAsdCxyKTtpZihuPT09bylicmVhaztpZihyPWksaT1lWy0tbi0xXSx0Pj1pKWJyZWFrIGV9bz1uLG49MH19Zm9yKDtuPG87KXtjb25zdCByPW4rbz4+PjE7dDxlW3JdP289cjpuPXIrMX1pZihyPWVbbl0saT1lW24tMV0sdm9pZCAwPT09aSlyZXR1cm4gdGhpcy5fY2FjaGVkSW5kZXg9MCx0aGlzLmJlZm9yZVN0YXJ0XygwLHQscik7aWYodm9pZCAwPT09cilyZXR1cm4gbj1lLmxlbmd0aCx0aGlzLl9jYWNoZWRJbmRleD1uLHRoaXMuYWZ0ZXJFbmRfKG4tMSxpLHQpfXRoaXMuX2NhY2hlZEluZGV4PW4sdGhpcy5pbnRlcnZhbENoYW5nZWRfKG4saSxyKX1yZXR1cm4gdGhpcy5pbnRlcnBvbGF0ZV8obixpLHQscil9LHNldHRpbmdzOm51bGwsRGVmYXVsdFNldHRpbmdzXzp7fSxnZXRTZXR0aW5nc186ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZXR0aW5nc3x8dGhpcy5EZWZhdWx0U2V0dGluZ3NffSxjb3B5U2FtcGxlVmFsdWVfOmZ1bmN0aW9uKHQpe2NvbnN0IGU9dGhpcy5yZXN1bHRCdWZmZXIsbj10aGlzLnNhbXBsZVZhbHVlcyxyPXRoaXMudmFsdWVTaXplLGk9dCpyO2ZvcihsZXQgdD0wO3QhPT1yOysrdCllW3RdPW5baSt0XTtyZXR1cm4gZX0saW50ZXJwb2xhdGVfOmZ1bmN0aW9uKCl7dGhyb3cgbmV3IEVycm9yKFwiY2FsbCB0byBhYnN0cmFjdCBtZXRob2RcIil9LGludGVydmFsQ2hhbmdlZF86ZnVuY3Rpb24oKXt9fSksT2JqZWN0LmFzc2lnbihNdS5wcm90b3R5cGUse2JlZm9yZVN0YXJ0XzpNdS5wcm90b3R5cGUuY29weVNhbXBsZVZhbHVlXyxhZnRlckVuZF86TXUucHJvdG90eXBlLmNvcHlTYW1wbGVWYWx1ZV99KSxTdS5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKE11LnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlN1LERlZmF1bHRTZXR0aW5nc186e2VuZGluZ1N0YXJ0OmtlLGVuZGluZ0VuZDprZX0saW50ZXJ2YWxDaGFuZ2VkXzpmdW5jdGlvbih0LGUsbil7Y29uc3Qgcj10aGlzLnBhcmFtZXRlclBvc2l0aW9ucztsZXQgaT10LTIsbz10KzEsYT1yW2ldLHM9cltvXTtpZih2b2lkIDA9PT1hKXN3aXRjaCh0aGlzLmdldFNldHRpbmdzXygpLmVuZGluZ1N0YXJ0KXtjYXNlIFZlOmk9dCxhPTIqZS1uO2JyZWFrO2Nhc2UgamU6aT1yLmxlbmd0aC0yLGE9ZStyW2ldLXJbaSsxXTticmVhaztkZWZhdWx0Omk9dCxhPW59aWYodm9pZCAwPT09cylzd2l0Y2godGhpcy5nZXRTZXR0aW5nc18oKS5lbmRpbmdFbmQpe2Nhc2UgVmU6bz10LHM9MipuLWU7YnJlYWs7Y2FzZSBqZTpvPTEscz1uK3JbMV0tclswXTticmVhaztkZWZhdWx0Om89dC0xLHM9ZX1jb25zdCBjPS41KihuLWUpLGw9dGhpcy52YWx1ZVNpemU7dGhpcy5fd2VpZ2h0UHJldj1jLyhlLWEpLHRoaXMuX3dlaWdodE5leHQ9Yy8ocy1uKSx0aGlzLl9vZmZzZXRQcmV2PWkqbCx0aGlzLl9vZmZzZXROZXh0PW8qbH0saW50ZXJwb2xhdGVfOmZ1bmN0aW9uKHQsZSxuLHIpe2NvbnN0IGk9dGhpcy5yZXN1bHRCdWZmZXIsbz10aGlzLnNhbXBsZVZhbHVlcyxhPXRoaXMudmFsdWVTaXplLHM9dCphLGM9cy1hLGw9dGhpcy5fb2Zmc2V0UHJldix1PXRoaXMuX29mZnNldE5leHQsaD10aGlzLl93ZWlnaHRQcmV2LGQ9dGhpcy5fd2VpZ2h0TmV4dCxwPShuLWUpLyhyLWUpLGY9cCpwLG09ZipwLGc9LWgqbSsyKmgqZi1oKnAsdj0oMStoKSptKygtMS41LTIqaCkqZisoLS41K2gpKnArMSx5PSgtMS1kKSptKygxLjUrZCkqZisuNSpwLHg9ZCptLWQqZjtmb3IobGV0IHQ9MDt0IT09YTsrK3QpaVt0XT1nKm9bbCt0XSt2Km9bYyt0XSt5Km9bcyt0XSt4Km9bdSt0XTtyZXR1cm4gaX19KSxUdS5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKE11LnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlR1LGludGVycG9sYXRlXzpmdW5jdGlvbih0LGUsbixyKXtjb25zdCBpPXRoaXMucmVzdWx0QnVmZmVyLG89dGhpcy5zYW1wbGVWYWx1ZXMsYT10aGlzLnZhbHVlU2l6ZSxzPXQqYSxjPXMtYSxsPShuLWUpLyhyLWUpLHU9MS1sO2ZvcihsZXQgdD0wO3QhPT1hOysrdClpW3RdPW9bYyt0XSp1K29bcyt0XSpsO3JldHVybiBpfX0pLEV1LnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoTXUucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6RXUsaW50ZXJwb2xhdGVfOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvcHlTYW1wbGVWYWx1ZV8odC0xKX19KSxPYmplY3QuYXNzaWduKEF1LHt0b0pTT046ZnVuY3Rpb24odCl7Y29uc3QgZT10LmNvbnN0cnVjdG9yO2xldCBuO2lmKHZvaWQgMCE9PWUudG9KU09OKW49ZS50b0pTT04odCk7ZWxzZXtuPXtuYW1lOnQubmFtZSx0aW1lczpfdS5jb252ZXJ0QXJyYXkodC50aW1lcyxBcnJheSksdmFsdWVzOl91LmNvbnZlcnRBcnJheSh0LnZhbHVlcyxBcnJheSl9O2NvbnN0IGU9dC5nZXRJbnRlcnBvbGF0aW9uKCk7ZSE9PXQuRGVmYXVsdEludGVycG9sYXRpb24mJihuLmludGVycG9sYXRpb249ZSl9cmV0dXJuIG4udHlwZT10LlZhbHVlVHlwZU5hbWUsbn19KSxPYmplY3QuYXNzaWduKEF1LnByb3RvdHlwZSx7Y29uc3RydWN0b3I6QXUsVGltZUJ1ZmZlclR5cGU6RmxvYXQzMkFycmF5LFZhbHVlQnVmZmVyVHlwZTpGbG9hdDMyQXJyYXksRGVmYXVsdEludGVycG9sYXRpb246R2UsSW50ZXJwb2xhbnRGYWN0b3J5TWV0aG9kRGlzY3JldGU6ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBFdSh0aGlzLnRpbWVzLHRoaXMudmFsdWVzLHRoaXMuZ2V0VmFsdWVTaXplKCksdCl9LEludGVycG9sYW50RmFjdG9yeU1ldGhvZExpbmVhcjpmdW5jdGlvbih0KXtyZXR1cm4gbmV3IFR1KHRoaXMudGltZXMsdGhpcy52YWx1ZXMsdGhpcy5nZXRWYWx1ZVNpemUoKSx0KX0sSW50ZXJwb2xhbnRGYWN0b3J5TWV0aG9kU21vb3RoOmZ1bmN0aW9uKHQpe3JldHVybiBuZXcgU3UodGhpcy50aW1lcyx0aGlzLnZhbHVlcyx0aGlzLmdldFZhbHVlU2l6ZSgpLHQpfSxzZXRJbnRlcnBvbGF0aW9uOmZ1bmN0aW9uKHQpe2xldCBlO3N3aXRjaCh0KXtjYXNlIHplOmU9dGhpcy5JbnRlcnBvbGFudEZhY3RvcnlNZXRob2REaXNjcmV0ZTticmVhaztjYXNlIEdlOmU9dGhpcy5JbnRlcnBvbGFudEZhY3RvcnlNZXRob2RMaW5lYXI7YnJlYWs7Y2FzZSBIZTplPXRoaXMuSW50ZXJwb2xhbnRGYWN0b3J5TWV0aG9kU21vb3RofWlmKHZvaWQgMD09PWUpe2NvbnN0IGU9XCJ1bnN1cHBvcnRlZCBpbnRlcnBvbGF0aW9uIGZvciBcIit0aGlzLlZhbHVlVHlwZU5hbWUrXCIga2V5ZnJhbWUgdHJhY2sgbmFtZWQgXCIrdGhpcy5uYW1lO2lmKHZvaWQgMD09PXRoaXMuY3JlYXRlSW50ZXJwb2xhbnQpe2lmKHQ9PT10aGlzLkRlZmF1bHRJbnRlcnBvbGF0aW9uKXRocm93IG5ldyBFcnJvcihlKTt0aGlzLnNldEludGVycG9sYXRpb24odGhpcy5EZWZhdWx0SW50ZXJwb2xhdGlvbil9cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLktleWZyYW1lVHJhY2s6XCIsZSksdGhpc31yZXR1cm4gdGhpcy5jcmVhdGVJbnRlcnBvbGFudD1lLHRoaXN9LGdldEludGVycG9sYXRpb246ZnVuY3Rpb24oKXtzd2l0Y2godGhpcy5jcmVhdGVJbnRlcnBvbGFudCl7Y2FzZSB0aGlzLkludGVycG9sYW50RmFjdG9yeU1ldGhvZERpc2NyZXRlOnJldHVybiB6ZTtjYXNlIHRoaXMuSW50ZXJwb2xhbnRGYWN0b3J5TWV0aG9kTGluZWFyOnJldHVybiBHZTtjYXNlIHRoaXMuSW50ZXJwb2xhbnRGYWN0b3J5TWV0aG9kU21vb3RoOnJldHVybiBIZX19LGdldFZhbHVlU2l6ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnZhbHVlcy5sZW5ndGgvdGhpcy50aW1lcy5sZW5ndGh9LHNoaWZ0OmZ1bmN0aW9uKHQpe2lmKDAhPT10KXtjb25zdCBlPXRoaXMudGltZXM7Zm9yKGxldCBuPTAscj1lLmxlbmd0aDtuIT09cjsrK24pZVtuXSs9dH1yZXR1cm4gdGhpc30sc2NhbGU6ZnVuY3Rpb24odCl7aWYoMSE9PXQpe2NvbnN0IGU9dGhpcy50aW1lcztmb3IobGV0IG49MCxyPWUubGVuZ3RoO24hPT1yOysrbillW25dKj10fXJldHVybiB0aGlzfSx0cmltOmZ1bmN0aW9uKHQsZSl7Y29uc3Qgbj10aGlzLnRpbWVzLHI9bi5sZW5ndGg7bGV0IGk9MCxvPXItMTtmb3IoO2khPT1yJiZuW2ldPHQ7KSsraTtmb3IoOy0xIT09byYmbltvXT5lOyktLW87aWYoKytvLDAhPT1pfHxvIT09cil7aT49byYmKG89TWF0aC5tYXgobywxKSxpPW8tMSk7Y29uc3QgdD10aGlzLmdldFZhbHVlU2l6ZSgpO3RoaXMudGltZXM9X3UuYXJyYXlTbGljZShuLGksbyksdGhpcy52YWx1ZXM9X3UuYXJyYXlTbGljZSh0aGlzLnZhbHVlcyxpKnQsbyp0KX1yZXR1cm4gdGhpc30sdmFsaWRhdGU6ZnVuY3Rpb24oKXtsZXQgdD0hMDtjb25zdCBlPXRoaXMuZ2V0VmFsdWVTaXplKCk7ZS1NYXRoLmZsb29yKGUpIT0wJiYoY29uc29sZS5lcnJvcihcIlRIUkVFLktleWZyYW1lVHJhY2s6IEludmFsaWQgdmFsdWUgc2l6ZSBpbiB0cmFjay5cIix0aGlzKSx0PSExKTtjb25zdCBuPXRoaXMudGltZXMscj10aGlzLnZhbHVlcyxpPW4ubGVuZ3RoOzA9PT1pJiYoY29uc29sZS5lcnJvcihcIlRIUkVFLktleWZyYW1lVHJhY2s6IFRyYWNrIGlzIGVtcHR5LlwiLHRoaXMpLHQ9ITEpO2xldCBvPW51bGw7Zm9yKGxldCBlPTA7ZSE9PWk7ZSsrKXtjb25zdCByPW5bZV07aWYoXCJudW1iZXJcIj09dHlwZW9mIHImJmlzTmFOKHIpKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuS2V5ZnJhbWVUcmFjazogVGltZSBpcyBub3QgYSB2YWxpZCBudW1iZXIuXCIsdGhpcyxlLHIpLHQ9ITE7YnJlYWt9aWYobnVsbCE9PW8mJm8+cil7Y29uc29sZS5lcnJvcihcIlRIUkVFLktleWZyYW1lVHJhY2s6IE91dCBvZiBvcmRlciBrZXlzLlwiLHRoaXMsZSxyLG8pLHQ9ITE7YnJlYWt9bz1yfWlmKHZvaWQgMCE9PXImJl91LmlzVHlwZWRBcnJheShyKSlmb3IobGV0IGU9MCxuPXIubGVuZ3RoO2UhPT1uOysrZSl7Y29uc3Qgbj1yW2VdO2lmKGlzTmFOKG4pKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuS2V5ZnJhbWVUcmFjazogVmFsdWUgaXMgbm90IGEgdmFsaWQgbnVtYmVyLlwiLHRoaXMsZSxuKSx0PSExO2JyZWFrfX1yZXR1cm4gdH0sb3B0aW1pemU6ZnVuY3Rpb24oKXtjb25zdCB0PV91LmFycmF5U2xpY2UodGhpcy50aW1lcyksZT1fdS5hcnJheVNsaWNlKHRoaXMudmFsdWVzKSxuPXRoaXMuZ2V0VmFsdWVTaXplKCkscj10aGlzLmdldEludGVycG9sYXRpb24oKT09PUhlLGk9dC5sZW5ndGgtMTtsZXQgbz0xO2ZvcihsZXQgYT0xO2E8aTsrK2Epe2xldCBpPSExO2NvbnN0IHM9dFthXTtpZihzIT09dFthKzFdJiYoMSE9PWF8fHMhPT1zWzBdKSlpZihyKWk9ITA7ZWxzZXtjb25zdCB0PWEqbixyPXQtbixvPXQrbjtmb3IobGV0IGE9MDthIT09bjsrK2Epe2NvbnN0IG49ZVt0K2FdO2lmKG4hPT1lW3IrYV18fG4hPT1lW28rYV0pe2k9ITA7YnJlYWt9fX1pZihpKXtpZihhIT09byl7dFtvXT10W2FdO2NvbnN0IHI9YSpuLGk9bypuO2ZvcihsZXQgdD0wO3QhPT1uOysrdCllW2krdF09ZVtyK3RdfSsrb319aWYoaT4wKXt0W29dPXRbaV07Zm9yKGxldCB0PWkqbixyPW8qbixhPTA7YSE9PW47KythKWVbcithXT1lW3QrYV07KytvfXJldHVybiBvIT09dC5sZW5ndGg/KHRoaXMudGltZXM9X3UuYXJyYXlTbGljZSh0LDAsbyksdGhpcy52YWx1ZXM9X3UuYXJyYXlTbGljZShlLDAsbypuKSk6KHRoaXMudGltZXM9dCx0aGlzLnZhbHVlcz1lKSx0aGlzfSxjbG9uZTpmdW5jdGlvbigpe2NvbnN0IHQ9X3UuYXJyYXlTbGljZSh0aGlzLnRpbWVzLDApLGU9X3UuYXJyYXlTbGljZSh0aGlzLnZhbHVlcywwKSxuPW5ldygwLHRoaXMuY29uc3RydWN0b3IpKHRoaXMubmFtZSx0LGUpO3JldHVybiBuLmNyZWF0ZUludGVycG9sYW50PXRoaXMuY3JlYXRlSW50ZXJwb2xhbnQsbn19KSxMdS5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKEF1LnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOkx1LFZhbHVlVHlwZU5hbWU6XCJib29sXCIsVmFsdWVCdWZmZXJUeXBlOkFycmF5LERlZmF1bHRJbnRlcnBvbGF0aW9uOnplLEludGVycG9sYW50RmFjdG9yeU1ldGhvZExpbmVhcjp2b2lkIDAsSW50ZXJwb2xhbnRGYWN0b3J5TWV0aG9kU21vb3RoOnZvaWQgMH0pLFJ1LnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoQXUucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6UnUsVmFsdWVUeXBlTmFtZTpcImNvbG9yXCJ9KSxQdS5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKEF1LnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlB1LFZhbHVlVHlwZU5hbWU6XCJudW1iZXJcIn0pLEN1LnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoTXUucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6Q3UsaW50ZXJwb2xhdGVfOmZ1bmN0aW9uKHQsZSxuLHIpe2NvbnN0IGk9dGhpcy5yZXN1bHRCdWZmZXIsbz10aGlzLnNhbXBsZVZhbHVlcyxhPXRoaXMudmFsdWVTaXplLHM9KG4tZSkvKHItZSk7bGV0IGM9dCphO2ZvcihsZXQgdD1jK2E7YyE9PXQ7Yys9NClKbi5zbGVycEZsYXQoaSwwLG8sYy1hLG8sYyxzKTtyZXR1cm4gaX19KSxJdS5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKEF1LnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOkl1LFZhbHVlVHlwZU5hbWU6XCJxdWF0ZXJuaW9uXCIsRGVmYXVsdEludGVycG9sYXRpb246R2UsSW50ZXJwb2xhbnRGYWN0b3J5TWV0aG9kTGluZWFyOmZ1bmN0aW9uKHQpe3JldHVybiBuZXcgQ3UodGhpcy50aW1lcyx0aGlzLnZhbHVlcyx0aGlzLmdldFZhbHVlU2l6ZSgpLHQpfSxJbnRlcnBvbGFudEZhY3RvcnlNZXRob2RTbW9vdGg6dm9pZCAwfSksT3UucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShBdS5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpPdSxWYWx1ZVR5cGVOYW1lOlwic3RyaW5nXCIsVmFsdWVCdWZmZXJUeXBlOkFycmF5LERlZmF1bHRJbnRlcnBvbGF0aW9uOnplLEludGVycG9sYW50RmFjdG9yeU1ldGhvZExpbmVhcjp2b2lkIDAsSW50ZXJwb2xhbnRGYWN0b3J5TWV0aG9kU21vb3RoOnZvaWQgMH0pLE51LnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoQXUucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6TnUsVmFsdWVUeXBlTmFtZTpcInZlY3RvclwifSksT2JqZWN0LmFzc2lnbihEdSx7cGFyc2U6ZnVuY3Rpb24odCl7Y29uc3QgZT1bXSxuPXQudHJhY2tzLHI9MS8odC5mcHN8fDEpO2ZvcihsZXQgdD0wLGk9bi5sZW5ndGg7dCE9PWk7Kyt0KWUucHVzaChCdShuW3RdKS5zY2FsZShyKSk7Y29uc3QgaT1uZXcgRHUodC5uYW1lLHQuZHVyYXRpb24sZSx0LmJsZW5kTW9kZSk7cmV0dXJuIGkudXVpZD10LnV1aWQsaX0sdG9KU09OOmZ1bmN0aW9uKHQpe2NvbnN0IGU9W10sbj10LnRyYWNrcyxyPXtuYW1lOnQubmFtZSxkdXJhdGlvbjp0LmR1cmF0aW9uLHRyYWNrczplLHV1aWQ6dC51dWlkLGJsZW5kTW9kZTp0LmJsZW5kTW9kZX07Zm9yKGxldCB0PTAscj1uLmxlbmd0aDt0IT09cjsrK3QpZS5wdXNoKEF1LnRvSlNPTihuW3RdKSk7cmV0dXJuIHJ9LENyZWF0ZUZyb21Nb3JwaFRhcmdldFNlcXVlbmNlOmZ1bmN0aW9uKHQsZSxuLHIpe2NvbnN0IGk9ZS5sZW5ndGgsbz1bXTtmb3IobGV0IHQ9MDt0PGk7dCsrKXtsZXQgYT1bXSxzPVtdO2EucHVzaCgodCtpLTEpJWksdCwodCsxKSVpKSxzLnB1c2goMCwxLDApO2NvbnN0IGM9X3UuZ2V0S2V5ZnJhbWVPcmRlcihhKTthPV91LnNvcnRlZEFycmF5KGEsMSxjKSxzPV91LnNvcnRlZEFycmF5KHMsMSxjKSxyfHwwIT09YVswXXx8KGEucHVzaChpKSxzLnB1c2goc1swXSkpLG8ucHVzaChuZXcgUHUoXCIubW9ycGhUYXJnZXRJbmZsdWVuY2VzW1wiK2VbdF0ubmFtZStcIl1cIixhLHMpLnNjYWxlKDEvbikpfXJldHVybiBuZXcgRHUodCwtMSxvKX0sZmluZEJ5TmFtZTpmdW5jdGlvbih0LGUpe2xldCBuPXQ7aWYoIUFycmF5LmlzQXJyYXkodCkpe2NvbnN0IGU9dDtuPWUuZ2VvbWV0cnkmJmUuZ2VvbWV0cnkuYW5pbWF0aW9uc3x8ZS5hbmltYXRpb25zfWZvcihsZXQgdD0wO3Q8bi5sZW5ndGg7dCsrKWlmKG5bdF0ubmFtZT09PWUpcmV0dXJuIG5bdF07cmV0dXJuIG51bGx9LENyZWF0ZUNsaXBzRnJvbU1vcnBoVGFyZ2V0U2VxdWVuY2VzOmZ1bmN0aW9uKHQsZSxuKXtjb25zdCByPXt9LGk9L14oW1xcdy1dKj8pKFtcXGRdKykkLztmb3IobGV0IGU9MCxuPXQubGVuZ3RoO2U8bjtlKyspe2NvbnN0IG49dFtlXSxvPW4ubmFtZS5tYXRjaChpKTtpZihvJiZvLmxlbmd0aD4xKXtjb25zdCB0PW9bMV07bGV0IGU9clt0XTtlfHwoclt0XT1lPVtdKSxlLnB1c2gobil9fWNvbnN0IG89W107Zm9yKGNvbnN0IHQgaW4gcilvLnB1c2goRHUuQ3JlYXRlRnJvbU1vcnBoVGFyZ2V0U2VxdWVuY2UodCxyW3RdLGUsbikpO3JldHVybiBvfSxwYXJzZUFuaW1hdGlvbjpmdW5jdGlvbih0LGUpe2lmKCF0KXJldHVybiBjb25zb2xlLmVycm9yKFwiVEhSRUUuQW5pbWF0aW9uQ2xpcDogTm8gYW5pbWF0aW9uIGluIEpTT05Mb2FkZXIgZGF0YS5cIiksbnVsbDtjb25zdCBuPWZ1bmN0aW9uKHQsZSxuLHIsaSl7aWYoMCE9PW4ubGVuZ3RoKXtjb25zdCBvPVtdLGE9W107X3UuZmxhdHRlbkpTT04obixvLGEsciksMCE9PW8ubGVuZ3RoJiZpLnB1c2gobmV3IHQoZSxvLGEpKX19LHI9W10saT10Lm5hbWV8fFwiZGVmYXVsdFwiLG89dC5mcHN8fDMwLGE9dC5ibGVuZE1vZGU7bGV0IHM9dC5sZW5ndGh8fC0xO2NvbnN0IGM9dC5oaWVyYXJjaHl8fFtdO2ZvcihsZXQgdD0wO3Q8Yy5sZW5ndGg7dCsrKXtjb25zdCBpPWNbdF0ua2V5cztpZihpJiYwIT09aS5sZW5ndGgpaWYoaVswXS5tb3JwaFRhcmdldHMpe2NvbnN0IHQ9e307bGV0IGU7Zm9yKGU9MDtlPGkubGVuZ3RoO2UrKylpZihpW2VdLm1vcnBoVGFyZ2V0cylmb3IobGV0IG49MDtuPGlbZV0ubW9ycGhUYXJnZXRzLmxlbmd0aDtuKyspdFtpW2VdLm1vcnBoVGFyZ2V0c1tuXV09LTE7Zm9yKGNvbnN0IG4gaW4gdCl7Y29uc3QgdD1bXSxvPVtdO2ZvcihsZXQgcj0wO3IhPT1pW2VdLm1vcnBoVGFyZ2V0cy5sZW5ndGg7KytyKXtjb25zdCByPWlbZV07dC5wdXNoKHIudGltZSksby5wdXNoKHIubW9ycGhUYXJnZXQ9PT1uPzE6MCl9ci5wdXNoKG5ldyBQdShcIi5tb3JwaFRhcmdldEluZmx1ZW5jZVtcIituK1wiXVwiLHQsbykpfXM9dC5sZW5ndGgqKG98fDEpfWVsc2V7Y29uc3Qgbz1cIi5ib25lc1tcIitlW3RdLm5hbWUrXCJdXCI7bihOdSxvK1wiLnBvc2l0aW9uXCIsaSxcInBvc1wiLHIpLG4oSXUsbytcIi5xdWF0ZXJuaW9uXCIsaSxcInJvdFwiLHIpLG4oTnUsbytcIi5zY2FsZVwiLGksXCJzY2xcIixyKX19aWYoMD09PXIubGVuZ3RoKXJldHVybiBudWxsO3JldHVybiBuZXcgRHUoaSxzLHIsYSl9fSksT2JqZWN0LmFzc2lnbihEdS5wcm90b3R5cGUse3Jlc2V0RHVyYXRpb246ZnVuY3Rpb24oKXtsZXQgdD0wO2ZvcihsZXQgZT0wLG49dGhpcy50cmFja3MubGVuZ3RoO2UhPT1uOysrZSl7Y29uc3Qgbj10aGlzLnRyYWNrc1tlXTt0PU1hdGgubWF4KHQsbi50aW1lc1tuLnRpbWVzLmxlbmd0aC0xXSl9cmV0dXJuIHRoaXMuZHVyYXRpb249dCx0aGlzfSx0cmltOmZ1bmN0aW9uKCl7Zm9yKGxldCB0PTA7dDx0aGlzLnRyYWNrcy5sZW5ndGg7dCsrKXRoaXMudHJhY2tzW3RdLnRyaW0oMCx0aGlzLmR1cmF0aW9uKTtyZXR1cm4gdGhpc30sdmFsaWRhdGU6ZnVuY3Rpb24oKXtsZXQgdD0hMDtmb3IobGV0IGU9MDtlPHRoaXMudHJhY2tzLmxlbmd0aDtlKyspdD10JiZ0aGlzLnRyYWNrc1tlXS52YWxpZGF0ZSgpO3JldHVybiB0fSxvcHRpbWl6ZTpmdW5jdGlvbigpe2ZvcihsZXQgdD0wO3Q8dGhpcy50cmFja3MubGVuZ3RoO3QrKyl0aGlzLnRyYWNrc1t0XS5vcHRpbWl6ZSgpO3JldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbigpe2NvbnN0IHQ9W107Zm9yKGxldCBlPTA7ZTx0aGlzLnRyYWNrcy5sZW5ndGg7ZSsrKXQucHVzaCh0aGlzLnRyYWNrc1tlXS5jbG9uZSgpKTtyZXR1cm4gbmV3IER1KHRoaXMubmFtZSx0aGlzLmR1cmF0aW9uLHQsdGhpcy5ibGVuZE1vZGUpfSx0b0pTT046ZnVuY3Rpb24oKXtyZXR1cm4gRHUudG9KU09OKHRoaXMpfX0pO2NvbnN0IEZ1PXtlbmFibGVkOiExLGZpbGVzOnt9LGFkZDpmdW5jdGlvbih0LGUpeyExIT09dGhpcy5lbmFibGVkJiYodGhpcy5maWxlc1t0XT1lKX0sZ2V0OmZ1bmN0aW9uKHQpe2lmKCExIT09dGhpcy5lbmFibGVkKXJldHVybiB0aGlzLmZpbGVzW3RdfSxyZW1vdmU6ZnVuY3Rpb24odCl7ZGVsZXRlIHRoaXMuZmlsZXNbdF19LGNsZWFyOmZ1bmN0aW9uKCl7dGhpcy5maWxlcz17fX19O2Z1bmN0aW9uIFV1KHQsZSxuKXtjb25zdCByPXRoaXM7bGV0IGk9ITEsbz0wLGE9MCxzPXZvaWQgMDtjb25zdCBjPVtdO3RoaXMub25TdGFydD12b2lkIDAsdGhpcy5vbkxvYWQ9dCx0aGlzLm9uUHJvZ3Jlc3M9ZSx0aGlzLm9uRXJyb3I9bix0aGlzLml0ZW1TdGFydD1mdW5jdGlvbih0KXthKyssITE9PT1pJiZ2b2lkIDAhPT1yLm9uU3RhcnQmJnIub25TdGFydCh0LG8sYSksaT0hMH0sdGhpcy5pdGVtRW5kPWZ1bmN0aW9uKHQpe28rKyx2b2lkIDAhPT1yLm9uUHJvZ3Jlc3MmJnIub25Qcm9ncmVzcyh0LG8sYSksbz09PWEmJihpPSExLHZvaWQgMCE9PXIub25Mb2FkJiZyLm9uTG9hZCgpKX0sdGhpcy5pdGVtRXJyb3I9ZnVuY3Rpb24odCl7dm9pZCAwIT09ci5vbkVycm9yJiZyLm9uRXJyb3IodCl9LHRoaXMucmVzb2x2ZVVSTD1mdW5jdGlvbih0KXtyZXR1cm4gcz9zKHQpOnR9LHRoaXMuc2V0VVJMTW9kaWZpZXI9ZnVuY3Rpb24odCl7cmV0dXJuIHM9dCx0aGlzfSx0aGlzLmFkZEhhbmRsZXI9ZnVuY3Rpb24odCxlKXtyZXR1cm4gYy5wdXNoKHQsZSksdGhpc30sdGhpcy5yZW1vdmVIYW5kbGVyPWZ1bmN0aW9uKHQpe2NvbnN0IGU9Yy5pbmRleE9mKHQpO3JldHVybi0xIT09ZSYmYy5zcGxpY2UoZSwyKSx0aGlzfSx0aGlzLmdldEhhbmRsZXI9ZnVuY3Rpb24odCl7Zm9yKGxldCBlPTAsbj1jLmxlbmd0aDtlPG47ZSs9Mil7Y29uc3Qgbj1jW2VdLHI9Y1tlKzFdO2lmKG4uZ2xvYmFsJiYobi5sYXN0SW5kZXg9MCksbi50ZXN0KHQpKXJldHVybiByfXJldHVybiBudWxsfX1jb25zdCB6dT1uZXcgVXU7ZnVuY3Rpb24gR3UodCl7dGhpcy5tYW5hZ2VyPXZvaWQgMCE9PXQ/dDp6dSx0aGlzLmNyb3NzT3JpZ2luPVwiYW5vbnltb3VzXCIsdGhpcy53aXRoQ3JlZGVudGlhbHM9ITEsdGhpcy5wYXRoPVwiXCIsdGhpcy5yZXNvdXJjZVBhdGg9XCJcIix0aGlzLnJlcXVlc3RIZWFkZXI9e319T2JqZWN0LmFzc2lnbihHdS5wcm90b3R5cGUse2xvYWQ6ZnVuY3Rpb24oKXt9LGxvYWRBc3luYzpmdW5jdGlvbih0LGUpe2NvbnN0IG49dGhpcztyZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKHIsaSl7bi5sb2FkKHQscixlLGkpfSkpfSxwYXJzZTpmdW5jdGlvbigpe30sc2V0Q3Jvc3NPcmlnaW46ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY3Jvc3NPcmlnaW49dCx0aGlzfSxzZXRXaXRoQ3JlZGVudGlhbHM6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMud2l0aENyZWRlbnRpYWxzPXQsdGhpc30sc2V0UGF0aDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5wYXRoPXQsdGhpc30sc2V0UmVzb3VyY2VQYXRoOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnJlc291cmNlUGF0aD10LHRoaXN9LHNldFJlcXVlc3RIZWFkZXI6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucmVxdWVzdEhlYWRlcj10LHRoaXN9fSk7Y29uc3QgSHU9e307ZnVuY3Rpb24ga3UodCl7R3UuY2FsbCh0aGlzLHQpfWZ1bmN0aW9uIFZ1KHQpe0d1LmNhbGwodGhpcyx0KX1mdW5jdGlvbiBqdSh0KXtHdS5jYWxsKHRoaXMsdCl9ZnVuY3Rpb24gV3UodCl7R3UuY2FsbCh0aGlzLHQpfWZ1bmN0aW9uIFh1KHQpe0d1LmNhbGwodGhpcyx0KX1mdW5jdGlvbiBxdSh0KXtHdS5jYWxsKHRoaXMsdCl9ZnVuY3Rpb24gWXUodCl7R3UuY2FsbCh0aGlzLHQpfWZ1bmN0aW9uIFp1KCl7dGhpcy50eXBlPVwiQ3VydmVcIix0aGlzLmFyY0xlbmd0aERpdmlzaW9ucz0yMDB9ZnVuY3Rpb24gSnUodCxlLG4scixpLG8sYSxzKXtadS5jYWxsKHRoaXMpLHRoaXMudHlwZT1cIkVsbGlwc2VDdXJ2ZVwiLHRoaXMuYVg9dHx8MCx0aGlzLmFZPWV8fDAsdGhpcy54UmFkaXVzPW58fDEsdGhpcy55UmFkaXVzPXJ8fDEsdGhpcy5hU3RhcnRBbmdsZT1pfHwwLHRoaXMuYUVuZEFuZ2xlPW98fDIqTWF0aC5QSSx0aGlzLmFDbG9ja3dpc2U9YXx8ITEsdGhpcy5hUm90YXRpb249c3x8MH1mdW5jdGlvbiBLdSh0LGUsbixyLGksbyl7SnUuY2FsbCh0aGlzLHQsZSxuLG4scixpLG8pLHRoaXMudHlwZT1cIkFyY0N1cnZlXCJ9ZnVuY3Rpb24gUXUoKXtsZXQgdD0wLGU9MCxuPTAscj0wO2Z1bmN0aW9uIGkoaSxvLGEscyl7dD1pLGU9YSxuPS0zKmkrMypvLTIqYS1zLHI9MippLTIqbythK3N9cmV0dXJue2luaXRDYXRtdWxsUm9tOmZ1bmN0aW9uKHQsZSxuLHIsbyl7aShlLG4sbyoobi10KSxvKihyLWUpKX0saW5pdE5vbnVuaWZvcm1DYXRtdWxsUm9tOmZ1bmN0aW9uKHQsZSxuLHIsbyxhLHMpe2xldCBjPShlLXQpL28tKG4tdCkvKG8rYSkrKG4tZSkvYSxsPShuLWUpL2EtKHItZSkvKGErcykrKHItbikvcztjKj1hLGwqPWEsaShlLG4sYyxsKX0sY2FsYzpmdW5jdGlvbihpKXtjb25zdCBvPWkqaTtyZXR1cm4gdCtlKmkrbipvK3IqKG8qaSl9fX1rdS5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKEd1LnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOmt1LGxvYWQ6ZnVuY3Rpb24odCxlLG4scil7dm9pZCAwPT09dCYmKHQ9XCJcIiksdm9pZCAwIT09dGhpcy5wYXRoJiYodD10aGlzLnBhdGgrdCksdD10aGlzLm1hbmFnZXIucmVzb2x2ZVVSTCh0KTtjb25zdCBpPXRoaXMsbz1GdS5nZXQodCk7aWYodm9pZCAwIT09bylyZXR1cm4gaS5tYW5hZ2VyLml0ZW1TdGFydCh0KSxzZXRUaW1lb3V0KChmdW5jdGlvbigpe2UmJmUobyksaS5tYW5hZ2VyLml0ZW1FbmQodCl9KSwwKSxvO2lmKHZvaWQgMCE9PUh1W3RdKXJldHVybiB2b2lkIEh1W3RdLnB1c2goe29uTG9hZDplLG9uUHJvZ3Jlc3M6bixvbkVycm9yOnJ9KTtjb25zdCBhPXQubWF0Y2goL15kYXRhOiguKj8pKDtiYXNlNjQpPywoLiopJC8pO2xldCBzO2lmKGEpe2NvbnN0IG49YVsxXSxvPSEhYVsyXTtsZXQgcz1hWzNdO3M9ZGVjb2RlVVJJQ29tcG9uZW50KHMpLG8mJihzPWF0b2IocykpO3RyeXtsZXQgcjtjb25zdCBvPSh0aGlzLnJlc3BvbnNlVHlwZXx8XCJcIikudG9Mb3dlckNhc2UoKTtzd2l0Y2gobyl7Y2FzZVwiYXJyYXlidWZmZXJcIjpjYXNlXCJibG9iXCI6Y29uc3QgdD1uZXcgVWludDhBcnJheShzLmxlbmd0aCk7Zm9yKGxldCBlPTA7ZTxzLmxlbmd0aDtlKyspdFtlXT1zLmNoYXJDb2RlQXQoZSk7cj1cImJsb2JcIj09PW8/bmV3IEJsb2IoW3QuYnVmZmVyXSx7dHlwZTpufSk6dC5idWZmZXI7YnJlYWs7Y2FzZVwiZG9jdW1lbnRcIjpjb25zdCBlPW5ldyBET01QYXJzZXI7cj1lLnBhcnNlRnJvbVN0cmluZyhzLG4pO2JyZWFrO2Nhc2VcImpzb25cIjpyPUpTT04ucGFyc2Uocyk7YnJlYWs7ZGVmYXVsdDpyPXN9c2V0VGltZW91dCgoZnVuY3Rpb24oKXtlJiZlKHIpLGkubWFuYWdlci5pdGVtRW5kKHQpfSksMCl9Y2F0Y2goZSl7c2V0VGltZW91dCgoZnVuY3Rpb24oKXtyJiZyKGUpLGkubWFuYWdlci5pdGVtRXJyb3IodCksaS5tYW5hZ2VyLml0ZW1FbmQodCl9KSwwKX19ZWxzZXtIdVt0XT1bXSxIdVt0XS5wdXNoKHtvbkxvYWQ6ZSxvblByb2dyZXNzOm4sb25FcnJvcjpyfSkscz1uZXcgWE1MSHR0cFJlcXVlc3Qscy5vcGVuKFwiR0VUXCIsdCwhMCkscy5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLChmdW5jdGlvbihlKXtjb25zdCBuPXRoaXMucmVzcG9uc2Uscj1IdVt0XTtpZihkZWxldGUgSHVbdF0sMjAwPT09dGhpcy5zdGF0dXN8fDA9PT10aGlzLnN0YXR1cyl7MD09PXRoaXMuc3RhdHVzJiZjb25zb2xlLndhcm4oXCJUSFJFRS5GaWxlTG9hZGVyOiBIVFRQIFN0YXR1cyAwIHJlY2VpdmVkLlwiKSxGdS5hZGQodCxuKTtmb3IobGV0IHQ9MCxlPXIubGVuZ3RoO3Q8ZTt0Kyspe2NvbnN0IGU9clt0XTtlLm9uTG9hZCYmZS5vbkxvYWQobil9aS5tYW5hZ2VyLml0ZW1FbmQodCl9ZWxzZXtmb3IobGV0IHQ9MCxuPXIubGVuZ3RoO3Q8bjt0Kyspe2NvbnN0IG49clt0XTtuLm9uRXJyb3ImJm4ub25FcnJvcihlKX1pLm1hbmFnZXIuaXRlbUVycm9yKHQpLGkubWFuYWdlci5pdGVtRW5kKHQpfX0pLCExKSxzLmFkZEV2ZW50TGlzdGVuZXIoXCJwcm9ncmVzc1wiLChmdW5jdGlvbihlKXtjb25zdCBuPUh1W3RdO2ZvcihsZXQgdD0wLHI9bi5sZW5ndGg7dDxyO3QrKyl7Y29uc3Qgcj1uW3RdO3Iub25Qcm9ncmVzcyYmci5vblByb2dyZXNzKGUpfX0pLCExKSxzLmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLChmdW5jdGlvbihlKXtjb25zdCBuPUh1W3RdO2RlbGV0ZSBIdVt0XTtmb3IobGV0IHQ9MCxyPW4ubGVuZ3RoO3Q8cjt0Kyspe2NvbnN0IHI9blt0XTtyLm9uRXJyb3ImJnIub25FcnJvcihlKX1pLm1hbmFnZXIuaXRlbUVycm9yKHQpLGkubWFuYWdlci5pdGVtRW5kKHQpfSksITEpLHMuYWRkRXZlbnRMaXN0ZW5lcihcImFib3J0XCIsKGZ1bmN0aW9uKGUpe2NvbnN0IG49SHVbdF07ZGVsZXRlIEh1W3RdO2ZvcihsZXQgdD0wLHI9bi5sZW5ndGg7dDxyO3QrKyl7Y29uc3Qgcj1uW3RdO3Iub25FcnJvciYmci5vbkVycm9yKGUpfWkubWFuYWdlci5pdGVtRXJyb3IodCksaS5tYW5hZ2VyLml0ZW1FbmQodCl9KSwhMSksdm9pZCAwIT09dGhpcy5yZXNwb25zZVR5cGUmJihzLnJlc3BvbnNlVHlwZT10aGlzLnJlc3BvbnNlVHlwZSksdm9pZCAwIT09dGhpcy53aXRoQ3JlZGVudGlhbHMmJihzLndpdGhDcmVkZW50aWFscz10aGlzLndpdGhDcmVkZW50aWFscykscy5vdmVycmlkZU1pbWVUeXBlJiZzLm92ZXJyaWRlTWltZVR5cGUodm9pZCAwIT09dGhpcy5taW1lVHlwZT90aGlzLm1pbWVUeXBlOlwidGV4dC9wbGFpblwiKTtmb3IoY29uc3QgdCBpbiB0aGlzLnJlcXVlc3RIZWFkZXIpcy5zZXRSZXF1ZXN0SGVhZGVyKHQsdGhpcy5yZXF1ZXN0SGVhZGVyW3RdKTtzLnNlbmQobnVsbCl9cmV0dXJuIGkubWFuYWdlci5pdGVtU3RhcnQodCksc30sc2V0UmVzcG9uc2VUeXBlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnJlc3BvbnNlVHlwZT10LHRoaXN9LHNldE1pbWVUeXBlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm1pbWVUeXBlPXQsdGhpc319KSxWdS5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKEd1LnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlZ1LGxvYWQ6ZnVuY3Rpb24odCxlLG4scil7Y29uc3QgaT10aGlzLG89bmV3IGt1KGkubWFuYWdlcik7by5zZXRQYXRoKGkucGF0aCksby5zZXRSZXF1ZXN0SGVhZGVyKGkucmVxdWVzdEhlYWRlciksby5zZXRXaXRoQ3JlZGVudGlhbHMoaS53aXRoQ3JlZGVudGlhbHMpLG8ubG9hZCh0LChmdW5jdGlvbihuKXt0cnl7ZShpLnBhcnNlKEpTT04ucGFyc2UobikpKX1jYXRjaChlKXtyP3IoZSk6Y29uc29sZS5lcnJvcihlKSxpLm1hbmFnZXIuaXRlbUVycm9yKHQpfX0pLG4scil9LHBhcnNlOmZ1bmN0aW9uKHQpe2NvbnN0IGU9W107Zm9yKGxldCBuPTA7bjx0Lmxlbmd0aDtuKyspe2NvbnN0IHI9RHUucGFyc2UodFtuXSk7ZS5wdXNoKHIpfXJldHVybiBlfX0pLGp1LnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoR3UucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6anUsbG9hZDpmdW5jdGlvbih0LGUsbixyKXtjb25zdCBpPXRoaXMsbz1bXSxhPW5ldyBGYzthLmltYWdlPW87Y29uc3Qgcz1uZXcga3UodGhpcy5tYW5hZ2VyKTtzLnNldFBhdGgodGhpcy5wYXRoKSxzLnNldFJlc3BvbnNlVHlwZShcImFycmF5YnVmZmVyXCIpLHMuc2V0UmVxdWVzdEhlYWRlcih0aGlzLnJlcXVlc3RIZWFkZXIpLHMuc2V0V2l0aENyZWRlbnRpYWxzKGkud2l0aENyZWRlbnRpYWxzKTtsZXQgYz0wO2Z1bmN0aW9uIGwobCl7cy5sb2FkKHRbbF0sKGZ1bmN0aW9uKHQpe2NvbnN0IG49aS5wYXJzZSh0LCEwKTtvW2xdPXt3aWR0aDpuLndpZHRoLGhlaWdodDpuLmhlaWdodCxmb3JtYXQ6bi5mb3JtYXQsbWlwbWFwczpuLm1pcG1hcHN9LGMrPTEsNj09PWMmJigxPT09bi5taXBtYXBDb3VudCYmKGEubWluRmlsdGVyPXh0KSxhLmZvcm1hdD1uLmZvcm1hdCxhLm5lZWRzVXBkYXRlPSEwLGUmJmUoYSkpfSksbixyKX1pZihBcnJheS5pc0FycmF5KHQpKWZvcihsZXQgZT0wLG49dC5sZW5ndGg7ZTxuOysrZSlsKGUpO2Vsc2Ugcy5sb2FkKHQsKGZ1bmN0aW9uKHQpe2NvbnN0IG49aS5wYXJzZSh0LCEwKTtpZihuLmlzQ3ViZW1hcCl7Y29uc3QgdD1uLm1pcG1hcHMubGVuZ3RoL24ubWlwbWFwQ291bnQ7Zm9yKGxldCBlPTA7ZTx0O2UrKyl7b1tlXT17bWlwbWFwczpbXX07Zm9yKGxldCB0PTA7dDxuLm1pcG1hcENvdW50O3QrKylvW2VdLm1pcG1hcHMucHVzaChuLm1pcG1hcHNbZSpuLm1pcG1hcENvdW50K3RdKSxvW2VdLmZvcm1hdD1uLmZvcm1hdCxvW2VdLndpZHRoPW4ud2lkdGgsb1tlXS5oZWlnaHQ9bi5oZWlnaHR9fWVsc2UgYS5pbWFnZS53aWR0aD1uLndpZHRoLGEuaW1hZ2UuaGVpZ2h0PW4uaGVpZ2h0LGEubWlwbWFwcz1uLm1pcG1hcHM7MT09PW4ubWlwbWFwQ291bnQmJihhLm1pbkZpbHRlcj14dCksYS5mb3JtYXQ9bi5mb3JtYXQsYS5uZWVkc1VwZGF0ZT0hMCxlJiZlKGEpfSksbixyKTtyZXR1cm4gYX19KSxXdS5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKEd1LnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOld1LGxvYWQ6ZnVuY3Rpb24odCxlLG4scil7dm9pZCAwIT09dGhpcy5wYXRoJiYodD10aGlzLnBhdGgrdCksdD10aGlzLm1hbmFnZXIucmVzb2x2ZVVSTCh0KTtjb25zdCBpPXRoaXMsbz1GdS5nZXQodCk7aWYodm9pZCAwIT09bylyZXR1cm4gaS5tYW5hZ2VyLml0ZW1TdGFydCh0KSxzZXRUaW1lb3V0KChmdW5jdGlvbigpe2UmJmUobyksaS5tYW5hZ2VyLml0ZW1FbmQodCl9KSwwKSxvO2NvbnN0IGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbFwiLFwiaW1nXCIpO2Z1bmN0aW9uIHMoKXthLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJsb2FkXCIscywhMSksYS5yZW1vdmVFdmVudExpc3RlbmVyKFwiZXJyb3JcIixjLCExKSxGdS5hZGQodCx0aGlzKSxlJiZlKHRoaXMpLGkubWFuYWdlci5pdGVtRW5kKHQpfWZ1bmN0aW9uIGMoZSl7YS5yZW1vdmVFdmVudExpc3RlbmVyKFwibG9hZFwiLHMsITEpLGEucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsYywhMSksciYmcihlKSxpLm1hbmFnZXIuaXRlbUVycm9yKHQpLGkubWFuYWdlci5pdGVtRW5kKHQpfXJldHVybiBhLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIscywhMSksYS5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIixjLCExKSxcImRhdGE6XCIhPT10LnN1YnN0cigwLDUpJiZ2b2lkIDAhPT10aGlzLmNyb3NzT3JpZ2luJiYoYS5jcm9zc09yaWdpbj10aGlzLmNyb3NzT3JpZ2luKSxpLm1hbmFnZXIuaXRlbVN0YXJ0KHQpLGEuc3JjPXQsYX19KSxYdS5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKEd1LnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlh1LGxvYWQ6ZnVuY3Rpb24odCxlLG4scil7Y29uc3QgaT1uZXcgTW8sbz1uZXcgV3UodGhpcy5tYW5hZ2VyKTtvLnNldENyb3NzT3JpZ2luKHRoaXMuY3Jvc3NPcmlnaW4pLG8uc2V0UGF0aCh0aGlzLnBhdGgpO2xldCBhPTA7ZnVuY3Rpb24gcyhuKXtvLmxvYWQodFtuXSwoZnVuY3Rpb24odCl7aS5pbWFnZXNbbl09dCxhKyssNj09PWEmJihpLm5lZWRzVXBkYXRlPSEwLGUmJmUoaSkpfSksdm9pZCAwLHIpfWZvcihsZXQgZT0wO2U8dC5sZW5ndGg7KytlKXMoZSk7cmV0dXJuIGl9fSkscXUucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShHdS5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpxdSxsb2FkOmZ1bmN0aW9uKHQsZSxuLHIpe2NvbnN0IGk9dGhpcyxvPW5ldyBUbyxhPW5ldyBrdSh0aGlzLm1hbmFnZXIpO3JldHVybiBhLnNldFJlc3BvbnNlVHlwZShcImFycmF5YnVmZmVyXCIpLGEuc2V0UmVxdWVzdEhlYWRlcih0aGlzLnJlcXVlc3RIZWFkZXIpLGEuc2V0UGF0aCh0aGlzLnBhdGgpLGEuc2V0V2l0aENyZWRlbnRpYWxzKGkud2l0aENyZWRlbnRpYWxzKSxhLmxvYWQodCwoZnVuY3Rpb24odCl7Y29uc3Qgbj1pLnBhcnNlKHQpO24mJih2b2lkIDAhPT1uLmltYWdlP28uaW1hZ2U9bi5pbWFnZTp2b2lkIDAhPT1uLmRhdGEmJihvLmltYWdlLndpZHRoPW4ud2lkdGgsby5pbWFnZS5oZWlnaHQ9bi5oZWlnaHQsby5pbWFnZS5kYXRhPW4uZGF0YSksby53cmFwUz12b2lkIDAhPT1uLndyYXBTP24ud3JhcFM6ZHQsby53cmFwVD12b2lkIDAhPT1uLndyYXBUP24ud3JhcFQ6ZHQsby5tYWdGaWx0ZXI9dm9pZCAwIT09bi5tYWdGaWx0ZXI/bi5tYWdGaWx0ZXI6eHQsby5taW5GaWx0ZXI9dm9pZCAwIT09bi5taW5GaWx0ZXI/bi5taW5GaWx0ZXI6eHQsby5hbmlzb3Ryb3B5PXZvaWQgMCE9PW4uYW5pc290cm9weT9uLmFuaXNvdHJvcHk6MSx2b2lkIDAhPT1uLmZvcm1hdCYmKG8uZm9ybWF0PW4uZm9ybWF0KSx2b2lkIDAhPT1uLnR5cGUmJihvLnR5cGU9bi50eXBlKSx2b2lkIDAhPT1uLm1pcG1hcHMmJihvLm1pcG1hcHM9bi5taXBtYXBzLG8ubWluRmlsdGVyPV90KSwxPT09bi5taXBtYXBDb3VudCYmKG8ubWluRmlsdGVyPXh0KSxvLm5lZWRzVXBkYXRlPSEwLGUmJmUobyxuKSl9KSxuLHIpLG99fSksWXUucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShHdS5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpZdSxsb2FkOmZ1bmN0aW9uKHQsZSxuLHIpe2NvbnN0IGk9bmV3IFduLG89bmV3IFd1KHRoaXMubWFuYWdlcik7cmV0dXJuIG8uc2V0Q3Jvc3NPcmlnaW4odGhpcy5jcm9zc09yaWdpbiksby5zZXRQYXRoKHRoaXMucGF0aCksby5sb2FkKHQsKGZ1bmN0aW9uKG4pe2kuaW1hZ2U9bjtjb25zdCByPXQuc2VhcmNoKC9cXC5qcGU/ZygkfFxcPykvaSk+MHx8MD09PXQuc2VhcmNoKC9eZGF0YVxcOmltYWdlXFwvanBlZy8pO2kuZm9ybWF0PXI/RnQ6VXQsaS5uZWVkc1VwZGF0ZT0hMCx2b2lkIDAhPT1lJiZlKGkpfSksbixyKSxpfX0pLE9iamVjdC5hc3NpZ24oWnUucHJvdG90eXBlLHtnZXRQb2ludDpmdW5jdGlvbigpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5DdXJ2ZTogLmdldFBvaW50KCkgbm90IGltcGxlbWVudGVkLlwiKSxudWxsfSxnZXRQb2ludEF0OmZ1bmN0aW9uKHQsZSl7Y29uc3Qgbj10aGlzLmdldFV0b1RtYXBwaW5nKHQpO3JldHVybiB0aGlzLmdldFBvaW50KG4sZSl9LGdldFBvaW50czpmdW5jdGlvbih0PTUpe2NvbnN0IGU9W107Zm9yKGxldCBuPTA7bjw9dDtuKyspZS5wdXNoKHRoaXMuZ2V0UG9pbnQobi90KSk7cmV0dXJuIGV9LGdldFNwYWNlZFBvaW50czpmdW5jdGlvbih0PTUpe2NvbnN0IGU9W107Zm9yKGxldCBuPTA7bjw9dDtuKyspZS5wdXNoKHRoaXMuZ2V0UG9pbnRBdChuL3QpKTtyZXR1cm4gZX0sZ2V0TGVuZ3RoOmZ1bmN0aW9uKCl7Y29uc3QgdD10aGlzLmdldExlbmd0aHMoKTtyZXR1cm4gdFt0Lmxlbmd0aC0xXX0sZ2V0TGVuZ3RoczpmdW5jdGlvbih0KXtpZih2b2lkIDA9PT10JiYodD10aGlzLmFyY0xlbmd0aERpdmlzaW9ucyksdGhpcy5jYWNoZUFyY0xlbmd0aHMmJnRoaXMuY2FjaGVBcmNMZW5ndGhzLmxlbmd0aD09PXQrMSYmIXRoaXMubmVlZHNVcGRhdGUpcmV0dXJuIHRoaXMuY2FjaGVBcmNMZW5ndGhzO3RoaXMubmVlZHNVcGRhdGU9ITE7Y29uc3QgZT1bXTtsZXQgbixyPXRoaXMuZ2V0UG9pbnQoMCksaT0wO2UucHVzaCgwKTtmb3IobGV0IG89MTtvPD10O28rKyluPXRoaXMuZ2V0UG9pbnQoby90KSxpKz1uLmRpc3RhbmNlVG8ociksZS5wdXNoKGkpLHI9bjtyZXR1cm4gdGhpcy5jYWNoZUFyY0xlbmd0aHM9ZSxlfSx1cGRhdGVBcmNMZW5ndGhzOmZ1bmN0aW9uKCl7dGhpcy5uZWVkc1VwZGF0ZT0hMCx0aGlzLmdldExlbmd0aHMoKX0sZ2V0VXRvVG1hcHBpbmc6ZnVuY3Rpb24odCxlKXtjb25zdCBuPXRoaXMuZ2V0TGVuZ3RocygpO2xldCByPTA7Y29uc3QgaT1uLmxlbmd0aDtsZXQgbztvPWV8fHQqbltpLTFdO2xldCBhLHM9MCxjPWktMTtmb3IoO3M8PWM7KWlmKHI9TWF0aC5mbG9vcihzKyhjLXMpLzIpLGE9bltyXS1vLGE8MClzPXIrMTtlbHNle2lmKCEoYT4wKSl7Yz1yO2JyZWFrfWM9ci0xfWlmKHI9YyxuW3JdPT09bylyZXR1cm4gci8oaS0xKTtjb25zdCBsPW5bcl07cmV0dXJuKHIrKG8tbCkvKG5bcisxXS1sKSkvKGktMSl9LGdldFRhbmdlbnQ6ZnVuY3Rpb24odCxlKXtsZXQgbj10LTFlLTQscj10KzFlLTQ7bjwwJiYobj0wKSxyPjEmJihyPTEpO2NvbnN0IGk9dGhpcy5nZXRQb2ludChuKSxvPXRoaXMuZ2V0UG9pbnQociksYT1lfHwoaS5pc1ZlY3RvcjI/bmV3IEduOm5ldyBLbik7cmV0dXJuIGEuY29weShvKS5zdWIoaSkubm9ybWFsaXplKCksYX0sZ2V0VGFuZ2VudEF0OmZ1bmN0aW9uKHQsZSl7Y29uc3Qgbj10aGlzLmdldFV0b1RtYXBwaW5nKHQpO3JldHVybiB0aGlzLmdldFRhbmdlbnQobixlKX0sY29tcHV0ZUZyZW5ldEZyYW1lczpmdW5jdGlvbih0LGUpe2NvbnN0IG49bmV3IEtuLHI9W10saT1bXSxvPVtdLGE9bmV3IEtuLHM9bmV3IFRyO2ZvcihsZXQgZT0wO2U8PXQ7ZSsrKXtjb25zdCBuPWUvdDtyW2VdPXRoaXMuZ2V0VGFuZ2VudEF0KG4sbmV3IEtuKSxyW2VdLm5vcm1hbGl6ZSgpfWlbMF09bmV3IEtuLG9bMF09bmV3IEtuO2xldCBjPU51bWJlci5NQVhfVkFMVUU7Y29uc3QgbD1NYXRoLmFicyhyWzBdLngpLHU9TWF0aC5hYnMoclswXS55KSxoPU1hdGguYWJzKHJbMF0ueik7bDw9YyYmKGM9bCxuLnNldCgxLDAsMCkpLHU8PWMmJihjPXUsbi5zZXQoMCwxLDApKSxoPD1jJiZuLnNldCgwLDAsMSksYS5jcm9zc1ZlY3RvcnMoclswXSxuKS5ub3JtYWxpemUoKSxpWzBdLmNyb3NzVmVjdG9ycyhyWzBdLGEpLG9bMF0uY3Jvc3NWZWN0b3JzKHJbMF0saVswXSk7Zm9yKGxldCBlPTE7ZTw9dDtlKyspe2lmKGlbZV09aVtlLTFdLmNsb25lKCksb1tlXT1vW2UtMV0uY2xvbmUoKSxhLmNyb3NzVmVjdG9ycyhyW2UtMV0scltlXSksYS5sZW5ndGgoKT5OdW1iZXIuRVBTSUxPTil7YS5ub3JtYWxpemUoKTtjb25zdCB0PU1hdGguYWNvcyh6bi5jbGFtcChyW2UtMV0uZG90KHJbZV0pLC0xLDEpKTtpW2VdLmFwcGx5TWF0cml4NChzLm1ha2VSb3RhdGlvbkF4aXMoYSx0KSl9b1tlXS5jcm9zc1ZlY3RvcnMocltlXSxpW2VdKX1pZighMD09PWUpe2xldCBlPU1hdGguYWNvcyh6bi5jbGFtcChpWzBdLmRvdChpW3RdKSwtMSwxKSk7ZS89dCxyWzBdLmRvdChhLmNyb3NzVmVjdG9ycyhpWzBdLGlbdF0pKT4wJiYoZT0tZSk7Zm9yKGxldCBuPTE7bjw9dDtuKyspaVtuXS5hcHBseU1hdHJpeDQocy5tYWtlUm90YXRpb25BeGlzKHJbbl0sZSpuKSksb1tuXS5jcm9zc1ZlY3RvcnMocltuXSxpW25dKX1yZXR1cm57dGFuZ2VudHM6cixub3JtYWxzOmksYmlub3JtYWxzOm99fSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3RvcikuY29weSh0aGlzKX0sY29weTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5hcmNMZW5ndGhEaXZpc2lvbnM9dC5hcmNMZW5ndGhEaXZpc2lvbnMsdGhpc30sdG9KU09OOmZ1bmN0aW9uKCl7Y29uc3QgdD17bWV0YWRhdGE6e3ZlcnNpb246NC41LHR5cGU6XCJDdXJ2ZVwiLGdlbmVyYXRvcjpcIkN1cnZlLnRvSlNPTlwifX07cmV0dXJuIHQuYXJjTGVuZ3RoRGl2aXNpb25zPXRoaXMuYXJjTGVuZ3RoRGl2aXNpb25zLHQudHlwZT10aGlzLnR5cGUsdH0sZnJvbUpTT046ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuYXJjTGVuZ3RoRGl2aXNpb25zPXQuYXJjTGVuZ3RoRGl2aXNpb25zLHRoaXN9fSksSnUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoWnUucHJvdG90eXBlKSxKdS5wcm90b3R5cGUuY29uc3RydWN0b3I9SnUsSnUucHJvdG90eXBlLmlzRWxsaXBzZUN1cnZlPSEwLEp1LnByb3RvdHlwZS5nZXRQb2ludD1mdW5jdGlvbih0LGUpe2NvbnN0IG49ZXx8bmV3IEduLHI9MipNYXRoLlBJO2xldCBpPXRoaXMuYUVuZEFuZ2xlLXRoaXMuYVN0YXJ0QW5nbGU7Y29uc3Qgbz1NYXRoLmFicyhpKTxOdW1iZXIuRVBTSUxPTjtmb3IoO2k8MDspaSs9cjtmb3IoO2k+cjspaS09cjtpPE51bWJlci5FUFNJTE9OJiYoaT1vPzA6ciksITAhPT10aGlzLmFDbG9ja3dpc2V8fG98fChpPT09cj9pPS1yOmktPXIpO2NvbnN0IGE9dGhpcy5hU3RhcnRBbmdsZSt0Kmk7bGV0IHM9dGhpcy5hWCt0aGlzLnhSYWRpdXMqTWF0aC5jb3MoYSksYz10aGlzLmFZK3RoaXMueVJhZGl1cypNYXRoLnNpbihhKTtpZigwIT09dGhpcy5hUm90YXRpb24pe2NvbnN0IHQ9TWF0aC5jb3ModGhpcy5hUm90YXRpb24pLGU9TWF0aC5zaW4odGhpcy5hUm90YXRpb24pLG49cy10aGlzLmFYLHI9Yy10aGlzLmFZO3M9bip0LXIqZSt0aGlzLmFYLGM9biplK3IqdCt0aGlzLmFZfXJldHVybiBuLnNldChzLGMpfSxKdS5wcm90b3R5cGUuY29weT1mdW5jdGlvbih0KXtyZXR1cm4gWnUucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLHQpLHRoaXMuYVg9dC5hWCx0aGlzLmFZPXQuYVksdGhpcy54UmFkaXVzPXQueFJhZGl1cyx0aGlzLnlSYWRpdXM9dC55UmFkaXVzLHRoaXMuYVN0YXJ0QW5nbGU9dC5hU3RhcnRBbmdsZSx0aGlzLmFFbmRBbmdsZT10LmFFbmRBbmdsZSx0aGlzLmFDbG9ja3dpc2U9dC5hQ2xvY2t3aXNlLHRoaXMuYVJvdGF0aW9uPXQuYVJvdGF0aW9uLHRoaXN9LEp1LnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtjb25zdCB0PVp1LnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzKTtyZXR1cm4gdC5hWD10aGlzLmFYLHQuYVk9dGhpcy5hWSx0LnhSYWRpdXM9dGhpcy54UmFkaXVzLHQueVJhZGl1cz10aGlzLnlSYWRpdXMsdC5hU3RhcnRBbmdsZT10aGlzLmFTdGFydEFuZ2xlLHQuYUVuZEFuZ2xlPXRoaXMuYUVuZEFuZ2xlLHQuYUNsb2Nrd2lzZT10aGlzLmFDbG9ja3dpc2UsdC5hUm90YXRpb249dGhpcy5hUm90YXRpb24sdH0sSnUucHJvdG90eXBlLmZyb21KU09OPWZ1bmN0aW9uKHQpe3JldHVybiBadS5wcm90b3R5cGUuZnJvbUpTT04uY2FsbCh0aGlzLHQpLHRoaXMuYVg9dC5hWCx0aGlzLmFZPXQuYVksdGhpcy54UmFkaXVzPXQueFJhZGl1cyx0aGlzLnlSYWRpdXM9dC55UmFkaXVzLHRoaXMuYVN0YXJ0QW5nbGU9dC5hU3RhcnRBbmdsZSx0aGlzLmFFbmRBbmdsZT10LmFFbmRBbmdsZSx0aGlzLmFDbG9ja3dpc2U9dC5hQ2xvY2t3aXNlLHRoaXMuYVJvdGF0aW9uPXQuYVJvdGF0aW9uLHRoaXN9LEt1LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEp1LnByb3RvdHlwZSksS3UucHJvdG90eXBlLmNvbnN0cnVjdG9yPUt1LEt1LnByb3RvdHlwZS5pc0FyY0N1cnZlPSEwO2NvbnN0ICR1PW5ldyBLbix0aD1uZXcgUXUsZWg9bmV3IFF1LG5oPW5ldyBRdTtmdW5jdGlvbiByaCh0PVtdLGU9ITEsbj1cImNlbnRyaXBldGFsXCIscj0uNSl7WnUuY2FsbCh0aGlzKSx0aGlzLnR5cGU9XCJDYXRtdWxsUm9tQ3VydmUzXCIsdGhpcy5wb2ludHM9dCx0aGlzLmNsb3NlZD1lLHRoaXMuY3VydmVUeXBlPW4sdGhpcy50ZW5zaW9uPXJ9ZnVuY3Rpb24gaWgodCxlLG4scixpKXtjb25zdCBvPS41KihyLWUpLGE9LjUqKGktbikscz10KnQ7cmV0dXJuKDIqbi0yKnIrbythKSoodCpzKSsoLTMqbiszKnItMipvLWEpKnMrbyp0K259ZnVuY3Rpb24gb2godCxlLG4scil7cmV0dXJuIGZ1bmN0aW9uKHQsZSl7Y29uc3Qgbj0xLXQ7cmV0dXJuIG4qbiplfSh0LGUpK2Z1bmN0aW9uKHQsZSl7cmV0dXJuIDIqKDEtdCkqdCplfSh0LG4pK2Z1bmN0aW9uKHQsZSl7cmV0dXJuIHQqdCplfSh0LHIpfWZ1bmN0aW9uIGFoKHQsZSxuLHIsaSl7cmV0dXJuIGZ1bmN0aW9uKHQsZSl7Y29uc3Qgbj0xLXQ7cmV0dXJuIG4qbipuKmV9KHQsZSkrZnVuY3Rpb24odCxlKXtjb25zdCBuPTEtdDtyZXR1cm4gMypuKm4qdCplfSh0LG4pK2Z1bmN0aW9uKHQsZSl7cmV0dXJuIDMqKDEtdCkqdCp0KmV9KHQscikrZnVuY3Rpb24odCxlKXtyZXR1cm4gdCp0KnQqZX0odCxpKX1mdW5jdGlvbiBzaCh0PW5ldyBHbixlPW5ldyBHbixuPW5ldyBHbixyPW5ldyBHbil7WnUuY2FsbCh0aGlzKSx0aGlzLnR5cGU9XCJDdWJpY0JlemllckN1cnZlXCIsdGhpcy52MD10LHRoaXMudjE9ZSx0aGlzLnYyPW4sdGhpcy52Mz1yfWZ1bmN0aW9uIGNoKHQ9bmV3IEtuLGU9bmV3IEtuLG49bmV3IEtuLHI9bmV3IEtuKXtadS5jYWxsKHRoaXMpLHRoaXMudHlwZT1cIkN1YmljQmV6aWVyQ3VydmUzXCIsdGhpcy52MD10LHRoaXMudjE9ZSx0aGlzLnYyPW4sdGhpcy52Mz1yfWZ1bmN0aW9uIGxoKHQ9bmV3IEduLGU9bmV3IEduKXtadS5jYWxsKHRoaXMpLHRoaXMudHlwZT1cIkxpbmVDdXJ2ZVwiLHRoaXMudjE9dCx0aGlzLnYyPWV9ZnVuY3Rpb24gdWgodD1uZXcgS24sZT1uZXcgS24pe1p1LmNhbGwodGhpcyksdGhpcy50eXBlPVwiTGluZUN1cnZlM1wiLHRoaXMudjE9dCx0aGlzLnYyPWV9ZnVuY3Rpb24gaGgodD1uZXcgR24sZT1uZXcgR24sbj1uZXcgR24pe1p1LmNhbGwodGhpcyksdGhpcy50eXBlPVwiUXVhZHJhdGljQmV6aWVyQ3VydmVcIix0aGlzLnYwPXQsdGhpcy52MT1lLHRoaXMudjI9bn1mdW5jdGlvbiBkaCh0PW5ldyBLbixlPW5ldyBLbixuPW5ldyBLbil7WnUuY2FsbCh0aGlzKSx0aGlzLnR5cGU9XCJRdWFkcmF0aWNCZXppZXJDdXJ2ZTNcIix0aGlzLnYwPXQsdGhpcy52MT1lLHRoaXMudjI9bn1mdW5jdGlvbiBwaCh0PVtdKXtadS5jYWxsKHRoaXMpLHRoaXMudHlwZT1cIlNwbGluZUN1cnZlXCIsdGhpcy5wb2ludHM9dH1yaC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShadS5wcm90b3R5cGUpLHJoLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1yaCxyaC5wcm90b3R5cGUuaXNDYXRtdWxsUm9tQ3VydmUzPSEwLHJoLnByb3RvdHlwZS5nZXRQb2ludD1mdW5jdGlvbih0LGU9bmV3IEtuKXtjb25zdCBuPWUscj10aGlzLnBvaW50cyxpPXIubGVuZ3RoLG89KGktKHRoaXMuY2xvc2VkPzA6MSkpKnQ7bGV0IGEscyxjPU1hdGguZmxvb3IobyksbD1vLWM7dGhpcy5jbG9zZWQ/Yys9Yz4wPzA6KE1hdGguZmxvb3IoTWF0aC5hYnMoYykvaSkrMSkqaTowPT09bCYmYz09PWktMSYmKGM9aS0yLGw9MSksdGhpcy5jbG9zZWR8fGM+MD9hPXJbKGMtMSklaV06KCR1LnN1YlZlY3RvcnMoclswXSxyWzFdKS5hZGQoclswXSksYT0kdSk7Y29uc3QgdT1yW2MlaV0saD1yWyhjKzEpJWldO2lmKHRoaXMuY2xvc2VkfHxjKzI8aT9zPXJbKGMrMiklaV06KCR1LnN1YlZlY3RvcnMocltpLTFdLHJbaS0yXSkuYWRkKHJbaS0xXSkscz0kdSksXCJjZW50cmlwZXRhbFwiPT09dGhpcy5jdXJ2ZVR5cGV8fFwiY2hvcmRhbFwiPT09dGhpcy5jdXJ2ZVR5cGUpe2NvbnN0IHQ9XCJjaG9yZGFsXCI9PT10aGlzLmN1cnZlVHlwZT8uNTouMjU7bGV0IGU9TWF0aC5wb3coYS5kaXN0YW5jZVRvU3F1YXJlZCh1KSx0KSxuPU1hdGgucG93KHUuZGlzdGFuY2VUb1NxdWFyZWQoaCksdCkscj1NYXRoLnBvdyhoLmRpc3RhbmNlVG9TcXVhcmVkKHMpLHQpO248MWUtNCYmKG49MSksZTwxZS00JiYoZT1uKSxyPDFlLTQmJihyPW4pLHRoLmluaXROb251bmlmb3JtQ2F0bXVsbFJvbShhLngsdS54LGgueCxzLngsZSxuLHIpLGVoLmluaXROb251bmlmb3JtQ2F0bXVsbFJvbShhLnksdS55LGgueSxzLnksZSxuLHIpLG5oLmluaXROb251bmlmb3JtQ2F0bXVsbFJvbShhLnosdS56LGgueixzLnosZSxuLHIpfWVsc2VcImNhdG11bGxyb21cIj09PXRoaXMuY3VydmVUeXBlJiYodGguaW5pdENhdG11bGxSb20oYS54LHUueCxoLngscy54LHRoaXMudGVuc2lvbiksZWguaW5pdENhdG11bGxSb20oYS55LHUueSxoLnkscy55LHRoaXMudGVuc2lvbiksbmguaW5pdENhdG11bGxSb20oYS56LHUueixoLnoscy56LHRoaXMudGVuc2lvbikpO3JldHVybiBuLnNldCh0aC5jYWxjKGwpLGVoLmNhbGMobCksbmguY2FsYyhsKSksbn0scmgucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24odCl7WnUucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLHQpLHRoaXMucG9pbnRzPVtdO2ZvcihsZXQgZT0wLG49dC5wb2ludHMubGVuZ3RoO2U8bjtlKyspe2NvbnN0IG49dC5wb2ludHNbZV07dGhpcy5wb2ludHMucHVzaChuLmNsb25lKCkpfXJldHVybiB0aGlzLmNsb3NlZD10LmNsb3NlZCx0aGlzLmN1cnZlVHlwZT10LmN1cnZlVHlwZSx0aGlzLnRlbnNpb249dC50ZW5zaW9uLHRoaXN9LHJoLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtjb25zdCB0PVp1LnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzKTt0LnBvaW50cz1bXTtmb3IobGV0IGU9MCxuPXRoaXMucG9pbnRzLmxlbmd0aDtlPG47ZSsrKXtjb25zdCBuPXRoaXMucG9pbnRzW2VdO3QucG9pbnRzLnB1c2gobi50b0FycmF5KCkpfXJldHVybiB0LmNsb3NlZD10aGlzLmNsb3NlZCx0LmN1cnZlVHlwZT10aGlzLmN1cnZlVHlwZSx0LnRlbnNpb249dGhpcy50ZW5zaW9uLHR9LHJoLnByb3RvdHlwZS5mcm9tSlNPTj1mdW5jdGlvbih0KXtadS5wcm90b3R5cGUuZnJvbUpTT04uY2FsbCh0aGlzLHQpLHRoaXMucG9pbnRzPVtdO2ZvcihsZXQgZT0wLG49dC5wb2ludHMubGVuZ3RoO2U8bjtlKyspe2NvbnN0IG49dC5wb2ludHNbZV07dGhpcy5wb2ludHMucHVzaCgobmV3IEtuKS5mcm9tQXJyYXkobikpfXJldHVybiB0aGlzLmNsb3NlZD10LmNsb3NlZCx0aGlzLmN1cnZlVHlwZT10LmN1cnZlVHlwZSx0aGlzLnRlbnNpb249dC50ZW5zaW9uLHRoaXN9LHNoLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFp1LnByb3RvdHlwZSksc2gucHJvdG90eXBlLmNvbnN0cnVjdG9yPXNoLHNoLnByb3RvdHlwZS5pc0N1YmljQmV6aWVyQ3VydmU9ITAsc2gucHJvdG90eXBlLmdldFBvaW50PWZ1bmN0aW9uKHQsZT1uZXcgR24pe2NvbnN0IG49ZSxyPXRoaXMudjAsaT10aGlzLnYxLG89dGhpcy52MixhPXRoaXMudjM7cmV0dXJuIG4uc2V0KGFoKHQsci54LGkueCxvLngsYS54KSxhaCh0LHIueSxpLnksby55LGEueSkpLG59LHNoLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKHQpe3JldHVybiBadS5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsdCksdGhpcy52MC5jb3B5KHQudjApLHRoaXMudjEuY29weSh0LnYxKSx0aGlzLnYyLmNvcHkodC52MiksdGhpcy52My5jb3B5KHQudjMpLHRoaXN9LHNoLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtjb25zdCB0PVp1LnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzKTtyZXR1cm4gdC52MD10aGlzLnYwLnRvQXJyYXkoKSx0LnYxPXRoaXMudjEudG9BcnJheSgpLHQudjI9dGhpcy52Mi50b0FycmF5KCksdC52Mz10aGlzLnYzLnRvQXJyYXkoKSx0fSxzaC5wcm90b3R5cGUuZnJvbUpTT049ZnVuY3Rpb24odCl7cmV0dXJuIFp1LnByb3RvdHlwZS5mcm9tSlNPTi5jYWxsKHRoaXMsdCksdGhpcy52MC5mcm9tQXJyYXkodC52MCksdGhpcy52MS5mcm9tQXJyYXkodC52MSksdGhpcy52Mi5mcm9tQXJyYXkodC52MiksdGhpcy52My5mcm9tQXJyYXkodC52MyksdGhpc30sY2gucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoWnUucHJvdG90eXBlKSxjaC5wcm90b3R5cGUuY29uc3RydWN0b3I9Y2gsY2gucHJvdG90eXBlLmlzQ3ViaWNCZXppZXJDdXJ2ZTM9ITAsY2gucHJvdG90eXBlLmdldFBvaW50PWZ1bmN0aW9uKHQsZT1uZXcgS24pe2NvbnN0IG49ZSxyPXRoaXMudjAsaT10aGlzLnYxLG89dGhpcy52MixhPXRoaXMudjM7cmV0dXJuIG4uc2V0KGFoKHQsci54LGkueCxvLngsYS54KSxhaCh0LHIueSxpLnksby55LGEueSksYWgodCxyLnosaS56LG8ueixhLnopKSxufSxjaC5wcm90b3R5cGUuY29weT1mdW5jdGlvbih0KXtyZXR1cm4gWnUucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLHQpLHRoaXMudjAuY29weSh0LnYwKSx0aGlzLnYxLmNvcHkodC52MSksdGhpcy52Mi5jb3B5KHQudjIpLHRoaXMudjMuY29weSh0LnYzKSx0aGlzfSxjaC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7Y29uc3QgdD1adS5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7cmV0dXJuIHQudjA9dGhpcy52MC50b0FycmF5KCksdC52MT10aGlzLnYxLnRvQXJyYXkoKSx0LnYyPXRoaXMudjIudG9BcnJheSgpLHQudjM9dGhpcy52My50b0FycmF5KCksdH0sY2gucHJvdG90eXBlLmZyb21KU09OPWZ1bmN0aW9uKHQpe3JldHVybiBadS5wcm90b3R5cGUuZnJvbUpTT04uY2FsbCh0aGlzLHQpLHRoaXMudjAuZnJvbUFycmF5KHQudjApLHRoaXMudjEuZnJvbUFycmF5KHQudjEpLHRoaXMudjIuZnJvbUFycmF5KHQudjIpLHRoaXMudjMuZnJvbUFycmF5KHQudjMpLHRoaXN9LGxoLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFp1LnByb3RvdHlwZSksbGgucHJvdG90eXBlLmNvbnN0cnVjdG9yPWxoLGxoLnByb3RvdHlwZS5pc0xpbmVDdXJ2ZT0hMCxsaC5wcm90b3R5cGUuZ2V0UG9pbnQ9ZnVuY3Rpb24odCxlPW5ldyBHbil7Y29uc3Qgbj1lO3JldHVybiAxPT09dD9uLmNvcHkodGhpcy52Mik6KG4uY29weSh0aGlzLnYyKS5zdWIodGhpcy52MSksbi5tdWx0aXBseVNjYWxhcih0KS5hZGQodGhpcy52MSkpLG59LGxoLnByb3RvdHlwZS5nZXRQb2ludEF0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuZ2V0UG9pbnQodCxlKX0sbGgucHJvdG90eXBlLmdldFRhbmdlbnQ9ZnVuY3Rpb24odCxlKXtjb25zdCBuPWV8fG5ldyBHbjtyZXR1cm4gbi5jb3B5KHRoaXMudjIpLnN1Yih0aGlzLnYxKS5ub3JtYWxpemUoKSxufSxsaC5wcm90b3R5cGUuY29weT1mdW5jdGlvbih0KXtyZXR1cm4gWnUucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLHQpLHRoaXMudjEuY29weSh0LnYxKSx0aGlzLnYyLmNvcHkodC52MiksdGhpc30sbGgucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe2NvbnN0IHQ9WnUucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMpO3JldHVybiB0LnYxPXRoaXMudjEudG9BcnJheSgpLHQudjI9dGhpcy52Mi50b0FycmF5KCksdH0sbGgucHJvdG90eXBlLmZyb21KU09OPWZ1bmN0aW9uKHQpe3JldHVybiBadS5wcm90b3R5cGUuZnJvbUpTT04uY2FsbCh0aGlzLHQpLHRoaXMudjEuZnJvbUFycmF5KHQudjEpLHRoaXMudjIuZnJvbUFycmF5KHQudjIpLHRoaXN9LHVoLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFp1LnByb3RvdHlwZSksdWgucHJvdG90eXBlLmNvbnN0cnVjdG9yPXVoLHVoLnByb3RvdHlwZS5pc0xpbmVDdXJ2ZTM9ITAsdWgucHJvdG90eXBlLmdldFBvaW50PWZ1bmN0aW9uKHQsZT1uZXcgS24pe2NvbnN0IG49ZTtyZXR1cm4gMT09PXQ/bi5jb3B5KHRoaXMudjIpOihuLmNvcHkodGhpcy52Mikuc3ViKHRoaXMudjEpLG4ubXVsdGlwbHlTY2FsYXIodCkuYWRkKHRoaXMudjEpKSxufSx1aC5wcm90b3R5cGUuZ2V0UG9pbnRBdD1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmdldFBvaW50KHQsZSl9LHVoLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKHQpe3JldHVybiBadS5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsdCksdGhpcy52MS5jb3B5KHQudjEpLHRoaXMudjIuY29weSh0LnYyKSx0aGlzfSx1aC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7Y29uc3QgdD1adS5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7cmV0dXJuIHQudjE9dGhpcy52MS50b0FycmF5KCksdC52Mj10aGlzLnYyLnRvQXJyYXkoKSx0fSx1aC5wcm90b3R5cGUuZnJvbUpTT049ZnVuY3Rpb24odCl7cmV0dXJuIFp1LnByb3RvdHlwZS5mcm9tSlNPTi5jYWxsKHRoaXMsdCksdGhpcy52MS5mcm9tQXJyYXkodC52MSksdGhpcy52Mi5mcm9tQXJyYXkodC52MiksdGhpc30saGgucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoWnUucHJvdG90eXBlKSxoaC5wcm90b3R5cGUuY29uc3RydWN0b3I9aGgsaGgucHJvdG90eXBlLmlzUXVhZHJhdGljQmV6aWVyQ3VydmU9ITAsaGgucHJvdG90eXBlLmdldFBvaW50PWZ1bmN0aW9uKHQsZT1uZXcgR24pe2NvbnN0IG49ZSxyPXRoaXMudjAsaT10aGlzLnYxLG89dGhpcy52MjtyZXR1cm4gbi5zZXQob2godCxyLngsaS54LG8ueCksb2godCxyLnksaS55LG8ueSkpLG59LGhoLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKHQpe3JldHVybiBadS5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsdCksdGhpcy52MC5jb3B5KHQudjApLHRoaXMudjEuY29weSh0LnYxKSx0aGlzLnYyLmNvcHkodC52MiksdGhpc30saGgucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe2NvbnN0IHQ9WnUucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMpO3JldHVybiB0LnYwPXRoaXMudjAudG9BcnJheSgpLHQudjE9dGhpcy52MS50b0FycmF5KCksdC52Mj10aGlzLnYyLnRvQXJyYXkoKSx0fSxoaC5wcm90b3R5cGUuZnJvbUpTT049ZnVuY3Rpb24odCl7cmV0dXJuIFp1LnByb3RvdHlwZS5mcm9tSlNPTi5jYWxsKHRoaXMsdCksdGhpcy52MC5mcm9tQXJyYXkodC52MCksdGhpcy52MS5mcm9tQXJyYXkodC52MSksdGhpcy52Mi5mcm9tQXJyYXkodC52MiksdGhpc30sZGgucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoWnUucHJvdG90eXBlKSxkaC5wcm90b3R5cGUuY29uc3RydWN0b3I9ZGgsZGgucHJvdG90eXBlLmlzUXVhZHJhdGljQmV6aWVyQ3VydmUzPSEwLGRoLnByb3RvdHlwZS5nZXRQb2ludD1mdW5jdGlvbih0LGU9bmV3IEtuKXtjb25zdCBuPWUscj10aGlzLnYwLGk9dGhpcy52MSxvPXRoaXMudjI7cmV0dXJuIG4uc2V0KG9oKHQsci54LGkueCxvLngpLG9oKHQsci55LGkueSxvLnkpLG9oKHQsci56LGkueixvLnopKSxufSxkaC5wcm90b3R5cGUuY29weT1mdW5jdGlvbih0KXtyZXR1cm4gWnUucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLHQpLHRoaXMudjAuY29weSh0LnYwKSx0aGlzLnYxLmNvcHkodC52MSksdGhpcy52Mi5jb3B5KHQudjIpLHRoaXN9LGRoLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtjb25zdCB0PVp1LnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzKTtyZXR1cm4gdC52MD10aGlzLnYwLnRvQXJyYXkoKSx0LnYxPXRoaXMudjEudG9BcnJheSgpLHQudjI9dGhpcy52Mi50b0FycmF5KCksdH0sZGgucHJvdG90eXBlLmZyb21KU09OPWZ1bmN0aW9uKHQpe3JldHVybiBadS5wcm90b3R5cGUuZnJvbUpTT04uY2FsbCh0aGlzLHQpLHRoaXMudjAuZnJvbUFycmF5KHQudjApLHRoaXMudjEuZnJvbUFycmF5KHQudjEpLHRoaXMudjIuZnJvbUFycmF5KHQudjIpLHRoaXN9LHBoLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFp1LnByb3RvdHlwZSkscGgucHJvdG90eXBlLmNvbnN0cnVjdG9yPXBoLHBoLnByb3RvdHlwZS5pc1NwbGluZUN1cnZlPSEwLHBoLnByb3RvdHlwZS5nZXRQb2ludD1mdW5jdGlvbih0LGU9bmV3IEduKXtjb25zdCBuPWUscj10aGlzLnBvaW50cyxpPShyLmxlbmd0aC0xKSp0LG89TWF0aC5mbG9vcihpKSxhPWktbyxzPXJbMD09PW8/bzpvLTFdLGM9cltvXSxsPXJbbz5yLmxlbmd0aC0yP3IubGVuZ3RoLTE6bysxXSx1PXJbbz5yLmxlbmd0aC0zP3IubGVuZ3RoLTE6bysyXTtyZXR1cm4gbi5zZXQoaWgoYSxzLngsYy54LGwueCx1LngpLGloKGEscy55LGMueSxsLnksdS55KSksbn0scGgucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24odCl7WnUucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLHQpLHRoaXMucG9pbnRzPVtdO2ZvcihsZXQgZT0wLG49dC5wb2ludHMubGVuZ3RoO2U8bjtlKyspe2NvbnN0IG49dC5wb2ludHNbZV07dGhpcy5wb2ludHMucHVzaChuLmNsb25lKCkpfXJldHVybiB0aGlzfSxwaC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7Y29uc3QgdD1adS5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7dC5wb2ludHM9W107Zm9yKGxldCBlPTAsbj10aGlzLnBvaW50cy5sZW5ndGg7ZTxuO2UrKyl7Y29uc3Qgbj10aGlzLnBvaW50c1tlXTt0LnBvaW50cy5wdXNoKG4udG9BcnJheSgpKX1yZXR1cm4gdH0scGgucHJvdG90eXBlLmZyb21KU09OPWZ1bmN0aW9uKHQpe1p1LnByb3RvdHlwZS5mcm9tSlNPTi5jYWxsKHRoaXMsdCksdGhpcy5wb2ludHM9W107Zm9yKGxldCBlPTAsbj10LnBvaW50cy5sZW5ndGg7ZTxuO2UrKyl7Y29uc3Qgbj10LnBvaW50c1tlXTt0aGlzLnBvaW50cy5wdXNoKChuZXcgR24pLmZyb21BcnJheShuKSl9cmV0dXJuIHRoaXN9O3ZhciBmaD1PYmplY3QuZnJlZXplKHtfX3Byb3RvX186bnVsbCxBcmNDdXJ2ZTpLdSxDYXRtdWxsUm9tQ3VydmUzOnJoLEN1YmljQmV6aWVyQ3VydmU6c2gsQ3ViaWNCZXppZXJDdXJ2ZTM6Y2gsRWxsaXBzZUN1cnZlOkp1LExpbmVDdXJ2ZTpsaCxMaW5lQ3VydmUzOnVoLFF1YWRyYXRpY0JlemllckN1cnZlOmhoLFF1YWRyYXRpY0JlemllckN1cnZlMzpkaCxTcGxpbmVDdXJ2ZTpwaH0pO2Z1bmN0aW9uIG1oKCl7WnUuY2FsbCh0aGlzKSx0aGlzLnR5cGU9XCJDdXJ2ZVBhdGhcIix0aGlzLmN1cnZlcz1bXSx0aGlzLmF1dG9DbG9zZT0hMX1mdW5jdGlvbiBnaCh0KXttaC5jYWxsKHRoaXMpLHRoaXMudHlwZT1cIlBhdGhcIix0aGlzLmN1cnJlbnRQb2ludD1uZXcgR24sdCYmdGhpcy5zZXRGcm9tUG9pbnRzKHQpfWZ1bmN0aW9uIHZoKHQpe2doLmNhbGwodGhpcyx0KSx0aGlzLnV1aWQ9em4uZ2VuZXJhdGVVVUlEKCksdGhpcy50eXBlPVwiU2hhcGVcIix0aGlzLmhvbGVzPVtdfWZ1bmN0aW9uIHloKHQsZT0xKXtKci5jYWxsKHRoaXMpLHRoaXMudHlwZT1cIkxpZ2h0XCIsdGhpcy5jb2xvcj1uZXcgeWkodCksdGhpcy5pbnRlbnNpdHk9ZX1mdW5jdGlvbiB4aCh0LGUsbil7eWguY2FsbCh0aGlzLHQsbiksdGhpcy50eXBlPVwiSGVtaXNwaGVyZUxpZ2h0XCIsdGhpcy5wb3NpdGlvbi5jb3B5KEpyLkRlZmF1bHRVcCksdGhpcy51cGRhdGVNYXRyaXgoKSx0aGlzLmdyb3VuZENvbG9yPW5ldyB5aShlKX1mdW5jdGlvbiBiaCh0KXt0aGlzLmNhbWVyYT10LHRoaXMuYmlhcz0wLHRoaXMubm9ybWFsQmlhcz0wLHRoaXMucmFkaXVzPTEsdGhpcy5tYXBTaXplPW5ldyBHbig1MTIsNTEyKSx0aGlzLm1hcD1udWxsLHRoaXMubWFwUGFzcz1udWxsLHRoaXMubWF0cml4PW5ldyBUcix0aGlzLmF1dG9VcGRhdGU9ITAsdGhpcy5uZWVkc1VwZGF0ZT0hMSx0aGlzLl9mcnVzdHVtPW5ldyBMbyx0aGlzLl9mcmFtZUV4dGVudHM9bmV3IEduKDEsMSksdGhpcy5fdmlld3BvcnRDb3VudD0xLHRoaXMuX3ZpZXdwb3J0cz1bbmV3IHFuKDAsMCwxLDEpXX1mdW5jdGlvbiB3aCgpe2JoLmNhbGwodGhpcyxuZXcgd28oNTAsMSwuNSw1MDApKSx0aGlzLmZvY3VzPTF9ZnVuY3Rpb24gX2godCxlLG4scixpLG8pe3loLmNhbGwodGhpcyx0LGUpLHRoaXMudHlwZT1cIlNwb3RMaWdodFwiLHRoaXMucG9zaXRpb24uY29weShKci5EZWZhdWx0VXApLHRoaXMudXBkYXRlTWF0cml4KCksdGhpcy50YXJnZXQ9bmV3IEpyLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwicG93ZXJcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW50ZW5zaXR5Kk1hdGguUEl9LHNldDpmdW5jdGlvbih0KXt0aGlzLmludGVuc2l0eT10L01hdGguUEl9fSksdGhpcy5kaXN0YW5jZT12b2lkIDAhPT1uP246MCx0aGlzLmFuZ2xlPXZvaWQgMCE9PXI/cjpNYXRoLlBJLzMsdGhpcy5wZW51bWJyYT12b2lkIDAhPT1pP2k6MCx0aGlzLmRlY2F5PXZvaWQgMCE9PW8/bzoxLHRoaXMuc2hhZG93PW5ldyB3aH1mdW5jdGlvbiBNaCgpe2JoLmNhbGwodGhpcyxuZXcgd28oOTAsMSwuNSw1MDApKSx0aGlzLl9mcmFtZUV4dGVudHM9bmV3IEduKDQsMiksdGhpcy5fdmlld3BvcnRDb3VudD02LHRoaXMuX3ZpZXdwb3J0cz1bbmV3IHFuKDIsMSwxLDEpLG5ldyBxbigwLDEsMSwxKSxuZXcgcW4oMywxLDEsMSksbmV3IHFuKDEsMSwxLDEpLG5ldyBxbigzLDAsMSwxKSxuZXcgcW4oMSwwLDEsMSldLHRoaXMuX2N1YmVEaXJlY3Rpb25zPVtuZXcgS24oMSwwLDApLG5ldyBLbigtMSwwLDApLG5ldyBLbigwLDAsMSksbmV3IEtuKDAsMCwtMSksbmV3IEtuKDAsMSwwKSxuZXcgS24oMCwtMSwwKV0sdGhpcy5fY3ViZVVwcz1bbmV3IEtuKDAsMSwwKSxuZXcgS24oMCwxLDApLG5ldyBLbigwLDEsMCksbmV3IEtuKDAsMSwwKSxuZXcgS24oMCwwLDEpLG5ldyBLbigwLDAsLTEpXX1mdW5jdGlvbiBTaCh0LGUsbixyKXt5aC5jYWxsKHRoaXMsdCxlKSx0aGlzLnR5cGU9XCJQb2ludExpZ2h0XCIsT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJwb3dlclwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gNCp0aGlzLmludGVuc2l0eSpNYXRoLlBJfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5pbnRlbnNpdHk9dC8oNCpNYXRoLlBJKX19KSx0aGlzLmRpc3RhbmNlPXZvaWQgMCE9PW4/bjowLHRoaXMuZGVjYXk9dm9pZCAwIT09cj9yOjEsdGhpcy5zaGFkb3c9bmV3IE1ofWZ1bmN0aW9uIFRoKHQsZSxuLHIsaSxvKXtiby5jYWxsKHRoaXMpLHRoaXMudHlwZT1cIk9ydGhvZ3JhcGhpY0NhbWVyYVwiLHRoaXMuem9vbT0xLHRoaXMudmlldz1udWxsLHRoaXMubGVmdD12b2lkIDAhPT10P3Q6LTEsdGhpcy5yaWdodD12b2lkIDAhPT1lP2U6MSx0aGlzLnRvcD12b2lkIDAhPT1uP246MSx0aGlzLmJvdHRvbT12b2lkIDAhPT1yP3I6LTEsdGhpcy5uZWFyPXZvaWQgMCE9PWk/aTouMSx0aGlzLmZhcj12b2lkIDAhPT1vP286MmUzLHRoaXMudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpfWZ1bmN0aW9uIEVoKCl7YmguY2FsbCh0aGlzLG5ldyBUaCgtNSw1LDUsLTUsLjUsNTAwKSl9ZnVuY3Rpb24gQWgodCxlKXt5aC5jYWxsKHRoaXMsdCxlKSx0aGlzLnR5cGU9XCJEaXJlY3Rpb25hbExpZ2h0XCIsdGhpcy5wb3NpdGlvbi5jb3B5KEpyLkRlZmF1bHRVcCksdGhpcy51cGRhdGVNYXRyaXgoKSx0aGlzLnRhcmdldD1uZXcgSnIsdGhpcy5zaGFkb3c9bmV3IEVofWZ1bmN0aW9uIExoKHQsZSl7eWguY2FsbCh0aGlzLHQsZSksdGhpcy50eXBlPVwiQW1iaWVudExpZ2h0XCJ9ZnVuY3Rpb24gUmgodCxlLG4scil7eWguY2FsbCh0aGlzLHQsZSksdGhpcy50eXBlPVwiUmVjdEFyZWFMaWdodFwiLHRoaXMud2lkdGg9dm9pZCAwIT09bj9uOjEwLHRoaXMuaGVpZ2h0PXZvaWQgMCE9PXI/cjoxMH1taC5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKFp1LnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOm1oLGFkZDpmdW5jdGlvbih0KXt0aGlzLmN1cnZlcy5wdXNoKHQpfSxjbG9zZVBhdGg6ZnVuY3Rpb24oKXtjb25zdCB0PXRoaXMuY3VydmVzWzBdLmdldFBvaW50KDApLGU9dGhpcy5jdXJ2ZXNbdGhpcy5jdXJ2ZXMubGVuZ3RoLTFdLmdldFBvaW50KDEpO3QuZXF1YWxzKGUpfHx0aGlzLmN1cnZlcy5wdXNoKG5ldyBsaChlLHQpKX0sZ2V0UG9pbnQ6ZnVuY3Rpb24odCl7Y29uc3QgZT10KnRoaXMuZ2V0TGVuZ3RoKCksbj10aGlzLmdldEN1cnZlTGVuZ3RocygpO2xldCByPTA7Zm9yKDtyPG4ubGVuZ3RoOyl7aWYobltyXT49ZSl7Y29uc3QgdD1uW3JdLWUsaT10aGlzLmN1cnZlc1tyXSxvPWkuZ2V0TGVuZ3RoKCksYT0wPT09bz8wOjEtdC9vO3JldHVybiBpLmdldFBvaW50QXQoYSl9cisrfXJldHVybiBudWxsfSxnZXRMZW5ndGg6ZnVuY3Rpb24oKXtjb25zdCB0PXRoaXMuZ2V0Q3VydmVMZW5ndGhzKCk7cmV0dXJuIHRbdC5sZW5ndGgtMV19LHVwZGF0ZUFyY0xlbmd0aHM6ZnVuY3Rpb24oKXt0aGlzLm5lZWRzVXBkYXRlPSEwLHRoaXMuY2FjaGVMZW5ndGhzPW51bGwsdGhpcy5nZXRDdXJ2ZUxlbmd0aHMoKX0sZ2V0Q3VydmVMZW5ndGhzOmZ1bmN0aW9uKCl7aWYodGhpcy5jYWNoZUxlbmd0aHMmJnRoaXMuY2FjaGVMZW5ndGhzLmxlbmd0aD09PXRoaXMuY3VydmVzLmxlbmd0aClyZXR1cm4gdGhpcy5jYWNoZUxlbmd0aHM7Y29uc3QgdD1bXTtsZXQgZT0wO2ZvcihsZXQgbj0wLHI9dGhpcy5jdXJ2ZXMubGVuZ3RoO248cjtuKyspZSs9dGhpcy5jdXJ2ZXNbbl0uZ2V0TGVuZ3RoKCksdC5wdXNoKGUpO3JldHVybiB0aGlzLmNhY2hlTGVuZ3Rocz10LHR9LGdldFNwYWNlZFBvaW50czpmdW5jdGlvbih0PTQwKXtjb25zdCBlPVtdO2ZvcihsZXQgbj0wO248PXQ7bisrKWUucHVzaCh0aGlzLmdldFBvaW50KG4vdCkpO3JldHVybiB0aGlzLmF1dG9DbG9zZSYmZS5wdXNoKGVbMF0pLGV9LGdldFBvaW50czpmdW5jdGlvbih0PTEyKXtjb25zdCBlPVtdO2xldCBuO2ZvcihsZXQgcj0wLGk9dGhpcy5jdXJ2ZXM7cjxpLmxlbmd0aDtyKyspe2NvbnN0IG89aVtyXSxhPW8mJm8uaXNFbGxpcHNlQ3VydmU/Mip0Om8mJihvLmlzTGluZUN1cnZlfHxvLmlzTGluZUN1cnZlMyk/MTpvJiZvLmlzU3BsaW5lQ3VydmU/dCpvLnBvaW50cy5sZW5ndGg6dCxzPW8uZ2V0UG9pbnRzKGEpO2ZvcihsZXQgdD0wO3Q8cy5sZW5ndGg7dCsrKXtjb25zdCByPXNbdF07biYmbi5lcXVhbHMocil8fChlLnB1c2gociksbj1yKX19cmV0dXJuIHRoaXMuYXV0b0Nsb3NlJiZlLmxlbmd0aD4xJiYhZVtlLmxlbmd0aC0xXS5lcXVhbHMoZVswXSkmJmUucHVzaChlWzBdKSxlfSxjb3B5OmZ1bmN0aW9uKHQpe1p1LnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyx0KSx0aGlzLmN1cnZlcz1bXTtmb3IobGV0IGU9MCxuPXQuY3VydmVzLmxlbmd0aDtlPG47ZSsrKXtjb25zdCBuPXQuY3VydmVzW2VdO3RoaXMuY3VydmVzLnB1c2gobi5jbG9uZSgpKX1yZXR1cm4gdGhpcy5hdXRvQ2xvc2U9dC5hdXRvQ2xvc2UsdGhpc30sdG9KU09OOmZ1bmN0aW9uKCl7Y29uc3QgdD1adS5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7dC5hdXRvQ2xvc2U9dGhpcy5hdXRvQ2xvc2UsdC5jdXJ2ZXM9W107Zm9yKGxldCBlPTAsbj10aGlzLmN1cnZlcy5sZW5ndGg7ZTxuO2UrKyl7Y29uc3Qgbj10aGlzLmN1cnZlc1tlXTt0LmN1cnZlcy5wdXNoKG4udG9KU09OKCkpfXJldHVybiB0fSxmcm9tSlNPTjpmdW5jdGlvbih0KXtadS5wcm90b3R5cGUuZnJvbUpTT04uY2FsbCh0aGlzLHQpLHRoaXMuYXV0b0Nsb3NlPXQuYXV0b0Nsb3NlLHRoaXMuY3VydmVzPVtdO2ZvcihsZXQgZT0wLG49dC5jdXJ2ZXMubGVuZ3RoO2U8bjtlKyspe2NvbnN0IG49dC5jdXJ2ZXNbZV07dGhpcy5jdXJ2ZXMucHVzaCgobmV3IGZoW24udHlwZV0pLmZyb21KU09OKG4pKX1yZXR1cm4gdGhpc319KSxnaC5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKG1oLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOmdoLHNldEZyb21Qb2ludHM6ZnVuY3Rpb24odCl7dGhpcy5tb3ZlVG8odFswXS54LHRbMF0ueSk7Zm9yKGxldCBlPTEsbj10Lmxlbmd0aDtlPG47ZSsrKXRoaXMubGluZVRvKHRbZV0ueCx0W2VdLnkpO3JldHVybiB0aGlzfSxtb3ZlVG86ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5jdXJyZW50UG9pbnQuc2V0KHQsZSksdGhpc30sbGluZVRvOmZ1bmN0aW9uKHQsZSl7Y29uc3Qgbj1uZXcgbGgodGhpcy5jdXJyZW50UG9pbnQuY2xvbmUoKSxuZXcgR24odCxlKSk7cmV0dXJuIHRoaXMuY3VydmVzLnB1c2gobiksdGhpcy5jdXJyZW50UG9pbnQuc2V0KHQsZSksdGhpc30scXVhZHJhdGljQ3VydmVUbzpmdW5jdGlvbih0LGUsbixyKXtjb25zdCBpPW5ldyBoaCh0aGlzLmN1cnJlbnRQb2ludC5jbG9uZSgpLG5ldyBHbih0LGUpLG5ldyBHbihuLHIpKTtyZXR1cm4gdGhpcy5jdXJ2ZXMucHVzaChpKSx0aGlzLmN1cnJlbnRQb2ludC5zZXQobixyKSx0aGlzfSxiZXppZXJDdXJ2ZVRvOmZ1bmN0aW9uKHQsZSxuLHIsaSxvKXtjb25zdCBhPW5ldyBzaCh0aGlzLmN1cnJlbnRQb2ludC5jbG9uZSgpLG5ldyBHbih0LGUpLG5ldyBHbihuLHIpLG5ldyBHbihpLG8pKTtyZXR1cm4gdGhpcy5jdXJ2ZXMucHVzaChhKSx0aGlzLmN1cnJlbnRQb2ludC5zZXQoaSxvKSx0aGlzfSxzcGxpbmVUaHJ1OmZ1bmN0aW9uKHQpe2NvbnN0IGU9bmV3IHBoKFt0aGlzLmN1cnJlbnRQb2ludC5jbG9uZSgpXS5jb25jYXQodCkpO3JldHVybiB0aGlzLmN1cnZlcy5wdXNoKGUpLHRoaXMuY3VycmVudFBvaW50LmNvcHkodFt0Lmxlbmd0aC0xXSksdGhpc30sYXJjOmZ1bmN0aW9uKHQsZSxuLHIsaSxvKXtjb25zdCBhPXRoaXMuY3VycmVudFBvaW50Lngscz10aGlzLmN1cnJlbnRQb2ludC55O3JldHVybiB0aGlzLmFic2FyYyh0K2EsZStzLG4scixpLG8pLHRoaXN9LGFic2FyYzpmdW5jdGlvbih0LGUsbixyLGksbyl7cmV0dXJuIHRoaXMuYWJzZWxsaXBzZSh0LGUsbixuLHIsaSxvKSx0aGlzfSxlbGxpcHNlOmZ1bmN0aW9uKHQsZSxuLHIsaSxvLGEscyl7Y29uc3QgYz10aGlzLmN1cnJlbnRQb2ludC54LGw9dGhpcy5jdXJyZW50UG9pbnQueTtyZXR1cm4gdGhpcy5hYnNlbGxpcHNlKHQrYyxlK2wsbixyLGksbyxhLHMpLHRoaXN9LGFic2VsbGlwc2U6ZnVuY3Rpb24odCxlLG4scixpLG8sYSxzKXtjb25zdCBjPW5ldyBKdSh0LGUsbixyLGksbyxhLHMpO2lmKHRoaXMuY3VydmVzLmxlbmd0aD4wKXtjb25zdCB0PWMuZ2V0UG9pbnQoMCk7dC5lcXVhbHModGhpcy5jdXJyZW50UG9pbnQpfHx0aGlzLmxpbmVUbyh0LngsdC55KX10aGlzLmN1cnZlcy5wdXNoKGMpO2NvbnN0IGw9Yy5nZXRQb2ludCgxKTtyZXR1cm4gdGhpcy5jdXJyZW50UG9pbnQuY29weShsKSx0aGlzfSxjb3B5OmZ1bmN0aW9uKHQpe3JldHVybiBtaC5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsdCksdGhpcy5jdXJyZW50UG9pbnQuY29weSh0LmN1cnJlbnRQb2ludCksdGhpc30sdG9KU09OOmZ1bmN0aW9uKCl7Y29uc3QgdD1taC5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7cmV0dXJuIHQuY3VycmVudFBvaW50PXRoaXMuY3VycmVudFBvaW50LnRvQXJyYXkoKSx0fSxmcm9tSlNPTjpmdW5jdGlvbih0KXtyZXR1cm4gbWgucHJvdG90eXBlLmZyb21KU09OLmNhbGwodGhpcyx0KSx0aGlzLmN1cnJlbnRQb2ludC5mcm9tQXJyYXkodC5jdXJyZW50UG9pbnQpLHRoaXN9fSksdmgucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShnaC5wcm90b3R5cGUpLHtjb25zdHJ1Y3Rvcjp2aCxnZXRQb2ludHNIb2xlczpmdW5jdGlvbih0KXtjb25zdCBlPVtdO2ZvcihsZXQgbj0wLHI9dGhpcy5ob2xlcy5sZW5ndGg7bjxyO24rKyllW25dPXRoaXMuaG9sZXNbbl0uZ2V0UG9pbnRzKHQpO3JldHVybiBlfSxleHRyYWN0UG9pbnRzOmZ1bmN0aW9uKHQpe3JldHVybntzaGFwZTp0aGlzLmdldFBvaW50cyh0KSxob2xlczp0aGlzLmdldFBvaW50c0hvbGVzKHQpfX0sY29weTpmdW5jdGlvbih0KXtnaC5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsdCksdGhpcy5ob2xlcz1bXTtmb3IobGV0IGU9MCxuPXQuaG9sZXMubGVuZ3RoO2U8bjtlKyspe2NvbnN0IG49dC5ob2xlc1tlXTt0aGlzLmhvbGVzLnB1c2gobi5jbG9uZSgpKX1yZXR1cm4gdGhpc30sdG9KU09OOmZ1bmN0aW9uKCl7Y29uc3QgdD1naC5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7dC51dWlkPXRoaXMudXVpZCx0LmhvbGVzPVtdO2ZvcihsZXQgZT0wLG49dGhpcy5ob2xlcy5sZW5ndGg7ZTxuO2UrKyl7Y29uc3Qgbj10aGlzLmhvbGVzW2VdO3QuaG9sZXMucHVzaChuLnRvSlNPTigpKX1yZXR1cm4gdH0sZnJvbUpTT046ZnVuY3Rpb24odCl7Z2gucHJvdG90eXBlLmZyb21KU09OLmNhbGwodGhpcyx0KSx0aGlzLnV1aWQ9dC51dWlkLHRoaXMuaG9sZXM9W107Zm9yKGxldCBlPTAsbj10LmhvbGVzLmxlbmd0aDtlPG47ZSsrKXtjb25zdCBuPXQuaG9sZXNbZV07dGhpcy5ob2xlcy5wdXNoKChuZXcgZ2gpLmZyb21KU09OKG4pKX1yZXR1cm4gdGhpc319KSx5aC5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKEpyLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOnloLGlzTGlnaHQ6ITAsY29weTpmdW5jdGlvbih0KXtyZXR1cm4gSnIucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLHQpLHRoaXMuY29sb3IuY29weSh0LmNvbG9yKSx0aGlzLmludGVuc2l0eT10LmludGVuc2l0eSx0aGlzfSx0b0pTT046ZnVuY3Rpb24odCl7Y29uc3QgZT1Kci5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyx0KTtyZXR1cm4gZS5vYmplY3QuY29sb3I9dGhpcy5jb2xvci5nZXRIZXgoKSxlLm9iamVjdC5pbnRlbnNpdHk9dGhpcy5pbnRlbnNpdHksdm9pZCAwIT09dGhpcy5ncm91bmRDb2xvciYmKGUub2JqZWN0Lmdyb3VuZENvbG9yPXRoaXMuZ3JvdW5kQ29sb3IuZ2V0SGV4KCkpLHZvaWQgMCE9PXRoaXMuZGlzdGFuY2UmJihlLm9iamVjdC5kaXN0YW5jZT10aGlzLmRpc3RhbmNlKSx2b2lkIDAhPT10aGlzLmFuZ2xlJiYoZS5vYmplY3QuYW5nbGU9dGhpcy5hbmdsZSksdm9pZCAwIT09dGhpcy5kZWNheSYmKGUub2JqZWN0LmRlY2F5PXRoaXMuZGVjYXkpLHZvaWQgMCE9PXRoaXMucGVudW1icmEmJihlLm9iamVjdC5wZW51bWJyYT10aGlzLnBlbnVtYnJhKSx2b2lkIDAhPT10aGlzLnNoYWRvdyYmKGUub2JqZWN0LnNoYWRvdz10aGlzLnNoYWRvdy50b0pTT04oKSksZX19KSx4aC5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKHloLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOnhoLGlzSGVtaXNwaGVyZUxpZ2h0OiEwLGNvcHk6ZnVuY3Rpb24odCl7cmV0dXJuIHloLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyx0KSx0aGlzLmdyb3VuZENvbG9yLmNvcHkodC5ncm91bmRDb2xvciksdGhpc319KSxPYmplY3QuYXNzaWduKGJoLnByb3RvdHlwZSx7X3Byb2pTY3JlZW5NYXRyaXg6bmV3IFRyLF9saWdodFBvc2l0aW9uV29ybGQ6bmV3IEtuLF9sb29rVGFyZ2V0Om5ldyBLbixnZXRWaWV3cG9ydENvdW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3ZpZXdwb3J0Q291bnR9LGdldEZydXN0dW06ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZnJ1c3R1bX0sdXBkYXRlTWF0cmljZXM6ZnVuY3Rpb24odCl7Y29uc3QgZT10aGlzLmNhbWVyYSxuPXRoaXMubWF0cml4LHI9dGhpcy5fcHJvalNjcmVlbk1hdHJpeCxpPXRoaXMuX2xvb2tUYXJnZXQsbz10aGlzLl9saWdodFBvc2l0aW9uV29ybGQ7by5zZXRGcm9tTWF0cml4UG9zaXRpb24odC5tYXRyaXhXb3JsZCksZS5wb3NpdGlvbi5jb3B5KG8pLGkuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKHQudGFyZ2V0Lm1hdHJpeFdvcmxkKSxlLmxvb2tBdChpKSxlLnVwZGF0ZU1hdHJpeFdvcmxkKCksci5tdWx0aXBseU1hdHJpY2VzKGUucHJvamVjdGlvbk1hdHJpeCxlLm1hdHJpeFdvcmxkSW52ZXJzZSksdGhpcy5fZnJ1c3R1bS5zZXRGcm9tUHJvamVjdGlvbk1hdHJpeChyKSxuLnNldCguNSwwLDAsLjUsMCwuNSwwLC41LDAsMCwuNSwuNSwwLDAsMCwxKSxuLm11bHRpcGx5KGUucHJvamVjdGlvbk1hdHJpeCksbi5tdWx0aXBseShlLm1hdHJpeFdvcmxkSW52ZXJzZSl9LGdldFZpZXdwb3J0OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl92aWV3cG9ydHNbdF19LGdldEZyYW1lRXh0ZW50czpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9mcmFtZUV4dGVudHN9LGNvcHk6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY2FtZXJhPXQuY2FtZXJhLmNsb25lKCksdGhpcy5iaWFzPXQuYmlhcyx0aGlzLnJhZGl1cz10LnJhZGl1cyx0aGlzLm1hcFNpemUuY29weSh0Lm1hcFNpemUpLHRoaXN9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKS5jb3B5KHRoaXMpfSx0b0pTT046ZnVuY3Rpb24oKXtjb25zdCB0PXt9O3JldHVybiAwIT09dGhpcy5iaWFzJiYodC5iaWFzPXRoaXMuYmlhcyksMCE9PXRoaXMubm9ybWFsQmlhcyYmKHQubm9ybWFsQmlhcz10aGlzLm5vcm1hbEJpYXMpLDEhPT10aGlzLnJhZGl1cyYmKHQucmFkaXVzPXRoaXMucmFkaXVzKSw1MTI9PT10aGlzLm1hcFNpemUueCYmNTEyPT09dGhpcy5tYXBTaXplLnl8fCh0Lm1hcFNpemU9dGhpcy5tYXBTaXplLnRvQXJyYXkoKSksdC5jYW1lcmE9dGhpcy5jYW1lcmEudG9KU09OKCExKS5vYmplY3QsZGVsZXRlIHQuY2FtZXJhLm1hdHJpeCx0fX0pLHdoLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoYmgucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6d2gsaXNTcG90TGlnaHRTaGFkb3c6ITAsdXBkYXRlTWF0cmljZXM6ZnVuY3Rpb24odCl7Y29uc3QgZT10aGlzLmNhbWVyYSxuPTIqem4uUkFEMkRFRyp0LmFuZ2xlKnRoaXMuZm9jdXMscj10aGlzLm1hcFNpemUud2lkdGgvdGhpcy5tYXBTaXplLmhlaWdodCxpPXQuZGlzdGFuY2V8fGUuZmFyO249PT1lLmZvdiYmcj09PWUuYXNwZWN0JiZpPT09ZS5mYXJ8fChlLmZvdj1uLGUuYXNwZWN0PXIsZS5mYXI9aSxlLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKSksYmgucHJvdG90eXBlLnVwZGF0ZU1hdHJpY2VzLmNhbGwodGhpcyx0KX19KSxfaC5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKHloLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOl9oLGlzU3BvdExpZ2h0OiEwLGNvcHk6ZnVuY3Rpb24odCl7cmV0dXJuIHloLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyx0KSx0aGlzLmRpc3RhbmNlPXQuZGlzdGFuY2UsdGhpcy5hbmdsZT10LmFuZ2xlLHRoaXMucGVudW1icmE9dC5wZW51bWJyYSx0aGlzLmRlY2F5PXQuZGVjYXksdGhpcy50YXJnZXQ9dC50YXJnZXQuY2xvbmUoKSx0aGlzLnNoYWRvdz10LnNoYWRvdy5jbG9uZSgpLHRoaXN9fSksTWgucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShiaC5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpNaCxpc1BvaW50TGlnaHRTaGFkb3c6ITAsdXBkYXRlTWF0cmljZXM6ZnVuY3Rpb24odCxlPTApe2NvbnN0IG49dGhpcy5jYW1lcmEscj10aGlzLm1hdHJpeCxpPXRoaXMuX2xpZ2h0UG9zaXRpb25Xb3JsZCxvPXRoaXMuX2xvb2tUYXJnZXQsYT10aGlzLl9wcm9qU2NyZWVuTWF0cml4O2kuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKHQubWF0cml4V29ybGQpLG4ucG9zaXRpb24uY29weShpKSxvLmNvcHkobi5wb3NpdGlvbiksby5hZGQodGhpcy5fY3ViZURpcmVjdGlvbnNbZV0pLG4udXAuY29weSh0aGlzLl9jdWJlVXBzW2VdKSxuLmxvb2tBdChvKSxuLnVwZGF0ZU1hdHJpeFdvcmxkKCksci5tYWtlVHJhbnNsYXRpb24oLWkueCwtaS55LC1pLnopLGEubXVsdGlwbHlNYXRyaWNlcyhuLnByb2plY3Rpb25NYXRyaXgsbi5tYXRyaXhXb3JsZEludmVyc2UpLHRoaXMuX2ZydXN0dW0uc2V0RnJvbVByb2plY3Rpb25NYXRyaXgoYSl9fSksU2gucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZSh5aC5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpTaCxpc1BvaW50TGlnaHQ6ITAsY29weTpmdW5jdGlvbih0KXtyZXR1cm4geWgucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLHQpLHRoaXMuZGlzdGFuY2U9dC5kaXN0YW5jZSx0aGlzLmRlY2F5PXQuZGVjYXksdGhpcy5zaGFkb3c9dC5zaGFkb3cuY2xvbmUoKSx0aGlzfX0pLFRoLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoYm8ucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6VGgsaXNPcnRob2dyYXBoaWNDYW1lcmE6ITAsY29weTpmdW5jdGlvbih0LGUpe3JldHVybiBiby5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsdCxlKSx0aGlzLmxlZnQ9dC5sZWZ0LHRoaXMucmlnaHQ9dC5yaWdodCx0aGlzLnRvcD10LnRvcCx0aGlzLmJvdHRvbT10LmJvdHRvbSx0aGlzLm5lYXI9dC5uZWFyLHRoaXMuZmFyPXQuZmFyLHRoaXMuem9vbT10Lnpvb20sdGhpcy52aWV3PW51bGw9PT10LnZpZXc/bnVsbDpPYmplY3QuYXNzaWduKHt9LHQudmlldyksdGhpc30sc2V0Vmlld09mZnNldDpmdW5jdGlvbih0LGUsbixyLGksbyl7bnVsbD09PXRoaXMudmlldyYmKHRoaXMudmlldz17ZW5hYmxlZDohMCxmdWxsV2lkdGg6MSxmdWxsSGVpZ2h0OjEsb2Zmc2V0WDowLG9mZnNldFk6MCx3aWR0aDoxLGhlaWdodDoxfSksdGhpcy52aWV3LmVuYWJsZWQ9ITAsdGhpcy52aWV3LmZ1bGxXaWR0aD10LHRoaXMudmlldy5mdWxsSGVpZ2h0PWUsdGhpcy52aWV3Lm9mZnNldFg9bix0aGlzLnZpZXcub2Zmc2V0WT1yLHRoaXMudmlldy53aWR0aD1pLHRoaXMudmlldy5oZWlnaHQ9byx0aGlzLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKX0sY2xlYXJWaWV3T2Zmc2V0OmZ1bmN0aW9uKCl7bnVsbCE9PXRoaXMudmlldyYmKHRoaXMudmlldy5lbmFibGVkPSExKSx0aGlzLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKX0sdXBkYXRlUHJvamVjdGlvbk1hdHJpeDpmdW5jdGlvbigpe2NvbnN0IHQ9KHRoaXMucmlnaHQtdGhpcy5sZWZ0KS8oMip0aGlzLnpvb20pLGU9KHRoaXMudG9wLXRoaXMuYm90dG9tKS8oMip0aGlzLnpvb20pLG49KHRoaXMucmlnaHQrdGhpcy5sZWZ0KS8yLHI9KHRoaXMudG9wK3RoaXMuYm90dG9tKS8yO2xldCBpPW4tdCxvPW4rdCxhPXIrZSxzPXItZTtpZihudWxsIT09dGhpcy52aWV3JiZ0aGlzLnZpZXcuZW5hYmxlZCl7Y29uc3QgdD0odGhpcy5yaWdodC10aGlzLmxlZnQpL3RoaXMudmlldy5mdWxsV2lkdGgvdGhpcy56b29tLGU9KHRoaXMudG9wLXRoaXMuYm90dG9tKS90aGlzLnZpZXcuZnVsbEhlaWdodC90aGlzLnpvb207aSs9dCp0aGlzLnZpZXcub2Zmc2V0WCxvPWkrdCp0aGlzLnZpZXcud2lkdGgsYS09ZSp0aGlzLnZpZXcub2Zmc2V0WSxzPWEtZSp0aGlzLnZpZXcuaGVpZ2h0fXRoaXMucHJvamVjdGlvbk1hdHJpeC5tYWtlT3J0aG9ncmFwaGljKGksbyxhLHMsdGhpcy5uZWFyLHRoaXMuZmFyKSx0aGlzLnByb2plY3Rpb25NYXRyaXhJbnZlcnNlLmNvcHkodGhpcy5wcm9qZWN0aW9uTWF0cml4KS5pbnZlcnQoKX0sdG9KU09OOmZ1bmN0aW9uKHQpe2NvbnN0IGU9SnIucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMsdCk7cmV0dXJuIGUub2JqZWN0Lnpvb209dGhpcy56b29tLGUub2JqZWN0LmxlZnQ9dGhpcy5sZWZ0LGUub2JqZWN0LnJpZ2h0PXRoaXMucmlnaHQsZS5vYmplY3QudG9wPXRoaXMudG9wLGUub2JqZWN0LmJvdHRvbT10aGlzLmJvdHRvbSxlLm9iamVjdC5uZWFyPXRoaXMubmVhcixlLm9iamVjdC5mYXI9dGhpcy5mYXIsbnVsbCE9PXRoaXMudmlldyYmKGUub2JqZWN0LnZpZXc9T2JqZWN0LmFzc2lnbih7fSx0aGlzLnZpZXcpKSxlfX0pLEVoLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoYmgucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6RWgsaXNEaXJlY3Rpb25hbExpZ2h0U2hhZG93OiEwLHVwZGF0ZU1hdHJpY2VzOmZ1bmN0aW9uKHQpe2JoLnByb3RvdHlwZS51cGRhdGVNYXRyaWNlcy5jYWxsKHRoaXMsdCl9fSksQWgucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZSh5aC5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpBaCxpc0RpcmVjdGlvbmFsTGlnaHQ6ITAsY29weTpmdW5jdGlvbih0KXtyZXR1cm4geWgucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLHQpLHRoaXMudGFyZ2V0PXQudGFyZ2V0LmNsb25lKCksdGhpcy5zaGFkb3c9dC5zaGFkb3cuY2xvbmUoKSx0aGlzfX0pLExoLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoeWgucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6TGgsaXNBbWJpZW50TGlnaHQ6ITB9KSxSaC5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKHloLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlJoLGlzUmVjdEFyZWFMaWdodDohMCxjb3B5OmZ1bmN0aW9uKHQpe3JldHVybiB5aC5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsdCksdGhpcy53aWR0aD10LndpZHRoLHRoaXMuaGVpZ2h0PXQuaGVpZ2h0LHRoaXN9LHRvSlNPTjpmdW5jdGlvbih0KXtjb25zdCBlPXloLnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzLHQpO3JldHVybiBlLm9iamVjdC53aWR0aD10aGlzLndpZHRoLGUub2JqZWN0LmhlaWdodD10aGlzLmhlaWdodCxlfX0pO2NsYXNzIFBoe2NvbnN0cnVjdG9yKCl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJpc1NwaGVyaWNhbEhhcm1vbmljczNcIix7dmFsdWU6ITB9KSx0aGlzLmNvZWZmaWNpZW50cz1bXTtmb3IobGV0IHQ9MDt0PDk7dCsrKXRoaXMuY29lZmZpY2llbnRzLnB1c2gobmV3IEtuKX1zZXQodCl7Zm9yKGxldCBlPTA7ZTw5O2UrKyl0aGlzLmNvZWZmaWNpZW50c1tlXS5jb3B5KHRbZV0pO3JldHVybiB0aGlzfXplcm8oKXtmb3IobGV0IHQ9MDt0PDk7dCsrKXRoaXMuY29lZmZpY2llbnRzW3RdLnNldCgwLDAsMCk7cmV0dXJuIHRoaXN9Z2V0QXQodCxlKXtjb25zdCBuPXQueCxyPXQueSxpPXQueixvPXRoaXMuY29lZmZpY2llbnRzO3JldHVybiBlLmNvcHkob1swXSkubXVsdGlwbHlTY2FsYXIoLjI4MjA5NSksZS5hZGRTY2FsZWRWZWN0b3Iob1sxXSwuNDg4NjAzKnIpLGUuYWRkU2NhbGVkVmVjdG9yKG9bMl0sLjQ4ODYwMyppKSxlLmFkZFNjYWxlZFZlY3RvcihvWzNdLC40ODg2MDMqbiksZS5hZGRTY2FsZWRWZWN0b3Iob1s0XSxuKnIqMS4wOTI1NDgpLGUuYWRkU2NhbGVkVmVjdG9yKG9bNV0scippKjEuMDkyNTQ4KSxlLmFkZFNjYWxlZFZlY3RvcihvWzZdLC4zMTUzOTIqKDMqaSppLTEpKSxlLmFkZFNjYWxlZFZlY3RvcihvWzddLG4qaSoxLjA5MjU0OCksZS5hZGRTY2FsZWRWZWN0b3Iob1s4XSwuNTQ2Mjc0KihuKm4tcipyKSksZX1nZXRJcnJhZGlhbmNlQXQodCxlKXtjb25zdCBuPXQueCxyPXQueSxpPXQueixvPXRoaXMuY29lZmZpY2llbnRzO3JldHVybiBlLmNvcHkob1swXSkubXVsdGlwbHlTY2FsYXIoLjg4NjIyNyksZS5hZGRTY2FsZWRWZWN0b3Iob1sxXSwxLjAyMzMyOCpyKSxlLmFkZFNjYWxlZFZlY3RvcihvWzJdLDEuMDIzMzI4KmkpLGUuYWRkU2NhbGVkVmVjdG9yKG9bM10sMS4wMjMzMjgqbiksZS5hZGRTY2FsZWRWZWN0b3Iob1s0XSwuODU4MDg2Km4qciksZS5hZGRTY2FsZWRWZWN0b3Iob1s1XSwuODU4MDg2KnIqaSksZS5hZGRTY2FsZWRWZWN0b3Iob1s2XSwuNzQzMTI1KmkqaS0uMjQ3NzA4KSxlLmFkZFNjYWxlZFZlY3RvcihvWzddLC44NTgwODYqbippKSxlLmFkZFNjYWxlZFZlY3RvcihvWzhdLC40MjkwNDMqKG4qbi1yKnIpKSxlfWFkZCh0KXtmb3IobGV0IGU9MDtlPDk7ZSsrKXRoaXMuY29lZmZpY2llbnRzW2VdLmFkZCh0LmNvZWZmaWNpZW50c1tlXSk7cmV0dXJuIHRoaXN9YWRkU2NhbGVkU0godCxlKXtmb3IobGV0IG49MDtuPDk7bisrKXRoaXMuY29lZmZpY2llbnRzW25dLmFkZFNjYWxlZFZlY3Rvcih0LmNvZWZmaWNpZW50c1tuXSxlKTtyZXR1cm4gdGhpc31zY2FsZSh0KXtmb3IobGV0IGU9MDtlPDk7ZSsrKXRoaXMuY29lZmZpY2llbnRzW2VdLm11bHRpcGx5U2NhbGFyKHQpO3JldHVybiB0aGlzfWxlcnAodCxlKXtmb3IobGV0IG49MDtuPDk7bisrKXRoaXMuY29lZmZpY2llbnRzW25dLmxlcnAodC5jb2VmZmljaWVudHNbbl0sZSk7cmV0dXJuIHRoaXN9ZXF1YWxzKHQpe2ZvcihsZXQgZT0wO2U8OTtlKyspaWYoIXRoaXMuY29lZmZpY2llbnRzW2VdLmVxdWFscyh0LmNvZWZmaWNpZW50c1tlXSkpcmV0dXJuITE7cmV0dXJuITB9Y29weSh0KXtyZXR1cm4gdGhpcy5zZXQodC5jb2VmZmljaWVudHMpfWNsb25lKCl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKS5jb3B5KHRoaXMpfWZyb21BcnJheSh0LGU9MCl7Y29uc3Qgbj10aGlzLmNvZWZmaWNpZW50cztmb3IobGV0IHI9MDtyPDk7cisrKW5bcl0uZnJvbUFycmF5KHQsZSszKnIpO3JldHVybiB0aGlzfXRvQXJyYXkodD1bXSxlPTApe2NvbnN0IG49dGhpcy5jb2VmZmljaWVudHM7Zm9yKGxldCByPTA7cjw5O3IrKyluW3JdLnRvQXJyYXkodCxlKzMqcik7cmV0dXJuIHR9c3RhdGljIGdldEJhc2lzQXQodCxlKXtjb25zdCBuPXQueCxyPXQueSxpPXQuejtlWzBdPS4yODIwOTUsZVsxXT0uNDg4NjAzKnIsZVsyXT0uNDg4NjAzKmksZVszXT0uNDg4NjAzKm4sZVs0XT0xLjA5MjU0OCpuKnIsZVs1XT0xLjA5MjU0OCpyKmksZVs2XT0uMzE1MzkyKigzKmkqaS0xKSxlWzddPTEuMDkyNTQ4Km4qaSxlWzhdPS41NDYyNzQqKG4qbi1yKnIpfX1mdW5jdGlvbiBDaCh0LGUpe3loLmNhbGwodGhpcyx2b2lkIDAsZSksdGhpcy50eXBlPVwiTGlnaHRQcm9iZVwiLHRoaXMuc2g9dm9pZCAwIT09dD90Om5ldyBQaH1mdW5jdGlvbiBJaCh0KXtHdS5jYWxsKHRoaXMsdCksdGhpcy50ZXh0dXJlcz17fX1DaC5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKHloLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOkNoLGlzTGlnaHRQcm9iZTohMCxjb3B5OmZ1bmN0aW9uKHQpe3JldHVybiB5aC5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsdCksdGhpcy5zaC5jb3B5KHQuc2gpLHRoaXN9LGZyb21KU09OOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmludGVuc2l0eT10LmludGVuc2l0eSx0aGlzLnNoLmZyb21BcnJheSh0LnNoKSx0aGlzfSx0b0pTT046ZnVuY3Rpb24odCl7Y29uc3QgZT15aC5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyx0KTtyZXR1cm4gZS5vYmplY3Quc2g9dGhpcy5zaC50b0FycmF5KCksZX19KSxJaC5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKEd1LnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOkloLGxvYWQ6ZnVuY3Rpb24odCxlLG4scil7Y29uc3QgaT10aGlzLG89bmV3IGt1KGkubWFuYWdlcik7by5zZXRQYXRoKGkucGF0aCksby5zZXRSZXF1ZXN0SGVhZGVyKGkucmVxdWVzdEhlYWRlciksby5zZXRXaXRoQ3JlZGVudGlhbHMoaS53aXRoQ3JlZGVudGlhbHMpLG8ubG9hZCh0LChmdW5jdGlvbihuKXt0cnl7ZShpLnBhcnNlKEpTT04ucGFyc2UobikpKX1jYXRjaChlKXtyP3IoZSk6Y29uc29sZS5lcnJvcihlKSxpLm1hbmFnZXIuaXRlbUVycm9yKHQpfX0pLG4scil9LHBhcnNlOmZ1bmN0aW9uKHQpe2NvbnN0IGU9dGhpcy50ZXh0dXJlcztmdW5jdGlvbiBuKHQpe3JldHVybiB2b2lkIDA9PT1lW3RdJiZjb25zb2xlLndhcm4oXCJUSFJFRS5NYXRlcmlhbExvYWRlcjogVW5kZWZpbmVkIHRleHR1cmVcIix0KSxlW3RdfWNvbnN0IHI9bmV3IHd1W3QudHlwZV07aWYodm9pZCAwIT09dC51dWlkJiYoci51dWlkPXQudXVpZCksdm9pZCAwIT09dC5uYW1lJiYoci5uYW1lPXQubmFtZSksdm9pZCAwIT09dC5jb2xvciYmdm9pZCAwIT09ci5jb2xvciYmci5jb2xvci5zZXRIZXgodC5jb2xvciksdm9pZCAwIT09dC5yb3VnaG5lc3MmJihyLnJvdWdobmVzcz10LnJvdWdobmVzcyksdm9pZCAwIT09dC5tZXRhbG5lc3MmJihyLm1ldGFsbmVzcz10Lm1ldGFsbmVzcyksdm9pZCAwIT09dC5zaGVlbiYmKHIuc2hlZW49KG5ldyB5aSkuc2V0SGV4KHQuc2hlZW4pKSx2b2lkIDAhPT10LmVtaXNzaXZlJiZ2b2lkIDAhPT1yLmVtaXNzaXZlJiZyLmVtaXNzaXZlLnNldEhleCh0LmVtaXNzaXZlKSx2b2lkIDAhPT10LnNwZWN1bGFyJiZ2b2lkIDAhPT1yLnNwZWN1bGFyJiZyLnNwZWN1bGFyLnNldEhleCh0LnNwZWN1bGFyKSx2b2lkIDAhPT10LnNoaW5pbmVzcyYmKHIuc2hpbmluZXNzPXQuc2hpbmluZXNzKSx2b2lkIDAhPT10LmNsZWFyY29hdCYmKHIuY2xlYXJjb2F0PXQuY2xlYXJjb2F0KSx2b2lkIDAhPT10LmNsZWFyY29hdFJvdWdobmVzcyYmKHIuY2xlYXJjb2F0Um91Z2huZXNzPXQuY2xlYXJjb2F0Um91Z2huZXNzKSx2b2lkIDAhPT10LmZvZyYmKHIuZm9nPXQuZm9nKSx2b2lkIDAhPT10LmZsYXRTaGFkaW5nJiYoci5mbGF0U2hhZGluZz10LmZsYXRTaGFkaW5nKSx2b2lkIDAhPT10LmJsZW5kaW5nJiYoci5ibGVuZGluZz10LmJsZW5kaW5nKSx2b2lkIDAhPT10LmNvbWJpbmUmJihyLmNvbWJpbmU9dC5jb21iaW5lKSx2b2lkIDAhPT10LnNpZGUmJihyLnNpZGU9dC5zaWRlKSx2b2lkIDAhPT10Lm9wYWNpdHkmJihyLm9wYWNpdHk9dC5vcGFjaXR5KSx2b2lkIDAhPT10LnRyYW5zcGFyZW50JiYoci50cmFuc3BhcmVudD10LnRyYW5zcGFyZW50KSx2b2lkIDAhPT10LmFscGhhVGVzdCYmKHIuYWxwaGFUZXN0PXQuYWxwaGFUZXN0KSx2b2lkIDAhPT10LmRlcHRoVGVzdCYmKHIuZGVwdGhUZXN0PXQuZGVwdGhUZXN0KSx2b2lkIDAhPT10LmRlcHRoV3JpdGUmJihyLmRlcHRoV3JpdGU9dC5kZXB0aFdyaXRlKSx2b2lkIDAhPT10LmNvbG9yV3JpdGUmJihyLmNvbG9yV3JpdGU9dC5jb2xvcldyaXRlKSx2b2lkIDAhPT10LnN0ZW5jaWxXcml0ZSYmKHIuc3RlbmNpbFdyaXRlPXQuc3RlbmNpbFdyaXRlKSx2b2lkIDAhPT10LnN0ZW5jaWxXcml0ZU1hc2smJihyLnN0ZW5jaWxXcml0ZU1hc2s9dC5zdGVuY2lsV3JpdGVNYXNrKSx2b2lkIDAhPT10LnN0ZW5jaWxGdW5jJiYoci5zdGVuY2lsRnVuYz10LnN0ZW5jaWxGdW5jKSx2b2lkIDAhPT10LnN0ZW5jaWxSZWYmJihyLnN0ZW5jaWxSZWY9dC5zdGVuY2lsUmVmKSx2b2lkIDAhPT10LnN0ZW5jaWxGdW5jTWFzayYmKHIuc3RlbmNpbEZ1bmNNYXNrPXQuc3RlbmNpbEZ1bmNNYXNrKSx2b2lkIDAhPT10LnN0ZW5jaWxGYWlsJiYoci5zdGVuY2lsRmFpbD10LnN0ZW5jaWxGYWlsKSx2b2lkIDAhPT10LnN0ZW5jaWxaRmFpbCYmKHIuc3RlbmNpbFpGYWlsPXQuc3RlbmNpbFpGYWlsKSx2b2lkIDAhPT10LnN0ZW5jaWxaUGFzcyYmKHIuc3RlbmNpbFpQYXNzPXQuc3RlbmNpbFpQYXNzKSx2b2lkIDAhPT10LndpcmVmcmFtZSYmKHIud2lyZWZyYW1lPXQud2lyZWZyYW1lKSx2b2lkIDAhPT10LndpcmVmcmFtZUxpbmV3aWR0aCYmKHIud2lyZWZyYW1lTGluZXdpZHRoPXQud2lyZWZyYW1lTGluZXdpZHRoKSx2b2lkIDAhPT10LndpcmVmcmFtZUxpbmVjYXAmJihyLndpcmVmcmFtZUxpbmVjYXA9dC53aXJlZnJhbWVMaW5lY2FwKSx2b2lkIDAhPT10LndpcmVmcmFtZUxpbmVqb2luJiYoci53aXJlZnJhbWVMaW5lam9pbj10LndpcmVmcmFtZUxpbmVqb2luKSx2b2lkIDAhPT10LnJvdGF0aW9uJiYoci5yb3RhdGlvbj10LnJvdGF0aW9uKSwxIT09dC5saW5ld2lkdGgmJihyLmxpbmV3aWR0aD10LmxpbmV3aWR0aCksdm9pZCAwIT09dC5kYXNoU2l6ZSYmKHIuZGFzaFNpemU9dC5kYXNoU2l6ZSksdm9pZCAwIT09dC5nYXBTaXplJiYoci5nYXBTaXplPXQuZ2FwU2l6ZSksdm9pZCAwIT09dC5zY2FsZSYmKHIuc2NhbGU9dC5zY2FsZSksdm9pZCAwIT09dC5wb2x5Z29uT2Zmc2V0JiYoci5wb2x5Z29uT2Zmc2V0PXQucG9seWdvbk9mZnNldCksdm9pZCAwIT09dC5wb2x5Z29uT2Zmc2V0RmFjdG9yJiYoci5wb2x5Z29uT2Zmc2V0RmFjdG9yPXQucG9seWdvbk9mZnNldEZhY3Rvciksdm9pZCAwIT09dC5wb2x5Z29uT2Zmc2V0VW5pdHMmJihyLnBvbHlnb25PZmZzZXRVbml0cz10LnBvbHlnb25PZmZzZXRVbml0cyksdm9pZCAwIT09dC5za2lubmluZyYmKHIuc2tpbm5pbmc9dC5za2lubmluZyksdm9pZCAwIT09dC5tb3JwaFRhcmdldHMmJihyLm1vcnBoVGFyZ2V0cz10Lm1vcnBoVGFyZ2V0cyksdm9pZCAwIT09dC5tb3JwaE5vcm1hbHMmJihyLm1vcnBoTm9ybWFscz10Lm1vcnBoTm9ybWFscyksdm9pZCAwIT09dC5kaXRoZXJpbmcmJihyLmRpdGhlcmluZz10LmRpdGhlcmluZyksdm9pZCAwIT09dC52ZXJ0ZXhUYW5nZW50cyYmKHIudmVydGV4VGFuZ2VudHM9dC52ZXJ0ZXhUYW5nZW50cyksdm9pZCAwIT09dC52aXNpYmxlJiYoci52aXNpYmxlPXQudmlzaWJsZSksdm9pZCAwIT09dC50b25lTWFwcGVkJiYoci50b25lTWFwcGVkPXQudG9uZU1hcHBlZCksdm9pZCAwIT09dC51c2VyRGF0YSYmKHIudXNlckRhdGE9dC51c2VyRGF0YSksdm9pZCAwIT09dC52ZXJ0ZXhDb2xvcnMmJihcIm51bWJlclwiPT10eXBlb2YgdC52ZXJ0ZXhDb2xvcnM/ci52ZXJ0ZXhDb2xvcnM9dC52ZXJ0ZXhDb2xvcnM+MDpyLnZlcnRleENvbG9ycz10LnZlcnRleENvbG9ycyksdm9pZCAwIT09dC51bmlmb3Jtcylmb3IoY29uc3QgZSBpbiB0LnVuaWZvcm1zKXtjb25zdCBpPXQudW5pZm9ybXNbZV07c3dpdGNoKHIudW5pZm9ybXNbZV09e30saS50eXBlKXtjYXNlXCJ0XCI6ci51bmlmb3Jtc1tlXS52YWx1ZT1uKGkudmFsdWUpO2JyZWFrO2Nhc2VcImNcIjpyLnVuaWZvcm1zW2VdLnZhbHVlPShuZXcgeWkpLnNldEhleChpLnZhbHVlKTticmVhaztjYXNlXCJ2MlwiOnIudW5pZm9ybXNbZV0udmFsdWU9KG5ldyBHbikuZnJvbUFycmF5KGkudmFsdWUpO2JyZWFrO2Nhc2VcInYzXCI6ci51bmlmb3Jtc1tlXS52YWx1ZT0obmV3IEtuKS5mcm9tQXJyYXkoaS52YWx1ZSk7YnJlYWs7Y2FzZVwidjRcIjpyLnVuaWZvcm1zW2VdLnZhbHVlPShuZXcgcW4pLmZyb21BcnJheShpLnZhbHVlKTticmVhaztjYXNlXCJtM1wiOnIudW5pZm9ybXNbZV0udmFsdWU9KG5ldyBIbikuZnJvbUFycmF5KGkudmFsdWUpO2JyZWFrO2Nhc2VcIm00XCI6ci51bmlmb3Jtc1tlXS52YWx1ZT0obmV3IFRyKS5mcm9tQXJyYXkoaS52YWx1ZSk7YnJlYWs7ZGVmYXVsdDpyLnVuaWZvcm1zW2VdLnZhbHVlPWkudmFsdWV9fWlmKHZvaWQgMCE9PXQuZGVmaW5lcyYmKHIuZGVmaW5lcz10LmRlZmluZXMpLHZvaWQgMCE9PXQudmVydGV4U2hhZGVyJiYoci52ZXJ0ZXhTaGFkZXI9dC52ZXJ0ZXhTaGFkZXIpLHZvaWQgMCE9PXQuZnJhZ21lbnRTaGFkZXImJihyLmZyYWdtZW50U2hhZGVyPXQuZnJhZ21lbnRTaGFkZXIpLHZvaWQgMCE9PXQuZXh0ZW5zaW9ucylmb3IoY29uc3QgZSBpbiB0LmV4dGVuc2lvbnMpci5leHRlbnNpb25zW2VdPXQuZXh0ZW5zaW9uc1tlXTtpZih2b2lkIDAhPT10LnNoYWRpbmcmJihyLmZsYXRTaGFkaW5nPTE9PT10LnNoYWRpbmcpLHZvaWQgMCE9PXQuc2l6ZSYmKHIuc2l6ZT10LnNpemUpLHZvaWQgMCE9PXQuc2l6ZUF0dGVudWF0aW9uJiYoci5zaXplQXR0ZW51YXRpb249dC5zaXplQXR0ZW51YXRpb24pLHZvaWQgMCE9PXQubWFwJiYoci5tYXA9bih0Lm1hcCkpLHZvaWQgMCE9PXQubWF0Y2FwJiYoci5tYXRjYXA9bih0Lm1hdGNhcCkpLHZvaWQgMCE9PXQuYWxwaGFNYXAmJihyLmFscGhhTWFwPW4odC5hbHBoYU1hcCkpLHZvaWQgMCE9PXQuYnVtcE1hcCYmKHIuYnVtcE1hcD1uKHQuYnVtcE1hcCkpLHZvaWQgMCE9PXQuYnVtcFNjYWxlJiYoci5idW1wU2NhbGU9dC5idW1wU2NhbGUpLHZvaWQgMCE9PXQubm9ybWFsTWFwJiYoci5ub3JtYWxNYXA9bih0Lm5vcm1hbE1hcCkpLHZvaWQgMCE9PXQubm9ybWFsTWFwVHlwZSYmKHIubm9ybWFsTWFwVHlwZT10Lm5vcm1hbE1hcFR5cGUpLHZvaWQgMCE9PXQubm9ybWFsU2NhbGUpe2xldCBlPXQubm9ybWFsU2NhbGU7ITE9PT1BcnJheS5pc0FycmF5KGUpJiYoZT1bZSxlXSksci5ub3JtYWxTY2FsZT0obmV3IEduKS5mcm9tQXJyYXkoZSl9cmV0dXJuIHZvaWQgMCE9PXQuZGlzcGxhY2VtZW50TWFwJiYoci5kaXNwbGFjZW1lbnRNYXA9bih0LmRpc3BsYWNlbWVudE1hcCkpLHZvaWQgMCE9PXQuZGlzcGxhY2VtZW50U2NhbGUmJihyLmRpc3BsYWNlbWVudFNjYWxlPXQuZGlzcGxhY2VtZW50U2NhbGUpLHZvaWQgMCE9PXQuZGlzcGxhY2VtZW50QmlhcyYmKHIuZGlzcGxhY2VtZW50Qmlhcz10LmRpc3BsYWNlbWVudEJpYXMpLHZvaWQgMCE9PXQucm91Z2huZXNzTWFwJiYoci5yb3VnaG5lc3NNYXA9bih0LnJvdWdobmVzc01hcCkpLHZvaWQgMCE9PXQubWV0YWxuZXNzTWFwJiYoci5tZXRhbG5lc3NNYXA9bih0Lm1ldGFsbmVzc01hcCkpLHZvaWQgMCE9PXQuZW1pc3NpdmVNYXAmJihyLmVtaXNzaXZlTWFwPW4odC5lbWlzc2l2ZU1hcCkpLHZvaWQgMCE9PXQuZW1pc3NpdmVJbnRlbnNpdHkmJihyLmVtaXNzaXZlSW50ZW5zaXR5PXQuZW1pc3NpdmVJbnRlbnNpdHkpLHZvaWQgMCE9PXQuc3BlY3VsYXJNYXAmJihyLnNwZWN1bGFyTWFwPW4odC5zcGVjdWxhck1hcCkpLHZvaWQgMCE9PXQuZW52TWFwJiYoci5lbnZNYXA9bih0LmVudk1hcCkpLHZvaWQgMCE9PXQuZW52TWFwSW50ZW5zaXR5JiYoci5lbnZNYXBJbnRlbnNpdHk9dC5lbnZNYXBJbnRlbnNpdHkpLHZvaWQgMCE9PXQucmVmbGVjdGl2aXR5JiYoci5yZWZsZWN0aXZpdHk9dC5yZWZsZWN0aXZpdHkpLHZvaWQgMCE9PXQucmVmcmFjdGlvblJhdGlvJiYoci5yZWZyYWN0aW9uUmF0aW89dC5yZWZyYWN0aW9uUmF0aW8pLHZvaWQgMCE9PXQubGlnaHRNYXAmJihyLmxpZ2h0TWFwPW4odC5saWdodE1hcCkpLHZvaWQgMCE9PXQubGlnaHRNYXBJbnRlbnNpdHkmJihyLmxpZ2h0TWFwSW50ZW5zaXR5PXQubGlnaHRNYXBJbnRlbnNpdHkpLHZvaWQgMCE9PXQuYW9NYXAmJihyLmFvTWFwPW4odC5hb01hcCkpLHZvaWQgMCE9PXQuYW9NYXBJbnRlbnNpdHkmJihyLmFvTWFwSW50ZW5zaXR5PXQuYW9NYXBJbnRlbnNpdHkpLHZvaWQgMCE9PXQuZ3JhZGllbnRNYXAmJihyLmdyYWRpZW50TWFwPW4odC5ncmFkaWVudE1hcCkpLHZvaWQgMCE9PXQuY2xlYXJjb2F0TWFwJiYoci5jbGVhcmNvYXRNYXA9bih0LmNsZWFyY29hdE1hcCkpLHZvaWQgMCE9PXQuY2xlYXJjb2F0Um91Z2huZXNzTWFwJiYoci5jbGVhcmNvYXRSb3VnaG5lc3NNYXA9bih0LmNsZWFyY29hdFJvdWdobmVzc01hcCkpLHZvaWQgMCE9PXQuY2xlYXJjb2F0Tm9ybWFsTWFwJiYoci5jbGVhcmNvYXROb3JtYWxNYXA9bih0LmNsZWFyY29hdE5vcm1hbE1hcCkpLHZvaWQgMCE9PXQuY2xlYXJjb2F0Tm9ybWFsU2NhbGUmJihyLmNsZWFyY29hdE5vcm1hbFNjYWxlPShuZXcgR24pLmZyb21BcnJheSh0LmNsZWFyY29hdE5vcm1hbFNjYWxlKSksdm9pZCAwIT09dC50cmFuc21pc3Npb24mJihyLnRyYW5zbWlzc2lvbj10LnRyYW5zbWlzc2lvbiksdm9pZCAwIT09dC50cmFuc21pc3Npb25NYXAmJihyLnRyYW5zbWlzc2lvbk1hcD1uKHQudHJhbnNtaXNzaW9uTWFwKSkscn0sc2V0VGV4dHVyZXM6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMudGV4dHVyZXM9dCx0aGlzfX0pO2NvbnN0IE9oPXtkZWNvZGVUZXh0OmZ1bmN0aW9uKHQpe2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBUZXh0RGVjb2RlcilyZXR1cm4obmV3IFRleHREZWNvZGVyKS5kZWNvZGUodCk7bGV0IGU9XCJcIjtmb3IobGV0IG49MCxyPXQubGVuZ3RoO248cjtuKyspZSs9U3RyaW5nLmZyb21DaGFyQ29kZSh0W25dKTt0cnl7cmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChlc2NhcGUoZSkpfWNhdGNoKHQpe3JldHVybiBlfX0sZXh0cmFjdFVybEJhc2U6ZnVuY3Rpb24odCl7Y29uc3QgZT10Lmxhc3RJbmRleE9mKFwiL1wiKTtyZXR1cm4tMT09PWU/XCIuL1wiOnQuc3Vic3RyKDAsZSsxKX19O2Z1bmN0aW9uIE5oKCl7cWkuY2FsbCh0aGlzKSx0aGlzLnR5cGU9XCJJbnN0YW5jZWRCdWZmZXJHZW9tZXRyeVwiLHRoaXMuaW5zdGFuY2VDb3VudD0xLzB9ZnVuY3Rpb24gRGgodCxlLG4scil7XCJudW1iZXJcIj09dHlwZW9mIG4mJihyPW4sbj0hMSxjb25zb2xlLmVycm9yKFwiVEhSRUUuSW5zdGFuY2VkQnVmZmVyQXR0cmlidXRlOiBUaGUgY29uc3RydWN0b3Igbm93IGV4cGVjdHMgbm9ybWFsaXplZCBhcyB0aGUgdGhpcmQgYXJndW1lbnQuXCIpKSxUaS5jYWxsKHRoaXMsdCxlLG4pLHRoaXMubWVzaFBlckF0dHJpYnV0ZT1yfHwxfWZ1bmN0aW9uIEJoKHQpe0d1LmNhbGwodGhpcyx0KX1OaC5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKHFpLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOk5oLGlzSW5zdGFuY2VkQnVmZmVyR2VvbWV0cnk6ITAsY29weTpmdW5jdGlvbih0KXtyZXR1cm4gcWkucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLHQpLHRoaXMuaW5zdGFuY2VDb3VudD10Lmluc3RhbmNlQ291bnQsdGhpc30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyl9LHRvSlNPTjpmdW5jdGlvbigpe2NvbnN0IHQ9cWkucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMpO3JldHVybiB0Lmluc3RhbmNlQ291bnQ9dGhpcy5pbnN0YW5jZUNvdW50LHQuaXNJbnN0YW5jZWRCdWZmZXJHZW9tZXRyeT0hMCx0fX0pLERoLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoVGkucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6RGgsaXNJbnN0YW5jZWRCdWZmZXJBdHRyaWJ1dGU6ITAsY29weTpmdW5jdGlvbih0KXtyZXR1cm4gVGkucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLHQpLHRoaXMubWVzaFBlckF0dHJpYnV0ZT10Lm1lc2hQZXJBdHRyaWJ1dGUsdGhpc30sdG9KU09OOmZ1bmN0aW9uKCl7Y29uc3QgdD1UaS5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7cmV0dXJuIHQubWVzaFBlckF0dHJpYnV0ZT10aGlzLm1lc2hQZXJBdHRyaWJ1dGUsdC5pc0luc3RhbmNlZEJ1ZmZlckF0dHJpYnV0ZT0hMCx0fX0pLEJoLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoR3UucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6QmgsbG9hZDpmdW5jdGlvbih0LGUsbixyKXtjb25zdCBpPXRoaXMsbz1uZXcga3UoaS5tYW5hZ2VyKTtvLnNldFBhdGgoaS5wYXRoKSxvLnNldFJlcXVlc3RIZWFkZXIoaS5yZXF1ZXN0SGVhZGVyKSxvLnNldFdpdGhDcmVkZW50aWFscyhpLndpdGhDcmVkZW50aWFscyksby5sb2FkKHQsKGZ1bmN0aW9uKG4pe3RyeXtlKGkucGFyc2UoSlNPTi5wYXJzZShuKSkpfWNhdGNoKGUpe3I/cihlKTpjb25zb2xlLmVycm9yKGUpLGkubWFuYWdlci5pdGVtRXJyb3IodCl9fSksbixyKX0scGFyc2U6ZnVuY3Rpb24odCl7Y29uc3QgZT17fSxuPXt9O2Z1bmN0aW9uIHIodCxyKXtpZih2b2lkIDAhPT1lW3JdKXJldHVybiBlW3JdO2NvbnN0IGk9dC5pbnRlcmxlYXZlZEJ1ZmZlcnNbcl0sbz1mdW5jdGlvbih0LGUpe2lmKHZvaWQgMCE9PW5bZV0pcmV0dXJuIG5bZV07Y29uc3Qgcj10LmFycmF5QnVmZmVyc1tlXSxpPW5ldyBVaW50MzJBcnJheShyKS5idWZmZXI7cmV0dXJuIG5bZV09aSxpfSh0LGkuYnVmZmVyKSxhPW5ldyBHcyh6aShpLnR5cGUsbyksaS5zdHJpZGUpO3JldHVybiBhLnV1aWQ9aS51dWlkLGVbcl09YSxhfWNvbnN0IGk9dC5pc0luc3RhbmNlZEJ1ZmZlckdlb21ldHJ5P25ldyBOaDpuZXcgcWksbz10LmRhdGEuaW5kZXg7aWYodm9pZCAwIT09byl7Y29uc3QgdD16aShvLnR5cGUsby5hcnJheSk7aS5zZXRJbmRleChuZXcgVGkodCwxKSl9Y29uc3QgYT10LmRhdGEuYXR0cmlidXRlcztmb3IoY29uc3QgZSBpbiBhKXtjb25zdCBuPWFbZV07bGV0IG87aWYobi5pc0ludGVybGVhdmVkQnVmZmVyQXR0cmlidXRlKXtvPW5ldyBrcyhyKHQuZGF0YSxuLmRhdGEpLG4uaXRlbVNpemUsbi5vZmZzZXQsbi5ub3JtYWxpemVkKX1lbHNle2NvbnN0IHQ9emkobi50eXBlLG4uYXJyYXkpO289bmV3KG4uaXNJbnN0YW5jZWRCdWZmZXJBdHRyaWJ1dGU/RGg6VGkpKHQsbi5pdGVtU2l6ZSxuLm5vcm1hbGl6ZWQpfXZvaWQgMCE9PW4ubmFtZSYmKG8ubmFtZT1uLm5hbWUpLGkuc2V0QXR0cmlidXRlKGUsbyl9Y29uc3Qgcz10LmRhdGEubW9ycGhBdHRyaWJ1dGVzO2lmKHMpZm9yKGNvbnN0IGUgaW4gcyl7Y29uc3Qgbj1zW2VdLG89W107Zm9yKGxldCBlPTAsaT1uLmxlbmd0aDtlPGk7ZSsrKXtjb25zdCBpPW5bZV07bGV0IGE7aWYoaS5pc0ludGVybGVhdmVkQnVmZmVyQXR0cmlidXRlKXthPW5ldyBrcyhyKHQuZGF0YSxpLmRhdGEpLGkuaXRlbVNpemUsaS5vZmZzZXQsaS5ub3JtYWxpemVkKX1lbHNle2E9bmV3IFRpKHppKGkudHlwZSxpLmFycmF5KSxpLml0ZW1TaXplLGkubm9ybWFsaXplZCl9dm9pZCAwIT09aS5uYW1lJiYoYS5uYW1lPWkubmFtZSksby5wdXNoKGEpfWkubW9ycGhBdHRyaWJ1dGVzW2VdPW99dC5kYXRhLm1vcnBoVGFyZ2V0c1JlbGF0aXZlJiYoaS5tb3JwaFRhcmdldHNSZWxhdGl2ZT0hMCk7Y29uc3QgYz10LmRhdGEuZ3JvdXBzfHx0LmRhdGEuZHJhd2NhbGxzfHx0LmRhdGEub2Zmc2V0cztpZih2b2lkIDAhPT1jKWZvcihsZXQgdD0wLGU9Yy5sZW5ndGg7dCE9PWU7Kyt0KXtjb25zdCBlPWNbdF07aS5hZGRHcm91cChlLnN0YXJ0LGUuY291bnQsZS5tYXRlcmlhbEluZGV4KX1jb25zdCBsPXQuZGF0YS5ib3VuZGluZ1NwaGVyZTtpZih2b2lkIDAhPT1sKXtjb25zdCB0PW5ldyBLbjt2b2lkIDAhPT1sLmNlbnRlciYmdC5mcm9tQXJyYXkobC5jZW50ZXIpLGkuYm91bmRpbmdTcGhlcmU9bmV3IGdyKHQsbC5yYWRpdXMpfXJldHVybiB0Lm5hbWUmJihpLm5hbWU9dC5uYW1lKSx0LnVzZXJEYXRhJiYoaS51c2VyRGF0YT10LnVzZXJEYXRhKSxpfX0pO2NsYXNzIEZoIGV4dGVuZHMgR3V7Y29uc3RydWN0b3IodCl7c3VwZXIodCl9bG9hZCh0LGUsbixyKXtjb25zdCBpPXRoaXMsbz1cIlwiPT09dGhpcy5wYXRoP09oLmV4dHJhY3RVcmxCYXNlKHQpOnRoaXMucGF0aDt0aGlzLnJlc291cmNlUGF0aD10aGlzLnJlc291cmNlUGF0aHx8bztjb25zdCBhPW5ldyBrdSh0aGlzLm1hbmFnZXIpO2Euc2V0UGF0aCh0aGlzLnBhdGgpLGEuc2V0UmVxdWVzdEhlYWRlcih0aGlzLnJlcXVlc3RIZWFkZXIpLGEuc2V0V2l0aENyZWRlbnRpYWxzKHRoaXMud2l0aENyZWRlbnRpYWxzKSxhLmxvYWQodCwoZnVuY3Rpb24obil7bGV0IG89bnVsbDt0cnl7bz1KU09OLnBhcnNlKG4pfWNhdGNoKGUpe3JldHVybiB2b2lkIDAhPT1yJiZyKGUpLHZvaWQgY29uc29sZS5lcnJvcihcIlRIUkVFOk9iamVjdExvYWRlcjogQ2FuJ3QgcGFyc2UgXCIrdCtcIi5cIixlLm1lc3NhZ2UpfWNvbnN0IGE9by5tZXRhZGF0YTt2b2lkIDAhPT1hJiZ2b2lkIDAhPT1hLnR5cGUmJlwiZ2VvbWV0cnlcIiE9PWEudHlwZS50b0xvd2VyQ2FzZSgpP2kucGFyc2UobyxlKTpjb25zb2xlLmVycm9yKFwiVEhSRUUuT2JqZWN0TG9hZGVyOiBDYW4ndCBsb2FkIFwiK3QpfSksbixyKX1wYXJzZSh0LGUpe2NvbnN0IG49dGhpcy5wYXJzZUFuaW1hdGlvbnModC5hbmltYXRpb25zKSxyPXRoaXMucGFyc2VTaGFwZXModC5zaGFwZXMpLGk9dGhpcy5wYXJzZUdlb21ldHJpZXModC5nZW9tZXRyaWVzLHIpLG89dGhpcy5wYXJzZUltYWdlcyh0LmltYWdlcywoZnVuY3Rpb24oKXt2b2lkIDAhPT1lJiZlKGMpfSkpLGE9dGhpcy5wYXJzZVRleHR1cmVzKHQudGV4dHVyZXMsbykscz10aGlzLnBhcnNlTWF0ZXJpYWxzKHQubWF0ZXJpYWxzLGEpLGM9dGhpcy5wYXJzZU9iamVjdCh0Lm9iamVjdCxpLHMsbiksbD10aGlzLnBhcnNlU2tlbGV0b25zKHQuc2tlbGV0b25zLGMpO2lmKHRoaXMuYmluZFNrZWxldG9ucyhjLGwpLHZvaWQgMCE9PWUpe2xldCB0PSExO2Zvcihjb25zdCBlIGluIG8paWYob1tlXWluc3RhbmNlb2YgSFRNTEltYWdlRWxlbWVudCl7dD0hMDticmVha30hMT09PXQmJmUoYyl9cmV0dXJuIGN9cGFyc2VTaGFwZXModCl7Y29uc3QgZT17fTtpZih2b2lkIDAhPT10KWZvcihsZXQgbj0wLHI9dC5sZW5ndGg7bjxyO24rKyl7Y29uc3Qgcj0obmV3IHZoKS5mcm9tSlNPTih0W25dKTtlW3IudXVpZF09cn1yZXR1cm4gZX1wYXJzZVNrZWxldG9ucyh0LGUpe2NvbnN0IG49e30scj17fTtpZihlLnRyYXZlcnNlKChmdW5jdGlvbih0KXt0LmlzQm9uZSYmKHJbdC51dWlkXT10KX0pKSx2b2lkIDAhPT10KWZvcihsZXQgZT0wLGk9dC5sZW5ndGg7ZTxpO2UrKyl7Y29uc3QgaT0obmV3IGRjKS5mcm9tSlNPTih0W2VdLHIpO25baS51dWlkXT1pfXJldHVybiBufXBhcnNlR2VvbWV0cmllcyh0LGUpe2NvbnN0IG49e307bGV0IHI7aWYodm9pZCAwIT09dCl7Y29uc3QgaT1uZXcgQmg7Zm9yKGxldCBvPTAsYT10Lmxlbmd0aDtvPGE7bysrKXtsZXQgYTtjb25zdCBzPXRbb107c3dpdGNoKHMudHlwZSl7Y2FzZVwiUGxhbmVHZW9tZXRyeVwiOmNhc2VcIlBsYW5lQnVmZmVyR2VvbWV0cnlcIjphPW5ldyB1dVtzLnR5cGVdKHMud2lkdGgscy5oZWlnaHQscy53aWR0aFNlZ21lbnRzLHMuaGVpZ2h0U2VnbWVudHMpO2JyZWFrO2Nhc2VcIkJveEdlb21ldHJ5XCI6Y2FzZVwiQm94QnVmZmVyR2VvbWV0cnlcIjpjYXNlXCJDdWJlR2VvbWV0cnlcIjphPW5ldyB1dVtzLnR5cGVdKHMud2lkdGgscy5oZWlnaHQscy5kZXB0aCxzLndpZHRoU2VnbWVudHMscy5oZWlnaHRTZWdtZW50cyxzLmRlcHRoU2VnbWVudHMpO2JyZWFrO2Nhc2VcIkNpcmNsZUdlb21ldHJ5XCI6Y2FzZVwiQ2lyY2xlQnVmZmVyR2VvbWV0cnlcIjphPW5ldyB1dVtzLnR5cGVdKHMucmFkaXVzLHMuc2VnbWVudHMscy50aGV0YVN0YXJ0LHMudGhldGFMZW5ndGgpO2JyZWFrO2Nhc2VcIkN5bGluZGVyR2VvbWV0cnlcIjpjYXNlXCJDeWxpbmRlckJ1ZmZlckdlb21ldHJ5XCI6YT1uZXcgdXVbcy50eXBlXShzLnJhZGl1c1RvcCxzLnJhZGl1c0JvdHRvbSxzLmhlaWdodCxzLnJhZGlhbFNlZ21lbnRzLHMuaGVpZ2h0U2VnbWVudHMscy5vcGVuRW5kZWQscy50aGV0YVN0YXJ0LHMudGhldGFMZW5ndGgpO2JyZWFrO2Nhc2VcIkNvbmVHZW9tZXRyeVwiOmNhc2VcIkNvbmVCdWZmZXJHZW9tZXRyeVwiOmE9bmV3IHV1W3MudHlwZV0ocy5yYWRpdXMscy5oZWlnaHQscy5yYWRpYWxTZWdtZW50cyxzLmhlaWdodFNlZ21lbnRzLHMub3BlbkVuZGVkLHMudGhldGFTdGFydCxzLnRoZXRhTGVuZ3RoKTticmVhaztjYXNlXCJTcGhlcmVHZW9tZXRyeVwiOmNhc2VcIlNwaGVyZUJ1ZmZlckdlb21ldHJ5XCI6YT1uZXcgdXVbcy50eXBlXShzLnJhZGl1cyxzLndpZHRoU2VnbWVudHMscy5oZWlnaHRTZWdtZW50cyxzLnBoaVN0YXJ0LHMucGhpTGVuZ3RoLHMudGhldGFTdGFydCxzLnRoZXRhTGVuZ3RoKTticmVhaztjYXNlXCJEb2RlY2FoZWRyb25HZW9tZXRyeVwiOmNhc2VcIkRvZGVjYWhlZHJvbkJ1ZmZlckdlb21ldHJ5XCI6Y2FzZVwiSWNvc2FoZWRyb25HZW9tZXRyeVwiOmNhc2VcIkljb3NhaGVkcm9uQnVmZmVyR2VvbWV0cnlcIjpjYXNlXCJPY3RhaGVkcm9uR2VvbWV0cnlcIjpjYXNlXCJPY3RhaGVkcm9uQnVmZmVyR2VvbWV0cnlcIjpjYXNlXCJUZXRyYWhlZHJvbkdlb21ldHJ5XCI6Y2FzZVwiVGV0cmFoZWRyb25CdWZmZXJHZW9tZXRyeVwiOmE9bmV3IHV1W3MudHlwZV0ocy5yYWRpdXMscy5kZXRhaWwpO2JyZWFrO2Nhc2VcIlJpbmdHZW9tZXRyeVwiOmNhc2VcIlJpbmdCdWZmZXJHZW9tZXRyeVwiOmE9bmV3IHV1W3MudHlwZV0ocy5pbm5lclJhZGl1cyxzLm91dGVyUmFkaXVzLHMudGhldGFTZWdtZW50cyxzLnBoaVNlZ21lbnRzLHMudGhldGFTdGFydCxzLnRoZXRhTGVuZ3RoKTticmVhaztjYXNlXCJUb3J1c0dlb21ldHJ5XCI6Y2FzZVwiVG9ydXNCdWZmZXJHZW9tZXRyeVwiOmE9bmV3IHV1W3MudHlwZV0ocy5yYWRpdXMscy50dWJlLHMucmFkaWFsU2VnbWVudHMscy50dWJ1bGFyU2VnbWVudHMscy5hcmMpO2JyZWFrO2Nhc2VcIlRvcnVzS25vdEdlb21ldHJ5XCI6Y2FzZVwiVG9ydXNLbm90QnVmZmVyR2VvbWV0cnlcIjphPW5ldyB1dVtzLnR5cGVdKHMucmFkaXVzLHMudHViZSxzLnR1YnVsYXJTZWdtZW50cyxzLnJhZGlhbFNlZ21lbnRzLHMucCxzLnEpO2JyZWFrO2Nhc2VcIlR1YmVHZW9tZXRyeVwiOmNhc2VcIlR1YmVCdWZmZXJHZW9tZXRyeVwiOmE9bmV3IHV1W3MudHlwZV0oKG5ldyBmaFtzLnBhdGgudHlwZV0pLmZyb21KU09OKHMucGF0aCkscy50dWJ1bGFyU2VnbWVudHMscy5yYWRpdXMscy5yYWRpYWxTZWdtZW50cyxzLmNsb3NlZCk7YnJlYWs7Y2FzZVwiTGF0aGVHZW9tZXRyeVwiOmNhc2VcIkxhdGhlQnVmZmVyR2VvbWV0cnlcIjphPW5ldyB1dVtzLnR5cGVdKHMucG9pbnRzLHMuc2VnbWVudHMscy5waGlTdGFydCxzLnBoaUxlbmd0aCk7YnJlYWs7Y2FzZVwiUG9seWhlZHJvbkdlb21ldHJ5XCI6Y2FzZVwiUG9seWhlZHJvbkJ1ZmZlckdlb21ldHJ5XCI6YT1uZXcgdXVbcy50eXBlXShzLnZlcnRpY2VzLHMuaW5kaWNlcyxzLnJhZGl1cyxzLmRldGFpbHMpO2JyZWFrO2Nhc2VcIlNoYXBlR2VvbWV0cnlcIjpjYXNlXCJTaGFwZUJ1ZmZlckdlb21ldHJ5XCI6cj1bXTtmb3IobGV0IHQ9MCxuPXMuc2hhcGVzLmxlbmd0aDt0PG47dCsrKXtjb25zdCBuPWVbcy5zaGFwZXNbdF1dO3IucHVzaChuKX1hPW5ldyB1dVtzLnR5cGVdKHIscy5jdXJ2ZVNlZ21lbnRzKTticmVhaztjYXNlXCJFeHRydWRlR2VvbWV0cnlcIjpjYXNlXCJFeHRydWRlQnVmZmVyR2VvbWV0cnlcIjpyPVtdO2ZvcihsZXQgdD0wLG49cy5zaGFwZXMubGVuZ3RoO3Q8bjt0Kyspe2NvbnN0IG49ZVtzLnNoYXBlc1t0XV07ci5wdXNoKG4pfWNvbnN0IHQ9cy5vcHRpb25zLmV4dHJ1ZGVQYXRoO3ZvaWQgMCE9PXQmJihzLm9wdGlvbnMuZXh0cnVkZVBhdGg9KG5ldyBmaFt0LnR5cGVdKS5mcm9tSlNPTih0KSksYT1uZXcgdXVbcy50eXBlXShyLHMub3B0aW9ucyk7YnJlYWs7Y2FzZVwiQnVmZmVyR2VvbWV0cnlcIjpjYXNlXCJJbnN0YW5jZWRCdWZmZXJHZW9tZXRyeVwiOmE9aS5wYXJzZShzKTticmVhaztjYXNlXCJHZW9tZXRyeVwiOmNvbnNvbGUuZXJyb3IoJ1RIUkVFLk9iamVjdExvYWRlcjogTG9hZGluZyBcIkdlb21ldHJ5XCIgaXMgbm90IHN1cHBvcnRlZCBhbnltb3JlLicpO2JyZWFrO2RlZmF1bHQ6Y29uc29sZS53YXJuKCdUSFJFRS5PYmplY3RMb2FkZXI6IFVuc3VwcG9ydGVkIGdlb21ldHJ5IHR5cGUgXCInK3MudHlwZSsnXCInKTtjb250aW51ZX1hLnV1aWQ9cy51dWlkLHZvaWQgMCE9PXMubmFtZSYmKGEubmFtZT1zLm5hbWUpLCEwPT09YS5pc0J1ZmZlckdlb21ldHJ5JiZ2b2lkIDAhPT1zLnVzZXJEYXRhJiYoYS51c2VyRGF0YT1zLnVzZXJEYXRhKSxuW3MudXVpZF09YX19cmV0dXJuIG59cGFyc2VNYXRlcmlhbHModCxlKXtjb25zdCBuPXt9LHI9e307aWYodm9pZCAwIT09dCl7Y29uc3QgaT1uZXcgSWg7aS5zZXRUZXh0dXJlcyhlKTtmb3IobGV0IGU9MCxvPXQubGVuZ3RoO2U8bztlKyspe2NvbnN0IG89dFtlXTtpZihcIk11bHRpTWF0ZXJpYWxcIj09PW8udHlwZSl7Y29uc3QgdD1bXTtmb3IobGV0IGU9MDtlPG8ubWF0ZXJpYWxzLmxlbmd0aDtlKyspe2NvbnN0IHI9by5tYXRlcmlhbHNbZV07dm9pZCAwPT09bltyLnV1aWRdJiYobltyLnV1aWRdPWkucGFyc2UocikpLHQucHVzaChuW3IudXVpZF0pfXJbby51dWlkXT10fWVsc2Ugdm9pZCAwPT09bltvLnV1aWRdJiYobltvLnV1aWRdPWkucGFyc2UobykpLHJbby51dWlkXT1uW28udXVpZF19fXJldHVybiByfXBhcnNlQW5pbWF0aW9ucyh0KXtjb25zdCBlPXt9O2lmKHZvaWQgMCE9PXQpZm9yKGxldCBuPTA7bjx0Lmxlbmd0aDtuKyspe2NvbnN0IHI9dFtuXSxpPUR1LnBhcnNlKHIpO2VbaS51dWlkXT1pfXJldHVybiBlfXBhcnNlSW1hZ2VzKHQsZSl7Y29uc3Qgbj10aGlzLHI9e307bGV0IGk7ZnVuY3Rpb24gbyh0KXtpZihcInN0cmluZ1wiPT10eXBlb2YgdCl7Y29uc3QgZT10O3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gbi5tYW5hZ2VyLml0ZW1TdGFydCh0KSxpLmxvYWQodCwoZnVuY3Rpb24oKXtuLm1hbmFnZXIuaXRlbUVuZCh0KX0pLHZvaWQgMCwoZnVuY3Rpb24oKXtuLm1hbmFnZXIuaXRlbUVycm9yKHQpLG4ubWFuYWdlci5pdGVtRW5kKHQpfSkpfSgvXihcXC9cXC8pfChbYS16XSs6KFxcL1xcLyk/KS9pLnRlc3QoZSk/ZTpuLnJlc291cmNlUGF0aCtlKX1yZXR1cm4gdC5kYXRhP3tkYXRhOnppKHQudHlwZSx0LmRhdGEpLHdpZHRoOnQud2lkdGgsaGVpZ2h0OnQuaGVpZ2h0fTpudWxsfWlmKHZvaWQgMCE9PXQmJnQubGVuZ3RoPjApe2NvbnN0IG49bmV3IFV1KGUpO2k9bmV3IFd1KG4pLGkuc2V0Q3Jvc3NPcmlnaW4odGhpcy5jcm9zc09yaWdpbik7Zm9yKGxldCBlPTAsbj10Lmxlbmd0aDtlPG47ZSsrKXtjb25zdCBuPXRbZV0saT1uLnVybDtpZihBcnJheS5pc0FycmF5KGkpKXtyW24udXVpZF09W107Zm9yKGxldCB0PTAsZT1pLmxlbmd0aDt0PGU7dCsrKXtjb25zdCBlPW8oaVt0XSk7bnVsbCE9PWUmJihlIGluc3RhbmNlb2YgSFRNTEltYWdlRWxlbWVudD9yW24udXVpZF0ucHVzaChlKTpyW24udXVpZF0ucHVzaChuZXcgVG8oZS5kYXRhLGUud2lkdGgsZS5oZWlnaHQpKSl9fWVsc2V7Y29uc3QgdD1vKG4udXJsKTtudWxsIT09dCYmKHJbbi51dWlkXT10KX19fXJldHVybiByfXBhcnNlVGV4dHVyZXModCxlKXtmdW5jdGlvbiBuKHQsZSl7cmV0dXJuXCJudW1iZXJcIj09dHlwZW9mIHQ/dDooY29uc29sZS53YXJuKFwiVEhSRUUuT2JqZWN0TG9hZGVyLnBhcnNlVGV4dHVyZTogQ29uc3RhbnQgc2hvdWxkIGJlIGluIG51bWVyaWMgZm9ybS5cIix0KSxlW3RdKX1jb25zdCByPXt9O2lmKHZvaWQgMCE9PXQpZm9yKGxldCBpPTAsbz10Lmxlbmd0aDtpPG87aSsrKXtjb25zdCBvPXRbaV07bGV0IGE7dm9pZCAwPT09by5pbWFnZSYmY29uc29sZS53YXJuKCdUSFJFRS5PYmplY3RMb2FkZXI6IE5vIFwiaW1hZ2VcIiBzcGVjaWZpZWQgZm9yJyxvLnV1aWQpLHZvaWQgMD09PWVbby5pbWFnZV0mJmNvbnNvbGUud2FybihcIlRIUkVFLk9iamVjdExvYWRlcjogVW5kZWZpbmVkIGltYWdlXCIsby5pbWFnZSk7Y29uc3Qgcz1lW28uaW1hZ2VdO0FycmF5LmlzQXJyYXkocyk/KGE9bmV3IE1vKHMpLDY9PT1zLmxlbmd0aCYmKGEubmVlZHNVcGRhdGU9ITApKTooYT1zJiZzLmRhdGE/bmV3IFRvKHMuZGF0YSxzLndpZHRoLHMuaGVpZ2h0KTpuZXcgV24ocykscyYmKGEubmVlZHNVcGRhdGU9ITApKSxhLnV1aWQ9by51dWlkLHZvaWQgMCE9PW8ubmFtZSYmKGEubmFtZT1vLm5hbWUpLHZvaWQgMCE9PW8ubWFwcGluZyYmKGEubWFwcGluZz1uKG8ubWFwcGluZyxVaCkpLHZvaWQgMCE9PW8ub2Zmc2V0JiZhLm9mZnNldC5mcm9tQXJyYXkoby5vZmZzZXQpLHZvaWQgMCE9PW8ucmVwZWF0JiZhLnJlcGVhdC5mcm9tQXJyYXkoby5yZXBlYXQpLHZvaWQgMCE9PW8uY2VudGVyJiZhLmNlbnRlci5mcm9tQXJyYXkoby5jZW50ZXIpLHZvaWQgMCE9PW8ucm90YXRpb24mJihhLnJvdGF0aW9uPW8ucm90YXRpb24pLHZvaWQgMCE9PW8ud3JhcCYmKGEud3JhcFM9bihvLndyYXBbMF0semgpLGEud3JhcFQ9bihvLndyYXBbMV0semgpKSx2b2lkIDAhPT1vLmZvcm1hdCYmKGEuZm9ybWF0PW8uZm9ybWF0KSx2b2lkIDAhPT1vLnR5cGUmJihhLnR5cGU9by50eXBlKSx2b2lkIDAhPT1vLmVuY29kaW5nJiYoYS5lbmNvZGluZz1vLmVuY29kaW5nKSx2b2lkIDAhPT1vLm1pbkZpbHRlciYmKGEubWluRmlsdGVyPW4oby5taW5GaWx0ZXIsR2gpKSx2b2lkIDAhPT1vLm1hZ0ZpbHRlciYmKGEubWFnRmlsdGVyPW4oby5tYWdGaWx0ZXIsR2gpKSx2b2lkIDAhPT1vLmFuaXNvdHJvcHkmJihhLmFuaXNvdHJvcHk9by5hbmlzb3Ryb3B5KSx2b2lkIDAhPT1vLmZsaXBZJiYoYS5mbGlwWT1vLmZsaXBZKSx2b2lkIDAhPT1vLnByZW11bHRpcGx5QWxwaGEmJihhLnByZW11bHRpcGx5QWxwaGE9by5wcmVtdWx0aXBseUFscGhhKSx2b2lkIDAhPT1vLnVucGFja0FsaWdubWVudCYmKGEudW5wYWNrQWxpZ25tZW50PW8udW5wYWNrQWxpZ25tZW50KSxyW28udXVpZF09YX1yZXR1cm4gcn1wYXJzZU9iamVjdCh0LGUsbixyKXtsZXQgaSxvLGE7ZnVuY3Rpb24gcyh0KXtyZXR1cm4gdm9pZCAwPT09ZVt0XSYmY29uc29sZS53YXJuKFwiVEhSRUUuT2JqZWN0TG9hZGVyOiBVbmRlZmluZWQgZ2VvbWV0cnlcIix0KSxlW3RdfWZ1bmN0aW9uIGModCl7aWYodm9pZCAwIT09dCl7aWYoQXJyYXkuaXNBcnJheSh0KSl7Y29uc3QgZT1bXTtmb3IobGV0IHI9MCxpPXQubGVuZ3RoO3I8aTtyKyspe2NvbnN0IGk9dFtyXTt2b2lkIDA9PT1uW2ldJiZjb25zb2xlLndhcm4oXCJUSFJFRS5PYmplY3RMb2FkZXI6IFVuZGVmaW5lZCBtYXRlcmlhbFwiLGkpLGUucHVzaChuW2ldKX1yZXR1cm4gZX1yZXR1cm4gdm9pZCAwPT09blt0XSYmY29uc29sZS53YXJuKFwiVEhSRUUuT2JqZWN0TG9hZGVyOiBVbmRlZmluZWQgbWF0ZXJpYWxcIix0KSxuW3RdfX1zd2l0Y2godC50eXBlKXtjYXNlXCJTY2VuZVwiOmk9bmV3IHpzLHZvaWQgMCE9PXQuYmFja2dyb3VuZCYmTnVtYmVyLmlzSW50ZWdlcih0LmJhY2tncm91bmQpJiYoaS5iYWNrZ3JvdW5kPW5ldyB5aSh0LmJhY2tncm91bmQpKSx2b2lkIDAhPT10LmZvZyYmKFwiRm9nXCI9PT10LmZvZy50eXBlP2kuZm9nPW5ldyBVcyh0LmZvZy5jb2xvcix0LmZvZy5uZWFyLHQuZm9nLmZhcik6XCJGb2dFeHAyXCI9PT10LmZvZy50eXBlJiYoaS5mb2c9bmV3IEZzKHQuZm9nLmNvbG9yLHQuZm9nLmRlbnNpdHkpKSk7YnJlYWs7Y2FzZVwiUGVyc3BlY3RpdmVDYW1lcmFcIjppPW5ldyB3byh0LmZvdix0LmFzcGVjdCx0Lm5lYXIsdC5mYXIpLHZvaWQgMCE9PXQuZm9jdXMmJihpLmZvY3VzPXQuZm9jdXMpLHZvaWQgMCE9PXQuem9vbSYmKGkuem9vbT10Lnpvb20pLHZvaWQgMCE9PXQuZmlsbUdhdWdlJiYoaS5maWxtR2F1Z2U9dC5maWxtR2F1Z2UpLHZvaWQgMCE9PXQuZmlsbU9mZnNldCYmKGkuZmlsbU9mZnNldD10LmZpbG1PZmZzZXQpLHZvaWQgMCE9PXQudmlldyYmKGkudmlldz1PYmplY3QuYXNzaWduKHt9LHQudmlldykpO2JyZWFrO2Nhc2VcIk9ydGhvZ3JhcGhpY0NhbWVyYVwiOmk9bmV3IFRoKHQubGVmdCx0LnJpZ2h0LHQudG9wLHQuYm90dG9tLHQubmVhcix0LmZhciksdm9pZCAwIT09dC56b29tJiYoaS56b29tPXQuem9vbSksdm9pZCAwIT09dC52aWV3JiYoaS52aWV3PU9iamVjdC5hc3NpZ24oe30sdC52aWV3KSk7YnJlYWs7Y2FzZVwiQW1iaWVudExpZ2h0XCI6aT1uZXcgTGgodC5jb2xvcix0LmludGVuc2l0eSk7YnJlYWs7Y2FzZVwiRGlyZWN0aW9uYWxMaWdodFwiOmk9bmV3IEFoKHQuY29sb3IsdC5pbnRlbnNpdHkpO2JyZWFrO2Nhc2VcIlBvaW50TGlnaHRcIjppPW5ldyBTaCh0LmNvbG9yLHQuaW50ZW5zaXR5LHQuZGlzdGFuY2UsdC5kZWNheSk7YnJlYWs7Y2FzZVwiUmVjdEFyZWFMaWdodFwiOmk9bmV3IFJoKHQuY29sb3IsdC5pbnRlbnNpdHksdC53aWR0aCx0LmhlaWdodCk7YnJlYWs7Y2FzZVwiU3BvdExpZ2h0XCI6aT1uZXcgX2godC5jb2xvcix0LmludGVuc2l0eSx0LmRpc3RhbmNlLHQuYW5nbGUsdC5wZW51bWJyYSx0LmRlY2F5KTticmVhaztjYXNlXCJIZW1pc3BoZXJlTGlnaHRcIjppPW5ldyB4aCh0LmNvbG9yLHQuZ3JvdW5kQ29sb3IsdC5pbnRlbnNpdHkpO2JyZWFrO2Nhc2VcIkxpZ2h0UHJvYmVcIjppPShuZXcgQ2gpLmZyb21KU09OKHQpO2JyZWFrO2Nhc2VcIlNraW5uZWRNZXNoXCI6bz1zKHQuZ2VvbWV0cnkpLGE9Yyh0Lm1hdGVyaWFsKSxpPW5ldyBjYyhvLGEpLHZvaWQgMCE9PXQuYmluZE1vZGUmJihpLmJpbmRNb2RlPXQuYmluZE1vZGUpLHZvaWQgMCE9PXQuYmluZE1hdHJpeCYmaS5iaW5kTWF0cml4LmZyb21BcnJheSh0LmJpbmRNYXRyaXgpLHZvaWQgMCE9PXQuc2tlbGV0b24mJihpLnNrZWxldG9uPXQuc2tlbGV0b24pO2JyZWFrO2Nhc2VcIk1lc2hcIjpvPXModC5nZW9tZXRyeSksYT1jKHQubWF0ZXJpYWwpLGk9bmV3IGhvKG8sYSk7YnJlYWs7Y2FzZVwiSW5zdGFuY2VkTWVzaFwiOm89cyh0Lmdlb21ldHJ5KSxhPWModC5tYXRlcmlhbCk7Y29uc3QgZT10LmNvdW50LG49dC5pbnN0YW5jZU1hdHJpeDtpPW5ldyB2YyhvLGEsZSksaS5pbnN0YW5jZU1hdHJpeD1uZXcgVGkobmV3IEZsb2F0MzJBcnJheShuLmFycmF5KSwxNik7YnJlYWs7Y2FzZVwiTE9EXCI6aT1uZXcgc2M7YnJlYWs7Y2FzZVwiTGluZVwiOmk9bmV3IFNjKHModC5nZW9tZXRyeSksYyh0Lm1hdGVyaWFsKSx0Lm1vZGUpO2JyZWFrO2Nhc2VcIkxpbmVMb29wXCI6aT1uZXcgTGMocyh0Lmdlb21ldHJ5KSxjKHQubWF0ZXJpYWwpKTticmVhaztjYXNlXCJMaW5lU2VnbWVudHNcIjppPW5ldyBBYyhzKHQuZ2VvbWV0cnkpLGModC5tYXRlcmlhbCkpO2JyZWFrO2Nhc2VcIlBvaW50Q2xvdWRcIjpjYXNlXCJQb2ludHNcIjppPW5ldyBOYyhzKHQuZ2VvbWV0cnkpLGModC5tYXRlcmlhbCkpO2JyZWFrO2Nhc2VcIlNwcml0ZVwiOmk9bmV3IHJjKGModC5tYXRlcmlhbCkpO2JyZWFrO2Nhc2VcIkdyb3VwXCI6aT1uZXcgQ3M7YnJlYWs7Y2FzZVwiQm9uZVwiOmk9bmV3IGxjO2JyZWFrO2RlZmF1bHQ6aT1uZXcgSnJ9aWYoaS51dWlkPXQudXVpZCx2b2lkIDAhPT10Lm5hbWUmJihpLm5hbWU9dC5uYW1lKSx2b2lkIDAhPT10Lm1hdHJpeD8oaS5tYXRyaXguZnJvbUFycmF5KHQubWF0cml4KSx2b2lkIDAhPT10Lm1hdHJpeEF1dG9VcGRhdGUmJihpLm1hdHJpeEF1dG9VcGRhdGU9dC5tYXRyaXhBdXRvVXBkYXRlKSxpLm1hdHJpeEF1dG9VcGRhdGUmJmkubWF0cml4LmRlY29tcG9zZShpLnBvc2l0aW9uLGkucXVhdGVybmlvbixpLnNjYWxlKSk6KHZvaWQgMCE9PXQucG9zaXRpb24mJmkucG9zaXRpb24uZnJvbUFycmF5KHQucG9zaXRpb24pLHZvaWQgMCE9PXQucm90YXRpb24mJmkucm90YXRpb24uZnJvbUFycmF5KHQucm90YXRpb24pLHZvaWQgMCE9PXQucXVhdGVybmlvbiYmaS5xdWF0ZXJuaW9uLmZyb21BcnJheSh0LnF1YXRlcm5pb24pLHZvaWQgMCE9PXQuc2NhbGUmJmkuc2NhbGUuZnJvbUFycmF5KHQuc2NhbGUpKSx2b2lkIDAhPT10LmNhc3RTaGFkb3cmJihpLmNhc3RTaGFkb3c9dC5jYXN0U2hhZG93KSx2b2lkIDAhPT10LnJlY2VpdmVTaGFkb3cmJihpLnJlY2VpdmVTaGFkb3c9dC5yZWNlaXZlU2hhZG93KSx0LnNoYWRvdyYmKHZvaWQgMCE9PXQuc2hhZG93LmJpYXMmJihpLnNoYWRvdy5iaWFzPXQuc2hhZG93LmJpYXMpLHZvaWQgMCE9PXQuc2hhZG93Lm5vcm1hbEJpYXMmJihpLnNoYWRvdy5ub3JtYWxCaWFzPXQuc2hhZG93Lm5vcm1hbEJpYXMpLHZvaWQgMCE9PXQuc2hhZG93LnJhZGl1cyYmKGkuc2hhZG93LnJhZGl1cz10LnNoYWRvdy5yYWRpdXMpLHZvaWQgMCE9PXQuc2hhZG93Lm1hcFNpemUmJmkuc2hhZG93Lm1hcFNpemUuZnJvbUFycmF5KHQuc2hhZG93Lm1hcFNpemUpLHZvaWQgMCE9PXQuc2hhZG93LmNhbWVyYSYmKGkuc2hhZG93LmNhbWVyYT10aGlzLnBhcnNlT2JqZWN0KHQuc2hhZG93LmNhbWVyYSkpKSx2b2lkIDAhPT10LnZpc2libGUmJihpLnZpc2libGU9dC52aXNpYmxlKSx2b2lkIDAhPT10LmZydXN0dW1DdWxsZWQmJihpLmZydXN0dW1DdWxsZWQ9dC5mcnVzdHVtQ3VsbGVkKSx2b2lkIDAhPT10LnJlbmRlck9yZGVyJiYoaS5yZW5kZXJPcmRlcj10LnJlbmRlck9yZGVyKSx2b2lkIDAhPT10LnVzZXJEYXRhJiYoaS51c2VyRGF0YT10LnVzZXJEYXRhKSx2b2lkIDAhPT10LmxheWVycyYmKGkubGF5ZXJzLm1hc2s9dC5sYXllcnMpLHZvaWQgMCE9PXQuY2hpbGRyZW4pe2NvbnN0IG89dC5jaGlsZHJlbjtmb3IobGV0IHQ9MDt0PG8ubGVuZ3RoO3QrKylpLmFkZCh0aGlzLnBhcnNlT2JqZWN0KG9bdF0sZSxuLHIpKX1pZih2b2lkIDAhPT10LmFuaW1hdGlvbnMpe2NvbnN0IGU9dC5hbmltYXRpb25zO2ZvcihsZXQgdD0wO3Q8ZS5sZW5ndGg7dCsrKXtjb25zdCBuPWVbdF07aS5hbmltYXRpb25zLnB1c2gocltuXSl9fWlmKFwiTE9EXCI9PT10LnR5cGUpe3ZvaWQgMCE9PXQuYXV0b1VwZGF0ZSYmKGkuYXV0b1VwZGF0ZT10LmF1dG9VcGRhdGUpO2NvbnN0IGU9dC5sZXZlbHM7Zm9yKGxldCB0PTA7dDxlLmxlbmd0aDt0Kyspe2NvbnN0IG49ZVt0XSxyPWkuZ2V0T2JqZWN0QnlQcm9wZXJ0eShcInV1aWRcIixuLm9iamVjdCk7dm9pZCAwIT09ciYmaS5hZGRMZXZlbChyLG4uZGlzdGFuY2UpfX1yZXR1cm4gaX1iaW5kU2tlbGV0b25zKHQsZSl7MCE9PU9iamVjdC5rZXlzKGUpLmxlbmd0aCYmdC50cmF2ZXJzZSgoZnVuY3Rpb24odCl7aWYoITA9PT10LmlzU2tpbm5lZE1lc2gmJnZvaWQgMCE9PXQuc2tlbGV0b24pe2NvbnN0IG49ZVt0LnNrZWxldG9uXTt2b2lkIDA9PT1uP2NvbnNvbGUud2FybihcIlRIUkVFLk9iamVjdExvYWRlcjogTm8gc2tlbGV0b24gZm91bmQgd2l0aCBVVUlEOlwiLHQuc2tlbGV0b24pOnQuYmluZChuLHQuYmluZE1hdHJpeCl9fSkpfXNldFRleHR1cmVQYXRoKHQpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5PYmplY3RMb2FkZXI6IC5zZXRUZXh0dXJlUGF0aCgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLnNldFJlc291cmNlUGF0aCgpLlwiKSx0aGlzLnNldFJlc291cmNlUGF0aCh0KX19Y29uc3QgVWg9e1VWTWFwcGluZzppdCxDdWJlUmVmbGVjdGlvbk1hcHBpbmc6b3QsQ3ViZVJlZnJhY3Rpb25NYXBwaW5nOmF0LEVxdWlyZWN0YW5ndWxhclJlZmxlY3Rpb25NYXBwaW5nOnN0LEVxdWlyZWN0YW5ndWxhclJlZnJhY3Rpb25NYXBwaW5nOmN0LEN1YmVVVlJlZmxlY3Rpb25NYXBwaW5nOmx0LEN1YmVVVlJlZnJhY3Rpb25NYXBwaW5nOnV0fSx6aD17UmVwZWF0V3JhcHBpbmc6aHQsQ2xhbXBUb0VkZ2VXcmFwcGluZzpkdCxNaXJyb3JlZFJlcGVhdFdyYXBwaW5nOnB0fSxHaD17TmVhcmVzdEZpbHRlcjpmdCxOZWFyZXN0TWlwbWFwTmVhcmVzdEZpbHRlcjptdCxOZWFyZXN0TWlwbWFwTGluZWFyRmlsdGVyOnZ0LExpbmVhckZpbHRlcjp4dCxMaW5lYXJNaXBtYXBOZWFyZXN0RmlsdGVyOmJ0LExpbmVhck1pcG1hcExpbmVhckZpbHRlcjpfdH07ZnVuY3Rpb24gSGgodCl7XCJ1bmRlZmluZWRcIj09dHlwZW9mIGNyZWF0ZUltYWdlQml0bWFwJiZjb25zb2xlLndhcm4oXCJUSFJFRS5JbWFnZUJpdG1hcExvYWRlcjogY3JlYXRlSW1hZ2VCaXRtYXAoKSBub3Qgc3VwcG9ydGVkLlwiKSxcInVuZGVmaW5lZFwiPT10eXBlb2YgZmV0Y2gmJmNvbnNvbGUud2FybihcIlRIUkVFLkltYWdlQml0bWFwTG9hZGVyOiBmZXRjaCgpIG5vdCBzdXBwb3J0ZWQuXCIpLEd1LmNhbGwodGhpcyx0KSx0aGlzLm9wdGlvbnM9e3ByZW11bHRpcGx5QWxwaGE6XCJub25lXCJ9fWZ1bmN0aW9uIGtoKCl7dGhpcy50eXBlPVwiU2hhcGVQYXRoXCIsdGhpcy5jb2xvcj1uZXcgeWksdGhpcy5zdWJQYXRocz1bXSx0aGlzLmN1cnJlbnRQYXRoPW51bGx9ZnVuY3Rpb24gVmgodCl7dGhpcy50eXBlPVwiRm9udFwiLHRoaXMuZGF0YT10fWZ1bmN0aW9uIGpoKHQsZSxuLHIsaSl7Y29uc3Qgbz1pLmdseXBoc1t0XXx8aS5nbHlwaHNbXCI/XCJdO2lmKCFvKXJldHVybiB2b2lkIGNvbnNvbGUuZXJyb3IoJ1RIUkVFLkZvbnQ6IGNoYXJhY3RlciBcIicrdCsnXCIgZG9lcyBub3QgZXhpc3RzIGluIGZvbnQgZmFtaWx5ICcraS5mYW1pbHlOYW1lK1wiLlwiKTtjb25zdCBhPW5ldyBraDtsZXQgcyxjLGwsdSxoLGQscCxmO2lmKG8ubyl7Y29uc3QgdD1vLl9jYWNoZWRPdXRsaW5lfHwoby5fY2FjaGVkT3V0bGluZT1vLm8uc3BsaXQoXCIgXCIpKTtmb3IobGV0IGk9MCxvPXQubGVuZ3RoO2k8bzspe3N3aXRjaCh0W2krK10pe2Nhc2VcIm1cIjpzPXRbaSsrXSplK24sYz10W2krK10qZStyLGEubW92ZVRvKHMsYyk7YnJlYWs7Y2FzZVwibFwiOnM9dFtpKytdKmUrbixjPXRbaSsrXSplK3IsYS5saW5lVG8ocyxjKTticmVhaztjYXNlXCJxXCI6bD10W2krK10qZStuLHU9dFtpKytdKmUrcixoPXRbaSsrXSplK24sZD10W2krK10qZStyLGEucXVhZHJhdGljQ3VydmVUbyhoLGQsbCx1KTticmVhaztjYXNlXCJiXCI6bD10W2krK10qZStuLHU9dFtpKytdKmUrcixoPXRbaSsrXSplK24sZD10W2krK10qZStyLHA9dFtpKytdKmUrbixmPXRbaSsrXSplK3IsYS5iZXppZXJDdXJ2ZVRvKGgsZCxwLGYsbCx1KX19fXJldHVybntvZmZzZXRYOm8uaGEqZSxwYXRoOmF9fWZ1bmN0aW9uIFdoKHQpe0d1LmNhbGwodGhpcyx0KX1sZXQgWGg7SGgucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShHdS5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpIaCxpc0ltYWdlQml0bWFwTG9hZGVyOiEwLHNldE9wdGlvbnM6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMub3B0aW9ucz10LHRoaXN9LGxvYWQ6ZnVuY3Rpb24odCxlLG4scil7dm9pZCAwPT09dCYmKHQ9XCJcIiksdm9pZCAwIT09dGhpcy5wYXRoJiYodD10aGlzLnBhdGgrdCksdD10aGlzLm1hbmFnZXIucmVzb2x2ZVVSTCh0KTtjb25zdCBpPXRoaXMsbz1GdS5nZXQodCk7aWYodm9pZCAwIT09bylyZXR1cm4gaS5tYW5hZ2VyLml0ZW1TdGFydCh0KSxzZXRUaW1lb3V0KChmdW5jdGlvbigpe2UmJmUobyksaS5tYW5hZ2VyLml0ZW1FbmQodCl9KSwwKSxvO2NvbnN0IGE9e307YS5jcmVkZW50aWFscz1cImFub255bW91c1wiPT09dGhpcy5jcm9zc09yaWdpbj9cInNhbWUtb3JpZ2luXCI6XCJpbmNsdWRlXCIsZmV0Y2godCxhKS50aGVuKChmdW5jdGlvbih0KXtyZXR1cm4gdC5ibG9iKCl9KSkudGhlbigoZnVuY3Rpb24odCl7cmV0dXJuIGNyZWF0ZUltYWdlQml0bWFwKHQsaS5vcHRpb25zKX0pKS50aGVuKChmdW5jdGlvbihuKXtGdS5hZGQodCxuKSxlJiZlKG4pLGkubWFuYWdlci5pdGVtRW5kKHQpfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyJiZyKGUpLGkubWFuYWdlci5pdGVtRXJyb3IodCksaS5tYW5hZ2VyLml0ZW1FbmQodCl9KSksaS5tYW5hZ2VyLml0ZW1TdGFydCh0KX19KSxPYmplY3QuYXNzaWduKGtoLnByb3RvdHlwZSx7bW92ZVRvOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuY3VycmVudFBhdGg9bmV3IGdoLHRoaXMuc3ViUGF0aHMucHVzaCh0aGlzLmN1cnJlbnRQYXRoKSx0aGlzLmN1cnJlbnRQYXRoLm1vdmVUbyh0LGUpLHRoaXN9LGxpbmVUbzpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmN1cnJlbnRQYXRoLmxpbmVUbyh0LGUpLHRoaXN9LHF1YWRyYXRpY0N1cnZlVG86ZnVuY3Rpb24odCxlLG4scil7cmV0dXJuIHRoaXMuY3VycmVudFBhdGgucXVhZHJhdGljQ3VydmVUbyh0LGUsbixyKSx0aGlzfSxiZXppZXJDdXJ2ZVRvOmZ1bmN0aW9uKHQsZSxuLHIsaSxvKXtyZXR1cm4gdGhpcy5jdXJyZW50UGF0aC5iZXppZXJDdXJ2ZVRvKHQsZSxuLHIsaSxvKSx0aGlzfSxzcGxpbmVUaHJ1OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmN1cnJlbnRQYXRoLnNwbGluZVRocnUodCksdGhpc30sdG9TaGFwZXM6ZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKHQpe2NvbnN0IGU9W107Zm9yKGxldCBuPTAscj10Lmxlbmd0aDtuPHI7bisrKXtjb25zdCByPXRbbl0saT1uZXcgdmg7aS5jdXJ2ZXM9ci5jdXJ2ZXMsZS5wdXNoKGkpfXJldHVybiBlfWZ1bmN0aW9uIHIodCxlKXtjb25zdCBuPWUubGVuZ3RoO2xldCByPSExO2ZvcihsZXQgaT1uLTEsbz0wO288bjtpPW8rKyl7bGV0IG49ZVtpXSxhPWVbb10scz1hLngtbi54LGM9YS55LW4ueTtpZihNYXRoLmFicyhjKT5OdW1iZXIuRVBTSUxPTil7aWYoYzwwJiYobj1lW29dLHM9LXMsYT1lW2ldLGM9LWMpLHQueTxuLnl8fHQueT5hLnkpY29udGludWU7aWYodC55PT09bi55KXtpZih0Lng9PT1uLngpcmV0dXJuITB9ZWxzZXtjb25zdCBlPWMqKHQueC1uLngpLXMqKHQueS1uLnkpO2lmKDA9PT1lKXJldHVybiEwO2lmKGU8MCljb250aW51ZTtyPSFyfX1lbHNle2lmKHQueSE9PW4ueSljb250aW51ZTtpZihhLng8PXQueCYmdC54PD1uLnh8fG4ueDw9dC54JiZ0Lng8PWEueClyZXR1cm4hMH19cmV0dXJuIHJ9Y29uc3QgaT1DbC5pc0Nsb2NrV2lzZSxvPXRoaXMuc3ViUGF0aHM7aWYoMD09PW8ubGVuZ3RoKXJldHVybltdO2lmKCEwPT09ZSlyZXR1cm4gbihvKTtsZXQgYSxzLGM7Y29uc3QgbD1bXTtpZigxPT09by5sZW5ndGgpcmV0dXJuIHM9b1swXSxjPW5ldyB2aCxjLmN1cnZlcz1zLmN1cnZlcyxsLnB1c2goYyksbDtsZXQgdT0haShvWzBdLmdldFBvaW50cygpKTt1PXQ/IXU6dTtjb25zdCBoPVtdLGQ9W107bGV0IHAsZixtPVtdLGc9MDtkW2ddPXZvaWQgMCxtW2ddPVtdO2ZvcihsZXQgZT0wLG49by5sZW5ndGg7ZTxuO2UrKylzPW9bZV0scD1zLmdldFBvaW50cygpLGE9aShwKSxhPXQ/IWE6YSxhPyghdSYmZFtnXSYmZysrLGRbZ109e3M6bmV3IHZoLHA6cH0sZFtnXS5zLmN1cnZlcz1zLmN1cnZlcyx1JiZnKyssbVtnXT1bXSk6bVtnXS5wdXNoKHtoOnMscDpwWzBdfSk7aWYoIWRbMF0pcmV0dXJuIG4obyk7aWYoZC5sZW5ndGg+MSl7bGV0IHQ9ITE7Y29uc3QgZT1bXTtmb3IobGV0IHQ9MCxlPWQubGVuZ3RoO3Q8ZTt0KyspaFt0XT1bXTtmb3IobGV0IG49MCxpPWQubGVuZ3RoO248aTtuKyspe2NvbnN0IGk9bVtuXTtmb3IobGV0IG89MDtvPGkubGVuZ3RoO28rKyl7Y29uc3QgYT1pW29dO2xldCBzPSEwO2ZvcihsZXQgaT0wO2k8ZC5sZW5ndGg7aSsrKXIoYS5wLGRbaV0ucCkmJihuIT09aSYmZS5wdXNoKHtmcm9tczpuLHRvczppLGhvbGU6b30pLHM/KHM9ITEsaFtpXS5wdXNoKGEpKTp0PSEwKTtzJiZoW25dLnB1c2goYSl9fWUubGVuZ3RoPjAmJih0fHwobT1oKSl9Zm9yKGxldCB0PTAsZT1kLmxlbmd0aDt0PGU7dCsrKXtjPWRbdF0ucyxsLnB1c2goYyksZj1tW3RdO2ZvcihsZXQgdD0wLGU9Zi5sZW5ndGg7dDxlO3QrKyljLmhvbGVzLnB1c2goZlt0XS5oKX1yZXR1cm4gbH19KSxPYmplY3QuYXNzaWduKFZoLnByb3RvdHlwZSx7aXNGb250OiEwLGdlbmVyYXRlU2hhcGVzOmZ1bmN0aW9uKHQsZT0xMDApe2NvbnN0IG49W10scj1mdW5jdGlvbih0LGUsbil7Y29uc3Qgcj1BcnJheS5mcm9tP0FycmF5LmZyb20odCk6U3RyaW5nKHQpLnNwbGl0KFwiXCIpLGk9ZS9uLnJlc29sdXRpb24sbz0obi5ib3VuZGluZ0JveC55TWF4LW4uYm91bmRpbmdCb3gueU1pbituLnVuZGVybGluZVRoaWNrbmVzcykqaSxhPVtdO2xldCBzPTAsYz0wO2ZvcihsZXQgdD0wO3Q8ci5sZW5ndGg7dCsrKXtjb25zdCBlPXJbdF07aWYoXCJcXG5cIj09PWUpcz0wLGMtPW87ZWxzZXtjb25zdCB0PWpoKGUsaSxzLGMsbik7cys9dC5vZmZzZXRYLGEucHVzaCh0LnBhdGgpfX1yZXR1cm4gYX0odCxlLHRoaXMuZGF0YSk7Zm9yKGxldCB0PTAsZT1yLmxlbmd0aDt0PGU7dCsrKUFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KG4sclt0XS50b1NoYXBlcygpKTtyZXR1cm4gbn19KSxXaC5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKEd1LnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOldoLGxvYWQ6ZnVuY3Rpb24odCxlLG4scil7Y29uc3QgaT10aGlzLG89bmV3IGt1KHRoaXMubWFuYWdlcik7by5zZXRQYXRoKHRoaXMucGF0aCksby5zZXRSZXF1ZXN0SGVhZGVyKHRoaXMucmVxdWVzdEhlYWRlciksby5zZXRXaXRoQ3JlZGVudGlhbHMoaS53aXRoQ3JlZGVudGlhbHMpLG8ubG9hZCh0LChmdW5jdGlvbih0KXtsZXQgbjt0cnl7bj1KU09OLnBhcnNlKHQpfWNhdGNoKGUpe2NvbnNvbGUud2FybihcIlRIUkVFLkZvbnRMb2FkZXI6IHR5cGVmYWNlLmpzIHN1cHBvcnQgaXMgYmVpbmcgZGVwcmVjYXRlZC4gVXNlIHR5cGVmYWNlLmpzb24gaW5zdGVhZC5cIiksbj1KU09OLnBhcnNlKHQuc3Vic3RyaW5nKDY1LHQubGVuZ3RoLTIpKX1jb25zdCByPWkucGFyc2Uobik7ZSYmZShyKX0pLG4scil9LHBhcnNlOmZ1bmN0aW9uKHQpe3JldHVybiBuZXcgVmgodCl9fSk7Y29uc3QgcWg9e2dldENvbnRleHQ6ZnVuY3Rpb24oKXtyZXR1cm4gdm9pZCAwPT09WGgmJihYaD1uZXcod2luZG93LkF1ZGlvQ29udGV4dHx8d2luZG93LndlYmtpdEF1ZGlvQ29udGV4dCkpLFhofSxzZXRDb250ZXh0OmZ1bmN0aW9uKHQpe1hoPXR9fTtmdW5jdGlvbiBZaCh0KXtHdS5jYWxsKHRoaXMsdCl9ZnVuY3Rpb24gWmgodCxlLG4pe0NoLmNhbGwodGhpcyx2b2lkIDAsbik7Y29uc3Qgcj0obmV3IHlpKS5zZXQodCksaT0obmV3IHlpKS5zZXQoZSksbz1uZXcgS24oci5yLHIuZyxyLmIpLGE9bmV3IEtuKGkucixpLmcsaS5iKSxzPU1hdGguc3FydChNYXRoLlBJKSxjPXMqTWF0aC5zcXJ0KC43NSk7dGhpcy5zaC5jb2VmZmljaWVudHNbMF0uY29weShvKS5hZGQoYSkubXVsdGlwbHlTY2FsYXIocyksdGhpcy5zaC5jb2VmZmljaWVudHNbMV0uY29weShvKS5zdWIoYSkubXVsdGlwbHlTY2FsYXIoYyl9ZnVuY3Rpb24gSmgodCxlKXtDaC5jYWxsKHRoaXMsdm9pZCAwLGUpO2NvbnN0IG49KG5ldyB5aSkuc2V0KHQpO3RoaXMuc2guY29lZmZpY2llbnRzWzBdLnNldChuLnIsbi5nLG4uYikubXVsdGlwbHlTY2FsYXIoMipNYXRoLnNxcnQoTWF0aC5QSSkpfVloLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoR3UucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6WWgsbG9hZDpmdW5jdGlvbih0LGUsbixyKXtjb25zdCBpPXRoaXMsbz1uZXcga3UoaS5tYW5hZ2VyKTtvLnNldFJlc3BvbnNlVHlwZShcImFycmF5YnVmZmVyXCIpLG8uc2V0UGF0aChpLnBhdGgpLG8uc2V0UmVxdWVzdEhlYWRlcihpLnJlcXVlc3RIZWFkZXIpLG8uc2V0V2l0aENyZWRlbnRpYWxzKGkud2l0aENyZWRlbnRpYWxzKSxvLmxvYWQodCwoZnVuY3Rpb24obil7dHJ5e2NvbnN0IHQ9bi5zbGljZSgwKTtxaC5nZXRDb250ZXh0KCkuZGVjb2RlQXVkaW9EYXRhKHQsKGZ1bmN0aW9uKHQpe2UodCl9KSl9Y2F0Y2goZSl7cj9yKGUpOmNvbnNvbGUuZXJyb3IoZSksaS5tYW5hZ2VyLml0ZW1FcnJvcih0KX19KSxuLHIpfX0pLFpoLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoQ2gucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6WmgsaXNIZW1pc3BoZXJlTGlnaHRQcm9iZTohMCxjb3B5OmZ1bmN0aW9uKHQpe3JldHVybiBDaC5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsdCksdGhpc30sdG9KU09OOmZ1bmN0aW9uKHQpe3JldHVybiBDaC5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyx0KX19KSxKaC5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKENoLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOkpoLGlzQW1iaWVudExpZ2h0UHJvYmU6ITAsY29weTpmdW5jdGlvbih0KXtyZXR1cm4gQ2gucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLHQpLHRoaXN9LHRvSlNPTjpmdW5jdGlvbih0KXtyZXR1cm4gQ2gucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMsdCl9fSk7Y29uc3QgS2g9bmV3IFRyLFFoPW5ldyBUcjtmdW5jdGlvbiAkaCgpe3RoaXMudHlwZT1cIlN0ZXJlb0NhbWVyYVwiLHRoaXMuYXNwZWN0PTEsdGhpcy5leWVTZXA9LjA2NCx0aGlzLmNhbWVyYUw9bmV3IHdvLHRoaXMuY2FtZXJhTC5sYXllcnMuZW5hYmxlKDEpLHRoaXMuY2FtZXJhTC5tYXRyaXhBdXRvVXBkYXRlPSExLHRoaXMuY2FtZXJhUj1uZXcgd28sdGhpcy5jYW1lcmFSLmxheWVycy5lbmFibGUoMiksdGhpcy5jYW1lcmFSLm1hdHJpeEF1dG9VcGRhdGU9ITEsdGhpcy5fY2FjaGU9e2ZvY3VzOm51bGwsZm92Om51bGwsYXNwZWN0Om51bGwsbmVhcjpudWxsLGZhcjpudWxsLHpvb206bnVsbCxleWVTZXA6bnVsbH19T2JqZWN0LmFzc2lnbigkaC5wcm90b3R5cGUse3VwZGF0ZTpmdW5jdGlvbih0KXtjb25zdCBlPXRoaXMuX2NhY2hlO2lmKGUuZm9jdXMhPT10LmZvY3VzfHxlLmZvdiE9PXQuZm92fHxlLmFzcGVjdCE9PXQuYXNwZWN0KnRoaXMuYXNwZWN0fHxlLm5lYXIhPT10Lm5lYXJ8fGUuZmFyIT09dC5mYXJ8fGUuem9vbSE9PXQuem9vbXx8ZS5leWVTZXAhPT10aGlzLmV5ZVNlcCl7ZS5mb2N1cz10LmZvY3VzLGUuZm92PXQuZm92LGUuYXNwZWN0PXQuYXNwZWN0KnRoaXMuYXNwZWN0LGUubmVhcj10Lm5lYXIsZS5mYXI9dC5mYXIsZS56b29tPXQuem9vbSxlLmV5ZVNlcD10aGlzLmV5ZVNlcDtjb25zdCBuPXQucHJvamVjdGlvbk1hdHJpeC5jbG9uZSgpLHI9ZS5leWVTZXAvMixpPXIqZS5uZWFyL2UuZm9jdXMsbz1lLm5lYXIqTWF0aC50YW4oem4uREVHMlJBRCplLmZvdiouNSkvZS56b29tO2xldCBhLHM7UWguZWxlbWVudHNbMTJdPS1yLEtoLmVsZW1lbnRzWzEyXT1yLGE9LW8qZS5hc3BlY3QraSxzPW8qZS5hc3BlY3QraSxuLmVsZW1lbnRzWzBdPTIqZS5uZWFyLyhzLWEpLG4uZWxlbWVudHNbOF09KHMrYSkvKHMtYSksdGhpcy5jYW1lcmFMLnByb2plY3Rpb25NYXRyaXguY29weShuKSxhPS1vKmUuYXNwZWN0LWkscz1vKmUuYXNwZWN0LWksbi5lbGVtZW50c1swXT0yKmUubmVhci8ocy1hKSxuLmVsZW1lbnRzWzhdPShzK2EpLyhzLWEpLHRoaXMuY2FtZXJhUi5wcm9qZWN0aW9uTWF0cml4LmNvcHkobil9dGhpcy5jYW1lcmFMLm1hdHJpeFdvcmxkLmNvcHkodC5tYXRyaXhXb3JsZCkubXVsdGlwbHkoUWgpLHRoaXMuY2FtZXJhUi5tYXRyaXhXb3JsZC5jb3B5KHQubWF0cml4V29ybGQpLm11bHRpcGx5KEtoKX19KTtjbGFzcyB0ZHtjb25zdHJ1Y3Rvcih0KXt0aGlzLmF1dG9TdGFydD12b2lkIDA9PT10fHx0LHRoaXMuc3RhcnRUaW1lPTAsdGhpcy5vbGRUaW1lPTAsdGhpcy5lbGFwc2VkVGltZT0wLHRoaXMucnVubmluZz0hMX1zdGFydCgpe3RoaXMuc3RhcnRUaW1lPWVkKCksdGhpcy5vbGRUaW1lPXRoaXMuc3RhcnRUaW1lLHRoaXMuZWxhcHNlZFRpbWU9MCx0aGlzLnJ1bm5pbmc9ITB9c3RvcCgpe3RoaXMuZ2V0RWxhcHNlZFRpbWUoKSx0aGlzLnJ1bm5pbmc9ITEsdGhpcy5hdXRvU3RhcnQ9ITF9Z2V0RWxhcHNlZFRpbWUoKXtyZXR1cm4gdGhpcy5nZXREZWx0YSgpLHRoaXMuZWxhcHNlZFRpbWV9Z2V0RGVsdGEoKXtsZXQgdD0wO2lmKHRoaXMuYXV0b1N0YXJ0JiYhdGhpcy5ydW5uaW5nKXJldHVybiB0aGlzLnN0YXJ0KCksMDtpZih0aGlzLnJ1bm5pbmcpe2NvbnN0IGU9ZWQoKTt0PShlLXRoaXMub2xkVGltZSkvMWUzLHRoaXMub2xkVGltZT1lLHRoaXMuZWxhcHNlZFRpbWUrPXR9cmV0dXJuIHR9fWZ1bmN0aW9uIGVkKCl7cmV0dXJuKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBwZXJmb3JtYW5jZT9EYXRlOnBlcmZvcm1hbmNlKS5ub3coKX1jb25zdCBuZD1uZXcgS24scmQ9bmV3IEpuLGlkPW5ldyBLbixvZD1uZXcgS247Y2xhc3MgYWQgZXh0ZW5kcyBKcntjb25zdHJ1Y3Rvcigpe3N1cGVyKCksdGhpcy50eXBlPVwiQXVkaW9MaXN0ZW5lclwiLHRoaXMuY29udGV4dD1xaC5nZXRDb250ZXh0KCksdGhpcy5nYWluPXRoaXMuY29udGV4dC5jcmVhdGVHYWluKCksdGhpcy5nYWluLmNvbm5lY3QodGhpcy5jb250ZXh0LmRlc3RpbmF0aW9uKSx0aGlzLmZpbHRlcj1udWxsLHRoaXMudGltZURlbHRhPTAsdGhpcy5fY2xvY2s9bmV3IHRkfWdldElucHV0KCl7cmV0dXJuIHRoaXMuZ2Fpbn1yZW1vdmVGaWx0ZXIoKXtyZXR1cm4gbnVsbCE9PXRoaXMuZmlsdGVyJiYodGhpcy5nYWluLmRpc2Nvbm5lY3QodGhpcy5maWx0ZXIpLHRoaXMuZmlsdGVyLmRpc2Nvbm5lY3QodGhpcy5jb250ZXh0LmRlc3RpbmF0aW9uKSx0aGlzLmdhaW4uY29ubmVjdCh0aGlzLmNvbnRleHQuZGVzdGluYXRpb24pLHRoaXMuZmlsdGVyPW51bGwpLHRoaXN9Z2V0RmlsdGVyKCl7cmV0dXJuIHRoaXMuZmlsdGVyfXNldEZpbHRlcih0KXtyZXR1cm4gbnVsbCE9PXRoaXMuZmlsdGVyPyh0aGlzLmdhaW4uZGlzY29ubmVjdCh0aGlzLmZpbHRlciksdGhpcy5maWx0ZXIuZGlzY29ubmVjdCh0aGlzLmNvbnRleHQuZGVzdGluYXRpb24pKTp0aGlzLmdhaW4uZGlzY29ubmVjdCh0aGlzLmNvbnRleHQuZGVzdGluYXRpb24pLHRoaXMuZmlsdGVyPXQsdGhpcy5nYWluLmNvbm5lY3QodGhpcy5maWx0ZXIpLHRoaXMuZmlsdGVyLmNvbm5lY3QodGhpcy5jb250ZXh0LmRlc3RpbmF0aW9uKSx0aGlzfWdldE1hc3RlclZvbHVtZSgpe3JldHVybiB0aGlzLmdhaW4uZ2Fpbi52YWx1ZX1zZXRNYXN0ZXJWb2x1bWUodCl7cmV0dXJuIHRoaXMuZ2Fpbi5nYWluLnNldFRhcmdldEF0VGltZSh0LHRoaXMuY29udGV4dC5jdXJyZW50VGltZSwuMDEpLHRoaXN9dXBkYXRlTWF0cml4V29ybGQodCl7c3VwZXIudXBkYXRlTWF0cml4V29ybGQodCk7Y29uc3QgZT10aGlzLmNvbnRleHQubGlzdGVuZXIsbj10aGlzLnVwO2lmKHRoaXMudGltZURlbHRhPXRoaXMuX2Nsb2NrLmdldERlbHRhKCksdGhpcy5tYXRyaXhXb3JsZC5kZWNvbXBvc2UobmQscmQsaWQpLG9kLnNldCgwLDAsLTEpLmFwcGx5UXVhdGVybmlvbihyZCksZS5wb3NpdGlvblgpe2NvbnN0IHQ9dGhpcy5jb250ZXh0LmN1cnJlbnRUaW1lK3RoaXMudGltZURlbHRhO2UucG9zaXRpb25YLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKG5kLngsdCksZS5wb3NpdGlvblkubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUobmQueSx0KSxlLnBvc2l0aW9uWi5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZShuZC56LHQpLGUuZm9yd2FyZFgubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUob2QueCx0KSxlLmZvcndhcmRZLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKG9kLnksdCksZS5mb3J3YXJkWi5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZShvZC56LHQpLGUudXBYLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKG4ueCx0KSxlLnVwWS5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZShuLnksdCksZS51cFoubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUobi56LHQpfWVsc2UgZS5zZXRQb3NpdGlvbihuZC54LG5kLnksbmQueiksZS5zZXRPcmllbnRhdGlvbihvZC54LG9kLnksb2QueixuLngsbi55LG4ueil9fWNsYXNzIHNkIGV4dGVuZHMgSnJ7Y29uc3RydWN0b3IodCl7c3VwZXIoKSx0aGlzLnR5cGU9XCJBdWRpb1wiLHRoaXMubGlzdGVuZXI9dCx0aGlzLmNvbnRleHQ9dC5jb250ZXh0LHRoaXMuZ2Fpbj10aGlzLmNvbnRleHQuY3JlYXRlR2FpbigpLHRoaXMuZ2Fpbi5jb25uZWN0KHQuZ2V0SW5wdXQoKSksdGhpcy5hdXRvcGxheT0hMSx0aGlzLmJ1ZmZlcj1udWxsLHRoaXMuZGV0dW5lPTAsdGhpcy5sb29wPSExLHRoaXMubG9vcFN0YXJ0PTAsdGhpcy5sb29wRW5kPTAsdGhpcy5vZmZzZXQ9MCx0aGlzLmR1cmF0aW9uPXZvaWQgMCx0aGlzLnBsYXliYWNrUmF0ZT0xLHRoaXMuaXNQbGF5aW5nPSExLHRoaXMuaGFzUGxheWJhY2tDb250cm9sPSEwLHRoaXMuc291cmNlPW51bGwsdGhpcy5zb3VyY2VUeXBlPVwiZW1wdHlcIix0aGlzLl9zdGFydGVkQXQ9MCx0aGlzLl9wcm9ncmVzcz0wLHRoaXMuX2Nvbm5lY3RlZD0hMSx0aGlzLmZpbHRlcnM9W119Z2V0T3V0cHV0KCl7cmV0dXJuIHRoaXMuZ2Fpbn1zZXROb2RlU291cmNlKHQpe3JldHVybiB0aGlzLmhhc1BsYXliYWNrQ29udHJvbD0hMSx0aGlzLnNvdXJjZVR5cGU9XCJhdWRpb05vZGVcIix0aGlzLnNvdXJjZT10LHRoaXMuY29ubmVjdCgpLHRoaXN9c2V0TWVkaWFFbGVtZW50U291cmNlKHQpe3JldHVybiB0aGlzLmhhc1BsYXliYWNrQ29udHJvbD0hMSx0aGlzLnNvdXJjZVR5cGU9XCJtZWRpYU5vZGVcIix0aGlzLnNvdXJjZT10aGlzLmNvbnRleHQuY3JlYXRlTWVkaWFFbGVtZW50U291cmNlKHQpLHRoaXMuY29ubmVjdCgpLHRoaXN9c2V0TWVkaWFTdHJlYW1Tb3VyY2UodCl7cmV0dXJuIHRoaXMuaGFzUGxheWJhY2tDb250cm9sPSExLHRoaXMuc291cmNlVHlwZT1cIm1lZGlhU3RyZWFtTm9kZVwiLHRoaXMuc291cmNlPXRoaXMuY29udGV4dC5jcmVhdGVNZWRpYVN0cmVhbVNvdXJjZSh0KSx0aGlzLmNvbm5lY3QoKSx0aGlzfXNldEJ1ZmZlcih0KXtyZXR1cm4gdGhpcy5idWZmZXI9dCx0aGlzLnNvdXJjZVR5cGU9XCJidWZmZXJcIix0aGlzLmF1dG9wbGF5JiZ0aGlzLnBsYXkoKSx0aGlzfXBsYXkodD0wKXtpZighMD09PXRoaXMuaXNQbGF5aW5nKXJldHVybiB2b2lkIGNvbnNvbGUud2FybihcIlRIUkVFLkF1ZGlvOiBBdWRpbyBpcyBhbHJlYWR5IHBsYXlpbmcuXCIpO2lmKCExPT09dGhpcy5oYXNQbGF5YmFja0NvbnRyb2wpcmV0dXJuIHZvaWQgY29uc29sZS53YXJuKFwiVEhSRUUuQXVkaW86IHRoaXMgQXVkaW8gaGFzIG5vIHBsYXliYWNrIGNvbnRyb2wuXCIpO3RoaXMuX3N0YXJ0ZWRBdD10aGlzLmNvbnRleHQuY3VycmVudFRpbWUrdDtjb25zdCBlPXRoaXMuY29udGV4dC5jcmVhdGVCdWZmZXJTb3VyY2UoKTtyZXR1cm4gZS5idWZmZXI9dGhpcy5idWZmZXIsZS5sb29wPXRoaXMubG9vcCxlLmxvb3BTdGFydD10aGlzLmxvb3BTdGFydCxlLmxvb3BFbmQ9dGhpcy5sb29wRW5kLGUub25lbmRlZD10aGlzLm9uRW5kZWQuYmluZCh0aGlzKSxlLnN0YXJ0KHRoaXMuX3N0YXJ0ZWRBdCx0aGlzLl9wcm9ncmVzcyt0aGlzLm9mZnNldCx0aGlzLmR1cmF0aW9uKSx0aGlzLmlzUGxheWluZz0hMCx0aGlzLnNvdXJjZT1lLHRoaXMuc2V0RGV0dW5lKHRoaXMuZGV0dW5lKSx0aGlzLnNldFBsYXliYWNrUmF0ZSh0aGlzLnBsYXliYWNrUmF0ZSksdGhpcy5jb25uZWN0KCl9cGF1c2UoKXtpZighMSE9PXRoaXMuaGFzUGxheWJhY2tDb250cm9sKXJldHVybiEwPT09dGhpcy5pc1BsYXlpbmcmJih0aGlzLl9wcm9ncmVzcys9TWF0aC5tYXgodGhpcy5jb250ZXh0LmN1cnJlbnRUaW1lLXRoaXMuX3N0YXJ0ZWRBdCwwKSp0aGlzLnBsYXliYWNrUmF0ZSwhMD09PXRoaXMubG9vcCYmKHRoaXMuX3Byb2dyZXNzPXRoaXMuX3Byb2dyZXNzJSh0aGlzLmR1cmF0aW9ufHx0aGlzLmJ1ZmZlci5kdXJhdGlvbikpLHRoaXMuc291cmNlLnN0b3AoKSx0aGlzLnNvdXJjZS5vbmVuZGVkPW51bGwsdGhpcy5pc1BsYXlpbmc9ITEpLHRoaXM7Y29uc29sZS53YXJuKFwiVEhSRUUuQXVkaW86IHRoaXMgQXVkaW8gaGFzIG5vIHBsYXliYWNrIGNvbnRyb2wuXCIpfXN0b3AoKXtpZighMSE9PXRoaXMuaGFzUGxheWJhY2tDb250cm9sKXJldHVybiB0aGlzLl9wcm9ncmVzcz0wLHRoaXMuc291cmNlLnN0b3AoKSx0aGlzLnNvdXJjZS5vbmVuZGVkPW51bGwsdGhpcy5pc1BsYXlpbmc9ITEsdGhpcztjb25zb2xlLndhcm4oXCJUSFJFRS5BdWRpbzogdGhpcyBBdWRpbyBoYXMgbm8gcGxheWJhY2sgY29udHJvbC5cIil9Y29ubmVjdCgpe2lmKHRoaXMuZmlsdGVycy5sZW5ndGg+MCl7dGhpcy5zb3VyY2UuY29ubmVjdCh0aGlzLmZpbHRlcnNbMF0pO2ZvcihsZXQgdD0xLGU9dGhpcy5maWx0ZXJzLmxlbmd0aDt0PGU7dCsrKXRoaXMuZmlsdGVyc1t0LTFdLmNvbm5lY3QodGhpcy5maWx0ZXJzW3RdKTt0aGlzLmZpbHRlcnNbdGhpcy5maWx0ZXJzLmxlbmd0aC0xXS5jb25uZWN0KHRoaXMuZ2V0T3V0cHV0KCkpfWVsc2UgdGhpcy5zb3VyY2UuY29ubmVjdCh0aGlzLmdldE91dHB1dCgpKTtyZXR1cm4gdGhpcy5fY29ubmVjdGVkPSEwLHRoaXN9ZGlzY29ubmVjdCgpe2lmKHRoaXMuZmlsdGVycy5sZW5ndGg+MCl7dGhpcy5zb3VyY2UuZGlzY29ubmVjdCh0aGlzLmZpbHRlcnNbMF0pO2ZvcihsZXQgdD0xLGU9dGhpcy5maWx0ZXJzLmxlbmd0aDt0PGU7dCsrKXRoaXMuZmlsdGVyc1t0LTFdLmRpc2Nvbm5lY3QodGhpcy5maWx0ZXJzW3RdKTt0aGlzLmZpbHRlcnNbdGhpcy5maWx0ZXJzLmxlbmd0aC0xXS5kaXNjb25uZWN0KHRoaXMuZ2V0T3V0cHV0KCkpfWVsc2UgdGhpcy5zb3VyY2UuZGlzY29ubmVjdCh0aGlzLmdldE91dHB1dCgpKTtyZXR1cm4gdGhpcy5fY29ubmVjdGVkPSExLHRoaXN9Z2V0RmlsdGVycygpe3JldHVybiB0aGlzLmZpbHRlcnN9c2V0RmlsdGVycyh0KXtyZXR1cm4gdHx8KHQ9W10pLCEwPT09dGhpcy5fY29ubmVjdGVkPyh0aGlzLmRpc2Nvbm5lY3QoKSx0aGlzLmZpbHRlcnM9dC5zbGljZSgpLHRoaXMuY29ubmVjdCgpKTp0aGlzLmZpbHRlcnM9dC5zbGljZSgpLHRoaXN9c2V0RGV0dW5lKHQpe2lmKHRoaXMuZGV0dW5lPXQsdm9pZCAwIT09dGhpcy5zb3VyY2UuZGV0dW5lKXJldHVybiEwPT09dGhpcy5pc1BsYXlpbmcmJnRoaXMuc291cmNlLmRldHVuZS5zZXRUYXJnZXRBdFRpbWUodGhpcy5kZXR1bmUsdGhpcy5jb250ZXh0LmN1cnJlbnRUaW1lLC4wMSksdGhpc31nZXREZXR1bmUoKXtyZXR1cm4gdGhpcy5kZXR1bmV9Z2V0RmlsdGVyKCl7cmV0dXJuIHRoaXMuZ2V0RmlsdGVycygpWzBdfXNldEZpbHRlcih0KXtyZXR1cm4gdGhpcy5zZXRGaWx0ZXJzKHQ/W3RdOltdKX1zZXRQbGF5YmFja1JhdGUodCl7aWYoITEhPT10aGlzLmhhc1BsYXliYWNrQ29udHJvbClyZXR1cm4gdGhpcy5wbGF5YmFja1JhdGU9dCwhMD09PXRoaXMuaXNQbGF5aW5nJiZ0aGlzLnNvdXJjZS5wbGF5YmFja1JhdGUuc2V0VGFyZ2V0QXRUaW1lKHRoaXMucGxheWJhY2tSYXRlLHRoaXMuY29udGV4dC5jdXJyZW50VGltZSwuMDEpLHRoaXM7Y29uc29sZS53YXJuKFwiVEhSRUUuQXVkaW86IHRoaXMgQXVkaW8gaGFzIG5vIHBsYXliYWNrIGNvbnRyb2wuXCIpfWdldFBsYXliYWNrUmF0ZSgpe3JldHVybiB0aGlzLnBsYXliYWNrUmF0ZX1vbkVuZGVkKCl7dGhpcy5pc1BsYXlpbmc9ITF9Z2V0TG9vcCgpe3JldHVybiExPT09dGhpcy5oYXNQbGF5YmFja0NvbnRyb2w/KGNvbnNvbGUud2FybihcIlRIUkVFLkF1ZGlvOiB0aGlzIEF1ZGlvIGhhcyBubyBwbGF5YmFjayBjb250cm9sLlwiKSwhMSk6dGhpcy5sb29wfXNldExvb3AodCl7aWYoITEhPT10aGlzLmhhc1BsYXliYWNrQ29udHJvbClyZXR1cm4gdGhpcy5sb29wPXQsITA9PT10aGlzLmlzUGxheWluZyYmKHRoaXMuc291cmNlLmxvb3A9dGhpcy5sb29wKSx0aGlzO2NvbnNvbGUud2FybihcIlRIUkVFLkF1ZGlvOiB0aGlzIEF1ZGlvIGhhcyBubyBwbGF5YmFjayBjb250cm9sLlwiKX1zZXRMb29wU3RhcnQodCl7cmV0dXJuIHRoaXMubG9vcFN0YXJ0PXQsdGhpc31zZXRMb29wRW5kKHQpe3JldHVybiB0aGlzLmxvb3BFbmQ9dCx0aGlzfWdldFZvbHVtZSgpe3JldHVybiB0aGlzLmdhaW4uZ2Fpbi52YWx1ZX1zZXRWb2x1bWUodCl7cmV0dXJuIHRoaXMuZ2Fpbi5nYWluLnNldFRhcmdldEF0VGltZSh0LHRoaXMuY29udGV4dC5jdXJyZW50VGltZSwuMDEpLHRoaXN9fWNvbnN0IGNkPW5ldyBLbixsZD1uZXcgSm4sdWQ9bmV3IEtuLGhkPW5ldyBLbjtjbGFzcyBkZCBleHRlbmRzIHNke2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpLHRoaXMucGFubmVyPXRoaXMuY29udGV4dC5jcmVhdGVQYW5uZXIoKSx0aGlzLnBhbm5lci5wYW5uaW5nTW9kZWw9XCJIUlRGXCIsdGhpcy5wYW5uZXIuY29ubmVjdCh0aGlzLmdhaW4pfWdldE91dHB1dCgpe3JldHVybiB0aGlzLnBhbm5lcn1nZXRSZWZEaXN0YW5jZSgpe3JldHVybiB0aGlzLnBhbm5lci5yZWZEaXN0YW5jZX1zZXRSZWZEaXN0YW5jZSh0KXtyZXR1cm4gdGhpcy5wYW5uZXIucmVmRGlzdGFuY2U9dCx0aGlzfWdldFJvbGxvZmZGYWN0b3IoKXtyZXR1cm4gdGhpcy5wYW5uZXIucm9sbG9mZkZhY3Rvcn1zZXRSb2xsb2ZmRmFjdG9yKHQpe3JldHVybiB0aGlzLnBhbm5lci5yb2xsb2ZmRmFjdG9yPXQsdGhpc31nZXREaXN0YW5jZU1vZGVsKCl7cmV0dXJuIHRoaXMucGFubmVyLmRpc3RhbmNlTW9kZWx9c2V0RGlzdGFuY2VNb2RlbCh0KXtyZXR1cm4gdGhpcy5wYW5uZXIuZGlzdGFuY2VNb2RlbD10LHRoaXN9Z2V0TWF4RGlzdGFuY2UoKXtyZXR1cm4gdGhpcy5wYW5uZXIubWF4RGlzdGFuY2V9c2V0TWF4RGlzdGFuY2UodCl7cmV0dXJuIHRoaXMucGFubmVyLm1heERpc3RhbmNlPXQsdGhpc31zZXREaXJlY3Rpb25hbENvbmUodCxlLG4pe3JldHVybiB0aGlzLnBhbm5lci5jb25lSW5uZXJBbmdsZT10LHRoaXMucGFubmVyLmNvbmVPdXRlckFuZ2xlPWUsdGhpcy5wYW5uZXIuY29uZU91dGVyR2Fpbj1uLHRoaXN9dXBkYXRlTWF0cml4V29ybGQodCl7aWYoc3VwZXIudXBkYXRlTWF0cml4V29ybGQodCksITA9PT10aGlzLmhhc1BsYXliYWNrQ29udHJvbCYmITE9PT10aGlzLmlzUGxheWluZylyZXR1cm47dGhpcy5tYXRyaXhXb3JsZC5kZWNvbXBvc2UoY2QsbGQsdWQpLGhkLnNldCgwLDAsMSkuYXBwbHlRdWF0ZXJuaW9uKGxkKTtjb25zdCBlPXRoaXMucGFubmVyO2lmKGUucG9zaXRpb25YKXtjb25zdCB0PXRoaXMuY29udGV4dC5jdXJyZW50VGltZSt0aGlzLmxpc3RlbmVyLnRpbWVEZWx0YTtlLnBvc2l0aW9uWC5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZShjZC54LHQpLGUucG9zaXRpb25ZLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKGNkLnksdCksZS5wb3NpdGlvbloubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUoY2Queix0KSxlLm9yaWVudGF0aW9uWC5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZShoZC54LHQpLGUub3JpZW50YXRpb25ZLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKGhkLnksdCksZS5vcmllbnRhdGlvbloubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUoaGQueix0KX1lbHNlIGUuc2V0UG9zaXRpb24oY2QueCxjZC55LGNkLnopLGUuc2V0T3JpZW50YXRpb24oaGQueCxoZC55LGhkLnopfX1jbGFzcyBwZHtjb25zdHJ1Y3Rvcih0LGU9MjA0OCl7dGhpcy5hbmFseXNlcj10LmNvbnRleHQuY3JlYXRlQW5hbHlzZXIoKSx0aGlzLmFuYWx5c2VyLmZmdFNpemU9ZSx0aGlzLmRhdGE9bmV3IFVpbnQ4QXJyYXkodGhpcy5hbmFseXNlci5mcmVxdWVuY3lCaW5Db3VudCksdC5nZXRPdXRwdXQoKS5jb25uZWN0KHRoaXMuYW5hbHlzZXIpfWdldEZyZXF1ZW5jeURhdGEoKXtyZXR1cm4gdGhpcy5hbmFseXNlci5nZXRCeXRlRnJlcXVlbmN5RGF0YSh0aGlzLmRhdGEpLHRoaXMuZGF0YX1nZXRBdmVyYWdlRnJlcXVlbmN5KCl7bGV0IHQ9MDtjb25zdCBlPXRoaXMuZ2V0RnJlcXVlbmN5RGF0YSgpO2ZvcihsZXQgbj0wO248ZS5sZW5ndGg7bisrKXQrPWVbbl07cmV0dXJuIHQvZS5sZW5ndGh9fWZ1bmN0aW9uIGZkKHQsZSxuKXtsZXQgcixpLG87c3dpdGNoKHRoaXMuYmluZGluZz10LHRoaXMudmFsdWVTaXplPW4sZSl7Y2FzZVwicXVhdGVybmlvblwiOnI9dGhpcy5fc2xlcnAsaT10aGlzLl9zbGVycEFkZGl0aXZlLG89dGhpcy5fc2V0QWRkaXRpdmVJZGVudGl0eVF1YXRlcm5pb24sdGhpcy5idWZmZXI9bmV3IEZsb2F0NjRBcnJheSg2Km4pLHRoaXMuX3dvcmtJbmRleD01O2JyZWFrO2Nhc2VcInN0cmluZ1wiOmNhc2VcImJvb2xcIjpyPXRoaXMuX3NlbGVjdCxpPXRoaXMuX3NlbGVjdCxvPXRoaXMuX3NldEFkZGl0aXZlSWRlbnRpdHlPdGhlcix0aGlzLmJ1ZmZlcj1uZXcgQXJyYXkoNSpuKTticmVhaztkZWZhdWx0OnI9dGhpcy5fbGVycCxpPXRoaXMuX2xlcnBBZGRpdGl2ZSxvPXRoaXMuX3NldEFkZGl0aXZlSWRlbnRpdHlOdW1lcmljLHRoaXMuYnVmZmVyPW5ldyBGbG9hdDY0QXJyYXkoNSpuKX10aGlzLl9taXhCdWZmZXJSZWdpb249cix0aGlzLl9taXhCdWZmZXJSZWdpb25BZGRpdGl2ZT1pLHRoaXMuX3NldElkZW50aXR5PW8sdGhpcy5fb3JpZ0luZGV4PTMsdGhpcy5fYWRkSW5kZXg9NCx0aGlzLmN1bXVsYXRpdmVXZWlnaHQ9MCx0aGlzLmN1bXVsYXRpdmVXZWlnaHRBZGRpdGl2ZT0wLHRoaXMudXNlQ291bnQ9MCx0aGlzLnJlZmVyZW5jZUNvdW50PTB9T2JqZWN0LmFzc2lnbihmZC5wcm90b3R5cGUse2FjY3VtdWxhdGU6ZnVuY3Rpb24odCxlKXtjb25zdCBuPXRoaXMuYnVmZmVyLHI9dGhpcy52YWx1ZVNpemUsaT10KnIrcjtsZXQgbz10aGlzLmN1bXVsYXRpdmVXZWlnaHQ7aWYoMD09PW8pe2ZvcihsZXQgdD0wO3QhPT1yOysrdCluW2krdF09blt0XTtvPWV9ZWxzZXtvKz1lO2NvbnN0IHQ9ZS9vO3RoaXMuX21peEJ1ZmZlclJlZ2lvbihuLGksMCx0LHIpfXRoaXMuY3VtdWxhdGl2ZVdlaWdodD1vfSxhY2N1bXVsYXRlQWRkaXRpdmU6ZnVuY3Rpb24odCl7Y29uc3QgZT10aGlzLmJ1ZmZlcixuPXRoaXMudmFsdWVTaXplLHI9bip0aGlzLl9hZGRJbmRleDswPT09dGhpcy5jdW11bGF0aXZlV2VpZ2h0QWRkaXRpdmUmJnRoaXMuX3NldElkZW50aXR5KCksdGhpcy5fbWl4QnVmZmVyUmVnaW9uQWRkaXRpdmUoZSxyLDAsdCxuKSx0aGlzLmN1bXVsYXRpdmVXZWlnaHRBZGRpdGl2ZSs9dH0sYXBwbHk6ZnVuY3Rpb24odCl7Y29uc3QgZT10aGlzLnZhbHVlU2l6ZSxuPXRoaXMuYnVmZmVyLHI9dCplK2UsaT10aGlzLmN1bXVsYXRpdmVXZWlnaHQsbz10aGlzLmN1bXVsYXRpdmVXZWlnaHRBZGRpdGl2ZSxhPXRoaXMuYmluZGluZztpZih0aGlzLmN1bXVsYXRpdmVXZWlnaHQ9MCx0aGlzLmN1bXVsYXRpdmVXZWlnaHRBZGRpdGl2ZT0wLGk8MSl7Y29uc3QgdD1lKnRoaXMuX29yaWdJbmRleDt0aGlzLl9taXhCdWZmZXJSZWdpb24obixyLHQsMS1pLGUpfW8+MCYmdGhpcy5fbWl4QnVmZmVyUmVnaW9uQWRkaXRpdmUobixyLHRoaXMuX2FkZEluZGV4KmUsMSxlKTtmb3IobGV0IHQ9ZSxpPWUrZTt0IT09aTsrK3QpaWYoblt0XSE9PW5bdCtlXSl7YS5zZXRWYWx1ZShuLHIpO2JyZWFrfX0sc2F2ZU9yaWdpbmFsU3RhdGU6ZnVuY3Rpb24oKXtjb25zdCB0PXRoaXMuYmluZGluZyxlPXRoaXMuYnVmZmVyLG49dGhpcy52YWx1ZVNpemUscj1uKnRoaXMuX29yaWdJbmRleDt0LmdldFZhbHVlKGUscik7Zm9yKGxldCB0PW4saT1yO3QhPT1pOysrdCllW3RdPWVbcit0JW5dO3RoaXMuX3NldElkZW50aXR5KCksdGhpcy5jdW11bGF0aXZlV2VpZ2h0PTAsdGhpcy5jdW11bGF0aXZlV2VpZ2h0QWRkaXRpdmU9MH0scmVzdG9yZU9yaWdpbmFsU3RhdGU6ZnVuY3Rpb24oKXtjb25zdCB0PTMqdGhpcy52YWx1ZVNpemU7dGhpcy5iaW5kaW5nLnNldFZhbHVlKHRoaXMuYnVmZmVyLHQpfSxfc2V0QWRkaXRpdmVJZGVudGl0eU51bWVyaWM6ZnVuY3Rpb24oKXtjb25zdCB0PXRoaXMuX2FkZEluZGV4KnRoaXMudmFsdWVTaXplLGU9dCt0aGlzLnZhbHVlU2l6ZTtmb3IobGV0IG49dDtuPGU7bisrKXRoaXMuYnVmZmVyW25dPTB9LF9zZXRBZGRpdGl2ZUlkZW50aXR5UXVhdGVybmlvbjpmdW5jdGlvbigpe3RoaXMuX3NldEFkZGl0aXZlSWRlbnRpdHlOdW1lcmljKCksdGhpcy5idWZmZXJbdGhpcy5fYWRkSW5kZXgqdGhpcy52YWx1ZVNpemUrM109MX0sX3NldEFkZGl0aXZlSWRlbnRpdHlPdGhlcjpmdW5jdGlvbigpe2NvbnN0IHQ9dGhpcy5fb3JpZ0luZGV4KnRoaXMudmFsdWVTaXplLGU9dGhpcy5fYWRkSW5kZXgqdGhpcy52YWx1ZVNpemU7Zm9yKGxldCBuPTA7bjx0aGlzLnZhbHVlU2l6ZTtuKyspdGhpcy5idWZmZXJbZStuXT10aGlzLmJ1ZmZlclt0K25dfSxfc2VsZWN0OmZ1bmN0aW9uKHQsZSxuLHIsaSl7aWYocj49LjUpZm9yKGxldCByPTA7ciE9PWk7KytyKXRbZStyXT10W24rcl19LF9zbGVycDpmdW5jdGlvbih0LGUsbixyKXtKbi5zbGVycEZsYXQodCxlLHQsZSx0LG4scil9LF9zbGVycEFkZGl0aXZlOmZ1bmN0aW9uKHQsZSxuLHIsaSl7Y29uc3Qgbz10aGlzLl93b3JrSW5kZXgqaTtKbi5tdWx0aXBseVF1YXRlcm5pb25zRmxhdCh0LG8sdCxlLHQsbiksSm4uc2xlcnBGbGF0KHQsZSx0LGUsdCxvLHIpfSxfbGVycDpmdW5jdGlvbih0LGUsbixyLGkpe2NvbnN0IG89MS1yO2ZvcihsZXQgYT0wO2EhPT1pOysrYSl7Y29uc3QgaT1lK2E7dFtpXT10W2ldKm8rdFtuK2FdKnJ9fSxfbGVycEFkZGl0aXZlOmZ1bmN0aW9uKHQsZSxuLHIsaSl7Zm9yKGxldCBvPTA7byE9PWk7KytvKXtjb25zdCBpPWUrbzt0W2ldPXRbaV0rdFtuK29dKnJ9fX0pO2NvbnN0IG1kPW5ldyBSZWdFeHAoXCJbXFxcXFtcXFxcXVxcXFwuOlxcXFwvXVwiLFwiZ1wiKSxnZD1cIlteXCIrXCJcXFxcW1xcXFxdXFxcXC46XFxcXC9cIi5yZXBsYWNlKFwiXFxcXC5cIixcIlwiKStcIl1cIix2ZD0vKCg/OldDK1tcXC86XSkqKS8uc291cmNlLnJlcGxhY2UoXCJXQ1wiLFwiW15cXFxcW1xcXFxdXFxcXC46XFxcXC9dXCIpLHlkPS8oV0NPRCspPy8uc291cmNlLnJlcGxhY2UoXCJXQ09EXCIsZ2QpLHhkPS8oPzpcXC4oV0MrKSg/OlxcWyguKylcXF0pPyk/Ly5zb3VyY2UucmVwbGFjZShcIldDXCIsXCJbXlxcXFxbXFxcXF1cXFxcLjpcXFxcL11cIiksYmQ9L1xcLihXQyspKD86XFxbKC4rKVxcXSk/Ly5zb3VyY2UucmVwbGFjZShcIldDXCIsXCJbXlxcXFxbXFxcXF1cXFxcLjpcXFxcL11cIiksd2Q9bmV3IFJlZ0V4cChcIl5cIit2ZCt5ZCt4ZCtiZCtcIiRcIiksX2Q9W1wibWF0ZXJpYWxcIixcIm1hdGVyaWFsc1wiLFwiYm9uZXNcIl07ZnVuY3Rpb24gTWQodCxlLG4pe2NvbnN0IHI9bnx8U2QucGFyc2VUcmFja05hbWUoZSk7dGhpcy5fdGFyZ2V0R3JvdXA9dCx0aGlzLl9iaW5kaW5ncz10LnN1YnNjcmliZV8oZSxyKX1mdW5jdGlvbiBTZCh0LGUsbil7dGhpcy5wYXRoPWUsdGhpcy5wYXJzZWRQYXRoPW58fFNkLnBhcnNlVHJhY2tOYW1lKGUpLHRoaXMubm9kZT1TZC5maW5kTm9kZSh0LHRoaXMucGFyc2VkUGF0aC5ub2RlTmFtZSl8fHQsdGhpcy5yb290Tm9kZT10fWZ1bmN0aW9uIFRkKCl7dGhpcy51dWlkPXpuLmdlbmVyYXRlVVVJRCgpLHRoaXMuX29iamVjdHM9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKSx0aGlzLm5DYWNoZWRPYmplY3RzXz0wO2NvbnN0IHQ9e307dGhpcy5faW5kaWNlc0J5VVVJRD10O2ZvcihsZXQgZT0wLG49YXJndW1lbnRzLmxlbmd0aDtlIT09bjsrK2UpdFthcmd1bWVudHNbZV0udXVpZF09ZTt0aGlzLl9wYXRocz1bXSx0aGlzLl9wYXJzZWRQYXRocz1bXSx0aGlzLl9iaW5kaW5ncz1bXSx0aGlzLl9iaW5kaW5nc0luZGljZXNCeVBhdGg9e307Y29uc3QgZT10aGlzO3RoaXMuc3RhdHM9e29iamVjdHM6e2dldCB0b3RhbCgpe3JldHVybiBlLl9vYmplY3RzLmxlbmd0aH0sZ2V0IGluVXNlKCl7cmV0dXJuIHRoaXMudG90YWwtZS5uQ2FjaGVkT2JqZWN0c199fSxnZXQgYmluZGluZ3NQZXJPYmplY3QoKXtyZXR1cm4gZS5fYmluZGluZ3MubGVuZ3RofX19T2JqZWN0LmFzc2lnbihNZC5wcm90b3R5cGUse2dldFZhbHVlOmZ1bmN0aW9uKHQsZSl7dGhpcy5iaW5kKCk7Y29uc3Qgbj10aGlzLl90YXJnZXRHcm91cC5uQ2FjaGVkT2JqZWN0c18scj10aGlzLl9iaW5kaW5nc1tuXTt2b2lkIDAhPT1yJiZyLmdldFZhbHVlKHQsZSl9LHNldFZhbHVlOmZ1bmN0aW9uKHQsZSl7Y29uc3Qgbj10aGlzLl9iaW5kaW5ncztmb3IobGV0IHI9dGhpcy5fdGFyZ2V0R3JvdXAubkNhY2hlZE9iamVjdHNfLGk9bi5sZW5ndGg7ciE9PWk7KytyKW5bcl0uc2V0VmFsdWUodCxlKX0sYmluZDpmdW5jdGlvbigpe2NvbnN0IHQ9dGhpcy5fYmluZGluZ3M7Zm9yKGxldCBlPXRoaXMuX3RhcmdldEdyb3VwLm5DYWNoZWRPYmplY3RzXyxuPXQubGVuZ3RoO2UhPT1uOysrZSl0W2VdLmJpbmQoKX0sdW5iaW5kOmZ1bmN0aW9uKCl7Y29uc3QgdD10aGlzLl9iaW5kaW5ncztmb3IobGV0IGU9dGhpcy5fdGFyZ2V0R3JvdXAubkNhY2hlZE9iamVjdHNfLG49dC5sZW5ndGg7ZSE9PW47KytlKXRbZV0udW5iaW5kKCl9fSksT2JqZWN0LmFzc2lnbihTZCx7Q29tcG9zaXRlOk1kLGNyZWF0ZTpmdW5jdGlvbih0LGUsbil7cmV0dXJuIHQmJnQuaXNBbmltYXRpb25PYmplY3RHcm91cD9uZXcgU2QuQ29tcG9zaXRlKHQsZSxuKTpuZXcgU2QodCxlLG4pfSxzYW5pdGl6ZU5vZGVOYW1lOmZ1bmN0aW9uKHQpe3JldHVybiB0LnJlcGxhY2UoL1xccy9nLFwiX1wiKS5yZXBsYWNlKG1kLFwiXCIpfSxwYXJzZVRyYWNrTmFtZTpmdW5jdGlvbih0KXtjb25zdCBlPXdkLmV4ZWModCk7aWYoIWUpdGhyb3cgbmV3IEVycm9yKFwiUHJvcGVydHlCaW5kaW5nOiBDYW5ub3QgcGFyc2UgdHJhY2tOYW1lOiBcIit0KTtjb25zdCBuPXtub2RlTmFtZTplWzJdLG9iamVjdE5hbWU6ZVszXSxvYmplY3RJbmRleDplWzRdLHByb3BlcnR5TmFtZTplWzVdLHByb3BlcnR5SW5kZXg6ZVs2XX0scj1uLm5vZGVOYW1lJiZuLm5vZGVOYW1lLmxhc3RJbmRleE9mKFwiLlwiKTtpZih2b2lkIDAhPT1yJiYtMSE9PXIpe2NvbnN0IHQ9bi5ub2RlTmFtZS5zdWJzdHJpbmcocisxKTstMSE9PV9kLmluZGV4T2YodCkmJihuLm5vZGVOYW1lPW4ubm9kZU5hbWUuc3Vic3RyaW5nKDAsciksbi5vYmplY3ROYW1lPXQpfWlmKG51bGw9PT1uLnByb3BlcnR5TmFtZXx8MD09PW4ucHJvcGVydHlOYW1lLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoXCJQcm9wZXJ0eUJpbmRpbmc6IGNhbiBub3QgcGFyc2UgcHJvcGVydHlOYW1lIGZyb20gdHJhY2tOYW1lOiBcIit0KTtyZXR1cm4gbn0sZmluZE5vZGU6ZnVuY3Rpb24odCxlKXtpZighZXx8XCJcIj09PWV8fFwiLlwiPT09ZXx8LTE9PT1lfHxlPT09dC5uYW1lfHxlPT09dC51dWlkKXJldHVybiB0O2lmKHQuc2tlbGV0b24pe2NvbnN0IG49dC5za2VsZXRvbi5nZXRCb25lQnlOYW1lKGUpO2lmKHZvaWQgMCE9PW4pcmV0dXJuIG59aWYodC5jaGlsZHJlbil7Y29uc3Qgbj1mdW5jdGlvbih0KXtmb3IobGV0IHI9MDtyPHQubGVuZ3RoO3IrKyl7Y29uc3QgaT10W3JdO2lmKGkubmFtZT09PWV8fGkudXVpZD09PWUpcmV0dXJuIGk7Y29uc3Qgbz1uKGkuY2hpbGRyZW4pO2lmKG8pcmV0dXJuIG99cmV0dXJuIG51bGx9LHI9bih0LmNoaWxkcmVuKTtpZihyKXJldHVybiByfXJldHVybiBudWxsfX0pLE9iamVjdC5hc3NpZ24oU2QucHJvdG90eXBlLHtfZ2V0VmFsdWVfdW5hdmFpbGFibGU6ZnVuY3Rpb24oKXt9LF9zZXRWYWx1ZV91bmF2YWlsYWJsZTpmdW5jdGlvbigpe30sQmluZGluZ1R5cGU6e0RpcmVjdDowLEVudGlyZUFycmF5OjEsQXJyYXlFbGVtZW50OjIsSGFzRnJvbVRvQXJyYXk6M30sVmVyc2lvbmluZzp7Tm9uZTowLE5lZWRzVXBkYXRlOjEsTWF0cml4V29ybGROZWVkc1VwZGF0ZToyfSxHZXR0ZXJCeUJpbmRpbmdUeXBlOltmdW5jdGlvbih0LGUpe3RbZV09dGhpcy5ub2RlW3RoaXMucHJvcGVydHlOYW1lXX0sZnVuY3Rpb24odCxlKXtjb25zdCBuPXRoaXMucmVzb2x2ZWRQcm9wZXJ0eTtmb3IobGV0IHI9MCxpPW4ubGVuZ3RoO3IhPT1pOysrcil0W2UrK109bltyXX0sZnVuY3Rpb24odCxlKXt0W2VdPXRoaXMucmVzb2x2ZWRQcm9wZXJ0eVt0aGlzLnByb3BlcnR5SW5kZXhdfSxmdW5jdGlvbih0LGUpe3RoaXMucmVzb2x2ZWRQcm9wZXJ0eS50b0FycmF5KHQsZSl9XSxTZXR0ZXJCeUJpbmRpbmdUeXBlQW5kVmVyc2lvbmluZzpbW2Z1bmN0aW9uKHQsZSl7dGhpcy50YXJnZXRPYmplY3RbdGhpcy5wcm9wZXJ0eU5hbWVdPXRbZV19LGZ1bmN0aW9uKHQsZSl7dGhpcy50YXJnZXRPYmplY3RbdGhpcy5wcm9wZXJ0eU5hbWVdPXRbZV0sdGhpcy50YXJnZXRPYmplY3QubmVlZHNVcGRhdGU9ITB9LGZ1bmN0aW9uKHQsZSl7dGhpcy50YXJnZXRPYmplY3RbdGhpcy5wcm9wZXJ0eU5hbWVdPXRbZV0sdGhpcy50YXJnZXRPYmplY3QubWF0cml4V29ybGROZWVkc1VwZGF0ZT0hMH1dLFtmdW5jdGlvbih0LGUpe2NvbnN0IG49dGhpcy5yZXNvbHZlZFByb3BlcnR5O2ZvcihsZXQgcj0wLGk9bi5sZW5ndGg7ciE9PWk7KytyKW5bcl09dFtlKytdfSxmdW5jdGlvbih0LGUpe2NvbnN0IG49dGhpcy5yZXNvbHZlZFByb3BlcnR5O2ZvcihsZXQgcj0wLGk9bi5sZW5ndGg7ciE9PWk7KytyKW5bcl09dFtlKytdO3RoaXMudGFyZ2V0T2JqZWN0Lm5lZWRzVXBkYXRlPSEwfSxmdW5jdGlvbih0LGUpe2NvbnN0IG49dGhpcy5yZXNvbHZlZFByb3BlcnR5O2ZvcihsZXQgcj0wLGk9bi5sZW5ndGg7ciE9PWk7KytyKW5bcl09dFtlKytdO3RoaXMudGFyZ2V0T2JqZWN0Lm1hdHJpeFdvcmxkTmVlZHNVcGRhdGU9ITB9XSxbZnVuY3Rpb24odCxlKXt0aGlzLnJlc29sdmVkUHJvcGVydHlbdGhpcy5wcm9wZXJ0eUluZGV4XT10W2VdfSxmdW5jdGlvbih0LGUpe3RoaXMucmVzb2x2ZWRQcm9wZXJ0eVt0aGlzLnByb3BlcnR5SW5kZXhdPXRbZV0sdGhpcy50YXJnZXRPYmplY3QubmVlZHNVcGRhdGU9ITB9LGZ1bmN0aW9uKHQsZSl7dGhpcy5yZXNvbHZlZFByb3BlcnR5W3RoaXMucHJvcGVydHlJbmRleF09dFtlXSx0aGlzLnRhcmdldE9iamVjdC5tYXRyaXhXb3JsZE5lZWRzVXBkYXRlPSEwfV0sW2Z1bmN0aW9uKHQsZSl7dGhpcy5yZXNvbHZlZFByb3BlcnR5LmZyb21BcnJheSh0LGUpfSxmdW5jdGlvbih0LGUpe3RoaXMucmVzb2x2ZWRQcm9wZXJ0eS5mcm9tQXJyYXkodCxlKSx0aGlzLnRhcmdldE9iamVjdC5uZWVkc1VwZGF0ZT0hMH0sZnVuY3Rpb24odCxlKXt0aGlzLnJlc29sdmVkUHJvcGVydHkuZnJvbUFycmF5KHQsZSksdGhpcy50YXJnZXRPYmplY3QubWF0cml4V29ybGROZWVkc1VwZGF0ZT0hMH1dXSxnZXRWYWx1ZTpmdW5jdGlvbih0LGUpe3RoaXMuYmluZCgpLHRoaXMuZ2V0VmFsdWUodCxlKX0sc2V0VmFsdWU6ZnVuY3Rpb24odCxlKXt0aGlzLmJpbmQoKSx0aGlzLnNldFZhbHVlKHQsZSl9LGJpbmQ6ZnVuY3Rpb24oKXtsZXQgdD10aGlzLm5vZGU7Y29uc3QgZT10aGlzLnBhcnNlZFBhdGgsbj1lLm9iamVjdE5hbWUscj1lLnByb3BlcnR5TmFtZTtsZXQgaT1lLnByb3BlcnR5SW5kZXg7aWYodHx8KHQ9U2QuZmluZE5vZGUodGhpcy5yb290Tm9kZSxlLm5vZGVOYW1lKXx8dGhpcy5yb290Tm9kZSx0aGlzLm5vZGU9dCksdGhpcy5nZXRWYWx1ZT10aGlzLl9nZXRWYWx1ZV91bmF2YWlsYWJsZSx0aGlzLnNldFZhbHVlPXRoaXMuX3NldFZhbHVlX3VuYXZhaWxhYmxlLCF0KXJldHVybiB2b2lkIGNvbnNvbGUuZXJyb3IoXCJUSFJFRS5Qcm9wZXJ0eUJpbmRpbmc6IFRyeWluZyB0byB1cGRhdGUgbm9kZSBmb3IgdHJhY2s6IFwiK3RoaXMucGF0aCtcIiBidXQgaXQgd2Fzbid0IGZvdW5kLlwiKTtpZihuKXtsZXQgcj1lLm9iamVjdEluZGV4O3N3aXRjaChuKXtjYXNlXCJtYXRlcmlhbHNcIjppZighdC5tYXRlcmlhbClyZXR1cm4gdm9pZCBjb25zb2xlLmVycm9yKFwiVEhSRUUuUHJvcGVydHlCaW5kaW5nOiBDYW4gbm90IGJpbmQgdG8gbWF0ZXJpYWwgYXMgbm9kZSBkb2VzIG5vdCBoYXZlIGEgbWF0ZXJpYWwuXCIsdGhpcyk7aWYoIXQubWF0ZXJpYWwubWF0ZXJpYWxzKXJldHVybiB2b2lkIGNvbnNvbGUuZXJyb3IoXCJUSFJFRS5Qcm9wZXJ0eUJpbmRpbmc6IENhbiBub3QgYmluZCB0byBtYXRlcmlhbC5tYXRlcmlhbHMgYXMgbm9kZS5tYXRlcmlhbCBkb2VzIG5vdCBoYXZlIGEgbWF0ZXJpYWxzIGFycmF5LlwiLHRoaXMpO3Q9dC5tYXRlcmlhbC5tYXRlcmlhbHM7YnJlYWs7Y2FzZVwiYm9uZXNcIjppZighdC5za2VsZXRvbilyZXR1cm4gdm9pZCBjb25zb2xlLmVycm9yKFwiVEhSRUUuUHJvcGVydHlCaW5kaW5nOiBDYW4gbm90IGJpbmQgdG8gYm9uZXMgYXMgbm9kZSBkb2VzIG5vdCBoYXZlIGEgc2tlbGV0b24uXCIsdGhpcyk7dD10LnNrZWxldG9uLmJvbmVzO2ZvcihsZXQgZT0wO2U8dC5sZW5ndGg7ZSsrKWlmKHRbZV0ubmFtZT09PXIpe3I9ZTticmVha31icmVhaztkZWZhdWx0OmlmKHZvaWQgMD09PXRbbl0pcmV0dXJuIHZvaWQgY29uc29sZS5lcnJvcihcIlRIUkVFLlByb3BlcnR5QmluZGluZzogQ2FuIG5vdCBiaW5kIHRvIG9iamVjdE5hbWUgb2Ygbm9kZSB1bmRlZmluZWQuXCIsdGhpcyk7dD10W25dfWlmKHZvaWQgMCE9PXIpe2lmKHZvaWQgMD09PXRbcl0pcmV0dXJuIHZvaWQgY29uc29sZS5lcnJvcihcIlRIUkVFLlByb3BlcnR5QmluZGluZzogVHJ5aW5nIHRvIGJpbmQgdG8gb2JqZWN0SW5kZXggb2Ygb2JqZWN0TmFtZSwgYnV0IGlzIHVuZGVmaW5lZC5cIix0aGlzLHQpO3Q9dFtyXX19Y29uc3Qgbz10W3JdO2lmKHZvaWQgMD09PW8pe2NvbnN0IG49ZS5ub2RlTmFtZTtyZXR1cm4gdm9pZCBjb25zb2xlLmVycm9yKFwiVEhSRUUuUHJvcGVydHlCaW5kaW5nOiBUcnlpbmcgdG8gdXBkYXRlIHByb3BlcnR5IGZvciB0cmFjazogXCIrbitcIi5cIityK1wiIGJ1dCBpdCB3YXNuJ3QgZm91bmQuXCIsdCl9bGV0IGE9dGhpcy5WZXJzaW9uaW5nLk5vbmU7dGhpcy50YXJnZXRPYmplY3Q9dCx2b2lkIDAhPT10Lm5lZWRzVXBkYXRlP2E9dGhpcy5WZXJzaW9uaW5nLk5lZWRzVXBkYXRlOnZvaWQgMCE9PXQubWF0cml4V29ybGROZWVkc1VwZGF0ZSYmKGE9dGhpcy5WZXJzaW9uaW5nLk1hdHJpeFdvcmxkTmVlZHNVcGRhdGUpO2xldCBzPXRoaXMuQmluZGluZ1R5cGUuRGlyZWN0O2lmKHZvaWQgMCE9PWkpe2lmKFwibW9ycGhUYXJnZXRJbmZsdWVuY2VzXCI9PT1yKXtpZighdC5nZW9tZXRyeSlyZXR1cm4gdm9pZCBjb25zb2xlLmVycm9yKFwiVEhSRUUuUHJvcGVydHlCaW5kaW5nOiBDYW4gbm90IGJpbmQgdG8gbW9ycGhUYXJnZXRJbmZsdWVuY2VzIGJlY2F1c2Ugbm9kZSBkb2VzIG5vdCBoYXZlIGEgZ2VvbWV0cnkuXCIsdGhpcyk7aWYoIXQuZ2VvbWV0cnkuaXNCdWZmZXJHZW9tZXRyeSlyZXR1cm4gdm9pZCBjb25zb2xlLmVycm9yKFwiVEhSRUUuUHJvcGVydHlCaW5kaW5nOiBDYW4gbm90IGJpbmQgdG8gbW9ycGhUYXJnZXRJbmZsdWVuY2VzIG9uIFRIUkVFLkdlb21ldHJ5LiBVc2UgVEhSRUUuQnVmZmVyR2VvbWV0cnkgaW5zdGVhZC5cIix0aGlzKTtpZighdC5nZW9tZXRyeS5tb3JwaEF0dHJpYnV0ZXMpcmV0dXJuIHZvaWQgY29uc29sZS5lcnJvcihcIlRIUkVFLlByb3BlcnR5QmluZGluZzogQ2FuIG5vdCBiaW5kIHRvIG1vcnBoVGFyZ2V0SW5mbHVlbmNlcyBiZWNhdXNlIG5vZGUgZG9lcyBub3QgaGF2ZSBhIGdlb21ldHJ5Lm1vcnBoQXR0cmlidXRlcy5cIix0aGlzKTt2b2lkIDAhPT10Lm1vcnBoVGFyZ2V0RGljdGlvbmFyeVtpXSYmKGk9dC5tb3JwaFRhcmdldERpY3Rpb25hcnlbaV0pfXM9dGhpcy5CaW5kaW5nVHlwZS5BcnJheUVsZW1lbnQsdGhpcy5yZXNvbHZlZFByb3BlcnR5PW8sdGhpcy5wcm9wZXJ0eUluZGV4PWl9ZWxzZSB2b2lkIDAhPT1vLmZyb21BcnJheSYmdm9pZCAwIT09by50b0FycmF5PyhzPXRoaXMuQmluZGluZ1R5cGUuSGFzRnJvbVRvQXJyYXksdGhpcy5yZXNvbHZlZFByb3BlcnR5PW8pOkFycmF5LmlzQXJyYXkobyk/KHM9dGhpcy5CaW5kaW5nVHlwZS5FbnRpcmVBcnJheSx0aGlzLnJlc29sdmVkUHJvcGVydHk9byk6dGhpcy5wcm9wZXJ0eU5hbWU9cjt0aGlzLmdldFZhbHVlPXRoaXMuR2V0dGVyQnlCaW5kaW5nVHlwZVtzXSx0aGlzLnNldFZhbHVlPXRoaXMuU2V0dGVyQnlCaW5kaW5nVHlwZUFuZFZlcnNpb25pbmdbc11bYV19LHVuYmluZDpmdW5jdGlvbigpe3RoaXMubm9kZT1udWxsLHRoaXMuZ2V0VmFsdWU9dGhpcy5fZ2V0VmFsdWVfdW5ib3VuZCx0aGlzLnNldFZhbHVlPXRoaXMuX3NldFZhbHVlX3VuYm91bmR9fSksT2JqZWN0LmFzc2lnbihTZC5wcm90b3R5cGUse19nZXRWYWx1ZV91bmJvdW5kOlNkLnByb3RvdHlwZS5nZXRWYWx1ZSxfc2V0VmFsdWVfdW5ib3VuZDpTZC5wcm90b3R5cGUuc2V0VmFsdWV9KSxPYmplY3QuYXNzaWduKFRkLnByb3RvdHlwZSx7aXNBbmltYXRpb25PYmplY3RHcm91cDohMCxhZGQ6ZnVuY3Rpb24oKXtjb25zdCB0PXRoaXMuX29iamVjdHMsZT10aGlzLl9pbmRpY2VzQnlVVUlELG49dGhpcy5fcGF0aHMscj10aGlzLl9wYXJzZWRQYXRocyxpPXRoaXMuX2JpbmRpbmdzLG89aS5sZW5ndGg7bGV0IGE9dm9pZCAwLHM9dC5sZW5ndGgsYz10aGlzLm5DYWNoZWRPYmplY3RzXztmb3IobGV0IGw9MCx1PWFyZ3VtZW50cy5sZW5ndGg7bCE9PXU7KytsKXtjb25zdCB1PWFyZ3VtZW50c1tsXSxoPXUudXVpZDtsZXQgZD1lW2hdO2lmKHZvaWQgMD09PWQpe2Q9cysrLGVbaF09ZCx0LnB1c2godSk7Zm9yKGxldCB0PTAsZT1vO3QhPT1lOysrdClpW3RdLnB1c2gobmV3IFNkKHUsblt0XSxyW3RdKSl9ZWxzZSBpZihkPGMpe2E9dFtkXTtjb25zdCBzPS0tYyxsPXRbc107ZVtsLnV1aWRdPWQsdFtkXT1sLGVbaF09cyx0W3NdPXU7Zm9yKGxldCB0PTAsZT1vO3QhPT1lOysrdCl7Y29uc3QgZT1pW3RdLG89ZVtzXTtsZXQgYT1lW2RdO2VbZF09byx2b2lkIDA9PT1hJiYoYT1uZXcgU2QodSxuW3RdLHJbdF0pKSxlW3NdPWF9fWVsc2UgdFtkXSE9PWEmJmNvbnNvbGUuZXJyb3IoXCJUSFJFRS5BbmltYXRpb25PYmplY3RHcm91cDogRGlmZmVyZW50IG9iamVjdHMgd2l0aCB0aGUgc2FtZSBVVUlEIGRldGVjdGVkLiBDbGVhbiB0aGUgY2FjaGVzIG9yIHJlY3JlYXRlIHlvdXIgaW5mcmFzdHJ1Y3R1cmUgd2hlbiByZWxvYWRpbmcgc2NlbmVzLlwiKX10aGlzLm5DYWNoZWRPYmplY3RzXz1jfSxyZW1vdmU6ZnVuY3Rpb24oKXtjb25zdCB0PXRoaXMuX29iamVjdHMsZT10aGlzLl9pbmRpY2VzQnlVVUlELG49dGhpcy5fYmluZGluZ3Mscj1uLmxlbmd0aDtsZXQgaT10aGlzLm5DYWNoZWRPYmplY3RzXztmb3IobGV0IG89MCxhPWFyZ3VtZW50cy5sZW5ndGg7byE9PWE7KytvKXtjb25zdCBhPWFyZ3VtZW50c1tvXSxzPWEudXVpZCxjPWVbc107aWYodm9pZCAwIT09YyYmYz49aSl7Y29uc3Qgbz1pKyssbD10W29dO2VbbC51dWlkXT1jLHRbY109bCxlW3NdPW8sdFtvXT1hO2ZvcihsZXQgdD0wLGU9cjt0IT09ZTsrK3Qpe2NvbnN0IGU9blt0XSxyPWVbb10saT1lW2NdO2VbY109cixlW29dPWl9fX10aGlzLm5DYWNoZWRPYmplY3RzXz1pfSx1bmNhY2hlOmZ1bmN0aW9uKCl7Y29uc3QgdD10aGlzLl9vYmplY3RzLGU9dGhpcy5faW5kaWNlc0J5VVVJRCxuPXRoaXMuX2JpbmRpbmdzLHI9bi5sZW5ndGg7bGV0IGk9dGhpcy5uQ2FjaGVkT2JqZWN0c18sbz10Lmxlbmd0aDtmb3IobGV0IGE9MCxzPWFyZ3VtZW50cy5sZW5ndGg7YSE9PXM7KythKXtjb25zdCBzPWFyZ3VtZW50c1thXS51dWlkLGM9ZVtzXTtpZih2b2lkIDAhPT1jKWlmKGRlbGV0ZSBlW3NdLGM8aSl7Y29uc3QgYT0tLWkscz10W2FdLGw9LS1vLHU9dFtsXTtlW3MudXVpZF09Yyx0W2NdPXMsZVt1LnV1aWRdPWEsdFthXT11LHQucG9wKCk7Zm9yKGxldCB0PTAsZT1yO3QhPT1lOysrdCl7Y29uc3QgZT1uW3RdLHI9ZVthXSxpPWVbbF07ZVtjXT1yLGVbYV09aSxlLnBvcCgpfX1lbHNle2NvbnN0IGk9LS1vLGE9dFtpXTtpPjAmJihlW2EudXVpZF09YyksdFtjXT1hLHQucG9wKCk7Zm9yKGxldCB0PTAsZT1yO3QhPT1lOysrdCl7Y29uc3QgZT1uW3RdO2VbY109ZVtpXSxlLnBvcCgpfX19dGhpcy5uQ2FjaGVkT2JqZWN0c189aX0sc3Vic2NyaWJlXzpmdW5jdGlvbih0LGUpe2NvbnN0IG49dGhpcy5fYmluZGluZ3NJbmRpY2VzQnlQYXRoO2xldCByPW5bdF07Y29uc3QgaT10aGlzLl9iaW5kaW5ncztpZih2b2lkIDAhPT1yKXJldHVybiBpW3JdO2NvbnN0IG89dGhpcy5fcGF0aHMsYT10aGlzLl9wYXJzZWRQYXRocyxzPXRoaXMuX29iamVjdHMsYz1zLmxlbmd0aCxsPXRoaXMubkNhY2hlZE9iamVjdHNfLHU9bmV3IEFycmF5KGMpO3I9aS5sZW5ndGgsblt0XT1yLG8ucHVzaCh0KSxhLnB1c2goZSksaS5wdXNoKHUpO2ZvcihsZXQgbj1sLHI9cy5sZW5ndGg7biE9PXI7KytuKXtjb25zdCByPXNbbl07dVtuXT1uZXcgU2Qocix0LGUpfXJldHVybiB1fSx1bnN1YnNjcmliZV86ZnVuY3Rpb24odCl7Y29uc3QgZT10aGlzLl9iaW5kaW5nc0luZGljZXNCeVBhdGgsbj1lW3RdO2lmKHZvaWQgMCE9PW4pe2NvbnN0IHI9dGhpcy5fcGF0aHMsaT10aGlzLl9wYXJzZWRQYXRocyxvPXRoaXMuX2JpbmRpbmdzLGE9by5sZW5ndGgtMSxzPW9bYV07ZVt0W2FdXT1uLG9bbl09cyxvLnBvcCgpLGlbbl09aVthXSxpLnBvcCgpLHJbbl09clthXSxyLnBvcCgpfX19KTtjbGFzcyBFZHtjb25zdHJ1Y3Rvcih0LGUsbj1udWxsLHI9ZS5ibGVuZE1vZGUpe3RoaXMuX21peGVyPXQsdGhpcy5fY2xpcD1lLHRoaXMuX2xvY2FsUm9vdD1uLHRoaXMuYmxlbmRNb2RlPXI7Y29uc3QgaT1lLnRyYWNrcyxvPWkubGVuZ3RoLGE9bmV3IEFycmF5KG8pLHM9e2VuZGluZ1N0YXJ0OmtlLGVuZGluZ0VuZDprZX07Zm9yKGxldCB0PTA7dCE9PW87Kyt0KXtjb25zdCBlPWlbdF0uY3JlYXRlSW50ZXJwb2xhbnQobnVsbCk7YVt0XT1lLGUuc2V0dGluZ3M9c310aGlzLl9pbnRlcnBvbGFudFNldHRpbmdzPXMsdGhpcy5faW50ZXJwb2xhbnRzPWEsdGhpcy5fcHJvcGVydHlCaW5kaW5ncz1uZXcgQXJyYXkobyksdGhpcy5fY2FjaGVJbmRleD1udWxsLHRoaXMuX2J5Q2xpcENhY2hlSW5kZXg9bnVsbCx0aGlzLl90aW1lU2NhbGVJbnRlcnBvbGFudD1udWxsLHRoaXMuX3dlaWdodEludGVycG9sYW50PW51bGwsdGhpcy5sb29wPUZlLHRoaXMuX2xvb3BDb3VudD0tMSx0aGlzLl9zdGFydFRpbWU9bnVsbCx0aGlzLnRpbWU9MCx0aGlzLnRpbWVTY2FsZT0xLHRoaXMuX2VmZmVjdGl2ZVRpbWVTY2FsZT0xLHRoaXMud2VpZ2h0PTEsdGhpcy5fZWZmZWN0aXZlV2VpZ2h0PTEsdGhpcy5yZXBldGl0aW9ucz0xLzAsdGhpcy5wYXVzZWQ9ITEsdGhpcy5lbmFibGVkPSEwLHRoaXMuY2xhbXBXaGVuRmluaXNoZWQ9ITEsdGhpcy56ZXJvU2xvcGVBdFN0YXJ0PSEwLHRoaXMuemVyb1Nsb3BlQXRFbmQ9ITB9cGxheSgpe3JldHVybiB0aGlzLl9taXhlci5fYWN0aXZhdGVBY3Rpb24odGhpcyksdGhpc31zdG9wKCl7cmV0dXJuIHRoaXMuX21peGVyLl9kZWFjdGl2YXRlQWN0aW9uKHRoaXMpLHRoaXMucmVzZXQoKX1yZXNldCgpe3JldHVybiB0aGlzLnBhdXNlZD0hMSx0aGlzLmVuYWJsZWQ9ITAsdGhpcy50aW1lPTAsdGhpcy5fbG9vcENvdW50PS0xLHRoaXMuX3N0YXJ0VGltZT1udWxsLHRoaXMuc3RvcEZhZGluZygpLnN0b3BXYXJwaW5nKCl9aXNSdW5uaW5nKCl7cmV0dXJuIHRoaXMuZW5hYmxlZCYmIXRoaXMucGF1c2VkJiYwIT09dGhpcy50aW1lU2NhbGUmJm51bGw9PT10aGlzLl9zdGFydFRpbWUmJnRoaXMuX21peGVyLl9pc0FjdGl2ZUFjdGlvbih0aGlzKX1pc1NjaGVkdWxlZCgpe3JldHVybiB0aGlzLl9taXhlci5faXNBY3RpdmVBY3Rpb24odGhpcyl9c3RhcnRBdCh0KXtyZXR1cm4gdGhpcy5fc3RhcnRUaW1lPXQsdGhpc31zZXRMb29wKHQsZSl7cmV0dXJuIHRoaXMubG9vcD10LHRoaXMucmVwZXRpdGlvbnM9ZSx0aGlzfXNldEVmZmVjdGl2ZVdlaWdodCh0KXtyZXR1cm4gdGhpcy53ZWlnaHQ9dCx0aGlzLl9lZmZlY3RpdmVXZWlnaHQ9dGhpcy5lbmFibGVkP3Q6MCx0aGlzLnN0b3BGYWRpbmcoKX1nZXRFZmZlY3RpdmVXZWlnaHQoKXtyZXR1cm4gdGhpcy5fZWZmZWN0aXZlV2VpZ2h0fWZhZGVJbih0KXtyZXR1cm4gdGhpcy5fc2NoZWR1bGVGYWRpbmcodCwwLDEpfWZhZGVPdXQodCl7cmV0dXJuIHRoaXMuX3NjaGVkdWxlRmFkaW5nKHQsMSwwKX1jcm9zc0ZhZGVGcm9tKHQsZSxuKXtpZih0LmZhZGVPdXQoZSksdGhpcy5mYWRlSW4oZSksbil7Y29uc3Qgbj10aGlzLl9jbGlwLmR1cmF0aW9uLHI9dC5fY2xpcC5kdXJhdGlvbixpPXIvbixvPW4vcjt0LndhcnAoMSxpLGUpLHRoaXMud2FycChvLDEsZSl9cmV0dXJuIHRoaXN9Y3Jvc3NGYWRlVG8odCxlLG4pe3JldHVybiB0LmNyb3NzRmFkZUZyb20odGhpcyxlLG4pfXN0b3BGYWRpbmcoKXtjb25zdCB0PXRoaXMuX3dlaWdodEludGVycG9sYW50O3JldHVybiBudWxsIT09dCYmKHRoaXMuX3dlaWdodEludGVycG9sYW50PW51bGwsdGhpcy5fbWl4ZXIuX3Rha2VCYWNrQ29udHJvbEludGVycG9sYW50KHQpKSx0aGlzfXNldEVmZmVjdGl2ZVRpbWVTY2FsZSh0KXtyZXR1cm4gdGhpcy50aW1lU2NhbGU9dCx0aGlzLl9lZmZlY3RpdmVUaW1lU2NhbGU9dGhpcy5wYXVzZWQ/MDp0LHRoaXMuc3RvcFdhcnBpbmcoKX1nZXRFZmZlY3RpdmVUaW1lU2NhbGUoKXtyZXR1cm4gdGhpcy5fZWZmZWN0aXZlVGltZVNjYWxlfXNldER1cmF0aW9uKHQpe3JldHVybiB0aGlzLnRpbWVTY2FsZT10aGlzLl9jbGlwLmR1cmF0aW9uL3QsdGhpcy5zdG9wV2FycGluZygpfXN5bmNXaXRoKHQpe3JldHVybiB0aGlzLnRpbWU9dC50aW1lLHRoaXMudGltZVNjYWxlPXQudGltZVNjYWxlLHRoaXMuc3RvcFdhcnBpbmcoKX1oYWx0KHQpe3JldHVybiB0aGlzLndhcnAodGhpcy5fZWZmZWN0aXZlVGltZVNjYWxlLDAsdCl9d2FycCh0LGUsbil7Y29uc3Qgcj10aGlzLl9taXhlcixpPXIudGltZSxvPXRoaXMudGltZVNjYWxlO2xldCBhPXRoaXMuX3RpbWVTY2FsZUludGVycG9sYW50O251bGw9PT1hJiYoYT1yLl9sZW5kQ29udHJvbEludGVycG9sYW50KCksdGhpcy5fdGltZVNjYWxlSW50ZXJwb2xhbnQ9YSk7Y29uc3Qgcz1hLnBhcmFtZXRlclBvc2l0aW9ucyxjPWEuc2FtcGxlVmFsdWVzO3JldHVybiBzWzBdPWksc1sxXT1pK24sY1swXT10L28sY1sxXT1lL28sdGhpc31zdG9wV2FycGluZygpe2NvbnN0IHQ9dGhpcy5fdGltZVNjYWxlSW50ZXJwb2xhbnQ7cmV0dXJuIG51bGwhPT10JiYodGhpcy5fdGltZVNjYWxlSW50ZXJwb2xhbnQ9bnVsbCx0aGlzLl9taXhlci5fdGFrZUJhY2tDb250cm9sSW50ZXJwb2xhbnQodCkpLHRoaXN9Z2V0TWl4ZXIoKXtyZXR1cm4gdGhpcy5fbWl4ZXJ9Z2V0Q2xpcCgpe3JldHVybiB0aGlzLl9jbGlwfWdldFJvb3QoKXtyZXR1cm4gdGhpcy5fbG9jYWxSb290fHx0aGlzLl9taXhlci5fcm9vdH1fdXBkYXRlKHQsZSxuLHIpe2lmKCF0aGlzLmVuYWJsZWQpcmV0dXJuIHZvaWQgdGhpcy5fdXBkYXRlV2VpZ2h0KHQpO2NvbnN0IGk9dGhpcy5fc3RhcnRUaW1lO2lmKG51bGwhPT1pKXtjb25zdCByPSh0LWkpKm47aWYocjwwfHwwPT09bilyZXR1cm47dGhpcy5fc3RhcnRUaW1lPW51bGwsZT1uKnJ9ZSo9dGhpcy5fdXBkYXRlVGltZVNjYWxlKHQpO2NvbnN0IG89dGhpcy5fdXBkYXRlVGltZShlKSxhPXRoaXMuX3VwZGF0ZVdlaWdodCh0KTtpZihhPjApe2NvbnN0IHQ9dGhpcy5faW50ZXJwb2xhbnRzLGU9dGhpcy5fcHJvcGVydHlCaW5kaW5ncztzd2l0Y2godGhpcy5ibGVuZE1vZGUpe2Nhc2UgWGU6Zm9yKGxldCBuPTAscj10Lmxlbmd0aDtuIT09cjsrK24pdFtuXS5ldmFsdWF0ZShvKSxlW25dLmFjY3VtdWxhdGVBZGRpdGl2ZShhKTticmVhaztjYXNlIFdlOmRlZmF1bHQ6Zm9yKGxldCBuPTAsaT10Lmxlbmd0aDtuIT09aTsrK24pdFtuXS5ldmFsdWF0ZShvKSxlW25dLmFjY3VtdWxhdGUocixhKX19fV91cGRhdGVXZWlnaHQodCl7bGV0IGU9MDtpZih0aGlzLmVuYWJsZWQpe2U9dGhpcy53ZWlnaHQ7Y29uc3Qgbj10aGlzLl93ZWlnaHRJbnRlcnBvbGFudDtpZihudWxsIT09bil7Y29uc3Qgcj1uLmV2YWx1YXRlKHQpWzBdO2UqPXIsdD5uLnBhcmFtZXRlclBvc2l0aW9uc1sxXSYmKHRoaXMuc3RvcEZhZGluZygpLDA9PT1yJiYodGhpcy5lbmFibGVkPSExKSl9fXJldHVybiB0aGlzLl9lZmZlY3RpdmVXZWlnaHQ9ZSxlfV91cGRhdGVUaW1lU2NhbGUodCl7bGV0IGU9MDtpZighdGhpcy5wYXVzZWQpe2U9dGhpcy50aW1lU2NhbGU7Y29uc3Qgbj10aGlzLl90aW1lU2NhbGVJbnRlcnBvbGFudDtpZihudWxsIT09bil7ZSo9bi5ldmFsdWF0ZSh0KVswXSx0Pm4ucGFyYW1ldGVyUG9zaXRpb25zWzFdJiYodGhpcy5zdG9wV2FycGluZygpLDA9PT1lP3RoaXMucGF1c2VkPSEwOnRoaXMudGltZVNjYWxlPWUpfX1yZXR1cm4gdGhpcy5fZWZmZWN0aXZlVGltZVNjYWxlPWUsZX1fdXBkYXRlVGltZSh0KXtjb25zdCBlPXRoaXMuX2NsaXAuZHVyYXRpb24sbj10aGlzLmxvb3A7bGV0IHI9dGhpcy50aW1lK3QsaT10aGlzLl9sb29wQ291bnQ7Y29uc3Qgbz1uPT09VWU7aWYoMD09PXQpcmV0dXJuLTE9PT1pP3I6byYmMT09KDEmaSk/ZS1yOnI7aWYobj09PUJlKXstMT09PWkmJih0aGlzLl9sb29wQ291bnQ9MCx0aGlzLl9zZXRFbmRpbmdzKCEwLCEwLCExKSk7dDp7aWYocj49ZSlyPWU7ZWxzZXtpZighKHI8MCkpe3RoaXMudGltZT1yO2JyZWFrIHR9cj0wfXRoaXMuY2xhbXBXaGVuRmluaXNoZWQ/dGhpcy5wYXVzZWQ9ITA6dGhpcy5lbmFibGVkPSExLHRoaXMudGltZT1yLHRoaXMuX21peGVyLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJmaW5pc2hlZFwiLGFjdGlvbjp0aGlzLGRpcmVjdGlvbjp0PDA/LTE6MX0pfX1lbHNle2lmKC0xPT09aSYmKHQ+PTA/KGk9MCx0aGlzLl9zZXRFbmRpbmdzKCEwLDA9PT10aGlzLnJlcGV0aXRpb25zLG8pKTp0aGlzLl9zZXRFbmRpbmdzKDA9PT10aGlzLnJlcGV0aXRpb25zLCEwLG8pKSxyPj1lfHxyPDApe2NvbnN0IG49TWF0aC5mbG9vcihyL2UpO3ItPWUqbixpKz1NYXRoLmFicyhuKTtjb25zdCBhPXRoaXMucmVwZXRpdGlvbnMtaTtpZihhPD0wKXRoaXMuY2xhbXBXaGVuRmluaXNoZWQ/dGhpcy5wYXVzZWQ9ITA6dGhpcy5lbmFibGVkPSExLHI9dD4wP2U6MCx0aGlzLnRpbWU9cix0aGlzLl9taXhlci5kaXNwYXRjaEV2ZW50KHt0eXBlOlwiZmluaXNoZWRcIixhY3Rpb246dGhpcyxkaXJlY3Rpb246dD4wPzE6LTF9KTtlbHNle2lmKDE9PT1hKXtjb25zdCBlPXQ8MDt0aGlzLl9zZXRFbmRpbmdzKGUsIWUsbyl9ZWxzZSB0aGlzLl9zZXRFbmRpbmdzKCExLCExLG8pO3RoaXMuX2xvb3BDb3VudD1pLHRoaXMudGltZT1yLHRoaXMuX21peGVyLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJsb29wXCIsYWN0aW9uOnRoaXMsbG9vcERlbHRhOm59KX19ZWxzZSB0aGlzLnRpbWU9cjtpZihvJiYxPT0oMSZpKSlyZXR1cm4gZS1yfXJldHVybiByfV9zZXRFbmRpbmdzKHQsZSxuKXtjb25zdCByPXRoaXMuX2ludGVycG9sYW50U2V0dGluZ3M7bj8oci5lbmRpbmdTdGFydD1WZSxyLmVuZGluZ0VuZD1WZSk6KHIuZW5kaW5nU3RhcnQ9dD90aGlzLnplcm9TbG9wZUF0U3RhcnQ/VmU6a2U6amUsci5lbmRpbmdFbmQ9ZT90aGlzLnplcm9TbG9wZUF0RW5kP1ZlOmtlOmplKX1fc2NoZWR1bGVGYWRpbmcodCxlLG4pe2NvbnN0IHI9dGhpcy5fbWl4ZXIsaT1yLnRpbWU7bGV0IG89dGhpcy5fd2VpZ2h0SW50ZXJwb2xhbnQ7bnVsbD09PW8mJihvPXIuX2xlbmRDb250cm9sSW50ZXJwb2xhbnQoKSx0aGlzLl93ZWlnaHRJbnRlcnBvbGFudD1vKTtjb25zdCBhPW8ucGFyYW1ldGVyUG9zaXRpb25zLHM9by5zYW1wbGVWYWx1ZXM7cmV0dXJuIGFbMF09aSxzWzBdPWUsYVsxXT1pK3Qsc1sxXT1uLHRoaXN9fWZ1bmN0aW9uIEFkKHQpe3RoaXMuX3Jvb3Q9dCx0aGlzLl9pbml0TWVtb3J5TWFuYWdlcigpLHRoaXMuX2FjY3VJbmRleD0wLHRoaXMudGltZT0wLHRoaXMudGltZVNjYWxlPTF9QWQucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShCbi5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpBZCxfYmluZEFjdGlvbjpmdW5jdGlvbih0LGUpe2NvbnN0IG49dC5fbG9jYWxSb290fHx0aGlzLl9yb290LHI9dC5fY2xpcC50cmFja3MsaT1yLmxlbmd0aCxvPXQuX3Byb3BlcnR5QmluZGluZ3MsYT10Ll9pbnRlcnBvbGFudHMscz1uLnV1aWQsYz10aGlzLl9iaW5kaW5nc0J5Um9vdEFuZE5hbWU7bGV0IGw9Y1tzXTt2b2lkIDA9PT1sJiYobD17fSxjW3NdPWwpO2ZvcihsZXQgdD0wO3QhPT1pOysrdCl7Y29uc3QgaT1yW3RdLGM9aS5uYW1lO2xldCB1PWxbY107aWYodm9pZCAwIT09dSlvW3RdPXU7ZWxzZXtpZih1PW9bdF0sdm9pZCAwIT09dSl7bnVsbD09PXUuX2NhY2hlSW5kZXgmJigrK3UucmVmZXJlbmNlQ291bnQsdGhpcy5fYWRkSW5hY3RpdmVCaW5kaW5nKHUscyxjKSk7Y29udGludWV9Y29uc3Qgcj1lJiZlLl9wcm9wZXJ0eUJpbmRpbmdzW3RdLmJpbmRpbmcucGFyc2VkUGF0aDt1PW5ldyBmZChTZC5jcmVhdGUobixjLHIpLGkuVmFsdWVUeXBlTmFtZSxpLmdldFZhbHVlU2l6ZSgpKSwrK3UucmVmZXJlbmNlQ291bnQsdGhpcy5fYWRkSW5hY3RpdmVCaW5kaW5nKHUscyxjKSxvW3RdPXV9YVt0XS5yZXN1bHRCdWZmZXI9dS5idWZmZXJ9fSxfYWN0aXZhdGVBY3Rpb246ZnVuY3Rpb24odCl7aWYoIXRoaXMuX2lzQWN0aXZlQWN0aW9uKHQpKXtpZihudWxsPT09dC5fY2FjaGVJbmRleCl7Y29uc3QgZT0odC5fbG9jYWxSb290fHx0aGlzLl9yb290KS51dWlkLG49dC5fY2xpcC51dWlkLHI9dGhpcy5fYWN0aW9uc0J5Q2xpcFtuXTt0aGlzLl9iaW5kQWN0aW9uKHQsciYmci5rbm93bkFjdGlvbnNbMF0pLHRoaXMuX2FkZEluYWN0aXZlQWN0aW9uKHQsbixlKX1jb25zdCBlPXQuX3Byb3BlcnR5QmluZGluZ3M7Zm9yKGxldCB0PTAsbj1lLmxlbmd0aDt0IT09bjsrK3Qpe2NvbnN0IG49ZVt0XTswPT1uLnVzZUNvdW50KysmJih0aGlzLl9sZW5kQmluZGluZyhuKSxuLnNhdmVPcmlnaW5hbFN0YXRlKCkpfXRoaXMuX2xlbmRBY3Rpb24odCl9fSxfZGVhY3RpdmF0ZUFjdGlvbjpmdW5jdGlvbih0KXtpZih0aGlzLl9pc0FjdGl2ZUFjdGlvbih0KSl7Y29uc3QgZT10Ll9wcm9wZXJ0eUJpbmRpbmdzO2ZvcihsZXQgdD0wLG49ZS5sZW5ndGg7dCE9PW47Kyt0KXtjb25zdCBuPWVbdF07MD09LS1uLnVzZUNvdW50JiYobi5yZXN0b3JlT3JpZ2luYWxTdGF0ZSgpLHRoaXMuX3Rha2VCYWNrQmluZGluZyhuKSl9dGhpcy5fdGFrZUJhY2tBY3Rpb24odCl9fSxfaW5pdE1lbW9yeU1hbmFnZXI6ZnVuY3Rpb24oKXt0aGlzLl9hY3Rpb25zPVtdLHRoaXMuX25BY3RpdmVBY3Rpb25zPTAsdGhpcy5fYWN0aW9uc0J5Q2xpcD17fSx0aGlzLl9iaW5kaW5ncz1bXSx0aGlzLl9uQWN0aXZlQmluZGluZ3M9MCx0aGlzLl9iaW5kaW5nc0J5Um9vdEFuZE5hbWU9e30sdGhpcy5fY29udHJvbEludGVycG9sYW50cz1bXSx0aGlzLl9uQWN0aXZlQ29udHJvbEludGVycG9sYW50cz0wO2NvbnN0IHQ9dGhpczt0aGlzLnN0YXRzPXthY3Rpb25zOntnZXQgdG90YWwoKXtyZXR1cm4gdC5fYWN0aW9ucy5sZW5ndGh9LGdldCBpblVzZSgpe3JldHVybiB0Ll9uQWN0aXZlQWN0aW9uc319LGJpbmRpbmdzOntnZXQgdG90YWwoKXtyZXR1cm4gdC5fYmluZGluZ3MubGVuZ3RofSxnZXQgaW5Vc2UoKXtyZXR1cm4gdC5fbkFjdGl2ZUJpbmRpbmdzfX0sY29udHJvbEludGVycG9sYW50czp7Z2V0IHRvdGFsKCl7cmV0dXJuIHQuX2NvbnRyb2xJbnRlcnBvbGFudHMubGVuZ3RofSxnZXQgaW5Vc2UoKXtyZXR1cm4gdC5fbkFjdGl2ZUNvbnRyb2xJbnRlcnBvbGFudHN9fX19LF9pc0FjdGl2ZUFjdGlvbjpmdW5jdGlvbih0KXtjb25zdCBlPXQuX2NhY2hlSW5kZXg7cmV0dXJuIG51bGwhPT1lJiZlPHRoaXMuX25BY3RpdmVBY3Rpb25zfSxfYWRkSW5hY3RpdmVBY3Rpb246ZnVuY3Rpb24odCxlLG4pe2NvbnN0IHI9dGhpcy5fYWN0aW9ucyxpPXRoaXMuX2FjdGlvbnNCeUNsaXA7bGV0IG89aVtlXTtpZih2b2lkIDA9PT1vKW89e2tub3duQWN0aW9uczpbdF0sYWN0aW9uQnlSb290Ont9fSx0Ll9ieUNsaXBDYWNoZUluZGV4PTAsaVtlXT1vO2Vsc2V7Y29uc3QgZT1vLmtub3duQWN0aW9uczt0Ll9ieUNsaXBDYWNoZUluZGV4PWUubGVuZ3RoLGUucHVzaCh0KX10Ll9jYWNoZUluZGV4PXIubGVuZ3RoLHIucHVzaCh0KSxvLmFjdGlvbkJ5Um9vdFtuXT10fSxfcmVtb3ZlSW5hY3RpdmVBY3Rpb246ZnVuY3Rpb24odCl7Y29uc3QgZT10aGlzLl9hY3Rpb25zLG49ZVtlLmxlbmd0aC0xXSxyPXQuX2NhY2hlSW5kZXg7bi5fY2FjaGVJbmRleD1yLGVbcl09bixlLnBvcCgpLHQuX2NhY2hlSW5kZXg9bnVsbDtjb25zdCBpPXQuX2NsaXAudXVpZCxvPXRoaXMuX2FjdGlvbnNCeUNsaXAsYT1vW2ldLHM9YS5rbm93bkFjdGlvbnMsYz1zW3MubGVuZ3RoLTFdLGw9dC5fYnlDbGlwQ2FjaGVJbmRleDtjLl9ieUNsaXBDYWNoZUluZGV4PWwsc1tsXT1jLHMucG9wKCksdC5fYnlDbGlwQ2FjaGVJbmRleD1udWxsO2RlbGV0ZSBhLmFjdGlvbkJ5Um9vdFsodC5fbG9jYWxSb290fHx0aGlzLl9yb290KS51dWlkXSwwPT09cy5sZW5ndGgmJmRlbGV0ZSBvW2ldLHRoaXMuX3JlbW92ZUluYWN0aXZlQmluZGluZ3NGb3JBY3Rpb24odCl9LF9yZW1vdmVJbmFjdGl2ZUJpbmRpbmdzRm9yQWN0aW9uOmZ1bmN0aW9uKHQpe2NvbnN0IGU9dC5fcHJvcGVydHlCaW5kaW5ncztmb3IobGV0IHQ9MCxuPWUubGVuZ3RoO3QhPT1uOysrdCl7Y29uc3Qgbj1lW3RdOzA9PS0tbi5yZWZlcmVuY2VDb3VudCYmdGhpcy5fcmVtb3ZlSW5hY3RpdmVCaW5kaW5nKG4pfX0sX2xlbmRBY3Rpb246ZnVuY3Rpb24odCl7Y29uc3QgZT10aGlzLl9hY3Rpb25zLG49dC5fY2FjaGVJbmRleCxyPXRoaXMuX25BY3RpdmVBY3Rpb25zKyssaT1lW3JdO3QuX2NhY2hlSW5kZXg9cixlW3JdPXQsaS5fY2FjaGVJbmRleD1uLGVbbl09aX0sX3Rha2VCYWNrQWN0aW9uOmZ1bmN0aW9uKHQpe2NvbnN0IGU9dGhpcy5fYWN0aW9ucyxuPXQuX2NhY2hlSW5kZXgscj0tLXRoaXMuX25BY3RpdmVBY3Rpb25zLGk9ZVtyXTt0Ll9jYWNoZUluZGV4PXIsZVtyXT10LGkuX2NhY2hlSW5kZXg9bixlW25dPWl9LF9hZGRJbmFjdGl2ZUJpbmRpbmc6ZnVuY3Rpb24odCxlLG4pe2NvbnN0IHI9dGhpcy5fYmluZGluZ3NCeVJvb3RBbmROYW1lLGk9dGhpcy5fYmluZGluZ3M7bGV0IG89cltlXTt2b2lkIDA9PT1vJiYobz17fSxyW2VdPW8pLG9bbl09dCx0Ll9jYWNoZUluZGV4PWkubGVuZ3RoLGkucHVzaCh0KX0sX3JlbW92ZUluYWN0aXZlQmluZGluZzpmdW5jdGlvbih0KXtjb25zdCBlPXRoaXMuX2JpbmRpbmdzLG49dC5iaW5kaW5nLHI9bi5yb290Tm9kZS51dWlkLGk9bi5wYXRoLG89dGhpcy5fYmluZGluZ3NCeVJvb3RBbmROYW1lLGE9b1tyXSxzPWVbZS5sZW5ndGgtMV0sYz10Ll9jYWNoZUluZGV4O3MuX2NhY2hlSW5kZXg9YyxlW2NdPXMsZS5wb3AoKSxkZWxldGUgYVtpXSwwPT09T2JqZWN0LmtleXMoYSkubGVuZ3RoJiZkZWxldGUgb1tyXX0sX2xlbmRCaW5kaW5nOmZ1bmN0aW9uKHQpe2NvbnN0IGU9dGhpcy5fYmluZGluZ3Msbj10Ll9jYWNoZUluZGV4LHI9dGhpcy5fbkFjdGl2ZUJpbmRpbmdzKyssaT1lW3JdO3QuX2NhY2hlSW5kZXg9cixlW3JdPXQsaS5fY2FjaGVJbmRleD1uLGVbbl09aX0sX3Rha2VCYWNrQmluZGluZzpmdW5jdGlvbih0KXtjb25zdCBlPXRoaXMuX2JpbmRpbmdzLG49dC5fY2FjaGVJbmRleCxyPS0tdGhpcy5fbkFjdGl2ZUJpbmRpbmdzLGk9ZVtyXTt0Ll9jYWNoZUluZGV4PXIsZVtyXT10LGkuX2NhY2hlSW5kZXg9bixlW25dPWl9LF9sZW5kQ29udHJvbEludGVycG9sYW50OmZ1bmN0aW9uKCl7Y29uc3QgdD10aGlzLl9jb250cm9sSW50ZXJwb2xhbnRzLGU9dGhpcy5fbkFjdGl2ZUNvbnRyb2xJbnRlcnBvbGFudHMrKztsZXQgbj10W2VdO3JldHVybiB2b2lkIDA9PT1uJiYobj1uZXcgVHUobmV3IEZsb2F0MzJBcnJheSgyKSxuZXcgRmxvYXQzMkFycmF5KDIpLDEsdGhpcy5fY29udHJvbEludGVycG9sYW50c1Jlc3VsdEJ1ZmZlciksbi5fX2NhY2hlSW5kZXg9ZSx0W2VdPW4pLG59LF90YWtlQmFja0NvbnRyb2xJbnRlcnBvbGFudDpmdW5jdGlvbih0KXtjb25zdCBlPXRoaXMuX2NvbnRyb2xJbnRlcnBvbGFudHMsbj10Ll9fY2FjaGVJbmRleCxyPS0tdGhpcy5fbkFjdGl2ZUNvbnRyb2xJbnRlcnBvbGFudHMsaT1lW3JdO3QuX19jYWNoZUluZGV4PXIsZVtyXT10LGkuX19jYWNoZUluZGV4PW4sZVtuXT1pfSxfY29udHJvbEludGVycG9sYW50c1Jlc3VsdEJ1ZmZlcjpuZXcgRmxvYXQzMkFycmF5KDEpLGNsaXBBY3Rpb246ZnVuY3Rpb24odCxlLG4pe2NvbnN0IHI9ZXx8dGhpcy5fcm9vdCxpPXIudXVpZDtsZXQgbz1cInN0cmluZ1wiPT10eXBlb2YgdD9EdS5maW5kQnlOYW1lKHIsdCk6dDtjb25zdCBhPW51bGwhPT1vP28udXVpZDp0LHM9dGhpcy5fYWN0aW9uc0J5Q2xpcFthXTtsZXQgYz1udWxsO2lmKHZvaWQgMD09PW4mJihuPW51bGwhPT1vP28uYmxlbmRNb2RlOldlKSx2b2lkIDAhPT1zKXtjb25zdCB0PXMuYWN0aW9uQnlSb290W2ldO2lmKHZvaWQgMCE9PXQmJnQuYmxlbmRNb2RlPT09bilyZXR1cm4gdDtjPXMua25vd25BY3Rpb25zWzBdLG51bGw9PT1vJiYobz1jLl9jbGlwKX1pZihudWxsPT09bylyZXR1cm4gbnVsbDtjb25zdCBsPW5ldyBFZCh0aGlzLG8sZSxuKTtyZXR1cm4gdGhpcy5fYmluZEFjdGlvbihsLGMpLHRoaXMuX2FkZEluYWN0aXZlQWN0aW9uKGwsYSxpKSxsfSxleGlzdGluZ0FjdGlvbjpmdW5jdGlvbih0LGUpe2NvbnN0IG49ZXx8dGhpcy5fcm9vdCxyPW4udXVpZCxpPVwic3RyaW5nXCI9PXR5cGVvZiB0P0R1LmZpbmRCeU5hbWUobix0KTp0LG89aT9pLnV1aWQ6dCxhPXRoaXMuX2FjdGlvbnNCeUNsaXBbb107cmV0dXJuIHZvaWQgMCE9PWEmJmEuYWN0aW9uQnlSb290W3JdfHxudWxsfSxzdG9wQWxsQWN0aW9uOmZ1bmN0aW9uKCl7Y29uc3QgdD10aGlzLl9hY3Rpb25zO2ZvcihsZXQgZT10aGlzLl9uQWN0aXZlQWN0aW9ucy0xO2U+PTA7LS1lKXRbZV0uc3RvcCgpO3JldHVybiB0aGlzfSx1cGRhdGU6ZnVuY3Rpb24odCl7dCo9dGhpcy50aW1lU2NhbGU7Y29uc3QgZT10aGlzLl9hY3Rpb25zLG49dGhpcy5fbkFjdGl2ZUFjdGlvbnMscj10aGlzLnRpbWUrPXQsaT1NYXRoLnNpZ24odCksbz10aGlzLl9hY2N1SW5kZXhePTE7Zm9yKGxldCBhPTA7YSE9PW47KythKXtlW2FdLl91cGRhdGUocix0LGksbyl9Y29uc3QgYT10aGlzLl9iaW5kaW5ncyxzPXRoaXMuX25BY3RpdmVCaW5kaW5ncztmb3IobGV0IHQ9MDt0IT09czsrK3QpYVt0XS5hcHBseShvKTtyZXR1cm4gdGhpc30sc2V0VGltZTpmdW5jdGlvbih0KXt0aGlzLnRpbWU9MDtmb3IobGV0IHQ9MDt0PHRoaXMuX2FjdGlvbnMubGVuZ3RoO3QrKyl0aGlzLl9hY3Rpb25zW3RdLnRpbWU9MDtyZXR1cm4gdGhpcy51cGRhdGUodCl9LGdldFJvb3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcm9vdH0sdW5jYWNoZUNsaXA6ZnVuY3Rpb24odCl7Y29uc3QgZT10aGlzLl9hY3Rpb25zLG49dC51dWlkLHI9dGhpcy5fYWN0aW9uc0J5Q2xpcCxpPXJbbl07aWYodm9pZCAwIT09aSl7Y29uc3QgdD1pLmtub3duQWN0aW9ucztmb3IobGV0IG49MCxyPXQubGVuZ3RoO24hPT1yOysrbil7Y29uc3Qgcj10W25dO3RoaXMuX2RlYWN0aXZhdGVBY3Rpb24ocik7Y29uc3QgaT1yLl9jYWNoZUluZGV4LG89ZVtlLmxlbmd0aC0xXTtyLl9jYWNoZUluZGV4PW51bGwsci5fYnlDbGlwQ2FjaGVJbmRleD1udWxsLG8uX2NhY2hlSW5kZXg9aSxlW2ldPW8sZS5wb3AoKSx0aGlzLl9yZW1vdmVJbmFjdGl2ZUJpbmRpbmdzRm9yQWN0aW9uKHIpfWRlbGV0ZSByW25dfX0sdW5jYWNoZVJvb3Q6ZnVuY3Rpb24odCl7Y29uc3QgZT10LnV1aWQsbj10aGlzLl9hY3Rpb25zQnlDbGlwO2Zvcihjb25zdCB0IGluIG4pe2NvbnN0IHI9blt0XS5hY3Rpb25CeVJvb3RbZV07dm9pZCAwIT09ciYmKHRoaXMuX2RlYWN0aXZhdGVBY3Rpb24ociksdGhpcy5fcmVtb3ZlSW5hY3RpdmVBY3Rpb24ocikpfWNvbnN0IHI9dGhpcy5fYmluZGluZ3NCeVJvb3RBbmROYW1lW2VdO2lmKHZvaWQgMCE9PXIpZm9yKGNvbnN0IHQgaW4gcil7Y29uc3QgZT1yW3RdO2UucmVzdG9yZU9yaWdpbmFsU3RhdGUoKSx0aGlzLl9yZW1vdmVJbmFjdGl2ZUJpbmRpbmcoZSl9fSx1bmNhY2hlQWN0aW9uOmZ1bmN0aW9uKHQsZSl7Y29uc3Qgbj10aGlzLmV4aXN0aW5nQWN0aW9uKHQsZSk7bnVsbCE9PW4mJih0aGlzLl9kZWFjdGl2YXRlQWN0aW9uKG4pLHRoaXMuX3JlbW92ZUluYWN0aXZlQWN0aW9uKG4pKX19KTtjbGFzcyBMZHtjb25zdHJ1Y3Rvcih0KXtcInN0cmluZ1wiPT10eXBlb2YgdCYmKGNvbnNvbGUud2FybihcIlRIUkVFLlVuaWZvcm06IFR5cGUgcGFyYW1ldGVyIGlzIG5vIGxvbmdlciBuZWVkZWQuXCIpLHQ9YXJndW1lbnRzWzFdKSx0aGlzLnZhbHVlPXR9Y2xvbmUoKXtyZXR1cm4gbmV3IExkKHZvaWQgMD09PXRoaXMudmFsdWUuY2xvbmU/dGhpcy52YWx1ZTp0aGlzLnZhbHVlLmNsb25lKCkpfX1mdW5jdGlvbiBSZCh0LGUsbil7R3MuY2FsbCh0aGlzLHQsZSksdGhpcy5tZXNoUGVyQXR0cmlidXRlPW58fDF9ZnVuY3Rpb24gUGQodCxlLG4scixpKXt0aGlzLmJ1ZmZlcj10LHRoaXMudHlwZT1lLHRoaXMuaXRlbVNpemU9bix0aGlzLmVsZW1lbnRTaXplPXIsdGhpcy5jb3VudD1pLHRoaXMudmVyc2lvbj0wfWZ1bmN0aW9uIENkKHQsZSxuLHIpe3RoaXMucmF5PW5ldyBTcih0LGUpLHRoaXMubmVhcj1ufHwwLHRoaXMuZmFyPXJ8fDEvMCx0aGlzLmNhbWVyYT1udWxsLHRoaXMubGF5ZXJzPW5ldyBCcix0aGlzLnBhcmFtcz17TWVzaDp7fSxMaW5lOnt0aHJlc2hvbGQ6MX0sTE9EOnt9LFBvaW50czp7dGhyZXNob2xkOjF9LFNwcml0ZTp7fX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcy5wYXJhbXMse1BvaW50Q2xvdWQ6e2dldDpmdW5jdGlvbigpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5SYXljYXN0ZXI6IHBhcmFtcy5Qb2ludENsb3VkIGhhcyBiZWVuIHJlbmFtZWQgdG8gcGFyYW1zLlBvaW50cy5cIiksdGhpcy5Qb2ludHN9fX0pfWZ1bmN0aW9uIElkKHQsZSl7cmV0dXJuIHQuZGlzdGFuY2UtZS5kaXN0YW5jZX1mdW5jdGlvbiBPZCh0LGUsbixyKXtpZih0LmxheWVycy50ZXN0KGUubGF5ZXJzKSYmdC5yYXljYXN0KGUsbiksITA9PT1yKXtjb25zdCByPXQuY2hpbGRyZW47Zm9yKGxldCB0PTAsaT1yLmxlbmd0aDt0PGk7dCsrKU9kKHJbdF0sZSxuLCEwKX19UmQucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShHcy5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpSZCxpc0luc3RhbmNlZEludGVybGVhdmVkQnVmZmVyOiEwLGNvcHk6ZnVuY3Rpb24odCl7cmV0dXJuIEdzLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyx0KSx0aGlzLm1lc2hQZXJBdHRyaWJ1dGU9dC5tZXNoUGVyQXR0cmlidXRlLHRoaXN9LGNsb25lOmZ1bmN0aW9uKHQpe2NvbnN0IGU9R3MucHJvdG90eXBlLmNsb25lLmNhbGwodGhpcyx0KTtyZXR1cm4gZS5tZXNoUGVyQXR0cmlidXRlPXRoaXMubWVzaFBlckF0dHJpYnV0ZSxlfSx0b0pTT046ZnVuY3Rpb24odCl7Y29uc3QgZT1Hcy5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyx0KTtyZXR1cm4gZS5pc0luc3RhbmNlZEludGVybGVhdmVkQnVmZmVyPSEwLGUubWVzaFBlckF0dHJpYnV0ZT10aGlzLm1lc2hQZXJBdHRyaWJ1dGUsZX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoUGQucHJvdG90eXBlLFwibmVlZHNVcGRhdGVcIix7c2V0OmZ1bmN0aW9uKHQpeyEwPT09dCYmdGhpcy52ZXJzaW9uKyt9fSksT2JqZWN0LmFzc2lnbihQZC5wcm90b3R5cGUse2lzR0xCdWZmZXJBdHRyaWJ1dGU6ITAsc2V0QnVmZmVyOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmJ1ZmZlcj10LHRoaXN9LHNldFR5cGU6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy50eXBlPXQsdGhpcy5lbGVtZW50U2l6ZT1lLHRoaXN9LHNldEl0ZW1TaXplOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLml0ZW1TaXplPXQsdGhpc30sc2V0Q291bnQ6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY291bnQ9dCx0aGlzfX0pLE9iamVjdC5hc3NpZ24oQ2QucHJvdG90eXBlLHtzZXQ6ZnVuY3Rpb24odCxlKXt0aGlzLnJheS5zZXQodCxlKX0sc2V0RnJvbUNhbWVyYTpmdW5jdGlvbih0LGUpe2UmJmUuaXNQZXJzcGVjdGl2ZUNhbWVyYT8odGhpcy5yYXkub3JpZ2luLnNldEZyb21NYXRyaXhQb3NpdGlvbihlLm1hdHJpeFdvcmxkKSx0aGlzLnJheS5kaXJlY3Rpb24uc2V0KHQueCx0LnksLjUpLnVucHJvamVjdChlKS5zdWIodGhpcy5yYXkub3JpZ2luKS5ub3JtYWxpemUoKSx0aGlzLmNhbWVyYT1lKTplJiZlLmlzT3J0aG9ncmFwaGljQ2FtZXJhPyh0aGlzLnJheS5vcmlnaW4uc2V0KHQueCx0LnksKGUubmVhcitlLmZhcikvKGUubmVhci1lLmZhcikpLnVucHJvamVjdChlKSx0aGlzLnJheS5kaXJlY3Rpb24uc2V0KDAsMCwtMSkudHJhbnNmb3JtRGlyZWN0aW9uKGUubWF0cml4V29ybGQpLHRoaXMuY2FtZXJhPWUpOmNvbnNvbGUuZXJyb3IoXCJUSFJFRS5SYXljYXN0ZXI6IFVuc3VwcG9ydGVkIGNhbWVyYSB0eXBlLlwiKX0saW50ZXJzZWN0T2JqZWN0OmZ1bmN0aW9uKHQsZSxuKXtjb25zdCByPW58fFtdO3JldHVybiBPZCh0LHRoaXMscixlKSxyLnNvcnQoSWQpLHJ9LGludGVyc2VjdE9iamVjdHM6ZnVuY3Rpb24odCxlLG4pe2NvbnN0IHI9bnx8W107aWYoITE9PT1BcnJheS5pc0FycmF5KHQpKXJldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5SYXljYXN0ZXIuaW50ZXJzZWN0T2JqZWN0czogb2JqZWN0cyBpcyBub3QgYW4gQXJyYXkuXCIpLHI7Zm9yKGxldCBuPTAsaT10Lmxlbmd0aDtuPGk7bisrKU9kKHRbbl0sdGhpcyxyLGUpO3JldHVybiByLnNvcnQoSWQpLHJ9fSk7Y2xhc3MgTmR7Y29uc3RydWN0b3IodD0xLGU9MCxuPTApe3JldHVybiB0aGlzLnJhZGl1cz10LHRoaXMucGhpPWUsdGhpcy50aGV0YT1uLHRoaXN9c2V0KHQsZSxuKXtyZXR1cm4gdGhpcy5yYWRpdXM9dCx0aGlzLnBoaT1lLHRoaXMudGhldGE9bix0aGlzfWNsb25lKCl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKS5jb3B5KHRoaXMpfWNvcHkodCl7cmV0dXJuIHRoaXMucmFkaXVzPXQucmFkaXVzLHRoaXMucGhpPXQucGhpLHRoaXMudGhldGE9dC50aGV0YSx0aGlzfW1ha2VTYWZlKCl7cmV0dXJuIHRoaXMucGhpPU1hdGgubWF4KDFlLTYsTWF0aC5taW4oTWF0aC5QSS0xZS02LHRoaXMucGhpKSksdGhpc31zZXRGcm9tVmVjdG9yMyh0KXtyZXR1cm4gdGhpcy5zZXRGcm9tQ2FydGVzaWFuQ29vcmRzKHQueCx0LnksdC56KX1zZXRGcm9tQ2FydGVzaWFuQ29vcmRzKHQsZSxuKXtyZXR1cm4gdGhpcy5yYWRpdXM9TWF0aC5zcXJ0KHQqdCtlKmUrbipuKSwwPT09dGhpcy5yYWRpdXM/KHRoaXMudGhldGE9MCx0aGlzLnBoaT0wKToodGhpcy50aGV0YT1NYXRoLmF0YW4yKHQsbiksdGhpcy5waGk9TWF0aC5hY29zKHpuLmNsYW1wKGUvdGhpcy5yYWRpdXMsLTEsMSkpKSx0aGlzfX1jbGFzcyBEZHtjb25zdHJ1Y3Rvcih0LGUsbil7cmV0dXJuIHRoaXMucmFkaXVzPXZvaWQgMCE9PXQ/dDoxLHRoaXMudGhldGE9dm9pZCAwIT09ZT9lOjAsdGhpcy55PXZvaWQgMCE9PW4/bjowLHRoaXN9c2V0KHQsZSxuKXtyZXR1cm4gdGhpcy5yYWRpdXM9dCx0aGlzLnRoZXRhPWUsdGhpcy55PW4sdGhpc31jbG9uZSgpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3RvcikuY29weSh0aGlzKX1jb3B5KHQpe3JldHVybiB0aGlzLnJhZGl1cz10LnJhZGl1cyx0aGlzLnRoZXRhPXQudGhldGEsdGhpcy55PXQueSx0aGlzfXNldEZyb21WZWN0b3IzKHQpe3JldHVybiB0aGlzLnNldEZyb21DYXJ0ZXNpYW5Db29yZHModC54LHQueSx0LnopfXNldEZyb21DYXJ0ZXNpYW5Db29yZHModCxlLG4pe3JldHVybiB0aGlzLnJhZGl1cz1NYXRoLnNxcnQodCp0K24qbiksdGhpcy50aGV0YT1NYXRoLmF0YW4yKHQsbiksdGhpcy55PWUsdGhpc319Y29uc3QgQmQ9bmV3IEduO2NsYXNzIEZke2NvbnN0cnVjdG9yKHQsZSl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJpc0JveDJcIix7dmFsdWU6ITB9KSx0aGlzLm1pbj12b2lkIDAhPT10P3Q6bmV3IEduKDEvMCwxLzApLHRoaXMubWF4PXZvaWQgMCE9PWU/ZTpuZXcgR24oLTEvMCwtMS8wKX1zZXQodCxlKXtyZXR1cm4gdGhpcy5taW4uY29weSh0KSx0aGlzLm1heC5jb3B5KGUpLHRoaXN9c2V0RnJvbVBvaW50cyh0KXt0aGlzLm1ha2VFbXB0eSgpO2ZvcihsZXQgZT0wLG49dC5sZW5ndGg7ZTxuO2UrKyl0aGlzLmV4cGFuZEJ5UG9pbnQodFtlXSk7cmV0dXJuIHRoaXN9c2V0RnJvbUNlbnRlckFuZFNpemUodCxlKXtjb25zdCBuPUJkLmNvcHkoZSkubXVsdGlwbHlTY2FsYXIoLjUpO3JldHVybiB0aGlzLm1pbi5jb3B5KHQpLnN1YihuKSx0aGlzLm1heC5jb3B5KHQpLmFkZChuKSx0aGlzfWNsb25lKCl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKS5jb3B5KHRoaXMpfWNvcHkodCl7cmV0dXJuIHRoaXMubWluLmNvcHkodC5taW4pLHRoaXMubWF4LmNvcHkodC5tYXgpLHRoaXN9bWFrZUVtcHR5KCl7cmV0dXJuIHRoaXMubWluLng9dGhpcy5taW4ueT0xLzAsdGhpcy5tYXgueD10aGlzLm1heC55PS0xLzAsdGhpc31pc0VtcHR5KCl7cmV0dXJuIHRoaXMubWF4Lng8dGhpcy5taW4ueHx8dGhpcy5tYXgueTx0aGlzLm1pbi55fWdldENlbnRlcih0KXtyZXR1cm4gdm9pZCAwPT09dCYmKGNvbnNvbGUud2FybihcIlRIUkVFLkJveDI6IC5nZXRDZW50ZXIoKSB0YXJnZXQgaXMgbm93IHJlcXVpcmVkXCIpLHQ9bmV3IEduKSx0aGlzLmlzRW1wdHkoKT90LnNldCgwLDApOnQuYWRkVmVjdG9ycyh0aGlzLm1pbix0aGlzLm1heCkubXVsdGlwbHlTY2FsYXIoLjUpfWdldFNpemUodCl7cmV0dXJuIHZvaWQgMD09PXQmJihjb25zb2xlLndhcm4oXCJUSFJFRS5Cb3gyOiAuZ2V0U2l6ZSgpIHRhcmdldCBpcyBub3cgcmVxdWlyZWRcIiksdD1uZXcgR24pLHRoaXMuaXNFbXB0eSgpP3Quc2V0KDAsMCk6dC5zdWJWZWN0b3JzKHRoaXMubWF4LHRoaXMubWluKX1leHBhbmRCeVBvaW50KHQpe3JldHVybiB0aGlzLm1pbi5taW4odCksdGhpcy5tYXgubWF4KHQpLHRoaXN9ZXhwYW5kQnlWZWN0b3IodCl7cmV0dXJuIHRoaXMubWluLnN1Yih0KSx0aGlzLm1heC5hZGQodCksdGhpc31leHBhbmRCeVNjYWxhcih0KXtyZXR1cm4gdGhpcy5taW4uYWRkU2NhbGFyKC10KSx0aGlzLm1heC5hZGRTY2FsYXIodCksdGhpc31jb250YWluc1BvaW50KHQpe3JldHVybiEodC54PHRoaXMubWluLnh8fHQueD50aGlzLm1heC54fHx0Lnk8dGhpcy5taW4ueXx8dC55PnRoaXMubWF4LnkpfWNvbnRhaW5zQm94KHQpe3JldHVybiB0aGlzLm1pbi54PD10Lm1pbi54JiZ0Lm1heC54PD10aGlzLm1heC54JiZ0aGlzLm1pbi55PD10Lm1pbi55JiZ0Lm1heC55PD10aGlzLm1heC55fWdldFBhcmFtZXRlcih0LGUpe3JldHVybiB2b2lkIDA9PT1lJiYoY29uc29sZS53YXJuKFwiVEhSRUUuQm94MjogLmdldFBhcmFtZXRlcigpIHRhcmdldCBpcyBub3cgcmVxdWlyZWRcIiksZT1uZXcgR24pLGUuc2V0KCh0LngtdGhpcy5taW4ueCkvKHRoaXMubWF4LngtdGhpcy5taW4ueCksKHQueS10aGlzLm1pbi55KS8odGhpcy5tYXgueS10aGlzLm1pbi55KSl9aW50ZXJzZWN0c0JveCh0KXtyZXR1cm4hKHQubWF4Lng8dGhpcy5taW4ueHx8dC5taW4ueD50aGlzLm1heC54fHx0Lm1heC55PHRoaXMubWluLnl8fHQubWluLnk+dGhpcy5tYXgueSl9Y2xhbXBQb2ludCh0LGUpe3JldHVybiB2b2lkIDA9PT1lJiYoY29uc29sZS53YXJuKFwiVEhSRUUuQm94MjogLmNsYW1wUG9pbnQoKSB0YXJnZXQgaXMgbm93IHJlcXVpcmVkXCIpLGU9bmV3IEduKSxlLmNvcHkodCkuY2xhbXAodGhpcy5taW4sdGhpcy5tYXgpfWRpc3RhbmNlVG9Qb2ludCh0KXtyZXR1cm4gQmQuY29weSh0KS5jbGFtcCh0aGlzLm1pbix0aGlzLm1heCkuc3ViKHQpLmxlbmd0aCgpfWludGVyc2VjdCh0KXtyZXR1cm4gdGhpcy5taW4ubWF4KHQubWluKSx0aGlzLm1heC5taW4odC5tYXgpLHRoaXN9dW5pb24odCl7cmV0dXJuIHRoaXMubWluLm1pbih0Lm1pbiksdGhpcy5tYXgubWF4KHQubWF4KSx0aGlzfXRyYW5zbGF0ZSh0KXtyZXR1cm4gdGhpcy5taW4uYWRkKHQpLHRoaXMubWF4LmFkZCh0KSx0aGlzfWVxdWFscyh0KXtyZXR1cm4gdC5taW4uZXF1YWxzKHRoaXMubWluKSYmdC5tYXguZXF1YWxzKHRoaXMubWF4KX19Y29uc3QgVWQ9bmV3IEtuLHpkPW5ldyBLbjtjbGFzcyBHZHtjb25zdHJ1Y3Rvcih0LGUpe3RoaXMuc3RhcnQ9dm9pZCAwIT09dD90Om5ldyBLbix0aGlzLmVuZD12b2lkIDAhPT1lP2U6bmV3IEtufXNldCh0LGUpe3JldHVybiB0aGlzLnN0YXJ0LmNvcHkodCksdGhpcy5lbmQuY29weShlKSx0aGlzfWNsb25lKCl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKS5jb3B5KHRoaXMpfWNvcHkodCl7cmV0dXJuIHRoaXMuc3RhcnQuY29weSh0LnN0YXJ0KSx0aGlzLmVuZC5jb3B5KHQuZW5kKSx0aGlzfWdldENlbnRlcih0KXtyZXR1cm4gdm9pZCAwPT09dCYmKGNvbnNvbGUud2FybihcIlRIUkVFLkxpbmUzOiAuZ2V0Q2VudGVyKCkgdGFyZ2V0IGlzIG5vdyByZXF1aXJlZFwiKSx0PW5ldyBLbiksdC5hZGRWZWN0b3JzKHRoaXMuc3RhcnQsdGhpcy5lbmQpLm11bHRpcGx5U2NhbGFyKC41KX1kZWx0YSh0KXtyZXR1cm4gdm9pZCAwPT09dCYmKGNvbnNvbGUud2FybihcIlRIUkVFLkxpbmUzOiAuZGVsdGEoKSB0YXJnZXQgaXMgbm93IHJlcXVpcmVkXCIpLHQ9bmV3IEtuKSx0LnN1YlZlY3RvcnModGhpcy5lbmQsdGhpcy5zdGFydCl9ZGlzdGFuY2VTcSgpe3JldHVybiB0aGlzLnN0YXJ0LmRpc3RhbmNlVG9TcXVhcmVkKHRoaXMuZW5kKX1kaXN0YW5jZSgpe3JldHVybiB0aGlzLnN0YXJ0LmRpc3RhbmNlVG8odGhpcy5lbmQpfWF0KHQsZSl7cmV0dXJuIHZvaWQgMD09PWUmJihjb25zb2xlLndhcm4oXCJUSFJFRS5MaW5lMzogLmF0KCkgdGFyZ2V0IGlzIG5vdyByZXF1aXJlZFwiKSxlPW5ldyBLbiksdGhpcy5kZWx0YShlKS5tdWx0aXBseVNjYWxhcih0KS5hZGQodGhpcy5zdGFydCl9Y2xvc2VzdFBvaW50VG9Qb2ludFBhcmFtZXRlcih0LGUpe1VkLnN1YlZlY3RvcnModCx0aGlzLnN0YXJ0KSx6ZC5zdWJWZWN0b3JzKHRoaXMuZW5kLHRoaXMuc3RhcnQpO2NvbnN0IG49emQuZG90KHpkKTtsZXQgcj16ZC5kb3QoVWQpL247cmV0dXJuIGUmJihyPXpuLmNsYW1wKHIsMCwxKSkscn1jbG9zZXN0UG9pbnRUb1BvaW50KHQsZSxuKXtjb25zdCByPXRoaXMuY2xvc2VzdFBvaW50VG9Qb2ludFBhcmFtZXRlcih0LGUpO3JldHVybiB2b2lkIDA9PT1uJiYoY29uc29sZS53YXJuKFwiVEhSRUUuTGluZTM6IC5jbG9zZXN0UG9pbnRUb1BvaW50KCkgdGFyZ2V0IGlzIG5vdyByZXF1aXJlZFwiKSxuPW5ldyBLbiksdGhpcy5kZWx0YShuKS5tdWx0aXBseVNjYWxhcihyKS5hZGQodGhpcy5zdGFydCl9YXBwbHlNYXRyaXg0KHQpe3JldHVybiB0aGlzLnN0YXJ0LmFwcGx5TWF0cml4NCh0KSx0aGlzLmVuZC5hcHBseU1hdHJpeDQodCksdGhpc31lcXVhbHModCl7cmV0dXJuIHQuc3RhcnQuZXF1YWxzKHRoaXMuc3RhcnQpJiZ0LmVuZC5lcXVhbHModGhpcy5lbmQpfX1mdW5jdGlvbiBIZCh0KXtKci5jYWxsKHRoaXMpLHRoaXMubWF0ZXJpYWw9dCx0aGlzLnJlbmRlcj1mdW5jdGlvbigpe30sdGhpcy5oYXNQb3NpdGlvbnM9ITEsdGhpcy5oYXNOb3JtYWxzPSExLHRoaXMuaGFzQ29sb3JzPSExLHRoaXMuaGFzVXZzPSExLHRoaXMucG9zaXRpb25BcnJheT1udWxsLHRoaXMubm9ybWFsQXJyYXk9bnVsbCx0aGlzLmNvbG9yQXJyYXk9bnVsbCx0aGlzLnV2QXJyYXk9bnVsbCx0aGlzLmNvdW50PTB9SGQucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoSnIucHJvdG90eXBlKSxIZC5wcm90b3R5cGUuY29uc3RydWN0b3I9SGQsSGQucHJvdG90eXBlLmlzSW1tZWRpYXRlUmVuZGVyT2JqZWN0PSEwO2NvbnN0IGtkPW5ldyBLbjtjbGFzcyBWZCBleHRlbmRzIEpye2NvbnN0cnVjdG9yKHQsZSl7c3VwZXIoKSx0aGlzLmxpZ2h0PXQsdGhpcy5saWdodC51cGRhdGVNYXRyaXhXb3JsZCgpLHRoaXMubWF0cml4PXQubWF0cml4V29ybGQsdGhpcy5tYXRyaXhBdXRvVXBkYXRlPSExLHRoaXMuY29sb3I9ZTtjb25zdCBuPW5ldyBxaSxyPVswLDAsMCwwLDAsMSwwLDAsMCwxLDAsMSwwLDAsMCwtMSwwLDEsMCwwLDAsMCwxLDEsMCwwLDAsMCwtMSwxXTtmb3IobGV0IHQ9MCxlPTEsbj0zMjt0PG47dCsrLGUrKyl7Y29uc3QgaT10L24qTWF0aC5QSSoyLG89ZS9uKk1hdGguUEkqMjtyLnB1c2goTWF0aC5jb3MoaSksTWF0aC5zaW4oaSksMSxNYXRoLmNvcyhvKSxNYXRoLnNpbihvKSwxKX1uLnNldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IE5pKHIsMykpO2NvbnN0IGk9bmV3IHljKHtmb2c6ITEsdG9uZU1hcHBlZDohMX0pO3RoaXMuY29uZT1uZXcgQWMobixpKSx0aGlzLmFkZCh0aGlzLmNvbmUpLHRoaXMudXBkYXRlKCl9ZGlzcG9zZSgpe3RoaXMuY29uZS5nZW9tZXRyeS5kaXNwb3NlKCksdGhpcy5jb25lLm1hdGVyaWFsLmRpc3Bvc2UoKX11cGRhdGUoKXt0aGlzLmxpZ2h0LnVwZGF0ZU1hdHJpeFdvcmxkKCk7Y29uc3QgdD10aGlzLmxpZ2h0LmRpc3RhbmNlP3RoaXMubGlnaHQuZGlzdGFuY2U6MWUzLGU9dCpNYXRoLnRhbih0aGlzLmxpZ2h0LmFuZ2xlKTt0aGlzLmNvbmUuc2NhbGUuc2V0KGUsZSx0KSxrZC5zZXRGcm9tTWF0cml4UG9zaXRpb24odGhpcy5saWdodC50YXJnZXQubWF0cml4V29ybGQpLHRoaXMuY29uZS5sb29rQXQoa2QpLHZvaWQgMCE9PXRoaXMuY29sb3I/dGhpcy5jb25lLm1hdGVyaWFsLmNvbG9yLnNldCh0aGlzLmNvbG9yKTp0aGlzLmNvbmUubWF0ZXJpYWwuY29sb3IuY29weSh0aGlzLmxpZ2h0LmNvbG9yKX19Y29uc3QgamQ9bmV3IEtuLFdkPW5ldyBUcixYZD1uZXcgVHI7Y2xhc3MgcWQgZXh0ZW5kcyBBY3tjb25zdHJ1Y3Rvcih0KXtjb25zdCBlPWZ1bmN0aW9uIHQoZSl7Y29uc3Qgbj1bXTtlJiZlLmlzQm9uZSYmbi5wdXNoKGUpO2ZvcihsZXQgcj0wO3I8ZS5jaGlsZHJlbi5sZW5ndGg7cisrKW4ucHVzaC5hcHBseShuLHQoZS5jaGlsZHJlbltyXSkpO3JldHVybiBufSh0KSxuPW5ldyBxaSxyPVtdLGk9W10sbz1uZXcgeWkoMCwwLDEpLGE9bmV3IHlpKDAsMSwwKTtmb3IobGV0IHQ9MDt0PGUubGVuZ3RoO3QrKyl7Y29uc3Qgbj1lW3RdO24ucGFyZW50JiZuLnBhcmVudC5pc0JvbmUmJihyLnB1c2goMCwwLDApLHIucHVzaCgwLDAsMCksaS5wdXNoKG8ucixvLmcsby5iKSxpLnB1c2goYS5yLGEuZyxhLmIpKX1uLnNldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IE5pKHIsMykpLG4uc2V0QXR0cmlidXRlKFwiY29sb3JcIixuZXcgTmkoaSwzKSk7c3VwZXIobixuZXcgeWMoe3ZlcnRleENvbG9yczohMCxkZXB0aFRlc3Q6ITEsZGVwdGhXcml0ZTohMSx0b25lTWFwcGVkOiExLHRyYW5zcGFyZW50OiEwfSkpLHRoaXMudHlwZT1cIlNrZWxldG9uSGVscGVyXCIsdGhpcy5pc1NrZWxldG9uSGVscGVyPSEwLHRoaXMucm9vdD10LHRoaXMuYm9uZXM9ZSx0aGlzLm1hdHJpeD10Lm1hdHJpeFdvcmxkLHRoaXMubWF0cml4QXV0b1VwZGF0ZT0hMX11cGRhdGVNYXRyaXhXb3JsZCh0KXtjb25zdCBlPXRoaXMuYm9uZXMsbj10aGlzLmdlb21ldHJ5LHI9bi5nZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiKTtYZC5jb3B5KHRoaXMucm9vdC5tYXRyaXhXb3JsZCkuaW52ZXJ0KCk7Zm9yKGxldCB0PTAsbj0wO3Q8ZS5sZW5ndGg7dCsrKXtjb25zdCBpPWVbdF07aS5wYXJlbnQmJmkucGFyZW50LmlzQm9uZSYmKFdkLm11bHRpcGx5TWF0cmljZXMoWGQsaS5tYXRyaXhXb3JsZCksamQuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKFdkKSxyLnNldFhZWihuLGpkLngsamQueSxqZC56KSxXZC5tdWx0aXBseU1hdHJpY2VzKFhkLGkucGFyZW50Lm1hdHJpeFdvcmxkKSxqZC5zZXRGcm9tTWF0cml4UG9zaXRpb24oV2QpLHIuc2V0WFlaKG4rMSxqZC54LGpkLnksamQueiksbis9Mil9bi5nZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiKS5uZWVkc1VwZGF0ZT0hMCxzdXBlci51cGRhdGVNYXRyaXhXb3JsZCh0KX19Y2xhc3MgWWQgZXh0ZW5kcyBob3tjb25zdHJ1Y3Rvcih0LGUsbil7c3VwZXIobmV3IEtsKGUsNCwyKSxuZXcgX2koe3dpcmVmcmFtZTohMCxmb2c6ITEsdG9uZU1hcHBlZDohMX0pKSx0aGlzLmxpZ2h0PXQsdGhpcy5saWdodC51cGRhdGVNYXRyaXhXb3JsZCgpLHRoaXMuY29sb3I9bix0aGlzLnR5cGU9XCJQb2ludExpZ2h0SGVscGVyXCIsdGhpcy5tYXRyaXg9dGhpcy5saWdodC5tYXRyaXhXb3JsZCx0aGlzLm1hdHJpeEF1dG9VcGRhdGU9ITEsdGhpcy51cGRhdGUoKX1kaXNwb3NlKCl7dGhpcy5nZW9tZXRyeS5kaXNwb3NlKCksdGhpcy5tYXRlcmlhbC5kaXNwb3NlKCl9dXBkYXRlKCl7dm9pZCAwIT09dGhpcy5jb2xvcj90aGlzLm1hdGVyaWFsLmNvbG9yLnNldCh0aGlzLmNvbG9yKTp0aGlzLm1hdGVyaWFsLmNvbG9yLmNvcHkodGhpcy5saWdodC5jb2xvcil9fWNvbnN0IFpkPW5ldyBLbixKZD1uZXcgeWksS2Q9bmV3IHlpO2NsYXNzIFFkIGV4dGVuZHMgSnJ7Y29uc3RydWN0b3IodCxlLG4pe3N1cGVyKCksdGhpcy5saWdodD10LHRoaXMubGlnaHQudXBkYXRlTWF0cml4V29ybGQoKSx0aGlzLm1hdHJpeD10Lm1hdHJpeFdvcmxkLHRoaXMubWF0cml4QXV0b1VwZGF0ZT0hMSx0aGlzLmNvbG9yPW47Y29uc3Qgcj1uZXcgSGwoZSk7ci5yb3RhdGVZKC41Kk1hdGguUEkpLHRoaXMubWF0ZXJpYWw9bmV3IF9pKHt3aXJlZnJhbWU6ITAsZm9nOiExLHRvbmVNYXBwZWQ6ITF9KSx2b2lkIDA9PT10aGlzLmNvbG9yJiYodGhpcy5tYXRlcmlhbC52ZXJ0ZXhDb2xvcnM9ITApO2NvbnN0IGk9ci5nZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiKSxvPW5ldyBGbG9hdDMyQXJyYXkoMyppLmNvdW50KTtyLnNldEF0dHJpYnV0ZShcImNvbG9yXCIsbmV3IFRpKG8sMykpLHRoaXMuYWRkKG5ldyBobyhyLHRoaXMubWF0ZXJpYWwpKSx0aGlzLnVwZGF0ZSgpfWRpc3Bvc2UoKXt0aGlzLmNoaWxkcmVuWzBdLmdlb21ldHJ5LmRpc3Bvc2UoKSx0aGlzLmNoaWxkcmVuWzBdLm1hdGVyaWFsLmRpc3Bvc2UoKX11cGRhdGUoKXtjb25zdCB0PXRoaXMuY2hpbGRyZW5bMF07aWYodm9pZCAwIT09dGhpcy5jb2xvcil0aGlzLm1hdGVyaWFsLmNvbG9yLnNldCh0aGlzLmNvbG9yKTtlbHNle2NvbnN0IGU9dC5nZW9tZXRyeS5nZXRBdHRyaWJ1dGUoXCJjb2xvclwiKTtKZC5jb3B5KHRoaXMubGlnaHQuY29sb3IpLEtkLmNvcHkodGhpcy5saWdodC5ncm91bmRDb2xvcik7Zm9yKGxldCB0PTAsbj1lLmNvdW50O3Q8bjt0Kyspe2NvbnN0IHI9dDxuLzI/SmQ6S2Q7ZS5zZXRYWVoodCxyLnIsci5nLHIuYil9ZS5uZWVkc1VwZGF0ZT0hMH10Lmxvb2tBdChaZC5zZXRGcm9tTWF0cml4UG9zaXRpb24odGhpcy5saWdodC5tYXRyaXhXb3JsZCkubmVnYXRlKCkpfX1jbGFzcyAkZCBleHRlbmRzIEFje2NvbnN0cnVjdG9yKHQ9MTAsZT0xMCxuPTQ0NzM5MjQscj04OTQ3ODQ4KXtuPW5ldyB5aShuKSxyPW5ldyB5aShyKTtjb25zdCBpPWUvMixvPXQvZSxhPXQvMixzPVtdLGM9W107Zm9yKGxldCB0PTAsbD0wLHU9LWE7dDw9ZTt0KyssdSs9byl7cy5wdXNoKC1hLDAsdSxhLDAsdSkscy5wdXNoKHUsMCwtYSx1LDAsYSk7Y29uc3QgZT10PT09aT9uOnI7ZS50b0FycmF5KGMsbCksbCs9MyxlLnRvQXJyYXkoYyxsKSxsKz0zLGUudG9BcnJheShjLGwpLGwrPTMsZS50b0FycmF5KGMsbCksbCs9M31jb25zdCBsPW5ldyBxaTtsLnNldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IE5pKHMsMykpLGwuc2V0QXR0cmlidXRlKFwiY29sb3JcIixuZXcgTmkoYywzKSk7c3VwZXIobCxuZXcgeWMoe3ZlcnRleENvbG9yczohMCx0b25lTWFwcGVkOiExfSkpLHRoaXMudHlwZT1cIkdyaWRIZWxwZXJcIn19Y2xhc3MgdHAgZXh0ZW5kcyBBY3tjb25zdHJ1Y3Rvcih0PTEwLGU9MTYsbj04LHI9NjQsaT00NDczOTI0LG89ODk0Nzg0OCl7aT1uZXcgeWkoaSksbz1uZXcgeWkobyk7Y29uc3QgYT1bXSxzPVtdO2ZvcihsZXQgbj0wO248PWU7bisrKXtjb25zdCByPW4vZSooMipNYXRoLlBJKSxjPU1hdGguc2luKHIpKnQsbD1NYXRoLmNvcyhyKSp0O2EucHVzaCgwLDAsMCksYS5wdXNoKGMsMCxsKTtjb25zdCB1PTEmbj9pOm87cy5wdXNoKHUucix1LmcsdS5iKSxzLnB1c2godS5yLHUuZyx1LmIpfWZvcihsZXQgZT0wO2U8PW47ZSsrKXtjb25zdCBjPTEmZT9pOm8sbD10LXQvbiplO2ZvcihsZXQgdD0wO3Q8cjt0Kyspe2xldCBlPXQvciooMipNYXRoLlBJKSxuPU1hdGguc2luKGUpKmwsaT1NYXRoLmNvcyhlKSpsO2EucHVzaChuLDAsaSkscy5wdXNoKGMucixjLmcsYy5iKSxlPSh0KzEpL3IqKDIqTWF0aC5QSSksbj1NYXRoLnNpbihlKSpsLGk9TWF0aC5jb3MoZSkqbCxhLnB1c2gobiwwLGkpLHMucHVzaChjLnIsYy5nLGMuYil9fWNvbnN0IGM9bmV3IHFpO2Muc2V0QXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgTmkoYSwzKSksYy5zZXRBdHRyaWJ1dGUoXCJjb2xvclwiLG5ldyBOaShzLDMpKTtzdXBlcihjLG5ldyB5Yyh7dmVydGV4Q29sb3JzOiEwLHRvbmVNYXBwZWQ6ITF9KSksdGhpcy50eXBlPVwiUG9sYXJHcmlkSGVscGVyXCJ9fWNvbnN0IGVwPW5ldyBLbixucD1uZXcgS24scnA9bmV3IEtuO2NsYXNzIGlwIGV4dGVuZHMgSnJ7Y29uc3RydWN0b3IodCxlLG4pe3N1cGVyKCksdGhpcy5saWdodD10LHRoaXMubGlnaHQudXBkYXRlTWF0cml4V29ybGQoKSx0aGlzLm1hdHJpeD10Lm1hdHJpeFdvcmxkLHRoaXMubWF0cml4QXV0b1VwZGF0ZT0hMSx0aGlzLmNvbG9yPW4sdm9pZCAwPT09ZSYmKGU9MSk7bGV0IHI9bmV3IHFpO3Iuc2V0QXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgTmkoWy1lLGUsMCxlLGUsMCxlLC1lLDAsLWUsLWUsMCwtZSxlLDBdLDMpKTtjb25zdCBpPW5ldyB5Yyh7Zm9nOiExLHRvbmVNYXBwZWQ6ITF9KTt0aGlzLmxpZ2h0UGxhbmU9bmV3IFNjKHIsaSksdGhpcy5hZGQodGhpcy5saWdodFBsYW5lKSxyPW5ldyBxaSxyLnNldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IE5pKFswLDAsMCwwLDAsMV0sMykpLHRoaXMudGFyZ2V0TGluZT1uZXcgU2MocixpKSx0aGlzLmFkZCh0aGlzLnRhcmdldExpbmUpLHRoaXMudXBkYXRlKCl9ZGlzcG9zZSgpe3RoaXMubGlnaHRQbGFuZS5nZW9tZXRyeS5kaXNwb3NlKCksdGhpcy5saWdodFBsYW5lLm1hdGVyaWFsLmRpc3Bvc2UoKSx0aGlzLnRhcmdldExpbmUuZ2VvbWV0cnkuZGlzcG9zZSgpLHRoaXMudGFyZ2V0TGluZS5tYXRlcmlhbC5kaXNwb3NlKCl9dXBkYXRlKCl7ZXAuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKHRoaXMubGlnaHQubWF0cml4V29ybGQpLG5wLnNldEZyb21NYXRyaXhQb3NpdGlvbih0aGlzLmxpZ2h0LnRhcmdldC5tYXRyaXhXb3JsZCkscnAuc3ViVmVjdG9ycyhucCxlcCksdGhpcy5saWdodFBsYW5lLmxvb2tBdChucCksdm9pZCAwIT09dGhpcy5jb2xvcj8odGhpcy5saWdodFBsYW5lLm1hdGVyaWFsLmNvbG9yLnNldCh0aGlzLmNvbG9yKSx0aGlzLnRhcmdldExpbmUubWF0ZXJpYWwuY29sb3Iuc2V0KHRoaXMuY29sb3IpKToodGhpcy5saWdodFBsYW5lLm1hdGVyaWFsLmNvbG9yLmNvcHkodGhpcy5saWdodC5jb2xvciksdGhpcy50YXJnZXRMaW5lLm1hdGVyaWFsLmNvbG9yLmNvcHkodGhpcy5saWdodC5jb2xvcikpLHRoaXMudGFyZ2V0TGluZS5sb29rQXQobnApLHRoaXMudGFyZ2V0TGluZS5zY2FsZS56PXJwLmxlbmd0aCgpfX1jb25zdCBvcD1uZXcgS24sYXA9bmV3IGJvO2NsYXNzIHNwIGV4dGVuZHMgQWN7Y29uc3RydWN0b3IodCl7Y29uc3QgZT1uZXcgcWksbj1uZXcgeWMoe2NvbG9yOjE2Nzc3MjE1LHZlcnRleENvbG9yczohMCx0b25lTWFwcGVkOiExfSkscj1bXSxpPVtdLG89e30sYT1uZXcgeWkoMTY3NTUyMDApLHM9bmV3IHlpKDE2NzExNjgwKSxjPW5ldyB5aSg0Mzc3NSksbD1uZXcgeWkoMTY3NzcyMTUpLHU9bmV3IHlpKDMzNTU0NDMpO2Z1bmN0aW9uIGgodCxlLG4pe2QodCxuKSxkKGUsbil9ZnVuY3Rpb24gZCh0LGUpe3IucHVzaCgwLDAsMCksaS5wdXNoKGUucixlLmcsZS5iKSx2b2lkIDA9PT1vW3RdJiYob1t0XT1bXSksb1t0XS5wdXNoKHIubGVuZ3RoLzMtMSl9aChcIm4xXCIsXCJuMlwiLGEpLGgoXCJuMlwiLFwibjRcIixhKSxoKFwibjRcIixcIm4zXCIsYSksaChcIm4zXCIsXCJuMVwiLGEpLGgoXCJmMVwiLFwiZjJcIixhKSxoKFwiZjJcIixcImY0XCIsYSksaChcImY0XCIsXCJmM1wiLGEpLGgoXCJmM1wiLFwiZjFcIixhKSxoKFwibjFcIixcImYxXCIsYSksaChcIm4yXCIsXCJmMlwiLGEpLGgoXCJuM1wiLFwiZjNcIixhKSxoKFwibjRcIixcImY0XCIsYSksaChcInBcIixcIm4xXCIscyksaChcInBcIixcIm4yXCIscyksaChcInBcIixcIm4zXCIscyksaChcInBcIixcIm40XCIscyksaChcInUxXCIsXCJ1MlwiLGMpLGgoXCJ1MlwiLFwidTNcIixjKSxoKFwidTNcIixcInUxXCIsYyksaChcImNcIixcInRcIixsKSxoKFwicFwiLFwiY1wiLHUpLGgoXCJjbjFcIixcImNuMlwiLHUpLGgoXCJjbjNcIixcImNuNFwiLHUpLGgoXCJjZjFcIixcImNmMlwiLHUpLGgoXCJjZjNcIixcImNmNFwiLHUpLGUuc2V0QXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgTmkociwzKSksZS5zZXRBdHRyaWJ1dGUoXCJjb2xvclwiLG5ldyBOaShpLDMpKSxzdXBlcihlLG4pLHRoaXMudHlwZT1cIkNhbWVyYUhlbHBlclwiLHRoaXMuY2FtZXJhPXQsdGhpcy5jYW1lcmEudXBkYXRlUHJvamVjdGlvbk1hdHJpeCYmdGhpcy5jYW1lcmEudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpLHRoaXMubWF0cml4PXQubWF0cml4V29ybGQsdGhpcy5tYXRyaXhBdXRvVXBkYXRlPSExLHRoaXMucG9pbnRNYXA9byx0aGlzLnVwZGF0ZSgpfXVwZGF0ZSgpe2NvbnN0IHQ9dGhpcy5nZW9tZXRyeSxlPXRoaXMucG9pbnRNYXA7YXAucHJvamVjdGlvbk1hdHJpeEludmVyc2UuY29weSh0aGlzLmNhbWVyYS5wcm9qZWN0aW9uTWF0cml4SW52ZXJzZSksY3AoXCJjXCIsZSx0LGFwLDAsMCwtMSksY3AoXCJ0XCIsZSx0LGFwLDAsMCwxKSxjcChcIm4xXCIsZSx0LGFwLC0xLC0xLC0xKSxjcChcIm4yXCIsZSx0LGFwLDEsLTEsLTEpLGNwKFwibjNcIixlLHQsYXAsLTEsMSwtMSksY3AoXCJuNFwiLGUsdCxhcCwxLDEsLTEpLGNwKFwiZjFcIixlLHQsYXAsLTEsLTEsMSksY3AoXCJmMlwiLGUsdCxhcCwxLC0xLDEpLGNwKFwiZjNcIixlLHQsYXAsLTEsMSwxKSxjcChcImY0XCIsZSx0LGFwLDEsMSwxKSxjcChcInUxXCIsZSx0LGFwLC43LDEuMSwtMSksY3AoXCJ1MlwiLGUsdCxhcCwtLjcsMS4xLC0xKSxjcChcInUzXCIsZSx0LGFwLDAsMiwtMSksY3AoXCJjZjFcIixlLHQsYXAsLTEsMCwxKSxjcChcImNmMlwiLGUsdCxhcCwxLDAsMSksY3AoXCJjZjNcIixlLHQsYXAsMCwtMSwxKSxjcChcImNmNFwiLGUsdCxhcCwwLDEsMSksY3AoXCJjbjFcIixlLHQsYXAsLTEsMCwtMSksY3AoXCJjbjJcIixlLHQsYXAsMSwwLC0xKSxjcChcImNuM1wiLGUsdCxhcCwwLC0xLC0xKSxjcChcImNuNFwiLGUsdCxhcCwwLDEsLTEpLHQuZ2V0QXR0cmlidXRlKFwicG9zaXRpb25cIikubmVlZHNVcGRhdGU9ITB9fWZ1bmN0aW9uIGNwKHQsZSxuLHIsaSxvLGEpe29wLnNldChpLG8sYSkudW5wcm9qZWN0KHIpO2NvbnN0IHM9ZVt0XTtpZih2b2lkIDAhPT1zKXtjb25zdCB0PW4uZ2V0QXR0cmlidXRlKFwicG9zaXRpb25cIik7Zm9yKGxldCBlPTAsbj1zLmxlbmd0aDtlPG47ZSsrKXQuc2V0WFlaKHNbZV0sb3AueCxvcC55LG9wLnopfX1jb25zdCBscD1uZXcgdHI7Y2xhc3MgdXAgZXh0ZW5kcyBBY3tjb25zdHJ1Y3Rvcih0LGU9MTY3NzY5NjApe2NvbnN0IG49bmV3IFVpbnQxNkFycmF5KFswLDEsMSwyLDIsMywzLDAsNCw1LDUsNiw2LDcsNyw0LDAsNCwxLDUsMiw2LDMsN10pLHI9bmV3IEZsb2F0MzJBcnJheSgyNCksaT1uZXcgcWk7aS5zZXRJbmRleChuZXcgVGkobiwxKSksaS5zZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBUaShyLDMpKSxzdXBlcihpLG5ldyB5Yyh7Y29sb3I6ZSx0b25lTWFwcGVkOiExfSkpLHRoaXMub2JqZWN0PXQsdGhpcy50eXBlPVwiQm94SGVscGVyXCIsdGhpcy5tYXRyaXhBdXRvVXBkYXRlPSExLHRoaXMudXBkYXRlKCl9dXBkYXRlKHQpe2lmKHZvaWQgMCE9PXQmJmNvbnNvbGUud2FybihcIlRIUkVFLkJveEhlbHBlcjogLnVwZGF0ZSgpIGhhcyBubyBsb25nZXIgYXJndW1lbnRzLlwiKSx2b2lkIDAhPT10aGlzLm9iamVjdCYmbHAuc2V0RnJvbU9iamVjdCh0aGlzLm9iamVjdCksbHAuaXNFbXB0eSgpKXJldHVybjtjb25zdCBlPWxwLm1pbixuPWxwLm1heCxyPXRoaXMuZ2VvbWV0cnkuYXR0cmlidXRlcy5wb3NpdGlvbixpPXIuYXJyYXk7aVswXT1uLngsaVsxXT1uLnksaVsyXT1uLnosaVszXT1lLngsaVs0XT1uLnksaVs1XT1uLnosaVs2XT1lLngsaVs3XT1lLnksaVs4XT1uLnosaVs5XT1uLngsaVsxMF09ZS55LGlbMTFdPW4ueixpWzEyXT1uLngsaVsxM109bi55LGlbMTRdPWUueixpWzE1XT1lLngsaVsxNl09bi55LGlbMTddPWUueixpWzE4XT1lLngsaVsxOV09ZS55LGlbMjBdPWUueixpWzIxXT1uLngsaVsyMl09ZS55LGlbMjNdPWUueixyLm5lZWRzVXBkYXRlPSEwLHRoaXMuZ2VvbWV0cnkuY29tcHV0ZUJvdW5kaW5nU3BoZXJlKCl9c2V0RnJvbU9iamVjdCh0KXtyZXR1cm4gdGhpcy5vYmplY3Q9dCx0aGlzLnVwZGF0ZSgpLHRoaXN9Y29weSh0KXtyZXR1cm4gQWMucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLHQpLHRoaXMub2JqZWN0PXQub2JqZWN0LHRoaXN9fWNsYXNzIGhwIGV4dGVuZHMgQWN7Y29uc3RydWN0b3IodCxlPTE2Nzc2OTYwKXtjb25zdCBuPW5ldyBVaW50MTZBcnJheShbMCwxLDEsMiwyLDMsMywwLDQsNSw1LDYsNiw3LDcsNCwwLDQsMSw1LDIsNiwzLDddKSxyPW5ldyBxaTtyLnNldEluZGV4KG5ldyBUaShuLDEpKSxyLnNldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IE5pKFsxLDEsMSwtMSwxLDEsLTEsLTEsMSwxLC0xLDEsMSwxLC0xLC0xLDEsLTEsLTEsLTEsLTEsMSwtMSwtMV0sMykpLHN1cGVyKHIsbmV3IHljKHtjb2xvcjplLHRvbmVNYXBwZWQ6ITF9KSksdGhpcy5ib3g9dCx0aGlzLnR5cGU9XCJCb3gzSGVscGVyXCIsdGhpcy5nZW9tZXRyeS5jb21wdXRlQm91bmRpbmdTcGhlcmUoKX11cGRhdGVNYXRyaXhXb3JsZCh0KXtjb25zdCBlPXRoaXMuYm94O2UuaXNFbXB0eSgpfHwoZS5nZXRDZW50ZXIodGhpcy5wb3NpdGlvbiksZS5nZXRTaXplKHRoaXMuc2NhbGUpLHRoaXMuc2NhbGUubXVsdGlwbHlTY2FsYXIoLjUpLHN1cGVyLnVwZGF0ZU1hdHJpeFdvcmxkKHQpKX19Y2xhc3MgZHAgZXh0ZW5kcyBTY3tjb25zdHJ1Y3Rvcih0LGU9MSxuPTE2Nzc2OTYwKXtjb25zdCByPW4saT1uZXcgcWk7aS5zZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBOaShbMSwtMSwxLC0xLDEsMSwtMSwtMSwxLDEsMSwxLC0xLDEsMSwtMSwtMSwxLDEsLTEsMSwxLDEsMSwwLDAsMSwwLDAsMF0sMykpLGkuY29tcHV0ZUJvdW5kaW5nU3BoZXJlKCksc3VwZXIoaSxuZXcgeWMoe2NvbG9yOnIsdG9uZU1hcHBlZDohMX0pKSx0aGlzLnR5cGU9XCJQbGFuZUhlbHBlclwiLHRoaXMucGxhbmU9dCx0aGlzLnNpemU9ZTtjb25zdCBvPW5ldyBxaTtvLnNldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IE5pKFsxLDEsMSwtMSwxLDEsLTEsLTEsMSwxLDEsMSwtMSwtMSwxLDEsLTEsMV0sMykpLG8uY29tcHV0ZUJvdW5kaW5nU3BoZXJlKCksdGhpcy5hZGQobmV3IGhvKG8sbmV3IF9pKHtjb2xvcjpyLG9wYWNpdHk6LjIsdHJhbnNwYXJlbnQ6ITAsZGVwdGhXcml0ZTohMSx0b25lTWFwcGVkOiExfSkpKX11cGRhdGVNYXRyaXhXb3JsZCh0KXtsZXQgZT0tdGhpcy5wbGFuZS5jb25zdGFudDtNYXRoLmFicyhlKTwxZS04JiYoZT0xZS04KSx0aGlzLnNjYWxlLnNldCguNSp0aGlzLnNpemUsLjUqdGhpcy5zaXplLGUpLHRoaXMuY2hpbGRyZW5bMF0ubWF0ZXJpYWwuc2lkZT1lPDA/bTpmLHRoaXMubG9va0F0KHRoaXMucGxhbmUubm9ybWFsKSxzdXBlci51cGRhdGVNYXRyaXhXb3JsZCh0KX19Y29uc3QgcHA9bmV3IEtuO2xldCBmcCxtcDtjbGFzcyBncCBleHRlbmRzIEpye2NvbnN0cnVjdG9yKHQsZSxuLHIsaSxvKXtzdXBlcigpLHRoaXMudHlwZT1cIkFycm93SGVscGVyXCIsdm9pZCAwPT09dCYmKHQ9bmV3IEtuKDAsMCwxKSksdm9pZCAwPT09ZSYmKGU9bmV3IEtuKDAsMCwwKSksdm9pZCAwPT09biYmKG49MSksdm9pZCAwPT09ciYmKHI9MTY3NzY5NjApLHZvaWQgMD09PWkmJihpPS4yKm4pLHZvaWQgMD09PW8mJihvPS4yKmkpLHZvaWQgMD09PWZwJiYoZnA9bmV3IHFpLGZwLnNldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IE5pKFswLDAsMCwwLDEsMF0sMykpLG1wPW5ldyBZYygwLC41LDEsNSwxKSxtcC50cmFuc2xhdGUoMCwtLjUsMCkpLHRoaXMucG9zaXRpb24uY29weShlKSx0aGlzLmxpbmU9bmV3IFNjKGZwLG5ldyB5Yyh7Y29sb3I6cix0b25lTWFwcGVkOiExfSkpLHRoaXMubGluZS5tYXRyaXhBdXRvVXBkYXRlPSExLHRoaXMuYWRkKHRoaXMubGluZSksdGhpcy5jb25lPW5ldyBobyhtcCxuZXcgX2koe2NvbG9yOnIsdG9uZU1hcHBlZDohMX0pKSx0aGlzLmNvbmUubWF0cml4QXV0b1VwZGF0ZT0hMSx0aGlzLmFkZCh0aGlzLmNvbmUpLHRoaXMuc2V0RGlyZWN0aW9uKHQpLHRoaXMuc2V0TGVuZ3RoKG4saSxvKX1zZXREaXJlY3Rpb24odCl7aWYodC55Pi45OTk5OSl0aGlzLnF1YXRlcm5pb24uc2V0KDAsMCwwLDEpO2Vsc2UgaWYodC55PC0uOTk5OTkpdGhpcy5xdWF0ZXJuaW9uLnNldCgxLDAsMCwwKTtlbHNle3BwLnNldCh0LnosMCwtdC54KS5ub3JtYWxpemUoKTtjb25zdCBlPU1hdGguYWNvcyh0LnkpO3RoaXMucXVhdGVybmlvbi5zZXRGcm9tQXhpc0FuZ2xlKHBwLGUpfX1zZXRMZW5ndGgodCxlLG4pe3ZvaWQgMD09PWUmJihlPS4yKnQpLHZvaWQgMD09PW4mJihuPS4yKmUpLHRoaXMubGluZS5zY2FsZS5zZXQoMSxNYXRoLm1heCgxZS00LHQtZSksMSksdGhpcy5saW5lLnVwZGF0ZU1hdHJpeCgpLHRoaXMuY29uZS5zY2FsZS5zZXQobixlLG4pLHRoaXMuY29uZS5wb3NpdGlvbi55PXQsdGhpcy5jb25lLnVwZGF0ZU1hdHJpeCgpfXNldENvbG9yKHQpe3RoaXMubGluZS5tYXRlcmlhbC5jb2xvci5zZXQodCksdGhpcy5jb25lLm1hdGVyaWFsLmNvbG9yLnNldCh0KX1jb3B5KHQpe3JldHVybiBzdXBlci5jb3B5KHQsITEpLHRoaXMubGluZS5jb3B5KHQubGluZSksdGhpcy5jb25lLmNvcHkodC5jb25lKSx0aGlzfX1jbGFzcyB2cCBleHRlbmRzIEFje2NvbnN0cnVjdG9yKHQ9MSl7Y29uc3QgZT1bMCwwLDAsdCwwLDAsMCwwLDAsMCx0LDAsMCwwLDAsMCwwLHRdLG49bmV3IHFpO24uc2V0QXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgTmkoZSwzKSksbi5zZXRBdHRyaWJ1dGUoXCJjb2xvclwiLG5ldyBOaShbMSwwLDAsMSwuNiwwLDAsMSwwLC42LDEsMCwwLDAsMSwwLC42LDFdLDMpKTtzdXBlcihuLG5ldyB5Yyh7dmVydGV4Q29sb3JzOiEwLHRvbmVNYXBwZWQ6ITF9KSksdGhpcy50eXBlPVwiQXhlc0hlbHBlclwifX1jb25zdCB5cD1uZXcgRmxvYXQzMkFycmF5KDEpLHhwPW5ldyBJbnQzMkFycmF5KHlwLmJ1ZmZlciksYnA9e3RvSGFsZkZsb2F0OmZ1bmN0aW9uKHQpe3lwWzBdPXQ7Y29uc3QgZT14cFswXTtsZXQgbj1lPj4xNiYzMjc2OCxyPWU+PjEyJjIwNDc7Y29uc3QgaT1lPj4yMyYyNTU7cmV0dXJuIGk8MTAzP246aT4xNDI/KG58PTMxNzQ0LG58PSgyNTU9PWk/MDoxKSYmODM4ODYwNyZlLG4pOmk8MTEzPyhyfD0yMDQ4LG58PShyPj4xMTQtaSkrKHI+PjExMy1pJjEpLG4pOihufD1pLTExMjw8MTB8cj4+MSxuKz0xJnIsbil9fSx3cD1NYXRoLnBvdygyLDgpLF9wPVsuMTI1LC4yMTUsLjM1LC40NDYsLjUyNiwuNTgyXSxNcD01K19wLmxlbmd0aCxTcD17W0plXTowLFtLZV06MSxbJGVdOjIsW2VuXTozLFtubl06NCxbcm5dOjUsW1FlXTo2fSxUcD1uZXcgVGgse19sb2RQbGFuZXM6RXAsX3NpemVMb2RzOkFwLF9zaWdtYXM6THB9PURwKCk7bGV0IFJwPW51bGw7Y29uc3QgUHA9KDErTWF0aC5zcXJ0KDUpKS8yLENwPTEvUHAsSXA9W25ldyBLbigxLDEsMSksbmV3IEtuKC0xLDEsMSksbmV3IEtuKDEsMSwtMSksbmV3IEtuKC0xLDEsLTEpLG5ldyBLbigwLFBwLENwKSxuZXcgS24oMCxQcCwtQ3ApLG5ldyBLbihDcCwwLFBwKSxuZXcgS24oLUNwLDAsUHApLG5ldyBLbihQcCxDcCwwKSxuZXcgS24oLVBwLENwLDApXTtjbGFzcyBPcHtjb25zdHJ1Y3Rvcih0KXt0aGlzLl9yZW5kZXJlcj10LHRoaXMuX3BpbmdQb25nUmVuZGVyVGFyZ2V0PW51bGwsdGhpcy5fYmx1ck1hdGVyaWFsPWZ1bmN0aW9uKHQpe2NvbnN0IGU9bmV3IEZsb2F0MzJBcnJheSh0KSxuPW5ldyBLbigwLDEsMCk7cmV0dXJuIG5ldyBkdSh7bmFtZTpcIlNwaGVyaWNhbEdhdXNzaWFuQmx1clwiLGRlZmluZXM6e246dH0sdW5pZm9ybXM6e2Vudk1hcDp7dmFsdWU6bnVsbH0sc2FtcGxlczp7dmFsdWU6MX0sd2VpZ2h0czp7dmFsdWU6ZX0sbGF0aXR1ZGluYWw6e3ZhbHVlOiExfSxkVGhldGE6e3ZhbHVlOjB9LG1pcEludDp7dmFsdWU6MH0scG9sZUF4aXM6e3ZhbHVlOm59LGlucHV0RW5jb2Rpbmc6e3ZhbHVlOlNwW0plXX0sb3V0cHV0RW5jb2Rpbmc6e3ZhbHVlOlNwW0plXX19LHZlcnRleFNoYWRlcjpHcCgpLGZyYWdtZW50U2hhZGVyOmBcXG5cXG5cXHRcXHRcXHRwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcXG5cXHRcXHRcXHRwcmVjaXNpb24gbWVkaXVtcCBpbnQ7XFxuXFxuXFx0XFx0XFx0dmFyeWluZyB2ZWMzIHZPdXRwdXREaXJlY3Rpb247XFxuXFxuXFx0XFx0XFx0dW5pZm9ybSBzYW1wbGVyMkQgZW52TWFwO1xcblxcdFxcdFxcdHVuaWZvcm0gaW50IHNhbXBsZXM7XFxuXFx0XFx0XFx0dW5pZm9ybSBmbG9hdCB3ZWlnaHRzWyBuIF07XFxuXFx0XFx0XFx0dW5pZm9ybSBib29sIGxhdGl0dWRpbmFsO1xcblxcdFxcdFxcdHVuaWZvcm0gZmxvYXQgZFRoZXRhO1xcblxcdFxcdFxcdHVuaWZvcm0gZmxvYXQgbWlwSW50O1xcblxcdFxcdFxcdHVuaWZvcm0gdmVjMyBwb2xlQXhpcztcXG5cXG5cXHRcXHRcXHQke0hwKCl9XFxuXFxuXFx0XFx0XFx0I2RlZmluZSBFTlZNQVBfVFlQRV9DVUJFX1VWXFxuXFx0XFx0XFx0I2luY2x1ZGUgPGN1YmVfdXZfcmVmbGVjdGlvbl9mcmFnbWVudD5cXG5cXG5cXHRcXHRcXHR2ZWMzIGdldFNhbXBsZSggZmxvYXQgdGhldGEsIHZlYzMgYXhpcyApIHtcXG5cXG5cXHRcXHRcXHRcXHRmbG9hdCBjb3NUaGV0YSA9IGNvcyggdGhldGEgKTtcXG5cXHRcXHRcXHRcXHQvLyBSb2RyaWd1ZXMnIGF4aXMtYW5nbGUgcm90YXRpb25cXG5cXHRcXHRcXHRcXHR2ZWMzIHNhbXBsZURpcmVjdGlvbiA9IHZPdXRwdXREaXJlY3Rpb24gKiBjb3NUaGV0YVxcblxcdFxcdFxcdFxcdFxcdCsgY3Jvc3MoIGF4aXMsIHZPdXRwdXREaXJlY3Rpb24gKSAqIHNpbiggdGhldGEgKVxcblxcdFxcdFxcdFxcdFxcdCsgYXhpcyAqIGRvdCggYXhpcywgdk91dHB1dERpcmVjdGlvbiApICogKCAxLjAgLSBjb3NUaGV0YSApO1xcblxcblxcdFxcdFxcdFxcdHJldHVybiBiaWxpbmVhckN1YmVVViggZW52TWFwLCBzYW1wbGVEaXJlY3Rpb24sIG1pcEludCApO1xcblxcblxcdFxcdFxcdH1cXG5cXG5cXHRcXHRcXHR2b2lkIG1haW4oKSB7XFxuXFxuXFx0XFx0XFx0XFx0dmVjMyBheGlzID0gbGF0aXR1ZGluYWwgPyBwb2xlQXhpcyA6IGNyb3NzKCBwb2xlQXhpcywgdk91dHB1dERpcmVjdGlvbiApO1xcblxcblxcdFxcdFxcdFxcdGlmICggYWxsKCBlcXVhbCggYXhpcywgdmVjMyggMC4wICkgKSApICkge1xcblxcblxcdFxcdFxcdFxcdFxcdGF4aXMgPSB2ZWMzKCB2T3V0cHV0RGlyZWN0aW9uLnosIDAuMCwgLSB2T3V0cHV0RGlyZWN0aW9uLnggKTtcXG5cXG5cXHRcXHRcXHRcXHR9XFxuXFxuXFx0XFx0XFx0XFx0YXhpcyA9IG5vcm1hbGl6ZSggYXhpcyApO1xcblxcblxcdFxcdFxcdFxcdGdsX0ZyYWdDb2xvciA9IHZlYzQoIDAuMCwgMC4wLCAwLjAsIDEuMCApO1xcblxcdFxcdFxcdFxcdGdsX0ZyYWdDb2xvci5yZ2IgKz0gd2VpZ2h0c1sgMCBdICogZ2V0U2FtcGxlKCAwLjAsIGF4aXMgKTtcXG5cXG5cXHRcXHRcXHRcXHRmb3IgKCBpbnQgaSA9IDE7IGkgPCBuOyBpKysgKSB7XFxuXFxuXFx0XFx0XFx0XFx0XFx0aWYgKCBpID49IHNhbXBsZXMgKSB7XFxuXFxuXFx0XFx0XFx0XFx0XFx0XFx0YnJlYWs7XFxuXFxuXFx0XFx0XFx0XFx0XFx0fVxcblxcblxcdFxcdFxcdFxcdFxcdGZsb2F0IHRoZXRhID0gZFRoZXRhICogZmxvYXQoIGkgKTtcXG5cXHRcXHRcXHRcXHRcXHRnbF9GcmFnQ29sb3IucmdiICs9IHdlaWdodHNbIGkgXSAqIGdldFNhbXBsZSggLTEuMCAqIHRoZXRhLCBheGlzICk7XFxuXFx0XFx0XFx0XFx0XFx0Z2xfRnJhZ0NvbG9yLnJnYiArPSB3ZWlnaHRzWyBpIF0gKiBnZXRTYW1wbGUoIHRoZXRhLCBheGlzICk7XFxuXFxuXFx0XFx0XFx0XFx0fVxcblxcblxcdFxcdFxcdFxcdGdsX0ZyYWdDb2xvciA9IGxpbmVhclRvT3V0cHV0VGV4ZWwoIGdsX0ZyYWdDb2xvciApO1xcblxcblxcdFxcdFxcdH1cXG5cXHRcXHRgLGJsZW5kaW5nOngsZGVwdGhUZXN0OiExLGRlcHRoV3JpdGU6ITF9KX0oMjApLHRoaXMuX2VxdWlyZWN0U2hhZGVyPW51bGwsdGhpcy5fY3ViZW1hcFNoYWRlcj1udWxsLHRoaXMuX2NvbXBpbGVNYXRlcmlhbCh0aGlzLl9ibHVyTWF0ZXJpYWwpfWZyb21TY2VuZSh0LGU9MCxuPS4xLHI9MTAwKXtScD10aGlzLl9yZW5kZXJlci5nZXRSZW5kZXJUYXJnZXQoKTtjb25zdCBpPXRoaXMuX2FsbG9jYXRlVGFyZ2V0cygpO3JldHVybiB0aGlzLl9zY2VuZVRvQ3ViZVVWKHQsbixyLGkpLGU+MCYmdGhpcy5fYmx1cihpLDAsMCxlKSx0aGlzLl9hcHBseVBNUkVNKGkpLHRoaXMuX2NsZWFudXAoaSksaX1mcm9tRXF1aXJlY3Rhbmd1bGFyKHQpe3JldHVybiB0aGlzLl9mcm9tVGV4dHVyZSh0KX1mcm9tQ3ViZW1hcCh0KXtyZXR1cm4gdGhpcy5fZnJvbVRleHR1cmUodCl9Y29tcGlsZUN1YmVtYXBTaGFkZXIoKXtudWxsPT09dGhpcy5fY3ViZW1hcFNoYWRlciYmKHRoaXMuX2N1YmVtYXBTaGFkZXI9enAoKSx0aGlzLl9jb21waWxlTWF0ZXJpYWwodGhpcy5fY3ViZW1hcFNoYWRlcikpfWNvbXBpbGVFcXVpcmVjdGFuZ3VsYXJTaGFkZXIoKXtudWxsPT09dGhpcy5fZXF1aXJlY3RTaGFkZXImJih0aGlzLl9lcXVpcmVjdFNoYWRlcj1VcCgpLHRoaXMuX2NvbXBpbGVNYXRlcmlhbCh0aGlzLl9lcXVpcmVjdFNoYWRlcikpfWRpc3Bvc2UoKXt0aGlzLl9ibHVyTWF0ZXJpYWwuZGlzcG9zZSgpLG51bGwhPT10aGlzLl9jdWJlbWFwU2hhZGVyJiZ0aGlzLl9jdWJlbWFwU2hhZGVyLmRpc3Bvc2UoKSxudWxsIT09dGhpcy5fZXF1aXJlY3RTaGFkZXImJnRoaXMuX2VxdWlyZWN0U2hhZGVyLmRpc3Bvc2UoKTtmb3IobGV0IHQ9MDt0PEVwLmxlbmd0aDt0KyspRXBbdF0uZGlzcG9zZSgpfV9jbGVhbnVwKHQpe3RoaXMuX3BpbmdQb25nUmVuZGVyVGFyZ2V0LmRpc3Bvc2UoKSx0aGlzLl9yZW5kZXJlci5zZXRSZW5kZXJUYXJnZXQoUnApLHQuc2Npc3NvclRlc3Q9ITEsRnAodCwwLDAsdC53aWR0aCx0LmhlaWdodCl9X2Zyb21UZXh0dXJlKHQpe1JwPXRoaXMuX3JlbmRlcmVyLmdldFJlbmRlclRhcmdldCgpO2NvbnN0IGU9dGhpcy5fYWxsb2NhdGVUYXJnZXRzKHQpO3JldHVybiB0aGlzLl90ZXh0dXJlVG9DdWJlVVYodCxlKSx0aGlzLl9hcHBseVBNUkVNKGUpLHRoaXMuX2NsZWFudXAoZSksZX1fYWxsb2NhdGVUYXJnZXRzKHQpe2NvbnN0IGU9e21hZ0ZpbHRlcjpmdCxtaW5GaWx0ZXI6ZnQsZ2VuZXJhdGVNaXBtYXBzOiExLHR5cGU6U3QsZm9ybWF0Okh0LGVuY29kaW5nOk5wKHQpP3QuZW5jb2Rpbmc6JGUsZGVwdGhCdWZmZXI6ITF9LG49QnAoZSk7cmV0dXJuIG4uZGVwdGhCdWZmZXI9IXQsdGhpcy5fcGluZ1BvbmdSZW5kZXJUYXJnZXQ9QnAoZSksbn1fY29tcGlsZU1hdGVyaWFsKHQpe2NvbnN0IGU9bmV3IGhvKEVwWzBdLHQpO3RoaXMuX3JlbmRlcmVyLmNvbXBpbGUoZSxUcCl9X3NjZW5lVG9DdWJlVVYodCxlLG4scil7Y29uc3QgaT1uZXcgd28oOTAsMSxlLG4pLG89WzEsLTEsMSwxLDEsMV0sYT1bMSwxLDEsLTEsLTEsLTFdLHM9dGhpcy5fcmVuZGVyZXIsYz1zLm91dHB1dEVuY29kaW5nLGw9cy50b25lTWFwcGluZyx1PXMuZ2V0Q2xlYXJDb2xvcigpLGg9cy5nZXRDbGVhckFscGhhKCk7cy50b25lTWFwcGluZz1RLHMub3V0cHV0RW5jb2Rpbmc9SmU7bGV0IGQ9dC5iYWNrZ3JvdW5kO2lmKGQmJmQuaXNDb2xvcil7ZC5jb252ZXJ0U1JHQlRvTGluZWFyKCk7Y29uc3QgZT1NYXRoLm1heChkLnIsZC5nLGQuYiksbj1NYXRoLm1pbihNYXRoLm1heChNYXRoLmNlaWwoTWF0aC5sb2cyKGUpKSwtMTI4KSwxMjcpO2Q9ZC5tdWx0aXBseVNjYWxhcihNYXRoLnBvdygyLC1uKSk7Y29uc3Qgcj0obisxMjgpLzI1NTtzLnNldENsZWFyQ29sb3IoZCxyKSx0LmJhY2tncm91bmQ9bnVsbH1mb3IobGV0IGU9MDtlPDY7ZSsrKXtjb25zdCBuPWUlMzswPT1uPyhpLnVwLnNldCgwLG9bZV0sMCksaS5sb29rQXQoYVtlXSwwLDApKToxPT1uPyhpLnVwLnNldCgwLDAsb1tlXSksaS5sb29rQXQoMCxhW2VdLDApKTooaS51cC5zZXQoMCxvW2VdLDApLGkubG9va0F0KDAsMCxhW2VdKSksRnAocixuKndwLGU+Mj93cDowLHdwLHdwKSxzLnNldFJlbmRlclRhcmdldChyKSxzLnJlbmRlcih0LGkpfXMudG9uZU1hcHBpbmc9bCxzLm91dHB1dEVuY29kaW5nPWMscy5zZXRDbGVhckNvbG9yKHUsaCl9X3RleHR1cmVUb0N1YmVVVih0LGUpe2NvbnN0IG49dGhpcy5fcmVuZGVyZXI7dC5pc0N1YmVUZXh0dXJlP251bGw9PXRoaXMuX2N1YmVtYXBTaGFkZXImJih0aGlzLl9jdWJlbWFwU2hhZGVyPXpwKCkpOm51bGw9PXRoaXMuX2VxdWlyZWN0U2hhZGVyJiYodGhpcy5fZXF1aXJlY3RTaGFkZXI9VXAoKSk7Y29uc3Qgcj10LmlzQ3ViZVRleHR1cmU/dGhpcy5fY3ViZW1hcFNoYWRlcjp0aGlzLl9lcXVpcmVjdFNoYWRlcixpPW5ldyBobyhFcFswXSxyKSxvPXIudW5pZm9ybXM7by5lbnZNYXAudmFsdWU9dCx0LmlzQ3ViZVRleHR1cmV8fG8udGV4ZWxTaXplLnZhbHVlLnNldCgxL3QuaW1hZ2Uud2lkdGgsMS90LmltYWdlLmhlaWdodCksby5pbnB1dEVuY29kaW5nLnZhbHVlPVNwW3QuZW5jb2RpbmddLG8ub3V0cHV0RW5jb2RpbmcudmFsdWU9U3BbZS50ZXh0dXJlLmVuY29kaW5nXSxGcChlLDAsMCwzKndwLDIqd3ApLG4uc2V0UmVuZGVyVGFyZ2V0KGUpLG4ucmVuZGVyKGksVHApfV9hcHBseVBNUkVNKHQpe2NvbnN0IGU9dGhpcy5fcmVuZGVyZXIsbj1lLmF1dG9DbGVhcjtlLmF1dG9DbGVhcj0hMTtmb3IobGV0IGU9MTtlPE1wO2UrKyl7Y29uc3Qgbj1NYXRoLnNxcnQoTHBbZV0qTHBbZV0tTHBbZS0xXSpMcFtlLTFdKSxyPUlwWyhlLTEpJUlwLmxlbmd0aF07dGhpcy5fYmx1cih0LGUtMSxlLG4scil9ZS5hdXRvQ2xlYXI9bn1fYmx1cih0LGUsbixyLGkpe2NvbnN0IG89dGhpcy5fcGluZ1BvbmdSZW5kZXJUYXJnZXQ7dGhpcy5faGFsZkJsdXIodCxvLGUsbixyLFwibGF0aXR1ZGluYWxcIixpKSx0aGlzLl9oYWxmQmx1cihvLHQsbixuLHIsXCJsb25naXR1ZGluYWxcIixpKX1faGFsZkJsdXIodCxlLG4scixpLG8sYSl7Y29uc3Qgcz10aGlzLl9yZW5kZXJlcixjPXRoaXMuX2JsdXJNYXRlcmlhbDtcImxhdGl0dWRpbmFsXCIhPT1vJiZcImxvbmdpdHVkaW5hbFwiIT09byYmY29uc29sZS5lcnJvcihcImJsdXIgZGlyZWN0aW9uIG11c3QgYmUgZWl0aGVyIGxhdGl0dWRpbmFsIG9yIGxvbmdpdHVkaW5hbCFcIik7Y29uc3QgbD1uZXcgaG8oRXBbcl0sYyksdT1jLnVuaWZvcm1zLGg9QXBbbl0tMSxkPWlzRmluaXRlKGkpP01hdGguUEkvKDIqaCk6MipNYXRoLlBJLzM5LHA9aS9kLGY9aXNGaW5pdGUoaSk/MStNYXRoLmZsb29yKDMqcCk6MjA7Zj4yMCYmY29uc29sZS53YXJuKGBzaWdtYVJhZGlhbnMsICR7aX0sIGlzIHRvbyBsYXJnZSBhbmQgd2lsbCBjbGlwLCBhcyBpdCByZXF1ZXN0ZWQgJHtmfSBzYW1wbGVzIHdoZW4gdGhlIG1heGltdW0gaXMgc2V0IHRvIDIwYCk7Y29uc3QgbT1bXTtsZXQgZz0wO2ZvcihsZXQgdD0wO3Q8MjA7Kyt0KXtjb25zdCBlPXQvcCxuPU1hdGguZXhwKC1lKmUvMik7bS5wdXNoKG4pLDA9PXQ/Zys9bjp0PGYmJihnKz0yKm4pfWZvcihsZXQgdD0wO3Q8bS5sZW5ndGg7dCsrKW1bdF09bVt0XS9nO3UuZW52TWFwLnZhbHVlPXQudGV4dHVyZSx1LnNhbXBsZXMudmFsdWU9Zix1LndlaWdodHMudmFsdWU9bSx1LmxhdGl0dWRpbmFsLnZhbHVlPVwibGF0aXR1ZGluYWxcIj09PW8sYSYmKHUucG9sZUF4aXMudmFsdWU9YSksdS5kVGhldGEudmFsdWU9ZCx1Lm1pcEludC52YWx1ZT04LW4sdS5pbnB1dEVuY29kaW5nLnZhbHVlPVNwW3QudGV4dHVyZS5lbmNvZGluZ10sdS5vdXRwdXRFbmNvZGluZy52YWx1ZT1TcFt0LnRleHR1cmUuZW5jb2RpbmddO2NvbnN0IHY9QXBbcl07RnAoZSwzKk1hdGgubWF4KDAsd3AtMip2KSwoMD09PXI/MDoyKndwKSsyKnYqKHI+ND9yLTgrNDowKSwzKnYsMip2KSxzLnNldFJlbmRlclRhcmdldChlKSxzLnJlbmRlcihsLFRwKX19ZnVuY3Rpb24gTnAodCl7cmV0dXJuIHZvaWQgMCE9PXQmJnQudHlwZT09PVN0JiYodC5lbmNvZGluZz09PUplfHx0LmVuY29kaW5nPT09S2V8fHQuZW5jb2Rpbmc9PT1RZSl9ZnVuY3Rpb24gRHAoKXtjb25zdCB0PVtdLGU9W10sbj1bXTtsZXQgcj04O2ZvcihsZXQgaT0wO2k8TXA7aSsrKXtjb25zdCBvPU1hdGgucG93KDIscik7ZS5wdXNoKG8pO2xldCBhPTEvbztpPjQ/YT1fcFtpLTgrNC0xXTowPT1pJiYoYT0wKSxuLnB1c2goYSk7Y29uc3Qgcz0xLyhvLTEpLGM9LXMvMixsPTErcy8yLHU9W2MsYyxsLGMsbCxsLGMsYyxsLGwsYyxsXSxoPTYsZD02LHA9MyxmPTIsbT0xLGc9bmV3IEZsb2F0MzJBcnJheShwKmQqaCksdj1uZXcgRmxvYXQzMkFycmF5KGYqZCpoKSx5PW5ldyBGbG9hdDMyQXJyYXkobSpkKmgpO2ZvcihsZXQgdD0wO3Q8aDt0Kyspe2NvbnN0IGU9dCUzKjIvMy0xLG49dD4yPzA6LTEscj1bZSxuLDAsZSsyLzMsbiwwLGUrMi8zLG4rMSwwLGUsbiwwLGUrMi8zLG4rMSwwLGUsbisxLDBdO2cuc2V0KHIscCpkKnQpLHYuc2V0KHUsZipkKnQpO2NvbnN0IGk9W3QsdCx0LHQsdCx0XTt5LnNldChpLG0qZCp0KX1jb25zdCB4PW5ldyBxaTt4LnNldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IFRpKGcscCkpLHguc2V0QXR0cmlidXRlKFwidXZcIixuZXcgVGkodixmKSkseC5zZXRBdHRyaWJ1dGUoXCJmYWNlSW5kZXhcIixuZXcgVGkoeSxtKSksdC5wdXNoKHgpLHI+NCYmci0tfXJldHVybntfbG9kUGxhbmVzOnQsX3NpemVMb2RzOmUsX3NpZ21hczpufX1mdW5jdGlvbiBCcCh0KXtjb25zdCBlPW5ldyBZbigzKndwLDMqd3AsdCk7cmV0dXJuIGUudGV4dHVyZS5tYXBwaW5nPWx0LGUudGV4dHVyZS5uYW1lPVwiUE1SRU0uY3ViZVV2XCIsZS5zY2lzc29yVGVzdD0hMCxlfWZ1bmN0aW9uIEZwKHQsZSxuLHIsaSl7dC52aWV3cG9ydC5zZXQoZSxuLHIsaSksdC5zY2lzc29yLnNldChlLG4scixpKX1mdW5jdGlvbiBVcCgpe3JldHVybiBuZXcgZHUoe25hbWU6XCJFcXVpcmVjdGFuZ3VsYXJUb0N1YmVVVlwiLHVuaWZvcm1zOntlbnZNYXA6e3ZhbHVlOm51bGx9LHRleGVsU2l6ZTp7dmFsdWU6bmV3IEduKDEsMSl9LGlucHV0RW5jb2Rpbmc6e3ZhbHVlOlNwW0plXX0sb3V0cHV0RW5jb2Rpbmc6e3ZhbHVlOlNwW0plXX19LHZlcnRleFNoYWRlcjpHcCgpLGZyYWdtZW50U2hhZGVyOmBcXG5cXG5cXHRcXHRcXHRwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcXG5cXHRcXHRcXHRwcmVjaXNpb24gbWVkaXVtcCBpbnQ7XFxuXFxuXFx0XFx0XFx0dmFyeWluZyB2ZWMzIHZPdXRwdXREaXJlY3Rpb247XFxuXFxuXFx0XFx0XFx0dW5pZm9ybSBzYW1wbGVyMkQgZW52TWFwO1xcblxcdFxcdFxcdHVuaWZvcm0gdmVjMiB0ZXhlbFNpemU7XFxuXFxuXFx0XFx0XFx0JHtIcCgpfVxcblxcblxcdFxcdFxcdCNpbmNsdWRlIDxjb21tb24+XFxuXFxuXFx0XFx0XFx0dm9pZCBtYWluKCkge1xcblxcblxcdFxcdFxcdFxcdGdsX0ZyYWdDb2xvciA9IHZlYzQoIDAuMCwgMC4wLCAwLjAsIDEuMCApO1xcblxcblxcdFxcdFxcdFxcdHZlYzMgb3V0cHV0RGlyZWN0aW9uID0gbm9ybWFsaXplKCB2T3V0cHV0RGlyZWN0aW9uICk7XFxuXFx0XFx0XFx0XFx0dmVjMiB1diA9IGVxdWlyZWN0VXYoIG91dHB1dERpcmVjdGlvbiApO1xcblxcblxcdFxcdFxcdFxcdHZlYzIgZiA9IGZyYWN0KCB1diAvIHRleGVsU2l6ZSAtIDAuNSApO1xcblxcdFxcdFxcdFxcdHV2IC09IGYgKiB0ZXhlbFNpemU7XFxuXFx0XFx0XFx0XFx0dmVjMyB0bCA9IGVudk1hcFRleGVsVG9MaW5lYXIoIHRleHR1cmUyRCAoIGVudk1hcCwgdXYgKSApLnJnYjtcXG5cXHRcXHRcXHRcXHR1di54ICs9IHRleGVsU2l6ZS54O1xcblxcdFxcdFxcdFxcdHZlYzMgdHIgPSBlbnZNYXBUZXhlbFRvTGluZWFyKCB0ZXh0dXJlMkQgKCBlbnZNYXAsIHV2ICkgKS5yZ2I7XFxuXFx0XFx0XFx0XFx0dXYueSArPSB0ZXhlbFNpemUueTtcXG5cXHRcXHRcXHRcXHR2ZWMzIGJyID0gZW52TWFwVGV4ZWxUb0xpbmVhciggdGV4dHVyZTJEICggZW52TWFwLCB1diApICkucmdiO1xcblxcdFxcdFxcdFxcdHV2LnggLT0gdGV4ZWxTaXplLng7XFxuXFx0XFx0XFx0XFx0dmVjMyBibCA9IGVudk1hcFRleGVsVG9MaW5lYXIoIHRleHR1cmUyRCAoIGVudk1hcCwgdXYgKSApLnJnYjtcXG5cXG5cXHRcXHRcXHRcXHR2ZWMzIHRtID0gbWl4KCB0bCwgdHIsIGYueCApO1xcblxcdFxcdFxcdFxcdHZlYzMgYm0gPSBtaXgoIGJsLCBiciwgZi54ICk7XFxuXFx0XFx0XFx0XFx0Z2xfRnJhZ0NvbG9yLnJnYiA9IG1peCggdG0sIGJtLCBmLnkgKTtcXG5cXG5cXHRcXHRcXHRcXHRnbF9GcmFnQ29sb3IgPSBsaW5lYXJUb091dHB1dFRleGVsKCBnbF9GcmFnQ29sb3IgKTtcXG5cXG5cXHRcXHRcXHR9XFxuXFx0XFx0YCxibGVuZGluZzp4LGRlcHRoVGVzdDohMSxkZXB0aFdyaXRlOiExfSl9ZnVuY3Rpb24genAoKXtyZXR1cm4gbmV3IGR1KHtuYW1lOlwiQ3ViZW1hcFRvQ3ViZVVWXCIsdW5pZm9ybXM6e2Vudk1hcDp7dmFsdWU6bnVsbH0saW5wdXRFbmNvZGluZzp7dmFsdWU6U3BbSmVdfSxvdXRwdXRFbmNvZGluZzp7dmFsdWU6U3BbSmVdfX0sdmVydGV4U2hhZGVyOkdwKCksZnJhZ21lbnRTaGFkZXI6YFxcblxcblxcdFxcdFxcdHByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1xcblxcdFxcdFxcdHByZWNpc2lvbiBtZWRpdW1wIGludDtcXG5cXG5cXHRcXHRcXHR2YXJ5aW5nIHZlYzMgdk91dHB1dERpcmVjdGlvbjtcXG5cXG5cXHRcXHRcXHR1bmlmb3JtIHNhbXBsZXJDdWJlIGVudk1hcDtcXG5cXG5cXHRcXHRcXHQke0hwKCl9XFxuXFxuXFx0XFx0XFx0dm9pZCBtYWluKCkge1xcblxcblxcdFxcdFxcdFxcdGdsX0ZyYWdDb2xvciA9IHZlYzQoIDAuMCwgMC4wLCAwLjAsIDEuMCApO1xcblxcdFxcdFxcdFxcdGdsX0ZyYWdDb2xvci5yZ2IgPSBlbnZNYXBUZXhlbFRvTGluZWFyKCB0ZXh0dXJlQ3ViZSggZW52TWFwLCB2ZWMzKCAtIHZPdXRwdXREaXJlY3Rpb24ueCwgdk91dHB1dERpcmVjdGlvbi55eiApICkgKS5yZ2I7XFxuXFx0XFx0XFx0XFx0Z2xfRnJhZ0NvbG9yID0gbGluZWFyVG9PdXRwdXRUZXhlbCggZ2xfRnJhZ0NvbG9yICk7XFxuXFxuXFx0XFx0XFx0fVxcblxcdFxcdGAsYmxlbmRpbmc6eCxkZXB0aFRlc3Q6ITEsZGVwdGhXcml0ZTohMX0pfWZ1bmN0aW9uIEdwKCl7cmV0dXJuXCJcXG5cXG5cXHRcXHRwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcXG5cXHRcXHRwcmVjaXNpb24gbWVkaXVtcCBpbnQ7XFxuXFxuXFx0XFx0YXR0cmlidXRlIHZlYzMgcG9zaXRpb247XFxuXFx0XFx0YXR0cmlidXRlIHZlYzIgdXY7XFxuXFx0XFx0YXR0cmlidXRlIGZsb2F0IGZhY2VJbmRleDtcXG5cXG5cXHRcXHR2YXJ5aW5nIHZlYzMgdk91dHB1dERpcmVjdGlvbjtcXG5cXG5cXHRcXHQvLyBSSCBjb29yZGluYXRlIHN5c3RlbTsgUE1SRU0gZmFjZS1pbmRleGluZyBjb252ZW50aW9uXFxuXFx0XFx0dmVjMyBnZXREaXJlY3Rpb24oIHZlYzIgdXYsIGZsb2F0IGZhY2UgKSB7XFxuXFxuXFx0XFx0XFx0dXYgPSAyLjAgKiB1diAtIDEuMDtcXG5cXG5cXHRcXHRcXHR2ZWMzIGRpcmVjdGlvbiA9IHZlYzMoIHV2LCAxLjAgKTtcXG5cXG5cXHRcXHRcXHRpZiAoIGZhY2UgPT0gMC4wICkge1xcblxcblxcdFxcdFxcdFxcdGRpcmVjdGlvbiA9IGRpcmVjdGlvbi56eXg7IC8vICggMSwgdiwgdSApIHBvcyB4XFxuXFxuXFx0XFx0XFx0fSBlbHNlIGlmICggZmFjZSA9PSAxLjAgKSB7XFxuXFxuXFx0XFx0XFx0XFx0ZGlyZWN0aW9uID0gZGlyZWN0aW9uLnh6eTtcXG5cXHRcXHRcXHRcXHRkaXJlY3Rpb24ueHogKj0gLTEuMDsgLy8gKCAtdSwgMSwgLXYgKSBwb3MgeVxcblxcblxcdFxcdFxcdH0gZWxzZSBpZiAoIGZhY2UgPT0gMi4wICkge1xcblxcblxcdFxcdFxcdFxcdGRpcmVjdGlvbi54ICo9IC0xLjA7IC8vICggLXUsIHYsIDEgKSBwb3MgelxcblxcblxcdFxcdFxcdH0gZWxzZSBpZiAoIGZhY2UgPT0gMy4wICkge1xcblxcblxcdFxcdFxcdFxcdGRpcmVjdGlvbiA9IGRpcmVjdGlvbi56eXg7XFxuXFx0XFx0XFx0XFx0ZGlyZWN0aW9uLnh6ICo9IC0xLjA7IC8vICggLTEsIHYsIC11ICkgbmVnIHhcXG5cXG5cXHRcXHRcXHR9IGVsc2UgaWYgKCBmYWNlID09IDQuMCApIHtcXG5cXG5cXHRcXHRcXHRcXHRkaXJlY3Rpb24gPSBkaXJlY3Rpb24ueHp5O1xcblxcdFxcdFxcdFxcdGRpcmVjdGlvbi54eSAqPSAtMS4wOyAvLyAoIC11LCAtMSwgdiApIG5lZyB5XFxuXFxuXFx0XFx0XFx0fSBlbHNlIGlmICggZmFjZSA9PSA1LjAgKSB7XFxuXFxuXFx0XFx0XFx0XFx0ZGlyZWN0aW9uLnogKj0gLTEuMDsgLy8gKCB1LCB2LCAtMSApIG5lZyB6XFxuXFxuXFx0XFx0XFx0fVxcblxcblxcdFxcdFxcdHJldHVybiBkaXJlY3Rpb247XFxuXFxuXFx0XFx0fVxcblxcblxcdFxcdHZvaWQgbWFpbigpIHtcXG5cXG5cXHRcXHRcXHR2T3V0cHV0RGlyZWN0aW9uID0gZ2V0RGlyZWN0aW9uKCB1diwgZmFjZUluZGV4ICk7XFxuXFx0XFx0XFx0Z2xfUG9zaXRpb24gPSB2ZWM0KCBwb3NpdGlvbiwgMS4wICk7XFxuXFxuXFx0XFx0fVxcblxcdFwifWZ1bmN0aW9uIEhwKCl7cmV0dXJuXCJcXG5cXG5cXHRcXHR1bmlmb3JtIGludCBpbnB1dEVuY29kaW5nO1xcblxcdFxcdHVuaWZvcm0gaW50IG91dHB1dEVuY29kaW5nO1xcblxcblxcdFxcdCNpbmNsdWRlIDxlbmNvZGluZ3NfcGFyc19mcmFnbWVudD5cXG5cXG5cXHRcXHR2ZWM0IGlucHV0VGV4ZWxUb0xpbmVhciggdmVjNCB2YWx1ZSApIHtcXG5cXG5cXHRcXHRcXHRpZiAoIGlucHV0RW5jb2RpbmcgPT0gMCApIHtcXG5cXG5cXHRcXHRcXHRcXHRyZXR1cm4gdmFsdWU7XFxuXFxuXFx0XFx0XFx0fSBlbHNlIGlmICggaW5wdXRFbmNvZGluZyA9PSAxICkge1xcblxcblxcdFxcdFxcdFxcdHJldHVybiBzUkdCVG9MaW5lYXIoIHZhbHVlICk7XFxuXFxuXFx0XFx0XFx0fSBlbHNlIGlmICggaW5wdXRFbmNvZGluZyA9PSAyICkge1xcblxcblxcdFxcdFxcdFxcdHJldHVybiBSR0JFVG9MaW5lYXIoIHZhbHVlICk7XFxuXFxuXFx0XFx0XFx0fSBlbHNlIGlmICggaW5wdXRFbmNvZGluZyA9PSAzICkge1xcblxcblxcdFxcdFxcdFxcdHJldHVybiBSR0JNVG9MaW5lYXIoIHZhbHVlLCA3LjAgKTtcXG5cXG5cXHRcXHRcXHR9IGVsc2UgaWYgKCBpbnB1dEVuY29kaW5nID09IDQgKSB7XFxuXFxuXFx0XFx0XFx0XFx0cmV0dXJuIFJHQk1Ub0xpbmVhciggdmFsdWUsIDE2LjAgKTtcXG5cXG5cXHRcXHRcXHR9IGVsc2UgaWYgKCBpbnB1dEVuY29kaW5nID09IDUgKSB7XFxuXFxuXFx0XFx0XFx0XFx0cmV0dXJuIFJHQkRUb0xpbmVhciggdmFsdWUsIDI1Ni4wICk7XFxuXFxuXFx0XFx0XFx0fSBlbHNlIHtcXG5cXG5cXHRcXHRcXHRcXHRyZXR1cm4gR2FtbWFUb0xpbmVhciggdmFsdWUsIDIuMiApO1xcblxcblxcdFxcdFxcdH1cXG5cXG5cXHRcXHR9XFxuXFxuXFx0XFx0dmVjNCBsaW5lYXJUb091dHB1dFRleGVsKCB2ZWM0IHZhbHVlICkge1xcblxcblxcdFxcdFxcdGlmICggb3V0cHV0RW5jb2RpbmcgPT0gMCApIHtcXG5cXG5cXHRcXHRcXHRcXHRyZXR1cm4gdmFsdWU7XFxuXFxuXFx0XFx0XFx0fSBlbHNlIGlmICggb3V0cHV0RW5jb2RpbmcgPT0gMSApIHtcXG5cXG5cXHRcXHRcXHRcXHRyZXR1cm4gTGluZWFyVG9zUkdCKCB2YWx1ZSApO1xcblxcblxcdFxcdFxcdH0gZWxzZSBpZiAoIG91dHB1dEVuY29kaW5nID09IDIgKSB7XFxuXFxuXFx0XFx0XFx0XFx0cmV0dXJuIExpbmVhclRvUkdCRSggdmFsdWUgKTtcXG5cXG5cXHRcXHRcXHR9IGVsc2UgaWYgKCBvdXRwdXRFbmNvZGluZyA9PSAzICkge1xcblxcblxcdFxcdFxcdFxcdHJldHVybiBMaW5lYXJUb1JHQk0oIHZhbHVlLCA3LjAgKTtcXG5cXG5cXHRcXHRcXHR9IGVsc2UgaWYgKCBvdXRwdXRFbmNvZGluZyA9PSA0ICkge1xcblxcblxcdFxcdFxcdFxcdHJldHVybiBMaW5lYXJUb1JHQk0oIHZhbHVlLCAxNi4wICk7XFxuXFxuXFx0XFx0XFx0fSBlbHNlIGlmICggb3V0cHV0RW5jb2RpbmcgPT0gNSApIHtcXG5cXG5cXHRcXHRcXHRcXHRyZXR1cm4gTGluZWFyVG9SR0JEKCB2YWx1ZSwgMjU2LjAgKTtcXG5cXG5cXHRcXHRcXHR9IGVsc2Uge1xcblxcblxcdFxcdFxcdFxcdHJldHVybiBMaW5lYXJUb0dhbW1hKCB2YWx1ZSwgMi4yICk7XFxuXFxuXFx0XFx0XFx0fVxcblxcblxcdFxcdH1cXG5cXG5cXHRcXHR2ZWM0IGVudk1hcFRleGVsVG9MaW5lYXIoIHZlYzQgY29sb3IgKSB7XFxuXFxuXFx0XFx0XFx0cmV0dXJuIGlucHV0VGV4ZWxUb0xpbmVhciggY29sb3IgKTtcXG5cXG5cXHRcXHR9XFxuXFx0XCJ9ZnVuY3Rpb24ga3AodCxlLG4scixpLG8sYSl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLkZhY2U0IGhhcyBiZWVuIHJlbW92ZWQuIEEgVEhSRUUuRmFjZTMgd2lsbCBiZSBjcmVhdGVkIGluc3RlYWQuXCIpLG5ldyB4aSh0LGUsbixpLG8sYSl9Y29uc3QgVnA9MCxqcD0xLFdwPTAsWHA9MSxxcD0yO2Z1bmN0aW9uIFlwKHQpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5NZXNoRmFjZU1hdGVyaWFsIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBhbiBBcnJheSBpbnN0ZWFkLlwiKSx0fWZ1bmN0aW9uIFpwKHQ9W10pe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5NdWx0aU1hdGVyaWFsIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBhbiBBcnJheSBpbnN0ZWFkLlwiKSx0LmlzTXVsdGlNYXRlcmlhbD0hMCx0Lm1hdGVyaWFscz10LHQuY2xvbmU9ZnVuY3Rpb24oKXtyZXR1cm4gdC5zbGljZSgpfSx0fWZ1bmN0aW9uIEpwKHQsZSl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLlBvaW50Q2xvdWQgaGFzIGJlZW4gcmVuYW1lZCB0byBUSFJFRS5Qb2ludHMuXCIpLG5ldyBOYyh0LGUpfWZ1bmN0aW9uIEtwKHQpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5QYXJ0aWNsZSBoYXMgYmVlbiByZW5hbWVkIHRvIFRIUkVFLlNwcml0ZS5cIiksbmV3IHJjKHQpfWZ1bmN0aW9uIFFwKHQsZSl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLlBhcnRpY2xlU3lzdGVtIGhhcyBiZWVuIHJlbmFtZWQgdG8gVEhSRUUuUG9pbnRzLlwiKSxuZXcgTmModCxlKX1mdW5jdGlvbiAkcCh0KXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuUG9pbnRDbG91ZE1hdGVyaWFsIGhhcyBiZWVuIHJlbmFtZWQgdG8gVEhSRUUuUG9pbnRzTWF0ZXJpYWwuXCIpLG5ldyBSYyh0KX1mdW5jdGlvbiB0Zih0KXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuUGFydGljbGVCYXNpY01hdGVyaWFsIGhhcyBiZWVuIHJlbmFtZWQgdG8gVEhSRUUuUG9pbnRzTWF0ZXJpYWwuXCIpLG5ldyBSYyh0KX1mdW5jdGlvbiBlZih0KXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuUGFydGljbGVTeXN0ZW1NYXRlcmlhbCBoYXMgYmVlbiByZW5hbWVkIHRvIFRIUkVFLlBvaW50c01hdGVyaWFsLlwiKSxuZXcgUmModCl9ZnVuY3Rpb24gbmYodCxlLG4pe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5WZXJ0ZXggaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIFRIUkVFLlZlY3RvcjMgaW5zdGVhZC5cIiksbmV3IEtuKHQsZSxuKX1mdW5jdGlvbiByZih0LGUpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5EeW5hbWljQnVmZmVyQXR0cmlidXRlIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKCkuc2V0VXNhZ2UoIFRIUkVFLkR5bmFtaWNEcmF3VXNhZ2UgKSBpbnN0ZWFkLlwiKSxuZXcgVGkodCxlKS5zZXRVc2FnZShFbil9ZnVuY3Rpb24gb2YodCxlKXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuSW50OEF0dHJpYnV0ZSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgbmV3IFRIUkVFLkludDhCdWZmZXJBdHRyaWJ1dGUoKSBpbnN0ZWFkLlwiKSxuZXcgRWkodCxlKX1mdW5jdGlvbiBhZih0LGUpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5VaW50OEF0dHJpYnV0ZSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgbmV3IFRIUkVFLlVpbnQ4QnVmZmVyQXR0cmlidXRlKCkgaW5zdGVhZC5cIiksbmV3IEFpKHQsZSl9ZnVuY3Rpb24gc2YodCxlKXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuVWludDhDbGFtcGVkQXR0cmlidXRlIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBuZXcgVEhSRUUuVWludDhDbGFtcGVkQnVmZmVyQXR0cmlidXRlKCkgaW5zdGVhZC5cIiksbmV3IExpKHQsZSl9ZnVuY3Rpb24gY2YodCxlKXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuSW50MTZBdHRyaWJ1dGUgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIG5ldyBUSFJFRS5JbnQxNkJ1ZmZlckF0dHJpYnV0ZSgpIGluc3RlYWQuXCIpLG5ldyBSaSh0LGUpfWZ1bmN0aW9uIGxmKHQsZSl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLlVpbnQxNkF0dHJpYnV0ZSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgbmV3IFRIUkVFLlVpbnQxNkJ1ZmZlckF0dHJpYnV0ZSgpIGluc3RlYWQuXCIpLG5ldyBQaSh0LGUpfWZ1bmN0aW9uIHVmKHQsZSl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLkludDMyQXR0cmlidXRlIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBuZXcgVEhSRUUuSW50MzJCdWZmZXJBdHRyaWJ1dGUoKSBpbnN0ZWFkLlwiKSxuZXcgQ2kodCxlKX1mdW5jdGlvbiBoZih0LGUpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5VaW50MzJBdHRyaWJ1dGUgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIG5ldyBUSFJFRS5VaW50MzJCdWZmZXJBdHRyaWJ1dGUoKSBpbnN0ZWFkLlwiKSxuZXcgSWkodCxlKX1mdW5jdGlvbiBkZih0LGUpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5GbG9hdDMyQXR0cmlidXRlIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBuZXcgVEhSRUUuRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZSgpIGluc3RlYWQuXCIpLG5ldyBOaSh0LGUpfWZ1bmN0aW9uIHBmKHQsZSl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLkZsb2F0NjRBdHRyaWJ1dGUgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIG5ldyBUSFJFRS5GbG9hdDY0QnVmZmVyQXR0cmlidXRlKCkgaW5zdGVhZC5cIiksbmV3IERpKHQsZSl9ZnVuY3Rpb24gZmYodCl7Y29uc29sZS53YXJuKFwiVEhSRUUuQ2xvc2VkU3BsaW5lQ3VydmUzIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFVzZSBUSFJFRS5DYXRtdWxsUm9tQ3VydmUzIGluc3RlYWQuXCIpLHJoLmNhbGwodGhpcyx0KSx0aGlzLnR5cGU9XCJjYXRtdWxscm9tXCIsdGhpcy5jbG9zZWQ9ITB9ZnVuY3Rpb24gbWYodCl7Y29uc29sZS53YXJuKFwiVEhSRUUuU3BsaW5lQ3VydmUzIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFVzZSBUSFJFRS5DYXRtdWxsUm9tQ3VydmUzIGluc3RlYWQuXCIpLHJoLmNhbGwodGhpcyx0KSx0aGlzLnR5cGU9XCJjYXRtdWxscm9tXCJ9ZnVuY3Rpb24gZ2YodCl7Y29uc29sZS53YXJuKFwiVEhSRUUuU3BsaW5lIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBUSFJFRS5DYXRtdWxsUm9tQ3VydmUzIGluc3RlYWQuXCIpLHJoLmNhbGwodGhpcyx0KSx0aGlzLnR5cGU9XCJjYXRtdWxscm9tXCJ9ZnVuY3Rpb24gdmYodCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLkF4aXNIZWxwZXIgaGFzIGJlZW4gcmVuYW1lZCB0byBUSFJFRS5BeGVzSGVscGVyLlwiKSxuZXcgdnAodCl9ZnVuY3Rpb24geWYodCxlKXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuQm91bmRpbmdCb3hIZWxwZXIgaGFzIGJlZW4gZGVwcmVjYXRlZC4gQ3JlYXRpbmcgYSBUSFJFRS5Cb3hIZWxwZXIgaW5zdGVhZC5cIiksbmV3IHVwKHQsZSl9ZnVuY3Rpb24geGYodCxlKXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuRWRnZXNIZWxwZXIgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIFRIUkVFLkVkZ2VzR2VvbWV0cnkgaW5zdGVhZC5cIiksbmV3IEFjKG5ldyBvbCh0Lmdlb21ldHJ5KSxuZXcgeWMoe2NvbG9yOnZvaWQgMCE9PWU/ZToxNjc3NzIxNX0pKX1mdW5jdGlvbiBiZih0LGUpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5XaXJlZnJhbWVIZWxwZXIgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIFRIUkVFLldpcmVmcmFtZUdlb21ldHJ5IGluc3RlYWQuXCIpLG5ldyBBYyhuZXcgbHUodC5nZW9tZXRyeSksbmV3IHljKHtjb2xvcjp2b2lkIDAhPT1lP2U6MTY3NzcyMTV9KSl9ZnVuY3Rpb24gd2YodCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLlhIUkxvYWRlciBoYXMgYmVlbiByZW5hbWVkIHRvIFRIUkVFLkZpbGVMb2FkZXIuXCIpLG5ldyBrdSh0KX1mdW5jdGlvbiBfZih0KXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuQmluYXJ5VGV4dHVyZUxvYWRlciBoYXMgYmVlbiByZW5hbWVkIHRvIFRIUkVFLkRhdGFUZXh0dXJlTG9hZGVyLlwiKSxuZXcgcXUodCl9ZnVuY3Rpb24gTWYodCxlLG4pe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlclRhcmdldEN1YmUoIHdpZHRoLCBoZWlnaHQsIG9wdGlvbnMgKSBpcyBub3cgV2ViR0xDdWJlUmVuZGVyVGFyZ2V0KCBzaXplLCBvcHRpb25zICkuXCIpLG5ldyBTbyh0LG4pfVp1LmNyZWF0ZT1mdW5jdGlvbih0LGUpe3JldHVybiBjb25zb2xlLmxvZyhcIlRIUkVFLkN1cnZlLmNyZWF0ZSgpIGhhcyBiZWVuIGRlcHJlY2F0ZWRcIiksdC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShadS5wcm90b3R5cGUpLHQucHJvdG90eXBlLmNvbnN0cnVjdG9yPXQsdC5wcm90b3R5cGUuZ2V0UG9pbnQ9ZSx0fSxPYmplY3QuYXNzaWduKG1oLnByb3RvdHlwZSx7Y3JlYXRlUG9pbnRzR2VvbWV0cnk6ZnVuY3Rpb24odCl7Y29uc29sZS53YXJuKFwiVEhSRUUuQ3VydmVQYXRoOiAuY3JlYXRlUG9pbnRzR2VvbWV0cnkoKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgbmV3IFRIUkVFLkdlb21ldHJ5KCkuc2V0RnJvbVBvaW50cyggcG9pbnRzICkgaW5zdGVhZC5cIik7Y29uc3QgZT10aGlzLmdldFBvaW50cyh0KTtyZXR1cm4gdGhpcy5jcmVhdGVHZW9tZXRyeShlKX0sY3JlYXRlU3BhY2VkUG9pbnRzR2VvbWV0cnk6ZnVuY3Rpb24odCl7Y29uc29sZS53YXJuKFwiVEhSRUUuQ3VydmVQYXRoOiAuY3JlYXRlU3BhY2VkUG9pbnRzR2VvbWV0cnkoKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgbmV3IFRIUkVFLkdlb21ldHJ5KCkuc2V0RnJvbVBvaW50cyggcG9pbnRzICkgaW5zdGVhZC5cIik7Y29uc3QgZT10aGlzLmdldFNwYWNlZFBvaW50cyh0KTtyZXR1cm4gdGhpcy5jcmVhdGVHZW9tZXRyeShlKX0sY3JlYXRlR2VvbWV0cnk6ZnVuY3Rpb24odCl7Y29uc29sZS53YXJuKFwiVEhSRUUuQ3VydmVQYXRoOiAuY3JlYXRlR2VvbWV0cnkoKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgbmV3IFRIUkVFLkdlb21ldHJ5KCkuc2V0RnJvbVBvaW50cyggcG9pbnRzICkgaW5zdGVhZC5cIik7Y29uc3QgZT1uZXcgamM7Zm9yKGxldCBuPTAscj10Lmxlbmd0aDtuPHI7bisrKXtjb25zdCByPXRbbl07ZS52ZXJ0aWNlcy5wdXNoKG5ldyBLbihyLngsci55LHIuenx8MCkpfXJldHVybiBlfX0pLE9iamVjdC5hc3NpZ24oZ2gucHJvdG90eXBlLHtmcm9tUG9pbnRzOmZ1bmN0aW9uKHQpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5QYXRoOiAuZnJvbVBvaW50cygpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLnNldEZyb21Qb2ludHMoKS5cIiksdGhpcy5zZXRGcm9tUG9pbnRzKHQpfX0pLGZmLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHJoLnByb3RvdHlwZSksbWYucHJvdG90eXBlPU9iamVjdC5jcmVhdGUocmgucHJvdG90eXBlKSxnZi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShyaC5wcm90b3R5cGUpLE9iamVjdC5hc3NpZ24oZ2YucHJvdG90eXBlLHtpbml0RnJvbUFycmF5OmZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLlNwbGluZTogLmluaXRGcm9tQXJyYXkoKSBoYXMgYmVlbiByZW1vdmVkLlwiKX0sZ2V0Q29udHJvbFBvaW50c0FycmF5OmZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLlNwbGluZTogLmdldENvbnRyb2xQb2ludHNBcnJheSgpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfSxyZXBhcmFtZXRyaXplQnlBcmNMZW5ndGg6ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuU3BsaW5lOiAucmVwYXJhbWV0cml6ZUJ5QXJjTGVuZ3RoKCkgaGFzIGJlZW4gcmVtb3ZlZC5cIil9fSksJGQucHJvdG90eXBlLnNldENvbG9ycz1mdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5HcmlkSGVscGVyOiBzZXRDb2xvcnMoKSBoYXMgYmVlbiBkZXByZWNhdGVkLCBwYXNzIHRoZW0gaW4gdGhlIGNvbnN0cnVjdG9yIGluc3RlYWQuXCIpfSxxZC5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLlNrZWxldG9uSGVscGVyOiB1cGRhdGUoKSBubyBsb25nZXIgbmVlZHMgdG8gYmUgY2FsbGVkLlwiKX0sT2JqZWN0LmFzc2lnbihHdS5wcm90b3R5cGUse2V4dHJhY3RVcmxCYXNlOmZ1bmN0aW9uKHQpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5Mb2FkZXI6IC5leHRyYWN0VXJsQmFzZSgpIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFVzZSBUSFJFRS5Mb2FkZXJVdGlscy5leHRyYWN0VXJsQmFzZSgpIGluc3RlYWQuXCIpLE9oLmV4dHJhY3RVcmxCYXNlKHQpfX0pLEd1LkhhbmRsZXJzPXthZGQ6ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuTG9hZGVyOiBIYW5kbGVycy5hZGQoKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgTG9hZGluZ01hbmFnZXIuYWRkSGFuZGxlcigpIGluc3RlYWQuXCIpfSxnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuTG9hZGVyOiBIYW5kbGVycy5nZXQoKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgTG9hZGluZ01hbmFnZXIuZ2V0SGFuZGxlcigpIGluc3RlYWQuXCIpfX0sT2JqZWN0LmFzc2lnbihGZC5wcm90b3R5cGUse2NlbnRlcjpmdW5jdGlvbih0KXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuQm94MjogLmNlbnRlcigpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmdldENlbnRlcigpLlwiKSx0aGlzLmdldENlbnRlcih0KX0sZW1wdHk6ZnVuY3Rpb24oKXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuQm94MjogLmVtcHR5KCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuaXNFbXB0eSgpLlwiKSx0aGlzLmlzRW1wdHkoKX0saXNJbnRlcnNlY3Rpb25Cb3g6ZnVuY3Rpb24odCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLkJveDI6IC5pc0ludGVyc2VjdGlvbkJveCgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmludGVyc2VjdHNCb3goKS5cIiksdGhpcy5pbnRlcnNlY3RzQm94KHQpfSxzaXplOmZ1bmN0aW9uKHQpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5Cb3gyOiAuc2l6ZSgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmdldFNpemUoKS5cIiksdGhpcy5nZXRTaXplKHQpfX0pLE9iamVjdC5hc3NpZ24odHIucHJvdG90eXBlLHtjZW50ZXI6ZnVuY3Rpb24odCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLkJveDM6IC5jZW50ZXIoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5nZXRDZW50ZXIoKS5cIiksdGhpcy5nZXRDZW50ZXIodCl9LGVtcHR5OmZ1bmN0aW9uKCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLkJveDM6IC5lbXB0eSgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmlzRW1wdHkoKS5cIiksdGhpcy5pc0VtcHR5KCl9LGlzSW50ZXJzZWN0aW9uQm94OmZ1bmN0aW9uKHQpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5Cb3gzOiAuaXNJbnRlcnNlY3Rpb25Cb3goKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5pbnRlcnNlY3RzQm94KCkuXCIpLHRoaXMuaW50ZXJzZWN0c0JveCh0KX0saXNJbnRlcnNlY3Rpb25TcGhlcmU6ZnVuY3Rpb24odCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLkJveDM6IC5pc0ludGVyc2VjdGlvblNwaGVyZSgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmludGVyc2VjdHNTcGhlcmUoKS5cIiksdGhpcy5pbnRlcnNlY3RzU3BoZXJlKHQpfSxzaXplOmZ1bmN0aW9uKHQpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5Cb3gzOiAuc2l6ZSgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmdldFNpemUoKS5cIiksdGhpcy5nZXRTaXplKHQpfX0pLE9iamVjdC5hc3NpZ24oZ3IucHJvdG90eXBlLHtlbXB0eTpmdW5jdGlvbigpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5TcGhlcmU6IC5lbXB0eSgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmlzRW1wdHkoKS5cIiksdGhpcy5pc0VtcHR5KCl9fSksTG8ucHJvdG90eXBlLnNldEZyb21NYXRyaXg9ZnVuY3Rpb24odCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLkZydXN0dW06IC5zZXRGcm9tTWF0cml4KCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuc2V0RnJvbVByb2plY3Rpb25NYXRyaXgoKS5cIiksdGhpcy5zZXRGcm9tUHJvamVjdGlvbk1hdHJpeCh0KX0sR2QucHJvdG90eXBlLmNlbnRlcj1mdW5jdGlvbih0KXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuTGluZTM6IC5jZW50ZXIoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5nZXRDZW50ZXIoKS5cIiksdGhpcy5nZXRDZW50ZXIodCl9LE9iamVjdC5hc3NpZ24oem4se3JhbmRvbTE2OmZ1bmN0aW9uKCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLk1hdGg6IC5yYW5kb20xNigpIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFVzZSBNYXRoLnJhbmRvbSgpIGluc3RlYWQuXCIpLE1hdGgucmFuZG9tKCl9LG5lYXJlc3RQb3dlck9mVHdvOmZ1bmN0aW9uKHQpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5NYXRoOiAubmVhcmVzdFBvd2VyT2ZUd28oKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5mbG9vclBvd2VyT2ZUd28oKS5cIiksem4uZmxvb3JQb3dlck9mVHdvKHQpfSxuZXh0UG93ZXJPZlR3bzpmdW5jdGlvbih0KXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuTWF0aDogLm5leHRQb3dlck9mVHdvKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuY2VpbFBvd2VyT2ZUd28oKS5cIiksem4uY2VpbFBvd2VyT2ZUd28odCl9fSksT2JqZWN0LmFzc2lnbihIbi5wcm90b3R5cGUse2ZsYXR0ZW5Ub0FycmF5T2Zmc2V0OmZ1bmN0aW9uKHQsZSl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLk1hdHJpeDM6IC5mbGF0dGVuVG9BcnJheU9mZnNldCgpIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFVzZSAudG9BcnJheSgpIGluc3RlYWQuXCIpLHRoaXMudG9BcnJheSh0LGUpfSxtdWx0aXBseVZlY3RvcjM6ZnVuY3Rpb24odCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLk1hdHJpeDM6IC5tdWx0aXBseVZlY3RvcjMoKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgdmVjdG9yLmFwcGx5TWF0cml4MyggbWF0cml4ICkgaW5zdGVhZC5cIiksdC5hcHBseU1hdHJpeDModGhpcyl9LG11bHRpcGx5VmVjdG9yM0FycmF5OmZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLk1hdHJpeDM6IC5tdWx0aXBseVZlY3RvcjNBcnJheSgpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfSxhcHBseVRvQnVmZmVyQXR0cmlidXRlOmZ1bmN0aW9uKHQpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5NYXRyaXgzOiAuYXBwbHlUb0J1ZmZlckF0dHJpYnV0ZSgpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBhdHRyaWJ1dGUuYXBwbHlNYXRyaXgzKCBtYXRyaXggKSBpbnN0ZWFkLlwiKSx0LmFwcGx5TWF0cml4Myh0aGlzKX0sYXBwbHlUb1ZlY3RvcjNBcnJheTpmdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5NYXRyaXgzOiAuYXBwbHlUb1ZlY3RvcjNBcnJheSgpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfSxnZXRJbnZlcnNlOmZ1bmN0aW9uKHQpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5NYXRyaXgzOiAuZ2V0SW52ZXJzZSgpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBtYXRyaXhJbnYuY29weSggbWF0cml4ICkuaW52ZXJ0KCk7IGluc3RlYWQuXCIpLHRoaXMuY29weSh0KS5pbnZlcnQoKX19KSxPYmplY3QuYXNzaWduKFRyLnByb3RvdHlwZSx7ZXh0cmFjdFBvc2l0aW9uOmZ1bmN0aW9uKHQpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5NYXRyaXg0OiAuZXh0cmFjdFBvc2l0aW9uKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuY29weVBvc2l0aW9uKCkuXCIpLHRoaXMuY29weVBvc2l0aW9uKHQpfSxmbGF0dGVuVG9BcnJheU9mZnNldDpmdW5jdGlvbih0LGUpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5NYXRyaXg0OiAuZmxhdHRlblRvQXJyYXlPZmZzZXQoKSBoYXMgYmVlbiBkZXByZWNhdGVkLiBVc2UgLnRvQXJyYXkoKSBpbnN0ZWFkLlwiKSx0aGlzLnRvQXJyYXkodCxlKX0sZ2V0UG9zaXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuTWF0cml4NDogLmdldFBvc2l0aW9uKCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIFZlY3RvcjMuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKCBtYXRyaXggKSBpbnN0ZWFkLlwiKSwobmV3IEtuKS5zZXRGcm9tTWF0cml4Q29sdW1uKHRoaXMsMyl9LHNldFJvdGF0aW9uRnJvbVF1YXRlcm5pb246ZnVuY3Rpb24odCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLk1hdHJpeDQ6IC5zZXRSb3RhdGlvbkZyb21RdWF0ZXJuaW9uKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAubWFrZVJvdGF0aW9uRnJvbVF1YXRlcm5pb24oKS5cIiksdGhpcy5tYWtlUm90YXRpb25Gcm9tUXVhdGVybmlvbih0KX0sbXVsdGlwbHlUb0FycmF5OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuTWF0cml4NDogLm11bHRpcGx5VG9BcnJheSgpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfSxtdWx0aXBseVZlY3RvcjM6ZnVuY3Rpb24odCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLk1hdHJpeDQ6IC5tdWx0aXBseVZlY3RvcjMoKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgdmVjdG9yLmFwcGx5TWF0cml4NCggbWF0cml4ICkgaW5zdGVhZC5cIiksdC5hcHBseU1hdHJpeDQodGhpcyl9LG11bHRpcGx5VmVjdG9yNDpmdW5jdGlvbih0KXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuTWF0cml4NDogLm11bHRpcGx5VmVjdG9yNCgpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSB2ZWN0b3IuYXBwbHlNYXRyaXg0KCBtYXRyaXggKSBpbnN0ZWFkLlwiKSx0LmFwcGx5TWF0cml4NCh0aGlzKX0sbXVsdGlwbHlWZWN0b3IzQXJyYXk6ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuTWF0cml4NDogLm11bHRpcGx5VmVjdG9yM0FycmF5KCkgaGFzIGJlZW4gcmVtb3ZlZC5cIil9LHJvdGF0ZUF4aXM6ZnVuY3Rpb24odCl7Y29uc29sZS53YXJuKFwiVEhSRUUuTWF0cml4NDogLnJvdGF0ZUF4aXMoKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgVmVjdG9yMy50cmFuc2Zvcm1EaXJlY3Rpb24oIG1hdHJpeCApIGluc3RlYWQuXCIpLHQudHJhbnNmb3JtRGlyZWN0aW9uKHRoaXMpfSxjcm9zc1ZlY3RvcjpmdW5jdGlvbih0KXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuTWF0cml4NDogLmNyb3NzVmVjdG9yKCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIHZlY3Rvci5hcHBseU1hdHJpeDQoIG1hdHJpeCApIGluc3RlYWQuXCIpLHQuYXBwbHlNYXRyaXg0KHRoaXMpfSx0cmFuc2xhdGU6ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuTWF0cml4NDogLnRyYW5zbGF0ZSgpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfSxyb3RhdGVYOmZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLk1hdHJpeDQ6IC5yb3RhdGVYKCkgaGFzIGJlZW4gcmVtb3ZlZC5cIil9LHJvdGF0ZVk6ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuTWF0cml4NDogLnJvdGF0ZVkoKSBoYXMgYmVlbiByZW1vdmVkLlwiKX0scm90YXRlWjpmdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5NYXRyaXg0OiAucm90YXRlWigpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfSxyb3RhdGVCeUF4aXM6ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuTWF0cml4NDogLnJvdGF0ZUJ5QXhpcygpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfSxhcHBseVRvQnVmZmVyQXR0cmlidXRlOmZ1bmN0aW9uKHQpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5NYXRyaXg0OiAuYXBwbHlUb0J1ZmZlckF0dHJpYnV0ZSgpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBhdHRyaWJ1dGUuYXBwbHlNYXRyaXg0KCBtYXRyaXggKSBpbnN0ZWFkLlwiKSx0LmFwcGx5TWF0cml4NCh0aGlzKX0sYXBwbHlUb1ZlY3RvcjNBcnJheTpmdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5NYXRyaXg0OiAuYXBwbHlUb1ZlY3RvcjNBcnJheSgpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfSxtYWtlRnJ1c3R1bTpmdW5jdGlvbih0LGUsbixyLGksbyl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLk1hdHJpeDQ6IC5tYWtlRnJ1c3R1bSgpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSAubWFrZVBlcnNwZWN0aXZlKCBsZWZ0LCByaWdodCwgdG9wLCBib3R0b20sIG5lYXIsIGZhciApIGluc3RlYWQuXCIpLHRoaXMubWFrZVBlcnNwZWN0aXZlKHQsZSxyLG4saSxvKX0sZ2V0SW52ZXJzZTpmdW5jdGlvbih0KXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuTWF0cml4NDogLmdldEludmVyc2UoKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgbWF0cml4SW52LmNvcHkoIG1hdHJpeCApLmludmVydCgpOyBpbnN0ZWFkLlwiKSx0aGlzLmNvcHkodCkuaW52ZXJ0KCl9fSksdGkucHJvdG90eXBlLmlzSW50ZXJzZWN0aW9uTGluZT1mdW5jdGlvbih0KXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuUGxhbmU6IC5pc0ludGVyc2VjdGlvbkxpbmUoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5pbnRlcnNlY3RzTGluZSgpLlwiKSx0aGlzLmludGVyc2VjdHNMaW5lKHQpfSxPYmplY3QuYXNzaWduKEpuLnByb3RvdHlwZSx7bXVsdGlwbHlWZWN0b3IzOmZ1bmN0aW9uKHQpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5RdWF0ZXJuaW9uOiAubXVsdGlwbHlWZWN0b3IzKCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIGlzIG5vdyB2ZWN0b3IuYXBwbHlRdWF0ZXJuaW9uKCBxdWF0ZXJuaW9uICkgaW5zdGVhZC5cIiksdC5hcHBseVF1YXRlcm5pb24odGhpcyl9LGludmVyc2U6ZnVuY3Rpb24oKXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuUXVhdGVybmlvbjogLmludmVyc2UoKSBoYXMgYmVlbiByZW5hbWVkIHRvIGludmVydCgpLlwiKSx0aGlzLmludmVydCgpfX0pLE9iamVjdC5hc3NpZ24oU3IucHJvdG90eXBlLHtpc0ludGVyc2VjdGlvbkJveDpmdW5jdGlvbih0KXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuUmF5OiAuaXNJbnRlcnNlY3Rpb25Cb3goKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5pbnRlcnNlY3RzQm94KCkuXCIpLHRoaXMuaW50ZXJzZWN0c0JveCh0KX0saXNJbnRlcnNlY3Rpb25QbGFuZTpmdW5jdGlvbih0KXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuUmF5OiAuaXNJbnRlcnNlY3Rpb25QbGFuZSgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmludGVyc2VjdHNQbGFuZSgpLlwiKSx0aGlzLmludGVyc2VjdHNQbGFuZSh0KX0saXNJbnRlcnNlY3Rpb25TcGhlcmU6ZnVuY3Rpb24odCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLlJheTogLmlzSW50ZXJzZWN0aW9uU3BoZXJlKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuaW50ZXJzZWN0c1NwaGVyZSgpLlwiKSx0aGlzLmludGVyc2VjdHNTcGhlcmUodCl9fSksT2JqZWN0LmFzc2lnbihoaS5wcm90b3R5cGUse2FyZWE6ZnVuY3Rpb24oKXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuVHJpYW5nbGU6IC5hcmVhKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuZ2V0QXJlYSgpLlwiKSx0aGlzLmdldEFyZWEoKX0sYmFyeWNvb3JkRnJvbVBvaW50OmZ1bmN0aW9uKHQsZSl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLlRyaWFuZ2xlOiAuYmFyeWNvb3JkRnJvbVBvaW50KCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuZ2V0QmFyeWNvb3JkKCkuXCIpLHRoaXMuZ2V0QmFyeWNvb3JkKHQsZSl9LG1pZHBvaW50OmZ1bmN0aW9uKHQpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5UcmlhbmdsZTogLm1pZHBvaW50KCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuZ2V0TWlkcG9pbnQoKS5cIiksdGhpcy5nZXRNaWRwb2ludCh0KX0sbm9ybWFsOmZ1bmN0aW9uKHQpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5UcmlhbmdsZTogLm5vcm1hbCgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmdldE5vcm1hbCgpLlwiKSx0aGlzLmdldE5vcm1hbCh0KX0scGxhbmU6ZnVuY3Rpb24odCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLlRyaWFuZ2xlOiAucGxhbmUoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5nZXRQbGFuZSgpLlwiKSx0aGlzLmdldFBsYW5lKHQpfX0pLE9iamVjdC5hc3NpZ24oaGkse2Jhcnljb29yZEZyb21Qb2ludDpmdW5jdGlvbih0LGUsbixyLGkpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5UcmlhbmdsZTogLmJhcnljb29yZEZyb21Qb2ludCgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmdldEJhcnljb29yZCgpLlwiKSxoaS5nZXRCYXJ5Y29vcmQodCxlLG4scixpKX0sbm9ybWFsOmZ1bmN0aW9uKHQsZSxuLHIpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5UcmlhbmdsZTogLm5vcm1hbCgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmdldE5vcm1hbCgpLlwiKSxoaS5nZXROb3JtYWwodCxlLG4scil9fSksT2JqZWN0LmFzc2lnbih2aC5wcm90b3R5cGUse2V4dHJhY3RBbGxQb2ludHM6ZnVuY3Rpb24odCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLlNoYXBlOiAuZXh0cmFjdEFsbFBvaW50cygpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSAuZXh0cmFjdFBvaW50cygpIGluc3RlYWQuXCIpLHRoaXMuZXh0cmFjdFBvaW50cyh0KX0sZXh0cnVkZTpmdW5jdGlvbih0KXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuU2hhcGU6IC5leHRydWRlKCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIEV4dHJ1ZGVHZW9tZXRyeSgpIGluc3RlYWQuXCIpLG5ldyBCbCh0aGlzLHQpfSxtYWtlR2VvbWV0cnk6ZnVuY3Rpb24odCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLlNoYXBlOiAubWFrZUdlb21ldHJ5KCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIFNoYXBlR2VvbWV0cnkoKSBpbnN0ZWFkLlwiKSxuZXcgSmwodGhpcyx0KX19KSxPYmplY3QuYXNzaWduKEduLnByb3RvdHlwZSx7ZnJvbUF0dHJpYnV0ZTpmdW5jdGlvbih0LGUsbil7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLlZlY3RvcjI6IC5mcm9tQXR0cmlidXRlKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuZnJvbUJ1ZmZlckF0dHJpYnV0ZSgpLlwiKSx0aGlzLmZyb21CdWZmZXJBdHRyaWJ1dGUodCxlLG4pfSxkaXN0YW5jZVRvTWFuaGF0dGFuOmZ1bmN0aW9uKHQpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3IyOiAuZGlzdGFuY2VUb01hbmhhdHRhbigpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLm1hbmhhdHRhbkRpc3RhbmNlVG8oKS5cIiksdGhpcy5tYW5oYXR0YW5EaXN0YW5jZVRvKHQpfSxsZW5ndGhNYW5oYXR0YW46ZnVuY3Rpb24oKXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuVmVjdG9yMjogLmxlbmd0aE1hbmhhdHRhbigpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLm1hbmhhdHRhbkxlbmd0aCgpLlwiKSx0aGlzLm1hbmhhdHRhbkxlbmd0aCgpfX0pLE9iamVjdC5hc3NpZ24oS24ucHJvdG90eXBlLHtzZXRFdWxlckZyb21Sb3RhdGlvbk1hdHJpeDpmdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5WZWN0b3IzOiAuc2V0RXVsZXJGcm9tUm90YXRpb25NYXRyaXgoKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgRXVsZXIuc2V0RnJvbVJvdGF0aW9uTWF0cml4KCkgaW5zdGVhZC5cIil9LHNldEV1bGVyRnJvbVF1YXRlcm5pb246ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuVmVjdG9yMzogLnNldEV1bGVyRnJvbVF1YXRlcm5pb24oKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgRXVsZXIuc2V0RnJvbVF1YXRlcm5pb24oKSBpbnN0ZWFkLlwiKX0sZ2V0UG9zaXRpb25Gcm9tTWF0cml4OmZ1bmN0aW9uKHQpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3IzOiAuZ2V0UG9zaXRpb25Gcm9tTWF0cml4KCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKCkuXCIpLHRoaXMuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKHQpfSxnZXRTY2FsZUZyb21NYXRyaXg6ZnVuY3Rpb24odCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLlZlY3RvcjM6IC5nZXRTY2FsZUZyb21NYXRyaXgoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5zZXRGcm9tTWF0cml4U2NhbGUoKS5cIiksdGhpcy5zZXRGcm9tTWF0cml4U2NhbGUodCl9LGdldENvbHVtbkZyb21NYXRyaXg6ZnVuY3Rpb24odCxlKXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuVmVjdG9yMzogLmdldENvbHVtbkZyb21NYXRyaXgoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5zZXRGcm9tTWF0cml4Q29sdW1uKCkuXCIpLHRoaXMuc2V0RnJvbU1hdHJpeENvbHVtbihlLHQpfSxhcHBseVByb2plY3Rpb246ZnVuY3Rpb24odCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLlZlY3RvcjM6IC5hcHBseVByb2plY3Rpb24oKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgLmFwcGx5TWF0cml4NCggbSApIGluc3RlYWQuXCIpLHRoaXMuYXBwbHlNYXRyaXg0KHQpfSxmcm9tQXR0cmlidXRlOmZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuVmVjdG9yMzogLmZyb21BdHRyaWJ1dGUoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5mcm9tQnVmZmVyQXR0cmlidXRlKCkuXCIpLHRoaXMuZnJvbUJ1ZmZlckF0dHJpYnV0ZSh0LGUsbil9LGRpc3RhbmNlVG9NYW5oYXR0YW46ZnVuY3Rpb24odCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLlZlY3RvcjM6IC5kaXN0YW5jZVRvTWFuaGF0dGFuKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAubWFuaGF0dGFuRGlzdGFuY2VUbygpLlwiKSx0aGlzLm1hbmhhdHRhbkRpc3RhbmNlVG8odCl9LGxlbmd0aE1hbmhhdHRhbjpmdW5jdGlvbigpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3IzOiAubGVuZ3RoTWFuaGF0dGFuKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAubWFuaGF0dGFuTGVuZ3RoKCkuXCIpLHRoaXMubWFuaGF0dGFuTGVuZ3RoKCl9fSksT2JqZWN0LmFzc2lnbihxbi5wcm90b3R5cGUse2Zyb21BdHRyaWJ1dGU6ZnVuY3Rpb24odCxlLG4pe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3I0OiAuZnJvbUF0dHJpYnV0ZSgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmZyb21CdWZmZXJBdHRyaWJ1dGUoKS5cIiksdGhpcy5mcm9tQnVmZmVyQXR0cmlidXRlKHQsZSxuKX0sbGVuZ3RoTWFuaGF0dGFuOmZ1bmN0aW9uKCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLlZlY3RvcjQ6IC5sZW5ndGhNYW5oYXR0YW4oKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5tYW5oYXR0YW5MZW5ndGgoKS5cIiksdGhpcy5tYW5oYXR0YW5MZW5ndGgoKX19KSxPYmplY3QuYXNzaWduKGpjLnByb3RvdHlwZSx7Y29tcHV0ZVRhbmdlbnRzOmZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLkdlb21ldHJ5OiAuY29tcHV0ZVRhbmdlbnRzKCkgaGFzIGJlZW4gcmVtb3ZlZC5cIil9LGNvbXB1dGVMaW5lRGlzdGFuY2VzOmZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLkdlb21ldHJ5OiAuY29tcHV0ZUxpbmVEaXN0YW5jZXMoKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgVEhSRUUuTGluZS5jb21wdXRlTGluZURpc3RhbmNlcygpIGluc3RlYWQuXCIpfSxhcHBseU1hdHJpeDpmdW5jdGlvbih0KXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuR2VvbWV0cnk6IC5hcHBseU1hdHJpeCgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmFwcGx5TWF0cml4NCgpLlwiKSx0aGlzLmFwcGx5TWF0cml4NCh0KX19KSxPYmplY3QuYXNzaWduKEpyLnByb3RvdHlwZSx7Z2V0Q2hpbGRCeU5hbWU6ZnVuY3Rpb24odCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLk9iamVjdDNEOiAuZ2V0Q2hpbGRCeU5hbWUoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5nZXRPYmplY3RCeU5hbWUoKS5cIiksdGhpcy5nZXRPYmplY3RCeU5hbWUodCl9LHJlbmRlckRlcHRoOmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuT2JqZWN0M0Q6IC5yZW5kZXJEZXB0aCBoYXMgYmVlbiByZW1vdmVkLiBVc2UgLnJlbmRlck9yZGVyLCBpbnN0ZWFkLlwiKX0sdHJhbnNsYXRlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLk9iamVjdDNEOiAudHJhbnNsYXRlKCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIC50cmFuc2xhdGVPbkF4aXMoIGF4aXMsIGRpc3RhbmNlICkgaW5zdGVhZC5cIiksdGhpcy50cmFuc2xhdGVPbkF4aXMoZSx0KX0sZ2V0V29ybGRSb3RhdGlvbjpmdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5PYmplY3QzRDogLmdldFdvcmxkUm90YXRpb24oKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgVEhSRUUuT2JqZWN0M0QuZ2V0V29ybGRRdWF0ZXJuaW9uKCB0YXJnZXQgKSBpbnN0ZWFkLlwiKX0sYXBwbHlNYXRyaXg6ZnVuY3Rpb24odCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLk9iamVjdDNEOiAuYXBwbHlNYXRyaXgoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5hcHBseU1hdHJpeDQoKS5cIiksdGhpcy5hcHBseU1hdHJpeDQodCl9fSksT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoSnIucHJvdG90eXBlLHtldWxlck9yZGVyOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuT2JqZWN0M0Q6IC5ldWxlck9yZGVyIGlzIG5vdyAucm90YXRpb24ub3JkZXIuXCIpLHRoaXMucm90YXRpb24ub3JkZXJ9LHNldDpmdW5jdGlvbih0KXtjb25zb2xlLndhcm4oXCJUSFJFRS5PYmplY3QzRDogLmV1bGVyT3JkZXIgaXMgbm93IC5yb3RhdGlvbi5vcmRlci5cIiksdGhpcy5yb3RhdGlvbi5vcmRlcj10fX0sdXNlUXVhdGVybmlvbjp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuT2JqZWN0M0Q6IC51c2VRdWF0ZXJuaW9uIGhhcyBiZWVuIHJlbW92ZWQuIFRoZSBsaWJyYXJ5IG5vdyB1c2VzIHF1YXRlcm5pb25zIGJ5IGRlZmF1bHQuXCIpfSxzZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5PYmplY3QzRDogLnVzZVF1YXRlcm5pb24gaGFzIGJlZW4gcmVtb3ZlZC4gVGhlIGxpYnJhcnkgbm93IHVzZXMgcXVhdGVybmlvbnMgYnkgZGVmYXVsdC5cIil9fX0pLE9iamVjdC5hc3NpZ24oaG8ucHJvdG90eXBlLHtzZXREcmF3TW9kZTpmdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5NZXNoOiAuc2V0RHJhd01vZGUoKSBoYXMgYmVlbiByZW1vdmVkLiBUaGUgcmVuZGVyZXIgbm93IGFsd2F5cyBhc3N1bWVzIFRIUkVFLlRyaWFuZ2xlc0RyYXdNb2RlLiBUcmFuc2Zvcm0geW91ciBnZW9tZXRyeSB2aWEgQnVmZmVyR2VvbWV0cnlVdGlscy50b1RyaWFuZ2xlc0RyYXdNb2RlKCkgaWYgbmVjZXNzYXJ5LlwiKX19KSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhoby5wcm90b3R5cGUse2RyYXdNb2RlOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gY29uc29sZS5lcnJvcihcIlRIUkVFLk1lc2g6IC5kcmF3TW9kZSBoYXMgYmVlbiByZW1vdmVkLiBUaGUgcmVuZGVyZXIgbm93IGFsd2F5cyBhc3N1bWVzIFRIUkVFLlRyaWFuZ2xlc0RyYXdNb2RlLlwiKSxxZX0sc2V0OmZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLk1lc2g6IC5kcmF3TW9kZSBoYXMgYmVlbiByZW1vdmVkLiBUaGUgcmVuZGVyZXIgbm93IGFsd2F5cyBhc3N1bWVzIFRIUkVFLlRyaWFuZ2xlc0RyYXdNb2RlLiBUcmFuc2Zvcm0geW91ciBnZW9tZXRyeSB2aWEgQnVmZmVyR2VvbWV0cnlVdGlscy50b1RyaWFuZ2xlc0RyYXdNb2RlKCkgaWYgbmVjZXNzYXJ5LlwiKX19fSksT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoc2MucHJvdG90eXBlLHtvYmplY3RzOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuTE9EOiAub2JqZWN0cyBoYXMgYmVlbiByZW5hbWVkIHRvIC5sZXZlbHMuXCIpLHRoaXMubGV2ZWxzfX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZGMucHJvdG90eXBlLFwidXNlVmVydGV4VGV4dHVyZVwiLHtnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5Ta2VsZXRvbjogdXNlVmVydGV4VGV4dHVyZSBoYXMgYmVlbiByZW1vdmVkLlwiKX0sc2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuU2tlbGV0b246IHVzZVZlcnRleFRleHR1cmUgaGFzIGJlZW4gcmVtb3ZlZC5cIil9fSksY2MucHJvdG90eXBlLmluaXRCb25lcz1mdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5Ta2lubmVkTWVzaDogaW5pdEJvbmVzKCkgaGFzIGJlZW4gcmVtb3ZlZC5cIil9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShadS5wcm90b3R5cGUsXCJfX2FyY0xlbmd0aERpdmlzaW9uc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuQ3VydmU6IC5fX2FyY0xlbmd0aERpdmlzaW9ucyBpcyBub3cgLmFyY0xlbmd0aERpdmlzaW9ucy5cIiksdGhpcy5hcmNMZW5ndGhEaXZpc2lvbnN9LHNldDpmdW5jdGlvbih0KXtjb25zb2xlLndhcm4oXCJUSFJFRS5DdXJ2ZTogLl9fYXJjTGVuZ3RoRGl2aXNpb25zIGlzIG5vdyAuYXJjTGVuZ3RoRGl2aXNpb25zLlwiKSx0aGlzLmFyY0xlbmd0aERpdmlzaW9ucz10fX0pLHdvLnByb3RvdHlwZS5zZXRMZW5zPWZ1bmN0aW9uKHQsZSl7Y29uc29sZS53YXJuKFwiVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEuc2V0TGVucyBpcyBkZXByZWNhdGVkLiBVc2UgLnNldEZvY2FsTGVuZ3RoIGFuZCAuZmlsbUdhdWdlIGZvciBhIHBob3RvZ3JhcGhpYyBzZXR1cC5cIiksdm9pZCAwIT09ZSYmKHRoaXMuZmlsbUdhdWdlPWUpLHRoaXMuc2V0Rm9jYWxMZW5ndGgodCl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHloLnByb3RvdHlwZSx7b25seVNoYWRvdzp7c2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuTGlnaHQ6IC5vbmx5U2hhZG93IGhhcyBiZWVuIHJlbW92ZWQuXCIpfX0sc2hhZG93Q2FtZXJhRm92OntzZXQ6ZnVuY3Rpb24odCl7Y29uc29sZS53YXJuKFwiVEhSRUUuTGlnaHQ6IC5zaGFkb3dDYW1lcmFGb3YgaXMgbm93IC5zaGFkb3cuY2FtZXJhLmZvdi5cIiksdGhpcy5zaGFkb3cuY2FtZXJhLmZvdj10fX0sc2hhZG93Q2FtZXJhTGVmdDp7c2V0OmZ1bmN0aW9uKHQpe2NvbnNvbGUud2FybihcIlRIUkVFLkxpZ2h0OiAuc2hhZG93Q2FtZXJhTGVmdCBpcyBub3cgLnNoYWRvdy5jYW1lcmEubGVmdC5cIiksdGhpcy5zaGFkb3cuY2FtZXJhLmxlZnQ9dH19LHNoYWRvd0NhbWVyYVJpZ2h0OntzZXQ6ZnVuY3Rpb24odCl7Y29uc29sZS53YXJuKFwiVEhSRUUuTGlnaHQ6IC5zaGFkb3dDYW1lcmFSaWdodCBpcyBub3cgLnNoYWRvdy5jYW1lcmEucmlnaHQuXCIpLHRoaXMuc2hhZG93LmNhbWVyYS5yaWdodD10fX0sc2hhZG93Q2FtZXJhVG9wOntzZXQ6ZnVuY3Rpb24odCl7Y29uc29sZS53YXJuKFwiVEhSRUUuTGlnaHQ6IC5zaGFkb3dDYW1lcmFUb3AgaXMgbm93IC5zaGFkb3cuY2FtZXJhLnRvcC5cIiksdGhpcy5zaGFkb3cuY2FtZXJhLnRvcD10fX0sc2hhZG93Q2FtZXJhQm90dG9tOntzZXQ6ZnVuY3Rpb24odCl7Y29uc29sZS53YXJuKFwiVEhSRUUuTGlnaHQ6IC5zaGFkb3dDYW1lcmFCb3R0b20gaXMgbm93IC5zaGFkb3cuY2FtZXJhLmJvdHRvbS5cIiksdGhpcy5zaGFkb3cuY2FtZXJhLmJvdHRvbT10fX0sc2hhZG93Q2FtZXJhTmVhcjp7c2V0OmZ1bmN0aW9uKHQpe2NvbnNvbGUud2FybihcIlRIUkVFLkxpZ2h0OiAuc2hhZG93Q2FtZXJhTmVhciBpcyBub3cgLnNoYWRvdy5jYW1lcmEubmVhci5cIiksdGhpcy5zaGFkb3cuY2FtZXJhLm5lYXI9dH19LHNoYWRvd0NhbWVyYUZhcjp7c2V0OmZ1bmN0aW9uKHQpe2NvbnNvbGUud2FybihcIlRIUkVFLkxpZ2h0OiAuc2hhZG93Q2FtZXJhRmFyIGlzIG5vdyAuc2hhZG93LmNhbWVyYS5mYXIuXCIpLHRoaXMuc2hhZG93LmNhbWVyYS5mYXI9dH19LHNoYWRvd0NhbWVyYVZpc2libGU6e3NldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLkxpZ2h0OiAuc2hhZG93Q2FtZXJhVmlzaWJsZSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgbmV3IFRIUkVFLkNhbWVyYUhlbHBlciggbGlnaHQuc2hhZG93LmNhbWVyYSApIGluc3RlYWQuXCIpfX0sc2hhZG93Qmlhczp7c2V0OmZ1bmN0aW9uKHQpe2NvbnNvbGUud2FybihcIlRIUkVFLkxpZ2h0OiAuc2hhZG93QmlhcyBpcyBub3cgLnNoYWRvdy5iaWFzLlwiKSx0aGlzLnNoYWRvdy5iaWFzPXR9fSxzaGFkb3dEYXJrbmVzczp7c2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuTGlnaHQ6IC5zaGFkb3dEYXJrbmVzcyBoYXMgYmVlbiByZW1vdmVkLlwiKX19LHNoYWRvd01hcFdpZHRoOntzZXQ6ZnVuY3Rpb24odCl7Y29uc29sZS53YXJuKFwiVEhSRUUuTGlnaHQ6IC5zaGFkb3dNYXBXaWR0aCBpcyBub3cgLnNoYWRvdy5tYXBTaXplLndpZHRoLlwiKSx0aGlzLnNoYWRvdy5tYXBTaXplLndpZHRoPXR9fSxzaGFkb3dNYXBIZWlnaHQ6e3NldDpmdW5jdGlvbih0KXtjb25zb2xlLndhcm4oXCJUSFJFRS5MaWdodDogLnNoYWRvd01hcEhlaWdodCBpcyBub3cgLnNoYWRvdy5tYXBTaXplLmhlaWdodC5cIiksdGhpcy5zaGFkb3cubWFwU2l6ZS5oZWlnaHQ9dH19fSksT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoVGkucHJvdG90eXBlLHtsZW5ndGg6e2dldDpmdW5jdGlvbigpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5CdWZmZXJBdHRyaWJ1dGU6IC5sZW5ndGggaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlIC5jb3VudCBpbnN0ZWFkLlwiKSx0aGlzLmFycmF5Lmxlbmd0aH19LGR5bmFtaWM6e2dldDpmdW5jdGlvbigpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5CdWZmZXJBdHRyaWJ1dGU6IC5keW5hbWljIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFVzZSAudXNhZ2UgaW5zdGVhZC5cIiksdGhpcy51c2FnZT09PUVufSxzZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5CdWZmZXJBdHRyaWJ1dGU6IC5keW5hbWljIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFVzZSAudXNhZ2UgaW5zdGVhZC5cIiksdGhpcy5zZXRVc2FnZShFbil9fX0pLE9iamVjdC5hc3NpZ24oVGkucHJvdG90eXBlLHtzZXREeW5hbWljOmZ1bmN0aW9uKHQpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5CdWZmZXJBdHRyaWJ1dGU6IC5zZXREeW5hbWljKCkgaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlIC5zZXRVc2FnZSgpIGluc3RlYWQuXCIpLHRoaXMuc2V0VXNhZ2UoITA9PT10P0VuOlRuKSx0aGlzfSxjb3B5SW5kaWNlc0FycmF5OmZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLkJ1ZmZlckF0dHJpYnV0ZTogLmNvcHlJbmRpY2VzQXJyYXkoKSBoYXMgYmVlbiByZW1vdmVkLlwiKX0sc2V0QXJyYXk6ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuQnVmZmVyQXR0cmlidXRlOiAuc2V0QXJyYXkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIEJ1ZmZlckdlb21ldHJ5IC5zZXRBdHRyaWJ1dGUgdG8gcmVwbGFjZS9yZXNpemUgYXR0cmlidXRlIGJ1ZmZlcnNcIil9fSksT2JqZWN0LmFzc2lnbihxaS5wcm90b3R5cGUse2FkZEluZGV4OmZ1bmN0aW9uKHQpe2NvbnNvbGUud2FybihcIlRIUkVFLkJ1ZmZlckdlb21ldHJ5OiAuYWRkSW5kZXgoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5zZXRJbmRleCgpLlwiKSx0aGlzLnNldEluZGV4KHQpfSxhZGRBdHRyaWJ1dGU6ZnVuY3Rpb24odCxlKXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuQnVmZmVyR2VvbWV0cnk6IC5hZGRBdHRyaWJ1dGUoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5zZXRBdHRyaWJ1dGUoKS5cIiksZSYmZS5pc0J1ZmZlckF0dHJpYnV0ZXx8ZSYmZS5pc0ludGVybGVhdmVkQnVmZmVyQXR0cmlidXRlP1wiaW5kZXhcIj09PXQ/KGNvbnNvbGUud2FybihcIlRIUkVFLkJ1ZmZlckdlb21ldHJ5LmFkZEF0dHJpYnV0ZTogVXNlIC5zZXRJbmRleCgpIGZvciBpbmRleCBhdHRyaWJ1dGUuXCIpLHRoaXMuc2V0SW5kZXgoZSksdGhpcyk6dGhpcy5zZXRBdHRyaWJ1dGUodCxlKTooY29uc29sZS53YXJuKFwiVEhSRUUuQnVmZmVyR2VvbWV0cnk6IC5hZGRBdHRyaWJ1dGUoKSBub3cgZXhwZWN0cyAoIG5hbWUsIGF0dHJpYnV0ZSApLlwiKSx0aGlzLnNldEF0dHJpYnV0ZSh0LG5ldyBUaShhcmd1bWVudHNbMV0sYXJndW1lbnRzWzJdKSkpfSxhZGREcmF3Q2FsbDpmdW5jdGlvbih0LGUsbil7dm9pZCAwIT09biYmY29uc29sZS53YXJuKFwiVEhSRUUuQnVmZmVyR2VvbWV0cnk6IC5hZGREcmF3Q2FsbCgpIG5vIGxvbmdlciBzdXBwb3J0cyBpbmRleE9mZnNldC5cIiksY29uc29sZS53YXJuKFwiVEhSRUUuQnVmZmVyR2VvbWV0cnk6IC5hZGREcmF3Q2FsbCgpIGlzIG5vdyAuYWRkR3JvdXAoKS5cIiksdGhpcy5hZGRHcm91cCh0LGUpfSxjbGVhckRyYXdDYWxsczpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLkJ1ZmZlckdlb21ldHJ5OiAuY2xlYXJEcmF3Q2FsbHMoKSBpcyBub3cgLmNsZWFyR3JvdXBzKCkuXCIpLHRoaXMuY2xlYXJHcm91cHMoKX0sY29tcHV0ZVRhbmdlbnRzOmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuQnVmZmVyR2VvbWV0cnk6IC5jb21wdXRlVGFuZ2VudHMoKSBoYXMgYmVlbiByZW1vdmVkLlwiKX0sY29tcHV0ZU9mZnNldHM6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5CdWZmZXJHZW9tZXRyeTogLmNvbXB1dGVPZmZzZXRzKCkgaGFzIGJlZW4gcmVtb3ZlZC5cIil9LHJlbW92ZUF0dHJpYnV0ZTpmdW5jdGlvbih0KXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuQnVmZmVyR2VvbWV0cnk6IC5yZW1vdmVBdHRyaWJ1dGUoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5kZWxldGVBdHRyaWJ1dGUoKS5cIiksdGhpcy5kZWxldGVBdHRyaWJ1dGUodCl9LGFwcGx5TWF0cml4OmZ1bmN0aW9uKHQpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5CdWZmZXJHZW9tZXRyeTogLmFwcGx5TWF0cml4KCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuYXBwbHlNYXRyaXg0KCkuXCIpLHRoaXMuYXBwbHlNYXRyaXg0KHQpfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHFpLnByb3RvdHlwZSx7ZHJhd2NhbGxzOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gY29uc29sZS5lcnJvcihcIlRIUkVFLkJ1ZmZlckdlb21ldHJ5OiAuZHJhd2NhbGxzIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmdyb3Vwcy5cIiksdGhpcy5ncm91cHN9fSxvZmZzZXRzOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuQnVmZmVyR2VvbWV0cnk6IC5vZmZzZXRzIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmdyb3Vwcy5cIiksdGhpcy5ncm91cHN9fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKE5oLnByb3RvdHlwZSx7bWF4SW5zdGFuY2VkQ291bnQ6e2dldDpmdW5jdGlvbigpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5JbnN0YW5jZWRCdWZmZXJHZW9tZXRyeTogLm1heEluc3RhbmNlZENvdW50IGhhcyBiZWVuIHJlbmFtZWQgdG8gLmluc3RhbmNlQ291bnQuXCIpLHRoaXMuaW5zdGFuY2VDb3VudH0sc2V0OmZ1bmN0aW9uKHQpe2NvbnNvbGUud2FybihcIlRIUkVFLkluc3RhbmNlZEJ1ZmZlckdlb21ldHJ5OiAubWF4SW5zdGFuY2VkQ291bnQgaGFzIGJlZW4gcmVuYW1lZCB0byAuaW5zdGFuY2VDb3VudC5cIiksdGhpcy5pbnN0YW5jZUNvdW50PXR9fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKENkLnByb3RvdHlwZSx7bGluZVByZWNpc2lvbjp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLlJheWNhc3RlcjogLmxpbmVQcmVjaXNpb24gaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlIC5wYXJhbXMuTGluZS50aHJlc2hvbGQgaW5zdGVhZC5cIiksdGhpcy5wYXJhbXMuTGluZS50aHJlc2hvbGR9LHNldDpmdW5jdGlvbih0KXtjb25zb2xlLndhcm4oXCJUSFJFRS5SYXljYXN0ZXI6IC5saW5lUHJlY2lzaW9uIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFVzZSAucGFyYW1zLkxpbmUudGhyZXNob2xkIGluc3RlYWQuXCIpLHRoaXMucGFyYW1zLkxpbmUudGhyZXNob2xkPXR9fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKEdzLnByb3RvdHlwZSx7ZHluYW1pYzp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLkludGVybGVhdmVkQnVmZmVyOiAubGVuZ3RoIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFVzZSAudXNhZ2UgaW5zdGVhZC5cIiksdGhpcy51c2FnZT09PUVufSxzZXQ6ZnVuY3Rpb24odCl7Y29uc29sZS53YXJuKFwiVEhSRUUuSW50ZXJsZWF2ZWRCdWZmZXI6IC5sZW5ndGggaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlIC51c2FnZSBpbnN0ZWFkLlwiKSx0aGlzLnNldFVzYWdlKHQpfX19KSxPYmplY3QuYXNzaWduKEdzLnByb3RvdHlwZSx7c2V0RHluYW1pYzpmdW5jdGlvbih0KXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuSW50ZXJsZWF2ZWRCdWZmZXI6IC5zZXREeW5hbWljKCkgaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlIC5zZXRVc2FnZSgpIGluc3RlYWQuXCIpLHRoaXMuc2V0VXNhZ2UoITA9PT10P0VuOlRuKSx0aGlzfSxzZXRBcnJheTpmdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5JbnRlcmxlYXZlZEJ1ZmZlcjogLnNldEFycmF5IGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBCdWZmZXJHZW9tZXRyeSAuc2V0QXR0cmlidXRlIHRvIHJlcGxhY2UvcmVzaXplIGF0dHJpYnV0ZSBidWZmZXJzXCIpfX0pLE9iamVjdC5hc3NpZ24oTmwucHJvdG90eXBlLHtnZXRBcnJheXM6ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuRXh0cnVkZUJ1ZmZlckdlb21ldHJ5OiAuZ2V0QXJyYXlzKCkgaGFzIGJlZW4gcmVtb3ZlZC5cIil9LGFkZFNoYXBlTGlzdDpmdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5FeHRydWRlQnVmZmVyR2VvbWV0cnk6IC5hZGRTaGFwZUxpc3QoKSBoYXMgYmVlbiByZW1vdmVkLlwiKX0sYWRkU2hhcGU6ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuRXh0cnVkZUJ1ZmZlckdlb21ldHJ5OiAuYWRkU2hhcGUoKSBoYXMgYmVlbiByZW1vdmVkLlwiKX19KSxPYmplY3QuYXNzaWduKHpzLnByb3RvdHlwZSx7ZGlzcG9zZTpmdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5TY2VuZTogLmRpc3Bvc2UoKSBoYXMgYmVlbiByZW1vdmVkLlwiKX19KSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhMZC5wcm90b3R5cGUse2R5bmFtaWM6e3NldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLlVuaWZvcm06IC5keW5hbWljIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBvYmplY3Qub25CZWZvcmVSZW5kZXIoKSBpbnN0ZWFkLlwiKX19LG9uVXBkYXRlOnt2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5Vbmlmb3JtOiAub25VcGRhdGUoKSBoYXMgYmVlbiByZW1vdmVkLiBVc2Ugb2JqZWN0Lm9uQmVmb3JlUmVuZGVyKCkgaW5zdGVhZC5cIiksdGhpc319fSksT2JqZWN0LmRlZmluZVByb3BlcnRpZXMod2kucHJvdG90eXBlLHt3cmFwQXJvdW5kOntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5NYXRlcmlhbDogLndyYXBBcm91bmQgaGFzIGJlZW4gcmVtb3ZlZC5cIil9LHNldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLk1hdGVyaWFsOiAud3JhcEFyb3VuZCBoYXMgYmVlbiByZW1vdmVkLlwiKX19LG92ZXJkcmF3OntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5NYXRlcmlhbDogLm92ZXJkcmF3IGhhcyBiZWVuIHJlbW92ZWQuXCIpfSxzZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5NYXRlcmlhbDogLm92ZXJkcmF3IGhhcyBiZWVuIHJlbW92ZWQuXCIpfX0sd3JhcFJHQjp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLk1hdGVyaWFsOiAud3JhcFJHQiBoYXMgYmVlbiByZW1vdmVkLlwiKSxuZXcgeWl9fSxzaGFkaW5nOntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuXCIrdGhpcy50eXBlK1wiOiAuc2hhZGluZyBoYXMgYmVlbiByZW1vdmVkLiBVc2UgdGhlIGJvb2xlYW4gLmZsYXRTaGFkaW5nIGluc3RlYWQuXCIpfSxzZXQ6ZnVuY3Rpb24odCl7Y29uc29sZS53YXJuKFwiVEhSRUUuXCIrdGhpcy50eXBlK1wiOiAuc2hhZGluZyBoYXMgYmVlbiByZW1vdmVkLiBVc2UgdGhlIGJvb2xlYW4gLmZsYXRTaGFkaW5nIGluc3RlYWQuXCIpLHRoaXMuZmxhdFNoYWRpbmc9dD09PXZ9fSxzdGVuY2lsTWFzazp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLlwiK3RoaXMudHlwZStcIjogLnN0ZW5jaWxNYXNrIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSAuc3RlbmNpbEZ1bmNNYXNrIGluc3RlYWQuXCIpLHRoaXMuc3RlbmNpbEZ1bmNNYXNrfSxzZXQ6ZnVuY3Rpb24odCl7Y29uc29sZS53YXJuKFwiVEhSRUUuXCIrdGhpcy50eXBlK1wiOiAuc3RlbmNpbE1hc2sgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIC5zdGVuY2lsRnVuY01hc2sgaW5zdGVhZC5cIiksdGhpcy5zdGVuY2lsRnVuY01hc2s9dH19fSksT2JqZWN0LmRlZmluZVByb3BlcnRpZXMobXUucHJvdG90eXBlLHttZXRhbDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsOiAubWV0YWwgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIFRIUkVFLk1lc2hTdGFuZGFyZE1hdGVyaWFsIGluc3RlYWQuXCIpLCExfSxzZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5NZXNoUGhvbmdNYXRlcmlhbDogLm1ldGFsIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBUSFJFRS5NZXNoU3RhbmRhcmRNYXRlcmlhbCBpbnN0ZWFkXCIpfX19KSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhmdS5wcm90b3R5cGUse3RyYW5zcGFyZW5jeTp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLk1lc2hQaHlzaWNhbE1hdGVyaWFsOiAudHJhbnNwYXJlbmN5IGhhcyBiZWVuIHJlbmFtZWQgdG8gLnRyYW5zbWlzc2lvbi5cIiksdGhpcy50cmFuc21pc3Npb259LHNldDpmdW5jdGlvbih0KXtjb25zb2xlLndhcm4oXCJUSFJFRS5NZXNoUGh5c2ljYWxNYXRlcmlhbDogLnRyYW5zcGFyZW5jeSBoYXMgYmVlbiByZW5hbWVkIHRvIC50cmFuc21pc3Npb24uXCIpLHRoaXMudHJhbnNtaXNzaW9uPXR9fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHhvLnByb3RvdHlwZSx7ZGVyaXZhdGl2ZXM6e2dldDpmdW5jdGlvbigpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5TaGFkZXJNYXRlcmlhbDogLmRlcml2YXRpdmVzIGhhcyBiZWVuIG1vdmVkIHRvIC5leHRlbnNpb25zLmRlcml2YXRpdmVzLlwiKSx0aGlzLmV4dGVuc2lvbnMuZGVyaXZhdGl2ZXN9LHNldDpmdW5jdGlvbih0KXtjb25zb2xlLndhcm4oXCJUSFJFRS4gU2hhZGVyTWF0ZXJpYWw6IC5kZXJpdmF0aXZlcyBoYXMgYmVlbiBtb3ZlZCB0byAuZXh0ZW5zaW9ucy5kZXJpdmF0aXZlcy5cIiksdGhpcy5leHRlbnNpb25zLmRlcml2YXRpdmVzPXR9fX0pLE9iamVjdC5hc3NpZ24oRHMucHJvdG90eXBlLHtjbGVhclRhcmdldDpmdW5jdGlvbih0LGUsbixyKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuY2xlYXJUYXJnZXQoKSBoYXMgYmVlbiBkZXByZWNhdGVkLiBVc2UgLnNldFJlbmRlclRhcmdldCgpIGFuZCAuY2xlYXIoKSBpbnN0ZWFkLlwiKSx0aGlzLnNldFJlbmRlclRhcmdldCh0KSx0aGlzLmNsZWFyKGUsbixyKX0sYW5pbWF0ZTpmdW5jdGlvbih0KXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuYW5pbWF0ZSgpIGlzIG5vdyAuc2V0QW5pbWF0aW9uTG9vcCgpLlwiKSx0aGlzLnNldEFuaW1hdGlvbkxvb3AodCl9LGdldEN1cnJlbnRSZW5kZXJUYXJnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLmdldEN1cnJlbnRSZW5kZXJUYXJnZXQoKSBpcyBub3cgLmdldFJlbmRlclRhcmdldCgpLlwiKSx0aGlzLmdldFJlbmRlclRhcmdldCgpfSxnZXRNYXhBbmlzb3Ryb3B5OmZ1bmN0aW9uKCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5nZXRNYXhBbmlzb3Ryb3B5KCkgaXMgbm93IC5jYXBhYmlsaXRpZXMuZ2V0TWF4QW5pc290cm9weSgpLlwiKSx0aGlzLmNhcGFiaWxpdGllcy5nZXRNYXhBbmlzb3Ryb3B5KCl9LGdldFByZWNpc2lvbjpmdW5jdGlvbigpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuZ2V0UHJlY2lzaW9uKCkgaXMgbm93IC5jYXBhYmlsaXRpZXMucHJlY2lzaW9uLlwiKSx0aGlzLmNhcGFiaWxpdGllcy5wcmVjaXNpb259LHJlc2V0R0xTdGF0ZTpmdW5jdGlvbigpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAucmVzZXRHTFN0YXRlKCkgaXMgbm93IC5zdGF0ZS5yZXNldCgpLlwiKSx0aGlzLnN0YXRlLnJlc2V0KCl9LHN1cHBvcnRzRmxvYXRUZXh0dXJlczpmdW5jdGlvbigpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuc3VwcG9ydHNGbG9hdFRleHR1cmVzKCkgaXMgbm93IC5leHRlbnNpb25zLmdldCggJ09FU190ZXh0dXJlX2Zsb2F0JyApLlwiKSx0aGlzLmV4dGVuc2lvbnMuZ2V0KFwiT0VTX3RleHR1cmVfZmxvYXRcIil9LHN1cHBvcnRzSGFsZkZsb2F0VGV4dHVyZXM6ZnVuY3Rpb24oKXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLnN1cHBvcnRzSGFsZkZsb2F0VGV4dHVyZXMoKSBpcyBub3cgLmV4dGVuc2lvbnMuZ2V0KCAnT0VTX3RleHR1cmVfaGFsZl9mbG9hdCcgKS5cIiksdGhpcy5leHRlbnNpb25zLmdldChcIk9FU190ZXh0dXJlX2hhbGZfZmxvYXRcIil9LHN1cHBvcnRzU3RhbmRhcmREZXJpdmF0aXZlczpmdW5jdGlvbigpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuc3VwcG9ydHNTdGFuZGFyZERlcml2YXRpdmVzKCkgaXMgbm93IC5leHRlbnNpb25zLmdldCggJ09FU19zdGFuZGFyZF9kZXJpdmF0aXZlcycgKS5cIiksdGhpcy5leHRlbnNpb25zLmdldChcIk9FU19zdGFuZGFyZF9kZXJpdmF0aXZlc1wiKX0sc3VwcG9ydHNDb21wcmVzc2VkVGV4dHVyZVMzVEM6ZnVuY3Rpb24oKXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLnN1cHBvcnRzQ29tcHJlc3NlZFRleHR1cmVTM1RDKCkgaXMgbm93IC5leHRlbnNpb25zLmdldCggJ1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9zM3RjJyApLlwiKSx0aGlzLmV4dGVuc2lvbnMuZ2V0KFwiV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3MzdGNcIil9LHN1cHBvcnRzQ29tcHJlc3NlZFRleHR1cmVQVlJUQzpmdW5jdGlvbigpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuc3VwcG9ydHNDb21wcmVzc2VkVGV4dHVyZVBWUlRDKCkgaXMgbm93IC5leHRlbnNpb25zLmdldCggJ1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9wdnJ0YycgKS5cIiksdGhpcy5leHRlbnNpb25zLmdldChcIldFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9wdnJ0Y1wiKX0sc3VwcG9ydHNCbGVuZE1pbk1heDpmdW5jdGlvbigpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuc3VwcG9ydHNCbGVuZE1pbk1heCgpIGlzIG5vdyAuZXh0ZW5zaW9ucy5nZXQoICdFWFRfYmxlbmRfbWlubWF4JyApLlwiKSx0aGlzLmV4dGVuc2lvbnMuZ2V0KFwiRVhUX2JsZW5kX21pbm1heFwiKX0sc3VwcG9ydHNWZXJ0ZXhUZXh0dXJlczpmdW5jdGlvbigpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuc3VwcG9ydHNWZXJ0ZXhUZXh0dXJlcygpIGlzIG5vdyAuY2FwYWJpbGl0aWVzLnZlcnRleFRleHR1cmVzLlwiKSx0aGlzLmNhcGFiaWxpdGllcy52ZXJ0ZXhUZXh0dXJlc30sc3VwcG9ydHNJbnN0YW5jZWRBcnJheXM6ZnVuY3Rpb24oKXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLnN1cHBvcnRzSW5zdGFuY2VkQXJyYXlzKCkgaXMgbm93IC5leHRlbnNpb25zLmdldCggJ0FOR0xFX2luc3RhbmNlZF9hcnJheXMnICkuXCIpLHRoaXMuZXh0ZW5zaW9ucy5nZXQoXCJBTkdMRV9pbnN0YW5jZWRfYXJyYXlzXCIpfSxlbmFibGVTY2lzc29yVGVzdDpmdW5jdGlvbih0KXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuZW5hYmxlU2Npc3NvclRlc3QoKSBpcyBub3cgLnNldFNjaXNzb3JUZXN0KCkuXCIpLHRoaXMuc2V0U2Npc3NvclRlc3QodCl9LGluaXRNYXRlcmlhbDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5pbml0TWF0ZXJpYWwoKSBoYXMgYmVlbiByZW1vdmVkLlwiKX0sYWRkUHJlUGx1Z2luOmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLmFkZFByZVBsdWdpbigpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfSxhZGRQb3N0UGx1Z2luOmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLmFkZFBvc3RQbHVnaW4oKSBoYXMgYmVlbiByZW1vdmVkLlwiKX0sdXBkYXRlU2hhZG93TWFwOmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLnVwZGF0ZVNoYWRvd01hcCgpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfSxzZXRGYWNlQ3VsbGluZzpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5zZXRGYWNlQ3VsbGluZygpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfSxhbGxvY1RleHR1cmVVbml0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLmFsbG9jVGV4dHVyZVVuaXQoKSBoYXMgYmVlbiByZW1vdmVkLlwiKX0sc2V0VGV4dHVyZTpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5zZXRUZXh0dXJlKCkgaGFzIGJlZW4gcmVtb3ZlZC5cIil9LHNldFRleHR1cmUyRDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5zZXRUZXh0dXJlMkQoKSBoYXMgYmVlbiByZW1vdmVkLlwiKX0sc2V0VGV4dHVyZUN1YmU6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuc2V0VGV4dHVyZUN1YmUoKSBoYXMgYmVlbiByZW1vdmVkLlwiKX0sZ2V0QWN0aXZlTWlwTWFwTGV2ZWw6ZnVuY3Rpb24oKXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLmdldEFjdGl2ZU1pcE1hcExldmVsKCkgaXMgbm93IC5nZXRBY3RpdmVNaXBtYXBMZXZlbCgpLlwiKSx0aGlzLmdldEFjdGl2ZU1pcG1hcExldmVsKCl9fSksT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoRHMucHJvdG90eXBlLHtzaGFkb3dNYXBFbmFibGVkOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zaGFkb3dNYXAuZW5hYmxlZH0sc2V0OmZ1bmN0aW9uKHQpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5zaGFkb3dNYXBFbmFibGVkIGlzIG5vdyAuc2hhZG93TWFwLmVuYWJsZWQuXCIpLHRoaXMuc2hhZG93TWFwLmVuYWJsZWQ9dH19LHNoYWRvd01hcFR5cGU6e2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNoYWRvd01hcC50eXBlfSxzZXQ6ZnVuY3Rpb24odCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLnNoYWRvd01hcFR5cGUgaXMgbm93IC5zaGFkb3dNYXAudHlwZS5cIiksdGhpcy5zaGFkb3dNYXAudHlwZT10fX0sc2hhZG93TWFwQ3VsbEZhY2U6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5zaGFkb3dNYXBDdWxsRmFjZSBoYXMgYmVlbiByZW1vdmVkLiBTZXQgTWF0ZXJpYWwuc2hhZG93U2lkZSBpbnN0ZWFkLlwiKX0sc2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLnNoYWRvd01hcEN1bGxGYWNlIGhhcyBiZWVuIHJlbW92ZWQuIFNldCBNYXRlcmlhbC5zaGFkb3dTaWRlIGluc3RlYWQuXCIpfX0sY29udGV4dDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5jb250ZXh0IGhhcyBiZWVuIHJlbW92ZWQuIFVzZSAuZ2V0Q29udGV4dCgpIGluc3RlYWQuXCIpLHRoaXMuZ2V0Q29udGV4dCgpfX0sdnI6e2dldDpmdW5jdGlvbigpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAudnIgaGFzIGJlZW4gcmVuYW1lZCB0byAueHJcIiksdGhpcy54cn19LGdhbW1hSW5wdXQ6e2dldDpmdW5jdGlvbigpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuZ2FtbWFJbnB1dCBoYXMgYmVlbiByZW1vdmVkLiBTZXQgdGhlIGVuY29kaW5nIGZvciB0ZXh0dXJlcyB2aWEgVGV4dHVyZS5lbmNvZGluZyBpbnN0ZWFkLlwiKSwhMX0sc2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLmdhbW1hSW5wdXQgaGFzIGJlZW4gcmVtb3ZlZC4gU2V0IHRoZSBlbmNvZGluZyBmb3IgdGV4dHVyZXMgdmlhIFRleHR1cmUuZW5jb2RpbmcgaW5zdGVhZC5cIil9fSxnYW1tYU91dHB1dDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5nYW1tYU91dHB1dCBoYXMgYmVlbiByZW1vdmVkLiBTZXQgV2ViR0xSZW5kZXJlci5vdXRwdXRFbmNvZGluZyBpbnN0ZWFkLlwiKSwhMX0sc2V0OmZ1bmN0aW9uKHQpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5nYW1tYU91dHB1dCBoYXMgYmVlbiByZW1vdmVkLiBTZXQgV2ViR0xSZW5kZXJlci5vdXRwdXRFbmNvZGluZyBpbnN0ZWFkLlwiKSx0aGlzLm91dHB1dEVuY29kaW5nPSEwPT09dD9LZTpKZX19LHRvbmVNYXBwaW5nV2hpdGVQb2ludDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC50b25lTWFwcGluZ1doaXRlUG9pbnQgaGFzIGJlZW4gcmVtb3ZlZC5cIiksMX0sc2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLnRvbmVNYXBwaW5nV2hpdGVQb2ludCBoYXMgYmVlbiByZW1vdmVkLlwiKX19fSksT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoRXMucHJvdG90eXBlLHtjdWxsRmFjZTp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLnNoYWRvd01hcC5jdWxsRmFjZSBoYXMgYmVlbiByZW1vdmVkLiBTZXQgTWF0ZXJpYWwuc2hhZG93U2lkZSBpbnN0ZWFkLlwiKX0sc2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLnNoYWRvd01hcC5jdWxsRmFjZSBoYXMgYmVlbiByZW1vdmVkLiBTZXQgTWF0ZXJpYWwuc2hhZG93U2lkZSBpbnN0ZWFkLlwiKX19LHJlbmRlclJldmVyc2VTaWRlZDp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLnNoYWRvd01hcC5yZW5kZXJSZXZlcnNlU2lkZWQgaGFzIGJlZW4gcmVtb3ZlZC4gU2V0IE1hdGVyaWFsLnNoYWRvd1NpZGUgaW5zdGVhZC5cIil9LHNldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5zaGFkb3dNYXAucmVuZGVyUmV2ZXJzZVNpZGVkIGhhcyBiZWVuIHJlbW92ZWQuIFNldCBNYXRlcmlhbC5zaGFkb3dTaWRlIGluc3RlYWQuXCIpfX0scmVuZGVyU2luZ2xlU2lkZWQ6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5zaGFkb3dNYXAucmVuZGVyU2luZ2xlU2lkZWQgaGFzIGJlZW4gcmVtb3ZlZC4gU2V0IE1hdGVyaWFsLnNoYWRvd1NpZGUgaW5zdGVhZC5cIil9LHNldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5zaGFkb3dNYXAucmVuZGVyU2luZ2xlU2lkZWQgaGFzIGJlZW4gcmVtb3ZlZC4gU2V0IE1hdGVyaWFsLnNoYWRvd1NpZGUgaW5zdGVhZC5cIil9fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFluLnByb3RvdHlwZSx7d3JhcFM6e2dldDpmdW5jdGlvbigpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLndyYXBTIGlzIG5vdyAudGV4dHVyZS53cmFwUy5cIiksdGhpcy50ZXh0dXJlLndyYXBTfSxzZXQ6ZnVuY3Rpb24odCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC53cmFwUyBpcyBub3cgLnRleHR1cmUud3JhcFMuXCIpLHRoaXMudGV4dHVyZS53cmFwUz10fX0sd3JhcFQ6e2dldDpmdW5jdGlvbigpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLndyYXBUIGlzIG5vdyAudGV4dHVyZS53cmFwVC5cIiksdGhpcy50ZXh0dXJlLndyYXBUfSxzZXQ6ZnVuY3Rpb24odCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC53cmFwVCBpcyBub3cgLnRleHR1cmUud3JhcFQuXCIpLHRoaXMudGV4dHVyZS53cmFwVD10fX0sbWFnRmlsdGVyOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC5tYWdGaWx0ZXIgaXMgbm93IC50ZXh0dXJlLm1hZ0ZpbHRlci5cIiksdGhpcy50ZXh0dXJlLm1hZ0ZpbHRlcn0sc2V0OmZ1bmN0aW9uKHQpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAubWFnRmlsdGVyIGlzIG5vdyAudGV4dHVyZS5tYWdGaWx0ZXIuXCIpLHRoaXMudGV4dHVyZS5tYWdGaWx0ZXI9dH19LG1pbkZpbHRlcjp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAubWluRmlsdGVyIGlzIG5vdyAudGV4dHVyZS5taW5GaWx0ZXIuXCIpLHRoaXMudGV4dHVyZS5taW5GaWx0ZXJ9LHNldDpmdW5jdGlvbih0KXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLm1pbkZpbHRlciBpcyBub3cgLnRleHR1cmUubWluRmlsdGVyLlwiKSx0aGlzLnRleHR1cmUubWluRmlsdGVyPXR9fSxhbmlzb3Ryb3B5OntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC5hbmlzb3Ryb3B5IGlzIG5vdyAudGV4dHVyZS5hbmlzb3Ryb3B5LlwiKSx0aGlzLnRleHR1cmUuYW5pc290cm9weX0sc2V0OmZ1bmN0aW9uKHQpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAuYW5pc290cm9weSBpcyBub3cgLnRleHR1cmUuYW5pc290cm9weS5cIiksdGhpcy50ZXh0dXJlLmFuaXNvdHJvcHk9dH19LG9mZnNldDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAub2Zmc2V0IGlzIG5vdyAudGV4dHVyZS5vZmZzZXQuXCIpLHRoaXMudGV4dHVyZS5vZmZzZXR9LHNldDpmdW5jdGlvbih0KXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLm9mZnNldCBpcyBub3cgLnRleHR1cmUub2Zmc2V0LlwiKSx0aGlzLnRleHR1cmUub2Zmc2V0PXR9fSxyZXBlYXQ6e2dldDpmdW5jdGlvbigpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLnJlcGVhdCBpcyBub3cgLnRleHR1cmUucmVwZWF0LlwiKSx0aGlzLnRleHR1cmUucmVwZWF0fSxzZXQ6ZnVuY3Rpb24odCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC5yZXBlYXQgaXMgbm93IC50ZXh0dXJlLnJlcGVhdC5cIiksdGhpcy50ZXh0dXJlLnJlcGVhdD10fX0sZm9ybWF0OntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC5mb3JtYXQgaXMgbm93IC50ZXh0dXJlLmZvcm1hdC5cIiksdGhpcy50ZXh0dXJlLmZvcm1hdH0sc2V0OmZ1bmN0aW9uKHQpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAuZm9ybWF0IGlzIG5vdyAudGV4dHVyZS5mb3JtYXQuXCIpLHRoaXMudGV4dHVyZS5mb3JtYXQ9dH19LHR5cGU6e2dldDpmdW5jdGlvbigpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLnR5cGUgaXMgbm93IC50ZXh0dXJlLnR5cGUuXCIpLHRoaXMudGV4dHVyZS50eXBlfSxzZXQ6ZnVuY3Rpb24odCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC50eXBlIGlzIG5vdyAudGV4dHVyZS50eXBlLlwiKSx0aGlzLnRleHR1cmUudHlwZT10fX0sZ2VuZXJhdGVNaXBtYXBzOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC5nZW5lcmF0ZU1pcG1hcHMgaXMgbm93IC50ZXh0dXJlLmdlbmVyYXRlTWlwbWFwcy5cIiksdGhpcy50ZXh0dXJlLmdlbmVyYXRlTWlwbWFwc30sc2V0OmZ1bmN0aW9uKHQpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAuZ2VuZXJhdGVNaXBtYXBzIGlzIG5vdyAudGV4dHVyZS5nZW5lcmF0ZU1pcG1hcHMuXCIpLHRoaXMudGV4dHVyZS5nZW5lcmF0ZU1pcG1hcHM9dH19fSksT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoc2QucHJvdG90eXBlLHtsb2FkOnt2YWx1ZTpmdW5jdGlvbih0KXtjb25zb2xlLndhcm4oXCJUSFJFRS5BdWRpbzogLmxvYWQgaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlIFRIUkVFLkF1ZGlvTG9hZGVyIGluc3RlYWQuXCIpO2NvbnN0IGU9dGhpcztyZXR1cm4obmV3IFloKS5sb2FkKHQsKGZ1bmN0aW9uKHQpe2Uuc2V0QnVmZmVyKHQpfSkpLHRoaXN9fSxzdGFydFRpbWU6e3NldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLkF1ZGlvOiAuc3RhcnRUaW1lIGlzIG5vdyAucGxheSggZGVsYXkgKS5cIil9fX0pLHBkLnByb3RvdHlwZS5nZXREYXRhPWZ1bmN0aW9uKCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLkF1ZGlvQW5hbHlzZXI6IC5nZXREYXRhKCkgaXMgbm93IC5nZXRGcmVxdWVuY3lEYXRhKCkuXCIpLHRoaXMuZ2V0RnJlcXVlbmN5RGF0YSgpfSxfby5wcm90b3R5cGUudXBkYXRlQ3ViZU1hcD1mdW5jdGlvbih0LGUpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5DdWJlQ2FtZXJhOiAudXBkYXRlQ3ViZU1hcCgpIGlzIG5vdyAudXBkYXRlKCkuXCIpLHRoaXMudXBkYXRlKHQsZSl9LF9vLnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbih0LGUsbixyKXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuQ3ViZUNhbWVyYTogLmNsZWFyKCkgaXMgbm93IC5yZW5kZXJUYXJnZXQuY2xlYXIoKS5cIiksdGhpcy5yZW5kZXJUYXJnZXQuY2xlYXIodCxlLG4scil9O2NvbnN0IFNmPXttZXJnZTpmdW5jdGlvbih0LGUsbil7bGV0IHI7Y29uc29sZS53YXJuKFwiVEhSRUUuR2VvbWV0cnlVdGlsczogLm1lcmdlKCkgaGFzIGJlZW4gbW92ZWQgdG8gR2VvbWV0cnkuIFVzZSBnZW9tZXRyeS5tZXJnZSggZ2VvbWV0cnkyLCBtYXRyaXgsIG1hdGVyaWFsSW5kZXhPZmZzZXQgKSBpbnN0ZWFkLlwiKSxlLmlzTWVzaCYmKGUubWF0cml4QXV0b1VwZGF0ZSYmZS51cGRhdGVNYXRyaXgoKSxyPWUubWF0cml4LGU9ZS5nZW9tZXRyeSksdC5tZXJnZShlLHIsbil9LGNlbnRlcjpmdW5jdGlvbih0KXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuR2VvbWV0cnlVdGlsczogLmNlbnRlcigpIGhhcyBiZWVuIG1vdmVkIHRvIEdlb21ldHJ5LiBVc2UgZ2VvbWV0cnkuY2VudGVyKCkgaW5zdGVhZC5cIiksdC5jZW50ZXIoKX19O2Z1bmN0aW9uIFRmKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLkNhbnZhc1JlbmRlcmVyIGhhcyBiZWVuIHJlbW92ZWRcIil9ZnVuY3Rpb24gRWYoKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuSlNPTkxvYWRlciBoYXMgYmVlbiByZW1vdmVkLlwiKX1Wbi5jcm9zc09yaWdpbj12b2lkIDAsVm4ubG9hZFRleHR1cmU9ZnVuY3Rpb24odCxlLG4scil7Y29uc29sZS53YXJuKFwiVEhSRUUuSW1hZ2VVdGlscy5sb2FkVGV4dHVyZSBoYXMgYmVlbiBkZXByZWNhdGVkLiBVc2UgVEhSRUUuVGV4dHVyZUxvYWRlcigpIGluc3RlYWQuXCIpO2NvbnN0IGk9bmV3IFl1O2kuc2V0Q3Jvc3NPcmlnaW4odGhpcy5jcm9zc09yaWdpbik7Y29uc3Qgbz1pLmxvYWQodCxuLHZvaWQgMCxyKTtyZXR1cm4gZSYmKG8ubWFwcGluZz1lKSxvfSxWbi5sb2FkVGV4dHVyZUN1YmU9ZnVuY3Rpb24odCxlLG4scil7Y29uc29sZS53YXJuKFwiVEhSRUUuSW1hZ2VVdGlscy5sb2FkVGV4dHVyZUN1YmUgaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlIFRIUkVFLkN1YmVUZXh0dXJlTG9hZGVyKCkgaW5zdGVhZC5cIik7Y29uc3QgaT1uZXcgWHU7aS5zZXRDcm9zc09yaWdpbih0aGlzLmNyb3NzT3JpZ2luKTtjb25zdCBvPWkubG9hZCh0LG4sdm9pZCAwLHIpO3JldHVybiBlJiYoby5tYXBwaW5nPWUpLG99LFZuLmxvYWRDb21wcmVzc2VkVGV4dHVyZT1mdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5JbWFnZVV0aWxzLmxvYWRDb21wcmVzc2VkVGV4dHVyZSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgVEhSRUUuRERTTG9hZGVyIGluc3RlYWQuXCIpfSxWbi5sb2FkQ29tcHJlc3NlZFRleHR1cmVDdWJlPWZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLkltYWdlVXRpbHMubG9hZENvbXByZXNzZWRUZXh0dXJlQ3ViZSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgVEhSRUUuRERTTG9hZGVyIGluc3RlYWQuXCIpfTtjb25zdCBBZj17Y3JlYXRlTXVsdGlNYXRlcmlhbE9iamVjdDpmdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5TY2VuZVV0aWxzIGhhcyBiZWVuIG1vdmVkIHRvIC9leGFtcGxlcy9qc20vdXRpbHMvU2NlbmVVdGlscy5qc1wiKX0sZGV0YWNoOmZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLlNjZW5lVXRpbHMgaGFzIGJlZW4gbW92ZWQgdG8gL2V4YW1wbGVzL2pzbS91dGlscy9TY2VuZVV0aWxzLmpzXCIpfSxhdHRhY2g6ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuU2NlbmVVdGlscyBoYXMgYmVlbiBtb3ZlZCB0byAvZXhhbXBsZXMvanNtL3V0aWxzL1NjZW5lVXRpbHMuanNcIil9fTtmdW5jdGlvbiBMZigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5MZW5zRmxhcmUgaGFzIGJlZW4gbW92ZWQgdG8gL2V4YW1wbGVzL2pzbS9vYmplY3RzL0xlbnNmbGFyZS5qc1wiKX1cInVuZGVmaW5lZFwiIT10eXBlb2YgX19USFJFRV9ERVZUT09MU19fJiZfX1RIUkVFX0RFVlRPT0xTX18uZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoXCJyZWdpc3RlclwiLHtkZXRhaWw6e3JldmlzaW9uOnJ9fSkpfSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7bi5kKGUsXCJhXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHN9KSk7dmFyIHIsaSxvLGE9bigwKTtmdW5jdGlvbiBzKCl7dGhpcy5lbmFibGVkPSEwLHRoaXMubmVlZHNTd2FwPSEwLHRoaXMuY2xlYXI9ITEsdGhpcy5yZW5kZXJUb1NjcmVlbj0hMX1PYmplY3QuYXNzaWduKHMucHJvdG90eXBlLHtzZXRTaXplOmZ1bmN0aW9uKCl7fSxyZW5kZXI6ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuUGFzczogLnJlbmRlcigpIG11c3QgYmUgaW1wbGVtZW50ZWQgaW4gZGVyaXZlZCBwYXNzLlwiKX19KSxzLkZ1bGxTY3JlZW5RdWFkPShyPW5ldyBhLk9ydGhvZ3JhcGhpY0NhbWVyYSgtMSwxLDEsLTEsMCwxKSxpPW5ldyBhLlBsYW5lQnVmZmVyR2VvbWV0cnkoMiwyKSxvPWZ1bmN0aW9uKHQpe3RoaXMuX21lc2g9bmV3IGEuTWVzaChpLHQpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoby5wcm90b3R5cGUsXCJtYXRlcmlhbFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWVzaC5tYXRlcmlhbH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX21lc2gubWF0ZXJpYWw9dH19KSxPYmplY3QuYXNzaWduKG8ucHJvdG90eXBlLHtkaXNwb3NlOmZ1bmN0aW9uKCl7dGhpcy5fbWVzaC5nZW9tZXRyeS5kaXNwb3NlKCl9LHJlbmRlcjpmdW5jdGlvbih0KXt0LnJlbmRlcih0aGlzLl9tZXNoLHIpfX0pLG8pfSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7bi5yKGUpLG4uZChlLFwiU2hhZGVyUGFzc1wiLChmdW5jdGlvbigpe3JldHVybiBvfSkpO3ZhciByPW4oMCksaT1uKDEpLG89ZnVuY3Rpb24odCxlKXtpLmEuY2FsbCh0aGlzKSx0aGlzLnRleHR1cmVJRD12b2lkIDAhPT1lP2U6XCJ0RGlmZnVzZVwiLHQgaW5zdGFuY2VvZiByLlNoYWRlck1hdGVyaWFsPyh0aGlzLnVuaWZvcm1zPXQudW5pZm9ybXMsdGhpcy5tYXRlcmlhbD10KTp0JiYodGhpcy51bmlmb3Jtcz1yLlVuaWZvcm1zVXRpbHMuY2xvbmUodC51bmlmb3JtcyksdGhpcy5tYXRlcmlhbD1uZXcgci5TaGFkZXJNYXRlcmlhbCh7ZGVmaW5lczpPYmplY3QuYXNzaWduKHt9LHQuZGVmaW5lcyksdW5pZm9ybXM6dGhpcy51bmlmb3Jtcyx2ZXJ0ZXhTaGFkZXI6dC52ZXJ0ZXhTaGFkZXIsZnJhZ21lbnRTaGFkZXI6dC5mcmFnbWVudFNoYWRlcn0pKSx0aGlzLmZzUXVhZD1uZXcgaS5hLkZ1bGxTY3JlZW5RdWFkKHRoaXMubWF0ZXJpYWwpfTtvLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoaS5hLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOm8scmVuZGVyOmZ1bmN0aW9uKHQsZSxuKXt0aGlzLnVuaWZvcm1zW3RoaXMudGV4dHVyZUlEXSYmKHRoaXMudW5pZm9ybXNbdGhpcy50ZXh0dXJlSURdLnZhbHVlPW4udGV4dHVyZSksdGhpcy5mc1F1YWQubWF0ZXJpYWw9dGhpcy5tYXRlcmlhbCx0aGlzLnJlbmRlclRvU2NyZWVuPyh0LnNldFJlbmRlclRhcmdldChudWxsKSx0aGlzLmZzUXVhZC5yZW5kZXIodCkpOih0LnNldFJlbmRlclRhcmdldChlKSx0aGlzLmNsZWFyJiZ0LmNsZWFyKHQuYXV0b0NsZWFyQ29sb3IsdC5hdXRvQ2xlYXJEZXB0aCx0LmF1dG9DbGVhclN0ZW5jaWwpLHRoaXMuZnNRdWFkLnJlbmRlcih0KSl9fSl9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtuLnIoZSksbi5kKGUsXCJHTFRGTG9hZGVyXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGl9KSk7dmFyIHI9bigwKSxpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXtyLkxvYWRlci5jYWxsKHRoaXMsdCksdGhpcy5kcmFjb0xvYWRlcj1udWxsLHRoaXMuZGRzTG9hZGVyPW51bGwsdGhpcy5rdHgyTG9hZGVyPW51bGwsdGhpcy5tZXNob3B0RGVjb2Rlcj1udWxsLHRoaXMucGx1Z2luQ2FsbGJhY2tzPVtdLHRoaXMucmVnaXN0ZXIoKGZ1bmN0aW9uKHQpe3JldHVybiBuZXcgcyh0KX0pKSx0aGlzLnJlZ2lzdGVyKChmdW5jdGlvbih0KXtyZXR1cm4gbmV3IGwodCl9KSksdGhpcy5yZWdpc3RlcigoZnVuY3Rpb24odCl7cmV0dXJuIG5ldyB1KHQpfSkpLHRoaXMucmVnaXN0ZXIoKGZ1bmN0aW9uKHQpe3JldHVybiBuZXcgYyh0KX0pKSx0aGlzLnJlZ2lzdGVyKChmdW5jdGlvbih0KXtyZXR1cm4gbmV3IG8odCl9KSksdGhpcy5yZWdpc3RlcigoZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBoKHQpfSkpfWZ1bmN0aW9uIGUoKXt2YXIgdD17fTtyZXR1cm57Z2V0OmZ1bmN0aW9uKGUpe3JldHVybiB0W2VdfSxhZGQ6ZnVuY3Rpb24oZSxuKXt0W2VdPW59LHJlbW92ZTpmdW5jdGlvbihlKXtkZWxldGUgdFtlXX0scmVtb3ZlQWxsOmZ1bmN0aW9uKCl7dD17fX19fXQucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShyLkxvYWRlci5wcm90b3R5cGUpLHtjb25zdHJ1Y3Rvcjp0LGxvYWQ6ZnVuY3Rpb24odCxlLG4saSl7dmFyIG8sYT10aGlzO289XCJcIiE9PXRoaXMucmVzb3VyY2VQYXRoP3RoaXMucmVzb3VyY2VQYXRoOlwiXCIhPT10aGlzLnBhdGg/dGhpcy5wYXRoOnIuTG9hZGVyVXRpbHMuZXh0cmFjdFVybEJhc2UodCksdGhpcy5tYW5hZ2VyLml0ZW1TdGFydCh0KTt2YXIgcz1mdW5jdGlvbihlKXtpP2koZSk6Y29uc29sZS5lcnJvcihlKSxhLm1hbmFnZXIuaXRlbUVycm9yKHQpLGEubWFuYWdlci5pdGVtRW5kKHQpfSxjPW5ldyByLkZpbGVMb2FkZXIodGhpcy5tYW5hZ2VyKTtjLnNldFBhdGgodGhpcy5wYXRoKSxjLnNldFJlc3BvbnNlVHlwZShcImFycmF5YnVmZmVyXCIpLGMuc2V0UmVxdWVzdEhlYWRlcih0aGlzLnJlcXVlc3RIZWFkZXIpLGMuc2V0V2l0aENyZWRlbnRpYWxzKHRoaXMud2l0aENyZWRlbnRpYWxzKSxjLmxvYWQodCwoZnVuY3Rpb24obil7dHJ5e2EucGFyc2UobixvLChmdW5jdGlvbihuKXtlKG4pLGEubWFuYWdlci5pdGVtRW5kKHQpfSkscyl9Y2F0Y2godCl7cyh0KX19KSxuLHMpfSxzZXREUkFDT0xvYWRlcjpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5kcmFjb0xvYWRlcj10LHRoaXN9LHNldEREU0xvYWRlcjpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5kZHNMb2FkZXI9dCx0aGlzfSxzZXRLVFgyTG9hZGVyOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmt0eDJMb2FkZXI9dCx0aGlzfSxzZXRNZXNob3B0RGVjb2RlcjpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5tZXNob3B0RGVjb2Rlcj10LHRoaXN9LHJlZ2lzdGVyOmZ1bmN0aW9uKHQpe3JldHVybi0xPT09dGhpcy5wbHVnaW5DYWxsYmFja3MuaW5kZXhPZih0KSYmdGhpcy5wbHVnaW5DYWxsYmFja3MucHVzaCh0KSx0aGlzfSx1bnJlZ2lzdGVyOmZ1bmN0aW9uKHQpe3JldHVybi0xIT09dGhpcy5wbHVnaW5DYWxsYmFja3MuaW5kZXhPZih0KSYmdGhpcy5wbHVnaW5DYWxsYmFja3Muc3BsaWNlKHRoaXMucGx1Z2luQ2FsbGJhY2tzLmluZGV4T2YodCksMSksdGhpc30scGFyc2U6ZnVuY3Rpb24odCxlLG8scyl7dmFyIGMsbD17fSx1PXt9O2lmKFwic3RyaW5nXCI9PXR5cGVvZiB0KWM9dDtlbHNlIGlmKHIuTG9hZGVyVXRpbHMuZGVjb2RlVGV4dChuZXcgVWludDhBcnJheSh0LDAsNCkpPT09ZCl7dHJ5e2xbbi5LSFJfQklOQVJZX0dMVEZdPW5ldyBtKHQpfWNhdGNoKHQpe3JldHVybiB2b2lkKHMmJnModCkpfWM9bFtuLktIUl9CSU5BUllfR0xURl0uY29udGVudH1lbHNlIGM9ci5Mb2FkZXJVdGlscy5kZWNvZGVUZXh0KG5ldyBVaW50OEFycmF5KHQpKTt2YXIgaD1KU09OLnBhcnNlKGMpO2lmKHZvaWQgMD09PWguYXNzZXR8fGguYXNzZXQudmVyc2lvblswXTwyKXMmJnMobmV3IEVycm9yKFwiVEhSRUUuR0xURkxvYWRlcjogVW5zdXBwb3J0ZWQgYXNzZXQuIGdsVEYgdmVyc2lvbnMgPj0yLjAgYXJlIHN1cHBvcnRlZC5cIikpO2Vsc2V7dmFyIHA9bmV3IGooaCx7cGF0aDplfHx0aGlzLnJlc291cmNlUGF0aHx8XCJcIixjcm9zc09yaWdpbjp0aGlzLmNyb3NzT3JpZ2luLG1hbmFnZXI6dGhpcy5tYW5hZ2VyLGt0eDJMb2FkZXI6dGhpcy5rdHgyTG9hZGVyLG1lc2hvcHREZWNvZGVyOnRoaXMubWVzaG9wdERlY29kZXJ9KTtwLmZpbGVMb2FkZXIuc2V0UmVxdWVzdEhlYWRlcih0aGlzLnJlcXVlc3RIZWFkZXIpO2Zvcih2YXIgZj0wO2Y8dGhpcy5wbHVnaW5DYWxsYmFja3MubGVuZ3RoO2YrKyl7dmFyIHk9dGhpcy5wbHVnaW5DYWxsYmFja3NbZl0ocCk7dVt5Lm5hbWVdPXksbFt5Lm5hbWVdPSEwfWlmKGguZXh0ZW5zaW9uc1VzZWQpZm9yKGY9MDtmPGguZXh0ZW5zaW9uc1VzZWQubGVuZ3RoOysrZil7dmFyIHc9aC5leHRlbnNpb25zVXNlZFtmXSxfPWguZXh0ZW5zaW9uc1JlcXVpcmVkfHxbXTtzd2l0Y2godyl7Y2FzZSBuLktIUl9NQVRFUklBTFNfVU5MSVQ6bFt3XT1uZXcgYTticmVhaztjYXNlIG4uS0hSX01BVEVSSUFMU19QQlJfU1BFQ1VMQVJfR0xPU1NJTkVTUzpsW3ddPW5ldyB4O2JyZWFrO2Nhc2Ugbi5LSFJfRFJBQ09fTUVTSF9DT01QUkVTU0lPTjpsW3ddPW5ldyBnKGgsdGhpcy5kcmFjb0xvYWRlcik7YnJlYWs7Y2FzZSBuLk1TRlRfVEVYVFVSRV9ERFM6bFt3XT1uZXcgaSh0aGlzLmRkc0xvYWRlcik7YnJlYWs7Y2FzZSBuLktIUl9URVhUVVJFX1RSQU5TRk9STTpsW3ddPW5ldyB2O2JyZWFrO2Nhc2Ugbi5LSFJfTUVTSF9RVUFOVElaQVRJT046bFt3XT1uZXcgYjticmVhaztkZWZhdWx0Ol8uaW5kZXhPZih3KT49MCYmdm9pZCAwPT09dVt3XSYmY29uc29sZS53YXJuKCdUSFJFRS5HTFRGTG9hZGVyOiBVbmtub3duIGV4dGVuc2lvbiBcIicrdysnXCIuJyl9fXAuc2V0RXh0ZW5zaW9ucyhsKSxwLnNldFBsdWdpbnModSkscC5wYXJzZShvLHMpfX19KTt2YXIgbj17S0hSX0JJTkFSWV9HTFRGOlwiS0hSX2JpbmFyeV9nbFRGXCIsS0hSX0RSQUNPX01FU0hfQ09NUFJFU1NJT046XCJLSFJfZHJhY29fbWVzaF9jb21wcmVzc2lvblwiLEtIUl9MSUdIVFNfUFVOQ1RVQUw6XCJLSFJfbGlnaHRzX3B1bmN0dWFsXCIsS0hSX01BVEVSSUFMU19DTEVBUkNPQVQ6XCJLSFJfbWF0ZXJpYWxzX2NsZWFyY29hdFwiLEtIUl9NQVRFUklBTFNfUEJSX1NQRUNVTEFSX0dMT1NTSU5FU1M6XCJLSFJfbWF0ZXJpYWxzX3BiclNwZWN1bGFyR2xvc3NpbmVzc1wiLEtIUl9NQVRFUklBTFNfVFJBTlNNSVNTSU9OOlwiS0hSX21hdGVyaWFsc190cmFuc21pc3Npb25cIixLSFJfTUFURVJJQUxTX1VOTElUOlwiS0hSX21hdGVyaWFsc191bmxpdFwiLEtIUl9URVhUVVJFX0JBU0lTVTpcIktIUl90ZXh0dXJlX2Jhc2lzdVwiLEtIUl9URVhUVVJFX1RSQU5TRk9STTpcIktIUl90ZXh0dXJlX3RyYW5zZm9ybVwiLEtIUl9NRVNIX1FVQU5USVpBVElPTjpcIktIUl9tZXNoX3F1YW50aXphdGlvblwiLEVYVF9URVhUVVJFX1dFQlA6XCJFWFRfdGV4dHVyZV93ZWJwXCIsRVhUX01FU0hPUFRfQ09NUFJFU1NJT046XCJFWFRfbWVzaG9wdF9jb21wcmVzc2lvblwiLE1TRlRfVEVYVFVSRV9ERFM6XCJNU0ZUX3RleHR1cmVfZGRzXCJ9O2Z1bmN0aW9uIGkodCl7aWYoIXQpdGhyb3cgbmV3IEVycm9yKFwiVEhSRUUuR0xURkxvYWRlcjogQXR0ZW1wdGluZyB0byBsb2FkIC5kZHMgdGV4dHVyZSB3aXRob3V0IGltcG9ydGluZyBERFNMb2FkZXJcIik7dGhpcy5uYW1lPW4uTVNGVF9URVhUVVJFX0REUyx0aGlzLmRkc0xvYWRlcj10fWZ1bmN0aW9uIG8odCl7dGhpcy5wYXJzZXI9dCx0aGlzLm5hbWU9bi5LSFJfTElHSFRTX1BVTkNUVUFMLHRoaXMuY2FjaGU9e3JlZnM6e30sdXNlczp7fX19ZnVuY3Rpb24gYSgpe3RoaXMubmFtZT1uLktIUl9NQVRFUklBTFNfVU5MSVR9ZnVuY3Rpb24gcyh0KXt0aGlzLnBhcnNlcj10LHRoaXMubmFtZT1uLktIUl9NQVRFUklBTFNfQ0xFQVJDT0FUfWZ1bmN0aW9uIGModCl7dGhpcy5wYXJzZXI9dCx0aGlzLm5hbWU9bi5LSFJfTUFURVJJQUxTX1RSQU5TTUlTU0lPTn1mdW5jdGlvbiBsKHQpe3RoaXMucGFyc2VyPXQsdGhpcy5uYW1lPW4uS0hSX1RFWFRVUkVfQkFTSVNVfWZ1bmN0aW9uIHUodCl7dGhpcy5wYXJzZXI9dCx0aGlzLm5hbWU9bi5FWFRfVEVYVFVSRV9XRUJQLHRoaXMuaXNTdXBwb3J0ZWQ9bnVsbH1mdW5jdGlvbiBoKHQpe3RoaXMubmFtZT1uLkVYVF9NRVNIT1BUX0NPTVBSRVNTSU9OLHRoaXMucGFyc2VyPXR9by5wcm90b3R5cGUuX21hcmtEZWZzPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMucGFyc2VyLGU9dGhpcy5wYXJzZXIuanNvbi5ub2Rlc3x8W10sbj0wLHI9ZS5sZW5ndGg7bjxyO24rKyl7dmFyIGk9ZVtuXTtpLmV4dGVuc2lvbnMmJmkuZXh0ZW5zaW9uc1t0aGlzLm5hbWVdJiZ2b2lkIDAhPT1pLmV4dGVuc2lvbnNbdGhpcy5uYW1lXS5saWdodCYmdC5fYWRkTm9kZVJlZih0aGlzLmNhY2hlLGkuZXh0ZW5zaW9uc1t0aGlzLm5hbWVdLmxpZ2h0KX19LG8ucHJvdG90eXBlLl9sb2FkTGlnaHQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5wYXJzZXIsbj1cImxpZ2h0OlwiK3QsaT1lLmNhY2hlLmdldChuKTtpZihpKXJldHVybiBpO3ZhciBvLGE9ZS5qc29uLHM9KChhLmV4dGVuc2lvbnMmJmEuZXh0ZW5zaW9uc1t0aGlzLm5hbWVdfHx7fSkubGlnaHRzfHxbXSlbdF0sYz1uZXcgci5Db2xvcigxNjc3NzIxNSk7dm9pZCAwIT09cy5jb2xvciYmYy5mcm9tQXJyYXkocy5jb2xvcik7dmFyIGw9dm9pZCAwIT09cy5yYW5nZT9zLnJhbmdlOjA7c3dpdGNoKHMudHlwZSl7Y2FzZVwiZGlyZWN0aW9uYWxcIjoobz1uZXcgci5EaXJlY3Rpb25hbExpZ2h0KGMpKS50YXJnZXQucG9zaXRpb24uc2V0KDAsMCwtMSksby5hZGQoby50YXJnZXQpO2JyZWFrO2Nhc2VcInBvaW50XCI6KG89bmV3IHIuUG9pbnRMaWdodChjKSkuZGlzdGFuY2U9bDticmVhaztjYXNlXCJzcG90XCI6KG89bmV3IHIuU3BvdExpZ2h0KGMpKS5kaXN0YW5jZT1sLHMuc3BvdD1zLnNwb3R8fHt9LHMuc3BvdC5pbm5lckNvbmVBbmdsZT12b2lkIDAhPT1zLnNwb3QuaW5uZXJDb25lQW5nbGU/cy5zcG90LmlubmVyQ29uZUFuZ2xlOjAscy5zcG90Lm91dGVyQ29uZUFuZ2xlPXZvaWQgMCE9PXMuc3BvdC5vdXRlckNvbmVBbmdsZT9zLnNwb3Qub3V0ZXJDb25lQW5nbGU6TWF0aC5QSS80LG8uYW5nbGU9cy5zcG90Lm91dGVyQ29uZUFuZ2xlLG8ucGVudW1icmE9MS1zLnNwb3QuaW5uZXJDb25lQW5nbGUvcy5zcG90Lm91dGVyQ29uZUFuZ2xlLG8udGFyZ2V0LnBvc2l0aW9uLnNldCgwLDAsLTEpLG8uYWRkKG8udGFyZ2V0KTticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcignVEhSRUUuR0xURkxvYWRlcjogVW5leHBlY3RlZCBsaWdodCB0eXBlLCBcIicrcy50eXBlKydcIi4nKX1yZXR1cm4gby5wb3NpdGlvbi5zZXQoMCwwLDApLG8uZGVjYXk9Mix2b2lkIDAhPT1zLmludGVuc2l0eSYmKG8uaW50ZW5zaXR5PXMuaW50ZW5zaXR5KSxvLm5hbWU9ZS5jcmVhdGVVbmlxdWVOYW1lKHMubmFtZXx8XCJsaWdodF9cIit0KSxpPVByb21pc2UucmVzb2x2ZShvKSxlLmNhY2hlLmFkZChuLGkpLGl9LG8ucHJvdG90eXBlLmNyZWF0ZU5vZGVBdHRhY2htZW50PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj10aGlzLnBhcnNlcixyPW4uanNvbi5ub2Rlc1t0XSxpPShyLmV4dGVuc2lvbnMmJnIuZXh0ZW5zaW9uc1t0aGlzLm5hbWVdfHx7fSkubGlnaHQ7cmV0dXJuIHZvaWQgMD09PWk/bnVsbDp0aGlzLl9sb2FkTGlnaHQoaSkudGhlbigoZnVuY3Rpb24odCl7cmV0dXJuIG4uX2dldE5vZGVSZWYoZS5jYWNoZSxpLHQpfSkpfSxhLnByb3RvdHlwZS5nZXRNYXRlcmlhbFR5cGU9ZnVuY3Rpb24oKXtyZXR1cm4gci5NZXNoQmFzaWNNYXRlcmlhbH0sYS5wcm90b3R5cGUuZXh0ZW5kUGFyYW1zPWZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1bXTt0LmNvbG9yPW5ldyByLkNvbG9yKDEsMSwxKSx0Lm9wYWNpdHk9MTt2YXIgbz1lLnBick1ldGFsbGljUm91Z2huZXNzO2lmKG8pe2lmKEFycmF5LmlzQXJyYXkoby5iYXNlQ29sb3JGYWN0b3IpKXt2YXIgYT1vLmJhc2VDb2xvckZhY3Rvcjt0LmNvbG9yLmZyb21BcnJheShhKSx0Lm9wYWNpdHk9YVszXX12b2lkIDAhPT1vLmJhc2VDb2xvclRleHR1cmUmJmkucHVzaChuLmFzc2lnblRleHR1cmUodCxcIm1hcFwiLG8uYmFzZUNvbG9yVGV4dHVyZSkpfXJldHVybiBQcm9taXNlLmFsbChpKX0scy5wcm90b3R5cGUuZ2V0TWF0ZXJpYWxUeXBlPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMucGFyc2VyLmpzb24ubWF0ZXJpYWxzW3RdO3JldHVybiBlLmV4dGVuc2lvbnMmJmUuZXh0ZW5zaW9uc1t0aGlzLm5hbWVdP3IuTWVzaFBoeXNpY2FsTWF0ZXJpYWw6bnVsbH0scy5wcm90b3R5cGUuZXh0ZW5kTWF0ZXJpYWxQYXJhbXM9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLnBhcnNlcixpPW4uanNvbi5tYXRlcmlhbHNbdF07aWYoIWkuZXh0ZW5zaW9uc3x8IWkuZXh0ZW5zaW9uc1t0aGlzLm5hbWVdKXJldHVybiBQcm9taXNlLnJlc29sdmUoKTt2YXIgbz1bXSxhPWkuZXh0ZW5zaW9uc1t0aGlzLm5hbWVdO2lmKHZvaWQgMCE9PWEuY2xlYXJjb2F0RmFjdG9yJiYoZS5jbGVhcmNvYXQ9YS5jbGVhcmNvYXRGYWN0b3IpLHZvaWQgMCE9PWEuY2xlYXJjb2F0VGV4dHVyZSYmby5wdXNoKG4uYXNzaWduVGV4dHVyZShlLFwiY2xlYXJjb2F0TWFwXCIsYS5jbGVhcmNvYXRUZXh0dXJlKSksdm9pZCAwIT09YS5jbGVhcmNvYXRSb3VnaG5lc3NGYWN0b3ImJihlLmNsZWFyY29hdFJvdWdobmVzcz1hLmNsZWFyY29hdFJvdWdobmVzc0ZhY3Rvciksdm9pZCAwIT09YS5jbGVhcmNvYXRSb3VnaG5lc3NUZXh0dXJlJiZvLnB1c2gobi5hc3NpZ25UZXh0dXJlKGUsXCJjbGVhcmNvYXRSb3VnaG5lc3NNYXBcIixhLmNsZWFyY29hdFJvdWdobmVzc1RleHR1cmUpKSx2b2lkIDAhPT1hLmNsZWFyY29hdE5vcm1hbFRleHR1cmUmJihvLnB1c2gobi5hc3NpZ25UZXh0dXJlKGUsXCJjbGVhcmNvYXROb3JtYWxNYXBcIixhLmNsZWFyY29hdE5vcm1hbFRleHR1cmUpKSx2b2lkIDAhPT1hLmNsZWFyY29hdE5vcm1hbFRleHR1cmUuc2NhbGUpKXt2YXIgcz1hLmNsZWFyY29hdE5vcm1hbFRleHR1cmUuc2NhbGU7ZS5jbGVhcmNvYXROb3JtYWxTY2FsZT1uZXcgci5WZWN0b3IyKHMscyl9cmV0dXJuIFByb21pc2UuYWxsKG8pfSxjLnByb3RvdHlwZS5nZXRNYXRlcmlhbFR5cGU9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5wYXJzZXIuanNvbi5tYXRlcmlhbHNbdF07cmV0dXJuIGUuZXh0ZW5zaW9ucyYmZS5leHRlbnNpb25zW3RoaXMubmFtZV0/ci5NZXNoUGh5c2ljYWxNYXRlcmlhbDpudWxsfSxjLnByb3RvdHlwZS5leHRlbmRNYXRlcmlhbFBhcmFtcz1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMucGFyc2VyLHI9bi5qc29uLm1hdGVyaWFsc1t0XTtpZighci5leHRlbnNpb25zfHwhci5leHRlbnNpb25zW3RoaXMubmFtZV0pcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO3ZhciBpPVtdLG89ci5leHRlbnNpb25zW3RoaXMubmFtZV07cmV0dXJuIHZvaWQgMCE9PW8udHJhbnNtaXNzaW9uRmFjdG9yJiYoZS50cmFuc21pc3Npb249by50cmFuc21pc3Npb25GYWN0b3IpLHZvaWQgMCE9PW8udHJhbnNtaXNzaW9uVGV4dHVyZSYmaS5wdXNoKG4uYXNzaWduVGV4dHVyZShlLFwidHJhbnNtaXNzaW9uTWFwXCIsby50cmFuc21pc3Npb25UZXh0dXJlKSksUHJvbWlzZS5hbGwoaSl9LGwucHJvdG90eXBlLmxvYWRUZXh0dXJlPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMucGFyc2VyLG49ZS5qc29uLHI9bi50ZXh0dXJlc1t0XTtpZighci5leHRlbnNpb25zfHwhci5leHRlbnNpb25zW3RoaXMubmFtZV0pcmV0dXJuIG51bGw7dmFyIGk9ci5leHRlbnNpb25zW3RoaXMubmFtZV0sbz1uLmltYWdlc1tpLnNvdXJjZV0sYT1lLm9wdGlvbnMua3R4MkxvYWRlcjtpZighYSl7aWYobi5leHRlbnNpb25zUmVxdWlyZWQmJm4uZXh0ZW5zaW9uc1JlcXVpcmVkLmluZGV4T2YodGhpcy5uYW1lKT49MCl0aHJvdyBuZXcgRXJyb3IoXCJUSFJFRS5HTFRGTG9hZGVyOiBzZXRLVFgyTG9hZGVyIG11c3QgYmUgY2FsbGVkIGJlZm9yZSBsb2FkaW5nIEtUWDIgdGV4dHVyZXNcIik7cmV0dXJuIG51bGx9cmV0dXJuIGUubG9hZFRleHR1cmVJbWFnZSh0LG8sYSl9LHUucHJvdG90eXBlLmxvYWRUZXh0dXJlPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMubmFtZSxuPXRoaXMucGFyc2VyLHI9bi5qc29uLGk9ci50ZXh0dXJlc1t0XTtpZighaS5leHRlbnNpb25zfHwhaS5leHRlbnNpb25zW2VdKXJldHVybiBudWxsO3ZhciBvPWkuZXh0ZW5zaW9uc1tlXSxhPXIuaW1hZ2VzW28uc291cmNlXSxzPWEudXJpP24ub3B0aW9ucy5tYW5hZ2VyLmdldEhhbmRsZXIoYS51cmkpOm4udGV4dHVyZUxvYWRlcjtyZXR1cm4gdGhpcy5kZXRlY3RTdXBwb3J0KCkudGhlbigoZnVuY3Rpb24oaSl7aWYoaSlyZXR1cm4gbi5sb2FkVGV4dHVyZUltYWdlKHQsYSxzKTtpZihyLmV4dGVuc2lvbnNSZXF1aXJlZCYmci5leHRlbnNpb25zUmVxdWlyZWQuaW5kZXhPZihlKT49MCl0aHJvdyBuZXcgRXJyb3IoXCJUSFJFRS5HTFRGTG9hZGVyOiBXZWJQIHJlcXVpcmVkIGJ5IGFzc2V0IGJ1dCB1bnN1cHBvcnRlZC5cIik7cmV0dXJuIG4ubG9hZFRleHR1cmUodCl9KSl9LHUucHJvdG90eXBlLmRldGVjdFN1cHBvcnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc1N1cHBvcnRlZHx8KHRoaXMuaXNTdXBwb3J0ZWQ9bmV3IFByb21pc2UoKGZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBJbWFnZTtlLnNyYz1cImRhdGE6aW1hZ2Uvd2VicDtiYXNlNjQsVWtsR1JpSUFBQUJYUlVKUVZsQTRJQllBQUFBd0FRQ2RBU29CQUFFQURzRCtKYVFBQTNBQUFBQUFcIixlLm9ubG9hZD1lLm9uZXJyb3I9ZnVuY3Rpb24oKXt0KDE9PT1lLmhlaWdodCl9fSkpKSx0aGlzLmlzU3VwcG9ydGVkfSxoLnByb3RvdHlwZS5sb2FkQnVmZmVyVmlldz1mdW5jdGlvbih0KXt2YXIgZT10aGlzLnBhcnNlci5qc29uLG49ZS5idWZmZXJWaWV3c1t0XTtpZihuLmV4dGVuc2lvbnMmJm4uZXh0ZW5zaW9uc1t0aGlzLm5hbWVdKXt2YXIgcj1uLmV4dGVuc2lvbnNbdGhpcy5uYW1lXSxpPXRoaXMucGFyc2VyLmdldERlcGVuZGVuY3koXCJidWZmZXJcIixyLmJ1ZmZlciksbz10aGlzLnBhcnNlci5vcHRpb25zLm1lc2hvcHREZWNvZGVyO2lmKCFvfHwhby5zdXBwb3J0ZWQpe2lmKGUuZXh0ZW5zaW9uc1JlcXVpcmVkJiZlLmV4dGVuc2lvbnNSZXF1aXJlZC5pbmRleE9mKHRoaXMubmFtZSk+PTApdGhyb3cgbmV3IEVycm9yKFwiVEhSRUUuR0xURkxvYWRlcjogc2V0TWVzaG9wdERlY29kZXIgbXVzdCBiZSBjYWxsZWQgYmVmb3JlIGxvYWRpbmcgY29tcHJlc3NlZCBmaWxlc1wiKTtyZXR1cm4gbnVsbH1yZXR1cm4gUHJvbWlzZS5hbGwoW2ksby5yZWFkeV0pLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBlPXIuYnl0ZU9mZnNldHx8MCxuPXIuYnl0ZUxlbmd0aHx8MCxpPXIuY291bnQsYT1yLmJ5dGVTdHJpZGUscz1uZXcgQXJyYXlCdWZmZXIoaSphKSxjPW5ldyBVaW50OEFycmF5KHRbMF0sZSxuKTtyZXR1cm4gby5kZWNvZGVHbHRmQnVmZmVyKG5ldyBVaW50OEFycmF5KHMpLGksYSxjLHIubW9kZSxyLmZpbHRlciksc30pKX1yZXR1cm4gbnVsbH07dmFyIGQ9XCJnbFRGXCIscD0xMzEzODIxNTE0LGY9NTEzMDU2MjtmdW5jdGlvbiBtKHQpe3RoaXMubmFtZT1uLktIUl9CSU5BUllfR0xURix0aGlzLmNvbnRlbnQ9bnVsbCx0aGlzLmJvZHk9bnVsbDt2YXIgZT1uZXcgRGF0YVZpZXcodCwwLDEyKTtpZih0aGlzLmhlYWRlcj17bWFnaWM6ci5Mb2FkZXJVdGlscy5kZWNvZGVUZXh0KG5ldyBVaW50OEFycmF5KHQuc2xpY2UoMCw0KSkpLHZlcnNpb246ZS5nZXRVaW50MzIoNCwhMCksbGVuZ3RoOmUuZ2V0VWludDMyKDgsITApfSx0aGlzLmhlYWRlci5tYWdpYyE9PWQpdGhyb3cgbmV3IEVycm9yKFwiVEhSRUUuR0xURkxvYWRlcjogVW5zdXBwb3J0ZWQgZ2xURi1CaW5hcnkgaGVhZGVyLlwiKTtpZih0aGlzLmhlYWRlci52ZXJzaW9uPDIpdGhyb3cgbmV3IEVycm9yKFwiVEhSRUUuR0xURkxvYWRlcjogTGVnYWN5IGJpbmFyeSBmaWxlIGRldGVjdGVkLlwiKTtmb3IodmFyIGk9bmV3IERhdGFWaWV3KHQsMTIpLG89MDtvPGkuYnl0ZUxlbmd0aDspe3ZhciBhPWkuZ2V0VWludDMyKG8sITApO28rPTQ7dmFyIHM9aS5nZXRVaW50MzIobywhMCk7aWYobys9NCxzPT09cCl7dmFyIGM9bmV3IFVpbnQ4QXJyYXkodCwxMitvLGEpO3RoaXMuY29udGVudD1yLkxvYWRlclV0aWxzLmRlY29kZVRleHQoYyl9ZWxzZSBpZihzPT09Zil7dmFyIGw9MTIrbzt0aGlzLmJvZHk9dC5zbGljZShsLGwrYSl9bys9YX1pZihudWxsPT09dGhpcy5jb250ZW50KXRocm93IG5ldyBFcnJvcihcIlRIUkVFLkdMVEZMb2FkZXI6IEpTT04gY29udGVudCBub3QgZm91bmQuXCIpfWZ1bmN0aW9uIGcodCxlKXtpZighZSl0aHJvdyBuZXcgRXJyb3IoXCJUSFJFRS5HTFRGTG9hZGVyOiBObyBEUkFDT0xvYWRlciBpbnN0YW5jZSBwcm92aWRlZC5cIik7dGhpcy5uYW1lPW4uS0hSX0RSQUNPX01FU0hfQ09NUFJFU1NJT04sdGhpcy5qc29uPXQsdGhpcy5kcmFjb0xvYWRlcj1lLHRoaXMuZHJhY29Mb2FkZXIucHJlbG9hZCgpfWZ1bmN0aW9uIHYoKXt0aGlzLm5hbWU9bi5LSFJfVEVYVFVSRV9UUkFOU0ZPUk19ZnVuY3Rpb24geSh0KXtyLk1lc2hTdGFuZGFyZE1hdGVyaWFsLmNhbGwodGhpcyksdGhpcy5pc0dMVEZTcGVjdWxhckdsb3NzaW5lc3NNYXRlcmlhbD0hMDt2YXIgZT1bXCIjaWZkZWYgVVNFX1NQRUNVTEFSTUFQXCIsXCJcXHR1bmlmb3JtIHNhbXBsZXIyRCBzcGVjdWxhck1hcDtcIixcIiNlbmRpZlwiXS5qb2luKFwiXFxuXCIpLG49W1wiI2lmZGVmIFVTRV9HTE9TU0lORVNTTUFQXCIsXCJcXHR1bmlmb3JtIHNhbXBsZXIyRCBnbG9zc2luZXNzTWFwO1wiLFwiI2VuZGlmXCJdLmpvaW4oXCJcXG5cIiksaT1bXCJ2ZWMzIHNwZWN1bGFyRmFjdG9yID0gc3BlY3VsYXI7XCIsXCIjaWZkZWYgVVNFX1NQRUNVTEFSTUFQXCIsXCJcXHR2ZWM0IHRleGVsU3BlY3VsYXIgPSB0ZXh0dXJlMkQoIHNwZWN1bGFyTWFwLCB2VXYgKTtcIixcIlxcdHRleGVsU3BlY3VsYXIgPSBzUkdCVG9MaW5lYXIoIHRleGVsU3BlY3VsYXIgKTtcIixcIlxcdC8vIHJlYWRzIGNoYW5uZWwgUkdCLCBjb21wYXRpYmxlIHdpdGggYSBnbFRGIFNwZWN1bGFyLUdsb3NzaW5lc3MgKFJHQkEpIHRleHR1cmVcIixcIlxcdHNwZWN1bGFyRmFjdG9yICo9IHRleGVsU3BlY3VsYXIucmdiO1wiLFwiI2VuZGlmXCJdLmpvaW4oXCJcXG5cIiksbz1bXCJmbG9hdCBnbG9zc2luZXNzRmFjdG9yID0gZ2xvc3NpbmVzcztcIixcIiNpZmRlZiBVU0VfR0xPU1NJTkVTU01BUFwiLFwiXFx0dmVjNCB0ZXhlbEdsb3NzaW5lc3MgPSB0ZXh0dXJlMkQoIGdsb3NzaW5lc3NNYXAsIHZVdiApO1wiLFwiXFx0Ly8gcmVhZHMgY2hhbm5lbCBBLCBjb21wYXRpYmxlIHdpdGggYSBnbFRGIFNwZWN1bGFyLUdsb3NzaW5lc3MgKFJHQkEpIHRleHR1cmVcIixcIlxcdGdsb3NzaW5lc3NGYWN0b3IgKj0gdGV4ZWxHbG9zc2luZXNzLmE7XCIsXCIjZW5kaWZcIl0uam9pbihcIlxcblwiKSxhPVtcIlBoeXNpY2FsTWF0ZXJpYWwgbWF0ZXJpYWw7XCIsXCJtYXRlcmlhbC5kaWZmdXNlQ29sb3IgPSBkaWZmdXNlQ29sb3IucmdiICogKCAxLiAtIG1heCggc3BlY3VsYXJGYWN0b3IuciwgbWF4KCBzcGVjdWxhckZhY3Rvci5nLCBzcGVjdWxhckZhY3Rvci5iICkgKSApO1wiLFwidmVjMyBkeHkgPSBtYXgoIGFicyggZEZkeCggZ2VvbWV0cnlOb3JtYWwgKSApLCBhYnMoIGRGZHkoIGdlb21ldHJ5Tm9ybWFsICkgKSApO1wiLFwiZmxvYXQgZ2VvbWV0cnlSb3VnaG5lc3MgPSBtYXgoIG1heCggZHh5LngsIGR4eS55ICksIGR4eS56ICk7XCIsXCJtYXRlcmlhbC5zcGVjdWxhclJvdWdobmVzcyA9IG1heCggMS4wIC0gZ2xvc3NpbmVzc0ZhY3RvciwgMC4wNTI1ICk7IC8vIDAuMDUyNSBjb3JyZXNwb25kcyB0byB0aGUgYmFzZSBtaXAgb2YgYSAyNTYgY3ViZW1hcC5cIixcIm1hdGVyaWFsLnNwZWN1bGFyUm91Z2huZXNzICs9IGdlb21ldHJ5Um91Z2huZXNzO1wiLFwibWF0ZXJpYWwuc3BlY3VsYXJSb3VnaG5lc3MgPSBtaW4oIG1hdGVyaWFsLnNwZWN1bGFyUm91Z2huZXNzLCAxLjAgKTtcIixcIm1hdGVyaWFsLnNwZWN1bGFyQ29sb3IgPSBzcGVjdWxhckZhY3RvcjtcIl0uam9pbihcIlxcblwiKSxzPXtzcGVjdWxhcjp7dmFsdWU6KG5ldyByLkNvbG9yKS5zZXRIZXgoMTY3NzcyMTUpfSxnbG9zc2luZXNzOnt2YWx1ZToxfSxzcGVjdWxhck1hcDp7dmFsdWU6bnVsbH0sZ2xvc3NpbmVzc01hcDp7dmFsdWU6bnVsbH19O3RoaXMuX2V4dHJhVW5pZm9ybXM9cyx0aGlzLm9uQmVmb3JlQ29tcGlsZT1mdW5jdGlvbih0KXtmb3IodmFyIHIgaW4gcyl0LnVuaWZvcm1zW3JdPXNbcl07dC5mcmFnbWVudFNoYWRlcj10LmZyYWdtZW50U2hhZGVyLnJlcGxhY2UoXCJ1bmlmb3JtIGZsb2F0IHJvdWdobmVzcztcIixcInVuaWZvcm0gdmVjMyBzcGVjdWxhcjtcIikucmVwbGFjZShcInVuaWZvcm0gZmxvYXQgbWV0YWxuZXNzO1wiLFwidW5pZm9ybSBmbG9hdCBnbG9zc2luZXNzO1wiKS5yZXBsYWNlKFwiI2luY2x1ZGUgPHJvdWdobmVzc21hcF9wYXJzX2ZyYWdtZW50PlwiLGUpLnJlcGxhY2UoXCIjaW5jbHVkZSA8bWV0YWxuZXNzbWFwX3BhcnNfZnJhZ21lbnQ+XCIsbikucmVwbGFjZShcIiNpbmNsdWRlIDxyb3VnaG5lc3NtYXBfZnJhZ21lbnQ+XCIsaSkucmVwbGFjZShcIiNpbmNsdWRlIDxtZXRhbG5lc3NtYXBfZnJhZ21lbnQ+XCIsbykucmVwbGFjZShcIiNpbmNsdWRlIDxsaWdodHNfcGh5c2ljYWxfZnJhZ21lbnQ+XCIsYSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMse3NwZWN1bGFyOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gcy5zcGVjdWxhci52YWx1ZX0sc2V0OmZ1bmN0aW9uKHQpe3Muc3BlY3VsYXIudmFsdWU9dH19LHNwZWN1bGFyTWFwOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gcy5zcGVjdWxhck1hcC52YWx1ZX0sc2V0OmZ1bmN0aW9uKHQpe3Muc3BlY3VsYXJNYXAudmFsdWU9dCx0P3RoaXMuZGVmaW5lcy5VU0VfU1BFQ1VMQVJNQVA9XCJcIjpkZWxldGUgdGhpcy5kZWZpbmVzLlVTRV9TUEVDVUxBUk1BUH19LGdsb3NzaW5lc3M6e2dldDpmdW5jdGlvbigpe3JldHVybiBzLmdsb3NzaW5lc3MudmFsdWV9LHNldDpmdW5jdGlvbih0KXtzLmdsb3NzaW5lc3MudmFsdWU9dH19LGdsb3NzaW5lc3NNYXA6e2dldDpmdW5jdGlvbigpe3JldHVybiBzLmdsb3NzaW5lc3NNYXAudmFsdWV9LHNldDpmdW5jdGlvbih0KXtzLmdsb3NzaW5lc3NNYXAudmFsdWU9dCx0Pyh0aGlzLmRlZmluZXMuVVNFX0dMT1NTSU5FU1NNQVA9XCJcIix0aGlzLmRlZmluZXMuVVNFX1VWPVwiXCIpOihkZWxldGUgdGhpcy5kZWZpbmVzLlVTRV9HTE9TU0lORVNTTUFQLGRlbGV0ZSB0aGlzLmRlZmluZXMuVVNFX1VWKX19fSksZGVsZXRlIHRoaXMubWV0YWxuZXNzLGRlbGV0ZSB0aGlzLnJvdWdobmVzcyxkZWxldGUgdGhpcy5tZXRhbG5lc3NNYXAsZGVsZXRlIHRoaXMucm91Z2huZXNzTWFwLHRoaXMuc2V0VmFsdWVzKHQpfWZ1bmN0aW9uIHgoKXtyZXR1cm57bmFtZTpuLktIUl9NQVRFUklBTFNfUEJSX1NQRUNVTEFSX0dMT1NTSU5FU1Msc3BlY3VsYXJHbG9zc2luZXNzUGFyYW1zOltcImNvbG9yXCIsXCJtYXBcIixcImxpZ2h0TWFwXCIsXCJsaWdodE1hcEludGVuc2l0eVwiLFwiYW9NYXBcIixcImFvTWFwSW50ZW5zaXR5XCIsXCJlbWlzc2l2ZVwiLFwiZW1pc3NpdmVJbnRlbnNpdHlcIixcImVtaXNzaXZlTWFwXCIsXCJidW1wTWFwXCIsXCJidW1wU2NhbGVcIixcIm5vcm1hbE1hcFwiLFwibm9ybWFsTWFwVHlwZVwiLFwiZGlzcGxhY2VtZW50TWFwXCIsXCJkaXNwbGFjZW1lbnRTY2FsZVwiLFwiZGlzcGxhY2VtZW50Qmlhc1wiLFwic3BlY3VsYXJNYXBcIixcInNwZWN1bGFyXCIsXCJnbG9zc2luZXNzTWFwXCIsXCJnbG9zc2luZXNzXCIsXCJhbHBoYU1hcFwiLFwiZW52TWFwXCIsXCJlbnZNYXBJbnRlbnNpdHlcIixcInJlZnJhY3Rpb25SYXRpb1wiXSxnZXRNYXRlcmlhbFR5cGU6ZnVuY3Rpb24oKXtyZXR1cm4geX0sZXh0ZW5kUGFyYW1zOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1lLmV4dGVuc2lvbnNbdGhpcy5uYW1lXTt0LmNvbG9yPW5ldyByLkNvbG9yKDEsMSwxKSx0Lm9wYWNpdHk9MTt2YXIgbz1bXTtpZihBcnJheS5pc0FycmF5KGkuZGlmZnVzZUZhY3Rvcikpe3ZhciBhPWkuZGlmZnVzZUZhY3Rvcjt0LmNvbG9yLmZyb21BcnJheShhKSx0Lm9wYWNpdHk9YVszXX1pZih2b2lkIDAhPT1pLmRpZmZ1c2VUZXh0dXJlJiZvLnB1c2gobi5hc3NpZ25UZXh0dXJlKHQsXCJtYXBcIixpLmRpZmZ1c2VUZXh0dXJlKSksdC5lbWlzc2l2ZT1uZXcgci5Db2xvcigwLDAsMCksdC5nbG9zc2luZXNzPXZvaWQgMCE9PWkuZ2xvc3NpbmVzc0ZhY3Rvcj9pLmdsb3NzaW5lc3NGYWN0b3I6MSx0LnNwZWN1bGFyPW5ldyByLkNvbG9yKDEsMSwxKSxBcnJheS5pc0FycmF5KGkuc3BlY3VsYXJGYWN0b3IpJiZ0LnNwZWN1bGFyLmZyb21BcnJheShpLnNwZWN1bGFyRmFjdG9yKSx2b2lkIDAhPT1pLnNwZWN1bGFyR2xvc3NpbmVzc1RleHR1cmUpe3ZhciBzPWkuc3BlY3VsYXJHbG9zc2luZXNzVGV4dHVyZTtvLnB1c2gobi5hc3NpZ25UZXh0dXJlKHQsXCJnbG9zc2luZXNzTWFwXCIscykpLG8ucHVzaChuLmFzc2lnblRleHR1cmUodCxcInNwZWN1bGFyTWFwXCIscykpfXJldHVybiBQcm9taXNlLmFsbChvKX0sY3JlYXRlTWF0ZXJpYWw6ZnVuY3Rpb24odCl7dmFyIGU9bmV3IHkodCk7cmV0dXJuIGUuZm9nPSEwLGUuY29sb3I9dC5jb2xvcixlLm1hcD12b2lkIDA9PT10Lm1hcD9udWxsOnQubWFwLGUubGlnaHRNYXA9bnVsbCxlLmxpZ2h0TWFwSW50ZW5zaXR5PTEsZS5hb01hcD12b2lkIDA9PT10LmFvTWFwP251bGw6dC5hb01hcCxlLmFvTWFwSW50ZW5zaXR5PTEsZS5lbWlzc2l2ZT10LmVtaXNzaXZlLGUuZW1pc3NpdmVJbnRlbnNpdHk9MSxlLmVtaXNzaXZlTWFwPXZvaWQgMD09PXQuZW1pc3NpdmVNYXA/bnVsbDp0LmVtaXNzaXZlTWFwLGUuYnVtcE1hcD12b2lkIDA9PT10LmJ1bXBNYXA/bnVsbDp0LmJ1bXBNYXAsZS5idW1wU2NhbGU9MSxlLm5vcm1hbE1hcD12b2lkIDA9PT10Lm5vcm1hbE1hcD9udWxsOnQubm9ybWFsTWFwLGUubm9ybWFsTWFwVHlwZT1yLlRhbmdlbnRTcGFjZU5vcm1hbE1hcCx0Lm5vcm1hbFNjYWxlJiYoZS5ub3JtYWxTY2FsZT10Lm5vcm1hbFNjYWxlKSxlLmRpc3BsYWNlbWVudE1hcD1udWxsLGUuZGlzcGxhY2VtZW50U2NhbGU9MSxlLmRpc3BsYWNlbWVudEJpYXM9MCxlLnNwZWN1bGFyTWFwPXZvaWQgMD09PXQuc3BlY3VsYXJNYXA/bnVsbDp0LnNwZWN1bGFyTWFwLGUuc3BlY3VsYXI9dC5zcGVjdWxhcixlLmdsb3NzaW5lc3NNYXA9dm9pZCAwPT09dC5nbG9zc2luZXNzTWFwP251bGw6dC5nbG9zc2luZXNzTWFwLGUuZ2xvc3NpbmVzcz10Lmdsb3NzaW5lc3MsZS5hbHBoYU1hcD1udWxsLGUuZW52TWFwPXZvaWQgMD09PXQuZW52TWFwP251bGw6dC5lbnZNYXAsZS5lbnZNYXBJbnRlbnNpdHk9MSxlLnJlZnJhY3Rpb25SYXRpbz0uOTgsZX19fWZ1bmN0aW9uIGIoKXt0aGlzLm5hbWU9bi5LSFJfTUVTSF9RVUFOVElaQVRJT059ZnVuY3Rpb24gdyh0LGUsbixpKXtyLkludGVycG9sYW50LmNhbGwodGhpcyx0LGUsbixpKX1nLnByb3RvdHlwZS5kZWNvZGVQcmltaXRpdmU9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLmpzb24scj10aGlzLmRyYWNvTG9hZGVyLGk9dC5leHRlbnNpb25zW3RoaXMubmFtZV0uYnVmZmVyVmlldyxvPXQuZXh0ZW5zaW9uc1t0aGlzLm5hbWVdLmF0dHJpYnV0ZXMsYT17fSxzPXt9LGM9e307Zm9yKHZhciBsIGluIG8pe3ZhciB1PU9bbF18fGwudG9Mb3dlckNhc2UoKTthW3VdPW9bbF19Zm9yKGwgaW4gdC5hdHRyaWJ1dGVzKXt1PU9bbF18fGwudG9Mb3dlckNhc2UoKTtpZih2b2lkIDAhPT1vW2xdKXt2YXIgaD1uLmFjY2Vzc29yc1t0LmF0dHJpYnV0ZXNbbF1dLGQ9UltoLmNvbXBvbmVudFR5cGVdO2NbdV09ZCxzW3VdPSEwPT09aC5ub3JtYWxpemVkfX1yZXR1cm4gZS5nZXREZXBlbmRlbmN5KFwiYnVmZmVyVmlld1wiLGkpLnRoZW4oKGZ1bmN0aW9uKHQpe3JldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24oZSl7ci5kZWNvZGVEcmFjb0ZpbGUodCwoZnVuY3Rpb24odCl7Zm9yKHZhciBuIGluIHQuYXR0cmlidXRlcyl7dmFyIHI9dC5hdHRyaWJ1dGVzW25dLGk9c1tuXTt2b2lkIDAhPT1pJiYoci5ub3JtYWxpemVkPWkpfWUodCl9KSxhLGMpfSkpfSkpfSx2LnByb3RvdHlwZS5leHRlbmRUZXh0dXJlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ9dC5jbG9uZSgpLHZvaWQgMCE9PWUub2Zmc2V0JiZ0Lm9mZnNldC5mcm9tQXJyYXkoZS5vZmZzZXQpLHZvaWQgMCE9PWUucm90YXRpb24mJih0LnJvdGF0aW9uPWUucm90YXRpb24pLHZvaWQgMCE9PWUuc2NhbGUmJnQucmVwZWF0LmZyb21BcnJheShlLnNjYWxlKSx2b2lkIDAhPT1lLnRleENvb3JkJiZjb25zb2xlLndhcm4oJ1RIUkVFLkdMVEZMb2FkZXI6IEN1c3RvbSBVViBzZXRzIGluIFwiJyt0aGlzLm5hbWUrJ1wiIGV4dGVuc2lvbiBub3QgeWV0IHN1cHBvcnRlZC4nKSx0Lm5lZWRzVXBkYXRlPSEwLHR9LHkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoci5NZXNoU3RhbmRhcmRNYXRlcmlhbC5wcm90b3R5cGUpLHkucHJvdG90eXBlLmNvbnN0cnVjdG9yPXkseS5wcm90b3R5cGUuY29weT1mdW5jdGlvbih0KXtyZXR1cm4gci5NZXNoU3RhbmRhcmRNYXRlcmlhbC5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsdCksdGhpcy5zcGVjdWxhck1hcD10LnNwZWN1bGFyTWFwLHRoaXMuc3BlY3VsYXIuY29weSh0LnNwZWN1bGFyKSx0aGlzLmdsb3NzaW5lc3NNYXA9dC5nbG9zc2luZXNzTWFwLHRoaXMuZ2xvc3NpbmVzcz10Lmdsb3NzaW5lc3MsZGVsZXRlIHRoaXMubWV0YWxuZXNzLGRlbGV0ZSB0aGlzLnJvdWdobmVzcyxkZWxldGUgdGhpcy5tZXRhbG5lc3NNYXAsZGVsZXRlIHRoaXMucm91Z2huZXNzTWFwLHRoaXN9LHcucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoci5JbnRlcnBvbGFudC5wcm90b3R5cGUpLHcucHJvdG90eXBlLmNvbnN0cnVjdG9yPXcsdy5wcm90b3R5cGUuY29weVNhbXBsZVZhbHVlXz1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy5yZXN1bHRCdWZmZXIsbj10aGlzLnNhbXBsZVZhbHVlcyxyPXRoaXMudmFsdWVTaXplLGk9dCpyKjMrcixvPTA7byE9PXI7bysrKWVbb109bltpK29dO3JldHVybiBlfSx3LnByb3RvdHlwZS5iZWZvcmVTdGFydF89dy5wcm90b3R5cGUuY29weVNhbXBsZVZhbHVlXyx3LnByb3RvdHlwZS5hZnRlckVuZF89dy5wcm90b3R5cGUuY29weVNhbXBsZVZhbHVlXyx3LnByb3RvdHlwZS5pbnRlcnBvbGF0ZV89ZnVuY3Rpb24odCxlLG4scil7Zm9yKHZhciBpPXRoaXMucmVzdWx0QnVmZmVyLG89dGhpcy5zYW1wbGVWYWx1ZXMsYT10aGlzLnZhbHVlU2l6ZSxzPTIqYSxjPTMqYSxsPXItZSx1PShuLWUpL2wsaD11KnUsZD1oKnUscD10KmMsZj1wLWMsbT0tMipkKzMqaCxnPWQtaCx2PTEtbSx5PWctaCt1LHg9MDt4IT09YTt4Kyspe3ZhciBiPW9bZit4K2FdLHc9b1tmK3grc10qbCxfPW9bcCt4K2FdLE09b1twK3hdKmw7aVt4XT12KmIreSp3K20qXytnKk19cmV0dXJuIGl9O3ZhciBfPTAsTT0xLFM9MixUPTMsRT00LEE9NSxMPTYsUj17NTEyMDpJbnQ4QXJyYXksNTEyMTpVaW50OEFycmF5LDUxMjI6SW50MTZBcnJheSw1MTIzOlVpbnQxNkFycmF5LDUxMjU6VWludDMyQXJyYXksNTEyNjpGbG9hdDMyQXJyYXl9LFA9ezk3Mjg6ci5OZWFyZXN0RmlsdGVyLDk3Mjk6ci5MaW5lYXJGaWx0ZXIsOTk4NDpyLk5lYXJlc3RNaXBtYXBOZWFyZXN0RmlsdGVyLDk5ODU6ci5MaW5lYXJNaXBtYXBOZWFyZXN0RmlsdGVyLDk5ODY6ci5OZWFyZXN0TWlwbWFwTGluZWFyRmlsdGVyLDk5ODc6ci5MaW5lYXJNaXBtYXBMaW5lYXJGaWx0ZXJ9LEM9ezMzMDcxOnIuQ2xhbXBUb0VkZ2VXcmFwcGluZywzMzY0ODpyLk1pcnJvcmVkUmVwZWF0V3JhcHBpbmcsMTA0OTc6ci5SZXBlYXRXcmFwcGluZ30sST17U0NBTEFSOjEsVkVDMjoyLFZFQzM6MyxWRUM0OjQsTUFUMjo0LE1BVDM6OSxNQVQ0OjE2fSxPPXtQT1NJVElPTjpcInBvc2l0aW9uXCIsTk9STUFMOlwibm9ybWFsXCIsVEFOR0VOVDpcInRhbmdlbnRcIixURVhDT09SRF8wOlwidXZcIixURVhDT09SRF8xOlwidXYyXCIsQ09MT1JfMDpcImNvbG9yXCIsV0VJR0hUU18wOlwic2tpbldlaWdodFwiLEpPSU5UU18wOlwic2tpbkluZGV4XCJ9LE49e3NjYWxlOlwic2NhbGVcIix0cmFuc2xhdGlvbjpcInBvc2l0aW9uXCIscm90YXRpb246XCJxdWF0ZXJuaW9uXCIsd2VpZ2h0czpcIm1vcnBoVGFyZ2V0SW5mbHVlbmNlc1wifSxEPXtDVUJJQ1NQTElORTp2b2lkIDAsTElORUFSOnIuSW50ZXJwb2xhdGVMaW5lYXIsU1RFUDpyLkludGVycG9sYXRlRGlzY3JldGV9LEI9XCJPUEFRVUVcIixGPVwiTUFTS1wiLFU9XCJCTEVORFwiO2Z1bmN0aW9uIHoodCxlKXtyZXR1cm5cInN0cmluZ1wiIT10eXBlb2YgdHx8XCJcIj09PXQ/XCJcIjooL15odHRwcz86XFwvXFwvL2kudGVzdChlKSYmL15cXC8vLnRlc3QodCkmJihlPWUucmVwbGFjZSgvKF5odHRwcz86XFwvXFwvW15cXC9dKykuKi9pLFwiJDFcIikpLC9eKGh0dHBzPzopP1xcL1xcLy9pLnRlc3QodCl8fC9eZGF0YTouKiwuKiQvaS50ZXN0KHQpfHwvXmJsb2I6LiokL2kudGVzdCh0KT90OmUrdCl9ZnVuY3Rpb24gRyh0LGUsbil7Zm9yKHZhciByIGluIG4uZXh0ZW5zaW9ucyl2b2lkIDA9PT10W3JdJiYoZS51c2VyRGF0YS5nbHRmRXh0ZW5zaW9ucz1lLnVzZXJEYXRhLmdsdGZFeHRlbnNpb25zfHx7fSxlLnVzZXJEYXRhLmdsdGZFeHRlbnNpb25zW3JdPW4uZXh0ZW5zaW9uc1tyXSl9ZnVuY3Rpb24gSCh0LGUpe3ZvaWQgMCE9PWUuZXh0cmFzJiYoXCJvYmplY3RcIj09dHlwZW9mIGUuZXh0cmFzP09iamVjdC5hc3NpZ24odC51c2VyRGF0YSxlLmV4dHJhcyk6Y29uc29sZS53YXJuKFwiVEhSRUUuR0xURkxvYWRlcjogSWdub3JpbmcgcHJpbWl0aXZlIHR5cGUgLmV4dHJhcywgXCIrZS5leHRyYXMpKX1mdW5jdGlvbiBrKHQsZSl7aWYodC51cGRhdGVNb3JwaFRhcmdldHMoKSx2b2lkIDAhPT1lLndlaWdodHMpZm9yKHZhciBuPTAscj1lLndlaWdodHMubGVuZ3RoO248cjtuKyspdC5tb3JwaFRhcmdldEluZmx1ZW5jZXNbbl09ZS53ZWlnaHRzW25dO2lmKGUuZXh0cmFzJiZBcnJheS5pc0FycmF5KGUuZXh0cmFzLnRhcmdldE5hbWVzKSl7dmFyIGk9ZS5leHRyYXMudGFyZ2V0TmFtZXM7aWYodC5tb3JwaFRhcmdldEluZmx1ZW5jZXMubGVuZ3RoPT09aS5sZW5ndGgpe3QubW9ycGhUYXJnZXREaWN0aW9uYXJ5PXt9O2ZvcihuPTAscj1pLmxlbmd0aDtuPHI7bisrKXQubW9ycGhUYXJnZXREaWN0aW9uYXJ5W2lbbl1dPW59ZWxzZSBjb25zb2xlLndhcm4oXCJUSFJFRS5HTFRGTG9hZGVyOiBJbnZhbGlkIGV4dHJhcy50YXJnZXROYW1lcyBsZW5ndGguIElnbm9yaW5nIG5hbWVzLlwiKX19ZnVuY3Rpb24gVih0KXtmb3IodmFyIGU9XCJcIixuPU9iamVjdC5rZXlzKHQpLnNvcnQoKSxyPTAsaT1uLmxlbmd0aDtyPGk7cisrKWUrPW5bcl0rXCI6XCIrdFtuW3JdXStcIjtcIjtyZXR1cm4gZX1mdW5jdGlvbiBqKHQsbil7dGhpcy5qc29uPXR8fHt9LHRoaXMuZXh0ZW5zaW9ucz17fSx0aGlzLnBsdWdpbnM9e30sdGhpcy5vcHRpb25zPW58fHt9LHRoaXMuY2FjaGU9bmV3IGUsdGhpcy5hc3NvY2lhdGlvbnM9bmV3IE1hcCx0aGlzLnByaW1pdGl2ZUNhY2hlPXt9LHRoaXMubWVzaENhY2hlPXtyZWZzOnt9LHVzZXM6e319LHRoaXMuY2FtZXJhQ2FjaGU9e3JlZnM6e30sdXNlczp7fX0sdGhpcy5saWdodENhY2hlPXtyZWZzOnt9LHVzZXM6e319LHRoaXMubm9kZU5hbWVzVXNlZD17fSxcInVuZGVmaW5lZFwiIT10eXBlb2YgY3JlYXRlSW1hZ2VCaXRtYXAmJiExPT09L0ZpcmVmb3gvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk/dGhpcy50ZXh0dXJlTG9hZGVyPW5ldyByLkltYWdlQml0bWFwTG9hZGVyKHRoaXMub3B0aW9ucy5tYW5hZ2VyKTp0aGlzLnRleHR1cmVMb2FkZXI9bmV3IHIuVGV4dHVyZUxvYWRlcih0aGlzLm9wdGlvbnMubWFuYWdlciksdGhpcy50ZXh0dXJlTG9hZGVyLnNldENyb3NzT3JpZ2luKHRoaXMub3B0aW9ucy5jcm9zc09yaWdpbiksdGhpcy5maWxlTG9hZGVyPW5ldyByLkZpbGVMb2FkZXIodGhpcy5vcHRpb25zLm1hbmFnZXIpLHRoaXMuZmlsZUxvYWRlci5zZXRSZXNwb25zZVR5cGUoXCJhcnJheWJ1ZmZlclwiKSxcInVzZS1jcmVkZW50aWFsc1wiPT09dGhpcy5vcHRpb25zLmNyb3NzT3JpZ2luJiZ0aGlzLmZpbGVMb2FkZXIuc2V0V2l0aENyZWRlbnRpYWxzKCEwKX1mdW5jdGlvbiBXKHQsZSxuKXt2YXIgaT1lLmF0dHJpYnV0ZXMsbz1bXTtmdW5jdGlvbiBhKGUscil7cmV0dXJuIG4uZ2V0RGVwZW5kZW5jeShcImFjY2Vzc29yXCIsZSkudGhlbigoZnVuY3Rpb24oZSl7dC5zZXRBdHRyaWJ1dGUocixlKX0pKX1mb3IodmFyIHMgaW4gaSl7dmFyIGM9T1tzXXx8cy50b0xvd2VyQ2FzZSgpO2MgaW4gdC5hdHRyaWJ1dGVzfHxvLnB1c2goYShpW3NdLGMpKX1pZih2b2lkIDAhPT1lLmluZGljZXMmJiF0LmluZGV4KXt2YXIgbD1uLmdldERlcGVuZGVuY3koXCJhY2Nlc3NvclwiLGUuaW5kaWNlcykudGhlbigoZnVuY3Rpb24oZSl7dC5zZXRJbmRleChlKX0pKTtvLnB1c2gobCl9cmV0dXJuIEgodCxlKSxmdW5jdGlvbih0LGUsbil7dmFyIGk9ZS5hdHRyaWJ1dGVzLG89bmV3IHIuQm94MztpZih2b2lkIDAhPT1pLlBPU0lUSU9OKXt2YXIgYT0oZj1uLmpzb24uYWNjZXNzb3JzW2kuUE9TSVRJT05dKS5taW4scz1mLm1heDtpZih2b2lkIDAhPT1hJiZ2b2lkIDAhPT1zKXtvLnNldChuZXcgci5WZWN0b3IzKGFbMF0sYVsxXSxhWzJdKSxuZXcgci5WZWN0b3IzKHNbMF0sc1sxXSxzWzJdKSk7dmFyIGM9ZS50YXJnZXRzO2lmKHZvaWQgMCE9PWMpe2Zvcih2YXIgbD1uZXcgci5WZWN0b3IzLHU9bmV3IHIuVmVjdG9yMyxoPTAsZD1jLmxlbmd0aDtoPGQ7aCsrKXt2YXIgcD1jW2hdO2lmKHZvaWQgMCE9PXAuUE9TSVRJT04pe3ZhciBmO2E9KGY9bi5qc29uLmFjY2Vzc29yc1twLlBPU0lUSU9OXSkubWluLHM9Zi5tYXg7dm9pZCAwIT09YSYmdm9pZCAwIT09cz8odS5zZXRYKE1hdGgubWF4KE1hdGguYWJzKGFbMF0pLE1hdGguYWJzKHNbMF0pKSksdS5zZXRZKE1hdGgubWF4KE1hdGguYWJzKGFbMV0pLE1hdGguYWJzKHNbMV0pKSksdS5zZXRaKE1hdGgubWF4KE1hdGguYWJzKGFbMl0pLE1hdGguYWJzKHNbMl0pKSksbC5tYXgodSkpOmNvbnNvbGUud2FybihcIlRIUkVFLkdMVEZMb2FkZXI6IE1pc3NpbmcgbWluL21heCBwcm9wZXJ0aWVzIGZvciBhY2Nlc3NvciBQT1NJVElPTi5cIil9fW8uZXhwYW5kQnlWZWN0b3IobCl9dC5ib3VuZGluZ0JveD1vO3ZhciBtPW5ldyByLlNwaGVyZTtvLmdldENlbnRlcihtLmNlbnRlciksbS5yYWRpdXM9by5taW4uZGlzdGFuY2VUbyhvLm1heCkvMix0LmJvdW5kaW5nU3BoZXJlPW19ZWxzZSBjb25zb2xlLndhcm4oXCJUSFJFRS5HTFRGTG9hZGVyOiBNaXNzaW5nIG1pbi9tYXggcHJvcGVydGllcyBmb3IgYWNjZXNzb3IgUE9TSVRJT04uXCIpfX0odCxlLG4pLFByb21pc2UuYWxsKG8pLnRoZW4oKGZ1bmN0aW9uKCl7cmV0dXJuIHZvaWQgMCE9PWUudGFyZ2V0cz9mdW5jdGlvbih0LGUsbil7Zm9yKHZhciByPSExLGk9ITEsbz0wLGE9ZS5sZW5ndGg7bzxhO28rKyl7aWYodm9pZCAwIT09KGw9ZVtvXSkuUE9TSVRJT04mJihyPSEwKSx2b2lkIDAhPT1sLk5PUk1BTCYmKGk9ITApLHImJmkpYnJlYWt9aWYoIXImJiFpKXJldHVybiBQcm9taXNlLnJlc29sdmUodCk7dmFyIHM9W10sYz1bXTtmb3Iobz0wLGE9ZS5sZW5ndGg7bzxhO28rKyl7dmFyIGw9ZVtvXTtpZihyKXt2YXIgdT12b2lkIDAhPT1sLlBPU0lUSU9OP24uZ2V0RGVwZW5kZW5jeShcImFjY2Vzc29yXCIsbC5QT1NJVElPTik6dC5hdHRyaWJ1dGVzLnBvc2l0aW9uO3MucHVzaCh1KX1pZihpKXt1PXZvaWQgMCE9PWwuTk9STUFMP24uZ2V0RGVwZW5kZW5jeShcImFjY2Vzc29yXCIsbC5OT1JNQUwpOnQuYXR0cmlidXRlcy5ub3JtYWw7Yy5wdXNoKHUpfX1yZXR1cm4gUHJvbWlzZS5hbGwoW1Byb21pc2UuYWxsKHMpLFByb21pc2UuYWxsKGMpXSkudGhlbigoZnVuY3Rpb24oZSl7dmFyIG49ZVswXSxvPWVbMV07cmV0dXJuIHImJih0Lm1vcnBoQXR0cmlidXRlcy5wb3NpdGlvbj1uKSxpJiYodC5tb3JwaEF0dHJpYnV0ZXMubm9ybWFsPW8pLHQubW9ycGhUYXJnZXRzUmVsYXRpdmU9ITAsdH0pKX0odCxlLnRhcmdldHMsbik6dH0pKX1mdW5jdGlvbiBYKHQsZSl7dmFyIG49dC5nZXRJbmRleCgpO2lmKG51bGw9PT1uKXt2YXIgaT1bXSxvPXQuZ2V0QXR0cmlidXRlKFwicG9zaXRpb25cIik7aWYodm9pZCAwPT09bylyZXR1cm4gY29uc29sZS5lcnJvcihcIlRIUkVFLkdMVEZMb2FkZXIudG9UcmlhbmdsZXNEcmF3TW9kZSgpOiBVbmRlZmluZWQgcG9zaXRpb24gYXR0cmlidXRlLiBQcm9jZXNzaW5nIG5vdCBwb3NzaWJsZS5cIiksdDtmb3IodmFyIGE9MDthPG8uY291bnQ7YSsrKWkucHVzaChhKTt0LnNldEluZGV4KGkpLG49dC5nZXRJbmRleCgpfXZhciBzPW4uY291bnQtMixjPVtdO2lmKGU9PT1yLlRyaWFuZ2xlRmFuRHJhd01vZGUpZm9yKGE9MTthPD1zO2ErKyljLnB1c2gobi5nZXRYKDApKSxjLnB1c2gobi5nZXRYKGEpKSxjLnB1c2gobi5nZXRYKGErMSkpO2Vsc2UgZm9yKGE9MDthPHM7YSsrKWElMj09MD8oYy5wdXNoKG4uZ2V0WChhKSksYy5wdXNoKG4uZ2V0WChhKzEpKSxjLnB1c2gobi5nZXRYKGErMikpKTooYy5wdXNoKG4uZ2V0WChhKzIpKSxjLnB1c2gobi5nZXRYKGErMSkpLGMucHVzaChuLmdldFgoYSkpKTtjLmxlbmd0aC8zIT09cyYmY29uc29sZS5lcnJvcihcIlRIUkVFLkdMVEZMb2FkZXIudG9UcmlhbmdsZXNEcmF3TW9kZSgpOiBVbmFibGUgdG8gZ2VuZXJhdGUgY29ycmVjdCBhbW91bnQgb2YgdHJpYW5nbGVzLlwiKTt2YXIgbD10LmNsb25lKCk7cmV0dXJuIGwuc2V0SW5kZXgoYyksbH1yZXR1cm4gai5wcm90b3R5cGUuc2V0RXh0ZW5zaW9ucz1mdW5jdGlvbih0KXt0aGlzLmV4dGVuc2lvbnM9dH0sai5wcm90b3R5cGUuc2V0UGx1Z2lucz1mdW5jdGlvbih0KXt0aGlzLnBsdWdpbnM9dH0sai5wcm90b3R5cGUucGFyc2U9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLHI9dGhpcy5qc29uLGk9dGhpcy5leHRlbnNpb25zO3RoaXMuY2FjaGUucmVtb3ZlQWxsKCksdGhpcy5faW52b2tlQWxsKChmdW5jdGlvbih0KXtyZXR1cm4gdC5fbWFya0RlZnMmJnQuX21hcmtEZWZzKCl9KSksUHJvbWlzZS5hbGwoW3RoaXMuZ2V0RGVwZW5kZW5jaWVzKFwic2NlbmVcIiksdGhpcy5nZXREZXBlbmRlbmNpZXMoXCJhbmltYXRpb25cIiksdGhpcy5nZXREZXBlbmRlbmNpZXMoXCJjYW1lcmFcIildKS50aGVuKChmdW5jdGlvbihlKXt2YXIgbz17c2NlbmU6ZVswXVtyLnNjZW5lfHwwXSxzY2VuZXM6ZVswXSxhbmltYXRpb25zOmVbMV0sY2FtZXJhczplWzJdLGFzc2V0OnIuYXNzZXQscGFyc2VyOm4sdXNlckRhdGE6e319O0coaSxvLHIpLEgobyxyKSx0KG8pfSkpLmNhdGNoKGUpfSxqLnByb3RvdHlwZS5fbWFya0RlZnM9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy5qc29uLm5vZGVzfHxbXSxlPXRoaXMuanNvbi5za2luc3x8W10sbj10aGlzLmpzb24ubWVzaGVzfHxbXSxyPTAsaT1lLmxlbmd0aDtyPGk7cisrKWZvcih2YXIgbz1lW3JdLmpvaW50cyxhPTAscz1vLmxlbmd0aDthPHM7YSsrKXRbb1thXV0uaXNCb25lPSEwO2Zvcih2YXIgYz0wLGw9dC5sZW5ndGg7YzxsO2MrKyl7dmFyIHU9dFtjXTt2b2lkIDAhPT11Lm1lc2gmJih0aGlzLl9hZGROb2RlUmVmKHRoaXMubWVzaENhY2hlLHUubWVzaCksdm9pZCAwIT09dS5za2luJiYoblt1Lm1lc2hdLmlzU2tpbm5lZE1lc2g9ITApKSx2b2lkIDAhPT11LmNhbWVyYSYmdGhpcy5fYWRkTm9kZVJlZih0aGlzLmNhbWVyYUNhY2hlLHUuY2FtZXJhKX19LGoucHJvdG90eXBlLl9hZGROb2RlUmVmPWZ1bmN0aW9uKHQsZSl7dm9pZCAwIT09ZSYmKHZvaWQgMD09PXQucmVmc1tlXSYmKHQucmVmc1tlXT10LnVzZXNbZV09MCksdC5yZWZzW2VdKyspfSxqLnByb3RvdHlwZS5fZ2V0Tm9kZVJlZj1mdW5jdGlvbih0LGUsbil7aWYodC5yZWZzW2VdPD0xKXJldHVybiBuO3ZhciByPW4uY2xvbmUoKTtyZXR1cm4gci5uYW1lKz1cIl9pbnN0YW5jZV9cIit0LnVzZXNbZV0rKyxyfSxqLnByb3RvdHlwZS5faW52b2tlT25lPWZ1bmN0aW9uKHQpe3ZhciBlPU9iamVjdC52YWx1ZXModGhpcy5wbHVnaW5zKTtlLnB1c2godGhpcyk7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciByPXQoZVtuXSk7aWYocilyZXR1cm4gcn19LGoucHJvdG90eXBlLl9pbnZva2VBbGw9ZnVuY3Rpb24odCl7dmFyIGU9T2JqZWN0LnZhbHVlcyh0aGlzLnBsdWdpbnMpO2UudW5zaGlmdCh0aGlzKTtmb3IodmFyIG49W10scj0wO3I8ZS5sZW5ndGg7cisrKXt2YXIgaT10KGVbcl0pO2kmJm4ucHVzaChpKX1yZXR1cm4gbn0sai5wcm90b3R5cGUuZ2V0RGVwZW5kZW5jeT1mdW5jdGlvbih0LGUpe3ZhciBuPXQrXCI6XCIrZSxyPXRoaXMuY2FjaGUuZ2V0KG4pO2lmKCFyKXtzd2l0Y2godCl7Y2FzZVwic2NlbmVcIjpyPXRoaXMubG9hZFNjZW5lKGUpO2JyZWFrO2Nhc2VcIm5vZGVcIjpyPXRoaXMubG9hZE5vZGUoZSk7YnJlYWs7Y2FzZVwibWVzaFwiOnI9dGhpcy5faW52b2tlT25lKChmdW5jdGlvbih0KXtyZXR1cm4gdC5sb2FkTWVzaCYmdC5sb2FkTWVzaChlKX0pKTticmVhaztjYXNlXCJhY2Nlc3NvclwiOnI9dGhpcy5sb2FkQWNjZXNzb3IoZSk7YnJlYWs7Y2FzZVwiYnVmZmVyVmlld1wiOnI9dGhpcy5faW52b2tlT25lKChmdW5jdGlvbih0KXtyZXR1cm4gdC5sb2FkQnVmZmVyVmlldyYmdC5sb2FkQnVmZmVyVmlldyhlKX0pKTticmVhaztjYXNlXCJidWZmZXJcIjpyPXRoaXMubG9hZEJ1ZmZlcihlKTticmVhaztjYXNlXCJtYXRlcmlhbFwiOnI9dGhpcy5faW52b2tlT25lKChmdW5jdGlvbih0KXtyZXR1cm4gdC5sb2FkTWF0ZXJpYWwmJnQubG9hZE1hdGVyaWFsKGUpfSkpO2JyZWFrO2Nhc2VcInRleHR1cmVcIjpyPXRoaXMuX2ludm9rZU9uZSgoZnVuY3Rpb24odCl7cmV0dXJuIHQubG9hZFRleHR1cmUmJnQubG9hZFRleHR1cmUoZSl9KSk7YnJlYWs7Y2FzZVwic2tpblwiOnI9dGhpcy5sb2FkU2tpbihlKTticmVhaztjYXNlXCJhbmltYXRpb25cIjpyPXRoaXMubG9hZEFuaW1hdGlvbihlKTticmVhaztjYXNlXCJjYW1lcmFcIjpyPXRoaXMubG9hZENhbWVyYShlKTticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcihcIlVua25vd24gdHlwZTogXCIrdCl9dGhpcy5jYWNoZS5hZGQobixyKX1yZXR1cm4gcn0sai5wcm90b3R5cGUuZ2V0RGVwZW5kZW5jaWVzPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuY2FjaGUuZ2V0KHQpO2lmKCFlKXt2YXIgbj10aGlzLHI9dGhpcy5qc29uW3QrKFwibWVzaFwiPT09dD9cImVzXCI6XCJzXCIpXXx8W107ZT1Qcm9taXNlLmFsbChyLm1hcCgoZnVuY3Rpb24oZSxyKXtyZXR1cm4gbi5nZXREZXBlbmRlbmN5KHQscil9KSkpLHRoaXMuY2FjaGUuYWRkKHQsZSl9cmV0dXJuIGV9LGoucHJvdG90eXBlLmxvYWRCdWZmZXI9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5qc29uLmJ1ZmZlcnNbdF0scj10aGlzLmZpbGVMb2FkZXI7aWYoZS50eXBlJiZcImFycmF5YnVmZmVyXCIhPT1lLnR5cGUpdGhyb3cgbmV3IEVycm9yKFwiVEhSRUUuR0xURkxvYWRlcjogXCIrZS50eXBlK1wiIGJ1ZmZlciB0eXBlIGlzIG5vdCBzdXBwb3J0ZWQuXCIpO2lmKHZvaWQgMD09PWUudXJpJiYwPT09dClyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuZXh0ZW5zaW9uc1tuLktIUl9CSU5BUllfR0xURl0uYm9keSk7dmFyIGk9dGhpcy5vcHRpb25zO3JldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24odCxuKXtyLmxvYWQoeihlLnVyaSxpLnBhdGgpLHQsdm9pZCAwLChmdW5jdGlvbigpe24obmV3IEVycm9yKCdUSFJFRS5HTFRGTG9hZGVyOiBGYWlsZWQgdG8gbG9hZCBidWZmZXIgXCInK2UudXJpKydcIi4nKSl9KSl9KSl9LGoucHJvdG90eXBlLmxvYWRCdWZmZXJWaWV3PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuanNvbi5idWZmZXJWaWV3c1t0XTtyZXR1cm4gdGhpcy5nZXREZXBlbmRlbmN5KFwiYnVmZmVyXCIsZS5idWZmZXIpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPWUuYnl0ZUxlbmd0aHx8MCxyPWUuYnl0ZU9mZnNldHx8MDtyZXR1cm4gdC5zbGljZShyLHIrbil9KSl9LGoucHJvdG90eXBlLmxvYWRBY2Nlc3Nvcj1mdW5jdGlvbih0KXt2YXIgZT10aGlzLG49dGhpcy5qc29uLGk9dGhpcy5qc29uLmFjY2Vzc29yc1t0XTtpZih2b2lkIDA9PT1pLmJ1ZmZlclZpZXcmJnZvaWQgMD09PWkuc3BhcnNlKXJldHVybiBQcm9taXNlLnJlc29sdmUobnVsbCk7dmFyIG89W107cmV0dXJuIHZvaWQgMCE9PWkuYnVmZmVyVmlldz9vLnB1c2godGhpcy5nZXREZXBlbmRlbmN5KFwiYnVmZmVyVmlld1wiLGkuYnVmZmVyVmlldykpOm8ucHVzaChudWxsKSx2b2lkIDAhPT1pLnNwYXJzZSYmKG8ucHVzaCh0aGlzLmdldERlcGVuZGVuY3koXCJidWZmZXJWaWV3XCIsaS5zcGFyc2UuaW5kaWNlcy5idWZmZXJWaWV3KSksby5wdXNoKHRoaXMuZ2V0RGVwZW5kZW5jeShcImJ1ZmZlclZpZXdcIixpLnNwYXJzZS52YWx1ZXMuYnVmZmVyVmlldykpKSxQcm9taXNlLmFsbChvKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbyxhLHM9dFswXSxjPUlbaS50eXBlXSxsPVJbaS5jb21wb25lbnRUeXBlXSx1PWwuQllURVNfUEVSX0VMRU1FTlQsaD11KmMsZD1pLmJ5dGVPZmZzZXR8fDAscD12b2lkIDAhPT1pLmJ1ZmZlclZpZXc/bi5idWZmZXJWaWV3c1tpLmJ1ZmZlclZpZXddLmJ5dGVTdHJpZGU6dm9pZCAwLGY9ITA9PT1pLm5vcm1hbGl6ZWQ7aWYocCYmcCE9PWgpe3ZhciBtPU1hdGguZmxvb3IoZC9wKSxnPVwiSW50ZXJsZWF2ZWRCdWZmZXI6XCIraS5idWZmZXJWaWV3K1wiOlwiK2kuY29tcG9uZW50VHlwZStcIjpcIittK1wiOlwiK2kuY291bnQsdj1lLmNhY2hlLmdldChnKTt2fHwobz1uZXcgbChzLG0qcCxpLmNvdW50KnAvdSksdj1uZXcgci5JbnRlcmxlYXZlZEJ1ZmZlcihvLHAvdSksZS5jYWNoZS5hZGQoZyx2KSksYT1uZXcgci5JbnRlcmxlYXZlZEJ1ZmZlckF0dHJpYnV0ZSh2LGMsZCVwL3UsZil9ZWxzZSBvPW51bGw9PT1zP25ldyBsKGkuY291bnQqYyk6bmV3IGwocyxkLGkuY291bnQqYyksYT1uZXcgci5CdWZmZXJBdHRyaWJ1dGUobyxjLGYpO2lmKHZvaWQgMCE9PWkuc3BhcnNlKXt2YXIgeT1JLlNDQUxBUix4PVJbaS5zcGFyc2UuaW5kaWNlcy5jb21wb25lbnRUeXBlXSxiPWkuc3BhcnNlLmluZGljZXMuYnl0ZU9mZnNldHx8MCx3PWkuc3BhcnNlLnZhbHVlcy5ieXRlT2Zmc2V0fHwwLF89bmV3IHgodFsxXSxiLGkuc3BhcnNlLmNvdW50KnkpLE09bmV3IGwodFsyXSx3LGkuc3BhcnNlLmNvdW50KmMpO251bGwhPT1zJiYoYT1uZXcgci5CdWZmZXJBdHRyaWJ1dGUoYS5hcnJheS5zbGljZSgpLGEuaXRlbVNpemUsYS5ub3JtYWxpemVkKSk7Zm9yKHZhciBTPTAsVD1fLmxlbmd0aDtTPFQ7UysrKXt2YXIgRT1fW1NdO2lmKGEuc2V0WChFLE1bUypjXSksYz49MiYmYS5zZXRZKEUsTVtTKmMrMV0pLGM+PTMmJmEuc2V0WihFLE1bUypjKzJdKSxjPj00JiZhLnNldFcoRSxNW1MqYyszXSksYz49NSl0aHJvdyBuZXcgRXJyb3IoXCJUSFJFRS5HTFRGTG9hZGVyOiBVbnN1cHBvcnRlZCBpdGVtU2l6ZSBpbiBzcGFyc2UgQnVmZmVyQXR0cmlidXRlLlwiKX19cmV0dXJuIGF9KSl9LGoucHJvdG90eXBlLmxvYWRUZXh0dXJlPWZ1bmN0aW9uKHQpe3ZhciBlLHIsaT10aGlzLmpzb24sbz10aGlzLm9wdGlvbnMsYT1pLnRleHR1cmVzW3RdLHM9YS5leHRlbnNpb25zfHx7fTtyZXR1cm4oZT1zW24uTVNGVF9URVhUVVJFX0REU10/aS5pbWFnZXNbc1tuLk1TRlRfVEVYVFVSRV9ERFNdLnNvdXJjZV06aS5pbWFnZXNbYS5zb3VyY2VdKS51cmkmJihyPW8ubWFuYWdlci5nZXRIYW5kbGVyKGUudXJpKSkscnx8KHI9c1tuLk1TRlRfVEVYVFVSRV9ERFNdP3RoaXMuZXh0ZW5zaW9uc1tuLk1TRlRfVEVYVFVSRV9ERFNdLmRkc0xvYWRlcjp0aGlzLnRleHR1cmVMb2FkZXIpLHRoaXMubG9hZFRleHR1cmVJbWFnZSh0LGUscil9LGoucHJvdG90eXBlLmxvYWRUZXh0dXJlSW1hZ2U9ZnVuY3Rpb24odCxlLG4pe3ZhciBpPXRoaXMsbz10aGlzLmpzb24sYT10aGlzLm9wdGlvbnMscz1vLnRleHR1cmVzW3RdLGM9c2VsZi5VUkx8fHNlbGYud2Via2l0VVJMLGw9ZS51cmksdT0hMSxoPSEwO3JldHVyblwiaW1hZ2UvanBlZ1wiPT09ZS5taW1lVHlwZSYmKGg9ITEpLHZvaWQgMCE9PWUuYnVmZmVyVmlldyYmKGw9aS5nZXREZXBlbmRlbmN5KFwiYnVmZmVyVmlld1wiLGUuYnVmZmVyVmlldykudGhlbigoZnVuY3Rpb24odCl7aWYoXCJpbWFnZS9wbmdcIj09PWUubWltZVR5cGUpe3ZhciBuPW5ldyBEYXRhVmlldyh0LDI1LDEpLmdldFVpbnQ4KDAsITEpO2g9Nj09PW58fDQ9PT1ufHwzPT09bn11PSEwO3ZhciByPW5ldyBCbG9iKFt0XSx7dHlwZTplLm1pbWVUeXBlfSk7cmV0dXJuIGw9Yy5jcmVhdGVPYmplY3RVUkwocil9KSkpLFByb21pc2UucmVzb2x2ZShsKS50aGVuKChmdW5jdGlvbih0KXtyZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKGUsaSl7dmFyIG89ZTshMD09PW4uaXNJbWFnZUJpdG1hcExvYWRlciYmKG89ZnVuY3Rpb24odCl7ZShuZXcgci5DYW52YXNUZXh0dXJlKHQpKX0pLG4ubG9hZCh6KHQsYS5wYXRoKSxvLHZvaWQgMCxpKX0pKX0pKS50aGVuKChmdW5jdGlvbihlKXshMD09PXUmJmMucmV2b2tlT2JqZWN0VVJMKGwpLGUuZmxpcFk9ITEscy5uYW1lJiYoZS5uYW1lPXMubmFtZSksaHx8KGUuZm9ybWF0PXIuUkdCRm9ybWF0KTt2YXIgbj0oby5zYW1wbGVyc3x8e30pW3Muc2FtcGxlcl18fHt9O3JldHVybiBlLm1hZ0ZpbHRlcj1QW24ubWFnRmlsdGVyXXx8ci5MaW5lYXJGaWx0ZXIsZS5taW5GaWx0ZXI9UFtuLm1pbkZpbHRlcl18fHIuTGluZWFyTWlwbWFwTGluZWFyRmlsdGVyLGUud3JhcFM9Q1tuLndyYXBTXXx8ci5SZXBlYXRXcmFwcGluZyxlLndyYXBUPUNbbi53cmFwVF18fHIuUmVwZWF0V3JhcHBpbmcsaS5hc3NvY2lhdGlvbnMuc2V0KGUse3R5cGU6XCJ0ZXh0dXJlc1wiLGluZGV4OnR9KSxlfSkpfSxqLnByb3RvdHlwZS5hc3NpZ25UZXh0dXJlPWZ1bmN0aW9uKHQsZSxyKXt2YXIgaT10aGlzO3JldHVybiB0aGlzLmdldERlcGVuZGVuY3koXCJ0ZXh0dXJlXCIsci5pbmRleCkudGhlbigoZnVuY3Rpb24obyl7aWYodm9pZCAwPT09ci50ZXhDb29yZHx8MD09ci50ZXhDb29yZHx8XCJhb01hcFwiPT09ZSYmMT09ci50ZXhDb29yZHx8Y29uc29sZS53YXJuKFwiVEhSRUUuR0xURkxvYWRlcjogQ3VzdG9tIFVWIHNldCBcIityLnRleENvb3JkK1wiIGZvciB0ZXh0dXJlIFwiK2UrXCIgbm90IHlldCBzdXBwb3J0ZWQuXCIpLGkuZXh0ZW5zaW9uc1tuLktIUl9URVhUVVJFX1RSQU5TRk9STV0pe3ZhciBhPXZvaWQgMCE9PXIuZXh0ZW5zaW9ucz9yLmV4dGVuc2lvbnNbbi5LSFJfVEVYVFVSRV9UUkFOU0ZPUk1dOnZvaWQgMDtpZihhKXt2YXIgcz1pLmFzc29jaWF0aW9ucy5nZXQobyk7bz1pLmV4dGVuc2lvbnNbbi5LSFJfVEVYVFVSRV9UUkFOU0ZPUk1dLmV4dGVuZFRleHR1cmUobyxhKSxpLmFzc29jaWF0aW9ucy5zZXQobyxzKX19dFtlXT1vfSkpfSxqLnByb3RvdHlwZS5hc3NpZ25GaW5hbE1hdGVyaWFsPWZ1bmN0aW9uKHQpe3ZhciBlPXQuZ2VvbWV0cnksbj10Lm1hdGVyaWFsLGk9dm9pZCAwIT09ZS5hdHRyaWJ1dGVzLnRhbmdlbnQsbz12b2lkIDAhPT1lLmF0dHJpYnV0ZXMuY29sb3IsYT12b2lkIDA9PT1lLmF0dHJpYnV0ZXMubm9ybWFsLHM9ITA9PT10LmlzU2tpbm5lZE1lc2gsYz1PYmplY3Qua2V5cyhlLm1vcnBoQXR0cmlidXRlcykubGVuZ3RoPjAsbD1jJiZ2b2lkIDAhPT1lLm1vcnBoQXR0cmlidXRlcy5ub3JtYWw7aWYodC5pc1BvaW50cyl7dmFyIHU9XCJQb2ludHNNYXRlcmlhbDpcIituLnV1aWQsaD10aGlzLmNhY2hlLmdldCh1KTtofHwoaD1uZXcgci5Qb2ludHNNYXRlcmlhbCxyLk1hdGVyaWFsLnByb3RvdHlwZS5jb3B5LmNhbGwoaCxuKSxoLmNvbG9yLmNvcHkobi5jb2xvciksaC5tYXA9bi5tYXAsaC5zaXplQXR0ZW51YXRpb249ITEsdGhpcy5jYWNoZS5hZGQodSxoKSksbj1ofWVsc2UgaWYodC5pc0xpbmUpe3U9XCJMaW5lQmFzaWNNYXRlcmlhbDpcIituLnV1aWQ7dmFyIGQ9dGhpcy5jYWNoZS5nZXQodSk7ZHx8KGQ9bmV3IHIuTGluZUJhc2ljTWF0ZXJpYWwsci5NYXRlcmlhbC5wcm90b3R5cGUuY29weS5jYWxsKGQsbiksZC5jb2xvci5jb3B5KG4uY29sb3IpLHRoaXMuY2FjaGUuYWRkKHUsZCkpLG49ZH1pZihpfHxvfHxhfHxzfHxjKXt1PVwiQ2xvbmVkTWF0ZXJpYWw6XCIrbi51dWlkK1wiOlwiO24uaXNHTFRGU3BlY3VsYXJHbG9zc2luZXNzTWF0ZXJpYWwmJih1Kz1cInNwZWN1bGFyLWdsb3NzaW5lc3M6XCIpLHMmJih1Kz1cInNraW5uaW5nOlwiKSxpJiYodSs9XCJ2ZXJ0ZXgtdGFuZ2VudHM6XCIpLG8mJih1Kz1cInZlcnRleC1jb2xvcnM6XCIpLGEmJih1Kz1cImZsYXQtc2hhZGluZzpcIiksYyYmKHUrPVwibW9ycGgtdGFyZ2V0czpcIiksbCYmKHUrPVwibW9ycGgtbm9ybWFsczpcIik7dmFyIHA9dGhpcy5jYWNoZS5nZXQodSk7cHx8KHA9bi5jbG9uZSgpLHMmJihwLnNraW5uaW5nPSEwKSxpJiYocC52ZXJ0ZXhUYW5nZW50cz0hMCksbyYmKHAudmVydGV4Q29sb3JzPSEwKSxhJiYocC5mbGF0U2hhZGluZz0hMCksYyYmKHAubW9ycGhUYXJnZXRzPSEwKSxsJiYocC5tb3JwaE5vcm1hbHM9ITApLHRoaXMuY2FjaGUuYWRkKHUscCksdGhpcy5hc3NvY2lhdGlvbnMuc2V0KHAsdGhpcy5hc3NvY2lhdGlvbnMuZ2V0KG4pKSksbj1wfW4uYW9NYXAmJnZvaWQgMD09PWUuYXR0cmlidXRlcy51djImJnZvaWQgMCE9PWUuYXR0cmlidXRlcy51diYmZS5zZXRBdHRyaWJ1dGUoXCJ1djJcIixlLmF0dHJpYnV0ZXMudXYpLG4ubm9ybWFsU2NhbGUmJiFpJiYobi5ub3JtYWxTY2FsZS55PS1uLm5vcm1hbFNjYWxlLnkpLG4uY2xlYXJjb2F0Tm9ybWFsU2NhbGUmJiFpJiYobi5jbGVhcmNvYXROb3JtYWxTY2FsZS55PS1uLmNsZWFyY29hdE5vcm1hbFNjYWxlLnkpLHQubWF0ZXJpYWw9bn0sai5wcm90b3R5cGUuZ2V0TWF0ZXJpYWxUeXBlPWZ1bmN0aW9uKCl7cmV0dXJuIHIuTWVzaFN0YW5kYXJkTWF0ZXJpYWx9LGoucHJvdG90eXBlLmxvYWRNYXRlcmlhbD1mdW5jdGlvbih0KXt2YXIgZSxpPXRoaXMsbz10aGlzLmpzb24sYT10aGlzLmV4dGVuc2lvbnMscz1vLm1hdGVyaWFsc1t0XSxjPXt9LGw9cy5leHRlbnNpb25zfHx7fSx1PVtdO2lmKGxbbi5LSFJfTUFURVJJQUxTX1BCUl9TUEVDVUxBUl9HTE9TU0lORVNTXSl7dmFyIGg9YVtuLktIUl9NQVRFUklBTFNfUEJSX1NQRUNVTEFSX0dMT1NTSU5FU1NdO2U9aC5nZXRNYXRlcmlhbFR5cGUoKSx1LnB1c2goaC5leHRlbmRQYXJhbXMoYyxzLGkpKX1lbHNlIGlmKGxbbi5LSFJfTUFURVJJQUxTX1VOTElUXSl7dmFyIGQ9YVtuLktIUl9NQVRFUklBTFNfVU5MSVRdO2U9ZC5nZXRNYXRlcmlhbFR5cGUoKSx1LnB1c2goZC5leHRlbmRQYXJhbXMoYyxzLGkpKX1lbHNle3ZhciBwPXMucGJyTWV0YWxsaWNSb3VnaG5lc3N8fHt9O2lmKGMuY29sb3I9bmV3IHIuQ29sb3IoMSwxLDEpLGMub3BhY2l0eT0xLEFycmF5LmlzQXJyYXkocC5iYXNlQ29sb3JGYWN0b3IpKXt2YXIgZj1wLmJhc2VDb2xvckZhY3RvcjtjLmNvbG9yLmZyb21BcnJheShmKSxjLm9wYWNpdHk9ZlszXX12b2lkIDAhPT1wLmJhc2VDb2xvclRleHR1cmUmJnUucHVzaChpLmFzc2lnblRleHR1cmUoYyxcIm1hcFwiLHAuYmFzZUNvbG9yVGV4dHVyZSkpLGMubWV0YWxuZXNzPXZvaWQgMCE9PXAubWV0YWxsaWNGYWN0b3I/cC5tZXRhbGxpY0ZhY3RvcjoxLGMucm91Z2huZXNzPXZvaWQgMCE9PXAucm91Z2huZXNzRmFjdG9yP3Aucm91Z2huZXNzRmFjdG9yOjEsdm9pZCAwIT09cC5tZXRhbGxpY1JvdWdobmVzc1RleHR1cmUmJih1LnB1c2goaS5hc3NpZ25UZXh0dXJlKGMsXCJtZXRhbG5lc3NNYXBcIixwLm1ldGFsbGljUm91Z2huZXNzVGV4dHVyZSkpLHUucHVzaChpLmFzc2lnblRleHR1cmUoYyxcInJvdWdobmVzc01hcFwiLHAubWV0YWxsaWNSb3VnaG5lc3NUZXh0dXJlKSkpLGU9dGhpcy5faW52b2tlT25lKChmdW5jdGlvbihlKXtyZXR1cm4gZS5nZXRNYXRlcmlhbFR5cGUmJmUuZ2V0TWF0ZXJpYWxUeXBlKHQpfSkpLHUucHVzaChQcm9taXNlLmFsbCh0aGlzLl9pbnZva2VBbGwoKGZ1bmN0aW9uKGUpe3JldHVybiBlLmV4dGVuZE1hdGVyaWFsUGFyYW1zJiZlLmV4dGVuZE1hdGVyaWFsUGFyYW1zKHQsYyl9KSkpKX0hMD09PXMuZG91YmxlU2lkZWQmJihjLnNpZGU9ci5Eb3VibGVTaWRlKTt2YXIgbT1zLmFscGhhTW9kZXx8QjtyZXR1cm4gbT09PVU/KGMudHJhbnNwYXJlbnQ9ITAsYy5kZXB0aFdyaXRlPSExKTooYy50cmFuc3BhcmVudD0hMSxtPT09RiYmKGMuYWxwaGFUZXN0PXZvaWQgMCE9PXMuYWxwaGFDdXRvZmY/cy5hbHBoYUN1dG9mZjouNSkpLHZvaWQgMCE9PXMubm9ybWFsVGV4dHVyZSYmZSE9PXIuTWVzaEJhc2ljTWF0ZXJpYWwmJih1LnB1c2goaS5hc3NpZ25UZXh0dXJlKGMsXCJub3JtYWxNYXBcIixzLm5vcm1hbFRleHR1cmUpKSxjLm5vcm1hbFNjYWxlPW5ldyByLlZlY3RvcjIoMSwxKSx2b2lkIDAhPT1zLm5vcm1hbFRleHR1cmUuc2NhbGUmJmMubm9ybWFsU2NhbGUuc2V0KHMubm9ybWFsVGV4dHVyZS5zY2FsZSxzLm5vcm1hbFRleHR1cmUuc2NhbGUpKSx2b2lkIDAhPT1zLm9jY2x1c2lvblRleHR1cmUmJmUhPT1yLk1lc2hCYXNpY01hdGVyaWFsJiYodS5wdXNoKGkuYXNzaWduVGV4dHVyZShjLFwiYW9NYXBcIixzLm9jY2x1c2lvblRleHR1cmUpKSx2b2lkIDAhPT1zLm9jY2x1c2lvblRleHR1cmUuc3RyZW5ndGgmJihjLmFvTWFwSW50ZW5zaXR5PXMub2NjbHVzaW9uVGV4dHVyZS5zdHJlbmd0aCkpLHZvaWQgMCE9PXMuZW1pc3NpdmVGYWN0b3ImJmUhPT1yLk1lc2hCYXNpY01hdGVyaWFsJiYoYy5lbWlzc2l2ZT0obmV3IHIuQ29sb3IpLmZyb21BcnJheShzLmVtaXNzaXZlRmFjdG9yKSksdm9pZCAwIT09cy5lbWlzc2l2ZVRleHR1cmUmJmUhPT1yLk1lc2hCYXNpY01hdGVyaWFsJiZ1LnB1c2goaS5hc3NpZ25UZXh0dXJlKGMsXCJlbWlzc2l2ZU1hcFwiLHMuZW1pc3NpdmVUZXh0dXJlKSksUHJvbWlzZS5hbGwodSkudGhlbigoZnVuY3Rpb24oKXt2YXIgbztyZXR1cm4gbz1lPT09eT9hW24uS0hSX01BVEVSSUFMU19QQlJfU1BFQ1VMQVJfR0xPU1NJTkVTU10uY3JlYXRlTWF0ZXJpYWwoYyk6bmV3IGUoYykscy5uYW1lJiYoby5uYW1lPXMubmFtZSksby5tYXAmJihvLm1hcC5lbmNvZGluZz1yLnNSR0JFbmNvZGluZyksby5lbWlzc2l2ZU1hcCYmKG8uZW1pc3NpdmVNYXAuZW5jb2Rpbmc9ci5zUkdCRW5jb2RpbmcpLEgobyxzKSxpLmFzc29jaWF0aW9ucy5zZXQobyx7dHlwZTpcIm1hdGVyaWFsc1wiLGluZGV4OnR9KSxzLmV4dGVuc2lvbnMmJkcoYSxvLHMpLG99KSl9LGoucHJvdG90eXBlLmNyZWF0ZVVuaXF1ZU5hbWU9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXIuUHJvcGVydHlCaW5kaW5nLnNhbml0aXplTm9kZU5hbWUodHx8XCJcIiksbj0xO3RoaXMubm9kZU5hbWVzVXNlZFtlXTsrK24pZT10K1wiX1wiK247cmV0dXJuIHRoaXMubm9kZU5hbWVzVXNlZFtlXT0hMCxlfSxqLnByb3RvdHlwZS5sb2FkR2VvbWV0cmllcz1mdW5jdGlvbih0KXt2YXIgZT10aGlzLGk9dGhpcy5leHRlbnNpb25zLG89dGhpcy5wcmltaXRpdmVDYWNoZTtmdW5jdGlvbiBhKHQpe3JldHVybiBpW24uS0hSX0RSQUNPX01FU0hfQ09NUFJFU1NJT05dLmRlY29kZVByaW1pdGl2ZSh0LGUpLnRoZW4oKGZ1bmN0aW9uKG4pe3JldHVybiBXKG4sdCxlKX0pKX1mb3IodmFyIHMsYyxsPVtdLHU9MCxoPXQubGVuZ3RoO3U8aDt1Kyspe3ZhciBkLHA9dFt1XSxmPShjPXZvaWQgMCwoYz0ocz1wKS5leHRlbnNpb25zJiZzLmV4dGVuc2lvbnNbbi5LSFJfRFJBQ09fTUVTSF9DT01QUkVTU0lPTl0pP1wiZHJhY286XCIrYy5idWZmZXJWaWV3K1wiOlwiK2MuaW5kaWNlcytcIjpcIitWKGMuYXR0cmlidXRlcyk6cy5pbmRpY2VzK1wiOlwiK1Yocy5hdHRyaWJ1dGVzKStcIjpcIitzLm1vZGUpLG09b1tmXTtpZihtKWwucHVzaChtLnByb21pc2UpO2Vsc2UgZD1wLmV4dGVuc2lvbnMmJnAuZXh0ZW5zaW9uc1tuLktIUl9EUkFDT19NRVNIX0NPTVBSRVNTSU9OXT9hKHApOlcobmV3IHIuQnVmZmVyR2VvbWV0cnkscCxlKSxvW2ZdPXtwcmltaXRpdmU6cCxwcm9taXNlOmR9LGwucHVzaChkKX1yZXR1cm4gUHJvbWlzZS5hbGwobCl9LGoucHJvdG90eXBlLmxvYWRNZXNoPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxuPXRoaXMsaT10aGlzLmpzb24sbz10aGlzLmV4dGVuc2lvbnMsYT1pLm1lc2hlc1t0XSxzPWEucHJpbWl0aXZlcyxjPVtdLGw9MCx1PXMubGVuZ3RoO2w8dTtsKyspe3ZhciBoPXZvaWQgMD09PXNbbF0ubWF0ZXJpYWw/KHZvaWQgMD09PShlPXRoaXMuY2FjaGUpLkRlZmF1bHRNYXRlcmlhbCYmKGUuRGVmYXVsdE1hdGVyaWFsPW5ldyByLk1lc2hTdGFuZGFyZE1hdGVyaWFsKHtjb2xvcjoxNjc3NzIxNSxlbWlzc2l2ZTowLG1ldGFsbmVzczoxLHJvdWdobmVzczoxLHRyYW5zcGFyZW50OiExLGRlcHRoVGVzdDohMCxzaWRlOnIuRnJvbnRTaWRlfSkpLGUuRGVmYXVsdE1hdGVyaWFsKTp0aGlzLmdldERlcGVuZGVuY3koXCJtYXRlcmlhbFwiLHNbbF0ubWF0ZXJpYWwpO2MucHVzaChoKX1yZXR1cm4gYy5wdXNoKG4ubG9hZEdlb21ldHJpZXMocykpLFByb21pc2UuYWxsKGMpLnRoZW4oKGZ1bmN0aW9uKGUpe2Zvcih2YXIgaT1lLnNsaWNlKDAsZS5sZW5ndGgtMSksYz1lW2UubGVuZ3RoLTFdLGw9W10sdT0wLGg9Yy5sZW5ndGg7dTxoO3UrKyl7dmFyIGQscD1jW3VdLGY9c1t1XSxtPWlbdV07aWYoZi5tb2RlPT09RXx8Zi5tb2RlPT09QXx8Zi5tb2RlPT09THx8dm9pZCAwPT09Zi5tb2RlKSEwIT09KGQ9ITA9PT1hLmlzU2tpbm5lZE1lc2g/bmV3IHIuU2tpbm5lZE1lc2gocCxtKTpuZXcgci5NZXNoKHAsbSkpLmlzU2tpbm5lZE1lc2h8fGQuZ2VvbWV0cnkuYXR0cmlidXRlcy5za2luV2VpZ2h0Lm5vcm1hbGl6ZWR8fGQubm9ybWFsaXplU2tpbldlaWdodHMoKSxmLm1vZGU9PT1BP2QuZ2VvbWV0cnk9WChkLmdlb21ldHJ5LHIuVHJpYW5nbGVTdHJpcERyYXdNb2RlKTpmLm1vZGU9PT1MJiYoZC5nZW9tZXRyeT1YKGQuZ2VvbWV0cnksci5UcmlhbmdsZUZhbkRyYXdNb2RlKSk7ZWxzZSBpZihmLm1vZGU9PT1NKWQ9bmV3IHIuTGluZVNlZ21lbnRzKHAsbSk7ZWxzZSBpZihmLm1vZGU9PT1UKWQ9bmV3IHIuTGluZShwLG0pO2Vsc2UgaWYoZi5tb2RlPT09UylkPW5ldyByLkxpbmVMb29wKHAsbSk7ZWxzZXtpZihmLm1vZGUhPT1fKXRocm93IG5ldyBFcnJvcihcIlRIUkVFLkdMVEZMb2FkZXI6IFByaW1pdGl2ZSBtb2RlIHVuc3VwcG9ydGVkOiBcIitmLm1vZGUpO2Q9bmV3IHIuUG9pbnRzKHAsbSl9T2JqZWN0LmtleXMoZC5nZW9tZXRyeS5tb3JwaEF0dHJpYnV0ZXMpLmxlbmd0aD4wJiZrKGQsYSksZC5uYW1lPW4uY3JlYXRlVW5pcXVlTmFtZShhLm5hbWV8fFwibWVzaF9cIit0KSxIKGQsYSksZi5leHRlbnNpb25zJiZHKG8sZCxmKSxuLmFzc2lnbkZpbmFsTWF0ZXJpYWwoZCksbC5wdXNoKGQpfWlmKDE9PT1sLmxlbmd0aClyZXR1cm4gbFswXTt2YXIgZz1uZXcgci5Hcm91cDtmb3IodT0wLGg9bC5sZW5ndGg7dTxoO3UrKylnLmFkZChsW3VdKTtyZXR1cm4gZ30pKX0sai5wcm90b3R5cGUubG9hZENhbWVyYT1mdW5jdGlvbih0KXt2YXIgZSxuPXRoaXMuanNvbi5jYW1lcmFzW3RdLGk9bltuLnR5cGVdO2lmKGkpcmV0dXJuXCJwZXJzcGVjdGl2ZVwiPT09bi50eXBlP2U9bmV3IHIuUGVyc3BlY3RpdmVDYW1lcmEoci5NYXRoVXRpbHMucmFkVG9EZWcoaS55Zm92KSxpLmFzcGVjdFJhdGlvfHwxLGkuem5lYXJ8fDEsaS56ZmFyfHwyZTYpOlwib3J0aG9ncmFwaGljXCI9PT1uLnR5cGUmJihlPW5ldyByLk9ydGhvZ3JhcGhpY0NhbWVyYSgtaS54bWFnLGkueG1hZyxpLnltYWcsLWkueW1hZyxpLnpuZWFyLGkuemZhcikpLG4ubmFtZSYmKGUubmFtZT10aGlzLmNyZWF0ZVVuaXF1ZU5hbWUobi5uYW1lKSksSChlLG4pLFByb21pc2UucmVzb2x2ZShlKTtjb25zb2xlLndhcm4oXCJUSFJFRS5HTFRGTG9hZGVyOiBNaXNzaW5nIGNhbWVyYSBwYXJhbWV0ZXJzLlwiKX0sai5wcm90b3R5cGUubG9hZFNraW49ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5qc29uLnNraW5zW3RdLG49e2pvaW50czplLmpvaW50c307cmV0dXJuIHZvaWQgMD09PWUuaW52ZXJzZUJpbmRNYXRyaWNlcz9Qcm9taXNlLnJlc29sdmUobik6dGhpcy5nZXREZXBlbmRlbmN5KFwiYWNjZXNzb3JcIixlLmludmVyc2VCaW5kTWF0cmljZXMpLnRoZW4oKGZ1bmN0aW9uKHQpe3JldHVybiBuLmludmVyc2VCaW5kTWF0cmljZXM9dCxufSkpfSxqLnByb3RvdHlwZS5sb2FkQW5pbWF0aW9uPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLmpzb24uYW5pbWF0aW9uc1t0XSxuPVtdLGk9W10sbz1bXSxhPVtdLHM9W10sYz0wLGw9ZS5jaGFubmVscy5sZW5ndGg7YzxsO2MrKyl7dmFyIHU9ZS5jaGFubmVsc1tjXSxoPWUuc2FtcGxlcnNbdS5zYW1wbGVyXSxkPXUudGFyZ2V0LHA9dm9pZCAwIT09ZC5ub2RlP2Qubm9kZTpkLmlkLGY9dm9pZCAwIT09ZS5wYXJhbWV0ZXJzP2UucGFyYW1ldGVyc1toLmlucHV0XTpoLmlucHV0LG09dm9pZCAwIT09ZS5wYXJhbWV0ZXJzP2UucGFyYW1ldGVyc1toLm91dHB1dF06aC5vdXRwdXQ7bi5wdXNoKHRoaXMuZ2V0RGVwZW5kZW5jeShcIm5vZGVcIixwKSksaS5wdXNoKHRoaXMuZ2V0RGVwZW5kZW5jeShcImFjY2Vzc29yXCIsZikpLG8ucHVzaCh0aGlzLmdldERlcGVuZGVuY3koXCJhY2Nlc3NvclwiLG0pKSxhLnB1c2goaCkscy5wdXNoKGQpfXJldHVybiBQcm9taXNlLmFsbChbUHJvbWlzZS5hbGwobiksUHJvbWlzZS5hbGwoaSksUHJvbWlzZS5hbGwobyksUHJvbWlzZS5hbGwoYSksUHJvbWlzZS5hbGwocyldKS50aGVuKChmdW5jdGlvbihuKXtmb3IodmFyIGk9blswXSxvPW5bMV0sYT1uWzJdLHM9blszXSxjPW5bNF0sbD1bXSx1PTAsaD1pLmxlbmd0aDt1PGg7dSsrKXt2YXIgZD1pW3VdLHA9b1t1XSxmPWFbdV0sbT1zW3VdLGc9Y1t1XTtpZih2b2lkIDAhPT1kKXt2YXIgdjtzd2l0Y2goZC51cGRhdGVNYXRyaXgoKSxkLm1hdHJpeEF1dG9VcGRhdGU9ITAsTltnLnBhdGhdKXtjYXNlIE4ud2VpZ2h0czp2PXIuTnVtYmVyS2V5ZnJhbWVUcmFjazticmVhaztjYXNlIE4ucm90YXRpb246dj1yLlF1YXRlcm5pb25LZXlmcmFtZVRyYWNrO2JyZWFrO2Nhc2UgTi5wb3NpdGlvbjpjYXNlIE4uc2NhbGU6ZGVmYXVsdDp2PXIuVmVjdG9yS2V5ZnJhbWVUcmFja312YXIgeT1kLm5hbWU/ZC5uYW1lOmQudXVpZCx4PXZvaWQgMCE9PW0uaW50ZXJwb2xhdGlvbj9EW20uaW50ZXJwb2xhdGlvbl06ci5JbnRlcnBvbGF0ZUxpbmVhcixiPVtdO05bZy5wYXRoXT09PU4ud2VpZ2h0cz9kLnRyYXZlcnNlKChmdW5jdGlvbih0KXshMD09PXQuaXNNZXNoJiZ0Lm1vcnBoVGFyZ2V0SW5mbHVlbmNlcyYmYi5wdXNoKHQubmFtZT90Lm5hbWU6dC51dWlkKX0pKTpiLnB1c2goeSk7dmFyIF89Zi5hcnJheTtpZihmLm5vcm1hbGl6ZWQpe3ZhciBNO2lmKF8uY29uc3RydWN0b3I9PT1JbnQ4QXJyYXkpTT0xLzEyNztlbHNlIGlmKF8uY29uc3RydWN0b3I9PT1VaW50OEFycmF5KU09MS8yNTU7ZWxzZSBpZihfLmNvbnN0cnVjdG9yPT1JbnQxNkFycmF5KU09MS8zMjc2NztlbHNle2lmKF8uY29uc3RydWN0b3IhPT1VaW50MTZBcnJheSl0aHJvdyBuZXcgRXJyb3IoXCJUSFJFRS5HTFRGTG9hZGVyOiBVbnN1cHBvcnRlZCBvdXRwdXQgYWNjZXNzb3IgY29tcG9uZW50IHR5cGUuXCIpO009MS82NTUzNX1mb3IodmFyIFM9bmV3IEZsb2F0MzJBcnJheShfLmxlbmd0aCksVD0wLEU9Xy5sZW5ndGg7VDxFO1QrKylTW1RdPV9bVF0qTTtfPVN9Zm9yKFQ9MCxFPWIubGVuZ3RoO1Q8RTtUKyspe3ZhciBBPW5ldyB2KGJbVF0rXCIuXCIrTltnLnBhdGhdLHAuYXJyYXksXyx4KTtcIkNVQklDU1BMSU5FXCI9PT1tLmludGVycG9sYXRpb24mJihBLmNyZWF0ZUludGVycG9sYW50PWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgdyh0aGlzLnRpbWVzLHRoaXMudmFsdWVzLHRoaXMuZ2V0VmFsdWVTaXplKCkvMyx0KX0sQS5jcmVhdGVJbnRlcnBvbGFudC5pc0ludGVycG9sYW50RmFjdG9yeU1ldGhvZEdMVEZDdWJpY1NwbGluZT0hMCksbC5wdXNoKEEpfX19dmFyIEw9ZS5uYW1lP2UubmFtZTpcImFuaW1hdGlvbl9cIit0O3JldHVybiBuZXcgci5BbmltYXRpb25DbGlwKEwsdm9pZCAwLGwpfSkpfSxqLnByb3RvdHlwZS5sb2FkTm9kZT1mdW5jdGlvbih0KXt2YXIgZSxuPXRoaXMuanNvbixpPXRoaXMuZXh0ZW5zaW9ucyxvPXRoaXMsYT1uLm5vZGVzW3RdLHM9YS5uYW1lP28uY3JlYXRlVW5pcXVlTmFtZShhLm5hbWUpOlwiXCI7cmV0dXJuKGU9W10sdm9pZCAwIT09YS5tZXNoJiZlLnB1c2goby5nZXREZXBlbmRlbmN5KFwibWVzaFwiLGEubWVzaCkudGhlbigoZnVuY3Rpb24odCl7dmFyIGU9by5fZ2V0Tm9kZVJlZihvLm1lc2hDYWNoZSxhLm1lc2gsdCk7cmV0dXJuIHZvaWQgMCE9PWEud2VpZ2h0cyYmZS50cmF2ZXJzZSgoZnVuY3Rpb24odCl7aWYodC5pc01lc2gpZm9yKHZhciBlPTAsbj1hLndlaWdodHMubGVuZ3RoO2U8bjtlKyspdC5tb3JwaFRhcmdldEluZmx1ZW5jZXNbZV09YS53ZWlnaHRzW2VdfSkpLGV9KSkpLHZvaWQgMCE9PWEuY2FtZXJhJiZlLnB1c2goby5nZXREZXBlbmRlbmN5KFwiY2FtZXJhXCIsYS5jYW1lcmEpLnRoZW4oKGZ1bmN0aW9uKHQpe3JldHVybiBvLl9nZXROb2RlUmVmKG8uY2FtZXJhQ2FjaGUsYS5jYW1lcmEsdCl9KSkpLG8uX2ludm9rZUFsbCgoZnVuY3Rpb24oZSl7cmV0dXJuIGUuY3JlYXRlTm9kZUF0dGFjaG1lbnQmJmUuY3JlYXRlTm9kZUF0dGFjaG1lbnQodCl9KSkuZm9yRWFjaCgoZnVuY3Rpb24odCl7ZS5wdXNoKHQpfSkpLFByb21pc2UuYWxsKGUpKS50aGVuKChmdW5jdGlvbihlKXt2YXIgbjtpZigobj0hMD09PWEuaXNCb25lP25ldyByLkJvbmU6ZS5sZW5ndGg+MT9uZXcgci5Hcm91cDoxPT09ZS5sZW5ndGg/ZVswXTpuZXcgci5PYmplY3QzRCkhPT1lWzBdKWZvcih2YXIgYz0wLGw9ZS5sZW5ndGg7YzxsO2MrKyluLmFkZChlW2NdKTtpZihhLm5hbWUmJihuLnVzZXJEYXRhLm5hbWU9YS5uYW1lLG4ubmFtZT1zKSxIKG4sYSksYS5leHRlbnNpb25zJiZHKGksbixhKSx2b2lkIDAhPT1hLm1hdHJpeCl7dmFyIHU9bmV3IHIuTWF0cml4NDt1LmZyb21BcnJheShhLm1hdHJpeCksbi5hcHBseU1hdHJpeDQodSl9ZWxzZSB2b2lkIDAhPT1hLnRyYW5zbGF0aW9uJiZuLnBvc2l0aW9uLmZyb21BcnJheShhLnRyYW5zbGF0aW9uKSx2b2lkIDAhPT1hLnJvdGF0aW9uJiZuLnF1YXRlcm5pb24uZnJvbUFycmF5KGEucm90YXRpb24pLHZvaWQgMCE9PWEuc2NhbGUmJm4uc2NhbGUuZnJvbUFycmF5KGEuc2NhbGUpO3JldHVybiBvLmFzc29jaWF0aW9ucy5zZXQobix7dHlwZTpcIm5vZGVzXCIsaW5kZXg6dH0pLG59KSl9LGoucHJvdG90eXBlLmxvYWRTY2VuZT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSxuLGksbyl7dmFyIGE9aS5ub2Rlc1tlXTtyZXR1cm4gby5nZXREZXBlbmRlbmN5KFwibm9kZVwiLGUpLnRoZW4oKGZ1bmN0aW9uKHQpe3JldHVybiB2b2lkIDA9PT1hLnNraW4/dDpvLmdldERlcGVuZGVuY3koXCJza2luXCIsYS5za2luKS50aGVuKChmdW5jdGlvbih0KXtmb3IodmFyIG49W10scj0wLGk9KGU9dCkuam9pbnRzLmxlbmd0aDtyPGk7cisrKW4ucHVzaChvLmdldERlcGVuZGVuY3koXCJub2RlXCIsZS5qb2ludHNbcl0pKTtyZXR1cm4gUHJvbWlzZS5hbGwobil9KSkudGhlbigoZnVuY3Rpb24obil7cmV0dXJuIHQudHJhdmVyc2UoKGZ1bmN0aW9uKHQpe2lmKHQuaXNNZXNoKXtmb3IodmFyIGk9W10sbz1bXSxhPTAscz1uLmxlbmd0aDthPHM7YSsrKXt2YXIgYz1uW2FdO2lmKGMpe2kucHVzaChjKTt2YXIgbD1uZXcgci5NYXRyaXg0O3ZvaWQgMCE9PWUuaW52ZXJzZUJpbmRNYXRyaWNlcyYmbC5mcm9tQXJyYXkoZS5pbnZlcnNlQmluZE1hdHJpY2VzLmFycmF5LDE2KmEpLG8ucHVzaChsKX1lbHNlIGNvbnNvbGUud2FybignVEhSRUUuR0xURkxvYWRlcjogSm9pbnQgXCIlc1wiIGNvdWxkIG5vdCBiZSBmb3VuZC4nLGUuam9pbnRzW2FdKX10LmJpbmQobmV3IHIuU2tlbGV0b24oaSxvKSx0Lm1hdHJpeFdvcmxkKX19KSksdH0pKTt2YXIgZX0pKS50aGVuKChmdW5jdGlvbihlKXtuLmFkZChlKTt2YXIgcj1bXTtpZihhLmNoaWxkcmVuKWZvcih2YXIgcz1hLmNoaWxkcmVuLGM9MCxsPXMubGVuZ3RoO2M8bDtjKyspe3ZhciB1PXNbY107ci5wdXNoKHQodSxlLGksbykpfXJldHVybiBQcm9taXNlLmFsbChyKX0pKX1yZXR1cm4gZnVuY3Rpb24oZSl7dmFyIG49dGhpcy5qc29uLGk9dGhpcy5leHRlbnNpb25zLG89dGhpcy5qc29uLnNjZW5lc1tlXSxhPW5ldyByLkdyb3VwO28ubmFtZSYmKGEubmFtZT10aGlzLmNyZWF0ZVVuaXF1ZU5hbWUoby5uYW1lKSksSChhLG8pLG8uZXh0ZW5zaW9ucyYmRyhpLGEsbyk7Zm9yKHZhciBzPW8ubm9kZXN8fFtdLGM9W10sbD0wLHU9cy5sZW5ndGg7bDx1O2wrKyljLnB1c2godChzW2xdLGEsbix0aGlzKSk7cmV0dXJuIFByb21pc2UuYWxsKGMpLnRoZW4oKGZ1bmN0aW9uKCl7cmV0dXJuIGF9KSl9fSgpLHR9KCl9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjt2YXIgcj10aGlzJiZ0aGlzLl9fY3JlYXRlQmluZGluZ3x8KE9iamVjdC5jcmVhdGU/ZnVuY3Rpb24odCxlLG4scil7dm9pZCAwPT09ciYmKHI9biksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQscix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZVtuXX19KX06ZnVuY3Rpb24odCxlLG4scil7dm9pZCAwPT09ciYmKHI9biksdFtyXT1lW25dfSksaT10aGlzJiZ0aGlzLl9fZXhwb3J0U3Rhcnx8ZnVuY3Rpb24odCxlKXtmb3IodmFyIG4gaW4gdClcImRlZmF1bHRcIj09PW58fE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLG4pfHxyKGUsdCxuKX07T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZS5Eb3RTY3JlZW5TaGFkZXI9ZS5HbGl0Y2hQYXNzPWUuU2hhZGVyUGFzcz1lLlJlbmRlclBhc3M9ZS5FZmZlY3RDb21wb3Nlcj1lLldFQkdMPWUuT3JiaXRDb250cm9scz1lLldhdGVyPWUuU2t5PWUuQW5pbWF0aW9uQWN0aW9uPWUuVlJCdXR0b249ZS5TVkdMb2FkZXI9ZS5YUkNvbnRyb2xsZXJNb2RlbEZhY3Rvcnk9ZS5HTFRGTG9hZGVyPWUuRkJYTG9hZGVyPWUuQ29udmV4QnVmZmVyR2VvbWV0cnk9dm9pZCAwLGkobigwKSxlKTtjb25zdCBvPW4oMTUpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiQ29udmV4QnVmZmVyR2VvbWV0cnlcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gby5Db252ZXhCdWZmZXJHZW9tZXRyeX19KTtjb25zdCBhPW4oMTIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiRkJYTG9hZGVyXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGEuRkJYTG9hZGVyfX0pO2NvbnN0IHM9bigzKTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIkdMVEZMb2FkZXJcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gcy5HTFRGTG9hZGVyfX0pO2NvbnN0IGM9bigxNik7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJYUkNvbnRyb2xsZXJNb2RlbEZhY3RvcnlcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gYy5YUkNvbnRyb2xsZXJNb2RlbEZhY3Rvcnl9fSk7Y29uc3QgbD1uKDUpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiU1ZHTG9hZGVyXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGwuU1ZHTG9hZGVyfX0pO2NvbnN0IHU9big2KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIlZSQnV0dG9uXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHUuVlJCdXR0b259fSk7Y29uc3QgaD1uKDE3KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIkFuaW1hdGlvbkFjdGlvblwiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBoLkFuaW1hdGlvbkFjdGlvbn19KTtjb25zdCBkPW4oNyk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJTa3lcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZC5Ta3l9fSk7Y29uc3QgcD1uKDEzKTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIldhdGVyXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHAuV2F0ZXJ9fSk7Y29uc3QgZj1uKDgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiT3JiaXRDb250cm9sc1wiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBmLk9yYml0Q29udHJvbHN9fSk7Y29uc3QgbT1uKDkpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiV0VCR0xcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbS5XRUJHTH19KTt2YXIgZz1uKDE0KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIkVmZmVjdENvbXBvc2VyXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGcuRWZmZWN0Q29tcG9zZXJ9fSk7dmFyIHY9bigxMCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJSZW5kZXJQYXNzXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHYuUmVuZGVyUGFzc319KTt2YXIgeT1uKDIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiU2hhZGVyUGFzc1wiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiB5LlNoYWRlclBhc3N9fSk7dmFyIHg9bigxOCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJHbGl0Y2hQYXNzXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHguR2xpdGNoUGFzc319KTt2YXIgYj1uKDExKTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIkRvdFNjcmVlblNoYWRlclwiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBiLkRvdFNjcmVlblNoYWRlcn19KTtjb25zdCB3PVwiVGhyZWUuanMgclwiK24oMCkuUkVWSVNJT047Y29uc29sZS5sb2coYCVjICVjICVjICVjICVjICR7d30gJWMgaHR0cHM6Ly90aHJlZWpzLm9yZy9gLFwiYmFja2dyb3VuZDogI2ZmMDAwMFwiLFwiYmFja2dyb3VuZDogI2ZmZmYwMFwiLFwiYmFja2dyb3VuZDogIzAwZmYwMFwiLFwiYmFja2dyb3VuZDogIzAwZmZmZlwiLFwiY29sb3I6ICNmZmY7IGJhY2tncm91bmQ6ICMwMDAwMDA7XCIsXCJiYWNrZ3JvdW5kOiBub25lXCIpfSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7bi5yKGUpLG4uZChlLFwiU1ZHTG9hZGVyXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHd9KSk7dmFyIHIsaSxvLGEscyxjLGwsdSxoLGQscCxmLG0sZyx2LHkseCxiPW4oMCksdz1mdW5jdGlvbih0KXtiLkxvYWRlci5jYWxsKHRoaXMsdCksdGhpcy5kZWZhdWx0RFBJPTkwLHRoaXMuZGVmYXVsdFVuaXQ9XCJweFwifTt3LnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoYi5Mb2FkZXIucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6dyxsb2FkOmZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBpPXRoaXMsbz1uZXcgYi5GaWxlTG9hZGVyKGkubWFuYWdlcik7by5zZXRQYXRoKGkucGF0aCksby5zZXRSZXF1ZXN0SGVhZGVyKGkucmVxdWVzdEhlYWRlciksby5zZXRXaXRoQ3JlZGVudGlhbHMoaS53aXRoQ3JlZGVudGlhbHMpLG8ubG9hZCh0LChmdW5jdGlvbihuKXt0cnl7ZShpLnBhcnNlKG4pKX1jYXRjaChlKXtyP3IoZSk6Y29uc29sZS5lcnJvcihlKSxpLm1hbmFnZXIuaXRlbUVycm9yKHQpfX0pLG4scil9LHBhcnNlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7ZnVuY3Rpb24gbih0LGUsbixpLG8sYSxzLGMpe2lmKDAhPWUmJjAhPW4pe2k9aSpNYXRoLlBJLzE4MCxlPU1hdGguYWJzKGUpLG49TWF0aC5hYnMobik7dmFyIGw9KHMueC1jLngpLzIsdT0ocy55LWMueSkvMixoPU1hdGguY29zKGkpKmwrTWF0aC5zaW4oaSkqdSxkPS1NYXRoLnNpbihpKSpsK01hdGguY29zKGkpKnUscD1lKmUsZj1uKm4sbT1oKmgsZz1kKmQsdj1tL3ArZy9mO2lmKHY+MSl7dmFyIHk9TWF0aC5zcXJ0KHYpO3A9KGUqPXkpKmUsZj0obio9eSkqbn12YXIgeD1wKmcrZiptLGI9KHAqZi14KS94LHc9TWF0aC5zcXJ0KE1hdGgubWF4KDAsYikpO289PT1hJiYodz0tdyk7dmFyIF89dyplKmQvbixNPS13Km4qaC9lLFM9TWF0aC5jb3MoaSkqXy1NYXRoLnNpbihpKSpNKyhzLngrYy54KS8yLFQ9TWF0aC5zaW4oaSkqXytNYXRoLmNvcyhpKSpNKyhzLnkrYy55KS8yLEU9cigxLDAsKGgtXykvZSwoZC1NKS9uKSxBPXIoKGgtXykvZSwoZC1NKS9uLCgtaC1fKS9lLCgtZC1NKS9uKSUoMipNYXRoLlBJKTt0LmN1cnJlbnRQYXRoLmFic2VsbGlwc2UoUyxULGUsbixFLEUrQSwwPT09YSxpKX1lbHNlIHQubGluZVRvKGMueCxjLnkpfWZ1bmN0aW9uIHIodCxlLG4scil7dmFyIGk9dCpuK2UqcixvPU1hdGguc3FydCh0KnQrZSplKSpNYXRoLnNxcnQobipuK3IqciksYT1NYXRoLmFjb3MoTWF0aC5tYXgoLTEsTWF0aC5taW4oMSxpL28pKSk7cmV0dXJuIHQqci1lKm48MCYmKGE9LWEpLGF9ZnVuY3Rpb24gaSh0LGUpe2U9T2JqZWN0LmFzc2lnbih7fSxlKTt2YXIgbj17fTtpZih0Lmhhc0F0dHJpYnV0ZShcImNsYXNzXCIpKWZvcih2YXIgcj10LmdldEF0dHJpYnV0ZShcImNsYXNzXCIpLnNwbGl0KC9cXHMvKS5maWx0ZXIoQm9vbGVhbikubWFwKHQ9PnQudHJpbSgpKSxpPTA7aTxyLmxlbmd0aDtpKyspbj1PYmplY3QuYXNzaWduKG4scFtcIi5cIityW2ldXSk7ZnVuY3Rpb24gbyhyLGksbyl7dm9pZCAwPT09byYmKG89ZnVuY3Rpb24odCl7cmV0dXJuIHQuc3RhcnRzV2l0aChcInVybFwiKSYmY29uc29sZS53YXJuKFwiU1ZHTG9hZGVyOiB1cmwgYWNjZXNzIGluIGF0dHJpYnV0ZXMgaXMgbm90IGltcGxlbWVudGVkLlwiKSx0fSksdC5oYXNBdHRyaWJ1dGUocikmJihlW2ldPW8odC5nZXRBdHRyaWJ1dGUocikpKSxuW3JdJiYoZVtpXT1vKG5bcl0pKSx0LnN0eWxlJiZcIlwiIT09dC5zdHlsZVtyXSYmKGVbaV09byh0LnN0eWxlW3JdKSl9ZnVuY3Rpb24gYSh0KXtyZXR1cm4gTWF0aC5tYXgoMCxNYXRoLm1pbigxLGwodCkpKX1mdW5jdGlvbiBzKHQpe3JldHVybiBNYXRoLm1heCgwLGwodCkpfXJldHVybiB0Lmhhc0F0dHJpYnV0ZShcImlkXCIpJiYobj1PYmplY3QuYXNzaWduKG4scFtcIiNcIit0LmdldEF0dHJpYnV0ZShcImlkXCIpXSkpLG8oXCJmaWxsXCIsXCJmaWxsXCIpLG8oXCJmaWxsLW9wYWNpdHlcIixcImZpbGxPcGFjaXR5XCIsYSksbyhcIm9wYWNpdHlcIixcIm9wYWNpdHlcIixhKSxvKFwic3Ryb2tlXCIsXCJzdHJva2VcIiksbyhcInN0cm9rZS1vcGFjaXR5XCIsXCJzdHJva2VPcGFjaXR5XCIsYSksbyhcInN0cm9rZS13aWR0aFwiLFwic3Ryb2tlV2lkdGhcIixzKSxvKFwic3Ryb2tlLWxpbmVqb2luXCIsXCJzdHJva2VMaW5lSm9pblwiKSxvKFwic3Ryb2tlLWxpbmVjYXBcIixcInN0cm9rZUxpbmVDYXBcIiksbyhcInN0cm9rZS1taXRlcmxpbWl0XCIsXCJzdHJva2VNaXRlckxpbWl0XCIscyksbyhcInZpc2liaWxpdHlcIixcInZpc2liaWxpdHlcIiksZX1mdW5jdGlvbiBvKHQsZSl7cmV0dXJuIHQtKGUtdCl9ZnVuY3Rpb24gYSh0KXtmb3IodmFyIGU9dC5zcGxpdCgvW1xccyxdK3woPz1cXHM/WytcXC1dKS8pLG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIHI9ZVtuXTtpZihyLmluZGV4T2YoXCIuXCIpIT09ci5sYXN0SW5kZXhPZihcIi5cIikpZm9yKHZhciBpPXIuc3BsaXQoXCIuXCIpLG89MjtvPGkubGVuZ3RoO28rKyllLnNwbGljZShuK28tMSwwLFwiMC5cIitpW29dKTtlW25dPWwocil9cmV0dXJuIGV9dmFyIHM9W1wibW1cIixcImNtXCIsXCJpblwiLFwicHRcIixcInBjXCIsXCJweFwiXSxjPXttbTp7bW06MSxjbTouMSxpbjoxLzI1LjQscHQ6NzIvMjUuNCxwYzo2LzI1LjQscHg6LTF9LGNtOnttbToxMCxjbToxLGluOjEvMi41NCxwdDo3Mi8yLjU0LHBjOjYvMi41NCxweDotMX0saW46e21tOjI1LjQsY206Mi41NCxpbjoxLHB0OjcyLHBjOjYscHg6LTF9LHB0OnttbToyNS40LzcyLGNtOjIuNTQvNzIsaW46MS83MixwdDoxLHBjOjYvNzIscHg6LTF9LHBjOnttbToyNS40LzYsY206Mi41NC82LGluOjEvNixwdDoxMixwYzoxLHB4Oi0xfSxweDp7cHg6MX19O2Z1bmN0aW9uIGwodCl7dmFyIG49XCJweFwiO2lmKFwic3RyaW5nXCI9PXR5cGVvZiB0fHx0IGluc3RhbmNlb2YgU3RyaW5nKWZvcih2YXIgcj0wLGk9cy5sZW5ndGg7cjxpO3IrKyl7dmFyIG89c1tyXTtpZih0LmVuZHNXaXRoKG8pKXtuPW8sdD10LnN1YnN0cmluZygwLHQubGVuZ3RoLW8ubGVuZ3RoKTticmVha319dmFyIGE9dm9pZCAwO3JldHVyblwicHhcIj09PW4mJlwicHhcIiE9PWUuZGVmYXVsdFVuaXQ/YT1jLmluW2UuZGVmYXVsdFVuaXRdL2UuZGVmYXVsdERQSTooYT1jW25dW2UuZGVmYXVsdFVuaXRdKTwwJiYoYT1jW25dLmluKmUuZGVmYXVsdERQSSksYSpwYXJzZUZsb2F0KHQpfWZ1bmN0aW9uIHUodCl7dmFyIGU9dC5lbGVtZW50cztyZXR1cm4gTWF0aC5zcXJ0KGVbMF0qZVswXStlWzFdKmVbMV0pfWZ1bmN0aW9uIGgodCl7dmFyIGU9dC5lbGVtZW50cztyZXR1cm4gTWF0aC5zcXJ0KGVbM10qZVszXStlWzRdKmVbNF0pfXZhciBkPVtdLHA9e30sZj1bXSxtPW5ldyBiLk1hdHJpeDMsZz1uZXcgYi5NYXRyaXgzLHY9bmV3IGIuTWF0cml4Myx5PW5ldyBiLk1hdHJpeDMseD1uZXcgYi5WZWN0b3IyLHc9bmV3IGIuVmVjdG9yMyxfPW5ldyBiLk1hdHJpeDMsTT0obmV3IERPTVBhcnNlcikucGFyc2VGcm9tU3RyaW5nKHQsXCJpbWFnZS9zdmcreG1sXCIpO3JldHVybiBmdW5jdGlvbiB0KGUscil7aWYoMT09PWUubm9kZVR5cGUpe3ZhciBzPWZ1bmN0aW9uKHQpe2lmKCEodC5oYXNBdHRyaWJ1dGUoXCJ0cmFuc2Zvcm1cIil8fFwidXNlXCI9PT10Lm5vZGVOYW1lJiYodC5oYXNBdHRyaWJ1dGUoXCJ4XCIpfHx0Lmhhc0F0dHJpYnV0ZShcInlcIikpKSlyZXR1cm4gbnVsbDt2YXIgZT1mdW5jdGlvbih0KXt2YXIgZT1uZXcgYi5NYXRyaXgzLG49bTtpZihcInVzZVwiPT09dC5ub2RlTmFtZSYmKHQuaGFzQXR0cmlidXRlKFwieFwiKXx8dC5oYXNBdHRyaWJ1dGUoXCJ5XCIpKSl7dmFyIHI9bCh0LmdldEF0dHJpYnV0ZShcInhcIikpLGk9bCh0LmdldEF0dHJpYnV0ZShcInlcIikpO2UudHJhbnNsYXRlKHIsaSl9aWYodC5oYXNBdHRyaWJ1dGUoXCJ0cmFuc2Zvcm1cIikpZm9yKHZhciBvPXQuZ2V0QXR0cmlidXRlKFwidHJhbnNmb3JtXCIpLnNwbGl0KFwiKVwiKSxzPW8ubGVuZ3RoLTE7cz49MDtzLS0pe3ZhciBjPW9bc10udHJpbSgpO2lmKFwiXCIhPT1jKXt2YXIgdT1jLmluZGV4T2YoXCIoXCIpLGg9Yy5sZW5ndGg7aWYodT4wJiZ1PGgpe3ZhciBkPWMuc3Vic3RyKDAsdSkscD1hKGMuc3Vic3RyKHUrMSxoLXUtMSkpO3N3aXRjaChuLmlkZW50aXR5KCksZCl7Y2FzZVwidHJhbnNsYXRlXCI6aWYocC5sZW5ndGg+PTEpe2k9cj1wWzBdO3AubGVuZ3RoPj0yJiYoaT1wWzFdKSxuLnRyYW5zbGF0ZShyLGkpfWJyZWFrO2Nhc2VcInJvdGF0ZVwiOmlmKHAubGVuZ3RoPj0xKXt2YXIgZix4PTAsdz0wO2Y9LXBbMF0qTWF0aC5QSS8xODAscC5sZW5ndGg+PTMmJih4PXBbMV0sdz1wWzJdKSxnLmlkZW50aXR5KCkudHJhbnNsYXRlKC14LC13KSx2LmlkZW50aXR5KCkucm90YXRlKGYpLHkubXVsdGlwbHlNYXRyaWNlcyh2LGcpLGcuaWRlbnRpdHkoKS50cmFuc2xhdGUoeCx3KSxuLm11bHRpcGx5TWF0cmljZXMoZyx5KX1icmVhaztjYXNlXCJzY2FsZVwiOmlmKHAubGVuZ3RoPj0xKXt2YXIgXz1wWzBdLE09XztwLmxlbmd0aD49MiYmKE09cFsxXSksbi5zY2FsZShfLE0pfWJyZWFrO2Nhc2VcInNrZXdYXCI6MT09PXAubGVuZ3RoJiZuLnNldCgxLE1hdGgudGFuKHBbMF0qTWF0aC5QSS8xODApLDAsMCwxLDAsMCwwLDEpO2JyZWFrO2Nhc2VcInNrZXdZXCI6MT09PXAubGVuZ3RoJiZuLnNldCgxLDAsMCxNYXRoLnRhbihwWzBdKk1hdGguUEkvMTgwKSwxLDAsMCwwLDEpO2JyZWFrO2Nhc2VcIm1hdHJpeFwiOjY9PT1wLmxlbmd0aCYmbi5zZXQocFswXSxwWzJdLHBbNF0scFsxXSxwWzNdLHBbNV0sMCwwLDEpfX1lLnByZW11bHRpcGx5KG4pfX1yZXR1cm4gZX0odCk7Zi5sZW5ndGg+MCYmZS5wcmVtdWx0aXBseShmW2YubGVuZ3RoLTFdKTtyZXR1cm4gXy5jb3B5KGUpLGYucHVzaChlKSxlfShlKSxjPSEwLE09bnVsbDtzd2l0Y2goZS5ub2RlTmFtZSl7Y2FzZVwic3ZnXCI6YnJlYWs7Y2FzZVwic3R5bGVcIjohZnVuY3Rpb24odCl7aWYoIXQuc2hlZXR8fCF0LnNoZWV0LmNzc1J1bGVzfHwhdC5zaGVldC5jc3NSdWxlcy5sZW5ndGgpcmV0dXJuO2Zvcih2YXIgZT0wO2U8dC5zaGVldC5jc3NSdWxlcy5sZW5ndGg7ZSsrKXt2YXIgbj10LnNoZWV0LmNzc1J1bGVzW2VdO2lmKDE9PT1uLnR5cGUpZm9yKHZhciByPW4uc2VsZWN0b3JUZXh0LnNwbGl0KC8sL2dtKS5maWx0ZXIoQm9vbGVhbikubWFwKHQ9PnQudHJpbSgpKSxpPTA7aTxyLmxlbmd0aDtpKyspcFtyW2ldXT1PYmplY3QuYXNzaWduKHBbcltpXV18fHt9LG4uc3R5bGUpfX0oZSk7YnJlYWs7Y2FzZVwiZ1wiOnI9aShlLHIpO2JyZWFrO2Nhc2VcInBhdGhcIjpyPWkoZSxyKSxlLmhhc0F0dHJpYnV0ZShcImRcIikmJihNPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1uZXcgYi5TaGFwZVBhdGgscj1uZXcgYi5WZWN0b3IyLGk9bmV3IGIuVmVjdG9yMixzPW5ldyBiLlZlY3RvcjIsYz0hMCxsPSExLHU9dC5nZXRBdHRyaWJ1dGUoXCJkXCIpLm1hdGNoKC9bYS1kZi16XVteYS1kZi16XSovZ2kpLGg9MCxkPXUubGVuZ3RoO2g8ZDtoKyspe3ZhciBwPXVbaF0sZj1wLmNoYXJBdCgwKSxtPXAuc3Vic3RyKDEpLnRyaW0oKTtzd2l0Y2goITA9PT1jJiYobD0hMCxjPSExKSxmKXtjYXNlXCJNXCI6Zm9yKHZhciBnPWEobSksdj0wLHk9Zy5sZW5ndGg7djx5O3YrPTIpci54PWdbdiswXSxyLnk9Z1t2KzFdLGkueD1yLngsaS55PXIueSwwPT09dj9lLm1vdmVUbyhyLngsci55KTplLmxpbmVUbyhyLngsci55KSwwPT09diYmITA9PT1sJiZzLmNvcHkocik7YnJlYWs7Y2FzZVwiSFwiOmZvcihnPWEobSksdj0wLHk9Zy5sZW5ndGg7djx5O3YrKylyLng9Z1t2XSxpLng9ci54LGkueT1yLnksZS5saW5lVG8oci54LHIueSksMD09PXYmJiEwPT09bCYmcy5jb3B5KHIpO2JyZWFrO2Nhc2VcIlZcIjpmb3IoZz1hKG0pLHY9MCx5PWcubGVuZ3RoO3Y8eTt2Kyspci55PWdbdl0saS54PXIueCxpLnk9ci55LGUubGluZVRvKHIueCxyLnkpLDA9PT12JiYhMD09PWwmJnMuY29weShyKTticmVhaztjYXNlXCJMXCI6Zm9yKGc9YShtKSx2PTAseT1nLmxlbmd0aDt2PHk7dis9MilyLng9Z1t2KzBdLHIueT1nW3YrMV0saS54PXIueCxpLnk9ci55LGUubGluZVRvKHIueCxyLnkpLDA9PT12JiYhMD09PWwmJnMuY29weShyKTticmVhaztjYXNlXCJDXCI6Zm9yKGc9YShtKSx2PTAseT1nLmxlbmd0aDt2PHk7dis9NillLmJlemllckN1cnZlVG8oZ1t2KzBdLGdbdisxXSxnW3YrMl0sZ1t2KzNdLGdbdis0XSxnW3YrNV0pLGkueD1nW3YrMl0saS55PWdbdiszXSxyLng9Z1t2KzRdLHIueT1nW3YrNV0sMD09PXYmJiEwPT09bCYmcy5jb3B5KHIpO2JyZWFrO2Nhc2VcIlNcIjpmb3IoZz1hKG0pLHY9MCx5PWcubGVuZ3RoO3Y8eTt2Kz00KWUuYmV6aWVyQ3VydmVUbyhvKHIueCxpLngpLG8oci55LGkueSksZ1t2KzBdLGdbdisxXSxnW3YrMl0sZ1t2KzNdKSxpLng9Z1t2KzBdLGkueT1nW3YrMV0sci54PWdbdisyXSxyLnk9Z1t2KzNdLDA9PT12JiYhMD09PWwmJnMuY29weShyKTticmVhaztjYXNlXCJRXCI6Zm9yKGc9YShtKSx2PTAseT1nLmxlbmd0aDt2PHk7dis9NCllLnF1YWRyYXRpY0N1cnZlVG8oZ1t2KzBdLGdbdisxXSxnW3YrMl0sZ1t2KzNdKSxpLng9Z1t2KzBdLGkueT1nW3YrMV0sci54PWdbdisyXSxyLnk9Z1t2KzNdLDA9PT12JiYhMD09PWwmJnMuY29weShyKTticmVhaztjYXNlXCJUXCI6Zm9yKGc9YShtKSx2PTAseT1nLmxlbmd0aDt2PHk7dis9Mil7dmFyIHg9byhyLngsaS54KSx3PW8oci55LGkueSk7ZS5xdWFkcmF0aWNDdXJ2ZVRvKHgsdyxnW3YrMF0sZ1t2KzFdKSxpLng9eCxpLnk9dyxyLng9Z1t2KzBdLHIueT1nW3YrMV0sMD09PXYmJiEwPT09bCYmcy5jb3B5KHIpfWJyZWFrO2Nhc2VcIkFcIjpmb3IoZz1hKG0pLHY9MCx5PWcubGVuZ3RoO3Y8eTt2Kz03KWlmKGdbdis1XSE9ci54fHxnW3YrNl0hPXIueSl7dmFyIF89ci5jbG9uZSgpO3IueD1nW3YrNV0sci55PWdbdis2XSxpLng9ci54LGkueT1yLnksbihlLGdbdl0sZ1t2KzFdLGdbdisyXSxnW3YrM10sZ1t2KzRdLF8sciksMD09PXYmJiEwPT09bCYmcy5jb3B5KHIpfWJyZWFrO2Nhc2VcIm1cIjpmb3IoZz1hKG0pLHY9MCx5PWcubGVuZ3RoO3Y8eTt2Kz0yKXIueCs9Z1t2KzBdLHIueSs9Z1t2KzFdLGkueD1yLngsaS55PXIueSwwPT09dj9lLm1vdmVUbyhyLngsci55KTplLmxpbmVUbyhyLngsci55KSwwPT09diYmITA9PT1sJiZzLmNvcHkocik7YnJlYWs7Y2FzZVwiaFwiOmZvcihnPWEobSksdj0wLHk9Zy5sZW5ndGg7djx5O3YrKylyLngrPWdbdl0saS54PXIueCxpLnk9ci55LGUubGluZVRvKHIueCxyLnkpLDA9PT12JiYhMD09PWwmJnMuY29weShyKTticmVhaztjYXNlXCJ2XCI6Zm9yKGc9YShtKSx2PTAseT1nLmxlbmd0aDt2PHk7disrKXIueSs9Z1t2XSxpLng9ci54LGkueT1yLnksZS5saW5lVG8oci54LHIueSksMD09PXYmJiEwPT09bCYmcy5jb3B5KHIpO2JyZWFrO2Nhc2VcImxcIjpmb3IoZz1hKG0pLHY9MCx5PWcubGVuZ3RoO3Y8eTt2Kz0yKXIueCs9Z1t2KzBdLHIueSs9Z1t2KzFdLGkueD1yLngsaS55PXIueSxlLmxpbmVUbyhyLngsci55KSwwPT09diYmITA9PT1sJiZzLmNvcHkocik7YnJlYWs7Y2FzZVwiY1wiOmZvcihnPWEobSksdj0wLHk9Zy5sZW5ndGg7djx5O3YrPTYpZS5iZXppZXJDdXJ2ZVRvKHIueCtnW3YrMF0sci55K2dbdisxXSxyLngrZ1t2KzJdLHIueStnW3YrM10sci54K2dbdis0XSxyLnkrZ1t2KzVdKSxpLng9ci54K2dbdisyXSxpLnk9ci55K2dbdiszXSxyLngrPWdbdis0XSxyLnkrPWdbdis1XSwwPT09diYmITA9PT1sJiZzLmNvcHkocik7YnJlYWs7Y2FzZVwic1wiOmZvcihnPWEobSksdj0wLHk9Zy5sZW5ndGg7djx5O3YrPTQpZS5iZXppZXJDdXJ2ZVRvKG8oci54LGkueCksbyhyLnksaS55KSxyLngrZ1t2KzBdLHIueStnW3YrMV0sci54K2dbdisyXSxyLnkrZ1t2KzNdKSxpLng9ci54K2dbdiswXSxpLnk9ci55K2dbdisxXSxyLngrPWdbdisyXSxyLnkrPWdbdiszXSwwPT09diYmITA9PT1sJiZzLmNvcHkocik7YnJlYWs7Y2FzZVwicVwiOmZvcihnPWEobSksdj0wLHk9Zy5sZW5ndGg7djx5O3YrPTQpZS5xdWFkcmF0aWNDdXJ2ZVRvKHIueCtnW3YrMF0sci55K2dbdisxXSxyLngrZ1t2KzJdLHIueStnW3YrM10pLGkueD1yLngrZ1t2KzBdLGkueT1yLnkrZ1t2KzFdLHIueCs9Z1t2KzJdLHIueSs9Z1t2KzNdLDA9PT12JiYhMD09PWwmJnMuY29weShyKTticmVhaztjYXNlXCJ0XCI6Zm9yKGc9YShtKSx2PTAseT1nLmxlbmd0aDt2PHk7dis9Mil7eD1vKHIueCxpLngpLHc9byhyLnksaS55KTtlLnF1YWRyYXRpY0N1cnZlVG8oeCx3LHIueCtnW3YrMF0sci55K2dbdisxXSksaS54PXgsaS55PXcsci54PXIueCtnW3YrMF0sci55PXIueStnW3YrMV0sMD09PXYmJiEwPT09bCYmcy5jb3B5KHIpfWJyZWFrO2Nhc2VcImFcIjpmb3IoZz1hKG0pLHY9MCx5PWcubGVuZ3RoO3Y8eTt2Kz03KWlmKDAhPWdbdis1XXx8MCE9Z1t2KzZdKXtfPXIuY2xvbmUoKTtyLngrPWdbdis1XSxyLnkrPWdbdis2XSxpLng9ci54LGkueT1yLnksbihlLGdbdl0sZ1t2KzFdLGdbdisyXSxnW3YrM10sZ1t2KzRdLF8sciksMD09PXYmJiEwPT09bCYmcy5jb3B5KHIpfWJyZWFrO2Nhc2VcIlpcIjpjYXNlXCJ6XCI6ZS5jdXJyZW50UGF0aC5hdXRvQ2xvc2U9ITAsZS5jdXJyZW50UGF0aC5jdXJ2ZXMubGVuZ3RoPjAmJihyLmNvcHkocyksZS5jdXJyZW50UGF0aC5jdXJyZW50UG9pbnQuY29weShyKSxjPSEwKTticmVhaztkZWZhdWx0OmNvbnNvbGUud2FybihwKX1sPSExfXJldHVybiBlfShlKSk7YnJlYWs7Y2FzZVwicmVjdFwiOnI9aShlLHIpLE09ZnVuY3Rpb24odCl7dmFyIGU9bCh0LmdldEF0dHJpYnV0ZShcInhcIil8fDApLG49bCh0LmdldEF0dHJpYnV0ZShcInlcIil8fDApLHI9bCh0LmdldEF0dHJpYnV0ZShcInJ4XCIpfHwwKSxpPWwodC5nZXRBdHRyaWJ1dGUoXCJyeVwiKXx8MCksbz1sKHQuZ2V0QXR0cmlidXRlKFwid2lkdGhcIikpLGE9bCh0LmdldEF0dHJpYnV0ZShcImhlaWdodFwiKSkscz1uZXcgYi5TaGFwZVBhdGg7cy5tb3ZlVG8oZSsyKnIsbikscy5saW5lVG8oZStvLTIqcixuKSwoMCE9PXJ8fDAhPT1pKSYmcy5iZXppZXJDdXJ2ZVRvKGUrbyxuLGUrbyxuLGUrbyxuKzIqaSk7cy5saW5lVG8oZStvLG4rYS0yKmkpLCgwIT09cnx8MCE9PWkpJiZzLmJlemllckN1cnZlVG8oZStvLG4rYSxlK28sbithLGUrby0yKnIsbithKTtzLmxpbmVUbyhlKzIqcixuK2EpLCgwIT09cnx8MCE9PWkpJiZzLmJlemllckN1cnZlVG8oZSxuK2EsZSxuK2EsZSxuK2EtMippKTtzLmxpbmVUbyhlLG4rMippKSwoMCE9PXJ8fDAhPT1pKSYmcy5iZXppZXJDdXJ2ZVRvKGUsbixlLG4sZSsyKnIsbik7cmV0dXJuIHN9KGUpO2JyZWFrO2Nhc2VcInBvbHlnb25cIjpyPWkoZSxyKSxNPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUodCxlLGkpe3ZhciBvPWwoZSksYT1sKGkpOzA9PT1yP24ubW92ZVRvKG8sYSk6bi5saW5lVG8obyxhKSxyKyt9dmFyIG49bmV3IGIuU2hhcGVQYXRoLHI9MDtyZXR1cm4gdC5nZXRBdHRyaWJ1dGUoXCJwb2ludHNcIikucmVwbGFjZSgvKC0/W1xcZFxcLj9dKylbLHxcXHNdKC0/W1xcZFxcLj9dKykvZyxlKSxuLmN1cnJlbnRQYXRoLmF1dG9DbG9zZT0hMCxufShlKTticmVhaztjYXNlXCJwb2x5bGluZVwiOnI9aShlLHIpLE09ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSh0LGUsaSl7dmFyIG89bChlKSxhPWwoaSk7MD09PXI/bi5tb3ZlVG8obyxhKTpuLmxpbmVUbyhvLGEpLHIrK312YXIgbj1uZXcgYi5TaGFwZVBhdGgscj0wO3JldHVybiB0LmdldEF0dHJpYnV0ZShcInBvaW50c1wiKS5yZXBsYWNlKC8oLT9bXFxkXFwuP10rKVssfFxcc10oLT9bXFxkXFwuP10rKS9nLGUpLG4uY3VycmVudFBhdGguYXV0b0Nsb3NlPSExLG59KGUpO2JyZWFrO2Nhc2VcImNpcmNsZVwiOnI9aShlLHIpLE09ZnVuY3Rpb24odCl7dmFyIGU9bCh0LmdldEF0dHJpYnV0ZShcImN4XCIpKSxuPWwodC5nZXRBdHRyaWJ1dGUoXCJjeVwiKSkscj1sKHQuZ2V0QXR0cmlidXRlKFwiclwiKSksaT1uZXcgYi5QYXRoO2kuYWJzYXJjKGUsbixyLDAsMipNYXRoLlBJKTt2YXIgbz1uZXcgYi5TaGFwZVBhdGg7cmV0dXJuIG8uc3ViUGF0aHMucHVzaChpKSxvfShlKTticmVhaztjYXNlXCJlbGxpcHNlXCI6cj1pKGUsciksTT1mdW5jdGlvbih0KXt2YXIgZT1sKHQuZ2V0QXR0cmlidXRlKFwiY3hcIikpLG49bCh0LmdldEF0dHJpYnV0ZShcImN5XCIpKSxyPWwodC5nZXRBdHRyaWJ1dGUoXCJyeFwiKSksaT1sKHQuZ2V0QXR0cmlidXRlKFwicnlcIikpLG89bmV3IGIuUGF0aDtvLmFic2VsbGlwc2UoZSxuLHIsaSwwLDIqTWF0aC5QSSk7dmFyIGE9bmV3IGIuU2hhcGVQYXRoO3JldHVybiBhLnN1YlBhdGhzLnB1c2gobyksYX0oZSk7YnJlYWs7Y2FzZVwibGluZVwiOnI9aShlLHIpLE09ZnVuY3Rpb24odCl7dmFyIGU9bCh0LmdldEF0dHJpYnV0ZShcIngxXCIpKSxuPWwodC5nZXRBdHRyaWJ1dGUoXCJ5MVwiKSkscj1sKHQuZ2V0QXR0cmlidXRlKFwieDJcIikpLGk9bCh0LmdldEF0dHJpYnV0ZShcInkyXCIpKSxvPW5ldyBiLlNoYXBlUGF0aDtyZXR1cm4gby5tb3ZlVG8oZSxuKSxvLmxpbmVUbyhyLGkpLG8uY3VycmVudFBhdGguYXV0b0Nsb3NlPSExLG99KGUpO2JyZWFrO2Nhc2VcImRlZnNcIjpjPSExO2JyZWFrO2Nhc2VcInVzZVwiOnI9aShlLHIpO3ZhciBTPWUuaHJlZi5iYXNlVmFsLnN1YnN0cmluZygxKSxUPWUudmlld3BvcnRFbGVtZW50LmdldEVsZW1lbnRCeUlkKFMpO1Q/dChULHIpOmNvbnNvbGUud2FybihcIlNWR0xvYWRlcjogJ3VzZSBub2RlJyByZWZlcmVuY2VzIG5vbi1leGlzdGVudCBub2RlIGlkOiBcIitTKX1pZihNJiYodm9pZCAwIT09ci5maWxsJiZcIm5vbmVcIiE9PXIuZmlsbCYmTS5jb2xvci5zZXRTdHlsZShyLmZpbGwpLGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gbih0KXt3LnNldCh0LngsdC55LDEpLmFwcGx5TWF0cml4MyhlKSx0LnNldCh3Lngsdy55KX1mb3IodmFyIHI9ZnVuY3Rpb24odCl7cmV0dXJuIDAhPT10LmVsZW1lbnRzWzFdfHwwIT09dC5lbGVtZW50c1szXX0oZSksaT10LnN1YlBhdGhzLG89MCxhPWkubGVuZ3RoO288YTtvKyspZm9yKHZhciBzPWlbb10uY3VydmVzLGM9MDtjPHMubGVuZ3RoO2MrKyl7dmFyIGw9c1tjXTtsLmlzTGluZUN1cnZlPyhuKGwudjEpLG4obC52MikpOmwuaXNDdWJpY0JlemllckN1cnZlPyhuKGwudjApLG4obC52MSksbihsLnYyKSxuKGwudjMpKTpsLmlzUXVhZHJhdGljQmV6aWVyQ3VydmU/KG4obC52MCksbihsLnYxKSxuKGwudjIpKTpsLmlzRWxsaXBzZUN1cnZlJiYociYmY29uc29sZS53YXJuKFwiU1ZHTG9hZGVyOiBFbGxpcHRpYyBhcmMgb3IgZWxsaXBzZSByb3RhdGlvbiBvciBza2V3aW5nIGlzIG5vdCBpbXBsZW1lbnRlZC5cIikseC5zZXQobC5hWCxsLmFZKSxuKHgpLGwuYVg9eC54LGwuYVk9eC55LGwueFJhZGl1cyo9dShlKSxsLnlSYWRpdXMqPWgoZSkpfX0oTSxfKSxkLnB1c2goTSksTS51c2VyRGF0YT17bm9kZTplLHN0eWxlOnJ9KSxjKWZvcih2YXIgRT1lLmNoaWxkTm9kZXMsQT0wO0E8RS5sZW5ndGg7QSsrKXQoRVtBXSxyKTtzJiYoZi5wb3AoKSxmLmxlbmd0aD4wP18uY29weShmW2YubGVuZ3RoLTFdKTpfLmlkZW50aXR5KCkpfX0oTS5kb2N1bWVudEVsZW1lbnQse2ZpbGw6XCIjMDAwXCIsZmlsbE9wYWNpdHk6MSxzdHJva2VPcGFjaXR5OjEsc3Ryb2tlV2lkdGg6MSxzdHJva2VMaW5lSm9pbjpcIm1pdGVyXCIsc3Ryb2tlTGluZUNhcDpcImJ1dHRcIixzdHJva2VNaXRlckxpbWl0OjR9KSx7cGF0aHM6ZCx4bWw6TS5kb2N1bWVudEVsZW1lbnR9fX0pLHcuZ2V0U3Ryb2tlU3R5bGU9ZnVuY3Rpb24odCxlLG4scixpKXtyZXR1cm57c3Ryb2tlQ29sb3I6ZT12b2lkIDAhPT1lP2U6XCIjMDAwXCIsc3Ryb2tlV2lkdGg6dD12b2lkIDAhPT10P3Q6MSxzdHJva2VMaW5lSm9pbjpuPXZvaWQgMCE9PW4/bjpcIm1pdGVyXCIsc3Ryb2tlTGluZUNhcDpyPXZvaWQgMCE9PXI/cjpcImJ1dHRcIixzdHJva2VNaXRlckxpbWl0Omk9dm9pZCAwIT09aT9pOjR9fSx3LnBvaW50c1RvU3Ryb2tlPWZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBpPVtdLG89W10sYT1bXTtpZigwPT09dy5wb2ludHNUb1N0cm9rZVdpdGhCdWZmZXJzKHQsZSxuLHIsaSxvLGEpKXJldHVybiBudWxsO3ZhciBzPW5ldyBiLkJ1ZmZlckdlb21ldHJ5O3JldHVybiBzLnNldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IGIuRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZShpLDMpKSxzLnNldEF0dHJpYnV0ZShcIm5vcm1hbFwiLG5ldyBiLkZsb2F0MzJCdWZmZXJBdHRyaWJ1dGUobywzKSkscy5zZXRBdHRyaWJ1dGUoXCJ1dlwiLG5ldyBiLkZsb2F0MzJCdWZmZXJBdHRyaWJ1dGUoYSwyKSksc30sdy5wb2ludHNUb1N0cm9rZVdpdGhCdWZmZXJzPShyPW5ldyBiLlZlY3RvcjIsaT1uZXcgYi5WZWN0b3IyLG89bmV3IGIuVmVjdG9yMixhPW5ldyBiLlZlY3RvcjIscz1uZXcgYi5WZWN0b3IyLGM9bmV3IGIuVmVjdG9yMixsPW5ldyBiLlZlY3RvcjIsdT1uZXcgYi5WZWN0b3IyLGg9bmV3IGIuVmVjdG9yMixkPW5ldyBiLlZlY3RvcjIscD1uZXcgYi5WZWN0b3IyLGY9bmV3IGIuVmVjdG9yMixtPW5ldyBiLlZlY3RvcjIsZz1uZXcgYi5WZWN0b3IyLHY9bmV3IGIuVmVjdG9yMix5PW5ldyBiLlZlY3RvcjIseD1uZXcgYi5WZWN0b3IyLGZ1bmN0aW9uKHQsZSxuLGIsdyxfLE0sUyl7bj12b2lkIDAhPT1uP246MTIsYj12b2lkIDAhPT1iP2I6LjAwMSxTPXZvaWQgMCE9PVM/UzowO3ZhciBUPSh0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0hMSxuPTEscj10Lmxlbmd0aC0xO248cjtuKyspaWYodFtuXS5kaXN0YW5jZVRvKHRbbisxXSk8Yil7ZT0hMDticmVha31pZighZSlyZXR1cm4gdDt2YXIgaT1bXTtmb3IoaS5wdXNoKHRbMF0pLG49MSxyPXQubGVuZ3RoLTE7bjxyO24rKyl0W25dLmRpc3RhbmNlVG8odFtuKzFdKT49YiYmaS5wdXNoKHRbbl0pO3JldHVybiBpLnB1c2godFt0Lmxlbmd0aC0xXSksaX0odCkpLmxlbmd0aDtpZihUPDIpcmV0dXJuIDA7dmFyIEUsQSxMLFIsUCxDPXRbMF0uZXF1YWxzKHRbVC0xXSksST10WzBdLE89ZS5zdHJva2VXaWR0aC8yLE49MS8oVC0xKSxEPTAsQj0hMSxGPTAsVT0zKlMsej0yKlM7Syh0WzBdLHRbMV0scikubXVsdGlwbHlTY2FsYXIoTyksdS5jb3B5KHRbMF0pLnN1YihyKSxoLmNvcHkodFswXSkuYWRkKHIpLGQuY29weSh1KSxwLmNvcHkoaCk7Zm9yKHZhciBHPTE7RzxUO0crKyl7RT10W0ddLEE9Rz09PVQtMT9DP3RbMV06dm9pZCAwOnRbRysxXTt2YXIgSD1yO0soSSxFLEgpLG8uY29weShIKS5tdWx0aXBseVNjYWxhcihPKSxmLmNvcHkoRSkuc3ViKG8pLG0uY29weShFKS5hZGQobyk7dmFyIGs9RCtOO2lmKEw9ITEsdm9pZCAwIT09QSl7SyhFLEEsaSksby5jb3B5KGkpLm11bHRpcGx5U2NhbGFyKE8pLGcuY29weShFKS5zdWIobyksdi5jb3B5KEUpLmFkZChvKSxSPSEwLG8uc3ViVmVjdG9ycyhBLEkpLEguZG90KG8pPDAmJihSPSExKSwxPT09RyYmKEI9Uiksby5zdWJWZWN0b3JzKEEsRSksby5ub3JtYWxpemUoKTt2YXIgVj1NYXRoLmFicyhILmRvdChvKSk7aWYoMCE9PVYpe3ZhciBqPU8vVjtvLm11bHRpcGx5U2NhbGFyKC1qKSxhLnN1YlZlY3RvcnMoRSxJKSxzLmNvcHkoYSkuc2V0TGVuZ3RoKGopLmFkZChvKSx5LmNvcHkocykubmVnYXRlKCk7dmFyIFc9cy5sZW5ndGgoKSxYPWEubGVuZ3RoKCk7YS5kaXZpZGVTY2FsYXIoWCksYy5zdWJWZWN0b3JzKEEsRSk7dmFyIHE9Yy5sZW5ndGgoKTtzd2l0Y2goYy5kaXZpZGVTY2FsYXIocSksYS5kb3QoeSk8WCYmYy5kb3QoeSk8cSYmKEw9ITApLHguY29weShzKS5hZGQoRSkseS5hZGQoRSksUD0hMSxMP1I/KHYuY29weSh5KSxtLmNvcHkoeSkpOihnLmNvcHkoeSksZi5jb3B5KHkpKTp0dCgpLGUuc3Ryb2tlTGluZUpvaW4pe2Nhc2VcImJldmVsXCI6ZXQoUixMLGspO2JyZWFrO2Nhc2VcInJvdW5kXCI6bnQoUixMKSxSPyQoRSxmLGcsaywwKTokKEUsdixtLGssMSk7YnJlYWs7Y2FzZVwibWl0ZXJcIjpjYXNlXCJtaXRlci1jbGlwXCI6ZGVmYXVsdDp2YXIgWT1PKmUuc3Ryb2tlTWl0ZXJMaW1pdC9XO2lmKFk8MSl7aWYoXCJtaXRlci1jbGlwXCIhPT1lLnN0cm9rZUxpbmVKb2luKXtldChSLEwsayk7YnJlYWt9bnQoUixMKSxSPyhjLnN1YlZlY3RvcnMoeCxmKS5tdWx0aXBseVNjYWxhcihZKS5hZGQoZiksbC5zdWJWZWN0b3JzKHgsZykubXVsdGlwbHlTY2FsYXIoWSkuYWRkKGcpLFEoZixrLDApLFEoYyxrLDApLFEoRSxrLC41KSxRKEUsaywuNSksUShjLGssMCksUShsLGssMCksUShFLGssLjUpLFEobCxrLDApLFEoZyxrLDApKTooYy5zdWJWZWN0b3JzKHgsbSkubXVsdGlwbHlTY2FsYXIoWSkuYWRkKG0pLGwuc3ViVmVjdG9ycyh4LHYpLm11bHRpcGx5U2NhbGFyKFkpLmFkZCh2KSxRKG0saywxKSxRKGMsaywxKSxRKEUsaywuNSksUShFLGssLjUpLFEoYyxrLDEpLFEobCxrLDEpLFEoRSxrLC41KSxRKGwsaywxKSxRKHYsaywxKSl9ZWxzZSBMPyhSPyhRKGgsRCwxKSxRKHUsRCwwKSxRKHgsaywwKSxRKGgsRCwxKSxRKHgsaywwKSxRKHksaywxKSk6KFEoaCxELDEpLFEodSxELDApLFEoeCxrLDEpLFEodSxELDApLFEoeSxrLDApLFEoeCxrLDEpKSxSP2cuY29weSh4KTp2LmNvcHkoeCkpOlI/KFEoZixrLDApLFEoeCxrLDApLFEoRSxrLC41KSxRKEUsaywuNSksUSh4LGssMCksUShnLGssMCkpOihRKG0saywxKSxRKHgsaywxKSxRKEUsaywuNSksUShFLGssLjUpLFEoeCxrLDEpLFEodixrLDEpKSxQPSEwfX1lbHNlIHR0KCl9ZWxzZSB0dCgpO0N8fEchPT1ULTF8fHJ0KHRbMF0sZCxwLFIsITAsRCksRD1rLEk9RSx1LmNvcHkoZyksaC5jb3B5KHYpfWlmKEMpe2lmKEwmJncpe3ZhciBaPXgsSj15O0IhPT1SJiYoWj15LEo9eCksUj8oUHx8QikmJihKLnRvQXJyYXkodywwKSxKLnRvQXJyYXkodyw5KSxQJiZaLnRvQXJyYXkodywzKSk6IVAmJkJ8fChKLnRvQXJyYXkodywzKSxKLnRvQXJyYXkodyw5KSxQJiZaLnRvQXJyYXkodywwKSl9fWVsc2UgcnQoRSxmLG0sUiwhMSxrKTtyZXR1cm4gRjtmdW5jdGlvbiBLKHQsZSxuKXtyZXR1cm4gbi5zdWJWZWN0b3JzKGUsdCksbi5zZXQoLW4ueSxuLngpLm5vcm1hbGl6ZSgpfWZ1bmN0aW9uIFEodCxlLG4pe3cmJih3W1VdPXQueCx3W1UrMV09dC55LHdbVSsyXT0wLF8mJihfW1VdPTAsX1tVKzFdPTAsX1tVKzJdPTEpLFUrPTMsTSYmKE1bel09ZSxNW3orMV09bix6Kz0yKSksRis9M31mdW5jdGlvbiAkKHQsZSxzLGMsbCl7ci5jb3B5KGUpLnN1Yih0KS5ub3JtYWxpemUoKSxpLmNvcHkocykuc3ViKHQpLm5vcm1hbGl6ZSgpO3ZhciB1PU1hdGguUEksaD1yLmRvdChpKTtNYXRoLmFicyhoKTwxJiYodT1NYXRoLmFicyhNYXRoLmFjb3MoaCkpKSx1Lz1uLG8uY29weShlKTtmb3IodmFyIGQ9MCxwPW4tMTtkPHA7ZCsrKWEuY29weShvKS5yb3RhdGVBcm91bmQodCx1KSxRKG8sYyxsKSxRKGEsYyxsKSxRKHQsYywuNSksby5jb3B5KGEpO1EoYSxjLGwpLFEocyxjLGwpLFEodCxjLC41KX1mdW5jdGlvbiB0dCgpe1EoaCxELDEpLFEodSxELDApLFEoZixrLDApLFEoaCxELDEpLFEoZixrLDEpLFEobSxrLDApfWZ1bmN0aW9uIGV0KHQsZSxuKXtlP3Q/KFEoaCxELDEpLFEodSxELDApLFEoZixrLDApLFEoaCxELDEpLFEoZixrLDApLFEoeSxrLDEpLFEoZixuLDApLFEoZyxuLDApLFEoeSxuLC41KSk6KFEoaCxELDEpLFEodSxELDApLFEobSxrLDEpLFEodSxELDApLFEoeSxrLDApLFEobSxrLDEpLFEobSxuLDEpLFEodixuLDApLFEoeSxuLC41KSk6dD8oUShmLG4sMCksUShnLG4sMCksUShFLG4sLjUpKTooUShtLG4sMSksUSh2LG4sMCksUShFLG4sLjUpKX1mdW5jdGlvbiBudCh0LGUpe2UmJih0PyhRKGgsRCwxKSxRKHUsRCwwKSxRKGYsaywwKSxRKGgsRCwxKSxRKGYsaywwKSxRKHksaywxKSxRKGYsRCwwKSxRKEUsaywuNSksUSh5LGssMSksUShFLGssLjUpLFEoZyxELDApLFEoeSxrLDEpKTooUShoLEQsMSksUSh1LEQsMCksUShtLGssMSksUSh1LEQsMCksUSh5LGssMCksUShtLGssMSksUShtLEQsMSksUSh5LGssMCksUShFLGssLjUpLFEoRSxrLC41KSxRKHksaywwKSxRKHYsRCwxKSkpfWZ1bmN0aW9uIHJ0KHQsbixzLGMsbCx1KXtzd2l0Y2goZS5zdHJva2VMaW5lQ2FwKXtjYXNlXCJyb3VuZFwiOmw/JCh0LHMsbix1LC41KTokKHQsbixzLHUsLjUpO2JyZWFrO2Nhc2VcInNxdWFyZVwiOmlmKGwpci5zdWJWZWN0b3JzKG4sdCksaS5zZXQoci55LC1yLngpLG8uYWRkVmVjdG9ycyhyLGkpLmFkZCh0KSxhLnN1YlZlY3RvcnMoaSxyKS5hZGQodCksYz8oby50b0FycmF5KHcsMyksYS50b0FycmF5KHcsMCksYS50b0FycmF5KHcsOSkpOihvLnRvQXJyYXkodywzKSxvLnRvQXJyYXkodyw5KSxhLnRvQXJyYXkodywwKSk7ZWxzZXtyLnN1YlZlY3RvcnMocyx0KSxpLnNldChyLnksLXIueCksby5hZGRWZWN0b3JzKHIsaSkuYWRkKHQpLGEuc3ViVmVjdG9ycyhpLHIpLmFkZCh0KTt2YXIgaD13Lmxlbmd0aDtjPyhvLnRvQXJyYXkodyxoLTMpLGEudG9BcnJheSh3LGgtNiksYS50b0FycmF5KHcsaC0xMikpOihvLnRvQXJyYXkodyxoLTYpLGEudG9BcnJheSh3LGgtMyksYS50b0FycmF5KHcsaC0xMikpfX19fSl9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtuLnIoZSksbi5kKGUsXCJWUkJ1dHRvblwiLChmdW5jdGlvbigpe3JldHVybiByfSkpO2NsYXNzIHJ7c3RhdGljIGNyZWF0ZUJ1dHRvbih0LGUpe2UmJmNvbnNvbGUuZXJyb3IoJ1RIUkVFLlZSQnV0dG9uOiBUaGUgXCJvcHRpb25zXCIgcGFyYW1ldGVyIGhhcyBiZWVuIHJlbW92ZWQuIFBsZWFzZSBzZXQgdGhlIHJlZmVyZW5jZSBzcGFjZSB0eXBlIHZpYSByZW5kZXJlci54ci5zZXRSZWZlcmVuY2VTcGFjZVR5cGUoKSBpbnN0ZWFkLicpO2NvbnN0IG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtmdW5jdGlvbiByKCl7bi5zdHlsZS5kaXNwbGF5PVwiXCIsbi5zdHlsZS5jdXJzb3I9XCJhdXRvXCIsbi5zdHlsZS5sZWZ0PVwiY2FsYyg1MCUgLSA3NXB4KVwiLG4uc3R5bGUud2lkdGg9XCIxNTBweFwiLG4ub25tb3VzZWVudGVyPW51bGwsbi5vbm1vdXNlbGVhdmU9bnVsbCxuLm9uY2xpY2s9bnVsbCxuLnRleHRDb250ZW50PVwiVlIgTk9UIFNVUFBPUlRFRFwifWZ1bmN0aW9uIGkodCl7dC5zdHlsZS5wb3NpdGlvbj1cImFic29sdXRlXCIsdC5zdHlsZS5ib3R0b209XCIyMHB4XCIsdC5zdHlsZS5wYWRkaW5nPVwiMTJweCA2cHhcIix0LnN0eWxlLmJvcmRlcj1cIjFweCBzb2xpZCAjZmZmXCIsdC5zdHlsZS5ib3JkZXJSYWRpdXM9XCI0cHhcIix0LnN0eWxlLmJhY2tncm91bmQ9XCJyZ2JhKDAsMCwwLDAuMSlcIix0LnN0eWxlLmNvbG9yPVwiI2ZmZlwiLHQuc3R5bGUuZm9udD1cIm5vcm1hbCAxM3B4IHNhbnMtc2VyaWZcIix0LnN0eWxlLnRleHRBbGlnbj1cImNlbnRlclwiLHQuc3R5bGUub3BhY2l0eT1cIjAuNVwiLHQuc3R5bGUub3V0bGluZT1cIm5vbmVcIix0LnN0eWxlLnpJbmRleD1cIjk5OVwifWlmKFwieHJcImluIG5hdmlnYXRvcilyZXR1cm4gbi5pZD1cIlZSQnV0dG9uXCIsbi5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLGkobiksbmF2aWdhdG9yLnhyLmlzU2Vzc2lvblN1cHBvcnRlZChcImltbWVyc2l2ZS12clwiKS50aGVuKChmdW5jdGlvbihlKXtlP2Z1bmN0aW9uKCl7bGV0IGU9bnVsbDtmdW5jdGlvbiByKHIpe3IuYWRkRXZlbnRMaXN0ZW5lcihcImVuZFwiLGkpLHQueHIuc2V0U2Vzc2lvbihyKSxuLnRleHRDb250ZW50PVwiRVhJVCBWUlwiLGU9cn1mdW5jdGlvbiBpKCl7ZS5yZW1vdmVFdmVudExpc3RlbmVyKFwiZW5kXCIsaSksbi50ZXh0Q29udGVudD1cIkVOVEVSIFZSXCIsZT1udWxsfW4uc3R5bGUuZGlzcGxheT1cIlwiLG4uc3R5bGUuY3Vyc29yPVwicG9pbnRlclwiLG4uc3R5bGUubGVmdD1cImNhbGMoNTAlIC0gNTBweClcIixuLnN0eWxlLndpZHRoPVwiMTAwcHhcIixuLnRleHRDb250ZW50PVwiRU5URVIgVlJcIixuLm9ubW91c2VlbnRlcj1mdW5jdGlvbigpe24uc3R5bGUub3BhY2l0eT1cIjEuMFwifSxuLm9ubW91c2VsZWF2ZT1mdW5jdGlvbigpe24uc3R5bGUub3BhY2l0eT1cIjAuNVwifSxuLm9uY2xpY2s9ZnVuY3Rpb24oKXtpZihudWxsPT09ZSl7Y29uc3QgdD17b3B0aW9uYWxGZWF0dXJlczpbXCJsb2NhbC1mbG9vclwiLFwiYm91bmRlZC1mbG9vclwiLFwiaGFuZC10cmFja2luZ1wiXX07bmF2aWdhdG9yLnhyLnJlcXVlc3RTZXNzaW9uKFwiaW1tZXJzaXZlLXZyXCIsdCkudGhlbihyKX1lbHNlIGUuZW5kKCl9fSgpOnIoKX0pKSxuO3tjb25zdCB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO3JldHVybiExPT09d2luZG93LmlzU2VjdXJlQ29udGV4dD8odC5ocmVmPWRvY3VtZW50LmxvY2F0aW9uLmhyZWYucmVwbGFjZSgvXmh0dHA6LyxcImh0dHBzOlwiKSx0LmlubmVySFRNTD1cIldFQlhSIE5FRURTIEhUVFBTXCIpOih0LmhyZWY9XCJodHRwczovL2ltbWVyc2l2ZXdlYi5kZXYvXCIsdC5pbm5lckhUTUw9XCJXRUJYUiBOT1QgQVZBSUxBQkxFXCIpLHQuc3R5bGUubGVmdD1cImNhbGMoNTAlIC0gOTBweClcIix0LnN0eWxlLndpZHRoPVwiMTgwcHhcIix0LnN0eWxlLnRleHREZWNvcmF0aW9uPVwibm9uZVwiLGkodCksdH19fX0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO24ucihlKSxuLmQoZSxcIlNreVwiLChmdW5jdGlvbigpe3JldHVybiBpfSkpO3ZhciByPW4oMCksaT1mdW5jdGlvbigpe3ZhciB0PWkuU2t5U2hhZGVyLGU9bmV3IHIuU2hhZGVyTWF0ZXJpYWwoe25hbWU6XCJTa3lTaGFkZXJcIixmcmFnbWVudFNoYWRlcjp0LmZyYWdtZW50U2hhZGVyLHZlcnRleFNoYWRlcjp0LnZlcnRleFNoYWRlcix1bmlmb3JtczpyLlVuaWZvcm1zVXRpbHMuY2xvbmUodC51bmlmb3Jtcyksc2lkZTpyLkJhY2tTaWRlLGRlcHRoV3JpdGU6ITF9KTtyLk1lc2guY2FsbCh0aGlzLG5ldyByLkJveEJ1ZmZlckdlb21ldHJ5KDEsMSwxKSxlKX07aS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShyLk1lc2gucHJvdG90eXBlKSxpLlNreVNoYWRlcj17dW5pZm9ybXM6e3R1cmJpZGl0eTp7dmFsdWU6Mn0scmF5bGVpZ2g6e3ZhbHVlOjF9LG1pZUNvZWZmaWNpZW50Ont2YWx1ZTouMDA1fSxtaWVEaXJlY3Rpb25hbEc6e3ZhbHVlOi44fSxzdW5Qb3NpdGlvbjp7dmFsdWU6bmV3IHIuVmVjdG9yM30sdXA6e3ZhbHVlOm5ldyByLlZlY3RvcjMoMCwxLDApfX0sdmVydGV4U2hhZGVyOltcInVuaWZvcm0gdmVjMyBzdW5Qb3NpdGlvbjtcIixcInVuaWZvcm0gZmxvYXQgcmF5bGVpZ2g7XCIsXCJ1bmlmb3JtIGZsb2F0IHR1cmJpZGl0eTtcIixcInVuaWZvcm0gZmxvYXQgbWllQ29lZmZpY2llbnQ7XCIsXCJ1bmlmb3JtIHZlYzMgdXA7XCIsXCJ2YXJ5aW5nIHZlYzMgdldvcmxkUG9zaXRpb247XCIsXCJ2YXJ5aW5nIHZlYzMgdlN1bkRpcmVjdGlvbjtcIixcInZhcnlpbmcgZmxvYXQgdlN1bmZhZGU7XCIsXCJ2YXJ5aW5nIHZlYzMgdkJldGFSO1wiLFwidmFyeWluZyB2ZWMzIHZCZXRhTTtcIixcInZhcnlpbmcgZmxvYXQgdlN1bkU7XCIsXCJjb25zdCBmbG9hdCBlID0gMi43MTgyODE4Mjg0NTkwNDUyMzUzNjAyODc0NzEzNTI2NjI0OTc3NTcyNDcwOTM2OTk5NTk1NztcIixcImNvbnN0IGZsb2F0IHBpID0gMy4xNDE1OTI2NTM1ODk3OTMyMzg0NjI2NDMzODMyNzk1MDI4ODQxOTcxNjk7XCIsXCJjb25zdCB2ZWMzIGxhbWJkYSA9IHZlYzMoIDY4MEUtOSwgNTUwRS05LCA0NTBFLTkgKTtcIixcImNvbnN0IHZlYzMgdG90YWxSYXlsZWlnaCA9IHZlYzMoIDUuODA0NTQyOTk2MjYxMDkzRS02LCAxLjM1NjI5MTE0MTk4NDU2MzVFLTUsIDMuMDI2NTkwMjQ2ODgyNDg3NkUtNSApO1wiLFwiY29uc3QgZmxvYXQgdiA9IDQuMDtcIixcImNvbnN0IHZlYzMgSyA9IHZlYzMoIDAuNjg2LCAwLjY3OCwgMC42NjYgKTtcIixcImNvbnN0IHZlYzMgTWllQ29uc3QgPSB2ZWMzKCAxLjgzOTk5MTg1MTQ0MzM5NzhFMTQsIDIuNzc5ODAyMzkxOTY2MDUyOEUxNCwgNC4wNzkwNDc5NTQzODYxMDk0RTE0ICk7XCIsXCJjb25zdCBmbG9hdCBjdXRvZmZBbmdsZSA9IDEuNjExMDczMTU1Njg3MDczNDtcIixcImNvbnN0IGZsb2F0IHN0ZWVwbmVzcyA9IDEuNTtcIixcImNvbnN0IGZsb2F0IEVFID0gMTAwMC4wO1wiLFwiZmxvYXQgc3VuSW50ZW5zaXR5KCBmbG9hdCB6ZW5pdGhBbmdsZUNvcyApIHtcIixcIlxcdHplbml0aEFuZ2xlQ29zID0gY2xhbXAoIHplbml0aEFuZ2xlQ29zLCAtMS4wLCAxLjAgKTtcIixcIlxcdHJldHVybiBFRSAqIG1heCggMC4wLCAxLjAgLSBwb3coIGUsIC0oICggY3V0b2ZmQW5nbGUgLSBhY29zKCB6ZW5pdGhBbmdsZUNvcyApICkgLyBzdGVlcG5lc3MgKSApICk7XCIsXCJ9XCIsXCJ2ZWMzIHRvdGFsTWllKCBmbG9hdCBUICkge1wiLFwiXFx0ZmxvYXQgYyA9ICggMC4yICogVCApICogMTBFLTE4O1wiLFwiXFx0cmV0dXJuIDAuNDM0ICogYyAqIE1pZUNvbnN0O1wiLFwifVwiLFwidm9pZCBtYWluKCkge1wiLFwiXFx0dmVjNCB3b3JsZFBvc2l0aW9uID0gbW9kZWxNYXRyaXggKiB2ZWM0KCBwb3NpdGlvbiwgMS4wICk7XCIsXCJcXHR2V29ybGRQb3NpdGlvbiA9IHdvcmxkUG9zaXRpb24ueHl6O1wiLFwiXFx0Z2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogbW9kZWxWaWV3TWF0cml4ICogdmVjNCggcG9zaXRpb24sIDEuMCApO1wiLFwiXFx0Z2xfUG9zaXRpb24ueiA9IGdsX1Bvc2l0aW9uLnc7XCIsXCJcXHR2U3VuRGlyZWN0aW9uID0gbm9ybWFsaXplKCBzdW5Qb3NpdGlvbiApO1wiLFwiXFx0dlN1bkUgPSBzdW5JbnRlbnNpdHkoIGRvdCggdlN1bkRpcmVjdGlvbiwgdXAgKSApO1wiLFwiXFx0dlN1bmZhZGUgPSAxLjAgLSBjbGFtcCggMS4wIC0gZXhwKCAoIHN1blBvc2l0aW9uLnkgLyA0NTAwMDAuMCApICksIDAuMCwgMS4wICk7XCIsXCJcXHRmbG9hdCByYXlsZWlnaENvZWZmaWNpZW50ID0gcmF5bGVpZ2ggLSAoIDEuMCAqICggMS4wIC0gdlN1bmZhZGUgKSApO1wiLFwiXFx0dkJldGFSID0gdG90YWxSYXlsZWlnaCAqIHJheWxlaWdoQ29lZmZpY2llbnQ7XCIsXCJcXHR2QmV0YU0gPSB0b3RhbE1pZSggdHVyYmlkaXR5ICkgKiBtaWVDb2VmZmljaWVudDtcIixcIn1cIl0uam9pbihcIlxcblwiKSxmcmFnbWVudFNoYWRlcjpbXCJ2YXJ5aW5nIHZlYzMgdldvcmxkUG9zaXRpb247XCIsXCJ2YXJ5aW5nIHZlYzMgdlN1bkRpcmVjdGlvbjtcIixcInZhcnlpbmcgZmxvYXQgdlN1bmZhZGU7XCIsXCJ2YXJ5aW5nIHZlYzMgdkJldGFSO1wiLFwidmFyeWluZyB2ZWMzIHZCZXRhTTtcIixcInZhcnlpbmcgZmxvYXQgdlN1bkU7XCIsXCJ1bmlmb3JtIGZsb2F0IG1pZURpcmVjdGlvbmFsRztcIixcInVuaWZvcm0gdmVjMyB1cDtcIixcImNvbnN0IHZlYzMgY2FtZXJhUG9zID0gdmVjMyggMC4wLCAwLjAsIDAuMCApO1wiLFwiY29uc3QgZmxvYXQgcGkgPSAzLjE0MTU5MjY1MzU4OTc5MzIzODQ2MjY0MzM4MzI3OTUwMjg4NDE5NzE2OTtcIixcImNvbnN0IGZsb2F0IG4gPSAxLjAwMDM7XCIsXCJjb25zdCBmbG9hdCBOID0gMi41NDVFMjU7XCIsXCJjb25zdCBmbG9hdCByYXlsZWlnaFplbml0aExlbmd0aCA9IDguNEUzO1wiLFwiY29uc3QgZmxvYXQgbWllWmVuaXRoTGVuZ3RoID0gMS4yNUUzO1wiLFwiY29uc3QgZmxvYXQgc3VuQW5ndWxhckRpYW1ldGVyQ29zID0gMC45OTk5NTY2NzY5NDY0NDg0NDM1NTM1NzQ2MTk5MDY5NzY0Nzg5MjY4NDg2OTI4NzM5MDA4NTkzMjQ7XCIsXCJjb25zdCBmbG9hdCBUSFJFRV9PVkVSX1NJWFRFRU5QSSA9IDAuMDU5NjgzMTAzNjU5NDYwNzU7XCIsXCJjb25zdCBmbG9hdCBPTkVfT1ZFUl9GT1VSUEkgPSAwLjA3OTU3NzQ3MTU0NTk0NzY3O1wiLFwiZmxvYXQgcmF5bGVpZ2hQaGFzZSggZmxvYXQgY29zVGhldGEgKSB7XCIsXCJcXHRyZXR1cm4gVEhSRUVfT1ZFUl9TSVhURUVOUEkgKiAoIDEuMCArIHBvdyggY29zVGhldGEsIDIuMCApICk7XCIsXCJ9XCIsXCJmbG9hdCBoZ1BoYXNlKCBmbG9hdCBjb3NUaGV0YSwgZmxvYXQgZyApIHtcIixcIlxcdGZsb2F0IGcyID0gcG93KCBnLCAyLjAgKTtcIixcIlxcdGZsb2F0IGludmVyc2UgPSAxLjAgLyBwb3coIDEuMCAtIDIuMCAqIGcgKiBjb3NUaGV0YSArIGcyLCAxLjUgKTtcIixcIlxcdHJldHVybiBPTkVfT1ZFUl9GT1VSUEkgKiAoICggMS4wIC0gZzIgKSAqIGludmVyc2UgKTtcIixcIn1cIixcInZvaWQgbWFpbigpIHtcIixcIlxcdHZlYzMgZGlyZWN0aW9uID0gbm9ybWFsaXplKCB2V29ybGRQb3NpdGlvbiAtIGNhbWVyYVBvcyApO1wiLFwiXFx0ZmxvYXQgemVuaXRoQW5nbGUgPSBhY29zKCBtYXgoIDAuMCwgZG90KCB1cCwgZGlyZWN0aW9uICkgKSApO1wiLFwiXFx0ZmxvYXQgaW52ZXJzZSA9IDEuMCAvICggY29zKCB6ZW5pdGhBbmdsZSApICsgMC4xNSAqIHBvdyggOTMuODg1IC0gKCAoIHplbml0aEFuZ2xlICogMTgwLjAgKSAvIHBpICksIC0xLjI1MyApICk7XCIsXCJcXHRmbG9hdCBzUiA9IHJheWxlaWdoWmVuaXRoTGVuZ3RoICogaW52ZXJzZTtcIixcIlxcdGZsb2F0IHNNID0gbWllWmVuaXRoTGVuZ3RoICogaW52ZXJzZTtcIixcIlxcdHZlYzMgRmV4ID0gZXhwKCAtKCB2QmV0YVIgKiBzUiArIHZCZXRhTSAqIHNNICkgKTtcIixcIlxcdGZsb2F0IGNvc1RoZXRhID0gZG90KCBkaXJlY3Rpb24sIHZTdW5EaXJlY3Rpb24gKTtcIixcIlxcdGZsb2F0IHJQaGFzZSA9IHJheWxlaWdoUGhhc2UoIGNvc1RoZXRhICogMC41ICsgMC41ICk7XCIsXCJcXHR2ZWMzIGJldGFSVGhldGEgPSB2QmV0YVIgKiByUGhhc2U7XCIsXCJcXHRmbG9hdCBtUGhhc2UgPSBoZ1BoYXNlKCBjb3NUaGV0YSwgbWllRGlyZWN0aW9uYWxHICk7XCIsXCJcXHR2ZWMzIGJldGFNVGhldGEgPSB2QmV0YU0gKiBtUGhhc2U7XCIsXCJcXHR2ZWMzIExpbiA9IHBvdyggdlN1bkUgKiAoICggYmV0YVJUaGV0YSArIGJldGFNVGhldGEgKSAvICggdkJldGFSICsgdkJldGFNICkgKSAqICggMS4wIC0gRmV4ICksIHZlYzMoIDEuNSApICk7XCIsXCJcXHRMaW4gKj0gbWl4KCB2ZWMzKCAxLjAgKSwgcG93KCB2U3VuRSAqICggKCBiZXRhUlRoZXRhICsgYmV0YU1UaGV0YSApIC8gKCB2QmV0YVIgKyB2QmV0YU0gKSApICogRmV4LCB2ZWMzKCAxLjAgLyAyLjAgKSApLCBjbGFtcCggcG93KCAxLjAgLSBkb3QoIHVwLCB2U3VuRGlyZWN0aW9uICksIDUuMCApLCAwLjAsIDEuMCApICk7XCIsXCJcXHRmbG9hdCB0aGV0YSA9IGFjb3MoIGRpcmVjdGlvbi55ICk7IC8vIGVsZXZhdGlvbiAtLVxceDNlIHktYXhpcywgWy1waS8yLCBwaS8yXVwiLFwiXFx0ZmxvYXQgcGhpID0gYXRhbiggZGlyZWN0aW9uLnosIGRpcmVjdGlvbi54ICk7IC8vIGF6aW11dGggLS1cXHgzZSB4LWF4aXMgWy1waS8yLCBwaS8yXVwiLFwiXFx0dmVjMiB1diA9IHZlYzIoIHBoaSwgdGhldGEgKSAvIHZlYzIoIDIuMCAqIHBpLCBwaSApICsgdmVjMiggMC41LCAwLjAgKTtcIixcIlxcdHZlYzMgTDAgPSB2ZWMzKCAwLjEgKSAqIEZleDtcIixcIlxcdGZsb2F0IHN1bmRpc2sgPSBzbW9vdGhzdGVwKCBzdW5Bbmd1bGFyRGlhbWV0ZXJDb3MsIHN1bkFuZ3VsYXJEaWFtZXRlckNvcyArIDAuMDAwMDIsIGNvc1RoZXRhICk7XCIsXCJcXHRMMCArPSAoIHZTdW5FICogMTkwMDAuMCAqIEZleCApICogc3VuZGlzaztcIixcIlxcdHZlYzMgdGV4Q29sb3IgPSAoIExpbiArIEwwICkgKiAwLjA0ICsgdmVjMyggMC4wLCAwLjAwMDMsIDAuMDAwNzUgKTtcIixcIlxcdHZlYzMgcmV0Q29sb3IgPSBwb3coIHRleENvbG9yLCB2ZWMzKCAxLjAgLyAoIDEuMiArICggMS4yICogdlN1bmZhZGUgKSApICkgKTtcIixcIlxcdGdsX0ZyYWdDb2xvciA9IHZlYzQoIHJldENvbG9yLCAxLjAgKTtcIixcIiNpbmNsdWRlIDx0b25lbWFwcGluZ19mcmFnbWVudD5cIixcIiNpbmNsdWRlIDxlbmNvZGluZ3NfZnJhZ21lbnQ+XCIsXCJ9XCJdLmpvaW4oXCJcXG5cIil9fSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7bi5yKGUpLG4uZChlLFwiT3JiaXRDb250cm9sc1wiLChmdW5jdGlvbigpe3JldHVybiBpfSkpLG4uZChlLFwiTWFwQ29udHJvbHNcIiwoZnVuY3Rpb24oKXtyZXR1cm4gb30pKTt2YXIgcj1uKDApLGk9ZnVuY3Rpb24odCxlKXt2YXIgbixpLG8sYSxzLGM7dm9pZCAwPT09ZSYmY29uc29sZS53YXJuKCdUSFJFRS5PcmJpdENvbnRyb2xzOiBUaGUgc2Vjb25kIHBhcmFtZXRlciBcImRvbUVsZW1lbnRcIiBpcyBub3cgbWFuZGF0b3J5LicpLGU9PT1kb2N1bWVudCYmY29uc29sZS5lcnJvcignVEhSRUUuT3JiaXRDb250cm9sczogXCJkb2N1bWVudFwiIHNob3VsZCBub3QgYmUgdXNlZCBhcyB0aGUgdGFyZ2V0IFwiZG9tRWxlbWVudFwiLiBQbGVhc2UgdXNlIFwicmVuZGVyZXIuZG9tRWxlbWVudFwiIGluc3RlYWQuJyksdGhpcy5vYmplY3Q9dCx0aGlzLmRvbUVsZW1lbnQ9ZSx0aGlzLmVuYWJsZWQ9ITAsdGhpcy50YXJnZXQ9bmV3IHIuVmVjdG9yMyx0aGlzLm1pbkRpc3RhbmNlPTAsdGhpcy5tYXhEaXN0YW5jZT0xLzAsdGhpcy5taW5ab29tPTAsdGhpcy5tYXhab29tPTEvMCx0aGlzLm1pblBvbGFyQW5nbGU9MCx0aGlzLm1heFBvbGFyQW5nbGU9TWF0aC5QSSx0aGlzLm1pbkF6aW11dGhBbmdsZT0tMS8wLHRoaXMubWF4QXppbXV0aEFuZ2xlPTEvMCx0aGlzLmVuYWJsZURhbXBpbmc9ITEsdGhpcy5kYW1waW5nRmFjdG9yPS4wNSx0aGlzLmVuYWJsZVpvb209ITAsdGhpcy56b29tU3BlZWQ9MSx0aGlzLmVuYWJsZVJvdGF0ZT0hMCx0aGlzLnJvdGF0ZVNwZWVkPTEsdGhpcy5lbmFibGVQYW49ITAsdGhpcy5wYW5TcGVlZD0xLHRoaXMuc2NyZWVuU3BhY2VQYW5uaW5nPSEwLHRoaXMua2V5UGFuU3BlZWQ9Nyx0aGlzLmF1dG9Sb3RhdGU9ITEsdGhpcy5hdXRvUm90YXRlU3BlZWQ9Mix0aGlzLmVuYWJsZUtleXM9ITAsdGhpcy5rZXlzPXtMRUZUOjM3LFVQOjM4LFJJR0hUOjM5LEJPVFRPTTo0MH0sdGhpcy5tb3VzZUJ1dHRvbnM9e0xFRlQ6ci5NT1VTRS5ST1RBVEUsTUlERExFOnIuTU9VU0UuRE9MTFksUklHSFQ6ci5NT1VTRS5QQU59LHRoaXMudG91Y2hlcz17T05FOnIuVE9VQ0guUk9UQVRFLFRXTzpyLlRPVUNILkRPTExZX1BBTn0sdGhpcy50YXJnZXQwPXRoaXMudGFyZ2V0LmNsb25lKCksdGhpcy5wb3NpdGlvbjA9dGhpcy5vYmplY3QucG9zaXRpb24uY2xvbmUoKSx0aGlzLnpvb20wPXRoaXMub2JqZWN0Lnpvb20sdGhpcy5nZXRQb2xhckFuZ2xlPWZ1bmN0aW9uKCl7cmV0dXJuIGcucGhpfSx0aGlzLmdldEF6aW11dGhhbEFuZ2xlPWZ1bmN0aW9uKCl7cmV0dXJuIGcudGhldGF9LHRoaXMuc2F2ZVN0YXRlPWZ1bmN0aW9uKCl7bC50YXJnZXQwLmNvcHkobC50YXJnZXQpLGwucG9zaXRpb24wLmNvcHkobC5vYmplY3QucG9zaXRpb24pLGwuem9vbTA9bC5vYmplY3Quem9vbX0sdGhpcy5yZXNldD1mdW5jdGlvbigpe2wudGFyZ2V0LmNvcHkobC50YXJnZXQwKSxsLm9iamVjdC5wb3NpdGlvbi5jb3B5KGwucG9zaXRpb24wKSxsLm9iamVjdC56b29tPWwuem9vbTAsbC5vYmplY3QudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpLGwuZGlzcGF0Y2hFdmVudCh1KSxsLnVwZGF0ZSgpLGY9cC5OT05FfSx0aGlzLnVwZGF0ZT0obj1uZXcgci5WZWN0b3IzLGk9KG5ldyByLlF1YXRlcm5pb24pLnNldEZyb21Vbml0VmVjdG9ycyh0LnVwLG5ldyByLlZlY3RvcjMoMCwxLDApKSxvPWkuY2xvbmUoKS5pbnZlcnQoKSxhPW5ldyByLlZlY3RvcjMscz1uZXcgci5RdWF0ZXJuaW9uLGM9MipNYXRoLlBJLGZ1bmN0aW9uKCl7dmFyIHQ9bC5vYmplY3QucG9zaXRpb247bi5jb3B5KHQpLnN1YihsLnRhcmdldCksbi5hcHBseVF1YXRlcm5pb24oaSksZy5zZXRGcm9tVmVjdG9yMyhuKSxsLmF1dG9Sb3RhdGUmJmY9PT1wLk5PTkUmJkMoMipNYXRoLlBJLzYwLzYwKmwuYXV0b1JvdGF0ZVNwZWVkKSxsLmVuYWJsZURhbXBpbmc/KGcudGhldGErPXYudGhldGEqbC5kYW1waW5nRmFjdG9yLGcucGhpKz12LnBoaSpsLmRhbXBpbmdGYWN0b3IpOihnLnRoZXRhKz12LnRoZXRhLGcucGhpKz12LnBoaSk7dmFyIGU9bC5taW5BemltdXRoQW5nbGUscj1sLm1heEF6aW11dGhBbmdsZTtyZXR1cm4gaXNGaW5pdGUoZSkmJmlzRmluaXRlKHIpJiYoZTwtTWF0aC5QST9lKz1jOmU+TWF0aC5QSSYmKGUtPWMpLHI8LU1hdGguUEk/cis9YzpyPk1hdGguUEkmJihyLT1jKSxnLnRoZXRhPWU8PXI/TWF0aC5tYXgoZSxNYXRoLm1pbihyLGcudGhldGEpKTpnLnRoZXRhPihlK3IpLzI/TWF0aC5tYXgoZSxnLnRoZXRhKTpNYXRoLm1pbihyLGcudGhldGEpKSxnLnBoaT1NYXRoLm1heChsLm1pblBvbGFyQW5nbGUsTWF0aC5taW4obC5tYXhQb2xhckFuZ2xlLGcucGhpKSksZy5tYWtlU2FmZSgpLGcucmFkaXVzKj15LGcucmFkaXVzPU1hdGgubWF4KGwubWluRGlzdGFuY2UsTWF0aC5taW4obC5tYXhEaXN0YW5jZSxnLnJhZGl1cykpLCEwPT09bC5lbmFibGVEYW1waW5nP2wudGFyZ2V0LmFkZFNjYWxlZFZlY3Rvcih4LGwuZGFtcGluZ0ZhY3Rvcik6bC50YXJnZXQuYWRkKHgpLG4uc2V0RnJvbVNwaGVyaWNhbChnKSxuLmFwcGx5UXVhdGVybmlvbihvKSx0LmNvcHkobC50YXJnZXQpLmFkZChuKSxsLm9iamVjdC5sb29rQXQobC50YXJnZXQpLCEwPT09bC5lbmFibGVEYW1waW5nPyh2LnRoZXRhKj0xLWwuZGFtcGluZ0ZhY3Rvcix2LnBoaSo9MS1sLmRhbXBpbmdGYWN0b3IseC5tdWx0aXBseVNjYWxhcigxLWwuZGFtcGluZ0ZhY3RvcikpOih2LnNldCgwLDAsMCkseC5zZXQoMCwwLDApKSx5PTEsISEoYnx8YS5kaXN0YW5jZVRvU3F1YXJlZChsLm9iamVjdC5wb3NpdGlvbik+bXx8OCooMS1zLmRvdChsLm9iamVjdC5xdWF0ZXJuaW9uKSk+bSkmJihsLmRpc3BhdGNoRXZlbnQodSksYS5jb3B5KGwub2JqZWN0LnBvc2l0aW9uKSxzLmNvcHkobC5vYmplY3QucXVhdGVybmlvbiksYj0hMSwhMCl9KSx0aGlzLmRpc3Bvc2U9ZnVuY3Rpb24oKXtsLmRvbUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNvbnRleHRtZW51XCIsZXQsITEpLGwuZG9tRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcmRvd25cIixxLCExKSxsLmRvbUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIndoZWVsXCIsSiwhMSksbC5kb21FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsUSwhMSksbC5kb21FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLHR0LCExKSxsLmRvbUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLCQsITEpLGwuZG9tRWxlbWVudC5vd25lckRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwb2ludGVybW92ZVwiLFksITEpLGwuZG9tRWxlbWVudC5vd25lckRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwb2ludGVydXBcIixaLCExKSxsLmRvbUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIixLLCExKX07dmFyIGw9dGhpcyx1PXt0eXBlOlwiY2hhbmdlXCJ9LGg9e3R5cGU6XCJzdGFydFwifSxkPXt0eXBlOlwiZW5kXCJ9LHA9e05PTkU6LTEsUk9UQVRFOjAsRE9MTFk6MSxQQU46MixUT1VDSF9ST1RBVEU6MyxUT1VDSF9QQU46NCxUT1VDSF9ET0xMWV9QQU46NSxUT1VDSF9ET0xMWV9ST1RBVEU6Nn0sZj1wLk5PTkUsbT0xZS02LGc9bmV3IHIuU3BoZXJpY2FsLHY9bmV3IHIuU3BoZXJpY2FsLHk9MSx4PW5ldyByLlZlY3RvcjMsYj0hMSx3PW5ldyByLlZlY3RvcjIsXz1uZXcgci5WZWN0b3IyLE09bmV3IHIuVmVjdG9yMixTPW5ldyByLlZlY3RvcjIsVD1uZXcgci5WZWN0b3IyLEU9bmV3IHIuVmVjdG9yMixBPW5ldyByLlZlY3RvcjIsTD1uZXcgci5WZWN0b3IyLFI9bmV3IHIuVmVjdG9yMjtmdW5jdGlvbiBQKCl7cmV0dXJuIE1hdGgucG93KC45NSxsLnpvb21TcGVlZCl9ZnVuY3Rpb24gQyh0KXt2LnRoZXRhLT10fWZ1bmN0aW9uIEkodCl7di5waGktPXR9dmFyIE8sTj0oTz1uZXcgci5WZWN0b3IzLGZ1bmN0aW9uKHQsZSl7Ty5zZXRGcm9tTWF0cml4Q29sdW1uKGUsMCksTy5tdWx0aXBseVNjYWxhcigtdCkseC5hZGQoTyl9KSxEPWZ1bmN0aW9uKCl7dmFyIHQ9bmV3IHIuVmVjdG9yMztyZXR1cm4gZnVuY3Rpb24oZSxuKXshMD09PWwuc2NyZWVuU3BhY2VQYW5uaW5nP3Quc2V0RnJvbU1hdHJpeENvbHVtbihuLDEpOih0LnNldEZyb21NYXRyaXhDb2x1bW4obiwwKSx0LmNyb3NzVmVjdG9ycyhsLm9iamVjdC51cCx0KSksdC5tdWx0aXBseVNjYWxhcihlKSx4LmFkZCh0KX19KCksQj1mdW5jdGlvbigpe3ZhciB0PW5ldyByLlZlY3RvcjM7cmV0dXJuIGZ1bmN0aW9uKGUsbil7dmFyIHI9bC5kb21FbGVtZW50O2lmKGwub2JqZWN0LmlzUGVyc3BlY3RpdmVDYW1lcmEpe3ZhciBpPWwub2JqZWN0LnBvc2l0aW9uO3QuY29weShpKS5zdWIobC50YXJnZXQpO3ZhciBvPXQubGVuZ3RoKCk7byo9TWF0aC50YW4obC5vYmplY3QuZm92LzIqTWF0aC5QSS8xODApLE4oMiplKm8vci5jbGllbnRIZWlnaHQsbC5vYmplY3QubWF0cml4KSxEKDIqbipvL3IuY2xpZW50SGVpZ2h0LGwub2JqZWN0Lm1hdHJpeCl9ZWxzZSBsLm9iamVjdC5pc09ydGhvZ3JhcGhpY0NhbWVyYT8oTihlKihsLm9iamVjdC5yaWdodC1sLm9iamVjdC5sZWZ0KS9sLm9iamVjdC56b29tL3IuY2xpZW50V2lkdGgsbC5vYmplY3QubWF0cml4KSxEKG4qKGwub2JqZWN0LnRvcC1sLm9iamVjdC5ib3R0b20pL2wub2JqZWN0Lnpvb20vci5jbGllbnRIZWlnaHQsbC5vYmplY3QubWF0cml4KSk6KGNvbnNvbGUud2FybihcIldBUk5JTkc6IE9yYml0Q29udHJvbHMuanMgZW5jb3VudGVyZWQgYW4gdW5rbm93biBjYW1lcmEgdHlwZSAtIHBhbiBkaXNhYmxlZC5cIiksbC5lbmFibGVQYW49ITEpfX0oKTtmdW5jdGlvbiBGKHQpe2wub2JqZWN0LmlzUGVyc3BlY3RpdmVDYW1lcmE/eS89dDpsLm9iamVjdC5pc09ydGhvZ3JhcGhpY0NhbWVyYT8obC5vYmplY3Quem9vbT1NYXRoLm1heChsLm1pblpvb20sTWF0aC5taW4obC5tYXhab29tLGwub2JqZWN0Lnpvb20qdCkpLGwub2JqZWN0LnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKSxiPSEwKTooY29uc29sZS53YXJuKFwiV0FSTklORzogT3JiaXRDb250cm9scy5qcyBlbmNvdW50ZXJlZCBhbiB1bmtub3duIGNhbWVyYSB0eXBlIC0gZG9sbHkvem9vbSBkaXNhYmxlZC5cIiksbC5lbmFibGVab29tPSExKX1mdW5jdGlvbiBVKHQpe2wub2JqZWN0LmlzUGVyc3BlY3RpdmVDYW1lcmE/eSo9dDpsLm9iamVjdC5pc09ydGhvZ3JhcGhpY0NhbWVyYT8obC5vYmplY3Quem9vbT1NYXRoLm1heChsLm1pblpvb20sTWF0aC5taW4obC5tYXhab29tLGwub2JqZWN0Lnpvb20vdCkpLGwub2JqZWN0LnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKSxiPSEwKTooY29uc29sZS53YXJuKFwiV0FSTklORzogT3JiaXRDb250cm9scy5qcyBlbmNvdW50ZXJlZCBhbiB1bmtub3duIGNhbWVyYSB0eXBlIC0gZG9sbHkvem9vbSBkaXNhYmxlZC5cIiksbC5lbmFibGVab29tPSExKX1mdW5jdGlvbiB6KHQpe3cuc2V0KHQuY2xpZW50WCx0LmNsaWVudFkpfWZ1bmN0aW9uIEcodCl7Uy5zZXQodC5jbGllbnRYLHQuY2xpZW50WSl9ZnVuY3Rpb24gSCh0KXtpZigxPT10LnRvdWNoZXMubGVuZ3RoKXcuc2V0KHQudG91Y2hlc1swXS5wYWdlWCx0LnRvdWNoZXNbMF0ucGFnZVkpO2Vsc2V7dmFyIGU9LjUqKHQudG91Y2hlc1swXS5wYWdlWCt0LnRvdWNoZXNbMV0ucGFnZVgpLG49LjUqKHQudG91Y2hlc1swXS5wYWdlWSt0LnRvdWNoZXNbMV0ucGFnZVkpO3cuc2V0KGUsbil9fWZ1bmN0aW9uIGsodCl7aWYoMT09dC50b3VjaGVzLmxlbmd0aClTLnNldCh0LnRvdWNoZXNbMF0ucGFnZVgsdC50b3VjaGVzWzBdLnBhZ2VZKTtlbHNle3ZhciBlPS41Kih0LnRvdWNoZXNbMF0ucGFnZVgrdC50b3VjaGVzWzFdLnBhZ2VYKSxuPS41Kih0LnRvdWNoZXNbMF0ucGFnZVkrdC50b3VjaGVzWzFdLnBhZ2VZKTtTLnNldChlLG4pfX1mdW5jdGlvbiBWKHQpe3ZhciBlPXQudG91Y2hlc1swXS5wYWdlWC10LnRvdWNoZXNbMV0ucGFnZVgsbj10LnRvdWNoZXNbMF0ucGFnZVktdC50b3VjaGVzWzFdLnBhZ2VZLHI9TWF0aC5zcXJ0KGUqZStuKm4pO0Euc2V0KDAscil9ZnVuY3Rpb24gaih0KXtpZigxPT10LnRvdWNoZXMubGVuZ3RoKV8uc2V0KHQudG91Y2hlc1swXS5wYWdlWCx0LnRvdWNoZXNbMF0ucGFnZVkpO2Vsc2V7dmFyIGU9LjUqKHQudG91Y2hlc1swXS5wYWdlWCt0LnRvdWNoZXNbMV0ucGFnZVgpLG49LjUqKHQudG91Y2hlc1swXS5wYWdlWSt0LnRvdWNoZXNbMV0ucGFnZVkpO18uc2V0KGUsbil9TS5zdWJWZWN0b3JzKF8sdykubXVsdGlwbHlTY2FsYXIobC5yb3RhdGVTcGVlZCk7dmFyIHI9bC5kb21FbGVtZW50O0MoMipNYXRoLlBJKk0ueC9yLmNsaWVudEhlaWdodCksSSgyKk1hdGguUEkqTS55L3IuY2xpZW50SGVpZ2h0KSx3LmNvcHkoXyl9ZnVuY3Rpb24gVyh0KXtpZigxPT10LnRvdWNoZXMubGVuZ3RoKVQuc2V0KHQudG91Y2hlc1swXS5wYWdlWCx0LnRvdWNoZXNbMF0ucGFnZVkpO2Vsc2V7dmFyIGU9LjUqKHQudG91Y2hlc1swXS5wYWdlWCt0LnRvdWNoZXNbMV0ucGFnZVgpLG49LjUqKHQudG91Y2hlc1swXS5wYWdlWSt0LnRvdWNoZXNbMV0ucGFnZVkpO1Quc2V0KGUsbil9RS5zdWJWZWN0b3JzKFQsUykubXVsdGlwbHlTY2FsYXIobC5wYW5TcGVlZCksQihFLngsRS55KSxTLmNvcHkoVCl9ZnVuY3Rpb24gWCh0KXt2YXIgZT10LnRvdWNoZXNbMF0ucGFnZVgtdC50b3VjaGVzWzFdLnBhZ2VYLG49dC50b3VjaGVzWzBdLnBhZ2VZLXQudG91Y2hlc1sxXS5wYWdlWSxyPU1hdGguc3FydChlKmUrbipuKTtMLnNldCgwLHIpLFIuc2V0KDAsTWF0aC5wb3coTC55L0EueSxsLnpvb21TcGVlZCkpLEYoUi55KSxBLmNvcHkoTCl9ZnVuY3Rpb24gcSh0KXtpZighMSE9PWwuZW5hYmxlZClzd2l0Y2godC5wb2ludGVyVHlwZSl7Y2FzZVwibW91c2VcIjpjYXNlXCJwZW5cIjohZnVuY3Rpb24odCl7dmFyIGU7c3dpdGNoKHQucHJldmVudERlZmF1bHQoKSxsLmRvbUVsZW1lbnQuZm9jdXM/bC5kb21FbGVtZW50LmZvY3VzKCk6d2luZG93LmZvY3VzKCksdC5idXR0b24pe2Nhc2UgMDplPWwubW91c2VCdXR0b25zLkxFRlQ7YnJlYWs7Y2FzZSAxOmU9bC5tb3VzZUJ1dHRvbnMuTUlERExFO2JyZWFrO2Nhc2UgMjplPWwubW91c2VCdXR0b25zLlJJR0hUO2JyZWFrO2RlZmF1bHQ6ZT0tMX1zd2l0Y2goZSl7Y2FzZSByLk1PVVNFLkRPTExZOmlmKCExPT09bC5lbmFibGVab29tKXJldHVybjshZnVuY3Rpb24odCl7QS5zZXQodC5jbGllbnRYLHQuY2xpZW50WSl9KHQpLGY9cC5ET0xMWTticmVhaztjYXNlIHIuTU9VU0UuUk9UQVRFOmlmKHQuY3RybEtleXx8dC5tZXRhS2V5fHx0LnNoaWZ0S2V5KXtpZighMT09PWwuZW5hYmxlUGFuKXJldHVybjtHKHQpLGY9cC5QQU59ZWxzZXtpZighMT09PWwuZW5hYmxlUm90YXRlKXJldHVybjt6KHQpLGY9cC5ST1RBVEV9YnJlYWs7Y2FzZSByLk1PVVNFLlBBTjppZih0LmN0cmxLZXl8fHQubWV0YUtleXx8dC5zaGlmdEtleSl7aWYoITE9PT1sLmVuYWJsZVJvdGF0ZSlyZXR1cm47eih0KSxmPXAuUk9UQVRFfWVsc2V7aWYoITE9PT1sLmVuYWJsZVBhbilyZXR1cm47Ryh0KSxmPXAuUEFOfWJyZWFrO2RlZmF1bHQ6Zj1wLk5PTkV9ZiE9PXAuTk9ORSYmKGwuZG9tRWxlbWVudC5vd25lckRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVybW92ZVwiLFksITEpLGwuZG9tRWxlbWVudC5vd25lckRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVydXBcIixaLCExKSxsLmRpc3BhdGNoRXZlbnQoaCkpfSh0KX19ZnVuY3Rpb24gWSh0KXtpZighMSE9PWwuZW5hYmxlZClzd2l0Y2godC5wb2ludGVyVHlwZSl7Y2FzZVwibW91c2VcIjpjYXNlXCJwZW5cIjohZnVuY3Rpb24odCl7aWYoITE9PT1sLmVuYWJsZWQpcmV0dXJuO3N3aXRjaCh0LnByZXZlbnREZWZhdWx0KCksZil7Y2FzZSBwLlJPVEFURTppZighMT09PWwuZW5hYmxlUm90YXRlKXJldHVybjshZnVuY3Rpb24odCl7Xy5zZXQodC5jbGllbnRYLHQuY2xpZW50WSksTS5zdWJWZWN0b3JzKF8sdykubXVsdGlwbHlTY2FsYXIobC5yb3RhdGVTcGVlZCk7dmFyIGU9bC5kb21FbGVtZW50O0MoMipNYXRoLlBJKk0ueC9lLmNsaWVudEhlaWdodCksSSgyKk1hdGguUEkqTS55L2UuY2xpZW50SGVpZ2h0KSx3LmNvcHkoXyksbC51cGRhdGUoKX0odCk7YnJlYWs7Y2FzZSBwLkRPTExZOmlmKCExPT09bC5lbmFibGVab29tKXJldHVybjshZnVuY3Rpb24odCl7TC5zZXQodC5jbGllbnRYLHQuY2xpZW50WSksUi5zdWJWZWN0b3JzKEwsQSksUi55PjA/RihQKCkpOlIueTwwJiZVKFAoKSksQS5jb3B5KEwpLGwudXBkYXRlKCl9KHQpO2JyZWFrO2Nhc2UgcC5QQU46aWYoITE9PT1sLmVuYWJsZVBhbilyZXR1cm47IWZ1bmN0aW9uKHQpe1Quc2V0KHQuY2xpZW50WCx0LmNsaWVudFkpLEUuc3ViVmVjdG9ycyhULFMpLm11bHRpcGx5U2NhbGFyKGwucGFuU3BlZWQpLEIoRS54LEUueSksUy5jb3B5KFQpLGwudXBkYXRlKCl9KHQpfX0odCl9fWZ1bmN0aW9uIFoodCl7c3dpdGNoKHQucG9pbnRlclR5cGUpe2Nhc2VcIm1vdXNlXCI6Y2FzZVwicGVuXCI6IWZ1bmN0aW9uKHQpe2lmKGwuZG9tRWxlbWVudC5vd25lckRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwb2ludGVybW92ZVwiLFksITEpLGwuZG9tRWxlbWVudC5vd25lckRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwb2ludGVydXBcIixaLCExKSwhMT09PWwuZW5hYmxlZClyZXR1cm47bC5kaXNwYXRjaEV2ZW50KGQpLGY9cC5OT05FfSgpfX1mdW5jdGlvbiBKKHQpeyExPT09bC5lbmFibGVkfHwhMT09PWwuZW5hYmxlWm9vbXx8ZiE9PXAuTk9ORSYmZiE9PXAuUk9UQVRFfHwodC5wcmV2ZW50RGVmYXVsdCgpLHQuc3RvcFByb3BhZ2F0aW9uKCksbC5kaXNwYXRjaEV2ZW50KGgpLGZ1bmN0aW9uKHQpe3QuZGVsdGFZPDA/VShQKCkpOnQuZGVsdGFZPjAmJkYoUCgpKSxsLnVwZGF0ZSgpfSh0KSxsLmRpc3BhdGNoRXZlbnQoZCkpfWZ1bmN0aW9uIEsodCl7ITEhPT1sLmVuYWJsZWQmJiExIT09bC5lbmFibGVLZXlzJiYhMSE9PWwuZW5hYmxlUGFuJiZmdW5jdGlvbih0KXt2YXIgZT0hMTtzd2l0Y2godC5rZXlDb2RlKXtjYXNlIGwua2V5cy5VUDpCKDAsbC5rZXlQYW5TcGVlZCksZT0hMDticmVhaztjYXNlIGwua2V5cy5CT1RUT006QigwLC1sLmtleVBhblNwZWVkKSxlPSEwO2JyZWFrO2Nhc2UgbC5rZXlzLkxFRlQ6QihsLmtleVBhblNwZWVkLDApLGU9ITA7YnJlYWs7Y2FzZSBsLmtleXMuUklHSFQ6QigtbC5rZXlQYW5TcGVlZCwwKSxlPSEwfWUmJih0LnByZXZlbnREZWZhdWx0KCksbC51cGRhdGUoKSl9KHQpfWZ1bmN0aW9uIFEodCl7aWYoITEhPT1sLmVuYWJsZWQpe3N3aXRjaCh0LnByZXZlbnREZWZhdWx0KCksdC50b3VjaGVzLmxlbmd0aCl7Y2FzZSAxOnN3aXRjaChsLnRvdWNoZXMuT05FKXtjYXNlIHIuVE9VQ0guUk9UQVRFOmlmKCExPT09bC5lbmFibGVSb3RhdGUpcmV0dXJuO0godCksZj1wLlRPVUNIX1JPVEFURTticmVhaztjYXNlIHIuVE9VQ0guUEFOOmlmKCExPT09bC5lbmFibGVQYW4pcmV0dXJuO2sodCksZj1wLlRPVUNIX1BBTjticmVhaztkZWZhdWx0OmY9cC5OT05FfWJyZWFrO2Nhc2UgMjpzd2l0Y2gobC50b3VjaGVzLlRXTyl7Y2FzZSByLlRPVUNILkRPTExZX1BBTjppZighMT09PWwuZW5hYmxlWm9vbSYmITE9PT1sLmVuYWJsZVBhbilyZXR1cm47IWZ1bmN0aW9uKHQpe2wuZW5hYmxlWm9vbSYmVih0KSxsLmVuYWJsZVBhbiYmayh0KX0odCksZj1wLlRPVUNIX0RPTExZX1BBTjticmVhaztjYXNlIHIuVE9VQ0guRE9MTFlfUk9UQVRFOmlmKCExPT09bC5lbmFibGVab29tJiYhMT09PWwuZW5hYmxlUm90YXRlKXJldHVybjshZnVuY3Rpb24odCl7bC5lbmFibGVab29tJiZWKHQpLGwuZW5hYmxlUm90YXRlJiZIKHQpfSh0KSxmPXAuVE9VQ0hfRE9MTFlfUk9UQVRFO2JyZWFrO2RlZmF1bHQ6Zj1wLk5PTkV9YnJlYWs7ZGVmYXVsdDpmPXAuTk9ORX1mIT09cC5OT05FJiZsLmRpc3BhdGNoRXZlbnQoaCl9fWZ1bmN0aW9uICQodCl7aWYoITEhPT1sLmVuYWJsZWQpc3dpdGNoKHQucHJldmVudERlZmF1bHQoKSx0LnN0b3BQcm9wYWdhdGlvbigpLGYpe2Nhc2UgcC5UT1VDSF9ST1RBVEU6aWYoITE9PT1sLmVuYWJsZVJvdGF0ZSlyZXR1cm47aih0KSxsLnVwZGF0ZSgpO2JyZWFrO2Nhc2UgcC5UT1VDSF9QQU46aWYoITE9PT1sLmVuYWJsZVBhbilyZXR1cm47Vyh0KSxsLnVwZGF0ZSgpO2JyZWFrO2Nhc2UgcC5UT1VDSF9ET0xMWV9QQU46aWYoITE9PT1sLmVuYWJsZVpvb20mJiExPT09bC5lbmFibGVQYW4pcmV0dXJuOyFmdW5jdGlvbih0KXtsLmVuYWJsZVpvb20mJlgodCksbC5lbmFibGVQYW4mJlcodCl9KHQpLGwudXBkYXRlKCk7YnJlYWs7Y2FzZSBwLlRPVUNIX0RPTExZX1JPVEFURTppZighMT09PWwuZW5hYmxlWm9vbSYmITE9PT1sLmVuYWJsZVJvdGF0ZSlyZXR1cm47IWZ1bmN0aW9uKHQpe2wuZW5hYmxlWm9vbSYmWCh0KSxsLmVuYWJsZVJvdGF0ZSYmaih0KX0odCksbC51cGRhdGUoKTticmVhaztkZWZhdWx0OmY9cC5OT05FfX1mdW5jdGlvbiB0dCh0KXshMSE9PWwuZW5hYmxlZCYmKGwuZGlzcGF0Y2hFdmVudChkKSxmPXAuTk9ORSl9ZnVuY3Rpb24gZXQodCl7ITEhPT1sLmVuYWJsZWQmJnQucHJldmVudERlZmF1bHQoKX1sLmRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNvbnRleHRtZW51XCIsZXQsITEpLGwuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcmRvd25cIixxLCExKSxsLmRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIndoZWVsXCIsSiwhMSksbC5kb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsUSwhMSksbC5kb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLHR0LCExKSxsLmRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLCQsITEpLGwuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLEssITEpLHRoaXMudXBkYXRlKCl9O2kucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoci5FdmVudERpc3BhdGNoZXIucHJvdG90eXBlKSxpLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1pO3ZhciBvPWZ1bmN0aW9uKHQsZSl7aS5jYWxsKHRoaXMsdCxlKSx0aGlzLnNjcmVlblNwYWNlUGFubmluZz0hMSx0aGlzLm1vdXNlQnV0dG9ucy5MRUZUPXIuTU9VU0UuUEFOLHRoaXMubW91c2VCdXR0b25zLlJJR0hUPXIuTU9VU0UuUk9UQVRFLHRoaXMudG91Y2hlcy5PTkU9ci5UT1VDSC5QQU4sdGhpcy50b3VjaGVzLlRXTz1yLlRPVUNILkRPTExZX1JPVEFURX07by5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShyLkV2ZW50RGlzcGF0Y2hlci5wcm90b3R5cGUpLG8ucHJvdG90eXBlLmNvbnN0cnVjdG9yPW99LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtuLnIoZSksbi5kKGUsXCJXRUJHTFwiLChmdW5jdGlvbigpe3JldHVybiByfSkpO3ZhciByPXtpc1dlYkdMQXZhaWxhYmxlOmZ1bmN0aW9uKCl7dHJ5e3ZhciB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7cmV0dXJuISghd2luZG93LldlYkdMUmVuZGVyaW5nQ29udGV4dHx8IXQuZ2V0Q29udGV4dChcIndlYmdsXCIpJiYhdC5nZXRDb250ZXh0KFwiZXhwZXJpbWVudGFsLXdlYmdsXCIpKX1jYXRjaCh0KXtyZXR1cm4hMX19LGlzV2ViR0wyQXZhaWxhYmxlOmZ1bmN0aW9uKCl7dHJ5e3ZhciB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7cmV0dXJuISghd2luZG93LldlYkdMMlJlbmRlcmluZ0NvbnRleHR8fCF0LmdldENvbnRleHQoXCJ3ZWJnbDJcIikpfWNhdGNoKHQpe3JldHVybiExfX0sZ2V0V2ViR0xFcnJvck1lc3NhZ2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRFcnJvck1lc3NhZ2UoMSl9LGdldFdlYkdMMkVycm9yTWVzc2FnZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldEVycm9yTWVzc2FnZSgyKX0sZ2V0RXJyb3JNZXNzYWdlOmZ1bmN0aW9uKHQpe3ZhciBlPXsxOndpbmRvdy5XZWJHTFJlbmRlcmluZ0NvbnRleHQsMjp3aW5kb3cuV2ViR0wyUmVuZGVyaW5nQ29udGV4dH0sbj0nWW91ciAkMCBkb2VzIG5vdCBzZWVtIHRvIHN1cHBvcnQgPGEgaHJlZj1cImh0dHA6Ly9raHJvbm9zLm9yZy93ZWJnbC93aWtpL0dldHRpbmdfYV9XZWJHTF9JbXBsZW1lbnRhdGlvblwiIHN0eWxlPVwiY29sb3I6IzAwMFwiPiQxPC9hPicscj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3JldHVybiByLmlkPVwid2ViZ2xtZXNzYWdlXCIsci5zdHlsZS5mb250RmFtaWx5PVwibW9ub3NwYWNlXCIsci5zdHlsZS5mb250U2l6ZT1cIjEzcHhcIixyLnN0eWxlLmZvbnRXZWlnaHQ9XCJub3JtYWxcIixyLnN0eWxlLnRleHRBbGlnbj1cImNlbnRlclwiLHIuc3R5bGUuYmFja2dyb3VuZD1cIiNmZmZcIixyLnN0eWxlLmNvbG9yPVwiIzAwMFwiLHIuc3R5bGUucGFkZGluZz1cIjEuNWVtXCIsci5zdHlsZS53aWR0aD1cIjQwMHB4XCIsci5zdHlsZS5tYXJnaW49XCI1ZW0gYXV0byAwXCIsbj0obj1lW3RdP24ucmVwbGFjZShcIiQwXCIsXCJncmFwaGljcyBjYXJkXCIpOm4ucmVwbGFjZShcIiQwXCIsXCJicm93c2VyXCIpKS5yZXBsYWNlKFwiJDFcIix7MTpcIldlYkdMXCIsMjpcIldlYkdMIDJcIn1bdF0pLHIuaW5uZXJIVE1MPW4scn19fSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7bi5yKGUpLG4uZChlLFwiUmVuZGVyUGFzc1wiLChmdW5jdGlvbigpe3JldHVybiBpfSkpO3ZhciByPW4oMSksaT1mdW5jdGlvbih0LGUsbixpLG8pe3IuYS5jYWxsKHRoaXMpLHRoaXMuc2NlbmU9dCx0aGlzLmNhbWVyYT1lLHRoaXMub3ZlcnJpZGVNYXRlcmlhbD1uLHRoaXMuY2xlYXJDb2xvcj1pLHRoaXMuY2xlYXJBbHBoYT12b2lkIDAhPT1vP286MCx0aGlzLmNsZWFyPSEwLHRoaXMuY2xlYXJEZXB0aD0hMSx0aGlzLm5lZWRzU3dhcD0hMX07aS5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKHIuYS5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjppLHJlbmRlcjpmdW5jdGlvbih0LGUsbil7dmFyIHIsaSxvLGE9dC5hdXRvQ2xlYXI7dC5hdXRvQ2xlYXI9ITEsdm9pZCAwIT09dGhpcy5vdmVycmlkZU1hdGVyaWFsJiYobz10aGlzLnNjZW5lLm92ZXJyaWRlTWF0ZXJpYWwsdGhpcy5zY2VuZS5vdmVycmlkZU1hdGVyaWFsPXRoaXMub3ZlcnJpZGVNYXRlcmlhbCksdGhpcy5jbGVhckNvbG9yJiYocj10LmdldENsZWFyQ29sb3IoKS5nZXRIZXgoKSxpPXQuZ2V0Q2xlYXJBbHBoYSgpLHQuc2V0Q2xlYXJDb2xvcih0aGlzLmNsZWFyQ29sb3IsdGhpcy5jbGVhckFscGhhKSksdGhpcy5jbGVhckRlcHRoJiZ0LmNsZWFyRGVwdGgoKSx0LnNldFJlbmRlclRhcmdldCh0aGlzLnJlbmRlclRvU2NyZWVuP251bGw6biksdGhpcy5jbGVhciYmdC5jbGVhcih0LmF1dG9DbGVhckNvbG9yLHQuYXV0b0NsZWFyRGVwdGgsdC5hdXRvQ2xlYXJTdGVuY2lsKSx0LnJlbmRlcih0aGlzLnNjZW5lLHRoaXMuY2FtZXJhKSx0aGlzLmNsZWFyQ29sb3ImJnQuc2V0Q2xlYXJDb2xvcihyLGkpLHZvaWQgMCE9PXRoaXMub3ZlcnJpZGVNYXRlcmlhbCYmKHRoaXMuc2NlbmUub3ZlcnJpZGVNYXRlcmlhbD1vKSx0LmF1dG9DbGVhcj1hfX0pfSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7bi5yKGUpLG4uZChlLFwiRG90U2NyZWVuU2hhZGVyXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGl9KSk7dmFyIHI9bigwKSxpPXt1bmlmb3Jtczp7dERpZmZ1c2U6e3ZhbHVlOm51bGx9LHRTaXplOnt2YWx1ZTpuZXcgci5WZWN0b3IyKDI1NiwyNTYpfSxjZW50ZXI6e3ZhbHVlOm5ldyByLlZlY3RvcjIoLjUsLjUpfSxhbmdsZTp7dmFsdWU6MS41N30sc2NhbGU6e3ZhbHVlOjF9fSx2ZXJ0ZXhTaGFkZXI6W1widmFyeWluZyB2ZWMyIHZVdjtcIixcInZvaWQgbWFpbigpIHtcIixcIlxcdHZVdiA9IHV2O1wiLFwiXFx0Z2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogbW9kZWxWaWV3TWF0cml4ICogdmVjNCggcG9zaXRpb24sIDEuMCApO1wiLFwifVwiXS5qb2luKFwiXFxuXCIpLGZyYWdtZW50U2hhZGVyOltcInVuaWZvcm0gdmVjMiBjZW50ZXI7XCIsXCJ1bmlmb3JtIGZsb2F0IGFuZ2xlO1wiLFwidW5pZm9ybSBmbG9hdCBzY2FsZTtcIixcInVuaWZvcm0gdmVjMiB0U2l6ZTtcIixcInVuaWZvcm0gc2FtcGxlcjJEIHREaWZmdXNlO1wiLFwidmFyeWluZyB2ZWMyIHZVdjtcIixcImZsb2F0IHBhdHRlcm4oKSB7XCIsXCJcXHRmbG9hdCBzID0gc2luKCBhbmdsZSApLCBjID0gY29zKCBhbmdsZSApO1wiLFwiXFx0dmVjMiB0ZXggPSB2VXYgKiB0U2l6ZSAtIGNlbnRlcjtcIixcIlxcdHZlYzIgcG9pbnQgPSB2ZWMyKCBjICogdGV4LnggLSBzICogdGV4LnksIHMgKiB0ZXgueCArIGMgKiB0ZXgueSApICogc2NhbGU7XCIsXCJcXHRyZXR1cm4gKCBzaW4oIHBvaW50LnggKSAqIHNpbiggcG9pbnQueSApICkgKiA0LjA7XCIsXCJ9XCIsXCJ2b2lkIG1haW4oKSB7XCIsXCJcXHR2ZWM0IGNvbG9yID0gdGV4dHVyZTJEKCB0RGlmZnVzZSwgdlV2ICk7XCIsXCJcXHRmbG9hdCBhdmVyYWdlID0gKCBjb2xvci5yICsgY29sb3IuZyArIGNvbG9yLmIgKSAvIDMuMDtcIixcIlxcdGdsX0ZyYWdDb2xvciA9IHZlYzQoIHZlYzMoIGF2ZXJhZ2UgKiAxMC4wIC0gNS4wICsgcGF0dGVybigpICksIGNvbG9yLmEgKTtcIixcIn1cIl0uam9pbihcIlxcblwiKX19LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtuLnIoZSksbi5kKGUsXCJGQlhMb2FkZXJcIiwoZnVuY3Rpb24oKXtyZXR1cm4gVn0pKTt2YXIgcj1uKDApLGk9e30sbz1pO1xuLyoqIEBsaWNlbnNlIHpsaWIuanMgMjAxMiAtIGltYXlhIFsgaHR0cHM6Ly9naXRodWIuY29tL2ltYXlhL3psaWIuanMgXSBUaGUgTUlUIExpY2Vuc2UgKi9mdW5jdGlvbiBhKHQsZSl7dmFyIG4scj10LnNwbGl0KFwiLlwiKSxpPW87IShyWzBdaW4gaSkmJmkuZXhlY1NjcmlwdCYmaS5leGVjU2NyaXB0KFwidmFyIFwiK3JbMF0pO2Zvcig7ci5sZW5ndGgmJihuPXIuc2hpZnQoKSk7KXIubGVuZ3RofHx2b2lkIDA9PT1lP2k9aVtuXT9pW25dOmlbbl09e306aVtuXT1lfXZhciBzPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBVaW50OEFycmF5JiZcInVuZGVmaW5lZFwiIT10eXBlb2YgVWludDE2QXJyYXkmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBVaW50MzJBcnJheSYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIERhdGFWaWV3O2Z1bmN0aW9uIGModCl7dmFyIGUsbixyLGksbyxhLGMsbCx1LGgsZD10Lmxlbmd0aCxwPTAsZj1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7Zm9yKGw9MDtsPGQ7KytsKXRbbF0+cCYmKHA9dFtsXSksdFtsXTxmJiYoZj10W2xdKTtmb3IoZT0xPDxwLG49bmV3KHM/VWludDMyQXJyYXk6QXJyYXkpKGUpLHI9MSxpPTAsbz0yO3I8PXA7KXtmb3IobD0wO2w8ZDsrK2wpaWYodFtsXT09PXIpe2ZvcihhPTAsYz1pLHU9MDt1PHI7Kyt1KWE9YTw8MXwxJmMsYz4+PTE7Zm9yKGg9cjw8MTZ8bCx1PWE7dTxlO3UrPW8pblt1XT1oOysraX0rK3IsaTw8PTEsbzw8PTF9cmV0dXJuW24scCxmXX1mdW5jdGlvbiBsKHQsZSl7c3dpdGNoKHRoaXMuZz1bXSx0aGlzLmg9MzI3NjgsdGhpcy5kPXRoaXMuZj10aGlzLmE9dGhpcy5sPTAsdGhpcy5pbnB1dD1zP25ldyBVaW50OEFycmF5KHQpOnQsdGhpcy5tPSExLHRoaXMuaT1oLHRoaXMucj0hMSwhZSYmKGU9e30pfHwoZS5pbmRleCYmKHRoaXMuYT1lLmluZGV4KSxlLmJ1ZmZlclNpemUmJih0aGlzLmg9ZS5idWZmZXJTaXplKSxlLmJ1ZmZlclR5cGUmJih0aGlzLmk9ZS5idWZmZXJUeXBlKSxlLnJlc2l6ZSYmKHRoaXMucj1lLnJlc2l6ZSkpLHRoaXMuaSl7Y2FzZSB1OnRoaXMuYj0zMjc2OCx0aGlzLmM9bmV3KHM/VWludDhBcnJheTpBcnJheSkoMzI3NjgrdGhpcy5oKzI1OCk7YnJlYWs7Y2FzZSBoOnRoaXMuYj0wLHRoaXMuYz1uZXcocz9VaW50OEFycmF5OkFycmF5KSh0aGlzLmgpLHRoaXMuZT10aGlzLnosdGhpcy5uPXRoaXMudix0aGlzLmo9dGhpcy53O2JyZWFrO2RlZmF1bHQ6dGhyb3cgRXJyb3IoXCJpbnZhbGlkIGluZmxhdGUgbW9kZVwiKX19dmFyIHU9MCxoPTEsZD17dDp1LHM6aH07bC5wcm90b3R5cGUuaz1mdW5jdGlvbigpe2Zvcig7IXRoaXMubTspe3ZhciB0PUModGhpcywzKTtzd2l0Y2goMSZ0JiYodGhpcy5tPSEwKSx0Pj4+PTEpe2Nhc2UgMDp2YXIgZT10aGlzLmlucHV0LG49dGhpcy5hLHI9dGhpcy5jLGk9dGhpcy5iLG89ZS5sZW5ndGgsYT12b2lkIDAsbD1yLmxlbmd0aCxkPXZvaWQgMDtpZih0aGlzLmQ9dGhpcy5mPTAsbisxPj1vKXRocm93IEVycm9yKFwiaW52YWxpZCB1bmNvbXByZXNzZWQgYmxvY2sgaGVhZGVyOiBMRU5cIik7aWYoYT1lW24rK118ZVtuKytdPDw4LG4rMT49byl0aHJvdyBFcnJvcihcImludmFsaWQgdW5jb21wcmVzc2VkIGJsb2NrIGhlYWRlcjogTkxFTlwiKTtpZihhPT09fihlW24rK118ZVtuKytdPDw4KSl0aHJvdyBFcnJvcihcImludmFsaWQgdW5jb21wcmVzc2VkIGJsb2NrIGhlYWRlcjogbGVuZ3RoIHZlcmlmeVwiKTtpZihuK2E+ZS5sZW5ndGgpdGhyb3cgRXJyb3IoXCJpbnB1dCBidWZmZXIgaXMgYnJva2VuXCIpO3N3aXRjaCh0aGlzLmkpe2Nhc2UgdTpmb3IoO2krYT5yLmxlbmd0aDspe2lmKGEtPWQ9bC1pLHMpci5zZXQoZS5zdWJhcnJheShuLG4rZCksaSksaSs9ZCxuKz1kO2Vsc2UgZm9yKDtkLS07KXJbaSsrXT1lW24rK107dGhpcy5iPWkscj10aGlzLmUoKSxpPXRoaXMuYn1icmVhaztjYXNlIGg6Zm9yKDtpK2E+ci5sZW5ndGg7KXI9dGhpcy5lKHtwOjJ9KTticmVhaztkZWZhdWx0OnRocm93IEVycm9yKFwiaW52YWxpZCBpbmZsYXRlIG1vZGVcIil9aWYocylyLnNldChlLnN1YmFycmF5KG4sbithKSxpKSxpKz1hLG4rPWE7ZWxzZSBmb3IoO2EtLTspcltpKytdPWVbbisrXTt0aGlzLmE9bix0aGlzLmI9aSx0aGlzLmM9cjticmVhaztjYXNlIDE6dGhpcy5qKEwsUCk7YnJlYWs7Y2FzZSAyOnZhciBwLGYsbSx2LHk9Qyh0aGlzLDUpKzI1Nyx4PUModGhpcyw1KSsxLGI9Qyh0aGlzLDQpKzQsdz1uZXcocz9VaW50OEFycmF5OkFycmF5KShnLmxlbmd0aCksXz12b2lkIDAsTT12b2lkIDAsUz12b2lkIDAsVD12b2lkIDAsRT12b2lkIDA7Zm9yKEU9MDtFPGI7KytFKXdbZ1tFXV09Qyh0aGlzLDMpO2lmKCFzKWZvcihFPWIsYj13Lmxlbmd0aDtFPGI7KytFKXdbZ1tFXV09MDtmb3IocD1jKHcpLF89bmV3KHM/VWludDhBcnJheTpBcnJheSkoeSt4KSxFPTAsdj15K3g7RTx2Oylzd2l0Y2goTT1JKHRoaXMscCksTSl7Y2FzZSAxNjpmb3IoVD0zK0ModGhpcywyKTtULS07KV9bRSsrXT1TO2JyZWFrO2Nhc2UgMTc6Zm9yKFQ9MytDKHRoaXMsMyk7VC0tOylfW0UrK109MDtTPTA7YnJlYWs7Y2FzZSAxODpmb3IoVD0xMStDKHRoaXMsNyk7VC0tOylfW0UrK109MDtTPTA7YnJlYWs7ZGVmYXVsdDpTPV9bRSsrXT1NfWY9YyhzP18uc3ViYXJyYXkoMCx5KTpfLnNsaWNlKDAseSkpLG09YyhzP18uc3ViYXJyYXkoeSk6Xy5zbGljZSh5KSksdGhpcy5qKGYsbSk7YnJlYWs7ZGVmYXVsdDp0aHJvdyBFcnJvcihcInVua25vd24gQlRZUEU6IFwiK3QpfX1yZXR1cm4gdGhpcy5uKCl9O3ZhciBwLGYsbT1bMTYsMTcsMTgsMCw4LDcsOSw2LDEwLDUsMTEsNCwxMiwzLDEzLDIsMTQsMSwxNV0sZz1zP25ldyBVaW50MTZBcnJheShtKTptLHY9WzMsNCw1LDYsNyw4LDksMTAsMTEsMTMsMTUsMTcsMTksMjMsMjcsMzEsMzUsNDMsNTEsNTksNjcsODMsOTksMTE1LDEzMSwxNjMsMTk1LDIyNywyNTgsMjU4LDI1OF0seT1zP25ldyBVaW50MTZBcnJheSh2KTp2LHg9WzAsMCwwLDAsMCwwLDAsMCwxLDEsMSwxLDIsMiwyLDIsMywzLDMsMyw0LDQsNCw0LDUsNSw1LDUsMCwwLDBdLGI9cz9uZXcgVWludDhBcnJheSh4KTp4LHc9WzEsMiwzLDQsNSw3LDksMTMsMTcsMjUsMzMsNDksNjUsOTcsMTI5LDE5MywyNTcsMzg1LDUxMyw3NjksMTAyNSwxNTM3LDIwNDksMzA3Myw0MDk3LDYxNDUsODE5MywxMjI4OSwxNjM4NSwyNDU3N10sXz1zP25ldyBVaW50MTZBcnJheSh3KTp3LE09WzAsMCwwLDAsMSwxLDIsMiwzLDMsNCw0LDUsNSw2LDYsNyw3LDgsOCw5LDksMTAsMTAsMTEsMTEsMTIsMTIsMTMsMTNdLFM9cz9uZXcgVWludDhBcnJheShNKTpNLFQ9bmV3KHM/VWludDhBcnJheTpBcnJheSkoMjg4KTtmb3IocD0wLGY9VC5sZW5ndGg7cDxmOysrcClUW3BdPTE0Mz49cD84OjI1NT49cD85OjI3OT49cD83Ojg7dmFyIEUsQSxMPWMoVCksUj1uZXcocz9VaW50OEFycmF5OkFycmF5KSgzMCk7Zm9yKEU9MCxBPVIubGVuZ3RoO0U8QTsrK0UpUltFXT01O3ZhciBQPWMoUik7ZnVuY3Rpb24gQyh0LGUpe2Zvcih2YXIgbixyPXQuZixpPXQuZCxvPXQuaW5wdXQsYT10LmEscz1vLmxlbmd0aDtpPGU7KXtpZihhPj1zKXRocm93IEVycm9yKFwiaW5wdXQgYnVmZmVyIGlzIGJyb2tlblwiKTtyfD1vW2ErK108PGksaSs9OH1yZXR1cm4gbj1yJigxPDxlKS0xLHQuZj1yPj4+ZSx0LmQ9aS1lLHQuYT1hLG59ZnVuY3Rpb24gSSh0LGUpe2Zvcih2YXIgbixyLGk9dC5mLG89dC5kLGE9dC5pbnB1dCxzPXQuYSxjPWEubGVuZ3RoLGw9ZVswXSx1PWVbMV07bzx1JiYhKHM+PWMpOylpfD1hW3MrK108PG8sbys9ODtpZigocj0obj1sW2kmKDE8PHUpLTFdKT4+PjE2KT5vKXRocm93IEVycm9yKFwiaW52YWxpZCBjb2RlIGxlbmd0aDogXCIrcik7cmV0dXJuIHQuZj1pPj5yLHQuZD1vLXIsdC5hPXMsNjU1MzUmbn1mdW5jdGlvbiBPKHQsZSl7dmFyIG4scjtzd2l0Y2godGhpcy5pbnB1dD10LHRoaXMuYT0wLCFlJiYoZT17fSl8fChlLmluZGV4JiYodGhpcy5hPWUuaW5kZXgpLGUudmVyaWZ5JiYodGhpcy5BPWUudmVyaWZ5KSksbj10W3RoaXMuYSsrXSxyPXRbdGhpcy5hKytdLDE1Jm4pe2Nhc2UgTjp0aGlzLm1ldGhvZD1OO2JyZWFrO2RlZmF1bHQ6dGhyb3cgRXJyb3IoXCJ1bnN1cHBvcnRlZCBjb21wcmVzc2lvbiBtZXRob2RcIil9aWYoMCE9KChuPDw4KStyKSUzMSl0aHJvdyBFcnJvcihcImludmFsaWQgZmNoZWNrIGZsYWc6XCIrKChuPDw4KStyKSUzMSk7aWYoMzImcil0aHJvdyBFcnJvcihcImZkaWN0IGZsYWcgaXMgbm90IHN1cHBvcnRlZFwiKTt0aGlzLnE9bmV3IGwodCx7aW5kZXg6dGhpcy5hLGJ1ZmZlclNpemU6ZS5idWZmZXJTaXplLGJ1ZmZlclR5cGU6ZS5idWZmZXJUeXBlLHJlc2l6ZTplLnJlc2l6ZX0pfWwucHJvdG90eXBlLmo9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLmMscj10aGlzLmI7dGhpcy5vPXQ7Zm9yKHZhciBpLG8sYSxzLGM9bi5sZW5ndGgtMjU4OzI1NiE9PShpPUkodGhpcyx0KSk7KWlmKDI1Nj5pKXI+PWMmJih0aGlzLmI9cixuPXRoaXMuZSgpLHI9dGhpcy5iKSxuW3IrK109aTtlbHNlIGZvcihzPXlbbz1pLTI1N10sMDxiW29dJiYocys9Qyh0aGlzLGJbb10pKSxpPUkodGhpcyxlKSxhPV9baV0sMDxTW2ldJiYoYSs9Qyh0aGlzLFNbaV0pKSxyPj1jJiYodGhpcy5iPXIsbj10aGlzLmUoKSxyPXRoaXMuYik7cy0tOyluW3JdPW5bcisrLWFdO2Zvcig7ODw9dGhpcy5kOyl0aGlzLmQtPTgsdGhpcy5hLS07dGhpcy5iPXJ9LGwucHJvdG90eXBlLnc9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLmMscj10aGlzLmI7dGhpcy5vPXQ7Zm9yKHZhciBpLG8sYSxzLGM9bi5sZW5ndGg7MjU2IT09KGk9SSh0aGlzLHQpKTspaWYoMjU2Pmkpcj49YyYmKGM9KG49dGhpcy5lKCkpLmxlbmd0aCksbltyKytdPWk7ZWxzZSBmb3Iocz15W289aS0yNTddLDA8YltvXSYmKHMrPUModGhpcyxiW29dKSksaT1JKHRoaXMsZSksYT1fW2ldLDA8U1tpXSYmKGErPUModGhpcyxTW2ldKSkscitzPmMmJihjPShuPXRoaXMuZSgpKS5sZW5ndGgpO3MtLTspbltyXT1uW3IrKy1hXTtmb3IoOzg8PXRoaXMuZDspdGhpcy5kLT04LHRoaXMuYS0tO3RoaXMuYj1yfSxsLnByb3RvdHlwZS5lPWZ1bmN0aW9uKCl7dmFyIHQsZSxuPW5ldyhzP1VpbnQ4QXJyYXk6QXJyYXkpKHRoaXMuYi0zMjc2OCkscj10aGlzLmItMzI3NjgsaT10aGlzLmM7aWYocyluLnNldChpLnN1YmFycmF5KDMyNzY4LG4ubGVuZ3RoKSk7ZWxzZSBmb3IodD0wLGU9bi5sZW5ndGg7dDxlOysrdCluW3RdPWlbdCszMjc2OF07aWYodGhpcy5nLnB1c2gobiksdGhpcy5sKz1uLmxlbmd0aCxzKWkuc2V0KGkuc3ViYXJyYXkocixyKzMyNzY4KSk7ZWxzZSBmb3IodD0wOzMyNzY4PnQ7Kyt0KWlbdF09aVtyK3RdO3JldHVybiB0aGlzLmI9MzI3NjgsaX0sbC5wcm90b3R5cGUuej1mdW5jdGlvbih0KXt2YXIgZSxuLHIsaT10aGlzLmlucHV0Lmxlbmd0aC90aGlzLmErMXwwLG89dGhpcy5pbnB1dCxhPXRoaXMuYztyZXR1cm4gdCYmKFwibnVtYmVyXCI9PXR5cGVvZiB0LnAmJihpPXQucCksXCJudW1iZXJcIj09dHlwZW9mIHQudSYmKGkrPXQudSkpLDI+aT9uPShyPShvLmxlbmd0aC10aGlzLmEpL3RoaXMub1syXS8yKjI1OHwwKTxhLmxlbmd0aD9hLmxlbmd0aCtyOmEubGVuZ3RoPDwxOm49YS5sZW5ndGgqaSxzPyhlPW5ldyBVaW50OEFycmF5KG4pKS5zZXQoYSk6ZT1hLHRoaXMuYz1lfSxsLnByb3RvdHlwZS5uPWZ1bmN0aW9uKCl7dmFyIHQsZSxuLHIsaSxvPTAsYT10aGlzLmMsYz10aGlzLmcsbD1uZXcocz9VaW50OEFycmF5OkFycmF5KSh0aGlzLmwrKHRoaXMuYi0zMjc2OCkpO2lmKDA9PT1jLmxlbmd0aClyZXR1cm4gcz90aGlzLmMuc3ViYXJyYXkoMzI3NjgsdGhpcy5iKTp0aGlzLmMuc2xpY2UoMzI3NjgsdGhpcy5iKTtmb3IoZT0wLG49Yy5sZW5ndGg7ZTxuOysrZSlmb3Iocj0wLGk9KHQ9Y1tlXSkubGVuZ3RoO3I8aTsrK3IpbFtvKytdPXRbcl07Zm9yKGU9MzI3Njgsbj10aGlzLmI7ZTxuOysrZSlsW28rK109YVtlXTtyZXR1cm4gdGhpcy5nPVtdLHRoaXMuYnVmZmVyPWx9LGwucHJvdG90eXBlLnY9ZnVuY3Rpb24oKXt2YXIgdCxlPXRoaXMuYjtyZXR1cm4gcz90aGlzLnI/KHQ9bmV3IFVpbnQ4QXJyYXkoZSkpLnNldCh0aGlzLmMuc3ViYXJyYXkoMCxlKSk6dD10aGlzLmMuc3ViYXJyYXkoMCxlKToodGhpcy5jLmxlbmd0aD5lJiYodGhpcy5jLmxlbmd0aD1lKSx0PXRoaXMuYyksdGhpcy5idWZmZXI9dH0sTy5wcm90b3R5cGUuaz1mdW5jdGlvbigpe3ZhciB0LGUsbj10aGlzLmlucHV0O2lmKHQ9dGhpcy5xLmsoKSx0aGlzLmE9dGhpcy5xLmEsdGhpcy5BKXtlPShuW3RoaXMuYSsrXTw8MjR8blt0aGlzLmErK108PDE2fG5bdGhpcy5hKytdPDw4fG5bdGhpcy5hKytdKT4+PjA7dmFyIHI9dDtpZihcInN0cmluZ1wiPT10eXBlb2Ygcil7dmFyIGksbyxhPXIuc3BsaXQoXCJcIik7Zm9yKGk9MCxvPWEubGVuZ3RoO2k8bztpKyspYVtpXT0oMjU1JmFbaV0uY2hhckNvZGVBdCgwKSk+Pj4wO3I9YX1mb3IodmFyIHMsYz0xLGw9MCx1PXIubGVuZ3RoLGg9MDswPHU7KXt1LT1zPTEwMjQ8dT8xMDI0OnU7ZG97bCs9Yys9cltoKytdfXdoaWxlKC0tcyk7YyU9NjU1MjEsbCU9NjU1MjF9aWYoZSE9PShsPDwxNnxjKT4+PjApdGhyb3cgRXJyb3IoXCJpbnZhbGlkIGFkbGVyLTMyIGNoZWNrc3VtXCIpfXJldHVybiB0fTt2YXIgTj04O2EoXCJabGliLkluZmxhdGVcIixPKSxhKFwiWmxpYi5JbmZsYXRlLnByb3RvdHlwZS5kZWNvbXByZXNzXCIsTy5wcm90b3R5cGUuayk7dmFyIEQsQixGLFUsej17QURBUFRJVkU6ZC5zLEJMT0NLOmQudH07aWYoT2JqZWN0LmtleXMpRD1PYmplY3Qua2V5cyh6KTtlbHNlIGZvcihCIGluIEQ9W10sRj0wLHopRFtGKytdPUI7Zm9yKEY9MCxVPUQubGVuZ3RoO0Y8VTsrK0YpYShcIlpsaWIuSW5mbGF0ZS5CdWZmZXJUeXBlLlwiKyhCPURbRl0pLHpbQl0pO3ZhciBHPWkuWmxpYi5JbmZsYXRlLEg9e2ZpbmRTcGFuOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uLmxlbmd0aC10LTE7aWYoZT49bltyXSlyZXR1cm4gci0xO2lmKGU8PW5bdF0pcmV0dXJuIHQ7Zm9yKHZhciBpPXQsbz1yLGE9TWF0aC5mbG9vcigoaStvKS8yKTtlPG5bYV18fGU+PW5bYSsxXTspZTxuW2FdP289YTppPWEsYT1NYXRoLmZsb29yKChpK28pLzIpO3JldHVybiBhfSxjYWxjQmFzaXNGdW5jdGlvbnM6ZnVuY3Rpb24odCxlLG4scil7dmFyIGk9W10sbz1bXSxhPVtdO2lbMF09MTtmb3IodmFyIHM9MTtzPD1uOysrcyl7b1tzXT1lLXJbdCsxLXNdLGFbc109clt0K3NdLWU7Zm9yKHZhciBjPTAsbD0wO2w8czsrK2wpe3ZhciB1PWFbbCsxXSxoPW9bcy1sXSxkPWlbbF0vKHUraCk7aVtsXT1jK3UqZCxjPWgqZH1pW3NdPWN9cmV0dXJuIGl9LGNhbGNCU3BsaW5lUG9pbnQ6ZnVuY3Rpb24odCxlLG4saSl7Zm9yKHZhciBvPXRoaXMuZmluZFNwYW4odCxpLGUpLGE9dGhpcy5jYWxjQmFzaXNGdW5jdGlvbnMobyxpLHQsZSkscz1uZXcgci5WZWN0b3I0KDAsMCwwLDApLGM9MDtjPD10OysrYyl7dmFyIGw9bltvLXQrY10sdT1hW2NdLGg9bC53KnU7cy54Kz1sLngqaCxzLnkrPWwueSpoLHMueis9bC56Kmgscy53Kz1sLncqdX1yZXR1cm4gc30sY2FsY0Jhc2lzRnVuY3Rpb25EZXJpdmF0aXZlczpmdW5jdGlvbih0LGUsbixyLGkpe2Zvcih2YXIgbz1bXSxhPTA7YTw9bjsrK2Epb1thXT0wO3ZhciBzPVtdO2ZvcihhPTA7YTw9cjsrK2Epc1thXT1vLnNsaWNlKDApO3ZhciBjPVtdO2ZvcihhPTA7YTw9bjsrK2EpY1thXT1vLnNsaWNlKDApO2NbMF1bMF09MTtmb3IodmFyIGw9by5zbGljZSgwKSx1PW8uc2xpY2UoMCksaD0xO2g8PW47KytoKXtsW2hdPWUtaVt0KzEtaF0sdVtoXT1pW3QraF0tZTtmb3IodmFyIGQ9MCxwPTA7cDxoOysrcCl7dmFyIGY9dVtwKzFdLG09bFtoLXBdO2NbaF1bcF09ZittO3ZhciBnPWNbcF1baC0xXS9jW2hdW3BdO2NbcF1baF09ZCtmKmcsZD1tKmd9Y1toXVtoXT1kfWZvcihoPTA7aDw9bjsrK2gpc1swXVtoXT1jW2hdW25dO2ZvcihwPTA7cDw9bjsrK3Ape3ZhciB2PTAseT0xLHg9W107Zm9yKGE9MDthPD1uOysrYSl4W2FdPW8uc2xpY2UoMCk7eFswXVswXT0xO2Zvcih2YXIgYj0xO2I8PXI7KytiKXt2YXIgdz0wLF89cC1iLE09bi1iO3A+PWImJih4W3ldWzBdPXhbdl1bMF0vY1tNKzFdW19dLHc9eFt5XVswXSpjW19dW01dKTt2YXIgUz1wLTE8PU0/Yi0xOm4tcDtmb3IoaD1fPj0tMT8xOi1fO2g8PVM7KytoKXhbeV1baF09KHhbdl1baF0teFt2XVtoLTFdKS9jW00rMV1bXytoXSx3Kz14W3ldW2hdKmNbXytoXVtNXTtwPD1NJiYoeFt5XVtiXT0teFt2XVtiLTFdL2NbTSsxXVtwXSx3Kz14W3ldW2JdKmNbcF1bTV0pLHNbYl1bcF09dztoPXY7dj15LHk9aH19Zm9yKHA9bixiPTE7Yjw9cjsrK2Ipe2ZvcihoPTA7aDw9bjsrK2gpc1tiXVtoXSo9cDtwKj1uLWJ9cmV0dXJuIHN9LGNhbGNCU3BsaW5lRGVyaXZhdGl2ZXM6ZnVuY3Rpb24odCxlLG4saSxvKXtmb3IodmFyIGE9bzx0P286dCxzPVtdLGM9dGhpcy5maW5kU3Bhbih0LGksZSksbD10aGlzLmNhbGNCYXNpc0Z1bmN0aW9uRGVyaXZhdGl2ZXMoYyxpLHQsYSxlKSx1PVtdLGg9MDtoPG4ubGVuZ3RoOysraCl7dmFyIGQ9KGY9bltoXS5jbG9uZSgpKS53O2YueCo9ZCxmLnkqPWQsZi56Kj1kLHVbaF09Zn1mb3IodmFyIHA9MDtwPD1hOysrcCl7Zm9yKHZhciBmPXVbYy10XS5jbG9uZSgpLm11bHRpcGx5U2NhbGFyKGxbcF1bMF0pLG09MTttPD10OysrbSlmLmFkZCh1W2MtdCttXS5jbG9uZSgpLm11bHRpcGx5U2NhbGFyKGxbcF1bbV0pKTtzW3BdPWZ9Zm9yKHA9YSsxO3A8PW8rMTsrK3Apc1twXT1uZXcgci5WZWN0b3I0KDAsMCwwKTtyZXR1cm4gc30sY2FsY0tvdmVySTpmdW5jdGlvbih0LGUpe2Zvcih2YXIgbj0xLHI9MjtyPD10OysrciluKj1yO3ZhciBpPTE7Zm9yKHI9MjtyPD1lOysrcilpKj1yO2ZvcihyPTI7cjw9dC1lOysrcilpKj1yO3JldHVybiBuL2l9LGNhbGNSYXRpb25hbEN1cnZlRGVyaXZhdGl2ZXM6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXQubGVuZ3RoLG49W10saT1bXSxvPTA7bzxlOysrbyl7dmFyIGE9dFtvXTtuW29dPW5ldyByLlZlY3RvcjMoYS54LGEueSxhLnopLGlbb109YS53fWZvcih2YXIgcz1bXSxjPTA7YzxlOysrYyl7dmFyIGw9bltjXS5jbG9uZSgpO2ZvcihvPTE7bzw9YzsrK28pbC5zdWIoc1tjLW9dLmNsb25lKCkubXVsdGlwbHlTY2FsYXIodGhpcy5jYWxjS292ZXJJKGMsbykqaVtvXSkpO3NbY109bC5kaXZpZGVTY2FsYXIoaVswXSl9cmV0dXJuIHN9LGNhbGNOVVJCU0Rlcml2YXRpdmVzOmZ1bmN0aW9uKHQsZSxuLHIsaSl7dmFyIG89dGhpcy5jYWxjQlNwbGluZURlcml2YXRpdmVzKHQsZSxuLHIsaSk7cmV0dXJuIHRoaXMuY2FsY1JhdGlvbmFsQ3VydmVEZXJpdmF0aXZlcyhvKX0sY2FsY1N1cmZhY2VQb2ludDpmdW5jdGlvbih0LGUsbixpLG8sYSxzLGMpe2Zvcih2YXIgbD10aGlzLmZpbmRTcGFuKHQsYSxuKSx1PXRoaXMuZmluZFNwYW4oZSxzLGkpLGg9dGhpcy5jYWxjQmFzaXNGdW5jdGlvbnMobCxhLHQsbiksZD10aGlzLmNhbGNCYXNpc0Z1bmN0aW9ucyh1LHMsZSxpKSxwPVtdLGY9MDtmPD1lOysrZil7cFtmXT1uZXcgci5WZWN0b3I0KDAsMCwwLDApO2Zvcih2YXIgbT0wO208PXQ7KyttKXt2YXIgZz1vW2wtdCttXVt1LWUrZl0uY2xvbmUoKSx2PWcudztnLngqPXYsZy55Kj12LGcueio9dixwW2ZdLmFkZChnLm11bHRpcGx5U2NhbGFyKGhbbV0pKX19dmFyIHk9bmV3IHIuVmVjdG9yNCgwLDAsMCwwKTtmb3IoZj0wO2Y8PWU7KytmKXkuYWRkKHBbZl0ubXVsdGlwbHlTY2FsYXIoZFtmXSkpO3kuZGl2aWRlU2NhbGFyKHkudyksYy5zZXQoeS54LHkueSx5LnopfX0saz1mdW5jdGlvbih0LGUsbixpLG8pe3IuQ3VydmUuY2FsbCh0aGlzKSx0aGlzLmRlZ3JlZT10LHRoaXMua25vdHM9ZSx0aGlzLmNvbnRyb2xQb2ludHM9W10sdGhpcy5zdGFydEtub3Q9aXx8MCx0aGlzLmVuZEtub3Q9b3x8dGhpcy5rbm90cy5sZW5ndGgtMTtmb3IodmFyIGE9MDthPG4ubGVuZ3RoOysrYSl7dmFyIHM9blthXTt0aGlzLmNvbnRyb2xQb2ludHNbYV09bmV3IHIuVmVjdG9yNChzLngscy55LHMueixzLncpfX07KGsucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoci5DdXJ2ZS5wcm90b3R5cGUpKS5jb25zdHJ1Y3Rvcj1rLGsucHJvdG90eXBlLmdldFBvaW50PWZ1bmN0aW9uKHQsZSl7dmFyIG49ZXx8bmV3IHIuVmVjdG9yMyxpPXRoaXMua25vdHNbdGhpcy5zdGFydEtub3RdK3QqKHRoaXMua25vdHNbdGhpcy5lbmRLbm90XS10aGlzLmtub3RzW3RoaXMuc3RhcnRLbm90XSksbz1ILmNhbGNCU3BsaW5lUG9pbnQodGhpcy5kZWdyZWUsdGhpcy5rbm90cyx0aGlzLmNvbnRyb2xQb2ludHMsaSk7cmV0dXJuIDEhPW8udyYmby5kaXZpZGVTY2FsYXIoby53KSxuLnNldChvLngsby55LG8ueil9LGsucHJvdG90eXBlLmdldFRhbmdlbnQ9ZnVuY3Rpb24odCxlKXt2YXIgbj1lfHxuZXcgci5WZWN0b3IzLGk9dGhpcy5rbm90c1swXSt0Kih0aGlzLmtub3RzW3RoaXMua25vdHMubGVuZ3RoLTFdLXRoaXMua25vdHNbMF0pLG89SC5jYWxjTlVSQlNEZXJpdmF0aXZlcyh0aGlzLmRlZ3JlZSx0aGlzLmtub3RzLHRoaXMuY29udHJvbFBvaW50cyxpLDEpO3JldHVybiBuLmNvcHkob1sxXSkubm9ybWFsaXplKCksbn07dmFyIFY9ZnVuY3Rpb24oKXt2YXIgdCxlLG47ZnVuY3Rpb24gaSh0KXtyLkxvYWRlci5jYWxsKHRoaXMsdCl9ZnVuY3Rpb24gbyh0LGUpe3RoaXMudGV4dHVyZUxvYWRlcj10LHRoaXMubWFuYWdlcj1lfWZ1bmN0aW9uIGEoKXt9ZnVuY3Rpb24gcygpe31mdW5jdGlvbiBjKCl7fWZ1bmN0aW9uIGwoKXt9ZnVuY3Rpb24gdSh0LGUpe3RoaXMuZHY9bmV3IERhdGFWaWV3KHQpLHRoaXMub2Zmc2V0PTAsdGhpcy5saXR0bGVFbmRpYW49dm9pZCAwPT09ZXx8ZX1mdW5jdGlvbiBoKCl7fWZ1bmN0aW9uIGQodCl7dmFyIGU9dC5tYXRjaCgvRkJYVmVyc2lvbjogKFxcZCspLyk7aWYoZSlyZXR1cm4gcGFyc2VJbnQoZVsxXSk7dGhyb3cgbmV3IEVycm9yKFwiVEhSRUUuRkJYTG9hZGVyOiBDYW5ub3QgZmluZCB0aGUgdmVyc2lvbiBudW1iZXIgZm9yIHRoZSBmaWxlIGdpdmVuLlwiKX1mdW5jdGlvbiBwKHQpe3JldHVybiB0LzQ2MTg2MTU4ZTN9aS5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKHIuTG9hZGVyLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOmksbG9hZDpmdW5jdGlvbih0LGUsbixpKXt2YXIgbz10aGlzLGE9XCJcIj09PW8ucGF0aD9yLkxvYWRlclV0aWxzLmV4dHJhY3RVcmxCYXNlKHQpOm8ucGF0aCxzPW5ldyByLkZpbGVMb2FkZXIodGhpcy5tYW5hZ2VyKTtzLnNldFBhdGgoby5wYXRoKSxzLnNldFJlc3BvbnNlVHlwZShcImFycmF5YnVmZmVyXCIpLHMuc2V0UmVxdWVzdEhlYWRlcihvLnJlcXVlc3RIZWFkZXIpLHMuc2V0V2l0aENyZWRlbnRpYWxzKG8ud2l0aENyZWRlbnRpYWxzKSxzLmxvYWQodCwoZnVuY3Rpb24obil7dHJ5e2Uoby5wYXJzZShuLGEpKX1jYXRjaChlKXtpP2koZSk6Y29uc29sZS5lcnJvcihlKSxvLm1hbmFnZXIuaXRlbUVycm9yKHQpfX0pLG4saSl9LHBhcnNlOmZ1bmN0aW9uKGUsbil7aWYocz1cIktheWRhcmEgRkJYIEJpbmFyeSAgXFwwXCIsKGE9ZSkuYnl0ZUxlbmd0aD49cy5sZW5ndGgmJnM9PT13KGEsMCxzLmxlbmd0aCkpdD0obmV3IGwpLnBhcnNlKGUpO2Vsc2V7dmFyIGk9dyhlKTtpZighZnVuY3Rpb24odCl7dmFyIGU9W1wiS1wiLFwiYVwiLFwieVwiLFwiZFwiLFwiYVwiLFwiclwiLFwiYVwiLFwiXFxcXFwiLFwiRlwiLFwiQlwiLFwiWFwiLFwiXFxcXFwiLFwiQlwiLFwiaVwiLFwiblwiLFwiYVwiLFwiclwiLFwieVwiLFwiXFxcXFwiLFwiXFxcXFwiXSxuPTA7Zm9yKHZhciByPTA7cjxlLmxlbmd0aDsrK3Ipe2lmKChvPXZvaWQgMCxvPXRbKGk9MSktMV0sdD10LnNsaWNlKG4raSksbisrLG8pPT09ZVtyXSlyZXR1cm4hMX12YXIgaSxvO3JldHVybiEwfShpKSl0aHJvdyBuZXcgRXJyb3IoXCJUSFJFRS5GQlhMb2FkZXI6IFVua25vd24gZm9ybWF0LlwiKTtpZihkKGkpPDdlMyl0aHJvdyBuZXcgRXJyb3IoXCJUSFJFRS5GQlhMb2FkZXI6IEZCWCB2ZXJzaW9uIG5vdCBzdXBwb3J0ZWQsIEZpbGVWZXJzaW9uOiBcIitkKGkpKTt0PShuZXcgYykucGFyc2UoaSl9dmFyIGEscztyZXR1cm4gbmV3IG8obmV3IHIuVGV4dHVyZUxvYWRlcih0aGlzLm1hbmFnZXIpLnNldFBhdGgodGhpcy5yZXNvdXJjZVBhdGh8fG4pLnNldENyb3NzT3JpZ2luKHRoaXMuY3Jvc3NPcmlnaW4pLHRoaXMubWFuYWdlcikucGFyc2UodCl9fSksby5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOm8scGFyc2U6ZnVuY3Rpb24oKXtlPXRoaXMucGFyc2VDb25uZWN0aW9ucygpO3ZhciB0PXRoaXMucGFyc2VJbWFnZXMoKSxyPXRoaXMucGFyc2VUZXh0dXJlcyh0KSxpPXRoaXMucGFyc2VNYXRlcmlhbHMociksbz10aGlzLnBhcnNlRGVmb3JtZXJzKCkscz0obmV3IGEpLnBhcnNlKG8pO3JldHVybiB0aGlzLnBhcnNlU2NlbmUobyxzLGkpLG59LHBhcnNlQ29ubmVjdGlvbnM6ZnVuY3Rpb24oKXt2YXIgZT1uZXcgTWFwO1wiQ29ubmVjdGlvbnNcImluIHQmJnQuQ29ubmVjdGlvbnMuY29ubmVjdGlvbnMuZm9yRWFjaCgoZnVuY3Rpb24odCl7dmFyIG49dFswXSxyPXRbMV0saT10WzJdO2UuaGFzKG4pfHxlLnNldChuLHtwYXJlbnRzOltdLGNoaWxkcmVuOltdfSk7dmFyIG89e0lEOnIscmVsYXRpb25zaGlwOml9O2UuZ2V0KG4pLnBhcmVudHMucHVzaChvKSxlLmhhcyhyKXx8ZS5zZXQocix7cGFyZW50czpbXSxjaGlsZHJlbjpbXX0pO3ZhciBhPXtJRDpuLHJlbGF0aW9uc2hpcDppfTtlLmdldChyKS5jaGlsZHJlbi5wdXNoKGEpfSkpO3JldHVybiBlfSxwYXJzZUltYWdlczpmdW5jdGlvbigpe3ZhciBlPXt9LG49e307aWYoXCJWaWRlb1wiaW4gdC5PYmplY3RzKXt2YXIgcj10Lk9iamVjdHMuVmlkZW87Zm9yKHZhciBpIGluIHIpe3ZhciBvPXJbaV07aWYoZVtsPXBhcnNlSW50KGkpXT1vLlJlbGF0aXZlRmlsZW5hbWV8fG8uRmlsZW5hbWUsXCJDb250ZW50XCJpbiBvKXt2YXIgYT1vLkNvbnRlbnQgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlciYmby5Db250ZW50LmJ5dGVMZW5ndGg+MCxzPVwic3RyaW5nXCI9PXR5cGVvZiBvLkNvbnRlbnQmJlwiXCIhPT1vLkNvbnRlbnQ7aWYoYXx8cyl7dmFyIGM9dGhpcy5wYXJzZUltYWdlKHJbaV0pO25bby5SZWxhdGl2ZUZpbGVuYW1lfHxvLkZpbGVuYW1lXT1jfX19fWZvcih2YXIgbCBpbiBlKXt2YXIgdT1lW2xdO3ZvaWQgMCE9PW5bdV0/ZVtsXT1uW3VdOmVbbF09ZVtsXS5zcGxpdChcIlxcXFxcIikucG9wKCl9cmV0dXJuIGV9LHBhcnNlSW1hZ2U6ZnVuY3Rpb24odCl7dmFyIGUsbj10LkNvbnRlbnQscj10LlJlbGF0aXZlRmlsZW5hbWV8fHQuRmlsZW5hbWUsaT1yLnNsaWNlKHIubGFzdEluZGV4T2YoXCIuXCIpKzEpLnRvTG93ZXJDYXNlKCk7c3dpdGNoKGkpe2Nhc2VcImJtcFwiOmU9XCJpbWFnZS9ibXBcIjticmVhaztjYXNlXCJqcGdcIjpjYXNlXCJqcGVnXCI6ZT1cImltYWdlL2pwZWdcIjticmVhaztjYXNlXCJwbmdcIjplPVwiaW1hZ2UvcG5nXCI7YnJlYWs7Y2FzZVwidGlmXCI6ZT1cImltYWdlL3RpZmZcIjticmVhaztjYXNlXCJ0Z2FcIjpudWxsPT09dGhpcy5tYW5hZ2VyLmdldEhhbmRsZXIoXCIudGdhXCIpJiZjb25zb2xlLndhcm4oXCJGQlhMb2FkZXI6IFRHQSBsb2FkZXIgbm90IGZvdW5kLCBza2lwcGluZyBcIixyKSxlPVwiaW1hZ2UvdGdhXCI7YnJlYWs7ZGVmYXVsdDpyZXR1cm4gdm9pZCBjb25zb2xlLndhcm4oJ0ZCWExvYWRlcjogSW1hZ2UgdHlwZSBcIicraSsnXCIgaXMgbm90IHN1cHBvcnRlZC4nKX1pZihcInN0cmluZ1wiPT10eXBlb2YgbilyZXR1cm5cImRhdGE6XCIrZStcIjtiYXNlNjQsXCIrbjt2YXIgbz1uZXcgVWludDhBcnJheShuKTtyZXR1cm4gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwobmV3IEJsb2IoW29dLHt0eXBlOmV9KSl9LHBhcnNlVGV4dHVyZXM6ZnVuY3Rpb24oZSl7dmFyIG49bmV3IE1hcDtpZihcIlRleHR1cmVcImluIHQuT2JqZWN0cyl7dmFyIHI9dC5PYmplY3RzLlRleHR1cmU7Zm9yKHZhciBpIGluIHIpe3ZhciBvPXRoaXMucGFyc2VUZXh0dXJlKHJbaV0sZSk7bi5zZXQocGFyc2VJbnQoaSksbyl9fXJldHVybiBufSxwYXJzZVRleHR1cmU6ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLmxvYWRUZXh0dXJlKHQsZSk7bi5JRD10LmlkLG4ubmFtZT10LmF0dHJOYW1lO3ZhciBpPXQuV3JhcE1vZGVVLG89dC5XcmFwTW9kZVYsYT12b2lkIDAhPT1pP2kudmFsdWU6MCxzPXZvaWQgMCE9PW8/by52YWx1ZTowO2lmKG4ud3JhcFM9MD09PWE/ci5SZXBlYXRXcmFwcGluZzpyLkNsYW1wVG9FZGdlV3JhcHBpbmcsbi53cmFwVD0wPT09cz9yLlJlcGVhdFdyYXBwaW5nOnIuQ2xhbXBUb0VkZ2VXcmFwcGluZyxcIlNjYWxpbmdcImluIHQpe3ZhciBjPXQuU2NhbGluZy52YWx1ZTtuLnJlcGVhdC54PWNbMF0sbi5yZXBlYXQueT1jWzFdfXJldHVybiBufSxsb2FkVGV4dHVyZTpmdW5jdGlvbih0LG4pe3ZhciBpLG8sYT10aGlzLnRleHR1cmVMb2FkZXIucGF0aCxzPWUuZ2V0KHQuaWQpLmNoaWxkcmVuO3ZvaWQgMCE9PXMmJnMubGVuZ3RoPjAmJnZvaWQgMCE9PW5bc1swXS5JRF0mJigwIT09KGk9bltzWzBdLklEXSkuaW5kZXhPZihcImJsb2I6XCIpJiYwIT09aS5pbmRleE9mKFwiZGF0YTpcIil8fHRoaXMudGV4dHVyZUxvYWRlci5zZXRQYXRoKHZvaWQgMCkpO3ZhciBjPXQuRmlsZU5hbWUuc2xpY2UoLTMpLnRvTG93ZXJDYXNlKCk7aWYoXCJ0Z2FcIj09PWMpe3ZhciBsPXRoaXMubWFuYWdlci5nZXRIYW5kbGVyKFwiLnRnYVwiKTtudWxsPT09bD8oY29uc29sZS53YXJuKFwiRkJYTG9hZGVyOiBUR0EgbG9hZGVyIG5vdCBmb3VuZCwgY3JlYXRpbmcgcGxhY2Vob2xkZXIgdGV4dHVyZSBmb3JcIix0LlJlbGF0aXZlRmlsZW5hbWUpLG89bmV3IHIuVGV4dHVyZSk6bz1sLmxvYWQoaSl9ZWxzZVwicHNkXCI9PT1jPyhjb25zb2xlLndhcm4oXCJGQlhMb2FkZXI6IFBTRCB0ZXh0dXJlcyBhcmUgbm90IHN1cHBvcnRlZCwgY3JlYXRpbmcgcGxhY2Vob2xkZXIgdGV4dHVyZSBmb3JcIix0LlJlbGF0aXZlRmlsZW5hbWUpLG89bmV3IHIuVGV4dHVyZSk6bz10aGlzLnRleHR1cmVMb2FkZXIubG9hZChpKTtyZXR1cm4gdGhpcy50ZXh0dXJlTG9hZGVyLnNldFBhdGgoYSksb30scGFyc2VNYXRlcmlhbHM6ZnVuY3Rpb24oZSl7dmFyIG49bmV3IE1hcDtpZihcIk1hdGVyaWFsXCJpbiB0Lk9iamVjdHMpe3ZhciByPXQuT2JqZWN0cy5NYXRlcmlhbDtmb3IodmFyIGkgaW4gcil7dmFyIG89dGhpcy5wYXJzZU1hdGVyaWFsKHJbaV0sZSk7bnVsbCE9PW8mJm4uc2V0KHBhcnNlSW50KGkpLG8pfX1yZXR1cm4gbn0scGFyc2VNYXRlcmlhbDpmdW5jdGlvbih0LG4pe3ZhciBpPXQuaWQsbz10LmF0dHJOYW1lLGE9dC5TaGFkaW5nTW9kZWw7aWYoXCJvYmplY3RcIj09dHlwZW9mIGEmJihhPWEudmFsdWUpLCFlLmhhcyhpKSlyZXR1cm4gbnVsbDt2YXIgcyxjPXRoaXMucGFyc2VQYXJhbWV0ZXJzKHQsbixpKTtzd2l0Y2goYS50b0xvd2VyQ2FzZSgpKXtjYXNlXCJwaG9uZ1wiOnM9bmV3IHIuTWVzaFBob25nTWF0ZXJpYWw7YnJlYWs7Y2FzZVwibGFtYmVydFwiOnM9bmV3IHIuTWVzaExhbWJlcnRNYXRlcmlhbDticmVhaztkZWZhdWx0OmNvbnNvbGUud2FybignVEhSRUUuRkJYTG9hZGVyOiB1bmtub3duIG1hdGVyaWFsIHR5cGUgXCIlc1wiLiBEZWZhdWx0aW5nIHRvIE1lc2hQaG9uZ01hdGVyaWFsLicsYSkscz1uZXcgci5NZXNoUGhvbmdNYXRlcmlhbH1yZXR1cm4gcy5zZXRWYWx1ZXMoYykscy5uYW1lPW8sc30scGFyc2VQYXJhbWV0ZXJzOmZ1bmN0aW9uKHQsbixpKXt2YXIgbz17fTt0LkJ1bXBGYWN0b3ImJihvLmJ1bXBTY2FsZT10LkJ1bXBGYWN0b3IudmFsdWUpLHQuRGlmZnVzZT9vLmNvbG9yPShuZXcgci5Db2xvcikuZnJvbUFycmF5KHQuRGlmZnVzZS52YWx1ZSk6IXQuRGlmZnVzZUNvbG9yfHxcIkNvbG9yXCIhPT10LkRpZmZ1c2VDb2xvci50eXBlJiZcIkNvbG9yUkdCXCIhPT10LkRpZmZ1c2VDb2xvci50eXBlfHwoby5jb2xvcj0obmV3IHIuQ29sb3IpLmZyb21BcnJheSh0LkRpZmZ1c2VDb2xvci52YWx1ZSkpLHQuRGlzcGxhY2VtZW50RmFjdG9yJiYoby5kaXNwbGFjZW1lbnRTY2FsZT10LkRpc3BsYWNlbWVudEZhY3Rvci52YWx1ZSksdC5FbWlzc2l2ZT9vLmVtaXNzaXZlPShuZXcgci5Db2xvcikuZnJvbUFycmF5KHQuRW1pc3NpdmUudmFsdWUpOiF0LkVtaXNzaXZlQ29sb3J8fFwiQ29sb3JcIiE9PXQuRW1pc3NpdmVDb2xvci50eXBlJiZcIkNvbG9yUkdCXCIhPT10LkVtaXNzaXZlQ29sb3IudHlwZXx8KG8uZW1pc3NpdmU9KG5ldyByLkNvbG9yKS5mcm9tQXJyYXkodC5FbWlzc2l2ZUNvbG9yLnZhbHVlKSksdC5FbWlzc2l2ZUZhY3RvciYmKG8uZW1pc3NpdmVJbnRlbnNpdHk9cGFyc2VGbG9hdCh0LkVtaXNzaXZlRmFjdG9yLnZhbHVlKSksdC5PcGFjaXR5JiYoby5vcGFjaXR5PXBhcnNlRmxvYXQodC5PcGFjaXR5LnZhbHVlKSksby5vcGFjaXR5PDEmJihvLnRyYW5zcGFyZW50PSEwKSx0LlJlZmxlY3Rpb25GYWN0b3ImJihvLnJlZmxlY3Rpdml0eT10LlJlZmxlY3Rpb25GYWN0b3IudmFsdWUpLHQuU2hpbmluZXNzJiYoby5zaGluaW5lc3M9dC5TaGluaW5lc3MudmFsdWUpLHQuU3BlY3VsYXI/by5zcGVjdWxhcj0obmV3IHIuQ29sb3IpLmZyb21BcnJheSh0LlNwZWN1bGFyLnZhbHVlKTp0LlNwZWN1bGFyQ29sb3ImJlwiQ29sb3JcIj09PXQuU3BlY3VsYXJDb2xvci50eXBlJiYoby5zcGVjdWxhcj0obmV3IHIuQ29sb3IpLmZyb21BcnJheSh0LlNwZWN1bGFyQ29sb3IudmFsdWUpKTt2YXIgYT10aGlzO3JldHVybiBlLmdldChpKS5jaGlsZHJlbi5mb3JFYWNoKChmdW5jdGlvbih0KXt2YXIgZT10LnJlbGF0aW9uc2hpcDtzd2l0Y2goZSl7Y2FzZVwiQnVtcFwiOm8uYnVtcE1hcD1hLmdldFRleHR1cmUobix0LklEKTticmVhaztjYXNlXCJNYXlhfFRFWF9hb19tYXBcIjpvLmFvTWFwPWEuZ2V0VGV4dHVyZShuLHQuSUQpO2JyZWFrO2Nhc2VcIkRpZmZ1c2VDb2xvclwiOmNhc2VcIk1heWF8VEVYX2NvbG9yX21hcFwiOm8ubWFwPWEuZ2V0VGV4dHVyZShuLHQuSUQpLG8ubWFwLmVuY29kaW5nPXIuc1JHQkVuY29kaW5nO2JyZWFrO2Nhc2VcIkRpc3BsYWNlbWVudENvbG9yXCI6by5kaXNwbGFjZW1lbnRNYXA9YS5nZXRUZXh0dXJlKG4sdC5JRCk7YnJlYWs7Y2FzZVwiRW1pc3NpdmVDb2xvclwiOm8uZW1pc3NpdmVNYXA9YS5nZXRUZXh0dXJlKG4sdC5JRCksby5lbWlzc2l2ZU1hcC5lbmNvZGluZz1yLnNSR0JFbmNvZGluZzticmVhaztjYXNlXCJOb3JtYWxNYXBcIjpjYXNlXCJNYXlhfFRFWF9ub3JtYWxfbWFwXCI6by5ub3JtYWxNYXA9YS5nZXRUZXh0dXJlKG4sdC5JRCk7YnJlYWs7Y2FzZVwiUmVmbGVjdGlvbkNvbG9yXCI6by5lbnZNYXA9YS5nZXRUZXh0dXJlKG4sdC5JRCksby5lbnZNYXAubWFwcGluZz1yLkVxdWlyZWN0YW5ndWxhclJlZmxlY3Rpb25NYXBwaW5nLG8uZW52TWFwLmVuY29kaW5nPXIuc1JHQkVuY29kaW5nO2JyZWFrO2Nhc2VcIlNwZWN1bGFyQ29sb3JcIjpvLnNwZWN1bGFyTWFwPWEuZ2V0VGV4dHVyZShuLHQuSUQpLG8uc3BlY3VsYXJNYXAuZW5jb2Rpbmc9ci5zUkdCRW5jb2Rpbmc7YnJlYWs7Y2FzZVwiVHJhbnNwYXJlbnRDb2xvclwiOmNhc2VcIlRyYW5zcGFyZW5jeUZhY3RvclwiOm8uYWxwaGFNYXA9YS5nZXRUZXh0dXJlKG4sdC5JRCksby50cmFuc3BhcmVudD0hMDticmVhaztjYXNlXCJBbWJpZW50Q29sb3JcIjpjYXNlXCJTaGluaW5lc3NFeHBvbmVudFwiOmNhc2VcIlNwZWN1bGFyRmFjdG9yXCI6Y2FzZVwiVmVjdG9yRGlzcGxhY2VtZW50Q29sb3JcIjpkZWZhdWx0OmNvbnNvbGUud2FybihcIlRIUkVFLkZCWExvYWRlcjogJXMgbWFwIGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhyZWUuanMsIHNraXBwaW5nIHRleHR1cmUuXCIsZSl9fSkpLG99LGdldFRleHR1cmU6ZnVuY3Rpb24obixyKXtyZXR1cm5cIkxheWVyZWRUZXh0dXJlXCJpbiB0Lk9iamVjdHMmJnIgaW4gdC5PYmplY3RzLkxheWVyZWRUZXh0dXJlJiYoY29uc29sZS53YXJuKFwiVEhSRUUuRkJYTG9hZGVyOiBsYXllcmVkIHRleHR1cmVzIGFyZSBub3Qgc3VwcG9ydGVkIGluIHRocmVlLmpzLiBEaXNjYXJkaW5nIGFsbCBidXQgZmlyc3QgbGF5ZXIuXCIpLHI9ZS5nZXQocikuY2hpbGRyZW5bMF0uSUQpLG4uZ2V0KHIpfSxwYXJzZURlZm9ybWVyczpmdW5jdGlvbigpe3ZhciBuPXt9LHI9e307aWYoXCJEZWZvcm1lclwiaW4gdC5PYmplY3RzKXt2YXIgaT10Lk9iamVjdHMuRGVmb3JtZXI7Zm9yKHZhciBvIGluIGkpe3ZhciBhPWlbb10scz1lLmdldChwYXJzZUludChvKSk7aWYoXCJTa2luXCI9PT1hLmF0dHJUeXBlKXt2YXIgYz10aGlzLnBhcnNlU2tlbGV0b24ocyxpKTtjLklEPW8scy5wYXJlbnRzLmxlbmd0aD4xJiZjb25zb2xlLndhcm4oXCJUSFJFRS5GQlhMb2FkZXI6IHNrZWxldG9uIGF0dGFjaGVkIHRvIG1vcmUgdGhhbiBvbmUgZ2VvbWV0cnkgaXMgbm90IHN1cHBvcnRlZC5cIiksYy5nZW9tZXRyeUlEPXMucGFyZW50c1swXS5JRCxuW29dPWN9ZWxzZSBpZihcIkJsZW5kU2hhcGVcIj09PWEuYXR0clR5cGUpe3ZhciBsPXtpZDpvfTtsLnJhd1RhcmdldHM9dGhpcy5wYXJzZU1vcnBoVGFyZ2V0cyhzLGkpLGwuaWQ9byxzLnBhcmVudHMubGVuZ3RoPjEmJmNvbnNvbGUud2FybihcIlRIUkVFLkZCWExvYWRlcjogbW9ycGggdGFyZ2V0IGF0dGFjaGVkIHRvIG1vcmUgdGhhbiBvbmUgZ2VvbWV0cnkgaXMgbm90IHN1cHBvcnRlZC5cIikscltvXT1sfX19cmV0dXJue3NrZWxldG9uczpuLG1vcnBoVGFyZ2V0czpyfX0scGFyc2VTa2VsZXRvbjpmdW5jdGlvbih0LGUpe3ZhciBuPVtdO3JldHVybiB0LmNoaWxkcmVuLmZvckVhY2goKGZ1bmN0aW9uKHQpe3ZhciBpPWVbdC5JRF07aWYoXCJDbHVzdGVyXCI9PT1pLmF0dHJUeXBlKXt2YXIgbz17SUQ6dC5JRCxpbmRpY2VzOltdLHdlaWdodHM6W10sdHJhbnNmb3JtTGluazoobmV3IHIuTWF0cml4NCkuZnJvbUFycmF5KGkuVHJhbnNmb3JtTGluay5hKX07XCJJbmRleGVzXCJpbiBpJiYoby5pbmRpY2VzPWkuSW5kZXhlcy5hLG8ud2VpZ2h0cz1pLldlaWdodHMuYSksbi5wdXNoKG8pfX0pKSx7cmF3Qm9uZXM6bixib25lczpbXX19LHBhcnNlTW9ycGhUYXJnZXRzOmZ1bmN0aW9uKHQsbil7Zm9yKHZhciByPVtdLGk9MDtpPHQuY2hpbGRyZW4ubGVuZ3RoO2krKyl7dmFyIG89dC5jaGlsZHJlbltpXSxhPW5bby5JRF0scz17bmFtZTphLmF0dHJOYW1lLGluaXRpYWxXZWlnaHQ6YS5EZWZvcm1QZXJjZW50LGlkOmEuaWQsZnVsbFdlaWdodHM6YS5GdWxsV2VpZ2h0cy5hfTtpZihcIkJsZW5kU2hhcGVDaGFubmVsXCIhPT1hLmF0dHJUeXBlKXJldHVybjtzLmdlb0lEPWUuZ2V0KHBhcnNlSW50KG8uSUQpKS5jaGlsZHJlbi5maWx0ZXIoKGZ1bmN0aW9uKHQpe3JldHVybiB2b2lkIDA9PT10LnJlbGF0aW9uc2hpcH0pKVswXS5JRCxyLnB1c2gocyl9cmV0dXJuIHJ9LHBhcnNlU2NlbmU6ZnVuY3Rpb24oaSxvLGEpe249bmV3IHIuR3JvdXA7dmFyIGM9dGhpcy5wYXJzZU1vZGVscyhpLnNrZWxldG9ucyxvLGEpLGw9dC5PYmplY3RzLk1vZGVsLHU9dGhpcztjLmZvckVhY2goKGZ1bmN0aW9uKHQpe3ZhciByPWxbdC5JRF07dS5zZXRMb29rQXRQcm9wZXJ0aWVzKHQsciksZS5nZXQodC5JRCkucGFyZW50cy5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgbj1jLmdldChlLklEKTt2b2lkIDAhPT1uJiZuLmFkZCh0KX0pKSxudWxsPT09dC5wYXJlbnQmJm4uYWRkKHQpfSkpLHRoaXMuYmluZFNrZWxldG9uKGkuc2tlbGV0b25zLG8sYyksdGhpcy5jcmVhdGVBbWJpZW50TGlnaHQoKSx0aGlzLnNldHVwTW9ycGhNYXRlcmlhbHMoKSxuLnRyYXZlcnNlKChmdW5jdGlvbih0KXtpZih0LnVzZXJEYXRhLnRyYW5zZm9ybURhdGEpe3QucGFyZW50JiYodC51c2VyRGF0YS50cmFuc2Zvcm1EYXRhLnBhcmVudE1hdHJpeFdvcmxkPXQucGFyZW50Lm1hdHJpeCk7dmFyIGU9eSh0LnVzZXJEYXRhLnRyYW5zZm9ybURhdGEpO3QuYXBwbHlNYXRyaXg0KGUpfX0pKTt2YXIgaD0obmV3IHMpLnBhcnNlKCk7MT09PW4uY2hpbGRyZW4ubGVuZ3RoJiZuLmNoaWxkcmVuWzBdLmlzR3JvdXAmJihuLmNoaWxkcmVuWzBdLmFuaW1hdGlvbnM9aCxuPW4uY2hpbGRyZW5bMF0pLG4uYW5pbWF0aW9ucz1ofSxwYXJzZU1vZGVsczpmdW5jdGlvbihuLGksbyl7dmFyIGE9bmV3IE1hcCxzPXQuT2JqZWN0cy5Nb2RlbDtmb3IodmFyIGMgaW4gcyl7dmFyIGw9cGFyc2VJbnQoYyksdT1zW2NdLGg9ZS5nZXQobCksZD10aGlzLmJ1aWxkU2tlbGV0b24oaCxuLGwsdS5hdHRyTmFtZSk7aWYoIWQpe3N3aXRjaCh1LmF0dHJUeXBlKXtjYXNlXCJDYW1lcmFcIjpkPXRoaXMuY3JlYXRlQ2FtZXJhKGgpO2JyZWFrO2Nhc2VcIkxpZ2h0XCI6ZD10aGlzLmNyZWF0ZUxpZ2h0KGgpO2JyZWFrO2Nhc2VcIk1lc2hcIjpkPXRoaXMuY3JlYXRlTWVzaChoLGksbyk7YnJlYWs7Y2FzZVwiTnVyYnNDdXJ2ZVwiOmQ9dGhpcy5jcmVhdGVDdXJ2ZShoLGkpO2JyZWFrO2Nhc2VcIkxpbWJOb2RlXCI6Y2FzZVwiUm9vdFwiOmQ9bmV3IHIuQm9uZTticmVhaztjYXNlXCJOdWxsXCI6ZGVmYXVsdDpkPW5ldyByLkdyb3VwfWQubmFtZT11LmF0dHJOYW1lP3IuUHJvcGVydHlCaW5kaW5nLnNhbml0aXplTm9kZU5hbWUodS5hdHRyTmFtZSk6XCJcIixkLklEPWx9dGhpcy5nZXRUcmFuc2Zvcm1EYXRhKGQsdSksYS5zZXQobCxkKX1yZXR1cm4gYX0sYnVpbGRTa2VsZXRvbjpmdW5jdGlvbih0LGUsbixpKXt2YXIgbz1udWxsO3JldHVybiB0LnBhcmVudHMuZm9yRWFjaCgoZnVuY3Rpb24odCl7Zm9yKHZhciBhIGluIGUpe3ZhciBzPWVbYV07cy5yYXdCb25lcy5mb3JFYWNoKChmdW5jdGlvbihlLGEpe2lmKGUuSUQ9PT10LklEKXt2YXIgYz1vOyhvPW5ldyByLkJvbmUpLm1hdHJpeFdvcmxkLmNvcHkoZS50cmFuc2Zvcm1MaW5rKSxvLm5hbWU9aT9yLlByb3BlcnR5QmluZGluZy5zYW5pdGl6ZU5vZGVOYW1lKGkpOlwiXCIsby5JRD1uLHMuYm9uZXNbYV09byxudWxsIT09YyYmby5hZGQoYyl9fSkpfX0pKSxvfSxjcmVhdGVDYW1lcmE6ZnVuY3Rpb24oZSl7dmFyIG4saTtpZihlLmNoaWxkcmVuLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciBuPXQuT2JqZWN0cy5Ob2RlQXR0cmlidXRlW2UuSURdO3ZvaWQgMCE9PW4mJihpPW4pfSkpLHZvaWQgMD09PWkpbj1uZXcgci5PYmplY3QzRDtlbHNle3ZhciBvPTA7dm9pZCAwIT09aS5DYW1lcmFQcm9qZWN0aW9uVHlwZSYmMT09PWkuQ2FtZXJhUHJvamVjdGlvblR5cGUudmFsdWUmJihvPTEpO3ZhciBhPTE7dm9pZCAwIT09aS5OZWFyUGxhbmUmJihhPWkuTmVhclBsYW5lLnZhbHVlLzFlMyk7dmFyIHM9MWUzO3ZvaWQgMCE9PWkuRmFyUGxhbmUmJihzPWkuRmFyUGxhbmUudmFsdWUvMWUzKTt2YXIgYz13aW5kb3cuaW5uZXJXaWR0aCxsPXdpbmRvdy5pbm5lckhlaWdodDt2b2lkIDAhPT1pLkFzcGVjdFdpZHRoJiZ2b2lkIDAhPT1pLkFzcGVjdEhlaWdodCYmKGM9aS5Bc3BlY3RXaWR0aC52YWx1ZSxsPWkuQXNwZWN0SGVpZ2h0LnZhbHVlKTt2YXIgdT1jL2wsaD00NTt2b2lkIDAhPT1pLkZpZWxkT2ZWaWV3JiYoaD1pLkZpZWxkT2ZWaWV3LnZhbHVlKTt2YXIgZD1pLkZvY2FsTGVuZ3RoP2kuRm9jYWxMZW5ndGgudmFsdWU6bnVsbDtzd2l0Y2gobyl7Y2FzZSAwOm49bmV3IHIuUGVyc3BlY3RpdmVDYW1lcmEoaCx1LGEscyksbnVsbCE9PWQmJm4uc2V0Rm9jYWxMZW5ndGgoZCk7YnJlYWs7Y2FzZSAxOm49bmV3IHIuT3J0aG9ncmFwaGljQ2FtZXJhKC1jLzIsYy8yLGwvMiwtbC8yLGEscyk7YnJlYWs7ZGVmYXVsdDpjb25zb2xlLndhcm4oXCJUSFJFRS5GQlhMb2FkZXI6IFVua25vd24gY2FtZXJhIHR5cGUgXCIrbytcIi5cIiksbj1uZXcgci5PYmplY3QzRH19cmV0dXJuIG59LGNyZWF0ZUxpZ2h0OmZ1bmN0aW9uKGUpe3ZhciBuLGk7aWYoZS5jaGlsZHJlbi5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgbj10Lk9iamVjdHMuTm9kZUF0dHJpYnV0ZVtlLklEXTt2b2lkIDAhPT1uJiYoaT1uKX0pKSx2b2lkIDA9PT1pKW49bmV3IHIuT2JqZWN0M0Q7ZWxzZXt2YXIgbztvPXZvaWQgMD09PWkuTGlnaHRUeXBlPzA6aS5MaWdodFR5cGUudmFsdWU7dmFyIGE9MTY3NzcyMTU7dm9pZCAwIT09aS5Db2xvciYmKGE9KG5ldyByLkNvbG9yKS5mcm9tQXJyYXkoaS5Db2xvci52YWx1ZSkpO3ZhciBzPXZvaWQgMD09PWkuSW50ZW5zaXR5PzE6aS5JbnRlbnNpdHkudmFsdWUvMTAwO3ZvaWQgMCE9PWkuQ2FzdExpZ2h0T25PYmplY3QmJjA9PT1pLkNhc3RMaWdodE9uT2JqZWN0LnZhbHVlJiYocz0wKTt2YXIgYz0wO3ZvaWQgMCE9PWkuRmFyQXR0ZW51YXRpb25FbmQmJihjPXZvaWQgMCE9PWkuRW5hYmxlRmFyQXR0ZW51YXRpb24mJjA9PT1pLkVuYWJsZUZhckF0dGVudWF0aW9uLnZhbHVlPzA6aS5GYXJBdHRlbnVhdGlvbkVuZC52YWx1ZSk7c3dpdGNoKG8pe2Nhc2UgMDpuPW5ldyByLlBvaW50TGlnaHQoYSxzLGMsMSk7YnJlYWs7Y2FzZSAxOm49bmV3IHIuRGlyZWN0aW9uYWxMaWdodChhLHMpO2JyZWFrO2Nhc2UgMjp2YXIgbD1NYXRoLlBJLzM7dm9pZCAwIT09aS5Jbm5lckFuZ2xlJiYobD1yLk1hdGhVdGlscy5kZWdUb1JhZChpLklubmVyQW5nbGUudmFsdWUpKTt2YXIgdT0wO3ZvaWQgMCE9PWkuT3V0ZXJBbmdsZSYmKHU9ci5NYXRoVXRpbHMuZGVnVG9SYWQoaS5PdXRlckFuZ2xlLnZhbHVlKSx1PU1hdGgubWF4KHUsMSkpLG49bmV3IHIuU3BvdExpZ2h0KGEscyxjLGwsdSwxKTticmVhaztkZWZhdWx0OmNvbnNvbGUud2FybihcIlRIUkVFLkZCWExvYWRlcjogVW5rbm93biBsaWdodCB0eXBlIFwiK2kuTGlnaHRUeXBlLnZhbHVlK1wiLCBkZWZhdWx0aW5nIHRvIGEgUG9pbnRMaWdodC5cIiksbj1uZXcgci5Qb2ludExpZ2h0KGEscyl9dm9pZCAwIT09aS5DYXN0U2hhZG93cyYmMT09PWkuQ2FzdFNoYWRvd3MudmFsdWUmJihuLmNhc3RTaGFkb3c9ITApfXJldHVybiBufSxjcmVhdGVNZXNoOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxvPW51bGwsYT1udWxsLHM9W107cmV0dXJuIHQuY2hpbGRyZW4uZm9yRWFjaCgoZnVuY3Rpb24odCl7ZS5oYXModC5JRCkmJihvPWUuZ2V0KHQuSUQpKSxuLmhhcyh0LklEKSYmcy5wdXNoKG4uZ2V0KHQuSUQpKX0pKSxzLmxlbmd0aD4xP2E9czpzLmxlbmd0aD4wP2E9c1swXTooYT1uZXcgci5NZXNoUGhvbmdNYXRlcmlhbCh7Y29sb3I6MTM0MjE3NzJ9KSxzLnB1c2goYSkpLFwiY29sb3JcImluIG8uYXR0cmlidXRlcyYmcy5mb3JFYWNoKChmdW5jdGlvbih0KXt0LnZlcnRleENvbG9ycz0hMH0pKSxvLkZCWF9EZWZvcm1lcj8ocy5mb3JFYWNoKChmdW5jdGlvbih0KXt0LnNraW5uaW5nPSEwfSkpLChpPW5ldyByLlNraW5uZWRNZXNoKG8sYSkpLm5vcm1hbGl6ZVNraW5XZWlnaHRzKCkpOmk9bmV3IHIuTWVzaChvLGEpLGl9LGNyZWF0ZUN1cnZlOmZ1bmN0aW9uKHQsZSl7dmFyIG49dC5jaGlsZHJlbi5yZWR1Y2UoKGZ1bmN0aW9uKHQsbil7cmV0dXJuIGUuaGFzKG4uSUQpJiYodD1lLmdldChuLklEKSksdH0pLG51bGwpLGk9bmV3IHIuTGluZUJhc2ljTWF0ZXJpYWwoe2NvbG9yOjMzNDI1OTEsbGluZXdpZHRoOjF9KTtyZXR1cm4gbmV3IHIuTGluZShuLGkpfSxnZXRUcmFuc2Zvcm1EYXRhOmZ1bmN0aW9uKHQsZSl7dmFyIG49e307XCJJbmhlcml0VHlwZVwiaW4gZSYmKG4uaW5oZXJpdFR5cGU9cGFyc2VJbnQoZS5Jbmhlcml0VHlwZS52YWx1ZSkpLG4uZXVsZXJPcmRlcj1cIlJvdGF0aW9uT3JkZXJcImluIGU/eChlLlJvdGF0aW9uT3JkZXIudmFsdWUpOlwiWllYXCIsXCJMY2xfVHJhbnNsYXRpb25cImluIGUmJihuLnRyYW5zbGF0aW9uPWUuTGNsX1RyYW5zbGF0aW9uLnZhbHVlKSxcIlByZVJvdGF0aW9uXCJpbiBlJiYobi5wcmVSb3RhdGlvbj1lLlByZVJvdGF0aW9uLnZhbHVlKSxcIkxjbF9Sb3RhdGlvblwiaW4gZSYmKG4ucm90YXRpb249ZS5MY2xfUm90YXRpb24udmFsdWUpLFwiUG9zdFJvdGF0aW9uXCJpbiBlJiYobi5wb3N0Um90YXRpb249ZS5Qb3N0Um90YXRpb24udmFsdWUpLFwiTGNsX1NjYWxpbmdcImluIGUmJihuLnNjYWxlPWUuTGNsX1NjYWxpbmcudmFsdWUpLFwiU2NhbGluZ09mZnNldFwiaW4gZSYmKG4uc2NhbGluZ09mZnNldD1lLlNjYWxpbmdPZmZzZXQudmFsdWUpLFwiU2NhbGluZ1Bpdm90XCJpbiBlJiYobi5zY2FsaW5nUGl2b3Q9ZS5TY2FsaW5nUGl2b3QudmFsdWUpLFwiUm90YXRpb25PZmZzZXRcImluIGUmJihuLnJvdGF0aW9uT2Zmc2V0PWUuUm90YXRpb25PZmZzZXQudmFsdWUpLFwiUm90YXRpb25QaXZvdFwiaW4gZSYmKG4ucm90YXRpb25QaXZvdD1lLlJvdGF0aW9uUGl2b3QudmFsdWUpLHQudXNlckRhdGEudHJhbnNmb3JtRGF0YT1ufSxzZXRMb29rQXRQcm9wZXJ0aWVzOmZ1bmN0aW9uKGksbyl7XCJMb29rQXRQcm9wZXJ0eVwiaW4gbyYmZS5nZXQoaS5JRCkuY2hpbGRyZW4uZm9yRWFjaCgoZnVuY3Rpb24oZSl7aWYoXCJMb29rQXRQcm9wZXJ0eVwiPT09ZS5yZWxhdGlvbnNoaXApe3ZhciBvPXQuT2JqZWN0cy5Nb2RlbFtlLklEXTtpZihcIkxjbF9UcmFuc2xhdGlvblwiaW4gbyl7dmFyIGE9by5MY2xfVHJhbnNsYXRpb24udmFsdWU7dm9pZCAwIT09aS50YXJnZXQ/KGkudGFyZ2V0LnBvc2l0aW9uLmZyb21BcnJheShhKSxuLmFkZChpLnRhcmdldCkpOmkubG9va0F0KChuZXcgci5WZWN0b3IzKS5mcm9tQXJyYXkoYSkpfX19KSl9LGJpbmRTa2VsZXRvbjpmdW5jdGlvbih0LG4saSl7dmFyIG89dGhpcy5wYXJzZVBvc2VOb2RlcygpO2Zvcih2YXIgYSBpbiB0KXt2YXIgcz10W2FdO2UuZ2V0KHBhcnNlSW50KHMuSUQpKS5wYXJlbnRzLmZvckVhY2goKGZ1bmN0aW9uKHQpe2lmKG4uaGFzKHQuSUQpKXt2YXIgYT10LklEO2UuZ2V0KGEpLnBhcmVudHMuZm9yRWFjaCgoZnVuY3Rpb24odCl7aS5oYXModC5JRCkmJmkuZ2V0KHQuSUQpLmJpbmQobmV3IHIuU2tlbGV0b24ocy5ib25lcyksb1t0LklEXSl9KSl9fSkpfX0scGFyc2VQb3NlTm9kZXM6ZnVuY3Rpb24oKXt2YXIgZT17fTtpZihcIlBvc2VcImluIHQuT2JqZWN0cyl7dmFyIG49dC5PYmplY3RzLlBvc2U7Zm9yKHZhciBpIGluIG4paWYoXCJCaW5kUG9zZVwiPT09bltpXS5hdHRyVHlwZSl7dmFyIG89bltpXS5Qb3NlTm9kZTtBcnJheS5pc0FycmF5KG8pP28uZm9yRWFjaCgoZnVuY3Rpb24odCl7ZVt0Lk5vZGVdPShuZXcgci5NYXRyaXg0KS5mcm9tQXJyYXkodC5NYXRyaXguYSl9KSk6ZVtvLk5vZGVdPShuZXcgci5NYXRyaXg0KS5mcm9tQXJyYXkoby5NYXRyaXguYSl9fXJldHVybiBlfSxjcmVhdGVBbWJpZW50TGlnaHQ6ZnVuY3Rpb24oKXtpZihcIkdsb2JhbFNldHRpbmdzXCJpbiB0JiZcIkFtYmllbnRDb2xvclwiaW4gdC5HbG9iYWxTZXR0aW5ncyl7dmFyIGU9dC5HbG9iYWxTZXR0aW5ncy5BbWJpZW50Q29sb3IudmFsdWUsaT1lWzBdLG89ZVsxXSxhPWVbMl07aWYoMCE9PWl8fDAhPT1vfHwwIT09YSl7dmFyIHM9bmV3IHIuQ29sb3IoaSxvLGEpO24uYWRkKG5ldyByLkFtYmllbnRMaWdodChzLDEpKX19fSxzZXR1cE1vcnBoTWF0ZXJpYWxzOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztuLnRyYXZlcnNlKChmdW5jdGlvbihlKXtlLmlzTWVzaCYmZS5nZW9tZXRyeS5tb3JwaEF0dHJpYnV0ZXMucG9zaXRpb24mJmUuZ2VvbWV0cnkubW9ycGhBdHRyaWJ1dGVzLnBvc2l0aW9uLmxlbmd0aCYmKEFycmF5LmlzQXJyYXkoZS5tYXRlcmlhbCk/ZS5tYXRlcmlhbC5mb3JFYWNoKChmdW5jdGlvbihuLHIpe3Quc2V0dXBNb3JwaE1hdGVyaWFsKGUsbixyKX0pKTp0LnNldHVwTW9ycGhNYXRlcmlhbChlLGUubWF0ZXJpYWwpKX0pKX0sc2V0dXBNb3JwaE1hdGVyaWFsOmZ1bmN0aW9uKHQsZSxyKXt2YXIgaT10LnV1aWQsbz1lLnV1aWQsYT0hMTtpZihuLnRyYXZlcnNlKChmdW5jdGlvbih0KXt0LmlzTWVzaCYmKEFycmF5LmlzQXJyYXkodC5tYXRlcmlhbCk/dC5tYXRlcmlhbC5mb3JFYWNoKChmdW5jdGlvbihlKXtlLnV1aWQ9PT1vJiZ0LnV1aWQhPT1pJiYoYT0hMCl9KSk6dC5tYXRlcmlhbC51dWlkPT09byYmdC51dWlkIT09aSYmKGE9ITApKX0pKSwhMD09PWEpe3ZhciBzPWUuY2xvbmUoKTtzLm1vcnBoVGFyZ2V0cz0hMCx2b2lkIDA9PT1yP3QubWF0ZXJpYWw9czp0Lm1hdGVyaWFsW3JdPXN9ZWxzZSBlLm1vcnBoVGFyZ2V0cz0hMH19LGEucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjphLHBhcnNlOmZ1bmN0aW9uKG4pe3ZhciByPW5ldyBNYXA7aWYoXCJHZW9tZXRyeVwiaW4gdC5PYmplY3RzKXt2YXIgaT10Lk9iamVjdHMuR2VvbWV0cnk7Zm9yKHZhciBvIGluIGkpe3ZhciBhPWUuZ2V0KHBhcnNlSW50KG8pKSxzPXRoaXMucGFyc2VHZW9tZXRyeShhLGlbb10sbik7ci5zZXQocGFyc2VJbnQobykscyl9fXJldHVybiByfSxwYXJzZUdlb21ldHJ5OmZ1bmN0aW9uKHQsZSxuKXtzd2l0Y2goZS5hdHRyVHlwZSl7Y2FzZVwiTWVzaFwiOnJldHVybiB0aGlzLnBhcnNlTWVzaEdlb21ldHJ5KHQsZSxuKTtjYXNlXCJOdXJic0N1cnZlXCI6cmV0dXJuIHRoaXMucGFyc2VOdXJic0dlb21ldHJ5KGUpfX0scGFyc2VNZXNoR2VvbWV0cnk6ZnVuY3Rpb24oZSxuLHIpe3ZhciBpPXIuc2tlbGV0b25zLG89W10sYT1lLnBhcmVudHMubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gdC5PYmplY3RzLk1vZGVsW2UuSURdfSkpO2lmKDAhPT1hLmxlbmd0aCl7dmFyIHM9ZS5jaGlsZHJlbi5yZWR1Y2UoKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZvaWQgMCE9PWlbZS5JRF0mJih0PWlbZS5JRF0pLHR9KSxudWxsKTtlLmNoaWxkcmVuLmZvckVhY2goKGZ1bmN0aW9uKHQpe3ZvaWQgMCE9PXIubW9ycGhUYXJnZXRzW3QuSURdJiZvLnB1c2goci5tb3JwaFRhcmdldHNbdC5JRF0pfSkpO3ZhciBjPWFbMF0sbD17fTtcIlJvdGF0aW9uT3JkZXJcImluIGMmJihsLmV1bGVyT3JkZXI9eChjLlJvdGF0aW9uT3JkZXIudmFsdWUpKSxcIkluaGVyaXRUeXBlXCJpbiBjJiYobC5pbmhlcml0VHlwZT1wYXJzZUludChjLkluaGVyaXRUeXBlLnZhbHVlKSksXCJHZW9tZXRyaWNUcmFuc2xhdGlvblwiaW4gYyYmKGwudHJhbnNsYXRpb249Yy5HZW9tZXRyaWNUcmFuc2xhdGlvbi52YWx1ZSksXCJHZW9tZXRyaWNSb3RhdGlvblwiaW4gYyYmKGwucm90YXRpb249Yy5HZW9tZXRyaWNSb3RhdGlvbi52YWx1ZSksXCJHZW9tZXRyaWNTY2FsaW5nXCJpbiBjJiYobC5zY2FsZT1jLkdlb21ldHJpY1NjYWxpbmcudmFsdWUpO3ZhciB1PXkobCk7cmV0dXJuIHRoaXMuZ2VuR2VvbWV0cnkobixzLG8sdSl9fSxnZW5HZW9tZXRyeTpmdW5jdGlvbih0LGUsbixpKXt2YXIgbz1uZXcgci5CdWZmZXJHZW9tZXRyeTt0LmF0dHJOYW1lJiYoby5uYW1lPXQuYXR0ck5hbWUpO3ZhciBhPXRoaXMucGFyc2VHZW9Ob2RlKHQsZSkscz10aGlzLmdlbkJ1ZmZlcnMoYSksYz1uZXcgci5GbG9hdDMyQnVmZmVyQXR0cmlidXRlKHMudmVydGV4LDMpO2lmKGMuYXBwbHlNYXRyaXg0KGkpLG8uc2V0QXR0cmlidXRlKFwicG9zaXRpb25cIixjKSxzLmNvbG9ycy5sZW5ndGg+MCYmby5zZXRBdHRyaWJ1dGUoXCJjb2xvclwiLG5ldyByLkZsb2F0MzJCdWZmZXJBdHRyaWJ1dGUocy5jb2xvcnMsMykpLGUmJihvLnNldEF0dHJpYnV0ZShcInNraW5JbmRleFwiLG5ldyByLlVpbnQxNkJ1ZmZlckF0dHJpYnV0ZShzLndlaWdodHNJbmRpY2VzLDQpKSxvLnNldEF0dHJpYnV0ZShcInNraW5XZWlnaHRcIixuZXcgci5GbG9hdDMyQnVmZmVyQXR0cmlidXRlKHMudmVydGV4V2VpZ2h0cyw0KSksby5GQlhfRGVmb3JtZXI9ZSkscy5ub3JtYWwubGVuZ3RoPjApe3ZhciBsPShuZXcgci5NYXRyaXgzKS5nZXROb3JtYWxNYXRyaXgoaSksdT1uZXcgci5GbG9hdDMyQnVmZmVyQXR0cmlidXRlKHMubm9ybWFsLDMpO3UuYXBwbHlOb3JtYWxNYXRyaXgobCksby5zZXRBdHRyaWJ1dGUoXCJub3JtYWxcIix1KX1pZihzLnV2cy5mb3JFYWNoKChmdW5jdGlvbih0LGUpe3ZhciBuPVwidXZcIisoZSsxKS50b1N0cmluZygpOzA9PT1lJiYobj1cInV2XCIpLG8uc2V0QXR0cmlidXRlKG4sbmV3IHIuRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZShzLnV2c1tlXSwyKSl9KSksYS5tYXRlcmlhbCYmXCJBbGxTYW1lXCIhPT1hLm1hdGVyaWFsLm1hcHBpbmdUeXBlKXt2YXIgaD1zLm1hdGVyaWFsSW5kZXhbMF0sZD0wO2lmKHMubWF0ZXJpYWxJbmRleC5mb3JFYWNoKChmdW5jdGlvbih0LGUpe3QhPT1oJiYoby5hZGRHcm91cChkLGUtZCxoKSxoPXQsZD1lKX0pKSxvLmdyb3Vwcy5sZW5ndGg+MCl7dmFyIHA9by5ncm91cHNbby5ncm91cHMubGVuZ3RoLTFdLGY9cC5zdGFydCtwLmNvdW50O2YhPT1zLm1hdGVyaWFsSW5kZXgubGVuZ3RoJiZvLmFkZEdyb3VwKGYscy5tYXRlcmlhbEluZGV4Lmxlbmd0aC1mLGgpfTA9PT1vLmdyb3Vwcy5sZW5ndGgmJm8uYWRkR3JvdXAoMCxzLm1hdGVyaWFsSW5kZXgubGVuZ3RoLHMubWF0ZXJpYWxJbmRleFswXSl9cmV0dXJuIHRoaXMuYWRkTW9ycGhUYXJnZXRzKG8sdCxuLGkpLG99LHBhcnNlR2VvTm9kZTpmdW5jdGlvbih0LGUpe3ZhciBuPXt9O2lmKG4udmVydGV4UG9zaXRpb25zPXZvaWQgMCE9PXQuVmVydGljZXM/dC5WZXJ0aWNlcy5hOltdLG4udmVydGV4SW5kaWNlcz12b2lkIDAhPT10LlBvbHlnb25WZXJ0ZXhJbmRleD90LlBvbHlnb25WZXJ0ZXhJbmRleC5hOltdLHQuTGF5ZXJFbGVtZW50Q29sb3ImJihuLmNvbG9yPXRoaXMucGFyc2VWZXJ0ZXhDb2xvcnModC5MYXllckVsZW1lbnRDb2xvclswXSkpLHQuTGF5ZXJFbGVtZW50TWF0ZXJpYWwmJihuLm1hdGVyaWFsPXRoaXMucGFyc2VNYXRlcmlhbEluZGljZXModC5MYXllckVsZW1lbnRNYXRlcmlhbFswXSkpLHQuTGF5ZXJFbGVtZW50Tm9ybWFsJiYobi5ub3JtYWw9dGhpcy5wYXJzZU5vcm1hbHModC5MYXllckVsZW1lbnROb3JtYWxbMF0pKSx0LkxheWVyRWxlbWVudFVWKXtuLnV2PVtdO2Zvcih2YXIgcj0wO3QuTGF5ZXJFbGVtZW50VVZbcl07KXQuTGF5ZXJFbGVtZW50VVZbcl0uVVYmJm4udXYucHVzaCh0aGlzLnBhcnNlVVZzKHQuTGF5ZXJFbGVtZW50VVZbcl0pKSxyKyt9cmV0dXJuIG4ud2VpZ2h0VGFibGU9e30sbnVsbCE9PWUmJihuLnNrZWxldG9uPWUsZS5yYXdCb25lcy5mb3JFYWNoKChmdW5jdGlvbih0LGUpe3QuaW5kaWNlcy5mb3JFYWNoKChmdW5jdGlvbihyLGkpe3ZvaWQgMD09PW4ud2VpZ2h0VGFibGVbcl0mJihuLndlaWdodFRhYmxlW3JdPVtdKSxuLndlaWdodFRhYmxlW3JdLnB1c2goe2lkOmUsd2VpZ2h0OnQud2VpZ2h0c1tpXX0pfSkpfSkpKSxufSxnZW5CdWZmZXJzOmZ1bmN0aW9uKHQpe3ZhciBlPXt2ZXJ0ZXg6W10sbm9ybWFsOltdLGNvbG9yczpbXSx1dnM6W10sbWF0ZXJpYWxJbmRleDpbXSx2ZXJ0ZXhXZWlnaHRzOltdLHdlaWdodHNJbmRpY2VzOltdfSxuPTAscj0wLGk9ITEsbz1bXSxhPVtdLHM9W10sYz1bXSxsPVtdLHU9W10saD10aGlzO3JldHVybiB0LnZlcnRleEluZGljZXMuZm9yRWFjaCgoZnVuY3Rpb24oZCxwKXt2YXIgZj0hMTtkPDAmJihkXj0tMSxmPSEwKTt2YXIgZz1bXSx2PVtdO2lmKG8ucHVzaCgzKmQsMypkKzEsMypkKzIpLHQuY29sb3Ipe3ZhciB5PW0ocCxuLGQsdC5jb2xvcik7cy5wdXNoKHlbMF0seVsxXSx5WzJdKX1pZih0LnNrZWxldG9uKXtpZih2b2lkIDAhPT10LndlaWdodFRhYmxlW2RdJiZ0LndlaWdodFRhYmxlW2RdLmZvckVhY2goKGZ1bmN0aW9uKHQpe3YucHVzaCh0LndlaWdodCksZy5wdXNoKHQuaWQpfSkpLHYubGVuZ3RoPjQpe2l8fChjb25zb2xlLndhcm4oXCJUSFJFRS5GQlhMb2FkZXI6IFZlcnRleCBoYXMgbW9yZSB0aGFuIDQgc2tpbm5pbmcgd2VpZ2h0cyBhc3NpZ25lZCB0byB2ZXJ0ZXguIERlbGV0aW5nIGFkZGl0aW9uYWwgd2VpZ2h0cy5cIiksaT0hMCk7dmFyIHg9WzAsMCwwLDBdLGI9WzAsMCwwLDBdO3YuZm9yRWFjaCgoZnVuY3Rpb24odCxlKXt2YXIgbj10LHI9Z1tlXTtiLmZvckVhY2goKGZ1bmN0aW9uKHQsZSxpKXtpZihuPnQpe2lbZV09bixuPXQ7dmFyIG89eFtlXTt4W2VdPXIscj1vfX0pKX0pKSxnPXgsdj1ifWZvcig7di5sZW5ndGg8NDspdi5wdXNoKDApLGcucHVzaCgwKTtmb3IodmFyIHc9MDt3PDQ7Kyt3KWwucHVzaCh2W3ddKSx1LnB1c2goZ1t3XSl9aWYodC5ub3JtYWwpe3k9bShwLG4sZCx0Lm5vcm1hbCk7YS5wdXNoKHlbMF0seVsxXSx5WzJdKX1pZih0Lm1hdGVyaWFsJiZcIkFsbFNhbWVcIiE9PXQubWF0ZXJpYWwubWFwcGluZ1R5cGUpdmFyIF89bShwLG4sZCx0Lm1hdGVyaWFsKVswXTt0LnV2JiZ0LnV2LmZvckVhY2goKGZ1bmN0aW9uKHQsZSl7dmFyIHI9bShwLG4sZCx0KTt2b2lkIDA9PT1jW2VdJiYoY1tlXT1bXSksY1tlXS5wdXNoKHJbMF0pLGNbZV0ucHVzaChyWzFdKX0pKSxyKyssZiYmKGguZ2VuRmFjZShlLHQsbyxfLGEscyxjLGwsdSxyKSxuKysscj0wLG89W10sYT1bXSxzPVtdLGM9W10sbD1bXSx1PVtdKX0pKSxlfSxnZW5GYWNlOmZ1bmN0aW9uKHQsZSxuLHIsaSxvLGEscyxjLGwpe2Zvcih2YXIgdT0yO3U8bDt1KyspdC52ZXJ0ZXgucHVzaChlLnZlcnRleFBvc2l0aW9uc1tuWzBdXSksdC52ZXJ0ZXgucHVzaChlLnZlcnRleFBvc2l0aW9uc1tuWzFdXSksdC52ZXJ0ZXgucHVzaChlLnZlcnRleFBvc2l0aW9uc1tuWzJdXSksdC52ZXJ0ZXgucHVzaChlLnZlcnRleFBvc2l0aW9uc1tuWzMqKHUtMSldXSksdC52ZXJ0ZXgucHVzaChlLnZlcnRleFBvc2l0aW9uc1tuWzMqKHUtMSkrMV1dKSx0LnZlcnRleC5wdXNoKGUudmVydGV4UG9zaXRpb25zW25bMyoodS0xKSsyXV0pLHQudmVydGV4LnB1c2goZS52ZXJ0ZXhQb3NpdGlvbnNbblszKnVdXSksdC52ZXJ0ZXgucHVzaChlLnZlcnRleFBvc2l0aW9uc1tuWzMqdSsxXV0pLHQudmVydGV4LnB1c2goZS52ZXJ0ZXhQb3NpdGlvbnNbblszKnUrMl1dKSxlLnNrZWxldG9uJiYodC52ZXJ0ZXhXZWlnaHRzLnB1c2goc1swXSksdC52ZXJ0ZXhXZWlnaHRzLnB1c2goc1sxXSksdC52ZXJ0ZXhXZWlnaHRzLnB1c2goc1syXSksdC52ZXJ0ZXhXZWlnaHRzLnB1c2goc1szXSksdC52ZXJ0ZXhXZWlnaHRzLnB1c2goc1s0Kih1LTEpXSksdC52ZXJ0ZXhXZWlnaHRzLnB1c2goc1s0Kih1LTEpKzFdKSx0LnZlcnRleFdlaWdodHMucHVzaChzWzQqKHUtMSkrMl0pLHQudmVydGV4V2VpZ2h0cy5wdXNoKHNbNCoodS0xKSszXSksdC52ZXJ0ZXhXZWlnaHRzLnB1c2goc1s0KnVdKSx0LnZlcnRleFdlaWdodHMucHVzaChzWzQqdSsxXSksdC52ZXJ0ZXhXZWlnaHRzLnB1c2goc1s0KnUrMl0pLHQudmVydGV4V2VpZ2h0cy5wdXNoKHNbNCp1KzNdKSx0LndlaWdodHNJbmRpY2VzLnB1c2goY1swXSksdC53ZWlnaHRzSW5kaWNlcy5wdXNoKGNbMV0pLHQud2VpZ2h0c0luZGljZXMucHVzaChjWzJdKSx0LndlaWdodHNJbmRpY2VzLnB1c2goY1szXSksdC53ZWlnaHRzSW5kaWNlcy5wdXNoKGNbNCoodS0xKV0pLHQud2VpZ2h0c0luZGljZXMucHVzaChjWzQqKHUtMSkrMV0pLHQud2VpZ2h0c0luZGljZXMucHVzaChjWzQqKHUtMSkrMl0pLHQud2VpZ2h0c0luZGljZXMucHVzaChjWzQqKHUtMSkrM10pLHQud2VpZ2h0c0luZGljZXMucHVzaChjWzQqdV0pLHQud2VpZ2h0c0luZGljZXMucHVzaChjWzQqdSsxXSksdC53ZWlnaHRzSW5kaWNlcy5wdXNoKGNbNCp1KzJdKSx0LndlaWdodHNJbmRpY2VzLnB1c2goY1s0KnUrM10pKSxlLmNvbG9yJiYodC5jb2xvcnMucHVzaChvWzBdKSx0LmNvbG9ycy5wdXNoKG9bMV0pLHQuY29sb3JzLnB1c2gob1syXSksdC5jb2xvcnMucHVzaChvWzMqKHUtMSldKSx0LmNvbG9ycy5wdXNoKG9bMyoodS0xKSsxXSksdC5jb2xvcnMucHVzaChvWzMqKHUtMSkrMl0pLHQuY29sb3JzLnB1c2gob1szKnVdKSx0LmNvbG9ycy5wdXNoKG9bMyp1KzFdKSx0LmNvbG9ycy5wdXNoKG9bMyp1KzJdKSksZS5tYXRlcmlhbCYmXCJBbGxTYW1lXCIhPT1lLm1hdGVyaWFsLm1hcHBpbmdUeXBlJiYodC5tYXRlcmlhbEluZGV4LnB1c2gociksdC5tYXRlcmlhbEluZGV4LnB1c2gociksdC5tYXRlcmlhbEluZGV4LnB1c2gocikpLGUubm9ybWFsJiYodC5ub3JtYWwucHVzaChpWzBdKSx0Lm5vcm1hbC5wdXNoKGlbMV0pLHQubm9ybWFsLnB1c2goaVsyXSksdC5ub3JtYWwucHVzaChpWzMqKHUtMSldKSx0Lm5vcm1hbC5wdXNoKGlbMyoodS0xKSsxXSksdC5ub3JtYWwucHVzaChpWzMqKHUtMSkrMl0pLHQubm9ybWFsLnB1c2goaVszKnVdKSx0Lm5vcm1hbC5wdXNoKGlbMyp1KzFdKSx0Lm5vcm1hbC5wdXNoKGlbMyp1KzJdKSksZS51diYmZS51di5mb3JFYWNoKChmdW5jdGlvbihlLG4pe3ZvaWQgMD09PXQudXZzW25dJiYodC51dnNbbl09W10pLHQudXZzW25dLnB1c2goYVtuXVswXSksdC51dnNbbl0ucHVzaChhW25dWzFdKSx0LnV2c1tuXS5wdXNoKGFbbl1bMioodS0xKV0pLHQudXZzW25dLnB1c2goYVtuXVsyKih1LTEpKzFdKSx0LnV2c1tuXS5wdXNoKGFbbl1bMip1XSksdC51dnNbbl0ucHVzaChhW25dWzIqdSsxXSl9KSl9LGFkZE1vcnBoVGFyZ2V0czpmdW5jdGlvbihlLG4scixpKXtpZigwIT09ci5sZW5ndGgpe2UubW9ycGhUYXJnZXRzUmVsYXRpdmU9ITAsZS5tb3JwaEF0dHJpYnV0ZXMucG9zaXRpb249W107dmFyIG89dGhpcztyLmZvckVhY2goKGZ1bmN0aW9uKHIpe3IucmF3VGFyZ2V0cy5mb3JFYWNoKChmdW5jdGlvbihyKXt2YXIgYT10Lk9iamVjdHMuR2VvbWV0cnlbci5nZW9JRF07dm9pZCAwIT09YSYmby5nZW5Nb3JwaEdlb21ldHJ5KGUsbixhLGksci5uYW1lKX0pKX0pKX19LGdlbk1vcnBoR2VvbWV0cnk6ZnVuY3Rpb24odCxlLG4saSxvKXtmb3IodmFyIGE9dm9pZCAwIT09ZS5Qb2x5Z29uVmVydGV4SW5kZXg/ZS5Qb2x5Z29uVmVydGV4SW5kZXguYTpbXSxzPXZvaWQgMCE9PW4uVmVydGljZXM/bi5WZXJ0aWNlcy5hOltdLGM9dm9pZCAwIT09bi5JbmRleGVzP24uSW5kZXhlcy5hOltdLGw9Myp0LmF0dHJpYnV0ZXMucG9zaXRpb24uY291bnQsdT1uZXcgRmxvYXQzMkFycmF5KGwpLGg9MDtoPGMubGVuZ3RoO2grKyl7dmFyIGQ9MypjW2hdO3VbZF09c1szKmhdLHVbZCsxXT1zWzMqaCsxXSx1W2QrMl09c1szKmgrMl19dmFyIHA9e3ZlcnRleEluZGljZXM6YSx2ZXJ0ZXhQb3NpdGlvbnM6dX0sZj10aGlzLmdlbkJ1ZmZlcnMocCksbT1uZXcgci5GbG9hdDMyQnVmZmVyQXR0cmlidXRlKGYudmVydGV4LDMpO20ubmFtZT1vfHxuLmF0dHJOYW1lLG0uYXBwbHlNYXRyaXg0KGkpLHQubW9ycGhBdHRyaWJ1dGVzLnBvc2l0aW9uLnB1c2gobSl9LHBhcnNlTm9ybWFsczpmdW5jdGlvbih0KXt2YXIgZT10Lk1hcHBpbmdJbmZvcm1hdGlvblR5cGUsbj10LlJlZmVyZW5jZUluZm9ybWF0aW9uVHlwZSxyPXQuTm9ybWFscy5hLGk9W107cmV0dXJuXCJJbmRleFRvRGlyZWN0XCI9PT1uJiYoXCJOb3JtYWxJbmRleFwiaW4gdD9pPXQuTm9ybWFsSW5kZXguYTpcIk5vcm1hbHNJbmRleFwiaW4gdCYmKGk9dC5Ob3JtYWxzSW5kZXguYSkpLHtkYXRhU2l6ZTozLGJ1ZmZlcjpyLGluZGljZXM6aSxtYXBwaW5nVHlwZTplLHJlZmVyZW5jZVR5cGU6bn19LHBhcnNlVVZzOmZ1bmN0aW9uKHQpe3ZhciBlPXQuTWFwcGluZ0luZm9ybWF0aW9uVHlwZSxuPXQuUmVmZXJlbmNlSW5mb3JtYXRpb25UeXBlLHI9dC5VVi5hLGk9W107cmV0dXJuXCJJbmRleFRvRGlyZWN0XCI9PT1uJiYoaT10LlVWSW5kZXguYSkse2RhdGFTaXplOjIsYnVmZmVyOnIsaW5kaWNlczppLG1hcHBpbmdUeXBlOmUscmVmZXJlbmNlVHlwZTpufX0scGFyc2VWZXJ0ZXhDb2xvcnM6ZnVuY3Rpb24odCl7dmFyIGU9dC5NYXBwaW5nSW5mb3JtYXRpb25UeXBlLG49dC5SZWZlcmVuY2VJbmZvcm1hdGlvblR5cGUscj10LkNvbG9ycy5hLGk9W107cmV0dXJuXCJJbmRleFRvRGlyZWN0XCI9PT1uJiYoaT10LkNvbG9ySW5kZXguYSkse2RhdGFTaXplOjQsYnVmZmVyOnIsaW5kaWNlczppLG1hcHBpbmdUeXBlOmUscmVmZXJlbmNlVHlwZTpufX0scGFyc2VNYXRlcmlhbEluZGljZXM6ZnVuY3Rpb24odCl7dmFyIGU9dC5NYXBwaW5nSW5mb3JtYXRpb25UeXBlLG49dC5SZWZlcmVuY2VJbmZvcm1hdGlvblR5cGU7aWYoXCJOb01hcHBpbmdJbmZvcm1hdGlvblwiPT09ZSlyZXR1cm57ZGF0YVNpemU6MSxidWZmZXI6WzBdLGluZGljZXM6WzBdLG1hcHBpbmdUeXBlOlwiQWxsU2FtZVwiLHJlZmVyZW5jZVR5cGU6bn07Zm9yKHZhciByPXQuTWF0ZXJpYWxzLmEsaT1bXSxvPTA7bzxyLmxlbmd0aDsrK28paS5wdXNoKG8pO3JldHVybntkYXRhU2l6ZToxLGJ1ZmZlcjpyLGluZGljZXM6aSxtYXBwaW5nVHlwZTplLHJlZmVyZW5jZVR5cGU6bn19LHBhcnNlTnVyYnNHZW9tZXRyeTpmdW5jdGlvbih0KXtpZih2b2lkIDA9PT1rKXJldHVybiBjb25zb2xlLmVycm9yKFwiVEhSRUUuRkJYTG9hZGVyOiBUaGUgbG9hZGVyIHJlbGllcyBvbiBOVVJCU0N1cnZlIGZvciBhbnkgbnVyYnMgcHJlc2VudCBpbiB0aGUgbW9kZWwuIE51cmJzIHdpbGwgc2hvdyB1cCBhcyBlbXB0eSBnZW9tZXRyeS5cIiksbmV3IHIuQnVmZmVyR2VvbWV0cnk7dmFyIGU9cGFyc2VJbnQodC5PcmRlcik7aWYoaXNOYU4oZSkpcmV0dXJuIGNvbnNvbGUuZXJyb3IoXCJUSFJFRS5GQlhMb2FkZXI6IEludmFsaWQgT3JkZXIgJXMgZ2l2ZW4gZm9yIGdlb21ldHJ5IElEOiAlc1wiLHQuT3JkZXIsdC5pZCksbmV3IHIuQnVmZmVyR2VvbWV0cnk7Zm9yKHZhciBuLGksbz1lLTEsYT10Lktub3RWZWN0b3IuYSxzPVtdLGM9dC5Qb2ludHMuYSxsPTAsdT1jLmxlbmd0aDtsPHU7bCs9NClzLnB1c2goKG5ldyByLlZlY3RvcjQpLmZyb21BcnJheShjLGwpKTtpZihcIkNsb3NlZFwiPT09dC5Gb3JtKXMucHVzaChzWzBdKTtlbHNlIGlmKFwiUGVyaW9kaWNcIj09PXQuRm9ybSl7bj1vLGk9YS5sZW5ndGgtMS1uO2ZvcihsPTA7bDxvOysrbClzLnB1c2goc1tsXSl9dmFyIGg9bmV3IGsobyxhLHMsbixpKS5nZXRQb2ludHMoNypzLmxlbmd0aCksZD1uZXcgRmxvYXQzMkFycmF5KDMqaC5sZW5ndGgpO2guZm9yRWFjaCgoZnVuY3Rpb24odCxlKXt0LnRvQXJyYXkoZCwzKmUpfSkpO3ZhciBwPW5ldyByLkJ1ZmZlckdlb21ldHJ5O3JldHVybiBwLnNldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IHIuQnVmZmVyQXR0cmlidXRlKGQsMykpLHB9fSxzLnByb3RvdHlwZT17Y29uc3RydWN0b3I6cyxwYXJzZTpmdW5jdGlvbigpe3ZhciB0PVtdLGU9dGhpcy5wYXJzZUNsaXBzKCk7aWYodm9pZCAwIT09ZSlmb3IodmFyIG4gaW4gZSl7dmFyIHI9ZVtuXSxpPXRoaXMuYWRkQ2xpcChyKTt0LnB1c2goaSl9cmV0dXJuIHR9LHBhcnNlQ2xpcHM6ZnVuY3Rpb24oKXtpZih2b2lkIDAhPT10Lk9iamVjdHMuQW5pbWF0aW9uQ3VydmUpe3ZhciBlPXRoaXMucGFyc2VBbmltYXRpb25DdXJ2ZU5vZGVzKCk7dGhpcy5wYXJzZUFuaW1hdGlvbkN1cnZlcyhlKTt2YXIgbj10aGlzLnBhcnNlQW5pbWF0aW9uTGF5ZXJzKGUpO3JldHVybiB0aGlzLnBhcnNlQW5pbVN0YWNrcyhuKX19LHBhcnNlQW5pbWF0aW9uQ3VydmVOb2RlczpmdW5jdGlvbigpe3ZhciBlPXQuT2JqZWN0cy5BbmltYXRpb25DdXJ2ZU5vZGUsbj1uZXcgTWFwO2Zvcih2YXIgciBpbiBlKXt2YXIgaT1lW3JdO2lmKG51bGwhPT1pLmF0dHJOYW1lLm1hdGNoKC9TfFJ8VHxEZWZvcm1QZXJjZW50Lykpe3ZhciBvPXtpZDppLmlkLGF0dHI6aS5hdHRyTmFtZSxjdXJ2ZXM6e319O24uc2V0KG8uaWQsbyl9fXJldHVybiBufSxwYXJzZUFuaW1hdGlvbkN1cnZlczpmdW5jdGlvbihuKXt2YXIgcj10Lk9iamVjdHMuQW5pbWF0aW9uQ3VydmU7Zm9yKHZhciBpIGluIHIpe3ZhciBvPXtpZDpyW2ldLmlkLHRpbWVzOnJbaV0uS2V5VGltZS5hLm1hcChwKSx2YWx1ZXM6cltpXS5LZXlWYWx1ZUZsb2F0LmF9LGE9ZS5nZXQoby5pZCk7aWYodm9pZCAwIT09YSl7dmFyIHM9YS5wYXJlbnRzWzBdLklELGM9YS5wYXJlbnRzWzBdLnJlbGF0aW9uc2hpcDtjLm1hdGNoKC9YLyk/bi5nZXQocykuY3VydmVzLng9bzpjLm1hdGNoKC9ZLyk/bi5nZXQocykuY3VydmVzLnk9bzpjLm1hdGNoKC9aLyk/bi5nZXQocykuY3VydmVzLno9bzpjLm1hdGNoKC9kfERlZm9ybVBlcmNlbnQvKSYmbi5oYXMocykmJihuLmdldChzKS5jdXJ2ZXMubW9ycGg9byl9fX0scGFyc2VBbmltYXRpb25MYXllcnM6ZnVuY3Rpb24oaSl7dmFyIG89dC5PYmplY3RzLkFuaW1hdGlvbkxheWVyLGE9bmV3IE1hcDtmb3IodmFyIHMgaW4gbyl7dmFyIGM9W10sbD1lLmdldChwYXJzZUludChzKSk7aWYodm9pZCAwIT09bClsLmNoaWxkcmVuLmZvckVhY2goKGZ1bmN0aW9uKG8sYSl7aWYoaS5oYXMoby5JRCkpe3ZhciBzPWkuZ2V0KG8uSUQpO2lmKHZvaWQgMCE9PXMuY3VydmVzLnh8fHZvaWQgMCE9PXMuY3VydmVzLnl8fHZvaWQgMCE9PXMuY3VydmVzLnope2lmKHZvaWQgMD09PWNbYV0paWYodm9pZCAwIT09KGY9ZS5nZXQoby5JRCkucGFyZW50cy5maWx0ZXIoKGZ1bmN0aW9uKHQpe3JldHVybiB2b2lkIDAhPT10LnJlbGF0aW9uc2hpcH0pKVswXS5JRCkpe2lmKHZvaWQgMD09PSh1PXQuT2JqZWN0cy5Nb2RlbFtmLnRvU3RyaW5nKCldKSlyZXR1cm4gdm9pZCBjb25zb2xlLndhcm4oXCJUSFJFRS5GQlhMb2FkZXI6IEVuY291bnRlcmVkIGEgdW51c2VkIGN1cnZlLlwiLG8pO3ZhciBsPXttb2RlbE5hbWU6dS5hdHRyTmFtZT9yLlByb3BlcnR5QmluZGluZy5zYW5pdGl6ZU5vZGVOYW1lKHUuYXR0ck5hbWUpOlwiXCIsSUQ6dS5pZCxpbml0aWFsUG9zaXRpb246WzAsMCwwXSxpbml0aWFsUm90YXRpb246WzAsMCwwXSxpbml0aWFsU2NhbGU6WzEsMSwxXX07bi50cmF2ZXJzZSgoZnVuY3Rpb24odCl7dC5JRD09PXUuaWQmJihsLnRyYW5zZm9ybT10Lm1hdHJpeCx0LnVzZXJEYXRhLnRyYW5zZm9ybURhdGEmJihsLmV1bGVyT3JkZXI9dC51c2VyRGF0YS50cmFuc2Zvcm1EYXRhLmV1bGVyT3JkZXIpKX0pKSxsLnRyYW5zZm9ybXx8KGwudHJhbnNmb3JtPW5ldyByLk1hdHJpeDQpLFwiUHJlUm90YXRpb25cImluIHUmJihsLnByZVJvdGF0aW9uPXUuUHJlUm90YXRpb24udmFsdWUpLFwiUG9zdFJvdGF0aW9uXCJpbiB1JiYobC5wb3N0Um90YXRpb249dS5Qb3N0Um90YXRpb24udmFsdWUpLGNbYV09bH1jW2FdJiYoY1thXVtzLmF0dHJdPXMpfWVsc2UgaWYodm9pZCAwIT09cy5jdXJ2ZXMubW9ycGgpe2lmKHZvaWQgMD09PWNbYV0pe3ZhciB1LGg9ZS5nZXQoby5JRCkucGFyZW50cy5maWx0ZXIoKGZ1bmN0aW9uKHQpe3JldHVybiB2b2lkIDAhPT10LnJlbGF0aW9uc2hpcH0pKVswXS5JRCxkPWUuZ2V0KGgpLnBhcmVudHNbMF0uSUQscD1lLmdldChkKS5wYXJlbnRzWzBdLklELGY9ZS5nZXQocCkucGFyZW50c1swXS5JRDtsPXttb2RlbE5hbWU6KHU9dC5PYmplY3RzLk1vZGVsW2ZdKS5hdHRyTmFtZT9yLlByb3BlcnR5QmluZGluZy5zYW5pdGl6ZU5vZGVOYW1lKHUuYXR0ck5hbWUpOlwiXCIsbW9ycGhOYW1lOnQuT2JqZWN0cy5EZWZvcm1lcltoXS5hdHRyTmFtZX07Y1thXT1sfWNbYV1bcy5hdHRyXT1zfX19KSksYS5zZXQocGFyc2VJbnQocyksYyl9cmV0dXJuIGF9LHBhcnNlQW5pbVN0YWNrczpmdW5jdGlvbihuKXt2YXIgcj10Lk9iamVjdHMuQW5pbWF0aW9uU3RhY2ssaT17fTtmb3IodmFyIG8gaW4gcil7dmFyIGE9ZS5nZXQocGFyc2VJbnQobykpLmNoaWxkcmVuO2EubGVuZ3RoPjEmJmNvbnNvbGUud2FybihcIlRIUkVFLkZCWExvYWRlcjogRW5jb3VudGVyZWQgYW4gYW5pbWF0aW9uIHN0YWNrIHdpdGggbXVsdGlwbGUgbGF5ZXJzLCB0aGlzIGlzIGN1cnJlbnRseSBub3Qgc3VwcG9ydGVkLiBJZ25vcmluZyBzdWJzZXF1ZW50IGxheWVycy5cIik7dmFyIHM9bi5nZXQoYVswXS5JRCk7aVtvXT17bmFtZTpyW29dLmF0dHJOYW1lLGxheWVyOnN9fXJldHVybiBpfSxhZGRDbGlwOmZ1bmN0aW9uKHQpe3ZhciBlPVtdLG49dGhpcztyZXR1cm4gdC5sYXllci5mb3JFYWNoKChmdW5jdGlvbih0KXtlPWUuY29uY2F0KG4uZ2VuZXJhdGVUcmFja3ModCkpfSkpLG5ldyByLkFuaW1hdGlvbkNsaXAodC5uYW1lLC0xLGUpfSxnZW5lcmF0ZVRyYWNrczpmdW5jdGlvbih0KXt2YXIgZT1bXSxuPW5ldyByLlZlY3RvcjMsaT1uZXcgci5RdWF0ZXJuaW9uLG89bmV3IHIuVmVjdG9yMztpZih0LnRyYW5zZm9ybSYmdC50cmFuc2Zvcm0uZGVjb21wb3NlKG4saSxvKSxuPW4udG9BcnJheSgpLGk9KG5ldyByLkV1bGVyKS5zZXRGcm9tUXVhdGVybmlvbihpLHQuZXVsZXJPcmRlcikudG9BcnJheSgpLG89by50b0FycmF5KCksdm9pZCAwIT09dC5UJiZPYmplY3Qua2V5cyh0LlQuY3VydmVzKS5sZW5ndGg+MCl7dmFyIGE9dGhpcy5nZW5lcmF0ZVZlY3RvclRyYWNrKHQubW9kZWxOYW1lLHQuVC5jdXJ2ZXMsbixcInBvc2l0aW9uXCIpO3ZvaWQgMCE9PWEmJmUucHVzaChhKX1pZih2b2lkIDAhPT10LlImJk9iamVjdC5rZXlzKHQuUi5jdXJ2ZXMpLmxlbmd0aD4wKXt2YXIgcz10aGlzLmdlbmVyYXRlUm90YXRpb25UcmFjayh0Lm1vZGVsTmFtZSx0LlIuY3VydmVzLGksdC5wcmVSb3RhdGlvbix0LnBvc3RSb3RhdGlvbix0LmV1bGVyT3JkZXIpO3ZvaWQgMCE9PXMmJmUucHVzaChzKX1pZih2b2lkIDAhPT10LlMmJk9iamVjdC5rZXlzKHQuUy5jdXJ2ZXMpLmxlbmd0aD4wKXt2YXIgYz10aGlzLmdlbmVyYXRlVmVjdG9yVHJhY2sodC5tb2RlbE5hbWUsdC5TLmN1cnZlcyxvLFwic2NhbGVcIik7dm9pZCAwIT09YyYmZS5wdXNoKGMpfWlmKHZvaWQgMCE9PXQuRGVmb3JtUGVyY2VudCl7dmFyIGw9dGhpcy5nZW5lcmF0ZU1vcnBoVHJhY2sodCk7dm9pZCAwIT09bCYmZS5wdXNoKGwpfXJldHVybiBlfSxnZW5lcmF0ZVZlY3RvclRyYWNrOmZ1bmN0aW9uKHQsZSxuLGkpe3ZhciBvPXRoaXMuZ2V0VGltZXNGb3JBbGxBeGVzKGUpLGE9dGhpcy5nZXRLZXlmcmFtZVRyYWNrVmFsdWVzKG8sZSxuKTtyZXR1cm4gbmV3IHIuVmVjdG9yS2V5ZnJhbWVUcmFjayh0K1wiLlwiK2ksbyxhKX0sZ2VuZXJhdGVSb3RhdGlvblRyYWNrOmZ1bmN0aW9uKHQsZSxuLGksbyxhKXt2b2lkIDAhPT1lLngmJih0aGlzLmludGVycG9sYXRlUm90YXRpb25zKGUueCksZS54LnZhbHVlcz1lLngudmFsdWVzLm1hcChyLk1hdGhVdGlscy5kZWdUb1JhZCkpLHZvaWQgMCE9PWUueSYmKHRoaXMuaW50ZXJwb2xhdGVSb3RhdGlvbnMoZS55KSxlLnkudmFsdWVzPWUueS52YWx1ZXMubWFwKHIuTWF0aFV0aWxzLmRlZ1RvUmFkKSksdm9pZCAwIT09ZS56JiYodGhpcy5pbnRlcnBvbGF0ZVJvdGF0aW9ucyhlLnopLGUuei52YWx1ZXM9ZS56LnZhbHVlcy5tYXAoci5NYXRoVXRpbHMuZGVnVG9SYWQpKTt2YXIgcz10aGlzLmdldFRpbWVzRm9yQWxsQXhlcyhlKSxjPXRoaXMuZ2V0S2V5ZnJhbWVUcmFja1ZhbHVlcyhzLGUsbik7dm9pZCAwIT09aSYmKChpPWkubWFwKHIuTWF0aFV0aWxzLmRlZ1RvUmFkKSkucHVzaChhKSxpPShuZXcgci5FdWxlcikuZnJvbUFycmF5KGkpLGk9KG5ldyByLlF1YXRlcm5pb24pLnNldEZyb21FdWxlcihpKSksdm9pZCAwIT09byYmKChvPW8ubWFwKHIuTWF0aFV0aWxzLmRlZ1RvUmFkKSkucHVzaChhKSxvPShuZXcgci5FdWxlcikuZnJvbUFycmF5KG8pLG89KG5ldyByLlF1YXRlcm5pb24pLnNldEZyb21FdWxlcihvKS5pbnZlcnQoKSk7Zm9yKHZhciBsPW5ldyByLlF1YXRlcm5pb24sdT1uZXcgci5FdWxlcixoPVtdLGQ9MDtkPGMubGVuZ3RoO2QrPTMpdS5zZXQoY1tkXSxjW2QrMV0sY1tkKzJdLGEpLGwuc2V0RnJvbUV1bGVyKHUpLHZvaWQgMCE9PWkmJmwucHJlbXVsdGlwbHkoaSksdm9pZCAwIT09byYmbC5tdWx0aXBseShvKSxsLnRvQXJyYXkoaCxkLzMqNCk7cmV0dXJuIG5ldyByLlF1YXRlcm5pb25LZXlmcmFtZVRyYWNrKHQrXCIucXVhdGVybmlvblwiLHMsaCl9LGdlbmVyYXRlTW9ycGhUcmFjazpmdW5jdGlvbih0KXt2YXIgZT10LkRlZm9ybVBlcmNlbnQuY3VydmVzLm1vcnBoLGk9ZS52YWx1ZXMubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gdC8xMDB9KSksbz1uLmdldE9iamVjdEJ5TmFtZSh0Lm1vZGVsTmFtZSkubW9ycGhUYXJnZXREaWN0aW9uYXJ5W3QubW9ycGhOYW1lXTtyZXR1cm4gbmV3IHIuTnVtYmVyS2V5ZnJhbWVUcmFjayh0Lm1vZGVsTmFtZStcIi5tb3JwaFRhcmdldEluZmx1ZW5jZXNbXCIrbytcIl1cIixlLnRpbWVzLGkpfSxnZXRUaW1lc0ZvckFsbEF4ZXM6ZnVuY3Rpb24odCl7dmFyIGU9W107cmV0dXJuIHZvaWQgMCE9PXQueCYmKGU9ZS5jb25jYXQodC54LnRpbWVzKSksdm9pZCAwIT09dC55JiYoZT1lLmNvbmNhdCh0LnkudGltZXMpKSx2b2lkIDAhPT10LnomJihlPWUuY29uY2F0KHQuei50aW1lcykpLGU9ZS5zb3J0KChmdW5jdGlvbih0LGUpe3JldHVybiB0LWV9KSkuZmlsdGVyKChmdW5jdGlvbih0LGUsbil7cmV0dXJuIG4uaW5kZXhPZih0KT09ZX0pKX0sZ2V0S2V5ZnJhbWVUcmFja1ZhbHVlczpmdW5jdGlvbih0LGUsbil7dmFyIHI9bixpPVtdLG89LTEsYT0tMSxzPS0xO3JldHVybiB0LmZvckVhY2goKGZ1bmN0aW9uKHQpe2lmKGUueCYmKG89ZS54LnRpbWVzLmluZGV4T2YodCkpLGUueSYmKGE9ZS55LnRpbWVzLmluZGV4T2YodCkpLGUueiYmKHM9ZS56LnRpbWVzLmluZGV4T2YodCkpLC0xIT09byl7dmFyIG49ZS54LnZhbHVlc1tvXTtpLnB1c2gobiksclswXT1ufWVsc2UgaS5wdXNoKHJbMF0pO2lmKC0xIT09YSl7dmFyIGM9ZS55LnZhbHVlc1thXTtpLnB1c2goYyksclsxXT1jfWVsc2UgaS5wdXNoKHJbMV0pO2lmKC0xIT09cyl7dmFyIGw9ZS56LnZhbHVlc1tzXTtpLnB1c2gobCksclsyXT1sfWVsc2UgaS5wdXNoKHJbMl0pfSkpLGl9LGludGVycG9sYXRlUm90YXRpb25zOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0xO2U8dC52YWx1ZXMubGVuZ3RoO2UrKyl7dmFyIG49dC52YWx1ZXNbZS0xXSxyPXQudmFsdWVzW2VdLW4saT1NYXRoLmFicyhyKTtpZihpPj0xODApe2Zvcih2YXIgbz1pLzE4MCxhPXIvbyxzPW4rYSxjPXQudGltZXNbZS0xXSxsPSh0LnRpbWVzW2VdLWMpL28sdT1jK2wsaD1bXSxkPVtdO3U8dC50aW1lc1tlXTspaC5wdXNoKHUpLHUrPWwsZC5wdXNoKHMpLHMrPWE7dC50aW1lcz1fKHQudGltZXMsZSxoKSx0LnZhbHVlcz1fKHQudmFsdWVzLGUsZCl9fX19LGMucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpjLGdldFByZXZOb2RlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubm9kZVN0YWNrW3RoaXMuY3VycmVudEluZGVudC0yXX0sZ2V0Q3VycmVudE5vZGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ub2RlU3RhY2tbdGhpcy5jdXJyZW50SW5kZW50LTFdfSxnZXRDdXJyZW50UHJvcDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmN1cnJlbnRQcm9wfSxwdXNoU3RhY2s6ZnVuY3Rpb24odCl7dGhpcy5ub2RlU3RhY2sucHVzaCh0KSx0aGlzLmN1cnJlbnRJbmRlbnQrPTF9LHBvcFN0YWNrOmZ1bmN0aW9uKCl7dGhpcy5ub2RlU3RhY2sucG9wKCksdGhpcy5jdXJyZW50SW5kZW50LT0xfSxzZXRDdXJyZW50UHJvcDpmdW5jdGlvbih0LGUpe3RoaXMuY3VycmVudFByb3A9dCx0aGlzLmN1cnJlbnRQcm9wTmFtZT1lfSxwYXJzZTpmdW5jdGlvbih0KXt0aGlzLmN1cnJlbnRJbmRlbnQ9MCx0aGlzLmFsbE5vZGVzPW5ldyBoLHRoaXMubm9kZVN0YWNrPVtdLHRoaXMuY3VycmVudFByb3A9W10sdGhpcy5jdXJyZW50UHJvcE5hbWU9XCJcIjt2YXIgZT10aGlzLG49dC5zcGxpdCgvW1xcclxcbl0rLyk7cmV0dXJuIG4uZm9yRWFjaCgoZnVuY3Rpb24odCxyKXt2YXIgaT10Lm1hdGNoKC9eW1xcc1xcdF0qOy8pLG89dC5tYXRjaCgvXltcXHNcXHRdKiQvKTtpZighaSYmIW8pe3ZhciBhPXQubWF0Y2goXCJeXFxcXHR7XCIrZS5jdXJyZW50SW5kZW50K1wifShcXFxcdyspOiguKil7XCIsXCJcIikscz10Lm1hdGNoKFwiXlxcXFx0e1wiK2UuY3VycmVudEluZGVudCtcIn0oXFxcXHcrKTpbXFxcXHNcXFxcdFxcXFxyXFxcXG5dKC4qKVwiKSxjPXQubWF0Y2goXCJeXFxcXHR7XCIrKGUuY3VycmVudEluZGVudC0xKStcIn19XCIpO2E/ZS5wYXJzZU5vZGVCZWdpbih0LGEpOnM/ZS5wYXJzZU5vZGVQcm9wZXJ0eSh0LHMsblsrK3JdKTpjP2UucG9wU3RhY2soKTp0Lm1hdGNoKC9eW15cXHNcXHR9XS8pJiZlLnBhcnNlTm9kZVByb3BlcnR5Q29udGludWVkKHQpfX0pKSx0aGlzLmFsbE5vZGVzfSxwYXJzZU5vZGVCZWdpbjpmdW5jdGlvbih0LGUpe3ZhciBuPWVbMV0udHJpbSgpLnJlcGxhY2UoL15cIi8sXCJcIikucmVwbGFjZSgvXCIkLyxcIlwiKSxyPWVbMl0uc3BsaXQoXCIsXCIpLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIHQudHJpbSgpLnJlcGxhY2UoL15cIi8sXCJcIikucmVwbGFjZSgvXCIkLyxcIlwiKX0pKSxpPXtuYW1lOm59LG89dGhpcy5wYXJzZU5vZGVBdHRyKHIpLGE9dGhpcy5nZXRDdXJyZW50Tm9kZSgpOzA9PT10aGlzLmN1cnJlbnRJbmRlbnQ/dGhpcy5hbGxOb2Rlcy5hZGQobixpKTpuIGluIGE/KFwiUG9zZU5vZGVcIj09PW4/YS5Qb3NlTm9kZS5wdXNoKGkpOnZvaWQgMCE9PWFbbl0uaWQmJihhW25dPXt9LGFbbl1bYVtuXS5pZF09YVtuXSksXCJcIiE9PW8uaWQmJihhW25dW28uaWRdPWkpKTpcIm51bWJlclwiPT10eXBlb2Ygby5pZD8oYVtuXT17fSxhW25dW28uaWRdPWkpOlwiUHJvcGVydGllczcwXCIhPT1uJiYoYVtuXT1cIlBvc2VOb2RlXCI9PT1uP1tpXTppKSxcIm51bWJlclwiPT10eXBlb2Ygby5pZCYmKGkuaWQ9by5pZCksXCJcIiE9PW8ubmFtZSYmKGkuYXR0ck5hbWU9by5uYW1lKSxcIlwiIT09by50eXBlJiYoaS5hdHRyVHlwZT1vLnR5cGUpLHRoaXMucHVzaFN0YWNrKGkpfSxwYXJzZU5vZGVBdHRyOmZ1bmN0aW9uKHQpe3ZhciBlPXRbMF07XCJcIiE9PXRbMF0mJihlPXBhcnNlSW50KHRbMF0pLGlzTmFOKGUpJiYoZT10WzBdKSk7dmFyIG49XCJcIixyPVwiXCI7cmV0dXJuIHQubGVuZ3RoPjEmJihuPXRbMV0ucmVwbGFjZSgvXihcXHcrKTo6LyxcIlwiKSxyPXRbMl0pLHtpZDplLG5hbWU6bix0eXBlOnJ9fSxwYXJzZU5vZGVQcm9wZXJ0eTpmdW5jdGlvbih0LGUsbil7dmFyIHI9ZVsxXS5yZXBsYWNlKC9eXCIvLFwiXCIpLnJlcGxhY2UoL1wiJC8sXCJcIikudHJpbSgpLGk9ZVsyXS5yZXBsYWNlKC9eXCIvLFwiXCIpLnJlcGxhY2UoL1wiJC8sXCJcIikudHJpbSgpO1wiQ29udGVudFwiPT09ciYmXCIsXCI9PT1pJiYoaT1uLnJlcGxhY2UoL1wiL2csXCJcIikucmVwbGFjZSgvLCQvLFwiXCIpLnRyaW0oKSk7dmFyIG89dGhpcy5nZXRDdXJyZW50Tm9kZSgpO2lmKFwiUHJvcGVydGllczcwXCIhPT1vLm5hbWUpe2lmKFwiQ1wiPT09cil7dmFyIGE9aS5zcGxpdChcIixcIikuc2xpY2UoMSkscz1wYXJzZUludChhWzBdKSxjPXBhcnNlSW50KGFbMV0pLGw9aS5zcGxpdChcIixcIikuc2xpY2UoMyk7cj1cImNvbm5lY3Rpb25zXCIsZnVuY3Rpb24odCxlKXtmb3IodmFyIG49MCxyPXQubGVuZ3RoLGk9ZS5sZW5ndGg7bjxpO24rKyxyKyspdFtyXT1lW25dfShpPVtzLGNdLGw9bC5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiB0LnRyaW0oKS5yZXBsYWNlKC9eXCIvLFwiXCIpfSkpKSx2b2lkIDA9PT1vW3JdJiYob1tyXT1bXSl9XCJOb2RlXCI9PT1yJiYoby5pZD1pKSxyIGluIG8mJkFycmF5LmlzQXJyYXkob1tyXSk/b1tyXS5wdXNoKGkpOlwiYVwiIT09cj9vW3JdPWk6by5hPWksdGhpcy5zZXRDdXJyZW50UHJvcChvLHIpLFwiYVwiPT09ciYmXCIsXCIhPT1pLnNsaWNlKC0xKSYmKG8uYT1iKGkpKX1lbHNlIHRoaXMucGFyc2VOb2RlU3BlY2lhbFByb3BlcnR5KHQscixpKX0scGFyc2VOb2RlUHJvcGVydHlDb250aW51ZWQ6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5nZXRDdXJyZW50Tm9kZSgpO2UuYSs9dCxcIixcIiE9PXQuc2xpY2UoLTEpJiYoZS5hPWIoZS5hKSl9LHBhcnNlTm9kZVNwZWNpYWxQcm9wZXJ0eTpmdW5jdGlvbih0LGUsbil7dmFyIHI9bi5zcGxpdCgnXCIsJykubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gdC50cmltKCkucmVwbGFjZSgvXlxcXCIvLFwiXCIpLnJlcGxhY2UoL1xccy8sXCJfXCIpfSkpLGk9clswXSxvPXJbMV0sYT1yWzJdLHM9clszXSxjPXJbNF07c3dpdGNoKG8pe2Nhc2VcImludFwiOmNhc2VcImVudW1cIjpjYXNlXCJib29sXCI6Y2FzZVwiVUxvbmdMb25nXCI6Y2FzZVwiZG91YmxlXCI6Y2FzZVwiTnVtYmVyXCI6Y2FzZVwiRmllbGRPZlZpZXdcIjpjPXBhcnNlRmxvYXQoYyk7YnJlYWs7Y2FzZVwiQ29sb3JcIjpjYXNlXCJDb2xvclJHQlwiOmNhc2VcIlZlY3RvcjNEXCI6Y2FzZVwiTGNsX1RyYW5zbGF0aW9uXCI6Y2FzZVwiTGNsX1JvdGF0aW9uXCI6Y2FzZVwiTGNsX1NjYWxpbmdcIjpjPWIoYyl9dGhpcy5nZXRQcmV2Tm9kZSgpW2ldPXt0eXBlOm8sdHlwZTI6YSxmbGFnOnMsdmFsdWU6Y30sdGhpcy5zZXRDdXJyZW50UHJvcCh0aGlzLmdldFByZXZOb2RlKCksaSl9fSxsLnByb3RvdHlwZT17Y29uc3RydWN0b3I6bCxwYXJzZTpmdW5jdGlvbih0KXt2YXIgZT1uZXcgdSh0KTtlLnNraXAoMjMpO3ZhciBuPWUuZ2V0VWludDMyKCk7aWYobjw2NDAwKXRocm93IG5ldyBFcnJvcihcIlRIUkVFLkZCWExvYWRlcjogRkJYIHZlcnNpb24gbm90IHN1cHBvcnRlZCwgRmlsZVZlcnNpb246IFwiK24pO2Zvcih2YXIgcj1uZXcgaDshdGhpcy5lbmRPZkNvbnRlbnQoZSk7KXt2YXIgaT10aGlzLnBhcnNlTm9kZShlLG4pO251bGwhPT1pJiZyLmFkZChpLm5hbWUsaSl9cmV0dXJuIHJ9LGVuZE9mQ29udGVudDpmdW5jdGlvbih0KXtyZXR1cm4gdC5zaXplKCklMTY9PTA/KHQuZ2V0T2Zmc2V0KCkrMTYwKzE2Ji0xNik+PXQuc2l6ZSgpOnQuZ2V0T2Zmc2V0KCkrMTYwKzE2Pj10LnNpemUoKX0scGFyc2VOb2RlOmZ1bmN0aW9uKHQsZSl7dmFyIG49e30scj1lPj03NTAwP3QuZ2V0VWludDY0KCk6dC5nZXRVaW50MzIoKSxpPWU+PTc1MDA/dC5nZXRVaW50NjQoKTp0LmdldFVpbnQzMigpO2U+PTc1MDA/dC5nZXRVaW50NjQoKTp0LmdldFVpbnQzMigpO3ZhciBvPXQuZ2V0VWludDgoKSxhPXQuZ2V0U3RyaW5nKG8pO2lmKDA9PT1yKXJldHVybiBudWxsO2Zvcih2YXIgcz1bXSxjPTA7YzxpO2MrKylzLnB1c2godGhpcy5wYXJzZVByb3BlcnR5KHQpKTt2YXIgbD1zLmxlbmd0aD4wP3NbMF06XCJcIix1PXMubGVuZ3RoPjE/c1sxXTpcIlwiLGg9cy5sZW5ndGg+Mj9zWzJdOlwiXCI7Zm9yKG4uc2luZ2xlUHJvcGVydHk9MT09PWkmJnQuZ2V0T2Zmc2V0KCk9PT1yO3I+dC5nZXRPZmZzZXQoKTspe3ZhciBkPXRoaXMucGFyc2VOb2RlKHQsZSk7bnVsbCE9PWQmJnRoaXMucGFyc2VTdWJOb2RlKGEsbixkKX1yZXR1cm4gbi5wcm9wZXJ0eUxpc3Q9cyxcIm51bWJlclwiPT10eXBlb2YgbCYmKG4uaWQ9bCksXCJcIiE9PXUmJihuLmF0dHJOYW1lPXUpLFwiXCIhPT1oJiYobi5hdHRyVHlwZT1oKSxcIlwiIT09YSYmKG4ubmFtZT1hKSxufSxwYXJzZVN1Yk5vZGU6ZnVuY3Rpb24odCxlLG4pe2lmKCEwPT09bi5zaW5nbGVQcm9wZXJ0eSl7dmFyIHI9bi5wcm9wZXJ0eUxpc3RbMF07QXJyYXkuaXNBcnJheShyKT8oZVtuLm5hbWVdPW4sbi5hPXIpOmVbbi5uYW1lXT1yfWVsc2UgaWYoXCJDb25uZWN0aW9uc1wiPT09dCYmXCJDXCI9PT1uLm5hbWUpe3ZhciBpPVtdO24ucHJvcGVydHlMaXN0LmZvckVhY2goKGZ1bmN0aW9uKHQsZSl7MCE9PWUmJmkucHVzaCh0KX0pKSx2b2lkIDA9PT1lLmNvbm5lY3Rpb25zJiYoZS5jb25uZWN0aW9ucz1bXSksZS5jb25uZWN0aW9ucy5wdXNoKGkpfWVsc2UgaWYoXCJQcm9wZXJ0aWVzNzBcIj09PW4ubmFtZSl7T2JqZWN0LmtleXMobikuZm9yRWFjaCgoZnVuY3Rpb24odCl7ZVt0XT1uW3RdfSkpfWVsc2UgaWYoXCJQcm9wZXJ0aWVzNzBcIj09PXQmJlwiUFwiPT09bi5uYW1lKXt2YXIgbyxhPW4ucHJvcGVydHlMaXN0WzBdLHM9bi5wcm9wZXJ0eUxpc3RbMV0sYz1uLnByb3BlcnR5TGlzdFsyXSxsPW4ucHJvcGVydHlMaXN0WzNdOzA9PT1hLmluZGV4T2YoXCJMY2wgXCIpJiYoYT1hLnJlcGxhY2UoXCJMY2wgXCIsXCJMY2xfXCIpKSwwPT09cy5pbmRleE9mKFwiTGNsIFwiKSYmKHM9cy5yZXBsYWNlKFwiTGNsIFwiLFwiTGNsX1wiKSksbz1cIkNvbG9yXCI9PT1zfHxcIkNvbG9yUkdCXCI9PT1zfHxcIlZlY3RvclwiPT09c3x8XCJWZWN0b3IzRFwiPT09c3x8MD09PXMuaW5kZXhPZihcIkxjbF9cIik/W24ucHJvcGVydHlMaXN0WzRdLG4ucHJvcGVydHlMaXN0WzVdLG4ucHJvcGVydHlMaXN0WzZdXTpuLnByb3BlcnR5TGlzdFs0XSxlW2FdPXt0eXBlOnMsdHlwZTI6YyxmbGFnOmwsdmFsdWU6b319ZWxzZSB2b2lkIDA9PT1lW24ubmFtZV0/XCJudW1iZXJcIj09dHlwZW9mIG4uaWQ/KGVbbi5uYW1lXT17fSxlW24ubmFtZV1bbi5pZF09bik6ZVtuLm5hbWVdPW46XCJQb3NlTm9kZVwiPT09bi5uYW1lPyhBcnJheS5pc0FycmF5KGVbbi5uYW1lXSl8fChlW24ubmFtZV09W2Vbbi5uYW1lXV0pLGVbbi5uYW1lXS5wdXNoKG4pKTp2b2lkIDA9PT1lW24ubmFtZV1bbi5pZF0mJihlW24ubmFtZV1bbi5pZF09bil9LHBhcnNlUHJvcGVydHk6ZnVuY3Rpb24odCl7dmFyIGU9dC5nZXRTdHJpbmcoMSk7c3dpdGNoKGUpe2Nhc2VcIkNcIjpyZXR1cm4gdC5nZXRCb29sZWFuKCk7Y2FzZVwiRFwiOnJldHVybiB0LmdldEZsb2F0NjQoKTtjYXNlXCJGXCI6cmV0dXJuIHQuZ2V0RmxvYXQzMigpO2Nhc2VcIklcIjpyZXR1cm4gdC5nZXRJbnQzMigpO2Nhc2VcIkxcIjpyZXR1cm4gdC5nZXRJbnQ2NCgpO2Nhc2VcIlJcIjp2YXIgbj10LmdldFVpbnQzMigpO3JldHVybiB0LmdldEFycmF5QnVmZmVyKG4pO2Nhc2VcIlNcIjpuPXQuZ2V0VWludDMyKCk7cmV0dXJuIHQuZ2V0U3RyaW5nKG4pO2Nhc2VcIllcIjpyZXR1cm4gdC5nZXRJbnQxNigpO2Nhc2VcImJcIjpjYXNlXCJjXCI6Y2FzZVwiZFwiOmNhc2VcImZcIjpjYXNlXCJpXCI6Y2FzZVwibFwiOnZhciByPXQuZ2V0VWludDMyKCksaT10LmdldFVpbnQzMigpLG89dC5nZXRVaW50MzIoKTtpZigwPT09aSlzd2l0Y2goZSl7Y2FzZVwiYlwiOmNhc2VcImNcIjpyZXR1cm4gdC5nZXRCb29sZWFuQXJyYXkocik7Y2FzZVwiZFwiOnJldHVybiB0LmdldEZsb2F0NjRBcnJheShyKTtjYXNlXCJmXCI6cmV0dXJuIHQuZ2V0RmxvYXQzMkFycmF5KHIpO2Nhc2VcImlcIjpyZXR1cm4gdC5nZXRJbnQzMkFycmF5KHIpO2Nhc2VcImxcIjpyZXR1cm4gdC5nZXRJbnQ2NEFycmF5KHIpfXZvaWQgMD09PUcmJmNvbnNvbGUuZXJyb3IoXCJUSFJFRS5GQlhMb2FkZXI6IEV4dGVybmFsIGxpYnJhcnkgSW5mbGF0ZS5taW4uanMgcmVxdWlyZWQsIG9idGFpbiBvciBpbXBvcnQgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vaW1heWEvemxpYi5qc1wiKTt2YXIgYT1uZXcgdShuZXcgRyhuZXcgVWludDhBcnJheSh0LmdldEFycmF5QnVmZmVyKG8pKSkuZGVjb21wcmVzcygpLmJ1ZmZlcik7c3dpdGNoKGUpe2Nhc2VcImJcIjpjYXNlXCJjXCI6cmV0dXJuIGEuZ2V0Qm9vbGVhbkFycmF5KHIpO2Nhc2VcImRcIjpyZXR1cm4gYS5nZXRGbG9hdDY0QXJyYXkocik7Y2FzZVwiZlwiOnJldHVybiBhLmdldEZsb2F0MzJBcnJheShyKTtjYXNlXCJpXCI6cmV0dXJuIGEuZ2V0SW50MzJBcnJheShyKTtjYXNlXCJsXCI6cmV0dXJuIGEuZ2V0SW50NjRBcnJheShyKX1kZWZhdWx0OnRocm93IG5ldyBFcnJvcihcIlRIUkVFLkZCWExvYWRlcjogVW5rbm93biBwcm9wZXJ0eSB0eXBlIFwiK2UpfX19LHUucHJvdG90eXBlPXtjb25zdHJ1Y3Rvcjp1LGdldE9mZnNldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm9mZnNldH0sc2l6ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmR2LmJ1ZmZlci5ieXRlTGVuZ3RofSxza2lwOmZ1bmN0aW9uKHQpe3RoaXMub2Zmc2V0Kz10fSxnZXRCb29sZWFuOmZ1bmN0aW9uKCl7cmV0dXJuIDE9PSgxJnRoaXMuZ2V0VWludDgoKSl9LGdldEJvb2xlYW5BcnJheTpmdW5jdGlvbih0KXtmb3IodmFyIGU9W10sbj0wO248dDtuKyspZS5wdXNoKHRoaXMuZ2V0Qm9vbGVhbigpKTtyZXR1cm4gZX0sZ2V0VWludDg6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmR2LmdldFVpbnQ4KHRoaXMub2Zmc2V0KTtyZXR1cm4gdGhpcy5vZmZzZXQrPTEsdH0sZ2V0SW50MTY6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmR2LmdldEludDE2KHRoaXMub2Zmc2V0LHRoaXMubGl0dGxlRW5kaWFuKTtyZXR1cm4gdGhpcy5vZmZzZXQrPTIsdH0sZ2V0SW50MzI6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmR2LmdldEludDMyKHRoaXMub2Zmc2V0LHRoaXMubGl0dGxlRW5kaWFuKTtyZXR1cm4gdGhpcy5vZmZzZXQrPTQsdH0sZ2V0SW50MzJBcnJheTpmdW5jdGlvbih0KXtmb3IodmFyIGU9W10sbj0wO248dDtuKyspZS5wdXNoKHRoaXMuZ2V0SW50MzIoKSk7cmV0dXJuIGV9LGdldFVpbnQzMjpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZHYuZ2V0VWludDMyKHRoaXMub2Zmc2V0LHRoaXMubGl0dGxlRW5kaWFuKTtyZXR1cm4gdGhpcy5vZmZzZXQrPTQsdH0sZ2V0SW50NjQ6ZnVuY3Rpb24oKXt2YXIgdCxlO3JldHVybiB0aGlzLmxpdHRsZUVuZGlhbj8odD10aGlzLmdldFVpbnQzMigpLGU9dGhpcy5nZXRVaW50MzIoKSk6KGU9dGhpcy5nZXRVaW50MzIoKSx0PXRoaXMuZ2V0VWludDMyKCkpLDIxNDc0ODM2NDgmZT8oZT00Mjk0OTY3Mjk1Jn5lLDQyOTQ5NjcyOTU9PT0odD00Mjk0OTY3Mjk1Jn50KSYmKGU9ZSsxJjQyOTQ5NjcyOTUpLC0oNDI5NDk2NzI5NiplKyh0PXQrMSY0Mjk0OTY3Mjk1KSkpOjQyOTQ5NjcyOTYqZSt0fSxnZXRJbnQ2NEFycmF5OmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXSxuPTA7bjx0O24rKyllLnB1c2godGhpcy5nZXRJbnQ2NCgpKTtyZXR1cm4gZX0sZ2V0VWludDY0OmZ1bmN0aW9uKCl7dmFyIHQsZTtyZXR1cm4gdGhpcy5saXR0bGVFbmRpYW4/KHQ9dGhpcy5nZXRVaW50MzIoKSxlPXRoaXMuZ2V0VWludDMyKCkpOihlPXRoaXMuZ2V0VWludDMyKCksdD10aGlzLmdldFVpbnQzMigpKSw0Mjk0OTY3Mjk2KmUrdH0sZ2V0RmxvYXQzMjpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZHYuZ2V0RmxvYXQzMih0aGlzLm9mZnNldCx0aGlzLmxpdHRsZUVuZGlhbik7cmV0dXJuIHRoaXMub2Zmc2V0Kz00LHR9LGdldEZsb2F0MzJBcnJheTpmdW5jdGlvbih0KXtmb3IodmFyIGU9W10sbj0wO248dDtuKyspZS5wdXNoKHRoaXMuZ2V0RmxvYXQzMigpKTtyZXR1cm4gZX0sZ2V0RmxvYXQ2NDpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZHYuZ2V0RmxvYXQ2NCh0aGlzLm9mZnNldCx0aGlzLmxpdHRsZUVuZGlhbik7cmV0dXJuIHRoaXMub2Zmc2V0Kz04LHR9LGdldEZsb2F0NjRBcnJheTpmdW5jdGlvbih0KXtmb3IodmFyIGU9W10sbj0wO248dDtuKyspZS5wdXNoKHRoaXMuZ2V0RmxvYXQ2NCgpKTtyZXR1cm4gZX0sZ2V0QXJyYXlCdWZmZXI6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5kdi5idWZmZXIuc2xpY2UodGhpcy5vZmZzZXQsdGhpcy5vZmZzZXQrdCk7cmV0dXJuIHRoaXMub2Zmc2V0Kz10LGV9LGdldFN0cmluZzpmdW5jdGlvbih0KXtmb3IodmFyIGU9W10sbj0wO248dDtuKyspZVtuXT10aGlzLmdldFVpbnQ4KCk7dmFyIGk9ZS5pbmRleE9mKDApO3JldHVybiBpPj0wJiYoZT1lLnNsaWNlKDAsaSkpLHIuTG9hZGVyVXRpbHMuZGVjb2RlVGV4dChuZXcgVWludDhBcnJheShlKSl9fSxoLnByb3RvdHlwZT17Y29uc3RydWN0b3I6aCxhZGQ6ZnVuY3Rpb24odCxlKXt0aGlzW3RdPWV9fTt2YXIgZj1bXTtmdW5jdGlvbiBtKHQsZSxuLHIpe3ZhciBpO3N3aXRjaChyLm1hcHBpbmdUeXBlKXtjYXNlXCJCeVBvbHlnb25WZXJ0ZXhcIjppPXQ7YnJlYWs7Y2FzZVwiQnlQb2x5Z29uXCI6aT1lO2JyZWFrO2Nhc2VcIkJ5VmVydGljZVwiOmk9bjticmVhaztjYXNlXCJBbGxTYW1lXCI6aT1yLmluZGljZXNbMF07YnJlYWs7ZGVmYXVsdDpjb25zb2xlLndhcm4oXCJUSFJFRS5GQlhMb2FkZXI6IHVua25vd24gYXR0cmlidXRlIG1hcHBpbmcgdHlwZSBcIityLm1hcHBpbmdUeXBlKX1cIkluZGV4VG9EaXJlY3RcIj09PXIucmVmZXJlbmNlVHlwZSYmKGk9ci5pbmRpY2VzW2ldKTt2YXIgbz1pKnIuZGF0YVNpemUsYT1vK3IuZGF0YVNpemU7cmV0dXJuIGZ1bmN0aW9uKHQsZSxuLHIpe2Zvcih2YXIgaT1uLG89MDtpPHI7aSsrLG8rKyl0W29dPWVbaV07cmV0dXJuIHR9KGYsci5idWZmZXIsbyxhKX12YXIgZz1uZXcgci5FdWxlcix2PW5ldyByLlZlY3RvcjM7ZnVuY3Rpb24geSh0KXt2YXIgZSxuPW5ldyByLk1hdHJpeDQsaT1uZXcgci5NYXRyaXg0LG89bmV3IHIuTWF0cml4NCxhPW5ldyByLk1hdHJpeDQscz1uZXcgci5NYXRyaXg0LGM9bmV3IHIuTWF0cml4NCxsPW5ldyByLk1hdHJpeDQsdT1uZXcgci5NYXRyaXg0LGg9bmV3IHIuTWF0cml4NCxkPW5ldyByLk1hdHJpeDQscD1uZXcgci5NYXRyaXg0LGY9dC5pbmhlcml0VHlwZT90LmluaGVyaXRUeXBlOjA7KHQudHJhbnNsYXRpb24mJm4uc2V0UG9zaXRpb24odi5mcm9tQXJyYXkodC50cmFuc2xhdGlvbikpLHQucHJlUm90YXRpb24pJiYoKGU9dC5wcmVSb3RhdGlvbi5tYXAoci5NYXRoVXRpbHMuZGVnVG9SYWQpKS5wdXNoKHQuZXVsZXJPcmRlciksaS5tYWtlUm90YXRpb25Gcm9tRXVsZXIoZy5mcm9tQXJyYXkoZSkpKTt0LnJvdGF0aW9uJiYoKGU9dC5yb3RhdGlvbi5tYXAoci5NYXRoVXRpbHMuZGVnVG9SYWQpKS5wdXNoKHQuZXVsZXJPcmRlciksby5tYWtlUm90YXRpb25Gcm9tRXVsZXIoZy5mcm9tQXJyYXkoZSkpKTt0LnBvc3RSb3RhdGlvbiYmKChlPXQucG9zdFJvdGF0aW9uLm1hcChyLk1hdGhVdGlscy5kZWdUb1JhZCkpLnB1c2godC5ldWxlck9yZGVyKSxhLm1ha2VSb3RhdGlvbkZyb21FdWxlcihnLmZyb21BcnJheShlKSkpO3Quc2NhbGUmJnMuc2NhbGUodi5mcm9tQXJyYXkodC5zY2FsZSkpLHQuc2NhbGluZ09mZnNldCYmbC5zZXRQb3NpdGlvbih2LmZyb21BcnJheSh0LnNjYWxpbmdPZmZzZXQpKSx0LnNjYWxpbmdQaXZvdCYmYy5zZXRQb3NpdGlvbih2LmZyb21BcnJheSh0LnNjYWxpbmdQaXZvdCkpLHQucm90YXRpb25PZmZzZXQmJnUuc2V0UG9zaXRpb24odi5mcm9tQXJyYXkodC5yb3RhdGlvbk9mZnNldCkpLHQucm90YXRpb25QaXZvdCYmaC5zZXRQb3NpdGlvbih2LmZyb21BcnJheSh0LnJvdGF0aW9uUGl2b3QpKSx0LnBhcmVudE1hdHJpeFdvcmxkJiYoZD10LnBhcmVudE1hdHJpeFdvcmxkKTt2YXIgbT1pLm11bHRpcGx5KG8pLm11bHRpcGx5KGEpLHk9bmV3IHIuTWF0cml4NDtkLmV4dHJhY3RSb3RhdGlvbih5KSwobmV3IHIuTWF0cml4NCkuY29weVBvc2l0aW9uKGQpO3ZhciB4PW5ldyByLk1hdHJpeDQ7eC5jb3B5KHkpLmludmVydCgpLm11bHRpcGx5KGQpO3ZhciBiPW5ldyByLk1hdHJpeDQ7aWYoMD09PWYpYi5jb3B5KHkpLm11bHRpcGx5KG0pLm11bHRpcGx5KHgpLm11bHRpcGx5KHMpO2Vsc2UgaWYoMT09PWYpYi5jb3B5KHkpLm11bHRpcGx5KHgpLm11bHRpcGx5KG0pLm11bHRpcGx5KHMpO2Vsc2V7dmFyIHc9bmV3IHIuTWF0cml4NDt3LmNvcHkocykuaW52ZXJ0KCk7dmFyIF89KG5ldyByLk1hdHJpeDQpLm11bHRpcGx5KHgpLm11bHRpcGx5KHcpO2IuY29weSh5KS5tdWx0aXBseShtKS5tdWx0aXBseShfKS5tdWx0aXBseShzKX12YXIgTT1uZXcgci5NYXRyaXg0O00uY29weShoKS5pbnZlcnQoKTt2YXIgUz1uZXcgci5NYXRyaXg0O1MuY29weShjKS5pbnZlcnQoKTt2YXIgVD1uZXcgci5NYXRyaXg0O1QuY29weShuKS5tdWx0aXBseSh1KS5tdWx0aXBseShoKS5tdWx0aXBseShpKS5tdWx0aXBseShvKS5tdWx0aXBseShhKS5tdWx0aXBseShNKS5tdWx0aXBseShsKS5tdWx0aXBseShjKS5tdWx0aXBseShzKS5tdWx0aXBseShTKTt2YXIgRT0obmV3IHIuTWF0cml4NCkuY29weVBvc2l0aW9uKFQpLEE9KG5ldyByLk1hdHJpeDQpLmNvcHkoZCkubXVsdGlwbHkoRSk7cmV0dXJuIHAuY29weVBvc2l0aW9uKEEpLFQ9KG5ldyByLk1hdHJpeDQpLm11bHRpcGx5KHApLm11bHRpcGx5KGIpfWZ1bmN0aW9uIHgodCl7dmFyIGU9W1wiWllYXCIsXCJZWlhcIixcIlhaWVwiLFwiWlhZXCIsXCJZWFpcIixcIlhZWlwiXTtyZXR1cm4gNj09PSh0PXR8fDApPyhjb25zb2xlLndhcm4oXCJUSFJFRS5GQlhMb2FkZXI6IHVuc3VwcG9ydGVkIEV1bGVyIE9yZGVyOiBTcGhlcmljYWwgWFlaLiBBbmltYXRpb25zIGFuZCByb3RhdGlvbnMgbWF5IGJlIGluY29ycmVjdC5cIiksZVswXSk6ZVt0XX1mdW5jdGlvbiBiKHQpe3JldHVybiB0LnNwbGl0KFwiLFwiKS5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiBwYXJzZUZsb2F0KHQpfSkpfWZ1bmN0aW9uIHcodCxlLG4pe3JldHVybiB2b2lkIDA9PT1lJiYoZT0wKSx2b2lkIDA9PT1uJiYobj10LmJ5dGVMZW5ndGgpLHIuTG9hZGVyVXRpbHMuZGVjb2RlVGV4dChuZXcgVWludDhBcnJheSh0LGUsbikpfWZ1bmN0aW9uIF8odCxlLG4pe3JldHVybiB0LnNsaWNlKDAsZSkuY29uY2F0KG4pLmNvbmNhdCh0LnNsaWNlKGUpKX1yZXR1cm4gaX0oKX0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO24ucihlKSxuLmQoZSxcIldhdGVyXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGF9KSk7dmFyIHI9bigwKSxpPWZ1bmN0aW9uKHQsZSl7ci5NZXNoLmNhbGwodGhpcyx0KSx0aGlzLnR5cGU9XCJSZWZsZWN0b3JcIjt2YXIgbj10aGlzLG89dm9pZCAwIT09KGU9ZXx8e30pLmNvbG9yP25ldyByLkNvbG9yKGUuY29sb3IpOm5ldyByLkNvbG9yKDgzNTU3MTEpLGE9ZS50ZXh0dXJlV2lkdGh8fDUxMixzPWUudGV4dHVyZUhlaWdodHx8NTEyLGM9ZS5jbGlwQmlhc3x8MCxsPWUuc2hhZGVyfHxpLlJlZmxlY3RvclNoYWRlcix1PW5ldyByLlBsYW5lLGg9bmV3IHIuVmVjdG9yMyxkPW5ldyByLlZlY3RvcjMscD1uZXcgci5WZWN0b3IzLGY9bmV3IHIuTWF0cml4NCxtPW5ldyByLlZlY3RvcjMoMCwwLC0xKSxnPW5ldyByLlZlY3RvcjQsdj1uZXcgci5WZWN0b3IzLHk9bmV3IHIuVmVjdG9yMyx4PW5ldyByLlZlY3RvcjQsYj1uZXcgci5NYXRyaXg0LHc9bmV3IHIuUGVyc3BlY3RpdmVDYW1lcmEsXz17bWluRmlsdGVyOnIuTGluZWFyRmlsdGVyLG1hZ0ZpbHRlcjpyLkxpbmVhckZpbHRlcixmb3JtYXQ6ci5SR0JGb3JtYXR9LE09bmV3IHIuV2ViR0xSZW5kZXJUYXJnZXQoYSxzLF8pO3IuTWF0aFV0aWxzLmlzUG93ZXJPZlR3byhhKSYmci5NYXRoVXRpbHMuaXNQb3dlck9mVHdvKHMpfHwoTS50ZXh0dXJlLmdlbmVyYXRlTWlwbWFwcz0hMSk7dmFyIFM9bmV3IHIuU2hhZGVyTWF0ZXJpYWwoe3VuaWZvcm1zOnIuVW5pZm9ybXNVdGlscy5jbG9uZShsLnVuaWZvcm1zKSxmcmFnbWVudFNoYWRlcjpsLmZyYWdtZW50U2hhZGVyLHZlcnRleFNoYWRlcjpsLnZlcnRleFNoYWRlcn0pO1MudW5pZm9ybXMudERpZmZ1c2UudmFsdWU9TS50ZXh0dXJlLFMudW5pZm9ybXMuY29sb3IudmFsdWU9byxTLnVuaWZvcm1zLnRleHR1cmVNYXRyaXgudmFsdWU9Yix0aGlzLm1hdGVyaWFsPVMsdGhpcy5vbkJlZm9yZVJlbmRlcj1mdW5jdGlvbih0LGUscil7aWYoZC5zZXRGcm9tTWF0cml4UG9zaXRpb24obi5tYXRyaXhXb3JsZCkscC5zZXRGcm9tTWF0cml4UG9zaXRpb24oci5tYXRyaXhXb3JsZCksZi5leHRyYWN0Um90YXRpb24obi5tYXRyaXhXb3JsZCksaC5zZXQoMCwwLDEpLGguYXBwbHlNYXRyaXg0KGYpLHYuc3ViVmVjdG9ycyhkLHApLCEodi5kb3QoaCk+MCkpe3YucmVmbGVjdChoKS5uZWdhdGUoKSx2LmFkZChkKSxmLmV4dHJhY3RSb3RhdGlvbihyLm1hdHJpeFdvcmxkKSxtLnNldCgwLDAsLTEpLG0uYXBwbHlNYXRyaXg0KGYpLG0uYWRkKHApLHkuc3ViVmVjdG9ycyhkLG0pLHkucmVmbGVjdChoKS5uZWdhdGUoKSx5LmFkZChkKSx3LnBvc2l0aW9uLmNvcHkodiksdy51cC5zZXQoMCwxLDApLHcudXAuYXBwbHlNYXRyaXg0KGYpLHcudXAucmVmbGVjdChoKSx3Lmxvb2tBdCh5KSx3LmZhcj1yLmZhcix3LnVwZGF0ZU1hdHJpeFdvcmxkKCksdy5wcm9qZWN0aW9uTWF0cml4LmNvcHkoci5wcm9qZWN0aW9uTWF0cml4KSxiLnNldCguNSwwLDAsLjUsMCwuNSwwLC41LDAsMCwuNSwuNSwwLDAsMCwxKSxiLm11bHRpcGx5KHcucHJvamVjdGlvbk1hdHJpeCksYi5tdWx0aXBseSh3Lm1hdHJpeFdvcmxkSW52ZXJzZSksYi5tdWx0aXBseShuLm1hdHJpeFdvcmxkKSx1LnNldEZyb21Ob3JtYWxBbmRDb3BsYW5hclBvaW50KGgsZCksdS5hcHBseU1hdHJpeDQody5tYXRyaXhXb3JsZEludmVyc2UpLGcuc2V0KHUubm9ybWFsLngsdS5ub3JtYWwueSx1Lm5vcm1hbC56LHUuY29uc3RhbnQpO3ZhciBpPXcucHJvamVjdGlvbk1hdHJpeDt4Lng9KE1hdGguc2lnbihnLngpK2kuZWxlbWVudHNbOF0pL2kuZWxlbWVudHNbMF0seC55PShNYXRoLnNpZ24oZy55KStpLmVsZW1lbnRzWzldKS9pLmVsZW1lbnRzWzVdLHguej0tMSx4Lnc9KDEraS5lbGVtZW50c1sxMF0pL2kuZWxlbWVudHNbMTRdLGcubXVsdGlwbHlTY2FsYXIoMi9nLmRvdCh4KSksaS5lbGVtZW50c1syXT1nLngsaS5lbGVtZW50c1s2XT1nLnksaS5lbGVtZW50c1sxMF09Zy56KzEtYyxpLmVsZW1lbnRzWzE0XT1nLncsTS50ZXh0dXJlLmVuY29kaW5nPXQub3V0cHV0RW5jb2Rpbmcsbi52aXNpYmxlPSExO3ZhciBvPXQuZ2V0UmVuZGVyVGFyZ2V0KCksYT10LnhyLmVuYWJsZWQscz10LnNoYWRvd01hcC5hdXRvVXBkYXRlO3QueHIuZW5hYmxlZD0hMSx0LnNoYWRvd01hcC5hdXRvVXBkYXRlPSExLHQuc2V0UmVuZGVyVGFyZ2V0KE0pLHQuc3RhdGUuYnVmZmVycy5kZXB0aC5zZXRNYXNrKCEwKSwhMT09PXQuYXV0b0NsZWFyJiZ0LmNsZWFyKCksdC5yZW5kZXIoZSx3KSx0LnhyLmVuYWJsZWQ9YSx0LnNoYWRvd01hcC5hdXRvVXBkYXRlPXMsdC5zZXRSZW5kZXJUYXJnZXQobyk7dmFyIGw9ci52aWV3cG9ydDt2b2lkIDAhPT1sJiZ0LnN0YXRlLnZpZXdwb3J0KGwpLG4udmlzaWJsZT0hMH19LHRoaXMuZ2V0UmVuZGVyVGFyZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIE19fTtpLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHIuTWVzaC5wcm90b3R5cGUpLGkucHJvdG90eXBlLmNvbnN0cnVjdG9yPWksaS5SZWZsZWN0b3JTaGFkZXI9e3VuaWZvcm1zOntjb2xvcjp7dmFsdWU6bnVsbH0sdERpZmZ1c2U6e3ZhbHVlOm51bGx9LHRleHR1cmVNYXRyaXg6e3ZhbHVlOm51bGx9fSx2ZXJ0ZXhTaGFkZXI6W1widW5pZm9ybSBtYXQ0IHRleHR1cmVNYXRyaXg7XCIsXCJ2YXJ5aW5nIHZlYzQgdlV2O1wiLFwidm9pZCBtYWluKCkge1wiLFwiXFx0dlV2ID0gdGV4dHVyZU1hdHJpeCAqIHZlYzQoIHBvc2l0aW9uLCAxLjAgKTtcIixcIlxcdGdsX1Bvc2l0aW9uID0gcHJvamVjdGlvbk1hdHJpeCAqIG1vZGVsVmlld01hdHJpeCAqIHZlYzQoIHBvc2l0aW9uLCAxLjAgKTtcIixcIn1cIl0uam9pbihcIlxcblwiKSxmcmFnbWVudFNoYWRlcjpbXCJ1bmlmb3JtIHZlYzMgY29sb3I7XCIsXCJ1bmlmb3JtIHNhbXBsZXIyRCB0RGlmZnVzZTtcIixcInZhcnlpbmcgdmVjNCB2VXY7XCIsXCJmbG9hdCBibGVuZE92ZXJsYXkoIGZsb2F0IGJhc2UsIGZsb2F0IGJsZW5kICkge1wiLFwiXFx0cmV0dXJuKCBiYXNlIDwgMC41ID8gKCAyLjAgKiBiYXNlICogYmxlbmQgKSA6ICggMS4wIC0gMi4wICogKCAxLjAgLSBiYXNlICkgKiAoIDEuMCAtIGJsZW5kICkgKSApO1wiLFwifVwiLFwidmVjMyBibGVuZE92ZXJsYXkoIHZlYzMgYmFzZSwgdmVjMyBibGVuZCApIHtcIixcIlxcdHJldHVybiB2ZWMzKCBibGVuZE92ZXJsYXkoIGJhc2UuciwgYmxlbmQuciApLCBibGVuZE92ZXJsYXkoIGJhc2UuZywgYmxlbmQuZyApLCBibGVuZE92ZXJsYXkoIGJhc2UuYiwgYmxlbmQuYiApICk7XCIsXCJ9XCIsXCJ2b2lkIG1haW4oKSB7XCIsXCJcXHR2ZWM0IGJhc2UgPSB0ZXh0dXJlMkRQcm9qKCB0RGlmZnVzZSwgdlV2ICk7XCIsXCJcXHRnbF9GcmFnQ29sb3IgPSB2ZWM0KCBibGVuZE92ZXJsYXkoIGJhc2UucmdiLCBjb2xvciApLCAxLjAgKTtcIixcIn1cIl0uam9pbihcIlxcblwiKX07dmFyIG89ZnVuY3Rpb24odCxlKXtyLk1lc2guY2FsbCh0aGlzLHQpLHRoaXMudHlwZT1cIlJlZnJhY3RvclwiO3ZhciBuPXRoaXMsaT12b2lkIDAhPT0oZT1lfHx7fSkuY29sb3I/bmV3IHIuQ29sb3IoZS5jb2xvcik6bmV3IHIuQ29sb3IoODM1NTcxMSksYT1lLnRleHR1cmVXaWR0aHx8NTEyLHM9ZS50ZXh0dXJlSGVpZ2h0fHw1MTIsYz1lLmNsaXBCaWFzfHwwLGw9ZS5zaGFkZXJ8fG8uUmVmcmFjdG9yU2hhZGVyLHU9bmV3IHIuUGVyc3BlY3RpdmVDYW1lcmE7dS5tYXRyaXhBdXRvVXBkYXRlPSExLHUudXNlckRhdGEucmVmcmFjdG9yPSEwO3ZhciBoPW5ldyByLlBsYW5lLGQ9bmV3IHIuTWF0cml4NCxwPXttaW5GaWx0ZXI6ci5MaW5lYXJGaWx0ZXIsbWFnRmlsdGVyOnIuTGluZWFyRmlsdGVyLGZvcm1hdDpyLlJHQkZvcm1hdH0sZj1uZXcgci5XZWJHTFJlbmRlclRhcmdldChhLHMscCk7ci5NYXRoVXRpbHMuaXNQb3dlck9mVHdvKGEpJiZyLk1hdGhVdGlscy5pc1Bvd2VyT2ZUd28ocyl8fChmLnRleHR1cmUuZ2VuZXJhdGVNaXBtYXBzPSExKSx0aGlzLm1hdGVyaWFsPW5ldyByLlNoYWRlck1hdGVyaWFsKHt1bmlmb3JtczpyLlVuaWZvcm1zVXRpbHMuY2xvbmUobC51bmlmb3JtcyksdmVydGV4U2hhZGVyOmwudmVydGV4U2hhZGVyLGZyYWdtZW50U2hhZGVyOmwuZnJhZ21lbnRTaGFkZXIsdHJhbnNwYXJlbnQ6ITB9KSx0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLmNvbG9yLnZhbHVlPWksdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy50RGlmZnVzZS52YWx1ZT1mLnRleHR1cmUsdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy50ZXh0dXJlTWF0cml4LnZhbHVlPWQ7dmFyIG0sZyx2LHkseCxiLHcsXyxNPShtPW5ldyByLlZlY3RvcjMsZz1uZXcgci5WZWN0b3IzLHY9bmV3IHIuTWF0cml4NCx5PW5ldyByLlZlY3RvcjMseD1uZXcgci5WZWN0b3IzLGZ1bmN0aW9uKHQpe3JldHVybiBtLnNldEZyb21NYXRyaXhQb3NpdGlvbihuLm1hdHJpeFdvcmxkKSxnLnNldEZyb21NYXRyaXhQb3NpdGlvbih0Lm1hdHJpeFdvcmxkKSx5LnN1YlZlY3RvcnMobSxnKSx2LmV4dHJhY3RSb3RhdGlvbihuLm1hdHJpeFdvcmxkKSx4LnNldCgwLDAsMSkseC5hcHBseU1hdHJpeDQodikseS5kb3QoeCk8MH0pLFM9ZnVuY3Rpb24oKXt2YXIgdD1uZXcgci5WZWN0b3IzLGU9bmV3IHIuVmVjdG9yMyxpPW5ldyByLlF1YXRlcm5pb24sbz1uZXcgci5WZWN0b3IzO3JldHVybiBmdW5jdGlvbigpe24ubWF0cml4V29ybGQuZGVjb21wb3NlKGUsaSxvKSx0LnNldCgwLDAsMSkuYXBwbHlRdWF0ZXJuaW9uKGkpLm5vcm1hbGl6ZSgpLHQubmVnYXRlKCksaC5zZXRGcm9tTm9ybWFsQW5kQ29wbGFuYXJQb2ludCh0LGUpfX0oKSxUPShiPW5ldyByLlBsYW5lLHc9bmV3IHIuVmVjdG9yNCxfPW5ldyByLlZlY3RvcjQsZnVuY3Rpb24odCl7dS5tYXRyaXhXb3JsZC5jb3B5KHQubWF0cml4V29ybGQpLHUubWF0cml4V29ybGRJbnZlcnNlLmNvcHkodS5tYXRyaXhXb3JsZCkuaW52ZXJ0KCksdS5wcm9qZWN0aW9uTWF0cml4LmNvcHkodC5wcm9qZWN0aW9uTWF0cml4KSx1LmZhcj10LmZhcixiLmNvcHkoaCksYi5hcHBseU1hdHJpeDQodS5tYXRyaXhXb3JsZEludmVyc2UpLHcuc2V0KGIubm9ybWFsLngsYi5ub3JtYWwueSxiLm5vcm1hbC56LGIuY29uc3RhbnQpO3ZhciBlPXUucHJvamVjdGlvbk1hdHJpeDtfLng9KE1hdGguc2lnbih3LngpK2UuZWxlbWVudHNbOF0pL2UuZWxlbWVudHNbMF0sXy55PShNYXRoLnNpZ24ody55KStlLmVsZW1lbnRzWzldKS9lLmVsZW1lbnRzWzVdLF8uej0tMSxfLnc9KDErZS5lbGVtZW50c1sxMF0pL2UuZWxlbWVudHNbMTRdLHcubXVsdGlwbHlTY2FsYXIoMi93LmRvdChfKSksZS5lbGVtZW50c1syXT13LngsZS5lbGVtZW50c1s2XT13LnksZS5lbGVtZW50c1sxMF09dy56KzEtYyxlLmVsZW1lbnRzWzE0XT13Lnd9KTt0aGlzLm9uQmVmb3JlUmVuZGVyPWZ1bmN0aW9uKHQsZSxyKXtmLnRleHR1cmUuZW5jb2Rpbmc9dC5vdXRwdXRFbmNvZGluZywhMCE9PXIudXNlckRhdGEucmVmcmFjdG9yJiYhMCE9IU0ocikmJihTKCksZnVuY3Rpb24odCl7ZC5zZXQoLjUsMCwwLC41LDAsLjUsMCwuNSwwLDAsLjUsLjUsMCwwLDAsMSksZC5tdWx0aXBseSh0LnByb2plY3Rpb25NYXRyaXgpLGQubXVsdGlwbHkodC5tYXRyaXhXb3JsZEludmVyc2UpLGQubXVsdGlwbHkobi5tYXRyaXhXb3JsZCl9KHIpLFQociksZnVuY3Rpb24odCxlLHIpe24udmlzaWJsZT0hMTt2YXIgaT10LmdldFJlbmRlclRhcmdldCgpLG89dC54ci5lbmFibGVkLGE9dC5zaGFkb3dNYXAuYXV0b1VwZGF0ZTt0LnhyLmVuYWJsZWQ9ITEsdC5zaGFkb3dNYXAuYXV0b1VwZGF0ZT0hMSx0LnNldFJlbmRlclRhcmdldChmKSwhMT09PXQuYXV0b0NsZWFyJiZ0LmNsZWFyKCksdC5yZW5kZXIoZSx1KSx0LnhyLmVuYWJsZWQ9byx0LnNoYWRvd01hcC5hdXRvVXBkYXRlPWEsdC5zZXRSZW5kZXJUYXJnZXQoaSk7dmFyIHM9ci52aWV3cG9ydDt2b2lkIDAhPT1zJiZ0LnN0YXRlLnZpZXdwb3J0KHMpLG4udmlzaWJsZT0hMH0odCxlLHIpKX0sdGhpcy5nZXRSZW5kZXJUYXJnZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gZn19O28ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoci5NZXNoLnByb3RvdHlwZSksby5wcm90b3R5cGUuY29uc3RydWN0b3I9byxvLlJlZnJhY3RvclNoYWRlcj17dW5pZm9ybXM6e2NvbG9yOnt2YWx1ZTpudWxsfSx0RGlmZnVzZTp7dmFsdWU6bnVsbH0sdGV4dHVyZU1hdHJpeDp7dmFsdWU6bnVsbH19LHZlcnRleFNoYWRlcjpbXCJ1bmlmb3JtIG1hdDQgdGV4dHVyZU1hdHJpeDtcIixcInZhcnlpbmcgdmVjNCB2VXY7XCIsXCJ2b2lkIG1haW4oKSB7XCIsXCJcXHR2VXYgPSB0ZXh0dXJlTWF0cml4ICogdmVjNCggcG9zaXRpb24sIDEuMCApO1wiLFwiXFx0Z2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogbW9kZWxWaWV3TWF0cml4ICogdmVjNCggcG9zaXRpb24sIDEuMCApO1wiLFwifVwiXS5qb2luKFwiXFxuXCIpLGZyYWdtZW50U2hhZGVyOltcInVuaWZvcm0gdmVjMyBjb2xvcjtcIixcInVuaWZvcm0gc2FtcGxlcjJEIHREaWZmdXNlO1wiLFwidmFyeWluZyB2ZWM0IHZVdjtcIixcImZsb2F0IGJsZW5kT3ZlcmxheSggZmxvYXQgYmFzZSwgZmxvYXQgYmxlbmQgKSB7XCIsXCJcXHRyZXR1cm4oIGJhc2UgPCAwLjUgPyAoIDIuMCAqIGJhc2UgKiBibGVuZCApIDogKCAxLjAgLSAyLjAgKiAoIDEuMCAtIGJhc2UgKSAqICggMS4wIC0gYmxlbmQgKSApICk7XCIsXCJ9XCIsXCJ2ZWMzIGJsZW5kT3ZlcmxheSggdmVjMyBiYXNlLCB2ZWMzIGJsZW5kICkge1wiLFwiXFx0cmV0dXJuIHZlYzMoIGJsZW5kT3ZlcmxheSggYmFzZS5yLCBibGVuZC5yICksIGJsZW5kT3ZlcmxheSggYmFzZS5nLCBibGVuZC5nICksIGJsZW5kT3ZlcmxheSggYmFzZS5iLCBibGVuZC5iICkgKTtcIixcIn1cIixcInZvaWQgbWFpbigpIHtcIixcIlxcdHZlYzQgYmFzZSA9IHRleHR1cmUyRFByb2ooIHREaWZmdXNlLCB2VXYgKTtcIixcIlxcdGdsX0ZyYWdDb2xvciA9IHZlYzQoIGJsZW5kT3ZlcmxheSggYmFzZS5yZ2IsIGNvbG9yICksIDEuMCApO1wiLFwifVwiXS5qb2luKFwiXFxuXCIpfTt2YXIgYT1mdW5jdGlvbih0LGUpe3IuTWVzaC5jYWxsKHRoaXMsdCksdGhpcy50eXBlPVwiV2F0ZXJcIjt2YXIgbj10aGlzLHM9dm9pZCAwIT09KGU9ZXx8e30pLmNvbG9yP25ldyByLkNvbG9yKGUuY29sb3IpOm5ldyByLkNvbG9yKDE2Nzc3MjE1KSxjPWUudGV4dHVyZVdpZHRofHw1MTIsbD1lLnRleHR1cmVIZWlnaHR8fDUxMix1PWUuY2xpcEJpYXN8fDAsaD1lLmZsb3dEaXJlY3Rpb258fG5ldyByLlZlY3RvcjIoMSwwKSxkPWUuZmxvd1NwZWVkfHwuMDMscD1lLnJlZmxlY3Rpdml0eXx8LjAyLGY9ZS5zY2FsZXx8MSxtPWUuc2hhZGVyfHxhLldhdGVyU2hhZGVyLGc9dm9pZCAwIT09ZS5lbmNvZGluZz9lLmVuY29kaW5nOnIuTGluZWFyRW5jb2Rpbmcsdj1uZXcgci5UZXh0dXJlTG9hZGVyLHk9ZS5mbG93TWFwfHx2b2lkIDAseD1lLm5vcm1hbE1hcDB8fHYubG9hZChcInRleHR1cmVzL3dhdGVyL1dhdGVyXzFfTV9Ob3JtYWwuanBnXCIpLGI9ZS5ub3JtYWxNYXAxfHx2LmxvYWQoXCJ0ZXh0dXJlcy93YXRlci9XYXRlcl8yX01fTm9ybWFsLmpwZ1wiKSx3PW5ldyByLk1hdHJpeDQsXz1uZXcgci5DbG9jaztpZih2b2lkIDAhPT1pKWlmKHZvaWQgMCE9PW8pe3ZhciBNPW5ldyBpKHQse3RleHR1cmVXaWR0aDpjLHRleHR1cmVIZWlnaHQ6bCxjbGlwQmlhczp1LGVuY29kaW5nOmd9KSxTPW5ldyBvKHQse3RleHR1cmVXaWR0aDpjLHRleHR1cmVIZWlnaHQ6bCxjbGlwQmlhczp1LGVuY29kaW5nOmd9KTtNLm1hdHJpeEF1dG9VcGRhdGU9ITEsUy5tYXRyaXhBdXRvVXBkYXRlPSExLHRoaXMubWF0ZXJpYWw9bmV3IHIuU2hhZGVyTWF0ZXJpYWwoe3VuaWZvcm1zOnIuVW5pZm9ybXNVdGlscy5tZXJnZShbci5Vbmlmb3Jtc0xpYi5mb2csbS51bmlmb3Jtc10pLHZlcnRleFNoYWRlcjptLnZlcnRleFNoYWRlcixmcmFnbWVudFNoYWRlcjptLmZyYWdtZW50U2hhZGVyLHRyYW5zcGFyZW50OiEwLGZvZzohMH0pLHZvaWQgMCE9PXk/KHRoaXMubWF0ZXJpYWwuZGVmaW5lcy5VU0VfRkxPV01BUD1cIlwiLHRoaXMubWF0ZXJpYWwudW5pZm9ybXMudEZsb3dNYXA9e3R5cGU6XCJ0XCIsdmFsdWU6eX0pOnRoaXMubWF0ZXJpYWwudW5pZm9ybXMuZmxvd0RpcmVjdGlvbj17dHlwZTpcInYyXCIsdmFsdWU6aH0seC53cmFwUz14LndyYXBUPXIuUmVwZWF0V3JhcHBpbmcsYi53cmFwUz1iLndyYXBUPXIuUmVwZWF0V3JhcHBpbmcsdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy50UmVmbGVjdGlvbk1hcC52YWx1ZT1NLmdldFJlbmRlclRhcmdldCgpLnRleHR1cmUsdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy50UmVmcmFjdGlvbk1hcC52YWx1ZT1TLmdldFJlbmRlclRhcmdldCgpLnRleHR1cmUsdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy50Tm9ybWFsTWFwMC52YWx1ZT14LHRoaXMubWF0ZXJpYWwudW5pZm9ybXMudE5vcm1hbE1hcDEudmFsdWU9Yix0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLmNvbG9yLnZhbHVlPXMsdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy5yZWZsZWN0aXZpdHkudmFsdWU9cCx0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLnRleHR1cmVNYXRyaXgudmFsdWU9dyx0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLmNvbmZpZy52YWx1ZS54PTAsdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy5jb25maWcudmFsdWUueT0uMDc1LHRoaXMubWF0ZXJpYWwudW5pZm9ybXMuY29uZmlnLnZhbHVlLno9LjA3NSx0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLmNvbmZpZy52YWx1ZS53PWYsdGhpcy5vbkJlZm9yZVJlbmRlcj1mdW5jdGlvbih0LGUscil7dmFyIGksbzshZnVuY3Rpb24odCl7dy5zZXQoLjUsMCwwLC41LDAsLjUsMCwuNSwwLDAsLjUsLjUsMCwwLDAsMSksdy5tdWx0aXBseSh0LnByb2plY3Rpb25NYXRyaXgpLHcubXVsdGlwbHkodC5tYXRyaXhXb3JsZEludmVyc2UpLHcubXVsdGlwbHkobi5tYXRyaXhXb3JsZCl9KHIpLGk9Xy5nZXREZWx0YSgpLChvPW4ubWF0ZXJpYWwudW5pZm9ybXMuY29uZmlnKS52YWx1ZS54Kz1kKmksby52YWx1ZS55PW8udmFsdWUueCsuMDc1LG8udmFsdWUueD49LjE1PyhvLnZhbHVlLng9MCxvLnZhbHVlLnk9LjA3NSk6by52YWx1ZS55Pj0uMTUmJihvLnZhbHVlLnk9by52YWx1ZS55LS4xNSksbi52aXNpYmxlPSExLE0ubWF0cml4V29ybGQuY29weShuLm1hdHJpeFdvcmxkKSxTLm1hdHJpeFdvcmxkLmNvcHkobi5tYXRyaXhXb3JsZCksTS5vbkJlZm9yZVJlbmRlcih0LGUsciksUy5vbkJlZm9yZVJlbmRlcih0LGUsciksbi52aXNpYmxlPSEwfX1lbHNlIGNvbnNvbGUuZXJyb3IoXCJUSFJFRS5XYXRlcjogUmVxdWlyZWQgY29tcG9uZW50IFJlZnJhY3RvciBub3QgZm91bmQuXCIpO2Vsc2UgY29uc29sZS5lcnJvcihcIlRIUkVFLldhdGVyOiBSZXF1aXJlZCBjb21wb25lbnQgUmVmbGVjdG9yIG5vdCBmb3VuZC5cIil9O2EucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoci5NZXNoLnByb3RvdHlwZSksYS5wcm90b3R5cGUuY29uc3RydWN0b3I9YSxhLldhdGVyU2hhZGVyPXt1bmlmb3Jtczp7Y29sb3I6e3R5cGU6XCJjXCIsdmFsdWU6bnVsbH0scmVmbGVjdGl2aXR5Ont0eXBlOlwiZlwiLHZhbHVlOjB9LHRSZWZsZWN0aW9uTWFwOnt0eXBlOlwidFwiLHZhbHVlOm51bGx9LHRSZWZyYWN0aW9uTWFwOnt0eXBlOlwidFwiLHZhbHVlOm51bGx9LHROb3JtYWxNYXAwOnt0eXBlOlwidFwiLHZhbHVlOm51bGx9LHROb3JtYWxNYXAxOnt0eXBlOlwidFwiLHZhbHVlOm51bGx9LHRleHR1cmVNYXRyaXg6e3R5cGU6XCJtNFwiLHZhbHVlOm51bGx9LGNvbmZpZzp7dHlwZTpcInY0XCIsdmFsdWU6bmV3IHIuVmVjdG9yNH19LHZlcnRleFNoYWRlcjpbXCIjaW5jbHVkZSA8Y29tbW9uPlwiLFwiI2luY2x1ZGUgPGZvZ19wYXJzX3ZlcnRleD5cIixcIiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX3ZlcnRleD5cIixcInVuaWZvcm0gbWF0NCB0ZXh0dXJlTWF0cml4O1wiLFwidmFyeWluZyB2ZWM0IHZDb29yZDtcIixcInZhcnlpbmcgdmVjMiB2VXY7XCIsXCJ2YXJ5aW5nIHZlYzMgdlRvRXllO1wiLFwidm9pZCBtYWluKCkge1wiLFwiXFx0dlV2ID0gdXY7XCIsXCJcXHR2Q29vcmQgPSB0ZXh0dXJlTWF0cml4ICogdmVjNCggcG9zaXRpb24sIDEuMCApO1wiLFwiXFx0dmVjNCB3b3JsZFBvc2l0aW9uID0gbW9kZWxNYXRyaXggKiB2ZWM0KCBwb3NpdGlvbiwgMS4wICk7XCIsXCJcXHR2VG9FeWUgPSBjYW1lcmFQb3NpdGlvbiAtIHdvcmxkUG9zaXRpb24ueHl6O1wiLFwiXFx0dmVjNCBtdlBvc2l0aW9uID0gIHZpZXdNYXRyaXggKiB3b3JsZFBvc2l0aW9uO1wiLFwiXFx0Z2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogbXZQb3NpdGlvbjtcIixcIlxcdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl92ZXJ0ZXg+XCIsXCJcXHQjaW5jbHVkZSA8Zm9nX3ZlcnRleD5cIixcIn1cIl0uam9pbihcIlxcblwiKSxmcmFnbWVudFNoYWRlcjpbXCIjaW5jbHVkZSA8Y29tbW9uPlwiLFwiI2luY2x1ZGUgPGZvZ19wYXJzX2ZyYWdtZW50PlwiLFwiI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfZnJhZ21lbnQ+XCIsXCJ1bmlmb3JtIHNhbXBsZXIyRCB0UmVmbGVjdGlvbk1hcDtcIixcInVuaWZvcm0gc2FtcGxlcjJEIHRSZWZyYWN0aW9uTWFwO1wiLFwidW5pZm9ybSBzYW1wbGVyMkQgdE5vcm1hbE1hcDA7XCIsXCJ1bmlmb3JtIHNhbXBsZXIyRCB0Tm9ybWFsTWFwMTtcIixcIiNpZmRlZiBVU0VfRkxPV01BUFwiLFwiXFx0dW5pZm9ybSBzYW1wbGVyMkQgdEZsb3dNYXA7XCIsXCIjZWxzZVwiLFwiXFx0dW5pZm9ybSB2ZWMyIGZsb3dEaXJlY3Rpb247XCIsXCIjZW5kaWZcIixcInVuaWZvcm0gdmVjMyBjb2xvcjtcIixcInVuaWZvcm0gZmxvYXQgcmVmbGVjdGl2aXR5O1wiLFwidW5pZm9ybSB2ZWM0IGNvbmZpZztcIixcInZhcnlpbmcgdmVjNCB2Q29vcmQ7XCIsXCJ2YXJ5aW5nIHZlYzIgdlV2O1wiLFwidmFyeWluZyB2ZWMzIHZUb0V5ZTtcIixcInZvaWQgbWFpbigpIHtcIixcIlxcdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9mcmFnbWVudD5cIixcIlxcdGZsb2F0IGZsb3dNYXBPZmZzZXQwID0gY29uZmlnLng7XCIsXCJcXHRmbG9hdCBmbG93TWFwT2Zmc2V0MSA9IGNvbmZpZy55O1wiLFwiXFx0ZmxvYXQgaGFsZkN5Y2xlID0gY29uZmlnLno7XCIsXCJcXHRmbG9hdCBzY2FsZSA9IGNvbmZpZy53O1wiLFwiXFx0dmVjMyB0b0V5ZSA9IG5vcm1hbGl6ZSggdlRvRXllICk7XCIsXCJcXHR2ZWMyIGZsb3c7XCIsXCJcXHQjaWZkZWYgVVNFX0ZMT1dNQVBcIixcIlxcdFxcdGZsb3cgPSB0ZXh0dXJlMkQoIHRGbG93TWFwLCB2VXYgKS5yZyAqIDIuMCAtIDEuMDtcIixcIlxcdCNlbHNlXCIsXCJcXHRcXHRmbG93ID0gZmxvd0RpcmVjdGlvbjtcIixcIlxcdCNlbmRpZlwiLFwiXFx0Zmxvdy54ICo9IC0gMS4wO1wiLFwiXFx0dmVjNCBub3JtYWxDb2xvcjAgPSB0ZXh0dXJlMkQoIHROb3JtYWxNYXAwLCAoIHZVdiAqIHNjYWxlICkgKyBmbG93ICogZmxvd01hcE9mZnNldDAgKTtcIixcIlxcdHZlYzQgbm9ybWFsQ29sb3IxID0gdGV4dHVyZTJEKCB0Tm9ybWFsTWFwMSwgKCB2VXYgKiBzY2FsZSApICsgZmxvdyAqIGZsb3dNYXBPZmZzZXQxICk7XCIsXCJcXHRmbG9hdCBmbG93TGVycCA9IGFicyggaGFsZkN5Y2xlIC0gZmxvd01hcE9mZnNldDAgKSAvIGhhbGZDeWNsZTtcIixcIlxcdHZlYzQgbm9ybWFsQ29sb3IgPSBtaXgoIG5vcm1hbENvbG9yMCwgbm9ybWFsQ29sb3IxLCBmbG93TGVycCApO1wiLFwiXFx0dmVjMyBub3JtYWwgPSBub3JtYWxpemUoIHZlYzMoIG5vcm1hbENvbG9yLnIgKiAyLjAgLSAxLjAsIG5vcm1hbENvbG9yLmIsICBub3JtYWxDb2xvci5nICogMi4wIC0gMS4wICkgKTtcIixcIlxcdGZsb2F0IHRoZXRhID0gbWF4KCBkb3QoIHRvRXllLCBub3JtYWwgKSwgMC4wICk7XCIsXCJcXHRmbG9hdCByZWZsZWN0YW5jZSA9IHJlZmxlY3Rpdml0eSArICggMS4wIC0gcmVmbGVjdGl2aXR5ICkgKiBwb3coICggMS4wIC0gdGhldGEgKSwgNS4wICk7XCIsXCJcXHR2ZWMzIGNvb3JkID0gdkNvb3JkLnh5eiAvIHZDb29yZC53O1wiLFwiXFx0dmVjMiB1diA9IGNvb3JkLnh5ICsgY29vcmQueiAqIG5vcm1hbC54eiAqIDAuMDU7XCIsXCJcXHR2ZWM0IHJlZmxlY3RDb2xvciA9IHRleHR1cmUyRCggdFJlZmxlY3Rpb25NYXAsIHZlYzIoIDEuMCAtIHV2LngsIHV2LnkgKSApO1wiLFwiXFx0dmVjNCByZWZyYWN0Q29sb3IgPSB0ZXh0dXJlMkQoIHRSZWZyYWN0aW9uTWFwLCB1diApO1wiLFwiXFx0Z2xfRnJhZ0NvbG9yID0gdmVjNCggY29sb3IsIDEuMCApICogbWl4KCByZWZyYWN0Q29sb3IsIHJlZmxlY3RDb2xvciwgcmVmbGVjdGFuY2UgKTtcIixcIlxcdCNpbmNsdWRlIDx0b25lbWFwcGluZ19mcmFnbWVudD5cIixcIlxcdCNpbmNsdWRlIDxlbmNvZGluZ3NfZnJhZ21lbnQ+XCIsXCJcXHQjaW5jbHVkZSA8Zm9nX2ZyYWdtZW50PlwiLFwifVwiXS5qb2luKFwiXFxuXCIpfX0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO24ucihlKSxuLmQoZSxcIkVmZmVjdENvbXBvc2VyXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGx9KSksbi5kKGUsXCJQYXNzXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHB9KSk7dmFyIHI9bigwKSxpPXt1bmlmb3Jtczp7dERpZmZ1c2U6e3ZhbHVlOm51bGx9LG9wYWNpdHk6e3ZhbHVlOjF9fSx2ZXJ0ZXhTaGFkZXI6W1widmFyeWluZyB2ZWMyIHZVdjtcIixcInZvaWQgbWFpbigpIHtcIixcIlxcdHZVdiA9IHV2O1wiLFwiXFx0Z2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogbW9kZWxWaWV3TWF0cml4ICogdmVjNCggcG9zaXRpb24sIDEuMCApO1wiLFwifVwiXS5qb2luKFwiXFxuXCIpLGZyYWdtZW50U2hhZGVyOltcInVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcIixcInVuaWZvcm0gc2FtcGxlcjJEIHREaWZmdXNlO1wiLFwidmFyeWluZyB2ZWMyIHZVdjtcIixcInZvaWQgbWFpbigpIHtcIixcIlxcdHZlYzQgdGV4ZWwgPSB0ZXh0dXJlMkQoIHREaWZmdXNlLCB2VXYgKTtcIixcIlxcdGdsX0ZyYWdDb2xvciA9IG9wYWNpdHkgKiB0ZXhlbDtcIixcIn1cIl0uam9pbihcIlxcblwiKX0sbz1uKDIpLGE9bigxKSxzPWZ1bmN0aW9uKHQsZSl7YS5hLmNhbGwodGhpcyksdGhpcy5zY2VuZT10LHRoaXMuY2FtZXJhPWUsdGhpcy5jbGVhcj0hMCx0aGlzLm5lZWRzU3dhcD0hMSx0aGlzLmludmVyc2U9ITF9O3MucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShhLmEucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6cyxyZW5kZXI6ZnVuY3Rpb24odCxlLG4pe3ZhciByLGksbz10LmdldENvbnRleHQoKSxhPXQuc3RhdGU7YS5idWZmZXJzLmNvbG9yLnNldE1hc2soITEpLGEuYnVmZmVycy5kZXB0aC5zZXRNYXNrKCExKSxhLmJ1ZmZlcnMuY29sb3Iuc2V0TG9ja2VkKCEwKSxhLmJ1ZmZlcnMuZGVwdGguc2V0TG9ja2VkKCEwKSx0aGlzLmludmVyc2U/KHI9MCxpPTEpOihyPTEsaT0wKSxhLmJ1ZmZlcnMuc3RlbmNpbC5zZXRUZXN0KCEwKSxhLmJ1ZmZlcnMuc3RlbmNpbC5zZXRPcChvLlJFUExBQ0Usby5SRVBMQUNFLG8uUkVQTEFDRSksYS5idWZmZXJzLnN0ZW5jaWwuc2V0RnVuYyhvLkFMV0FZUyxyLDQyOTQ5NjcyOTUpLGEuYnVmZmVycy5zdGVuY2lsLnNldENsZWFyKGkpLGEuYnVmZmVycy5zdGVuY2lsLnNldExvY2tlZCghMCksdC5zZXRSZW5kZXJUYXJnZXQobiksdGhpcy5jbGVhciYmdC5jbGVhcigpLHQucmVuZGVyKHRoaXMuc2NlbmUsdGhpcy5jYW1lcmEpLHQuc2V0UmVuZGVyVGFyZ2V0KGUpLHRoaXMuY2xlYXImJnQuY2xlYXIoKSx0LnJlbmRlcih0aGlzLnNjZW5lLHRoaXMuY2FtZXJhKSxhLmJ1ZmZlcnMuY29sb3Iuc2V0TG9ja2VkKCExKSxhLmJ1ZmZlcnMuZGVwdGguc2V0TG9ja2VkKCExKSxhLmJ1ZmZlcnMuc3RlbmNpbC5zZXRMb2NrZWQoITEpLGEuYnVmZmVycy5zdGVuY2lsLnNldEZ1bmMoby5FUVVBTCwxLDQyOTQ5NjcyOTUpLGEuYnVmZmVycy5zdGVuY2lsLnNldE9wKG8uS0VFUCxvLktFRVAsby5LRUVQKSxhLmJ1ZmZlcnMuc3RlbmNpbC5zZXRMb2NrZWQoITApfX0pO3ZhciBjPWZ1bmN0aW9uKCl7YS5hLmNhbGwodGhpcyksdGhpcy5uZWVkc1N3YXA9ITF9O2MucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYS5hLnByb3RvdHlwZSksT2JqZWN0LmFzc2lnbihjLnByb3RvdHlwZSx7cmVuZGVyOmZ1bmN0aW9uKHQpe3Quc3RhdGUuYnVmZmVycy5zdGVuY2lsLnNldExvY2tlZCghMSksdC5zdGF0ZS5idWZmZXJzLnN0ZW5jaWwuc2V0VGVzdCghMSl9fSk7dmFyIGw9ZnVuY3Rpb24odCxlKXtpZih0aGlzLnJlbmRlcmVyPXQsdm9pZCAwPT09ZSl7dmFyIG49e21pbkZpbHRlcjpyLkxpbmVhckZpbHRlcixtYWdGaWx0ZXI6ci5MaW5lYXJGaWx0ZXIsZm9ybWF0OnIuUkdCQUZvcm1hdH0sYT10LmdldFNpemUobmV3IHIuVmVjdG9yMik7dGhpcy5fcGl4ZWxSYXRpbz10LmdldFBpeGVsUmF0aW8oKSx0aGlzLl93aWR0aD1hLndpZHRoLHRoaXMuX2hlaWdodD1hLmhlaWdodCwoZT1uZXcgci5XZWJHTFJlbmRlclRhcmdldCh0aGlzLl93aWR0aCp0aGlzLl9waXhlbFJhdGlvLHRoaXMuX2hlaWdodCp0aGlzLl9waXhlbFJhdGlvLG4pKS50ZXh0dXJlLm5hbWU9XCJFZmZlY3RDb21wb3Nlci5ydDFcIn1lbHNlIHRoaXMuX3BpeGVsUmF0aW89MSx0aGlzLl93aWR0aD1lLndpZHRoLHRoaXMuX2hlaWdodD1lLmhlaWdodDt0aGlzLnJlbmRlclRhcmdldDE9ZSx0aGlzLnJlbmRlclRhcmdldDI9ZS5jbG9uZSgpLHRoaXMucmVuZGVyVGFyZ2V0Mi50ZXh0dXJlLm5hbWU9XCJFZmZlY3RDb21wb3Nlci5ydDJcIix0aGlzLndyaXRlQnVmZmVyPXRoaXMucmVuZGVyVGFyZ2V0MSx0aGlzLnJlYWRCdWZmZXI9dGhpcy5yZW5kZXJUYXJnZXQyLHRoaXMucmVuZGVyVG9TY3JlZW49ITAsdGhpcy5wYXNzZXM9W10sdm9pZCAwPT09aSYmY29uc29sZS5lcnJvcihcIlRIUkVFLkVmZmVjdENvbXBvc2VyIHJlbGllcyBvbiBDb3B5U2hhZGVyXCIpLHZvaWQgMD09PW8uU2hhZGVyUGFzcyYmY29uc29sZS5lcnJvcihcIlRIUkVFLkVmZmVjdENvbXBvc2VyIHJlbGllcyBvbiBTaGFkZXJQYXNzXCIpLHRoaXMuY29weVBhc3M9bmV3IG8uU2hhZGVyUGFzcyhpKSx0aGlzLmNsb2NrPW5ldyByLkNsb2NrfTtPYmplY3QuYXNzaWduKGwucHJvdG90eXBlLHtzd2FwQnVmZmVyczpmdW5jdGlvbigpe3ZhciB0PXRoaXMucmVhZEJ1ZmZlcjt0aGlzLnJlYWRCdWZmZXI9dGhpcy53cml0ZUJ1ZmZlcix0aGlzLndyaXRlQnVmZmVyPXR9LGFkZFBhc3M6ZnVuY3Rpb24odCl7dGhpcy5wYXNzZXMucHVzaCh0KSx0LnNldFNpemUodGhpcy5fd2lkdGgqdGhpcy5fcGl4ZWxSYXRpbyx0aGlzLl9oZWlnaHQqdGhpcy5fcGl4ZWxSYXRpbyl9LGluc2VydFBhc3M6ZnVuY3Rpb24odCxlKXt0aGlzLnBhc3Nlcy5zcGxpY2UoZSwwLHQpLHQuc2V0U2l6ZSh0aGlzLl93aWR0aCp0aGlzLl9waXhlbFJhdGlvLHRoaXMuX2hlaWdodCp0aGlzLl9waXhlbFJhdGlvKX0scmVtb3ZlUGFzczpmdW5jdGlvbih0KXtjb25zdCBlPXRoaXMucGFzc2VzLmluZGV4T2YodCk7LTEhPT1lJiZ0aGlzLnBhc3Nlcy5zcGxpY2UoZSwxKX0saXNMYXN0RW5hYmxlZFBhc3M6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXQrMTtlPHRoaXMucGFzc2VzLmxlbmd0aDtlKyspaWYodGhpcy5wYXNzZXNbZV0uZW5hYmxlZClyZXR1cm4hMTtyZXR1cm4hMH0scmVuZGVyOmZ1bmN0aW9uKHQpe3ZvaWQgMD09PXQmJih0PXRoaXMuY2xvY2suZ2V0RGVsdGEoKSk7dmFyIGUsbixyPXRoaXMucmVuZGVyZXIuZ2V0UmVuZGVyVGFyZ2V0KCksaT0hMSxvPXRoaXMucGFzc2VzLmxlbmd0aDtmb3Iobj0wO248bztuKyspaWYoITEhPT0oZT10aGlzLnBhc3Nlc1tuXSkuZW5hYmxlZCl7aWYoZS5yZW5kZXJUb1NjcmVlbj10aGlzLnJlbmRlclRvU2NyZWVuJiZ0aGlzLmlzTGFzdEVuYWJsZWRQYXNzKG4pLGUucmVuZGVyKHRoaXMucmVuZGVyZXIsdGhpcy53cml0ZUJ1ZmZlcix0aGlzLnJlYWRCdWZmZXIsdCxpKSxlLm5lZWRzU3dhcCl7aWYoaSl7dmFyIGE9dGhpcy5yZW5kZXJlci5nZXRDb250ZXh0KCksbD10aGlzLnJlbmRlcmVyLnN0YXRlLmJ1ZmZlcnMuc3RlbmNpbDtsLnNldEZ1bmMoYS5OT1RFUVVBTCwxLDQyOTQ5NjcyOTUpLHRoaXMuY29weVBhc3MucmVuZGVyKHRoaXMucmVuZGVyZXIsdGhpcy53cml0ZUJ1ZmZlcix0aGlzLnJlYWRCdWZmZXIsdCksbC5zZXRGdW5jKGEuRVFVQUwsMSw0Mjk0OTY3Mjk1KX10aGlzLnN3YXBCdWZmZXJzKCl9dm9pZCAwIT09cyYmKGUgaW5zdGFuY2VvZiBzP2k9ITA6ZSBpbnN0YW5jZW9mIGMmJihpPSExKSl9dGhpcy5yZW5kZXJlci5zZXRSZW5kZXJUYXJnZXQocil9LHJlc2V0OmZ1bmN0aW9uKHQpe2lmKHZvaWQgMD09PXQpe3ZhciBlPXRoaXMucmVuZGVyZXIuZ2V0U2l6ZShuZXcgci5WZWN0b3IyKTt0aGlzLl9waXhlbFJhdGlvPXRoaXMucmVuZGVyZXIuZ2V0UGl4ZWxSYXRpbygpLHRoaXMuX3dpZHRoPWUud2lkdGgsdGhpcy5faGVpZ2h0PWUuaGVpZ2h0LCh0PXRoaXMucmVuZGVyVGFyZ2V0MS5jbG9uZSgpKS5zZXRTaXplKHRoaXMuX3dpZHRoKnRoaXMuX3BpeGVsUmF0aW8sdGhpcy5faGVpZ2h0KnRoaXMuX3BpeGVsUmF0aW8pfXRoaXMucmVuZGVyVGFyZ2V0MS5kaXNwb3NlKCksdGhpcy5yZW5kZXJUYXJnZXQyLmRpc3Bvc2UoKSx0aGlzLnJlbmRlclRhcmdldDE9dCx0aGlzLnJlbmRlclRhcmdldDI9dC5jbG9uZSgpLHRoaXMud3JpdGVCdWZmZXI9dGhpcy5yZW5kZXJUYXJnZXQxLHRoaXMucmVhZEJ1ZmZlcj10aGlzLnJlbmRlclRhcmdldDJ9LHNldFNpemU6ZnVuY3Rpb24odCxlKXt0aGlzLl93aWR0aD10LHRoaXMuX2hlaWdodD1lO3ZhciBuPXRoaXMuX3dpZHRoKnRoaXMuX3BpeGVsUmF0aW8scj10aGlzLl9oZWlnaHQqdGhpcy5fcGl4ZWxSYXRpbzt0aGlzLnJlbmRlclRhcmdldDEuc2V0U2l6ZShuLHIpLHRoaXMucmVuZGVyVGFyZ2V0Mi5zZXRTaXplKG4scik7Zm9yKHZhciBpPTA7aTx0aGlzLnBhc3Nlcy5sZW5ndGg7aSsrKXRoaXMucGFzc2VzW2ldLnNldFNpemUobixyKX0sc2V0UGl4ZWxSYXRpbzpmdW5jdGlvbih0KXt0aGlzLl9waXhlbFJhdGlvPXQsdGhpcy5zZXRTaXplKHRoaXMuX3dpZHRoLHRoaXMuX2hlaWdodCl9fSk7dmFyIHUsaCxkLHA9ZnVuY3Rpb24oKXt0aGlzLmVuYWJsZWQ9ITAsdGhpcy5uZWVkc1N3YXA9ITAsdGhpcy5jbGVhcj0hMSx0aGlzLnJlbmRlclRvU2NyZWVuPSExfTtPYmplY3QuYXNzaWduKHAucHJvdG90eXBlLHtzZXRTaXplOmZ1bmN0aW9uKCl7fSxyZW5kZXI6ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuUGFzczogLnJlbmRlcigpIG11c3QgYmUgaW1wbGVtZW50ZWQgaW4gZGVyaXZlZCBwYXNzLlwiKX19KSxwLkZ1bGxTY3JlZW5RdWFkPSh1PW5ldyByLk9ydGhvZ3JhcGhpY0NhbWVyYSgtMSwxLDEsLTEsMCwxKSxoPW5ldyByLlBsYW5lQnVmZmVyR2VvbWV0cnkoMiwyKSxkPWZ1bmN0aW9uKHQpe3RoaXMuX21lc2g9bmV3IHIuTWVzaChoLHQpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZC5wcm90b3R5cGUsXCJtYXRlcmlhbFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWVzaC5tYXRlcmlhbH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX21lc2gubWF0ZXJpYWw9dH19KSxPYmplY3QuYXNzaWduKGQucHJvdG90eXBlLHtkaXNwb3NlOmZ1bmN0aW9uKCl7dGhpcy5fbWVzaC5nZW9tZXRyeS5kaXNwb3NlKCl9LHJlbmRlcjpmdW5jdGlvbih0KXt0LnJlbmRlcih0aGlzLl9tZXNoLHUpfX0pLGQpfSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7bi5yKGUpLG4uZChlLFwiQ29udmV4R2VvbWV0cnlcIiwoZnVuY3Rpb24oKXtyZXR1cm4gb30pKSxuLmQoZSxcIkNvbnZleEJ1ZmZlckdlb21ldHJ5XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGF9KSk7dmFyIHI9bigwKSxpPWZ1bmN0aW9uKCl7dmFyIHQsZSxuLGksbz1uZXcgci5WZWN0b3IzO2Z1bmN0aW9uIGEoKXt0aGlzLnRvbGVyYW5jZT0tMSx0aGlzLmZhY2VzPVtdLHRoaXMubmV3RmFjZXM9W10sdGhpcy5hc3NpZ25lZD1uZXcgdSx0aGlzLnVuYXNzaWduZWQ9bmV3IHUsdGhpcy52ZXJ0aWNlcz1bXX1mdW5jdGlvbiBzKCl7dGhpcy5ub3JtYWw9bmV3IHIuVmVjdG9yMyx0aGlzLm1pZHBvaW50PW5ldyByLlZlY3RvcjMsdGhpcy5hcmVhPTAsdGhpcy5jb25zdGFudD0wLHRoaXMub3V0c2lkZT1udWxsLHRoaXMubWFyaz0wLHRoaXMuZWRnZT1udWxsfWZ1bmN0aW9uIGModCxlKXt0aGlzLnZlcnRleD10LHRoaXMucHJldj1udWxsLHRoaXMubmV4dD1udWxsLHRoaXMudHdpbj1udWxsLHRoaXMuZmFjZT1lfWZ1bmN0aW9uIGwodCl7dGhpcy5wb2ludD10LHRoaXMucHJldj1udWxsLHRoaXMubmV4dD1udWxsLHRoaXMuZmFjZT1udWxsfWZ1bmN0aW9uIHUoKXt0aGlzLmhlYWQ9bnVsbCx0aGlzLnRhaWw9bnVsbH1yZXR1cm4gT2JqZWN0LmFzc2lnbihhLnByb3RvdHlwZSx7c2V0RnJvbVBvaW50czpmdW5jdGlvbih0KXshMCE9PUFycmF5LmlzQXJyYXkodCkmJmNvbnNvbGUuZXJyb3IoXCJUSFJFRS5Db252ZXhIdWxsOiBQb2ludHMgcGFyYW1ldGVyIGlzIG5vdCBhbiBhcnJheS5cIiksdC5sZW5ndGg8NCYmY29uc29sZS5lcnJvcihcIlRIUkVFLkNvbnZleEh1bGw6IFRoZSBhbGdvcml0aG0gbmVlZHMgYXQgbGVhc3QgZm91ciBwb2ludHMuXCIpLHRoaXMubWFrZUVtcHR5KCk7Zm9yKHZhciBlPTAsbj10Lmxlbmd0aDtlPG47ZSsrKXRoaXMudmVydGljZXMucHVzaChuZXcgbCh0W2VdKSk7cmV0dXJuIHRoaXMuY29tcHV0ZSgpLHRoaXN9LHNldEZyb21PYmplY3Q6ZnVuY3Rpb24odCl7dmFyIGU9W107cmV0dXJuIHQudXBkYXRlTWF0cml4V29ybGQoITApLHQudHJhdmVyc2UoKGZ1bmN0aW9uKHQpe3ZhciBuLGksbyxhPXQuZ2VvbWV0cnk7aWYodm9pZCAwIT09YSlpZihhLmlzR2VvbWV0cnkpe3ZhciBzPWEudmVydGljZXM7Zm9yKG49MCxpPXMubGVuZ3RoO248aTtuKyspKG89c1tuXS5jbG9uZSgpKS5hcHBseU1hdHJpeDQodC5tYXRyaXhXb3JsZCksZS5wdXNoKG8pfWVsc2UgaWYoYS5pc0J1ZmZlckdlb21ldHJ5KXt2YXIgYz1hLmF0dHJpYnV0ZXMucG9zaXRpb247aWYodm9pZCAwIT09Yylmb3Iobj0wLGk9Yy5jb3VudDtuPGk7bisrKShvPW5ldyByLlZlY3RvcjMpLmZyb21CdWZmZXJBdHRyaWJ1dGUoYyxuKS5hcHBseU1hdHJpeDQodC5tYXRyaXhXb3JsZCksZS5wdXNoKG8pfX0pKSx0aGlzLnNldEZyb21Qb2ludHMoZSl9LGNvbnRhaW5zUG9pbnQ6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMuZmFjZXMsbj0wLHI9ZS5sZW5ndGg7bjxyO24rKyl7aWYoZVtuXS5kaXN0YW5jZVRvUG9pbnQodCk+dGhpcy50b2xlcmFuY2UpcmV0dXJuITF9cmV0dXJuITB9LGludGVyc2VjdFJheTpmdW5jdGlvbih0LGUpe2Zvcih2YXIgbj10aGlzLmZhY2VzLHI9LTEvMCxpPTEvMCxvPTAsYT1uLmxlbmd0aDtvPGE7bysrKXt2YXIgcz1uW29dLGM9cy5kaXN0YW5jZVRvUG9pbnQodC5vcmlnaW4pLGw9cy5ub3JtYWwuZG90KHQuZGlyZWN0aW9uKTtpZihjPjAmJmw+PTApcmV0dXJuIG51bGw7dmFyIHU9MCE9PWw/LWMvbDowO2lmKCEodTw9MCkmJihsPjA/aT1NYXRoLm1pbih1LGkpOnI9TWF0aC5tYXgodSxyKSxyPmkpKXJldHVybiBudWxsfXJldHVybiByIT09LTEvMD90LmF0KHIsZSk6dC5hdChpLGUpLGV9LGludGVyc2VjdHNSYXk6ZnVuY3Rpb24odCl7cmV0dXJuIG51bGwhPT10aGlzLmludGVyc2VjdFJheSh0LG8pfSxtYWtlRW1wdHk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5mYWNlcz1bXSx0aGlzLnZlcnRpY2VzPVtdLHRoaXN9LGFkZFZlcnRleFRvRmFjZTpmdW5jdGlvbih0LGUpe3JldHVybiB0LmZhY2U9ZSxudWxsPT09ZS5vdXRzaWRlP3RoaXMuYXNzaWduZWQuYXBwZW5kKHQpOnRoaXMuYXNzaWduZWQuaW5zZXJ0QmVmb3JlKGUub3V0c2lkZSx0KSxlLm91dHNpZGU9dCx0aGlzfSxyZW1vdmVWZXJ0ZXhGcm9tRmFjZTpmdW5jdGlvbih0LGUpe3JldHVybiB0PT09ZS5vdXRzaWRlJiYobnVsbCE9PXQubmV4dCYmdC5uZXh0LmZhY2U9PT1lP2Uub3V0c2lkZT10Lm5leHQ6ZS5vdXRzaWRlPW51bGwpLHRoaXMuYXNzaWduZWQucmVtb3ZlKHQpLHRoaXN9LHJlbW92ZUFsbFZlcnRpY2VzRnJvbUZhY2U6ZnVuY3Rpb24odCl7aWYobnVsbCE9PXQub3V0c2lkZSl7Zm9yKHZhciBlPXQub3V0c2lkZSxuPXQub3V0c2lkZTtudWxsIT09bi5uZXh0JiZuLm5leHQuZmFjZT09PXQ7KW49bi5uZXh0O3JldHVybiB0aGlzLmFzc2lnbmVkLnJlbW92ZVN1Ykxpc3QoZSxuKSxlLnByZXY9bi5uZXh0PW51bGwsdC5vdXRzaWRlPW51bGwsZX19LGRlbGV0ZUZhY2VWZXJ0aWNlczpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMucmVtb3ZlQWxsVmVydGljZXNGcm9tRmFjZSh0KTtpZih2b2lkIDAhPT1uKWlmKHZvaWQgMD09PWUpdGhpcy51bmFzc2lnbmVkLmFwcGVuZENoYWluKG4pO2Vsc2V7dmFyIHI9bjtkb3t2YXIgaT1yLm5leHQ7ZS5kaXN0YW5jZVRvUG9pbnQoci5wb2ludCk+dGhpcy50b2xlcmFuY2U/dGhpcy5hZGRWZXJ0ZXhUb0ZhY2UocixlKTp0aGlzLnVuYXNzaWduZWQuYXBwZW5kKHIpLHI9aX13aGlsZShudWxsIT09cil9cmV0dXJuIHRoaXN9LHJlc29sdmVVbmFzc2lnbmVkUG9pbnRzOmZ1bmN0aW9uKHQpe2lmKCExPT09dGhpcy51bmFzc2lnbmVkLmlzRW1wdHkoKSl7dmFyIGU9dGhpcy51bmFzc2lnbmVkLmZpcnN0KCk7ZG97Zm9yKHZhciBuPWUubmV4dCxyPXRoaXMudG9sZXJhbmNlLGk9bnVsbCxvPTA7bzx0Lmxlbmd0aDtvKyspe3ZhciBhPXRbb107aWYoMD09PWEubWFyayl7dmFyIHM9YS5kaXN0YW5jZVRvUG9pbnQoZS5wb2ludCk7aWYocz5yJiYocj1zLGk9YSkscj4xZTMqdGhpcy50b2xlcmFuY2UpYnJlYWt9fW51bGwhPT1pJiZ0aGlzLmFkZFZlcnRleFRvRmFjZShlLGkpLGU9bn13aGlsZShudWxsIT09ZSl9cmV0dXJuIHRoaXN9LGNvbXB1dGVFeHRyZW1lczpmdW5jdGlvbigpe3ZhciB0LGUsbixpPW5ldyByLlZlY3RvcjMsbz1uZXcgci5WZWN0b3IzLGE9W10scz1bXTtmb3IodD0wO3Q8Mzt0KyspYVt0XT1zW3RdPXRoaXMudmVydGljZXNbMF07Zm9yKGkuY29weSh0aGlzLnZlcnRpY2VzWzBdLnBvaW50KSxvLmNvcHkodGhpcy52ZXJ0aWNlc1swXS5wb2ludCksdD0wLGU9dGhpcy52ZXJ0aWNlcy5sZW5ndGg7dDxlO3QrKyl7dmFyIGM9dGhpcy52ZXJ0aWNlc1t0XSxsPWMucG9pbnQ7Zm9yKG49MDtuPDM7bisrKWwuZ2V0Q29tcG9uZW50KG4pPGkuZ2V0Q29tcG9uZW50KG4pJiYoaS5zZXRDb21wb25lbnQobixsLmdldENvbXBvbmVudChuKSksYVtuXT1jKTtmb3Iobj0wO248MztuKyspbC5nZXRDb21wb25lbnQobik+by5nZXRDb21wb25lbnQobikmJihvLnNldENvbXBvbmVudChuLGwuZ2V0Q29tcG9uZW50KG4pKSxzW25dPWMpfXJldHVybiB0aGlzLnRvbGVyYW5jZT0zKk51bWJlci5FUFNJTE9OKihNYXRoLm1heChNYXRoLmFicyhpLngpLE1hdGguYWJzKG8ueCkpK01hdGgubWF4KE1hdGguYWJzKGkueSksTWF0aC5hYnMoby55KSkrTWF0aC5tYXgoTWF0aC5hYnMoaS56KSxNYXRoLmFicyhvLnopKSkse21pbjphLG1heDpzfX0sY29tcHV0ZUluaXRpYWxIdWxsOmZ1bmN0aW9uKCl7dm9pZCAwPT09dCYmKHQ9bmV3IHIuTGluZTMsZT1uZXcgci5QbGFuZSxuPW5ldyByLlZlY3RvcjMpO3ZhciBpLG8sYSxjLGwsdSxoLGQscCxmPXRoaXMudmVydGljZXMsbT10aGlzLmNvbXB1dGVFeHRyZW1lcygpLGc9bS5taW4sdj1tLm1heCx5PTAseD0wO2Zvcih1PTA7dTwzO3UrKykocD12W3VdLnBvaW50LmdldENvbXBvbmVudCh1KS1nW3VdLnBvaW50LmdldENvbXBvbmVudCh1KSk+eSYmKHk9cCx4PXUpO2ZvcihvPWdbeF0sYT12W3hdLHk9MCx0LnNldChvLnBvaW50LGEucG9pbnQpLHU9MCxoPXRoaXMudmVydGljZXMubGVuZ3RoO3U8aDt1KyspKGk9Zlt1XSkhPT1vJiZpIT09YSYmKHQuY2xvc2VzdFBvaW50VG9Qb2ludChpLnBvaW50LCEwLG4pLChwPW4uZGlzdGFuY2VUb1NxdWFyZWQoaS5wb2ludCkpPnkmJih5PXAsYz1pKSk7Zm9yKHk9LTEsZS5zZXRGcm9tQ29wbGFuYXJQb2ludHMoby5wb2ludCxhLnBvaW50LGMucG9pbnQpLHU9MCxoPXRoaXMudmVydGljZXMubGVuZ3RoO3U8aDt1KyspKGk9Zlt1XSkhPT1vJiZpIT09YSYmaSE9PWMmJihwPU1hdGguYWJzKGUuZGlzdGFuY2VUb1BvaW50KGkucG9pbnQpKSk+eSYmKHk9cCxsPWkpO3ZhciBiPVtdO2lmKGUuZGlzdGFuY2VUb1BvaW50KGwucG9pbnQpPDApZm9yKGIucHVzaChzLmNyZWF0ZShvLGEsYykscy5jcmVhdGUobCxhLG8pLHMuY3JlYXRlKGwsYyxhKSxzLmNyZWF0ZShsLG8sYykpLHU9MDt1PDM7dSsrKWQ9KHUrMSklMyxiW3UrMV0uZ2V0RWRnZSgyKS5zZXRUd2luKGJbMF0uZ2V0RWRnZShkKSksYlt1KzFdLmdldEVkZ2UoMSkuc2V0VHdpbihiW2QrMV0uZ2V0RWRnZSgwKSk7ZWxzZSBmb3IoYi5wdXNoKHMuY3JlYXRlKG8sYyxhKSxzLmNyZWF0ZShsLG8sYSkscy5jcmVhdGUobCxhLGMpLHMuY3JlYXRlKGwsYyxvKSksdT0wO3U8Mzt1KyspZD0odSsxKSUzLGJbdSsxXS5nZXRFZGdlKDIpLnNldFR3aW4oYlswXS5nZXRFZGdlKCgzLXUpJTMpKSxiW3UrMV0uZ2V0RWRnZSgwKS5zZXRUd2luKGJbZCsxXS5nZXRFZGdlKDEpKTtmb3IodT0wO3U8NDt1KyspdGhpcy5mYWNlcy5wdXNoKGJbdV0pO2Zvcih1PTAsaD1mLmxlbmd0aDt1PGg7dSsrKWlmKChpPWZbdV0pIT09byYmaSE9PWEmJmkhPT1jJiZpIT09bCl7eT10aGlzLnRvbGVyYW5jZTt2YXIgdz1udWxsO2ZvcihkPTA7ZDw0O2QrKykocD10aGlzLmZhY2VzW2RdLmRpc3RhbmNlVG9Qb2ludChpLnBvaW50KSk+eSYmKHk9cCx3PXRoaXMuZmFjZXNbZF0pO251bGwhPT13JiZ0aGlzLmFkZFZlcnRleFRvRmFjZShpLHcpfXJldHVybiB0aGlzfSxyZWluZGV4RmFjZXM6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9W10sZT0wO2U8dGhpcy5mYWNlcy5sZW5ndGg7ZSsrKXt2YXIgbj10aGlzLmZhY2VzW2VdOzA9PT1uLm1hcmsmJnQucHVzaChuKX1yZXR1cm4gdGhpcy5mYWNlcz10LHRoaXN9LG5leHRWZXJ0ZXhUb0FkZDpmdW5jdGlvbigpe2lmKCExPT09dGhpcy5hc3NpZ25lZC5pc0VtcHR5KCkpe3ZhciB0LGU9MCxuPXRoaXMuYXNzaWduZWQuZmlyc3QoKS5mYWNlLHI9bi5vdXRzaWRlO2Rve3ZhciBpPW4uZGlzdGFuY2VUb1BvaW50KHIucG9pbnQpO2k+ZSYmKGU9aSx0PXIpLHI9ci5uZXh0fXdoaWxlKG51bGwhPT1yJiZyLmZhY2U9PT1uKTtyZXR1cm4gdH19LGNvbXB1dGVIb3Jpem9uOmZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBpO3RoaXMuZGVsZXRlRmFjZVZlcnRpY2VzKG4pLG4ubWFyaz0xLGk9bnVsbD09PWU/ZT1uLmdldEVkZ2UoMCk6ZS5uZXh0O2Rve3ZhciBvPWkudHdpbixhPW8uZmFjZTswPT09YS5tYXJrJiYoYS5kaXN0YW5jZVRvUG9pbnQodCk+dGhpcy50b2xlcmFuY2U/dGhpcy5jb21wdXRlSG9yaXpvbih0LG8sYSxyKTpyLnB1c2goaSkpLGk9aS5uZXh0fXdoaWxlKGkhPT1lKTtyZXR1cm4gdGhpc30sYWRkQWRqb2luaW5nRmFjZTpmdW5jdGlvbih0LGUpe3ZhciBuPXMuY3JlYXRlKHQsZS50YWlsKCksZS5oZWFkKCkpO3JldHVybiB0aGlzLmZhY2VzLnB1c2gobiksbi5nZXRFZGdlKC0xKS5zZXRUd2luKGUudHdpbiksbi5nZXRFZGdlKDApfSxhZGROZXdGYWNlczpmdW5jdGlvbih0LGUpe3RoaXMubmV3RmFjZXM9W107Zm9yKHZhciBuPW51bGwscj1udWxsLGk9MDtpPGUubGVuZ3RoO2krKyl7dmFyIG89ZVtpXSxhPXRoaXMuYWRkQWRqb2luaW5nRmFjZSh0LG8pO251bGw9PT1uP249YTphLm5leHQuc2V0VHdpbihyKSx0aGlzLm5ld0ZhY2VzLnB1c2goYS5mYWNlKSxyPWF9cmV0dXJuIG4ubmV4dC5zZXRUd2luKHIpLHRoaXN9LGFkZFZlcnRleFRvSHVsbDpmdW5jdGlvbih0KXt2YXIgZT1bXTtyZXR1cm4gdGhpcy51bmFzc2lnbmVkLmNsZWFyKCksdGhpcy5yZW1vdmVWZXJ0ZXhGcm9tRmFjZSh0LHQuZmFjZSksdGhpcy5jb21wdXRlSG9yaXpvbih0LnBvaW50LG51bGwsdC5mYWNlLGUpLHRoaXMuYWRkTmV3RmFjZXModCxlKSx0aGlzLnJlc29sdmVVbmFzc2lnbmVkUG9pbnRzKHRoaXMubmV3RmFjZXMpLHRoaXN9LGNsZWFudXA6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hc3NpZ25lZC5jbGVhcigpLHRoaXMudW5hc3NpZ25lZC5jbGVhcigpLHRoaXMubmV3RmFjZXM9W10sdGhpc30sY29tcHV0ZTpmdW5jdGlvbigpe3ZhciB0O2Zvcih0aGlzLmNvbXB1dGVJbml0aWFsSHVsbCgpO3ZvaWQgMCE9PSh0PXRoaXMubmV4dFZlcnRleFRvQWRkKCkpOyl0aGlzLmFkZFZlcnRleFRvSHVsbCh0KTtyZXR1cm4gdGhpcy5yZWluZGV4RmFjZXMoKSx0aGlzLmNsZWFudXAoKSx0aGlzfX0pLE9iamVjdC5hc3NpZ24ocyx7Y3JlYXRlOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uZXcgcyxpPW5ldyBjKHQsciksbz1uZXcgYyhlLHIpLGE9bmV3IGMobixyKTtyZXR1cm4gaS5uZXh0PWEucHJldj1vLG8ubmV4dD1pLnByZXY9YSxhLm5leHQ9by5wcmV2PWksci5lZGdlPWksci5jb21wdXRlKCl9fSksT2JqZWN0LmFzc2lnbihzLnByb3RvdHlwZSx7Z2V0RWRnZTpmdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy5lZGdlO3Q+MDspZT1lLm5leHQsdC0tO2Zvcig7dDwwOyllPWUucHJldix0Kys7cmV0dXJuIGV9LGNvbXB1dGU6ZnVuY3Rpb24oKXt2b2lkIDA9PT1pJiYoaT1uZXcgci5UcmlhbmdsZSk7dmFyIHQ9dGhpcy5lZGdlLnRhaWwoKSxlPXRoaXMuZWRnZS5oZWFkKCksbj10aGlzLmVkZ2UubmV4dC5oZWFkKCk7cmV0dXJuIGkuc2V0KHQucG9pbnQsZS5wb2ludCxuLnBvaW50KSxpLmdldE5vcm1hbCh0aGlzLm5vcm1hbCksaS5nZXRNaWRwb2ludCh0aGlzLm1pZHBvaW50KSx0aGlzLmFyZWE9aS5nZXRBcmVhKCksdGhpcy5jb25zdGFudD10aGlzLm5vcm1hbC5kb3QodGhpcy5taWRwb2ludCksdGhpc30sZGlzdGFuY2VUb1BvaW50OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm5vcm1hbC5kb3QodCktdGhpcy5jb25zdGFudH19KSxPYmplY3QuYXNzaWduKGMucHJvdG90eXBlLHtoZWFkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmVydGV4fSx0YWlsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJldj90aGlzLnByZXYudmVydGV4Om51bGx9LGxlbmd0aDpmdW5jdGlvbigpe3ZhciB0PXRoaXMuaGVhZCgpLGU9dGhpcy50YWlsKCk7cmV0dXJuIG51bGwhPT1lP2UucG9pbnQuZGlzdGFuY2VUbyh0LnBvaW50KTotMX0sbGVuZ3RoU3F1YXJlZDpmdW5jdGlvbigpe3ZhciB0PXRoaXMuaGVhZCgpLGU9dGhpcy50YWlsKCk7cmV0dXJuIG51bGwhPT1lP2UucG9pbnQuZGlzdGFuY2VUb1NxdWFyZWQodC5wb2ludCk6LTF9LHNldFR3aW46ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMudHdpbj10LHQudHdpbj10aGlzLHRoaXN9fSksT2JqZWN0LmFzc2lnbih1LnByb3RvdHlwZSx7Zmlyc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oZWFkfSxsYXN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGFpbH0sY2xlYXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oZWFkPXRoaXMudGFpbD1udWxsLHRoaXN9LGluc2VydEJlZm9yZTpmdW5jdGlvbih0LGUpe3JldHVybiBlLnByZXY9dC5wcmV2LGUubmV4dD10LG51bGw9PT1lLnByZXY/dGhpcy5oZWFkPWU6ZS5wcmV2Lm5leHQ9ZSx0LnByZXY9ZSx0aGlzfSxpbnNlcnRBZnRlcjpmdW5jdGlvbih0LGUpe3JldHVybiBlLnByZXY9dCxlLm5leHQ9dC5uZXh0LG51bGw9PT1lLm5leHQ/dGhpcy50YWlsPWU6ZS5uZXh0LnByZXY9ZSx0Lm5leHQ9ZSx0aGlzfSxhcHBlbmQ6ZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PT10aGlzLmhlYWQ/dGhpcy5oZWFkPXQ6dGhpcy50YWlsLm5leHQ9dCx0LnByZXY9dGhpcy50YWlsLHQubmV4dD1udWxsLHRoaXMudGFpbD10LHRoaXN9LGFwcGVuZENoYWluOmZ1bmN0aW9uKHQpe2ZvcihudWxsPT09dGhpcy5oZWFkP3RoaXMuaGVhZD10OnRoaXMudGFpbC5uZXh0PXQsdC5wcmV2PXRoaXMudGFpbDtudWxsIT09dC5uZXh0Oyl0PXQubmV4dDtyZXR1cm4gdGhpcy50YWlsPXQsdGhpc30scmVtb3ZlOmZ1bmN0aW9uKHQpe3JldHVybiBudWxsPT09dC5wcmV2P3RoaXMuaGVhZD10Lm5leHQ6dC5wcmV2Lm5leHQ9dC5uZXh0LG51bGw9PT10Lm5leHQ/dGhpcy50YWlsPXQucHJldjp0Lm5leHQucHJldj10LnByZXYsdGhpc30scmVtb3ZlU3ViTGlzdDpmdW5jdGlvbih0LGUpe3JldHVybiBudWxsPT09dC5wcmV2P3RoaXMuaGVhZD1lLm5leHQ6dC5wcmV2Lm5leHQ9ZS5uZXh0LG51bGw9PT1lLm5leHQ/dGhpcy50YWlsPXQucHJldjplLm5leHQucHJldj10LnByZXYsdGhpc30saXNFbXB0eTpmdW5jdGlvbigpe3JldHVybiBudWxsPT09dGhpcy5oZWFkfX0pLGF9KCksbz1mdW5jdGlvbih0KXtyLkdlb21ldHJ5LmNhbGwodGhpcyksdGhpcy5mcm9tQnVmZmVyR2VvbWV0cnkobmV3IGEodCkpLHRoaXMubWVyZ2VWZXJ0aWNlcygpfTtvLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHIuR2VvbWV0cnkucHJvdG90eXBlKSxvLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1vO3ZhciBhPWZ1bmN0aW9uKHQpe3IuQnVmZmVyR2VvbWV0cnkuY2FsbCh0aGlzKTt2YXIgZT1bXSxuPVtdO3ZvaWQgMD09PWkmJmNvbnNvbGUuZXJyb3IoXCJUSFJFRS5Db252ZXhCdWZmZXJHZW9tZXRyeTogQ29udmV4QnVmZmVyR2VvbWV0cnkgcmVsaWVzIG9uIENvbnZleEh1bGxcIik7Zm9yKHZhciBvPShuZXcgaSkuc2V0RnJvbVBvaW50cyh0KS5mYWNlcyxhPTA7YTxvLmxlbmd0aDthKyspe3ZhciBzPW9bYV0sYz1zLmVkZ2U7ZG97dmFyIGw9Yy5oZWFkKCkucG9pbnQ7ZS5wdXNoKGwueCxsLnksbC56KSxuLnB1c2gocy5ub3JtYWwueCxzLm5vcm1hbC55LHMubm9ybWFsLnopLGM9Yy5uZXh0fXdoaWxlKGMhPT1zLmVkZ2UpfXRoaXMuc2V0QXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgci5GbG9hdDMyQnVmZmVyQXR0cmlidXRlKGUsMykpLHRoaXMuc2V0QXR0cmlidXRlKFwibm9ybWFsXCIsbmV3IHIuRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZShuLDMpKX07YS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShyLkJ1ZmZlckdlb21ldHJ5LnByb3RvdHlwZSksYS5wcm90b3R5cGUuY29uc3RydWN0b3I9YX0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO24ucihlKSxuLmQoZSxcIlhSQ29udHJvbGxlck1vZGVsRmFjdG9yeVwiLChmdW5jdGlvbigpe3JldHVybiBmfSkpO3ZhciByPW4oMCksaT1uKDMpO2NvbnN0IG89e0hhbmRlZG5lc3M6T2JqZWN0LmZyZWV6ZSh7Tk9ORTpcIm5vbmVcIixMRUZUOlwibGVmdFwiLFJJR0hUOlwicmlnaHRcIn0pLENvbXBvbmVudFN0YXRlOk9iamVjdC5mcmVlemUoe0RFRkFVTFQ6XCJkZWZhdWx0XCIsVE9VQ0hFRDpcInRvdWNoZWRcIixQUkVTU0VEOlwicHJlc3NlZFwifSksQ29tcG9uZW50UHJvcGVydHk6T2JqZWN0LmZyZWV6ZSh7QlVUVE9OOlwiYnV0dG9uXCIsWF9BWElTOlwieEF4aXNcIixZX0FYSVM6XCJ5QXhpc1wiLFNUQVRFOlwic3RhdGVcIn0pLENvbXBvbmVudFR5cGU6T2JqZWN0LmZyZWV6ZSh7VFJJR0dFUjpcInRyaWdnZXJcIixTUVVFRVpFOlwic3F1ZWV6ZVwiLFRPVUNIUEFEOlwidG91Y2hwYWRcIixUSFVNQlNUSUNLOlwidGh1bWJzdGlja1wiLEJVVFRPTjpcImJ1dHRvblwifSksQnV0dG9uVG91Y2hUaHJlc2hvbGQ6LjA1LEF4aXNUb3VjaFRocmVzaG9sZDouMSxWaXN1YWxSZXNwb25zZVByb3BlcnR5Ok9iamVjdC5mcmVlemUoe1RSQU5TRk9STTpcInRyYW5zZm9ybVwiLFZJU0lCSUxJVFk6XCJ2aXNpYmlsaXR5XCJ9KX07YXN5bmMgZnVuY3Rpb24gYSh0KXtjb25zdCBlPWF3YWl0IGZldGNoKHQpO2lmKGUub2spcmV0dXJuIGUuanNvbigpO3Rocm93IG5ldyBFcnJvcihlLnN0YXR1c1RleHQpfWFzeW5jIGZ1bmN0aW9uIHModCxlLG49bnVsbCxyPSEwKXtpZighdCl0aHJvdyBuZXcgRXJyb3IoXCJObyB4cklucHV0U291cmNlIHN1cHBsaWVkXCIpO2lmKCFlKXRocm93IG5ldyBFcnJvcihcIk5vIGJhc2VQYXRoIHN1cHBsaWVkXCIpO2NvbnN0IGk9YXdhaXQgYXN5bmMgZnVuY3Rpb24odCl7aWYoIXQpdGhyb3cgbmV3IEVycm9yKFwiTm8gYmFzZVBhdGggc3VwcGxpZWRcIik7cmV0dXJuIGF3YWl0IGEodCtcIi9wcm9maWxlc0xpc3QuanNvblwiKX0oZSk7bGV0IG87aWYodC5wcm9maWxlcy5zb21lKHQ9Pntjb25zdCBuPWlbdF07cmV0dXJuIG4mJihvPXtwcm9maWxlSWQ6dCxwcm9maWxlUGF0aDpgJHtlfS8ke24ucGF0aH1gLGRlcHJlY2F0ZWQ6ISFuLmRlcHJlY2F0ZWR9KSwhIW99KSwhbyl7aWYoIW4pdGhyb3cgbmV3IEVycm9yKFwiTm8gbWF0Y2hpbmcgcHJvZmlsZSBuYW1lIGZvdW5kXCIpO2NvbnN0IHQ9aVtuXTtpZighdCl0aHJvdyBuZXcgRXJyb3IoYE5vIG1hdGNoaW5nIHByb2ZpbGUgbmFtZSBmb3VuZCBhbmQgZGVmYXVsdCBwcm9maWxlIFwiJHtufVwiIG1pc3NpbmcuYCk7bz17cHJvZmlsZUlkOm4scHJvZmlsZVBhdGg6YCR7ZX0vJHt0LnBhdGh9YCxkZXByZWNhdGVkOiEhdC5kZXByZWNhdGVkfX1jb25zdCBzPWF3YWl0IGEoby5wcm9maWxlUGF0aCk7bGV0IGM7aWYocil7bGV0IGU7aWYoZT1cImFueVwiPT09dC5oYW5kZWRuZXNzP3MubGF5b3V0c1tPYmplY3Qua2V5cyhzLmxheW91dHMpWzBdXTpzLmxheW91dHNbdC5oYW5kZWRuZXNzXSwhZSl0aHJvdyBuZXcgRXJyb3IoYE5vIG1hdGNoaW5nIGhhbmRlZG5lc3MsICR7dC5oYW5kZWRuZXNzfSwgaW4gcHJvZmlsZSAke28ucHJvZmlsZUlkfWApO2UuYXNzZXRQYXRoJiYoYz1vLnByb2ZpbGVQYXRoLnJlcGxhY2UoXCJwcm9maWxlLmpzb25cIixlLmFzc2V0UGF0aCkpfXJldHVybntwcm9maWxlOnMsYXNzZXRQYXRoOmN9fWNvbnN0IGM9e3hBeGlzOjAseUF4aXM6MCxidXR0b246MCxzdGF0ZTpvLkNvbXBvbmVudFN0YXRlLkRFRkFVTFR9O2NsYXNzIGx7Y29uc3RydWN0b3IodCl7dGhpcy5jb21wb25lbnRQcm9wZXJ0eT10LmNvbXBvbmVudFByb3BlcnR5LHRoaXMuc3RhdGVzPXQuc3RhdGVzLHRoaXMudmFsdWVOb2RlTmFtZT10LnZhbHVlTm9kZU5hbWUsdGhpcy52YWx1ZU5vZGVQcm9wZXJ0eT10LnZhbHVlTm9kZVByb3BlcnR5LHRoaXMudmFsdWVOb2RlUHJvcGVydHk9PT1vLlZpc3VhbFJlc3BvbnNlUHJvcGVydHkuVFJBTlNGT1JNJiYodGhpcy5taW5Ob2RlTmFtZT10Lm1pbk5vZGVOYW1lLHRoaXMubWF4Tm9kZU5hbWU9dC5tYXhOb2RlTmFtZSksdGhpcy52YWx1ZT0wLHRoaXMudXBkYXRlRnJvbUNvbXBvbmVudChjKX11cGRhdGVGcm9tQ29tcG9uZW50KHt4QXhpczp0LHlBeGlzOmUsYnV0dG9uOm4sc3RhdGU6cn0pe2NvbnN0e25vcm1hbGl6ZWRYQXhpczppLG5vcm1hbGl6ZWRZQXhpczphfT1mdW5jdGlvbih0PTAsZT0wKXtsZXQgbj10LHI9ZTtpZihNYXRoLnNxcnQodCp0K2UqZSk+MSl7Y29uc3QgaT1NYXRoLmF0YW4yKGUsdCk7bj1NYXRoLmNvcyhpKSxyPU1hdGguc2luKGkpfXJldHVybntub3JtYWxpemVkWEF4aXM6LjUqbisuNSxub3JtYWxpemVkWUF4aXM6LjUqcisuNX19KHQsZSk7c3dpdGNoKHRoaXMuY29tcG9uZW50UHJvcGVydHkpe2Nhc2Ugby5Db21wb25lbnRQcm9wZXJ0eS5YX0FYSVM6dGhpcy52YWx1ZT10aGlzLnN0YXRlcy5pbmNsdWRlcyhyKT9pOi41O2JyZWFrO2Nhc2Ugby5Db21wb25lbnRQcm9wZXJ0eS5ZX0FYSVM6dGhpcy52YWx1ZT10aGlzLnN0YXRlcy5pbmNsdWRlcyhyKT9hOi41O2JyZWFrO2Nhc2Ugby5Db21wb25lbnRQcm9wZXJ0eS5CVVRUT046dGhpcy52YWx1ZT10aGlzLnN0YXRlcy5pbmNsdWRlcyhyKT9uOjA7YnJlYWs7Y2FzZSBvLkNvbXBvbmVudFByb3BlcnR5LlNUQVRFOnRoaXMudmFsdWVOb2RlUHJvcGVydHk9PT1vLlZpc3VhbFJlc3BvbnNlUHJvcGVydHkuVklTSUJJTElUWT90aGlzLnZhbHVlPXRoaXMuc3RhdGVzLmluY2x1ZGVzKHIpOnRoaXMudmFsdWU9dGhpcy5zdGF0ZXMuaW5jbHVkZXMocik/MTowO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKFwiVW5leHBlY3RlZCB2aXN1YWxSZXNwb25zZSBjb21wb25lbnRQcm9wZXJ0eSBcIit0aGlzLmNvbXBvbmVudFByb3BlcnR5KX19fWNsYXNzIHV7Y29uc3RydWN0b3IodCxlKXtpZighKHQmJmUmJmUudmlzdWFsUmVzcG9uc2VzJiZlLmdhbWVwYWRJbmRpY2VzJiYwIT09T2JqZWN0LmtleXMoZS5nYW1lcGFkSW5kaWNlcykubGVuZ3RoKSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGFyZ3VtZW50cyBzdXBwbGllZFwiKTt0aGlzLmlkPXQsdGhpcy50eXBlPWUudHlwZSx0aGlzLnJvb3ROb2RlTmFtZT1lLnJvb3ROb2RlTmFtZSx0aGlzLnRvdWNoUG9pbnROb2RlTmFtZT1lLnRvdWNoUG9pbnROb2RlTmFtZSx0aGlzLnZpc3VhbFJlc3BvbnNlcz17fSxPYmplY3Qua2V5cyhlLnZpc3VhbFJlc3BvbnNlcykuZm9yRWFjaCh0PT57Y29uc3Qgbj1uZXcgbChlLnZpc3VhbFJlc3BvbnNlc1t0XSk7dGhpcy52aXN1YWxSZXNwb25zZXNbdF09bn0pLHRoaXMuZ2FtZXBhZEluZGljZXM9T2JqZWN0LmFzc2lnbih7fSxlLmdhbWVwYWRJbmRpY2VzKSx0aGlzLnZhbHVlcz17c3RhdGU6by5Db21wb25lbnRTdGF0ZS5ERUZBVUxULGJ1dHRvbjp2b2lkIDAhPT10aGlzLmdhbWVwYWRJbmRpY2VzLmJ1dHRvbj8wOnZvaWQgMCx4QXhpczp2b2lkIDAhPT10aGlzLmdhbWVwYWRJbmRpY2VzLnhBeGlzPzA6dm9pZCAwLHlBeGlzOnZvaWQgMCE9PXRoaXMuZ2FtZXBhZEluZGljZXMueUF4aXM/MDp2b2lkIDB9fWdldCBkYXRhKCl7cmV0dXJue2lkOnRoaXMuaWQsLi4udGhpcy52YWx1ZXN9fXVwZGF0ZUZyb21HYW1lcGFkKHQpe2lmKHRoaXMudmFsdWVzLnN0YXRlPW8uQ29tcG9uZW50U3RhdGUuREVGQVVMVCx2b2lkIDAhPT10aGlzLmdhbWVwYWRJbmRpY2VzLmJ1dHRvbiYmdC5idXR0b25zLmxlbmd0aD50aGlzLmdhbWVwYWRJbmRpY2VzLmJ1dHRvbil7Y29uc3QgZT10LmJ1dHRvbnNbdGhpcy5nYW1lcGFkSW5kaWNlcy5idXR0b25dO3RoaXMudmFsdWVzLmJ1dHRvbj1lLnZhbHVlLHRoaXMudmFsdWVzLmJ1dHRvbj10aGlzLnZhbHVlcy5idXR0b248MD8wOnRoaXMudmFsdWVzLmJ1dHRvbix0aGlzLnZhbHVlcy5idXR0b249dGhpcy52YWx1ZXMuYnV0dG9uPjE/MTp0aGlzLnZhbHVlcy5idXR0b24sZS5wcmVzc2VkfHwxPT09dGhpcy52YWx1ZXMuYnV0dG9uP3RoaXMudmFsdWVzLnN0YXRlPW8uQ29tcG9uZW50U3RhdGUuUFJFU1NFRDooZS50b3VjaGVkfHx0aGlzLnZhbHVlcy5idXR0b24+by5CdXR0b25Ub3VjaFRocmVzaG9sZCkmJih0aGlzLnZhbHVlcy5zdGF0ZT1vLkNvbXBvbmVudFN0YXRlLlRPVUNIRUQpfXZvaWQgMCE9PXRoaXMuZ2FtZXBhZEluZGljZXMueEF4aXMmJnQuYXhlcy5sZW5ndGg+dGhpcy5nYW1lcGFkSW5kaWNlcy54QXhpcyYmKHRoaXMudmFsdWVzLnhBeGlzPXQuYXhlc1t0aGlzLmdhbWVwYWRJbmRpY2VzLnhBeGlzXSx0aGlzLnZhbHVlcy54QXhpcz10aGlzLnZhbHVlcy54QXhpczwtMT8tMTp0aGlzLnZhbHVlcy54QXhpcyx0aGlzLnZhbHVlcy54QXhpcz10aGlzLnZhbHVlcy54QXhpcz4xPzE6dGhpcy52YWx1ZXMueEF4aXMsdGhpcy52YWx1ZXMuc3RhdGU9PT1vLkNvbXBvbmVudFN0YXRlLkRFRkFVTFQmJk1hdGguYWJzKHRoaXMudmFsdWVzLnhBeGlzKT5vLkF4aXNUb3VjaFRocmVzaG9sZCYmKHRoaXMudmFsdWVzLnN0YXRlPW8uQ29tcG9uZW50U3RhdGUuVE9VQ0hFRCkpLHZvaWQgMCE9PXRoaXMuZ2FtZXBhZEluZGljZXMueUF4aXMmJnQuYXhlcy5sZW5ndGg+dGhpcy5nYW1lcGFkSW5kaWNlcy55QXhpcyYmKHRoaXMudmFsdWVzLnlBeGlzPXQuYXhlc1t0aGlzLmdhbWVwYWRJbmRpY2VzLnlBeGlzXSx0aGlzLnZhbHVlcy55QXhpcz10aGlzLnZhbHVlcy55QXhpczwtMT8tMTp0aGlzLnZhbHVlcy55QXhpcyx0aGlzLnZhbHVlcy55QXhpcz10aGlzLnZhbHVlcy55QXhpcz4xPzE6dGhpcy52YWx1ZXMueUF4aXMsdGhpcy52YWx1ZXMuc3RhdGU9PT1vLkNvbXBvbmVudFN0YXRlLkRFRkFVTFQmJk1hdGguYWJzKHRoaXMudmFsdWVzLnlBeGlzKT5vLkF4aXNUb3VjaFRocmVzaG9sZCYmKHRoaXMudmFsdWVzLnN0YXRlPW8uQ29tcG9uZW50U3RhdGUuVE9VQ0hFRCkpLE9iamVjdC52YWx1ZXModGhpcy52aXN1YWxSZXNwb25zZXMpLmZvckVhY2godD0+e3QudXBkYXRlRnJvbUNvbXBvbmVudCh0aGlzLnZhbHVlcyl9KX19Y2xhc3MgaHtjb25zdHJ1Y3Rvcih0LGUsbil7aWYoIXQpdGhyb3cgbmV3IEVycm9yKFwiTm8geHJJbnB1dFNvdXJjZSBzdXBwbGllZFwiKTtpZighZSl0aHJvdyBuZXcgRXJyb3IoXCJObyBwcm9maWxlIHN1cHBsaWVkXCIpO3RoaXMueHJJbnB1dFNvdXJjZT10LHRoaXMuYXNzZXRVcmw9bix0aGlzLmlkPWUucHJvZmlsZUlkLHRoaXMubGF5b3V0RGVzY3JpcHRpb249ZS5sYXlvdXRzW3QuaGFuZGVkbmVzc10sdGhpcy5jb21wb25lbnRzPXt9LE9iamVjdC5rZXlzKHRoaXMubGF5b3V0RGVzY3JpcHRpb24uY29tcG9uZW50cykuZm9yRWFjaCh0PT57Y29uc3QgZT10aGlzLmxheW91dERlc2NyaXB0aW9uLmNvbXBvbmVudHNbdF07dGhpcy5jb21wb25lbnRzW3RdPW5ldyB1KHQsZSl9KSx0aGlzLnVwZGF0ZUZyb21HYW1lcGFkKCl9Z2V0IGdyaXBTcGFjZSgpe3JldHVybiB0aGlzLnhySW5wdXRTb3VyY2UuZ3JpcFNwYWNlfWdldCB0YXJnZXRSYXlTcGFjZSgpe3JldHVybiB0aGlzLnhySW5wdXRTb3VyY2UudGFyZ2V0UmF5U3BhY2V9Z2V0IGRhdGEoKXtjb25zdCB0PVtdO3JldHVybiBPYmplY3QudmFsdWVzKHRoaXMuY29tcG9uZW50cykuZm9yRWFjaChlPT57dC5wdXNoKGUuZGF0YSl9KSx0fXVwZGF0ZUZyb21HYW1lcGFkKCl7T2JqZWN0LnZhbHVlcyh0aGlzLmNvbXBvbmVudHMpLmZvckVhY2godD0+e3QudXBkYXRlRnJvbUdhbWVwYWQodGhpcy54cklucHV0U291cmNlLmdhbWVwYWQpfSl9fWZ1bmN0aW9uIGQoKXtyLk9iamVjdDNELmNhbGwodGhpcyksdGhpcy5tb3Rpb25Db250cm9sbGVyPW51bGwsdGhpcy5lbnZNYXA9bnVsbH1mdW5jdGlvbiBwKHQsZSl7IWZ1bmN0aW9uKHQsZSl7T2JqZWN0LnZhbHVlcyh0LmNvbXBvbmVudHMpLmZvckVhY2godD0+e2NvbnN0e3R5cGU6bix0b3VjaFBvaW50Tm9kZU5hbWU6aSx2aXN1YWxSZXNwb25zZXM6YX09dDtpZihuPT09by5Db21wb25lbnRUeXBlLlRPVUNIUEFEKWlmKHQudG91Y2hQb2ludE5vZGU9ZS5nZXRPYmplY3RCeU5hbWUoaSksdC50b3VjaFBvaW50Tm9kZSl7Y29uc3QgZT1uZXcgci5TcGhlcmVCdWZmZXJHZW9tZXRyeSguMDAxKSxuPW5ldyByLk1lc2hCYXNpY01hdGVyaWFsKHtjb2xvcjoyNTV9KSxpPW5ldyByLk1lc2goZSxuKTt0LnRvdWNoUG9pbnROb2RlLmFkZChpKX1lbHNlIGNvbnNvbGUud2FybihgQ291bGQgbm90IGZpbmQgdG91Y2ggZG90LCAke3QudG91Y2hQb2ludE5vZGVOYW1lfSwgaW4gdG91Y2hwYWQgY29tcG9uZW50ICR7dC5pZH1gKTtPYmplY3QudmFsdWVzKGEpLmZvckVhY2godD0+e2NvbnN0e3ZhbHVlTm9kZU5hbWU6bixtaW5Ob2RlTmFtZTpyLG1heE5vZGVOYW1lOmksdmFsdWVOb2RlUHJvcGVydHk6YX09dDtpZihhPT09by5WaXN1YWxSZXNwb25zZVByb3BlcnR5LlRSQU5TRk9STSl7aWYodC5taW5Ob2RlPWUuZ2V0T2JqZWN0QnlOYW1lKHIpLHQubWF4Tm9kZT1lLmdldE9iamVjdEJ5TmFtZShpKSwhdC5taW5Ob2RlKXJldHVybiB2b2lkIGNvbnNvbGUud2FybihgQ291bGQgbm90IGZpbmQgJHtyfSBpbiB0aGUgbW9kZWxgKTtpZighdC5tYXhOb2RlKXJldHVybiB2b2lkIGNvbnNvbGUud2FybihgQ291bGQgbm90IGZpbmQgJHtpfSBpbiB0aGUgbW9kZWxgKX10LnZhbHVlTm9kZT1lLmdldE9iamVjdEJ5TmFtZShuKSx0LnZhbHVlTm9kZXx8Y29uc29sZS53YXJuKGBDb3VsZCBub3QgZmluZCAke259IGluIHRoZSBtb2RlbGApfSl9KX0odC5tb3Rpb25Db250cm9sbGVyLGUpLHQuZW52TWFwJiZlLnRyYXZlcnNlKGU9PntlLmlzTWVzaCYmKGUubWF0ZXJpYWwuZW52TWFwPXQuZW52TWFwLGUubWF0ZXJpYWwubmVlZHNVcGRhdGU9ITApfSksdC5hZGQoZSl9ZC5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKHIuT2JqZWN0M0QucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6ZCxzZXRFbnZpcm9ubWVudE1hcDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5lbnZNYXA9PXR8fCh0aGlzLmVudk1hcD10LHRoaXMudHJhdmVyc2UodD0+e3QuaXNNZXNoJiYodC5tYXRlcmlhbC5lbnZNYXA9dGhpcy5lbnZNYXAsdC5tYXRlcmlhbC5uZWVkc1VwZGF0ZT0hMCl9KSksdGhpc30sdXBkYXRlTWF0cml4V29ybGQ6ZnVuY3Rpb24odCl7ci5PYmplY3QzRC5wcm90b3R5cGUudXBkYXRlTWF0cml4V29ybGQuY2FsbCh0aGlzLHQpLHRoaXMubW90aW9uQ29udHJvbGxlciYmKHRoaXMubW90aW9uQ29udHJvbGxlci51cGRhdGVGcm9tR2FtZXBhZCgpLE9iamVjdC52YWx1ZXModGhpcy5tb3Rpb25Db250cm9sbGVyLmNvbXBvbmVudHMpLmZvckVhY2godD0+e09iamVjdC52YWx1ZXModC52aXN1YWxSZXNwb25zZXMpLmZvckVhY2godD0+e2NvbnN0e3ZhbHVlTm9kZTplLG1pbk5vZGU6bixtYXhOb2RlOmksdmFsdWU6YSx2YWx1ZU5vZGVQcm9wZXJ0eTpzfT10O2UmJihzPT09by5WaXN1YWxSZXNwb25zZVByb3BlcnR5LlZJU0lCSUxJVFk/ZS52aXNpYmxlPWE6cz09PW8uVmlzdWFsUmVzcG9uc2VQcm9wZXJ0eS5UUkFOU0ZPUk0mJihyLlF1YXRlcm5pb24uc2xlcnAobi5xdWF0ZXJuaW9uLGkucXVhdGVybmlvbixlLnF1YXRlcm5pb24sYSksZS5wb3NpdGlvbi5sZXJwVmVjdG9ycyhuLnBvc2l0aW9uLGkucG9zaXRpb24sYSkpKX0pfSkpfX0pO3ZhciBmPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0PW51bGwpe3RoaXMuZ2x0ZkxvYWRlcj10LHRoaXMucGF0aD1cImh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vQHdlYnhyLWlucHV0LXByb2ZpbGVzL2Fzc2V0c0AxLjAvZGlzdC9wcm9maWxlc1wiLHRoaXMuX2Fzc2V0Q2FjaGU9e30sdGhpcy5nbHRmTG9hZGVyfHwodGhpcy5nbHRmTG9hZGVyPW5ldyBpLkdMVEZMb2FkZXIpfXJldHVybiB0LnByb3RvdHlwZT17Y29uc3RydWN0b3I6dCxjcmVhdGVDb250cm9sbGVyTW9kZWw6ZnVuY3Rpb24odCl7Y29uc3QgZT1uZXcgZDtsZXQgbj1udWxsO3JldHVybiB0LmFkZEV2ZW50TGlzdGVuZXIoXCJjb25uZWN0ZWRcIix0PT57Y29uc3Qgcj10LmRhdGE7XCJ0cmFja2VkLXBvaW50ZXJcIj09PXIudGFyZ2V0UmF5TW9kZSYmci5nYW1lcGFkJiZzKHIsdGhpcy5wYXRoLFwiZ2VuZXJpYy10cmlnZ2VyXCIpLnRoZW4oKHtwcm9maWxlOnQsYXNzZXRQYXRoOml9KT0+e2UubW90aW9uQ29udHJvbGxlcj1uZXcgaChyLHQsaSk7Y29uc3Qgbz10aGlzLl9hc3NldENhY2hlW2UubW90aW9uQ29udHJvbGxlci5hc3NldFVybF07aWYobyluPW8uc2NlbmUuY2xvbmUoKSxwKGUsbik7ZWxzZXtpZighdGhpcy5nbHRmTG9hZGVyKXRocm93IG5ldyBFcnJvcihcIkdMVEZMb2FkZXIgbm90IHNldC5cIik7dGhpcy5nbHRmTG9hZGVyLnNldFBhdGgoXCJcIiksdGhpcy5nbHRmTG9hZGVyLmxvYWQoZS5tb3Rpb25Db250cm9sbGVyLmFzc2V0VXJsLHQ9Pnt0aGlzLl9hc3NldENhY2hlW2UubW90aW9uQ29udHJvbGxlci5hc3NldFVybF09dCxuPXQuc2NlbmUuY2xvbmUoKSxwKGUsbil9LG51bGwsKCk9Pnt0aHJvdyBuZXcgRXJyb3IoYEFzc2V0ICR7ZS5tb3Rpb25Db250cm9sbGVyLmFzc2V0VXJsfSBtaXNzaW5nIG9yIG1hbGZvcm1lZC5gKX0pfX0pLmNhdGNoKHQ9Pntjb25zb2xlLndhcm4odCl9KX0pLHQuYWRkRXZlbnRMaXN0ZW5lcihcImRpc2Nvbm5lY3RlZFwiLCgpPT57ZS5tb3Rpb25Db250cm9sbGVyPW51bGwsZS5yZW1vdmUobiksbj1udWxsfSksZX19LHR9KCl9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtuLnIoZSksbi5kKGUsXCJBbmltYXRpb25BY3Rpb25cIiwoZnVuY3Rpb24oKXtyZXR1cm4gcn0pKTtjbGFzcyBye2NvbnN0cnVjdG9yKHQsZSxuPW51bGwscj1lLmJsZW5kTW9kZSl7dGhpcy5fbWl4ZXI9dCx0aGlzLl9jbGlwPWUsdGhpcy5fbG9jYWxSb290PW4sdGhpcy5ibGVuZE1vZGU9cjtjb25zdCBpPWUudHJhY2tzLG89aS5sZW5ndGgsYT1uZXcgQXJyYXkobykscz17ZW5kaW5nU3RhcnQ6MjQwMCxlbmRpbmdFbmQ6MjQwMH07Zm9yKGxldCB0PTA7dCE9PW87Kyt0KXtjb25zdCBlPWlbdF0uY3JlYXRlSW50ZXJwb2xhbnQobnVsbCk7YVt0XT1lLGUuc2V0dGluZ3M9c310aGlzLl9pbnRlcnBvbGFudFNldHRpbmdzPXMsdGhpcy5faW50ZXJwb2xhbnRzPWEsdGhpcy5fcHJvcGVydHlCaW5kaW5ncz1uZXcgQXJyYXkobyksdGhpcy5fY2FjaGVJbmRleD1udWxsLHRoaXMuX2J5Q2xpcENhY2hlSW5kZXg9bnVsbCx0aGlzLl90aW1lU2NhbGVJbnRlcnBvbGFudD1udWxsLHRoaXMuX3dlaWdodEludGVycG9sYW50PW51bGwsdGhpcy5sb29wPTIyMDEsdGhpcy5fbG9vcENvdW50PS0xLHRoaXMuX3N0YXJ0VGltZT1udWxsLHRoaXMudGltZT0wLHRoaXMudGltZVNjYWxlPTEsdGhpcy5fZWZmZWN0aXZlVGltZVNjYWxlPTEsdGhpcy53ZWlnaHQ9MSx0aGlzLl9lZmZlY3RpdmVXZWlnaHQ9MSx0aGlzLnJlcGV0aXRpb25zPTEvMCx0aGlzLnBhdXNlZD0hMSx0aGlzLmVuYWJsZWQ9ITAsdGhpcy5jbGFtcFdoZW5GaW5pc2hlZD0hMSx0aGlzLnplcm9TbG9wZUF0U3RhcnQ9ITAsdGhpcy56ZXJvU2xvcGVBdEVuZD0hMH1wbGF5KCl7cmV0dXJuIHRoaXMuX21peGVyLl9hY3RpdmF0ZUFjdGlvbih0aGlzKSx0aGlzfXN0b3AoKXtyZXR1cm4gdGhpcy5fbWl4ZXIuX2RlYWN0aXZhdGVBY3Rpb24odGhpcyksdGhpcy5yZXNldCgpfXJlc2V0KCl7cmV0dXJuIHRoaXMucGF1c2VkPSExLHRoaXMuZW5hYmxlZD0hMCx0aGlzLnRpbWU9MCx0aGlzLl9sb29wQ291bnQ9LTEsdGhpcy5fc3RhcnRUaW1lPW51bGwsdGhpcy5zdG9wRmFkaW5nKCkuc3RvcFdhcnBpbmcoKX1pc1J1bm5pbmcoKXtyZXR1cm4gdGhpcy5lbmFibGVkJiYhdGhpcy5wYXVzZWQmJjAhPT10aGlzLnRpbWVTY2FsZSYmbnVsbD09PXRoaXMuX3N0YXJ0VGltZSYmdGhpcy5fbWl4ZXIuX2lzQWN0aXZlQWN0aW9uKHRoaXMpfWlzU2NoZWR1bGVkKCl7cmV0dXJuIHRoaXMuX21peGVyLl9pc0FjdGl2ZUFjdGlvbih0aGlzKX1zdGFydEF0KHQpe3JldHVybiB0aGlzLl9zdGFydFRpbWU9dCx0aGlzfXNldExvb3AodCxlKXtyZXR1cm4gdGhpcy5sb29wPXQsdGhpcy5yZXBldGl0aW9ucz1lLHRoaXN9c2V0RWZmZWN0aXZlV2VpZ2h0KHQpe3JldHVybiB0aGlzLndlaWdodD10LHRoaXMuX2VmZmVjdGl2ZVdlaWdodD10aGlzLmVuYWJsZWQ/dDowLHRoaXMuc3RvcEZhZGluZygpfWdldEVmZmVjdGl2ZVdlaWdodCgpe3JldHVybiB0aGlzLl9lZmZlY3RpdmVXZWlnaHR9ZmFkZUluKHQpe3JldHVybiB0aGlzLl9zY2hlZHVsZUZhZGluZyh0LDAsMSl9ZmFkZU91dCh0KXtyZXR1cm4gdGhpcy5fc2NoZWR1bGVGYWRpbmcodCwxLDApfWNyb3NzRmFkZUZyb20odCxlLG4pe2lmKHQuZmFkZU91dChlKSx0aGlzLmZhZGVJbihlKSxuKXtjb25zdCBuPXRoaXMuX2NsaXAuZHVyYXRpb24scj10Ll9jbGlwLmR1cmF0aW9uLGk9ci9uLG89bi9yO3Qud2FycCgxLGksZSksdGhpcy53YXJwKG8sMSxlKX1yZXR1cm4gdGhpc31jcm9zc0ZhZGVUbyh0LGUsbil7cmV0dXJuIHQuY3Jvc3NGYWRlRnJvbSh0aGlzLGUsbil9c3RvcEZhZGluZygpe2NvbnN0IHQ9dGhpcy5fd2VpZ2h0SW50ZXJwb2xhbnQ7cmV0dXJuIG51bGwhPT10JiYodGhpcy5fd2VpZ2h0SW50ZXJwb2xhbnQ9bnVsbCx0aGlzLl9taXhlci5fdGFrZUJhY2tDb250cm9sSW50ZXJwb2xhbnQodCkpLHRoaXN9c2V0RWZmZWN0aXZlVGltZVNjYWxlKHQpe3JldHVybiB0aGlzLnRpbWVTY2FsZT10LHRoaXMuX2VmZmVjdGl2ZVRpbWVTY2FsZT10aGlzLnBhdXNlZD8wOnQsdGhpcy5zdG9wV2FycGluZygpfWdldEVmZmVjdGl2ZVRpbWVTY2FsZSgpe3JldHVybiB0aGlzLl9lZmZlY3RpdmVUaW1lU2NhbGV9c2V0RHVyYXRpb24odCl7cmV0dXJuIHRoaXMudGltZVNjYWxlPXRoaXMuX2NsaXAuZHVyYXRpb24vdCx0aGlzLnN0b3BXYXJwaW5nKCl9c3luY1dpdGgodCl7cmV0dXJuIHRoaXMudGltZT10LnRpbWUsdGhpcy50aW1lU2NhbGU9dC50aW1lU2NhbGUsdGhpcy5zdG9wV2FycGluZygpfWhhbHQodCl7cmV0dXJuIHRoaXMud2FycCh0aGlzLl9lZmZlY3RpdmVUaW1lU2NhbGUsMCx0KX13YXJwKHQsZSxuKXtjb25zdCByPXRoaXMuX21peGVyLGk9ci50aW1lLG89dGhpcy50aW1lU2NhbGU7bGV0IGE9dGhpcy5fdGltZVNjYWxlSW50ZXJwb2xhbnQ7bnVsbD09PWEmJihhPXIuX2xlbmRDb250cm9sSW50ZXJwb2xhbnQoKSx0aGlzLl90aW1lU2NhbGVJbnRlcnBvbGFudD1hKTtjb25zdCBzPWEucGFyYW1ldGVyUG9zaXRpb25zLGM9YS5zYW1wbGVWYWx1ZXM7cmV0dXJuIHNbMF09aSxzWzFdPWkrbixjWzBdPXQvbyxjWzFdPWUvbyx0aGlzfXN0b3BXYXJwaW5nKCl7Y29uc3QgdD10aGlzLl90aW1lU2NhbGVJbnRlcnBvbGFudDtyZXR1cm4gbnVsbCE9PXQmJih0aGlzLl90aW1lU2NhbGVJbnRlcnBvbGFudD1udWxsLHRoaXMuX21peGVyLl90YWtlQmFja0NvbnRyb2xJbnRlcnBvbGFudCh0KSksdGhpc31nZXRNaXhlcigpe3JldHVybiB0aGlzLl9taXhlcn1nZXRDbGlwKCl7cmV0dXJuIHRoaXMuX2NsaXB9Z2V0Um9vdCgpe3JldHVybiB0aGlzLl9sb2NhbFJvb3R8fHRoaXMuX21peGVyLl9yb290fV91cGRhdGUodCxlLG4scil7aWYoIXRoaXMuZW5hYmxlZClyZXR1cm4gdm9pZCB0aGlzLl91cGRhdGVXZWlnaHQodCk7Y29uc3QgaT10aGlzLl9zdGFydFRpbWU7aWYobnVsbCE9PWkpe2NvbnN0IHI9KHQtaSkqbjtpZihyPDB8fDA9PT1uKXJldHVybjt0aGlzLl9zdGFydFRpbWU9bnVsbCxlPW4qcn1lKj10aGlzLl91cGRhdGVUaW1lU2NhbGUodCk7Y29uc3Qgbz10aGlzLl91cGRhdGVUaW1lKGUpLGE9dGhpcy5fdXBkYXRlV2VpZ2h0KHQpO2lmKGE+MCl7Y29uc3QgdD10aGlzLl9pbnRlcnBvbGFudHMsZT10aGlzLl9wcm9wZXJ0eUJpbmRpbmdzO3N3aXRjaCh0aGlzLmJsZW5kTW9kZSl7Y2FzZSAyNTAxOmZvcihsZXQgbj0wLHI9dC5sZW5ndGg7biE9PXI7KytuKXRbbl0uZXZhbHVhdGUobyksZVtuXS5hY2N1bXVsYXRlQWRkaXRpdmUoYSk7YnJlYWs7Y2FzZSAyNTAwOmRlZmF1bHQ6Zm9yKGxldCBuPTAsaT10Lmxlbmd0aDtuIT09aTsrK24pdFtuXS5ldmFsdWF0ZShvKSxlW25dLmFjY3VtdWxhdGUocixhKX19fV91cGRhdGVXZWlnaHQodCl7bGV0IGU9MDtpZih0aGlzLmVuYWJsZWQpe2U9dGhpcy53ZWlnaHQ7Y29uc3Qgbj10aGlzLl93ZWlnaHRJbnRlcnBvbGFudDtpZihudWxsIT09bil7Y29uc3Qgcj1uLmV2YWx1YXRlKHQpWzBdO2UqPXIsdD5uLnBhcmFtZXRlclBvc2l0aW9uc1sxXSYmKHRoaXMuc3RvcEZhZGluZygpLDA9PT1yJiYodGhpcy5lbmFibGVkPSExKSl9fXJldHVybiB0aGlzLl9lZmZlY3RpdmVXZWlnaHQ9ZSxlfV91cGRhdGVUaW1lU2NhbGUodCl7bGV0IGU9MDtpZighdGhpcy5wYXVzZWQpe2U9dGhpcy50aW1lU2NhbGU7Y29uc3Qgbj10aGlzLl90aW1lU2NhbGVJbnRlcnBvbGFudDtpZihudWxsIT09bil7ZSo9bi5ldmFsdWF0ZSh0KVswXSx0Pm4ucGFyYW1ldGVyUG9zaXRpb25zWzFdJiYodGhpcy5zdG9wV2FycGluZygpLDA9PT1lP3RoaXMucGF1c2VkPSEwOnRoaXMudGltZVNjYWxlPWUpfX1yZXR1cm4gdGhpcy5fZWZmZWN0aXZlVGltZVNjYWxlPWUsZX1fdXBkYXRlVGltZSh0KXtjb25zdCBlPXRoaXMuX2NsaXAuZHVyYXRpb24sbj10aGlzLmxvb3A7bGV0IHI9dGhpcy50aW1lK3QsaT10aGlzLl9sb29wQ291bnQ7Y29uc3Qgbz0yMjAyPT09bjtpZigwPT09dClyZXR1cm4tMT09PWk/cjpvJiYxPT0oMSZpKT9lLXI6cjtpZigyMjAwPT09bil7LTE9PT1pJiYodGhpcy5fbG9vcENvdW50PTAsdGhpcy5fc2V0RW5kaW5ncyghMCwhMCwhMSkpO3Q6e2lmKHI+PWUpcj1lO2Vsc2V7aWYoIShyPDApKXt0aGlzLnRpbWU9cjticmVhayB0fXI9MH10aGlzLmNsYW1wV2hlbkZpbmlzaGVkP3RoaXMucGF1c2VkPSEwOnRoaXMuZW5hYmxlZD0hMSx0aGlzLnRpbWU9cix0aGlzLl9taXhlci5kaXNwYXRjaEV2ZW50KHt0eXBlOlwiZmluaXNoZWRcIixhY3Rpb246dGhpcyxkaXJlY3Rpb246dDwwPy0xOjF9KX19ZWxzZXtpZigtMT09PWkmJih0Pj0wPyhpPTAsdGhpcy5fc2V0RW5kaW5ncyghMCwwPT09dGhpcy5yZXBldGl0aW9ucyxvKSk6dGhpcy5fc2V0RW5kaW5ncygwPT09dGhpcy5yZXBldGl0aW9ucywhMCxvKSkscj49ZXx8cjwwKXtjb25zdCBuPU1hdGguZmxvb3Ioci9lKTtyLT1lKm4saSs9TWF0aC5hYnMobik7Y29uc3QgYT10aGlzLnJlcGV0aXRpb25zLWk7aWYoYTw9MCl0aGlzLmNsYW1wV2hlbkZpbmlzaGVkP3RoaXMucGF1c2VkPSEwOnRoaXMuZW5hYmxlZD0hMSxyPXQ+MD9lOjAsdGhpcy50aW1lPXIsdGhpcy5fbWl4ZXIuZGlzcGF0Y2hFdmVudCh7dHlwZTpcImZpbmlzaGVkXCIsYWN0aW9uOnRoaXMsZGlyZWN0aW9uOnQ+MD8xOi0xfSk7ZWxzZXtpZigxPT09YSl7Y29uc3QgZT10PDA7dGhpcy5fc2V0RW5kaW5ncyhlLCFlLG8pfWVsc2UgdGhpcy5fc2V0RW5kaW5ncyghMSwhMSxvKTt0aGlzLl9sb29wQ291bnQ9aSx0aGlzLnRpbWU9cix0aGlzLl9taXhlci5kaXNwYXRjaEV2ZW50KHt0eXBlOlwibG9vcFwiLGFjdGlvbjp0aGlzLGxvb3BEZWx0YTpufSl9fWVsc2UgdGhpcy50aW1lPXI7aWYobyYmMT09KDEmaSkpcmV0dXJuIGUtcn1yZXR1cm4gcn1fc2V0RW5kaW5ncyh0LGUsbil7Y29uc3Qgcj10aGlzLl9pbnRlcnBvbGFudFNldHRpbmdzO24/KHIuZW5kaW5nU3RhcnQ9MjQwMSxyLmVuZGluZ0VuZD0yNDAxKTooci5lbmRpbmdTdGFydD10P3RoaXMuemVyb1Nsb3BlQXRTdGFydD8yNDAxOjI0MDA6MjQwMixyLmVuZGluZ0VuZD1lP3RoaXMuemVyb1Nsb3BlQXRFbmQ/MjQwMToyNDAwOjI0MDIpfV9zY2hlZHVsZUZhZGluZyh0LGUsbil7Y29uc3Qgcj10aGlzLl9taXhlcixpPXIudGltZTtsZXQgbz10aGlzLl93ZWlnaHRJbnRlcnBvbGFudDtudWxsPT09byYmKG89ci5fbGVuZENvbnRyb2xJbnRlcnBvbGFudCgpLHRoaXMuX3dlaWdodEludGVycG9sYW50PW8pO2NvbnN0IGE9by5wYXJhbWV0ZXJQb3NpdGlvbnMscz1vLnNhbXBsZVZhbHVlcztyZXR1cm4gYVswXT1pLHNbMF09ZSxhWzFdPWkrdCxzWzFdPW4sdGhpc319fSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7bi5yKGUpLG4uZChlLFwiR2xpdGNoUGFzc1wiLChmdW5jdGlvbigpe3JldHVybiBhfSkpO3ZhciByPW4oMCksaT1uKDEpLG89e3VuaWZvcm1zOnt0RGlmZnVzZTp7dmFsdWU6bnVsbH0sdERpc3A6e3ZhbHVlOm51bGx9LGJ5cDp7dmFsdWU6MH0sYW1vdW50Ont2YWx1ZTouMDh9LGFuZ2xlOnt2YWx1ZTouMDJ9LHNlZWQ6e3ZhbHVlOi4wMn0sc2VlZF94Ont2YWx1ZTouMDJ9LHNlZWRfeTp7dmFsdWU6LjAyfSxkaXN0b3J0aW9uX3g6e3ZhbHVlOi41fSxkaXN0b3J0aW9uX3k6e3ZhbHVlOi42fSxjb2xfczp7dmFsdWU6LjA1fX0sdmVydGV4U2hhZGVyOltcInZhcnlpbmcgdmVjMiB2VXY7XCIsXCJ2b2lkIG1haW4oKSB7XCIsXCJcXHR2VXYgPSB1djtcIixcIlxcdGdsX1Bvc2l0aW9uID0gcHJvamVjdGlvbk1hdHJpeCAqIG1vZGVsVmlld01hdHJpeCAqIHZlYzQoIHBvc2l0aW9uLCAxLjAgKTtcIixcIn1cIl0uam9pbihcIlxcblwiKSxmcmFnbWVudFNoYWRlcjpbXCJ1bmlmb3JtIGludCBieXA7XCIsXCJ1bmlmb3JtIHNhbXBsZXIyRCB0RGlmZnVzZTtcIixcInVuaWZvcm0gc2FtcGxlcjJEIHREaXNwO1wiLFwidW5pZm9ybSBmbG9hdCBhbW91bnQ7XCIsXCJ1bmlmb3JtIGZsb2F0IGFuZ2xlO1wiLFwidW5pZm9ybSBmbG9hdCBzZWVkO1wiLFwidW5pZm9ybSBmbG9hdCBzZWVkX3g7XCIsXCJ1bmlmb3JtIGZsb2F0IHNlZWRfeTtcIixcInVuaWZvcm0gZmxvYXQgZGlzdG9ydGlvbl94O1wiLFwidW5pZm9ybSBmbG9hdCBkaXN0b3J0aW9uX3k7XCIsXCJ1bmlmb3JtIGZsb2F0IGNvbF9zO1wiLFwidmFyeWluZyB2ZWMyIHZVdjtcIixcImZsb2F0IHJhbmQodmVjMiBjbyl7XCIsXCJcXHRyZXR1cm4gZnJhY3Qoc2luKGRvdChjby54eSAsdmVjMigxMi45ODk4LDc4LjIzMykpKSAqIDQzNzU4LjU0NTMpO1wiLFwifVwiLFwidm9pZCBtYWluKCkge1wiLFwiXFx0aWYoYnlwPDEpIHtcIixcIlxcdFxcdHZlYzIgcCA9IHZVdjtcIixcIlxcdFxcdGZsb2F0IHhzID0gZmxvb3IoZ2xfRnJhZ0Nvb3JkLnggLyAwLjUpO1wiLFwiXFx0XFx0ZmxvYXQgeXMgPSBmbG9vcihnbF9GcmFnQ29vcmQueSAvIDAuNSk7XCIsXCJcXHRcXHR2ZWM0IG5vcm1hbCA9IHRleHR1cmUyRCAodERpc3AsIHAqc2VlZCpzZWVkKTtcIixcIlxcdFxcdGlmKHAueTxkaXN0b3J0aW9uX3grY29sX3MgJiYgcC55PmRpc3RvcnRpb25feC1jb2xfcypzZWVkKSB7XCIsXCJcXHRcXHRcXHRpZihzZWVkX3g+MC4pe1wiLFwiXFx0XFx0XFx0XFx0cC55ID0gMS4gLSAocC55ICsgZGlzdG9ydGlvbl95KTtcIixcIlxcdFxcdFxcdH1cIixcIlxcdFxcdFxcdGVsc2Uge1wiLFwiXFx0XFx0XFx0XFx0cC55ID0gZGlzdG9ydGlvbl95O1wiLFwiXFx0XFx0XFx0fVwiLFwiXFx0XFx0fVwiLFwiXFx0XFx0aWYocC54PGRpc3RvcnRpb25feStjb2xfcyAmJiBwLng+ZGlzdG9ydGlvbl95LWNvbF9zKnNlZWQpIHtcIixcIlxcdFxcdFxcdGlmKHNlZWRfeT4wLil7XCIsXCJcXHRcXHRcXHRcXHRwLng9ZGlzdG9ydGlvbl94O1wiLFwiXFx0XFx0XFx0fVwiLFwiXFx0XFx0XFx0ZWxzZSB7XCIsXCJcXHRcXHRcXHRcXHRwLnggPSAxLiAtIChwLnggKyBkaXN0b3J0aW9uX3gpO1wiLFwiXFx0XFx0XFx0fVwiLFwiXFx0XFx0fVwiLFwiXFx0XFx0cC54Kz1ub3JtYWwueCpzZWVkX3gqKHNlZWQvNS4pO1wiLFwiXFx0XFx0cC55Kz1ub3JtYWwueSpzZWVkX3kqKHNlZWQvNS4pO1wiLFwiXFx0XFx0dmVjMiBvZmZzZXQgPSBhbW91bnQgKiB2ZWMyKCBjb3MoYW5nbGUpLCBzaW4oYW5nbGUpKTtcIixcIlxcdFxcdHZlYzQgY3IgPSB0ZXh0dXJlMkQodERpZmZ1c2UsIHAgKyBvZmZzZXQpO1wiLFwiXFx0XFx0dmVjNCBjZ2EgPSB0ZXh0dXJlMkQodERpZmZ1c2UsIHApO1wiLFwiXFx0XFx0dmVjNCBjYiA9IHRleHR1cmUyRCh0RGlmZnVzZSwgcCAtIG9mZnNldCk7XCIsXCJcXHRcXHRnbF9GcmFnQ29sb3IgPSB2ZWM0KGNyLnIsIGNnYS5nLCBjYi5iLCBjZ2EuYSk7XCIsXCJcXHRcXHR2ZWM0IHNub3cgPSAyMDAuKmFtb3VudCp2ZWM0KHJhbmQodmVjMih4cyAqIHNlZWQseXMgKiBzZWVkKjUwLikpKjAuMik7XCIsXCJcXHRcXHRnbF9GcmFnQ29sb3IgPSBnbF9GcmFnQ29sb3IrIHNub3c7XCIsXCJcXHR9XCIsXCJcXHRlbHNlIHtcIixcIlxcdFxcdGdsX0ZyYWdDb2xvcj10ZXh0dXJlMkQgKHREaWZmdXNlLCB2VXYpO1wiLFwiXFx0fVwiLFwifVwiXS5qb2luKFwiXFxuXCIpfSxhPWZ1bmN0aW9uKHQpe2kuYS5jYWxsKHRoaXMpLHZvaWQgMD09PW8mJmNvbnNvbGUuZXJyb3IoXCJHbGl0Y2hQYXNzIHJlbGllcyBvbiBEaWdpdGFsR2xpdGNoXCIpO3ZhciBlPW87dGhpcy51bmlmb3Jtcz1yLlVuaWZvcm1zVXRpbHMuY2xvbmUoZS51bmlmb3JtcyksbnVsbD09dCYmKHQ9NjQpLHRoaXMudW5pZm9ybXMudERpc3AudmFsdWU9dGhpcy5nZW5lcmF0ZUhlaWdodG1hcCh0KSx0aGlzLm1hdGVyaWFsPW5ldyByLlNoYWRlck1hdGVyaWFsKHt1bmlmb3Jtczp0aGlzLnVuaWZvcm1zLHZlcnRleFNoYWRlcjplLnZlcnRleFNoYWRlcixmcmFnbWVudFNoYWRlcjplLmZyYWdtZW50U2hhZGVyfSksdGhpcy5mc1F1YWQ9bmV3IGkuYS5GdWxsU2NyZWVuUXVhZCh0aGlzLm1hdGVyaWFsKSx0aGlzLmdvV2lsZD0hMSx0aGlzLmN1ckY9MCx0aGlzLmdlbmVyYXRlVHJpZ2dlcigpfTthLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoaS5hLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOmEscmVuZGVyOmZ1bmN0aW9uKHQsZSxuKXt0aGlzLnVuaWZvcm1zLnREaWZmdXNlLnZhbHVlPW4udGV4dHVyZSx0aGlzLnVuaWZvcm1zLnNlZWQudmFsdWU9TWF0aC5yYW5kb20oKSx0aGlzLnVuaWZvcm1zLmJ5cC52YWx1ZT0wLHRoaXMuY3VyRiV0aGlzLnJhbmRYPT0wfHwxPT10aGlzLmdvV2lsZD8odGhpcy51bmlmb3Jtcy5hbW91bnQudmFsdWU9TWF0aC5yYW5kb20oKS8zMCx0aGlzLnVuaWZvcm1zLmFuZ2xlLnZhbHVlPXIuTWF0aFV0aWxzLnJhbmRGbG9hdCgtTWF0aC5QSSxNYXRoLlBJKSx0aGlzLnVuaWZvcm1zLnNlZWRfeC52YWx1ZT1yLk1hdGhVdGlscy5yYW5kRmxvYXQoLTEsMSksdGhpcy51bmlmb3Jtcy5zZWVkX3kudmFsdWU9ci5NYXRoVXRpbHMucmFuZEZsb2F0KC0xLDEpLHRoaXMudW5pZm9ybXMuZGlzdG9ydGlvbl94LnZhbHVlPXIuTWF0aFV0aWxzLnJhbmRGbG9hdCgwLDEpLHRoaXMudW5pZm9ybXMuZGlzdG9ydGlvbl95LnZhbHVlPXIuTWF0aFV0aWxzLnJhbmRGbG9hdCgwLDEpLHRoaXMuY3VyRj0wLHRoaXMuZ2VuZXJhdGVUcmlnZ2VyKCkpOnRoaXMuY3VyRiV0aGlzLnJhbmRYPHRoaXMucmFuZFgvNT8odGhpcy51bmlmb3Jtcy5hbW91bnQudmFsdWU9TWF0aC5yYW5kb20oKS85MCx0aGlzLnVuaWZvcm1zLmFuZ2xlLnZhbHVlPXIuTWF0aFV0aWxzLnJhbmRGbG9hdCgtTWF0aC5QSSxNYXRoLlBJKSx0aGlzLnVuaWZvcm1zLmRpc3RvcnRpb25feC52YWx1ZT1yLk1hdGhVdGlscy5yYW5kRmxvYXQoMCwxKSx0aGlzLnVuaWZvcm1zLmRpc3RvcnRpb25feS52YWx1ZT1yLk1hdGhVdGlscy5yYW5kRmxvYXQoMCwxKSx0aGlzLnVuaWZvcm1zLnNlZWRfeC52YWx1ZT1yLk1hdGhVdGlscy5yYW5kRmxvYXQoLS4zLC4zKSx0aGlzLnVuaWZvcm1zLnNlZWRfeS52YWx1ZT1yLk1hdGhVdGlscy5yYW5kRmxvYXQoLS4zLC4zKSk6MD09dGhpcy5nb1dpbGQmJih0aGlzLnVuaWZvcm1zLmJ5cC52YWx1ZT0xKSx0aGlzLmN1ckYrKyx0aGlzLnJlbmRlclRvU2NyZWVuPyh0LnNldFJlbmRlclRhcmdldChudWxsKSx0aGlzLmZzUXVhZC5yZW5kZXIodCkpOih0LnNldFJlbmRlclRhcmdldChlKSx0aGlzLmNsZWFyJiZ0LmNsZWFyKCksdGhpcy5mc1F1YWQucmVuZGVyKHQpKX0sZ2VuZXJhdGVUcmlnZ2VyOmZ1bmN0aW9uKCl7dGhpcy5yYW5kWD1yLk1hdGhVdGlscy5yYW5kSW50KDEyMCwyNDApfSxnZW5lcmF0ZUhlaWdodG1hcDpmdW5jdGlvbih0KXtmb3IodmFyIGU9bmV3IEZsb2F0MzJBcnJheSh0KnQqMyksbj10KnQsaT0wO2k8bjtpKyspe3ZhciBvPXIuTWF0aFV0aWxzLnJhbmRGbG9hdCgwLDEpO2VbMyppKzBdPW8sZVszKmkrMV09byxlWzMqaSsyXT1vfXJldHVybiBuZXcgci5EYXRhVGV4dHVyZShlLHQsdCxyLlJHQkZvcm1hdCxyLkZsb2F0VHlwZSl9fSl9XSkpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIiwibW9kdWxlLmV4cG9ydHMgPSAoKCkgPT4ge1xuICBpZiAodHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICByZXR1cm4gc2VsZjtcbiAgfSBlbHNlIGlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgcmV0dXJuIHdpbmRvdztcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gRnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpO1xuICB9XG59KSgpO1xuIiwiY29uc3QgU29ja2V0ID0gcmVxdWlyZShcIi4vc29ja2V0XCIpO1xuXG5tb2R1bGUuZXhwb3J0cyA9ICh1cmksIG9wdHMpID0+IG5ldyBTb2NrZXQodXJpLCBvcHRzKTtcblxuLyoqXG4gKiBFeHBvc2UgZGVwcyBmb3IgbGVnYWN5IGNvbXBhdGliaWxpdHlcbiAqIGFuZCBzdGFuZGFsb25lIGJyb3dzZXIgYWNjZXNzLlxuICovXG5cbm1vZHVsZS5leHBvcnRzLlNvY2tldCA9IFNvY2tldDtcbm1vZHVsZS5leHBvcnRzLnByb3RvY29sID0gU29ja2V0LnByb3RvY29sOyAvLyB0aGlzIGlzIGFuIGludFxubW9kdWxlLmV4cG9ydHMuVHJhbnNwb3J0ID0gcmVxdWlyZShcIi4vdHJhbnNwb3J0XCIpO1xubW9kdWxlLmV4cG9ydHMudHJhbnNwb3J0cyA9IHJlcXVpcmUoXCIuL3RyYW5zcG9ydHMvaW5kZXhcIik7XG5tb2R1bGUuZXhwb3J0cy5wYXJzZXIgPSByZXF1aXJlKFwiZW5naW5lLmlvLXBhcnNlclwiKTtcbiIsImNvbnN0IHRyYW5zcG9ydHMgPSByZXF1aXJlKFwiLi90cmFuc3BvcnRzL2luZGV4XCIpO1xuY29uc3QgRW1pdHRlciA9IHJlcXVpcmUoXCJjb21wb25lbnQtZW1pdHRlclwiKTtcbmNvbnN0IGRlYnVnID0gcmVxdWlyZShcImRlYnVnXCIpKFwiZW5naW5lLmlvLWNsaWVudDpzb2NrZXRcIik7XG5jb25zdCBwYXJzZXIgPSByZXF1aXJlKFwiZW5naW5lLmlvLXBhcnNlclwiKTtcbmNvbnN0IHBhcnNldXJpID0gcmVxdWlyZShcInBhcnNldXJpXCIpO1xuY29uc3QgcGFyc2VxcyA9IHJlcXVpcmUoXCJwYXJzZXFzXCIpO1xuXG5jbGFzcyBTb2NrZXQgZXh0ZW5kcyBFbWl0dGVyIHtcbiAgLyoqXG4gICAqIFNvY2tldCBjb25zdHJ1Y3Rvci5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd8T2JqZWN0fSB1cmkgb3Igb3B0aW9uc1xuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cbiAgY29uc3RydWN0b3IodXJpLCBvcHRzID0ge30pIHtcbiAgICBzdXBlcigpO1xuXG4gICAgaWYgKHVyaSAmJiBcIm9iamVjdFwiID09PSB0eXBlb2YgdXJpKSB7XG4gICAgICBvcHRzID0gdXJpO1xuICAgICAgdXJpID0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAodXJpKSB7XG4gICAgICB1cmkgPSBwYXJzZXVyaSh1cmkpO1xuICAgICAgb3B0cy5ob3N0bmFtZSA9IHVyaS5ob3N0O1xuICAgICAgb3B0cy5zZWN1cmUgPSB1cmkucHJvdG9jb2wgPT09IFwiaHR0cHNcIiB8fCB1cmkucHJvdG9jb2wgPT09IFwid3NzXCI7XG4gICAgICBvcHRzLnBvcnQgPSB1cmkucG9ydDtcbiAgICAgIGlmICh1cmkucXVlcnkpIG9wdHMucXVlcnkgPSB1cmkucXVlcnk7XG4gICAgfSBlbHNlIGlmIChvcHRzLmhvc3QpIHtcbiAgICAgIG9wdHMuaG9zdG5hbWUgPSBwYXJzZXVyaShvcHRzLmhvc3QpLmhvc3Q7XG4gICAgfVxuXG4gICAgdGhpcy5zZWN1cmUgPVxuICAgICAgbnVsbCAhPSBvcHRzLnNlY3VyZVxuICAgICAgICA/IG9wdHMuc2VjdXJlXG4gICAgICAgIDogdHlwZW9mIGxvY2F0aW9uICE9PSBcInVuZGVmaW5lZFwiICYmIFwiaHR0cHM6XCIgPT09IGxvY2F0aW9uLnByb3RvY29sO1xuXG4gICAgaWYgKG9wdHMuaG9zdG5hbWUgJiYgIW9wdHMucG9ydCkge1xuICAgICAgLy8gaWYgbm8gcG9ydCBpcyBzcGVjaWZpZWQgbWFudWFsbHksIHVzZSB0aGUgcHJvdG9jb2wgZGVmYXVsdFxuICAgICAgb3B0cy5wb3J0ID0gdGhpcy5zZWN1cmUgPyBcIjQ0M1wiIDogXCI4MFwiO1xuICAgIH1cblxuICAgIHRoaXMuaG9zdG5hbWUgPVxuICAgICAgb3B0cy5ob3N0bmFtZSB8fFxuICAgICAgKHR5cGVvZiBsb2NhdGlvbiAhPT0gXCJ1bmRlZmluZWRcIiA/IGxvY2F0aW9uLmhvc3RuYW1lIDogXCJsb2NhbGhvc3RcIik7XG4gICAgdGhpcy5wb3J0ID1cbiAgICAgIG9wdHMucG9ydCB8fFxuICAgICAgKHR5cGVvZiBsb2NhdGlvbiAhPT0gXCJ1bmRlZmluZWRcIiAmJiBsb2NhdGlvbi5wb3J0XG4gICAgICAgID8gbG9jYXRpb24ucG9ydFxuICAgICAgICA6IHRoaXMuc2VjdXJlXG4gICAgICAgID8gNDQzXG4gICAgICAgIDogODApO1xuXG4gICAgdGhpcy50cmFuc3BvcnRzID0gb3B0cy50cmFuc3BvcnRzIHx8IFtcInBvbGxpbmdcIiwgXCJ3ZWJzb2NrZXRcIl07XG4gICAgdGhpcy5yZWFkeVN0YXRlID0gXCJcIjtcbiAgICB0aGlzLndyaXRlQnVmZmVyID0gW107XG4gICAgdGhpcy5wcmV2QnVmZmVyTGVuID0gMDtcblxuICAgIHRoaXMub3B0cyA9IE9iamVjdC5hc3NpZ24oXG4gICAgICB7XG4gICAgICAgIHBhdGg6IFwiL2VuZ2luZS5pb1wiLFxuICAgICAgICBhZ2VudDogZmFsc2UsXG4gICAgICAgIHdpdGhDcmVkZW50aWFsczogZmFsc2UsXG4gICAgICAgIHVwZ3JhZGU6IHRydWUsXG4gICAgICAgIGpzb25wOiB0cnVlLFxuICAgICAgICB0aW1lc3RhbXBQYXJhbTogXCJ0XCIsXG4gICAgICAgIHJlbWVtYmVyVXBncmFkZTogZmFsc2UsXG4gICAgICAgIHJlamVjdFVuYXV0aG9yaXplZDogdHJ1ZSxcbiAgICAgICAgcGVyTWVzc2FnZURlZmxhdGU6IHtcbiAgICAgICAgICB0aHJlc2hvbGQ6IDEwMjRcbiAgICAgICAgfSxcbiAgICAgICAgdHJhbnNwb3J0T3B0aW9uczoge30sXG4gICAgICAgIGNsb3NlT25CZWZvcmV1bmxvYWQ6IHRydWVcbiAgICAgIH0sXG4gICAgICBvcHRzXG4gICAgKTtcblxuICAgIHRoaXMub3B0cy5wYXRoID0gdGhpcy5vcHRzLnBhdGgucmVwbGFjZSgvXFwvJC8sIFwiXCIpICsgXCIvXCI7XG5cbiAgICBpZiAodHlwZW9mIHRoaXMub3B0cy5xdWVyeSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgdGhpcy5vcHRzLnF1ZXJ5ID0gcGFyc2Vxcy5kZWNvZGUodGhpcy5vcHRzLnF1ZXJ5KTtcbiAgICB9XG5cbiAgICAvLyBzZXQgb24gaGFuZHNoYWtlXG4gICAgdGhpcy5pZCA9IG51bGw7XG4gICAgdGhpcy51cGdyYWRlcyA9IG51bGw7XG4gICAgdGhpcy5waW5nSW50ZXJ2YWwgPSBudWxsO1xuICAgIHRoaXMucGluZ1RpbWVvdXQgPSBudWxsO1xuXG4gICAgLy8gc2V0IG9uIGhlYXJ0YmVhdFxuICAgIHRoaXMucGluZ1RpbWVvdXRUaW1lciA9IG51bGw7XG5cbiAgICBpZiAodHlwZW9mIGFkZEV2ZW50TGlzdGVuZXIgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgaWYgKHRoaXMub3B0cy5jbG9zZU9uQmVmb3JldW5sb2FkKSB7XG4gICAgICAgIC8vIEZpcmVmb3ggY2xvc2VzIHRoZSBjb25uZWN0aW9uIHdoZW4gdGhlIFwiYmVmb3JldW5sb2FkXCIgZXZlbnQgaXMgZW1pdHRlZCBidXQgbm90IENocm9tZS4gVGhpcyBldmVudCBsaXN0ZW5lclxuICAgICAgICAvLyBlbnN1cmVzIGV2ZXJ5IGJyb3dzZXIgYmVoYXZlcyB0aGUgc2FtZSAobm8gXCJkaXNjb25uZWN0XCIgZXZlbnQgYXQgdGhlIFNvY2tldC5JTyBsZXZlbCB3aGVuIHRoZSBwYWdlIGlzXG4gICAgICAgIC8vIGNsb3NlZC9yZWxvYWRlZClcbiAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgICBcImJlZm9yZXVubG9hZFwiLFxuICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnRyYW5zcG9ydCkge1xuICAgICAgICAgICAgICAvLyBzaWxlbnRseSBjbG9zZSB0aGUgdHJhbnNwb3J0XG4gICAgICAgICAgICAgIHRoaXMudHJhbnNwb3J0LnJlbW92ZUFsbExpc3RlbmVycygpO1xuICAgICAgICAgICAgICB0aGlzLnRyYW5zcG9ydC5jbG9zZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgZmFsc2VcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmhvc3RuYW1lICE9PSBcImxvY2FsaG9zdFwiKSB7XG4gICAgICAgIHRoaXMub2ZmbGluZUV2ZW50TGlzdGVuZXIgPSAoKSA9PiB7XG4gICAgICAgICAgdGhpcy5vbkNsb3NlKFwidHJhbnNwb3J0IGNsb3NlXCIpO1xuICAgICAgICB9O1xuICAgICAgICBhZGRFdmVudExpc3RlbmVyKFwib2ZmbGluZVwiLCB0aGlzLm9mZmxpbmVFdmVudExpc3RlbmVyLCBmYWxzZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5vcGVuKCk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyB0cmFuc3BvcnQgb2YgdGhlIGdpdmVuIHR5cGUuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0cmFuc3BvcnQgbmFtZVxuICAgKiBAcmV0dXJuIHtUcmFuc3BvcnR9XG4gICAqIEBhcGkgcHJpdmF0ZVxuICAgKi9cbiAgY3JlYXRlVHJhbnNwb3J0KG5hbWUpIHtcbiAgICBkZWJ1ZygnY3JlYXRpbmcgdHJhbnNwb3J0IFwiJXNcIicsIG5hbWUpO1xuICAgIGNvbnN0IHF1ZXJ5ID0gY2xvbmUodGhpcy5vcHRzLnF1ZXJ5KTtcblxuICAgIC8vIGFwcGVuZCBlbmdpbmUuaW8gcHJvdG9jb2wgaWRlbnRpZmllclxuICAgIHF1ZXJ5LkVJTyA9IHBhcnNlci5wcm90b2NvbDtcblxuICAgIC8vIHRyYW5zcG9ydCBuYW1lXG4gICAgcXVlcnkudHJhbnNwb3J0ID0gbmFtZTtcblxuICAgIC8vIHNlc3Npb24gaWQgaWYgd2UgYWxyZWFkeSBoYXZlIG9uZVxuICAgIGlmICh0aGlzLmlkKSBxdWVyeS5zaWQgPSB0aGlzLmlkO1xuXG4gICAgY29uc3Qgb3B0cyA9IE9iamVjdC5hc3NpZ24oXG4gICAgICB7fSxcbiAgICAgIHRoaXMub3B0cy50cmFuc3BvcnRPcHRpb25zW25hbWVdLFxuICAgICAgdGhpcy5vcHRzLFxuICAgICAge1xuICAgICAgICBxdWVyeSxcbiAgICAgICAgc29ja2V0OiB0aGlzLFxuICAgICAgICBob3N0bmFtZTogdGhpcy5ob3N0bmFtZSxcbiAgICAgICAgc2VjdXJlOiB0aGlzLnNlY3VyZSxcbiAgICAgICAgcG9ydDogdGhpcy5wb3J0XG4gICAgICB9XG4gICAgKTtcblxuICAgIGRlYnVnKFwib3B0aW9uczogJWpcIiwgb3B0cyk7XG5cbiAgICByZXR1cm4gbmV3IHRyYW5zcG9ydHNbbmFtZV0ob3B0cyk7XG4gIH1cblxuICAvKipcbiAgICogSW5pdGlhbGl6ZXMgdHJhbnNwb3J0IHRvIHVzZSBhbmQgc3RhcnRzIHByb2JlLlxuICAgKlxuICAgKiBAYXBpIHByaXZhdGVcbiAgICovXG4gIG9wZW4oKSB7XG4gICAgbGV0IHRyYW5zcG9ydDtcbiAgICBpZiAoXG4gICAgICB0aGlzLm9wdHMucmVtZW1iZXJVcGdyYWRlICYmXG4gICAgICBTb2NrZXQucHJpb3JXZWJzb2NrZXRTdWNjZXNzICYmXG4gICAgICB0aGlzLnRyYW5zcG9ydHMuaW5kZXhPZihcIndlYnNvY2tldFwiKSAhPT0gLTFcbiAgICApIHtcbiAgICAgIHRyYW5zcG9ydCA9IFwid2Vic29ja2V0XCI7XG4gICAgfSBlbHNlIGlmICgwID09PSB0aGlzLnRyYW5zcG9ydHMubGVuZ3RoKSB7XG4gICAgICAvLyBFbWl0IGVycm9yIG9uIG5leHQgdGljayBzbyBpdCBjYW4gYmUgbGlzdGVuZWQgdG9cbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLmVtaXQoXCJlcnJvclwiLCBcIk5vIHRyYW5zcG9ydHMgYXZhaWxhYmxlXCIpO1xuICAgICAgfSwgMCk7XG4gICAgICByZXR1cm47XG4gICAgfSBlbHNlIHtcbiAgICAgIHRyYW5zcG9ydCA9IHRoaXMudHJhbnNwb3J0c1swXTtcbiAgICB9XG4gICAgdGhpcy5yZWFkeVN0YXRlID0gXCJvcGVuaW5nXCI7XG5cbiAgICAvLyBSZXRyeSB3aXRoIHRoZSBuZXh0IHRyYW5zcG9ydCBpZiB0aGUgdHJhbnNwb3J0IGlzIGRpc2FibGVkIChqc29ucDogZmFsc2UpXG4gICAgdHJ5IHtcbiAgICAgIHRyYW5zcG9ydCA9IHRoaXMuY3JlYXRlVHJhbnNwb3J0KHRyYW5zcG9ydCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgZGVidWcoXCJlcnJvciB3aGlsZSBjcmVhdGluZyB0cmFuc3BvcnQ6ICVzXCIsIGUpO1xuICAgICAgdGhpcy50cmFuc3BvcnRzLnNoaWZ0KCk7XG4gICAgICB0aGlzLm9wZW4oKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0cmFuc3BvcnQub3BlbigpO1xuICAgIHRoaXMuc2V0VHJhbnNwb3J0KHRyYW5zcG9ydCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgY3VycmVudCB0cmFuc3BvcnQuIERpc2FibGVzIHRoZSBleGlzdGluZyBvbmUgKGlmIGFueSkuXG4gICAqXG4gICAqIEBhcGkgcHJpdmF0ZVxuICAgKi9cbiAgc2V0VHJhbnNwb3J0KHRyYW5zcG9ydCkge1xuICAgIGRlYnVnKFwic2V0dGluZyB0cmFuc3BvcnQgJXNcIiwgdHJhbnNwb3J0Lm5hbWUpO1xuXG4gICAgaWYgKHRoaXMudHJhbnNwb3J0KSB7XG4gICAgICBkZWJ1ZyhcImNsZWFyaW5nIGV4aXN0aW5nIHRyYW5zcG9ydCAlc1wiLCB0aGlzLnRyYW5zcG9ydC5uYW1lKTtcbiAgICAgIHRoaXMudHJhbnNwb3J0LnJlbW92ZUFsbExpc3RlbmVycygpO1xuICAgIH1cblxuICAgIC8vIHNldCB1cCB0cmFuc3BvcnRcbiAgICB0aGlzLnRyYW5zcG9ydCA9IHRyYW5zcG9ydDtcblxuICAgIC8vIHNldCB1cCB0cmFuc3BvcnQgbGlzdGVuZXJzXG4gICAgdHJhbnNwb3J0XG4gICAgICAub24oXCJkcmFpblwiLCB0aGlzLm9uRHJhaW4uYmluZCh0aGlzKSlcbiAgICAgIC5vbihcInBhY2tldFwiLCB0aGlzLm9uUGFja2V0LmJpbmQodGhpcykpXG4gICAgICAub24oXCJlcnJvclwiLCB0aGlzLm9uRXJyb3IuYmluZCh0aGlzKSlcbiAgICAgIC5vbihcImNsb3NlXCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5vbkNsb3NlKFwidHJhbnNwb3J0IGNsb3NlXCIpO1xuICAgICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUHJvYmVzIGEgdHJhbnNwb3J0LlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gdHJhbnNwb3J0IG5hbWVcbiAgICogQGFwaSBwcml2YXRlXG4gICAqL1xuICBwcm9iZShuYW1lKSB7XG4gICAgZGVidWcoJ3Byb2JpbmcgdHJhbnNwb3J0IFwiJXNcIicsIG5hbWUpO1xuICAgIGxldCB0cmFuc3BvcnQgPSB0aGlzLmNyZWF0ZVRyYW5zcG9ydChuYW1lLCB7IHByb2JlOiAxIH0pO1xuICAgIGxldCBmYWlsZWQgPSBmYWxzZTtcblxuICAgIFNvY2tldC5wcmlvcldlYnNvY2tldFN1Y2Nlc3MgPSBmYWxzZTtcblxuICAgIGNvbnN0IG9uVHJhbnNwb3J0T3BlbiA9ICgpID0+IHtcbiAgICAgIGlmIChmYWlsZWQpIHJldHVybjtcblxuICAgICAgZGVidWcoJ3Byb2JlIHRyYW5zcG9ydCBcIiVzXCIgb3BlbmVkJywgbmFtZSk7XG4gICAgICB0cmFuc3BvcnQuc2VuZChbeyB0eXBlOiBcInBpbmdcIiwgZGF0YTogXCJwcm9iZVwiIH1dKTtcbiAgICAgIHRyYW5zcG9ydC5vbmNlKFwicGFja2V0XCIsIG1zZyA9PiB7XG4gICAgICAgIGlmIChmYWlsZWQpIHJldHVybjtcbiAgICAgICAgaWYgKFwicG9uZ1wiID09PSBtc2cudHlwZSAmJiBcInByb2JlXCIgPT09IG1zZy5kYXRhKSB7XG4gICAgICAgICAgZGVidWcoJ3Byb2JlIHRyYW5zcG9ydCBcIiVzXCIgcG9uZycsIG5hbWUpO1xuICAgICAgICAgIHRoaXMudXBncmFkaW5nID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzLmVtaXQoXCJ1cGdyYWRpbmdcIiwgdHJhbnNwb3J0KTtcbiAgICAgICAgICBpZiAoIXRyYW5zcG9ydCkgcmV0dXJuO1xuICAgICAgICAgIFNvY2tldC5wcmlvcldlYnNvY2tldFN1Y2Nlc3MgPSBcIndlYnNvY2tldFwiID09PSB0cmFuc3BvcnQubmFtZTtcblxuICAgICAgICAgIGRlYnVnKCdwYXVzaW5nIGN1cnJlbnQgdHJhbnNwb3J0IFwiJXNcIicsIHRoaXMudHJhbnNwb3J0Lm5hbWUpO1xuICAgICAgICAgIHRoaXMudHJhbnNwb3J0LnBhdXNlKCgpID0+IHtcbiAgICAgICAgICAgIGlmIChmYWlsZWQpIHJldHVybjtcbiAgICAgICAgICAgIGlmIChcImNsb3NlZFwiID09PSB0aGlzLnJlYWR5U3RhdGUpIHJldHVybjtcbiAgICAgICAgICAgIGRlYnVnKFwiY2hhbmdpbmcgdHJhbnNwb3J0IGFuZCBzZW5kaW5nIHVwZ3JhZGUgcGFja2V0XCIpO1xuXG4gICAgICAgICAgICBjbGVhbnVwKCk7XG5cbiAgICAgICAgICAgIHRoaXMuc2V0VHJhbnNwb3J0KHRyYW5zcG9ydCk7XG4gICAgICAgICAgICB0cmFuc3BvcnQuc2VuZChbeyB0eXBlOiBcInVwZ3JhZGVcIiB9XSk7XG4gICAgICAgICAgICB0aGlzLmVtaXQoXCJ1cGdyYWRlXCIsIHRyYW5zcG9ydCk7XG4gICAgICAgICAgICB0cmFuc3BvcnQgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy51cGdyYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuZmx1c2goKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkZWJ1ZygncHJvYmUgdHJhbnNwb3J0IFwiJXNcIiBmYWlsZWQnLCBuYW1lKTtcbiAgICAgICAgICBjb25zdCBlcnIgPSBuZXcgRXJyb3IoXCJwcm9iZSBlcnJvclwiKTtcbiAgICAgICAgICBlcnIudHJhbnNwb3J0ID0gdHJhbnNwb3J0Lm5hbWU7XG4gICAgICAgICAgdGhpcy5lbWl0KFwidXBncmFkZUVycm9yXCIsIGVycik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBmcmVlemVUcmFuc3BvcnQoKSB7XG4gICAgICBpZiAoZmFpbGVkKSByZXR1cm47XG5cbiAgICAgIC8vIEFueSBjYWxsYmFjayBjYWxsZWQgYnkgdHJhbnNwb3J0IHNob3VsZCBiZSBpZ25vcmVkIHNpbmNlIG5vd1xuICAgICAgZmFpbGVkID0gdHJ1ZTtcblxuICAgICAgY2xlYW51cCgpO1xuXG4gICAgICB0cmFuc3BvcnQuY2xvc2UoKTtcbiAgICAgIHRyYW5zcG9ydCA9IG51bGw7XG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIGFueSBlcnJvciB0aGF0IGhhcHBlbnMgd2hpbGUgcHJvYmluZ1xuICAgIGNvbnN0IG9uZXJyb3IgPSBlcnIgPT4ge1xuICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoXCJwcm9iZSBlcnJvcjogXCIgKyBlcnIpO1xuICAgICAgZXJyb3IudHJhbnNwb3J0ID0gdHJhbnNwb3J0Lm5hbWU7XG5cbiAgICAgIGZyZWV6ZVRyYW5zcG9ydCgpO1xuXG4gICAgICBkZWJ1ZygncHJvYmUgdHJhbnNwb3J0IFwiJXNcIiBmYWlsZWQgYmVjYXVzZSBvZiBlcnJvcjogJXMnLCBuYW1lLCBlcnIpO1xuXG4gICAgICB0aGlzLmVtaXQoXCJ1cGdyYWRlRXJyb3JcIiwgZXJyb3IpO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBvblRyYW5zcG9ydENsb3NlKCkge1xuICAgICAgb25lcnJvcihcInRyYW5zcG9ydCBjbG9zZWRcIik7XG4gICAgfVxuXG4gICAgLy8gV2hlbiB0aGUgc29ja2V0IGlzIGNsb3NlZCB3aGlsZSB3ZSdyZSBwcm9iaW5nXG4gICAgZnVuY3Rpb24gb25jbG9zZSgpIHtcbiAgICAgIG9uZXJyb3IoXCJzb2NrZXQgY2xvc2VkXCIpO1xuICAgIH1cblxuICAgIC8vIFdoZW4gdGhlIHNvY2tldCBpcyB1cGdyYWRlZCB3aGlsZSB3ZSdyZSBwcm9iaW5nXG4gICAgZnVuY3Rpb24gb251cGdyYWRlKHRvKSB7XG4gICAgICBpZiAodHJhbnNwb3J0ICYmIHRvLm5hbWUgIT09IHRyYW5zcG9ydC5uYW1lKSB7XG4gICAgICAgIGRlYnVnKCdcIiVzXCIgd29ya3MgLSBhYm9ydGluZyBcIiVzXCInLCB0by5uYW1lLCB0cmFuc3BvcnQubmFtZSk7XG4gICAgICAgIGZyZWV6ZVRyYW5zcG9ydCgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFJlbW92ZSBhbGwgbGlzdGVuZXJzIG9uIHRoZSB0cmFuc3BvcnQgYW5kIG9uIHNlbGZcbiAgICBjb25zdCBjbGVhbnVwID0gKCkgPT4ge1xuICAgICAgdHJhbnNwb3J0LnJlbW92ZUxpc3RlbmVyKFwib3BlblwiLCBvblRyYW5zcG9ydE9wZW4pO1xuICAgICAgdHJhbnNwb3J0LnJlbW92ZUxpc3RlbmVyKFwiZXJyb3JcIiwgb25lcnJvcik7XG4gICAgICB0cmFuc3BvcnQucmVtb3ZlTGlzdGVuZXIoXCJjbG9zZVwiLCBvblRyYW5zcG9ydENsb3NlKTtcbiAgICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIoXCJjbG9zZVwiLCBvbmNsb3NlKTtcbiAgICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIoXCJ1cGdyYWRpbmdcIiwgb251cGdyYWRlKTtcbiAgICB9O1xuXG4gICAgdHJhbnNwb3J0Lm9uY2UoXCJvcGVuXCIsIG9uVHJhbnNwb3J0T3Blbik7XG4gICAgdHJhbnNwb3J0Lm9uY2UoXCJlcnJvclwiLCBvbmVycm9yKTtcbiAgICB0cmFuc3BvcnQub25jZShcImNsb3NlXCIsIG9uVHJhbnNwb3J0Q2xvc2UpO1xuXG4gICAgdGhpcy5vbmNlKFwiY2xvc2VcIiwgb25jbG9zZSk7XG4gICAgdGhpcy5vbmNlKFwidXBncmFkaW5nXCIsIG9udXBncmFkZSk7XG5cbiAgICB0cmFuc3BvcnQub3BlbigpO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGxlZCB3aGVuIGNvbm5lY3Rpb24gaXMgZGVlbWVkIG9wZW4uXG4gICAqXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuICBvbk9wZW4oKSB7XG4gICAgZGVidWcoXCJzb2NrZXQgb3BlblwiKTtcbiAgICB0aGlzLnJlYWR5U3RhdGUgPSBcIm9wZW5cIjtcbiAgICBTb2NrZXQucHJpb3JXZWJzb2NrZXRTdWNjZXNzID0gXCJ3ZWJzb2NrZXRcIiA9PT0gdGhpcy50cmFuc3BvcnQubmFtZTtcbiAgICB0aGlzLmVtaXQoXCJvcGVuXCIpO1xuICAgIHRoaXMuZmx1c2goKTtcblxuICAgIC8vIHdlIGNoZWNrIGZvciBgcmVhZHlTdGF0ZWAgaW4gY2FzZSBhbiBgb3BlbmBcbiAgICAvLyBsaXN0ZW5lciBhbHJlYWR5IGNsb3NlZCB0aGUgc29ja2V0XG4gICAgaWYgKFxuICAgICAgXCJvcGVuXCIgPT09IHRoaXMucmVhZHlTdGF0ZSAmJlxuICAgICAgdGhpcy5vcHRzLnVwZ3JhZGUgJiZcbiAgICAgIHRoaXMudHJhbnNwb3J0LnBhdXNlXG4gICAgKSB7XG4gICAgICBkZWJ1ZyhcInN0YXJ0aW5nIHVwZ3JhZGUgcHJvYmVzXCIpO1xuICAgICAgbGV0IGkgPSAwO1xuICAgICAgY29uc3QgbCA9IHRoaXMudXBncmFkZXMubGVuZ3RoO1xuICAgICAgZm9yICg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgdGhpcy5wcm9iZSh0aGlzLnVwZ3JhZGVzW2ldKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyBhIHBhY2tldC5cbiAgICpcbiAgICogQGFwaSBwcml2YXRlXG4gICAqL1xuICBvblBhY2tldChwYWNrZXQpIHtcbiAgICBpZiAoXG4gICAgICBcIm9wZW5pbmdcIiA9PT0gdGhpcy5yZWFkeVN0YXRlIHx8XG4gICAgICBcIm9wZW5cIiA9PT0gdGhpcy5yZWFkeVN0YXRlIHx8XG4gICAgICBcImNsb3NpbmdcIiA9PT0gdGhpcy5yZWFkeVN0YXRlXG4gICAgKSB7XG4gICAgICBkZWJ1Zygnc29ja2V0IHJlY2VpdmU6IHR5cGUgXCIlc1wiLCBkYXRhIFwiJXNcIicsIHBhY2tldC50eXBlLCBwYWNrZXQuZGF0YSk7XG5cbiAgICAgIHRoaXMuZW1pdChcInBhY2tldFwiLCBwYWNrZXQpO1xuXG4gICAgICAvLyBTb2NrZXQgaXMgbGl2ZSAtIGFueSBwYWNrZXQgY291bnRzXG4gICAgICB0aGlzLmVtaXQoXCJoZWFydGJlYXRcIik7XG5cbiAgICAgIHN3aXRjaCAocGFja2V0LnR5cGUpIHtcbiAgICAgICAgY2FzZSBcIm9wZW5cIjpcbiAgICAgICAgICB0aGlzLm9uSGFuZHNoYWtlKEpTT04ucGFyc2UocGFja2V0LmRhdGEpKTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIFwicGluZ1wiOlxuICAgICAgICAgIHRoaXMucmVzZXRQaW5nVGltZW91dCgpO1xuICAgICAgICAgIHRoaXMuc2VuZFBhY2tldChcInBvbmdcIik7XG4gICAgICAgICAgdGhpcy5lbWl0KFwicG9uZ1wiKTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIFwiZXJyb3JcIjpcbiAgICAgICAgICBjb25zdCBlcnIgPSBuZXcgRXJyb3IoXCJzZXJ2ZXIgZXJyb3JcIik7XG4gICAgICAgICAgZXJyLmNvZGUgPSBwYWNrZXQuZGF0YTtcbiAgICAgICAgICB0aGlzLm9uRXJyb3IoZXJyKTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIFwibWVzc2FnZVwiOlxuICAgICAgICAgIHRoaXMuZW1pdChcImRhdGFcIiwgcGFja2V0LmRhdGEpO1xuICAgICAgICAgIHRoaXMuZW1pdChcIm1lc3NhZ2VcIiwgcGFja2V0LmRhdGEpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBkZWJ1ZygncGFja2V0IHJlY2VpdmVkIHdpdGggc29ja2V0IHJlYWR5U3RhdGUgXCIlc1wiJywgdGhpcy5yZWFkeVN0YXRlKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2FsbGVkIHVwb24gaGFuZHNoYWtlIGNvbXBsZXRpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBoYW5kc2hha2Ugb2JqXG4gICAqIEBhcGkgcHJpdmF0ZVxuICAgKi9cbiAgb25IYW5kc2hha2UoZGF0YSkge1xuICAgIHRoaXMuZW1pdChcImhhbmRzaGFrZVwiLCBkYXRhKTtcbiAgICB0aGlzLmlkID0gZGF0YS5zaWQ7XG4gICAgdGhpcy50cmFuc3BvcnQucXVlcnkuc2lkID0gZGF0YS5zaWQ7XG4gICAgdGhpcy51cGdyYWRlcyA9IHRoaXMuZmlsdGVyVXBncmFkZXMoZGF0YS51cGdyYWRlcyk7XG4gICAgdGhpcy5waW5nSW50ZXJ2YWwgPSBkYXRhLnBpbmdJbnRlcnZhbDtcbiAgICB0aGlzLnBpbmdUaW1lb3V0ID0gZGF0YS5waW5nVGltZW91dDtcbiAgICB0aGlzLm9uT3BlbigpO1xuICAgIC8vIEluIGNhc2Ugb3BlbiBoYW5kbGVyIGNsb3NlcyBzb2NrZXRcbiAgICBpZiAoXCJjbG9zZWRcIiA9PT0gdGhpcy5yZWFkeVN0YXRlKSByZXR1cm47XG4gICAgdGhpcy5yZXNldFBpbmdUaW1lb3V0KCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyBhbmQgcmVzZXRzIHBpbmcgdGltZW91dCB0aW1lciBiYXNlZCBvbiBzZXJ2ZXIgcGluZ3MuXG4gICAqXG4gICAqIEBhcGkgcHJpdmF0ZVxuICAgKi9cbiAgcmVzZXRQaW5nVGltZW91dCgpIHtcbiAgICBjbGVhclRpbWVvdXQodGhpcy5waW5nVGltZW91dFRpbWVyKTtcbiAgICB0aGlzLnBpbmdUaW1lb3V0VGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMub25DbG9zZShcInBpbmcgdGltZW91dFwiKTtcbiAgICB9LCB0aGlzLnBpbmdJbnRlcnZhbCArIHRoaXMucGluZ1RpbWVvdXQpO1xuICAgIGlmICh0aGlzLm9wdHMuYXV0b1VucmVmKSB7XG4gICAgICB0aGlzLnBpbmdUaW1lb3V0VGltZXIudW5yZWYoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2FsbGVkIG9uIGBkcmFpbmAgZXZlbnRcbiAgICpcbiAgICogQGFwaSBwcml2YXRlXG4gICAqL1xuICBvbkRyYWluKCkge1xuICAgIHRoaXMud3JpdGVCdWZmZXIuc3BsaWNlKDAsIHRoaXMucHJldkJ1ZmZlckxlbik7XG5cbiAgICAvLyBzZXR0aW5nIHByZXZCdWZmZXJMZW4gPSAwIGlzIHZlcnkgaW1wb3J0YW50XG4gICAgLy8gZm9yIGV4YW1wbGUsIHdoZW4gdXBncmFkaW5nLCB1cGdyYWRlIHBhY2tldCBpcyBzZW50IG92ZXIsXG4gICAgLy8gYW5kIGEgbm9uemVybyBwcmV2QnVmZmVyTGVuIGNvdWxkIGNhdXNlIHByb2JsZW1zIG9uIGBkcmFpbmBcbiAgICB0aGlzLnByZXZCdWZmZXJMZW4gPSAwO1xuXG4gICAgaWYgKDAgPT09IHRoaXMud3JpdGVCdWZmZXIubGVuZ3RoKSB7XG4gICAgICB0aGlzLmVtaXQoXCJkcmFpblwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5mbHVzaCgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBGbHVzaCB3cml0ZSBidWZmZXJzLlxuICAgKlxuICAgKiBAYXBpIHByaXZhdGVcbiAgICovXG4gIGZsdXNoKCkge1xuICAgIGlmIChcbiAgICAgIFwiY2xvc2VkXCIgIT09IHRoaXMucmVhZHlTdGF0ZSAmJlxuICAgICAgdGhpcy50cmFuc3BvcnQud3JpdGFibGUgJiZcbiAgICAgICF0aGlzLnVwZ3JhZGluZyAmJlxuICAgICAgdGhpcy53cml0ZUJ1ZmZlci5sZW5ndGhcbiAgICApIHtcbiAgICAgIGRlYnVnKFwiZmx1c2hpbmcgJWQgcGFja2V0cyBpbiBzb2NrZXRcIiwgdGhpcy53cml0ZUJ1ZmZlci5sZW5ndGgpO1xuICAgICAgdGhpcy50cmFuc3BvcnQuc2VuZCh0aGlzLndyaXRlQnVmZmVyKTtcbiAgICAgIC8vIGtlZXAgdHJhY2sgb2YgY3VycmVudCBsZW5ndGggb2Ygd3JpdGVCdWZmZXJcbiAgICAgIC8vIHNwbGljZSB3cml0ZUJ1ZmZlciBhbmQgY2FsbGJhY2tCdWZmZXIgb24gYGRyYWluYFxuICAgICAgdGhpcy5wcmV2QnVmZmVyTGVuID0gdGhpcy53cml0ZUJ1ZmZlci5sZW5ndGg7XG4gICAgICB0aGlzLmVtaXQoXCJmbHVzaFwiKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2VuZHMgYSBtZXNzYWdlLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZS5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgZnVuY3Rpb24uXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zLlxuICAgKiBAcmV0dXJuIHtTb2NrZXR9IGZvciBjaGFpbmluZy5cbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG4gIHdyaXRlKG1zZywgb3B0aW9ucywgZm4pIHtcbiAgICB0aGlzLnNlbmRQYWNrZXQoXCJtZXNzYWdlXCIsIG1zZywgb3B0aW9ucywgZm4pO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgc2VuZChtc2csIG9wdGlvbnMsIGZuKSB7XG4gICAgdGhpcy5zZW5kUGFja2V0KFwibWVzc2FnZVwiLCBtc2csIG9wdGlvbnMsIGZuKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBTZW5kcyBhIHBhY2tldC5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHBhY2tldCB0eXBlLlxuICAgKiBAcGFyYW0ge1N0cmluZ30gZGF0YS5cbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIGZ1bmN0aW9uLlxuICAgKiBAYXBpIHByaXZhdGVcbiAgICovXG4gIHNlbmRQYWNrZXQodHlwZSwgZGF0YSwgb3B0aW9ucywgZm4pIHtcbiAgICBpZiAoXCJmdW5jdGlvblwiID09PSB0eXBlb2YgZGF0YSkge1xuICAgICAgZm4gPSBkYXRhO1xuICAgICAgZGF0YSA9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBpZiAoXCJmdW5jdGlvblwiID09PSB0eXBlb2Ygb3B0aW9ucykge1xuICAgICAgZm4gPSBvcHRpb25zO1xuICAgICAgb3B0aW9ucyA9IG51bGw7XG4gICAgfVxuXG4gICAgaWYgKFwiY2xvc2luZ1wiID09PSB0aGlzLnJlYWR5U3RhdGUgfHwgXCJjbG9zZWRcIiA9PT0gdGhpcy5yZWFkeVN0YXRlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgb3B0aW9ucy5jb21wcmVzcyA9IGZhbHNlICE9PSBvcHRpb25zLmNvbXByZXNzO1xuXG4gICAgY29uc3QgcGFja2V0ID0ge1xuICAgICAgdHlwZTogdHlwZSxcbiAgICAgIGRhdGE6IGRhdGEsXG4gICAgICBvcHRpb25zOiBvcHRpb25zXG4gICAgfTtcbiAgICB0aGlzLmVtaXQoXCJwYWNrZXRDcmVhdGVcIiwgcGFja2V0KTtcbiAgICB0aGlzLndyaXRlQnVmZmVyLnB1c2gocGFja2V0KTtcbiAgICBpZiAoZm4pIHRoaXMub25jZShcImZsdXNoXCIsIGZuKTtcbiAgICB0aGlzLmZsdXNoKCk7XG4gIH1cblxuICAvKipcbiAgICogQ2xvc2VzIHRoZSBjb25uZWN0aW9uLlxuICAgKlxuICAgKiBAYXBpIHByaXZhdGVcbiAgICovXG4gIGNsb3NlKCkge1xuICAgIGNvbnN0IGNsb3NlID0gKCkgPT4ge1xuICAgICAgdGhpcy5vbkNsb3NlKFwiZm9yY2VkIGNsb3NlXCIpO1xuICAgICAgZGVidWcoXCJzb2NrZXQgY2xvc2luZyAtIHRlbGxpbmcgdHJhbnNwb3J0IHRvIGNsb3NlXCIpO1xuICAgICAgdGhpcy50cmFuc3BvcnQuY2xvc2UoKTtcbiAgICB9O1xuXG4gICAgY29uc3QgY2xlYW51cEFuZENsb3NlID0gKCkgPT4ge1xuICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcihcInVwZ3JhZGVcIiwgY2xlYW51cEFuZENsb3NlKTtcbiAgICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIoXCJ1cGdyYWRlRXJyb3JcIiwgY2xlYW51cEFuZENsb3NlKTtcbiAgICAgIGNsb3NlKCk7XG4gICAgfTtcblxuICAgIGNvbnN0IHdhaXRGb3JVcGdyYWRlID0gKCkgPT4ge1xuICAgICAgLy8gd2FpdCBmb3IgdXBncmFkZSB0byBmaW5pc2ggc2luY2Ugd2UgY2FuJ3Qgc2VuZCBwYWNrZXRzIHdoaWxlIHBhdXNpbmcgYSB0cmFuc3BvcnRcbiAgICAgIHRoaXMub25jZShcInVwZ3JhZGVcIiwgY2xlYW51cEFuZENsb3NlKTtcbiAgICAgIHRoaXMub25jZShcInVwZ3JhZGVFcnJvclwiLCBjbGVhbnVwQW5kQ2xvc2UpO1xuICAgIH07XG5cbiAgICBpZiAoXCJvcGVuaW5nXCIgPT09IHRoaXMucmVhZHlTdGF0ZSB8fCBcIm9wZW5cIiA9PT0gdGhpcy5yZWFkeVN0YXRlKSB7XG4gICAgICB0aGlzLnJlYWR5U3RhdGUgPSBcImNsb3NpbmdcIjtcblxuICAgICAgaWYgKHRoaXMud3JpdGVCdWZmZXIubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMub25jZShcImRyYWluXCIsICgpID0+IHtcbiAgICAgICAgICBpZiAodGhpcy51cGdyYWRpbmcpIHtcbiAgICAgICAgICAgIHdhaXRGb3JVcGdyYWRlKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNsb3NlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy51cGdyYWRpbmcpIHtcbiAgICAgICAgd2FpdEZvclVwZ3JhZGUoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNsb3NlKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogQ2FsbGVkIHVwb24gdHJhbnNwb3J0IGVycm9yXG4gICAqXG4gICAqIEBhcGkgcHJpdmF0ZVxuICAgKi9cbiAgb25FcnJvcihlcnIpIHtcbiAgICBkZWJ1ZyhcInNvY2tldCBlcnJvciAlalwiLCBlcnIpO1xuICAgIFNvY2tldC5wcmlvcldlYnNvY2tldFN1Y2Nlc3MgPSBmYWxzZTtcbiAgICB0aGlzLmVtaXQoXCJlcnJvclwiLCBlcnIpO1xuICAgIHRoaXMub25DbG9zZShcInRyYW5zcG9ydCBlcnJvclwiLCBlcnIpO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGxlZCB1cG9uIHRyYW5zcG9ydCBjbG9zZS5cbiAgICpcbiAgICogQGFwaSBwcml2YXRlXG4gICAqL1xuICBvbkNsb3NlKHJlYXNvbiwgZGVzYykge1xuICAgIGlmIChcbiAgICAgIFwib3BlbmluZ1wiID09PSB0aGlzLnJlYWR5U3RhdGUgfHxcbiAgICAgIFwib3BlblwiID09PSB0aGlzLnJlYWR5U3RhdGUgfHxcbiAgICAgIFwiY2xvc2luZ1wiID09PSB0aGlzLnJlYWR5U3RhdGVcbiAgICApIHtcbiAgICAgIGRlYnVnKCdzb2NrZXQgY2xvc2Ugd2l0aCByZWFzb246IFwiJXNcIicsIHJlYXNvbik7XG5cbiAgICAgIC8vIGNsZWFyIHRpbWVyc1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucGluZ0ludGVydmFsVGltZXIpO1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucGluZ1RpbWVvdXRUaW1lcik7XG5cbiAgICAgIC8vIHN0b3AgZXZlbnQgZnJvbSBmaXJpbmcgYWdhaW4gZm9yIHRyYW5zcG9ydFxuICAgICAgdGhpcy50cmFuc3BvcnQucmVtb3ZlQWxsTGlzdGVuZXJzKFwiY2xvc2VcIik7XG5cbiAgICAgIC8vIGVuc3VyZSB0cmFuc3BvcnQgd29uJ3Qgc3RheSBvcGVuXG4gICAgICB0aGlzLnRyYW5zcG9ydC5jbG9zZSgpO1xuXG4gICAgICAvLyBpZ25vcmUgZnVydGhlciB0cmFuc3BvcnQgY29tbXVuaWNhdGlvblxuICAgICAgdGhpcy50cmFuc3BvcnQucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG5cbiAgICAgIGlmICh0eXBlb2YgcmVtb3ZlRXZlbnRMaXN0ZW5lciA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHJlbW92ZUV2ZW50TGlzdGVuZXIoXCJvZmZsaW5lXCIsIHRoaXMub2ZmbGluZUV2ZW50TGlzdGVuZXIsIGZhbHNlKTtcbiAgICAgIH1cblxuICAgICAgLy8gc2V0IHJlYWR5IHN0YXRlXG4gICAgICB0aGlzLnJlYWR5U3RhdGUgPSBcImNsb3NlZFwiO1xuXG4gICAgICAvLyBjbGVhciBzZXNzaW9uIGlkXG4gICAgICB0aGlzLmlkID0gbnVsbDtcblxuICAgICAgLy8gZW1pdCBjbG9zZSBldmVudFxuICAgICAgdGhpcy5lbWl0KFwiY2xvc2VcIiwgcmVhc29uLCBkZXNjKTtcblxuICAgICAgLy8gY2xlYW4gYnVmZmVycyBhZnRlciwgc28gdXNlcnMgY2FuIHN0aWxsXG4gICAgICAvLyBncmFiIHRoZSBidWZmZXJzIG9uIGBjbG9zZWAgZXZlbnRcbiAgICAgIHRoaXMud3JpdGVCdWZmZXIgPSBbXTtcbiAgICAgIHRoaXMucHJldkJ1ZmZlckxlbiA9IDA7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEZpbHRlcnMgdXBncmFkZXMsIHJldHVybmluZyBvbmx5IHRob3NlIG1hdGNoaW5nIGNsaWVudCB0cmFuc3BvcnRzLlxuICAgKlxuICAgKiBAcGFyYW0ge0FycmF5fSBzZXJ2ZXIgdXBncmFkZXNcbiAgICogQGFwaSBwcml2YXRlXG4gICAqXG4gICAqL1xuICBmaWx0ZXJVcGdyYWRlcyh1cGdyYWRlcykge1xuICAgIGNvbnN0IGZpbHRlcmVkVXBncmFkZXMgPSBbXTtcbiAgICBsZXQgaSA9IDA7XG4gICAgY29uc3QgaiA9IHVwZ3JhZGVzLmxlbmd0aDtcbiAgICBmb3IgKDsgaSA8IGo7IGkrKykge1xuICAgICAgaWYgKH50aGlzLnRyYW5zcG9ydHMuaW5kZXhPZih1cGdyYWRlc1tpXSkpXG4gICAgICAgIGZpbHRlcmVkVXBncmFkZXMucHVzaCh1cGdyYWRlc1tpXSk7XG4gICAgfVxuICAgIHJldHVybiBmaWx0ZXJlZFVwZ3JhZGVzO1xuICB9XG59XG5cblNvY2tldC5wcmlvcldlYnNvY2tldFN1Y2Nlc3MgPSBmYWxzZTtcblxuLyoqXG4gKiBQcm90b2NvbCB2ZXJzaW9uLlxuICpcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuU29ja2V0LnByb3RvY29sID0gcGFyc2VyLnByb3RvY29sOyAvLyB0aGlzIGlzIGFuIGludFxuXG5mdW5jdGlvbiBjbG9uZShvYmopIHtcbiAgY29uc3QgbyA9IHt9O1xuICBmb3IgKGxldCBpIGluIG9iaikge1xuICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkoaSkpIHtcbiAgICAgIG9baV0gPSBvYmpbaV07XG4gICAgfVxuICB9XG4gIHJldHVybiBvO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFNvY2tldDtcbiIsImNvbnN0IHBhcnNlciA9IHJlcXVpcmUoXCJlbmdpbmUuaW8tcGFyc2VyXCIpO1xuY29uc3QgRW1pdHRlciA9IHJlcXVpcmUoXCJjb21wb25lbnQtZW1pdHRlclwiKTtcbmNvbnN0IGRlYnVnID0gcmVxdWlyZShcImRlYnVnXCIpKFwiZW5naW5lLmlvLWNsaWVudDp0cmFuc3BvcnRcIik7XG5cbmNsYXNzIFRyYW5zcG9ydCBleHRlbmRzIEVtaXR0ZXIge1xuICAvKipcbiAgICogVHJhbnNwb3J0IGFic3RyYWN0IGNvbnN0cnVjdG9yLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucy5cbiAgICogQGFwaSBwcml2YXRlXG4gICAqL1xuICBjb25zdHJ1Y3RvcihvcHRzKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIHRoaXMub3B0cyA9IG9wdHM7XG4gICAgdGhpcy5xdWVyeSA9IG9wdHMucXVlcnk7XG4gICAgdGhpcy5yZWFkeVN0YXRlID0gXCJcIjtcbiAgICB0aGlzLnNvY2tldCA9IG9wdHMuc29ja2V0O1xuICB9XG5cbiAgLyoqXG4gICAqIEVtaXRzIGFuIGVycm9yLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gICAqIEByZXR1cm4ge1RyYW5zcG9ydH0gZm9yIGNoYWluaW5nXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuICBvbkVycm9yKG1zZywgZGVzYykge1xuICAgIGNvbnN0IGVyciA9IG5ldyBFcnJvcihtc2cpO1xuICAgIGVyci50eXBlID0gXCJUcmFuc3BvcnRFcnJvclwiO1xuICAgIGVyci5kZXNjcmlwdGlvbiA9IGRlc2M7XG4gICAgdGhpcy5lbWl0KFwiZXJyb3JcIiwgZXJyKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBPcGVucyB0aGUgdHJhbnNwb3J0LlxuICAgKlxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cbiAgb3BlbigpIHtcbiAgICBpZiAoXCJjbG9zZWRcIiA9PT0gdGhpcy5yZWFkeVN0YXRlIHx8IFwiXCIgPT09IHRoaXMucmVhZHlTdGF0ZSkge1xuICAgICAgdGhpcy5yZWFkeVN0YXRlID0gXCJvcGVuaW5nXCI7XG4gICAgICB0aGlzLmRvT3BlbigpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIENsb3NlcyB0aGUgdHJhbnNwb3J0LlxuICAgKlxuICAgKiBAYXBpIHByaXZhdGVcbiAgICovXG4gIGNsb3NlKCkge1xuICAgIGlmIChcIm9wZW5pbmdcIiA9PT0gdGhpcy5yZWFkeVN0YXRlIHx8IFwib3BlblwiID09PSB0aGlzLnJlYWR5U3RhdGUpIHtcbiAgICAgIHRoaXMuZG9DbG9zZSgpO1xuICAgICAgdGhpcy5vbkNsb3NlKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogU2VuZHMgbXVsdGlwbGUgcGFja2V0cy5cbiAgICpcbiAgICogQHBhcmFtIHtBcnJheX0gcGFja2V0c1xuICAgKiBAYXBpIHByaXZhdGVcbiAgICovXG4gIHNlbmQocGFja2V0cykge1xuICAgIGlmIChcIm9wZW5cIiA9PT0gdGhpcy5yZWFkeVN0YXRlKSB7XG4gICAgICB0aGlzLndyaXRlKHBhY2tldHMpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyB0aGlzIG1pZ2h0IGhhcHBlbiBpZiB0aGUgdHJhbnNwb3J0IHdhcyBzaWxlbnRseSBjbG9zZWQgaW4gdGhlIGJlZm9yZXVubG9hZCBldmVudCBoYW5kbGVyXG4gICAgICBkZWJ1ZyhcInRyYW5zcG9ydCBpcyBub3Qgb3BlbiwgZGlzY2FyZGluZyBwYWNrZXRzXCIpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsZWQgdXBvbiBvcGVuXG4gICAqXG4gICAqIEBhcGkgcHJpdmF0ZVxuICAgKi9cbiAgb25PcGVuKCkge1xuICAgIHRoaXMucmVhZHlTdGF0ZSA9IFwib3BlblwiO1xuICAgIHRoaXMud3JpdGFibGUgPSB0cnVlO1xuICAgIHRoaXMuZW1pdChcIm9wZW5cIik7XG4gIH1cblxuICAvKipcbiAgICogQ2FsbGVkIHdpdGggZGF0YS5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGRhdGFcbiAgICogQGFwaSBwcml2YXRlXG4gICAqL1xuICBvbkRhdGEoZGF0YSkge1xuICAgIGNvbnN0IHBhY2tldCA9IHBhcnNlci5kZWNvZGVQYWNrZXQoZGF0YSwgdGhpcy5zb2NrZXQuYmluYXJ5VHlwZSk7XG4gICAgdGhpcy5vblBhY2tldChwYWNrZXQpO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGxlZCB3aXRoIGEgZGVjb2RlZCBwYWNrZXQuXG4gICAqL1xuICBvblBhY2tldChwYWNrZXQpIHtcbiAgICB0aGlzLmVtaXQoXCJwYWNrZXRcIiwgcGFja2V0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsZWQgdXBvbiBjbG9zZS5cbiAgICpcbiAgICogQGFwaSBwcml2YXRlXG4gICAqL1xuICBvbkNsb3NlKCkge1xuICAgIHRoaXMucmVhZHlTdGF0ZSA9IFwiY2xvc2VkXCI7XG4gICAgdGhpcy5lbWl0KFwiY2xvc2VcIik7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBUcmFuc3BvcnQ7XG4iLCJjb25zdCBYTUxIdHRwUmVxdWVzdCA9IHJlcXVpcmUoXCIuLi8uLi9jb250cmliL3htbGh0dHByZXF1ZXN0LXNzbC9YTUxIdHRwUmVxdWVzdFwiKTtcbmNvbnN0IFhIUiA9IHJlcXVpcmUoXCIuL3BvbGxpbmcteGhyXCIpO1xuY29uc3QgSlNPTlAgPSByZXF1aXJlKFwiLi9wb2xsaW5nLWpzb25wXCIpO1xuY29uc3Qgd2Vic29ja2V0ID0gcmVxdWlyZShcIi4vd2Vic29ja2V0XCIpO1xuXG5leHBvcnRzLnBvbGxpbmcgPSBwb2xsaW5nO1xuZXhwb3J0cy53ZWJzb2NrZXQgPSB3ZWJzb2NrZXQ7XG5cbi8qKlxuICogUG9sbGluZyB0cmFuc3BvcnQgcG9seW1vcnBoaWMgY29uc3RydWN0b3IuXG4gKiBEZWNpZGVzIG9uIHhociB2cyBqc29ucCBiYXNlZCBvbiBmZWF0dXJlIGRldGVjdGlvbi5cbiAqXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBwb2xsaW5nKG9wdHMpIHtcbiAgbGV0IHhocjtcbiAgbGV0IHhkID0gZmFsc2U7XG4gIGxldCB4cyA9IGZhbHNlO1xuICBjb25zdCBqc29ucCA9IGZhbHNlICE9PSBvcHRzLmpzb25wO1xuXG4gIGlmICh0eXBlb2YgbG9jYXRpb24gIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBjb25zdCBpc1NTTCA9IFwiaHR0cHM6XCIgPT09IGxvY2F0aW9uLnByb3RvY29sO1xuICAgIGxldCBwb3J0ID0gbG9jYXRpb24ucG9ydDtcblxuICAgIC8vIHNvbWUgdXNlciBhZ2VudHMgaGF2ZSBlbXB0eSBgbG9jYXRpb24ucG9ydGBcbiAgICBpZiAoIXBvcnQpIHtcbiAgICAgIHBvcnQgPSBpc1NTTCA/IDQ0MyA6IDgwO1xuICAgIH1cblxuICAgIHhkID0gb3B0cy5ob3N0bmFtZSAhPT0gbG9jYXRpb24uaG9zdG5hbWUgfHwgcG9ydCAhPT0gb3B0cy5wb3J0O1xuICAgIHhzID0gb3B0cy5zZWN1cmUgIT09IGlzU1NMO1xuICB9XG5cbiAgb3B0cy54ZG9tYWluID0geGQ7XG4gIG9wdHMueHNjaGVtZSA9IHhzO1xuICB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3Qob3B0cyk7XG5cbiAgaWYgKFwib3BlblwiIGluIHhociAmJiAhb3B0cy5mb3JjZUpTT05QKSB7XG4gICAgcmV0dXJuIG5ldyBYSFIob3B0cyk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKCFqc29ucCkgdGhyb3cgbmV3IEVycm9yKFwiSlNPTlAgZGlzYWJsZWRcIik7XG4gICAgcmV0dXJuIG5ldyBKU09OUChvcHRzKTtcbiAgfVxufVxuIiwiY29uc3QgUG9sbGluZyA9IHJlcXVpcmUoXCIuL3BvbGxpbmdcIik7XG5jb25zdCBnbG9iYWxUaGlzID0gcmVxdWlyZShcIi4uL2dsb2JhbFRoaXNcIik7XG5cbmNvbnN0IHJOZXdsaW5lID0gL1xcbi9nO1xuY29uc3QgckVzY2FwZWROZXdsaW5lID0gL1xcXFxuL2c7XG5cbi8qKlxuICogR2xvYmFsIEpTT05QIGNhbGxiYWNrcy5cbiAqL1xuXG5sZXQgY2FsbGJhY2tzO1xuXG5jbGFzcyBKU09OUFBvbGxpbmcgZXh0ZW5kcyBQb2xsaW5nIHtcbiAgLyoqXG4gICAqIEpTT05QIFBvbGxpbmcgY29uc3RydWN0b3IuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzLlxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cbiAgY29uc3RydWN0b3Iob3B0cykge1xuICAgIHN1cGVyKG9wdHMpO1xuXG4gICAgdGhpcy5xdWVyeSA9IHRoaXMucXVlcnkgfHwge307XG5cbiAgICAvLyBkZWZpbmUgZ2xvYmFsIGNhbGxiYWNrcyBhcnJheSBpZiBub3QgcHJlc2VudFxuICAgIC8vIHdlIGRvIHRoaXMgaGVyZSAobGF6aWx5KSB0byBhdm9pZCB1bm5lZWRlZCBnbG9iYWwgcG9sbHV0aW9uXG4gICAgaWYgKCFjYWxsYmFja3MpIHtcbiAgICAgIC8vIHdlIG5lZWQgdG8gY29uc2lkZXIgbXVsdGlwbGUgZW5naW5lcyBpbiB0aGUgc2FtZSBwYWdlXG4gICAgICBjYWxsYmFja3MgPSBnbG9iYWxUaGlzLl9fX2VpbyA9IGdsb2JhbFRoaXMuX19fZWlvIHx8IFtdO1xuICAgIH1cblxuICAgIC8vIGNhbGxiYWNrIGlkZW50aWZpZXJcbiAgICB0aGlzLmluZGV4ID0gY2FsbGJhY2tzLmxlbmd0aDtcblxuICAgIC8vIGFkZCBjYWxsYmFjayB0byBqc29ucCBnbG9iYWxcbiAgICBjYWxsYmFja3MucHVzaCh0aGlzLm9uRGF0YS5iaW5kKHRoaXMpKTtcblxuICAgIC8vIGFwcGVuZCB0byBxdWVyeSBzdHJpbmdcbiAgICB0aGlzLnF1ZXJ5LmogPSB0aGlzLmluZGV4O1xuICB9XG5cbiAgLyoqXG4gICAqIEpTT05QIG9ubHkgc3VwcG9ydHMgYmluYXJ5IGFzIGJhc2U2NCBlbmNvZGVkIHN0cmluZ3NcbiAgICovXG4gIGdldCBzdXBwb3J0c0JpbmFyeSgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogQ2xvc2VzIHRoZSBzb2NrZXQuXG4gICAqXG4gICAqIEBhcGkgcHJpdmF0ZVxuICAgKi9cbiAgZG9DbG9zZSgpIHtcbiAgICBpZiAodGhpcy5zY3JpcHQpIHtcbiAgICAgIC8vIHByZXZlbnQgc3B1cmlvdXMgZXJyb3JzIGZyb20gYmVpbmcgZW1pdHRlZCB3aGVuIHRoZSB3aW5kb3cgaXMgdW5sb2FkZWRcbiAgICAgIHRoaXMuc2NyaXB0Lm9uZXJyb3IgPSAoKSA9PiB7fTtcbiAgICAgIHRoaXMuc2NyaXB0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5zY3JpcHQpO1xuICAgICAgdGhpcy5zY3JpcHQgPSBudWxsO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmZvcm0pIHtcbiAgICAgIHRoaXMuZm9ybS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuZm9ybSk7XG4gICAgICB0aGlzLmZvcm0gPSBudWxsO1xuICAgICAgdGhpcy5pZnJhbWUgPSBudWxsO1xuICAgIH1cblxuICAgIHN1cGVyLmRvQ2xvc2UoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdGFydHMgYSBwb2xsIGN5Y2xlLlxuICAgKlxuICAgKiBAYXBpIHByaXZhdGVcbiAgICovXG4gIGRvUG9sbCgpIHtcbiAgICBjb25zdCBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO1xuXG4gICAgaWYgKHRoaXMuc2NyaXB0KSB7XG4gICAgICB0aGlzLnNjcmlwdC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuc2NyaXB0KTtcbiAgICAgIHRoaXMuc2NyaXB0ID0gbnVsbDtcbiAgICB9XG5cbiAgICBzY3JpcHQuYXN5bmMgPSB0cnVlO1xuICAgIHNjcmlwdC5zcmMgPSB0aGlzLnVyaSgpO1xuICAgIHNjcmlwdC5vbmVycm9yID0gZSA9PiB7XG4gICAgICB0aGlzLm9uRXJyb3IoXCJqc29ucCBwb2xsIGVycm9yXCIsIGUpO1xuICAgIH07XG5cbiAgICBjb25zdCBpbnNlcnRBdCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic2NyaXB0XCIpWzBdO1xuICAgIGlmIChpbnNlcnRBdCkge1xuICAgICAgaW5zZXJ0QXQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoc2NyaXB0LCBpbnNlcnRBdCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIChkb2N1bWVudC5oZWFkIHx8IGRvY3VtZW50LmJvZHkpLmFwcGVuZENoaWxkKHNjcmlwdCk7XG4gICAgfVxuICAgIHRoaXMuc2NyaXB0ID0gc2NyaXB0O1xuXG4gICAgY29uc3QgaXNVQWdlY2tvID1cbiAgICAgIFwidW5kZWZpbmVkXCIgIT09IHR5cGVvZiBuYXZpZ2F0b3IgJiYgL2dlY2tvL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcblxuICAgIGlmIChpc1VBZ2Vja28pIHtcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIGNvbnN0IGlmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpZnJhbWVcIik7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoaWZyYW1lKTtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChpZnJhbWUpO1xuICAgICAgfSwgMTAwKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogV3JpdGVzIHdpdGggYSBoaWRkZW4gaWZyYW1lLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gZGF0YSB0byBzZW5kXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxlZCB1cG9uIGZsdXNoLlxuICAgKiBAYXBpIHByaXZhdGVcbiAgICovXG4gIGRvV3JpdGUoZGF0YSwgZm4pIHtcbiAgICBsZXQgaWZyYW1lO1xuXG4gICAgaWYgKCF0aGlzLmZvcm0pIHtcbiAgICAgIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZm9ybVwiKTtcbiAgICAgIGNvbnN0IGFyZWEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGV4dGFyZWFcIik7XG4gICAgICBjb25zdCBpZCA9ICh0aGlzLmlmcmFtZUlkID0gXCJlaW9faWZyYW1lX1wiICsgdGhpcy5pbmRleCk7XG5cbiAgICAgIGZvcm0uY2xhc3NOYW1lID0gXCJzb2NrZXRpb1wiO1xuICAgICAgZm9ybS5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcbiAgICAgIGZvcm0uc3R5bGUudG9wID0gXCItMTAwMHB4XCI7XG4gICAgICBmb3JtLnN0eWxlLmxlZnQgPSBcIi0xMDAwcHhcIjtcbiAgICAgIGZvcm0udGFyZ2V0ID0gaWQ7XG4gICAgICBmb3JtLm1ldGhvZCA9IFwiUE9TVFwiO1xuICAgICAgZm9ybS5zZXRBdHRyaWJ1dGUoXCJhY2NlcHQtY2hhcnNldFwiLCBcInV0Zi04XCIpO1xuICAgICAgYXJlYS5uYW1lID0gXCJkXCI7XG4gICAgICBmb3JtLmFwcGVuZENoaWxkKGFyZWEpO1xuICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChmb3JtKTtcblxuICAgICAgdGhpcy5mb3JtID0gZm9ybTtcbiAgICAgIHRoaXMuYXJlYSA9IGFyZWE7XG4gICAgfVxuXG4gICAgdGhpcy5mb3JtLmFjdGlvbiA9IHRoaXMudXJpKCk7XG5cbiAgICBmdW5jdGlvbiBjb21wbGV0ZSgpIHtcbiAgICAgIGluaXRJZnJhbWUoKTtcbiAgICAgIGZuKCk7XG4gICAgfVxuXG4gICAgY29uc3QgaW5pdElmcmFtZSA9ICgpID0+IHtcbiAgICAgIGlmICh0aGlzLmlmcmFtZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHRoaXMuZm9ybS5yZW1vdmVDaGlsZCh0aGlzLmlmcmFtZSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICB0aGlzLm9uRXJyb3IoXCJqc29ucCBwb2xsaW5nIGlmcmFtZSByZW1vdmFsIGVycm9yXCIsIGUpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIGllNiBkeW5hbWljIGlmcmFtZXMgd2l0aCB0YXJnZXQ9XCJcIiBzdXBwb3J0ICh0aGFua3MgQ2hyaXMgTGFtYmFjaGVyKVxuICAgICAgICBjb25zdCBodG1sID0gJzxpZnJhbWUgc3JjPVwiamF2YXNjcmlwdDowXCIgbmFtZT1cIicgKyB0aGlzLmlmcmFtZUlkICsgJ1wiPic7XG4gICAgICAgIGlmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoaHRtbCk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGlmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpZnJhbWVcIik7XG4gICAgICAgIGlmcmFtZS5uYW1lID0gdGhpcy5pZnJhbWVJZDtcbiAgICAgICAgaWZyYW1lLnNyYyA9IFwiamF2YXNjcmlwdDowXCI7XG4gICAgICB9XG5cbiAgICAgIGlmcmFtZS5pZCA9IHRoaXMuaWZyYW1lSWQ7XG5cbiAgICAgIHRoaXMuZm9ybS5hcHBlbmRDaGlsZChpZnJhbWUpO1xuICAgICAgdGhpcy5pZnJhbWUgPSBpZnJhbWU7XG4gICAgfTtcblxuICAgIGluaXRJZnJhbWUoKTtcblxuICAgIC8vIGVzY2FwZSBcXG4gdG8gcHJldmVudCBpdCBmcm9tIGJlaW5nIGNvbnZlcnRlZCBpbnRvIFxcclxcbiBieSBzb21lIFVBc1xuICAgIC8vIGRvdWJsZSBlc2NhcGluZyBpcyByZXF1aXJlZCBmb3IgZXNjYXBlZCBuZXcgbGluZXMgYmVjYXVzZSB1bmVzY2FwaW5nIG9mIG5ldyBsaW5lcyBjYW4gYmUgZG9uZSBzYWZlbHkgb24gc2VydmVyLXNpZGVcbiAgICBkYXRhID0gZGF0YS5yZXBsYWNlKHJFc2NhcGVkTmV3bGluZSwgXCJcXFxcXFxuXCIpO1xuICAgIHRoaXMuYXJlYS52YWx1ZSA9IGRhdGEucmVwbGFjZShyTmV3bGluZSwgXCJcXFxcblwiKTtcblxuICAgIHRyeSB7XG4gICAgICB0aGlzLmZvcm0uc3VibWl0KCk7XG4gICAgfSBjYXRjaCAoZSkge31cblxuICAgIGlmICh0aGlzLmlmcmFtZS5hdHRhY2hFdmVudCkge1xuICAgICAgdGhpcy5pZnJhbWUub25yZWFkeXN0YXRlY2hhbmdlID0gKCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5pZnJhbWUucmVhZHlTdGF0ZSA9PT0gXCJjb21wbGV0ZVwiKSB7XG4gICAgICAgICAgY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5pZnJhbWUub25sb2FkID0gY29tcGxldGU7XG4gICAgfVxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gSlNPTlBQb2xsaW5nO1xuIiwiLyogZ2xvYmFsIGF0dGFjaEV2ZW50ICovXG5cbmNvbnN0IFhNTEh0dHBSZXF1ZXN0ID0gcmVxdWlyZShcIi4uLy4uL2NvbnRyaWIveG1saHR0cHJlcXVlc3Qtc3NsL1hNTEh0dHBSZXF1ZXN0XCIpO1xuY29uc3QgUG9sbGluZyA9IHJlcXVpcmUoXCIuL3BvbGxpbmdcIik7XG5jb25zdCBFbWl0dGVyID0gcmVxdWlyZShcImNvbXBvbmVudC1lbWl0dGVyXCIpO1xuY29uc3QgeyBwaWNrIH0gPSByZXF1aXJlKFwiLi4vdXRpbFwiKTtcbmNvbnN0IGdsb2JhbFRoaXMgPSByZXF1aXJlKFwiLi4vZ2xvYmFsVGhpc1wiKTtcblxuY29uc3QgZGVidWcgPSByZXF1aXJlKFwiZGVidWdcIikoXCJlbmdpbmUuaW8tY2xpZW50OnBvbGxpbmcteGhyXCIpO1xuXG4vKipcbiAqIEVtcHR5IGZ1bmN0aW9uXG4gKi9cblxuZnVuY3Rpb24gZW1wdHkoKSB7fVxuXG5jb25zdCBoYXNYSFIyID0gKGZ1bmN0aW9uKCkge1xuICBjb25zdCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoeyB4ZG9tYWluOiBmYWxzZSB9KTtcbiAgcmV0dXJuIG51bGwgIT0geGhyLnJlc3BvbnNlVHlwZTtcbn0pKCk7XG5cbmNsYXNzIFhIUiBleHRlbmRzIFBvbGxpbmcge1xuICAvKipcbiAgICogWEhSIFBvbGxpbmcgY29uc3RydWN0b3IuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuICBjb25zdHJ1Y3RvcihvcHRzKSB7XG4gICAgc3VwZXIob3B0cyk7XG5cbiAgICBpZiAodHlwZW9mIGxvY2F0aW9uICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBjb25zdCBpc1NTTCA9IFwiaHR0cHM6XCIgPT09IGxvY2F0aW9uLnByb3RvY29sO1xuICAgICAgbGV0IHBvcnQgPSBsb2NhdGlvbi5wb3J0O1xuXG4gICAgICAvLyBzb21lIHVzZXIgYWdlbnRzIGhhdmUgZW1wdHkgYGxvY2F0aW9uLnBvcnRgXG4gICAgICBpZiAoIXBvcnQpIHtcbiAgICAgICAgcG9ydCA9IGlzU1NMID8gNDQzIDogODA7XG4gICAgICB9XG5cbiAgICAgIHRoaXMueGQgPVxuICAgICAgICAodHlwZW9mIGxvY2F0aW9uICE9PSBcInVuZGVmaW5lZFwiICYmXG4gICAgICAgICAgb3B0cy5ob3N0bmFtZSAhPT0gbG9jYXRpb24uaG9zdG5hbWUpIHx8XG4gICAgICAgIHBvcnQgIT09IG9wdHMucG9ydDtcbiAgICAgIHRoaXMueHMgPSBvcHRzLnNlY3VyZSAhPT0gaXNTU0w7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFhIUiBzdXBwb3J0cyBiaW5hcnlcbiAgICAgKi9cbiAgICBjb25zdCBmb3JjZUJhc2U2NCA9IG9wdHMgJiYgb3B0cy5mb3JjZUJhc2U2NDtcbiAgICB0aGlzLnN1cHBvcnRzQmluYXJ5ID0gaGFzWEhSMiAmJiAhZm9yY2VCYXNlNjQ7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIHJlcXVlc3QuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXRob2RcbiAgICogQGFwaSBwcml2YXRlXG4gICAqL1xuICByZXF1ZXN0KG9wdHMgPSB7fSkge1xuICAgIE9iamVjdC5hc3NpZ24ob3B0cywgeyB4ZDogdGhpcy54ZCwgeHM6IHRoaXMueHMgfSwgdGhpcy5vcHRzKTtcbiAgICByZXR1cm4gbmV3IFJlcXVlc3QodGhpcy51cmkoKSwgb3B0cyk7XG4gIH1cblxuICAvKipcbiAgICogU2VuZHMgZGF0YS5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGRhdGEgdG8gc2VuZC5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGVkIHVwb24gZmx1c2guXG4gICAqIEBhcGkgcHJpdmF0ZVxuICAgKi9cbiAgZG9Xcml0ZShkYXRhLCBmbikge1xuICAgIGNvbnN0IHJlcSA9IHRoaXMucmVxdWVzdCh7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgZGF0YTogZGF0YVxuICAgIH0pO1xuICAgIHJlcS5vbihcInN1Y2Nlc3NcIiwgZm4pO1xuICAgIHJlcS5vbihcImVycm9yXCIsIGVyciA9PiB7XG4gICAgICB0aGlzLm9uRXJyb3IoXCJ4aHIgcG9zdCBlcnJvclwiLCBlcnIpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0YXJ0cyBhIHBvbGwgY3ljbGUuXG4gICAqXG4gICAqIEBhcGkgcHJpdmF0ZVxuICAgKi9cbiAgZG9Qb2xsKCkge1xuICAgIGRlYnVnKFwieGhyIHBvbGxcIik7XG4gICAgY29uc3QgcmVxID0gdGhpcy5yZXF1ZXN0KCk7XG4gICAgcmVxLm9uKFwiZGF0YVwiLCB0aGlzLm9uRGF0YS5iaW5kKHRoaXMpKTtcbiAgICByZXEub24oXCJlcnJvclwiLCBlcnIgPT4ge1xuICAgICAgdGhpcy5vbkVycm9yKFwieGhyIHBvbGwgZXJyb3JcIiwgZXJyKTtcbiAgICB9KTtcbiAgICB0aGlzLnBvbGxYaHIgPSByZXE7XG4gIH1cbn1cblxuY2xhc3MgUmVxdWVzdCBleHRlbmRzIEVtaXR0ZXIge1xuICAvKipcbiAgICogUmVxdWVzdCBjb25zdHJ1Y3RvclxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cbiAgY29uc3RydWN0b3IodXJpLCBvcHRzKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLm9wdHMgPSBvcHRzO1xuXG4gICAgdGhpcy5tZXRob2QgPSBvcHRzLm1ldGhvZCB8fCBcIkdFVFwiO1xuICAgIHRoaXMudXJpID0gdXJpO1xuICAgIHRoaXMuYXN5bmMgPSBmYWxzZSAhPT0gb3B0cy5hc3luYztcbiAgICB0aGlzLmRhdGEgPSB1bmRlZmluZWQgIT09IG9wdHMuZGF0YSA/IG9wdHMuZGF0YSA6IG51bGw7XG5cbiAgICB0aGlzLmNyZWF0ZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgdGhlIFhIUiBvYmplY3QgYW5kIHNlbmRzIHRoZSByZXF1ZXN0LlxuICAgKlxuICAgKiBAYXBpIHByaXZhdGVcbiAgICovXG4gIGNyZWF0ZSgpIHtcbiAgICBjb25zdCBvcHRzID0gcGljayhcbiAgICAgIHRoaXMub3B0cyxcbiAgICAgIFwiYWdlbnRcIixcbiAgICAgIFwiZW5hYmxlc1hEUlwiLFxuICAgICAgXCJwZnhcIixcbiAgICAgIFwia2V5XCIsXG4gICAgICBcInBhc3NwaHJhc2VcIixcbiAgICAgIFwiY2VydFwiLFxuICAgICAgXCJjYVwiLFxuICAgICAgXCJjaXBoZXJzXCIsXG4gICAgICBcInJlamVjdFVuYXV0aG9yaXplZFwiLFxuICAgICAgXCJhdXRvVW5yZWZcIlxuICAgICk7XG4gICAgb3B0cy54ZG9tYWluID0gISF0aGlzLm9wdHMueGQ7XG4gICAgb3B0cy54c2NoZW1lID0gISF0aGlzLm9wdHMueHM7XG5cbiAgICBjb25zdCB4aHIgPSAodGhpcy54aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3Qob3B0cykpO1xuXG4gICAgdHJ5IHtcbiAgICAgIGRlYnVnKFwieGhyIG9wZW4gJXM6ICVzXCIsIHRoaXMubWV0aG9kLCB0aGlzLnVyaSk7XG4gICAgICB4aHIub3Blbih0aGlzLm1ldGhvZCwgdGhpcy51cmksIHRoaXMuYXN5bmMpO1xuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKHRoaXMub3B0cy5leHRyYUhlYWRlcnMpIHtcbiAgICAgICAgICB4aHIuc2V0RGlzYWJsZUhlYWRlckNoZWNrICYmIHhoci5zZXREaXNhYmxlSGVhZGVyQ2hlY2sodHJ1ZSk7XG4gICAgICAgICAgZm9yIChsZXQgaSBpbiB0aGlzLm9wdHMuZXh0cmFIZWFkZXJzKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5vcHRzLmV4dHJhSGVhZGVycy5oYXNPd25Qcm9wZXJ0eShpKSkge1xuICAgICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihpLCB0aGlzLm9wdHMuZXh0cmFIZWFkZXJzW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGUpIHt9XG5cbiAgICAgIGlmIChcIlBPU1RcIiA9PT0gdGhpcy5tZXRob2QpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtdHlwZVwiLCBcInRleHQvcGxhaW47Y2hhcnNldD1VVEYtOFwiKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge31cbiAgICAgIH1cblxuICAgICAgdHJ5IHtcbiAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoXCJBY2NlcHRcIiwgXCIqLypcIik7XG4gICAgICB9IGNhdGNoIChlKSB7fVxuXG4gICAgICAvLyBpZTYgY2hlY2tcbiAgICAgIGlmIChcIndpdGhDcmVkZW50aWFsc1wiIGluIHhocikge1xuICAgICAgICB4aHIud2l0aENyZWRlbnRpYWxzID0gdGhpcy5vcHRzLndpdGhDcmVkZW50aWFscztcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMub3B0cy5yZXF1ZXN0VGltZW91dCkge1xuICAgICAgICB4aHIudGltZW91dCA9IHRoaXMub3B0cy5yZXF1ZXN0VGltZW91dDtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuaGFzWERSKCkpIHtcbiAgICAgICAgeGhyLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgICAgICB0aGlzLm9uTG9hZCgpO1xuICAgICAgICB9O1xuICAgICAgICB4aHIub25lcnJvciA9ICgpID0+IHtcbiAgICAgICAgICB0aGlzLm9uRXJyb3IoeGhyLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgIH07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gKCkgPT4ge1xuICAgICAgICAgIGlmICg0ICE9PSB4aHIucmVhZHlTdGF0ZSkgcmV0dXJuO1xuICAgICAgICAgIGlmICgyMDAgPT09IHhoci5zdGF0dXMgfHwgMTIyMyA9PT0geGhyLnN0YXR1cykge1xuICAgICAgICAgICAgdGhpcy5vbkxvYWQoKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gbWFrZSBzdXJlIHRoZSBgZXJyb3JgIGV2ZW50IGhhbmRsZXIgdGhhdCdzIHVzZXItc2V0XG4gICAgICAgICAgICAvLyBkb2VzIG5vdCB0aHJvdyBpbiB0aGUgc2FtZSB0aWNrIGFuZCBnZXRzIGNhdWdodCBoZXJlXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgdGhpcy5vbkVycm9yKHR5cGVvZiB4aHIuc3RhdHVzID09PSBcIm51bWJlclwiID8geGhyLnN0YXR1cyA6IDApO1xuICAgICAgICAgICAgfSwgMCk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICBkZWJ1ZyhcInhociBkYXRhICVzXCIsIHRoaXMuZGF0YSk7XG4gICAgICB4aHIuc2VuZCh0aGlzLmRhdGEpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIC8vIE5lZWQgdG8gZGVmZXIgc2luY2UgLmNyZWF0ZSgpIGlzIGNhbGxlZCBkaXJlY3RseSBmcm9tIHRoZSBjb25zdHJ1Y3RvclxuICAgICAgLy8gYW5kIHRodXMgdGhlICdlcnJvcicgZXZlbnQgY2FuIG9ubHkgYmUgb25seSBib3VuZCAqYWZ0ZXIqIHRoaXMgZXhjZXB0aW9uXG4gICAgICAvLyBvY2N1cnMuICBUaGVyZWZvcmUsIGFsc28sIHdlIGNhbm5vdCB0aHJvdyBoZXJlIGF0IGFsbC5cbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLm9uRXJyb3IoZSk7XG4gICAgICB9LCAwKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGRvY3VtZW50ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICB0aGlzLmluZGV4ID0gUmVxdWVzdC5yZXF1ZXN0c0NvdW50Kys7XG4gICAgICBSZXF1ZXN0LnJlcXVlc3RzW3RoaXMuaW5kZXhdID0gdGhpcztcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2FsbGVkIHVwb24gc3VjY2Vzc2Z1bCByZXNwb25zZS5cbiAgICpcbiAgICogQGFwaSBwcml2YXRlXG4gICAqL1xuICBvblN1Y2Nlc3MoKSB7XG4gICAgdGhpcy5lbWl0KFwic3VjY2Vzc1wiKTtcbiAgICB0aGlzLmNsZWFudXAoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsZWQgaWYgd2UgaGF2ZSBkYXRhLlxuICAgKlxuICAgKiBAYXBpIHByaXZhdGVcbiAgICovXG4gIG9uRGF0YShkYXRhKSB7XG4gICAgdGhpcy5lbWl0KFwiZGF0YVwiLCBkYXRhKTtcbiAgICB0aGlzLm9uU3VjY2VzcygpO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGxlZCB1cG9uIGVycm9yLlxuICAgKlxuICAgKiBAYXBpIHByaXZhdGVcbiAgICovXG4gIG9uRXJyb3IoZXJyKSB7XG4gICAgdGhpcy5lbWl0KFwiZXJyb3JcIiwgZXJyKTtcbiAgICB0aGlzLmNsZWFudXAodHJ1ZSk7XG4gIH1cblxuICAvKipcbiAgICogQ2xlYW5zIHVwIGhvdXNlLlxuICAgKlxuICAgKiBAYXBpIHByaXZhdGVcbiAgICovXG4gIGNsZWFudXAoZnJvbUVycm9yKSB7XG4gICAgaWYgKFwidW5kZWZpbmVkXCIgPT09IHR5cGVvZiB0aGlzLnhociB8fCBudWxsID09PSB0aGlzLnhocikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyB4bWxodHRwcmVxdWVzdFxuICAgIGlmICh0aGlzLmhhc1hEUigpKSB7XG4gICAgICB0aGlzLnhoci5vbmxvYWQgPSB0aGlzLnhoci5vbmVycm9yID0gZW1wdHk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMueGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGVtcHR5O1xuICAgIH1cblxuICAgIGlmIChmcm9tRXJyb3IpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHRoaXMueGhyLmFib3J0KCk7XG4gICAgICB9IGNhdGNoIChlKSB7fVxuICAgIH1cblxuICAgIGlmICh0eXBlb2YgZG9jdW1lbnQgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIGRlbGV0ZSBSZXF1ZXN0LnJlcXVlc3RzW3RoaXMuaW5kZXhdO1xuICAgIH1cblxuICAgIHRoaXMueGhyID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsZWQgdXBvbiBsb2FkLlxuICAgKlxuICAgKiBAYXBpIHByaXZhdGVcbiAgICovXG4gIG9uTG9hZCgpIHtcbiAgICBjb25zdCBkYXRhID0gdGhpcy54aHIucmVzcG9uc2VUZXh0O1xuICAgIGlmIChkYXRhICE9PSBudWxsKSB7XG4gICAgICB0aGlzLm9uRGF0YShkYXRhKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgaXQgaGFzIFhEb21haW5SZXF1ZXN0LlxuICAgKlxuICAgKiBAYXBpIHByaXZhdGVcbiAgICovXG4gIGhhc1hEUigpIHtcbiAgICByZXR1cm4gdHlwZW9mIFhEb21haW5SZXF1ZXN0ICE9PSBcInVuZGVmaW5lZFwiICYmICF0aGlzLnhzICYmIHRoaXMuZW5hYmxlc1hEUjtcbiAgfVxuXG4gIC8qKlxuICAgKiBBYm9ydHMgdGhlIHJlcXVlc3QuXG4gICAqXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuICBhYm9ydCgpIHtcbiAgICB0aGlzLmNsZWFudXAoKTtcbiAgfVxufVxuXG4vKipcbiAqIEFib3J0cyBwZW5kaW5nIHJlcXVlc3RzIHdoZW4gdW5sb2FkaW5nIHRoZSB3aW5kb3cuIFRoaXMgaXMgbmVlZGVkIHRvIHByZXZlbnRcbiAqIG1lbW9yeSBsZWFrcyAoZS5nLiB3aGVuIHVzaW5nIElFKSBhbmQgdG8gZW5zdXJlIHRoYXQgbm8gc3B1cmlvdXMgZXJyb3IgaXNcbiAqIGVtaXR0ZWQuXG4gKi9cblxuUmVxdWVzdC5yZXF1ZXN0c0NvdW50ID0gMDtcblJlcXVlc3QucmVxdWVzdHMgPSB7fTtcblxuaWYgKHR5cGVvZiBkb2N1bWVudCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICBpZiAodHlwZW9mIGF0dGFjaEV2ZW50ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICBhdHRhY2hFdmVudChcIm9udW5sb2FkXCIsIHVubG9hZEhhbmRsZXIpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBhZGRFdmVudExpc3RlbmVyID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICBjb25zdCB0ZXJtaW5hdGlvbkV2ZW50ID0gXCJvbnBhZ2VoaWRlXCIgaW4gZ2xvYmFsVGhpcyA/IFwicGFnZWhpZGVcIiA6IFwidW5sb2FkXCI7XG4gICAgYWRkRXZlbnRMaXN0ZW5lcih0ZXJtaW5hdGlvbkV2ZW50LCB1bmxvYWRIYW5kbGVyLCBmYWxzZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gdW5sb2FkSGFuZGxlcigpIHtcbiAgZm9yIChsZXQgaSBpbiBSZXF1ZXN0LnJlcXVlc3RzKSB7XG4gICAgaWYgKFJlcXVlc3QucmVxdWVzdHMuaGFzT3duUHJvcGVydHkoaSkpIHtcbiAgICAgIFJlcXVlc3QucmVxdWVzdHNbaV0uYWJvcnQoKTtcbiAgICB9XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBYSFI7XG5tb2R1bGUuZXhwb3J0cy5SZXF1ZXN0ID0gUmVxdWVzdDtcbiIsImNvbnN0IFRyYW5zcG9ydCA9IHJlcXVpcmUoXCIuLi90cmFuc3BvcnRcIik7XG5jb25zdCBwYXJzZXFzID0gcmVxdWlyZShcInBhcnNlcXNcIik7XG5jb25zdCBwYXJzZXIgPSByZXF1aXJlKFwiZW5naW5lLmlvLXBhcnNlclwiKTtcbmNvbnN0IHllYXN0ID0gcmVxdWlyZShcInllYXN0XCIpO1xuXG5jb25zdCBkZWJ1ZyA9IHJlcXVpcmUoXCJkZWJ1Z1wiKShcImVuZ2luZS5pby1jbGllbnQ6cG9sbGluZ1wiKTtcblxuY2xhc3MgUG9sbGluZyBleHRlbmRzIFRyYW5zcG9ydCB7XG4gIC8qKlxuICAgKiBUcmFuc3BvcnQgbmFtZS5cbiAgICovXG4gIGdldCBuYW1lKCkge1xuICAgIHJldHVybiBcInBvbGxpbmdcIjtcbiAgfVxuXG4gIC8qKlxuICAgKiBPcGVucyB0aGUgc29ja2V0ICh0cmlnZ2VycyBwb2xsaW5nKS4gV2Ugd3JpdGUgYSBQSU5HIG1lc3NhZ2UgdG8gZGV0ZXJtaW5lXG4gICAqIHdoZW4gdGhlIHRyYW5zcG9ydCBpcyBvcGVuLlxuICAgKlxuICAgKiBAYXBpIHByaXZhdGVcbiAgICovXG4gIGRvT3BlbigpIHtcbiAgICB0aGlzLnBvbGwoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQYXVzZXMgcG9sbGluZy5cbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgdXBvbiBidWZmZXJzIGFyZSBmbHVzaGVkIGFuZCB0cmFuc3BvcnQgaXMgcGF1c2VkXG4gICAqIEBhcGkgcHJpdmF0ZVxuICAgKi9cbiAgcGF1c2Uob25QYXVzZSkge1xuICAgIHRoaXMucmVhZHlTdGF0ZSA9IFwicGF1c2luZ1wiO1xuXG4gICAgY29uc3QgcGF1c2UgPSAoKSA9PiB7XG4gICAgICBkZWJ1ZyhcInBhdXNlZFwiKTtcbiAgICAgIHRoaXMucmVhZHlTdGF0ZSA9IFwicGF1c2VkXCI7XG4gICAgICBvblBhdXNlKCk7XG4gICAgfTtcblxuICAgIGlmICh0aGlzLnBvbGxpbmcgfHwgIXRoaXMud3JpdGFibGUpIHtcbiAgICAgIGxldCB0b3RhbCA9IDA7XG5cbiAgICAgIGlmICh0aGlzLnBvbGxpbmcpIHtcbiAgICAgICAgZGVidWcoXCJ3ZSBhcmUgY3VycmVudGx5IHBvbGxpbmcgLSB3YWl0aW5nIHRvIHBhdXNlXCIpO1xuICAgICAgICB0b3RhbCsrO1xuICAgICAgICB0aGlzLm9uY2UoXCJwb2xsQ29tcGxldGVcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgZGVidWcoXCJwcmUtcGF1c2UgcG9sbGluZyBjb21wbGV0ZVwiKTtcbiAgICAgICAgICAtLXRvdGFsIHx8IHBhdXNlKCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXRoaXMud3JpdGFibGUpIHtcbiAgICAgICAgZGVidWcoXCJ3ZSBhcmUgY3VycmVudGx5IHdyaXRpbmcgLSB3YWl0aW5nIHRvIHBhdXNlXCIpO1xuICAgICAgICB0b3RhbCsrO1xuICAgICAgICB0aGlzLm9uY2UoXCJkcmFpblwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBkZWJ1ZyhcInByZS1wYXVzZSB3cml0aW5nIGNvbXBsZXRlXCIpO1xuICAgICAgICAgIC0tdG90YWwgfHwgcGF1c2UoKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHBhdXNlKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFN0YXJ0cyBwb2xsaW5nIGN5Y2xlLlxuICAgKlxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cbiAgcG9sbCgpIHtcbiAgICBkZWJ1ZyhcInBvbGxpbmdcIik7XG4gICAgdGhpcy5wb2xsaW5nID0gdHJ1ZTtcbiAgICB0aGlzLmRvUG9sbCgpO1xuICAgIHRoaXMuZW1pdChcInBvbGxcIik7XG4gIH1cblxuICAvKipcbiAgICogT3ZlcmxvYWRzIG9uRGF0YSB0byBkZXRlY3QgcGF5bG9hZHMuXG4gICAqXG4gICAqIEBhcGkgcHJpdmF0ZVxuICAgKi9cbiAgb25EYXRhKGRhdGEpIHtcbiAgICBkZWJ1ZyhcInBvbGxpbmcgZ290IGRhdGEgJXNcIiwgZGF0YSk7XG4gICAgY29uc3QgY2FsbGJhY2sgPSBwYWNrZXQgPT4ge1xuICAgICAgLy8gaWYgaXRzIHRoZSBmaXJzdCBtZXNzYWdlIHdlIGNvbnNpZGVyIHRoZSB0cmFuc3BvcnQgb3BlblxuICAgICAgaWYgKFwib3BlbmluZ1wiID09PSB0aGlzLnJlYWR5U3RhdGUgJiYgcGFja2V0LnR5cGUgPT09IFwib3BlblwiKSB7XG4gICAgICAgIHRoaXMub25PcGVuKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIGlmIGl0cyBhIGNsb3NlIHBhY2tldCwgd2UgY2xvc2UgdGhlIG9uZ29pbmcgcmVxdWVzdHNcbiAgICAgIGlmIChcImNsb3NlXCIgPT09IHBhY2tldC50eXBlKSB7XG4gICAgICAgIHRoaXMub25DbG9zZSgpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIC8vIG90aGVyd2lzZSBieXBhc3Mgb25EYXRhIGFuZCBoYW5kbGUgdGhlIG1lc3NhZ2VcbiAgICAgIHRoaXMub25QYWNrZXQocGFja2V0KTtcbiAgICB9O1xuXG4gICAgLy8gZGVjb2RlIHBheWxvYWRcbiAgICBwYXJzZXIuZGVjb2RlUGF5bG9hZChkYXRhLCB0aGlzLnNvY2tldC5iaW5hcnlUeXBlKS5mb3JFYWNoKGNhbGxiYWNrKTtcblxuICAgIC8vIGlmIGFuIGV2ZW50IGRpZCBub3QgdHJpZ2dlciBjbG9zaW5nXG4gICAgaWYgKFwiY2xvc2VkXCIgIT09IHRoaXMucmVhZHlTdGF0ZSkge1xuICAgICAgLy8gaWYgd2UgZ290IGRhdGEgd2UncmUgbm90IHBvbGxpbmdcbiAgICAgIHRoaXMucG9sbGluZyA9IGZhbHNlO1xuICAgICAgdGhpcy5lbWl0KFwicG9sbENvbXBsZXRlXCIpO1xuXG4gICAgICBpZiAoXCJvcGVuXCIgPT09IHRoaXMucmVhZHlTdGF0ZSkge1xuICAgICAgICB0aGlzLnBvbGwoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRlYnVnKCdpZ25vcmluZyBwb2xsIC0gdHJhbnNwb3J0IHN0YXRlIFwiJXNcIicsIHRoaXMucmVhZHlTdGF0ZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEZvciBwb2xsaW5nLCBzZW5kIGEgY2xvc2UgcGFja2V0LlxuICAgKlxuICAgKiBAYXBpIHByaXZhdGVcbiAgICovXG4gIGRvQ2xvc2UoKSB7XG4gICAgY29uc3QgY2xvc2UgPSAoKSA9PiB7XG4gICAgICBkZWJ1ZyhcIndyaXRpbmcgY2xvc2UgcGFja2V0XCIpO1xuICAgICAgdGhpcy53cml0ZShbeyB0eXBlOiBcImNsb3NlXCIgfV0pO1xuICAgIH07XG5cbiAgICBpZiAoXCJvcGVuXCIgPT09IHRoaXMucmVhZHlTdGF0ZSkge1xuICAgICAgZGVidWcoXCJ0cmFuc3BvcnQgb3BlbiAtIGNsb3NpbmdcIik7XG4gICAgICBjbG9zZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBpbiBjYXNlIHdlJ3JlIHRyeWluZyB0byBjbG9zZSB3aGlsZVxuICAgICAgLy8gaGFuZHNoYWtpbmcgaXMgaW4gcHJvZ3Jlc3MgKEdILTE2NClcbiAgICAgIGRlYnVnKFwidHJhbnNwb3J0IG5vdCBvcGVuIC0gZGVmZXJyaW5nIGNsb3NlXCIpO1xuICAgICAgdGhpcy5vbmNlKFwib3BlblwiLCBjbG9zZSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFdyaXRlcyBhIHBhY2tldHMgcGF5bG9hZC5cbiAgICpcbiAgICogQHBhcmFtIHtBcnJheX0gZGF0YSBwYWNrZXRzXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGRyYWluIGNhbGxiYWNrXG4gICAqIEBhcGkgcHJpdmF0ZVxuICAgKi9cbiAgd3JpdGUocGFja2V0cykge1xuICAgIHRoaXMud3JpdGFibGUgPSBmYWxzZTtcblxuICAgIHBhcnNlci5lbmNvZGVQYXlsb2FkKHBhY2tldHMsIGRhdGEgPT4ge1xuICAgICAgdGhpcy5kb1dyaXRlKGRhdGEsICgpID0+IHtcbiAgICAgICAgdGhpcy53cml0YWJsZSA9IHRydWU7XG4gICAgICAgIHRoaXMuZW1pdChcImRyYWluXCIpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGVzIHVyaSBmb3IgY29ubmVjdGlvbi5cbiAgICpcbiAgICogQGFwaSBwcml2YXRlXG4gICAqL1xuICB1cmkoKSB7XG4gICAgbGV0IHF1ZXJ5ID0gdGhpcy5xdWVyeSB8fCB7fTtcbiAgICBjb25zdCBzY2hlbWEgPSB0aGlzLm9wdHMuc2VjdXJlID8gXCJodHRwc1wiIDogXCJodHRwXCI7XG4gICAgbGV0IHBvcnQgPSBcIlwiO1xuXG4gICAgLy8gY2FjaGUgYnVzdGluZyBpcyBmb3JjZWRcbiAgICBpZiAoZmFsc2UgIT09IHRoaXMub3B0cy50aW1lc3RhbXBSZXF1ZXN0cykge1xuICAgICAgcXVlcnlbdGhpcy5vcHRzLnRpbWVzdGFtcFBhcmFtXSA9IHllYXN0KCk7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLnN1cHBvcnRzQmluYXJ5ICYmICFxdWVyeS5zaWQpIHtcbiAgICAgIHF1ZXJ5LmI2NCA9IDE7XG4gICAgfVxuXG4gICAgcXVlcnkgPSBwYXJzZXFzLmVuY29kZShxdWVyeSk7XG5cbiAgICAvLyBhdm9pZCBwb3J0IGlmIGRlZmF1bHQgZm9yIHNjaGVtYVxuICAgIGlmIChcbiAgICAgIHRoaXMub3B0cy5wb3J0ICYmXG4gICAgICAoKFwiaHR0cHNcIiA9PT0gc2NoZW1hICYmIE51bWJlcih0aGlzLm9wdHMucG9ydCkgIT09IDQ0MykgfHxcbiAgICAgICAgKFwiaHR0cFwiID09PSBzY2hlbWEgJiYgTnVtYmVyKHRoaXMub3B0cy5wb3J0KSAhPT0gODApKVxuICAgICkge1xuICAgICAgcG9ydCA9IFwiOlwiICsgdGhpcy5vcHRzLnBvcnQ7XG4gICAgfVxuXG4gICAgLy8gcHJlcGVuZCA/IHRvIHF1ZXJ5XG4gICAgaWYgKHF1ZXJ5Lmxlbmd0aCkge1xuICAgICAgcXVlcnkgPSBcIj9cIiArIHF1ZXJ5O1xuICAgIH1cblxuICAgIGNvbnN0IGlwdjYgPSB0aGlzLm9wdHMuaG9zdG5hbWUuaW5kZXhPZihcIjpcIikgIT09IC0xO1xuICAgIHJldHVybiAoXG4gICAgICBzY2hlbWEgK1xuICAgICAgXCI6Ly9cIiArXG4gICAgICAoaXB2NiA/IFwiW1wiICsgdGhpcy5vcHRzLmhvc3RuYW1lICsgXCJdXCIgOiB0aGlzLm9wdHMuaG9zdG5hbWUpICtcbiAgICAgIHBvcnQgK1xuICAgICAgdGhpcy5vcHRzLnBhdGggK1xuICAgICAgcXVlcnlcbiAgICApO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gUG9sbGluZztcbiIsImNvbnN0IGdsb2JhbFRoaXMgPSByZXF1aXJlKFwiLi4vZ2xvYmFsVGhpc1wiKTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIFdlYlNvY2tldDogZ2xvYmFsVGhpcy5XZWJTb2NrZXQgfHwgZ2xvYmFsVGhpcy5Nb3pXZWJTb2NrZXQsXG4gIHVzaW5nQnJvd3NlcldlYlNvY2tldDogdHJ1ZSxcbiAgZGVmYXVsdEJpbmFyeVR5cGU6IFwiYXJyYXlidWZmZXJcIlxufTtcbiIsImNvbnN0IFRyYW5zcG9ydCA9IHJlcXVpcmUoXCIuLi90cmFuc3BvcnRcIik7XG5jb25zdCBwYXJzZXIgPSByZXF1aXJlKFwiZW5naW5lLmlvLXBhcnNlclwiKTtcbmNvbnN0IHBhcnNlcXMgPSByZXF1aXJlKFwicGFyc2Vxc1wiKTtcbmNvbnN0IHllYXN0ID0gcmVxdWlyZShcInllYXN0XCIpO1xuY29uc3QgeyBwaWNrIH0gPSByZXF1aXJlKFwiLi4vdXRpbFwiKTtcbmNvbnN0IHtcbiAgV2ViU29ja2V0LFxuICB1c2luZ0Jyb3dzZXJXZWJTb2NrZXQsXG4gIGRlZmF1bHRCaW5hcnlUeXBlXG59ID0gcmVxdWlyZShcIi4vd2Vic29ja2V0LWNvbnN0cnVjdG9yXCIpO1xuXG5jb25zdCBkZWJ1ZyA9IHJlcXVpcmUoXCJkZWJ1Z1wiKShcImVuZ2luZS5pby1jbGllbnQ6d2Vic29ja2V0XCIpO1xuXG4vLyBkZXRlY3QgUmVhY3ROYXRpdmUgZW52aXJvbm1lbnRcbmNvbnN0IGlzUmVhY3ROYXRpdmUgPVxuICB0eXBlb2YgbmF2aWdhdG9yICE9PSBcInVuZGVmaW5lZFwiICYmXG4gIHR5cGVvZiBuYXZpZ2F0b3IucHJvZHVjdCA9PT0gXCJzdHJpbmdcIiAmJlxuICBuYXZpZ2F0b3IucHJvZHVjdC50b0xvd2VyQ2FzZSgpID09PSBcInJlYWN0bmF0aXZlXCI7XG5cbmNsYXNzIFdTIGV4dGVuZHMgVHJhbnNwb3J0IHtcbiAgLyoqXG4gICAqIFdlYlNvY2tldCB0cmFuc3BvcnQgY29uc3RydWN0b3IuXG4gICAqXG4gICAqIEBhcGkge09iamVjdH0gY29ubmVjdGlvbiBvcHRpb25zXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuICBjb25zdHJ1Y3RvcihvcHRzKSB7XG4gICAgc3VwZXIob3B0cyk7XG5cbiAgICB0aGlzLnN1cHBvcnRzQmluYXJ5ID0gIW9wdHMuZm9yY2VCYXNlNjQ7XG4gIH1cblxuICAvKipcbiAgICogVHJhbnNwb3J0IG5hbWUuXG4gICAqXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuICBnZXQgbmFtZSgpIHtcbiAgICByZXR1cm4gXCJ3ZWJzb2NrZXRcIjtcbiAgfVxuXG4gIC8qKlxuICAgKiBPcGVucyBzb2NrZXQuXG4gICAqXG4gICAqIEBhcGkgcHJpdmF0ZVxuICAgKi9cbiAgZG9PcGVuKCkge1xuICAgIGlmICghdGhpcy5jaGVjaygpKSB7XG4gICAgICAvLyBsZXQgcHJvYmUgdGltZW91dFxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHVyaSA9IHRoaXMudXJpKCk7XG4gICAgY29uc3QgcHJvdG9jb2xzID0gdGhpcy5vcHRzLnByb3RvY29scztcblxuICAgIC8vIFJlYWN0IE5hdGl2ZSBvbmx5IHN1cHBvcnRzIHRoZSAnaGVhZGVycycgb3B0aW9uLCBhbmQgd2lsbCBwcmludCBhIHdhcm5pbmcgaWYgYW55dGhpbmcgZWxzZSBpcyBwYXNzZWRcbiAgICBjb25zdCBvcHRzID0gaXNSZWFjdE5hdGl2ZVxuICAgICAgPyB7fVxuICAgICAgOiBwaWNrKFxuICAgICAgICAgIHRoaXMub3B0cyxcbiAgICAgICAgICBcImFnZW50XCIsXG4gICAgICAgICAgXCJwZXJNZXNzYWdlRGVmbGF0ZVwiLFxuICAgICAgICAgIFwicGZ4XCIsXG4gICAgICAgICAgXCJrZXlcIixcbiAgICAgICAgICBcInBhc3NwaHJhc2VcIixcbiAgICAgICAgICBcImNlcnRcIixcbiAgICAgICAgICBcImNhXCIsXG4gICAgICAgICAgXCJjaXBoZXJzXCIsXG4gICAgICAgICAgXCJyZWplY3RVbmF1dGhvcml6ZWRcIixcbiAgICAgICAgICBcImxvY2FsQWRkcmVzc1wiLFxuICAgICAgICAgIFwicHJvdG9jb2xWZXJzaW9uXCIsXG4gICAgICAgICAgXCJvcmlnaW5cIixcbiAgICAgICAgICBcIm1heFBheWxvYWRcIixcbiAgICAgICAgICBcImZhbWlseVwiLFxuICAgICAgICAgIFwiY2hlY2tTZXJ2ZXJJZGVudGl0eVwiXG4gICAgICAgICk7XG5cbiAgICBpZiAodGhpcy5vcHRzLmV4dHJhSGVhZGVycykge1xuICAgICAgb3B0cy5oZWFkZXJzID0gdGhpcy5vcHRzLmV4dHJhSGVhZGVycztcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgdGhpcy53cyA9XG4gICAgICAgIHVzaW5nQnJvd3NlcldlYlNvY2tldCAmJiAhaXNSZWFjdE5hdGl2ZVxuICAgICAgICAgID8gcHJvdG9jb2xzXG4gICAgICAgICAgICA/IG5ldyBXZWJTb2NrZXQodXJpLCBwcm90b2NvbHMpXG4gICAgICAgICAgICA6IG5ldyBXZWJTb2NrZXQodXJpKVxuICAgICAgICAgIDogbmV3IFdlYlNvY2tldCh1cmksIHByb3RvY29scywgb3B0cyk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICByZXR1cm4gdGhpcy5lbWl0KFwiZXJyb3JcIiwgZXJyKTtcbiAgICB9XG5cbiAgICB0aGlzLndzLmJpbmFyeVR5cGUgPSB0aGlzLnNvY2tldC5iaW5hcnlUeXBlIHx8IGRlZmF1bHRCaW5hcnlUeXBlO1xuXG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVycygpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgZXZlbnQgbGlzdGVuZXJzIHRvIHRoZSBzb2NrZXRcbiAgICpcbiAgICogQGFwaSBwcml2YXRlXG4gICAqL1xuICBhZGRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLndzLm9ub3BlbiA9ICgpID0+IHtcbiAgICAgIGlmICh0aGlzLm9wdHMuYXV0b1VucmVmKSB7XG4gICAgICAgIHRoaXMud3MuX3NvY2tldC51bnJlZigpO1xuICAgICAgfVxuICAgICAgdGhpcy5vbk9wZW4oKTtcbiAgICB9O1xuICAgIHRoaXMud3Mub25jbG9zZSA9IHRoaXMub25DbG9zZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMud3Mub25tZXNzYWdlID0gZXYgPT4gdGhpcy5vbkRhdGEoZXYuZGF0YSk7XG4gICAgdGhpcy53cy5vbmVycm9yID0gZSA9PiB0aGlzLm9uRXJyb3IoXCJ3ZWJzb2NrZXQgZXJyb3JcIiwgZSk7XG4gIH1cblxuICAvKipcbiAgICogV3JpdGVzIGRhdGEgdG8gc29ja2V0LlxuICAgKlxuICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBvZiBwYWNrZXRzLlxuICAgKiBAYXBpIHByaXZhdGVcbiAgICovXG4gIHdyaXRlKHBhY2tldHMpIHtcbiAgICB0aGlzLndyaXRhYmxlID0gZmFsc2U7XG5cbiAgICAvLyBlbmNvZGVQYWNrZXQgZWZmaWNpZW50IGFzIGl0IHVzZXMgV1MgZnJhbWluZ1xuICAgIC8vIG5vIG5lZWQgZm9yIGVuY29kZVBheWxvYWRcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhY2tldHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IHBhY2tldCA9IHBhY2tldHNbaV07XG4gICAgICBjb25zdCBsYXN0UGFja2V0ID0gaSA9PT0gcGFja2V0cy5sZW5ndGggLSAxO1xuXG4gICAgICBwYXJzZXIuZW5jb2RlUGFja2V0KHBhY2tldCwgdGhpcy5zdXBwb3J0c0JpbmFyeSwgZGF0YSA9PiB7XG4gICAgICAgIC8vIGFsd2F5cyBjcmVhdGUgYSBuZXcgb2JqZWN0IChHSC00MzcpXG4gICAgICAgIGNvbnN0IG9wdHMgPSB7fTtcbiAgICAgICAgaWYgKCF1c2luZ0Jyb3dzZXJXZWJTb2NrZXQpIHtcbiAgICAgICAgICBpZiAocGFja2V0Lm9wdGlvbnMpIHtcbiAgICAgICAgICAgIG9wdHMuY29tcHJlc3MgPSBwYWNrZXQub3B0aW9ucy5jb21wcmVzcztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAodGhpcy5vcHRzLnBlck1lc3NhZ2VEZWZsYXRlKSB7XG4gICAgICAgICAgICBjb25zdCBsZW4gPVxuICAgICAgICAgICAgICBcInN0cmluZ1wiID09PSB0eXBlb2YgZGF0YSA/IEJ1ZmZlci5ieXRlTGVuZ3RoKGRhdGEpIDogZGF0YS5sZW5ndGg7XG4gICAgICAgICAgICBpZiAobGVuIDwgdGhpcy5vcHRzLnBlck1lc3NhZ2VEZWZsYXRlLnRocmVzaG9sZCkge1xuICAgICAgICAgICAgICBvcHRzLmNvbXByZXNzID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gU29tZXRpbWVzIHRoZSB3ZWJzb2NrZXQgaGFzIGFscmVhZHkgYmVlbiBjbG9zZWQgYnV0IHRoZSBicm93c2VyIGRpZG4ndFxuICAgICAgICAvLyBoYXZlIGEgY2hhbmNlIG9mIGluZm9ybWluZyB1cyBhYm91dCBpdCB5ZXQsIGluIHRoYXQgY2FzZSBzZW5kIHdpbGxcbiAgICAgICAgLy8gdGhyb3cgYW4gZXJyb3JcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBpZiAodXNpbmdCcm93c2VyV2ViU29ja2V0KSB7XG4gICAgICAgICAgICAvLyBUeXBlRXJyb3IgaXMgdGhyb3duIHdoZW4gcGFzc2luZyB0aGUgc2Vjb25kIGFyZ3VtZW50IG9uIFNhZmFyaVxuICAgICAgICAgICAgdGhpcy53cy5zZW5kKGRhdGEpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLndzLnNlbmQoZGF0YSwgb3B0cyk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgZGVidWcoXCJ3ZWJzb2NrZXQgY2xvc2VkIGJlZm9yZSBvbmNsb3NlIGV2ZW50XCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGxhc3RQYWNrZXQpIHtcbiAgICAgICAgICAvLyBmYWtlIGRyYWluXG4gICAgICAgICAgLy8gZGVmZXIgdG8gbmV4dCB0aWNrIHRvIGFsbG93IFNvY2tldCB0byBjbGVhciB3cml0ZUJ1ZmZlclxuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy53cml0YWJsZSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmVtaXQoXCJkcmFpblwiKTtcbiAgICAgICAgICB9LCAwKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENhbGxlZCB1cG9uIGNsb3NlXG4gICAqXG4gICAqIEBhcGkgcHJpdmF0ZVxuICAgKi9cbiAgb25DbG9zZSgpIHtcbiAgICBUcmFuc3BvcnQucHJvdG90eXBlLm9uQ2xvc2UuY2FsbCh0aGlzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbG9zZXMgc29ja2V0LlxuICAgKlxuICAgKiBAYXBpIHByaXZhdGVcbiAgICovXG4gIGRvQ2xvc2UoKSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLndzICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICB0aGlzLndzLmNsb3NlKCk7XG4gICAgICB0aGlzLndzID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGVzIHVyaSBmb3IgY29ubmVjdGlvbi5cbiAgICpcbiAgICogQGFwaSBwcml2YXRlXG4gICAqL1xuICB1cmkoKSB7XG4gICAgbGV0IHF1ZXJ5ID0gdGhpcy5xdWVyeSB8fCB7fTtcbiAgICBjb25zdCBzY2hlbWEgPSB0aGlzLm9wdHMuc2VjdXJlID8gXCJ3c3NcIiA6IFwid3NcIjtcbiAgICBsZXQgcG9ydCA9IFwiXCI7XG5cbiAgICAvLyBhdm9pZCBwb3J0IGlmIGRlZmF1bHQgZm9yIHNjaGVtYVxuICAgIGlmIChcbiAgICAgIHRoaXMub3B0cy5wb3J0ICYmXG4gICAgICAoKFwid3NzXCIgPT09IHNjaGVtYSAmJiBOdW1iZXIodGhpcy5vcHRzLnBvcnQpICE9PSA0NDMpIHx8XG4gICAgICAgIChcIndzXCIgPT09IHNjaGVtYSAmJiBOdW1iZXIodGhpcy5vcHRzLnBvcnQpICE9PSA4MCkpXG4gICAgKSB7XG4gICAgICBwb3J0ID0gXCI6XCIgKyB0aGlzLm9wdHMucG9ydDtcbiAgICB9XG5cbiAgICAvLyBhcHBlbmQgdGltZXN0YW1wIHRvIFVSSVxuICAgIGlmICh0aGlzLm9wdHMudGltZXN0YW1wUmVxdWVzdHMpIHtcbiAgICAgIHF1ZXJ5W3RoaXMub3B0cy50aW1lc3RhbXBQYXJhbV0gPSB5ZWFzdCgpO1xuICAgIH1cblxuICAgIC8vIGNvbW11bmljYXRlIGJpbmFyeSBzdXBwb3J0IGNhcGFiaWxpdGllc1xuICAgIGlmICghdGhpcy5zdXBwb3J0c0JpbmFyeSkge1xuICAgICAgcXVlcnkuYjY0ID0gMTtcbiAgICB9XG5cbiAgICBxdWVyeSA9IHBhcnNlcXMuZW5jb2RlKHF1ZXJ5KTtcblxuICAgIC8vIHByZXBlbmQgPyB0byBxdWVyeVxuICAgIGlmIChxdWVyeS5sZW5ndGgpIHtcbiAgICAgIHF1ZXJ5ID0gXCI/XCIgKyBxdWVyeTtcbiAgICB9XG5cbiAgICBjb25zdCBpcHY2ID0gdGhpcy5vcHRzLmhvc3RuYW1lLmluZGV4T2YoXCI6XCIpICE9PSAtMTtcbiAgICByZXR1cm4gKFxuICAgICAgc2NoZW1hICtcbiAgICAgIFwiOi8vXCIgK1xuICAgICAgKGlwdjYgPyBcIltcIiArIHRoaXMub3B0cy5ob3N0bmFtZSArIFwiXVwiIDogdGhpcy5vcHRzLmhvc3RuYW1lKSArXG4gICAgICBwb3J0ICtcbiAgICAgIHRoaXMub3B0cy5wYXRoICtcbiAgICAgIHF1ZXJ5XG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGZWF0dXJlIGRldGVjdGlvbiBmb3IgV2ViU29ja2V0LlxuICAgKlxuICAgKiBAcmV0dXJuIHtCb29sZWFufSB3aGV0aGVyIHRoaXMgdHJhbnNwb3J0IGlzIGF2YWlsYWJsZS5cbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG4gIGNoZWNrKCkge1xuICAgIHJldHVybiAoXG4gICAgICAhIVdlYlNvY2tldCAmJlxuICAgICAgIShcIl9faW5pdGlhbGl6ZVwiIGluIFdlYlNvY2tldCAmJiB0aGlzLm5hbWUgPT09IFdTLnByb3RvdHlwZS5uYW1lKVxuICAgICk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBXUztcbiIsIm1vZHVsZS5leHBvcnRzLnBpY2sgPSAob2JqLCAuLi5hdHRyKSA9PiB7XG4gIHJldHVybiBhdHRyLnJlZHVjZSgoYWNjLCBrKSA9PiB7XG4gICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShrKSkge1xuICAgICAgYWNjW2tdID0gb2JqW2tdO1xuICAgIH1cbiAgICByZXR1cm4gYWNjO1xuICB9LCB7fSk7XG59O1xuIiwiLy8gYnJvd3NlciBzaGltIGZvciB4bWxodHRwcmVxdWVzdCBtb2R1bGVcblxuY29uc3QgaGFzQ09SUyA9IHJlcXVpcmUoXCJoYXMtY29yc1wiKTtcbmNvbnN0IGdsb2JhbFRoaXMgPSByZXF1aXJlKFwiLi9nbG9iYWxUaGlzXCIpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG9wdHMpIHtcbiAgY29uc3QgeGRvbWFpbiA9IG9wdHMueGRvbWFpbjtcblxuICAvLyBzY2hlbWUgbXVzdCBiZSBzYW1lIHdoZW4gdXNpZ24gWERvbWFpblJlcXVlc3RcbiAgLy8gaHR0cDovL2Jsb2dzLm1zZG4uY29tL2IvaWVpbnRlcm5hbHMvYXJjaGl2ZS8yMDEwLzA1LzEzL3hkb21haW5yZXF1ZXN0LXJlc3RyaWN0aW9ucy1saW1pdGF0aW9ucy1hbmQtd29ya2Fyb3VuZHMuYXNweFxuICBjb25zdCB4c2NoZW1lID0gb3B0cy54c2NoZW1lO1xuXG4gIC8vIFhEb21haW5SZXF1ZXN0IGhhcyBhIGZsb3cgb2Ygbm90IHNlbmRpbmcgY29va2llLCB0aGVyZWZvcmUgaXQgc2hvdWxkIGJlIGRpc2FibGVkIGFzIGEgZGVmYXVsdC5cbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL0F1dG9tYXR0aWMvZW5naW5lLmlvLWNsaWVudC9wdWxsLzIxN1xuICBjb25zdCBlbmFibGVzWERSID0gb3B0cy5lbmFibGVzWERSO1xuXG4gIC8vIFhNTEh0dHBSZXF1ZXN0IGNhbiBiZSBkaXNhYmxlZCBvbiBJRVxuICB0cnkge1xuICAgIGlmIChcInVuZGVmaW5lZFwiICE9PSB0eXBlb2YgWE1MSHR0cFJlcXVlc3QgJiYgKCF4ZG9tYWluIHx8IGhhc0NPUlMpKSB7XG4gICAgICByZXR1cm4gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgfVxuICB9IGNhdGNoIChlKSB7fVxuXG4gIC8vIFVzZSBYRG9tYWluUmVxdWVzdCBmb3IgSUU4IGlmIGVuYWJsZXNYRFIgaXMgdHJ1ZVxuICAvLyBiZWNhdXNlIGxvYWRpbmcgYmFyIGtlZXBzIGZsYXNoaW5nIHdoZW4gdXNpbmcganNvbnAtcG9sbGluZ1xuICAvLyBodHRwczovL2dpdGh1Yi5jb20veXVqaW9zYWthL3NvY2tlLmlvLWllOC1sb2FkaW5nLWV4YW1wbGVcbiAgdHJ5IHtcbiAgICBpZiAoXCJ1bmRlZmluZWRcIiAhPT0gdHlwZW9mIFhEb21haW5SZXF1ZXN0ICYmICF4c2NoZW1lICYmIGVuYWJsZXNYRFIpIHtcbiAgICAgIHJldHVybiBuZXcgWERvbWFpblJlcXVlc3QoKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHt9XG5cbiAgaWYgKCF4ZG9tYWluKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBuZXcgZ2xvYmFsVGhpc1tbXCJBY3RpdmVcIl0uY29uY2F0KFwiT2JqZWN0XCIpLmpvaW4oXCJYXCIpXShcbiAgICAgICAgXCJNaWNyb3NvZnQuWE1MSFRUUFwiXG4gICAgICApO1xuICAgIH0gY2F0Y2ggKGUpIHt9XG4gIH1cbn07XG4iLCIvKiBlc2xpbnQtZW52IGJyb3dzZXIgKi9cblxuLyoqXG4gKiBUaGlzIGlzIHRoZSB3ZWIgYnJvd3NlciBpbXBsZW1lbnRhdGlvbiBvZiBgZGVidWcoKWAuXG4gKi9cblxuZXhwb3J0cy5mb3JtYXRBcmdzID0gZm9ybWF0QXJncztcbmV4cG9ydHMuc2F2ZSA9IHNhdmU7XG5leHBvcnRzLmxvYWQgPSBsb2FkO1xuZXhwb3J0cy51c2VDb2xvcnMgPSB1c2VDb2xvcnM7XG5leHBvcnRzLnN0b3JhZ2UgPSBsb2NhbHN0b3JhZ2UoKTtcbmV4cG9ydHMuZGVzdHJveSA9ICgoKSA9PiB7XG5cdGxldCB3YXJuZWQgPSBmYWxzZTtcblxuXHRyZXR1cm4gKCkgPT4ge1xuXHRcdGlmICghd2FybmVkKSB7XG5cdFx0XHR3YXJuZWQgPSB0cnVlO1xuXHRcdFx0Y29uc29sZS53YXJuKCdJbnN0YW5jZSBtZXRob2QgYGRlYnVnLmRlc3Ryb3koKWAgaXMgZGVwcmVjYXRlZCBhbmQgbm8gbG9uZ2VyIGRvZXMgYW55dGhpbmcuIEl0IHdpbGwgYmUgcmVtb3ZlZCBpbiB0aGUgbmV4dCBtYWpvciB2ZXJzaW9uIG9mIGBkZWJ1Z2AuJyk7XG5cdFx0fVxuXHR9O1xufSkoKTtcblxuLyoqXG4gKiBDb2xvcnMuXG4gKi9cblxuZXhwb3J0cy5jb2xvcnMgPSBbXG5cdCcjMDAwMENDJyxcblx0JyMwMDAwRkYnLFxuXHQnIzAwMzNDQycsXG5cdCcjMDAzM0ZGJyxcblx0JyMwMDY2Q0MnLFxuXHQnIzAwNjZGRicsXG5cdCcjMDA5OUNDJyxcblx0JyMwMDk5RkYnLFxuXHQnIzAwQ0MwMCcsXG5cdCcjMDBDQzMzJyxcblx0JyMwMENDNjYnLFxuXHQnIzAwQ0M5OScsXG5cdCcjMDBDQ0NDJyxcblx0JyMwMENDRkYnLFxuXHQnIzMzMDBDQycsXG5cdCcjMzMwMEZGJyxcblx0JyMzMzMzQ0MnLFxuXHQnIzMzMzNGRicsXG5cdCcjMzM2NkNDJyxcblx0JyMzMzY2RkYnLFxuXHQnIzMzOTlDQycsXG5cdCcjMzM5OUZGJyxcblx0JyMzM0NDMDAnLFxuXHQnIzMzQ0MzMycsXG5cdCcjMzNDQzY2Jyxcblx0JyMzM0NDOTknLFxuXHQnIzMzQ0NDQycsXG5cdCcjMzNDQ0ZGJyxcblx0JyM2NjAwQ0MnLFxuXHQnIzY2MDBGRicsXG5cdCcjNjYzM0NDJyxcblx0JyM2NjMzRkYnLFxuXHQnIzY2Q0MwMCcsXG5cdCcjNjZDQzMzJyxcblx0JyM5OTAwQ0MnLFxuXHQnIzk5MDBGRicsXG5cdCcjOTkzM0NDJyxcblx0JyM5OTMzRkYnLFxuXHQnIzk5Q0MwMCcsXG5cdCcjOTlDQzMzJyxcblx0JyNDQzAwMDAnLFxuXHQnI0NDMDAzMycsXG5cdCcjQ0MwMDY2Jyxcblx0JyNDQzAwOTknLFxuXHQnI0NDMDBDQycsXG5cdCcjQ0MwMEZGJyxcblx0JyNDQzMzMDAnLFxuXHQnI0NDMzMzMycsXG5cdCcjQ0MzMzY2Jyxcblx0JyNDQzMzOTknLFxuXHQnI0NDMzNDQycsXG5cdCcjQ0MzM0ZGJyxcblx0JyNDQzY2MDAnLFxuXHQnI0NDNjYzMycsXG5cdCcjQ0M5OTAwJyxcblx0JyNDQzk5MzMnLFxuXHQnI0NDQ0MwMCcsXG5cdCcjQ0NDQzMzJyxcblx0JyNGRjAwMDAnLFxuXHQnI0ZGMDAzMycsXG5cdCcjRkYwMDY2Jyxcblx0JyNGRjAwOTknLFxuXHQnI0ZGMDBDQycsXG5cdCcjRkYwMEZGJyxcblx0JyNGRjMzMDAnLFxuXHQnI0ZGMzMzMycsXG5cdCcjRkYzMzY2Jyxcblx0JyNGRjMzOTknLFxuXHQnI0ZGMzNDQycsXG5cdCcjRkYzM0ZGJyxcblx0JyNGRjY2MDAnLFxuXHQnI0ZGNjYzMycsXG5cdCcjRkY5OTAwJyxcblx0JyNGRjk5MzMnLFxuXHQnI0ZGQ0MwMCcsXG5cdCcjRkZDQzMzJ1xuXTtcblxuLyoqXG4gKiBDdXJyZW50bHkgb25seSBXZWJLaXQtYmFzZWQgV2ViIEluc3BlY3RvcnMsIEZpcmVmb3ggPj0gdjMxLFxuICogYW5kIHRoZSBGaXJlYnVnIGV4dGVuc2lvbiAoYW55IEZpcmVmb3ggdmVyc2lvbikgYXJlIGtub3duXG4gKiB0byBzdXBwb3J0IFwiJWNcIiBDU1MgY3VzdG9taXphdGlvbnMuXG4gKlxuICogVE9ETzogYWRkIGEgYGxvY2FsU3RvcmFnZWAgdmFyaWFibGUgdG8gZXhwbGljaXRseSBlbmFibGUvZGlzYWJsZSBjb2xvcnNcbiAqL1xuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29tcGxleGl0eVxuZnVuY3Rpb24gdXNlQ29sb3JzKCkge1xuXHQvLyBOQjogSW4gYW4gRWxlY3Ryb24gcHJlbG9hZCBzY3JpcHQsIGRvY3VtZW50IHdpbGwgYmUgZGVmaW5lZCBidXQgbm90IGZ1bGx5XG5cdC8vIGluaXRpYWxpemVkLiBTaW5jZSB3ZSBrbm93IHdlJ3JlIGluIENocm9tZSwgd2UnbGwganVzdCBkZXRlY3QgdGhpcyBjYXNlXG5cdC8vIGV4cGxpY2l0bHlcblx0aWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5wcm9jZXNzICYmICh3aW5kb3cucHJvY2Vzcy50eXBlID09PSAncmVuZGVyZXInIHx8IHdpbmRvdy5wcm9jZXNzLl9fbndqcykpIHtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXG5cdC8vIEludGVybmV0IEV4cGxvcmVyIGFuZCBFZGdlIGRvIG5vdCBzdXBwb3J0IGNvbG9ycy5cblx0aWYgKHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmIG5hdmlnYXRvci51c2VyQWdlbnQgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLm1hdGNoKC8oZWRnZXx0cmlkZW50KVxcLyhcXGQrKS8pKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0Ly8gSXMgd2Via2l0PyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xNjQ1OTYwNi8zNzY3NzNcblx0Ly8gZG9jdW1lbnQgaXMgdW5kZWZpbmVkIGluIHJlYWN0LW5hdGl2ZTogaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlYWN0LW5hdGl2ZS9wdWxsLzE2MzJcblx0cmV0dXJuICh0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnICYmIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLldlYmtpdEFwcGVhcmFuY2UpIHx8XG5cdFx0Ly8gSXMgZmlyZWJ1Zz8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMzk4MTIwLzM3Njc3M1xuXHRcdCh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuY29uc29sZSAmJiAod2luZG93LmNvbnNvbGUuZmlyZWJ1ZyB8fCAod2luZG93LmNvbnNvbGUuZXhjZXB0aW9uICYmIHdpbmRvdy5jb25zb2xlLnRhYmxlKSkpIHx8XG5cdFx0Ly8gSXMgZmlyZWZveCA+PSB2MzE/XG5cdFx0Ly8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9Ub29scy9XZWJfQ29uc29sZSNTdHlsaW5nX21lc3NhZ2VzXG5cdFx0KHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmIG5hdmlnYXRvci51c2VyQWdlbnQgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLm1hdGNoKC9maXJlZm94XFwvKFxcZCspLykgJiYgcGFyc2VJbnQoUmVnRXhwLiQxLCAxMCkgPj0gMzEpIHx8XG5cdFx0Ly8gRG91YmxlIGNoZWNrIHdlYmtpdCBpbiB1c2VyQWdlbnQganVzdCBpbiBjYXNlIHdlIGFyZSBpbiBhIHdvcmtlclxuXHRcdCh0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJiBuYXZpZ2F0b3IudXNlckFnZW50ICYmIG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5tYXRjaCgvYXBwbGV3ZWJraXRcXC8oXFxkKykvKSk7XG59XG5cbi8qKlxuICogQ29sb3JpemUgbG9nIGFyZ3VtZW50cyBpZiBlbmFibGVkLlxuICpcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZnVuY3Rpb24gZm9ybWF0QXJncyhhcmdzKSB7XG5cdGFyZ3NbMF0gPSAodGhpcy51c2VDb2xvcnMgPyAnJWMnIDogJycpICtcblx0XHR0aGlzLm5hbWVzcGFjZSArXG5cdFx0KHRoaXMudXNlQ29sb3JzID8gJyAlYycgOiAnICcpICtcblx0XHRhcmdzWzBdICtcblx0XHQodGhpcy51c2VDb2xvcnMgPyAnJWMgJyA6ICcgJykgK1xuXHRcdCcrJyArIG1vZHVsZS5leHBvcnRzLmh1bWFuaXplKHRoaXMuZGlmZik7XG5cblx0aWYgKCF0aGlzLnVzZUNvbG9ycykge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdGNvbnN0IGMgPSAnY29sb3I6ICcgKyB0aGlzLmNvbG9yO1xuXHRhcmdzLnNwbGljZSgxLCAwLCBjLCAnY29sb3I6IGluaGVyaXQnKTtcblxuXHQvLyBUaGUgZmluYWwgXCIlY1wiIGlzIHNvbWV3aGF0IHRyaWNreSwgYmVjYXVzZSB0aGVyZSBjb3VsZCBiZSBvdGhlclxuXHQvLyBhcmd1bWVudHMgcGFzc2VkIGVpdGhlciBiZWZvcmUgb3IgYWZ0ZXIgdGhlICVjLCBzbyB3ZSBuZWVkIHRvXG5cdC8vIGZpZ3VyZSBvdXQgdGhlIGNvcnJlY3QgaW5kZXggdG8gaW5zZXJ0IHRoZSBDU1MgaW50b1xuXHRsZXQgaW5kZXggPSAwO1xuXHRsZXQgbGFzdEMgPSAwO1xuXHRhcmdzWzBdLnJlcGxhY2UoLyVbYS16QS1aJV0vZywgbWF0Y2ggPT4ge1xuXHRcdGlmIChtYXRjaCA9PT0gJyUlJykge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRpbmRleCsrO1xuXHRcdGlmIChtYXRjaCA9PT0gJyVjJykge1xuXHRcdFx0Ly8gV2Ugb25seSBhcmUgaW50ZXJlc3RlZCBpbiB0aGUgKmxhc3QqICVjXG5cdFx0XHQvLyAodGhlIHVzZXIgbWF5IGhhdmUgcHJvdmlkZWQgdGhlaXIgb3duKVxuXHRcdFx0bGFzdEMgPSBpbmRleDtcblx0XHR9XG5cdH0pO1xuXG5cdGFyZ3Muc3BsaWNlKGxhc3RDLCAwLCBjKTtcbn1cblxuLyoqXG4gKiBJbnZva2VzIGBjb25zb2xlLmRlYnVnKClgIHdoZW4gYXZhaWxhYmxlLlxuICogTm8tb3Agd2hlbiBgY29uc29sZS5kZWJ1Z2AgaXMgbm90IGEgXCJmdW5jdGlvblwiLlxuICogSWYgYGNvbnNvbGUuZGVidWdgIGlzIG5vdCBhdmFpbGFibGUsIGZhbGxzIGJhY2tcbiAqIHRvIGBjb25zb2xlLmxvZ2AuXG4gKlxuICogQGFwaSBwdWJsaWNcbiAqL1xuZXhwb3J0cy5sb2cgPSBjb25zb2xlLmRlYnVnIHx8IGNvbnNvbGUubG9nIHx8ICgoKSA9PiB7fSk7XG5cbi8qKlxuICogU2F2ZSBgbmFtZXNwYWNlc2AuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWVzcGFjZXNcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBzYXZlKG5hbWVzcGFjZXMpIHtcblx0dHJ5IHtcblx0XHRpZiAobmFtZXNwYWNlcykge1xuXHRcdFx0ZXhwb3J0cy5zdG9yYWdlLnNldEl0ZW0oJ2RlYnVnJywgbmFtZXNwYWNlcyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGV4cG9ydHMuc3RvcmFnZS5yZW1vdmVJdGVtKCdkZWJ1ZycpO1xuXHRcdH1cblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHQvLyBTd2FsbG93XG5cdFx0Ly8gWFhYIChAUWl4LSkgc2hvdWxkIHdlIGJlIGxvZ2dpbmcgdGhlc2U/XG5cdH1cbn1cblxuLyoqXG4gKiBMb2FkIGBuYW1lc3BhY2VzYC5cbiAqXG4gKiBAcmV0dXJuIHtTdHJpbmd9IHJldHVybnMgdGhlIHByZXZpb3VzbHkgcGVyc2lzdGVkIGRlYnVnIG1vZGVzXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gbG9hZCgpIHtcblx0bGV0IHI7XG5cdHRyeSB7XG5cdFx0ciA9IGV4cG9ydHMuc3RvcmFnZS5nZXRJdGVtKCdkZWJ1ZycpO1xuXHR9IGNhdGNoIChlcnJvcikge1xuXHRcdC8vIFN3YWxsb3dcblx0XHQvLyBYWFggKEBRaXgtKSBzaG91bGQgd2UgYmUgbG9nZ2luZyB0aGVzZT9cblx0fVxuXG5cdC8vIElmIGRlYnVnIGlzbid0IHNldCBpbiBMUywgYW5kIHdlJ3JlIGluIEVsZWN0cm9uLCB0cnkgdG8gbG9hZCAkREVCVUdcblx0aWYgKCFyICYmIHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJiAnZW52JyBpbiBwcm9jZXNzKSB7XG5cdFx0ciA9IHByb2Nlc3MuZW52LkRFQlVHO1xuXHR9XG5cblx0cmV0dXJuIHI7XG59XG5cbi8qKlxuICogTG9jYWxzdG9yYWdlIGF0dGVtcHRzIHRvIHJldHVybiB0aGUgbG9jYWxzdG9yYWdlLlxuICpcbiAqIFRoaXMgaXMgbmVjZXNzYXJ5IGJlY2F1c2Ugc2FmYXJpIHRocm93c1xuICogd2hlbiBhIHVzZXIgZGlzYWJsZXMgY29va2llcy9sb2NhbHN0b3JhZ2VcbiAqIGFuZCB5b3UgYXR0ZW1wdCB0byBhY2Nlc3MgaXQuXG4gKlxuICogQHJldHVybiB7TG9jYWxTdG9yYWdlfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gbG9jYWxzdG9yYWdlKCkge1xuXHR0cnkge1xuXHRcdC8vIFRWTUxLaXQgKEFwcGxlIFRWIEpTIFJ1bnRpbWUpIGRvZXMgbm90IGhhdmUgYSB3aW5kb3cgb2JqZWN0LCBqdXN0IGxvY2FsU3RvcmFnZSBpbiB0aGUgZ2xvYmFsIGNvbnRleHRcblx0XHQvLyBUaGUgQnJvd3NlciBhbHNvIGhhcyBsb2NhbFN0b3JhZ2UgaW4gdGhlIGdsb2JhbCBjb250ZXh0LlxuXHRcdHJldHVybiBsb2NhbFN0b3JhZ2U7XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0Ly8gU3dhbGxvd1xuXHRcdC8vIFhYWCAoQFFpeC0pIHNob3VsZCB3ZSBiZSBsb2dnaW5nIHRoZXNlP1xuXHR9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9jb21tb24nKShleHBvcnRzKTtcblxuY29uc3Qge2Zvcm1hdHRlcnN9ID0gbW9kdWxlLmV4cG9ydHM7XG5cbi8qKlxuICogTWFwICVqIHRvIGBKU09OLnN0cmluZ2lmeSgpYCwgc2luY2Ugbm8gV2ViIEluc3BlY3RvcnMgZG8gdGhhdCBieSBkZWZhdWx0LlxuICovXG5cbmZvcm1hdHRlcnMuaiA9IGZ1bmN0aW9uICh2KSB7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIEpTT04uc3RyaW5naWZ5KHYpO1xuXHR9IGNhdGNoIChlcnJvcikge1xuXHRcdHJldHVybiAnW1VuZXhwZWN0ZWRKU09OUGFyc2VFcnJvcl06ICcgKyBlcnJvci5tZXNzYWdlO1xuXHR9XG59O1xuIiwiXG4vKipcbiAqIFRoaXMgaXMgdGhlIGNvbW1vbiBsb2dpYyBmb3IgYm90aCB0aGUgTm9kZS5qcyBhbmQgd2ViIGJyb3dzZXJcbiAqIGltcGxlbWVudGF0aW9ucyBvZiBgZGVidWcoKWAuXG4gKi9cblxuZnVuY3Rpb24gc2V0dXAoZW52KSB7XG5cdGNyZWF0ZURlYnVnLmRlYnVnID0gY3JlYXRlRGVidWc7XG5cdGNyZWF0ZURlYnVnLmRlZmF1bHQgPSBjcmVhdGVEZWJ1Zztcblx0Y3JlYXRlRGVidWcuY29lcmNlID0gY29lcmNlO1xuXHRjcmVhdGVEZWJ1Zy5kaXNhYmxlID0gZGlzYWJsZTtcblx0Y3JlYXRlRGVidWcuZW5hYmxlID0gZW5hYmxlO1xuXHRjcmVhdGVEZWJ1Zy5lbmFibGVkID0gZW5hYmxlZDtcblx0Y3JlYXRlRGVidWcuaHVtYW5pemUgPSByZXF1aXJlKCdtcycpO1xuXHRjcmVhdGVEZWJ1Zy5kZXN0cm95ID0gZGVzdHJveTtcblxuXHRPYmplY3Qua2V5cyhlbnYpLmZvckVhY2goa2V5ID0+IHtcblx0XHRjcmVhdGVEZWJ1Z1trZXldID0gZW52W2tleV07XG5cdH0pO1xuXG5cdC8qKlxuXHQqIFRoZSBjdXJyZW50bHkgYWN0aXZlIGRlYnVnIG1vZGUgbmFtZXMsIGFuZCBuYW1lcyB0byBza2lwLlxuXHQqL1xuXG5cdGNyZWF0ZURlYnVnLm5hbWVzID0gW107XG5cdGNyZWF0ZURlYnVnLnNraXBzID0gW107XG5cblx0LyoqXG5cdCogTWFwIG9mIHNwZWNpYWwgXCIlblwiIGhhbmRsaW5nIGZ1bmN0aW9ucywgZm9yIHRoZSBkZWJ1ZyBcImZvcm1hdFwiIGFyZ3VtZW50LlxuXHQqXG5cdCogVmFsaWQga2V5IG5hbWVzIGFyZSBhIHNpbmdsZSwgbG93ZXIgb3IgdXBwZXItY2FzZSBsZXR0ZXIsIGkuZS4gXCJuXCIgYW5kIFwiTlwiLlxuXHQqL1xuXHRjcmVhdGVEZWJ1Zy5mb3JtYXR0ZXJzID0ge307XG5cblx0LyoqXG5cdCogU2VsZWN0cyBhIGNvbG9yIGZvciBhIGRlYnVnIG5hbWVzcGFjZVxuXHQqIEBwYXJhbSB7U3RyaW5nfSBuYW1lc3BhY2UgVGhlIG5hbWVzcGFjZSBzdHJpbmcgZm9yIHRoZSBmb3IgdGhlIGRlYnVnIGluc3RhbmNlIHRvIGJlIGNvbG9yZWRcblx0KiBAcmV0dXJuIHtOdW1iZXJ8U3RyaW5nfSBBbiBBTlNJIGNvbG9yIGNvZGUgZm9yIHRoZSBnaXZlbiBuYW1lc3BhY2Vcblx0KiBAYXBpIHByaXZhdGVcblx0Ki9cblx0ZnVuY3Rpb24gc2VsZWN0Q29sb3IobmFtZXNwYWNlKSB7XG5cdFx0bGV0IGhhc2ggPSAwO1xuXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBuYW1lc3BhY2UubGVuZ3RoOyBpKyspIHtcblx0XHRcdGhhc2ggPSAoKGhhc2ggPDwgNSkgLSBoYXNoKSArIG5hbWVzcGFjZS5jaGFyQ29kZUF0KGkpO1xuXHRcdFx0aGFzaCB8PSAwOyAvLyBDb252ZXJ0IHRvIDMyYml0IGludGVnZXJcblx0XHR9XG5cblx0XHRyZXR1cm4gY3JlYXRlRGVidWcuY29sb3JzW01hdGguYWJzKGhhc2gpICUgY3JlYXRlRGVidWcuY29sb3JzLmxlbmd0aF07XG5cdH1cblx0Y3JlYXRlRGVidWcuc2VsZWN0Q29sb3IgPSBzZWxlY3RDb2xvcjtcblxuXHQvKipcblx0KiBDcmVhdGUgYSBkZWJ1Z2dlciB3aXRoIHRoZSBnaXZlbiBgbmFtZXNwYWNlYC5cblx0KlxuXHQqIEBwYXJhbSB7U3RyaW5nfSBuYW1lc3BhY2Vcblx0KiBAcmV0dXJuIHtGdW5jdGlvbn1cblx0KiBAYXBpIHB1YmxpY1xuXHQqL1xuXHRmdW5jdGlvbiBjcmVhdGVEZWJ1ZyhuYW1lc3BhY2UpIHtcblx0XHRsZXQgcHJldlRpbWU7XG5cdFx0bGV0IGVuYWJsZU92ZXJyaWRlID0gbnVsbDtcblxuXHRcdGZ1bmN0aW9uIGRlYnVnKC4uLmFyZ3MpIHtcblx0XHRcdC8vIERpc2FibGVkP1xuXHRcdFx0aWYgKCFkZWJ1Zy5lbmFibGVkKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Y29uc3Qgc2VsZiA9IGRlYnVnO1xuXG5cdFx0XHQvLyBTZXQgYGRpZmZgIHRpbWVzdGFtcFxuXHRcdFx0Y29uc3QgY3VyciA9IE51bWJlcihuZXcgRGF0ZSgpKTtcblx0XHRcdGNvbnN0IG1zID0gY3VyciAtIChwcmV2VGltZSB8fCBjdXJyKTtcblx0XHRcdHNlbGYuZGlmZiA9IG1zO1xuXHRcdFx0c2VsZi5wcmV2ID0gcHJldlRpbWU7XG5cdFx0XHRzZWxmLmN1cnIgPSBjdXJyO1xuXHRcdFx0cHJldlRpbWUgPSBjdXJyO1xuXG5cdFx0XHRhcmdzWzBdID0gY3JlYXRlRGVidWcuY29lcmNlKGFyZ3NbMF0pO1xuXG5cdFx0XHRpZiAodHlwZW9mIGFyZ3NbMF0gIT09ICdzdHJpbmcnKSB7XG5cdFx0XHRcdC8vIEFueXRoaW5nIGVsc2UgbGV0J3MgaW5zcGVjdCB3aXRoICVPXG5cdFx0XHRcdGFyZ3MudW5zaGlmdCgnJU8nKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQXBwbHkgYW55IGBmb3JtYXR0ZXJzYCB0cmFuc2Zvcm1hdGlvbnNcblx0XHRcdGxldCBpbmRleCA9IDA7XG5cdFx0XHRhcmdzWzBdID0gYXJnc1swXS5yZXBsYWNlKC8lKFthLXpBLVolXSkvZywgKG1hdGNoLCBmb3JtYXQpID0+IHtcblx0XHRcdFx0Ly8gSWYgd2UgZW5jb3VudGVyIGFuIGVzY2FwZWQgJSB0aGVuIGRvbid0IGluY3JlYXNlIHRoZSBhcnJheSBpbmRleFxuXHRcdFx0XHRpZiAobWF0Y2ggPT09ICclJScpIHtcblx0XHRcdFx0XHRyZXR1cm4gJyUnO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGluZGV4Kys7XG5cdFx0XHRcdGNvbnN0IGZvcm1hdHRlciA9IGNyZWF0ZURlYnVnLmZvcm1hdHRlcnNbZm9ybWF0XTtcblx0XHRcdFx0aWYgKHR5cGVvZiBmb3JtYXR0ZXIgPT09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0XHRjb25zdCB2YWwgPSBhcmdzW2luZGV4XTtcblx0XHRcdFx0XHRtYXRjaCA9IGZvcm1hdHRlci5jYWxsKHNlbGYsIHZhbCk7XG5cblx0XHRcdFx0XHQvLyBOb3cgd2UgbmVlZCB0byByZW1vdmUgYGFyZ3NbaW5kZXhdYCBzaW5jZSBpdCdzIGlubGluZWQgaW4gdGhlIGBmb3JtYXRgXG5cdFx0XHRcdFx0YXJncy5zcGxpY2UoaW5kZXgsIDEpO1xuXHRcdFx0XHRcdGluZGV4LS07XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIG1hdGNoO1xuXHRcdFx0fSk7XG5cblx0XHRcdC8vIEFwcGx5IGVudi1zcGVjaWZpYyBmb3JtYXR0aW5nIChjb2xvcnMsIGV0Yy4pXG5cdFx0XHRjcmVhdGVEZWJ1Zy5mb3JtYXRBcmdzLmNhbGwoc2VsZiwgYXJncyk7XG5cblx0XHRcdGNvbnN0IGxvZ0ZuID0gc2VsZi5sb2cgfHwgY3JlYXRlRGVidWcubG9nO1xuXHRcdFx0bG9nRm4uYXBwbHkoc2VsZiwgYXJncyk7XG5cdFx0fVxuXG5cdFx0ZGVidWcubmFtZXNwYWNlID0gbmFtZXNwYWNlO1xuXHRcdGRlYnVnLnVzZUNvbG9ycyA9IGNyZWF0ZURlYnVnLnVzZUNvbG9ycygpO1xuXHRcdGRlYnVnLmNvbG9yID0gY3JlYXRlRGVidWcuc2VsZWN0Q29sb3IobmFtZXNwYWNlKTtcblx0XHRkZWJ1Zy5leHRlbmQgPSBleHRlbmQ7XG5cdFx0ZGVidWcuZGVzdHJveSA9IGNyZWF0ZURlYnVnLmRlc3Ryb3k7IC8vIFhYWCBUZW1wb3JhcnkuIFdpbGwgYmUgcmVtb3ZlZCBpbiB0aGUgbmV4dCBtYWpvciByZWxlYXNlLlxuXG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGRlYnVnLCAnZW5hYmxlZCcsIHtcblx0XHRcdGVudW1lcmFibGU6IHRydWUsXG5cdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuXHRcdFx0Z2V0OiAoKSA9PiBlbmFibGVPdmVycmlkZSA9PT0gbnVsbCA/IGNyZWF0ZURlYnVnLmVuYWJsZWQobmFtZXNwYWNlKSA6IGVuYWJsZU92ZXJyaWRlLFxuXHRcdFx0c2V0OiB2ID0+IHtcblx0XHRcdFx0ZW5hYmxlT3ZlcnJpZGUgPSB2O1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0Ly8gRW52LXNwZWNpZmljIGluaXRpYWxpemF0aW9uIGxvZ2ljIGZvciBkZWJ1ZyBpbnN0YW5jZXNcblx0XHRpZiAodHlwZW9mIGNyZWF0ZURlYnVnLmluaXQgPT09ICdmdW5jdGlvbicpIHtcblx0XHRcdGNyZWF0ZURlYnVnLmluaXQoZGVidWcpO1xuXHRcdH1cblxuXHRcdHJldHVybiBkZWJ1Zztcblx0fVxuXG5cdGZ1bmN0aW9uIGV4dGVuZChuYW1lc3BhY2UsIGRlbGltaXRlcikge1xuXHRcdGNvbnN0IG5ld0RlYnVnID0gY3JlYXRlRGVidWcodGhpcy5uYW1lc3BhY2UgKyAodHlwZW9mIGRlbGltaXRlciA9PT0gJ3VuZGVmaW5lZCcgPyAnOicgOiBkZWxpbWl0ZXIpICsgbmFtZXNwYWNlKTtcblx0XHRuZXdEZWJ1Zy5sb2cgPSB0aGlzLmxvZztcblx0XHRyZXR1cm4gbmV3RGVidWc7XG5cdH1cblxuXHQvKipcblx0KiBFbmFibGVzIGEgZGVidWcgbW9kZSBieSBuYW1lc3BhY2VzLiBUaGlzIGNhbiBpbmNsdWRlIG1vZGVzXG5cdCogc2VwYXJhdGVkIGJ5IGEgY29sb24gYW5kIHdpbGRjYXJkcy5cblx0KlxuXHQqIEBwYXJhbSB7U3RyaW5nfSBuYW1lc3BhY2VzXG5cdCogQGFwaSBwdWJsaWNcblx0Ki9cblx0ZnVuY3Rpb24gZW5hYmxlKG5hbWVzcGFjZXMpIHtcblx0XHRjcmVhdGVEZWJ1Zy5zYXZlKG5hbWVzcGFjZXMpO1xuXG5cdFx0Y3JlYXRlRGVidWcubmFtZXMgPSBbXTtcblx0XHRjcmVhdGVEZWJ1Zy5za2lwcyA9IFtdO1xuXG5cdFx0bGV0IGk7XG5cdFx0Y29uc3Qgc3BsaXQgPSAodHlwZW9mIG5hbWVzcGFjZXMgPT09ICdzdHJpbmcnID8gbmFtZXNwYWNlcyA6ICcnKS5zcGxpdCgvW1xccyxdKy8pO1xuXHRcdGNvbnN0IGxlbiA9IHNwbGl0Lmxlbmd0aDtcblxuXHRcdGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuXHRcdFx0aWYgKCFzcGxpdFtpXSkge1xuXHRcdFx0XHQvLyBpZ25vcmUgZW1wdHkgc3RyaW5nc1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblxuXHRcdFx0bmFtZXNwYWNlcyA9IHNwbGl0W2ldLnJlcGxhY2UoL1xcKi9nLCAnLio/Jyk7XG5cblx0XHRcdGlmIChuYW1lc3BhY2VzWzBdID09PSAnLScpIHtcblx0XHRcdFx0Y3JlYXRlRGVidWcuc2tpcHMucHVzaChuZXcgUmVnRXhwKCdeJyArIG5hbWVzcGFjZXMuc3Vic3RyKDEpICsgJyQnKSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjcmVhdGVEZWJ1Zy5uYW1lcy5wdXNoKG5ldyBSZWdFeHAoJ14nICsgbmFtZXNwYWNlcyArICckJykpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQqIERpc2FibGUgZGVidWcgb3V0cHV0LlxuXHQqXG5cdCogQHJldHVybiB7U3RyaW5nfSBuYW1lc3BhY2VzXG5cdCogQGFwaSBwdWJsaWNcblx0Ki9cblx0ZnVuY3Rpb24gZGlzYWJsZSgpIHtcblx0XHRjb25zdCBuYW1lc3BhY2VzID0gW1xuXHRcdFx0Li4uY3JlYXRlRGVidWcubmFtZXMubWFwKHRvTmFtZXNwYWNlKSxcblx0XHRcdC4uLmNyZWF0ZURlYnVnLnNraXBzLm1hcCh0b05hbWVzcGFjZSkubWFwKG5hbWVzcGFjZSA9PiAnLScgKyBuYW1lc3BhY2UpXG5cdFx0XS5qb2luKCcsJyk7XG5cdFx0Y3JlYXRlRGVidWcuZW5hYmxlKCcnKTtcblx0XHRyZXR1cm4gbmFtZXNwYWNlcztcblx0fVxuXG5cdC8qKlxuXHQqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gbW9kZSBuYW1lIGlzIGVuYWJsZWQsIGZhbHNlIG90aGVyd2lzZS5cblx0KlxuXHQqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG5cdCogQHJldHVybiB7Qm9vbGVhbn1cblx0KiBAYXBpIHB1YmxpY1xuXHQqL1xuXHRmdW5jdGlvbiBlbmFibGVkKG5hbWUpIHtcblx0XHRpZiAobmFtZVtuYW1lLmxlbmd0aCAtIDFdID09PSAnKicpIHtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblxuXHRcdGxldCBpO1xuXHRcdGxldCBsZW47XG5cblx0XHRmb3IgKGkgPSAwLCBsZW4gPSBjcmVhdGVEZWJ1Zy5za2lwcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuXHRcdFx0aWYgKGNyZWF0ZURlYnVnLnNraXBzW2ldLnRlc3QobmFtZSkpIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGZvciAoaSA9IDAsIGxlbiA9IGNyZWF0ZURlYnVnLm5hbWVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG5cdFx0XHRpZiAoY3JlYXRlRGVidWcubmFtZXNbaV0udGVzdChuYW1lKSkge1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHQvKipcblx0KiBDb252ZXJ0IHJlZ2V4cCB0byBuYW1lc3BhY2Vcblx0KlxuXHQqIEBwYXJhbSB7UmVnRXhwfSByZWd4ZXBcblx0KiBAcmV0dXJuIHtTdHJpbmd9IG5hbWVzcGFjZVxuXHQqIEBhcGkgcHJpdmF0ZVxuXHQqL1xuXHRmdW5jdGlvbiB0b05hbWVzcGFjZShyZWdleHApIHtcblx0XHRyZXR1cm4gcmVnZXhwLnRvU3RyaW5nKClcblx0XHRcdC5zdWJzdHJpbmcoMiwgcmVnZXhwLnRvU3RyaW5nKCkubGVuZ3RoIC0gMilcblx0XHRcdC5yZXBsYWNlKC9cXC5cXCpcXD8kLywgJyonKTtcblx0fVxuXG5cdC8qKlxuXHQqIENvZXJjZSBgdmFsYC5cblx0KlxuXHQqIEBwYXJhbSB7TWl4ZWR9IHZhbFxuXHQqIEByZXR1cm4ge01peGVkfVxuXHQqIEBhcGkgcHJpdmF0ZVxuXHQqL1xuXHRmdW5jdGlvbiBjb2VyY2UodmFsKSB7XG5cdFx0aWYgKHZhbCBpbnN0YW5jZW9mIEVycm9yKSB7XG5cdFx0XHRyZXR1cm4gdmFsLnN0YWNrIHx8IHZhbC5tZXNzYWdlO1xuXHRcdH1cblx0XHRyZXR1cm4gdmFsO1xuXHR9XG5cblx0LyoqXG5cdCogWFhYIERPIE5PVCBVU0UuIFRoaXMgaXMgYSB0ZW1wb3Jhcnkgc3R1YiBmdW5jdGlvbi5cblx0KiBYWFggSXQgV0lMTCBiZSByZW1vdmVkIGluIHRoZSBuZXh0IG1ham9yIHJlbGVhc2UuXG5cdCovXG5cdGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG5cdFx0Y29uc29sZS53YXJuKCdJbnN0YW5jZSBtZXRob2QgYGRlYnVnLmRlc3Ryb3koKWAgaXMgZGVwcmVjYXRlZCBhbmQgbm8gbG9uZ2VyIGRvZXMgYW55dGhpbmcuIEl0IHdpbGwgYmUgcmVtb3ZlZCBpbiB0aGUgbmV4dCBtYWpvciB2ZXJzaW9uIG9mIGBkZWJ1Z2AuJyk7XG5cdH1cblxuXHRjcmVhdGVEZWJ1Zy5lbmFibGUoY3JlYXRlRGVidWcubG9hZCgpKTtcblxuXHRyZXR1cm4gY3JlYXRlRGVidWc7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gc2V0dXA7XG4iLCIvKipcbiAqIEhlbHBlcnMuXG4gKi9cblxudmFyIHMgPSAxMDAwO1xudmFyIG0gPSBzICogNjA7XG52YXIgaCA9IG0gKiA2MDtcbnZhciBkID0gaCAqIDI0O1xudmFyIHcgPSBkICogNztcbnZhciB5ID0gZCAqIDM2NS4yNTtcblxuLyoqXG4gKiBQYXJzZSBvciBmb3JtYXQgdGhlIGdpdmVuIGB2YWxgLlxuICpcbiAqIE9wdGlvbnM6XG4gKlxuICogIC0gYGxvbmdgIHZlcmJvc2UgZm9ybWF0dGluZyBbZmFsc2VdXG4gKlxuICogQHBhcmFtIHtTdHJpbmd8TnVtYmVyfSB2YWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAqIEB0aHJvd3Mge0Vycm9yfSB0aHJvdyBhbiBlcnJvciBpZiB2YWwgaXMgbm90IGEgbm9uLWVtcHR5IHN0cmluZyBvciBhIG51bWJlclxuICogQHJldHVybiB7U3RyaW5nfE51bWJlcn1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbih2YWwsIG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIHZhciB0eXBlID0gdHlwZW9mIHZhbDtcbiAgaWYgKHR5cGUgPT09ICdzdHJpbmcnICYmIHZhbC5sZW5ndGggPiAwKSB7XG4gICAgcmV0dXJuIHBhcnNlKHZhbCk7XG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gJ251bWJlcicgJiYgaXNGaW5pdGUodmFsKSkge1xuICAgIHJldHVybiBvcHRpb25zLmxvbmcgPyBmbXRMb25nKHZhbCkgOiBmbXRTaG9ydCh2YWwpO1xuICB9XG4gIHRocm93IG5ldyBFcnJvcihcbiAgICAndmFsIGlzIG5vdCBhIG5vbi1lbXB0eSBzdHJpbmcgb3IgYSB2YWxpZCBudW1iZXIuIHZhbD0nICtcbiAgICAgIEpTT04uc3RyaW5naWZ5KHZhbClcbiAgKTtcbn07XG5cbi8qKlxuICogUGFyc2UgdGhlIGdpdmVuIGBzdHJgIGFuZCByZXR1cm4gbWlsbGlzZWNvbmRzLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge051bWJlcn1cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIHBhcnNlKHN0cikge1xuICBzdHIgPSBTdHJpbmcoc3RyKTtcbiAgaWYgKHN0ci5sZW5ndGggPiAxMDApIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIG1hdGNoID0gL14oLT8oPzpcXGQrKT9cXC4/XFxkKykgKihtaWxsaXNlY29uZHM/fG1zZWNzP3xtc3xzZWNvbmRzP3xzZWNzP3xzfG1pbnV0ZXM/fG1pbnM/fG18aG91cnM/fGhycz98aHxkYXlzP3xkfHdlZWtzP3x3fHllYXJzP3x5cnM/fHkpPyQvaS5leGVjKFxuICAgIHN0clxuICApO1xuICBpZiAoIW1hdGNoKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBuID0gcGFyc2VGbG9hdChtYXRjaFsxXSk7XG4gIHZhciB0eXBlID0gKG1hdGNoWzJdIHx8ICdtcycpLnRvTG93ZXJDYXNlKCk7XG4gIHN3aXRjaCAodHlwZSkge1xuICAgIGNhc2UgJ3llYXJzJzpcbiAgICBjYXNlICd5ZWFyJzpcbiAgICBjYXNlICd5cnMnOlxuICAgIGNhc2UgJ3lyJzpcbiAgICBjYXNlICd5JzpcbiAgICAgIHJldHVybiBuICogeTtcbiAgICBjYXNlICd3ZWVrcyc6XG4gICAgY2FzZSAnd2Vlayc6XG4gICAgY2FzZSAndyc6XG4gICAgICByZXR1cm4gbiAqIHc7XG4gICAgY2FzZSAnZGF5cyc6XG4gICAgY2FzZSAnZGF5JzpcbiAgICBjYXNlICdkJzpcbiAgICAgIHJldHVybiBuICogZDtcbiAgICBjYXNlICdob3Vycyc6XG4gICAgY2FzZSAnaG91cic6XG4gICAgY2FzZSAnaHJzJzpcbiAgICBjYXNlICdocic6XG4gICAgY2FzZSAnaCc6XG4gICAgICByZXR1cm4gbiAqIGg7XG4gICAgY2FzZSAnbWludXRlcyc6XG4gICAgY2FzZSAnbWludXRlJzpcbiAgICBjYXNlICdtaW5zJzpcbiAgICBjYXNlICdtaW4nOlxuICAgIGNhc2UgJ20nOlxuICAgICAgcmV0dXJuIG4gKiBtO1xuICAgIGNhc2UgJ3NlY29uZHMnOlxuICAgIGNhc2UgJ3NlY29uZCc6XG4gICAgY2FzZSAnc2Vjcyc6XG4gICAgY2FzZSAnc2VjJzpcbiAgICBjYXNlICdzJzpcbiAgICAgIHJldHVybiBuICogcztcbiAgICBjYXNlICdtaWxsaXNlY29uZHMnOlxuICAgIGNhc2UgJ21pbGxpc2Vjb25kJzpcbiAgICBjYXNlICdtc2Vjcyc6XG4gICAgY2FzZSAnbXNlYyc6XG4gICAgY2FzZSAnbXMnOlxuICAgICAgcmV0dXJuIG47XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbn1cblxuLyoqXG4gKiBTaG9ydCBmb3JtYXQgZm9yIGBtc2AuXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IG1zXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBmbXRTaG9ydChtcykge1xuICB2YXIgbXNBYnMgPSBNYXRoLmFicyhtcyk7XG4gIGlmIChtc0FicyA+PSBkKSB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQobXMgLyBkKSArICdkJztcbiAgfVxuICBpZiAobXNBYnMgPj0gaCkge1xuICAgIHJldHVybiBNYXRoLnJvdW5kKG1zIC8gaCkgKyAnaCc7XG4gIH1cbiAgaWYgKG1zQWJzID49IG0pIHtcbiAgICByZXR1cm4gTWF0aC5yb3VuZChtcyAvIG0pICsgJ20nO1xuICB9XG4gIGlmIChtc0FicyA+PSBzKSB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQobXMgLyBzKSArICdzJztcbiAgfVxuICByZXR1cm4gbXMgKyAnbXMnO1xufVxuXG4vKipcbiAqIExvbmcgZm9ybWF0IGZvciBgbXNgLlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBtc1xuICogQHJldHVybiB7U3RyaW5nfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gZm10TG9uZyhtcykge1xuICB2YXIgbXNBYnMgPSBNYXRoLmFicyhtcyk7XG4gIGlmIChtc0FicyA+PSBkKSB7XG4gICAgcmV0dXJuIHBsdXJhbChtcywgbXNBYnMsIGQsICdkYXknKTtcbiAgfVxuICBpZiAobXNBYnMgPj0gaCkge1xuICAgIHJldHVybiBwbHVyYWwobXMsIG1zQWJzLCBoLCAnaG91cicpO1xuICB9XG4gIGlmIChtc0FicyA+PSBtKSB7XG4gICAgcmV0dXJuIHBsdXJhbChtcywgbXNBYnMsIG0sICdtaW51dGUnKTtcbiAgfVxuICBpZiAobXNBYnMgPj0gcykge1xuICAgIHJldHVybiBwbHVyYWwobXMsIG1zQWJzLCBzLCAnc2Vjb25kJyk7XG4gIH1cbiAgcmV0dXJuIG1zICsgJyBtcyc7XG59XG5cbi8qKlxuICogUGx1cmFsaXphdGlvbiBoZWxwZXIuXG4gKi9cblxuZnVuY3Rpb24gcGx1cmFsKG1zLCBtc0FicywgbiwgbmFtZSkge1xuICB2YXIgaXNQbHVyYWwgPSBtc0FicyA+PSBuICogMS41O1xuICByZXR1cm4gTWF0aC5yb3VuZChtcyAvIG4pICsgJyAnICsgbmFtZSArIChpc1BsdXJhbCA/ICdzJyA6ICcnKTtcbn1cbiIsImNvbnN0IFBBQ0tFVF9UWVBFUyA9IE9iamVjdC5jcmVhdGUobnVsbCk7IC8vIG5vIE1hcCA9IG5vIHBvbHlmaWxsXG5QQUNLRVRfVFlQRVNbXCJvcGVuXCJdID0gXCIwXCI7XG5QQUNLRVRfVFlQRVNbXCJjbG9zZVwiXSA9IFwiMVwiO1xuUEFDS0VUX1RZUEVTW1wicGluZ1wiXSA9IFwiMlwiO1xuUEFDS0VUX1RZUEVTW1wicG9uZ1wiXSA9IFwiM1wiO1xuUEFDS0VUX1RZUEVTW1wibWVzc2FnZVwiXSA9IFwiNFwiO1xuUEFDS0VUX1RZUEVTW1widXBncmFkZVwiXSA9IFwiNVwiO1xuUEFDS0VUX1RZUEVTW1wibm9vcFwiXSA9IFwiNlwiO1xuXG5jb25zdCBQQUNLRVRfVFlQRVNfUkVWRVJTRSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5PYmplY3Qua2V5cyhQQUNLRVRfVFlQRVMpLmZvckVhY2goa2V5ID0+IHtcbiAgUEFDS0VUX1RZUEVTX1JFVkVSU0VbUEFDS0VUX1RZUEVTW2tleV1dID0ga2V5O1xufSk7XG5cbmNvbnN0IEVSUk9SX1BBQ0tFVCA9IHsgdHlwZTogXCJlcnJvclwiLCBkYXRhOiBcInBhcnNlciBlcnJvclwiIH07XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBQQUNLRVRfVFlQRVMsXG4gIFBBQ0tFVF9UWVBFU19SRVZFUlNFLFxuICBFUlJPUl9QQUNLRVRcbn07XG4iLCJjb25zdCB7IFBBQ0tFVF9UWVBFU19SRVZFUlNFLCBFUlJPUl9QQUNLRVQgfSA9IHJlcXVpcmUoXCIuL2NvbW1vbnNcIik7XG5cbmNvbnN0IHdpdGhOYXRpdmVBcnJheUJ1ZmZlciA9IHR5cGVvZiBBcnJheUJ1ZmZlciA9PT0gXCJmdW5jdGlvblwiO1xuXG5sZXQgYmFzZTY0ZGVjb2RlcjtcbmlmICh3aXRoTmF0aXZlQXJyYXlCdWZmZXIpIHtcbiAgYmFzZTY0ZGVjb2RlciA9IHJlcXVpcmUoXCJiYXNlNjQtYXJyYXlidWZmZXJcIik7XG59XG5cbmNvbnN0IGRlY29kZVBhY2tldCA9IChlbmNvZGVkUGFja2V0LCBiaW5hcnlUeXBlKSA9PiB7XG4gIGlmICh0eXBlb2YgZW5jb2RlZFBhY2tldCAhPT0gXCJzdHJpbmdcIikge1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiBcIm1lc3NhZ2VcIixcbiAgICAgIGRhdGE6IG1hcEJpbmFyeShlbmNvZGVkUGFja2V0LCBiaW5hcnlUeXBlKVxuICAgIH07XG4gIH1cbiAgY29uc3QgdHlwZSA9IGVuY29kZWRQYWNrZXQuY2hhckF0KDApO1xuICBpZiAodHlwZSA9PT0gXCJiXCIpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogXCJtZXNzYWdlXCIsXG4gICAgICBkYXRhOiBkZWNvZGVCYXNlNjRQYWNrZXQoZW5jb2RlZFBhY2tldC5zdWJzdHJpbmcoMSksIGJpbmFyeVR5cGUpXG4gICAgfTtcbiAgfVxuICBjb25zdCBwYWNrZXRUeXBlID0gUEFDS0VUX1RZUEVTX1JFVkVSU0VbdHlwZV07XG4gIGlmICghcGFja2V0VHlwZSkge1xuICAgIHJldHVybiBFUlJPUl9QQUNLRVQ7XG4gIH1cbiAgcmV0dXJuIGVuY29kZWRQYWNrZXQubGVuZ3RoID4gMVxuICAgID8ge1xuICAgICAgICB0eXBlOiBQQUNLRVRfVFlQRVNfUkVWRVJTRVt0eXBlXSxcbiAgICAgICAgZGF0YTogZW5jb2RlZFBhY2tldC5zdWJzdHJpbmcoMSlcbiAgICAgIH1cbiAgICA6IHtcbiAgICAgICAgdHlwZTogUEFDS0VUX1RZUEVTX1JFVkVSU0VbdHlwZV1cbiAgICAgIH07XG59O1xuXG5jb25zdCBkZWNvZGVCYXNlNjRQYWNrZXQgPSAoZGF0YSwgYmluYXJ5VHlwZSkgPT4ge1xuICBpZiAoYmFzZTY0ZGVjb2Rlcikge1xuICAgIGNvbnN0IGRlY29kZWQgPSBiYXNlNjRkZWNvZGVyLmRlY29kZShkYXRhKTtcbiAgICByZXR1cm4gbWFwQmluYXJ5KGRlY29kZWQsIGJpbmFyeVR5cGUpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB7IGJhc2U2NDogdHJ1ZSwgZGF0YSB9OyAvLyBmYWxsYmFjayBmb3Igb2xkIGJyb3dzZXJzXG4gIH1cbn07XG5cbmNvbnN0IG1hcEJpbmFyeSA9IChkYXRhLCBiaW5hcnlUeXBlKSA9PiB7XG4gIHN3aXRjaCAoYmluYXJ5VHlwZSkge1xuICAgIGNhc2UgXCJibG9iXCI6XG4gICAgICByZXR1cm4gZGF0YSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyID8gbmV3IEJsb2IoW2RhdGFdKSA6IGRhdGE7XG4gICAgY2FzZSBcImFycmF5YnVmZmVyXCI6XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBkYXRhOyAvLyBhc3N1bWluZyB0aGUgZGF0YSBpcyBhbHJlYWR5IGFuIEFycmF5QnVmZmVyXG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gZGVjb2RlUGFja2V0O1xuIiwiY29uc3QgeyBQQUNLRVRfVFlQRVMgfSA9IHJlcXVpcmUoXCIuL2NvbW1vbnNcIik7XG5cbmNvbnN0IHdpdGhOYXRpdmVCbG9iID1cbiAgdHlwZW9mIEJsb2IgPT09IFwiZnVuY3Rpb25cIiB8fFxuICAodHlwZW9mIEJsb2IgIT09IFwidW5kZWZpbmVkXCIgJiZcbiAgICBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoQmxvYikgPT09IFwiW29iamVjdCBCbG9iQ29uc3RydWN0b3JdXCIpO1xuY29uc3Qgd2l0aE5hdGl2ZUFycmF5QnVmZmVyID0gdHlwZW9mIEFycmF5QnVmZmVyID09PSBcImZ1bmN0aW9uXCI7XG5cbi8vIEFycmF5QnVmZmVyLmlzVmlldyBtZXRob2QgaXMgbm90IGRlZmluZWQgaW4gSUUxMFxuY29uc3QgaXNWaWV3ID0gb2JqID0+IHtcbiAgcmV0dXJuIHR5cGVvZiBBcnJheUJ1ZmZlci5pc1ZpZXcgPT09IFwiZnVuY3Rpb25cIlxuICAgID8gQXJyYXlCdWZmZXIuaXNWaWV3KG9iailcbiAgICA6IG9iaiAmJiBvYmouYnVmZmVyIGluc3RhbmNlb2YgQXJyYXlCdWZmZXI7XG59O1xuXG5jb25zdCBlbmNvZGVQYWNrZXQgPSAoeyB0eXBlLCBkYXRhIH0sIHN1cHBvcnRzQmluYXJ5LCBjYWxsYmFjaykgPT4ge1xuICBpZiAod2l0aE5hdGl2ZUJsb2IgJiYgZGF0YSBpbnN0YW5jZW9mIEJsb2IpIHtcbiAgICBpZiAoc3VwcG9ydHNCaW5hcnkpIHtcbiAgICAgIHJldHVybiBjYWxsYmFjayhkYXRhKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGVuY29kZUJsb2JBc0Jhc2U2NChkYXRhLCBjYWxsYmFjayk7XG4gICAgfVxuICB9IGVsc2UgaWYgKFxuICAgIHdpdGhOYXRpdmVBcnJheUJ1ZmZlciAmJlxuICAgIChkYXRhIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIgfHwgaXNWaWV3KGRhdGEpKVxuICApIHtcbiAgICBpZiAoc3VwcG9ydHNCaW5hcnkpIHtcbiAgICAgIHJldHVybiBjYWxsYmFjayhkYXRhIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIgPyBkYXRhIDogZGF0YS5idWZmZXIpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZW5jb2RlQmxvYkFzQmFzZTY0KG5ldyBCbG9iKFtkYXRhXSksIGNhbGxiYWNrKTtcbiAgICB9XG4gIH1cbiAgLy8gcGxhaW4gc3RyaW5nXG4gIHJldHVybiBjYWxsYmFjayhQQUNLRVRfVFlQRVNbdHlwZV0gKyAoZGF0YSB8fCBcIlwiKSk7XG59O1xuXG5jb25zdCBlbmNvZGVCbG9iQXNCYXNlNjQgPSAoZGF0YSwgY2FsbGJhY2spID0+IHtcbiAgY29uc3QgZmlsZVJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gIGZpbGVSZWFkZXIub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgY29uc3QgY29udGVudCA9IGZpbGVSZWFkZXIucmVzdWx0LnNwbGl0KFwiLFwiKVsxXTtcbiAgICBjYWxsYmFjayhcImJcIiArIGNvbnRlbnQpO1xuICB9O1xuICByZXR1cm4gZmlsZVJlYWRlci5yZWFkQXNEYXRhVVJMKGRhdGEpO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBlbmNvZGVQYWNrZXQ7XG4iLCJjb25zdCBlbmNvZGVQYWNrZXQgPSByZXF1aXJlKFwiLi9lbmNvZGVQYWNrZXRcIik7XG5jb25zdCBkZWNvZGVQYWNrZXQgPSByZXF1aXJlKFwiLi9kZWNvZGVQYWNrZXRcIik7XG5cbmNvbnN0IFNFUEFSQVRPUiA9IFN0cmluZy5mcm9tQ2hhckNvZGUoMzApOyAvLyBzZWUgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvRGVsaW1pdGVyI0FTQ0lJX2RlbGltaXRlZF90ZXh0XG5cbmNvbnN0IGVuY29kZVBheWxvYWQgPSAocGFja2V0cywgY2FsbGJhY2spID0+IHtcbiAgLy8gc29tZSBwYWNrZXRzIG1heSBiZSBhZGRlZCB0byB0aGUgYXJyYXkgd2hpbGUgZW5jb2RpbmcsIHNvIHRoZSBpbml0aWFsIGxlbmd0aCBtdXN0IGJlIHNhdmVkXG4gIGNvbnN0IGxlbmd0aCA9IHBhY2tldHMubGVuZ3RoO1xuICBjb25zdCBlbmNvZGVkUGFja2V0cyA9IG5ldyBBcnJheShsZW5ndGgpO1xuICBsZXQgY291bnQgPSAwO1xuXG4gIHBhY2tldHMuZm9yRWFjaCgocGFja2V0LCBpKSA9PiB7XG4gICAgLy8gZm9yY2UgYmFzZTY0IGVuY29kaW5nIGZvciBiaW5hcnkgcGFja2V0c1xuICAgIGVuY29kZVBhY2tldChwYWNrZXQsIGZhbHNlLCBlbmNvZGVkUGFja2V0ID0+IHtcbiAgICAgIGVuY29kZWRQYWNrZXRzW2ldID0gZW5jb2RlZFBhY2tldDtcbiAgICAgIGlmICgrK2NvdW50ID09PSBsZW5ndGgpIHtcbiAgICAgICAgY2FsbGJhY2soZW5jb2RlZFBhY2tldHMuam9pbihTRVBBUkFUT1IpKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59O1xuXG5jb25zdCBkZWNvZGVQYXlsb2FkID0gKGVuY29kZWRQYXlsb2FkLCBiaW5hcnlUeXBlKSA9PiB7XG4gIGNvbnN0IGVuY29kZWRQYWNrZXRzID0gZW5jb2RlZFBheWxvYWQuc3BsaXQoU0VQQVJBVE9SKTtcbiAgY29uc3QgcGFja2V0cyA9IFtdO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGVuY29kZWRQYWNrZXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgZGVjb2RlZFBhY2tldCA9IGRlY29kZVBhY2tldChlbmNvZGVkUGFja2V0c1tpXSwgYmluYXJ5VHlwZSk7XG4gICAgcGFja2V0cy5wdXNoKGRlY29kZWRQYWNrZXQpO1xuICAgIGlmIChkZWNvZGVkUGFja2V0LnR5cGUgPT09IFwiZXJyb3JcIikge1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIHJldHVybiBwYWNrZXRzO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIHByb3RvY29sOiA0LFxuICBlbmNvZGVQYWNrZXQsXG4gIGVuY29kZVBheWxvYWQsXG4gIGRlY29kZVBhY2tldCxcbiAgZGVjb2RlUGF5bG9hZFxufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIGhhcyA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHlcbiAgLCBwcmVmaXggPSAnfic7XG5cbi8qKlxuICogQ29uc3RydWN0b3IgdG8gY3JlYXRlIGEgc3RvcmFnZSBmb3Igb3VyIGBFRWAgb2JqZWN0cy5cbiAqIEFuIGBFdmVudHNgIGluc3RhbmNlIGlzIGEgcGxhaW4gb2JqZWN0IHdob3NlIHByb3BlcnRpZXMgYXJlIGV2ZW50IG5hbWVzLlxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gRXZlbnRzKCkge31cblxuLy9cbi8vIFdlIHRyeSB0byBub3QgaW5oZXJpdCBmcm9tIGBPYmplY3QucHJvdG90eXBlYC4gSW4gc29tZSBlbmdpbmVzIGNyZWF0aW5nIGFuXG4vLyBpbnN0YW5jZSBpbiB0aGlzIHdheSBpcyBmYXN0ZXIgdGhhbiBjYWxsaW5nIGBPYmplY3QuY3JlYXRlKG51bGwpYCBkaXJlY3RseS5cbi8vIElmIGBPYmplY3QuY3JlYXRlKG51bGwpYCBpcyBub3Qgc3VwcG9ydGVkIHdlIHByZWZpeCB0aGUgZXZlbnQgbmFtZXMgd2l0aCBhXG4vLyBjaGFyYWN0ZXIgdG8gbWFrZSBzdXJlIHRoYXQgdGhlIGJ1aWx0LWluIG9iamVjdCBwcm9wZXJ0aWVzIGFyZSBub3Rcbi8vIG92ZXJyaWRkZW4gb3IgdXNlZCBhcyBhbiBhdHRhY2sgdmVjdG9yLlxuLy9cbmlmIChPYmplY3QuY3JlYXRlKSB7XG4gIEV2ZW50cy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG4gIC8vXG4gIC8vIFRoaXMgaGFjayBpcyBuZWVkZWQgYmVjYXVzZSB0aGUgYF9fcHJvdG9fX2AgcHJvcGVydHkgaXMgc3RpbGwgaW5oZXJpdGVkIGluXG4gIC8vIHNvbWUgb2xkIGJyb3dzZXJzIGxpa2UgQW5kcm9pZCA0LCBpUGhvbmUgNS4xLCBPcGVyYSAxMSBhbmQgU2FmYXJpIDUuXG4gIC8vXG4gIGlmICghbmV3IEV2ZW50cygpLl9fcHJvdG9fXykgcHJlZml4ID0gZmFsc2U7XG59XG5cbi8qKlxuICogUmVwcmVzZW50YXRpb24gb2YgYSBzaW5nbGUgZXZlbnQgbGlzdGVuZXIuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGxpc3RlbmVyIGZ1bmN0aW9uLlxuICogQHBhcmFtIHsqfSBjb250ZXh0IFRoZSBjb250ZXh0IHRvIGludm9rZSB0aGUgbGlzdGVuZXIgd2l0aC5cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW29uY2U9ZmFsc2VdIFNwZWNpZnkgaWYgdGhlIGxpc3RlbmVyIGlzIGEgb25lLXRpbWUgbGlzdGVuZXIuXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIEVFKGZuLCBjb250ZXh0LCBvbmNlKSB7XG4gIHRoaXMuZm4gPSBmbjtcbiAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgdGhpcy5vbmNlID0gb25jZSB8fCBmYWxzZTtcbn1cblxuLyoqXG4gKiBBZGQgYSBsaXN0ZW5lciBmb3IgYSBnaXZlbiBldmVudC5cbiAqXG4gKiBAcGFyYW0ge0V2ZW50RW1pdHRlcn0gZW1pdHRlciBSZWZlcmVuY2UgdG8gdGhlIGBFdmVudEVtaXR0ZXJgIGluc3RhbmNlLlxuICogQHBhcmFtIHsoU3RyaW5nfFN5bWJvbCl9IGV2ZW50IFRoZSBldmVudCBuYW1lLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGxpc3RlbmVyIGZ1bmN0aW9uLlxuICogQHBhcmFtIHsqfSBjb250ZXh0IFRoZSBjb250ZXh0IHRvIGludm9rZSB0aGUgbGlzdGVuZXIgd2l0aC5cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gb25jZSBTcGVjaWZ5IGlmIHRoZSBsaXN0ZW5lciBpcyBhIG9uZS10aW1lIGxpc3RlbmVyLlxuICogQHJldHVybnMge0V2ZW50RW1pdHRlcn1cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGFkZExpc3RlbmVyKGVtaXR0ZXIsIGV2ZW50LCBmbiwgY29udGV4dCwgb25jZSkge1xuICBpZiAodHlwZW9mIGZuICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVGhlIGxpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvbicpO1xuICB9XG5cbiAgdmFyIGxpc3RlbmVyID0gbmV3IEVFKGZuLCBjb250ZXh0IHx8IGVtaXR0ZXIsIG9uY2UpXG4gICAgLCBldnQgPSBwcmVmaXggPyBwcmVmaXggKyBldmVudCA6IGV2ZW50O1xuXG4gIGlmICghZW1pdHRlci5fZXZlbnRzW2V2dF0pIGVtaXR0ZXIuX2V2ZW50c1tldnRdID0gbGlzdGVuZXIsIGVtaXR0ZXIuX2V2ZW50c0NvdW50Kys7XG4gIGVsc2UgaWYgKCFlbWl0dGVyLl9ldmVudHNbZXZ0XS5mbikgZW1pdHRlci5fZXZlbnRzW2V2dF0ucHVzaChsaXN0ZW5lcik7XG4gIGVsc2UgZW1pdHRlci5fZXZlbnRzW2V2dF0gPSBbZW1pdHRlci5fZXZlbnRzW2V2dF0sIGxpc3RlbmVyXTtcblxuICByZXR1cm4gZW1pdHRlcjtcbn1cblxuLyoqXG4gKiBDbGVhciBldmVudCBieSBuYW1lLlxuICpcbiAqIEBwYXJhbSB7RXZlbnRFbWl0dGVyfSBlbWl0dGVyIFJlZmVyZW5jZSB0byB0aGUgYEV2ZW50RW1pdHRlcmAgaW5zdGFuY2UuXG4gKiBAcGFyYW0geyhTdHJpbmd8U3ltYm9sKX0gZXZ0IFRoZSBFdmVudCBuYW1lLlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gY2xlYXJFdmVudChlbWl0dGVyLCBldnQpIHtcbiAgaWYgKC0tZW1pdHRlci5fZXZlbnRzQ291bnQgPT09IDApIGVtaXR0ZXIuX2V2ZW50cyA9IG5ldyBFdmVudHMoKTtcbiAgZWxzZSBkZWxldGUgZW1pdHRlci5fZXZlbnRzW2V2dF07XG59XG5cbi8qKlxuICogTWluaW1hbCBgRXZlbnRFbWl0dGVyYCBpbnRlcmZhY2UgdGhhdCBpcyBtb2xkZWQgYWdhaW5zdCB0aGUgTm9kZS5qc1xuICogYEV2ZW50RW1pdHRlcmAgaW50ZXJmYWNlLlxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICogQHB1YmxpY1xuICovXG5mdW5jdGlvbiBFdmVudEVtaXR0ZXIoKSB7XG4gIHRoaXMuX2V2ZW50cyA9IG5ldyBFdmVudHMoKTtcbiAgdGhpcy5fZXZlbnRzQ291bnQgPSAwO1xufVxuXG4vKipcbiAqIFJldHVybiBhbiBhcnJheSBsaXN0aW5nIHRoZSBldmVudHMgZm9yIHdoaWNoIHRoZSBlbWl0dGVyIGhhcyByZWdpc3RlcmVkXG4gKiBsaXN0ZW5lcnMuXG4gKlxuICogQHJldHVybnMge0FycmF5fVxuICogQHB1YmxpY1xuICovXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmV2ZW50TmFtZXMgPSBmdW5jdGlvbiBldmVudE5hbWVzKCkge1xuICB2YXIgbmFtZXMgPSBbXVxuICAgICwgZXZlbnRzXG4gICAgLCBuYW1lO1xuXG4gIGlmICh0aGlzLl9ldmVudHNDb3VudCA9PT0gMCkgcmV0dXJuIG5hbWVzO1xuXG4gIGZvciAobmFtZSBpbiAoZXZlbnRzID0gdGhpcy5fZXZlbnRzKSkge1xuICAgIGlmIChoYXMuY2FsbChldmVudHMsIG5hbWUpKSBuYW1lcy5wdXNoKHByZWZpeCA/IG5hbWUuc2xpY2UoMSkgOiBuYW1lKTtcbiAgfVxuXG4gIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7XG4gICAgcmV0dXJuIG5hbWVzLmNvbmNhdChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGV2ZW50cykpO1xuICB9XG5cbiAgcmV0dXJuIG5hbWVzO1xufTtcblxuLyoqXG4gKiBSZXR1cm4gdGhlIGxpc3RlbmVycyByZWdpc3RlcmVkIGZvciBhIGdpdmVuIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7KFN0cmluZ3xTeW1ib2wpfSBldmVudCBUaGUgZXZlbnQgbmFtZS5cbiAqIEByZXR1cm5zIHtBcnJheX0gVGhlIHJlZ2lzdGVyZWQgbGlzdGVuZXJzLlxuICogQHB1YmxpY1xuICovXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVycyA9IGZ1bmN0aW9uIGxpc3RlbmVycyhldmVudCkge1xuICB2YXIgZXZ0ID0gcHJlZml4ID8gcHJlZml4ICsgZXZlbnQgOiBldmVudFxuICAgICwgaGFuZGxlcnMgPSB0aGlzLl9ldmVudHNbZXZ0XTtcblxuICBpZiAoIWhhbmRsZXJzKSByZXR1cm4gW107XG4gIGlmIChoYW5kbGVycy5mbikgcmV0dXJuIFtoYW5kbGVycy5mbl07XG5cbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBoYW5kbGVycy5sZW5ndGgsIGVlID0gbmV3IEFycmF5KGwpOyBpIDwgbDsgaSsrKSB7XG4gICAgZWVbaV0gPSBoYW5kbGVyc1tpXS5mbjtcbiAgfVxuXG4gIHJldHVybiBlZTtcbn07XG5cbi8qKlxuICogUmV0dXJuIHRoZSBudW1iZXIgb2YgbGlzdGVuZXJzIGxpc3RlbmluZyB0byBhIGdpdmVuIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7KFN0cmluZ3xTeW1ib2wpfSBldmVudCBUaGUgZXZlbnQgbmFtZS5cbiAqIEByZXR1cm5zIHtOdW1iZXJ9IFRoZSBudW1iZXIgb2YgbGlzdGVuZXJzLlxuICogQHB1YmxpY1xuICovXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVyQ291bnQgPSBmdW5jdGlvbiBsaXN0ZW5lckNvdW50KGV2ZW50KSB7XG4gIHZhciBldnQgPSBwcmVmaXggPyBwcmVmaXggKyBldmVudCA6IGV2ZW50XG4gICAgLCBsaXN0ZW5lcnMgPSB0aGlzLl9ldmVudHNbZXZ0XTtcblxuICBpZiAoIWxpc3RlbmVycykgcmV0dXJuIDA7XG4gIGlmIChsaXN0ZW5lcnMuZm4pIHJldHVybiAxO1xuICByZXR1cm4gbGlzdGVuZXJzLmxlbmd0aDtcbn07XG5cbi8qKlxuICogQ2FsbHMgZWFjaCBvZiB0aGUgbGlzdGVuZXJzIHJlZ2lzdGVyZWQgZm9yIGEgZ2l2ZW4gZXZlbnQuXG4gKlxuICogQHBhcmFtIHsoU3RyaW5nfFN5bWJvbCl9IGV2ZW50IFRoZSBldmVudCBuYW1lLlxuICogQHJldHVybnMge0Jvb2xlYW59IGB0cnVlYCBpZiB0aGUgZXZlbnQgaGFkIGxpc3RlbmVycywgZWxzZSBgZmFsc2VgLlxuICogQHB1YmxpY1xuICovXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmVtaXQgPSBmdW5jdGlvbiBlbWl0KGV2ZW50LCBhMSwgYTIsIGEzLCBhNCwgYTUpIHtcbiAgdmFyIGV2dCA9IHByZWZpeCA/IHByZWZpeCArIGV2ZW50IDogZXZlbnQ7XG5cbiAgaWYgKCF0aGlzLl9ldmVudHNbZXZ0XSkgcmV0dXJuIGZhbHNlO1xuXG4gIHZhciBsaXN0ZW5lcnMgPSB0aGlzLl9ldmVudHNbZXZ0XVxuICAgICwgbGVuID0gYXJndW1lbnRzLmxlbmd0aFxuICAgICwgYXJnc1xuICAgICwgaTtcblxuICBpZiAobGlzdGVuZXJzLmZuKSB7XG4gICAgaWYgKGxpc3RlbmVycy5vbmNlKSB0aGlzLnJlbW92ZUxpc3RlbmVyKGV2ZW50LCBsaXN0ZW5lcnMuZm4sIHVuZGVmaW5lZCwgdHJ1ZSk7XG5cbiAgICBzd2l0Y2ggKGxlbikge1xuICAgICAgY2FzZSAxOiByZXR1cm4gbGlzdGVuZXJzLmZuLmNhbGwobGlzdGVuZXJzLmNvbnRleHQpLCB0cnVlO1xuICAgICAgY2FzZSAyOiByZXR1cm4gbGlzdGVuZXJzLmZuLmNhbGwobGlzdGVuZXJzLmNvbnRleHQsIGExKSwgdHJ1ZTtcbiAgICAgIGNhc2UgMzogcmV0dXJuIGxpc3RlbmVycy5mbi5jYWxsKGxpc3RlbmVycy5jb250ZXh0LCBhMSwgYTIpLCB0cnVlO1xuICAgICAgY2FzZSA0OiByZXR1cm4gbGlzdGVuZXJzLmZuLmNhbGwobGlzdGVuZXJzLmNvbnRleHQsIGExLCBhMiwgYTMpLCB0cnVlO1xuICAgICAgY2FzZSA1OiByZXR1cm4gbGlzdGVuZXJzLmZuLmNhbGwobGlzdGVuZXJzLmNvbnRleHQsIGExLCBhMiwgYTMsIGE0KSwgdHJ1ZTtcbiAgICAgIGNhc2UgNjogcmV0dXJuIGxpc3RlbmVycy5mbi5jYWxsKGxpc3RlbmVycy5jb250ZXh0LCBhMSwgYTIsIGEzLCBhNCwgYTUpLCB0cnVlO1xuICAgIH1cblxuICAgIGZvciAoaSA9IDEsIGFyZ3MgPSBuZXcgQXJyYXkobGVuIC0xKTsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICB9XG5cbiAgICBsaXN0ZW5lcnMuZm4uYXBwbHkobGlzdGVuZXJzLmNvbnRleHQsIGFyZ3MpO1xuICB9IGVsc2Uge1xuICAgIHZhciBsZW5ndGggPSBsaXN0ZW5lcnMubGVuZ3RoXG4gICAgICAsIGo7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChsaXN0ZW5lcnNbaV0ub25jZSkgdGhpcy5yZW1vdmVMaXN0ZW5lcihldmVudCwgbGlzdGVuZXJzW2ldLmZuLCB1bmRlZmluZWQsIHRydWUpO1xuXG4gICAgICBzd2l0Y2ggKGxlbikge1xuICAgICAgICBjYXNlIDE6IGxpc3RlbmVyc1tpXS5mbi5jYWxsKGxpc3RlbmVyc1tpXS5jb250ZXh0KTsgYnJlYWs7XG4gICAgICAgIGNhc2UgMjogbGlzdGVuZXJzW2ldLmZuLmNhbGwobGlzdGVuZXJzW2ldLmNvbnRleHQsIGExKTsgYnJlYWs7XG4gICAgICAgIGNhc2UgMzogbGlzdGVuZXJzW2ldLmZuLmNhbGwobGlzdGVuZXJzW2ldLmNvbnRleHQsIGExLCBhMik7IGJyZWFrO1xuICAgICAgICBjYXNlIDQ6IGxpc3RlbmVyc1tpXS5mbi5jYWxsKGxpc3RlbmVyc1tpXS5jb250ZXh0LCBhMSwgYTIsIGEzKTsgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgaWYgKCFhcmdzKSBmb3IgKGogPSAxLCBhcmdzID0gbmV3IEFycmF5KGxlbiAtMSk7IGogPCBsZW47IGorKykge1xuICAgICAgICAgICAgYXJnc1tqIC0gMV0gPSBhcmd1bWVudHNbal07XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbGlzdGVuZXJzW2ldLmZuLmFwcGx5KGxpc3RlbmVyc1tpXS5jb250ZXh0LCBhcmdzKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn07XG5cbi8qKlxuICogQWRkIGEgbGlzdGVuZXIgZm9yIGEgZ2l2ZW4gZXZlbnQuXG4gKlxuICogQHBhcmFtIHsoU3RyaW5nfFN5bWJvbCl9IGV2ZW50IFRoZSBldmVudCBuYW1lLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGxpc3RlbmVyIGZ1bmN0aW9uLlxuICogQHBhcmFtIHsqfSBbY29udGV4dD10aGlzXSBUaGUgY29udGV4dCB0byBpbnZva2UgdGhlIGxpc3RlbmVyIHdpdGguXG4gKiBAcmV0dXJucyB7RXZlbnRFbWl0dGVyfSBgdGhpc2AuXG4gKiBAcHVibGljXG4gKi9cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub24gPSBmdW5jdGlvbiBvbihldmVudCwgZm4sIGNvbnRleHQpIHtcbiAgcmV0dXJuIGFkZExpc3RlbmVyKHRoaXMsIGV2ZW50LCBmbiwgY29udGV4dCwgZmFsc2UpO1xufTtcblxuLyoqXG4gKiBBZGQgYSBvbmUtdGltZSBsaXN0ZW5lciBmb3IgYSBnaXZlbiBldmVudC5cbiAqXG4gKiBAcGFyYW0geyhTdHJpbmd8U3ltYm9sKX0gZXZlbnQgVGhlIGV2ZW50IG5hbWUuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgbGlzdGVuZXIgZnVuY3Rpb24uXG4gKiBAcGFyYW0geyp9IFtjb250ZXh0PXRoaXNdIFRoZSBjb250ZXh0IHRvIGludm9rZSB0aGUgbGlzdGVuZXIgd2l0aC5cbiAqIEByZXR1cm5zIHtFdmVudEVtaXR0ZXJ9IGB0aGlzYC5cbiAqIEBwdWJsaWNcbiAqL1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbmNlID0gZnVuY3Rpb24gb25jZShldmVudCwgZm4sIGNvbnRleHQpIHtcbiAgcmV0dXJuIGFkZExpc3RlbmVyKHRoaXMsIGV2ZW50LCBmbiwgY29udGV4dCwgdHJ1ZSk7XG59O1xuXG4vKipcbiAqIFJlbW92ZSB0aGUgbGlzdGVuZXJzIG9mIGEgZ2l2ZW4gZXZlbnQuXG4gKlxuICogQHBhcmFtIHsoU3RyaW5nfFN5bWJvbCl9IGV2ZW50IFRoZSBldmVudCBuYW1lLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gT25seSByZW1vdmUgdGhlIGxpc3RlbmVycyB0aGF0IG1hdGNoIHRoaXMgZnVuY3Rpb24uXG4gKiBAcGFyYW0geyp9IGNvbnRleHQgT25seSByZW1vdmUgdGhlIGxpc3RlbmVycyB0aGF0IGhhdmUgdGhpcyBjb250ZXh0LlxuICogQHBhcmFtIHtCb29sZWFufSBvbmNlIE9ubHkgcmVtb3ZlIG9uZS10aW1lIGxpc3RlbmVycy5cbiAqIEByZXR1cm5zIHtFdmVudEVtaXR0ZXJ9IGB0aGlzYC5cbiAqIEBwdWJsaWNcbiAqL1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lciA9IGZ1bmN0aW9uIHJlbW92ZUxpc3RlbmVyKGV2ZW50LCBmbiwgY29udGV4dCwgb25jZSkge1xuICB2YXIgZXZ0ID0gcHJlZml4ID8gcHJlZml4ICsgZXZlbnQgOiBldmVudDtcblxuICBpZiAoIXRoaXMuX2V2ZW50c1tldnRdKSByZXR1cm4gdGhpcztcbiAgaWYgKCFmbikge1xuICAgIGNsZWFyRXZlbnQodGhpcywgZXZ0KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHZhciBsaXN0ZW5lcnMgPSB0aGlzLl9ldmVudHNbZXZ0XTtcblxuICBpZiAobGlzdGVuZXJzLmZuKSB7XG4gICAgaWYgKFxuICAgICAgbGlzdGVuZXJzLmZuID09PSBmbiAmJlxuICAgICAgKCFvbmNlIHx8IGxpc3RlbmVycy5vbmNlKSAmJlxuICAgICAgKCFjb250ZXh0IHx8IGxpc3RlbmVycy5jb250ZXh0ID09PSBjb250ZXh0KVxuICAgICkge1xuICAgICAgY2xlYXJFdmVudCh0aGlzLCBldnQpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBmb3IgKHZhciBpID0gMCwgZXZlbnRzID0gW10sIGxlbmd0aCA9IGxpc3RlbmVycy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgaWYgKFxuICAgICAgICBsaXN0ZW5lcnNbaV0uZm4gIT09IGZuIHx8XG4gICAgICAgIChvbmNlICYmICFsaXN0ZW5lcnNbaV0ub25jZSkgfHxcbiAgICAgICAgKGNvbnRleHQgJiYgbGlzdGVuZXJzW2ldLmNvbnRleHQgIT09IGNvbnRleHQpXG4gICAgICApIHtcbiAgICAgICAgZXZlbnRzLnB1c2gobGlzdGVuZXJzW2ldKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvL1xuICAgIC8vIFJlc2V0IHRoZSBhcnJheSwgb3IgcmVtb3ZlIGl0IGNvbXBsZXRlbHkgaWYgd2UgaGF2ZSBubyBtb3JlIGxpc3RlbmVycy5cbiAgICAvL1xuICAgIGlmIChldmVudHMubGVuZ3RoKSB0aGlzLl9ldmVudHNbZXZ0XSA9IGV2ZW50cy5sZW5ndGggPT09IDEgPyBldmVudHNbMF0gOiBldmVudHM7XG4gICAgZWxzZSBjbGVhckV2ZW50KHRoaXMsIGV2dCk7XG4gIH1cblxuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogUmVtb3ZlIGFsbCBsaXN0ZW5lcnMsIG9yIHRob3NlIG9mIHRoZSBzcGVjaWZpZWQgZXZlbnQuXG4gKlxuICogQHBhcmFtIHsoU3RyaW5nfFN5bWJvbCl9IFtldmVudF0gVGhlIGV2ZW50IG5hbWUuXG4gKiBAcmV0dXJucyB7RXZlbnRFbWl0dGVyfSBgdGhpc2AuXG4gKiBAcHVibGljXG4gKi9cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzID0gZnVuY3Rpb24gcmVtb3ZlQWxsTGlzdGVuZXJzKGV2ZW50KSB7XG4gIHZhciBldnQ7XG5cbiAgaWYgKGV2ZW50KSB7XG4gICAgZXZ0ID0gcHJlZml4ID8gcHJlZml4ICsgZXZlbnQgOiBldmVudDtcbiAgICBpZiAodGhpcy5fZXZlbnRzW2V2dF0pIGNsZWFyRXZlbnQodGhpcywgZXZ0KTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLl9ldmVudHMgPSBuZXcgRXZlbnRzKCk7XG4gICAgdGhpcy5fZXZlbnRzQ291bnQgPSAwO1xuICB9XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vL1xuLy8gQWxpYXMgbWV0aG9kcyBuYW1lcyBiZWNhdXNlIHBlb3BsZSByb2xsIGxpa2UgdGhhdC5cbi8vXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9mZiA9IEV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXI7XG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmFkZExpc3RlbmVyID0gRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbjtcblxuLy9cbi8vIEV4cG9zZSB0aGUgcHJlZml4LlxuLy9cbkV2ZW50RW1pdHRlci5wcmVmaXhlZCA9IHByZWZpeDtcblxuLy9cbi8vIEFsbG93IGBFdmVudEVtaXR0ZXJgIHRvIGJlIGltcG9ydGVkIGFzIG1vZHVsZSBuYW1lc3BhY2UuXG4vL1xuRXZlbnRFbWl0dGVyLkV2ZW50RW1pdHRlciA9IEV2ZW50RW1pdHRlcjtcblxuLy9cbi8vIEV4cG9zZSB0aGUgbW9kdWxlLlxuLy9cbmlmICgndW5kZWZpbmVkJyAhPT0gdHlwZW9mIG1vZHVsZSkge1xuICBtb2R1bGUuZXhwb3J0cyA9IEV2ZW50RW1pdHRlcjtcbn1cbiIsIlxuLyoqXG4gKiBNb2R1bGUgZXhwb3J0cy5cbiAqXG4gKiBMb2dpYyBib3Jyb3dlZCBmcm9tIE1vZGVybml6cjpcbiAqXG4gKiAgIC0gaHR0cHM6Ly9naXRodWIuY29tL01vZGVybml6ci9Nb2Rlcm5penIvYmxvYi9tYXN0ZXIvZmVhdHVyZS1kZXRlY3RzL2NvcnMuanNcbiAqL1xuXG50cnkge1xuICBtb2R1bGUuZXhwb3J0cyA9IHR5cGVvZiBYTUxIdHRwUmVxdWVzdCAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAnd2l0aENyZWRlbnRpYWxzJyBpbiBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbn0gY2F0Y2ggKGVycikge1xuICAvLyBpZiBYTUxIdHRwIHN1cHBvcnQgaXMgZGlzYWJsZWQgaW4gSUUgdGhlbiBpdCB3aWxsIHRocm93XG4gIC8vIHdoZW4gdHJ5aW5nIHRvIGNyZWF0ZVxuICBtb2R1bGUuZXhwb3J0cyA9IGZhbHNlO1xufVxuIiwiLyoqXG4gKiBDb21waWxlcyBhIHF1ZXJ5c3RyaW5nXG4gKiBSZXR1cm5zIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgb2JqZWN0XG4gKlxuICogQHBhcmFtIHtPYmplY3R9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5leHBvcnRzLmVuY29kZSA9IGZ1bmN0aW9uIChvYmopIHtcbiAgdmFyIHN0ciA9ICcnO1xuXG4gIGZvciAodmFyIGkgaW4gb2JqKSB7XG4gICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShpKSkge1xuICAgICAgaWYgKHN0ci5sZW5ndGgpIHN0ciArPSAnJic7XG4gICAgICBzdHIgKz0gZW5jb2RlVVJJQ29tcG9uZW50KGkpICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KG9ialtpXSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHN0cjtcbn07XG5cbi8qKlxuICogUGFyc2VzIGEgc2ltcGxlIHF1ZXJ5c3RyaW5nIGludG8gYW4gb2JqZWN0XG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHFzXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5leHBvcnRzLmRlY29kZSA9IGZ1bmN0aW9uKHFzKXtcbiAgdmFyIHFyeSA9IHt9O1xuICB2YXIgcGFpcnMgPSBxcy5zcGxpdCgnJicpO1xuICBmb3IgKHZhciBpID0gMCwgbCA9IHBhaXJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIHZhciBwYWlyID0gcGFpcnNbaV0uc3BsaXQoJz0nKTtcbiAgICBxcnlbZGVjb2RlVVJJQ29tcG9uZW50KHBhaXJbMF0pXSA9IGRlY29kZVVSSUNvbXBvbmVudChwYWlyWzFdKTtcbiAgfVxuICByZXR1cm4gcXJ5O1xufTtcbiIsIi8qKlxuICogUGFyc2VzIGFuIFVSSVxuICpcbiAqIEBhdXRob3IgU3RldmVuIExldml0aGFuIDxzdGV2ZW5sZXZpdGhhbi5jb20+IChNSVQgbGljZW5zZSlcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbnZhciByZSA9IC9eKD86KD8hW146QF0rOlteOkBcXC9dKkApKGh0dHB8aHR0cHN8d3N8d3NzKTpcXC9cXC8pPygoPzooKFteOkBdKikoPzo6KFteOkBdKikpPyk/QCk/KCg/OlthLWYwLTldezAsNH06KXsyLDd9W2EtZjAtOV17MCw0fXxbXjpcXC8/I10qKSg/OjooXFxkKikpPykoKChcXC8oPzpbXj8jXSg/IVtePyNcXC9dKlxcLltePyNcXC8uXSsoPzpbPyNdfCQpKSkqXFwvPyk/KFtePyNcXC9dKikpKD86XFw/KFteI10qKSk/KD86IyguKikpPykvO1xuXG52YXIgcGFydHMgPSBbXG4gICAgJ3NvdXJjZScsICdwcm90b2NvbCcsICdhdXRob3JpdHknLCAndXNlckluZm8nLCAndXNlcicsICdwYXNzd29yZCcsICdob3N0JywgJ3BvcnQnLCAncmVsYXRpdmUnLCAncGF0aCcsICdkaXJlY3RvcnknLCAnZmlsZScsICdxdWVyeScsICdhbmNob3InXG5dO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHBhcnNldXJpKHN0cikge1xuICAgIHZhciBzcmMgPSBzdHIsXG4gICAgICAgIGIgPSBzdHIuaW5kZXhPZignWycpLFxuICAgICAgICBlID0gc3RyLmluZGV4T2YoJ10nKTtcblxuICAgIGlmIChiICE9IC0xICYmIGUgIT0gLTEpIHtcbiAgICAgICAgc3RyID0gc3RyLnN1YnN0cmluZygwLCBiKSArIHN0ci5zdWJzdHJpbmcoYiwgZSkucmVwbGFjZSgvOi9nLCAnOycpICsgc3RyLnN1YnN0cmluZyhlLCBzdHIubGVuZ3RoKTtcbiAgICB9XG5cbiAgICB2YXIgbSA9IHJlLmV4ZWMoc3RyIHx8ICcnKSxcbiAgICAgICAgdXJpID0ge30sXG4gICAgICAgIGkgPSAxNDtcblxuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgdXJpW3BhcnRzW2ldXSA9IG1baV0gfHwgJyc7XG4gICAgfVxuXG4gICAgaWYgKGIgIT0gLTEgJiYgZSAhPSAtMSkge1xuICAgICAgICB1cmkuc291cmNlID0gc3JjO1xuICAgICAgICB1cmkuaG9zdCA9IHVyaS5ob3N0LnN1YnN0cmluZygxLCB1cmkuaG9zdC5sZW5ndGggLSAxKS5yZXBsYWNlKC87L2csICc6Jyk7XG4gICAgICAgIHVyaS5hdXRob3JpdHkgPSB1cmkuYXV0aG9yaXR5LnJlcGxhY2UoJ1snLCAnJykucmVwbGFjZSgnXScsICcnKS5yZXBsYWNlKC87L2csICc6Jyk7XG4gICAgICAgIHVyaS5pcHY2dXJpID0gdHJ1ZTtcbiAgICB9XG5cbiAgICB1cmkucGF0aE5hbWVzID0gcGF0aE5hbWVzKHVyaSwgdXJpWydwYXRoJ10pO1xuICAgIHVyaS5xdWVyeUtleSA9IHF1ZXJ5S2V5KHVyaSwgdXJpWydxdWVyeSddKTtcblxuICAgIHJldHVybiB1cmk7XG59O1xuXG5mdW5jdGlvbiBwYXRoTmFtZXMob2JqLCBwYXRoKSB7XG4gICAgdmFyIHJlZ3ggPSAvXFwvezIsOX0vZyxcbiAgICAgICAgbmFtZXMgPSBwYXRoLnJlcGxhY2UocmVneCwgXCIvXCIpLnNwbGl0KFwiL1wiKTtcblxuICAgIGlmIChwYXRoLnN1YnN0cigwLCAxKSA9PSAnLycgfHwgcGF0aC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgbmFtZXMuc3BsaWNlKDAsIDEpO1xuICAgIH1cbiAgICBpZiAocGF0aC5zdWJzdHIocGF0aC5sZW5ndGggLSAxLCAxKSA9PSAnLycpIHtcbiAgICAgICAgbmFtZXMuc3BsaWNlKG5hbWVzLmxlbmd0aCAtIDEsIDEpO1xuICAgIH1cblxuICAgIHJldHVybiBuYW1lcztcbn1cblxuZnVuY3Rpb24gcXVlcnlLZXkodXJpLCBxdWVyeSkge1xuICAgIHZhciBkYXRhID0ge307XG5cbiAgICBxdWVyeS5yZXBsYWNlKC8oPzpefCYpKFteJj1dKik9PyhbXiZdKikvZywgZnVuY3Rpb24gKCQwLCAkMSwgJDIpIHtcbiAgICAgICAgaWYgKCQxKSB7XG4gICAgICAgICAgICBkYXRhWyQxXSA9ICQyO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gZGF0YTtcbn1cbiIsInBhcmNlbFJlcXVpcmU9ZnVuY3Rpb24oZSxyLHQsbil7dmFyIGksbz1cImZ1bmN0aW9uXCI9PXR5cGVvZiBwYXJjZWxSZXF1aXJlJiZwYXJjZWxSZXF1aXJlLHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtmdW5jdGlvbiBmKHQsbil7aWYoIXJbdF0pe2lmKCFlW3RdKXt2YXIgaT1cImZ1bmN0aW9uXCI9PXR5cGVvZiBwYXJjZWxSZXF1aXJlJiZwYXJjZWxSZXF1aXJlO2lmKCFuJiZpKXJldHVybiBpKHQsITApO2lmKG8pcmV0dXJuIG8odCwhMCk7aWYodSYmXCJzdHJpbmdcIj09dHlwZW9mIHQpcmV0dXJuIHUodCk7dmFyIGM9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIit0K1wiJ1wiKTt0aHJvdyBjLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsY31wLnJlc29sdmU9ZnVuY3Rpb24ocil7cmV0dXJuIGVbdF1bMV1bcl18fHJ9LHAuY2FjaGU9e307dmFyIGw9clt0XT1uZXcgZi5Nb2R1bGUodCk7ZVt0XVswXS5jYWxsKGwuZXhwb3J0cyxwLGwsbC5leHBvcnRzLHRoaXMpfXJldHVybiByW3RdLmV4cG9ydHM7ZnVuY3Rpb24gcChlKXtyZXR1cm4gZihwLnJlc29sdmUoZSkpfX1mLmlzUGFyY2VsUmVxdWlyZT0hMCxmLk1vZHVsZT1mdW5jdGlvbihlKXt0aGlzLmlkPWUsdGhpcy5idW5kbGU9Zix0aGlzLmV4cG9ydHM9e319LGYubW9kdWxlcz1lLGYuY2FjaGU9cixmLnBhcmVudD1vLGYucmVnaXN0ZXI9ZnVuY3Rpb24ocix0KXtlW3JdPVtmdW5jdGlvbihlLHIpe3IuZXhwb3J0cz10fSx7fV19O2Zvcih2YXIgYz0wO2M8dC5sZW5ndGg7YysrKXRyeXtmKHRbY10pfWNhdGNoKGUpe2l8fChpPWUpfWlmKHQubGVuZ3RoKXt2YXIgbD1mKHRbdC5sZW5ndGgtMV0pO1wib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgbW9kdWxlP21vZHVsZS5leHBvcnRzPWw6XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShmdW5jdGlvbigpe3JldHVybiBsfSk6biYmKHRoaXNbbl09bCl9aWYocGFyY2VsUmVxdWlyZT1mLGkpdGhyb3cgaTtyZXR1cm4gZn0oe1wiRWdCaFwiOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKSB7XG52YXIgZT17fTtlLnVzZUJsb2JCdWlsZGVyPWZ1bmN0aW9uKCl7dHJ5e3JldHVybiBuZXcgQmxvYihbXSksITF9Y2F0Y2goZSl7cmV0dXJuITB9fSgpLGUudXNlQXJyYXlCdWZmZXJWaWV3PSFlLnVzZUJsb2JCdWlsZGVyJiZmdW5jdGlvbigpe3RyeXtyZXR1cm4gMD09PW5ldyBCbG9iKFtuZXcgVWludDhBcnJheShbXSldKS5zaXplfWNhdGNoKGUpe3JldHVybiEwfX0oKSxtb2R1bGUuZXhwb3J0cy5iaW5hcnlGZWF0dXJlcz1lO3ZhciByPW1vZHVsZS5leHBvcnRzLkJsb2JCdWlsZGVyO2Z1bmN0aW9uIHQoKXt0aGlzLl9waWVjZXM9W10sdGhpcy5fcGFydHM9W119XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdyYmKHI9bW9kdWxlLmV4cG9ydHMuQmxvYkJ1aWxkZXI9d2luZG93LldlYktpdEJsb2JCdWlsZGVyfHx3aW5kb3cuTW96QmxvYkJ1aWxkZXJ8fHdpbmRvdy5NU0Jsb2JCdWlsZGVyfHx3aW5kb3cuQmxvYkJ1aWxkZXIpLHQucHJvdG90eXBlLmFwcGVuZD1mdW5jdGlvbihlKXtcIm51bWJlclwiPT10eXBlb2YgZT90aGlzLl9waWVjZXMucHVzaChlKToodGhpcy5mbHVzaCgpLHRoaXMuX3BhcnRzLnB1c2goZSkpfSx0LnByb3RvdHlwZS5mbHVzaD1mdW5jdGlvbigpe2lmKHRoaXMuX3BpZWNlcy5sZW5ndGg+MCl7dmFyIHI9bmV3IFVpbnQ4QXJyYXkodGhpcy5fcGllY2VzKTtlLnVzZUFycmF5QnVmZmVyVmlld3x8KHI9ci5idWZmZXIpLHRoaXMuX3BhcnRzLnB1c2gociksdGhpcy5fcGllY2VzPVtdfX0sdC5wcm90b3R5cGUuZ2V0QnVmZmVyPWZ1bmN0aW9uKCl7aWYodGhpcy5mbHVzaCgpLGUudXNlQmxvYkJ1aWxkZXIpe2Zvcih2YXIgdD1uZXcgcixpPTAsdT10aGlzLl9wYXJ0cy5sZW5ndGg7aTx1O2krKyl0LmFwcGVuZCh0aGlzLl9wYXJ0c1tpXSk7cmV0dXJuIHQuZ2V0QmxvYigpfXJldHVybiBuZXcgQmxvYih0aGlzLl9wYXJ0cyl9LG1vZHVsZS5leHBvcnRzLkJ1ZmZlckJ1aWxkZXI9dDtcbn0se31dLFwia2RQcFwiOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKSB7XG52YXIgdD1yZXF1aXJlKFwiLi9idWZmZXJidWlsZGVyXCIpLkJ1ZmZlckJ1aWxkZXIsZT1yZXF1aXJlKFwiLi9idWZmZXJidWlsZGVyXCIpLmJpbmFyeUZlYXR1cmVzLGk9e3VucGFjazpmdW5jdGlvbih0KXtyZXR1cm4gbmV3IHIodCkudW5wYWNrKCl9LHBhY2s6ZnVuY3Rpb24odCl7dmFyIGU9bmV3IG47cmV0dXJuIGUucGFjayh0KSxlLmdldEJ1ZmZlcigpfX07ZnVuY3Rpb24gcih0KXt0aGlzLmluZGV4PTAsdGhpcy5kYXRhQnVmZmVyPXQsdGhpcy5kYXRhVmlldz1uZXcgVWludDhBcnJheSh0aGlzLmRhdGFCdWZmZXIpLHRoaXMubGVuZ3RoPXRoaXMuZGF0YUJ1ZmZlci5ieXRlTGVuZ3RofWZ1bmN0aW9uIG4oKXt0aGlzLmJ1ZmZlckJ1aWxkZXI9bmV3IHR9ZnVuY3Rpb24gdSh0KXt2YXIgZT10LmNoYXJDb2RlQXQoMCk7cmV0dXJuIGU8PTIwNDc/XCIwMFwiOmU8PTY1NTM1P1wiMDAwXCI6ZTw9MjA5NzE1MT9cIjAwMDBcIjplPD02NzEwODg2Mz9cIjAwMDAwXCI6XCIwMDAwMDBcIn1mdW5jdGlvbiBhKHQpe3JldHVybiB0Lmxlbmd0aD42MDA/bmV3IEJsb2IoW3RdKS5zaXplOnQucmVwbGFjZSgvW15cXHUwMDAwLVxcdTAwN0ZdL2csdSkubGVuZ3RofW1vZHVsZS5leHBvcnRzPWksci5wcm90b3R5cGUudW5wYWNrPWZ1bmN0aW9uKCl7dmFyIHQsZT10aGlzLnVucGFja191aW50OCgpO2lmKGU8MTI4KXJldHVybiBlO2lmKCgyMjReZSk8MzIpcmV0dXJuKDIyNF5lKS0zMjtpZigodD0xNjBeZSk8PTE1KXJldHVybiB0aGlzLnVucGFja19yYXcodCk7aWYoKHQ9MTc2XmUpPD0xNSlyZXR1cm4gdGhpcy51bnBhY2tfc3RyaW5nKHQpO2lmKCh0PTE0NF5lKTw9MTUpcmV0dXJuIHRoaXMudW5wYWNrX2FycmF5KHQpO2lmKCh0PTEyOF5lKTw9MTUpcmV0dXJuIHRoaXMudW5wYWNrX21hcCh0KTtzd2l0Y2goZSl7Y2FzZSAxOTI6cmV0dXJuIG51bGw7Y2FzZSAxOTM6cmV0dXJuO2Nhc2UgMTk0OnJldHVybiExO2Nhc2UgMTk1OnJldHVybiEwO2Nhc2UgMjAyOnJldHVybiB0aGlzLnVucGFja19mbG9hdCgpO2Nhc2UgMjAzOnJldHVybiB0aGlzLnVucGFja19kb3VibGUoKTtjYXNlIDIwNDpyZXR1cm4gdGhpcy51bnBhY2tfdWludDgoKTtjYXNlIDIwNTpyZXR1cm4gdGhpcy51bnBhY2tfdWludDE2KCk7Y2FzZSAyMDY6cmV0dXJuIHRoaXMudW5wYWNrX3VpbnQzMigpO2Nhc2UgMjA3OnJldHVybiB0aGlzLnVucGFja191aW50NjQoKTtjYXNlIDIwODpyZXR1cm4gdGhpcy51bnBhY2tfaW50OCgpO2Nhc2UgMjA5OnJldHVybiB0aGlzLnVucGFja19pbnQxNigpO2Nhc2UgMjEwOnJldHVybiB0aGlzLnVucGFja19pbnQzMigpO2Nhc2UgMjExOnJldHVybiB0aGlzLnVucGFja19pbnQ2NCgpO2Nhc2UgMjEyOmNhc2UgMjEzOmNhc2UgMjE0OmNhc2UgMjE1OnJldHVybjtjYXNlIDIxNjpyZXR1cm4gdD10aGlzLnVucGFja191aW50MTYoKSx0aGlzLnVucGFja19zdHJpbmcodCk7Y2FzZSAyMTc6cmV0dXJuIHQ9dGhpcy51bnBhY2tfdWludDMyKCksdGhpcy51bnBhY2tfc3RyaW5nKHQpO2Nhc2UgMjE4OnJldHVybiB0PXRoaXMudW5wYWNrX3VpbnQxNigpLHRoaXMudW5wYWNrX3Jhdyh0KTtjYXNlIDIxOTpyZXR1cm4gdD10aGlzLnVucGFja191aW50MzIoKSx0aGlzLnVucGFja19yYXcodCk7Y2FzZSAyMjA6cmV0dXJuIHQ9dGhpcy51bnBhY2tfdWludDE2KCksdGhpcy51bnBhY2tfYXJyYXkodCk7Y2FzZSAyMjE6cmV0dXJuIHQ9dGhpcy51bnBhY2tfdWludDMyKCksdGhpcy51bnBhY2tfYXJyYXkodCk7Y2FzZSAyMjI6cmV0dXJuIHQ9dGhpcy51bnBhY2tfdWludDE2KCksdGhpcy51bnBhY2tfbWFwKHQpO2Nhc2UgMjIzOnJldHVybiB0PXRoaXMudW5wYWNrX3VpbnQzMigpLHRoaXMudW5wYWNrX21hcCh0KX19LHIucHJvdG90eXBlLnVucGFja191aW50OD1mdW5jdGlvbigpe3ZhciB0PTI1NSZ0aGlzLmRhdGFWaWV3W3RoaXMuaW5kZXhdO3JldHVybiB0aGlzLmluZGV4KyssdH0sci5wcm90b3R5cGUudW5wYWNrX3VpbnQxNj1mdW5jdGlvbigpe3ZhciB0PXRoaXMucmVhZCgyKSxlPTI1NiooMjU1JnRbMF0pKygyNTUmdFsxXSk7cmV0dXJuIHRoaXMuaW5kZXgrPTIsZX0sci5wcm90b3R5cGUudW5wYWNrX3VpbnQzMj1mdW5jdGlvbigpe3ZhciB0PXRoaXMucmVhZCg0KSxlPTI1NiooMjU2KigyNTYqdFswXSt0WzFdKSt0WzJdKSt0WzNdO3JldHVybiB0aGlzLmluZGV4Kz00LGV9LHIucHJvdG90eXBlLnVucGFja191aW50NjQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnJlYWQoOCksZT0yNTYqKDI1NiooMjU2KigyNTYqKDI1NiooMjU2KigyNTYqdFswXSt0WzFdKSt0WzJdKSt0WzNdKSt0WzRdKSt0WzVdKSt0WzZdKSt0WzddO3JldHVybiB0aGlzLmluZGV4Kz04LGV9LHIucHJvdG90eXBlLnVucGFja19pbnQ4PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy51bnBhY2tfdWludDgoKTtyZXR1cm4gdDwxMjg/dDp0LTI1Nn0sci5wcm90b3R5cGUudW5wYWNrX2ludDE2PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy51bnBhY2tfdWludDE2KCk7cmV0dXJuIHQ8MzI3Njg/dDp0LTY1NTM2fSxyLnByb3RvdHlwZS51bnBhY2tfaW50MzI9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnVucGFja191aW50MzIoKTtyZXR1cm4gdDxNYXRoLnBvdygyLDMxKT90OnQtTWF0aC5wb3coMiwzMil9LHIucHJvdG90eXBlLnVucGFja19pbnQ2ND1mdW5jdGlvbigpe3ZhciB0PXRoaXMudW5wYWNrX3VpbnQ2NCgpO3JldHVybiB0PE1hdGgucG93KDIsNjMpP3Q6dC1NYXRoLnBvdygyLDY0KX0sci5wcm90b3R5cGUudW5wYWNrX3Jhdz1mdW5jdGlvbih0KXtpZih0aGlzLmxlbmd0aDx0aGlzLmluZGV4K3QpdGhyb3cgbmV3IEVycm9yKFwiQmluYXJ5UGFja0ZhaWx1cmU6IGluZGV4IGlzIG91dCBvZiByYW5nZSBcIit0aGlzLmluZGV4K1wiIFwiK3QrXCIgXCIrdGhpcy5sZW5ndGgpO3ZhciBlPXRoaXMuZGF0YUJ1ZmZlci5zbGljZSh0aGlzLmluZGV4LHRoaXMuaW5kZXgrdCk7cmV0dXJuIHRoaXMuaW5kZXgrPXQsZX0sci5wcm90b3R5cGUudW5wYWNrX3N0cmluZz1mdW5jdGlvbih0KXtmb3IodmFyIGUsaSxyPXRoaXMucmVhZCh0KSxuPTAsdT1cIlwiO248dDspKGU9cltuXSk8MTI4Pyh1Kz1TdHJpbmcuZnJvbUNoYXJDb2RlKGUpLG4rKyk6KDE5Ml5lKTwzMj8oaT0oMTkyXmUpPDw2fDYzJnJbbisxXSx1Kz1TdHJpbmcuZnJvbUNoYXJDb2RlKGkpLG4rPTIpOihpPSgxNSZlKTw8MTJ8KDYzJnJbbisxXSk8PDZ8NjMmcltuKzJdLHUrPVN0cmluZy5mcm9tQ2hhckNvZGUoaSksbis9Myk7cmV0dXJuIHRoaXMuaW5kZXgrPXQsdX0sci5wcm90b3R5cGUudW5wYWNrX2FycmF5PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1uZXcgQXJyYXkodCksaT0wO2k8dDtpKyspZVtpXT10aGlzLnVucGFjaygpO3JldHVybiBlfSxyLnByb3RvdHlwZS51bnBhY2tfbWFwPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT17fSxpPTA7aTx0O2krKyl7dmFyIHI9dGhpcy51bnBhY2soKSxuPXRoaXMudW5wYWNrKCk7ZVtyXT1ufXJldHVybiBlfSxyLnByb3RvdHlwZS51bnBhY2tfZmxvYXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnVucGFja191aW50MzIoKSxlPSh0Pj4yMyYyNTUpLTEyNztyZXR1cm4oMD09PXQ+PjMxPzE6LTEpKig4Mzg4NjA3JnR8ODM4ODYwOCkqTWF0aC5wb3coMixlLTIzKX0sci5wcm90b3R5cGUudW5wYWNrX2RvdWJsZT1mdW5jdGlvbigpe3ZhciB0PXRoaXMudW5wYWNrX3VpbnQzMigpLGU9dGhpcy51bnBhY2tfdWludDMyKCksaT0odD4+MjAmMjA0NyktMTAyMztyZXR1cm4oMD09PXQ+PjMxPzE6LTEpKigoMTA0ODU3NSZ0fDEwNDg1NzYpKk1hdGgucG93KDIsaS0yMCkrZSpNYXRoLnBvdygyLGktNTIpKX0sci5wcm90b3R5cGUucmVhZD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmluZGV4O2lmKGUrdDw9dGhpcy5sZW5ndGgpcmV0dXJuIHRoaXMuZGF0YVZpZXcuc3ViYXJyYXkoZSxlK3QpO3Rocm93IG5ldyBFcnJvcihcIkJpbmFyeVBhY2tGYWlsdXJlOiByZWFkIGluZGV4IG91dCBvZiByYW5nZVwiKX0sbi5wcm90b3R5cGUuZ2V0QnVmZmVyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYnVmZmVyQnVpbGRlci5nZXRCdWZmZXIoKX0sbi5wcm90b3R5cGUucGFjaz1mdW5jdGlvbih0KXt2YXIgaT10eXBlb2YgdDtpZihcInN0cmluZ1wiPT09aSl0aGlzLnBhY2tfc3RyaW5nKHQpO2Vsc2UgaWYoXCJudW1iZXJcIj09PWkpTWF0aC5mbG9vcih0KT09PXQ/dGhpcy5wYWNrX2ludGVnZXIodCk6dGhpcy5wYWNrX2RvdWJsZSh0KTtlbHNlIGlmKFwiYm9vbGVhblwiPT09aSkhMD09PXQ/dGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgxOTUpOiExPT09dCYmdGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgxOTQpO2Vsc2UgaWYoXCJ1bmRlZmluZWRcIj09PWkpdGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgxOTIpO2Vsc2V7aWYoXCJvYmplY3RcIiE9PWkpdGhyb3cgbmV3IEVycm9yKCdUeXBlIFwiJytpKydcIiBub3QgeWV0IHN1cHBvcnRlZCcpO2lmKG51bGw9PT10KXRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoMTkyKTtlbHNle3ZhciByPXQuY29uc3RydWN0b3I7aWYocj09QXJyYXkpdGhpcy5wYWNrX2FycmF5KHQpO2Vsc2UgaWYocj09QmxvYnx8cj09RmlsZXx8dCBpbnN0YW5jZW9mIEJsb2J8fHQgaW5zdGFuY2VvZiBGaWxlKXRoaXMucGFja19iaW4odCk7ZWxzZSBpZihyPT1BcnJheUJ1ZmZlcillLnVzZUFycmF5QnVmZmVyVmlldz90aGlzLnBhY2tfYmluKG5ldyBVaW50OEFycmF5KHQpKTp0aGlzLnBhY2tfYmluKHQpO2Vsc2UgaWYoXCJCWVRFU19QRVJfRUxFTUVOVFwiaW4gdCllLnVzZUFycmF5QnVmZmVyVmlldz90aGlzLnBhY2tfYmluKG5ldyBVaW50OEFycmF5KHQuYnVmZmVyKSk6dGhpcy5wYWNrX2Jpbih0LmJ1ZmZlcik7ZWxzZSBpZihyPT1PYmplY3R8fHIudG9TdHJpbmcoKS5zdGFydHNXaXRoKFwiY2xhc3NcIikpdGhpcy5wYWNrX29iamVjdCh0KTtlbHNlIGlmKHI9PURhdGUpdGhpcy5wYWNrX3N0cmluZyh0LnRvU3RyaW5nKCkpO2Vsc2V7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdC50b0JpbmFyeVBhY2spdGhyb3cgbmV3IEVycm9yKCdUeXBlIFwiJytyLnRvU3RyaW5nKCkrJ1wiIG5vdCB5ZXQgc3VwcG9ydGVkJyk7dGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCh0LnRvQmluYXJ5UGFjaygpKX19fXRoaXMuYnVmZmVyQnVpbGRlci5mbHVzaCgpfSxuLnByb3RvdHlwZS5wYWNrX2Jpbj1mdW5jdGlvbih0KXt2YXIgZT10Lmxlbmd0aHx8dC5ieXRlTGVuZ3RofHx0LnNpemU7aWYoZTw9MTUpdGhpcy5wYWNrX3VpbnQ4KDE2MCtlKTtlbHNlIGlmKGU8PTY1NTM1KXRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoMjE4KSx0aGlzLnBhY2tfdWludDE2KGUpO2Vsc2V7aWYoIShlPD00Mjk0OTY3Mjk1KSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGxlbmd0aFwiKTt0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKDIxOSksdGhpcy5wYWNrX3VpbnQzMihlKX10aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKHQpfSxuLnByb3RvdHlwZS5wYWNrX3N0cmluZz1mdW5jdGlvbih0KXt2YXIgZT1hKHQpO2lmKGU8PTE1KXRoaXMucGFja191aW50OCgxNzYrZSk7ZWxzZSBpZihlPD02NTUzNSl0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKDIxNiksdGhpcy5wYWNrX3VpbnQxNihlKTtlbHNle2lmKCEoZTw9NDI5NDk2NzI5NSkpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBsZW5ndGhcIik7dGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgyMTcpLHRoaXMucGFja191aW50MzIoZSl9dGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCh0KX0sbi5wcm90b3R5cGUucGFja19hcnJheT1mdW5jdGlvbih0KXt2YXIgZT10Lmxlbmd0aDtpZihlPD0xNSl0aGlzLnBhY2tfdWludDgoMTQ0K2UpO2Vsc2UgaWYoZTw9NjU1MzUpdGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgyMjApLHRoaXMucGFja191aW50MTYoZSk7ZWxzZXtpZighKGU8PTQyOTQ5NjcyOTUpKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgbGVuZ3RoXCIpO3RoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoMjIxKSx0aGlzLnBhY2tfdWludDMyKGUpfWZvcih2YXIgaT0wO2k8ZTtpKyspdGhpcy5wYWNrKHRbaV0pfSxuLnByb3RvdHlwZS5wYWNrX2ludGVnZXI9ZnVuY3Rpb24odCl7aWYodD49LTMyJiZ0PD0xMjcpdGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgyNTUmdCk7ZWxzZSBpZih0Pj0wJiZ0PD0yNTUpdGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgyMDQpLHRoaXMucGFja191aW50OCh0KTtlbHNlIGlmKHQ+PS0xMjgmJnQ8PTEyNyl0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKDIwOCksdGhpcy5wYWNrX2ludDgodCk7ZWxzZSBpZih0Pj0wJiZ0PD02NTUzNSl0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKDIwNSksdGhpcy5wYWNrX3VpbnQxNih0KTtlbHNlIGlmKHQ+PS0zMjc2OCYmdDw9MzI3NjcpdGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgyMDkpLHRoaXMucGFja19pbnQxNih0KTtlbHNlIGlmKHQ+PTAmJnQ8PTQyOTQ5NjcyOTUpdGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgyMDYpLHRoaXMucGFja191aW50MzIodCk7ZWxzZSBpZih0Pj0tMjE0NzQ4MzY0OCYmdDw9MjE0NzQ4MzY0Nyl0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKDIxMCksdGhpcy5wYWNrX2ludDMyKHQpO2Vsc2UgaWYodD49LTB4ODAwMDAwMDAwMDAwMDAwMCYmdDw9MHg4MDAwMDAwMDAwMDAwMDAwKXRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoMjExKSx0aGlzLnBhY2tfaW50NjQodCk7ZWxzZXtpZighKHQ+PTAmJnQ8PTB4MTAwMDAwMDAwMDAwMDAwMDApKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgaW50ZWdlclwiKTt0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKDIwNyksdGhpcy5wYWNrX3VpbnQ2NCh0KX19LG4ucHJvdG90eXBlLnBhY2tfZG91YmxlPWZ1bmN0aW9uKHQpe3ZhciBlPTA7dDwwJiYoZT0xLHQ9LXQpO3ZhciBpPU1hdGguZmxvb3IoTWF0aC5sb2codCkvTWF0aC5MTjIpLHI9dC9NYXRoLnBvdygyLGkpLTEsbj1NYXRoLmZsb29yKHIqTWF0aC5wb3coMiw1MikpLHU9TWF0aC5wb3coMiwzMiksYT1lPDwzMXxpKzEwMjM8PDIwfG4vdSYxMDQ4NTc1LHA9biV1O3RoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoMjAzKSx0aGlzLnBhY2tfaW50MzIoYSksdGhpcy5wYWNrX2ludDMyKHApfSxuLnByb3RvdHlwZS5wYWNrX29iamVjdD1mdW5jdGlvbih0KXt2YXIgZT1PYmplY3Qua2V5cyh0KS5sZW5ndGg7aWYoZTw9MTUpdGhpcy5wYWNrX3VpbnQ4KDEyOCtlKTtlbHNlIGlmKGU8PTY1NTM1KXRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoMjIyKSx0aGlzLnBhY2tfdWludDE2KGUpO2Vsc2V7aWYoIShlPD00Mjk0OTY3Mjk1KSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGxlbmd0aFwiKTt0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKDIyMyksdGhpcy5wYWNrX3VpbnQzMihlKX1mb3IodmFyIGkgaW4gdCl0Lmhhc093blByb3BlcnR5KGkpJiYodGhpcy5wYWNrKGkpLHRoaXMucGFjayh0W2ldKSl9LG4ucHJvdG90eXBlLnBhY2tfdWludDg9ZnVuY3Rpb24odCl7dGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCh0KX0sbi5wcm90b3R5cGUucGFja191aW50MTY9ZnVuY3Rpb24odCl7dGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCh0Pj44KSx0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKDI1NSZ0KX0sbi5wcm90b3R5cGUucGFja191aW50MzI9ZnVuY3Rpb24odCl7dmFyIGU9NDI5NDk2NzI5NSZ0O3RoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoKDQyNzgxOTAwODAmZSk+Pj4yNCksdGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgoMTY3MTE2ODAmZSk+Pj4xNiksdGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgoNjUyODAmZSk+Pj44KSx0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKDI1NSZlKX0sbi5wcm90b3R5cGUucGFja191aW50NjQ9ZnVuY3Rpb24odCl7dmFyIGU9dC9NYXRoLnBvdygyLDMyKSxpPXQlTWF0aC5wb3coMiwzMik7dGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgoNDI3ODE5MDA4MCZlKT4+PjI0KSx0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKCgxNjcxMTY4MCZlKT4+PjE2KSx0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKCg2NTI4MCZlKT4+PjgpLHRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoMjU1JmUpLHRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoKDQyNzgxOTAwODAmaSk+Pj4yNCksdGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgoMTY3MTE2ODAmaSk+Pj4xNiksdGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgoNjUyODAmaSk+Pj44KSx0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKDI1NSZpKX0sbi5wcm90b3R5cGUucGFja19pbnQ4PWZ1bmN0aW9uKHQpe3RoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoMjU1JnQpfSxuLnByb3RvdHlwZS5wYWNrX2ludDE2PWZ1bmN0aW9uKHQpe3RoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoKDY1MjgwJnQpPj44KSx0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKDI1NSZ0KX0sbi5wcm90b3R5cGUucGFja19pbnQzMj1mdW5jdGlvbih0KXt0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKHQ+Pj4yNCYyNTUpLHRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoKDE2NzExNjgwJnQpPj4+MTYpLHRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoKDY1MjgwJnQpPj4+OCksdGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgyNTUmdCl9LG4ucHJvdG90eXBlLnBhY2tfaW50NjQ9ZnVuY3Rpb24odCl7dmFyIGU9TWF0aC5mbG9vcih0L01hdGgucG93KDIsMzIpKSxpPXQlTWF0aC5wb3coMiwzMik7dGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgoNDI3ODE5MDA4MCZlKT4+PjI0KSx0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKCgxNjcxMTY4MCZlKT4+PjE2KSx0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKCg2NTI4MCZlKT4+PjgpLHRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoMjU1JmUpLHRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoKDQyNzgxOTAwODAmaSk+Pj4yNCksdGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgoMTY3MTE2ODAmaSk+Pj4xNiksdGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgoNjUyODAmaSk+Pj44KSx0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKDI1NSZpKX07XG59LHtcIi4vYnVmZmVyYnVpbGRlclwiOlwiRWdCaFwifV0sXCJpU3hDXCI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpIHtcblwidXNlIHN0cmljdFwiO2Z1bmN0aW9uIGUoZSx0LG4pe3JldHVybiB0IGluIGU/T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCx7dmFsdWU6bixlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMH0pOmVbdF09bixlfWZ1bmN0aW9uIHQoZSl7cmV0dXJuKHQ9XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZcInN5bWJvbFwiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKGUpe3JldHVybiB0eXBlb2YgZX06ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmZS5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmZSE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2YgZX0pKGUpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGV4cG9ydHMuZXh0cmFjdFZlcnNpb249byxleHBvcnRzLndyYXBQZWVyQ29ubmVjdGlvbkV2ZW50PWksZXhwb3J0cy5kaXNhYmxlTG9nPXMsZXhwb3J0cy5kaXNhYmxlV2FybmluZ3M9YSxleHBvcnRzLmxvZz1wLGV4cG9ydHMuZGVwcmVjYXRlZD11LGV4cG9ydHMuZGV0ZWN0QnJvd3Nlcj1jLGV4cG9ydHMuY29tcGFjdE9iamVjdD1mLGV4cG9ydHMud2Fsa1N0YXRzPWwsZXhwb3J0cy5maWx0ZXJTdGF0cz12O3ZhciBuPSEwLHI9ITA7ZnVuY3Rpb24gbyhlLHQsbil7dmFyIHI9ZS5tYXRjaCh0KTtyZXR1cm4gciYmci5sZW5ndGg+PW4mJnBhcnNlSW50KHJbbl0sMTApfWZ1bmN0aW9uIGkoZSx0LG4pe2lmKGUuUlRDUGVlckNvbm5lY3Rpb24pe3ZhciByPWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLG89ci5hZGRFdmVudExpc3RlbmVyO3IuYWRkRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbihlLHIpe2lmKGUhPT10KXJldHVybiBvLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgaT1mdW5jdGlvbihlKXt2YXIgdD1uKGUpO3QmJihyLmhhbmRsZUV2ZW50P3IuaGFuZGxlRXZlbnQodCk6cih0KSl9O3JldHVybiB0aGlzLl9ldmVudE1hcD10aGlzLl9ldmVudE1hcHx8e30sdGhpcy5fZXZlbnRNYXBbdF18fCh0aGlzLl9ldmVudE1hcFt0XT1uZXcgTWFwKSx0aGlzLl9ldmVudE1hcFt0XS5zZXQocixpKSxvLmFwcGx5KHRoaXMsW2UsaV0pfTt2YXIgaT1yLnJlbW92ZUV2ZW50TGlzdGVuZXI7ci5yZW1vdmVFdmVudExpc3RlbmVyPWZ1bmN0aW9uKGUsbil7aWYoZSE9PXR8fCF0aGlzLl9ldmVudE1hcHx8IXRoaXMuX2V2ZW50TWFwW3RdKXJldHVybiBpLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpZighdGhpcy5fZXZlbnRNYXBbdF0uaGFzKG4pKXJldHVybiBpLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgcj10aGlzLl9ldmVudE1hcFt0XS5nZXQobik7cmV0dXJuIHRoaXMuX2V2ZW50TWFwW3RdLmRlbGV0ZShuKSwwPT09dGhpcy5fZXZlbnRNYXBbdF0uc2l6ZSYmZGVsZXRlIHRoaXMuX2V2ZW50TWFwW3RdLDA9PT1PYmplY3Qua2V5cyh0aGlzLl9ldmVudE1hcCkubGVuZ3RoJiZkZWxldGUgdGhpcy5fZXZlbnRNYXAsaS5hcHBseSh0aGlzLFtlLHJdKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJvblwiK3Qse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzW1wiX29uXCIrdF19LHNldDpmdW5jdGlvbihlKXt0aGlzW1wiX29uXCIrdF0mJih0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIodCx0aGlzW1wiX29uXCIrdF0pLGRlbGV0ZSB0aGlzW1wiX29uXCIrdF0pLGUmJnRoaXMuYWRkRXZlbnRMaXN0ZW5lcih0LHRoaXNbXCJfb25cIit0XT1lKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KX19ZnVuY3Rpb24gcyhlKXtyZXR1cm5cImJvb2xlYW5cIiE9dHlwZW9mIGU/bmV3IEVycm9yKFwiQXJndW1lbnQgdHlwZTogXCIrdChlKStcIi4gUGxlYXNlIHVzZSBhIGJvb2xlYW4uXCIpOihuPWUsZT9cImFkYXB0ZXIuanMgbG9nZ2luZyBkaXNhYmxlZFwiOlwiYWRhcHRlci5qcyBsb2dnaW5nIGVuYWJsZWRcIil9ZnVuY3Rpb24gYShlKXtyZXR1cm5cImJvb2xlYW5cIiE9dHlwZW9mIGU/bmV3IEVycm9yKFwiQXJndW1lbnQgdHlwZTogXCIrdChlKStcIi4gUGxlYXNlIHVzZSBhIGJvb2xlYW4uXCIpOihyPSFlLFwiYWRhcHRlci5qcyBkZXByZWNhdGlvbiB3YXJuaW5ncyBcIisoZT9cImRpc2FibGVkXCI6XCJlbmFibGVkXCIpKX1mdW5jdGlvbiBwKCl7aWYoXCJvYmplY3RcIj09PShcInVuZGVmaW5lZFwiPT10eXBlb2Ygd2luZG93P1widW5kZWZpbmVkXCI6dCh3aW5kb3cpKSl7aWYobilyZXR1cm47XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGNvbnNvbGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGNvbnNvbGUubG9nJiZjb25zb2xlLmxvZy5hcHBseShjb25zb2xlLGFyZ3VtZW50cyl9fWZ1bmN0aW9uIHUoZSx0KXtyJiZjb25zb2xlLndhcm4oZStcIiBpcyBkZXByZWNhdGVkLCBwbGVhc2UgdXNlIFwiK3QrXCIgaW5zdGVhZC5cIil9ZnVuY3Rpb24gYyhlKXt2YXIgdD17YnJvd3NlcjpudWxsLHZlcnNpb246bnVsbH07aWYodm9pZCAwPT09ZXx8IWUubmF2aWdhdG9yKXJldHVybiB0LmJyb3dzZXI9XCJOb3QgYSBicm93c2VyLlwiLHQ7dmFye25hdmlnYXRvcjpufT1lO2lmKG4ubW96R2V0VXNlck1lZGlhKXQuYnJvd3Nlcj1cImZpcmVmb3hcIix0LnZlcnNpb249byhuLnVzZXJBZ2VudCwvRmlyZWZveFxcLyhcXGQrKVxcLi8sMSk7ZWxzZSBpZihuLndlYmtpdEdldFVzZXJNZWRpYXx8ITE9PT1lLmlzU2VjdXJlQ29udGV4dCYmZS53ZWJraXRSVENQZWVyQ29ubmVjdGlvbiYmIWUuUlRDSWNlR2F0aGVyZXIpdC5icm93c2VyPVwiY2hyb21lXCIsdC52ZXJzaW9uPW8obi51c2VyQWdlbnQsL0Nocm9tKGV8aXVtKVxcLyhcXGQrKVxcLi8sMik7ZWxzZSBpZihuLm1lZGlhRGV2aWNlcyYmbi51c2VyQWdlbnQubWF0Y2goL0VkZ2VcXC8oXFxkKykuKFxcZCspJC8pKXQuYnJvd3Nlcj1cImVkZ2VcIix0LnZlcnNpb249byhuLnVzZXJBZ2VudCwvRWRnZVxcLyhcXGQrKS4oXFxkKykkLywyKTtlbHNle2lmKCFlLlJUQ1BlZXJDb25uZWN0aW9ufHwhbi51c2VyQWdlbnQubWF0Y2goL0FwcGxlV2ViS2l0XFwvKFxcZCspXFwuLykpcmV0dXJuIHQuYnJvd3Nlcj1cIk5vdCBhIHN1cHBvcnRlZCBicm93c2VyLlwiLHQ7dC5icm93c2VyPVwic2FmYXJpXCIsdC52ZXJzaW9uPW8obi51c2VyQWdlbnQsL0FwcGxlV2ViS2l0XFwvKFxcZCspXFwuLywxKSx0LnN1cHBvcnRzVW5pZmllZFBsYW49ZS5SVENSdHBUcmFuc2NlaXZlciYmXCJjdXJyZW50RGlyZWN0aW9uXCJpbiBlLlJUQ1J0cFRyYW5zY2VpdmVyLnByb3RvdHlwZX1yZXR1cm4gdH1mdW5jdGlvbiBkKGUpe3JldHVyblwiW29iamVjdCBPYmplY3RdXCI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSl9ZnVuY3Rpb24gZih0KXtyZXR1cm4gZCh0KT9PYmplY3Qua2V5cyh0KS5yZWR1Y2UoZnVuY3Rpb24obixyKXt2YXIgbz1kKHRbcl0pLGk9bz9mKHRbcl0pOnRbcl0scz1vJiYhT2JqZWN0LmtleXMoaSkubGVuZ3RoO3JldHVybiB2b2lkIDA9PT1pfHxzP246T2JqZWN0LmFzc2lnbihuLGUoe30scixpKSl9LHt9KTp0fWZ1bmN0aW9uIGwoZSx0LG4pe3QmJiFuLmhhcyh0LmlkKSYmKG4uc2V0KHQuaWQsdCksT2JqZWN0LmtleXModCkuZm9yRWFjaChmdW5jdGlvbihyKXtyLmVuZHNXaXRoKFwiSWRcIik/bChlLGUuZ2V0KHRbcl0pLG4pOnIuZW5kc1dpdGgoXCJJZHNcIikmJnRbcl0uZm9yRWFjaChmdW5jdGlvbih0KXtsKGUsZS5nZXQodCksbil9KX0pKX1mdW5jdGlvbiB2KGUsdCxuKXt2YXIgcj1uP1wib3V0Ym91bmQtcnRwXCI6XCJpbmJvdW5kLXJ0cFwiLG89bmV3IE1hcDtpZihudWxsPT09dClyZXR1cm4gbzt2YXIgaT1bXTtyZXR1cm4gZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe1widHJhY2tcIj09PWUudHlwZSYmZS50cmFja0lkZW50aWZpZXI9PT10LmlkJiZpLnB1c2goZSl9KSxpLmZvckVhY2goZnVuY3Rpb24odCl7ZS5mb3JFYWNoKGZ1bmN0aW9uKG4pe24udHlwZT09PXImJm4udHJhY2tJZD09PXQuaWQmJmwoZSxuLG8pfSl9KSxvfVxufSx7fV0sXCJzNlNOXCI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpIHtcblwidXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGV4cG9ydHMuc2hpbUdldFVzZXJNZWRpYT1pO3ZhciBlPXQocmVxdWlyZShcIi4uL3V0aWxzLmpzXCIpKTtmdW5jdGlvbiByKCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgV2Vha01hcClyZXR1cm4gbnVsbDt2YXIgZT1uZXcgV2Vha01hcDtyZXR1cm4gcj1mdW5jdGlvbigpe3JldHVybiBlfSxlfWZ1bmN0aW9uIHQoZSl7aWYoZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO2lmKG51bGw9PT1lfHxcIm9iamVjdFwiIT10eXBlb2YgZSYmXCJmdW5jdGlvblwiIT10eXBlb2YgZSlyZXR1cm57ZGVmYXVsdDplfTt2YXIgdD1yKCk7aWYodCYmdC5oYXMoZSkpcmV0dXJuIHQuZ2V0KGUpO3ZhciBvPXt9LG49T2JqZWN0LmRlZmluZVByb3BlcnR5JiZPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO2Zvcih2YXIgaSBpbiBlKWlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLGkpKXt2YXIgYT1uP09iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSxpKTpudWxsO2EmJihhLmdldHx8YS5zZXQpP09iamVjdC5kZWZpbmVQcm9wZXJ0eShvLGksYSk6b1tpXT1lW2ldfXJldHVybiBvLmRlZmF1bHQ9ZSx0JiZ0LnNldChlLG8pLG99ZnVuY3Rpb24gbyhlKXtyZXR1cm4obz1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlwic3ltYm9sXCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24oZSl7cmV0dXJuIHR5cGVvZiBlfTpmdW5jdGlvbihlKXtyZXR1cm4gZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZlLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZlIT09U3ltYm9sLnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiBlfSkoZSl9dmFyIG49ZS5sb2c7ZnVuY3Rpb24gaShlLHIpe3ZhciB0PWUmJmUubmF2aWdhdG9yO2lmKHQubWVkaWFEZXZpY2VzKXt2YXIgaT1mdW5jdGlvbihlKXtpZihcIm9iamVjdFwiIT09byhlKXx8ZS5tYW5kYXRvcnl8fGUub3B0aW9uYWwpcmV0dXJuIGU7dmFyIHI9e307cmV0dXJuIE9iamVjdC5rZXlzKGUpLmZvckVhY2goZnVuY3Rpb24odCl7aWYoXCJyZXF1aXJlXCIhPT10JiZcImFkdmFuY2VkXCIhPT10JiZcIm1lZGlhU291cmNlXCIhPT10KXt2YXIgbj1cIm9iamVjdFwiPT09byhlW3RdKT9lW3RdOntpZGVhbDplW3RdfTt2b2lkIDAhPT1uLmV4YWN0JiZcIm51bWJlclwiPT10eXBlb2Ygbi5leGFjdCYmKG4ubWluPW4ubWF4PW4uZXhhY3QpO3ZhciBpPWZ1bmN0aW9uKGUscil7cmV0dXJuIGU/ZStyLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK3Iuc2xpY2UoMSk6XCJkZXZpY2VJZFwiPT09cj9cInNvdXJjZUlkXCI6cn07aWYodm9pZCAwIT09bi5pZGVhbCl7ci5vcHRpb25hbD1yLm9wdGlvbmFsfHxbXTt2YXIgYT17fTtcIm51bWJlclwiPT10eXBlb2Ygbi5pZGVhbD8oYVtpKFwibWluXCIsdCldPW4uaWRlYWwsci5vcHRpb25hbC5wdXNoKGEpLChhPXt9KVtpKFwibWF4XCIsdCldPW4uaWRlYWwsci5vcHRpb25hbC5wdXNoKGEpKTooYVtpKFwiXCIsdCldPW4uaWRlYWwsci5vcHRpb25hbC5wdXNoKGEpKX12b2lkIDAhPT1uLmV4YWN0JiZcIm51bWJlclwiIT10eXBlb2Ygbi5leGFjdD8oci5tYW5kYXRvcnk9ci5tYW5kYXRvcnl8fHt9LHIubWFuZGF0b3J5W2koXCJcIix0KV09bi5leGFjdCk6W1wibWluXCIsXCJtYXhcIl0uZm9yRWFjaChmdW5jdGlvbihlKXt2b2lkIDAhPT1uW2VdJiYoci5tYW5kYXRvcnk9ci5tYW5kYXRvcnl8fHt9LHIubWFuZGF0b3J5W2koZSx0KV09bltlXSl9KX19KSxlLmFkdmFuY2VkJiYoci5vcHRpb25hbD0oci5vcHRpb25hbHx8W10pLmNvbmNhdChlLmFkdmFuY2VkKSkscn0sYT1mdW5jdGlvbihlLGEpe2lmKHIudmVyc2lvbj49NjEpcmV0dXJuIGEoZSk7aWYoKGU9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShlKSkpJiZcIm9iamVjdFwiPT09byhlLmF1ZGlvKSl7dmFyIGM9ZnVuY3Rpb24oZSxyLHQpe3IgaW4gZSYmISh0IGluIGUpJiYoZVt0XT1lW3JdLGRlbGV0ZSBlW3JdKX07YygoZT1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGUpKSkuYXVkaW8sXCJhdXRvR2FpbkNvbnRyb2xcIixcImdvb2dBdXRvR2FpbkNvbnRyb2xcIiksYyhlLmF1ZGlvLFwibm9pc2VTdXBwcmVzc2lvblwiLFwiZ29vZ05vaXNlU3VwcHJlc3Npb25cIiksZS5hdWRpbz1pKGUuYXVkaW8pfWlmKGUmJlwib2JqZWN0XCI9PT1vKGUudmlkZW8pKXt2YXIgZD1lLnZpZGVvLmZhY2luZ01vZGU7ZD1kJiYoXCJvYmplY3RcIj09PW8oZCk/ZDp7aWRlYWw6ZH0pO3ZhciB1LHM9ci52ZXJzaW9uPDY2O2lmKGQmJihcInVzZXJcIj09PWQuZXhhY3R8fFwiZW52aXJvbm1lbnRcIj09PWQuZXhhY3R8fFwidXNlclwiPT09ZC5pZGVhbHx8XCJlbnZpcm9ubWVudFwiPT09ZC5pZGVhbCkmJighdC5tZWRpYURldmljZXMuZ2V0U3VwcG9ydGVkQ29uc3RyYWludHN8fCF0Lm1lZGlhRGV2aWNlcy5nZXRTdXBwb3J0ZWRDb25zdHJhaW50cygpLmZhY2luZ01vZGV8fHMpKWlmKGRlbGV0ZSBlLnZpZGVvLmZhY2luZ01vZGUsXCJlbnZpcm9ubWVudFwiPT09ZC5leGFjdHx8XCJlbnZpcm9ubWVudFwiPT09ZC5pZGVhbD91PVtcImJhY2tcIixcInJlYXJcIl06XCJ1c2VyXCIhPT1kLmV4YWN0JiZcInVzZXJcIiE9PWQuaWRlYWx8fCh1PVtcImZyb250XCJdKSx1KXJldHVybiB0Lm1lZGlhRGV2aWNlcy5lbnVtZXJhdGVEZXZpY2VzKCkudGhlbihmdW5jdGlvbihyKXt2YXIgdD0ocj1yLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm5cInZpZGVvaW5wdXRcIj09PWUua2luZH0pKS5maW5kKGZ1bmN0aW9uKGUpe3JldHVybiB1LnNvbWUoZnVuY3Rpb24ocil7cmV0dXJuIGUubGFiZWwudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhyKX0pfSk7cmV0dXJuIXQmJnIubGVuZ3RoJiZ1LmluY2x1ZGVzKFwiYmFja1wiKSYmKHQ9cltyLmxlbmd0aC0xXSksdCYmKGUudmlkZW8uZGV2aWNlSWQ9ZC5leGFjdD97ZXhhY3Q6dC5kZXZpY2VJZH06e2lkZWFsOnQuZGV2aWNlSWR9KSxlLnZpZGVvPWkoZS52aWRlbyksbihcImNocm9tZTogXCIrSlNPTi5zdHJpbmdpZnkoZSkpLGEoZSl9KTtlLnZpZGVvPWkoZS52aWRlbyl9cmV0dXJuIG4oXCJjaHJvbWU6IFwiK0pTT04uc3RyaW5naWZ5KGUpKSxhKGUpfSxjPWZ1bmN0aW9uKGUpe3JldHVybiByLnZlcnNpb24+PTY0P2U6e25hbWU6e1Blcm1pc3Npb25EZW5pZWRFcnJvcjpcIk5vdEFsbG93ZWRFcnJvclwiLFBlcm1pc3Npb25EaXNtaXNzZWRFcnJvcjpcIk5vdEFsbG93ZWRFcnJvclwiLEludmFsaWRTdGF0ZUVycm9yOlwiTm90QWxsb3dlZEVycm9yXCIsRGV2aWNlc05vdEZvdW5kRXJyb3I6XCJOb3RGb3VuZEVycm9yXCIsQ29uc3RyYWludE5vdFNhdGlzZmllZEVycm9yOlwiT3ZlcmNvbnN0cmFpbmVkRXJyb3JcIixUcmFja1N0YXJ0RXJyb3I6XCJOb3RSZWFkYWJsZUVycm9yXCIsTWVkaWFEZXZpY2VGYWlsZWREdWVUb1NodXRkb3duOlwiTm90QWxsb3dlZEVycm9yXCIsTWVkaWFEZXZpY2VLaWxsU3dpdGNoT246XCJOb3RBbGxvd2VkRXJyb3JcIixUYWJDYXB0dXJlRXJyb3I6XCJBYm9ydEVycm9yXCIsU2NyZWVuQ2FwdHVyZUVycm9yOlwiQWJvcnRFcnJvclwiLERldmljZUNhcHR1cmVFcnJvcjpcIkFib3J0RXJyb3JcIn1bZS5uYW1lXXx8ZS5uYW1lLG1lc3NhZ2U6ZS5tZXNzYWdlLGNvbnN0cmFpbnQ6ZS5jb25zdHJhaW50fHxlLmNvbnN0cmFpbnROYW1lLHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubmFtZSsodGhpcy5tZXNzYWdlJiZcIjogXCIpK3RoaXMubWVzc2FnZX19fTtpZih0LmdldFVzZXJNZWRpYT1mdW5jdGlvbihlLHIsbyl7YShlLGZ1bmN0aW9uKGUpe3Qud2Via2l0R2V0VXNlck1lZGlhKGUscixmdW5jdGlvbihlKXtvJiZvKGMoZSkpfSl9KX0uYmluZCh0KSx0Lm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEpe3ZhciBkPXQubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYS5iaW5kKHQubWVkaWFEZXZpY2VzKTt0Lm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWE9ZnVuY3Rpb24oZSl7cmV0dXJuIGEoZSxmdW5jdGlvbihlKXtyZXR1cm4gZChlKS50aGVuKGZ1bmN0aW9uKHIpe2lmKGUuYXVkaW8mJiFyLmdldEF1ZGlvVHJhY2tzKCkubGVuZ3RofHxlLnZpZGVvJiYhci5nZXRWaWRlb1RyYWNrcygpLmxlbmd0aCl0aHJvdyByLmdldFRyYWNrcygpLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5zdG9wKCl9KSxuZXcgRE9NRXhjZXB0aW9uKFwiXCIsXCJOb3RGb3VuZEVycm9yXCIpO3JldHVybiByfSxmdW5jdGlvbihlKXtyZXR1cm4gUHJvbWlzZS5yZWplY3QoYyhlKSl9KX0pfX19fVxufSx7XCIuLi91dGlscy5qc1wiOlwiaVN4Q1wifV0sXCJWSGE4XCI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpIHtcblwidXNlIHN0cmljdFwiO2Z1bmN0aW9uIGUoZSxpKXtlLm5hdmlnYXRvci5tZWRpYURldmljZXMmJlwiZ2V0RGlzcGxheU1lZGlhXCJpbiBlLm5hdmlnYXRvci5tZWRpYURldmljZXN8fGUubmF2aWdhdG9yLm1lZGlhRGV2aWNlcyYmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGk/ZS5uYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldERpc3BsYXlNZWRpYT1mdW5jdGlvbihhKXtyZXR1cm4gaShhKS50aGVuKGZ1bmN0aW9uKGkpe3ZhciB0PWEudmlkZW8mJmEudmlkZW8ud2lkdGgsbz1hLnZpZGVvJiZhLnZpZGVvLmhlaWdodCxkPWEudmlkZW8mJmEudmlkZW8uZnJhbWVSYXRlO3JldHVybiBhLnZpZGVvPXttYW5kYXRvcnk6e2Nocm9tZU1lZGlhU291cmNlOlwiZGVza3RvcFwiLGNocm9tZU1lZGlhU291cmNlSWQ6aSxtYXhGcmFtZVJhdGU6ZHx8M319LHQmJihhLnZpZGVvLm1hbmRhdG9yeS5tYXhXaWR0aD10KSxvJiYoYS52aWRlby5tYW5kYXRvcnkubWF4SGVpZ2h0PW8pLGUubmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoYSl9KX06Y29uc29sZS5lcnJvcihcInNoaW1HZXREaXNwbGF5TWVkaWE6IGdldFNvdXJjZUlkIGFyZ3VtZW50IGlzIG5vdCBhIGZ1bmN0aW9uXCIpKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLnNoaW1HZXREaXNwbGF5TWVkaWE9ZTtcbn0se31dLFwidUk1WFwiOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKSB7XG5cInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLnNoaW1NZWRpYVN0cmVhbT1hLGV4cG9ydHMuc2hpbU9uVHJhY2s9YyxleHBvcnRzLnNoaW1HZXRTZW5kZXJzV2l0aER0bWY9cCxleHBvcnRzLnNoaW1HZXRTdGF0cz1kLGV4cG9ydHMuc2hpbVNlbmRlclJlY2VpdmVyR2V0U3RhdHM9aCxleHBvcnRzLnNoaW1BZGRUcmFja1JlbW92ZVRyYWNrV2l0aE5hdGl2ZT1mLGV4cG9ydHMuc2hpbUFkZFRyYWNrUmVtb3ZlVHJhY2s9bSxleHBvcnRzLnNoaW1QZWVyQ29ubmVjdGlvbj11LGV4cG9ydHMuZml4TmVnb3RpYXRpb25OZWVkZWQ9bCxPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcInNoaW1HZXRVc2VyTWVkaWFcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdC5zaGltR2V0VXNlck1lZGlhfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwic2hpbUdldERpc3BsYXlNZWRpYVwiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiByLnNoaW1HZXREaXNwbGF5TWVkaWF9fSk7dmFyIGU9aShyZXF1aXJlKFwiLi4vdXRpbHMuanNcIikpLHQ9cmVxdWlyZShcIi4vZ2V0dXNlcm1lZGlhXCIpLHI9cmVxdWlyZShcIi4vZ2V0ZGlzcGxheW1lZGlhXCIpO2Z1bmN0aW9uIG4oKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBXZWFrTWFwKXJldHVybiBudWxsO3ZhciBlPW5ldyBXZWFrTWFwO3JldHVybiBuPWZ1bmN0aW9uKCl7cmV0dXJuIGV9LGV9ZnVuY3Rpb24gaShlKXtpZihlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7aWYobnVsbD09PWV8fFwib2JqZWN0XCIhPXR5cGVvZiBlJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlKXJldHVybntkZWZhdWx0OmV9O3ZhciB0PW4oKTtpZih0JiZ0LmhhcyhlKSlyZXR1cm4gdC5nZXQoZSk7dmFyIHI9e30saT1PYmplY3QuZGVmaW5lUHJvcGVydHkmJk9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7Zm9yKHZhciBvIGluIGUpaWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsbykpe3ZhciBzPWk/T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLG8pOm51bGw7cyYmKHMuZ2V0fHxzLnNldCk/T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsbyxzKTpyW29dPWVbb119cmV0dXJuIHIuZGVmYXVsdD1lLHQmJnQuc2V0KGUscikscn1mdW5jdGlvbiBvKGUsdCxyKXtyZXR1cm4gdCBpbiBlP09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHQse3ZhbHVlOnIsZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITB9KTplW3RdPXIsZX1mdW5jdGlvbiBzKGUpe3JldHVybihzPVwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmXCJzeW1ib2xcIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbihlKXtyZXR1cm4gdHlwZW9mIGV9OmZ1bmN0aW9uKGUpe3JldHVybiBlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJmUuY29uc3RydWN0b3I9PT1TeW1ib2wmJmUhPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIGV9KShlKX1mdW5jdGlvbiBhKGUpe2UuTWVkaWFTdHJlYW09ZS5NZWRpYVN0cmVhbXx8ZS53ZWJraXRNZWRpYVN0cmVhbX1mdW5jdGlvbiBjKHQpe2lmKFwib2JqZWN0XCIhPT1zKHQpfHwhdC5SVENQZWVyQ29ubmVjdGlvbnx8XCJvbnRyYWNrXCJpbiB0LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSllLndyYXBQZWVyQ29ubmVjdGlvbkV2ZW50KHQsXCJ0cmFja1wiLGZ1bmN0aW9uKGUpe3JldHVybiBlLnRyYW5zY2VpdmVyfHxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcInRyYW5zY2VpdmVyXCIse3ZhbHVlOntyZWNlaXZlcjplLnJlY2VpdmVyfX0pLGV9KTtlbHNle09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSxcIm9udHJhY2tcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29udHJhY2t9LHNldDpmdW5jdGlvbihlKXt0aGlzLl9vbnRyYWNrJiZ0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0cmFja1wiLHRoaXMuX29udHJhY2spLHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcInRyYWNrXCIsdGhpcy5fb250cmFjaz1lKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KTt2YXIgcj10LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5zZXRSZW1vdGVEZXNjcmlwdGlvbjt0LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5zZXRSZW1vdGVEZXNjcmlwdGlvbj1mdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIHRoaXMuX29udHJhY2twb2x5fHwodGhpcy5fb250cmFja3BvbHk9ZnVuY3Rpb24ocil7ci5zdHJlYW0uYWRkRXZlbnRMaXN0ZW5lcihcImFkZHRyYWNrXCIsZnVuY3Rpb24obil7dmFyIGk7aT10LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRSZWNlaXZlcnM/ZS5nZXRSZWNlaXZlcnMoKS5maW5kKGZ1bmN0aW9uKGUpe3JldHVybiBlLnRyYWNrJiZlLnRyYWNrLmlkPT09bi50cmFjay5pZH0pOnt0cmFjazpuLnRyYWNrfTt2YXIgbz1uZXcgRXZlbnQoXCJ0cmFja1wiKTtvLnRyYWNrPW4udHJhY2ssby5yZWNlaXZlcj1pLG8udHJhbnNjZWl2ZXI9e3JlY2VpdmVyOml9LG8uc3RyZWFtcz1bci5zdHJlYW1dLGUuZGlzcGF0Y2hFdmVudChvKX0pLHIuc3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2goZnVuY3Rpb24obil7dmFyIGk7aT10LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRSZWNlaXZlcnM/ZS5nZXRSZWNlaXZlcnMoKS5maW5kKGZ1bmN0aW9uKGUpe3JldHVybiBlLnRyYWNrJiZlLnRyYWNrLmlkPT09bi5pZH0pOnt0cmFjazpufTt2YXIgbz1uZXcgRXZlbnQoXCJ0cmFja1wiKTtvLnRyYWNrPW4sby5yZWNlaXZlcj1pLG8udHJhbnNjZWl2ZXI9e3JlY2VpdmVyOml9LG8uc3RyZWFtcz1bci5zdHJlYW1dLGUuZGlzcGF0Y2hFdmVudChvKX0pfSx0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJhZGRzdHJlYW1cIix0aGlzLl9vbnRyYWNrcG9seSkpLHIuYXBwbHkodGhpcyxhcmd1bWVudHMpfX19ZnVuY3Rpb24gcChlKXtpZihcIm9iamVjdFwiPT09cyhlKSYmZS5SVENQZWVyQ29ubmVjdGlvbiYmIShcImdldFNlbmRlcnNcImluIGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlKSYmXCJjcmVhdGVEVE1GU2VuZGVyXCJpbiBlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSl7dmFyIHQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm57dHJhY2s6dCxnZXQgZHRtZigpe3JldHVybiB2b2lkIDA9PT10aGlzLl9kdG1mJiYoXCJhdWRpb1wiPT09dC5raW5kP3RoaXMuX2R0bWY9ZS5jcmVhdGVEVE1GU2VuZGVyKHQpOnRoaXMuX2R0bWY9bnVsbCksdGhpcy5fZHRtZn0sX3BjOmV9fTtpZighZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U2VuZGVycyl7ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U2VuZGVycz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zZW5kZXJzPXRoaXMuX3NlbmRlcnN8fFtdLHRoaXMuX3NlbmRlcnMuc2xpY2UoKX07dmFyIHI9ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhY2s7ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhY2s9ZnVuY3Rpb24oZSxuKXt2YXIgaT1yLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gaXx8KGk9dCh0aGlzLGUpLHRoaXMuX3NlbmRlcnMucHVzaChpKSksaX07dmFyIG49ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlVHJhY2s7ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlVHJhY2s9ZnVuY3Rpb24oZSl7bi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIHQ9dGhpcy5fc2VuZGVycy5pbmRleE9mKGUpOy0xIT09dCYmdGhpcy5fc2VuZGVycy5zcGxpY2UodCwxKX19dmFyIGk9ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkU3RyZWFtO2UuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFN0cmVhbT1mdW5jdGlvbihlKXt2YXIgcj10aGlzO3RoaXMuX3NlbmRlcnM9dGhpcy5fc2VuZGVyc3x8W10saS5hcHBseSh0aGlzLFtlXSksZS5nZXRUcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3IuX3NlbmRlcnMucHVzaCh0KHIsZSkpfSl9O3ZhciBvPWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnJlbW92ZVN0cmVhbTtlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVTdHJlYW09ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0aGlzLl9zZW5kZXJzPXRoaXMuX3NlbmRlcnN8fFtdLG8uYXBwbHkodGhpcyxbZV0pLGUuZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgcj10Ll9zZW5kZXJzLmZpbmQoZnVuY3Rpb24odCl7cmV0dXJuIHQudHJhY2s9PT1lfSk7ciYmdC5fc2VuZGVycy5zcGxpY2UodC5fc2VuZGVycy5pbmRleE9mKHIpLDEpfSl9fWVsc2UgaWYoXCJvYmplY3RcIj09PXMoZSkmJmUuUlRDUGVlckNvbm5lY3Rpb24mJlwiZ2V0U2VuZGVyc1wiaW4gZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUmJlwiY3JlYXRlRFRNRlNlbmRlclwiaW4gZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUmJmUuUlRDUnRwU2VuZGVyJiYhKFwiZHRtZlwiaW4gZS5SVENSdHBTZW5kZXIucHJvdG90eXBlKSl7dmFyIGE9ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U2VuZGVycztlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTZW5kZXJzPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWEuYXBwbHkodGhpcyxbXSk7cmV0dXJuIHQuZm9yRWFjaChmdW5jdGlvbih0KXtyZXR1cm4gdC5fcGM9ZX0pLHR9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLlJUQ1J0cFNlbmRlci5wcm90b3R5cGUsXCJkdG1mXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB2b2lkIDA9PT10aGlzLl9kdG1mJiYoXCJhdWRpb1wiPT09dGhpcy50cmFjay5raW5kP3RoaXMuX2R0bWY9dGhpcy5fcGMuY3JlYXRlRFRNRlNlbmRlcih0aGlzLnRyYWNrKTp0aGlzLl9kdG1mPW51bGwpLHRoaXMuX2R0bWZ9fSl9fWZ1bmN0aW9uIGQoZSl7aWYoZS5SVENQZWVyQ29ubmVjdGlvbil7dmFyIHQ9ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U3RhdHM7ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U3RhdHM9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLFtyLG4saV09YXJndW1lbnRzO2lmKGFyZ3VtZW50cy5sZW5ndGg+MCYmXCJmdW5jdGlvblwiPT10eXBlb2YgcilyZXR1cm4gdC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aWYoMD09PXQubGVuZ3RoJiYoMD09PWFyZ3VtZW50cy5sZW5ndGh8fFwiZnVuY3Rpb25cIiE9dHlwZW9mIHIpKXJldHVybiB0LmFwcGx5KHRoaXMsW10pO3ZhciBvPWZ1bmN0aW9uKGUpe3ZhciB0PXt9O3JldHVybiBlLnJlc3VsdCgpLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHI9e2lkOmUuaWQsdGltZXN0YW1wOmUudGltZXN0YW1wLHR5cGU6e2xvY2FsY2FuZGlkYXRlOlwibG9jYWwtY2FuZGlkYXRlXCIscmVtb3RlY2FuZGlkYXRlOlwicmVtb3RlLWNhbmRpZGF0ZVwifVtlLnR5cGVdfHxlLnR5cGV9O2UubmFtZXMoKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3JbdF09ZS5zdGF0KHQpfSksdFtyLmlkXT1yfSksdH0scz1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IE1hcChPYmplY3Qua2V5cyhlKS5tYXAoZnVuY3Rpb24odCl7cmV0dXJuW3QsZVt0XV19KSl9O2lmKGFyZ3VtZW50cy5sZW5ndGg+PTIpe3JldHVybiB0LmFwcGx5KHRoaXMsW2Z1bmN0aW9uKGUpe24ocyhvKGUpKSl9LHJdKX1yZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocixuKXt0LmFwcGx5KGUsW2Z1bmN0aW9uKGUpe3IocyhvKGUpKSl9LG5dKX0pLnRoZW4obixpKX19fWZ1bmN0aW9uIGgodCl7aWYoXCJvYmplY3RcIj09PXModCkmJnQuUlRDUGVlckNvbm5lY3Rpb24mJnQuUlRDUnRwU2VuZGVyJiZ0LlJUQ1J0cFJlY2VpdmVyKXtpZighKFwiZ2V0U3RhdHNcImluIHQuUlRDUnRwU2VuZGVyLnByb3RvdHlwZSkpe3ZhciByPXQuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFNlbmRlcnM7ciYmKHQuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFNlbmRlcnM9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ci5hcHBseSh0aGlzLFtdKTtyZXR1cm4gdC5mb3JFYWNoKGZ1bmN0aW9uKHQpe3JldHVybiB0Ll9wYz1lfSksdH0pO3ZhciBuPXQuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYWNrO24mJih0LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRUcmFjaz1mdW5jdGlvbigpe3ZhciBlPW4uYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybiBlLl9wYz10aGlzLGV9KSx0LlJUQ1J0cFNlbmRlci5wcm90b3R5cGUuZ2V0U3RhdHM9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3JldHVybiB0aGlzLl9wYy5nZXRTdGF0cygpLnRoZW4oZnVuY3Rpb24ocil7cmV0dXJuIGUuZmlsdGVyU3RhdHMocix0LnRyYWNrLCEwKX0pfX1pZighKFwiZ2V0U3RhdHNcImluIHQuUlRDUnRwUmVjZWl2ZXIucHJvdG90eXBlKSl7dmFyIGk9dC5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0UmVjZWl2ZXJzO2kmJih0LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRSZWNlaXZlcnM9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9aS5hcHBseSh0aGlzLFtdKTtyZXR1cm4gdC5mb3JFYWNoKGZ1bmN0aW9uKHQpe3JldHVybiB0Ll9wYz1lfSksdH0pLGUud3JhcFBlZXJDb25uZWN0aW9uRXZlbnQodCxcInRyYWNrXCIsZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVjZWl2ZXIuX3BjPWUuc3JjRWxlbWVudCxlfSksdC5SVENSdHBSZWNlaXZlci5wcm90b3R5cGUuZ2V0U3RhdHM9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3JldHVybiB0aGlzLl9wYy5nZXRTdGF0cygpLnRoZW4oZnVuY3Rpb24ocil7cmV0dXJuIGUuZmlsdGVyU3RhdHMocix0LnRyYWNrLCExKX0pfX1pZihcImdldFN0YXRzXCJpbiB0LlJUQ1J0cFNlbmRlci5wcm90b3R5cGUmJlwiZ2V0U3RhdHNcImluIHQuUlRDUnRwUmVjZWl2ZXIucHJvdG90eXBlKXt2YXIgbz10LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTdGF0czt0LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTdGF0cz1mdW5jdGlvbigpe2lmKGFyZ3VtZW50cy5sZW5ndGg+MCYmYXJndW1lbnRzWzBdaW5zdGFuY2VvZiB0Lk1lZGlhU3RyZWFtVHJhY2spe3ZhciBlLHIsbixpPWFyZ3VtZW50c1swXTtyZXR1cm4gdGhpcy5nZXRTZW5kZXJzKCkuZm9yRWFjaChmdW5jdGlvbih0KXt0LnRyYWNrPT09aSYmKGU/bj0hMDplPXQpfSksdGhpcy5nZXRSZWNlaXZlcnMoKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3JldHVybiBlLnRyYWNrPT09aSYmKHI/bj0hMDpyPWUpLGUudHJhY2s9PT1pfSksbnx8ZSYmcj9Qcm9taXNlLnJlamVjdChuZXcgRE9NRXhjZXB0aW9uKFwiVGhlcmUgYXJlIG1vcmUgdGhhbiBvbmUgc2VuZGVyIG9yIHJlY2VpdmVyIGZvciB0aGUgdHJhY2suXCIsXCJJbnZhbGlkQWNjZXNzRXJyb3JcIikpOmU/ZS5nZXRTdGF0cygpOnI/ci5nZXRTdGF0cygpOlByb21pc2UucmVqZWN0KG5ldyBET01FeGNlcHRpb24oXCJUaGVyZSBpcyBubyBzZW5kZXIgb3IgcmVjZWl2ZXIgZm9yIHRoZSB0cmFjay5cIixcIkludmFsaWRBY2Nlc3NFcnJvclwiKSl9cmV0dXJuIG8uYXBwbHkodGhpcyxhcmd1bWVudHMpfX19fWZ1bmN0aW9uIGYoZSl7ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0TG9jYWxTdHJlYW1zPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gdGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtcz10aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zfHx7fSxPYmplY3Qua2V5cyh0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zKS5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIGUuX3NoaW1tZWRMb2NhbFN0cmVhbXNbdF1bMF19KX07dmFyIHQ9ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhY2s7ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhY2s9ZnVuY3Rpb24oZSxyKXtpZighcilyZXR1cm4gdC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtcz10aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zfHx7fTt2YXIgbj10LmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gdGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtc1tyLmlkXT8tMT09PXRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXNbci5pZF0uaW5kZXhPZihuKSYmdGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtc1tyLmlkXS5wdXNoKG4pOnRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXNbci5pZF09W3Isbl0sbn07dmFyIHI9ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkU3RyZWFtO2UuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFN0cmVhbT1mdW5jdGlvbihlKXt2YXIgdD10aGlzO3RoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXM9dGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtc3x8e30sZS5nZXRUcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2lmKHQuZ2V0U2VuZGVycygpLmZpbmQoZnVuY3Rpb24odCl7cmV0dXJuIHQudHJhY2s9PT1lfSkpdGhyb3cgbmV3IERPTUV4Y2VwdGlvbihcIlRyYWNrIGFscmVhZHkgZXhpc3RzLlwiLFwiSW52YWxpZEFjY2Vzc0Vycm9yXCIpfSk7dmFyIG49dGhpcy5nZXRTZW5kZXJzKCk7ci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIGk9dGhpcy5nZXRTZW5kZXJzKCkuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybi0xPT09bi5pbmRleE9mKGUpfSk7dGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtc1tlLmlkXT1bZV0uY29uY2F0KGkpfTt2YXIgbj1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVTdHJlYW07ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlU3RyZWFtPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zPXRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXN8fHt9LGRlbGV0ZSB0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zW2UuaWRdLG4uYXBwbHkodGhpcyxhcmd1bWVudHMpfTt2YXIgaT1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVUcmFjaztlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVUcmFjaz1mdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiB0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zPXRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXN8fHt9LGUmJk9iamVjdC5rZXlzKHRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXMpLmZvckVhY2goZnVuY3Rpb24ocil7dmFyIG49dC5fc2hpbW1lZExvY2FsU3RyZWFtc1tyXS5pbmRleE9mKGUpOy0xIT09biYmdC5fc2hpbW1lZExvY2FsU3RyZWFtc1tyXS5zcGxpY2UobiwxKSwxPT09dC5fc2hpbW1lZExvY2FsU3RyZWFtc1tyXS5sZW5ndGgmJmRlbGV0ZSB0Ll9zaGltbWVkTG9jYWxTdHJlYW1zW3JdfSksaS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fWZ1bmN0aW9uIG0oZSx0KXtpZihlLlJUQ1BlZXJDb25uZWN0aW9uKXtpZihlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRUcmFjayYmdC52ZXJzaW9uPj02NSlyZXR1cm4gZihlKTt2YXIgcj1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRMb2NhbFN0cmVhbXM7ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0TG9jYWxTdHJlYW1zPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXIuYXBwbHkodGhpcyk7cmV0dXJuIHRoaXMuX3JldmVyc2VTdHJlYW1zPXRoaXMuX3JldmVyc2VTdHJlYW1zfHx7fSx0Lm1hcChmdW5jdGlvbih0KXtyZXR1cm4gZS5fcmV2ZXJzZVN0cmVhbXNbdC5pZF19KX07dmFyIG49ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkU3RyZWFtO2UuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFN0cmVhbT1mdW5jdGlvbih0KXt2YXIgcj10aGlzO2lmKHRoaXMuX3N0cmVhbXM9dGhpcy5fc3RyZWFtc3x8e30sdGhpcy5fcmV2ZXJzZVN0cmVhbXM9dGhpcy5fcmV2ZXJzZVN0cmVhbXN8fHt9LHQuZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbihlKXtpZihyLmdldFNlbmRlcnMoKS5maW5kKGZ1bmN0aW9uKHQpe3JldHVybiB0LnRyYWNrPT09ZX0pKXRocm93IG5ldyBET01FeGNlcHRpb24oXCJUcmFjayBhbHJlYWR5IGV4aXN0cy5cIixcIkludmFsaWRBY2Nlc3NFcnJvclwiKX0pLCF0aGlzLl9yZXZlcnNlU3RyZWFtc1t0LmlkXSl7dmFyIGk9bmV3IGUuTWVkaWFTdHJlYW0odC5nZXRUcmFja3MoKSk7dGhpcy5fc3RyZWFtc1t0LmlkXT1pLHRoaXMuX3JldmVyc2VTdHJlYW1zW2kuaWRdPXQsdD1pfW4uYXBwbHkodGhpcyxbdF0pfTt2YXIgaT1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVTdHJlYW07ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlU3RyZWFtPWZ1bmN0aW9uKGUpe3RoaXMuX3N0cmVhbXM9dGhpcy5fc3RyZWFtc3x8e30sdGhpcy5fcmV2ZXJzZVN0cmVhbXM9dGhpcy5fcmV2ZXJzZVN0cmVhbXN8fHt9LGkuYXBwbHkodGhpcyxbdGhpcy5fc3RyZWFtc1tlLmlkXXx8ZV0pLGRlbGV0ZSB0aGlzLl9yZXZlcnNlU3RyZWFtc1t0aGlzLl9zdHJlYW1zW2UuaWRdP3RoaXMuX3N0cmVhbXNbZS5pZF0uaWQ6ZS5pZF0sZGVsZXRlIHRoaXMuX3N0cmVhbXNbZS5pZF19LGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYWNrPWZ1bmN0aW9uKHQscil7dmFyIG49dGhpcztpZihcImNsb3NlZFwiPT09dGhpcy5zaWduYWxpbmdTdGF0ZSl0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKFwiVGhlIFJUQ1BlZXJDb25uZWN0aW9uJ3Mgc2lnbmFsaW5nU3RhdGUgaXMgJ2Nsb3NlZCcuXCIsXCJJbnZhbGlkU3RhdGVFcnJvclwiKTt2YXIgaT1bXS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKTtpZigxIT09aS5sZW5ndGh8fCFpWzBdLmdldFRyYWNrcygpLmZpbmQoZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT10fSkpdGhyb3cgbmV3IERPTUV4Y2VwdGlvbihcIlRoZSBhZGFwdGVyLmpzIGFkZFRyYWNrIHBvbHlmaWxsIG9ubHkgc3VwcG9ydHMgYSBzaW5nbGUgIHN0cmVhbSB3aGljaCBpcyBhc3NvY2lhdGVkIHdpdGggdGhlIHNwZWNpZmllZCB0cmFjay5cIixcIk5vdFN1cHBvcnRlZEVycm9yXCIpO2lmKHRoaXMuZ2V0U2VuZGVycygpLmZpbmQoZnVuY3Rpb24oZSl7cmV0dXJuIGUudHJhY2s9PT10fSkpdGhyb3cgbmV3IERPTUV4Y2VwdGlvbihcIlRyYWNrIGFscmVhZHkgZXhpc3RzLlwiLFwiSW52YWxpZEFjY2Vzc0Vycm9yXCIpO3RoaXMuX3N0cmVhbXM9dGhpcy5fc3RyZWFtc3x8e30sdGhpcy5fcmV2ZXJzZVN0cmVhbXM9dGhpcy5fcmV2ZXJzZVN0cmVhbXN8fHt9O3ZhciBvPXRoaXMuX3N0cmVhbXNbci5pZF07aWYobylvLmFkZFRyYWNrKHQpLFByb21pc2UucmVzb2x2ZSgpLnRoZW4oZnVuY3Rpb24oKXtuLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwibmVnb3RpYXRpb25uZWVkZWRcIikpfSk7ZWxzZXt2YXIgcz1uZXcgZS5NZWRpYVN0cmVhbShbdF0pO3RoaXMuX3N0cmVhbXNbci5pZF09cyx0aGlzLl9yZXZlcnNlU3RyZWFtc1tzLmlkXT1yLHRoaXMuYWRkU3RyZWFtKHMpfXJldHVybiB0aGlzLmdldFNlbmRlcnMoKS5maW5kKGZ1bmN0aW9uKGUpe3JldHVybiBlLnRyYWNrPT09dH0pfSxbXCJjcmVhdGVPZmZlclwiLFwiY3JlYXRlQW5zd2VyXCJdLmZvckVhY2goZnVuY3Rpb24odCl7dmFyIHI9ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVbdF0sbj1vKHt9LHQsZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9YXJndW1lbnRzO3JldHVybiBhcmd1bWVudHMubGVuZ3RoJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhcmd1bWVudHNbMF0/ci5hcHBseSh0aGlzLFtmdW5jdGlvbihyKXt2YXIgbj1jKGUscik7dFswXS5hcHBseShudWxsLFtuXSl9LGZ1bmN0aW9uKGUpe3RbMV0mJnRbMV0uYXBwbHkobnVsbCxlKX0sYXJndW1lbnRzWzJdXSk6ci5hcHBseSh0aGlzLGFyZ3VtZW50cykudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gYyhlLHQpfSl9KTtlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVt0XT1uW3RdfSk7dmFyIHM9ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuc2V0TG9jYWxEZXNjcmlwdGlvbjtlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5zZXRMb2NhbERlc2NyaXB0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGgmJmFyZ3VtZW50c1swXS50eXBlPyhhcmd1bWVudHNbMF09KGU9dGhpcyx0PWFyZ3VtZW50c1swXSxyPXQuc2RwLE9iamVjdC5rZXlzKGUuX3JldmVyc2VTdHJlYW1zfHxbXSkuZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgbj1lLl9yZXZlcnNlU3RyZWFtc1t0XSxpPWUuX3N0cmVhbXNbbi5pZF07cj1yLnJlcGxhY2UobmV3IFJlZ0V4cChuLmlkLFwiZ1wiKSxpLmlkKX0pLG5ldyBSVENTZXNzaW9uRGVzY3JpcHRpb24oe3R5cGU6dC50eXBlLHNkcDpyfSkpLHMuYXBwbHkodGhpcyxhcmd1bWVudHMpKTpzLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgZSx0LHJ9O3ZhciBhPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUsXCJsb2NhbERlc2NyaXB0aW9uXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSxcImxvY2FsRGVzY3JpcHRpb25cIix7Z2V0OmZ1bmN0aW9uKCl7dmFyIGU9YS5nZXQuYXBwbHkodGhpcyk7cmV0dXJuXCJcIj09PWUudHlwZT9lOmModGhpcyxlKX19KSxlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVUcmFjaz1mdW5jdGlvbihlKXt2YXIgdCxyPXRoaXM7aWYoXCJjbG9zZWRcIj09PXRoaXMuc2lnbmFsaW5nU3RhdGUpdGhyb3cgbmV3IERPTUV4Y2VwdGlvbihcIlRoZSBSVENQZWVyQ29ubmVjdGlvbidzIHNpZ25hbGluZ1N0YXRlIGlzICdjbG9zZWQnLlwiLFwiSW52YWxpZFN0YXRlRXJyb3JcIik7aWYoIWUuX3BjKXRocm93IG5ldyBET01FeGNlcHRpb24oXCJBcmd1bWVudCAxIG9mIFJUQ1BlZXJDb25uZWN0aW9uLnJlbW92ZVRyYWNrIGRvZXMgbm90IGltcGxlbWVudCBpbnRlcmZhY2UgUlRDUnRwU2VuZGVyLlwiLFwiVHlwZUVycm9yXCIpO2lmKCEoZS5fcGM9PT10aGlzKSl0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKFwiU2VuZGVyIHdhcyBub3QgY3JlYXRlZCBieSB0aGlzIGNvbm5lY3Rpb24uXCIsXCJJbnZhbGlkQWNjZXNzRXJyb3JcIik7dGhpcy5fc3RyZWFtcz10aGlzLl9zdHJlYW1zfHx7fSxPYmplY3Qua2V5cyh0aGlzLl9zdHJlYW1zKS5mb3JFYWNoKGZ1bmN0aW9uKG4pe3IuX3N0cmVhbXNbbl0uZ2V0VHJhY2tzKCkuZmluZChmdW5jdGlvbih0KXtyZXR1cm4gZS50cmFjaz09PXR9KSYmKHQ9ci5fc3RyZWFtc1tuXSl9KSx0JiYoMT09PXQuZ2V0VHJhY2tzKCkubGVuZ3RoP3RoaXMucmVtb3ZlU3RyZWFtKHRoaXMuX3JldmVyc2VTdHJlYW1zW3QuaWRdKTp0LnJlbW92ZVRyYWNrKGUudHJhY2spLHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJuZWdvdGlhdGlvbm5lZWRlZFwiKSkpfX1mdW5jdGlvbiBjKGUsdCl7dmFyIHI9dC5zZHA7cmV0dXJuIE9iamVjdC5rZXlzKGUuX3JldmVyc2VTdHJlYW1zfHxbXSkuZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgbj1lLl9yZXZlcnNlU3RyZWFtc1t0XSxpPWUuX3N0cmVhbXNbbi5pZF07cj1yLnJlcGxhY2UobmV3IFJlZ0V4cChpLmlkLFwiZ1wiKSxuLmlkKX0pLG5ldyBSVENTZXNzaW9uRGVzY3JpcHRpb24oe3R5cGU6dC50eXBlLHNkcDpyfSl9fWZ1bmN0aW9uIHUoZSx0KXshZS5SVENQZWVyQ29ubmVjdGlvbiYmZS53ZWJraXRSVENQZWVyQ29ubmVjdGlvbiYmKGUuUlRDUGVlckNvbm5lY3Rpb249ZS53ZWJraXRSVENQZWVyQ29ubmVjdGlvbiksZS5SVENQZWVyQ29ubmVjdGlvbiYmdC52ZXJzaW9uPDUzJiZbXCJzZXRMb2NhbERlc2NyaXB0aW9uXCIsXCJzZXRSZW1vdGVEZXNjcmlwdGlvblwiLFwiYWRkSWNlQ2FuZGlkYXRlXCJdLmZvckVhY2goZnVuY3Rpb24odCl7dmFyIHI9ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVbdF0sbj1vKHt9LHQsZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzWzBdPW5ldyhcImFkZEljZUNhbmRpZGF0ZVwiPT09dD9lLlJUQ0ljZUNhbmRpZGF0ZTplLlJUQ1Nlc3Npb25EZXNjcmlwdGlvbikoYXJndW1lbnRzWzBdKSxyLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pO2UuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlW3RdPW5bdF19KX1mdW5jdGlvbiBsKHQscil7ZS53cmFwUGVlckNvbm5lY3Rpb25FdmVudCh0LFwibmVnb3RpYXRpb25uZWVkZWRcIixmdW5jdGlvbihlKXt2YXIgdD1lLnRhcmdldDtpZighKHIudmVyc2lvbjw3Mnx8dC5nZXRDb25maWd1cmF0aW9uJiZcInBsYW4tYlwiPT09dC5nZXRDb25maWd1cmF0aW9uKCkuc2RwU2VtYW50aWNzKXx8XCJzdGFibGVcIj09PXQuc2lnbmFsaW5nU3RhdGUpcmV0dXJuIGV9KX1cbn0se1wiLi4vdXRpbHMuanNcIjpcImlTeENcIixcIi4vZ2V0dXNlcm1lZGlhXCI6XCJzNlNOXCIsXCIuL2dldGRpc3BsYXltZWRpYVwiOlwiVkhhOFwifV0sXCJOWjFDXCI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpIHtcblwidXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGV4cG9ydHMuZmlsdGVySWNlU2VydmVycz1uO3ZhciByPXQocmVxdWlyZShcIi4uL3V0aWxzXCIpKTtmdW5jdGlvbiBlKCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgV2Vha01hcClyZXR1cm4gbnVsbDt2YXIgcj1uZXcgV2Vha01hcDtyZXR1cm4gZT1mdW5jdGlvbigpe3JldHVybiByfSxyfWZ1bmN0aW9uIHQocil7aWYociYmci5fX2VzTW9kdWxlKXJldHVybiByO2lmKG51bGw9PT1yfHxcIm9iamVjdFwiIT10eXBlb2YgciYmXCJmdW5jdGlvblwiIT10eXBlb2YgcilyZXR1cm57ZGVmYXVsdDpyfTt2YXIgdD1lKCk7aWYodCYmdC5oYXMocikpcmV0dXJuIHQuZ2V0KHIpO3ZhciBuPXt9LHU9T2JqZWN0LmRlZmluZVByb3BlcnR5JiZPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO2Zvcih2YXIgaSBpbiByKWlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChyLGkpKXt2YXIgZj11P09iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IocixpKTpudWxsO2YmJihmLmdldHx8Zi5zZXQpP09iamVjdC5kZWZpbmVQcm9wZXJ0eShuLGksZik6bltpXT1yW2ldfXJldHVybiBuLmRlZmF1bHQ9cix0JiZ0LnNldChyLG4pLG59ZnVuY3Rpb24gbihlLHQpe3ZhciBuPSExO3JldHVybihlPUpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZSkpKS5maWx0ZXIoZnVuY3Rpb24oZSl7aWYoZSYmKGUudXJsc3x8ZS51cmwpKXt2YXIgdD1lLnVybHN8fGUudXJsO2UudXJsJiYhZS51cmxzJiZyLmRlcHJlY2F0ZWQoXCJSVENJY2VTZXJ2ZXIudXJsXCIsXCJSVENJY2VTZXJ2ZXIudXJsc1wiKTt2YXIgdT1cInN0cmluZ1wiPT10eXBlb2YgdDtyZXR1cm4gdSYmKHQ9W3RdKSx0PXQuZmlsdGVyKGZ1bmN0aW9uKHIpe2lmKDA9PT1yLmluZGV4T2YoXCJzdHVuOlwiKSlyZXR1cm4hMTt2YXIgZT1yLnN0YXJ0c1dpdGgoXCJ0dXJuXCIpJiYhci5zdGFydHNXaXRoKFwidHVybjpbXCIpJiZyLmluY2x1ZGVzKFwidHJhbnNwb3J0PXVkcFwiKTtyZXR1cm4gZSYmIW4/KG49ITAsITApOmUmJiFufSksZGVsZXRlIGUudXJsLGUudXJscz11P3RbMF06dCwhIXQubGVuZ3RofX0pfVxufSx7XCIuLi91dGlsc1wiOlwiaVN4Q1wifV0sXCJZSHZoXCI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpIHtcblwidXNlIHN0cmljdFwiO3ZhciByPXtnZW5lcmF0ZUlkZW50aWZpZXI6ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsMTApfX07ci5sb2NhbENOYW1lPXIuZ2VuZXJhdGVJZGVudGlmaWVyKCksci5zcGxpdExpbmVzPWZ1bmN0aW9uKHIpe3JldHVybiByLnRyaW0oKS5zcGxpdChcIlxcblwiKS5tYXAoZnVuY3Rpb24ocil7cmV0dXJuIHIudHJpbSgpfSl9LHIuc3BsaXRTZWN0aW9ucz1mdW5jdGlvbihyKXtyZXR1cm4gci5zcGxpdChcIlxcbm09XCIpLm1hcChmdW5jdGlvbihyLGUpe3JldHVybihlPjA/XCJtPVwiK3I6cikudHJpbSgpK1wiXFxyXFxuXCJ9KX0sci5nZXREZXNjcmlwdGlvbj1mdW5jdGlvbihlKXt2YXIgdD1yLnNwbGl0U2VjdGlvbnMoZSk7cmV0dXJuIHQmJnRbMF19LHIuZ2V0TWVkaWFTZWN0aW9ucz1mdW5jdGlvbihlKXt2YXIgdD1yLnNwbGl0U2VjdGlvbnMoZSk7cmV0dXJuIHQuc2hpZnQoKSx0fSxyLm1hdGNoUHJlZml4PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHIuc3BsaXRMaW5lcyhlKS5maWx0ZXIoZnVuY3Rpb24ocil7cmV0dXJuIDA9PT1yLmluZGV4T2YodCl9KX0sci5wYXJzZUNhbmRpZGF0ZT1mdW5jdGlvbihyKXtmb3IodmFyIGUsdD17Zm91bmRhdGlvbjooZT0wPT09ci5pbmRleE9mKFwiYT1jYW5kaWRhdGU6XCIpP3Iuc3Vic3RyaW5nKDEyKS5zcGxpdChcIiBcIik6ci5zdWJzdHJpbmcoMTApLnNwbGl0KFwiIFwiKSlbMF0sY29tcG9uZW50OnBhcnNlSW50KGVbMV0sMTApLHByb3RvY29sOmVbMl0udG9Mb3dlckNhc2UoKSxwcmlvcml0eTpwYXJzZUludChlWzNdLDEwKSxpcDplWzRdLGFkZHJlc3M6ZVs0XSxwb3J0OnBhcnNlSW50KGVbNV0sMTApLHR5cGU6ZVs3XX0sYT04O2E8ZS5sZW5ndGg7YSs9Milzd2l0Y2goZVthXSl7Y2FzZVwicmFkZHJcIjp0LnJlbGF0ZWRBZGRyZXNzPWVbYSsxXTticmVhaztjYXNlXCJycG9ydFwiOnQucmVsYXRlZFBvcnQ9cGFyc2VJbnQoZVthKzFdLDEwKTticmVhaztjYXNlXCJ0Y3B0eXBlXCI6dC50Y3BUeXBlPWVbYSsxXTticmVhaztjYXNlXCJ1ZnJhZ1wiOnQudWZyYWc9ZVthKzFdLHQudXNlcm5hbWVGcmFnbWVudD1lW2ErMV07YnJlYWs7ZGVmYXVsdDp0W2VbYV1dPWVbYSsxXX1yZXR1cm4gdH0sci53cml0ZUNhbmRpZGF0ZT1mdW5jdGlvbihyKXt2YXIgZT1bXTtlLnB1c2goci5mb3VuZGF0aW9uKSxlLnB1c2goci5jb21wb25lbnQpLGUucHVzaChyLnByb3RvY29sLnRvVXBwZXJDYXNlKCkpLGUucHVzaChyLnByaW9yaXR5KSxlLnB1c2goci5hZGRyZXNzfHxyLmlwKSxlLnB1c2goci5wb3J0KTt2YXIgdD1yLnR5cGU7cmV0dXJuIGUucHVzaChcInR5cFwiKSxlLnB1c2godCksXCJob3N0XCIhPT10JiZyLnJlbGF0ZWRBZGRyZXNzJiZyLnJlbGF0ZWRQb3J0JiYoZS5wdXNoKFwicmFkZHJcIiksZS5wdXNoKHIucmVsYXRlZEFkZHJlc3MpLGUucHVzaChcInJwb3J0XCIpLGUucHVzaChyLnJlbGF0ZWRQb3J0KSksci50Y3BUeXBlJiZcInRjcFwiPT09ci5wcm90b2NvbC50b0xvd2VyQ2FzZSgpJiYoZS5wdXNoKFwidGNwdHlwZVwiKSxlLnB1c2goci50Y3BUeXBlKSksKHIudXNlcm5hbWVGcmFnbWVudHx8ci51ZnJhZykmJihlLnB1c2goXCJ1ZnJhZ1wiKSxlLnB1c2goci51c2VybmFtZUZyYWdtZW50fHxyLnVmcmFnKSksXCJjYW5kaWRhdGU6XCIrZS5qb2luKFwiIFwiKX0sci5wYXJzZUljZU9wdGlvbnM9ZnVuY3Rpb24ocil7cmV0dXJuIHIuc3Vic3RyKDE0KS5zcGxpdChcIiBcIil9LHIucGFyc2VSdHBNYXA9ZnVuY3Rpb24ocil7dmFyIGU9ci5zdWJzdHIoOSkuc3BsaXQoXCIgXCIpLHQ9e3BheWxvYWRUeXBlOnBhcnNlSW50KGUuc2hpZnQoKSwxMCl9O3JldHVybiBlPWVbMF0uc3BsaXQoXCIvXCIpLHQubmFtZT1lWzBdLHQuY2xvY2tSYXRlPXBhcnNlSW50KGVbMV0sMTApLHQuY2hhbm5lbHM9Mz09PWUubGVuZ3RoP3BhcnNlSW50KGVbMl0sMTApOjEsdC5udW1DaGFubmVscz10LmNoYW5uZWxzLHR9LHIud3JpdGVSdHBNYXA9ZnVuY3Rpb24ocil7dmFyIGU9ci5wYXlsb2FkVHlwZTt2b2lkIDAhPT1yLnByZWZlcnJlZFBheWxvYWRUeXBlJiYoZT1yLnByZWZlcnJlZFBheWxvYWRUeXBlKTt2YXIgdD1yLmNoYW5uZWxzfHxyLm51bUNoYW5uZWxzfHwxO3JldHVyblwiYT1ydHBtYXA6XCIrZStcIiBcIityLm5hbWUrXCIvXCIrci5jbG9ja1JhdGUrKDEhPT10P1wiL1wiK3Q6XCJcIikrXCJcXHJcXG5cIn0sci5wYXJzZUV4dG1hcD1mdW5jdGlvbihyKXt2YXIgZT1yLnN1YnN0cig5KS5zcGxpdChcIiBcIik7cmV0dXJue2lkOnBhcnNlSW50KGVbMF0sMTApLGRpcmVjdGlvbjplWzBdLmluZGV4T2YoXCIvXCIpPjA/ZVswXS5zcGxpdChcIi9cIilbMV06XCJzZW5kcmVjdlwiLHVyaTplWzFdfX0sci53cml0ZUV4dG1hcD1mdW5jdGlvbihyKXtyZXR1cm5cImE9ZXh0bWFwOlwiKyhyLmlkfHxyLnByZWZlcnJlZElkKSsoci5kaXJlY3Rpb24mJlwic2VuZHJlY3ZcIiE9PXIuZGlyZWN0aW9uP1wiL1wiK3IuZGlyZWN0aW9uOlwiXCIpK1wiIFwiK3IudXJpK1wiXFxyXFxuXCJ9LHIucGFyc2VGbXRwPWZ1bmN0aW9uKHIpe2Zvcih2YXIgZSx0PXt9LGE9ci5zdWJzdHIoci5pbmRleE9mKFwiIFwiKSsxKS5zcGxpdChcIjtcIiksbj0wO248YS5sZW5ndGg7bisrKXRbKGU9YVtuXS50cmltKCkuc3BsaXQoXCI9XCIpKVswXS50cmltKCldPWVbMV07cmV0dXJuIHR9LHIud3JpdGVGbXRwPWZ1bmN0aW9uKHIpe3ZhciBlPVwiXCIsdD1yLnBheWxvYWRUeXBlO2lmKHZvaWQgMCE9PXIucHJlZmVycmVkUGF5bG9hZFR5cGUmJih0PXIucHJlZmVycmVkUGF5bG9hZFR5cGUpLHIucGFyYW1ldGVycyYmT2JqZWN0LmtleXMoci5wYXJhbWV0ZXJzKS5sZW5ndGgpe3ZhciBhPVtdO09iamVjdC5rZXlzKHIucGFyYW1ldGVycykuZm9yRWFjaChmdW5jdGlvbihlKXtyLnBhcmFtZXRlcnNbZV0/YS5wdXNoKGUrXCI9XCIrci5wYXJhbWV0ZXJzW2VdKTphLnB1c2goZSl9KSxlKz1cImE9Zm10cDpcIit0K1wiIFwiK2Euam9pbihcIjtcIikrXCJcXHJcXG5cIn1yZXR1cm4gZX0sci5wYXJzZVJ0Y3BGYj1mdW5jdGlvbihyKXt2YXIgZT1yLnN1YnN0cihyLmluZGV4T2YoXCIgXCIpKzEpLnNwbGl0KFwiIFwiKTtyZXR1cm57dHlwZTplLnNoaWZ0KCkscGFyYW1ldGVyOmUuam9pbihcIiBcIil9fSxyLndyaXRlUnRjcEZiPWZ1bmN0aW9uKHIpe3ZhciBlPVwiXCIsdD1yLnBheWxvYWRUeXBlO3JldHVybiB2b2lkIDAhPT1yLnByZWZlcnJlZFBheWxvYWRUeXBlJiYodD1yLnByZWZlcnJlZFBheWxvYWRUeXBlKSxyLnJ0Y3BGZWVkYmFjayYmci5ydGNwRmVlZGJhY2subGVuZ3RoJiZyLnJ0Y3BGZWVkYmFjay5mb3JFYWNoKGZ1bmN0aW9uKHIpe2UrPVwiYT1ydGNwLWZiOlwiK3QrXCIgXCIrci50eXBlKyhyLnBhcmFtZXRlciYmci5wYXJhbWV0ZXIubGVuZ3RoP1wiIFwiK3IucGFyYW1ldGVyOlwiXCIpK1wiXFxyXFxuXCJ9KSxlfSxyLnBhcnNlU3NyY01lZGlhPWZ1bmN0aW9uKHIpe3ZhciBlPXIuaW5kZXhPZihcIiBcIiksdD17c3NyYzpwYXJzZUludChyLnN1YnN0cig3LGUtNyksMTApfSxhPXIuaW5kZXhPZihcIjpcIixlKTtyZXR1cm4gYT4tMT8odC5hdHRyaWJ1dGU9ci5zdWJzdHIoZSsxLGEtZS0xKSx0LnZhbHVlPXIuc3Vic3RyKGErMSkpOnQuYXR0cmlidXRlPXIuc3Vic3RyKGUrMSksdH0sci5wYXJzZVNzcmNHcm91cD1mdW5jdGlvbihyKXt2YXIgZT1yLnN1YnN0cigxMykuc3BsaXQoXCIgXCIpO3JldHVybntzZW1hbnRpY3M6ZS5zaGlmdCgpLHNzcmNzOmUubWFwKGZ1bmN0aW9uKHIpe3JldHVybiBwYXJzZUludChyLDEwKX0pfX0sci5nZXRNaWQ9ZnVuY3Rpb24oZSl7dmFyIHQ9ci5tYXRjaFByZWZpeChlLFwiYT1taWQ6XCIpWzBdO2lmKHQpcmV0dXJuIHQuc3Vic3RyKDYpfSxyLnBhcnNlRmluZ2VycHJpbnQ9ZnVuY3Rpb24ocil7dmFyIGU9ci5zdWJzdHIoMTQpLnNwbGl0KFwiIFwiKTtyZXR1cm57YWxnb3JpdGhtOmVbMF0udG9Mb3dlckNhc2UoKSx2YWx1ZTplWzFdfX0sci5nZXREdGxzUGFyYW1ldGVycz1mdW5jdGlvbihlLHQpe3JldHVybntyb2xlOlwiYXV0b1wiLGZpbmdlcnByaW50czpyLm1hdGNoUHJlZml4KGUrdCxcImE9ZmluZ2VycHJpbnQ6XCIpLm1hcChyLnBhcnNlRmluZ2VycHJpbnQpfX0sci53cml0ZUR0bHNQYXJhbWV0ZXJzPWZ1bmN0aW9uKHIsZSl7dmFyIHQ9XCJhPXNldHVwOlwiK2UrXCJcXHJcXG5cIjtyZXR1cm4gci5maW5nZXJwcmludHMuZm9yRWFjaChmdW5jdGlvbihyKXt0Kz1cImE9ZmluZ2VycHJpbnQ6XCIrci5hbGdvcml0aG0rXCIgXCIrci52YWx1ZStcIlxcclxcblwifSksdH0sci5wYXJzZUNyeXB0b0xpbmU9ZnVuY3Rpb24ocil7dmFyIGU9ci5zdWJzdHIoOSkuc3BsaXQoXCIgXCIpO3JldHVybnt0YWc6cGFyc2VJbnQoZVswXSwxMCksY3J5cHRvU3VpdGU6ZVsxXSxrZXlQYXJhbXM6ZVsyXSxzZXNzaW9uUGFyYW1zOmUuc2xpY2UoMyl9fSxyLndyaXRlQ3J5cHRvTGluZT1mdW5jdGlvbihlKXtyZXR1cm5cImE9Y3J5cHRvOlwiK2UudGFnK1wiIFwiK2UuY3J5cHRvU3VpdGUrXCIgXCIrKFwib2JqZWN0XCI9PXR5cGVvZiBlLmtleVBhcmFtcz9yLndyaXRlQ3J5cHRvS2V5UGFyYW1zKGUua2V5UGFyYW1zKTplLmtleVBhcmFtcykrKGUuc2Vzc2lvblBhcmFtcz9cIiBcIitlLnNlc3Npb25QYXJhbXMuam9pbihcIiBcIik6XCJcIikrXCJcXHJcXG5cIn0sci5wYXJzZUNyeXB0b0tleVBhcmFtcz1mdW5jdGlvbihyKXtpZigwIT09ci5pbmRleE9mKFwiaW5saW5lOlwiKSlyZXR1cm4gbnVsbDt2YXIgZT1yLnN1YnN0cig3KS5zcGxpdChcInxcIik7cmV0dXJue2tleU1ldGhvZDpcImlubGluZVwiLGtleVNhbHQ6ZVswXSxsaWZlVGltZTplWzFdLG1raVZhbHVlOmVbMl0/ZVsyXS5zcGxpdChcIjpcIilbMF06dm9pZCAwLG1raUxlbmd0aDplWzJdP2VbMl0uc3BsaXQoXCI6XCIpWzFdOnZvaWQgMH19LHIud3JpdGVDcnlwdG9LZXlQYXJhbXM9ZnVuY3Rpb24ocil7cmV0dXJuIHIua2V5TWV0aG9kK1wiOlwiK3Iua2V5U2FsdCsoci5saWZlVGltZT9cInxcIityLmxpZmVUaW1lOlwiXCIpKyhyLm1raVZhbHVlJiZyLm1raUxlbmd0aD9cInxcIityLm1raVZhbHVlK1wiOlwiK3IubWtpTGVuZ3RoOlwiXCIpfSxyLmdldENyeXB0b1BhcmFtZXRlcnM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gci5tYXRjaFByZWZpeChlK3QsXCJhPWNyeXB0bzpcIikubWFwKHIucGFyc2VDcnlwdG9MaW5lKX0sci5nZXRJY2VQYXJhbWV0ZXJzPWZ1bmN0aW9uKGUsdCl7dmFyIGE9ci5tYXRjaFByZWZpeChlK3QsXCJhPWljZS11ZnJhZzpcIilbMF0sbj1yLm1hdGNoUHJlZml4KGUrdCxcImE9aWNlLXB3ZDpcIilbMF07cmV0dXJuIGEmJm4/e3VzZXJuYW1lRnJhZ21lbnQ6YS5zdWJzdHIoMTIpLHBhc3N3b3JkOm4uc3Vic3RyKDEwKX06bnVsbH0sci53cml0ZUljZVBhcmFtZXRlcnM9ZnVuY3Rpb24ocil7cmV0dXJuXCJhPWljZS11ZnJhZzpcIityLnVzZXJuYW1lRnJhZ21lbnQrXCJcXHJcXG5hPWljZS1wd2Q6XCIrci5wYXNzd29yZCtcIlxcclxcblwifSxyLnBhcnNlUnRwUGFyYW1ldGVycz1mdW5jdGlvbihlKXtmb3IodmFyIHQ9e2NvZGVjczpbXSxoZWFkZXJFeHRlbnNpb25zOltdLGZlY01lY2hhbmlzbXM6W10scnRjcDpbXX0sYT1yLnNwbGl0TGluZXMoZSlbMF0uc3BsaXQoXCIgXCIpLG49MztuPGEubGVuZ3RoO24rKyl7dmFyIHM9YVtuXSxpPXIubWF0Y2hQcmVmaXgoZSxcImE9cnRwbWFwOlwiK3MrXCIgXCIpWzBdO2lmKGkpe3ZhciBwPXIucGFyc2VSdHBNYXAoaSksYz1yLm1hdGNoUHJlZml4KGUsXCJhPWZtdHA6XCIrcytcIiBcIik7c3dpdGNoKHAucGFyYW1ldGVycz1jLmxlbmd0aD9yLnBhcnNlRm10cChjWzBdKTp7fSxwLnJ0Y3BGZWVkYmFjaz1yLm1hdGNoUHJlZml4KGUsXCJhPXJ0Y3AtZmI6XCIrcytcIiBcIikubWFwKHIucGFyc2VSdGNwRmIpLHQuY29kZWNzLnB1c2gocCkscC5uYW1lLnRvVXBwZXJDYXNlKCkpe2Nhc2VcIlJFRFwiOmNhc2VcIlVMUEZFQ1wiOnQuZmVjTWVjaGFuaXNtcy5wdXNoKHAubmFtZS50b1VwcGVyQ2FzZSgpKX19fXJldHVybiByLm1hdGNoUHJlZml4KGUsXCJhPWV4dG1hcDpcIikuZm9yRWFjaChmdW5jdGlvbihlKXt0LmhlYWRlckV4dGVuc2lvbnMucHVzaChyLnBhcnNlRXh0bWFwKGUpKX0pLHR9LHIud3JpdGVSdHBEZXNjcmlwdGlvbj1mdW5jdGlvbihlLHQpe3ZhciBhPVwiXCI7YSs9XCJtPVwiK2UrXCIgXCIsYSs9dC5jb2RlY3MubGVuZ3RoPjA/XCI5XCI6XCIwXCIsYSs9XCIgVURQL1RMUy9SVFAvU0FWUEYgXCIsYSs9dC5jb2RlY3MubWFwKGZ1bmN0aW9uKHIpe3JldHVybiB2b2lkIDAhPT1yLnByZWZlcnJlZFBheWxvYWRUeXBlP3IucHJlZmVycmVkUGF5bG9hZFR5cGU6ci5wYXlsb2FkVHlwZX0pLmpvaW4oXCIgXCIpK1wiXFxyXFxuXCIsYSs9XCJjPUlOIElQNCAwLjAuMC4wXFxyXFxuXCIsYSs9XCJhPXJ0Y3A6OSBJTiBJUDQgMC4wLjAuMFxcclxcblwiLHQuY29kZWNzLmZvckVhY2goZnVuY3Rpb24oZSl7YSs9ci53cml0ZVJ0cE1hcChlKSxhKz1yLndyaXRlRm10cChlKSxhKz1yLndyaXRlUnRjcEZiKGUpfSk7dmFyIG49MDtyZXR1cm4gdC5jb2RlY3MuZm9yRWFjaChmdW5jdGlvbihyKXtyLm1heHB0aW1lPm4mJihuPXIubWF4cHRpbWUpfSksbj4wJiYoYSs9XCJhPW1heHB0aW1lOlwiK24rXCJcXHJcXG5cIiksYSs9XCJhPXJ0Y3AtbXV4XFxyXFxuXCIsdC5oZWFkZXJFeHRlbnNpb25zJiZ0LmhlYWRlckV4dGVuc2lvbnMuZm9yRWFjaChmdW5jdGlvbihlKXthKz1yLndyaXRlRXh0bWFwKGUpfSksYX0sci5wYXJzZVJ0cEVuY29kaW5nUGFyYW1ldGVycz1mdW5jdGlvbihlKXt2YXIgdCxhPVtdLG49ci5wYXJzZVJ0cFBhcmFtZXRlcnMoZSkscz0tMSE9PW4uZmVjTWVjaGFuaXNtcy5pbmRleE9mKFwiUkVEXCIpLGk9LTEhPT1uLmZlY01lY2hhbmlzbXMuaW5kZXhPZihcIlVMUEZFQ1wiKSxwPXIubWF0Y2hQcmVmaXgoZSxcImE9c3NyYzpcIikubWFwKGZ1bmN0aW9uKGUpe3JldHVybiByLnBhcnNlU3NyY01lZGlhKGUpfSkuZmlsdGVyKGZ1bmN0aW9uKHIpe3JldHVyblwiY25hbWVcIj09PXIuYXR0cmlidXRlfSksYz1wLmxlbmd0aD4wJiZwWzBdLnNzcmMsbz1yLm1hdGNoUHJlZml4KGUsXCJhPXNzcmMtZ3JvdXA6RklEXCIpLm1hcChmdW5jdGlvbihyKXtyZXR1cm4gci5zdWJzdHIoMTcpLnNwbGl0KFwiIFwiKS5tYXAoZnVuY3Rpb24ocil7cmV0dXJuIHBhcnNlSW50KHIsMTApfSl9KTtvLmxlbmd0aD4wJiZvWzBdLmxlbmd0aD4xJiZvWzBdWzBdPT09YyYmKHQ9b1swXVsxXSksbi5jb2RlY3MuZm9yRWFjaChmdW5jdGlvbihyKXtpZihcIlJUWFwiPT09ci5uYW1lLnRvVXBwZXJDYXNlKCkmJnIucGFyYW1ldGVycy5hcHQpe3ZhciBlPXtzc3JjOmMsY29kZWNQYXlsb2FkVHlwZTpwYXJzZUludChyLnBhcmFtZXRlcnMuYXB0LDEwKX07YyYmdCYmKGUucnR4PXtzc3JjOnR9KSxhLnB1c2goZSkscyYmKChlPUpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZSkpKS5mZWM9e3NzcmM6YyxtZWNoYW5pc206aT9cInJlZCt1bHBmZWNcIjpcInJlZFwifSxhLnB1c2goZSkpfX0pLDA9PT1hLmxlbmd0aCYmYyYmYS5wdXNoKHtzc3JjOmN9KTt2YXIgdT1yLm1hdGNoUHJlZml4KGUsXCJiPVwiKTtyZXR1cm4gdS5sZW5ndGgmJih1PTA9PT11WzBdLmluZGV4T2YoXCJiPVRJQVM6XCIpP3BhcnNlSW50KHVbMF0uc3Vic3RyKDcpLDEwKTowPT09dVswXS5pbmRleE9mKFwiYj1BUzpcIik/MWUzKnBhcnNlSW50KHVbMF0uc3Vic3RyKDUpLDEwKSouOTUtMTZlMzp2b2lkIDAsYS5mb3JFYWNoKGZ1bmN0aW9uKHIpe3IubWF4Qml0cmF0ZT11fSkpLGF9LHIucGFyc2VSdGNwUGFyYW1ldGVycz1mdW5jdGlvbihlKXt2YXIgdD17fSxhPXIubWF0Y2hQcmVmaXgoZSxcImE9c3NyYzpcIikubWFwKGZ1bmN0aW9uKGUpe3JldHVybiByLnBhcnNlU3NyY01lZGlhKGUpfSkuZmlsdGVyKGZ1bmN0aW9uKHIpe3JldHVyblwiY25hbWVcIj09PXIuYXR0cmlidXRlfSlbMF07YSYmKHQuY25hbWU9YS52YWx1ZSx0LnNzcmM9YS5zc3JjKTt2YXIgbj1yLm1hdGNoUHJlZml4KGUsXCJhPXJ0Y3AtcnNpemVcIik7dC5yZWR1Y2VkU2l6ZT1uLmxlbmd0aD4wLHQuY29tcG91bmQ9MD09PW4ubGVuZ3RoO3ZhciBzPXIubWF0Y2hQcmVmaXgoZSxcImE9cnRjcC1tdXhcIik7cmV0dXJuIHQubXV4PXMubGVuZ3RoPjAsdH0sci5wYXJzZU1zaWQ9ZnVuY3Rpb24oZSl7dmFyIHQsYT1yLm1hdGNoUHJlZml4KGUsXCJhPW1zaWQ6XCIpO2lmKDE9PT1hLmxlbmd0aClyZXR1cm57c3RyZWFtOih0PWFbMF0uc3Vic3RyKDcpLnNwbGl0KFwiIFwiKSlbMF0sdHJhY2s6dFsxXX07dmFyIG49ci5tYXRjaFByZWZpeChlLFwiYT1zc3JjOlwiKS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIHIucGFyc2VTc3JjTWVkaWEoZSl9KS5maWx0ZXIoZnVuY3Rpb24ocil7cmV0dXJuXCJtc2lkXCI9PT1yLmF0dHJpYnV0ZX0pO3JldHVybiBuLmxlbmd0aD4wP3tzdHJlYW06KHQ9blswXS52YWx1ZS5zcGxpdChcIiBcIikpWzBdLHRyYWNrOnRbMV19OnZvaWQgMH0sci5wYXJzZVNjdHBEZXNjcmlwdGlvbj1mdW5jdGlvbihlKXt2YXIgdCxhPXIucGFyc2VNTGluZShlKSxuPXIubWF0Y2hQcmVmaXgoZSxcImE9bWF4LW1lc3NhZ2Utc2l6ZTpcIik7bi5sZW5ndGg+MCYmKHQ9cGFyc2VJbnQoblswXS5zdWJzdHIoMTkpLDEwKSksaXNOYU4odCkmJih0PTY1NTM2KTt2YXIgcz1yLm1hdGNoUHJlZml4KGUsXCJhPXNjdHAtcG9ydDpcIik7aWYocy5sZW5ndGg+MClyZXR1cm57cG9ydDpwYXJzZUludChzWzBdLnN1YnN0cigxMiksMTApLHByb3RvY29sOmEuZm10LG1heE1lc3NhZ2VTaXplOnR9O2lmKHIubWF0Y2hQcmVmaXgoZSxcImE9c2N0cG1hcDpcIikubGVuZ3RoPjApe3ZhciBpPXIubWF0Y2hQcmVmaXgoZSxcImE9c2N0cG1hcDpcIilbMF0uc3Vic3RyKDEwKS5zcGxpdChcIiBcIik7cmV0dXJue3BvcnQ6cGFyc2VJbnQoaVswXSwxMCkscHJvdG9jb2w6aVsxXSxtYXhNZXNzYWdlU2l6ZTp0fX19LHIud3JpdGVTY3RwRGVzY3JpcHRpb249ZnVuY3Rpb24ocixlKXt2YXIgdD1bXTtyZXR1cm4gdD1cIkRUTFMvU0NUUFwiIT09ci5wcm90b2NvbD9bXCJtPVwiK3Iua2luZCtcIiA5IFwiK3IucHJvdG9jb2wrXCIgXCIrZS5wcm90b2NvbCtcIlxcclxcblwiLFwiYz1JTiBJUDQgMC4wLjAuMFxcclxcblwiLFwiYT1zY3RwLXBvcnQ6XCIrZS5wb3J0K1wiXFxyXFxuXCJdOltcIm09XCIrci5raW5kK1wiIDkgXCIrci5wcm90b2NvbCtcIiBcIitlLnBvcnQrXCJcXHJcXG5cIixcImM9SU4gSVA0IDAuMC4wLjBcXHJcXG5cIixcImE9c2N0cG1hcDpcIitlLnBvcnQrXCIgXCIrZS5wcm90b2NvbCtcIiA2NTUzNVxcclxcblwiXSx2b2lkIDAhPT1lLm1heE1lc3NhZ2VTaXplJiZ0LnB1c2goXCJhPW1heC1tZXNzYWdlLXNpemU6XCIrZS5tYXhNZXNzYWdlU2l6ZStcIlxcclxcblwiKSx0LmpvaW4oXCJcIil9LHIuZ2VuZXJhdGVTZXNzaW9uSWQ9ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5yYW5kb20oKS50b1N0cmluZygpLnN1YnN0cigyLDIxKX0sci53cml0ZVNlc3Npb25Cb2lsZXJwbGF0ZT1mdW5jdGlvbihlLHQsYSl7dmFyIG49dm9pZCAwIT09dD90OjI7cmV0dXJuXCJ2PTBcXHJcXG5vPVwiKyhhfHxcInRoaXNpc2FkYXB0ZXJvcnRjXCIpK1wiIFwiKyhlfHxyLmdlbmVyYXRlU2Vzc2lvbklkKCkpK1wiIFwiK24rXCIgSU4gSVA0IDEyNy4wLjAuMVxcclxcbnM9LVxcclxcbnQ9MCAwXFxyXFxuXCJ9LHIud3JpdGVNZWRpYVNlY3Rpb249ZnVuY3Rpb24oZSx0LGEsbil7dmFyIHM9ci53cml0ZVJ0cERlc2NyaXB0aW9uKGUua2luZCx0KTtpZihzKz1yLndyaXRlSWNlUGFyYW1ldGVycyhlLmljZUdhdGhlcmVyLmdldExvY2FsUGFyYW1ldGVycygpKSxzKz1yLndyaXRlRHRsc1BhcmFtZXRlcnMoZS5kdGxzVHJhbnNwb3J0LmdldExvY2FsUGFyYW1ldGVycygpLFwib2ZmZXJcIj09PWE/XCJhY3RwYXNzXCI6XCJhY3RpdmVcIikscys9XCJhPW1pZDpcIitlLm1pZCtcIlxcclxcblwiLGUuZGlyZWN0aW9uP3MrPVwiYT1cIitlLmRpcmVjdGlvbitcIlxcclxcblwiOmUucnRwU2VuZGVyJiZlLnJ0cFJlY2VpdmVyP3MrPVwiYT1zZW5kcmVjdlxcclxcblwiOmUucnRwU2VuZGVyP3MrPVwiYT1zZW5kb25seVxcclxcblwiOmUucnRwUmVjZWl2ZXI/cys9XCJhPXJlY3Zvbmx5XFxyXFxuXCI6cys9XCJhPWluYWN0aXZlXFxyXFxuXCIsZS5ydHBTZW5kZXIpe3ZhciBpPVwibXNpZDpcIituLmlkK1wiIFwiK2UucnRwU2VuZGVyLnRyYWNrLmlkK1wiXFxyXFxuXCI7cys9XCJhPVwiK2kscys9XCJhPXNzcmM6XCIrZS5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnNzcmMrXCIgXCIraSxlLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4JiYocys9XCJhPXNzcmM6XCIrZS5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eC5zc3JjK1wiIFwiK2kscys9XCJhPXNzcmMtZ3JvdXA6RklEIFwiK2Uuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5zc3JjK1wiIFwiK2Uuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHguc3NyYytcIlxcclxcblwiKX1yZXR1cm4gcys9XCJhPXNzcmM6XCIrZS5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnNzcmMrXCIgY25hbWU6XCIrci5sb2NhbENOYW1lK1wiXFxyXFxuXCIsZS5ydHBTZW5kZXImJmUuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHgmJihzKz1cImE9c3NyYzpcIitlLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4LnNzcmMrXCIgY25hbWU6XCIrci5sb2NhbENOYW1lK1wiXFxyXFxuXCIpLHN9LHIuZ2V0RGlyZWN0aW9uPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBhPXIuc3BsaXRMaW5lcyhlKSxuPTA7bjxhLmxlbmd0aDtuKyspc3dpdGNoKGFbbl0pe2Nhc2VcImE9c2VuZHJlY3ZcIjpjYXNlXCJhPXNlbmRvbmx5XCI6Y2FzZVwiYT1yZWN2b25seVwiOmNhc2VcImE9aW5hY3RpdmVcIjpyZXR1cm4gYVtuXS5zdWJzdHIoMil9cmV0dXJuIHQ/ci5nZXREaXJlY3Rpb24odCk6XCJzZW5kcmVjdlwifSxyLmdldEtpbmQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHIuc3BsaXRMaW5lcyhlKVswXS5zcGxpdChcIiBcIilbMF0uc3Vic3RyKDIpfSxyLmlzUmVqZWN0ZWQ9ZnVuY3Rpb24ocil7cmV0dXJuXCIwXCI9PT1yLnNwbGl0KFwiIFwiLDIpWzFdfSxyLnBhcnNlTUxpbmU9ZnVuY3Rpb24oZSl7dmFyIHQ9ci5zcGxpdExpbmVzKGUpWzBdLnN1YnN0cigyKS5zcGxpdChcIiBcIik7cmV0dXJue2tpbmQ6dFswXSxwb3J0OnBhcnNlSW50KHRbMV0sMTApLHByb3RvY29sOnRbMl0sZm10OnQuc2xpY2UoMykuam9pbihcIiBcIil9fSxyLnBhcnNlT0xpbmU9ZnVuY3Rpb24oZSl7dmFyIHQ9ci5tYXRjaFByZWZpeChlLFwibz1cIilbMF0uc3Vic3RyKDIpLnNwbGl0KFwiIFwiKTtyZXR1cm57dXNlcm5hbWU6dFswXSxzZXNzaW9uSWQ6dFsxXSxzZXNzaW9uVmVyc2lvbjpwYXJzZUludCh0WzJdLDEwKSxuZXRUeXBlOnRbM10sYWRkcmVzc1R5cGU6dFs0XSxhZGRyZXNzOnRbNV19fSxyLmlzVmFsaWRTRFA9ZnVuY3Rpb24oZSl7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIGV8fDA9PT1lLmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIHQ9ci5zcGxpdExpbmVzKGUpLGE9MDthPHQubGVuZ3RoO2ErKylpZih0W2FdLmxlbmd0aDwyfHxcIj1cIiE9PXRbYV0uY2hhckF0KDEpKXJldHVybiExO3JldHVybiEwfSxcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlJiYobW9kdWxlLmV4cG9ydHM9cik7XG59LHt9XSxcIk5KMnVcIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cykge1xuXCJ1c2Ugc3RyaWN0XCI7dmFyIGU9cmVxdWlyZShcInNkcFwiKTtmdW5jdGlvbiB0KGUpe3JldHVybntpbmJvdW5kcnRwOlwiaW5ib3VuZC1ydHBcIixvdXRib3VuZHJ0cDpcIm91dGJvdW5kLXJ0cFwiLGNhbmRpZGF0ZXBhaXI6XCJjYW5kaWRhdGUtcGFpclwiLGxvY2FsY2FuZGlkYXRlOlwibG9jYWwtY2FuZGlkYXRlXCIscmVtb3RlY2FuZGlkYXRlOlwicmVtb3RlLWNhbmRpZGF0ZVwifVtlLnR5cGVdfHxlLnR5cGV9ZnVuY3Rpb24gcih0LHIsbixhLGkpe3ZhciBzPWUud3JpdGVSdHBEZXNjcmlwdGlvbih0LmtpbmQscik7aWYocys9ZS53cml0ZUljZVBhcmFtZXRlcnModC5pY2VHYXRoZXJlci5nZXRMb2NhbFBhcmFtZXRlcnMoKSkscys9ZS53cml0ZUR0bHNQYXJhbWV0ZXJzKHQuZHRsc1RyYW5zcG9ydC5nZXRMb2NhbFBhcmFtZXRlcnMoKSxcIm9mZmVyXCI9PT1uP1wiYWN0cGFzc1wiOml8fFwiYWN0aXZlXCIpLHMrPVwiYT1taWQ6XCIrdC5taWQrXCJcXHJcXG5cIix0LnJ0cFNlbmRlciYmdC5ydHBSZWNlaXZlcj9zKz1cImE9c2VuZHJlY3ZcXHJcXG5cIjp0LnJ0cFNlbmRlcj9zKz1cImE9c2VuZG9ubHlcXHJcXG5cIjp0LnJ0cFJlY2VpdmVyP3MrPVwiYT1yZWN2b25seVxcclxcblwiOnMrPVwiYT1pbmFjdGl2ZVxcclxcblwiLHQucnRwU2VuZGVyKXt2YXIgbz10LnJ0cFNlbmRlci5faW5pdGlhbFRyYWNrSWR8fHQucnRwU2VuZGVyLnRyYWNrLmlkO3QucnRwU2VuZGVyLl9pbml0aWFsVHJhY2tJZD1vO3ZhciBjPVwibXNpZDpcIisoYT9hLmlkOlwiLVwiKStcIiBcIitvK1wiXFxyXFxuXCI7cys9XCJhPVwiK2Mscys9XCJhPXNzcmM6XCIrdC5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnNzcmMrXCIgXCIrYyx0LnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4JiYocys9XCJhPXNzcmM6XCIrdC5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eC5zc3JjK1wiIFwiK2Mscys9XCJhPXNzcmMtZ3JvdXA6RklEIFwiK3Quc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5zc3JjK1wiIFwiK3Quc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHguc3NyYytcIlxcclxcblwiKX1yZXR1cm4gcys9XCJhPXNzcmM6XCIrdC5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnNzcmMrXCIgY25hbWU6XCIrZS5sb2NhbENOYW1lK1wiXFxyXFxuXCIsdC5ydHBTZW5kZXImJnQuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHgmJihzKz1cImE9c3NyYzpcIit0LnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4LnNzcmMrXCIgY25hbWU6XCIrZS5sb2NhbENOYW1lK1wiXFxyXFxuXCIpLHN9ZnVuY3Rpb24gbihlLHQpe3ZhciByPSExO3JldHVybihlPUpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZSkpKS5maWx0ZXIoZnVuY3Rpb24oZSl7aWYoZSYmKGUudXJsc3x8ZS51cmwpKXt2YXIgbj1lLnVybHN8fGUudXJsO2UudXJsJiYhZS51cmxzJiZjb25zb2xlLndhcm4oXCJSVENJY2VTZXJ2ZXIudXJsIGlzIGRlcHJlY2F0ZWQhIFVzZSB1cmxzIGluc3RlYWQuXCIpO3ZhciBhPVwic3RyaW5nXCI9PXR5cGVvZiBuO3JldHVybiBhJiYobj1bbl0pLG49bi5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIDA9PT1lLmluZGV4T2YoXCJ0dXJuOlwiKSYmLTEhPT1lLmluZGV4T2YoXCJ0cmFuc3BvcnQ9dWRwXCIpJiYtMT09PWUuaW5kZXhPZihcInR1cm46W1wiKSYmIXI/KHI9ITAsITApOjA9PT1lLmluZGV4T2YoXCJzdHVuOlwiKSYmdD49MTQzOTMmJi0xPT09ZS5pbmRleE9mKFwiP3RyYW5zcG9ydD11ZHBcIil9KSxkZWxldGUgZS51cmwsZS51cmxzPWE/blswXTpuLCEhbi5sZW5ndGh9fSl9ZnVuY3Rpb24gYShlLHQpe3ZhciByPXtjb2RlY3M6W10saGVhZGVyRXh0ZW5zaW9uczpbXSxmZWNNZWNoYW5pc21zOltdfSxuPWZ1bmN0aW9uKGUsdCl7ZT1wYXJzZUludChlLDEwKTtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKylpZih0W3JdLnBheWxvYWRUeXBlPT09ZXx8dFtyXS5wcmVmZXJyZWRQYXlsb2FkVHlwZT09PWUpcmV0dXJuIHRbcl19LGE9ZnVuY3Rpb24oZSx0LHIsYSl7dmFyIGk9bihlLnBhcmFtZXRlcnMuYXB0LHIpLHM9bih0LnBhcmFtZXRlcnMuYXB0LGEpO3JldHVybiBpJiZzJiZpLm5hbWUudG9Mb3dlckNhc2UoKT09PXMubmFtZS50b0xvd2VyQ2FzZSgpfTtyZXR1cm4gZS5jb2RlY3MuZm9yRWFjaChmdW5jdGlvbihuKXtmb3IodmFyIGk9MDtpPHQuY29kZWNzLmxlbmd0aDtpKyspe3ZhciBzPXQuY29kZWNzW2ldO2lmKG4ubmFtZS50b0xvd2VyQ2FzZSgpPT09cy5uYW1lLnRvTG93ZXJDYXNlKCkmJm4uY2xvY2tSYXRlPT09cy5jbG9ja1JhdGUpe2lmKFwicnR4XCI9PT1uLm5hbWUudG9Mb3dlckNhc2UoKSYmbi5wYXJhbWV0ZXJzJiZzLnBhcmFtZXRlcnMuYXB0JiYhYShuLHMsZS5jb2RlY3MsdC5jb2RlY3MpKWNvbnRpbnVlOyhzPUpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocykpKS5udW1DaGFubmVscz1NYXRoLm1pbihuLm51bUNoYW5uZWxzLHMubnVtQ2hhbm5lbHMpLHIuY29kZWNzLnB1c2gocykscy5ydGNwRmVlZGJhY2s9cy5ydGNwRmVlZGJhY2suZmlsdGVyKGZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wO3Q8bi5ydGNwRmVlZGJhY2subGVuZ3RoO3QrKylpZihuLnJ0Y3BGZWVkYmFja1t0XS50eXBlPT09ZS50eXBlJiZuLnJ0Y3BGZWVkYmFja1t0XS5wYXJhbWV0ZXI9PT1lLnBhcmFtZXRlcilyZXR1cm4hMDtyZXR1cm4hMX0pO2JyZWFrfX19KSxlLmhlYWRlckV4dGVuc2lvbnMuZm9yRWFjaChmdW5jdGlvbihlKXtmb3IodmFyIG49MDtuPHQuaGVhZGVyRXh0ZW5zaW9ucy5sZW5ndGg7bisrKXt2YXIgYT10LmhlYWRlckV4dGVuc2lvbnNbbl07aWYoZS51cmk9PT1hLnVyaSl7ci5oZWFkZXJFeHRlbnNpb25zLnB1c2goYSk7YnJlYWt9fX0pLHJ9ZnVuY3Rpb24gaShlLHQscil7cmV0dXJuLTEhPT17b2ZmZXI6e3NldExvY2FsRGVzY3JpcHRpb246W1wic3RhYmxlXCIsXCJoYXZlLWxvY2FsLW9mZmVyXCJdLHNldFJlbW90ZURlc2NyaXB0aW9uOltcInN0YWJsZVwiLFwiaGF2ZS1yZW1vdGUtb2ZmZXJcIl19LGFuc3dlcjp7c2V0TG9jYWxEZXNjcmlwdGlvbjpbXCJoYXZlLXJlbW90ZS1vZmZlclwiLFwiaGF2ZS1sb2NhbC1wcmFuc3dlclwiXSxzZXRSZW1vdGVEZXNjcmlwdGlvbjpbXCJoYXZlLWxvY2FsLW9mZmVyXCIsXCJoYXZlLXJlbW90ZS1wcmFuc3dlclwiXX19W3RdW2VdLmluZGV4T2Yocil9ZnVuY3Rpb24gcyhlLHQpe3ZhciByPWUuZ2V0UmVtb3RlQ2FuZGlkYXRlcygpLmZpbmQoZnVuY3Rpb24oZSl7cmV0dXJuIHQuZm91bmRhdGlvbj09PWUuZm91bmRhdGlvbiYmdC5pcD09PWUuaXAmJnQucG9ydD09PWUucG9ydCYmdC5wcmlvcml0eT09PWUucHJpb3JpdHkmJnQucHJvdG9jb2w9PT1lLnByb3RvY29sJiZ0LnR5cGU9PT1lLnR5cGV9KTtyZXR1cm4gcnx8ZS5hZGRSZW1vdGVDYW5kaWRhdGUodCksIXJ9ZnVuY3Rpb24gbyhlLHQpe3ZhciByPW5ldyBFcnJvcih0KTtyZXR1cm4gci5uYW1lPWUsci5jb2RlPXtOb3RTdXBwb3J0ZWRFcnJvcjo5LEludmFsaWRTdGF0ZUVycm9yOjExLEludmFsaWRBY2Nlc3NFcnJvcjoxNSxUeXBlRXJyb3I6dm9pZCAwLE9wZXJhdGlvbkVycm9yOnZvaWQgMH1bZV0scn1tb2R1bGUuZXhwb3J0cz1mdW5jdGlvbihjLGQpe2Z1bmN0aW9uIHAoZSx0KXt0LmFkZFRyYWNrKGUpLHQuZGlzcGF0Y2hFdmVudChuZXcgYy5NZWRpYVN0cmVhbVRyYWNrRXZlbnQoXCJhZGR0cmFja1wiLHt0cmFjazplfSkpfWZ1bmN0aW9uIGwoZSx0LHIsbil7dmFyIGE9bmV3IEV2ZW50KFwidHJhY2tcIik7YS50cmFjaz10LGEucmVjZWl2ZXI9cixhLnRyYW5zY2VpdmVyPXtyZWNlaXZlcjpyfSxhLnN0cmVhbXM9bixjLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtlLl9kaXNwYXRjaEV2ZW50KFwidHJhY2tcIixhKX0pfXZhciBmPWZ1bmN0aW9uKHQpe3ZhciByPXRoaXMsYT1kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7aWYoW1wiYWRkRXZlbnRMaXN0ZW5lclwiLFwicmVtb3ZlRXZlbnRMaXN0ZW5lclwiLFwiZGlzcGF0Y2hFdmVudFwiXS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3JbZV09YVtlXS5iaW5kKGEpfSksdGhpcy5jYW5Ucmlja2xlSWNlQ2FuZGlkYXRlcz1udWxsLHRoaXMubmVlZE5lZ290aWF0aW9uPSExLHRoaXMubG9jYWxTdHJlYW1zPVtdLHRoaXMucmVtb3RlU3RyZWFtcz1bXSx0aGlzLl9sb2NhbERlc2NyaXB0aW9uPW51bGwsdGhpcy5fcmVtb3RlRGVzY3JpcHRpb249bnVsbCx0aGlzLnNpZ25hbGluZ1N0YXRlPVwic3RhYmxlXCIsdGhpcy5pY2VDb25uZWN0aW9uU3RhdGU9XCJuZXdcIix0aGlzLmNvbm5lY3Rpb25TdGF0ZT1cIm5ld1wiLHRoaXMuaWNlR2F0aGVyaW5nU3RhdGU9XCJuZXdcIix0PUpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodHx8e30pKSx0aGlzLnVzaW5nQnVuZGxlPVwibWF4LWJ1bmRsZVwiPT09dC5idW5kbGVQb2xpY3ksXCJuZWdvdGlhdGVcIj09PXQucnRjcE11eFBvbGljeSl0aHJvdyBvKFwiTm90U3VwcG9ydGVkRXJyb3JcIixcInJ0Y3BNdXhQb2xpY3kgJ25lZ290aWF0ZScgaXMgbm90IHN1cHBvcnRlZFwiKTtzd2l0Y2godC5ydGNwTXV4UG9saWN5fHwodC5ydGNwTXV4UG9saWN5PVwicmVxdWlyZVwiKSx0LmljZVRyYW5zcG9ydFBvbGljeSl7Y2FzZVwiYWxsXCI6Y2FzZVwicmVsYXlcIjpicmVhaztkZWZhdWx0OnQuaWNlVHJhbnNwb3J0UG9saWN5PVwiYWxsXCJ9c3dpdGNoKHQuYnVuZGxlUG9saWN5KXtjYXNlXCJiYWxhbmNlZFwiOmNhc2VcIm1heC1jb21wYXRcIjpjYXNlXCJtYXgtYnVuZGxlXCI6YnJlYWs7ZGVmYXVsdDp0LmJ1bmRsZVBvbGljeT1cImJhbGFuY2VkXCJ9aWYodC5pY2VTZXJ2ZXJzPW4odC5pY2VTZXJ2ZXJzfHxbXSxkKSx0aGlzLl9pY2VHYXRoZXJlcnM9W10sdC5pY2VDYW5kaWRhdGVQb29sU2l6ZSlmb3IodmFyIGk9dC5pY2VDYW5kaWRhdGVQb29sU2l6ZTtpPjA7aS0tKXRoaXMuX2ljZUdhdGhlcmVycy5wdXNoKG5ldyBjLlJUQ0ljZUdhdGhlcmVyKHtpY2VTZXJ2ZXJzOnQuaWNlU2VydmVycyxnYXRoZXJQb2xpY3k6dC5pY2VUcmFuc3BvcnRQb2xpY3l9KSk7ZWxzZSB0LmljZUNhbmRpZGF0ZVBvb2xTaXplPTA7dGhpcy5fY29uZmlnPXQsdGhpcy50cmFuc2NlaXZlcnM9W10sdGhpcy5fc2RwU2Vzc2lvbklkPWUuZ2VuZXJhdGVTZXNzaW9uSWQoKSx0aGlzLl9zZHBTZXNzaW9uVmVyc2lvbj0wLHRoaXMuX2R0bHNSb2xlPXZvaWQgMCx0aGlzLl9pc0Nsb3NlZD0hMX07T2JqZWN0LmRlZmluZVByb3BlcnR5KGYucHJvdG90eXBlLFwibG9jYWxEZXNjcmlwdGlvblwiLHtjb25maWd1cmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xvY2FsRGVzY3JpcHRpb259fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGYucHJvdG90eXBlLFwicmVtb3RlRGVzY3JpcHRpb25cIix7Y29uZmlndXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZW1vdGVEZXNjcmlwdGlvbn19KSxmLnByb3RvdHlwZS5vbmljZWNhbmRpZGF0ZT1udWxsLGYucHJvdG90eXBlLm9uYWRkc3RyZWFtPW51bGwsZi5wcm90b3R5cGUub250cmFjaz1udWxsLGYucHJvdG90eXBlLm9ucmVtb3Zlc3RyZWFtPW51bGwsZi5wcm90b3R5cGUub25zaWduYWxpbmdzdGF0ZWNoYW5nZT1udWxsLGYucHJvdG90eXBlLm9uaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlPW51bGwsZi5wcm90b3R5cGUub25jb25uZWN0aW9uc3RhdGVjaGFuZ2U9bnVsbCxmLnByb3RvdHlwZS5vbmljZWdhdGhlcmluZ3N0YXRlY2hhbmdlPW51bGwsZi5wcm90b3R5cGUub25uZWdvdGlhdGlvbm5lZWRlZD1udWxsLGYucHJvdG90eXBlLm9uZGF0YWNoYW5uZWw9bnVsbCxmLnByb3RvdHlwZS5fZGlzcGF0Y2hFdmVudD1mdW5jdGlvbihlLHQpe3RoaXMuX2lzQ2xvc2VkfHwodGhpcy5kaXNwYXRjaEV2ZW50KHQpLFwiZnVuY3Rpb25cIj09dHlwZW9mIHRoaXNbXCJvblwiK2VdJiZ0aGlzW1wib25cIitlXSh0KSl9LGYucHJvdG90eXBlLl9lbWl0R2F0aGVyaW5nU3RhdGVDaGFuZ2U9ZnVuY3Rpb24oKXt2YXIgZT1uZXcgRXZlbnQoXCJpY2VnYXRoZXJpbmdzdGF0ZWNoYW5nZVwiKTt0aGlzLl9kaXNwYXRjaEV2ZW50KFwiaWNlZ2F0aGVyaW5nc3RhdGVjaGFuZ2VcIixlKX0sZi5wcm90b3R5cGUuZ2V0Q29uZmlndXJhdGlvbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb25maWd9LGYucHJvdG90eXBlLmdldExvY2FsU3RyZWFtcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmxvY2FsU3RyZWFtc30sZi5wcm90b3R5cGUuZ2V0UmVtb3RlU3RyZWFtcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnJlbW90ZVN0cmVhbXN9LGYucHJvdG90eXBlLl9jcmVhdGVUcmFuc2NlaXZlcj1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMudHJhbnNjZWl2ZXJzLmxlbmd0aD4wLG49e3RyYWNrOm51bGwsaWNlR2F0aGVyZXI6bnVsbCxpY2VUcmFuc3BvcnQ6bnVsbCxkdGxzVHJhbnNwb3J0Om51bGwsbG9jYWxDYXBhYmlsaXRpZXM6bnVsbCxyZW1vdGVDYXBhYmlsaXRpZXM6bnVsbCxydHBTZW5kZXI6bnVsbCxydHBSZWNlaXZlcjpudWxsLGtpbmQ6ZSxtaWQ6bnVsbCxzZW5kRW5jb2RpbmdQYXJhbWV0ZXJzOm51bGwscmVjdkVuY29kaW5nUGFyYW1ldGVyczpudWxsLHN0cmVhbTpudWxsLGFzc29jaWF0ZWRSZW1vdGVNZWRpYVN0cmVhbXM6W10sd2FudFJlY2VpdmU6ITB9O2lmKHRoaXMudXNpbmdCdW5kbGUmJnIpbi5pY2VUcmFuc3BvcnQ9dGhpcy50cmFuc2NlaXZlcnNbMF0uaWNlVHJhbnNwb3J0LG4uZHRsc1RyYW5zcG9ydD10aGlzLnRyYW5zY2VpdmVyc1swXS5kdGxzVHJhbnNwb3J0O2Vsc2V7dmFyIGE9dGhpcy5fY3JlYXRlSWNlQW5kRHRsc1RyYW5zcG9ydHMoKTtuLmljZVRyYW5zcG9ydD1hLmljZVRyYW5zcG9ydCxuLmR0bHNUcmFuc3BvcnQ9YS5kdGxzVHJhbnNwb3J0fXJldHVybiB0fHx0aGlzLnRyYW5zY2VpdmVycy5wdXNoKG4pLG59LGYucHJvdG90eXBlLmFkZFRyYWNrPWZ1bmN0aW9uKGUsdCl7aWYodGhpcy5faXNDbG9zZWQpdGhyb3cgbyhcIkludmFsaWRTdGF0ZUVycm9yXCIsXCJBdHRlbXB0ZWQgdG8gY2FsbCBhZGRUcmFjayBvbiBhIGNsb3NlZCBwZWVyY29ubmVjdGlvbi5cIik7dmFyIHI7aWYodGhpcy50cmFuc2NlaXZlcnMuZmluZChmdW5jdGlvbih0KXtyZXR1cm4gdC50cmFjaz09PWV9KSl0aHJvdyBvKFwiSW52YWxpZEFjY2Vzc0Vycm9yXCIsXCJUcmFjayBhbHJlYWR5IGV4aXN0cy5cIik7Zm9yKHZhciBuPTA7bjx0aGlzLnRyYW5zY2VpdmVycy5sZW5ndGg7bisrKXRoaXMudHJhbnNjZWl2ZXJzW25dLnRyYWNrfHx0aGlzLnRyYW5zY2VpdmVyc1tuXS5raW5kIT09ZS5raW5kfHwocj10aGlzLnRyYW5zY2VpdmVyc1tuXSk7cmV0dXJuIHJ8fChyPXRoaXMuX2NyZWF0ZVRyYW5zY2VpdmVyKGUua2luZCkpLHRoaXMuX21heWJlRmlyZU5lZ290aWF0aW9uTmVlZGVkKCksLTE9PT10aGlzLmxvY2FsU3RyZWFtcy5pbmRleE9mKHQpJiZ0aGlzLmxvY2FsU3RyZWFtcy5wdXNoKHQpLHIudHJhY2s9ZSxyLnN0cmVhbT10LHIucnRwU2VuZGVyPW5ldyBjLlJUQ1J0cFNlbmRlcihlLHIuZHRsc1RyYW5zcG9ydCksci5ydHBTZW5kZXJ9LGYucHJvdG90eXBlLmFkZFN0cmVhbT1mdW5jdGlvbihlKXt2YXIgdD10aGlzO2lmKGQ+PTE1MDI1KWUuZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbihyKXt0LmFkZFRyYWNrKHIsZSl9KTtlbHNle3ZhciByPWUuY2xvbmUoKTtlLmdldFRyYWNrcygpLmZvckVhY2goZnVuY3Rpb24oZSx0KXt2YXIgbj1yLmdldFRyYWNrcygpW3RdO2UuYWRkRXZlbnRMaXN0ZW5lcihcImVuYWJsZWRcIixmdW5jdGlvbihlKXtuLmVuYWJsZWQ9ZS5lbmFibGVkfSl9KSxyLmdldFRyYWNrcygpLmZvckVhY2goZnVuY3Rpb24oZSl7dC5hZGRUcmFjayhlLHIpfSl9fSxmLnByb3RvdHlwZS5yZW1vdmVUcmFjaz1mdW5jdGlvbihlKXtpZih0aGlzLl9pc0Nsb3NlZCl0aHJvdyBvKFwiSW52YWxpZFN0YXRlRXJyb3JcIixcIkF0dGVtcHRlZCB0byBjYWxsIHJlbW92ZVRyYWNrIG9uIGEgY2xvc2VkIHBlZXJjb25uZWN0aW9uLlwiKTtpZighKGUgaW5zdGFuY2VvZiBjLlJUQ1J0cFNlbmRlcikpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkFyZ3VtZW50IDEgb2YgUlRDUGVlckNvbm5lY3Rpb24ucmVtb3ZlVHJhY2sgZG9lcyBub3QgaW1wbGVtZW50IGludGVyZmFjZSBSVENSdHBTZW5kZXIuXCIpO3ZhciB0PXRoaXMudHJhbnNjZWl2ZXJzLmZpbmQoZnVuY3Rpb24odCl7cmV0dXJuIHQucnRwU2VuZGVyPT09ZX0pO2lmKCF0KXRocm93IG8oXCJJbnZhbGlkQWNjZXNzRXJyb3JcIixcIlNlbmRlciB3YXMgbm90IGNyZWF0ZWQgYnkgdGhpcyBjb25uZWN0aW9uLlwiKTt2YXIgcj10LnN0cmVhbTt0LnJ0cFNlbmRlci5zdG9wKCksdC5ydHBTZW5kZXI9bnVsbCx0LnRyYWNrPW51bGwsdC5zdHJlYW09bnVsbCwtMT09PXRoaXMudHJhbnNjZWl2ZXJzLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS5zdHJlYW19KS5pbmRleE9mKHIpJiZ0aGlzLmxvY2FsU3RyZWFtcy5pbmRleE9mKHIpPi0xJiZ0aGlzLmxvY2FsU3RyZWFtcy5zcGxpY2UodGhpcy5sb2NhbFN0cmVhbXMuaW5kZXhPZihyKSwxKSx0aGlzLl9tYXliZUZpcmVOZWdvdGlhdGlvbk5lZWRlZCgpfSxmLnByb3RvdHlwZS5yZW1vdmVTdHJlYW09ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztlLmdldFRyYWNrcygpLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHI9dC5nZXRTZW5kZXJzKCkuZmluZChmdW5jdGlvbih0KXtyZXR1cm4gdC50cmFjaz09PWV9KTtyJiZ0LnJlbW92ZVRyYWNrKHIpfSl9LGYucHJvdG90eXBlLmdldFNlbmRlcnM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50cmFuc2NlaXZlcnMuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiEhZS5ydHBTZW5kZXJ9KS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUucnRwU2VuZGVyfSl9LGYucHJvdG90eXBlLmdldFJlY2VpdmVycz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRyYW5zY2VpdmVycy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuISFlLnJ0cFJlY2VpdmVyfSkubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlLnJ0cFJlY2VpdmVyfSl9LGYucHJvdG90eXBlLl9jcmVhdGVJY2VHYXRoZXJlcj1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7aWYodCYmZT4wKXJldHVybiB0aGlzLnRyYW5zY2VpdmVyc1swXS5pY2VHYXRoZXJlcjtpZih0aGlzLl9pY2VHYXRoZXJlcnMubGVuZ3RoKXJldHVybiB0aGlzLl9pY2VHYXRoZXJlcnMuc2hpZnQoKTt2YXIgbj1uZXcgYy5SVENJY2VHYXRoZXJlcih7aWNlU2VydmVyczp0aGlzLl9jb25maWcuaWNlU2VydmVycyxnYXRoZXJQb2xpY3k6dGhpcy5fY29uZmlnLmljZVRyYW5zcG9ydFBvbGljeX0pO3JldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkobixcInN0YXRlXCIse3ZhbHVlOlwibmV3XCIsd3JpdGFibGU6ITB9KSx0aGlzLnRyYW5zY2VpdmVyc1tlXS5idWZmZXJlZENhbmRpZGF0ZUV2ZW50cz1bXSx0aGlzLnRyYW5zY2VpdmVyc1tlXS5idWZmZXJDYW5kaWRhdGVzPWZ1bmN0aW9uKHQpe3ZhciBhPSF0LmNhbmRpZGF0ZXx8MD09PU9iamVjdC5rZXlzKHQuY2FuZGlkYXRlKS5sZW5ndGg7bi5zdGF0ZT1hP1wiY29tcGxldGVkXCI6XCJnYXRoZXJpbmdcIixudWxsIT09ci50cmFuc2NlaXZlcnNbZV0uYnVmZmVyZWRDYW5kaWRhdGVFdmVudHMmJnIudHJhbnNjZWl2ZXJzW2VdLmJ1ZmZlcmVkQ2FuZGlkYXRlRXZlbnRzLnB1c2godCl9LG4uYWRkRXZlbnRMaXN0ZW5lcihcImxvY2FsY2FuZGlkYXRlXCIsdGhpcy50cmFuc2NlaXZlcnNbZV0uYnVmZmVyQ2FuZGlkYXRlcyksbn0sZi5wcm90b3R5cGUuX2dhdGhlcj1mdW5jdGlvbih0LHIpe3ZhciBuPXRoaXMsYT10aGlzLnRyYW5zY2VpdmVyc1tyXS5pY2VHYXRoZXJlcjtpZighYS5vbmxvY2FsY2FuZGlkYXRlKXt2YXIgaT10aGlzLnRyYW5zY2VpdmVyc1tyXS5idWZmZXJlZENhbmRpZGF0ZUV2ZW50czt0aGlzLnRyYW5zY2VpdmVyc1tyXS5idWZmZXJlZENhbmRpZGF0ZUV2ZW50cz1udWxsLGEucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImxvY2FsY2FuZGlkYXRlXCIsdGhpcy50cmFuc2NlaXZlcnNbcl0uYnVmZmVyQ2FuZGlkYXRlcyksYS5vbmxvY2FsY2FuZGlkYXRlPWZ1bmN0aW9uKGkpe2lmKCEobi51c2luZ0J1bmRsZSYmcj4wKSl7dmFyIHM9bmV3IEV2ZW50KFwiaWNlY2FuZGlkYXRlXCIpO3MuY2FuZGlkYXRlPXtzZHBNaWQ6dCxzZHBNTGluZUluZGV4OnJ9O3ZhciBvPWkuY2FuZGlkYXRlLGM9IW98fDA9PT1PYmplY3Qua2V5cyhvKS5sZW5ndGg7aWYoYylcIm5ld1wiIT09YS5zdGF0ZSYmXCJnYXRoZXJpbmdcIiE9PWEuc3RhdGV8fChhLnN0YXRlPVwiY29tcGxldGVkXCIpO2Vsc2V7XCJuZXdcIj09PWEuc3RhdGUmJihhLnN0YXRlPVwiZ2F0aGVyaW5nXCIpLG8uY29tcG9uZW50PTEsby51ZnJhZz1hLmdldExvY2FsUGFyYW1ldGVycygpLnVzZXJuYW1lRnJhZ21lbnQ7dmFyIGQ9ZS53cml0ZUNhbmRpZGF0ZShvKTtzLmNhbmRpZGF0ZT1PYmplY3QuYXNzaWduKHMuY2FuZGlkYXRlLGUucGFyc2VDYW5kaWRhdGUoZCkpLHMuY2FuZGlkYXRlLmNhbmRpZGF0ZT1kLHMuY2FuZGlkYXRlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybntjYW5kaWRhdGU6cy5jYW5kaWRhdGUuY2FuZGlkYXRlLHNkcE1pZDpzLmNhbmRpZGF0ZS5zZHBNaWQsc2RwTUxpbmVJbmRleDpzLmNhbmRpZGF0ZS5zZHBNTGluZUluZGV4LHVzZXJuYW1lRnJhZ21lbnQ6cy5jYW5kaWRhdGUudXNlcm5hbWVGcmFnbWVudH19fXZhciBwPWUuZ2V0TWVkaWFTZWN0aW9ucyhuLl9sb2NhbERlc2NyaXB0aW9uLnNkcCk7cFtzLmNhbmRpZGF0ZS5zZHBNTGluZUluZGV4XSs9Yz9cImE9ZW5kLW9mLWNhbmRpZGF0ZXNcXHJcXG5cIjpcImE9XCIrcy5jYW5kaWRhdGUuY2FuZGlkYXRlK1wiXFxyXFxuXCIsbi5fbG9jYWxEZXNjcmlwdGlvbi5zZHA9ZS5nZXREZXNjcmlwdGlvbihuLl9sb2NhbERlc2NyaXB0aW9uLnNkcCkrcC5qb2luKFwiXCIpO3ZhciBsPW4udHJhbnNjZWl2ZXJzLmV2ZXJ5KGZ1bmN0aW9uKGUpe3JldHVybiBlLmljZUdhdGhlcmVyJiZcImNvbXBsZXRlZFwiPT09ZS5pY2VHYXRoZXJlci5zdGF0ZX0pO1wiZ2F0aGVyaW5nXCIhPT1uLmljZUdhdGhlcmluZ1N0YXRlJiYobi5pY2VHYXRoZXJpbmdTdGF0ZT1cImdhdGhlcmluZ1wiLG4uX2VtaXRHYXRoZXJpbmdTdGF0ZUNoYW5nZSgpKSxjfHxuLl9kaXNwYXRjaEV2ZW50KFwiaWNlY2FuZGlkYXRlXCIscyksbCYmKG4uX2Rpc3BhdGNoRXZlbnQoXCJpY2VjYW5kaWRhdGVcIixuZXcgRXZlbnQoXCJpY2VjYW5kaWRhdGVcIikpLG4uaWNlR2F0aGVyaW5nU3RhdGU9XCJjb21wbGV0ZVwiLG4uX2VtaXRHYXRoZXJpbmdTdGF0ZUNoYW5nZSgpKX19LGMuc2V0VGltZW91dChmdW5jdGlvbigpe2kuZm9yRWFjaChmdW5jdGlvbihlKXthLm9ubG9jYWxjYW5kaWRhdGUoZSl9KX0sMCl9fSxmLnByb3RvdHlwZS5fY3JlYXRlSWNlQW5kRHRsc1RyYW5zcG9ydHM9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9bmV3IGMuUlRDSWNlVHJhbnNwb3J0KG51bGwpO3Qub25pY2VzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe2UuX3VwZGF0ZUljZUNvbm5lY3Rpb25TdGF0ZSgpLGUuX3VwZGF0ZUNvbm5lY3Rpb25TdGF0ZSgpfTt2YXIgcj1uZXcgYy5SVENEdGxzVHJhbnNwb3J0KHQpO3JldHVybiByLm9uZHRsc3N0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7ZS5fdXBkYXRlQ29ubmVjdGlvblN0YXRlKCl9LHIub25lcnJvcj1mdW5jdGlvbigpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwic3RhdGVcIix7dmFsdWU6XCJmYWlsZWRcIix3cml0YWJsZTohMH0pLGUuX3VwZGF0ZUNvbm5lY3Rpb25TdGF0ZSgpfSx7aWNlVHJhbnNwb3J0OnQsZHRsc1RyYW5zcG9ydDpyfX0sZi5wcm90b3R5cGUuX2Rpc3Bvc2VJY2VBbmREdGxzVHJhbnNwb3J0cz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLnRyYW5zY2VpdmVyc1tlXS5pY2VHYXRoZXJlcjt0JiYoZGVsZXRlIHQub25sb2NhbGNhbmRpZGF0ZSxkZWxldGUgdGhpcy50cmFuc2NlaXZlcnNbZV0uaWNlR2F0aGVyZXIpO3ZhciByPXRoaXMudHJhbnNjZWl2ZXJzW2VdLmljZVRyYW5zcG9ydDtyJiYoZGVsZXRlIHIub25pY2VzdGF0ZWNoYW5nZSxkZWxldGUgdGhpcy50cmFuc2NlaXZlcnNbZV0uaWNlVHJhbnNwb3J0KTt2YXIgbj10aGlzLnRyYW5zY2VpdmVyc1tlXS5kdGxzVHJhbnNwb3J0O24mJihkZWxldGUgbi5vbmR0bHNzdGF0ZWNoYW5nZSxkZWxldGUgbi5vbmVycm9yLGRlbGV0ZSB0aGlzLnRyYW5zY2VpdmVyc1tlXS5kdGxzVHJhbnNwb3J0KX0sZi5wcm90b3R5cGUuX3RyYW5zY2VpdmU9ZnVuY3Rpb24odCxyLG4pe3ZhciBpPWEodC5sb2NhbENhcGFiaWxpdGllcyx0LnJlbW90ZUNhcGFiaWxpdGllcyk7ciYmdC5ydHBTZW5kZXImJihpLmVuY29kaW5ncz10LnNlbmRFbmNvZGluZ1BhcmFtZXRlcnMsaS5ydGNwPXtjbmFtZTplLmxvY2FsQ05hbWUsY29tcG91bmQ6dC5ydGNwUGFyYW1ldGVycy5jb21wb3VuZH0sdC5yZWN2RW5jb2RpbmdQYXJhbWV0ZXJzLmxlbmd0aCYmKGkucnRjcC5zc3JjPXQucmVjdkVuY29kaW5nUGFyYW1ldGVyc1swXS5zc3JjKSx0LnJ0cFNlbmRlci5zZW5kKGkpKSxuJiZ0LnJ0cFJlY2VpdmVyJiZpLmNvZGVjcy5sZW5ndGg+MCYmKFwidmlkZW9cIj09PXQua2luZCYmdC5yZWN2RW5jb2RpbmdQYXJhbWV0ZXJzJiZkPDE1MDE5JiZ0LnJlY3ZFbmNvZGluZ1BhcmFtZXRlcnMuZm9yRWFjaChmdW5jdGlvbihlKXtkZWxldGUgZS5ydHh9KSx0LnJlY3ZFbmNvZGluZ1BhcmFtZXRlcnMubGVuZ3RoP2kuZW5jb2RpbmdzPXQucmVjdkVuY29kaW5nUGFyYW1ldGVyczppLmVuY29kaW5ncz1be31dLGkucnRjcD17Y29tcG91bmQ6dC5ydGNwUGFyYW1ldGVycy5jb21wb3VuZH0sdC5ydGNwUGFyYW1ldGVycy5jbmFtZSYmKGkucnRjcC5jbmFtZT10LnJ0Y3BQYXJhbWV0ZXJzLmNuYW1lKSx0LnNlbmRFbmNvZGluZ1BhcmFtZXRlcnMubGVuZ3RoJiYoaS5ydGNwLnNzcmM9dC5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnNzcmMpLHQucnRwUmVjZWl2ZXIucmVjZWl2ZShpKSl9LGYucHJvdG90eXBlLnNldExvY2FsRGVzY3JpcHRpb249ZnVuY3Rpb24odCl7dmFyIHIsbixzPXRoaXM7aWYoLTE9PT1bXCJvZmZlclwiLFwiYW5zd2VyXCJdLmluZGV4T2YodC50eXBlKSlyZXR1cm4gUHJvbWlzZS5yZWplY3QobyhcIlR5cGVFcnJvclwiLCdVbnN1cHBvcnRlZCB0eXBlIFwiJyt0LnR5cGUrJ1wiJykpO2lmKCFpKFwic2V0TG9jYWxEZXNjcmlwdGlvblwiLHQudHlwZSxzLnNpZ25hbGluZ1N0YXRlKXx8cy5faXNDbG9zZWQpcmV0dXJuIFByb21pc2UucmVqZWN0KG8oXCJJbnZhbGlkU3RhdGVFcnJvclwiLFwiQ2FuIG5vdCBzZXQgbG9jYWwgXCIrdC50eXBlK1wiIGluIHN0YXRlIFwiK3Muc2lnbmFsaW5nU3RhdGUpKTtpZihcIm9mZmVyXCI9PT10LnR5cGUpcj1lLnNwbGl0U2VjdGlvbnModC5zZHApLG49ci5zaGlmdCgpLHIuZm9yRWFjaChmdW5jdGlvbih0LHIpe3ZhciBuPWUucGFyc2VSdHBQYXJhbWV0ZXJzKHQpO3MudHJhbnNjZWl2ZXJzW3JdLmxvY2FsQ2FwYWJpbGl0aWVzPW59KSxzLnRyYW5zY2VpdmVycy5mb3JFYWNoKGZ1bmN0aW9uKGUsdCl7cy5fZ2F0aGVyKGUubWlkLHQpfSk7ZWxzZSBpZihcImFuc3dlclwiPT09dC50eXBlKXtyPWUuc3BsaXRTZWN0aW9ucyhzLl9yZW1vdGVEZXNjcmlwdGlvbi5zZHApLG49ci5zaGlmdCgpO3ZhciBjPWUubWF0Y2hQcmVmaXgobixcImE9aWNlLWxpdGVcIikubGVuZ3RoPjA7ci5mb3JFYWNoKGZ1bmN0aW9uKHQscil7dmFyIGk9cy50cmFuc2NlaXZlcnNbcl0sbz1pLmljZUdhdGhlcmVyLGQ9aS5pY2VUcmFuc3BvcnQscD1pLmR0bHNUcmFuc3BvcnQsbD1pLmxvY2FsQ2FwYWJpbGl0aWVzLGY9aS5yZW1vdGVDYXBhYmlsaXRpZXM7aWYoIShlLmlzUmVqZWN0ZWQodCkmJjA9PT1lLm1hdGNoUHJlZml4KHQsXCJhPWJ1bmRsZS1vbmx5XCIpLmxlbmd0aCkmJiFpLnJlamVjdGVkKXt2YXIgdT1lLmdldEljZVBhcmFtZXRlcnModCxuKSx2PWUuZ2V0RHRsc1BhcmFtZXRlcnModCxuKTtjJiYodi5yb2xlPVwic2VydmVyXCIpLHMudXNpbmdCdW5kbGUmJjAhPT1yfHwocy5fZ2F0aGVyKGkubWlkLHIpLFwibmV3XCI9PT1kLnN0YXRlJiZkLnN0YXJ0KG8sdSxjP1wiY29udHJvbGxpbmdcIjpcImNvbnRyb2xsZWRcIiksXCJuZXdcIj09PXAuc3RhdGUmJnAuc3RhcnQodikpO3ZhciBoPWEobCxmKTtzLl90cmFuc2NlaXZlKGksaC5jb2RlY3MubGVuZ3RoPjAsITEpfX0pfXJldHVybiBzLl9sb2NhbERlc2NyaXB0aW9uPXt0eXBlOnQudHlwZSxzZHA6dC5zZHB9LFwib2ZmZXJcIj09PXQudHlwZT9zLl91cGRhdGVTaWduYWxpbmdTdGF0ZShcImhhdmUtbG9jYWwtb2ZmZXJcIik6cy5fdXBkYXRlU2lnbmFsaW5nU3RhdGUoXCJzdGFibGVcIiksUHJvbWlzZS5yZXNvbHZlKCl9LGYucHJvdG90eXBlLnNldFJlbW90ZURlc2NyaXB0aW9uPWZ1bmN0aW9uKHQpe3ZhciByPXRoaXM7aWYoLTE9PT1bXCJvZmZlclwiLFwiYW5zd2VyXCJdLmluZGV4T2YodC50eXBlKSlyZXR1cm4gUHJvbWlzZS5yZWplY3QobyhcIlR5cGVFcnJvclwiLCdVbnN1cHBvcnRlZCB0eXBlIFwiJyt0LnR5cGUrJ1wiJykpO2lmKCFpKFwic2V0UmVtb3RlRGVzY3JpcHRpb25cIix0LnR5cGUsci5zaWduYWxpbmdTdGF0ZSl8fHIuX2lzQ2xvc2VkKXJldHVybiBQcm9taXNlLnJlamVjdChvKFwiSW52YWxpZFN0YXRlRXJyb3JcIixcIkNhbiBub3Qgc2V0IHJlbW90ZSBcIit0LnR5cGUrXCIgaW4gc3RhdGUgXCIrci5zaWduYWxpbmdTdGF0ZSkpO3ZhciBuPXt9O3IucmVtb3RlU3RyZWFtcy5mb3JFYWNoKGZ1bmN0aW9uKGUpe25bZS5pZF09ZX0pO3ZhciBmPVtdLHU9ZS5zcGxpdFNlY3Rpb25zKHQuc2RwKSx2PXUuc2hpZnQoKSxoPWUubWF0Y2hQcmVmaXgodixcImE9aWNlLWxpdGVcIikubGVuZ3RoPjAsbT1lLm1hdGNoUHJlZml4KHYsXCJhPWdyb3VwOkJVTkRMRSBcIikubGVuZ3RoPjA7ci51c2luZ0J1bmRsZT1tO3ZhciBnPWUubWF0Y2hQcmVmaXgodixcImE9aWNlLW9wdGlvbnM6XCIpWzBdO3JldHVybiByLmNhblRyaWNrbGVJY2VDYW5kaWRhdGVzPSEhZyYmZy5zdWJzdHIoMTQpLnNwbGl0KFwiIFwiKS5pbmRleE9mKFwidHJpY2tsZVwiKT49MCx1LmZvckVhY2goZnVuY3Rpb24oaSxvKXt2YXIgbD1lLnNwbGl0TGluZXMoaSksdT1lLmdldEtpbmQoaSksZz1lLmlzUmVqZWN0ZWQoaSkmJjA9PT1lLm1hdGNoUHJlZml4KGksXCJhPWJ1bmRsZS1vbmx5XCIpLmxlbmd0aCx5PWxbMF0uc3Vic3RyKDIpLnNwbGl0KFwiIFwiKVsyXSxTPWUuZ2V0RGlyZWN0aW9uKGksdiksVD1lLnBhcnNlTXNpZChpKSxFPWUuZ2V0TWlkKGkpfHxlLmdlbmVyYXRlSWRlbnRpZmllcigpO2lmKGd8fFwiYXBwbGljYXRpb25cIj09PXUmJihcIkRUTFMvU0NUUFwiPT09eXx8XCJVRFAvRFRMUy9TQ1RQXCI9PT15KSlyLnRyYW5zY2VpdmVyc1tvXT17bWlkOkUsa2luZDp1LHByb3RvY29sOnkscmVqZWN0ZWQ6ITB9O2Vsc2V7dmFyIEMsUCx3LFIsXyxrLGIseCxEOyFnJiZyLnRyYW5zY2VpdmVyc1tvXSYmci50cmFuc2NlaXZlcnNbb10ucmVqZWN0ZWQmJihyLnRyYW5zY2VpdmVyc1tvXT1yLl9jcmVhdGVUcmFuc2NlaXZlcih1LCEwKSk7dmFyIEksTCxNPWUucGFyc2VSdHBQYXJhbWV0ZXJzKGkpO2d8fChJPWUuZ2V0SWNlUGFyYW1ldGVycyhpLHYpLChMPWUuZ2V0RHRsc1BhcmFtZXRlcnMoaSx2KSkucm9sZT1cImNsaWVudFwiKSxiPWUucGFyc2VSdHBFbmNvZGluZ1BhcmFtZXRlcnMoaSk7dmFyIE89ZS5wYXJzZVJ0Y3BQYXJhbWV0ZXJzKGkpLEc9ZS5tYXRjaFByZWZpeChpLFwiYT1lbmQtb2YtY2FuZGlkYXRlc1wiLHYpLmxlbmd0aD4wLGo9ZS5tYXRjaFByZWZpeChpLFwiYT1jYW5kaWRhdGU6XCIpLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gZS5wYXJzZUNhbmRpZGF0ZSh0KX0pLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gMT09PWUuY29tcG9uZW50fSk7aWYoKFwib2ZmZXJcIj09PXQudHlwZXx8XCJhbnN3ZXJcIj09PXQudHlwZSkmJiFnJiZtJiZvPjAmJnIudHJhbnNjZWl2ZXJzW29dJiYoci5fZGlzcG9zZUljZUFuZER0bHNUcmFuc3BvcnRzKG8pLHIudHJhbnNjZWl2ZXJzW29dLmljZUdhdGhlcmVyPXIudHJhbnNjZWl2ZXJzWzBdLmljZUdhdGhlcmVyLHIudHJhbnNjZWl2ZXJzW29dLmljZVRyYW5zcG9ydD1yLnRyYW5zY2VpdmVyc1swXS5pY2VUcmFuc3BvcnQsci50cmFuc2NlaXZlcnNbb10uZHRsc1RyYW5zcG9ydD1yLnRyYW5zY2VpdmVyc1swXS5kdGxzVHJhbnNwb3J0LHIudHJhbnNjZWl2ZXJzW29dLnJ0cFNlbmRlciYmci50cmFuc2NlaXZlcnNbb10ucnRwU2VuZGVyLnNldFRyYW5zcG9ydChyLnRyYW5zY2VpdmVyc1swXS5kdGxzVHJhbnNwb3J0KSxyLnRyYW5zY2VpdmVyc1tvXS5ydHBSZWNlaXZlciYmci50cmFuc2NlaXZlcnNbb10ucnRwUmVjZWl2ZXIuc2V0VHJhbnNwb3J0KHIudHJhbnNjZWl2ZXJzWzBdLmR0bHNUcmFuc3BvcnQpKSxcIm9mZmVyXCIhPT10LnR5cGV8fGcpe2lmKFwiYW5zd2VyXCI9PT10LnR5cGUmJiFnKXtQPShDPXIudHJhbnNjZWl2ZXJzW29dKS5pY2VHYXRoZXJlcix3PUMuaWNlVHJhbnNwb3J0LFI9Qy5kdGxzVHJhbnNwb3J0LF89Qy5ydHBSZWNlaXZlcixrPUMuc2VuZEVuY29kaW5nUGFyYW1ldGVycyx4PUMubG9jYWxDYXBhYmlsaXRpZXMsci50cmFuc2NlaXZlcnNbb10ucmVjdkVuY29kaW5nUGFyYW1ldGVycz1iLHIudHJhbnNjZWl2ZXJzW29dLnJlbW90ZUNhcGFiaWxpdGllcz1NLHIudHJhbnNjZWl2ZXJzW29dLnJ0Y3BQYXJhbWV0ZXJzPU8sai5sZW5ndGgmJlwibmV3XCI9PT13LnN0YXRlJiYoIWgmJiFHfHxtJiYwIT09bz9qLmZvckVhY2goZnVuY3Rpb24oZSl7cyhDLmljZVRyYW5zcG9ydCxlKX0pOncuc2V0UmVtb3RlQ2FuZGlkYXRlcyhqKSksbSYmMCE9PW98fChcIm5ld1wiPT09dy5zdGF0ZSYmdy5zdGFydChQLEksXCJjb250cm9sbGluZ1wiKSxcIm5ld1wiPT09Ui5zdGF0ZSYmUi5zdGFydChMKSksIWEoQy5sb2NhbENhcGFiaWxpdGllcyxDLnJlbW90ZUNhcGFiaWxpdGllcykuY29kZWNzLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm5cInJ0eFwiPT09ZS5uYW1lLnRvTG93ZXJDYXNlKCl9KS5sZW5ndGgmJkMuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHgmJmRlbGV0ZSBDLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4LHIuX3RyYW5zY2VpdmUoQyxcInNlbmRyZWN2XCI9PT1TfHxcInJlY3Zvbmx5XCI9PT1TLFwic2VuZHJlY3ZcIj09PVN8fFwic2VuZG9ubHlcIj09PVMpLCFffHxcInNlbmRyZWN2XCIhPT1TJiZcInNlbmRvbmx5XCIhPT1TP2RlbGV0ZSBDLnJ0cFJlY2VpdmVyOihEPV8udHJhY2ssVD8obltULnN0cmVhbV18fChuW1Quc3RyZWFtXT1uZXcgYy5NZWRpYVN0cmVhbSkscChELG5bVC5zdHJlYW1dKSxmLnB1c2goW0QsXyxuW1Quc3RyZWFtXV0pKToobi5kZWZhdWx0fHwobi5kZWZhdWx0PW5ldyBjLk1lZGlhU3RyZWFtKSxwKEQsbi5kZWZhdWx0KSxmLnB1c2goW0QsXyxuLmRlZmF1bHRdKSkpfX1lbHNleyhDPXIudHJhbnNjZWl2ZXJzW29dfHxyLl9jcmVhdGVUcmFuc2NlaXZlcih1KSkubWlkPUUsQy5pY2VHYXRoZXJlcnx8KEMuaWNlR2F0aGVyZXI9ci5fY3JlYXRlSWNlR2F0aGVyZXIobyxtKSksai5sZW5ndGgmJlwibmV3XCI9PT1DLmljZVRyYW5zcG9ydC5zdGF0ZSYmKCFHfHxtJiYwIT09bz9qLmZvckVhY2goZnVuY3Rpb24oZSl7cyhDLmljZVRyYW5zcG9ydCxlKX0pOkMuaWNlVHJhbnNwb3J0LnNldFJlbW90ZUNhbmRpZGF0ZXMoaikpLHg9Yy5SVENSdHBSZWNlaXZlci5nZXRDYXBhYmlsaXRpZXModSksZDwxNTAxOSYmKHguY29kZWNzPXguY29kZWNzLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm5cInJ0eFwiIT09ZS5uYW1lfSkpLGs9Qy5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzfHxbe3NzcmM6MTAwMSooMipvKzIpfV07dmFyIE4sQT0hMTtpZihcInNlbmRyZWN2XCI9PT1TfHxcInNlbmRvbmx5XCI9PT1TKXtpZihBPSFDLnJ0cFJlY2VpdmVyLF89Qy5ydHBSZWNlaXZlcnx8bmV3IGMuUlRDUnRwUmVjZWl2ZXIoQy5kdGxzVHJhbnNwb3J0LHUpLEEpRD1fLnRyYWNrLFQmJlwiLVwiPT09VC5zdHJlYW18fChUPyhuW1Quc3RyZWFtXXx8KG5bVC5zdHJlYW1dPW5ldyBjLk1lZGlhU3RyZWFtLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuW1Quc3RyZWFtXSxcImlkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiBULnN0cmVhbX19KSksT2JqZWN0LmRlZmluZVByb3BlcnR5KEQsXCJpZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gVC50cmFja319KSxOPW5bVC5zdHJlYW1dKToobi5kZWZhdWx0fHwobi5kZWZhdWx0PW5ldyBjLk1lZGlhU3RyZWFtKSxOPW4uZGVmYXVsdCkpLE4mJihwKEQsTiksQy5hc3NvY2lhdGVkUmVtb3RlTWVkaWFTdHJlYW1zLnB1c2goTikpLGYucHVzaChbRCxfLE5dKX1lbHNlIEMucnRwUmVjZWl2ZXImJkMucnRwUmVjZWl2ZXIudHJhY2smJihDLmFzc29jaWF0ZWRSZW1vdGVNZWRpYVN0cmVhbXMuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgdCxyLG49ZS5nZXRUcmFja3MoKS5maW5kKGZ1bmN0aW9uKGUpe3JldHVybiBlLmlkPT09Qy5ydHBSZWNlaXZlci50cmFjay5pZH0pO24mJih0PW4sKHI9ZSkucmVtb3ZlVHJhY2sodCksci5kaXNwYXRjaEV2ZW50KG5ldyBjLk1lZGlhU3RyZWFtVHJhY2tFdmVudChcInJlbW92ZXRyYWNrXCIse3RyYWNrOnR9KSkpfSksQy5hc3NvY2lhdGVkUmVtb3RlTWVkaWFTdHJlYW1zPVtdKTtDLmxvY2FsQ2FwYWJpbGl0aWVzPXgsQy5yZW1vdGVDYXBhYmlsaXRpZXM9TSxDLnJ0cFJlY2VpdmVyPV8sQy5ydGNwUGFyYW1ldGVycz1PLEMuc2VuZEVuY29kaW5nUGFyYW1ldGVycz1rLEMucmVjdkVuY29kaW5nUGFyYW1ldGVycz1iLHIuX3RyYW5zY2VpdmUoci50cmFuc2NlaXZlcnNbb10sITEsQSl9fX0pLHZvaWQgMD09PXIuX2R0bHNSb2xlJiYoci5fZHRsc1JvbGU9XCJvZmZlclwiPT09dC50eXBlP1wiYWN0aXZlXCI6XCJwYXNzaXZlXCIpLHIuX3JlbW90ZURlc2NyaXB0aW9uPXt0eXBlOnQudHlwZSxzZHA6dC5zZHB9LFwib2ZmZXJcIj09PXQudHlwZT9yLl91cGRhdGVTaWduYWxpbmdTdGF0ZShcImhhdmUtcmVtb3RlLW9mZmVyXCIpOnIuX3VwZGF0ZVNpZ25hbGluZ1N0YXRlKFwic3RhYmxlXCIpLE9iamVjdC5rZXlzKG4pLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHQ9bltlXTtpZih0LmdldFRyYWNrcygpLmxlbmd0aCl7aWYoLTE9PT1yLnJlbW90ZVN0cmVhbXMuaW5kZXhPZih0KSl7ci5yZW1vdGVTdHJlYW1zLnB1c2godCk7dmFyIGE9bmV3IEV2ZW50KFwiYWRkc3RyZWFtXCIpO2Euc3RyZWFtPXQsYy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ci5fZGlzcGF0Y2hFdmVudChcImFkZHN0cmVhbVwiLGEpfSl9Zi5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciBuPWVbMF0sYT1lWzFdO3QuaWQ9PT1lWzJdLmlkJiZsKHIsbixhLFt0XSl9KX19KSxmLmZvckVhY2goZnVuY3Rpb24oZSl7ZVsyXXx8bChyLGVbMF0sZVsxXSxbXSl9KSxjLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtyJiZyLnRyYW5zY2VpdmVycyYmci50cmFuc2NlaXZlcnMuZm9yRWFjaChmdW5jdGlvbihlKXtlLmljZVRyYW5zcG9ydCYmXCJuZXdcIj09PWUuaWNlVHJhbnNwb3J0LnN0YXRlJiZlLmljZVRyYW5zcG9ydC5nZXRSZW1vdGVDYW5kaWRhdGVzKCkubGVuZ3RoPjAmJihjb25zb2xlLndhcm4oXCJUaW1lb3V0IGZvciBhZGRSZW1vdGVDYW5kaWRhdGUuIENvbnNpZGVyIHNlbmRpbmcgYW4gZW5kLW9mLWNhbmRpZGF0ZXMgbm90aWZpY2F0aW9uXCIpLGUuaWNlVHJhbnNwb3J0LmFkZFJlbW90ZUNhbmRpZGF0ZSh7fSkpfSl9LDRlMyksUHJvbWlzZS5yZXNvbHZlKCl9LGYucHJvdG90eXBlLmNsb3NlPWZ1bmN0aW9uKCl7dGhpcy50cmFuc2NlaXZlcnMuZm9yRWFjaChmdW5jdGlvbihlKXtlLmljZVRyYW5zcG9ydCYmZS5pY2VUcmFuc3BvcnQuc3RvcCgpLGUuZHRsc1RyYW5zcG9ydCYmZS5kdGxzVHJhbnNwb3J0LnN0b3AoKSxlLnJ0cFNlbmRlciYmZS5ydHBTZW5kZXIuc3RvcCgpLGUucnRwUmVjZWl2ZXImJmUucnRwUmVjZWl2ZXIuc3RvcCgpfSksdGhpcy5faXNDbG9zZWQ9ITAsdGhpcy5fdXBkYXRlU2lnbmFsaW5nU3RhdGUoXCJjbG9zZWRcIil9LGYucHJvdG90eXBlLl91cGRhdGVTaWduYWxpbmdTdGF0ZT1mdW5jdGlvbihlKXt0aGlzLnNpZ25hbGluZ1N0YXRlPWU7dmFyIHQ9bmV3IEV2ZW50KFwic2lnbmFsaW5nc3RhdGVjaGFuZ2VcIik7dGhpcy5fZGlzcGF0Y2hFdmVudChcInNpZ25hbGluZ3N0YXRlY2hhbmdlXCIsdCl9LGYucHJvdG90eXBlLl9tYXliZUZpcmVOZWdvdGlhdGlvbk5lZWRlZD1mdW5jdGlvbigpe3ZhciBlPXRoaXM7XCJzdGFibGVcIj09PXRoaXMuc2lnbmFsaW5nU3RhdGUmJiEwIT09dGhpcy5uZWVkTmVnb3RpYXRpb24mJih0aGlzLm5lZWROZWdvdGlhdGlvbj0hMCxjLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtpZihlLm5lZWROZWdvdGlhdGlvbil7ZS5uZWVkTmVnb3RpYXRpb249ITE7dmFyIHQ9bmV3IEV2ZW50KFwibmVnb3RpYXRpb25uZWVkZWRcIik7ZS5fZGlzcGF0Y2hFdmVudChcIm5lZ290aWF0aW9ubmVlZGVkXCIsdCl9fSwwKSl9LGYucHJvdG90eXBlLl91cGRhdGVJY2VDb25uZWN0aW9uU3RhdGU9ZnVuY3Rpb24oKXt2YXIgZSx0PXtuZXc6MCxjbG9zZWQ6MCxjaGVja2luZzowLGNvbm5lY3RlZDowLGNvbXBsZXRlZDowLGRpc2Nvbm5lY3RlZDowLGZhaWxlZDowfTtpZih0aGlzLnRyYW5zY2VpdmVycy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UuaWNlVHJhbnNwb3J0JiYhZS5yZWplY3RlZCYmdFtlLmljZVRyYW5zcG9ydC5zdGF0ZV0rK30pLGU9XCJuZXdcIix0LmZhaWxlZD4wP2U9XCJmYWlsZWRcIjp0LmNoZWNraW5nPjA/ZT1cImNoZWNraW5nXCI6dC5kaXNjb25uZWN0ZWQ+MD9lPVwiZGlzY29ubmVjdGVkXCI6dC5uZXc+MD9lPVwibmV3XCI6dC5jb25uZWN0ZWQ+MD9lPVwiY29ubmVjdGVkXCI6dC5jb21wbGV0ZWQ+MCYmKGU9XCJjb21wbGV0ZWRcIiksZSE9PXRoaXMuaWNlQ29ubmVjdGlvblN0YXRlKXt0aGlzLmljZUNvbm5lY3Rpb25TdGF0ZT1lO3ZhciByPW5ldyBFdmVudChcImljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZVwiKTt0aGlzLl9kaXNwYXRjaEV2ZW50KFwiaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlXCIscil9fSxmLnByb3RvdHlwZS5fdXBkYXRlQ29ubmVjdGlvblN0YXRlPWZ1bmN0aW9uKCl7dmFyIGUsdD17bmV3OjAsY2xvc2VkOjAsY29ubmVjdGluZzowLGNvbm5lY3RlZDowLGNvbXBsZXRlZDowLGRpc2Nvbm5lY3RlZDowLGZhaWxlZDowfTtpZih0aGlzLnRyYW5zY2VpdmVycy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UuaWNlVHJhbnNwb3J0JiZlLmR0bHNUcmFuc3BvcnQmJiFlLnJlamVjdGVkJiYodFtlLmljZVRyYW5zcG9ydC5zdGF0ZV0rKyx0W2UuZHRsc1RyYW5zcG9ydC5zdGF0ZV0rKyl9KSx0LmNvbm5lY3RlZCs9dC5jb21wbGV0ZWQsZT1cIm5ld1wiLHQuZmFpbGVkPjA/ZT1cImZhaWxlZFwiOnQuY29ubmVjdGluZz4wP2U9XCJjb25uZWN0aW5nXCI6dC5kaXNjb25uZWN0ZWQ+MD9lPVwiZGlzY29ubmVjdGVkXCI6dC5uZXc+MD9lPVwibmV3XCI6dC5jb25uZWN0ZWQ+MCYmKGU9XCJjb25uZWN0ZWRcIiksZSE9PXRoaXMuY29ubmVjdGlvblN0YXRlKXt0aGlzLmNvbm5lY3Rpb25TdGF0ZT1lO3ZhciByPW5ldyBFdmVudChcImNvbm5lY3Rpb25zdGF0ZWNoYW5nZVwiKTt0aGlzLl9kaXNwYXRjaEV2ZW50KFwiY29ubmVjdGlvbnN0YXRlY2hhbmdlXCIscil9fSxmLnByb3RvdHlwZS5jcmVhdGVPZmZlcj1mdW5jdGlvbigpe3ZhciB0PXRoaXM7aWYodC5faXNDbG9zZWQpcmV0dXJuIFByb21pc2UucmVqZWN0KG8oXCJJbnZhbGlkU3RhdGVFcnJvclwiLFwiQ2FuIG5vdCBjYWxsIGNyZWF0ZU9mZmVyIGFmdGVyIGNsb3NlXCIpKTt2YXIgbj10LnRyYW5zY2VpdmVycy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuXCJhdWRpb1wiPT09ZS5raW5kfSkubGVuZ3RoLGE9dC50cmFuc2NlaXZlcnMuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVyblwidmlkZW9cIj09PWUua2luZH0pLmxlbmd0aCxpPWFyZ3VtZW50c1swXTtpZihpKXtpZihpLm1hbmRhdG9yeXx8aS5vcHRpb25hbCl0aHJvdyBuZXcgVHlwZUVycm9yKFwiTGVnYWN5IG1hbmRhdG9yeS9vcHRpb25hbCBjb25zdHJhaW50cyBub3Qgc3VwcG9ydGVkLlwiKTt2b2lkIDAhPT1pLm9mZmVyVG9SZWNlaXZlQXVkaW8mJihuPSEwPT09aS5vZmZlclRvUmVjZWl2ZUF1ZGlvPzE6ITE9PT1pLm9mZmVyVG9SZWNlaXZlQXVkaW8/MDppLm9mZmVyVG9SZWNlaXZlQXVkaW8pLHZvaWQgMCE9PWkub2ZmZXJUb1JlY2VpdmVWaWRlbyYmKGE9ITA9PT1pLm9mZmVyVG9SZWNlaXZlVmlkZW8/MTohMT09PWkub2ZmZXJUb1JlY2VpdmVWaWRlbz8wOmkub2ZmZXJUb1JlY2VpdmVWaWRlbyl9Zm9yKHQudHJhbnNjZWl2ZXJzLmZvckVhY2goZnVuY3Rpb24oZSl7XCJhdWRpb1wiPT09ZS5raW5kPy0tbjwwJiYoZS53YW50UmVjZWl2ZT0hMSk6XCJ2aWRlb1wiPT09ZS5raW5kJiYtLWE8MCYmKGUud2FudFJlY2VpdmU9ITEpfSk7bj4wfHxhPjA7KW4+MCYmKHQuX2NyZWF0ZVRyYW5zY2VpdmVyKFwiYXVkaW9cIiksbi0tKSxhPjAmJih0Ll9jcmVhdGVUcmFuc2NlaXZlcihcInZpZGVvXCIpLGEtLSk7dmFyIHM9ZS53cml0ZVNlc3Npb25Cb2lsZXJwbGF0ZSh0Ll9zZHBTZXNzaW9uSWQsdC5fc2RwU2Vzc2lvblZlcnNpb24rKyk7dC50cmFuc2NlaXZlcnMuZm9yRWFjaChmdW5jdGlvbihyLG4pe3ZhciBhPXIudHJhY2ssaT1yLmtpbmQscz1yLm1pZHx8ZS5nZW5lcmF0ZUlkZW50aWZpZXIoKTtyLm1pZD1zLHIuaWNlR2F0aGVyZXJ8fChyLmljZUdhdGhlcmVyPXQuX2NyZWF0ZUljZUdhdGhlcmVyKG4sdC51c2luZ0J1bmRsZSkpO3ZhciBvPWMuUlRDUnRwU2VuZGVyLmdldENhcGFiaWxpdGllcyhpKTtkPDE1MDE5JiYoby5jb2RlY3M9by5jb2RlY3MuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVyblwicnR4XCIhPT1lLm5hbWV9KSksby5jb2RlY3MuZm9yRWFjaChmdW5jdGlvbihlKXtcIkgyNjRcIj09PWUubmFtZSYmdm9pZCAwPT09ZS5wYXJhbWV0ZXJzW1wibGV2ZWwtYXN5bW1ldHJ5LWFsbG93ZWRcIl0mJihlLnBhcmFtZXRlcnNbXCJsZXZlbC1hc3ltbWV0cnktYWxsb3dlZFwiXT1cIjFcIiksci5yZW1vdGVDYXBhYmlsaXRpZXMmJnIucmVtb3RlQ2FwYWJpbGl0aWVzLmNvZGVjcyYmci5yZW1vdGVDYXBhYmlsaXRpZXMuY29kZWNzLmZvckVhY2goZnVuY3Rpb24odCl7ZS5uYW1lLnRvTG93ZXJDYXNlKCk9PT10Lm5hbWUudG9Mb3dlckNhc2UoKSYmZS5jbG9ja1JhdGU9PT10LmNsb2NrUmF0ZSYmKGUucHJlZmVycmVkUGF5bG9hZFR5cGU9dC5wYXlsb2FkVHlwZSl9KX0pLG8uaGVhZGVyRXh0ZW5zaW9ucy5mb3JFYWNoKGZ1bmN0aW9uKGUpeyhyLnJlbW90ZUNhcGFiaWxpdGllcyYmci5yZW1vdGVDYXBhYmlsaXRpZXMuaGVhZGVyRXh0ZW5zaW9uc3x8W10pLmZvckVhY2goZnVuY3Rpb24odCl7ZS51cmk9PT10LnVyaSYmKGUuaWQ9dC5pZCl9KX0pO3ZhciBwPXIuc2VuZEVuY29kaW5nUGFyYW1ldGVyc3x8W3tzc3JjOjEwMDEqKDIqbisxKX1dO2EmJmQ+PTE1MDE5JiZcInZpZGVvXCI9PT1pJiYhcFswXS5ydHgmJihwWzBdLnJ0eD17c3NyYzpwWzBdLnNzcmMrMX0pLHIud2FudFJlY2VpdmUmJihyLnJ0cFJlY2VpdmVyPW5ldyBjLlJUQ1J0cFJlY2VpdmVyKHIuZHRsc1RyYW5zcG9ydCxpKSksci5sb2NhbENhcGFiaWxpdGllcz1vLHIuc2VuZEVuY29kaW5nUGFyYW1ldGVycz1wfSksXCJtYXgtY29tcGF0XCIhPT10Ll9jb25maWcuYnVuZGxlUG9saWN5JiYocys9XCJhPWdyb3VwOkJVTkRMRSBcIit0LnRyYW5zY2VpdmVycy5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUubWlkfSkuam9pbihcIiBcIikrXCJcXHJcXG5cIikscys9XCJhPWljZS1vcHRpb25zOnRyaWNrbGVcXHJcXG5cIix0LnRyYW5zY2VpdmVycy5mb3JFYWNoKGZ1bmN0aW9uKG4sYSl7cys9cihuLG4ubG9jYWxDYXBhYmlsaXRpZXMsXCJvZmZlclwiLG4uc3RyZWFtLHQuX2R0bHNSb2xlKSxzKz1cImE9cnRjcC1yc2l6ZVxcclxcblwiLCFuLmljZUdhdGhlcmVyfHxcIm5ld1wiPT09dC5pY2VHYXRoZXJpbmdTdGF0ZXx8MCE9PWEmJnQudXNpbmdCdW5kbGV8fChuLmljZUdhdGhlcmVyLmdldExvY2FsQ2FuZGlkYXRlcygpLmZvckVhY2goZnVuY3Rpb24odCl7dC5jb21wb25lbnQ9MSxzKz1cImE9XCIrZS53cml0ZUNhbmRpZGF0ZSh0KStcIlxcclxcblwifSksXCJjb21wbGV0ZWRcIj09PW4uaWNlR2F0aGVyZXIuc3RhdGUmJihzKz1cImE9ZW5kLW9mLWNhbmRpZGF0ZXNcXHJcXG5cIikpfSk7dmFyIHA9bmV3IGMuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKHt0eXBlOlwib2ZmZXJcIixzZHA6c30pO3JldHVybiBQcm9taXNlLnJlc29sdmUocCl9LGYucHJvdG90eXBlLmNyZWF0ZUFuc3dlcj1mdW5jdGlvbigpe3ZhciB0PXRoaXM7aWYodC5faXNDbG9zZWQpcmV0dXJuIFByb21pc2UucmVqZWN0KG8oXCJJbnZhbGlkU3RhdGVFcnJvclwiLFwiQ2FuIG5vdCBjYWxsIGNyZWF0ZUFuc3dlciBhZnRlciBjbG9zZVwiKSk7aWYoXCJoYXZlLXJlbW90ZS1vZmZlclwiIT09dC5zaWduYWxpbmdTdGF0ZSYmXCJoYXZlLWxvY2FsLXByYW5zd2VyXCIhPT10LnNpZ25hbGluZ1N0YXRlKXJldHVybiBQcm9taXNlLnJlamVjdChvKFwiSW52YWxpZFN0YXRlRXJyb3JcIixcIkNhbiBub3QgY2FsbCBjcmVhdGVBbnN3ZXIgaW4gc2lnbmFsaW5nU3RhdGUgXCIrdC5zaWduYWxpbmdTdGF0ZSkpO3ZhciBuPWUud3JpdGVTZXNzaW9uQm9pbGVycGxhdGUodC5fc2RwU2Vzc2lvbklkLHQuX3NkcFNlc3Npb25WZXJzaW9uKyspO3QudXNpbmdCdW5kbGUmJihuKz1cImE9Z3JvdXA6QlVORExFIFwiK3QudHJhbnNjZWl2ZXJzLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS5taWR9KS5qb2luKFwiIFwiKStcIlxcclxcblwiKSxuKz1cImE9aWNlLW9wdGlvbnM6dHJpY2tsZVxcclxcblwiO3ZhciBpPWUuZ2V0TWVkaWFTZWN0aW9ucyh0Ll9yZW1vdGVEZXNjcmlwdGlvbi5zZHApLmxlbmd0aDt0LnRyYW5zY2VpdmVycy5mb3JFYWNoKGZ1bmN0aW9uKGUscyl7aWYoIShzKzE+aSkpe2lmKGUucmVqZWN0ZWQpcmV0dXJuXCJhcHBsaWNhdGlvblwiPT09ZS5raW5kP1wiRFRMUy9TQ1RQXCI9PT1lLnByb3RvY29sP24rPVwibT1hcHBsaWNhdGlvbiAwIERUTFMvU0NUUCA1MDAwXFxyXFxuXCI6bis9XCJtPWFwcGxpY2F0aW9uIDAgXCIrZS5wcm90b2NvbCtcIiB3ZWJydGMtZGF0YWNoYW5uZWxcXHJcXG5cIjpcImF1ZGlvXCI9PT1lLmtpbmQ/bis9XCJtPWF1ZGlvIDAgVURQL1RMUy9SVFAvU0FWUEYgMFxcclxcbmE9cnRwbWFwOjAgUENNVS84MDAwXFxyXFxuXCI6XCJ2aWRlb1wiPT09ZS5raW5kJiYobis9XCJtPXZpZGVvIDAgVURQL1RMUy9SVFAvU0FWUEYgMTIwXFxyXFxuYT1ydHBtYXA6MTIwIFZQOC85MDAwMFxcclxcblwiKSx2b2lkKG4rPVwiYz1JTiBJUDQgMC4wLjAuMFxcclxcbmE9aW5hY3RpdmVcXHJcXG5hPW1pZDpcIitlLm1pZCtcIlxcclxcblwiKTt2YXIgbztpZihlLnN0cmVhbSlcImF1ZGlvXCI9PT1lLmtpbmQ/bz1lLnN0cmVhbS5nZXRBdWRpb1RyYWNrcygpWzBdOlwidmlkZW9cIj09PWUua2luZCYmKG89ZS5zdHJlYW0uZ2V0VmlkZW9UcmFja3MoKVswXSksbyYmZD49MTUwMTkmJlwidmlkZW9cIj09PWUua2luZCYmIWUuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHgmJihlLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4PXtzc3JjOmUuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5zc3JjKzF9KTt2YXIgYz1hKGUubG9jYWxDYXBhYmlsaXRpZXMsZS5yZW1vdGVDYXBhYmlsaXRpZXMpOyFjLmNvZGVjcy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuXCJydHhcIj09PWUubmFtZS50b0xvd2VyQ2FzZSgpfSkubGVuZ3RoJiZlLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4JiZkZWxldGUgZS5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eCxuKz1yKGUsYyxcImFuc3dlclwiLGUuc3RyZWFtLHQuX2R0bHNSb2xlKSxlLnJ0Y3BQYXJhbWV0ZXJzJiZlLnJ0Y3BQYXJhbWV0ZXJzLnJlZHVjZWRTaXplJiYobis9XCJhPXJ0Y3AtcnNpemVcXHJcXG5cIil9fSk7dmFyIHM9bmV3IGMuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKHt0eXBlOlwiYW5zd2VyXCIsc2RwOm59KTtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHMpfSxmLnByb3RvdHlwZS5hZGRJY2VDYW5kaWRhdGU9ZnVuY3Rpb24odCl7dmFyIHIsbj10aGlzO3JldHVybiB0JiZ2b2lkIDA9PT10LnNkcE1MaW5lSW5kZXgmJiF0LnNkcE1pZD9Qcm9taXNlLnJlamVjdChuZXcgVHlwZUVycm9yKFwic2RwTUxpbmVJbmRleCBvciBzZHBNaWQgcmVxdWlyZWRcIikpOm5ldyBQcm9taXNlKGZ1bmN0aW9uKGEsaSl7aWYoIW4uX3JlbW90ZURlc2NyaXB0aW9uKXJldHVybiBpKG8oXCJJbnZhbGlkU3RhdGVFcnJvclwiLFwiQ2FuIG5vdCBhZGQgSUNFIGNhbmRpZGF0ZSB3aXRob3V0IGEgcmVtb3RlIGRlc2NyaXB0aW9uXCIpKTtpZih0JiZcIlwiIT09dC5jYW5kaWRhdGUpe3ZhciBjPXQuc2RwTUxpbmVJbmRleDtpZih0LnNkcE1pZClmb3IodmFyIGQ9MDtkPG4udHJhbnNjZWl2ZXJzLmxlbmd0aDtkKyspaWYobi50cmFuc2NlaXZlcnNbZF0ubWlkPT09dC5zZHBNaWQpe2M9ZDticmVha312YXIgcD1uLnRyYW5zY2VpdmVyc1tjXTtpZighcClyZXR1cm4gaShvKFwiT3BlcmF0aW9uRXJyb3JcIixcIkNhbiBub3QgYWRkIElDRSBjYW5kaWRhdGVcIikpO2lmKHAucmVqZWN0ZWQpcmV0dXJuIGEoKTt2YXIgbD1PYmplY3Qua2V5cyh0LmNhbmRpZGF0ZSkubGVuZ3RoPjA/ZS5wYXJzZUNhbmRpZGF0ZSh0LmNhbmRpZGF0ZSk6e307aWYoXCJ0Y3BcIj09PWwucHJvdG9jb2wmJigwPT09bC5wb3J0fHw5PT09bC5wb3J0KSlyZXR1cm4gYSgpO2lmKGwuY29tcG9uZW50JiYxIT09bC5jb21wb25lbnQpcmV0dXJuIGEoKTtpZigoMD09PWN8fGM+MCYmcC5pY2VUcmFuc3BvcnQhPT1uLnRyYW5zY2VpdmVyc1swXS5pY2VUcmFuc3BvcnQpJiYhcyhwLmljZVRyYW5zcG9ydCxsKSlyZXR1cm4gaShvKFwiT3BlcmF0aW9uRXJyb3JcIixcIkNhbiBub3QgYWRkIElDRSBjYW5kaWRhdGVcIikpO3ZhciBmPXQuY2FuZGlkYXRlLnRyaW0oKTswPT09Zi5pbmRleE9mKFwiYT1cIikmJihmPWYuc3Vic3RyKDIpKSwocj1lLmdldE1lZGlhU2VjdGlvbnMobi5fcmVtb3RlRGVzY3JpcHRpb24uc2RwKSlbY10rPVwiYT1cIisobC50eXBlP2Y6XCJlbmQtb2YtY2FuZGlkYXRlc1wiKStcIlxcclxcblwiLG4uX3JlbW90ZURlc2NyaXB0aW9uLnNkcD1lLmdldERlc2NyaXB0aW9uKG4uX3JlbW90ZURlc2NyaXB0aW9uLnNkcCkrci5qb2luKFwiXCIpfWVsc2UgZm9yKHZhciB1PTA7dTxuLnRyYW5zY2VpdmVycy5sZW5ndGgmJihuLnRyYW5zY2VpdmVyc1t1XS5yZWplY3RlZHx8KG4udHJhbnNjZWl2ZXJzW3VdLmljZVRyYW5zcG9ydC5hZGRSZW1vdGVDYW5kaWRhdGUoe30pLChyPWUuZ2V0TWVkaWFTZWN0aW9ucyhuLl9yZW1vdGVEZXNjcmlwdGlvbi5zZHApKVt1XSs9XCJhPWVuZC1vZi1jYW5kaWRhdGVzXFxyXFxuXCIsbi5fcmVtb3RlRGVzY3JpcHRpb24uc2RwPWUuZ2V0RGVzY3JpcHRpb24obi5fcmVtb3RlRGVzY3JpcHRpb24uc2RwKStyLmpvaW4oXCJcIiksIW4udXNpbmdCdW5kbGUpKTt1KyspO2EoKX0pfSxmLnByb3RvdHlwZS5nZXRTdGF0cz1mdW5jdGlvbihlKXtpZihlJiZlIGluc3RhbmNlb2YgYy5NZWRpYVN0cmVhbVRyYWNrKXt2YXIgdD1udWxsO2lmKHRoaXMudHJhbnNjZWl2ZXJzLmZvckVhY2goZnVuY3Rpb24ocil7ci5ydHBTZW5kZXImJnIucnRwU2VuZGVyLnRyYWNrPT09ZT90PXIucnRwU2VuZGVyOnIucnRwUmVjZWl2ZXImJnIucnRwUmVjZWl2ZXIudHJhY2s9PT1lJiYodD1yLnJ0cFJlY2VpdmVyKX0pLCF0KXRocm93IG8oXCJJbnZhbGlkQWNjZXNzRXJyb3JcIixcIkludmFsaWQgc2VsZWN0b3IuXCIpO3JldHVybiB0LmdldFN0YXRzKCl9dmFyIHI9W107cmV0dXJuIHRoaXMudHJhbnNjZWl2ZXJzLmZvckVhY2goZnVuY3Rpb24oZSl7W1wicnRwU2VuZGVyXCIsXCJydHBSZWNlaXZlclwiLFwiaWNlR2F0aGVyZXJcIixcImljZVRyYW5zcG9ydFwiLFwiZHRsc1RyYW5zcG9ydFwiXS5mb3JFYWNoKGZ1bmN0aW9uKHQpe2VbdF0mJnIucHVzaChlW3RdLmdldFN0YXRzKCkpfSl9KSxQcm9taXNlLmFsbChyKS50aGVuKGZ1bmN0aW9uKGUpe3ZhciB0PW5ldyBNYXA7cmV0dXJuIGUuZm9yRWFjaChmdW5jdGlvbihlKXtlLmZvckVhY2goZnVuY3Rpb24oZSl7dC5zZXQoZS5pZCxlKX0pfSksdH0pfTtbXCJSVENSdHBTZW5kZXJcIixcIlJUQ1J0cFJlY2VpdmVyXCIsXCJSVENJY2VHYXRoZXJlclwiLFwiUlRDSWNlVHJhbnNwb3J0XCIsXCJSVENEdGxzVHJhbnNwb3J0XCJdLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHI9Y1tlXTtpZihyJiZyLnByb3RvdHlwZSYmci5wcm90b3R5cGUuZ2V0U3RhdHMpe3ZhciBuPXIucHJvdG90eXBlLmdldFN0YXRzO3IucHJvdG90eXBlLmdldFN0YXRzPWZ1bmN0aW9uKCl7cmV0dXJuIG4uYXBwbHkodGhpcykudGhlbihmdW5jdGlvbihlKXt2YXIgcj1uZXcgTWFwO3JldHVybiBPYmplY3Qua2V5cyhlKS5mb3JFYWNoKGZ1bmN0aW9uKG4pe2Vbbl0udHlwZT10KGVbbl0pLHIuc2V0KG4sZVtuXSl9KSxyfSl9fX0pO3ZhciB1PVtcImNyZWF0ZU9mZmVyXCIsXCJjcmVhdGVBbnN3ZXJcIl07cmV0dXJuIHUuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgdD1mLnByb3RvdHlwZVtlXTtmLnByb3RvdHlwZVtlXT1mdW5jdGlvbigpe3ZhciBlPWFyZ3VtZW50cztyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBlWzBdfHxcImZ1bmN0aW9uXCI9PXR5cGVvZiBlWzFdP3QuYXBwbHkodGhpcyxbYXJndW1lbnRzWzJdXSkudGhlbihmdW5jdGlvbih0KXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBlWzBdJiZlWzBdLmFwcGx5KG51bGwsW3RdKX0sZnVuY3Rpb24odCl7XCJmdW5jdGlvblwiPT10eXBlb2YgZVsxXSYmZVsxXS5hcHBseShudWxsLFt0XSl9KTp0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX19KSwodT1bXCJzZXRMb2NhbERlc2NyaXB0aW9uXCIsXCJzZXRSZW1vdGVEZXNjcmlwdGlvblwiLFwiYWRkSWNlQ2FuZGlkYXRlXCJdKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciB0PWYucHJvdG90eXBlW2VdO2YucHJvdG90eXBlW2VdPWZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzO3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIGVbMV18fFwiZnVuY3Rpb25cIj09dHlwZW9mIGVbMl0/dC5hcHBseSh0aGlzLGFyZ3VtZW50cykudGhlbihmdW5jdGlvbigpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGVbMV0mJmVbMV0uYXBwbHkobnVsbCl9LGZ1bmN0aW9uKHQpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGVbMl0mJmVbMl0uYXBwbHkobnVsbCxbdF0pfSk6dC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSksW1wiZ2V0U3RhdHNcIl0uZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgdD1mLnByb3RvdHlwZVtlXTtmLnByb3RvdHlwZVtlXT1mdW5jdGlvbigpe3ZhciBlPWFyZ3VtZW50cztyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBlWzFdP3QuYXBwbHkodGhpcyxhcmd1bWVudHMpLnRoZW4oZnVuY3Rpb24oKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBlWzFdJiZlWzFdLmFwcGx5KG51bGwpfSk6dC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSksZn07XG59LHtcInNkcFwiOlwiWUh2aFwifV0sXCJZZEt4XCI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpIHtcblwidXNlIHN0cmljdFwiO2Z1bmN0aW9uIGUoZSl7dmFyIHI9ZSYmZS5uYXZpZ2F0b3IsdD1yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEuYmluZChyLm1lZGlhRGV2aWNlcyk7ci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhPWZ1bmN0aW9uKGUpe3JldHVybiB0KGUpLmNhdGNoKGZ1bmN0aW9uKGUpe3JldHVybiBQcm9taXNlLnJlamVjdChmdW5jdGlvbihlKXtyZXR1cm57bmFtZTp7UGVybWlzc2lvbkRlbmllZEVycm9yOlwiTm90QWxsb3dlZEVycm9yXCJ9W2UubmFtZV18fGUubmFtZSxtZXNzYWdlOmUubWVzc2FnZSxjb25zdHJhaW50OmUuY29uc3RyYWludCx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLm5hbWV9fX0oZSkpfSl9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGV4cG9ydHMuc2hpbUdldFVzZXJNZWRpYT1lO1xufSx7fV0sXCJQM2JWXCI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpIHtcblwidXNlIHN0cmljdFwiO2Z1bmN0aW9uIGUoZSl7XCJnZXREaXNwbGF5TWVkaWFcImluIGUubmF2aWdhdG9yJiZlLm5hdmlnYXRvci5tZWRpYURldmljZXMmJihlLm5hdmlnYXRvci5tZWRpYURldmljZXMmJlwiZ2V0RGlzcGxheU1lZGlhXCJpbiBlLm5hdmlnYXRvci5tZWRpYURldmljZXN8fChlLm5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0RGlzcGxheU1lZGlhPWUubmF2aWdhdG9yLmdldERpc3BsYXlNZWRpYS5iaW5kKGUubmF2aWdhdG9yKSkpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGV4cG9ydHMuc2hpbUdldERpc3BsYXlNZWRpYT1lO1xufSx7fV0sXCJYUmljXCI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpIHtcblwidXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGV4cG9ydHMuc2hpbVBlZXJDb25uZWN0aW9uPXAsZXhwb3J0cy5zaGltUmVwbGFjZVRyYWNrPWEsT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJzaGltR2V0VXNlck1lZGlhXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG4uc2hpbUdldFVzZXJNZWRpYX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcInNoaW1HZXREaXNwbGF5TWVkaWFcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gaS5zaGltR2V0RGlzcGxheU1lZGlhfX0pO3ZhciBlPXMocmVxdWlyZShcIi4uL3V0aWxzXCIpKSx0PXJlcXVpcmUoXCIuL2ZpbHRlcmljZXNlcnZlcnNcIikscj1vKHJlcXVpcmUoXCJydGNwZWVyY29ubmVjdGlvbi1zaGltXCIpKSxuPXJlcXVpcmUoXCIuL2dldHVzZXJtZWRpYVwiKSxpPXJlcXVpcmUoXCIuL2dldGRpc3BsYXltZWRpYVwiKTtmdW5jdGlvbiBvKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1mdW5jdGlvbiBjKCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgV2Vha01hcClyZXR1cm4gbnVsbDt2YXIgZT1uZXcgV2Vha01hcDtyZXR1cm4gYz1mdW5jdGlvbigpe3JldHVybiBlfSxlfWZ1bmN0aW9uIHMoZSl7aWYoZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO2lmKG51bGw9PT1lfHxcIm9iamVjdFwiIT10eXBlb2YgZSYmXCJmdW5jdGlvblwiIT10eXBlb2YgZSlyZXR1cm57ZGVmYXVsdDplfTt2YXIgdD1jKCk7aWYodCYmdC5oYXMoZSkpcmV0dXJuIHQuZ2V0KGUpO3ZhciByPXt9LG49T2JqZWN0LmRlZmluZVByb3BlcnR5JiZPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO2Zvcih2YXIgaSBpbiBlKWlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLGkpKXt2YXIgbz1uP09iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSxpKTpudWxsO28mJihvLmdldHx8by5zZXQpP09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLGksbyk6cltpXT1lW2ldfXJldHVybiByLmRlZmF1bHQ9ZSx0JiZ0LnNldChlLHIpLHJ9ZnVuY3Rpb24gcChuLGkpe2lmKG4uUlRDSWNlR2F0aGVyZXImJihuLlJUQ0ljZUNhbmRpZGF0ZXx8KG4uUlRDSWNlQ2FuZGlkYXRlPWZ1bmN0aW9uKGUpe3JldHVybiBlfSksbi5SVENTZXNzaW9uRGVzY3JpcHRpb258fChuLlJUQ1Nlc3Npb25EZXNjcmlwdGlvbj1mdW5jdGlvbihlKXtyZXR1cm4gZX0pLGkudmVyc2lvbjwxNTAyNSkpe3ZhciBvPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iobi5NZWRpYVN0cmVhbVRyYWNrLnByb3RvdHlwZSxcImVuYWJsZWRcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KG4uTWVkaWFTdHJlYW1UcmFjay5wcm90b3R5cGUsXCJlbmFibGVkXCIse3NldDpmdW5jdGlvbihlKXtvLnNldC5jYWxsKHRoaXMsZSk7dmFyIHQ9bmV3IEV2ZW50KFwiZW5hYmxlZFwiKTt0LmVuYWJsZWQ9ZSx0aGlzLmRpc3BhdGNoRXZlbnQodCl9fSl9IW4uUlRDUnRwU2VuZGVyfHxcImR0bWZcImluIG4uUlRDUnRwU2VuZGVyLnByb3RvdHlwZXx8T2JqZWN0LmRlZmluZVByb3BlcnR5KG4uUlRDUnRwU2VuZGVyLnByb3RvdHlwZSxcImR0bWZcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHZvaWQgMD09PXRoaXMuX2R0bWYmJihcImF1ZGlvXCI9PT10aGlzLnRyYWNrLmtpbmQ/dGhpcy5fZHRtZj1uZXcgbi5SVENEdG1mU2VuZGVyKHRoaXMpOlwidmlkZW9cIj09PXRoaXMudHJhY2sua2luZCYmKHRoaXMuX2R0bWY9bnVsbCkpLHRoaXMuX2R0bWZ9fSksbi5SVENEdG1mU2VuZGVyJiYhbi5SVENEVE1GU2VuZGVyJiYobi5SVENEVE1GU2VuZGVyPW4uUlRDRHRtZlNlbmRlcik7dmFyIGM9KDAsci5kZWZhdWx0KShuLGkudmVyc2lvbik7bi5SVENQZWVyQ29ubmVjdGlvbj1mdW5jdGlvbihyKXtyZXR1cm4gciYmci5pY2VTZXJ2ZXJzJiYoci5pY2VTZXJ2ZXJzPSgwLHQuZmlsdGVySWNlU2VydmVycykoci5pY2VTZXJ2ZXJzLGkudmVyc2lvbiksZS5sb2coXCJJQ0Ugc2VydmVycyBhZnRlciBmaWx0ZXJpbmc6XCIsci5pY2VTZXJ2ZXJzKSksbmV3IGMocil9LG4uUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlPWMucHJvdG90eXBlfWZ1bmN0aW9uIGEoZSl7IWUuUlRDUnRwU2VuZGVyfHxcInJlcGxhY2VUcmFja1wiaW4gZS5SVENSdHBTZW5kZXIucHJvdG90eXBlfHwoZS5SVENSdHBTZW5kZXIucHJvdG90eXBlLnJlcGxhY2VUcmFjaz1lLlJUQ1J0cFNlbmRlci5wcm90b3R5cGUuc2V0VHJhY2spfVxufSx7XCIuLi91dGlsc1wiOlwiaVN4Q1wiLFwiLi9maWx0ZXJpY2VzZXJ2ZXJzXCI6XCJOWjFDXCIsXCJydGNwZWVyY29ubmVjdGlvbi1zaGltXCI6XCJOSjJ1XCIsXCIuL2dldHVzZXJtZWRpYVwiOlwiWWRLeFwiLFwiLi9nZXRkaXNwbGF5bWVkaWFcIjpcIlAzYlZcIn1dLFwiR3pTdlwiOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKSB7XG5cInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLnNoaW1HZXRVc2VyTWVkaWE9bjt2YXIgZT1vKHJlcXVpcmUoXCIuLi91dGlsc1wiKSk7ZnVuY3Rpb24gdCgpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIFdlYWtNYXApcmV0dXJuIG51bGw7dmFyIGU9bmV3IFdlYWtNYXA7cmV0dXJuIHQ9ZnVuY3Rpb24oKXtyZXR1cm4gZX0sZX1mdW5jdGlvbiBvKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTtpZihudWxsPT09ZXx8XCJvYmplY3RcIiE9dHlwZW9mIGUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGUpcmV0dXJue2RlZmF1bHQ6ZX07dmFyIG89dCgpO2lmKG8mJm8uaGFzKGUpKXJldHVybiBvLmdldChlKTt2YXIgcj17fSxuPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSYmT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjtmb3IodmFyIGkgaW4gZSlpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxpKSl7dmFyIGE9bj9PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsaSk6bnVsbDthJiYoYS5nZXR8fGEuc2V0KT9PYmplY3QuZGVmaW5lUHJvcGVydHkocixpLGEpOnJbaV09ZVtpXX1yZXR1cm4gci5kZWZhdWx0PWUsbyYmby5zZXQoZSxyKSxyfWZ1bmN0aW9uIHIoZSl7cmV0dXJuKHI9XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZcInN5bWJvbFwiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKGUpe3JldHVybiB0eXBlb2YgZX06ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmZS5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmZSE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2YgZX0pKGUpfWZ1bmN0aW9uIG4odCxvKXt2YXIgbj10JiZ0Lm5hdmlnYXRvcixpPXQmJnQuTWVkaWFTdHJlYW1UcmFjaztpZihuLmdldFVzZXJNZWRpYT1mdW5jdGlvbih0LG8scil7ZS5kZXByZWNhdGVkKFwibmF2aWdhdG9yLmdldFVzZXJNZWRpYVwiLFwibmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWFcIiksbi5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKHQpLnRoZW4obyxyKX0sIShvLnZlcnNpb24+NTUmJlwiYXV0b0dhaW5Db250cm9sXCJpbiBuLm1lZGlhRGV2aWNlcy5nZXRTdXBwb3J0ZWRDb25zdHJhaW50cygpKSl7dmFyIGE9ZnVuY3Rpb24oZSx0LG8pe3QgaW4gZSYmIShvIGluIGUpJiYoZVtvXT1lW3RdLGRlbGV0ZSBlW3RdKX0scz1uLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEuYmluZChuLm1lZGlhRGV2aWNlcyk7aWYobi5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhPWZ1bmN0aW9uKGUpe3JldHVyblwib2JqZWN0XCI9PT1yKGUpJiZcIm9iamVjdFwiPT09cihlLmF1ZGlvKSYmKGU9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShlKSksYShlLmF1ZGlvLFwiYXV0b0dhaW5Db250cm9sXCIsXCJtb3pBdXRvR2FpbkNvbnRyb2xcIiksYShlLmF1ZGlvLFwibm9pc2VTdXBwcmVzc2lvblwiLFwibW96Tm9pc2VTdXBwcmVzc2lvblwiKSkscyhlKX0saSYmaS5wcm90b3R5cGUuZ2V0U2V0dGluZ3Mpe3ZhciBwPWkucHJvdG90eXBlLmdldFNldHRpbmdzO2kucHJvdG90eXBlLmdldFNldHRpbmdzPWZ1bmN0aW9uKCl7dmFyIGU9cC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIGEoZSxcIm1vekF1dG9HYWluQ29udHJvbFwiLFwiYXV0b0dhaW5Db250cm9sXCIpLGEoZSxcIm1vek5vaXNlU3VwcHJlc3Npb25cIixcIm5vaXNlU3VwcHJlc3Npb25cIiksZX19aWYoaSYmaS5wcm90b3R5cGUuYXBwbHlDb25zdHJhaW50cyl7dmFyIHU9aS5wcm90b3R5cGUuYXBwbHlDb25zdHJhaW50cztpLnByb3RvdHlwZS5hcHBseUNvbnN0cmFpbnRzPWZ1bmN0aW9uKGUpe3JldHVyblwiYXVkaW9cIj09PXRoaXMua2luZCYmXCJvYmplY3RcIj09PXIoZSkmJihlPUpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZSkpLGEoZSxcImF1dG9HYWluQ29udHJvbFwiLFwibW96QXV0b0dhaW5Db250cm9sXCIpLGEoZSxcIm5vaXNlU3VwcHJlc3Npb25cIixcIm1vek5vaXNlU3VwcHJlc3Npb25cIikpLHUuYXBwbHkodGhpcyxbZV0pfX19fVxufSx7XCIuLi91dGlsc1wiOlwiaVN4Q1wifV0sXCJVdUdVXCI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpIHtcblwidXNlIHN0cmljdFwiO2Z1bmN0aW9uIGUoZSxpKXtlLm5hdmlnYXRvci5tZWRpYURldmljZXMmJlwiZ2V0RGlzcGxheU1lZGlhXCJpbiBlLm5hdmlnYXRvci5tZWRpYURldmljZXN8fGUubmF2aWdhdG9yLm1lZGlhRGV2aWNlcyYmKGUubmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXREaXNwbGF5TWVkaWE9ZnVuY3Rpb24oYSl7aWYoIWF8fCFhLnZpZGVvKXt2YXIgdD1uZXcgRE9NRXhjZXB0aW9uKFwiZ2V0RGlzcGxheU1lZGlhIHdpdGhvdXQgdmlkZW8gY29uc3RyYWludHMgaXMgdW5kZWZpbmVkXCIpO3JldHVybiB0Lm5hbWU9XCJOb3RGb3VuZEVycm9yXCIsdC5jb2RlPTgsUHJvbWlzZS5yZWplY3QodCl9cmV0dXJuITA9PT1hLnZpZGVvP2EudmlkZW89e21lZGlhU291cmNlOml9OmEudmlkZW8ubWVkaWFTb3VyY2U9aSxlLm5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKGEpfSl9T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5zaGltR2V0RGlzcGxheU1lZGlhPWU7XG59LHt9XSxcIkZ6ZHJcIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cykge1xuXCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5zaGltT25UcmFjaz1zLGV4cG9ydHMuc2hpbVBlZXJDb25uZWN0aW9uPWMsZXhwb3J0cy5zaGltU2VuZGVyR2V0U3RhdHM9cCxleHBvcnRzLnNoaW1SZWNlaXZlckdldFN0YXRzPXUsZXhwb3J0cy5zaGltUmVtb3ZlU3RyZWFtPWYsZXhwb3J0cy5zaGltUlRDRGF0YUNoYW5uZWw9ZCxleHBvcnRzLnNoaW1BZGRUcmFuc2NlaXZlcj1DLGV4cG9ydHMuc2hpbUdldFBhcmFtZXRlcnM9eSxleHBvcnRzLnNoaW1DcmVhdGVPZmZlcj1sLGV4cG9ydHMuc2hpbUNyZWF0ZUFuc3dlcj1tLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwic2hpbUdldFVzZXJNZWRpYVwiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiB0LnNoaW1HZXRVc2VyTWVkaWF9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJzaGltR2V0RGlzcGxheU1lZGlhXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG4uc2hpbUdldERpc3BsYXlNZWRpYX19KTt2YXIgZT1vKHJlcXVpcmUoXCIuLi91dGlsc1wiKSksdD1yZXF1aXJlKFwiLi9nZXR1c2VybWVkaWFcIiksbj1yZXF1aXJlKFwiLi9nZXRkaXNwbGF5bWVkaWFcIik7ZnVuY3Rpb24gcigpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIFdlYWtNYXApcmV0dXJuIG51bGw7dmFyIGU9bmV3IFdlYWtNYXA7cmV0dXJuIHI9ZnVuY3Rpb24oKXtyZXR1cm4gZX0sZX1mdW5jdGlvbiBvKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTtpZihudWxsPT09ZXx8XCJvYmplY3RcIiE9dHlwZW9mIGUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGUpcmV0dXJue2RlZmF1bHQ6ZX07dmFyIHQ9cigpO2lmKHQmJnQuaGFzKGUpKXJldHVybiB0LmdldChlKTt2YXIgbj17fSxvPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSYmT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjtmb3IodmFyIGkgaW4gZSlpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxpKSl7dmFyIGE9bz9PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsaSk6bnVsbDthJiYoYS5nZXR8fGEuc2V0KT9PYmplY3QuZGVmaW5lUHJvcGVydHkobixpLGEpOm5baV09ZVtpXX1yZXR1cm4gbi5kZWZhdWx0PWUsdCYmdC5zZXQoZSxuKSxufWZ1bmN0aW9uIGkoZSx0LG4pe3JldHVybiB0IGluIGU/T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCx7dmFsdWU6bixlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMH0pOmVbdF09bixlfWZ1bmN0aW9uIGEoZSl7cmV0dXJuKGE9XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZcInN5bWJvbFwiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKGUpe3JldHVybiB0eXBlb2YgZX06ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmZS5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmZSE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2YgZX0pKGUpfWZ1bmN0aW9uIHMoZSl7XCJvYmplY3RcIj09PWEoZSkmJmUuUlRDVHJhY2tFdmVudCYmXCJyZWNlaXZlclwiaW4gZS5SVENUcmFja0V2ZW50LnByb3RvdHlwZSYmIShcInRyYW5zY2VpdmVyXCJpbiBlLlJUQ1RyYWNrRXZlbnQucHJvdG90eXBlKSYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUuUlRDVHJhY2tFdmVudC5wcm90b3R5cGUsXCJ0cmFuc2NlaXZlclwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm57cmVjZWl2ZXI6dGhpcy5yZWNlaXZlcn19fSl9ZnVuY3Rpb24gYyhlLHQpe2lmKFwib2JqZWN0XCI9PT1hKGUpJiYoZS5SVENQZWVyQ29ubmVjdGlvbnx8ZS5tb3pSVENQZWVyQ29ubmVjdGlvbikpeyFlLlJUQ1BlZXJDb25uZWN0aW9uJiZlLm1velJUQ1BlZXJDb25uZWN0aW9uJiYoZS5SVENQZWVyQ29ubmVjdGlvbj1lLm1velJUQ1BlZXJDb25uZWN0aW9uKSx0LnZlcnNpb248NTMmJltcInNldExvY2FsRGVzY3JpcHRpb25cIixcInNldFJlbW90ZURlc2NyaXB0aW9uXCIsXCJhZGRJY2VDYW5kaWRhdGVcIl0uZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgbj1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVt0XSxyPWkoe30sdCxmdW5jdGlvbigpe3JldHVybiBhcmd1bWVudHNbMF09bmV3KFwiYWRkSWNlQ2FuZGlkYXRlXCI9PT10P2UuUlRDSWNlQ2FuZGlkYXRlOmUuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKShhcmd1bWVudHNbMF0pLG4uYXBwbHkodGhpcyxhcmd1bWVudHMpfSk7ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVbdF09clt0XX0pO3ZhciBuPXtpbmJvdW5kcnRwOlwiaW5ib3VuZC1ydHBcIixvdXRib3VuZHJ0cDpcIm91dGJvdW5kLXJ0cFwiLGNhbmRpZGF0ZXBhaXI6XCJjYW5kaWRhdGUtcGFpclwiLGxvY2FsY2FuZGlkYXRlOlwibG9jYWwtY2FuZGlkYXRlXCIscmVtb3RlY2FuZGlkYXRlOlwicmVtb3RlLWNhbmRpZGF0ZVwifSxyPWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFN0YXRzO2UuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFN0YXRzPWZ1bmN0aW9uKCl7dmFyW2UsbyxpXT1hcmd1bWVudHM7cmV0dXJuIHIuYXBwbHkodGhpcyxbZXx8bnVsbF0pLnRoZW4oZnVuY3Rpb24oZSl7aWYodC52ZXJzaW9uPDUzJiYhbyl0cnl7ZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UudHlwZT1uW2UudHlwZV18fGUudHlwZX0pfWNhdGNoKHIpe2lmKFwiVHlwZUVycm9yXCIhPT1yLm5hbWUpdGhyb3cgcjtlLmZvckVhY2goZnVuY3Rpb24odCxyKXtlLnNldChyLE9iamVjdC5hc3NpZ24oe30sdCx7dHlwZTpuW3QudHlwZV18fHQudHlwZX0pKX0pfXJldHVybiBlfSkudGhlbihvLGkpfX19ZnVuY3Rpb24gcChlKXtpZihcIm9iamVjdFwiPT09YShlKSYmZS5SVENQZWVyQ29ubmVjdGlvbiYmZS5SVENSdHBTZW5kZXImJiEoZS5SVENSdHBTZW5kZXImJlwiZ2V0U3RhdHNcImluIGUuUlRDUnRwU2VuZGVyLnByb3RvdHlwZSkpe3ZhciB0PWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFNlbmRlcnM7dCYmKGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFNlbmRlcnM9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLG49dC5hcHBseSh0aGlzLFtdKTtyZXR1cm4gbi5mb3JFYWNoKGZ1bmN0aW9uKHQpe3JldHVybiB0Ll9wYz1lfSksbn0pO3ZhciBuPWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYWNrO24mJihlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRUcmFjaz1mdW5jdGlvbigpe3ZhciBlPW4uYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybiBlLl9wYz10aGlzLGV9KSxlLlJUQ1J0cFNlbmRlci5wcm90b3R5cGUuZ2V0U3RhdHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50cmFjaz90aGlzLl9wYy5nZXRTdGF0cyh0aGlzLnRyYWNrKTpQcm9taXNlLnJlc29sdmUobmV3IE1hcCl9fX1mdW5jdGlvbiB1KHQpe2lmKFwib2JqZWN0XCI9PT1hKHQpJiZ0LlJUQ1BlZXJDb25uZWN0aW9uJiZ0LlJUQ1J0cFNlbmRlciYmISh0LlJUQ1J0cFNlbmRlciYmXCJnZXRTdGF0c1wiaW4gdC5SVENSdHBSZWNlaXZlci5wcm90b3R5cGUpKXt2YXIgbj10LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRSZWNlaXZlcnM7biYmKHQuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFJlY2VpdmVycz1mdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1uLmFwcGx5KHRoaXMsW10pO3JldHVybiB0LmZvckVhY2goZnVuY3Rpb24odCl7cmV0dXJuIHQuX3BjPWV9KSx0fSksZS53cmFwUGVlckNvbm5lY3Rpb25FdmVudCh0LFwidHJhY2tcIixmdW5jdGlvbihlKXtyZXR1cm4gZS5yZWNlaXZlci5fcGM9ZS5zcmNFbGVtZW50LGV9KSx0LlJUQ1J0cFJlY2VpdmVyLnByb3RvdHlwZS5nZXRTdGF0cz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9wYy5nZXRTdGF0cyh0aGlzLnRyYWNrKX19fWZ1bmN0aW9uIGYodCl7IXQuUlRDUGVlckNvbm5lY3Rpb258fFwicmVtb3ZlU3RyZWFtXCJpbiB0LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZXx8KHQuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnJlbW92ZVN0cmVhbT1mdW5jdGlvbih0KXt2YXIgbj10aGlzO2UuZGVwcmVjYXRlZChcInJlbW92ZVN0cmVhbVwiLFwicmVtb3ZlVHJhY2tcIiksdGhpcy5nZXRTZW5kZXJzKCkuZm9yRWFjaChmdW5jdGlvbihlKXtlLnRyYWNrJiZ0LmdldFRyYWNrcygpLmluY2x1ZGVzKGUudHJhY2spJiZuLnJlbW92ZVRyYWNrKGUpfSl9KX1mdW5jdGlvbiBkKGUpe2UuRGF0YUNoYW5uZWwmJiFlLlJUQ0RhdGFDaGFubmVsJiYoZS5SVENEYXRhQ2hhbm5lbD1lLkRhdGFDaGFubmVsKX1mdW5jdGlvbiBDKGUpe2lmKFwib2JqZWN0XCI9PT1hKGUpJiZlLlJUQ1BlZXJDb25uZWN0aW9uKXt2YXIgdD1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRUcmFuc2NlaXZlcjt0JiYoZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhbnNjZWl2ZXI9ZnVuY3Rpb24oKXt0aGlzLnNldFBhcmFtZXRlcnNQcm9taXNlcz1bXTt2YXIgZT1hcmd1bWVudHNbMV0sbj1lJiZcInNlbmRFbmNvZGluZ3NcImluIGU7biYmZS5zZW5kRW5jb2RpbmdzLmZvckVhY2goZnVuY3Rpb24oZSl7aWYoXCJyaWRcImluIGUpe2lmKCEvXlthLXowLTldezAsMTZ9JC9pLnRlc3QoZS5yaWQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIFJJRCB2YWx1ZSBwcm92aWRlZC5cIil9aWYoXCJzY2FsZVJlc29sdXRpb25Eb3duQnlcImluIGUmJiEocGFyc2VGbG9hdChlLnNjYWxlUmVzb2x1dGlvbkRvd25CeSk+PTEpKXRocm93IG5ldyBSYW5nZUVycm9yKFwic2NhbGVfcmVzb2x1dGlvbl9kb3duX2J5IG11c3QgYmUgPj0gMS4wXCIpO2lmKFwibWF4RnJhbWVyYXRlXCJpbiBlJiYhKHBhcnNlRmxvYXQoZS5tYXhGcmFtZXJhdGUpPj0wKSl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIm1heF9mcmFtZXJhdGUgbXVzdCBiZSA+PSAwLjBcIil9KTt2YXIgcj10LmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpZihuKXt2YXJ7c2VuZGVyOm99PXIsaT1vLmdldFBhcmFtZXRlcnMoKTtcImVuY29kaW5nc1wiaW4gaSYmKDEhPT1pLmVuY29kaW5ncy5sZW5ndGh8fDAhPT1PYmplY3Qua2V5cyhpLmVuY29kaW5nc1swXSkubGVuZ3RoKXx8KGkuZW5jb2RpbmdzPWUuc2VuZEVuY29kaW5ncyxvLnNlbmRFbmNvZGluZ3M9ZS5zZW5kRW5jb2RpbmdzLHRoaXMuc2V0UGFyYW1ldGVyc1Byb21pc2VzLnB1c2goby5zZXRQYXJhbWV0ZXJzKGkpLnRoZW4oZnVuY3Rpb24oKXtkZWxldGUgby5zZW5kRW5jb2RpbmdzfSkuY2F0Y2goZnVuY3Rpb24oKXtkZWxldGUgby5zZW5kRW5jb2RpbmdzfSkpKX1yZXR1cm4gcn0pfX1mdW5jdGlvbiB5KGUpe2lmKFwib2JqZWN0XCI9PT1hKGUpJiZlLlJUQ1J0cFNlbmRlcil7dmFyIHQ9ZS5SVENSdHBTZW5kZXIucHJvdG90eXBlLmdldFBhcmFtZXRlcnM7dCYmKGUuUlRDUnRwU2VuZGVyLnByb3RvdHlwZS5nZXRQYXJhbWV0ZXJzPWZ1bmN0aW9uKCl7dmFyIGU9dC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuXCJlbmNvZGluZ3NcImluIGV8fChlLmVuY29kaW5ncz1bXS5jb25jYXQodGhpcy5zZW5kRW5jb2RpbmdzfHxbe31dKSksZX0pfX1mdW5jdGlvbiBsKGUpe2lmKFwib2JqZWN0XCI9PT1hKGUpJiZlLlJUQ1BlZXJDb25uZWN0aW9uKXt2YXIgdD1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5jcmVhdGVPZmZlcjtlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5jcmVhdGVPZmZlcj1mdW5jdGlvbigpe3ZhciBlPWFyZ3VtZW50cyxuPXRoaXM7cmV0dXJuIHRoaXMuc2V0UGFyYW1ldGVyc1Byb21pc2VzJiZ0aGlzLnNldFBhcmFtZXRlcnNQcm9taXNlcy5sZW5ndGg/UHJvbWlzZS5hbGwodGhpcy5zZXRQYXJhbWV0ZXJzUHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gdC5hcHBseShuLGUpfSkuZmluYWxseShmdW5jdGlvbigpe24uc2V0UGFyYW1ldGVyc1Byb21pc2VzPVtdfSk6dC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fX1mdW5jdGlvbiBtKGUpe2lmKFwib2JqZWN0XCI9PT1hKGUpJiZlLlJUQ1BlZXJDb25uZWN0aW9uKXt2YXIgdD1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5jcmVhdGVBbnN3ZXI7ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuY3JlYXRlQW5zd2VyPWZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzLG49dGhpcztyZXR1cm4gdGhpcy5zZXRQYXJhbWV0ZXJzUHJvbWlzZXMmJnRoaXMuc2V0UGFyYW1ldGVyc1Byb21pc2VzLmxlbmd0aD9Qcm9taXNlLmFsbCh0aGlzLnNldFBhcmFtZXRlcnNQcm9taXNlcykudGhlbihmdW5jdGlvbigpe3JldHVybiB0LmFwcGx5KG4sZSl9KS5maW5hbGx5KGZ1bmN0aW9uKCl7bi5zZXRQYXJhbWV0ZXJzUHJvbWlzZXM9W119KTp0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX19fVxufSx7XCIuLi91dGlsc1wiOlwiaVN4Q1wiLFwiLi9nZXR1c2VybWVkaWFcIjpcIkd6U3ZcIixcIi4vZ2V0ZGlzcGxheW1lZGlhXCI6XCJVdUdVXCJ9XSxcInQxbExcIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cykge1xuXCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5zaGltTG9jYWxTdHJlYW1zQVBJPW4sZXhwb3J0cy5zaGltUmVtb3RlU3RyZWFtc0FQST1pLGV4cG9ydHMuc2hpbUNhbGxiYWNrc0FQST1hLGV4cG9ydHMuc2hpbUdldFVzZXJNZWRpYT1jLGV4cG9ydHMuc2hpbUNvbnN0cmFpbnRzPXMsZXhwb3J0cy5zaGltUlRDSWNlU2VydmVyVXJscz1kLGV4cG9ydHMuc2hpbVRyYWNrRXZlbnRUcmFuc2NlaXZlcj1mLGV4cG9ydHMuc2hpbUNyZWF0ZU9mZmVyTGVnYWN5PXAsZXhwb3J0cy5zaGltQXVkaW9Db250ZXh0PXU7dmFyIGU9cihyZXF1aXJlKFwiLi4vdXRpbHNcIikpO2Z1bmN0aW9uIHQoKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBXZWFrTWFwKXJldHVybiBudWxsO3ZhciBlPW5ldyBXZWFrTWFwO3JldHVybiB0PWZ1bmN0aW9uKCl7cmV0dXJuIGV9LGV9ZnVuY3Rpb24gcihlKXtpZihlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7aWYobnVsbD09PWV8fFwib2JqZWN0XCIhPXR5cGVvZiBlJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlKXJldHVybntkZWZhdWx0OmV9O3ZhciByPXQoKTtpZihyJiZyLmhhcyhlKSlyZXR1cm4gci5nZXQoZSk7dmFyIG89e30sbj1PYmplY3QuZGVmaW5lUHJvcGVydHkmJk9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7Zm9yKHZhciBpIGluIGUpaWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsaSkpe3ZhciBhPW4/T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLGkpOm51bGw7YSYmKGEuZ2V0fHxhLnNldCk/T2JqZWN0LmRlZmluZVByb3BlcnR5KG8saSxhKTpvW2ldPWVbaV19cmV0dXJuIG8uZGVmYXVsdD1lLHImJnIuc2V0KGUsbyksb31mdW5jdGlvbiBvKGUpe3JldHVybihvPVwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmXCJzeW1ib2xcIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbihlKXtyZXR1cm4gdHlwZW9mIGV9OmZ1bmN0aW9uKGUpe3JldHVybiBlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJmUuY29uc3RydWN0b3I9PT1TeW1ib2wmJmUhPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIGV9KShlKX1mdW5jdGlvbiBuKGUpe2lmKFwib2JqZWN0XCI9PT1vKGUpJiZlLlJUQ1BlZXJDb25uZWN0aW9uKXtpZihcImdldExvY2FsU3RyZWFtc1wiaW4gZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGV8fChlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRMb2NhbFN0cmVhbXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbG9jYWxTdHJlYW1zfHwodGhpcy5fbG9jYWxTdHJlYW1zPVtdKSx0aGlzLl9sb2NhbFN0cmVhbXN9KSwhKFwiYWRkU3RyZWFtXCJpbiBlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSkpe3ZhciB0PWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYWNrO2UuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFN0cmVhbT1mdW5jdGlvbihlKXt2YXIgcj10aGlzO3RoaXMuX2xvY2FsU3RyZWFtc3x8KHRoaXMuX2xvY2FsU3RyZWFtcz1bXSksdGhpcy5fbG9jYWxTdHJlYW1zLmluY2x1ZGVzKGUpfHx0aGlzLl9sb2NhbFN0cmVhbXMucHVzaChlKSxlLmdldEF1ZGlvVHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbihvKXtyZXR1cm4gdC5jYWxsKHIsbyxlKX0pLGUuZ2V0VmlkZW9UcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uKG8pe3JldHVybiB0LmNhbGwocixvLGUpfSl9LGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYWNrPWZ1bmN0aW9uKGUpe2Zvcih2YXIgcj10aGlzLG89YXJndW1lbnRzLmxlbmd0aCxuPW5ldyBBcnJheShvPjE/by0xOjApLGk9MTtpPG87aSsrKW5baS0xXT1hcmd1bWVudHNbaV07cmV0dXJuIG4mJm4uZm9yRWFjaChmdW5jdGlvbihlKXtyLl9sb2NhbFN0cmVhbXM/ci5fbG9jYWxTdHJlYW1zLmluY2x1ZGVzKGUpfHxyLl9sb2NhbFN0cmVhbXMucHVzaChlKTpyLl9sb2NhbFN0cmVhbXM9W2VdfSksdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fVwicmVtb3ZlU3RyZWFtXCJpbiBlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZXx8KGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnJlbW92ZVN0cmVhbT1mdW5jdGlvbihlKXt2YXIgdD10aGlzO3RoaXMuX2xvY2FsU3RyZWFtc3x8KHRoaXMuX2xvY2FsU3RyZWFtcz1bXSk7dmFyIHI9dGhpcy5fbG9jYWxTdHJlYW1zLmluZGV4T2YoZSk7aWYoLTEhPT1yKXt0aGlzLl9sb2NhbFN0cmVhbXMuc3BsaWNlKHIsMSk7dmFyIG89ZS5nZXRUcmFja3MoKTt0aGlzLmdldFNlbmRlcnMoKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe28uaW5jbHVkZXMoZS50cmFjaykmJnQucmVtb3ZlVHJhY2soZSl9KX19KX19ZnVuY3Rpb24gaShlKXtpZihcIm9iamVjdFwiPT09byhlKSYmZS5SVENQZWVyQ29ubmVjdGlvbiYmKFwiZ2V0UmVtb3RlU3RyZWFtc1wiaW4gZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGV8fChlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRSZW1vdGVTdHJlYW1zPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JlbW90ZVN0cmVhbXM/dGhpcy5fcmVtb3RlU3RyZWFtczpbXX0pLCEoXCJvbmFkZHN0cmVhbVwiaW4gZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUpKSl7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLFwib25hZGRzdHJlYW1cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uYWRkc3RyZWFtfSxzZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0aGlzLl9vbmFkZHN0cmVhbSYmKHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImFkZHN0cmVhbVwiLHRoaXMuX29uYWRkc3RyZWFtKSx0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0cmFja1wiLHRoaXMuX29uYWRkc3RyZWFtcG9seSkpLHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcImFkZHN0cmVhbVwiLHRoaXMuX29uYWRkc3RyZWFtPWUpLHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcInRyYWNrXCIsdGhpcy5fb25hZGRzdHJlYW1wb2x5PWZ1bmN0aW9uKGUpe2Uuc3RyZWFtcy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2lmKHQuX3JlbW90ZVN0cmVhbXN8fCh0Ll9yZW1vdGVTdHJlYW1zPVtdKSwhdC5fcmVtb3RlU3RyZWFtcy5pbmNsdWRlcyhlKSl7dC5fcmVtb3RlU3RyZWFtcy5wdXNoKGUpO3ZhciByPW5ldyBFdmVudChcImFkZHN0cmVhbVwiKTtyLnN0cmVhbT1lLHQuZGlzcGF0Y2hFdmVudChyKX19KX0pfX0pO3ZhciB0PWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnNldFJlbW90ZURlc2NyaXB0aW9uO2UuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnNldFJlbW90ZURlc2NyaXB0aW9uPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gdGhpcy5fb25hZGRzdHJlYW1wb2x5fHx0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJ0cmFja1wiLHRoaXMuX29uYWRkc3RyZWFtcG9seT1mdW5jdGlvbih0KXt0LnN0cmVhbXMuZm9yRWFjaChmdW5jdGlvbih0KXtpZihlLl9yZW1vdGVTdHJlYW1zfHwoZS5fcmVtb3RlU3RyZWFtcz1bXSksIShlLl9yZW1vdGVTdHJlYW1zLmluZGV4T2YodCk+PTApKXtlLl9yZW1vdGVTdHJlYW1zLnB1c2godCk7dmFyIHI9bmV3IEV2ZW50KFwiYWRkc3RyZWFtXCIpO3Iuc3RyZWFtPXQsZS5kaXNwYXRjaEV2ZW50KHIpfX0pfSksdC5hcHBseShlLGFyZ3VtZW50cyl9fX1mdW5jdGlvbiBhKGUpe2lmKFwib2JqZWN0XCI9PT1vKGUpJiZlLlJUQ1BlZXJDb25uZWN0aW9uKXt2YXIgdD1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSxyPXQuY3JlYXRlT2ZmZXIsbj10LmNyZWF0ZUFuc3dlcixpPXQuc2V0TG9jYWxEZXNjcmlwdGlvbixhPXQuc2V0UmVtb3RlRGVzY3JpcHRpb24sYz10LmFkZEljZUNhbmRpZGF0ZTt0LmNyZWF0ZU9mZmVyPWZ1bmN0aW9uKGUsdCl7dmFyIG89YXJndW1lbnRzLmxlbmd0aD49Mj9hcmd1bWVudHNbMl06YXJndW1lbnRzWzBdLG49ci5hcHBseSh0aGlzLFtvXSk7cmV0dXJuIHQ/KG4udGhlbihlLHQpLFByb21pc2UucmVzb2x2ZSgpKTpufSx0LmNyZWF0ZUFuc3dlcj1mdW5jdGlvbihlLHQpe3ZhciByPWFyZ3VtZW50cy5sZW5ndGg+PTI/YXJndW1lbnRzWzJdOmFyZ3VtZW50c1swXSxvPW4uYXBwbHkodGhpcyxbcl0pO3JldHVybiB0PyhvLnRoZW4oZSx0KSxQcm9taXNlLnJlc29sdmUoKSk6b307dmFyIHM9ZnVuY3Rpb24oZSx0LHIpe3ZhciBvPWkuYXBwbHkodGhpcyxbZV0pO3JldHVybiByPyhvLnRoZW4odCxyKSxQcm9taXNlLnJlc29sdmUoKSk6b307dC5zZXRMb2NhbERlc2NyaXB0aW9uPXMscz1mdW5jdGlvbihlLHQscil7dmFyIG89YS5hcHBseSh0aGlzLFtlXSk7cmV0dXJuIHI/KG8udGhlbih0LHIpLFByb21pc2UucmVzb2x2ZSgpKTpvfSx0LnNldFJlbW90ZURlc2NyaXB0aW9uPXMscz1mdW5jdGlvbihlLHQscil7dmFyIG89Yy5hcHBseSh0aGlzLFtlXSk7cmV0dXJuIHI/KG8udGhlbih0LHIpLFByb21pc2UucmVzb2x2ZSgpKTpvfSx0LmFkZEljZUNhbmRpZGF0ZT1zfX1mdW5jdGlvbiBjKGUpe3ZhciB0PWUmJmUubmF2aWdhdG9yO2lmKHQubWVkaWFEZXZpY2VzJiZ0Lm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEpe3ZhciByPXQubWVkaWFEZXZpY2VzLG89ci5nZXRVc2VyTWVkaWEuYmluZChyKTt0Lm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWE9ZnVuY3Rpb24oZSl7cmV0dXJuIG8ocyhlKSl9fSF0LmdldFVzZXJNZWRpYSYmdC5tZWRpYURldmljZXMmJnQubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSYmKHQuZ2V0VXNlck1lZGlhPWZ1bmN0aW9uKGUscixvKXt0Lm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoZSkudGhlbihyLG8pfS5iaW5kKHQpKX1mdW5jdGlvbiBzKHQpe3JldHVybiB0JiZ2b2lkIDAhPT10LnZpZGVvP09iamVjdC5hc3NpZ24oe30sdCx7dmlkZW86ZS5jb21wYWN0T2JqZWN0KHQudmlkZW8pfSk6dH1mdW5jdGlvbiBkKHQpe2lmKHQuUlRDUGVlckNvbm5lY3Rpb24pe3ZhciByPXQuUlRDUGVlckNvbm5lY3Rpb247dC5SVENQZWVyQ29ubmVjdGlvbj1mdW5jdGlvbih0LG8pe2lmKHQmJnQuaWNlU2VydmVycyl7Zm9yKHZhciBuPVtdLGk9MDtpPHQuaWNlU2VydmVycy5sZW5ndGg7aSsrKXt2YXIgYT10LmljZVNlcnZlcnNbaV07IWEuaGFzT3duUHJvcGVydHkoXCJ1cmxzXCIpJiZhLmhhc093blByb3BlcnR5KFwidXJsXCIpPyhlLmRlcHJlY2F0ZWQoXCJSVENJY2VTZXJ2ZXIudXJsXCIsXCJSVENJY2VTZXJ2ZXIudXJsc1wiKSwoYT1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGEpKSkudXJscz1hLnVybCxkZWxldGUgYS51cmwsbi5wdXNoKGEpKTpuLnB1c2godC5pY2VTZXJ2ZXJzW2ldKX10LmljZVNlcnZlcnM9bn1yZXR1cm4gbmV3IHIodCxvKX0sdC5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGU9ci5wcm90b3R5cGUsXCJnZW5lcmF0ZUNlcnRpZmljYXRlXCJpbiByJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodC5SVENQZWVyQ29ubmVjdGlvbixcImdlbmVyYXRlQ2VydGlmaWNhdGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHIuZ2VuZXJhdGVDZXJ0aWZpY2F0ZX19KX19ZnVuY3Rpb24gZihlKXtcIm9iamVjdFwiPT09byhlKSYmZS5SVENUcmFja0V2ZW50JiZcInJlY2VpdmVyXCJpbiBlLlJUQ1RyYWNrRXZlbnQucHJvdG90eXBlJiYhKFwidHJhbnNjZWl2ZXJcImluIGUuUlRDVHJhY2tFdmVudC5wcm90b3R5cGUpJiZPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5SVENUcmFja0V2ZW50LnByb3RvdHlwZSxcInRyYW5zY2VpdmVyXCIse2dldDpmdW5jdGlvbigpe3JldHVybntyZWNlaXZlcjp0aGlzLnJlY2VpdmVyfX19KX1mdW5jdGlvbiBwKGUpe3ZhciB0PWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmNyZWF0ZU9mZmVyO2UuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmNyZWF0ZU9mZmVyPWZ1bmN0aW9uKGUpe2lmKGUpe3ZvaWQgMCE9PWUub2ZmZXJUb1JlY2VpdmVBdWRpbyYmKGUub2ZmZXJUb1JlY2VpdmVBdWRpbz0hIWUub2ZmZXJUb1JlY2VpdmVBdWRpbyk7dmFyIHI9dGhpcy5nZXRUcmFuc2NlaXZlcnMoKS5maW5kKGZ1bmN0aW9uKGUpe3JldHVyblwiYXVkaW9cIj09PWUucmVjZWl2ZXIudHJhY2sua2luZH0pOyExPT09ZS5vZmZlclRvUmVjZWl2ZUF1ZGlvJiZyP1wic2VuZHJlY3ZcIj09PXIuZGlyZWN0aW9uP3Iuc2V0RGlyZWN0aW9uP3Iuc2V0RGlyZWN0aW9uKFwic2VuZG9ubHlcIik6ci5kaXJlY3Rpb249XCJzZW5kb25seVwiOlwicmVjdm9ubHlcIj09PXIuZGlyZWN0aW9uJiYoci5zZXREaXJlY3Rpb24/ci5zZXREaXJlY3Rpb24oXCJpbmFjdGl2ZVwiKTpyLmRpcmVjdGlvbj1cImluYWN0aXZlXCIpOiEwIT09ZS5vZmZlclRvUmVjZWl2ZUF1ZGlvfHxyfHx0aGlzLmFkZFRyYW5zY2VpdmVyKFwiYXVkaW9cIiksdm9pZCAwIT09ZS5vZmZlclRvUmVjZWl2ZVZpZGVvJiYoZS5vZmZlclRvUmVjZWl2ZVZpZGVvPSEhZS5vZmZlclRvUmVjZWl2ZVZpZGVvKTt2YXIgbz10aGlzLmdldFRyYW5zY2VpdmVycygpLmZpbmQoZnVuY3Rpb24oZSl7cmV0dXJuXCJ2aWRlb1wiPT09ZS5yZWNlaXZlci50cmFjay5raW5kfSk7ITE9PT1lLm9mZmVyVG9SZWNlaXZlVmlkZW8mJm8/XCJzZW5kcmVjdlwiPT09by5kaXJlY3Rpb24/by5zZXREaXJlY3Rpb24/by5zZXREaXJlY3Rpb24oXCJzZW5kb25seVwiKTpvLmRpcmVjdGlvbj1cInNlbmRvbmx5XCI6XCJyZWN2b25seVwiPT09by5kaXJlY3Rpb24mJihvLnNldERpcmVjdGlvbj9vLnNldERpcmVjdGlvbihcImluYWN0aXZlXCIpOm8uZGlyZWN0aW9uPVwiaW5hY3RpdmVcIik6ITAhPT1lLm9mZmVyVG9SZWNlaXZlVmlkZW98fG98fHRoaXMuYWRkVHJhbnNjZWl2ZXIoXCJ2aWRlb1wiKX1yZXR1cm4gdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fWZ1bmN0aW9uIHUoZSl7XCJvYmplY3RcIiE9PW8oZSl8fGUuQXVkaW9Db250ZXh0fHwoZS5BdWRpb0NvbnRleHQ9ZS53ZWJraXRBdWRpb0NvbnRleHQpfVxufSx7XCIuLi91dGlsc1wiOlwiaVN4Q1wifV0sXCJHT1FLXCI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpIHtcblwidXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGV4cG9ydHMuc2hpbVJUQ0ljZUNhbmRpZGF0ZT1hLGV4cG9ydHMuc2hpbU1heE1lc3NhZ2VTaXplPWMsZXhwb3J0cy5zaGltU2VuZFRocm93VHlwZUVycm9yPXMsZXhwb3J0cy5zaGltQ29ubmVjdGlvblN0YXRlPXAsZXhwb3J0cy5yZW1vdmVFeHRtYXBBbGxvd01peGVkPWQsZXhwb3J0cy5zaGltQWRkSWNlQ2FuZGlkYXRlTnVsbE9yRW1wdHk9dTt2YXIgZT1yKHJlcXVpcmUoXCJzZHBcIikpLHQ9byhyZXF1aXJlKFwiLi91dGlsc1wiKSk7ZnVuY3Rpb24gbigpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIFdlYWtNYXApcmV0dXJuIG51bGw7dmFyIGU9bmV3IFdlYWtNYXA7cmV0dXJuIG49ZnVuY3Rpb24oKXtyZXR1cm4gZX0sZX1mdW5jdGlvbiBvKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTtpZihudWxsPT09ZXx8XCJvYmplY3RcIiE9dHlwZW9mIGUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGUpcmV0dXJue2RlZmF1bHQ6ZX07dmFyIHQ9bigpO2lmKHQmJnQuaGFzKGUpKXJldHVybiB0LmdldChlKTt2YXIgbz17fSxyPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSYmT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjtmb3IodmFyIGkgaW4gZSlpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxpKSl7dmFyIGE9cj9PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsaSk6bnVsbDthJiYoYS5nZXR8fGEuc2V0KT9PYmplY3QuZGVmaW5lUHJvcGVydHkobyxpLGEpOm9baV09ZVtpXX1yZXR1cm4gby5kZWZhdWx0PWUsdCYmdC5zZXQoZSxvKSxvfWZ1bmN0aW9uIHIoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fWZ1bmN0aW9uIGkoZSl7cmV0dXJuKGk9XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZcInN5bWJvbFwiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKGUpe3JldHVybiB0eXBlb2YgZX06ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmZS5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmZSE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2YgZX0pKGUpfWZ1bmN0aW9uIGEobil7aWYobi5SVENJY2VDYW5kaWRhdGUmJiEobi5SVENJY2VDYW5kaWRhdGUmJlwiZm91bmRhdGlvblwiaW4gbi5SVENJY2VDYW5kaWRhdGUucHJvdG90eXBlKSl7dmFyIG89bi5SVENJY2VDYW5kaWRhdGU7bi5SVENJY2VDYW5kaWRhdGU9ZnVuY3Rpb24odCl7aWYoXCJvYmplY3RcIj09PWkodCkmJnQuY2FuZGlkYXRlJiYwPT09dC5jYW5kaWRhdGUuaW5kZXhPZihcImE9XCIpJiYoKHQ9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0KSkpLmNhbmRpZGF0ZT10LmNhbmRpZGF0ZS5zdWJzdHIoMikpLHQuY2FuZGlkYXRlJiZ0LmNhbmRpZGF0ZS5sZW5ndGgpe3ZhciBuPW5ldyBvKHQpLHI9ZS5kZWZhdWx0LnBhcnNlQ2FuZGlkYXRlKHQuY2FuZGlkYXRlKSxhPU9iamVjdC5hc3NpZ24obixyKTtyZXR1cm4gYS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm57Y2FuZGlkYXRlOmEuY2FuZGlkYXRlLHNkcE1pZDphLnNkcE1pZCxzZHBNTGluZUluZGV4OmEuc2RwTUxpbmVJbmRleCx1c2VybmFtZUZyYWdtZW50OmEudXNlcm5hbWVGcmFnbWVudH19LGF9cmV0dXJuIG5ldyBvKHQpfSxuLlJUQ0ljZUNhbmRpZGF0ZS5wcm90b3R5cGU9by5wcm90b3R5cGUsdC53cmFwUGVlckNvbm5lY3Rpb25FdmVudChuLFwiaWNlY2FuZGlkYXRlXCIsZnVuY3Rpb24oZSl7cmV0dXJuIGUuY2FuZGlkYXRlJiZPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcImNhbmRpZGF0ZVwiLHt2YWx1ZTpuZXcgbi5SVENJY2VDYW5kaWRhdGUoZS5jYW5kaWRhdGUpLHdyaXRhYmxlOlwiZmFsc2VcIn0pLGV9KX19ZnVuY3Rpb24gYyh0LG4pe2lmKHQuUlRDUGVlckNvbm5lY3Rpb24pe1wic2N0cFwiaW4gdC5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGV8fE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSxcInNjdHBcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHZvaWQgMD09PXRoaXMuX3NjdHA/bnVsbDp0aGlzLl9zY3RwfX0pO3ZhciBvPXQuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnNldFJlbW90ZURlc2NyaXB0aW9uO3QuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnNldFJlbW90ZURlc2NyaXB0aW9uPWZ1bmN0aW9uKCl7aWYodGhpcy5fc2N0cD1udWxsLFwiY2hyb21lXCI9PT1uLmJyb3dzZXImJm4udmVyc2lvbj49NzYpe3ZhcntzZHBTZW1hbnRpY3M6dH09dGhpcy5nZXRDb25maWd1cmF0aW9uKCk7XCJwbGFuLWJcIj09PXQmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwic2N0cFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdm9pZCAwPT09dGhpcy5fc2N0cD9udWxsOnRoaXMuX3NjdHB9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSl9aWYoZnVuY3Rpb24odCl7aWYoIXR8fCF0LnNkcClyZXR1cm4hMTt2YXIgbj1lLmRlZmF1bHQuc3BsaXRTZWN0aW9ucyh0LnNkcCk7cmV0dXJuIG4uc2hpZnQoKSxuLnNvbWUoZnVuY3Rpb24odCl7dmFyIG49ZS5kZWZhdWx0LnBhcnNlTUxpbmUodCk7cmV0dXJuIG4mJlwiYXBwbGljYXRpb25cIj09PW4ua2luZCYmLTEhPT1uLnByb3RvY29sLmluZGV4T2YoXCJTQ1RQXCIpfSl9KGFyZ3VtZW50c1swXSkpe3ZhciByLGk9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zZHAubWF0Y2goL21vemlsbGEuLi5USElTX0lTX1NEUEFSVEEtKFxcZCspLyk7aWYobnVsbD09PXR8fHQubGVuZ3RoPDIpcmV0dXJuLTE7dmFyIG49cGFyc2VJbnQodFsxXSwxMCk7cmV0dXJuIG4hPW4/LTE6bn0oYXJndW1lbnRzWzBdKSxhPShwPWksZD02NTUzNixcImZpcmVmb3hcIj09PW4uYnJvd3NlciYmKGQ9bi52ZXJzaW9uPDU3Py0xPT09cD8xNjM4NDoyMTQ3NDgzNjM3Om4udmVyc2lvbjw2MD81Nz09PW4udmVyc2lvbj82NTUzNTo2NTUzNjoyMTQ3NDgzNjM3KSxkKSxjPWZ1bmN0aW9uKHQsbyl7dmFyIHI9NjU1MzY7XCJmaXJlZm94XCI9PT1uLmJyb3dzZXImJjU3PT09bi52ZXJzaW9uJiYocj02NTUzNSk7dmFyIGk9ZS5kZWZhdWx0Lm1hdGNoUHJlZml4KHQuc2RwLFwiYT1tYXgtbWVzc2FnZS1zaXplOlwiKTtyZXR1cm4gaS5sZW5ndGg+MD9yPXBhcnNlSW50KGlbMF0uc3Vic3RyKDE5KSwxMCk6XCJmaXJlZm94XCI9PT1uLmJyb3dzZXImJi0xIT09byYmKHI9MjE0NzQ4MzYzNykscn0oYXJndW1lbnRzWzBdLGkpO3I9MD09PWEmJjA9PT1jP051bWJlci5QT1NJVElWRV9JTkZJTklUWTowPT09YXx8MD09PWM/TWF0aC5tYXgoYSxjKTpNYXRoLm1pbihhLGMpO3ZhciBzPXt9O09iamVjdC5kZWZpbmVQcm9wZXJ0eShzLFwibWF4TWVzc2FnZVNpemVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHJ9fSksdGhpcy5fc2N0cD1zfXZhciBwLGQ7cmV0dXJuIG8uYXBwbHkodGhpcyxhcmd1bWVudHMpfX19ZnVuY3Rpb24gcyhlKXtpZihlLlJUQ1BlZXJDb25uZWN0aW9uJiZcImNyZWF0ZURhdGFDaGFubmVsXCJpbiBlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSl7dmFyIG49ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuY3JlYXRlRGF0YUNoYW5uZWw7ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuY3JlYXRlRGF0YUNoYW5uZWw9ZnVuY3Rpb24oKXt2YXIgZT1uLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gbyhlLHRoaXMpLGV9LHQud3JhcFBlZXJDb25uZWN0aW9uRXZlbnQoZSxcImRhdGFjaGFubmVsXCIsZnVuY3Rpb24oZSl7cmV0dXJuIG8oZS5jaGFubmVsLGUudGFyZ2V0KSxlfSl9ZnVuY3Rpb24gbyhlLHQpe3ZhciBuPWUuc2VuZDtlLnNlbmQ9ZnVuY3Rpb24oKXt2YXIgbz1hcmd1bWVudHNbMF0scj1vLmxlbmd0aHx8by5zaXplfHxvLmJ5dGVMZW5ndGg7aWYoXCJvcGVuXCI9PT1lLnJlYWR5U3RhdGUmJnQuc2N0cCYmcj50LnNjdHAubWF4TWVzc2FnZVNpemUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIk1lc3NhZ2UgdG9vIGxhcmdlIChjYW4gc2VuZCBhIG1heGltdW0gb2YgXCIrdC5zY3RwLm1heE1lc3NhZ2VTaXplK1wiIGJ5dGVzKVwiKTtyZXR1cm4gbi5hcHBseShlLGFyZ3VtZW50cyl9fX1mdW5jdGlvbiBwKGUpe2lmKGUuUlRDUGVlckNvbm5lY3Rpb24mJiEoXCJjb25uZWN0aW9uU3RhdGVcImluIGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlKSl7dmFyIHQ9ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGU7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJjb25uZWN0aW9uU3RhdGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJue2NvbXBsZXRlZDpcImNvbm5lY3RlZFwiLGNoZWNraW5nOlwiY29ubmVjdGluZ1wifVt0aGlzLmljZUNvbm5lY3Rpb25TdGF0ZV18fHRoaXMuaWNlQ29ubmVjdGlvblN0YXRlfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwib25jb25uZWN0aW9uc3RhdGVjaGFuZ2VcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uY29ubmVjdGlvbnN0YXRlY2hhbmdlfHxudWxsfSxzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5fb25jb25uZWN0aW9uc3RhdGVjaGFuZ2UmJih0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjb25uZWN0aW9uc3RhdGVjaGFuZ2VcIix0aGlzLl9vbmNvbm5lY3Rpb25zdGF0ZWNoYW5nZSksZGVsZXRlIHRoaXMuX29uY29ubmVjdGlvbnN0YXRlY2hhbmdlKSxlJiZ0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJjb25uZWN0aW9uc3RhdGVjaGFuZ2VcIix0aGlzLl9vbmNvbm5lY3Rpb25zdGF0ZWNoYW5nZT1lKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxbXCJzZXRMb2NhbERlc2NyaXB0aW9uXCIsXCJzZXRSZW1vdGVEZXNjcmlwdGlvblwiXS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciBuPXRbZV07dFtlXT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb25uZWN0aW9uc3RhdGVjaGFuZ2Vwb2x5fHwodGhpcy5fY29ubmVjdGlvbnN0YXRlY2hhbmdlcG9seT1mdW5jdGlvbihlKXt2YXIgdD1lLnRhcmdldDtpZih0Ll9sYXN0Q29ubmVjdGlvblN0YXRlIT09dC5jb25uZWN0aW9uU3RhdGUpe3QuX2xhc3RDb25uZWN0aW9uU3RhdGU9dC5jb25uZWN0aW9uU3RhdGU7dmFyIG49bmV3IEV2ZW50KFwiY29ubmVjdGlvbnN0YXRlY2hhbmdlXCIsZSk7dC5kaXNwYXRjaEV2ZW50KG4pfXJldHVybiBlfSx0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJpY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2VcIix0aGlzLl9jb25uZWN0aW9uc3RhdGVjaGFuZ2Vwb2x5KSksbi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSl9fWZ1bmN0aW9uIGQoZSx0KXtpZihlLlJUQ1BlZXJDb25uZWN0aW9uJiYhKFwiY2hyb21lXCI9PT10LmJyb3dzZXImJnQudmVyc2lvbj49NzF8fFwic2FmYXJpXCI9PT10LmJyb3dzZXImJnQudmVyc2lvbj49NjA1KSl7dmFyIG49ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuc2V0UmVtb3RlRGVzY3JpcHRpb247ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuc2V0UmVtb3RlRGVzY3JpcHRpb249ZnVuY3Rpb24odCl7aWYodCYmdC5zZHAmJi0xIT09dC5zZHAuaW5kZXhPZihcIlxcbmE9ZXh0bWFwLWFsbG93LW1peGVkXCIpKXt2YXIgbz10LnNkcC5zcGxpdChcIlxcblwiKS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuXCJhPWV4dG1hcC1hbGxvdy1taXhlZFwiIT09ZS50cmltKCl9KS5qb2luKFwiXFxuXCIpO2UuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uJiZ0IGluc3RhbmNlb2YgZS5SVENTZXNzaW9uRGVzY3JpcHRpb24/YXJndW1lbnRzWzBdPW5ldyBlLlJUQ1Nlc3Npb25EZXNjcmlwdGlvbih7dHlwZTp0LnR5cGUsc2RwOm99KTp0LnNkcD1vfXJldHVybiBuLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19fWZ1bmN0aW9uIHUoZSx0KXtpZihlLlJUQ1BlZXJDb25uZWN0aW9uJiZlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSl7dmFyIG49ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkSWNlQ2FuZGlkYXRlO24mJjAhPT1uLmxlbmd0aCYmKGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZEljZUNhbmRpZGF0ZT1mdW5jdGlvbigpe3JldHVybiBhcmd1bWVudHNbMF0/KFwiY2hyb21lXCI9PT10LmJyb3dzZXImJnQudmVyc2lvbjw3OHx8XCJmaXJlZm94XCI9PT10LmJyb3dzZXImJnQudmVyc2lvbjw2OHx8XCJzYWZhcmlcIj09PXQuYnJvd3NlcikmJmFyZ3VtZW50c1swXSYmXCJcIj09PWFyZ3VtZW50c1swXS5jYW5kaWRhdGU/UHJvbWlzZS5yZXNvbHZlKCk6bi5hcHBseSh0aGlzLGFyZ3VtZW50cyk6KGFyZ3VtZW50c1sxXSYmYXJndW1lbnRzWzFdLmFwcGx5KG51bGwpLFByb21pc2UucmVzb2x2ZSgpKX0pfX1cbn0se1wic2RwXCI6XCJZSHZoXCIsXCIuL3V0aWxzXCI6XCJpU3hDXCJ9XSxcIkt0bEdcIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cykge1xuXCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5hZGFwdGVyRmFjdG9yeT1vO3ZhciBlPW0ocmVxdWlyZShcIi4vdXRpbHNcIikpLGk9bShyZXF1aXJlKFwiLi9jaHJvbWUvY2hyb21lX3NoaW1cIikpLHI9bShyZXF1aXJlKFwiLi9lZGdlL2VkZ2Vfc2hpbVwiKSkscz1tKHJlcXVpcmUoXCIuL2ZpcmVmb3gvZmlyZWZveF9zaGltXCIpKSx0PW0ocmVxdWlyZShcIi4vc2FmYXJpL3NhZmFyaV9zaGltXCIpKSxhPW0ocmVxdWlyZShcIi4vY29tbW9uX3NoaW1cIikpO2Z1bmN0aW9uIG4oKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBXZWFrTWFwKXJldHVybiBudWxsO3ZhciBlPW5ldyBXZWFrTWFwO3JldHVybiBuPWZ1bmN0aW9uKCl7cmV0dXJuIGV9LGV9ZnVuY3Rpb24gbShlKXtpZihlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7aWYobnVsbD09PWV8fFwib2JqZWN0XCIhPXR5cGVvZiBlJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlKXJldHVybntkZWZhdWx0OmV9O3ZhciBpPW4oKTtpZihpJiZpLmhhcyhlKSlyZXR1cm4gaS5nZXQoZSk7dmFyIHI9e30scz1PYmplY3QuZGVmaW5lUHJvcGVydHkmJk9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7Zm9yKHZhciB0IGluIGUpaWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsdCkpe3ZhciBhPXM/T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLHQpOm51bGw7YSYmKGEuZ2V0fHxhLnNldCk/T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsdCxhKTpyW3RdPWVbdF19cmV0dXJuIHIuZGVmYXVsdD1lLGkmJmkuc2V0KGUscikscn1mdW5jdGlvbiBvKCl7dmFye3dpbmRvdzpufT1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e30sbT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e3NoaW1DaHJvbWU6ITAsc2hpbUZpcmVmb3g6ITAsc2hpbUVkZ2U6ITAsc2hpbVNhZmFyaTohMH0sbz1lLmxvZyxoPWUuZGV0ZWN0QnJvd3NlcihuKSxkPXticm93c2VyRGV0YWlsczpoLGNvbW1vblNoaW06YSxleHRyYWN0VmVyc2lvbjplLmV4dHJhY3RWZXJzaW9uLGRpc2FibGVMb2c6ZS5kaXNhYmxlTG9nLGRpc2FibGVXYXJuaW5nczplLmRpc2FibGVXYXJuaW5nc307c3dpdGNoKGguYnJvd3Nlcil7Y2FzZVwiY2hyb21lXCI6aWYoIWl8fCFpLnNoaW1QZWVyQ29ubmVjdGlvbnx8IW0uc2hpbUNocm9tZSlyZXR1cm4gbyhcIkNocm9tZSBzaGltIGlzIG5vdCBpbmNsdWRlZCBpbiB0aGlzIGFkYXB0ZXIgcmVsZWFzZS5cIiksZDtpZihudWxsPT09aC52ZXJzaW9uKXJldHVybiBvKFwiQ2hyb21lIHNoaW0gY2FuIG5vdCBkZXRlcm1pbmUgdmVyc2lvbiwgbm90IHNoaW1taW5nLlwiKSxkO28oXCJhZGFwdGVyLmpzIHNoaW1taW5nIGNocm9tZS5cIiksZC5icm93c2VyU2hpbT1pLGEuc2hpbUFkZEljZUNhbmRpZGF0ZU51bGxPckVtcHR5KG4saCksaS5zaGltR2V0VXNlck1lZGlhKG4saCksaS5zaGltTWVkaWFTdHJlYW0obixoKSxpLnNoaW1QZWVyQ29ubmVjdGlvbihuLGgpLGkuc2hpbU9uVHJhY2sobixoKSxpLnNoaW1BZGRUcmFja1JlbW92ZVRyYWNrKG4saCksaS5zaGltR2V0U2VuZGVyc1dpdGhEdG1mKG4saCksaS5zaGltR2V0U3RhdHMobixoKSxpLnNoaW1TZW5kZXJSZWNlaXZlckdldFN0YXRzKG4saCksaS5maXhOZWdvdGlhdGlvbk5lZWRlZChuLGgpLGEuc2hpbVJUQ0ljZUNhbmRpZGF0ZShuLGgpLGEuc2hpbUNvbm5lY3Rpb25TdGF0ZShuLGgpLGEuc2hpbU1heE1lc3NhZ2VTaXplKG4saCksYS5zaGltU2VuZFRocm93VHlwZUVycm9yKG4saCksYS5yZW1vdmVFeHRtYXBBbGxvd01peGVkKG4saCk7YnJlYWs7Y2FzZVwiZmlyZWZveFwiOmlmKCFzfHwhcy5zaGltUGVlckNvbm5lY3Rpb258fCFtLnNoaW1GaXJlZm94KXJldHVybiBvKFwiRmlyZWZveCBzaGltIGlzIG5vdCBpbmNsdWRlZCBpbiB0aGlzIGFkYXB0ZXIgcmVsZWFzZS5cIiksZDtvKFwiYWRhcHRlci5qcyBzaGltbWluZyBmaXJlZm94LlwiKSxkLmJyb3dzZXJTaGltPXMsYS5zaGltQWRkSWNlQ2FuZGlkYXRlTnVsbE9yRW1wdHkobixoKSxzLnNoaW1HZXRVc2VyTWVkaWEobixoKSxzLnNoaW1QZWVyQ29ubmVjdGlvbihuLGgpLHMuc2hpbU9uVHJhY2sobixoKSxzLnNoaW1SZW1vdmVTdHJlYW0obixoKSxzLnNoaW1TZW5kZXJHZXRTdGF0cyhuLGgpLHMuc2hpbVJlY2VpdmVyR2V0U3RhdHMobixoKSxzLnNoaW1SVENEYXRhQ2hhbm5lbChuLGgpLHMuc2hpbUFkZFRyYW5zY2VpdmVyKG4saCkscy5zaGltR2V0UGFyYW1ldGVycyhuLGgpLHMuc2hpbUNyZWF0ZU9mZmVyKG4saCkscy5zaGltQ3JlYXRlQW5zd2VyKG4saCksYS5zaGltUlRDSWNlQ2FuZGlkYXRlKG4saCksYS5zaGltQ29ubmVjdGlvblN0YXRlKG4saCksYS5zaGltTWF4TWVzc2FnZVNpemUobixoKSxhLnNoaW1TZW5kVGhyb3dUeXBlRXJyb3IobixoKTticmVhaztjYXNlXCJlZGdlXCI6aWYoIXJ8fCFyLnNoaW1QZWVyQ29ubmVjdGlvbnx8IW0uc2hpbUVkZ2UpcmV0dXJuIG8oXCJNUyBlZGdlIHNoaW0gaXMgbm90IGluY2x1ZGVkIGluIHRoaXMgYWRhcHRlciByZWxlYXNlLlwiKSxkO28oXCJhZGFwdGVyLmpzIHNoaW1taW5nIGVkZ2UuXCIpLGQuYnJvd3NlclNoaW09cixyLnNoaW1HZXRVc2VyTWVkaWEobixoKSxyLnNoaW1HZXREaXNwbGF5TWVkaWEobixoKSxyLnNoaW1QZWVyQ29ubmVjdGlvbihuLGgpLHIuc2hpbVJlcGxhY2VUcmFjayhuLGgpLGEuc2hpbU1heE1lc3NhZ2VTaXplKG4saCksYS5zaGltU2VuZFRocm93VHlwZUVycm9yKG4saCk7YnJlYWs7Y2FzZVwic2FmYXJpXCI6aWYoIXR8fCFtLnNoaW1TYWZhcmkpcmV0dXJuIG8oXCJTYWZhcmkgc2hpbSBpcyBub3QgaW5jbHVkZWQgaW4gdGhpcyBhZGFwdGVyIHJlbGVhc2UuXCIpLGQ7byhcImFkYXB0ZXIuanMgc2hpbW1pbmcgc2FmYXJpLlwiKSxkLmJyb3dzZXJTaGltPXQsYS5zaGltQWRkSWNlQ2FuZGlkYXRlTnVsbE9yRW1wdHkobixoKSx0LnNoaW1SVENJY2VTZXJ2ZXJVcmxzKG4saCksdC5zaGltQ3JlYXRlT2ZmZXJMZWdhY3kobixoKSx0LnNoaW1DYWxsYmFja3NBUEkobixoKSx0LnNoaW1Mb2NhbFN0cmVhbXNBUEkobixoKSx0LnNoaW1SZW1vdGVTdHJlYW1zQVBJKG4saCksdC5zaGltVHJhY2tFdmVudFRyYW5zY2VpdmVyKG4saCksdC5zaGltR2V0VXNlck1lZGlhKG4saCksdC5zaGltQXVkaW9Db250ZXh0KG4saCksYS5zaGltUlRDSWNlQ2FuZGlkYXRlKG4saCksYS5zaGltTWF4TWVzc2FnZVNpemUobixoKSxhLnNoaW1TZW5kVGhyb3dUeXBlRXJyb3IobixoKSxhLnJlbW92ZUV4dG1hcEFsbG93TWl4ZWQobixoKTticmVhaztkZWZhdWx0Om8oXCJVbnN1cHBvcnRlZCBicm93c2VyIVwiKX1yZXR1cm4gZH1cbn0se1wiLi91dGlsc1wiOlwiaVN4Q1wiLFwiLi9jaHJvbWUvY2hyb21lX3NoaW1cIjpcInVJNVhcIixcIi4vZWRnZS9lZGdlX3NoaW1cIjpcIlhSaWNcIixcIi4vZmlyZWZveC9maXJlZm94X3NoaW1cIjpcIkZ6ZHJcIixcIi4vc2FmYXJpL3NhZmFyaV9zaGltXCI6XCJ0MWxMXCIsXCIuL2NvbW1vbl9zaGltXCI6XCJHT1FLXCJ9XSxcInRJMVhcIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cykge1xuXCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5kZWZhdWx0PXZvaWQgMDt2YXIgZT1yZXF1aXJlKFwiLi9hZGFwdGVyX2ZhY3RvcnkuanNcIiksdD0oMCxlLmFkYXB0ZXJGYWN0b3J5KSh7d2luZG93OlwidW5kZWZpbmVkXCI9PXR5cGVvZiB3aW5kb3c/dm9pZCAwOndpbmRvd30pLGQ9dDtleHBvcnRzLmRlZmF1bHQ9ZDtcbn0se1wiLi9hZGFwdGVyX2ZhY3RvcnkuanNcIjpcIkt0bEdcIn1dLFwic1h0VlwiOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKSB7XG5cInVzZSBzdHJpY3RcIjt2YXIgZT10aGlzJiZ0aGlzLl9faW1wb3J0RGVmYXVsdHx8ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLndlYlJUQ0FkYXB0ZXI9dm9pZCAwO3ZhciB0PWUocmVxdWlyZShcIndlYnJ0Yy1hZGFwdGVyXCIpKTtleHBvcnRzLndlYlJUQ0FkYXB0ZXI9dC5kZWZhdWx0O1xufSx7XCJ3ZWJydGMtYWRhcHRlclwiOlwidEkxWFwifV0sXCJJMzFmXCI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpIHtcblwidXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGV4cG9ydHMuU3VwcG9ydHM9dm9pZCAwO3ZhciByPXJlcXVpcmUoXCIuL2FkYXB0ZXJcIik7ZXhwb3J0cy5TdXBwb3J0cz1uZXcoZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5pc0lPUz1bXCJpUGFkXCIsXCJpUGhvbmVcIixcImlQb2RcIl0uaW5jbHVkZXMobmF2aWdhdG9yLnBsYXRmb3JtKSx0aGlzLnN1cHBvcnRlZEJyb3dzZXJzPVtcImZpcmVmb3hcIixcImNocm9tZVwiLFwic2FmYXJpXCJdLHRoaXMubWluRmlyZWZveFZlcnNpb249NTksdGhpcy5taW5DaHJvbWVWZXJzaW9uPTcyLHRoaXMubWluU2FmYXJpVmVyc2lvbj02MDV9cmV0dXJuIGUucHJvdG90eXBlLmlzV2ViUlRDU3VwcG9ydGVkPWZ1bmN0aW9uKCl7cmV0dXJuXCJ1bmRlZmluZWRcIiE9dHlwZW9mIFJUQ1BlZXJDb25uZWN0aW9ufSxlLnByb3RvdHlwZS5pc0Jyb3dzZXJTdXBwb3J0ZWQ9ZnVuY3Rpb24oKXt2YXIgcj10aGlzLmdldEJyb3dzZXIoKSxlPXRoaXMuZ2V0VmVyc2lvbigpO3JldHVybiEhdGhpcy5zdXBwb3J0ZWRCcm93c2Vycy5pbmNsdWRlcyhyKSYmKFwiY2hyb21lXCI9PT1yP2U+PXRoaXMubWluQ2hyb21lVmVyc2lvbjpcImZpcmVmb3hcIj09PXI/ZT49dGhpcy5taW5GaXJlZm94VmVyc2lvbjpcInNhZmFyaVwiPT09ciYmKCF0aGlzLmlzSU9TJiZlPj10aGlzLm1pblNhZmFyaVZlcnNpb24pKX0sZS5wcm90b3R5cGUuZ2V0QnJvd3Nlcj1mdW5jdGlvbigpe3JldHVybiByLndlYlJUQ0FkYXB0ZXIuYnJvd3NlckRldGFpbHMuYnJvd3Nlcn0sZS5wcm90b3R5cGUuZ2V0VmVyc2lvbj1mdW5jdGlvbigpe3JldHVybiByLndlYlJUQ0FkYXB0ZXIuYnJvd3NlckRldGFpbHMudmVyc2lvbnx8MH0sZS5wcm90b3R5cGUuaXNVbmlmaWVkUGxhblN1cHBvcnRlZD1mdW5jdGlvbigpe3ZhciBlLGk9dGhpcy5nZXRCcm93c2VyKCksdD1yLndlYlJUQ0FkYXB0ZXIuYnJvd3NlckRldGFpbHMudmVyc2lvbnx8MDtpZihcImNocm9tZVwiPT09aSYmdDw3MilyZXR1cm4hMTtpZihcImZpcmVmb3hcIj09PWkmJnQ+PTU5KXJldHVybiEwO2lmKCEod2luZG93LlJUQ1J0cFRyYW5zY2VpdmVyJiZcImN1cnJlbnREaXJlY3Rpb25cImluIFJUQ1J0cFRyYW5zY2VpdmVyLnByb3RvdHlwZSkpcmV0dXJuITE7dmFyIG89ITE7dHJ5eyhlPW5ldyBSVENQZWVyQ29ubmVjdGlvbikuYWRkVHJhbnNjZWl2ZXIoXCJhdWRpb1wiKSxvPSEwfWNhdGNoKHMpe31maW5hbGx5e2UmJmUuY2xvc2UoKX1yZXR1cm4gb30sZS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm5cIlN1cHBvcnRzOiBcXG4gICAgYnJvd3NlcjpcIit0aGlzLmdldEJyb3dzZXIoKStcIiBcXG4gICAgdmVyc2lvbjpcIit0aGlzLmdldFZlcnNpb24oKStcIiBcXG4gICAgaXNJT1M6XCIrdGhpcy5pc0lPUytcIiBcXG4gICAgaXNXZWJSVENTdXBwb3J0ZWQ6XCIrdGhpcy5pc1dlYlJUQ1N1cHBvcnRlZCgpK1wiIFxcbiAgICBpc0Jyb3dzZXJTdXBwb3J0ZWQ6XCIrdGhpcy5pc0Jyb3dzZXJTdXBwb3J0ZWQoKStcIiBcXG4gICAgaXNVbmlmaWVkUGxhblN1cHBvcnRlZDpcIit0aGlzLmlzVW5pZmllZFBsYW5TdXBwb3J0ZWQoKX0sZX0oKSk7XG59LHtcIi4vYWRhcHRlclwiOlwic1h0VlwifV0sXCJCSFhmXCI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpIHtcblwidXNlIHN0cmljdFwiO3ZhciBlPXRoaXMmJnRoaXMuX19jcmVhdGVCaW5kaW5nfHwoT2JqZWN0LmNyZWF0ZT9mdW5jdGlvbihlLHQscixvKXt2b2lkIDA9PT1vJiYobz1yKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxvLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiB0W3JdfX0pfTpmdW5jdGlvbihlLHQscixvKXt2b2lkIDA9PT1vJiYobz1yKSxlW29dPXRbcl19KSx0PXRoaXMmJnRoaXMuX19zZXRNb2R1bGVEZWZhdWx0fHwoT2JqZWN0LmNyZWF0ZT9mdW5jdGlvbihlLHQpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiZGVmYXVsdFwiLHtlbnVtZXJhYmxlOiEwLHZhbHVlOnR9KX06ZnVuY3Rpb24oZSx0KXtlLmRlZmF1bHQ9dH0pLHI9dGhpcyYmdGhpcy5fX2ltcG9ydFN0YXJ8fGZ1bmN0aW9uKHIpe2lmKHImJnIuX19lc01vZHVsZSlyZXR1cm4gcjt2YXIgbz17fTtpZihudWxsIT1yKWZvcih2YXIgbiBpbiByKVwiZGVmYXVsdFwiIT09biYmT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHIsbikmJmUobyxyLG4pO3JldHVybiB0KG8sciksb307T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy51dGlsPXZvaWQgMDt2YXIgbz1yKHJlcXVpcmUoXCJwZWVyanMtanMtYmluYXJ5cGFja1wiKSksbj1yZXF1aXJlKFwiLi9zdXBwb3J0c1wiKSxpPXtpY2VTZXJ2ZXJzOlt7dXJsczpcInN0dW46c3R1bi5sLmdvb2dsZS5jb206MTkzMDJcIn0se3VybHM6XCJ0dXJuOjAucGVlcmpzLmNvbTozNDc4XCIsdXNlcm5hbWU6XCJwZWVyanNcIixjcmVkZW50aWFsOlwicGVlcmpzcFwifV0sc2RwU2VtYW50aWNzOlwidW5pZmllZC1wbGFuXCJ9O2V4cG9ydHMudXRpbD1uZXcoZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5DTE9VRF9IT1NUPVwiMC5wZWVyanMuY29tXCIsdGhpcy5DTE9VRF9QT1JUPTQ0Myx0aGlzLmNodW5rZWRCcm93c2Vycz17Q2hyb21lOjEsY2hyb21lOjF9LHRoaXMuY2h1bmtlZE1UVT0xNjMwMCx0aGlzLmRlZmF1bHRDb25maWc9aSx0aGlzLmJyb3dzZXI9bi5TdXBwb3J0cy5nZXRCcm93c2VyKCksdGhpcy5icm93c2VyVmVyc2lvbj1uLlN1cHBvcnRzLmdldFZlcnNpb24oKSx0aGlzLnN1cHBvcnRzPWZ1bmN0aW9uKCl7dmFyIGUsdD17YnJvd3NlcjpuLlN1cHBvcnRzLmlzQnJvd3NlclN1cHBvcnRlZCgpLHdlYlJUQzpuLlN1cHBvcnRzLmlzV2ViUlRDU3VwcG9ydGVkKCksYXVkaW9WaWRlbzohMSxkYXRhOiExLGJpbmFyeUJsb2I6ITEscmVsaWFibGU6ITF9O2lmKCF0LndlYlJUQylyZXR1cm4gdDt0cnl7ZT1uZXcgUlRDUGVlckNvbm5lY3Rpb24oaSksdC5hdWRpb1ZpZGVvPSEwO3ZhciByPXZvaWQgMDt0cnl7cj1lLmNyZWF0ZURhdGFDaGFubmVsKFwiX1BFRVJKU1RFU1RcIix7b3JkZXJlZDohMH0pLHQuZGF0YT0hMCx0LnJlbGlhYmxlPSEhci5vcmRlcmVkO3RyeXtyLmJpbmFyeVR5cGU9XCJibG9iXCIsdC5iaW5hcnlCbG9iPSFuLlN1cHBvcnRzLmlzSU9TfWNhdGNoKG8pe319Y2F0Y2gobyl7fWZpbmFsbHl7ciYmci5jbG9zZSgpfX1jYXRjaChvKXt9ZmluYWxseXtlJiZlLmNsb3NlKCl9cmV0dXJuIHR9KCksdGhpcy5wYWNrPW8ucGFjayx0aGlzLnVucGFjaz1vLnVucGFjayx0aGlzLl9kYXRhQ291bnQ9MX1yZXR1cm4gZS5wcm90b3R5cGUubm9vcD1mdW5jdGlvbigpe30sZS5wcm90b3R5cGUudmFsaWRhdGVJZD1mdW5jdGlvbihlKXtyZXR1cm4hZXx8L15bQS1aYS16MC05XSsoPzpbIF8tXVtBLVphLXowLTldKykqJC8udGVzdChlKX0sZS5wcm90b3R5cGUuY2h1bms9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVtdLHI9ZS5zaXplLG89TWF0aC5jZWlsKHIvZXhwb3J0cy51dGlsLmNodW5rZWRNVFUpLG49MCxpPTA7aTxyOyl7dmFyIGE9TWF0aC5taW4ocixpK2V4cG9ydHMudXRpbC5jaHVua2VkTVRVKSx1PWUuc2xpY2UoaSxhKSxzPXtfX3BlZXJEYXRhOnRoaXMuX2RhdGFDb3VudCxuOm4sZGF0YTp1LHRvdGFsOm99O3QucHVzaChzKSxpPWEsbisrfXJldHVybiB0aGlzLl9kYXRhQ291bnQrKyx0fSxlLnByb3RvdHlwZS5ibG9iVG9BcnJheUJ1ZmZlcj1mdW5jdGlvbihlLHQpe3ZhciByPW5ldyBGaWxlUmVhZGVyO3JldHVybiByLm9ubG9hZD1mdW5jdGlvbihlKXtlLnRhcmdldCYmdChlLnRhcmdldC5yZXN1bHQpfSxyLnJlYWRBc0FycmF5QnVmZmVyKGUpLHJ9LGUucHJvdG90eXBlLmJpbmFyeVN0cmluZ1RvQXJyYXlCdWZmZXI9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PW5ldyBVaW50OEFycmF5KGUubGVuZ3RoKSxyPTA7cjxlLmxlbmd0aDtyKyspdFtyXT0yNTUmZS5jaGFyQ29kZUF0KHIpO3JldHVybiB0LmJ1ZmZlcn0sZS5wcm90b3R5cGUucmFuZG9tVG9rZW49ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIpfSxlLnByb3RvdHlwZS5pc1NlY3VyZT1mdW5jdGlvbigpe3JldHVyblwiaHR0cHM6XCI9PT1sb2NhdGlvbi5wcm90b2NvbH0sZX0oKSk7XG59LHtcInBlZXJqcy1qcy1iaW5hcnlwYWNrXCI6XCJrZFBwXCIsXCIuL3N1cHBvcnRzXCI6XCJJMzFmXCJ9XSxcIkpKbFNcIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cykge1xuXCJ1c2Ugc3RyaWN0XCI7dmFyIGU9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSx0PVwiflwiO2Z1bmN0aW9uIG4oKXt9ZnVuY3Rpb24gcihlLHQsbil7dGhpcy5mbj1lLHRoaXMuY29udGV4dD10LHRoaXMub25jZT1ufHwhMX1mdW5jdGlvbiBvKGUsbixvLHMsaSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2Ygbyl0aHJvdyBuZXcgVHlwZUVycm9yKFwiVGhlIGxpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvblwiKTt2YXIgYz1uZXcgcihvLHN8fGUsaSksZj10P3QrbjpuO3JldHVybiBlLl9ldmVudHNbZl0/ZS5fZXZlbnRzW2ZdLmZuP2UuX2V2ZW50c1tmXT1bZS5fZXZlbnRzW2ZdLGNdOmUuX2V2ZW50c1tmXS5wdXNoKGMpOihlLl9ldmVudHNbZl09YyxlLl9ldmVudHNDb3VudCsrKSxlfWZ1bmN0aW9uIHMoZSx0KXswPT0tLWUuX2V2ZW50c0NvdW50P2UuX2V2ZW50cz1uZXcgbjpkZWxldGUgZS5fZXZlbnRzW3RdfWZ1bmN0aW9uIGkoKXt0aGlzLl9ldmVudHM9bmV3IG4sdGhpcy5fZXZlbnRzQ291bnQ9MH1PYmplY3QuY3JlYXRlJiYobi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShudWxsKSwobmV3IG4pLl9fcHJvdG9fX3x8KHQ9ITEpKSxpLnByb3RvdHlwZS5ldmVudE5hbWVzPWZ1bmN0aW9uKCl7dmFyIG4scixvPVtdO2lmKDA9PT10aGlzLl9ldmVudHNDb3VudClyZXR1cm4gbztmb3IociBpbiBuPXRoaXMuX2V2ZW50cyllLmNhbGwobixyKSYmby5wdXNoKHQ/ci5zbGljZSgxKTpyKTtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scz9vLmNvbmNhdChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG4pKTpvfSxpLnByb3RvdHlwZS5saXN0ZW5lcnM9ZnVuY3Rpb24oZSl7dmFyIG49dD90K2U6ZSxyPXRoaXMuX2V2ZW50c1tuXTtpZighcilyZXR1cm5bXTtpZihyLmZuKXJldHVybltyLmZuXTtmb3IodmFyIG89MCxzPXIubGVuZ3RoLGk9bmV3IEFycmF5KHMpO288cztvKyspaVtvXT1yW29dLmZuO3JldHVybiBpfSxpLnByb3RvdHlwZS5saXN0ZW5lckNvdW50PWZ1bmN0aW9uKGUpe3ZhciBuPXQ/dCtlOmUscj10aGlzLl9ldmVudHNbbl07cmV0dXJuIHI/ci5mbj8xOnIubGVuZ3RoOjB9LGkucHJvdG90eXBlLmVtaXQ9ZnVuY3Rpb24oZSxuLHIsbyxzLGkpe3ZhciBjPXQ/dCtlOmU7aWYoIXRoaXMuX2V2ZW50c1tjXSlyZXR1cm4hMTt2YXIgZix1LGE9dGhpcy5fZXZlbnRzW2NdLGw9YXJndW1lbnRzLmxlbmd0aDtpZihhLmZuKXtzd2l0Y2goYS5vbmNlJiZ0aGlzLnJlbW92ZUxpc3RlbmVyKGUsYS5mbix2b2lkIDAsITApLGwpe2Nhc2UgMTpyZXR1cm4gYS5mbi5jYWxsKGEuY29udGV4dCksITA7Y2FzZSAyOnJldHVybiBhLmZuLmNhbGwoYS5jb250ZXh0LG4pLCEwO2Nhc2UgMzpyZXR1cm4gYS5mbi5jYWxsKGEuY29udGV4dCxuLHIpLCEwO2Nhc2UgNDpyZXR1cm4gYS5mbi5jYWxsKGEuY29udGV4dCxuLHIsbyksITA7Y2FzZSA1OnJldHVybiBhLmZuLmNhbGwoYS5jb250ZXh0LG4scixvLHMpLCEwO2Nhc2UgNjpyZXR1cm4gYS5mbi5jYWxsKGEuY29udGV4dCxuLHIsbyxzLGkpLCEwfWZvcih1PTEsZj1uZXcgQXJyYXkobC0xKTt1PGw7dSsrKWZbdS0xXT1hcmd1bWVudHNbdV07YS5mbi5hcHBseShhLmNvbnRleHQsZil9ZWxzZXt2YXIgdixoPWEubGVuZ3RoO2Zvcih1PTA7dTxoO3UrKylzd2l0Y2goYVt1XS5vbmNlJiZ0aGlzLnJlbW92ZUxpc3RlbmVyKGUsYVt1XS5mbix2b2lkIDAsITApLGwpe2Nhc2UgMTphW3VdLmZuLmNhbGwoYVt1XS5jb250ZXh0KTticmVhaztjYXNlIDI6YVt1XS5mbi5jYWxsKGFbdV0uY29udGV4dCxuKTticmVhaztjYXNlIDM6YVt1XS5mbi5jYWxsKGFbdV0uY29udGV4dCxuLHIpO2JyZWFrO2Nhc2UgNDphW3VdLmZuLmNhbGwoYVt1XS5jb250ZXh0LG4scixvKTticmVhaztkZWZhdWx0OmlmKCFmKWZvcih2PTEsZj1uZXcgQXJyYXkobC0xKTt2PGw7disrKWZbdi0xXT1hcmd1bWVudHNbdl07YVt1XS5mbi5hcHBseShhW3VdLmNvbnRleHQsZil9fXJldHVybiEwfSxpLnByb3RvdHlwZS5vbj1mdW5jdGlvbihlLHQsbil7cmV0dXJuIG8odGhpcyxlLHQsbiwhMSl9LGkucHJvdG90eXBlLm9uY2U9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBvKHRoaXMsZSx0LG4sITApfSxpLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lcj1mdW5jdGlvbihlLG4scixvKXt2YXIgaT10P3QrZTplO2lmKCF0aGlzLl9ldmVudHNbaV0pcmV0dXJuIHRoaXM7aWYoIW4pcmV0dXJuIHModGhpcyxpKSx0aGlzO3ZhciBjPXRoaXMuX2V2ZW50c1tpXTtpZihjLmZuKWMuZm4hPT1ufHxvJiYhYy5vbmNlfHxyJiZjLmNvbnRleHQhPT1yfHxzKHRoaXMsaSk7ZWxzZXtmb3IodmFyIGY9MCx1PVtdLGE9Yy5sZW5ndGg7ZjxhO2YrKykoY1tmXS5mbiE9PW58fG8mJiFjW2ZdLm9uY2V8fHImJmNbZl0uY29udGV4dCE9PXIpJiZ1LnB1c2goY1tmXSk7dS5sZW5ndGg/dGhpcy5fZXZlbnRzW2ldPTE9PT11Lmxlbmd0aD91WzBdOnU6cyh0aGlzLGkpfXJldHVybiB0aGlzfSxpLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnM9ZnVuY3Rpb24oZSl7dmFyIHI7cmV0dXJuIGU/KHI9dD90K2U6ZSx0aGlzLl9ldmVudHNbcl0mJnModGhpcyxyKSk6KHRoaXMuX2V2ZW50cz1uZXcgbix0aGlzLl9ldmVudHNDb3VudD0wKSx0aGlzfSxpLnByb3RvdHlwZS5vZmY9aS5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXIsaS5wcm90b3R5cGUuYWRkTGlzdGVuZXI9aS5wcm90b3R5cGUub24saS5wcmVmaXhlZD10LGkuRXZlbnRFbWl0dGVyPWksXCJ1bmRlZmluZWRcIiE9dHlwZW9mIG1vZHVsZSYmKG1vZHVsZS5leHBvcnRzPWkpO1xufSx7fV0sXCJXT3M5XCI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpIHtcblwidXNlIHN0cmljdFwiO3ZhciByPXRoaXMmJnRoaXMuX19yZWFkfHxmdW5jdGlvbihyLGUpe3ZhciBvPVwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmcltTeW1ib2wuaXRlcmF0b3JdO2lmKCFvKXJldHVybiByO3ZhciB0LG4sbD1vLmNhbGwociksaT1bXTt0cnl7Zm9yKDsodm9pZCAwPT09ZXx8ZS0tID4wKSYmISh0PWwubmV4dCgpKS5kb25lOylpLnB1c2godC52YWx1ZSl9Y2F0Y2gocyl7bj17ZXJyb3I6c319ZmluYWxseXt0cnl7dCYmIXQuZG9uZSYmKG89bC5yZXR1cm4pJiZvLmNhbGwobCl9ZmluYWxseXtpZihuKXRocm93IG4uZXJyb3J9fXJldHVybiBpfSxlPXRoaXMmJnRoaXMuX19zcHJlYWRBcnJheXx8ZnVuY3Rpb24ocixlKXtmb3IodmFyIG89MCx0PWUubGVuZ3RoLG49ci5sZW5ndGg7bzx0O28rKyxuKyspcltuXT1lW29dO3JldHVybiByfTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLkxvZ0xldmVsPXZvaWQgMDt2YXIgbyx0PVwiUGVlckpTOiBcIjshZnVuY3Rpb24ocil7cltyLkRpc2FibGVkPTBdPVwiRGlzYWJsZWRcIixyW3IuRXJyb3JzPTFdPVwiRXJyb3JzXCIscltyLldhcm5pbmdzPTJdPVwiV2FybmluZ3NcIixyW3IuQWxsPTNdPVwiQWxsXCJ9KG89ZXhwb3J0cy5Mb2dMZXZlbHx8KGV4cG9ydHMuTG9nTGV2ZWw9e30pKTt2YXIgbj1mdW5jdGlvbigpe2Z1bmN0aW9uIG4oKXt0aGlzLl9sb2dMZXZlbD1vLkRpc2FibGVkfXJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkobi5wcm90b3R5cGUsXCJsb2dMZXZlbFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbG9nTGV2ZWx9LHNldDpmdW5jdGlvbihyKXt0aGlzLl9sb2dMZXZlbD1yfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLG4ucHJvdG90eXBlLmxvZz1mdW5jdGlvbigpe2Zvcih2YXIgdD1bXSxuPTA7bjxhcmd1bWVudHMubGVuZ3RoO24rKyl0W25dPWFyZ3VtZW50c1tuXTt0aGlzLl9sb2dMZXZlbD49by5BbGwmJnRoaXMuX3ByaW50LmFwcGx5KHRoaXMsZShbby5BbGxdLHIodCkpKX0sbi5wcm90b3R5cGUud2Fybj1mdW5jdGlvbigpe2Zvcih2YXIgdD1bXSxuPTA7bjxhcmd1bWVudHMubGVuZ3RoO24rKyl0W25dPWFyZ3VtZW50c1tuXTt0aGlzLl9sb2dMZXZlbD49by5XYXJuaW5ncyYmdGhpcy5fcHJpbnQuYXBwbHkodGhpcyxlKFtvLldhcm5pbmdzXSxyKHQpKSl9LG4ucHJvdG90eXBlLmVycm9yPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PVtdLG49MDtuPGFyZ3VtZW50cy5sZW5ndGg7bisrKXRbbl09YXJndW1lbnRzW25dO3RoaXMuX2xvZ0xldmVsPj1vLkVycm9ycyYmdGhpcy5fcHJpbnQuYXBwbHkodGhpcyxlKFtvLkVycm9yc10scih0KSkpfSxuLnByb3RvdHlwZS5zZXRMb2dGdW5jdGlvbj1mdW5jdGlvbihyKXt0aGlzLl9wcmludD1yfSxuLnByb3RvdHlwZS5fcHJpbnQ9ZnVuY3Rpb24obil7Zm9yKHZhciBsPVtdLGk9MTtpPGFyZ3VtZW50cy5sZW5ndGg7aSsrKWxbaS0xXT1hcmd1bWVudHNbaV07dmFyIHM9ZShbdF0scihsKSk7Zm9yKHZhciBhIGluIHMpc1thXWluc3RhbmNlb2YgRXJyb3ImJihzW2FdPVwiKFwiK3NbYV0ubmFtZStcIikgXCIrc1thXS5tZXNzYWdlKTtuPj1vLkFsbD9jb25zb2xlLmxvZy5hcHBseShjb25zb2xlLGUoW10scihzKSkpOm4+PW8uV2FybmluZ3M/Y29uc29sZS53YXJuLmFwcGx5KGNvbnNvbGUsZShbXCJXQVJOSU5HXCJdLHIocykpKTpuPj1vLkVycm9ycyYmY29uc29sZS5lcnJvci5hcHBseShjb25zb2xlLGUoW1wiRVJST1JcIl0scihzKSkpfSxufSgpO2V4cG9ydHMuZGVmYXVsdD1uZXcgbjtcbn0se31dLFwiWlJZZlwiOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKSB7XG5cInVzZSBzdHJpY3RcIjt2YXIgZSxyLG8sbix0LGEsaTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLlNlcnZlck1lc3NhZ2VUeXBlPWV4cG9ydHMuU29ja2V0RXZlbnRUeXBlPWV4cG9ydHMuU2VyaWFsaXphdGlvblR5cGU9ZXhwb3J0cy5QZWVyRXJyb3JUeXBlPWV4cG9ydHMuUGVlckV2ZW50VHlwZT1leHBvcnRzLkNvbm5lY3Rpb25UeXBlPWV4cG9ydHMuQ29ubmVjdGlvbkV2ZW50VHlwZT12b2lkIDAsZnVuY3Rpb24oZSl7ZS5PcGVuPVwib3BlblwiLGUuU3RyZWFtPVwic3RyZWFtXCIsZS5EYXRhPVwiZGF0YVwiLGUuQ2xvc2U9XCJjbG9zZVwiLGUuRXJyb3I9XCJlcnJvclwiLGUuSWNlU3RhdGVDaGFuZ2VkPVwiaWNlU3RhdGVDaGFuZ2VkXCJ9KGU9ZXhwb3J0cy5Db25uZWN0aW9uRXZlbnRUeXBlfHwoZXhwb3J0cy5Db25uZWN0aW9uRXZlbnRUeXBlPXt9KSksZnVuY3Rpb24oZSl7ZS5EYXRhPVwiZGF0YVwiLGUuTWVkaWE9XCJtZWRpYVwifShyPWV4cG9ydHMuQ29ubmVjdGlvblR5cGV8fChleHBvcnRzLkNvbm5lY3Rpb25UeXBlPXt9KSksZnVuY3Rpb24oZSl7ZS5PcGVuPVwib3BlblwiLGUuQ2xvc2U9XCJjbG9zZVwiLGUuQ29ubmVjdGlvbj1cImNvbm5lY3Rpb25cIixlLkNhbGw9XCJjYWxsXCIsZS5EaXNjb25uZWN0ZWQ9XCJkaXNjb25uZWN0ZWRcIixlLkVycm9yPVwiZXJyb3JcIn0obz1leHBvcnRzLlBlZXJFdmVudFR5cGV8fChleHBvcnRzLlBlZXJFdmVudFR5cGU9e30pKSxmdW5jdGlvbihlKXtlLkJyb3dzZXJJbmNvbXBhdGlibGU9XCJicm93c2VyLWluY29tcGF0aWJsZVwiLGUuRGlzY29ubmVjdGVkPVwiZGlzY29ubmVjdGVkXCIsZS5JbnZhbGlkSUQ9XCJpbnZhbGlkLWlkXCIsZS5JbnZhbGlkS2V5PVwiaW52YWxpZC1rZXlcIixlLk5ldHdvcms9XCJuZXR3b3JrXCIsZS5QZWVyVW5hdmFpbGFibGU9XCJwZWVyLXVuYXZhaWxhYmxlXCIsZS5Tc2xVbmF2YWlsYWJsZT1cInNzbC11bmF2YWlsYWJsZVwiLGUuU2VydmVyRXJyb3I9XCJzZXJ2ZXItZXJyb3JcIixlLlNvY2tldEVycm9yPVwic29ja2V0LWVycm9yXCIsZS5Tb2NrZXRDbG9zZWQ9XCJzb2NrZXQtY2xvc2VkXCIsZS5VbmF2YWlsYWJsZUlEPVwidW5hdmFpbGFibGUtaWRcIixlLldlYlJUQz1cIndlYnJ0Y1wifShuPWV4cG9ydHMuUGVlckVycm9yVHlwZXx8KGV4cG9ydHMuUGVlckVycm9yVHlwZT17fSkpLGZ1bmN0aW9uKGUpe2UuQmluYXJ5PVwiYmluYXJ5XCIsZS5CaW5hcnlVVEY4PVwiYmluYXJ5LXV0ZjhcIixlLkpTT049XCJqc29uXCJ9KHQ9ZXhwb3J0cy5TZXJpYWxpemF0aW9uVHlwZXx8KGV4cG9ydHMuU2VyaWFsaXphdGlvblR5cGU9e30pKSxmdW5jdGlvbihlKXtlLk1lc3NhZ2U9XCJtZXNzYWdlXCIsZS5EaXNjb25uZWN0ZWQ9XCJkaXNjb25uZWN0ZWRcIixlLkVycm9yPVwiZXJyb3JcIixlLkNsb3NlPVwiY2xvc2VcIn0oYT1leHBvcnRzLlNvY2tldEV2ZW50VHlwZXx8KGV4cG9ydHMuU29ja2V0RXZlbnRUeXBlPXt9KSksZnVuY3Rpb24oZSl7ZS5IZWFydGJlYXQ9XCJIRUFSVEJFQVRcIixlLkNhbmRpZGF0ZT1cIkNBTkRJREFURVwiLGUuT2ZmZXI9XCJPRkZFUlwiLGUuQW5zd2VyPVwiQU5TV0VSXCIsZS5PcGVuPVwiT1BFTlwiLGUuRXJyb3I9XCJFUlJPUlwiLGUuSWRUYWtlbj1cIklELVRBS0VOXCIsZS5JbnZhbGlkS2V5PVwiSU5WQUxJRC1LRVlcIixlLkxlYXZlPVwiTEVBVkVcIixlLkV4cGlyZT1cIkVYUElSRVwifShpPWV4cG9ydHMuU2VydmVyTWVzc2FnZVR5cGV8fChleHBvcnRzLlNlcnZlck1lc3NhZ2VUeXBlPXt9KSk7XG59LHt9XSxcIndKbHZcIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cykge1xuXCJ1c2Ugc3RyaWN0XCI7dmFyIGU9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIGU9ZnVuY3Rpb24odCxuKXtyZXR1cm4oZT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG4gaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxuKSYmKGVbbl09dFtuXSl9KSh0LG4pfTtyZXR1cm4gZnVuY3Rpb24odCxuKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBuJiZudWxsIT09bil0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIitTdHJpbmcobikrXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtmdW5jdGlvbiBvKCl7dGhpcy5jb25zdHJ1Y3Rvcj10fWUodCxuKSx0LnByb3RvdHlwZT1udWxsPT09bj9PYmplY3QuY3JlYXRlKG4pOihvLnByb3RvdHlwZT1uLnByb3RvdHlwZSxuZXcgbyl9fSgpLHQ9dGhpcyYmdGhpcy5fX3JlYWR8fGZ1bmN0aW9uKGUsdCl7dmFyIG49XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZlW1N5bWJvbC5pdGVyYXRvcl07aWYoIW4pcmV0dXJuIGU7dmFyIG8scyxyPW4uY2FsbChlKSxpPVtdO3RyeXtmb3IoOyh2b2lkIDA9PT10fHx0LS0gPjApJiYhKG89ci5uZXh0KCkpLmRvbmU7KWkucHVzaChvLnZhbHVlKX1jYXRjaChjKXtzPXtlcnJvcjpjfX1maW5hbGx5e3RyeXtvJiYhby5kb25lJiYobj1yLnJldHVybikmJm4uY2FsbChyKX1maW5hbGx5e2lmKHMpdGhyb3cgcy5lcnJvcn19cmV0dXJuIGl9LG49dGhpcyYmdGhpcy5fX3NwcmVhZEFycmF5fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgbj0wLG89dC5sZW5ndGgscz1lLmxlbmd0aDtuPG87bisrLHMrKyllW3NdPXRbbl07cmV0dXJuIGV9LG89dGhpcyYmdGhpcy5fX3ZhbHVlc3x8ZnVuY3Rpb24oZSl7dmFyIHQ9XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZTeW1ib2wuaXRlcmF0b3Isbj10JiZlW3RdLG89MDtpZihuKXJldHVybiBuLmNhbGwoZSk7aWYoZSYmXCJudW1iZXJcIj09dHlwZW9mIGUubGVuZ3RoKXJldHVybntuZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIGUmJm8+PWUubGVuZ3RoJiYoZT12b2lkIDApLHt2YWx1ZTplJiZlW28rK10sZG9uZTohZX19fTt0aHJvdyBuZXcgVHlwZUVycm9yKHQ/XCJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLlwiOlwiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKX0scz10aGlzJiZ0aGlzLl9faW1wb3J0RGVmYXVsdHx8ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLlNvY2tldD12b2lkIDA7dmFyIHI9cmVxdWlyZShcImV2ZW50ZW1pdHRlcjNcIiksaT1zKHJlcXVpcmUoXCIuL2xvZ2dlclwiKSksYz1yZXF1aXJlKFwiLi9lbnVtc1wiKSxhPWZ1bmN0aW9uKHMpe2Z1bmN0aW9uIHIoZSx0LG4sbyxyLGkpe3ZvaWQgMD09PWkmJihpPTVlMyk7dmFyIGM9cy5jYWxsKHRoaXMpfHx0aGlzO2MucGluZ0ludGVydmFsPWksYy5fZGlzY29ubmVjdGVkPSEwLGMuX21lc3NhZ2VzUXVldWU9W107dmFyIGE9ZT9cIndzczovL1wiOlwid3M6Ly9cIjtyZXR1cm4gYy5fYmFzZVVybD1hK3QrXCI6XCIrbitvK1wicGVlcmpzP2tleT1cIityLGN9cmV0dXJuIGUocixzKSxyLnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXM7dGhpcy5faWQ9ZTt2YXIgbz10aGlzLl9iYXNlVXJsK1wiJmlkPVwiK2UrXCImdG9rZW49XCIrdDshdGhpcy5fc29ja2V0JiZ0aGlzLl9kaXNjb25uZWN0ZWQmJih0aGlzLl9zb2NrZXQ9bmV3IFdlYlNvY2tldChvKSx0aGlzLl9kaXNjb25uZWN0ZWQ9ITEsdGhpcy5fc29ja2V0Lm9ubWVzc2FnZT1mdW5jdGlvbihlKXt2YXIgdDt0cnl7dD1KU09OLnBhcnNlKGUuZGF0YSksaS5kZWZhdWx0LmxvZyhcIlNlcnZlciBtZXNzYWdlIHJlY2VpdmVkOlwiLHQpfWNhdGNoKG8pe3JldHVybiB2b2lkIGkuZGVmYXVsdC5sb2coXCJJbnZhbGlkIHNlcnZlciBtZXNzYWdlXCIsZS5kYXRhKX1uLmVtaXQoYy5Tb2NrZXRFdmVudFR5cGUuTWVzc2FnZSx0KX0sdGhpcy5fc29ja2V0Lm9uY2xvc2U9ZnVuY3Rpb24oZSl7bi5fZGlzY29ubmVjdGVkfHwoaS5kZWZhdWx0LmxvZyhcIlNvY2tldCBjbG9zZWQuXCIsZSksbi5fY2xlYW51cCgpLG4uX2Rpc2Nvbm5lY3RlZD0hMCxuLmVtaXQoYy5Tb2NrZXRFdmVudFR5cGUuRGlzY29ubmVjdGVkKSl9LHRoaXMuX3NvY2tldC5vbm9wZW49ZnVuY3Rpb24oKXtuLl9kaXNjb25uZWN0ZWR8fChuLl9zZW5kUXVldWVkTWVzc2FnZXMoKSxpLmRlZmF1bHQubG9nKFwiU29ja2V0IG9wZW5cIiksbi5fc2NoZWR1bGVIZWFydGJlYXQoKSl9KX0sci5wcm90b3R5cGUuX3NjaGVkdWxlSGVhcnRiZWF0PWZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0aGlzLl93c1BpbmdUaW1lcj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZS5fc2VuZEhlYXJ0YmVhdCgpfSx0aGlzLnBpbmdJbnRlcnZhbCl9LHIucHJvdG90eXBlLl9zZW5kSGVhcnRiZWF0PWZ1bmN0aW9uKCl7aWYodGhpcy5fd3NPcGVuKCkpe3ZhciBlPUpTT04uc3RyaW5naWZ5KHt0eXBlOmMuU2VydmVyTWVzc2FnZVR5cGUuSGVhcnRiZWF0fSk7dGhpcy5fc29ja2V0LnNlbmQoZSksdGhpcy5fc2NoZWR1bGVIZWFydGJlYXQoKX1lbHNlIGkuZGVmYXVsdC5sb2coXCJDYW5ub3Qgc2VuZCBoZWFydGJlYXQsIGJlY2F1c2Ugc29ja2V0IGNsb3NlZFwiKX0sci5wcm90b3R5cGUuX3dzT3Blbj1mdW5jdGlvbigpe3JldHVybiEhdGhpcy5fc29ja2V0JiYxPT09dGhpcy5fc29ja2V0LnJlYWR5U3RhdGV9LHIucHJvdG90eXBlLl9zZW5kUXVldWVkTWVzc2FnZXM9ZnVuY3Rpb24oKXt2YXIgZSxzLHI9bihbXSx0KHRoaXMuX21lc3NhZ2VzUXVldWUpKTt0aGlzLl9tZXNzYWdlc1F1ZXVlPVtdO3RyeXtmb3IodmFyIGk9byhyKSxjPWkubmV4dCgpOyFjLmRvbmU7Yz1pLm5leHQoKSl7dmFyIGE9Yy52YWx1ZTt0aGlzLnNlbmQoYSl9fWNhdGNoKHUpe2U9e2Vycm9yOnV9fWZpbmFsbHl7dHJ5e2MmJiFjLmRvbmUmJihzPWkucmV0dXJuKSYmcy5jYWxsKGkpfWZpbmFsbHl7aWYoZSl0aHJvdyBlLmVycm9yfX19LHIucHJvdG90eXBlLnNlbmQ9ZnVuY3Rpb24oZSl7aWYoIXRoaXMuX2Rpc2Nvbm5lY3RlZClpZih0aGlzLl9pZClpZihlLnR5cGUpe2lmKHRoaXMuX3dzT3BlbigpKXt2YXIgdD1KU09OLnN0cmluZ2lmeShlKTt0aGlzLl9zb2NrZXQuc2VuZCh0KX19ZWxzZSB0aGlzLmVtaXQoYy5Tb2NrZXRFdmVudFR5cGUuRXJyb3IsXCJJbnZhbGlkIG1lc3NhZ2VcIik7ZWxzZSB0aGlzLl9tZXNzYWdlc1F1ZXVlLnB1c2goZSl9LHIucHJvdG90eXBlLmNsb3NlPWZ1bmN0aW9uKCl7dGhpcy5fZGlzY29ubmVjdGVkfHwodGhpcy5fY2xlYW51cCgpLHRoaXMuX2Rpc2Nvbm5lY3RlZD0hMCl9LHIucHJvdG90eXBlLl9jbGVhbnVwPWZ1bmN0aW9uKCl7dGhpcy5fc29ja2V0JiYodGhpcy5fc29ja2V0Lm9ub3Blbj10aGlzLl9zb2NrZXQub25tZXNzYWdlPXRoaXMuX3NvY2tldC5vbmNsb3NlPW51bGwsdGhpcy5fc29ja2V0LmNsb3NlKCksdGhpcy5fc29ja2V0PXZvaWQgMCksY2xlYXJUaW1lb3V0KHRoaXMuX3dzUGluZ1RpbWVyKX0scn0oci5FdmVudEVtaXR0ZXIpO2V4cG9ydHMuU29ja2V0PWE7XG59LHtcImV2ZW50ZW1pdHRlcjNcIjpcIkpKbFNcIixcIi4vbG9nZ2VyXCI6XCJXT3M5XCIsXCIuL2VudW1zXCI6XCJaUllmXCJ9XSxcIkhDZFhcIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cykge1xuXCJ1c2Ugc3RyaWN0XCI7dmFyIGU9dGhpcyYmdGhpcy5fX2Fzc2lnbnx8ZnVuY3Rpb24oKXtyZXR1cm4oZT1PYmplY3QuYXNzaWdufHxmdW5jdGlvbihlKXtmb3IodmFyIG4sdD0xLG89YXJndW1lbnRzLmxlbmd0aDt0PG87dCsrKWZvcih2YXIgaSBpbiBuPWFyZ3VtZW50c1t0XSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobixpKSYmKGVbaV09bltpXSk7cmV0dXJuIGV9KS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LG49dGhpcyYmdGhpcy5fX2F3YWl0ZXJ8fGZ1bmN0aW9uKGUsbix0LG8pe3JldHVybiBuZXcodHx8KHQ9UHJvbWlzZSkpKGZ1bmN0aW9uKGkscil7ZnVuY3Rpb24gYyhlKXt0cnl7cyhvLm5leHQoZSkpfWNhdGNoKG4pe3Iobil9fWZ1bmN0aW9uIGEoZSl7dHJ5e3Moby50aHJvdyhlKSl9Y2F0Y2gobil7cihuKX19ZnVuY3Rpb24gcyhlKXt2YXIgbjtlLmRvbmU/aShlLnZhbHVlKToobj1lLnZhbHVlLG4gaW5zdGFuY2VvZiB0P246bmV3IHQoZnVuY3Rpb24oZSl7ZShuKX0pKS50aGVuKGMsYSl9cygobz1vLmFwcGx5KGUsbnx8W10pKS5uZXh0KCkpfSl9LHQ9dGhpcyYmdGhpcy5fX2dlbmVyYXRvcnx8ZnVuY3Rpb24oZSxuKXt2YXIgdCxvLGkscixjPXtsYWJlbDowLHNlbnQ6ZnVuY3Rpb24oKXtpZigxJmlbMF0pdGhyb3cgaVsxXTtyZXR1cm4gaVsxXX0sdHJ5czpbXSxvcHM6W119O3JldHVybiByPXtuZXh0OmEoMCksdGhyb3c6YSgxKSxyZXR1cm46YSgyKX0sXCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiYocltTeW1ib2wuaXRlcmF0b3JdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KSxyO2Z1bmN0aW9uIGEocil7cmV0dXJuIGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihyKXtpZih0KXRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO2Zvcig7YzspdHJ5e2lmKHQ9MSxvJiYoaT0yJnJbMF0/by5yZXR1cm46clswXT9vLnRocm93fHwoKGk9by5yZXR1cm4pJiZpLmNhbGwobyksMCk6by5uZXh0KSYmIShpPWkuY2FsbChvLHJbMV0pKS5kb25lKXJldHVybiBpO3N3aXRjaChvPTAsaSYmKHI9WzImclswXSxpLnZhbHVlXSksclswXSl7Y2FzZSAwOmNhc2UgMTppPXI7YnJlYWs7Y2FzZSA0OnJldHVybiBjLmxhYmVsKysse3ZhbHVlOnJbMV0sZG9uZTohMX07Y2FzZSA1OmMubGFiZWwrKyxvPXJbMV0scj1bMF07Y29udGludWU7Y2FzZSA3OnI9Yy5vcHMucG9wKCksYy50cnlzLnBvcCgpO2NvbnRpbnVlO2RlZmF1bHQ6aWYoIShpPShpPWMudHJ5cykubGVuZ3RoPjAmJmlbaS5sZW5ndGgtMV0pJiYoNj09PXJbMF18fDI9PT1yWzBdKSl7Yz0wO2NvbnRpbnVlfWlmKDM9PT1yWzBdJiYoIWl8fHJbMV0+aVswXSYmclsxXTxpWzNdKSl7Yy5sYWJlbD1yWzFdO2JyZWFrfWlmKDY9PT1yWzBdJiZjLmxhYmVsPGlbMV0pe2MubGFiZWw9aVsxXSxpPXI7YnJlYWt9aWYoaSYmYy5sYWJlbDxpWzJdKXtjLmxhYmVsPWlbMl0sYy5vcHMucHVzaChyKTticmVha31pWzJdJiZjLm9wcy5wb3AoKSxjLnRyeXMucG9wKCk7Y29udGludWV9cj1uLmNhbGwoZSxjKX1jYXRjaChhKXtyPVs2LGFdLG89MH1maW5hbGx5e3Q9aT0wfWlmKDUmclswXSl0aHJvdyByWzFdO3JldHVybnt2YWx1ZTpyWzBdP3JbMV06dm9pZCAwLGRvbmU6ITB9fShbcixhXSl9fX0sbz10aGlzJiZ0aGlzLl9faW1wb3J0RGVmYXVsdHx8ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLk5lZ290aWF0b3I9dm9pZCAwO3ZhciBpPXJlcXVpcmUoXCIuL3V0aWxcIikscj1vKHJlcXVpcmUoXCIuL2xvZ2dlclwiKSksYz1yZXF1aXJlKFwiLi9lbnVtc1wiKSxhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gbyhlKXt0aGlzLmNvbm5lY3Rpb249ZX1yZXR1cm4gby5wcm90b3R5cGUuc3RhcnRDb25uZWN0aW9uPWZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMuX3N0YXJ0UGVlckNvbm5lY3Rpb24oKTtpZih0aGlzLmNvbm5lY3Rpb24ucGVlckNvbm5lY3Rpb249bix0aGlzLmNvbm5lY3Rpb24udHlwZT09PWMuQ29ubmVjdGlvblR5cGUuTWVkaWEmJmUuX3N0cmVhbSYmdGhpcy5fYWRkVHJhY2tzVG9Db25uZWN0aW9uKGUuX3N0cmVhbSxuKSxlLm9yaWdpbmF0b3Ipe2lmKHRoaXMuY29ubmVjdGlvbi50eXBlPT09Yy5Db25uZWN0aW9uVHlwZS5EYXRhKXt2YXIgdD10aGlzLmNvbm5lY3Rpb24sbz17b3JkZXJlZDohIWUucmVsaWFibGV9LGk9bi5jcmVhdGVEYXRhQ2hhbm5lbCh0LmxhYmVsLG8pO3QuaW5pdGlhbGl6ZShpKX10aGlzLl9tYWtlT2ZmZXIoKX1lbHNlIHRoaXMuaGFuZGxlU0RQKFwiT0ZGRVJcIixlLnNkcCl9LG8ucHJvdG90eXBlLl9zdGFydFBlZXJDb25uZWN0aW9uPWZ1bmN0aW9uKCl7ci5kZWZhdWx0LmxvZyhcIkNyZWF0aW5nIFJUQ1BlZXJDb25uZWN0aW9uLlwiKTt2YXIgZT1uZXcgUlRDUGVlckNvbm5lY3Rpb24odGhpcy5jb25uZWN0aW9uLnByb3ZpZGVyLm9wdGlvbnMuY29uZmlnKTtyZXR1cm4gdGhpcy5fc2V0dXBMaXN0ZW5lcnMoZSksZX0sby5wcm90b3R5cGUuX3NldHVwTGlzdGVuZXJzPWZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMsdD10aGlzLmNvbm5lY3Rpb24ucGVlcixvPXRoaXMuY29ubmVjdGlvbi5jb25uZWN0aW9uSWQsYT10aGlzLmNvbm5lY3Rpb24udHlwZSxzPXRoaXMuY29ubmVjdGlvbi5wcm92aWRlcjtyLmRlZmF1bHQubG9nKFwiTGlzdGVuaW5nIGZvciBJQ0UgY2FuZGlkYXRlcy5cIiksZS5vbmljZWNhbmRpZGF0ZT1mdW5jdGlvbihlKXtlLmNhbmRpZGF0ZSYmZS5jYW5kaWRhdGUuY2FuZGlkYXRlJiYoci5kZWZhdWx0LmxvZyhcIlJlY2VpdmVkIElDRSBjYW5kaWRhdGVzIGZvciBcIit0K1wiOlwiLGUuY2FuZGlkYXRlKSxzLnNvY2tldC5zZW5kKHt0eXBlOmMuU2VydmVyTWVzc2FnZVR5cGUuQ2FuZGlkYXRlLHBheWxvYWQ6e2NhbmRpZGF0ZTplLmNhbmRpZGF0ZSx0eXBlOmEsY29ubmVjdGlvbklkOm99LGRzdDp0fSkpfSxlLm9uaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7c3dpdGNoKGUuaWNlQ29ubmVjdGlvblN0YXRlKXtjYXNlXCJmYWlsZWRcIjpyLmRlZmF1bHQubG9nKFwiaWNlQ29ubmVjdGlvblN0YXRlIGlzIGZhaWxlZCwgY2xvc2luZyBjb25uZWN0aW9ucyB0byBcIit0KSxuLmNvbm5lY3Rpb24uZW1pdChjLkNvbm5lY3Rpb25FdmVudFR5cGUuRXJyb3IsbmV3IEVycm9yKFwiTmVnb3RpYXRpb24gb2YgY29ubmVjdGlvbiB0byBcIit0K1wiIGZhaWxlZC5cIikpLG4uY29ubmVjdGlvbi5jbG9zZSgpO2JyZWFrO2Nhc2VcImNsb3NlZFwiOnIuZGVmYXVsdC5sb2coXCJpY2VDb25uZWN0aW9uU3RhdGUgaXMgY2xvc2VkLCBjbG9zaW5nIGNvbm5lY3Rpb25zIHRvIFwiK3QpLG4uY29ubmVjdGlvbi5lbWl0KGMuQ29ubmVjdGlvbkV2ZW50VHlwZS5FcnJvcixuZXcgRXJyb3IoXCJDb25uZWN0aW9uIHRvIFwiK3QrXCIgY2xvc2VkLlwiKSksbi5jb25uZWN0aW9uLmNsb3NlKCk7YnJlYWs7Y2FzZVwiZGlzY29ubmVjdGVkXCI6ci5kZWZhdWx0LmxvZyhcImljZUNvbm5lY3Rpb25TdGF0ZSBjaGFuZ2VkIHRvIGRpc2Nvbm5lY3RlZCBvbiB0aGUgY29ubmVjdGlvbiB3aXRoIFwiK3QpO2JyZWFrO2Nhc2VcImNvbXBsZXRlZFwiOmUub25pY2VjYW5kaWRhdGU9aS51dGlsLm5vb3B9bi5jb25uZWN0aW9uLmVtaXQoYy5Db25uZWN0aW9uRXZlbnRUeXBlLkljZVN0YXRlQ2hhbmdlZCxlLmljZUNvbm5lY3Rpb25TdGF0ZSl9LHIuZGVmYXVsdC5sb2coXCJMaXN0ZW5pbmcgZm9yIGRhdGEgY2hhbm5lbFwiKSxlLm9uZGF0YWNoYW5uZWw9ZnVuY3Rpb24oZSl7ci5kZWZhdWx0LmxvZyhcIlJlY2VpdmVkIGRhdGEgY2hhbm5lbFwiKTt2YXIgbj1lLmNoYW5uZWw7cy5nZXRDb25uZWN0aW9uKHQsbykuaW5pdGlhbGl6ZShuKX0sci5kZWZhdWx0LmxvZyhcIkxpc3RlbmluZyBmb3IgcmVtb3RlIHN0cmVhbVwiKSxlLm9udHJhY2s9ZnVuY3Rpb24oZSl7ci5kZWZhdWx0LmxvZyhcIlJlY2VpdmVkIHJlbW90ZSBzdHJlYW1cIik7dmFyIGk9ZS5zdHJlYW1zWzBdLGE9cy5nZXRDb25uZWN0aW9uKHQsbyk7aWYoYS50eXBlPT09Yy5Db25uZWN0aW9uVHlwZS5NZWRpYSl7dmFyIGQ9YTtuLl9hZGRTdHJlYW1Ub01lZGlhQ29ubmVjdGlvbihpLGQpfX19LG8ucHJvdG90eXBlLmNsZWFudXA9ZnVuY3Rpb24oKXtyLmRlZmF1bHQubG9nKFwiQ2xlYW5pbmcgdXAgUGVlckNvbm5lY3Rpb24gdG8gXCIrdGhpcy5jb25uZWN0aW9uLnBlZXIpO3ZhciBlPXRoaXMuY29ubmVjdGlvbi5wZWVyQ29ubmVjdGlvbjtpZihlKXt0aGlzLmNvbm5lY3Rpb24ucGVlckNvbm5lY3Rpb249bnVsbCxlLm9uaWNlY2FuZGlkYXRlPWUub25pY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2U9ZS5vbmRhdGFjaGFubmVsPWUub250cmFjaz1mdW5jdGlvbigpe307dmFyIG49XCJjbG9zZWRcIiE9PWUuc2lnbmFsaW5nU3RhdGUsdD0hMTtpZih0aGlzLmNvbm5lY3Rpb24udHlwZT09PWMuQ29ubmVjdGlvblR5cGUuRGF0YSl7dmFyIG89dGhpcy5jb25uZWN0aW9uLmRhdGFDaGFubmVsO28mJih0PSEhby5yZWFkeVN0YXRlJiZcImNsb3NlZFwiIT09by5yZWFkeVN0YXRlKX0obnx8dCkmJmUuY2xvc2UoKX19LG8ucHJvdG90eXBlLl9tYWtlT2ZmZXI9ZnVuY3Rpb24oKXtyZXR1cm4gbih0aGlzLHZvaWQgMCxQcm9taXNlLGZ1bmN0aW9uKCl7dmFyIG4sbyxhLHMsZCxsLHU7cmV0dXJuIHQodGhpcyxmdW5jdGlvbih0KXtzd2l0Y2godC5sYWJlbCl7Y2FzZSAwOm49dGhpcy5jb25uZWN0aW9uLnBlZXJDb25uZWN0aW9uLG89dGhpcy5jb25uZWN0aW9uLnByb3ZpZGVyLHQubGFiZWw9MTtjYXNlIDE6cmV0dXJuIHQudHJ5cy5wdXNoKFsxLDcsLDhdKSxbNCxuLmNyZWF0ZU9mZmVyKHRoaXMuY29ubmVjdGlvbi5vcHRpb25zLmNvbnN0cmFpbnRzKV07Y2FzZSAyOmE9dC5zZW50KCksci5kZWZhdWx0LmxvZyhcIkNyZWF0ZWQgb2ZmZXIuXCIpLHRoaXMuY29ubmVjdGlvbi5vcHRpb25zLnNkcFRyYW5zZm9ybSYmXCJmdW5jdGlvblwiPT10eXBlb2YgdGhpcy5jb25uZWN0aW9uLm9wdGlvbnMuc2RwVHJhbnNmb3JtJiYoYS5zZHA9dGhpcy5jb25uZWN0aW9uLm9wdGlvbnMuc2RwVHJhbnNmb3JtKGEuc2RwKXx8YS5zZHApLHQubGFiZWw9MztjYXNlIDM6cmV0dXJuIHQudHJ5cy5wdXNoKFszLDUsLDZdKSxbNCxuLnNldExvY2FsRGVzY3JpcHRpb24oYSldO2Nhc2UgNDpyZXR1cm4gdC5zZW50KCksci5kZWZhdWx0LmxvZyhcIlNldCBsb2NhbERlc2NyaXB0aW9uOlwiLGEsXCJmb3I6XCIrdGhpcy5jb25uZWN0aW9uLnBlZXIpLHM9e3NkcDphLHR5cGU6dGhpcy5jb25uZWN0aW9uLnR5cGUsY29ubmVjdGlvbklkOnRoaXMuY29ubmVjdGlvbi5jb25uZWN0aW9uSWQsbWV0YWRhdGE6dGhpcy5jb25uZWN0aW9uLm1ldGFkYXRhLGJyb3dzZXI6aS51dGlsLmJyb3dzZXJ9LHRoaXMuY29ubmVjdGlvbi50eXBlPT09Yy5Db25uZWN0aW9uVHlwZS5EYXRhJiYoZD10aGlzLmNvbm5lY3Rpb24scz1lKGUoe30scykse2xhYmVsOmQubGFiZWwscmVsaWFibGU6ZC5yZWxpYWJsZSxzZXJpYWxpemF0aW9uOmQuc2VyaWFsaXphdGlvbn0pKSxvLnNvY2tldC5zZW5kKHt0eXBlOmMuU2VydmVyTWVzc2FnZVR5cGUuT2ZmZXIscGF5bG9hZDpzLGRzdDp0aGlzLmNvbm5lY3Rpb24ucGVlcn0pLFszLDZdO2Nhc2UgNTpyZXR1cm5cIk9wZXJhdGlvbkVycm9yOiBGYWlsZWQgdG8gc2V0IGxvY2FsIG9mZmVyIHNkcDogQ2FsbGVkIGluIHdyb25nIHN0YXRlOiBrSGF2ZVJlbW90ZU9mZmVyXCIhPShsPXQuc2VudCgpKSYmKG8uZW1pdEVycm9yKGMuUGVlckVycm9yVHlwZS5XZWJSVEMsbCksci5kZWZhdWx0LmxvZyhcIkZhaWxlZCB0byBzZXRMb2NhbERlc2NyaXB0aW9uLCBcIixsKSksWzMsNl07Y2FzZSA2OnJldHVyblszLDhdO2Nhc2UgNzpyZXR1cm4gdT10LnNlbnQoKSxvLmVtaXRFcnJvcihjLlBlZXJFcnJvclR5cGUuV2ViUlRDLHUpLHIuZGVmYXVsdC5sb2coXCJGYWlsZWQgdG8gY3JlYXRlT2ZmZXIsIFwiLHUpLFszLDhdO2Nhc2UgODpyZXR1cm5bMl19fSl9KX0sby5wcm90b3R5cGUuX21ha2VBbnN3ZXI9ZnVuY3Rpb24oKXtyZXR1cm4gbih0aGlzLHZvaWQgMCxQcm9taXNlLGZ1bmN0aW9uKCl7dmFyIGUsbixvLGEscztyZXR1cm4gdCh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6ZT10aGlzLmNvbm5lY3Rpb24ucGVlckNvbm5lY3Rpb24sbj10aGlzLmNvbm5lY3Rpb24ucHJvdmlkZXIsdC5sYWJlbD0xO2Nhc2UgMTpyZXR1cm4gdC50cnlzLnB1c2goWzEsNywsOF0pLFs0LGUuY3JlYXRlQW5zd2VyKCldO2Nhc2UgMjpvPXQuc2VudCgpLHIuZGVmYXVsdC5sb2coXCJDcmVhdGVkIGFuc3dlci5cIiksdGhpcy5jb25uZWN0aW9uLm9wdGlvbnMuc2RwVHJhbnNmb3JtJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB0aGlzLmNvbm5lY3Rpb24ub3B0aW9ucy5zZHBUcmFuc2Zvcm0mJihvLnNkcD10aGlzLmNvbm5lY3Rpb24ub3B0aW9ucy5zZHBUcmFuc2Zvcm0oby5zZHApfHxvLnNkcCksdC5sYWJlbD0zO2Nhc2UgMzpyZXR1cm4gdC50cnlzLnB1c2goWzMsNSwsNl0pLFs0LGUuc2V0TG9jYWxEZXNjcmlwdGlvbihvKV07Y2FzZSA0OnJldHVybiB0LnNlbnQoKSxyLmRlZmF1bHQubG9nKFwiU2V0IGxvY2FsRGVzY3JpcHRpb246XCIsbyxcImZvcjpcIit0aGlzLmNvbm5lY3Rpb24ucGVlciksbi5zb2NrZXQuc2VuZCh7dHlwZTpjLlNlcnZlck1lc3NhZ2VUeXBlLkFuc3dlcixwYXlsb2FkOntzZHA6byx0eXBlOnRoaXMuY29ubmVjdGlvbi50eXBlLGNvbm5lY3Rpb25JZDp0aGlzLmNvbm5lY3Rpb24uY29ubmVjdGlvbklkLGJyb3dzZXI6aS51dGlsLmJyb3dzZXJ9LGRzdDp0aGlzLmNvbm5lY3Rpb24ucGVlcn0pLFszLDZdO2Nhc2UgNTpyZXR1cm4gYT10LnNlbnQoKSxuLmVtaXRFcnJvcihjLlBlZXJFcnJvclR5cGUuV2ViUlRDLGEpLHIuZGVmYXVsdC5sb2coXCJGYWlsZWQgdG8gc2V0TG9jYWxEZXNjcmlwdGlvbiwgXCIsYSksWzMsNl07Y2FzZSA2OnJldHVyblszLDhdO2Nhc2UgNzpyZXR1cm4gcz10LnNlbnQoKSxuLmVtaXRFcnJvcihjLlBlZXJFcnJvclR5cGUuV2ViUlRDLHMpLHIuZGVmYXVsdC5sb2coXCJGYWlsZWQgdG8gY3JlYXRlIGFuc3dlciwgXCIscyksWzMsOF07Y2FzZSA4OnJldHVyblsyXX19KX0pfSxvLnByb3RvdHlwZS5oYW5kbGVTRFA9ZnVuY3Rpb24oZSxvKXtyZXR1cm4gbih0aGlzLHZvaWQgMCxQcm9taXNlLGZ1bmN0aW9uKCl7dmFyIG4saSxhLHM7cmV0dXJuIHQodGhpcyxmdW5jdGlvbih0KXtzd2l0Y2godC5sYWJlbCl7Y2FzZSAwOm89bmV3IFJUQ1Nlc3Npb25EZXNjcmlwdGlvbihvKSxuPXRoaXMuY29ubmVjdGlvbi5wZWVyQ29ubmVjdGlvbixpPXRoaXMuY29ubmVjdGlvbi5wcm92aWRlcixyLmRlZmF1bHQubG9nKFwiU2V0dGluZyByZW1vdGUgZGVzY3JpcHRpb25cIixvKSxhPXRoaXMsdC5sYWJlbD0xO2Nhc2UgMTpyZXR1cm4gdC50cnlzLnB1c2goWzEsNSwsNl0pLFs0LG4uc2V0UmVtb3RlRGVzY3JpcHRpb24obyldO2Nhc2UgMjpyZXR1cm4gdC5zZW50KCksci5kZWZhdWx0LmxvZyhcIlNldCByZW1vdGVEZXNjcmlwdGlvbjpcIitlK1wiIGZvcjpcIit0aGlzLmNvbm5lY3Rpb24ucGVlciksXCJPRkZFUlwiIT09ZT9bMyw0XTpbNCxhLl9tYWtlQW5zd2VyKCldO2Nhc2UgMzp0LnNlbnQoKSx0LmxhYmVsPTQ7Y2FzZSA0OnJldHVyblszLDZdO2Nhc2UgNTpyZXR1cm4gcz10LnNlbnQoKSxpLmVtaXRFcnJvcihjLlBlZXJFcnJvclR5cGUuV2ViUlRDLHMpLHIuZGVmYXVsdC5sb2coXCJGYWlsZWQgdG8gc2V0UmVtb3RlRGVzY3JpcHRpb24sIFwiLHMpLFszLDZdO2Nhc2UgNjpyZXR1cm5bMl19fSl9KX0sby5wcm90b3R5cGUuaGFuZGxlQ2FuZGlkYXRlPWZ1bmN0aW9uKGUpe3JldHVybiBuKHRoaXMsdm9pZCAwLFByb21pc2UsZnVuY3Rpb24oKXt2YXIgbixvLGksYSxzLGQ7cmV0dXJuIHQodGhpcyxmdW5jdGlvbih0KXtzd2l0Y2godC5sYWJlbCl7Y2FzZSAwOnIuZGVmYXVsdC5sb2coXCJoYW5kbGVDYW5kaWRhdGU6XCIsZSksbj1lLmNhbmRpZGF0ZSxvPWUuc2RwTUxpbmVJbmRleCxpPWUuc2RwTWlkLGE9dGhpcy5jb25uZWN0aW9uLnBlZXJDb25uZWN0aW9uLHM9dGhpcy5jb25uZWN0aW9uLnByb3ZpZGVyLHQubGFiZWw9MTtjYXNlIDE6cmV0dXJuIHQudHJ5cy5wdXNoKFsxLDMsLDRdKSxbNCxhLmFkZEljZUNhbmRpZGF0ZShuZXcgUlRDSWNlQ2FuZGlkYXRlKHtzZHBNaWQ6aSxzZHBNTGluZUluZGV4Om8sY2FuZGlkYXRlOm59KSldO2Nhc2UgMjpyZXR1cm4gdC5zZW50KCksci5kZWZhdWx0LmxvZyhcIkFkZGVkIElDRSBjYW5kaWRhdGUgZm9yOlwiK3RoaXMuY29ubmVjdGlvbi5wZWVyKSxbMyw0XTtjYXNlIDM6cmV0dXJuIGQ9dC5zZW50KCkscy5lbWl0RXJyb3IoYy5QZWVyRXJyb3JUeXBlLldlYlJUQyxkKSxyLmRlZmF1bHQubG9nKFwiRmFpbGVkIHRvIGhhbmRsZUNhbmRpZGF0ZSwgXCIsZCksWzMsNF07Y2FzZSA0OnJldHVyblsyXX19KX0pfSxvLnByb3RvdHlwZS5fYWRkVHJhY2tzVG9Db25uZWN0aW9uPWZ1bmN0aW9uKGUsbil7aWYoci5kZWZhdWx0LmxvZyhcImFkZCB0cmFja3MgZnJvbSBzdHJlYW0gXCIrZS5pZCtcIiB0byBwZWVyIGNvbm5lY3Rpb25cIiksIW4uYWRkVHJhY2spcmV0dXJuIHIuZGVmYXVsdC5lcnJvcihcIllvdXIgYnJvd3NlciBkb2VzJ3Qgc3VwcG9ydCBSVENQZWVyQ29ubmVjdGlvbiNhZGRUcmFjay4gSWdub3JlZC5cIik7ZS5nZXRUcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe24uYWRkVHJhY2sodCxlKX0pfSxvLnByb3RvdHlwZS5fYWRkU3RyZWFtVG9NZWRpYUNvbm5lY3Rpb249ZnVuY3Rpb24oZSxuKXtyLmRlZmF1bHQubG9nKFwiYWRkIHN0cmVhbSBcIitlLmlkK1wiIHRvIG1lZGlhIGNvbm5lY3Rpb24gXCIrbi5jb25uZWN0aW9uSWQpLG4uYWRkU3RyZWFtKGUpfSxvfSgpO2V4cG9ydHMuTmVnb3RpYXRvcj1hO1xufSx7XCIuL3V0aWxcIjpcIkJIWGZcIixcIi4vbG9nZ2VyXCI6XCJXT3M5XCIsXCIuL2VudW1zXCI6XCJaUllmXCJ9XSxcInRRRktcIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cykge1xuXCJ1c2Ugc3RyaWN0XCI7dmFyIHQ9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIHQ9ZnVuY3Rpb24oZSxuKXtyZXR1cm4odD1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24odCxlKXt0Ll9fcHJvdG9fXz1lfXx8ZnVuY3Rpb24odCxlKXtmb3IodmFyIG4gaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxuKSYmKHRbbl09ZVtuXSl9KShlLG4pfTtyZXR1cm4gZnVuY3Rpb24oZSxuKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBuJiZudWxsIT09bil0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIitTdHJpbmcobikrXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtmdW5jdGlvbiBvKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfXQoZSxuKSxlLnByb3RvdHlwZT1udWxsPT09bj9PYmplY3QuY3JlYXRlKG4pOihvLnByb3RvdHlwZT1uLnByb3RvdHlwZSxuZXcgbyl9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGV4cG9ydHMuQmFzZUNvbm5lY3Rpb249dm9pZCAwO3ZhciBlPXJlcXVpcmUoXCJldmVudGVtaXR0ZXIzXCIpLG49ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gbih0LG4sbyl7dmFyIHI9ZS5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiByLnBlZXI9dCxyLnByb3ZpZGVyPW4sci5vcHRpb25zPW8sci5fb3Blbj0hMSxyLm1ldGFkYXRhPW8ubWV0YWRhdGEscn1yZXR1cm4gdChuLGUpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuLnByb3RvdHlwZSxcIm9wZW5cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29wZW59LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksbn0oZS5FdmVudEVtaXR0ZXIpO2V4cG9ydHMuQmFzZUNvbm5lY3Rpb249bjtcbn0se1wiZXZlbnRlbWl0dGVyM1wiOlwiSkpsU1wifV0sXCJkYkhQXCI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpIHtcblwidXNlIHN0cmljdFwiO3ZhciBlPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBlPWZ1bmN0aW9uKHQsbyl7cmV0dXJuKGU9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBvIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsbykmJihlW29dPXRbb10pfSkodCxvKX07cmV0dXJuIGZ1bmN0aW9uKHQsbyl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgbyYmbnVsbCE9PW8pdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIrU3RyaW5nKG8pK1wiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9dH1lKHQsbyksdC5wcm90b3R5cGU9bnVsbD09PW8/T2JqZWN0LmNyZWF0ZShvKTooci5wcm90b3R5cGU9by5wcm90b3R5cGUsbmV3IHIpfX0oKSx0PXRoaXMmJnRoaXMuX19hc3NpZ258fGZ1bmN0aW9uKCl7cmV0dXJuKHQ9T2JqZWN0LmFzc2lnbnx8ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LG89MSxyPWFyZ3VtZW50cy5sZW5ndGg7bzxyO28rKylmb3IodmFyIG4gaW4gdD1hcmd1bWVudHNbb10pT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsbikmJihlW25dPXRbbl0pO3JldHVybiBlfSkuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxvPXRoaXMmJnRoaXMuX192YWx1ZXN8fGZ1bmN0aW9uKGUpe3ZhciB0PVwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmU3ltYm9sLml0ZXJhdG9yLG89dCYmZVt0XSxyPTA7aWYobylyZXR1cm4gby5jYWxsKGUpO2lmKGUmJlwibnVtYmVyXCI9PXR5cGVvZiBlLmxlbmd0aClyZXR1cm57bmV4dDpmdW5jdGlvbigpe3JldHVybiBlJiZyPj1lLmxlbmd0aCYmKGU9dm9pZCAwKSx7dmFsdWU6ZSYmZVtyKytdLGRvbmU6IWV9fX07dGhyb3cgbmV3IFR5cGVFcnJvcih0P1wiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS5cIjpcIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIil9LHI9dGhpcyYmdGhpcy5fX2ltcG9ydERlZmF1bHR8fGZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX07T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5NZWRpYUNvbm5lY3Rpb249dm9pZCAwO3ZhciBuPXJlcXVpcmUoXCIuL3V0aWxcIiksaT1yKHJlcXVpcmUoXCIuL2xvZ2dlclwiKSksYT1yZXF1aXJlKFwiLi9uZWdvdGlhdG9yXCIpLHM9cmVxdWlyZShcIi4vZW51bXNcIiksbD1yZXF1aXJlKFwiLi9iYXNlY29ubmVjdGlvblwiKSxjPWZ1bmN0aW9uKHIpe2Z1bmN0aW9uIGwoZSx0LG8pe3ZhciBpPXIuY2FsbCh0aGlzLGUsdCxvKXx8dGhpcztyZXR1cm4gaS5fbG9jYWxTdHJlYW09aS5vcHRpb25zLl9zdHJlYW0saS5jb25uZWN0aW9uSWQ9aS5vcHRpb25zLmNvbm5lY3Rpb25JZHx8bC5JRF9QUkVGSVgrbi51dGlsLnJhbmRvbVRva2VuKCksaS5fbmVnb3RpYXRvcj1uZXcgYS5OZWdvdGlhdG9yKGkpLGkuX2xvY2FsU3RyZWFtJiZpLl9uZWdvdGlhdG9yLnN0YXJ0Q29ubmVjdGlvbih7X3N0cmVhbTppLl9sb2NhbFN0cmVhbSxvcmlnaW5hdG9yOiEwfSksaX1yZXR1cm4gZShsLHIpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShsLnByb3RvdHlwZSxcInR5cGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHMuQ29ubmVjdGlvblR5cGUuTWVkaWF9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGwucHJvdG90eXBlLFwibG9jYWxTdHJlYW1cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xvY2FsU3RyZWFtfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShsLnByb3RvdHlwZSxcInJlbW90ZVN0cmVhbVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmVtb3RlU3RyZWFtfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLGwucHJvdG90eXBlLmFkZFN0cmVhbT1mdW5jdGlvbihlKXtpLmRlZmF1bHQubG9nKFwiUmVjZWl2aW5nIHN0cmVhbVwiLGUpLHRoaXMuX3JlbW90ZVN0cmVhbT1lLHIucHJvdG90eXBlLmVtaXQuY2FsbCh0aGlzLHMuQ29ubmVjdGlvbkV2ZW50VHlwZS5TdHJlYW0sZSl9LGwucHJvdG90eXBlLmhhbmRsZU1lc3NhZ2U9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS50eXBlLG89ZS5wYXlsb2FkO3N3aXRjaChlLnR5cGUpe2Nhc2Ugcy5TZXJ2ZXJNZXNzYWdlVHlwZS5BbnN3ZXI6dGhpcy5fbmVnb3RpYXRvci5oYW5kbGVTRFAodCxvLnNkcCksdGhpcy5fb3Blbj0hMDticmVhaztjYXNlIHMuU2VydmVyTWVzc2FnZVR5cGUuQ2FuZGlkYXRlOnRoaXMuX25lZ290aWF0b3IuaGFuZGxlQ2FuZGlkYXRlKG8uY2FuZGlkYXRlKTticmVhaztkZWZhdWx0OmkuZGVmYXVsdC53YXJuKFwiVW5yZWNvZ25pemVkIG1lc3NhZ2UgdHlwZTpcIit0K1wiIGZyb20gcGVlcjpcIit0aGlzLnBlZXIpfX0sbC5wcm90b3R5cGUuYW5zd2VyPWZ1bmN0aW9uKGUscil7dmFyIG4sYTtpZih2b2lkIDA9PT1yJiYocj17fSksdGhpcy5fbG9jYWxTdHJlYW0paS5kZWZhdWx0Lndhcm4oXCJMb2NhbCBzdHJlYW0gYWxyZWFkeSBleGlzdHMgb24gdGhpcyBNZWRpYUNvbm5lY3Rpb24uIEFyZSB5b3UgYW5zd2VyaW5nIGEgY2FsbCB0d2ljZT9cIik7ZWxzZXt0aGlzLl9sb2NhbFN0cmVhbT1lLHImJnIuc2RwVHJhbnNmb3JtJiYodGhpcy5vcHRpb25zLnNkcFRyYW5zZm9ybT1yLnNkcFRyYW5zZm9ybSksdGhpcy5fbmVnb3RpYXRvci5zdGFydENvbm5lY3Rpb24odCh0KHt9LHRoaXMub3B0aW9ucy5fcGF5bG9hZCkse19zdHJlYW06ZX0pKTt2YXIgcz10aGlzLnByb3ZpZGVyLl9nZXRNZXNzYWdlcyh0aGlzLmNvbm5lY3Rpb25JZCk7dHJ5e2Zvcih2YXIgbD1vKHMpLGM9bC5uZXh0KCk7IWMuZG9uZTtjPWwubmV4dCgpKXt2YXIgcD1jLnZhbHVlO3RoaXMuaGFuZGxlTWVzc2FnZShwKX19Y2F0Y2godSl7bj17ZXJyb3I6dX19ZmluYWxseXt0cnl7YyYmIWMuZG9uZSYmKGE9bC5yZXR1cm4pJiZhLmNhbGwobCl9ZmluYWxseXtpZihuKXRocm93IG4uZXJyb3J9fXRoaXMuX29wZW49ITB9fSxsLnByb3RvdHlwZS5jbG9zZT1mdW5jdGlvbigpe3RoaXMuX25lZ290aWF0b3ImJih0aGlzLl9uZWdvdGlhdG9yLmNsZWFudXAoKSx0aGlzLl9uZWdvdGlhdG9yPW51bGwpLHRoaXMuX2xvY2FsU3RyZWFtPW51bGwsdGhpcy5fcmVtb3RlU3RyZWFtPW51bGwsdGhpcy5wcm92aWRlciYmKHRoaXMucHJvdmlkZXIuX3JlbW92ZUNvbm5lY3Rpb24odGhpcyksdGhpcy5wcm92aWRlcj1udWxsKSx0aGlzLm9wdGlvbnMmJnRoaXMub3B0aW9ucy5fc3RyZWFtJiYodGhpcy5vcHRpb25zLl9zdHJlYW09bnVsbCksdGhpcy5vcGVuJiYodGhpcy5fb3Blbj0hMSxyLnByb3RvdHlwZS5lbWl0LmNhbGwodGhpcyxzLkNvbm5lY3Rpb25FdmVudFR5cGUuQ2xvc2UpKX0sbC5JRF9QUkVGSVg9XCJtY19cIixsfShsLkJhc2VDb25uZWN0aW9uKTtleHBvcnRzLk1lZGlhQ29ubmVjdGlvbj1jO1xufSx7XCIuL3V0aWxcIjpcIkJIWGZcIixcIi4vbG9nZ2VyXCI6XCJXT3M5XCIsXCIuL25lZ290aWF0b3JcIjpcIkhDZFhcIixcIi4vZW51bXNcIjpcIlpSWWZcIixcIi4vYmFzZWNvbm5lY3Rpb25cIjpcInRRRktcIn1dLFwiR0dwNlwiOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKSB7XG5cInVzZSBzdHJpY3RcIjt2YXIgZT10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgZT1mdW5jdGlvbih0LHIpe3JldHVybihlPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LHIpJiYoZVtyXT10W3JdKX0pKHQscil9O3JldHVybiBmdW5jdGlvbih0LHIpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHImJm51bGwhPT1yKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiK1N0cmluZyhyKStcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO2Z1bmN0aW9uIG8oKXt0aGlzLmNvbnN0cnVjdG9yPXR9ZSh0LHIpLHQucHJvdG90eXBlPW51bGw9PT1yP09iamVjdC5jcmVhdGUocik6KG8ucHJvdG90eXBlPXIucHJvdG90eXBlLG5ldyBvKX19KCksdD10aGlzJiZ0aGlzLl9faW1wb3J0RGVmYXVsdHx8ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLkVuY29kaW5nUXVldWU9dm9pZCAwO3ZhciByPXJlcXVpcmUoXCJldmVudGVtaXR0ZXIzXCIpLG89dChyZXF1aXJlKFwiLi9sb2dnZXJcIikpLG49ZnVuY3Rpb24odCl7ZnVuY3Rpb24gcigpe3ZhciBlPXQuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gZS5maWxlUmVhZGVyPW5ldyBGaWxlUmVhZGVyLGUuX3F1ZXVlPVtdLGUuX3Byb2Nlc3Npbmc9ITEsZS5maWxlUmVhZGVyLm9ubG9hZD1mdW5jdGlvbih0KXtlLl9wcm9jZXNzaW5nPSExLHQudGFyZ2V0JiZlLmVtaXQoXCJkb25lXCIsdC50YXJnZXQucmVzdWx0KSxlLmRvTmV4dFRhc2soKX0sZS5maWxlUmVhZGVyLm9uZXJyb3I9ZnVuY3Rpb24odCl7by5kZWZhdWx0LmVycm9yKFwiRW5jb2RpbmdRdWV1ZSBlcnJvcjpcIix0KSxlLl9wcm9jZXNzaW5nPSExLGUuZGVzdHJveSgpLGUuZW1pdChcImVycm9yXCIsdCl9LGV9cmV0dXJuIGUocix0KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoci5wcm90b3R5cGUsXCJxdWV1ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcXVldWV9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHIucHJvdG90eXBlLFwic2l6ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5xdWV1ZS5sZW5ndGh9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHIucHJvdG90eXBlLFwicHJvY2Vzc2luZ1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcHJvY2Vzc2luZ30sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxyLnByb3RvdHlwZS5lbnF1ZT1mdW5jdGlvbihlKXt0aGlzLnF1ZXVlLnB1c2goZSksdGhpcy5wcm9jZXNzaW5nfHx0aGlzLmRvTmV4dFRhc2soKX0sci5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMuZmlsZVJlYWRlci5hYm9ydCgpLHRoaXMuX3F1ZXVlPVtdfSxyLnByb3RvdHlwZS5kb05leHRUYXNrPWZ1bmN0aW9uKCl7MCE9PXRoaXMuc2l6ZSYmKHRoaXMucHJvY2Vzc2luZ3x8KHRoaXMuX3Byb2Nlc3Npbmc9ITAsdGhpcy5maWxlUmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKHRoaXMucXVldWUuc2hpZnQoKSkpKX0scn0oci5FdmVudEVtaXR0ZXIpO2V4cG9ydHMuRW5jb2RpbmdRdWV1ZT1uO1xufSx7XCJldmVudGVtaXR0ZXIzXCI6XCJKSmxTXCIsXCIuL2xvZ2dlclwiOlwiV09zOVwifV0sXCJHQlRRXCI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpIHtcblwidXNlIHN0cmljdFwiO3ZhciBlPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBlPWZ1bmN0aW9uKHQsbil7cmV0dXJuKGU9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsbikmJihlW25dPXRbbl0pfSkodCxuKX07cmV0dXJuIGZ1bmN0aW9uKHQsbil7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgbiYmbnVsbCE9PW4pdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIrU3RyaW5nKG4pK1wiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7ZnVuY3Rpb24gaSgpe3RoaXMuY29uc3RydWN0b3I9dH1lKHQsbiksdC5wcm90b3R5cGU9bnVsbD09PW4/T2JqZWN0LmNyZWF0ZShuKTooaS5wcm90b3R5cGU9bi5wcm90b3R5cGUsbmV3IGkpfX0oKSx0PXRoaXMmJnRoaXMuX192YWx1ZXN8fGZ1bmN0aW9uKGUpe3ZhciB0PVwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmU3ltYm9sLml0ZXJhdG9yLG49dCYmZVt0XSxpPTA7aWYobilyZXR1cm4gbi5jYWxsKGUpO2lmKGUmJlwibnVtYmVyXCI9PXR5cGVvZiBlLmxlbmd0aClyZXR1cm57bmV4dDpmdW5jdGlvbigpe3JldHVybiBlJiZpPj1lLmxlbmd0aCYmKGU9dm9pZCAwKSx7dmFsdWU6ZSYmZVtpKytdLGRvbmU6IWV9fX07dGhyb3cgbmV3IFR5cGVFcnJvcih0P1wiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS5cIjpcIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIil9LG49dGhpcyYmdGhpcy5fX2ltcG9ydERlZmF1bHR8fGZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX07T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5EYXRhQ29ubmVjdGlvbj12b2lkIDA7dmFyIGk9cmVxdWlyZShcIi4vdXRpbFwiKSxvPW4ocmVxdWlyZShcIi4vbG9nZ2VyXCIpKSxyPXJlcXVpcmUoXCIuL25lZ290aWF0b3JcIiksYT1yZXF1aXJlKFwiLi9lbnVtc1wiKSxzPXJlcXVpcmUoXCIuL2Jhc2Vjb25uZWN0aW9uXCIpLHU9cmVxdWlyZShcIi4vZW5jb2RpbmdRdWV1ZVwiKSxsPWZ1bmN0aW9uKG4pe2Z1bmN0aW9uIHMoZSx0LGwpe3ZhciBmPW4uY2FsbCh0aGlzLGUsdCxsKXx8dGhpcztyZXR1cm4gZi5zdHJpbmdpZnk9SlNPTi5zdHJpbmdpZnksZi5wYXJzZT1KU09OLnBhcnNlLGYuX2J1ZmZlcj1bXSxmLl9idWZmZXJTaXplPTAsZi5fYnVmZmVyaW5nPSExLGYuX2NodW5rZWREYXRhPXt9LGYuX2VuY29kaW5nUXVldWU9bmV3IHUuRW5jb2RpbmdRdWV1ZSxmLmNvbm5lY3Rpb25JZD1mLm9wdGlvbnMuY29ubmVjdGlvbklkfHxzLklEX1BSRUZJWCtpLnV0aWwucmFuZG9tVG9rZW4oKSxmLmxhYmVsPWYub3B0aW9ucy5sYWJlbHx8Zi5jb25uZWN0aW9uSWQsZi5zZXJpYWxpemF0aW9uPWYub3B0aW9ucy5zZXJpYWxpemF0aW9ufHxhLlNlcmlhbGl6YXRpb25UeXBlLkJpbmFyeSxmLnJlbGlhYmxlPSEhZi5vcHRpb25zLnJlbGlhYmxlLGYuX2VuY29kaW5nUXVldWUub24oXCJkb25lXCIsZnVuY3Rpb24oZSl7Zi5fYnVmZmVyZWRTZW5kKGUpfSksZi5fZW5jb2RpbmdRdWV1ZS5vbihcImVycm9yXCIsZnVuY3Rpb24oKXtvLmRlZmF1bHQuZXJyb3IoXCJEQyNcIitmLmNvbm5lY3Rpb25JZCtcIjogRXJyb3Igb2NjdXJlZCBpbiBlbmNvZGluZyBmcm9tIGJsb2IgdG8gYXJyYXlidWZmZXIsIGNsb3NlIERDXCIpLGYuY2xvc2UoKX0pLGYuX25lZ290aWF0b3I9bmV3IHIuTmVnb3RpYXRvcihmKSxmLl9uZWdvdGlhdG9yLnN0YXJ0Q29ubmVjdGlvbihmLm9wdGlvbnMuX3BheWxvYWR8fHtvcmlnaW5hdG9yOiEwfSksZn1yZXR1cm4gZShzLG4pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLnByb3RvdHlwZSxcInR5cGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGEuQ29ubmVjdGlvblR5cGUuRGF0YX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5wcm90b3R5cGUsXCJkYXRhQ2hhbm5lbFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGN9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHMucHJvdG90eXBlLFwiYnVmZmVyU2l6ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYnVmZmVyU2l6ZX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxzLnByb3RvdHlwZS5pbml0aWFsaXplPWZ1bmN0aW9uKGUpe3RoaXMuX2RjPWUsdGhpcy5fY29uZmlndXJlRGF0YUNoYW5uZWwoKX0scy5wcm90b3R5cGUuX2NvbmZpZ3VyZURhdGFDaGFubmVsPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztpLnV0aWwuc3VwcG9ydHMuYmluYXJ5QmxvYiYmIWkudXRpbC5zdXBwb3J0cy5yZWxpYWJsZXx8KHRoaXMuZGF0YUNoYW5uZWwuYmluYXJ5VHlwZT1cImFycmF5YnVmZmVyXCIpLHRoaXMuZGF0YUNoYW5uZWwub25vcGVuPWZ1bmN0aW9uKCl7by5kZWZhdWx0LmxvZyhcIkRDI1wiK2UuY29ubmVjdGlvbklkK1wiIGRjIGNvbm5lY3Rpb24gc3VjY2Vzc1wiKSxlLl9vcGVuPSEwLGUuZW1pdChhLkNvbm5lY3Rpb25FdmVudFR5cGUuT3Blbil9LHRoaXMuZGF0YUNoYW5uZWwub25tZXNzYWdlPWZ1bmN0aW9uKHQpe28uZGVmYXVsdC5sb2coXCJEQyNcIitlLmNvbm5lY3Rpb25JZCtcIiBkYyBvbm1lc3NhZ2U6XCIsdC5kYXRhKSxlLl9oYW5kbGVEYXRhTWVzc2FnZSh0KX0sdGhpcy5kYXRhQ2hhbm5lbC5vbmNsb3NlPWZ1bmN0aW9uKCl7by5kZWZhdWx0LmxvZyhcIkRDI1wiK2UuY29ubmVjdGlvbklkK1wiIGRjIGNsb3NlZCBmb3I6XCIsZS5wZWVyKSxlLmNsb3NlKCl9fSxzLnByb3RvdHlwZS5faGFuZGxlRGF0YU1lc3NhZ2U9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxvPWUuZGF0YSxyPW8uY29uc3RydWN0b3Iscz1vO2lmKHRoaXMuc2VyaWFsaXphdGlvbj09PWEuU2VyaWFsaXphdGlvblR5cGUuQmluYXJ5fHx0aGlzLnNlcmlhbGl6YXRpb249PT1hLlNlcmlhbGl6YXRpb25UeXBlLkJpbmFyeVVURjgpe2lmKHI9PT1CbG9iKXJldHVybiB2b2lkIGkudXRpbC5ibG9iVG9BcnJheUJ1ZmZlcihvLGZ1bmN0aW9uKGUpe3ZhciBuPWkudXRpbC51bnBhY2soZSk7dC5lbWl0KGEuQ29ubmVjdGlvbkV2ZW50VHlwZS5EYXRhLG4pfSk7aWYocj09PUFycmF5QnVmZmVyKXM9aS51dGlsLnVucGFjayhvKTtlbHNlIGlmKHI9PT1TdHJpbmcpe3ZhciB1PWkudXRpbC5iaW5hcnlTdHJpbmdUb0FycmF5QnVmZmVyKG8pO3M9aS51dGlsLnVucGFjayh1KX19ZWxzZSB0aGlzLnNlcmlhbGl6YXRpb249PT1hLlNlcmlhbGl6YXRpb25UeXBlLkpTT04mJihzPXRoaXMucGFyc2UobykpO3MuX19wZWVyRGF0YT90aGlzLl9oYW5kbGVDaHVuayhzKTpuLnByb3RvdHlwZS5lbWl0LmNhbGwodGhpcyxhLkNvbm5lY3Rpb25FdmVudFR5cGUuRGF0YSxzKX0scy5wcm90b3R5cGUuX2hhbmRsZUNodW5rPWZ1bmN0aW9uKGUpe3ZhciB0PWUuX19wZWVyRGF0YSxuPXRoaXMuX2NodW5rZWREYXRhW3RdfHx7ZGF0YTpbXSxjb3VudDowLHRvdGFsOmUudG90YWx9O2lmKG4uZGF0YVtlLm5dPWUuZGF0YSxuLmNvdW50KyssdGhpcy5fY2h1bmtlZERhdGFbdF09bixuLnRvdGFsPT09bi5jb3VudCl7ZGVsZXRlIHRoaXMuX2NodW5rZWREYXRhW3RdO3ZhciBpPW5ldyBCbG9iKG4uZGF0YSk7dGhpcy5faGFuZGxlRGF0YU1lc3NhZ2Uoe2RhdGE6aX0pfX0scy5wcm90b3R5cGUuY2xvc2U9ZnVuY3Rpb24oKXt0aGlzLl9idWZmZXI9W10sdGhpcy5fYnVmZmVyU2l6ZT0wLHRoaXMuX2NodW5rZWREYXRhPXt9LHRoaXMuX25lZ290aWF0b3ImJih0aGlzLl9uZWdvdGlhdG9yLmNsZWFudXAoKSx0aGlzLl9uZWdvdGlhdG9yPW51bGwpLHRoaXMucHJvdmlkZXImJih0aGlzLnByb3ZpZGVyLl9yZW1vdmVDb25uZWN0aW9uKHRoaXMpLHRoaXMucHJvdmlkZXI9bnVsbCksdGhpcy5kYXRhQ2hhbm5lbCYmKHRoaXMuZGF0YUNoYW5uZWwub25vcGVuPW51bGwsdGhpcy5kYXRhQ2hhbm5lbC5vbm1lc3NhZ2U9bnVsbCx0aGlzLmRhdGFDaGFubmVsLm9uY2xvc2U9bnVsbCx0aGlzLl9kYz1udWxsKSx0aGlzLl9lbmNvZGluZ1F1ZXVlJiYodGhpcy5fZW5jb2RpbmdRdWV1ZS5kZXN0cm95KCksdGhpcy5fZW5jb2RpbmdRdWV1ZS5yZW1vdmVBbGxMaXN0ZW5lcnMoKSx0aGlzLl9lbmNvZGluZ1F1ZXVlPW51bGwpLHRoaXMub3BlbiYmKHRoaXMuX29wZW49ITEsbi5wcm90b3R5cGUuZW1pdC5jYWxsKHRoaXMsYS5Db25uZWN0aW9uRXZlbnRUeXBlLkNsb3NlKSl9LHMucHJvdG90eXBlLnNlbmQ9ZnVuY3Rpb24oZSx0KXtpZih0aGlzLm9wZW4paWYodGhpcy5zZXJpYWxpemF0aW9uPT09YS5TZXJpYWxpemF0aW9uVHlwZS5KU09OKXRoaXMuX2J1ZmZlcmVkU2VuZCh0aGlzLnN0cmluZ2lmeShlKSk7ZWxzZSBpZih0aGlzLnNlcmlhbGl6YXRpb249PT1hLlNlcmlhbGl6YXRpb25UeXBlLkJpbmFyeXx8dGhpcy5zZXJpYWxpemF0aW9uPT09YS5TZXJpYWxpemF0aW9uVHlwZS5CaW5hcnlVVEY4KXt2YXIgbz1pLnV0aWwucGFjayhlKTtpZighdCYmby5zaXplPmkudXRpbC5jaHVua2VkTVRVKXJldHVybiB2b2lkIHRoaXMuX3NlbmRDaHVua3Mobyk7aS51dGlsLnN1cHBvcnRzLmJpbmFyeUJsb2I/dGhpcy5fYnVmZmVyZWRTZW5kKG8pOnRoaXMuX2VuY29kaW5nUXVldWUuZW5xdWUobyl9ZWxzZSB0aGlzLl9idWZmZXJlZFNlbmQoZSk7ZWxzZSBuLnByb3RvdHlwZS5lbWl0LmNhbGwodGhpcyxhLkNvbm5lY3Rpb25FdmVudFR5cGUuRXJyb3IsbmV3IEVycm9yKFwiQ29ubmVjdGlvbiBpcyBub3Qgb3Blbi4gWW91IHNob3VsZCBsaXN0ZW4gZm9yIHRoZSBgb3BlbmAgZXZlbnQgYmVmb3JlIHNlbmRpbmcgbWVzc2FnZXMuXCIpKX0scy5wcm90b3R5cGUuX2J1ZmZlcmVkU2VuZD1mdW5jdGlvbihlKXshdGhpcy5fYnVmZmVyaW5nJiZ0aGlzLl90cnlTZW5kKGUpfHwodGhpcy5fYnVmZmVyLnB1c2goZSksdGhpcy5fYnVmZmVyU2l6ZT10aGlzLl9idWZmZXIubGVuZ3RoKX0scy5wcm90b3R5cGUuX3RyeVNlbmQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztpZighdGhpcy5vcGVuKXJldHVybiExO2lmKHRoaXMuZGF0YUNoYW5uZWwuYnVmZmVyZWRBbW91bnQ+cy5NQVhfQlVGRkVSRURfQU1PVU5UKXJldHVybiB0aGlzLl9idWZmZXJpbmc9ITAsc2V0VGltZW91dChmdW5jdGlvbigpe3QuX2J1ZmZlcmluZz0hMSx0Ll90cnlCdWZmZXIoKX0sNTApLCExO3RyeXt0aGlzLmRhdGFDaGFubmVsLnNlbmQoZSl9Y2F0Y2gobil7cmV0dXJuIG8uZGVmYXVsdC5lcnJvcihcIkRDIzpcIit0aGlzLmNvbm5lY3Rpb25JZCtcIiBFcnJvciB3aGVuIHNlbmRpbmc6XCIsbiksdGhpcy5fYnVmZmVyaW5nPSEwLHRoaXMuY2xvc2UoKSwhMX1yZXR1cm4hMH0scy5wcm90b3R5cGUuX3RyeUJ1ZmZlcj1mdW5jdGlvbigpe2lmKHRoaXMub3BlbiYmMCE9PXRoaXMuX2J1ZmZlci5sZW5ndGgpe3ZhciBlPXRoaXMuX2J1ZmZlclswXTt0aGlzLl90cnlTZW5kKGUpJiYodGhpcy5fYnVmZmVyLnNoaWZ0KCksdGhpcy5fYnVmZmVyU2l6ZT10aGlzLl9idWZmZXIubGVuZ3RoLHRoaXMuX3RyeUJ1ZmZlcigpKX19LHMucHJvdG90eXBlLl9zZW5kQ2h1bmtzPWZ1bmN0aW9uKGUpe3ZhciBuLHIsYT1pLnV0aWwuY2h1bmsoZSk7by5kZWZhdWx0LmxvZyhcIkRDI1wiK3RoaXMuY29ubmVjdGlvbklkK1wiIFRyeSB0byBzZW5kIFwiK2EubGVuZ3RoK1wiIGNodW5rcy4uLlwiKTt0cnl7Zm9yKHZhciBzPXQoYSksdT1zLm5leHQoKTshdS5kb25lO3U9cy5uZXh0KCkpe3ZhciBsPXUudmFsdWU7dGhpcy5zZW5kKGwsITApfX1jYXRjaChmKXtuPXtlcnJvcjpmfX1maW5hbGx5e3RyeXt1JiYhdS5kb25lJiYocj1zLnJldHVybikmJnIuY2FsbChzKX1maW5hbGx5e2lmKG4pdGhyb3cgbi5lcnJvcn19fSxzLnByb3RvdHlwZS5oYW5kbGVNZXNzYWdlPWZ1bmN0aW9uKGUpe3ZhciB0PWUucGF5bG9hZDtzd2l0Y2goZS50eXBlKXtjYXNlIGEuU2VydmVyTWVzc2FnZVR5cGUuQW5zd2VyOnRoaXMuX25lZ290aWF0b3IuaGFuZGxlU0RQKGUudHlwZSx0LnNkcCk7YnJlYWs7Y2FzZSBhLlNlcnZlck1lc3NhZ2VUeXBlLkNhbmRpZGF0ZTp0aGlzLl9uZWdvdGlhdG9yLmhhbmRsZUNhbmRpZGF0ZSh0LmNhbmRpZGF0ZSk7YnJlYWs7ZGVmYXVsdDpvLmRlZmF1bHQud2FybihcIlVucmVjb2duaXplZCBtZXNzYWdlIHR5cGU6XCIsZS50eXBlLFwiZnJvbSBwZWVyOlwiLHRoaXMucGVlcil9fSxzLklEX1BSRUZJWD1cImRjX1wiLHMuTUFYX0JVRkZFUkVEX0FNT1VOVD04Mzg4NjA4LHN9KHMuQmFzZUNvbm5lY3Rpb24pO2V4cG9ydHMuRGF0YUNvbm5lY3Rpb249bDtcbn0se1wiLi91dGlsXCI6XCJCSFhmXCIsXCIuL2xvZ2dlclwiOlwiV09zOVwiLFwiLi9uZWdvdGlhdG9yXCI6XCJIQ2RYXCIsXCIuL2VudW1zXCI6XCJaUllmXCIsXCIuL2Jhc2Vjb25uZWN0aW9uXCI6XCJ0UUZLXCIsXCIuL2VuY29kaW5nUXVldWVcIjpcIkdHcDZcIn1dLFwiaW43TFwiOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKSB7XG5cInVzZSBzdHJpY3RcIjt2YXIgdD10aGlzJiZ0aGlzLl9fYXdhaXRlcnx8ZnVuY3Rpb24odCxlLHIsbyl7cmV0dXJuIG5ldyhyfHwocj1Qcm9taXNlKSkoZnVuY3Rpb24obixzKXtmdW5jdGlvbiBpKHQpe3RyeXthKG8ubmV4dCh0KSl9Y2F0Y2goZSl7cyhlKX19ZnVuY3Rpb24gdSh0KXt0cnl7YShvLnRocm93KHQpKX1jYXRjaChlKXtzKGUpfX1mdW5jdGlvbiBhKHQpe3ZhciBlO3QuZG9uZT9uKHQudmFsdWUpOihlPXQudmFsdWUsZSBpbnN0YW5jZW9mIHI/ZTpuZXcgcihmdW5jdGlvbih0KXt0KGUpfSkpLnRoZW4oaSx1KX1hKChvPW8uYXBwbHkodCxlfHxbXSkpLm5leHQoKSl9KX0sZT10aGlzJiZ0aGlzLl9fZ2VuZXJhdG9yfHxmdW5jdGlvbih0LGUpe3ZhciByLG8sbixzLGk9e2xhYmVsOjAsc2VudDpmdW5jdGlvbigpe2lmKDEmblswXSl0aHJvdyBuWzFdO3JldHVybiBuWzFdfSx0cnlzOltdLG9wczpbXX07cmV0dXJuIHM9e25leHQ6dSgwKSx0aHJvdzp1KDEpLHJldHVybjp1KDIpfSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJihzW1N5bWJvbC5pdGVyYXRvcl09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pLHM7ZnVuY3Rpb24gdShzKXtyZXR1cm4gZnVuY3Rpb24odSl7cmV0dXJuIGZ1bmN0aW9uKHMpe2lmKHIpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7Zm9yKDtpOyl0cnl7aWYocj0xLG8mJihuPTImc1swXT9vLnJldHVybjpzWzBdP28udGhyb3d8fCgobj1vLnJldHVybikmJm4uY2FsbChvKSwwKTpvLm5leHQpJiYhKG49bi5jYWxsKG8sc1sxXSkpLmRvbmUpcmV0dXJuIG47c3dpdGNoKG89MCxuJiYocz1bMiZzWzBdLG4udmFsdWVdKSxzWzBdKXtjYXNlIDA6Y2FzZSAxOm49czticmVhaztjYXNlIDQ6cmV0dXJuIGkubGFiZWwrKyx7dmFsdWU6c1sxXSxkb25lOiExfTtjYXNlIDU6aS5sYWJlbCsrLG89c1sxXSxzPVswXTtjb250aW51ZTtjYXNlIDc6cz1pLm9wcy5wb3AoKSxpLnRyeXMucG9wKCk7Y29udGludWU7ZGVmYXVsdDppZighKG49KG49aS50cnlzKS5sZW5ndGg+MCYmbltuLmxlbmd0aC0xXSkmJig2PT09c1swXXx8Mj09PXNbMF0pKXtpPTA7Y29udGludWV9aWYoMz09PXNbMF0mJighbnx8c1sxXT5uWzBdJiZzWzFdPG5bM10pKXtpLmxhYmVsPXNbMV07YnJlYWt9aWYoNj09PXNbMF0mJmkubGFiZWw8blsxXSl7aS5sYWJlbD1uWzFdLG49czticmVha31pZihuJiZpLmxhYmVsPG5bMl0pe2kubGFiZWw9blsyXSxpLm9wcy5wdXNoKHMpO2JyZWFrfW5bMl0mJmkub3BzLnBvcCgpLGkudHJ5cy5wb3AoKTtjb250aW51ZX1zPWUuY2FsbCh0LGkpfWNhdGNoKHUpe3M9WzYsdV0sbz0wfWZpbmFsbHl7cj1uPTB9aWYoNSZzWzBdKXRocm93IHNbMV07cmV0dXJue3ZhbHVlOnNbMF0/c1sxXTp2b2lkIDAsZG9uZTohMH19KFtzLHVdKX19fSxyPXRoaXMmJnRoaXMuX19pbXBvcnREZWZhdWx0fHxmdW5jdGlvbih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19O09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGV4cG9ydHMuQVBJPXZvaWQgMDt2YXIgbz1yZXF1aXJlKFwiLi91dGlsXCIpLG49cihyZXF1aXJlKFwiLi9sb2dnZXJcIikpLHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiByKHQpe3RoaXMuX29wdGlvbnM9dH1yZXR1cm4gci5wcm90b3R5cGUuX2J1aWxkVXJsPWZ1bmN0aW9uKHQpe3ZhciBlPSh0aGlzLl9vcHRpb25zLnNlY3VyZT9cImh0dHBzOi8vXCI6XCJodHRwOi8vXCIpK3RoaXMuX29wdGlvbnMuaG9zdCtcIjpcIit0aGlzLl9vcHRpb25zLnBvcnQrdGhpcy5fb3B0aW9ucy5wYXRoK3RoaXMuX29wdGlvbnMua2V5K1wiL1wiK3Q7cmV0dXJuIGUrPVwiP3RzPVwiKyhuZXcgRGF0ZSkuZ2V0VGltZSgpK01hdGgucmFuZG9tKCl9LHIucHJvdG90eXBlLnJldHJpZXZlSWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdCh0aGlzLHZvaWQgMCxQcm9taXNlLGZ1bmN0aW9uKCl7dmFyIHQscixzLGk7cmV0dXJuIGUodGhpcyxmdW5jdGlvbihlKXtzd2l0Y2goZS5sYWJlbCl7Y2FzZSAwOnQ9dGhpcy5fYnVpbGRVcmwoXCJpZFwiKSxlLmxhYmVsPTE7Y2FzZSAxOnJldHVybiBlLnRyeXMucHVzaChbMSwzLCw0XSksWzQsZmV0Y2godCldO2Nhc2UgMjppZigyMDAhPT0ocj1lLnNlbnQoKSkuc3RhdHVzKXRocm93IG5ldyBFcnJvcihcIkVycm9yLiBTdGF0dXM6XCIrci5zdGF0dXMpO3JldHVyblsyLHIudGV4dCgpXTtjYXNlIDM6dGhyb3cgcz1lLnNlbnQoKSxuLmRlZmF1bHQuZXJyb3IoXCJFcnJvciByZXRyaWV2aW5nIElEXCIscyksaT1cIlwiLFwiL1wiPT09dGhpcy5fb3B0aW9ucy5wYXRoJiZ0aGlzLl9vcHRpb25zLmhvc3QhPT1vLnV0aWwuQ0xPVURfSE9TVCYmKGk9XCIgSWYgeW91IHBhc3NlZCBpbiBhIGBwYXRoYCB0byB5b3VyIHNlbGYtaG9zdGVkIFBlZXJTZXJ2ZXIsIHlvdSdsbCBhbHNvIG5lZWQgdG8gcGFzcyBpbiB0aGF0IHNhbWUgcGF0aCB3aGVuIGNyZWF0aW5nIGEgbmV3IFBlZXIuXCIpLG5ldyBFcnJvcihcIkNvdWxkIG5vdCBnZXQgYW4gSUQgZnJvbSB0aGUgc2VydmVyLlwiK2kpO2Nhc2UgNDpyZXR1cm5bMl19fSl9KX0sci5wcm90b3R5cGUubGlzdEFsbFBlZXJzPWZ1bmN0aW9uKCl7cmV0dXJuIHQodGhpcyx2b2lkIDAsUHJvbWlzZSxmdW5jdGlvbigpe3ZhciB0LHIscyxpO3JldHVybiBlKHRoaXMsZnVuY3Rpb24oZSl7c3dpdGNoKGUubGFiZWwpe2Nhc2UgMDp0PXRoaXMuX2J1aWxkVXJsKFwicGVlcnNcIiksZS5sYWJlbD0xO2Nhc2UgMTpyZXR1cm4gZS50cnlzLnB1c2goWzEsMywsNF0pLFs0LGZldGNoKHQpXTtjYXNlIDI6aWYoMjAwIT09KHI9ZS5zZW50KCkpLnN0YXR1cyl7aWYoNDAxPT09ci5zdGF0dXMpdGhyb3cgcz1cIlwiLHM9dGhpcy5fb3B0aW9ucy5ob3N0PT09by51dGlsLkNMT1VEX0hPU1Q/XCJJdCBsb29rcyBsaWtlIHlvdSdyZSB1c2luZyB0aGUgY2xvdWQgc2VydmVyLiBZb3UgY2FuIGVtYWlsIHRlYW1AcGVlcmpzLmNvbSB0byBlbmFibGUgcGVlciBsaXN0aW5nIGZvciB5b3VyIEFQSSBrZXkuXCI6XCJZb3UgbmVlZCB0byBlbmFibGUgYGFsbG93X2Rpc2NvdmVyeWAgb24geW91ciBzZWxmLWhvc3RlZCBQZWVyU2VydmVyIHRvIHVzZSB0aGlzIGZlYXR1cmUuXCIsbmV3IEVycm9yKFwiSXQgZG9lc24ndCBsb29rIGxpa2UgeW91IGhhdmUgcGVybWlzc2lvbiB0byBsaXN0IHBlZXJzIElEcy4gXCIrcyk7dGhyb3cgbmV3IEVycm9yKFwiRXJyb3IuIFN0YXR1czpcIityLnN0YXR1cyl9cmV0dXJuWzIsci5qc29uKCldO2Nhc2UgMzp0aHJvdyBpPWUuc2VudCgpLG4uZGVmYXVsdC5lcnJvcihcIkVycm9yIHJldHJpZXZpbmcgbGlzdCBwZWVyc1wiLGkpLG5ldyBFcnJvcihcIkNvdWxkIG5vdCBnZXQgbGlzdCBwZWVycyBmcm9tIHRoZSBzZXJ2ZXIuXCIraSk7Y2FzZSA0OnJldHVyblsyXX19KX0pfSxyfSgpO2V4cG9ydHMuQVBJPXM7XG59LHtcIi4vdXRpbFwiOlwiQkhYZlwiLFwiLi9sb2dnZXJcIjpcIldPczlcIn1dLFwiSHhwZFwiOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKSB7XG5cInVzZSBzdHJpY3RcIjt2YXIgZT10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgZT1mdW5jdGlvbih0LG4pe3JldHVybihlPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgbiBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LG4pJiYoZVtuXT10W25dKX0pKHQsbil9O3JldHVybiBmdW5jdGlvbih0LG4pe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIG4mJm51bGwhPT1uKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiK1N0cmluZyhuKStcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPXR9ZSh0LG4pLHQucHJvdG90eXBlPW51bGw9PT1uP09iamVjdC5jcmVhdGUobik6KHIucHJvdG90eXBlPW4ucHJvdG90eXBlLG5ldyByKX19KCksdD10aGlzJiZ0aGlzLl9fYXNzaWdufHxmdW5jdGlvbigpe3JldHVybih0PU9iamVjdC5hc3NpZ258fGZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxuPTEscj1hcmd1bWVudHMubGVuZ3RoO248cjtuKyspZm9yKHZhciBvIGluIHQ9YXJndW1lbnRzW25dKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LG8pJiYoZVtvXT10W29dKTtyZXR1cm4gZX0pLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sbj10aGlzJiZ0aGlzLl9fdmFsdWVzfHxmdW5jdGlvbihlKXt2YXIgdD1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlN5bWJvbC5pdGVyYXRvcixuPXQmJmVbdF0scj0wO2lmKG4pcmV0dXJuIG4uY2FsbChlKTtpZihlJiZcIm51bWJlclwiPT10eXBlb2YgZS5sZW5ndGgpcmV0dXJue25leHQ6ZnVuY3Rpb24oKXtyZXR1cm4gZSYmcj49ZS5sZW5ndGgmJihlPXZvaWQgMCkse3ZhbHVlOmUmJmVbcisrXSxkb25lOiFlfX19O3Rocm93IG5ldyBUeXBlRXJyb3IodD9cIk9iamVjdCBpcyBub3QgaXRlcmFibGUuXCI6XCJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpfSxyPXRoaXMmJnRoaXMuX19yZWFkfHxmdW5jdGlvbihlLHQpe3ZhciBuPVwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmZVtTeW1ib2wuaXRlcmF0b3JdO2lmKCFuKXJldHVybiBlO3ZhciByLG8saT1uLmNhbGwoZSkscz1bXTt0cnl7Zm9yKDsodm9pZCAwPT09dHx8dC0tID4wKSYmIShyPWkubmV4dCgpKS5kb25lOylzLnB1c2goci52YWx1ZSl9Y2F0Y2goYSl7bz17ZXJyb3I6YX19ZmluYWxseXt0cnl7ciYmIXIuZG9uZSYmKG49aS5yZXR1cm4pJiZuLmNhbGwoaSl9ZmluYWxseXtpZihvKXRocm93IG8uZXJyb3J9fXJldHVybiBzfSxvPXRoaXMmJnRoaXMuX19pbXBvcnREZWZhdWx0fHxmdW5jdGlvbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19O09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGV4cG9ydHMuUGVlcj12b2lkIDA7dmFyIGk9cmVxdWlyZShcImV2ZW50ZW1pdHRlcjNcIikscz1yZXF1aXJlKFwiLi91dGlsXCIpLGE9byhyZXF1aXJlKFwiLi9sb2dnZXJcIikpLGM9cmVxdWlyZShcIi4vc29ja2V0XCIpLGw9cmVxdWlyZShcIi4vbWVkaWFjb25uZWN0aW9uXCIpLHU9cmVxdWlyZShcIi4vZGF0YWNvbm5lY3Rpb25cIiksZD1yZXF1aXJlKFwiLi9lbnVtc1wiKSxwPXJlcXVpcmUoXCIuL2FwaVwiKSxoPWZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKCl7fX0oKSxmPWZ1bmN0aW9uKG8pe2Z1bmN0aW9uIGkoZSxuKXt2YXIgcixjPW8uY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gYy5faWQ9bnVsbCxjLl9sYXN0U2VydmVySWQ9bnVsbCxjLl9kZXN0cm95ZWQ9ITEsYy5fZGlzY29ubmVjdGVkPSExLGMuX29wZW49ITEsYy5fY29ubmVjdGlvbnM9bmV3IE1hcCxjLl9sb3N0TWVzc2FnZXM9bmV3IE1hcCxlJiZlLmNvbnN0cnVjdG9yPT1PYmplY3Q/bj1lOmUmJihyPWUudG9TdHJpbmcoKSksbj10KHtkZWJ1ZzowLGhvc3Q6cy51dGlsLkNMT1VEX0hPU1QscG9ydDpzLnV0aWwuQ0xPVURfUE9SVCxwYXRoOlwiL1wiLGtleTppLkRFRkFVTFRfS0VZLHRva2VuOnMudXRpbC5yYW5kb21Ub2tlbigpLGNvbmZpZzpzLnV0aWwuZGVmYXVsdENvbmZpZ30sbiksYy5fb3B0aW9ucz1uLFwiL1wiPT09Yy5fb3B0aW9ucy5ob3N0JiYoYy5fb3B0aW9ucy5ob3N0PXdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSksYy5fb3B0aW9ucy5wYXRoJiYoXCIvXCIhPT1jLl9vcHRpb25zLnBhdGhbMF0mJihjLl9vcHRpb25zLnBhdGg9XCIvXCIrYy5fb3B0aW9ucy5wYXRoKSxcIi9cIiE9PWMuX29wdGlvbnMucGF0aFtjLl9vcHRpb25zLnBhdGgubGVuZ3RoLTFdJiYoYy5fb3B0aW9ucy5wYXRoKz1cIi9cIikpLHZvaWQgMD09PWMuX29wdGlvbnMuc2VjdXJlJiZjLl9vcHRpb25zLmhvc3QhPT1zLnV0aWwuQ0xPVURfSE9TVD9jLl9vcHRpb25zLnNlY3VyZT1zLnV0aWwuaXNTZWN1cmUoKTpjLl9vcHRpb25zLmhvc3Q9PXMudXRpbC5DTE9VRF9IT1NUJiYoYy5fb3B0aW9ucy5zZWN1cmU9ITApLGMuX29wdGlvbnMubG9nRnVuY3Rpb24mJmEuZGVmYXVsdC5zZXRMb2dGdW5jdGlvbihjLl9vcHRpb25zLmxvZ0Z1bmN0aW9uKSxhLmRlZmF1bHQubG9nTGV2ZWw9Yy5fb3B0aW9ucy5kZWJ1Z3x8MCxjLl9hcGk9bmV3IHAuQVBJKG4pLGMuX3NvY2tldD1jLl9jcmVhdGVTZXJ2ZXJDb25uZWN0aW9uKCkscy51dGlsLnN1cHBvcnRzLmF1ZGlvVmlkZW98fHMudXRpbC5zdXBwb3J0cy5kYXRhP3ImJiFzLnV0aWwudmFsaWRhdGVJZChyKT8oYy5fZGVsYXllZEFib3J0KGQuUGVlckVycm9yVHlwZS5JbnZhbGlkSUQsJ0lEIFwiJytyKydcIiBpcyBpbnZhbGlkJyksYyk6KHI/Yy5faW5pdGlhbGl6ZShyKTpjLl9hcGkucmV0cmlldmVJZCgpLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIGMuX2luaXRpYWxpemUoZSl9KS5jYXRjaChmdW5jdGlvbihlKXtyZXR1cm4gYy5fYWJvcnQoZC5QZWVyRXJyb3JUeXBlLlNlcnZlckVycm9yLGUpfSksYyk6KGMuX2RlbGF5ZWRBYm9ydChkLlBlZXJFcnJvclR5cGUuQnJvd3NlckluY29tcGF0aWJsZSxcIlRoZSBjdXJyZW50IGJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCBXZWJSVENcIiksYyl9cmV0dXJuIGUoaSxvKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoaS5wcm90b3R5cGUsXCJpZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faWR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGkucHJvdG90eXBlLFwib3B0aW9uc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3B0aW9uc30sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoaS5wcm90b3R5cGUsXCJvcGVuXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vcGVufSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpLnByb3RvdHlwZSxcInNvY2tldFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc29ja2V0fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpLnByb3RvdHlwZSxcImNvbm5lY3Rpb25zXCIse2dldDpmdW5jdGlvbigpe3ZhciBlLHQsbz1PYmplY3QuY3JlYXRlKG51bGwpO3RyeXtmb3IodmFyIGk9bih0aGlzLl9jb25uZWN0aW9ucykscz1pLm5leHQoKTshcy5kb25lO3M9aS5uZXh0KCkpe3ZhciBhPXIocy52YWx1ZSwyKSxjPWFbMF0sbD1hWzFdO29bY109bH19Y2F0Y2godSl7ZT17ZXJyb3I6dX19ZmluYWxseXt0cnl7cyYmIXMuZG9uZSYmKHQ9aS5yZXR1cm4pJiZ0LmNhbGwoaSl9ZmluYWxseXtpZihlKXRocm93IGUuZXJyb3J9fXJldHVybiBvfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpLnByb3RvdHlwZSxcImRlc3Ryb3llZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGVzdHJveWVkfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpLnByb3RvdHlwZSxcImRpc2Nvbm5lY3RlZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGlzY29ubmVjdGVkfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLGkucHJvdG90eXBlLl9jcmVhdGVTZXJ2ZXJDb25uZWN0aW9uPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PW5ldyBjLlNvY2tldCh0aGlzLl9vcHRpb25zLnNlY3VyZSx0aGlzLl9vcHRpb25zLmhvc3QsdGhpcy5fb3B0aW9ucy5wb3J0LHRoaXMuX29wdGlvbnMucGF0aCx0aGlzLl9vcHRpb25zLmtleSx0aGlzLl9vcHRpb25zLnBpbmdJbnRlcnZhbCk7cmV0dXJuIHQub24oZC5Tb2NrZXRFdmVudFR5cGUuTWVzc2FnZSxmdW5jdGlvbih0KXtlLl9oYW5kbGVNZXNzYWdlKHQpfSksdC5vbihkLlNvY2tldEV2ZW50VHlwZS5FcnJvcixmdW5jdGlvbih0KXtlLl9hYm9ydChkLlBlZXJFcnJvclR5cGUuU29ja2V0RXJyb3IsdCl9KSx0Lm9uKGQuU29ja2V0RXZlbnRUeXBlLkRpc2Nvbm5lY3RlZCxmdW5jdGlvbigpe2UuZGlzY29ubmVjdGVkfHwoZS5lbWl0RXJyb3IoZC5QZWVyRXJyb3JUeXBlLk5ldHdvcmssXCJMb3N0IGNvbm5lY3Rpb24gdG8gc2VydmVyLlwiKSxlLmRpc2Nvbm5lY3QoKSl9KSx0Lm9uKGQuU29ja2V0RXZlbnRUeXBlLkNsb3NlLGZ1bmN0aW9uKCl7ZS5kaXNjb25uZWN0ZWR8fGUuX2Fib3J0KGQuUGVlckVycm9yVHlwZS5Tb2NrZXRDbG9zZWQsXCJVbmRlcmx5aW5nIHNvY2tldCBpcyBhbHJlYWR5IGNsb3NlZC5cIil9KSx0fSxpLnByb3RvdHlwZS5faW5pdGlhbGl6ZT1mdW5jdGlvbihlKXt0aGlzLl9pZD1lLHRoaXMuc29ja2V0LnN0YXJ0KGUsdGhpcy5fb3B0aW9ucy50b2tlbil9LGkucHJvdG90eXBlLl9oYW5kbGVNZXNzYWdlPWZ1bmN0aW9uKGUpe3ZhciB0LHIsbz1lLnR5cGUsaT1lLnBheWxvYWQscz1lLnNyYztzd2l0Y2gobyl7Y2FzZSBkLlNlcnZlck1lc3NhZ2VUeXBlLk9wZW46dGhpcy5fbGFzdFNlcnZlcklkPXRoaXMuaWQsdGhpcy5fb3Blbj0hMCx0aGlzLmVtaXQoZC5QZWVyRXZlbnRUeXBlLk9wZW4sdGhpcy5pZCk7YnJlYWs7Y2FzZSBkLlNlcnZlck1lc3NhZ2VUeXBlLkVycm9yOnRoaXMuX2Fib3J0KGQuUGVlckVycm9yVHlwZS5TZXJ2ZXJFcnJvcixpLm1zZyk7YnJlYWs7Y2FzZSBkLlNlcnZlck1lc3NhZ2VUeXBlLklkVGFrZW46dGhpcy5fYWJvcnQoZC5QZWVyRXJyb3JUeXBlLlVuYXZhaWxhYmxlSUQsJ0lEIFwiJyt0aGlzLmlkKydcIiBpcyB0YWtlbicpO2JyZWFrO2Nhc2UgZC5TZXJ2ZXJNZXNzYWdlVHlwZS5JbnZhbGlkS2V5OnRoaXMuX2Fib3J0KGQuUGVlckVycm9yVHlwZS5JbnZhbGlkS2V5LCdBUEkgS0VZIFwiJyt0aGlzLl9vcHRpb25zLmtleSsnXCIgaXMgaW52YWxpZCcpO2JyZWFrO2Nhc2UgZC5TZXJ2ZXJNZXNzYWdlVHlwZS5MZWF2ZTphLmRlZmF1bHQubG9nKFwiUmVjZWl2ZWQgbGVhdmUgbWVzc2FnZSBmcm9tIFwiK3MpLHRoaXMuX2NsZWFudXBQZWVyKHMpLHRoaXMuX2Nvbm5lY3Rpb25zLmRlbGV0ZShzKTticmVhaztjYXNlIGQuU2VydmVyTWVzc2FnZVR5cGUuRXhwaXJlOnRoaXMuZW1pdEVycm9yKGQuUGVlckVycm9yVHlwZS5QZWVyVW5hdmFpbGFibGUsXCJDb3VsZCBub3QgY29ubmVjdCB0byBwZWVyIFwiK3MpO2JyZWFrO2Nhc2UgZC5TZXJ2ZXJNZXNzYWdlVHlwZS5PZmZlcjp2YXIgYz1pLmNvbm5lY3Rpb25JZDtpZigoXz10aGlzLmdldENvbm5lY3Rpb24ocyxjKSkmJihfLmNsb3NlKCksYS5kZWZhdWx0Lndhcm4oXCJPZmZlciByZWNlaXZlZCBmb3IgZXhpc3RpbmcgQ29ubmVjdGlvbiBJRDpcIitjKSksaS50eXBlPT09ZC5Db25uZWN0aW9uVHlwZS5NZWRpYSlfPW5ldyBsLk1lZGlhQ29ubmVjdGlvbihzLHRoaXMse2Nvbm5lY3Rpb25JZDpjLF9wYXlsb2FkOmksbWV0YWRhdGE6aS5tZXRhZGF0YX0pLHRoaXMuX2FkZENvbm5lY3Rpb24ocyxfKSx0aGlzLmVtaXQoZC5QZWVyRXZlbnRUeXBlLkNhbGwsXyk7ZWxzZXtpZihpLnR5cGUhPT1kLkNvbm5lY3Rpb25UeXBlLkRhdGEpcmV0dXJuIHZvaWQgYS5kZWZhdWx0Lndhcm4oXCJSZWNlaXZlZCBtYWxmb3JtZWQgY29ubmVjdGlvbiB0eXBlOlwiK2kudHlwZSk7Xz1uZXcgdS5EYXRhQ29ubmVjdGlvbihzLHRoaXMse2Nvbm5lY3Rpb25JZDpjLF9wYXlsb2FkOmksbWV0YWRhdGE6aS5tZXRhZGF0YSxsYWJlbDppLmxhYmVsLHNlcmlhbGl6YXRpb246aS5zZXJpYWxpemF0aW9uLHJlbGlhYmxlOmkucmVsaWFibGV9KSx0aGlzLl9hZGRDb25uZWN0aW9uKHMsXyksdGhpcy5lbWl0KGQuUGVlckV2ZW50VHlwZS5Db25uZWN0aW9uLF8pfXZhciBwPXRoaXMuX2dldE1lc3NhZ2VzKGMpO3RyeXtmb3IodmFyIGg9bihwKSxmPWgubmV4dCgpOyFmLmRvbmU7Zj1oLm5leHQoKSl7dmFyIHk9Zi52YWx1ZTtfLmhhbmRsZU1lc3NhZ2UoeSl9fWNhdGNoKHYpe3Q9e2Vycm9yOnZ9fWZpbmFsbHl7dHJ5e2YmJiFmLmRvbmUmJihyPWgucmV0dXJuKSYmci5jYWxsKGgpfWZpbmFsbHl7aWYodCl0aHJvdyB0LmVycm9yfX1icmVhaztkZWZhdWx0OmlmKCFpKXJldHVybiB2b2lkIGEuZGVmYXVsdC53YXJuKFwiWW91IHJlY2VpdmVkIGEgbWFsZm9ybWVkIG1lc3NhZ2UgZnJvbSBcIitzK1wiIG9mIHR5cGUgXCIrbyk7dmFyIF87Yz1pLmNvbm5lY3Rpb25JZDsoXz10aGlzLmdldENvbm5lY3Rpb24ocyxjKSkmJl8ucGVlckNvbm5lY3Rpb24/Xy5oYW5kbGVNZXNzYWdlKGUpOmM/dGhpcy5fc3RvcmVNZXNzYWdlKGMsZSk6YS5kZWZhdWx0Lndhcm4oXCJZb3UgcmVjZWl2ZWQgYW4gdW5yZWNvZ25pemVkIG1lc3NhZ2U6XCIsZSl9fSxpLnByb3RvdHlwZS5fc3RvcmVNZXNzYWdlPWZ1bmN0aW9uKGUsdCl7dGhpcy5fbG9zdE1lc3NhZ2VzLmhhcyhlKXx8dGhpcy5fbG9zdE1lc3NhZ2VzLnNldChlLFtdKSx0aGlzLl9sb3N0TWVzc2FnZXMuZ2V0KGUpLnB1c2godCl9LGkucHJvdG90eXBlLl9nZXRNZXNzYWdlcz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9sb3N0TWVzc2FnZXMuZ2V0KGUpO3JldHVybiB0Pyh0aGlzLl9sb3N0TWVzc2FnZXMuZGVsZXRlKGUpLHQpOltdfSxpLnByb3RvdHlwZS5jb25uZWN0PWZ1bmN0aW9uKGUsdCl7aWYodm9pZCAwPT09dCYmKHQ9e30pLHRoaXMuZGlzY29ubmVjdGVkKXJldHVybiBhLmRlZmF1bHQud2FybihcIllvdSBjYW5ub3QgY29ubmVjdCB0byBhIG5ldyBQZWVyIGJlY2F1c2UgeW91IGNhbGxlZCAuZGlzY29ubmVjdCgpIG9uIHRoaXMgUGVlciBhbmQgZW5kZWQgeW91ciBjb25uZWN0aW9uIHdpdGggdGhlIHNlcnZlci4gWW91IGNhbiBjcmVhdGUgYSBuZXcgUGVlciB0byByZWNvbm5lY3QsIG9yIGNhbGwgcmVjb25uZWN0IG9uIHRoaXMgcGVlciBpZiB5b3UgYmVsaWV2ZSBpdHMgSUQgdG8gc3RpbGwgYmUgYXZhaWxhYmxlLlwiKSx2b2lkIHRoaXMuZW1pdEVycm9yKGQuUGVlckVycm9yVHlwZS5EaXNjb25uZWN0ZWQsXCJDYW5ub3QgY29ubmVjdCB0byBuZXcgUGVlciBhZnRlciBkaXNjb25uZWN0aW5nIGZyb20gc2VydmVyLlwiKTt2YXIgbj1uZXcgdS5EYXRhQ29ubmVjdGlvbihlLHRoaXMsdCk7cmV0dXJuIHRoaXMuX2FkZENvbm5lY3Rpb24oZSxuKSxufSxpLnByb3RvdHlwZS5jYWxsPWZ1bmN0aW9uKGUsdCxuKXtpZih2b2lkIDA9PT1uJiYobj17fSksdGhpcy5kaXNjb25uZWN0ZWQpcmV0dXJuIGEuZGVmYXVsdC53YXJuKFwiWW91IGNhbm5vdCBjb25uZWN0IHRvIGEgbmV3IFBlZXIgYmVjYXVzZSB5b3UgY2FsbGVkIC5kaXNjb25uZWN0KCkgb24gdGhpcyBQZWVyIGFuZCBlbmRlZCB5b3VyIGNvbm5lY3Rpb24gd2l0aCB0aGUgc2VydmVyLiBZb3UgY2FuIGNyZWF0ZSBhIG5ldyBQZWVyIHRvIHJlY29ubmVjdC5cIiksdm9pZCB0aGlzLmVtaXRFcnJvcihkLlBlZXJFcnJvclR5cGUuRGlzY29ubmVjdGVkLFwiQ2Fubm90IGNvbm5lY3QgdG8gbmV3IFBlZXIgYWZ0ZXIgZGlzY29ubmVjdGluZyBmcm9tIHNlcnZlci5cIik7aWYodCl7bi5fc3RyZWFtPXQ7dmFyIHI9bmV3IGwuTWVkaWFDb25uZWN0aW9uKGUsdGhpcyxuKTtyZXR1cm4gdGhpcy5fYWRkQ29ubmVjdGlvbihlLHIpLHJ9YS5kZWZhdWx0LmVycm9yKFwiVG8gY2FsbCBhIHBlZXIsIHlvdSBtdXN0IHByb3ZpZGUgYSBzdHJlYW0gZnJvbSB5b3VyIGJyb3dzZXIncyBgZ2V0VXNlck1lZGlhYC5cIil9LGkucHJvdG90eXBlLl9hZGRDb25uZWN0aW9uPWZ1bmN0aW9uKGUsdCl7YS5kZWZhdWx0LmxvZyhcImFkZCBjb25uZWN0aW9uIFwiK3QudHlwZStcIjpcIit0LmNvbm5lY3Rpb25JZCtcIiB0byBwZWVySWQ6XCIrZSksdGhpcy5fY29ubmVjdGlvbnMuaGFzKGUpfHx0aGlzLl9jb25uZWN0aW9ucy5zZXQoZSxbXSksdGhpcy5fY29ubmVjdGlvbnMuZ2V0KGUpLnB1c2godCl9LGkucHJvdG90eXBlLl9yZW1vdmVDb25uZWN0aW9uPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2Nvbm5lY3Rpb25zLmdldChlLnBlZXIpO2lmKHQpe3ZhciBuPXQuaW5kZXhPZihlKTstMSE9PW4mJnQuc3BsaWNlKG4sMSl9dGhpcy5fbG9zdE1lc3NhZ2VzLmRlbGV0ZShlLmNvbm5lY3Rpb25JZCl9LGkucHJvdG90eXBlLmdldENvbm5lY3Rpb249ZnVuY3Rpb24oZSx0KXt2YXIgcixvLGk9dGhpcy5fY29ubmVjdGlvbnMuZ2V0KGUpO2lmKCFpKXJldHVybiBudWxsO3RyeXtmb3IodmFyIHM9bihpKSxhPXMubmV4dCgpOyFhLmRvbmU7YT1zLm5leHQoKSl7dmFyIGM9YS52YWx1ZTtpZihjLmNvbm5lY3Rpb25JZD09PXQpcmV0dXJuIGN9fWNhdGNoKGwpe3I9e2Vycm9yOmx9fWZpbmFsbHl7dHJ5e2EmJiFhLmRvbmUmJihvPXMucmV0dXJuKSYmby5jYWxsKHMpfWZpbmFsbHl7aWYocil0aHJvdyByLmVycm9yfX1yZXR1cm4gbnVsbH0saS5wcm90b3R5cGUuX2RlbGF5ZWRBYm9ydD1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXM7c2V0VGltZW91dChmdW5jdGlvbigpe24uX2Fib3J0KGUsdCl9LDApfSxpLnByb3RvdHlwZS5fYWJvcnQ9ZnVuY3Rpb24oZSx0KXthLmRlZmF1bHQuZXJyb3IoXCJBYm9ydGluZyFcIiksdGhpcy5lbWl0RXJyb3IoZSx0KSx0aGlzLl9sYXN0U2VydmVySWQ/dGhpcy5kaXNjb25uZWN0KCk6dGhpcy5kZXN0cm95KCl9LGkucHJvdG90eXBlLmVtaXRFcnJvcj1mdW5jdGlvbihlLHQpe3ZhciBuO2EuZGVmYXVsdC5lcnJvcihcIkVycm9yOlwiLHQpLChuPVwic3RyaW5nXCI9PXR5cGVvZiB0P25ldyBFcnJvcih0KTp0KS50eXBlPWUsdGhpcy5lbWl0KGQuUGVlckV2ZW50VHlwZS5FcnJvcixuKX0saS5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMuZGVzdHJveWVkfHwoYS5kZWZhdWx0LmxvZyhcIkRlc3Ryb3kgcGVlciB3aXRoIElEOlwiK3RoaXMuaWQpLHRoaXMuZGlzY29ubmVjdCgpLHRoaXMuX2NsZWFudXAoKSx0aGlzLl9kZXN0cm95ZWQ9ITAsdGhpcy5lbWl0KGQuUGVlckV2ZW50VHlwZS5DbG9zZSkpfSxpLnByb3RvdHlwZS5fY2xlYW51cD1mdW5jdGlvbigpe3ZhciBlLHQ7dHJ5e2Zvcih2YXIgcj1uKHRoaXMuX2Nvbm5lY3Rpb25zLmtleXMoKSksbz1yLm5leHQoKTshby5kb25lO289ci5uZXh0KCkpe3ZhciBpPW8udmFsdWU7dGhpcy5fY2xlYW51cFBlZXIoaSksdGhpcy5fY29ubmVjdGlvbnMuZGVsZXRlKGkpfX1jYXRjaChzKXtlPXtlcnJvcjpzfX1maW5hbGx5e3RyeXtvJiYhby5kb25lJiYodD1yLnJldHVybikmJnQuY2FsbChyKX1maW5hbGx5e2lmKGUpdGhyb3cgZS5lcnJvcn19dGhpcy5zb2NrZXQucmVtb3ZlQWxsTGlzdGVuZXJzKCl9LGkucHJvdG90eXBlLl9jbGVhbnVwUGVlcj1mdW5jdGlvbihlKXt2YXIgdCxyLG89dGhpcy5fY29ubmVjdGlvbnMuZ2V0KGUpO2lmKG8pdHJ5e2Zvcih2YXIgaT1uKG8pLHM9aS5uZXh0KCk7IXMuZG9uZTtzPWkubmV4dCgpKXtzLnZhbHVlLmNsb3NlKCl9fWNhdGNoKGEpe3Q9e2Vycm9yOmF9fWZpbmFsbHl7dHJ5e3MmJiFzLmRvbmUmJihyPWkucmV0dXJuKSYmci5jYWxsKGkpfWZpbmFsbHl7aWYodCl0aHJvdyB0LmVycm9yfX19LGkucHJvdG90eXBlLmRpc2Nvbm5lY3Q9ZnVuY3Rpb24oKXtpZighdGhpcy5kaXNjb25uZWN0ZWQpe3ZhciBlPXRoaXMuaWQ7YS5kZWZhdWx0LmxvZyhcIkRpc2Nvbm5lY3QgcGVlciB3aXRoIElEOlwiK2UpLHRoaXMuX2Rpc2Nvbm5lY3RlZD0hMCx0aGlzLl9vcGVuPSExLHRoaXMuc29ja2V0LmNsb3NlKCksdGhpcy5fbGFzdFNlcnZlcklkPWUsdGhpcy5faWQ9bnVsbCx0aGlzLmVtaXQoZC5QZWVyRXZlbnRUeXBlLkRpc2Nvbm5lY3RlZCxlKX19LGkucHJvdG90eXBlLnJlY29ubmVjdD1mdW5jdGlvbigpe2lmKHRoaXMuZGlzY29ubmVjdGVkJiYhdGhpcy5kZXN0cm95ZWQpYS5kZWZhdWx0LmxvZyhcIkF0dGVtcHRpbmcgcmVjb25uZWN0aW9uIHRvIHNlcnZlciB3aXRoIElEIFwiK3RoaXMuX2xhc3RTZXJ2ZXJJZCksdGhpcy5fZGlzY29ubmVjdGVkPSExLHRoaXMuX2luaXRpYWxpemUodGhpcy5fbGFzdFNlcnZlcklkKTtlbHNle2lmKHRoaXMuZGVzdHJveWVkKXRocm93IG5ldyBFcnJvcihcIlRoaXMgcGVlciBjYW5ub3QgcmVjb25uZWN0IHRvIHRoZSBzZXJ2ZXIuIEl0IGhhcyBhbHJlYWR5IGJlZW4gZGVzdHJveWVkLlwiKTtpZih0aGlzLmRpc2Nvbm5lY3RlZHx8dGhpcy5vcGVuKXRocm93IG5ldyBFcnJvcihcIlBlZXIgXCIrdGhpcy5pZCtcIiBjYW5ub3QgcmVjb25uZWN0IGJlY2F1c2UgaXQgaXMgbm90IGRpc2Nvbm5lY3RlZCBmcm9tIHRoZSBzZXJ2ZXIhXCIpO2EuZGVmYXVsdC5lcnJvcihcIkluIGEgaHVycnk/IFdlJ3JlIHN0aWxsIHRyeWluZyB0byBtYWtlIHRoZSBpbml0aWFsIGNvbm5lY3Rpb24hXCIpfX0saS5wcm90b3R5cGUubGlzdEFsbFBlZXJzPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dm9pZCAwPT09ZSYmKGU9ZnVuY3Rpb24oZSl7fSksdGhpcy5fYXBpLmxpc3RBbGxQZWVycygpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIGUodCl9KS5jYXRjaChmdW5jdGlvbihlKXtyZXR1cm4gdC5fYWJvcnQoZC5QZWVyRXJyb3JUeXBlLlNlcnZlckVycm9yLGUpfSl9LGkuREVGQVVMVF9LRVk9XCJwZWVyanNcIixpfShpLkV2ZW50RW1pdHRlcik7ZXhwb3J0cy5QZWVyPWY7XG59LHtcImV2ZW50ZW1pdHRlcjNcIjpcIkpKbFNcIixcIi4vdXRpbFwiOlwiQkhYZlwiLFwiLi9sb2dnZXJcIjpcIldPczlcIixcIi4vc29ja2V0XCI6XCJ3Smx2XCIsXCIuL21lZGlhY29ubmVjdGlvblwiOlwiZGJIUFwiLFwiLi9kYXRhY29ubmVjdGlvblwiOlwiR0JUUVwiLFwiLi9lbnVtc1wiOlwiWlJZZlwiLFwiLi9hcGlcIjpcImluN0xcIn1dLFwiaVRLNlwiOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKSB7XG5cInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLnBlZXJqcz12b2lkIDA7dmFyIGU9cmVxdWlyZShcIi4vdXRpbFwiKSxyPXJlcXVpcmUoXCIuL3BlZXJcIik7ZXhwb3J0cy5wZWVyanM9e1BlZXI6ci5QZWVyLHV0aWw6ZS51dGlsfSxleHBvcnRzLmRlZmF1bHQ9ci5QZWVyLHdpbmRvdy5wZWVyanM9ZXhwb3J0cy5wZWVyanMsd2luZG93LlBlZXI9ci5QZWVyO1xufSx7XCIuL3V0aWxcIjpcIkJIWGZcIixcIi4vcGVlclwiOlwiSHhwZFwifV19LHt9LFtcImlUSzZcIl0sIG51bGwpXG4vLyMgc291cmNlTWFwcGluZ1VSTD0vcGVlcmpzLm1pbi5qcy5tYXAiLCJmdW5jdGlvbiB3ZWJwYWNrRW1wdHlDb250ZXh0KHJlcSkge1xuXHR2YXIgZSA9IG5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIgKyByZXEgKyBcIidcIik7XG5cdGUuY29kZSA9ICdNT0RVTEVfTk9UX0ZPVU5EJztcblx0dGhyb3cgZTtcbn1cbndlYnBhY2tFbXB0eUNvbnRleHQua2V5cyA9ICgpID0+IChbXSk7XG53ZWJwYWNrRW1wdHlDb250ZXh0LnJlc29sdmUgPSB3ZWJwYWNrRW1wdHlDb250ZXh0O1xud2VicGFja0VtcHR5Q29udGV4dC5pZCA9IFwiLi9ub2RlX21vZHVsZXMvcGVlcmpzL2Rpc3Qgc3luYyByZWN1cnNpdmVcIjtcbm1vZHVsZS5leHBvcnRzID0gd2VicGFja0VtcHR5Q29udGV4dDsiLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuaW8gPSBleHBvcnRzLlNvY2tldCA9IGV4cG9ydHMuTWFuYWdlciA9IGV4cG9ydHMucHJvdG9jb2wgPSB2b2lkIDA7XG5jb25zdCB1cmxfMSA9IHJlcXVpcmUoXCIuL3VybFwiKTtcbmNvbnN0IG1hbmFnZXJfMSA9IHJlcXVpcmUoXCIuL21hbmFnZXJcIik7XG5jb25zdCBkZWJ1ZyA9IHJlcXVpcmUoXCJkZWJ1Z1wiKShcInNvY2tldC5pby1jbGllbnRcIik7XG4vKipcbiAqIE1vZHVsZSBleHBvcnRzLlxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHMgPSBsb29rdXA7XG4vKipcbiAqIE1hbmFnZXJzIGNhY2hlLlxuICovXG5jb25zdCBjYWNoZSA9IChleHBvcnRzLm1hbmFnZXJzID0ge30pO1xuZnVuY3Rpb24gbG9va3VwKHVyaSwgb3B0cykge1xuICAgIGlmICh0eXBlb2YgdXJpID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIG9wdHMgPSB1cmk7XG4gICAgICAgIHVyaSA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgb3B0cyA9IG9wdHMgfHwge307XG4gICAgY29uc3QgcGFyc2VkID0gdXJsXzEudXJsKHVyaSwgb3B0cy5wYXRoIHx8IFwiL3NvY2tldC5pb1wiKTtcbiAgICBjb25zdCBzb3VyY2UgPSBwYXJzZWQuc291cmNlO1xuICAgIGNvbnN0IGlkID0gcGFyc2VkLmlkO1xuICAgIGNvbnN0IHBhdGggPSBwYXJzZWQucGF0aDtcbiAgICBjb25zdCBzYW1lTmFtZXNwYWNlID0gY2FjaGVbaWRdICYmIHBhdGggaW4gY2FjaGVbaWRdW1wibnNwc1wiXTtcbiAgICBjb25zdCBuZXdDb25uZWN0aW9uID0gb3B0cy5mb3JjZU5ldyB8fFxuICAgICAgICBvcHRzW1wiZm9yY2UgbmV3IGNvbm5lY3Rpb25cIl0gfHxcbiAgICAgICAgZmFsc2UgPT09IG9wdHMubXVsdGlwbGV4IHx8XG4gICAgICAgIHNhbWVOYW1lc3BhY2U7XG4gICAgbGV0IGlvO1xuICAgIGlmIChuZXdDb25uZWN0aW9uKSB7XG4gICAgICAgIGRlYnVnKFwiaWdub3Jpbmcgc29ja2V0IGNhY2hlIGZvciAlc1wiLCBzb3VyY2UpO1xuICAgICAgICBpbyA9IG5ldyBtYW5hZ2VyXzEuTWFuYWdlcihzb3VyY2UsIG9wdHMpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgaWYgKCFjYWNoZVtpZF0pIHtcbiAgICAgICAgICAgIGRlYnVnKFwibmV3IGlvIGluc3RhbmNlIGZvciAlc1wiLCBzb3VyY2UpO1xuICAgICAgICAgICAgY2FjaGVbaWRdID0gbmV3IG1hbmFnZXJfMS5NYW5hZ2VyKHNvdXJjZSwgb3B0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaW8gPSBjYWNoZVtpZF07XG4gICAgfVxuICAgIGlmIChwYXJzZWQucXVlcnkgJiYgIW9wdHMucXVlcnkpIHtcbiAgICAgICAgb3B0cy5xdWVyeSA9IHBhcnNlZC5xdWVyeUtleTtcbiAgICB9XG4gICAgcmV0dXJuIGlvLnNvY2tldChwYXJzZWQucGF0aCwgb3B0cyk7XG59XG5leHBvcnRzLmlvID0gbG9va3VwO1xuLyoqXG4gKiBQcm90b2NvbCB2ZXJzaW9uLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xudmFyIHNvY2tldF9pb19wYXJzZXJfMSA9IHJlcXVpcmUoXCJzb2NrZXQuaW8tcGFyc2VyXCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwicHJvdG9jb2xcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNvY2tldF9pb19wYXJzZXJfMS5wcm90b2NvbDsgfSB9KTtcbi8qKlxuICogYGNvbm5lY3RgLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB1cmlcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0cy5jb25uZWN0ID0gbG9va3VwO1xuLyoqXG4gKiBFeHBvc2UgY29uc3RydWN0b3JzIGZvciBzdGFuZGFsb25lIGJ1aWxkLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xudmFyIG1hbmFnZXJfMiA9IHJlcXVpcmUoXCIuL21hbmFnZXJcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJNYW5hZ2VyXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBtYW5hZ2VyXzIuTWFuYWdlcjsgfSB9KTtcbnZhciBzb2NrZXRfMSA9IHJlcXVpcmUoXCIuL3NvY2tldFwiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIlNvY2tldFwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gc29ja2V0XzEuU29ja2V0OyB9IH0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gbG9va3VwO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLk1hbmFnZXIgPSB2b2lkIDA7XG5jb25zdCBlaW8gPSByZXF1aXJlKFwiZW5naW5lLmlvLWNsaWVudFwiKTtcbmNvbnN0IHNvY2tldF8xID0gcmVxdWlyZShcIi4vc29ja2V0XCIpO1xuY29uc3QgcGFyc2VyID0gcmVxdWlyZShcInNvY2tldC5pby1wYXJzZXJcIik7XG5jb25zdCBvbl8xID0gcmVxdWlyZShcIi4vb25cIik7XG5jb25zdCBCYWNrb2ZmID0gcmVxdWlyZShcImJhY2tvMlwiKTtcbmNvbnN0IHR5cGVkX2V2ZW50c18xID0gcmVxdWlyZShcIi4vdHlwZWQtZXZlbnRzXCIpO1xuY29uc3QgZGVidWcgPSByZXF1aXJlKFwiZGVidWdcIikoXCJzb2NrZXQuaW8tY2xpZW50Om1hbmFnZXJcIik7XG5jbGFzcyBNYW5hZ2VyIGV4dGVuZHMgdHlwZWRfZXZlbnRzXzEuU3RyaWN0RXZlbnRFbWl0dGVyIHtcbiAgICBjb25zdHJ1Y3Rvcih1cmksIG9wdHMpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5uc3BzID0ge307XG4gICAgICAgIHRoaXMuc3VicyA9IFtdO1xuICAgICAgICBpZiAodXJpICYmIFwib2JqZWN0XCIgPT09IHR5cGVvZiB1cmkpIHtcbiAgICAgICAgICAgIG9wdHMgPSB1cmk7XG4gICAgICAgICAgICB1cmkgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgb3B0cyA9IG9wdHMgfHwge307XG4gICAgICAgIG9wdHMucGF0aCA9IG9wdHMucGF0aCB8fCBcIi9zb2NrZXQuaW9cIjtcbiAgICAgICAgdGhpcy5vcHRzID0gb3B0cztcbiAgICAgICAgdGhpcy5yZWNvbm5lY3Rpb24ob3B0cy5yZWNvbm5lY3Rpb24gIT09IGZhbHNlKTtcbiAgICAgICAgdGhpcy5yZWNvbm5lY3Rpb25BdHRlbXB0cyhvcHRzLnJlY29ubmVjdGlvbkF0dGVtcHRzIHx8IEluZmluaXR5KTtcbiAgICAgICAgdGhpcy5yZWNvbm5lY3Rpb25EZWxheShvcHRzLnJlY29ubmVjdGlvbkRlbGF5IHx8IDEwMDApO1xuICAgICAgICB0aGlzLnJlY29ubmVjdGlvbkRlbGF5TWF4KG9wdHMucmVjb25uZWN0aW9uRGVsYXlNYXggfHwgNTAwMCk7XG4gICAgICAgIHRoaXMucmFuZG9taXphdGlvbkZhY3RvcihvcHRzLnJhbmRvbWl6YXRpb25GYWN0b3IgfHwgMC41KTtcbiAgICAgICAgdGhpcy5iYWNrb2ZmID0gbmV3IEJhY2tvZmYoe1xuICAgICAgICAgICAgbWluOiB0aGlzLnJlY29ubmVjdGlvbkRlbGF5KCksXG4gICAgICAgICAgICBtYXg6IHRoaXMucmVjb25uZWN0aW9uRGVsYXlNYXgoKSxcbiAgICAgICAgICAgIGppdHRlcjogdGhpcy5yYW5kb21pemF0aW9uRmFjdG9yKCksXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnRpbWVvdXQobnVsbCA9PSBvcHRzLnRpbWVvdXQgPyAyMDAwMCA6IG9wdHMudGltZW91dCk7XG4gICAgICAgIHRoaXMuX3JlYWR5U3RhdGUgPSBcImNsb3NlZFwiO1xuICAgICAgICB0aGlzLnVyaSA9IHVyaTtcbiAgICAgICAgY29uc3QgX3BhcnNlciA9IG9wdHMucGFyc2VyIHx8IHBhcnNlcjtcbiAgICAgICAgdGhpcy5lbmNvZGVyID0gbmV3IF9wYXJzZXIuRW5jb2RlcigpO1xuICAgICAgICB0aGlzLmRlY29kZXIgPSBuZXcgX3BhcnNlci5EZWNvZGVyKCk7XG4gICAgICAgIHRoaXMuX2F1dG9Db25uZWN0ID0gb3B0cy5hdXRvQ29ubmVjdCAhPT0gZmFsc2U7XG4gICAgICAgIGlmICh0aGlzLl9hdXRvQ29ubmVjdClcbiAgICAgICAgICAgIHRoaXMub3BlbigpO1xuICAgIH1cbiAgICByZWNvbm5lY3Rpb24odikge1xuICAgICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVjb25uZWN0aW9uO1xuICAgICAgICB0aGlzLl9yZWNvbm5lY3Rpb24gPSAhIXY7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICByZWNvbm5lY3Rpb25BdHRlbXB0cyh2KSB7XG4gICAgICAgIGlmICh2ID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVjb25uZWN0aW9uQXR0ZW1wdHM7XG4gICAgICAgIHRoaXMuX3JlY29ubmVjdGlvbkF0dGVtcHRzID0gdjtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHJlY29ubmVjdGlvbkRlbGF5KHYpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBpZiAodiA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3JlY29ubmVjdGlvbkRlbGF5O1xuICAgICAgICB0aGlzLl9yZWNvbm5lY3Rpb25EZWxheSA9IHY7XG4gICAgICAgIChfYSA9IHRoaXMuYmFja29mZikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnNldE1pbih2KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHJhbmRvbWl6YXRpb25GYWN0b3Iodikge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGlmICh2ID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcmFuZG9taXphdGlvbkZhY3RvcjtcbiAgICAgICAgdGhpcy5fcmFuZG9taXphdGlvbkZhY3RvciA9IHY7XG4gICAgICAgIChfYSA9IHRoaXMuYmFja29mZikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnNldEppdHRlcih2KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHJlY29ubmVjdGlvbkRlbGF5TWF4KHYpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBpZiAodiA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3JlY29ubmVjdGlvbkRlbGF5TWF4O1xuICAgICAgICB0aGlzLl9yZWNvbm5lY3Rpb25EZWxheU1heCA9IHY7XG4gICAgICAgIChfYSA9IHRoaXMuYmFja29mZikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnNldE1heCh2KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHRpbWVvdXQodikge1xuICAgICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdGltZW91dDtcbiAgICAgICAgdGhpcy5fdGltZW91dCA9IHY7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdGFydHMgdHJ5aW5nIHRvIHJlY29ubmVjdCBpZiByZWNvbm5lY3Rpb24gaXMgZW5hYmxlZCBhbmQgd2UgaGF2ZSBub3RcbiAgICAgKiBzdGFydGVkIHJlY29ubmVjdGluZyB5ZXRcbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgbWF5YmVSZWNvbm5lY3RPbk9wZW4oKSB7XG4gICAgICAgIC8vIE9ubHkgdHJ5IHRvIHJlY29ubmVjdCBpZiBpdCdzIHRoZSBmaXJzdCB0aW1lIHdlJ3JlIGNvbm5lY3RpbmdcbiAgICAgICAgaWYgKCF0aGlzLl9yZWNvbm5lY3RpbmcgJiZcbiAgICAgICAgICAgIHRoaXMuX3JlY29ubmVjdGlvbiAmJlxuICAgICAgICAgICAgdGhpcy5iYWNrb2ZmLmF0dGVtcHRzID09PSAwKSB7XG4gICAgICAgICAgICAvLyBrZWVwcyByZWNvbm5lY3Rpb24gZnJvbSBmaXJpbmcgdHdpY2UgZm9yIHRoZSBzYW1lIHJlY29ubmVjdGlvbiBsb29wXG4gICAgICAgICAgICB0aGlzLnJlY29ubmVjdCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGN1cnJlbnQgdHJhbnNwb3J0IGBzb2NrZXRgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gLSBvcHRpb25hbCwgY2FsbGJhY2tcbiAgICAgKiBAcmV0dXJuIHNlbGZcbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgb3Blbihmbikge1xuICAgICAgICBkZWJ1ZyhcInJlYWR5U3RhdGUgJXNcIiwgdGhpcy5fcmVhZHlTdGF0ZSk7XG4gICAgICAgIGlmICh+dGhpcy5fcmVhZHlTdGF0ZS5pbmRleE9mKFwib3BlblwiKSlcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICBkZWJ1ZyhcIm9wZW5pbmcgJXNcIiwgdGhpcy51cmkpO1xuICAgICAgICB0aGlzLmVuZ2luZSA9IGVpbyh0aGlzLnVyaSwgdGhpcy5vcHRzKTtcbiAgICAgICAgY29uc3Qgc29ja2V0ID0gdGhpcy5lbmdpbmU7XG4gICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgICAgICB0aGlzLl9yZWFkeVN0YXRlID0gXCJvcGVuaW5nXCI7XG4gICAgICAgIHRoaXMuc2tpcFJlY29ubmVjdCA9IGZhbHNlO1xuICAgICAgICAvLyBlbWl0IGBvcGVuYFxuICAgICAgICBjb25zdCBvcGVuU3ViRGVzdHJveSA9IG9uXzEub24oc29ja2V0LCBcIm9wZW5cIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc2VsZi5vbm9wZW4oKTtcbiAgICAgICAgICAgIGZuICYmIGZuKCk7XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBlbWl0IGBlcnJvcmBcbiAgICAgICAgY29uc3QgZXJyb3JTdWIgPSBvbl8xLm9uKHNvY2tldCwgXCJlcnJvclwiLCAoZXJyKSA9PiB7XG4gICAgICAgICAgICBkZWJ1ZyhcImVycm9yXCIpO1xuICAgICAgICAgICAgc2VsZi5jbGVhbnVwKCk7XG4gICAgICAgICAgICBzZWxmLl9yZWFkeVN0YXRlID0gXCJjbG9zZWRcIjtcbiAgICAgICAgICAgIHRoaXMuZW1pdFJlc2VydmVkKFwiZXJyb3JcIiwgZXJyKTtcbiAgICAgICAgICAgIGlmIChmbikge1xuICAgICAgICAgICAgICAgIGZuKGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBPbmx5IGRvIHRoaXMgaWYgdGhlcmUgaXMgbm8gZm4gdG8gaGFuZGxlIHRoZSBlcnJvclxuICAgICAgICAgICAgICAgIHNlbGYubWF5YmVSZWNvbm5lY3RPbk9wZW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChmYWxzZSAhPT0gdGhpcy5fdGltZW91dCkge1xuICAgICAgICAgICAgY29uc3QgdGltZW91dCA9IHRoaXMuX3RpbWVvdXQ7XG4gICAgICAgICAgICBkZWJ1ZyhcImNvbm5lY3QgYXR0ZW1wdCB3aWxsIHRpbWVvdXQgYWZ0ZXIgJWRcIiwgdGltZW91dCk7XG4gICAgICAgICAgICBpZiAodGltZW91dCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIG9wZW5TdWJEZXN0cm95KCk7IC8vIHByZXZlbnRzIGEgcmFjZSBjb25kaXRpb24gd2l0aCB0aGUgJ29wZW4nIGV2ZW50XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBzZXQgdGltZXJcbiAgICAgICAgICAgIGNvbnN0IHRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgZGVidWcoXCJjb25uZWN0IGF0dGVtcHQgdGltZWQgb3V0IGFmdGVyICVkXCIsIHRpbWVvdXQpO1xuICAgICAgICAgICAgICAgIG9wZW5TdWJEZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgc29ja2V0LmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgc29ja2V0LmVtaXQoXCJlcnJvclwiLCBuZXcgRXJyb3IoXCJ0aW1lb3V0XCIpKTtcbiAgICAgICAgICAgIH0sIHRpbWVvdXQpO1xuICAgICAgICAgICAgaWYgKHRoaXMub3B0cy5hdXRvVW5yZWYpIHtcbiAgICAgICAgICAgICAgICB0aW1lci51bnJlZigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zdWJzLnB1c2goZnVuY3Rpb24gc3ViRGVzdHJveSgpIHtcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZXIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdWJzLnB1c2gob3BlblN1YkRlc3Ryb3kpO1xuICAgICAgICB0aGlzLnN1YnMucHVzaChlcnJvclN1Yik7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBbGlhcyBmb3Igb3BlbigpXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHNlbGZcbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgY29ubmVjdChmbikge1xuICAgICAgICByZXR1cm4gdGhpcy5vcGVuKGZuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbGVkIHVwb24gdHJhbnNwb3J0IG9wZW4uXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIG9ub3BlbigpIHtcbiAgICAgICAgZGVidWcoXCJvcGVuXCIpO1xuICAgICAgICAvLyBjbGVhciBvbGQgc3Vic1xuICAgICAgICB0aGlzLmNsZWFudXAoKTtcbiAgICAgICAgLy8gbWFyayBhcyBvcGVuXG4gICAgICAgIHRoaXMuX3JlYWR5U3RhdGUgPSBcIm9wZW5cIjtcbiAgICAgICAgdGhpcy5lbWl0UmVzZXJ2ZWQoXCJvcGVuXCIpO1xuICAgICAgICAvLyBhZGQgbmV3IHN1YnNcbiAgICAgICAgY29uc3Qgc29ja2V0ID0gdGhpcy5lbmdpbmU7XG4gICAgICAgIHRoaXMuc3Vicy5wdXNoKG9uXzEub24oc29ja2V0LCBcInBpbmdcIiwgdGhpcy5vbnBpbmcuYmluZCh0aGlzKSksIG9uXzEub24oc29ja2V0LCBcImRhdGFcIiwgdGhpcy5vbmRhdGEuYmluZCh0aGlzKSksIG9uXzEub24oc29ja2V0LCBcImVycm9yXCIsIHRoaXMub25lcnJvci5iaW5kKHRoaXMpKSwgb25fMS5vbihzb2NrZXQsIFwiY2xvc2VcIiwgdGhpcy5vbmNsb3NlLmJpbmQodGhpcykpLCBvbl8xLm9uKHRoaXMuZGVjb2RlciwgXCJkZWNvZGVkXCIsIHRoaXMub25kZWNvZGVkLmJpbmQodGhpcykpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbGVkIHVwb24gYSBwaW5nLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBvbnBpbmcoKSB7XG4gICAgICAgIHRoaXMuZW1pdFJlc2VydmVkKFwicGluZ1wiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbGVkIHdpdGggZGF0YS5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgb25kYXRhKGRhdGEpIHtcbiAgICAgICAgdGhpcy5kZWNvZGVyLmFkZChkYXRhKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbGVkIHdoZW4gcGFyc2VyIGZ1bGx5IGRlY29kZXMgYSBwYWNrZXQuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIG9uZGVjb2RlZChwYWNrZXQpIHtcbiAgICAgICAgdGhpcy5lbWl0UmVzZXJ2ZWQoXCJwYWNrZXRcIiwgcGFja2V0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbGVkIHVwb24gc29ja2V0IGVycm9yLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBvbmVycm9yKGVycikge1xuICAgICAgICBkZWJ1ZyhcImVycm9yXCIsIGVycik7XG4gICAgICAgIHRoaXMuZW1pdFJlc2VydmVkKFwiZXJyb3JcIiwgZXJyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBzb2NrZXQgZm9yIHRoZSBnaXZlbiBgbnNwYC5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge1NvY2tldH1cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgc29ja2V0KG5zcCwgb3B0cykge1xuICAgICAgICBsZXQgc29ja2V0ID0gdGhpcy5uc3BzW25zcF07XG4gICAgICAgIGlmICghc29ja2V0KSB7XG4gICAgICAgICAgICBzb2NrZXQgPSBuZXcgc29ja2V0XzEuU29ja2V0KHRoaXMsIG5zcCwgb3B0cyk7XG4gICAgICAgICAgICB0aGlzLm5zcHNbbnNwXSA9IHNvY2tldDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc29ja2V0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgdXBvbiBhIHNvY2tldCBjbG9zZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzb2NrZXRcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9kZXN0cm95KHNvY2tldCkge1xuICAgICAgICBjb25zdCBuc3BzID0gT2JqZWN0LmtleXModGhpcy5uc3BzKTtcbiAgICAgICAgZm9yIChjb25zdCBuc3Agb2YgbnNwcykge1xuICAgICAgICAgICAgY29uc3Qgc29ja2V0ID0gdGhpcy5uc3BzW25zcF07XG4gICAgICAgICAgICBpZiAoc29ja2V0LmFjdGl2ZSkge1xuICAgICAgICAgICAgICAgIGRlYnVnKFwic29ja2V0ICVzIGlzIHN0aWxsIGFjdGl2ZSwgc2tpcHBpbmcgY2xvc2VcIiwgbnNwKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fY2xvc2UoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV3JpdGVzIGEgcGFja2V0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHBhY2tldFxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX3BhY2tldChwYWNrZXQpIHtcbiAgICAgICAgZGVidWcoXCJ3cml0aW5nIHBhY2tldCAlalwiLCBwYWNrZXQpO1xuICAgICAgICBjb25zdCBlbmNvZGVkUGFja2V0cyA9IHRoaXMuZW5jb2Rlci5lbmNvZGUocGFja2V0KTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbmNvZGVkUGFja2V0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5lbmdpbmUud3JpdGUoZW5jb2RlZFBhY2tldHNbaV0sIHBhY2tldC5vcHRpb25zKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbGVhbiB1cCB0cmFuc3BvcnQgc3Vic2NyaXB0aW9ucyBhbmQgcGFja2V0IGJ1ZmZlci5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgY2xlYW51cCgpIHtcbiAgICAgICAgZGVidWcoXCJjbGVhbnVwXCIpO1xuICAgICAgICB0aGlzLnN1YnMuZm9yRWFjaCgoc3ViRGVzdHJveSkgPT4gc3ViRGVzdHJveSgpKTtcbiAgICAgICAgdGhpcy5zdWJzLmxlbmd0aCA9IDA7XG4gICAgICAgIHRoaXMuZGVjb2Rlci5kZXN0cm95KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsb3NlIHRoZSBjdXJyZW50IHNvY2tldC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX2Nsb3NlKCkge1xuICAgICAgICBkZWJ1ZyhcImRpc2Nvbm5lY3RcIik7XG4gICAgICAgIHRoaXMuc2tpcFJlY29ubmVjdCA9IHRydWU7XG4gICAgICAgIHRoaXMuX3JlY29ubmVjdGluZyA9IGZhbHNlO1xuICAgICAgICBpZiAoXCJvcGVuaW5nXCIgPT09IHRoaXMuX3JlYWR5U3RhdGUpIHtcbiAgICAgICAgICAgIC8vIGBvbmNsb3NlYCB3aWxsIG5vdCBmaXJlIGJlY2F1c2VcbiAgICAgICAgICAgIC8vIGFuIG9wZW4gZXZlbnQgbmV2ZXIgaGFwcGVuZWRcbiAgICAgICAgICAgIHRoaXMuY2xlYW51cCgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYmFja29mZi5yZXNldCgpO1xuICAgICAgICB0aGlzLl9yZWFkeVN0YXRlID0gXCJjbG9zZWRcIjtcbiAgICAgICAgaWYgKHRoaXMuZW5naW5lKVxuICAgICAgICAgICAgdGhpcy5lbmdpbmUuY2xvc2UoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWxpYXMgZm9yIGNsb3NlKClcbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgZGlzY29ubmVjdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Nsb3NlKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGxlZCB1cG9uIGVuZ2luZSBjbG9zZS5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgb25jbG9zZShyZWFzb24pIHtcbiAgICAgICAgZGVidWcoXCJvbmNsb3NlXCIpO1xuICAgICAgICB0aGlzLmNsZWFudXAoKTtcbiAgICAgICAgdGhpcy5iYWNrb2ZmLnJlc2V0KCk7XG4gICAgICAgIHRoaXMuX3JlYWR5U3RhdGUgPSBcImNsb3NlZFwiO1xuICAgICAgICB0aGlzLmVtaXRSZXNlcnZlZChcImNsb3NlXCIsIHJlYXNvbik7XG4gICAgICAgIGlmICh0aGlzLl9yZWNvbm5lY3Rpb24gJiYgIXRoaXMuc2tpcFJlY29ubmVjdCkge1xuICAgICAgICAgICAgdGhpcy5yZWNvbm5lY3QoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBBdHRlbXB0IGEgcmVjb25uZWN0aW9uLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICByZWNvbm5lY3QoKSB7XG4gICAgICAgIGlmICh0aGlzLl9yZWNvbm5lY3RpbmcgfHwgdGhpcy5za2lwUmVjb25uZWN0KVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgICAgICBpZiAodGhpcy5iYWNrb2ZmLmF0dGVtcHRzID49IHRoaXMuX3JlY29ubmVjdGlvbkF0dGVtcHRzKSB7XG4gICAgICAgICAgICBkZWJ1ZyhcInJlY29ubmVjdCBmYWlsZWRcIik7XG4gICAgICAgICAgICB0aGlzLmJhY2tvZmYucmVzZXQoKTtcbiAgICAgICAgICAgIHRoaXMuZW1pdFJlc2VydmVkKFwicmVjb25uZWN0X2ZhaWxlZFwiKTtcbiAgICAgICAgICAgIHRoaXMuX3JlY29ubmVjdGluZyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZGVsYXkgPSB0aGlzLmJhY2tvZmYuZHVyYXRpb24oKTtcbiAgICAgICAgICAgIGRlYnVnKFwid2lsbCB3YWl0ICVkbXMgYmVmb3JlIHJlY29ubmVjdCBhdHRlbXB0XCIsIGRlbGF5KTtcbiAgICAgICAgICAgIHRoaXMuX3JlY29ubmVjdGluZyA9IHRydWU7XG4gICAgICAgICAgICBjb25zdCB0aW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChzZWxmLnNraXBSZWNvbm5lY3QpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICBkZWJ1ZyhcImF0dGVtcHRpbmcgcmVjb25uZWN0XCIpO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdFJlc2VydmVkKFwicmVjb25uZWN0X2F0dGVtcHRcIiwgc2VsZi5iYWNrb2ZmLmF0dGVtcHRzKTtcbiAgICAgICAgICAgICAgICAvLyBjaGVjayBhZ2FpbiBmb3IgdGhlIGNhc2Ugc29ja2V0IGNsb3NlZCBpbiBhYm92ZSBldmVudHNcbiAgICAgICAgICAgICAgICBpZiAoc2VsZi5za2lwUmVjb25uZWN0KVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgc2VsZi5vcGVuKChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVidWcoXCJyZWNvbm5lY3QgYXR0ZW1wdCBlcnJvclwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX3JlY29ubmVjdGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5yZWNvbm5lY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdFJlc2VydmVkKFwicmVjb25uZWN0X2Vycm9yXCIsIGVycik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWJ1ZyhcInJlY29ubmVjdCBzdWNjZXNzXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5vbnJlY29ubmVjdCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LCBkZWxheSk7XG4gICAgICAgICAgICBpZiAodGhpcy5vcHRzLmF1dG9VbnJlZikge1xuICAgICAgICAgICAgICAgIHRpbWVyLnVucmVmKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnN1YnMucHVzaChmdW5jdGlvbiBzdWJEZXN0cm95KCkge1xuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgdXBvbiBzdWNjZXNzZnVsIHJlY29ubmVjdC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgb25yZWNvbm5lY3QoKSB7XG4gICAgICAgIGNvbnN0IGF0dGVtcHQgPSB0aGlzLmJhY2tvZmYuYXR0ZW1wdHM7XG4gICAgICAgIHRoaXMuX3JlY29ubmVjdGluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmJhY2tvZmYucmVzZXQoKTtcbiAgICAgICAgdGhpcy5lbWl0UmVzZXJ2ZWQoXCJyZWNvbm5lY3RcIiwgYXR0ZW1wdCk7XG4gICAgfVxufVxuZXhwb3J0cy5NYW5hZ2VyID0gTWFuYWdlcjtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5vbiA9IHZvaWQgMDtcbmZ1bmN0aW9uIG9uKG9iaiwgZXYsIGZuKSB7XG4gICAgb2JqLm9uKGV2LCBmbik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIHN1YkRlc3Ryb3koKSB7XG4gICAgICAgIG9iai5vZmYoZXYsIGZuKTtcbiAgICB9O1xufVxuZXhwb3J0cy5vbiA9IG9uO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlNvY2tldCA9IHZvaWQgMDtcbmNvbnN0IHNvY2tldF9pb19wYXJzZXJfMSA9IHJlcXVpcmUoXCJzb2NrZXQuaW8tcGFyc2VyXCIpO1xuY29uc3Qgb25fMSA9IHJlcXVpcmUoXCIuL29uXCIpO1xuY29uc3QgdHlwZWRfZXZlbnRzXzEgPSByZXF1aXJlKFwiLi90eXBlZC1ldmVudHNcIik7XG5jb25zdCBkZWJ1ZyA9IHJlcXVpcmUoXCJkZWJ1Z1wiKShcInNvY2tldC5pby1jbGllbnQ6c29ja2V0XCIpO1xuLyoqXG4gKiBJbnRlcm5hbCBldmVudHMuXG4gKiBUaGVzZSBldmVudHMgY2FuJ3QgYmUgZW1pdHRlZCBieSB0aGUgdXNlci5cbiAqL1xuY29uc3QgUkVTRVJWRURfRVZFTlRTID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgY29ubmVjdDogMSxcbiAgICBjb25uZWN0X2Vycm9yOiAxLFxuICAgIGRpc2Nvbm5lY3Q6IDEsXG4gICAgZGlzY29ubmVjdGluZzogMSxcbiAgICAvLyBFdmVudEVtaXR0ZXIgcmVzZXJ2ZWQgZXZlbnRzOiBodHRwczovL25vZGVqcy5vcmcvYXBpL2V2ZW50cy5odG1sI2V2ZW50c19ldmVudF9uZXdsaXN0ZW5lclxuICAgIG5ld0xpc3RlbmVyOiAxLFxuICAgIHJlbW92ZUxpc3RlbmVyOiAxLFxufSk7XG5jbGFzcyBTb2NrZXQgZXh0ZW5kcyB0eXBlZF9ldmVudHNfMS5TdHJpY3RFdmVudEVtaXR0ZXIge1xuICAgIC8qKlxuICAgICAqIGBTb2NrZXRgIGNvbnN0cnVjdG9yLlxuICAgICAqXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGlvLCBuc3AsIG9wdHMpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5yZWNlaXZlQnVmZmVyID0gW107XG4gICAgICAgIHRoaXMuc2VuZEJ1ZmZlciA9IFtdO1xuICAgICAgICB0aGlzLmlkcyA9IDA7XG4gICAgICAgIHRoaXMuYWNrcyA9IHt9O1xuICAgICAgICB0aGlzLmZsYWdzID0ge307XG4gICAgICAgIHRoaXMuaW8gPSBpbztcbiAgICAgICAgdGhpcy5uc3AgPSBuc3A7XG4gICAgICAgIHRoaXMuaWRzID0gMDtcbiAgICAgICAgdGhpcy5hY2tzID0ge307XG4gICAgICAgIHRoaXMucmVjZWl2ZUJ1ZmZlciA9IFtdO1xuICAgICAgICB0aGlzLnNlbmRCdWZmZXIgPSBbXTtcbiAgICAgICAgdGhpcy5jb25uZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5kaXNjb25uZWN0ZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLmZsYWdzID0ge307XG4gICAgICAgIGlmIChvcHRzICYmIG9wdHMuYXV0aCkge1xuICAgICAgICAgICAgdGhpcy5hdXRoID0gb3B0cy5hdXRoO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmlvLl9hdXRvQ29ubmVjdClcbiAgICAgICAgICAgIHRoaXMub3BlbigpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdWJzY3JpYmUgdG8gb3BlbiwgY2xvc2UgYW5kIHBhY2tldCBldmVudHNcbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgc3ViRXZlbnRzKCkge1xuICAgICAgICBpZiAodGhpcy5zdWJzKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCBpbyA9IHRoaXMuaW87XG4gICAgICAgIHRoaXMuc3VicyA9IFtcbiAgICAgICAgICAgIG9uXzEub24oaW8sIFwib3BlblwiLCB0aGlzLm9ub3Blbi5iaW5kKHRoaXMpKSxcbiAgICAgICAgICAgIG9uXzEub24oaW8sIFwicGFja2V0XCIsIHRoaXMub25wYWNrZXQuYmluZCh0aGlzKSksXG4gICAgICAgICAgICBvbl8xLm9uKGlvLCBcImVycm9yXCIsIHRoaXMub25lcnJvci5iaW5kKHRoaXMpKSxcbiAgICAgICAgICAgIG9uXzEub24oaW8sIFwiY2xvc2VcIiwgdGhpcy5vbmNsb3NlLmJpbmQodGhpcykpLFxuICAgICAgICBdO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRoZSBTb2NrZXQgd2lsbCB0cnkgdG8gcmVjb25uZWN0IHdoZW4gaXRzIE1hbmFnZXIgY29ubmVjdHMgb3IgcmVjb25uZWN0c1xuICAgICAqL1xuICAgIGdldCBhY3RpdmUoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuc3VicztcbiAgICB9XG4gICAgLyoqXG4gICAgICogXCJPcGVuc1wiIHRoZSBzb2NrZXQuXG4gICAgICpcbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgY29ubmVjdCgpIHtcbiAgICAgICAgaWYgKHRoaXMuY29ubmVjdGVkKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIHRoaXMuc3ViRXZlbnRzKCk7XG4gICAgICAgIGlmICghdGhpcy5pb1tcIl9yZWNvbm5lY3RpbmdcIl0pXG4gICAgICAgICAgICB0aGlzLmlvLm9wZW4oKTsgLy8gZW5zdXJlIG9wZW5cbiAgICAgICAgaWYgKFwib3BlblwiID09PSB0aGlzLmlvLl9yZWFkeVN0YXRlKVxuICAgICAgICAgICAgdGhpcy5vbm9wZW4oKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFsaWFzIGZvciBjb25uZWN0KClcbiAgICAgKi9cbiAgICBvcGVuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmRzIGEgYG1lc3NhZ2VgIGV2ZW50LlxuICAgICAqXG4gICAgICogQHJldHVybiBzZWxmXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIHNlbmQoLi4uYXJncykge1xuICAgICAgICBhcmdzLnVuc2hpZnQoXCJtZXNzYWdlXCIpO1xuICAgICAgICB0aGlzLmVtaXQuYXBwbHkodGhpcywgYXJncyk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBPdmVycmlkZSBgZW1pdGAuXG4gICAgICogSWYgdGhlIGV2ZW50IGlzIGluIGBldmVudHNgLCBpdCdzIGVtaXR0ZWQgbm9ybWFsbHkuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHNlbGZcbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgZW1pdChldiwgLi4uYXJncykge1xuICAgICAgICBpZiAoUkVTRVJWRURfRVZFTlRTLmhhc093blByb3BlcnR5KGV2KSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdcIicgKyBldiArICdcIiBpcyBhIHJlc2VydmVkIGV2ZW50IG5hbWUnKTtcbiAgICAgICAgfVxuICAgICAgICBhcmdzLnVuc2hpZnQoZXYpO1xuICAgICAgICBjb25zdCBwYWNrZXQgPSB7XG4gICAgICAgICAgICB0eXBlOiBzb2NrZXRfaW9fcGFyc2VyXzEuUGFja2V0VHlwZS5FVkVOVCxcbiAgICAgICAgICAgIGRhdGE6IGFyZ3MsXG4gICAgICAgIH07XG4gICAgICAgIHBhY2tldC5vcHRpb25zID0ge307XG4gICAgICAgIHBhY2tldC5vcHRpb25zLmNvbXByZXNzID0gdGhpcy5mbGFncy5jb21wcmVzcyAhPT0gZmFsc2U7XG4gICAgICAgIC8vIGV2ZW50IGFjayBjYWxsYmFja1xuICAgICAgICBpZiAoXCJmdW5jdGlvblwiID09PSB0eXBlb2YgYXJnc1thcmdzLmxlbmd0aCAtIDFdKSB7XG4gICAgICAgICAgICBkZWJ1ZyhcImVtaXR0aW5nIHBhY2tldCB3aXRoIGFjayBpZCAlZFwiLCB0aGlzLmlkcyk7XG4gICAgICAgICAgICB0aGlzLmFja3NbdGhpcy5pZHNdID0gYXJncy5wb3AoKTtcbiAgICAgICAgICAgIHBhY2tldC5pZCA9IHRoaXMuaWRzKys7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaXNUcmFuc3BvcnRXcml0YWJsZSA9IHRoaXMuaW8uZW5naW5lICYmXG4gICAgICAgICAgICB0aGlzLmlvLmVuZ2luZS50cmFuc3BvcnQgJiZcbiAgICAgICAgICAgIHRoaXMuaW8uZW5naW5lLnRyYW5zcG9ydC53cml0YWJsZTtcbiAgICAgICAgY29uc3QgZGlzY2FyZFBhY2tldCA9IHRoaXMuZmxhZ3Mudm9sYXRpbGUgJiYgKCFpc1RyYW5zcG9ydFdyaXRhYmxlIHx8ICF0aGlzLmNvbm5lY3RlZCk7XG4gICAgICAgIGlmIChkaXNjYXJkUGFja2V0KSB7XG4gICAgICAgICAgICBkZWJ1ZyhcImRpc2NhcmQgcGFja2V0IGFzIHRoZSB0cmFuc3BvcnQgaXMgbm90IGN1cnJlbnRseSB3cml0YWJsZVwiKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmNvbm5lY3RlZCkge1xuICAgICAgICAgICAgdGhpcy5wYWNrZXQocGFja2V0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2VuZEJ1ZmZlci5wdXNoKHBhY2tldCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5mbGFncyA9IHt9O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZHMgYSBwYWNrZXQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGFja2V0XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBwYWNrZXQocGFja2V0KSB7XG4gICAgICAgIHBhY2tldC5uc3AgPSB0aGlzLm5zcDtcbiAgICAgICAgdGhpcy5pby5fcGFja2V0KHBhY2tldCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGxlZCB1cG9uIGVuZ2luZSBgb3BlbmAuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIG9ub3BlbigpIHtcbiAgICAgICAgZGVidWcoXCJ0cmFuc3BvcnQgaXMgb3BlbiAtIGNvbm5lY3RpbmdcIik7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5hdXRoID09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgdGhpcy5hdXRoKChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYWNrZXQoeyB0eXBlOiBzb2NrZXRfaW9fcGFyc2VyXzEuUGFja2V0VHlwZS5DT05ORUNULCBkYXRhIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnBhY2tldCh7IHR5cGU6IHNvY2tldF9pb19wYXJzZXJfMS5QYWNrZXRUeXBlLkNPTk5FQ1QsIGRhdGE6IHRoaXMuYXV0aCB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgdXBvbiBlbmdpbmUgb3IgbWFuYWdlciBgZXJyb3JgLlxuICAgICAqXG4gICAgICogQHBhcmFtIGVyclxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgb25lcnJvcihlcnIpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNvbm5lY3RlZCkge1xuICAgICAgICAgICAgdGhpcy5lbWl0UmVzZXJ2ZWQoXCJjb25uZWN0X2Vycm9yXCIsIGVycik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbGVkIHVwb24gZW5naW5lIGBjbG9zZWAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcmVhc29uXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBvbmNsb3NlKHJlYXNvbikge1xuICAgICAgICBkZWJ1ZyhcImNsb3NlICglcylcIiwgcmVhc29uKTtcbiAgICAgICAgdGhpcy5jb25uZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5kaXNjb25uZWN0ZWQgPSB0cnVlO1xuICAgICAgICBkZWxldGUgdGhpcy5pZDtcbiAgICAgICAgdGhpcy5lbWl0UmVzZXJ2ZWQoXCJkaXNjb25uZWN0XCIsIHJlYXNvbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGxlZCB3aXRoIHNvY2tldCBwYWNrZXQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGFja2V0XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBvbnBhY2tldChwYWNrZXQpIHtcbiAgICAgICAgY29uc3Qgc2FtZU5hbWVzcGFjZSA9IHBhY2tldC5uc3AgPT09IHRoaXMubnNwO1xuICAgICAgICBpZiAoIXNhbWVOYW1lc3BhY2UpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHN3aXRjaCAocGFja2V0LnR5cGUpIHtcbiAgICAgICAgICAgIGNhc2Ugc29ja2V0X2lvX3BhcnNlcl8xLlBhY2tldFR5cGUuQ09OTkVDVDpcbiAgICAgICAgICAgICAgICBpZiAocGFja2V0LmRhdGEgJiYgcGFja2V0LmRhdGEuc2lkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkID0gcGFja2V0LmRhdGEuc2lkO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uY29ubmVjdChpZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXRSZXNlcnZlZChcImNvbm5lY3RfZXJyb3JcIiwgbmV3IEVycm9yKFwiSXQgc2VlbXMgeW91IGFyZSB0cnlpbmcgdG8gcmVhY2ggYSBTb2NrZXQuSU8gc2VydmVyIGluIHYyLnggd2l0aCBhIHYzLnggY2xpZW50LCBidXQgdGhleSBhcmUgbm90IGNvbXBhdGlibGUgKG1vcmUgaW5mb3JtYXRpb24gaGVyZTogaHR0cHM6Ly9zb2NrZXQuaW8vZG9jcy92My9taWdyYXRpbmctZnJvbS0yLXgtdG8tMy0wLylcIikpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2Ugc29ja2V0X2lvX3BhcnNlcl8xLlBhY2tldFR5cGUuRVZFTlQ6XG4gICAgICAgICAgICAgICAgdGhpcy5vbmV2ZW50KHBhY2tldCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIHNvY2tldF9pb19wYXJzZXJfMS5QYWNrZXRUeXBlLkJJTkFSWV9FVkVOVDpcbiAgICAgICAgICAgICAgICB0aGlzLm9uZXZlbnQocGFja2V0KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2Ugc29ja2V0X2lvX3BhcnNlcl8xLlBhY2tldFR5cGUuQUNLOlxuICAgICAgICAgICAgICAgIHRoaXMub25hY2socGFja2V0KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2Ugc29ja2V0X2lvX3BhcnNlcl8xLlBhY2tldFR5cGUuQklOQVJZX0FDSzpcbiAgICAgICAgICAgICAgICB0aGlzLm9uYWNrKHBhY2tldCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIHNvY2tldF9pb19wYXJzZXJfMS5QYWNrZXRUeXBlLkRJU0NPTk5FQ1Q6XG4gICAgICAgICAgICAgICAgdGhpcy5vbmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2Ugc29ja2V0X2lvX3BhcnNlcl8xLlBhY2tldFR5cGUuQ09OTkVDVF9FUlJPUjpcbiAgICAgICAgICAgICAgICBjb25zdCBlcnIgPSBuZXcgRXJyb3IocGFja2V0LmRhdGEubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgICAgIGVyci5kYXRhID0gcGFja2V0LmRhdGEuZGF0YTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXRSZXNlcnZlZChcImNvbm5lY3RfZXJyb3JcIiwgZXJyKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgdXBvbiBhIHNlcnZlciBldmVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBwYWNrZXRcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIG9uZXZlbnQocGFja2V0KSB7XG4gICAgICAgIGNvbnN0IGFyZ3MgPSBwYWNrZXQuZGF0YSB8fCBbXTtcbiAgICAgICAgZGVidWcoXCJlbWl0dGluZyBldmVudCAlalwiLCBhcmdzKTtcbiAgICAgICAgaWYgKG51bGwgIT0gcGFja2V0LmlkKSB7XG4gICAgICAgICAgICBkZWJ1ZyhcImF0dGFjaGluZyBhY2sgY2FsbGJhY2sgdG8gZXZlbnRcIik7XG4gICAgICAgICAgICBhcmdzLnB1c2godGhpcy5hY2socGFja2V0LmlkKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuY29ubmVjdGVkKSB7XG4gICAgICAgICAgICB0aGlzLmVtaXRFdmVudChhcmdzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucmVjZWl2ZUJ1ZmZlci5wdXNoKE9iamVjdC5mcmVlemUoYXJncykpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVtaXRFdmVudChhcmdzKSB7XG4gICAgICAgIGlmICh0aGlzLl9hbnlMaXN0ZW5lcnMgJiYgdGhpcy5fYW55TGlzdGVuZXJzLmxlbmd0aCkge1xuICAgICAgICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5fYW55TGlzdGVuZXJzLnNsaWNlKCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGxpc3RlbmVyIG9mIGxpc3RlbmVycykge1xuICAgICAgICAgICAgICAgIGxpc3RlbmVyLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHN1cGVyLmVtaXQuYXBwbHkodGhpcywgYXJncyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFByb2R1Y2VzIGFuIGFjayBjYWxsYmFjayB0byBlbWl0IHdpdGggYW4gZXZlbnQuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIGFjayhpZCkge1xuICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcbiAgICAgICAgbGV0IHNlbnQgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICAgICAgICAvLyBwcmV2ZW50IGRvdWJsZSBjYWxsYmFja3NcbiAgICAgICAgICAgIGlmIChzZW50KVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIHNlbnQgPSB0cnVlO1xuICAgICAgICAgICAgZGVidWcoXCJzZW5kaW5nIGFjayAlalwiLCBhcmdzKTtcbiAgICAgICAgICAgIHNlbGYucGFja2V0KHtcbiAgICAgICAgICAgICAgICB0eXBlOiBzb2NrZXRfaW9fcGFyc2VyXzEuUGFja2V0VHlwZS5BQ0ssXG4gICAgICAgICAgICAgICAgaWQ6IGlkLFxuICAgICAgICAgICAgICAgIGRhdGE6IGFyZ3MsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbGVkIHVwb24gYSBzZXJ2ZXIgYWNrbm93bGVnZW1lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGFja2V0XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBvbmFjayhwYWNrZXQpIHtcbiAgICAgICAgY29uc3QgYWNrID0gdGhpcy5hY2tzW3BhY2tldC5pZF07XG4gICAgICAgIGlmIChcImZ1bmN0aW9uXCIgPT09IHR5cGVvZiBhY2spIHtcbiAgICAgICAgICAgIGRlYnVnKFwiY2FsbGluZyBhY2sgJXMgd2l0aCAlalwiLCBwYWNrZXQuaWQsIHBhY2tldC5kYXRhKTtcbiAgICAgICAgICAgIGFjay5hcHBseSh0aGlzLCBwYWNrZXQuZGF0YSk7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5hY2tzW3BhY2tldC5pZF07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBkZWJ1ZyhcImJhZCBhY2sgJXNcIiwgcGFja2V0LmlkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgdXBvbiBzZXJ2ZXIgY29ubmVjdC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgb25jb25uZWN0KGlkKSB7XG4gICAgICAgIGRlYnVnKFwic29ja2V0IGNvbm5lY3RlZCB3aXRoIGlkICVzXCIsIGlkKTtcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xuICAgICAgICB0aGlzLmNvbm5lY3RlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuZGlzY29ubmVjdGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZW1pdEJ1ZmZlcmVkKCk7XG4gICAgICAgIHRoaXMuZW1pdFJlc2VydmVkKFwiY29ubmVjdFwiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRW1pdCBidWZmZXJlZCBldmVudHMgKHJlY2VpdmVkIGFuZCBlbWl0dGVkKS5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgZW1pdEJ1ZmZlcmVkKCkge1xuICAgICAgICB0aGlzLnJlY2VpdmVCdWZmZXIuZm9yRWFjaCgoYXJncykgPT4gdGhpcy5lbWl0RXZlbnQoYXJncykpO1xuICAgICAgICB0aGlzLnJlY2VpdmVCdWZmZXIgPSBbXTtcbiAgICAgICAgdGhpcy5zZW5kQnVmZmVyLmZvckVhY2goKHBhY2tldCkgPT4gdGhpcy5wYWNrZXQocGFja2V0KSk7XG4gICAgICAgIHRoaXMuc2VuZEJ1ZmZlciA9IFtdO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgdXBvbiBzZXJ2ZXIgZGlzY29ubmVjdC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgb25kaXNjb25uZWN0KCkge1xuICAgICAgICBkZWJ1ZyhcInNlcnZlciBkaXNjb25uZWN0ICglcylcIiwgdGhpcy5uc3ApO1xuICAgICAgICB0aGlzLmRlc3Ryb3koKTtcbiAgICAgICAgdGhpcy5vbmNsb3NlKFwiaW8gc2VydmVyIGRpc2Nvbm5lY3RcIik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGxlZCB1cG9uIGZvcmNlZCBjbGllbnQvc2VydmVyIHNpZGUgZGlzY29ubmVjdGlvbnMsXG4gICAgICogdGhpcyBtZXRob2QgZW5zdXJlcyB0aGUgbWFuYWdlciBzdG9wcyB0cmFja2luZyB1cyBhbmRcbiAgICAgKiB0aGF0IHJlY29ubmVjdGlvbnMgZG9uJ3QgZ2V0IHRyaWdnZXJlZCBmb3IgdGhpcy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgaWYgKHRoaXMuc3Vicykge1xuICAgICAgICAgICAgLy8gY2xlYW4gc3Vic2NyaXB0aW9ucyB0byBhdm9pZCByZWNvbm5lY3Rpb25zXG4gICAgICAgICAgICB0aGlzLnN1YnMuZm9yRWFjaCgoc3ViRGVzdHJveSkgPT4gc3ViRGVzdHJveSgpKTtcbiAgICAgICAgICAgIHRoaXMuc3VicyA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmlvW1wiX2Rlc3Ryb3lcIl0odGhpcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERpc2Nvbm5lY3RzIHRoZSBzb2NrZXQgbWFudWFsbHkuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHNlbGZcbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgZGlzY29ubmVjdCgpIHtcbiAgICAgICAgaWYgKHRoaXMuY29ubmVjdGVkKSB7XG4gICAgICAgICAgICBkZWJ1ZyhcInBlcmZvcm1pbmcgZGlzY29ubmVjdCAoJXMpXCIsIHRoaXMubnNwKTtcbiAgICAgICAgICAgIHRoaXMucGFja2V0KHsgdHlwZTogc29ja2V0X2lvX3BhcnNlcl8xLlBhY2tldFR5cGUuRElTQ09OTkVDVCB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyByZW1vdmUgc29ja2V0IGZyb20gcG9vbFxuICAgICAgICB0aGlzLmRlc3Ryb3koKTtcbiAgICAgICAgaWYgKHRoaXMuY29ubmVjdGVkKSB7XG4gICAgICAgICAgICAvLyBmaXJlIGV2ZW50c1xuICAgICAgICAgICAgdGhpcy5vbmNsb3NlKFwiaW8gY2xpZW50IGRpc2Nvbm5lY3RcIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFsaWFzIGZvciBkaXNjb25uZWN0KClcbiAgICAgKlxuICAgICAqIEByZXR1cm4gc2VsZlxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlzY29ubmVjdCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBjb21wcmVzcyBmbGFnLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNvbXByZXNzIC0gaWYgYHRydWVgLCBjb21wcmVzc2VzIHRoZSBzZW5kaW5nIGRhdGFcbiAgICAgKiBAcmV0dXJuIHNlbGZcbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgY29tcHJlc3MoY29tcHJlc3MpIHtcbiAgICAgICAgdGhpcy5mbGFncy5jb21wcmVzcyA9IGNvbXByZXNzO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyBhIG1vZGlmaWVyIGZvciBhIHN1YnNlcXVlbnQgZXZlbnQgZW1pc3Npb24gdGhhdCB0aGUgZXZlbnQgbWVzc2FnZSB3aWxsIGJlIGRyb3BwZWQgd2hlbiB0aGlzIHNvY2tldCBpcyBub3RcbiAgICAgKiByZWFkeSB0byBzZW5kIG1lc3NhZ2VzLlxuICAgICAqXG4gICAgICogQHJldHVybnMgc2VsZlxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBnZXQgdm9sYXRpbGUoKSB7XG4gICAgICAgIHRoaXMuZmxhZ3Mudm9sYXRpbGUgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyBhIGxpc3RlbmVyIHRoYXQgd2lsbCBiZSBmaXJlZCB3aGVuIGFueSBldmVudCBpcyBlbWl0dGVkLiBUaGUgZXZlbnQgbmFtZSBpcyBwYXNzZWQgYXMgdGhlIGZpcnN0IGFyZ3VtZW50IHRvIHRoZVxuICAgICAqIGNhbGxiYWNrLlxuICAgICAqXG4gICAgICogQHBhcmFtIGxpc3RlbmVyXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIG9uQW55KGxpc3RlbmVyKSB7XG4gICAgICAgIHRoaXMuX2FueUxpc3RlbmVycyA9IHRoaXMuX2FueUxpc3RlbmVycyB8fCBbXTtcbiAgICAgICAgdGhpcy5fYW55TGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyBhIGxpc3RlbmVyIHRoYXQgd2lsbCBiZSBmaXJlZCB3aGVuIGFueSBldmVudCBpcyBlbWl0dGVkLiBUaGUgZXZlbnQgbmFtZSBpcyBwYXNzZWQgYXMgdGhlIGZpcnN0IGFyZ3VtZW50IHRvIHRoZVxuICAgICAqIGNhbGxiYWNrLiBUaGUgbGlzdGVuZXIgaXMgYWRkZWQgdG8gdGhlIGJlZ2lubmluZyBvZiB0aGUgbGlzdGVuZXJzIGFycmF5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGxpc3RlbmVyXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIHByZXBlbmRBbnkobGlzdGVuZXIpIHtcbiAgICAgICAgdGhpcy5fYW55TGlzdGVuZXJzID0gdGhpcy5fYW55TGlzdGVuZXJzIHx8IFtdO1xuICAgICAgICB0aGlzLl9hbnlMaXN0ZW5lcnMudW5zaGlmdChsaXN0ZW5lcik7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIHRoZSBsaXN0ZW5lciB0aGF0IHdpbGwgYmUgZmlyZWQgd2hlbiBhbnkgZXZlbnQgaXMgZW1pdHRlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBsaXN0ZW5lclxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBvZmZBbnkobGlzdGVuZXIpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9hbnlMaXN0ZW5lcnMpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsaXN0ZW5lcikge1xuICAgICAgICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5fYW55TGlzdGVuZXJzO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0ZW5lcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAobGlzdGVuZXIgPT09IGxpc3RlbmVyc1tpXSkge1xuICAgICAgICAgICAgICAgICAgICBsaXN0ZW5lcnMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9hbnlMaXN0ZW5lcnMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhbiBhcnJheSBvZiBsaXN0ZW5lcnMgdGhhdCBhcmUgbGlzdGVuaW5nIGZvciBhbnkgZXZlbnQgdGhhdCBpcyBzcGVjaWZpZWQuIFRoaXMgYXJyYXkgY2FuIGJlIG1hbmlwdWxhdGVkLFxuICAgICAqIGUuZy4gdG8gcmVtb3ZlIGxpc3RlbmVycy5cbiAgICAgKlxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBsaXN0ZW5lcnNBbnkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hbnlMaXN0ZW5lcnMgfHwgW107XG4gICAgfVxufVxuZXhwb3J0cy5Tb2NrZXQgPSBTb2NrZXQ7XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuU3RyaWN0RXZlbnRFbWl0dGVyID0gdm9pZCAwO1xuY29uc3QgRW1pdHRlciA9IHJlcXVpcmUoXCJjb21wb25lbnQtZW1pdHRlclwiKTtcbi8qKlxuICogU3RyaWN0bHkgdHlwZWQgdmVyc2lvbiBvZiBhbiBgRXZlbnRFbWl0dGVyYC4gQSBgVHlwZWRFdmVudEVtaXR0ZXJgIHRha2VzIHR5cGVcbiAqIHBhcmFtZXRlcnMgZm9yIG1hcHBpbmdzIG9mIGV2ZW50IG5hbWVzIHRvIGV2ZW50IGRhdGEgdHlwZXMsIGFuZCBzdHJpY3RseVxuICogdHlwZXMgbWV0aG9kIGNhbGxzIHRvIHRoZSBgRXZlbnRFbWl0dGVyYCBhY2NvcmRpbmcgdG8gdGhlc2UgZXZlbnQgbWFwcy5cbiAqXG4gKiBAdHlwZVBhcmFtIExpc3RlbkV2ZW50cyAtIGBFdmVudHNNYXBgIG9mIHVzZXItZGVmaW5lZCBldmVudHMgdGhhdCBjYW4gYmVcbiAqIGxpc3RlbmVkIHRvIHdpdGggYG9uYCBvciBgb25jZWBcbiAqIEB0eXBlUGFyYW0gRW1pdEV2ZW50cyAtIGBFdmVudHNNYXBgIG9mIHVzZXItZGVmaW5lZCBldmVudHMgdGhhdCBjYW4gYmVcbiAqIGVtaXR0ZWQgd2l0aCBgZW1pdGBcbiAqIEB0eXBlUGFyYW0gUmVzZXJ2ZWRFdmVudHMgLSBgRXZlbnRzTWFwYCBvZiByZXNlcnZlZCBldmVudHMsIHRoYXQgY2FuIGJlXG4gKiBlbWl0dGVkIGJ5IHNvY2tldC5pbyB3aXRoIGBlbWl0UmVzZXJ2ZWRgLCBhbmQgY2FuIGJlIGxpc3RlbmVkIHRvIHdpdGhcbiAqIGBsaXN0ZW5gLlxuICovXG5jbGFzcyBTdHJpY3RFdmVudEVtaXR0ZXIgZXh0ZW5kcyBFbWl0dGVyIHtcbiAgICAvKipcbiAgICAgKiBBZGRzIHRoZSBgbGlzdGVuZXJgIGZ1bmN0aW9uIGFzIGFuIGV2ZW50IGxpc3RlbmVyIGZvciBgZXZgLlxuICAgICAqXG4gICAgICogQHBhcmFtIGV2IE5hbWUgb2YgdGhlIGV2ZW50XG4gICAgICogQHBhcmFtIGxpc3RlbmVyIENhbGxiYWNrIGZ1bmN0aW9uXG4gICAgICovXG4gICAgb24oZXYsIGxpc3RlbmVyKSB7XG4gICAgICAgIHN1cGVyLm9uKGV2LCBsaXN0ZW5lcik7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgb25lLXRpbWUgYGxpc3RlbmVyYCBmdW5jdGlvbiBhcyBhbiBldmVudCBsaXN0ZW5lciBmb3IgYGV2YC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBldiBOYW1lIG9mIHRoZSBldmVudFxuICAgICAqIEBwYXJhbSBsaXN0ZW5lciBDYWxsYmFjayBmdW5jdGlvblxuICAgICAqL1xuICAgIG9uY2UoZXYsIGxpc3RlbmVyKSB7XG4gICAgICAgIHN1cGVyLm9uY2UoZXYsIGxpc3RlbmVyKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVtaXRzIGFuIGV2ZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIGV2IE5hbWUgb2YgdGhlIGV2ZW50XG4gICAgICogQHBhcmFtIGFyZ3MgVmFsdWVzIHRvIHNlbmQgdG8gbGlzdGVuZXJzIG9mIHRoaXMgZXZlbnRcbiAgICAgKi9cbiAgICBlbWl0KGV2LCAuLi5hcmdzKSB7XG4gICAgICAgIHN1cGVyLmVtaXQoZXYsIC4uLmFyZ3MpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogRW1pdHMgYSByZXNlcnZlZCBldmVudC5cbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGBwcm90ZWN0ZWRgLCBzbyB0aGF0IG9ubHkgYSBjbGFzcyBleHRlbmRpbmdcbiAgICAgKiBgU3RyaWN0RXZlbnRFbWl0dGVyYCBjYW4gZW1pdCBpdHMgb3duIHJlc2VydmVkIGV2ZW50cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBldiBSZXNlcnZlZCBldmVudCBuYW1lXG4gICAgICogQHBhcmFtIGFyZ3MgQXJndW1lbnRzIHRvIGVtaXQgYWxvbmcgd2l0aCB0aGUgZXZlbnRcbiAgICAgKi9cbiAgICBlbWl0UmVzZXJ2ZWQoZXYsIC4uLmFyZ3MpIHtcbiAgICAgICAgc3VwZXIuZW1pdChldiwgLi4uYXJncyk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBsaXN0ZW5lcnMgbGlzdGVuaW5nIHRvIGFuIGV2ZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIGV2ZW50IEV2ZW50IG5hbWVcbiAgICAgKiBAcmV0dXJucyBBcnJheSBvZiBsaXN0ZW5lcnMgc3Vic2NyaWJlZCB0byBgZXZlbnRgXG4gICAgICovXG4gICAgbGlzdGVuZXJzKGV2ZW50KSB7XG4gICAgICAgIHJldHVybiBzdXBlci5saXN0ZW5lcnMoZXZlbnQpO1xuICAgIH1cbn1cbmV4cG9ydHMuU3RyaWN0RXZlbnRFbWl0dGVyID0gU3RyaWN0RXZlbnRFbWl0dGVyO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnVybCA9IHZvaWQgMDtcbmNvbnN0IHBhcnNldXJpID0gcmVxdWlyZShcInBhcnNldXJpXCIpO1xuY29uc3QgZGVidWcgPSByZXF1aXJlKFwiZGVidWdcIikoXCJzb2NrZXQuaW8tY2xpZW50OnVybFwiKTtcbi8qKlxuICogVVJMIHBhcnNlci5cbiAqXG4gKiBAcGFyYW0gdXJpIC0gdXJsXG4gKiBAcGFyYW0gcGF0aCAtIHRoZSByZXF1ZXN0IHBhdGggb2YgdGhlIGNvbm5lY3Rpb25cbiAqIEBwYXJhbSBsb2MgLSBBbiBvYmplY3QgbWVhbnQgdG8gbWltaWMgd2luZG93LmxvY2F0aW9uLlxuICogICAgICAgIERlZmF1bHRzIHRvIHdpbmRvdy5sb2NhdGlvbi5cbiAqIEBwdWJsaWNcbiAqL1xuZnVuY3Rpb24gdXJsKHVyaSwgcGF0aCA9IFwiXCIsIGxvYykge1xuICAgIGxldCBvYmogPSB1cmk7XG4gICAgLy8gZGVmYXVsdCB0byB3aW5kb3cubG9jYXRpb25cbiAgICBsb2MgPSBsb2MgfHwgKHR5cGVvZiBsb2NhdGlvbiAhPT0gXCJ1bmRlZmluZWRcIiAmJiBsb2NhdGlvbik7XG4gICAgaWYgKG51bGwgPT0gdXJpKVxuICAgICAgICB1cmkgPSBsb2MucHJvdG9jb2wgKyBcIi8vXCIgKyBsb2MuaG9zdDtcbiAgICAvLyByZWxhdGl2ZSBwYXRoIHN1cHBvcnRcbiAgICBpZiAodHlwZW9mIHVyaSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICBpZiAoXCIvXCIgPT09IHVyaS5jaGFyQXQoMCkpIHtcbiAgICAgICAgICAgIGlmIChcIi9cIiA9PT0gdXJpLmNoYXJBdCgxKSkge1xuICAgICAgICAgICAgICAgIHVyaSA9IGxvYy5wcm90b2NvbCArIHVyaTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHVyaSA9IGxvYy5ob3N0ICsgdXJpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghL14oaHR0cHM/fHdzcz8pOlxcL1xcLy8udGVzdCh1cmkpKSB7XG4gICAgICAgICAgICBkZWJ1ZyhcInByb3RvY29sLWxlc3MgdXJsICVzXCIsIHVyaSk7XG4gICAgICAgICAgICBpZiAoXCJ1bmRlZmluZWRcIiAhPT0gdHlwZW9mIGxvYykge1xuICAgICAgICAgICAgICAgIHVyaSA9IGxvYy5wcm90b2NvbCArIFwiLy9cIiArIHVyaTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHVyaSA9IFwiaHR0cHM6Ly9cIiArIHVyaTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBwYXJzZVxuICAgICAgICBkZWJ1ZyhcInBhcnNlICVzXCIsIHVyaSk7XG4gICAgICAgIG9iaiA9IHBhcnNldXJpKHVyaSk7XG4gICAgfVxuICAgIC8vIG1ha2Ugc3VyZSB3ZSB0cmVhdCBgbG9jYWxob3N0OjgwYCBhbmQgYGxvY2FsaG9zdGAgZXF1YWxseVxuICAgIGlmICghb2JqLnBvcnQpIHtcbiAgICAgICAgaWYgKC9eKGh0dHB8d3MpJC8udGVzdChvYmoucHJvdG9jb2wpKSB7XG4gICAgICAgICAgICBvYmoucG9ydCA9IFwiODBcIjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICgvXihodHRwfHdzKXMkLy50ZXN0KG9iai5wcm90b2NvbCkpIHtcbiAgICAgICAgICAgIG9iai5wb3J0ID0gXCI0NDNcIjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBvYmoucGF0aCA9IG9iai5wYXRoIHx8IFwiL1wiO1xuICAgIGNvbnN0IGlwdjYgPSBvYmouaG9zdC5pbmRleE9mKFwiOlwiKSAhPT0gLTE7XG4gICAgY29uc3QgaG9zdCA9IGlwdjYgPyBcIltcIiArIG9iai5ob3N0ICsgXCJdXCIgOiBvYmouaG9zdDtcbiAgICAvLyBkZWZpbmUgdW5pcXVlIGlkXG4gICAgb2JqLmlkID0gb2JqLnByb3RvY29sICsgXCI6Ly9cIiArIGhvc3QgKyBcIjpcIiArIG9iai5wb3J0ICsgcGF0aDtcbiAgICAvLyBkZWZpbmUgaHJlZlxuICAgIG9iai5ocmVmID1cbiAgICAgICAgb2JqLnByb3RvY29sICtcbiAgICAgICAgICAgIFwiOi8vXCIgK1xuICAgICAgICAgICAgaG9zdCArXG4gICAgICAgICAgICAobG9jICYmIGxvYy5wb3J0ID09PSBvYmoucG9ydCA/IFwiXCIgOiBcIjpcIiArIG9iai5wb3J0KTtcbiAgICByZXR1cm4gb2JqO1xufVxuZXhwb3J0cy51cmwgPSB1cmw7XG4iLCIvKiBlc2xpbnQtZW52IGJyb3dzZXIgKi9cblxuLyoqXG4gKiBUaGlzIGlzIHRoZSB3ZWIgYnJvd3NlciBpbXBsZW1lbnRhdGlvbiBvZiBgZGVidWcoKWAuXG4gKi9cblxuZXhwb3J0cy5mb3JtYXRBcmdzID0gZm9ybWF0QXJncztcbmV4cG9ydHMuc2F2ZSA9IHNhdmU7XG5leHBvcnRzLmxvYWQgPSBsb2FkO1xuZXhwb3J0cy51c2VDb2xvcnMgPSB1c2VDb2xvcnM7XG5leHBvcnRzLnN0b3JhZ2UgPSBsb2NhbHN0b3JhZ2UoKTtcbmV4cG9ydHMuZGVzdHJveSA9ICgoKSA9PiB7XG5cdGxldCB3YXJuZWQgPSBmYWxzZTtcblxuXHRyZXR1cm4gKCkgPT4ge1xuXHRcdGlmICghd2FybmVkKSB7XG5cdFx0XHR3YXJuZWQgPSB0cnVlO1xuXHRcdFx0Y29uc29sZS53YXJuKCdJbnN0YW5jZSBtZXRob2QgYGRlYnVnLmRlc3Ryb3koKWAgaXMgZGVwcmVjYXRlZCBhbmQgbm8gbG9uZ2VyIGRvZXMgYW55dGhpbmcuIEl0IHdpbGwgYmUgcmVtb3ZlZCBpbiB0aGUgbmV4dCBtYWpvciB2ZXJzaW9uIG9mIGBkZWJ1Z2AuJyk7XG5cdFx0fVxuXHR9O1xufSkoKTtcblxuLyoqXG4gKiBDb2xvcnMuXG4gKi9cblxuZXhwb3J0cy5jb2xvcnMgPSBbXG5cdCcjMDAwMENDJyxcblx0JyMwMDAwRkYnLFxuXHQnIzAwMzNDQycsXG5cdCcjMDAzM0ZGJyxcblx0JyMwMDY2Q0MnLFxuXHQnIzAwNjZGRicsXG5cdCcjMDA5OUNDJyxcblx0JyMwMDk5RkYnLFxuXHQnIzAwQ0MwMCcsXG5cdCcjMDBDQzMzJyxcblx0JyMwMENDNjYnLFxuXHQnIzAwQ0M5OScsXG5cdCcjMDBDQ0NDJyxcblx0JyMwMENDRkYnLFxuXHQnIzMzMDBDQycsXG5cdCcjMzMwMEZGJyxcblx0JyMzMzMzQ0MnLFxuXHQnIzMzMzNGRicsXG5cdCcjMzM2NkNDJyxcblx0JyMzMzY2RkYnLFxuXHQnIzMzOTlDQycsXG5cdCcjMzM5OUZGJyxcblx0JyMzM0NDMDAnLFxuXHQnIzMzQ0MzMycsXG5cdCcjMzNDQzY2Jyxcblx0JyMzM0NDOTknLFxuXHQnIzMzQ0NDQycsXG5cdCcjMzNDQ0ZGJyxcblx0JyM2NjAwQ0MnLFxuXHQnIzY2MDBGRicsXG5cdCcjNjYzM0NDJyxcblx0JyM2NjMzRkYnLFxuXHQnIzY2Q0MwMCcsXG5cdCcjNjZDQzMzJyxcblx0JyM5OTAwQ0MnLFxuXHQnIzk5MDBGRicsXG5cdCcjOTkzM0NDJyxcblx0JyM5OTMzRkYnLFxuXHQnIzk5Q0MwMCcsXG5cdCcjOTlDQzMzJyxcblx0JyNDQzAwMDAnLFxuXHQnI0NDMDAzMycsXG5cdCcjQ0MwMDY2Jyxcblx0JyNDQzAwOTknLFxuXHQnI0NDMDBDQycsXG5cdCcjQ0MwMEZGJyxcblx0JyNDQzMzMDAnLFxuXHQnI0NDMzMzMycsXG5cdCcjQ0MzMzY2Jyxcblx0JyNDQzMzOTknLFxuXHQnI0NDMzNDQycsXG5cdCcjQ0MzM0ZGJyxcblx0JyNDQzY2MDAnLFxuXHQnI0NDNjYzMycsXG5cdCcjQ0M5OTAwJyxcblx0JyNDQzk5MzMnLFxuXHQnI0NDQ0MwMCcsXG5cdCcjQ0NDQzMzJyxcblx0JyNGRjAwMDAnLFxuXHQnI0ZGMDAzMycsXG5cdCcjRkYwMDY2Jyxcblx0JyNGRjAwOTknLFxuXHQnI0ZGMDBDQycsXG5cdCcjRkYwMEZGJyxcblx0JyNGRjMzMDAnLFxuXHQnI0ZGMzMzMycsXG5cdCcjRkYzMzY2Jyxcblx0JyNGRjMzOTknLFxuXHQnI0ZGMzNDQycsXG5cdCcjRkYzM0ZGJyxcblx0JyNGRjY2MDAnLFxuXHQnI0ZGNjYzMycsXG5cdCcjRkY5OTAwJyxcblx0JyNGRjk5MzMnLFxuXHQnI0ZGQ0MwMCcsXG5cdCcjRkZDQzMzJ1xuXTtcblxuLyoqXG4gKiBDdXJyZW50bHkgb25seSBXZWJLaXQtYmFzZWQgV2ViIEluc3BlY3RvcnMsIEZpcmVmb3ggPj0gdjMxLFxuICogYW5kIHRoZSBGaXJlYnVnIGV4dGVuc2lvbiAoYW55IEZpcmVmb3ggdmVyc2lvbikgYXJlIGtub3duXG4gKiB0byBzdXBwb3J0IFwiJWNcIiBDU1MgY3VzdG9taXphdGlvbnMuXG4gKlxuICogVE9ETzogYWRkIGEgYGxvY2FsU3RvcmFnZWAgdmFyaWFibGUgdG8gZXhwbGljaXRseSBlbmFibGUvZGlzYWJsZSBjb2xvcnNcbiAqL1xuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29tcGxleGl0eVxuZnVuY3Rpb24gdXNlQ29sb3JzKCkge1xuXHQvLyBOQjogSW4gYW4gRWxlY3Ryb24gcHJlbG9hZCBzY3JpcHQsIGRvY3VtZW50IHdpbGwgYmUgZGVmaW5lZCBidXQgbm90IGZ1bGx5XG5cdC8vIGluaXRpYWxpemVkLiBTaW5jZSB3ZSBrbm93IHdlJ3JlIGluIENocm9tZSwgd2UnbGwganVzdCBkZXRlY3QgdGhpcyBjYXNlXG5cdC8vIGV4cGxpY2l0bHlcblx0aWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5wcm9jZXNzICYmICh3aW5kb3cucHJvY2Vzcy50eXBlID09PSAncmVuZGVyZXInIHx8IHdpbmRvdy5wcm9jZXNzLl9fbndqcykpIHtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXG5cdC8vIEludGVybmV0IEV4cGxvcmVyIGFuZCBFZGdlIGRvIG5vdCBzdXBwb3J0IGNvbG9ycy5cblx0aWYgKHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmIG5hdmlnYXRvci51c2VyQWdlbnQgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLm1hdGNoKC8oZWRnZXx0cmlkZW50KVxcLyhcXGQrKS8pKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0Ly8gSXMgd2Via2l0PyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xNjQ1OTYwNi8zNzY3NzNcblx0Ly8gZG9jdW1lbnQgaXMgdW5kZWZpbmVkIGluIHJlYWN0LW5hdGl2ZTogaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlYWN0LW5hdGl2ZS9wdWxsLzE2MzJcblx0cmV0dXJuICh0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnICYmIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLldlYmtpdEFwcGVhcmFuY2UpIHx8XG5cdFx0Ly8gSXMgZmlyZWJ1Zz8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMzk4MTIwLzM3Njc3M1xuXHRcdCh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuY29uc29sZSAmJiAod2luZG93LmNvbnNvbGUuZmlyZWJ1ZyB8fCAod2luZG93LmNvbnNvbGUuZXhjZXB0aW9uICYmIHdpbmRvdy5jb25zb2xlLnRhYmxlKSkpIHx8XG5cdFx0Ly8gSXMgZmlyZWZveCA+PSB2MzE/XG5cdFx0Ly8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9Ub29scy9XZWJfQ29uc29sZSNTdHlsaW5nX21lc3NhZ2VzXG5cdFx0KHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmIG5hdmlnYXRvci51c2VyQWdlbnQgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLm1hdGNoKC9maXJlZm94XFwvKFxcZCspLykgJiYgcGFyc2VJbnQoUmVnRXhwLiQxLCAxMCkgPj0gMzEpIHx8XG5cdFx0Ly8gRG91YmxlIGNoZWNrIHdlYmtpdCBpbiB1c2VyQWdlbnQganVzdCBpbiBjYXNlIHdlIGFyZSBpbiBhIHdvcmtlclxuXHRcdCh0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJiBuYXZpZ2F0b3IudXNlckFnZW50ICYmIG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5tYXRjaCgvYXBwbGV3ZWJraXRcXC8oXFxkKykvKSk7XG59XG5cbi8qKlxuICogQ29sb3JpemUgbG9nIGFyZ3VtZW50cyBpZiBlbmFibGVkLlxuICpcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZnVuY3Rpb24gZm9ybWF0QXJncyhhcmdzKSB7XG5cdGFyZ3NbMF0gPSAodGhpcy51c2VDb2xvcnMgPyAnJWMnIDogJycpICtcblx0XHR0aGlzLm5hbWVzcGFjZSArXG5cdFx0KHRoaXMudXNlQ29sb3JzID8gJyAlYycgOiAnICcpICtcblx0XHRhcmdzWzBdICtcblx0XHQodGhpcy51c2VDb2xvcnMgPyAnJWMgJyA6ICcgJykgK1xuXHRcdCcrJyArIG1vZHVsZS5leHBvcnRzLmh1bWFuaXplKHRoaXMuZGlmZik7XG5cblx0aWYgKCF0aGlzLnVzZUNvbG9ycykge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdGNvbnN0IGMgPSAnY29sb3I6ICcgKyB0aGlzLmNvbG9yO1xuXHRhcmdzLnNwbGljZSgxLCAwLCBjLCAnY29sb3I6IGluaGVyaXQnKTtcblxuXHQvLyBUaGUgZmluYWwgXCIlY1wiIGlzIHNvbWV3aGF0IHRyaWNreSwgYmVjYXVzZSB0aGVyZSBjb3VsZCBiZSBvdGhlclxuXHQvLyBhcmd1bWVudHMgcGFzc2VkIGVpdGhlciBiZWZvcmUgb3IgYWZ0ZXIgdGhlICVjLCBzbyB3ZSBuZWVkIHRvXG5cdC8vIGZpZ3VyZSBvdXQgdGhlIGNvcnJlY3QgaW5kZXggdG8gaW5zZXJ0IHRoZSBDU1MgaW50b1xuXHRsZXQgaW5kZXggPSAwO1xuXHRsZXQgbGFzdEMgPSAwO1xuXHRhcmdzWzBdLnJlcGxhY2UoLyVbYS16QS1aJV0vZywgbWF0Y2ggPT4ge1xuXHRcdGlmIChtYXRjaCA9PT0gJyUlJykge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRpbmRleCsrO1xuXHRcdGlmIChtYXRjaCA9PT0gJyVjJykge1xuXHRcdFx0Ly8gV2Ugb25seSBhcmUgaW50ZXJlc3RlZCBpbiB0aGUgKmxhc3QqICVjXG5cdFx0XHQvLyAodGhlIHVzZXIgbWF5IGhhdmUgcHJvdmlkZWQgdGhlaXIgb3duKVxuXHRcdFx0bGFzdEMgPSBpbmRleDtcblx0XHR9XG5cdH0pO1xuXG5cdGFyZ3Muc3BsaWNlKGxhc3RDLCAwLCBjKTtcbn1cblxuLyoqXG4gKiBJbnZva2VzIGBjb25zb2xlLmRlYnVnKClgIHdoZW4gYXZhaWxhYmxlLlxuICogTm8tb3Agd2hlbiBgY29uc29sZS5kZWJ1Z2AgaXMgbm90IGEgXCJmdW5jdGlvblwiLlxuICogSWYgYGNvbnNvbGUuZGVidWdgIGlzIG5vdCBhdmFpbGFibGUsIGZhbGxzIGJhY2tcbiAqIHRvIGBjb25zb2xlLmxvZ2AuXG4gKlxuICogQGFwaSBwdWJsaWNcbiAqL1xuZXhwb3J0cy5sb2cgPSBjb25zb2xlLmRlYnVnIHx8IGNvbnNvbGUubG9nIHx8ICgoKSA9PiB7fSk7XG5cbi8qKlxuICogU2F2ZSBgbmFtZXNwYWNlc2AuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWVzcGFjZXNcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBzYXZlKG5hbWVzcGFjZXMpIHtcblx0dHJ5IHtcblx0XHRpZiAobmFtZXNwYWNlcykge1xuXHRcdFx0ZXhwb3J0cy5zdG9yYWdlLnNldEl0ZW0oJ2RlYnVnJywgbmFtZXNwYWNlcyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGV4cG9ydHMuc3RvcmFnZS5yZW1vdmVJdGVtKCdkZWJ1ZycpO1xuXHRcdH1cblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHQvLyBTd2FsbG93XG5cdFx0Ly8gWFhYIChAUWl4LSkgc2hvdWxkIHdlIGJlIGxvZ2dpbmcgdGhlc2U/XG5cdH1cbn1cblxuLyoqXG4gKiBMb2FkIGBuYW1lc3BhY2VzYC5cbiAqXG4gKiBAcmV0dXJuIHtTdHJpbmd9IHJldHVybnMgdGhlIHByZXZpb3VzbHkgcGVyc2lzdGVkIGRlYnVnIG1vZGVzXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gbG9hZCgpIHtcblx0bGV0IHI7XG5cdHRyeSB7XG5cdFx0ciA9IGV4cG9ydHMuc3RvcmFnZS5nZXRJdGVtKCdkZWJ1ZycpO1xuXHR9IGNhdGNoIChlcnJvcikge1xuXHRcdC8vIFN3YWxsb3dcblx0XHQvLyBYWFggKEBRaXgtKSBzaG91bGQgd2UgYmUgbG9nZ2luZyB0aGVzZT9cblx0fVxuXG5cdC8vIElmIGRlYnVnIGlzbid0IHNldCBpbiBMUywgYW5kIHdlJ3JlIGluIEVsZWN0cm9uLCB0cnkgdG8gbG9hZCAkREVCVUdcblx0aWYgKCFyICYmIHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJiAnZW52JyBpbiBwcm9jZXNzKSB7XG5cdFx0ciA9IHByb2Nlc3MuZW52LkRFQlVHO1xuXHR9XG5cblx0cmV0dXJuIHI7XG59XG5cbi8qKlxuICogTG9jYWxzdG9yYWdlIGF0dGVtcHRzIHRvIHJldHVybiB0aGUgbG9jYWxzdG9yYWdlLlxuICpcbiAqIFRoaXMgaXMgbmVjZXNzYXJ5IGJlY2F1c2Ugc2FmYXJpIHRocm93c1xuICogd2hlbiBhIHVzZXIgZGlzYWJsZXMgY29va2llcy9sb2NhbHN0b3JhZ2VcbiAqIGFuZCB5b3UgYXR0ZW1wdCB0byBhY2Nlc3MgaXQuXG4gKlxuICogQHJldHVybiB7TG9jYWxTdG9yYWdlfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gbG9jYWxzdG9yYWdlKCkge1xuXHR0cnkge1xuXHRcdC8vIFRWTUxLaXQgKEFwcGxlIFRWIEpTIFJ1bnRpbWUpIGRvZXMgbm90IGhhdmUgYSB3aW5kb3cgb2JqZWN0LCBqdXN0IGxvY2FsU3RvcmFnZSBpbiB0aGUgZ2xvYmFsIGNvbnRleHRcblx0XHQvLyBUaGUgQnJvd3NlciBhbHNvIGhhcyBsb2NhbFN0b3JhZ2UgaW4gdGhlIGdsb2JhbCBjb250ZXh0LlxuXHRcdHJldHVybiBsb2NhbFN0b3JhZ2U7XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0Ly8gU3dhbGxvd1xuXHRcdC8vIFhYWCAoQFFpeC0pIHNob3VsZCB3ZSBiZSBsb2dnaW5nIHRoZXNlP1xuXHR9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9jb21tb24nKShleHBvcnRzKTtcblxuY29uc3Qge2Zvcm1hdHRlcnN9ID0gbW9kdWxlLmV4cG9ydHM7XG5cbi8qKlxuICogTWFwICVqIHRvIGBKU09OLnN0cmluZ2lmeSgpYCwgc2luY2Ugbm8gV2ViIEluc3BlY3RvcnMgZG8gdGhhdCBieSBkZWZhdWx0LlxuICovXG5cbmZvcm1hdHRlcnMuaiA9IGZ1bmN0aW9uICh2KSB7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIEpTT04uc3RyaW5naWZ5KHYpO1xuXHR9IGNhdGNoIChlcnJvcikge1xuXHRcdHJldHVybiAnW1VuZXhwZWN0ZWRKU09OUGFyc2VFcnJvcl06ICcgKyBlcnJvci5tZXNzYWdlO1xuXHR9XG59O1xuIiwiXG4vKipcbiAqIFRoaXMgaXMgdGhlIGNvbW1vbiBsb2dpYyBmb3IgYm90aCB0aGUgTm9kZS5qcyBhbmQgd2ViIGJyb3dzZXJcbiAqIGltcGxlbWVudGF0aW9ucyBvZiBgZGVidWcoKWAuXG4gKi9cblxuZnVuY3Rpb24gc2V0dXAoZW52KSB7XG5cdGNyZWF0ZURlYnVnLmRlYnVnID0gY3JlYXRlRGVidWc7XG5cdGNyZWF0ZURlYnVnLmRlZmF1bHQgPSBjcmVhdGVEZWJ1Zztcblx0Y3JlYXRlRGVidWcuY29lcmNlID0gY29lcmNlO1xuXHRjcmVhdGVEZWJ1Zy5kaXNhYmxlID0gZGlzYWJsZTtcblx0Y3JlYXRlRGVidWcuZW5hYmxlID0gZW5hYmxlO1xuXHRjcmVhdGVEZWJ1Zy5lbmFibGVkID0gZW5hYmxlZDtcblx0Y3JlYXRlRGVidWcuaHVtYW5pemUgPSByZXF1aXJlKCdtcycpO1xuXHRjcmVhdGVEZWJ1Zy5kZXN0cm95ID0gZGVzdHJveTtcblxuXHRPYmplY3Qua2V5cyhlbnYpLmZvckVhY2goa2V5ID0+IHtcblx0XHRjcmVhdGVEZWJ1Z1trZXldID0gZW52W2tleV07XG5cdH0pO1xuXG5cdC8qKlxuXHQqIFRoZSBjdXJyZW50bHkgYWN0aXZlIGRlYnVnIG1vZGUgbmFtZXMsIGFuZCBuYW1lcyB0byBza2lwLlxuXHQqL1xuXG5cdGNyZWF0ZURlYnVnLm5hbWVzID0gW107XG5cdGNyZWF0ZURlYnVnLnNraXBzID0gW107XG5cblx0LyoqXG5cdCogTWFwIG9mIHNwZWNpYWwgXCIlblwiIGhhbmRsaW5nIGZ1bmN0aW9ucywgZm9yIHRoZSBkZWJ1ZyBcImZvcm1hdFwiIGFyZ3VtZW50LlxuXHQqXG5cdCogVmFsaWQga2V5IG5hbWVzIGFyZSBhIHNpbmdsZSwgbG93ZXIgb3IgdXBwZXItY2FzZSBsZXR0ZXIsIGkuZS4gXCJuXCIgYW5kIFwiTlwiLlxuXHQqL1xuXHRjcmVhdGVEZWJ1Zy5mb3JtYXR0ZXJzID0ge307XG5cblx0LyoqXG5cdCogU2VsZWN0cyBhIGNvbG9yIGZvciBhIGRlYnVnIG5hbWVzcGFjZVxuXHQqIEBwYXJhbSB7U3RyaW5nfSBuYW1lc3BhY2UgVGhlIG5hbWVzcGFjZSBzdHJpbmcgZm9yIHRoZSBmb3IgdGhlIGRlYnVnIGluc3RhbmNlIHRvIGJlIGNvbG9yZWRcblx0KiBAcmV0dXJuIHtOdW1iZXJ8U3RyaW5nfSBBbiBBTlNJIGNvbG9yIGNvZGUgZm9yIHRoZSBnaXZlbiBuYW1lc3BhY2Vcblx0KiBAYXBpIHByaXZhdGVcblx0Ki9cblx0ZnVuY3Rpb24gc2VsZWN0Q29sb3IobmFtZXNwYWNlKSB7XG5cdFx0bGV0IGhhc2ggPSAwO1xuXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBuYW1lc3BhY2UubGVuZ3RoOyBpKyspIHtcblx0XHRcdGhhc2ggPSAoKGhhc2ggPDwgNSkgLSBoYXNoKSArIG5hbWVzcGFjZS5jaGFyQ29kZUF0KGkpO1xuXHRcdFx0aGFzaCB8PSAwOyAvLyBDb252ZXJ0IHRvIDMyYml0IGludGVnZXJcblx0XHR9XG5cblx0XHRyZXR1cm4gY3JlYXRlRGVidWcuY29sb3JzW01hdGguYWJzKGhhc2gpICUgY3JlYXRlRGVidWcuY29sb3JzLmxlbmd0aF07XG5cdH1cblx0Y3JlYXRlRGVidWcuc2VsZWN0Q29sb3IgPSBzZWxlY3RDb2xvcjtcblxuXHQvKipcblx0KiBDcmVhdGUgYSBkZWJ1Z2dlciB3aXRoIHRoZSBnaXZlbiBgbmFtZXNwYWNlYC5cblx0KlxuXHQqIEBwYXJhbSB7U3RyaW5nfSBuYW1lc3BhY2Vcblx0KiBAcmV0dXJuIHtGdW5jdGlvbn1cblx0KiBAYXBpIHB1YmxpY1xuXHQqL1xuXHRmdW5jdGlvbiBjcmVhdGVEZWJ1ZyhuYW1lc3BhY2UpIHtcblx0XHRsZXQgcHJldlRpbWU7XG5cdFx0bGV0IGVuYWJsZU92ZXJyaWRlID0gbnVsbDtcblxuXHRcdGZ1bmN0aW9uIGRlYnVnKC4uLmFyZ3MpIHtcblx0XHRcdC8vIERpc2FibGVkP1xuXHRcdFx0aWYgKCFkZWJ1Zy5lbmFibGVkKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Y29uc3Qgc2VsZiA9IGRlYnVnO1xuXG5cdFx0XHQvLyBTZXQgYGRpZmZgIHRpbWVzdGFtcFxuXHRcdFx0Y29uc3QgY3VyciA9IE51bWJlcihuZXcgRGF0ZSgpKTtcblx0XHRcdGNvbnN0IG1zID0gY3VyciAtIChwcmV2VGltZSB8fCBjdXJyKTtcblx0XHRcdHNlbGYuZGlmZiA9IG1zO1xuXHRcdFx0c2VsZi5wcmV2ID0gcHJldlRpbWU7XG5cdFx0XHRzZWxmLmN1cnIgPSBjdXJyO1xuXHRcdFx0cHJldlRpbWUgPSBjdXJyO1xuXG5cdFx0XHRhcmdzWzBdID0gY3JlYXRlRGVidWcuY29lcmNlKGFyZ3NbMF0pO1xuXG5cdFx0XHRpZiAodHlwZW9mIGFyZ3NbMF0gIT09ICdzdHJpbmcnKSB7XG5cdFx0XHRcdC8vIEFueXRoaW5nIGVsc2UgbGV0J3MgaW5zcGVjdCB3aXRoICVPXG5cdFx0XHRcdGFyZ3MudW5zaGlmdCgnJU8nKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQXBwbHkgYW55IGBmb3JtYXR0ZXJzYCB0cmFuc2Zvcm1hdGlvbnNcblx0XHRcdGxldCBpbmRleCA9IDA7XG5cdFx0XHRhcmdzWzBdID0gYXJnc1swXS5yZXBsYWNlKC8lKFthLXpBLVolXSkvZywgKG1hdGNoLCBmb3JtYXQpID0+IHtcblx0XHRcdFx0Ly8gSWYgd2UgZW5jb3VudGVyIGFuIGVzY2FwZWQgJSB0aGVuIGRvbid0IGluY3JlYXNlIHRoZSBhcnJheSBpbmRleFxuXHRcdFx0XHRpZiAobWF0Y2ggPT09ICclJScpIHtcblx0XHRcdFx0XHRyZXR1cm4gJyUnO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGluZGV4Kys7XG5cdFx0XHRcdGNvbnN0IGZvcm1hdHRlciA9IGNyZWF0ZURlYnVnLmZvcm1hdHRlcnNbZm9ybWF0XTtcblx0XHRcdFx0aWYgKHR5cGVvZiBmb3JtYXR0ZXIgPT09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0XHRjb25zdCB2YWwgPSBhcmdzW2luZGV4XTtcblx0XHRcdFx0XHRtYXRjaCA9IGZvcm1hdHRlci5jYWxsKHNlbGYsIHZhbCk7XG5cblx0XHRcdFx0XHQvLyBOb3cgd2UgbmVlZCB0byByZW1vdmUgYGFyZ3NbaW5kZXhdYCBzaW5jZSBpdCdzIGlubGluZWQgaW4gdGhlIGBmb3JtYXRgXG5cdFx0XHRcdFx0YXJncy5zcGxpY2UoaW5kZXgsIDEpO1xuXHRcdFx0XHRcdGluZGV4LS07XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIG1hdGNoO1xuXHRcdFx0fSk7XG5cblx0XHRcdC8vIEFwcGx5IGVudi1zcGVjaWZpYyBmb3JtYXR0aW5nIChjb2xvcnMsIGV0Yy4pXG5cdFx0XHRjcmVhdGVEZWJ1Zy5mb3JtYXRBcmdzLmNhbGwoc2VsZiwgYXJncyk7XG5cblx0XHRcdGNvbnN0IGxvZ0ZuID0gc2VsZi5sb2cgfHwgY3JlYXRlRGVidWcubG9nO1xuXHRcdFx0bG9nRm4uYXBwbHkoc2VsZiwgYXJncyk7XG5cdFx0fVxuXG5cdFx0ZGVidWcubmFtZXNwYWNlID0gbmFtZXNwYWNlO1xuXHRcdGRlYnVnLnVzZUNvbG9ycyA9IGNyZWF0ZURlYnVnLnVzZUNvbG9ycygpO1xuXHRcdGRlYnVnLmNvbG9yID0gY3JlYXRlRGVidWcuc2VsZWN0Q29sb3IobmFtZXNwYWNlKTtcblx0XHRkZWJ1Zy5leHRlbmQgPSBleHRlbmQ7XG5cdFx0ZGVidWcuZGVzdHJveSA9IGNyZWF0ZURlYnVnLmRlc3Ryb3k7IC8vIFhYWCBUZW1wb3JhcnkuIFdpbGwgYmUgcmVtb3ZlZCBpbiB0aGUgbmV4dCBtYWpvciByZWxlYXNlLlxuXG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGRlYnVnLCAnZW5hYmxlZCcsIHtcblx0XHRcdGVudW1lcmFibGU6IHRydWUsXG5cdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuXHRcdFx0Z2V0OiAoKSA9PiBlbmFibGVPdmVycmlkZSA9PT0gbnVsbCA/IGNyZWF0ZURlYnVnLmVuYWJsZWQobmFtZXNwYWNlKSA6IGVuYWJsZU92ZXJyaWRlLFxuXHRcdFx0c2V0OiB2ID0+IHtcblx0XHRcdFx0ZW5hYmxlT3ZlcnJpZGUgPSB2O1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0Ly8gRW52LXNwZWNpZmljIGluaXRpYWxpemF0aW9uIGxvZ2ljIGZvciBkZWJ1ZyBpbnN0YW5jZXNcblx0XHRpZiAodHlwZW9mIGNyZWF0ZURlYnVnLmluaXQgPT09ICdmdW5jdGlvbicpIHtcblx0XHRcdGNyZWF0ZURlYnVnLmluaXQoZGVidWcpO1xuXHRcdH1cblxuXHRcdHJldHVybiBkZWJ1Zztcblx0fVxuXG5cdGZ1bmN0aW9uIGV4dGVuZChuYW1lc3BhY2UsIGRlbGltaXRlcikge1xuXHRcdGNvbnN0IG5ld0RlYnVnID0gY3JlYXRlRGVidWcodGhpcy5uYW1lc3BhY2UgKyAodHlwZW9mIGRlbGltaXRlciA9PT0gJ3VuZGVmaW5lZCcgPyAnOicgOiBkZWxpbWl0ZXIpICsgbmFtZXNwYWNlKTtcblx0XHRuZXdEZWJ1Zy5sb2cgPSB0aGlzLmxvZztcblx0XHRyZXR1cm4gbmV3RGVidWc7XG5cdH1cblxuXHQvKipcblx0KiBFbmFibGVzIGEgZGVidWcgbW9kZSBieSBuYW1lc3BhY2VzLiBUaGlzIGNhbiBpbmNsdWRlIG1vZGVzXG5cdCogc2VwYXJhdGVkIGJ5IGEgY29sb24gYW5kIHdpbGRjYXJkcy5cblx0KlxuXHQqIEBwYXJhbSB7U3RyaW5nfSBuYW1lc3BhY2VzXG5cdCogQGFwaSBwdWJsaWNcblx0Ki9cblx0ZnVuY3Rpb24gZW5hYmxlKG5hbWVzcGFjZXMpIHtcblx0XHRjcmVhdGVEZWJ1Zy5zYXZlKG5hbWVzcGFjZXMpO1xuXG5cdFx0Y3JlYXRlRGVidWcubmFtZXMgPSBbXTtcblx0XHRjcmVhdGVEZWJ1Zy5za2lwcyA9IFtdO1xuXG5cdFx0bGV0IGk7XG5cdFx0Y29uc3Qgc3BsaXQgPSAodHlwZW9mIG5hbWVzcGFjZXMgPT09ICdzdHJpbmcnID8gbmFtZXNwYWNlcyA6ICcnKS5zcGxpdCgvW1xccyxdKy8pO1xuXHRcdGNvbnN0IGxlbiA9IHNwbGl0Lmxlbmd0aDtcblxuXHRcdGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuXHRcdFx0aWYgKCFzcGxpdFtpXSkge1xuXHRcdFx0XHQvLyBpZ25vcmUgZW1wdHkgc3RyaW5nc1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblxuXHRcdFx0bmFtZXNwYWNlcyA9IHNwbGl0W2ldLnJlcGxhY2UoL1xcKi9nLCAnLio/Jyk7XG5cblx0XHRcdGlmIChuYW1lc3BhY2VzWzBdID09PSAnLScpIHtcblx0XHRcdFx0Y3JlYXRlRGVidWcuc2tpcHMucHVzaChuZXcgUmVnRXhwKCdeJyArIG5hbWVzcGFjZXMuc3Vic3RyKDEpICsgJyQnKSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjcmVhdGVEZWJ1Zy5uYW1lcy5wdXNoKG5ldyBSZWdFeHAoJ14nICsgbmFtZXNwYWNlcyArICckJykpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQqIERpc2FibGUgZGVidWcgb3V0cHV0LlxuXHQqXG5cdCogQHJldHVybiB7U3RyaW5nfSBuYW1lc3BhY2VzXG5cdCogQGFwaSBwdWJsaWNcblx0Ki9cblx0ZnVuY3Rpb24gZGlzYWJsZSgpIHtcblx0XHRjb25zdCBuYW1lc3BhY2VzID0gW1xuXHRcdFx0Li4uY3JlYXRlRGVidWcubmFtZXMubWFwKHRvTmFtZXNwYWNlKSxcblx0XHRcdC4uLmNyZWF0ZURlYnVnLnNraXBzLm1hcCh0b05hbWVzcGFjZSkubWFwKG5hbWVzcGFjZSA9PiAnLScgKyBuYW1lc3BhY2UpXG5cdFx0XS5qb2luKCcsJyk7XG5cdFx0Y3JlYXRlRGVidWcuZW5hYmxlKCcnKTtcblx0XHRyZXR1cm4gbmFtZXNwYWNlcztcblx0fVxuXG5cdC8qKlxuXHQqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gbW9kZSBuYW1lIGlzIGVuYWJsZWQsIGZhbHNlIG90aGVyd2lzZS5cblx0KlxuXHQqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG5cdCogQHJldHVybiB7Qm9vbGVhbn1cblx0KiBAYXBpIHB1YmxpY1xuXHQqL1xuXHRmdW5jdGlvbiBlbmFibGVkKG5hbWUpIHtcblx0XHRpZiAobmFtZVtuYW1lLmxlbmd0aCAtIDFdID09PSAnKicpIHtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblxuXHRcdGxldCBpO1xuXHRcdGxldCBsZW47XG5cblx0XHRmb3IgKGkgPSAwLCBsZW4gPSBjcmVhdGVEZWJ1Zy5za2lwcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuXHRcdFx0aWYgKGNyZWF0ZURlYnVnLnNraXBzW2ldLnRlc3QobmFtZSkpIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGZvciAoaSA9IDAsIGxlbiA9IGNyZWF0ZURlYnVnLm5hbWVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG5cdFx0XHRpZiAoY3JlYXRlRGVidWcubmFtZXNbaV0udGVzdChuYW1lKSkge1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHQvKipcblx0KiBDb252ZXJ0IHJlZ2V4cCB0byBuYW1lc3BhY2Vcblx0KlxuXHQqIEBwYXJhbSB7UmVnRXhwfSByZWd4ZXBcblx0KiBAcmV0dXJuIHtTdHJpbmd9IG5hbWVzcGFjZVxuXHQqIEBhcGkgcHJpdmF0ZVxuXHQqL1xuXHRmdW5jdGlvbiB0b05hbWVzcGFjZShyZWdleHApIHtcblx0XHRyZXR1cm4gcmVnZXhwLnRvU3RyaW5nKClcblx0XHRcdC5zdWJzdHJpbmcoMiwgcmVnZXhwLnRvU3RyaW5nKCkubGVuZ3RoIC0gMilcblx0XHRcdC5yZXBsYWNlKC9cXC5cXCpcXD8kLywgJyonKTtcblx0fVxuXG5cdC8qKlxuXHQqIENvZXJjZSBgdmFsYC5cblx0KlxuXHQqIEBwYXJhbSB7TWl4ZWR9IHZhbFxuXHQqIEByZXR1cm4ge01peGVkfVxuXHQqIEBhcGkgcHJpdmF0ZVxuXHQqL1xuXHRmdW5jdGlvbiBjb2VyY2UodmFsKSB7XG5cdFx0aWYgKHZhbCBpbnN0YW5jZW9mIEVycm9yKSB7XG5cdFx0XHRyZXR1cm4gdmFsLnN0YWNrIHx8IHZhbC5tZXNzYWdlO1xuXHRcdH1cblx0XHRyZXR1cm4gdmFsO1xuXHR9XG5cblx0LyoqXG5cdCogWFhYIERPIE5PVCBVU0UuIFRoaXMgaXMgYSB0ZW1wb3Jhcnkgc3R1YiBmdW5jdGlvbi5cblx0KiBYWFggSXQgV0lMTCBiZSByZW1vdmVkIGluIHRoZSBuZXh0IG1ham9yIHJlbGVhc2UuXG5cdCovXG5cdGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG5cdFx0Y29uc29sZS53YXJuKCdJbnN0YW5jZSBtZXRob2QgYGRlYnVnLmRlc3Ryb3koKWAgaXMgZGVwcmVjYXRlZCBhbmQgbm8gbG9uZ2VyIGRvZXMgYW55dGhpbmcuIEl0IHdpbGwgYmUgcmVtb3ZlZCBpbiB0aGUgbmV4dCBtYWpvciB2ZXJzaW9uIG9mIGBkZWJ1Z2AuJyk7XG5cdH1cblxuXHRjcmVhdGVEZWJ1Zy5lbmFibGUoY3JlYXRlRGVidWcubG9hZCgpKTtcblxuXHRyZXR1cm4gY3JlYXRlRGVidWc7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gc2V0dXA7XG4iLCIvKipcbiAqIEhlbHBlcnMuXG4gKi9cblxudmFyIHMgPSAxMDAwO1xudmFyIG0gPSBzICogNjA7XG52YXIgaCA9IG0gKiA2MDtcbnZhciBkID0gaCAqIDI0O1xudmFyIHcgPSBkICogNztcbnZhciB5ID0gZCAqIDM2NS4yNTtcblxuLyoqXG4gKiBQYXJzZSBvciBmb3JtYXQgdGhlIGdpdmVuIGB2YWxgLlxuICpcbiAqIE9wdGlvbnM6XG4gKlxuICogIC0gYGxvbmdgIHZlcmJvc2UgZm9ybWF0dGluZyBbZmFsc2VdXG4gKlxuICogQHBhcmFtIHtTdHJpbmd8TnVtYmVyfSB2YWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAqIEB0aHJvd3Mge0Vycm9yfSB0aHJvdyBhbiBlcnJvciBpZiB2YWwgaXMgbm90IGEgbm9uLWVtcHR5IHN0cmluZyBvciBhIG51bWJlclxuICogQHJldHVybiB7U3RyaW5nfE51bWJlcn1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbih2YWwsIG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIHZhciB0eXBlID0gdHlwZW9mIHZhbDtcbiAgaWYgKHR5cGUgPT09ICdzdHJpbmcnICYmIHZhbC5sZW5ndGggPiAwKSB7XG4gICAgcmV0dXJuIHBhcnNlKHZhbCk7XG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gJ251bWJlcicgJiYgaXNGaW5pdGUodmFsKSkge1xuICAgIHJldHVybiBvcHRpb25zLmxvbmcgPyBmbXRMb25nKHZhbCkgOiBmbXRTaG9ydCh2YWwpO1xuICB9XG4gIHRocm93IG5ldyBFcnJvcihcbiAgICAndmFsIGlzIG5vdCBhIG5vbi1lbXB0eSBzdHJpbmcgb3IgYSB2YWxpZCBudW1iZXIuIHZhbD0nICtcbiAgICAgIEpTT04uc3RyaW5naWZ5KHZhbClcbiAgKTtcbn07XG5cbi8qKlxuICogUGFyc2UgdGhlIGdpdmVuIGBzdHJgIGFuZCByZXR1cm4gbWlsbGlzZWNvbmRzLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge051bWJlcn1cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIHBhcnNlKHN0cikge1xuICBzdHIgPSBTdHJpbmcoc3RyKTtcbiAgaWYgKHN0ci5sZW5ndGggPiAxMDApIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIG1hdGNoID0gL14oLT8oPzpcXGQrKT9cXC4/XFxkKykgKihtaWxsaXNlY29uZHM/fG1zZWNzP3xtc3xzZWNvbmRzP3xzZWNzP3xzfG1pbnV0ZXM/fG1pbnM/fG18aG91cnM/fGhycz98aHxkYXlzP3xkfHdlZWtzP3x3fHllYXJzP3x5cnM/fHkpPyQvaS5leGVjKFxuICAgIHN0clxuICApO1xuICBpZiAoIW1hdGNoKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBuID0gcGFyc2VGbG9hdChtYXRjaFsxXSk7XG4gIHZhciB0eXBlID0gKG1hdGNoWzJdIHx8ICdtcycpLnRvTG93ZXJDYXNlKCk7XG4gIHN3aXRjaCAodHlwZSkge1xuICAgIGNhc2UgJ3llYXJzJzpcbiAgICBjYXNlICd5ZWFyJzpcbiAgICBjYXNlICd5cnMnOlxuICAgIGNhc2UgJ3lyJzpcbiAgICBjYXNlICd5JzpcbiAgICAgIHJldHVybiBuICogeTtcbiAgICBjYXNlICd3ZWVrcyc6XG4gICAgY2FzZSAnd2Vlayc6XG4gICAgY2FzZSAndyc6XG4gICAgICByZXR1cm4gbiAqIHc7XG4gICAgY2FzZSAnZGF5cyc6XG4gICAgY2FzZSAnZGF5JzpcbiAgICBjYXNlICdkJzpcbiAgICAgIHJldHVybiBuICogZDtcbiAgICBjYXNlICdob3Vycyc6XG4gICAgY2FzZSAnaG91cic6XG4gICAgY2FzZSAnaHJzJzpcbiAgICBjYXNlICdocic6XG4gICAgY2FzZSAnaCc6XG4gICAgICByZXR1cm4gbiAqIGg7XG4gICAgY2FzZSAnbWludXRlcyc6XG4gICAgY2FzZSAnbWludXRlJzpcbiAgICBjYXNlICdtaW5zJzpcbiAgICBjYXNlICdtaW4nOlxuICAgIGNhc2UgJ20nOlxuICAgICAgcmV0dXJuIG4gKiBtO1xuICAgIGNhc2UgJ3NlY29uZHMnOlxuICAgIGNhc2UgJ3NlY29uZCc6XG4gICAgY2FzZSAnc2Vjcyc6XG4gICAgY2FzZSAnc2VjJzpcbiAgICBjYXNlICdzJzpcbiAgICAgIHJldHVybiBuICogcztcbiAgICBjYXNlICdtaWxsaXNlY29uZHMnOlxuICAgIGNhc2UgJ21pbGxpc2Vjb25kJzpcbiAgICBjYXNlICdtc2Vjcyc6XG4gICAgY2FzZSAnbXNlYyc6XG4gICAgY2FzZSAnbXMnOlxuICAgICAgcmV0dXJuIG47XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbn1cblxuLyoqXG4gKiBTaG9ydCBmb3JtYXQgZm9yIGBtc2AuXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IG1zXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBmbXRTaG9ydChtcykge1xuICB2YXIgbXNBYnMgPSBNYXRoLmFicyhtcyk7XG4gIGlmIChtc0FicyA+PSBkKSB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQobXMgLyBkKSArICdkJztcbiAgfVxuICBpZiAobXNBYnMgPj0gaCkge1xuICAgIHJldHVybiBNYXRoLnJvdW5kKG1zIC8gaCkgKyAnaCc7XG4gIH1cbiAgaWYgKG1zQWJzID49IG0pIHtcbiAgICByZXR1cm4gTWF0aC5yb3VuZChtcyAvIG0pICsgJ20nO1xuICB9XG4gIGlmIChtc0FicyA+PSBzKSB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQobXMgLyBzKSArICdzJztcbiAgfVxuICByZXR1cm4gbXMgKyAnbXMnO1xufVxuXG4vKipcbiAqIExvbmcgZm9ybWF0IGZvciBgbXNgLlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBtc1xuICogQHJldHVybiB7U3RyaW5nfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gZm10TG9uZyhtcykge1xuICB2YXIgbXNBYnMgPSBNYXRoLmFicyhtcyk7XG4gIGlmIChtc0FicyA+PSBkKSB7XG4gICAgcmV0dXJuIHBsdXJhbChtcywgbXNBYnMsIGQsICdkYXknKTtcbiAgfVxuICBpZiAobXNBYnMgPj0gaCkge1xuICAgIHJldHVybiBwbHVyYWwobXMsIG1zQWJzLCBoLCAnaG91cicpO1xuICB9XG4gIGlmIChtc0FicyA+PSBtKSB7XG4gICAgcmV0dXJuIHBsdXJhbChtcywgbXNBYnMsIG0sICdtaW51dGUnKTtcbiAgfVxuICBpZiAobXNBYnMgPj0gcykge1xuICAgIHJldHVybiBwbHVyYWwobXMsIG1zQWJzLCBzLCAnc2Vjb25kJyk7XG4gIH1cbiAgcmV0dXJuIG1zICsgJyBtcyc7XG59XG5cbi8qKlxuICogUGx1cmFsaXphdGlvbiBoZWxwZXIuXG4gKi9cblxuZnVuY3Rpb24gcGx1cmFsKG1zLCBtc0FicywgbiwgbmFtZSkge1xuICB2YXIgaXNQbHVyYWwgPSBtc0FicyA+PSBuICogMS41O1xuICByZXR1cm4gTWF0aC5yb3VuZChtcyAvIG4pICsgJyAnICsgbmFtZSArIChpc1BsdXJhbCA/ICdzJyA6ICcnKTtcbn1cbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5yZWNvbnN0cnVjdFBhY2tldCA9IGV4cG9ydHMuZGVjb25zdHJ1Y3RQYWNrZXQgPSB2b2lkIDA7XG5jb25zdCBpc19iaW5hcnlfMSA9IHJlcXVpcmUoXCIuL2lzLWJpbmFyeVwiKTtcbi8qKlxuICogUmVwbGFjZXMgZXZlcnkgQnVmZmVyIHwgQXJyYXlCdWZmZXIgfCBCbG9iIHwgRmlsZSBpbiBwYWNrZXQgd2l0aCBhIG51bWJlcmVkIHBsYWNlaG9sZGVyLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwYWNrZXQgLSBzb2NrZXQuaW8gZXZlbnQgcGFja2V0XG4gKiBAcmV0dXJuIHtPYmplY3R9IHdpdGggZGVjb25zdHJ1Y3RlZCBwYWNrZXQgYW5kIGxpc3Qgb2YgYnVmZmVyc1xuICogQHB1YmxpY1xuICovXG5mdW5jdGlvbiBkZWNvbnN0cnVjdFBhY2tldChwYWNrZXQpIHtcbiAgICBjb25zdCBidWZmZXJzID0gW107XG4gICAgY29uc3QgcGFja2V0RGF0YSA9IHBhY2tldC5kYXRhO1xuICAgIGNvbnN0IHBhY2sgPSBwYWNrZXQ7XG4gICAgcGFjay5kYXRhID0gX2RlY29uc3RydWN0UGFja2V0KHBhY2tldERhdGEsIGJ1ZmZlcnMpO1xuICAgIHBhY2suYXR0YWNobWVudHMgPSBidWZmZXJzLmxlbmd0aDsgLy8gbnVtYmVyIG9mIGJpbmFyeSAnYXR0YWNobWVudHMnXG4gICAgcmV0dXJuIHsgcGFja2V0OiBwYWNrLCBidWZmZXJzOiBidWZmZXJzIH07XG59XG5leHBvcnRzLmRlY29uc3RydWN0UGFja2V0ID0gZGVjb25zdHJ1Y3RQYWNrZXQ7XG5mdW5jdGlvbiBfZGVjb25zdHJ1Y3RQYWNrZXQoZGF0YSwgYnVmZmVycykge1xuICAgIGlmICghZGF0YSlcbiAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgaWYgKGlzX2JpbmFyeV8xLmlzQmluYXJ5KGRhdGEpKSB7XG4gICAgICAgIGNvbnN0IHBsYWNlaG9sZGVyID0geyBfcGxhY2Vob2xkZXI6IHRydWUsIG51bTogYnVmZmVycy5sZW5ndGggfTtcbiAgICAgICAgYnVmZmVycy5wdXNoKGRhdGEpO1xuICAgICAgICByZXR1cm4gcGxhY2Vob2xkZXI7XG4gICAgfVxuICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoZGF0YSkpIHtcbiAgICAgICAgY29uc3QgbmV3RGF0YSA9IG5ldyBBcnJheShkYXRhLmxlbmd0aCk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbmV3RGF0YVtpXSA9IF9kZWNvbnN0cnVjdFBhY2tldChkYXRhW2ldLCBidWZmZXJzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3RGF0YTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIGRhdGEgPT09IFwib2JqZWN0XCIgJiYgIShkYXRhIGluc3RhbmNlb2YgRGF0ZSkpIHtcbiAgICAgICAgY29uc3QgbmV3RGF0YSA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBkYXRhKSB7XG4gICAgICAgICAgICBpZiAoZGF0YS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICAgICAgbmV3RGF0YVtrZXldID0gX2RlY29uc3RydWN0UGFja2V0KGRhdGFba2V5XSwgYnVmZmVycyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ld0RhdGE7XG4gICAgfVxuICAgIHJldHVybiBkYXRhO1xufVxuLyoqXG4gKiBSZWNvbnN0cnVjdHMgYSBiaW5hcnkgcGFja2V0IGZyb20gaXRzIHBsYWNlaG9sZGVyIHBhY2tldCBhbmQgYnVmZmVyc1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwYWNrZXQgLSBldmVudCBwYWNrZXQgd2l0aCBwbGFjZWhvbGRlcnNcbiAqIEBwYXJhbSB7QXJyYXl9IGJ1ZmZlcnMgLSBiaW5hcnkgYnVmZmVycyB0byBwdXQgaW4gcGxhY2Vob2xkZXIgcG9zaXRpb25zXG4gKiBAcmV0dXJuIHtPYmplY3R9IHJlY29uc3RydWN0ZWQgcGFja2V0XG4gKiBAcHVibGljXG4gKi9cbmZ1bmN0aW9uIHJlY29uc3RydWN0UGFja2V0KHBhY2tldCwgYnVmZmVycykge1xuICAgIHBhY2tldC5kYXRhID0gX3JlY29uc3RydWN0UGFja2V0KHBhY2tldC5kYXRhLCBidWZmZXJzKTtcbiAgICBwYWNrZXQuYXR0YWNobWVudHMgPSB1bmRlZmluZWQ7IC8vIG5vIGxvbmdlciB1c2VmdWxcbiAgICByZXR1cm4gcGFja2V0O1xufVxuZXhwb3J0cy5yZWNvbnN0cnVjdFBhY2tldCA9IHJlY29uc3RydWN0UGFja2V0O1xuZnVuY3Rpb24gX3JlY29uc3RydWN0UGFja2V0KGRhdGEsIGJ1ZmZlcnMpIHtcbiAgICBpZiAoIWRhdGEpXG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgIGlmIChkYXRhICYmIGRhdGEuX3BsYWNlaG9sZGVyKSB7XG4gICAgICAgIHJldHVybiBidWZmZXJzW2RhdGEubnVtXTsgLy8gYXBwcm9wcmlhdGUgYnVmZmVyIChzaG91bGQgYmUgbmF0dXJhbCBvcmRlciBhbnl3YXkpXG4gICAgfVxuICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoZGF0YSkpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBkYXRhW2ldID0gX3JlY29uc3RydWN0UGFja2V0KGRhdGFbaV0sIGJ1ZmZlcnMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBkYXRhID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIGRhdGEpIHtcbiAgICAgICAgICAgIGlmIChkYXRhLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgICAgICBkYXRhW2tleV0gPSBfcmVjb25zdHJ1Y3RQYWNrZXQoZGF0YVtrZXldLCBidWZmZXJzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZGF0YTtcbn1cbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5EZWNvZGVyID0gZXhwb3J0cy5FbmNvZGVyID0gZXhwb3J0cy5QYWNrZXRUeXBlID0gZXhwb3J0cy5wcm90b2NvbCA9IHZvaWQgMDtcbmNvbnN0IEVtaXR0ZXIgPSByZXF1aXJlKFwiY29tcG9uZW50LWVtaXR0ZXJcIik7XG5jb25zdCBiaW5hcnlfMSA9IHJlcXVpcmUoXCIuL2JpbmFyeVwiKTtcbmNvbnN0IGlzX2JpbmFyeV8xID0gcmVxdWlyZShcIi4vaXMtYmluYXJ5XCIpO1xuY29uc3QgZGVidWcgPSByZXF1aXJlKFwiZGVidWdcIikoXCJzb2NrZXQuaW8tcGFyc2VyXCIpO1xuLyoqXG4gKiBQcm90b2NvbCB2ZXJzaW9uLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0cy5wcm90b2NvbCA9IDU7XG52YXIgUGFja2V0VHlwZTtcbihmdW5jdGlvbiAoUGFja2V0VHlwZSkge1xuICAgIFBhY2tldFR5cGVbUGFja2V0VHlwZVtcIkNPTk5FQ1RcIl0gPSAwXSA9IFwiQ09OTkVDVFwiO1xuICAgIFBhY2tldFR5cGVbUGFja2V0VHlwZVtcIkRJU0NPTk5FQ1RcIl0gPSAxXSA9IFwiRElTQ09OTkVDVFwiO1xuICAgIFBhY2tldFR5cGVbUGFja2V0VHlwZVtcIkVWRU5UXCJdID0gMl0gPSBcIkVWRU5UXCI7XG4gICAgUGFja2V0VHlwZVtQYWNrZXRUeXBlW1wiQUNLXCJdID0gM10gPSBcIkFDS1wiO1xuICAgIFBhY2tldFR5cGVbUGFja2V0VHlwZVtcIkNPTk5FQ1RfRVJST1JcIl0gPSA0XSA9IFwiQ09OTkVDVF9FUlJPUlwiO1xuICAgIFBhY2tldFR5cGVbUGFja2V0VHlwZVtcIkJJTkFSWV9FVkVOVFwiXSA9IDVdID0gXCJCSU5BUllfRVZFTlRcIjtcbiAgICBQYWNrZXRUeXBlW1BhY2tldFR5cGVbXCJCSU5BUllfQUNLXCJdID0gNl0gPSBcIkJJTkFSWV9BQ0tcIjtcbn0pKFBhY2tldFR5cGUgPSBleHBvcnRzLlBhY2tldFR5cGUgfHwgKGV4cG9ydHMuUGFja2V0VHlwZSA9IHt9KSk7XG4vKipcbiAqIEEgc29ja2V0LmlvIEVuY29kZXIgaW5zdGFuY2VcbiAqL1xuY2xhc3MgRW5jb2RlciB7XG4gICAgLyoqXG4gICAgICogRW5jb2RlIGEgcGFja2V0IGFzIGEgc2luZ2xlIHN0cmluZyBpZiBub24tYmluYXJ5LCBvciBhcyBhXG4gICAgICogYnVmZmVyIHNlcXVlbmNlLCBkZXBlbmRpbmcgb24gcGFja2V0IHR5cGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqIC0gcGFja2V0IG9iamVjdFxuICAgICAqL1xuICAgIGVuY29kZShvYmopIHtcbiAgICAgICAgZGVidWcoXCJlbmNvZGluZyBwYWNrZXQgJWpcIiwgb2JqKTtcbiAgICAgICAgaWYgKG9iai50eXBlID09PSBQYWNrZXRUeXBlLkVWRU5UIHx8IG9iai50eXBlID09PSBQYWNrZXRUeXBlLkFDSykge1xuICAgICAgICAgICAgaWYgKGlzX2JpbmFyeV8xLmhhc0JpbmFyeShvYmopKSB7XG4gICAgICAgICAgICAgICAgb2JqLnR5cGUgPVxuICAgICAgICAgICAgICAgICAgICBvYmoudHlwZSA9PT0gUGFja2V0VHlwZS5FVkVOVFxuICAgICAgICAgICAgICAgICAgICAgICAgPyBQYWNrZXRUeXBlLkJJTkFSWV9FVkVOVFxuICAgICAgICAgICAgICAgICAgICAgICAgOiBQYWNrZXRUeXBlLkJJTkFSWV9BQ0s7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlQXNCaW5hcnkob2JqKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW3RoaXMuZW5jb2RlQXNTdHJpbmcob2JqKV07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVuY29kZSBwYWNrZXQgYXMgc3RyaW5nLlxuICAgICAqL1xuICAgIGVuY29kZUFzU3RyaW5nKG9iaikge1xuICAgICAgICAvLyBmaXJzdCBpcyB0eXBlXG4gICAgICAgIGxldCBzdHIgPSBcIlwiICsgb2JqLnR5cGU7XG4gICAgICAgIC8vIGF0dGFjaG1lbnRzIGlmIHdlIGhhdmUgdGhlbVxuICAgICAgICBpZiAob2JqLnR5cGUgPT09IFBhY2tldFR5cGUuQklOQVJZX0VWRU5UIHx8XG4gICAgICAgICAgICBvYmoudHlwZSA9PT0gUGFja2V0VHlwZS5CSU5BUllfQUNLKSB7XG4gICAgICAgICAgICBzdHIgKz0gb2JqLmF0dGFjaG1lbnRzICsgXCItXCI7XG4gICAgICAgIH1cbiAgICAgICAgLy8gaWYgd2UgaGF2ZSBhIG5hbWVzcGFjZSBvdGhlciB0aGFuIGAvYFxuICAgICAgICAvLyB3ZSBhcHBlbmQgaXQgZm9sbG93ZWQgYnkgYSBjb21tYSBgLGBcbiAgICAgICAgaWYgKG9iai5uc3AgJiYgXCIvXCIgIT09IG9iai5uc3ApIHtcbiAgICAgICAgICAgIHN0ciArPSBvYmoubnNwICsgXCIsXCI7XG4gICAgICAgIH1cbiAgICAgICAgLy8gaW1tZWRpYXRlbHkgZm9sbG93ZWQgYnkgdGhlIGlkXG4gICAgICAgIGlmIChudWxsICE9IG9iai5pZCkge1xuICAgICAgICAgICAgc3RyICs9IG9iai5pZDtcbiAgICAgICAgfVxuICAgICAgICAvLyBqc29uIGRhdGFcbiAgICAgICAgaWYgKG51bGwgIT0gb2JqLmRhdGEpIHtcbiAgICAgICAgICAgIHN0ciArPSBKU09OLnN0cmluZ2lmeShvYmouZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgZGVidWcoXCJlbmNvZGVkICVqIGFzICVzXCIsIG9iaiwgc3RyKTtcbiAgICAgICAgcmV0dXJuIHN0cjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRW5jb2RlIHBhY2tldCBhcyAnYnVmZmVyIHNlcXVlbmNlJyBieSByZW1vdmluZyBibG9icywgYW5kXG4gICAgICogZGVjb25zdHJ1Y3RpbmcgcGFja2V0IGludG8gb2JqZWN0IHdpdGggcGxhY2Vob2xkZXJzIGFuZFxuICAgICAqIGEgbGlzdCBvZiBidWZmZXJzLlxuICAgICAqL1xuICAgIGVuY29kZUFzQmluYXJ5KG9iaikge1xuICAgICAgICBjb25zdCBkZWNvbnN0cnVjdGlvbiA9IGJpbmFyeV8xLmRlY29uc3RydWN0UGFja2V0KG9iaik7XG4gICAgICAgIGNvbnN0IHBhY2sgPSB0aGlzLmVuY29kZUFzU3RyaW5nKGRlY29uc3RydWN0aW9uLnBhY2tldCk7XG4gICAgICAgIGNvbnN0IGJ1ZmZlcnMgPSBkZWNvbnN0cnVjdGlvbi5idWZmZXJzO1xuICAgICAgICBidWZmZXJzLnVuc2hpZnQocGFjayk7IC8vIGFkZCBwYWNrZXQgaW5mbyB0byBiZWdpbm5pbmcgb2YgZGF0YSBsaXN0XG4gICAgICAgIHJldHVybiBidWZmZXJzOyAvLyB3cml0ZSBhbGwgdGhlIGJ1ZmZlcnNcbiAgICB9XG59XG5leHBvcnRzLkVuY29kZXIgPSBFbmNvZGVyO1xuLyoqXG4gKiBBIHNvY2tldC5pbyBEZWNvZGVyIGluc3RhbmNlXG4gKlxuICogQHJldHVybiB7T2JqZWN0fSBkZWNvZGVyXG4gKi9cbmNsYXNzIERlY29kZXIgZXh0ZW5kcyBFbWl0dGVyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVjb2RlcyBhbiBlbmNvZGVkIHBhY2tldCBzdHJpbmcgaW50byBwYWNrZXQgSlNPTi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBvYmogLSBlbmNvZGVkIHBhY2tldFxuICAgICAqL1xuICAgIGFkZChvYmopIHtcbiAgICAgICAgbGV0IHBhY2tldDtcbiAgICAgICAgaWYgKHR5cGVvZiBvYmogPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHBhY2tldCA9IHRoaXMuZGVjb2RlU3RyaW5nKG9iaik7XG4gICAgICAgICAgICBpZiAocGFja2V0LnR5cGUgPT09IFBhY2tldFR5cGUuQklOQVJZX0VWRU5UIHx8XG4gICAgICAgICAgICAgICAgcGFja2V0LnR5cGUgPT09IFBhY2tldFR5cGUuQklOQVJZX0FDSykge1xuICAgICAgICAgICAgICAgIC8vIGJpbmFyeSBwYWNrZXQncyBqc29uXG4gICAgICAgICAgICAgICAgdGhpcy5yZWNvbnN0cnVjdG9yID0gbmV3IEJpbmFyeVJlY29uc3RydWN0b3IocGFja2V0KTtcbiAgICAgICAgICAgICAgICAvLyBubyBhdHRhY2htZW50cywgbGFiZWxlZCBiaW5hcnkgYnV0IG5vIGJpbmFyeSBkYXRhIHRvIGZvbGxvd1xuICAgICAgICAgICAgICAgIGlmIChwYWNrZXQuYXR0YWNobWVudHMgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgc3VwZXIuZW1pdChcImRlY29kZWRcIiwgcGFja2V0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBub24tYmluYXJ5IGZ1bGwgcGFja2V0XG4gICAgICAgICAgICAgICAgc3VwZXIuZW1pdChcImRlY29kZWRcIiwgcGFja2V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc19iaW5hcnlfMS5pc0JpbmFyeShvYmopIHx8IG9iai5iYXNlNjQpIHtcbiAgICAgICAgICAgIC8vIHJhdyBiaW5hcnkgZGF0YVxuICAgICAgICAgICAgaWYgKCF0aGlzLnJlY29uc3RydWN0b3IpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJnb3QgYmluYXJ5IGRhdGEgd2hlbiBub3QgcmVjb25zdHJ1Y3RpbmcgYSBwYWNrZXRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBwYWNrZXQgPSB0aGlzLnJlY29uc3RydWN0b3IudGFrZUJpbmFyeURhdGEob2JqKTtcbiAgICAgICAgICAgICAgICBpZiAocGFja2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHJlY2VpdmVkIGZpbmFsIGJ1ZmZlclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlY29uc3RydWN0b3IgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBzdXBlci5lbWl0KFwiZGVjb2RlZFwiLCBwYWNrZXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVua25vd24gdHlwZTogXCIgKyBvYmopO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlY29kZSBhIHBhY2tldCBTdHJpbmcgKEpTT04gZGF0YSlcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IHBhY2tldFxuICAgICAqL1xuICAgIGRlY29kZVN0cmluZyhzdHIpIHtcbiAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICAvLyBsb29rIHVwIHR5cGVcbiAgICAgICAgY29uc3QgcCA9IHtcbiAgICAgICAgICAgIHR5cGU6IE51bWJlcihzdHIuY2hhckF0KDApKSxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKFBhY2tldFR5cGVbcC50eXBlXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ1bmtub3duIHBhY2tldCB0eXBlIFwiICsgcC50eXBlKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBsb29rIHVwIGF0dGFjaG1lbnRzIGlmIHR5cGUgYmluYXJ5XG4gICAgICAgIGlmIChwLnR5cGUgPT09IFBhY2tldFR5cGUuQklOQVJZX0VWRU5UIHx8XG4gICAgICAgICAgICBwLnR5cGUgPT09IFBhY2tldFR5cGUuQklOQVJZX0FDSykge1xuICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSBpICsgMTtcbiAgICAgICAgICAgIHdoaWxlIChzdHIuY2hhckF0KCsraSkgIT09IFwiLVwiICYmIGkgIT0gc3RyLmxlbmd0aCkgeyB9XG4gICAgICAgICAgICBjb25zdCBidWYgPSBzdHIuc3Vic3RyaW5nKHN0YXJ0LCBpKTtcbiAgICAgICAgICAgIGlmIChidWYgIT0gTnVtYmVyKGJ1ZikgfHwgc3RyLmNoYXJBdChpKSAhPT0gXCItXCIpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbGxlZ2FsIGF0dGFjaG1lbnRzXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcC5hdHRhY2htZW50cyA9IE51bWJlcihidWYpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGxvb2sgdXAgbmFtZXNwYWNlIChpZiBhbnkpXG4gICAgICAgIGlmIChcIi9cIiA9PT0gc3RyLmNoYXJBdChpICsgMSkpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gaSArIDE7XG4gICAgICAgICAgICB3aGlsZSAoKytpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYyA9IHN0ci5jaGFyQXQoaSk7XG4gICAgICAgICAgICAgICAgaWYgKFwiLFwiID09PSBjKVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBpZiAoaSA9PT0gc3RyLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwLm5zcCA9IHN0ci5zdWJzdHJpbmcoc3RhcnQsIGkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcC5uc3AgPSBcIi9cIjtcbiAgICAgICAgfVxuICAgICAgICAvLyBsb29rIHVwIGlkXG4gICAgICAgIGNvbnN0IG5leHQgPSBzdHIuY2hhckF0KGkgKyAxKTtcbiAgICAgICAgaWYgKFwiXCIgIT09IG5leHQgJiYgTnVtYmVyKG5leHQpID09IG5leHQpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gaSArIDE7XG4gICAgICAgICAgICB3aGlsZSAoKytpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYyA9IHN0ci5jaGFyQXQoaSk7XG4gICAgICAgICAgICAgICAgaWYgKG51bGwgPT0gYyB8fCBOdW1iZXIoYykgIT0gYykge1xuICAgICAgICAgICAgICAgICAgICAtLWk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoaSA9PT0gc3RyLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwLmlkID0gTnVtYmVyKHN0ci5zdWJzdHJpbmcoc3RhcnQsIGkgKyAxKSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gbG9vayB1cCBqc29uIGRhdGFcbiAgICAgICAgaWYgKHN0ci5jaGFyQXQoKytpKSkge1xuICAgICAgICAgICAgY29uc3QgcGF5bG9hZCA9IHRyeVBhcnNlKHN0ci5zdWJzdHIoaSkpO1xuICAgICAgICAgICAgaWYgKERlY29kZXIuaXNQYXlsb2FkVmFsaWQocC50eXBlLCBwYXlsb2FkKSkge1xuICAgICAgICAgICAgICAgIHAuZGF0YSA9IHBheWxvYWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJpbnZhbGlkIHBheWxvYWRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZGVidWcoXCJkZWNvZGVkICVzIGFzICVqXCIsIHN0ciwgcCk7XG4gICAgICAgIHJldHVybiBwO1xuICAgIH1cbiAgICBzdGF0aWMgaXNQYXlsb2FkVmFsaWQodHlwZSwgcGF5bG9hZCkge1xuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgUGFja2V0VHlwZS5DT05ORUNUOlxuICAgICAgICAgICAgICAgIHJldHVybiB0eXBlb2YgcGF5bG9hZCA9PT0gXCJvYmplY3RcIjtcbiAgICAgICAgICAgIGNhc2UgUGFja2V0VHlwZS5ESVNDT05ORUNUOlxuICAgICAgICAgICAgICAgIHJldHVybiBwYXlsb2FkID09PSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBjYXNlIFBhY2tldFR5cGUuQ09OTkVDVF9FUlJPUjpcbiAgICAgICAgICAgICAgICByZXR1cm4gdHlwZW9mIHBheWxvYWQgPT09IFwic3RyaW5nXCIgfHwgdHlwZW9mIHBheWxvYWQgPT09IFwib2JqZWN0XCI7XG4gICAgICAgICAgICBjYXNlIFBhY2tldFR5cGUuRVZFTlQ6XG4gICAgICAgICAgICBjYXNlIFBhY2tldFR5cGUuQklOQVJZX0VWRU5UOlxuICAgICAgICAgICAgICAgIHJldHVybiBBcnJheS5pc0FycmF5KHBheWxvYWQpICYmIHBheWxvYWQubGVuZ3RoID4gMDtcbiAgICAgICAgICAgIGNhc2UgUGFja2V0VHlwZS5BQ0s6XG4gICAgICAgICAgICBjYXNlIFBhY2tldFR5cGUuQklOQVJZX0FDSzpcbiAgICAgICAgICAgICAgICByZXR1cm4gQXJyYXkuaXNBcnJheShwYXlsb2FkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWFsbG9jYXRlcyBhIHBhcnNlcidzIHJlc291cmNlc1xuICAgICAqL1xuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIGlmICh0aGlzLnJlY29uc3RydWN0b3IpIHtcbiAgICAgICAgICAgIHRoaXMucmVjb25zdHJ1Y3Rvci5maW5pc2hlZFJlY29uc3RydWN0aW9uKCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnRzLkRlY29kZXIgPSBEZWNvZGVyO1xuZnVuY3Rpb24gdHJ5UGFyc2Uoc3RyKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2Uoc3RyKTtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cbi8qKlxuICogQSBtYW5hZ2VyIG9mIGEgYmluYXJ5IGV2ZW50J3MgJ2J1ZmZlciBzZXF1ZW5jZScuIFNob3VsZFxuICogYmUgY29uc3RydWN0ZWQgd2hlbmV2ZXIgYSBwYWNrZXQgb2YgdHlwZSBCSU5BUllfRVZFTlQgaXNcbiAqIGRlY29kZWQuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHBhY2tldFxuICogQHJldHVybiB7QmluYXJ5UmVjb25zdHJ1Y3Rvcn0gaW5pdGlhbGl6ZWQgcmVjb25zdHJ1Y3RvclxuICovXG5jbGFzcyBCaW5hcnlSZWNvbnN0cnVjdG9yIHtcbiAgICBjb25zdHJ1Y3RvcihwYWNrZXQpIHtcbiAgICAgICAgdGhpcy5wYWNrZXQgPSBwYWNrZXQ7XG4gICAgICAgIHRoaXMuYnVmZmVycyA9IFtdO1xuICAgICAgICB0aGlzLnJlY29uUGFjayA9IHBhY2tldDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWV0aG9kIHRvIGJlIGNhbGxlZCB3aGVuIGJpbmFyeSBkYXRhIHJlY2VpdmVkIGZyb20gY29ubmVjdGlvblxuICAgICAqIGFmdGVyIGEgQklOQVJZX0VWRU5UIHBhY2tldC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7QnVmZmVyIHwgQXJyYXlCdWZmZXJ9IGJpbkRhdGEgLSB0aGUgcmF3IGJpbmFyeSBkYXRhIHJlY2VpdmVkXG4gICAgICogQHJldHVybiB7bnVsbCB8IE9iamVjdH0gcmV0dXJucyBudWxsIGlmIG1vcmUgYmluYXJ5IGRhdGEgaXMgZXhwZWN0ZWQgb3JcbiAgICAgKiAgIGEgcmVjb25zdHJ1Y3RlZCBwYWNrZXQgb2JqZWN0IGlmIGFsbCBidWZmZXJzIGhhdmUgYmVlbiByZWNlaXZlZC5cbiAgICAgKi9cbiAgICB0YWtlQmluYXJ5RGF0YShiaW5EYXRhKSB7XG4gICAgICAgIHRoaXMuYnVmZmVycy5wdXNoKGJpbkRhdGEpO1xuICAgICAgICBpZiAodGhpcy5idWZmZXJzLmxlbmd0aCA9PT0gdGhpcy5yZWNvblBhY2suYXR0YWNobWVudHMpIHtcbiAgICAgICAgICAgIC8vIGRvbmUgd2l0aCBidWZmZXIgbGlzdFxuICAgICAgICAgICAgY29uc3QgcGFja2V0ID0gYmluYXJ5XzEucmVjb25zdHJ1Y3RQYWNrZXQodGhpcy5yZWNvblBhY2ssIHRoaXMuYnVmZmVycyk7XG4gICAgICAgICAgICB0aGlzLmZpbmlzaGVkUmVjb25zdHJ1Y3Rpb24oKTtcbiAgICAgICAgICAgIHJldHVybiBwYWNrZXQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsZWFucyB1cCBiaW5hcnkgcGFja2V0IHJlY29uc3RydWN0aW9uIHZhcmlhYmxlcy5cbiAgICAgKi9cbiAgICBmaW5pc2hlZFJlY29uc3RydWN0aW9uKCkge1xuICAgICAgICB0aGlzLnJlY29uUGFjayA9IG51bGw7XG4gICAgICAgIHRoaXMuYnVmZmVycyA9IFtdO1xuICAgIH1cbn1cbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5oYXNCaW5hcnkgPSBleHBvcnRzLmlzQmluYXJ5ID0gdm9pZCAwO1xuY29uc3Qgd2l0aE5hdGl2ZUFycmF5QnVmZmVyID0gdHlwZW9mIEFycmF5QnVmZmVyID09PSBcImZ1bmN0aW9uXCI7XG5jb25zdCBpc1ZpZXcgPSAob2JqKSA9PiB7XG4gICAgcmV0dXJuIHR5cGVvZiBBcnJheUJ1ZmZlci5pc1ZpZXcgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgICA/IEFycmF5QnVmZmVyLmlzVmlldyhvYmopXG4gICAgICAgIDogb2JqLmJ1ZmZlciBpbnN0YW5jZW9mIEFycmF5QnVmZmVyO1xufTtcbmNvbnN0IHRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcbmNvbnN0IHdpdGhOYXRpdmVCbG9iID0gdHlwZW9mIEJsb2IgPT09IFwiZnVuY3Rpb25cIiB8fFxuICAgICh0eXBlb2YgQmxvYiAhPT0gXCJ1bmRlZmluZWRcIiAmJlxuICAgICAgICB0b1N0cmluZy5jYWxsKEJsb2IpID09PSBcIltvYmplY3QgQmxvYkNvbnN0cnVjdG9yXVwiKTtcbmNvbnN0IHdpdGhOYXRpdmVGaWxlID0gdHlwZW9mIEZpbGUgPT09IFwiZnVuY3Rpb25cIiB8fFxuICAgICh0eXBlb2YgRmlsZSAhPT0gXCJ1bmRlZmluZWRcIiAmJlxuICAgICAgICB0b1N0cmluZy5jYWxsKEZpbGUpID09PSBcIltvYmplY3QgRmlsZUNvbnN0cnVjdG9yXVwiKTtcbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIG9iaiBpcyBhIEJ1ZmZlciwgYW4gQXJyYXlCdWZmZXIsIGEgQmxvYiBvciBhIEZpbGUuXG4gKlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gaXNCaW5hcnkob2JqKSB7XG4gICAgcmV0dXJuICgod2l0aE5hdGl2ZUFycmF5QnVmZmVyICYmIChvYmogaW5zdGFuY2VvZiBBcnJheUJ1ZmZlciB8fCBpc1ZpZXcob2JqKSkpIHx8XG4gICAgICAgICh3aXRoTmF0aXZlQmxvYiAmJiBvYmogaW5zdGFuY2VvZiBCbG9iKSB8fFxuICAgICAgICAod2l0aE5hdGl2ZUZpbGUgJiYgb2JqIGluc3RhbmNlb2YgRmlsZSkpO1xufVxuZXhwb3J0cy5pc0JpbmFyeSA9IGlzQmluYXJ5O1xuZnVuY3Rpb24gaGFzQmluYXJ5KG9iaiwgdG9KU09OKSB7XG4gICAgaWYgKCFvYmogfHwgdHlwZW9mIG9iaiAhPT0gXCJvYmplY3RcIikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChBcnJheS5pc0FycmF5KG9iaikpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGwgPSBvYmoubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoaGFzQmluYXJ5KG9ialtpXSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChpc0JpbmFyeShvYmopKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAob2JqLnRvSlNPTiAmJlxuICAgICAgICB0eXBlb2Ygb2JqLnRvSlNPTiA9PT0gXCJmdW5jdGlvblwiICYmXG4gICAgICAgIGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgcmV0dXJuIGhhc0JpbmFyeShvYmoudG9KU09OKCksIHRydWUpO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IGtleSBpbiBvYmopIHtcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkgJiYgaGFzQmluYXJ5KG9ialtrZXldKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZXhwb3J0cy5oYXNCaW5hcnkgPSBoYXNCaW5hcnk7XG4iLCIvKiBlc2xpbnQtZW52IGJyb3dzZXIgKi9cblxuLyoqXG4gKiBUaGlzIGlzIHRoZSB3ZWIgYnJvd3NlciBpbXBsZW1lbnRhdGlvbiBvZiBgZGVidWcoKWAuXG4gKi9cblxuZXhwb3J0cy5mb3JtYXRBcmdzID0gZm9ybWF0QXJncztcbmV4cG9ydHMuc2F2ZSA9IHNhdmU7XG5leHBvcnRzLmxvYWQgPSBsb2FkO1xuZXhwb3J0cy51c2VDb2xvcnMgPSB1c2VDb2xvcnM7XG5leHBvcnRzLnN0b3JhZ2UgPSBsb2NhbHN0b3JhZ2UoKTtcbmV4cG9ydHMuZGVzdHJveSA9ICgoKSA9PiB7XG5cdGxldCB3YXJuZWQgPSBmYWxzZTtcblxuXHRyZXR1cm4gKCkgPT4ge1xuXHRcdGlmICghd2FybmVkKSB7XG5cdFx0XHR3YXJuZWQgPSB0cnVlO1xuXHRcdFx0Y29uc29sZS53YXJuKCdJbnN0YW5jZSBtZXRob2QgYGRlYnVnLmRlc3Ryb3koKWAgaXMgZGVwcmVjYXRlZCBhbmQgbm8gbG9uZ2VyIGRvZXMgYW55dGhpbmcuIEl0IHdpbGwgYmUgcmVtb3ZlZCBpbiB0aGUgbmV4dCBtYWpvciB2ZXJzaW9uIG9mIGBkZWJ1Z2AuJyk7XG5cdFx0fVxuXHR9O1xufSkoKTtcblxuLyoqXG4gKiBDb2xvcnMuXG4gKi9cblxuZXhwb3J0cy5jb2xvcnMgPSBbXG5cdCcjMDAwMENDJyxcblx0JyMwMDAwRkYnLFxuXHQnIzAwMzNDQycsXG5cdCcjMDAzM0ZGJyxcblx0JyMwMDY2Q0MnLFxuXHQnIzAwNjZGRicsXG5cdCcjMDA5OUNDJyxcblx0JyMwMDk5RkYnLFxuXHQnIzAwQ0MwMCcsXG5cdCcjMDBDQzMzJyxcblx0JyMwMENDNjYnLFxuXHQnIzAwQ0M5OScsXG5cdCcjMDBDQ0NDJyxcblx0JyMwMENDRkYnLFxuXHQnIzMzMDBDQycsXG5cdCcjMzMwMEZGJyxcblx0JyMzMzMzQ0MnLFxuXHQnIzMzMzNGRicsXG5cdCcjMzM2NkNDJyxcblx0JyMzMzY2RkYnLFxuXHQnIzMzOTlDQycsXG5cdCcjMzM5OUZGJyxcblx0JyMzM0NDMDAnLFxuXHQnIzMzQ0MzMycsXG5cdCcjMzNDQzY2Jyxcblx0JyMzM0NDOTknLFxuXHQnIzMzQ0NDQycsXG5cdCcjMzNDQ0ZGJyxcblx0JyM2NjAwQ0MnLFxuXHQnIzY2MDBGRicsXG5cdCcjNjYzM0NDJyxcblx0JyM2NjMzRkYnLFxuXHQnIzY2Q0MwMCcsXG5cdCcjNjZDQzMzJyxcblx0JyM5OTAwQ0MnLFxuXHQnIzk5MDBGRicsXG5cdCcjOTkzM0NDJyxcblx0JyM5OTMzRkYnLFxuXHQnIzk5Q0MwMCcsXG5cdCcjOTlDQzMzJyxcblx0JyNDQzAwMDAnLFxuXHQnI0NDMDAzMycsXG5cdCcjQ0MwMDY2Jyxcblx0JyNDQzAwOTknLFxuXHQnI0NDMDBDQycsXG5cdCcjQ0MwMEZGJyxcblx0JyNDQzMzMDAnLFxuXHQnI0NDMzMzMycsXG5cdCcjQ0MzMzY2Jyxcblx0JyNDQzMzOTknLFxuXHQnI0NDMzNDQycsXG5cdCcjQ0MzM0ZGJyxcblx0JyNDQzY2MDAnLFxuXHQnI0NDNjYzMycsXG5cdCcjQ0M5OTAwJyxcblx0JyNDQzk5MzMnLFxuXHQnI0NDQ0MwMCcsXG5cdCcjQ0NDQzMzJyxcblx0JyNGRjAwMDAnLFxuXHQnI0ZGMDAzMycsXG5cdCcjRkYwMDY2Jyxcblx0JyNGRjAwOTknLFxuXHQnI0ZGMDBDQycsXG5cdCcjRkYwMEZGJyxcblx0JyNGRjMzMDAnLFxuXHQnI0ZGMzMzMycsXG5cdCcjRkYzMzY2Jyxcblx0JyNGRjMzOTknLFxuXHQnI0ZGMzNDQycsXG5cdCcjRkYzM0ZGJyxcblx0JyNGRjY2MDAnLFxuXHQnI0ZGNjYzMycsXG5cdCcjRkY5OTAwJyxcblx0JyNGRjk5MzMnLFxuXHQnI0ZGQ0MwMCcsXG5cdCcjRkZDQzMzJ1xuXTtcblxuLyoqXG4gKiBDdXJyZW50bHkgb25seSBXZWJLaXQtYmFzZWQgV2ViIEluc3BlY3RvcnMsIEZpcmVmb3ggPj0gdjMxLFxuICogYW5kIHRoZSBGaXJlYnVnIGV4dGVuc2lvbiAoYW55IEZpcmVmb3ggdmVyc2lvbikgYXJlIGtub3duXG4gKiB0byBzdXBwb3J0IFwiJWNcIiBDU1MgY3VzdG9taXphdGlvbnMuXG4gKlxuICogVE9ETzogYWRkIGEgYGxvY2FsU3RvcmFnZWAgdmFyaWFibGUgdG8gZXhwbGljaXRseSBlbmFibGUvZGlzYWJsZSBjb2xvcnNcbiAqL1xuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29tcGxleGl0eVxuZnVuY3Rpb24gdXNlQ29sb3JzKCkge1xuXHQvLyBOQjogSW4gYW4gRWxlY3Ryb24gcHJlbG9hZCBzY3JpcHQsIGRvY3VtZW50IHdpbGwgYmUgZGVmaW5lZCBidXQgbm90IGZ1bGx5XG5cdC8vIGluaXRpYWxpemVkLiBTaW5jZSB3ZSBrbm93IHdlJ3JlIGluIENocm9tZSwgd2UnbGwganVzdCBkZXRlY3QgdGhpcyBjYXNlXG5cdC8vIGV4cGxpY2l0bHlcblx0aWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5wcm9jZXNzICYmICh3aW5kb3cucHJvY2Vzcy50eXBlID09PSAncmVuZGVyZXInIHx8IHdpbmRvdy5wcm9jZXNzLl9fbndqcykpIHtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXG5cdC8vIEludGVybmV0IEV4cGxvcmVyIGFuZCBFZGdlIGRvIG5vdCBzdXBwb3J0IGNvbG9ycy5cblx0aWYgKHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmIG5hdmlnYXRvci51c2VyQWdlbnQgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLm1hdGNoKC8oZWRnZXx0cmlkZW50KVxcLyhcXGQrKS8pKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0Ly8gSXMgd2Via2l0PyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xNjQ1OTYwNi8zNzY3NzNcblx0Ly8gZG9jdW1lbnQgaXMgdW5kZWZpbmVkIGluIHJlYWN0LW5hdGl2ZTogaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlYWN0LW5hdGl2ZS9wdWxsLzE2MzJcblx0cmV0dXJuICh0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnICYmIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLldlYmtpdEFwcGVhcmFuY2UpIHx8XG5cdFx0Ly8gSXMgZmlyZWJ1Zz8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMzk4MTIwLzM3Njc3M1xuXHRcdCh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuY29uc29sZSAmJiAod2luZG93LmNvbnNvbGUuZmlyZWJ1ZyB8fCAod2luZG93LmNvbnNvbGUuZXhjZXB0aW9uICYmIHdpbmRvdy5jb25zb2xlLnRhYmxlKSkpIHx8XG5cdFx0Ly8gSXMgZmlyZWZveCA+PSB2MzE/XG5cdFx0Ly8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9Ub29scy9XZWJfQ29uc29sZSNTdHlsaW5nX21lc3NhZ2VzXG5cdFx0KHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmIG5hdmlnYXRvci51c2VyQWdlbnQgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLm1hdGNoKC9maXJlZm94XFwvKFxcZCspLykgJiYgcGFyc2VJbnQoUmVnRXhwLiQxLCAxMCkgPj0gMzEpIHx8XG5cdFx0Ly8gRG91YmxlIGNoZWNrIHdlYmtpdCBpbiB1c2VyQWdlbnQganVzdCBpbiBjYXNlIHdlIGFyZSBpbiBhIHdvcmtlclxuXHRcdCh0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJiBuYXZpZ2F0b3IudXNlckFnZW50ICYmIG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5tYXRjaCgvYXBwbGV3ZWJraXRcXC8oXFxkKykvKSk7XG59XG5cbi8qKlxuICogQ29sb3JpemUgbG9nIGFyZ3VtZW50cyBpZiBlbmFibGVkLlxuICpcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZnVuY3Rpb24gZm9ybWF0QXJncyhhcmdzKSB7XG5cdGFyZ3NbMF0gPSAodGhpcy51c2VDb2xvcnMgPyAnJWMnIDogJycpICtcblx0XHR0aGlzLm5hbWVzcGFjZSArXG5cdFx0KHRoaXMudXNlQ29sb3JzID8gJyAlYycgOiAnICcpICtcblx0XHRhcmdzWzBdICtcblx0XHQodGhpcy51c2VDb2xvcnMgPyAnJWMgJyA6ICcgJykgK1xuXHRcdCcrJyArIG1vZHVsZS5leHBvcnRzLmh1bWFuaXplKHRoaXMuZGlmZik7XG5cblx0aWYgKCF0aGlzLnVzZUNvbG9ycykge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdGNvbnN0IGMgPSAnY29sb3I6ICcgKyB0aGlzLmNvbG9yO1xuXHRhcmdzLnNwbGljZSgxLCAwLCBjLCAnY29sb3I6IGluaGVyaXQnKTtcblxuXHQvLyBUaGUgZmluYWwgXCIlY1wiIGlzIHNvbWV3aGF0IHRyaWNreSwgYmVjYXVzZSB0aGVyZSBjb3VsZCBiZSBvdGhlclxuXHQvLyBhcmd1bWVudHMgcGFzc2VkIGVpdGhlciBiZWZvcmUgb3IgYWZ0ZXIgdGhlICVjLCBzbyB3ZSBuZWVkIHRvXG5cdC8vIGZpZ3VyZSBvdXQgdGhlIGNvcnJlY3QgaW5kZXggdG8gaW5zZXJ0IHRoZSBDU1MgaW50b1xuXHRsZXQgaW5kZXggPSAwO1xuXHRsZXQgbGFzdEMgPSAwO1xuXHRhcmdzWzBdLnJlcGxhY2UoLyVbYS16QS1aJV0vZywgbWF0Y2ggPT4ge1xuXHRcdGlmIChtYXRjaCA9PT0gJyUlJykge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRpbmRleCsrO1xuXHRcdGlmIChtYXRjaCA9PT0gJyVjJykge1xuXHRcdFx0Ly8gV2Ugb25seSBhcmUgaW50ZXJlc3RlZCBpbiB0aGUgKmxhc3QqICVjXG5cdFx0XHQvLyAodGhlIHVzZXIgbWF5IGhhdmUgcHJvdmlkZWQgdGhlaXIgb3duKVxuXHRcdFx0bGFzdEMgPSBpbmRleDtcblx0XHR9XG5cdH0pO1xuXG5cdGFyZ3Muc3BsaWNlKGxhc3RDLCAwLCBjKTtcbn1cblxuLyoqXG4gKiBJbnZva2VzIGBjb25zb2xlLmRlYnVnKClgIHdoZW4gYXZhaWxhYmxlLlxuICogTm8tb3Agd2hlbiBgY29uc29sZS5kZWJ1Z2AgaXMgbm90IGEgXCJmdW5jdGlvblwiLlxuICogSWYgYGNvbnNvbGUuZGVidWdgIGlzIG5vdCBhdmFpbGFibGUsIGZhbGxzIGJhY2tcbiAqIHRvIGBjb25zb2xlLmxvZ2AuXG4gKlxuICogQGFwaSBwdWJsaWNcbiAqL1xuZXhwb3J0cy5sb2cgPSBjb25zb2xlLmRlYnVnIHx8IGNvbnNvbGUubG9nIHx8ICgoKSA9PiB7fSk7XG5cbi8qKlxuICogU2F2ZSBgbmFtZXNwYWNlc2AuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWVzcGFjZXNcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBzYXZlKG5hbWVzcGFjZXMpIHtcblx0dHJ5IHtcblx0XHRpZiAobmFtZXNwYWNlcykge1xuXHRcdFx0ZXhwb3J0cy5zdG9yYWdlLnNldEl0ZW0oJ2RlYnVnJywgbmFtZXNwYWNlcyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGV4cG9ydHMuc3RvcmFnZS5yZW1vdmVJdGVtKCdkZWJ1ZycpO1xuXHRcdH1cblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHQvLyBTd2FsbG93XG5cdFx0Ly8gWFhYIChAUWl4LSkgc2hvdWxkIHdlIGJlIGxvZ2dpbmcgdGhlc2U/XG5cdH1cbn1cblxuLyoqXG4gKiBMb2FkIGBuYW1lc3BhY2VzYC5cbiAqXG4gKiBAcmV0dXJuIHtTdHJpbmd9IHJldHVybnMgdGhlIHByZXZpb3VzbHkgcGVyc2lzdGVkIGRlYnVnIG1vZGVzXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gbG9hZCgpIHtcblx0bGV0IHI7XG5cdHRyeSB7XG5cdFx0ciA9IGV4cG9ydHMuc3RvcmFnZS5nZXRJdGVtKCdkZWJ1ZycpO1xuXHR9IGNhdGNoIChlcnJvcikge1xuXHRcdC8vIFN3YWxsb3dcblx0XHQvLyBYWFggKEBRaXgtKSBzaG91bGQgd2UgYmUgbG9nZ2luZyB0aGVzZT9cblx0fVxuXG5cdC8vIElmIGRlYnVnIGlzbid0IHNldCBpbiBMUywgYW5kIHdlJ3JlIGluIEVsZWN0cm9uLCB0cnkgdG8gbG9hZCAkREVCVUdcblx0aWYgKCFyICYmIHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJiAnZW52JyBpbiBwcm9jZXNzKSB7XG5cdFx0ciA9IHByb2Nlc3MuZW52LkRFQlVHO1xuXHR9XG5cblx0cmV0dXJuIHI7XG59XG5cbi8qKlxuICogTG9jYWxzdG9yYWdlIGF0dGVtcHRzIHRvIHJldHVybiB0aGUgbG9jYWxzdG9yYWdlLlxuICpcbiAqIFRoaXMgaXMgbmVjZXNzYXJ5IGJlY2F1c2Ugc2FmYXJpIHRocm93c1xuICogd2hlbiBhIHVzZXIgZGlzYWJsZXMgY29va2llcy9sb2NhbHN0b3JhZ2VcbiAqIGFuZCB5b3UgYXR0ZW1wdCB0byBhY2Nlc3MgaXQuXG4gKlxuICogQHJldHVybiB7TG9jYWxTdG9yYWdlfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gbG9jYWxzdG9yYWdlKCkge1xuXHR0cnkge1xuXHRcdC8vIFRWTUxLaXQgKEFwcGxlIFRWIEpTIFJ1bnRpbWUpIGRvZXMgbm90IGhhdmUgYSB3aW5kb3cgb2JqZWN0LCBqdXN0IGxvY2FsU3RvcmFnZSBpbiB0aGUgZ2xvYmFsIGNvbnRleHRcblx0XHQvLyBUaGUgQnJvd3NlciBhbHNvIGhhcyBsb2NhbFN0b3JhZ2UgaW4gdGhlIGdsb2JhbCBjb250ZXh0LlxuXHRcdHJldHVybiBsb2NhbFN0b3JhZ2U7XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0Ly8gU3dhbGxvd1xuXHRcdC8vIFhYWCAoQFFpeC0pIHNob3VsZCB3ZSBiZSBsb2dnaW5nIHRoZXNlP1xuXHR9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9jb21tb24nKShleHBvcnRzKTtcblxuY29uc3Qge2Zvcm1hdHRlcnN9ID0gbW9kdWxlLmV4cG9ydHM7XG5cbi8qKlxuICogTWFwICVqIHRvIGBKU09OLnN0cmluZ2lmeSgpYCwgc2luY2Ugbm8gV2ViIEluc3BlY3RvcnMgZG8gdGhhdCBieSBkZWZhdWx0LlxuICovXG5cbmZvcm1hdHRlcnMuaiA9IGZ1bmN0aW9uICh2KSB7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIEpTT04uc3RyaW5naWZ5KHYpO1xuXHR9IGNhdGNoIChlcnJvcikge1xuXHRcdHJldHVybiAnW1VuZXhwZWN0ZWRKU09OUGFyc2VFcnJvcl06ICcgKyBlcnJvci5tZXNzYWdlO1xuXHR9XG59O1xuIiwiXG4vKipcbiAqIFRoaXMgaXMgdGhlIGNvbW1vbiBsb2dpYyBmb3IgYm90aCB0aGUgTm9kZS5qcyBhbmQgd2ViIGJyb3dzZXJcbiAqIGltcGxlbWVudGF0aW9ucyBvZiBgZGVidWcoKWAuXG4gKi9cblxuZnVuY3Rpb24gc2V0dXAoZW52KSB7XG5cdGNyZWF0ZURlYnVnLmRlYnVnID0gY3JlYXRlRGVidWc7XG5cdGNyZWF0ZURlYnVnLmRlZmF1bHQgPSBjcmVhdGVEZWJ1Zztcblx0Y3JlYXRlRGVidWcuY29lcmNlID0gY29lcmNlO1xuXHRjcmVhdGVEZWJ1Zy5kaXNhYmxlID0gZGlzYWJsZTtcblx0Y3JlYXRlRGVidWcuZW5hYmxlID0gZW5hYmxlO1xuXHRjcmVhdGVEZWJ1Zy5lbmFibGVkID0gZW5hYmxlZDtcblx0Y3JlYXRlRGVidWcuaHVtYW5pemUgPSByZXF1aXJlKCdtcycpO1xuXHRjcmVhdGVEZWJ1Zy5kZXN0cm95ID0gZGVzdHJveTtcblxuXHRPYmplY3Qua2V5cyhlbnYpLmZvckVhY2goa2V5ID0+IHtcblx0XHRjcmVhdGVEZWJ1Z1trZXldID0gZW52W2tleV07XG5cdH0pO1xuXG5cdC8qKlxuXHQqIFRoZSBjdXJyZW50bHkgYWN0aXZlIGRlYnVnIG1vZGUgbmFtZXMsIGFuZCBuYW1lcyB0byBza2lwLlxuXHQqL1xuXG5cdGNyZWF0ZURlYnVnLm5hbWVzID0gW107XG5cdGNyZWF0ZURlYnVnLnNraXBzID0gW107XG5cblx0LyoqXG5cdCogTWFwIG9mIHNwZWNpYWwgXCIlblwiIGhhbmRsaW5nIGZ1bmN0aW9ucywgZm9yIHRoZSBkZWJ1ZyBcImZvcm1hdFwiIGFyZ3VtZW50LlxuXHQqXG5cdCogVmFsaWQga2V5IG5hbWVzIGFyZSBhIHNpbmdsZSwgbG93ZXIgb3IgdXBwZXItY2FzZSBsZXR0ZXIsIGkuZS4gXCJuXCIgYW5kIFwiTlwiLlxuXHQqL1xuXHRjcmVhdGVEZWJ1Zy5mb3JtYXR0ZXJzID0ge307XG5cblx0LyoqXG5cdCogU2VsZWN0cyBhIGNvbG9yIGZvciBhIGRlYnVnIG5hbWVzcGFjZVxuXHQqIEBwYXJhbSB7U3RyaW5nfSBuYW1lc3BhY2UgVGhlIG5hbWVzcGFjZSBzdHJpbmcgZm9yIHRoZSBmb3IgdGhlIGRlYnVnIGluc3RhbmNlIHRvIGJlIGNvbG9yZWRcblx0KiBAcmV0dXJuIHtOdW1iZXJ8U3RyaW5nfSBBbiBBTlNJIGNvbG9yIGNvZGUgZm9yIHRoZSBnaXZlbiBuYW1lc3BhY2Vcblx0KiBAYXBpIHByaXZhdGVcblx0Ki9cblx0ZnVuY3Rpb24gc2VsZWN0Q29sb3IobmFtZXNwYWNlKSB7XG5cdFx0bGV0IGhhc2ggPSAwO1xuXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBuYW1lc3BhY2UubGVuZ3RoOyBpKyspIHtcblx0XHRcdGhhc2ggPSAoKGhhc2ggPDwgNSkgLSBoYXNoKSArIG5hbWVzcGFjZS5jaGFyQ29kZUF0KGkpO1xuXHRcdFx0aGFzaCB8PSAwOyAvLyBDb252ZXJ0IHRvIDMyYml0IGludGVnZXJcblx0XHR9XG5cblx0XHRyZXR1cm4gY3JlYXRlRGVidWcuY29sb3JzW01hdGguYWJzKGhhc2gpICUgY3JlYXRlRGVidWcuY29sb3JzLmxlbmd0aF07XG5cdH1cblx0Y3JlYXRlRGVidWcuc2VsZWN0Q29sb3IgPSBzZWxlY3RDb2xvcjtcblxuXHQvKipcblx0KiBDcmVhdGUgYSBkZWJ1Z2dlciB3aXRoIHRoZSBnaXZlbiBgbmFtZXNwYWNlYC5cblx0KlxuXHQqIEBwYXJhbSB7U3RyaW5nfSBuYW1lc3BhY2Vcblx0KiBAcmV0dXJuIHtGdW5jdGlvbn1cblx0KiBAYXBpIHB1YmxpY1xuXHQqL1xuXHRmdW5jdGlvbiBjcmVhdGVEZWJ1ZyhuYW1lc3BhY2UpIHtcblx0XHRsZXQgcHJldlRpbWU7XG5cdFx0bGV0IGVuYWJsZU92ZXJyaWRlID0gbnVsbDtcblxuXHRcdGZ1bmN0aW9uIGRlYnVnKC4uLmFyZ3MpIHtcblx0XHRcdC8vIERpc2FibGVkP1xuXHRcdFx0aWYgKCFkZWJ1Zy5lbmFibGVkKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Y29uc3Qgc2VsZiA9IGRlYnVnO1xuXG5cdFx0XHQvLyBTZXQgYGRpZmZgIHRpbWVzdGFtcFxuXHRcdFx0Y29uc3QgY3VyciA9IE51bWJlcihuZXcgRGF0ZSgpKTtcblx0XHRcdGNvbnN0IG1zID0gY3VyciAtIChwcmV2VGltZSB8fCBjdXJyKTtcblx0XHRcdHNlbGYuZGlmZiA9IG1zO1xuXHRcdFx0c2VsZi5wcmV2ID0gcHJldlRpbWU7XG5cdFx0XHRzZWxmLmN1cnIgPSBjdXJyO1xuXHRcdFx0cHJldlRpbWUgPSBjdXJyO1xuXG5cdFx0XHRhcmdzWzBdID0gY3JlYXRlRGVidWcuY29lcmNlKGFyZ3NbMF0pO1xuXG5cdFx0XHRpZiAodHlwZW9mIGFyZ3NbMF0gIT09ICdzdHJpbmcnKSB7XG5cdFx0XHRcdC8vIEFueXRoaW5nIGVsc2UgbGV0J3MgaW5zcGVjdCB3aXRoICVPXG5cdFx0XHRcdGFyZ3MudW5zaGlmdCgnJU8nKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQXBwbHkgYW55IGBmb3JtYXR0ZXJzYCB0cmFuc2Zvcm1hdGlvbnNcblx0XHRcdGxldCBpbmRleCA9IDA7XG5cdFx0XHRhcmdzWzBdID0gYXJnc1swXS5yZXBsYWNlKC8lKFthLXpBLVolXSkvZywgKG1hdGNoLCBmb3JtYXQpID0+IHtcblx0XHRcdFx0Ly8gSWYgd2UgZW5jb3VudGVyIGFuIGVzY2FwZWQgJSB0aGVuIGRvbid0IGluY3JlYXNlIHRoZSBhcnJheSBpbmRleFxuXHRcdFx0XHRpZiAobWF0Y2ggPT09ICclJScpIHtcblx0XHRcdFx0XHRyZXR1cm4gJyUnO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGluZGV4Kys7XG5cdFx0XHRcdGNvbnN0IGZvcm1hdHRlciA9IGNyZWF0ZURlYnVnLmZvcm1hdHRlcnNbZm9ybWF0XTtcblx0XHRcdFx0aWYgKHR5cGVvZiBmb3JtYXR0ZXIgPT09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0XHRjb25zdCB2YWwgPSBhcmdzW2luZGV4XTtcblx0XHRcdFx0XHRtYXRjaCA9IGZvcm1hdHRlci5jYWxsKHNlbGYsIHZhbCk7XG5cblx0XHRcdFx0XHQvLyBOb3cgd2UgbmVlZCB0byByZW1vdmUgYGFyZ3NbaW5kZXhdYCBzaW5jZSBpdCdzIGlubGluZWQgaW4gdGhlIGBmb3JtYXRgXG5cdFx0XHRcdFx0YXJncy5zcGxpY2UoaW5kZXgsIDEpO1xuXHRcdFx0XHRcdGluZGV4LS07XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIG1hdGNoO1xuXHRcdFx0fSk7XG5cblx0XHRcdC8vIEFwcGx5IGVudi1zcGVjaWZpYyBmb3JtYXR0aW5nIChjb2xvcnMsIGV0Yy4pXG5cdFx0XHRjcmVhdGVEZWJ1Zy5mb3JtYXRBcmdzLmNhbGwoc2VsZiwgYXJncyk7XG5cblx0XHRcdGNvbnN0IGxvZ0ZuID0gc2VsZi5sb2cgfHwgY3JlYXRlRGVidWcubG9nO1xuXHRcdFx0bG9nRm4uYXBwbHkoc2VsZiwgYXJncyk7XG5cdFx0fVxuXG5cdFx0ZGVidWcubmFtZXNwYWNlID0gbmFtZXNwYWNlO1xuXHRcdGRlYnVnLnVzZUNvbG9ycyA9IGNyZWF0ZURlYnVnLnVzZUNvbG9ycygpO1xuXHRcdGRlYnVnLmNvbG9yID0gY3JlYXRlRGVidWcuc2VsZWN0Q29sb3IobmFtZXNwYWNlKTtcblx0XHRkZWJ1Zy5leHRlbmQgPSBleHRlbmQ7XG5cdFx0ZGVidWcuZGVzdHJveSA9IGNyZWF0ZURlYnVnLmRlc3Ryb3k7IC8vIFhYWCBUZW1wb3JhcnkuIFdpbGwgYmUgcmVtb3ZlZCBpbiB0aGUgbmV4dCBtYWpvciByZWxlYXNlLlxuXG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGRlYnVnLCAnZW5hYmxlZCcsIHtcblx0XHRcdGVudW1lcmFibGU6IHRydWUsXG5cdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuXHRcdFx0Z2V0OiAoKSA9PiBlbmFibGVPdmVycmlkZSA9PT0gbnVsbCA/IGNyZWF0ZURlYnVnLmVuYWJsZWQobmFtZXNwYWNlKSA6IGVuYWJsZU92ZXJyaWRlLFxuXHRcdFx0c2V0OiB2ID0+IHtcblx0XHRcdFx0ZW5hYmxlT3ZlcnJpZGUgPSB2O1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0Ly8gRW52LXNwZWNpZmljIGluaXRpYWxpemF0aW9uIGxvZ2ljIGZvciBkZWJ1ZyBpbnN0YW5jZXNcblx0XHRpZiAodHlwZW9mIGNyZWF0ZURlYnVnLmluaXQgPT09ICdmdW5jdGlvbicpIHtcblx0XHRcdGNyZWF0ZURlYnVnLmluaXQoZGVidWcpO1xuXHRcdH1cblxuXHRcdHJldHVybiBkZWJ1Zztcblx0fVxuXG5cdGZ1bmN0aW9uIGV4dGVuZChuYW1lc3BhY2UsIGRlbGltaXRlcikge1xuXHRcdGNvbnN0IG5ld0RlYnVnID0gY3JlYXRlRGVidWcodGhpcy5uYW1lc3BhY2UgKyAodHlwZW9mIGRlbGltaXRlciA9PT0gJ3VuZGVmaW5lZCcgPyAnOicgOiBkZWxpbWl0ZXIpICsgbmFtZXNwYWNlKTtcblx0XHRuZXdEZWJ1Zy5sb2cgPSB0aGlzLmxvZztcblx0XHRyZXR1cm4gbmV3RGVidWc7XG5cdH1cblxuXHQvKipcblx0KiBFbmFibGVzIGEgZGVidWcgbW9kZSBieSBuYW1lc3BhY2VzLiBUaGlzIGNhbiBpbmNsdWRlIG1vZGVzXG5cdCogc2VwYXJhdGVkIGJ5IGEgY29sb24gYW5kIHdpbGRjYXJkcy5cblx0KlxuXHQqIEBwYXJhbSB7U3RyaW5nfSBuYW1lc3BhY2VzXG5cdCogQGFwaSBwdWJsaWNcblx0Ki9cblx0ZnVuY3Rpb24gZW5hYmxlKG5hbWVzcGFjZXMpIHtcblx0XHRjcmVhdGVEZWJ1Zy5zYXZlKG5hbWVzcGFjZXMpO1xuXG5cdFx0Y3JlYXRlRGVidWcubmFtZXMgPSBbXTtcblx0XHRjcmVhdGVEZWJ1Zy5za2lwcyA9IFtdO1xuXG5cdFx0bGV0IGk7XG5cdFx0Y29uc3Qgc3BsaXQgPSAodHlwZW9mIG5hbWVzcGFjZXMgPT09ICdzdHJpbmcnID8gbmFtZXNwYWNlcyA6ICcnKS5zcGxpdCgvW1xccyxdKy8pO1xuXHRcdGNvbnN0IGxlbiA9IHNwbGl0Lmxlbmd0aDtcblxuXHRcdGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuXHRcdFx0aWYgKCFzcGxpdFtpXSkge1xuXHRcdFx0XHQvLyBpZ25vcmUgZW1wdHkgc3RyaW5nc1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblxuXHRcdFx0bmFtZXNwYWNlcyA9IHNwbGl0W2ldLnJlcGxhY2UoL1xcKi9nLCAnLio/Jyk7XG5cblx0XHRcdGlmIChuYW1lc3BhY2VzWzBdID09PSAnLScpIHtcblx0XHRcdFx0Y3JlYXRlRGVidWcuc2tpcHMucHVzaChuZXcgUmVnRXhwKCdeJyArIG5hbWVzcGFjZXMuc3Vic3RyKDEpICsgJyQnKSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjcmVhdGVEZWJ1Zy5uYW1lcy5wdXNoKG5ldyBSZWdFeHAoJ14nICsgbmFtZXNwYWNlcyArICckJykpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQqIERpc2FibGUgZGVidWcgb3V0cHV0LlxuXHQqXG5cdCogQHJldHVybiB7U3RyaW5nfSBuYW1lc3BhY2VzXG5cdCogQGFwaSBwdWJsaWNcblx0Ki9cblx0ZnVuY3Rpb24gZGlzYWJsZSgpIHtcblx0XHRjb25zdCBuYW1lc3BhY2VzID0gW1xuXHRcdFx0Li4uY3JlYXRlRGVidWcubmFtZXMubWFwKHRvTmFtZXNwYWNlKSxcblx0XHRcdC4uLmNyZWF0ZURlYnVnLnNraXBzLm1hcCh0b05hbWVzcGFjZSkubWFwKG5hbWVzcGFjZSA9PiAnLScgKyBuYW1lc3BhY2UpXG5cdFx0XS5qb2luKCcsJyk7XG5cdFx0Y3JlYXRlRGVidWcuZW5hYmxlKCcnKTtcblx0XHRyZXR1cm4gbmFtZXNwYWNlcztcblx0fVxuXG5cdC8qKlxuXHQqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gbW9kZSBuYW1lIGlzIGVuYWJsZWQsIGZhbHNlIG90aGVyd2lzZS5cblx0KlxuXHQqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG5cdCogQHJldHVybiB7Qm9vbGVhbn1cblx0KiBAYXBpIHB1YmxpY1xuXHQqL1xuXHRmdW5jdGlvbiBlbmFibGVkKG5hbWUpIHtcblx0XHRpZiAobmFtZVtuYW1lLmxlbmd0aCAtIDFdID09PSAnKicpIHtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblxuXHRcdGxldCBpO1xuXHRcdGxldCBsZW47XG5cblx0XHRmb3IgKGkgPSAwLCBsZW4gPSBjcmVhdGVEZWJ1Zy5za2lwcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuXHRcdFx0aWYgKGNyZWF0ZURlYnVnLnNraXBzW2ldLnRlc3QobmFtZSkpIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGZvciAoaSA9IDAsIGxlbiA9IGNyZWF0ZURlYnVnLm5hbWVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG5cdFx0XHRpZiAoY3JlYXRlRGVidWcubmFtZXNbaV0udGVzdChuYW1lKSkge1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHQvKipcblx0KiBDb252ZXJ0IHJlZ2V4cCB0byBuYW1lc3BhY2Vcblx0KlxuXHQqIEBwYXJhbSB7UmVnRXhwfSByZWd4ZXBcblx0KiBAcmV0dXJuIHtTdHJpbmd9IG5hbWVzcGFjZVxuXHQqIEBhcGkgcHJpdmF0ZVxuXHQqL1xuXHRmdW5jdGlvbiB0b05hbWVzcGFjZShyZWdleHApIHtcblx0XHRyZXR1cm4gcmVnZXhwLnRvU3RyaW5nKClcblx0XHRcdC5zdWJzdHJpbmcoMiwgcmVnZXhwLnRvU3RyaW5nKCkubGVuZ3RoIC0gMilcblx0XHRcdC5yZXBsYWNlKC9cXC5cXCpcXD8kLywgJyonKTtcblx0fVxuXG5cdC8qKlxuXHQqIENvZXJjZSBgdmFsYC5cblx0KlxuXHQqIEBwYXJhbSB7TWl4ZWR9IHZhbFxuXHQqIEByZXR1cm4ge01peGVkfVxuXHQqIEBhcGkgcHJpdmF0ZVxuXHQqL1xuXHRmdW5jdGlvbiBjb2VyY2UodmFsKSB7XG5cdFx0aWYgKHZhbCBpbnN0YW5jZW9mIEVycm9yKSB7XG5cdFx0XHRyZXR1cm4gdmFsLnN0YWNrIHx8IHZhbC5tZXNzYWdlO1xuXHRcdH1cblx0XHRyZXR1cm4gdmFsO1xuXHR9XG5cblx0LyoqXG5cdCogWFhYIERPIE5PVCBVU0UuIFRoaXMgaXMgYSB0ZW1wb3Jhcnkgc3R1YiBmdW5jdGlvbi5cblx0KiBYWFggSXQgV0lMTCBiZSByZW1vdmVkIGluIHRoZSBuZXh0IG1ham9yIHJlbGVhc2UuXG5cdCovXG5cdGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG5cdFx0Y29uc29sZS53YXJuKCdJbnN0YW5jZSBtZXRob2QgYGRlYnVnLmRlc3Ryb3koKWAgaXMgZGVwcmVjYXRlZCBhbmQgbm8gbG9uZ2VyIGRvZXMgYW55dGhpbmcuIEl0IHdpbGwgYmUgcmVtb3ZlZCBpbiB0aGUgbmV4dCBtYWpvciB2ZXJzaW9uIG9mIGBkZWJ1Z2AuJyk7XG5cdH1cblxuXHRjcmVhdGVEZWJ1Zy5lbmFibGUoY3JlYXRlRGVidWcubG9hZCgpKTtcblxuXHRyZXR1cm4gY3JlYXRlRGVidWc7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gc2V0dXA7XG4iLCIvKipcbiAqIEhlbHBlcnMuXG4gKi9cblxudmFyIHMgPSAxMDAwO1xudmFyIG0gPSBzICogNjA7XG52YXIgaCA9IG0gKiA2MDtcbnZhciBkID0gaCAqIDI0O1xudmFyIHcgPSBkICogNztcbnZhciB5ID0gZCAqIDM2NS4yNTtcblxuLyoqXG4gKiBQYXJzZSBvciBmb3JtYXQgdGhlIGdpdmVuIGB2YWxgLlxuICpcbiAqIE9wdGlvbnM6XG4gKlxuICogIC0gYGxvbmdgIHZlcmJvc2UgZm9ybWF0dGluZyBbZmFsc2VdXG4gKlxuICogQHBhcmFtIHtTdHJpbmd8TnVtYmVyfSB2YWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAqIEB0aHJvd3Mge0Vycm9yfSB0aHJvdyBhbiBlcnJvciBpZiB2YWwgaXMgbm90IGEgbm9uLWVtcHR5IHN0cmluZyBvciBhIG51bWJlclxuICogQHJldHVybiB7U3RyaW5nfE51bWJlcn1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbih2YWwsIG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIHZhciB0eXBlID0gdHlwZW9mIHZhbDtcbiAgaWYgKHR5cGUgPT09ICdzdHJpbmcnICYmIHZhbC5sZW5ndGggPiAwKSB7XG4gICAgcmV0dXJuIHBhcnNlKHZhbCk7XG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gJ251bWJlcicgJiYgaXNGaW5pdGUodmFsKSkge1xuICAgIHJldHVybiBvcHRpb25zLmxvbmcgPyBmbXRMb25nKHZhbCkgOiBmbXRTaG9ydCh2YWwpO1xuICB9XG4gIHRocm93IG5ldyBFcnJvcihcbiAgICAndmFsIGlzIG5vdCBhIG5vbi1lbXB0eSBzdHJpbmcgb3IgYSB2YWxpZCBudW1iZXIuIHZhbD0nICtcbiAgICAgIEpTT04uc3RyaW5naWZ5KHZhbClcbiAgKTtcbn07XG5cbi8qKlxuICogUGFyc2UgdGhlIGdpdmVuIGBzdHJgIGFuZCByZXR1cm4gbWlsbGlzZWNvbmRzLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge051bWJlcn1cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIHBhcnNlKHN0cikge1xuICBzdHIgPSBTdHJpbmcoc3RyKTtcbiAgaWYgKHN0ci5sZW5ndGggPiAxMDApIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIG1hdGNoID0gL14oLT8oPzpcXGQrKT9cXC4/XFxkKykgKihtaWxsaXNlY29uZHM/fG1zZWNzP3xtc3xzZWNvbmRzP3xzZWNzP3xzfG1pbnV0ZXM/fG1pbnM/fG18aG91cnM/fGhycz98aHxkYXlzP3xkfHdlZWtzP3x3fHllYXJzP3x5cnM/fHkpPyQvaS5leGVjKFxuICAgIHN0clxuICApO1xuICBpZiAoIW1hdGNoKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBuID0gcGFyc2VGbG9hdChtYXRjaFsxXSk7XG4gIHZhciB0eXBlID0gKG1hdGNoWzJdIHx8ICdtcycpLnRvTG93ZXJDYXNlKCk7XG4gIHN3aXRjaCAodHlwZSkge1xuICAgIGNhc2UgJ3llYXJzJzpcbiAgICBjYXNlICd5ZWFyJzpcbiAgICBjYXNlICd5cnMnOlxuICAgIGNhc2UgJ3lyJzpcbiAgICBjYXNlICd5JzpcbiAgICAgIHJldHVybiBuICogeTtcbiAgICBjYXNlICd3ZWVrcyc6XG4gICAgY2FzZSAnd2Vlayc6XG4gICAgY2FzZSAndyc6XG4gICAgICByZXR1cm4gbiAqIHc7XG4gICAgY2FzZSAnZGF5cyc6XG4gICAgY2FzZSAnZGF5JzpcbiAgICBjYXNlICdkJzpcbiAgICAgIHJldHVybiBuICogZDtcbiAgICBjYXNlICdob3Vycyc6XG4gICAgY2FzZSAnaG91cic6XG4gICAgY2FzZSAnaHJzJzpcbiAgICBjYXNlICdocic6XG4gICAgY2FzZSAnaCc6XG4gICAgICByZXR1cm4gbiAqIGg7XG4gICAgY2FzZSAnbWludXRlcyc6XG4gICAgY2FzZSAnbWludXRlJzpcbiAgICBjYXNlICdtaW5zJzpcbiAgICBjYXNlICdtaW4nOlxuICAgIGNhc2UgJ20nOlxuICAgICAgcmV0dXJuIG4gKiBtO1xuICAgIGNhc2UgJ3NlY29uZHMnOlxuICAgIGNhc2UgJ3NlY29uZCc6XG4gICAgY2FzZSAnc2Vjcyc6XG4gICAgY2FzZSAnc2VjJzpcbiAgICBjYXNlICdzJzpcbiAgICAgIHJldHVybiBuICogcztcbiAgICBjYXNlICdtaWxsaXNlY29uZHMnOlxuICAgIGNhc2UgJ21pbGxpc2Vjb25kJzpcbiAgICBjYXNlICdtc2Vjcyc6XG4gICAgY2FzZSAnbXNlYyc6XG4gICAgY2FzZSAnbXMnOlxuICAgICAgcmV0dXJuIG47XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbn1cblxuLyoqXG4gKiBTaG9ydCBmb3JtYXQgZm9yIGBtc2AuXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IG1zXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBmbXRTaG9ydChtcykge1xuICB2YXIgbXNBYnMgPSBNYXRoLmFicyhtcyk7XG4gIGlmIChtc0FicyA+PSBkKSB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQobXMgLyBkKSArICdkJztcbiAgfVxuICBpZiAobXNBYnMgPj0gaCkge1xuICAgIHJldHVybiBNYXRoLnJvdW5kKG1zIC8gaCkgKyAnaCc7XG4gIH1cbiAgaWYgKG1zQWJzID49IG0pIHtcbiAgICByZXR1cm4gTWF0aC5yb3VuZChtcyAvIG0pICsgJ20nO1xuICB9XG4gIGlmIChtc0FicyA+PSBzKSB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQobXMgLyBzKSArICdzJztcbiAgfVxuICByZXR1cm4gbXMgKyAnbXMnO1xufVxuXG4vKipcbiAqIExvbmcgZm9ybWF0IGZvciBgbXNgLlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBtc1xuICogQHJldHVybiB7U3RyaW5nfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gZm10TG9uZyhtcykge1xuICB2YXIgbXNBYnMgPSBNYXRoLmFicyhtcyk7XG4gIGlmIChtc0FicyA+PSBkKSB7XG4gICAgcmV0dXJuIHBsdXJhbChtcywgbXNBYnMsIGQsICdkYXknKTtcbiAgfVxuICBpZiAobXNBYnMgPj0gaCkge1xuICAgIHJldHVybiBwbHVyYWwobXMsIG1zQWJzLCBoLCAnaG91cicpO1xuICB9XG4gIGlmIChtc0FicyA+PSBtKSB7XG4gICAgcmV0dXJuIHBsdXJhbChtcywgbXNBYnMsIG0sICdtaW51dGUnKTtcbiAgfVxuICBpZiAobXNBYnMgPj0gcykge1xuICAgIHJldHVybiBwbHVyYWwobXMsIG1zQWJzLCBzLCAnc2Vjb25kJyk7XG4gIH1cbiAgcmV0dXJuIG1zICsgJyBtcyc7XG59XG5cbi8qKlxuICogUGx1cmFsaXphdGlvbiBoZWxwZXIuXG4gKi9cblxuZnVuY3Rpb24gcGx1cmFsKG1zLCBtc0FicywgbiwgbmFtZSkge1xuICB2YXIgaXNQbHVyYWwgPSBtc0FicyA+PSBuICogMS41O1xuICByZXR1cm4gTWF0aC5yb3VuZChtcyAvIG4pICsgJyAnICsgbmFtZSArIChpc1BsdXJhbCA/ICdzJyA6ICcnKTtcbn1cbiIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn07XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5NYWluU2NlbmUgPSBleHBvcnRzLm1haW5DaGFyYWN0ZXJpbml0aWFsUG9zaXRpb24gPSBleHBvcnRzLmlzVG91Y2hEZXZpY2UgPSB2b2lkIDA7XHJcbmNvbnN0IGVuYWJsZTNkXzEgPSByZXF1aXJlKFwiZW5hYmxlM2RcIik7XHJcbmNvbnN0IENoYWlyXzEgPSByZXF1aXJlKFwiLi9tb2R1bGVzL0NoYWlyXCIpO1xyXG5jb25zdCBDaGFyYWN0ZXJfMSA9IHJlcXVpcmUoXCIuL21vZHVsZXMvQ2hhcmFjdGVyXCIpO1xyXG5jb25zdCBDaGFyYWN0ZXJDb250cm9sbGVyXzEgPSByZXF1aXJlKFwiLi9tb2R1bGVzL0NoYXJhY3RlckNvbnRyb2xsZXJcIik7XHJcbmNvbnN0IENsYXNzcm9vbTNEXzEgPSByZXF1aXJlKFwiLi9tb2R1bGVzL0NsYXNzcm9vbTNEXCIpO1xyXG5jb25zdCBDbGFzc3Jvb21NYW5hZ2VyXzEgPSByZXF1aXJlKFwiLi9tb2R1bGVzL0NsYXNzcm9vbU1hbmFnZXJcIik7XHJcbmNvbnN0IGRhdGFfMSA9IHJlcXVpcmUoXCIuL21vZHVsZXMvZGF0YVwiKTtcclxuLyoqXHJcbiogSXMgdG91Y2ggZGV2aWNlP1xyXG4qL1xyXG5leHBvcnRzLmlzVG91Y2hEZXZpY2UgPSAnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3c7XHJcbmV4cG9ydHMubWFpbkNoYXJhY3RlcmluaXRpYWxQb3NpdGlvbiA9IG5ldyBlbmFibGUzZF8xLlRIUkVFLlZlY3RvcjMoLTYsIDAsIDUpO1xyXG5jb25zdCBNQVhJTVVNX0FVRElCTEVfRElTVEFOQ0UgPSAxMDtcclxuY2xhc3MgTWFpblNjZW5lIGV4dGVuZHMgZW5hYmxlM2RfMS5TY2VuZTNEIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKHsga2V5OiBcIk1haW5TY2VuZVwiIH0pO1xyXG4gICAgICAgIHRoaXMuc3ViQ2hhcmFjdGVycyA9IHt9O1xyXG4gICAgICAgIHRoaXMuY2hhaXJzID0gW107XHJcbiAgICAgICAgdGhpcy5jbGFzc3Jvb20gPSBuZXcgQ2xhc3Nyb29tTWFuYWdlcl8xLkNsYXNzcm9vbU1hbmFnZXIodGhpcyk7XHJcbiAgICB9XHJcbiAgICBpbml0KCkge1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIuc2V0UGl4ZWxSYXRpbyhNYXRoLm1heCgxLCB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyAvIDIpKTtcclxuICAgIH1cclxuICAgIHByZWxvYWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICAgICAgeWllbGQgUHJvbWlzZS5hbGwoW1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkLnByZWxvYWQoJ21hbicsICcuL3Jlc291cmNlcy9tb2RlbHMvYm94X21hbi9ib3hfbWFuLmdsYicpLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkLnByZWxvYWQoJ2JnMScsICcuL3Jlc291cmNlcy90ZXh0dXJlcy93b3JsZC9wb3N4LmpwZycpLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkLnByZWxvYWQoJ2JnMicsICcuL3Jlc291cmNlcy90ZXh0dXJlcy93b3JsZC9uZWd4LmpwZycpLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkLnByZWxvYWQoJ2JnMycsICcuL3Jlc291cmNlcy90ZXh0dXJlcy93b3JsZC9wb3N5LmpwZycpLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkLnByZWxvYWQoJ2JnNCcsICcuL3Jlc291cmNlcy90ZXh0dXJlcy93b3JsZC9uZWd5LmpwZycpLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkLnByZWxvYWQoJ2JnNScsICcuL3Jlc291cmNlcy90ZXh0dXJlcy93b3JsZC9wb3N6LmpwZycpLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkLnByZWxvYWQoJ2JnNicsICcuL3Jlc291cmNlcy90ZXh0dXJlcy93b3JsZC9uZWd6LmpwZycpLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkLnByZWxvYWQoJ3dvb2QnLCAnLi9yZXNvdXJjZXMvdGV4dHVyZXMvd29vZC5qcGcnKSxcclxuICAgICAgICAgICAgICAgIHRoaXMubG9hZC5wcmVsb2FkKCdmbG9vcicsICcuL3Jlc291cmNlcy90ZXh0dXJlcy9mbG9vci5qcGcnKVxyXG4gICAgICAgICAgICBdKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGNyZWF0ZSgpIHtcclxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgICAgICB5aWVsZCB0aGlzLndhcnBTcGVlZCgnLWdyb3VuZCcsICctb3JiaXRDb250cm9scycsICctbGlnaHQnLCAnLXNreScpO1xyXG4gICAgICAgICAgICAvLyB0aGlzLnBoeXNpY3MuZGVidWcuZW5hYmxlKClcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICogU2V0dXAgTGlnaHRzXHJcbiAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIHRoaXMuc2V0dXBMaWdodHMoKTtcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIFNldCB1cCBFbnZpb3JubWVudFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgdGhpcy5zZXR1cEVudmlvcm5tZW50KCk7XHJcbiAgICAgICAgICAgIC8vIEFkZCBDaGFyYWN0ZXJcclxuICAgICAgICAgICAgdGhpcy5hZGRNYWluQ2hhcmFjdGVyKGV4cG9ydHMubWFpbkNoYXJhY3RlcmluaXRpYWxQb3NpdGlvbik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBzZXR1cEVudmlvcm5tZW50KCkge1xyXG4gICAgICAgIGNvbnN0IGxvYWRlciA9IG5ldyBlbmFibGUzZF8xLlRIUkVFLkN1YmVUZXh0dXJlTG9hZGVyKCk7XHJcbiAgICAgICAgY29uc3QgdGVycmFpblRleHR1cmUgPSBsb2FkZXIubG9hZChbXHJcbiAgICAgICAgICAgICcuL3Jlc291cmNlcy90ZXh0dXJlcy93b3JsZC9wb3N4LmpwZycsXHJcbiAgICAgICAgICAgICcuL3Jlc291cmNlcy90ZXh0dXJlcy93b3JsZC9uZWd4LmpwZycsXHJcbiAgICAgICAgICAgICcuL3Jlc291cmNlcy90ZXh0dXJlcy93b3JsZC9wb3N5LmpwZycsXHJcbiAgICAgICAgICAgICcuL3Jlc291cmNlcy90ZXh0dXJlcy93b3JsZC9uZWd5LmpwZycsXHJcbiAgICAgICAgICAgICcuL3Jlc291cmNlcy90ZXh0dXJlcy93b3JsZC9wb3N6LmpwZycsXHJcbiAgICAgICAgICAgICcuL3Jlc291cmNlcy90ZXh0dXJlcy93b3JsZC9uZWd6LmpwZycsXHJcbiAgICAgICAgXSk7XHJcbiAgICAgICAgdGVycmFpblRleHR1cmUuZW5jb2RpbmcgPSBlbmFibGUzZF8xLlRIUkVFLnNSR0JFbmNvZGluZztcclxuICAgICAgICB0aGlzLnNjZW5lLmJhY2tncm91bmQgPSB0ZXJyYWluVGV4dHVyZTtcclxuICAgICAgICB0aGlzLmFkZENsYXNzcm9vbSgpO1xyXG4gICAgICAgIGZvciAobGV0IGkgb2YgZGF0YV8xLmNoYWlyUG9zaXRpb25zKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNoYWlyMSA9IG5ldyBDaGFpcl8xLkNoYWlyKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNoYWlyMiA9IG5ldyBDaGFpcl8xLkNoYWlyKCk7XHJcbiAgICAgICAgICAgIGNoYWlyMS5wb3NpdGlvbi5zZXQoaVswXSwgMCwgaVsxXSAtIDAuMzUpO1xyXG4gICAgICAgICAgICBjaGFpcjIucG9zaXRpb24uc2V0KGlbMF0sIDAsIGlbMV0gKyAwLjM1KTtcclxuICAgICAgICAgICAgY2hhaXIxLmFkZFRvV29ybGQodGhpcyk7XHJcbiAgICAgICAgICAgIGNoYWlyMi5hZGRUb1dvcmxkKHRoaXMpO1xyXG4gICAgICAgICAgICB0aGlzLmNoYWlycy5wdXNoKGNoYWlyMSk7XHJcbiAgICAgICAgICAgIHRoaXMuY2hhaXJzLnB1c2goY2hhaXIyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBhZGRDbGFzc3Jvb20oKSB7XHJcbiAgICAgICAgQ2xhc3Nyb29tM0RfMS5hZGRDbGFzc3Jvb21Ub1NjZW5lKHRoaXMpO1xyXG4gICAgfVxyXG4gICAgc2V0dXBMaWdodHMoKSB7XHJcbiAgICAgICAgY29uc3QgZGlyZWN0aW9uYWxMaWdodCA9IG5ldyBlbmFibGUzZF8xLlRIUkVFLkRpcmVjdGlvbmFsTGlnaHQoMHhGRkZGRkYsIDAuNik7XHJcbiAgICAgICAgZGlyZWN0aW9uYWxMaWdodC5wb3NpdGlvbi5zZXQoLTQwLCAzMCwgLTQwKTtcclxuICAgICAgICBkaXJlY3Rpb25hbExpZ2h0LnRhcmdldC5wb3NpdGlvbi5zZXQoMCwgMCwgMCk7XHJcbiAgICAgICAgZGlyZWN0aW9uYWxMaWdodC5jYXN0U2hhZG93ID0gdHJ1ZTtcclxuICAgICAgICBkaXJlY3Rpb25hbExpZ2h0LnNoYWRvdy5iaWFzID0gLTAuMDAxO1xyXG4gICAgICAgIGRpcmVjdGlvbmFsTGlnaHQuc2hhZG93Lm1hcFNpemUud2lkdGggPSA0MDk2O1xyXG4gICAgICAgIGRpcmVjdGlvbmFsTGlnaHQuc2hhZG93Lm1hcFNpemUuaGVpZ2h0ID0gNDA5NjtcclxuICAgICAgICBkaXJlY3Rpb25hbExpZ2h0LnNoYWRvdy5jYW1lcmEubmVhciA9IDAuMTtcclxuICAgICAgICBkaXJlY3Rpb25hbExpZ2h0LnNoYWRvdy5jYW1lcmEuZmFyID0gNTAwLjA7XHJcbiAgICAgICAgZGlyZWN0aW9uYWxMaWdodC5zaGFkb3cuY2FtZXJhLmxlZnQgPSA1MDtcclxuICAgICAgICBkaXJlY3Rpb25hbExpZ2h0LnNoYWRvdy5jYW1lcmEucmlnaHQgPSAtNTA7XHJcbiAgICAgICAgZGlyZWN0aW9uYWxMaWdodC5zaGFkb3cuY2FtZXJhLnRvcCA9IDUwO1xyXG4gICAgICAgIGRpcmVjdGlvbmFsTGlnaHQuc2hhZG93LmNhbWVyYS5ib3R0b20gPSAtNTA7XHJcbiAgICAgICAgdGhpcy5zY2VuZS5hZGQoZGlyZWN0aW9uYWxMaWdodCk7XHJcbiAgICAgICAgY29uc3QgYW1iaWVudExpZ2h0ID0gbmV3IGVuYWJsZTNkXzEuVEhSRUUuQW1iaWVudExpZ2h0KDB4RkZGRkZGLCAxKTtcclxuICAgICAgICB0aGlzLnNjZW5lLmFkZChhbWJpZW50TGlnaHQpO1xyXG4gICAgfVxyXG4gICAgYWRkTWFpbkNoYXJhY3Rlcihpbml0aWFsUG9zaXRpb24gPSB1bmRlZmluZWQpIHtcclxuICAgICAgICB0aGlzLm1haW5DaGFyYWN0ZXIgPSBuZXcgQ2hhcmFjdGVyXzEuQ2hhcmFjdGVyKHtcclxuICAgICAgICAgICAgc2NlbmU6IHRoaXMsXHJcbiAgICAgICAgICAgIGluaXRpYWxQb3NpdGlvbjogZXhwb3J0cy5tYWluQ2hhcmFjdGVyaW5pdGlhbFBvc2l0aW9uLFxyXG4gICAgICAgICAgICBvblJlYWR5OiAoY2hhcmFjdGVyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoYXJhY3RlckNvbnRyb2xsZXIgPSBuZXcgQ2hhcmFjdGVyQ29udHJvbGxlcl8xLkNoYXJhY3RlckNvbnRyb2xsZXIoe1xyXG4gICAgICAgICAgICAgICAgICAgIGNoYXJhY3RlcixcclxuICAgICAgICAgICAgICAgICAgICBjYW1lcmE6IHRoaXMuY2FtZXJhLFxyXG4gICAgICAgICAgICAgICAgICAgIHNjZW5lOiB0aGlzXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgc2V0TWFpbkNoYXJhY3RlckNvbG9yRnJvbVN0cmluZyhjb2xvcikge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICAoX2EgPSB0aGlzLm1haW5DaGFyYWN0ZXIpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5zZXRDb2xvcihuZXcgZW5hYmxlM2RfMS5USFJFRS5Db2xvcihjb2xvcikpO1xyXG4gICAgfVxyXG4gICAgYWRkU3ViQ2hhcmFjdGVyKGNoYXJhY3Rlcikge1xyXG4gICAgICAgIGlmICghT2JqZWN0LmtleXModGhpcy5zdWJDaGFyYWN0ZXJzKS5pbmNsdWRlcygndXVpZCcpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGluaXRpYWxQb3NpdGlvbiA9IG5ldyBlbmFibGUzZF8xLlRIUkVFLlZlY3RvcjMoY2hhcmFjdGVyLnBvc2l0aW9uLngsIGNoYXJhY3Rlci5wb3NpdGlvbi55LCBjaGFyYWN0ZXIucG9zaXRpb24ueik7XHJcbiAgICAgICAgICAgIGNvbnN0IG5ld0NoYXJhY3RlciA9IG5ldyBDaGFyYWN0ZXJfMS5DaGFyYWN0ZXIoeyBzY2VuZTogdGhpcywgY29sb3I6IG5ldyBlbmFibGUzZF8xLlRIUkVFLkNvbG9yKGNoYXJhY3Rlci5jb2xvciksIGluaXRpYWxQb3NpdGlvbiB9KTtcclxuICAgICAgICAgICAgbmV3Q2hhcmFjdGVyLmxvb2tpbmdBdC5zZXQoLi4uY2hhcmFjdGVyLmxvb2tpbmdBdCk7XHJcbiAgICAgICAgICAgIG5ld0NoYXJhY3Rlci5pc1NpdHRpbmcgPSBjaGFyYWN0ZXIuaXNTaXR0aW5nO1xyXG4gICAgICAgICAgICBuZXdDaGFyYWN0ZXIuYWRkTmFtZUxhYmVsKGNoYXJhY3Rlci51c2VybmFtZSk7XHJcbiAgICAgICAgICAgIHRoaXMuc3ViQ2hhcmFjdGVyc1tjaGFyYWN0ZXIudXVpZF0gPSBuZXdDaGFyYWN0ZXI7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiTmV3IGNoYXJhY3RlciBhZGRlZFwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICB1cGRhdGUodGltZSwgZGVsdGEpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgKF9hID0gdGhpcy5jaGFyYWN0ZXJDb250cm9sbGVyKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EudXBkYXRlKHRpbWUsIGRlbHRhKTtcclxuICAgICAgICBPYmplY3Qua2V5cyh0aGlzLnN1YkNoYXJhY3RlcnMpLmZvckVhY2godXVpZCA9PiB7XHJcbiAgICAgICAgICAgIHZhciBfYTtcclxuICAgICAgICAgICAgY29uc3QgY2hhcmFjdGVyID0gdGhpcy5zdWJDaGFyYWN0ZXJzW3V1aWRdO1xyXG4gICAgICAgICAgICBjaGFyYWN0ZXIudXBkYXRlKHRpbWUsIGRlbHRhKTtcclxuICAgICAgICAgICAgaWYgKCgoX2EgPSB0aGlzLm1haW5DaGFyYWN0ZXIpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS50YXJnZXQpICYmIGNoYXJhY3Rlci50YXJnZXQgJiYgdGhpcy5jbGFzc3Jvb20uYXVkaW9zW3V1aWRdKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkaXN0YW5jZSA9IHRoaXMubWFpbkNoYXJhY3Rlci50YXJnZXQucG9zaXRpb24uZGlzdGFuY2VUbyhjaGFyYWN0ZXIudGFyZ2V0LnBvc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xhc3Nyb29tLmF1ZGlvc1t1dWlkXS52b2x1bWUgPSBNYXRoLm1heCgoTUFYSU1VTV9BVURJQkxFX0RJU1RBTkNFIC0gZGlzdGFuY2UpIC8gTUFYSU1VTV9BVURJQkxFX0RJU1RBTkNFLCAwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydHMuTWFpblNjZW5lID0gTWFpblNjZW5lO1xyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsICgpID0+IHtcclxuICAgIGVuYWJsZTNkXzEuUGh5c2ljc0xvYWRlcignYW1tbycsICgpID0+IHtcclxuICAgICAgICBjb25zdCBwcm9qZWN0ID0gbmV3IGVuYWJsZTNkXzEuUHJvamVjdCh7IGFudGlhbGlhczogdHJ1ZSwgbWF4U3ViU3RlcHM6IDEwLCBncmF2aXR5OiB7IHg6IDAsIHk6IC05LjgxLCB6OiAwIH0sIGZpeGVkVGltZVN0ZXA6IDEgLyAxMjAsIHNjZW5lczogW01haW5TY2VuZV0gfSk7XHJcbiAgICAgICAgcHJvamVjdC5jYW52YXMuc3R5bGUubWFyZ2luVG9wID0gJzBweCAhaW1wb3J0YW50JztcclxuICAgICAgICBjb25zdCBodG1sQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NsYXNzcm9vbScpO1xyXG4gICAgICAgIGlmICghaHRtbENvbnRhaW5lcilcclxuICAgICAgICAgICAgdGhyb3cgKFwiQ2FuJ3QgZmluZCBhbiBodG1sIGVsZW1lbnQgd2l0aCBpZCBjbGFzc3Jvb21cIik7XHJcbiAgICAgICAgaHRtbENvbnRhaW5lci5hcHBlbmRDaGlsZChwcm9qZWN0LmNhbnZhcyk7XHJcbiAgICAgICAgcHJvamVjdC5jYW52YXMuc3R5bGUubWFyZ2luVG9wID0gJzBweCAhaW1wb3J0YW50JztcclxuICAgICAgICBjb25zdCByZXNpemUgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5ld1dpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XHJcbiAgICAgICAgICAgIGNvbnN0IG5ld0hlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcclxuICAgICAgICAgICAgaHRtbENvbnRhaW5lci5zdHlsZS53aWR0aCA9IGAke25ld1dpZHRofXB4YDtcclxuICAgICAgICAgICAgaHRtbENvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSBgJHtuZXdIZWlnaHR9cHhgO1xyXG4gICAgICAgICAgICBwcm9qZWN0LnJlbmRlcmVyLnNldFNpemUobmV3V2lkdGgsIG5ld0hlaWdodCk7XHJcbiAgICAgICAgICAgIGlmICgnYXNwZWN0JyBpbiBwcm9qZWN0LmNhbWVyYSlcclxuICAgICAgICAgICAgICAgIHByb2plY3QuY2FtZXJhLmFzcGVjdCA9IG5ld1dpZHRoIC8gbmV3SGVpZ2h0O1xyXG4gICAgICAgICAgICBwcm9qZWN0LmNhbWVyYS51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB3aW5kb3cub25yZXNpemUgPSByZXNpemU7XHJcbiAgICAgICAgcmVzaXplKCk7XHJcbiAgICB9KTtcclxufSk7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuQ2hhaXIgPSB2b2lkIDA7XHJcbmNvbnN0IGVuYWJsZTNkXzEgPSByZXF1aXJlKFwiZW5hYmxlM2RcIik7XHJcbmNvbnN0IGxvYWRlciA9IG5ldyBlbmFibGUzZF8xLlRIUkVFLlRleHR1cmVMb2FkZXIoKTtcclxuY2xhc3MgQ2hhaXIgZXh0ZW5kcyBlbmFibGUzZF8xLkV4dGVuZGVkT2JqZWN0M0Qge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICBjb25zdCBncm91cCA9IG5ldyBlbmFibGUzZF8xLlRIUkVFLkdyb3VwKCk7XHJcbiAgICAgICAgY29uc3QgbWF0ZXJpYWwgPSBuZXcgZW5hYmxlM2RfMS5USFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7XHJcbiAgICAgICAgICAgIGNvbG9yOiAweEZGODg0NCxcclxuICAgICAgICAgICAgbWFwOiBsb2FkZXIubG9hZCgnLi9yZXNvdXJjZXMvdGV4dHVyZXMvd29vZC5qcGcnKSxcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmFkZChuZXcgZW5hYmxlM2RfMS5USFJFRS5NZXNoKG5ldyBlbmFibGUzZF8xLlRIUkVFLkJveEdlb21ldHJ5KDAuMSwgMSwgMC4xKS50cmFuc2xhdGUoMC40NSwgMC41LCAwLjQ1KSkpOyAvLyBMZWcgMVxyXG4gICAgICAgIHRoaXMuYWRkKG5ldyBlbmFibGUzZF8xLlRIUkVFLk1lc2gobmV3IGVuYWJsZTNkXzEuVEhSRUUuQm94R2VvbWV0cnkoMC4xLCAxLCAwLjEpLnRyYW5zbGF0ZSgwLjQ1LCAwLjUsIC0wLjQ1KSkpOyAvLyBMZWcgMlxyXG4gICAgICAgIHRoaXMuYWRkKG5ldyBlbmFibGUzZF8xLlRIUkVFLk1lc2gobmV3IGVuYWJsZTNkXzEuVEhSRUUuQm94R2VvbWV0cnkoMC4xLCAxLCAwLjEpLnRyYW5zbGF0ZSgtMC40NSwgMC41LCAwLjQ1KSkpOyAvLyBMZWcgM1xyXG4gICAgICAgIHRoaXMuYWRkKG5ldyBlbmFibGUzZF8xLlRIUkVFLk1lc2gobmV3IGVuYWJsZTNkXzEuVEhSRUUuQm94R2VvbWV0cnkoMC4xLCAxLCAwLjEpLnRyYW5zbGF0ZSgtMC40NSwgMC41LCAtMC40NSkpKTsgLy8gTGVnIDRcclxuICAgICAgICB0aGlzLmFkZChuZXcgZW5hYmxlM2RfMS5USFJFRS5NZXNoKG5ldyBlbmFibGUzZF8xLlRIUkVFLkJveEdlb21ldHJ5KDEsIDAuMTEsIDEpLnRyYW5zbGF0ZSgwLCAxLCAwKSkpOyAvLyBTZWF0XHJcbiAgICAgICAgdGhpcy5hZGQobmV3IGVuYWJsZTNkXzEuVEhSRUUuTWVzaChuZXcgZW5hYmxlM2RfMS5USFJFRS5Cb3hHZW9tZXRyeSgwLjEsIDEuMywgMSkudHJhbnNsYXRlKDAuNSwgMS42LCAwKSkpOyAvLyBTaWRlXHJcbiAgICAgICAgdGhpcy50cmF2ZXJzZSgoY2hpbGQpID0+IHtcclxuICAgICAgICAgICAgaWYgKGNoaWxkLmlzTWVzaCkge1xyXG4gICAgICAgICAgICAgICAgY2hpbGQuY2FzdFNoYWRvdyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBjaGlsZC5yZWNlaXZlU2hhZG93ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGNoaWxkLm1hdGVyaWFsID0gbWF0ZXJpYWw7XHJcbiAgICAgICAgICAgICAgICBjaGlsZC5tYXRlcmlhbC5yb3VnaG5lc3MgPSAwLjU7XHJcbiAgICAgICAgICAgICAgICBjaGlsZC5tYXRlcmlhbC5tZXRhbG5lc3MgPSAwLjU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnNjYWxlLnNldFNjYWxhcigwLjQzKTtcclxuICAgIH1cclxuICAgIGFkZFRvV29ybGQoc2NlbmUpIHtcclxuICAgICAgICBzY2VuZS5hZGQuZXhpc3RpbmcodGhpcyk7XHJcbiAgICAgICAgc2NlbmUucGh5c2ljcy5hZGQuZXhpc3RpbmcodGhpcywge1xyXG4gICAgICAgICAgICBzaGFwZTogJ2JveCcsXHJcbiAgICAgICAgICAgIHdpZHRoOiAwLjUsXHJcbiAgICAgICAgICAgIGhlaWdodDogMSxcclxuICAgICAgICAgICAgb2Zmc2V0OiB7IHk6IC0wLjI1IH0sXHJcbiAgICAgICAgICAgIG1hc3M6IDEwMDAwMFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuYm9keS5zZXRGcmljdGlvbigxMDApO1xyXG4gICAgICAgIHRoaXMuYm9keS5zZXRDb2xsaXNpb25GbGFncygwKTtcclxuICAgICAgICB0aGlzLmJvZHkuc2V0QW5ndWxhckZhY3RvcigwLCAwLCAwKTtcclxuICAgICAgICAvLyBodHRwczovL2RvY3MucGFuZGEzZC5vcmcvMS4xMC9weXRob24vcHJvZ3JhbW1pbmcvcGh5c2ljcy9idWxsZXQvY2NkXHJcbiAgICAgICAgdGhpcy5ib2R5LnNldENjZE1vdGlvblRocmVzaG9sZCgxZS03KTtcclxuICAgICAgICB0aGlzLmJvZHkuc2V0Q2NkU3dlcHRTcGhlcmVSYWRpdXMoMC4yNSk7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0cy5DaGFpciA9IENoYWlyO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59O1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuQ2hhcmFjdGVyID0gdm9pZCAwO1xyXG5jb25zdCBlbmFibGUzZF8xID0gcmVxdWlyZShcImVuYWJsZTNkXCIpO1xyXG5jb25zdCBfXzEgPSByZXF1aXJlKFwiLi5cIik7XHJcbmNvbnN0IERFRkFVTFRfVkVDVE9SXzMgPSBuZXcgZW5hYmxlM2RfMS5USFJFRS5WZWN0b3IzKCk7XHJcbmNvbnN0IE1PVkVNRU5UX1NQRUVEID0gMy41O1xyXG5jbGFzcyBDaGFyYWN0ZXIge1xyXG4gICAgY29uc3RydWN0b3IocGFyYW1zKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIHRoaXMubG9va2luZ0F0ID0gbmV3IGVuYWJsZTNkXzEuVEhSRUUuVmVjdG9yMygpO1xyXG4gICAgICAgIHRoaXMuaXNNb3ZpbmdGb3J3YXJkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5pc1NpdHRpbmcgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnBhcmFtcyA9IHBhcmFtcztcclxuICAgICAgICB0aGlzLmNvbG9yID0gKF9hID0gcGFyYW1zLmNvbG9yKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBuZXcgZW5hYmxlM2RfMS5USFJFRS5Db2xvcigweEZGRkZGRik7XHJcbiAgICAgICAgdGhpcy5sb2FkQ2hhcmFjdGVyKCk7XHJcbiAgICB9XHJcbiAgICBsb2FkQ2hhcmFjdGVyKCkge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgICAgICBjb25zdCBvYmplY3QgPSB5aWVsZCB0aGlzLnBhcmFtcy5zY2VuZS5sb2FkLmdsdGYoJ21hbicpO1xyXG4gICAgICAgICAgICBjb25zdCBtYW4gPSBvYmplY3Quc2NlbmUuY2hpbGRyZW5bMF07XHJcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0ID0gbmV3IGVuYWJsZTNkXzEuRXh0ZW5kZWRPYmplY3QzRCgpO1xyXG4gICAgICAgICAgICB0aGlzLnRhcmdldC5uYW1lID0gJ2NoYXJhY3Rlcic7XHJcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0LnJvdGF0ZVkoTWF0aC5QSSArIDAuMSk7IC8vIGEgaGFja1xyXG4gICAgICAgICAgICB0aGlzLnRhcmdldC5hZGQobWFuKTtcclxuICAgICAgICAgICAgdGhpcy50YXJnZXQucm90YXRpb24uc2V0KDAsIE1hdGguUEkgKiAxLjUsIDApO1xyXG4gICAgICAgICAgICBjb25zdCBpbml0aWFsUG9zaXRpb24gPSAoX2EgPSB0aGlzLnBhcmFtcy5pbml0aWFsUG9zaXRpb24pICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IG5ldyBlbmFibGUzZF8xLlRIUkVFLlZlY3RvcjMoKTtcclxuICAgICAgICAgICAgaW5pdGlhbFBvc2l0aW9uLnNldFkoaW5pdGlhbFBvc2l0aW9uLnkpO1xyXG4gICAgICAgICAgICB0aGlzLnRhcmdldC5wb3NpdGlvbi5zZXQoLi4uaW5pdGlhbFBvc2l0aW9uLnRvQXJyYXkoKSk7XHJcbiAgICAgICAgICAgIC8vIEFkZCBzaGFkb3cgYW5kIENvbG9yXHJcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0LnRyYXZlcnNlKChjaGlsZCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNoaWxkLmlzTWVzaCAmJiBjaGlsZC5uYW1lICE9ICduYW1lLWxhYmVsJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkLmNhc3RTaGFkb3cgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkLnJlY2VpdmVTaGFkb3cgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkLm1hdGVyaWFsLmNvbG9yLnNldCh0aGlzLmNvbG9yKTtcclxuICAgICAgICAgICAgICAgICAgICBjaGlsZC5tYXRlcmlhbC5yb3VnaG5lc3MgPSAwLjU7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hpbGQubWF0ZXJpYWwubWV0YWxuZXNzID0gMC41O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICogQW5pbWF0aW9uc1xyXG4gICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICAvLyBhZCB0aGUgYm94IG1hbidzIGFuaW1hdGlvbiBtaXhlciB0byB0aGUgYW5pbWF0aW9uTWl4ZXJzIGFycmF5IChmb3IgYXV0byB1cGRhdGVzKVxyXG4gICAgICAgICAgICB0aGlzLnBhcmFtcy5zY2VuZS5hbmltYXRpb25NaXhlcnMuYWRkKHRoaXMudGFyZ2V0LmFuaW1hdGlvbi5taXhlcik7XHJcbiAgICAgICAgICAgIG9iamVjdC5hbmltYXRpb25zLmZvckVhY2goYW5pbWF0aW9uID0+IHtcclxuICAgICAgICAgICAgICAgIHZhciBfYTtcclxuICAgICAgICAgICAgICAgIGlmIChhbmltYXRpb24ubmFtZSlcclxuICAgICAgICAgICAgICAgICAgICAoX2EgPSB0aGlzLnRhcmdldCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmFuaW1hdGlvbi5hZGQoYW5pbWF0aW9uLm5hbWUsIGFuaW1hdGlvbik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLnRhcmdldC5hbmltYXRpb24ucGxheSgnaWRsZScpO1xyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgKiBBZGQgdGhlIHBsYXllciB0byB0aGUgc2NlbmUgd2l0aCBhIGJvZHlcclxuICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgdGhpcy5wYXJhbXMuc2NlbmUuYWRkLmV4aXN0aW5nKHRoaXMudGFyZ2V0KTtcclxuICAgICAgICAgICAgdGhpcy5wYXJhbXMuc2NlbmUucGh5c2ljcy5hZGQuZXhpc3RpbmcodGhpcy50YXJnZXQsIHtcclxuICAgICAgICAgICAgICAgIHNoYXBlOiAnc3BoZXJlJyxcclxuICAgICAgICAgICAgICAgIHJhZGl1czogMC4yNSxcclxuICAgICAgICAgICAgICAgIHdpZHRoOiAwLjUsXHJcbiAgICAgICAgICAgICAgICBvZmZzZXQ6IHsgeTogLTAuMjUgfSxcclxuICAgICAgICAgICAgICAgIG1hc3M6IDEwMFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy50YXJnZXQuYm9keS5zZXRGcmljdGlvbigxMDApO1xyXG4gICAgICAgICAgICB0aGlzLnRhcmdldC5ib2R5LnNldEFuZ3VsYXJGYWN0b3IoMCwgMCwgMCk7XHJcbiAgICAgICAgICAgIC8vIGh0dHBzOi8vZG9jcy5wYW5kYTNkLm9yZy8xLjEwL3B5dGhvbi9wcm9ncmFtbWluZy9waHlzaWNzL2J1bGxldC9jY2RcclxuICAgICAgICAgICAgdGhpcy50YXJnZXQuYm9keS5zZXRDY2RNb3Rpb25UaHJlc2hvbGQoMWUtNyk7XHJcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0LmJvZHkuc2V0Q2NkU3dlcHRTcGhlcmVSYWRpdXMoMC4yNSk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmFtcy5vblJlYWR5KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmFtcy5vblJlYWR5KHRoaXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0LmJvZHkubmVlZFVwZGF0ZSA9IHRydWU7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBzZXRDb2xvcihjb2xvcikge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICB0aGlzLmNvbG9yID0gY29sb3I7XHJcbiAgICAgICAgKF9hID0gdGhpcy50YXJnZXQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS50cmF2ZXJzZSgoY2hpbGQpID0+IHtcclxuICAgICAgICAgICAgaWYgKGNoaWxkLmlzTWVzaCAmJiBjaGlsZC5uYW1lICE9ICduYW1lLWxhYmVsJykge1xyXG4gICAgICAgICAgICAgICAgY2hpbGQubWF0ZXJpYWwuY29sb3Iuc2V0KHRoaXMuY29sb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBhZGROYW1lTGFiZWwobmFtZSkge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICBpZiAodGhpcy5uYW1lTGFiZWwpIHtcclxuICAgICAgICAgICAgKF9hID0gdGhpcy50YXJnZXQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5yZW1vdmUodGhpcy5uYW1lTGFiZWwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XHJcbiAgICAgICAgdmFyIGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XHJcbiAgICAgICAgaWYgKGN0eCkge1xyXG4gICAgICAgICAgICBjdHguY2FudmFzLmhlaWdodCA9IDMwMDtcclxuICAgICAgICAgICAgY3R4LmNhbnZhcy5oZWlnaHQgPSA0MDtcclxuICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IFwicmdiYSgyNTUsMjU1LDI1NSwxKVwiO1xyXG4gICAgICAgICAgICBjdHguZm9udCA9IFwiMjVweCBBcmlhbFwiO1xyXG4gICAgICAgICAgICBjdHgudGV4dEFsaWduID0gJ2NlbnRlcic7XHJcbiAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICcjMDAwMDAwJztcclxuICAgICAgICAgICAgY3R4LmxpbmVXaWR0aCA9IDg7XHJcbiAgICAgICAgICAgIGN0eC5zdHJva2VUZXh0KG5hbWUsIDE1MCwgMjcuNSk7XHJcbiAgICAgICAgICAgIGN0eC5maWxsVGV4dChuYW1lLCAxNTAsIDI3LjUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgdGV4dHVyZSA9IG5ldyBlbmFibGUzZF8xLlRIUkVFLlRleHR1cmUoY2FudmFzKTtcclxuICAgICAgICB0ZXh0dXJlLm5lZWRzVXBkYXRlID0gdHJ1ZTtcclxuICAgICAgICBjb25zdCBuYW1lTGFiZWwgPSBuZXcgZW5hYmxlM2RfMS5USFJFRS5NZXNoKG5ldyBlbmFibGUzZF8xLlRIUkVFLlBsYW5lR2VvbWV0cnkoMSwgMC4xNSksIG5ldyBlbmFibGUzZF8xLlRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHsgbWFwOiB0ZXh0dXJlLCBzaWRlOiBlbmFibGUzZF8xLlRIUkVFLkRvdWJsZVNpZGUsIHRyYW5zcGFyZW50OiB0cnVlIH0pKTtcclxuICAgICAgICBuYW1lTGFiZWwubmFtZSA9ICduYW1lLWxhYmVsJztcclxuICAgICAgICBuYW1lTGFiZWwucG9zaXRpb24uc2V0WSgxLjI1KTtcclxuICAgICAgICB0aGlzLm5hbWVMYWJlbCA9IG5hbWVMYWJlbDtcclxuICAgICAgICBjb25zdCBhdHRhdGNoVG9UYXJnZXQgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnRhcmdldClcclxuICAgICAgICAgICAgICAgIHRoaXMudGFyZ2V0LmFkZChuYW1lTGFiZWwpO1xyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoYXR0YXRjaFRvVGFyZ2V0LCAxMDAwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgYXR0YXRjaFRvVGFyZ2V0KCk7XHJcbiAgICB9XHJcbiAgICB1cGRhdGUodGltZSwgZGVsdGEpIHtcclxuICAgICAgICB2YXIgX2EsIF9iO1xyXG4gICAgICAgIGlmICghKChfYSA9IHRoaXMudGFyZ2V0KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuYm9keSkpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICBjb25zdCByb3RhdGlvbiA9IHRoaXMuaXNTaXR0aW5nID09IGZhbHNlID8gdGhpcy5sb29raW5nQXQgOiBuZXcgZW5hYmxlM2RfMS5USFJFRS5WZWN0b3IzKC0xMDAwMDAwLCAwLCAwKTtcclxuICAgICAgICBjb25zdCB0aGV0YSA9IE1hdGguYXRhbjIocm90YXRpb24ueCwgcm90YXRpb24ueik7XHJcbiAgICAgICAgdGhpcy50YXJnZXQuYm9keS5zZXRBbmd1bGFyVmVsb2NpdHlZKDApO1xyXG4gICAgICAgIGNvbnN0IHJvdGF0aW9uTWFuID0gdGhpcy50YXJnZXQuZ2V0V29ybGREaXJlY3Rpb24oREVGQVVMVF9WRUNUT1JfMyk7XHJcbiAgICAgICAgY29uc3QgdGhldGFNYW4gPSBNYXRoLmF0YW4yKHJvdGF0aW9uTWFuLngsIHJvdGF0aW9uTWFuLnopO1xyXG4gICAgICAgIGNvbnN0IGwgPSBNYXRoLmFicyh0aGV0YSAtIHRoZXRhTWFuKTtcclxuICAgICAgICBsZXQgcm90YXRpb25TcGVlZCA9IF9fMS5pc1RvdWNoRGV2aWNlID8gMiA6IDQ7XHJcbiAgICAgICAgbGV0IGQgPSBNYXRoLlBJIC8gMjQ7XHJcbiAgICAgICAgaWYgKGwgPiBkKSB7XHJcbiAgICAgICAgICAgIGlmIChsID4gTWF0aC5QSSAtIGQpXHJcbiAgICAgICAgICAgICAgICByb3RhdGlvblNwZWVkICo9IC0xO1xyXG4gICAgICAgICAgICBpZiAodGhldGEgPCB0aGV0YU1hbilcclxuICAgICAgICAgICAgICAgIHJvdGF0aW9uU3BlZWQgKj0gLTE7XHJcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0LmJvZHkuc2V0QW5ndWxhclZlbG9jaXR5WShyb3RhdGlvblNwZWVkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc3dpdGNoICh0aGlzLnRhcmdldC5hbmltYXRpb24uY3VycmVudCkge1xyXG4gICAgICAgICAgICBjYXNlICdpZGxlJzpcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzTW92aW5nRm9yd2FyZCA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YXJnZXQuYW5pbWF0aW9uLnBsYXkoJ3J1bicpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNTaXR0aW5nID09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRhcmdldC5hbmltYXRpb24ucGxheSgnc2l0X2Rvd25fcmlnaHQnLCB1bmRlZmluZWQsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRhcmdldC5ib2R5LnNldFZlbG9jaXR5WSgzLjIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4geyB2YXIgX2E7IHJldHVybiAoX2EgPSB0aGlzLnRhcmdldCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmJvZHkuc2V0VmVsb2NpdHlYKDEpOyB9LCAxMDApO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3J1bic6XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc01vdmluZ0ZvcndhcmQgPT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRhcmdldC5hbmltYXRpb24ucGxheSgnaWRsZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVNb3ZlbWVudCh0aGV0YSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnc2l0X2Rvd25fcmlnaHQnOlxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNTaXR0aW5nID09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YXJnZXQuYm9keS5zZXRWZWxvY2l0eSgtMSwgMiwgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YXJnZXQuYW5pbWF0aW9uLnBsYXkoJ2lkbGUnKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUGxheWVyIExhYmVsIFVwZGF0ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIChfYiA9IHRoaXMubmFtZUxhYmVsKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IubG9va0F0KHRoaXMucGFyYW1zLnNjZW5lLmNhbWVyYS5wb3NpdGlvbik7XHJcbiAgICB9XHJcbiAgICB1cGRhdGVNb3ZlbWVudCh0aGV0YSkge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICBpZiAoISgoX2EgPSB0aGlzLnRhcmdldCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmJvZHkpKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgY29uc3QgeCA9IE1hdGguc2luKHRoZXRhKSAqIE1PVkVNRU5UX1NQRUVELCB5ID0gdGhpcy50YXJnZXQuYm9keS52ZWxvY2l0eS55LCB6ID0gTWF0aC5jb3ModGhldGEpICogTU9WRU1FTlRfU1BFRUQ7XHJcbiAgICAgICAgdGhpcy50YXJnZXQuYm9keS5zZXRWZWxvY2l0eSh4LCB5LCB6KTtcclxuICAgIH1cclxuICAgIGRlbGV0ZSgpIHtcclxuICAgICAgICBpZiAodGhpcy50YXJnZXQpXHJcbiAgICAgICAgICAgIHRoaXMucGFyYW1zLnNjZW5lLnNjZW5lLnJlbW92ZSh0aGlzLnRhcmdldCk7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0cy5DaGFyYWN0ZXIgPSBDaGFyYWN0ZXI7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuQ2hhcmFjdGVyQ29udHJvbGxlciA9IHZvaWQgMDtcclxuY29uc3QgZW5hYmxlM2RfMSA9IHJlcXVpcmUoXCJlbmFibGUzZFwiKTtcclxuY29uc3QgX18xID0gcmVxdWlyZShcIi4uXCIpO1xyXG5jb25zdCBERUZBVUxUX1ZFQ1RPUl8zID0gbmV3IGVuYWJsZTNkXzEuVEhSRUUuVmVjdG9yMygpO1xyXG5jbGFzcyBDaGFyYWN0ZXJDb250cm9sbGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKHBhcmFtcykge1xyXG4gICAgICAgIHRoaXMua2V5cyA9IHtcclxuICAgICAgICAgICAgdzogeyBpc0Rvd246IGZhbHNlIH0sXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLm1vdXNlTW92ZW1lbnRYID0gMDtcclxuICAgICAgICB0aGlzLm1vdXNlTW92ZW1lbnRZID0gMDtcclxuICAgICAgICB0aGlzLnBhcmFtcyA9IHBhcmFtcztcclxuICAgICAgICB0aGlzLmNoYXJhY3RlciA9IHBhcmFtcy5jaGFyYWN0ZXI7XHJcbiAgICAgICAgdGhpcy5jb250cm9scyA9IG5ldyBlbmFibGUzZF8xLlRoaXJkUGVyc29uQ29udHJvbHModGhpcy5wYXJhbXMuY2FtZXJhLCB0aGlzLmNoYXJhY3Rlci50YXJnZXQsIHtcclxuICAgICAgICAgICAgb2Zmc2V0OiBuZXcgZW5hYmxlM2RfMS5USFJFRS5WZWN0b3IzKDAsIDEsIDApLFxyXG4gICAgICAgICAgICB0YXJnZXRSYWRpdXM6IDMsXHJcbiAgICAgICAgICAgIHRoZXRhOiAzMDBcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBNYXAgSW5wdXRcclxuICAgICAgICBjb25zdCBwcmVzcyA9IChlLCBpc0Rvd24pID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMucGFyYW1zLnNjZW5lLmNsYXNzcm9vbS5pc1BsYXlpbmcgIT0gdHJ1ZSlcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKGUua2V5Q29kZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSA4NzogLy8gd1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMua2V5cy53LmlzRG93biA9IGlzRG93bjtcclxuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDY3OiAvLyBjXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzRG93biA9PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZVNpdERvd24oKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuc3luY01vdmVtZW50KCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZSA9PiBwcmVzcyhlLCB0cnVlKSk7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBlID0+IHByZXNzKGUsIGZhbHNlKSk7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgKiBBZGQgUG9pbnRlciBMb2NrIGFuZCBQb2ludGVyIERyYWdcclxuICAgICAgICAqL1xyXG4gICAgICAgIGlmICghX18xLmlzVG91Y2hEZXZpY2UpIHtcclxuICAgICAgICAgICAgbGV0IHBsID0gbmV3IGVuYWJsZTNkXzEuUG9pbnRlckxvY2sodGhpcy5wYXJhbXMuc2NlbmUuY2FudmFzKTtcclxuICAgICAgICAgICAgbGV0IHBkID0gbmV3IGVuYWJsZTNkXzEuUG9pbnRlckRyYWcodGhpcy5wYXJhbXMuc2NlbmUuY2FudmFzKTtcclxuICAgICAgICAgICAgcGQub25Nb3ZlKGRlbHRhID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChwbC5pc0xvY2tlZCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tb3VzZU1vdmVtZW50WSA9IC1kZWx0YS55O1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubW91c2VNb3ZlbWVudFggPSBkZWx0YS54O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICB0b2dnbGVTaXREb3duKCkge1xyXG4gICAgICAgIHZhciBfYSwgX2I7XHJcbiAgICAgICAgLy8gRmluZCBOZWFyYnkgQ2hhaXJcclxuICAgICAgICBpZiAoIXRoaXMuY2hhcmFjdGVyLnRhcmdldClcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIGlmICh0aGlzLmNoYXJhY3Rlci5pc1NpdHRpbmcgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLmNoYXJhY3Rlci5pc1NpdHRpbmcgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHggPSAoX2IgPSAoX2EgPSB0aGlzLmNoYXJhY3RlcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnRhcmdldCkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLnBvc2l0aW9uO1xyXG4gICAgICAgICAgICBsZXQgZGlzdGFuY2UgPSAxMDAwMDAwO1xyXG4gICAgICAgICAgICBsZXQgY2hhaXIgPSB0aGlzLnBhcmFtcy5zY2VuZS5jaGFpcnNbMF07XHJcbiAgICAgICAgICAgIHRoaXMucGFyYW1zLnNjZW5lLmNoYWlycy5mb3JFYWNoKGMgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGMucG9zaXRpb24uZGlzdGFuY2VUbyh4KSA8IGRpc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGlzdGFuY2UgPSBjLnBvc2l0aW9uLmRpc3RhbmNlVG8oeCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hhaXIgPSBjO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaWYgKGRpc3RhbmNlIDwgMSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGFyYWN0ZXIuaXNTaXR0aW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnBhcmFtcy5zY2VuZS5jbGFzc3Jvb20uaGFuZGxlU2l0RG93bih0aGlzLmNoYXJhY3Rlci5pc1NpdHRpbmcpO1xyXG4gICAgfVxyXG4gICAgc3luY01vdmVtZW50KCkge1xyXG4gICAgICAgIHZhciBfYSwgX2IsIF9jO1xyXG4gICAgICAgIHRoaXMucGFyYW1zLnNjZW5lLmNsYXNzcm9vbS5oYW5kbGVNb3ZlbWVudCh0aGlzLmtleXMudy5pc0Rvd24sIHtcclxuICAgICAgICAgICAgeDogKF9hID0gdGhpcy5jaGFyYWN0ZXIudGFyZ2V0KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucG9zaXRpb24ueCxcclxuICAgICAgICAgICAgeTogKF9iID0gdGhpcy5jaGFyYWN0ZXIudGFyZ2V0KSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IucG9zaXRpb24ueSxcclxuICAgICAgICAgICAgejogKF9jID0gdGhpcy5jaGFyYWN0ZXIudGFyZ2V0KSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2MucG9zaXRpb24ueixcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHN5bmNMb29raW5nQXQoKSB7XHJcbiAgICAgICAgdGhpcy5wYXJhbXMuc2NlbmUuY2xhc3Nyb29tLnN5bmNMb29raW5nQXQodGhpcy5jaGFyYWN0ZXIubG9va2luZ0F0LnRvQXJyYXkoKSk7XHJcbiAgICB9XHJcbiAgICB1cGRhdGUodGltZSwgZGVsdGEpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgdGhpcy5jaGFyYWN0ZXIudXBkYXRlKHRpbWUsIGRlbHRhKTtcclxuICAgICAgICBpZiAoKF9hID0gdGhpcy5jaGFyYWN0ZXIudGFyZ2V0KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuYm9keSkge1xyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgKiBVcGRhdGUgQ29udHJvbHNcclxuICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgdGhpcy5jb250cm9scy51cGRhdGUodGhpcy5tb3VzZU1vdmVtZW50WCAqIDMsIC10aGlzLm1vdXNlTW92ZW1lbnRZICogMyk7XHJcbiAgICAgICAgICAgIGlmICghX18xLmlzVG91Y2hEZXZpY2UpXHJcbiAgICAgICAgICAgICAgICB0aGlzLm1vdXNlTW92ZW1lbnRYID0gdGhpcy5tb3VzZU1vdmVtZW50WSA9IDA7XHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAqIFBsYXllciBUdXJuXHJcbiAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGNvbnN0IG9sZExvb2tBdCA9IHRoaXMuY2hhcmFjdGVyLmxvb2tpbmdBdC5jbG9uZSgpO1xyXG4gICAgICAgICAgICB0aGlzLmNoYXJhY3Rlci5sb29raW5nQXQgPSB0aGlzLnBhcmFtcy5jYW1lcmEuZ2V0V29ybGREaXJlY3Rpb24oREVGQVVMVF9WRUNUT1JfMyk7XHJcbiAgICAgICAgICAgIGlmICghb2xkTG9va0F0LmVxdWFscyh0aGlzLmNoYXJhY3Rlci5sb29raW5nQXQpKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zeW5jTG9va2luZ0F0KCk7IC8vIFN5bmMgTG9va2F0XHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAqIFBsYXllciBNb3ZlXHJcbiAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIHRoaXMuY2hhcmFjdGVyLmlzTW92aW5nRm9yd2FyZCA9IHRoaXMua2V5cy53LmlzRG93bjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0cy5DaGFyYWN0ZXJDb250cm9sbGVyID0gQ2hhcmFjdGVyQ29udHJvbGxlcjtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5hZGRDbGFzc3Jvb21Ub1NjZW5lID0gdm9pZCAwO1xyXG5jb25zdCBlbmFibGUzZF8xID0gcmVxdWlyZShcImVuYWJsZTNkXCIpO1xyXG5jb25zdCBsb2FkZXIgPSBuZXcgZW5hYmxlM2RfMS5USFJFRS5UZXh0dXJlTG9hZGVyKCk7XHJcbmZ1bmN0aW9uIGFkZENsYXNzcm9vbVRvU2NlbmUoc2NlbmUpIHtcclxuICAgIC8vIEZsb29yXHJcbiAgICBjb25zdCBmbG9vclRleHR1cmUgPSBsb2FkZXIubG9hZCgnLi9yZXNvdXJjZXMvdGV4dHVyZXMvZmxvb3IuanBnJyk7XHJcbiAgICBmbG9vclRleHR1cmUud3JhcFMgPSBmbG9vclRleHR1cmUud3JhcFQgPSBlbmFibGUzZF8xLlRIUkVFLlJlcGVhdFdyYXBwaW5nO1xyXG4gICAgZmxvb3JUZXh0dXJlLnJlcGVhdC5zZXQoOCwgOCk7XHJcbiAgICBjb25zdCBmbG9vck1hdGVyaWFsID0gbmV3IGVuYWJsZTNkXzEuVEhSRUUuTWVzaFN0YW5kYXJkTWF0ZXJpYWwoe1xyXG4gICAgICAgIGNvbG9yOiAweEMxQzFDMSxcclxuICAgICAgICBtYXA6IGZsb29yVGV4dHVyZVxyXG4gICAgfSk7XHJcbiAgICBmbG9vck1hdGVyaWFsLnJvdWdobmVzcyA9IDE7XHJcbiAgICBmbG9vck1hdGVyaWFsLm1ldGFsbmVzcyA9IDA7XHJcbiAgICBjb25zdCBwbGFuZSA9IHNjZW5lLnBoeXNpY3MuYWRkLmJveCh7IHdpZHRoOiAxOCwgaGVpZ2h0OiAwLjMsIGRlcHRoOiAxNCwgbWFzczogMCB9KTtcclxuICAgIHBsYW5lLm1hdGVyaWFsID0gZmxvb3JNYXRlcmlhbDtcclxuICAgIHBsYW5lLmJvZHkuc2V0R3Jhdml0eSgwLCAxMCwgMCk7XHJcbiAgICBwbGFuZS5ib2R5LnNldEZyaWN0aW9uKDEpO1xyXG4gICAgcGxhbmUucm90YXRpb24uc2V0KE1hdGguUEkgLyAyLCAwLCAwKTtcclxuICAgIHBsYW5lLnJlY2VpdmVTaGFkb3cgPSB0cnVlO1xyXG4gICAgLy8gV2FsbHNcclxuICAgIGNvbnN0IHdhbGxUZXh0dXJlID0gbG9hZGVyLmxvYWQoJy4vcmVzb3VyY2VzL3RleHR1cmVzL3dhbGwuanBnJyk7XHJcbiAgICB3YWxsVGV4dHVyZS53cmFwUyA9IHdhbGxUZXh0dXJlLndyYXBUID0gZW5hYmxlM2RfMS5USFJFRS5SZXBlYXRXcmFwcGluZztcclxuICAgIHdhbGxUZXh0dXJlLnJlcGVhdC5zZXQoNCwgMik7XHJcbiAgICBjb25zdCB3YWxsTWF0ZXJpYWwgPSBuZXcgZW5hYmxlM2RfMS5USFJFRS5NZXNoU3RhbmRhcmRNYXRlcmlhbCh7XHJcbiAgICAgICAgY29sb3I6IDB4QzFDMUMxLFxyXG4gICAgICAgIG1hcDogd2FsbFRleHR1cmVcclxuICAgIH0pO1xyXG4gICAgd2FsbE1hdGVyaWFsLnJvdWdobmVzcyA9IDE7XHJcbiAgICB3YWxsTWF0ZXJpYWwubWV0YWxuZXNzID0gMDtcclxuICAgIGNvbnN0IHdhbGxzID0gW1xyXG4gICAgICAgIHNjZW5lLnBoeXNpY3MuYWRkLmJveCh7IHdpZHRoOiAwLjMsIGhlaWdodDogNSwgZGVwdGg6IDE0LCBtYXNzOiAwLCB4OiA5LCB5OiAyIH0pLFxyXG4gICAgICAgIHNjZW5lLnBoeXNpY3MuYWRkLmJveCh7IHdpZHRoOiAwLjMsIGhlaWdodDogNSwgZGVwdGg6IDE0LCBtYXNzOiAwLCB4OiAtOSwgeTogMiB9KSxcclxuICAgICAgICBzY2VuZS5waHlzaWNzLmFkZC5ib3goeyB3aWR0aDogMTgsIGhlaWdodDogNSwgZGVwdGg6IDAuMywgbWFzczogMCwgejogNywgeTogMiB9KSxcclxuICAgICAgICBzY2VuZS5waHlzaWNzLmFkZC5ib3goeyB3aWR0aDogMTgsIGhlaWdodDogNSwgZGVwdGg6IDAuMywgbWFzczogMCwgejogLTcsIHk6IDIgfSksXHJcbiAgICBdO1xyXG4gICAgd2FsbHMuZm9yRWFjaCh3YWxsID0+IHtcclxuICAgICAgICB3YWxsLm1hdGVyaWFsID0gd2FsbE1hdGVyaWFsO1xyXG4gICAgICAgIHdhbGwucmVjZWl2ZVNoYWRvdyA9IHRydWU7XHJcbiAgICAgICAgd2FsbC5jYXN0U2hhZG93ID0gZmFsc2U7XHJcbiAgICB9KTtcclxuICAgIGNvbnN0IHJvb2YgPSBzY2VuZS5waHlzaWNzLmFkZC5ib3goeyB3aWR0aDogMTgsIGhlaWdodDogMC4zLCBkZXB0aDogMTQsIG1hc3M6IDAsIHk6IDQuNSB9KTtcclxuICAgIHJvb2YuY2FzdFNoYWRvdyA9IGZhbHNlO1xyXG4gICAgcm9vZi5yZWNlaXZlU2hhZG93ID0gZmFsc2U7XHJcbiAgICByb29mLm1hdGVyaWFsID0gZmxvb3JNYXRlcmlhbDtcclxufVxyXG5leHBvcnRzLmFkZENsYXNzcm9vbVRvU2NlbmUgPSBhZGRDbGFzc3Jvb21Ub1NjZW5lO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLkNsYXNzcm9vbU1hbmFnZXIgPSB2b2lkIDA7XHJcbmNvbnN0IHNvY2tldF9pb19jbGllbnRfMSA9IHJlcXVpcmUoXCJzb2NrZXQuaW8tY2xpZW50XCIpO1xyXG5jb25zdCBfXzEgPSByZXF1aXJlKFwiLi5cIik7XHJcbmNvbnN0IHBlZXJqc18xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCJwZWVyanNcIikpO1xyXG5jb25zdCBTT0NLRVRfQUREUkVTUyA9IFwid3M6Ly9sb2NhbGhvc3Q6MzUwMFwiO1xyXG5jbGFzcyBDbGFzc3Jvb21NYW5hZ2VyIHtcclxuICAgIGNvbnN0cnVjdG9yKHNjZW5lKSB7XHJcbiAgICAgICAgdGhpcy5pc1BsYXlpbmcgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmVtaXRIaXN0b3J5ID0ge307XHJcbiAgICAgICAgdGhpcy5wZWVycyA9IHt9O1xyXG4gICAgICAgIHRoaXMuYXVkaW9zID0ge307XHJcbiAgICAgICAgdGhpcy5zY2VuZSA9IHNjZW5lO1xyXG4gICAgICAgIHRoaXMubXlQZWVyID0gbmV3IHBlZXJqc18xLmRlZmF1bHQodW5kZWZpbmVkLCB7XHJcbiAgICAgICAgICAgIGRlYnVnOiAzLFxyXG4gICAgICAgICAgICBjb25maWc6IHtcclxuICAgICAgICAgICAgICAgIGljZVRyYW5zcG9ydFBvbGljeTogXCJyZWxheVwiLFxyXG4gICAgICAgICAgICAgICAgJ2ljZVNlcnZlcnMnOiBbXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpY2VUcmFuc3BvcnRQb2xpY3k6XCJyZWxheVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB1cmxzOiAnc3R1bjpzdHVuMS5sLmdvb2dsZS5jb206MTkzMDInXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGljZVRyYW5zcG9ydFBvbGljeTpcInJlbGF5XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVybHM6ICd0dXJuOjIwLjE5OC42LjEwNzozNDc4P3RyYW5zcG9ydD10Y3AnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjcmVkZW50aWFsOiAnMTIzNCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiAnY2FsZXVtJ1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMubXlBdWRpbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2F1ZGlvJyk7XHJcbiAgICAgICAgdGhpcy5teUF1ZGlvLm11dGVkID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLm15UGVlci5vbignb3BlbicsICgpID0+IHtcclxuICAgICAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlBlZXIgSlMgY29ubmVjdGVkXCIpO1xyXG4gICAgICAgICAgICAoX2EgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJ1dHRvblwiKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLm9uU3VibWl0SW5wdXQoKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5teVBlZXIub24oJ2Vycm9yJywgKGUpID0+IHtcclxuICAgICAgICAgICAgYWxlcnQoJ0F1ZGlvIGNoYXQgaGFzIHNvbWUgZXJyb3IuIFJlZnJlc2ggdGhlIHBhZ2UnKTtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIG9uU3VibWl0SW5wdXQoKSB7XHJcbiAgICAgICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInVzZXJuYW1lXCIpO1xyXG4gICAgICAgIGlmICghaW5wdXQpXHJcbiAgICAgICAgICAgIHRocm93IChcIkNhbid0IGZpbmQgZWxlbWVudCB3aXRoIGlkIGB1c2VybmFtZWBcIik7XHJcbiAgICAgICAgY29uc3QgbmFtZSA9IGlucHV0LnZhbHVlO1xyXG4gICAgICAgIGlmIChuYW1lLmxlbmd0aCA8IDMpXHJcbiAgICAgICAgICAgIHJldHVybiBhbGVydChcIk5hbWUgdG9vIHNob3J0XCIpO1xyXG4gICAgICAgIC8vIFN0YXJ0IENvbm5lY3Rpb25zXHJcbiAgICAgICAgdGhpcy51c2VybmFtZSA9IG5hbWU7XHJcbiAgICAgICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoe1xyXG4gICAgICAgICAgICB2aWRlbzogZmFsc2UsXHJcbiAgICAgICAgICAgIGF1ZGlvOiB0cnVlXHJcbiAgICAgICAgfSkudGhlbihzdHJlYW0gPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBzb2NrZXQgPSBzb2NrZXRfaW9fY2xpZW50XzEuaW8oKTtcclxuICAgICAgICAgICAgdGhpcy5zb2NrZXQgPSBzb2NrZXQ7XHJcbiAgICAgICAgICAgIHNvY2tldC5vbignY29ubmVjdCcsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZmFkZU91dE1lbnUoKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBNeSBQZWVyIElEIGlzICR7dGhpcy5teVBlZXIuaWR9YCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFkZEF1ZGlvU3RyZWFtKHRoaXMubXlQZWVyLmlkLCB0aGlzLm15QXVkaW8sIHN0cmVhbSk7XHJcbiAgICAgICAgICAgICAgICBzb2NrZXQuZW1pdCgnaW5pdCcsIHsgdXVpZDogdGhpcy5teVBlZXIuaWQsIHVzZXJuYW1lOiBuYW1lLCBpbml0aWFsUG9zaXRpb246IF9fMS5tYWluQ2hhcmFjdGVyaW5pdGlhbFBvc2l0aW9uLnRvQXJyYXkoKSB9LCAoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlSW5pdFJlc3BvbnNlKGRhdGEsIHN0cmVhbSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlclNvY2tldEV2ZW50cyhzb2NrZXQsIHN0cmVhbSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUNhbGxzKHN0cmVhbSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZmFkZU91dE1lbnUoRFVSQVRJT04gPSAzMDApIHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtZW51VUkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1lbnVcIik7XHJcbiAgICAgICAgICAgIGlmICghbWVudVVJKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChcIkNhbid0IGZpbmQgZWxlbWVudCB3aXRoIGlkIGBtZW51YFwiKTtcclxuICAgICAgICAgICAgY29uc3QgTlVNQkVSX09GX0ZSQU1FUyA9IDIwO1xyXG4gICAgICAgICAgICAvLyBGYWRlb3V0IE1lbnVcclxuICAgICAgICAgICAgY29uc3QgeCA9IHNldEludGVydmFsKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5ld09wYWNpdHkgPSBOdW1iZXIod2luZG93LmdldENvbXB1dGVkU3R5bGUobWVudVVJKS5nZXRQcm9wZXJ0eVZhbHVlKFwib3BhY2l0eVwiKSkgLSAxIC8gTlVNQkVSX09GX0ZSQU1FUztcclxuICAgICAgICAgICAgICAgIG1lbnVVSS5zdHlsZS5vcGFjaXR5ID0gbmV3T3BhY2l0eS50b1N0cmluZygpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG5ld09wYWNpdHkgPD0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoJ2ZhZGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydENsYXNzcm9vbSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIG1lbnVVSS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh4KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgRFVSQVRJT04gLyBOVU1CRVJfT0ZfRlJBTUVTKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHN0YXJ0Q2xhc3Nyb29tKCkge1xyXG4gICAgICAgIHRoaXMuaXNQbGF5aW5nID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIGhhbmRsZUluaXRSZXNwb25zZShkYXRhLCBzdHJlYW0pIHtcclxuICAgICAgICB0aGlzLnNjZW5lLnNldE1haW5DaGFyYWN0ZXJDb2xvckZyb21TdHJpbmcoZGF0YS5jb2xvcik7XHJcbiAgICAgICAgZGF0YS5vdGhlclVzZXJzLmZvckVhY2godXNlciA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2NlbmUuYWRkU3ViQ2hhcmFjdGVyKHVzZXIpO1xyXG4gICAgICAgICAgICAvLyBWb2ljZSBDaGF0XHJcbiAgICAgICAgICAgIHRoaXMuY2FsbE5ld1VzZXIodXNlci51dWlkLCBzdHJlYW0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgaGFuZGxlclNvY2tldEV2ZW50cyhzb2NrZXQsIHN0cmVhbSkge1xyXG4gICAgICAgIHNvY2tldC5vbignbmV3LXVzZXInLCAobmV3VXNlcikgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnNjZW5lLmFkZFN1YkNoYXJhY3RlcihuZXdVc2VyKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBzb2NrZXQub24oJ21vdmVtZW50JywgKHV1aWQsIGlzTW92aW5nRm9yd2FyZCwgcG9zaXRpb24pID0+IHtcclxuICAgICAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgICAgICB0aGlzLnNjZW5lLnN1YkNoYXJhY3RlcnNbdXVpZF0uaXNNb3ZpbmdGb3J3YXJkID0gaXNNb3ZpbmdGb3J3YXJkO1xyXG4gICAgICAgICAgICAoX2EgPSB0aGlzLnNjZW5lLnN1YkNoYXJhY3RlcnNbdXVpZF0udGFyZ2V0KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucG9zaXRpb24uc2V0KHBvc2l0aW9uLngsIHBvc2l0aW9uLnksIHBvc2l0aW9uLnopO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHNvY2tldC5vbignbG9va2luZ0F0JywgKHV1aWQsIGxvb2tpbmdBdCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zY2VuZS5zdWJDaGFyYWN0ZXJzW3V1aWRdKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zY2VuZS5zdWJDaGFyYWN0ZXJzW3V1aWRdLmxvb2tpbmdBdC5zZXQoLi4ubG9va2luZ0F0KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBzb2NrZXQub24oJ2lzU2l0dGluZycsICh1dWlkLCBpc1NpdHRpbmcpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zY2VuZS5zdWJDaGFyYWN0ZXJzW3V1aWRdLmlzU2l0dGluZyA9IGlzU2l0dGluZztcclxuICAgICAgICB9KTtcclxuICAgICAgICBzb2NrZXQub24oJ3VzZXItZXhpdCcsICh1dWlkKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2NlbmUuc3ViQ2hhcmFjdGVyc1t1dWlkXS5kZWxldGUoKTtcclxuICAgICAgICAgICAgZGVsZXRlIHRoaXMuc2NlbmUuc3ViQ2hhcmFjdGVyc1t1dWlkXTtcclxuICAgICAgICAgICAgaWYgKHRoaXMucGVlcnNbdXVpZF0pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucGVlcnNbdXVpZF0uY2xvc2UoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICA7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBoYW5kbGVNb3ZlbWVudChpc01vdmluZ0ZvcndhcmQsIHBvc2l0aW9uKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGlmICh0aGlzLmVtaXRIaXN0b3J5Wydpc01vdmluZ0ZvcndhcmQnXSAmJiB0aGlzLmVtaXRIaXN0b3J5Wydpc01vdmluZ0ZvcndhcmQnXS5kYXRhID09IGlzTW92aW5nRm9yd2FyZCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5lbWl0SGlzdG9yeVsnaXNNb3ZpbmdGb3J3YXJkJ10uc2FtZURhdGFDb3VudGVyKysgIT0gMTApXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIDtcclxuICAgICAgICB0aGlzLmVtaXRIaXN0b3J5Wydpc01vdmluZ0ZvcndhcmQnXSA9IHtcclxuICAgICAgICAgICAgc2FtZURhdGFDb3VudGVyOiAwLFxyXG4gICAgICAgICAgICBkYXRhOiBpc01vdmluZ0ZvcndhcmRcclxuICAgICAgICB9O1xyXG4gICAgICAgIChfYSA9IHRoaXMuc29ja2V0KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZW1pdCgnbW92ZW1lbnQnLCBpc01vdmluZ0ZvcndhcmQsIHBvc2l0aW9uKTtcclxuICAgIH1cclxuICAgIHN5bmNMb29raW5nQXQobG9va2luZ0F0KSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGlmICh0aGlzLmVtaXRIaXN0b3J5Wydsb29raW5nQXQnXSkge1xyXG4gICAgICAgICAgICBpZiAoSlNPTi5zdHJpbmdpZnkodGhpcy5lbWl0SGlzdG9yeVsnbG9va2luZ0F0J10uZGF0YSkgPT0gSlNPTi5zdHJpbmdpZnkobG9va2luZ0F0KSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0SGlzdG9yeVsnbG9va2luZ0F0J10uc2FtZURhdGFDb3VudGVyID0gMDtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmVtaXRIaXN0b3J5Wydsb29raW5nQXQnXS5zYW1lRGF0YUNvdW50ZXIrKyAhPSA0KVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICA7XHJcbiAgICAgICAgdGhpcy5lbWl0SGlzdG9yeVsnbG9va2luZ0F0J10gPSB7XHJcbiAgICAgICAgICAgIHNhbWVEYXRhQ291bnRlcjogMCxcclxuICAgICAgICAgICAgZGF0YTogbG9va2luZ0F0XHJcbiAgICAgICAgfTtcclxuICAgICAgICAoX2EgPSB0aGlzLnNvY2tldCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmVtaXQoJ2xvb2tpbmdBdCcsIGxvb2tpbmdBdCk7XHJcbiAgICB9XHJcbiAgICBoYW5kbGVTaXREb3duKGlzU2l0dGluZykge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICAoX2EgPSB0aGlzLnNvY2tldCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmVtaXQoJ2lzU2l0dGluZycsIGlzU2l0dGluZyk7XHJcbiAgICB9XHJcbiAgICAvLyBWb2ljZSBDaGF0XHJcbiAgICBoYW5kbGVDYWxscyhzdHJlYW0pIHtcclxuICAgICAgICB0aGlzLm15UGVlci5vbignY2FsbCcsIGNhbGwgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgTmV3IENhbGwgZnJvbSAke2NhbGwucGVlcn1gKTtcclxuICAgICAgICAgICAgY2FsbC5hbnN3ZXIoc3RyZWFtKTtcclxuICAgICAgICAgICAgY29uc3QgYXVkaW8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhdWRpbycpO1xyXG4gICAgICAgICAgICBjYWxsLm9uKCdzdHJlYW0nLCB1c2VyQXVkaW9TdHJlYW0gPT4gdGhpcy5hZGRBdWRpb1N0cmVhbShjYWxsLnBlZXIsIGF1ZGlvLCB1c2VyQXVkaW9TdHJlYW0pKTtcclxuICAgICAgICAgICAgY2FsbC5vbignY2xvc2UnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBhdWRpby5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmF1ZGlvc1tjYWxsLnBlZXJdKVxyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmF1ZGlvc1tjYWxsLnBlZXJdO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGNhbGxOZXdVc2VyKHV1aWQsIHN0cmVhbSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGBDYWxsaW5nIFVzZXIgJHt1dWlkfWApO1xyXG4gICAgICAgIGNvbnN0IGNhbGwgPSB0aGlzLm15UGVlci5jYWxsKHV1aWQsIHN0cmVhbSk7XHJcbiAgICAgICAgY29uc3QgYXVkaW8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhdWRpbycpO1xyXG4gICAgICAgIGNhbGwub24oJ3N0cmVhbScsIHVzZXJBdWRpb1N0cmVhbSA9PiB7IHRoaXMuYWRkQXVkaW9TdHJlYW0odXVpZCwgYXVkaW8sIHVzZXJBdWRpb1N0cmVhbSk7IH0pO1xyXG4gICAgICAgIGNhbGwub24oJ2Nsb3NlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBhdWRpby5yZW1vdmUoKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuYXVkaW9zW3V1aWRdKVxyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuYXVkaW9zW3V1aWRdO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMucGVlcnNbdXVpZF0gPSBjYWxsO1xyXG4gICAgfVxyXG4gICAgYWRkQXVkaW9TdHJlYW0odXVpZCwgYXVkaW8sIHN0cmVhbSkge1xyXG4gICAgICAgIGF1ZGlvLnNyY09iamVjdCA9IHN0cmVhbTtcclxuICAgICAgICBhdWRpby5hZGRFdmVudExpc3RlbmVyKCdsb2FkZWRtZXRhZGF0YScsICgpID0+IHsgYXVkaW8ucGxheSgpOyB9KTtcclxuICAgICAgICB0aGlzLmF1ZGlvc1t1dWlkXSA9IGF1ZGlvO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydHMuQ2xhc3Nyb29tTWFuYWdlciA9IENsYXNzcm9vbU1hbmFnZXI7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuY2hhaXJQb3NpdGlvbnMgPSB2b2lkIDA7XHJcbmV4cG9ydHMuY2hhaXJQb3NpdGlvbnMgPSBbXHJcbiAgICBbLTIsIC0zXSwgWzAsIC0zXSwgWzIsIC0zXSwgWzQsIC0zXSwgWzYsIC0zXSxcclxuICAgIFstMiwgLTFdLCBbMCwgLTFdLCBbMiwgLTFdLCBbNCwgLTFdLCBbNiwgLTFdLFxyXG4gICAgWy0yLCAxXSwgWzAsIDFdLCBbMiwgMV0sIFs0LCAxXSwgWzYsIDFdLFxyXG4gICAgWy0yLCAzXSwgWzAsIDNdLCBbMiwgM10sIFs0LCAzXSwgWzYsIDNdLFxyXG5dO1xyXG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBhbHBoYWJldCA9ICcwMTIzNDU2Nzg5QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ei1fJy5zcGxpdCgnJylcbiAgLCBsZW5ndGggPSA2NFxuICAsIG1hcCA9IHt9XG4gICwgc2VlZCA9IDBcbiAgLCBpID0gMFxuICAsIHByZXY7XG5cbi8qKlxuICogUmV0dXJuIGEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgc3BlY2lmaWVkIG51bWJlci5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gbnVtIFRoZSBudW1iZXIgdG8gY29udmVydC5cbiAqIEByZXR1cm5zIHtTdHJpbmd9IFRoZSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIG51bWJlci5cbiAqIEBhcGkgcHVibGljXG4gKi9cbmZ1bmN0aW9uIGVuY29kZShudW0pIHtcbiAgdmFyIGVuY29kZWQgPSAnJztcblxuICBkbyB7XG4gICAgZW5jb2RlZCA9IGFscGhhYmV0W251bSAlIGxlbmd0aF0gKyBlbmNvZGVkO1xuICAgIG51bSA9IE1hdGguZmxvb3IobnVtIC8gbGVuZ3RoKTtcbiAgfSB3aGlsZSAobnVtID4gMCk7XG5cbiAgcmV0dXJuIGVuY29kZWQ7XG59XG5cbi8qKlxuICogUmV0dXJuIHRoZSBpbnRlZ2VyIHZhbHVlIHNwZWNpZmllZCBieSB0aGUgZ2l2ZW4gc3RyaW5nLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHIgVGhlIHN0cmluZyB0byBjb252ZXJ0LlxuICogQHJldHVybnMge051bWJlcn0gVGhlIGludGVnZXIgdmFsdWUgcmVwcmVzZW50ZWQgYnkgdGhlIHN0cmluZy5cbiAqIEBhcGkgcHVibGljXG4gKi9cbmZ1bmN0aW9uIGRlY29kZShzdHIpIHtcbiAgdmFyIGRlY29kZWQgPSAwO1xuXG4gIGZvciAoaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcbiAgICBkZWNvZGVkID0gZGVjb2RlZCAqIGxlbmd0aCArIG1hcFtzdHIuY2hhckF0KGkpXTtcbiAgfVxuXG4gIHJldHVybiBkZWNvZGVkO1xufVxuXG4vKipcbiAqIFllYXN0OiBBIHRpbnkgZ3Jvd2luZyBpZCBnZW5lcmF0b3IuXG4gKlxuICogQHJldHVybnMge1N0cmluZ30gQSB1bmlxdWUgaWQuXG4gKiBAYXBpIHB1YmxpY1xuICovXG5mdW5jdGlvbiB5ZWFzdCgpIHtcbiAgdmFyIG5vdyA9IGVuY29kZSgrbmV3IERhdGUoKSk7XG5cbiAgaWYgKG5vdyAhPT0gcHJldikgcmV0dXJuIHNlZWQgPSAwLCBwcmV2ID0gbm93O1xuICByZXR1cm4gbm93ICsnLicrIGVuY29kZShzZWVkKyspO1xufVxuXG4vL1xuLy8gTWFwIGVhY2ggY2hhcmFjdGVyIHRvIGl0cyBpbmRleC5cbi8vXG5mb3IgKDsgaSA8IGxlbmd0aDsgaSsrKSBtYXBbYWxwaGFiZXRbaV1dID0gaTtcblxuLy9cbi8vIEV4cG9zZSB0aGUgYHllYXN0YCwgYGVuY29kZWAgYW5kIGBkZWNvZGVgIGZ1bmN0aW9ucy5cbi8vXG55ZWFzdC5lbmNvZGUgPSBlbmNvZGU7XG55ZWFzdC5kZWNvZGUgPSBkZWNvZGU7XG5tb2R1bGUuZXhwb3J0cyA9IHllYXN0O1xuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8vIFRoaXMgZW50cnkgbW9kdWxlIGlzIHJlZmVyZW5jZWQgYnkgb3RoZXIgbW9kdWxlcyBzbyBpdCBjYW4ndCBiZSBpbmxpbmVkXG52YXIgX193ZWJwYWNrX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL3NyYy9pbmRleC50c1wiKTtcbiJdLCJzb3VyY2VSb290IjoiIn0=