/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./node_modules/backo2/index.js":
/*!**************************************!*\
  !*** ./node_modules/backo2/index.js ***!
  \**************************************/
/***/ ((module) => {


/**
 * Expose `Backoff`.
 */

module.exports = Backoff;

/**
 * Initialize backoff timer with `opts`.
 *
 * - `min` initial timeout in milliseconds [100]
 * - `max` max timeout [10000]
 * - `jitter` [0]
 * - `factor` [2]
 *
 * @param {Object} opts
 * @api public
 */

function Backoff(opts) {
  opts = opts || {};
  this.ms = opts.min || 100;
  this.max = opts.max || 10000;
  this.factor = opts.factor || 2;
  this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;
  this.attempts = 0;
}

/**
 * Return the backoff duration.
 *
 * @return {Number}
 * @api public
 */

Backoff.prototype.duration = function(){
  var ms = this.ms * Math.pow(this.factor, this.attempts++);
  if (this.jitter) {
    var rand =  Math.random();
    var deviation = Math.floor(rand * this.jitter * ms);
    ms = (Math.floor(rand * 10) & 1) == 0  ? ms - deviation : ms + deviation;
  }
  return Math.min(ms, this.max) | 0;
};

/**
 * Reset the number of attempts.
 *
 * @api public
 */

Backoff.prototype.reset = function(){
  this.attempts = 0;
};

/**
 * Set the minimum duration
 *
 * @api public
 */

Backoff.prototype.setMin = function(min){
  this.ms = min;
};

/**
 * Set the maximum duration
 *
 * @api public
 */

Backoff.prototype.setMax = function(max){
  this.max = max;
};

/**
 * Set the jitter
 *
 * @api public
 */

Backoff.prototype.setJitter = function(jitter){
  this.jitter = jitter;
};



/***/ }),

/***/ "./node_modules/base64-arraybuffer/lib/base64-arraybuffer.js":
/*!*******************************************************************!*\
  !*** ./node_modules/base64-arraybuffer/lib/base64-arraybuffer.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, exports) => {

/*
 * base64-arraybuffer
 * https://github.com/niklasvh/base64-arraybuffer
 *
 * Copyright (c) 2012 Niklas von Hertzen
 * Licensed under the MIT license.
 */
(function(chars){
  "use strict";

  exports.encode = function(arraybuffer) {
    var bytes = new Uint8Array(arraybuffer),
    i, len = bytes.length, base64 = "";

    for (i = 0; i < len; i+=3) {
      base64 += chars[bytes[i] >> 2];
      base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];
      base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];
      base64 += chars[bytes[i + 2] & 63];
    }

    if ((len % 3) === 2) {
      base64 = base64.substring(0, base64.length - 1) + "=";
    } else if (len % 3 === 1) {
      base64 = base64.substring(0, base64.length - 2) + "==";
    }

    return base64;
  };

  exports.decode =  function(base64) {
    var bufferLength = base64.length * 0.75,
    len = base64.length, i, p = 0,
    encoded1, encoded2, encoded3, encoded4;

    if (base64[base64.length - 1] === "=") {
      bufferLength--;
      if (base64[base64.length - 2] === "=") {
        bufferLength--;
      }
    }

    var arraybuffer = new ArrayBuffer(bufferLength),
    bytes = new Uint8Array(arraybuffer);

    for (i = 0; i < len; i+=4) {
      encoded1 = chars.indexOf(base64[i]);
      encoded2 = chars.indexOf(base64[i+1]);
      encoded3 = chars.indexOf(base64[i+2]);
      encoded4 = chars.indexOf(base64[i+3]);

      bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);
      bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);
      bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);
    }

    return arraybuffer;
  };
})("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/");


/***/ }),

/***/ "./node_modules/component-emitter/index.js":
/*!*************************************************!*\
  !*** ./node_modules/component-emitter/index.js ***!
  \*************************************************/
/***/ ((module) => {


/**
 * Expose `Emitter`.
 */

if (true) {
  module.exports = Emitter;
}

/**
 * Initialize a new `Emitter`.
 *
 * @api public
 */

function Emitter(obj) {
  if (obj) return mixin(obj);
};

/**
 * Mixin the emitter properties.
 *
 * @param {Object} obj
 * @return {Object}
 * @api private
 */

function mixin(obj) {
  for (var key in Emitter.prototype) {
    obj[key] = Emitter.prototype[key];
  }
  return obj;
}

/**
 * Listen on the given `event` with `fn`.
 *
 * @param {String} event
 * @param {Function} fn
 * @return {Emitter}
 * @api public
 */

Emitter.prototype.on =
Emitter.prototype.addEventListener = function(event, fn){
  this._callbacks = this._callbacks || {};
  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])
    .push(fn);
  return this;
};

/**
 * Adds an `event` listener that will be invoked a single
 * time then automatically removed.
 *
 * @param {String} event
 * @param {Function} fn
 * @return {Emitter}
 * @api public
 */

Emitter.prototype.once = function(event, fn){
  function on() {
    this.off(event, on);
    fn.apply(this, arguments);
  }

  on.fn = fn;
  this.on(event, on);
  return this;
};

/**
 * Remove the given callback for `event` or all
 * registered callbacks.
 *
 * @param {String} event
 * @param {Function} fn
 * @return {Emitter}
 * @api public
 */

Emitter.prototype.off =
Emitter.prototype.removeListener =
Emitter.prototype.removeAllListeners =
Emitter.prototype.removeEventListener = function(event, fn){
  this._callbacks = this._callbacks || {};

  // all
  if (0 == arguments.length) {
    this._callbacks = {};
    return this;
  }

  // specific event
  var callbacks = this._callbacks['$' + event];
  if (!callbacks) return this;

  // remove all handlers
  if (1 == arguments.length) {
    delete this._callbacks['$' + event];
    return this;
  }

  // remove specific handler
  var cb;
  for (var i = 0; i < callbacks.length; i++) {
    cb = callbacks[i];
    if (cb === fn || cb.fn === fn) {
      callbacks.splice(i, 1);
      break;
    }
  }

  // Remove event specific arrays for event types that no
  // one is subscribed for to avoid memory leak.
  if (callbacks.length === 0) {
    delete this._callbacks['$' + event];
  }

  return this;
};

/**
 * Emit `event` with the given args.
 *
 * @param {String} event
 * @param {Mixed} ...
 * @return {Emitter}
 */

Emitter.prototype.emit = function(event){
  this._callbacks = this._callbacks || {};

  var args = new Array(arguments.length - 1)
    , callbacks = this._callbacks['$' + event];

  for (var i = 1; i < arguments.length; i++) {
    args[i - 1] = arguments[i];
  }

  if (callbacks) {
    callbacks = callbacks.slice(0);
    for (var i = 0, len = callbacks.length; i < len; ++i) {
      callbacks[i].apply(this, args);
    }
  }

  return this;
};

/**
 * Return array of callbacks for `event`.
 *
 * @param {String} event
 * @return {Array}
 * @api public
 */

Emitter.prototype.listeners = function(event){
  this._callbacks = this._callbacks || {};
  return this._callbacks['$' + event] || [];
};

/**
 * Check if this emitter has `event` handlers.
 *
 * @param {String} event
 * @return {Boolean}
 * @api public
 */

Emitter.prototype.hasListeners = function(event){
  return !! this.listeners(event).length;
};


/***/ }),

/***/ "./node_modules/enable3d/dist/index.js":
/*!*********************************************!*\
  !*** ./node_modules/enable3d/dist/index.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */
Object.defineProperty(exports, "__esModule", ({ value: true }));
var scene3d_1 = __webpack_require__(/*! ./scene3d */ "./node_modules/enable3d/dist/scene3d.js");
exports.Scene3D = scene3d_1.Scene3D;
var project_1 = __webpack_require__(/*! ./project */ "./node_modules/enable3d/dist/project.js");
exports.Project = project_1.Project;
var physicsLoader_1 = __webpack_require__(/*! @enable3d/common/dist/physicsLoader */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/physicsLoader.js");
exports.PhysicsLoader = physicsLoader_1.PhysicsLoader;
var extendedMesh_1 = __webpack_require__(/*! @enable3d/common/dist/extendedMesh */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/extendedMesh.js");
exports.ExtendedMesh = extendedMesh_1.ExtendedMesh;
var extendedObject3D_1 = __webpack_require__(/*! @enable3d/common/dist/extendedObject3D */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/extendedObject3D.js");
exports.ExtendedObject3D = extendedObject3D_1.ExtendedObject3D;
var extendedGroup_1 = __webpack_require__(/*! @enable3d/common/dist/extendedGroup */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/extendedGroup.js");
exports.ExtendedGroup = extendedGroup_1.ExtendedGroup;
const THREE = __webpack_require__(/*! @enable3d/three-wrapper/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
exports.THREE = THREE;
const Types = __webpack_require__(/*! @enable3d/common/dist/types */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/types.js");
exports.Types = Types;
var joystick_1 = __webpack_require__(/*! @enable3d/common/dist/misc/joystick */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/misc/joystick.js");
exports.JoyStick = joystick_1.JoyStick;
var thirdPersonControls_1 = __webpack_require__(/*! @enable3d/common/dist/misc/thirdPersonControls */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/misc/thirdPersonControls.js");
exports.ThirdPersonControls = thirdPersonControls_1.ThirdPersonControls;
var firstPersonControls_1 = __webpack_require__(/*! @enable3d/common/dist/misc/firstPersonControls */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/misc/firstPersonControls.js");
exports.FirstPersonControls = firstPersonControls_1.FirstPersonControls;
var pointerLock_1 = __webpack_require__(/*! @enable3d/common/dist/misc/pointerLock */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/misc/pointerLock.js");
exports.PointerLock = pointerLock_1.PointerLock;
var pointerDrag_1 = __webpack_require__(/*! @enable3d/common/dist/misc/pointerDrag */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/misc/pointerDrag.js");
exports.PointerDrag = pointerDrag_1.PointerDrag;
// post-processing
var index_1 = __webpack_require__(/*! @enable3d/three-wrapper/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
exports.EffectComposer = index_1.EffectComposer;
exports.RenderPass = index_1.RenderPass;
exports.ShaderPass = index_1.ShaderPass;
exports.GlitchPass = index_1.GlitchPass;
exports.DotScreenShader = index_1.DotScreenShader;
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./node_modules/enable3d/dist/project.js":
/*!***********************************************!*\
  !*** ./node_modules/enable3d/dist/project.js ***!
  \***********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */
Object.defineProperty(exports, "__esModule", ({ value: true }));
const index_1 = __webpack_require__(/*! @enable3d/three-graphics/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/index.js");
class Project extends index_1.ThreeGraphics {
    constructor(projectConfig) {
        var _a;
        super(projectConfig);
        this.projectConfig = projectConfig;
        this.scenes = new Map();
        this.renderer.setSize(window.innerWidth, window.innerHeight);
        if (this.projectConfig.parent)
            this.parent = document.getElementById(this.projectConfig.parent);
        else
            this.parent = document.body;
        if (!this.parent) {
            console.warn(`[enable3d] parent "${this.projectConfig.parent}" not found! Will add it to the body.`);
            this.parent = document.body;
        }
        this.parent.appendChild(this.renderer.domElement);
        this.canvas = this.renderer.domElement;
        let firstSceneKey = '';
        this.projectConfig.scenes.forEach((scene, i) => {
            const s = new scene();
            if (i === 0)
                firstSceneKey = s.sceneKey;
            const plug = {
                // scene configuration
                sceneConfig: {
                    textureAnisotropy: this.textureAnisotropy,
                    autoStart: false
                },
                // add core features from three-graphicsconfig: {
                renderer: this.renderer,
                parent: this.parent,
                canvas: this.canvas,
                scene: this.scene,
                scenes: this.scenes,
                camera: this.camera,
                cache: this.cache,
                physics: this.physics
            };
            s.initializeScene(plug);
            if (i === 0) {
                s.setSize(this.parent.clientWidth, this.parent.clientHeight);
                s.setPixelRatio(Math.max(1, window.devicePixelRatio / 2));
            }
            this.scenes.set(s.sceneKey, s);
        });
        // start the first scene
        (_a = this.scenes.get(firstSceneKey)) === null || _a === void 0 ? void 0 : _a.start(firstSceneKey);
    }
}
exports.Project = Project;
//# sourceMappingURL=project.js.map

/***/ }),

/***/ "./node_modules/enable3d/dist/scene3d.js":
/*!***********************************************!*\
  !*** ./node_modules/enable3d/dist/scene3d.js ***!
  \***********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";

/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
const index_1 = __webpack_require__(/*! @enable3d/three-wrapper/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
const Plugins = __webpack_require__(/*! @enable3d/three-graphics/dist/plugins/index */ "./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/index.js");
// https://www.typescriptlang.org/docs/handbook/utility-types.html Pick<T,K>
// export class Scene3D implements Partial<ThreeGraphics> {
class Scene3D {
    constructor(sceneConfig = {}) {
        this.sceneConfig = sceneConfig;
        // core modules from three-graphics
        this.scenes = new Map();
        this.__config = {};
        this._isRunning = false;
        this._deconstructorFunctions = [];
        const { key = Math.random().toString(), enableXR = false } = sceneConfig;
        this.__config.sceneKey = key;
        this.__config.enableXR = enableXR;
    }
    get deconstructor() {
        return {
            add: (fnc) => {
                this._deconstructorFunctions.push(fnc);
            }
        };
    }
    // @ts-ignore
    initializeScene(plugins) {
        const { renderer, parent, canvas, scene, scenes, camera, cache, physics, sceneConfig } = plugins;
        this.scene = scene;
        this.scenes = scenes;
        this.camera = camera;
        this.cache = cache;
        this.physics = physics;
        this.renderer = renderer;
        this.parent = parent;
        this.canvas = canvas;
        const { autoStart, textureAnisotropy } = sceneConfig;
        // plugins
        this.load = new Plugins.Loaders(this.cache, textureAnisotropy);
        this.lights = new Plugins.Lights(this.scene);
        this.transform = new Plugins.Transform(this.camera, this.renderer);
        this.csg = new Plugins.CSG(this.scene, this.transform);
        this.heightMap = new Plugins.HeightMap(this.scene);
        this.factories = new Plugins.Factories(this.scene);
        this.misc = new Plugins.Misc(this.scene, this.renderer, this.factories);
        this.ws = new Plugins.WarpSpeed(scene, renderer, camera, this.lights, this.physics, this.load, this.factories);
        this.mixers = new Plugins.Mixers();
        this.cameras = new Plugins.Cameras();
        this.clock = new index_1.Clock();
        // add vr camera
        if (this.__config.enableXR) {
            this.webXR = new Plugins.WebXR(this.renderer, this.scene, this.camera);
        }
        if (autoStart)
            this.start(this.__config.sceneKey);
    }
    get sceneKey() {
        return this.__config.sceneKey;
    }
    /** Destroys a object and its body. */
    destroy(obj) {
        var _a;
        (_a = this.physics) === null || _a === void 0 ? void 0 : _a.destroy(obj.body);
        this.scene.remove(obj);
        // @ts-ignore
        obj = null;
    }
    warpSpeed(...features) {
        return __awaiter(this, void 0, void 0, function* () {
            return yield this.ws.warpSpeed(...features);
        });
    }
    get animationMixers() {
        return this.mixers.mixers;
    }
    get make() {
        return this.factories.make;
    }
    get add() {
        return this.factories.add;
    }
    haveSomeFun(numberOfElements = 20) {
        Plugins.HaveSomeFun(numberOfElements, this.physics);
    }
    isRunning() {
        return this._isRunning;
    }
    start(key, data) {
        var _a;
        return __awaiter(this, void 0, void 0, function* () {
            // start another scene
            // and stop this one
            if (key && key !== this.__config.sceneKey) {
                this.stop();
                (_a = this.scenes.get(key)) === null || _a === void 0 ? void 0 : _a._start(data);
            }
            else {
                this._start(data);
            }
        });
    }
    _start(data) {
        var _a, _b;
        return __awaiter(this, void 0, void 0, function* () {
            yield ((_b = (_a = this).init) === null || _b === void 0 ? void 0 : _b.call(_a, data));
            yield this._preload();
            yield this._create();
            // console.log('start')
            this.renderer.setAnimationLoop(() => {
                this._update();
            });
            this._isRunning = true;
        });
    }
    restart(data) {
        return __awaiter(this, void 0, void 0, function* () {
            this.stop();
            this.start(this.__config.sceneKey, data);
        });
    }
    stop() {
        return __awaiter(this, void 0, void 0, function* () {
            this._isRunning = false;
            this.renderer.setAnimationLoop(null);
            // reset clock
            this.clock.start();
            for (let i = 0; i < this._deconstructorFunctions.length; i++) {
                yield this._deconstructorFunctions[i]();
            }
            this._deconstructorFunctions = [];
            // destroy all rigid bodies
            for (let i = this.physics.rigidBodies.length - 1; i >= 0; i--) {
                this.physics.destroy(this.physics.rigidBodies[i]);
            }
            // destroy all three objects
            for (let i = this.scene.children.length - 1; i >= 0; i--) {
                this.scene.remove(this.scene.children[i]);
            }
        });
    }
    setSize(width, height) {
        this.renderer.setSize(width, height);
        // @ts-ignore
        if (typeof this.camera.aspect !== 'undefined')
            this.camera.aspect = width / height;
        this.camera.updateProjectionMatrix();
    }
    setPixelRatio(ratio) {
        this.renderer.setPixelRatio(ratio);
    }
    // public get controls() {
    //   return {
    //     pointerDrag: (autoStart = true) => new PointerDrag(this.canvas, autoStart),
    //     pointerLock: (autoLock = true) => new PointerLock(this.canvas, autoLock),
    //     joystick: () => new JoyStick(),
    //     firstPerson: (target: ExtendedObject3D, config: FirstPersonControlsConfig = {}) =>
    //       new FirstPersonControls(this.camera, target, config),
    //     thirdPerson: (target: ExtendedObject3D, config: ThirdPersonControlsConfig = {}) =>
    //       new ThirdPersonControls(this.camera, target, config)
    //   }
    // }
    // @ts-ignore
    init(data = {}) { }
    preload() { }
    create() { }
    update(_time, _delta) { }
    _preload() {
        var _a, _b;
        return __awaiter(this, void 0, void 0, function* () {
            yield ((_b = (_a = this).preload) === null || _b === void 0 ? void 0 : _b.call(_a));
        });
    }
    _create() {
        var _a, _b;
        return __awaiter(this, void 0, void 0, function* () {
            yield ((_b = (_a = this).create) === null || _b === void 0 ? void 0 : _b.call(_a));
        });
    }
    _update() {
        var _a, _b, _c, _d;
        const delta = this.clock.getDelta() * 1000;
        const time = this.clock.getElapsedTime();
        (_b = (_a = this).update) === null || _b === void 0 ? void 0 : _b.call(_a, parseFloat(time.toFixed(3)), parseInt(delta.toString()));
        (_c = this.physics) === null || _c === void 0 ? void 0 : _c.update(delta);
        (_d = this.physics) === null || _d === void 0 ? void 0 : _d.updateDebugger();
        this.animationMixers.update(delta);
        if (this.composer)
            this.composer.render();
        else
            this.renderer.render(this.scene, this.camera);
    }
}
exports.Scene3D = Scene3D;
//# sourceMappingURL=scene3d.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/collisionEvents.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/collisionEvents.js ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CollisionEvents = void 0;
const eventemitter3_1 = __webpack_require__(/*! eventemitter3 */ "./node_modules/eventemitter3/index.js");
class CollisionEvents extends eventemitter3_1.EventEmitter {
    addCollider(object1, object2, eventCallback) {
        if (!object1.body || !object2.body)
            return;
        object1.body.checkCollisions = true;
        object2.body.checkCollisions = true;
        this.on('collision', (data) => {
            var _a, _b;
            const { bodies, event } = data;
            if (((_a = bodies[0]) === null || _a === void 0 ? void 0 : _a.name) && ((_b = bodies[1]) === null || _b === void 0 ? void 0 : _b.name) && (object1 === null || object1 === void 0 ? void 0 : object1.name) && (object2 === null || object2 === void 0 ? void 0 : object2.name)) {
                if (bodies[0].name === object1.name && bodies[1].name === object2.name)
                    eventCallback(event);
                else if (bodies[1].name === object1.name && bodies[0].name === object2.name)
                    eventCallback(event);
            }
        });
    }
}
exports.CollisionEvents = CollisionEvents;
//# sourceMappingURL=collisionEvents.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/constraints.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/constraints.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */
Object.defineProperty(exports, "__esModule", ({ value: true }));
class Constraints {
    constructor(worldTransform, physicsWorld) {
        this.worldTransform = worldTransform;
        this.physicsWorld = physicsWorld;
        this.tmpBtVector3 = new Ammo.btVector3();
    }
    toAmmoV3(v, d = 0) {
        return new Ammo.btVector3(typeof (v === null || v === void 0 ? void 0 : v.x) !== 'undefined' ? v.x : d, typeof (v === null || v === void 0 ? void 0 : v.y) !== 'undefined' ? v.y : d, typeof (v === null || v === void 0 ? void 0 : v.z) !== 'undefined' ? v.z : d);
    }
    get addConstraints() {
        return {
            lock: (bodyA, bodyB, disableCollisionsBetweenLinkedBodies) => this.lock(bodyA, bodyB, disableCollisionsBetweenLinkedBodies),
            fixed: (bodyA, bodyB, disableCollisionsBetweenLinkedBodies) => this.fixed(bodyA, bodyB, disableCollisionsBetweenLinkedBodies),
            pointToPoint: (bodyA, bodyB, config, disableCollisionsBetweenLinkedBodies) => this.pointToPoint(bodyA, bodyB, config, disableCollisionsBetweenLinkedBodies),
            hinge: (bodyA, bodyB, config, disableCollisionsBetweenLinkedBodies) => this.hinge(bodyA, bodyB, config, disableCollisionsBetweenLinkedBodies),
            slider: (bodyA, bodyB, config = {}, disableCollisionsBetweenLinkedBodies) => this.slider(bodyA, bodyB, config, disableCollisionsBetweenLinkedBodies),
            spring: (bodyA, bodyB, config = {}, disableCollisionsBetweenLinkedBodies) => this.spring(bodyA, bodyB, config, disableCollisionsBetweenLinkedBodies),
            coneTwist: (bodyA, bodyB, config = { frameA: {}, frameB: {} }, disableCollisionsBetweenLinkedBodies) => this.coneTwist(bodyA, bodyB, config, disableCollisionsBetweenLinkedBodies),
            dof: (bodyA, bodyB, config, disableCollisionsBetweenLinkedBodies) => this.dof(bodyA, bodyB, config, disableCollisionsBetweenLinkedBodies)
        };
    }
    getTransform(bodyA, bodyB, offset = { x: 0, y: 0, z: 0 }, center = false) {
        // @ts-ignore
        offset = Object.assign({ x: 0, y: 0, z: 0 }, offset);
        const centerVector = (v1, v2) => {
            var dx = (v1.x() - v2.x()) / 2 + offset.x;
            var dy = (v1.y() - v2.y()) / 2 + offset.y;
            var dz = (v1.z() - v2.z()) / 2 + offset.z;
            return new Ammo.btVector3(dx, dy, dz);
        };
        const transformB = new Ammo.btTransform();
        transformB.setIdentity();
        if (!center) {
            // offset
            transformB.setOrigin(new Ammo.btVector3(offset.x, offset.y, offset.z));
            const transformA = bodyA
                .getCenterOfMassTransform()
                .inverse()
                .op_mul(bodyB.getWorldTransform())
                .op_mul(transformB);
            return { transformA: transformA, transformB: transformB };
        }
        else {
            const center = centerVector(bodyA.getWorldTransform().getOrigin(), bodyB.getWorldTransform().getOrigin());
            const transformB = new Ammo.btTransform();
            transformB.setIdentity();
            transformB.setOrigin(center);
            const transformA = bodyA
                .getCenterOfMassTransform()
                .inverse()
                .op_mul(bodyB.getWorldTransform());
            transformA.op_mul(transformB);
            return { transformA: transformA, transformB: transformB };
        }
    }
    lock(bodyA, bodyB, disableCollisionsBetweenLinkedBodies = true) {
        const zero = { x: 0, y: 0, z: 0 };
        return this.dof(bodyA, bodyB, { angularLowerLimit: zero, angularUpperLimit: zero }, disableCollisionsBetweenLinkedBodies);
    }
    fixed(bodyA, bodyB, disableCollisionsBetweenLinkedBodies = true) {
        const transform = this.getTransform(bodyA.ammo, bodyB.ammo);
        transform.transformA.setRotation(bodyA.ammo.getWorldTransform().getRotation());
        transform.transformB.setRotation(bodyB.ammo.getWorldTransform().getRotation());
        const constraint = new Ammo.btFixedConstraint(bodyA.ammo, bodyB.ammo, transform.transformA, transform.transformB);
        this.physicsWorld.addConstraint(constraint, disableCollisionsBetweenLinkedBodies);
        return constraint;
    }
    pointToPoint(bodyA, bodyB, config = {}, disableCollisionsBetweenLinkedBodies = true) {
        const { pivotA, pivotB } = config;
        const pivotV3 = new Ammo.btVector3((pivotA === null || pivotA === void 0 ? void 0 : pivotA.x) || 0, (pivotA === null || pivotA === void 0 ? void 0 : pivotA.y) || 0, (pivotA === null || pivotA === void 0 ? void 0 : pivotA.z) || 0);
        const targetPivotV3 = new Ammo.btVector3((pivotB === null || pivotB === void 0 ? void 0 : pivotB.x) || 0, (pivotB === null || pivotB === void 0 ? void 0 : pivotB.y) || 0, (pivotB === null || pivotB === void 0 ? void 0 : pivotB.z) || 0);
        const constraint = new Ammo.btPoint2PointConstraint(bodyA.ammo, bodyB.ammo, pivotV3, targetPivotV3);
        this.physicsWorld.addConstraint(constraint, disableCollisionsBetweenLinkedBodies);
        return constraint;
    }
    hinge(bodyA, bodyB, config = {}, disableCollisionsBetweenLinkedBodies = true) {
        const { pivotA, pivotB, axisA, axisB } = config;
        const pivotV3 = new Ammo.btVector3((pivotA === null || pivotA === void 0 ? void 0 : pivotA.x) || 0, (pivotA === null || pivotA === void 0 ? void 0 : pivotA.y) || 0, (pivotA === null || pivotA === void 0 ? void 0 : pivotA.z) || 0);
        const targetPivotV3 = new Ammo.btVector3((pivotB === null || pivotB === void 0 ? void 0 : pivotB.x) || 0, (pivotB === null || pivotB === void 0 ? void 0 : pivotB.y) || 0, (pivotB === null || pivotB === void 0 ? void 0 : pivotB.z) || 0);
        const axisV3 = new Ammo.btVector3((axisA === null || axisA === void 0 ? void 0 : axisA.x) || 0, (axisA === null || axisA === void 0 ? void 0 : axisA.y) || 0, (axisA === null || axisA === void 0 ? void 0 : axisA.z) || 0);
        const targetAxisV3 = new Ammo.btVector3((axisB === null || axisB === void 0 ? void 0 : axisB.x) || 0, (axisB === null || axisB === void 0 ? void 0 : axisB.y) || 0, (axisB === null || axisB === void 0 ? void 0 : axisB.z) || 0);
        const constraint = new Ammo.btHingeConstraint(bodyA.ammo, bodyB.ammo, pivotV3, targetPivotV3, axisV3, targetAxisV3, true);
        this.physicsWorld.addConstraint(constraint, disableCollisionsBetweenLinkedBodies);
        return constraint;
    }
    // https://pybullet.org/Bullet/phpBB3/viewtopic.php?f=9&t=12690&p=42152&hilit=btSliderConstraint#p42152
    slider(bodyA, bodyB, config = {}, disableCollisionsBetweenLinkedBodies = true) {
        const transform = this.getTransform(bodyA.ammo, bodyB.ammo);
        const { frameA = {}, frameB = {}, linearLowerLimit: lll = 0, linearUpperLimit: lul = 0, angularLowerLimit: all = 0, angularUpperLimit: aul = 0 } = config;
        const rotationA = transform.transformA.getRotation();
        rotationA.setEulerZYX(frameA.x || 0, frameA.y || 0, frameA.z || 0);
        transform.transformA.setRotation(rotationA);
        const rotationB = transform.transformB.getRotation();
        rotationB.setEulerZYX(frameB.x || 0, frameB.y || 0, frameB.z || 0);
        transform.transformB.setRotation(rotationB);
        const constraint = new Ammo.btSliderConstraint(bodyA.ammo, bodyB.ammo, transform.transformA, transform.transformB, true);
        constraint.setLowerLinLimit(lll);
        constraint.setUpperLinLimit(lul);
        constraint.setLowerAngLimit(all);
        constraint.setUpperAngLimit(aul);
        this.physicsWorld.addConstraint(constraint, disableCollisionsBetweenLinkedBodies);
        return constraint;
    }
    spring(bodyA, bodyB, config = {}, disableCollisionsBetweenLinkedBodies = true) {
        const { stiffness = 50, damping = 0.01, angularLock = false, linearLowerLimit: lll = {}, linearUpperLimit: lul = {}, angularLowerLimit: all = {}, angularUpperLimit: aul = {}, offset = {}, center = false, enableSpring = true } = config;
        const off = Object.assign({ x: 0, y: 0, z: 0 }, offset);
        const transform = this.getTransform(bodyA.ammo, bodyB.ammo, off, center);
        const constraint = new Ammo.btGeneric6DofSpringConstraint(bodyA.ammo, bodyB.ammo, transform.transformA, transform.transformB, true);
        this.tmpBtVector3.setValue(lll.x || 0, lll.y || 0, lll.z || 0);
        constraint.setLinearLowerLimit(this.tmpBtVector3);
        this.tmpBtVector3.setValue(lul.x || 0, lul.y || 0, lul.z || 0);
        constraint.setLinearUpperLimit(this.tmpBtVector3);
        if (angularLock) {
            this.tmpBtVector3.setValue(0, 0, 0);
            constraint.setAngularLowerLimit(this.tmpBtVector3);
            constraint.setAngularUpperLimit(this.tmpBtVector3);
        }
        else {
            console.log(all, aul);
            constraint.setAngularLowerLimit(this.toAmmoV3(all, -Math.PI));
            constraint.setAngularUpperLimit(this.toAmmoV3(aul, Math.PI));
        }
        for (let i = 0; i < 3; i++) {
            constraint.enableSpring(i, enableSpring);
            constraint.setStiffness(i, stiffness);
            constraint.setDamping(i, damping);
        }
        // I have no idea what setEquilibriumPoint does :/
        // constraint.setEquilibriumPoint()
        this.physicsWorld.addConstraint(constraint, disableCollisionsBetweenLinkedBodies);
        return constraint;
    }
    coneTwist(bodyA, bodyB, config, disableCollisionsBetweenLinkedBodies = true) {
        const { frameA, frameB } = config;
        const rbAFrame = new Ammo.btTransform();
        rbAFrame.setIdentity();
        rbAFrame.getOrigin().setValue((frameA === null || frameA === void 0 ? void 0 : frameA.x) || 0, (frameA === null || frameA === void 0 ? void 0 : frameA.y) || 0, (frameA === null || frameA === void 0 ? void 0 : frameA.z) || 0);
        const rbBFrame = new Ammo.btTransform();
        rbBFrame.setIdentity();
        rbBFrame.getOrigin().setValue((frameB === null || frameB === void 0 ? void 0 : frameB.x) || 0, (frameB === null || frameB === void 0 ? void 0 : frameB.y) || 0, (frameB === null || frameB === void 0 ? void 0 : frameB.z) || 0);
        const t = this.getTransform(bodyA.ammo, bodyB.ammo);
        const constraint = new Ammo.btConeTwistConstraint(bodyB.ammo, bodyA.ammo, rbAFrame, rbBFrame);
        // does not work at all :/
        // constraint.setLimit(-Math.PI / 50, Math.PI / 50)
        constraint.setAngularOnly(true);
        this.physicsWorld.addConstraint(constraint, disableCollisionsBetweenLinkedBodies);
        return constraint;
    }
    dof(bodyA, bodyB, config = {}, disableCollisionsBetweenLinkedBodies = true) {
        const { offset, center = false } = config;
        const off = Object.assign({ x: 0, y: 0, z: 0 }, offset);
        const transform = this.getTransform(bodyA.ammo, bodyB.ammo, off, center);
        const constraint = new Ammo.btGeneric6DofConstraint(bodyA.ammo, bodyB.ammo, transform.transformA, transform.transformB, true);
        const { linearLowerLimit, linearUpperLimit, angularLowerLimit, angularUpperLimit } = config;
        const lll = this.toAmmoV3(linearLowerLimit);
        const lul = this.toAmmoV3(linearUpperLimit);
        const all = this.toAmmoV3(angularLowerLimit, -Math.PI);
        const aul = this.toAmmoV3(angularUpperLimit, Math.PI);
        constraint.setLinearLowerLimit(lll);
        constraint.setLinearUpperLimit(lul);
        constraint.setAngularLowerLimit(all);
        constraint.setAngularUpperLimit(aul);
        Ammo.destroy(lll);
        Ammo.destroy(lul);
        Ammo.destroy(all);
        Ammo.destroy(aul);
        this.physicsWorld.addConstraint(constraint, disableCollisionsBetweenLinkedBodies);
        return constraint;
    }
}
exports.default = Constraints;
//# sourceMappingURL=constraints.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/convexObjectBreaker.js":
/*!***********************************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/convexObjectBreaker.js ***!
  \***********************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

/**
 * Copied from three.js examples and added a fix
 */
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ConvexObjectBreaker = void 0;
/**
 * @author yomboprime https://github.com/yomboprime
 *
 * @fileoverview This class can be used to subdivide a convex Geometry object into pieces.
 *
 * Usage:
 *
 * Use the function prepareBreakableObject to prepare a Mesh object to be broken.
 *
 * Then, call the various functions to subdivide the object (subdivideByImpact, cutByPlane)
 *
 * Sub-objects that are product of subdivision don't need prepareBreakableObject to be called on them.
 *
 * Requisites for the object:
 *
 *  - Mesh object must have a BufferGeometry (not Geometry) and a Material
 *
 *  - Vertex normals must be planar (not smoothed)
 *
 *  - The geometry must be convex (this is not checked in the library). You can create convex
 *  geometries with ConvexBufferGeometry. The BoxBufferGeometry, SphereBufferGeometry and other convex primitives
 *  can also be used.
 *
 * Note: This lib adds member variables to object's userData member (see prepareBreakableObject function)
 * Use with caution and read the code when using with other libs.
 *
 * @param {double} minSizeForBreak Min size a debris can have to break.
 * @param {double} smallDelta Max distance to consider that a point belongs to a plane.
 *
 */
const index_1 = __webpack_require__(/*! @enable3d/three-wrapper/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
const index_2 = __webpack_require__(/*! @enable3d/three-wrapper/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
const logger_1 = __webpack_require__(/*! @enable3d/common/dist/logger */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/logger.js");
const ConvexObjectBreaker = function (minSizeForBreak, smallDelta) {
    // @ts-ignore
    this.minSizeForBreak = minSizeForBreak || 1.4;
    // @ts-ignore
    this.smallDelta = smallDelta || 0.0001;
    // @ts-ignore
    this.tempLine1 = new index_1.Line3();
    // @ts-ignore
    this.tempPlane1 = new index_1.Plane();
    // @ts-ignore
    this.tempPlane2 = new index_1.Plane();
    // @ts-ignore
    this.tempPlane_Cut = new index_1.Plane();
    // @ts-ignore
    this.tempCM1 = new index_1.Vector3();
    // @ts-ignore
    this.tempCM2 = new index_1.Vector3();
    // @ts-ignore
    this.tempVector3 = new index_1.Vector3();
    // @ts-ignore
    this.tempVector3_2 = new index_1.Vector3();
    // @ts-ignore
    this.tempVector3_3 = new index_1.Vector3();
    // @ts-ignore
    this.tempVector3_P0 = new index_1.Vector3();
    // @ts-ignore
    this.tempVector3_P1 = new index_1.Vector3();
    // @ts-ignore
    this.tempVector3_P2 = new index_1.Vector3();
    // @ts-ignore
    this.tempVector3_N0 = new index_1.Vector3();
    // @ts-ignore
    this.tempVector3_N1 = new index_1.Vector3();
    // @ts-ignore
    this.tempVector3_AB = new index_1.Vector3();
    // @ts-ignore
    this.tempVector3_CB = new index_1.Vector3();
    // @ts-ignore
    this.tempResultObjects = { object1: null, object2: null };
    // @ts-ignore
    this.segments = [];
    var n = 30 * 30;
    // @ts-ignore
    for (var i = 0; i < n; i++)
        this.segments[i] = false;
};
exports.ConvexObjectBreaker = ConvexObjectBreaker;
ConvexObjectBreaker.prototype = {
    constructor: ConvexObjectBreaker,
    prepareBreakableObject: function (object, mass, velocity, angularVelocity, breakable) {
        // object is a Object3d (normally a Mesh), must have a BufferGeometry, and it must be convex.
        // Its material property is propagated to its children (sub-pieces)
        // mass must be > 0
        if (!object.geometry.isBufferGeometry) {
            console.error('THREE.ConvexObjectBreaker.prepareBreakableObject(): Parameter object must have a BufferGeometry.');
        }
        object.userData.ammoPhysicsData = {}; // initialise our new data container - would be best to move this to ExtendedObject and not rely on userData at all for best compatibility
        var ammoPhysicsData = object.userData.ammoPhysicsData; // get reference to it
        ammoPhysicsData.mass = mass;
        ammoPhysicsData.velocity = velocity.clone();
        ammoPhysicsData.angularVelocity = angularVelocity.clone();
        ammoPhysicsData.breakable = breakable;
    },
    /*
     * @param {int} maxRadialIterations Iterations for radial cuts.
     * @param {int} maxRandomIterations Max random iterations for not-radial cuts
     *
     * Returns the array of pieces
     */
    subdivideByImpact: function (object, pointOfImpact, normal, maxRadialIterations, maxRandomIterations) {
        var debris = [];
        var tempPlane1 = this.tempPlane1;
        var tempPlane2 = this.tempPlane2;
        this.tempVector3.addVectors(pointOfImpact, normal);
        tempPlane1.setFromCoplanarPoints(pointOfImpact, object.position, this.tempVector3);
        var maxTotalIterations = maxRandomIterations + maxRadialIterations;
        var scope = this;
        function subdivideRadial(subObject, startAngle, endAngle, numIterations) {
            if (Math.random() < numIterations * 0.05 || numIterations > maxTotalIterations) {
                debris.push(subObject);
                return;
            }
            var angle = Math.PI;
            if (numIterations === 0) {
                tempPlane2.normal.copy(tempPlane1.normal);
                tempPlane2.constant = tempPlane1.constant;
            }
            else {
                if (numIterations <= maxRadialIterations) {
                    angle = (endAngle - startAngle) * (0.2 + 0.6 * Math.random()) + startAngle;
                    // Rotate tempPlane2 at impact point around normal axis and the angle
                    scope.tempVector3_2.copy(object.position).sub(pointOfImpact).applyAxisAngle(normal, angle).add(pointOfImpact);
                    tempPlane2.setFromCoplanarPoints(pointOfImpact, scope.tempVector3, scope.tempVector3_2);
                }
                else {
                    angle = (0.5 * (numIterations & 1) + 0.2 * (2 - Math.random())) * Math.PI;
                    // Rotate tempPlane2 at object position around normal axis and the angle
                    scope.tempVector3_2
                        .copy(pointOfImpact)
                        .sub(subObject.position)
                        .applyAxisAngle(normal, angle)
                        .add(subObject.position);
                    scope.tempVector3_3.copy(normal).add(subObject.position);
                    tempPlane2.setFromCoplanarPoints(subObject.position, scope.tempVector3_3, scope.tempVector3_2);
                }
            }
            // Perform the cut
            scope.cutByPlane(subObject, tempPlane2, scope.tempResultObjects);
            var obj1 = scope.tempResultObjects.object1;
            var obj2 = scope.tempResultObjects.object2;
            if (obj1) {
                subdivideRadial(obj1, startAngle, angle, numIterations + 1);
            }
            if (obj2) {
                subdivideRadial(obj2, angle, endAngle, numIterations + 1);
            }
        }
        subdivideRadial(object, 0, 2 * Math.PI, 0);
        return debris;
    },
    cutByPlane: function (object, plane, output) {
        // Returns breakable objects in output.object1 and output.object2 members, the resulting 2 pieces of the cut.
        // object2 can be null if the plane doesn't cut the object.
        // object1 can be null only in case of internal error
        // Returned value is number of pieces, 0 for error.
        var geometry = object.geometry;
        var coords = geometry.attributes.position.array;
        var normals = geometry.attributes.normal.array;
        var numPoints = coords.length / 3;
        var numFaces = numPoints / 3;
        var indices = geometry.getIndex();
        if (indices) {
            indices = indices.array;
            numFaces = indices.length / 3;
        }
        function getVertexIndex(faceIdx, vert) {
            // vert = 0, 1 or 2.
            var idx = faceIdx * 3 + vert;
            return indices ? indices[idx] : idx;
        }
        var points1 = [];
        var points2 = [];
        var delta = this.smallDelta;
        // Reset segments mark
        var numPointPairs = numPoints * numPoints;
        for (var i = 0; i < numPointPairs; i++)
            this.segments[i] = false;
        var p0 = this.tempVector3_P0;
        var p1 = this.tempVector3_P1;
        var n0 = this.tempVector3_N0;
        var n1 = this.tempVector3_N1;
        // Iterate through the faces to mark edges shared by coplanar faces
        for (var i = 0; i < numFaces - 1; i++) {
            var a1 = getVertexIndex(i, 0);
            var b1 = getVertexIndex(i, 1);
            var c1 = getVertexIndex(i, 2);
            // Assuming all 3 vertices have the same normal
            n0.set(normals[a1], normals[a1] + 1, normals[a1] + 2);
            for (var j = i + 1; j < numFaces; j++) {
                var a2 = getVertexIndex(j, 0);
                var b2 = getVertexIndex(j, 1);
                var c2 = getVertexIndex(j, 2);
                // Assuming all 3 vertices have the same normal
                n1.set(normals[a2], normals[a2] + 1, normals[a2] + 2);
                var coplanar = 1 - n0.dot(n1) < delta;
                if (coplanar) {
                    if (a1 === a2 || a1 === b2 || a1 === c2) {
                        if (b1 === a2 || b1 === b2 || b1 === c2) {
                            this.segments[a1 * numPoints + b1] = true;
                            this.segments[b1 * numPoints + a1] = true;
                        }
                        else {
                            this.segments[c1 * numPoints + a1] = true;
                            this.segments[a1 * numPoints + c1] = true;
                        }
                    }
                    else if (b1 === a2 || b1 === b2 || b1 === c2) {
                        this.segments[c1 * numPoints + b1] = true;
                        this.segments[b1 * numPoints + c1] = true;
                    }
                }
            }
        }
        // Transform the plane to object local space
        var localPlane = this.tempPlane_Cut;
        object.updateMatrix();
        ConvexObjectBreaker.transformPlaneToLocalSpace(plane, object.matrix, localPlane);
        // Iterate through the faces adding points to both pieces
        for (var i = 0; i < numFaces; i++) {
            var va = getVertexIndex(i, 0);
            var vb = getVertexIndex(i, 1);
            var vc = getVertexIndex(i, 2);
            for (var segment = 0; segment < 3; segment++) {
                var i0 = segment === 0 ? va : segment === 1 ? vb : vc;
                var i1 = segment === 0 ? vb : segment === 1 ? vc : va;
                var segmentState = this.segments[i0 * numPoints + i1];
                if (segmentState)
                    continue; // The segment already has been processed in another face
                // Mark segment as processed (also inverted segment)
                this.segments[i0 * numPoints + i1] = true;
                this.segments[i1 * numPoints + i0] = true;
                p0.set(coords[3 * i0], coords[3 * i0 + 1], coords[3 * i0 + 2]);
                p1.set(coords[3 * i1], coords[3 * i1 + 1], coords[3 * i1 + 2]);
                // mark: 1 for negative side, 2 for positive side, 3 for coplanar point
                var mark0 = 0;
                var d = localPlane.distanceToPoint(p0);
                if (d > delta) {
                    mark0 = 2;
                    points2.push(p0.clone());
                }
                else if (d < -delta) {
                    mark0 = 1;
                    points1.push(p0.clone());
                }
                else {
                    mark0 = 3;
                    points1.push(p0.clone());
                    points2.push(p0.clone());
                }
                // mark: 1 for negative side, 2 for positive side, 3 for coplanar point
                var mark1 = 0;
                var d = localPlane.distanceToPoint(p1);
                if (d > delta) {
                    mark1 = 2;
                    points2.push(p1.clone());
                }
                else if (d < -delta) {
                    mark1 = 1;
                    points1.push(p1.clone());
                }
                else {
                    mark1 = 3;
                    points1.push(p1.clone());
                    points2.push(p1.clone());
                }
                if ((mark0 === 1 && mark1 === 2) || (mark0 === 2 && mark1 === 1)) {
                    // Intersection of segment with the plane
                    this.tempLine1.start.copy(p0);
                    this.tempLine1.end.copy(p1);
                    var intersection = new index_1.Vector3();
                    intersection = localPlane.intersectLine(this.tempLine1, intersection);
                    if (intersection === undefined) {
                        // Shouldn't happen
                        console.error('Internal error: segment does not intersect plane.');
                        output.segmentedObject1 = null;
                        output.segmentedObject2 = null;
                        return 0;
                    }
                    points1.push(intersection);
                    points2.push(intersection.clone());
                }
            }
        }
        // Calculate debris mass (very fast and imprecise):
        var newMass = object.userData.ammoPhysicsData.mass * 0.5;
        // Calculate debris Center of Mass (again fast and imprecise)
        this.tempCM1.set(0, 0, 0);
        var radius1 = 0;
        var numPoints1 = points1.length;
        if (numPoints1 > 0) {
            for (var i = 0; i < numPoints1; i++)
                this.tempCM1.add(points1[i]);
            this.tempCM1.divideScalar(numPoints1);
            for (var i = 0; i < numPoints1; i++) {
                var p = points1[i];
                p.sub(this.tempCM1);
                radius1 = Math.max(radius1, p.x, p.y, p.z);
            }
            this.tempCM1.add(object.position);
        }
        this.tempCM2.set(0, 0, 0);
        var radius2 = 0;
        var numPoints2 = points2.length;
        if (numPoints2 > 0) {
            for (var i = 0; i < numPoints2; i++)
                this.tempCM2.add(points2[i]);
            this.tempCM2.divideScalar(numPoints2);
            for (var i = 0; i < numPoints2; i++) {
                var p = points2[i];
                p.sub(this.tempCM2);
                radius2 = Math.max(radius2, p.x, p.y, p.z);
            }
            this.tempCM2.add(object.position);
        }
        var object1 = null;
        var object2 = null;
        var numObjects = 0;
        /**
         * MOD: Wrapped in try catch block to avoid errors
         */
        if (numPoints1 > 4) {
            try {
                object1 = new index_1.Mesh(new index_2.ConvexBufferGeometry(points1), object.material);
                object1.position.copy(this.tempCM1);
                object1.quaternion.copy(object.quaternion);
                object1.userData = object.userData;
                this.prepareBreakableObject(object1, newMass, object.userData.ammoPhysicsData.velocity, object.userData.ammoPhysicsData.angularVelocity, 2 * radius1 > this.minSizeForBreak);
                numObjects++;
            }
            catch (error) {
                logger_1.default('Error in ConvexObjectBreaker.ts');
                logger_1.default(error);
            }
        }
        if (numPoints2 > 4) {
            try {
                object2 = new index_1.Mesh(new index_2.ConvexBufferGeometry(points2), object.material);
                object2.position.copy(this.tempCM2);
                object2.quaternion.copy(object.quaternion);
                object2.userData = object.userData;
                this.prepareBreakableObject(object2, newMass, object.userData.ammoPhysicsData.velocity, object.userData.ammoPhysicsData.angularVelocity, 2 * radius2 > this.minSizeForBreak);
                numObjects++;
            }
            catch (error) {
                logger_1.default('Error in ConvexObjectBreaker.ts');
                logger_1.default(error);
            }
        }
        output.object1 = object1;
        output.object2 = object2;
        return numObjects;
    }
};
ConvexObjectBreaker.transformFreeVector = function (v, m) {
    // input:
    // vector interpreted as a free vector
    // THREE.Matrix4 orthogonal matrix (matrix without scale)
    var x = v.x, y = v.y, z = v.z;
    var e = m.elements;
    v.x = e[0] * x + e[4] * y + e[8] * z;
    v.y = e[1] * x + e[5] * y + e[9] * z;
    v.z = e[2] * x + e[6] * y + e[10] * z;
    return v;
};
ConvexObjectBreaker.transformFreeVectorInverse = function (v, m) {
    // input:
    // vector interpreted as a free vector
    // THREE.Matrix4 orthogonal matrix (matrix without scale)
    var x = v.x, y = v.y, z = v.z;
    var e = m.elements;
    v.x = e[0] * x + e[1] * y + e[2] * z;
    v.y = e[4] * x + e[5] * y + e[6] * z;
    v.z = e[8] * x + e[9] * y + e[10] * z;
    return v;
};
ConvexObjectBreaker.transformTiedVectorInverse = function (v, m) {
    // input:
    // vector interpreted as a tied (ordinary) vector
    // THREE.Matrix4 orthogonal matrix (matrix without scale)
    var x = v.x, y = v.y, z = v.z;
    var e = m.elements;
    v.x = e[0] * x + e[1] * y + e[2] * z - e[12];
    v.y = e[4] * x + e[5] * y + e[6] * z - e[13];
    v.z = e[8] * x + e[9] * y + e[10] * z - e[14];
    return v;
};
ConvexObjectBreaker.transformPlaneToLocalSpace = (function () {
    var v1 = new index_1.Vector3();
    return function transformPlaneToLocalSpace(plane, m, resultPlane) {
        resultPlane.normal.copy(plane.normal);
        resultPlane.constant = plane.constant;
        var referencePoint = ConvexObjectBreaker.transformTiedVectorInverse(plane.coplanarPoint(v1), m);
        ConvexObjectBreaker.transformFreeVectorInverse(resultPlane.normal, m);
        // recalculate constant (like in setFromNormalAndCoplanarPoint)
        resultPlane.constant = -referencePoint.dot(resultPlane.normal);
    };
})();
//# sourceMappingURL=convexObjectBreaker.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/debugDrawer.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/debugDrawer.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @description  This is a modified version of the original code from Kevin Lee
 */
Object.defineProperty(exports, "__esModule", ({ value: true }));
/**
 * @author       Kevin Lee (https://github.com/InfiniteLee)
 * @copyright    Copyright (c) 2019 Kevin Lee; Project Url: https://github.com/InfiniteLee/ammo-debug-drawer
 * @license      {@link https://github.com/InfiniteLee/ammo-debug-drawer/blob/master/LICENSE|MPL-2.0}
 */
const index_1 = __webpack_require__(/*! @enable3d/three-wrapper/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
const AmmoDebugConstants = {
    NoDebug: 0,
    DrawWireframe: 1,
    DrawAabb: 2,
    DrawFeaturesText: 4,
    DrawContactPoints: 8,
    NoDeactivation: 16,
    NoHelpText: 32,
    DrawText: 64,
    ProfileTimings: 128,
    EnableSatComparison: 256,
    DisableBulletLCP: 512,
    EnableCCD: 1024,
    DrawConstraints: 1 << 11,
    DrawConstraintLimits: 1 << 12,
    FastWireframe: 1 << 13,
    DrawNormals: 1 << 14,
    DrawOnTop: 1 << 15,
    MAX_DEBUG_DRAW_MODE: 0xffffffff
};
/**
 * An implementation of the btIDebugDraw interface in Ammo.js, for debug rendering of Ammo shapes
 */
class DebugDrawer {
    constructor(scene, world, options = {}) {
        this.scene = scene;
        this.world = world;
        this.options = options;
        this.debugDrawMode = options.debugDrawMode || AmmoDebugConstants.DrawWireframe;
        const drawOnTop = this.debugDrawMode & AmmoDebugConstants.DrawOnTop || false;
        const maxBufferSize = options.maxBufferSize || 1000000;
        this.geometry = new index_1.BufferGeometry();
        const vertices = new Float32Array(maxBufferSize * 3);
        const colors = new Float32Array(maxBufferSize * 3);
        /*
        I do not know the difference, just using the first one.
        export const StaticDrawUsage: Usage;
        export const DynamicDrawUsage: Usage;
        export const StreamDrawUsage: Usage;
        export const StaticReadUsage: Usage;
        export const DynamicReadUsage: Usage;
        export const StreamReadUsage: Usage;
        export const StaticCopyUsage: Usage;
        export const DynamicCopyUsage: Usage;
        export const StreamCopyUsage: Usage;
         */
        this.geometry.setAttribute('position', new index_1.BufferAttribute(vertices, 3).setUsage(index_1.StaticDrawUsage));
        this.geometry.setAttribute('color', new index_1.BufferAttribute(colors, 3).setUsage(index_1.StaticDrawUsage));
        this.index = 0;
        const material = new index_1.LineBasicMaterial({
            vertexColors: true,
            depthTest: !drawOnTop
        });
        this.mesh = new index_1.LineSegments(this.geometry, material);
        if (drawOnTop)
            this.mesh.renderOrder = 999;
        this.mesh.frustumCulled = false;
        this.enabled = false;
        this.debugDrawer = new Ammo.DebugDrawer();
        this.debugDrawer.drawLine = this.drawLine.bind(this);
        this.debugDrawer.drawContactPoint = this.drawContactPoint.bind(this);
        this.debugDrawer.reportErrorWarning = this.reportErrorWarning.bind(this);
        this.debugDrawer.draw3dText = this.draw3dText.bind(this);
        this.debugDrawer.setDebugMode = this.setDebugMode.bind(this);
        this.debugDrawer.getDebugMode = this.getDebugMode.bind(this);
        this.world.setDebugDrawer(this.debugDrawer);
    }
    enable() {
        this.enabled = true;
        this.scene.add(this.mesh);
    }
    disable() {
        this.enabled = false;
        this.scene.remove(this.mesh);
    }
    update() {
        if (!this.enabled) {
            return;
        }
        if (this.index != 0) {
            // @ts-ignore
            this.geometry.attributes.position.needsUpdate = true;
            // @ts-ignore
            this.geometry.attributes.color.needsUpdate = true;
        }
        this.index = 0;
        this.world.debugDrawWorld();
        this.geometry.setDrawRange(0, this.index);
    }
    drawLine(from, to, color) {
        // @ts-ignore
        const heap = Ammo.HEAPF32;
        const r = heap[(color + 0) / 4];
        const g = heap[(color + 4) / 4];
        const b = heap[(color + 8) / 4];
        const fromX = heap[(from + 0) / 4];
        const fromY = heap[(from + 4) / 4];
        const fromZ = heap[(from + 8) / 4];
        this.geometry.attributes.position.setXYZ(this.index, fromX, fromY, fromZ);
        this.geometry.attributes.color.setXYZ(this.index++, r, g, b);
        const toX = heap[(to + 0) / 4];
        const toY = heap[(to + 4) / 4];
        const toZ = heap[(to + 8) / 4];
        this.geometry.attributes.position.setXYZ(this.index, toX, toY, toZ);
        this.geometry.attributes.color.setXYZ(this.index++, r, g, b);
    }
    //TODO: figure out how to make lifeTime work
    drawContactPoint(pointOnB, normalOnB, distance, _lifeTime, color) {
        // @ts-ignore
        const heap = Ammo.HEAPF32;
        const r = heap[(color + 0) / 4];
        const g = heap[(color + 4) / 4];
        const b = heap[(color + 8) / 4];
        const x = heap[(pointOnB + 0) / 4];
        const y = heap[(pointOnB + 4) / 4];
        const z = heap[(pointOnB + 8) / 4];
        this.geometry.attributes.position.setXYZ(this.index, x, y, z);
        this.geometry.attributes.color.setXYZ(this.index++, r, g, b);
        const dx = heap[(normalOnB + 0) / 4] * distance;
        const dy = heap[(normalOnB + 4) / 4] * distance;
        const dz = heap[(normalOnB + 8) / 4] * distance;
        this.geometry.attributes.position.setXYZ(this.index, x + dx, y + dy, z + dz);
        this.geometry.attributes.color.setXYZ(this.index++, r, g, b);
    }
    reportErrorWarning(warningString) {
        if (Ammo.hasOwnProperty('Pointer_stringify')) {
            // @ts-ignore
            console.warn(Ammo.Pointer_stringify(warningString));
        }
        else if (!this.warnedOnce) {
            this.warnedOnce = true;
            console.warn("Cannot print warningString, please rebuild Ammo.js using 'debug' flag");
        }
    }
    draw3dText(_location, _textString) {
        //TODO
        console.warn('TODO: draw3dText');
    }
    setDebugMode(debugMode) {
        this.debugDrawMode = debugMode;
    }
    getDebugMode() {
        return this.debugDrawMode;
    }
}
exports.default = DebugDrawer;
//# sourceMappingURL=debugDrawer.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/index.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/index.js ***!
  \*********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";

var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __exportStar = (this && this.__exportStar) || function(m, exports) {
    for (var p in m) if (p !== "default" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
__webpack_require__(/*! @enable3d/common/dist/typesAmmo */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/typesAmmo.js");
__webpack_require__(/*! @enable3d/common/dist/typesCustom */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/typesCustom.js");
__exportStar(__webpack_require__(/*! ./physics */ "./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/physics.js"), exports);
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/lib/Clock.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/lib/Clock.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

/**
 * @author yandeu
 * @description Ported to TypeScript
 */
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Clock = void 0;
/**
 * @author alteredq / http://alteredqualia.com/
 */
/**
 * This is the Clock class THREE provides.
 */
class Clock {
    constructor(autoStart = true) {
        this.autoStart = autoStart !== undefined ? autoStart : true;
        this.startTime = 0;
        this.oldTime = 0;
        this.elapsedTime = 0;
        this.running = false;
    }
    start() {
        this.startTime = (typeof performance === 'undefined' ? Date : performance).now(); // see #10732
        this.oldTime = this.startTime;
        this.elapsedTime = 0;
        this.running = true;
    }
    stop() {
        this.getElapsedTime();
        this.running = false;
        this.autoStart = false;
    }
    getElapsedTime() {
        this.getDelta();
        return this.elapsedTime;
    }
    getDelta() {
        let diff = 0;
        if (this.autoStart && !this.running) {
            this.start();
            return 0;
        }
        if (this.running) {
            let newTime = (typeof performance === 'undefined' ? Date : performance).now();
            diff = (newTime - this.oldTime) / 1000;
            this.oldTime = newTime;
            this.elapsedTime += diff;
        }
        return diff;
    }
}
exports.Clock = Clock;
//# sourceMappingURL=Clock.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/physics.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/physics.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.AmmoPhysics = exports.Clock = exports.Types = exports.AllHitsRaycaster = exports.ClosestRaycaster = exports.PhysicsLoader = exports.ExtendedGroup = exports.ExtendedMesh = exports.ExtendedObject3D = void 0;
const logger_1 = __webpack_require__(/*! @enable3d/common/dist/logger */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/logger.js");
const physicsBody_1 = __webpack_require__(/*! @enable3d/common/dist/physicsBody */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/physicsBody.js");
const extendedObject3D_1 = __webpack_require__(/*! @enable3d/common/dist/extendedObject3D */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/extendedObject3D.js");
Object.defineProperty(exports, "ExtendedObject3D", ({ enumerable: true, get: function () { return extendedObject3D_1.ExtendedObject3D; } }));
const extendedMesh_1 = __webpack_require__(/*! @enable3d/common/dist/extendedMesh */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/extendedMesh.js");
Object.defineProperty(exports, "ExtendedMesh", ({ enumerable: true, get: function () { return extendedMesh_1.ExtendedMesh; } }));
const extendedGroup_1 = __webpack_require__(/*! @enable3d/common/dist/extendedGroup */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/extendedGroup.js");
Object.defineProperty(exports, "ExtendedGroup", ({ enumerable: true, get: function () { return extendedGroup_1.ExtendedGroup; } }));
const shapes_1 = __webpack_require__(/*! ./shapes */ "./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/shapes.js");
const constraints_1 = __webpack_require__(/*! ./constraints */ "./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/constraints.js");
const eventemitter3_1 = __webpack_require__(/*! eventemitter3 */ "./node_modules/eventemitter3/index.js");
const index_1 = __webpack_require__(/*! @enable3d/three-wrapper/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
const three_to_ammo_1 = __webpack_require__(/*! ./three-to-ammo */ "./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/three-to-ammo.js");
const torusShape_1 = __webpack_require__(/*! ./torusShape */ "./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/torusShape.js");
const factories_1 = __webpack_require__(/*! @enable3d/common/dist/factories */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/factories.js");
const collisionEvents_1 = __webpack_require__(/*! ./collisionEvents */ "./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/collisionEvents.js");
const debugDrawer_1 = __webpack_require__(/*! ./debugDrawer */ "./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/debugDrawer.js");
const convexObjectBreaker_1 = __webpack_require__(/*! ./convexObjectBreaker */ "./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/convexObjectBreaker.js");
const physicsLoader_1 = __webpack_require__(/*! @enable3d/common/dist/physicsLoader */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/physicsLoader.js");
Object.defineProperty(exports, "PhysicsLoader", ({ enumerable: true, get: function () { return physicsLoader_1.PhysicsLoader; } }));
const defaultMaterial_1 = __webpack_require__(/*! @enable3d/common/dist/defaultMaterial */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/defaultMaterial.js");
const Types = __webpack_require__(/*! @enable3d/common/dist/types */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/types.js");
exports.Types = Types;
const raycaster_1 = __webpack_require__(/*! ./raycaster/raycaster */ "./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/raycaster/raycaster.js");
Object.defineProperty(exports, "ClosestRaycaster", ({ enumerable: true, get: function () { return raycaster_1.ClosestRaycaster; } }));
Object.defineProperty(exports, "AllHitsRaycaster", ({ enumerable: true, get: function () { return raycaster_1.AllHitsRaycaster; } }));
// Export THREE.Clock
var Clock_1 = __webpack_require__(/*! ./lib/Clock */ "./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/lib/Clock.js");
Object.defineProperty(exports, "Clock", ({ enumerable: true, get: function () { return Clock_1.Clock; } }));
class AmmoPhysics extends eventemitter3_1.EventEmitter {
    constructor(scene, config = {}) {
        super();
        this.scene = scene;
        this.config = config;
        this.rigidBodies = [];
        this.earlierDetectedCollisions = [];
        this.complexShapes = ['plane', 'hull', 'hacd', 'vhacd', 'convexMesh', 'concaveMesh'];
        this.gravity = config.gravity || { x: 0, y: -9.81, z: 0 };
        this.isHeadless = scene === 'headless' ? true : false;
        this.tmpEuler = new index_1.Euler();
        this.tmpQuaternion = new index_1.Quaternion();
        this.tmpVector3 = new index_1.Vector3();
        this.tmpVector3a = new index_1.Vector3();
        this.tmpMatrix4 = new index_1.Matrix4();
        this.tmpMatrix4a = new index_1.Matrix4();
        this.tmpBtVector3 = new Ammo.btVector3();
        this.tmpBtQuaternion = new Ammo.btQuaternion(0, 0, 0, 1);
        this.emptyV3 = new index_1.Vector3();
        this.impactPoint = new index_1.Vector3();
        this.impactNormal = new index_1.Vector3();
        if (scene !== 'headless') {
            this.defaultMaterial = new defaultMaterial_1.default();
            // const info = `Ammo.js physics provided by enable3d`
            // console.log(
            //   `%c %c %c %c %c ${info} %c https://enable3d.io/`,
            //   'background: #ff0000',
            //   'background: #ffff00',
            //   'background: #00ff00',
            //   'background: #00ffff',
            //   'color: #fff; background: #000000;',
            //   'background: none'
            // )
        }
        this.start();
    }
    /** @deprecated Use worldTransform instead of tmpTrans. */
    get tmpTrans() {
        console.warn('Use worldTransform instead of tmpTrans.');
        return this.worldTransform;
    }
    /** @deprecated Use worldTransform instead of tmpTrans. */
    set tmpTrans(transform) {
        console.warn('Use worldTransform instead of tmpTrans.');
        this.worldTransform = transform;
    }
    /** Destroys a physics body. */
    destroy(body) {
        var _a;
        // @ts-ignore
        const b = Object.keys(body).includes('body') ? body.body : body;
        if (typeof (b === null || b === void 0 ? void 0 : b.ammo) === 'undefined')
            return;
        // @ts-ignore
        const name = b.ammo.name;
        // @ts-ignore
        let obj = b.ammo.threeObject;
        if (name && obj) {
            if ((_a = obj === null || obj === void 0 ? void 0 : obj.body) === null || _a === void 0 ? void 0 : _a.ammo) {
                // remove from physics world
                !obj.body.isSoftBody
                    ? this.physicsWorld.removeRigidBody(obj.body.ammo)
                    : this.physicsWorld.removeSoftBody(obj.body.ammo);
                // call destructor on body
                obj.body.destructor();
                // reset properties
                // @ts-ignore
                obj.body = undefined;
                obj.hasBody = false;
                // remove from this.objectAmmo
                // @ts-ignore
                delete b.ammo.threeObject;
                // remove from this.rigidBodies
                for (let i = 0; i < this.rigidBodies.length; i++) {
                    if (this.rigidBodies[i].name === name) {
                        this.rigidBodies.splice(i, 1);
                        i--;
                    }
                }
            }
        }
        if (this.scene === 'headless' && obj)
            obj = null;
    }
    setup() {
        // add worldTransform
        this.worldTransform = new Ammo.btTransform();
        // setup ammo physics
        if (typeof this.config.setupPhysicsWorld === 'function')
            this.physicsWorld = this.config.setupPhysicsWorld();
        else
            this.physicsWorld = this.setupPhysicsWorld();
        if (this.scene !== 'headless') {
            // Initialize convexBreaker
            // @ts-ignore
            this.convexBreaker = new convexObjectBreaker_1.ConvexObjectBreaker();
            this.objectsToRemove = [];
            this.numObjectsToRemove = 0;
            for (let i = 0; i < 500; i++) {
                this.objectsToRemove[i] = null;
            }
        }
        this.collisionEvents = new collisionEvents_1.CollisionEvents();
        this.factory = new factories_1.default(this.scene);
        this.shapes = new shapes_1.default(this.factory, (object, config) => this.addExisting(object, config));
        this.constraints = new constraints_1.default(this.worldTransform, this.physicsWorld);
        if (this.scene !== 'headless')
            this.debugDrawer = new debugDrawer_1.default(this.scene, this.physicsWorld, {});
    }
    updateDebugger() {
        if (this.scene === 'headless')
            return;
        if (this.debugDrawer && this.debugDrawer.enabled)
            this.debugDrawer.update();
    }
    setupPhysicsWorld() {
        const g = this.gravity;
        const { softBodies = false } = this.config;
        let physicsWorld;
        if (!softBodies) {
            const collisionConfiguration = new Ammo.btDefaultCollisionConfiguration(), dispatcher = new Ammo.btCollisionDispatcher(collisionConfiguration), broadphase = new Ammo.btDbvtBroadphase(), solver = new Ammo.btSequentialImpulseConstraintSolver();
            physicsWorld = new Ammo.btDiscreteDynamicsWorld(dispatcher, broadphase, solver, collisionConfiguration);
        }
        if (softBodies) {
            const collisionConfiguration = new Ammo.btSoftBodyRigidBodyCollisionConfiguration(), dispatcher = new Ammo.btCollisionDispatcher(collisionConfiguration), broadphase = new Ammo.btDbvtBroadphase(), solver = new Ammo.btSequentialImpulseConstraintSolver(), softBodySolver = new Ammo.btDefaultSoftBodySolver();
            physicsWorld = new Ammo.btSoftRigidDynamicsWorld(dispatcher, broadphase, solver, collisionConfiguration, softBodySolver);
        }
        physicsWorld.setGravity(new Ammo.btVector3(g.x, g.y, g.z));
        return physicsWorld;
    }
    createDebrisFromBreakableObject(object, parent) {
        if (this.scene === 'headless')
            return;
        object.material = this.defaultMaterial.get();
        object.shape = 'hull';
        object.fragmentDepth = parent.fragmentDepth + 1;
        // Add the object to the scene
        this.scene.add(object);
        // Add physics to the object
        // @ts-ignore
        this.addExisting(object);
        object.body.breakable = false;
        // make this fragment breakable in 2.5seconds
        setTimeout(() => {
            object.body.breakable = true;
        }, 2500);
    }
    removeDebris(object) {
        if (this.scene === 'headless')
            return;
        this.scene.remove(object);
        this.destroy(object);
    }
    update(delta) {
        this.updatePhysics(delta);
        this.detectCollisions();
    }
    updatePhysics(delta) {
        // step world
        const deltaTime = delta / 1000;
        // must always satisfy the equation timeStep < maxSubSteps * fixedTimeStep
        this.physicsWorld.stepSimulation(deltaTime, this.config.maxSubSteps || 4, this.config.fixedTimeStep || 1 / 60);
        // update rigid bodies
        for (let i = 0; i < this.rigidBodies.length; i++) {
            const objThree = this.rigidBodies[i];
            const objPhys = objThree.body.ammo;
            const ms = objPhys.getMotionState();
            if (ms) {
                ms.getWorldTransform(this.worldTransform);
                // check if object did an update since last call
                if (objThree.body.didUpdate) {
                    // @ts-ignore
                    if (objThree.body._emitUpdateEvents)
                        objThree.body.eventEmitter.emit('update');
                    objThree.body.didUpdate = false;
                }
                // update positions
                if (objThree.body.ammo.isKinematicObject() && objThree.body.needUpdate) {
                    // get position and rotation
                    objThree.getWorldQuaternion(this.tmpQuaternion);
                    objThree.getWorldPosition(this.tmpVector3);
                    // adjust tmp variables
                    this.tmpBtVector3.setValue(this.tmpVector3.x, this.tmpVector3.y, this.tmpVector3.z);
                    this.tmpBtQuaternion.setValue(this.tmpQuaternion.x, this.tmpQuaternion.y, this.tmpQuaternion.z, this.tmpQuaternion.w);
                    // set position and rotation
                    this.worldTransform.setOrigin(this.tmpBtVector3);
                    this.worldTransform.setRotation(this.tmpBtQuaternion);
                    // set transform
                    ms.setWorldTransform(this.worldTransform);
                    // reset needsUpdate
                    objThree.body.needUpdate = false;
                }
                else if (objThree.body.skipUpdate) {
                    // do nothing ...
                }
                else if (!objThree.body.ammo.isStaticObject()) {
                    // get position and rotation
                    let p = this.worldTransform.getOrigin();
                    let q = this.worldTransform.getRotation();
                    // body offset
                    let o = objThree.body.offset;
                    // set position and rotation
                    if (objThree.body.ignoreScale) {
                        this.tmpVector3a.set(objThree.scale.x, objThree.scale.y, objThree.scale.z);
                    }
                    else {
                        const scale = objThree.body.ammo.getCollisionShape().getLocalScaling();
                        this.tmpVector3a.set(scale.x(), scale.y(), scale.z());
                    }
                    this.tmpVector3.set(p.x() + o.x, p.y() + o.y, p.z() + o.z);
                    this.tmpQuaternion.set(q.x(), q.y(), q.z(), q.w());
                    this.tmpMatrix4.compose(this.tmpVector3, this.tmpQuaternion, this.tmpVector3a);
                    if (objThree.parent) {
                        // compatibility fix for three.js >= r123 (Dezember 2020)
                        // @ts-ignore
                        if (+index_1.REVISION >= 123)
                            this.tmpMatrix4a.copy(objThree.parent.matrixWorld).invert();
                        else
                            this.tmpMatrix4a.getInverse(objThree.parent.matrixWorld);
                    }
                    else {
                        this.tmpMatrix4a.identity();
                    }
                    this.tmpMatrix4a.multiply(this.tmpMatrix4);
                    this.tmpMatrix4a.decompose(objThree.position, objThree.quaternion, objThree.scale);
                }
            }
        }
    }
    detectCollisions() {
        var _a, _b;
        const detectedCollisions = [];
        // reset these vectors
        this.impactPoint.set(0, 0, 0);
        this.impactNormal.set(0, 0, 0);
        const dispatcher = this.physicsWorld.getDispatcher();
        const numManifolds = dispatcher.getNumManifolds();
        // check collisions
        for (let i = 0; i < numManifolds; i++) {
            let contactManifold = dispatcher.getManifoldByIndexInternal(i);
            let numContacts = contactManifold.getNumContacts();
            // @ts-ignore
            const rb0 = Ammo.castObject(contactManifold.getBody0(), Ammo.btRigidBody);
            // @ts-ignore
            const rb1 = Ammo.castObject(contactManifold.getBody1(), Ammo.btRigidBody);
            let threeObject0 = rb0.threeObject;
            let threeObject1 = rb1.threeObject;
            if (!threeObject0 || !threeObject1) {
                continue;
            }
            // do not check collision between 2 unnamed objects
            // (fragments do not have a name, for example)
            if (rb0.name === '' && rb1.name === '')
                continue;
            /**
             * Get some information
             */
            const checkCollisions0 = (_a = threeObject0.body) === null || _a === void 0 ? void 0 : _a.checkCollisions;
            const checkCollisions1 = (_b = threeObject1.body) === null || _b === void 0 ? void 0 : _b.checkCollisions;
            const breakable0 = threeObject0.body.breakable;
            const breakable1 = threeObject1.body.breakable;
            const checkCollisions = checkCollisions0 || checkCollisions1;
            const checkBreakable = breakable0 || breakable1;
            if (!checkCollisions && !checkBreakable)
                continue;
            let contact = false;
            let maxImpulse = 0;
            let event = 'start';
            for (let j = 0; j < numContacts; j++) {
                const contactPoint = contactManifold.getContactPoint(j);
                const distance = contactPoint.getDistance();
                // Distance definition: when the distance between objects is positive, they are separated. When the distance is negative, they are penetrating. Zero distance means exactly touching.
                // https://pybullet.org/Bullet/phpBB3/viewtopic.php?t=5831
                if (distance <= 0) {
                    contact = true;
                    const impulse = contactPoint.getAppliedImpulse();
                    const impactPoint = contactPoint.get_m_positionWorldOnB();
                    const impactNormal = contactPoint.get_m_normalWorldOnB();
                    // handle collision events
                    if (checkCollisions0 || checkCollisions1) {
                        const names = [threeObject0.name, threeObject1.name].sort();
                        const combinedName = `${names[0]}__${names[1]}`;
                        if (this.earlierDetectedCollisions.find(el => el.combinedName === combinedName))
                            event = 'collision';
                        if (!detectedCollisions.find(el => el.combinedName === combinedName)) {
                            detectedCollisions.push({ combinedName, collision: true });
                            this.collisionEvents.emit('collision', { bodies: [threeObject0, threeObject1], event });
                        }
                    }
                    // get impactPoint and impactNormal of the hight impulse point (for breakable objects)
                    if (impulse >= maxImpulse) {
                        maxImpulse = impulse;
                        // get what ween need for the convex breaking
                        if (breakable0 || breakable1) {
                            this.impactPoint.set(impactPoint.x(), impactPoint.y(), impactPoint.z());
                            this.impactNormal.set(impactNormal.x(), impactNormal.y(), impactNormal.z());
                        }
                    }
                    break;
                }
            }
            // if no point has contact, abort
            if (!contact)
                continue;
            // if no objects are breakable, abort
            if (!checkBreakable)
                continue;
            /**
             * check for breakable objects (subdivision)
             */
            const fractureImpulse = 5; //250
            const MAX_FRAGMENT_DEPTH = 2;
            // since the library convexBreaker makes use of three's userData.ammoPhysicsData
            // we have to clone the necessary params to threeObjectX.userData.ammoPhysicsData
            // TODO improve this
            this.emptyV3.set(0, 0, 0);
            threeObject0.userData.ammoPhysicsData = {
                mass: 1,
                velocity: this.emptyV3,
                angularVelocity: this.emptyV3,
                breakable: breakable0,
                physicsBody: rb0
            };
            threeObject1.userData.ammoPhysicsData = {
                mass: 1,
                velocity: this.emptyV3,
                angularVelocity: this.emptyV3,
                breakable: breakable1,
                physicsBody: rb1
            };
            if (typeof threeObject0.fragmentDepth === 'undefined')
                threeObject0.fragmentDepth = 0;
            if (typeof threeObject1.fragmentDepth === 'undefined')
                threeObject1.fragmentDepth = 0;
            // threeObject0
            if (breakable0 && maxImpulse > fractureImpulse && threeObject0.fragmentDepth < MAX_FRAGMENT_DEPTH) {
                const debris = this.convexBreaker.subdivideByImpact(threeObject0, this.impactPoint, this.impactNormal, 1, 2); //, 1.5)
                const numObjects = debris.length;
                for (let j = 0; j < numObjects; j++) {
                    const vel = rb0.getLinearVelocity();
                    const angVel = rb0.getAngularVelocity();
                    const fragment = debris[j];
                    fragment.userData.ammoPhysicsData.velocity.set(vel.x(), vel.y(), vel.z());
                    fragment.userData.ammoPhysicsData.angularVelocity.set(angVel.x(), angVel.y(), angVel.z());
                    this.createDebrisFromBreakableObject(fragment, threeObject0);
                }
                this.objectsToRemove[this.numObjectsToRemove++] = threeObject0;
            }
            // threeObject1
            if (breakable1 && maxImpulse > fractureImpulse && threeObject1.fragmentDepth < MAX_FRAGMENT_DEPTH) {
                const debris = this.convexBreaker.subdivideByImpact(threeObject1, this.impactPoint, this.impactNormal, 1, 2); //, 1.5)
                const numObjects = debris.length;
                for (let j = 0; j < numObjects; j++) {
                    const vel = rb1.getLinearVelocity();
                    const angVel = rb1.getAngularVelocity();
                    const fragment = debris[j];
                    fragment.userData.ammoPhysicsData.velocity.set(vel.x(), vel.y(), vel.z());
                    fragment.userData.ammoPhysicsData.angularVelocity.set(angVel.x(), angVel.y(), angVel.z());
                    this.createDebrisFromBreakableObject(fragment, threeObject1);
                }
                this.objectsToRemove[this.numObjectsToRemove++] = threeObject1;
            }
        }
        // remove objects
        for (let i = 0; i < this.numObjectsToRemove; i++) {
            this.removeDebris(this.objectsToRemove[i]);
        }
        this.numObjectsToRemove = 0;
        // handle collision end events
        this.earlierDetectedCollisions.forEach(el => {
            const { combinedName } = el;
            if (!detectedCollisions.find(el => el.combinedName === combinedName)) {
                const split = combinedName.split('__');
                const obj0 = this.rigidBodies.find(obj => obj.name === split[0]);
                const obj1 = this.rigidBodies.find(obj => obj.name === split[1]);
                const event = 'end';
                if (obj0 && obj1)
                    this.collisionEvents.emit('collision', { bodies: [obj0, obj1], event });
            }
        });
        this.earlierDetectedCollisions = [...detectedCollisions];
    }
    setGravity(x = 0, y = -9.8, z = 0) {
        this.tmpBtVector3.setValue(x, y, z);
        this.physicsWorld.setGravity(this.tmpBtVector3);
    }
    get debug() {
        if (this.isHeadless)
            return null;
        return {
            enable: () => {
                this.debugDrawer.enable();
            },
            mode: (debugMode = 1) => {
                this.debugDrawer.setDebugMode(debugMode);
            },
            disable: () => {
                this.debugDrawer.disable();
            }
        };
    }
    start() {
        if (typeof Ammo === 'undefined') {
            logger_1.default('Are you sure you included ammo.js?');
            return;
        }
        if (typeof Ammo === 'function')
            Ammo().then(() => {
                this.setup();
            });
        else
            this.setup();
    }
    get add() {
        return {
            collider: (object1, object2, eventCallback) => this.collisionEvents.addCollider(object1, object2, eventCallback),
            constraints: this.constraints.addConstraints,
            existing: (object, config) => this.addExisting(object, config),
            plane: (planeConfig = {}, materialConfig = {}) => this.shapes.addPlane(planeConfig, materialConfig),
            sphere: (sphereConfig = {}, materialConfig = {}) => this.shapes.addSphere(sphereConfig, materialConfig),
            ground: (groundConfig = {}, materialConfig = {}) => this.shapes.addGround(groundConfig, materialConfig),
            box: (boxConfig = {}, materialConfig = {}) => this.shapes.addBox(boxConfig, materialConfig),
            cylinder: (cylinderConfig = {}, materialConfig = {}) => this.shapes.addCylinder(cylinderConfig, materialConfig),
            cone: (coneConfig = {}, materialConfig = {}) => this.shapes.addCone(coneConfig, materialConfig),
            torus: (torusConfig = {}, materialConfig = {}) => this.shapes.addTorus(torusConfig, materialConfig),
            extrude: (extrudeConfig, materialConfig = {}) => this.shapes.addExtrude(extrudeConfig, materialConfig),
            /**
             * Creates a new Raycaster
             * @param type Returns only the closes body by default. Can be 'closest' or 'allHits'.
             */
            raycaster: (type = 'closest') => {
                if (type === 'closest')
                    return new raycaster_1.ClosestRaycaster(this);
                else
                    return new raycaster_1.AllHitsRaycaster(this);
            }
        };
    }
    prepareThreeObjectForCollisionShape(object, config = {}) {
        var _a, _b;
        const { autoCenter = false } = config;
        // set default params
        const defaultParams = {
            width: 1,
            height: 1,
            depth: 1,
            radius: 1,
            radiusTop: 1,
            radiusBottom: 1,
            tube: 0.4,
            tubularSegments: 6 // for the torus
        };
        // determine the shape (fallback to hacd)
        let shape = 'unknown';
        // retrieve the shape from the geometry
        const type = ((_a = object.geometry) === null || _a === void 0 ? void 0 : _a.type) || 'unknown';
        if (/box/i.test(type))
            shape = 'box';
        else if (/cone/i.test(type))
            shape = 'cone';
        else if (/cylinder/i.test(type))
            shape = 'cylinder';
        else if (/extrude/i.test(type))
            shape = 'extrude';
        else if (/plane/i.test(type))
            shape = 'plane';
        else if (/sphere/i.test(type))
            shape = 'sphere';
        else if (/torus/i.test(type))
            shape = 'torus';
        // @ts-ignore
        let params = Object.assign(Object.assign({}, defaultParams), (_b = object === null || object === void 0 ? void 0 : object.geometry) === null || _b === void 0 ? void 0 : _b.parameters);
        if (config.shape) {
            params = Object.assign(Object.assign({}, defaultParams), config);
            shape = config.shape;
        }
        else if (object.shape) {
            shape = object.shape;
        }
        // Add all default params if undefined
        Object.keys(params).forEach(key => {
            // @ts-ignore
            if (typeof params[key] === 'undefined' && defaultParams[key]) {
                // @ts-ignore
                params[key] = defaultParams[key];
            }
        });
        // auto adjust the center for custom shapes
        if (autoCenter)
            object.geometry.center();
        // adjust the cylinder radius for its physcis body
        if (shape === 'cylinder')
            params.radius = config.radius || params.radiusTop;
        // some aliases
        if (shape === 'extrude')
            shape = 'hacd';
        if (shape === 'mesh' || shape === 'convex')
            shape = 'convexMesh';
        if (shape === 'concave')
            shape = 'concaveMesh';
        // if we have not found a shape until here, we fallback to 'box'
        if (shape === 'unknown') {
            logger_1.default(`Shape for ${object === null || object === void 0 ? void 0 : object.name} not recognized! Will fallback to box.`);
            shape = 'box';
        }
        return { shape, params, object };
    }
    createCollisionShape(shape, params, object) {
        const quat = (object === null || object === void 0 ? void 0 : object.quaternion) ? object === null || object === void 0 ? void 0 : object.quaternion : new index_1.Quaternion(0, 0, 0, 1);
        const { axis = 'y' } = params;
        const btHalfExtents = new Ammo.btVector3();
        // transform geometry to bufferGeometry (because three-to-ammo works only with bufferGeometry)
        const geometry = object === null || object === void 0 ? void 0 : object.geometry;
        if (object && (geometry === null || geometry === void 0 ? void 0 : geometry.isGeometry)) {
            object.geometry = new index_1.BufferGeometry().fromGeometry(geometry);
        }
        // prepare data to pass to three-to-ammo.js
        const extractData = (object) => {
            const matrixWorld = new index_1.Matrix4().elements;
            const vertices = [];
            const matrices = [];
            const indexes = [];
            three_to_ammo_1.iterateGeometries(object, {}, (vertexArray, matrixArray, indexArray) => {
                vertices.push(vertexArray);
                matrices.push(matrixArray);
                indexes.push(indexArray);
            });
            return { vertices, matrices, indexes, matrixWorld };
        };
        let d = {};
        // extract data for complex shapes generated with three-to-ammo.js
        if (this.complexShapes.indexOf(shape) > 0)
            d = extractData(object);
        let collisionShape;
        switch (shape) {
            case 'box':
                btHalfExtents.setValue(params.width / 2, params.height / 2, params.depth / 2);
                collisionShape = new Ammo.btBoxShape(btHalfExtents);
                break;
            case 'sphere':
                collisionShape = new Ammo.btSphereShape(params.radius);
                break;
            case 'cylinder':
                switch (axis) {
                    case 'y':
                        btHalfExtents.setValue(params.radius, params.height / 2, params.radius);
                        collisionShape = new Ammo.btCylinderShape(btHalfExtents);
                        break;
                    case 'x':
                        btHalfExtents.setValue(params.height / 2, params.radius, params.radius);
                        collisionShape = new Ammo.btCylinderShapeX(btHalfExtents);
                        break;
                    case 'z':
                        btHalfExtents.setValue(params.radius, params.radius, params.height / 2);
                        collisionShape = new Ammo.btCylinderShapeZ(btHalfExtents);
                        break;
                }
                break;
            case 'cone':
                switch (axis) {
                    case 'y':
                        collisionShape = new Ammo.btConeShape(params.radius, params.height);
                        break;
                    case 'x':
                        collisionShape = new Ammo.btConeShapeX(params.radius, params.height);
                        break;
                    case 'z':
                        collisionShape = new Ammo.btConeShapeZ(params.radius, params.height);
                        break;
                }
                break;
            case 'capsule':
                switch (axis) {
                    case 'y':
                        collisionShape = new Ammo.btCapsuleShape(params.radius, params.height);
                        break;
                    case 'x':
                        collisionShape = new Ammo.btCapsuleShapeX(params.radius, params.height);
                        break;
                    case 'z':
                        collisionShape = new Ammo.btCapsuleShapeZ(params.radius, params.height);
                        break;
                }
                break;
            case 'torus':
                collisionShape = torusShape_1.createTorusShape(params, quat);
                break;
            case 'plane':
                // uses a triMeshShape for the plane
                collisionShape = three_to_ammo_1.createTriMeshShape(d.vertices, d.matrices, d.indexes, d.matrixWorld, Object.assign(Object.assign({}, params), { concave: false }));
                break;
            case 'hull':
                collisionShape = three_to_ammo_1.createHullShape(d.vertices, d.matrices, d.matrixWorld, params);
                break;
            case 'hacd':
                collisionShape = three_to_ammo_1.createHACDShapes(d.vertices, d.matrices, d.indexes, d.matrixWorld, params);
                break;
            case 'vhacd':
                collisionShape = three_to_ammo_1.createVHACDShapes(d.vertices, d.matrices, d.indexes, d.matrixWorld, params);
                break;
            case 'convexMesh':
                collisionShape = three_to_ammo_1.createTriMeshShape(d.vertices, d.matrices, d.indexes, d.matrixWorld, Object.assign(Object.assign({}, params), { concave: false }));
                break;
            case 'concaveMesh':
                collisionShape = three_to_ammo_1.createTriMeshShape(d.vertices, d.matrices, d.indexes, d.matrixWorld, Object.assign(Object.assign({}, params), { concave: true }));
                break;
        }
        Ammo.destroy(btHalfExtents);
        // if there is a x, y or z, take is as temporary offset parameter
        const { x, y, z } = params;
        if (x || y || z) {
            // @ts-ignore
            collisionShape.offset = { x: x || 0, y: y || 0, z: z || 0 };
        }
        // in some cases, like hacd, it will be an array of shapes
        // so we merge them
        if (Array.isArray(collisionShape))
            collisionShape = this.mergeCollisionShapesToCompoundShape(collisionShape);
        return collisionShape;
    }
    mergeCollisionShapesToCompoundShape(collisionShapes) {
        const compoundShape = new Ammo.btCompoundShape();
        collisionShapes.forEach(shape => {
            // @ts-ignore
            const { offset } = shape; // offset is a custom parameter
            const transform = new Ammo.btTransform();
            transform.setIdentity();
            if (offset)
                transform.getOrigin().setValue(offset.x || 0, offset.y || 0, offset.z || 0);
            compoundShape.addChildShape(transform, shape);
        });
        return compoundShape;
    }
    addExisting(object, config = {}) {
        const { hasBody } = object;
        if (hasBody) {
            console.warn(`[Enable3d]: Object "${object.name}" already has a physical body!`);
            return;
        }
        const pos = new index_1.Vector3();
        const quat = new index_1.Quaternion();
        const scale = new index_1.Vector3();
        object.getWorldPosition(pos);
        object.getWorldQuaternion(quat);
        object.getWorldScale(scale);
        const isStaticObject = (config.collisionFlags || 0).toString(2).slice(-1) === '1';
        const isKinematicObject = (config.collisionFlags || 0).toString(2).slice(-2, -1) === '1';
        const { shape = 'unknown', compound = [], mass = isStaticObject || isKinematicObject ? 0 : 1, // set default mass of 0 for static objects, and 1 for all other objects
        collisionFlags = 0, collisionGroup = 1, collisionMask = -1, offset = undefined, breakable = false, addChildren = true, margin = 0.01, ignoreScale = false } = config;
        if (ignoreScale)
            scale.set(1, 1, 1);
        if (compound.length >= 1) {
            // if we want a custom compound shape, we simply do
            const collisionShapes = compound.map((s) => this.createCollisionShape(s.shape, s));
            const compoundShape = this.mergeCollisionShapesToCompoundShape(collisionShapes);
            const localTransform = this.finishCollisionShape(compoundShape, pos, quat, scale, margin);
            const rigidBody = this.collisionShapeToRigidBody(compoundShape, localTransform, mass, isKinematicObject);
            this.addRigidBodyToWorld(object, rigidBody, collisionFlags, collisionGroup, collisionMask, breakable, offset);
            object.body.ignoreScale = ignoreScale;
            return;
        }
        const collisionShapes = [];
        // if object is a THREE.Group, object does not have a mesh
        if (shape !== 'unknown' || object.isMesh) {
            const p = this.prepareThreeObjectForCollisionShape(object, config);
            const cs = this.createCollisionShape(p.shape, p.params, p.object);
            collisionShapes.push(cs);
        }
        // check if the object has children
        if (shape === 'unknown' && addChildren && object.children.length >= 1) {
            object.children.forEach((child) => {
                if (child.isMesh) {
                    const p = this.prepareThreeObjectForCollisionShape(child);
                    const cs = this.createCollisionShape(p.shape, p.params, p.object);
                    // @ts-ignore
                    cs.offset = child.position.clone(); // this is relative position to its parent
                    collisionShapes.push(cs);
                }
            });
        }
        // FALLBACK: if we do not have any collisionShapes yet, add a simple box as a fallback
        if (collisionShapes.length === 0) {
            const p = this.prepareThreeObjectForCollisionShape(object, config);
            const cs = this.createCollisionShape(p.shape, p.params, p.object);
            collisionShapes.push(cs);
        }
        const collisionShape = collisionShapes.length === 1 ? collisionShapes[0] : this.mergeCollisionShapesToCompoundShape(collisionShapes);
        // add rigid body
        // object.position.copy(pos)
        // object.quaternion.copy(quat)
        const localTransform = this.finishCollisionShape(collisionShape, pos, quat, scale, margin);
        const rigidBody = this.collisionShapeToRigidBody(collisionShape, localTransform, mass, isKinematicObject);
        this.addRigidBodyToWorld(object, rigidBody, collisionFlags, collisionGroup, collisionMask, breakable, offset);
        object.body.ignoreScale = ignoreScale;
    }
    addRigidBodyToWorld(object, rigidBody, collisionFlags, collisionGroup, collisionMask, breakable, offset) {
        this.rigidBodies.push(object);
        this.physicsWorld.addRigidBody(rigidBody, collisionGroup, collisionMask);
        const ptr = Object.values(rigidBody)[0];
        // @ts-ignore
        rigidBody.name = object.name;
        object.body = new physicsBody_1.default(this, rigidBody);
        object.hasBody = true;
        // @ts-ignore
        object.ptr = ptr;
        // @ts-ignore
        rigidBody.threeObject = object;
        if (breakable)
            object.body.breakable = true;
        if (offset)
            object.body.offset = Object.assign({ x: 0, y: 0, z: 0 }, offset);
        object.body.setCollisionFlags(collisionFlags);
    }
    finishCollisionShape(collisionShape, pos, quat, scale, margin) {
        collisionShape.setMargin(margin);
        const rotation = new Ammo.btQuaternion(0, 0, 0, 1);
        rotation.setValue(quat.x, quat.y, quat.z, quat.w);
        const localTransform = new Ammo.btTransform();
        localTransform.setIdentity();
        localTransform.getOrigin().setValue(pos.x, pos.y, pos.z);
        localTransform.setRotation(rotation);
        Ammo.destroy(rotation);
        const localScale = new Ammo.btVector3(scale.x, scale.y, scale.z);
        collisionShape.setLocalScaling(localScale);
        Ammo.destroy(localScale);
        return localTransform;
    }
    collisionShapeToRigidBody(collisionShape, localTransform, mass, disableDeactivation) {
        const motionState = new Ammo.btDefaultMotionState(localTransform);
        const localInertia = new Ammo.btVector3(0, 0, 0);
        if (mass > 0)
            collisionShape.calculateLocalInertia(mass, localInertia);
        const rbInfo = new Ammo.btRigidBodyConstructionInfo(mass, motionState, collisionShape, localInertia);
        const rigidBody = new Ammo.btRigidBody(rbInfo);
        if (mass > 0 || disableDeactivation)
            rigidBody.setActivationState(4); // Disable deactivation
        return rigidBody;
    }
}
exports.AmmoPhysics = AmmoPhysics;
//# sourceMappingURL=physics.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/raycaster/allHitsRayResultCallback.js":
/*!**************************************************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/raycaster/allHitsRayResultCallback.js ***!
  \**************************************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */
Object.defineProperty(exports, "__esModule", ({ value: true }));
class AllHitsRayResultCallback {
    constructor(physics) {
        this.physics = physics;
    }
    getHitPointsWorld() {
        const h = this._btRayCallback.get_m_hitPointWorld();
        const points = [];
        for (let i = h.size() - 1; i >= 0; i--) {
            const hh = h.at(i);
            points.push({ x: hh.x(), y: hh.y(), z: hh.z() });
        }
        return points;
    }
    // TODO: Remove this in future versions!
    getHitPointWorld() {
        console.warn('[enable3d] Use getHitPointsWorld() instead of getHitPointWorld() for the AllHitsRayCaster!');
        return this.getHitPointsWorld();
    }
    getHitNormalsWorld() {
        const h = this._btRayCallback.get_m_hitNormalWorld();
        const normals = [];
        for (let i = h.size() - 1; i >= 0; i--) {
            const hh = h.at(i);
            normals.push({ x: hh.x(), y: hh.y(), z: hh.z() });
        }
        return normals;
    }
    getCollisionObjects() {
        const threeObjects = [];
        const objects = this._btRayCallback.get_m_collisionObjects();
        for (let i = objects.size() - 1; i >= 0; i--) {
            // @ts-ignore
            const rb = Ammo.castObject(objects.at(i), Ammo.btRigidBody);
            // @ts-ignore
            threeObjects.push(rb.threeObject);
        }
        return threeObjects;
    }
}
exports.default = AllHitsRayResultCallback;
//# sourceMappingURL=allHitsRayResultCallback.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/raycaster/closestRayResultCallback.js":
/*!**************************************************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/raycaster/closestRayResultCallback.js ***!
  \**************************************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */
Object.defineProperty(exports, "__esModule", ({ value: true }));
class ClosestRayResultCallback {
    constructor(physics) {
        this.physics = physics;
    }
    getHitPointWorld() {
        const h = this._btRayCallback.get_m_hitPointWorld();
        const point = { x: h.x(), y: h.y(), z: h.z() };
        return point;
    }
    getHitNormalWorld() {
        const h = this._btRayCallback.get_m_hitNormalWorld();
        const normal = { x: h.x(), y: h.y(), z: h.z() };
        return normal;
    }
    getCollisionObject() {
        // @ts-ignore
        const rb = Ammo.castObject(this._btRayCallback.get_m_collisionObject(), Ammo.btRigidBody);
        // @ts-ignore
        return rb.threeObject;
    }
}
exports.default = ClosestRayResultCallback;
//# sourceMappingURL=closestRayResultCallback.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/raycaster/raycaster.js":
/*!***********************************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/raycaster/raycaster.js ***!
  \***********************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.AllHitsRaycaster = exports.ClosestRaycaster = void 0;
const applyMixins_1 = __webpack_require__(/*! @enable3d/common/dist/applyMixins */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/applyMixins.js");
const closestRayResultCallback_1 = __webpack_require__(/*! ./closestRayResultCallback */ "./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/raycaster/closestRayResultCallback.js");
const allHitsRayResultCallback_1 = __webpack_require__(/*! ./allHitsRayResultCallback */ "./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/raycaster/allHitsRayResultCallback.js");
class Raycaster {
    constructor(physics) {
        this.physics = physics;
    }
    setRayFromWorld(x = 0, y = 0, z = 0) {
        this._btRayFrom.setValue(x, y, z);
    }
    setRayToWorld(x = 0, y = 0, z = 0) {
        this._btRayTo.setValue(x, y, z);
    }
    hasHit() {
        return this._btRayCallback.hasHit();
    }
    rayTest() {
        if (typeof this._btRayCallback !== 'undefined')
            Ammo.destroy(this._btRayCallback);
        this._btRayCallback =
            this.type === 'closest'
                ? new Ammo.ClosestRayResultCallback(this._btRayFrom, this._btRayTo)
                : new Ammo.AllHitsRayResultCallback(this._btRayFrom, this._btRayTo);
        this.physics.physicsWorld.rayTest(this._btRayFrom, this._btRayTo, this._btRayCallback);
    }
    destroy() {
        if (typeof this._btRayFrom !== 'undefined')
            Ammo.destroy(this._btRayFrom);
        if (typeof this._btRayTo !== 'undefined')
            Ammo.destroy(this._btRayTo);
        if (typeof this._btRayCallback !== 'undefined')
            Ammo.destroy(this._btRayCallback);
    }
}
class ClosestRaycaster {
    constructor(physics) {
        this.physics = physics;
        this.type = 'closest';
        this._btRayFrom = new Ammo.btVector3(0, 0, 0);
        this._btRayTo = new Ammo.btVector3(0, 0, 0);
    }
}
exports.ClosestRaycaster = ClosestRaycaster;
class AllHitsRaycaster {
    constructor(physics) {
        this.physics = physics;
        this.type = 'allHits';
        this._btRayFrom = new Ammo.btVector3(0, 0, 0);
        this._btRayTo = new Ammo.btVector3(0, 0, 0);
    }
}
exports.AllHitsRaycaster = AllHitsRaycaster;
applyMixins_1.default(ClosestRaycaster, [Raycaster, closestRayResultCallback_1.default]);
applyMixins_1.default(AllHitsRaycaster, [Raycaster, allHitsRayResultCallback_1.default]);
//# sourceMappingURL=raycaster.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/shapes.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/shapes.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */
Object.defineProperty(exports, "__esModule", ({ value: true }));
class Shapes {
    constructor(factory, addExisting) {
        this.factory = factory;
        this.addExisting = addExisting;
    }
    addPlane(planeConfig = {}, materialConfig = {}) {
        const plane = this.factory.add.plane(planeConfig, materialConfig);
        this.addExisting(plane, planeConfig);
        return plane;
    }
    addSphere(sphereConfig = {}, materialConfig = {}) {
        const sphere = this.factory.add.sphere(sphereConfig, materialConfig);
        this.addExisting(sphere, sphereConfig);
        return sphere;
    }
    addBox(boxConfig = {}, materialConfig = {}) {
        const box = this.factory.add.box(boxConfig, materialConfig);
        this.addExisting(box, boxConfig);
        return box;
    }
    addGround(groundConfig, materialConfig = {}) {
        const ground = this.factory.add.ground(groundConfig, materialConfig);
        const config = Object.assign(Object.assign({}, groundConfig), { mass: 0, collisionFlags: 1 });
        this.addExisting(ground, config);
        return ground;
    }
    addCylinder(cylinderConfig = {}, materialConfig = {}) {
        const cylinder = this.factory.add.cylinder(cylinderConfig, materialConfig);
        this.addExisting(cylinder, cylinderConfig);
        return cylinder;
    }
    addCone(coneConfig = {}, materialConfig = {}) {
        const cone = this.factory.add.cone(coneConfig, materialConfig);
        this.addExisting(cone, coneConfig);
        return cone;
    }
    addTorus(torusConfig = {}, materialConfig = {}) {
        const torus = this.factory.add.torus(torusConfig, materialConfig);
        this.addExisting(torus, torusConfig);
        return torus;
    }
    addExtrude(extrudeConfig, materialConfig = {}) {
        const object = this.factory.add.extrude(extrudeConfig, materialConfig);
        object.translateX(1);
        this.addExisting(object);
        return object;
    }
}
exports.default = Shapes;
//# sourceMappingURL=shapes.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/three-to-ammo.js":
/*!*****************************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/three-to-ammo.js ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @description  This is a modified version of the original code from Kevin Lee
 * (Includes latest three-to-ammo commit from August 6, 2020)
 */
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.iterateGeometries = exports.createHeightfieldTerrainShape = exports.createTriMeshShape = exports.createVHACDShapes = exports.createHACDShapes = exports.createHullShape = exports.createSphereShape = exports.createConeShape = exports.createCapsuleShape = exports.createCylinderShape = exports.createBoxShape = exports.createCollisionShapes = exports.HEIGHTFIELD_DATA_TYPE = exports.FIT = exports.TYPE = void 0;
/**
 * @author       Kevin Lee (https://github.com/InfiniteLee)
 * @copyright    Copyright (c) 2020 Kevin Lee; Project Url: https://github.com/InfiniteLee/three-to-ammo
 * @license      {@link https://github.com/InfiniteLee/three-to-ammo/blob/master/LICENSE|MPL-2.0}
 */
const index_1 = __webpack_require__(/*! @enable3d/three-wrapper/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
('use strict');
/* global Ammo */
exports.TYPE = {
    BOX: 'box',
    CYLINDER: 'cylinder',
    SPHERE: 'sphere',
    CAPSULE: 'capsule',
    CONE: 'cone',
    HULL: 'hull',
    HACD: 'hacd',
    VHACD: 'vhacd',
    MESH: 'mesh',
    HEIGHTFIELD: 'heightfield'
};
exports.FIT = {
    ALL: 'all',
    MANUAL: 'manual' //A single shape is sized manually. Requires halfExtents or sphereRadius.
};
exports.HEIGHTFIELD_DATA_TYPE = {
    short: 'short',
    float: 'float'
};
const createCollisionShapes = function (vertices, matrices, indexes, matrixWorld, options = {}) {
    switch (options.type) {
        case exports.TYPE.BOX:
            return [exports.createBoxShape(vertices, matrices, matrixWorld, options)];
        case exports.TYPE.CYLINDER:
            return [exports.createCylinderShape(vertices, matrices, matrixWorld, options)];
        case exports.TYPE.CAPSULE:
            return [exports.createCapsuleShape(vertices, matrices, matrixWorld, options)];
        case exports.TYPE.CONE:
            return [exports.createConeShape(vertices, matrices, matrixWorld, options)];
        case exports.TYPE.SPHERE:
            return [exports.createSphereShape(vertices, matrices, matrixWorld, options)];
        case exports.TYPE.HULL:
            return [exports.createHullShape(vertices, matrices, matrixWorld, options)];
        case exports.TYPE.HACD:
            return exports.createHACDShapes(vertices, matrices, indexes, matrixWorld, options);
        case exports.TYPE.VHACD:
            return exports.createVHACDShapes(vertices, matrices, indexes, matrixWorld, options);
        case exports.TYPE.MESH:
            return [exports.createTriMeshShape(vertices, matrices, indexes, matrixWorld, options)];
        case exports.TYPE.HEIGHTFIELD:
            return [exports.createHeightfieldTerrainShape(options)];
        default:
            console.warn(options.type + ' is not currently supported');
            return [];
    }
};
exports.createCollisionShapes = createCollisionShapes;
//TODO: support gimpact (dynamic trimesh) and heightmap
const createBoxShape = function (vertices, matrices, matrixWorld, options = {}) {
    options.type = exports.TYPE.BOX;
    _setOptions(options);
    if (options.fit === exports.FIT.ALL) {
        options.halfExtents = _computeHalfExtents(_computeBounds(vertices, matrices), options.minHalfExtent, options.maxHalfExtent);
    }
    const btHalfExtents = new Ammo.btVector3(options.halfExtents.x, options.halfExtents.y, options.halfExtents.z);
    const collisionShape = new Ammo.btBoxShape(btHalfExtents);
    Ammo.destroy(btHalfExtents);
    _finishCollisionShape(collisionShape, options, _computeScale(matrixWorld, options));
    return collisionShape;
};
exports.createBoxShape = createBoxShape;
const createCylinderShape = function (vertices, matrices, matrixWorld, options = {}) {
    options.type = exports.TYPE.CYLINDER;
    _setOptions(options);
    if (options.fit === exports.FIT.ALL) {
        options.halfExtents = _computeHalfExtents(_computeBounds(vertices, matrices), options.minHalfExtent, options.maxHalfExtent);
    }
    const btHalfExtents = new Ammo.btVector3(options.halfExtents.x, options.halfExtents.y, options.halfExtents.z);
    const collisionShape = (() => {
        switch (options.cylinderAxis) {
            case 'y':
                return new Ammo.btCylinderShape(btHalfExtents);
            case 'x':
                return new Ammo.btCylinderShapeX(btHalfExtents);
            case 'z':
                return new Ammo.btCylinderShapeZ(btHalfExtents);
        }
        return null;
    })();
    Ammo.destroy(btHalfExtents);
    _finishCollisionShape(collisionShape, options, _computeScale(matrixWorld, options));
    return collisionShape;
};
exports.createCylinderShape = createCylinderShape;
const createCapsuleShape = function (vertices, matrices, matrixWorld, options = {}) {
    options.type = exports.TYPE.CAPSULE;
    _setOptions(options);
    if (options.fit === exports.FIT.ALL) {
        options.halfExtents = _computeHalfExtents(_computeBounds(vertices, matrices), options.minHalfExtent, options.maxHalfExtent);
    }
    const { x, y, z } = options.halfExtents;
    const collisionShape = (() => {
        switch (options.cylinderAxis) {
            case 'y':
                return new Ammo.btCapsuleShape(Math.max(x, z), y * 2);
            case 'x':
                return new Ammo.btCapsuleShapeX(Math.max(y, z), x * 2);
            case 'z':
                return new Ammo.btCapsuleShapeZ(Math.max(x, y), z * 2);
        }
        return null;
    })();
    _finishCollisionShape(collisionShape, options, _computeScale(matrixWorld, options));
    return collisionShape;
};
exports.createCapsuleShape = createCapsuleShape;
const createConeShape = function (vertices, matrices, matrixWorld, options = {}) {
    options.type = exports.TYPE.CONE;
    _setOptions(options);
    if (options.fit === exports.FIT.ALL) {
        options.halfExtents = _computeHalfExtents(_computeBounds(vertices, matrices), options.minHalfExtent, options.maxHalfExtent);
    }
    const { x, y, z } = options.halfExtents;
    const collisionShape = (() => {
        switch (options.cylinderAxis) {
            case 'y':
                return new Ammo.btConeShape(Math.max(x, z), y * 2);
            case 'x':
                return new Ammo.btConeShapeX(Math.max(y, z), x * 2);
            case 'z':
                return new Ammo.btConeShapeZ(Math.max(x, y), z * 2);
        }
        return null;
    })();
    _finishCollisionShape(collisionShape, options, _computeScale(matrixWorld, options));
    return collisionShape;
};
exports.createConeShape = createConeShape;
const createSphereShape = function (vertices, matrices, matrixWorld, options = {}) {
    options.type = exports.TYPE.SPHERE;
    _setOptions(options);
    let radius;
    if (options.fit === exports.FIT.MANUAL && !isNaN(options.sphereRadius)) {
        radius = options.sphereRadius;
    }
    else {
        radius = _computeRadius(vertices, matrices, _computeBounds(vertices, matrices));
    }
    const collisionShape = new Ammo.btSphereShape(radius);
    _finishCollisionShape(collisionShape, options, _computeScale(matrixWorld, options));
    return collisionShape;
};
exports.createSphereShape = createSphereShape;
exports.createHullShape = (function () {
    const vertex = new index_1.Vector3();
    const center = new index_1.Vector3();
    const matrix = new index_1.Matrix4();
    return function (vertices, matrices, matrixWorld, options = {}) {
        options.type = exports.TYPE.HULL;
        _setOptions(options);
        if (options.fit === exports.FIT.MANUAL) {
            console.warn('cannot use fit: manual with type: hull');
            return null;
        }
        const bounds = _computeBounds(vertices, matrices);
        const btVertex = new Ammo.btVector3();
        const originalHull = new Ammo.btConvexHullShape();
        originalHull.setMargin(options.margin);
        center.addVectors(bounds.max, bounds.min).multiplyScalar(0.5);
        let vertexCount = 0;
        for (let i = 0; i < vertices.length; i++) {
            vertexCount += vertices[i].length / 3;
        }
        const maxVertices = options.hullMaxVertices || 100000;
        // todo: might want to implement this in a deterministic way that doesn't do O(verts) calls to Math.random
        if (vertexCount > maxVertices) {
            console.warn(`too many vertices for hull shape; sampling ~${maxVertices} from ~${vertexCount} vertices`);
        }
        const p = Math.min(1, maxVertices / vertexCount);
        for (let i = 0; i < vertices.length; i++) {
            const components = vertices[i];
            matrix.fromArray(matrices[i]);
            for (let j = 0; j < components.length; j += 3) {
                const isLastVertex = i === vertices.length - 1 && j === components.length - 3;
                if (Math.random() <= p || isLastVertex) {
                    // always include the last vertex
                    vertex
                        .set(components[j], components[j + 1], components[j + 2])
                        .applyMatrix4(matrix)
                        .sub(center);
                    btVertex.setValue(vertex.x, vertex.y, vertex.z);
                    originalHull.addPoint(btVertex, isLastVertex); // recalc AABB only on last geometry
                }
            }
        }
        let collisionShape = originalHull;
        if (originalHull.getNumVertices() >= 100) {
            //Bullet documentation says don't use convexHulls with 100 verts or more
            const shapeHull = new Ammo.btShapeHull(originalHull);
            shapeHull.buildHull(options.margin);
            Ammo.destroy(originalHull);
            collisionShape = new Ammo.btConvexHullShape(Ammo.getPointer(shapeHull.getVertexPointer()), shapeHull.numVertices());
            Ammo.destroy(shapeHull); // btConvexHullShape makes a copy
        }
        Ammo.destroy(btVertex);
        _finishCollisionShape(collisionShape, options, _computeScale(matrixWorld, options));
        return collisionShape;
    };
})();
exports.createHACDShapes = (function () {
    const vector = new index_1.Vector3();
    const center = new index_1.Vector3();
    const matrix = new index_1.Matrix4();
    return function (vertices, matrices, indexes, matrixWorld, options = {}) {
        options.type = exports.TYPE.HACD;
        _setOptions(options);
        if (options.fit === exports.FIT.MANUAL) {
            console.warn('cannot use fit: manual with type: hacd');
            return [];
        }
        if (!Ammo.hasOwnProperty('HACD')) {
            console.warn('HACD unavailable in included build of Ammo.js. Visit https://github.com/mozillareality/ammo.js for the latest version.');
            return [];
        }
        const bounds = _computeBounds(vertices, matrices);
        const scale = _computeScale(matrixWorld, options);
        let vertexCount = 0;
        let triCount = 0;
        center.addVectors(bounds.max, bounds.min).multiplyScalar(0.5);
        for (let i = 0; i < vertices.length; i++) {
            vertexCount += vertices[i].length / 3;
            if (indexes && indexes[i]) {
                triCount += indexes[i].length / 3;
            }
            else {
                triCount += vertices[i].length / 9;
            }
        }
        const hacd = new Ammo.HACD();
        if (options.hasOwnProperty('compacityWeight'))
            hacd.SetCompacityWeight(options.compacityWeight);
        if (options.hasOwnProperty('volumeWeight'))
            hacd.SetVolumeWeight(options.volumeWeight);
        if (options.hasOwnProperty('nClusters'))
            hacd.SetNClusters(options.nClusters);
        if (options.hasOwnProperty('nVerticesPerCH'))
            hacd.SetNVerticesPerCH(options.nVerticesPerCH);
        if (options.hasOwnProperty('concavity'))
            hacd.SetConcavity(options.concavity);
        const points = Ammo._malloc(vertexCount * 3 * 8);
        const triangles = Ammo._malloc(triCount * 3 * 4);
        hacd.SetPoints(points);
        hacd.SetTriangles(triangles);
        hacd.SetNPoints(vertexCount);
        hacd.SetNTriangles(triCount);
        let pptr = points / 8, tptr = triangles / 4;
        for (let i = 0; i < vertices.length; i++) {
            const components = vertices[i];
            matrix.fromArray(matrices[i]);
            for (let j = 0; j < components.length; j += 3) {
                vector
                    .set(components[j + 0], components[j + 1], components[j + 2])
                    .applyMatrix4(matrix)
                    .sub(center);
                Ammo.HEAPF64[pptr + 0] = vector.x;
                Ammo.HEAPF64[pptr + 1] = vector.y;
                Ammo.HEAPF64[pptr + 2] = vector.z;
                pptr += 3;
            }
            if (indexes[i]) {
                const indices = indexes[i];
                for (let j = 0; j < indices.length; j++) {
                    Ammo.HEAP32[tptr] = indices[j];
                    tptr++;
                }
            }
            else {
                for (let j = 0; j < components.length / 3; j++) {
                    Ammo.HEAP32[tptr] = j;
                    tptr++;
                }
            }
        }
        hacd.Compute();
        Ammo._free(points);
        Ammo._free(triangles);
        const nClusters = hacd.GetNClusters();
        const shapes = [];
        for (let i = 0; i < nClusters; i++) {
            const hull = new Ammo.btConvexHullShape();
            hull.setMargin(options.margin);
            const nPoints = hacd.GetNPointsCH(i);
            const nTriangles = hacd.GetNTrianglesCH(i);
            const hullPoints = Ammo._malloc(nPoints * 3 * 8);
            const hullTriangles = Ammo._malloc(nTriangles * 3 * 4);
            hacd.GetCH(i, hullPoints, hullTriangles);
            const pptr = hullPoints / 8;
            for (let pi = 0; pi < nPoints; pi++) {
                const btVertex = new Ammo.btVector3();
                const px = Ammo.HEAPF64[pptr + pi * 3 + 0];
                const py = Ammo.HEAPF64[pptr + pi * 3 + 1];
                const pz = Ammo.HEAPF64[pptr + pi * 3 + 2];
                btVertex.setValue(px, py, pz);
                hull.addPoint(btVertex, pi === nPoints - 1);
                Ammo.destroy(btVertex);
            }
            _finishCollisionShape(hull, options, scale);
            shapes.push(hull);
        }
        return shapes;
    };
})();
exports.createVHACDShapes = (function () {
    const vector = new index_1.Vector3();
    const center = new index_1.Vector3();
    const matrix = new index_1.Matrix4();
    return function (vertices, matrices, indexes, matrixWorld, options = {}) {
        options.type = exports.TYPE.VHACD;
        _setOptions(options);
        if (options.fit === exports.FIT.MANUAL) {
            console.warn('cannot use fit: manual with type: vhacd');
            return [];
        }
        if (!Ammo.hasOwnProperty('VHACD')) {
            console.warn('VHACD unavailable in included build of Ammo.js. Visit https://github.com/mozillareality/ammo.js for the latest version.');
            return [];
        }
        const bounds = _computeBounds(vertices, matrices);
        const scale = _computeScale(matrixWorld, options);
        let vertexCount = 0;
        let triCount = 0;
        center.addVectors(bounds.max, bounds.min).multiplyScalar(0.5);
        for (let i = 0; i < vertices.length; i++) {
            vertexCount += vertices[i].length / 3;
            if (indexes && indexes[i]) {
                triCount += indexes[i].length / 3;
            }
            else {
                triCount += vertices[i].length / 9;
            }
        }
        const vhacd = new Ammo.VHACD();
        const params = new Ammo.Parameters();
        //https://kmamou.blogspot.com/2014/12/v-hacd-20-parameters-description.html
        if (options.hasOwnProperty('resolution'))
            params.set_m_resolution(options.resolution);
        if (options.hasOwnProperty('depth'))
            params.set_m_depth(options.depth);
        if (options.hasOwnProperty('concavity'))
            params.set_m_concavity(options.concavity);
        if (options.hasOwnProperty('planeDownsampling'))
            params.set_m_planeDownsampling(options.planeDownsampling);
        if (options.hasOwnProperty('convexhullDownsampling'))
            params.set_m_convexhullDownsampling(options.convexhullDownsampling);
        if (options.hasOwnProperty('alpha'))
            params.set_m_alpha(options.alpha);
        if (options.hasOwnProperty('beta'))
            params.set_m_beta(options.beta);
        if (options.hasOwnProperty('gamma'))
            params.set_m_gamma(options.gamma);
        if (options.hasOwnProperty('pca'))
            params.set_m_pca(options.pca);
        if (options.hasOwnProperty('mode'))
            params.set_m_mode(options.mode);
        if (options.hasOwnProperty('maxNumVerticesPerCH'))
            params.set_m_maxNumVerticesPerCH(options.maxNumVerticesPerCH);
        if (options.hasOwnProperty('minVolumePerCH'))
            params.set_m_minVolumePerCH(options.minVolumePerCH);
        if (options.hasOwnProperty('convexhullApproximation'))
            params.set_m_convexhullApproximation(options.convexhullApproximation);
        if (options.hasOwnProperty('oclAcceleration'))
            params.set_m_oclAcceleration(options.oclAcceleration);
        const points = Ammo._malloc(vertexCount * 3 * 8 + 3);
        const triangles = Ammo._malloc(triCount * 3 * 4);
        let pptr = points / 8, tptr = triangles / 4;
        for (let i = 0; i < vertices.length; i++) {
            const components = vertices[i];
            matrix.fromArray(matrices[i]);
            for (let j = 0; j < components.length; j += 3) {
                vector
                    .set(components[j + 0], components[j + 1], components[j + 2])
                    .applyMatrix4(matrix)
                    .sub(center);
                Ammo.HEAPF64[pptr + 0] = vector.x;
                Ammo.HEAPF64[pptr + 1] = vector.y;
                Ammo.HEAPF64[pptr + 2] = vector.z;
                pptr += 3;
            }
            if (indexes[i]) {
                const indices = indexes[i];
                for (let j = 0; j < indices.length; j++) {
                    Ammo.HEAP32[tptr] = indices[j];
                    tptr++;
                }
            }
            else {
                for (let j = 0; j < components.length / 3; j++) {
                    Ammo.HEAP32[tptr] = j;
                    tptr++;
                }
            }
        }
        vhacd.Compute(points, 3, vertexCount, triangles, 3, triCount, params);
        Ammo._free(points);
        Ammo._free(triangles);
        const nHulls = vhacd.GetNConvexHulls();
        const shapes = [];
        const ch = new Ammo.ConvexHull();
        for (let i = 0; i < nHulls; i++) {
            vhacd.GetConvexHull(i, ch);
            const nPoints = ch.get_m_nPoints();
            const hullPoints = ch.get_m_points();
            const hull = new Ammo.btConvexHullShape();
            hull.setMargin(options.margin);
            for (let pi = 0; pi < nPoints; pi++) {
                const btVertex = new Ammo.btVector3();
                const px = ch.get_m_points(pi * 3 + 0);
                const py = ch.get_m_points(pi * 3 + 1);
                const pz = ch.get_m_points(pi * 3 + 2);
                btVertex.setValue(px, py, pz);
                hull.addPoint(btVertex, pi === nPoints - 1);
                Ammo.destroy(btVertex);
            }
            _finishCollisionShape(hull, options, scale);
            shapes.push(hull);
        }
        Ammo.destroy(ch);
        Ammo.destroy(vhacd);
        return shapes;
    };
})();
exports.createTriMeshShape = (function () {
    const va = new index_1.Vector3();
    const vb = new index_1.Vector3();
    const vc = new index_1.Vector3();
    const matrix = new index_1.Matrix4();
    return function (vertices, matrices, indexes, matrixWorld, options = {}) {
        options.type = exports.TYPE.MESH;
        _setOptions(options);
        if (options.fit === exports.FIT.MANUAL) {
            console.warn('cannot use fit: manual with type: mesh');
            return null;
        }
        const scale = _computeScale(matrixWorld, options);
        const bta = new Ammo.btVector3();
        const btb = new Ammo.btVector3();
        const btc = new Ammo.btVector3();
        const triMesh = new Ammo.btTriangleMesh(true, false);
        for (let i = 0; i < vertices.length; i++) {
            const components = vertices[i];
            const index = indexes[i] ? indexes[i] : null;
            matrix.fromArray(matrices[i]);
            if (index) {
                for (let j = 0; j < index.length; j += 3) {
                    const ai = index[j] * 3;
                    const bi = index[j + 1] * 3;
                    const ci = index[j + 2] * 3;
                    va.set(components[ai], components[ai + 1], components[ai + 2]).applyMatrix4(matrix);
                    vb.set(components[bi], components[bi + 1], components[bi + 2]).applyMatrix4(matrix);
                    vc.set(components[ci], components[ci + 1], components[ci + 2]).applyMatrix4(matrix);
                    bta.setValue(va.x, va.y, va.z);
                    btb.setValue(vb.x, vb.y, vb.z);
                    btc.setValue(vc.x, vc.y, vc.z);
                    triMesh.addTriangle(bta, btb, btc, false);
                }
            }
            else {
                for (let j = 0; j < components.length; j += 9) {
                    va.set(components[j + 0], components[j + 1], components[j + 2]).applyMatrix4(matrix);
                    vb.set(components[j + 3], components[j + 4], components[j + 5]).applyMatrix4(matrix);
                    vc.set(components[j + 6], components[j + 7], components[j + 8]).applyMatrix4(matrix);
                    bta.setValue(va.x, va.y, va.z);
                    btb.setValue(vb.x, vb.y, vb.z);
                    btc.setValue(vc.x, vc.y, vc.z);
                    triMesh.addTriangle(bta, btb, btc, false);
                }
            }
        }
        const localScale = new Ammo.btVector3(scale.x, scale.y, scale.z);
        triMesh.setScaling(localScale);
        Ammo.destroy(localScale);
        // MOD (yandeu): Use btConvexTriangleMeshShape for concave shapes
        let collisionShape;
        if (options.concave)
            collisionShape = new Ammo.btBvhTriangleMeshShape(triMesh, true, true);
        else
            collisionShape = new Ammo.btConvexTriangleMeshShape(triMesh, true);
        // const collisionShape = new Ammo.btBvhTriangleMeshShape(triMesh, true, true)
        collisionShape.resources = [triMesh];
        Ammo.destroy(bta);
        Ammo.destroy(btb);
        Ammo.destroy(btc);
        _finishCollisionShape(collisionShape, options);
        return collisionShape;
    };
})();
const createHeightfieldTerrainShape = function (options = {}) {
    _setOptions(options);
    if (options.fit === exports.FIT.ALL) {
        console.warn('cannot use fit: all with type: heightfield');
        return null;
    }
    const heightfieldDistance = options.heightfieldDistance || 1;
    const heightfieldData = options.heightfieldData || [];
    const heightScale = options.heightScale || 0;
    const upAxis = options.hasOwnProperty('upAxis') ? options.upAxis : 1; // x = 0; y = 1; z = 2
    const hdt = (() => {
        switch (options.heightDataType) {
            case 'short':
                return Ammo.PHY_SHORT;
            case 'float':
                return Ammo.PHY_FLOAT;
            default:
                return Ammo.PHY_FLOAT;
        }
    })();
    const flipQuadEdges = options.hasOwnProperty('flipQuadEdges') ? options.flipQuadEdges : true;
    const heightStickLength = heightfieldData.length;
    const heightStickWidth = heightStickLength > 0 ? heightfieldData[0].length : 0;
    const data = Ammo._malloc(heightStickLength * heightStickWidth * 4);
    const ptr = data / 4;
    let minHeight = Number.POSITIVE_INFINITY;
    let maxHeight = Number.NEGATIVE_INFINITY;
    let index = 0;
    for (let l = 0; l < heightStickLength; l++) {
        for (let w = 0; w < heightStickWidth; w++) {
            const height = heightfieldData[l][w];
            Ammo.HEAPF32[ptr + index] = height;
            index++;
            minHeight = Math.min(minHeight, height);
            maxHeight = Math.max(maxHeight, height);
        }
    }
    const collisionShape = new Ammo.btHeightfieldTerrainShape(heightStickWidth, heightStickLength, data, heightScale, minHeight, maxHeight, upAxis, hdt, flipQuadEdges);
    const scale = new Ammo.btVector3(heightfieldDistance, 1, heightfieldDistance);
    collisionShape.setLocalScaling(scale);
    Ammo.destroy(scale);
    collisionShape.heightfieldData = data;
    _finishCollisionShape(collisionShape, options);
    return collisionShape;
};
exports.createHeightfieldTerrainShape = createHeightfieldTerrainShape;
function _setOptions(options) {
    // MOD (yandeu): All of this will be done in physics.ts
    // we only keep type and margin
    options.type = options.type || exports.TYPE.HULL;
    options.margin = options.hasOwnProperty('margin') ? options.margin : 0.01;
    return;
    options.fit = options.hasOwnProperty('fit') ? options.fit : exports.FIT.ALL;
    options.type = options.type || exports.TYPE.HULL;
    options.minHalfExtent = options.hasOwnProperty('minHalfExtent') ? options.minHalfExtent : 0;
    options.maxHalfExtent = options.hasOwnProperty('maxHalfExtent') ? options.maxHalfExtent : Number.POSITIVE_INFINITY;
    options.cylinderAxis = options.cylinderAxis || 'y';
    options.margin = options.hasOwnProperty('margin') ? options.margin : 0.01;
    options.includeInvisible = options.hasOwnProperty('includeInvisible') ? options.includeInvisible : false;
    if (!options.offset) {
        options.offset = new index_1.Vector3();
    }
    if (!options.orientation) {
        options.orientation = new index_1.Quaternion();
    }
}
const _finishCollisionShape = function (collisionShape, options, scale) {
    // MOD (yandeu): All of this will be done in physics.ts
    return;
    collisionShape.type = options.type;
    collisionShape.setMargin(options.margin);
    collisionShape.destroy = () => {
        for (let res of collisionShape.resources || []) {
            Ammo.destroy(res);
        }
        if (collisionShape.heightfieldData) {
            Ammo._free(collisionShape.heightfieldData);
        }
        Ammo.destroy(collisionShape);
    };
    const localTransform = new Ammo.btTransform();
    const rotation = new Ammo.btQuaternion();
    localTransform.setIdentity();
    localTransform.getOrigin().setValue(options.offset.x, options.offset.y, options.offset.z);
    rotation.setValue(options.orientation.x, options.orientation.y, options.orientation.z, options.orientation.w);
    localTransform.setRotation(rotation);
    Ammo.destroy(rotation);
    if (scale) {
        const localScale = new Ammo.btVector3(scale.x, scale.y, scale.z);
        collisionShape.setLocalScaling(localScale);
        Ammo.destroy(localScale);
    }
    collisionShape.localTransform = localTransform;
};
exports.iterateGeometries = (function () {
    const inverse = new index_1.Matrix4();
    return function (root, options, cb) {
        // MOD (yandeu): Update to three.js r123
        // compatibility fix for three.js >= r123 (Dezember 2020)
        if (+index_1.REVISION >= 123)
            inverse.copy(root.matrixWorld).invert();
        else
            inverse.getInverse(root.matrixWorld);
        const scale = new index_1.Vector3();
        scale.setFromMatrixScale(root.matrixWorld);
        root.traverse(mesh => {
            const transform = new index_1.Matrix4();
            if (mesh.isMesh &&
                // MOD (yandeu): No need to check if name is 'Sky'
                // mesh.name !== 'Sky' &&
                (options.includeInvisible || (mesh.el && mesh.el.object3D.visible) || mesh.visible)) {
                if (mesh === root) {
                    transform.identity();
                }
                else {
                    mesh.updateWorldMatrix(true);
                    transform.multiplyMatrices(inverse, mesh.matrixWorld);
                }
                // todo: might want to return null xform if this is the root so that callers can avoid multiplying
                // things by the identity matrix
                cb(mesh.geometry.isBufferGeometry ? mesh.geometry.attributes.position.array : mesh.geometry.vertices, transform.elements, mesh.geometry.index ? mesh.geometry.index.array : null);
            }
        });
    };
})();
const _computeScale = (function () {
    const matrix = new index_1.Matrix4();
    return function (matrixWorld, options = {}) {
        const scale = new index_1.Vector3(1, 1, 1);
        if (options.fit === exports.FIT.ALL) {
            matrix.fromArray(matrixWorld);
            scale.setFromMatrixScale(matrix);
        }
        return scale;
    };
})();
const _computeRadius = (function () {
    const center = new index_1.Vector3();
    return function (vertices, matrices, bounds) {
        let maxRadiusSq = 0;
        let { x: cx, y: cy, z: cz } = bounds.getCenter(center);
        _iterateVertices(vertices, matrices, v => {
            const dx = cx - v.x;
            const dy = cy - v.y;
            const dz = cz - v.z;
            maxRadiusSq = Math.max(maxRadiusSq, dx * dx + dy * dy + dz * dz);
        });
        return Math.sqrt(maxRadiusSq);
    };
})();
const _computeHalfExtents = function (bounds, minHalfExtent, maxHalfExtent) {
    const halfExtents = new index_1.Vector3();
    return halfExtents.subVectors(bounds.max, bounds.min).multiplyScalar(0.5).clampScalar(minHalfExtent, maxHalfExtent);
};
const _computeLocalOffset = function (matrix, bounds, target) {
    target.addVectors(bounds.max, bounds.min).multiplyScalar(0.5).applyMatrix4(matrix);
    return target;
};
// returns the bounding box for the geometries underneath `root`.
const _computeBounds = function (vertices, matrices) {
    const bounds = new index_1.Box3();
    let minX = +Infinity;
    let minY = +Infinity;
    let minZ = +Infinity;
    let maxX = -Infinity;
    let maxY = -Infinity;
    let maxZ = -Infinity;
    bounds.min.set(0, 0, 0);
    bounds.max.set(0, 0, 0);
    _iterateVertices(vertices, matrices, v => {
        if (v.x < minX)
            minX = v.x;
        if (v.y < minY)
            minY = v.y;
        if (v.z < minZ)
            minZ = v.z;
        if (v.x > maxX)
            maxX = v.x;
        if (v.y > maxY)
            maxY = v.y;
        if (v.z > maxZ)
            maxZ = v.z;
    });
    bounds.min.set(minX, minY, minZ);
    bounds.max.set(maxX, maxY, maxZ);
    return bounds;
};
const _iterateVertices = (function () {
    const vertex = new index_1.Vector3();
    const matrix = new index_1.Matrix4();
    return function (vertices, matrices, cb) {
        for (let i = 0; i < vertices.length; i++) {
            matrix.fromArray(matrices[i]);
            for (let j = 0; j < vertices[i].length; j += 3) {
                vertex.set(vertices[i][j], vertices[i][j + 1], vertices[i][j + 2]).applyMatrix4(matrix);
                cb(vertex);
            }
        }
    };
})();
//# sourceMappingURL=three-to-ammo.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/torusShape.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/torusShape.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.createTorusShape = void 0;
// https://pybullet.org/Bullet/phpBB3/viewtopic.php?t=7228
const createTorusShape = (config, quat) => {
    const { radius = 1, tube = 0.4, tubularSegments = 8 } = config;
    const SIMD_PI = Math.PI;
    const subdivisions = tubularSegments;
    const gap = Math.sqrt(2.0 * tube * tube - 2.0 * tube * tube * Math.cos((2.0 * SIMD_PI) / subdivisions));
    const btHalfExtents = new Ammo.btVector3(tube, SIMD_PI / subdivisions + 0.5 * gap, tube);
    const cylinderShape = new Ammo.btCylinderShape(btHalfExtents);
    cylinderShape.setMargin(0.05);
    const compoundShape = new Ammo.btCompoundShape();
    const forward = new Ammo.btVector3(0, 0, 1);
    const side = new Ammo.btVector3(0, radius, 0);
    const rotation = new Ammo.btQuaternion(quat.x, quat.y, quat.z, quat.w);
    for (let x = 0; x < subdivisions; x++) {
        const angle = (x * 2.0 * SIMD_PI) / subdivisions;
        const position = side.rotate(forward, angle);
        const transform = new Ammo.btTransform();
        rotation.setRotation(forward, angle + Math.PI / 2);
        transform.setIdentity();
        transform.setOrigin(position);
        transform.setRotation(rotation);
        compoundShape.addChildShape(transform, cylinderShape);
    }
    return compoundShape;
};
exports.createTorusShape = createTorusShape;
//# sourceMappingURL=torusShape.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/common/dist/applyMixins.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/common/dist/applyMixins.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
// https://www.typescriptlang.org/docs/handbook/mixins.html
const applyMixins = (derivedCtor, baseCtors) => {
    baseCtors.forEach(baseCtor => {
        Object.getOwnPropertyNames(baseCtor.prototype).forEach(name => {
            // @ts-ignore
            Object.defineProperty(derivedCtor.prototype, name, Object.getOwnPropertyDescriptor(baseCtor.prototype, name));
        });
    });
};
exports.default = applyMixins;
//# sourceMappingURL=applyMixins.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/common/dist/defaultMaterial.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/common/dist/defaultMaterial.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
const index_1 = __webpack_require__(/*! @enable3d/three-wrapper/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
class DefaultMaterial {
    constructor() {
        this._defaultMaterial = new index_1.MeshLambertMaterial({ color: 0xcccccc });
    }
    get() {
        return this._defaultMaterial;
    }
}
exports.default = DefaultMaterial;
//# sourceMappingURL=defaultMaterial.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/common/dist/extendedGroup.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/common/dist/extendedGroup.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ExtendedGroup = void 0;
const index_1 = __webpack_require__(/*! @enable3d/three-wrapper/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
class ExtendedGroup extends index_1.Group {
    constructor() {
        super();
        this.isMesh = false;
        this.hasBody = false;
        this.name = `object-${this.id}`;
    }
}
exports.ExtendedGroup = ExtendedGroup;
//# sourceMappingURL=extendedGroup.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/common/dist/extendedMesh.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/common/dist/extendedMesh.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ExtendedMesh = void 0;
const index_1 = __webpack_require__(/*! @enable3d/three-wrapper/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
class ExtendedMesh extends index_1.Mesh {
    constructor(geometry, material) {
        super(geometry, material);
        this.vector3 = new index_1.Vector3();
        this.isGroup = false;
        this.hasBody = false;
        this.name = `object-${this.id}`;
    }
    /** Returns all values relative to the world. */
    get world() {
        return {
            theta: this.worldTheta,
            phi: this.worldPhi
        };
    }
    /** Get the theta relative to the world. */
    get worldTheta() {
        this.getWorldDirection(this.vector3);
        return Math.atan2(this.vector3.x, this.vector3.z);
    }
    /** Get the phi relative to the world. */
    get worldPhi() {
        this.getWorldDirection(this.vector3);
        return Math.acos(this.vector3.y);
    }
}
exports.ExtendedMesh = ExtendedMesh;
//# sourceMappingURL=extendedMesh.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/common/dist/extendedObject3D.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/common/dist/extendedObject3D.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ExtendedObject3D = void 0;
const index_1 = __webpack_require__(/*! @enable3d/three-wrapper/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
/**
 * Extends the Object3D class from THREE.js and implements properties from Line, Mesh and Points.
 */
class ExtendedObject3D extends index_1.Object3D {
    constructor() {
        super();
        this.vector3 = new index_1.Vector3();
        this.isGroup = false;
        this.hasBody = false;
        this.anims = {}; // deprecated
        this._currentAnimation = '';
        this._animationActions = new Map();
        this.name = `object-${this.id}`;
    }
    /** setAction(name) is deprecated. Use animation.play(name) instead! */
    setAction(name) {
        console.warn('[enable3d] setAction(name) is deprecated. Use animation.play(name) instead!');
        this.animationPlay(name);
    }
    /** Returns all values relative to the world. */
    get world() {
        return {
            theta: this.worldTheta,
            phi: this.worldPhi
        };
    }
    /** Get the theta relative to the world. */
    get worldTheta() {
        this.getWorldDirection(this.vector3);
        return Math.atan2(this.vector3.x, this.vector3.z);
    }
    /** Get the phi relative to the world. */
    get worldPhi() {
        this.getWorldDirection(this.vector3);
        return Math.acos(this.vector3.y);
    }
    get animation() {
        return {
            current: this._currentAnimation,
            add: (key, animation) => this.animationAdd(key, animation),
            play: (name, transitionDuration = 500, loop = true) => this.animationPlay(name, transitionDuration, loop),
            mixer: this.animationMixer
        };
    }
    set animationMixer(animationMixer) {
        this._animationMixer = animationMixer;
    }
    get animationMixer() {
        if (!this._animationMixer)
            this._animationMixer = new index_1.AnimationMixer(this);
        return this._animationMixer;
    }
    animationAdd(key, animation) {
        this._animationActions.set(key, this.animationMixer.clipAction(animation));
    }
    animationPlay(name, transitionDuration = 500, loop = true) {
        const next = this._animationActions.get(name);
        const current = this._animationActions.get(this._currentAnimation);
        if (next) {
            next.reset();
            if (current) {
                next.crossFadeFrom(current, transitionDuration / 1000, true);
                next.clampWhenFinished = true;
            }
            if (!loop)
                next.setLoop(index_1.LoopOnce, 0);
            next.play();
        }
        this._currentAnimation = name;
    }
}
exports.ExtendedObject3D = ExtendedObject3D;
exports.default = ExtendedObject3D;
//# sourceMappingURL=extendedObject3D.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/common/dist/factories.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/common/dist/factories.js ***!
  \*******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";

/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */
var __rest = (this && this.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
const index_1 = __webpack_require__(/*! @enable3d/three-wrapper/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
const extendedMesh_1 = __webpack_require__(/*! ./extendedMesh */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/extendedMesh.js");
const logger_1 = __webpack_require__(/*! ./logger */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/logger.js");
const defaultMaterial_1 = __webpack_require__(/*! ./defaultMaterial */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/defaultMaterial.js");
class Factories {
    constructor(scene) {
        this.scene = scene;
        this.isHeadless = scene === 'headless' ? true : false;
        this.defaultMaterial = new defaultMaterial_1.default();
    }
    get make() {
        return {
            plane: (planeConfig = {}, materialConfig = {}) => this.makePlane(planeConfig, materialConfig),
            box: (boxConfig = {}, materialConfig = {}) => this.makeBox(boxConfig, materialConfig),
            sphere: (sphereConfig = {}, materialConfig = {}) => this.makeSphere(sphereConfig, materialConfig),
            cylinder: (cylinderConfig = {}, materialConfig = {}) => this.makeCylinder(cylinderConfig, materialConfig),
            cone: (coneConfig = {}, materialConfig = {}) => this.makeCone(coneConfig, materialConfig),
            torus: (torusConfig = {}, materialConfig = {}) => this.makeTorus(torusConfig, materialConfig),
            extrude: (extrudeConfig, materialConfig = {}) => this.makeExtrude(extrudeConfig, materialConfig)
        };
    }
    get add() {
        return {
            // effectComposer: () => this.addEffectComposer(),
            mesh: (mesh) => this.addMesh(mesh),
            // group: (...children) => this.addGroup(children),
            existing: (object) => this.addExisting(object),
            //  Geometry
            plane: (planeConfig = {}, materialConfig = {}) => this.addPlane(planeConfig, materialConfig),
            box: (boxConfig = {}, materialConfig = {}) => this.addBox(boxConfig, materialConfig),
            ground: (groundConfig, materialConfig = {}) => this.addGround(groundConfig, materialConfig),
            //...
            sphere: (sphereConfig = {}, materialConfig = {}) => this.addSphere(sphereConfig, materialConfig),
            cylinder: (cylinderConfig = {}, materialConfig = {}) => this.addCylinder(cylinderConfig, materialConfig),
            cone: (coneConfig = {}, materialConfig = {}) => this.addCone(coneConfig, materialConfig),
            torus: (torusConfig = {}, materialConfig = {}) => this.addTorus(torusConfig, materialConfig),
            extrude: (extrudeConfig, materialConfig = {}) => this.addExtrude(extrudeConfig, materialConfig),
            //...
            material: (materialConfig = {}) => this.addMaterial(materialConfig)
        };
    }
    addExisting(...object) {
        if (this.scene === 'headless')
            return;
        this.scene.add(...object);
    }
    addMesh(mesh) {
        if (Array.isArray(mesh)) {
            for (let i = 0; i < mesh.length; i++) {
                this.addExisting(mesh[i]);
            }
        }
        else {
            this.addExisting(mesh);
        }
        return this;
    }
    createMesh(geometry, material, position) {
        const { x = 0, y = 0, z = 0 } = position;
        let obj;
        switch (!Array.isArray(material) && material.type) {
            case 'LineBasicMaterial':
                obj = new index_1.Line(geometry, material);
                break;
            case 'PointsMaterial':
                obj = new index_1.Points(geometry, material);
                break;
            default:
                obj = new extendedMesh_1.ExtendedMesh(geometry, material);
                break;
        }
        obj.position.set(x, y, z);
        obj.castShadow = obj.receiveShadow = true;
        return obj;
    }
    makeExtrude(extrudeConfig, materialConfig) {
        const { x, y, z, name, shape, autoCenter = true, breakable = false, bufferGeometry = true } = extrudeConfig, rest = __rest(extrudeConfig
        // @ts-ignore // ExtrudeGeometryOptions interface missing since three.js r121
        , ["x", "y", "z", "name", "shape", "autoCenter", "breakable", "bufferGeometry"]);
        // @ts-ignore // ExtrudeGeometryOptions interface missing since three.js r121
        const { depth = 1, bevelEnabled = false } = rest;
        const geometry = bufferGeometry || breakable || this.isHeadless
            ? new index_1.ExtrudeBufferGeometry(shape, Object.assign({ depth, bevelEnabled }, rest))
            : new index_1.ExtrudeGeometry(shape, Object.assign({ depth, bevelEnabled }, rest));
        const material = this.addMaterial(materialConfig);
        const mesh = this.createMesh(geometry, material, { x, y, z });
        // auto adjust the center for custom shapes
        if (autoCenter)
            mesh.geometry.center();
        mesh.name = name || `body_id_${mesh.id}`;
        mesh.shape = 'extrude';
        return mesh;
    }
    addExtrude(extrudeConfig, materialConfig = {}) {
        const obj = this.makeExtrude(extrudeConfig, materialConfig);
        this.addExisting(obj);
        return obj;
    }
    makePlane(planeConfig, materialConfig) {
        const { x, y, z, name, breakable = false, bufferGeometry = true } = planeConfig, rest = __rest(planeConfig, ["x", "y", "z", "name", "breakable", "bufferGeometry"]);
        const geometry = bufferGeometry || breakable || this.isHeadless
            ? new index_1.PlaneBufferGeometry(rest.width || 1, rest.height || 1, rest.widthSegments || 1, rest.heightSegments || 1)
            : new index_1.PlaneGeometry(rest.width || 1, rest.height || 1, rest.widthSegments || 1, rest.heightSegments || 1);
        const material = this.addMaterial(materialConfig);
        material.side = index_1.DoubleSide;
        const mesh = this.createMesh(geometry, material, { x, y, z });
        mesh.name = name || `body_id_${mesh.id}`;
        mesh.shape = 'plane';
        return mesh;
    }
    addPlane(planeConfig, materialConfig) {
        const obj = this.makePlane(planeConfig, materialConfig);
        this.addExisting(obj);
        return obj;
    }
    makeSphere(sphereConfig, materialConfig) {
        const { x, y, z, name, breakable = false, bufferGeometry = true } = sphereConfig, rest = __rest(sphereConfig, ["x", "y", "z", "name", "breakable", "bufferGeometry"]);
        const geometry = bufferGeometry || breakable || this.isHeadless
            ? new index_1.SphereBufferGeometry(rest.radius || 1, rest.widthSegments || 16, rest.heightSegments || 12, rest.phiStart || undefined, rest.phiLength || undefined, rest.thetaStart || undefined, rest.thetaLength || undefined)
            : new index_1.SphereGeometry(rest.radius || 1, rest.widthSegments || 16, rest.heightSegments || 12, rest.phiStart || undefined, rest.phiLength || undefined, rest.thetaStart || undefined, rest.thetaLength || undefined);
        const material = this.addMaterial(materialConfig);
        const mesh = this.createMesh(geometry, material, { x, y, z });
        mesh.name = name || `body_id_${mesh.id}`;
        mesh.shape = 'sphere';
        return mesh;
    }
    addSphere(sphereConfig = {}, materialConfig = {}) {
        const obj = this.makeSphere(sphereConfig, materialConfig);
        this.addExisting(obj);
        return obj;
    }
    makeBox(boxConfig, materialConfig) {
        const { x, y, z, name, breakable = false, bufferGeometry = true } = boxConfig, rest = __rest(boxConfig, ["x", "y", "z", "name", "breakable", "bufferGeometry"]);
        const geometry = bufferGeometry || breakable || this.isHeadless
            ? new index_1.BoxBufferGeometry(rest.width || 1, rest.height || 1, rest.depth || 1, rest.widthSegments || undefined, rest.heightSegments || undefined, rest.depthSegments || undefined)
            : new index_1.BoxGeometry(rest.width || 1, rest.height || 1, rest.depth || 1, rest.widthSegments || undefined, rest.heightSegments || undefined, rest.depthSegments || undefined);
        const material = this.addMaterial(materialConfig);
        const mesh = this.createMesh(geometry, material, { x, y, z });
        mesh.name = name || `body_id_${mesh.id}`;
        mesh.shape = 'box';
        return mesh;
    }
    addBox(boxConfig = {}, materialConfig = {}) {
        const obj = this.makeBox(boxConfig, materialConfig);
        this.addExisting(obj);
        return obj;
    }
    addGround(groundConfig, materialConfig = {}) {
        const obj = this.makeBox(groundConfig, materialConfig);
        obj.rotateX(index_1.MathUtils.degToRad(90));
        this.addExisting(obj);
        return obj;
    }
    makeCylinder(cylinderConfig = {}, materialConfig = {}) {
        const { x, y, z, name, breakable = false, bufferGeometry = true } = cylinderConfig, rest = __rest(cylinderConfig, ["x", "y", "z", "name", "breakable", "bufferGeometry"]);
        const geometry = bufferGeometry || breakable || this.isHeadless
            ? new index_1.CylinderBufferGeometry(rest.radiusTop || 1, rest.radiusBottom || 1, rest.height || 1, rest.radiusSegments || undefined, rest.heightSegments || undefined, rest.openEnded || undefined, rest.thetaStart || undefined, rest.thetaLength || undefined)
            : new index_1.CylinderGeometry(rest.radiusTop || 1, rest.radiusBottom || 1, rest.height || 1, rest.radiusSegments || undefined, rest.heightSegments || undefined, rest.openEnded || undefined, rest.thetaStart || undefined, rest.thetaLength || undefined);
        const material = this.addMaterial(materialConfig);
        const mesh = this.createMesh(geometry, material, { x, y, z });
        mesh.name = name || `body_id_${mesh.id}`;
        mesh.shape = 'cylinder';
        return mesh;
    }
    addCylinder(cylinderConfig = {}, materialConfig = {}) {
        const obj = this.makeCylinder(cylinderConfig, materialConfig);
        this.addExisting(obj);
        return obj;
    }
    makeCone(coneConfig = {}, materialConfig = {}) {
        const { x, y, z, name, breakable = false, bufferGeometry = true } = coneConfig, rest = __rest(coneConfig, ["x", "y", "z", "name", "breakable", "bufferGeometry"]);
        const geometry = bufferGeometry || breakable || this.isHeadless
            ? new index_1.ConeBufferGeometry(rest.radius || 1, rest.height || 1, rest.radiusSegments || 8, rest.heightSegments || 1, rest.openEnded || false, rest.thetaStart || 0, rest.thetaLength || 2 * Math.PI)
            : new index_1.ConeBufferGeometry(rest.radius || 1, rest.height || 1, rest.radiusSegments || 8, rest.heightSegments || 1, rest.openEnded || false, rest.thetaStart || 0, rest.thetaLength || 2 * Math.PI);
        const material = this.addMaterial(materialConfig);
        const mesh = this.createMesh(geometry, material, { x, y, z });
        mesh.name = name || `body_id_${mesh.id}`;
        mesh.shape = 'cone';
        return mesh;
    }
    addCone(coneConfig = {}, materialConfig = {}) {
        const obj = this.makeCone(coneConfig, materialConfig);
        this.addExisting(obj);
        return obj;
    }
    // https://threejs.org/docs/index.html#api/en/geometries/TorusBufferGeometry
    makeTorus(torusConfig = {}, materialConfig = {}) {
        const { x, y, z, name, breakable = false, bufferGeometry = true } = torusConfig, rest = __rest(torusConfig, ["x", "y", "z", "name", "breakable", "bufferGeometry"]);
        const geometry = bufferGeometry || breakable || this.isHeadless
            ? new index_1.TorusBufferGeometry(rest.radius || undefined, rest.tube || undefined, rest.radialSegments || undefined, rest.tubularSegments || undefined, rest.arc || undefined)
            : new index_1.TorusGeometry(rest.radius || undefined, rest.tube || undefined, rest.radialSegments || undefined, rest.tubularSegments || undefined, rest.arc || undefined);
        const material = this.addMaterial(materialConfig);
        const mesh = this.createMesh(geometry, material, { x, y, z });
        mesh.name = name || `body_id_${mesh.id}`;
        mesh.shape = 'torus';
        return mesh;
    }
    addTorus(torusConfig = {}, materialConfig = {}) {
        const obj = this.makeTorus(torusConfig, materialConfig);
        this.addExisting(obj);
        return obj;
    }
    addMaterial(materialConfig = {}) {
        const type = Object.keys(materialConfig)[0];
        let material;
        // if (type) {
        //   const { map } = materialConfig[type]
        //   if (typeof map === 'string') materialConfig[type].map = this.loadTexture(map)
        // }
        // always share the same material in headless mode to save memory
        if (this.scene === 'headless')
            return this.defaultMaterial.get();
        switch (type) {
            case 'basic':
                material = new index_1.MeshBasicMaterial(materialConfig.basic);
                break;
            case 'normal':
                material = new index_1.MeshNormalMaterial(materialConfig.normal);
                break;
            case 'standard':
                material = new index_1.MeshStandardMaterial(materialConfig.standard);
                break;
            case 'lambert':
                material = new index_1.MeshLambertMaterial(materialConfig.lambert);
                break;
            case 'phong':
                material = new index_1.MeshPhongMaterial(materialConfig.phong);
                break;
            case 'physical':
                if (typeof materialConfig.physical !== 'undefined') {
                    material = new index_1.MeshPhysicalMaterial(materialConfig.physical);
                }
                else {
                    logger_1.default('You need to pass parameters to the physical material. (Fallback to default material)');
                    material = this.defaultMaterial.get();
                }
                break;
            case 'toon':
                material = new index_1.MeshToonMaterial(materialConfig.toon);
                break;
            case 'line':
                material = new index_1.LineBasicMaterial(materialConfig.line);
                break;
            case 'points':
                material = new index_1.PointsMaterial(materialConfig.points);
                break;
            case 'custom':
                material = materialConfig.custom || this.defaultMaterial.get();
                break;
            default:
                material = this.defaultMaterial.get();
                break;
        }
        return material;
    }
}
exports.default = Factories;
//# sourceMappingURL=factories.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/common/dist/logger.js":
/*!****************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/common/dist/logger.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
const logger = (msg) => {
    console.error(`%c [enable3d] ${msg} `, 'background: #222; color: #bada55');
};
exports.default = logger;
//# sourceMappingURL=logger.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/common/dist/misc/firstPersonControls.js":
/*!**********************************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/common/dist/misc/firstPersonControls.js ***!
  \**********************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

/**
 * @description  This code has originally been copied from Sketchbook
 *
 * @author       swift502 <blaha.j502@gmail.com> (http://jblaha.art/)
 * @copyright    Copyright (c) 2018 swift502; Project Url: https://github.com/swift502/Sketchbook
 * @license      {@link https://github.com/swift502/Sketchbook/blob/master/LICENSE|GPL-3.0}
 *
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FirstPersonControls = void 0;
const dist_1 = __webpack_require__(/*! @enable3d/three-wrapper/dist */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
class FirstPersonControls {
    constructor(camera, target, config) {
        this.camera = camera;
        this.target = target;
        this.config = config;
        const { offset = new dist_1.Vector3(0, 0, 0), sensitivity = new dist_1.Vector2(1, 1), radius = 8, targetRadius = 10, interpolationFactor = 0.05, pointerLock = true, autoUpdate = true } = config;
        this.offset = offset;
        this.sensitivity = sensitivity;
        this.radius = radius;
        this.targetRadius = targetRadius;
        this.interpolationFactor = interpolationFactor;
        this.theta = 0;
        this.phi = 0;
        // if (pointerLock) {
        //   scene.input.on('pointerdown', () => {
        //     scene.input.mouse.requestPointerLock()
        //   })
        //   scene.input.on('pointermove', (pointer: PointerEvent) => {
        //     if (scene.input.mouse.locked) {
        //       this.update(pointer.movementX, pointer.movementY)
        //     }
        //   })
        // }
        // if (autoUpdate) {
        //   scene.events.on('update', () => {
        //     this.update(0, 0)
        //   })
        // }
    }
    update(deltaX, deltaY) {
        const center = this.target.position.clone().add(this.offset);
        this.camera.position.copy(center);
        this.theta -= deltaX * (this.sensitivity.x / 2);
        this.theta %= 360;
        this.phi += deltaY * (-this.sensitivity.y / 2);
        this.phi = Math.min(85, Math.max(-85, this.phi));
        const lookAt = new dist_1.Vector3();
        lookAt.x = center.x + this.radius * Math.sin((this.theta * Math.PI) / 180) * Math.cos((this.phi * Math.PI) / 180);
        lookAt.y = center.y + this.radius * Math.sin((this.phi * Math.PI) / 180);
        lookAt.z = center.z + this.radius * Math.cos((this.theta * Math.PI) / 180) * Math.cos((this.phi * Math.PI) / 180);
        this.camera.updateMatrix();
        this.camera.lookAt(lookAt);
    }
}
exports.FirstPersonControls = FirstPersonControls;
//# sourceMappingURL=firstPersonControls.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/common/dist/misc/joystick.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/common/dist/misc/joystick.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.JoyStick = void 0;
const eventemitter3_1 = __webpack_require__(/*! eventemitter3 */ "./node_modules/eventemitter3/index.js");
// This class is based on a file I found online called toon3d.js
// Unfortunately I could not find its license or author.
// I just ported it to TypeScript and improved the code.
class JoyStick extends eventemitter3_1.EventEmitter {
    constructor() {
        super(...arguments);
        this.id = -1;
    }
    get add() {
        return {
            axis: (config = {}) => this.addAxis(config),
            button: (config = {}) => this.addButton(config)
        };
    }
    addAxis(config = {}) {
        this.id++;
        const { styles = { left: 35, bottom: 35, size: 100 } } = config;
        const circle = this.circle({ styles });
        const thumb = this.thumb({ styles });
        circle.appendChild(thumb);
        document.body.appendChild(circle);
        const { maxRadius = 40, rotationDamping = 0.06, moveDamping = 0.01 } = config;
        // element
        const element = {
            id: this.id,
            domElement: thumb,
            maxRadius: maxRadius,
            maxRadiusSquared: maxRadius * maxRadius,
            origin: { left: thumb.offsetLeft, top: thumb.offsetTop },
            offset: { x: 0, y: 0 },
            rotationDamping: rotationDamping,
            moveDamping: moveDamping
        };
        if (element === null || element === void 0 ? void 0 : element.domElement) {
            const { domElement } = element;
            if ('ontouchstart' in window) {
                domElement.addEventListener('touchstart', evt => {
                    evt.preventDefault();
                    this.tap(evt, element);
                    evt.stopPropagation();
                });
            }
            else {
                domElement.addEventListener('mousedown', evt => {
                    evt.preventDefault();
                    this.tap(evt, element);
                    evt.stopPropagation();
                });
            }
        }
        return {
            onMove: (event) => {
                this.on(`axis_onmove_${element.id}`, delta => {
                    event(delta);
                });
            }
        };
    }
    addButton(config = {}) {
        this.id++;
        const { styles = { right: 35, bottom: 35, size: 80 }, letter: l = 'A' } = config;
        const circle = this.circle({ styles });
        const letter = this.letter({ letter: l });
        circle.appendChild(letter);
        document.body.appendChild(circle);
        // element
        const element = {
            id: this.id,
            domElement: circle,
            offset: { x: 0, y: 0 }
        };
        if (element === null || element === void 0 ? void 0 : element.domElement) {
            this.click(element);
        }
        return {
            onClick: (event) => {
                this.on(`button_onclick_${element.id}`, data => {
                    event(data);
                });
            },
            onRelease: (event) => {
                this.on(`button_onrelease_${element.id}`, data => {
                    event(data);
                });
            }
        };
    }
    circle(config = {}) {
        const { styles } = config;
        const { top, right, bottom, left, size } = styles;
        const circle = document.createElement('div');
        let css = `position:absolute; width:${size}px; height:${size}px; background:rgba(126, 126, 126, 0.5); border:#444 solid medium; border-radius:50%; cursor: pointer; `;
        if (top)
            css += `top:${top}px; `;
        if (right)
            css += `right:${right}px; `;
        if (bottom)
            css += `bottom:${bottom}px; `;
        if (left)
            css += `left:${left}px; `;
        circle.style.cssText = css;
        return circle;
    }
    thumb(config = {}) {
        const { styles } = config;
        const { size } = styles;
        const thumb = document.createElement('div');
        thumb.style.cssText = `position: absolute; left: ${size / 4}px; top: ${size / 4}px; width: ${size / 2}px; height: ${size / 2}px; border-radius: 50%; background: #fff; `;
        return thumb;
    }
    letter(config = {}) {
        const { letter: l } = config;
        const letter = document.createElement('span');
        letter.innerText = l;
        letter.style.cssText =
            'position: absolute; text-align: center; top: 4px; width: 80px; height: 80px; font-size: 64px; color: #fff; ';
        return letter;
    }
    click(element) {
        const { id, domElement } = element;
        if ('ontouchstart' in window) {
            domElement.addEventListener('touchstart', evt => {
                evt.preventDefault();
                this.emit(`button_onclick_${id}`);
            });
            domElement.addEventListener('touchend', evt => {
                evt.preventDefault();
                this.emit(`button_onrelease_${id}`);
            });
        }
        else {
            domElement.addEventListener('mousedown', evt => {
                evt.preventDefault();
                this.emit(`button_onclick_${id}`);
                evt.stopPropagation();
            });
            domElement.addEventListener('mouseup', evt => {
                evt.preventDefault();
                this.emit(`button_onrelease_${id}`);
                evt.stopPropagation();
            });
        }
    }
    tap(evt, element) {
        evt = evt || window.event;
        // get the mouse cursor position at startup:
        element.offset = this.getMousePosition(evt);
        if ('ontouchstart' in window) {
            document.ontouchmove = evt => {
                if (evt.target === element.domElement)
                    this.move(evt, element);
            };
            document.ontouchend = evt => {
                if (evt.target === element.domElement)
                    this.up(element);
            };
        }
        else {
            document.onmousemove = evt => {
                if (evt.target === element.domElement)
                    this.move(evt, element);
            };
            document.onmouseup = _evt => {
                this.up(element);
            };
        }
    }
    move(evt, element) {
        const { domElement, maxRadius, maxRadiusSquared, origin, offset, id } = element;
        evt = evt || window.event;
        const mouse = this.getMousePosition(evt);
        // calculate the new cursor position:
        let left = mouse.x - offset.x;
        let top = mouse.y - offset.y;
        //this.offset = mouse;
        const sqMag = left * left + top * top;
        if (sqMag > maxRadiusSquared) {
            //Only use sqrt if essential
            const magnitude = Math.sqrt(sqMag);
            left /= magnitude;
            top /= magnitude;
            left *= maxRadius;
            top *= maxRadius;
        }
        // set the element's new position:
        domElement.style.top = `${top + domElement.clientHeight / 2}px`;
        domElement.style.left = `${left + domElement.clientWidth / 2}px`;
        const forward = -(top - origin.top + domElement.clientHeight / 2) / maxRadius;
        const turn = (left - origin.left + domElement.clientWidth / 2) / maxRadius;
        this.emit(`axis_onmove_${id}`, { top: forward, right: turn });
    }
    up(element) {
        const { domElement, origin, id } = element;
        if ('ontouchstart' in window) {
            document.ontouchmove = null;
            // @ts-ignore
            document.touchend = null;
        }
        else {
            document.onmousemove = null;
            document.onmouseup = null;
        }
        domElement.style.top = `${origin.top}px`;
        domElement.style.left = `${origin.left}px`;
        this.emit(`axis_onmove_${id}`, { top: 0, right: 0 });
    }
    getMousePosition(evt) {
        // @ts-ignore
        let clientX = evt.targetTouches ? evt.targetTouches[0].pageX : evt.clientX;
        // @ts-ignore
        let clientY = evt.targetTouches ? evt.targetTouches[0].pageY : evt.clientY;
        return { x: clientX, y: clientY };
    }
}
exports.JoyStick = JoyStick;
//# sourceMappingURL=joystick.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/common/dist/misc/pointerDrag.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/common/dist/misc/pointerDrag.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.PointerDrag = void 0;
class PointerDrag {
    constructor(_element, autoStart = true) {
        this._element = _element;
        this._isRunning = false;
        this._position = { x: 0, y: 0 };
        this._delta = { x: 0, y: 0 };
        this._onMoveCallback = () => { };
        this._isPointerDown = false;
        if (autoStart)
            this.start();
    }
    get isTouchDevice() {
        return 'ontouchstart' in window;
    }
    get isPointerDown() {
        return this._isPointerDown;
    }
    start() {
        if (this._isRunning)
            return;
        this._isRunning = true;
        if (this.isTouchDevice) {
            this._element.addEventListener('touchstart', e => this.onTouchStart(e));
            this._element.addEventListener('touchend', e => this.onTouchEnd(e));
            this._element.addEventListener('touchmove', e => this.onTouchMove(e));
        }
        else {
            this._element.addEventListener('mousedown', e => this.onPointerDown(e));
            this._element.addEventListener('mouseup', e => this.onPointerUp(e));
            this._element.addEventListener('mouseleave', e => this.onPointerLeave(e));
            this._element.addEventListener('mouseover', e => this.onPointerOver(e));
            this._element.addEventListener('mousemove', e => this.onPointerMove(e));
        }
    }
    stop() {
        if (this.isTouchDevice) {
            this._element.removeEventListener('touchstart', e => this.onTouchStart(e));
            this._element.removeEventListener('touchend', e => this.onTouchEnd(e));
            this._element.removeEventListener('touchmove', e => this.onTouchMove(e));
        }
        else {
            this._element.removeEventListener('mousedown', e => this.onPointerDown(e));
            this._element.removeEventListener('mouseleave', e => this.onPointerLeave(e));
            this._element.removeEventListener('mouseup', e => this.onPointerUp(e));
            this._element.removeEventListener('mouseover', e => this.onPointerOver(e));
            this._element.removeEventListener('mousemove', e => this.onPointerMove(e));
        }
        this._isRunning = false;
    }
    removeListeners() {
        this.stop();
    }
    onMove(onMoveCallback) {
        this._onMoveCallback = onMoveCallback;
    }
    onPointerDown(_e) {
        this._isPointerDown = true;
    }
    onPointerUp(_e) {
        this._isPointerDown = false;
    }
    onPointerLeave(_e) {
        this._isPointerDown = false;
    }
    onPointerMove(e) {
        const clientX = e.movementX;
        const clientY = e.movementY;
        this._delta = { x: clientX, y: clientY };
        this._onMoveCallback(this._delta);
    }
    onPointerOver(_e) { }
    onTouchStart(e) {
        const clientX = e.touches[0].clientX;
        const clientY = e.touches[0].clientY;
        this._position = { x: clientX, y: clientY };
    }
    onTouchEnd(_e) {
        this._position = { x: 0, y: 0 };
        this._delta = { x: 0, y: 0 };
        this._onMoveCallback(this._delta);
    }
    onTouchMove(e) {
        const clientX = e.touches[0].clientX;
        const clientY = e.touches[0].clientY;
        this._delta = { x: clientX - this._position.x, y: clientY - this._position.y };
        this._onMoveCallback(this._delta);
        this._position = { x: clientX, y: clientY };
    }
}
exports.PointerDrag = PointerDrag;
//# sourceMappingURL=pointerDrag.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/common/dist/misc/pointerLock.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/common/dist/misc/pointerLock.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.PointerLock = void 0;
class PointerLock {
    constructor(_element, autoLock = true) {
        this._element = _element;
        this._isRunning = false;
        if (autoLock)
            this.request();
    }
    isLocked() {
        return !!document.pointerLockElement;
    }
    exit() {
        this._isRunning = false;
        document.exitPointerLock();
        this.removeListeners();
    }
    removeListeners() {
        document.removeEventListener('pointerlockchange', () => this.pointerLockChangeHandler());
        this._element.removeEventListener('pointerdown', () => this.pointerDownHandlerHandler());
    }
    pointerLockChangeHandler() {
        if (!this._isRunning)
            return;
        this._request();
    }
    pointerDownHandlerHandler() {
        if (!this._isRunning)
            return;
        this._element.requestPointerLock();
    }
    request() {
        this._isRunning = true;
        this._request();
    }
    _request() {
        // listen to pointer lock change events
        document.addEventListener('pointerlockchange', () => this.pointerLockChangeHandler(), {
            once: true
        });
        // return if pointer is already locked
        if (!!document.pointerLockElement)
            return;
        // listen for pointerdown event
        this._element.addEventListener('pointerdown', () => this.pointerDownHandlerHandler(), { once: true });
    }
}
exports.PointerLock = PointerLock;
//# sourceMappingURL=pointerLock.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/common/dist/misc/thirdPersonControls.js":
/*!**********************************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/common/dist/misc/thirdPersonControls.js ***!
  \**********************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

/**
 * @description  This code has originally been copied from Sketchbook
 *
 * @author       swift502 <blaha.j502@gmail.com> (http://jblaha.art/)
 * @copyright    Copyright (c) 2018 swift502; Project Url: https://github.com/swift502/Sketchbook
 * @license      {@link https://github.com/swift502/Sketchbook/blob/master/LICENSE|GPL-3.0}
 *
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ThirdPersonControls = void 0;
const dist_1 = __webpack_require__(/*! @enable3d/three-wrapper/dist */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
class ThirdPersonControls {
    constructor(camera, target, config) {
        this.camera = camera;
        this.target = target;
        this.config = config;
        const { offset = new dist_1.Vector3(0, 0, 0), sensitivity = new dist_1.Vector2(1, 1), radius = 8, targetRadius = 10, interpolationFactor = 0.05, pointerLock = true, autoUpdate = true, theta = 0, phi = 0, 
        /** Max Phi in deg */
        maxPhi = 85, 
        /** Min Phi in deg */
        minPhi = -85 } = config;
        this.offset = offset;
        this.sensitivity = sensitivity;
        this.radius = radius;
        this.targetRadius = targetRadius;
        this.interpolationFactor = interpolationFactor;
        this.theta = theta;
        this.phi = phi;
        this.maxPhi = maxPhi;
        this.minPhi = minPhi;
        // if (pointerLock) {
        //   scene.input.on('pointerdown', () => {
        //     scene.input.mouse.requestPointerLock()
        //   })
        //   scene.input.on('pointermove', (pointer: PointerEvent) => {
        //     if (scene.input.mouse.locked) {
        //       this.update(pointer.movementX, pointer.movementY)
        //     }
        //   })
        // }
        // if (autoUpdate) {
        //   scene.events.on('update', () => {
        //     this.update(0, 0)
        //   })
        // }
    }
    update(deltaX, deltaY) {
        const target = this.target.position.clone().add(this.offset);
        this.theta -= deltaX * (this.sensitivity.x / 2);
        this.theta %= 360;
        this.phi += deltaY * (this.sensitivity.y / 2);
        this.phi = Math.min(this.maxPhi, Math.max(this.minPhi, this.phi));
        this.radius = dist_1.MathUtils.lerp(this.radius, this.targetRadius, this.interpolationFactor);
        this.camera.position.x =
            target.x + this.radius * Math.sin((this.theta * Math.PI) / 180) * Math.cos((this.phi * Math.PI) / 180);
        this.camera.position.y = target.y + this.radius * Math.sin((this.phi * Math.PI) / 180);
        this.camera.position.z =
            target.z + this.radius * Math.cos((this.theta * Math.PI) / 180) * Math.cos((this.phi * Math.PI) / 180);
        this.camera.updateMatrix();
        this.camera.lookAt(target);
    }
}
exports.ThirdPersonControls = ThirdPersonControls;
//# sourceMappingURL=thirdPersonControls.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/common/dist/misc/water.js":
/*!********************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/common/dist/misc/water.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.addWater = void 0;
const index_1 = __webpack_require__(/*! @enable3d/three-wrapper/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
const addWater = (scene, renderer, config = {}) => {
    const { width = 20, height = 20, x = 0, y = 0, z = 0, color = '#ffffff', scale = 4, flowX = 1, flowY = 1, normalMap0 = undefined, normalMap1 = undefined } = config;
    //ground
    const groundGeometry = new index_1.PlaneBufferGeometry(width, height);
    // #0077be (also known as Ocean Boat Blue)
    const groundMaterial = new index_1.MeshStandardMaterial({ color: 0x0077be, transparent: true, opacity: 0.8 });
    const ground = new index_1.Mesh(groundGeometry, groundMaterial);
    ground.position.set(x, y, z);
    ground.rotation.x = Math.PI * -0.5;
    scene.add(ground);
    // water
    const waterGeometry = new index_1.PlaneBufferGeometry(width, height);
    const water = new index_1.Water(waterGeometry, {
        color: color,
        scale: scale,
        flowDirection: new index_1.Vector2(flowX, flowY),
        textureWidth: 1024,
        textureHeight: 1024,
        normalMap0: normalMap0,
        normalMap1: normalMap1,
        encoding: renderer.outputEncoding
    });
    water.position.set(x, y + 0.1, z);
    water.rotation.x = Math.PI * -0.5;
    scene.add(water);
    return { ground, water };
};
exports.addWater = addWater;
//# sourceMappingURL=water.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/common/dist/physicsBody.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/common/dist/physicsBody.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */
Object.defineProperty(exports, "__esModule", ({ value: true }));
const eventemitter3_1 = __webpack_require__(/*! eventemitter3 */ "./node_modules/eventemitter3/index.js");
const index_1 = __webpack_require__(/*! @enable3d/three-wrapper/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
class PhysicsBody {
    constructor(physics, ammo) {
        this.physics = physics;
        this.ammo = ammo;
        this.ignoreScale = false;
        this.isSoftBody = false;
        this.offset = { x: 0, y: 0, z: 0 };
        this.errors = [];
        this.checkCollisions = false;
        this.breakable = false;
        this.didUpdate = false;
        /** Skip syncing the mesh to the physics body. */
        this.skipUpdate = false;
        this._emitUpdateEvents = false;
        this._needUpdate = false;
        this.tmpEuler = new index_1.Euler();
        this.tmpQuaternion = new index_1.Quaternion();
        this.tmpBtVector3 = new Ammo.btVector3();
        this.tmpBtVector3_1 = new Ammo.btVector3();
        this.tmpBtQuaternion = new Ammo.btQuaternion(0, 0, 0, 1);
        this.eventEmitter = new eventemitter3_1.EventEmitter();
        // @ts-ignore
        this.name = ammo.name;
    }
    /**
     * Don't call this manually! Do physics.destroy() instead.
     */
    destructor() {
        // remove events
        if (this.eventEmitter)
            this.eventEmitter.removeAllListeners();
        // destroy tmp ammo values
        Ammo.destroy(this.tmpBtVector3);
        Ammo.destroy(this.tmpBtVector3_1);
        Ammo.destroy(this.tmpBtQuaternion);
        // destory collision shape
        Ammo.destroy(this.ammo.getCollisionShape());
        // destroy body
        Ammo.destroy(this.ammo);
    }
    setupEventEmitter() {
        if (typeof this.eventEmitter === 'undefined')
            this.eventEmitter = new eventemitter3_1.EventEmitter();
    }
    get needUpdate() {
        return this._needUpdate;
    }
    set needUpdate(need) {
        if (!need && this._needUpdate)
            this.didUpdate = true;
        this._needUpdate = need;
    }
    onUpdateEvent(updateCallback, once = false) {
        this.setupEventEmitter();
        this._emitUpdateEvents = true;
        if (once)
            this.eventEmitter.once('update', () => {
                updateCallback();
            });
        else
            this.eventEmitter.on('update', () => {
                updateCallback();
            });
    }
    get on() {
        return {
            update: (updateCallback) => this.onUpdateEvent(updateCallback),
            collision: (collisionCallback) => this.onCollision(collisionCallback)
        };
    }
    get once() {
        return {
            update: (updateCallback) => this.onUpdateEvent(updateCallback, true)
        };
    }
    onCollision(collisionCallback) {
        this.checkCollisions = true;
        this.physics.collisionEvents.on('collision', (data) => {
            const { bodies, event } = data;
            if (bodies[0].name === this.name)
                collisionCallback(bodies[1], event);
            else if (bodies[1].name === this.name)
                collisionCallback(bodies[0], event);
        });
    }
    /** You have to call transform() before you can get or set the body's position or rotation. (for headless mode only) */
    transform() {
        const t = this.physics.worldTransform;
        this.ammo.getMotionState().getWorldTransform(t);
    }
    /** You have to call refresh() after you set the position or rotation of the body. (for headless mode only) */
    refresh() {
        const t = this.physics.worldTransform;
        this.ammo.getMotionState().setWorldTransform(t);
    }
    /** Set the rotation in radians. (for headless mode only) */
    setRotation(x, y, z) {
        const e = this.tmpEuler.set(x, y, z);
        const q = this.tmpQuaternion.set(0, 0, 0, 1);
        q.setFromEuler(e);
        this.tmpBtQuaternion.setValue(0, 0, 0, 1);
        const ammoQuat = this.tmpBtQuaternion;
        ammoQuat.setValue(q.x, q.y, q.z, q.w);
        const t = this.physics.worldTransform;
        t.setRotation(ammoQuat);
    }
    /** Get the rotation in radians. (for headless mode only) */
    get rotation() {
        // https://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/index.htm
        let x, y, z;
        const t = this.physics.worldTransform;
        const ammoQuat = t.getRotation();
        let q1 = this.tmpQuaternion.set(ammoQuat.x(), ammoQuat.y(), ammoQuat.z(), ammoQuat.w());
        if (q1.w > 1)
            q1 = q1.normalize(); // if w>1 acos and sqrt will produce errors, this cant happen if quaternion is normalized
        const angle = 2 * Math.acos(q1.w);
        const s = Math.sqrt(1 - q1.w * q1.w); // assuming quaternion normalized then w is less than 1, so term always positive.
        if (s < 0.001) {
            // test to avoid divide by zero, s is always positive due to sqrt
            // if s close to zero then direction of axis not important
            x = q1.x; // if it is important that axis is normalized then replace with x=1; y=z=0;
            y = q1.y;
            z = q1.z;
        }
        else {
            x = q1.x / s; // normalized axis
            y = q1.y / s;
            z = q1.z / s;
        }
        return { x: x * angle, y: y * angle, z: z * angle };
    }
    /** Set position. (for headless mode only) */
    setPosition(x, y, z) {
        const t = this.physics.worldTransform;
        t.getOrigin().setValue(x, y, z);
    }
    /** Get position. (for headless mode only) */
    get position() {
        const t = this.physics.worldTransform;
        return { x: t.getOrigin().x(), y: t.getOrigin().y(), z: t.getOrigin().z() };
    }
    get velocity() {
        return {
            x: this.ammo.getLinearVelocity().x(),
            y: this.ammo.getLinearVelocity().y(),
            z: this.ammo.getLinearVelocity().z()
        };
    }
    get angularVelocity() {
        return {
            x: this.ammo.getAngularVelocity().x(),
            y: this.ammo.getAngularVelocity().y(),
            z: this.ammo.getAngularVelocity().z()
        };
    }
    setVelocity(x, y, z) {
        this.tmpBtVector3.setValue(x, y, z);
        this.ammo.setLinearVelocity(this.tmpBtVector3);
    }
    setVelocityX(value) {
        this.tmpBtVector3.setValue(value, this.velocity.y, this.velocity.z);
        this.ammo.setLinearVelocity(this.tmpBtVector3);
    }
    setVelocityY(value) {
        this.tmpBtVector3.setValue(this.velocity.x, value, this.velocity.z);
        this.ammo.setLinearVelocity(this.tmpBtVector3);
    }
    setVelocityZ(value) {
        this.tmpBtVector3.setValue(this.velocity.x, this.velocity.y, value);
        this.ammo.setLinearVelocity(this.tmpBtVector3);
    }
    setAngularVelocity(x, y, z) {
        this.tmpBtVector3.setValue(x, y, z);
        this.ammo.setAngularVelocity(this.tmpBtVector3);
    }
    setAngularVelocityX(value) {
        this.tmpBtVector3.setValue(value, this.angularVelocity.y, this.angularVelocity.z);
        this.ammo.setAngularVelocity(this.tmpBtVector3);
    }
    setAngularVelocityY(value) {
        this.tmpBtVector3.setValue(this.angularVelocity.x, value, this.angularVelocity.z);
        this.ammo.setAngularVelocity(this.tmpBtVector3);
    }
    setAngularVelocityZ(value) {
        this.tmpBtVector3.setValue(this.angularVelocity.x, this.angularVelocity.y, value);
        this.ammo.setAngularVelocity(this.tmpBtVector3);
    }
    // Apply Force methods
    applyForce(x, y, z) {
        this.tmpBtVector3.setValue(x, y, z);
        this.ammo.applyCentralImpulse(this.tmpBtVector3);
    }
    applyForceX(value) {
        this.tmpBtVector3.setValue(value, 0, 0);
        this.ammo.applyCentralImpulse(this.tmpBtVector3);
    }
    applyForceY(value) {
        this.tmpBtVector3.setValue(0, value, 0);
        this.ammo.applyCentralImpulse(this.tmpBtVector3);
    }
    applyForceZ(value) {
        this.tmpBtVector3.setValue(0, 0, value);
        this.ammo.applyCentralImpulse(this.tmpBtVector3);
    }
    // Apply "Something" Methods
    applyCentralForce(x, y, z) {
        this.tmpBtVector3.setValue(x, y, z);
        this.ammo.applyCentralForce(this.tmpBtVector3);
    }
    applyCentralImpulse(x, y, z) {
        this.tmpBtVector3.setValue(x, y, z);
        this.ammo.applyCentralImpulse(this.tmpBtVector3);
    }
    applyCentralLocalForce(x, y, z) {
        this.tmpBtVector3.setValue(x, y, z);
        this.ammo.applyCentralLocalForce(this.tmpBtVector3);
    }
    applyImpulse(impulse, relativePosition) {
        this.tmpBtVector3.setValue(impulse.x || 0, impulse.y || 0, impulse.z || 0);
        this.tmpBtVector3_1.setValue(relativePosition.x || 0, relativePosition.y || 0, relativePosition.z || 0);
        this.ammo.applyImpulse(this.tmpBtVector3, this.tmpBtVector3_1);
    }
    applyLocalTorque(x, y, z) {
        this.tmpBtVector3.setValue(x, y, z);
        this.ammo.applyLocalTorque(this.tmpBtVector3);
    }
    applyTorque(x, y, z) {
        this.tmpBtVector3.setValue(x, y, z);
        this.ammo.applyTorque(this.tmpBtVector3);
    }
    applyTorqueImpulse(x, y, z) {
        this.tmpBtVector3.setValue(x, y, z);
        this.ammo.applyTorqueImpulse(this.tmpBtVector3);
    }
    /**
     * Add the collision flags
     * @param value 0 is DYNAMIC, 1 is STATIC, 2 is KINEMATIC, 4 GHOST
     */
    // https://github.com/bulletphysics/bullet3/blob/aae8048722f2596f7e2bdd52d2a1dcb52a218f2b/src/BulletCollision/CollisionDispatch/btCollisionObject.h#L128
    setCollisionFlags(value) {
        this.ammo.setCollisionFlags(value);
    }
    /**
     * Get the collision flags
     * @param value 0 is DYNAMIC, 1 is STATIC, 2 is KINEMATIC, 4 GHOST
     */
    getCollisionFlags() {
        return this.ammo.getCollisionFlags();
    }
    /**
     * Set the restitution (same as bounciness)
     * @param value A number from 0 to 1.
     */
    setRestitution(value) {
        this.ammo.setRestitution(value);
    }
    /**
     * Set the bounciness (same as restitution)
     * @param value A number from 0 to 1.
     */
    setBounciness(value) {
        this.setRestitution(value);
    }
    /**
     * Set the friction
     * @param value A number from 0 to 1.
     */
    setFriction(value) {
        this.ammo.setFriction(value);
    }
    /** Set per body gravity */
    setGravity(x, y, z) {
        this.tmpBtVector3.setValue(x, y, z);
        this.ammo.setGravity(this.tmpBtVector3);
    }
    setLinearFactor(x, y, z) {
        this.tmpBtVector3.setValue(x, y, z);
        this.ammo.setLinearFactor(this.tmpBtVector3);
    }
    setAngularFactor(x, y, z) {
        this.tmpBtVector3.setValue(x, y, z);
        this.ammo.setAngularFactor(this.tmpBtVector3);
    }
    setCcdMotionThreshold(threshold) {
        this.ammo.setCcdMotionThreshold(threshold);
    }
    setCcdSweptSphereRadius(radius) {
        this.ammo.setCcdSweptSphereRadius(radius);
    }
}
exports.default = PhysicsBody;
//# sourceMappingURL=physicsBody.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/common/dist/physicsLoader.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/common/dist/physicsLoader.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.PhysicsLoader = void 0;
const wasmLoader_1 = __webpack_require__(/*! ./wasmLoader */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/wasmLoader.js");
const PhysicsLoader = (path, callback) => {
    if (typeof window !== 'undefined')
        window.__loadPhysics = true;
    wasmLoader_1.default(path, () => {
        Ammo().then(() => {
            callback();
        });
    });
};
exports.PhysicsLoader = PhysicsLoader;
//# sourceMappingURL=physicsLoader.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/common/dist/types.js":
/*!***************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/common/dist/types.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Group = exports.Points = exports.Line = exports.Material = exports.Mesh = exports.Object3D = exports.AnimationAction = exports.AnimationClip = exports.AnimationMixer = exports.ExtendedMesh = exports.ExtendedObject3D = void 0;
const extendedObject3D_1 = __webpack_require__(/*! ./extendedObject3D */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/extendedObject3D.js");
Object.defineProperty(exports, "ExtendedObject3D", ({ enumerable: true, get: function () { return extendedObject3D_1.ExtendedObject3D; } }));
const extendedMesh_1 = __webpack_require__(/*! ./extendedMesh */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/extendedMesh.js");
Object.defineProperty(exports, "ExtendedMesh", ({ enumerable: true, get: function () { return extendedMesh_1.ExtendedMesh; } }));
// TODO fix this export
// export { ThirdPersonControls } from '../misc/thirdPersonControls'
var index_1 = __webpack_require__(/*! @enable3d/three-wrapper/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
Object.defineProperty(exports, "AnimationMixer", ({ enumerable: true, get: function () { return index_1.AnimationMixer; } }));
Object.defineProperty(exports, "AnimationClip", ({ enumerable: true, get: function () { return index_1.AnimationClip; } }));
Object.defineProperty(exports, "AnimationAction", ({ enumerable: true, get: function () { return index_1.AnimationAction; } }));
Object.defineProperty(exports, "Object3D", ({ enumerable: true, get: function () { return index_1.Object3D; } }));
Object.defineProperty(exports, "Mesh", ({ enumerable: true, get: function () { return index_1.Mesh; } }));
Object.defineProperty(exports, "Material", ({ enumerable: true, get: function () { return index_1.Material; } }));
Object.defineProperty(exports, "Line", ({ enumerable: true, get: function () { return index_1.Line; } }));
Object.defineProperty(exports, "Points", ({ enumerable: true, get: function () { return index_1.Points; } }));
Object.defineProperty(exports, "Group", ({ enumerable: true, get: function () { return index_1.Group; } }));
//# sourceMappingURL=types.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/common/dist/typesAmmo.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/common/dist/typesAmmo.js ***!
  \*******************************************************************************/
/***/ (() => {

"use strict";

//# sourceMappingURL=typesAmmo.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/common/dist/typesCustom.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/common/dist/typesCustom.js ***!
  \*********************************************************************************/
/***/ (() => {

"use strict";

//# sourceMappingURL=typesCustom.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/common/dist/wasmLoader.js":
/*!********************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/common/dist/wasmLoader.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
// Inspired by https://github.com/playcanvas/engine/blob/master/examples/wasm-loader.js
const wasmSupported = (() => {
    try {
        if (typeof WebAssembly === 'object' && typeof WebAssembly.instantiate === 'function') {
            const module = new WebAssembly.Module(Uint8Array.of(0x0, 0x61, 0x73, 0x6d, 0x01, 0x00, 0x00, 0x00));
            if (module instanceof WebAssembly.Module)
                return new WebAssembly.Instance(module) instanceof WebAssembly.Instance;
        }
    }
    catch (e) { }
    return false;
})();
const loadScriptAsync = (url, doneCallback) => {
    var tag = document.createElement('script');
    tag.onload = () => {
        doneCallback();
    };
    tag.onerror = () => {
        throw new Error('failed to load ' + url);
    };
    tag.async = true;
    tag.src = url;
    document.head.appendChild(tag);
};
const loadAmmoModule = (path, doneCallback) => {
    // console.log(wasmSupported ? 'WebAssembly is supported' : 'WebAssembly is not supported')
    if (wasmSupported)
        loadScriptAsync(`${path}/ammo.wasm.js`, () => doneCallback());
    else
        loadScriptAsync(`${path}/ammo.js`, () => doneCallback());
};
exports.default = loadAmmoModule;
//# sourceMappingURL=wasmLoader.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/core.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/core.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ThreeGraphics = void 0;
const THREE = __webpack_require__(/*! @enable3d/three-wrapper/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
const cameras_1 = __webpack_require__(/*! ./plugins/cameras */ "./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/cameras.js");
const index_1 = __webpack_require__(/*! @enable3d/ammo-physics/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/ammo-physics/dist/index.js");
class ThreeGraphics {
    constructor(threeGraphicsConfig = {}) {
        this.threeGraphicsConfig = threeGraphicsConfig;
        const { anisotropy = 1, camera = cameras_1.default.Perspective({ z: 25, y: 5 }), antialias = false, usePhysics = true, renderer } = threeGraphicsConfig;
        this.textureAnisotropy = anisotropy;
        this.camera = camera;
        this.scene = new THREE.Scene();
        // this.renderer.physicallyCorrectLights = true
        this.renderer = renderer || new THREE.WebGLRenderer({ antialias });
        // see https://threejs.org/docs/#examples/en/loaders/GLTFLoader
        // this.renderer.outputEncoding = sRGBEncoding
        // shadow
        this.renderer.shadowMap.enabled = true;
        this.renderer.shadowMap.type = THREE.PCFSoftShadowMap;
        // enable cache
        this.cache = THREE.Cache;
        this.cache.enabled = true;
        if (usePhysics) {
            if (typeof Ammo !== 'undefined')
                this.physics = new index_1.AmmoPhysics(this.scene, threeGraphicsConfig);
            else
                console.log('[enable3d]: Are you sure you included ammo.js?');
        }
    }
}
exports.ThreeGraphics = ThreeGraphics;
//# sourceMappingURL=core.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/index.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/index.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.MathUtils = exports.Vector3 = exports.Vector2 = exports.Object3D = exports.FBXLoader = exports.GLTFLoader = exports.RGBAFormat = exports.Texture = exports.WebGLRenderer = exports.Types = exports.THREE = exports.PhysicsLoader = exports.ThreeGraphics = void 0;
const core_1 = __webpack_require__(/*! ./core */ "./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/core.js");
Object.defineProperty(exports, "ThreeGraphics", ({ enumerable: true, get: function () { return core_1.ThreeGraphics; } }));
const physicsLoader_1 = __webpack_require__(/*! @enable3d/common/dist/physicsLoader */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/physicsLoader.js");
Object.defineProperty(exports, "PhysicsLoader", ({ enumerable: true, get: function () { return physicsLoader_1.PhysicsLoader; } }));
const THREE = __webpack_require__(/*! @enable3d/three-wrapper/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
exports.THREE = THREE;
const Types = __webpack_require__(/*! @enable3d/common/dist/types */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/types.js");
exports.Types = Types;
const version_1 = __webpack_require__(/*! ./version */ "./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/version.js");
var index_1 = __webpack_require__(/*! @enable3d/three-wrapper/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
Object.defineProperty(exports, "WebGLRenderer", ({ enumerable: true, get: function () { return index_1.WebGLRenderer; } }));
Object.defineProperty(exports, "Texture", ({ enumerable: true, get: function () { return index_1.Texture; } }));
Object.defineProperty(exports, "RGBAFormat", ({ enumerable: true, get: function () { return index_1.RGBAFormat; } }));
Object.defineProperty(exports, "GLTFLoader", ({ enumerable: true, get: function () { return index_1.GLTFLoader; } }));
Object.defineProperty(exports, "FBXLoader", ({ enumerable: true, get: function () { return index_1.FBXLoader; } }));
Object.defineProperty(exports, "Object3D", ({ enumerable: true, get: function () { return index_1.Object3D; } }));
Object.defineProperty(exports, "Vector2", ({ enumerable: true, get: function () { return index_1.Vector2; } }));
Object.defineProperty(exports, "Vector3", ({ enumerable: true, get: function () { return index_1.Vector3; } }));
Object.defineProperty(exports, "MathUtils", ({ enumerable: true, get: function () { return index_1.MathUtils; } }));
const info = `Powered by enable3d v${version_1.VERSION}`;
console.log(`%c %c %c %c %c ${info} %c https://enable3d.io/`, 'background: #ff0000', 'background: #ffff00', 'background: #00ff00', 'background: #00ffff', 'color: #fff; background: #000000;', 'background: none');
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/cameras.js":
/*!*********************************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/cameras.js ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */
Object.defineProperty(exports, "__esModule", ({ value: true }));
const index_1 = __webpack_require__(/*! @enable3d/three-wrapper/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
class Cameras {
    perspectiveCamera(config = {}) {
        return Cameras.Perspective(config);
    }
    orthographicCamera(config = {}) {
        return Cameras.Orthographic(config);
    }
    static Perspective(config = {}) {
        // for phaser
        // aspect = scene.scale.gameSize.aspectRatio
        const { fov = 50, aspect = window.innerWidth / window.innerHeight, near = 0.1, far = 2000, x = 0, y = 0, z = 0 } = config;
        const camera = new index_1.PerspectiveCamera(fov, aspect, near, far);
        camera.position.set(x, y, z);
        return camera;
    }
    static Orthographic(config = {}) {
        // for phaser
        // const { width, height } = scene.cameras.main
        const width = window.innerWidth;
        const height = window.innerHeight;
        const { left = width / -100, right = width / 100, top = height / 100, bottom = height / -100, near = 1, far = 1000, x = 0, y = 0, z = 0 } = config;
        const camera = new index_1.OrthographicCamera(left, right, top, bottom, near, far);
        camera.position.set(x, y, z);
        return camera;
    }
}
exports.default = Cameras;
//# sourceMappingURL=cameras.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/csg.js":
/*!*****************************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/csg.js ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */
Object.defineProperty(exports, "__esModule", ({ value: true }));
// Originally copied from https://github.com/Hi-Level/three-csg
// which is a typescript rewrite of https://github.com/manthrax/THREE-CSGMesh
// which as originally written by Copyright (c) 2011 Evan Wallace (http://madebyevan.com/), under the MIT license.
const index_1 = __webpack_require__(/*! @enable3d/three-wrapper/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
/**
 * CSG wrapper for enable3d
 *
 * The CSG library does not support buffer geometries.
 * Means we first make sure we are dealing with geometries
 * and then transform them back to buffer geometries.
 */
class CSGWrapper {
    constructor(scene, transform) {
        this.scene = scene;
        this.transform = transform;
    }
    toGeometry(meshA, meshB) {
        // @ts-ignore
        meshA.geometry = this.transform.bufferGeometryToGeometry(meshA.geometry);
        // @ts-ignore
        meshB.geometry = this.transform.bufferGeometryToGeometry(meshB.geometry);
    }
    toBufferGeometry(meshC) {
        // @ts-ignore
        meshC.geometry = this.transform.geometryToBufferGeometry(meshC.geometry);
    }
    union(meshA, meshB) {
        this.toGeometry(meshA, meshB);
        const meshC = this.doCSG(meshA, meshB, 'union');
        this.toBufferGeometry(meshC);
        return meshC;
    }
    subtract(meshA, meshB) {
        this.toGeometry(meshA, meshB);
        const meshC = this.doCSG(meshA, meshB, 'subtract');
        this.toBufferGeometry(meshC);
        return meshC;
    }
    intersect(meshA, meshB) {
        this.toGeometry(meshA, meshB);
        const meshC = this.doCSG(meshA, meshB, 'intersect');
        this.toBufferGeometry(meshC);
        return meshC;
    }
    doCSG(meshA, meshB, operation) {
        meshA.updateMatrix();
        meshB.updateMatrix();
        const bspA = CSG.fromMesh(meshA);
        const bspB = CSG.fromMesh(meshB);
        // @ts-ignore
        const bspC = bspA[operation](bspB);
        const result = CSG.toMesh(bspC, meshA.matrix);
        return result;
    }
}
exports.default = CSGWrapper;
/**
 * CSG (Constructive Solid Geometry) library for three.js with Typescript support.
 * Holds a binary space partition tree representing a 3D solid. Two solids can
 * be combined using the `union()`, `subtract()`, and `intersect()` methods.
 */
class CSG {
    constructor() {
        this.polygons = [];
    }
    static fromPolygons(polygons) {
        const csg = new CSG();
        csg.polygons = polygons;
        return csg;
    }
    static fromGeometry(geom) {
        if (geom.isBufferGeometry) {
            geom = new index_1.Geometry().fromBufferGeometry(geom);
        }
        const fs = geom.faces;
        const vs = geom.vertices;
        const polys = [];
        const fm = ['a', 'b', 'c'];
        for (let i = 0; i < fs.length; i++) {
            const f = fs[i];
            const vertices = [];
            for (let j = 0; j < 3; j++) {
                const uvs = geom.faceVertexUvs[0][i] !== undefined && geom.faceVertexUvs[0][i][j] !== undefined
                    ? geom.faceVertexUvs[0][i][j]
                    : undefined;
                vertices.push(new Vertex(vs[f[fm[j]]], f.vertexNormals[j], uvs));
            }
            polys.push(new Polygon(vertices));
        }
        return CSG.fromPolygons(polys);
    }
    static fromMesh(mesh) {
        const csg = CSG.fromGeometry(mesh.geometry);
        CSG._tmpm3.getNormalMatrix(mesh.matrix);
        for (const p of csg.polygons) {
            for (const v of p.vertices) {
                v.pos.applyMatrix4(mesh.matrix);
                v.normal.applyMatrix3(CSG._tmpm3);
            }
        }
        return csg;
    }
    static toMesh(csg, toMatrix) {
        const geom = new index_1.Geometry();
        const ps = csg.polygons;
        const vs = geom.vertices;
        const fvuv = geom.faceVertexUvs[0];
        for (const p of ps) {
            const pvs = p.vertices;
            const v0 = vs.length;
            const pvlen = pvs.length;
            for (const pv of pvs) {
                vs.push(new index_1.Vector3().copy(pv.pos));
            }
            for (let j = 3; j <= pvlen; j++) {
                const fc = new index_1.Face3(v0, v0 + j - 2, v0 + j - 1);
                const fuv = [];
                fvuv.push(fuv);
                const fnml = fc.vertexNormals;
                fnml.push(new index_1.Vector3().copy(pvs[0].normal));
                fnml.push(new index_1.Vector3().copy(pvs[j - 2].normal));
                fnml.push(new index_1.Vector3().copy(pvs[j - 1].normal));
                // check for uv property
                if (pvs[0].uv && pvs[j - 2].uv && pvs[j - 1].uv) {
                    fuv.push(new index_1.Vector3().copy(pvs[0].uv));
                    fuv.push(new index_1.Vector3().copy(pvs[j - 2].uv));
                    fuv.push(new index_1.Vector3().copy(pvs[j - 1].uv));
                }
                fc.normal = new index_1.Vector3().copy(p.plane.normal);
                geom.faces.push(fc);
            }
        }
        // compatibility fix for three.js >= r123 (Dezember 2020)
        const inv = 
        // @ts-ignore
        +index_1.REVISION >= 123 ? new index_1.Matrix4().copy(toMatrix).invert() : new index_1.Matrix4().getInverse(toMatrix);
        geom.applyMatrix4(inv);
        geom.verticesNeedUpdate = geom.elementsNeedUpdate = geom.normalsNeedUpdate = true;
        geom.computeBoundingSphere();
        geom.computeBoundingBox();
        const m = new index_1.Mesh(geom);
        m.matrix.copy(toMatrix);
        m.matrix.decompose(m.position, m.rotation, m.scale);
        m.updateMatrixWorld();
        return m;
    }
    static iEval(tokens, _index = 0) {
        var _a;
        if (typeof tokens === 'string') {
            CSG.currentOp = tokens;
        }
        else if (tokens instanceof Array) {
            for (const token of tokens) {
                CSG.iEval(token, 0);
            }
        }
        else if (typeof tokens === 'object') {
            const op = CSG.currentOp;
            tokens.updateMatrix();
            tokens.updateMatrixWorld();
            if (!CSG.sourceMesh) {
                CSG.currentPrim = CSG.fromMesh((CSG.sourceMesh = tokens));
            }
            else {
                CSG.nextPrim = CSG.fromMesh(tokens);
                CSG.currentPrim = CSG.currentPrim[op](CSG.nextPrim);
            }
            if (CSG.doRemove)
                (_a = tokens === null || tokens === void 0 ? void 0 : tokens.parent) === null || _a === void 0 ? void 0 : _a.remove(tokens);
        } // union,subtract,intersect,inverse
    }
    static eval(tokens, doRemove) {
        // [['add',mesh,mesh,mesh,mesh],['sub',mesh,mesh,mesh,mesh]]
        // @ts-ignore
        delete CSG.currentOp;
        // @ts-ignore
        delete CSG.sourceMesh;
        CSG.doRemove = doRemove;
        CSG.iEval(tokens);
        const result = CSG.toMesh(CSG.currentPrim, CSG.sourceMesh.matrix);
        result.material = CSG.sourceMesh.material;
        result.castShadow = result.receiveShadow = true;
        return result;
    }
    clone() {
        const csg = new CSG();
        csg.polygons = this.polygons.map(p => {
            return p.clone();
        });
        return csg;
    }
    toPolygons() {
        return this.polygons;
    }
    union(csg) {
        const a = new Node(this.clone().polygons);
        const b = new Node(csg.clone().polygons);
        a.clipTo(b);
        b.clipTo(a);
        b.invert();
        b.clipTo(a);
        b.invert();
        a.build(b.allPolygons());
        return CSG.fromPolygons(a.allPolygons());
    }
    subtract(csg) {
        const a = new Node(this.clone().polygons);
        const b = new Node(csg.clone().polygons);
        a.invert();
        a.clipTo(b);
        b.clipTo(a);
        b.invert();
        b.clipTo(a);
        b.invert();
        a.build(b.allPolygons());
        a.invert();
        return CSG.fromPolygons(a.allPolygons());
    }
    intersect(csg) {
        const a = new Node(this.clone().polygons);
        const b = new Node(csg.clone().polygons);
        a.invert();
        b.clipTo(a);
        b.invert();
        a.clipTo(b);
        b.clipTo(a);
        a.build(b.allPolygons());
        a.invert();
        return CSG.fromPolygons(a.allPolygons());
    }
    inverse() {
        const csg = this.clone();
        csg.polygons.map(p => {
            p.flip();
        });
        return csg;
    }
}
CSG._tmpm3 = new index_1.Matrix3();
/**
 * Represents a 3D vector.
 */
class Vector extends index_1.Vector3 {
    constructor(x, y, z) {
        if (arguments.length === 3) {
            super(x, y, z);
        }
        else if (Array.isArray(x)) {
            super(x[0], x[1], x[2]);
        }
        else if (typeof x === 'object') {
            // @ts-ignore
            this.copy(x);
        }
        else {
            throw new Error('Invalid constructor to vector');
        }
    }
    clone() {
        return new Vector(this.x, this.y, this.z);
    }
    negated() {
        return this.clone().multiplyScalar(-1);
    }
    plus(a) {
        return this.clone().add(a);
    }
    minus(a) {
        return this.clone().sub(a);
    }
    times(a) {
        return this.clone().multiplyScalar(a);
    }
    dividedBy(a) {
        return this.clone().divideScalar(a);
    }
    lerp(a, t) {
        return this.plus(a.minus(this).times(t));
    }
    unit() {
        return this.dividedBy(this.length());
    }
    // @ts-ignore
    cross(a, w) {
        return index_1.Vector3.prototype.cross.call(this.clone(), a);
    }
}
/**
 * Represents a vertex of a polygon. Use your own vertex class instead of this
 * one to provide additional features like texture coordinates and vertex
 * colors. Custom vertex classes need to provide a `pos` property and `clone()`,
 * `flip()`, and `interpolate()` methods that behave analogous to the ones
 * defined by `CSG.Vertex`. This class provides `normal` so convenience
 * functions like `CSG.sphere()` can return a smooth vertex normal, but `normal`
 * is not used anywhere else.
 */
class Vertex {
    constructor(pos, normal, uv) {
        this.pos = new Vector(pos.x, pos.y, pos.z);
        this.normal = new Vector(normal.x, normal.y, normal.z);
        if (uv)
            this.uv = new Vector(uv.x, uv.y, uv.z);
    }
    clone() {
        return new Vertex(this.pos.clone(), this.normal.clone(), this.uv ? this.uv.clone() : undefined);
    }
    // Invert all orientation-specific data (e.g. vertex normal). Called when the
    // orientation of a polygon is flipped.
    flip() {
        this.normal = this.normal.negated();
    }
    // Create a new vertex between this vertex and `other` by linearly
    // interpolating all properties using a parameter of `t`. Subclasses should
    // override this to interpolate additional properties.
    interpolate(other, t) {
        return new Vertex(this.pos.lerp(other.pos, t), this.normal.lerp(other.normal, t), this.uv ? this.uv.lerp(other.uv, t) : undefined);
    }
}
/**
 * Represents a plane in 3D space.
 */
class Plane {
    constructor(normal, w) {
        this.normal = normal;
        this.w = w;
    }
    static fromPoints(a, b, c) {
        const n = b
            .minus(a)
            .cross(c.minus(a))
            // @ts-ignore
            .unit();
        return new Plane(n, n.dot(a));
    }
    clone() {
        return new Plane(this.normal.clone(), this.w);
    }
    flip() {
        this.normal = this.normal.negated();
        this.w = -this.w;
    }
    // Split `polygon` by this plane if needed, then put the polygon or polygon
    // fragments in the appropriate lists. Coplanar polygons go into either
    // `coplanarFront` or `coplanarBack` depending on their orientation with
    // respect to this plane. Polygons in front or in back of this plane go into
    // either `front` or `back`.
    splitPolygon(polygon, coplanarFront, coplanarBack, front, back) {
        const COPLANAR = 0;
        const FRONT = 1;
        const BACK = 2;
        const SPANNING = 3;
        // Classify each point as well as the entire polygon into one of the above
        // four classes.
        let polygonType = 0;
        const types = [];
        for (const vertex of polygon.vertices) {
            const t = this.normal.dot(vertex.pos) - this.w;
            const type = t < -Plane.EPSILON ? BACK : t > Plane.EPSILON ? FRONT : COPLANAR;
            polygonType |= type;
            types.push(type);
        }
        // Put the polygon in the correct list, splitting it when necessary.
        switch (polygonType) {
            case COPLANAR:
                ;
                (this.normal.dot(polygon.plane.normal) > 0 ? coplanarFront : coplanarBack).push(polygon);
                break;
            case FRONT:
                front.push(polygon);
                break;
            case BACK:
                back.push(polygon);
                break;
            case SPANNING:
                const f = [];
                const b = [];
                for (let i = 0; i < polygon.vertices.length; i++) {
                    const j = (i + 1) % polygon.vertices.length;
                    const ti = types[i];
                    const tj = types[j];
                    const vi = polygon.vertices[i];
                    const vj = polygon.vertices[j];
                    if (ti !== BACK) {
                        f.push(vi);
                    }
                    if (ti !== FRONT) {
                        b.push(ti !== BACK ? vi.clone() : vi);
                    }
                    if ((ti | tj) === SPANNING) {
                        const t = (this.w - this.normal.dot(vi.pos)) / this.normal.dot(vj.pos.minus(vi.pos));
                        const v = vi.interpolate(vj, t);
                        f.push(v);
                        b.push(v.clone());
                    }
                }
                if (f.length >= 3) {
                    front.push(new Polygon(f, polygon.shared));
                }
                if (b.length >= 3) {
                    back.push(new Polygon(b, polygon.shared));
                }
                break;
        }
    }
}
// the tolerance used by `splitPolygon()` to decide if a
// point is on the plane.
Plane.EPSILON = 1e-5;
/**
 * Represents a convex polygon. The vertices used to initialize a polygon must
 * be coplanar and form a convex loop. They do not have to be `Vertex`
 * instances but they must behave similarly (duck typing can be used for
 * customization).
 *
 * Each convex polygon has a `shared` property, which is shared between all
 * polygons that are clones of each other or were split from the same polygon.
 * This can be used to define per-polygon properties (such as surface color).
 */
class Polygon {
    constructor(vertices, shared = null) {
        this.vertices = vertices;
        this.shared = shared;
        this.plane = Plane.fromPoints(vertices[0].pos, vertices[1].pos, vertices[2].pos);
    }
    clone() {
        const vertices = this.vertices.map(v => {
            return v.clone();
        });
        return new Polygon(vertices, this.shared);
    }
    flip() {
        this.vertices.reverse().map(v => {
            v.flip();
        });
        this.plane.flip();
    }
}
/**
 * Holds a node in a BSP tree. A BSP tree is built from a collection of polygons
 * by picking a polygon to split along. That polygon (and all other coplanar
 * polygons) are added directly to that node and the other polygons are added to
 * the front and/or back subtrees. This is not a leafy BSP tree since there is
 * no distinction between internal and leaf nodes.
 */
class Node {
    constructor(polygons) {
        // @ts-ignore
        delete this.plane;
        // @ts-ignore
        delete this.front;
        // @ts-ignore
        delete this.back;
        this.polygons = [];
        if (polygons) {
            this.build(polygons);
        }
    }
    clone() {
        const node = new Node();
        node.plane = this.plane && this.plane.clone();
        node.front = this.front && this.front.clone();
        node.back = this.back && this.back.clone();
        node.polygons = this.polygons.map(p => {
            return p.clone();
        });
        return node;
    }
    // Convert solid space to empty space and empty space to solid space.
    invert() {
        for (const polygon of this.polygons) {
            polygon.flip();
        }
        this.plane.flip();
        if (this.front) {
            this.front.invert();
        }
        if (this.back) {
            this.back.invert();
        }
        const temp = this.front;
        this.front = this.back;
        this.back = temp;
    }
    // Recursively remove all polygons in `polygons` that are inside this BSP
    // tree.
    clipPolygons(polygons) {
        if (!this.plane) {
            return polygons.slice();
        }
        let front = [];
        let back = [];
        for (const polygon of polygons) {
            this.plane.splitPolygon(polygon, front, back, front, back);
        }
        if (this.front) {
            front = this.front.clipPolygons(front);
        }
        back = this.back ? this.back.clipPolygons(back) : [];
        return front.concat(back);
    }
    // Remove all polygons in this BSP tree that are inside the other BSP tree
    // `bsp`.
    clipTo(bsp) {
        this.polygons = bsp.clipPolygons(this.polygons);
        if (this.front) {
            this.front.clipTo(bsp);
        }
        if (this.back) {
            this.back.clipTo(bsp);
        }
    }
    // Return a list of all polygons in this BSP tree.
    allPolygons() {
        let polygons = this.polygons.slice();
        if (this.front) {
            polygons = polygons.concat(this.front.allPolygons());
        }
        if (this.back) {
            polygons = polygons.concat(this.back.allPolygons());
        }
        return polygons;
    }
    // Build a BSP tree out of `polygons`. When called on an existing tree, the
    // new polygons are filtered down to the bottom of the tree and become new
    // nodes there. Each set of polygons is partitioned using the first polygon
    // (no heuristic is used to pick a good split).
    build(polygons) {
        if (!polygons.length) {
            return;
        }
        if (!this.plane) {
            this.plane = polygons[0].plane.clone();
        }
        const front = [];
        const back = [];
        for (const polygon of polygons) {
            this.plane.splitPolygon(polygon, this.polygons, this.polygons, front, back);
        }
        if (front.length) {
            if (!this.front) {
                this.front = new Node();
            }
            this.front.build(front);
        }
        if (back.length) {
            if (!this.back) {
                this.back = new Node();
            }
            this.back.build(back);
        }
    }
}
//# sourceMappingURL=csg.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/haveSomeFun.js":
/*!*************************************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/haveSomeFun.js ***!
  \*************************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
const HaveSomeFun = (numberOfElements = 20, physics) => {
    if (!window.__loadPhysics) {
        console.log('There is not much fun without physics enabled!');
        return;
    }
    // adding some boxes (with physics)
    for (let i = 0; i < numberOfElements; i++) {
        const materials = ['standard', 'basic', 'normal', 'phong', 'line', 'points'];
        const Between = (min, max) => Math.floor(Math.random() * (max - min + 1) + min);
        const RandomPick = (array) => array[Math.floor(Math.random() * array.length)];
        if (Math.random() > 0.5) {
            physics.add
                .box({
                x: Between(-10, 10),
                y: Between(10, 20),
                z: Between(-10, 10),
                width: Between(1, 2) / 10,
                height: Between(1, 2) / 10,
                depth: Between(1, 2) / 10,
                mass: 1
            }, { [RandomPick(materials)]: { color: Math.floor(Math.random() * 0xffffff) } })
                .body.setRestitution(Math.floor(Math.random() * 10) / 20);
        }
        else {
            physics.add
                .sphere({
                x: Between(-10, 10),
                y: Between(10, 20),
                z: Between(-10, 10),
                radius: Between(1, 2) / 10,
                mass: 1
            }, { [RandomPick(materials)]: { color: Math.floor(Math.random() * 0xffffff) } })
                .body.setRestitution(Math.floor(Math.random() * 10) / 20);
        }
    }
};
exports.default = HaveSomeFun;
//# sourceMappingURL=haveSomeFun.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/heightmap.js":
/*!***********************************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/heightmap.js ***!
  \***********************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */
Object.defineProperty(exports, "__esModule", ({ value: true }));
const index_1 = __webpack_require__(/*! @enable3d/three-wrapper/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
const types_1 = __webpack_require__(/*! @enable3d/common/dist/types */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/types.js");
const logger_1 = __webpack_require__(/*! @enable3d/common/dist/logger */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/logger.js");
class HeightMap {
    constructor(scene) {
        this.scene = scene;
    }
    add(texture, config = {}) {
        const heightMap = this.make(texture, config);
        if (heightMap)
            this.scene.add(heightMap);
        else
            logger_1.default('Could not make heightmap');
        return heightMap;
    }
    make(texture, config = {}) {
        // var spacingX = 3
        // var spacingZ = 3
        // var heightOffset = 2
        const { image } = texture;
        const { width, height } = image;
        const { colorScale } = config;
        const canvas = document.createElement('canvas');
        canvas.width = width;
        canvas.height = height;
        const ctx = canvas.getContext('2d');
        if (!ctx)
            return;
        ctx.drawImage(texture.image, 0, 0);
        const pixel = ctx.getImageData(0, 0, width, height);
        // geometry
        const plane = new index_1.PlaneGeometry(10, 10, width - 1, height - 1);
        // material
        let materialConfig = { color: 0xcccccc, side: index_1.DoubleSide };
        if (colorScale)
            materialConfig = Object.assign(Object.assign({}, materialConfig), { vertexColors: index_1.FaceColors });
        const material = new index_1.MeshPhongMaterial(materialConfig);
        // mesh
        const mesh = new types_1.ExtendedMesh(plane, material);
        mesh.receiveShadow = mesh.castShadow = true;
        mesh.shape = 'concave';
        // adjust all z values
        const geo = mesh.geometry;
        for (let i = 0; i < geo.vertices.length; i++) {
            geo.vertices[i].z = pixel.data[i * 4] / 120;
        }
        // helper function to get the highest point
        const getHighPoint = (geometry, face) => {
            var v1 = geometry.vertices[face.a].z;
            var v2 = geometry.vertices[face.b].z;
            var v3 = geometry.vertices[face.c].z;
            return Math.max(v1, v2, v3);
        };
        // apply color scale if available
        if (colorScale)
            geo.faces.forEach(face => (face.color = new index_1.Color(colorScale(getHighPoint(geo, face)).hex())));
        mesh.rotateX(-Math.PI / 2);
        mesh.updateMatrix();
        plane.computeFaceNormals();
        plane.computeVertexNormals();
        mesh.name = 'heightmap';
        return mesh;
    }
}
exports.default = HeightMap;
//# sourceMappingURL=heightmap.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/index.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/index.js ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

/**
 * These Plugins are not included in the Core three-graphics package
 */
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Cameras = exports.HaveSomeFun = exports.WebXR = exports.Transform = exports.TextureCube = exports.Misc = exports.Mixers = exports.WarpSpeed = exports.HeightMap = exports.CSG = exports.Factories = exports.Lights = exports.Loaders = void 0;
const loaders_1 = __webpack_require__(/*! ./loaders */ "./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/loaders.js");
exports.Loaders = loaders_1.default;
const lights_1 = __webpack_require__(/*! ./lights */ "./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/lights.js");
exports.Lights = lights_1.default;
const factories_1 = __webpack_require__(/*! @enable3d/common/dist/factories */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/factories.js");
exports.Factories = factories_1.default;
const csg_1 = __webpack_require__(/*! ./csg */ "./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/csg.js");
exports.CSG = csg_1.default;
const heightmap_1 = __webpack_require__(/*! ./heightmap */ "./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/heightmap.js");
exports.HeightMap = heightmap_1.default;
const warpSpeed_1 = __webpack_require__(/*! ./warpSpeed */ "./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/warpSpeed.js");
exports.WarpSpeed = warpSpeed_1.default;
const mixers_1 = __webpack_require__(/*! ./mixers */ "./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/mixers.js");
exports.Mixers = mixers_1.default;
const misc_1 = __webpack_require__(/*! ./misc */ "./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/misc.js");
exports.Misc = misc_1.default;
Object.defineProperty(exports, "TextureCube", ({ enumerable: true, get: function () { return misc_1.TextureCube; } }));
const transform_1 = __webpack_require__(/*! ./transform */ "./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/transform.js");
exports.Transform = transform_1.default;
const webxr_1 = __webpack_require__(/*! ./webxr */ "./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/webxr.js");
exports.WebXR = webxr_1.default;
const haveSomeFun_1 = __webpack_require__(/*! ./haveSomeFun */ "./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/haveSomeFun.js");
exports.HaveSomeFun = haveSomeFun_1.default;
const cameras_1 = __webpack_require__(/*! ./cameras */ "./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/cameras.js");
exports.Cameras = cameras_1.default;
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/lights.js":
/*!********************************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/lights.js ***!
  \********************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */
Object.defineProperty(exports, "__esModule", ({ value: true }));
const index_1 = __webpack_require__(/*! @enable3d/three-wrapper/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
const index_2 = __webpack_require__(/*! @enable3d/three-wrapper/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
const index_3 = __webpack_require__(/*! @enable3d/three-wrapper/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
class PointLightHelper extends index_1.Object3D {
    constructor(scene, light, size, color) {
        super();
        this.scene = scene;
        this.light = light;
        this.size = size;
        this.color = color;
        this.geo = new index_1.SphereBufferGeometry(size || 0.2, 16, 8);
        this.mat = new index_1.MeshBasicMaterial({ color: color || light.color });
        this.mesh = new index_1.Mesh(this.geo, this.mat);
        this.add(this.mesh);
        light.add(this);
    }
    dispose() {
        this.mesh.geometry.dispose();
        if (!Array.isArray(this.mesh.material))
            this.mesh.material.dispose();
        else
            this.mesh.material.forEach(m => m.dispose());
        this.remove(this.mesh);
    }
    update() { }
}
class Lights {
    constructor(scene) {
        this.scene = scene;
    }
    get helper() {
        return {
            directionalLightHelper: (light, size, color) => {
                const helper = new index_3.DirectionalLightHelper(light, size, color);
                this.scene.add(helper);
                return helper;
            },
            spotLightHelper: (light, color) => {
                const helper = new index_3.SpotLightHelper(light, color);
                this.scene.add(helper);
                return helper;
            },
            pointLightHelper: (light, size, color) => new PointLightHelper(this.scene, light, size, color)
        };
    }
    directionalLight(options = {}) {
        const { color = 0xffffff, intensity = 1 } = options;
        const light = new index_2.DirectionalLight(color, intensity);
        light.castShadow = true;
        this.scene.add(light);
        return light;
    }
    hemisphereLight(options = {}) {
        const { skyColor = 0xffffff, groundColor = 0xffffff, intensity = 1 } = options;
        const light = new index_2.HemisphereLight(skyColor, groundColor, intensity);
        this.scene.add(light);
        return light;
    }
    ambientLight(options = {}) {
        const { color = 0xffffff, intensity = 1 } = options;
        const light = new index_2.AmbientLight(color, intensity);
        this.scene.add(light);
        return light;
    }
    pointLight(options = {}) {
        const { color = 0xffffff, intensity = 1, distance = 0, decay = 1 } = options;
        const light = new index_2.PointLight(color, intensity, distance, decay);
        light.castShadow = true;
        this.scene.add(light);
        return light;
    }
    spotLight(options = {}) {
        const { color = 0xffffff, intensity = 1, distance = 0, angle = Math.PI / 8, penumbra = 0, decay = 1 } = options;
        const light = new index_2.SpotLight(color, intensity, distance, angle, penumbra, decay);
        light.castShadow = true;
        this.scene.add(light);
        return light;
    }
    rectAreaLight(options = {}) {
        const { color = 0xffffff, intensity = 1, width = 10, height = 10 } = options;
        const light = new index_2.RectAreaLight(color, intensity, width, height);
        this.scene.add(light);
        return light;
    }
}
exports.default = Lights;
//# sourceMappingURL=lights.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/loaders.js":
/*!*********************************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/loaders.js ***!
  \*********************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";

/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
const index_1 = __webpack_require__(/*! @enable3d/three-wrapper/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
class Loaders {
    constructor(cache, textureAnisotropy) {
        this.cache = cache;
        this.textureAnisotropy = textureAnisotropy;
    }
    get fileLoader() {
        if (!this._fileLoader)
            this._fileLoader = new index_1.FileLoader();
        return this._fileLoader;
    }
    get imageLoader() {
        if (!this._imgLoader)
            this._imgLoader = new index_1.ImageLoader();
        return this._imgLoader;
    }
    get svgLoader() {
        if (!this._svgLoader)
            this._svgLoader = new index_1.SVGLoader();
        return this._svgLoader;
    }
    get textureLoader() {
        if (!this._textureLoader)
            this._textureLoader = new index_1.TextureLoader();
        return this._textureLoader;
    }
    get objectLoader() {
        if (!this._objectLoader)
            this._objectLoader = new index_1.ObjectLoader();
        return this._objectLoader;
    }
    get gltfLoader() {
        if (!this._gltfLoader)
            this._gltfLoader = new index_1.GLTFLoader();
        return this._gltfLoader;
    }
    get fbxLoader() {
        if (!this._fbxLoader)
            this._fbxLoader = new index_1.FBXLoader();
        return this._fbxLoader;
    }
    preload(key, url) {
        return __awaiter(this, void 0, void 0, function* () {
            this.cache.add(key, url);
            return new Promise(resolve => {
                const isModel = /\.fbx$|\.glb$|\.gltf$/.test(url);
                const isTexture = /\.jpe?g$|\.png$/.test(url);
                if (isTexture) {
                    this.textureLoader.load(url, texture => {
                        return resolve(texture);
                    });
                }
                else {
                    if (isModel)
                        this.fileLoader.setResponseType('arraybuffer');
                    this.fileLoader.load(url, file => {
                        return resolve(file);
                    });
                }
            });
        });
    }
    file(url) {
        const key = this.cache.get(url);
        url = key ? key : url;
        return new Promise(resolve => {
            this.fileLoader.load(url, file => {
                return resolve(file);
            });
        });
    }
    svg(url) {
        const key = this.cache.get(url);
        url = key ? key : url;
        return new Promise(resolve => {
            this.svgLoader.load(url, svg => {
                return resolve(svg);
            });
        });
    }
    texture(url) {
        const isBase64 = /^data:image\/[\S]+;base64,/gm.test(url);
        // we do not want to cache base64 images
        if (!isBase64) {
            const key = this.cache.get(url);
            url = key ? key : url;
        }
        return new Promise(resolve => {
            this.textureLoader.load(url, (texture) => {
                // options
                texture.anisotropy = this.textureAnisotropy;
                texture.format = index_1.RGBAFormat;
                texture.needsUpdate = true;
                resolve(texture);
            });
        });
    }
    // examples: https://github.com/mrdoob/three.js/wiki/JSON-Object-Scene-format-4
    object(url) {
        const key = this.cache.get(url);
        url = key ? key : url;
        return new Promise(resolve => {
            this.objectLoader.load(url, (json) => {
                resolve(json);
            });
        });
    }
    gltf(url) {
        const key = this.cache.get(url);
        url = key ? key : url;
        return new Promise(resolve => {
            this.gltfLoader.load(url, (gltf) => {
                resolve(gltf);
            });
        });
    }
    fbx(url) {
        const key = this.cache.get(url);
        url = key ? key : url;
        return new Promise(resolve => {
            this.fbxLoader.load(url, (fbx) => {
                resolve(fbx);
            });
        });
    }
}
exports.default = Loaders;
//# sourceMappingURL=loaders.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/misc.js":
/*!******************************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/misc.js ***!
  \******************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.TextureCube = void 0;
// misc
const water_1 = __webpack_require__(/*! @enable3d/common/dist/misc/water */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/misc/water.js");
const dist_1 = __webpack_require__(/*! @enable3d/three-wrapper/dist */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
class Misc {
    constructor(scene, renderer, factories) {
        this.scene = scene;
        this.renderer = renderer;
        this.factories = factories;
    }
    water(config = {}) {
        water_1.addWater(this.scene, this.renderer, config);
    }
    textureCube(textures) {
        if (textures.length !== 6) {
            console.log('[enable3d] You need to pass 6 urls to textureCube()');
        }
        const textureCube = new TextureCube();
        textures.forEach((texture, i) => {
            texture.wrapS = texture.wrapT = dist_1.RepeatWrapping;
            const material = this.factories.add.material({ phong: { map: texture } });
            textureCube.materials[i] = material;
        });
        return textureCube;
    }
}
exports.default = Misc;
class TextureCube {
    constructor() {
        this.materials = new Array(6);
    }
    get texture() {
        return {
            left: this.getTexture(0),
            right: this.getTexture(1),
            up: this.getTexture(2),
            down: this.getTexture(3),
            front: this.getTexture(4),
            back: this.getTexture(5)
        };
    }
    getTexture(i) {
        // @ts-ignore
        return this.materials[i].map;
    }
}
exports.TextureCube = TextureCube;
//# sourceMappingURL=misc.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/mixers.js":
/*!********************************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/mixers.js ***!
  \********************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
const types_1 = __webpack_require__(/*! @enable3d/common/dist/types */ "./node_modules/enable3d/node_modules/@enable3d/common/dist/types.js");
class Mixers {
    constructor() {
        this._mixers = [];
    }
    /**
     * Create an Animation Mixer and ads it to the mixers array
     */
    animationMixer(root) {
        const mixer = new types_1.AnimationMixer(root);
        this.mixers.add(mixer);
        return mixer;
    }
    get mixers() {
        return {
            create: (root) => this.animationMixer(root),
            add: (animationMixer) => this._mixers.push(animationMixer),
            get: () => this._mixers,
            update: (delta) => { var _a; return (_a = this._mixers) === null || _a === void 0 ? void 0 : _a.forEach(mixer => mixer.update(delta / 1000)); }
        };
    }
}
exports.default = Mixers;
//# sourceMappingURL=mixers.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/transform.js":
/*!***********************************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/transform.js ***!
  \***********************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
const index_1 = __webpack_require__(/*! @enable3d/three-wrapper/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
const index_2 = __webpack_require__(/*! @enable3d/three-wrapper/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */
class Transform {
    constructor(camera, renderer) {
        this.camera = camera;
        this.renderer = renderer;
    }
    geometryToBufferGeometry(geometry) {
        // @ts-ignore
        if (geometry.isGeometry)
            return new index_1.BufferGeometry().fromGeometry(geometry);
        else
            return geometry;
    }
    bufferGeometryToGeometry(bufferGeometry) {
        // @ts-ignore
        if (bufferGeometry.isBufferGeometry)
            return new index_1.Geometry().fromBufferGeometry(bufferGeometry);
        else
            return bufferGeometry;
    }
    /**
     * Transforms your svg files to paths.
     */
    fromSVGtoShape(svg, isCCW = false, noHoles) {
        if (svg) {
            const svgLoader = new index_2.SVGLoader();
            const shapes = [];
            svgLoader.parse(svg).paths.forEach(path => {
                path.toShapes(isCCW, noHoles).forEach(shape => {
                    shapes.push(shape);
                });
            });
            return shapes;
        }
        return [];
    }
    from3dto2d(position) {
        const vector3 = new index_1.Vector3(position.x, position.y, position.z);
        const canvas = this.renderer.domElement;
        // map to normalized device coordinate (NDC) space
        this.camera.updateMatrixWorld();
        vector3.project(this.camera);
        // map to 2D screen space
        const x = Math.round((vector3.x + 1) * (canvas.width / 2));
        const y = Math.round((-vector3.y + 1) * (canvas.height / 2));
        return new index_1.Vector2(x, y);
    }
    /**
     *
     * @param x X coordinate in normalized device coordinate (NDC) (-1 to +1).
     * @param y Y coordinate in normalized device coordinate (NDC) (-1 to +1).
     * @param distanceFromCamera The distance from the camera.
     */
    from2dto3d(x, y, distanceFromCamera) {
        var _a;
        // initialize temporary variables
        if (!this.tmpPlane) {
            const geo = new index_1.PlaneBufferGeometry(10000, 10000);
            const mat = new index_1.MeshBasicMaterial({ transparent: true, opacity: 0.25 });
            this.tmpPlane = new index_1.Mesh(geo, mat);
            this.tmpPlane.name = '_tmp_raycast_plane';
        }
        if (!this.tmpRaycaster)
            this.tmpRaycaster = new index_1.Raycaster();
        if (!this.tmpVector3)
            this.tmpVector3 = new index_1.Vector3();
        // holds the position we want to return later
        let position;
        // add plane parallel to camera
        this.tmpPlane.setRotationFromEuler(this.camera.rotation);
        const p = this.camera.position;
        this.tmpPlane.position.set(p.x, p.y, p.z);
        // adjust the distance of the plane
        this.camera.getWorldDirection(this.tmpVector3);
        this.tmpPlane.position.add(this.tmpVector3.clone().multiplyScalar(distanceFromCamera));
        this.tmpPlane.updateMatrix();
        this.tmpPlane.updateMatrixWorld(true);
        // raycast
        this.tmpRaycaster.setFromCamera({ x, y }, this.camera);
        // check intersection with plane
        const intersects = this.tmpRaycaster.intersectObjects([this.tmpPlane]);
        if (((_a = intersects[0]) === null || _a === void 0 ? void 0 : _a.object.name) === '_tmp_raycast_plane')
            position = intersects[0].point;
        return position;
    }
}
exports.default = Transform;
//# sourceMappingURL=transform.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/warpSpeed.js":
/*!***********************************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/warpSpeed.js ***!
  \***********************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
const index_1 = __webpack_require__(/*! @enable3d/three-wrapper/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
const THREE = __webpack_require__(/*! @enable3d/three-wrapper/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
class WarpSpeed {
    constructor(scene, renderer, camera, lights, physics, load, factories) {
        this.scene = scene;
        this.renderer = renderer;
        this.camera = camera;
        this.lights = lights;
        this.physics = physics;
        this.load = load;
        this.factories = factories;
    }
    /**
     * It takes took long to setup the third dimension your self? Get started with warp speed by using this function.
     * @param features Pass the features you want to setup.
     */
    warpSpeed(...features) {
        return __awaiter(this, void 0, void 0, function* () {
            let Features = {};
            // test for negative features
            const negativeFeatures = features.filter(feature => /^-\w+/.test(feature));
            const hasNegativeFeatures = negativeFeatures.length > 0 ? true : false;
            // add all features
            if (features.length === 0 || hasNegativeFeatures)
                features = ['light', 'camera', 'lookAtCenter', 'ground', 'grid', 'orbitControls', 'fog', 'sky'];
            // remove the negative features
            if (hasNegativeFeatures) {
                const featuresToRemove = negativeFeatures.map(feature => feature.substr(1));
                featuresToRemove.forEach(feature => {
                    // @ts-ignore
                    const index = features.indexOf(feature);
                    features.splice(index, 1);
                });
            }
            // TODO: add fog
            if (features.includes('fog')) {
            }
            if (features.includes('sky')) {
                // https://github.com/mrdoob/three.js/blob/master/examples/webgl_lights_hemisphere.html
                // SKYDOME
                const vertexShader = [
                    'varying vec3 vWorldPosition;',
                    '',
                    'void main() {',
                    '',
                    'vec4 worldPosition = modelMatrix * vec4( position, 1.0 );',
                    'vWorldPosition = worldPosition.xyz;',
                    '',
                    'gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );',
                    '',
                    '}'
                ].join('\n');
                const fragmentShader = [
                    'uniform vec3 topColor;',
                    'uniform vec3 bottomColor;',
                    'uniform float offset;',
                    'uniform float exponent;',
                    '',
                    'varying vec3 vWorldPosition;',
                    '',
                    'void main() {',
                    '',
                    'float h = normalize( vWorldPosition + offset ).y;',
                    'gl_FragColor = vec4( mix( bottomColor, topColor, max( pow( max( h , 0.0), exponent ), 0.0 ) ), 1.0 );',
                    '',
                    '}'
                ].join('\n');
                const uniforms = {
                    topColor: { value: new THREE.Color(0x0077ff) },
                    bottomColor: { value: new THREE.Color(0xedf5ff) },
                    offset: { value: 33 },
                    exponent: { value: 0.6 }
                };
                var skyGeo = new THREE.SphereBufferGeometry(500, 32, 15);
                var skyMat = new THREE.ShaderMaterial({
                    uniforms: uniforms,
                    vertexShader: vertexShader,
                    fragmentShader: fragmentShader,
                    side: THREE.BackSide
                });
                var sky = new THREE.Mesh(skyGeo, skyMat);
                this.scene.add(sky);
            }
            if (features.includes('camera')) {
                this.camera.position.set(0, 6, 12);
                Features = Object.assign({ camera: this.camera }, Features);
            }
            if (features.includes('light')) {
                const intensity = 0.4;
                const hemisphereLight = this.lights.hemisphereLight({ skyColor: 0xffffff, groundColor: 0x000000, intensity });
                const ambientLight = this.lights.ambientLight({ color: 0xffffff, intensity });
                const directionalLight = this.lights.directionalLight({ color: 0xffffff, intensity });
                directionalLight.position.set(100, 200, 50);
                const d = 20;
                directionalLight.shadow.camera.top = d;
                directionalLight.shadow.camera.bottom = -d;
                directionalLight.shadow.camera.left = -d;
                directionalLight.shadow.camera.right = d;
                directionalLight.shadow.mapSize.set(1024, 1024);
                // this.directionalLight = light
                const lights = {
                    ambientLight,
                    directionalLight,
                    hemisphereLight
                };
                Features = Object.assign({ lights }, Features);
            }
            if (features.includes('lookAtCenter')) {
                this.camera.lookAt(this.scene.position);
            }
            if (features.includes('ground')) {
                // grid (texture)
                const addGrid = features.includes('grid');
                const gridData = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOnAAADusBZ+q87AAAAJtJREFUeJzt0EENwDAAxLDbNP6UOxh+NEYQ5dl2drFv286598GrA7QG6ACtATpAa4AO0BqgA7QG6ACtATpAa4AO0BqgA7QG6ACtATpAa4AO0BqgA7QG6ACtATpAa4AO0BqgA7QG6ACtATpAa4AO0BqgA7QG6ACtATpAa4AO0BqgA7QG6ACtATpAa4AO0BqgA7QG6ACtATpAu37AD8eaBH5JQdVbAAAAAElFTkSuQmCC';
                const texture = yield this.load.texture(gridData);
                texture.wrapS = texture.wrapT = THREE.RepeatWrapping;
                texture.repeat.set(21, 21);
                // ground
                const geometry = { name: 'ground', width: 21, height: 21, depth: 1, y: -0.5 };
                const material = {
                    phong: { map: addGrid ? texture : null, transparent: true, opacity: 0.8, color: 0xffffff }
                };
                let ground;
                if (window.__loadPhysics) {
                    ground = this.physics.add.ground(geometry, material);
                    ground.body.setRestitution(1);
                }
                else {
                    ground = this.factories.add.ground(geometry, material);
                }
                ground.receiveShadow = true;
                Features = Object.assign({ ground }, Features);
            }
            if (features.includes('orbitControls')) {
                // for phaser
                // this.root is the phaser scene (scene3D)
                // this.root.scale.parent instead of this.renderer.domElement
                const orbitControls = new index_1.OrbitControls(this.camera, document.getElementById('enable3d-phaser-canvas') || this.renderer.domElement);
                Features = Object.assign({ orbitControls }, Features);
            }
            return Features;
        });
    }
}
exports.default = WarpSpeed;
//# sourceMappingURL=warpSpeed.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/webxr.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/plugins/webxr.js ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */
Object.defineProperty(exports, "__esModule", ({ value: true }));
const THREE = __webpack_require__(/*! @enable3d/three-wrapper/dist/index */ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js");
class WebXR {
    constructor(_renderer, _scene, _camera) {
        // https://medium.com/samsung-internet-dev/vr-locomotion-740dafa85914
        this._renderer = _renderer;
        this._scene = _scene;
        this._camera = _camera;
        this.controllerModelFactory = new THREE.XRControllerModelFactory();
        // const geo = new THREE.SphereGeometry(0.5)
        // const mat = new THREE.MeshLambertMaterial({ color: 0xff0000 })
        // this.dot = new THREE.Mesh(geo, mat)
        // this.dot.position.set(0, 1, 0)
        this.cameraGroup = new THREE.Group();
        this.cameraGroup.add(_camera);
        _scene.add(this.cameraGroup);
        _renderer.xr.enabled = true;
        // add vr button
        const vrButton = THREE.VRButton.createButton(_renderer);
        vrButton.style.cssText += 'background: rgba(0, 0, 0, 0.8); ';
        document.body.appendChild(vrButton);
    }
    get isPresenting() {
        var _a, _b;
        return !!((_b = (_a = this._renderer) === null || _a === void 0 ? void 0 : _a.xr) === null || _b === void 0 ? void 0 : _b.isPresenting);
    }
    getController(id) {
        const controller = this._renderer.xr.getController(id);
        this.cameraGroup.add(controller);
        return controller;
    }
    getControllerGrip(id) {
        const controllerGrip = this._renderer.xr.getControllerGrip(id);
        const model = this.controllerModelFactory.createControllerModel(controllerGrip);
        controllerGrip.add(model);
        this.cameraGroup.add(controllerGrip);
        return controllerGrip;
    }
    getControllerRay(data) {
        // https://github.com/mrdoob/three.js/blob/master/examples/webxr_vr_ballshooter.html
        const { targetRayMode } = data;
        if (targetRayMode === 'tracked-pointer') {
            let geometry = new THREE.BufferGeometry();
            geometry.setAttribute('position', new THREE.Float32BufferAttribute([0, 0, 0, 0, 0, -1], 3));
            geometry.setAttribute('color', new THREE.Float32BufferAttribute([1, 0, 0, 1, 1, 1], 3));
            let material = new THREE.LineBasicMaterial({
                vertexColors: true
            });
            return new THREE.Line(geometry, material);
        }
        if (targetRayMode === 'gaze') {
            let geometry = new THREE.RingBufferGeometry(0.02, 0.04, 32).translate(0, 0, -1);
            let material = new THREE.MeshBasicMaterial({ color: 'red', opacity: 0.5, transparent: true });
            return new THREE.Mesh(geometry, material);
        }
        return;
    }
    get camera() {
        return this.WebXRCamera;
    }
    get WebXRCamera() {
        var _a;
        return {
            group: this.cameraGroup,
            position: (_a = this.cameraGroup) === null || _a === void 0 ? void 0 : _a.position,
            rotation: this.isPresenting ? this._renderer.xr.getCamera(this._camera).rotation : undefined,
            getWorldDirection: (target) => this.isPresenting ? this._renderer.xr.getCamera(this._camera).getWorldDirection(target) : undefined
        };
    }
}
exports.default = WebXR;
//# sourceMappingURL=webxr.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/version.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/three-graphics/dist/version.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.VERSION = void 0;
exports.VERSION = '0.21.0';
//# sourceMappingURL=version.js.map

/***/ }),

/***/ "./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/enable3d/node_modules/@enable3d/three-wrapper/dist/index.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

!function(t,e){for(var n in e)t[n]=e[n]}(exports,function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=4)}([function(t,e,n){"use strict";n.r(e),n.d(e,"ACESFilmicToneMapping",(function(){return nt})),n.d(e,"AddEquation",(function(){return T})),n.d(e,"AddOperation",(function(){return K})),n.d(e,"AdditiveAnimationBlendMode",(function(){return Xe})),n.d(e,"AdditiveBlending",(function(){return w})),n.d(e,"AlphaFormat",(function(){return Bt})),n.d(e,"AlwaysDepth",(function(){return k})),n.d(e,"AlwaysStencilFunc",(function(){return Sn})),n.d(e,"AmbientLight",(function(){return Lh})),n.d(e,"AmbientLightProbe",(function(){return Jh})),n.d(e,"AnimationClip",(function(){return Du})),n.d(e,"AnimationLoader",(function(){return Vu})),n.d(e,"AnimationMixer",(function(){return Ad})),n.d(e,"AnimationObjectGroup",(function(){return Td})),n.d(e,"AnimationUtils",(function(){return _u})),n.d(e,"ArcCurve",(function(){return Ku})),n.d(e,"ArrayCamera",(function(){return Ps})),n.d(e,"ArrowHelper",(function(){return gp})),n.d(e,"Audio",(function(){return sd})),n.d(e,"AudioAnalyser",(function(){return pd})),n.d(e,"AudioContext",(function(){return qh})),n.d(e,"AudioListener",(function(){return ad})),n.d(e,"AudioLoader",(function(){return Yh})),n.d(e,"AxesHelper",(function(){return vp})),n.d(e,"AxisHelper",(function(){return vf})),n.d(e,"BackSide",(function(){return m})),n.d(e,"BasicDepthPacking",(function(){return on})),n.d(e,"BasicShadowMap",(function(){return u})),n.d(e,"BinaryTextureLoader",(function(){return _f})),n.d(e,"Bone",(function(){return lc})),n.d(e,"BooleanKeyframeTrack",(function(){return Lu})),n.d(e,"BoundingBoxHelper",(function(){return yf})),n.d(e,"Box2",(function(){return Fd})),n.d(e,"Box3",(function(){return tr})),n.d(e,"Box3Helper",(function(){return hp})),n.d(e,"BoxBufferGeometry",(function(){return mo})),n.d(e,"BoxGeometry",(function(){return Wc})),n.d(e,"BoxHelper",(function(){return up})),n.d(e,"BufferAttribute",(function(){return Ti})),n.d(e,"BufferGeometry",(function(){return qi})),n.d(e,"BufferGeometryLoader",(function(){return Bh})),n.d(e,"ByteType",(function(){return Tt})),n.d(e,"Cache",(function(){return Fu})),n.d(e,"Camera",(function(){return bo})),n.d(e,"CameraHelper",(function(){return sp})),n.d(e,"CanvasRenderer",(function(){return Tf})),n.d(e,"CanvasTexture",(function(){return Uc})),n.d(e,"CatmullRomCurve3",(function(){return rh})),n.d(e,"CineonToneMapping",(function(){return et})),n.d(e,"CircleBufferGeometry",(function(){return Xc})),n.d(e,"CircleGeometry",(function(){return qc})),n.d(e,"ClampToEdgeWrapping",(function(){return dt})),n.d(e,"Clock",(function(){return td})),n.d(e,"ClosedSplineCurve3",(function(){return ff})),n.d(e,"Color",(function(){return yi})),n.d(e,"ColorKeyframeTrack",(function(){return Ru})),n.d(e,"CompressedTexture",(function(){return Fc})),n.d(e,"CompressedTextureLoader",(function(){return ju})),n.d(e,"ConeBufferGeometry",(function(){return Kc})),n.d(e,"ConeGeometry",(function(){return Jc})),n.d(e,"CubeCamera",(function(){return _o})),n.d(e,"CubeGeometry",(function(){return Wc})),n.d(e,"CubeReflectionMapping",(function(){return ot})),n.d(e,"CubeRefractionMapping",(function(){return at})),n.d(e,"CubeTexture",(function(){return Mo})),n.d(e,"CubeTextureLoader",(function(){return Xu})),n.d(e,"CubeUVReflectionMapping",(function(){return lt})),n.d(e,"CubeUVRefractionMapping",(function(){return ut})),n.d(e,"CubicBezierCurve",(function(){return sh})),n.d(e,"CubicBezierCurve3",(function(){return ch})),n.d(e,"CubicInterpolant",(function(){return Su})),n.d(e,"CullFaceBack",(function(){return s})),n.d(e,"CullFaceFront",(function(){return c})),n.d(e,"CullFaceFrontBack",(function(){return l})),n.d(e,"CullFaceNone",(function(){return a})),n.d(e,"Curve",(function(){return Zu})),n.d(e,"CurvePath",(function(){return mh})),n.d(e,"CustomBlending",(function(){return S})),n.d(e,"CustomToneMapping",(function(){return rt})),n.d(e,"CylinderBufferGeometry",(function(){return Yc})),n.d(e,"CylinderGeometry",(function(){return Zc})),n.d(e,"Cylindrical",(function(){return Dd})),n.d(e,"DataTexture",(function(){return To})),n.d(e,"DataTexture2DArray",(function(){return Zo})),n.d(e,"DataTexture3D",(function(){return Jo})),n.d(e,"DataTextureLoader",(function(){return qu})),n.d(e,"DataUtils",(function(){return bp})),n.d(e,"DecrementStencilOp",(function(){return pn})),n.d(e,"DecrementWrapStencilOp",(function(){return mn})),n.d(e,"DefaultLoadingManager",(function(){return zu})),n.d(e,"DepthFormat",(function(){return kt})),n.d(e,"DepthStencilFormat",(function(){return Vt})),n.d(e,"DepthTexture",(function(){return zc})),n.d(e,"DirectionalLight",(function(){return Ah})),n.d(e,"DirectionalLightHelper",(function(){return ip})),n.d(e,"DiscreteInterpolant",(function(){return Eu})),n.d(e,"DodecahedronBufferGeometry",(function(){return $c})),n.d(e,"DodecahedronGeometry",(function(){return tl})),n.d(e,"DoubleSide",(function(){return g})),n.d(e,"DstAlphaFactor",(function(){return B})),n.d(e,"DstColorFactor",(function(){return U})),n.d(e,"DynamicBufferAttribute",(function(){return rf})),n.d(e,"DynamicCopyUsage",(function(){return In})),n.d(e,"DynamicDrawUsage",(function(){return En})),n.d(e,"DynamicReadUsage",(function(){return Rn})),n.d(e,"EdgesGeometry",(function(){return ol})),n.d(e,"EdgesHelper",(function(){return xf})),n.d(e,"EllipseCurve",(function(){return Ju})),n.d(e,"EqualDepth",(function(){return W})),n.d(e,"EqualStencilFunc",(function(){return xn})),n.d(e,"EquirectangularReflectionMapping",(function(){return st})),n.d(e,"EquirectangularRefractionMapping",(function(){return ct})),n.d(e,"Euler",(function(){return Or})),n.d(e,"EventDispatcher",(function(){return Bn})),n.d(e,"ExtrudeBufferGeometry",(function(){return Nl})),n.d(e,"ExtrudeGeometry",(function(){return Bl})),n.d(e,"Face3",(function(){return xi})),n.d(e,"Face4",(function(){return kp})),n.d(e,"FaceColors",(function(){return Xp})),n.d(e,"FileLoader",(function(){return ku})),n.d(e,"FlatShading",(function(){return v})),n.d(e,"Float16BufferAttribute",(function(){return Oi})),n.d(e,"Float32Attribute",(function(){return df})),n.d(e,"Float32BufferAttribute",(function(){return Ni})),n.d(e,"Float64Attribute",(function(){return pf})),n.d(e,"Float64BufferAttribute",(function(){return Di})),n.d(e,"FloatType",(function(){return Pt})),n.d(e,"Fog",(function(){return Us})),n.d(e,"FogExp2",(function(){return Fs})),n.d(e,"Font",(function(){return Vh})),n.d(e,"FontLoader",(function(){return Wh})),n.d(e,"FrontSide",(function(){return f})),n.d(e,"Frustum",(function(){return Lo})),n.d(e,"GLBufferAttribute",(function(){return Pd})),n.d(e,"GLSL1",(function(){return Nn})),n.d(e,"GLSL3",(function(){return Dn})),n.d(e,"GammaEncoding",(function(){return Qe})),n.d(e,"Geometry",(function(){return jc})),n.d(e,"GeometryUtils",(function(){return Sf})),n.d(e,"GreaterDepth",(function(){return q})),n.d(e,"GreaterEqualDepth",(function(){return X})),n.d(e,"GreaterEqualStencilFunc",(function(){return Mn})),n.d(e,"GreaterStencilFunc",(function(){return wn})),n.d(e,"GridHelper",(function(){return $d})),n.d(e,"Group",(function(){return Cs})),n.d(e,"HalfFloatType",(function(){return Ct})),n.d(e,"HemisphereLight",(function(){return xh})),n.d(e,"HemisphereLightHelper",(function(){return Qd})),n.d(e,"HemisphereLightProbe",(function(){return Zh})),n.d(e,"IcosahedronBufferGeometry",(function(){return Fl})),n.d(e,"IcosahedronGeometry",(function(){return Ul})),n.d(e,"ImageBitmapLoader",(function(){return Hh})),n.d(e,"ImageLoader",(function(){return Wu})),n.d(e,"ImageUtils",(function(){return Vn})),n.d(e,"ImmediateRenderObject",(function(){return Hd})),n.d(e,"IncrementStencilOp",(function(){return dn})),n.d(e,"IncrementWrapStencilOp",(function(){return fn})),n.d(e,"InstancedBufferAttribute",(function(){return Dh})),n.d(e,"InstancedBufferGeometry",(function(){return Nh})),n.d(e,"InstancedInterleavedBuffer",(function(){return Rd})),n.d(e,"InstancedMesh",(function(){return vc})),n.d(e,"Int16Attribute",(function(){return cf})),n.d(e,"Int16BufferAttribute",(function(){return Ri})),n.d(e,"Int32Attribute",(function(){return uf})),n.d(e,"Int32BufferAttribute",(function(){return Ci})),n.d(e,"Int8Attribute",(function(){return of})),n.d(e,"Int8BufferAttribute",(function(){return Ei})),n.d(e,"IntType",(function(){return Lt})),n.d(e,"InterleavedBuffer",(function(){return Gs})),n.d(e,"InterleavedBufferAttribute",(function(){return ks})),n.d(e,"Interpolant",(function(){return Mu})),n.d(e,"InterpolateDiscrete",(function(){return ze})),n.d(e,"InterpolateLinear",(function(){return Ge})),n.d(e,"InterpolateSmooth",(function(){return He})),n.d(e,"InvertStencilOp",(function(){return gn})),n.d(e,"JSONLoader",(function(){return Ef})),n.d(e,"KeepStencilOp",(function(){return un})),n.d(e,"KeyframeTrack",(function(){return Au})),n.d(e,"LOD",(function(){return sc})),n.d(e,"LatheBufferGeometry",(function(){return zl})),n.d(e,"LatheGeometry",(function(){return Gl})),n.d(e,"Layers",(function(){return Br})),n.d(e,"LensFlare",(function(){return Lf})),n.d(e,"LessDepth",(function(){return V})),n.d(e,"LessEqualDepth",(function(){return j})),n.d(e,"LessEqualStencilFunc",(function(){return bn})),n.d(e,"LessStencilFunc",(function(){return yn})),n.d(e,"Light",(function(){return yh})),n.d(e,"LightProbe",(function(){return Ch})),n.d(e,"Line",(function(){return Sc})),n.d(e,"Line3",(function(){return Gd})),n.d(e,"LineBasicMaterial",(function(){return yc})),n.d(e,"LineCurve",(function(){return lh})),n.d(e,"LineCurve3",(function(){return uh})),n.d(e,"LineDashedMaterial",(function(){return bu})),n.d(e,"LineLoop",(function(){return Lc})),n.d(e,"LinePieces",(function(){return jp})),n.d(e,"LineSegments",(function(){return Ac})),n.d(e,"LineStrip",(function(){return Vp})),n.d(e,"LinearEncoding",(function(){return Je})),n.d(e,"LinearFilter",(function(){return xt})),n.d(e,"LinearInterpolant",(function(){return Tu})),n.d(e,"LinearMipMapLinearFilter",(function(){return Mt})),n.d(e,"LinearMipMapNearestFilter",(function(){return wt})),n.d(e,"LinearMipmapLinearFilter",(function(){return _t})),n.d(e,"LinearMipmapNearestFilter",(function(){return bt})),n.d(e,"LinearToneMapping",(function(){return $})),n.d(e,"Loader",(function(){return Gu})),n.d(e,"LoaderUtils",(function(){return Oh})),n.d(e,"LoadingManager",(function(){return Uu})),n.d(e,"LogLuvEncoding",(function(){return tn})),n.d(e,"LoopOnce",(function(){return Be})),n.d(e,"LoopPingPong",(function(){return Ue})),n.d(e,"LoopRepeat",(function(){return Fe})),n.d(e,"LuminanceAlphaFormat",(function(){return Gt})),n.d(e,"LuminanceFormat",(function(){return zt})),n.d(e,"MOUSE",(function(){return i})),n.d(e,"Material",(function(){return wi})),n.d(e,"MaterialLoader",(function(){return Ih})),n.d(e,"Math",(function(){return zn})),n.d(e,"MathUtils",(function(){return zn})),n.d(e,"Matrix3",(function(){return Hn})),n.d(e,"Matrix4",(function(){return Tr})),n.d(e,"MaxEquation",(function(){return R})),n.d(e,"Mesh",(function(){return ho})),n.d(e,"MeshBasicMaterial",(function(){return _i})),n.d(e,"MeshDepthMaterial",(function(){return Ss})),n.d(e,"MeshDistanceMaterial",(function(){return Ts})),n.d(e,"MeshFaceMaterial",(function(){return Yp})),n.d(e,"MeshLambertMaterial",(function(){return yu})),n.d(e,"MeshMatcapMaterial",(function(){return xu})),n.d(e,"MeshNormalMaterial",(function(){return vu})),n.d(e,"MeshPhongMaterial",(function(){return mu})),n.d(e,"MeshPhysicalMaterial",(function(){return fu})),n.d(e,"MeshStandardMaterial",(function(){return pu})),n.d(e,"MeshToonMaterial",(function(){return gu})),n.d(e,"MinEquation",(function(){return L})),n.d(e,"MirroredRepeatWrapping",(function(){return pt})),n.d(e,"MixOperation",(function(){return J})),n.d(e,"MultiMaterial",(function(){return Zp})),n.d(e,"MultiplyBlending",(function(){return M})),n.d(e,"MultiplyOperation",(function(){return Z})),n.d(e,"NearestFilter",(function(){return ft})),n.d(e,"NearestMipMapLinearFilter",(function(){return yt})),n.d(e,"NearestMipMapNearestFilter",(function(){return gt})),n.d(e,"NearestMipmapLinearFilter",(function(){return vt})),n.d(e,"NearestMipmapNearestFilter",(function(){return mt})),n.d(e,"NeverDepth",(function(){return H})),n.d(e,"NeverStencilFunc",(function(){return vn})),n.d(e,"NoBlending",(function(){return x})),n.d(e,"NoColors",(function(){return Wp})),n.d(e,"NoToneMapping",(function(){return Q})),n.d(e,"NormalAnimationBlendMode",(function(){return We})),n.d(e,"NormalBlending",(function(){return b})),n.d(e,"NotEqualDepth",(function(){return Y})),n.d(e,"NotEqualStencilFunc",(function(){return _n})),n.d(e,"NumberKeyframeTrack",(function(){return Pu})),n.d(e,"Object3D",(function(){return Jr})),n.d(e,"ObjectLoader",(function(){return Fh})),n.d(e,"ObjectSpaceNormalMap",(function(){return cn})),n.d(e,"OctahedronBufferGeometry",(function(){return Hl})),n.d(e,"OctahedronGeometry",(function(){return kl})),n.d(e,"OneFactor",(function(){return C})),n.d(e,"OneMinusDstAlphaFactor",(function(){return F})),n.d(e,"OneMinusDstColorFactor",(function(){return z})),n.d(e,"OneMinusSrcAlphaFactor",(function(){return D})),n.d(e,"OneMinusSrcColorFactor",(function(){return O})),n.d(e,"OrthographicCamera",(function(){return Th})),n.d(e,"PCFShadowMap",(function(){return h})),n.d(e,"PCFSoftShadowMap",(function(){return d})),n.d(e,"PMREMGenerator",(function(){return Op})),n.d(e,"ParametricBufferGeometry",(function(){return Vl})),n.d(e,"ParametricGeometry",(function(){return jl})),n.d(e,"Particle",(function(){return Kp})),n.d(e,"ParticleBasicMaterial",(function(){return tf})),n.d(e,"ParticleSystem",(function(){return Qp})),n.d(e,"ParticleSystemMaterial",(function(){return ef})),n.d(e,"Path",(function(){return gh})),n.d(e,"PerspectiveCamera",(function(){return wo})),n.d(e,"Plane",(function(){return ti})),n.d(e,"PlaneBufferGeometry",(function(){return Co})),n.d(e,"PlaneGeometry",(function(){return Wl})),n.d(e,"PlaneHelper",(function(){return dp})),n.d(e,"PointCloud",(function(){return Jp})),n.d(e,"PointCloudMaterial",(function(){return $p})),n.d(e,"PointLight",(function(){return Sh})),n.d(e,"PointLightHelper",(function(){return Yd})),n.d(e,"Points",(function(){return Nc})),n.d(e,"PointsMaterial",(function(){return Rc})),n.d(e,"PolarGridHelper",(function(){return tp})),n.d(e,"PolyhedronBufferGeometry",(function(){return Qc})),n.d(e,"PolyhedronGeometry",(function(){return Xl})),n.d(e,"PositionalAudio",(function(){return dd})),n.d(e,"PropertyBinding",(function(){return Sd})),n.d(e,"PropertyMixer",(function(){return fd})),n.d(e,"QuadraticBezierCurve",(function(){return hh})),n.d(e,"QuadraticBezierCurve3",(function(){return dh})),n.d(e,"Quaternion",(function(){return Jn})),n.d(e,"QuaternionKeyframeTrack",(function(){return Iu})),n.d(e,"QuaternionLinearInterpolant",(function(){return Cu})),n.d(e,"REVISION",(function(){return r})),n.d(e,"RGBADepthPacking",(function(){return an})),n.d(e,"RGBAFormat",(function(){return Ut})),n.d(e,"RGBAIntegerFormat",(function(){return Zt})),n.d(e,"RGBA_ASTC_10x10_Format",(function(){return ye})),n.d(e,"RGBA_ASTC_10x5_Format",(function(){return me})),n.d(e,"RGBA_ASTC_10x6_Format",(function(){return ge})),n.d(e,"RGBA_ASTC_10x8_Format",(function(){return ve})),n.d(e,"RGBA_ASTC_12x10_Format",(function(){return xe})),n.d(e,"RGBA_ASTC_12x12_Format",(function(){return be})),n.d(e,"RGBA_ASTC_4x4_Format",(function(){return se})),n.d(e,"RGBA_ASTC_5x4_Format",(function(){return ce})),n.d(e,"RGBA_ASTC_5x5_Format",(function(){return le})),n.d(e,"RGBA_ASTC_6x5_Format",(function(){return ue})),n.d(e,"RGBA_ASTC_6x6_Format",(function(){return he})),n.d(e,"RGBA_ASTC_8x5_Format",(function(){return de})),n.d(e,"RGBA_ASTC_8x6_Format",(function(){return pe})),n.d(e,"RGBA_ASTC_8x8_Format",(function(){return fe})),n.d(e,"RGBA_BPTC_Format",(function(){return we})),n.d(e,"RGBA_ETC2_EAC_Format",(function(){return ae})),n.d(e,"RGBA_PVRTC_2BPPV1_Format",(function(){return re})),n.d(e,"RGBA_PVRTC_4BPPV1_Format",(function(){return ne})),n.d(e,"RGBA_S3TC_DXT1_Format",(function(){return Kt})),n.d(e,"RGBA_S3TC_DXT3_Format",(function(){return Qt})),n.d(e,"RGBA_S3TC_DXT5_Format",(function(){return $t})),n.d(e,"RGBDEncoding",(function(){return rn})),n.d(e,"RGBEEncoding",(function(){return $e})),n.d(e,"RGBEFormat",(function(){return Ht})),n.d(e,"RGBFormat",(function(){return Ft})),n.d(e,"RGBIntegerFormat",(function(){return Yt})),n.d(e,"RGBM16Encoding",(function(){return nn})),n.d(e,"RGBM7Encoding",(function(){return en})),n.d(e,"RGB_ETC1_Format",(function(){return ie})),n.d(e,"RGB_ETC2_Format",(function(){return oe})),n.d(e,"RGB_PVRTC_2BPPV1_Format",(function(){return ee})),n.d(e,"RGB_PVRTC_4BPPV1_Format",(function(){return te})),n.d(e,"RGB_S3TC_DXT1_Format",(function(){return Jt})),n.d(e,"RGFormat",(function(){return Xt})),n.d(e,"RGIntegerFormat",(function(){return qt})),n.d(e,"RawShaderMaterial",(function(){return du})),n.d(e,"Ray",(function(){return Sr})),n.d(e,"Raycaster",(function(){return Cd})),n.d(e,"RectAreaLight",(function(){return Rh})),n.d(e,"RedFormat",(function(){return jt})),n.d(e,"RedIntegerFormat",(function(){return Wt})),n.d(e,"ReinhardToneMapping",(function(){return tt})),n.d(e,"RepeatWrapping",(function(){return ht})),n.d(e,"ReplaceStencilOp",(function(){return hn})),n.d(e,"ReverseSubtractEquation",(function(){return A})),n.d(e,"RingBufferGeometry",(function(){return ql})),n.d(e,"RingGeometry",(function(){return Yl})),n.d(e,"SRGB8_ALPHA8_ASTC_10x10_Format",(function(){return Oe})),n.d(e,"SRGB8_ALPHA8_ASTC_10x5_Format",(function(){return Pe})),n.d(e,"SRGB8_ALPHA8_ASTC_10x6_Format",(function(){return Ce})),n.d(e,"SRGB8_ALPHA8_ASTC_10x8_Format",(function(){return Ie})),n.d(e,"SRGB8_ALPHA8_ASTC_12x10_Format",(function(){return Ne})),n.d(e,"SRGB8_ALPHA8_ASTC_12x12_Format",(function(){return De})),n.d(e,"SRGB8_ALPHA8_ASTC_4x4_Format",(function(){return _e})),n.d(e,"SRGB8_ALPHA8_ASTC_5x4_Format",(function(){return Me})),n.d(e,"SRGB8_ALPHA8_ASTC_5x5_Format",(function(){return Se})),n.d(e,"SRGB8_ALPHA8_ASTC_6x5_Format",(function(){return Te})),n.d(e,"SRGB8_ALPHA8_ASTC_6x6_Format",(function(){return Ee})),n.d(e,"SRGB8_ALPHA8_ASTC_8x5_Format",(function(){return Ae})),n.d(e,"SRGB8_ALPHA8_ASTC_8x6_Format",(function(){return Le})),n.d(e,"SRGB8_ALPHA8_ASTC_8x8_Format",(function(){return Re})),n.d(e,"Scene",(function(){return zs})),n.d(e,"SceneUtils",(function(){return Af})),n.d(e,"ShaderChunk",(function(){return Io})),n.d(e,"ShaderLib",(function(){return No})),n.d(e,"ShaderMaterial",(function(){return xo})),n.d(e,"ShadowMaterial",(function(){return hu})),n.d(e,"Shape",(function(){return vh})),n.d(e,"ShapeBufferGeometry",(function(){return Zl})),n.d(e,"ShapeGeometry",(function(){return Jl})),n.d(e,"ShapePath",(function(){return kh})),n.d(e,"ShapeUtils",(function(){return Cl})),n.d(e,"ShortType",(function(){return Et})),n.d(e,"Skeleton",(function(){return dc})),n.d(e,"SkeletonHelper",(function(){return qd})),n.d(e,"SkinnedMesh",(function(){return cc})),n.d(e,"SmoothShading",(function(){return y})),n.d(e,"Sphere",(function(){return gr})),n.d(e,"SphereBufferGeometry",(function(){return Kl})),n.d(e,"SphereGeometry",(function(){return Ql})),n.d(e,"Spherical",(function(){return Nd})),n.d(e,"SphericalHarmonics3",(function(){return Ph})),n.d(e,"Spline",(function(){return gf})),n.d(e,"SplineCurve",(function(){return ph})),n.d(e,"SplineCurve3",(function(){return mf})),n.d(e,"SpotLight",(function(){return _h})),n.d(e,"SpotLightHelper",(function(){return Vd})),n.d(e,"Sprite",(function(){return rc})),n.d(e,"SpriteMaterial",(function(){return Vs})),n.d(e,"SrcAlphaFactor",(function(){return N})),n.d(e,"SrcAlphaSaturateFactor",(function(){return G})),n.d(e,"SrcColorFactor",(function(){return I})),n.d(e,"StaticCopyUsage",(function(){return Cn})),n.d(e,"StaticDrawUsage",(function(){return Tn})),n.d(e,"StaticReadUsage",(function(){return Ln})),n.d(e,"StereoCamera",(function(){return $h})),n.d(e,"StreamCopyUsage",(function(){return On})),n.d(e,"StreamDrawUsage",(function(){return An})),n.d(e,"StreamReadUsage",(function(){return Pn})),n.d(e,"StringKeyframeTrack",(function(){return Ou})),n.d(e,"SubtractEquation",(function(){return E})),n.d(e,"SubtractiveBlending",(function(){return _})),n.d(e,"TOUCH",(function(){return o})),n.d(e,"TangentSpaceNormalMap",(function(){return sn})),n.d(e,"TetrahedronBufferGeometry",(function(){return $l})),n.d(e,"TetrahedronGeometry",(function(){return tu})),n.d(e,"TextBufferGeometry",(function(){return eu})),n.d(e,"TextGeometry",(function(){return nu})),n.d(e,"Texture",(function(){return Wn})),n.d(e,"TextureLoader",(function(){return Yu})),n.d(e,"TorusBufferGeometry",(function(){return ru})),n.d(e,"TorusGeometry",(function(){return iu})),n.d(e,"TorusKnotBufferGeometry",(function(){return ou})),n.d(e,"TorusKnotGeometry",(function(){return au})),n.d(e,"Triangle",(function(){return hi})),n.d(e,"TriangleFanDrawMode",(function(){return Ze})),n.d(e,"TriangleStripDrawMode",(function(){return Ye})),n.d(e,"TrianglesDrawMode",(function(){return qe})),n.d(e,"TubeBufferGeometry",(function(){return su})),n.d(e,"TubeGeometry",(function(){return cu})),n.d(e,"UVMapping",(function(){return it})),n.d(e,"Uint16Attribute",(function(){return lf})),n.d(e,"Uint16BufferAttribute",(function(){return Pi})),n.d(e,"Uint32Attribute",(function(){return hf})),n.d(e,"Uint32BufferAttribute",(function(){return Ii})),n.d(e,"Uint8Attribute",(function(){return af})),n.d(e,"Uint8BufferAttribute",(function(){return Ai})),n.d(e,"Uint8ClampedAttribute",(function(){return sf})),n.d(e,"Uint8ClampedBufferAttribute",(function(){return Li})),n.d(e,"Uniform",(function(){return Ld})),n.d(e,"UniformsLib",(function(){return Oo})),n.d(e,"UniformsUtils",(function(){return yo})),n.d(e,"UnsignedByteType",(function(){return St})),n.d(e,"UnsignedInt248Type",(function(){return Dt})),n.d(e,"UnsignedIntType",(function(){return Rt})),n.d(e,"UnsignedShort4444Type",(function(){return It})),n.d(e,"UnsignedShort5551Type",(function(){return Ot})),n.d(e,"UnsignedShort565Type",(function(){return Nt})),n.d(e,"UnsignedShortType",(function(){return At})),n.d(e,"VSMShadowMap",(function(){return p})),n.d(e,"Vector2",(function(){return Gn})),n.d(e,"Vector3",(function(){return Kn})),n.d(e,"Vector4",(function(){return qn})),n.d(e,"VectorKeyframeTrack",(function(){return Nu})),n.d(e,"Vertex",(function(){return nf})),n.d(e,"VertexColors",(function(){return qp})),n.d(e,"VideoTexture",(function(){return Bc})),n.d(e,"WebGL1Renderer",(function(){return Bs})),n.d(e,"WebGLCubeRenderTarget",(function(){return So})),n.d(e,"WebGLMultisampleRenderTarget",(function(){return Zn})),n.d(e,"WebGLRenderTarget",(function(){return Yn})),n.d(e,"WebGLRenderTargetCube",(function(){return Mf})),n.d(e,"WebGLRenderer",(function(){return Ds})),n.d(e,"WebGLUtils",(function(){return Rs})),n.d(e,"WireframeGeometry",(function(){return lu})),n.d(e,"WireframeHelper",(function(){return bf})),n.d(e,"WrapAroundEnding",(function(){return je})),n.d(e,"XHRLoader",(function(){return wf})),n.d(e,"ZeroCurvatureEnding",(function(){return ke})),n.d(e,"ZeroFactor",(function(){return P})),n.d(e,"ZeroSlopeEnding",(function(){return Ve})),n.d(e,"ZeroStencilOp",(function(){return ln})),n.d(e,"sRGBEncoding",(function(){return Ke}));const r="123",i={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},o={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},a=0,s=1,c=2,l=3,u=0,h=1,d=2,p=3,f=0,m=1,g=2,v=1,y=2,x=0,b=1,w=2,_=3,M=4,S=5,T=100,E=101,A=102,L=103,R=104,P=200,C=201,I=202,O=203,N=204,D=205,B=206,F=207,U=208,z=209,G=210,H=0,k=1,V=2,j=3,W=4,X=5,q=6,Y=7,Z=0,J=1,K=2,Q=0,$=1,tt=2,et=3,nt=4,rt=5,it=300,ot=301,at=302,st=303,ct=304,lt=306,ut=307,ht=1e3,dt=1001,pt=1002,ft=1003,mt=1004,gt=1004,vt=1005,yt=1005,xt=1006,bt=1007,wt=1007,_t=1008,Mt=1008,St=1009,Tt=1010,Et=1011,At=1012,Lt=1013,Rt=1014,Pt=1015,Ct=1016,It=1017,Ot=1018,Nt=1019,Dt=1020,Bt=1021,Ft=1022,Ut=1023,zt=1024,Gt=1025,Ht=Ut,kt=1026,Vt=1027,jt=1028,Wt=1029,Xt=1030,qt=1031,Yt=1032,Zt=1033,Jt=33776,Kt=33777,Qt=33778,$t=33779,te=35840,ee=35841,ne=35842,re=35843,ie=36196,oe=37492,ae=37496,se=37808,ce=37809,le=37810,ue=37811,he=37812,de=37813,pe=37814,fe=37815,me=37816,ge=37817,ve=37818,ye=37819,xe=37820,be=37821,we=36492,_e=37840,Me=37841,Se=37842,Te=37843,Ee=37844,Ae=37845,Le=37846,Re=37847,Pe=37848,Ce=37849,Ie=37850,Oe=37851,Ne=37852,De=37853,Be=2200,Fe=2201,Ue=2202,ze=2300,Ge=2301,He=2302,ke=2400,Ve=2401,je=2402,We=2500,Xe=2501,qe=0,Ye=1,Ze=2,Je=3e3,Ke=3001,Qe=3007,$e=3002,tn=3003,en=3004,nn=3005,rn=3006,on=3200,an=3201,sn=0,cn=1,ln=0,un=7680,hn=7681,dn=7682,pn=7683,fn=34055,mn=34056,gn=5386,vn=512,yn=513,xn=514,bn=515,wn=516,_n=517,Mn=518,Sn=519,Tn=35044,En=35048,An=35040,Ln=35045,Rn=35049,Pn=35041,Cn=35046,In=35050,On=35042,Nn="100",Dn="300 es";function Bn(){}Object.assign(Bn.prototype,{addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)},removeEventListener:function(t,e){if(void 0===this._listeners)return;const n=this._listeners[t];if(void 0!==n){const t=n.indexOf(e);-1!==t&&n.splice(t,1)}},dispatchEvent:function(t){if(void 0===this._listeners)return;const e=this._listeners[t.type];if(void 0!==e){t.target=this;const n=e.slice(0);for(let e=0,r=n.length;e<r;e++)n[e].call(this,t)}}});const Fn=[];for(let t=0;t<256;t++)Fn[t]=(t<16?"0":"")+t.toString(16);let Un=1234567;const zn={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){const t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(Fn[255&t]+Fn[t>>8&255]+Fn[t>>16&255]+Fn[t>>24&255]+"-"+Fn[255&e]+Fn[e>>8&255]+"-"+Fn[e>>16&15|64]+Fn[e>>24&255]+"-"+Fn[63&n|128]+Fn[n>>8&255]+"-"+Fn[n>>16&255]+Fn[n>>24&255]+Fn[255&r]+Fn[r>>8&255]+Fn[r>>16&255]+Fn[r>>24&255]).toUpperCase()},clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)},lerp:function(t,e,n){return(1-n)*t+n*e},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(t){return void 0!==t&&(Un=t%2147483647),Un=16807*Un%2147483647,(Un-1)/2147483646},degToRad:function(t){return t*zn.DEG2RAD},radToDeg:function(t){return t*zn.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,e,n,r,i){const o=Math.cos,a=Math.sin,s=o(n/2),c=a(n/2),l=o((e+r)/2),u=a((e+r)/2),h=o((e-r)/2),d=a((e-r)/2),p=o((r-e)/2),f=a((r-e)/2);switch(i){case"XYX":t.set(s*u,c*h,c*d,s*l);break;case"YZY":t.set(c*d,s*u,c*h,s*l);break;case"ZXZ":t.set(c*h,c*d,s*u,s*l);break;case"XZX":t.set(s*u,c*f,c*p,s*l);break;case"YXY":t.set(c*p,s*u,c*f,s*l);break;case"ZYZ":t.set(c*f,c*p,s*u,s*l);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}};class Gn{constructor(t=0,e=0){Object.defineProperty(this,"isVector2",{value:!0}),this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6],this.y=r[1]*e+r[4]*n+r[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),r=Math.sin(e),i=this.x-t.x,o=this.y-t.y;return this.x=i*n-o*r+t.x,this.y=i*r+o*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}}class Hn{constructor(){Object.defineProperty(this,"isMatrix3",{value:!0}),this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(t,e,n,r,i,o,a,s,c){const l=this.elements;return l[0]=t,l[1]=r,l[2]=a,l[3]=e,l[4]=i,l[5]=s,l[6]=n,l[7]=o,l[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}clone(){return(new this.constructor).fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,i=this.elements,o=n[0],a=n[3],s=n[6],c=n[1],l=n[4],u=n[7],h=n[2],d=n[5],p=n[8],f=r[0],m=r[3],g=r[6],v=r[1],y=r[4],x=r[7],b=r[2],w=r[5],_=r[8];return i[0]=o*f+a*v+s*b,i[3]=o*m+a*y+s*w,i[6]=o*g+a*x+s*_,i[1]=c*f+l*v+u*b,i[4]=c*m+l*y+u*w,i[7]=c*g+l*x+u*_,i[2]=h*f+d*v+p*b,i[5]=h*m+d*y+p*w,i[8]=h*g+d*x+p*_,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],c=t[7],l=t[8];return e*o*l-e*a*c-n*i*l+n*a*s+r*i*c-r*o*s}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],c=t[7],l=t[8],u=l*o-a*c,h=a*s-l*i,d=c*i-o*s,p=e*u+n*h+r*d;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const f=1/p;return t[0]=u*f,t[1]=(r*c-l*n)*f,t[2]=(a*n-r*o)*f,t[3]=h*f,t[4]=(l*e-r*s)*f,t[5]=(r*i-a*e)*f,t[6]=d*f,t[7]=(n*s-c*e)*f,t[8]=(o*e-n*i)*f,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).copy(this).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,r,i,o,a){const s=Math.cos(i),c=Math.sin(i);this.set(n*s,n*c,-n*(s*o+c*a)+o+t,-r*c,r*s,-r*(-c*o+s*a)+a+e,0,0,1)}scale(t,e){const n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this}rotate(t){const e=Math.cos(t),n=Math.sin(t),r=this.elements,i=r[0],o=r[3],a=r[6],s=r[1],c=r[4],l=r[7];return r[0]=e*i+n*s,r[3]=e*o+n*c,r[6]=e*a+n*l,r[1]=-n*i+e*s,r[4]=-n*o+e*c,r[7]=-n*a+e*l,this}translate(t,e){const n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this}equals(t){const e=this.elements,n=t.elements;for(let t=0;t<9;t++)if(e[t]!==n[t])return!1;return!0}fromArray(t,e=0){for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}}let kn;const Vn={getDataURL:function(t){if(/^data:/i.test(t.src))return t.src;if("undefined"==typeof HTMLCanvasElement)return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===kn&&(kn=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),kn.width=t.width,kn.height=t.height;const n=kn.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=kn}return e.width>2048||e.height>2048?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}};let jn=0;function Wn(t=Wn.DEFAULT_IMAGE,e=Wn.DEFAULT_MAPPING,n=dt,r=dt,i=xt,o=_t,a=Ut,s=St,c=1,l=Je){Object.defineProperty(this,"id",{value:jn++}),this.uuid=zn.generateUUID(),this.name="",this.image=t,this.mipmaps=[],this.mapping=e,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=s,this.offset=new Gn(0,0),this.repeat=new Gn(1,1),this.center=new Gn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Hn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=l,this.version=0,this.onUpdate=null}function Xn(t){return"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?Vn.getDataURL(t):t.data?{data:Array.prototype.slice.call(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}Wn.DEFAULT_IMAGE=void 0,Wn.DEFAULT_MAPPING=it,Wn.prototype=Object.assign(Object.create(Bn.prototype),{constructor:Wn,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const r=this.image;if(void 0===r.uuid&&(r.uuid=zn.generateUUID()),!e&&void 0===t.images[r.uuid]){let e;if(Array.isArray(r)){e=[];for(let t=0,n=r.length;t<n;t++)r[t].isDataTexture?e.push(Xn(r[t].image)):e.push(Xn(r[t]))}else e=Xn(r);t.images[r.uuid]={uuid:r.uuid,url:e}}n.image=r.uuid}return e||(t.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(this.mapping!==it)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case ht:t.x=t.x-Math.floor(t.x);break;case dt:t.x=t.x<0?0:1;break;case pt:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case ht:t.y=t.y-Math.floor(t.y);break;case dt:t.y=t.y<0?0:1;break;case pt:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}}),Object.defineProperty(Wn.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}});class qn{constructor(t=0,e=0,n=0,r=1){Object.defineProperty(this,"isVector4",{value:!0}),this.x=t,this.y=e,this.z=n,this.w=r}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,i=this.w,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*e+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*e+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*e+o[7]*n+o[11]*r+o[15]*i,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,r,i;const o=t.elements,a=o[0],s=o[4],c=o[8],l=o[1],u=o[5],h=o[9],d=o[2],p=o[6],f=o[10];if(Math.abs(s-l)<.01&&Math.abs(c-d)<.01&&Math.abs(h-p)<.01){if(Math.abs(s+l)<.1&&Math.abs(c+d)<.1&&Math.abs(h+p)<.1&&Math.abs(a+u+f-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;const t=(a+1)/2,o=(u+1)/2,m=(f+1)/2,g=(s+l)/4,v=(c+d)/4,y=(h+p)/4;return t>o&&t>m?t<.01?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(t),r=g/n,i=v/n):o>m?o<.01?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(o),n=g/r,i=y/r):m<.01?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(m),n=v/i,r=y/i),this.set(n,r,i,e),this}let m=Math.sqrt((p-h)*(p-h)+(c-d)*(c-d)+(l-s)*(l-s));return Math.abs(m)<.001&&(m=1),this.x=(p-h)/m,this.y=(c-d)/m,this.z=(l-s)/m,this.w=Math.acos((a+u+f-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}function Yn(t,e,n){this.width=t,this.height=e,this.scissor=new qn(0,0,t,e),this.scissorTest=!1,this.viewport=new qn(0,0,t,e),n=n||{},this.texture=new Wn(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={},this.texture.image.width=t,this.texture.image.height=e,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:xt,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function Zn(t,e,n){Yn.call(this,t,e,n),this.samples=4}Yn.prototype=Object.assign(Object.create(Bn.prototype),{constructor:Yn,isWebGLRenderTarget:!0,setSize:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.texture.image.width=t,this.texture.image.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Zn.prototype=Object.assign(Object.create(Yn.prototype),{constructor:Zn,isWebGLMultisampleRenderTarget:!0,copy:function(t){return Yn.prototype.copy.call(this,t),this.samples=t.samples,this}});class Jn{constructor(t=0,e=0,n=0,r=1){Object.defineProperty(this,"isQuaternion",{value:!0}),this._x=t,this._y=e,this._z=n,this._w=r}static slerp(t,e,n,r){return n.copy(t).slerp(e,r)}static slerpFlat(t,e,n,r,i,o,a){let s=n[r+0],c=n[r+1],l=n[r+2],u=n[r+3];const h=i[o+0],d=i[o+1],p=i[o+2],f=i[o+3];if(u!==f||s!==h||c!==d||l!==p){let t=1-a;const e=s*h+c*d+l*p+u*f,n=e>=0?1:-1,r=1-e*e;if(r>Number.EPSILON){const i=Math.sqrt(r),o=Math.atan2(i,e*n);t=Math.sin(t*o)/i,a=Math.sin(a*o)/i}const i=a*n;if(s=s*t+h*i,c=c*t+d*i,l=l*t+p*i,u=u*t+f*i,t===1-a){const t=1/Math.sqrt(s*s+c*c+l*l+u*u);s*=t,c*=t,l*=t,u*=t}}t[e]=s,t[e+1]=c,t[e+2]=l,t[e+3]=u}static multiplyQuaternionsFlat(t,e,n,r,i,o){const a=n[r],s=n[r+1],c=n[r+2],l=n[r+3],u=i[o],h=i[o+1],d=i[o+2],p=i[o+3];return t[e]=a*p+l*u+s*d-c*h,t[e+1]=s*p+l*h+c*u-a*d,t[e+2]=c*p+l*d+a*h-s*u,t[e+3]=l*p-a*u-s*h-c*d,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const n=t._x,r=t._y,i=t._z,o=t._order,a=Math.cos,s=Math.sin,c=a(n/2),l=a(r/2),u=a(i/2),h=s(n/2),d=s(r/2),p=s(i/2);switch(o){case"XYZ":this._x=h*l*u+c*d*p,this._y=c*d*u-h*l*p,this._z=c*l*p+h*d*u,this._w=c*l*u-h*d*p;break;case"YXZ":this._x=h*l*u+c*d*p,this._y=c*d*u-h*l*p,this._z=c*l*p-h*d*u,this._w=c*l*u+h*d*p;break;case"ZXY":this._x=h*l*u-c*d*p,this._y=c*d*u+h*l*p,this._z=c*l*p+h*d*u,this._w=c*l*u-h*d*p;break;case"ZYX":this._x=h*l*u-c*d*p,this._y=c*d*u+h*l*p,this._z=c*l*p-h*d*u,this._w=c*l*u+h*d*p;break;case"YZX":this._x=h*l*u+c*d*p,this._y=c*d*u+h*l*p,this._z=c*l*p-h*d*u,this._w=c*l*u-h*d*p;break;case"XZY":this._x=h*l*u-c*d*p,this._y=c*d*u-h*l*p,this._z=c*l*p+h*d*u,this._w=c*l*u+h*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,r=Math.sin(n);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],r=e[4],i=e[8],o=e[1],a=e[5],s=e[9],c=e[2],l=e[6],u=e[10],h=n+a+u;if(h>0){const t=.5/Math.sqrt(h+1);this._w=.25/t,this._x=(l-s)*t,this._y=(i-c)*t,this._z=(o-r)*t}else if(n>a&&n>u){const t=2*Math.sqrt(1+n-a-u);this._w=(l-s)/t,this._x=.25*t,this._y=(r+o)/t,this._z=(i+c)/t}else if(a>u){const t=2*Math.sqrt(1+a-n-u);this._w=(i-c)/t,this._x=(r+o)/t,this._y=.25*t,this._z=(s+l)/t}else{const t=2*Math.sqrt(1+u-n-a);this._w=(o-r)/t,this._x=(i+c)/t,this._y=(s+l)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<1e-6?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(zn.clamp(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(0===n)return this;const r=Math.min(1,e/n);return this.slerp(t,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,r=t._y,i=t._z,o=t._w,a=e._x,s=e._y,c=e._z,l=e._w;return this._x=n*l+o*a+r*c-i*s,this._y=r*l+o*s+i*a-n*c,this._z=i*l+o*c+n*s-r*a,this._w=o*l-n*a-r*s-i*c,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const n=this._x,r=this._y,i=this._z,o=this._w;let a=o*t._w+n*t._x+r*t._y+i*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;const s=1-a*a;if(s<=Number.EPSILON){const t=1-e;return this._w=t*o+e*this._w,this._x=t*n+e*this._x,this._y=t*r+e*this._y,this._z=t*i+e*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(s),l=Math.atan2(c,a),u=Math.sin((1-e)*l)/c,h=Math.sin(e*l)/c;return this._w=o*u+this._w*h,this._x=n*u+this._x*h,this._y=r*u+this._y*h,this._z=i*u+this._z*h,this._onChangeCallback(),this}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}class Kn{constructor(t=0,e=0,n=0){Object.defineProperty(this,"isVector3",{value:!0}),this.x=t,this.y=e,this.z=n}set(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion($n.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion($n.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6]*r,this.y=i[1]*e+i[4]*n+i[7]*r,this.z=i[2]*e+i[5]*n+i[8]*r,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,i=t.elements,o=1/(i[3]*e+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*e+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*e+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*e+i[6]*n+i[10]*r+i[14])*o,this}applyQuaternion(t){const e=this.x,n=this.y,r=this.z,i=t.x,o=t.y,a=t.z,s=t.w,c=s*e+o*r-a*n,l=s*n+a*e-i*r,u=s*r+i*n-o*e,h=-i*e-o*n-a*r;return this.x=c*s+h*-i+l*-a-u*-o,this.y=l*s+h*-o+u*-i-c*-a,this.z=u*s+h*-a+c*-o-l*-i,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[4]*n+i[8]*r,this.y=i[1]*e+i[5]*n+i[9]*r,this.z=i[2]*e+i[6]*n+i[10]*r,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,r=t.y,i=t.z,o=e.x,a=e.y,s=e.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return Qn.copy(this).projectOnVector(t),this.sub(Qn)}reflect(t){return this.sub(Qn.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(zn.clamp(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const r=Math.sin(e)*t;return this.x=r*Math.sin(n),this.y=Math.cos(e)*t,this.z=r*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=r,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}const Qn=new Kn,$n=new Jn;class tr{constructor(t,e){Object.defineProperty(this,"isBox3",{value:!0}),this.min=void 0!==t?t:new Kn(1/0,1/0,1/0),this.max=void 0!==e?e:new Kn(-1/0,-1/0,-1/0)}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){let e=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0;for(let s=0,c=t.length;s<c;s+=3){const c=t[s],l=t[s+1],u=t[s+2];c<e&&(e=c),l<n&&(n=l),u<r&&(r=u),c>i&&(i=c),l>o&&(o=l),u>a&&(a=u)}return this.min.set(e,n,r),this.max.set(i,o,a),this}setFromBufferAttribute(t){let e=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0;for(let s=0,c=t.count;s<c;s++){const c=t.getX(s),l=t.getY(s),u=t.getZ(s);c<e&&(e=c),l<n&&(n=l),u<r&&(r=u),c>i&&(i=c),l>o&&(o=l),u>a&&(a=u)}return this.min.set(e,n,r),this.max.set(i,o,a),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=rr.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t){return this.makeEmpty(),this.expandByObject(t)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return void 0===t&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new Kn),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return void 0===t&&(console.warn("THREE.Box3: .getSize() target is now required"),t=new Kn),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t){t.updateWorldMatrix(!1,!1);const e=t.geometry;void 0!==e&&(null===e.boundingBox&&e.computeBoundingBox(),ir.copy(e.boundingBox),ir.applyMatrix4(t.matrixWorld),this.union(ir));const n=t.children;for(let t=0,e=n.length;t<e;t++)this.expandByObject(n[t]);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return void 0===e&&(console.warn("THREE.Box3: .getParameter() target is now required"),e=new Kn),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,rr),rr.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(hr),dr.subVectors(this.max,hr),or.subVectors(t.a,hr),ar.subVectors(t.b,hr),sr.subVectors(t.c,hr),cr.subVectors(ar,or),lr.subVectors(sr,ar),ur.subVectors(or,sr);let e=[0,-cr.z,cr.y,0,-lr.z,lr.y,0,-ur.z,ur.y,cr.z,0,-cr.x,lr.z,0,-lr.x,ur.z,0,-ur.x,-cr.y,cr.x,0,-lr.y,lr.x,0,-ur.y,ur.x,0];return!!er(e,or,ar,sr,dr)&&(e=[1,0,0,0,1,0,0,0,1],!!er(e,or,ar,sr,dr)&&(pr.crossVectors(cr,lr),e=[pr.x,pr.y,pr.z],er(e,or,ar,sr,dr)))}clampPoint(t,e){return void 0===e&&(console.warn("THREE.Box3: .clampPoint() target is now required"),e=new Kn),e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return rr.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return void 0===t&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(t.center),t.radius=.5*this.getSize(rr).length(),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(nr[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),nr[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),nr[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),nr[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),nr[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),nr[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),nr[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),nr[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(nr)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}function er(t,e,n,r,i){for(let o=0,a=t.length-3;o<=a;o+=3){fr.fromArray(t,o);const a=i.x*Math.abs(fr.x)+i.y*Math.abs(fr.y)+i.z*Math.abs(fr.z),s=e.dot(fr),c=n.dot(fr),l=r.dot(fr);if(Math.max(-Math.max(s,c,l),Math.min(s,c,l))>a)return!1}return!0}const nr=[new Kn,new Kn,new Kn,new Kn,new Kn,new Kn,new Kn,new Kn],rr=new Kn,ir=new tr,or=new Kn,ar=new Kn,sr=new Kn,cr=new Kn,lr=new Kn,ur=new Kn,hr=new Kn,dr=new Kn,pr=new Kn,fr=new Kn,mr=new tr;class gr{constructor(t,e){this.center=void 0!==t?t:new Kn,this.radius=void 0!==e?e:-1}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;void 0!==e?n.copy(e):mr.setFromPoints(t).getCenter(n);let r=0;for(let e=0,i=t.length;e<i;e++)r=Math.max(r,n.distanceToSquared(t[e]));return this.radius=Math.sqrt(r),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return void 0===e&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),e=new Kn),e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return void 0===t&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),t=new tr),this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}}const vr=new Kn,yr=new Kn,xr=new Kn,br=new Kn,wr=new Kn,_r=new Kn,Mr=new Kn;class Sr{constructor(t,e){this.origin=void 0!==t?t:new Kn,this.direction=void 0!==e?e:new Kn(0,0,-1)}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return void 0===e&&(console.warn("THREE.Ray: .at() target is now required"),e=new Kn),e.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,vr)),this}closestPointToPoint(t,e){void 0===e&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),e=new Kn),e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=vr.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(vr.copy(this.direction).multiplyScalar(e).add(this.origin),vr.distanceToSquared(t))}distanceSqToSegment(t,e,n,r){yr.copy(t).add(e).multiplyScalar(.5),xr.copy(e).sub(t).normalize(),br.copy(this.origin).sub(yr);const i=.5*t.distanceTo(e),o=-this.direction.dot(xr),a=br.dot(this.direction),s=-br.dot(xr),c=br.lengthSq(),l=Math.abs(1-o*o);let u,h,d,p;if(l>0)if(u=o*s-a,h=o*a-s,p=i*l,u>=0)if(h>=-p)if(h<=p){const t=1/l;u*=t,h*=t,d=u*(u+o*h+2*a)+h*(o*u+h+2*s)+c}else h=i,u=Math.max(0,-(o*h+a)),d=-u*u+h*(h+2*s)+c;else h=-i,u=Math.max(0,-(o*h+a)),d=-u*u+h*(h+2*s)+c;else h<=-p?(u=Math.max(0,-(-o*i+a)),h=u>0?-i:Math.min(Math.max(-i,-s),i),d=-u*u+h*(h+2*s)+c):h<=p?(u=0,h=Math.min(Math.max(-i,-s),i),d=h*(h+2*s)+c):(u=Math.max(0,-(o*i+a)),h=u>0?i:Math.min(Math.max(-i,-s),i),d=-u*u+h*(h+2*s)+c);else h=o>0?-i:i,u=Math.max(0,-(o*h+a)),d=-u*u+h*(h+2*s)+c;return n&&n.copy(this.direction).multiplyScalar(u).add(this.origin),r&&r.copy(xr).multiplyScalar(h).add(yr),d}intersectSphere(t,e){vr.subVectors(t.center,this.origin);const n=vr.dot(this.direction),r=vr.dot(vr)-n*n,i=t.radius*t.radius;if(r>i)return null;const o=Math.sqrt(i-r),a=n-o,s=n+o;return a<0&&s<0?null:a<0?this.at(s,e):this.at(a,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return null===n?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);if(0===e)return!0;return t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,r,i,o,a,s;const c=1/this.direction.x,l=1/this.direction.y,u=1/this.direction.z,h=this.origin;return c>=0?(n=(t.min.x-h.x)*c,r=(t.max.x-h.x)*c):(n=(t.max.x-h.x)*c,r=(t.min.x-h.x)*c),l>=0?(i=(t.min.y-h.y)*l,o=(t.max.y-h.y)*l):(i=(t.max.y-h.y)*l,o=(t.min.y-h.y)*l),n>o||i>r?null:((i>n||n!=n)&&(n=i),(o<r||r!=r)&&(r=o),u>=0?(a=(t.min.z-h.z)*u,s=(t.max.z-h.z)*u):(a=(t.max.z-h.z)*u,s=(t.min.z-h.z)*u),n>s||a>r?null:((a>n||n!=n)&&(n=a),(s<r||r!=r)&&(r=s),r<0?null:this.at(n>=0?n:r,e)))}intersectsBox(t){return null!==this.intersectBox(t,vr)}intersectTriangle(t,e,n,r,i){wr.subVectors(e,t),_r.subVectors(n,t),Mr.crossVectors(wr,_r);let o,a=this.direction.dot(Mr);if(a>0){if(r)return null;o=1}else{if(!(a<0))return null;o=-1,a=-a}br.subVectors(this.origin,t);const s=o*this.direction.dot(_r.crossVectors(br,_r));if(s<0)return null;const c=o*this.direction.dot(wr.cross(br));if(c<0)return null;if(s+c>a)return null;const l=-o*br.dot(Mr);return l<0?null:this.at(l/a,i)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}}class Tr{constructor(){Object.defineProperty(this,"isMatrix4",{value:!0}),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(t,e,n,r,i,o,a,s,c,l,u,h,d,p,f,m){const g=this.elements;return g[0]=t,g[4]=e,g[8]=n,g[12]=r,g[1]=i,g[5]=o,g[9]=a,g[13]=s,g[2]=c,g[6]=l,g[10]=u,g[14]=h,g[3]=d,g[7]=p,g[11]=f,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Tr).fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,r=1/Er.setFromMatrixColumn(t,0).length(),i=1/Er.setFromMatrixColumn(t,1).length(),o=1/Er.setFromMatrixColumn(t,2).length();return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=0,e[4]=n[4]*i,e[5]=n[5]*i,e[6]=n[6]*i,e[7]=0,e[8]=n[8]*o,e[9]=n[9]*o,e[10]=n[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const e=this.elements,n=t.x,r=t.y,i=t.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(r),c=Math.sin(r),l=Math.cos(i),u=Math.sin(i);if("XYZ"===t.order){const t=o*l,n=o*u,r=a*l,i=a*u;e[0]=s*l,e[4]=-s*u,e[8]=c,e[1]=n+r*c,e[5]=t-i*c,e[9]=-a*s,e[2]=i-t*c,e[6]=r+n*c,e[10]=o*s}else if("YXZ"===t.order){const t=s*l,n=s*u,r=c*l,i=c*u;e[0]=t+i*a,e[4]=r*a-n,e[8]=o*c,e[1]=o*u,e[5]=o*l,e[9]=-a,e[2]=n*a-r,e[6]=i+t*a,e[10]=o*s}else if("ZXY"===t.order){const t=s*l,n=s*u,r=c*l,i=c*u;e[0]=t-i*a,e[4]=-o*u,e[8]=r+n*a,e[1]=n+r*a,e[5]=o*l,e[9]=i-t*a,e[2]=-o*c,e[6]=a,e[10]=o*s}else if("ZYX"===t.order){const t=o*l,n=o*u,r=a*l,i=a*u;e[0]=s*l,e[4]=r*c-n,e[8]=t*c+i,e[1]=s*u,e[5]=i*c+t,e[9]=n*c-r,e[2]=-c,e[6]=a*s,e[10]=o*s}else if("YZX"===t.order){const t=o*s,n=o*c,r=a*s,i=a*c;e[0]=s*l,e[4]=i-t*u,e[8]=r*u+n,e[1]=u,e[5]=o*l,e[9]=-a*l,e[2]=-c*l,e[6]=n*u+r,e[10]=t-i*u}else if("XZY"===t.order){const t=o*s,n=o*c,r=a*s,i=a*c;e[0]=s*l,e[4]=-u,e[8]=c*l,e[1]=t*u+i,e[5]=o*l,e[9]=n*u-r,e[2]=r*u-n,e[6]=a*l,e[10]=i*u+t}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(Lr,t,Rr)}lookAt(t,e,n){const r=this.elements;return Ir.subVectors(t,e),0===Ir.lengthSq()&&(Ir.z=1),Ir.normalize(),Pr.crossVectors(n,Ir),0===Pr.lengthSq()&&(1===Math.abs(n.z)?Ir.x+=1e-4:Ir.z+=1e-4,Ir.normalize(),Pr.crossVectors(n,Ir)),Pr.normalize(),Cr.crossVectors(Ir,Pr),r[0]=Pr.x,r[4]=Cr.x,r[8]=Ir.x,r[1]=Pr.y,r[5]=Cr.y,r[9]=Ir.y,r[2]=Pr.z,r[6]=Cr.z,r[10]=Ir.z,this}multiply(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,i=this.elements,o=n[0],a=n[4],s=n[8],c=n[12],l=n[1],u=n[5],h=n[9],d=n[13],p=n[2],f=n[6],m=n[10],g=n[14],v=n[3],y=n[7],x=n[11],b=n[15],w=r[0],_=r[4],M=r[8],S=r[12],T=r[1],E=r[5],A=r[9],L=r[13],R=r[2],P=r[6],C=r[10],I=r[14],O=r[3],N=r[7],D=r[11],B=r[15];return i[0]=o*w+a*T+s*R+c*O,i[4]=o*_+a*E+s*P+c*N,i[8]=o*M+a*A+s*C+c*D,i[12]=o*S+a*L+s*I+c*B,i[1]=l*w+u*T+h*R+d*O,i[5]=l*_+u*E+h*P+d*N,i[9]=l*M+u*A+h*C+d*D,i[13]=l*S+u*L+h*I+d*B,i[2]=p*w+f*T+m*R+g*O,i[6]=p*_+f*E+m*P+g*N,i[10]=p*M+f*A+m*C+g*D,i[14]=p*S+f*L+m*I+g*B,i[3]=v*w+y*T+x*R+b*O,i[7]=v*_+y*E+x*P+b*N,i[11]=v*M+y*A+x*C+b*D,i[15]=v*S+y*L+x*I+b*B,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],r=t[8],i=t[12],o=t[1],a=t[5],s=t[9],c=t[13],l=t[2],u=t[6],h=t[10],d=t[14];return t[3]*(+i*s*u-r*c*u-i*a*h+n*c*h+r*a*d-n*s*d)+t[7]*(+e*s*d-e*c*h+i*o*h-r*o*d+r*c*l-i*s*l)+t[11]*(+e*c*u-e*a*d-i*o*u+n*o*d+i*a*l-n*c*l)+t[15]*(-r*a*l-e*s*u+e*a*h+r*o*u-n*o*h+n*s*l)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],c=t[7],l=t[8],u=t[9],h=t[10],d=t[11],p=t[12],f=t[13],m=t[14],g=t[15],v=u*m*c-f*h*c+f*s*d-a*m*d-u*s*g+a*h*g,y=p*h*c-l*m*c-p*s*d+o*m*d+l*s*g-o*h*g,x=l*f*c-p*u*c+p*a*d-o*f*d-l*a*g+o*u*g,b=p*u*s-l*f*s-p*a*h+o*f*h+l*a*m-o*u*m,w=e*v+n*y+r*x+i*b;if(0===w)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const _=1/w;return t[0]=v*_,t[1]=(f*h*i-u*m*i-f*r*d+n*m*d+u*r*g-n*h*g)*_,t[2]=(a*m*i-f*s*i+f*r*c-n*m*c-a*r*g+n*s*g)*_,t[3]=(u*s*i-a*h*i-u*r*c+n*h*c+a*r*d-n*s*d)*_,t[4]=y*_,t[5]=(l*m*i-p*h*i+p*r*d-e*m*d-l*r*g+e*h*g)*_,t[6]=(p*s*i-o*m*i-p*r*c+e*m*c+o*r*g-e*s*g)*_,t[7]=(o*h*i-l*s*i+l*r*c-e*h*c-o*r*d+e*s*d)*_,t[8]=x*_,t[9]=(p*u*i-l*f*i-p*n*d+e*f*d+l*n*g-e*u*g)*_,t[10]=(o*f*i-p*a*i+p*n*c-e*f*c-o*n*g+e*a*g)*_,t[11]=(l*a*i-o*u*i-l*n*c+e*u*c+o*n*d-e*a*d)*_,t[12]=b*_,t[13]=(l*f*r-p*u*r+p*n*h-e*f*h-l*n*m+e*u*m)*_,t[14]=(p*a*r-o*f*r-p*n*s+e*f*s+o*n*m-e*a*m)*_,t[15]=(o*u*r-l*a*r+l*n*s-e*u*s-o*n*h+e*a*h)*_,this}scale(t){const e=this.elements,n=t.x,r=t.y,i=t.z;return e[0]*=n,e[4]*=r,e[8]*=i,e[1]*=n,e[5]*=r,e[9]*=i,e[2]*=n,e[6]*=r,e[10]*=i,e[3]*=n,e[7]*=r,e[11]*=i,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,r))}makeTranslation(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),r=Math.sin(e),i=1-n,o=t.x,a=t.y,s=t.z,c=i*o,l=i*a;return this.set(c*o+n,c*a-r*s,c*s+r*a,0,c*a+r*s,l*a+n,l*s-r*o,0,c*s-r*a,l*s+r*o,i*s*s+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n){return this.set(1,e,n,0,t,1,n,0,t,e,1,0,0,0,0,1),this}compose(t,e,n){const r=this.elements,i=e._x,o=e._y,a=e._z,s=e._w,c=i+i,l=o+o,u=a+a,h=i*c,d=i*l,p=i*u,f=o*l,m=o*u,g=a*u,v=s*c,y=s*l,x=s*u,b=n.x,w=n.y,_=n.z;return r[0]=(1-(f+g))*b,r[1]=(d+x)*b,r[2]=(p-y)*b,r[3]=0,r[4]=(d-x)*w,r[5]=(1-(h+g))*w,r[6]=(m+v)*w,r[7]=0,r[8]=(p+y)*_,r[9]=(m-v)*_,r[10]=(1-(h+f))*_,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}decompose(t,e,n){const r=this.elements;let i=Er.set(r[0],r[1],r[2]).length();const o=Er.set(r[4],r[5],r[6]).length(),a=Er.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),t.x=r[12],t.y=r[13],t.z=r[14],Ar.copy(this);const s=1/i,c=1/o,l=1/a;return Ar.elements[0]*=s,Ar.elements[1]*=s,Ar.elements[2]*=s,Ar.elements[4]*=c,Ar.elements[5]*=c,Ar.elements[6]*=c,Ar.elements[8]*=l,Ar.elements[9]*=l,Ar.elements[10]*=l,e.setFromRotationMatrix(Ar),n.x=i,n.y=o,n.z=a,this}makePerspective(t,e,n,r,i,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const a=this.elements,s=2*i/(e-t),c=2*i/(n-r),l=(e+t)/(e-t),u=(n+r)/(n-r),h=-(o+i)/(o-i),d=-2*o*i/(o-i);return a[0]=s,a[4]=0,a[8]=l,a[12]=0,a[1]=0,a[5]=c,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=d,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(t,e,n,r,i,o){const a=this.elements,s=1/(e-t),c=1/(n-r),l=1/(o-i),u=(e+t)*s,h=(n+r)*c,d=(o+i)*l;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*l,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let t=0;t<16;t++)if(e[t]!==n[t])return!1;return!0}fromArray(t,e=0){for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}const Er=new Kn,Ar=new Tr,Lr=new Kn(0,0,0),Rr=new Kn(1,1,1),Pr=new Kn,Cr=new Kn,Ir=new Kn;class Or{constructor(t=0,e=0,n=0,r=Or.DefaultOrder){Object.defineProperty(this,"isEuler",{value:!0}),this._x=t,this._y=e,this._z=n,this._order=r}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._order=r||this._order,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e,n){const r=zn.clamp,i=t.elements,o=i[0],a=i[4],s=i[8],c=i[1],l=i[5],u=i[9],h=i[2],d=i[6],p=i[10];switch(e=e||this._order){case"XYZ":this._y=Math.asin(r(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-u,p),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(d,l),this._z=0);break;case"YXZ":this._x=Math.asin(-r(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(s,p),this._z=Math.atan2(c,l)):(this._y=Math.atan2(-h,o),this._z=0);break;case"ZXY":this._x=Math.asin(r(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-h,p),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(c,o));break;case"ZYX":this._y=Math.asin(-r(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(d,p),this._z=Math.atan2(c,o)):(this._x=0,this._z=Math.atan2(-a,l));break;case"YZX":this._z=Math.asin(r(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(s,p));break;case"XZY":this._z=Math.asin(-r(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(d,l),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-u,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!1!==n&&this._onChangeCallback(),this}setFromQuaternion(t,e,n){return Nr.makeRotationFromQuaternion(t),this.setFromRotationMatrix(Nr,e,n)}setFromVector3(t,e){return this.set(t.x,t.y,t.z,e||this._order)}reorder(t){return Dr.setFromEuler(this),this.setFromQuaternion(Dr,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}toVector3(t){return t?t.set(this._x,this._y,this._z):new Kn(this._x,this._y,this._z)}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}Or.DefaultOrder="XYZ",Or.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];const Nr=new Tr,Dr=new Jn;class Br{constructor(){this.mask=1}set(t){this.mask=1<<t|0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!=(this.mask&t.mask)}}let Fr=0;const Ur=new Kn,zr=new Jn,Gr=new Tr,Hr=new Kn,kr=new Kn,Vr=new Kn,jr=new Jn,Wr=new Kn(1,0,0),Xr=new Kn(0,1,0),qr=new Kn(0,0,1),Yr={type:"added"},Zr={type:"removed"};function Jr(){Object.defineProperty(this,"id",{value:Fr++}),this.uuid=zn.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Jr.DefaultUp.clone();const t=new Kn,e=new Or,n=new Jn,r=new Kn(1,1,1);e._onChange((function(){n.setFromEuler(e,!1)})),n._onChange((function(){e.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Tr},normalMatrix:{value:new Hn}}),this.matrix=new Tr,this.matrixWorld=new Tr,this.matrixAutoUpdate=Jr.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Br,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}Jr.DefaultUp=new Kn(0,1,0),Jr.DefaultMatrixAutoUpdate=!0,Jr.prototype=Object.assign(Object.create(Bn.prototype),{constructor:Jr,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(t,e){return zr.setFromAxisAngle(t,e),this.quaternion.multiply(zr),this},rotateOnWorldAxis:function(t,e){return zr.setFromAxisAngle(t,e),this.quaternion.premultiply(zr),this},rotateX:function(t){return this.rotateOnAxis(Wr,t)},rotateY:function(t){return this.rotateOnAxis(Xr,t)},rotateZ:function(t){return this.rotateOnAxis(qr,t)},translateOnAxis:function(t,e){return Ur.copy(t).applyQuaternion(this.quaternion),this.position.add(Ur.multiplyScalar(e)),this},translateX:function(t){return this.translateOnAxis(Wr,t)},translateY:function(t){return this.translateOnAxis(Xr,t)},translateZ:function(t){return this.translateOnAxis(qr,t)},localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(t){return t.applyMatrix4(Gr.copy(this.matrixWorld).invert())},lookAt:function(t,e,n){t.isVector3?Hr.copy(t):Hr.set(t,e,n);const r=this.parent;this.updateWorldMatrix(!0,!1),kr.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Gr.lookAt(kr,Hr,this.up):Gr.lookAt(Hr,kr,this.up),this.quaternion.setFromRotationMatrix(Gr),r&&(Gr.extractRotation(r.matrixWorld),zr.setFromRotationMatrix(Gr),this.quaternion.premultiply(zr.invert()))},add:function(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(Yr)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const e=this.children.indexOf(t);return-1!==e&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(Zr)),this},clear:function(){for(let t=0;t<this.children.length;t++){const e=this.children[t];e.parent=null,e.dispatchEvent(Zr)}return this.children.length=0,this},attach:function(t){return this.updateWorldMatrix(!0,!1),Gr.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Gr.multiply(t.parent.matrixWorld)),t.applyMatrix4(Gr),t.updateWorldMatrix(!1,!1),this.add(t),this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n].getObjectByProperty(t,e);if(void 0!==r)return r}},getWorldPosition:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),t=new Kn),this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),t=new Jn),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(kr,t,Vr),t},getWorldScale:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),t=new Kn),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(kr,jr,t),t},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new Kn),this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()},raycast:function(){},traverse:function(t){t(this);const e=this.children;for(let n=0,r=e.length;n<r;n++)e[n].traverse(t)},traverseVisible:function(t){if(!1===this.visible)return;t(this);const e=this.children;for(let n=0,r=e.length;n<r;n++)e[n].traverseVisible(t)},traverseAncestors:function(t){const e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let n=0,r=e.length;n<r;n++)e[n].updateMatrixWorld(t)},updateWorldMatrix:function(t,e){const n=this.parent;if(!0===t&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e){const t=this.children;for(let e=0,n=t.length;e<n;e++)t[e].updateWorldMatrix(!1,!0)}},toJSON:function(t){const e=void 0===t||"string"==typeof t,n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};function i(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON()),this.isMesh||this.isLine||this.isPoints){r.geometry=i(t.geometries,this.geometry);const e=this.geometry.parameters;if(void 0!==e&&void 0!==e.shapes){const n=e.shapes;if(Array.isArray(n))for(let e=0,r=n.length;e<r;e++){const r=n[e];i(t.shapes,r)}else i(t.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(t.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const e=[];for(let n=0,r=this.material.length;n<r;n++)e.push(i(t.materials,this.material[n]));r.material=e}else r.material=i(t.materials,this.material);if(this.children.length>0){r.children=[];for(let e=0;e<this.children.length;e++)r.children.push(this.children[e].toJSON(t).object)}if(this.animations.length>0){r.animations=[];for(let e=0;e<this.animations.length;e++){const n=this.animations[e];r.animations.push(i(t.animations,n))}}if(e){const e=o(t.geometries),r=o(t.materials),i=o(t.textures),a=o(t.images),s=o(t.shapes),c=o(t.skeletons),l=o(t.animations);e.length>0&&(n.geometries=e),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),a.length>0&&(n.images=a),s.length>0&&(n.shapes=s),c.length>0&&(n.skeletons=c),l.length>0&&(n.animations=l)}return n.object=r,n;function o(t){const e=[];for(const n in t){const r=t[n];delete r.metadata,e.push(r)}return e}},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(let e=0;e<t.children.length;e++){const n=t.children[e];this.add(n.clone())}return this}});const Kr=new Kn,Qr=new Kn,$r=new Hn;class ti{constructor(t,e){Object.defineProperty(this,"isPlane",{value:!0}),this.normal=void 0!==t?t:new Kn(1,0,0),this.constant=void 0!==e?e:0}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){const r=Kr.subVectors(n,e).cross(Qr.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return void 0===e&&(console.warn("THREE.Plane: .projectPoint() target is now required"),e=new Kn),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,e){void 0===e&&(console.warn("THREE.Plane: .intersectLine() target is now required"),e=new Kn);const n=t.delta(Kr),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(t.start)?e.copy(t.start):void 0;const i=-(t.start.dot(this.normal)+this.constant)/r;return i<0||i>1?void 0:e.copy(n).multiplyScalar(i).add(t.start)}intersectsLine(t){const e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return void 0===t&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new Kn),t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||$r.getNormalMatrix(t),r=this.coplanarPoint(Kr).applyMatrix4(t),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}}const ei=new Kn,ni=new Kn,ri=new Kn,ii=new Kn,oi=new Kn,ai=new Kn,si=new Kn,ci=new Kn,li=new Kn,ui=new Kn;class hi{constructor(t,e,n){this.a=void 0!==t?t:new Kn,this.b=void 0!==e?e:new Kn,this.c=void 0!==n?n:new Kn}static getNormal(t,e,n,r){void 0===r&&(console.warn("THREE.Triangle: .getNormal() target is now required"),r=new Kn),r.subVectors(n,e),ei.subVectors(t,e),r.cross(ei);const i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(t,e,n,r,i){ei.subVectors(r,e),ni.subVectors(n,e),ri.subVectors(t,e);const o=ei.dot(ei),a=ei.dot(ni),s=ei.dot(ri),c=ni.dot(ni),l=ni.dot(ri),u=o*c-a*a;if(void 0===i&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),i=new Kn),0===u)return i.set(-2,-1,-1);const h=1/u,d=(c*s-a*l)*h,p=(o*l-a*s)*h;return i.set(1-d-p,p,d)}static containsPoint(t,e,n,r){return this.getBarycoord(t,e,n,r,ii),ii.x>=0&&ii.y>=0&&ii.x+ii.y<=1}static getUV(t,e,n,r,i,o,a,s){return this.getBarycoord(t,e,n,r,ii),s.set(0,0),s.addScaledVector(i,ii.x),s.addScaledVector(o,ii.y),s.addScaledVector(a,ii.z),s}static isFrontFacing(t,e,n,r){return ei.subVectors(n,e),ni.subVectors(t,e),ei.cross(ni).dot(r)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,r){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[r]),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return ei.subVectors(this.c,this.b),ni.subVectors(this.a,this.b),.5*ei.cross(ni).length()}getMidpoint(t){return void 0===t&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),t=new Kn),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return hi.getNormal(this.a,this.b,this.c,t)}getPlane(t){return void 0===t&&(console.warn("THREE.Triangle: .getPlane() target is now required"),t=new ti),t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return hi.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,n,r,i){return hi.getUV(t,this.a,this.b,this.c,e,n,r,i)}containsPoint(t){return hi.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return hi.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){void 0===e&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),e=new Kn);const n=this.a,r=this.b,i=this.c;let o,a;oi.subVectors(r,n),ai.subVectors(i,n),ci.subVectors(t,n);const s=oi.dot(ci),c=ai.dot(ci);if(s<=0&&c<=0)return e.copy(n);li.subVectors(t,r);const l=oi.dot(li),u=ai.dot(li);if(l>=0&&u<=l)return e.copy(r);const h=s*u-l*c;if(h<=0&&s>=0&&l<=0)return o=s/(s-l),e.copy(n).addScaledVector(oi,o);ui.subVectors(t,i);const d=oi.dot(ui),p=ai.dot(ui);if(p>=0&&d<=p)return e.copy(i);const f=d*c-s*p;if(f<=0&&c>=0&&p<=0)return a=c/(c-p),e.copy(n).addScaledVector(ai,a);const m=l*p-d*u;if(m<=0&&u-l>=0&&d-p>=0)return si.subVectors(i,r),a=(u-l)/(u-l+(d-p)),e.copy(r).addScaledVector(si,a);const g=1/(m+f+h);return o=f*g,a=h*g,e.copy(n).addScaledVector(oi,o).addScaledVector(ai,a)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const di={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},pi={h:0,s:0,l:0},fi={h:0,s:0,l:0};function mi(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}function gi(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function vi(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}class yi{constructor(t,e,n){return Object.defineProperty(this,"isColor",{value:!0}),void 0===e&&void 0===n?this.set(t):this.setRGB(t,e,n)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this}setRGB(t,e,n){return this.r=t,this.g=e,this.b=n,this}setHSL(t,e,n){if(t=zn.euclideanModulo(t,1),e=zn.clamp(e,0,1),n=zn.clamp(n,0,1),0===e)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+e):n+e-n*e,i=2*n-r;this.r=mi(i,r,t+1/3),this.g=mi(i,r,t),this.b=mi(i,r,t-1/3)}return this}setStyle(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){let t;const r=n[1],i=n[2];switch(r){case"rgb":case"rgba":if(t=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(i))return this.r=Math.min(255,parseInt(t[1],10))/255,this.g=Math.min(255,parseInt(t[2],10))/255,this.b=Math.min(255,parseInt(t[3],10))/255,e(t[5]),this;if(t=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(i))return this.r=Math.min(100,parseInt(t[1],10))/100,this.g=Math.min(100,parseInt(t[2],10))/100,this.b=Math.min(100,parseInt(t[3],10))/100,e(t[5]),this;break;case"hsl":case"hsla":if(t=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(i)){const n=parseFloat(t[1])/360,r=parseInt(t[2],10)/100,i=parseInt(t[3],10)/100;return e(t[5]),this.setHSL(n,r,i)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(t)){const t=n[1],e=t.length;if(3===e)return this.r=parseInt(t.charAt(0)+t.charAt(0),16)/255,this.g=parseInt(t.charAt(1)+t.charAt(1),16)/255,this.b=parseInt(t.charAt(2)+t.charAt(2),16)/255,this;if(6===e)return this.r=parseInt(t.charAt(0)+t.charAt(1),16)/255,this.g=parseInt(t.charAt(2)+t.charAt(3),16)/255,this.b=parseInt(t.charAt(4)+t.charAt(5),16)/255,this}return t&&t.length>0?this.setColorName(t):this}setColorName(t){const e=di[t];return void 0!==e?this.setHex(e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copyGammaToLinear(t,e=2){return this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this}copyLinearToGamma(t,e=2){const n=e>0?1/e:1;return this.r=Math.pow(t.r,n),this.g=Math.pow(t.g,n),this.b=Math.pow(t.b,n),this}convertGammaToLinear(t){return this.copyGammaToLinear(this,t),this}convertLinearToGamma(t){return this.copyLinearToGamma(this,t),this}copySRGBToLinear(t){return this.r=gi(t.r),this.g=gi(t.g),this.b=gi(t.b),this}copyLinearToSRGB(t){return this.r=vi(t.r),this.g=vi(t.g),this.b=vi(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(t){void 0===t&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});const e=this.r,n=this.g,r=this.b,i=Math.max(e,n,r),o=Math.min(e,n,r);let a,s;const c=(o+i)/2;if(o===i)a=0,s=0;else{const t=i-o;switch(s=c<=.5?t/(i+o):t/(2-i-o),i){case e:a=(n-r)/t+(n<r?6:0);break;case n:a=(r-e)/t+2;break;case r:a=(e-n)/t+4}a/=6}return t.h=a,t.s=s,t.l=c,t}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(t,e,n){return this.getHSL(pi),pi.h+=t,pi.s+=e,pi.l+=n,this.setHSL(pi.h,pi.s,pi.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpHSL(t,e){this.getHSL(pi),t.getHSL(fi);const n=zn.lerp(pi.h,fi.h,e),r=zn.lerp(pi.s,fi.s,e),i=zn.lerp(pi.l,fi.l,e);return this.setHSL(n,r,i),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),!0===t.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}yi.NAMES=di,yi.prototype.r=1,yi.prototype.g=1,yi.prototype.b=1;class xi{constructor(t,e,n,r,i,o=0){this.a=t,this.b=e,this.c=n,this.normal=r&&r.isVector3?r:new Kn,this.vertexNormals=Array.isArray(r)?r:[],this.color=i&&i.isColor?i:new yi,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=o}clone(){return(new this.constructor).copy(this)}copy(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(let e=0,n=t.vertexNormals.length;e<n;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(let e=0,n=t.vertexColors.length;e<n;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}}let bi=0;function wi(){Object.defineProperty(this,"id",{value:bi++}),this.uuid=zn.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=b,this.side=f,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=N,this.blendDst=D,this.blendEquation=T,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=j,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Sn,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=un,this.stencilZFail=un,this.stencilZPass=un,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}function _i(t){wi.call(this),this.type="MeshBasicMaterial",this.color=new yi(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Z,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(t)}wi.prototype=Object.assign(Object.create(Bn.prototype),{constructor:wi,isMaterial:!0,onBeforeCompile:function(){},customProgramCacheKey:function(){return this.onBeforeCompile.toString()},setValues:function(t){if(void 0!==t)for(const e in t){const n=t[e];if(void 0===n){console.warn("THREE.Material: '"+e+"' parameter is undefined.");continue}if("shading"===e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===v;continue}const r=this[e];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[e]=n:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}},toJSON:function(t){const e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(t){const e=[];for(const n in t){const r=t[n];delete r.metadata,e.push(r)}return e}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(n.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,n.reflectivity=this.reflectivity,n.refractionRatio=this.refractionRatio,void 0!==this.combine&&(n.combine=this.combine),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==b&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),this.side!==f&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.morphNormals&&(n.morphNormals=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),e){const e=r(t.textures),i=r(t.images);e.length>0&&(n.textures=e),i.length>0&&(n.images=i)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(null!==e){const t=e.length;n=new Array(t);for(let r=0;r!==t;++r)n[r]=e[r].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(wi.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),_i.prototype=Object.create(wi.prototype),_i.prototype.constructor=_i,_i.prototype.isMeshBasicMaterial=!0,_i.prototype.copy=function(t){return wi.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this};const Mi=new Kn,Si=new Gn;function Ti(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===n,this.usage=Tn,this.updateRange={offset:0,count:-1},this.version=0}function Ei(t,e,n){Ti.call(this,new Int8Array(t),e,n)}function Ai(t,e,n){Ti.call(this,new Uint8Array(t),e,n)}function Li(t,e,n){Ti.call(this,new Uint8ClampedArray(t),e,n)}function Ri(t,e,n){Ti.call(this,new Int16Array(t),e,n)}function Pi(t,e,n){Ti.call(this,new Uint16Array(t),e,n)}function Ci(t,e,n){Ti.call(this,new Int32Array(t),e,n)}function Ii(t,e,n){Ti.call(this,new Uint32Array(t),e,n)}function Oi(t,e,n){Ti.call(this,new Uint16Array(t),e,n)}function Ni(t,e,n){Ti.call(this,new Float32Array(t),e,n)}function Di(t,e,n){Ti.call(this,new Float64Array(t),e,n)}Object.defineProperty(Ti.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(Ti.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this},copyAt:function(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[t+r]=e.array[n+r];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){const e=this.array;let n=0;for(let r=0,i=t.length;r<i;r++){let i=t[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),i=new yi),e[n++]=i.r,e[n++]=i.g,e[n++]=i.b}return this},copyVector2sArray:function(t){const e=this.array;let n=0;for(let r=0,i=t.length;r<i;r++){let i=t[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),i=new Gn),e[n++]=i.x,e[n++]=i.y}return this},copyVector3sArray:function(t){const e=this.array;let n=0;for(let r=0,i=t.length;r<i;r++){let i=t[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),i=new Kn),e[n++]=i.x,e[n++]=i.y,e[n++]=i.z}return this},copyVector4sArray:function(t){const e=this.array;let n=0;for(let r=0,i=t.length;r<i;r++){let i=t[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),i=new qn),e[n++]=i.x,e[n++]=i.y,e[n++]=i.z,e[n++]=i.w}return this},applyMatrix3:function(t){if(2===this.itemSize)for(let e=0,n=this.count;e<n;e++)Si.fromBufferAttribute(this,e),Si.applyMatrix3(t),this.setXY(e,Si.x,Si.y);else if(3===this.itemSize)for(let e=0,n=this.count;e<n;e++)Mi.fromBufferAttribute(this,e),Mi.applyMatrix3(t),this.setXYZ(e,Mi.x,Mi.y,Mi.z);return this},applyMatrix4:function(t){for(let e=0,n=this.count;e<n;e++)Mi.x=this.getX(e),Mi.y=this.getY(e),Mi.z=this.getZ(e),Mi.applyMatrix4(t),this.setXYZ(e,Mi.x,Mi.y,Mi.z);return this},applyNormalMatrix:function(t){for(let e=0,n=this.count;e<n;e++)Mi.x=this.getX(e),Mi.y=this.getY(e),Mi.z=this.getZ(e),Mi.applyNormalMatrix(t),this.setXYZ(e,Mi.x,Mi.y,Mi.z);return this},transformDirection:function(t){for(let e=0,n=this.count;e<n;e++)Mi.x=this.getX(e),Mi.y=this.getY(e),Mi.z=this.getZ(e),Mi.transformDirection(t),this.setXYZ(e,Mi.x,Mi.y,Mi.z);return this},set:function(t,e=0){return this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this},setXYZ:function(t,e,n,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this},setXYZW:function(t,e,n,r,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=i,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),Ei.prototype=Object.create(Ti.prototype),Ei.prototype.constructor=Ei,Ai.prototype=Object.create(Ti.prototype),Ai.prototype.constructor=Ai,Li.prototype=Object.create(Ti.prototype),Li.prototype.constructor=Li,Ri.prototype=Object.create(Ti.prototype),Ri.prototype.constructor=Ri,Pi.prototype=Object.create(Ti.prototype),Pi.prototype.constructor=Pi,Ci.prototype=Object.create(Ti.prototype),Ci.prototype.constructor=Ci,Ii.prototype=Object.create(Ti.prototype),Ii.prototype.constructor=Ii,Oi.prototype=Object.create(Ti.prototype),Oi.prototype.constructor=Oi,Oi.prototype.isFloat16BufferAttribute=!0,Ni.prototype=Object.create(Ti.prototype),Ni.prototype.constructor=Ni,Di.prototype=Object.create(Ti.prototype),Di.prototype.constructor=Di;class Bi{constructor(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}computeGroups(t){const e=[];let n,r,i=void 0;const o=t.faces;for(r=0;r<o.length;r++){const t=o[r];t.materialIndex!==i&&(i=t.materialIndex,void 0!==n&&(n.count=3*r-n.start,e.push(n)),n={start:3*r,materialIndex:i})}void 0!==n&&(n.count=3*r-n.start,e.push(n)),this.groups=e}fromGeometry(t){const e=t.faces,n=t.vertices,r=t.faceVertexUvs,i=r[0]&&r[0].length>0,o=r[1]&&r[1].length>0,a=t.morphTargets,s=a.length;let c;if(s>0){c=[];for(let t=0;t<s;t++)c[t]={name:a[t].name,data:[]};this.morphTargets.position=c}const l=t.morphNormals,u=l.length;let h;if(u>0){h=[];for(let t=0;t<u;t++)h[t]={name:l[t].name,data:[]};this.morphTargets.normal=h}const d=t.skinIndices,p=t.skinWeights,f=d.length===n.length,m=p.length===n.length;n.length>0&&0===e.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(let t=0;t<e.length;t++){const g=e[t];this.vertices.push(n[g.a],n[g.b],n[g.c]);const v=g.vertexNormals;if(3===v.length)this.normals.push(v[0],v[1],v[2]);else{const t=g.normal;this.normals.push(t,t,t)}const y=g.vertexColors;if(3===y.length)this.colors.push(y[0],y[1],y[2]);else{const t=g.color;this.colors.push(t,t,t)}if(!0===i){const e=r[0][t];void 0!==e?this.uvs.push(e[0],e[1],e[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",t),this.uvs.push(new Gn,new Gn,new Gn))}if(!0===o){const e=r[1][t];void 0!==e?this.uvs2.push(e[0],e[1],e[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",t),this.uvs2.push(new Gn,new Gn,new Gn))}for(let t=0;t<s;t++){const e=a[t].vertices;c[t].data.push(e[g.a],e[g.b],e[g.c])}for(let e=0;e<u;e++){const n=l[e].vertexNormals[t];h[e].data.push(n.a,n.b,n.c)}f&&this.skinIndices.push(d[g.a],d[g.b],d[g.c]),m&&this.skinWeights.push(p[g.a],p[g.b],p[g.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this}}function Fi(t){if(0===t.length)return-1/0;let e=t[0];for(let n=1,r=t.length;n<r;++n)t[n]>e&&(e=t[n]);return e}const Ui={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function zi(t,e){return new Ui[t](e)}let Gi=1;const Hi=new Tr,ki=new Jr,Vi=new Kn,ji=new tr,Wi=new tr,Xi=new Kn;function qi(){Object.defineProperty(this,"id",{value:Gi+=2}),this.uuid=zn.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}qi.prototype=Object.assign(Object.create(Bn.prototype),{constructor:qi,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){return Array.isArray(t)?this.index=new(Fi(t)>65535?Ii:Pi)(t,1):this.index=t,this},getAttribute:function(t){return this.attributes[t]},setAttribute:function(t,e){return this.attributes[t]=e,this},deleteAttribute:function(t){return delete this.attributes[t],this},hasAttribute:function(t){return void 0!==this.attributes[t]},addGroup:function(t,e,n=0){this.groups.push({start:t,count:e,materialIndex:n})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix4:function(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const e=(new Hn).getNormalMatrix(t);n.applyNormalMatrix(e),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(t),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(t){return Hi.makeRotationX(t),this.applyMatrix4(Hi),this},rotateY:function(t){return Hi.makeRotationY(t),this.applyMatrix4(Hi),this},rotateZ:function(t){return Hi.makeRotationZ(t),this.applyMatrix4(Hi),this},translate:function(t,e,n){return Hi.makeTranslation(t,e,n),this.applyMatrix4(Hi),this},scale:function(t,e,n){return Hi.makeScale(t,e,n),this.applyMatrix4(Hi),this},lookAt:function(t){return ki.lookAt(t),ki.updateMatrix(),this.applyMatrix4(ki.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Vi).negate(),this.translate(Vi.x,Vi.y,Vi.z),this},setFromObject:function(t){const e=t.geometry;if(t.isPoints||t.isLine){const t=new Ni(3*e.vertices.length,3),n=new Ni(3*e.colors.length,3);if(this.setAttribute("position",t.copyVector3sArray(e.vertices)),this.setAttribute("color",n.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length){const t=new Ni(e.lineDistances.length,1);this.setAttribute("lineDistance",t.copyArray(e.lineDistances))}null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},setFromPoints:function(t){const e=[];for(let n=0,r=t.length;n<r;n++){const r=t[n];e.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new Ni(e,3)),this},updateFromObject:function(t){let e=t.geometry;if(t.isMesh){let t=e.__directGeometry;if(!0===e.elementsNeedUpdate&&(t=void 0,e.elementsNeedUpdate=!1),void 0===t)return this.fromGeometry(e);t.verticesNeedUpdate=e.verticesNeedUpdate,t.normalsNeedUpdate=e.normalsNeedUpdate,t.colorsNeedUpdate=e.colorsNeedUpdate,t.uvsNeedUpdate=e.uvsNeedUpdate,t.groupsNeedUpdate=e.groupsNeedUpdate,e.verticesNeedUpdate=!1,e.normalsNeedUpdate=!1,e.colorsNeedUpdate=!1,e.uvsNeedUpdate=!1,e.groupsNeedUpdate=!1,e=t}if(!0===e.verticesNeedUpdate){const t=this.attributes.position;void 0!==t&&(t.copyVector3sArray(e.vertices),t.needsUpdate=!0),e.verticesNeedUpdate=!1}if(!0===e.normalsNeedUpdate){const t=this.attributes.normal;void 0!==t&&(t.copyVector3sArray(e.normals),t.needsUpdate=!0),e.normalsNeedUpdate=!1}if(!0===e.colorsNeedUpdate){const t=this.attributes.color;void 0!==t&&(t.copyColorsArray(e.colors),t.needsUpdate=!0),e.colorsNeedUpdate=!1}if(e.uvsNeedUpdate){const t=this.attributes.uv;void 0!==t&&(t.copyVector2sArray(e.uvs),t.needsUpdate=!0),e.uvsNeedUpdate=!1}if(e.lineDistancesNeedUpdate){const t=this.attributes.lineDistance;void 0!==t&&(t.copyArray(e.lineDistances),t.needsUpdate=!0),e.lineDistancesNeedUpdate=!1}return e.groupsNeedUpdate&&(e.computeGroups(t.geometry),this.groups=e.groups,e.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new Bi).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){const e=new Float32Array(3*t.vertices.length);if(this.setAttribute("position",new Ti(e,3).copyVector3sArray(t.vertices)),t.normals.length>0){const e=new Float32Array(3*t.normals.length);this.setAttribute("normal",new Ti(e,3).copyVector3sArray(t.normals))}if(t.colors.length>0){const e=new Float32Array(3*t.colors.length);this.setAttribute("color",new Ti(e,3).copyColorsArray(t.colors))}if(t.uvs.length>0){const e=new Float32Array(2*t.uvs.length);this.setAttribute("uv",new Ti(e,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){const e=new Float32Array(2*t.uvs2.length);this.setAttribute("uv2",new Ti(e,2).copyVector2sArray(t.uvs2))}this.groups=t.groups;for(const e in t.morphTargets){const n=[],r=t.morphTargets[e];for(let t=0,e=r.length;t<e;t++){const e=r[t],i=new Ni(3*e.data.length,3);i.name=e.name,n.push(i.copyVector3sArray(e.data))}this.morphAttributes[e]=n}if(t.skinIndices.length>0){const e=new Ni(4*t.skinIndices.length,4);this.setAttribute("skinIndex",e.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){const e=new Ni(4*t.skinWeights.length,4);this.setAttribute("skinWeight",e.copyVector4sArray(t.skinWeights))}return null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new tr);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Kn(-1/0,-1/0,-1/0),new Kn(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let t=0,n=e.length;t<n;t++){const n=e[t];ji.setFromBufferAttribute(n),this.morphTargetsRelative?(Xi.addVectors(this.boundingBox.min,ji.min),this.boundingBox.expandByPoint(Xi),Xi.addVectors(this.boundingBox.max,ji.max),this.boundingBox.expandByPoint(Xi)):(this.boundingBox.expandByPoint(ji.min),this.boundingBox.expandByPoint(ji.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new gr);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Kn,1/0);if(t){const n=this.boundingSphere.center;if(ji.setFromBufferAttribute(t),e)for(let t=0,n=e.length;t<n;t++){const n=e[t];Wi.setFromBufferAttribute(n),this.morphTargetsRelative?(Xi.addVectors(ji.min,Wi.min),ji.expandByPoint(Xi),Xi.addVectors(ji.max,Wi.max),ji.expandByPoint(Xi)):(ji.expandByPoint(Wi.min),ji.expandByPoint(Wi.max))}ji.getCenter(n);let r=0;for(let e=0,i=t.count;e<i;e++)Xi.fromBufferAttribute(t,e),r=Math.max(r,n.distanceToSquared(Xi));if(e)for(let i=0,o=e.length;i<o;i++){const o=e[i],a=this.morphTargetsRelative;for(let e=0,i=o.count;e<i;e++)Xi.fromBufferAttribute(o,e),a&&(Vi.fromBufferAttribute(t,e),Xi.add(Vi)),r=Math.max(r,n.distanceToSquared(Xi))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let n=this.getAttribute("normal");if(void 0===n)n=new Ti(new Float32Array(3*e.count),3),this.setAttribute("normal",n);else for(let t=0,e=n.count;t<e;t++)n.setXYZ(t,0,0,0);const r=new Kn,i=new Kn,o=new Kn,a=new Kn,s=new Kn,c=new Kn,l=new Kn,u=new Kn;if(t)for(let h=0,d=t.count;h<d;h+=3){const d=t.getX(h+0),p=t.getX(h+1),f=t.getX(h+2);r.fromBufferAttribute(e,d),i.fromBufferAttribute(e,p),o.fromBufferAttribute(e,f),l.subVectors(o,i),u.subVectors(r,i),l.cross(u),a.fromBufferAttribute(n,d),s.fromBufferAttribute(n,p),c.fromBufferAttribute(n,f),a.add(l),s.add(l),c.add(l),n.setXYZ(d,a.x,a.y,a.z),n.setXYZ(p,s.x,s.y,s.z),n.setXYZ(f,c.x,c.y,c.z)}else for(let t=0,a=e.count;t<a;t+=3)r.fromBufferAttribute(e,t+0),i.fromBufferAttribute(e,t+1),o.fromBufferAttribute(e,t+2),l.subVectors(o,i),u.subVectors(r,i),l.cross(u),n.setXYZ(t+0,l.x,l.y,l.z),n.setXYZ(t+1,l.x,l.y,l.z),n.setXYZ(t+2,l.x,l.y,l.z);this.normalizeNormals(),n.needsUpdate=!0}},merge:function(t,e){if(!t||!t.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t);void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const n=this.attributes;for(const r in n){if(void 0===t.attributes[r])continue;const i=n[r].array,o=t.attributes[r],a=o.array,s=o.itemSize*e,c=Math.min(a.length,i.length-s);for(let t=0,e=s;t<c;t++,e++)i[e]=a[t]}return this},normalizeNormals:function(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)Xi.fromBufferAttribute(t,e),Xi.normalize(),t.setXYZ(e,Xi.x,Xi.y,Xi.z)},toNonIndexed:function(){function t(t,e){const n=t.array,r=t.itemSize,i=t.normalized,o=new n.constructor(e.length*r);let a=0,s=0;for(let t=0,i=e.length;t<i;t++){a=e[t]*r;for(let t=0;t<r;t++)o[s++]=n[a++]}return new Ti(o,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;const e=new qi,n=this.index.array,r=this.attributes;for(const i in r){const o=t(r[i],n);e.setAttribute(i,o)}const i=this.morphAttributes;for(const r in i){const o=[],a=i[r];for(let e=0,r=a.length;e<r;e++){const r=t(a[e],n);o.push(r)}e.morphAttributes[r]=o}e.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let t=0,n=o.length;t<n;t++){const n=o[t];e.addGroup(n.start,n.count,n.materialIndex)}return e},toJSON:function(){const t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const e=this.parameters;for(const n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const e in n){const r=n[e],i=r.toJSON(t.data);""!==r.name&&(i.name=r.name),t.data.attributes[e]=i}const r={};let i=!1;for(const e in this.morphAttributes){const n=this.morphAttributes[e],o=[];for(let e=0,r=n.length;e<r;e++){const r=n[e],i=r.toJSON(t.data);""!==r.name&&(i.name=r.name),o.push(i)}o.length>0&&(r[e]=o,i=!0)}i&&(t.data.morphAttributes=r,t.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(t.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(t.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),t},clone:function(){return(new qi).copy(this)},copy:function(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;null!==n&&this.setIndex(n.clone(e));const r=t.attributes;for(const t in r){const n=r[t];this.setAttribute(t,n.clone(e))}const i=t.morphAttributes;for(const t in i){const n=[],r=i[t];for(let t=0,i=r.length;t<i;t++)n.push(r[t].clone(e));this.morphAttributes[t]=n}this.morphTargetsRelative=t.morphTargetsRelative;const o=t.groups;for(let t=0,e=o.length;t<e;t++){const e=o[t];this.addGroup(e.start,e.count,e.materialIndex)}const a=t.boundingBox;null!==a&&(this.boundingBox=a.clone());const s=t.boundingSphere;return null!==s&&(this.boundingSphere=s.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});const Yi=new Tr,Zi=new Sr,Ji=new gr,Ki=new Kn,Qi=new Kn,$i=new Kn,to=new Kn,eo=new Kn,no=new Kn,ro=new Kn,io=new Kn,oo=new Kn,ao=new Gn,so=new Gn,co=new Gn,lo=new Kn,uo=new Kn;function ho(t,e){Jr.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new qi,this.material=void 0!==e?e:new _i,this.updateMorphTargets()}function po(t,e,n,r,i,o,a,s){let c;if(c=e.side===m?r.intersectTriangle(a,o,i,!0,s):r.intersectTriangle(i,o,a,e.side!==g,s),null===c)return null;uo.copy(s),uo.applyMatrix4(t.matrixWorld);const l=n.ray.origin.distanceTo(uo);return l<n.near||l>n.far?null:{distance:l,point:uo.clone(),object:t}}function fo(t,e,n,r,i,o,a,s,c,l,u,h){Ki.fromBufferAttribute(i,l),Qi.fromBufferAttribute(i,u),$i.fromBufferAttribute(i,h);const d=t.morphTargetInfluences;if(e.morphTargets&&o&&d){ro.set(0,0,0),io.set(0,0,0),oo.set(0,0,0);for(let t=0,e=o.length;t<e;t++){const e=d[t],n=o[t];0!==e&&(to.fromBufferAttribute(n,l),eo.fromBufferAttribute(n,u),no.fromBufferAttribute(n,h),a?(ro.addScaledVector(to,e),io.addScaledVector(eo,e),oo.addScaledVector(no,e)):(ro.addScaledVector(to.sub(Ki),e),io.addScaledVector(eo.sub(Qi),e),oo.addScaledVector(no.sub($i),e)))}Ki.add(ro),Qi.add(io),$i.add(oo)}t.isSkinnedMesh&&(t.boneTransform(l,Ki),t.boneTransform(u,Qi),t.boneTransform(h,$i));const p=po(t,e,n,r,Ki,Qi,$i,lo);if(p){s&&(ao.fromBufferAttribute(s,l),so.fromBufferAttribute(s,u),co.fromBufferAttribute(s,h),p.uv=hi.getUV(lo,Ki,Qi,$i,ao,so,co,new Gn)),c&&(ao.fromBufferAttribute(c,l),so.fromBufferAttribute(c,u),co.fromBufferAttribute(c,h),p.uv2=hi.getUV(lo,Ki,Qi,$i,ao,so,co,new Gn));const t=new xi(l,u,h);hi.getNormal(Ki,Qi,$i,t.normal),p.face=t}return p}ho.prototype=Object.assign(Object.create(Jr.prototype),{constructor:ho,isMesh:!0,copy:function(t){return Jr.prototype.copy.call(this,t),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this},updateMorphTargets:function(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const t=e[n[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,n=t.length;e<n;e++){const n=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}}}else{const e=t.morphTargets;void 0!==e&&e.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(t,e){const n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0===r)return;if(null===n.boundingSphere&&n.computeBoundingSphere(),Ji.copy(n.boundingSphere),Ji.applyMatrix4(i),!1===t.ray.intersectsSphere(Ji))return;if(Yi.copy(i).invert(),Zi.copy(t.ray).applyMatrix4(Yi),null!==n.boundingBox&&!1===Zi.intersectsBox(n.boundingBox))return;let o;if(n.isBufferGeometry){const i=n.index,a=n.attributes.position,s=n.morphAttributes.position,c=n.morphTargetsRelative,l=n.attributes.uv,u=n.attributes.uv2,h=n.groups,d=n.drawRange;if(null!==i)if(Array.isArray(r))for(let n=0,p=h.length;n<p;n++){const p=h[n],f=r[p.materialIndex];for(let n=Math.max(p.start,d.start),r=Math.min(p.start+p.count,d.start+d.count);n<r;n+=3){const r=i.getX(n),h=i.getX(n+1),d=i.getX(n+2);o=fo(this,f,t,Zi,a,s,c,l,u,r,h,d),o&&(o.faceIndex=Math.floor(n/3),o.face.materialIndex=p.materialIndex,e.push(o))}}else{for(let n=Math.max(0,d.start),h=Math.min(i.count,d.start+d.count);n<h;n+=3){const h=i.getX(n),d=i.getX(n+1),p=i.getX(n+2);o=fo(this,r,t,Zi,a,s,c,l,u,h,d,p),o&&(o.faceIndex=Math.floor(n/3),e.push(o))}}else if(void 0!==a)if(Array.isArray(r))for(let n=0,i=h.length;n<i;n++){const i=h[n],p=r[i.materialIndex];for(let n=Math.max(i.start,d.start),r=Math.min(i.start+i.count,d.start+d.count);n<r;n+=3){o=fo(this,p,t,Zi,a,s,c,l,u,n,n+1,n+2),o&&(o.faceIndex=Math.floor(n/3),o.face.materialIndex=i.materialIndex,e.push(o))}}else{for(let n=Math.max(0,d.start),i=Math.min(a.count,d.start+d.count);n<i;n+=3){o=fo(this,r,t,Zi,a,s,c,l,u,n,n+1,n+2),o&&(o.faceIndex=Math.floor(n/3),e.push(o))}}}else if(n.isGeometry){const i=Array.isArray(r),a=n.vertices,s=n.faces;let c;const l=n.faceVertexUvs[0];l.length>0&&(c=l);for(let n=0,l=s.length;n<l;n++){const l=s[n],u=i?r[l.materialIndex]:r;if(void 0===u)continue;const h=a[l.a],d=a[l.b],p=a[l.c];if(o=po(this,u,t,Zi,h,d,p,lo),o){if(c&&c[n]){const t=c[n];ao.copy(t[0]),so.copy(t[1]),co.copy(t[2]),o.uv=hi.getUV(lo,h,d,p,ao,so,co,new Gn)}o.face=l,o.faceIndex=n,e.push(o)}}}}});class mo extends qi{constructor(t=1,e=1,n=1,r=1,i=1,o=1){super(),this.type="BoxBufferGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:i,depthSegments:o};const a=this;r=Math.floor(r),i=Math.floor(i),o=Math.floor(o);const s=[],c=[],l=[],u=[];let h=0,d=0;function p(t,e,n,r,i,o,p,f,m,g,v){const y=o/m,x=p/g,b=o/2,w=p/2,_=f/2,M=m+1,S=g+1;let T=0,E=0;const A=new Kn;for(let o=0;o<S;o++){const a=o*x-w;for(let s=0;s<M;s++){const h=s*y-b;A[t]=h*r,A[e]=a*i,A[n]=_,c.push(A.x,A.y,A.z),A[t]=0,A[e]=0,A[n]=f>0?1:-1,l.push(A.x,A.y,A.z),u.push(s/m),u.push(1-o/g),T+=1}}for(let t=0;t<g;t++)for(let e=0;e<m;e++){const n=h+e+M*t,r=h+e+M*(t+1),i=h+(e+1)+M*(t+1),o=h+(e+1)+M*t;s.push(n,r,o),s.push(r,i,o),E+=6}a.addGroup(d,E,v),d+=E,h+=T}p("z","y","x",-1,-1,n,e,t,o,i,0),p("z","y","x",1,-1,n,e,-t,o,i,1),p("x","z","y",1,1,t,n,e,r,o,2),p("x","z","y",1,-1,t,n,-e,r,o,3),p("x","y","z",1,-1,t,e,n,r,i,4),p("x","y","z",-1,-1,t,e,-n,r,i,5),this.setIndex(s),this.setAttribute("position",new Ni(c,3)),this.setAttribute("normal",new Ni(l,3)),this.setAttribute("uv",new Ni(u,2))}}function go(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function vo(t){const e={};for(let n=0;n<t.length;n++){const r=go(t[n]);for(const t in r)e[t]=r[t]}return e}const yo={clone:go,merge:vo};function xo(t){wi.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}function bo(){Jr.call(this),this.type="Camera",this.matrixWorldInverse=new Tr,this.projectionMatrix=new Tr,this.projectionMatrixInverse=new Tr}function wo(t=50,e=1,n=.1,r=2e3){bo.call(this),this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}xo.prototype=Object.create(wi.prototype),xo.prototype.constructor=xo,xo.prototype.isShaderMaterial=!0,xo.prototype.copy=function(t){return wi.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=go(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this},xo.prototype.toJSON=function(t){const e=wi.prototype.toJSON.call(this,t);e.glslVersion=this.glslVersion,e.uniforms={};for(const n in this.uniforms){const r=this.uniforms[n].value;r&&r.isTexture?e.uniforms[n]={type:"t",value:r.toJSON(t).uuid}:r&&r.isColor?e.uniforms[n]={type:"c",value:r.getHex()}:r&&r.isVector2?e.uniforms[n]={type:"v2",value:r.toArray()}:r&&r.isVector3?e.uniforms[n]={type:"v3",value:r.toArray()}:r&&r.isVector4?e.uniforms[n]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?e.uniforms[n]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?e.uniforms[n]={type:"m4",value:r.toArray()}:e.uniforms[n]={value:r}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;const n={};for(const t in this.extensions)!0===this.extensions[t]&&(n[t]=!0);return Object.keys(n).length>0&&(e.extensions=n),e},bo.prototype=Object.assign(Object.create(Jr.prototype),{constructor:bo,isCamera:!0,copy:function(t,e){return Jr.prototype.copy.call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new Kn),this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()},updateMatrixWorld:function(t){Jr.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()},updateWorldMatrix:function(t,e){Jr.prototype.updateWorldMatrix.call(this,t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()},clone:function(){return(new this.constructor).copy(this)}}),wo.prototype=Object.assign(Object.create(bo.prototype),{constructor:wo,isPerspectiveCamera:!0,copy:function(t,e){return bo.prototype.copy.call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){const e=.5*this.getFilmHeight()/t;this.fov=2*zn.RAD2DEG*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){const t=Math.tan(.5*zn.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*zn.RAD2DEG*Math.atan(Math.tan(.5*zn.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,n,r,i,o){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){const t=this.near;let e=t*Math.tan(.5*zn.DEG2RAD*this.fov)/this.zoom,n=2*e,r=this.aspect*n,i=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const t=o.fullWidth,a=o.fullHeight;i+=o.offsetX*r/t,e-=o.offsetY*n/a,r*=o.width/t,n*=o.height/a}const a=this.filmOffset;0!==a&&(i+=t*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,e,e-n,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()},toJSON:function(t){const e=Jr.prototype.toJSON.call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}});function _o(t,e,n){if(Jr.call(this),this.type="CubeCamera",!0!==n.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=n;const r=new wo(90,1,t,e);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new Kn(1,0,0)),this.add(r);const i=new wo(90,1,t,e);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new Kn(-1,0,0)),this.add(i);const o=new wo(90,1,t,e);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new Kn(0,1,0)),this.add(o);const a=new wo(90,1,t,e);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new Kn(0,-1,0)),this.add(a);const s=new wo(90,1,t,e);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new Kn(0,0,1)),this.add(s);const c=new wo(90,1,t,e);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new Kn(0,0,-1)),this.add(c),this.update=function(t,e){null===this.parent&&this.updateMatrixWorld();const l=t.xr.enabled,u=t.getRenderTarget();t.xr.enabled=!1;const h=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0),t.render(e,r),t.setRenderTarget(n,1),t.render(e,i),t.setRenderTarget(n,2),t.render(e,o),t.setRenderTarget(n,3),t.render(e,a),t.setRenderTarget(n,4),t.render(e,s),n.texture.generateMipmaps=h,t.setRenderTarget(n,5),t.render(e,c),t.setRenderTarget(u),t.xr.enabled=l}}function Mo(t,e,n,r,i,o,a,s,c,l){t=void 0!==t?t:[],e=void 0!==e?e:ot,a=void 0!==a?a:Ft,Wn.call(this,t,e,n,r,i,o,a,s,c,l),this.flipY=!1,this._needsFlipEnvMap=!0}function So(t,e,n){Number.isInteger(e)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),e=n),Yn.call(this,t,t,e),e=e||{},this.texture=new Mo(void 0,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.encoding),this.texture._needsFlipEnvMap=!1}function To(t,e,n,r,i,o,a,s,c,l,u,h){Wn.call(this,null,o,a,s,c,l,r,i,u,h),this.image={data:t||null,width:e||1,height:n||1},this.magFilter=void 0!==c?c:ft,this.minFilter=void 0!==l?l:ft,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}_o.prototype=Object.create(Jr.prototype),_o.prototype.constructor=_o,Mo.prototype=Object.create(Wn.prototype),Mo.prototype.constructor=Mo,Mo.prototype.isCubeTexture=!0,Object.defineProperty(Mo.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}}),So.prototype=Object.create(Yn.prototype),So.prototype.constructor=So,So.prototype.isWebGLCubeRenderTarget=!0,So.prototype.fromEquirectangularTexture=function(t,e){this.texture.type=e.type,this.texture.format=Ut,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t#include <begin_vertex>\n\t\t\t\t#include <project_vertex>\n\n\t\t\t}\n\t\t",fragmentShader:"\n\n\t\t\tuniform sampler2D tEquirect;\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t}\n\t\t"},r=new mo(5,5,5),i=new xo({name:"CubemapFromEquirect",uniforms:go(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:m,blending:x});i.uniforms.tEquirect.value=e;const o=new ho(r,i),a=e.minFilter;e.minFilter===_t&&(e.minFilter=xt);return new _o(1,10,this).update(t,o),e.minFilter=a,o.geometry.dispose(),o.material.dispose(),this},So.prototype.clear=function(t,e,n,r){const i=t.getRenderTarget();for(let i=0;i<6;i++)t.setRenderTarget(this,i),t.clear(e,n,r);t.setRenderTarget(i)},To.prototype=Object.create(Wn.prototype),To.prototype.constructor=To,To.prototype.isDataTexture=!0;const Eo=new gr,Ao=new Kn;class Lo{constructor(t,e,n,r,i,o){this.planes=[void 0!==t?t:new ti,void 0!==e?e:new ti,void 0!==n?n:new ti,void 0!==r?r:new ti,void 0!==i?i:new ti,void 0!==o?o:new ti]}set(t,e,n,r,i,o){const a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this}clone(){return(new this.constructor).copy(this)}copy(t){const e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t){const e=this.planes,n=t.elements,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],c=n[5],l=n[6],u=n[7],h=n[8],d=n[9],p=n[10],f=n[11],m=n[12],g=n[13],v=n[14],y=n[15];return e[0].setComponents(a-r,u-s,f-h,y-m).normalize(),e[1].setComponents(a+r,u+s,f+h,y+m).normalize(),e[2].setComponents(a+i,u+c,f+d,y+g).normalize(),e[3].setComponents(a-i,u-c,f-d,y-g).normalize(),e[4].setComponents(a-o,u-l,f-p,y-v).normalize(),e[5].setComponents(a+o,u+l,f+p,y+v).normalize(),this}intersectsObject(t){const e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),Eo.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(Eo)}intersectsSprite(t){return Eo.center.set(0,0,0),Eo.radius=.7071067811865476,Eo.applyMatrix4(t.matrixWorld),this.intersectsSphere(Eo)}intersectsSphere(t){const e=this.planes,n=t.center,r=-t.radius;for(let t=0;t<6;t++){if(e[t].distanceToPoint(n)<r)return!1}return!0}intersectsBox(t){const e=this.planes;for(let n=0;n<6;n++){const r=e[n];if(Ao.x=r.normal.x>0?t.max.x:t.min.x,Ao.y=r.normal.y>0?t.max.y:t.min.y,Ao.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(Ao)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}}function Ro(){let t=null,e=!1,n=null,r=null;function i(e,o){n(e,o),r=t.requestAnimationFrame(i)}return{start:function(){!0!==e&&null!==n&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(t){n=t},setContext:function(e){t=e}}}function Po(t,e){const n=e.isWebGL2,r=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),r.get(t)},remove:function(e){e.isInterleavedBufferAttribute&&(e=e.data);const n=r.get(e);n&&(t.deleteBuffer(n.buffer),r.delete(e))},update:function(e,i){if(e.isGLBufferAttribute){const t=r.get(e);return void((!t||t.version<e.version)&&r.set(e,{buffer:e.buffer,type:e.type,bytesPerElement:e.elementSize,version:e.version}))}e.isInterleavedBufferAttribute&&(e=e.data);const o=r.get(e);void 0===o?r.set(e,function(e,r){const i=e.array,o=e.usage,a=t.createBuffer();t.bindBuffer(r,a),t.bufferData(r,i,o),e.onUploadCallback();let s=5126;return i instanceof Float32Array?s=5126:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?e.isFloat16BufferAttribute?n?s=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):s=5123:i instanceof Int16Array?s=5122:i instanceof Uint32Array?s=5125:i instanceof Int32Array?s=5124:i instanceof Int8Array?s=5120:i instanceof Uint8Array&&(s=5121),{buffer:a,type:s,bytesPerElement:i.BYTES_PER_ELEMENT,version:e.version}}(e,i)):o.version<e.version&&(!function(e,r,i){const o=r.array,a=r.updateRange;t.bindBuffer(i,e),-1===a.count?t.bufferSubData(i,0,o):(n?t.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o,a.offset,a.count):t.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o.subarray(a.offset,a.offset+a.count)),a.count=-1)}(o.buffer,e,i),o.version=e.version)}}}class Co extends qi{constructor(t=1,e=1,n=1,r=1){super(),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r};const i=t/2,o=e/2,a=Math.floor(n),s=Math.floor(r),c=a+1,l=s+1,u=t/a,h=e/s,d=[],p=[],f=[],m=[];for(let t=0;t<l;t++){const e=t*h-o;for(let n=0;n<c;n++){const r=n*u-i;p.push(r,-e,0),f.push(0,0,1),m.push(n/a),m.push(1-t/s)}}for(let t=0;t<s;t++)for(let e=0;e<a;e++){const n=e+c*t,r=e+c*(t+1),i=e+1+c*(t+1),o=e+1+c*t;d.push(n,r,o),d.push(r,i,o)}this.setIndex(d),this.setAttribute("position",new Ni(p,3)),this.setAttribute("normal",new Ni(f,3)),this.setAttribute("uv",new Ni(m,2))}}const Io={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor.xyz *= color.xyz;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat specularRoughness;\n\tvec3 specularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\t\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\t\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tmat3 tsn = mat3( S, T, N );\n\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmissionmap_fragment:"#ifdef USE_TRANSMISSIONMAP\n\ttotalTransmission *= texture2D( transmissionMap, vUv ).r;\n#endif",transmissionmap_pars_fragment:"#ifdef USE_TRANSMISSIONMAP\n\tuniform sampler2D transmissionMap;\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSMISSION\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSMISSION\n\tuniform float transmission;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <transmissionmap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#ifdef TRANSMISSION\n\t\tfloat totalTransmission = transmission;\n\t#endif\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <transmissionmap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSMISSION\n\t\tdiffuseColor.a *= mix( saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) ), 1.0, metalness );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},Oo={common:{diffuse:{value:new yi(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Hn},uv2Transform:{value:new Hn},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Gn(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new yi(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new yi(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Hn}},sprite:{diffuse:{value:new yi(15658734)},opacity:{value:1},center:{value:new Gn(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Hn}}},No={basic:{uniforms:vo([Oo.common,Oo.specularmap,Oo.envmap,Oo.aomap,Oo.lightmap,Oo.fog]),vertexShader:Io.meshbasic_vert,fragmentShader:Io.meshbasic_frag},lambert:{uniforms:vo([Oo.common,Oo.specularmap,Oo.envmap,Oo.aomap,Oo.lightmap,Oo.emissivemap,Oo.fog,Oo.lights,{emissive:{value:new yi(0)}}]),vertexShader:Io.meshlambert_vert,fragmentShader:Io.meshlambert_frag},phong:{uniforms:vo([Oo.common,Oo.specularmap,Oo.envmap,Oo.aomap,Oo.lightmap,Oo.emissivemap,Oo.bumpmap,Oo.normalmap,Oo.displacementmap,Oo.fog,Oo.lights,{emissive:{value:new yi(0)},specular:{value:new yi(1118481)},shininess:{value:30}}]),vertexShader:Io.meshphong_vert,fragmentShader:Io.meshphong_frag},standard:{uniforms:vo([Oo.common,Oo.envmap,Oo.aomap,Oo.lightmap,Oo.emissivemap,Oo.bumpmap,Oo.normalmap,Oo.displacementmap,Oo.roughnessmap,Oo.metalnessmap,Oo.fog,Oo.lights,{emissive:{value:new yi(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Io.meshphysical_vert,fragmentShader:Io.meshphysical_frag},toon:{uniforms:vo([Oo.common,Oo.aomap,Oo.lightmap,Oo.emissivemap,Oo.bumpmap,Oo.normalmap,Oo.displacementmap,Oo.gradientmap,Oo.fog,Oo.lights,{emissive:{value:new yi(0)}}]),vertexShader:Io.meshtoon_vert,fragmentShader:Io.meshtoon_frag},matcap:{uniforms:vo([Oo.common,Oo.bumpmap,Oo.normalmap,Oo.displacementmap,Oo.fog,{matcap:{value:null}}]),vertexShader:Io.meshmatcap_vert,fragmentShader:Io.meshmatcap_frag},points:{uniforms:vo([Oo.points,Oo.fog]),vertexShader:Io.points_vert,fragmentShader:Io.points_frag},dashed:{uniforms:vo([Oo.common,Oo.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Io.linedashed_vert,fragmentShader:Io.linedashed_frag},depth:{uniforms:vo([Oo.common,Oo.displacementmap]),vertexShader:Io.depth_vert,fragmentShader:Io.depth_frag},normal:{uniforms:vo([Oo.common,Oo.bumpmap,Oo.normalmap,Oo.displacementmap,{opacity:{value:1}}]),vertexShader:Io.normal_vert,fragmentShader:Io.normal_frag},sprite:{uniforms:vo([Oo.sprite,Oo.fog]),vertexShader:Io.sprite_vert,fragmentShader:Io.sprite_frag},background:{uniforms:{uvTransform:{value:new Hn},t2D:{value:null}},vertexShader:Io.background_vert,fragmentShader:Io.background_frag},cube:{uniforms:vo([Oo.envmap,{opacity:{value:1}}]),vertexShader:Io.cube_vert,fragmentShader:Io.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Io.equirect_vert,fragmentShader:Io.equirect_frag},distanceRGBA:{uniforms:vo([Oo.common,Oo.displacementmap,{referencePosition:{value:new Kn},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Io.distanceRGBA_vert,fragmentShader:Io.distanceRGBA_frag},shadow:{uniforms:vo([Oo.lights,Oo.fog,{color:{value:new yi(0)},opacity:{value:1}}]),vertexShader:Io.shadow_vert,fragmentShader:Io.shadow_frag}};function Do(t,e,n,r,i){const o=new yi(0);let a,s,c=0,l=null,u=0,h=null;function d(t,e){n.buffers.color.setClear(t.r,t.g,t.b,e,i)}return{getClearColor:function(){return o},setClearColor:function(t,e=1){o.set(t),c=e,d(o,c)},getClearAlpha:function(){return c},setClearAlpha:function(t){c=t,d(o,c)},render:function(n,i,p,g){let v=!0===i.isScene?i.background:null;v&&v.isTexture&&(v=e.get(v));const y=t.xr,x=y.getSession&&y.getSession();x&&"additive"===x.environmentBlendMode&&(v=null),null===v?d(o,c):v&&v.isColor&&(d(v,1),g=!0),(t.autoClear||g)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),v&&(v.isCubeTexture||v.isWebGLCubeRenderTarget||v.mapping===lt)?(void 0===s&&(s=new ho(new mo(1,1,1),new xo({name:"BackgroundCubeMaterial",uniforms:go(No.cube.uniforms),vertexShader:No.cube.vertexShader,fragmentShader:No.cube.fragmentShader,side:m,depthTest:!1,depthWrite:!1,fog:!1})),s.geometry.deleteAttribute("normal"),s.geometry.deleteAttribute("uv"),s.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(s.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(s)),v.isWebGLCubeRenderTarget&&(v=v.texture),s.material.uniforms.envMap.value=v,s.material.uniforms.flipEnvMap.value=v.isCubeTexture&&v._needsFlipEnvMap?-1:1,l===v&&u===v.version&&h===t.toneMapping||(s.material.needsUpdate=!0,l=v,u=v.version,h=t.toneMapping),n.unshift(s,s.geometry,s.material,0,0,null)):v&&v.isTexture&&(void 0===a&&(a=new ho(new Co(2,2),new xo({name:"BackgroundMaterial",uniforms:go(No.background.uniforms),vertexShader:No.background.vertexShader,fragmentShader:No.background.fragmentShader,side:f,depthTest:!1,depthWrite:!1,fog:!1})),a.geometry.deleteAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(a)),a.material.uniforms.t2D.value=v,!0===v.matrixAutoUpdate&&v.updateMatrix(),a.material.uniforms.uvTransform.value.copy(v.matrix),l===v&&u===v.version&&h===t.toneMapping||(a.material.needsUpdate=!0,l=v,u=v.version,h=t.toneMapping),n.unshift(a,a.geometry,a.material,0,0,null))}}}function Bo(t,e,n,r){const i=t.getParameter(34921),o=r.isWebGL2?null:e.get("OES_vertex_array_object"),a=r.isWebGL2||null!==o,s={},c=d(null);let l=c;function u(e){return r.isWebGL2?t.bindVertexArray(e):o.bindVertexArrayOES(e)}function h(e){return r.isWebGL2?t.deleteVertexArray(e):o.deleteVertexArrayOES(e)}function d(t){const e=[],n=[],r=[];for(let t=0;t<i;t++)e[t]=0,n[t]=0,r[t]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:n,attributeDivisors:r,object:t,attributes:{},index:null}}function p(){const t=l.newAttributes;for(let e=0,n=t.length;e<n;e++)t[e]=0}function f(t){m(t,0)}function m(n,i){const o=l.newAttributes,a=l.enabledAttributes,s=l.attributeDivisors;if(o[n]=1,0===a[n]&&(t.enableVertexAttribArray(n),a[n]=1),s[n]!==i){(r.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),s[n]=i}}function g(){const e=l.newAttributes,n=l.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==e[r]&&(t.disableVertexAttribArray(r),n[r]=0)}function v(e,n,i,o,a,s){!0!==r.isWebGL2||5124!==i&&5125!==i?t.vertexAttribPointer(e,n,i,o,a,s):t.vertexAttribIPointer(e,n,i,a,s)}function y(){x(),l!==c&&(l=c,u(l.object))}function x(){c.geometry=null,c.program=null,c.wireframe=!1}return{setup:function(i,c,h,y,x){let b=!1;if(a){const e=function(e,n,i){const a=!0===i.wireframe;let c=s[e.id];void 0===c&&(c={},s[e.id]=c);let l=c[n.id];void 0===l&&(l={},c[n.id]=l);let u=l[a];void 0===u&&(u=d(r.isWebGL2?t.createVertexArray():o.createVertexArrayOES()),l[a]=u);return u}(y,h,c);l!==e&&(l=e,u(l.object)),b=function(t,e){const n=l.attributes,r=t.attributes;let i=0;for(const t in r){const e=n[t],o=r[t];if(void 0===e)return!0;if(e.attribute!==o)return!0;if(e.data!==o.data)return!0;i++}return l.attributesNum!==i||l.index!==e}(y,x),b&&function(t,e){const n={},r=t.attributes;let i=0;for(const t in r){const e=r[t],o={};o.attribute=e,e.data&&(o.data=e.data),n[t]=o,i++}l.attributes=n,l.attributesNum=i,l.index=e}(y,x)}else{const t=!0===c.wireframe;l.geometry===y.id&&l.program===h.id&&l.wireframe===t||(l.geometry=y.id,l.program=h.id,l.wireframe=t,b=!0)}!0===i.isInstancedMesh&&(b=!0),null!==x&&n.update(x,34963),b&&(!function(i,o,a,s){if(!1===r.isWebGL2&&(i.isInstancedMesh||s.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;p();const c=s.attributes,l=a.getAttributes(),u=o.defaultAttributeValues;for(const e in l){const r=l[e];if(r>=0){const o=c[e];if(void 0!==o){const e=o.normalized,i=o.itemSize,a=n.get(o);if(void 0===a)continue;const c=a.buffer,l=a.type,u=a.bytesPerElement;if(o.isInterleavedBufferAttribute){const n=o.data,a=n.stride,h=o.offset;n&&n.isInstancedInterleavedBuffer?(m(r,n.meshPerAttribute),void 0===s._maxInstanceCount&&(s._maxInstanceCount=n.meshPerAttribute*n.count)):f(r),t.bindBuffer(34962,c),v(r,i,l,e,a*u,h*u)}else o.isInstancedBufferAttribute?(m(r,o.meshPerAttribute),void 0===s._maxInstanceCount&&(s._maxInstanceCount=o.meshPerAttribute*o.count)):f(r),t.bindBuffer(34962,c),v(r,i,l,e,0,0)}else if("instanceMatrix"===e){const e=n.get(i.instanceMatrix);if(void 0===e)continue;const o=e.buffer,a=e.type;m(r+0,1),m(r+1,1),m(r+2,1),m(r+3,1),t.bindBuffer(34962,o),t.vertexAttribPointer(r+0,4,a,!1,64,0),t.vertexAttribPointer(r+1,4,a,!1,64,16),t.vertexAttribPointer(r+2,4,a,!1,64,32),t.vertexAttribPointer(r+3,4,a,!1,64,48)}else if("instanceColor"===e){const e=n.get(i.instanceColor);if(void 0===e)continue;const o=e.buffer,a=e.type;m(r,1),t.bindBuffer(34962,o),t.vertexAttribPointer(r,3,a,!1,12,0)}else if(void 0!==u){const n=u[e];if(void 0!==n)switch(n.length){case 2:t.vertexAttrib2fv(r,n);break;case 3:t.vertexAttrib3fv(r,n);break;case 4:t.vertexAttrib4fv(r,n);break;default:t.vertexAttrib1fv(r,n)}}}}g()}(i,c,h,y),null!==x&&t.bindBuffer(34963,n.get(x).buffer))},reset:y,resetDefaultState:x,dispose:function(){y();for(const t in s){const e=s[t];for(const t in e){const n=e[t];for(const t in n)h(n[t].object),delete n[t];delete e[t]}delete s[t]}},releaseStatesOfGeometry:function(t){if(void 0===s[t.id])return;const e=s[t.id];for(const t in e){const n=e[t];for(const t in n)h(n[t].object),delete n[t];delete e[t]}delete s[t.id]},releaseStatesOfProgram:function(t){for(const e in s){const n=s[e];if(void 0===n[t.id])continue;const r=n[t.id];for(const t in r)h(r[t].object),delete r[t];delete n[t.id]}},initAttributes:p,enableAttribute:f,disableUnusedAttributes:g}}function Fo(t,e,n,r){const i=r.isWebGL2;let o;this.setMode=function(t){o=t},this.render=function(e,r){t.drawArrays(o,e,r),n.update(r,o,1)},this.renderInstances=function(r,a,s){if(0===s)return;let c,l;if(i)c=t,l="drawArraysInstanced";else if(c=e.get("ANGLE_instanced_arrays"),l="drawArraysInstancedANGLE",null===c)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[l](o,r,a,s),n.update(a,o,s)}}function Uo(t,e,n){let r;function i(e){if("highp"===e){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&t instanceof WebGL2ComputeRenderingContext;let a=void 0!==n.precision?n.precision:"highp";const s=i(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);const c=!0===n.logarithmicDepthBuffer,l=t.getParameter(34930),u=t.getParameter(35660),h=t.getParameter(3379),d=t.getParameter(34076),p=t.getParameter(34921),f=t.getParameter(36347),m=t.getParameter(36348),g=t.getParameter(36349),v=u>0,y=o||!!e.get("OES_texture_float");return{isWebGL2:o,getMaxAnisotropy:function(){if(void 0!==r)return r;const n=e.get("EXT_texture_filter_anisotropic");return r=null!==n?t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0,r},getMaxPrecision:i,precision:a,logarithmicDepthBuffer:c,maxTextures:l,maxVertexTextures:u,maxTextureSize:h,maxCubemapSize:d,maxAttributes:p,maxVertexUniforms:f,maxVaryings:m,maxFragmentUniforms:g,vertexTextures:v,floatFragmentTextures:y,floatVertexTextures:v&&y,maxSamples:o?t.getParameter(36183):0}}function zo(t){const e=this;let n=null,r=0,i=!1,o=!1;const a=new ti,s=new Hn,c={value:null,needsUpdate:!1};function l(){c.value!==n&&(c.value=n,c.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function u(t,n,r,i){const o=null!==t?t.length:0;let l=null;if(0!==o){if(l=c.value,!0!==i||null===l){const e=r+4*o,i=n.matrixWorldInverse;s.getNormalMatrix(i),(null===l||l.length<e)&&(l=new Float32Array(e));for(let e=0,n=r;e!==o;++e,n+=4)a.copy(t[e]).applyMatrix4(i,s),a.normal.toArray(l,n),l[n+3]=a.constant}c.value=l,c.needsUpdate=!0}return e.numPlanes=o,e.numIntersection=0,l}this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(t,e,o){const a=0!==t.length||e||0!==r||i;return i=e,n=u(t,o,0),r=t.length,a},this.beginShadows=function(){o=!0,u(null)},this.endShadows=function(){o=!1,l()},this.setState=function(e,a,s){const h=e.clippingPlanes,d=e.clipIntersection,p=e.clipShadows,f=t.get(e);if(!i||null===h||0===h.length||o&&!p)o?u(null):l();else{const t=o?0:r,e=4*t;let i=f.clippingState||null;c.value=i,i=u(h,a,e,s);for(let t=0;t!==e;++t)i[t]=n[t];f.clippingState=i,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=t}}}function Go(t){let e=new WeakMap;function n(t,e){return e===st?t.mapping=ot:e===ct&&(t.mapping=at),t}function r(t){const n=t.target;n.removeEventListener("dispose",r);const i=e.get(n);void 0!==i&&(e.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){const o=i.mapping;if(o===st||o===ct){if(e.has(i)){return n(e.get(i).texture,i.mapping)}{const o=i.image;if(o&&o.height>0){const a=t.getRenderList(),s=t.getRenderTarget(),c=t.getRenderState(),l=new So(o.height/2);return l.fromEquirectangularTexture(t,i),e.set(i,l),t.setRenderTarget(s),t.setRenderList(a),t.setRenderState(c),i.addEventListener("dispose",r),n(l.texture,i.mapping)}return null}}}return i},dispose:function(){e=new WeakMap}}}function Ho(t){const e={};return{has:function(n){if(void 0!==e[n])return null!==e[n];let r;switch(n){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=t.getExtension(n)}return e[n]=r,null!==r},get:function(t){return this.has(t)||console.warn("THREE.WebGLRenderer: "+t+" extension not supported."),e[t]}}}function ko(t,e,n,r){const i=new WeakMap,o=new WeakMap;function a(t){const s=t.target,c=i.get(s);null!==c.index&&e.remove(c.index);for(const t in c.attributes)e.remove(c.attributes[t]);s.removeEventListener("dispose",a),i.delete(s);const l=o.get(c);l&&(e.remove(l),o.delete(c)),r.releaseStatesOfGeometry(c),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(t){const n=[],r=t.index,i=t.attributes.position;let a=0;if(null!==r){const t=r.array;a=r.version;for(let e=0,r=t.length;e<r;e+=3){const r=t[e+0],i=t[e+1],o=t[e+2];n.push(r,i,i,o,o,r)}}else{const t=i.array;a=i.version;for(let e=0,r=t.length/3-1;e<r;e+=3){const t=e+0,r=e+1,i=e+2;n.push(t,r,r,i,i,t)}}const s=new(Fi(n)>65535?Ii:Pi)(n,1);s.version=a;const c=o.get(t);c&&e.remove(c),o.set(t,s)}return{get:function(t,e){let r=i.get(e);return r||(e.addEventListener("dispose",a),e.isBufferGeometry?r=e:e.isGeometry&&(void 0===e._bufferGeometry&&(e._bufferGeometry=(new qi).setFromObject(t)),r=e._bufferGeometry),i.set(e,r),n.memory.geometries++,r)},update:function(t){const n=t.attributes;for(const t in n)e.update(n[t],34962);const r=t.morphAttributes;for(const t in r){const n=r[t];for(let t=0,r=n.length;t<r;t++)e.update(n[t],34962)}},getWireframeAttribute:function(t){const e=o.get(t);if(e){const n=t.index;null!==n&&e.version<n.version&&s(t)}else s(t);return o.get(t)}}}function Vo(t,e,n,r){const i=r.isWebGL2;let o,a,s;this.setMode=function(t){o=t},this.setIndex=function(t){a=t.type,s=t.bytesPerElement},this.render=function(e,r){t.drawElements(o,r,a,e*s),n.update(r,o,1)},this.renderInstances=function(r,c,l){if(0===l)return;let u,h;if(i)u=t,h="drawElementsInstanced";else if(u=e.get("ANGLE_instanced_arrays"),h="drawElementsInstancedANGLE",null===u)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[h](o,c,a,r*s,l),n.update(c,o,l)}}function jo(t){const e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(t,n,r){switch(e.calls++,n){case 4:e.triangles+=r*(t/3);break;case 1:e.lines+=r*(t/2);break;case 3:e.lines+=r*(t-1);break;case 2:e.lines+=r*t;break;case 0:e.points+=r*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function Wo(t,e){return t[0]-e[0]}function Xo(t,e){return Math.abs(e[1])-Math.abs(t[1])}function qo(t){const e={},n=new Float32Array(8),r=[];for(let t=0;t<8;t++)r[t]=[t,0];return{update:function(i,o,a,s){const c=i.morphTargetInfluences,l=void 0===c?0:c.length;let u=e[o.id];if(void 0===u){u=[];for(let t=0;t<l;t++)u[t]=[t,0];e[o.id]=u}for(let t=0;t<l;t++){const e=u[t];e[0]=t,e[1]=c[t]}u.sort(Xo);for(let t=0;t<8;t++)t<l&&u[t][1]?(r[t][0]=u[t][0],r[t][1]=u[t][1]):(r[t][0]=Number.MAX_SAFE_INTEGER,r[t][1]=0);r.sort(Wo);const h=a.morphTargets&&o.morphAttributes.position,d=a.morphNormals&&o.morphAttributes.normal;let p=0;for(let t=0;t<8;t++){const e=r[t],i=e[0],a=e[1];i!==Number.MAX_SAFE_INTEGER&&a?(h&&o.getAttribute("morphTarget"+t)!==h[i]&&o.setAttribute("morphTarget"+t,h[i]),d&&o.getAttribute("morphNormal"+t)!==d[i]&&o.setAttribute("morphNormal"+t,d[i]),n[t]=a,p+=a):(h&&!0===o.hasAttribute("morphTarget"+t)&&o.deleteAttribute("morphTarget"+t),d&&!0===o.hasAttribute("morphNormal"+t)&&o.deleteAttribute("morphNormal"+t),n[t]=0)}const f=o.morphTargetsRelative?1:1-p;s.getUniforms().setValue(t,"morphTargetBaseInfluence",f),s.getUniforms().setValue(t,"morphTargetInfluences",n)}}}function Yo(t,e,n,r){let i=new WeakMap;return{update:function(t){const o=r.render.frame,a=t.geometry,s=e.get(t,a);return i.get(s)!==o&&(a.isGeometry&&s.updateFromObject(t),e.update(s),i.set(s,o)),t.isInstancedMesh&&(n.update(t.instanceMatrix,34962),null!==t.instanceColor&&n.update(t.instanceColor,34962)),s},dispose:function(){i=new WeakMap}}}function Zo(t=null,e=1,n=1,r=1){Wn.call(this,null),this.image={data:t,width:e,height:n,depth:r},this.magFilter=ft,this.minFilter=ft,this.wrapR=dt,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}function Jo(t=null,e=1,n=1,r=1){Wn.call(this,null),this.image={data:t,width:e,height:n,depth:r},this.magFilter=ft,this.minFilter=ft,this.wrapR=dt,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}No.physical={uniforms:vo([No.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Gn(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new yi(0)},transmission:{value:0},transmissionMap:{value:null}}]),vertexShader:Io.meshphysical_vert,fragmentShader:Io.meshphysical_frag},Zo.prototype=Object.create(Wn.prototype),Zo.prototype.constructor=Zo,Zo.prototype.isDataTexture2DArray=!0,Jo.prototype=Object.create(Wn.prototype),Jo.prototype.constructor=Jo,Jo.prototype.isDataTexture3D=!0;const Ko=new Wn,Qo=new Zo,$o=new Jo,ta=new Mo,ea=[],na=[],ra=new Float32Array(16),ia=new Float32Array(9),oa=new Float32Array(4);function aa(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let o=ea[i];if(void 0===o&&(o=new Float32Array(i),ea[i]=o),0!==e){r.toArray(o,0);for(let r=1,i=0;r!==e;++r)i+=n,t[r].toArray(o,i)}return o}function sa(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function ca(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function la(t,e){let n=na[e];void 0===n&&(n=new Int32Array(e),na[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function ua(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function ha(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(sa(n,e))return;t.uniform2fv(this.addr,e),ca(n,e)}}function da(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(sa(n,e))return;t.uniform3fv(this.addr,e),ca(n,e)}}function pa(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(sa(n,e))return;t.uniform4fv(this.addr,e),ca(n,e)}}function fa(t,e){const n=this.cache,r=e.elements;if(void 0===r){if(sa(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),ca(n,e)}else{if(sa(n,r))return;oa.set(r),t.uniformMatrix2fv(this.addr,!1,oa),ca(n,r)}}function ma(t,e){const n=this.cache,r=e.elements;if(void 0===r){if(sa(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),ca(n,e)}else{if(sa(n,r))return;ia.set(r),t.uniformMatrix3fv(this.addr,!1,ia),ca(n,r)}}function ga(t,e){const n=this.cache,r=e.elements;if(void 0===r){if(sa(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),ca(n,e)}else{if(sa(n,r))return;ra.set(r),t.uniformMatrix4fv(this.addr,!1,ra),ca(n,r)}}function va(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.safeSetTexture2D(e||Ko,i)}function ya(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||Qo,i)}function xa(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||$o,i)}function ba(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.safeSetTextureCube(e||ta,i)}function wa(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function _a(t,e){const n=this.cache;sa(n,e)||(t.uniform2iv(this.addr,e),ca(n,e))}function Ma(t,e){const n=this.cache;sa(n,e)||(t.uniform3iv(this.addr,e),ca(n,e))}function Sa(t,e){const n=this.cache;sa(n,e)||(t.uniform4iv(this.addr,e),ca(n,e))}function Ta(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function Ea(t,e){t.uniform1fv(this.addr,e)}function Aa(t,e){t.uniform1iv(this.addr,e)}function La(t,e){t.uniform2iv(this.addr,e)}function Ra(t,e){t.uniform3iv(this.addr,e)}function Pa(t,e){t.uniform4iv(this.addr,e)}function Ca(t,e){const n=aa(e,this.size,2);t.uniform2fv(this.addr,n)}function Ia(t,e){const n=aa(e,this.size,3);t.uniform3fv(this.addr,n)}function Oa(t,e){const n=aa(e,this.size,4);t.uniform4fv(this.addr,n)}function Na(t,e){const n=aa(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function Da(t,e){const n=aa(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function Ba(t,e){const n=aa(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function Fa(t,e,n){const r=e.length,i=la(n,r);t.uniform1iv(this.addr,i);for(let t=0;t!==r;++t)n.safeSetTexture2D(e[t]||Ko,i[t])}function Ua(t,e,n){const r=e.length,i=la(n,r);t.uniform1iv(this.addr,i);for(let t=0;t!==r;++t)n.safeSetTextureCube(e[t]||ta,i[t])}function za(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=function(t){switch(t){case 5126:return ua;case 35664:return ha;case 35665:return da;case 35666:return pa;case 35674:return fa;case 35675:return ma;case 35676:return ga;case 5124:case 35670:return wa;case 35667:case 35671:return _a;case 35668:case 35672:return Ma;case 35669:case 35673:return Sa;case 5125:return Ta;case 35678:case 36198:case 36298:case 36306:case 35682:return va;case 35679:case 36299:case 36307:return xa;case 35680:case 36300:case 36308:case 36293:return ba;case 36289:case 36303:case 36311:case 36292:return ya}}(e.type)}function Ga(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=function(t){switch(t){case 5126:return Ea;case 35664:return Ca;case 35665:return Ia;case 35666:return Oa;case 35674:return Na;case 35675:return Da;case 35676:return Ba;case 5124:case 35670:return Aa;case 35667:case 35671:return La;case 35668:case 35672:return Ra;case 35669:case 35673:return Pa;case 35678:case 36198:case 36298:case 36306:case 35682:return Fa;case 35680:case 36300:case 36308:case 36293:return Ua}}(e.type)}function Ha(t){this.id=t,this.seq=[],this.map={}}Ga.prototype.updateCache=function(t){const e=this.cache;t instanceof Float32Array&&e.length!==t.length&&(this.cache=new Float32Array(t.length)),ca(e,t)},Ha.prototype.setValue=function(t,e,n){const r=this.seq;for(let i=0,o=r.length;i!==o;++i){const o=r[i];o.setValue(t,e[o.id],n)}};const ka=/([\w\d_]+)(\])?(\[|\.)?/g;function Va(t,e){t.seq.push(e),t.map[e.id]=e}function ja(t,e,n){const r=t.name,i=r.length;for(ka.lastIndex=0;;){const o=ka.exec(r),a=ka.lastIndex;let s=o[1];const c="]"===o[2],l=o[3];if(c&&(s|=0),void 0===l||"["===l&&a+2===i){Va(n,void 0===l?new za(s,t,e):new Ga(s,t,e));break}{let t=n.map[s];void 0===t&&(t=new Ha(s),Va(n,t)),n=t}}}function Wa(t,e){this.seq=[],this.map={};const n=t.getProgramParameter(e,35718);for(let r=0;r<n;++r){const n=t.getActiveUniform(e,r);ja(n,t.getUniformLocation(e,n.name),this)}}function Xa(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}Wa.prototype.setValue=function(t,e,n,r){const i=this.map[e];void 0!==i&&i.setValue(t,n,r)},Wa.prototype.setOptional=function(t,e,n){const r=e[n];void 0!==r&&this.setValue(t,n,r)},Wa.upload=function(t,e,n,r){for(let i=0,o=e.length;i!==o;++i){const o=e[i],a=n[o.id];!1!==a.needsUpdate&&o.setValue(t,a.value,r)}},Wa.seqWithValue=function(t,e){const n=[];for(let r=0,i=t.length;r!==i;++r){const i=t[r];i.id in e&&n.push(i)}return n};let qa=0;function Ya(t){switch(t){case Je:return["Linear","( value )"];case Ke:return["sRGB","( value )"];case $e:return["RGBE","( value )"];case en:return["RGBM","( value, 7.0 )"];case nn:return["RGBM","( value, 16.0 )"];case rn:return["RGBD","( value, 256.0 )"];case Qe:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case tn:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",t),["Linear","( value )"]}}function Za(t,e,n){const r=t.getShaderParameter(e,35713),i=t.getShaderInfoLog(e).trim();if(r&&""===i)return"";return"THREE.WebGLShader: gl.getShaderInfoLog() "+n+"\n"+i+function(t){const e=t.split("\n");for(let t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return e.join("\n")}(t.getShaderSource(e))}function Ja(t,e){const n=Ya(e);return"vec4 "+t+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function Ka(t,e){const n=Ya(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Qa(t,e){let n;switch(e){case $:n="Linear";break;case tt:n="Reinhard";break;case et:n="OptimizedCineon";break;case nt:n="ACESFilmic";break;case rt:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function $a(t){return""!==t}function ts(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function es(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const ns=/^[ \t]*#include +<([\w\d./]+)>/gm;function rs(t){return t.replace(ns,is)}function is(t,e){const n=Io[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return rs(n)}const os=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,as=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function ss(t){return t.replace(as,ls).replace(os,cs)}function cs(t,e,n,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),ls(t,e,n,r)}function ls(t,e,n,r){let i="";for(let t=parseInt(e);t<parseInt(n);t++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+t+" ]").replace(/UNROLLED_LOOP_INDEX/g,t);return i}function us(t){let e="precision "+t.precision+" float;\nprecision "+t.precision+" int;";return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function hs(t,e,n,r){const i=t.getContext(),o=n.defines;let a=n.vertexShader,s=n.fragmentShader;const c=function(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===h?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===d?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===p&&(e="SHADOWMAP_TYPE_VSM"),e}(n),l=function(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case ot:case at:e="ENVMAP_TYPE_CUBE";break;case lt:case ut:e="ENVMAP_TYPE_CUBE_UV"}return e}(n),u=function(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case at:case ut:e="ENVMAP_MODE_REFRACTION"}return e}(n),f=function(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case Z:e="ENVMAP_BLENDING_MULTIPLY";break;case J:e="ENVMAP_BLENDING_MIX";break;case K:e="ENVMAP_BLENDING_ADD"}return e}(n),m=t.gammaFactor>0?t.gammaFactor:1,g=n.isWebGL2?"":function(t){return[t.extensionDerivatives||t.envMapCubeUV||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||"physical"===t.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter($a).join("\n")}(n),v=function(t){const e=[];for(const n in t){const r=t[n];!1!==r&&e.push("#define "+n+" "+r)}return e.join("\n")}(o),y=i.createProgram();let x,b,w=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(x=[v].filter($a).join("\n"),x.length>0&&(x+="\n"),b=[g,v].filter($a).join("\n"),b.length>0&&(b+="\n")):(x=[us(n),"#define SHADER_NAME "+n.shaderName,v,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+m,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter($a).join("\n"),b=[g,us(n),"#define SHADER_NAME "+n.shaderName,v,n.alphaTest?"#define ALPHATEST "+n.alphaTest+(n.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+m,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+l:"",n.envMap?"#define "+u:"",n.envMap?"#define "+f:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.sheen?"#define USE_SHEEN":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Q?"#define TONE_MAPPING":"",n.toneMapping!==Q?Io.tonemapping_pars_fragment:"",n.toneMapping!==Q?Qa("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",Io.encodings_pars_fragment,n.map?Ja("mapTexelToLinear",n.mapEncoding):"",n.matcap?Ja("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?Ja("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?Ja("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.lightMap?Ja("lightMapTexelToLinear",n.lightMapEncoding):"",Ka("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter($a).join("\n")),a=rs(a),a=ts(a,n),a=es(a,n),s=rs(s),s=ts(s,n),s=es(s,n),a=ss(a),s=ss(s),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(w="#version 300 es\n",x=["#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+x,b=["#define varying in",n.glslVersion===Dn?"":"out highp vec4 pc_fragColor;",n.glslVersion===Dn?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+b);const _=w+b+s,M=Xa(i,35633,w+x+a),S=Xa(i,35632,_);if(i.attachShader(y,M),i.attachShader(y,S),void 0!==n.index0AttributeName?i.bindAttribLocation(y,0,n.index0AttributeName):!0===n.morphTargets&&i.bindAttribLocation(y,0,"position"),i.linkProgram(y),t.debug.checkShaderErrors){const t=i.getProgramInfoLog(y).trim(),e=i.getShaderInfoLog(M).trim(),n=i.getShaderInfoLog(S).trim();let r=!0,o=!0;if(!1===i.getProgramParameter(y,35714)){r=!1;const e=Za(i,M,"vertex"),n=Za(i,S,"fragment");console.error("THREE.WebGLProgram: shader error: ",i.getError(),"35715",i.getProgramParameter(y,35715),"gl.getProgramInfoLog",t,e,n)}else""!==t?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",t):""!==e&&""!==n||(o=!1);o&&(this.diagnostics={runnable:r,programLog:t,vertexShader:{log:e,prefix:x},fragmentShader:{log:n,prefix:b}})}let T,E;return i.deleteShader(M),i.deleteShader(S),this.getUniforms=function(){return void 0===T&&(T=new Wa(i,y)),T},this.getAttributes=function(){return void 0===E&&(E=function(t,e){const n={},r=t.getProgramParameter(e,35721);for(let i=0;i<r;i++){const r=t.getActiveAttrib(e,i).name;n[r]=t.getAttribLocation(e,r)}return n}(i,y)),E},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(y),this.program=void 0},this.name=n.shaderName,this.id=qa++,this.cacheKey=e,this.usedTimes=1,this.program=y,this.vertexShader=M,this.fragmentShader=S,this}function ds(t,e,n,r,i,o){const a=[],s=r.isWebGL2,c=r.logarithmicDepthBuffer,l=r.floatVertexTextures,u=r.maxVertexUniforms,h=r.vertexTextures;let d=r.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},f=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmissionMap"];function v(t){let e;return t?t.isTexture?e=t.encoding:t.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),e=t.texture.encoding):e=Je,e}return{getParameters:function(i,a,f,y,x){const b=y.fog,w=i.isMeshStandardMaterial?y.environment:null,_=e.get(i.envMap||w),M=p[i.type],S=x.isSkinnedMesh?function(t){const e=t.skeleton.bones;if(l)return 1024;{const t=u,n=Math.floor((t-20)/4),r=Math.min(n,e.length);return r<e.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+e.length+" bones. This GPU supports "+r+"."),0):r}}(x):0;let T,E;if(null!==i.precision&&(d=r.getMaxPrecision(i.precision),d!==i.precision&&console.warn("THREE.WebGLProgram.getParameters:",i.precision,"not supported, using",d,"instead.")),M){const t=No[M];T=t.vertexShader,E=t.fragmentShader}else T=i.vertexShader,E=i.fragmentShader;const A=t.getRenderTarget();return{isWebGL2:s,shaderID:M,shaderName:i.type,vertexShader:T,fragmentShader:E,defines:i.defines,isRawShaderMaterial:!0===i.isRawShaderMaterial,glslVersion:i.glslVersion,precision:d,instancing:!0===x.isInstancedMesh,instancingColor:!0===x.isInstancedMesh&&null!==x.instanceColor,supportsVertexTextures:h,outputEncoding:null!==A?v(A.texture):t.outputEncoding,map:!!i.map,mapEncoding:v(i.map),matcap:!!i.matcap,matcapEncoding:v(i.matcap),envMap:!!_,envMapMode:_&&_.mapping,envMapEncoding:v(_),envMapCubeUV:!!_&&(_.mapping===lt||_.mapping===ut),lightMap:!!i.lightMap,lightMapEncoding:v(i.lightMap),aoMap:!!i.aoMap,emissiveMap:!!i.emissiveMap,emissiveMapEncoding:v(i.emissiveMap),bumpMap:!!i.bumpMap,normalMap:!!i.normalMap,objectSpaceNormalMap:i.normalMapType===cn,tangentSpaceNormalMap:i.normalMapType===sn,clearcoatMap:!!i.clearcoatMap,clearcoatRoughnessMap:!!i.clearcoatRoughnessMap,clearcoatNormalMap:!!i.clearcoatNormalMap,displacementMap:!!i.displacementMap,roughnessMap:!!i.roughnessMap,metalnessMap:!!i.metalnessMap,specularMap:!!i.specularMap,alphaMap:!!i.alphaMap,gradientMap:!!i.gradientMap,sheen:!!i.sheen,transmissionMap:!!i.transmissionMap,combine:i.combine,vertexTangents:i.normalMap&&i.vertexTangents,vertexColors:i.vertexColors,vertexUvs:!!(i.map||i.bumpMap||i.normalMap||i.specularMap||i.alphaMap||i.emissiveMap||i.roughnessMap||i.metalnessMap||i.clearcoatMap||i.clearcoatRoughnessMap||i.clearcoatNormalMap||i.displacementMap||i.transmissionMap),uvsVertexOnly:!(i.map||i.bumpMap||i.normalMap||i.specularMap||i.alphaMap||i.emissiveMap||i.roughnessMap||i.metalnessMap||i.clearcoatNormalMap||i.transmissionMap||!i.displacementMap),fog:!!b,useFog:i.fog,fogExp2:b&&b.isFogExp2,flatShading:i.flatShading,sizeAttenuation:i.sizeAttenuation,logarithmicDepthBuffer:c,skinning:i.skinning&&S>0,maxBones:S,useVertexTexture:l,morphTargets:i.morphTargets,morphNormals:i.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:a.directional.length,numPointLights:a.point.length,numSpotLights:a.spot.length,numRectAreaLights:a.rectArea.length,numHemiLights:a.hemi.length,numDirLightShadows:a.directionalShadowMap.length,numPointLightShadows:a.pointShadowMap.length,numSpotLightShadows:a.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:i.dithering,shadowMapEnabled:t.shadowMap.enabled&&f.length>0,shadowMapType:t.shadowMap.type,toneMapping:i.toneMapped?t.toneMapping:Q,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:i.premultipliedAlpha,alphaTest:i.alphaTest,doubleSided:i.side===g,flipSided:i.side===m,depthPacking:void 0!==i.depthPacking&&i.depthPacking,index0AttributeName:i.index0AttributeName,extensionDerivatives:i.extensions&&i.extensions.derivatives,extensionFragDepth:i.extensions&&i.extensions.fragDepth,extensionDrawBuffers:i.extensions&&i.extensions.drawBuffers,extensionShaderTextureLOD:i.extensions&&i.extensions.shaderTextureLOD,rendererExtensionFragDepth:s||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:s||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:s||n.has("EXT_shader_texture_lod"),customProgramCacheKey:i.customProgramCacheKey()}},getProgramCacheKey:function(e){const n=[];if(e.shaderID?n.push(e.shaderID):(n.push(e.fragmentShader),n.push(e.vertexShader)),void 0!==e.defines)for(const t in e.defines)n.push(t),n.push(e.defines[t]);if(!1===e.isRawShaderMaterial){for(let t=0;t<f.length;t++)n.push(e[f[t]]);n.push(t.outputEncoding),n.push(t.gammaFactor)}return n.push(e.customProgramCacheKey),n.join()},getUniforms:function(t){const e=p[t.type];let n;if(e){const t=No[e];n=yo.clone(t.uniforms)}else n=t.uniforms;return n},acquireProgram:function(e,n){let r;for(let t=0,e=a.length;t<e;t++){const e=a[t];if(e.cacheKey===n){r=e,++r.usedTimes;break}}return void 0===r&&(r=new hs(t,n,e,i),a.push(r)),r},releaseProgram:function(t){if(0==--t.usedTimes){const e=a.indexOf(t);a[e]=a[a.length-1],a.pop(),t.destroy()}},programs:a}}function ps(){let t=new WeakMap;return{get:function(e){let n=t.get(e);return void 0===n&&(n={},t.set(e,n)),n},remove:function(e){t.delete(e)},update:function(e,n,r){t.get(e)[n]=r},dispose:function(){t=new WeakMap}}}function fs(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function ms(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function gs(t){const e=[];let n=0;const r=[],i=[],o={id:-1};function a(r,i,a,s,c,l){let u=e[n];const h=t.get(a);return void 0===u?(u={id:r.id,object:r,geometry:i,material:a,program:h.program||o,groupOrder:s,renderOrder:r.renderOrder,z:c,group:l},e[n]=u):(u.id=r.id,u.object=r,u.geometry=i,u.material=a,u.program=h.program||o,u.groupOrder=s,u.renderOrder=r.renderOrder,u.z=c,u.group=l),n++,u}return{opaque:r,transparent:i,init:function(){n=0,r.length=0,i.length=0},push:function(t,e,n,o,s,c){const l=a(t,e,n,o,s,c);(!0===n.transparent?i:r).push(l)},unshift:function(t,e,n,o,s,c){const l=a(t,e,n,o,s,c);(!0===n.transparent?i:r).unshift(l)},finish:function(){for(let t=n,r=e.length;t<r;t++){const n=e[t];if(null===n.id)break;n.id=null,n.object=null,n.geometry=null,n.material=null,n.program=null,n.group=null}},sort:function(t,e){r.length>1&&r.sort(t||fs),i.length>1&&i.sort(e||ms)}}}function vs(t){let e=new WeakMap;return{get:function(n,r){const i=e.get(n);let o;return void 0===i?(o=new gs(t),e.set(n,new WeakMap),e.get(n).set(r,o)):(o=i.get(r),void 0===o&&(o=new gs(t),i.set(r,o))),o},dispose:function(){e=new WeakMap}}}function ys(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new Kn,color:new yi};break;case"SpotLight":n={position:new Kn,direction:new Kn,color:new yi,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Kn,color:new yi,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Kn,skyColor:new yi,groundColor:new yi};break;case"RectAreaLight":n={color:new yi,position:new Kn,halfWidth:new Kn,halfHeight:new Kn}}return t[e.id]=n,n}}}let xs=0;function bs(t,e){return(e.castShadow?1:0)-(t.castShadow?1:0)}function ws(t,e){const n=new ys,r=function(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Gn};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Gn,shadowCameraNear:1,shadowCameraFar:1e3}}return t[e.id]=n,n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let t=0;t<9;t++)i.probe.push(new Kn);const o=new Kn,a=new Tr,s=new Tr;return{setup:function(c,l,u){let h=0,d=0,p=0;for(let t=0;t<9;t++)i.probe[t].set(0,0,0);let f=0,m=0,g=0,v=0,y=0,x=0,b=0,w=0;const _=u.matrixWorldInverse;c.sort(bs);for(let t=0,e=c.length;t<e;t++){const e=c[t],l=e.color,u=e.intensity,M=e.distance,S=e.shadow&&e.shadow.map?e.shadow.map.texture:null;if(e.isAmbientLight)h+=l.r*u,d+=l.g*u,p+=l.b*u;else if(e.isLightProbe)for(let t=0;t<9;t++)i.probe[t].addScaledVector(e.sh.coefficients[t],u);else if(e.isDirectionalLight){const t=n.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity),t.direction.setFromMatrixPosition(e.matrixWorld),o.setFromMatrixPosition(e.target.matrixWorld),t.direction.sub(o),t.direction.transformDirection(_),e.castShadow){const t=e.shadow,n=r.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,i.directionalShadow[f]=n,i.directionalShadowMap[f]=S,i.directionalShadowMatrix[f]=e.shadow.matrix,x++}i.directional[f]=t,f++}else if(e.isSpotLight){const t=n.get(e);if(t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(_),t.color.copy(l).multiplyScalar(u),t.distance=M,t.direction.setFromMatrixPosition(e.matrixWorld),o.setFromMatrixPosition(e.target.matrixWorld),t.direction.sub(o),t.direction.transformDirection(_),t.coneCos=Math.cos(e.angle),t.penumbraCos=Math.cos(e.angle*(1-e.penumbra)),t.decay=e.decay,e.castShadow){const t=e.shadow,n=r.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,i.spotShadow[g]=n,i.spotShadowMap[g]=S,i.spotShadowMatrix[g]=e.shadow.matrix,w++}i.spot[g]=t,g++}else if(e.isRectAreaLight){const t=n.get(e);t.color.copy(l).multiplyScalar(u),t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(_),s.identity(),a.copy(e.matrixWorld),a.premultiply(_),s.extractRotation(a),t.halfWidth.set(.5*e.width,0,0),t.halfHeight.set(0,.5*e.height,0),t.halfWidth.applyMatrix4(s),t.halfHeight.applyMatrix4(s),i.rectArea[v]=t,v++}else if(e.isPointLight){const t=n.get(e);if(t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(_),t.color.copy(e.color).multiplyScalar(e.intensity),t.distance=e.distance,t.decay=e.decay,e.castShadow){const t=e.shadow,n=r.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,n.shadowCameraNear=t.camera.near,n.shadowCameraFar=t.camera.far,i.pointShadow[m]=n,i.pointShadowMap[m]=S,i.pointShadowMatrix[m]=e.shadow.matrix,b++}i.point[m]=t,m++}else if(e.isHemisphereLight){const t=n.get(e);t.direction.setFromMatrixPosition(e.matrixWorld),t.direction.transformDirection(_),t.direction.normalize(),t.skyColor.copy(e.color).multiplyScalar(u),t.groundColor.copy(e.groundColor).multiplyScalar(u),i.hemi[y]=t,y++}}v>0&&(e.isWebGL2||!0===t.has("OES_texture_float_linear")?(i.rectAreaLTC1=Oo.LTC_FLOAT_1,i.rectAreaLTC2=Oo.LTC_FLOAT_2):!0===t.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=Oo.LTC_HALF_1,i.rectAreaLTC2=Oo.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=h,i.ambient[1]=d,i.ambient[2]=p;const M=i.hash;M.directionalLength===f&&M.pointLength===m&&M.spotLength===g&&M.rectAreaLength===v&&M.hemiLength===y&&M.numDirectionalShadows===x&&M.numPointShadows===b&&M.numSpotShadows===w||(i.directional.length=f,i.spot.length=g,i.rectArea.length=v,i.point.length=m,i.hemi.length=y,i.directionalShadow.length=x,i.directionalShadowMap.length=x,i.pointShadow.length=b,i.pointShadowMap.length=b,i.spotShadow.length=w,i.spotShadowMap.length=w,i.directionalShadowMatrix.length=x,i.pointShadowMatrix.length=b,i.spotShadowMatrix.length=w,M.directionalLength=f,M.pointLength=m,M.spotLength=g,M.rectAreaLength=v,M.hemiLength=y,M.numDirectionalShadows=x,M.numPointShadows=b,M.numSpotShadows=w,i.version=xs++)},state:i}}function _s(t,e){const n=new ws(t,e),r=[],i=[];return{init:function(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:function(t){n.setup(r,i,t)},pushLight:function(t){r.push(t)},pushShadow:function(t){i.push(t)}}}function Ms(t,e){let n=new WeakMap;return{get:function(r,i){let o;return!1===n.has(r)?(o=new _s(t,e),n.set(r,new WeakMap),n.get(r).set(i,o)):!1===n.get(r).has(i)?(o=new _s(t,e),n.get(r).set(i,o)):o=n.get(r).get(i),o},dispose:function(){n=new WeakMap}}}function Ss(t){wi.call(this),this.type="MeshDepthMaterial",this.depthPacking=on,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(t)}function Ts(t){wi.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Kn,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(t)}Ss.prototype=Object.create(wi.prototype),Ss.prototype.constructor=Ss,Ss.prototype.isMeshDepthMaterial=!0,Ss.prototype.copy=function(t){return wi.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},Ts.prototype=Object.create(wi.prototype),Ts.prototype.constructor=Ts,Ts.prototype.isMeshDistanceMaterial=!0,Ts.prototype.copy=function(t){return wi.prototype.copy.call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this};function Es(t,e,n){let r=new Lo;const i=new Gn,o=new Gn,a=new qn,s=[],c=[],l={},u={0:m,1:f,2:g},d=new xo({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new Gn},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );\n\tfor ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n\t\t#ifdef HORIZONAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean * HALF_SAMPLE_RATE;\n\tsquared_mean = squared_mean * HALF_SAMPLE_RATE;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),v=d.clone();v.defines.HORIZONAL_PASS=1;const y=new qi;y.setAttribute("position",new Ti(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const b=new ho(y,d),w=this;function _(n,r){const i=e.update(b);d.uniforms.shadow_pass.value=n.map.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,t.setRenderTarget(n.mapPass),t.clear(),t.renderBufferDirect(r,null,i,d,b,null),v.uniforms.shadow_pass.value=n.mapPass.texture,v.uniforms.resolution.value=n.mapSize,v.uniforms.radius.value=n.radius,t.setRenderTarget(n.map),t.clear(),t.renderBufferDirect(r,null,i,v,b,null)}function M(t,e,n){const r=t<<0|e<<1|n<<2;let i=s[r];return void 0===i&&(i=new Ss({depthPacking:an,morphTargets:t,skinning:e}),s[r]=i),i}function S(t,e,n){const r=t<<0|e<<1|n<<2;let i=c[r];return void 0===i&&(i=new Ts({morphTargets:t,skinning:e}),c[r]=i),i}function T(e,n,r,i,o,a,s){let c=null,h=M,d=e.customDepthMaterial;if(!0===i.isPointLight&&(h=S,d=e.customDistanceMaterial),void 0===d){let t=!1;!0===r.morphTargets&&(t=n.morphAttributes&&n.morphAttributes.position&&n.morphAttributes.position.length>0);let i=!1;!0===e.isSkinnedMesh&&(!0===r.skinning?i=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",e));c=h(t,i,!0===e.isInstancedMesh)}else c=d;if(t.localClippingEnabled&&!0===r.clipShadows&&0!==r.clippingPlanes.length){const t=c.uuid,e=r.uuid;let n=l[t];void 0===n&&(n={},l[t]=n);let i=n[e];void 0===i&&(i=c.clone(),n[e]=i),c=i}return c.visible=r.visible,c.wireframe=r.wireframe,c.side=s===p?null!==r.shadowSide?r.shadowSide:r.side:null!==r.shadowSide?r.shadowSide:u[r.side],c.clipShadows=r.clipShadows,c.clippingPlanes=r.clippingPlanes,c.clipIntersection=r.clipIntersection,c.wireframeLinewidth=r.wireframeLinewidth,c.linewidth=r.linewidth,!0===i.isPointLight&&!0===c.isMeshDistanceMaterial&&(c.referencePosition.setFromMatrixPosition(i.matrixWorld),c.nearDistance=o,c.farDistance=a),c}function E(n,i,o,a,s){if(!1===n.visible)return;if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&s===p)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);const r=e.update(n),i=n.material;if(Array.isArray(i)){const e=r.groups;for(let c=0,l=e.length;c<l;c++){const l=e[c],u=i[l.materialIndex];if(u&&u.visible){const e=T(n,r,u,a,o.near,o.far,s);t.renderBufferDirect(o,null,r,e,n,l)}}}else if(i.visible){const e=T(n,r,i,a,o.near,o.far,s);t.renderBufferDirect(o,null,r,e,n,null)}}const c=n.children;for(let t=0,e=c.length;t<e;t++)E(c[t],i,o,a,s)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=h,this.render=function(e,s,c){if(!1===w.enabled)return;if(!1===w.autoUpdate&&!1===w.needsUpdate)return;if(0===e.length)return;const l=t.getRenderTarget(),u=t.getActiveCubeFace(),h=t.getActiveMipmapLevel(),d=t.state;d.setBlending(x),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(let l=0,u=e.length;l<u;l++){const u=e[l],h=u.shadow;if(void 0===h){console.warn("THREE.WebGLShadowMap:",u,"has no shadow.");continue}if(!1===h.autoUpdate&&!1===h.needsUpdate)continue;i.copy(h.mapSize);const f=h.getFrameExtents();if(i.multiply(f),o.copy(h.mapSize),(i.x>n||i.y>n)&&(i.x>n&&(o.x=Math.floor(n/f.x),i.x=o.x*f.x,h.mapSize.x=o.x),i.y>n&&(o.y=Math.floor(n/f.y),i.y=o.y*f.y,h.mapSize.y=o.y)),null===h.map&&!h.isPointLightShadow&&this.type===p){const t={minFilter:xt,magFilter:xt,format:Ut};h.map=new Yn(i.x,i.y,t),h.map.texture.name=u.name+".shadowMap",h.mapPass=new Yn(i.x,i.y,t),h.camera.updateProjectionMatrix()}if(null===h.map){const t={minFilter:ft,magFilter:ft,format:Ut};h.map=new Yn(i.x,i.y,t),h.map.texture.name=u.name+".shadowMap",h.camera.updateProjectionMatrix()}t.setRenderTarget(h.map),t.clear();const m=h.getViewportCount();for(let t=0;t<m;t++){const e=h.getViewport(t);a.set(o.x*e.x,o.y*e.y,o.x*e.z,o.y*e.w),d.viewport(a),h.updateMatrices(u,t),r=h.getFrustum(),E(s,c,h.camera,u,this.type)}h.isPointLightShadow||this.type!==p||_(h,c),h.needsUpdate=!1}w.needsUpdate=!1,t.setRenderTarget(l,u,h)}}function As(t,e,n){const r=n.isWebGL2;const i=new function(){let e=!1;const n=new qn;let r=null;const i=new qn(0,0,0,0);return{setMask:function(n){r===n||e||(t.colorMask(n,n,n,n),r=n)},setLocked:function(t){e=t},setClear:function(e,r,o,a,s){!0===s&&(e*=a,r*=a,o*=a),n.set(e,r,o,a),!1===i.equals(n)&&(t.clearColor(e,r,o,a),i.copy(n))},reset:function(){e=!1,r=null,i.set(-1,0,0,0)}}},o=new function(){let e=!1,n=null,r=null,i=null;return{setTest:function(t){t?ft(2929):mt(2929)},setMask:function(r){n===r||e||(t.depthMask(r),n=r)},setFunc:function(e){if(r!==e){if(e)switch(e){case H:t.depthFunc(512);break;case k:t.depthFunc(519);break;case V:t.depthFunc(513);break;case j:t.depthFunc(515);break;case W:t.depthFunc(514);break;case X:t.depthFunc(518);break;case q:t.depthFunc(516);break;case Y:t.depthFunc(517);break;default:t.depthFunc(515)}else t.depthFunc(515);r=e}},setLocked:function(t){e=t},setClear:function(e){i!==e&&(t.clearDepth(e),i=e)},reset:function(){e=!1,n=null,r=null,i=null}}},l=new function(){let e=!1,n=null,r=null,i=null,o=null,a=null,s=null,c=null,l=null;return{setTest:function(t){e||(t?ft(2960):mt(2960))},setMask:function(r){n===r||e||(t.stencilMask(r),n=r)},setFunc:function(e,n,a){r===e&&i===n&&o===a||(t.stencilFunc(e,n,a),r=e,i=n,o=a)},setOp:function(e,n,r){a===e&&s===n&&c===r||(t.stencilOp(e,n,r),a=e,s=n,c=r)},setLocked:function(t){e=t},setClear:function(e){l!==e&&(t.clearStencil(e),l=e)},reset:function(){e=!1,n=null,r=null,i=null,o=null,a=null,s=null,c=null,l=null}}};let u={},h=null,d=null,p=null,f=null,v=null,y=null,Z=null,J=null,K=null,Q=!1,$=null,tt=null,et=null,nt=null,rt=null;const it=t.getParameter(35661);let ot=!1,at=0;const st=t.getParameter(7938);-1!==st.indexOf("WebGL")?(at=parseFloat(/^WebGL\ ([0-9])/.exec(st)[1]),ot=at>=1):-1!==st.indexOf("OpenGL ES")&&(at=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(st)[1]),ot=at>=2);let ct=null,lt={};const ut=new qn,ht=new qn;function dt(e,n,r){const i=new Uint8Array(4),o=t.createTexture();t.bindTexture(e,o),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728);for(let e=0;e<r;e++)t.texImage2D(n+e,0,6408,1,1,0,6408,5121,i);return o}const pt={};function ft(e){!0!==u[e]&&(t.enable(e),u[e]=!0)}function mt(e){!1!==u[e]&&(t.disable(e),u[e]=!1)}pt[3553]=dt(3553,3553,1),pt[34067]=dt(34067,34069,6),i.setClear(0,0,0,1),o.setClear(1),l.setClear(0),ft(2929),o.setFunc(j),xt(!1),bt(s),ft(2884),yt(x);const gt={[T]:32774,[E]:32778,[A]:32779};if(r)gt[L]=32775,gt[R]=32776;else{const t=e.get("EXT_blend_minmax");null!==t&&(gt[L]=t.MIN_EXT,gt[R]=t.MAX_EXT)}const vt={[P]:0,[C]:1,[I]:768,[N]:770,[G]:776,[U]:774,[B]:772,[O]:769,[D]:771,[z]:775,[F]:773};function yt(e,n,r,i,o,a,s,c){if(e!==x){if(d||(ft(3042),d=!0),e===S)o=o||n,a=a||r,s=s||i,n===f&&o===Z||(t.blendEquationSeparate(gt[n],gt[o]),f=n,Z=o),r===v&&i===y&&a===J&&s===K||(t.blendFuncSeparate(vt[r],vt[i],vt[a],vt[s]),v=r,y=i,J=a,K=s),p=e,Q=null;else if(e!==p||c!==Q){if(f===T&&Z===T||(t.blendEquation(32774),f=T,Z=T),c)switch(e){case b:t.blendFuncSeparate(1,771,1,771);break;case w:t.blendFunc(1,1);break;case _:t.blendFuncSeparate(0,0,769,771);break;case M:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case b:t.blendFuncSeparate(770,771,1,771);break;case w:t.blendFunc(770,1);break;case _:t.blendFunc(0,769);break;case M:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}v=null,y=null,J=null,K=null,p=e,Q=c}}else d&&(mt(3042),d=!1)}function xt(e){$!==e&&(e?t.frontFace(2304):t.frontFace(2305),$=e)}function bt(e){e!==a?(ft(2884),e!==tt&&(e===s?t.cullFace(1029):e===c?t.cullFace(1028):t.cullFace(1032))):mt(2884),tt=e}function wt(e,n,r){e?(ft(32823),nt===n&&rt===r||(t.polygonOffset(n,r),nt=n,rt=r)):mt(32823)}function _t(e){void 0===e&&(e=33984+it-1),ct!==e&&(t.activeTexture(e),ct=e)}return{buffers:{color:i,depth:o,stencil:l},enable:ft,disable:mt,useProgram:function(e){return h!==e&&(t.useProgram(e),h=e,!0)},setBlending:yt,setMaterial:function(t,e){t.side===g?mt(2884):ft(2884);let n=t.side===m;e&&(n=!n),xt(n),t.blending===b&&!1===t.transparent?yt(x):yt(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),o.setFunc(t.depthFunc),o.setTest(t.depthTest),o.setMask(t.depthWrite),i.setMask(t.colorWrite);const r=t.stencilWrite;l.setTest(r),r&&(l.setMask(t.stencilWriteMask),l.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),l.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),wt(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)},setFlipSided:xt,setCullFace:bt,setLineWidth:function(e){e!==et&&(ot&&t.lineWidth(e),et=e)},setPolygonOffset:wt,setScissorTest:function(t){t?ft(3089):mt(3089)},activeTexture:_t,bindTexture:function(e,n){null===ct&&_t();let r=lt[ct];void 0===r&&(r={type:void 0,texture:void 0},lt[ct]=r),r.type===e&&r.texture===n||(t.bindTexture(e,n||pt[e]),r.type=e,r.texture=n)},unbindTexture:function(){const e=lt[ct];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(e){!1===ut.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),ut.copy(e))},viewport:function(e){!1===ht.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),ht.copy(e))},reset:function(){u={},ct=null,lt={},h=null,d=null,p=null,f=null,v=null,y=null,Z=null,J=null,K=null,Q=!1,$=null,tt=null,et=null,nt=null,rt=null,i.reset(),o.reset(),l.reset()}}}function Ls(t,e,n,r,i,o,a){const s=i.isWebGL2,c=i.maxTextures,l=i.maxCubemapSize,u=i.maxTextureSize,h=i.maxSamples,d=new WeakMap;let p,f=!1;try{f="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(t){}function m(t,e){return f?new OffscreenCanvas(t,e):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function g(t,e,n,r){let i=1;if((t.width>r||t.height>r)&&(i=r/Math.max(t.width,t.height)),i<1||!0===e){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){const r=e?zn.floorPowerOfTwo:Math.floor,o=r(i*t.width),a=r(i*t.height);void 0===p&&(p=m(o,a));const s=n?m(o,a):p;s.width=o,s.height=a;return s.getContext("2d").drawImage(t,0,0,o,a),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+o+"x"+a+")."),s}return"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+")."),t}return t}function v(t){return zn.isPowerOfTwo(t.width)&&zn.isPowerOfTwo(t.height)}function y(t,e){return t.generateMipmaps&&e&&t.minFilter!==ft&&t.minFilter!==xt}function x(e,n,i,o){t.generateMipmap(e);r.get(n).__maxMipLevel=Math.log(Math.max(i,o))*Math.LOG2E}function b(n,r,i){if(!1===s)return r;if(null!==n){if(void 0!==t[n])return t[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let o=r;return 6403===r&&(5126===i&&(o=33326),5131===i&&(o=33325),5121===i&&(o=33321)),6407===r&&(5126===i&&(o=34837),5131===i&&(o=34843),5121===i&&(o=32849)),6408===r&&(5126===i&&(o=34836),5131===i&&(o=34842),5121===i&&(o=32856)),33325!==o&&33326!==o&&34842!==o&&34836!==o||e.get("EXT_color_buffer_float"),o}function w(t){return t===ft||t===mt||t===vt?9728:9729}function _(e){const n=e.target;n.removeEventListener("dispose",_),function(e){const n=r.get(e);if(void 0===n.__webglInit)return;t.deleteTexture(n.__webglTexture),r.remove(e)}(n),n.isVideoTexture&&d.delete(n),a.memory.textures--}function M(e){const n=e.target;n.removeEventListener("dispose",M),function(e){const n=r.get(e),i=r.get(e.texture);if(!e)return;void 0!==i.__webglTexture&&t.deleteTexture(i.__webglTexture);e.depthTexture&&e.depthTexture.dispose();if(e.isWebGLCubeRenderTarget)for(let e=0;e<6;e++)t.deleteFramebuffer(n.__webglFramebuffer[e]),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer[e]);else t.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer),n.__webglMultisampledFramebuffer&&t.deleteFramebuffer(n.__webglMultisampledFramebuffer),n.__webglColorRenderbuffer&&t.deleteRenderbuffer(n.__webglColorRenderbuffer),n.__webglDepthRenderbuffer&&t.deleteRenderbuffer(n.__webglDepthRenderbuffer);r.remove(e.texture),r.remove(e)}(n),a.memory.textures--}let S=0;function T(t,e){const i=r.get(t);if(t.isVideoTexture&&function(t){const e=a.render.frame;d.get(t)!==e&&(d.set(t,e),t.update())}(t),t.version>0&&i.__version!==t.version){const n=t.image;if(void 0===n)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==n.complete)return void C(i,t,e);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+e),n.bindTexture(3553,i.__webglTexture)}function E(e,i){const a=r.get(e);e.version>0&&a.__version!==e.version?function(e,r,i){if(6!==r.image.length)return;P(e,r),n.activeTexture(33984+i),n.bindTexture(34067,e.__webglTexture),t.pixelStorei(37440,r.flipY);const a=r&&(r.isCompressedTexture||r.image[0].isCompressedTexture),c=r.image[0]&&r.image[0].isDataTexture,u=[];for(let t=0;t<6;t++)u[t]=a||c?c?r.image[t].image:r.image[t]:g(r.image[t],!1,!0,l);const h=u[0],d=v(h)||s,p=o.convert(r.format),f=o.convert(r.type),m=b(r.internalFormat,p,f);let w;if(R(34067,r,d),a){for(let t=0;t<6;t++){w=u[t].mipmaps;for(let e=0;e<w.length;e++){const i=w[e];r.format!==Ut&&r.format!==Ft?null!==p?n.compressedTexImage2D(34069+t,e,m,i.width,i.height,0,i.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+t,e,m,i.width,i.height,0,p,f,i.data)}}e.__maxMipLevel=w.length-1}else{w=r.mipmaps;for(let t=0;t<6;t++)if(c){n.texImage2D(34069+t,0,m,u[t].width,u[t].height,0,p,f,u[t].data);for(let e=0;e<w.length;e++){const r=w[e].image[t].image;n.texImage2D(34069+t,e+1,m,r.width,r.height,0,p,f,r.data)}}else{n.texImage2D(34069+t,0,m,p,f,u[t]);for(let e=0;e<w.length;e++){const r=w[e];n.texImage2D(34069+t,e+1,m,p,f,r.image[t])}}e.__maxMipLevel=w.length}y(r,d)&&x(34067,r,h.width,h.height);e.__version=r.version,r.onUpdate&&r.onUpdate(r)}(a,e,i):(n.activeTexture(33984+i),n.bindTexture(34067,a.__webglTexture))}const A={[ht]:10497,[dt]:33071,[pt]:33648},L={[ft]:9728,[mt]:9984,[vt]:9986,[xt]:9729,[bt]:9985,[_t]:9987};function R(n,o,a){a?(t.texParameteri(n,10242,A[o.wrapS]),t.texParameteri(n,10243,A[o.wrapT]),32879!==n&&35866!==n||t.texParameteri(n,32882,A[o.wrapR]),t.texParameteri(n,10240,L[o.magFilter]),t.texParameteri(n,10241,L[o.minFilter])):(t.texParameteri(n,10242,33071),t.texParameteri(n,10243,33071),32879!==n&&35866!==n||t.texParameteri(n,32882,33071),o.wrapS===dt&&o.wrapT===dt||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(n,10240,w(o.magFilter)),t.texParameteri(n,10241,w(o.minFilter)),o.minFilter!==ft&&o.minFilter!==xt&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));const c=e.get("EXT_texture_filter_anisotropic");if(c){if(o.type===Pt&&null===e.get("OES_texture_float_linear"))return;if(o.type===Ct&&null===(s||e.get("OES_texture_half_float_linear")))return;(o.anisotropy>1||r.get(o).__currentAnisotropy)&&(t.texParameterf(n,c.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,i.getMaxAnisotropy())),r.get(o).__currentAnisotropy=o.anisotropy)}}function P(e,n){void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",_),e.__webglTexture=t.createTexture(),a.memory.textures++)}function C(e,r,i){let a=3553;r.isDataTexture2DArray&&(a=35866),r.isDataTexture3D&&(a=32879),P(e,r),n.activeTexture(33984+i),n.bindTexture(a,e.__webglTexture),t.pixelStorei(37440,r.flipY),t.pixelStorei(37441,r.premultiplyAlpha),t.pixelStorei(3317,r.unpackAlignment);const c=function(t){return!s&&(t.wrapS!==dt||t.wrapT!==dt||t.minFilter!==ft&&t.minFilter!==xt)}(r)&&!1===v(r.image),l=g(r.image,c,!1,u),h=v(l)||s,d=o.convert(r.format);let p,f=o.convert(r.type),m=b(r.internalFormat,d,f);R(a,r,h);const w=r.mipmaps;if(r.isDepthTexture)m=6402,s?m=r.type===Pt?36012:r.type===Rt?33190:r.type===Dt?35056:33189:r.type===Pt&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),r.format===kt&&6402===m&&r.type!==At&&r.type!==Rt&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=At,f=o.convert(r.type)),r.format===Vt&&6402===m&&(m=34041,r.type!==Dt&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=Dt,f=o.convert(r.type))),n.texImage2D(3553,0,m,l.width,l.height,0,d,f,null);else if(r.isDataTexture)if(w.length>0&&h){for(let t=0,e=w.length;t<e;t++)p=w[t],n.texImage2D(3553,t,m,p.width,p.height,0,d,f,p.data);r.generateMipmaps=!1,e.__maxMipLevel=w.length-1}else n.texImage2D(3553,0,m,l.width,l.height,0,d,f,l.data),e.__maxMipLevel=0;else if(r.isCompressedTexture){for(let t=0,e=w.length;t<e;t++)p=w[t],r.format!==Ut&&r.format!==Ft?null!==d?n.compressedTexImage2D(3553,t,m,p.width,p.height,0,p.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,t,m,p.width,p.height,0,d,f,p.data);e.__maxMipLevel=w.length-1}else if(r.isDataTexture2DArray)n.texImage3D(35866,0,m,l.width,l.height,l.depth,0,d,f,l.data),e.__maxMipLevel=0;else if(r.isDataTexture3D)n.texImage3D(32879,0,m,l.width,l.height,l.depth,0,d,f,l.data),e.__maxMipLevel=0;else if(w.length>0&&h){for(let t=0,e=w.length;t<e;t++)p=w[t],n.texImage2D(3553,t,m,d,f,p);r.generateMipmaps=!1,e.__maxMipLevel=w.length-1}else n.texImage2D(3553,0,m,d,f,l),e.__maxMipLevel=0;y(r,h)&&x(a,r,l.width,l.height),e.__version=r.version,r.onUpdate&&r.onUpdate(r)}function I(e,i,a,s){const c=o.convert(i.texture.format),l=o.convert(i.texture.type),u=b(i.texture.internalFormat,c,l);n.texImage2D(s,0,u,i.width,i.height,0,c,l,null),t.bindFramebuffer(36160,e),t.framebufferTexture2D(36160,a,s,r.get(i.texture).__webglTexture,0),t.bindFramebuffer(36160,null)}function O(e,n,r){if(t.bindRenderbuffer(36161,e),n.depthBuffer&&!n.stencilBuffer){let i=33189;if(r){const e=n.depthTexture;e&&e.isDepthTexture&&(e.type===Pt?i=36012:e.type===Rt&&(i=33190));const r=D(n);t.renderbufferStorageMultisample(36161,r,i,n.width,n.height)}else t.renderbufferStorage(36161,i,n.width,n.height);t.framebufferRenderbuffer(36160,36096,36161,e)}else if(n.depthBuffer&&n.stencilBuffer){if(r){const e=D(n);t.renderbufferStorageMultisample(36161,e,35056,n.width,n.height)}else t.renderbufferStorage(36161,34041,n.width,n.height);t.framebufferRenderbuffer(36160,33306,36161,e)}else{const e=o.convert(n.texture.format),i=o.convert(n.texture.type),a=b(n.texture.internalFormat,e,i);if(r){const e=D(n);t.renderbufferStorageMultisample(36161,e,a,n.width,n.height)}else t.renderbufferStorage(36161,a,n.width,n.height)}t.bindRenderbuffer(36161,null)}function N(e){const n=r.get(e),i=!0===e.isWebGLCubeRenderTarget;if(e.depthTexture){if(i)throw new Error("target.depthTexture not supported in Cube render targets");!function(e,n){if(n&&n.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,e),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),T(n.depthTexture,0);const i=r.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===kt)t.framebufferTexture2D(36160,36096,3553,i,0);else{if(n.depthTexture.format!==Vt)throw new Error("Unknown depthTexture format");t.framebufferTexture2D(36160,33306,3553,i,0)}}(n.__webglFramebuffer,e)}else if(i){n.__webglDepthbuffer=[];for(let r=0;r<6;r++)t.bindFramebuffer(36160,n.__webglFramebuffer[r]),n.__webglDepthbuffer[r]=t.createRenderbuffer(),O(n.__webglDepthbuffer[r],e,!1)}else t.bindFramebuffer(36160,n.__webglFramebuffer),n.__webglDepthbuffer=t.createRenderbuffer(),O(n.__webglDepthbuffer,e,!1);t.bindFramebuffer(36160,null)}function D(t){return s&&t.isWebGLMultisampleRenderTarget?Math.min(h,t.samples):0}let B=!1,F=!1;this.allocateTextureUnit=function(){const t=S;return t>=c&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+c),S+=1,t},this.resetTextureUnits=function(){S=0},this.setTexture2D=T,this.setTexture2DArray=function(t,e){const i=r.get(t);t.version>0&&i.__version!==t.version?C(i,t,e):(n.activeTexture(33984+e),n.bindTexture(35866,i.__webglTexture))},this.setTexture3D=function(t,e){const i=r.get(t);t.version>0&&i.__version!==t.version?C(i,t,e):(n.activeTexture(33984+e),n.bindTexture(32879,i.__webglTexture))},this.setTextureCube=E,this.setupRenderTarget=function(e){const i=r.get(e),c=r.get(e.texture);e.addEventListener("dispose",M),c.__webglTexture=t.createTexture(),a.memory.textures++;const l=!0===e.isWebGLCubeRenderTarget,u=!0===e.isWebGLMultisampleRenderTarget,h=v(e)||s;if(!s||e.texture.format!==Ft||e.texture.type!==Pt&&e.texture.type!==Ct||(e.texture.format=Ut,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),l){i.__webglFramebuffer=[];for(let e=0;e<6;e++)i.__webglFramebuffer[e]=t.createFramebuffer()}else if(i.__webglFramebuffer=t.createFramebuffer(),u)if(s){i.__webglMultisampledFramebuffer=t.createFramebuffer(),i.__webglColorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,i.__webglColorRenderbuffer);const n=o.convert(e.texture.format),r=o.convert(e.texture.type),a=b(e.texture.internalFormat,n,r),s=D(e);t.renderbufferStorageMultisample(36161,s,a,e.width,e.height),t.bindFramebuffer(36160,i.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064,36161,i.__webglColorRenderbuffer),t.bindRenderbuffer(36161,null),e.depthBuffer&&(i.__webglDepthRenderbuffer=t.createRenderbuffer(),O(i.__webglDepthRenderbuffer,e,!0)),t.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(l){n.bindTexture(34067,c.__webglTexture),R(34067,e.texture,h);for(let t=0;t<6;t++)I(i.__webglFramebuffer[t],e,36064,34069+t);y(e.texture,h)&&x(34067,e.texture,e.width,e.height),n.bindTexture(34067,null)}else n.bindTexture(3553,c.__webglTexture),R(3553,e.texture,h),I(i.__webglFramebuffer,e,36064,3553),y(e.texture,h)&&x(3553,e.texture,e.width,e.height),n.bindTexture(3553,null);e.depthBuffer&&N(e)},this.updateRenderTargetMipmap=function(t){const e=t.texture;if(y(e,v(t)||s)){const i=t.isWebGLCubeRenderTarget?34067:3553,o=r.get(e).__webglTexture;n.bindTexture(i,o),x(i,e,t.width,t.height),n.bindTexture(i,null)}},this.updateMultisampleRenderTarget=function(e){if(e.isWebGLMultisampleRenderTarget)if(s){const n=r.get(e);t.bindFramebuffer(36008,n.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,n.__webglFramebuffer);const i=e.width,o=e.height;let a=16384;e.depthBuffer&&(a|=256),e.stencilBuffer&&(a|=1024),t.blitFramebuffer(0,0,i,o,0,0,i,o,a,9728),t.bindFramebuffer(36160,n.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(t,e){t&&t.isWebGLRenderTarget&&(!1===B&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),B=!0),t=t.texture),T(t,e)},this.safeSetTextureCube=function(t,e){t&&t.isWebGLCubeRenderTarget&&(!1===F&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),F=!0),t=t.texture),E(t,e)}}function Rs(t,e,n){const r=n.isWebGL2;return{convert:function(t){let n;if(t===St)return 5121;if(t===It)return 32819;if(t===Ot)return 32820;if(t===Nt)return 33635;if(t===Tt)return 5120;if(t===Et)return 5122;if(t===At)return 5123;if(t===Lt)return 5124;if(t===Rt)return 5125;if(t===Pt)return 5126;if(t===Ct)return r?5131:(n=e.get("OES_texture_half_float"),null!==n?n.HALF_FLOAT_OES:null);if(t===Bt)return 6406;if(t===Ft)return 6407;if(t===Ut)return 6408;if(t===zt)return 6409;if(t===Gt)return 6410;if(t===kt)return 6402;if(t===Vt)return 34041;if(t===jt)return 6403;if(t===Wt)return 36244;if(t===Xt)return 33319;if(t===qt)return 33320;if(t===Yt)return 36248;if(t===Zt)return 36249;if(t===Jt||t===Kt||t===Qt||t===$t){if(n=e.get("WEBGL_compressed_texture_s3tc"),null===n)return null;if(t===Jt)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(t===Kt)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(t===Qt)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(t===$t)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(t===te||t===ee||t===ne||t===re){if(n=e.get("WEBGL_compressed_texture_pvrtc"),null===n)return null;if(t===te)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(t===ee)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(t===ne)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(t===re)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(t===ie)return n=e.get("WEBGL_compressed_texture_etc1"),null!==n?n.COMPRESSED_RGB_ETC1_WEBGL:null;if((t===oe||t===ae)&&(n=e.get("WEBGL_compressed_texture_etc"),null!==n)){if(t===oe)return n.COMPRESSED_RGB8_ETC2;if(t===ae)return n.COMPRESSED_RGBA8_ETC2_EAC}return t===se||t===ce||t===le||t===ue||t===he||t===de||t===pe||t===fe||t===me||t===ge||t===ve||t===ye||t===xe||t===be||t===_e||t===Me||t===Se||t===Te||t===Ee||t===Ae||t===Le||t===Re||t===Pe||t===Ce||t===Ie||t===Oe||t===Ne||t===De?(n=e.get("WEBGL_compressed_texture_astc"),null!==n?t:null):t===we?(n=e.get("EXT_texture_compression_bptc"),null!==n?t:null):t===Dt?r?34042:(n=e.get("WEBGL_depth_texture"),null!==n?n.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}function Ps(t=[]){wo.call(this),this.cameras=t}function Cs(){Jr.call(this),this.type="Group"}function Is(){this._targetRay=null,this._grip=null,this._hand=null}function Os(t,e){const n=this;let r=null,i=1,o=null,a="local-floor",s=null;const c=[],l=new Map,u=new wo;u.layers.enable(1),u.viewport=new qn;const h=new wo;h.layers.enable(2),h.viewport=new qn;const d=[u,h],p=new Ps;p.layers.enable(1),p.layers.enable(2);let f=null,m=null;function g(t){const e=l.get(t.inputSource);e&&e.dispatchEvent({type:t.type,data:t.inputSource})}function v(){l.forEach((function(t,e){t.disconnect(e)})),l.clear(),t.setFramebuffer(null),t.setRenderTarget(t.getRenderTarget()),S.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function y(t){o=t,S.setContext(r),S.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}function x(t){const e=r.inputSources;for(let t=0;t<c.length;t++)l.set(e[t],c[t]);for(let e=0;e<t.removed.length;e++){const n=t.removed[e],r=l.get(n);r&&(r.dispatchEvent({type:"disconnected",data:n}),l.delete(n))}for(let e=0;e<t.added.length;e++){const n=t.added[e],r=l.get(n);r&&r.dispatchEvent({type:"connected",data:n})}}this.enabled=!1,this.isPresenting=!1,this.getController=function(t){let e=c[t];return void 0===e&&(e=new Is,c[t]=e),e.getTargetRaySpace()},this.getControllerGrip=function(t){let e=c[t];return void 0===e&&(e=new Is,c[t]=e),e.getGripSpace()},this.getHand=function(t){let e=c[t];return void 0===e&&(e=new Is,c[t]=e),e.getHandSpace()},this.setFramebufferScaleFactor=function(t){i=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(t){a=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return o},this.getSession=function(){return r},this.setSession=function(t){if(r=t,null!==r){r.addEventListener("select",g),r.addEventListener("selectstart",g),r.addEventListener("selectend",g),r.addEventListener("squeeze",g),r.addEventListener("squeezestart",g),r.addEventListener("squeezeend",g),r.addEventListener("end",v);const t=e.getContextAttributes();!0!==t.xrCompatible&&e.makeXRCompatible();const n={antialias:t.antialias,alpha:t.alpha,depth:t.depth,stencil:t.stencil,framebufferScaleFactor:i},o=new XRWebGLLayer(r,e,n);r.updateRenderState({baseLayer:o}),r.requestReferenceSpace(a).then(y),r.addEventListener("inputsourceschange",x)}};const b=new Kn,w=new Kn;function _(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.copy(t.matrixWorld).invert()}this.getCamera=function(t){p.near=h.near=u.near=t.near,p.far=h.far=u.far=t.far,f===p.near&&m===p.far||(r.updateRenderState({depthNear:p.near,depthFar:p.far}),f=p.near,m=p.far);const e=t.parent,n=p.cameras;_(p,e);for(let t=0;t<n.length;t++)_(n[t],e);t.matrixWorld.copy(p.matrixWorld);const i=t.children;for(let t=0,e=i.length;t<e;t++)i[t].updateMatrixWorld(!0);return 2===n.length?function(t,e,n){b.setFromMatrixPosition(e.matrixWorld),w.setFromMatrixPosition(n.matrixWorld);const r=b.distanceTo(w),i=e.projectionMatrix.elements,o=n.projectionMatrix.elements,a=i[14]/(i[10]-1),s=i[14]/(i[10]+1),c=(i[9]+1)/i[5],l=(i[9]-1)/i[5],u=(i[8]-1)/i[0],h=(o[8]+1)/o[0],d=a*u,p=a*h,f=r/(-u+h),m=f*-u;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(m),t.translateZ(f),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.copy(t.matrixWorld).invert();const g=a+f,v=s+f,y=d-m,x=p+(r-m),_=c*s/v*g,M=l*s/v*g;t.projectionMatrix.makePerspective(y,x,_,M,g,v)}(p,u,h):p.projectionMatrix.copy(u.projectionMatrix),p};let M=null;const S=new Ro;S.setAnimationLoop((function(e,n){if(s=n.getViewerPose(o),null!==s){const e=s.views,n=r.renderState.baseLayer;t.setFramebuffer(n.framebuffer);let i=!1;e.length!==p.cameras.length&&(p.cameras.length=0,i=!0);for(let t=0;t<e.length;t++){const r=e[t],o=n.getViewport(r),a=d[t];a.matrix.fromArray(r.transform.matrix),a.projectionMatrix.fromArray(r.projectionMatrix),a.viewport.set(o.x,o.y,o.width,o.height),0===t&&p.matrix.copy(a.matrix),!0===i&&p.cameras.push(a)}}const i=r.inputSources;for(let t=0;t<c.length;t++){const e=c[t],r=i[t];e.update(r,n,o)}M&&M(e,n)})),this.setAnimationLoop=function(t){M=t},this.dispose=function(){}}function Ns(t){function e(e,n){e.opacity.value=n.opacity,n.color&&e.diffuse.value.copy(n.color),n.emissive&&e.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(e.map.value=n.map),n.alphaMap&&(e.alphaMap.value=n.alphaMap),n.specularMap&&(e.specularMap.value=n.specularMap);const r=t.get(n).envMap;if(r){e.envMap.value=r,e.flipEnvMap.value=r.isCubeTexture&&r._needsFlipEnvMap?-1:1,e.reflectivity.value=n.reflectivity,e.refractionRatio.value=n.refractionRatio;const i=t.get(r).__maxMipLevel;void 0!==i&&(e.maxMipLevel.value=i)}let i,o;n.lightMap&&(e.lightMap.value=n.lightMap,e.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(e.aoMap.value=n.aoMap,e.aoMapIntensity.value=n.aoMapIntensity),n.map?i=n.map:n.specularMap?i=n.specularMap:n.displacementMap?i=n.displacementMap:n.normalMap?i=n.normalMap:n.bumpMap?i=n.bumpMap:n.roughnessMap?i=n.roughnessMap:n.metalnessMap?i=n.metalnessMap:n.alphaMap?i=n.alphaMap:n.emissiveMap?i=n.emissiveMap:n.clearcoatMap?i=n.clearcoatMap:n.clearcoatNormalMap?i=n.clearcoatNormalMap:n.clearcoatRoughnessMap&&(i=n.clearcoatRoughnessMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix)),n.aoMap?o=n.aoMap:n.lightMap&&(o=n.lightMap),void 0!==o&&(o.isWebGLRenderTarget&&(o=o.texture),!0===o.matrixAutoUpdate&&o.updateMatrix(),e.uv2Transform.value.copy(o.matrix))}function n(e,n){e.roughness.value=n.roughness,e.metalness.value=n.metalness,n.roughnessMap&&(e.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(e.metalnessMap.value=n.metalnessMap),n.emissiveMap&&(e.emissiveMap.value=n.emissiveMap),n.bumpMap&&(e.bumpMap.value=n.bumpMap,e.bumpScale.value=n.bumpScale,n.side===m&&(e.bumpScale.value*=-1)),n.normalMap&&(e.normalMap.value=n.normalMap,e.normalScale.value.copy(n.normalScale),n.side===m&&e.normalScale.value.negate()),n.displacementMap&&(e.displacementMap.value=n.displacementMap,e.displacementScale.value=n.displacementScale,e.displacementBias.value=n.displacementBias);t.get(n).envMap&&(e.envMapIntensity.value=n.envMapIntensity)}return{refreshFogUniforms:function(t,e){t.fogColor.value.copy(e.color),e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)},refreshMaterialUniforms:function(t,r,i,o){r.isMeshBasicMaterial?e(t,r):r.isMeshLambertMaterial?(e(t,r),function(t,e){e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap)}(t,r)):r.isMeshToonMaterial?(e(t,r),function(t,e){e.gradientMap&&(t.gradientMap.value=e.gradientMap);e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap);e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===m&&(t.bumpScale.value*=-1));e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===m&&t.normalScale.value.negate());e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,r)):r.isMeshPhongMaterial?(e(t,r),function(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap);e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===m&&(t.bumpScale.value*=-1));e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===m&&t.normalScale.value.negate());e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,r)):r.isMeshStandardMaterial?(e(t,r),r.isMeshPhysicalMaterial?function(t,e){n(t,e),t.reflectivity.value=e.reflectivity,t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.sheen&&t.sheen.value.copy(e.sheen);e.clearcoatMap&&(t.clearcoatMap.value=e.clearcoatMap);e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap);e.clearcoatNormalMap&&(t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),t.clearcoatNormalMap.value=e.clearcoatNormalMap,e.side===m&&t.clearcoatNormalScale.value.negate());t.transmission.value=e.transmission,e.transmissionMap&&(t.transmissionMap.value=e.transmissionMap)}(t,r):n(t,r)):r.isMeshMatcapMaterial?(e(t,r),function(t,e){e.matcap&&(t.matcap.value=e.matcap);e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===m&&(t.bumpScale.value*=-1));e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===m&&t.normalScale.value.negate());e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,r)):r.isMeshDepthMaterial?(e(t,r),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,r)):r.isMeshDistanceMaterial?(e(t,r),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias);t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}(t,r)):r.isMeshNormalMaterial?(e(t,r),function(t,e){e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===m&&(t.bumpScale.value*=-1));e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===m&&t.normalScale.value.negate());e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,r)):r.isLineBasicMaterial?(function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity}(t,r),r.isLineDashedMaterial&&function(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}(t,r)):r.isPointsMaterial?function(t,e,n,r){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*n,t.scale.value=.5*r,e.map&&(t.map.value=e.map);e.alphaMap&&(t.alphaMap.value=e.alphaMap);let i;e.map?i=e.map:e.alphaMap&&(i=e.alphaMap);void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),t.uvTransform.value.copy(i.matrix))}(t,r,i,o):r.isSpriteMaterial?function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map);e.alphaMap&&(t.alphaMap.value=e.alphaMap);let n;e.map?n=e.map:e.alphaMap&&(n=e.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix))}(t,r):r.isShadowMaterial?(t.color.value.copy(r.color),t.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function Ds(t){const e=void 0!==(t=t||{}).canvas?t.canvas:function(){const t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return t.style.display="block",t}(),n=void 0!==t.context?t.context:null,r=void 0!==t.alpha&&t.alpha,i=void 0===t.depth||t.depth,o=void 0===t.stencil||t.stencil,a=void 0!==t.antialias&&t.antialias,s=void 0===t.premultipliedAlpha||t.premultipliedAlpha,c=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,l=void 0!==t.powerPreference?t.powerPreference:"default",u=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat;let h=null,d=null;this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=Je,this.physicallyCorrectLights=!1,this.toneMapping=Q,this.toneMappingExposure=1,this.maxMorphTargets=8,this.maxMorphNormals=4;const p=this;let f=!1,m=null,g=0,v=0,y=null,x=null,b=-1,w=null,_=null;const M=new qn,S=new qn;let T=null,E=e.width,A=e.height,L=1,R=null,P=null;const C=new qn(0,0,E,A),I=new qn(0,0,E,A);let O=!1;const N=new Lo;let D=!1,B=!1;const F=new Tr,U=new Kn,z={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function G(){return null===y?L:1}let H,k,V,j,W,X,q,Y,Z,J,K,$,tt,et,nt,rt,it,ot,at,st,ct,lt=n;function ut(t,n){for(let r=0;r<t.length;r++){const i=t[r],o=e.getContext(i,n);if(null!==o)return o}return null}try{const t={alpha:r,depth:i,stencil:o,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:c,powerPreference:l,failIfMajorPerformanceCaveat:u};if(e.addEventListener("webglcontextlost",ft,!1),e.addEventListener("webglcontextrestored",mt,!1),null===lt){const e=["webgl2","webgl","experimental-webgl"];if(!0===p.isWebGL1Renderer&&e.shift(),lt=ut(e,t),null===lt)throw ut(e)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===lt.getShaderPrecisionFormat&&(lt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){throw console.error("THREE.WebGLRenderer: "+t.message),t}function ht(){H=new Ho(lt),k=new Uo(lt,H,t),!1===k.isWebGL2&&(H.get("WEBGL_depth_texture"),H.get("OES_texture_float"),H.get("OES_texture_half_float"),H.get("OES_texture_half_float_linear"),H.get("OES_standard_derivatives"),H.get("OES_element_index_uint"),H.get("OES_vertex_array_object"),H.get("ANGLE_instanced_arrays")),H.get("OES_texture_float_linear"),st=new Rs(lt,H,k),V=new As(lt,H,k),V.scissor(S.copy(I).multiplyScalar(L).floor()),V.viewport(M.copy(C).multiplyScalar(L).floor()),j=new jo(lt),W=new ps,X=new Ls(lt,H,V,W,k,st,j),q=new Go(p),Y=new Po(lt,k),ct=new Bo(lt,H,Y,k),Z=new ko(lt,Y,j,ct),J=new Yo(lt,Z,Y,j),it=new qo(lt),nt=new zo(W),K=new ds(p,q,H,k,ct,nt),$=new Ns(W),tt=new vs(W),et=new Ms(H,k),rt=new Do(p,q,V,J,s),ot=new Fo(lt,H,j,k),at=new Vo(lt,H,j,k),j.programs=K.programs,p.capabilities=k,p.extensions=H,p.properties=W,p.renderLists=tt,p.state=V,p.info=j}ht();const dt=new Os(p,lt);this.xr=dt;const pt=new Es(p,J,k.maxTextureSize);function ft(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),f=!0}function mt(){console.log("THREE.WebGLRenderer: Context Restored."),f=!1,ht()}function gt(t){const e=t.target;e.removeEventListener("dispose",gt),function(t){vt(t),W.remove(t)}(e)}function vt(t){const e=W.get(t).program;void 0!==e&&K.releaseProgram(e)}this.shadowMap=pt,this.getContext=function(){return lt},this.getContextAttributes=function(){return lt.getContextAttributes()},this.forceContextLoss=function(){const t=H.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){const t=H.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return L},this.setPixelRatio=function(t){void 0!==t&&(L=t,this.setSize(E,A,!1))},this.getSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),t=new Gn),t.set(E,A)},this.setSize=function(t,n,r){dt.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(E=t,A=n,e.width=Math.floor(t*L),e.height=Math.floor(n*L),!1!==r&&(e.style.width=t+"px",e.style.height=n+"px"),this.setViewport(0,0,t,n))},this.getDrawingBufferSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),t=new Gn),t.set(E*L,A*L).floor()},this.setDrawingBufferSize=function(t,n,r){E=t,A=n,L=r,e.width=Math.floor(t*r),e.height=Math.floor(n*r),this.setViewport(0,0,t,n)},this.getCurrentViewport=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),t=new qn),t.copy(M)},this.getViewport=function(t){return t.copy(C)},this.setViewport=function(t,e,n,r){t.isVector4?C.set(t.x,t.y,t.z,t.w):C.set(t,e,n,r),V.viewport(M.copy(C).multiplyScalar(L).floor())},this.getScissor=function(t){return t.copy(I)},this.setScissor=function(t,e,n,r){t.isVector4?I.set(t.x,t.y,t.z,t.w):I.set(t,e,n,r),V.scissor(S.copy(I).multiplyScalar(L).floor())},this.getScissorTest=function(){return O},this.setScissorTest=function(t){V.setScissorTest(O=t)},this.setOpaqueSort=function(t){R=t},this.setTransparentSort=function(t){P=t},this.getClearColor=function(){return rt.getClearColor()},this.setClearColor=function(){rt.setClearColor.apply(rt,arguments)},this.getClearAlpha=function(){return rt.getClearAlpha()},this.setClearAlpha=function(){rt.setClearAlpha.apply(rt,arguments)},this.clear=function(t,e,n){let r=0;(void 0===t||t)&&(r|=16384),(void 0===e||e)&&(r|=256),(void 0===n||n)&&(r|=1024),lt.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",ft,!1),e.removeEventListener("webglcontextrestored",mt,!1),tt.dispose(),et.dispose(),W.dispose(),q.dispose(),J.dispose(),ct.dispose(),dt.dispose(),xt.stop()},this.renderBufferImmediate=function(t,e){ct.initAttributes();const n=W.get(t);t.hasPositions&&!n.position&&(n.position=lt.createBuffer()),t.hasNormals&&!n.normal&&(n.normal=lt.createBuffer()),t.hasUvs&&!n.uv&&(n.uv=lt.createBuffer()),t.hasColors&&!n.color&&(n.color=lt.createBuffer());const r=e.getAttributes();t.hasPositions&&(lt.bindBuffer(34962,n.position),lt.bufferData(34962,t.positionArray,35048),ct.enableAttribute(r.position),lt.vertexAttribPointer(r.position,3,5126,!1,0,0)),t.hasNormals&&(lt.bindBuffer(34962,n.normal),lt.bufferData(34962,t.normalArray,35048),ct.enableAttribute(r.normal),lt.vertexAttribPointer(r.normal,3,5126,!1,0,0)),t.hasUvs&&(lt.bindBuffer(34962,n.uv),lt.bufferData(34962,t.uvArray,35048),ct.enableAttribute(r.uv),lt.vertexAttribPointer(r.uv,2,5126,!1,0,0)),t.hasColors&&(lt.bindBuffer(34962,n.color),lt.bufferData(34962,t.colorArray,35048),ct.enableAttribute(r.color),lt.vertexAttribPointer(r.color,3,5126,!1,0,0)),ct.disableUnusedAttributes(),lt.drawArrays(4,0,t.count),t.count=0},this.renderBufferDirect=function(t,e,n,r,i,o){null===e&&(e=z);const a=i.isMesh&&i.matrixWorld.determinant()<0,s=Tt(t,e,r,i);V.setMaterial(r,a);let c=n.index;const l=n.attributes.position;if(null===c){if(void 0===l||0===l.count)return}else if(0===c.count)return;let u,h=1;!0===r.wireframe&&(c=Z.getWireframeAttribute(n),h=2),(r.morphTargets||r.morphNormals)&&it.update(i,n,r,s),ct.setup(i,r,s,n,c);let d=ot;null!==c&&(u=Y.get(c),d=at,d.setIndex(u));const p=null!==c?c.count:l.count,f=n.drawRange.start*h,m=n.drawRange.count*h,g=null!==o?o.start*h:0,v=null!==o?o.count*h:1/0,y=Math.max(f,g),x=Math.min(p,f+m,g+v)-1,b=Math.max(0,x-y+1);if(0!==b){if(i.isMesh)!0===r.wireframe?(V.setLineWidth(r.wireframeLinewidth*G()),d.setMode(1)):d.setMode(4);else if(i.isLine){let t=r.linewidth;void 0===t&&(t=1),V.setLineWidth(t*G()),i.isLineSegments?d.setMode(1):i.isLineLoop?d.setMode(2):d.setMode(3)}else i.isPoints?d.setMode(0):i.isSprite&&d.setMode(4);if(i.isInstancedMesh)d.renderInstances(y,b,i.count);else if(n.isInstancedBufferGeometry){const t=Math.min(n.instanceCount,n._maxInstanceCount);d.renderInstances(y,b,t)}else d.render(y,b)}},this.compile=function(t,e){d=et.get(t,e),d.init(),t.traverseVisible((function(t){t.isLight&&t.layers.test(e.layers)&&(d.pushLight(t),t.castShadow&&d.pushShadow(t))})),d.setupLights(e);const n=new WeakMap;t.traverse((function(e){const r=e.material;if(r)if(Array.isArray(r))for(let i=0;i<r.length;i++){const o=r[i];!1===n.has(o)&&(Mt(o,t,e),n.set(o))}else!1===n.has(r)&&(Mt(r,t,e),n.set(r))}))};let yt=null;const xt=new Ro;function bt(t,e,n,r){if(!1===t.visible)return;if(t.layers.test(e.layers))if(t.isGroup)n=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(e);else if(t.isLight)d.pushLight(t),t.castShadow&&d.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||N.intersectsSprite(t)){r&&U.setFromMatrixPosition(t.matrixWorld).applyMatrix4(F);const e=J.update(t),i=t.material;i.visible&&h.push(t,e,i,n,U.z,null)}}else if(t.isImmediateRenderObject)r&&U.setFromMatrixPosition(t.matrixWorld).applyMatrix4(F),h.push(t,null,t.material,n,U.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.frame!==j.render.frame&&(t.skeleton.update(),t.skeleton.frame=j.render.frame),!t.frustumCulled||N.intersectsObject(t))){r&&U.setFromMatrixPosition(t.matrixWorld).applyMatrix4(F);const e=J.update(t),i=t.material;if(Array.isArray(i)){const r=e.groups;for(let o=0,a=r.length;o<a;o++){const a=r[o],s=i[a.materialIndex];s&&s.visible&&h.push(t,e,s,n,U.z,a)}}else i.visible&&h.push(t,e,i,n,U.z,null)}const i=t.children;for(let t=0,o=i.length;t<o;t++)bt(i[t],e,n,r)}function wt(t,e,n){const r=!0===e.isScene?e.overrideMaterial:null;for(let i=0,o=t.length;i<o;i++){const o=t[i],a=o.object,s=o.geometry,c=null===r?o.material:r,l=o.group;if(n.isArrayCamera){_=n;const t=n.cameras;for(let n=0,r=t.length;n<r;n++){const r=t[n];a.layers.test(r.layers)&&(V.viewport(M.copy(r.viewport)),d.setupLights(r),_t(a,e,r,s,c,l))}}else _=null,_t(a,e,n,s,c,l)}}function _t(t,e,n,r,i,o){if(t.onBeforeRender(p,e,n,r,i,o),d=et.get(e,_||n),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),t.isImmediateRenderObject){const r=Tt(n,e,i,t);V.setMaterial(i),ct.reset(),function(t,e){t.render((function(t){p.renderBufferImmediate(t,e)}))}(t,r)}else p.renderBufferDirect(n,e,r,i,t,o);t.onAfterRender(p,e,n,r,i,o),d=et.get(e,_||n)}function Mt(t,e,n){!0!==e.isScene&&(e=z);const r=W.get(t),i=d.state.lights,o=d.state.shadowsArray,a=i.state.version,s=K.getParameters(t,i.state,o,e,n),c=K.getProgramCacheKey(s);let l=r.program,u=!0;if(void 0===l)t.addEventListener("dispose",gt);else if(l.cacheKey!==c)vt(t);else if(r.lightsStateVersion!==a)u=!1;else{if(void 0!==s.shaderID){const n=t.isMeshStandardMaterial?e.environment:null;return void(r.envMap=q.get(t.envMap||n))}u=!1}u&&(s.uniforms=K.getUniforms(t),t.onBeforeCompile(s,p),l=K.acquireProgram(s,c),r.program=l,r.uniforms=s.uniforms,r.outputEncoding=s.outputEncoding);const h=r.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(r.numClippingPlanes=nt.numPlanes,r.numIntersection=nt.numIntersection,h.clippingPlanes=nt.uniform),r.environment=t.isMeshStandardMaterial?e.environment:null,r.fog=e.fog,r.envMap=q.get(t.envMap||r.environment),r.needsLights=function(t){return t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}(t),r.lightsStateVersion=a,r.needsLights&&(h.ambientLightColor.value=i.state.ambient,h.lightProbe.value=i.state.probe,h.directionalLights.value=i.state.directional,h.directionalLightShadows.value=i.state.directionalShadow,h.spotLights.value=i.state.spot,h.spotLightShadows.value=i.state.spotShadow,h.rectAreaLights.value=i.state.rectArea,h.ltc_1.value=i.state.rectAreaLTC1,h.ltc_2.value=i.state.rectAreaLTC2,h.pointLights.value=i.state.point,h.pointLightShadows.value=i.state.pointShadow,h.hemisphereLights.value=i.state.hemi,h.directionalShadowMap.value=i.state.directionalShadowMap,h.directionalShadowMatrix.value=i.state.directionalShadowMatrix,h.spotShadowMap.value=i.state.spotShadowMap,h.spotShadowMatrix.value=i.state.spotShadowMatrix,h.pointShadowMap.value=i.state.pointShadowMap,h.pointShadowMatrix.value=i.state.pointShadowMatrix);const f=r.program.getUniforms(),m=Wa.seqWithValue(f.seq,h);r.uniformsList=m}function Tt(t,e,n,r){!0!==e.isScene&&(e=z),X.resetTextureUnits();const i=e.fog,o=n.isMeshStandardMaterial?e.environment:null,a=null===y?p.outputEncoding:y.texture.encoding,s=q.get(n.envMap||o),c=W.get(n),l=d.state.lights;if(!0===D&&(!0===B||t!==w)){const e=t===w&&n.id===b;nt.setState(n,t,e)}n.version===c.__version?n.fog&&c.fog!==i||c.environment!==o||c.needsLights&&c.lightsStateVersion!==l.state.version?Mt(n,e,r):void 0===c.numClippingPlanes||c.numClippingPlanes===nt.numPlanes&&c.numIntersection===nt.numIntersection?(c.outputEncoding!==a||c.envMap!==s)&&Mt(n,e,r):Mt(n,e,r):(Mt(n,e,r),c.__version=n.version);let u=!1,h=!1,f=!1;const m=c.program,g=m.getUniforms(),v=c.uniforms;if(V.useProgram(m.program)&&(u=!0,h=!0,f=!0),n.id!==b&&(b=n.id,h=!0),u||w!==t){if(g.setValue(lt,"projectionMatrix",t.projectionMatrix),k.logarithmicDepthBuffer&&g.setValue(lt,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),w!==t&&(w=t,h=!0,f=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshStandardMaterial||n.envMap){const e=g.map.cameraPosition;void 0!==e&&e.setValue(lt,U.setFromMatrixPosition(t.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&g.setValue(lt,"isOrthographic",!0===t.isOrthographicCamera),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.isShadowMaterial||n.skinning)&&g.setValue(lt,"viewMatrix",t.matrixWorldInverse)}if(n.skinning){g.setOptional(lt,r,"bindMatrix"),g.setOptional(lt,r,"bindMatrixInverse");const t=r.skeleton;if(t){const e=t.bones;if(k.floatVertexTextures){if(null===t.boneTexture){let n=Math.sqrt(4*e.length);n=zn.ceilPowerOfTwo(n),n=Math.max(n,4);const r=new Float32Array(n*n*4);r.set(t.boneMatrices);const i=new To(r,n,n,Ut,Pt);t.boneMatrices=r,t.boneTexture=i,t.boneTextureSize=n}g.setValue(lt,"boneTexture",t.boneTexture,X),g.setValue(lt,"boneTextureSize",t.boneTextureSize)}else g.setOptional(lt,t,"boneMatrices")}}var x,_;return(h||c.receiveShadow!==r.receiveShadow)&&(c.receiveShadow=r.receiveShadow,g.setValue(lt,"receiveShadow",r.receiveShadow)),h&&(g.setValue(lt,"toneMappingExposure",p.toneMappingExposure),c.needsLights&&(_=f,(x=v).ambientLightColor.needsUpdate=_,x.lightProbe.needsUpdate=_,x.directionalLights.needsUpdate=_,x.directionalLightShadows.needsUpdate=_,x.pointLights.needsUpdate=_,x.pointLightShadows.needsUpdate=_,x.spotLights.needsUpdate=_,x.spotLightShadows.needsUpdate=_,x.rectAreaLights.needsUpdate=_,x.hemisphereLights.needsUpdate=_),i&&n.fog&&$.refreshFogUniforms(v,i),$.refreshMaterialUniforms(v,n,L,A),Wa.upload(lt,c.uniformsList,v,X)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(Wa.upload(lt,c.uniformsList,v,X),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&g.setValue(lt,"center",r.center),g.setValue(lt,"modelViewMatrix",r.modelViewMatrix),g.setValue(lt,"normalMatrix",r.normalMatrix),g.setValue(lt,"modelMatrix",r.matrixWorld),m}xt.setAnimationLoop((function(t){dt.isPresenting||yt&&yt(t)})),"undefined"!=typeof window&&xt.setContext(window),this.setAnimationLoop=function(t){yt=t,dt.setAnimationLoop(t),null===t?xt.stop():xt.start()},this.render=function(t,e){let n,r;if(void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),n=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),r=arguments[3]),void 0!==e&&!0!==e.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===f)return;ct.resetDefaultState(),b=-1,w=null,!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),!0===dt.enabled&&!0===dt.isPresenting&&(e=dt.getCamera(e)),!0===t.isScene&&t.onBeforeRender(p,t,e,n||y),d=et.get(t,e),d.init(),F.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),N.setFromProjectionMatrix(F),B=this.localClippingEnabled,D=nt.init(this.clippingPlanes,B,e),h=tt.get(t,e),h.init(),bt(t,e,0,p.sortObjects),h.finish(),!0===p.sortObjects&&h.sort(R,P),!0===D&&nt.beginShadows();const i=d.state.shadowsArray;pt.render(i,t,e),d.setupLights(e),!0===D&&nt.endShadows(),!0===this.info.autoReset&&this.info.reset(),void 0!==n&&this.setRenderTarget(n),rt.render(h,t,e,r);const o=h.opaque,a=h.transparent;o.length>0&&wt(o,t,e),a.length>0&&wt(a,t,e),!0===t.isScene&&t.onAfterRender(p,t,e),null!==y&&(X.updateRenderTargetMipmap(y),X.updateMultisampleRenderTarget(y)),V.buffers.depth.setTest(!0),V.buffers.depth.setMask(!0),V.buffers.color.setMask(!0),V.setPolygonOffset(!1),h=null,d=null},this.setFramebuffer=function(t){m!==t&&null===y&&lt.bindFramebuffer(36160,t),m=t},this.getActiveCubeFace=function(){return g},this.getActiveMipmapLevel=function(){return v},this.getRenderList=function(){return h},this.setRenderList=function(t){h=t},this.getRenderState=function(){return d},this.setRenderState=function(t){d=t},this.getRenderTarget=function(){return y},this.setRenderTarget=function(t,e=0,n=0){y=t,g=e,v=n,t&&void 0===W.get(t).__webglFramebuffer&&X.setupRenderTarget(t);let r=m,i=!1;if(t){const n=W.get(t).__webglFramebuffer;t.isWebGLCubeRenderTarget?(r=n[e],i=!0):r=t.isWebGLMultisampleRenderTarget?W.get(t).__webglMultisampledFramebuffer:n,M.copy(t.viewport),S.copy(t.scissor),T=t.scissorTest}else M.copy(C).multiplyScalar(L).floor(),S.copy(I).multiplyScalar(L).floor(),T=O;if(x!==r&&(lt.bindFramebuffer(36160,r),x=r),V.viewport(M),V.scissor(S),V.setScissorTest(T),i){const r=W.get(t.texture);lt.framebufferTexture2D(36160,36064,34069+e,r.__webglTexture,n)}},this.readRenderTargetPixels=function(t,e,n,r,i,o,a){if(!t||!t.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let s=W.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==a&&(s=s[a]),s){let a=!1;s!==x&&(lt.bindFramebuffer(36160,s),a=!0);try{const s=t.texture,c=s.format,l=s.type;if(c!==Ut&&st.convert(c)!==lt.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(l===St||st.convert(l)===lt.getParameter(35738)||l===Pt&&(k.isWebGL2||H.get("OES_texture_float")||H.get("WEBGL_color_buffer_float"))||l===Ct&&(k.isWebGL2?H.get("EXT_color_buffer_float"):H.get("EXT_color_buffer_half_float"))))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===lt.checkFramebufferStatus(36160)?e>=0&&e<=t.width-r&&n>=0&&n<=t.height-i&&lt.readPixels(e,n,r,i,st.convert(c),st.convert(l),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{a&&lt.bindFramebuffer(36160,x)}}},this.copyFramebufferToTexture=function(t,e,n=0){const r=Math.pow(2,-n),i=Math.floor(e.image.width*r),o=Math.floor(e.image.height*r),a=st.convert(e.format);X.setTexture2D(e,0),lt.copyTexImage2D(3553,n,a,t.x,t.y,i,o,0),V.unbindTexture()},this.copyTextureToTexture=function(t,e,n,r=0){const i=e.image.width,o=e.image.height,a=st.convert(n.format),s=st.convert(n.type);X.setTexture2D(n,0),lt.pixelStorei(37440,n.flipY),lt.pixelStorei(37441,n.premultiplyAlpha),lt.pixelStorei(3317,n.unpackAlignment),e.isDataTexture?lt.texSubImage2D(3553,r,t.x,t.y,i,o,a,s,e.image.data):e.isCompressedTexture?lt.compressedTexSubImage2D(3553,r,t.x,t.y,e.mipmaps[0].width,e.mipmaps[0].height,a,e.mipmaps[0].data):lt.texSubImage2D(3553,r,t.x,t.y,a,s,e.image),0===r&&n.generateMipmaps&&lt.generateMipmap(3553),V.unbindTexture()},this.initTexture=function(t){X.setTexture2D(t,0),V.unbindTexture()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function Bs(t){Ds.call(this,t)}Ps.prototype=Object.assign(Object.create(wo.prototype),{constructor:Ps,isArrayCamera:!0}),Cs.prototype=Object.assign(Object.create(Jr.prototype),{constructor:Cs,isGroup:!0}),Object.assign(Is.prototype,{constructor:Is,getHandSpace:function(){if(null===this._hand&&(this._hand=new Cs,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints=[],this._hand.inputState={pinching:!1},window.XRHand))for(let t=0;t<=window.XRHand.LITTLE_PHALANX_TIP;t++){const t=new Cs;t.matrixAutoUpdate=!1,t.visible=!1,this._hand.joints.push(t),this._hand.add(t)}return this._hand},getTargetRaySpace:function(){return null===this._targetRay&&(this._targetRay=new Cs,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return null===this._grip&&(this._grip=new Cs,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this},disconnect:function(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this},update:function(t,e,n){let r=null,i=null,o=null;const a=this._targetRay,s=this._grip,c=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState)if(c&&t.hand){o=!0;for(let r=0;r<=window.XRHand.LITTLE_PHALANX_TIP;r++)if(t.hand[r]){const i=e.getJointPose(t.hand[r],n),o=c.joints[r];null!==i&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.jointRadius=i.radius),o.visible=null!==i;const a=c.joints[window.XRHand.INDEX_PHALANX_TIP],s=c.joints[window.XRHand.THUMB_PHALANX_TIP],l=a.position.distanceTo(s.position),u=.02,h=.005;c.inputState.pinching&&l>u+h?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!c.inputState.pinching&&l<=u-h&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}}else null!==a&&(r=e.getPose(t.targetRaySpace,n),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale))),null!==s&&t.gripSpace&&(i=e.getPose(t.gripSpace,n),null!==i&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale)));return null!==a&&(a.visible=null!==r),null!==s&&(s.visible=null!==i),null!==c&&(c.visible=null!==o),this}}),Object.assign(Os.prototype,Bn.prototype),Bs.prototype=Object.assign(Object.create(Ds.prototype),{constructor:Bs,isWebGL1Renderer:!0});class Fs{constructor(t,e){Object.defineProperty(this,"isFogExp2",{value:!0}),this.name="",this.color=new yi(t),this.density=void 0!==e?e:25e-5}clone(){return new Fs(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class Us{constructor(t,e,n){Object.defineProperty(this,"isFog",{value:!0}),this.name="",this.color=new yi(t),this.near=void 0!==e?e:1,this.far=void 0!==n?n:1e3}clone(){return new Us(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class zs extends Jr{constructor(){super(),Object.defineProperty(this,"isScene",{value:!0}),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.environment&&(e.object.environment=this.environment.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e}}function Gs(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=Tn,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=zn.generateUUID()}Object.defineProperty(Gs.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(Gs.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this},copyAt:function(t,e,n){t*=this.stride,n*=e.stride;for(let r=0,i=this.stride;r<i;r++)this.array[t+r]=e.array[n+r];return this},set:function(t,e=0){return this.array.set(t,e),this},clone:function(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=zn.generateUUID()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new Gs(new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),this.stride);return e.setUsage(this.usage),e},onUpload:function(t){return this.onUploadCallback=t,this},toJSON:function(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=zn.generateUUID()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}});const Hs=new Kn;function ks(t,e,n,r){this.name="",this.data=t,this.itemSize=e,this.offset=n,this.normalized=!0===r}function Vs(t){wi.call(this),this.type="SpriteMaterial",this.color=new yi(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(t)}let js;Object.defineProperties(ks.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}},needsUpdate:{set:function(t){this.data.needsUpdate=t}}}),Object.assign(ks.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(t){for(let e=0,n=this.data.count;e<n;e++)Hs.x=this.getX(e),Hs.y=this.getY(e),Hs.z=this.getZ(e),Hs.applyMatrix4(t),this.setXYZ(e,Hs.x,Hs.y,Hs.z);return this},setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this},setXYZ:function(t,e,n,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this},setXYZW:function(t,e,n,r,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this.data.array[t+3]=i,this},clone:function(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let e=0;e<this.count;e++){const n=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[n+e])}return new Ti(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new ks(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)},toJSON:function(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let e=0;e<this.count;e++){const n=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[n+e])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}),Vs.prototype=Object.create(wi.prototype),Vs.prototype.constructor=Vs,Vs.prototype.isSpriteMaterial=!0,Vs.prototype.copy=function(t){return wi.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this};const Ws=new Kn,Xs=new Kn,qs=new Kn,Ys=new Gn,Zs=new Gn,Js=new Tr,Ks=new Kn,Qs=new Kn,$s=new Kn,tc=new Gn,ec=new Gn,nc=new Gn;function rc(t){if(Jr.call(this),this.type="Sprite",void 0===js){js=new qi;const t=new Gs(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);js.setIndex([0,1,2,0,2,3]),js.setAttribute("position",new ks(t,3,0,!1)),js.setAttribute("uv",new ks(t,2,3,!1))}this.geometry=js,this.material=void 0!==t?t:new Vs,this.center=new Gn(.5,.5)}function ic(t,e,n,r,i,o){Ys.subVectors(t,n).addScalar(.5).multiply(r),void 0!==i?(Zs.x=o*Ys.x-i*Ys.y,Zs.y=i*Ys.x+o*Ys.y):Zs.copy(Ys),t.copy(e),t.x+=Zs.x,t.y+=Zs.y,t.applyMatrix4(Js)}rc.prototype=Object.assign(Object.create(Jr.prototype),{constructor:rc,isSprite:!0,raycast:function(t,e){null===t.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Xs.setFromMatrixScale(this.matrixWorld),Js.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),qs.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Xs.multiplyScalar(-qs.z);const n=this.material.rotation;let r,i;0!==n&&(i=Math.cos(n),r=Math.sin(n));const o=this.center;ic(Ks.set(-.5,-.5,0),qs,o,Xs,r,i),ic(Qs.set(.5,-.5,0),qs,o,Xs,r,i),ic($s.set(.5,.5,0),qs,o,Xs,r,i),tc.set(0,0),ec.set(1,0),nc.set(1,1);let a=t.ray.intersectTriangle(Ks,Qs,$s,!1,Ws);if(null===a&&(ic(Qs.set(-.5,.5,0),qs,o,Xs,r,i),ec.set(0,1),a=t.ray.intersectTriangle(Ks,$s,Qs,!1,Ws),null===a))return;const s=t.ray.origin.distanceTo(Ws);s<t.near||s>t.far||e.push({distance:s,point:Ws.clone(),uv:hi.getUV(Ws,Ks,Qs,$s,tc,ec,nc,new Gn),face:null,object:this})},copy:function(t){return Jr.prototype.copy.call(this,t),void 0!==t.center&&this.center.copy(t.center),this.material=t.material,this}});const oc=new Kn,ac=new Kn;function sc(){Jr.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}function cc(t,e){t&&t.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),ho.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Tr,this.bindMatrixInverse=new Tr}function lc(){Jr.call(this),this.type="Bone"}sc.prototype=Object.assign(Object.create(Jr.prototype),{constructor:sc,isLOD:!0,copy:function(t){Jr.prototype.copy.call(this,t,!1);const e=t.levels;for(let t=0,n=e.length;t<n;t++){const n=e[t];this.addLevel(n.object.clone(),n.distance)}return this.autoUpdate=t.autoUpdate,this},addLevel:function(t,e=0){e=Math.abs(e);const n=this.levels;let r;for(r=0;r<n.length&&!(e<n[r].distance);r++);return n.splice(r,0,{distance:e,object:t}),this.add(t),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(t){const e=this.levels;if(e.length>0){let n,r;for(n=1,r=e.length;n<r&&!(t<e[n].distance);n++);return e[n-1].object}return null},raycast:function(t,e){if(this.levels.length>0){oc.setFromMatrixPosition(this.matrixWorld);const n=t.ray.origin.distanceTo(oc);this.getObjectForDistance(n).raycast(t,e)}},update:function(t){const e=this.levels;if(e.length>1){oc.setFromMatrixPosition(t.matrixWorld),ac.setFromMatrixPosition(this.matrixWorld);const n=oc.distanceTo(ac)/t.zoom;let r,i;for(e[0].object.visible=!0,r=1,i=e.length;r<i&&n>=e[r].distance;r++)e[r-1].object.visible=!1,e[r].object.visible=!0;for(this._currentLevel=r-1;r<i;r++)e[r].object.visible=!1}},toJSON:function(t){const e=Jr.prototype.toJSON.call(this,t);!1===this.autoUpdate&&(e.object.autoUpdate=!1),e.object.levels=[];const n=this.levels;for(let t=0,r=n.length;t<r;t++){const r=n[t];e.object.levels.push({object:r.object.uuid,distance:r.distance})}return e}}),cc.prototype=Object.assign(Object.create(ho.prototype),{constructor:cc,isSkinnedMesh:!0,copy:function(t){return ho.prototype.copy.call(this,t),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,this},bind:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){const t=new qn,e=this.geometry.attributes.skinWeight;for(let n=0,r=e.count;n<r;n++){t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.w=e.getW(n);const r=1/t.manhattanLength();r!==1/0?t.multiplyScalar(r):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}},updateMatrixWorld:function(t){ho.prototype.updateMatrixWorld.call(this,t),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},boneTransform:function(){const t=new Kn,e=new qn,n=new qn,r=new Kn,i=new Tr;return function(o,a){const s=this.skeleton,c=this.geometry;e.fromBufferAttribute(c.attributes.skinIndex,o),n.fromBufferAttribute(c.attributes.skinWeight,o),t.fromBufferAttribute(c.attributes.position,o).applyMatrix4(this.bindMatrix),a.set(0,0,0);for(let o=0;o<4;o++){const c=n.getComponent(o);if(0!==c){const n=e.getComponent(o);i.multiplyMatrices(s.bones[n].matrixWorld,s.boneInverses[n]),a.addScaledVector(r.copy(t).applyMatrix4(i),c)}}return a.applyMatrix4(this.bindMatrixInverse)}}()}),lc.prototype=Object.assign(Object.create(Jr.prototype),{constructor:lc,isBone:!0});const uc=new Tr,hc=new Tr;function dc(t=[],e=[]){this.uuid=zn.generateUUID(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}Object.assign(dc.prototype,{init:function(){const t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(16*t.length),0===e.length)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let t=0,e=this.bones.length;t<e;t++)this.boneInverses.push(new Tr)}},calculateInverses:function(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){const e=new Tr;this.bones[t]&&e.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(e)}},pose:function(){for(let t=0,e=this.bones.length;t<e;t++){const e=this.bones[t];e&&e.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){const e=this.bones[t];e&&(e.parent&&e.parent.isBone?(e.matrix.copy(e.parent.matrixWorld).invert(),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))}},update:function(){const t=this.bones,e=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let r=0,i=t.length;r<i;r++){const i=t[r]?t[r].matrixWorld:hc;uc.multiplyMatrices(i,e[r]),uc.toArray(n,16*r)}null!==r&&(r.needsUpdate=!0)},clone:function(){return new dc(this.bones,this.boneInverses)},getBoneByName:function(t){for(let e=0,n=this.bones.length;e<n;e++){const n=this.bones[e];if(n.name===t)return n}},dispose:function(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)},fromJSON:function(t,e){this.uuid=t.uuid;for(let n=0,r=t.bones.length;n<r;n++){const r=t.bones[n];let i=e[r];void 0===i&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),i=new lc),this.bones.push(i),this.boneInverses.push((new Tr).fromArray(t.boneInverses[n]))}return this.init(),this},toJSON:function(){const t={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const e=this.bones,n=this.boneInverses;for(let r=0,i=e.length;r<i;r++){const i=e[r];t.bones.push(i.uuid);const o=n[r];t.boneInverses.push(o.toArray())}return t}});const pc=new Tr,fc=new Tr,mc=[],gc=new ho;function vc(t,e,n){ho.call(this,t,e),this.instanceMatrix=new Ti(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1}function yc(t){wi.call(this),this.type="LineBasicMaterial",this.color=new yi(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(t)}vc.prototype=Object.assign(Object.create(ho.prototype),{constructor:vc,isInstancedMesh:!0,copy:function(t){return ho.prototype.copy.call(this,t),this.instanceMatrix.copy(t.instanceMatrix),this.count=t.count,this},getColorAt:function(t,e){e.fromArray(this.instanceColor.array,3*t)},getMatrixAt:function(t,e){e.fromArray(this.instanceMatrix.array,16*t)},raycast:function(t,e){const n=this.matrixWorld,r=this.count;if(gc.geometry=this.geometry,gc.material=this.material,void 0!==gc.material)for(let i=0;i<r;i++){this.getMatrixAt(i,pc),fc.multiplyMatrices(n,pc),gc.matrixWorld=fc,gc.raycast(t,mc);for(let t=0,n=mc.length;t<n;t++){const n=mc[t];n.instanceId=i,n.object=this,e.push(n)}mc.length=0}},setColorAt:function(t,e){null===this.instanceColor&&(this.instanceColor=new Ti(new Float32Array(3*this.count),3)),e.toArray(this.instanceColor.array,3*t)},setMatrixAt:function(t,e){e.toArray(this.instanceMatrix.array,16*t)},updateMorphTargets:function(){}}),yc.prototype=Object.create(wi.prototype),yc.prototype.constructor=yc,yc.prototype.isLineBasicMaterial=!0,yc.prototype.copy=function(t){return wi.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.morphTargets=t.morphTargets,this};const xc=new Kn,bc=new Kn,wc=new Tr,_c=new Sr,Mc=new gr;function Sc(t,e,n){1===n&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),Jr.call(this),this.type="Line",this.geometry=void 0!==t?t:new qi,this.material=void 0!==e?e:new yc,this.updateMorphTargets()}Sc.prototype=Object.assign(Object.create(Jr.prototype),{constructor:Sc,isLine:!0,copy:function(t){return Jr.prototype.copy.call(this,t),this.material=t.material,this.geometry=t.geometry,this},computeLineDistances:function(){const t=this.geometry;if(t.isBufferGeometry)if(null===t.index){const e=t.attributes.position,n=[0];for(let t=1,r=e.count;t<r;t++)xc.fromBufferAttribute(e,t-1),bc.fromBufferAttribute(e,t),n[t]=n[t-1],n[t]+=xc.distanceTo(bc);t.setAttribute("lineDistance",new Ni(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry){const e=t.vertices,n=t.lineDistances;n[0]=0;for(let t=1,r=e.length;t<r;t++)n[t]=n[t-1],n[t]+=e[t-1].distanceTo(e[t])}return this},raycast:function(t,e){const n=this.geometry,r=this.matrixWorld,i=t.params.Line.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),Mc.copy(n.boundingSphere),Mc.applyMatrix4(r),Mc.radius+=i,!1===t.ray.intersectsSphere(Mc))return;wc.copy(r).invert(),_c.copy(t.ray).applyMatrix4(wc);const o=i/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o,s=new Kn,c=new Kn,l=new Kn,u=new Kn,h=this.isLineSegments?2:1;if(n.isBufferGeometry){const r=n.index,i=n.attributes.position;if(null!==r){const n=r.array;for(let r=0,o=n.length-1;r<o;r+=h){const o=n[r],h=n[r+1];s.fromBufferAttribute(i,o),c.fromBufferAttribute(i,h);if(_c.distanceSqToSegment(s,c,u,l)>a)continue;u.applyMatrix4(this.matrixWorld);const d=t.ray.origin.distanceTo(u);d<t.near||d>t.far||e.push({distance:d,point:l.clone().applyMatrix4(this.matrixWorld),index:r,face:null,faceIndex:null,object:this})}}else for(let n=0,r=i.count-1;n<r;n+=h){s.fromBufferAttribute(i,n),c.fromBufferAttribute(i,n+1);if(_c.distanceSqToSegment(s,c,u,l)>a)continue;u.applyMatrix4(this.matrixWorld);const r=t.ray.origin.distanceTo(u);r<t.near||r>t.far||e.push({distance:r,point:l.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}else if(n.isGeometry){const r=n.vertices,i=r.length;for(let n=0;n<i-1;n+=h){if(_c.distanceSqToSegment(r[n],r[n+1],u,l)>a)continue;u.applyMatrix4(this.matrixWorld);const i=t.ray.origin.distanceTo(u);i<t.near||i>t.far||e.push({distance:i,point:l.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}},updateMorphTargets:function(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const t=e[n[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,n=t.length;e<n;e++){const n=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}}}else{const e=t.morphTargets;void 0!==e&&e.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});const Tc=new Kn,Ec=new Kn;function Ac(t,e){Sc.call(this,t,e),this.type="LineSegments"}function Lc(t,e){Sc.call(this,t,e),this.type="LineLoop"}function Rc(t){wi.call(this),this.type="PointsMaterial",this.color=new yi(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(t)}Ac.prototype=Object.assign(Object.create(Sc.prototype),{constructor:Ac,isLineSegments:!0,computeLineDistances:function(){const t=this.geometry;if(t.isBufferGeometry)if(null===t.index){const e=t.attributes.position,n=[];for(let t=0,r=e.count;t<r;t+=2)Tc.fromBufferAttribute(e,t),Ec.fromBufferAttribute(e,t+1),n[t]=0===t?0:n[t-1],n[t+1]=n[t]+Tc.distanceTo(Ec);t.setAttribute("lineDistance",new Ni(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry){const e=t.vertices,n=t.lineDistances;for(let t=0,r=e.length;t<r;t+=2)Tc.copy(e[t]),Ec.copy(e[t+1]),n[t]=0===t?0:n[t-1],n[t+1]=n[t]+Tc.distanceTo(Ec)}return this}}),Lc.prototype=Object.assign(Object.create(Sc.prototype),{constructor:Lc,isLineLoop:!0}),Rc.prototype=Object.create(wi.prototype),Rc.prototype.constructor=Rc,Rc.prototype.isPointsMaterial=!0,Rc.prototype.copy=function(t){return wi.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.morphTargets=t.morphTargets,this};const Pc=new Tr,Cc=new Sr,Ic=new gr,Oc=new Kn;function Nc(t,e){Jr.call(this),this.type="Points",this.geometry=void 0!==t?t:new qi,this.material=void 0!==e?e:new Rc,this.updateMorphTargets()}function Dc(t,e,n,r,i,o,a){const s=Cc.distanceSqToPoint(t);if(s<n){const n=new Kn;Cc.closestPointToPoint(t,n),n.applyMatrix4(r);const c=i.ray.origin.distanceTo(n);if(c<i.near||c>i.far)return;o.push({distance:c,distanceToRay:Math.sqrt(s),point:n,index:e,face:null,object:a})}}function Bc(t,e,n,r,i,o,a,s,c){Wn.call(this,t,e,n,r,i,o,a,s,c),this.format=void 0!==a?a:Ft,this.minFilter=void 0!==o?o:xt,this.magFilter=void 0!==i?i:xt,this.generateMipmaps=!1;const l=this;"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback((function e(){l.needsUpdate=!0,t.requestVideoFrameCallback(e)}))}function Fc(t,e,n,r,i,o,a,s,c,l,u,h){Wn.call(this,null,o,a,s,c,l,r,i,u,h),this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}function Uc(t,e,n,r,i,o,a,s,c){Wn.call(this,t,e,n,r,i,o,a,s,c),this.needsUpdate=!0}function zc(t,e,n,r,i,o,a,s,c,l){if((l=void 0!==l?l:kt)!==kt&&l!==Vt)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&l===kt&&(n=At),void 0===n&&l===Vt&&(n=Dt),Wn.call(this,null,r,i,o,a,s,l,n,c),this.image={width:t,height:e},this.magFilter=void 0!==a?a:ft,this.minFilter=void 0!==s?s:ft,this.flipY=!1,this.generateMipmaps=!1}Nc.prototype=Object.assign(Object.create(Jr.prototype),{constructor:Nc,isPoints:!0,copy:function(t){return Jr.prototype.copy.call(this,t),this.material=t.material,this.geometry=t.geometry,this},raycast:function(t,e){const n=this.geometry,r=this.matrixWorld,i=t.params.Points.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),Ic.copy(n.boundingSphere),Ic.applyMatrix4(r),Ic.radius+=i,!1===t.ray.intersectsSphere(Ic))return;Pc.copy(r).invert(),Cc.copy(t.ray).applyMatrix4(Pc);const o=i/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o;if(n.isBufferGeometry){const i=n.index,o=n.attributes.position;if(null!==i){const n=i.array;for(let i=0,s=n.length;i<s;i++){const s=n[i];Oc.fromBufferAttribute(o,s),Dc(Oc,s,a,r,t,e,this)}}else for(let n=0,i=o.count;n<i;n++)Oc.fromBufferAttribute(o,n),Dc(Oc,n,a,r,t,e,this)}else{const i=n.vertices;for(let n=0,o=i.length;n<o;n++)Dc(i[n],n,a,r,t,e,this)}},updateMorphTargets:function(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const t=e[n[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,n=t.length;e<n;e++){const n=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}}}else{const e=t.morphTargets;void 0!==e&&e.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}),Bc.prototype=Object.assign(Object.create(Wn.prototype),{constructor:Bc,clone:function(){return new this.constructor(this.image).copy(this)},isVideoTexture:!0,update:function(){const t=this.image;!1==="requestVideoFrameCallback"in t&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),Fc.prototype=Object.create(Wn.prototype),Fc.prototype.constructor=Fc,Fc.prototype.isCompressedTexture=!0,Uc.prototype=Object.create(Wn.prototype),Uc.prototype.constructor=Uc,Uc.prototype.isCanvasTexture=!0,zc.prototype=Object.create(Wn.prototype),zc.prototype.constructor=zc,zc.prototype.isDepthTexture=!0;let Gc=0;const Hc=new Tr,kc=new Jr,Vc=new Kn;function jc(){Object.defineProperty(this,"id",{value:Gc+=2}),this.uuid=zn.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}jc.prototype=Object.assign(Object.create(Bn.prototype),{constructor:jc,isGeometry:!0,applyMatrix4:function(t){const e=(new Hn).getNormalMatrix(t);for(let e=0,n=this.vertices.length;e<n;e++){this.vertices[e].applyMatrix4(t)}for(let t=0,n=this.faces.length;t<n;t++){const n=this.faces[t];n.normal.applyMatrix3(e).normalize();for(let t=0,r=n.vertexNormals.length;t<r;t++)n.vertexNormals[t].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(t){return Hc.makeRotationX(t),this.applyMatrix4(Hc),this},rotateY:function(t){return Hc.makeRotationY(t),this.applyMatrix4(Hc),this},rotateZ:function(t){return Hc.makeRotationZ(t),this.applyMatrix4(Hc),this},translate:function(t,e,n){return Hc.makeTranslation(t,e,n),this.applyMatrix4(Hc),this},scale:function(t,e,n){return Hc.makeScale(t,e,n),this.applyMatrix4(Hc),this},lookAt:function(t){return kc.lookAt(t),kc.updateMatrix(),this.applyMatrix4(kc.matrix),this},fromBufferGeometry:function(t){const e=this,n=null!==t.index?t.index:void 0,r=t.attributes;if(void 0===r.position)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;const i=r.position,o=r.normal,a=r.color,s=r.uv,c=r.uv2;void 0!==c&&(this.faceVertexUvs[1]=[]);for(let t=0;t<i.count;t++)e.vertices.push((new Kn).fromBufferAttribute(i,t)),void 0!==a&&e.colors.push((new yi).fromBufferAttribute(a,t));function l(t,n,r,i){const l=void 0===a?[]:[e.colors[t].clone(),e.colors[n].clone(),e.colors[r].clone()],u=void 0===o?[]:[(new Kn).fromBufferAttribute(o,t),(new Kn).fromBufferAttribute(o,n),(new Kn).fromBufferAttribute(o,r)],h=new xi(t,n,r,u,l,i);e.faces.push(h),void 0!==s&&e.faceVertexUvs[0].push([(new Gn).fromBufferAttribute(s,t),(new Gn).fromBufferAttribute(s,n),(new Gn).fromBufferAttribute(s,r)]),void 0!==c&&e.faceVertexUvs[1].push([(new Gn).fromBufferAttribute(c,t),(new Gn).fromBufferAttribute(c,n),(new Gn).fromBufferAttribute(c,r)])}const u=t.groups;if(u.length>0)for(let t=0;t<u.length;t++){const e=u[t],r=e.start;for(let t=r,i=r+e.count;t<i;t+=3)void 0!==n?l(n.getX(t),n.getX(t+1),n.getX(t+2),e.materialIndex):l(t,t+1,t+2,e.materialIndex)}else if(void 0!==n)for(let t=0;t<n.count;t+=3)l(n.getX(t),n.getX(t+1),n.getX(t+2));else for(let t=0;t<i.count;t+=3)l(t,t+1,t+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Vc).negate(),this.translate(Vc.x,Vc.y,Vc.z),this},normalize:function(){this.computeBoundingSphere();const t=this.boundingSphere.center,e=this.boundingSphere.radius,n=0===e?1:1/e,r=new Tr;return r.set(n,0,0,-n*t.x,0,n,0,-n*t.y,0,0,n,-n*t.z,0,0,0,1),this.applyMatrix4(r),this},computeFaceNormals:function(){const t=new Kn,e=new Kn;for(let n=0,r=this.faces.length;n<r;n++){const r=this.faces[n],i=this.vertices[r.a],o=this.vertices[r.b],a=this.vertices[r.c];t.subVectors(a,o),e.subVectors(i,o),t.cross(e),t.normalize(),r.normal.copy(t)}},computeVertexNormals:function(t=!0){const e=new Array(this.vertices.length);for(let t=0,n=this.vertices.length;t<n;t++)e[t]=new Kn;if(t){const t=new Kn,n=new Kn;for(let r=0,i=this.faces.length;r<i;r++){const i=this.faces[r],o=this.vertices[i.a],a=this.vertices[i.b],s=this.vertices[i.c];t.subVectors(s,a),n.subVectors(o,a),t.cross(n),e[i.a].add(t),e[i.b].add(t),e[i.c].add(t)}}else{this.computeFaceNormals();for(let t=0,n=this.faces.length;t<n;t++){const n=this.faces[t];e[n.a].add(n.normal),e[n.b].add(n.normal),e[n.c].add(n.normal)}}for(let t=0,n=this.vertices.length;t<n;t++)e[t].normalize();for(let t=0,n=this.faces.length;t<n;t++){const n=this.faces[t],r=n.vertexNormals;3===r.length?(r[0].copy(e[n.a]),r[1].copy(e[n.b]),r[2].copy(e[n.c])):(r[0]=e[n.a].clone(),r[1]=e[n.b].clone(),r[2]=e[n.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){this.computeFaceNormals();for(let t=0,e=this.faces.length;t<e;t++){const e=this.faces[t],n=e.vertexNormals;3===n.length?(n[0].copy(e.normal),n[1].copy(e.normal),n[2].copy(e.normal)):(n[0]=e.normal.clone(),n[1]=e.normal.clone(),n[2]=e.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){for(let t=0,e=this.faces.length;t<e;t++){const e=this.faces[t];e.__originalFaceNormal?e.__originalFaceNormal.copy(e.normal):e.__originalFaceNormal=e.normal.clone(),e.__originalVertexNormals||(e.__originalVertexNormals=[]);for(let t=0,n=e.vertexNormals.length;t<n;t++)e.__originalVertexNormals[t]?e.__originalVertexNormals[t].copy(e.vertexNormals[t]):e.__originalVertexNormals[t]=e.vertexNormals[t].clone()}const t=new jc;t.faces=this.faces;for(let e=0,n=this.morphTargets.length;e<n;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];const t=this.morphNormals[e].faceNormals,n=this.morphNormals[e].vertexNormals;for(let e=0,r=this.faces.length;e<r;e++){const e=new Kn,r={a:new Kn,b:new Kn,c:new Kn};t.push(e),n.push(r)}}const n=this.morphNormals[e];t.vertices=this.morphTargets[e].vertices,t.computeFaceNormals(),t.computeVertexNormals();for(let t=0,e=this.faces.length;t<e;t++){const e=this.faces[t],r=n.faceNormals[t],i=n.vertexNormals[t];r.copy(e.normal),i.a.copy(e.vertexNormals[0]),i.b.copy(e.vertexNormals[1]),i.c.copy(e.vertexNormals[2])}}for(let t=0,e=this.faces.length;t<e;t++){const e=this.faces[t];e.normal=e.__originalFaceNormal,e.vertexNormals=e.__originalVertexNormals}},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new tr),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new gr),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,n=0){if(!t||!t.isGeometry)return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t);let r;const i=this.vertices.length,o=this.vertices,a=t.vertices,s=this.faces,c=t.faces,l=this.colors,u=t.colors;void 0!==e&&(r=(new Hn).getNormalMatrix(e));for(let t=0,n=a.length;t<n;t++){const n=a[t].clone();void 0!==e&&n.applyMatrix4(e),o.push(n)}for(let t=0,e=u.length;t<e;t++)l.push(u[t].clone());for(let t=0,e=c.length;t<e;t++){const e=c[t];let o,a;const l=e.vertexNormals,u=e.vertexColors,h=new xi(e.a+i,e.b+i,e.c+i);h.normal.copy(e.normal),void 0!==r&&h.normal.applyMatrix3(r).normalize();for(let t=0,e=l.length;t<e;t++)o=l[t].clone(),void 0!==r&&o.applyMatrix3(r).normalize(),h.vertexNormals.push(o);h.color.copy(e.color);for(let t=0,e=u.length;t<e;t++)a=u[t],h.vertexColors.push(a.clone());h.materialIndex=e.materialIndex+n,s.push(h)}for(let e=0,n=t.faceVertexUvs.length;e<n;e++){const n=t.faceVertexUvs[e];void 0===this.faceVertexUvs[e]&&(this.faceVertexUvs[e]=[]);for(let t=0,r=n.length;t<r;t++){const r=n[t],i=[];for(let t=0,e=r.length;t<e;t++)i.push(r[t].clone());this.faceVertexUvs[e].push(i)}}},mergeMesh:function(t){t&&t.isMesh?(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t)},mergeVertices:function(t=4){const e={},n=[],r=[],i=Math.pow(10,t);for(let t=0,o=this.vertices.length;t<o;t++){const o=this.vertices[t],a=Math.round(o.x*i)+"_"+Math.round(o.y*i)+"_"+Math.round(o.z*i);void 0===e[a]?(e[a]=t,n.push(this.vertices[t]),r[t]=n.length-1):r[t]=r[e[a]]}const o=[];for(let t=0,e=this.faces.length;t<e;t++){const e=this.faces[t];e.a=r[e.a],e.b=r[e.b],e.c=r[e.c];const n=[e.a,e.b,e.c];for(let e=0;e<3;e++)if(n[e]===n[(e+1)%3]){o.push(t);break}}for(let t=o.length-1;t>=0;t--){const e=o[t];this.faces.splice(e,1);for(let t=0,n=this.faceVertexUvs.length;t<n;t++)this.faceVertexUvs[t].splice(e,1)}const a=this.vertices.length-n.length;return this.vertices=n,a},setFromPoints:function(t){this.vertices=[];for(let e=0,n=t.length;e<n;e++){const n=t[e];this.vertices.push(new Kn(n.x,n.y,n.z||0))}return this},sortFacesByMaterialIndex:function(){const t=this.faces,e=t.length;for(let n=0;n<e;n++)t[n]._id=n;t.sort((function(t,e){return t.materialIndex-e.materialIndex}));const n=this.faceVertexUvs[0],r=this.faceVertexUvs[1];let i,o;n&&n.length===e&&(i=[]),r&&r.length===e&&(o=[]);for(let a=0;a<e;a++){const e=t[a]._id;i&&i.push(n[e]),o&&o.push(r[e])}i&&(this.faceVertexUvs[0]=i),o&&(this.faceVertexUvs[1]=o)},toJSON:function(){const t={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){const e=this.parameters;for(const n in e)void 0!==e[n]&&(t[n]=e[n]);return t}const e=[];for(let t=0;t<this.vertices.length;t++){const n=this.vertices[t];e.push(n.x,n.y,n.z)}const n=[],r=[],i={},o=[],a={},s=[],c={};for(let t=0;t<this.faces.length;t++){const e=this.faces[t],r=!0,i=!1,o=void 0!==this.faceVertexUvs[0][t],a=e.normal.length()>0,s=e.vertexNormals.length>0,c=1!==e.color.r||1!==e.color.g||1!==e.color.b,p=e.vertexColors.length>0;let f=0;if(f=l(f,0,0),f=l(f,1,r),f=l(f,2,i),f=l(f,3,o),f=l(f,4,a),f=l(f,5,s),f=l(f,6,c),f=l(f,7,p),n.push(f),n.push(e.a,e.b,e.c),n.push(e.materialIndex),o){const e=this.faceVertexUvs[0][t];n.push(d(e[0]),d(e[1]),d(e[2]))}if(a&&n.push(u(e.normal)),s){const t=e.vertexNormals;n.push(u(t[0]),u(t[1]),u(t[2]))}if(c&&n.push(h(e.color)),p){const t=e.vertexColors;n.push(h(t[0]),h(t[1]),h(t[2]))}}function l(t,e,n){return n?t|1<<e:t&~(1<<e)}function u(t){const e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==i[e]||(i[e]=r.length/3,r.push(t.x,t.y,t.z)),i[e]}function h(t){const e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==a[e]||(a[e]=o.length,o.push(t.getHex())),a[e]}function d(t){const e=t.x.toString()+t.y.toString();return void 0!==c[e]||(c[e]=s.length/2,s.push(t.x,t.y)),c[e]}return t.data={},t.data.vertices=e,t.data.normals=r,o.length>0&&(t.data.colors=o),s.length>0&&(t.data.uvs=[s]),t.data.faces=n,t},clone:function(){return(new jc).copy(this)},copy:function(t){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;const e=t.vertices;for(let t=0,n=e.length;t<n;t++)this.vertices.push(e[t].clone());const n=t.colors;for(let t=0,e=n.length;t<e;t++)this.colors.push(n[t].clone());const r=t.faces;for(let t=0,e=r.length;t<e;t++)this.faces.push(r[t].clone());for(let e=0,n=t.faceVertexUvs.length;e<n;e++){const n=t.faceVertexUvs[e];void 0===this.faceVertexUvs[e]&&(this.faceVertexUvs[e]=[]);for(let t=0,r=n.length;t<r;t++){const r=n[t],i=[];for(let t=0,e=r.length;t<e;t++){const e=r[t];i.push(e.clone())}this.faceVertexUvs[e].push(i)}}const i=t.morphTargets;for(let t=0,e=i.length;t<e;t++){const e={};if(e.name=i[t].name,void 0!==i[t].vertices){e.vertices=[];for(let n=0,r=i[t].vertices.length;n<r;n++)e.vertices.push(i[t].vertices[n].clone())}if(void 0!==i[t].normals){e.normals=[];for(let n=0,r=i[t].normals.length;n<r;n++)e.normals.push(i[t].normals[n].clone())}this.morphTargets.push(e)}const o=t.morphNormals;for(let t=0,e=o.length;t<e;t++){const e={};if(void 0!==o[t].vertexNormals){e.vertexNormals=[];for(let n=0,r=o[t].vertexNormals.length;n<r;n++){const r=o[t].vertexNormals[n],i={};i.a=r.a.clone(),i.b=r.b.clone(),i.c=r.c.clone(),e.vertexNormals.push(i)}}if(void 0!==o[t].faceNormals){e.faceNormals=[];for(let n=0,r=o[t].faceNormals.length;n<r;n++)e.faceNormals.push(o[t].faceNormals[n].clone())}this.morphNormals.push(e)}const a=t.skinWeights;for(let t=0,e=a.length;t<e;t++)this.skinWeights.push(a[t].clone());const s=t.skinIndices;for(let t=0,e=s.length;t<e;t++)this.skinIndices.push(s[t].clone());const c=t.lineDistances;for(let t=0,e=c.length;t<e;t++)this.lineDistances.push(c[t]);const l=t.boundingBox;null!==l&&(this.boundingBox=l.clone());const u=t.boundingSphere;return null!==u&&(this.boundingSphere=u.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});class Wc extends jc{constructor(t,e,n,r,i,o){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:i,depthSegments:o},this.fromBufferGeometry(new mo(t,e,n,r,i,o)),this.mergeVertices()}}class Xc extends qi{constructor(t=1,e=8,n=0,r=2*Math.PI){super(),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:r},e=Math.max(3,e);const i=[],o=[],a=[],s=[],c=new Kn,l=new Gn;o.push(0,0,0),a.push(0,0,1),s.push(.5,.5);for(let i=0,u=3;i<=e;i++,u+=3){const h=n+i/e*r;c.x=t*Math.cos(h),c.y=t*Math.sin(h),o.push(c.x,c.y,c.z),a.push(0,0,1),l.x=(o[u]/t+1)/2,l.y=(o[u+1]/t+1)/2,s.push(l.x,l.y)}for(let t=1;t<=e;t++)i.push(t,t+1,0);this.setIndex(i),this.setAttribute("position",new Ni(o,3)),this.setAttribute("normal",new Ni(a,3)),this.setAttribute("uv",new Ni(s,2))}}class qc extends jc{constructor(t,e,n,r){super(),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:r},this.fromBufferGeometry(new Xc(t,e,n,r)),this.mergeVertices()}}class Yc extends qi{constructor(t=1,e=1,n=1,r=8,i=1,o=!1,a=0,s=2*Math.PI){super(),this.type="CylinderBufferGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s};const c=this;r=Math.floor(r),i=Math.floor(i);const l=[],u=[],h=[],d=[];let p=0;const f=[],m=n/2;let g=0;function v(n){const i=p,o=new Gn,f=new Kn;let v=0;const y=!0===n?t:e,x=!0===n?1:-1;for(let t=1;t<=r;t++)u.push(0,m*x,0),h.push(0,x,0),d.push(.5,.5),p++;const b=p;for(let t=0;t<=r;t++){const e=t/r*s+a,n=Math.cos(e),i=Math.sin(e);f.x=y*i,f.y=m*x,f.z=y*n,u.push(f.x,f.y,f.z),h.push(0,x,0),o.x=.5*n+.5,o.y=.5*i*x+.5,d.push(o.x,o.y),p++}for(let t=0;t<r;t++){const e=i+t,r=b+t;!0===n?l.push(r,r+1,e):l.push(r+1,r,e),v+=3}c.addGroup(g,v,!0===n?1:2),g+=v}!function(){const o=new Kn,v=new Kn;let y=0;const x=(e-t)/n;for(let c=0;c<=i;c++){const l=[],g=c/i,y=g*(e-t)+t;for(let t=0;t<=r;t++){const e=t/r,i=e*s+a,c=Math.sin(i),f=Math.cos(i);v.x=y*c,v.y=-g*n+m,v.z=y*f,u.push(v.x,v.y,v.z),o.set(c,x,f).normalize(),h.push(o.x,o.y,o.z),d.push(e,1-g),l.push(p++)}f.push(l)}for(let t=0;t<r;t++)for(let e=0;e<i;e++){const n=f[e][t],r=f[e+1][t],i=f[e+1][t+1],o=f[e][t+1];l.push(n,r,o),l.push(r,i,o),y+=6}c.addGroup(g,y,0),g+=y}(),!1===o&&(t>0&&v(!0),e>0&&v(!1)),this.setIndex(l),this.setAttribute("position",new Ni(u,3)),this.setAttribute("normal",new Ni(h,3)),this.setAttribute("uv",new Ni(d,2))}}class Zc extends jc{constructor(t,e,n,r,i,o,a,s){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new Yc(t,e,n,r,i,o,a,s)),this.mergeVertices()}}class Jc extends Zc{constructor(t,e,n,r,i,o,a){super(0,t,e,n,r,i,o,a),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}}class Kc extends Yc{constructor(t=1,e=1,n=8,r=1,i=!1,o=0,a=2*Math.PI){super(0,t,e,n,r,i,o,a),this.type="ConeBufferGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}}class Qc extends qi{constructor(t,e,n=1,r=0){super(),this.type="PolyhedronBufferGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:r};const i=[],o=[];function a(t,e,n,r){const i=r+1,o=[];for(let r=0;r<=i;r++){o[r]=[];const a=t.clone().lerp(n,r/i),s=e.clone().lerp(n,r/i),c=i-r;for(let t=0;t<=c;t++)o[r][t]=0===t&&r===i?a:a.clone().lerp(s,t/c)}for(let t=0;t<i;t++)for(let e=0;e<2*(i-t)-1;e++){const n=Math.floor(e/2);e%2==0?(s(o[t][n+1]),s(o[t+1][n]),s(o[t][n])):(s(o[t][n+1]),s(o[t+1][n+1]),s(o[t+1][n]))}}function s(t){i.push(t.x,t.y,t.z)}function c(e,n){const r=3*e;n.x=t[r+0],n.y=t[r+1],n.z=t[r+2]}function l(t,e,n,r){r<0&&1===t.x&&(o[e]=t.x-1),0===n.x&&0===n.z&&(o[e]=r/2/Math.PI+.5)}function u(t){return Math.atan2(t.z,-t.x)}!function(t){const n=new Kn,r=new Kn,i=new Kn;for(let o=0;o<e.length;o+=3)c(e[o+0],n),c(e[o+1],r),c(e[o+2],i),a(n,r,i,t)}(r),function(t){const e=new Kn;for(let n=0;n<i.length;n+=3)e.x=i[n+0],e.y=i[n+1],e.z=i[n+2],e.normalize().multiplyScalar(t),i[n+0]=e.x,i[n+1]=e.y,i[n+2]=e.z}(n),function(){const t=new Kn;for(let n=0;n<i.length;n+=3){t.x=i[n+0],t.y=i[n+1],t.z=i[n+2];const r=u(t)/2/Math.PI+.5,a=(e=t,Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))/Math.PI+.5);o.push(r,1-a)}var e;(function(){const t=new Kn,e=new Kn,n=new Kn,r=new Kn,a=new Gn,s=new Gn,c=new Gn;for(let h=0,d=0;h<i.length;h+=9,d+=6){t.set(i[h+0],i[h+1],i[h+2]),e.set(i[h+3],i[h+4],i[h+5]),n.set(i[h+6],i[h+7],i[h+8]),a.set(o[d+0],o[d+1]),s.set(o[d+2],o[d+3]),c.set(o[d+4],o[d+5]),r.copy(t).add(e).add(n).divideScalar(3);const p=u(r);l(a,d+0,t,p),l(s,d+2,e,p),l(c,d+4,n,p)}})(),function(){for(let t=0;t<o.length;t+=6){const e=o[t+0],n=o[t+2],r=o[t+4],i=Math.max(e,n,r),a=Math.min(e,n,r);i>.9&&a<.1&&(e<.2&&(o[t+0]+=1),n<.2&&(o[t+2]+=1),r<.2&&(o[t+4]+=1))}}()}(),this.setAttribute("position",new Ni(i,3)),this.setAttribute("normal",new Ni(i.slice(),3)),this.setAttribute("uv",new Ni(o,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}}class $c extends Qc{constructor(t=1,e=0){const n=(1+Math.sqrt(5))/2,r=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,e),this.type="DodecahedronBufferGeometry",this.parameters={radius:t,detail:e}}}class tl extends jc{constructor(t,e){super(),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new $c(t,e)),this.mergeVertices()}}const el=new Kn,nl=new Kn,rl=new Kn,il=new hi;class ol extends qi{constructor(t,e){super(),this.type="EdgesGeometry",this.parameters={thresholdAngle:e},e=void 0!==e?e:1,t.isGeometry&&(t=(new qi).fromGeometry(t));const n=Math.pow(10,4),r=Math.cos(zn.DEG2RAD*e),i=t.getIndex(),o=t.getAttribute("position"),a=i?i.count:o.count,s=[0,0,0],c=["a","b","c"],l=new Array(3),u={},h=[];for(let t=0;t<a;t+=3){i?(s[0]=i.getX(t),s[1]=i.getX(t+1),s[2]=i.getX(t+2)):(s[0]=t,s[1]=t+1,s[2]=t+2);const{a:e,b:a,c:d}=il;if(e.fromBufferAttribute(o,s[0]),a.fromBufferAttribute(o,s[1]),d.fromBufferAttribute(o,s[2]),il.getNormal(rl),l[0]=`${Math.round(e.x*n)},${Math.round(e.y*n)},${Math.round(e.z*n)}`,l[1]=`${Math.round(a.x*n)},${Math.round(a.y*n)},${Math.round(a.z*n)}`,l[2]=`${Math.round(d.x*n)},${Math.round(d.y*n)},${Math.round(d.z*n)}`,l[0]!==l[1]&&l[1]!==l[2]&&l[2]!==l[0])for(let t=0;t<3;t++){const e=(t+1)%3,n=l[t],i=l[e],o=il[c[t]],a=il[c[e]],d=`${n}_${i}`,p=`${i}_${n}`;p in u&&u[p]?(rl.dot(u[p].normal)<=r&&(h.push(o.x,o.y,o.z),h.push(a.x,a.y,a.z)),u[p]=null):d in u||(u[d]={index0:s[t],index1:s[e],normal:rl.clone()})}}for(const t in u)if(u[t]){const{index0:e,index1:n}=u[t];el.fromBufferAttribute(o,e),nl.fromBufferAttribute(o,n),h.push(el.x,el.y,el.z),h.push(nl.x,nl.y,nl.z)}this.setAttribute("position",new Ni(h,3))}}const al=function(t,e,n){n=n||2;const r=e&&e.length,i=r?e[0]*n:t.length;let o=sl(t,0,i,n,!0);const a=[];if(!o||o.next===o.prev)return a;let s,c,l,u,h,d,p;if(r&&(o=function(t,e,n,r){const i=[];let o,a,s,c,l;for(o=0,a=e.length;o<a;o++)s=e[o]*r,c=o<a-1?e[o+1]*r:t.length,l=sl(t,s,c,r,!1),l===l.next&&(l.steiner=!0),i.push(yl(l));for(i.sort(fl),o=0;o<i.length;o++)ml(i[o],n),n=cl(n,n.next);return n}(t,e,o,n)),t.length>80*n){s=l=t[0],c=u=t[1];for(let e=n;e<i;e+=n)h=t[e],d=t[e+1],h<s&&(s=h),d<c&&(c=d),h>l&&(l=h),d>u&&(u=d);p=Math.max(l-s,u-c),p=0!==p?1/p:0}return ll(o,a,n,s,c,p),a};function sl(t,e,n,r,i){let o,a;if(i===function(t,e,n,r){let i=0;for(let o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}(t,e,n,r)>0)for(o=e;o<n;o+=r)a=Ll(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=Ll(o,t[o],t[o+1],a);return a&&_l(a,a.next)&&(Rl(a),a=a.next),a}function cl(t,e){if(!t)return t;e||(e=t);let n,r=t;do{if(n=!1,r.steiner||!_l(r,r.next)&&0!==wl(r.prev,r,r.next))r=r.next;else{if(Rl(r),r=e=r.prev,r===r.next)break;n=!0}}while(n||r!==e);return e}function ll(t,e,n,r,i,o,a){if(!t)return;!a&&o&&function(t,e,n,r){let i=t;do{null===i.z&&(i.z=vl(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){let e,n,r,i,o,a,s,c,l=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;e<l&&(s++,r=r.nextZ,r);e++);for(c=l;s>0||c>0&&r;)0!==s&&(0===c||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,c--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(a>1)}(i)}(t,r,i,o);let s,c,l=t;for(;t.prev!==t.next;)if(s=t.prev,c=t.next,o?hl(t,r,i,o):ul(t))e.push(s.i/n),e.push(t.i/n),e.push(c.i/n),Rl(t),t=c.next,l=c.next;else if((t=c)===l){a?1===a?ll(t=dl(cl(t),e,n),e,n,r,i,o,2):2===a&&pl(t,e,n,r,i,o):ll(cl(t),e,n,r,i,o,1);break}}function ul(t){const e=t.prev,n=t,r=t.next;if(wl(e,n,r)>=0)return!1;let i=t.next.next;for(;i!==t.prev;){if(xl(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&wl(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function hl(t,e,n,r){const i=t.prev,o=t,a=t.next;if(wl(i,o,a)>=0)return!1;const s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,c=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,l=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,u=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,h=vl(s,c,e,n,r),d=vl(l,u,e,n,r);let p=t.prevZ,f=t.nextZ;for(;p&&p.z>=h&&f&&f.z<=d;){if(p!==t.prev&&p!==t.next&&xl(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&wl(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,f!==t.prev&&f!==t.next&&xl(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&wl(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(;p&&p.z>=h;){if(p!==t.prev&&p!==t.next&&xl(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&wl(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;f&&f.z<=d;){if(f!==t.prev&&f!==t.next&&xl(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&wl(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function dl(t,e,n){let r=t;do{const i=r.prev,o=r.next.next;!_l(i,o)&&Ml(i,r,r.next,o)&&El(i,o)&&El(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),Rl(r),Rl(r.next),r=t=o),r=r.next}while(r!==t);return cl(r)}function pl(t,e,n,r,i,o){let a=t;do{let t=a.next.next;for(;t!==a.prev;){if(a.i!==t.i&&bl(a,t)){let s=Al(a,t);return a=cl(a,a.next),s=cl(s,s.next),ll(a,e,n,r,i,o),void ll(s,e,n,r,i,o)}t=t.next}a=a.next}while(a!==t)}function fl(t,e){return t.x-e.x}function ml(t,e){if(e=function(t,e){let n=e;const r=t.x,i=t.y;let o,a=-1/0;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){const t=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(t<=r&&t>a){if(a=t,t===r){if(i===n.y)return n;if(i===n.next.y)return n.next}o=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!o)return null;if(r===a)return o;const s=o,c=o.x,l=o.y;let u,h=1/0;n=o;do{r>=n.x&&n.x>=c&&r!==n.x&&xl(i<l?r:a,i,c,l,i<l?a:r,i,n.x,n.y)&&(u=Math.abs(i-n.y)/(r-n.x),El(n,t)&&(u<h||u===h&&(n.x>o.x||n.x===o.x&&gl(o,n)))&&(o=n,h=u)),n=n.next}while(n!==s);return o}(t,e)){const n=Al(e,t);cl(e,e.next),cl(n,n.next)}}function gl(t,e){return wl(t.prev,t,e.prev)<0&&wl(e.next,t,t.next)<0}function vl(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function yl(t){let e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function xl(t,e,n,r,i,o,a,s){return(i-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(r-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function bl(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Ml(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(El(t,e)&&El(e,t)&&function(t,e){let n=t,r=!1;const i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(wl(t.prev,t,e.prev)||wl(t,e.prev,e))||_l(t,e)&&wl(t.prev,t,t.next)>0&&wl(e.prev,e,e.next)>0)}function wl(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function _l(t,e){return t.x===e.x&&t.y===e.y}function Ml(t,e,n,r){const i=Tl(wl(t,e,n)),o=Tl(wl(t,e,r)),a=Tl(wl(n,r,t)),s=Tl(wl(n,r,e));return i!==o&&a!==s||(!(0!==i||!Sl(t,n,e))||(!(0!==o||!Sl(t,r,e))||(!(0!==a||!Sl(n,t,r))||!(0!==s||!Sl(n,e,r)))))}function Sl(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function Tl(t){return t>0?1:t<0?-1:0}function El(t,e){return wl(t.prev,t,t.next)<0?wl(t,e,t.next)>=0&&wl(t,t.prev,e)>=0:wl(t,e,t.prev)<0||wl(t,t.next,e)<0}function Al(t,e){const n=new Pl(t.i,t.x,t.y),r=new Pl(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function Ll(t,e,n,r){const i=new Pl(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Rl(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Pl(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}const Cl={area:function(t){const e=t.length;let n=0;for(let r=e-1,i=0;i<e;r=i++)n+=t[r].x*t[i].y-t[i].x*t[r].y;return.5*n},isClockWise:function(t){return Cl.area(t)<0},triangulateShape:function(t,e){const n=[],r=[],i=[];Il(t),Ol(n,t);let o=t.length;e.forEach(Il);for(let t=0;t<e.length;t++)r.push(o),o+=e[t].length,Ol(n,e[t]);const a=al(n,r);for(let t=0;t<a.length;t+=3)i.push(a.slice(t,t+3));return i}};function Il(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function Ol(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class Nl extends qi{constructor(t,e){super(),this.type="ExtrudeBufferGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];const n=this,r=[],i=[];for(let e=0,n=t.length;e<n;e++){o(t[e])}function o(t){const o=[],a=void 0!==e.curveSegments?e.curveSegments:12,s=void 0!==e.steps?e.steps:1;let c=void 0!==e.depth?e.depth:100,l=void 0===e.bevelEnabled||e.bevelEnabled,u=void 0!==e.bevelThickness?e.bevelThickness:6,h=void 0!==e.bevelSize?e.bevelSize:u-2,d=void 0!==e.bevelOffset?e.bevelOffset:0,p=void 0!==e.bevelSegments?e.bevelSegments:3;const f=e.extrudePath,m=void 0!==e.UVGenerator?e.UVGenerator:Dl;void 0!==e.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),c=e.amount);let g,v,y,x,b,w=!1;f&&(g=f.getSpacedPoints(s),w=!0,l=!1,v=f.computeFrenetFrames(s,!1),y=new Kn,x=new Kn,b=new Kn),l||(p=0,u=0,h=0,d=0);const _=t.extractPoints(a);let M=_.shape;const S=_.holes;if(!Cl.isClockWise(M)){M=M.reverse();for(let t=0,e=S.length;t<e;t++){const e=S[t];Cl.isClockWise(e)&&(S[t]=e.reverse())}}const T=Cl.triangulateShape(M,S),E=M;for(let t=0,e=S.length;t<e;t++){const e=S[t];M=M.concat(e)}function A(t,e,n){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(n).add(t)}const L=M.length,R=T.length;function P(t,e,n){let r,i,o;const a=t.x-e.x,s=t.y-e.y,c=n.x-t.x,l=n.y-t.y,u=a*a+s*s,h=a*l-s*c;if(Math.abs(h)>Number.EPSILON){const h=Math.sqrt(u),d=Math.sqrt(c*c+l*l),p=e.x-s/h,f=e.y+a/h,m=((n.x-l/d-p)*l-(n.y+c/d-f)*c)/(a*l-s*c);r=p+a*m-t.x,i=f+s*m-t.y;const g=r*r+i*i;if(g<=2)return new Gn(r,i);o=Math.sqrt(g/2)}else{let t=!1;a>Number.EPSILON?c>Number.EPSILON&&(t=!0):a<-Number.EPSILON?c<-Number.EPSILON&&(t=!0):Math.sign(s)===Math.sign(l)&&(t=!0),t?(r=-s,i=a,o=Math.sqrt(u)):(r=a,i=s,o=Math.sqrt(u/2))}return new Gn(r/o,i/o)}const C=[];for(let t=0,e=E.length,n=e-1,r=t+1;t<e;t++,n++,r++)n===e&&(n=0),r===e&&(r=0),C[t]=P(E[t],E[n],E[r]);const I=[];let O,N=C.concat();for(let t=0,e=S.length;t<e;t++){const e=S[t];O=[];for(let t=0,n=e.length,r=n-1,i=t+1;t<n;t++,r++,i++)r===n&&(r=0),i===n&&(i=0),O[t]=P(e[t],e[r],e[i]);I.push(O),N=N.concat(O)}for(let t=0;t<p;t++){const e=t/p,n=u*Math.cos(e*Math.PI/2),r=h*Math.sin(e*Math.PI/2)+d;for(let t=0,e=E.length;t<e;t++){const e=A(E[t],C[t],r);F(e.x,e.y,-n)}for(let t=0,e=S.length;t<e;t++){const e=S[t];O=I[t];for(let t=0,i=e.length;t<i;t++){const i=A(e[t],O[t],r);F(i.x,i.y,-n)}}}const D=h+d;for(let t=0;t<L;t++){const e=l?A(M[t],N[t],D):M[t];w?(x.copy(v.normals[0]).multiplyScalar(e.x),y.copy(v.binormals[0]).multiplyScalar(e.y),b.copy(g[0]).add(x).add(y),F(b.x,b.y,b.z)):F(e.x,e.y,0)}for(let t=1;t<=s;t++)for(let e=0;e<L;e++){const n=l?A(M[e],N[e],D):M[e];w?(x.copy(v.normals[t]).multiplyScalar(n.x),y.copy(v.binormals[t]).multiplyScalar(n.y),b.copy(g[t]).add(x).add(y),F(b.x,b.y,b.z)):F(n.x,n.y,c/s*t)}for(let t=p-1;t>=0;t--){const e=t/p,n=u*Math.cos(e*Math.PI/2),r=h*Math.sin(e*Math.PI/2)+d;for(let t=0,e=E.length;t<e;t++){const e=A(E[t],C[t],r);F(e.x,e.y,c+n)}for(let t=0,e=S.length;t<e;t++){const e=S[t];O=I[t];for(let t=0,i=e.length;t<i;t++){const i=A(e[t],O[t],r);w?F(i.x,i.y+g[s-1].y,g[s-1].x+n):F(i.x,i.y,c+n)}}}function B(t,e){let n=t.length;for(;--n>=0;){const r=n;let i=n-1;i<0&&(i=t.length-1);for(let t=0,n=s+2*p;t<n;t++){const n=L*t,o=L*(t+1);z(e+r+n,e+i+n,e+i+o,e+r+o)}}}function F(t,e,n){o.push(t),o.push(e),o.push(n)}function U(t,e,i){G(t),G(e),G(i);const o=r.length/3,a=m.generateTopUV(n,r,o-3,o-2,o-1);H(a[0]),H(a[1]),H(a[2])}function z(t,e,i,o){G(t),G(e),G(o),G(e),G(i),G(o);const a=r.length/3,s=m.generateSideWallUV(n,r,a-6,a-3,a-2,a-1);H(s[0]),H(s[1]),H(s[3]),H(s[1]),H(s[2]),H(s[3])}function G(t){r.push(o[3*t+0]),r.push(o[3*t+1]),r.push(o[3*t+2])}function H(t){i.push(t.x),i.push(t.y)}!function(){const t=r.length/3;if(l){let t=0,e=L*t;for(let t=0;t<R;t++){const n=T[t];U(n[2]+e,n[1]+e,n[0]+e)}t=s+2*p,e=L*t;for(let t=0;t<R;t++){const n=T[t];U(n[0]+e,n[1]+e,n[2]+e)}}else{for(let t=0;t<R;t++){const e=T[t];U(e[2],e[1],e[0])}for(let t=0;t<R;t++){const e=T[t];U(e[0]+L*s,e[1]+L*s,e[2]+L*s)}}n.addGroup(t,r.length/3-t,0)}(),function(){const t=r.length/3;let e=0;B(E,e),e+=E.length;for(let t=0,n=S.length;t<n;t++){const n=S[t];B(n,e),e+=n.length}n.addGroup(t,r.length/3-t,1)}()}this.setAttribute("position",new Ni(r,3)),this.setAttribute("uv",new Ni(i,2)),this.computeVertexNormals()}toJSON(){const t=qi.prototype.toJSON.call(this);return function(t,e,n){if(n.shapes=[],Array.isArray(t))for(let e=0,r=t.length;e<r;e++){const r=t[e];n.shapes.push(r.uuid)}else n.shapes.push(t.uuid);void 0!==e.extrudePath&&(n.options.extrudePath=e.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,t)}}const Dl={generateTopUV:function(t,e,n,r,i){const o=e[3*n],a=e[3*n+1],s=e[3*r],c=e[3*r+1],l=e[3*i],u=e[3*i+1];return[new Gn(o,a),new Gn(s,c),new Gn(l,u)]},generateSideWallUV:function(t,e,n,r,i,o){const a=e[3*n],s=e[3*n+1],c=e[3*n+2],l=e[3*r],u=e[3*r+1],h=e[3*r+2],d=e[3*i],p=e[3*i+1],f=e[3*i+2],m=e[3*o],g=e[3*o+1],v=e[3*o+2];return Math.abs(s-u)<.01?[new Gn(a,1-c),new Gn(l,1-h),new Gn(d,1-f),new Gn(m,1-v)]:[new Gn(s,1-c),new Gn(u,1-h),new Gn(p,1-f),new Gn(g,1-v)]}};class Bl extends jc{constructor(t,e){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},this.fromBufferGeometry(new Nl(t,e)),this.mergeVertices()}toJSON(){const t=super.toJSON();return function(t,e,n){if(n.shapes=[],Array.isArray(t))for(let e=0,r=t.length;e<r;e++){const r=t[e];n.shapes.push(r.uuid)}else n.shapes.push(t.uuid);void 0!==e.extrudePath&&(n.options.extrudePath=e.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,t)}}class Fl extends Qc{constructor(t=1,e=0){const n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,e),this.type="IcosahedronBufferGeometry",this.parameters={radius:t,detail:e}}}class Ul extends jc{constructor(t,e){super(),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Fl(t,e)),this.mergeVertices()}}class zl extends qi{constructor(t,e=12,n=0,r=2*Math.PI){super(),this.type="LatheBufferGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:r},e=Math.floor(e),r=zn.clamp(r,0,2*Math.PI);const i=[],o=[],a=[],s=1/e,c=new Kn,l=new Gn;for(let i=0;i<=e;i++){const u=n+i*s*r,h=Math.sin(u),d=Math.cos(u);for(let n=0;n<=t.length-1;n++)c.x=t[n].x*h,c.y=t[n].y,c.z=t[n].x*d,o.push(c.x,c.y,c.z),l.x=i/e,l.y=n/(t.length-1),a.push(l.x,l.y)}for(let n=0;n<e;n++)for(let e=0;e<t.length-1;e++){const r=e+n*t.length,o=r,a=r+t.length,s=r+t.length+1,c=r+1;i.push(o,a,c),i.push(a,s,c)}if(this.setIndex(i),this.setAttribute("position",new Ni(o,3)),this.setAttribute("uv",new Ni(a,2)),this.computeVertexNormals(),r===2*Math.PI){const n=this.attributes.normal.array,r=new Kn,i=new Kn,o=new Kn,a=e*t.length*3;for(let e=0,s=0;e<t.length;e++,s+=3)r.x=n[s+0],r.y=n[s+1],r.z=n[s+2],i.x=n[a+s+0],i.y=n[a+s+1],i.z=n[a+s+2],o.addVectors(r,i).normalize(),n[s+0]=n[a+s+0]=o.x,n[s+1]=n[a+s+1]=o.y,n[s+2]=n[a+s+2]=o.z}}}class Gl extends jc{constructor(t,e,n,r){super(),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:r},this.fromBufferGeometry(new zl(t,e,n,r)),this.mergeVertices()}}class Hl extends Qc{constructor(t=1,e=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,e),this.type="OctahedronBufferGeometry",this.parameters={radius:t,detail:e}}}class kl extends jc{constructor(t,e){super(),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Hl(t,e)),this.mergeVertices()}}function Vl(t,e,n){qi.call(this),this.type="ParametricBufferGeometry",this.parameters={func:t,slices:e,stacks:n};const r=[],i=[],o=[],a=[],s=1e-5,c=new Kn,l=new Kn,u=new Kn,h=new Kn,d=new Kn;t.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");const p=e+1;for(let r=0;r<=n;r++){const p=r/n;for(let n=0;n<=e;n++){const r=n/e;t(r,p,l),i.push(l.x,l.y,l.z),r-s>=0?(t(r-s,p,u),h.subVectors(l,u)):(t(r+s,p,u),h.subVectors(u,l)),p-s>=0?(t(r,p-s,u),d.subVectors(l,u)):(t(r,p+s,u),d.subVectors(u,l)),c.crossVectors(h,d).normalize(),o.push(c.x,c.y,c.z),a.push(r,p)}}for(let t=0;t<n;t++)for(let n=0;n<e;n++){const e=t*p+n,i=t*p+n+1,o=(t+1)*p+n+1,a=(t+1)*p+n;r.push(e,i,a),r.push(i,o,a)}this.setIndex(r),this.setAttribute("position",new Ni(i,3)),this.setAttribute("normal",new Ni(o,3)),this.setAttribute("uv",new Ni(a,2))}function jl(t,e,n){jc.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:n},this.fromBufferGeometry(new Vl(t,e,n)),this.mergeVertices()}Vl.prototype=Object.create(qi.prototype),Vl.prototype.constructor=Vl,jl.prototype=Object.create(jc.prototype),jl.prototype.constructor=jl;class Wl extends jc{constructor(t,e,n,r){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r},this.fromBufferGeometry(new Co(t,e,n,r)),this.mergeVertices()}}class Xl extends jc{constructor(t,e,n,r){super(),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:r},this.fromBufferGeometry(new Qc(t,e,n,r)),this.mergeVertices()}}class ql extends qi{constructor(t=.5,e=1,n=8,r=1,i=0,o=2*Math.PI){super(),this.type="RingBufferGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},n=Math.max(3,n);const a=[],s=[],c=[],l=[];let u=t;const h=(e-t)/(r=Math.max(1,r)),d=new Kn,p=new Gn;for(let t=0;t<=r;t++){for(let t=0;t<=n;t++){const r=i+t/n*o;d.x=u*Math.cos(r),d.y=u*Math.sin(r),s.push(d.x,d.y,d.z),c.push(0,0,1),p.x=(d.x/e+1)/2,p.y=(d.y/e+1)/2,l.push(p.x,p.y)}u+=h}for(let t=0;t<r;t++){const e=t*(n+1);for(let t=0;t<n;t++){const r=t+e,i=r,o=r+n+1,s=r+n+2,c=r+1;a.push(i,o,c),a.push(o,s,c)}}this.setIndex(a),this.setAttribute("position",new Ni(s,3)),this.setAttribute("normal",new Ni(c,3)),this.setAttribute("uv",new Ni(l,2))}}class Yl extends jc{constructor(t,e,n,r,i,o){super(),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},this.fromBufferGeometry(new ql(t,e,n,r,i,o)),this.mergeVertices()}}class Zl extends qi{constructor(t,e=12){super(),this.type="ShapeBufferGeometry",this.parameters={shapes:t,curveSegments:e};const n=[],r=[],i=[],o=[];let a=0,s=0;if(!1===Array.isArray(t))c(t);else for(let e=0;e<t.length;e++)c(t[e]),this.addGroup(a,s,e),a+=s,s=0;function c(t){const a=r.length/3,c=t.extractPoints(e);let l=c.shape;const u=c.holes;!1===Cl.isClockWise(l)&&(l=l.reverse());for(let t=0,e=u.length;t<e;t++){const e=u[t];!0===Cl.isClockWise(e)&&(u[t]=e.reverse())}const h=Cl.triangulateShape(l,u);for(let t=0,e=u.length;t<e;t++){const e=u[t];l=l.concat(e)}for(let t=0,e=l.length;t<e;t++){const e=l[t];r.push(e.x,e.y,0),i.push(0,0,1),o.push(e.x,e.y)}for(let t=0,e=h.length;t<e;t++){const e=h[t],r=e[0]+a,i=e[1]+a,o=e[2]+a;n.push(r,i,o),s+=3}}this.setIndex(n),this.setAttribute("position",new Ni(r,3)),this.setAttribute("normal",new Ni(i,3)),this.setAttribute("uv",new Ni(o,2))}toJSON(){const t=qi.prototype.toJSON.call(this);return function(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,r=t.length;n<r;n++){const r=t[n];e.shapes.push(r.uuid)}else e.shapes.push(t.uuid);return e}(this.parameters.shapes,t)}}class Jl extends jc{constructor(t,e){super(),this.type="ShapeGeometry","object"==typeof e&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),e=e.curveSegments),this.parameters={shapes:t,curveSegments:e},this.fromBufferGeometry(new Zl(t,e)),this.mergeVertices()}toJSON(){const t=jc.prototype.toJSON.call(this);return function(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,r=t.length;n<r;n++){const r=t[n];e.shapes.push(r.uuid)}else e.shapes.push(t.uuid);return e}(this.parameters.shapes,t)}}class Kl extends qi{constructor(t=1,e=8,n=6,r=0,i=2*Math.PI,o=0,a=Math.PI){super(),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},e=Math.max(3,Math.floor(e)),n=Math.max(2,Math.floor(n));const s=Math.min(o+a,Math.PI);let c=0;const l=[],u=new Kn,h=new Kn,d=[],p=[],f=[],m=[];for(let d=0;d<=n;d++){const g=[],v=d/n;let y=0;0==d&&0==o?y=.5/e:d==n&&s==Math.PI&&(y=-.5/e);for(let n=0;n<=e;n++){const s=n/e;u.x=-t*Math.cos(r+s*i)*Math.sin(o+v*a),u.y=t*Math.cos(o+v*a),u.z=t*Math.sin(r+s*i)*Math.sin(o+v*a),p.push(u.x,u.y,u.z),h.copy(u).normalize(),f.push(h.x,h.y,h.z),m.push(s+y,1-v),g.push(c++)}l.push(g)}for(let t=0;t<n;t++)for(let r=0;r<e;r++){const e=l[t][r+1],i=l[t][r],a=l[t+1][r],c=l[t+1][r+1];(0!==t||o>0)&&d.push(e,i,c),(t!==n-1||s<Math.PI)&&d.push(i,a,c)}this.setIndex(d),this.setAttribute("position",new Ni(p,3)),this.setAttribute("normal",new Ni(f,3)),this.setAttribute("uv",new Ni(m,2))}}class Ql extends jc{constructor(t,e,n,r,i,o,a){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new Kl(t,e,n,r,i,o,a)),this.mergeVertices()}}class $l extends Qc{constructor(t=1,e=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,e),this.type="TetrahedronBufferGeometry",this.parameters={radius:t,detail:e}}}class tu extends jc{constructor(t,e){super(),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new $l(t,e)),this.mergeVertices()}}class eu extends Nl{constructor(t,e={}){const n=e.font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new qi;const r=n.generateShapes(t,e.size);e.depth=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),super(r,e),this.type="TextBufferGeometry"}}class nu extends jc{constructor(t,e){super(),this.type="TextGeometry",this.parameters={text:t,parameters:e},this.fromBufferGeometry(new eu(t,e)),this.mergeVertices()}}class ru extends qi{constructor(t=1,e=.4,n=8,r=6,i=2*Math.PI){super(),this.type="TorusBufferGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:r,arc:i},n=Math.floor(n),r=Math.floor(r);const o=[],a=[],s=[],c=[],l=new Kn,u=new Kn,h=new Kn;for(let o=0;o<=n;o++)for(let d=0;d<=r;d++){const p=d/r*i,f=o/n*Math.PI*2;u.x=(t+e*Math.cos(f))*Math.cos(p),u.y=(t+e*Math.cos(f))*Math.sin(p),u.z=e*Math.sin(f),a.push(u.x,u.y,u.z),l.x=t*Math.cos(p),l.y=t*Math.sin(p),h.subVectors(u,l).normalize(),s.push(h.x,h.y,h.z),c.push(d/r),c.push(o/n)}for(let t=1;t<=n;t++)for(let e=1;e<=r;e++){const n=(r+1)*t+e-1,i=(r+1)*(t-1)+e-1,a=(r+1)*(t-1)+e,s=(r+1)*t+e;o.push(n,i,s),o.push(i,a,s)}this.setIndex(o),this.setAttribute("position",new Ni(a,3)),this.setAttribute("normal",new Ni(s,3)),this.setAttribute("uv",new Ni(c,2))}}class iu extends jc{constructor(t,e,n,r,i){super(),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:r,arc:i},this.fromBufferGeometry(new ru(t,e,n,r,i)),this.mergeVertices()}}class ou extends qi{constructor(t=1,e=.4,n=64,r=8,i=2,o=3){super(),this.type="TorusKnotBufferGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:r,p:i,q:o},n=Math.floor(n),r=Math.floor(r);const a=[],s=[],c=[],l=[],u=new Kn,h=new Kn,d=new Kn,p=new Kn,f=new Kn,m=new Kn,g=new Kn;for(let a=0;a<=n;++a){const y=a/n*i*Math.PI*2;v(y,i,o,t,d),v(y+.01,i,o,t,p),m.subVectors(p,d),g.addVectors(p,d),f.crossVectors(m,g),g.crossVectors(f,m),f.normalize(),g.normalize();for(let t=0;t<=r;++t){const i=t/r*Math.PI*2,o=-e*Math.cos(i),p=e*Math.sin(i);u.x=d.x+(o*g.x+p*f.x),u.y=d.y+(o*g.y+p*f.y),u.z=d.z+(o*g.z+p*f.z),s.push(u.x,u.y,u.z),h.subVectors(u,d).normalize(),c.push(h.x,h.y,h.z),l.push(a/n),l.push(t/r)}}for(let t=1;t<=n;t++)for(let e=1;e<=r;e++){const n=(r+1)*(t-1)+(e-1),i=(r+1)*t+(e-1),o=(r+1)*t+e,s=(r+1)*(t-1)+e;a.push(n,i,s),a.push(i,o,s)}function v(t,e,n,r,i){const o=Math.cos(t),a=Math.sin(t),s=n/e*t,c=Math.cos(s);i.x=r*(2+c)*.5*o,i.y=r*(2+c)*a*.5,i.z=r*Math.sin(s)*.5}this.setIndex(a),this.setAttribute("position",new Ni(s,3)),this.setAttribute("normal",new Ni(c,3)),this.setAttribute("uv",new Ni(l,2))}}class au extends jc{constructor(t,e,n,r,i,o,a){super(),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:r,p:i,q:o},void 0!==a&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new ou(t,e,n,r,i,o)),this.mergeVertices()}}class su extends qi{constructor(t,e=64,n=1,r=8,i=!1){super(),this.type="TubeBufferGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:r,closed:i};const o=t.computeFrenetFrames(e,i);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new Kn,s=new Kn,c=new Gn;let l=new Kn;const u=[],h=[],d=[],p=[];function f(i){l=t.getPointAt(i/e,l);const c=o.normals[i],d=o.binormals[i];for(let t=0;t<=r;t++){const e=t/r*Math.PI*2,i=Math.sin(e),o=-Math.cos(e);s.x=o*c.x+i*d.x,s.y=o*c.y+i*d.y,s.z=o*c.z+i*d.z,s.normalize(),h.push(s.x,s.y,s.z),a.x=l.x+n*s.x,a.y=l.y+n*s.y,a.z=l.z+n*s.z,u.push(a.x,a.y,a.z)}}!function(){for(let t=0;t<e;t++)f(t);f(!1===i?e:0),function(){for(let t=0;t<=e;t++)for(let n=0;n<=r;n++)c.x=t/e,c.y=n/r,d.push(c.x,c.y)}(),function(){for(let t=1;t<=e;t++)for(let e=1;e<=r;e++){const n=(r+1)*(t-1)+(e-1),i=(r+1)*t+(e-1),o=(r+1)*t+e,a=(r+1)*(t-1)+e;p.push(n,i,a),p.push(i,o,a)}}()}(),this.setIndex(p),this.setAttribute("position",new Ni(u,3)),this.setAttribute("normal",new Ni(h,3)),this.setAttribute("uv",new Ni(d,2))}toJSON(){const t=qi.prototype.toJSON.call(this);return t.path=this.parameters.path.toJSON(),t}}class cu extends jc{constructor(t,e,n,r,i,o){super(),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:r,closed:i},void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed.");const a=new su(t,e,n,r,i);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices()}}class lu extends qi{constructor(t){super(),this.type="WireframeGeometry";const e=[],n=[0,0],r={},i=["a","b","c"];if(t&&t.isGeometry){const o=t.faces;for(let t=0,e=o.length;t<e;t++){const e=o[t];for(let t=0;t<3;t++){const o=e[i[t]],a=e[i[(t+1)%3]];n[0]=Math.min(o,a),n[1]=Math.max(o,a);const s=n[0]+","+n[1];void 0===r[s]&&(r[s]={index1:n[0],index2:n[1]})}}for(const n in r){const i=r[n];let o=t.vertices[i.index1];e.push(o.x,o.y,o.z),o=t.vertices[i.index2],e.push(o.x,o.y,o.z)}}else if(t&&t.isBufferGeometry){const i=new Kn;if(null!==t.index){const o=t.attributes.position,a=t.index;let s=t.groups;0===s.length&&(s=[{start:0,count:a.count,materialIndex:0}]);for(let t=0,e=s.length;t<e;++t){const e=s[t],i=e.start;for(let t=i,o=i+e.count;t<o;t+=3)for(let e=0;e<3;e++){const i=a.getX(t+e),o=a.getX(t+(e+1)%3);n[0]=Math.min(i,o),n[1]=Math.max(i,o);const s=n[0]+","+n[1];void 0===r[s]&&(r[s]={index1:n[0],index2:n[1]})}}for(const t in r){const n=r[t];i.fromBufferAttribute(o,n.index1),e.push(i.x,i.y,i.z),i.fromBufferAttribute(o,n.index2),e.push(i.x,i.y,i.z)}}else{const n=t.attributes.position;for(let t=0,r=n.count/3;t<r;t++)for(let r=0;r<3;r++){const o=3*t+r;i.fromBufferAttribute(n,o),e.push(i.x,i.y,i.z);const a=3*t+(r+1)%3;i.fromBufferAttribute(n,a),e.push(i.x,i.y,i.z)}}}this.setAttribute("position",new Ni(e,3))}}var uu=Object.freeze({__proto__:null,BoxGeometry:Wc,BoxBufferGeometry:mo,CircleGeometry:qc,CircleBufferGeometry:Xc,ConeGeometry:Jc,ConeBufferGeometry:Kc,CylinderGeometry:Zc,CylinderBufferGeometry:Yc,DodecahedronGeometry:tl,DodecahedronBufferGeometry:$c,EdgesGeometry:ol,ExtrudeGeometry:Bl,ExtrudeBufferGeometry:Nl,IcosahedronGeometry:Ul,IcosahedronBufferGeometry:Fl,LatheGeometry:Gl,LatheBufferGeometry:zl,OctahedronGeometry:kl,OctahedronBufferGeometry:Hl,ParametricGeometry:jl,ParametricBufferGeometry:Vl,PlaneGeometry:Wl,PlaneBufferGeometry:Co,PolyhedronGeometry:Xl,PolyhedronBufferGeometry:Qc,RingGeometry:Yl,RingBufferGeometry:ql,ShapeGeometry:Jl,ShapeBufferGeometry:Zl,SphereGeometry:Ql,SphereBufferGeometry:Kl,TetrahedronGeometry:tu,TetrahedronBufferGeometry:$l,TextGeometry:nu,TextBufferGeometry:eu,TorusGeometry:iu,TorusBufferGeometry:ru,TorusKnotGeometry:au,TorusKnotBufferGeometry:ou,TubeGeometry:cu,TubeBufferGeometry:su,WireframeGeometry:lu});function hu(t){wi.call(this),this.type="ShadowMaterial",this.color=new yi(0),this.transparent=!0,this.setValues(t)}function du(t){xo.call(this,t),this.type="RawShaderMaterial"}function pu(t){wi.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new yi(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new yi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sn,this.normalScale=new Gn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.vertexTangents=!1,this.setValues(t)}function fu(t){pu.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Gn(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,Object.defineProperty(this,"ior",{get:function(){return(1+.4*this.reflectivity)/(1-.4*this.reflectivity)},set:function(t){this.reflectivity=zn.clamp(2.5*(t-1)/(t+1),0,1)}}),this.sheen=null,this.transmission=0,this.transmissionMap=null,this.setValues(t)}function mu(t){wi.call(this),this.type="MeshPhongMaterial",this.color=new yi(16777215),this.specular=new yi(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new yi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sn,this.normalScale=new Gn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Z,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function gu(t){wi.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new yi(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new yi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sn,this.normalScale=new Gn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function vu(t){wi.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sn,this.normalScale=new Gn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function yu(t){wi.call(this),this.type="MeshLambertMaterial",this.color=new yi(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new yi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Z,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function xu(t){wi.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new yi(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sn,this.normalScale=new Gn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function bu(t){yc.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}hu.prototype=Object.create(wi.prototype),hu.prototype.constructor=hu,hu.prototype.isShadowMaterial=!0,hu.prototype.copy=function(t){return wi.prototype.copy.call(this,t),this.color.copy(t.color),this},du.prototype=Object.create(xo.prototype),du.prototype.constructor=du,du.prototype.isRawShaderMaterial=!0,pu.prototype=Object.create(wi.prototype),pu.prototype.constructor=pu,pu.prototype.isMeshStandardMaterial=!0,pu.prototype.copy=function(t){return wi.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.vertexTangents=t.vertexTangents,this},fu.prototype=Object.create(pu.prototype),fu.prototype.constructor=fu,fu.prototype.isMeshPhysicalMaterial=!0,fu.prototype.copy=function(t){return pu.prototype.copy.call(this,t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.reflectivity=t.reflectivity,t.sheen?this.sheen=(this.sheen||new yi).copy(t.sheen):this.sheen=null,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this},mu.prototype=Object.create(wi.prototype),mu.prototype.constructor=mu,mu.prototype.isMeshPhongMaterial=!0,mu.prototype.copy=function(t){return wi.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},gu.prototype=Object.create(wi.prototype),gu.prototype.constructor=gu,gu.prototype.isMeshToonMaterial=!0,gu.prototype.copy=function(t){return wi.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},vu.prototype=Object.create(wi.prototype),vu.prototype.constructor=vu,vu.prototype.isMeshNormalMaterial=!0,vu.prototype.copy=function(t){return wi.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},yu.prototype=Object.create(wi.prototype),yu.prototype.constructor=yu,yu.prototype.isMeshLambertMaterial=!0,yu.prototype.copy=function(t){return wi.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},xu.prototype=Object.create(wi.prototype),xu.prototype.constructor=xu,xu.prototype.isMeshMatcapMaterial=!0,xu.prototype.copy=function(t){return wi.prototype.copy.call(this,t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},bu.prototype=Object.create(yc.prototype),bu.prototype.constructor=bu,bu.prototype.isLineDashedMaterial=!0,bu.prototype.copy=function(t){return yc.prototype.copy.call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};var wu=Object.freeze({__proto__:null,ShadowMaterial:hu,SpriteMaterial:Vs,RawShaderMaterial:du,ShaderMaterial:xo,PointsMaterial:Rc,MeshPhysicalMaterial:fu,MeshStandardMaterial:pu,MeshPhongMaterial:mu,MeshToonMaterial:gu,MeshNormalMaterial:vu,MeshLambertMaterial:yu,MeshDepthMaterial:Ss,MeshDistanceMaterial:Ts,MeshBasicMaterial:_i,MeshMatcapMaterial:xu,LineDashedMaterial:bu,LineBasicMaterial:yc,Material:wi});const _u={arraySlice:function(t,e,n){return _u.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){const e=t.length,n=new Array(e);for(let t=0;t!==e;++t)n[t]=t;return n.sort((function(e,n){return t[e]-t[n]})),n},sortedArray:function(t,e,n){const r=t.length,i=new t.constructor(r);for(let o=0,a=0;a!==r;++o){const r=n[o]*e;for(let n=0;n!==e;++n)i[a++]=t[r+n]}return i},flattenJSON:function(t,e,n,r){let i=1,o=t[0];for(;void 0!==o&&void 0===o[r];)o=t[i++];if(void 0===o)return;let a=o[r];if(void 0!==a)if(Array.isArray(a))do{a=o[r],void 0!==a&&(e.push(o.time),n.push.apply(n,a)),o=t[i++]}while(void 0!==o);else if(void 0!==a.toArray)do{a=o[r],void 0!==a&&(e.push(o.time),a.toArray(n,n.length)),o=t[i++]}while(void 0!==o);else do{a=o[r],void 0!==a&&(e.push(o.time),n.push(a)),o=t[i++]}while(void 0!==o)},subclip:function(t,e,n,r,i=30){const o=t.clone();o.name=e;const a=[];for(let t=0;t<o.tracks.length;++t){const e=o.tracks[t],s=e.getValueSize(),c=[],l=[];for(let t=0;t<e.times.length;++t){const o=e.times[t]*i;if(!(o<n||o>=r)){c.push(e.times[t]);for(let n=0;n<s;++n)l.push(e.values[t*s+n])}}0!==c.length&&(e.times=_u.convertArray(c,e.times.constructor),e.values=_u.convertArray(l,e.values.constructor),a.push(e))}o.tracks=a;let s=1/0;for(let t=0;t<o.tracks.length;++t)s>o.tracks[t].times[0]&&(s=o.tracks[t].times[0]);for(let t=0;t<o.tracks.length;++t)o.tracks[t].shift(-1*s);return o.resetDuration(),o},makeClipAdditive:function(t,e=0,n=t,r=30){r<=0&&(r=30);const i=n.tracks.length,o=e/r;for(let e=0;e<i;++e){const r=n.tracks[e],i=r.ValueTypeName;if("bool"===i||"string"===i)continue;const a=t.tracks.find((function(t){return t.name===r.name&&t.ValueTypeName===i}));if(void 0===a)continue;let s=0;const c=r.getValueSize();r.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(s=c/3);let l=0;const u=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(l=u/3);const h=r.times.length-1;let d;if(o<=r.times[0]){const t=s,e=c-s;d=_u.arraySlice(r.values,t,e)}else if(o>=r.times[h]){const t=h*c+s,e=t+c-s;d=_u.arraySlice(r.values,t,e)}else{const t=r.createInterpolant(),e=s,n=c-s;t.evaluate(o),d=_u.arraySlice(t.resultBuffer,e,n)}if("quaternion"===i){(new Jn).fromArray(d).normalize().conjugate().toArray(d)}const p=a.times.length;for(let t=0;t<p;++t){const e=t*u+l;if("quaternion"===i)Jn.multiplyQuaternionsFlat(a.values,e,d,0,a.values,e);else{const t=u-2*l;for(let n=0;n<t;++n)a.values[e+n]-=d[n]}}}return t.blendMode=Xe,t}};function Mu(t,e,n,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new e.constructor(n),this.sampleValues=e,this.valueSize=n}function Su(t,e,n,r){Mu.call(this,t,e,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function Tu(t,e,n,r){Mu.call(this,t,e,n,r)}function Eu(t,e,n,r){Mu.call(this,t,e,n,r)}function Au(t,e,n,r){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=_u.convertArray(e,this.TimeBufferType),this.values=_u.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}function Lu(t,e,n){Au.call(this,t,e,n)}function Ru(t,e,n,r){Au.call(this,t,e,n,r)}function Pu(t,e,n,r){Au.call(this,t,e,n,r)}function Cu(t,e,n,r){Mu.call(this,t,e,n,r)}function Iu(t,e,n,r){Au.call(this,t,e,n,r)}function Ou(t,e,n,r){Au.call(this,t,e,n,r)}function Nu(t,e,n,r){Au.call(this,t,e,n,r)}function Du(t,e,n,r){this.name=t,this.tracks=n,this.duration=void 0!==e?e:-1,this.blendMode=void 0!==r?r:We,this.uuid=zn.generateUUID(),this.duration<0&&this.resetDuration()}function Bu(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Pu;case"vector":case"vector2":case"vector3":case"vector4":return Nu;case"color":return Ru;case"quaternion":return Iu;case"bool":case"boolean":return Lu;case"string":return Ou}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);if(void 0===t.times){const e=[],n=[];_u.flattenJSON(t.keys,e,n,"value"),t.times=e,t.values=n}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}Object.assign(Mu.prototype,{evaluate:function(t){const e=this.parameterPositions;let n=this._cachedIndex,r=e[n],i=e[n-1];t:{e:{let o;n:{r:if(!(t<r)){for(let o=n+2;;){if(void 0===r){if(t<i)break r;return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,t,i)}if(n===o)break;if(i=r,r=e[++n],t<r)break e}o=e.length;break n}if(t>=i)break t;{const a=e[1];t<a&&(n=2,i=a);for(let o=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,t,r);if(n===o)break;if(r=i,i=e[--n-1],t>=i)break e}o=n,n=0}}for(;n<o;){const r=n+o>>>1;t<e[r]?o=r:n=r+1}if(r=e[n],i=e[n-1],void 0===i)return this._cachedIndex=0,this.beforeStart_(0,t,r);if(void 0===r)return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,i,t)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,t,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){const e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=t*r;for(let t=0;t!==r;++t)e[t]=n[i+t];return e},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(Mu.prototype,{beforeStart_:Mu.prototype.copySampleValue_,afterEnd_:Mu.prototype.copySampleValue_}),Su.prototype=Object.assign(Object.create(Mu.prototype),{constructor:Su,DefaultSettings_:{endingStart:ke,endingEnd:ke},intervalChanged_:function(t,e,n){const r=this.parameterPositions;let i=t-2,o=t+1,a=r[i],s=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case Ve:i=t,a=2*e-n;break;case je:i=r.length-2,a=e+r[i]-r[i+1];break;default:i=t,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case Ve:o=t,s=2*n-e;break;case je:o=1,s=n+r[1]-r[0];break;default:o=t-1,s=e}const c=.5*(n-e),l=this.valueSize;this._weightPrev=c/(e-a),this._weightNext=c/(s-n),this._offsetPrev=i*l,this._offsetNext=o*l},interpolate_:function(t,e,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,c=s-a,l=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,d=this._weightNext,p=(n-e)/(r-e),f=p*p,m=f*p,g=-h*m+2*h*f-h*p,v=(1+h)*m+(-1.5-2*h)*f+(-.5+h)*p+1,y=(-1-d)*m+(1.5+d)*f+.5*p,x=d*m-d*f;for(let t=0;t!==a;++t)i[t]=g*o[l+t]+v*o[c+t]+y*o[s+t]+x*o[u+t];return i}}),Tu.prototype=Object.assign(Object.create(Mu.prototype),{constructor:Tu,interpolate_:function(t,e,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,c=s-a,l=(n-e)/(r-e),u=1-l;for(let t=0;t!==a;++t)i[t]=o[c+t]*u+o[s+t]*l;return i}}),Eu.prototype=Object.assign(Object.create(Mu.prototype),{constructor:Eu,interpolate_:function(t){return this.copySampleValue_(t-1)}}),Object.assign(Au,{toJSON:function(t){const e=t.constructor;let n;if(void 0!==e.toJSON)n=e.toJSON(t);else{n={name:t.name,times:_u.convertArray(t.times,Array),values:_u.convertArray(t.values,Array)};const e=t.getInterpolation();e!==t.DefaultInterpolation&&(n.interpolation=e)}return n.type=t.ValueTypeName,n}}),Object.assign(Au.prototype,{constructor:Au,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:Ge,InterpolantFactoryMethodDiscrete:function(t){return new Eu(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new Tu(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new Su(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){let e;switch(t){case ze:e=this.InterpolantFactoryMethodDiscrete;break;case Ge:e=this.InterpolantFactoryMethodLinear;break;case He:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){const e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(e);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",e),this}return this.createInterpolant=e,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return ze;case this.InterpolantFactoryMethodLinear:return Ge;case this.InterpolantFactoryMethodSmooth:return He}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t){const e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]+=t}return this},scale:function(t){if(1!==t){const e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]*=t}return this},trim:function(t,e){const n=this.times,r=n.length;let i=0,o=r-1;for(;i!==r&&n[i]<t;)++i;for(;-1!==o&&n[o]>e;)--o;if(++o,0!==i||o!==r){i>=o&&(o=Math.max(o,1),i=o-1);const t=this.getValueSize();this.times=_u.arraySlice(n,i,o),this.values=_u.arraySlice(this.values,i*t,o*t)}return this},validate:function(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let o=null;for(let e=0;e!==i;e++){const r=n[e];if("number"==typeof r&&isNaN(r)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,e,r),t=!1;break}if(null!==o&&o>r){console.error("THREE.KeyframeTrack: Out of order keys.",this,e,r,o),t=!1;break}o=r}if(void 0!==r&&_u.isTypedArray(r))for(let e=0,n=r.length;e!==n;++e){const n=r[e];if(isNaN(n)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,e,n),t=!1;break}}return t},optimize:function(){const t=_u.arraySlice(this.times),e=_u.arraySlice(this.values),n=this.getValueSize(),r=this.getInterpolation()===He,i=t.length-1;let o=1;for(let a=1;a<i;++a){let i=!1;const s=t[a];if(s!==t[a+1]&&(1!==a||s!==s[0]))if(r)i=!0;else{const t=a*n,r=t-n,o=t+n;for(let a=0;a!==n;++a){const n=e[t+a];if(n!==e[r+a]||n!==e[o+a]){i=!0;break}}}if(i){if(a!==o){t[o]=t[a];const r=a*n,i=o*n;for(let t=0;t!==n;++t)e[i+t]=e[r+t]}++o}}if(i>0){t[o]=t[i];for(let t=i*n,r=o*n,a=0;a!==n;++a)e[r+a]=e[t+a];++o}return o!==t.length?(this.times=_u.arraySlice(t,0,o),this.values=_u.arraySlice(e,0,o*n)):(this.times=t,this.values=e),this},clone:function(){const t=_u.arraySlice(this.times,0),e=_u.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,t,e);return n.createInterpolant=this.createInterpolant,n}}),Lu.prototype=Object.assign(Object.create(Au.prototype),{constructor:Lu,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:ze,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Ru.prototype=Object.assign(Object.create(Au.prototype),{constructor:Ru,ValueTypeName:"color"}),Pu.prototype=Object.assign(Object.create(Au.prototype),{constructor:Pu,ValueTypeName:"number"}),Cu.prototype=Object.assign(Object.create(Mu.prototype),{constructor:Cu,interpolate_:function(t,e,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=(n-e)/(r-e);let c=t*a;for(let t=c+a;c!==t;c+=4)Jn.slerpFlat(i,0,o,c-a,o,c,s);return i}}),Iu.prototype=Object.assign(Object.create(Au.prototype),{constructor:Iu,ValueTypeName:"quaternion",DefaultInterpolation:Ge,InterpolantFactoryMethodLinear:function(t){return new Cu(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),Ou.prototype=Object.assign(Object.create(Au.prototype),{constructor:Ou,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:ze,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Nu.prototype=Object.assign(Object.create(Au.prototype),{constructor:Nu,ValueTypeName:"vector"}),Object.assign(Du,{parse:function(t){const e=[],n=t.tracks,r=1/(t.fps||1);for(let t=0,i=n.length;t!==i;++t)e.push(Bu(n[t]).scale(r));const i=new Du(t.name,t.duration,e,t.blendMode);return i.uuid=t.uuid,i},toJSON:function(t){const e=[],n=t.tracks,r={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let t=0,r=n.length;t!==r;++t)e.push(Au.toJSON(n[t]));return r},CreateFromMorphTargetSequence:function(t,e,n,r){const i=e.length,o=[];for(let t=0;t<i;t++){let a=[],s=[];a.push((t+i-1)%i,t,(t+1)%i),s.push(0,1,0);const c=_u.getKeyframeOrder(a);a=_u.sortedArray(a,1,c),s=_u.sortedArray(s,1,c),r||0!==a[0]||(a.push(i),s.push(s[0])),o.push(new Pu(".morphTargetInfluences["+e[t].name+"]",a,s).scale(1/n))}return new Du(t,-1,o)},findByName:function(t,e){let n=t;if(!Array.isArray(t)){const e=t;n=e.geometry&&e.geometry.animations||e.animations}for(let t=0;t<n.length;t++)if(n[t].name===e)return n[t];return null},CreateClipsFromMorphTargetSequences:function(t,e,n){const r={},i=/^([\w-]*?)([\d]+)$/;for(let e=0,n=t.length;e<n;e++){const n=t[e],o=n.name.match(i);if(o&&o.length>1){const t=o[1];let e=r[t];e||(r[t]=e=[]),e.push(n)}}const o=[];for(const t in r)o.push(Du.CreateFromMorphTargetSequence(t,r[t],e,n));return o},parseAnimation:function(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(t,e,n,r,i){if(0!==n.length){const o=[],a=[];_u.flattenJSON(n,o,a,r),0!==o.length&&i.push(new t(e,o,a))}},r=[],i=t.name||"default",o=t.fps||30,a=t.blendMode;let s=t.length||-1;const c=t.hierarchy||[];for(let t=0;t<c.length;t++){const i=c[t].keys;if(i&&0!==i.length)if(i[0].morphTargets){const t={};let e;for(e=0;e<i.length;e++)if(i[e].morphTargets)for(let n=0;n<i[e].morphTargets.length;n++)t[i[e].morphTargets[n]]=-1;for(const n in t){const t=[],o=[];for(let r=0;r!==i[e].morphTargets.length;++r){const r=i[e];t.push(r.time),o.push(r.morphTarget===n?1:0)}r.push(new Pu(".morphTargetInfluence["+n+"]",t,o))}s=t.length*(o||1)}else{const o=".bones["+e[t].name+"]";n(Nu,o+".position",i,"pos",r),n(Iu,o+".quaternion",i,"rot",r),n(Nu,o+".scale",i,"scl",r)}}if(0===r.length)return null;return new Du(i,s,r,a)}}),Object.assign(Du.prototype,{resetDuration:function(){let t=0;for(let e=0,n=this.tracks.length;e!==n;++e){const n=this.tracks[e];t=Math.max(t,n.times[n.times.length-1])}return this.duration=t,this},trim:function(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},validate:function(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t},optimize:function(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this},clone:function(){const t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new Du(this.name,this.duration,t,this.blendMode)},toJSON:function(){return Du.toJSON(this)}});const Fu={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};function Uu(t,e,n){const r=this;let i=!1,o=0,a=0,s=void 0;const c=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){a++,!1===i&&void 0!==r.onStart&&r.onStart(t,o,a),i=!0},this.itemEnd=function(t){o++,void 0!==r.onProgress&&r.onProgress(t,o,a),o===a&&(i=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(t){void 0!==r.onError&&r.onError(t)},this.resolveURL=function(t){return s?s(t):t},this.setURLModifier=function(t){return s=t,this},this.addHandler=function(t,e){return c.push(t,e),this},this.removeHandler=function(t){const e=c.indexOf(t);return-1!==e&&c.splice(e,2),this},this.getHandler=function(t){for(let e=0,n=c.length;e<n;e+=2){const n=c[e],r=c[e+1];if(n.global&&(n.lastIndex=0),n.test(t))return r}return null}}const zu=new Uu;function Gu(t){this.manager=void 0!==t?t:zu,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}Object.assign(Gu.prototype,{load:function(){},loadAsync:function(t,e){const n=this;return new Promise((function(r,i){n.load(t,r,e,i)}))},parse:function(){},setCrossOrigin:function(t){return this.crossOrigin=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setPath:function(t){return this.path=t,this},setResourcePath:function(t){return this.resourcePath=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}});const Hu={};function ku(t){Gu.call(this,t)}function Vu(t){Gu.call(this,t)}function ju(t){Gu.call(this,t)}function Wu(t){Gu.call(this,t)}function Xu(t){Gu.call(this,t)}function qu(t){Gu.call(this,t)}function Yu(t){Gu.call(this,t)}function Zu(){this.type="Curve",this.arcLengthDivisions=200}function Ju(t,e,n,r,i,o,a,s){Zu.call(this),this.type="EllipseCurve",this.aX=t||0,this.aY=e||0,this.xRadius=n||1,this.yRadius=r||1,this.aStartAngle=i||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=a||!1,this.aRotation=s||0}function Ku(t,e,n,r,i,o){Ju.call(this,t,e,n,n,r,i,o),this.type="ArcCurve"}function Qu(){let t=0,e=0,n=0,r=0;function i(i,o,a,s){t=i,e=a,n=-3*i+3*o-2*a-s,r=2*i-2*o+a+s}return{initCatmullRom:function(t,e,n,r,o){i(e,n,o*(n-t),o*(r-e))},initNonuniformCatmullRom:function(t,e,n,r,o,a,s){let c=(e-t)/o-(n-t)/(o+a)+(n-e)/a,l=(n-e)/a-(r-e)/(a+s)+(r-n)/s;c*=a,l*=a,i(e,n,c,l)},calc:function(i){const o=i*i;return t+e*i+n*o+r*(o*i)}}}ku.prototype=Object.assign(Object.create(Gu.prototype),{constructor:ku,load:function(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const i=this,o=Fu.get(t);if(void 0!==o)return i.manager.itemStart(t),setTimeout((function(){e&&e(o),i.manager.itemEnd(t)}),0),o;if(void 0!==Hu[t])return void Hu[t].push({onLoad:e,onProgress:n,onError:r});const a=t.match(/^data:(.*?)(;base64)?,(.*)$/);let s;if(a){const n=a[1],o=!!a[2];let s=a[3];s=decodeURIComponent(s),o&&(s=atob(s));try{let r;const o=(this.responseType||"").toLowerCase();switch(o){case"arraybuffer":case"blob":const t=new Uint8Array(s.length);for(let e=0;e<s.length;e++)t[e]=s.charCodeAt(e);r="blob"===o?new Blob([t.buffer],{type:n}):t.buffer;break;case"document":const e=new DOMParser;r=e.parseFromString(s,n);break;case"json":r=JSON.parse(s);break;default:r=s}setTimeout((function(){e&&e(r),i.manager.itemEnd(t)}),0)}catch(e){setTimeout((function(){r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)}),0)}}else{Hu[t]=[],Hu[t].push({onLoad:e,onProgress:n,onError:r}),s=new XMLHttpRequest,s.open("GET",t,!0),s.addEventListener("load",(function(e){const n=this.response,r=Hu[t];if(delete Hu[t],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Fu.add(t,n);for(let t=0,e=r.length;t<e;t++){const e=r[t];e.onLoad&&e.onLoad(n)}i.manager.itemEnd(t)}else{for(let t=0,n=r.length;t<n;t++){const n=r[t];n.onError&&n.onError(e)}i.manager.itemError(t),i.manager.itemEnd(t)}}),!1),s.addEventListener("progress",(function(e){const n=Hu[t];for(let t=0,r=n.length;t<r;t++){const r=n[t];r.onProgress&&r.onProgress(e)}}),!1),s.addEventListener("error",(function(e){const n=Hu[t];delete Hu[t];for(let t=0,r=n.length;t<r;t++){const r=n[t];r.onError&&r.onError(e)}i.manager.itemError(t),i.manager.itemEnd(t)}),!1),s.addEventListener("abort",(function(e){const n=Hu[t];delete Hu[t];for(let t=0,r=n.length;t<r;t++){const r=n[t];r.onError&&r.onError(e)}i.manager.itemError(t),i.manager.itemEnd(t)}),!1),void 0!==this.responseType&&(s.responseType=this.responseType),void 0!==this.withCredentials&&(s.withCredentials=this.withCredentials),s.overrideMimeType&&s.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(const t in this.requestHeader)s.setRequestHeader(t,this.requestHeader[t]);s.send(null)}return i.manager.itemStart(t),s},setResponseType:function(t){return this.responseType=t,this},setMimeType:function(t){return this.mimeType=t,this}}),Vu.prototype=Object.assign(Object.create(Gu.prototype),{constructor:Vu,load:function(t,e,n,r){const i=this,o=new ku(i.manager);o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(t,(function(n){try{e(i.parse(JSON.parse(n)))}catch(e){r?r(e):console.error(e),i.manager.itemError(t)}}),n,r)},parse:function(t){const e=[];for(let n=0;n<t.length;n++){const r=Du.parse(t[n]);e.push(r)}return e}}),ju.prototype=Object.assign(Object.create(Gu.prototype),{constructor:ju,load:function(t,e,n,r){const i=this,o=[],a=new Fc;a.image=o;const s=new ku(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(i.withCredentials);let c=0;function l(l){s.load(t[l],(function(t){const n=i.parse(t,!0);o[l]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},c+=1,6===c&&(1===n.mipmapCount&&(a.minFilter=xt),a.format=n.format,a.needsUpdate=!0,e&&e(a))}),n,r)}if(Array.isArray(t))for(let e=0,n=t.length;e<n;++e)l(e);else s.load(t,(function(t){const n=i.parse(t,!0);if(n.isCubemap){const t=n.mipmaps.length/n.mipmapCount;for(let e=0;e<t;e++){o[e]={mipmaps:[]};for(let t=0;t<n.mipmapCount;t++)o[e].mipmaps.push(n.mipmaps[e*n.mipmapCount+t]),o[e].format=n.format,o[e].width=n.width,o[e].height=n.height}}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=xt),a.format=n.format,a.needsUpdate=!0,e&&e(a)}),n,r);return a}}),Wu.prototype=Object.assign(Object.create(Gu.prototype),{constructor:Wu,load:function(t,e,n,r){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const i=this,o=Fu.get(t);if(void 0!==o)return i.manager.itemStart(t),setTimeout((function(){e&&e(o),i.manager.itemEnd(t)}),0),o;const a=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){a.removeEventListener("load",s,!1),a.removeEventListener("error",c,!1),Fu.add(t,this),e&&e(this),i.manager.itemEnd(t)}function c(e){a.removeEventListener("load",s,!1),a.removeEventListener("error",c,!1),r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)}return a.addEventListener("load",s,!1),a.addEventListener("error",c,!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(t),a.src=t,a}}),Xu.prototype=Object.assign(Object.create(Gu.prototype),{constructor:Xu,load:function(t,e,n,r){const i=new Mo,o=new Wu(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function s(n){o.load(t[n],(function(t){i.images[n]=t,a++,6===a&&(i.needsUpdate=!0,e&&e(i))}),void 0,r)}for(let e=0;e<t.length;++e)s(e);return i}}),qu.prototype=Object.assign(Object.create(Gu.prototype),{constructor:qu,load:function(t,e,n,r){const i=this,o=new To,a=new ku(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(i.withCredentials),a.load(t,(function(t){const n=i.parse(t);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:dt,o.wrapT=void 0!==n.wrapT?n.wrapT:dt,o.magFilter=void 0!==n.magFilter?n.magFilter:xt,o.minFilter=void 0!==n.minFilter?n.minFilter:xt,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps,o.minFilter=_t),1===n.mipmapCount&&(o.minFilter=xt),o.needsUpdate=!0,e&&e(o,n))}),n,r),o}}),Yu.prototype=Object.assign(Object.create(Gu.prototype),{constructor:Yu,load:function(t,e,n,r){const i=new Wn,o=new Wu(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,(function(n){i.image=n;const r=t.search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/);i.format=r?Ft:Ut,i.needsUpdate=!0,void 0!==e&&e(i)}),n,r),i}}),Object.assign(Zu.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(t,e){const n=this.getUtoTmapping(t);return this.getPoint(n,e)},getPoints:function(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return e},getSpacedPoints:function(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e},getLength:function(){const t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let n,r=this.getPoint(0),i=0;e.push(0);for(let o=1;o<=t;o++)n=this.getPoint(o/t),i+=n.distanceTo(r),e.push(i),r=n;return this.cacheArcLengths=e,e},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){const n=this.getLengths();let r=0;const i=n.length;let o;o=e||t*n[i-1];let a,s=0,c=i-1;for(;s<=c;)if(r=Math.floor(s+(c-s)/2),a=n[r]-o,a<0)s=r+1;else{if(!(a>0)){c=r;break}c=r-1}if(r=c,n[r]===o)return r/(i-1);const l=n[r];return(r+(o-l)/(n[r+1]-l))/(i-1)},getTangent:function(t,e){let n=t-1e-4,r=t+1e-4;n<0&&(n=0),r>1&&(r=1);const i=this.getPoint(n),o=this.getPoint(r),a=e||(i.isVector2?new Gn:new Kn);return a.copy(o).sub(i).normalize(),a},getTangentAt:function(t,e){const n=this.getUtoTmapping(t);return this.getTangent(n,e)},computeFrenetFrames:function(t,e){const n=new Kn,r=[],i=[],o=[],a=new Kn,s=new Tr;for(let e=0;e<=t;e++){const n=e/t;r[e]=this.getTangentAt(n,new Kn),r[e].normalize()}i[0]=new Kn,o[0]=new Kn;let c=Number.MAX_VALUE;const l=Math.abs(r[0].x),u=Math.abs(r[0].y),h=Math.abs(r[0].z);l<=c&&(c=l,n.set(1,0,0)),u<=c&&(c=u,n.set(0,1,0)),h<=c&&n.set(0,0,1),a.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],a),o[0].crossVectors(r[0],i[0]);for(let e=1;e<=t;e++){if(i[e]=i[e-1].clone(),o[e]=o[e-1].clone(),a.crossVectors(r[e-1],r[e]),a.length()>Number.EPSILON){a.normalize();const t=Math.acos(zn.clamp(r[e-1].dot(r[e]),-1,1));i[e].applyMatrix4(s.makeRotationAxis(a,t))}o[e].crossVectors(r[e],i[e])}if(!0===e){let e=Math.acos(zn.clamp(i[0].dot(i[t]),-1,1));e/=t,r[0].dot(a.crossVectors(i[0],i[t]))>0&&(e=-e);for(let n=1;n<=t;n++)i[n].applyMatrix4(s.makeRotationAxis(r[n],e*n)),o[n].crossVectors(r[n],i[n])}return{tangents:r,normals:i,binormals:o}},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this},toJSON:function(){const t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t},fromJSON:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}),Ju.prototype=Object.create(Zu.prototype),Ju.prototype.constructor=Ju,Ju.prototype.isEllipseCurve=!0,Ju.prototype.getPoint=function(t,e){const n=e||new Gn,r=2*Math.PI;let i=this.aEndAngle-this.aStartAngle;const o=Math.abs(i)<Number.EPSILON;for(;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=o?0:r),!0!==this.aClockwise||o||(i===r?i=-r:i-=r);const a=this.aStartAngle+t*i;let s=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const t=Math.cos(this.aRotation),e=Math.sin(this.aRotation),n=s-this.aX,r=c-this.aY;s=n*t-r*e+this.aX,c=n*e+r*t+this.aY}return n.set(s,c)},Ju.prototype.copy=function(t){return Zu.prototype.copy.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},Ju.prototype.toJSON=function(){const t=Zu.prototype.toJSON.call(this);return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t},Ju.prototype.fromJSON=function(t){return Zu.prototype.fromJSON.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},Ku.prototype=Object.create(Ju.prototype),Ku.prototype.constructor=Ku,Ku.prototype.isArcCurve=!0;const $u=new Kn,th=new Qu,eh=new Qu,nh=new Qu;function rh(t=[],e=!1,n="centripetal",r=.5){Zu.call(this),this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=n,this.tension=r}function ih(t,e,n,r,i){const o=.5*(r-e),a=.5*(i-n),s=t*t;return(2*n-2*r+o+a)*(t*s)+(-3*n+3*r-2*o-a)*s+o*t+n}function oh(t,e,n,r){return function(t,e){const n=1-t;return n*n*e}(t,e)+function(t,e){return 2*(1-t)*t*e}(t,n)+function(t,e){return t*t*e}(t,r)}function ah(t,e,n,r,i){return function(t,e){const n=1-t;return n*n*n*e}(t,e)+function(t,e){const n=1-t;return 3*n*n*t*e}(t,n)+function(t,e){return 3*(1-t)*t*t*e}(t,r)+function(t,e){return t*t*t*e}(t,i)}function sh(t=new Gn,e=new Gn,n=new Gn,r=new Gn){Zu.call(this),this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=n,this.v3=r}function ch(t=new Kn,e=new Kn,n=new Kn,r=new Kn){Zu.call(this),this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=n,this.v3=r}function lh(t=new Gn,e=new Gn){Zu.call(this),this.type="LineCurve",this.v1=t,this.v2=e}function uh(t=new Kn,e=new Kn){Zu.call(this),this.type="LineCurve3",this.v1=t,this.v2=e}function hh(t=new Gn,e=new Gn,n=new Gn){Zu.call(this),this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=n}function dh(t=new Kn,e=new Kn,n=new Kn){Zu.call(this),this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=n}function ph(t=[]){Zu.call(this),this.type="SplineCurve",this.points=t}rh.prototype=Object.create(Zu.prototype),rh.prototype.constructor=rh,rh.prototype.isCatmullRomCurve3=!0,rh.prototype.getPoint=function(t,e=new Kn){const n=e,r=this.points,i=r.length,o=(i-(this.closed?0:1))*t;let a,s,c=Math.floor(o),l=o-c;this.closed?c+=c>0?0:(Math.floor(Math.abs(c)/i)+1)*i:0===l&&c===i-1&&(c=i-2,l=1),this.closed||c>0?a=r[(c-1)%i]:($u.subVectors(r[0],r[1]).add(r[0]),a=$u);const u=r[c%i],h=r[(c+1)%i];if(this.closed||c+2<i?s=r[(c+2)%i]:($u.subVectors(r[i-1],r[i-2]).add(r[i-1]),s=$u),"centripetal"===this.curveType||"chordal"===this.curveType){const t="chordal"===this.curveType?.5:.25;let e=Math.pow(a.distanceToSquared(u),t),n=Math.pow(u.distanceToSquared(h),t),r=Math.pow(h.distanceToSquared(s),t);n<1e-4&&(n=1),e<1e-4&&(e=n),r<1e-4&&(r=n),th.initNonuniformCatmullRom(a.x,u.x,h.x,s.x,e,n,r),eh.initNonuniformCatmullRom(a.y,u.y,h.y,s.y,e,n,r),nh.initNonuniformCatmullRom(a.z,u.z,h.z,s.z,e,n,r)}else"catmullrom"===this.curveType&&(th.initCatmullRom(a.x,u.x,h.x,s.x,this.tension),eh.initCatmullRom(a.y,u.y,h.y,s.y,this.tension),nh.initCatmullRom(a.z,u.z,h.z,s.z,this.tension));return n.set(th.calc(l),eh.calc(l),nh.calc(l)),n},rh.prototype.copy=function(t){Zu.prototype.copy.call(this,t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push(n.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},rh.prototype.toJSON=function(){const t=Zu.prototype.toJSON.call(this);t.points=[];for(let e=0,n=this.points.length;e<n;e++){const n=this.points[e];t.points.push(n.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t},rh.prototype.fromJSON=function(t){Zu.prototype.fromJSON.call(this,t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push((new Kn).fromArray(n))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},sh.prototype=Object.create(Zu.prototype),sh.prototype.constructor=sh,sh.prototype.isCubicBezierCurve=!0,sh.prototype.getPoint=function(t,e=new Gn){const n=e,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(ah(t,r.x,i.x,o.x,a.x),ah(t,r.y,i.y,o.y,a.y)),n},sh.prototype.copy=function(t){return Zu.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},sh.prototype.toJSON=function(){const t=Zu.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},sh.prototype.fromJSON=function(t){return Zu.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},ch.prototype=Object.create(Zu.prototype),ch.prototype.constructor=ch,ch.prototype.isCubicBezierCurve3=!0,ch.prototype.getPoint=function(t,e=new Kn){const n=e,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(ah(t,r.x,i.x,o.x,a.x),ah(t,r.y,i.y,o.y,a.y),ah(t,r.z,i.z,o.z,a.z)),n},ch.prototype.copy=function(t){return Zu.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},ch.prototype.toJSON=function(){const t=Zu.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},ch.prototype.fromJSON=function(t){return Zu.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},lh.prototype=Object.create(Zu.prototype),lh.prototype.constructor=lh,lh.prototype.isLineCurve=!0,lh.prototype.getPoint=function(t,e=new Gn){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n},lh.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},lh.prototype.getTangent=function(t,e){const n=e||new Gn;return n.copy(this.v2).sub(this.v1).normalize(),n},lh.prototype.copy=function(t){return Zu.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},lh.prototype.toJSON=function(){const t=Zu.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},lh.prototype.fromJSON=function(t){return Zu.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},uh.prototype=Object.create(Zu.prototype),uh.prototype.constructor=uh,uh.prototype.isLineCurve3=!0,uh.prototype.getPoint=function(t,e=new Kn){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n},uh.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},uh.prototype.copy=function(t){return Zu.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},uh.prototype.toJSON=function(){const t=Zu.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},uh.prototype.fromJSON=function(t){return Zu.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},hh.prototype=Object.create(Zu.prototype),hh.prototype.constructor=hh,hh.prototype.isQuadraticBezierCurve=!0,hh.prototype.getPoint=function(t,e=new Gn){const n=e,r=this.v0,i=this.v1,o=this.v2;return n.set(oh(t,r.x,i.x,o.x),oh(t,r.y,i.y,o.y)),n},hh.prototype.copy=function(t){return Zu.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},hh.prototype.toJSON=function(){const t=Zu.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},hh.prototype.fromJSON=function(t){return Zu.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},dh.prototype=Object.create(Zu.prototype),dh.prototype.constructor=dh,dh.prototype.isQuadraticBezierCurve3=!0,dh.prototype.getPoint=function(t,e=new Kn){const n=e,r=this.v0,i=this.v1,o=this.v2;return n.set(oh(t,r.x,i.x,o.x),oh(t,r.y,i.y,o.y),oh(t,r.z,i.z,o.z)),n},dh.prototype.copy=function(t){return Zu.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},dh.prototype.toJSON=function(){const t=Zu.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},dh.prototype.fromJSON=function(t){return Zu.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},ph.prototype=Object.create(Zu.prototype),ph.prototype.constructor=ph,ph.prototype.isSplineCurve=!0,ph.prototype.getPoint=function(t,e=new Gn){const n=e,r=this.points,i=(r.length-1)*t,o=Math.floor(i),a=i-o,s=r[0===o?o:o-1],c=r[o],l=r[o>r.length-2?r.length-1:o+1],u=r[o>r.length-3?r.length-1:o+2];return n.set(ih(a,s.x,c.x,l.x,u.x),ih(a,s.y,c.y,l.y,u.y)),n},ph.prototype.copy=function(t){Zu.prototype.copy.call(this,t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push(n.clone())}return this},ph.prototype.toJSON=function(){const t=Zu.prototype.toJSON.call(this);t.points=[];for(let e=0,n=this.points.length;e<n;e++){const n=this.points[e];t.points.push(n.toArray())}return t},ph.prototype.fromJSON=function(t){Zu.prototype.fromJSON.call(this,t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push((new Gn).fromArray(n))}return this};var fh=Object.freeze({__proto__:null,ArcCurve:Ku,CatmullRomCurve3:rh,CubicBezierCurve:sh,CubicBezierCurve3:ch,EllipseCurve:Ju,LineCurve:lh,LineCurve3:uh,QuadraticBezierCurve:hh,QuadraticBezierCurve3:dh,SplineCurve:ph});function mh(){Zu.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function gh(t){mh.call(this),this.type="Path",this.currentPoint=new Gn,t&&this.setFromPoints(t)}function vh(t){gh.call(this,t),this.uuid=zn.generateUUID(),this.type="Shape",this.holes=[]}function yh(t,e=1){Jr.call(this),this.type="Light",this.color=new yi(t),this.intensity=e}function xh(t,e,n){yh.call(this,t,n),this.type="HemisphereLight",this.position.copy(Jr.DefaultUp),this.updateMatrix(),this.groundColor=new yi(e)}function bh(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new Gn(512,512),this.map=null,this.mapPass=null,this.matrix=new Tr,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Lo,this._frameExtents=new Gn(1,1),this._viewportCount=1,this._viewports=[new qn(0,0,1,1)]}function wh(){bh.call(this,new wo(50,1,.5,500)),this.focus=1}function _h(t,e,n,r,i,o){yh.call(this,t,e),this.type="SpotLight",this.position.copy(Jr.DefaultUp),this.updateMatrix(),this.target=new Jr,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==r?r:Math.PI/3,this.penumbra=void 0!==i?i:0,this.decay=void 0!==o?o:1,this.shadow=new wh}function Mh(){bh.call(this,new wo(90,1,.5,500)),this._frameExtents=new Gn(4,2),this._viewportCount=6,this._viewports=[new qn(2,1,1,1),new qn(0,1,1,1),new qn(3,1,1,1),new qn(1,1,1,1),new qn(3,0,1,1),new qn(1,0,1,1)],this._cubeDirections=[new Kn(1,0,0),new Kn(-1,0,0),new Kn(0,0,1),new Kn(0,0,-1),new Kn(0,1,0),new Kn(0,-1,0)],this._cubeUps=[new Kn(0,1,0),new Kn(0,1,0),new Kn(0,1,0),new Kn(0,1,0),new Kn(0,0,1),new Kn(0,0,-1)]}function Sh(t,e,n,r){yh.call(this,t,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==r?r:1,this.shadow=new Mh}function Th(t,e,n,r,i,o){bo.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==t?t:-1,this.right=void 0!==e?e:1,this.top=void 0!==n?n:1,this.bottom=void 0!==r?r:-1,this.near=void 0!==i?i:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function Eh(){bh.call(this,new Th(-5,5,5,-5,.5,500))}function Ah(t,e){yh.call(this,t,e),this.type="DirectionalLight",this.position.copy(Jr.DefaultUp),this.updateMatrix(),this.target=new Jr,this.shadow=new Eh}function Lh(t,e){yh.call(this,t,e),this.type="AmbientLight"}function Rh(t,e,n,r){yh.call(this,t,e),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==r?r:10}mh.prototype=Object.assign(Object.create(Zu.prototype),{constructor:mh,add:function(t){this.curves.push(t)},closePath:function(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new lh(e,t))},getPoint:function(t){const e=t*this.getLength(),n=this.getCurveLengths();let r=0;for(;r<n.length;){if(n[r]>=e){const t=n[r]-e,i=this.curves[r],o=i.getLength(),a=0===o?0:1-t/o;return i.getPointAt(a)}r++}return null},getLength:function(){const t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let n=0,r=this.curves.length;n<r;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t},getSpacedPoints:function(t=40){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t=12){const e=[];let n;for(let r=0,i=this.curves;r<i.length;r++){const o=i[r],a=o&&o.isEllipseCurve?2*t:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?t*o.points.length:t,s=o.getPoints(a);for(let t=0;t<s.length;t++){const r=s[t];n&&n.equals(r)||(e.push(r),n=r)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e},copy:function(t){Zu.prototype.copy.call(this,t),this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const n=t.curves[e];this.curves.push(n.clone())}return this.autoClose=t.autoClose,this},toJSON:function(){const t=Zu.prototype.toJSON.call(this);t.autoClose=this.autoClose,t.curves=[];for(let e=0,n=this.curves.length;e<n;e++){const n=this.curves[e];t.curves.push(n.toJSON())}return t},fromJSON:function(t){Zu.prototype.fromJSON.call(this,t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const n=t.curves[e];this.curves.push((new fh[n.type]).fromJSON(n))}return this}}),gh.prototype=Object.assign(Object.create(mh.prototype),{constructor:gh,setFromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(let e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this},moveTo:function(t,e){return this.currentPoint.set(t,e),this},lineTo:function(t,e){const n=new lh(this.currentPoint.clone(),new Gn(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this},quadraticCurveTo:function(t,e,n,r){const i=new hh(this.currentPoint.clone(),new Gn(t,e),new Gn(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this},bezierCurveTo:function(t,e,n,r,i,o){const a=new sh(this.currentPoint.clone(),new Gn(t,e),new Gn(n,r),new Gn(i,o));return this.curves.push(a),this.currentPoint.set(i,o),this},splineThru:function(t){const e=new ph([this.currentPoint.clone()].concat(t));return this.curves.push(e),this.currentPoint.copy(t[t.length-1]),this},arc:function(t,e,n,r,i,o){const a=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(t+a,e+s,n,r,i,o),this},absarc:function(t,e,n,r,i,o){return this.absellipse(t,e,n,n,r,i,o),this},ellipse:function(t,e,n,r,i,o,a,s){const c=this.currentPoint.x,l=this.currentPoint.y;return this.absellipse(t+c,e+l,n,r,i,o,a,s),this},absellipse:function(t,e,n,r,i,o,a,s){const c=new Ju(t,e,n,r,i,o,a,s);if(this.curves.length>0){const t=c.getPoint(0);t.equals(this.currentPoint)||this.lineTo(t.x,t.y)}this.curves.push(c);const l=c.getPoint(1);return this.currentPoint.copy(l),this},copy:function(t){return mh.prototype.copy.call(this,t),this.currentPoint.copy(t.currentPoint),this},toJSON:function(){const t=mh.prototype.toJSON.call(this);return t.currentPoint=this.currentPoint.toArray(),t},fromJSON:function(t){return mh.prototype.fromJSON.call(this,t),this.currentPoint.fromArray(t.currentPoint),this}}),vh.prototype=Object.assign(Object.create(gh.prototype),{constructor:vh,getPointsHoles:function(t){const e=[];for(let n=0,r=this.holes.length;n<r;n++)e[n]=this.holes[n].getPoints(t);return e},extractPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},copy:function(t){gh.prototype.copy.call(this,t),this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const n=t.holes[e];this.holes.push(n.clone())}return this},toJSON:function(){const t=gh.prototype.toJSON.call(this);t.uuid=this.uuid,t.holes=[];for(let e=0,n=this.holes.length;e<n;e++){const n=this.holes[e];t.holes.push(n.toJSON())}return t},fromJSON:function(t){gh.prototype.fromJSON.call(this,t),this.uuid=t.uuid,this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const n=t.holes[e];this.holes.push((new gh).fromJSON(n))}return this}}),yh.prototype=Object.assign(Object.create(Jr.prototype),{constructor:yh,isLight:!0,copy:function(t){return Jr.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){const e=Jr.prototype.toJSON.call(this,t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}),xh.prototype=Object.assign(Object.create(yh.prototype),{constructor:xh,isHemisphereLight:!0,copy:function(t){return yh.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}),Object.assign(bh.prototype,{_projScreenMatrix:new Tr,_lightPositionWorld:new Kn,_lookTarget:new Kn,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(t){const e=this.camera,n=this.matrix,r=this._projScreenMatrix,i=this._lookTarget,o=this._lightPositionWorld;o.setFromMatrixPosition(t.matrixWorld),e.position.copy(o),i.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(i),e.updateMatrixWorld(),r.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(r),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(e.projectionMatrix),n.multiply(e.matrixWorldInverse)},getViewport:function(t){return this._viewports[t]},getFrameExtents:function(){return this._frameExtents},copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){const t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}),wh.prototype=Object.assign(Object.create(bh.prototype),{constructor:wh,isSpotLightShadow:!0,updateMatrices:function(t){const e=this.camera,n=2*zn.RAD2DEG*t.angle*this.focus,r=this.mapSize.width/this.mapSize.height,i=t.distance||e.far;n===e.fov&&r===e.aspect&&i===e.far||(e.fov=n,e.aspect=r,e.far=i,e.updateProjectionMatrix()),bh.prototype.updateMatrices.call(this,t)}}),_h.prototype=Object.assign(Object.create(yh.prototype),{constructor:_h,isSpotLight:!0,copy:function(t){return yh.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),Mh.prototype=Object.assign(Object.create(bh.prototype),{constructor:Mh,isPointLightShadow:!0,updateMatrices:function(t,e=0){const n=this.camera,r=this.matrix,i=this._lightPositionWorld,o=this._lookTarget,a=this._projScreenMatrix;i.setFromMatrixPosition(t.matrixWorld),n.position.copy(i),o.copy(n.position),o.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(o),n.updateMatrixWorld(),r.makeTranslation(-i.x,-i.y,-i.z),a.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(a)}}),Sh.prototype=Object.assign(Object.create(yh.prototype),{constructor:Sh,isPointLight:!0,copy:function(t){return yh.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}),Th.prototype=Object.assign(Object.create(bo.prototype),{constructor:Th,isOrthographicCamera:!0,copy:function(t,e){return bo.prototype.copy.call(this,t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,e,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=n-t,o=n+t,a=r+e,s=r-e;if(null!==this.view&&this.view.enabled){const t=(this.right-this.left)/this.view.fullWidth/this.zoom,e=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=t*this.view.offsetX,o=i+t*this.view.width,a-=e*this.view.offsetY,s=a-e*this.view.height}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()},toJSON:function(t){const e=Jr.prototype.toJSON.call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}),Eh.prototype=Object.assign(Object.create(bh.prototype),{constructor:Eh,isDirectionalLightShadow:!0,updateMatrices:function(t){bh.prototype.updateMatrices.call(this,t)}}),Ah.prototype=Object.assign(Object.create(yh.prototype),{constructor:Ah,isDirectionalLight:!0,copy:function(t){return yh.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),Lh.prototype=Object.assign(Object.create(yh.prototype),{constructor:Lh,isAmbientLight:!0}),Rh.prototype=Object.assign(Object.create(yh.prototype),{constructor:Rh,isRectAreaLight:!0,copy:function(t){return yh.prototype.copy.call(this,t),this.width=t.width,this.height=t.height,this},toJSON:function(t){const e=yh.prototype.toJSON.call(this,t);return e.object.width=this.width,e.object.height=this.height,e}});class Ph{constructor(){Object.defineProperty(this,"isSphericalHarmonics3",{value:!0}),this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new Kn)}set(t){for(let e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,e){const n=t.x,r=t.y,i=t.z,o=this.coefficients;return e.copy(o[0]).multiplyScalar(.282095),e.addScaledVector(o[1],.488603*r),e.addScaledVector(o[2],.488603*i),e.addScaledVector(o[3],.488603*n),e.addScaledVector(o[4],n*r*1.092548),e.addScaledVector(o[5],r*i*1.092548),e.addScaledVector(o[6],.315392*(3*i*i-1)),e.addScaledVector(o[7],n*i*1.092548),e.addScaledVector(o[8],.546274*(n*n-r*r)),e}getIrradianceAt(t,e){const n=t.x,r=t.y,i=t.z,o=this.coefficients;return e.copy(o[0]).multiplyScalar(.886227),e.addScaledVector(o[1],1.023328*r),e.addScaledVector(o[2],1.023328*i),e.addScaledVector(o[3],1.023328*n),e.addScaledVector(o[4],.858086*n*r),e.addScaledVector(o[5],.858086*r*i),e.addScaledVector(o[6],.743125*i*i-.247708),e.addScaledVector(o[7],.858086*n*i),e.addScaledVector(o[8],.429043*(n*n-r*r)),e}add(t){for(let e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this}addScaledSH(t,e){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(t.coefficients[n],e);return this}scale(t){for(let e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this}lerp(t,e){for(let n=0;n<9;n++)this.coefficients[n].lerp(t.coefficients[n],e);return this}equals(t){for(let e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(t,e=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(t,e+3*r);return this}toArray(t=[],e=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(t,e+3*r);return t}static getBasisAt(t,e){const n=t.x,r=t.y,i=t.z;e[0]=.282095,e[1]=.488603*r,e[2]=.488603*i,e[3]=.488603*n,e[4]=1.092548*n*r,e[5]=1.092548*r*i,e[6]=.315392*(3*i*i-1),e[7]=1.092548*n*i,e[8]=.546274*(n*n-r*r)}}function Ch(t,e){yh.call(this,void 0,e),this.type="LightProbe",this.sh=void 0!==t?t:new Ph}function Ih(t){Gu.call(this,t),this.textures={}}Ch.prototype=Object.assign(Object.create(yh.prototype),{constructor:Ch,isLightProbe:!0,copy:function(t){return yh.prototype.copy.call(this,t),this.sh.copy(t.sh),this},fromJSON:function(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this},toJSON:function(t){const e=yh.prototype.toJSON.call(this,t);return e.object.sh=this.sh.toArray(),e}}),Ih.prototype=Object.assign(Object.create(Gu.prototype),{constructor:Ih,load:function(t,e,n,r){const i=this,o=new ku(i.manager);o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(t,(function(n){try{e(i.parse(JSON.parse(n)))}catch(e){r?r(e):console.error(e),i.manager.itemError(t)}}),n,r)},parse:function(t){const e=this.textures;function n(t){return void 0===e[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),e[t]}const r=new wu[t.type];if(void 0!==t.uuid&&(r.uuid=t.uuid),void 0!==t.name&&(r.name=t.name),void 0!==t.color&&void 0!==r.color&&r.color.setHex(t.color),void 0!==t.roughness&&(r.roughness=t.roughness),void 0!==t.metalness&&(r.metalness=t.metalness),void 0!==t.sheen&&(r.sheen=(new yi).setHex(t.sheen)),void 0!==t.emissive&&void 0!==r.emissive&&r.emissive.setHex(t.emissive),void 0!==t.specular&&void 0!==r.specular&&r.specular.setHex(t.specular),void 0!==t.shininess&&(r.shininess=t.shininess),void 0!==t.clearcoat&&(r.clearcoat=t.clearcoat),void 0!==t.clearcoatRoughness&&(r.clearcoatRoughness=t.clearcoatRoughness),void 0!==t.fog&&(r.fog=t.fog),void 0!==t.flatShading&&(r.flatShading=t.flatShading),void 0!==t.blending&&(r.blending=t.blending),void 0!==t.combine&&(r.combine=t.combine),void 0!==t.side&&(r.side=t.side),void 0!==t.opacity&&(r.opacity=t.opacity),void 0!==t.transparent&&(r.transparent=t.transparent),void 0!==t.alphaTest&&(r.alphaTest=t.alphaTest),void 0!==t.depthTest&&(r.depthTest=t.depthTest),void 0!==t.depthWrite&&(r.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(r.colorWrite=t.colorWrite),void 0!==t.stencilWrite&&(r.stencilWrite=t.stencilWrite),void 0!==t.stencilWriteMask&&(r.stencilWriteMask=t.stencilWriteMask),void 0!==t.stencilFunc&&(r.stencilFunc=t.stencilFunc),void 0!==t.stencilRef&&(r.stencilRef=t.stencilRef),void 0!==t.stencilFuncMask&&(r.stencilFuncMask=t.stencilFuncMask),void 0!==t.stencilFail&&(r.stencilFail=t.stencilFail),void 0!==t.stencilZFail&&(r.stencilZFail=t.stencilZFail),void 0!==t.stencilZPass&&(r.stencilZPass=t.stencilZPass),void 0!==t.wireframe&&(r.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(r.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(r.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(r.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(r.rotation=t.rotation),1!==t.linewidth&&(r.linewidth=t.linewidth),void 0!==t.dashSize&&(r.dashSize=t.dashSize),void 0!==t.gapSize&&(r.gapSize=t.gapSize),void 0!==t.scale&&(r.scale=t.scale),void 0!==t.polygonOffset&&(r.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(r.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(r.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.skinning&&(r.skinning=t.skinning),void 0!==t.morphTargets&&(r.morphTargets=t.morphTargets),void 0!==t.morphNormals&&(r.morphNormals=t.morphNormals),void 0!==t.dithering&&(r.dithering=t.dithering),void 0!==t.vertexTangents&&(r.vertexTangents=t.vertexTangents),void 0!==t.visible&&(r.visible=t.visible),void 0!==t.toneMapped&&(r.toneMapped=t.toneMapped),void 0!==t.userData&&(r.userData=t.userData),void 0!==t.vertexColors&&("number"==typeof t.vertexColors?r.vertexColors=t.vertexColors>0:r.vertexColors=t.vertexColors),void 0!==t.uniforms)for(const e in t.uniforms){const i=t.uniforms[e];switch(r.uniforms[e]={},i.type){case"t":r.uniforms[e].value=n(i.value);break;case"c":r.uniforms[e].value=(new yi).setHex(i.value);break;case"v2":r.uniforms[e].value=(new Gn).fromArray(i.value);break;case"v3":r.uniforms[e].value=(new Kn).fromArray(i.value);break;case"v4":r.uniforms[e].value=(new qn).fromArray(i.value);break;case"m3":r.uniforms[e].value=(new Hn).fromArray(i.value);break;case"m4":r.uniforms[e].value=(new Tr).fromArray(i.value);break;default:r.uniforms[e].value=i.value}}if(void 0!==t.defines&&(r.defines=t.defines),void 0!==t.vertexShader&&(r.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(r.fragmentShader=t.fragmentShader),void 0!==t.extensions)for(const e in t.extensions)r.extensions[e]=t.extensions[e];if(void 0!==t.shading&&(r.flatShading=1===t.shading),void 0!==t.size&&(r.size=t.size),void 0!==t.sizeAttenuation&&(r.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(r.map=n(t.map)),void 0!==t.matcap&&(r.matcap=n(t.matcap)),void 0!==t.alphaMap&&(r.alphaMap=n(t.alphaMap)),void 0!==t.bumpMap&&(r.bumpMap=n(t.bumpMap)),void 0!==t.bumpScale&&(r.bumpScale=t.bumpScale),void 0!==t.normalMap&&(r.normalMap=n(t.normalMap)),void 0!==t.normalMapType&&(r.normalMapType=t.normalMapType),void 0!==t.normalScale){let e=t.normalScale;!1===Array.isArray(e)&&(e=[e,e]),r.normalScale=(new Gn).fromArray(e)}return void 0!==t.displacementMap&&(r.displacementMap=n(t.displacementMap)),void 0!==t.displacementScale&&(r.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(r.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(r.roughnessMap=n(t.roughnessMap)),void 0!==t.metalnessMap&&(r.metalnessMap=n(t.metalnessMap)),void 0!==t.emissiveMap&&(r.emissiveMap=n(t.emissiveMap)),void 0!==t.emissiveIntensity&&(r.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(r.specularMap=n(t.specularMap)),void 0!==t.envMap&&(r.envMap=n(t.envMap)),void 0!==t.envMapIntensity&&(r.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(r.reflectivity=t.reflectivity),void 0!==t.refractionRatio&&(r.refractionRatio=t.refractionRatio),void 0!==t.lightMap&&(r.lightMap=n(t.lightMap)),void 0!==t.lightMapIntensity&&(r.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(r.aoMap=n(t.aoMap)),void 0!==t.aoMapIntensity&&(r.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(r.gradientMap=n(t.gradientMap)),void 0!==t.clearcoatMap&&(r.clearcoatMap=n(t.clearcoatMap)),void 0!==t.clearcoatRoughnessMap&&(r.clearcoatRoughnessMap=n(t.clearcoatRoughnessMap)),void 0!==t.clearcoatNormalMap&&(r.clearcoatNormalMap=n(t.clearcoatNormalMap)),void 0!==t.clearcoatNormalScale&&(r.clearcoatNormalScale=(new Gn).fromArray(t.clearcoatNormalScale)),void 0!==t.transmission&&(r.transmission=t.transmission),void 0!==t.transmissionMap&&(r.transmissionMap=n(t.transmissionMap)),r},setTextures:function(t){return this.textures=t,this}});const Oh={decodeText:function(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);let e="";for(let n=0,r=t.length;n<r;n++)e+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(e))}catch(t){return e}},extractUrlBase:function(t){const e=t.lastIndexOf("/");return-1===e?"./":t.substr(0,e+1)}};function Nh(){qi.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}function Dh(t,e,n,r){"number"==typeof n&&(r=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),Ti.call(this,t,e,n),this.meshPerAttribute=r||1}function Bh(t){Gu.call(this,t)}Nh.prototype=Object.assign(Object.create(qi.prototype),{constructor:Nh,isInstancedBufferGeometry:!0,copy:function(t){return qi.prototype.copy.call(this,t),this.instanceCount=t.instanceCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){const t=qi.prototype.toJSON.call(this);return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}),Dh.prototype=Object.assign(Object.create(Ti.prototype),{constructor:Dh,isInstancedBufferAttribute:!0,copy:function(t){return Ti.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},toJSON:function(){const t=Ti.prototype.toJSON.call(this);return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}),Bh.prototype=Object.assign(Object.create(Gu.prototype),{constructor:Bh,load:function(t,e,n,r){const i=this,o=new ku(i.manager);o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(t,(function(n){try{e(i.parse(JSON.parse(n)))}catch(e){r?r(e):console.error(e),i.manager.itemError(t)}}),n,r)},parse:function(t){const e={},n={};function r(t,r){if(void 0!==e[r])return e[r];const i=t.interleavedBuffers[r],o=function(t,e){if(void 0!==n[e])return n[e];const r=t.arrayBuffers[e],i=new Uint32Array(r).buffer;return n[e]=i,i}(t,i.buffer),a=new Gs(zi(i.type,o),i.stride);return a.uuid=i.uuid,e[r]=a,a}const i=t.isInstancedBufferGeometry?new Nh:new qi,o=t.data.index;if(void 0!==o){const t=zi(o.type,o.array);i.setIndex(new Ti(t,1))}const a=t.data.attributes;for(const e in a){const n=a[e];let o;if(n.isInterleavedBufferAttribute){o=new ks(r(t.data,n.data),n.itemSize,n.offset,n.normalized)}else{const t=zi(n.type,n.array);o=new(n.isInstancedBufferAttribute?Dh:Ti)(t,n.itemSize,n.normalized)}void 0!==n.name&&(o.name=n.name),i.setAttribute(e,o)}const s=t.data.morphAttributes;if(s)for(const e in s){const n=s[e],o=[];for(let e=0,i=n.length;e<i;e++){const i=n[e];let a;if(i.isInterleavedBufferAttribute){a=new ks(r(t.data,i.data),i.itemSize,i.offset,i.normalized)}else{a=new Ti(zi(i.type,i.array),i.itemSize,i.normalized)}void 0!==i.name&&(a.name=i.name),o.push(a)}i.morphAttributes[e]=o}t.data.morphTargetsRelative&&(i.morphTargetsRelative=!0);const c=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==c)for(let t=0,e=c.length;t!==e;++t){const e=c[t];i.addGroup(e.start,e.count,e.materialIndex)}const l=t.data.boundingSphere;if(void 0!==l){const t=new Kn;void 0!==l.center&&t.fromArray(l.center),i.boundingSphere=new gr(t,l.radius)}return t.name&&(i.name=t.name),t.userData&&(i.userData=t.userData),i}});class Fh extends Gu{constructor(t){super(t)}load(t,e,n,r){const i=this,o=""===this.path?Oh.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||o;const a=new ku(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,(function(n){let o=null;try{o=JSON.parse(n)}catch(e){return void 0!==r&&r(e),void console.error("THREE:ObjectLoader: Can't parse "+t+".",e.message)}const a=o.metadata;void 0!==a&&void 0!==a.type&&"geometry"!==a.type.toLowerCase()?i.parse(o,e):console.error("THREE.ObjectLoader: Can't load "+t)}),n,r)}parse(t,e){const n=this.parseAnimations(t.animations),r=this.parseShapes(t.shapes),i=this.parseGeometries(t.geometries,r),o=this.parseImages(t.images,(function(){void 0!==e&&e(c)})),a=this.parseTextures(t.textures,o),s=this.parseMaterials(t.materials,a),c=this.parseObject(t.object,i,s,n),l=this.parseSkeletons(t.skeletons,c);if(this.bindSkeletons(c,l),void 0!==e){let t=!1;for(const e in o)if(o[e]instanceof HTMLImageElement){t=!0;break}!1===t&&e(c)}return c}parseShapes(t){const e={};if(void 0!==t)for(let n=0,r=t.length;n<r;n++){const r=(new vh).fromJSON(t[n]);e[r.uuid]=r}return e}parseSkeletons(t,e){const n={},r={};if(e.traverse((function(t){t.isBone&&(r[t.uuid]=t)})),void 0!==t)for(let e=0,i=t.length;e<i;e++){const i=(new dc).fromJSON(t[e],r);n[i.uuid]=i}return n}parseGeometries(t,e){const n={};let r;if(void 0!==t){const i=new Bh;for(let o=0,a=t.length;o<a;o++){let a;const s=t[o];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":a=new uu[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":a=new uu[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":a=new uu[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":a=new uu[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":a=new uu[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":a=new uu[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":a=new uu[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":a=new uu[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":a=new uu[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":a=new uu[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"TubeGeometry":case"TubeBufferGeometry":a=new uu[s.type]((new fh[s.path.type]).fromJSON(s.path),s.tubularSegments,s.radius,s.radialSegments,s.closed);break;case"LatheGeometry":case"LatheBufferGeometry":a=new uu[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":a=new uu[s.type](s.vertices,s.indices,s.radius,s.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":r=[];for(let t=0,n=s.shapes.length;t<n;t++){const n=e[s.shapes[t]];r.push(n)}a=new uu[s.type](r,s.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":r=[];for(let t=0,n=s.shapes.length;t<n;t++){const n=e[s.shapes[t]];r.push(n)}const t=s.options.extrudePath;void 0!==t&&(s.options.extrudePath=(new fh[t.type]).fromJSON(t)),a=new uu[s.type](r,s.options);break;case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(s);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),!0===a.isBufferGeometry&&void 0!==s.userData&&(a.userData=s.userData),n[s.uuid]=a}}return n}parseMaterials(t,e){const n={},r={};if(void 0!==t){const i=new Ih;i.setTextures(e);for(let e=0,o=t.length;e<o;e++){const o=t[e];if("MultiMaterial"===o.type){const t=[];for(let e=0;e<o.materials.length;e++){const r=o.materials[e];void 0===n[r.uuid]&&(n[r.uuid]=i.parse(r)),t.push(n[r.uuid])}r[o.uuid]=t}else void 0===n[o.uuid]&&(n[o.uuid]=i.parse(o)),r[o.uuid]=n[o.uuid]}}return r}parseAnimations(t){const e={};if(void 0!==t)for(let n=0;n<t.length;n++){const r=t[n],i=Du.parse(r);e[i.uuid]=i}return e}parseImages(t,e){const n=this,r={};let i;function o(t){if("string"==typeof t){const e=t;return function(t){return n.manager.itemStart(t),i.load(t,(function(){n.manager.itemEnd(t)}),void 0,(function(){n.manager.itemError(t),n.manager.itemEnd(t)}))}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(e)?e:n.resourcePath+e)}return t.data?{data:zi(t.type,t.data),width:t.width,height:t.height}:null}if(void 0!==t&&t.length>0){const n=new Uu(e);i=new Wu(n),i.setCrossOrigin(this.crossOrigin);for(let e=0,n=t.length;e<n;e++){const n=t[e],i=n.url;if(Array.isArray(i)){r[n.uuid]=[];for(let t=0,e=i.length;t<e;t++){const e=o(i[t]);null!==e&&(e instanceof HTMLImageElement?r[n.uuid].push(e):r[n.uuid].push(new To(e.data,e.width,e.height)))}}else{const t=o(n.url);null!==t&&(r[n.uuid]=t)}}}return r}parseTextures(t,e){function n(t,e){return"number"==typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),e[t])}const r={};if(void 0!==t)for(let i=0,o=t.length;i<o;i++){const o=t[i];let a;void 0===o.image&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),void 0===e[o.image]&&console.warn("THREE.ObjectLoader: Undefined image",o.image);const s=e[o.image];Array.isArray(s)?(a=new Mo(s),6===s.length&&(a.needsUpdate=!0)):(a=s&&s.data?new To(s.data,s.width,s.height):new Wn(s),s&&(a.needsUpdate=!0)),a.uuid=o.uuid,void 0!==o.name&&(a.name=o.name),void 0!==o.mapping&&(a.mapping=n(o.mapping,Uh)),void 0!==o.offset&&a.offset.fromArray(o.offset),void 0!==o.repeat&&a.repeat.fromArray(o.repeat),void 0!==o.center&&a.center.fromArray(o.center),void 0!==o.rotation&&(a.rotation=o.rotation),void 0!==o.wrap&&(a.wrapS=n(o.wrap[0],zh),a.wrapT=n(o.wrap[1],zh)),void 0!==o.format&&(a.format=o.format),void 0!==o.type&&(a.type=o.type),void 0!==o.encoding&&(a.encoding=o.encoding),void 0!==o.minFilter&&(a.minFilter=n(o.minFilter,Gh)),void 0!==o.magFilter&&(a.magFilter=n(o.magFilter,Gh)),void 0!==o.anisotropy&&(a.anisotropy=o.anisotropy),void 0!==o.flipY&&(a.flipY=o.flipY),void 0!==o.premultiplyAlpha&&(a.premultiplyAlpha=o.premultiplyAlpha),void 0!==o.unpackAlignment&&(a.unpackAlignment=o.unpackAlignment),r[o.uuid]=a}return r}parseObject(t,e,n,r){let i,o,a;function s(t){return void 0===e[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),e[t]}function c(t){if(void 0!==t){if(Array.isArray(t)){const e=[];for(let r=0,i=t.length;r<i;r++){const i=t[r];void 0===n[i]&&console.warn("THREE.ObjectLoader: Undefined material",i),e.push(n[i])}return e}return void 0===n[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),n[t]}}switch(t.type){case"Scene":i=new zs,void 0!==t.background&&Number.isInteger(t.background)&&(i.background=new yi(t.background)),void 0!==t.fog&&("Fog"===t.fog.type?i.fog=new Us(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(i.fog=new Fs(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":i=new wo(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(i.focus=t.focus),void 0!==t.zoom&&(i.zoom=t.zoom),void 0!==t.filmGauge&&(i.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(i.filmOffset=t.filmOffset),void 0!==t.view&&(i.view=Object.assign({},t.view));break;case"OrthographicCamera":i=new Th(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(i.zoom=t.zoom),void 0!==t.view&&(i.view=Object.assign({},t.view));break;case"AmbientLight":i=new Lh(t.color,t.intensity);break;case"DirectionalLight":i=new Ah(t.color,t.intensity);break;case"PointLight":i=new Sh(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":i=new Rh(t.color,t.intensity,t.width,t.height);break;case"SpotLight":i=new _h(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":i=new xh(t.color,t.groundColor,t.intensity);break;case"LightProbe":i=(new Ch).fromJSON(t);break;case"SkinnedMesh":o=s(t.geometry),a=c(t.material),i=new cc(o,a),void 0!==t.bindMode&&(i.bindMode=t.bindMode),void 0!==t.bindMatrix&&i.bindMatrix.fromArray(t.bindMatrix),void 0!==t.skeleton&&(i.skeleton=t.skeleton);break;case"Mesh":o=s(t.geometry),a=c(t.material),i=new ho(o,a);break;case"InstancedMesh":o=s(t.geometry),a=c(t.material);const e=t.count,n=t.instanceMatrix;i=new vc(o,a,e),i.instanceMatrix=new Ti(new Float32Array(n.array),16);break;case"LOD":i=new sc;break;case"Line":i=new Sc(s(t.geometry),c(t.material),t.mode);break;case"LineLoop":i=new Lc(s(t.geometry),c(t.material));break;case"LineSegments":i=new Ac(s(t.geometry),c(t.material));break;case"PointCloud":case"Points":i=new Nc(s(t.geometry),c(t.material));break;case"Sprite":i=new rc(c(t.material));break;case"Group":i=new Cs;break;case"Bone":i=new lc;break;default:i=new Jr}if(i.uuid=t.uuid,void 0!==t.name&&(i.name=t.name),void 0!==t.matrix?(i.matrix.fromArray(t.matrix),void 0!==t.matrixAutoUpdate&&(i.matrixAutoUpdate=t.matrixAutoUpdate),i.matrixAutoUpdate&&i.matrix.decompose(i.position,i.quaternion,i.scale)):(void 0!==t.position&&i.position.fromArray(t.position),void 0!==t.rotation&&i.rotation.fromArray(t.rotation),void 0!==t.quaternion&&i.quaternion.fromArray(t.quaternion),void 0!==t.scale&&i.scale.fromArray(t.scale)),void 0!==t.castShadow&&(i.castShadow=t.castShadow),void 0!==t.receiveShadow&&(i.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(i.shadow.bias=t.shadow.bias),void 0!==t.shadow.normalBias&&(i.shadow.normalBias=t.shadow.normalBias),void 0!==t.shadow.radius&&(i.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&i.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(i.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(i.visible=t.visible),void 0!==t.frustumCulled&&(i.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(i.renderOrder=t.renderOrder),void 0!==t.userData&&(i.userData=t.userData),void 0!==t.layers&&(i.layers.mask=t.layers),void 0!==t.children){const o=t.children;for(let t=0;t<o.length;t++)i.add(this.parseObject(o[t],e,n,r))}if(void 0!==t.animations){const e=t.animations;for(let t=0;t<e.length;t++){const n=e[t];i.animations.push(r[n])}}if("LOD"===t.type){void 0!==t.autoUpdate&&(i.autoUpdate=t.autoUpdate);const e=t.levels;for(let t=0;t<e.length;t++){const n=e[t],r=i.getObjectByProperty("uuid",n.object);void 0!==r&&i.addLevel(r,n.distance)}}return i}bindSkeletons(t,e){0!==Object.keys(e).length&&t.traverse((function(t){if(!0===t.isSkinnedMesh&&void 0!==t.skeleton){const n=e[t.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",t.skeleton):t.bind(n,t.bindMatrix)}}))}setTexturePath(t){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(t)}}const Uh={UVMapping:it,CubeReflectionMapping:ot,CubeRefractionMapping:at,EquirectangularReflectionMapping:st,EquirectangularRefractionMapping:ct,CubeUVReflectionMapping:lt,CubeUVRefractionMapping:ut},zh={RepeatWrapping:ht,ClampToEdgeWrapping:dt,MirroredRepeatWrapping:pt},Gh={NearestFilter:ft,NearestMipmapNearestFilter:mt,NearestMipmapLinearFilter:vt,LinearFilter:xt,LinearMipmapNearestFilter:bt,LinearMipmapLinearFilter:_t};function Hh(t){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),Gu.call(this,t),this.options={premultiplyAlpha:"none"}}function kh(){this.type="ShapePath",this.color=new yi,this.subPaths=[],this.currentPath=null}function Vh(t){this.type="Font",this.data=t}function jh(t,e,n,r,i){const o=i.glyphs[t]||i.glyphs["?"];if(!o)return void console.error('THREE.Font: character "'+t+'" does not exists in font family '+i.familyName+".");const a=new kh;let s,c,l,u,h,d,p,f;if(o.o){const t=o._cachedOutline||(o._cachedOutline=o.o.split(" "));for(let i=0,o=t.length;i<o;){switch(t[i++]){case"m":s=t[i++]*e+n,c=t[i++]*e+r,a.moveTo(s,c);break;case"l":s=t[i++]*e+n,c=t[i++]*e+r,a.lineTo(s,c);break;case"q":l=t[i++]*e+n,u=t[i++]*e+r,h=t[i++]*e+n,d=t[i++]*e+r,a.quadraticCurveTo(h,d,l,u);break;case"b":l=t[i++]*e+n,u=t[i++]*e+r,h=t[i++]*e+n,d=t[i++]*e+r,p=t[i++]*e+n,f=t[i++]*e+r,a.bezierCurveTo(h,d,p,f,l,u)}}}return{offsetX:o.ha*e,path:a}}function Wh(t){Gu.call(this,t)}let Xh;Hh.prototype=Object.assign(Object.create(Gu.prototype),{constructor:Hh,isImageBitmapLoader:!0,setOptions:function(t){return this.options=t,this},load:function(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const i=this,o=Fu.get(t);if(void 0!==o)return i.manager.itemStart(t),setTimeout((function(){e&&e(o),i.manager.itemEnd(t)}),0),o;const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",fetch(t,a).then((function(t){return t.blob()})).then((function(t){return createImageBitmap(t,i.options)})).then((function(n){Fu.add(t,n),e&&e(n),i.manager.itemEnd(t)})).catch((function(e){r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)})),i.manager.itemStart(t)}}),Object.assign(kh.prototype,{moveTo:function(t,e){return this.currentPath=new gh,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this},lineTo:function(t,e){return this.currentPath.lineTo(t,e),this},quadraticCurveTo:function(t,e,n,r){return this.currentPath.quadraticCurveTo(t,e,n,r),this},bezierCurveTo:function(t,e,n,r,i,o){return this.currentPath.bezierCurveTo(t,e,n,r,i,o),this},splineThru:function(t){return this.currentPath.splineThru(t),this},toShapes:function(t,e){function n(t){const e=[];for(let n=0,r=t.length;n<r;n++){const r=t[n],i=new vh;i.curves=r.curves,e.push(i)}return e}function r(t,e){const n=e.length;let r=!1;for(let i=n-1,o=0;o<n;i=o++){let n=e[i],a=e[o],s=a.x-n.x,c=a.y-n.y;if(Math.abs(c)>Number.EPSILON){if(c<0&&(n=e[o],s=-s,a=e[i],c=-c),t.y<n.y||t.y>a.y)continue;if(t.y===n.y){if(t.x===n.x)return!0}else{const e=c*(t.x-n.x)-s*(t.y-n.y);if(0===e)return!0;if(e<0)continue;r=!r}}else{if(t.y!==n.y)continue;if(a.x<=t.x&&t.x<=n.x||n.x<=t.x&&t.x<=a.x)return!0}}return r}const i=Cl.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===e)return n(o);let a,s,c;const l=[];if(1===o.length)return s=o[0],c=new vh,c.curves=s.curves,l.push(c),l;let u=!i(o[0].getPoints());u=t?!u:u;const h=[],d=[];let p,f,m=[],g=0;d[g]=void 0,m[g]=[];for(let e=0,n=o.length;e<n;e++)s=o[e],p=s.getPoints(),a=i(p),a=t?!a:a,a?(!u&&d[g]&&g++,d[g]={s:new vh,p:p},d[g].s.curves=s.curves,u&&g++,m[g]=[]):m[g].push({h:s,p:p[0]});if(!d[0])return n(o);if(d.length>1){let t=!1;const e=[];for(let t=0,e=d.length;t<e;t++)h[t]=[];for(let n=0,i=d.length;n<i;n++){const i=m[n];for(let o=0;o<i.length;o++){const a=i[o];let s=!0;for(let i=0;i<d.length;i++)r(a.p,d[i].p)&&(n!==i&&e.push({froms:n,tos:i,hole:o}),s?(s=!1,h[i].push(a)):t=!0);s&&h[n].push(a)}}e.length>0&&(t||(m=h))}for(let t=0,e=d.length;t<e;t++){c=d[t].s,l.push(c),f=m[t];for(let t=0,e=f.length;t<e;t++)c.holes.push(f[t].h)}return l}}),Object.assign(Vh.prototype,{isFont:!0,generateShapes:function(t,e=100){const n=[],r=function(t,e,n){const r=Array.from?Array.from(t):String(t).split(""),i=e/n.resolution,o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*i,a=[];let s=0,c=0;for(let t=0;t<r.length;t++){const e=r[t];if("\n"===e)s=0,c-=o;else{const t=jh(e,i,s,c,n);s+=t.offsetX,a.push(t.path)}}return a}(t,e,this.data);for(let t=0,e=r.length;t<e;t++)Array.prototype.push.apply(n,r[t].toShapes());return n}}),Wh.prototype=Object.assign(Object.create(Gu.prototype),{constructor:Wh,load:function(t,e,n,r){const i=this,o=new ku(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(i.withCredentials),o.load(t,(function(t){let n;try{n=JSON.parse(t)}catch(e){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(t.substring(65,t.length-2))}const r=i.parse(n);e&&e(r)}),n,r)},parse:function(t){return new Vh(t)}});const qh={getContext:function(){return void 0===Xh&&(Xh=new(window.AudioContext||window.webkitAudioContext)),Xh},setContext:function(t){Xh=t}};function Yh(t){Gu.call(this,t)}function Zh(t,e,n){Ch.call(this,void 0,n);const r=(new yi).set(t),i=(new yi).set(e),o=new Kn(r.r,r.g,r.b),a=new Kn(i.r,i.g,i.b),s=Math.sqrt(Math.PI),c=s*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(s),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(c)}function Jh(t,e){Ch.call(this,void 0,e);const n=(new yi).set(t);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}Yh.prototype=Object.assign(Object.create(Gu.prototype),{constructor:Yh,load:function(t,e,n,r){const i=this,o=new ku(i.manager);o.setResponseType("arraybuffer"),o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(t,(function(n){try{const t=n.slice(0);qh.getContext().decodeAudioData(t,(function(t){e(t)}))}catch(e){r?r(e):console.error(e),i.manager.itemError(t)}}),n,r)}}),Zh.prototype=Object.assign(Object.create(Ch.prototype),{constructor:Zh,isHemisphereLightProbe:!0,copy:function(t){return Ch.prototype.copy.call(this,t),this},toJSON:function(t){return Ch.prototype.toJSON.call(this,t)}}),Jh.prototype=Object.assign(Object.create(Ch.prototype),{constructor:Jh,isAmbientLightProbe:!0,copy:function(t){return Ch.prototype.copy.call(this,t),this},toJSON:function(t){return Ch.prototype.toJSON.call(this,t)}});const Kh=new Tr,Qh=new Tr;function $h(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new wo,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new wo,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}Object.assign($h.prototype,{update:function(t){const e=this._cache;if(e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep;const n=t.projectionMatrix.clone(),r=e.eyeSep/2,i=r*e.near/e.focus,o=e.near*Math.tan(zn.DEG2RAD*e.fov*.5)/e.zoom;let a,s;Qh.elements[12]=-r,Kh.elements[12]=r,a=-o*e.aspect+i,s=o*e.aspect+i,n.elements[0]=2*e.near/(s-a),n.elements[8]=(s+a)/(s-a),this.cameraL.projectionMatrix.copy(n),a=-o*e.aspect-i,s=o*e.aspect-i,n.elements[0]=2*e.near/(s-a),n.elements[8]=(s+a)/(s-a),this.cameraR.projectionMatrix.copy(n)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(Qh),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(Kh)}});class td{constructor(t){this.autoStart=void 0===t||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=ed(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const e=ed();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}function ed(){return("undefined"==typeof performance?Date:performance).now()}const nd=new Kn,rd=new Jn,id=new Kn,od=new Kn;class ad extends Jr{constructor(){super(),this.type="AudioListener",this.context=qh.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new td}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(t){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}updateMatrixWorld(t){super.updateMatrixWorld(t);const e=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(nd,rd,id),od.set(0,0,-1).applyQuaternion(rd),e.positionX){const t=this.context.currentTime+this.timeDelta;e.positionX.linearRampToValueAtTime(nd.x,t),e.positionY.linearRampToValueAtTime(nd.y,t),e.positionZ.linearRampToValueAtTime(nd.z,t),e.forwardX.linearRampToValueAtTime(od.x,t),e.forwardY.linearRampToValueAtTime(od.y,t),e.forwardZ.linearRampToValueAtTime(od.z,t),e.upX.linearRampToValueAtTime(n.x,t),e.upY.linearRampToValueAtTime(n.y,t),e.upZ.linearRampToValueAtTime(n.z,t)}else e.setPosition(nd.x,nd.y,nd.z),e.setOrientation(od.x,od.y,od.z,n.x,n.y,n.z)}}class sd extends Jr{constructor(t){super(),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}play(t=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+t;const e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(t){return t||(t=[]),!0===this._connected?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}setDetune(t){if(this.detune=t,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(t){return this.setFilters(t?[t]:[])}setPlaybackRate(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}const cd=new Kn,ld=new Jn,ud=new Kn,hd=new Kn;class dd extends sd{constructor(t){super(t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(t){return this.panner.refDistance=t,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(t){return this.panner.rolloffFactor=t,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(t){return this.panner.distanceModel=t,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(t){return this.panner.maxDistance=t,this}setDirectionalCone(t,e,n){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=n,this}updateMatrixWorld(t){if(super.updateMatrixWorld(t),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(cd,ld,ud),hd.set(0,0,1).applyQuaternion(ld);const e=this.panner;if(e.positionX){const t=this.context.currentTime+this.listener.timeDelta;e.positionX.linearRampToValueAtTime(cd.x,t),e.positionY.linearRampToValueAtTime(cd.y,t),e.positionZ.linearRampToValueAtTime(cd.z,t),e.orientationX.linearRampToValueAtTime(hd.x,t),e.orientationY.linearRampToValueAtTime(hd.y,t),e.orientationZ.linearRampToValueAtTime(hd.z,t)}else e.setPosition(cd.x,cd.y,cd.z),e.setOrientation(hd.x,hd.y,hd.z)}}class pd{constructor(t,e=2048){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=e,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let t=0;const e=this.getFrequencyData();for(let n=0;n<e.length;n++)t+=e[n];return t/e.length}}function fd(t,e,n){let r,i,o;switch(this.binding=t,this.valueSize=n,e){case"quaternion":r=this._slerp,i=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":r=this._select,i=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:r=this._lerp,i=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=i,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}Object.assign(fd.prototype,{accumulate:function(t,e){const n=this.buffer,r=this.valueSize,i=t*r+r;let o=this.cumulativeWeight;if(0===o){for(let t=0;t!==r;++t)n[i+t]=n[t];o=e}else{o+=e;const t=e/o;this._mixBufferRegion(n,i,0,t,r)}this.cumulativeWeight=o},accumulateAdditive:function(t){const e=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(e,r,0,t,n),this.cumulativeWeightAdditive+=t},apply:function(t){const e=this.valueSize,n=this.buffer,r=t*e+e,i=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){const t=e*this._origIndex;this._mixBufferRegion(n,r,t,1-i,e)}o>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*e,1,e);for(let t=e,i=e+e;t!==i;++t)if(n[t]!==n[t+e]){a.setValue(n,r);break}},saveOriginalState:function(){const t=this.binding,e=this.buffer,n=this.valueSize,r=n*this._origIndex;t.getValue(e,r);for(let t=n,i=r;t!==i;++t)e[t]=e[r+t%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0},restoreOriginalState:function(){const t=3*this.valueSize;this.binding.setValue(this.buffer,t)},_setAdditiveIdentityNumeric:function(){const t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let n=t;n<e;n++)this.buffer[n]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1},_setAdditiveIdentityOther:function(){const t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[e+n]=this.buffer[t+n]},_select:function(t,e,n,r,i){if(r>=.5)for(let r=0;r!==i;++r)t[e+r]=t[n+r]},_slerp:function(t,e,n,r){Jn.slerpFlat(t,e,t,e,t,n,r)},_slerpAdditive:function(t,e,n,r,i){const o=this._workIndex*i;Jn.multiplyQuaternionsFlat(t,o,t,e,t,n),Jn.slerpFlat(t,e,t,e,t,o,r)},_lerp:function(t,e,n,r,i){const o=1-r;for(let a=0;a!==i;++a){const i=e+a;t[i]=t[i]*o+t[n+a]*r}},_lerpAdditive:function(t,e,n,r,i){for(let o=0;o!==i;++o){const i=e+o;t[i]=t[i]+t[n+o]*r}}});const md=new RegExp("[\\[\\]\\.:\\/]","g"),gd="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",vd=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),yd=/(WCOD+)?/.source.replace("WCOD",gd),xd=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),bd=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),wd=new RegExp("^"+vd+yd+xd+bd+"$"),_d=["material","materials","bones"];function Md(t,e,n){const r=n||Sd.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)}function Sd(t,e,n){this.path=e,this.parsedPath=n||Sd.parseTrackName(e),this.node=Sd.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}function Td(){this.uuid=zn.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const t={};this._indicesByUUID=t;for(let e=0,n=arguments.length;e!==n;++e)t[arguments[e].uuid]=e;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const e=this;this.stats={objects:{get total(){return e._objects.length},get inUse(){return this.total-e.nCachedObjects_}},get bindingsPerObject(){return e._bindings.length}}}Object.assign(Md.prototype,{getValue:function(t,e){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(t,e)},setValue:function(t,e){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(t,e)},bind:function(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()},unbind:function(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}),Object.assign(Sd,{Composite:Md,create:function(t,e,n){return t&&t.isAnimationObjectGroup?new Sd.Composite(t,e,n):new Sd(t,e,n)},sanitizeNodeName:function(t){return t.replace(/\s/g,"_").replace(md,"")},parseTrackName:function(t){const e=wd.exec(t);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const t=n.nodeName.substring(r+1);-1!==_d.indexOf(t)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=t)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n},findNode:function(t,e){if(!e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){const n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){const n=function(t){for(let r=0;r<t.length;r++){const i=t[r];if(i.name===e||i.uuid===e)return i;const o=n(i.children);if(o)return o}return null},r=n(t.children);if(r)return r}return null}}),Object.assign(Sd.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)t[e++]=n[r]},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e)}],SetterByBindingTypeAndVersioning:[[function(t,e){this.targetObject[this.propertyName]=t[e]},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=t[e++]},function(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.needsUpdate=!0},function(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,e){this.bind(),this.getValue(t,e)},setValue:function(t,e){this.bind(),this.setValue(t,e)},bind:function(){let t=this.node;const e=this.parsedPath,n=e.objectName,r=e.propertyName;let i=e.propertyIndex;if(t||(t=Sd.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let r=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let e=0;e<t.length;e++)if(t[e].name===r){r=e;break}break;default:if(void 0===t[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[n]}if(void 0!==r){if(void 0===t[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[r]}}const o=t[r];if(void 0===o){const n=e.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+r+" but it wasn't found.",t)}let a=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?a=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(a=this.Versioning.MatrixWorldNeedsUpdate);let s=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[i]&&(i=t.morphTargetDictionary[i])}s=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=i}else void 0!==o.fromArray&&void 0!==o.toArray?(s=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(s=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[s],this.setValue=this.SetterByBindingTypeAndVersioning[s][a]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(Sd.prototype,{_getValue_unbound:Sd.prototype.getValue,_setValue_unbound:Sd.prototype.setValue}),Object.assign(Td.prototype,{isAnimationObjectGroup:!0,add:function(){const t=this._objects,e=this._indicesByUUID,n=this._paths,r=this._parsedPaths,i=this._bindings,o=i.length;let a=void 0,s=t.length,c=this.nCachedObjects_;for(let l=0,u=arguments.length;l!==u;++l){const u=arguments[l],h=u.uuid;let d=e[h];if(void 0===d){d=s++,e[h]=d,t.push(u);for(let t=0,e=o;t!==e;++t)i[t].push(new Sd(u,n[t],r[t]))}else if(d<c){a=t[d];const s=--c,l=t[s];e[l.uuid]=d,t[d]=l,e[h]=s,t[s]=u;for(let t=0,e=o;t!==e;++t){const e=i[t],o=e[s];let a=e[d];e[d]=o,void 0===a&&(a=new Sd(u,n[t],r[t])),e[s]=a}}else t[d]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c},remove:function(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const a=arguments[o],s=a.uuid,c=e[s];if(void 0!==c&&c>=i){const o=i++,l=t[o];e[l.uuid]=c,t[c]=l,e[s]=o,t[o]=a;for(let t=0,e=r;t!==e;++t){const e=n[t],r=e[o],i=e[c];e[c]=r,e[o]=i}}}this.nCachedObjects_=i},uncache:function(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_,o=t.length;for(let a=0,s=arguments.length;a!==s;++a){const s=arguments[a].uuid,c=e[s];if(void 0!==c)if(delete e[s],c<i){const a=--i,s=t[a],l=--o,u=t[l];e[s.uuid]=c,t[c]=s,e[u.uuid]=a,t[a]=u,t.pop();for(let t=0,e=r;t!==e;++t){const e=n[t],r=e[a],i=e[l];e[c]=r,e[a]=i,e.pop()}}else{const i=--o,a=t[i];i>0&&(e[a.uuid]=c),t[c]=a,t.pop();for(let t=0,e=r;t!==e;++t){const e=n[t];e[c]=e[i],e.pop()}}}this.nCachedObjects_=i},subscribe_:function(t,e){const n=this._bindingsIndicesByPath;let r=n[t];const i=this._bindings;if(void 0!==r)return i[r];const o=this._paths,a=this._parsedPaths,s=this._objects,c=s.length,l=this.nCachedObjects_,u=new Array(c);r=i.length,n[t]=r,o.push(t),a.push(e),i.push(u);for(let n=l,r=s.length;n!==r;++n){const r=s[n];u[n]=new Sd(r,t,e)}return u},unsubscribe_:function(t){const e=this._bindingsIndicesByPath,n=e[t];if(void 0!==n){const r=this._paths,i=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];e[t[a]]=n,o[n]=s,o.pop(),i[n]=i[a],i.pop(),r[n]=r[a],r.pop()}}});class Ed{constructor(t,e,n=null,r=e.blendMode){this._mixer=t,this._clip=e,this._localRoot=n,this.blendMode=r;const i=e.tracks,o=i.length,a=new Array(o),s={endingStart:ke,endingEnd:ke};for(let t=0;t!==o;++t){const e=i[t].createInterpolant(null);a[t]=e,e.settings=s}this._interpolantSettings=s,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Fe,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){const n=this._clip.duration,r=t._clip.duration,i=r/n,o=n/r;t.warp(1,i,e),this.warp(o,1,e)}return this}crossFadeTo(t,e,n){return t.crossFadeFrom(this,e,n)}stopFading(){const t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,n){const r=this._mixer,i=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;null===a&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const s=a.parameterPositions,c=a.sampleValues;return s[0]=i,s[1]=i+n,c[0]=t/o,c[1]=e/o,this}stopWarping(){const t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,e,n,r){if(!this.enabled)return void this._updateWeight(t);const i=this._startTime;if(null!==i){const r=(t-i)*n;if(r<0||0===n)return;this._startTime=null,e=n*r}e*=this._updateTimeScale(t);const o=this._updateTime(e),a=this._updateWeight(t);if(a>0){const t=this._interpolants,e=this._propertyBindings;switch(this.blendMode){case Xe:for(let n=0,r=t.length;n!==r;++n)t[n].evaluate(o),e[n].accumulateAdditive(a);break;case We:default:for(let n=0,i=t.length;n!==i;++n)t[n].evaluate(o),e[n].accumulate(r,a)}}}_updateWeight(t){let e=0;if(this.enabled){e=this.weight;const n=this._weightInterpolant;if(null!==n){const r=n.evaluate(t)[0];e*=r,t>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=e,e}_updateTimeScale(t){let e=0;if(!this.paused){e=this.timeScale;const n=this._timeScaleInterpolant;if(null!==n){e*=n.evaluate(t)[0],t>n.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e}_updateTime(t){const e=this._clip.duration,n=this.loop;let r=this.time+t,i=this._loopCount;const o=n===Ue;if(0===t)return-1===i?r:o&&1==(1&i)?e-r:r;if(n===Be){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(r>=e)r=e;else{if(!(r<0)){this.time=r;break t}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===i&&(t>=0?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),r>=e||r<0){const n=Math.floor(r/e);r-=e*n,i+=Math.abs(n);const a=this.repetitions-i;if(a<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=t>0?e:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===a){const e=t<0;this._setEndings(e,!e,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=r;if(o&&1==(1&i))return e-r}return r}_setEndings(t,e,n){const r=this._interpolantSettings;n?(r.endingStart=Ve,r.endingEnd=Ve):(r.endingStart=t?this.zeroSlopeAtStart?Ve:ke:je,r.endingEnd=e?this.zeroSlopeAtEnd?Ve:ke:je)}_scheduleFading(t,e,n){const r=this._mixer,i=r.time;let o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,s=o.sampleValues;return a[0]=i,s[0]=e,a[1]=i+t,s[1]=n,this}}function Ad(t){this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}Ad.prototype=Object.assign(Object.create(Bn.prototype),{constructor:Ad,_bindAction:function(t,e){const n=t._localRoot||this._root,r=t._clip.tracks,i=r.length,o=t._propertyBindings,a=t._interpolants,s=n.uuid,c=this._bindingsByRootAndName;let l=c[s];void 0===l&&(l={},c[s]=l);for(let t=0;t!==i;++t){const i=r[t],c=i.name;let u=l[c];if(void 0!==u)o[t]=u;else{if(u=o[t],void 0!==u){null===u._cacheIndex&&(++u.referenceCount,this._addInactiveBinding(u,s,c));continue}const r=e&&e._propertyBindings[t].binding.parsedPath;u=new fd(Sd.create(n,c,r),i.ValueTypeName,i.getValueSize()),++u.referenceCount,this._addInactiveBinding(u,s,c),o[t]=u}a[t].resultBuffer=u.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){const e=(t._localRoot||this._root).uuid,n=t._clip.uuid,r=this._actionsByClip[n];this._bindAction(t,r&&r.knownActions[0]),this._addInactiveAction(t,n,e)}const e=t._propertyBindings;for(let t=0,n=e.length;t!==n;++t){const n=e[t];0==n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){const e=t._propertyBindings;for(let t=0,n=e.length;t!==n;++t){const n=e[t];0==--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){const e=t._cacheIndex;return null!==e&&e<this._nActiveActions},_addInactiveAction:function(t,e,n){const r=this._actions,i=this._actionsByClip;let o=i[e];if(void 0===o)o={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,i[e]=o;else{const e=o.knownActions;t._byClipCacheIndex=e.length,e.push(t)}t._cacheIndex=r.length,r.push(t),o.actionByRoot[n]=t},_removeInactiveAction:function(t){const e=this._actions,n=e[e.length-1],r=t._cacheIndex;n._cacheIndex=r,e[r]=n,e.pop(),t._cacheIndex=null;const i=t._clip.uuid,o=this._actionsByClip,a=o[i],s=a.knownActions,c=s[s.length-1],l=t._byClipCacheIndex;c._byClipCacheIndex=l,s[l]=c,s.pop(),t._byClipCacheIndex=null;delete a.actionByRoot[(t._localRoot||this._root).uuid],0===s.length&&delete o[i],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){const e=t._propertyBindings;for(let t=0,n=e.length;t!==n;++t){const n=e[t];0==--n.referenceCount&&this._removeInactiveBinding(n)}},_lendAction:function(t){const e=this._actions,n=t._cacheIndex,r=this._nActiveActions++,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_takeBackAction:function(t){const e=this._actions,n=t._cacheIndex,r=--this._nActiveActions,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_addInactiveBinding:function(t,e,n){const r=this._bindingsByRootAndName,i=this._bindings;let o=r[e];void 0===o&&(o={},r[e]=o),o[n]=t,t._cacheIndex=i.length,i.push(t)},_removeInactiveBinding:function(t){const e=this._bindings,n=t.binding,r=n.rootNode.uuid,i=n.path,o=this._bindingsByRootAndName,a=o[r],s=e[e.length-1],c=t._cacheIndex;s._cacheIndex=c,e[c]=s,e.pop(),delete a[i],0===Object.keys(a).length&&delete o[r]},_lendBinding:function(t){const e=this._bindings,n=t._cacheIndex,r=this._nActiveBindings++,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_takeBackBinding:function(t){const e=this._bindings,n=t._cacheIndex,r=--this._nActiveBindings,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_lendControlInterpolant:function(){const t=this._controlInterpolants,e=this._nActiveControlInterpolants++;let n=t[e];return void 0===n&&(n=new Tu(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=e,t[e]=n),n},_takeBackControlInterpolant:function(t){const e=this._controlInterpolants,n=t.__cacheIndex,r=--this._nActiveControlInterpolants,i=e[r];t.__cacheIndex=r,e[r]=t,i.__cacheIndex=n,e[n]=i},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(t,e,n){const r=e||this._root,i=r.uuid;let o="string"==typeof t?Du.findByName(r,t):t;const a=null!==o?o.uuid:t,s=this._actionsByClip[a];let c=null;if(void 0===n&&(n=null!==o?o.blendMode:We),void 0!==s){const t=s.actionByRoot[i];if(void 0!==t&&t.blendMode===n)return t;c=s.knownActions[0],null===o&&(o=c._clip)}if(null===o)return null;const l=new Ed(this,o,e,n);return this._bindAction(l,c),this._addInactiveAction(l,a,i),l},existingAction:function(t,e){const n=e||this._root,r=n.uuid,i="string"==typeof t?Du.findByName(n,t):t,o=i?i.uuid:t,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[r]||null},stopAllAction:function(){const t=this._actions;for(let e=this._nActiveActions-1;e>=0;--e)t[e].stop();return this},update:function(t){t*=this.timeScale;const e=this._actions,n=this._nActiveActions,r=this.time+=t,i=Math.sign(t),o=this._accuIndex^=1;for(let a=0;a!==n;++a){e[a]._update(r,t,i,o)}const a=this._bindings,s=this._nActiveBindings;for(let t=0;t!==s;++t)a[t].apply(o);return this},setTime:function(t){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(t)},getRoot:function(){return this._root},uncacheClip:function(t){const e=this._actions,n=t.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){const t=i.knownActions;for(let n=0,r=t.length;n!==r;++n){const r=t[n];this._deactivateAction(r);const i=r._cacheIndex,o=e[e.length-1];r._cacheIndex=null,r._byClipCacheIndex=null,o._cacheIndex=i,e[i]=o,e.pop(),this._removeInactiveBindingsForAction(r)}delete r[n]}},uncacheRoot:function(t){const e=t.uuid,n=this._actionsByClip;for(const t in n){const r=n[t].actionByRoot[e];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}const r=this._bindingsByRootAndName[e];if(void 0!==r)for(const t in r){const e=r[t];e.restoreOriginalState(),this._removeInactiveBinding(e)}},uncacheAction:function(t,e){const n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}});class Ld{constructor(t){"string"==typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}clone(){return new Ld(void 0===this.value.clone?this.value:this.value.clone())}}function Rd(t,e,n){Gs.call(this,t,e),this.meshPerAttribute=n||1}function Pd(t,e,n,r,i){this.buffer=t,this.type=e,this.itemSize=n,this.elementSize=r,this.count=i,this.version=0}function Cd(t,e,n,r){this.ray=new Sr(t,e),this.near=n||0,this.far=r||1/0,this.camera=null,this.layers=new Br,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function Id(t,e){return t.distance-e.distance}function Od(t,e,n,r){if(t.layers.test(e.layers)&&t.raycast(e,n),!0===r){const r=t.children;for(let t=0,i=r.length;t<i;t++)Od(r[t],e,n,!0)}}Rd.prototype=Object.assign(Object.create(Gs.prototype),{constructor:Rd,isInstancedInterleavedBuffer:!0,copy:function(t){return Gs.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},clone:function(t){const e=Gs.prototype.clone.call(this,t);return e.meshPerAttribute=this.meshPerAttribute,e},toJSON:function(t){const e=Gs.prototype.toJSON.call(this,t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}),Object.defineProperty(Pd.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(Pd.prototype,{isGLBufferAttribute:!0,setBuffer:function(t){return this.buffer=t,this},setType:function(t,e){return this.type=t,this.elementSize=e,this},setItemSize:function(t){return this.itemSize=t,this},setCount:function(t){return this.count=t,this}}),Object.assign(Cd.prototype,{set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(t,e,n){const r=n||[];return Od(t,this,r,e),r.sort(Id),r},intersectObjects:function(t,e,n){const r=n||[];if(!1===Array.isArray(t))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),r;for(let n=0,i=t.length;n<i;n++)Od(t[n],this,r,e);return r.sort(Id),r}});class Nd{constructor(t=1,e=0,n=0){return this.radius=t,this.phi=e,this.theta=n,this}set(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this}clone(){return(new this.constructor).copy(this)}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(zn.clamp(e/this.radius,-1,1))),this}}class Dd{constructor(t,e,n){return this.radius=void 0!==t?t:1,this.theta=void 0!==e?e:0,this.y=void 0!==n?n:0,this}set(t,e,n){return this.radius=t,this.theta=e,this.y=n,this}clone(){return(new this.constructor).copy(this)}copy(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+n*n),this.theta=Math.atan2(t,n),this.y=e,this}}const Bd=new Gn;class Fd{constructor(t,e){Object.defineProperty(this,"isBox2",{value:!0}),this.min=void 0!==t?t:new Gn(1/0,1/0),this.max=void 0!==e?e:new Gn(-1/0,-1/0)}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=Bd.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return void 0===t&&(console.warn("THREE.Box2: .getCenter() target is now required"),t=new Gn),this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return void 0===t&&(console.warn("THREE.Box2: .getSize() target is now required"),t=new Gn),this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,e){return void 0===e&&(console.warn("THREE.Box2: .getParameter() target is now required"),e=new Gn),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)}clampPoint(t,e){return void 0===e&&(console.warn("THREE.Box2: .clampPoint() target is now required"),e=new Gn),e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return Bd.copy(t).clamp(this.min,this.max).sub(t).length()}intersect(t){return this.min.max(t.min),this.max.min(t.max),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const Ud=new Kn,zd=new Kn;class Gd{constructor(t,e){this.start=void 0!==t?t:new Kn,this.end=void 0!==e?e:new Kn}set(t,e){return this.start.copy(t),this.end.copy(e),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.start.copy(t.start),this.end.copy(t.end),this}getCenter(t){return void 0===t&&(console.warn("THREE.Line3: .getCenter() target is now required"),t=new Kn),t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return void 0===t&&(console.warn("THREE.Line3: .delta() target is now required"),t=new Kn),t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,e){return void 0===e&&(console.warn("THREE.Line3: .at() target is now required"),e=new Kn),this.delta(e).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,e){Ud.subVectors(t,this.start),zd.subVectors(this.end,this.start);const n=zd.dot(zd);let r=zd.dot(Ud)/n;return e&&(r=zn.clamp(r,0,1)),r}closestPointToPoint(t,e,n){const r=this.closestPointToPointParameter(t,e);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new Kn),this.delta(n).multiplyScalar(r).add(this.start)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(t){return t.start.equals(this.start)&&t.end.equals(this.end)}}function Hd(t){Jr.call(this),this.material=t,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}Hd.prototype=Object.create(Jr.prototype),Hd.prototype.constructor=Hd,Hd.prototype.isImmediateRenderObject=!0;const kd=new Kn;class Vd extends Jr{constructor(t,e){super(),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e;const n=new qi,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let t=0,e=1,n=32;t<n;t++,e++){const i=t/n*Math.PI*2,o=e/n*Math.PI*2;r.push(Math.cos(i),Math.sin(i),1,Math.cos(o),Math.sin(o),1)}n.setAttribute("position",new Ni(r,3));const i=new yc({fog:!1,toneMapped:!1});this.cone=new Ac(n,i),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),kd.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(kd),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const jd=new Kn,Wd=new Tr,Xd=new Tr;class qd extends Ac{constructor(t){const e=function t(e){const n=[];e&&e.isBone&&n.push(e);for(let r=0;r<e.children.length;r++)n.push.apply(n,t(e.children[r]));return n}(t),n=new qi,r=[],i=[],o=new yi(0,0,1),a=new yi(0,1,0);for(let t=0;t<e.length;t++){const n=e[t];n.parent&&n.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(o.r,o.g,o.b),i.push(a.r,a.g,a.b))}n.setAttribute("position",new Ni(r,3)),n.setAttribute("color",new Ni(i,3));super(n,new yc({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const e=this.bones,n=this.geometry,r=n.getAttribute("position");Xd.copy(this.root.matrixWorld).invert();for(let t=0,n=0;t<e.length;t++){const i=e[t];i.parent&&i.parent.isBone&&(Wd.multiplyMatrices(Xd,i.matrixWorld),jd.setFromMatrixPosition(Wd),r.setXYZ(n,jd.x,jd.y,jd.z),Wd.multiplyMatrices(Xd,i.parent.matrixWorld),jd.setFromMatrixPosition(Wd),r.setXYZ(n+1,jd.x,jd.y,jd.z),n+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}}class Yd extends ho{constructor(t,e,n){super(new Kl(e,4,2),new _i({wireframe:!0,fog:!1,toneMapped:!1})),this.light=t,this.light.updateMatrixWorld(),this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Zd=new Kn,Jd=new yi,Kd=new yi;class Qd extends Jr{constructor(t,e,n){super(),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;const r=new Hl(e);r.rotateY(.5*Math.PI),this.material=new _i({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const i=r.getAttribute("position"),o=new Float32Array(3*i.count);r.setAttribute("color",new Ti(o,3)),this.add(new ho(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const t=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const e=t.geometry.getAttribute("color");Jd.copy(this.light.color),Kd.copy(this.light.groundColor);for(let t=0,n=e.count;t<n;t++){const r=t<n/2?Jd:Kd;e.setXYZ(t,r.r,r.g,r.b)}e.needsUpdate=!0}t.lookAt(Zd.setFromMatrixPosition(this.light.matrixWorld).negate())}}class $d extends Ac{constructor(t=10,e=10,n=4473924,r=8947848){n=new yi(n),r=new yi(r);const i=e/2,o=t/e,a=t/2,s=[],c=[];for(let t=0,l=0,u=-a;t<=e;t++,u+=o){s.push(-a,0,u,a,0,u),s.push(u,0,-a,u,0,a);const e=t===i?n:r;e.toArray(c,l),l+=3,e.toArray(c,l),l+=3,e.toArray(c,l),l+=3,e.toArray(c,l),l+=3}const l=new qi;l.setAttribute("position",new Ni(s,3)),l.setAttribute("color",new Ni(c,3));super(l,new yc({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}class tp extends Ac{constructor(t=10,e=16,n=8,r=64,i=4473924,o=8947848){i=new yi(i),o=new yi(o);const a=[],s=[];for(let n=0;n<=e;n++){const r=n/e*(2*Math.PI),c=Math.sin(r)*t,l=Math.cos(r)*t;a.push(0,0,0),a.push(c,0,l);const u=1&n?i:o;s.push(u.r,u.g,u.b),s.push(u.r,u.g,u.b)}for(let e=0;e<=n;e++){const c=1&e?i:o,l=t-t/n*e;for(let t=0;t<r;t++){let e=t/r*(2*Math.PI),n=Math.sin(e)*l,i=Math.cos(e)*l;a.push(n,0,i),s.push(c.r,c.g,c.b),e=(t+1)/r*(2*Math.PI),n=Math.sin(e)*l,i=Math.cos(e)*l,a.push(n,0,i),s.push(c.r,c.g,c.b)}}const c=new qi;c.setAttribute("position",new Ni(a,3)),c.setAttribute("color",new Ni(s,3));super(c,new yc({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}}const ep=new Kn,np=new Kn,rp=new Kn;class ip extends Jr{constructor(t,e,n){super(),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===e&&(e=1);let r=new qi;r.setAttribute("position",new Ni([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));const i=new yc({fog:!1,toneMapped:!1});this.lightPlane=new Sc(r,i),this.add(this.lightPlane),r=new qi,r.setAttribute("position",new Ni([0,0,0,0,0,1],3)),this.targetLine=new Sc(r,i),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){ep.setFromMatrixPosition(this.light.matrixWorld),np.setFromMatrixPosition(this.light.target.matrixWorld),rp.subVectors(np,ep),this.lightPlane.lookAt(np),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(np),this.targetLine.scale.z=rp.length()}}const op=new Kn,ap=new bo;class sp extends Ac{constructor(t){const e=new qi,n=new yc({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],i=[],o={},a=new yi(16755200),s=new yi(16711680),c=new yi(43775),l=new yi(16777215),u=new yi(3355443);function h(t,e,n){d(t,n),d(e,n)}function d(t,e){r.push(0,0,0),i.push(e.r,e.g,e.b),void 0===o[t]&&(o[t]=[]),o[t].push(r.length/3-1)}h("n1","n2",a),h("n2","n4",a),h("n4","n3",a),h("n3","n1",a),h("f1","f2",a),h("f2","f4",a),h("f4","f3",a),h("f3","f1",a),h("n1","f1",a),h("n2","f2",a),h("n3","f3",a),h("n4","f4",a),h("p","n1",s),h("p","n2",s),h("p","n3",s),h("p","n4",s),h("u1","u2",c),h("u2","u3",c),h("u3","u1",c),h("c","t",l),h("p","c",u),h("cn1","cn2",u),h("cn3","cn4",u),h("cf1","cf2",u),h("cf3","cf4",u),e.setAttribute("position",new Ni(r,3)),e.setAttribute("color",new Ni(i,3)),super(e,n),this.type="CameraHelper",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}update(){const t=this.geometry,e=this.pointMap;ap.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),cp("c",e,t,ap,0,0,-1),cp("t",e,t,ap,0,0,1),cp("n1",e,t,ap,-1,-1,-1),cp("n2",e,t,ap,1,-1,-1),cp("n3",e,t,ap,-1,1,-1),cp("n4",e,t,ap,1,1,-1),cp("f1",e,t,ap,-1,-1,1),cp("f2",e,t,ap,1,-1,1),cp("f3",e,t,ap,-1,1,1),cp("f4",e,t,ap,1,1,1),cp("u1",e,t,ap,.7,1.1,-1),cp("u2",e,t,ap,-.7,1.1,-1),cp("u3",e,t,ap,0,2,-1),cp("cf1",e,t,ap,-1,0,1),cp("cf2",e,t,ap,1,0,1),cp("cf3",e,t,ap,0,-1,1),cp("cf4",e,t,ap,0,1,1),cp("cn1",e,t,ap,-1,0,-1),cp("cn2",e,t,ap,1,0,-1),cp("cn3",e,t,ap,0,-1,-1),cp("cn4",e,t,ap,0,1,-1),t.getAttribute("position").needsUpdate=!0}}function cp(t,e,n,r,i,o,a){op.set(i,o,a).unproject(r);const s=e[t];if(void 0!==s){const t=n.getAttribute("position");for(let e=0,n=s.length;e<n;e++)t.setXYZ(s[e],op.x,op.y,op.z)}}const lp=new tr;class up extends Ac{constructor(t,e=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new qi;i.setIndex(new Ti(n,1)),i.setAttribute("position",new Ti(r,3)),super(i,new yc({color:e,toneMapped:!1})),this.object=t,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&lp.setFromObject(this.object),lp.isEmpty())return;const e=lp.min,n=lp.max,r=this.geometry.attributes.position,i=r.array;i[0]=n.x,i[1]=n.y,i[2]=n.z,i[3]=e.x,i[4]=n.y,i[5]=n.z,i[6]=e.x,i[7]=e.y,i[8]=n.z,i[9]=n.x,i[10]=e.y,i[11]=n.z,i[12]=n.x,i[13]=n.y,i[14]=e.z,i[15]=e.x,i[16]=n.y,i[17]=e.z,i[18]=e.x,i[19]=e.y,i[20]=e.z,i[21]=n.x,i[22]=e.y,i[23]=e.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(t){return this.object=t,this.update(),this}copy(t){return Ac.prototype.copy.call(this,t),this.object=t.object,this}}class hp extends Ac{constructor(t,e=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new qi;r.setIndex(new Ti(n,1)),r.setAttribute("position",new Ni([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(r,new yc({color:e,toneMapped:!1})),this.box=t,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(t){const e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(t))}}class dp extends Sc{constructor(t,e=1,n=16776960){const r=n,i=new qi;i.setAttribute("position",new Ni([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),i.computeBoundingSphere(),super(i,new yc({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=t,this.size=e;const o=new qi;o.setAttribute("position",new Ni([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),o.computeBoundingSphere(),this.add(new ho(o,new _i({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(t){let e=-this.plane.constant;Math.abs(e)<1e-8&&(e=1e-8),this.scale.set(.5*this.size,.5*this.size,e),this.children[0].material.side=e<0?m:f,this.lookAt(this.plane.normal),super.updateMatrixWorld(t)}}const pp=new Kn;let fp,mp;class gp extends Jr{constructor(t,e,n,r,i,o){super(),this.type="ArrowHelper",void 0===t&&(t=new Kn(0,0,1)),void 0===e&&(e=new Kn(0,0,0)),void 0===n&&(n=1),void 0===r&&(r=16776960),void 0===i&&(i=.2*n),void 0===o&&(o=.2*i),void 0===fp&&(fp=new qi,fp.setAttribute("position",new Ni([0,0,0,0,1,0],3)),mp=new Yc(0,.5,1,5,1),mp.translate(0,-.5,0)),this.position.copy(e),this.line=new Sc(fp,new yc({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new ho(mp,new _i({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(n,i,o)}setDirection(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{pp.set(t.z,0,-t.x).normalize();const e=Math.acos(t.y);this.quaternion.setFromAxisAngle(pp,e)}}setLength(t,e,n){void 0===e&&(e=.2*t),void 0===n&&(n=.2*e),this.line.scale.set(1,Math.max(1e-4,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()}setColor(t){this.line.material.color.set(t),this.cone.material.color.set(t)}copy(t){return super.copy(t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this}}class vp extends Ac{constructor(t=1){const e=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],n=new qi;n.setAttribute("position",new Ni(e,3)),n.setAttribute("color",new Ni([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));super(n,new yc({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}}const yp=new Float32Array(1),xp=new Int32Array(yp.buffer),bp={toHalfFloat:function(t){yp[0]=t;const e=xp[0];let n=e>>16&32768,r=e>>12&2047;const i=e>>23&255;return i<103?n:i>142?(n|=31744,n|=(255==i?0:1)&&8388607&e,n):i<113?(r|=2048,n|=(r>>114-i)+(r>>113-i&1),n):(n|=i-112<<10|r>>1,n+=1&r,n)}},wp=Math.pow(2,8),_p=[.125,.215,.35,.446,.526,.582],Mp=5+_p.length,Sp={[Je]:0,[Ke]:1,[$e]:2,[en]:3,[nn]:4,[rn]:5,[Qe]:6},Tp=new Th,{_lodPlanes:Ep,_sizeLods:Ap,_sigmas:Lp}=Dp();let Rp=null;const Pp=(1+Math.sqrt(5))/2,Cp=1/Pp,Ip=[new Kn(1,1,1),new Kn(-1,1,1),new Kn(1,1,-1),new Kn(-1,1,-1),new Kn(0,Pp,Cp),new Kn(0,Pp,-Cp),new Kn(Cp,0,Pp),new Kn(-Cp,0,Pp),new Kn(Pp,Cp,0),new Kn(-Pp,Cp,0)];class Op{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._blurMaterial=function(t){const e=new Float32Array(t),n=new Kn(0,1,0);return new du({name:"SphericalGaussianBlur",defines:{n:t},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:e},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n},inputEncoding:{value:Sp[Je]},outputEncoding:{value:Sp[Je]}},vertexShader:Gp(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t${Hp()}\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:x,depthTest:!1,depthWrite:!1})}(20),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,n=.1,r=100){Rp=this._renderer.getRenderTarget();const i=this._allocateTargets();return this._sceneToCubeUV(t,n,r,i),e>0&&this._blur(i,0,0,e),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(t){return this._fromTexture(t)}fromCubemap(t){return this._fromTexture(t)}compileCubemapShader(){null===this._cubemapShader&&(this._cubemapShader=zp(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){null===this._equirectShader&&(this._equirectShader=Up(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(let t=0;t<Ep.length;t++)Ep[t].dispose()}_cleanup(t){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(Rp),t.scissorTest=!1,Fp(t,0,0,t.width,t.height)}_fromTexture(t){Rp=this._renderer.getRenderTarget();const e=this._allocateTargets(t);return this._textureToCubeUV(t,e),this._applyPMREM(e),this._cleanup(e),e}_allocateTargets(t){const e={magFilter:ft,minFilter:ft,generateMipmaps:!1,type:St,format:Ht,encoding:Np(t)?t.encoding:$e,depthBuffer:!1},n=Bp(e);return n.depthBuffer=!t,this._pingPongRenderTarget=Bp(e),n}_compileMaterial(t){const e=new ho(Ep[0],t);this._renderer.compile(e,Tp)}_sceneToCubeUV(t,e,n,r){const i=new wo(90,1,e,n),o=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],s=this._renderer,c=s.outputEncoding,l=s.toneMapping,u=s.getClearColor(),h=s.getClearAlpha();s.toneMapping=Q,s.outputEncoding=Je;let d=t.background;if(d&&d.isColor){d.convertSRGBToLinear();const e=Math.max(d.r,d.g,d.b),n=Math.min(Math.max(Math.ceil(Math.log2(e)),-128),127);d=d.multiplyScalar(Math.pow(2,-n));const r=(n+128)/255;s.setClearColor(d,r),t.background=null}for(let e=0;e<6;e++){const n=e%3;0==n?(i.up.set(0,o[e],0),i.lookAt(a[e],0,0)):1==n?(i.up.set(0,0,o[e]),i.lookAt(0,a[e],0)):(i.up.set(0,o[e],0),i.lookAt(0,0,a[e])),Fp(r,n*wp,e>2?wp:0,wp,wp),s.setRenderTarget(r),s.render(t,i)}s.toneMapping=l,s.outputEncoding=c,s.setClearColor(u,h)}_textureToCubeUV(t,e){const n=this._renderer;t.isCubeTexture?null==this._cubemapShader&&(this._cubemapShader=zp()):null==this._equirectShader&&(this._equirectShader=Up());const r=t.isCubeTexture?this._cubemapShader:this._equirectShader,i=new ho(Ep[0],r),o=r.uniforms;o.envMap.value=t,t.isCubeTexture||o.texelSize.value.set(1/t.image.width,1/t.image.height),o.inputEncoding.value=Sp[t.encoding],o.outputEncoding.value=Sp[e.texture.encoding],Fp(e,0,0,3*wp,2*wp),n.setRenderTarget(e),n.render(i,Tp)}_applyPMREM(t){const e=this._renderer,n=e.autoClear;e.autoClear=!1;for(let e=1;e<Mp;e++){const n=Math.sqrt(Lp[e]*Lp[e]-Lp[e-1]*Lp[e-1]),r=Ip[(e-1)%Ip.length];this._blur(t,e-1,e,n,r)}e.autoClear=n}_blur(t,e,n,r,i){const o=this._pingPongRenderTarget;this._halfBlur(t,o,e,n,r,"latitudinal",i),this._halfBlur(o,t,n,n,r,"longitudinal",i)}_halfBlur(t,e,n,r,i,o,a){const s=this._renderer,c=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const l=new ho(Ep[r],c),u=c.uniforms,h=Ap[n]-1,d=isFinite(i)?Math.PI/(2*h):2*Math.PI/39,p=i/d,f=isFinite(i)?1+Math.floor(3*p):20;f>20&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${f} samples when the maximum is set to 20`);const m=[];let g=0;for(let t=0;t<20;++t){const e=t/p,n=Math.exp(-e*e/2);m.push(n),0==t?g+=n:t<f&&(g+=2*n)}for(let t=0;t<m.length;t++)m[t]=m[t]/g;u.envMap.value=t.texture,u.samples.value=f,u.weights.value=m,u.latitudinal.value="latitudinal"===o,a&&(u.poleAxis.value=a),u.dTheta.value=d,u.mipInt.value=8-n,u.inputEncoding.value=Sp[t.texture.encoding],u.outputEncoding.value=Sp[t.texture.encoding];const v=Ap[r];Fp(e,3*Math.max(0,wp-2*v),(0===r?0:2*wp)+2*v*(r>4?r-8+4:0),3*v,2*v),s.setRenderTarget(e),s.render(l,Tp)}}function Np(t){return void 0!==t&&t.type===St&&(t.encoding===Je||t.encoding===Ke||t.encoding===Qe)}function Dp(){const t=[],e=[],n=[];let r=8;for(let i=0;i<Mp;i++){const o=Math.pow(2,r);e.push(o);let a=1/o;i>4?a=_p[i-8+4-1]:0==i&&(a=0),n.push(a);const s=1/(o-1),c=-s/2,l=1+s/2,u=[c,c,l,c,l,l,c,c,l,l,c,l],h=6,d=6,p=3,f=2,m=1,g=new Float32Array(p*d*h),v=new Float32Array(f*d*h),y=new Float32Array(m*d*h);for(let t=0;t<h;t++){const e=t%3*2/3-1,n=t>2?0:-1,r=[e,n,0,e+2/3,n,0,e+2/3,n+1,0,e,n,0,e+2/3,n+1,0,e,n+1,0];g.set(r,p*d*t),v.set(u,f*d*t);const i=[t,t,t,t,t,t];y.set(i,m*d*t)}const x=new qi;x.setAttribute("position",new Ti(g,p)),x.setAttribute("uv",new Ti(v,f)),x.setAttribute("faceIndex",new Ti(y,m)),t.push(x),r>4&&r--}return{_lodPlanes:t,_sizeLods:e,_sigmas:n}}function Bp(t){const e=new Yn(3*wp,3*wp,t);return e.texture.mapping=lt,e.texture.name="PMREM.cubeUv",e.scissorTest=!0,e}function Fp(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function Up(){return new du({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:new Gn(1,1)},inputEncoding:{value:Sp[Je]},outputEncoding:{value:Sp[Je]}},vertexShader:Gp(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t${Hp()}\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:x,depthTest:!1,depthWrite:!1})}function zp(){return new du({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:Sp[Je]},outputEncoding:{value:Sp[Je]}},vertexShader:Gp(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t${Hp()}\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:x,depthTest:!1,depthWrite:!1})}function Gp(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function Hp(){return"\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t"}function kp(t,e,n,r,i,o,a){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new xi(t,e,n,i,o,a)}const Vp=0,jp=1,Wp=0,Xp=1,qp=2;function Yp(t){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),t}function Zp(t=[]){return console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),t.isMultiMaterial=!0,t.materials=t,t.clone=function(){return t.slice()},t}function Jp(t,e){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Nc(t,e)}function Kp(t){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new rc(t)}function Qp(t,e){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Nc(t,e)}function $p(t){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new Rc(t)}function tf(t){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new Rc(t)}function ef(t){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new Rc(t)}function nf(t,e,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Kn(t,e,n)}function rf(t,e){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new Ti(t,e).setUsage(En)}function of(t,e){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new Ei(t,e)}function af(t,e){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new Ai(t,e)}function sf(t,e){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Li(t,e)}function cf(t,e){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new Ri(t,e)}function lf(t,e){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Pi(t,e)}function uf(t,e){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Ci(t,e)}function hf(t,e){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Ii(t,e)}function df(t,e){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Ni(t,e)}function pf(t,e){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Di(t,e)}function ff(t){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),rh.call(this,t),this.type="catmullrom",this.closed=!0}function mf(t){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),rh.call(this,t),this.type="catmullrom"}function gf(t){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),rh.call(this,t),this.type="catmullrom"}function vf(t){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new vp(t)}function yf(t,e){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new up(t,e)}function xf(t,e){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new Ac(new ol(t.geometry),new yc({color:void 0!==e?e:16777215}))}function bf(t,e){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new Ac(new lu(t.geometry),new yc({color:void 0!==e?e:16777215}))}function wf(t){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new ku(t)}function _f(t){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new qu(t)}function Mf(t,e,n){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new So(t,n)}Zu.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(Zu.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},Object.assign(mh.prototype,{createPointsGeometry:function(t){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");const e=this.getPoints(t);return this.createGeometry(e)},createSpacedPointsGeometry:function(t){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");const e=this.getSpacedPoints(t);return this.createGeometry(e)},createGeometry:function(t){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");const e=new jc;for(let n=0,r=t.length;n<r;n++){const r=t[n];e.vertices.push(new Kn(r.x,r.y,r.z||0))}return e}}),Object.assign(gh.prototype,{fromPoints:function(t){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)}}),ff.prototype=Object.create(rh.prototype),mf.prototype=Object.create(rh.prototype),gf.prototype=Object.create(rh.prototype),Object.assign(gf.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),$d.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},qd.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(Gu.prototype,{extractUrlBase:function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Oh.extractUrlBase(t)}}),Gu.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Object.assign(Fd.prototype,{center:function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},size:function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign(tr.prototype,{center:function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionSphere:function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},size:function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign(gr.prototype,{empty:function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()}}),Lo.prototype.setFromMatrix=function(t){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(t)},Gd.prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)},Object.assign(zn,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(t){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),zn.floorPowerOfTwo(t)},nextPowerOfTwo:function(t){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),zn.ceilPowerOfTwo(t)}}),Object.assign(Hn.prototype,{flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(t){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},getInverse:function(t){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(t).invert()}}),Object.assign(Tr.prototype,{extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new Kn).setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(t){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(t,e,n,r,i,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,r,n,i,o)},getInverse:function(t){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(t).invert()}}),ti.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)},Object.assign(Jn.prototype,{multiplyVector3:function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},inverse:function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()}}),Object.assign(Sr.prototype,{isIntersectionBox:function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionPlane:function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},isIntersectionSphere:function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}}),Object.assign(hi.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(t,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,e)},midpoint:function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},normal:function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},plane:function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)}}),Object.assign(hi,{barycoordFromPoint:function(t,e,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),hi.getBarycoord(t,e,n,r,i)},normal:function(t,e,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),hi.getNormal(t,e,n,r)}}),Object.assign(vh.prototype,{extractAllPoints:function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},extrude:function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Bl(this,t)},makeGeometry:function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Jl(this,t)}}),Object.assign(Gn.prototype,{fromAttribute:function(t,e,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Kn.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},applyProjection:function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},fromAttribute:function(t,e,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(qn.prototype,{fromAttribute:function(t,e,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(jc.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},applyMatrix:function(t){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}}),Object.assign(Jr.prototype,{getChildByName:function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(t){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}}),Object.defineProperties(Jr.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.assign(ho.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}),Object.defineProperties(ho.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),qe},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Object.defineProperties(sc.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(dc.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),cc.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(Zu.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(t){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=t}}),wo.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(yh.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(Ti.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===En},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(En)}}}),Object.assign(Ti.prototype,{setDynamic:function(t){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?En:Tn),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(qi.prototype,{addIndex:function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},addAttribute:function(t,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(t,e):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(t,new Ti(arguments[1],arguments[2])))},addDrawCall:function(t,e,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(t){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(t)},applyMatrix:function(t){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}}),Object.defineProperties(qi.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(Nh.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(t){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=t}}}),Object.defineProperties(Cd.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(t){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=t}}}),Object.defineProperties(Gs.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===En},set:function(t){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(t)}}}),Object.assign(Gs.prototype,{setDynamic:function(t){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?En:Tn),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(Nl.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.assign(zs.prototype,{dispose:function(){console.error("THREE.Scene: .dispose() has been removed.")}}),Object.defineProperties(Ld.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(wi.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new yi}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=t===v}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(t){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=t}}}),Object.defineProperties(mu.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(fu.prototype,{transparency:{get:function(){return console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission},set:function(t){console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission=t}}}),Object.defineProperties(xo.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),Object.assign(Ds.prototype,{clearTarget:function(t,e,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(t),this.clear(e,n,r)},animate:function(t){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(t)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}}),Object.defineProperties(Ds.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(t){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===t?Ke:Je}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(Es.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Yn.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),Object.defineProperties(sd.prototype,{load:{value:function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const e=this;return(new Yh).load(t,(function(t){e.setBuffer(t)})),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}}),pd.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},_o.prototype.updateCubeMap=function(t,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,e)},_o.prototype.clear=function(t,e,n,r){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(t,e,n,r)};const Sf={merge:function(t,e,n){let r;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),e.isMesh&&(e.matrixAutoUpdate&&e.updateMatrix(),r=e.matrix,e=e.geometry),t.merge(e,r,n)},center:function(t){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),t.center()}};function Tf(){console.error("THREE.CanvasRenderer has been removed")}function Ef(){console.error("THREE.JSONLoader has been removed.")}Vn.crossOrigin=void 0,Vn.loadTexture=function(t,e,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const i=new Yu;i.setCrossOrigin(this.crossOrigin);const o=i.load(t,n,void 0,r);return e&&(o.mapping=e),o},Vn.loadTextureCube=function(t,e,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const i=new Xu;i.setCrossOrigin(this.crossOrigin);const o=i.load(t,n,void 0,r);return e&&(o.mapping=e),o},Vn.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Vn.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};const Af={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};function Lf(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:r}}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r,i,o,a=n(0);function s(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}Object.assign(s.prototype,{setSize:function(){},render:function(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}),s.FullScreenQuad=(r=new a.OrthographicCamera(-1,1,1,-1,0,1),i=new a.PlaneBufferGeometry(2,2),o=function(t){this._mesh=new a.Mesh(i,t)},Object.defineProperty(o.prototype,"material",{get:function(){return this._mesh.material},set:function(t){this._mesh.material=t}}),Object.assign(o.prototype,{dispose:function(){this._mesh.geometry.dispose()},render:function(t){t.render(this._mesh,r)}}),o)},function(t,e,n){"use strict";n.r(e),n.d(e,"ShaderPass",(function(){return o}));var r=n(0),i=n(1),o=function(t,e){i.a.call(this),this.textureID=void 0!==e?e:"tDiffuse",t instanceof r.ShaderMaterial?(this.uniforms=t.uniforms,this.material=t):t&&(this.uniforms=r.UniformsUtils.clone(t.uniforms),this.material=new r.ShaderMaterial({defines:Object.assign({},t.defines),uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader})),this.fsQuad=new i.a.FullScreenQuad(this.material)};o.prototype=Object.assign(Object.create(i.a.prototype),{constructor:o,render:function(t,e,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(e),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),this.fsQuad.render(t))}})},function(t,e,n){"use strict";n.r(e),n.d(e,"GLTFLoader",(function(){return i}));var r=n(0),i=function(){function t(t){r.Loader.call(this,t),this.dracoLoader=null,this.ddsLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(t){return new s(t)})),this.register((function(t){return new l(t)})),this.register((function(t){return new u(t)})),this.register((function(t){return new c(t)})),this.register((function(t){return new o(t)})),this.register((function(t){return new h(t)}))}function e(){var t={};return{get:function(e){return t[e]},add:function(e,n){t[e]=n},remove:function(e){delete t[e]},removeAll:function(){t={}}}}t.prototype=Object.assign(Object.create(r.Loader.prototype),{constructor:t,load:function(t,e,n,i){var o,a=this;o=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:r.LoaderUtils.extractUrlBase(t),this.manager.itemStart(t);var s=function(e){i?i(e):console.error(e),a.manager.itemError(t),a.manager.itemEnd(t)},c=new r.FileLoader(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(t,(function(n){try{a.parse(n,o,(function(n){e(n),a.manager.itemEnd(t)}),s)}catch(t){s(t)}}),n,s)},setDRACOLoader:function(t){return this.dracoLoader=t,this},setDDSLoader:function(t){return this.ddsLoader=t,this},setKTX2Loader:function(t){return this.ktx2Loader=t,this},setMeshoptDecoder:function(t){return this.meshoptDecoder=t,this},register:function(t){return-1===this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.push(t),this},unregister:function(t){return-1!==this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this},parse:function(t,e,o,s){var c,l={},u={};if("string"==typeof t)c=t;else if(r.LoaderUtils.decodeText(new Uint8Array(t,0,4))===d){try{l[n.KHR_BINARY_GLTF]=new m(t)}catch(t){return void(s&&s(t))}c=l[n.KHR_BINARY_GLTF].content}else c=r.LoaderUtils.decodeText(new Uint8Array(t));var h=JSON.parse(c);if(void 0===h.asset||h.asset.version[0]<2)s&&s(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{var p=new j(h,{path:e||this.resourcePath||"",crossOrigin:this.crossOrigin,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});p.fileLoader.setRequestHeader(this.requestHeader);for(var f=0;f<this.pluginCallbacks.length;f++){var y=this.pluginCallbacks[f](p);u[y.name]=y,l[y.name]=!0}if(h.extensionsUsed)for(f=0;f<h.extensionsUsed.length;++f){var w=h.extensionsUsed[f],_=h.extensionsRequired||[];switch(w){case n.KHR_MATERIALS_UNLIT:l[w]=new a;break;case n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:l[w]=new x;break;case n.KHR_DRACO_MESH_COMPRESSION:l[w]=new g(h,this.dracoLoader);break;case n.MSFT_TEXTURE_DDS:l[w]=new i(this.ddsLoader);break;case n.KHR_TEXTURE_TRANSFORM:l[w]=new v;break;case n.KHR_MESH_QUANTIZATION:l[w]=new b;break;default:_.indexOf(w)>=0&&void 0===u[w]&&console.warn('THREE.GLTFLoader: Unknown extension "'+w+'".')}}p.setExtensions(l),p.setPlugins(u),p.parse(o,s)}}});var n={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};function i(t){if(!t)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing DDSLoader");this.name=n.MSFT_TEXTURE_DDS,this.ddsLoader=t}function o(t){this.parser=t,this.name=n.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}function a(){this.name=n.KHR_MATERIALS_UNLIT}function s(t){this.parser=t,this.name=n.KHR_MATERIALS_CLEARCOAT}function c(t){this.parser=t,this.name=n.KHR_MATERIALS_TRANSMISSION}function l(t){this.parser=t,this.name=n.KHR_TEXTURE_BASISU}function u(t){this.parser=t,this.name=n.EXT_TEXTURE_WEBP,this.isSupported=null}function h(t){this.name=n.EXT_MESHOPT_COMPRESSION,this.parser=t}o.prototype._markDefs=function(){for(var t=this.parser,e=this.parser.json.nodes||[],n=0,r=e.length;n<r;n++){var i=e[n];i.extensions&&i.extensions[this.name]&&void 0!==i.extensions[this.name].light&&t._addNodeRef(this.cache,i.extensions[this.name].light)}},o.prototype._loadLight=function(t){var e=this.parser,n="light:"+t,i=e.cache.get(n);if(i)return i;var o,a=e.json,s=((a.extensions&&a.extensions[this.name]||{}).lights||[])[t],c=new r.Color(16777215);void 0!==s.color&&c.fromArray(s.color);var l=void 0!==s.range?s.range:0;switch(s.type){case"directional":(o=new r.DirectionalLight(c)).target.position.set(0,0,-1),o.add(o.target);break;case"point":(o=new r.PointLight(c)).distance=l;break;case"spot":(o=new r.SpotLight(c)).distance=l,s.spot=s.spot||{},s.spot.innerConeAngle=void 0!==s.spot.innerConeAngle?s.spot.innerConeAngle:0,s.spot.outerConeAngle=void 0!==s.spot.outerConeAngle?s.spot.outerConeAngle:Math.PI/4,o.angle=s.spot.outerConeAngle,o.penumbra=1-s.spot.innerConeAngle/s.spot.outerConeAngle,o.target.position.set(0,0,-1),o.add(o.target);break;default:throw new Error('THREE.GLTFLoader: Unexpected light type, "'+s.type+'".')}return o.position.set(0,0,0),o.decay=2,void 0!==s.intensity&&(o.intensity=s.intensity),o.name=e.createUniqueName(s.name||"light_"+t),i=Promise.resolve(o),e.cache.add(n,i),i},o.prototype.createNodeAttachment=function(t){var e=this,n=this.parser,r=n.json.nodes[t],i=(r.extensions&&r.extensions[this.name]||{}).light;return void 0===i?null:this._loadLight(i).then((function(t){return n._getNodeRef(e.cache,i,t)}))},a.prototype.getMaterialType=function(){return r.MeshBasicMaterial},a.prototype.extendParams=function(t,e,n){var i=[];t.color=new r.Color(1,1,1),t.opacity=1;var o=e.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){var a=o.baseColorFactor;t.color.fromArray(a),t.opacity=a[3]}void 0!==o.baseColorTexture&&i.push(n.assignTexture(t,"map",o.baseColorTexture))}return Promise.all(i)},s.prototype.getMaterialType=function(t){var e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?r.MeshPhysicalMaterial:null},s.prototype.extendMaterialParams=function(t,e){var n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();var o=[],a=i.extensions[this.name];if(void 0!==a.clearcoatFactor&&(e.clearcoat=a.clearcoatFactor),void 0!==a.clearcoatTexture&&o.push(n.assignTexture(e,"clearcoatMap",a.clearcoatTexture)),void 0!==a.clearcoatRoughnessFactor&&(e.clearcoatRoughness=a.clearcoatRoughnessFactor),void 0!==a.clearcoatRoughnessTexture&&o.push(n.assignTexture(e,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),void 0!==a.clearcoatNormalTexture&&(o.push(n.assignTexture(e,"clearcoatNormalMap",a.clearcoatNormalTexture)),void 0!==a.clearcoatNormalTexture.scale)){var s=a.clearcoatNormalTexture.scale;e.clearcoatNormalScale=new r.Vector2(s,s)}return Promise.all(o)},c.prototype.getMaterialType=function(t){var e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?r.MeshPhysicalMaterial:null},c.prototype.extendMaterialParams=function(t,e){var n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[],o=r.extensions[this.name];return void 0!==o.transmissionFactor&&(e.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&i.push(n.assignTexture(e,"transmissionMap",o.transmissionTexture)),Promise.all(i)},l.prototype.loadTexture=function(t){var e=this.parser,n=e.json,r=n.textures[t];if(!r.extensions||!r.extensions[this.name])return null;var i=r.extensions[this.name],o=n.images[i.source],a=e.options.ktx2Loader;if(!a){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return e.loadTextureImage(t,o,a)},u.prototype.loadTexture=function(t){var e=this.name,n=this.parser,r=n.json,i=r.textures[t];if(!i.extensions||!i.extensions[e])return null;var o=i.extensions[e],a=r.images[o.source],s=a.uri?n.options.manager.getHandler(a.uri):n.textureLoader;return this.detectSupport().then((function(i){if(i)return n.loadTextureImage(t,a,s);if(r.extensionsRequired&&r.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(t)}))},u.prototype.detectSupport=function(){return this.isSupported||(this.isSupported=new Promise((function(t){var e=new Image;e.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",e.onload=e.onerror=function(){t(1===e.height)}}))),this.isSupported},h.prototype.loadBufferView=function(t){var e=this.parser.json,n=e.bufferViews[t];if(n.extensions&&n.extensions[this.name]){var r=n.extensions[this.name],i=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(e.extensionsRequired&&e.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([i,o.ready]).then((function(t){var e=r.byteOffset||0,n=r.byteLength||0,i=r.count,a=r.byteStride,s=new ArrayBuffer(i*a),c=new Uint8Array(t[0],e,n);return o.decodeGltfBuffer(new Uint8Array(s),i,a,c,r.mode,r.filter),s}))}return null};var d="glTF",p=1313821514,f=5130562;function m(t){this.name=n.KHR_BINARY_GLTF,this.content=null,this.body=null;var e=new DataView(t,0,12);if(this.header={magic:r.LoaderUtils.decodeText(new Uint8Array(t.slice(0,4))),version:e.getUint32(4,!0),length:e.getUint32(8,!0)},this.header.magic!==d)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");for(var i=new DataView(t,12),o=0;o<i.byteLength;){var a=i.getUint32(o,!0);o+=4;var s=i.getUint32(o,!0);if(o+=4,s===p){var c=new Uint8Array(t,12+o,a);this.content=r.LoaderUtils.decodeText(c)}else if(s===f){var l=12+o;this.body=t.slice(l,l+a)}o+=a}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}function g(t,e){if(!e)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=n.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=e,this.dracoLoader.preload()}function v(){this.name=n.KHR_TEXTURE_TRANSFORM}function y(t){r.MeshStandardMaterial.call(this),this.isGLTFSpecularGlossinessMaterial=!0;var e=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),n=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),i=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),o=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),a=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.specularRoughness += geometryRoughness;","material.specularRoughness = min( material.specularRoughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),s={specular:{value:(new r.Color).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=s,this.onBeforeCompile=function(t){for(var r in s)t.uniforms[r]=s[r];t.fragmentShader=t.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",e).replace("#include <metalnessmap_pars_fragment>",n).replace("#include <roughnessmap_fragment>",i).replace("#include <metalnessmap_fragment>",o).replace("#include <lights_physical_fragment>",a)},Object.defineProperties(this,{specular:{get:function(){return s.specular.value},set:function(t){s.specular.value=t}},specularMap:{get:function(){return s.specularMap.value},set:function(t){s.specularMap.value=t,t?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return s.glossiness.value},set:function(t){s.glossiness.value=t}},glossinessMap:{get:function(){return s.glossinessMap.value},set:function(t){s.glossinessMap.value=t,t?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(t)}function x(){return{name:n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return y},extendParams:function(t,e,n){var i=e.extensions[this.name];t.color=new r.Color(1,1,1),t.opacity=1;var o=[];if(Array.isArray(i.diffuseFactor)){var a=i.diffuseFactor;t.color.fromArray(a),t.opacity=a[3]}if(void 0!==i.diffuseTexture&&o.push(n.assignTexture(t,"map",i.diffuseTexture)),t.emissive=new r.Color(0,0,0),t.glossiness=void 0!==i.glossinessFactor?i.glossinessFactor:1,t.specular=new r.Color(1,1,1),Array.isArray(i.specularFactor)&&t.specular.fromArray(i.specularFactor),void 0!==i.specularGlossinessTexture){var s=i.specularGlossinessTexture;o.push(n.assignTexture(t,"glossinessMap",s)),o.push(n.assignTexture(t,"specularMap",s))}return Promise.all(o)},createMaterial:function(t){var e=new y(t);return e.fog=!0,e.color=t.color,e.map=void 0===t.map?null:t.map,e.lightMap=null,e.lightMapIntensity=1,e.aoMap=void 0===t.aoMap?null:t.aoMap,e.aoMapIntensity=1,e.emissive=t.emissive,e.emissiveIntensity=1,e.emissiveMap=void 0===t.emissiveMap?null:t.emissiveMap,e.bumpMap=void 0===t.bumpMap?null:t.bumpMap,e.bumpScale=1,e.normalMap=void 0===t.normalMap?null:t.normalMap,e.normalMapType=r.TangentSpaceNormalMap,t.normalScale&&(e.normalScale=t.normalScale),e.displacementMap=null,e.displacementScale=1,e.displacementBias=0,e.specularMap=void 0===t.specularMap?null:t.specularMap,e.specular=t.specular,e.glossinessMap=void 0===t.glossinessMap?null:t.glossinessMap,e.glossiness=t.glossiness,e.alphaMap=null,e.envMap=void 0===t.envMap?null:t.envMap,e.envMapIntensity=1,e.refractionRatio=.98,e}}}function b(){this.name=n.KHR_MESH_QUANTIZATION}function w(t,e,n,i){r.Interpolant.call(this,t,e,n,i)}g.prototype.decodePrimitive=function(t,e){var n=this.json,r=this.dracoLoader,i=t.extensions[this.name].bufferView,o=t.extensions[this.name].attributes,a={},s={},c={};for(var l in o){var u=O[l]||l.toLowerCase();a[u]=o[l]}for(l in t.attributes){u=O[l]||l.toLowerCase();if(void 0!==o[l]){var h=n.accessors[t.attributes[l]],d=R[h.componentType];c[u]=d,s[u]=!0===h.normalized}}return e.getDependency("bufferView",i).then((function(t){return new Promise((function(e){r.decodeDracoFile(t,(function(t){for(var n in t.attributes){var r=t.attributes[n],i=s[n];void 0!==i&&(r.normalized=i)}e(t)}),a,c)}))}))},v.prototype.extendTexture=function(t,e){return t=t.clone(),void 0!==e.offset&&t.offset.fromArray(e.offset),void 0!==e.rotation&&(t.rotation=e.rotation),void 0!==e.scale&&t.repeat.fromArray(e.scale),void 0!==e.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),t.needsUpdate=!0,t},y.prototype=Object.create(r.MeshStandardMaterial.prototype),y.prototype.constructor=y,y.prototype.copy=function(t){return r.MeshStandardMaterial.prototype.copy.call(this,t),this.specularMap=t.specularMap,this.specular.copy(t.specular),this.glossinessMap=t.glossinessMap,this.glossiness=t.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this},w.prototype=Object.create(r.Interpolant.prototype),w.prototype.constructor=w,w.prototype.copySampleValue_=function(t){for(var e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=t*r*3+r,o=0;o!==r;o++)e[o]=n[i+o];return e},w.prototype.beforeStart_=w.prototype.copySampleValue_,w.prototype.afterEnd_=w.prototype.copySampleValue_,w.prototype.interpolate_=function(t,e,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=2*a,c=3*a,l=r-e,u=(n-e)/l,h=u*u,d=h*u,p=t*c,f=p-c,m=-2*d+3*h,g=d-h,v=1-m,y=g-h+u,x=0;x!==a;x++){var b=o[f+x+a],w=o[f+x+s]*l,_=o[p+x+a],M=o[p+x]*l;i[x]=v*b+y*w+m*_+g*M}return i};var _=0,M=1,S=2,T=3,E=4,A=5,L=6,R={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},P={9728:r.NearestFilter,9729:r.LinearFilter,9984:r.NearestMipmapNearestFilter,9985:r.LinearMipmapNearestFilter,9986:r.NearestMipmapLinearFilter,9987:r.LinearMipmapLinearFilter},C={33071:r.ClampToEdgeWrapping,33648:r.MirroredRepeatWrapping,10497:r.RepeatWrapping},I={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},O={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},N={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},D={CUBICSPLINE:void 0,LINEAR:r.InterpolateLinear,STEP:r.InterpolateDiscrete},B="OPAQUE",F="MASK",U="BLEND";function z(t,e){return"string"!=typeof t||""===t?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}function G(t,e,n){for(var r in n.extensions)void 0===t[r]&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=n.extensions[r])}function H(t,e){void 0!==e.extras&&("object"==typeof e.extras?Object.assign(t.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function k(t,e){if(t.updateMorphTargets(),void 0!==e.weights)for(var n=0,r=e.weights.length;n<r;n++)t.morphTargetInfluences[n]=e.weights[n];if(e.extras&&Array.isArray(e.extras.targetNames)){var i=e.extras.targetNames;if(t.morphTargetInfluences.length===i.length){t.morphTargetDictionary={};for(n=0,r=i.length;n<r;n++)t.morphTargetDictionary[i[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function V(t){for(var e="",n=Object.keys(t).sort(),r=0,i=n.length;r<i;r++)e+=n[r]+":"+t[n[r]]+";";return e}function j(t,n){this.json=t||{},this.extensions={},this.plugins={},this.options=n||{},this.cache=new e,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.nodeNamesUsed={},"undefined"!=typeof createImageBitmap&&!1===/Firefox/.test(navigator.userAgent)?this.textureLoader=new r.ImageBitmapLoader(this.options.manager):this.textureLoader=new r.TextureLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new r.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}function W(t,e,n){var i=e.attributes,o=[];function a(e,r){return n.getDependency("accessor",e).then((function(e){t.setAttribute(r,e)}))}for(var s in i){var c=O[s]||s.toLowerCase();c in t.attributes||o.push(a(i[s],c))}if(void 0!==e.indices&&!t.index){var l=n.getDependency("accessor",e.indices).then((function(e){t.setIndex(e)}));o.push(l)}return H(t,e),function(t,e,n){var i=e.attributes,o=new r.Box3;if(void 0!==i.POSITION){var a=(f=n.json.accessors[i.POSITION]).min,s=f.max;if(void 0!==a&&void 0!==s){o.set(new r.Vector3(a[0],a[1],a[2]),new r.Vector3(s[0],s[1],s[2]));var c=e.targets;if(void 0!==c){for(var l=new r.Vector3,u=new r.Vector3,h=0,d=c.length;h<d;h++){var p=c[h];if(void 0!==p.POSITION){var f;a=(f=n.json.accessors[p.POSITION]).min,s=f.max;void 0!==a&&void 0!==s?(u.setX(Math.max(Math.abs(a[0]),Math.abs(s[0]))),u.setY(Math.max(Math.abs(a[1]),Math.abs(s[1]))),u.setZ(Math.max(Math.abs(a[2]),Math.abs(s[2]))),l.max(u)):console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}o.expandByVector(l)}t.boundingBox=o;var m=new r.Sphere;o.getCenter(m.center),m.radius=o.min.distanceTo(o.max)/2,t.boundingSphere=m}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}(t,e,n),Promise.all(o).then((function(){return void 0!==e.targets?function(t,e,n){for(var r=!1,i=!1,o=0,a=e.length;o<a;o++){if(void 0!==(l=e[o]).POSITION&&(r=!0),void 0!==l.NORMAL&&(i=!0),r&&i)break}if(!r&&!i)return Promise.resolve(t);var s=[],c=[];for(o=0,a=e.length;o<a;o++){var l=e[o];if(r){var u=void 0!==l.POSITION?n.getDependency("accessor",l.POSITION):t.attributes.position;s.push(u)}if(i){u=void 0!==l.NORMAL?n.getDependency("accessor",l.NORMAL):t.attributes.normal;c.push(u)}}return Promise.all([Promise.all(s),Promise.all(c)]).then((function(e){var n=e[0],o=e[1];return r&&(t.morphAttributes.position=n),i&&(t.morphAttributes.normal=o),t.morphTargetsRelative=!0,t}))}(t,e.targets,n):t}))}function X(t,e){var n=t.getIndex();if(null===n){var i=[],o=t.getAttribute("position");if(void 0===o)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),t;for(var a=0;a<o.count;a++)i.push(a);t.setIndex(i),n=t.getIndex()}var s=n.count-2,c=[];if(e===r.TriangleFanDrawMode)for(a=1;a<=s;a++)c.push(n.getX(0)),c.push(n.getX(a)),c.push(n.getX(a+1));else for(a=0;a<s;a++)a%2==0?(c.push(n.getX(a)),c.push(n.getX(a+1)),c.push(n.getX(a+2))):(c.push(n.getX(a+2)),c.push(n.getX(a+1)),c.push(n.getX(a)));c.length/3!==s&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var l=t.clone();return l.setIndex(c),l}return j.prototype.setExtensions=function(t){this.extensions=t},j.prototype.setPlugins=function(t){this.plugins=t},j.prototype.parse=function(t,e){var n=this,r=this.json,i=this.extensions;this.cache.removeAll(),this._invokeAll((function(t){return t._markDefs&&t._markDefs()})),Promise.all([this.getDependencies("scene"),this.getDependencies("animation"),this.getDependencies("camera")]).then((function(e){var o={scene:e[0][r.scene||0],scenes:e[0],animations:e[1],cameras:e[2],asset:r.asset,parser:n,userData:{}};G(i,o,r),H(o,r),t(o)})).catch(e)},j.prototype._markDefs=function(){for(var t=this.json.nodes||[],e=this.json.skins||[],n=this.json.meshes||[],r=0,i=e.length;r<i;r++)for(var o=e[r].joints,a=0,s=o.length;a<s;a++)t[o[a]].isBone=!0;for(var c=0,l=t.length;c<l;c++){var u=t[c];void 0!==u.mesh&&(this._addNodeRef(this.meshCache,u.mesh),void 0!==u.skin&&(n[u.mesh].isSkinnedMesh=!0)),void 0!==u.camera&&this._addNodeRef(this.cameraCache,u.camera)}},j.prototype._addNodeRef=function(t,e){void 0!==e&&(void 0===t.refs[e]&&(t.refs[e]=t.uses[e]=0),t.refs[e]++)},j.prototype._getNodeRef=function(t,e,n){if(t.refs[e]<=1)return n;var r=n.clone();return r.name+="_instance_"+t.uses[e]++,r},j.prototype._invokeOne=function(t){var e=Object.values(this.plugins);e.push(this);for(var n=0;n<e.length;n++){var r=t(e[n]);if(r)return r}},j.prototype._invokeAll=function(t){var e=Object.values(this.plugins);e.unshift(this);for(var n=[],r=0;r<e.length;r++){var i=t(e[r]);i&&n.push(i)}return n},j.prototype.getDependency=function(t,e){var n=t+":"+e,r=this.cache.get(n);if(!r){switch(t){case"scene":r=this.loadScene(e);break;case"node":r=this.loadNode(e);break;case"mesh":r=this._invokeOne((function(t){return t.loadMesh&&t.loadMesh(e)}));break;case"accessor":r=this.loadAccessor(e);break;case"bufferView":r=this._invokeOne((function(t){return t.loadBufferView&&t.loadBufferView(e)}));break;case"buffer":r=this.loadBuffer(e);break;case"material":r=this._invokeOne((function(t){return t.loadMaterial&&t.loadMaterial(e)}));break;case"texture":r=this._invokeOne((function(t){return t.loadTexture&&t.loadTexture(e)}));break;case"skin":r=this.loadSkin(e);break;case"animation":r=this.loadAnimation(e);break;case"camera":r=this.loadCamera(e);break;default:throw new Error("Unknown type: "+t)}this.cache.add(n,r)}return r},j.prototype.getDependencies=function(t){var e=this.cache.get(t);if(!e){var n=this,r=this.json[t+("mesh"===t?"es":"s")]||[];e=Promise.all(r.map((function(e,r){return n.getDependency(t,r)}))),this.cache.add(t,e)}return e},j.prototype.loadBuffer=function(t){var e=this.json.buffers[t],r=this.fileLoader;if(e.type&&"arraybuffer"!==e.type)throw new Error("THREE.GLTFLoader: "+e.type+" buffer type is not supported.");if(void 0===e.uri&&0===t)return Promise.resolve(this.extensions[n.KHR_BINARY_GLTF].body);var i=this.options;return new Promise((function(t,n){r.load(z(e.uri,i.path),t,void 0,(function(){n(new Error('THREE.GLTFLoader: Failed to load buffer "'+e.uri+'".'))}))}))},j.prototype.loadBufferView=function(t){var e=this.json.bufferViews[t];return this.getDependency("buffer",e.buffer).then((function(t){var n=e.byteLength||0,r=e.byteOffset||0;return t.slice(r,r+n)}))},j.prototype.loadAccessor=function(t){var e=this,n=this.json,i=this.json.accessors[t];if(void 0===i.bufferView&&void 0===i.sparse)return Promise.resolve(null);var o=[];return void 0!==i.bufferView?o.push(this.getDependency("bufferView",i.bufferView)):o.push(null),void 0!==i.sparse&&(o.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(o).then((function(t){var o,a,s=t[0],c=I[i.type],l=R[i.componentType],u=l.BYTES_PER_ELEMENT,h=u*c,d=i.byteOffset||0,p=void 0!==i.bufferView?n.bufferViews[i.bufferView].byteStride:void 0,f=!0===i.normalized;if(p&&p!==h){var m=Math.floor(d/p),g="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+m+":"+i.count,v=e.cache.get(g);v||(o=new l(s,m*p,i.count*p/u),v=new r.InterleavedBuffer(o,p/u),e.cache.add(g,v)),a=new r.InterleavedBufferAttribute(v,c,d%p/u,f)}else o=null===s?new l(i.count*c):new l(s,d,i.count*c),a=new r.BufferAttribute(o,c,f);if(void 0!==i.sparse){var y=I.SCALAR,x=R[i.sparse.indices.componentType],b=i.sparse.indices.byteOffset||0,w=i.sparse.values.byteOffset||0,_=new x(t[1],b,i.sparse.count*y),M=new l(t[2],w,i.sparse.count*c);null!==s&&(a=new r.BufferAttribute(a.array.slice(),a.itemSize,a.normalized));for(var S=0,T=_.length;S<T;S++){var E=_[S];if(a.setX(E,M[S*c]),c>=2&&a.setY(E,M[S*c+1]),c>=3&&a.setZ(E,M[S*c+2]),c>=4&&a.setW(E,M[S*c+3]),c>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return a}))},j.prototype.loadTexture=function(t){var e,r,i=this.json,o=this.options,a=i.textures[t],s=a.extensions||{};return(e=s[n.MSFT_TEXTURE_DDS]?i.images[s[n.MSFT_TEXTURE_DDS].source]:i.images[a.source]).uri&&(r=o.manager.getHandler(e.uri)),r||(r=s[n.MSFT_TEXTURE_DDS]?this.extensions[n.MSFT_TEXTURE_DDS].ddsLoader:this.textureLoader),this.loadTextureImage(t,e,r)},j.prototype.loadTextureImage=function(t,e,n){var i=this,o=this.json,a=this.options,s=o.textures[t],c=self.URL||self.webkitURL,l=e.uri,u=!1,h=!0;return"image/jpeg"===e.mimeType&&(h=!1),void 0!==e.bufferView&&(l=i.getDependency("bufferView",e.bufferView).then((function(t){if("image/png"===e.mimeType){var n=new DataView(t,25,1).getUint8(0,!1);h=6===n||4===n||3===n}u=!0;var r=new Blob([t],{type:e.mimeType});return l=c.createObjectURL(r)}))),Promise.resolve(l).then((function(t){return new Promise((function(e,i){var o=e;!0===n.isImageBitmapLoader&&(o=function(t){e(new r.CanvasTexture(t))}),n.load(z(t,a.path),o,void 0,i)}))})).then((function(e){!0===u&&c.revokeObjectURL(l),e.flipY=!1,s.name&&(e.name=s.name),h||(e.format=r.RGBFormat);var n=(o.samplers||{})[s.sampler]||{};return e.magFilter=P[n.magFilter]||r.LinearFilter,e.minFilter=P[n.minFilter]||r.LinearMipmapLinearFilter,e.wrapS=C[n.wrapS]||r.RepeatWrapping,e.wrapT=C[n.wrapT]||r.RepeatWrapping,i.associations.set(e,{type:"textures",index:t}),e}))},j.prototype.assignTexture=function(t,e,r){var i=this;return this.getDependency("texture",r.index).then((function(o){if(void 0===r.texCoord||0==r.texCoord||"aoMap"===e&&1==r.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+r.texCoord+" for texture "+e+" not yet supported."),i.extensions[n.KHR_TEXTURE_TRANSFORM]){var a=void 0!==r.extensions?r.extensions[n.KHR_TEXTURE_TRANSFORM]:void 0;if(a){var s=i.associations.get(o);o=i.extensions[n.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),i.associations.set(o,s)}}t[e]=o}))},j.prototype.assignFinalMaterial=function(t){var e=t.geometry,n=t.material,i=void 0!==e.attributes.tangent,o=void 0!==e.attributes.color,a=void 0===e.attributes.normal,s=!0===t.isSkinnedMesh,c=Object.keys(e.morphAttributes).length>0,l=c&&void 0!==e.morphAttributes.normal;if(t.isPoints){var u="PointsMaterial:"+n.uuid,h=this.cache.get(u);h||(h=new r.PointsMaterial,r.Material.prototype.copy.call(h,n),h.color.copy(n.color),h.map=n.map,h.sizeAttenuation=!1,this.cache.add(u,h)),n=h}else if(t.isLine){u="LineBasicMaterial:"+n.uuid;var d=this.cache.get(u);d||(d=new r.LineBasicMaterial,r.Material.prototype.copy.call(d,n),d.color.copy(n.color),this.cache.add(u,d)),n=d}if(i||o||a||s||c){u="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(u+="specular-glossiness:"),s&&(u+="skinning:"),i&&(u+="vertex-tangents:"),o&&(u+="vertex-colors:"),a&&(u+="flat-shading:"),c&&(u+="morph-targets:"),l&&(u+="morph-normals:");var p=this.cache.get(u);p||(p=n.clone(),s&&(p.skinning=!0),i&&(p.vertexTangents=!0),o&&(p.vertexColors=!0),a&&(p.flatShading=!0),c&&(p.morphTargets=!0),l&&(p.morphNormals=!0),this.cache.add(u,p),this.associations.set(p,this.associations.get(n))),n=p}n.aoMap&&void 0===e.attributes.uv2&&void 0!==e.attributes.uv&&e.setAttribute("uv2",e.attributes.uv),n.normalScale&&!i&&(n.normalScale.y=-n.normalScale.y),n.clearcoatNormalScale&&!i&&(n.clearcoatNormalScale.y=-n.clearcoatNormalScale.y),t.material=n},j.prototype.getMaterialType=function(){return r.MeshStandardMaterial},j.prototype.loadMaterial=function(t){var e,i=this,o=this.json,a=this.extensions,s=o.materials[t],c={},l=s.extensions||{},u=[];if(l[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var h=a[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];e=h.getMaterialType(),u.push(h.extendParams(c,s,i))}else if(l[n.KHR_MATERIALS_UNLIT]){var d=a[n.KHR_MATERIALS_UNLIT];e=d.getMaterialType(),u.push(d.extendParams(c,s,i))}else{var p=s.pbrMetallicRoughness||{};if(c.color=new r.Color(1,1,1),c.opacity=1,Array.isArray(p.baseColorFactor)){var f=p.baseColorFactor;c.color.fromArray(f),c.opacity=f[3]}void 0!==p.baseColorTexture&&u.push(i.assignTexture(c,"map",p.baseColorTexture)),c.metalness=void 0!==p.metallicFactor?p.metallicFactor:1,c.roughness=void 0!==p.roughnessFactor?p.roughnessFactor:1,void 0!==p.metallicRoughnessTexture&&(u.push(i.assignTexture(c,"metalnessMap",p.metallicRoughnessTexture)),u.push(i.assignTexture(c,"roughnessMap",p.metallicRoughnessTexture))),e=this._invokeOne((function(e){return e.getMaterialType&&e.getMaterialType(t)})),u.push(Promise.all(this._invokeAll((function(e){return e.extendMaterialParams&&e.extendMaterialParams(t,c)}))))}!0===s.doubleSided&&(c.side=r.DoubleSide);var m=s.alphaMode||B;return m===U?(c.transparent=!0,c.depthWrite=!1):(c.transparent=!1,m===F&&(c.alphaTest=void 0!==s.alphaCutoff?s.alphaCutoff:.5)),void 0!==s.normalTexture&&e!==r.MeshBasicMaterial&&(u.push(i.assignTexture(c,"normalMap",s.normalTexture)),c.normalScale=new r.Vector2(1,1),void 0!==s.normalTexture.scale&&c.normalScale.set(s.normalTexture.scale,s.normalTexture.scale)),void 0!==s.occlusionTexture&&e!==r.MeshBasicMaterial&&(u.push(i.assignTexture(c,"aoMap",s.occlusionTexture)),void 0!==s.occlusionTexture.strength&&(c.aoMapIntensity=s.occlusionTexture.strength)),void 0!==s.emissiveFactor&&e!==r.MeshBasicMaterial&&(c.emissive=(new r.Color).fromArray(s.emissiveFactor)),void 0!==s.emissiveTexture&&e!==r.MeshBasicMaterial&&u.push(i.assignTexture(c,"emissiveMap",s.emissiveTexture)),Promise.all(u).then((function(){var o;return o=e===y?a[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(c):new e(c),s.name&&(o.name=s.name),o.map&&(o.map.encoding=r.sRGBEncoding),o.emissiveMap&&(o.emissiveMap.encoding=r.sRGBEncoding),H(o,s),i.associations.set(o,{type:"materials",index:t}),s.extensions&&G(a,o,s),o}))},j.prototype.createUniqueName=function(t){for(var e=r.PropertyBinding.sanitizeNodeName(t||""),n=1;this.nodeNamesUsed[e];++n)e=t+"_"+n;return this.nodeNamesUsed[e]=!0,e},j.prototype.loadGeometries=function(t){var e=this,i=this.extensions,o=this.primitiveCache;function a(t){return i[n.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(t,e).then((function(n){return W(n,t,e)}))}for(var s,c,l=[],u=0,h=t.length;u<h;u++){var d,p=t[u],f=(c=void 0,(c=(s=p).extensions&&s.extensions[n.KHR_DRACO_MESH_COMPRESSION])?"draco:"+c.bufferView+":"+c.indices+":"+V(c.attributes):s.indices+":"+V(s.attributes)+":"+s.mode),m=o[f];if(m)l.push(m.promise);else d=p.extensions&&p.extensions[n.KHR_DRACO_MESH_COMPRESSION]?a(p):W(new r.BufferGeometry,p,e),o[f]={primitive:p,promise:d},l.push(d)}return Promise.all(l)},j.prototype.loadMesh=function(t){for(var e,n=this,i=this.json,o=this.extensions,a=i.meshes[t],s=a.primitives,c=[],l=0,u=s.length;l<u;l++){var h=void 0===s[l].material?(void 0===(e=this.cache).DefaultMaterial&&(e.DefaultMaterial=new r.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:r.FrontSide})),e.DefaultMaterial):this.getDependency("material",s[l].material);c.push(h)}return c.push(n.loadGeometries(s)),Promise.all(c).then((function(e){for(var i=e.slice(0,e.length-1),c=e[e.length-1],l=[],u=0,h=c.length;u<h;u++){var d,p=c[u],f=s[u],m=i[u];if(f.mode===E||f.mode===A||f.mode===L||void 0===f.mode)!0!==(d=!0===a.isSkinnedMesh?new r.SkinnedMesh(p,m):new r.Mesh(p,m)).isSkinnedMesh||d.geometry.attributes.skinWeight.normalized||d.normalizeSkinWeights(),f.mode===A?d.geometry=X(d.geometry,r.TriangleStripDrawMode):f.mode===L&&(d.geometry=X(d.geometry,r.TriangleFanDrawMode));else if(f.mode===M)d=new r.LineSegments(p,m);else if(f.mode===T)d=new r.Line(p,m);else if(f.mode===S)d=new r.LineLoop(p,m);else{if(f.mode!==_)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+f.mode);d=new r.Points(p,m)}Object.keys(d.geometry.morphAttributes).length>0&&k(d,a),d.name=n.createUniqueName(a.name||"mesh_"+t),H(d,a),f.extensions&&G(o,d,f),n.assignFinalMaterial(d),l.push(d)}if(1===l.length)return l[0];var g=new r.Group;for(u=0,h=l.length;u<h;u++)g.add(l[u]);return g}))},j.prototype.loadCamera=function(t){var e,n=this.json.cameras[t],i=n[n.type];if(i)return"perspective"===n.type?e=new r.PerspectiveCamera(r.MathUtils.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):"orthographic"===n.type&&(e=new r.OrthographicCamera(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),n.name&&(e.name=this.createUniqueName(n.name)),H(e,n),Promise.resolve(e);console.warn("THREE.GLTFLoader: Missing camera parameters.")},j.prototype.loadSkin=function(t){var e=this.json.skins[t],n={joints:e.joints};return void 0===e.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",e.inverseBindMatrices).then((function(t){return n.inverseBindMatrices=t,n}))},j.prototype.loadAnimation=function(t){for(var e=this.json.animations[t],n=[],i=[],o=[],a=[],s=[],c=0,l=e.channels.length;c<l;c++){var u=e.channels[c],h=e.samplers[u.sampler],d=u.target,p=void 0!==d.node?d.node:d.id,f=void 0!==e.parameters?e.parameters[h.input]:h.input,m=void 0!==e.parameters?e.parameters[h.output]:h.output;n.push(this.getDependency("node",p)),i.push(this.getDependency("accessor",f)),o.push(this.getDependency("accessor",m)),a.push(h),s.push(d)}return Promise.all([Promise.all(n),Promise.all(i),Promise.all(o),Promise.all(a),Promise.all(s)]).then((function(n){for(var i=n[0],o=n[1],a=n[2],s=n[3],c=n[4],l=[],u=0,h=i.length;u<h;u++){var d=i[u],p=o[u],f=a[u],m=s[u],g=c[u];if(void 0!==d){var v;switch(d.updateMatrix(),d.matrixAutoUpdate=!0,N[g.path]){case N.weights:v=r.NumberKeyframeTrack;break;case N.rotation:v=r.QuaternionKeyframeTrack;break;case N.position:case N.scale:default:v=r.VectorKeyframeTrack}var y=d.name?d.name:d.uuid,x=void 0!==m.interpolation?D[m.interpolation]:r.InterpolateLinear,b=[];N[g.path]===N.weights?d.traverse((function(t){!0===t.isMesh&&t.morphTargetInfluences&&b.push(t.name?t.name:t.uuid)})):b.push(y);var _=f.array;if(f.normalized){var M;if(_.constructor===Int8Array)M=1/127;else if(_.constructor===Uint8Array)M=1/255;else if(_.constructor==Int16Array)M=1/32767;else{if(_.constructor!==Uint16Array)throw new Error("THREE.GLTFLoader: Unsupported output accessor component type.");M=1/65535}for(var S=new Float32Array(_.length),T=0,E=_.length;T<E;T++)S[T]=_[T]*M;_=S}for(T=0,E=b.length;T<E;T++){var A=new v(b[T]+"."+N[g.path],p.array,_,x);"CUBICSPLINE"===m.interpolation&&(A.createInterpolant=function(t){return new w(this.times,this.values,this.getValueSize()/3,t)},A.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),l.push(A)}}}var L=e.name?e.name:"animation_"+t;return new r.AnimationClip(L,void 0,l)}))},j.prototype.loadNode=function(t){var e,n=this.json,i=this.extensions,o=this,a=n.nodes[t],s=a.name?o.createUniqueName(a.name):"";return(e=[],void 0!==a.mesh&&e.push(o.getDependency("mesh",a.mesh).then((function(t){var e=o._getNodeRef(o.meshCache,a.mesh,t);return void 0!==a.weights&&e.traverse((function(t){if(t.isMesh)for(var e=0,n=a.weights.length;e<n;e++)t.morphTargetInfluences[e]=a.weights[e]})),e}))),void 0!==a.camera&&e.push(o.getDependency("camera",a.camera).then((function(t){return o._getNodeRef(o.cameraCache,a.camera,t)}))),o._invokeAll((function(e){return e.createNodeAttachment&&e.createNodeAttachment(t)})).forEach((function(t){e.push(t)})),Promise.all(e)).then((function(e){var n;if((n=!0===a.isBone?new r.Bone:e.length>1?new r.Group:1===e.length?e[0]:new r.Object3D)!==e[0])for(var c=0,l=e.length;c<l;c++)n.add(e[c]);if(a.name&&(n.userData.name=a.name,n.name=s),H(n,a),a.extensions&&G(i,n,a),void 0!==a.matrix){var u=new r.Matrix4;u.fromArray(a.matrix),n.applyMatrix4(u)}else void 0!==a.translation&&n.position.fromArray(a.translation),void 0!==a.rotation&&n.quaternion.fromArray(a.rotation),void 0!==a.scale&&n.scale.fromArray(a.scale);return o.associations.set(n,{type:"nodes",index:t}),n}))},j.prototype.loadScene=function(){function t(e,n,i,o){var a=i.nodes[e];return o.getDependency("node",e).then((function(t){return void 0===a.skin?t:o.getDependency("skin",a.skin).then((function(t){for(var n=[],r=0,i=(e=t).joints.length;r<i;r++)n.push(o.getDependency("node",e.joints[r]));return Promise.all(n)})).then((function(n){return t.traverse((function(t){if(t.isMesh){for(var i=[],o=[],a=0,s=n.length;a<s;a++){var c=n[a];if(c){i.push(c);var l=new r.Matrix4;void 0!==e.inverseBindMatrices&&l.fromArray(e.inverseBindMatrices.array,16*a),o.push(l)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',e.joints[a])}t.bind(new r.Skeleton(i,o),t.matrixWorld)}})),t}));var e})).then((function(e){n.add(e);var r=[];if(a.children)for(var s=a.children,c=0,l=s.length;c<l;c++){var u=s[c];r.push(t(u,e,i,o))}return Promise.all(r)}))}return function(e){var n=this.json,i=this.extensions,o=this.json.scenes[e],a=new r.Group;o.name&&(a.name=this.createUniqueName(o.name)),H(a,o),o.extensions&&G(i,a,o);for(var s=o.nodes||[],c=[],l=0,u=s.length;l<u;l++)c.push(t(s[l],a,n,this));return Promise.all(c).then((function(){return a}))}}(),t}()},function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.DotScreenShader=e.GlitchPass=e.ShaderPass=e.RenderPass=e.EffectComposer=e.WEBGL=e.OrbitControls=e.Water=e.Sky=e.AnimationAction=e.VRButton=e.SVGLoader=e.XRControllerModelFactory=e.GLTFLoader=e.FBXLoader=e.ConvexBufferGeometry=void 0,i(n(0),e);const o=n(15);Object.defineProperty(e,"ConvexBufferGeometry",{enumerable:!0,get:function(){return o.ConvexBufferGeometry}});const a=n(12);Object.defineProperty(e,"FBXLoader",{enumerable:!0,get:function(){return a.FBXLoader}});const s=n(3);Object.defineProperty(e,"GLTFLoader",{enumerable:!0,get:function(){return s.GLTFLoader}});const c=n(16);Object.defineProperty(e,"XRControllerModelFactory",{enumerable:!0,get:function(){return c.XRControllerModelFactory}});const l=n(5);Object.defineProperty(e,"SVGLoader",{enumerable:!0,get:function(){return l.SVGLoader}});const u=n(6);Object.defineProperty(e,"VRButton",{enumerable:!0,get:function(){return u.VRButton}});const h=n(17);Object.defineProperty(e,"AnimationAction",{enumerable:!0,get:function(){return h.AnimationAction}});const d=n(7);Object.defineProperty(e,"Sky",{enumerable:!0,get:function(){return d.Sky}});const p=n(13);Object.defineProperty(e,"Water",{enumerable:!0,get:function(){return p.Water}});const f=n(8);Object.defineProperty(e,"OrbitControls",{enumerable:!0,get:function(){return f.OrbitControls}});const m=n(9);Object.defineProperty(e,"WEBGL",{enumerable:!0,get:function(){return m.WEBGL}});var g=n(14);Object.defineProperty(e,"EffectComposer",{enumerable:!0,get:function(){return g.EffectComposer}});var v=n(10);Object.defineProperty(e,"RenderPass",{enumerable:!0,get:function(){return v.RenderPass}});var y=n(2);Object.defineProperty(e,"ShaderPass",{enumerable:!0,get:function(){return y.ShaderPass}});var x=n(18);Object.defineProperty(e,"GlitchPass",{enumerable:!0,get:function(){return x.GlitchPass}});var b=n(11);Object.defineProperty(e,"DotScreenShader",{enumerable:!0,get:function(){return b.DotScreenShader}});const w="Three.js r"+n(0).REVISION;console.log(`%c %c %c %c %c ${w} %c https://threejs.org/`,"background: #ff0000","background: #ffff00","background: #00ff00","background: #00ffff","color: #fff; background: #000000;","background: none")},function(t,e,n){"use strict";n.r(e),n.d(e,"SVGLoader",(function(){return w}));var r,i,o,a,s,c,l,u,h,d,p,f,m,g,v,y,x,b=n(0),w=function(t){b.Loader.call(this,t),this.defaultDPI=90,this.defaultUnit="px"};w.prototype=Object.assign(Object.create(b.Loader.prototype),{constructor:w,load:function(t,e,n,r){var i=this,o=new b.FileLoader(i.manager);o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(t,(function(n){try{e(i.parse(n))}catch(e){r?r(e):console.error(e),i.manager.itemError(t)}}),n,r)},parse:function(t){var e=this;function n(t,e,n,i,o,a,s,c){if(0!=e&&0!=n){i=i*Math.PI/180,e=Math.abs(e),n=Math.abs(n);var l=(s.x-c.x)/2,u=(s.y-c.y)/2,h=Math.cos(i)*l+Math.sin(i)*u,d=-Math.sin(i)*l+Math.cos(i)*u,p=e*e,f=n*n,m=h*h,g=d*d,v=m/p+g/f;if(v>1){var y=Math.sqrt(v);p=(e*=y)*e,f=(n*=y)*n}var x=p*g+f*m,b=(p*f-x)/x,w=Math.sqrt(Math.max(0,b));o===a&&(w=-w);var _=w*e*d/n,M=-w*n*h/e,S=Math.cos(i)*_-Math.sin(i)*M+(s.x+c.x)/2,T=Math.sin(i)*_+Math.cos(i)*M+(s.y+c.y)/2,E=r(1,0,(h-_)/e,(d-M)/n),A=r((h-_)/e,(d-M)/n,(-h-_)/e,(-d-M)/n)%(2*Math.PI);t.currentPath.absellipse(S,T,e,n,E,E+A,0===a,i)}else t.lineTo(c.x,c.y)}function r(t,e,n,r){var i=t*n+e*r,o=Math.sqrt(t*t+e*e)*Math.sqrt(n*n+r*r),a=Math.acos(Math.max(-1,Math.min(1,i/o)));return t*r-e*n<0&&(a=-a),a}function i(t,e){e=Object.assign({},e);var n={};if(t.hasAttribute("class"))for(var r=t.getAttribute("class").split(/\s/).filter(Boolean).map(t=>t.trim()),i=0;i<r.length;i++)n=Object.assign(n,p["."+r[i]]);function o(r,i,o){void 0===o&&(o=function(t){return t.startsWith("url")&&console.warn("SVGLoader: url access in attributes is not implemented."),t}),t.hasAttribute(r)&&(e[i]=o(t.getAttribute(r))),n[r]&&(e[i]=o(n[r])),t.style&&""!==t.style[r]&&(e[i]=o(t.style[r]))}function a(t){return Math.max(0,Math.min(1,l(t)))}function s(t){return Math.max(0,l(t))}return t.hasAttribute("id")&&(n=Object.assign(n,p["#"+t.getAttribute("id")])),o("fill","fill"),o("fill-opacity","fillOpacity",a),o("opacity","opacity",a),o("stroke","stroke"),o("stroke-opacity","strokeOpacity",a),o("stroke-width","strokeWidth",s),o("stroke-linejoin","strokeLineJoin"),o("stroke-linecap","strokeLineCap"),o("stroke-miterlimit","strokeMiterLimit",s),o("visibility","visibility"),e}function o(t,e){return t-(e-t)}function a(t){for(var e=t.split(/[\s,]+|(?=\s?[+\-])/),n=0;n<e.length;n++){var r=e[n];if(r.indexOf(".")!==r.lastIndexOf("."))for(var i=r.split("."),o=2;o<i.length;o++)e.splice(n+o-1,0,"0."+i[o]);e[n]=l(r)}return e}var s=["mm","cm","in","pt","pc","px"],c={mm:{mm:1,cm:.1,in:1/25.4,pt:72/25.4,pc:6/25.4,px:-1},cm:{mm:10,cm:1,in:1/2.54,pt:72/2.54,pc:6/2.54,px:-1},in:{mm:25.4,cm:2.54,in:1,pt:72,pc:6,px:-1},pt:{mm:25.4/72,cm:2.54/72,in:1/72,pt:1,pc:6/72,px:-1},pc:{mm:25.4/6,cm:2.54/6,in:1/6,pt:12,pc:1,px:-1},px:{px:1}};function l(t){var n="px";if("string"==typeof t||t instanceof String)for(var r=0,i=s.length;r<i;r++){var o=s[r];if(t.endsWith(o)){n=o,t=t.substring(0,t.length-o.length);break}}var a=void 0;return"px"===n&&"px"!==e.defaultUnit?a=c.in[e.defaultUnit]/e.defaultDPI:(a=c[n][e.defaultUnit])<0&&(a=c[n].in*e.defaultDPI),a*parseFloat(t)}function u(t){var e=t.elements;return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function h(t){var e=t.elements;return Math.sqrt(e[3]*e[3]+e[4]*e[4])}var d=[],p={},f=[],m=new b.Matrix3,g=new b.Matrix3,v=new b.Matrix3,y=new b.Matrix3,x=new b.Vector2,w=new b.Vector3,_=new b.Matrix3,M=(new DOMParser).parseFromString(t,"image/svg+xml");return function t(e,r){if(1===e.nodeType){var s=function(t){if(!(t.hasAttribute("transform")||"use"===t.nodeName&&(t.hasAttribute("x")||t.hasAttribute("y"))))return null;var e=function(t){var e=new b.Matrix3,n=m;if("use"===t.nodeName&&(t.hasAttribute("x")||t.hasAttribute("y"))){var r=l(t.getAttribute("x")),i=l(t.getAttribute("y"));e.translate(r,i)}if(t.hasAttribute("transform"))for(var o=t.getAttribute("transform").split(")"),s=o.length-1;s>=0;s--){var c=o[s].trim();if(""!==c){var u=c.indexOf("("),h=c.length;if(u>0&&u<h){var d=c.substr(0,u),p=a(c.substr(u+1,h-u-1));switch(n.identity(),d){case"translate":if(p.length>=1){i=r=p[0];p.length>=2&&(i=p[1]),n.translate(r,i)}break;case"rotate":if(p.length>=1){var f,x=0,w=0;f=-p[0]*Math.PI/180,p.length>=3&&(x=p[1],w=p[2]),g.identity().translate(-x,-w),v.identity().rotate(f),y.multiplyMatrices(v,g),g.identity().translate(x,w),n.multiplyMatrices(g,y)}break;case"scale":if(p.length>=1){var _=p[0],M=_;p.length>=2&&(M=p[1]),n.scale(_,M)}break;case"skewX":1===p.length&&n.set(1,Math.tan(p[0]*Math.PI/180),0,0,1,0,0,0,1);break;case"skewY":1===p.length&&n.set(1,0,0,Math.tan(p[0]*Math.PI/180),1,0,0,0,1);break;case"matrix":6===p.length&&n.set(p[0],p[2],p[4],p[1],p[3],p[5],0,0,1)}}e.premultiply(n)}}return e}(t);f.length>0&&e.premultiply(f[f.length-1]);return _.copy(e),f.push(e),e}(e),c=!0,M=null;switch(e.nodeName){case"svg":break;case"style":!function(t){if(!t.sheet||!t.sheet.cssRules||!t.sheet.cssRules.length)return;for(var e=0;e<t.sheet.cssRules.length;e++){var n=t.sheet.cssRules[e];if(1===n.type)for(var r=n.selectorText.split(/,/gm).filter(Boolean).map(t=>t.trim()),i=0;i<r.length;i++)p[r[i]]=Object.assign(p[r[i]]||{},n.style)}}(e);break;case"g":r=i(e,r);break;case"path":r=i(e,r),e.hasAttribute("d")&&(M=function(t){for(var e=new b.ShapePath,r=new b.Vector2,i=new b.Vector2,s=new b.Vector2,c=!0,l=!1,u=t.getAttribute("d").match(/[a-df-z][^a-df-z]*/gi),h=0,d=u.length;h<d;h++){var p=u[h],f=p.charAt(0),m=p.substr(1).trim();switch(!0===c&&(l=!0,c=!1),f){case"M":for(var g=a(m),v=0,y=g.length;v<y;v+=2)r.x=g[v+0],r.y=g[v+1],i.x=r.x,i.y=r.y,0===v?e.moveTo(r.x,r.y):e.lineTo(r.x,r.y),0===v&&!0===l&&s.copy(r);break;case"H":for(g=a(m),v=0,y=g.length;v<y;v++)r.x=g[v],i.x=r.x,i.y=r.y,e.lineTo(r.x,r.y),0===v&&!0===l&&s.copy(r);break;case"V":for(g=a(m),v=0,y=g.length;v<y;v++)r.y=g[v],i.x=r.x,i.y=r.y,e.lineTo(r.x,r.y),0===v&&!0===l&&s.copy(r);break;case"L":for(g=a(m),v=0,y=g.length;v<y;v+=2)r.x=g[v+0],r.y=g[v+1],i.x=r.x,i.y=r.y,e.lineTo(r.x,r.y),0===v&&!0===l&&s.copy(r);break;case"C":for(g=a(m),v=0,y=g.length;v<y;v+=6)e.bezierCurveTo(g[v+0],g[v+1],g[v+2],g[v+3],g[v+4],g[v+5]),i.x=g[v+2],i.y=g[v+3],r.x=g[v+4],r.y=g[v+5],0===v&&!0===l&&s.copy(r);break;case"S":for(g=a(m),v=0,y=g.length;v<y;v+=4)e.bezierCurveTo(o(r.x,i.x),o(r.y,i.y),g[v+0],g[v+1],g[v+2],g[v+3]),i.x=g[v+0],i.y=g[v+1],r.x=g[v+2],r.y=g[v+3],0===v&&!0===l&&s.copy(r);break;case"Q":for(g=a(m),v=0,y=g.length;v<y;v+=4)e.quadraticCurveTo(g[v+0],g[v+1],g[v+2],g[v+3]),i.x=g[v+0],i.y=g[v+1],r.x=g[v+2],r.y=g[v+3],0===v&&!0===l&&s.copy(r);break;case"T":for(g=a(m),v=0,y=g.length;v<y;v+=2){var x=o(r.x,i.x),w=o(r.y,i.y);e.quadraticCurveTo(x,w,g[v+0],g[v+1]),i.x=x,i.y=w,r.x=g[v+0],r.y=g[v+1],0===v&&!0===l&&s.copy(r)}break;case"A":for(g=a(m),v=0,y=g.length;v<y;v+=7)if(g[v+5]!=r.x||g[v+6]!=r.y){var _=r.clone();r.x=g[v+5],r.y=g[v+6],i.x=r.x,i.y=r.y,n(e,g[v],g[v+1],g[v+2],g[v+3],g[v+4],_,r),0===v&&!0===l&&s.copy(r)}break;case"m":for(g=a(m),v=0,y=g.length;v<y;v+=2)r.x+=g[v+0],r.y+=g[v+1],i.x=r.x,i.y=r.y,0===v?e.moveTo(r.x,r.y):e.lineTo(r.x,r.y),0===v&&!0===l&&s.copy(r);break;case"h":for(g=a(m),v=0,y=g.length;v<y;v++)r.x+=g[v],i.x=r.x,i.y=r.y,e.lineTo(r.x,r.y),0===v&&!0===l&&s.copy(r);break;case"v":for(g=a(m),v=0,y=g.length;v<y;v++)r.y+=g[v],i.x=r.x,i.y=r.y,e.lineTo(r.x,r.y),0===v&&!0===l&&s.copy(r);break;case"l":for(g=a(m),v=0,y=g.length;v<y;v+=2)r.x+=g[v+0],r.y+=g[v+1],i.x=r.x,i.y=r.y,e.lineTo(r.x,r.y),0===v&&!0===l&&s.copy(r);break;case"c":for(g=a(m),v=0,y=g.length;v<y;v+=6)e.bezierCurveTo(r.x+g[v+0],r.y+g[v+1],r.x+g[v+2],r.y+g[v+3],r.x+g[v+4],r.y+g[v+5]),i.x=r.x+g[v+2],i.y=r.y+g[v+3],r.x+=g[v+4],r.y+=g[v+5],0===v&&!0===l&&s.copy(r);break;case"s":for(g=a(m),v=0,y=g.length;v<y;v+=4)e.bezierCurveTo(o(r.x,i.x),o(r.y,i.y),r.x+g[v+0],r.y+g[v+1],r.x+g[v+2],r.y+g[v+3]),i.x=r.x+g[v+0],i.y=r.y+g[v+1],r.x+=g[v+2],r.y+=g[v+3],0===v&&!0===l&&s.copy(r);break;case"q":for(g=a(m),v=0,y=g.length;v<y;v+=4)e.quadraticCurveTo(r.x+g[v+0],r.y+g[v+1],r.x+g[v+2],r.y+g[v+3]),i.x=r.x+g[v+0],i.y=r.y+g[v+1],r.x+=g[v+2],r.y+=g[v+3],0===v&&!0===l&&s.copy(r);break;case"t":for(g=a(m),v=0,y=g.length;v<y;v+=2){x=o(r.x,i.x),w=o(r.y,i.y);e.quadraticCurveTo(x,w,r.x+g[v+0],r.y+g[v+1]),i.x=x,i.y=w,r.x=r.x+g[v+0],r.y=r.y+g[v+1],0===v&&!0===l&&s.copy(r)}break;case"a":for(g=a(m),v=0,y=g.length;v<y;v+=7)if(0!=g[v+5]||0!=g[v+6]){_=r.clone();r.x+=g[v+5],r.y+=g[v+6],i.x=r.x,i.y=r.y,n(e,g[v],g[v+1],g[v+2],g[v+3],g[v+4],_,r),0===v&&!0===l&&s.copy(r)}break;case"Z":case"z":e.currentPath.autoClose=!0,e.currentPath.curves.length>0&&(r.copy(s),e.currentPath.currentPoint.copy(r),c=!0);break;default:console.warn(p)}l=!1}return e}(e));break;case"rect":r=i(e,r),M=function(t){var e=l(t.getAttribute("x")||0),n=l(t.getAttribute("y")||0),r=l(t.getAttribute("rx")||0),i=l(t.getAttribute("ry")||0),o=l(t.getAttribute("width")),a=l(t.getAttribute("height")),s=new b.ShapePath;s.moveTo(e+2*r,n),s.lineTo(e+o-2*r,n),(0!==r||0!==i)&&s.bezierCurveTo(e+o,n,e+o,n,e+o,n+2*i);s.lineTo(e+o,n+a-2*i),(0!==r||0!==i)&&s.bezierCurveTo(e+o,n+a,e+o,n+a,e+o-2*r,n+a);s.lineTo(e+2*r,n+a),(0!==r||0!==i)&&s.bezierCurveTo(e,n+a,e,n+a,e,n+a-2*i);s.lineTo(e,n+2*i),(0!==r||0!==i)&&s.bezierCurveTo(e,n,e,n,e+2*r,n);return s}(e);break;case"polygon":r=i(e,r),M=function(t){function e(t,e,i){var o=l(e),a=l(i);0===r?n.moveTo(o,a):n.lineTo(o,a),r++}var n=new b.ShapePath,r=0;return t.getAttribute("points").replace(/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g,e),n.currentPath.autoClose=!0,n}(e);break;case"polyline":r=i(e,r),M=function(t){function e(t,e,i){var o=l(e),a=l(i);0===r?n.moveTo(o,a):n.lineTo(o,a),r++}var n=new b.ShapePath,r=0;return t.getAttribute("points").replace(/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g,e),n.currentPath.autoClose=!1,n}(e);break;case"circle":r=i(e,r),M=function(t){var e=l(t.getAttribute("cx")),n=l(t.getAttribute("cy")),r=l(t.getAttribute("r")),i=new b.Path;i.absarc(e,n,r,0,2*Math.PI);var o=new b.ShapePath;return o.subPaths.push(i),o}(e);break;case"ellipse":r=i(e,r),M=function(t){var e=l(t.getAttribute("cx")),n=l(t.getAttribute("cy")),r=l(t.getAttribute("rx")),i=l(t.getAttribute("ry")),o=new b.Path;o.absellipse(e,n,r,i,0,2*Math.PI);var a=new b.ShapePath;return a.subPaths.push(o),a}(e);break;case"line":r=i(e,r),M=function(t){var e=l(t.getAttribute("x1")),n=l(t.getAttribute("y1")),r=l(t.getAttribute("x2")),i=l(t.getAttribute("y2")),o=new b.ShapePath;return o.moveTo(e,n),o.lineTo(r,i),o.currentPath.autoClose=!1,o}(e);break;case"defs":c=!1;break;case"use":r=i(e,r);var S=e.href.baseVal.substring(1),T=e.viewportElement.getElementById(S);T?t(T,r):console.warn("SVGLoader: 'use node' references non-existent node id: "+S)}if(M&&(void 0!==r.fill&&"none"!==r.fill&&M.color.setStyle(r.fill),function(t,e){function n(t){w.set(t.x,t.y,1).applyMatrix3(e),t.set(w.x,w.y)}for(var r=function(t){return 0!==t.elements[1]||0!==t.elements[3]}(e),i=t.subPaths,o=0,a=i.length;o<a;o++)for(var s=i[o].curves,c=0;c<s.length;c++){var l=s[c];l.isLineCurve?(n(l.v1),n(l.v2)):l.isCubicBezierCurve?(n(l.v0),n(l.v1),n(l.v2),n(l.v3)):l.isQuadraticBezierCurve?(n(l.v0),n(l.v1),n(l.v2)):l.isEllipseCurve&&(r&&console.warn("SVGLoader: Elliptic arc or ellipse rotation or skewing is not implemented."),x.set(l.aX,l.aY),n(x),l.aX=x.x,l.aY=x.y,l.xRadius*=u(e),l.yRadius*=h(e))}}(M,_),d.push(M),M.userData={node:e,style:r}),c)for(var E=e.childNodes,A=0;A<E.length;A++)t(E[A],r);s&&(f.pop(),f.length>0?_.copy(f[f.length-1]):_.identity())}}(M.documentElement,{fill:"#000",fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeLineJoin:"miter",strokeLineCap:"butt",strokeMiterLimit:4}),{paths:d,xml:M.documentElement}}}),w.getStrokeStyle=function(t,e,n,r,i){return{strokeColor:e=void 0!==e?e:"#000",strokeWidth:t=void 0!==t?t:1,strokeLineJoin:n=void 0!==n?n:"miter",strokeLineCap:r=void 0!==r?r:"butt",strokeMiterLimit:i=void 0!==i?i:4}},w.pointsToStroke=function(t,e,n,r){var i=[],o=[],a=[];if(0===w.pointsToStrokeWithBuffers(t,e,n,r,i,o,a))return null;var s=new b.BufferGeometry;return s.setAttribute("position",new b.Float32BufferAttribute(i,3)),s.setAttribute("normal",new b.Float32BufferAttribute(o,3)),s.setAttribute("uv",new b.Float32BufferAttribute(a,2)),s},w.pointsToStrokeWithBuffers=(r=new b.Vector2,i=new b.Vector2,o=new b.Vector2,a=new b.Vector2,s=new b.Vector2,c=new b.Vector2,l=new b.Vector2,u=new b.Vector2,h=new b.Vector2,d=new b.Vector2,p=new b.Vector2,f=new b.Vector2,m=new b.Vector2,g=new b.Vector2,v=new b.Vector2,y=new b.Vector2,x=new b.Vector2,function(t,e,n,b,w,_,M,S){n=void 0!==n?n:12,b=void 0!==b?b:.001,S=void 0!==S?S:0;var T=(t=function(t){for(var e=!1,n=1,r=t.length-1;n<r;n++)if(t[n].distanceTo(t[n+1])<b){e=!0;break}if(!e)return t;var i=[];for(i.push(t[0]),n=1,r=t.length-1;n<r;n++)t[n].distanceTo(t[n+1])>=b&&i.push(t[n]);return i.push(t[t.length-1]),i}(t)).length;if(T<2)return 0;var E,A,L,R,P,C=t[0].equals(t[T-1]),I=t[0],O=e.strokeWidth/2,N=1/(T-1),D=0,B=!1,F=0,U=3*S,z=2*S;K(t[0],t[1],r).multiplyScalar(O),u.copy(t[0]).sub(r),h.copy(t[0]).add(r),d.copy(u),p.copy(h);for(var G=1;G<T;G++){E=t[G],A=G===T-1?C?t[1]:void 0:t[G+1];var H=r;K(I,E,H),o.copy(H).multiplyScalar(O),f.copy(E).sub(o),m.copy(E).add(o);var k=D+N;if(L=!1,void 0!==A){K(E,A,i),o.copy(i).multiplyScalar(O),g.copy(E).sub(o),v.copy(E).add(o),R=!0,o.subVectors(A,I),H.dot(o)<0&&(R=!1),1===G&&(B=R),o.subVectors(A,E),o.normalize();var V=Math.abs(H.dot(o));if(0!==V){var j=O/V;o.multiplyScalar(-j),a.subVectors(E,I),s.copy(a).setLength(j).add(o),y.copy(s).negate();var W=s.length(),X=a.length();a.divideScalar(X),c.subVectors(A,E);var q=c.length();switch(c.divideScalar(q),a.dot(y)<X&&c.dot(y)<q&&(L=!0),x.copy(s).add(E),y.add(E),P=!1,L?R?(v.copy(y),m.copy(y)):(g.copy(y),f.copy(y)):tt(),e.strokeLineJoin){case"bevel":et(R,L,k);break;case"round":nt(R,L),R?$(E,f,g,k,0):$(E,v,m,k,1);break;case"miter":case"miter-clip":default:var Y=O*e.strokeMiterLimit/W;if(Y<1){if("miter-clip"!==e.strokeLineJoin){et(R,L,k);break}nt(R,L),R?(c.subVectors(x,f).multiplyScalar(Y).add(f),l.subVectors(x,g).multiplyScalar(Y).add(g),Q(f,k,0),Q(c,k,0),Q(E,k,.5),Q(E,k,.5),Q(c,k,0),Q(l,k,0),Q(E,k,.5),Q(l,k,0),Q(g,k,0)):(c.subVectors(x,m).multiplyScalar(Y).add(m),l.subVectors(x,v).multiplyScalar(Y).add(v),Q(m,k,1),Q(c,k,1),Q(E,k,.5),Q(E,k,.5),Q(c,k,1),Q(l,k,1),Q(E,k,.5),Q(l,k,1),Q(v,k,1))}else L?(R?(Q(h,D,1),Q(u,D,0),Q(x,k,0),Q(h,D,1),Q(x,k,0),Q(y,k,1)):(Q(h,D,1),Q(u,D,0),Q(x,k,1),Q(u,D,0),Q(y,k,0),Q(x,k,1)),R?g.copy(x):v.copy(x)):R?(Q(f,k,0),Q(x,k,0),Q(E,k,.5),Q(E,k,.5),Q(x,k,0),Q(g,k,0)):(Q(m,k,1),Q(x,k,1),Q(E,k,.5),Q(E,k,.5),Q(x,k,1),Q(v,k,1)),P=!0}}else tt()}else tt();C||G!==T-1||rt(t[0],d,p,R,!0,D),D=k,I=E,u.copy(g),h.copy(v)}if(C){if(L&&w){var Z=x,J=y;B!==R&&(Z=y,J=x),R?(P||B)&&(J.toArray(w,0),J.toArray(w,9),P&&Z.toArray(w,3)):!P&&B||(J.toArray(w,3),J.toArray(w,9),P&&Z.toArray(w,0))}}else rt(E,f,m,R,!1,k);return F;function K(t,e,n){return n.subVectors(e,t),n.set(-n.y,n.x).normalize()}function Q(t,e,n){w&&(w[U]=t.x,w[U+1]=t.y,w[U+2]=0,_&&(_[U]=0,_[U+1]=0,_[U+2]=1),U+=3,M&&(M[z]=e,M[z+1]=n,z+=2)),F+=3}function $(t,e,s,c,l){r.copy(e).sub(t).normalize(),i.copy(s).sub(t).normalize();var u=Math.PI,h=r.dot(i);Math.abs(h)<1&&(u=Math.abs(Math.acos(h))),u/=n,o.copy(e);for(var d=0,p=n-1;d<p;d++)a.copy(o).rotateAround(t,u),Q(o,c,l),Q(a,c,l),Q(t,c,.5),o.copy(a);Q(a,c,l),Q(s,c,l),Q(t,c,.5)}function tt(){Q(h,D,1),Q(u,D,0),Q(f,k,0),Q(h,D,1),Q(f,k,1),Q(m,k,0)}function et(t,e,n){e?t?(Q(h,D,1),Q(u,D,0),Q(f,k,0),Q(h,D,1),Q(f,k,0),Q(y,k,1),Q(f,n,0),Q(g,n,0),Q(y,n,.5)):(Q(h,D,1),Q(u,D,0),Q(m,k,1),Q(u,D,0),Q(y,k,0),Q(m,k,1),Q(m,n,1),Q(v,n,0),Q(y,n,.5)):t?(Q(f,n,0),Q(g,n,0),Q(E,n,.5)):(Q(m,n,1),Q(v,n,0),Q(E,n,.5))}function nt(t,e){e&&(t?(Q(h,D,1),Q(u,D,0),Q(f,k,0),Q(h,D,1),Q(f,k,0),Q(y,k,1),Q(f,D,0),Q(E,k,.5),Q(y,k,1),Q(E,k,.5),Q(g,D,0),Q(y,k,1)):(Q(h,D,1),Q(u,D,0),Q(m,k,1),Q(u,D,0),Q(y,k,0),Q(m,k,1),Q(m,D,1),Q(y,k,0),Q(E,k,.5),Q(E,k,.5),Q(y,k,0),Q(v,D,1)))}function rt(t,n,s,c,l,u){switch(e.strokeLineCap){case"round":l?$(t,s,n,u,.5):$(t,n,s,u,.5);break;case"square":if(l)r.subVectors(n,t),i.set(r.y,-r.x),o.addVectors(r,i).add(t),a.subVectors(i,r).add(t),c?(o.toArray(w,3),a.toArray(w,0),a.toArray(w,9)):(o.toArray(w,3),o.toArray(w,9),a.toArray(w,0));else{r.subVectors(s,t),i.set(r.y,-r.x),o.addVectors(r,i).add(t),a.subVectors(i,r).add(t);var h=w.length;c?(o.toArray(w,h-3),a.toArray(w,h-6),a.toArray(w,h-12)):(o.toArray(w,h-6),a.toArray(w,h-3),a.toArray(w,h-12))}}}})},function(t,e,n){"use strict";n.r(e),n.d(e,"VRButton",(function(){return r}));class r{static createButton(t,e){e&&console.error('THREE.VRButton: The "options" parameter has been removed. Please set the reference space type via renderer.xr.setReferenceSpaceType() instead.');const n=document.createElement("button");function r(){n.style.display="",n.style.cursor="auto",n.style.left="calc(50% - 75px)",n.style.width="150px",n.onmouseenter=null,n.onmouseleave=null,n.onclick=null,n.textContent="VR NOT SUPPORTED"}function i(t){t.style.position="absolute",t.style.bottom="20px",t.style.padding="12px 6px",t.style.border="1px solid #fff",t.style.borderRadius="4px",t.style.background="rgba(0,0,0,0.1)",t.style.color="#fff",t.style.font="normal 13px sans-serif",t.style.textAlign="center",t.style.opacity="0.5",t.style.outline="none",t.style.zIndex="999"}if("xr"in navigator)return n.id="VRButton",n.style.display="none",i(n),navigator.xr.isSessionSupported("immersive-vr").then((function(e){e?function(){let e=null;function r(r){r.addEventListener("end",i),t.xr.setSession(r),n.textContent="EXIT VR",e=r}function i(){e.removeEventListener("end",i),n.textContent="ENTER VR",e=null}n.style.display="",n.style.cursor="pointer",n.style.left="calc(50% - 50px)",n.style.width="100px",n.textContent="ENTER VR",n.onmouseenter=function(){n.style.opacity="1.0"},n.onmouseleave=function(){n.style.opacity="0.5"},n.onclick=function(){if(null===e){const t={optionalFeatures:["local-floor","bounded-floor","hand-tracking"]};navigator.xr.requestSession("immersive-vr",t).then(r)}else e.end()}}():r()})),n;{const t=document.createElement("a");return!1===window.isSecureContext?(t.href=document.location.href.replace(/^http:/,"https:"),t.innerHTML="WEBXR NEEDS HTTPS"):(t.href="https://immersiveweb.dev/",t.innerHTML="WEBXR NOT AVAILABLE"),t.style.left="calc(50% - 90px)",t.style.width="180px",t.style.textDecoration="none",i(t),t}}}},function(t,e,n){"use strict";n.r(e),n.d(e,"Sky",(function(){return i}));var r=n(0),i=function(){var t=i.SkyShader,e=new r.ShaderMaterial({name:"SkyShader",fragmentShader:t.fragmentShader,vertexShader:t.vertexShader,uniforms:r.UniformsUtils.clone(t.uniforms),side:r.BackSide,depthWrite:!1});r.Mesh.call(this,new r.BoxBufferGeometry(1,1,1),e)};i.prototype=Object.create(r.Mesh.prototype),i.SkyShader={uniforms:{turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new r.Vector3},up:{value:new r.Vector3(0,1,0)}},vertexShader:["uniform vec3 sunPosition;","uniform float rayleigh;","uniform float turbidity;","uniform float mieCoefficient;","uniform vec3 up;","varying vec3 vWorldPosition;","varying vec3 vSunDirection;","varying float vSunfade;","varying vec3 vBetaR;","varying vec3 vBetaM;","varying float vSunE;","const float e = 2.71828182845904523536028747135266249775724709369995957;","const float pi = 3.141592653589793238462643383279502884197169;","const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );","const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );","const float v = 4.0;","const vec3 K = vec3( 0.686, 0.678, 0.666 );","const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );","const float cutoffAngle = 1.6110731556870734;","const float steepness = 1.5;","const float EE = 1000.0;","float sunIntensity( float zenithAngleCos ) {","\tzenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );","\treturn EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );","}","vec3 totalMie( float T ) {","\tfloat c = ( 0.2 * T ) * 10E-18;","\treturn 0.434 * c * MieConst;","}","void main() {","\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );","\tvWorldPosition = worldPosition.xyz;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","\tgl_Position.z = gl_Position.w;","\tvSunDirection = normalize( sunPosition );","\tvSunE = sunIntensity( dot( vSunDirection, up ) );","\tvSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );","\tfloat rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );","\tvBetaR = totalRayleigh * rayleighCoefficient;","\tvBetaM = totalMie( turbidity ) * mieCoefficient;","}"].join("\n"),fragmentShader:["varying vec3 vWorldPosition;","varying vec3 vSunDirection;","varying float vSunfade;","varying vec3 vBetaR;","varying vec3 vBetaM;","varying float vSunE;","uniform float mieDirectionalG;","uniform vec3 up;","const vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );","const float pi = 3.141592653589793238462643383279502884197169;","const float n = 1.0003;","const float N = 2.545E25;","const float rayleighZenithLength = 8.4E3;","const float mieZenithLength = 1.25E3;","const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;","const float THREE_OVER_SIXTEENPI = 0.05968310365946075;","const float ONE_OVER_FOURPI = 0.07957747154594767;","float rayleighPhase( float cosTheta ) {","\treturn THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );","}","float hgPhase( float cosTheta, float g ) {","\tfloat g2 = pow( g, 2.0 );","\tfloat inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );","\treturn ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );","}","void main() {","\tvec3 direction = normalize( vWorldPosition - cameraPos );","\tfloat zenithAngle = acos( max( 0.0, dot( up, direction ) ) );","\tfloat inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );","\tfloat sR = rayleighZenithLength * inverse;","\tfloat sM = mieZenithLength * inverse;","\tvec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );","\tfloat cosTheta = dot( direction, vSunDirection );","\tfloat rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );","\tvec3 betaRTheta = vBetaR * rPhase;","\tfloat mPhase = hgPhase( cosTheta, mieDirectionalG );","\tvec3 betaMTheta = vBetaM * mPhase;","\tvec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );","\tLin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );","\tfloat theta = acos( direction.y ); // elevation --\x3e y-axis, [-pi/2, pi/2]","\tfloat phi = atan( direction.z, direction.x ); // azimuth --\x3e x-axis [-pi/2, pi/2]","\tvec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );","\tvec3 L0 = vec3( 0.1 ) * Fex;","\tfloat sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );","\tL0 += ( vSunE * 19000.0 * Fex ) * sundisk;","\tvec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );","\tvec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );","\tgl_FragColor = vec4( retColor, 1.0 );","#include <tonemapping_fragment>","#include <encodings_fragment>","}"].join("\n")}},function(t,e,n){"use strict";n.r(e),n.d(e,"OrbitControls",(function(){return i})),n.d(e,"MapControls",(function(){return o}));var r=n(0),i=function(t,e){var n,i,o,a,s,c;void 0===e&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),e===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=t,this.domElement=e,this.enabled=!0,this.target=new r.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:r.MOUSE.ROTATE,MIDDLE:r.MOUSE.DOLLY,RIGHT:r.MOUSE.PAN},this.touches={ONE:r.TOUCH.ROTATE,TWO:r.TOUCH.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return g.phi},this.getAzimuthalAngle=function(){return g.theta},this.saveState=function(){l.target0.copy(l.target),l.position0.copy(l.object.position),l.zoom0=l.object.zoom},this.reset=function(){l.target.copy(l.target0),l.object.position.copy(l.position0),l.object.zoom=l.zoom0,l.object.updateProjectionMatrix(),l.dispatchEvent(u),l.update(),f=p.NONE},this.update=(n=new r.Vector3,i=(new r.Quaternion).setFromUnitVectors(t.up,new r.Vector3(0,1,0)),o=i.clone().invert(),a=new r.Vector3,s=new r.Quaternion,c=2*Math.PI,function(){var t=l.object.position;n.copy(t).sub(l.target),n.applyQuaternion(i),g.setFromVector3(n),l.autoRotate&&f===p.NONE&&C(2*Math.PI/60/60*l.autoRotateSpeed),l.enableDamping?(g.theta+=v.theta*l.dampingFactor,g.phi+=v.phi*l.dampingFactor):(g.theta+=v.theta,g.phi+=v.phi);var e=l.minAzimuthAngle,r=l.maxAzimuthAngle;return isFinite(e)&&isFinite(r)&&(e<-Math.PI?e+=c:e>Math.PI&&(e-=c),r<-Math.PI?r+=c:r>Math.PI&&(r-=c),g.theta=e<=r?Math.max(e,Math.min(r,g.theta)):g.theta>(e+r)/2?Math.max(e,g.theta):Math.min(r,g.theta)),g.phi=Math.max(l.minPolarAngle,Math.min(l.maxPolarAngle,g.phi)),g.makeSafe(),g.radius*=y,g.radius=Math.max(l.minDistance,Math.min(l.maxDistance,g.radius)),!0===l.enableDamping?l.target.addScaledVector(x,l.dampingFactor):l.target.add(x),n.setFromSpherical(g),n.applyQuaternion(o),t.copy(l.target).add(n),l.object.lookAt(l.target),!0===l.enableDamping?(v.theta*=1-l.dampingFactor,v.phi*=1-l.dampingFactor,x.multiplyScalar(1-l.dampingFactor)):(v.set(0,0,0),x.set(0,0,0)),y=1,!!(b||a.distanceToSquared(l.object.position)>m||8*(1-s.dot(l.object.quaternion))>m)&&(l.dispatchEvent(u),a.copy(l.object.position),s.copy(l.object.quaternion),b=!1,!0)}),this.dispose=function(){l.domElement.removeEventListener("contextmenu",et,!1),l.domElement.removeEventListener("pointerdown",q,!1),l.domElement.removeEventListener("wheel",J,!1),l.domElement.removeEventListener("touchstart",Q,!1),l.domElement.removeEventListener("touchend",tt,!1),l.domElement.removeEventListener("touchmove",$,!1),l.domElement.ownerDocument.removeEventListener("pointermove",Y,!1),l.domElement.ownerDocument.removeEventListener("pointerup",Z,!1),l.domElement.removeEventListener("keydown",K,!1)};var l=this,u={type:"change"},h={type:"start"},d={type:"end"},p={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},f=p.NONE,m=1e-6,g=new r.Spherical,v=new r.Spherical,y=1,x=new r.Vector3,b=!1,w=new r.Vector2,_=new r.Vector2,M=new r.Vector2,S=new r.Vector2,T=new r.Vector2,E=new r.Vector2,A=new r.Vector2,L=new r.Vector2,R=new r.Vector2;function P(){return Math.pow(.95,l.zoomSpeed)}function C(t){v.theta-=t}function I(t){v.phi-=t}var O,N=(O=new r.Vector3,function(t,e){O.setFromMatrixColumn(e,0),O.multiplyScalar(-t),x.add(O)}),D=function(){var t=new r.Vector3;return function(e,n){!0===l.screenSpacePanning?t.setFromMatrixColumn(n,1):(t.setFromMatrixColumn(n,0),t.crossVectors(l.object.up,t)),t.multiplyScalar(e),x.add(t)}}(),B=function(){var t=new r.Vector3;return function(e,n){var r=l.domElement;if(l.object.isPerspectiveCamera){var i=l.object.position;t.copy(i).sub(l.target);var o=t.length();o*=Math.tan(l.object.fov/2*Math.PI/180),N(2*e*o/r.clientHeight,l.object.matrix),D(2*n*o/r.clientHeight,l.object.matrix)}else l.object.isOrthographicCamera?(N(e*(l.object.right-l.object.left)/l.object.zoom/r.clientWidth,l.object.matrix),D(n*(l.object.top-l.object.bottom)/l.object.zoom/r.clientHeight,l.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),l.enablePan=!1)}}();function F(t){l.object.isPerspectiveCamera?y/=t:l.object.isOrthographicCamera?(l.object.zoom=Math.max(l.minZoom,Math.min(l.maxZoom,l.object.zoom*t)),l.object.updateProjectionMatrix(),b=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),l.enableZoom=!1)}function U(t){l.object.isPerspectiveCamera?y*=t:l.object.isOrthographicCamera?(l.object.zoom=Math.max(l.minZoom,Math.min(l.maxZoom,l.object.zoom/t)),l.object.updateProjectionMatrix(),b=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),l.enableZoom=!1)}function z(t){w.set(t.clientX,t.clientY)}function G(t){S.set(t.clientX,t.clientY)}function H(t){if(1==t.touches.length)w.set(t.touches[0].pageX,t.touches[0].pageY);else{var e=.5*(t.touches[0].pageX+t.touches[1].pageX),n=.5*(t.touches[0].pageY+t.touches[1].pageY);w.set(e,n)}}function k(t){if(1==t.touches.length)S.set(t.touches[0].pageX,t.touches[0].pageY);else{var e=.5*(t.touches[0].pageX+t.touches[1].pageX),n=.5*(t.touches[0].pageY+t.touches[1].pageY);S.set(e,n)}}function V(t){var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY,r=Math.sqrt(e*e+n*n);A.set(0,r)}function j(t){if(1==t.touches.length)_.set(t.touches[0].pageX,t.touches[0].pageY);else{var e=.5*(t.touches[0].pageX+t.touches[1].pageX),n=.5*(t.touches[0].pageY+t.touches[1].pageY);_.set(e,n)}M.subVectors(_,w).multiplyScalar(l.rotateSpeed);var r=l.domElement;C(2*Math.PI*M.x/r.clientHeight),I(2*Math.PI*M.y/r.clientHeight),w.copy(_)}function W(t){if(1==t.touches.length)T.set(t.touches[0].pageX,t.touches[0].pageY);else{var e=.5*(t.touches[0].pageX+t.touches[1].pageX),n=.5*(t.touches[0].pageY+t.touches[1].pageY);T.set(e,n)}E.subVectors(T,S).multiplyScalar(l.panSpeed),B(E.x,E.y),S.copy(T)}function X(t){var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY,r=Math.sqrt(e*e+n*n);L.set(0,r),R.set(0,Math.pow(L.y/A.y,l.zoomSpeed)),F(R.y),A.copy(L)}function q(t){if(!1!==l.enabled)switch(t.pointerType){case"mouse":case"pen":!function(t){var e;switch(t.preventDefault(),l.domElement.focus?l.domElement.focus():window.focus(),t.button){case 0:e=l.mouseButtons.LEFT;break;case 1:e=l.mouseButtons.MIDDLE;break;case 2:e=l.mouseButtons.RIGHT;break;default:e=-1}switch(e){case r.MOUSE.DOLLY:if(!1===l.enableZoom)return;!function(t){A.set(t.clientX,t.clientY)}(t),f=p.DOLLY;break;case r.MOUSE.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===l.enablePan)return;G(t),f=p.PAN}else{if(!1===l.enableRotate)return;z(t),f=p.ROTATE}break;case r.MOUSE.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===l.enableRotate)return;z(t),f=p.ROTATE}else{if(!1===l.enablePan)return;G(t),f=p.PAN}break;default:f=p.NONE}f!==p.NONE&&(l.domElement.ownerDocument.addEventListener("pointermove",Y,!1),l.domElement.ownerDocument.addEventListener("pointerup",Z,!1),l.dispatchEvent(h))}(t)}}function Y(t){if(!1!==l.enabled)switch(t.pointerType){case"mouse":case"pen":!function(t){if(!1===l.enabled)return;switch(t.preventDefault(),f){case p.ROTATE:if(!1===l.enableRotate)return;!function(t){_.set(t.clientX,t.clientY),M.subVectors(_,w).multiplyScalar(l.rotateSpeed);var e=l.domElement;C(2*Math.PI*M.x/e.clientHeight),I(2*Math.PI*M.y/e.clientHeight),w.copy(_),l.update()}(t);break;case p.DOLLY:if(!1===l.enableZoom)return;!function(t){L.set(t.clientX,t.clientY),R.subVectors(L,A),R.y>0?F(P()):R.y<0&&U(P()),A.copy(L),l.update()}(t);break;case p.PAN:if(!1===l.enablePan)return;!function(t){T.set(t.clientX,t.clientY),E.subVectors(T,S).multiplyScalar(l.panSpeed),B(E.x,E.y),S.copy(T),l.update()}(t)}}(t)}}function Z(t){switch(t.pointerType){case"mouse":case"pen":!function(t){if(l.domElement.ownerDocument.removeEventListener("pointermove",Y,!1),l.domElement.ownerDocument.removeEventListener("pointerup",Z,!1),!1===l.enabled)return;l.dispatchEvent(d),f=p.NONE}()}}function J(t){!1===l.enabled||!1===l.enableZoom||f!==p.NONE&&f!==p.ROTATE||(t.preventDefault(),t.stopPropagation(),l.dispatchEvent(h),function(t){t.deltaY<0?U(P()):t.deltaY>0&&F(P()),l.update()}(t),l.dispatchEvent(d))}function K(t){!1!==l.enabled&&!1!==l.enableKeys&&!1!==l.enablePan&&function(t){var e=!1;switch(t.keyCode){case l.keys.UP:B(0,l.keyPanSpeed),e=!0;break;case l.keys.BOTTOM:B(0,-l.keyPanSpeed),e=!0;break;case l.keys.LEFT:B(l.keyPanSpeed,0),e=!0;break;case l.keys.RIGHT:B(-l.keyPanSpeed,0),e=!0}e&&(t.preventDefault(),l.update())}(t)}function Q(t){if(!1!==l.enabled){switch(t.preventDefault(),t.touches.length){case 1:switch(l.touches.ONE){case r.TOUCH.ROTATE:if(!1===l.enableRotate)return;H(t),f=p.TOUCH_ROTATE;break;case r.TOUCH.PAN:if(!1===l.enablePan)return;k(t),f=p.TOUCH_PAN;break;default:f=p.NONE}break;case 2:switch(l.touches.TWO){case r.TOUCH.DOLLY_PAN:if(!1===l.enableZoom&&!1===l.enablePan)return;!function(t){l.enableZoom&&V(t),l.enablePan&&k(t)}(t),f=p.TOUCH_DOLLY_PAN;break;case r.TOUCH.DOLLY_ROTATE:if(!1===l.enableZoom&&!1===l.enableRotate)return;!function(t){l.enableZoom&&V(t),l.enableRotate&&H(t)}(t),f=p.TOUCH_DOLLY_ROTATE;break;default:f=p.NONE}break;default:f=p.NONE}f!==p.NONE&&l.dispatchEvent(h)}}function $(t){if(!1!==l.enabled)switch(t.preventDefault(),t.stopPropagation(),f){case p.TOUCH_ROTATE:if(!1===l.enableRotate)return;j(t),l.update();break;case p.TOUCH_PAN:if(!1===l.enablePan)return;W(t),l.update();break;case p.TOUCH_DOLLY_PAN:if(!1===l.enableZoom&&!1===l.enablePan)return;!function(t){l.enableZoom&&X(t),l.enablePan&&W(t)}(t),l.update();break;case p.TOUCH_DOLLY_ROTATE:if(!1===l.enableZoom&&!1===l.enableRotate)return;!function(t){l.enableZoom&&X(t),l.enableRotate&&j(t)}(t),l.update();break;default:f=p.NONE}}function tt(t){!1!==l.enabled&&(l.dispatchEvent(d),f=p.NONE)}function et(t){!1!==l.enabled&&t.preventDefault()}l.domElement.addEventListener("contextmenu",et,!1),l.domElement.addEventListener("pointerdown",q,!1),l.domElement.addEventListener("wheel",J,!1),l.domElement.addEventListener("touchstart",Q,!1),l.domElement.addEventListener("touchend",tt,!1),l.domElement.addEventListener("touchmove",$,!1),l.domElement.addEventListener("keydown",K,!1),this.update()};i.prototype=Object.create(r.EventDispatcher.prototype),i.prototype.constructor=i;var o=function(t,e){i.call(this,t,e),this.screenSpacePanning=!1,this.mouseButtons.LEFT=r.MOUSE.PAN,this.mouseButtons.RIGHT=r.MOUSE.ROTATE,this.touches.ONE=r.TOUCH.PAN,this.touches.TWO=r.TOUCH.DOLLY_ROTATE};o.prototype=Object.create(r.EventDispatcher.prototype),o.prototype.constructor=o},function(t,e,n){"use strict";n.r(e),n.d(e,"WEBGL",(function(){return r}));var r={isWebGLAvailable:function(){try{var t=document.createElement("canvas");return!(!window.WebGLRenderingContext||!t.getContext("webgl")&&!t.getContext("experimental-webgl"))}catch(t){return!1}},isWebGL2Available:function(){try{var t=document.createElement("canvas");return!(!window.WebGL2RenderingContext||!t.getContext("webgl2"))}catch(t){return!1}},getWebGLErrorMessage:function(){return this.getErrorMessage(1)},getWebGL2ErrorMessage:function(){return this.getErrorMessage(2)},getErrorMessage:function(t){var e={1:window.WebGLRenderingContext,2:window.WebGL2RenderingContext},n='Your $0 does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">$1</a>',r=document.createElement("div");return r.id="webglmessage",r.style.fontFamily="monospace",r.style.fontSize="13px",r.style.fontWeight="normal",r.style.textAlign="center",r.style.background="#fff",r.style.color="#000",r.style.padding="1.5em",r.style.width="400px",r.style.margin="5em auto 0",n=(n=e[t]?n.replace("$0","graphics card"):n.replace("$0","browser")).replace("$1",{1:"WebGL",2:"WebGL 2"}[t]),r.innerHTML=n,r}}},function(t,e,n){"use strict";n.r(e),n.d(e,"RenderPass",(function(){return i}));var r=n(1),i=function(t,e,n,i,o){r.a.call(this),this.scene=t,this.camera=e,this.overrideMaterial=n,this.clearColor=i,this.clearAlpha=void 0!==o?o:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1};i.prototype=Object.assign(Object.create(r.a.prototype),{constructor:i,render:function(t,e,n){var r,i,o,a=t.autoClear;t.autoClear=!1,void 0!==this.overrideMaterial&&(o=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(r=t.getClearColor().getHex(),i=t.getClearAlpha(),t.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&t.clearDepth(),t.setRenderTarget(this.renderToScreen?null:n),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),t.render(this.scene,this.camera),this.clearColor&&t.setClearColor(r,i),void 0!==this.overrideMaterial&&(this.scene.overrideMaterial=o),t.autoClear=a}})},function(t,e,n){"use strict";n.r(e),n.d(e,"DotScreenShader",(function(){return i}));var r=n(0),i={uniforms:{tDiffuse:{value:null},tSize:{value:new r.Vector2(256,256)},center:{value:new r.Vector2(.5,.5)},angle:{value:1.57},scale:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform vec2 center;","uniform float angle;","uniform float scale;","uniform vec2 tSize;","uniform sampler2D tDiffuse;","varying vec2 vUv;","float pattern() {","\tfloat s = sin( angle ), c = cos( angle );","\tvec2 tex = vUv * tSize - center;","\tvec2 point = vec2( c * tex.x - s * tex.y, s * tex.x + c * tex.y ) * scale;","\treturn ( sin( point.x ) * sin( point.y ) ) * 4.0;","}","void main() {","\tvec4 color = texture2D( tDiffuse, vUv );","\tfloat average = ( color.r + color.g + color.b ) / 3.0;","\tgl_FragColor = vec4( vec3( average * 10.0 - 5.0 + pattern() ), color.a );","}"].join("\n")}},function(t,e,n){"use strict";n.r(e),n.d(e,"FBXLoader",(function(){return V}));var r=n(0),i={},o=i;
/** @license zlib.js 2012 - imaya [ https://github.com/imaya/zlib.js ] The MIT License */function a(t,e){var n,r=t.split("."),i=o;!(r[0]in i)&&i.execScript&&i.execScript("var "+r[0]);for(;r.length&&(n=r.shift());)r.length||void 0===e?i=i[n]?i[n]:i[n]={}:i[n]=e}var s="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array&&"undefined"!=typeof DataView;function c(t){var e,n,r,i,o,a,c,l,u,h,d=t.length,p=0,f=Number.POSITIVE_INFINITY;for(l=0;l<d;++l)t[l]>p&&(p=t[l]),t[l]<f&&(f=t[l]);for(e=1<<p,n=new(s?Uint32Array:Array)(e),r=1,i=0,o=2;r<=p;){for(l=0;l<d;++l)if(t[l]===r){for(a=0,c=i,u=0;u<r;++u)a=a<<1|1&c,c>>=1;for(h=r<<16|l,u=a;u<e;u+=o)n[u]=h;++i}++r,i<<=1,o<<=1}return[n,p,f]}function l(t,e){switch(this.g=[],this.h=32768,this.d=this.f=this.a=this.l=0,this.input=s?new Uint8Array(t):t,this.m=!1,this.i=h,this.r=!1,!e&&(e={})||(e.index&&(this.a=e.index),e.bufferSize&&(this.h=e.bufferSize),e.bufferType&&(this.i=e.bufferType),e.resize&&(this.r=e.resize)),this.i){case u:this.b=32768,this.c=new(s?Uint8Array:Array)(32768+this.h+258);break;case h:this.b=0,this.c=new(s?Uint8Array:Array)(this.h),this.e=this.z,this.n=this.v,this.j=this.w;break;default:throw Error("invalid inflate mode")}}var u=0,h=1,d={t:u,s:h};l.prototype.k=function(){for(;!this.m;){var t=C(this,3);switch(1&t&&(this.m=!0),t>>>=1){case 0:var e=this.input,n=this.a,r=this.c,i=this.b,o=e.length,a=void 0,l=r.length,d=void 0;if(this.d=this.f=0,n+1>=o)throw Error("invalid uncompressed block header: LEN");if(a=e[n++]|e[n++]<<8,n+1>=o)throw Error("invalid uncompressed block header: NLEN");if(a===~(e[n++]|e[n++]<<8))throw Error("invalid uncompressed block header: length verify");if(n+a>e.length)throw Error("input buffer is broken");switch(this.i){case u:for(;i+a>r.length;){if(a-=d=l-i,s)r.set(e.subarray(n,n+d),i),i+=d,n+=d;else for(;d--;)r[i++]=e[n++];this.b=i,r=this.e(),i=this.b}break;case h:for(;i+a>r.length;)r=this.e({p:2});break;default:throw Error("invalid inflate mode")}if(s)r.set(e.subarray(n,n+a),i),i+=a,n+=a;else for(;a--;)r[i++]=e[n++];this.a=n,this.b=i,this.c=r;break;case 1:this.j(L,P);break;case 2:var p,f,m,v,y=C(this,5)+257,x=C(this,5)+1,b=C(this,4)+4,w=new(s?Uint8Array:Array)(g.length),_=void 0,M=void 0,S=void 0,T=void 0,E=void 0;for(E=0;E<b;++E)w[g[E]]=C(this,3);if(!s)for(E=b,b=w.length;E<b;++E)w[g[E]]=0;for(p=c(w),_=new(s?Uint8Array:Array)(y+x),E=0,v=y+x;E<v;)switch(M=I(this,p),M){case 16:for(T=3+C(this,2);T--;)_[E++]=S;break;case 17:for(T=3+C(this,3);T--;)_[E++]=0;S=0;break;case 18:for(T=11+C(this,7);T--;)_[E++]=0;S=0;break;default:S=_[E++]=M}f=c(s?_.subarray(0,y):_.slice(0,y)),m=c(s?_.subarray(y):_.slice(y)),this.j(f,m);break;default:throw Error("unknown BTYPE: "+t)}}return this.n()};var p,f,m=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],g=s?new Uint16Array(m):m,v=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],y=s?new Uint16Array(v):v,x=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],b=s?new Uint8Array(x):x,w=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],_=s?new Uint16Array(w):w,M=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],S=s?new Uint8Array(M):M,T=new(s?Uint8Array:Array)(288);for(p=0,f=T.length;p<f;++p)T[p]=143>=p?8:255>=p?9:279>=p?7:8;var E,A,L=c(T),R=new(s?Uint8Array:Array)(30);for(E=0,A=R.length;E<A;++E)R[E]=5;var P=c(R);function C(t,e){for(var n,r=t.f,i=t.d,o=t.input,a=t.a,s=o.length;i<e;){if(a>=s)throw Error("input buffer is broken");r|=o[a++]<<i,i+=8}return n=r&(1<<e)-1,t.f=r>>>e,t.d=i-e,t.a=a,n}function I(t,e){for(var n,r,i=t.f,o=t.d,a=t.input,s=t.a,c=a.length,l=e[0],u=e[1];o<u&&!(s>=c);)i|=a[s++]<<o,o+=8;if((r=(n=l[i&(1<<u)-1])>>>16)>o)throw Error("invalid code length: "+r);return t.f=i>>r,t.d=o-r,t.a=s,65535&n}function O(t,e){var n,r;switch(this.input=t,this.a=0,!e&&(e={})||(e.index&&(this.a=e.index),e.verify&&(this.A=e.verify)),n=t[this.a++],r=t[this.a++],15&n){case N:this.method=N;break;default:throw Error("unsupported compression method")}if(0!=((n<<8)+r)%31)throw Error("invalid fcheck flag:"+((n<<8)+r)%31);if(32&r)throw Error("fdict flag is not supported");this.q=new l(t,{index:this.a,bufferSize:e.bufferSize,bufferType:e.bufferType,resize:e.resize})}l.prototype.j=function(t,e){var n=this.c,r=this.b;this.o=t;for(var i,o,a,s,c=n.length-258;256!==(i=I(this,t));)if(256>i)r>=c&&(this.b=r,n=this.e(),r=this.b),n[r++]=i;else for(s=y[o=i-257],0<b[o]&&(s+=C(this,b[o])),i=I(this,e),a=_[i],0<S[i]&&(a+=C(this,S[i])),r>=c&&(this.b=r,n=this.e(),r=this.b);s--;)n[r]=n[r++-a];for(;8<=this.d;)this.d-=8,this.a--;this.b=r},l.prototype.w=function(t,e){var n=this.c,r=this.b;this.o=t;for(var i,o,a,s,c=n.length;256!==(i=I(this,t));)if(256>i)r>=c&&(c=(n=this.e()).length),n[r++]=i;else for(s=y[o=i-257],0<b[o]&&(s+=C(this,b[o])),i=I(this,e),a=_[i],0<S[i]&&(a+=C(this,S[i])),r+s>c&&(c=(n=this.e()).length);s--;)n[r]=n[r++-a];for(;8<=this.d;)this.d-=8,this.a--;this.b=r},l.prototype.e=function(){var t,e,n=new(s?Uint8Array:Array)(this.b-32768),r=this.b-32768,i=this.c;if(s)n.set(i.subarray(32768,n.length));else for(t=0,e=n.length;t<e;++t)n[t]=i[t+32768];if(this.g.push(n),this.l+=n.length,s)i.set(i.subarray(r,r+32768));else for(t=0;32768>t;++t)i[t]=i[r+t];return this.b=32768,i},l.prototype.z=function(t){var e,n,r,i=this.input.length/this.a+1|0,o=this.input,a=this.c;return t&&("number"==typeof t.p&&(i=t.p),"number"==typeof t.u&&(i+=t.u)),2>i?n=(r=(o.length-this.a)/this.o[2]/2*258|0)<a.length?a.length+r:a.length<<1:n=a.length*i,s?(e=new Uint8Array(n)).set(a):e=a,this.c=e},l.prototype.n=function(){var t,e,n,r,i,o=0,a=this.c,c=this.g,l=new(s?Uint8Array:Array)(this.l+(this.b-32768));if(0===c.length)return s?this.c.subarray(32768,this.b):this.c.slice(32768,this.b);for(e=0,n=c.length;e<n;++e)for(r=0,i=(t=c[e]).length;r<i;++r)l[o++]=t[r];for(e=32768,n=this.b;e<n;++e)l[o++]=a[e];return this.g=[],this.buffer=l},l.prototype.v=function(){var t,e=this.b;return s?this.r?(t=new Uint8Array(e)).set(this.c.subarray(0,e)):t=this.c.subarray(0,e):(this.c.length>e&&(this.c.length=e),t=this.c),this.buffer=t},O.prototype.k=function(){var t,e,n=this.input;if(t=this.q.k(),this.a=this.q.a,this.A){e=(n[this.a++]<<24|n[this.a++]<<16|n[this.a++]<<8|n[this.a++])>>>0;var r=t;if("string"==typeof r){var i,o,a=r.split("");for(i=0,o=a.length;i<o;i++)a[i]=(255&a[i].charCodeAt(0))>>>0;r=a}for(var s,c=1,l=0,u=r.length,h=0;0<u;){u-=s=1024<u?1024:u;do{l+=c+=r[h++]}while(--s);c%=65521,l%=65521}if(e!==(l<<16|c)>>>0)throw Error("invalid adler-32 checksum")}return t};var N=8;a("Zlib.Inflate",O),a("Zlib.Inflate.prototype.decompress",O.prototype.k);var D,B,F,U,z={ADAPTIVE:d.s,BLOCK:d.t};if(Object.keys)D=Object.keys(z);else for(B in D=[],F=0,z)D[F++]=B;for(F=0,U=D.length;F<U;++F)a("Zlib.Inflate.BufferType."+(B=D[F]),z[B]);var G=i.Zlib.Inflate,H={findSpan:function(t,e,n){var r=n.length-t-1;if(e>=n[r])return r-1;if(e<=n[t])return t;for(var i=t,o=r,a=Math.floor((i+o)/2);e<n[a]||e>=n[a+1];)e<n[a]?o=a:i=a,a=Math.floor((i+o)/2);return a},calcBasisFunctions:function(t,e,n,r){var i=[],o=[],a=[];i[0]=1;for(var s=1;s<=n;++s){o[s]=e-r[t+1-s],a[s]=r[t+s]-e;for(var c=0,l=0;l<s;++l){var u=a[l+1],h=o[s-l],d=i[l]/(u+h);i[l]=c+u*d,c=h*d}i[s]=c}return i},calcBSplinePoint:function(t,e,n,i){for(var o=this.findSpan(t,i,e),a=this.calcBasisFunctions(o,i,t,e),s=new r.Vector4(0,0,0,0),c=0;c<=t;++c){var l=n[o-t+c],u=a[c],h=l.w*u;s.x+=l.x*h,s.y+=l.y*h,s.z+=l.z*h,s.w+=l.w*u}return s},calcBasisFunctionDerivatives:function(t,e,n,r,i){for(var o=[],a=0;a<=n;++a)o[a]=0;var s=[];for(a=0;a<=r;++a)s[a]=o.slice(0);var c=[];for(a=0;a<=n;++a)c[a]=o.slice(0);c[0][0]=1;for(var l=o.slice(0),u=o.slice(0),h=1;h<=n;++h){l[h]=e-i[t+1-h],u[h]=i[t+h]-e;for(var d=0,p=0;p<h;++p){var f=u[p+1],m=l[h-p];c[h][p]=f+m;var g=c[p][h-1]/c[h][p];c[p][h]=d+f*g,d=m*g}c[h][h]=d}for(h=0;h<=n;++h)s[0][h]=c[h][n];for(p=0;p<=n;++p){var v=0,y=1,x=[];for(a=0;a<=n;++a)x[a]=o.slice(0);x[0][0]=1;for(var b=1;b<=r;++b){var w=0,_=p-b,M=n-b;p>=b&&(x[y][0]=x[v][0]/c[M+1][_],w=x[y][0]*c[_][M]);var S=p-1<=M?b-1:n-p;for(h=_>=-1?1:-_;h<=S;++h)x[y][h]=(x[v][h]-x[v][h-1])/c[M+1][_+h],w+=x[y][h]*c[_+h][M];p<=M&&(x[y][b]=-x[v][b-1]/c[M+1][p],w+=x[y][b]*c[p][M]),s[b][p]=w;h=v;v=y,y=h}}for(p=n,b=1;b<=r;++b){for(h=0;h<=n;++h)s[b][h]*=p;p*=n-b}return s},calcBSplineDerivatives:function(t,e,n,i,o){for(var a=o<t?o:t,s=[],c=this.findSpan(t,i,e),l=this.calcBasisFunctionDerivatives(c,i,t,a,e),u=[],h=0;h<n.length;++h){var d=(f=n[h].clone()).w;f.x*=d,f.y*=d,f.z*=d,u[h]=f}for(var p=0;p<=a;++p){for(var f=u[c-t].clone().multiplyScalar(l[p][0]),m=1;m<=t;++m)f.add(u[c-t+m].clone().multiplyScalar(l[p][m]));s[p]=f}for(p=a+1;p<=o+1;++p)s[p]=new r.Vector4(0,0,0);return s},calcKoverI:function(t,e){for(var n=1,r=2;r<=t;++r)n*=r;var i=1;for(r=2;r<=e;++r)i*=r;for(r=2;r<=t-e;++r)i*=r;return n/i},calcRationalCurveDerivatives:function(t){for(var e=t.length,n=[],i=[],o=0;o<e;++o){var a=t[o];n[o]=new r.Vector3(a.x,a.y,a.z),i[o]=a.w}for(var s=[],c=0;c<e;++c){var l=n[c].clone();for(o=1;o<=c;++o)l.sub(s[c-o].clone().multiplyScalar(this.calcKoverI(c,o)*i[o]));s[c]=l.divideScalar(i[0])}return s},calcNURBSDerivatives:function(t,e,n,r,i){var o=this.calcBSplineDerivatives(t,e,n,r,i);return this.calcRationalCurveDerivatives(o)},calcSurfacePoint:function(t,e,n,i,o,a,s,c){for(var l=this.findSpan(t,a,n),u=this.findSpan(e,s,i),h=this.calcBasisFunctions(l,a,t,n),d=this.calcBasisFunctions(u,s,e,i),p=[],f=0;f<=e;++f){p[f]=new r.Vector4(0,0,0,0);for(var m=0;m<=t;++m){var g=o[l-t+m][u-e+f].clone(),v=g.w;g.x*=v,g.y*=v,g.z*=v,p[f].add(g.multiplyScalar(h[m]))}}var y=new r.Vector4(0,0,0,0);for(f=0;f<=e;++f)y.add(p[f].multiplyScalar(d[f]));y.divideScalar(y.w),c.set(y.x,y.y,y.z)}},k=function(t,e,n,i,o){r.Curve.call(this),this.degree=t,this.knots=e,this.controlPoints=[],this.startKnot=i||0,this.endKnot=o||this.knots.length-1;for(var a=0;a<n.length;++a){var s=n[a];this.controlPoints[a]=new r.Vector4(s.x,s.y,s.z,s.w)}};(k.prototype=Object.create(r.Curve.prototype)).constructor=k,k.prototype.getPoint=function(t,e){var n=e||new r.Vector3,i=this.knots[this.startKnot]+t*(this.knots[this.endKnot]-this.knots[this.startKnot]),o=H.calcBSplinePoint(this.degree,this.knots,this.controlPoints,i);return 1!=o.w&&o.divideScalar(o.w),n.set(o.x,o.y,o.z)},k.prototype.getTangent=function(t,e){var n=e||new r.Vector3,i=this.knots[0]+t*(this.knots[this.knots.length-1]-this.knots[0]),o=H.calcNURBSDerivatives(this.degree,this.knots,this.controlPoints,i,1);return n.copy(o[1]).normalize(),n};var V=function(){var t,e,n;function i(t){r.Loader.call(this,t)}function o(t,e){this.textureLoader=t,this.manager=e}function a(){}function s(){}function c(){}function l(){}function u(t,e){this.dv=new DataView(t),this.offset=0,this.littleEndian=void 0===e||e}function h(){}function d(t){var e=t.match(/FBXVersion: (\d+)/);if(e)return parseInt(e[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function p(t){return t/46186158e3}i.prototype=Object.assign(Object.create(r.Loader.prototype),{constructor:i,load:function(t,e,n,i){var o=this,a=""===o.path?r.LoaderUtils.extractUrlBase(t):o.path,s=new r.FileLoader(this.manager);s.setPath(o.path),s.setResponseType("arraybuffer"),s.setRequestHeader(o.requestHeader),s.setWithCredentials(o.withCredentials),s.load(t,(function(n){try{e(o.parse(n,a))}catch(e){i?i(e):console.error(e),o.manager.itemError(t)}}),n,i)},parse:function(e,n){if(s="Kaydara FBX Binary  \0",(a=e).byteLength>=s.length&&s===w(a,0,s.length))t=(new l).parse(e);else{var i=w(e);if(!function(t){var e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"],n=0;for(var r=0;r<e.length;++r){if((o=void 0,o=t[(i=1)-1],t=t.slice(n+i),n++,o)===e[r])return!1}var i,o;return!0}(i))throw new Error("THREE.FBXLoader: Unknown format.");if(d(i)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+d(i));t=(new c).parse(i)}var a,s;return new o(new r.TextureLoader(this.manager).setPath(this.resourcePath||n).setCrossOrigin(this.crossOrigin),this.manager).parse(t)}}),o.prototype={constructor:o,parse:function(){e=this.parseConnections();var t=this.parseImages(),r=this.parseTextures(t),i=this.parseMaterials(r),o=this.parseDeformers(),s=(new a).parse(o);return this.parseScene(o,s,i),n},parseConnections:function(){var e=new Map;"Connections"in t&&t.Connections.connections.forEach((function(t){var n=t[0],r=t[1],i=t[2];e.has(n)||e.set(n,{parents:[],children:[]});var o={ID:r,relationship:i};e.get(n).parents.push(o),e.has(r)||e.set(r,{parents:[],children:[]});var a={ID:n,relationship:i};e.get(r).children.push(a)}));return e},parseImages:function(){var e={},n={};if("Video"in t.Objects){var r=t.Objects.Video;for(var i in r){var o=r[i];if(e[l=parseInt(i)]=o.RelativeFilename||o.Filename,"Content"in o){var a=o.Content instanceof ArrayBuffer&&o.Content.byteLength>0,s="string"==typeof o.Content&&""!==o.Content;if(a||s){var c=this.parseImage(r[i]);n[o.RelativeFilename||o.Filename]=c}}}}for(var l in e){var u=e[l];void 0!==n[u]?e[l]=n[u]:e[l]=e[l].split("\\").pop()}return e},parseImage:function(t){var e,n=t.Content,r=t.RelativeFilename||t.Filename,i=r.slice(r.lastIndexOf(".")+1).toLowerCase();switch(i){case"bmp":e="image/bmp";break;case"jpg":case"jpeg":e="image/jpeg";break;case"png":e="image/png";break;case"tif":e="image/tiff";break;case"tga":null===this.manager.getHandler(".tga")&&console.warn("FBXLoader: TGA loader not found, skipping ",r),e="image/tga";break;default:return void console.warn('FBXLoader: Image type "'+i+'" is not supported.')}if("string"==typeof n)return"data:"+e+";base64,"+n;var o=new Uint8Array(n);return window.URL.createObjectURL(new Blob([o],{type:e}))},parseTextures:function(e){var n=new Map;if("Texture"in t.Objects){var r=t.Objects.Texture;for(var i in r){var o=this.parseTexture(r[i],e);n.set(parseInt(i),o)}}return n},parseTexture:function(t,e){var n=this.loadTexture(t,e);n.ID=t.id,n.name=t.attrName;var i=t.WrapModeU,o=t.WrapModeV,a=void 0!==i?i.value:0,s=void 0!==o?o.value:0;if(n.wrapS=0===a?r.RepeatWrapping:r.ClampToEdgeWrapping,n.wrapT=0===s?r.RepeatWrapping:r.ClampToEdgeWrapping,"Scaling"in t){var c=t.Scaling.value;n.repeat.x=c[0],n.repeat.y=c[1]}return n},loadTexture:function(t,n){var i,o,a=this.textureLoader.path,s=e.get(t.id).children;void 0!==s&&s.length>0&&void 0!==n[s[0].ID]&&(0!==(i=n[s[0].ID]).indexOf("blob:")&&0!==i.indexOf("data:")||this.textureLoader.setPath(void 0));var c=t.FileName.slice(-3).toLowerCase();if("tga"===c){var l=this.manager.getHandler(".tga");null===l?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",t.RelativeFilename),o=new r.Texture):o=l.load(i)}else"psd"===c?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",t.RelativeFilename),o=new r.Texture):o=this.textureLoader.load(i);return this.textureLoader.setPath(a),o},parseMaterials:function(e){var n=new Map;if("Material"in t.Objects){var r=t.Objects.Material;for(var i in r){var o=this.parseMaterial(r[i],e);null!==o&&n.set(parseInt(i),o)}}return n},parseMaterial:function(t,n){var i=t.id,o=t.attrName,a=t.ShadingModel;if("object"==typeof a&&(a=a.value),!e.has(i))return null;var s,c=this.parseParameters(t,n,i);switch(a.toLowerCase()){case"phong":s=new r.MeshPhongMaterial;break;case"lambert":s=new r.MeshLambertMaterial;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',a),s=new r.MeshPhongMaterial}return s.setValues(c),s.name=o,s},parseParameters:function(t,n,i){var o={};t.BumpFactor&&(o.bumpScale=t.BumpFactor.value),t.Diffuse?o.color=(new r.Color).fromArray(t.Diffuse.value):!t.DiffuseColor||"Color"!==t.DiffuseColor.type&&"ColorRGB"!==t.DiffuseColor.type||(o.color=(new r.Color).fromArray(t.DiffuseColor.value)),t.DisplacementFactor&&(o.displacementScale=t.DisplacementFactor.value),t.Emissive?o.emissive=(new r.Color).fromArray(t.Emissive.value):!t.EmissiveColor||"Color"!==t.EmissiveColor.type&&"ColorRGB"!==t.EmissiveColor.type||(o.emissive=(new r.Color).fromArray(t.EmissiveColor.value)),t.EmissiveFactor&&(o.emissiveIntensity=parseFloat(t.EmissiveFactor.value)),t.Opacity&&(o.opacity=parseFloat(t.Opacity.value)),o.opacity<1&&(o.transparent=!0),t.ReflectionFactor&&(o.reflectivity=t.ReflectionFactor.value),t.Shininess&&(o.shininess=t.Shininess.value),t.Specular?o.specular=(new r.Color).fromArray(t.Specular.value):t.SpecularColor&&"Color"===t.SpecularColor.type&&(o.specular=(new r.Color).fromArray(t.SpecularColor.value));var a=this;return e.get(i).children.forEach((function(t){var e=t.relationship;switch(e){case"Bump":o.bumpMap=a.getTexture(n,t.ID);break;case"Maya|TEX_ao_map":o.aoMap=a.getTexture(n,t.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":o.map=a.getTexture(n,t.ID),o.map.encoding=r.sRGBEncoding;break;case"DisplacementColor":o.displacementMap=a.getTexture(n,t.ID);break;case"EmissiveColor":o.emissiveMap=a.getTexture(n,t.ID),o.emissiveMap.encoding=r.sRGBEncoding;break;case"NormalMap":case"Maya|TEX_normal_map":o.normalMap=a.getTexture(n,t.ID);break;case"ReflectionColor":o.envMap=a.getTexture(n,t.ID),o.envMap.mapping=r.EquirectangularReflectionMapping,o.envMap.encoding=r.sRGBEncoding;break;case"SpecularColor":o.specularMap=a.getTexture(n,t.ID),o.specularMap.encoding=r.sRGBEncoding;break;case"TransparentColor":case"TransparencyFactor":o.alphaMap=a.getTexture(n,t.ID),o.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",e)}})),o},getTexture:function(n,r){return"LayeredTexture"in t.Objects&&r in t.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),r=e.get(r).children[0].ID),n.get(r)},parseDeformers:function(){var n={},r={};if("Deformer"in t.Objects){var i=t.Objects.Deformer;for(var o in i){var a=i[o],s=e.get(parseInt(o));if("Skin"===a.attrType){var c=this.parseSkeleton(s,i);c.ID=o,s.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),c.geometryID=s.parents[0].ID,n[o]=c}else if("BlendShape"===a.attrType){var l={id:o};l.rawTargets=this.parseMorphTargets(s,i),l.id=o,s.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),r[o]=l}}}return{skeletons:n,morphTargets:r}},parseSkeleton:function(t,e){var n=[];return t.children.forEach((function(t){var i=e[t.ID];if("Cluster"===i.attrType){var o={ID:t.ID,indices:[],weights:[],transformLink:(new r.Matrix4).fromArray(i.TransformLink.a)};"Indexes"in i&&(o.indices=i.Indexes.a,o.weights=i.Weights.a),n.push(o)}})),{rawBones:n,bones:[]}},parseMorphTargets:function(t,n){for(var r=[],i=0;i<t.children.length;i++){var o=t.children[i],a=n[o.ID],s={name:a.attrName,initialWeight:a.DeformPercent,id:a.id,fullWeights:a.FullWeights.a};if("BlendShapeChannel"!==a.attrType)return;s.geoID=e.get(parseInt(o.ID)).children.filter((function(t){return void 0===t.relationship}))[0].ID,r.push(s)}return r},parseScene:function(i,o,a){n=new r.Group;var c=this.parseModels(i.skeletons,o,a),l=t.Objects.Model,u=this;c.forEach((function(t){var r=l[t.ID];u.setLookAtProperties(t,r),e.get(t.ID).parents.forEach((function(e){var n=c.get(e.ID);void 0!==n&&n.add(t)})),null===t.parent&&n.add(t)})),this.bindSkeleton(i.skeletons,o,c),this.createAmbientLight(),this.setupMorphMaterials(),n.traverse((function(t){if(t.userData.transformData){t.parent&&(t.userData.transformData.parentMatrixWorld=t.parent.matrix);var e=y(t.userData.transformData);t.applyMatrix4(e)}}));var h=(new s).parse();1===n.children.length&&n.children[0].isGroup&&(n.children[0].animations=h,n=n.children[0]),n.animations=h},parseModels:function(n,i,o){var a=new Map,s=t.Objects.Model;for(var c in s){var l=parseInt(c),u=s[c],h=e.get(l),d=this.buildSkeleton(h,n,l,u.attrName);if(!d){switch(u.attrType){case"Camera":d=this.createCamera(h);break;case"Light":d=this.createLight(h);break;case"Mesh":d=this.createMesh(h,i,o);break;case"NurbsCurve":d=this.createCurve(h,i);break;case"LimbNode":case"Root":d=new r.Bone;break;case"Null":default:d=new r.Group}d.name=u.attrName?r.PropertyBinding.sanitizeNodeName(u.attrName):"",d.ID=l}this.getTransformData(d,u),a.set(l,d)}return a},buildSkeleton:function(t,e,n,i){var o=null;return t.parents.forEach((function(t){for(var a in e){var s=e[a];s.rawBones.forEach((function(e,a){if(e.ID===t.ID){var c=o;(o=new r.Bone).matrixWorld.copy(e.transformLink),o.name=i?r.PropertyBinding.sanitizeNodeName(i):"",o.ID=n,s.bones[a]=o,null!==c&&o.add(c)}}))}})),o},createCamera:function(e){var n,i;if(e.children.forEach((function(e){var n=t.Objects.NodeAttribute[e.ID];void 0!==n&&(i=n)})),void 0===i)n=new r.Object3D;else{var o=0;void 0!==i.CameraProjectionType&&1===i.CameraProjectionType.value&&(o=1);var a=1;void 0!==i.NearPlane&&(a=i.NearPlane.value/1e3);var s=1e3;void 0!==i.FarPlane&&(s=i.FarPlane.value/1e3);var c=window.innerWidth,l=window.innerHeight;void 0!==i.AspectWidth&&void 0!==i.AspectHeight&&(c=i.AspectWidth.value,l=i.AspectHeight.value);var u=c/l,h=45;void 0!==i.FieldOfView&&(h=i.FieldOfView.value);var d=i.FocalLength?i.FocalLength.value:null;switch(o){case 0:n=new r.PerspectiveCamera(h,u,a,s),null!==d&&n.setFocalLength(d);break;case 1:n=new r.OrthographicCamera(-c/2,c/2,l/2,-l/2,a,s);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+o+"."),n=new r.Object3D}}return n},createLight:function(e){var n,i;if(e.children.forEach((function(e){var n=t.Objects.NodeAttribute[e.ID];void 0!==n&&(i=n)})),void 0===i)n=new r.Object3D;else{var o;o=void 0===i.LightType?0:i.LightType.value;var a=16777215;void 0!==i.Color&&(a=(new r.Color).fromArray(i.Color.value));var s=void 0===i.Intensity?1:i.Intensity.value/100;void 0!==i.CastLightOnObject&&0===i.CastLightOnObject.value&&(s=0);var c=0;void 0!==i.FarAttenuationEnd&&(c=void 0!==i.EnableFarAttenuation&&0===i.EnableFarAttenuation.value?0:i.FarAttenuationEnd.value);switch(o){case 0:n=new r.PointLight(a,s,c,1);break;case 1:n=new r.DirectionalLight(a,s);break;case 2:var l=Math.PI/3;void 0!==i.InnerAngle&&(l=r.MathUtils.degToRad(i.InnerAngle.value));var u=0;void 0!==i.OuterAngle&&(u=r.MathUtils.degToRad(i.OuterAngle.value),u=Math.max(u,1)),n=new r.SpotLight(a,s,c,l,u,1);break;default:console.warn("THREE.FBXLoader: Unknown light type "+i.LightType.value+", defaulting to a PointLight."),n=new r.PointLight(a,s)}void 0!==i.CastShadows&&1===i.CastShadows.value&&(n.castShadow=!0)}return n},createMesh:function(t,e,n){var i,o=null,a=null,s=[];return t.children.forEach((function(t){e.has(t.ID)&&(o=e.get(t.ID)),n.has(t.ID)&&s.push(n.get(t.ID))})),s.length>1?a=s:s.length>0?a=s[0]:(a=new r.MeshPhongMaterial({color:13421772}),s.push(a)),"color"in o.attributes&&s.forEach((function(t){t.vertexColors=!0})),o.FBX_Deformer?(s.forEach((function(t){t.skinning=!0})),(i=new r.SkinnedMesh(o,a)).normalizeSkinWeights()):i=new r.Mesh(o,a),i},createCurve:function(t,e){var n=t.children.reduce((function(t,n){return e.has(n.ID)&&(t=e.get(n.ID)),t}),null),i=new r.LineBasicMaterial({color:3342591,linewidth:1});return new r.Line(n,i)},getTransformData:function(t,e){var n={};"InheritType"in e&&(n.inheritType=parseInt(e.InheritType.value)),n.eulerOrder="RotationOrder"in e?x(e.RotationOrder.value):"ZYX","Lcl_Translation"in e&&(n.translation=e.Lcl_Translation.value),"PreRotation"in e&&(n.preRotation=e.PreRotation.value),"Lcl_Rotation"in e&&(n.rotation=e.Lcl_Rotation.value),"PostRotation"in e&&(n.postRotation=e.PostRotation.value),"Lcl_Scaling"in e&&(n.scale=e.Lcl_Scaling.value),"ScalingOffset"in e&&(n.scalingOffset=e.ScalingOffset.value),"ScalingPivot"in e&&(n.scalingPivot=e.ScalingPivot.value),"RotationOffset"in e&&(n.rotationOffset=e.RotationOffset.value),"RotationPivot"in e&&(n.rotationPivot=e.RotationPivot.value),t.userData.transformData=n},setLookAtProperties:function(i,o){"LookAtProperty"in o&&e.get(i.ID).children.forEach((function(e){if("LookAtProperty"===e.relationship){var o=t.Objects.Model[e.ID];if("Lcl_Translation"in o){var a=o.Lcl_Translation.value;void 0!==i.target?(i.target.position.fromArray(a),n.add(i.target)):i.lookAt((new r.Vector3).fromArray(a))}}}))},bindSkeleton:function(t,n,i){var o=this.parsePoseNodes();for(var a in t){var s=t[a];e.get(parseInt(s.ID)).parents.forEach((function(t){if(n.has(t.ID)){var a=t.ID;e.get(a).parents.forEach((function(t){i.has(t.ID)&&i.get(t.ID).bind(new r.Skeleton(s.bones),o[t.ID])}))}}))}},parsePoseNodes:function(){var e={};if("Pose"in t.Objects){var n=t.Objects.Pose;for(var i in n)if("BindPose"===n[i].attrType){var o=n[i].PoseNode;Array.isArray(o)?o.forEach((function(t){e[t.Node]=(new r.Matrix4).fromArray(t.Matrix.a)})):e[o.Node]=(new r.Matrix4).fromArray(o.Matrix.a)}}return e},createAmbientLight:function(){if("GlobalSettings"in t&&"AmbientColor"in t.GlobalSettings){var e=t.GlobalSettings.AmbientColor.value,i=e[0],o=e[1],a=e[2];if(0!==i||0!==o||0!==a){var s=new r.Color(i,o,a);n.add(new r.AmbientLight(s,1))}}},setupMorphMaterials:function(){var t=this;n.traverse((function(e){e.isMesh&&e.geometry.morphAttributes.position&&e.geometry.morphAttributes.position.length&&(Array.isArray(e.material)?e.material.forEach((function(n,r){t.setupMorphMaterial(e,n,r)})):t.setupMorphMaterial(e,e.material))}))},setupMorphMaterial:function(t,e,r){var i=t.uuid,o=e.uuid,a=!1;if(n.traverse((function(t){t.isMesh&&(Array.isArray(t.material)?t.material.forEach((function(e){e.uuid===o&&t.uuid!==i&&(a=!0)})):t.material.uuid===o&&t.uuid!==i&&(a=!0))})),!0===a){var s=e.clone();s.morphTargets=!0,void 0===r?t.material=s:t.material[r]=s}else e.morphTargets=!0}},a.prototype={constructor:a,parse:function(n){var r=new Map;if("Geometry"in t.Objects){var i=t.Objects.Geometry;for(var o in i){var a=e.get(parseInt(o)),s=this.parseGeometry(a,i[o],n);r.set(parseInt(o),s)}}return r},parseGeometry:function(t,e,n){switch(e.attrType){case"Mesh":return this.parseMeshGeometry(t,e,n);case"NurbsCurve":return this.parseNurbsGeometry(e)}},parseMeshGeometry:function(e,n,r){var i=r.skeletons,o=[],a=e.parents.map((function(e){return t.Objects.Model[e.ID]}));if(0!==a.length){var s=e.children.reduce((function(t,e){return void 0!==i[e.ID]&&(t=i[e.ID]),t}),null);e.children.forEach((function(t){void 0!==r.morphTargets[t.ID]&&o.push(r.morphTargets[t.ID])}));var c=a[0],l={};"RotationOrder"in c&&(l.eulerOrder=x(c.RotationOrder.value)),"InheritType"in c&&(l.inheritType=parseInt(c.InheritType.value)),"GeometricTranslation"in c&&(l.translation=c.GeometricTranslation.value),"GeometricRotation"in c&&(l.rotation=c.GeometricRotation.value),"GeometricScaling"in c&&(l.scale=c.GeometricScaling.value);var u=y(l);return this.genGeometry(n,s,o,u)}},genGeometry:function(t,e,n,i){var o=new r.BufferGeometry;t.attrName&&(o.name=t.attrName);var a=this.parseGeoNode(t,e),s=this.genBuffers(a),c=new r.Float32BufferAttribute(s.vertex,3);if(c.applyMatrix4(i),o.setAttribute("position",c),s.colors.length>0&&o.setAttribute("color",new r.Float32BufferAttribute(s.colors,3)),e&&(o.setAttribute("skinIndex",new r.Uint16BufferAttribute(s.weightsIndices,4)),o.setAttribute("skinWeight",new r.Float32BufferAttribute(s.vertexWeights,4)),o.FBX_Deformer=e),s.normal.length>0){var l=(new r.Matrix3).getNormalMatrix(i),u=new r.Float32BufferAttribute(s.normal,3);u.applyNormalMatrix(l),o.setAttribute("normal",u)}if(s.uvs.forEach((function(t,e){var n="uv"+(e+1).toString();0===e&&(n="uv"),o.setAttribute(n,new r.Float32BufferAttribute(s.uvs[e],2))})),a.material&&"AllSame"!==a.material.mappingType){var h=s.materialIndex[0],d=0;if(s.materialIndex.forEach((function(t,e){t!==h&&(o.addGroup(d,e-d,h),h=t,d=e)})),o.groups.length>0){var p=o.groups[o.groups.length-1],f=p.start+p.count;f!==s.materialIndex.length&&o.addGroup(f,s.materialIndex.length-f,h)}0===o.groups.length&&o.addGroup(0,s.materialIndex.length,s.materialIndex[0])}return this.addMorphTargets(o,t,n,i),o},parseGeoNode:function(t,e){var n={};if(n.vertexPositions=void 0!==t.Vertices?t.Vertices.a:[],n.vertexIndices=void 0!==t.PolygonVertexIndex?t.PolygonVertexIndex.a:[],t.LayerElementColor&&(n.color=this.parseVertexColors(t.LayerElementColor[0])),t.LayerElementMaterial&&(n.material=this.parseMaterialIndices(t.LayerElementMaterial[0])),t.LayerElementNormal&&(n.normal=this.parseNormals(t.LayerElementNormal[0])),t.LayerElementUV){n.uv=[];for(var r=0;t.LayerElementUV[r];)t.LayerElementUV[r].UV&&n.uv.push(this.parseUVs(t.LayerElementUV[r])),r++}return n.weightTable={},null!==e&&(n.skeleton=e,e.rawBones.forEach((function(t,e){t.indices.forEach((function(r,i){void 0===n.weightTable[r]&&(n.weightTable[r]=[]),n.weightTable[r].push({id:e,weight:t.weights[i]})}))}))),n},genBuffers:function(t){var e={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]},n=0,r=0,i=!1,o=[],a=[],s=[],c=[],l=[],u=[],h=this;return t.vertexIndices.forEach((function(d,p){var f=!1;d<0&&(d^=-1,f=!0);var g=[],v=[];if(o.push(3*d,3*d+1,3*d+2),t.color){var y=m(p,n,d,t.color);s.push(y[0],y[1],y[2])}if(t.skeleton){if(void 0!==t.weightTable[d]&&t.weightTable[d].forEach((function(t){v.push(t.weight),g.push(t.id)})),v.length>4){i||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),i=!0);var x=[0,0,0,0],b=[0,0,0,0];v.forEach((function(t,e){var n=t,r=g[e];b.forEach((function(t,e,i){if(n>t){i[e]=n,n=t;var o=x[e];x[e]=r,r=o}}))})),g=x,v=b}for(;v.length<4;)v.push(0),g.push(0);for(var w=0;w<4;++w)l.push(v[w]),u.push(g[w])}if(t.normal){y=m(p,n,d,t.normal);a.push(y[0],y[1],y[2])}if(t.material&&"AllSame"!==t.material.mappingType)var _=m(p,n,d,t.material)[0];t.uv&&t.uv.forEach((function(t,e){var r=m(p,n,d,t);void 0===c[e]&&(c[e]=[]),c[e].push(r[0]),c[e].push(r[1])})),r++,f&&(h.genFace(e,t,o,_,a,s,c,l,u,r),n++,r=0,o=[],a=[],s=[],c=[],l=[],u=[])})),e},genFace:function(t,e,n,r,i,o,a,s,c,l){for(var u=2;u<l;u++)t.vertex.push(e.vertexPositions[n[0]]),t.vertex.push(e.vertexPositions[n[1]]),t.vertex.push(e.vertexPositions[n[2]]),t.vertex.push(e.vertexPositions[n[3*(u-1)]]),t.vertex.push(e.vertexPositions[n[3*(u-1)+1]]),t.vertex.push(e.vertexPositions[n[3*(u-1)+2]]),t.vertex.push(e.vertexPositions[n[3*u]]),t.vertex.push(e.vertexPositions[n[3*u+1]]),t.vertex.push(e.vertexPositions[n[3*u+2]]),e.skeleton&&(t.vertexWeights.push(s[0]),t.vertexWeights.push(s[1]),t.vertexWeights.push(s[2]),t.vertexWeights.push(s[3]),t.vertexWeights.push(s[4*(u-1)]),t.vertexWeights.push(s[4*(u-1)+1]),t.vertexWeights.push(s[4*(u-1)+2]),t.vertexWeights.push(s[4*(u-1)+3]),t.vertexWeights.push(s[4*u]),t.vertexWeights.push(s[4*u+1]),t.vertexWeights.push(s[4*u+2]),t.vertexWeights.push(s[4*u+3]),t.weightsIndices.push(c[0]),t.weightsIndices.push(c[1]),t.weightsIndices.push(c[2]),t.weightsIndices.push(c[3]),t.weightsIndices.push(c[4*(u-1)]),t.weightsIndices.push(c[4*(u-1)+1]),t.weightsIndices.push(c[4*(u-1)+2]),t.weightsIndices.push(c[4*(u-1)+3]),t.weightsIndices.push(c[4*u]),t.weightsIndices.push(c[4*u+1]),t.weightsIndices.push(c[4*u+2]),t.weightsIndices.push(c[4*u+3])),e.color&&(t.colors.push(o[0]),t.colors.push(o[1]),t.colors.push(o[2]),t.colors.push(o[3*(u-1)]),t.colors.push(o[3*(u-1)+1]),t.colors.push(o[3*(u-1)+2]),t.colors.push(o[3*u]),t.colors.push(o[3*u+1]),t.colors.push(o[3*u+2])),e.material&&"AllSame"!==e.material.mappingType&&(t.materialIndex.push(r),t.materialIndex.push(r),t.materialIndex.push(r)),e.normal&&(t.normal.push(i[0]),t.normal.push(i[1]),t.normal.push(i[2]),t.normal.push(i[3*(u-1)]),t.normal.push(i[3*(u-1)+1]),t.normal.push(i[3*(u-1)+2]),t.normal.push(i[3*u]),t.normal.push(i[3*u+1]),t.normal.push(i[3*u+2])),e.uv&&e.uv.forEach((function(e,n){void 0===t.uvs[n]&&(t.uvs[n]=[]),t.uvs[n].push(a[n][0]),t.uvs[n].push(a[n][1]),t.uvs[n].push(a[n][2*(u-1)]),t.uvs[n].push(a[n][2*(u-1)+1]),t.uvs[n].push(a[n][2*u]),t.uvs[n].push(a[n][2*u+1])}))},addMorphTargets:function(e,n,r,i){if(0!==r.length){e.morphTargetsRelative=!0,e.morphAttributes.position=[];var o=this;r.forEach((function(r){r.rawTargets.forEach((function(r){var a=t.Objects.Geometry[r.geoID];void 0!==a&&o.genMorphGeometry(e,n,a,i,r.name)}))}))}},genMorphGeometry:function(t,e,n,i,o){for(var a=void 0!==e.PolygonVertexIndex?e.PolygonVertexIndex.a:[],s=void 0!==n.Vertices?n.Vertices.a:[],c=void 0!==n.Indexes?n.Indexes.a:[],l=3*t.attributes.position.count,u=new Float32Array(l),h=0;h<c.length;h++){var d=3*c[h];u[d]=s[3*h],u[d+1]=s[3*h+1],u[d+2]=s[3*h+2]}var p={vertexIndices:a,vertexPositions:u},f=this.genBuffers(p),m=new r.Float32BufferAttribute(f.vertex,3);m.name=o||n.attrName,m.applyMatrix4(i),t.morphAttributes.position.push(m)},parseNormals:function(t){var e=t.MappingInformationType,n=t.ReferenceInformationType,r=t.Normals.a,i=[];return"IndexToDirect"===n&&("NormalIndex"in t?i=t.NormalIndex.a:"NormalsIndex"in t&&(i=t.NormalsIndex.a)),{dataSize:3,buffer:r,indices:i,mappingType:e,referenceType:n}},parseUVs:function(t){var e=t.MappingInformationType,n=t.ReferenceInformationType,r=t.UV.a,i=[];return"IndexToDirect"===n&&(i=t.UVIndex.a),{dataSize:2,buffer:r,indices:i,mappingType:e,referenceType:n}},parseVertexColors:function(t){var e=t.MappingInformationType,n=t.ReferenceInformationType,r=t.Colors.a,i=[];return"IndexToDirect"===n&&(i=t.ColorIndex.a),{dataSize:4,buffer:r,indices:i,mappingType:e,referenceType:n}},parseMaterialIndices:function(t){var e=t.MappingInformationType,n=t.ReferenceInformationType;if("NoMappingInformation"===e)return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:n};for(var r=t.Materials.a,i=[],o=0;o<r.length;++o)i.push(o);return{dataSize:1,buffer:r,indices:i,mappingType:e,referenceType:n}},parseNurbsGeometry:function(t){if(void 0===k)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new r.BufferGeometry;var e=parseInt(t.Order);if(isNaN(e))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",t.Order,t.id),new r.BufferGeometry;for(var n,i,o=e-1,a=t.KnotVector.a,s=[],c=t.Points.a,l=0,u=c.length;l<u;l+=4)s.push((new r.Vector4).fromArray(c,l));if("Closed"===t.Form)s.push(s[0]);else if("Periodic"===t.Form){n=o,i=a.length-1-n;for(l=0;l<o;++l)s.push(s[l])}var h=new k(o,a,s,n,i).getPoints(7*s.length),d=new Float32Array(3*h.length);h.forEach((function(t,e){t.toArray(d,3*e)}));var p=new r.BufferGeometry;return p.setAttribute("position",new r.BufferAttribute(d,3)),p}},s.prototype={constructor:s,parse:function(){var t=[],e=this.parseClips();if(void 0!==e)for(var n in e){var r=e[n],i=this.addClip(r);t.push(i)}return t},parseClips:function(){if(void 0!==t.Objects.AnimationCurve){var e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);var n=this.parseAnimationLayers(e);return this.parseAnimStacks(n)}},parseAnimationCurveNodes:function(){var e=t.Objects.AnimationCurveNode,n=new Map;for(var r in e){var i=e[r];if(null!==i.attrName.match(/S|R|T|DeformPercent/)){var o={id:i.id,attr:i.attrName,curves:{}};n.set(o.id,o)}}return n},parseAnimationCurves:function(n){var r=t.Objects.AnimationCurve;for(var i in r){var o={id:r[i].id,times:r[i].KeyTime.a.map(p),values:r[i].KeyValueFloat.a},a=e.get(o.id);if(void 0!==a){var s=a.parents[0].ID,c=a.parents[0].relationship;c.match(/X/)?n.get(s).curves.x=o:c.match(/Y/)?n.get(s).curves.y=o:c.match(/Z/)?n.get(s).curves.z=o:c.match(/d|DeformPercent/)&&n.has(s)&&(n.get(s).curves.morph=o)}}},parseAnimationLayers:function(i){var o=t.Objects.AnimationLayer,a=new Map;for(var s in o){var c=[],l=e.get(parseInt(s));if(void 0!==l)l.children.forEach((function(o,a){if(i.has(o.ID)){var s=i.get(o.ID);if(void 0!==s.curves.x||void 0!==s.curves.y||void 0!==s.curves.z){if(void 0===c[a])if(void 0!==(f=e.get(o.ID).parents.filter((function(t){return void 0!==t.relationship}))[0].ID)){if(void 0===(u=t.Objects.Model[f.toString()]))return void console.warn("THREE.FBXLoader: Encountered a unused curve.",o);var l={modelName:u.attrName?r.PropertyBinding.sanitizeNodeName(u.attrName):"",ID:u.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};n.traverse((function(t){t.ID===u.id&&(l.transform=t.matrix,t.userData.transformData&&(l.eulerOrder=t.userData.transformData.eulerOrder))})),l.transform||(l.transform=new r.Matrix4),"PreRotation"in u&&(l.preRotation=u.PreRotation.value),"PostRotation"in u&&(l.postRotation=u.PostRotation.value),c[a]=l}c[a]&&(c[a][s.attr]=s)}else if(void 0!==s.curves.morph){if(void 0===c[a]){var u,h=e.get(o.ID).parents.filter((function(t){return void 0!==t.relationship}))[0].ID,d=e.get(h).parents[0].ID,p=e.get(d).parents[0].ID,f=e.get(p).parents[0].ID;l={modelName:(u=t.Objects.Model[f]).attrName?r.PropertyBinding.sanitizeNodeName(u.attrName):"",morphName:t.Objects.Deformer[h].attrName};c[a]=l}c[a][s.attr]=s}}})),a.set(parseInt(s),c)}return a},parseAnimStacks:function(n){var r=t.Objects.AnimationStack,i={};for(var o in r){var a=e.get(parseInt(o)).children;a.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");var s=n.get(a[0].ID);i[o]={name:r[o].attrName,layer:s}}return i},addClip:function(t){var e=[],n=this;return t.layer.forEach((function(t){e=e.concat(n.generateTracks(t))})),new r.AnimationClip(t.name,-1,e)},generateTracks:function(t){var e=[],n=new r.Vector3,i=new r.Quaternion,o=new r.Vector3;if(t.transform&&t.transform.decompose(n,i,o),n=n.toArray(),i=(new r.Euler).setFromQuaternion(i,t.eulerOrder).toArray(),o=o.toArray(),void 0!==t.T&&Object.keys(t.T.curves).length>0){var a=this.generateVectorTrack(t.modelName,t.T.curves,n,"position");void 0!==a&&e.push(a)}if(void 0!==t.R&&Object.keys(t.R.curves).length>0){var s=this.generateRotationTrack(t.modelName,t.R.curves,i,t.preRotation,t.postRotation,t.eulerOrder);void 0!==s&&e.push(s)}if(void 0!==t.S&&Object.keys(t.S.curves).length>0){var c=this.generateVectorTrack(t.modelName,t.S.curves,o,"scale");void 0!==c&&e.push(c)}if(void 0!==t.DeformPercent){var l=this.generateMorphTrack(t);void 0!==l&&e.push(l)}return e},generateVectorTrack:function(t,e,n,i){var o=this.getTimesForAllAxes(e),a=this.getKeyframeTrackValues(o,e,n);return new r.VectorKeyframeTrack(t+"."+i,o,a)},generateRotationTrack:function(t,e,n,i,o,a){void 0!==e.x&&(this.interpolateRotations(e.x),e.x.values=e.x.values.map(r.MathUtils.degToRad)),void 0!==e.y&&(this.interpolateRotations(e.y),e.y.values=e.y.values.map(r.MathUtils.degToRad)),void 0!==e.z&&(this.interpolateRotations(e.z),e.z.values=e.z.values.map(r.MathUtils.degToRad));var s=this.getTimesForAllAxes(e),c=this.getKeyframeTrackValues(s,e,n);void 0!==i&&((i=i.map(r.MathUtils.degToRad)).push(a),i=(new r.Euler).fromArray(i),i=(new r.Quaternion).setFromEuler(i)),void 0!==o&&((o=o.map(r.MathUtils.degToRad)).push(a),o=(new r.Euler).fromArray(o),o=(new r.Quaternion).setFromEuler(o).invert());for(var l=new r.Quaternion,u=new r.Euler,h=[],d=0;d<c.length;d+=3)u.set(c[d],c[d+1],c[d+2],a),l.setFromEuler(u),void 0!==i&&l.premultiply(i),void 0!==o&&l.multiply(o),l.toArray(h,d/3*4);return new r.QuaternionKeyframeTrack(t+".quaternion",s,h)},generateMorphTrack:function(t){var e=t.DeformPercent.curves.morph,i=e.values.map((function(t){return t/100})),o=n.getObjectByName(t.modelName).morphTargetDictionary[t.morphName];return new r.NumberKeyframeTrack(t.modelName+".morphTargetInfluences["+o+"]",e.times,i)},getTimesForAllAxes:function(t){var e=[];return void 0!==t.x&&(e=e.concat(t.x.times)),void 0!==t.y&&(e=e.concat(t.y.times)),void 0!==t.z&&(e=e.concat(t.z.times)),e=e.sort((function(t,e){return t-e})).filter((function(t,e,n){return n.indexOf(t)==e}))},getKeyframeTrackValues:function(t,e,n){var r=n,i=[],o=-1,a=-1,s=-1;return t.forEach((function(t){if(e.x&&(o=e.x.times.indexOf(t)),e.y&&(a=e.y.times.indexOf(t)),e.z&&(s=e.z.times.indexOf(t)),-1!==o){var n=e.x.values[o];i.push(n),r[0]=n}else i.push(r[0]);if(-1!==a){var c=e.y.values[a];i.push(c),r[1]=c}else i.push(r[1]);if(-1!==s){var l=e.z.values[s];i.push(l),r[2]=l}else i.push(r[2])})),i},interpolateRotations:function(t){for(var e=1;e<t.values.length;e++){var n=t.values[e-1],r=t.values[e]-n,i=Math.abs(r);if(i>=180){for(var o=i/180,a=r/o,s=n+a,c=t.times[e-1],l=(t.times[e]-c)/o,u=c+l,h=[],d=[];u<t.times[e];)h.push(u),u+=l,d.push(s),s+=a;t.times=_(t.times,e,h),t.values=_(t.values,e,d)}}}},c.prototype={constructor:c,getPrevNode:function(){return this.nodeStack[this.currentIndent-2]},getCurrentNode:function(){return this.nodeStack[this.currentIndent-1]},getCurrentProp:function(){return this.currentProp},pushStack:function(t){this.nodeStack.push(t),this.currentIndent+=1},popStack:function(){this.nodeStack.pop(),this.currentIndent-=1},setCurrentProp:function(t,e){this.currentProp=t,this.currentPropName=e},parse:function(t){this.currentIndent=0,this.allNodes=new h,this.nodeStack=[],this.currentProp=[],this.currentPropName="";var e=this,n=t.split(/[\r\n]+/);return n.forEach((function(t,r){var i=t.match(/^[\s\t]*;/),o=t.match(/^[\s\t]*$/);if(!i&&!o){var a=t.match("^\\t{"+e.currentIndent+"}(\\w+):(.*){",""),s=t.match("^\\t{"+e.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),c=t.match("^\\t{"+(e.currentIndent-1)+"}}");a?e.parseNodeBegin(t,a):s?e.parseNodeProperty(t,s,n[++r]):c?e.popStack():t.match(/^[^\s\t}]/)&&e.parseNodePropertyContinued(t)}})),this.allNodes},parseNodeBegin:function(t,e){var n=e[1].trim().replace(/^"/,"").replace(/"$/,""),r=e[2].split(",").map((function(t){return t.trim().replace(/^"/,"").replace(/"$/,"")})),i={name:n},o=this.parseNodeAttr(r),a=this.getCurrentNode();0===this.currentIndent?this.allNodes.add(n,i):n in a?("PoseNode"===n?a.PoseNode.push(i):void 0!==a[n].id&&(a[n]={},a[n][a[n].id]=a[n]),""!==o.id&&(a[n][o.id]=i)):"number"==typeof o.id?(a[n]={},a[n][o.id]=i):"Properties70"!==n&&(a[n]="PoseNode"===n?[i]:i),"number"==typeof o.id&&(i.id=o.id),""!==o.name&&(i.attrName=o.name),""!==o.type&&(i.attrType=o.type),this.pushStack(i)},parseNodeAttr:function(t){var e=t[0];""!==t[0]&&(e=parseInt(t[0]),isNaN(e)&&(e=t[0]));var n="",r="";return t.length>1&&(n=t[1].replace(/^(\w+)::/,""),r=t[2]),{id:e,name:n,type:r}},parseNodeProperty:function(t,e,n){var r=e[1].replace(/^"/,"").replace(/"$/,"").trim(),i=e[2].replace(/^"/,"").replace(/"$/,"").trim();"Content"===r&&","===i&&(i=n.replace(/"/g,"").replace(/,$/,"").trim());var o=this.getCurrentNode();if("Properties70"!==o.name){if("C"===r){var a=i.split(",").slice(1),s=parseInt(a[0]),c=parseInt(a[1]),l=i.split(",").slice(3);r="connections",function(t,e){for(var n=0,r=t.length,i=e.length;n<i;n++,r++)t[r]=e[n]}(i=[s,c],l=l.map((function(t){return t.trim().replace(/^"/,"")}))),void 0===o[r]&&(o[r]=[])}"Node"===r&&(o.id=i),r in o&&Array.isArray(o[r])?o[r].push(i):"a"!==r?o[r]=i:o.a=i,this.setCurrentProp(o,r),"a"===r&&","!==i.slice(-1)&&(o.a=b(i))}else this.parseNodeSpecialProperty(t,r,i)},parseNodePropertyContinued:function(t){var e=this.getCurrentNode();e.a+=t,","!==t.slice(-1)&&(e.a=b(e.a))},parseNodeSpecialProperty:function(t,e,n){var r=n.split('",').map((function(t){return t.trim().replace(/^\"/,"").replace(/\s/,"_")})),i=r[0],o=r[1],a=r[2],s=r[3],c=r[4];switch(o){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":c=parseFloat(c);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":c=b(c)}this.getPrevNode()[i]={type:o,type2:a,flag:s,value:c},this.setCurrentProp(this.getPrevNode(),i)}},l.prototype={constructor:l,parse:function(t){var e=new u(t);e.skip(23);var n=e.getUint32();if(n<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+n);for(var r=new h;!this.endOfContent(e);){var i=this.parseNode(e,n);null!==i&&r.add(i.name,i)}return r},endOfContent:function(t){return t.size()%16==0?(t.getOffset()+160+16&-16)>=t.size():t.getOffset()+160+16>=t.size()},parseNode:function(t,e){var n={},r=e>=7500?t.getUint64():t.getUint32(),i=e>=7500?t.getUint64():t.getUint32();e>=7500?t.getUint64():t.getUint32();var o=t.getUint8(),a=t.getString(o);if(0===r)return null;for(var s=[],c=0;c<i;c++)s.push(this.parseProperty(t));var l=s.length>0?s[0]:"",u=s.length>1?s[1]:"",h=s.length>2?s[2]:"";for(n.singleProperty=1===i&&t.getOffset()===r;r>t.getOffset();){var d=this.parseNode(t,e);null!==d&&this.parseSubNode(a,n,d)}return n.propertyList=s,"number"==typeof l&&(n.id=l),""!==u&&(n.attrName=u),""!==h&&(n.attrType=h),""!==a&&(n.name=a),n},parseSubNode:function(t,e,n){if(!0===n.singleProperty){var r=n.propertyList[0];Array.isArray(r)?(e[n.name]=n,n.a=r):e[n.name]=r}else if("Connections"===t&&"C"===n.name){var i=[];n.propertyList.forEach((function(t,e){0!==e&&i.push(t)})),void 0===e.connections&&(e.connections=[]),e.connections.push(i)}else if("Properties70"===n.name){Object.keys(n).forEach((function(t){e[t]=n[t]}))}else if("Properties70"===t&&"P"===n.name){var o,a=n.propertyList[0],s=n.propertyList[1],c=n.propertyList[2],l=n.propertyList[3];0===a.indexOf("Lcl ")&&(a=a.replace("Lcl ","Lcl_")),0===s.indexOf("Lcl ")&&(s=s.replace("Lcl ","Lcl_")),o="Color"===s||"ColorRGB"===s||"Vector"===s||"Vector3D"===s||0===s.indexOf("Lcl_")?[n.propertyList[4],n.propertyList[5],n.propertyList[6]]:n.propertyList[4],e[a]={type:s,type2:c,flag:l,value:o}}else void 0===e[n.name]?"number"==typeof n.id?(e[n.name]={},e[n.name][n.id]=n):e[n.name]=n:"PoseNode"===n.name?(Array.isArray(e[n.name])||(e[n.name]=[e[n.name]]),e[n.name].push(n)):void 0===e[n.name][n.id]&&(e[n.name][n.id]=n)},parseProperty:function(t){var e=t.getString(1);switch(e){case"C":return t.getBoolean();case"D":return t.getFloat64();case"F":return t.getFloat32();case"I":return t.getInt32();case"L":return t.getInt64();case"R":var n=t.getUint32();return t.getArrayBuffer(n);case"S":n=t.getUint32();return t.getString(n);case"Y":return t.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":var r=t.getUint32(),i=t.getUint32(),o=t.getUint32();if(0===i)switch(e){case"b":case"c":return t.getBooleanArray(r);case"d":return t.getFloat64Array(r);case"f":return t.getFloat32Array(r);case"i":return t.getInt32Array(r);case"l":return t.getInt64Array(r)}void 0===G&&console.error("THREE.FBXLoader: External library Inflate.min.js required, obtain or import from https://github.com/imaya/zlib.js");var a=new u(new G(new Uint8Array(t.getArrayBuffer(o))).decompress().buffer);switch(e){case"b":case"c":return a.getBooleanArray(r);case"d":return a.getFloat64Array(r);case"f":return a.getFloat32Array(r);case"i":return a.getInt32Array(r);case"l":return a.getInt64Array(r)}default:throw new Error("THREE.FBXLoader: Unknown property type "+e)}}},u.prototype={constructor:u,getOffset:function(){return this.offset},size:function(){return this.dv.buffer.byteLength},skip:function(t){this.offset+=t},getBoolean:function(){return 1==(1&this.getUint8())},getBooleanArray:function(t){for(var e=[],n=0;n<t;n++)e.push(this.getBoolean());return e},getUint8:function(){var t=this.dv.getUint8(this.offset);return this.offset+=1,t},getInt16:function(){var t=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,t},getInt32:function(){var t=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,t},getInt32Array:function(t){for(var e=[],n=0;n<t;n++)e.push(this.getInt32());return e},getUint32:function(){var t=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,t},getInt64:function(){var t,e;return this.littleEndian?(t=this.getUint32(),e=this.getUint32()):(e=this.getUint32(),t=this.getUint32()),2147483648&e?(e=4294967295&~e,4294967295===(t=4294967295&~t)&&(e=e+1&4294967295),-(4294967296*e+(t=t+1&4294967295))):4294967296*e+t},getInt64Array:function(t){for(var e=[],n=0;n<t;n++)e.push(this.getInt64());return e},getUint64:function(){var t,e;return this.littleEndian?(t=this.getUint32(),e=this.getUint32()):(e=this.getUint32(),t=this.getUint32()),4294967296*e+t},getFloat32:function(){var t=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t},getFloat32Array:function(t){for(var e=[],n=0;n<t;n++)e.push(this.getFloat32());return e},getFloat64:function(){var t=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t},getFloat64Array:function(t){for(var e=[],n=0;n<t;n++)e.push(this.getFloat64());return e},getArrayBuffer:function(t){var e=this.dv.buffer.slice(this.offset,this.offset+t);return this.offset+=t,e},getString:function(t){for(var e=[],n=0;n<t;n++)e[n]=this.getUint8();var i=e.indexOf(0);return i>=0&&(e=e.slice(0,i)),r.LoaderUtils.decodeText(new Uint8Array(e))}},h.prototype={constructor:h,add:function(t,e){this[t]=e}};var f=[];function m(t,e,n,r){var i;switch(r.mappingType){case"ByPolygonVertex":i=t;break;case"ByPolygon":i=e;break;case"ByVertice":i=n;break;case"AllSame":i=r.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+r.mappingType)}"IndexToDirect"===r.referenceType&&(i=r.indices[i]);var o=i*r.dataSize,a=o+r.dataSize;return function(t,e,n,r){for(var i=n,o=0;i<r;i++,o++)t[o]=e[i];return t}(f,r.buffer,o,a)}var g=new r.Euler,v=new r.Vector3;function y(t){var e,n=new r.Matrix4,i=new r.Matrix4,o=new r.Matrix4,a=new r.Matrix4,s=new r.Matrix4,c=new r.Matrix4,l=new r.Matrix4,u=new r.Matrix4,h=new r.Matrix4,d=new r.Matrix4,p=new r.Matrix4,f=t.inheritType?t.inheritType:0;(t.translation&&n.setPosition(v.fromArray(t.translation)),t.preRotation)&&((e=t.preRotation.map(r.MathUtils.degToRad)).push(t.eulerOrder),i.makeRotationFromEuler(g.fromArray(e)));t.rotation&&((e=t.rotation.map(r.MathUtils.degToRad)).push(t.eulerOrder),o.makeRotationFromEuler(g.fromArray(e)));t.postRotation&&((e=t.postRotation.map(r.MathUtils.degToRad)).push(t.eulerOrder),a.makeRotationFromEuler(g.fromArray(e)));t.scale&&s.scale(v.fromArray(t.scale)),t.scalingOffset&&l.setPosition(v.fromArray(t.scalingOffset)),t.scalingPivot&&c.setPosition(v.fromArray(t.scalingPivot)),t.rotationOffset&&u.setPosition(v.fromArray(t.rotationOffset)),t.rotationPivot&&h.setPosition(v.fromArray(t.rotationPivot)),t.parentMatrixWorld&&(d=t.parentMatrixWorld);var m=i.multiply(o).multiply(a),y=new r.Matrix4;d.extractRotation(y),(new r.Matrix4).copyPosition(d);var x=new r.Matrix4;x.copy(y).invert().multiply(d);var b=new r.Matrix4;if(0===f)b.copy(y).multiply(m).multiply(x).multiply(s);else if(1===f)b.copy(y).multiply(x).multiply(m).multiply(s);else{var w=new r.Matrix4;w.copy(s).invert();var _=(new r.Matrix4).multiply(x).multiply(w);b.copy(y).multiply(m).multiply(_).multiply(s)}var M=new r.Matrix4;M.copy(h).invert();var S=new r.Matrix4;S.copy(c).invert();var T=new r.Matrix4;T.copy(n).multiply(u).multiply(h).multiply(i).multiply(o).multiply(a).multiply(M).multiply(l).multiply(c).multiply(s).multiply(S);var E=(new r.Matrix4).copyPosition(T),A=(new r.Matrix4).copy(d).multiply(E);return p.copyPosition(A),T=(new r.Matrix4).multiply(p).multiply(b)}function x(t){var e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return 6===(t=t||0)?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[t]}function b(t){return t.split(",").map((function(t){return parseFloat(t)}))}function w(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=t.byteLength),r.LoaderUtils.decodeText(new Uint8Array(t,e,n))}function _(t,e,n){return t.slice(0,e).concat(n).concat(t.slice(e))}return i}()},function(t,e,n){"use strict";n.r(e),n.d(e,"Water",(function(){return a}));var r=n(0),i=function(t,e){r.Mesh.call(this,t),this.type="Reflector";var n=this,o=void 0!==(e=e||{}).color?new r.Color(e.color):new r.Color(8355711),a=e.textureWidth||512,s=e.textureHeight||512,c=e.clipBias||0,l=e.shader||i.ReflectorShader,u=new r.Plane,h=new r.Vector3,d=new r.Vector3,p=new r.Vector3,f=new r.Matrix4,m=new r.Vector3(0,0,-1),g=new r.Vector4,v=new r.Vector3,y=new r.Vector3,x=new r.Vector4,b=new r.Matrix4,w=new r.PerspectiveCamera,_={minFilter:r.LinearFilter,magFilter:r.LinearFilter,format:r.RGBFormat},M=new r.WebGLRenderTarget(a,s,_);r.MathUtils.isPowerOfTwo(a)&&r.MathUtils.isPowerOfTwo(s)||(M.texture.generateMipmaps=!1);var S=new r.ShaderMaterial({uniforms:r.UniformsUtils.clone(l.uniforms),fragmentShader:l.fragmentShader,vertexShader:l.vertexShader});S.uniforms.tDiffuse.value=M.texture,S.uniforms.color.value=o,S.uniforms.textureMatrix.value=b,this.material=S,this.onBeforeRender=function(t,e,r){if(d.setFromMatrixPosition(n.matrixWorld),p.setFromMatrixPosition(r.matrixWorld),f.extractRotation(n.matrixWorld),h.set(0,0,1),h.applyMatrix4(f),v.subVectors(d,p),!(v.dot(h)>0)){v.reflect(h).negate(),v.add(d),f.extractRotation(r.matrixWorld),m.set(0,0,-1),m.applyMatrix4(f),m.add(p),y.subVectors(d,m),y.reflect(h).negate(),y.add(d),w.position.copy(v),w.up.set(0,1,0),w.up.applyMatrix4(f),w.up.reflect(h),w.lookAt(y),w.far=r.far,w.updateMatrixWorld(),w.projectionMatrix.copy(r.projectionMatrix),b.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),b.multiply(w.projectionMatrix),b.multiply(w.matrixWorldInverse),b.multiply(n.matrixWorld),u.setFromNormalAndCoplanarPoint(h,d),u.applyMatrix4(w.matrixWorldInverse),g.set(u.normal.x,u.normal.y,u.normal.z,u.constant);var i=w.projectionMatrix;x.x=(Math.sign(g.x)+i.elements[8])/i.elements[0],x.y=(Math.sign(g.y)+i.elements[9])/i.elements[5],x.z=-1,x.w=(1+i.elements[10])/i.elements[14],g.multiplyScalar(2/g.dot(x)),i.elements[2]=g.x,i.elements[6]=g.y,i.elements[10]=g.z+1-c,i.elements[14]=g.w,M.texture.encoding=t.outputEncoding,n.visible=!1;var o=t.getRenderTarget(),a=t.xr.enabled,s=t.shadowMap.autoUpdate;t.xr.enabled=!1,t.shadowMap.autoUpdate=!1,t.setRenderTarget(M),t.state.buffers.depth.setMask(!0),!1===t.autoClear&&t.clear(),t.render(e,w),t.xr.enabled=a,t.shadowMap.autoUpdate=s,t.setRenderTarget(o);var l=r.viewport;void 0!==l&&t.state.viewport(l),n.visible=!0}},this.getRenderTarget=function(){return M}};i.prototype=Object.create(r.Mesh.prototype),i.prototype.constructor=i,i.ReflectorShader={uniforms:{color:{value:null},tDiffuse:{value:null},textureMatrix:{value:null}},vertexShader:["uniform mat4 textureMatrix;","varying vec4 vUv;","void main() {","\tvUv = textureMatrix * vec4( position, 1.0 );","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform vec3 color;","uniform sampler2D tDiffuse;","varying vec4 vUv;","float blendOverlay( float base, float blend ) {","\treturn( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );","}","vec3 blendOverlay( vec3 base, vec3 blend ) {","\treturn vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );","}","void main() {","\tvec4 base = texture2DProj( tDiffuse, vUv );","\tgl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );","}"].join("\n")};var o=function(t,e){r.Mesh.call(this,t),this.type="Refractor";var n=this,i=void 0!==(e=e||{}).color?new r.Color(e.color):new r.Color(8355711),a=e.textureWidth||512,s=e.textureHeight||512,c=e.clipBias||0,l=e.shader||o.RefractorShader,u=new r.PerspectiveCamera;u.matrixAutoUpdate=!1,u.userData.refractor=!0;var h=new r.Plane,d=new r.Matrix4,p={minFilter:r.LinearFilter,magFilter:r.LinearFilter,format:r.RGBFormat},f=new r.WebGLRenderTarget(a,s,p);r.MathUtils.isPowerOfTwo(a)&&r.MathUtils.isPowerOfTwo(s)||(f.texture.generateMipmaps=!1),this.material=new r.ShaderMaterial({uniforms:r.UniformsUtils.clone(l.uniforms),vertexShader:l.vertexShader,fragmentShader:l.fragmentShader,transparent:!0}),this.material.uniforms.color.value=i,this.material.uniforms.tDiffuse.value=f.texture,this.material.uniforms.textureMatrix.value=d;var m,g,v,y,x,b,w,_,M=(m=new r.Vector3,g=new r.Vector3,v=new r.Matrix4,y=new r.Vector3,x=new r.Vector3,function(t){return m.setFromMatrixPosition(n.matrixWorld),g.setFromMatrixPosition(t.matrixWorld),y.subVectors(m,g),v.extractRotation(n.matrixWorld),x.set(0,0,1),x.applyMatrix4(v),y.dot(x)<0}),S=function(){var t=new r.Vector3,e=new r.Vector3,i=new r.Quaternion,o=new r.Vector3;return function(){n.matrixWorld.decompose(e,i,o),t.set(0,0,1).applyQuaternion(i).normalize(),t.negate(),h.setFromNormalAndCoplanarPoint(t,e)}}(),T=(b=new r.Plane,w=new r.Vector4,_=new r.Vector4,function(t){u.matrixWorld.copy(t.matrixWorld),u.matrixWorldInverse.copy(u.matrixWorld).invert(),u.projectionMatrix.copy(t.projectionMatrix),u.far=t.far,b.copy(h),b.applyMatrix4(u.matrixWorldInverse),w.set(b.normal.x,b.normal.y,b.normal.z,b.constant);var e=u.projectionMatrix;_.x=(Math.sign(w.x)+e.elements[8])/e.elements[0],_.y=(Math.sign(w.y)+e.elements[9])/e.elements[5],_.z=-1,_.w=(1+e.elements[10])/e.elements[14],w.multiplyScalar(2/w.dot(_)),e.elements[2]=w.x,e.elements[6]=w.y,e.elements[10]=w.z+1-c,e.elements[14]=w.w});this.onBeforeRender=function(t,e,r){f.texture.encoding=t.outputEncoding,!0!==r.userData.refractor&&!0!=!M(r)&&(S(),function(t){d.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),d.multiply(t.projectionMatrix),d.multiply(t.matrixWorldInverse),d.multiply(n.matrixWorld)}(r),T(r),function(t,e,r){n.visible=!1;var i=t.getRenderTarget(),o=t.xr.enabled,a=t.shadowMap.autoUpdate;t.xr.enabled=!1,t.shadowMap.autoUpdate=!1,t.setRenderTarget(f),!1===t.autoClear&&t.clear(),t.render(e,u),t.xr.enabled=o,t.shadowMap.autoUpdate=a,t.setRenderTarget(i);var s=r.viewport;void 0!==s&&t.state.viewport(s),n.visible=!0}(t,e,r))},this.getRenderTarget=function(){return f}};o.prototype=Object.create(r.Mesh.prototype),o.prototype.constructor=o,o.RefractorShader={uniforms:{color:{value:null},tDiffuse:{value:null},textureMatrix:{value:null}},vertexShader:["uniform mat4 textureMatrix;","varying vec4 vUv;","void main() {","\tvUv = textureMatrix * vec4( position, 1.0 );","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform vec3 color;","uniform sampler2D tDiffuse;","varying vec4 vUv;","float blendOverlay( float base, float blend ) {","\treturn( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );","}","vec3 blendOverlay( vec3 base, vec3 blend ) {","\treturn vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );","}","void main() {","\tvec4 base = texture2DProj( tDiffuse, vUv );","\tgl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );","}"].join("\n")};var a=function(t,e){r.Mesh.call(this,t),this.type="Water";var n=this,s=void 0!==(e=e||{}).color?new r.Color(e.color):new r.Color(16777215),c=e.textureWidth||512,l=e.textureHeight||512,u=e.clipBias||0,h=e.flowDirection||new r.Vector2(1,0),d=e.flowSpeed||.03,p=e.reflectivity||.02,f=e.scale||1,m=e.shader||a.WaterShader,g=void 0!==e.encoding?e.encoding:r.LinearEncoding,v=new r.TextureLoader,y=e.flowMap||void 0,x=e.normalMap0||v.load("textures/water/Water_1_M_Normal.jpg"),b=e.normalMap1||v.load("textures/water/Water_2_M_Normal.jpg"),w=new r.Matrix4,_=new r.Clock;if(void 0!==i)if(void 0!==o){var M=new i(t,{textureWidth:c,textureHeight:l,clipBias:u,encoding:g}),S=new o(t,{textureWidth:c,textureHeight:l,clipBias:u,encoding:g});M.matrixAutoUpdate=!1,S.matrixAutoUpdate=!1,this.material=new r.ShaderMaterial({uniforms:r.UniformsUtils.merge([r.UniformsLib.fog,m.uniforms]),vertexShader:m.vertexShader,fragmentShader:m.fragmentShader,transparent:!0,fog:!0}),void 0!==y?(this.material.defines.USE_FLOWMAP="",this.material.uniforms.tFlowMap={type:"t",value:y}):this.material.uniforms.flowDirection={type:"v2",value:h},x.wrapS=x.wrapT=r.RepeatWrapping,b.wrapS=b.wrapT=r.RepeatWrapping,this.material.uniforms.tReflectionMap.value=M.getRenderTarget().texture,this.material.uniforms.tRefractionMap.value=S.getRenderTarget().texture,this.material.uniforms.tNormalMap0.value=x,this.material.uniforms.tNormalMap1.value=b,this.material.uniforms.color.value=s,this.material.uniforms.reflectivity.value=p,this.material.uniforms.textureMatrix.value=w,this.material.uniforms.config.value.x=0,this.material.uniforms.config.value.y=.075,this.material.uniforms.config.value.z=.075,this.material.uniforms.config.value.w=f,this.onBeforeRender=function(t,e,r){var i,o;!function(t){w.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),w.multiply(t.projectionMatrix),w.multiply(t.matrixWorldInverse),w.multiply(n.matrixWorld)}(r),i=_.getDelta(),(o=n.material.uniforms.config).value.x+=d*i,o.value.y=o.value.x+.075,o.value.x>=.15?(o.value.x=0,o.value.y=.075):o.value.y>=.15&&(o.value.y=o.value.y-.15),n.visible=!1,M.matrixWorld.copy(n.matrixWorld),S.matrixWorld.copy(n.matrixWorld),M.onBeforeRender(t,e,r),S.onBeforeRender(t,e,r),n.visible=!0}}else console.error("THREE.Water: Required component Refractor not found.");else console.error("THREE.Water: Required component Reflector not found.")};a.prototype=Object.create(r.Mesh.prototype),a.prototype.constructor=a,a.WaterShader={uniforms:{color:{type:"c",value:null},reflectivity:{type:"f",value:0},tReflectionMap:{type:"t",value:null},tRefractionMap:{type:"t",value:null},tNormalMap0:{type:"t",value:null},tNormalMap1:{type:"t",value:null},textureMatrix:{type:"m4",value:null},config:{type:"v4",value:new r.Vector4}},vertexShader:["#include <common>","#include <fog_pars_vertex>","#include <logdepthbuf_pars_vertex>","uniform mat4 textureMatrix;","varying vec4 vCoord;","varying vec2 vUv;","varying vec3 vToEye;","void main() {","\tvUv = uv;","\tvCoord = textureMatrix * vec4( position, 1.0 );","\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );","\tvToEye = cameraPosition - worldPosition.xyz;","\tvec4 mvPosition =  viewMatrix * worldPosition;","\tgl_Position = projectionMatrix * mvPosition;","\t#include <logdepthbuf_vertex>","\t#include <fog_vertex>","}"].join("\n"),fragmentShader:["#include <common>","#include <fog_pars_fragment>","#include <logdepthbuf_pars_fragment>","uniform sampler2D tReflectionMap;","uniform sampler2D tRefractionMap;","uniform sampler2D tNormalMap0;","uniform sampler2D tNormalMap1;","#ifdef USE_FLOWMAP","\tuniform sampler2D tFlowMap;","#else","\tuniform vec2 flowDirection;","#endif","uniform vec3 color;","uniform float reflectivity;","uniform vec4 config;","varying vec4 vCoord;","varying vec2 vUv;","varying vec3 vToEye;","void main() {","\t#include <logdepthbuf_fragment>","\tfloat flowMapOffset0 = config.x;","\tfloat flowMapOffset1 = config.y;","\tfloat halfCycle = config.z;","\tfloat scale = config.w;","\tvec3 toEye = normalize( vToEye );","\tvec2 flow;","\t#ifdef USE_FLOWMAP","\t\tflow = texture2D( tFlowMap, vUv ).rg * 2.0 - 1.0;","\t#else","\t\tflow = flowDirection;","\t#endif","\tflow.x *= - 1.0;","\tvec4 normalColor0 = texture2D( tNormalMap0, ( vUv * scale ) + flow * flowMapOffset0 );","\tvec4 normalColor1 = texture2D( tNormalMap1, ( vUv * scale ) + flow * flowMapOffset1 );","\tfloat flowLerp = abs( halfCycle - flowMapOffset0 ) / halfCycle;","\tvec4 normalColor = mix( normalColor0, normalColor1, flowLerp );","\tvec3 normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );","\tfloat theta = max( dot( toEye, normal ), 0.0 );","\tfloat reflectance = reflectivity + ( 1.0 - reflectivity ) * pow( ( 1.0 - theta ), 5.0 );","\tvec3 coord = vCoord.xyz / vCoord.w;","\tvec2 uv = coord.xy + coord.z * normal.xz * 0.05;","\tvec4 reflectColor = texture2D( tReflectionMap, vec2( 1.0 - uv.x, uv.y ) );","\tvec4 refractColor = texture2D( tRefractionMap, uv );","\tgl_FragColor = vec4( color, 1.0 ) * mix( refractColor, reflectColor, reflectance );","\t#include <tonemapping_fragment>","\t#include <encodings_fragment>","\t#include <fog_fragment>","}"].join("\n")}},function(t,e,n){"use strict";n.r(e),n.d(e,"EffectComposer",(function(){return l})),n.d(e,"Pass",(function(){return p}));var r=n(0),i={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","\tvec4 texel = texture2D( tDiffuse, vUv );","\tgl_FragColor = opacity * texel;","}"].join("\n")},o=n(2),a=n(1),s=function(t,e){a.a.call(this),this.scene=t,this.camera=e,this.clear=!0,this.needsSwap=!1,this.inverse=!1};s.prototype=Object.assign(Object.create(a.a.prototype),{constructor:s,render:function(t,e,n){var r,i,o=t.getContext(),a=t.state;a.buffers.color.setMask(!1),a.buffers.depth.setMask(!1),a.buffers.color.setLocked(!0),a.buffers.depth.setLocked(!0),this.inverse?(r=0,i=1):(r=1,i=0),a.buffers.stencil.setTest(!0),a.buffers.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),a.buffers.stencil.setFunc(o.ALWAYS,r,4294967295),a.buffers.stencil.setClear(i),a.buffers.stencil.setLocked(!0),t.setRenderTarget(n),this.clear&&t.clear(),t.render(this.scene,this.camera),t.setRenderTarget(e),this.clear&&t.clear(),t.render(this.scene,this.camera),a.buffers.color.setLocked(!1),a.buffers.depth.setLocked(!1),a.buffers.stencil.setLocked(!1),a.buffers.stencil.setFunc(o.EQUAL,1,4294967295),a.buffers.stencil.setOp(o.KEEP,o.KEEP,o.KEEP),a.buffers.stencil.setLocked(!0)}});var c=function(){a.a.call(this),this.needsSwap=!1};c.prototype=Object.create(a.a.prototype),Object.assign(c.prototype,{render:function(t){t.state.buffers.stencil.setLocked(!1),t.state.buffers.stencil.setTest(!1)}});var l=function(t,e){if(this.renderer=t,void 0===e){var n={minFilter:r.LinearFilter,magFilter:r.LinearFilter,format:r.RGBAFormat},a=t.getSize(new r.Vector2);this._pixelRatio=t.getPixelRatio(),this._width=a.width,this._height=a.height,(e=new r.WebGLRenderTarget(this._width*this._pixelRatio,this._height*this._pixelRatio,n)).texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=e.width,this._height=e.height;this.renderTarget1=e,this.renderTarget2=e.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],void 0===i&&console.error("THREE.EffectComposer relies on CopyShader"),void 0===o.ShaderPass&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new o.ShaderPass(i),this.clock=new r.Clock};Object.assign(l.prototype,{swapBuffers:function(){var t=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=t},addPass:function(t){this.passes.push(t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)},insertPass:function(t,e){this.passes.splice(e,0,t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)},removePass:function(t){const e=this.passes.indexOf(t);-1!==e&&this.passes.splice(e,1)},isLastEnabledPass:function(t){for(var e=t+1;e<this.passes.length;e++)if(this.passes[e].enabled)return!1;return!0},render:function(t){void 0===t&&(t=this.clock.getDelta());var e,n,r=this.renderer.getRenderTarget(),i=!1,o=this.passes.length;for(n=0;n<o;n++)if(!1!==(e=this.passes[n]).enabled){if(e.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(n),e.render(this.renderer,this.writeBuffer,this.readBuffer,t,i),e.needsSwap){if(i){var a=this.renderer.getContext(),l=this.renderer.state.buffers.stencil;l.setFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,t),l.setFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==s&&(e instanceof s?i=!0:e instanceof c&&(i=!1))}this.renderer.setRenderTarget(r)},reset:function(t){if(void 0===t){var e=this.renderer.getSize(new r.Vector2);this._pixelRatio=this.renderer.getPixelRatio(),this._width=e.width,this._height=e.height,(t=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=t,this.renderTarget2=t.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2},setSize:function(t,e){this._width=t,this._height=e;var n=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(n,r),this.renderTarget2.setSize(n,r);for(var i=0;i<this.passes.length;i++)this.passes[i].setSize(n,r)},setPixelRatio:function(t){this._pixelRatio=t,this.setSize(this._width,this._height)}});var u,h,d,p=function(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1};Object.assign(p.prototype,{setSize:function(){},render:function(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}),p.FullScreenQuad=(u=new r.OrthographicCamera(-1,1,1,-1,0,1),h=new r.PlaneBufferGeometry(2,2),d=function(t){this._mesh=new r.Mesh(h,t)},Object.defineProperty(d.prototype,"material",{get:function(){return this._mesh.material},set:function(t){this._mesh.material=t}}),Object.assign(d.prototype,{dispose:function(){this._mesh.geometry.dispose()},render:function(t){t.render(this._mesh,u)}}),d)},function(t,e,n){"use strict";n.r(e),n.d(e,"ConvexGeometry",(function(){return o})),n.d(e,"ConvexBufferGeometry",(function(){return a}));var r=n(0),i=function(){var t,e,n,i,o=new r.Vector3;function a(){this.tolerance=-1,this.faces=[],this.newFaces=[],this.assigned=new u,this.unassigned=new u,this.vertices=[]}function s(){this.normal=new r.Vector3,this.midpoint=new r.Vector3,this.area=0,this.constant=0,this.outside=null,this.mark=0,this.edge=null}function c(t,e){this.vertex=t,this.prev=null,this.next=null,this.twin=null,this.face=e}function l(t){this.point=t,this.prev=null,this.next=null,this.face=null}function u(){this.head=null,this.tail=null}return Object.assign(a.prototype,{setFromPoints:function(t){!0!==Array.isArray(t)&&console.error("THREE.ConvexHull: Points parameter is not an array."),t.length<4&&console.error("THREE.ConvexHull: The algorithm needs at least four points."),this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.vertices.push(new l(t[e]));return this.compute(),this},setFromObject:function(t){var e=[];return t.updateMatrixWorld(!0),t.traverse((function(t){var n,i,o,a=t.geometry;if(void 0!==a)if(a.isGeometry){var s=a.vertices;for(n=0,i=s.length;n<i;n++)(o=s[n].clone()).applyMatrix4(t.matrixWorld),e.push(o)}else if(a.isBufferGeometry){var c=a.attributes.position;if(void 0!==c)for(n=0,i=c.count;n<i;n++)(o=new r.Vector3).fromBufferAttribute(c,n).applyMatrix4(t.matrixWorld),e.push(o)}})),this.setFromPoints(e)},containsPoint:function(t){for(var e=this.faces,n=0,r=e.length;n<r;n++){if(e[n].distanceToPoint(t)>this.tolerance)return!1}return!0},intersectRay:function(t,e){for(var n=this.faces,r=-1/0,i=1/0,o=0,a=n.length;o<a;o++){var s=n[o],c=s.distanceToPoint(t.origin),l=s.normal.dot(t.direction);if(c>0&&l>=0)return null;var u=0!==l?-c/l:0;if(!(u<=0)&&(l>0?i=Math.min(u,i):r=Math.max(u,r),r>i))return null}return r!==-1/0?t.at(r,e):t.at(i,e),e},intersectsRay:function(t){return null!==this.intersectRay(t,o)},makeEmpty:function(){return this.faces=[],this.vertices=[],this},addVertexToFace:function(t,e){return t.face=e,null===e.outside?this.assigned.append(t):this.assigned.insertBefore(e.outside,t),e.outside=t,this},removeVertexFromFace:function(t,e){return t===e.outside&&(null!==t.next&&t.next.face===e?e.outside=t.next:e.outside=null),this.assigned.remove(t),this},removeAllVerticesFromFace:function(t){if(null!==t.outside){for(var e=t.outside,n=t.outside;null!==n.next&&n.next.face===t;)n=n.next;return this.assigned.removeSubList(e,n),e.prev=n.next=null,t.outside=null,e}},deleteFaceVertices:function(t,e){var n=this.removeAllVerticesFromFace(t);if(void 0!==n)if(void 0===e)this.unassigned.appendChain(n);else{var r=n;do{var i=r.next;e.distanceToPoint(r.point)>this.tolerance?this.addVertexToFace(r,e):this.unassigned.append(r),r=i}while(null!==r)}return this},resolveUnassignedPoints:function(t){if(!1===this.unassigned.isEmpty()){var e=this.unassigned.first();do{for(var n=e.next,r=this.tolerance,i=null,o=0;o<t.length;o++){var a=t[o];if(0===a.mark){var s=a.distanceToPoint(e.point);if(s>r&&(r=s,i=a),r>1e3*this.tolerance)break}}null!==i&&this.addVertexToFace(e,i),e=n}while(null!==e)}return this},computeExtremes:function(){var t,e,n,i=new r.Vector3,o=new r.Vector3,a=[],s=[];for(t=0;t<3;t++)a[t]=s[t]=this.vertices[0];for(i.copy(this.vertices[0].point),o.copy(this.vertices[0].point),t=0,e=this.vertices.length;t<e;t++){var c=this.vertices[t],l=c.point;for(n=0;n<3;n++)l.getComponent(n)<i.getComponent(n)&&(i.setComponent(n,l.getComponent(n)),a[n]=c);for(n=0;n<3;n++)l.getComponent(n)>o.getComponent(n)&&(o.setComponent(n,l.getComponent(n)),s[n]=c)}return this.tolerance=3*Number.EPSILON*(Math.max(Math.abs(i.x),Math.abs(o.x))+Math.max(Math.abs(i.y),Math.abs(o.y))+Math.max(Math.abs(i.z),Math.abs(o.z))),{min:a,max:s}},computeInitialHull:function(){void 0===t&&(t=new r.Line3,e=new r.Plane,n=new r.Vector3);var i,o,a,c,l,u,h,d,p,f=this.vertices,m=this.computeExtremes(),g=m.min,v=m.max,y=0,x=0;for(u=0;u<3;u++)(p=v[u].point.getComponent(u)-g[u].point.getComponent(u))>y&&(y=p,x=u);for(o=g[x],a=v[x],y=0,t.set(o.point,a.point),u=0,h=this.vertices.length;u<h;u++)(i=f[u])!==o&&i!==a&&(t.closestPointToPoint(i.point,!0,n),(p=n.distanceToSquared(i.point))>y&&(y=p,c=i));for(y=-1,e.setFromCoplanarPoints(o.point,a.point,c.point),u=0,h=this.vertices.length;u<h;u++)(i=f[u])!==o&&i!==a&&i!==c&&(p=Math.abs(e.distanceToPoint(i.point)))>y&&(y=p,l=i);var b=[];if(e.distanceToPoint(l.point)<0)for(b.push(s.create(o,a,c),s.create(l,a,o),s.create(l,c,a),s.create(l,o,c)),u=0;u<3;u++)d=(u+1)%3,b[u+1].getEdge(2).setTwin(b[0].getEdge(d)),b[u+1].getEdge(1).setTwin(b[d+1].getEdge(0));else for(b.push(s.create(o,c,a),s.create(l,o,a),s.create(l,a,c),s.create(l,c,o)),u=0;u<3;u++)d=(u+1)%3,b[u+1].getEdge(2).setTwin(b[0].getEdge((3-u)%3)),b[u+1].getEdge(0).setTwin(b[d+1].getEdge(1));for(u=0;u<4;u++)this.faces.push(b[u]);for(u=0,h=f.length;u<h;u++)if((i=f[u])!==o&&i!==a&&i!==c&&i!==l){y=this.tolerance;var w=null;for(d=0;d<4;d++)(p=this.faces[d].distanceToPoint(i.point))>y&&(y=p,w=this.faces[d]);null!==w&&this.addVertexToFace(i,w)}return this},reindexFaces:function(){for(var t=[],e=0;e<this.faces.length;e++){var n=this.faces[e];0===n.mark&&t.push(n)}return this.faces=t,this},nextVertexToAdd:function(){if(!1===this.assigned.isEmpty()){var t,e=0,n=this.assigned.first().face,r=n.outside;do{var i=n.distanceToPoint(r.point);i>e&&(e=i,t=r),r=r.next}while(null!==r&&r.face===n);return t}},computeHorizon:function(t,e,n,r){var i;this.deleteFaceVertices(n),n.mark=1,i=null===e?e=n.getEdge(0):e.next;do{var o=i.twin,a=o.face;0===a.mark&&(a.distanceToPoint(t)>this.tolerance?this.computeHorizon(t,o,a,r):r.push(i)),i=i.next}while(i!==e);return this},addAdjoiningFace:function(t,e){var n=s.create(t,e.tail(),e.head());return this.faces.push(n),n.getEdge(-1).setTwin(e.twin),n.getEdge(0)},addNewFaces:function(t,e){this.newFaces=[];for(var n=null,r=null,i=0;i<e.length;i++){var o=e[i],a=this.addAdjoiningFace(t,o);null===n?n=a:a.next.setTwin(r),this.newFaces.push(a.face),r=a}return n.next.setTwin(r),this},addVertexToHull:function(t){var e=[];return this.unassigned.clear(),this.removeVertexFromFace(t,t.face),this.computeHorizon(t.point,null,t.face,e),this.addNewFaces(t,e),this.resolveUnassignedPoints(this.newFaces),this},cleanup:function(){return this.assigned.clear(),this.unassigned.clear(),this.newFaces=[],this},compute:function(){var t;for(this.computeInitialHull();void 0!==(t=this.nextVertexToAdd());)this.addVertexToHull(t);return this.reindexFaces(),this.cleanup(),this}}),Object.assign(s,{create:function(t,e,n){var r=new s,i=new c(t,r),o=new c(e,r),a=new c(n,r);return i.next=a.prev=o,o.next=i.prev=a,a.next=o.prev=i,r.edge=i,r.compute()}}),Object.assign(s.prototype,{getEdge:function(t){for(var e=this.edge;t>0;)e=e.next,t--;for(;t<0;)e=e.prev,t++;return e},compute:function(){void 0===i&&(i=new r.Triangle);var t=this.edge.tail(),e=this.edge.head(),n=this.edge.next.head();return i.set(t.point,e.point,n.point),i.getNormal(this.normal),i.getMidpoint(this.midpoint),this.area=i.getArea(),this.constant=this.normal.dot(this.midpoint),this},distanceToPoint:function(t){return this.normal.dot(t)-this.constant}}),Object.assign(c.prototype,{head:function(){return this.vertex},tail:function(){return this.prev?this.prev.vertex:null},length:function(){var t=this.head(),e=this.tail();return null!==e?e.point.distanceTo(t.point):-1},lengthSquared:function(){var t=this.head(),e=this.tail();return null!==e?e.point.distanceToSquared(t.point):-1},setTwin:function(t){return this.twin=t,t.twin=this,this}}),Object.assign(u.prototype,{first:function(){return this.head},last:function(){return this.tail},clear:function(){return this.head=this.tail=null,this},insertBefore:function(t,e){return e.prev=t.prev,e.next=t,null===e.prev?this.head=e:e.prev.next=e,t.prev=e,this},insertAfter:function(t,e){return e.prev=t,e.next=t.next,null===e.next?this.tail=e:e.next.prev=e,t.next=e,this},append:function(t){return null===this.head?this.head=t:this.tail.next=t,t.prev=this.tail,t.next=null,this.tail=t,this},appendChain:function(t){for(null===this.head?this.head=t:this.tail.next=t,t.prev=this.tail;null!==t.next;)t=t.next;return this.tail=t,this},remove:function(t){return null===t.prev?this.head=t.next:t.prev.next=t.next,null===t.next?this.tail=t.prev:t.next.prev=t.prev,this},removeSubList:function(t,e){return null===t.prev?this.head=e.next:t.prev.next=e.next,null===e.next?this.tail=t.prev:e.next.prev=t.prev,this},isEmpty:function(){return null===this.head}}),a}(),o=function(t){r.Geometry.call(this),this.fromBufferGeometry(new a(t)),this.mergeVertices()};o.prototype=Object.create(r.Geometry.prototype),o.prototype.constructor=o;var a=function(t){r.BufferGeometry.call(this);var e=[],n=[];void 0===i&&console.error("THREE.ConvexBufferGeometry: ConvexBufferGeometry relies on ConvexHull");for(var o=(new i).setFromPoints(t).faces,a=0;a<o.length;a++){var s=o[a],c=s.edge;do{var l=c.head().point;e.push(l.x,l.y,l.z),n.push(s.normal.x,s.normal.y,s.normal.z),c=c.next}while(c!==s.edge)}this.setAttribute("position",new r.Float32BufferAttribute(e,3)),this.setAttribute("normal",new r.Float32BufferAttribute(n,3))};a.prototype=Object.create(r.BufferGeometry.prototype),a.prototype.constructor=a},function(t,e,n){"use strict";n.r(e),n.d(e,"XRControllerModelFactory",(function(){return f}));var r=n(0),i=n(3);const o={Handedness:Object.freeze({NONE:"none",LEFT:"left",RIGHT:"right"}),ComponentState:Object.freeze({DEFAULT:"default",TOUCHED:"touched",PRESSED:"pressed"}),ComponentProperty:Object.freeze({BUTTON:"button",X_AXIS:"xAxis",Y_AXIS:"yAxis",STATE:"state"}),ComponentType:Object.freeze({TRIGGER:"trigger",SQUEEZE:"squeeze",TOUCHPAD:"touchpad",THUMBSTICK:"thumbstick",BUTTON:"button"}),ButtonTouchThreshold:.05,AxisTouchThreshold:.1,VisualResponseProperty:Object.freeze({TRANSFORM:"transform",VISIBILITY:"visibility"})};async function a(t){const e=await fetch(t);if(e.ok)return e.json();throw new Error(e.statusText)}async function s(t,e,n=null,r=!0){if(!t)throw new Error("No xrInputSource supplied");if(!e)throw new Error("No basePath supplied");const i=await async function(t){if(!t)throw new Error("No basePath supplied");return await a(t+"/profilesList.json")}(e);let o;if(t.profiles.some(t=>{const n=i[t];return n&&(o={profileId:t,profilePath:`${e}/${n.path}`,deprecated:!!n.deprecated}),!!o}),!o){if(!n)throw new Error("No matching profile name found");const t=i[n];if(!t)throw new Error(`No matching profile name found and default profile "${n}" missing.`);o={profileId:n,profilePath:`${e}/${t.path}`,deprecated:!!t.deprecated}}const s=await a(o.profilePath);let c;if(r){let e;if(e="any"===t.handedness?s.layouts[Object.keys(s.layouts)[0]]:s.layouts[t.handedness],!e)throw new Error(`No matching handedness, ${t.handedness}, in profile ${o.profileId}`);e.assetPath&&(c=o.profilePath.replace("profile.json",e.assetPath))}return{profile:s,assetPath:c}}const c={xAxis:0,yAxis:0,button:0,state:o.ComponentState.DEFAULT};class l{constructor(t){this.componentProperty=t.componentProperty,this.states=t.states,this.valueNodeName=t.valueNodeName,this.valueNodeProperty=t.valueNodeProperty,this.valueNodeProperty===o.VisualResponseProperty.TRANSFORM&&(this.minNodeName=t.minNodeName,this.maxNodeName=t.maxNodeName),this.value=0,this.updateFromComponent(c)}updateFromComponent({xAxis:t,yAxis:e,button:n,state:r}){const{normalizedXAxis:i,normalizedYAxis:a}=function(t=0,e=0){let n=t,r=e;if(Math.sqrt(t*t+e*e)>1){const i=Math.atan2(e,t);n=Math.cos(i),r=Math.sin(i)}return{normalizedXAxis:.5*n+.5,normalizedYAxis:.5*r+.5}}(t,e);switch(this.componentProperty){case o.ComponentProperty.X_AXIS:this.value=this.states.includes(r)?i:.5;break;case o.ComponentProperty.Y_AXIS:this.value=this.states.includes(r)?a:.5;break;case o.ComponentProperty.BUTTON:this.value=this.states.includes(r)?n:0;break;case o.ComponentProperty.STATE:this.valueNodeProperty===o.VisualResponseProperty.VISIBILITY?this.value=this.states.includes(r):this.value=this.states.includes(r)?1:0;break;default:throw new Error("Unexpected visualResponse componentProperty "+this.componentProperty)}}}class u{constructor(t,e){if(!(t&&e&&e.visualResponses&&e.gamepadIndices&&0!==Object.keys(e.gamepadIndices).length))throw new Error("Invalid arguments supplied");this.id=t,this.type=e.type,this.rootNodeName=e.rootNodeName,this.touchPointNodeName=e.touchPointNodeName,this.visualResponses={},Object.keys(e.visualResponses).forEach(t=>{const n=new l(e.visualResponses[t]);this.visualResponses[t]=n}),this.gamepadIndices=Object.assign({},e.gamepadIndices),this.values={state:o.ComponentState.DEFAULT,button:void 0!==this.gamepadIndices.button?0:void 0,xAxis:void 0!==this.gamepadIndices.xAxis?0:void 0,yAxis:void 0!==this.gamepadIndices.yAxis?0:void 0}}get data(){return{id:this.id,...this.values}}updateFromGamepad(t){if(this.values.state=o.ComponentState.DEFAULT,void 0!==this.gamepadIndices.button&&t.buttons.length>this.gamepadIndices.button){const e=t.buttons[this.gamepadIndices.button];this.values.button=e.value,this.values.button=this.values.button<0?0:this.values.button,this.values.button=this.values.button>1?1:this.values.button,e.pressed||1===this.values.button?this.values.state=o.ComponentState.PRESSED:(e.touched||this.values.button>o.ButtonTouchThreshold)&&(this.values.state=o.ComponentState.TOUCHED)}void 0!==this.gamepadIndices.xAxis&&t.axes.length>this.gamepadIndices.xAxis&&(this.values.xAxis=t.axes[this.gamepadIndices.xAxis],this.values.xAxis=this.values.xAxis<-1?-1:this.values.xAxis,this.values.xAxis=this.values.xAxis>1?1:this.values.xAxis,this.values.state===o.ComponentState.DEFAULT&&Math.abs(this.values.xAxis)>o.AxisTouchThreshold&&(this.values.state=o.ComponentState.TOUCHED)),void 0!==this.gamepadIndices.yAxis&&t.axes.length>this.gamepadIndices.yAxis&&(this.values.yAxis=t.axes[this.gamepadIndices.yAxis],this.values.yAxis=this.values.yAxis<-1?-1:this.values.yAxis,this.values.yAxis=this.values.yAxis>1?1:this.values.yAxis,this.values.state===o.ComponentState.DEFAULT&&Math.abs(this.values.yAxis)>o.AxisTouchThreshold&&(this.values.state=o.ComponentState.TOUCHED)),Object.values(this.visualResponses).forEach(t=>{t.updateFromComponent(this.values)})}}class h{constructor(t,e,n){if(!t)throw new Error("No xrInputSource supplied");if(!e)throw new Error("No profile supplied");this.xrInputSource=t,this.assetUrl=n,this.id=e.profileId,this.layoutDescription=e.layouts[t.handedness],this.components={},Object.keys(this.layoutDescription.components).forEach(t=>{const e=this.layoutDescription.components[t];this.components[t]=new u(t,e)}),this.updateFromGamepad()}get gripSpace(){return this.xrInputSource.gripSpace}get targetRaySpace(){return this.xrInputSource.targetRaySpace}get data(){const t=[];return Object.values(this.components).forEach(e=>{t.push(e.data)}),t}updateFromGamepad(){Object.values(this.components).forEach(t=>{t.updateFromGamepad(this.xrInputSource.gamepad)})}}function d(){r.Object3D.call(this),this.motionController=null,this.envMap=null}function p(t,e){!function(t,e){Object.values(t.components).forEach(t=>{const{type:n,touchPointNodeName:i,visualResponses:a}=t;if(n===o.ComponentType.TOUCHPAD)if(t.touchPointNode=e.getObjectByName(i),t.touchPointNode){const e=new r.SphereBufferGeometry(.001),n=new r.MeshBasicMaterial({color:255}),i=new r.Mesh(e,n);t.touchPointNode.add(i)}else console.warn(`Could not find touch dot, ${t.touchPointNodeName}, in touchpad component ${t.id}`);Object.values(a).forEach(t=>{const{valueNodeName:n,minNodeName:r,maxNodeName:i,valueNodeProperty:a}=t;if(a===o.VisualResponseProperty.TRANSFORM){if(t.minNode=e.getObjectByName(r),t.maxNode=e.getObjectByName(i),!t.minNode)return void console.warn(`Could not find ${r} in the model`);if(!t.maxNode)return void console.warn(`Could not find ${i} in the model`)}t.valueNode=e.getObjectByName(n),t.valueNode||console.warn(`Could not find ${n} in the model`)})})}(t.motionController,e),t.envMap&&e.traverse(e=>{e.isMesh&&(e.material.envMap=t.envMap,e.material.needsUpdate=!0)}),t.add(e)}d.prototype=Object.assign(Object.create(r.Object3D.prototype),{constructor:d,setEnvironmentMap:function(t){return this.envMap==t||(this.envMap=t,this.traverse(t=>{t.isMesh&&(t.material.envMap=this.envMap,t.material.needsUpdate=!0)})),this},updateMatrixWorld:function(t){r.Object3D.prototype.updateMatrixWorld.call(this,t),this.motionController&&(this.motionController.updateFromGamepad(),Object.values(this.motionController.components).forEach(t=>{Object.values(t.visualResponses).forEach(t=>{const{valueNode:e,minNode:n,maxNode:i,value:a,valueNodeProperty:s}=t;e&&(s===o.VisualResponseProperty.VISIBILITY?e.visible=a:s===o.VisualResponseProperty.TRANSFORM&&(r.Quaternion.slerp(n.quaternion,i.quaternion,e.quaternion,a),e.position.lerpVectors(n.position,i.position,a)))})}))}});var f=function(){function t(t=null){this.gltfLoader=t,this.path="https://cdn.jsdelivr.net/npm/@webxr-input-profiles/assets@1.0/dist/profiles",this._assetCache={},this.gltfLoader||(this.gltfLoader=new i.GLTFLoader)}return t.prototype={constructor:t,createControllerModel:function(t){const e=new d;let n=null;return t.addEventListener("connected",t=>{const r=t.data;"tracked-pointer"===r.targetRayMode&&r.gamepad&&s(r,this.path,"generic-trigger").then(({profile:t,assetPath:i})=>{e.motionController=new h(r,t,i);const o=this._assetCache[e.motionController.assetUrl];if(o)n=o.scene.clone(),p(e,n);else{if(!this.gltfLoader)throw new Error("GLTFLoader not set.");this.gltfLoader.setPath(""),this.gltfLoader.load(e.motionController.assetUrl,t=>{this._assetCache[e.motionController.assetUrl]=t,n=t.scene.clone(),p(e,n)},null,()=>{throw new Error(`Asset ${e.motionController.assetUrl} missing or malformed.`)})}}).catch(t=>{console.warn(t)})}),t.addEventListener("disconnected",()=>{e.motionController=null,e.remove(n),n=null}),e}},t}()},function(t,e,n){"use strict";n.r(e),n.d(e,"AnimationAction",(function(){return r}));class r{constructor(t,e,n=null,r=e.blendMode){this._mixer=t,this._clip=e,this._localRoot=n,this.blendMode=r;const i=e.tracks,o=i.length,a=new Array(o),s={endingStart:2400,endingEnd:2400};for(let t=0;t!==o;++t){const e=i[t].createInterpolant(null);a[t]=e,e.settings=s}this._interpolantSettings=s,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){const n=this._clip.duration,r=t._clip.duration,i=r/n,o=n/r;t.warp(1,i,e),this.warp(o,1,e)}return this}crossFadeTo(t,e,n){return t.crossFadeFrom(this,e,n)}stopFading(){const t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,n){const r=this._mixer,i=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;null===a&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const s=a.parameterPositions,c=a.sampleValues;return s[0]=i,s[1]=i+n,c[0]=t/o,c[1]=e/o,this}stopWarping(){const t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,e,n,r){if(!this.enabled)return void this._updateWeight(t);const i=this._startTime;if(null!==i){const r=(t-i)*n;if(r<0||0===n)return;this._startTime=null,e=n*r}e*=this._updateTimeScale(t);const o=this._updateTime(e),a=this._updateWeight(t);if(a>0){const t=this._interpolants,e=this._propertyBindings;switch(this.blendMode){case 2501:for(let n=0,r=t.length;n!==r;++n)t[n].evaluate(o),e[n].accumulateAdditive(a);break;case 2500:default:for(let n=0,i=t.length;n!==i;++n)t[n].evaluate(o),e[n].accumulate(r,a)}}}_updateWeight(t){let e=0;if(this.enabled){e=this.weight;const n=this._weightInterpolant;if(null!==n){const r=n.evaluate(t)[0];e*=r,t>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=e,e}_updateTimeScale(t){let e=0;if(!this.paused){e=this.timeScale;const n=this._timeScaleInterpolant;if(null!==n){e*=n.evaluate(t)[0],t>n.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e}_updateTime(t){const e=this._clip.duration,n=this.loop;let r=this.time+t,i=this._loopCount;const o=2202===n;if(0===t)return-1===i?r:o&&1==(1&i)?e-r:r;if(2200===n){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(r>=e)r=e;else{if(!(r<0)){this.time=r;break t}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===i&&(t>=0?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),r>=e||r<0){const n=Math.floor(r/e);r-=e*n,i+=Math.abs(n);const a=this.repetitions-i;if(a<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=t>0?e:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===a){const e=t<0;this._setEndings(e,!e,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=r;if(o&&1==(1&i))return e-r}return r}_setEndings(t,e,n){const r=this._interpolantSettings;n?(r.endingStart=2401,r.endingEnd=2401):(r.endingStart=t?this.zeroSlopeAtStart?2401:2400:2402,r.endingEnd=e?this.zeroSlopeAtEnd?2401:2400:2402)}_scheduleFading(t,e,n){const r=this._mixer,i=r.time;let o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,s=o.sampleValues;return a[0]=i,s[0]=e,a[1]=i+t,s[1]=n,this}}},function(t,e,n){"use strict";n.r(e),n.d(e,"GlitchPass",(function(){return a}));var r=n(0),i=n(1),o={uniforms:{tDiffuse:{value:null},tDisp:{value:null},byp:{value:0},amount:{value:.08},angle:{value:.02},seed:{value:.02},seed_x:{value:.02},seed_y:{value:.02},distortion_x:{value:.5},distortion_y:{value:.6},col_s:{value:.05}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform int byp;","uniform sampler2D tDiffuse;","uniform sampler2D tDisp;","uniform float amount;","uniform float angle;","uniform float seed;","uniform float seed_x;","uniform float seed_y;","uniform float distortion_x;","uniform float distortion_y;","uniform float col_s;","varying vec2 vUv;","float rand(vec2 co){","\treturn fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);","}","void main() {","\tif(byp<1) {","\t\tvec2 p = vUv;","\t\tfloat xs = floor(gl_FragCoord.x / 0.5);","\t\tfloat ys = floor(gl_FragCoord.y / 0.5);","\t\tvec4 normal = texture2D (tDisp, p*seed*seed);","\t\tif(p.y<distortion_x+col_s && p.y>distortion_x-col_s*seed) {","\t\t\tif(seed_x>0.){","\t\t\t\tp.y = 1. - (p.y + distortion_y);","\t\t\t}","\t\t\telse {","\t\t\t\tp.y = distortion_y;","\t\t\t}","\t\t}","\t\tif(p.x<distortion_y+col_s && p.x>distortion_y-col_s*seed) {","\t\t\tif(seed_y>0.){","\t\t\t\tp.x=distortion_x;","\t\t\t}","\t\t\telse {","\t\t\t\tp.x = 1. - (p.x + distortion_x);","\t\t\t}","\t\t}","\t\tp.x+=normal.x*seed_x*(seed/5.);","\t\tp.y+=normal.y*seed_y*(seed/5.);","\t\tvec2 offset = amount * vec2( cos(angle), sin(angle));","\t\tvec4 cr = texture2D(tDiffuse, p + offset);","\t\tvec4 cga = texture2D(tDiffuse, p);","\t\tvec4 cb = texture2D(tDiffuse, p - offset);","\t\tgl_FragColor = vec4(cr.r, cga.g, cb.b, cga.a);","\t\tvec4 snow = 200.*amount*vec4(rand(vec2(xs * seed,ys * seed*50.))*0.2);","\t\tgl_FragColor = gl_FragColor+ snow;","\t}","\telse {","\t\tgl_FragColor=texture2D (tDiffuse, vUv);","\t}","}"].join("\n")},a=function(t){i.a.call(this),void 0===o&&console.error("GlitchPass relies on DigitalGlitch");var e=o;this.uniforms=r.UniformsUtils.clone(e.uniforms),null==t&&(t=64),this.uniforms.tDisp.value=this.generateHeightmap(t),this.material=new r.ShaderMaterial({uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader}),this.fsQuad=new i.a.FullScreenQuad(this.material),this.goWild=!1,this.curF=0,this.generateTrigger()};a.prototype=Object.assign(Object.create(i.a.prototype),{constructor:a,render:function(t,e,n){this.uniforms.tDiffuse.value=n.texture,this.uniforms.seed.value=Math.random(),this.uniforms.byp.value=0,this.curF%this.randX==0||1==this.goWild?(this.uniforms.amount.value=Math.random()/30,this.uniforms.angle.value=r.MathUtils.randFloat(-Math.PI,Math.PI),this.uniforms.seed_x.value=r.MathUtils.randFloat(-1,1),this.uniforms.seed_y.value=r.MathUtils.randFloat(-1,1),this.uniforms.distortion_x.value=r.MathUtils.randFloat(0,1),this.uniforms.distortion_y.value=r.MathUtils.randFloat(0,1),this.curF=0,this.generateTrigger()):this.curF%this.randX<this.randX/5?(this.uniforms.amount.value=Math.random()/90,this.uniforms.angle.value=r.MathUtils.randFloat(-Math.PI,Math.PI),this.uniforms.distortion_x.value=r.MathUtils.randFloat(0,1),this.uniforms.distortion_y.value=r.MathUtils.randFloat(0,1),this.uniforms.seed_x.value=r.MathUtils.randFloat(-.3,.3),this.uniforms.seed_y.value=r.MathUtils.randFloat(-.3,.3)):0==this.goWild&&(this.uniforms.byp.value=1),this.curF++,this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(e),this.clear&&t.clear(),this.fsQuad.render(t))},generateTrigger:function(){this.randX=r.MathUtils.randInt(120,240)},generateHeightmap:function(t){for(var e=new Float32Array(t*t*3),n=t*t,i=0;i<n;i++){var o=r.MathUtils.randFloat(0,1);e[3*i+0]=o,e[3*i+1]=o,e[3*i+2]=o}return new r.DataTexture(e,t,t,r.RGBFormat,r.FloatType)}})}]));
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./node_modules/engine.io-client/lib/globalThis.browser.js":
/*!*****************************************************************!*\
  !*** ./node_modules/engine.io-client/lib/globalThis.browser.js ***!
  \*****************************************************************/
/***/ ((module) => {

module.exports = (() => {
  if (typeof self !== "undefined") {
    return self;
  } else if (typeof window !== "undefined") {
    return window;
  } else {
    return Function("return this")();
  }
})();


/***/ }),

/***/ "./node_modules/engine.io-client/lib/index.js":
/*!****************************************************!*\
  !*** ./node_modules/engine.io-client/lib/index.js ***!
  \****************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

const Socket = __webpack_require__(/*! ./socket */ "./node_modules/engine.io-client/lib/socket.js");

module.exports = (uri, opts) => new Socket(uri, opts);

/**
 * Expose deps for legacy compatibility
 * and standalone browser access.
 */

module.exports.Socket = Socket;
module.exports.protocol = Socket.protocol; // this is an int
module.exports.Transport = __webpack_require__(/*! ./transport */ "./node_modules/engine.io-client/lib/transport.js");
module.exports.transports = __webpack_require__(/*! ./transports/index */ "./node_modules/engine.io-client/lib/transports/index.js");
module.exports.parser = __webpack_require__(/*! engine.io-parser */ "./node_modules/engine.io-parser/lib/index.js");


/***/ }),

/***/ "./node_modules/engine.io-client/lib/socket.js":
/*!*****************************************************!*\
  !*** ./node_modules/engine.io-client/lib/socket.js ***!
  \*****************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

const transports = __webpack_require__(/*! ./transports/index */ "./node_modules/engine.io-client/lib/transports/index.js");
const Emitter = __webpack_require__(/*! component-emitter */ "./node_modules/component-emitter/index.js");
const debug = __webpack_require__(/*! debug */ "./node_modules/engine.io-client/node_modules/debug/src/browser.js")("engine.io-client:socket");
const parser = __webpack_require__(/*! engine.io-parser */ "./node_modules/engine.io-parser/lib/index.js");
const parseuri = __webpack_require__(/*! parseuri */ "./node_modules/parseuri/index.js");
const parseqs = __webpack_require__(/*! parseqs */ "./node_modules/parseqs/index.js");

class Socket extends Emitter {
  /**
   * Socket constructor.
   *
   * @param {String|Object} uri or options
   * @param {Object} options
   * @api public
   */
  constructor(uri, opts = {}) {
    super();

    if (uri && "object" === typeof uri) {
      opts = uri;
      uri = null;
    }

    if (uri) {
      uri = parseuri(uri);
      opts.hostname = uri.host;
      opts.secure = uri.protocol === "https" || uri.protocol === "wss";
      opts.port = uri.port;
      if (uri.query) opts.query = uri.query;
    } else if (opts.host) {
      opts.hostname = parseuri(opts.host).host;
    }

    this.secure =
      null != opts.secure
        ? opts.secure
        : typeof location !== "undefined" && "https:" === location.protocol;

    if (opts.hostname && !opts.port) {
      // if no port is specified manually, use the protocol default
      opts.port = this.secure ? "443" : "80";
    }

    this.hostname =
      opts.hostname ||
      (typeof location !== "undefined" ? location.hostname : "localhost");
    this.port =
      opts.port ||
      (typeof location !== "undefined" && location.port
        ? location.port
        : this.secure
        ? 443
        : 80);

    this.transports = opts.transports || ["polling", "websocket"];
    this.readyState = "";
    this.writeBuffer = [];
    this.prevBufferLen = 0;

    this.opts = Object.assign(
      {
        path: "/engine.io",
        agent: false,
        withCredentials: false,
        upgrade: true,
        jsonp: true,
        timestampParam: "t",
        rememberUpgrade: false,
        rejectUnauthorized: true,
        perMessageDeflate: {
          threshold: 1024
        },
        transportOptions: {},
        closeOnBeforeunload: true
      },
      opts
    );

    this.opts.path = this.opts.path.replace(/\/$/, "") + "/";

    if (typeof this.opts.query === "string") {
      this.opts.query = parseqs.decode(this.opts.query);
    }

    // set on handshake
    this.id = null;
    this.upgrades = null;
    this.pingInterval = null;
    this.pingTimeout = null;

    // set on heartbeat
    this.pingTimeoutTimer = null;

    if (typeof addEventListener === "function") {
      if (this.opts.closeOnBeforeunload) {
        // Firefox closes the connection when the "beforeunload" event is emitted but not Chrome. This event listener
        // ensures every browser behaves the same (no "disconnect" event at the Socket.IO level when the page is
        // closed/reloaded)
        addEventListener(
          "beforeunload",
          () => {
            if (this.transport) {
              // silently close the transport
              this.transport.removeAllListeners();
              this.transport.close();
            }
          },
          false
        );
      }
      if (this.hostname !== "localhost") {
        this.offlineEventListener = () => {
          this.onClose("transport close");
        };
        addEventListener("offline", this.offlineEventListener, false);
      }
    }

    this.open();
  }

  /**
   * Creates transport of the given type.
   *
   * @param {String} transport name
   * @return {Transport}
   * @api private
   */
  createTransport(name) {
    debug('creating transport "%s"', name);
    const query = clone(this.opts.query);

    // append engine.io protocol identifier
    query.EIO = parser.protocol;

    // transport name
    query.transport = name;

    // session id if we already have one
    if (this.id) query.sid = this.id;

    const opts = Object.assign(
      {},
      this.opts.transportOptions[name],
      this.opts,
      {
        query,
        socket: this,
        hostname: this.hostname,
        secure: this.secure,
        port: this.port
      }
    );

    debug("options: %j", opts);

    return new transports[name](opts);
  }

  /**
   * Initializes transport to use and starts probe.
   *
   * @api private
   */
  open() {
    let transport;
    if (
      this.opts.rememberUpgrade &&
      Socket.priorWebsocketSuccess &&
      this.transports.indexOf("websocket") !== -1
    ) {
      transport = "websocket";
    } else if (0 === this.transports.length) {
      // Emit error on next tick so it can be listened to
      setTimeout(() => {
        this.emit("error", "No transports available");
      }, 0);
      return;
    } else {
      transport = this.transports[0];
    }
    this.readyState = "opening";

    // Retry with the next transport if the transport is disabled (jsonp: false)
    try {
      transport = this.createTransport(transport);
    } catch (e) {
      debug("error while creating transport: %s", e);
      this.transports.shift();
      this.open();
      return;
    }

    transport.open();
    this.setTransport(transport);
  }

  /**
   * Sets the current transport. Disables the existing one (if any).
   *
   * @api private
   */
  setTransport(transport) {
    debug("setting transport %s", transport.name);

    if (this.transport) {
      debug("clearing existing transport %s", this.transport.name);
      this.transport.removeAllListeners();
    }

    // set up transport
    this.transport = transport;

    // set up transport listeners
    transport
      .on("drain", this.onDrain.bind(this))
      .on("packet", this.onPacket.bind(this))
      .on("error", this.onError.bind(this))
      .on("close", () => {
        this.onClose("transport close");
      });
  }

  /**
   * Probes a transport.
   *
   * @param {String} transport name
   * @api private
   */
  probe(name) {
    debug('probing transport "%s"', name);
    let transport = this.createTransport(name, { probe: 1 });
    let failed = false;

    Socket.priorWebsocketSuccess = false;

    const onTransportOpen = () => {
      if (failed) return;

      debug('probe transport "%s" opened', name);
      transport.send([{ type: "ping", data: "probe" }]);
      transport.once("packet", msg => {
        if (failed) return;
        if ("pong" === msg.type && "probe" === msg.data) {
          debug('probe transport "%s" pong', name);
          this.upgrading = true;
          this.emit("upgrading", transport);
          if (!transport) return;
          Socket.priorWebsocketSuccess = "websocket" === transport.name;

          debug('pausing current transport "%s"', this.transport.name);
          this.transport.pause(() => {
            if (failed) return;
            if ("closed" === this.readyState) return;
            debug("changing transport and sending upgrade packet");

            cleanup();

            this.setTransport(transport);
            transport.send([{ type: "upgrade" }]);
            this.emit("upgrade", transport);
            transport = null;
            this.upgrading = false;
            this.flush();
          });
        } else {
          debug('probe transport "%s" failed', name);
          const err = new Error("probe error");
          err.transport = transport.name;
          this.emit("upgradeError", err);
        }
      });
    };

    function freezeTransport() {
      if (failed) return;

      // Any callback called by transport should be ignored since now
      failed = true;

      cleanup();

      transport.close();
      transport = null;
    }

    // Handle any error that happens while probing
    const onerror = err => {
      const error = new Error("probe error: " + err);
      error.transport = transport.name;

      freezeTransport();

      debug('probe transport "%s" failed because of error: %s', name, err);

      this.emit("upgradeError", error);
    };

    function onTransportClose() {
      onerror("transport closed");
    }

    // When the socket is closed while we're probing
    function onclose() {
      onerror("socket closed");
    }

    // When the socket is upgraded while we're probing
    function onupgrade(to) {
      if (transport && to.name !== transport.name) {
        debug('"%s" works - aborting "%s"', to.name, transport.name);
        freezeTransport();
      }
    }

    // Remove all listeners on the transport and on self
    const cleanup = () => {
      transport.removeListener("open", onTransportOpen);
      transport.removeListener("error", onerror);
      transport.removeListener("close", onTransportClose);
      this.removeListener("close", onclose);
      this.removeListener("upgrading", onupgrade);
    };

    transport.once("open", onTransportOpen);
    transport.once("error", onerror);
    transport.once("close", onTransportClose);

    this.once("close", onclose);
    this.once("upgrading", onupgrade);

    transport.open();
  }

  /**
   * Called when connection is deemed open.
   *
   * @api public
   */
  onOpen() {
    debug("socket open");
    this.readyState = "open";
    Socket.priorWebsocketSuccess = "websocket" === this.transport.name;
    this.emit("open");
    this.flush();

    // we check for `readyState` in case an `open`
    // listener already closed the socket
    if (
      "open" === this.readyState &&
      this.opts.upgrade &&
      this.transport.pause
    ) {
      debug("starting upgrade probes");
      let i = 0;
      const l = this.upgrades.length;
      for (; i < l; i++) {
        this.probe(this.upgrades[i]);
      }
    }
  }

  /**
   * Handles a packet.
   *
   * @api private
   */
  onPacket(packet) {
    if (
      "opening" === this.readyState ||
      "open" === this.readyState ||
      "closing" === this.readyState
    ) {
      debug('socket receive: type "%s", data "%s"', packet.type, packet.data);

      this.emit("packet", packet);

      // Socket is live - any packet counts
      this.emit("heartbeat");

      switch (packet.type) {
        case "open":
          this.onHandshake(JSON.parse(packet.data));
          break;

        case "ping":
          this.resetPingTimeout();
          this.sendPacket("pong");
          this.emit("pong");
          break;

        case "error":
          const err = new Error("server error");
          err.code = packet.data;
          this.onError(err);
          break;

        case "message":
          this.emit("data", packet.data);
          this.emit("message", packet.data);
          break;
      }
    } else {
      debug('packet received with socket readyState "%s"', this.readyState);
    }
  }

  /**
   * Called upon handshake completion.
   *
   * @param {Object} handshake obj
   * @api private
   */
  onHandshake(data) {
    this.emit("handshake", data);
    this.id = data.sid;
    this.transport.query.sid = data.sid;
    this.upgrades = this.filterUpgrades(data.upgrades);
    this.pingInterval = data.pingInterval;
    this.pingTimeout = data.pingTimeout;
    this.onOpen();
    // In case open handler closes socket
    if ("closed" === this.readyState) return;
    this.resetPingTimeout();
  }

  /**
   * Sets and resets ping timeout timer based on server pings.
   *
   * @api private
   */
  resetPingTimeout() {
    clearTimeout(this.pingTimeoutTimer);
    this.pingTimeoutTimer = setTimeout(() => {
      this.onClose("ping timeout");
    }, this.pingInterval + this.pingTimeout);
    if (this.opts.autoUnref) {
      this.pingTimeoutTimer.unref();
    }
  }

  /**
   * Called on `drain` event
   *
   * @api private
   */
  onDrain() {
    this.writeBuffer.splice(0, this.prevBufferLen);

    // setting prevBufferLen = 0 is very important
    // for example, when upgrading, upgrade packet is sent over,
    // and a nonzero prevBufferLen could cause problems on `drain`
    this.prevBufferLen = 0;

    if (0 === this.writeBuffer.length) {
      this.emit("drain");
    } else {
      this.flush();
    }
  }

  /**
   * Flush write buffers.
   *
   * @api private
   */
  flush() {
    if (
      "closed" !== this.readyState &&
      this.transport.writable &&
      !this.upgrading &&
      this.writeBuffer.length
    ) {
      debug("flushing %d packets in socket", this.writeBuffer.length);
      this.transport.send(this.writeBuffer);
      // keep track of current length of writeBuffer
      // splice writeBuffer and callbackBuffer on `drain`
      this.prevBufferLen = this.writeBuffer.length;
      this.emit("flush");
    }
  }

  /**
   * Sends a message.
   *
   * @param {String} message.
   * @param {Function} callback function.
   * @param {Object} options.
   * @return {Socket} for chaining.
   * @api public
   */
  write(msg, options, fn) {
    this.sendPacket("message", msg, options, fn);
    return this;
  }

  send(msg, options, fn) {
    this.sendPacket("message", msg, options, fn);
    return this;
  }

  /**
   * Sends a packet.
   *
   * @param {String} packet type.
   * @param {String} data.
   * @param {Object} options.
   * @param {Function} callback function.
   * @api private
   */
  sendPacket(type, data, options, fn) {
    if ("function" === typeof data) {
      fn = data;
      data = undefined;
    }

    if ("function" === typeof options) {
      fn = options;
      options = null;
    }

    if ("closing" === this.readyState || "closed" === this.readyState) {
      return;
    }

    options = options || {};
    options.compress = false !== options.compress;

    const packet = {
      type: type,
      data: data,
      options: options
    };
    this.emit("packetCreate", packet);
    this.writeBuffer.push(packet);
    if (fn) this.once("flush", fn);
    this.flush();
  }

  /**
   * Closes the connection.
   *
   * @api private
   */
  close() {
    const close = () => {
      this.onClose("forced close");
      debug("socket closing - telling transport to close");
      this.transport.close();
    };

    const cleanupAndClose = () => {
      this.removeListener("upgrade", cleanupAndClose);
      this.removeListener("upgradeError", cleanupAndClose);
      close();
    };

    const waitForUpgrade = () => {
      // wait for upgrade to finish since we can't send packets while pausing a transport
      this.once("upgrade", cleanupAndClose);
      this.once("upgradeError", cleanupAndClose);
    };

    if ("opening" === this.readyState || "open" === this.readyState) {
      this.readyState = "closing";

      if (this.writeBuffer.length) {
        this.once("drain", () => {
          if (this.upgrading) {
            waitForUpgrade();
          } else {
            close();
          }
        });
      } else if (this.upgrading) {
        waitForUpgrade();
      } else {
        close();
      }
    }

    return this;
  }

  /**
   * Called upon transport error
   *
   * @api private
   */
  onError(err) {
    debug("socket error %j", err);
    Socket.priorWebsocketSuccess = false;
    this.emit("error", err);
    this.onClose("transport error", err);
  }

  /**
   * Called upon transport close.
   *
   * @api private
   */
  onClose(reason, desc) {
    if (
      "opening" === this.readyState ||
      "open" === this.readyState ||
      "closing" === this.readyState
    ) {
      debug('socket close with reason: "%s"', reason);

      // clear timers
      clearTimeout(this.pingIntervalTimer);
      clearTimeout(this.pingTimeoutTimer);

      // stop event from firing again for transport
      this.transport.removeAllListeners("close");

      // ensure transport won't stay open
      this.transport.close();

      // ignore further transport communication
      this.transport.removeAllListeners();

      if (typeof removeEventListener === "function") {
        removeEventListener("offline", this.offlineEventListener, false);
      }

      // set ready state
      this.readyState = "closed";

      // clear session id
      this.id = null;

      // emit close event
      this.emit("close", reason, desc);

      // clean buffers after, so users can still
      // grab the buffers on `close` event
      this.writeBuffer = [];
      this.prevBufferLen = 0;
    }
  }

  /**
   * Filters upgrades, returning only those matching client transports.
   *
   * @param {Array} server upgrades
   * @api private
   *
   */
  filterUpgrades(upgrades) {
    const filteredUpgrades = [];
    let i = 0;
    const j = upgrades.length;
    for (; i < j; i++) {
      if (~this.transports.indexOf(upgrades[i]))
        filteredUpgrades.push(upgrades[i]);
    }
    return filteredUpgrades;
  }
}

Socket.priorWebsocketSuccess = false;

/**
 * Protocol version.
 *
 * @api public
 */

Socket.protocol = parser.protocol; // this is an int

function clone(obj) {
  const o = {};
  for (let i in obj) {
    if (obj.hasOwnProperty(i)) {
      o[i] = obj[i];
    }
  }
  return o;
}

module.exports = Socket;


/***/ }),

/***/ "./node_modules/engine.io-client/lib/transport.js":
/*!********************************************************!*\
  !*** ./node_modules/engine.io-client/lib/transport.js ***!
  \********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

const parser = __webpack_require__(/*! engine.io-parser */ "./node_modules/engine.io-parser/lib/index.js");
const Emitter = __webpack_require__(/*! component-emitter */ "./node_modules/component-emitter/index.js");
const debug = __webpack_require__(/*! debug */ "./node_modules/engine.io-client/node_modules/debug/src/browser.js")("engine.io-client:transport");

class Transport extends Emitter {
  /**
   * Transport abstract constructor.
   *
   * @param {Object} options.
   * @api private
   */
  constructor(opts) {
    super();

    this.opts = opts;
    this.query = opts.query;
    this.readyState = "";
    this.socket = opts.socket;
  }

  /**
   * Emits an error.
   *
   * @param {String} str
   * @return {Transport} for chaining
   * @api public
   */
  onError(msg, desc) {
    const err = new Error(msg);
    err.type = "TransportError";
    err.description = desc;
    this.emit("error", err);
    return this;
  }

  /**
   * Opens the transport.
   *
   * @api public
   */
  open() {
    if ("closed" === this.readyState || "" === this.readyState) {
      this.readyState = "opening";
      this.doOpen();
    }

    return this;
  }

  /**
   * Closes the transport.
   *
   * @api private
   */
  close() {
    if ("opening" === this.readyState || "open" === this.readyState) {
      this.doClose();
      this.onClose();
    }

    return this;
  }

  /**
   * Sends multiple packets.
   *
   * @param {Array} packets
   * @api private
   */
  send(packets) {
    if ("open" === this.readyState) {
      this.write(packets);
    } else {
      // this might happen if the transport was silently closed in the beforeunload event handler
      debug("transport is not open, discarding packets");
    }
  }

  /**
   * Called upon open
   *
   * @api private
   */
  onOpen() {
    this.readyState = "open";
    this.writable = true;
    this.emit("open");
  }

  /**
   * Called with data.
   *
   * @param {String} data
   * @api private
   */
  onData(data) {
    const packet = parser.decodePacket(data, this.socket.binaryType);
    this.onPacket(packet);
  }

  /**
   * Called with a decoded packet.
   */
  onPacket(packet) {
    this.emit("packet", packet);
  }

  /**
   * Called upon close.
   *
   * @api private
   */
  onClose() {
    this.readyState = "closed";
    this.emit("close");
  }
}

module.exports = Transport;


/***/ }),

/***/ "./node_modules/engine.io-client/lib/transports/index.js":
/*!***************************************************************!*\
  !*** ./node_modules/engine.io-client/lib/transports/index.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

const XMLHttpRequest = __webpack_require__(/*! ../../contrib/xmlhttprequest-ssl/XMLHttpRequest */ "./node_modules/engine.io-client/lib/xmlhttprequest.js");
const XHR = __webpack_require__(/*! ./polling-xhr */ "./node_modules/engine.io-client/lib/transports/polling-xhr.js");
const JSONP = __webpack_require__(/*! ./polling-jsonp */ "./node_modules/engine.io-client/lib/transports/polling-jsonp.js");
const websocket = __webpack_require__(/*! ./websocket */ "./node_modules/engine.io-client/lib/transports/websocket.js");

exports.polling = polling;
exports.websocket = websocket;

/**
 * Polling transport polymorphic constructor.
 * Decides on xhr vs jsonp based on feature detection.
 *
 * @api private
 */

function polling(opts) {
  let xhr;
  let xd = false;
  let xs = false;
  const jsonp = false !== opts.jsonp;

  if (typeof location !== "undefined") {
    const isSSL = "https:" === location.protocol;
    let port = location.port;

    // some user agents have empty `location.port`
    if (!port) {
      port = isSSL ? 443 : 80;
    }

    xd = opts.hostname !== location.hostname || port !== opts.port;
    xs = opts.secure !== isSSL;
  }

  opts.xdomain = xd;
  opts.xscheme = xs;
  xhr = new XMLHttpRequest(opts);

  if ("open" in xhr && !opts.forceJSONP) {
    return new XHR(opts);
  } else {
    if (!jsonp) throw new Error("JSONP disabled");
    return new JSONP(opts);
  }
}


/***/ }),

/***/ "./node_modules/engine.io-client/lib/transports/polling-jsonp.js":
/*!***********************************************************************!*\
  !*** ./node_modules/engine.io-client/lib/transports/polling-jsonp.js ***!
  \***********************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

const Polling = __webpack_require__(/*! ./polling */ "./node_modules/engine.io-client/lib/transports/polling.js");
const globalThis = __webpack_require__(/*! ../globalThis */ "./node_modules/engine.io-client/lib/globalThis.browser.js");

const rNewline = /\n/g;
const rEscapedNewline = /\\n/g;

/**
 * Global JSONP callbacks.
 */

let callbacks;

class JSONPPolling extends Polling {
  /**
   * JSONP Polling constructor.
   *
   * @param {Object} opts.
   * @api public
   */
  constructor(opts) {
    super(opts);

    this.query = this.query || {};

    // define global callbacks array if not present
    // we do this here (lazily) to avoid unneeded global pollution
    if (!callbacks) {
      // we need to consider multiple engines in the same page
      callbacks = globalThis.___eio = globalThis.___eio || [];
    }

    // callback identifier
    this.index = callbacks.length;

    // add callback to jsonp global
    callbacks.push(this.onData.bind(this));

    // append to query string
    this.query.j = this.index;
  }

  /**
   * JSONP only supports binary as base64 encoded strings
   */
  get supportsBinary() {
    return false;
  }

  /**
   * Closes the socket.
   *
   * @api private
   */
  doClose() {
    if (this.script) {
      // prevent spurious errors from being emitted when the window is unloaded
      this.script.onerror = () => {};
      this.script.parentNode.removeChild(this.script);
      this.script = null;
    }

    if (this.form) {
      this.form.parentNode.removeChild(this.form);
      this.form = null;
      this.iframe = null;
    }

    super.doClose();
  }

  /**
   * Starts a poll cycle.
   *
   * @api private
   */
  doPoll() {
    const script = document.createElement("script");

    if (this.script) {
      this.script.parentNode.removeChild(this.script);
      this.script = null;
    }

    script.async = true;
    script.src = this.uri();
    script.onerror = e => {
      this.onError("jsonp poll error", e);
    };

    const insertAt = document.getElementsByTagName("script")[0];
    if (insertAt) {
      insertAt.parentNode.insertBefore(script, insertAt);
    } else {
      (document.head || document.body).appendChild(script);
    }
    this.script = script;

    const isUAgecko =
      "undefined" !== typeof navigator && /gecko/i.test(navigator.userAgent);

    if (isUAgecko) {
      setTimeout(function() {
        const iframe = document.createElement("iframe");
        document.body.appendChild(iframe);
        document.body.removeChild(iframe);
      }, 100);
    }
  }

  /**
   * Writes with a hidden iframe.
   *
   * @param {String} data to send
   * @param {Function} called upon flush.
   * @api private
   */
  doWrite(data, fn) {
    let iframe;

    if (!this.form) {
      const form = document.createElement("form");
      const area = document.createElement("textarea");
      const id = (this.iframeId = "eio_iframe_" + this.index);

      form.className = "socketio";
      form.style.position = "absolute";
      form.style.top = "-1000px";
      form.style.left = "-1000px";
      form.target = id;
      form.method = "POST";
      form.setAttribute("accept-charset", "utf-8");
      area.name = "d";
      form.appendChild(area);
      document.body.appendChild(form);

      this.form = form;
      this.area = area;
    }

    this.form.action = this.uri();

    function complete() {
      initIframe();
      fn();
    }

    const initIframe = () => {
      if (this.iframe) {
        try {
          this.form.removeChild(this.iframe);
        } catch (e) {
          this.onError("jsonp polling iframe removal error", e);
        }
      }

      try {
        // ie6 dynamic iframes with target="" support (thanks Chris Lambacher)
        const html = '<iframe src="javascript:0" name="' + this.iframeId + '">';
        iframe = document.createElement(html);
      } catch (e) {
        iframe = document.createElement("iframe");
        iframe.name = this.iframeId;
        iframe.src = "javascript:0";
      }

      iframe.id = this.iframeId;

      this.form.appendChild(iframe);
      this.iframe = iframe;
    };

    initIframe();

    // escape \n to prevent it from being converted into \r\n by some UAs
    // double escaping is required for escaped new lines because unescaping of new lines can be done safely on server-side
    data = data.replace(rEscapedNewline, "\\\n");
    this.area.value = data.replace(rNewline, "\\n");

    try {
      this.form.submit();
    } catch (e) {}

    if (this.iframe.attachEvent) {
      this.iframe.onreadystatechange = () => {
        if (this.iframe.readyState === "complete") {
          complete();
        }
      };
    } else {
      this.iframe.onload = complete;
    }
  }
}

module.exports = JSONPPolling;


/***/ }),

/***/ "./node_modules/engine.io-client/lib/transports/polling-xhr.js":
/*!*********************************************************************!*\
  !*** ./node_modules/engine.io-client/lib/transports/polling-xhr.js ***!
  \*********************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

/* global attachEvent */

const XMLHttpRequest = __webpack_require__(/*! ../../contrib/xmlhttprequest-ssl/XMLHttpRequest */ "./node_modules/engine.io-client/lib/xmlhttprequest.js");
const Polling = __webpack_require__(/*! ./polling */ "./node_modules/engine.io-client/lib/transports/polling.js");
const Emitter = __webpack_require__(/*! component-emitter */ "./node_modules/component-emitter/index.js");
const { pick } = __webpack_require__(/*! ../util */ "./node_modules/engine.io-client/lib/util.js");
const globalThis = __webpack_require__(/*! ../globalThis */ "./node_modules/engine.io-client/lib/globalThis.browser.js");

const debug = __webpack_require__(/*! debug */ "./node_modules/engine.io-client/node_modules/debug/src/browser.js")("engine.io-client:polling-xhr");

/**
 * Empty function
 */

function empty() {}

const hasXHR2 = (function() {
  const xhr = new XMLHttpRequest({ xdomain: false });
  return null != xhr.responseType;
})();

class XHR extends Polling {
  /**
   * XHR Polling constructor.
   *
   * @param {Object} opts
   * @api public
   */
  constructor(opts) {
    super(opts);

    if (typeof location !== "undefined") {
      const isSSL = "https:" === location.protocol;
      let port = location.port;

      // some user agents have empty `location.port`
      if (!port) {
        port = isSSL ? 443 : 80;
      }

      this.xd =
        (typeof location !== "undefined" &&
          opts.hostname !== location.hostname) ||
        port !== opts.port;
      this.xs = opts.secure !== isSSL;
    }
    /**
     * XHR supports binary
     */
    const forceBase64 = opts && opts.forceBase64;
    this.supportsBinary = hasXHR2 && !forceBase64;
  }

  /**
   * Creates a request.
   *
   * @param {String} method
   * @api private
   */
  request(opts = {}) {
    Object.assign(opts, { xd: this.xd, xs: this.xs }, this.opts);
    return new Request(this.uri(), opts);
  }

  /**
   * Sends data.
   *
   * @param {String} data to send.
   * @param {Function} called upon flush.
   * @api private
   */
  doWrite(data, fn) {
    const req = this.request({
      method: "POST",
      data: data
    });
    req.on("success", fn);
    req.on("error", err => {
      this.onError("xhr post error", err);
    });
  }

  /**
   * Starts a poll cycle.
   *
   * @api private
   */
  doPoll() {
    debug("xhr poll");
    const req = this.request();
    req.on("data", this.onData.bind(this));
    req.on("error", err => {
      this.onError("xhr poll error", err);
    });
    this.pollXhr = req;
  }
}

class Request extends Emitter {
  /**
   * Request constructor
   *
   * @param {Object} options
   * @api public
   */
  constructor(uri, opts) {
    super();
    this.opts = opts;

    this.method = opts.method || "GET";
    this.uri = uri;
    this.async = false !== opts.async;
    this.data = undefined !== opts.data ? opts.data : null;

    this.create();
  }

  /**
   * Creates the XHR object and sends the request.
   *
   * @api private
   */
  create() {
    const opts = pick(
      this.opts,
      "agent",
      "enablesXDR",
      "pfx",
      "key",
      "passphrase",
      "cert",
      "ca",
      "ciphers",
      "rejectUnauthorized",
      "autoUnref"
    );
    opts.xdomain = !!this.opts.xd;
    opts.xscheme = !!this.opts.xs;

    const xhr = (this.xhr = new XMLHttpRequest(opts));

    try {
      debug("xhr open %s: %s", this.method, this.uri);
      xhr.open(this.method, this.uri, this.async);
      try {
        if (this.opts.extraHeaders) {
          xhr.setDisableHeaderCheck && xhr.setDisableHeaderCheck(true);
          for (let i in this.opts.extraHeaders) {
            if (this.opts.extraHeaders.hasOwnProperty(i)) {
              xhr.setRequestHeader(i, this.opts.extraHeaders[i]);
            }
          }
        }
      } catch (e) {}

      if ("POST" === this.method) {
        try {
          xhr.setRequestHeader("Content-type", "text/plain;charset=UTF-8");
        } catch (e) {}
      }

      try {
        xhr.setRequestHeader("Accept", "*/*");
      } catch (e) {}

      // ie6 check
      if ("withCredentials" in xhr) {
        xhr.withCredentials = this.opts.withCredentials;
      }

      if (this.opts.requestTimeout) {
        xhr.timeout = this.opts.requestTimeout;
      }

      if (this.hasXDR()) {
        xhr.onload = () => {
          this.onLoad();
        };
        xhr.onerror = () => {
          this.onError(xhr.responseText);
        };
      } else {
        xhr.onreadystatechange = () => {
          if (4 !== xhr.readyState) return;
          if (200 === xhr.status || 1223 === xhr.status) {
            this.onLoad();
          } else {
            // make sure the `error` event handler that's user-set
            // does not throw in the same tick and gets caught here
            setTimeout(() => {
              this.onError(typeof xhr.status === "number" ? xhr.status : 0);
            }, 0);
          }
        };
      }

      debug("xhr data %s", this.data);
      xhr.send(this.data);
    } catch (e) {
      // Need to defer since .create() is called directly from the constructor
      // and thus the 'error' event can only be only bound *after* this exception
      // occurs.  Therefore, also, we cannot throw here at all.
      setTimeout(() => {
        this.onError(e);
      }, 0);
      return;
    }

    if (typeof document !== "undefined") {
      this.index = Request.requestsCount++;
      Request.requests[this.index] = this;
    }
  }

  /**
   * Called upon successful response.
   *
   * @api private
   */
  onSuccess() {
    this.emit("success");
    this.cleanup();
  }

  /**
   * Called if we have data.
   *
   * @api private
   */
  onData(data) {
    this.emit("data", data);
    this.onSuccess();
  }

  /**
   * Called upon error.
   *
   * @api private
   */
  onError(err) {
    this.emit("error", err);
    this.cleanup(true);
  }

  /**
   * Cleans up house.
   *
   * @api private
   */
  cleanup(fromError) {
    if ("undefined" === typeof this.xhr || null === this.xhr) {
      return;
    }
    // xmlhttprequest
    if (this.hasXDR()) {
      this.xhr.onload = this.xhr.onerror = empty;
    } else {
      this.xhr.onreadystatechange = empty;
    }

    if (fromError) {
      try {
        this.xhr.abort();
      } catch (e) {}
    }

    if (typeof document !== "undefined") {
      delete Request.requests[this.index];
    }

    this.xhr = null;
  }

  /**
   * Called upon load.
   *
   * @api private
   */
  onLoad() {
    const data = this.xhr.responseText;
    if (data !== null) {
      this.onData(data);
    }
  }

  /**
   * Check if it has XDomainRequest.
   *
   * @api private
   */
  hasXDR() {
    return typeof XDomainRequest !== "undefined" && !this.xs && this.enablesXDR;
  }

  /**
   * Aborts the request.
   *
   * @api public
   */
  abort() {
    this.cleanup();
  }
}

/**
 * Aborts pending requests when unloading the window. This is needed to prevent
 * memory leaks (e.g. when using IE) and to ensure that no spurious error is
 * emitted.
 */

Request.requestsCount = 0;
Request.requests = {};

if (typeof document !== "undefined") {
  if (typeof attachEvent === "function") {
    attachEvent("onunload", unloadHandler);
  } else if (typeof addEventListener === "function") {
    const terminationEvent = "onpagehide" in globalThis ? "pagehide" : "unload";
    addEventListener(terminationEvent, unloadHandler, false);
  }
}

function unloadHandler() {
  for (let i in Request.requests) {
    if (Request.requests.hasOwnProperty(i)) {
      Request.requests[i].abort();
    }
  }
}

module.exports = XHR;
module.exports.Request = Request;


/***/ }),

/***/ "./node_modules/engine.io-client/lib/transports/polling.js":
/*!*****************************************************************!*\
  !*** ./node_modules/engine.io-client/lib/transports/polling.js ***!
  \*****************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

const Transport = __webpack_require__(/*! ../transport */ "./node_modules/engine.io-client/lib/transport.js");
const parseqs = __webpack_require__(/*! parseqs */ "./node_modules/parseqs/index.js");
const parser = __webpack_require__(/*! engine.io-parser */ "./node_modules/engine.io-parser/lib/index.js");
const yeast = __webpack_require__(/*! yeast */ "./node_modules/yeast/index.js");

const debug = __webpack_require__(/*! debug */ "./node_modules/engine.io-client/node_modules/debug/src/browser.js")("engine.io-client:polling");

class Polling extends Transport {
  /**
   * Transport name.
   */
  get name() {
    return "polling";
  }

  /**
   * Opens the socket (triggers polling). We write a PING message to determine
   * when the transport is open.
   *
   * @api private
   */
  doOpen() {
    this.poll();
  }

  /**
   * Pauses polling.
   *
   * @param {Function} callback upon buffers are flushed and transport is paused
   * @api private
   */
  pause(onPause) {
    this.readyState = "pausing";

    const pause = () => {
      debug("paused");
      this.readyState = "paused";
      onPause();
    };

    if (this.polling || !this.writable) {
      let total = 0;

      if (this.polling) {
        debug("we are currently polling - waiting to pause");
        total++;
        this.once("pollComplete", function() {
          debug("pre-pause polling complete");
          --total || pause();
        });
      }

      if (!this.writable) {
        debug("we are currently writing - waiting to pause");
        total++;
        this.once("drain", function() {
          debug("pre-pause writing complete");
          --total || pause();
        });
      }
    } else {
      pause();
    }
  }

  /**
   * Starts polling cycle.
   *
   * @api public
   */
  poll() {
    debug("polling");
    this.polling = true;
    this.doPoll();
    this.emit("poll");
  }

  /**
   * Overloads onData to detect payloads.
   *
   * @api private
   */
  onData(data) {
    debug("polling got data %s", data);
    const callback = packet => {
      // if its the first message we consider the transport open
      if ("opening" === this.readyState && packet.type === "open") {
        this.onOpen();
      }

      // if its a close packet, we close the ongoing requests
      if ("close" === packet.type) {
        this.onClose();
        return false;
      }

      // otherwise bypass onData and handle the message
      this.onPacket(packet);
    };

    // decode payload
    parser.decodePayload(data, this.socket.binaryType).forEach(callback);

    // if an event did not trigger closing
    if ("closed" !== this.readyState) {
      // if we got data we're not polling
      this.polling = false;
      this.emit("pollComplete");

      if ("open" === this.readyState) {
        this.poll();
      } else {
        debug('ignoring poll - transport state "%s"', this.readyState);
      }
    }
  }

  /**
   * For polling, send a close packet.
   *
   * @api private
   */
  doClose() {
    const close = () => {
      debug("writing close packet");
      this.write([{ type: "close" }]);
    };

    if ("open" === this.readyState) {
      debug("transport open - closing");
      close();
    } else {
      // in case we're trying to close while
      // handshaking is in progress (GH-164)
      debug("transport not open - deferring close");
      this.once("open", close);
    }
  }

  /**
   * Writes a packets payload.
   *
   * @param {Array} data packets
   * @param {Function} drain callback
   * @api private
   */
  write(packets) {
    this.writable = false;

    parser.encodePayload(packets, data => {
      this.doWrite(data, () => {
        this.writable = true;
        this.emit("drain");
      });
    });
  }

  /**
   * Generates uri for connection.
   *
   * @api private
   */
  uri() {
    let query = this.query || {};
    const schema = this.opts.secure ? "https" : "http";
    let port = "";

    // cache busting is forced
    if (false !== this.opts.timestampRequests) {
      query[this.opts.timestampParam] = yeast();
    }

    if (!this.supportsBinary && !query.sid) {
      query.b64 = 1;
    }

    query = parseqs.encode(query);

    // avoid port if default for schema
    if (
      this.opts.port &&
      (("https" === schema && Number(this.opts.port) !== 443) ||
        ("http" === schema && Number(this.opts.port) !== 80))
    ) {
      port = ":" + this.opts.port;
    }

    // prepend ? to query
    if (query.length) {
      query = "?" + query;
    }

    const ipv6 = this.opts.hostname.indexOf(":") !== -1;
    return (
      schema +
      "://" +
      (ipv6 ? "[" + this.opts.hostname + "]" : this.opts.hostname) +
      port +
      this.opts.path +
      query
    );
  }
}

module.exports = Polling;


/***/ }),

/***/ "./node_modules/engine.io-client/lib/transports/websocket-constructor.browser.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/engine.io-client/lib/transports/websocket-constructor.browser.js ***!
  \***************************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

const globalThis = __webpack_require__(/*! ../globalThis */ "./node_modules/engine.io-client/lib/globalThis.browser.js");

module.exports = {
  WebSocket: globalThis.WebSocket || globalThis.MozWebSocket,
  usingBrowserWebSocket: true,
  defaultBinaryType: "arraybuffer"
};


/***/ }),

/***/ "./node_modules/engine.io-client/lib/transports/websocket.js":
/*!*******************************************************************!*\
  !*** ./node_modules/engine.io-client/lib/transports/websocket.js ***!
  \*******************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

const Transport = __webpack_require__(/*! ../transport */ "./node_modules/engine.io-client/lib/transport.js");
const parser = __webpack_require__(/*! engine.io-parser */ "./node_modules/engine.io-parser/lib/index.js");
const parseqs = __webpack_require__(/*! parseqs */ "./node_modules/parseqs/index.js");
const yeast = __webpack_require__(/*! yeast */ "./node_modules/yeast/index.js");
const { pick } = __webpack_require__(/*! ../util */ "./node_modules/engine.io-client/lib/util.js");
const {
  WebSocket,
  usingBrowserWebSocket,
  defaultBinaryType
} = __webpack_require__(/*! ./websocket-constructor */ "./node_modules/engine.io-client/lib/transports/websocket-constructor.browser.js");

const debug = __webpack_require__(/*! debug */ "./node_modules/engine.io-client/node_modules/debug/src/browser.js")("engine.io-client:websocket");

// detect ReactNative environment
const isReactNative =
  typeof navigator !== "undefined" &&
  typeof navigator.product === "string" &&
  navigator.product.toLowerCase() === "reactnative";

class WS extends Transport {
  /**
   * WebSocket transport constructor.
   *
   * @api {Object} connection options
   * @api public
   */
  constructor(opts) {
    super(opts);

    this.supportsBinary = !opts.forceBase64;
  }

  /**
   * Transport name.
   *
   * @api public
   */
  get name() {
    return "websocket";
  }

  /**
   * Opens socket.
   *
   * @api private
   */
  doOpen() {
    if (!this.check()) {
      // let probe timeout
      return;
    }

    const uri = this.uri();
    const protocols = this.opts.protocols;

    // React Native only supports the 'headers' option, and will print a warning if anything else is passed
    const opts = isReactNative
      ? {}
      : pick(
          this.opts,
          "agent",
          "perMessageDeflate",
          "pfx",
          "key",
          "passphrase",
          "cert",
          "ca",
          "ciphers",
          "rejectUnauthorized",
          "localAddress",
          "protocolVersion",
          "origin",
          "maxPayload",
          "family",
          "checkServerIdentity"
        );

    if (this.opts.extraHeaders) {
      opts.headers = this.opts.extraHeaders;
    }

    try {
      this.ws =
        usingBrowserWebSocket && !isReactNative
          ? protocols
            ? new WebSocket(uri, protocols)
            : new WebSocket(uri)
          : new WebSocket(uri, protocols, opts);
    } catch (err) {
      return this.emit("error", err);
    }

    this.ws.binaryType = this.socket.binaryType || defaultBinaryType;

    this.addEventListeners();
  }

  /**
   * Adds event listeners to the socket
   *
   * @api private
   */
  addEventListeners() {
    this.ws.onopen = () => {
      if (this.opts.autoUnref) {
        this.ws._socket.unref();
      }
      this.onOpen();
    };
    this.ws.onclose = this.onClose.bind(this);
    this.ws.onmessage = ev => this.onData(ev.data);
    this.ws.onerror = e => this.onError("websocket error", e);
  }

  /**
   * Writes data to socket.
   *
   * @param {Array} array of packets.
   * @api private
   */
  write(packets) {
    this.writable = false;

    // encodePacket efficient as it uses WS framing
    // no need for encodePayload
    for (let i = 0; i < packets.length; i++) {
      const packet = packets[i];
      const lastPacket = i === packets.length - 1;

      parser.encodePacket(packet, this.supportsBinary, data => {
        // always create a new object (GH-437)
        const opts = {};
        if (!usingBrowserWebSocket) {
          if (packet.options) {
            opts.compress = packet.options.compress;
          }

          if (this.opts.perMessageDeflate) {
            const len =
              "string" === typeof data ? Buffer.byteLength(data) : data.length;
            if (len < this.opts.perMessageDeflate.threshold) {
              opts.compress = false;
            }
          }
        }

        // Sometimes the websocket has already been closed but the browser didn't
        // have a chance of informing us about it yet, in that case send will
        // throw an error
        try {
          if (usingBrowserWebSocket) {
            // TypeError is thrown when passing the second argument on Safari
            this.ws.send(data);
          } else {
            this.ws.send(data, opts);
          }
        } catch (e) {
          debug("websocket closed before onclose event");
        }

        if (lastPacket) {
          // fake drain
          // defer to next tick to allow Socket to clear writeBuffer
          setTimeout(() => {
            this.writable = true;
            this.emit("drain");
          }, 0);
        }
      });
    }
  }

  /**
   * Called upon close
   *
   * @api private
   */
  onClose() {
    Transport.prototype.onClose.call(this);
  }

  /**
   * Closes socket.
   *
   * @api private
   */
  doClose() {
    if (typeof this.ws !== "undefined") {
      this.ws.close();
      this.ws = null;
    }
  }

  /**
   * Generates uri for connection.
   *
   * @api private
   */
  uri() {
    let query = this.query || {};
    const schema = this.opts.secure ? "wss" : "ws";
    let port = "";

    // avoid port if default for schema
    if (
      this.opts.port &&
      (("wss" === schema && Number(this.opts.port) !== 443) ||
        ("ws" === schema && Number(this.opts.port) !== 80))
    ) {
      port = ":" + this.opts.port;
    }

    // append timestamp to URI
    if (this.opts.timestampRequests) {
      query[this.opts.timestampParam] = yeast();
    }

    // communicate binary support capabilities
    if (!this.supportsBinary) {
      query.b64 = 1;
    }

    query = parseqs.encode(query);

    // prepend ? to query
    if (query.length) {
      query = "?" + query;
    }

    const ipv6 = this.opts.hostname.indexOf(":") !== -1;
    return (
      schema +
      "://" +
      (ipv6 ? "[" + this.opts.hostname + "]" : this.opts.hostname) +
      port +
      this.opts.path +
      query
    );
  }

  /**
   * Feature detection for WebSocket.
   *
   * @return {Boolean} whether this transport is available.
   * @api public
   */
  check() {
    return (
      !!WebSocket &&
      !("__initialize" in WebSocket && this.name === WS.prototype.name)
    );
  }
}

module.exports = WS;


/***/ }),

/***/ "./node_modules/engine.io-client/lib/util.js":
/*!***************************************************!*\
  !*** ./node_modules/engine.io-client/lib/util.js ***!
  \***************************************************/
/***/ ((module) => {

module.exports.pick = (obj, ...attr) => {
  return attr.reduce((acc, k) => {
    if (obj.hasOwnProperty(k)) {
      acc[k] = obj[k];
    }
    return acc;
  }, {});
};


/***/ }),

/***/ "./node_modules/engine.io-client/lib/xmlhttprequest.js":
/*!*************************************************************!*\
  !*** ./node_modules/engine.io-client/lib/xmlhttprequest.js ***!
  \*************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

// browser shim for xmlhttprequest module

const hasCORS = __webpack_require__(/*! has-cors */ "./node_modules/has-cors/index.js");
const globalThis = __webpack_require__(/*! ./globalThis */ "./node_modules/engine.io-client/lib/globalThis.browser.js");

module.exports = function(opts) {
  const xdomain = opts.xdomain;

  // scheme must be same when usign XDomainRequest
  // http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx
  const xscheme = opts.xscheme;

  // XDomainRequest has a flow of not sending cookie, therefore it should be disabled as a default.
  // https://github.com/Automattic/engine.io-client/pull/217
  const enablesXDR = opts.enablesXDR;

  // XMLHttpRequest can be disabled on IE
  try {
    if ("undefined" !== typeof XMLHttpRequest && (!xdomain || hasCORS)) {
      return new XMLHttpRequest();
    }
  } catch (e) {}

  // Use XDomainRequest for IE8 if enablesXDR is true
  // because loading bar keeps flashing when using jsonp-polling
  // https://github.com/yujiosaka/socke.io-ie8-loading-example
  try {
    if ("undefined" !== typeof XDomainRequest && !xscheme && enablesXDR) {
      return new XDomainRequest();
    }
  } catch (e) {}

  if (!xdomain) {
    try {
      return new globalThis[["Active"].concat("Object").join("X")](
        "Microsoft.XMLHTTP"
      );
    } catch (e) {}
  }
};


/***/ }),

/***/ "./node_modules/engine.io-client/node_modules/debug/src/browser.js":
/*!*************************************************************************!*\
  !*** ./node_modules/engine.io-client/node_modules/debug/src/browser.js ***!
  \*************************************************************************/
/***/ ((module, exports, __webpack_require__) => {

/* eslint-env browser */

/**
 * This is the web browser implementation of `debug()`.
 */

exports.formatArgs = formatArgs;
exports.save = save;
exports.load = load;
exports.useColors = useColors;
exports.storage = localstorage();
exports.destroy = (() => {
	let warned = false;

	return () => {
		if (!warned) {
			warned = true;
			console.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');
		}
	};
})();

/**
 * Colors.
 */

exports.colors = [
	'#0000CC',
	'#0000FF',
	'#0033CC',
	'#0033FF',
	'#0066CC',
	'#0066FF',
	'#0099CC',
	'#0099FF',
	'#00CC00',
	'#00CC33',
	'#00CC66',
	'#00CC99',
	'#00CCCC',
	'#00CCFF',
	'#3300CC',
	'#3300FF',
	'#3333CC',
	'#3333FF',
	'#3366CC',
	'#3366FF',
	'#3399CC',
	'#3399FF',
	'#33CC00',
	'#33CC33',
	'#33CC66',
	'#33CC99',
	'#33CCCC',
	'#33CCFF',
	'#6600CC',
	'#6600FF',
	'#6633CC',
	'#6633FF',
	'#66CC00',
	'#66CC33',
	'#9900CC',
	'#9900FF',
	'#9933CC',
	'#9933FF',
	'#99CC00',
	'#99CC33',
	'#CC0000',
	'#CC0033',
	'#CC0066',
	'#CC0099',
	'#CC00CC',
	'#CC00FF',
	'#CC3300',
	'#CC3333',
	'#CC3366',
	'#CC3399',
	'#CC33CC',
	'#CC33FF',
	'#CC6600',
	'#CC6633',
	'#CC9900',
	'#CC9933',
	'#CCCC00',
	'#CCCC33',
	'#FF0000',
	'#FF0033',
	'#FF0066',
	'#FF0099',
	'#FF00CC',
	'#FF00FF',
	'#FF3300',
	'#FF3333',
	'#FF3366',
	'#FF3399',
	'#FF33CC',
	'#FF33FF',
	'#FF6600',
	'#FF6633',
	'#FF9900',
	'#FF9933',
	'#FFCC00',
	'#FFCC33'
];

/**
 * Currently only WebKit-based Web Inspectors, Firefox >= v31,
 * and the Firebug extension (any Firefox version) are known
 * to support "%c" CSS customizations.
 *
 * TODO: add a `localStorage` variable to explicitly enable/disable colors
 */

// eslint-disable-next-line complexity
function useColors() {
	// NB: In an Electron preload script, document will be defined but not fully
	// initialized. Since we know we're in Chrome, we'll just detect this case
	// explicitly
	if (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {
		return true;
	}

	// Internet Explorer and Edge do not support colors.
	if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)) {
		return false;
	}

	// Is webkit? http://stackoverflow.com/a/16459606/376773
	// document is undefined in react-native: https://github.com/facebook/react-native/pull/1632
	return (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||
		// Is firebug? http://stackoverflow.com/a/398120/376773
		(typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||
		// Is firefox >= v31?
		// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages
		(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||
		// Double check webkit in userAgent just in case we are in a worker
		(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/));
}

/**
 * Colorize log arguments if enabled.
 *
 * @api public
 */

function formatArgs(args) {
	args[0] = (this.useColors ? '%c' : '') +
		this.namespace +
		(this.useColors ? ' %c' : ' ') +
		args[0] +
		(this.useColors ? '%c ' : ' ') +
		'+' + module.exports.humanize(this.diff);

	if (!this.useColors) {
		return;
	}

	const c = 'color: ' + this.color;
	args.splice(1, 0, c, 'color: inherit');

	// The final "%c" is somewhat tricky, because there could be other
	// arguments passed either before or after the %c, so we need to
	// figure out the correct index to insert the CSS into
	let index = 0;
	let lastC = 0;
	args[0].replace(/%[a-zA-Z%]/g, match => {
		if (match === '%%') {
			return;
		}
		index++;
		if (match === '%c') {
			// We only are interested in the *last* %c
			// (the user may have provided their own)
			lastC = index;
		}
	});

	args.splice(lastC, 0, c);
}

/**
 * Invokes `console.debug()` when available.
 * No-op when `console.debug` is not a "function".
 * If `console.debug` is not available, falls back
 * to `console.log`.
 *
 * @api public
 */
exports.log = console.debug || console.log || (() => {});

/**
 * Save `namespaces`.
 *
 * @param {String} namespaces
 * @api private
 */
function save(namespaces) {
	try {
		if (namespaces) {
			exports.storage.setItem('debug', namespaces);
		} else {
			exports.storage.removeItem('debug');
		}
	} catch (error) {
		// Swallow
		// XXX (@Qix-) should we be logging these?
	}
}

/**
 * Load `namespaces`.
 *
 * @return {String} returns the previously persisted debug modes
 * @api private
 */
function load() {
	let r;
	try {
		r = exports.storage.getItem('debug');
	} catch (error) {
		// Swallow
		// XXX (@Qix-) should we be logging these?
	}

	// If debug isn't set in LS, and we're in Electron, try to load $DEBUG
	if (!r && typeof process !== 'undefined' && 'env' in process) {
		r = process.env.DEBUG;
	}

	return r;
}

/**
 * Localstorage attempts to return the localstorage.
 *
 * This is necessary because safari throws
 * when a user disables cookies/localstorage
 * and you attempt to access it.
 *
 * @return {LocalStorage}
 * @api private
 */

function localstorage() {
	try {
		// TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context
		// The Browser also has localStorage in the global context.
		return localStorage;
	} catch (error) {
		// Swallow
		// XXX (@Qix-) should we be logging these?
	}
}

module.exports = __webpack_require__(/*! ./common */ "./node_modules/engine.io-client/node_modules/debug/src/common.js")(exports);

const {formatters} = module.exports;

/**
 * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.
 */

formatters.j = function (v) {
	try {
		return JSON.stringify(v);
	} catch (error) {
		return '[UnexpectedJSONParseError]: ' + error.message;
	}
};


/***/ }),

/***/ "./node_modules/engine.io-client/node_modules/debug/src/common.js":
/*!************************************************************************!*\
  !*** ./node_modules/engine.io-client/node_modules/debug/src/common.js ***!
  \************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


/**
 * This is the common logic for both the Node.js and web browser
 * implementations of `debug()`.
 */

function setup(env) {
	createDebug.debug = createDebug;
	createDebug.default = createDebug;
	createDebug.coerce = coerce;
	createDebug.disable = disable;
	createDebug.enable = enable;
	createDebug.enabled = enabled;
	createDebug.humanize = __webpack_require__(/*! ms */ "./node_modules/engine.io-client/node_modules/ms/index.js");
	createDebug.destroy = destroy;

	Object.keys(env).forEach(key => {
		createDebug[key] = env[key];
	});

	/**
	* The currently active debug mode names, and names to skip.
	*/

	createDebug.names = [];
	createDebug.skips = [];

	/**
	* Map of special "%n" handling functions, for the debug "format" argument.
	*
	* Valid key names are a single, lower or upper-case letter, i.e. "n" and "N".
	*/
	createDebug.formatters = {};

	/**
	* Selects a color for a debug namespace
	* @param {String} namespace The namespace string for the for the debug instance to be colored
	* @return {Number|String} An ANSI color code for the given namespace
	* @api private
	*/
	function selectColor(namespace) {
		let hash = 0;

		for (let i = 0; i < namespace.length; i++) {
			hash = ((hash << 5) - hash) + namespace.charCodeAt(i);
			hash |= 0; // Convert to 32bit integer
		}

		return createDebug.colors[Math.abs(hash) % createDebug.colors.length];
	}
	createDebug.selectColor = selectColor;

	/**
	* Create a debugger with the given `namespace`.
	*
	* @param {String} namespace
	* @return {Function}
	* @api public
	*/
	function createDebug(namespace) {
		let prevTime;
		let enableOverride = null;

		function debug(...args) {
			// Disabled?
			if (!debug.enabled) {
				return;
			}

			const self = debug;

			// Set `diff` timestamp
			const curr = Number(new Date());
			const ms = curr - (prevTime || curr);
			self.diff = ms;
			self.prev = prevTime;
			self.curr = curr;
			prevTime = curr;

			args[0] = createDebug.coerce(args[0]);

			if (typeof args[0] !== 'string') {
				// Anything else let's inspect with %O
				args.unshift('%O');
			}

			// Apply any `formatters` transformations
			let index = 0;
			args[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format) => {
				// If we encounter an escaped % then don't increase the array index
				if (match === '%%') {
					return '%';
				}
				index++;
				const formatter = createDebug.formatters[format];
				if (typeof formatter === 'function') {
					const val = args[index];
					match = formatter.call(self, val);

					// Now we need to remove `args[index]` since it's inlined in the `format`
					args.splice(index, 1);
					index--;
				}
				return match;
			});

			// Apply env-specific formatting (colors, etc.)
			createDebug.formatArgs.call(self, args);

			const logFn = self.log || createDebug.log;
			logFn.apply(self, args);
		}

		debug.namespace = namespace;
		debug.useColors = createDebug.useColors();
		debug.color = createDebug.selectColor(namespace);
		debug.extend = extend;
		debug.destroy = createDebug.destroy; // XXX Temporary. Will be removed in the next major release.

		Object.defineProperty(debug, 'enabled', {
			enumerable: true,
			configurable: false,
			get: () => enableOverride === null ? createDebug.enabled(namespace) : enableOverride,
			set: v => {
				enableOverride = v;
			}
		});

		// Env-specific initialization logic for debug instances
		if (typeof createDebug.init === 'function') {
			createDebug.init(debug);
		}

		return debug;
	}

	function extend(namespace, delimiter) {
		const newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);
		newDebug.log = this.log;
		return newDebug;
	}

	/**
	* Enables a debug mode by namespaces. This can include modes
	* separated by a colon and wildcards.
	*
	* @param {String} namespaces
	* @api public
	*/
	function enable(namespaces) {
		createDebug.save(namespaces);

		createDebug.names = [];
		createDebug.skips = [];

		let i;
		const split = (typeof namespaces === 'string' ? namespaces : '').split(/[\s,]+/);
		const len = split.length;

		for (i = 0; i < len; i++) {
			if (!split[i]) {
				// ignore empty strings
				continue;
			}

			namespaces = split[i].replace(/\*/g, '.*?');

			if (namespaces[0] === '-') {
				createDebug.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));
			} else {
				createDebug.names.push(new RegExp('^' + namespaces + '$'));
			}
		}
	}

	/**
	* Disable debug output.
	*
	* @return {String} namespaces
	* @api public
	*/
	function disable() {
		const namespaces = [
			...createDebug.names.map(toNamespace),
			...createDebug.skips.map(toNamespace).map(namespace => '-' + namespace)
		].join(',');
		createDebug.enable('');
		return namespaces;
	}

	/**
	* Returns true if the given mode name is enabled, false otherwise.
	*
	* @param {String} name
	* @return {Boolean}
	* @api public
	*/
	function enabled(name) {
		if (name[name.length - 1] === '*') {
			return true;
		}

		let i;
		let len;

		for (i = 0, len = createDebug.skips.length; i < len; i++) {
			if (createDebug.skips[i].test(name)) {
				return false;
			}
		}

		for (i = 0, len = createDebug.names.length; i < len; i++) {
			if (createDebug.names[i].test(name)) {
				return true;
			}
		}

		return false;
	}

	/**
	* Convert regexp to namespace
	*
	* @param {RegExp} regxep
	* @return {String} namespace
	* @api private
	*/
	function toNamespace(regexp) {
		return regexp.toString()
			.substring(2, regexp.toString().length - 2)
			.replace(/\.\*\?$/, '*');
	}

	/**
	* Coerce `val`.
	*
	* @param {Mixed} val
	* @return {Mixed}
	* @api private
	*/
	function coerce(val) {
		if (val instanceof Error) {
			return val.stack || val.message;
		}
		return val;
	}

	/**
	* XXX DO NOT USE. This is a temporary stub function.
	* XXX It WILL be removed in the next major release.
	*/
	function destroy() {
		console.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');
	}

	createDebug.enable(createDebug.load());

	return createDebug;
}

module.exports = setup;


/***/ }),

/***/ "./node_modules/engine.io-client/node_modules/ms/index.js":
/*!****************************************************************!*\
  !*** ./node_modules/engine.io-client/node_modules/ms/index.js ***!
  \****************************************************************/
/***/ ((module) => {

/**
 * Helpers.
 */

var s = 1000;
var m = s * 60;
var h = m * 60;
var d = h * 24;
var w = d * 7;
var y = d * 365.25;

/**
 * Parse or format the given `val`.
 *
 * Options:
 *
 *  - `long` verbose formatting [false]
 *
 * @param {String|Number} val
 * @param {Object} [options]
 * @throws {Error} throw an error if val is not a non-empty string or a number
 * @return {String|Number}
 * @api public
 */

module.exports = function(val, options) {
  options = options || {};
  var type = typeof val;
  if (type === 'string' && val.length > 0) {
    return parse(val);
  } else if (type === 'number' && isFinite(val)) {
    return options.long ? fmtLong(val) : fmtShort(val);
  }
  throw new Error(
    'val is not a non-empty string or a valid number. val=' +
      JSON.stringify(val)
  );
};

/**
 * Parse the given `str` and return milliseconds.
 *
 * @param {String} str
 * @return {Number}
 * @api private
 */

function parse(str) {
  str = String(str);
  if (str.length > 100) {
    return;
  }
  var match = /^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(
    str
  );
  if (!match) {
    return;
  }
  var n = parseFloat(match[1]);
  var type = (match[2] || 'ms').toLowerCase();
  switch (type) {
    case 'years':
    case 'year':
    case 'yrs':
    case 'yr':
    case 'y':
      return n * y;
    case 'weeks':
    case 'week':
    case 'w':
      return n * w;
    case 'days':
    case 'day':
    case 'd':
      return n * d;
    case 'hours':
    case 'hour':
    case 'hrs':
    case 'hr':
    case 'h':
      return n * h;
    case 'minutes':
    case 'minute':
    case 'mins':
    case 'min':
    case 'm':
      return n * m;
    case 'seconds':
    case 'second':
    case 'secs':
    case 'sec':
    case 's':
      return n * s;
    case 'milliseconds':
    case 'millisecond':
    case 'msecs':
    case 'msec':
    case 'ms':
      return n;
    default:
      return undefined;
  }
}

/**
 * Short format for `ms`.
 *
 * @param {Number} ms
 * @return {String}
 * @api private
 */

function fmtShort(ms) {
  var msAbs = Math.abs(ms);
  if (msAbs >= d) {
    return Math.round(ms / d) + 'd';
  }
  if (msAbs >= h) {
    return Math.round(ms / h) + 'h';
  }
  if (msAbs >= m) {
    return Math.round(ms / m) + 'm';
  }
  if (msAbs >= s) {
    return Math.round(ms / s) + 's';
  }
  return ms + 'ms';
}

/**
 * Long format for `ms`.
 *
 * @param {Number} ms
 * @return {String}
 * @api private
 */

function fmtLong(ms) {
  var msAbs = Math.abs(ms);
  if (msAbs >= d) {
    return plural(ms, msAbs, d, 'day');
  }
  if (msAbs >= h) {
    return plural(ms, msAbs, h, 'hour');
  }
  if (msAbs >= m) {
    return plural(ms, msAbs, m, 'minute');
  }
  if (msAbs >= s) {
    return plural(ms, msAbs, s, 'second');
  }
  return ms + ' ms';
}

/**
 * Pluralization helper.
 */

function plural(ms, msAbs, n, name) {
  var isPlural = msAbs >= n * 1.5;
  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');
}


/***/ }),

/***/ "./node_modules/engine.io-parser/lib/commons.js":
/*!******************************************************!*\
  !*** ./node_modules/engine.io-parser/lib/commons.js ***!
  \******************************************************/
/***/ ((module) => {

const PACKET_TYPES = Object.create(null); // no Map = no polyfill
PACKET_TYPES["open"] = "0";
PACKET_TYPES["close"] = "1";
PACKET_TYPES["ping"] = "2";
PACKET_TYPES["pong"] = "3";
PACKET_TYPES["message"] = "4";
PACKET_TYPES["upgrade"] = "5";
PACKET_TYPES["noop"] = "6";

const PACKET_TYPES_REVERSE = Object.create(null);
Object.keys(PACKET_TYPES).forEach(key => {
  PACKET_TYPES_REVERSE[PACKET_TYPES[key]] = key;
});

const ERROR_PACKET = { type: "error", data: "parser error" };

module.exports = {
  PACKET_TYPES,
  PACKET_TYPES_REVERSE,
  ERROR_PACKET
};


/***/ }),

/***/ "./node_modules/engine.io-parser/lib/decodePacket.browser.js":
/*!*******************************************************************!*\
  !*** ./node_modules/engine.io-parser/lib/decodePacket.browser.js ***!
  \*******************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

const { PACKET_TYPES_REVERSE, ERROR_PACKET } = __webpack_require__(/*! ./commons */ "./node_modules/engine.io-parser/lib/commons.js");

const withNativeArrayBuffer = typeof ArrayBuffer === "function";

let base64decoder;
if (withNativeArrayBuffer) {
  base64decoder = __webpack_require__(/*! base64-arraybuffer */ "./node_modules/base64-arraybuffer/lib/base64-arraybuffer.js");
}

const decodePacket = (encodedPacket, binaryType) => {
  if (typeof encodedPacket !== "string") {
    return {
      type: "message",
      data: mapBinary(encodedPacket, binaryType)
    };
  }
  const type = encodedPacket.charAt(0);
  if (type === "b") {
    return {
      type: "message",
      data: decodeBase64Packet(encodedPacket.substring(1), binaryType)
    };
  }
  const packetType = PACKET_TYPES_REVERSE[type];
  if (!packetType) {
    return ERROR_PACKET;
  }
  return encodedPacket.length > 1
    ? {
        type: PACKET_TYPES_REVERSE[type],
        data: encodedPacket.substring(1)
      }
    : {
        type: PACKET_TYPES_REVERSE[type]
      };
};

const decodeBase64Packet = (data, binaryType) => {
  if (base64decoder) {
    const decoded = base64decoder.decode(data);
    return mapBinary(decoded, binaryType);
  } else {
    return { base64: true, data }; // fallback for old browsers
  }
};

const mapBinary = (data, binaryType) => {
  switch (binaryType) {
    case "blob":
      return data instanceof ArrayBuffer ? new Blob([data]) : data;
    case "arraybuffer":
    default:
      return data; // assuming the data is already an ArrayBuffer
  }
};

module.exports = decodePacket;


/***/ }),

/***/ "./node_modules/engine.io-parser/lib/encodePacket.browser.js":
/*!*******************************************************************!*\
  !*** ./node_modules/engine.io-parser/lib/encodePacket.browser.js ***!
  \*******************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

const { PACKET_TYPES } = __webpack_require__(/*! ./commons */ "./node_modules/engine.io-parser/lib/commons.js");

const withNativeBlob =
  typeof Blob === "function" ||
  (typeof Blob !== "undefined" &&
    Object.prototype.toString.call(Blob) === "[object BlobConstructor]");
const withNativeArrayBuffer = typeof ArrayBuffer === "function";

// ArrayBuffer.isView method is not defined in IE10
const isView = obj => {
  return typeof ArrayBuffer.isView === "function"
    ? ArrayBuffer.isView(obj)
    : obj && obj.buffer instanceof ArrayBuffer;
};

const encodePacket = ({ type, data }, supportsBinary, callback) => {
  if (withNativeBlob && data instanceof Blob) {
    if (supportsBinary) {
      return callback(data);
    } else {
      return encodeBlobAsBase64(data, callback);
    }
  } else if (
    withNativeArrayBuffer &&
    (data instanceof ArrayBuffer || isView(data))
  ) {
    if (supportsBinary) {
      return callback(data instanceof ArrayBuffer ? data : data.buffer);
    } else {
      return encodeBlobAsBase64(new Blob([data]), callback);
    }
  }
  // plain string
  return callback(PACKET_TYPES[type] + (data || ""));
};

const encodeBlobAsBase64 = (data, callback) => {
  const fileReader = new FileReader();
  fileReader.onload = function() {
    const content = fileReader.result.split(",")[1];
    callback("b" + content);
  };
  return fileReader.readAsDataURL(data);
};

module.exports = encodePacket;


/***/ }),

/***/ "./node_modules/engine.io-parser/lib/index.js":
/*!****************************************************!*\
  !*** ./node_modules/engine.io-parser/lib/index.js ***!
  \****************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

const encodePacket = __webpack_require__(/*! ./encodePacket */ "./node_modules/engine.io-parser/lib/encodePacket.browser.js");
const decodePacket = __webpack_require__(/*! ./decodePacket */ "./node_modules/engine.io-parser/lib/decodePacket.browser.js");

const SEPARATOR = String.fromCharCode(30); // see https://en.wikipedia.org/wiki/Delimiter#ASCII_delimited_text

const encodePayload = (packets, callback) => {
  // some packets may be added to the array while encoding, so the initial length must be saved
  const length = packets.length;
  const encodedPackets = new Array(length);
  let count = 0;

  packets.forEach((packet, i) => {
    // force base64 encoding for binary packets
    encodePacket(packet, false, encodedPacket => {
      encodedPackets[i] = encodedPacket;
      if (++count === length) {
        callback(encodedPackets.join(SEPARATOR));
      }
    });
  });
};

const decodePayload = (encodedPayload, binaryType) => {
  const encodedPackets = encodedPayload.split(SEPARATOR);
  const packets = [];
  for (let i = 0; i < encodedPackets.length; i++) {
    const decodedPacket = decodePacket(encodedPackets[i], binaryType);
    packets.push(decodedPacket);
    if (decodedPacket.type === "error") {
      break;
    }
  }
  return packets;
};

module.exports = {
  protocol: 4,
  encodePacket,
  encodePayload,
  decodePacket,
  decodePayload
};


/***/ }),

/***/ "./node_modules/eventemitter3/index.js":
/*!*********************************************!*\
  !*** ./node_modules/eventemitter3/index.js ***!
  \*********************************************/
/***/ ((module) => {

"use strict";


var has = Object.prototype.hasOwnProperty
  , prefix = '~';

/**
 * Constructor to create a storage for our `EE` objects.
 * An `Events` instance is a plain object whose properties are event names.
 *
 * @constructor
 * @private
 */
function Events() {}

//
// We try to not inherit from `Object.prototype`. In some engines creating an
// instance in this way is faster than calling `Object.create(null)` directly.
// If `Object.create(null)` is not supported we prefix the event names with a
// character to make sure that the built-in object properties are not
// overridden or used as an attack vector.
//
if (Object.create) {
  Events.prototype = Object.create(null);

  //
  // This hack is needed because the `__proto__` property is still inherited in
  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.
  //
  if (!new Events().__proto__) prefix = false;
}

/**
 * Representation of a single event listener.
 *
 * @param {Function} fn The listener function.
 * @param {*} context The context to invoke the listener with.
 * @param {Boolean} [once=false] Specify if the listener is a one-time listener.
 * @constructor
 * @private
 */
function EE(fn, context, once) {
  this.fn = fn;
  this.context = context;
  this.once = once || false;
}

/**
 * Add a listener for a given event.
 *
 * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.
 * @param {(String|Symbol)} event The event name.
 * @param {Function} fn The listener function.
 * @param {*} context The context to invoke the listener with.
 * @param {Boolean} once Specify if the listener is a one-time listener.
 * @returns {EventEmitter}
 * @private
 */
function addListener(emitter, event, fn, context, once) {
  if (typeof fn !== 'function') {
    throw new TypeError('The listener must be a function');
  }

  var listener = new EE(fn, context || emitter, once)
    , evt = prefix ? prefix + event : event;

  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;
  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);
  else emitter._events[evt] = [emitter._events[evt], listener];

  return emitter;
}

/**
 * Clear event by name.
 *
 * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.
 * @param {(String|Symbol)} evt The Event name.
 * @private
 */
function clearEvent(emitter, evt) {
  if (--emitter._eventsCount === 0) emitter._events = new Events();
  else delete emitter._events[evt];
}

/**
 * Minimal `EventEmitter` interface that is molded against the Node.js
 * `EventEmitter` interface.
 *
 * @constructor
 * @public
 */
function EventEmitter() {
  this._events = new Events();
  this._eventsCount = 0;
}

/**
 * Return an array listing the events for which the emitter has registered
 * listeners.
 *
 * @returns {Array}
 * @public
 */
EventEmitter.prototype.eventNames = function eventNames() {
  var names = []
    , events
    , name;

  if (this._eventsCount === 0) return names;

  for (name in (events = this._events)) {
    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);
  }

  if (Object.getOwnPropertySymbols) {
    return names.concat(Object.getOwnPropertySymbols(events));
  }

  return names;
};

/**
 * Return the listeners registered for a given event.
 *
 * @param {(String|Symbol)} event The event name.
 * @returns {Array} The registered listeners.
 * @public
 */
EventEmitter.prototype.listeners = function listeners(event) {
  var evt = prefix ? prefix + event : event
    , handlers = this._events[evt];

  if (!handlers) return [];
  if (handlers.fn) return [handlers.fn];

  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {
    ee[i] = handlers[i].fn;
  }

  return ee;
};

/**
 * Return the number of listeners listening to a given event.
 *
 * @param {(String|Symbol)} event The event name.
 * @returns {Number} The number of listeners.
 * @public
 */
EventEmitter.prototype.listenerCount = function listenerCount(event) {
  var evt = prefix ? prefix + event : event
    , listeners = this._events[evt];

  if (!listeners) return 0;
  if (listeners.fn) return 1;
  return listeners.length;
};

/**
 * Calls each of the listeners registered for a given event.
 *
 * @param {(String|Symbol)} event The event name.
 * @returns {Boolean} `true` if the event had listeners, else `false`.
 * @public
 */
EventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {
  var evt = prefix ? prefix + event : event;

  if (!this._events[evt]) return false;

  var listeners = this._events[evt]
    , len = arguments.length
    , args
    , i;

  if (listeners.fn) {
    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);

    switch (len) {
      case 1: return listeners.fn.call(listeners.context), true;
      case 2: return listeners.fn.call(listeners.context, a1), true;
      case 3: return listeners.fn.call(listeners.context, a1, a2), true;
      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;
      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;
      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;
    }

    for (i = 1, args = new Array(len -1); i < len; i++) {
      args[i - 1] = arguments[i];
    }

    listeners.fn.apply(listeners.context, args);
  } else {
    var length = listeners.length
      , j;

    for (i = 0; i < length; i++) {
      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);

      switch (len) {
        case 1: listeners[i].fn.call(listeners[i].context); break;
        case 2: listeners[i].fn.call(listeners[i].context, a1); break;
        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;
        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;
        default:
          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {
            args[j - 1] = arguments[j];
          }

          listeners[i].fn.apply(listeners[i].context, args);
      }
    }
  }

  return true;
};

/**
 * Add a listener for a given event.
 *
 * @param {(String|Symbol)} event The event name.
 * @param {Function} fn The listener function.
 * @param {*} [context=this] The context to invoke the listener with.
 * @returns {EventEmitter} `this`.
 * @public
 */
EventEmitter.prototype.on = function on(event, fn, context) {
  return addListener(this, event, fn, context, false);
};

/**
 * Add a one-time listener for a given event.
 *
 * @param {(String|Symbol)} event The event name.
 * @param {Function} fn The listener function.
 * @param {*} [context=this] The context to invoke the listener with.
 * @returns {EventEmitter} `this`.
 * @public
 */
EventEmitter.prototype.once = function once(event, fn, context) {
  return addListener(this, event, fn, context, true);
};

/**
 * Remove the listeners of a given event.
 *
 * @param {(String|Symbol)} event The event name.
 * @param {Function} fn Only remove the listeners that match this function.
 * @param {*} context Only remove the listeners that have this context.
 * @param {Boolean} once Only remove one-time listeners.
 * @returns {EventEmitter} `this`.
 * @public
 */
EventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {
  var evt = prefix ? prefix + event : event;

  if (!this._events[evt]) return this;
  if (!fn) {
    clearEvent(this, evt);
    return this;
  }

  var listeners = this._events[evt];

  if (listeners.fn) {
    if (
      listeners.fn === fn &&
      (!once || listeners.once) &&
      (!context || listeners.context === context)
    ) {
      clearEvent(this, evt);
    }
  } else {
    for (var i = 0, events = [], length = listeners.length; i < length; i++) {
      if (
        listeners[i].fn !== fn ||
        (once && !listeners[i].once) ||
        (context && listeners[i].context !== context)
      ) {
        events.push(listeners[i]);
      }
    }

    //
    // Reset the array, or remove it completely if we have no more listeners.
    //
    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;
    else clearEvent(this, evt);
  }

  return this;
};

/**
 * Remove all listeners, or those of the specified event.
 *
 * @param {(String|Symbol)} [event] The event name.
 * @returns {EventEmitter} `this`.
 * @public
 */
EventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {
  var evt;

  if (event) {
    evt = prefix ? prefix + event : event;
    if (this._events[evt]) clearEvent(this, evt);
  } else {
    this._events = new Events();
    this._eventsCount = 0;
  }

  return this;
};

//
// Alias methods names because people roll like that.
//
EventEmitter.prototype.off = EventEmitter.prototype.removeListener;
EventEmitter.prototype.addListener = EventEmitter.prototype.on;

//
// Expose the prefix.
//
EventEmitter.prefixed = prefix;

//
// Allow `EventEmitter` to be imported as module namespace.
//
EventEmitter.EventEmitter = EventEmitter;

//
// Expose the module.
//
if (true) {
  module.exports = EventEmitter;
}


/***/ }),

/***/ "./node_modules/has-cors/index.js":
/*!****************************************!*\
  !*** ./node_modules/has-cors/index.js ***!
  \****************************************/
/***/ ((module) => {


/**
 * Module exports.
 *
 * Logic borrowed from Modernizr:
 *
 *   - https://github.com/Modernizr/Modernizr/blob/master/feature-detects/cors.js
 */

try {
  module.exports = typeof XMLHttpRequest !== 'undefined' &&
    'withCredentials' in new XMLHttpRequest();
} catch (err) {
  // if XMLHttp support is disabled in IE then it will throw
  // when trying to create
  module.exports = false;
}


/***/ }),

/***/ "./node_modules/parseqs/index.js":
/*!***************************************!*\
  !*** ./node_modules/parseqs/index.js ***!
  \***************************************/
/***/ ((__unused_webpack_module, exports) => {

/**
 * Compiles a querystring
 * Returns string representation of the object
 *
 * @param {Object}
 * @api private
 */

exports.encode = function (obj) {
  var str = '';

  for (var i in obj) {
    if (obj.hasOwnProperty(i)) {
      if (str.length) str += '&';
      str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);
    }
  }

  return str;
};

/**
 * Parses a simple querystring into an object
 *
 * @param {String} qs
 * @api private
 */

exports.decode = function(qs){
  var qry = {};
  var pairs = qs.split('&');
  for (var i = 0, l = pairs.length; i < l; i++) {
    var pair = pairs[i].split('=');
    qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);
  }
  return qry;
};


/***/ }),

/***/ "./node_modules/parseuri/index.js":
/*!****************************************!*\
  !*** ./node_modules/parseuri/index.js ***!
  \****************************************/
/***/ ((module) => {

/**
 * Parses an URI
 *
 * @author Steven Levithan <stevenlevithan.com> (MIT license)
 * @api private
 */

var re = /^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;

var parts = [
    'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'
];

module.exports = function parseuri(str) {
    var src = str,
        b = str.indexOf('['),
        e = str.indexOf(']');

    if (b != -1 && e != -1) {
        str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);
    }

    var m = re.exec(str || ''),
        uri = {},
        i = 14;

    while (i--) {
        uri[parts[i]] = m[i] || '';
    }

    if (b != -1 && e != -1) {
        uri.source = src;
        uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');
        uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');
        uri.ipv6uri = true;
    }

    uri.pathNames = pathNames(uri, uri['path']);
    uri.queryKey = queryKey(uri, uri['query']);

    return uri;
};

function pathNames(obj, path) {
    var regx = /\/{2,9}/g,
        names = path.replace(regx, "/").split("/");

    if (path.substr(0, 1) == '/' || path.length === 0) {
        names.splice(0, 1);
    }
    if (path.substr(path.length - 1, 1) == '/') {
        names.splice(names.length - 1, 1);
    }

    return names;
}

function queryKey(uri, query) {
    var data = {};

    query.replace(/(?:^|&)([^&=]*)=?([^&]*)/g, function ($0, $1, $2) {
        if ($1) {
            data[$1] = $2;
        }
    });

    return data;
}


/***/ }),

/***/ "./node_modules/peerjs/dist/peerjs.min.js":
/*!************************************************!*\
  !*** ./node_modules/peerjs/dist/peerjs.min.js ***!
  \************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u=undefined;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if( true&&"string"==typeof t)return __webpack_require__("./node_modules/peerjs/dist sync recursive")(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]); true?module.exports=l:0}if(parcelRequire=f,i)throw i;return f}({"EgBh":[function(require,module,exports) {
var e={};e.useBlobBuilder=function(){try{return new Blob([]),!1}catch(e){return!0}}(),e.useArrayBufferView=!e.useBlobBuilder&&function(){try{return 0===new Blob([new Uint8Array([])]).size}catch(e){return!0}}(),module.exports.binaryFeatures=e;var r=module.exports.BlobBuilder;function t(){this._pieces=[],this._parts=[]}"undefined"!=typeof window&&(r=module.exports.BlobBuilder=window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder||window.BlobBuilder),t.prototype.append=function(e){"number"==typeof e?this._pieces.push(e):(this.flush(),this._parts.push(e))},t.prototype.flush=function(){if(this._pieces.length>0){var r=new Uint8Array(this._pieces);e.useArrayBufferView||(r=r.buffer),this._parts.push(r),this._pieces=[]}},t.prototype.getBuffer=function(){if(this.flush(),e.useBlobBuilder){for(var t=new r,i=0,u=this._parts.length;i<u;i++)t.append(this._parts[i]);return t.getBlob()}return new Blob(this._parts)},module.exports.BufferBuilder=t;
},{}],"kdPp":[function(require,module,exports) {
var t=require("./bufferbuilder").BufferBuilder,e=require("./bufferbuilder").binaryFeatures,i={unpack:function(t){return new r(t).unpack()},pack:function(t){var e=new n;return e.pack(t),e.getBuffer()}};function r(t){this.index=0,this.dataBuffer=t,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}function n(){this.bufferBuilder=new t}function u(t){var e=t.charCodeAt(0);return e<=2047?"00":e<=65535?"000":e<=2097151?"0000":e<=67108863?"00000":"000000"}function a(t){return t.length>600?new Blob([t]).size:t.replace(/[^\u0000-\u007F]/g,u).length}module.exports=i,r.prototype.unpack=function(){var t,e=this.unpack_uint8();if(e<128)return e;if((224^e)<32)return(224^e)-32;if((t=160^e)<=15)return this.unpack_raw(t);if((t=176^e)<=15)return this.unpack_string(t);if((t=144^e)<=15)return this.unpack_array(t);if((t=128^e)<=15)return this.unpack_map(t);switch(e){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:case 213:case 214:case 215:return;case 216:return t=this.unpack_uint16(),this.unpack_string(t);case 217:return t=this.unpack_uint32(),this.unpack_string(t);case 218:return t=this.unpack_uint16(),this.unpack_raw(t);case 219:return t=this.unpack_uint32(),this.unpack_raw(t);case 220:return t=this.unpack_uint16(),this.unpack_array(t);case 221:return t=this.unpack_uint32(),this.unpack_array(t);case 222:return t=this.unpack_uint16(),this.unpack_map(t);case 223:return t=this.unpack_uint32(),this.unpack_map(t)}},r.prototype.unpack_uint8=function(){var t=255&this.dataView[this.index];return this.index++,t},r.prototype.unpack_uint16=function(){var t=this.read(2),e=256*(255&t[0])+(255&t[1]);return this.index+=2,e},r.prototype.unpack_uint32=function(){var t=this.read(4),e=256*(256*(256*t[0]+t[1])+t[2])+t[3];return this.index+=4,e},r.prototype.unpack_uint64=function(){var t=this.read(8),e=256*(256*(256*(256*(256*(256*(256*t[0]+t[1])+t[2])+t[3])+t[4])+t[5])+t[6])+t[7];return this.index+=8,e},r.prototype.unpack_int8=function(){var t=this.unpack_uint8();return t<128?t:t-256},r.prototype.unpack_int16=function(){var t=this.unpack_uint16();return t<32768?t:t-65536},r.prototype.unpack_int32=function(){var t=this.unpack_uint32();return t<Math.pow(2,31)?t:t-Math.pow(2,32)},r.prototype.unpack_int64=function(){var t=this.unpack_uint64();return t<Math.pow(2,63)?t:t-Math.pow(2,64)},r.prototype.unpack_raw=function(t){if(this.length<this.index+t)throw new Error("BinaryPackFailure: index is out of range "+this.index+" "+t+" "+this.length);var e=this.dataBuffer.slice(this.index,this.index+t);return this.index+=t,e},r.prototype.unpack_string=function(t){for(var e,i,r=this.read(t),n=0,u="";n<t;)(e=r[n])<128?(u+=String.fromCharCode(e),n++):(192^e)<32?(i=(192^e)<<6|63&r[n+1],u+=String.fromCharCode(i),n+=2):(i=(15&e)<<12|(63&r[n+1])<<6|63&r[n+2],u+=String.fromCharCode(i),n+=3);return this.index+=t,u},r.prototype.unpack_array=function(t){for(var e=new Array(t),i=0;i<t;i++)e[i]=this.unpack();return e},r.prototype.unpack_map=function(t){for(var e={},i=0;i<t;i++){var r=this.unpack(),n=this.unpack();e[r]=n}return e},r.prototype.unpack_float=function(){var t=this.unpack_uint32(),e=(t>>23&255)-127;return(0===t>>31?1:-1)*(8388607&t|8388608)*Math.pow(2,e-23)},r.prototype.unpack_double=function(){var t=this.unpack_uint32(),e=this.unpack_uint32(),i=(t>>20&2047)-1023;return(0===t>>31?1:-1)*((1048575&t|1048576)*Math.pow(2,i-20)+e*Math.pow(2,i-52))},r.prototype.read=function(t){var e=this.index;if(e+t<=this.length)return this.dataView.subarray(e,e+t);throw new Error("BinaryPackFailure: read index out of range")},n.prototype.getBuffer=function(){return this.bufferBuilder.getBuffer()},n.prototype.pack=function(t){var i=typeof t;if("string"===i)this.pack_string(t);else if("number"===i)Math.floor(t)===t?this.pack_integer(t):this.pack_double(t);else if("boolean"===i)!0===t?this.bufferBuilder.append(195):!1===t&&this.bufferBuilder.append(194);else if("undefined"===i)this.bufferBuilder.append(192);else{if("object"!==i)throw new Error('Type "'+i+'" not yet supported');if(null===t)this.bufferBuilder.append(192);else{var r=t.constructor;if(r==Array)this.pack_array(t);else if(r==Blob||r==File||t instanceof Blob||t instanceof File)this.pack_bin(t);else if(r==ArrayBuffer)e.useArrayBufferView?this.pack_bin(new Uint8Array(t)):this.pack_bin(t);else if("BYTES_PER_ELEMENT"in t)e.useArrayBufferView?this.pack_bin(new Uint8Array(t.buffer)):this.pack_bin(t.buffer);else if(r==Object||r.toString().startsWith("class"))this.pack_object(t);else if(r==Date)this.pack_string(t.toString());else{if("function"!=typeof t.toBinaryPack)throw new Error('Type "'+r.toString()+'" not yet supported');this.bufferBuilder.append(t.toBinaryPack())}}}this.bufferBuilder.flush()},n.prototype.pack_bin=function(t){var e=t.length||t.byteLength||t.size;if(e<=15)this.pack_uint8(160+e);else if(e<=65535)this.bufferBuilder.append(218),this.pack_uint16(e);else{if(!(e<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(219),this.pack_uint32(e)}this.bufferBuilder.append(t)},n.prototype.pack_string=function(t){var e=a(t);if(e<=15)this.pack_uint8(176+e);else if(e<=65535)this.bufferBuilder.append(216),this.pack_uint16(e);else{if(!(e<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(217),this.pack_uint32(e)}this.bufferBuilder.append(t)},n.prototype.pack_array=function(t){var e=t.length;if(e<=15)this.pack_uint8(144+e);else if(e<=65535)this.bufferBuilder.append(220),this.pack_uint16(e);else{if(!(e<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(221),this.pack_uint32(e)}for(var i=0;i<e;i++)this.pack(t[i])},n.prototype.pack_integer=function(t){if(t>=-32&&t<=127)this.bufferBuilder.append(255&t);else if(t>=0&&t<=255)this.bufferBuilder.append(204),this.pack_uint8(t);else if(t>=-128&&t<=127)this.bufferBuilder.append(208),this.pack_int8(t);else if(t>=0&&t<=65535)this.bufferBuilder.append(205),this.pack_uint16(t);else if(t>=-32768&&t<=32767)this.bufferBuilder.append(209),this.pack_int16(t);else if(t>=0&&t<=4294967295)this.bufferBuilder.append(206),this.pack_uint32(t);else if(t>=-2147483648&&t<=2147483647)this.bufferBuilder.append(210),this.pack_int32(t);else if(t>=-0x8000000000000000&&t<=0x8000000000000000)this.bufferBuilder.append(211),this.pack_int64(t);else{if(!(t>=0&&t<=0x10000000000000000))throw new Error("Invalid integer");this.bufferBuilder.append(207),this.pack_uint64(t)}},n.prototype.pack_double=function(t){var e=0;t<0&&(e=1,t=-t);var i=Math.floor(Math.log(t)/Math.LN2),r=t/Math.pow(2,i)-1,n=Math.floor(r*Math.pow(2,52)),u=Math.pow(2,32),a=e<<31|i+1023<<20|n/u&1048575,p=n%u;this.bufferBuilder.append(203),this.pack_int32(a),this.pack_int32(p)},n.prototype.pack_object=function(t){var e=Object.keys(t).length;if(e<=15)this.pack_uint8(128+e);else if(e<=65535)this.bufferBuilder.append(222),this.pack_uint16(e);else{if(!(e<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(223),this.pack_uint32(e)}for(var i in t)t.hasOwnProperty(i)&&(this.pack(i),this.pack(t[i]))},n.prototype.pack_uint8=function(t){this.bufferBuilder.append(t)},n.prototype.pack_uint16=function(t){this.bufferBuilder.append(t>>8),this.bufferBuilder.append(255&t)},n.prototype.pack_uint32=function(t){var e=4294967295&t;this.bufferBuilder.append((4278190080&e)>>>24),this.bufferBuilder.append((16711680&e)>>>16),this.bufferBuilder.append((65280&e)>>>8),this.bufferBuilder.append(255&e)},n.prototype.pack_uint64=function(t){var e=t/Math.pow(2,32),i=t%Math.pow(2,32);this.bufferBuilder.append((4278190080&e)>>>24),this.bufferBuilder.append((16711680&e)>>>16),this.bufferBuilder.append((65280&e)>>>8),this.bufferBuilder.append(255&e),this.bufferBuilder.append((4278190080&i)>>>24),this.bufferBuilder.append((16711680&i)>>>16),this.bufferBuilder.append((65280&i)>>>8),this.bufferBuilder.append(255&i)},n.prototype.pack_int8=function(t){this.bufferBuilder.append(255&t)},n.prototype.pack_int16=function(t){this.bufferBuilder.append((65280&t)>>8),this.bufferBuilder.append(255&t)},n.prototype.pack_int32=function(t){this.bufferBuilder.append(t>>>24&255),this.bufferBuilder.append((16711680&t)>>>16),this.bufferBuilder.append((65280&t)>>>8),this.bufferBuilder.append(255&t)},n.prototype.pack_int64=function(t){var e=Math.floor(t/Math.pow(2,32)),i=t%Math.pow(2,32);this.bufferBuilder.append((4278190080&e)>>>24),this.bufferBuilder.append((16711680&e)>>>16),this.bufferBuilder.append((65280&e)>>>8),this.bufferBuilder.append(255&e),this.bufferBuilder.append((4278190080&i)>>>24),this.bufferBuilder.append((16711680&i)>>>16),this.bufferBuilder.append((65280&i)>>>8),this.bufferBuilder.append(255&i)};
},{"./bufferbuilder":"EgBh"}],"iSxC":[function(require,module,exports) {
"use strict";function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.extractVersion=o,exports.wrapPeerConnectionEvent=i,exports.disableLog=s,exports.disableWarnings=a,exports.log=p,exports.deprecated=u,exports.detectBrowser=c,exports.compactObject=f,exports.walkStats=l,exports.filterStats=v;var n=!0,r=!0;function o(e,t,n){var r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function i(e,t,n){if(e.RTCPeerConnection){var r=e.RTCPeerConnection.prototype,o=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return o.apply(this,arguments);var i=function(e){var t=n(e);t&&(r.handleEvent?r.handleEvent(t):r(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(r,i),o.apply(this,[e,i])};var i=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[t])return i.apply(this,arguments);if(!this._eventMap[t].has(n))return i.apply(this,arguments);var r=this._eventMap[t].get(n);return this._eventMap[t].delete(n),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,i.apply(this,[e,r])},Object.defineProperty(r,"on"+t,{get:function(){return this["_on"+t]},set:function(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}}function s(e){return"boolean"!=typeof e?new Error("Argument type: "+t(e)+". Please use a boolean."):(n=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function a(e){return"boolean"!=typeof e?new Error("Argument type: "+t(e)+". Please use a boolean."):(r=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function p(){if("object"===("undefined"==typeof window?"undefined":t(window))){if(n)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function u(e,t){r&&console.warn(e+" is deprecated, please use "+t+" instead.")}function c(e){var t={browser:null,version:null};if(void 0===e||!e.navigator)return t.browser="Not a browser.",t;var{navigator:n}=e;if(n.mozGetUserMedia)t.browser="firefox",t.version=o(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)t.browser="chrome",t.version=o(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(n.mediaDevices&&n.userAgent.match(/Edge\/(\d+).(\d+)$/))t.browser="edge",t.version=o(n.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=o(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}function d(e){return"[object Object]"===Object.prototype.toString.call(e)}function f(t){return d(t)?Object.keys(t).reduce(function(n,r){var o=d(t[r]),i=o?f(t[r]):t[r],s=o&&!Object.keys(i).length;return void 0===i||s?n:Object.assign(n,e({},r,i))},{}):t}function l(e,t,n){t&&!n.has(t.id)&&(n.set(t.id,t),Object.keys(t).forEach(function(r){r.endsWith("Id")?l(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach(function(t){l(e,e.get(t),n)})}))}function v(e,t,n){var r=n?"outbound-rtp":"inbound-rtp",o=new Map;if(null===t)return o;var i=[];return e.forEach(function(e){"track"===e.type&&e.trackIdentifier===t.id&&i.push(e)}),i.forEach(function(t){e.forEach(function(n){n.type===r&&n.trackId===t.id&&l(e,n,o)})}),o}
},{}],"s6SN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimGetUserMedia=i;var e=t(require("../utils.js"));function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function t(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r();if(t&&t.has(e))return t.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=n?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(o,i,a):o[i]=e[i]}return o.default=e,t&&t.set(e,o),o}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n=e.log;function i(e,r){var t=e&&e.navigator;if(t.mediaDevices){var i=function(e){if("object"!==o(e)||e.mandatory||e.optional)return e;var r={};return Object.keys(e).forEach(function(t){if("require"!==t&&"advanced"!==t&&"mediaSource"!==t){var n="object"===o(e[t])?e[t]:{ideal:e[t]};void 0!==n.exact&&"number"==typeof n.exact&&(n.min=n.max=n.exact);var i=function(e,r){return e?e+r.charAt(0).toUpperCase()+r.slice(1):"deviceId"===r?"sourceId":r};if(void 0!==n.ideal){r.optional=r.optional||[];var a={};"number"==typeof n.ideal?(a[i("min",t)]=n.ideal,r.optional.push(a),(a={})[i("max",t)]=n.ideal,r.optional.push(a)):(a[i("",t)]=n.ideal,r.optional.push(a))}void 0!==n.exact&&"number"!=typeof n.exact?(r.mandatory=r.mandatory||{},r.mandatory[i("",t)]=n.exact):["min","max"].forEach(function(e){void 0!==n[e]&&(r.mandatory=r.mandatory||{},r.mandatory[i(e,t)]=n[e])})}}),e.advanced&&(r.optional=(r.optional||[]).concat(e.advanced)),r},a=function(e,a){if(r.version>=61)return a(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"===o(e.audio)){var c=function(e,r,t){r in e&&!(t in e)&&(e[t]=e[r],delete e[r])};c((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),c(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=i(e.audio)}if(e&&"object"===o(e.video)){var d=e.video.facingMode;d=d&&("object"===o(d)?d:{ideal:d});var u,s=r.version<66;if(d&&("user"===d.exact||"environment"===d.exact||"user"===d.ideal||"environment"===d.ideal)&&(!t.mediaDevices.getSupportedConstraints||!t.mediaDevices.getSupportedConstraints().facingMode||s))if(delete e.video.facingMode,"environment"===d.exact||"environment"===d.ideal?u=["back","rear"]:"user"!==d.exact&&"user"!==d.ideal||(u=["front"]),u)return t.mediaDevices.enumerateDevices().then(function(r){var t=(r=r.filter(function(e){return"videoinput"===e.kind})).find(function(e){return u.some(function(r){return e.label.toLowerCase().includes(r)})});return!t&&r.length&&u.includes("back")&&(t=r[r.length-1]),t&&(e.video.deviceId=d.exact?{exact:t.deviceId}:{ideal:t.deviceId}),e.video=i(e.video),n("chrome: "+JSON.stringify(e)),a(e)});e.video=i(e.video)}return n("chrome: "+JSON.stringify(e)),a(e)},c=function(e){return r.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};if(t.getUserMedia=function(e,r,o){a(e,function(e){t.webkitGetUserMedia(e,r,function(e){o&&o(c(e))})})}.bind(t),t.mediaDevices.getUserMedia){var d=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return a(e,function(e){return d(e).then(function(r){if(e.audio&&!r.getAudioTracks().length||e.video&&!r.getVideoTracks().length)throw r.getTracks().forEach(function(e){e.stop()}),new DOMException("","NotFoundError");return r},function(e){return Promise.reject(c(e))})})}}}}
},{"../utils.js":"iSxC"}],"VHa8":[function(require,module,exports) {
"use strict";function e(e,i){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof i?e.navigator.mediaDevices.getDisplayMedia=function(a){return i(a).then(function(i){var t=a.video&&a.video.width,o=a.video&&a.video.height,d=a.video&&a.video.frameRate;return a.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:i,maxFrameRate:d||3}},t&&(a.video.mandatory.maxWidth=t),o&&(a.video.mandatory.maxHeight=o),e.navigator.mediaDevices.getUserMedia(a)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimGetDisplayMedia=e;
},{}],"uI5X":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimMediaStream=a,exports.shimOnTrack=c,exports.shimGetSendersWithDtmf=p,exports.shimGetStats=d,exports.shimSenderReceiverGetStats=h,exports.shimAddTrackRemoveTrackWithNative=f,exports.shimAddTrackRemoveTrack=m,exports.shimPeerConnection=u,exports.fixNegotiationNeeded=l,Object.defineProperty(exports,"shimGetUserMedia",{enumerable:!0,get:function(){return t.shimGetUserMedia}}),Object.defineProperty(exports,"shimGetDisplayMedia",{enumerable:!0,get:function(){return r.shimGetDisplayMedia}});var e=i(require("../utils.js")),t=require("./getusermedia"),r=require("./getdisplaymedia");function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=n();if(t&&t.has(e))return t.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var s=i?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function c(t){if("object"!==s(t)||!t.RTCPeerConnection||"ontrack"in t.RTCPeerConnection.prototype)e.wrapPeerConnectionEvent(t,"track",function(e){return e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e});else{Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});var r=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;return this._ontrackpoly||(this._ontrackpoly=function(r){r.stream.addEventListener("addtrack",function(n){var i;i=t.RTCPeerConnection.prototype.getReceivers?e.getReceivers().find(function(e){return e.track&&e.track.id===n.track.id}):{track:n.track};var o=new Event("track");o.track=n.track,o.receiver=i,o.transceiver={receiver:i},o.streams=[r.stream],e.dispatchEvent(o)}),r.stream.getTracks().forEach(function(n){var i;i=t.RTCPeerConnection.prototype.getReceivers?e.getReceivers().find(function(e){return e.track&&e.track.id===n.id}):{track:n};var o=new Event("track");o.track=n,o.receiver=i,o.transceiver={receiver:i},o.streams=[r.stream],e.dispatchEvent(o)})},this.addEventListener("addstream",this._ontrackpoly)),r.apply(this,arguments)}}}function p(e){if("object"===s(e)&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var r=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){var i=r.apply(this,arguments);return i||(i=t(this,e),this._senders.push(i)),i};var n=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){n.apply(this,arguments);var t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}var i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var r=this;this._senders=this._senders||[],i.apply(this,[e]),e.getTracks().forEach(function(e){r._senders.push(t(r,e))})};var o=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._senders=this._senders||[],o.apply(this,[e]),e.getTracks().forEach(function(e){var r=t._senders.find(function(t){return t.track===e});r&&t._senders.splice(t._senders.indexOf(r),1)})}}else if("object"===s(e)&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var a=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=a.apply(this,[]);return t.forEach(function(t){return t._pc=e}),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function d(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=this,[r,n,i]=arguments;if(arguments.length>0&&"function"==typeof r)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof r))return t.apply(this,[]);var o=function(e){var t={};return e.result().forEach(function(e){var r={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach(function(t){r[t]=e.stat(t)}),t[r.id]=r}),t},s=function(e){return new Map(Object.keys(e).map(function(t){return[t,e[t]]}))};if(arguments.length>=2){return t.apply(this,[function(e){n(s(o(e)))},r])}return new Promise(function(r,n){t.apply(e,[function(e){r(s(o(e)))},n])}).then(n,i)}}}function h(t){if("object"===s(t)&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver){if(!("getStats"in t.RTCRtpSender.prototype)){var r=t.RTCPeerConnection.prototype.getSenders;r&&(t.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=r.apply(this,[]);return t.forEach(function(t){return t._pc=e}),t});var n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),t.RTCRtpSender.prototype.getStats=function(){var t=this;return this._pc.getStats().then(function(r){return e.filterStats(r,t.track,!0)})}}if(!("getStats"in t.RTCRtpReceiver.prototype)){var i=t.RTCPeerConnection.prototype.getReceivers;i&&(t.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=i.apply(this,[]);return t.forEach(function(t){return t._pc=e}),t}),e.wrapPeerConnectionEvent(t,"track",function(e){return e.receiver._pc=e.srcElement,e}),t.RTCRtpReceiver.prototype.getStats=function(){var t=this;return this._pc.getStats().then(function(r){return e.filterStats(r,t.track,!1)})}}if("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype){var o=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){var e,r,n,i=arguments[0];return this.getSenders().forEach(function(t){t.track===i&&(e?n=!0:e=t)}),this.getReceivers().forEach(function(e){return e.track===i&&(r?n=!0:r=e),e.track===i}),n||e&&r?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):e?e.getStats():r?r.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return o.apply(this,arguments)}}}}function f(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(function(t){return e._shimmedLocalStreams[t][0]})};var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){if(!r)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var n=t.apply(this,arguments);return this._shimmedLocalStreams[r.id]?-1===this._shimmedLocalStreams[r.id].indexOf(n)&&this._shimmedLocalStreams[r.id].push(n):this._shimmedLocalStreams[r.id]=[r,n],n};var r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach(function(e){if(t.getSenders().find(function(t){return t.track===e}))throw new DOMException("Track already exists.","InvalidAccessError")});var n=this.getSenders();r.apply(this,arguments);var i=this.getSenders().filter(function(e){return-1===n.indexOf(e)});this._shimmedLocalStreams[e.id]=[e].concat(i)};var n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],n.apply(this,arguments)};var i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach(function(r){var n=t._shimmedLocalStreams[r].indexOf(e);-1!==n&&t._shimmedLocalStreams[r].splice(n,1),1===t._shimmedLocalStreams[r].length&&delete t._shimmedLocalStreams[r]}),i.apply(this,arguments)}}function m(e,t){if(e.RTCPeerConnection){if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return f(e);var r=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,t=r.apply(this);return this._reverseStreams=this._reverseStreams||{},t.map(function(t){return e._reverseStreams[t.id]})};var n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var r=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach(function(e){if(r.getSenders().find(function(t){return t.track===e}))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[t.id]){var i=new e.MediaStream(t.getTracks());this._streams[t.id]=i,this._reverseStreams[i.id]=t,t=i}n.apply(this,[t])};var i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,r){var n=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var i=[].slice.call(arguments,1);if(1!==i.length||!i[0].getTracks().find(function(e){return e===t}))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(function(e){return e.track===t}))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var o=this._streams[r.id];if(o)o.addTrack(t),Promise.resolve().then(function(){n.dispatchEvent(new Event("negotiationneeded"))});else{var s=new e.MediaStream([t]);this._streams[r.id]=s,this._reverseStreams[s.id]=r,this.addStream(s)}return this.getSenders().find(function(e){return e.track===t})},["createOffer","createAnswer"].forEach(function(t){var r=e.RTCPeerConnection.prototype[t],n=o({},t,function(){var e=this,t=arguments;return arguments.length&&"function"==typeof arguments[0]?r.apply(this,[function(r){var n=c(e,r);t[0].apply(null,[n])},function(e){t[1]&&t[1].apply(null,e)},arguments[2]]):r.apply(this,arguments).then(function(t){return c(e,t)})});e.RTCPeerConnection.prototype[t]=n[t]});var s=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=(e=this,t=arguments[0],r=t.sdp,Object.keys(e._reverseStreams||[]).forEach(function(t){var n=e._reverseStreams[t],i=e._streams[n.id];r=r.replace(new RegExp(n.id,"g"),i.id)}),new RTCSessionDescription({type:t.type,sdp:r})),s.apply(this,arguments)):s.apply(this,arguments);var e,t,r};var a=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=a.get.apply(this);return""===e.type?e:c(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t,r=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(e._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{},Object.keys(this._streams).forEach(function(n){r._streams[n].getTracks().find(function(t){return e.track===t})&&(t=r._streams[n])}),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function c(e,t){var r=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(function(t){var n=e._reverseStreams[t],i=e._streams[n.id];r=r.replace(new RegExp(i.id,"g"),n.id)}),new RTCSessionDescription({type:t.type,sdp:r})}}function u(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var r=e.RTCPeerConnection.prototype[t],n=o({},t,function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)});e.RTCPeerConnection.prototype[t]=n[t]})}function l(t,r){e.wrapPeerConnectionEvent(t,"negotiationneeded",function(e){var t=e.target;if(!(r.version<72||t.getConfiguration&&"plan-b"===t.getConfiguration().sdpSemantics)||"stable"===t.signalingState)return e})}
},{"../utils.js":"iSxC","./getusermedia":"s6SN","./getdisplaymedia":"VHa8"}],"NZ1C":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.filterIceServers=n;var r=t(require("../utils"));function e(){if("function"!=typeof WeakMap)return null;var r=new WeakMap;return e=function(){return r},r}function t(r){if(r&&r.__esModule)return r;if(null===r||"object"!=typeof r&&"function"!=typeof r)return{default:r};var t=e();if(t&&t.has(r))return t.get(r);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in r)if(Object.prototype.hasOwnProperty.call(r,i)){var f=u?Object.getOwnPropertyDescriptor(r,i):null;f&&(f.get||f.set)?Object.defineProperty(n,i,f):n[i]=r[i]}return n.default=r,t&&t.set(r,n),n}function n(e,t){var n=!1;return(e=JSON.parse(JSON.stringify(e))).filter(function(e){if(e&&(e.urls||e.url)){var t=e.urls||e.url;e.url&&!e.urls&&r.deprecated("RTCIceServer.url","RTCIceServer.urls");var u="string"==typeof t;return u&&(t=[t]),t=t.filter(function(r){if(0===r.indexOf("stun:"))return!1;var e=r.startsWith("turn")&&!r.startsWith("turn:[")&&r.includes("transport=udp");return e&&!n?(n=!0,!0):e&&!n}),delete e.url,e.urls=u?t[0]:t,!!t.length}})}
},{"../utils":"iSxC"}],"YHvh":[function(require,module,exports) {
"use strict";var r={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};r.localCName=r.generateIdentifier(),r.splitLines=function(r){return r.trim().split("\n").map(function(r){return r.trim()})},r.splitSections=function(r){return r.split("\nm=").map(function(r,e){return(e>0?"m="+r:r).trim()+"\r\n"})},r.getDescription=function(e){var t=r.splitSections(e);return t&&t[0]},r.getMediaSections=function(e){var t=r.splitSections(e);return t.shift(),t},r.matchPrefix=function(e,t){return r.splitLines(e).filter(function(r){return 0===r.indexOf(t)})},r.parseCandidate=function(r){for(var e,t={foundation:(e=0===r.indexOf("a=candidate:")?r.substring(12).split(" "):r.substring(10).split(" "))[0],component:parseInt(e[1],10),protocol:e[2].toLowerCase(),priority:parseInt(e[3],10),ip:e[4],address:e[4],port:parseInt(e[5],10),type:e[7]},a=8;a<e.length;a+=2)switch(e[a]){case"raddr":t.relatedAddress=e[a+1];break;case"rport":t.relatedPort=parseInt(e[a+1],10);break;case"tcptype":t.tcpType=e[a+1];break;case"ufrag":t.ufrag=e[a+1],t.usernameFragment=e[a+1];break;default:t[e[a]]=e[a+1]}return t},r.writeCandidate=function(r){var e=[];e.push(r.foundation),e.push(r.component),e.push(r.protocol.toUpperCase()),e.push(r.priority),e.push(r.address||r.ip),e.push(r.port);var t=r.type;return e.push("typ"),e.push(t),"host"!==t&&r.relatedAddress&&r.relatedPort&&(e.push("raddr"),e.push(r.relatedAddress),e.push("rport"),e.push(r.relatedPort)),r.tcpType&&"tcp"===r.protocol.toLowerCase()&&(e.push("tcptype"),e.push(r.tcpType)),(r.usernameFragment||r.ufrag)&&(e.push("ufrag"),e.push(r.usernameFragment||r.ufrag)),"candidate:"+e.join(" ")},r.parseIceOptions=function(r){return r.substr(14).split(" ")},r.parseRtpMap=function(r){var e=r.substr(9).split(" "),t={payloadType:parseInt(e.shift(),10)};return e=e[0].split("/"),t.name=e[0],t.clockRate=parseInt(e[1],10),t.channels=3===e.length?parseInt(e[2],10):1,t.numChannels=t.channels,t},r.writeRtpMap=function(r){var e=r.payloadType;void 0!==r.preferredPayloadType&&(e=r.preferredPayloadType);var t=r.channels||r.numChannels||1;return"a=rtpmap:"+e+" "+r.name+"/"+r.clockRate+(1!==t?"/"+t:"")+"\r\n"},r.parseExtmap=function(r){var e=r.substr(9).split(" ");return{id:parseInt(e[0],10),direction:e[0].indexOf("/")>0?e[0].split("/")[1]:"sendrecv",uri:e[1]}},r.writeExtmap=function(r){return"a=extmap:"+(r.id||r.preferredId)+(r.direction&&"sendrecv"!==r.direction?"/"+r.direction:"")+" "+r.uri+"\r\n"},r.parseFmtp=function(r){for(var e,t={},a=r.substr(r.indexOf(" ")+1).split(";"),n=0;n<a.length;n++)t[(e=a[n].trim().split("="))[0].trim()]=e[1];return t},r.writeFmtp=function(r){var e="",t=r.payloadType;if(void 0!==r.preferredPayloadType&&(t=r.preferredPayloadType),r.parameters&&Object.keys(r.parameters).length){var a=[];Object.keys(r.parameters).forEach(function(e){r.parameters[e]?a.push(e+"="+r.parameters[e]):a.push(e)}),e+="a=fmtp:"+t+" "+a.join(";")+"\r\n"}return e},r.parseRtcpFb=function(r){var e=r.substr(r.indexOf(" ")+1).split(" ");return{type:e.shift(),parameter:e.join(" ")}},r.writeRtcpFb=function(r){var e="",t=r.payloadType;return void 0!==r.preferredPayloadType&&(t=r.preferredPayloadType),r.rtcpFeedback&&r.rtcpFeedback.length&&r.rtcpFeedback.forEach(function(r){e+="a=rtcp-fb:"+t+" "+r.type+(r.parameter&&r.parameter.length?" "+r.parameter:"")+"\r\n"}),e},r.parseSsrcMedia=function(r){var e=r.indexOf(" "),t={ssrc:parseInt(r.substr(7,e-7),10)},a=r.indexOf(":",e);return a>-1?(t.attribute=r.substr(e+1,a-e-1),t.value=r.substr(a+1)):t.attribute=r.substr(e+1),t},r.parseSsrcGroup=function(r){var e=r.substr(13).split(" ");return{semantics:e.shift(),ssrcs:e.map(function(r){return parseInt(r,10)})}},r.getMid=function(e){var t=r.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},r.parseFingerprint=function(r){var e=r.substr(14).split(" ");return{algorithm:e[0].toLowerCase(),value:e[1]}},r.getDtlsParameters=function(e,t){return{role:"auto",fingerprints:r.matchPrefix(e+t,"a=fingerprint:").map(r.parseFingerprint)}},r.writeDtlsParameters=function(r,e){var t="a=setup:"+e+"\r\n";return r.fingerprints.forEach(function(r){t+="a=fingerprint:"+r.algorithm+" "+r.value+"\r\n"}),t},r.parseCryptoLine=function(r){var e=r.substr(9).split(" ");return{tag:parseInt(e[0],10),cryptoSuite:e[1],keyParams:e[2],sessionParams:e.slice(3)}},r.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?r.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},r.parseCryptoKeyParams=function(r){if(0!==r.indexOf("inline:"))return null;var e=r.substr(7).split("|");return{keyMethod:"inline",keySalt:e[0],lifeTime:e[1],mkiValue:e[2]?e[2].split(":")[0]:void 0,mkiLength:e[2]?e[2].split(":")[1]:void 0}},r.writeCryptoKeyParams=function(r){return r.keyMethod+":"+r.keySalt+(r.lifeTime?"|"+r.lifeTime:"")+(r.mkiValue&&r.mkiLength?"|"+r.mkiValue+":"+r.mkiLength:"")},r.getCryptoParameters=function(e,t){return r.matchPrefix(e+t,"a=crypto:").map(r.parseCryptoLine)},r.getIceParameters=function(e,t){var a=r.matchPrefix(e+t,"a=ice-ufrag:")[0],n=r.matchPrefix(e+t,"a=ice-pwd:")[0];return a&&n?{usernameFragment:a.substr(12),password:n.substr(10)}:null},r.writeIceParameters=function(r){return"a=ice-ufrag:"+r.usernameFragment+"\r\na=ice-pwd:"+r.password+"\r\n"},r.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},a=r.splitLines(e)[0].split(" "),n=3;n<a.length;n++){var s=a[n],i=r.matchPrefix(e,"a=rtpmap:"+s+" ")[0];if(i){var p=r.parseRtpMap(i),c=r.matchPrefix(e,"a=fmtp:"+s+" ");switch(p.parameters=c.length?r.parseFmtp(c[0]):{},p.rtcpFeedback=r.matchPrefix(e,"a=rtcp-fb:"+s+" ").map(r.parseRtcpFb),t.codecs.push(p),p.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(p.name.toUpperCase())}}}return r.matchPrefix(e,"a=extmap:").forEach(function(e){t.headerExtensions.push(r.parseExtmap(e))}),t},r.writeRtpDescription=function(e,t){var a="";a+="m="+e+" ",a+=t.codecs.length>0?"9":"0",a+=" UDP/TLS/RTP/SAVPF ",a+=t.codecs.map(function(r){return void 0!==r.preferredPayloadType?r.preferredPayloadType:r.payloadType}).join(" ")+"\r\n",a+="c=IN IP4 0.0.0.0\r\n",a+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach(function(e){a+=r.writeRtpMap(e),a+=r.writeFmtp(e),a+=r.writeRtcpFb(e)});var n=0;return t.codecs.forEach(function(r){r.maxptime>n&&(n=r.maxptime)}),n>0&&(a+="a=maxptime:"+n+"\r\n"),a+="a=rtcp-mux\r\n",t.headerExtensions&&t.headerExtensions.forEach(function(e){a+=r.writeExtmap(e)}),a},r.parseRtpEncodingParameters=function(e){var t,a=[],n=r.parseRtpParameters(e),s=-1!==n.fecMechanisms.indexOf("RED"),i=-1!==n.fecMechanisms.indexOf("ULPFEC"),p=r.matchPrefix(e,"a=ssrc:").map(function(e){return r.parseSsrcMedia(e)}).filter(function(r){return"cname"===r.attribute}),c=p.length>0&&p[0].ssrc,o=r.matchPrefix(e,"a=ssrc-group:FID").map(function(r){return r.substr(17).split(" ").map(function(r){return parseInt(r,10)})});o.length>0&&o[0].length>1&&o[0][0]===c&&(t=o[0][1]),n.codecs.forEach(function(r){if("RTX"===r.name.toUpperCase()&&r.parameters.apt){var e={ssrc:c,codecPayloadType:parseInt(r.parameters.apt,10)};c&&t&&(e.rtx={ssrc:t}),a.push(e),s&&((e=JSON.parse(JSON.stringify(e))).fec={ssrc:c,mechanism:i?"red+ulpfec":"red"},a.push(e))}}),0===a.length&&c&&a.push({ssrc:c});var u=r.matchPrefix(e,"b=");return u.length&&(u=0===u[0].indexOf("b=TIAS:")?parseInt(u[0].substr(7),10):0===u[0].indexOf("b=AS:")?1e3*parseInt(u[0].substr(5),10)*.95-16e3:void 0,a.forEach(function(r){r.maxBitrate=u})),a},r.parseRtcpParameters=function(e){var t={},a=r.matchPrefix(e,"a=ssrc:").map(function(e){return r.parseSsrcMedia(e)}).filter(function(r){return"cname"===r.attribute})[0];a&&(t.cname=a.value,t.ssrc=a.ssrc);var n=r.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=n.length>0,t.compound=0===n.length;var s=r.matchPrefix(e,"a=rtcp-mux");return t.mux=s.length>0,t},r.parseMsid=function(e){var t,a=r.matchPrefix(e,"a=msid:");if(1===a.length)return{stream:(t=a[0].substr(7).split(" "))[0],track:t[1]};var n=r.matchPrefix(e,"a=ssrc:").map(function(e){return r.parseSsrcMedia(e)}).filter(function(r){return"msid"===r.attribute});return n.length>0?{stream:(t=n[0].value.split(" "))[0],track:t[1]}:void 0},r.parseSctpDescription=function(e){var t,a=r.parseMLine(e),n=r.matchPrefix(e,"a=max-message-size:");n.length>0&&(t=parseInt(n[0].substr(19),10)),isNaN(t)&&(t=65536);var s=r.matchPrefix(e,"a=sctp-port:");if(s.length>0)return{port:parseInt(s[0].substr(12),10),protocol:a.fmt,maxMessageSize:t};if(r.matchPrefix(e,"a=sctpmap:").length>0){var i=r.matchPrefix(e,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(i[0],10),protocol:i[1],maxMessageSize:t}}},r.writeSctpDescription=function(r,e){var t=[];return t="DTLS/SCTP"!==r.protocol?["m="+r.kind+" 9 "+r.protocol+" "+e.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+e.port+"\r\n"]:["m="+r.kind+" 9 "+r.protocol+" "+e.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+e.port+" "+e.protocol+" 65535\r\n"],void 0!==e.maxMessageSize&&t.push("a=max-message-size:"+e.maxMessageSize+"\r\n"),t.join("")},r.generateSessionId=function(){return Math.random().toString().substr(2,21)},r.writeSessionBoilerplate=function(e,t,a){var n=void 0!==t?t:2;return"v=0\r\no="+(a||"thisisadapterortc")+" "+(e||r.generateSessionId())+" "+n+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},r.writeMediaSection=function(e,t,a,n){var s=r.writeRtpDescription(e.kind,t);if(s+=r.writeIceParameters(e.iceGatherer.getLocalParameters()),s+=r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===a?"actpass":"active"),s+="a=mid:"+e.mid+"\r\n",e.direction?s+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?s+="a=sendrecv\r\n":e.rtpSender?s+="a=sendonly\r\n":e.rtpReceiver?s+="a=recvonly\r\n":s+="a=inactive\r\n",e.rtpSender){var i="msid:"+n.id+" "+e.rtpSender.track.id+"\r\n";s+="a="+i,s+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+i,e.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+i,s+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return s+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+"\r\n"),s},r.getDirection=function(e,t){for(var a=r.splitLines(e),n=0;n<a.length;n++)switch(a[n]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return a[n].substr(2)}return t?r.getDirection(t):"sendrecv"},r.getKind=function(e){return r.splitLines(e)[0].split(" ")[0].substr(2)},r.isRejected=function(r){return"0"===r.split(" ",2)[1]},r.parseMLine=function(e){var t=r.splitLines(e)[0].substr(2).split(" ");return{kind:t[0],port:parseInt(t[1],10),protocol:t[2],fmt:t.slice(3).join(" ")}},r.parseOLine=function(e){var t=r.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:t[0],sessionId:t[1],sessionVersion:parseInt(t[2],10),netType:t[3],addressType:t[4],address:t[5]}},r.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var t=r.splitLines(e),a=0;a<t.length;a++)if(t[a].length<2||"="!==t[a].charAt(1))return!1;return!0},"object"==typeof module&&(module.exports=r);
},{}],"NJ2u":[function(require,module,exports) {
"use strict";var e=require("sdp");function t(e){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type}function r(t,r,n,a,i){var s=e.writeRtpDescription(t.kind,r);if(s+=e.writeIceParameters(t.iceGatherer.getLocalParameters()),s+=e.writeDtlsParameters(t.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":i||"active"),s+="a=mid:"+t.mid+"\r\n",t.rtpSender&&t.rtpReceiver?s+="a=sendrecv\r\n":t.rtpSender?s+="a=sendonly\r\n":t.rtpReceiver?s+="a=recvonly\r\n":s+="a=inactive\r\n",t.rtpSender){var o=t.rtpSender._initialTrackId||t.rtpSender.track.id;t.rtpSender._initialTrackId=o;var c="msid:"+(a?a.id:"-")+" "+o+"\r\n";s+="a="+c,s+="a=ssrc:"+t.sendEncodingParameters[0].ssrc+" "+c,t.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+t.sendEncodingParameters[0].rtx.ssrc+" "+c,s+="a=ssrc-group:FID "+t.sendEncodingParameters[0].ssrc+" "+t.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return s+="a=ssrc:"+t.sendEncodingParameters[0].ssrc+" cname:"+e.localCName+"\r\n",t.rtpSender&&t.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+t.sendEncodingParameters[0].rtx.ssrc+" cname:"+e.localCName+"\r\n"),s}function n(e,t){var r=!1;return(e=JSON.parse(JSON.stringify(e))).filter(function(e){if(e&&(e.urls||e.url)){var n=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var a="string"==typeof n;return a&&(n=[n]),n=n.filter(function(e){return 0===e.indexOf("turn:")&&-1!==e.indexOf("transport=udp")&&-1===e.indexOf("turn:[")&&!r?(r=!0,!0):0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp")}),delete e.url,e.urls=a?n[0]:n,!!n.length}})}function a(e,t){var r={codecs:[],headerExtensions:[],fecMechanisms:[]},n=function(e,t){e=parseInt(e,10);for(var r=0;r<t.length;r++)if(t[r].payloadType===e||t[r].preferredPayloadType===e)return t[r]},a=function(e,t,r,a){var i=n(e.parameters.apt,r),s=n(t.parameters.apt,a);return i&&s&&i.name.toLowerCase()===s.name.toLowerCase()};return e.codecs.forEach(function(n){for(var i=0;i<t.codecs.length;i++){var s=t.codecs[i];if(n.name.toLowerCase()===s.name.toLowerCase()&&n.clockRate===s.clockRate){if("rtx"===n.name.toLowerCase()&&n.parameters&&s.parameters.apt&&!a(n,s,e.codecs,t.codecs))continue;(s=JSON.parse(JSON.stringify(s))).numChannels=Math.min(n.numChannels,s.numChannels),r.codecs.push(s),s.rtcpFeedback=s.rtcpFeedback.filter(function(e){for(var t=0;t<n.rtcpFeedback.length;t++)if(n.rtcpFeedback[t].type===e.type&&n.rtcpFeedback[t].parameter===e.parameter)return!0;return!1});break}}}),e.headerExtensions.forEach(function(e){for(var n=0;n<t.headerExtensions.length;n++){var a=t.headerExtensions[n];if(e.uri===a.uri){r.headerExtensions.push(a);break}}}),r}function i(e,t,r){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(r)}function s(e,t){var r=e.getRemoteCandidates().find(function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type});return r||e.addRemoteCandidate(t),!r}function o(e,t){var r=new Error(t);return r.name=e,r.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],r}module.exports=function(c,d){function p(e,t){t.addTrack(e),t.dispatchEvent(new c.MediaStreamTrackEvent("addtrack",{track:e}))}function l(e,t,r,n){var a=new Event("track");a.track=t,a.receiver=r,a.transceiver={receiver:r},a.streams=n,c.setTimeout(function(){e._dispatchEvent("track",a)})}var f=function(t){var r=this,a=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(e){r[e]=a[e].bind(a)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",t=JSON.parse(JSON.stringify(t||{})),this.usingBundle="max-bundle"===t.bundlePolicy,"negotiate"===t.rtcpMuxPolicy)throw o("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(t.rtcpMuxPolicy||(t.rtcpMuxPolicy="require"),t.iceTransportPolicy){case"all":case"relay":break;default:t.iceTransportPolicy="all"}switch(t.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:t.bundlePolicy="balanced"}if(t.iceServers=n(t.iceServers||[],d),this._iceGatherers=[],t.iceCandidatePoolSize)for(var i=t.iceCandidatePoolSize;i>0;i--)this._iceGatherers.push(new c.RTCIceGatherer({iceServers:t.iceServers,gatherPolicy:t.iceTransportPolicy}));else t.iceCandidatePoolSize=0;this._config=t,this.transceivers=[],this._sdpSessionId=e.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(f.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(f.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),f.prototype.onicecandidate=null,f.prototype.onaddstream=null,f.prototype.ontrack=null,f.prototype.onremovestream=null,f.prototype.onsignalingstatechange=null,f.prototype.oniceconnectionstatechange=null,f.prototype.onconnectionstatechange=null,f.prototype.onicegatheringstatechange=null,f.prototype.onnegotiationneeded=null,f.prototype.ondatachannel=null,f.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},f.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},f.prototype.getConfiguration=function(){return this._config},f.prototype.getLocalStreams=function(){return this.localStreams},f.prototype.getRemoteStreams=function(){return this.remoteStreams},f.prototype._createTransceiver=function(e,t){var r=this.transceivers.length>0,n={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&r)n.iceTransport=this.transceivers[0].iceTransport,n.dtlsTransport=this.transceivers[0].dtlsTransport;else{var a=this._createIceAndDtlsTransports();n.iceTransport=a.iceTransport,n.dtlsTransport=a.dtlsTransport}return t||this.transceivers.push(n),n},f.prototype.addTrack=function(e,t){if(this._isClosed)throw o("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var r;if(this.transceivers.find(function(t){return t.track===e}))throw o("InvalidAccessError","Track already exists.");for(var n=0;n<this.transceivers.length;n++)this.transceivers[n].track||this.transceivers[n].kind!==e.kind||(r=this.transceivers[n]);return r||(r=this._createTransceiver(e.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(t)&&this.localStreams.push(t),r.track=e,r.stream=t,r.rtpSender=new c.RTCRtpSender(e,r.dtlsTransport),r.rtpSender},f.prototype.addStream=function(e){var t=this;if(d>=15025)e.getTracks().forEach(function(r){t.addTrack(r,e)});else{var r=e.clone();e.getTracks().forEach(function(e,t){var n=r.getTracks()[t];e.addEventListener("enabled",function(e){n.enabled=e.enabled})}),r.getTracks().forEach(function(e){t.addTrack(e,r)})}},f.prototype.removeTrack=function(e){if(this._isClosed)throw o("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(e instanceof c.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var t=this.transceivers.find(function(t){return t.rtpSender===e});if(!t)throw o("InvalidAccessError","Sender was not created by this connection.");var r=t.stream;t.rtpSender.stop(),t.rtpSender=null,t.track=null,t.stream=null,-1===this.transceivers.map(function(e){return e.stream}).indexOf(r)&&this.localStreams.indexOf(r)>-1&&this.localStreams.splice(this.localStreams.indexOf(r),1),this._maybeFireNegotiationNeeded()},f.prototype.removeStream=function(e){var t=this;e.getTracks().forEach(function(e){var r=t.getSenders().find(function(t){return t.track===e});r&&t.removeTrack(r)})},f.prototype.getSenders=function(){return this.transceivers.filter(function(e){return!!e.rtpSender}).map(function(e){return e.rtpSender})},f.prototype.getReceivers=function(){return this.transceivers.filter(function(e){return!!e.rtpReceiver}).map(function(e){return e.rtpReceiver})},f.prototype._createIceGatherer=function(e,t){var r=this;if(t&&e>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var n=new c.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(n,"state",{value:"new",writable:!0}),this.transceivers[e].bufferedCandidateEvents=[],this.transceivers[e].bufferCandidates=function(t){var a=!t.candidate||0===Object.keys(t.candidate).length;n.state=a?"completed":"gathering",null!==r.transceivers[e].bufferedCandidateEvents&&r.transceivers[e].bufferedCandidateEvents.push(t)},n.addEventListener("localcandidate",this.transceivers[e].bufferCandidates),n},f.prototype._gather=function(t,r){var n=this,a=this.transceivers[r].iceGatherer;if(!a.onlocalcandidate){var i=this.transceivers[r].bufferedCandidateEvents;this.transceivers[r].bufferedCandidateEvents=null,a.removeEventListener("localcandidate",this.transceivers[r].bufferCandidates),a.onlocalcandidate=function(i){if(!(n.usingBundle&&r>0)){var s=new Event("icecandidate");s.candidate={sdpMid:t,sdpMLineIndex:r};var o=i.candidate,c=!o||0===Object.keys(o).length;if(c)"new"!==a.state&&"gathering"!==a.state||(a.state="completed");else{"new"===a.state&&(a.state="gathering"),o.component=1,o.ufrag=a.getLocalParameters().usernameFragment;var d=e.writeCandidate(o);s.candidate=Object.assign(s.candidate,e.parseCandidate(d)),s.candidate.candidate=d,s.candidate.toJSON=function(){return{candidate:s.candidate.candidate,sdpMid:s.candidate.sdpMid,sdpMLineIndex:s.candidate.sdpMLineIndex,usernameFragment:s.candidate.usernameFragment}}}var p=e.getMediaSections(n._localDescription.sdp);p[s.candidate.sdpMLineIndex]+=c?"a=end-of-candidates\r\n":"a="+s.candidate.candidate+"\r\n",n._localDescription.sdp=e.getDescription(n._localDescription.sdp)+p.join("");var l=n.transceivers.every(function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state});"gathering"!==n.iceGatheringState&&(n.iceGatheringState="gathering",n._emitGatheringStateChange()),c||n._dispatchEvent("icecandidate",s),l&&(n._dispatchEvent("icecandidate",new Event("icecandidate")),n.iceGatheringState="complete",n._emitGatheringStateChange())}},c.setTimeout(function(){i.forEach(function(e){a.onlocalcandidate(e)})},0)}},f.prototype._createIceAndDtlsTransports=function(){var e=this,t=new c.RTCIceTransport(null);t.onicestatechange=function(){e._updateIceConnectionState(),e._updateConnectionState()};var r=new c.RTCDtlsTransport(t);return r.ondtlsstatechange=function(){e._updateConnectionState()},r.onerror=function(){Object.defineProperty(r,"state",{value:"failed",writable:!0}),e._updateConnectionState()},{iceTransport:t,dtlsTransport:r}},f.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var r=this.transceivers[e].iceTransport;r&&(delete r.onicestatechange,delete this.transceivers[e].iceTransport);var n=this.transceivers[e].dtlsTransport;n&&(delete n.ondtlsstatechange,delete n.onerror,delete this.transceivers[e].dtlsTransport)},f.prototype._transceive=function(t,r,n){var i=a(t.localCapabilities,t.remoteCapabilities);r&&t.rtpSender&&(i.encodings=t.sendEncodingParameters,i.rtcp={cname:e.localCName,compound:t.rtcpParameters.compound},t.recvEncodingParameters.length&&(i.rtcp.ssrc=t.recvEncodingParameters[0].ssrc),t.rtpSender.send(i)),n&&t.rtpReceiver&&i.codecs.length>0&&("video"===t.kind&&t.recvEncodingParameters&&d<15019&&t.recvEncodingParameters.forEach(function(e){delete e.rtx}),t.recvEncodingParameters.length?i.encodings=t.recvEncodingParameters:i.encodings=[{}],i.rtcp={compound:t.rtcpParameters.compound},t.rtcpParameters.cname&&(i.rtcp.cname=t.rtcpParameters.cname),t.sendEncodingParameters.length&&(i.rtcp.ssrc=t.sendEncodingParameters[0].ssrc),t.rtpReceiver.receive(i))},f.prototype.setLocalDescription=function(t){var r,n,s=this;if(-1===["offer","answer"].indexOf(t.type))return Promise.reject(o("TypeError",'Unsupported type "'+t.type+'"'));if(!i("setLocalDescription",t.type,s.signalingState)||s._isClosed)return Promise.reject(o("InvalidStateError","Can not set local "+t.type+" in state "+s.signalingState));if("offer"===t.type)r=e.splitSections(t.sdp),n=r.shift(),r.forEach(function(t,r){var n=e.parseRtpParameters(t);s.transceivers[r].localCapabilities=n}),s.transceivers.forEach(function(e,t){s._gather(e.mid,t)});else if("answer"===t.type){r=e.splitSections(s._remoteDescription.sdp),n=r.shift();var c=e.matchPrefix(n,"a=ice-lite").length>0;r.forEach(function(t,r){var i=s.transceivers[r],o=i.iceGatherer,d=i.iceTransport,p=i.dtlsTransport,l=i.localCapabilities,f=i.remoteCapabilities;if(!(e.isRejected(t)&&0===e.matchPrefix(t,"a=bundle-only").length)&&!i.rejected){var u=e.getIceParameters(t,n),v=e.getDtlsParameters(t,n);c&&(v.role="server"),s.usingBundle&&0!==r||(s._gather(i.mid,r),"new"===d.state&&d.start(o,u,c?"controlling":"controlled"),"new"===p.state&&p.start(v));var h=a(l,f);s._transceive(i,h.codecs.length>0,!1)}})}return s._localDescription={type:t.type,sdp:t.sdp},"offer"===t.type?s._updateSignalingState("have-local-offer"):s._updateSignalingState("stable"),Promise.resolve()},f.prototype.setRemoteDescription=function(t){var r=this;if(-1===["offer","answer"].indexOf(t.type))return Promise.reject(o("TypeError",'Unsupported type "'+t.type+'"'));if(!i("setRemoteDescription",t.type,r.signalingState)||r._isClosed)return Promise.reject(o("InvalidStateError","Can not set remote "+t.type+" in state "+r.signalingState));var n={};r.remoteStreams.forEach(function(e){n[e.id]=e});var f=[],u=e.splitSections(t.sdp),v=u.shift(),h=e.matchPrefix(v,"a=ice-lite").length>0,m=e.matchPrefix(v,"a=group:BUNDLE ").length>0;r.usingBundle=m;var g=e.matchPrefix(v,"a=ice-options:")[0];return r.canTrickleIceCandidates=!!g&&g.substr(14).split(" ").indexOf("trickle")>=0,u.forEach(function(i,o){var l=e.splitLines(i),u=e.getKind(i),g=e.isRejected(i)&&0===e.matchPrefix(i,"a=bundle-only").length,y=l[0].substr(2).split(" ")[2],S=e.getDirection(i,v),T=e.parseMsid(i),E=e.getMid(i)||e.generateIdentifier();if(g||"application"===u&&("DTLS/SCTP"===y||"UDP/DTLS/SCTP"===y))r.transceivers[o]={mid:E,kind:u,protocol:y,rejected:!0};else{var C,P,w,R,_,k,b,x,D;!g&&r.transceivers[o]&&r.transceivers[o].rejected&&(r.transceivers[o]=r._createTransceiver(u,!0));var I,L,M=e.parseRtpParameters(i);g||(I=e.getIceParameters(i,v),(L=e.getDtlsParameters(i,v)).role="client"),b=e.parseRtpEncodingParameters(i);var O=e.parseRtcpParameters(i),G=e.matchPrefix(i,"a=end-of-candidates",v).length>0,j=e.matchPrefix(i,"a=candidate:").map(function(t){return e.parseCandidate(t)}).filter(function(e){return 1===e.component});if(("offer"===t.type||"answer"===t.type)&&!g&&m&&o>0&&r.transceivers[o]&&(r._disposeIceAndDtlsTransports(o),r.transceivers[o].iceGatherer=r.transceivers[0].iceGatherer,r.transceivers[o].iceTransport=r.transceivers[0].iceTransport,r.transceivers[o].dtlsTransport=r.transceivers[0].dtlsTransport,r.transceivers[o].rtpSender&&r.transceivers[o].rtpSender.setTransport(r.transceivers[0].dtlsTransport),r.transceivers[o].rtpReceiver&&r.transceivers[o].rtpReceiver.setTransport(r.transceivers[0].dtlsTransport)),"offer"!==t.type||g){if("answer"===t.type&&!g){P=(C=r.transceivers[o]).iceGatherer,w=C.iceTransport,R=C.dtlsTransport,_=C.rtpReceiver,k=C.sendEncodingParameters,x=C.localCapabilities,r.transceivers[o].recvEncodingParameters=b,r.transceivers[o].remoteCapabilities=M,r.transceivers[o].rtcpParameters=O,j.length&&"new"===w.state&&(!h&&!G||m&&0!==o?j.forEach(function(e){s(C.iceTransport,e)}):w.setRemoteCandidates(j)),m&&0!==o||("new"===w.state&&w.start(P,I,"controlling"),"new"===R.state&&R.start(L)),!a(C.localCapabilities,C.remoteCapabilities).codecs.filter(function(e){return"rtx"===e.name.toLowerCase()}).length&&C.sendEncodingParameters[0].rtx&&delete C.sendEncodingParameters[0].rtx,r._transceive(C,"sendrecv"===S||"recvonly"===S,"sendrecv"===S||"sendonly"===S),!_||"sendrecv"!==S&&"sendonly"!==S?delete C.rtpReceiver:(D=_.track,T?(n[T.stream]||(n[T.stream]=new c.MediaStream),p(D,n[T.stream]),f.push([D,_,n[T.stream]])):(n.default||(n.default=new c.MediaStream),p(D,n.default),f.push([D,_,n.default])))}}else{(C=r.transceivers[o]||r._createTransceiver(u)).mid=E,C.iceGatherer||(C.iceGatherer=r._createIceGatherer(o,m)),j.length&&"new"===C.iceTransport.state&&(!G||m&&0!==o?j.forEach(function(e){s(C.iceTransport,e)}):C.iceTransport.setRemoteCandidates(j)),x=c.RTCRtpReceiver.getCapabilities(u),d<15019&&(x.codecs=x.codecs.filter(function(e){return"rtx"!==e.name})),k=C.sendEncodingParameters||[{ssrc:1001*(2*o+2)}];var N,A=!1;if("sendrecv"===S||"sendonly"===S){if(A=!C.rtpReceiver,_=C.rtpReceiver||new c.RTCRtpReceiver(C.dtlsTransport,u),A)D=_.track,T&&"-"===T.stream||(T?(n[T.stream]||(n[T.stream]=new c.MediaStream,Object.defineProperty(n[T.stream],"id",{get:function(){return T.stream}})),Object.defineProperty(D,"id",{get:function(){return T.track}}),N=n[T.stream]):(n.default||(n.default=new c.MediaStream),N=n.default)),N&&(p(D,N),C.associatedRemoteMediaStreams.push(N)),f.push([D,_,N])}else C.rtpReceiver&&C.rtpReceiver.track&&(C.associatedRemoteMediaStreams.forEach(function(e){var t,r,n=e.getTracks().find(function(e){return e.id===C.rtpReceiver.track.id});n&&(t=n,(r=e).removeTrack(t),r.dispatchEvent(new c.MediaStreamTrackEvent("removetrack",{track:t})))}),C.associatedRemoteMediaStreams=[]);C.localCapabilities=x,C.remoteCapabilities=M,C.rtpReceiver=_,C.rtcpParameters=O,C.sendEncodingParameters=k,C.recvEncodingParameters=b,r._transceive(r.transceivers[o],!1,A)}}}),void 0===r._dtlsRole&&(r._dtlsRole="offer"===t.type?"active":"passive"),r._remoteDescription={type:t.type,sdp:t.sdp},"offer"===t.type?r._updateSignalingState("have-remote-offer"):r._updateSignalingState("stable"),Object.keys(n).forEach(function(e){var t=n[e];if(t.getTracks().length){if(-1===r.remoteStreams.indexOf(t)){r.remoteStreams.push(t);var a=new Event("addstream");a.stream=t,c.setTimeout(function(){r._dispatchEvent("addstream",a)})}f.forEach(function(e){var n=e[0],a=e[1];t.id===e[2].id&&l(r,n,a,[t])})}}),f.forEach(function(e){e[2]||l(r,e[0],e[1],[])}),c.setTimeout(function(){r&&r.transceivers&&r.transceivers.forEach(function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},f.prototype.close=function(){this.transceivers.forEach(function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},f.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},f.prototype._maybeFireNegotiationNeeded=function(){var e=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,c.setTimeout(function(){if(e.needNegotiation){e.needNegotiation=!1;var t=new Event("negotiationneeded");e._dispatchEvent("negotiationneeded",t)}},0))},f.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++}),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var r=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",r)}},f.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)}),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var r=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",r)}},f.prototype.createOffer=function(){var t=this;if(t._isClosed)return Promise.reject(o("InvalidStateError","Can not call createOffer after close"));var n=t.transceivers.filter(function(e){return"audio"===e.kind}).length,a=t.transceivers.filter(function(e){return"video"===e.kind}).length,i=arguments[0];if(i){if(i.mandatory||i.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==i.offerToReceiveAudio&&(n=!0===i.offerToReceiveAudio?1:!1===i.offerToReceiveAudio?0:i.offerToReceiveAudio),void 0!==i.offerToReceiveVideo&&(a=!0===i.offerToReceiveVideo?1:!1===i.offerToReceiveVideo?0:i.offerToReceiveVideo)}for(t.transceivers.forEach(function(e){"audio"===e.kind?--n<0&&(e.wantReceive=!1):"video"===e.kind&&--a<0&&(e.wantReceive=!1)});n>0||a>0;)n>0&&(t._createTransceiver("audio"),n--),a>0&&(t._createTransceiver("video"),a--);var s=e.writeSessionBoilerplate(t._sdpSessionId,t._sdpSessionVersion++);t.transceivers.forEach(function(r,n){var a=r.track,i=r.kind,s=r.mid||e.generateIdentifier();r.mid=s,r.iceGatherer||(r.iceGatherer=t._createIceGatherer(n,t.usingBundle));var o=c.RTCRtpSender.getCapabilities(i);d<15019&&(o.codecs=o.codecs.filter(function(e){return"rtx"!==e.name})),o.codecs.forEach(function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),r.remoteCapabilities&&r.remoteCapabilities.codecs&&r.remoteCapabilities.codecs.forEach(function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)})}),o.headerExtensions.forEach(function(e){(r.remoteCapabilities&&r.remoteCapabilities.headerExtensions||[]).forEach(function(t){e.uri===t.uri&&(e.id=t.id)})});var p=r.sendEncodingParameters||[{ssrc:1001*(2*n+1)}];a&&d>=15019&&"video"===i&&!p[0].rtx&&(p[0].rtx={ssrc:p[0].ssrc+1}),r.wantReceive&&(r.rtpReceiver=new c.RTCRtpReceiver(r.dtlsTransport,i)),r.localCapabilities=o,r.sendEncodingParameters=p}),"max-compat"!==t._config.bundlePolicy&&(s+="a=group:BUNDLE "+t.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n"),s+="a=ice-options:trickle\r\n",t.transceivers.forEach(function(n,a){s+=r(n,n.localCapabilities,"offer",n.stream,t._dtlsRole),s+="a=rtcp-rsize\r\n",!n.iceGatherer||"new"===t.iceGatheringState||0!==a&&t.usingBundle||(n.iceGatherer.getLocalCandidates().forEach(function(t){t.component=1,s+="a="+e.writeCandidate(t)+"\r\n"}),"completed"===n.iceGatherer.state&&(s+="a=end-of-candidates\r\n"))});var p=new c.RTCSessionDescription({type:"offer",sdp:s});return Promise.resolve(p)},f.prototype.createAnswer=function(){var t=this;if(t._isClosed)return Promise.reject(o("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==t.signalingState&&"have-local-pranswer"!==t.signalingState)return Promise.reject(o("InvalidStateError","Can not call createAnswer in signalingState "+t.signalingState));var n=e.writeSessionBoilerplate(t._sdpSessionId,t._sdpSessionVersion++);t.usingBundle&&(n+="a=group:BUNDLE "+t.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n"),n+="a=ice-options:trickle\r\n";var i=e.getMediaSections(t._remoteDescription.sdp).length;t.transceivers.forEach(function(e,s){if(!(s+1>i)){if(e.rejected)return"application"===e.kind?"DTLS/SCTP"===e.protocol?n+="m=application 0 DTLS/SCTP 5000\r\n":n+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?n+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(n+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(n+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var o;if(e.stream)"audio"===e.kind?o=e.stream.getAudioTracks()[0]:"video"===e.kind&&(o=e.stream.getVideoTracks()[0]),o&&d>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1});var c=a(e.localCapabilities,e.remoteCapabilities);!c.codecs.filter(function(e){return"rtx"===e.name.toLowerCase()}).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,n+=r(e,c,"answer",e.stream,t._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(n+="a=rtcp-rsize\r\n")}});var s=new c.RTCSessionDescription({type:"answer",sdp:n});return Promise.resolve(s)},f.prototype.addIceCandidate=function(t){var r,n=this;return t&&void 0===t.sdpMLineIndex&&!t.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(a,i){if(!n._remoteDescription)return i(o("InvalidStateError","Can not add ICE candidate without a remote description"));if(t&&""!==t.candidate){var c=t.sdpMLineIndex;if(t.sdpMid)for(var d=0;d<n.transceivers.length;d++)if(n.transceivers[d].mid===t.sdpMid){c=d;break}var p=n.transceivers[c];if(!p)return i(o("OperationError","Can not add ICE candidate"));if(p.rejected)return a();var l=Object.keys(t.candidate).length>0?e.parseCandidate(t.candidate):{};if("tcp"===l.protocol&&(0===l.port||9===l.port))return a();if(l.component&&1!==l.component)return a();if((0===c||c>0&&p.iceTransport!==n.transceivers[0].iceTransport)&&!s(p.iceTransport,l))return i(o("OperationError","Can not add ICE candidate"));var f=t.candidate.trim();0===f.indexOf("a=")&&(f=f.substr(2)),(r=e.getMediaSections(n._remoteDescription.sdp))[c]+="a="+(l.type?f:"end-of-candidates")+"\r\n",n._remoteDescription.sdp=e.getDescription(n._remoteDescription.sdp)+r.join("")}else for(var u=0;u<n.transceivers.length&&(n.transceivers[u].rejected||(n.transceivers[u].iceTransport.addRemoteCandidate({}),(r=e.getMediaSections(n._remoteDescription.sdp))[u]+="a=end-of-candidates\r\n",n._remoteDescription.sdp=e.getDescription(n._remoteDescription.sdp)+r.join(""),!n.usingBundle));u++);a()})},f.prototype.getStats=function(e){if(e&&e instanceof c.MediaStreamTrack){var t=null;if(this.transceivers.forEach(function(r){r.rtpSender&&r.rtpSender.track===e?t=r.rtpSender:r.rtpReceiver&&r.rtpReceiver.track===e&&(t=r.rtpReceiver)}),!t)throw o("InvalidAccessError","Invalid selector.");return t.getStats()}var r=[];return this.transceivers.forEach(function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(t){e[t]&&r.push(e[t].getStats())})}),Promise.all(r).then(function(e){var t=new Map;return e.forEach(function(e){e.forEach(function(e){t.set(e.id,e)})}),t})};["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach(function(e){var r=c[e];if(r&&r.prototype&&r.prototype.getStats){var n=r.prototype.getStats;r.prototype.getStats=function(){return n.apply(this).then(function(e){var r=new Map;return Object.keys(e).forEach(function(n){e[n].type=t(e[n]),r.set(n,e[n])}),r})}}});var u=["createOffer","createAnswer"];return u.forEach(function(e){var t=f.prototype[e];f.prototype[e]=function(){var e=arguments;return"function"==typeof e[0]||"function"==typeof e[1]?t.apply(this,[arguments[2]]).then(function(t){"function"==typeof e[0]&&e[0].apply(null,[t])},function(t){"function"==typeof e[1]&&e[1].apply(null,[t])}):t.apply(this,arguments)}}),(u=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach(function(e){var t=f.prototype[e];f.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]||"function"==typeof e[2]?t.apply(this,arguments).then(function(){"function"==typeof e[1]&&e[1].apply(null)},function(t){"function"==typeof e[2]&&e[2].apply(null,[t])}):t.apply(this,arguments)}}),["getStats"].forEach(function(e){var t=f.prototype[e];f.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then(function(){"function"==typeof e[1]&&e[1].apply(null)}):t.apply(this,arguments)}}),f};
},{"sdp":"YHvh"}],"YdKx":[function(require,module,exports) {
"use strict";function e(e){var r=e&&e.navigator,t=r.mediaDevices.getUserMedia.bind(r.mediaDevices);r.mediaDevices.getUserMedia=function(e){return t(e).catch(function(e){return Promise.reject(function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString:function(){return this.name}}}(e))})}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimGetUserMedia=e;
},{}],"P3bV":[function(require,module,exports) {
"use strict";function e(e){"getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimGetDisplayMedia=e;
},{}],"XRic":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimPeerConnection=p,exports.shimReplaceTrack=a,Object.defineProperty(exports,"shimGetUserMedia",{enumerable:!0,get:function(){return n.shimGetUserMedia}}),Object.defineProperty(exports,"shimGetDisplayMedia",{enumerable:!0,get:function(){return i.shimGetDisplayMedia}});var e=s(require("../utils")),t=require("./filtericeservers"),r=o(require("rtcpeerconnection-shim")),n=require("./getusermedia"),i=require("./getdisplaymedia");function o(e){return e&&e.__esModule?e:{default:e}}function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function s(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=n?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}function p(n,i){if(n.RTCIceGatherer&&(n.RTCIceCandidate||(n.RTCIceCandidate=function(e){return e}),n.RTCSessionDescription||(n.RTCSessionDescription=function(e){return e}),i.version<15025)){var o=Object.getOwnPropertyDescriptor(n.MediaStreamTrack.prototype,"enabled");Object.defineProperty(n.MediaStreamTrack.prototype,"enabled",{set:function(e){o.set.call(this,e);var t=new Event("enabled");t.enabled=e,this.dispatchEvent(t)}})}!n.RTCRtpSender||"dtmf"in n.RTCRtpSender.prototype||Object.defineProperty(n.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new n.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),n.RTCDtmfSender&&!n.RTCDTMFSender&&(n.RTCDTMFSender=n.RTCDtmfSender);var c=(0,r.default)(n,i.version);n.RTCPeerConnection=function(r){return r&&r.iceServers&&(r.iceServers=(0,t.filterIceServers)(r.iceServers,i.version),e.log("ICE servers after filtering:",r.iceServers)),new c(r)},n.RTCPeerConnection.prototype=c.prototype}function a(e){!e.RTCRtpSender||"replaceTrack"in e.RTCRtpSender.prototype||(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}
},{"../utils":"iSxC","./filtericeservers":"NZ1C","rtcpeerconnection-shim":"NJ2u","./getusermedia":"YdKx","./getdisplaymedia":"P3bV"}],"GzSv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimGetUserMedia=n;var e=o(require("../utils"));function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var o=t();if(o&&o.has(e))return o.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=n?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,o&&o.set(e,r),r}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(t,o){var n=t&&t.navigator,i=t&&t.MediaStreamTrack;if(n.getUserMedia=function(t,o,r){e.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(t).then(o,r)},!(o.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){var a=function(e,t,o){t in e&&!(o in e)&&(e[o]=e[t],delete e[t])},s=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(e){return"object"===r(e)&&"object"===r(e.audio)&&(e=JSON.parse(JSON.stringify(e)),a(e.audio,"autoGainControl","mozAutoGainControl"),a(e.audio,"noiseSuppression","mozNoiseSuppression")),s(e)},i&&i.prototype.getSettings){var p=i.prototype.getSettings;i.prototype.getSettings=function(){var e=p.apply(this,arguments);return a(e,"mozAutoGainControl","autoGainControl"),a(e,"mozNoiseSuppression","noiseSuppression"),e}}if(i&&i.prototype.applyConstraints){var u=i.prototype.applyConstraints;i.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"===r(e)&&(e=JSON.parse(JSON.stringify(e)),a(e,"autoGainControl","mozAutoGainControl"),a(e,"noiseSuppression","mozNoiseSuppression")),u.apply(this,[e])}}}}
},{"../utils":"iSxC"}],"UuGU":[function(require,module,exports) {
"use strict";function e(e,i){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(a){if(!a||!a.video){var t=new DOMException("getDisplayMedia without video constraints is undefined");return t.name="NotFoundError",t.code=8,Promise.reject(t)}return!0===a.video?a.video={mediaSource:i}:a.video.mediaSource=i,e.navigator.mediaDevices.getUserMedia(a)})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimGetDisplayMedia=e;
},{}],"Fzdr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimOnTrack=s,exports.shimPeerConnection=c,exports.shimSenderGetStats=p,exports.shimReceiverGetStats=u,exports.shimRemoveStream=f,exports.shimRTCDataChannel=d,exports.shimAddTransceiver=C,exports.shimGetParameters=y,exports.shimCreateOffer=l,exports.shimCreateAnswer=m,Object.defineProperty(exports,"shimGetUserMedia",{enumerable:!0,get:function(){return t.shimGetUserMedia}}),Object.defineProperty(exports,"shimGetDisplayMedia",{enumerable:!0,get:function(){return n.shimGetDisplayMedia}});var e=o(require("../utils")),t=require("./getusermedia"),n=require("./getdisplaymedia");function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e){"object"===a(e)&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function c(e,t){if("object"===a(e)&&(e.RTCPeerConnection||e.mozRTCPeerConnection)){!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var n=e.RTCPeerConnection.prototype[t],r=i({},t,function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)});e.RTCPeerConnection.prototype[t]=r[t]});var n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var[e,o,i]=arguments;return r.apply(this,[e||null]).then(function(e){if(t.version<53&&!o)try{e.forEach(function(e){e.type=n[e.type]||e.type})}catch(r){if("TypeError"!==r.name)throw r;e.forEach(function(t,r){e.set(r,Object.assign({},t,{type:n[t.type]||t.type}))})}return e}).then(o,i)}}}function p(e){if("object"===a(e)&&e.RTCPeerConnection&&e.RTCRtpSender&&!(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach(function(t){return t._pc=e}),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}}function u(t){if("object"===a(t)&&t.RTCPeerConnection&&t.RTCRtpSender&&!(t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)){var n=t.RTCPeerConnection.prototype.getReceivers;n&&(t.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=n.apply(this,[]);return t.forEach(function(t){return t._pc=e}),t}),e.wrapPeerConnectionEvent(t,"track",function(e){return e.receiver._pc=e.srcElement,e}),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}}function f(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(t){var n=this;e.deprecated("removeStream","removeTrack"),this.getSenders().forEach(function(e){e.track&&t.getTracks().includes(e.track)&&n.removeTrack(e)})})}function d(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function C(e){if("object"===a(e)&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];var e=arguments[1],n=e&&"sendEncodings"in e;n&&e.sendEncodings.forEach(function(e){if("rid"in e){if(!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.")}if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});var r=t.apply(this,arguments);if(n){var{sender:o}=r,i=o.getParameters();"encodings"in i&&(1!==i.encodings.length||0!==Object.keys(i.encodings[0]).length)||(i.encodings=e.sendEncodings,o.sendEncodings=e.sendEncodings,this.setParametersPromises.push(o.setParameters(i).then(function(){delete o.sendEncodings}).catch(function(){delete o.sendEncodings})))}return r})}}function y(e){if("object"===a(e)&&e.RTCRtpSender){var t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){var e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}}function l(e){if("object"===a(e)&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){var e=arguments,n=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(function(){return t.apply(n,e)}).finally(function(){n.setParametersPromises=[]}):t.apply(this,arguments)}}}function m(e){if("object"===a(e)&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){var e=arguments,n=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(function(){return t.apply(n,e)}).finally(function(){n.setParametersPromises=[]}):t.apply(this,arguments)}}}
},{"../utils":"iSxC","./getusermedia":"GzSv","./getdisplaymedia":"UuGU"}],"t1lL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimLocalStreamsAPI=n,exports.shimRemoteStreamsAPI=i,exports.shimCallbacksAPI=a,exports.shimGetUserMedia=c,exports.shimConstraints=s,exports.shimRTCIceServerUrls=d,exports.shimTrackEventTransceiver=f,exports.shimCreateOfferLegacy=p,exports.shimAudioContext=u;var e=r(require("../utils"));function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function r(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t();if(r&&r.has(e))return r.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=n?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(o,i,a):o[i]=e[i]}return o.default=e,r&&r.set(e,o),o}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e){if("object"===o(e)&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){var r=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach(function(o){return t.call(r,o,e)}),e.getVideoTracks().forEach(function(o){return t.call(r,o,e)})},e.RTCPeerConnection.prototype.addTrack=function(e){for(var r=this,o=arguments.length,n=new Array(o>1?o-1:0),i=1;i<o;i++)n[i-1]=arguments[i];return n&&n.forEach(function(e){r._localStreams?r._localStreams.includes(e)||r._localStreams.push(e):r._localStreams=[e]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._localStreams||(this._localStreams=[]);var r=this._localStreams.indexOf(e);if(-1!==r){this._localStreams.splice(r,1);var o=e.getTracks();this.getSenders().forEach(function(e){o.includes(e.track)&&t.removeTrack(e)})}})}}function i(e){if("object"===o(e)&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){var t=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach(function(e){if(t._remoteStreams||(t._remoteStreams=[]),!t._remoteStreams.includes(e)){t._remoteStreams.push(e);var r=new Event("addstream");r.stream=e,t.dispatchEvent(r)}})})}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach(function(t){if(e._remoteStreams||(e._remoteStreams=[]),!(e._remoteStreams.indexOf(t)>=0)){e._remoteStreams.push(t);var r=new Event("addstream");r.stream=t,e.dispatchEvent(r)}})}),t.apply(e,arguments)}}}function a(e){if("object"===o(e)&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,r=t.createOffer,n=t.createAnswer,i=t.setLocalDescription,a=t.setRemoteDescription,c=t.addIceCandidate;t.createOffer=function(e,t){var o=arguments.length>=2?arguments[2]:arguments[0],n=r.apply(this,[o]);return t?(n.then(e,t),Promise.resolve()):n},t.createAnswer=function(e,t){var r=arguments.length>=2?arguments[2]:arguments[0],o=n.apply(this,[r]);return t?(o.then(e,t),Promise.resolve()):o};var s=function(e,t,r){var o=i.apply(this,[e]);return r?(o.then(t,r),Promise.resolve()):o};t.setLocalDescription=s,s=function(e,t,r){var o=a.apply(this,[e]);return r?(o.then(t,r),Promise.resolve()):o},t.setRemoteDescription=s,s=function(e,t,r){var o=c.apply(this,[e]);return r?(o.then(t,r),Promise.resolve()):o},t.addIceCandidate=s}}function c(e){var t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){var r=t.mediaDevices,o=r.getUserMedia.bind(r);t.mediaDevices.getUserMedia=function(e){return o(s(e))}}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,r,o){t.mediaDevices.getUserMedia(e).then(r,o)}.bind(t))}function s(t){return t&&void 0!==t.video?Object.assign({},t,{video:e.compactObject(t.video)}):t}function d(t){if(t.RTCPeerConnection){var r=t.RTCPeerConnection;t.RTCPeerConnection=function(t,o){if(t&&t.iceServers){for(var n=[],i=0;i<t.iceServers.length;i++){var a=t.iceServers[i];!a.hasOwnProperty("urls")&&a.hasOwnProperty("url")?(e.deprecated("RTCIceServer.url","RTCIceServer.urls"),(a=JSON.parse(JSON.stringify(a))).urls=a.url,delete a.url,n.push(a)):n.push(t.iceServers[i])}t.iceServers=n}return new r(t,o)},t.RTCPeerConnection.prototype=r.prototype,"generateCertificate"in r&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get:function(){return r.generateCertificate}})}}function f(e){"object"===o(e)&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function p(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);var r=this.getTransceivers().find(function(e){return"audio"===e.receiver.track.kind});!1===e.offerToReceiveAudio&&r?"sendrecv"===r.direction?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":"recvonly"===r.direction&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):!0!==e.offerToReceiveAudio||r||this.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);var o=this.getTransceivers().find(function(e){return"video"===e.receiver.track.kind});!1===e.offerToReceiveVideo&&o?"sendrecv"===o.direction?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":"recvonly"===o.direction&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):!0!==e.offerToReceiveVideo||o||this.addTransceiver("video")}return t.apply(this,arguments)}}function u(e){"object"!==o(e)||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}
},{"../utils":"iSxC"}],"GOQK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimRTCIceCandidate=a,exports.shimMaxMessageSize=c,exports.shimSendThrowTypeError=s,exports.shimConnectionState=p,exports.removeExtmapAllowMixed=d,exports.shimAddIceCandidateNullOrEmpty=u;var e=r(require("sdp")),t=o(require("./utils"));function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=n();if(t&&t.has(e))return t.get(e);var o={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=r?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(o,i,a):o[i]=e[i]}return o.default=e,t&&t.set(e,o),o}function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(n){if(n.RTCIceCandidate&&!(n.RTCIceCandidate&&"foundation"in n.RTCIceCandidate.prototype)){var o=n.RTCIceCandidate;n.RTCIceCandidate=function(t){if("object"===i(t)&&t.candidate&&0===t.candidate.indexOf("a=")&&((t=JSON.parse(JSON.stringify(t))).candidate=t.candidate.substr(2)),t.candidate&&t.candidate.length){var n=new o(t),r=e.default.parseCandidate(t.candidate),a=Object.assign(n,r);return a.toJSON=function(){return{candidate:a.candidate,sdpMid:a.sdpMid,sdpMLineIndex:a.sdpMLineIndex,usernameFragment:a.usernameFragment}},a}return new o(t)},n.RTCIceCandidate.prototype=o.prototype,t.wrapPeerConnectionEvent(n,"icecandidate",function(e){return e.candidate&&Object.defineProperty(e,"candidate",{value:new n.RTCIceCandidate(e.candidate),writable:"false"}),e})}}function c(t,n){if(t.RTCPeerConnection){"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp}});var o=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===n.browser&&n.version>=76){var{sdpSemantics:t}=this.getConfiguration();"plan-b"===t&&Object.defineProperty(this,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(function(t){if(!t||!t.sdp)return!1;var n=e.default.splitSections(t.sdp);return n.shift(),n.some(function(t){var n=e.default.parseMLine(t);return n&&"application"===n.kind&&-1!==n.protocol.indexOf("SCTP")})}(arguments[0])){var r,i=function(e){var t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;var n=parseInt(t[1],10);return n!=n?-1:n}(arguments[0]),a=(p=i,d=65536,"firefox"===n.browser&&(d=n.version<57?-1===p?16384:2147483637:n.version<60?57===n.version?65535:65536:2147483637),d),c=function(t,o){var r=65536;"firefox"===n.browser&&57===n.version&&(r=65535);var i=e.default.matchPrefix(t.sdp,"a=max-message-size:");return i.length>0?r=parseInt(i[0].substr(19),10):"firefox"===n.browser&&-1!==o&&(r=2147483637),r}(arguments[0],i);r=0===a&&0===c?Number.POSITIVE_INFINITY:0===a||0===c?Math.max(a,c):Math.min(a,c);var s={};Object.defineProperty(s,"maxMessageSize",{get:function(){return r}}),this._sctp=s}var p,d;return o.apply(this,arguments)}}}function s(e){if(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype){var n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){var e=n.apply(this,arguments);return o(e,this),e},t.wrapPeerConnectionEvent(e,"datachannel",function(e){return o(e.channel,e.target),e})}function o(e,t){var n=e.send;e.send=function(){var o=arguments[0],r=o.length||o.size||o.byteLength;if("open"===e.readyState&&t.sctp&&r>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}}function p(e){if(e.RTCPeerConnection&&!("connectionState"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(function(e){var n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(e){var t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;var n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}})}}function d(e,t){if(e.RTCPeerConnection&&!("chrome"===t.browser&&t.version>=71||"safari"===t.browser&&t.version>=605)){var n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){var o=t.sdp.split("\n").filter(function(e){return"a=extmap-allow-mixed"!==e.trim()}).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:o}):t.sdp=o}return n.apply(this,arguments)}}}function u(e,t){if(e.RTCPeerConnection&&e.RTCPeerConnection.prototype){var n=e.RTCPeerConnection.prototype.addIceCandidate;n&&0!==n.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}}
},{"sdp":"YHvh","./utils":"iSxC"}],"KtlG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.adapterFactory=o;var e=m(require("./utils")),i=m(require("./chrome/chrome_shim")),r=m(require("./edge/edge_shim")),s=m(require("./firefox/firefox_shim")),t=m(require("./safari/safari_shim")),a=m(require("./common_shim"));function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function m(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var i=n();if(i&&i.has(e))return i.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var a=s?Object.getOwnPropertyDescriptor(e,t):null;a&&(a.get||a.set)?Object.defineProperty(r,t,a):r[t]=e[t]}return r.default=e,i&&i.set(e,r),r}function o(){var{window:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},m=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0},o=e.log,h=e.detectBrowser(n),d={browserDetails:h,commonShim:a,extractVersion:e.extractVersion,disableLog:e.disableLog,disableWarnings:e.disableWarnings};switch(h.browser){case"chrome":if(!i||!i.shimPeerConnection||!m.shimChrome)return o("Chrome shim is not included in this adapter release."),d;if(null===h.version)return o("Chrome shim can not determine version, not shimming."),d;o("adapter.js shimming chrome."),d.browserShim=i,a.shimAddIceCandidateNullOrEmpty(n,h),i.shimGetUserMedia(n,h),i.shimMediaStream(n,h),i.shimPeerConnection(n,h),i.shimOnTrack(n,h),i.shimAddTrackRemoveTrack(n,h),i.shimGetSendersWithDtmf(n,h),i.shimGetStats(n,h),i.shimSenderReceiverGetStats(n,h),i.fixNegotiationNeeded(n,h),a.shimRTCIceCandidate(n,h),a.shimConnectionState(n,h),a.shimMaxMessageSize(n,h),a.shimSendThrowTypeError(n,h),a.removeExtmapAllowMixed(n,h);break;case"firefox":if(!s||!s.shimPeerConnection||!m.shimFirefox)return o("Firefox shim is not included in this adapter release."),d;o("adapter.js shimming firefox."),d.browserShim=s,a.shimAddIceCandidateNullOrEmpty(n,h),s.shimGetUserMedia(n,h),s.shimPeerConnection(n,h),s.shimOnTrack(n,h),s.shimRemoveStream(n,h),s.shimSenderGetStats(n,h),s.shimReceiverGetStats(n,h),s.shimRTCDataChannel(n,h),s.shimAddTransceiver(n,h),s.shimGetParameters(n,h),s.shimCreateOffer(n,h),s.shimCreateAnswer(n,h),a.shimRTCIceCandidate(n,h),a.shimConnectionState(n,h),a.shimMaxMessageSize(n,h),a.shimSendThrowTypeError(n,h);break;case"edge":if(!r||!r.shimPeerConnection||!m.shimEdge)return o("MS edge shim is not included in this adapter release."),d;o("adapter.js shimming edge."),d.browserShim=r,r.shimGetUserMedia(n,h),r.shimGetDisplayMedia(n,h),r.shimPeerConnection(n,h),r.shimReplaceTrack(n,h),a.shimMaxMessageSize(n,h),a.shimSendThrowTypeError(n,h);break;case"safari":if(!t||!m.shimSafari)return o("Safari shim is not included in this adapter release."),d;o("adapter.js shimming safari."),d.browserShim=t,a.shimAddIceCandidateNullOrEmpty(n,h),t.shimRTCIceServerUrls(n,h),t.shimCreateOfferLegacy(n,h),t.shimCallbacksAPI(n,h),t.shimLocalStreamsAPI(n,h),t.shimRemoteStreamsAPI(n,h),t.shimTrackEventTransceiver(n,h),t.shimGetUserMedia(n,h),t.shimAudioContext(n,h),a.shimRTCIceCandidate(n,h),a.shimMaxMessageSize(n,h),a.shimSendThrowTypeError(n,h),a.removeExtmapAllowMixed(n,h);break;default:o("Unsupported browser!")}return d}
},{"./utils":"iSxC","./chrome/chrome_shim":"uI5X","./edge/edge_shim":"XRic","./firefox/firefox_shim":"Fzdr","./safari/safari_shim":"t1lL","./common_shim":"GOQK"}],"tI1X":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./adapter_factory.js"),t=(0,e.adapterFactory)({window:"undefined"==typeof window?void 0:window}),d=t;exports.default=d;
},{"./adapter_factory.js":"KtlG"}],"sXtV":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.webRTCAdapter=void 0;var t=e(require("webrtc-adapter"));exports.webRTCAdapter=t.default;
},{"webrtc-adapter":"tI1X"}],"I31f":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Supports=void 0;var r=require("./adapter");exports.Supports=new(function(){function e(){this.isIOS=["iPad","iPhone","iPod"].includes(navigator.platform),this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}return e.prototype.isWebRTCSupported=function(){return"undefined"!=typeof RTCPeerConnection},e.prototype.isBrowserSupported=function(){var r=this.getBrowser(),e=this.getVersion();return!!this.supportedBrowsers.includes(r)&&("chrome"===r?e>=this.minChromeVersion:"firefox"===r?e>=this.minFirefoxVersion:"safari"===r&&(!this.isIOS&&e>=this.minSafariVersion))},e.prototype.getBrowser=function(){return r.webRTCAdapter.browserDetails.browser},e.prototype.getVersion=function(){return r.webRTCAdapter.browserDetails.version||0},e.prototype.isUnifiedPlanSupported=function(){var e,i=this.getBrowser(),t=r.webRTCAdapter.browserDetails.version||0;if("chrome"===i&&t<72)return!1;if("firefox"===i&&t>=59)return!0;if(!(window.RTCRtpTransceiver&&"currentDirection"in RTCRtpTransceiver.prototype))return!1;var o=!1;try{(e=new RTCPeerConnection).addTransceiver("audio"),o=!0}catch(s){}finally{e&&e.close()}return o},e.prototype.toString=function(){return"Supports: \n    browser:"+this.getBrowser()+" \n    version:"+this.getVersion()+" \n    isIOS:"+this.isIOS+" \n    isWebRTCSupported:"+this.isWebRTCSupported()+" \n    isBrowserSupported:"+this.isBrowserSupported()+" \n    isUnifiedPlanSupported:"+this.isUnifiedPlanSupported()},e}());
},{"./adapter":"sXtV"}],"BHXf":[function(require,module,exports) {
"use strict";var e=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),t=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(r){if(r&&r.__esModule)return r;var o={};if(null!=r)for(var n in r)"default"!==n&&Object.prototype.hasOwnProperty.call(r,n)&&e(o,r,n);return t(o,r),o};Object.defineProperty(exports,"__esModule",{value:!0}),exports.util=void 0;var o=r(require("peerjs-js-binarypack")),n=require("./supports"),i={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"turn:0.peerjs.com:3478",username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};exports.util=new(function(){function e(){this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.chunkedMTU=16300,this.defaultConfig=i,this.browser=n.Supports.getBrowser(),this.browserVersion=n.Supports.getVersion(),this.supports=function(){var e,t={browser:n.Supports.isBrowserSupported(),webRTC:n.Supports.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!t.webRTC)return t;try{e=new RTCPeerConnection(i),t.audioVideo=!0;var r=void 0;try{r=e.createDataChannel("_PEERJSTEST",{ordered:!0}),t.data=!0,t.reliable=!!r.ordered;try{r.binaryType="blob",t.binaryBlob=!n.Supports.isIOS}catch(o){}}catch(o){}finally{r&&r.close()}}catch(o){}finally{e&&e.close()}return t}(),this.pack=o.pack,this.unpack=o.unpack,this._dataCount=1}return e.prototype.noop=function(){},e.prototype.validateId=function(e){return!e||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(e)},e.prototype.chunk=function(e){for(var t=[],r=e.size,o=Math.ceil(r/exports.util.chunkedMTU),n=0,i=0;i<r;){var a=Math.min(r,i+exports.util.chunkedMTU),u=e.slice(i,a),s={__peerData:this._dataCount,n:n,data:u,total:o};t.push(s),i=a,n++}return this._dataCount++,t},e.prototype.blobToArrayBuffer=function(e,t){var r=new FileReader;return r.onload=function(e){e.target&&t(e.target.result)},r.readAsArrayBuffer(e),r},e.prototype.binaryStringToArrayBuffer=function(e){for(var t=new Uint8Array(e.length),r=0;r<e.length;r++)t[r]=255&e.charCodeAt(r);return t.buffer},e.prototype.randomToken=function(){return Math.random().toString(36).substr(2)},e.prototype.isSecure=function(){return"https:"===location.protocol},e}());
},{"peerjs-js-binarypack":"kdPp","./supports":"I31f"}],"JJlS":[function(require,module,exports) {
"use strict";var e=Object.prototype.hasOwnProperty,t="~";function n(){}function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,n,o,s,i){if("function"!=typeof o)throw new TypeError("The listener must be a function");var c=new r(o,s||e,i),f=t?t+n:n;return e._events[f]?e._events[f].fn?e._events[f]=[e._events[f],c]:e._events[f].push(c):(e._events[f]=c,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function i(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(t=!1)),i.prototype.eventNames=function(){var n,r,o=[];if(0===this._eventsCount)return o;for(r in n=this._events)e.call(n,r)&&o.push(t?r.slice(1):r);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(n)):o},i.prototype.listeners=function(e){var n=t?t+e:e,r=this._events[n];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,s=r.length,i=new Array(s);o<s;o++)i[o]=r[o].fn;return i},i.prototype.listenerCount=function(e){var n=t?t+e:e,r=this._events[n];return r?r.fn?1:r.length:0},i.prototype.emit=function(e,n,r,o,s,i){var c=t?t+e:e;if(!this._events[c])return!1;var f,u,a=this._events[c],l=arguments.length;if(a.fn){switch(a.once&&this.removeListener(e,a.fn,void 0,!0),l){case 1:return a.fn.call(a.context),!0;case 2:return a.fn.call(a.context,n),!0;case 3:return a.fn.call(a.context,n,r),!0;case 4:return a.fn.call(a.context,n,r,o),!0;case 5:return a.fn.call(a.context,n,r,o,s),!0;case 6:return a.fn.call(a.context,n,r,o,s,i),!0}for(u=1,f=new Array(l-1);u<l;u++)f[u-1]=arguments[u];a.fn.apply(a.context,f)}else{var v,h=a.length;for(u=0;u<h;u++)switch(a[u].once&&this.removeListener(e,a[u].fn,void 0,!0),l){case 1:a[u].fn.call(a[u].context);break;case 2:a[u].fn.call(a[u].context,n);break;case 3:a[u].fn.call(a[u].context,n,r);break;case 4:a[u].fn.call(a[u].context,n,r,o);break;default:if(!f)for(v=1,f=new Array(l-1);v<l;v++)f[v-1]=arguments[v];a[u].fn.apply(a[u].context,f)}}return!0},i.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},i.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},i.prototype.removeListener=function(e,n,r,o){var i=t?t+e:e;if(!this._events[i])return this;if(!n)return s(this,i),this;var c=this._events[i];if(c.fn)c.fn!==n||o&&!c.once||r&&c.context!==r||s(this,i);else{for(var f=0,u=[],a=c.length;f<a;f++)(c[f].fn!==n||o&&!c[f].once||r&&c[f].context!==r)&&u.push(c[f]);u.length?this._events[i]=1===u.length?u[0]:u:s(this,i)}return this},i.prototype.removeAllListeners=function(e){var r;return e?(r=t?t+e:e,this._events[r]&&s(this,r)):(this._events=new n,this._eventsCount=0),this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prefixed=t,i.EventEmitter=i,"undefined"!=typeof module&&(module.exports=i);
},{}],"WOs9":[function(require,module,exports) {
"use strict";var r=this&&this.__read||function(r,e){var o="function"==typeof Symbol&&r[Symbol.iterator];if(!o)return r;var t,n,l=o.call(r),i=[];try{for(;(void 0===e||e-- >0)&&!(t=l.next()).done;)i.push(t.value)}catch(s){n={error:s}}finally{try{t&&!t.done&&(o=l.return)&&o.call(l)}finally{if(n)throw n.error}}return i},e=this&&this.__spreadArray||function(r,e){for(var o=0,t=e.length,n=r.length;o<t;o++,n++)r[n]=e[o];return r};Object.defineProperty(exports,"__esModule",{value:!0}),exports.LogLevel=void 0;var o,t="PeerJS: ";!function(r){r[r.Disabled=0]="Disabled",r[r.Errors=1]="Errors",r[r.Warnings=2]="Warnings",r[r.All=3]="All"}(o=exports.LogLevel||(exports.LogLevel={}));var n=function(){function n(){this._logLevel=o.Disabled}return Object.defineProperty(n.prototype,"logLevel",{get:function(){return this._logLevel},set:function(r){this._logLevel=r},enumerable:!1,configurable:!0}),n.prototype.log=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._logLevel>=o.All&&this._print.apply(this,e([o.All],r(t)))},n.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._logLevel>=o.Warnings&&this._print.apply(this,e([o.Warnings],r(t)))},n.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._logLevel>=o.Errors&&this._print.apply(this,e([o.Errors],r(t)))},n.prototype.setLogFunction=function(r){this._print=r},n.prototype._print=function(n){for(var l=[],i=1;i<arguments.length;i++)l[i-1]=arguments[i];var s=e([t],r(l));for(var a in s)s[a]instanceof Error&&(s[a]="("+s[a].name+") "+s[a].message);n>=o.All?console.log.apply(console,e([],r(s))):n>=o.Warnings?console.warn.apply(console,e(["WARNING"],r(s))):n>=o.Errors&&console.error.apply(console,e(["ERROR"],r(s)))},n}();exports.default=new n;
},{}],"ZRYf":[function(require,module,exports) {
"use strict";var e,r,o,n,t,a,i;Object.defineProperty(exports,"__esModule",{value:!0}),exports.ServerMessageType=exports.SocketEventType=exports.SerializationType=exports.PeerErrorType=exports.PeerEventType=exports.ConnectionType=exports.ConnectionEventType=void 0,function(e){e.Open="open",e.Stream="stream",e.Data="data",e.Close="close",e.Error="error",e.IceStateChanged="iceStateChanged"}(e=exports.ConnectionEventType||(exports.ConnectionEventType={})),function(e){e.Data="data",e.Media="media"}(r=exports.ConnectionType||(exports.ConnectionType={})),function(e){e.Open="open",e.Close="close",e.Connection="connection",e.Call="call",e.Disconnected="disconnected",e.Error="error"}(o=exports.PeerEventType||(exports.PeerEventType={})),function(e){e.BrowserIncompatible="browser-incompatible",e.Disconnected="disconnected",e.InvalidID="invalid-id",e.InvalidKey="invalid-key",e.Network="network",e.PeerUnavailable="peer-unavailable",e.SslUnavailable="ssl-unavailable",e.ServerError="server-error",e.SocketError="socket-error",e.SocketClosed="socket-closed",e.UnavailableID="unavailable-id",e.WebRTC="webrtc"}(n=exports.PeerErrorType||(exports.PeerErrorType={})),function(e){e.Binary="binary",e.BinaryUTF8="binary-utf8",e.JSON="json"}(t=exports.SerializationType||(exports.SerializationType={})),function(e){e.Message="message",e.Disconnected="disconnected",e.Error="error",e.Close="close"}(a=exports.SocketEventType||(exports.SocketEventType={})),function(e){e.Heartbeat="HEARTBEAT",e.Candidate="CANDIDATE",e.Offer="OFFER",e.Answer="ANSWER",e.Open="OPEN",e.Error="ERROR",e.IdTaken="ID-TAKEN",e.InvalidKey="INVALID-KEY",e.Leave="LEAVE",e.Expire="EXPIRE"}(i=exports.ServerMessageType||(exports.ServerMessageType={}));
},{}],"wJlv":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),t=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,s,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){s={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i},n=this&&this.__spreadArray||function(e,t){for(var n=0,o=t.length,s=e.length;n<o;n++,s++)e[s]=t[n];return e},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Socket=void 0;var r=require("eventemitter3"),i=s(require("./logger")),c=require("./enums"),a=function(s){function r(e,t,n,o,r,i){void 0===i&&(i=5e3);var c=s.call(this)||this;c.pingInterval=i,c._disconnected=!0,c._messagesQueue=[];var a=e?"wss://":"ws://";return c._baseUrl=a+t+":"+n+o+"peerjs?key="+r,c}return e(r,s),r.prototype.start=function(e,t){var n=this;this._id=e;var o=this._baseUrl+"&id="+e+"&token="+t;!this._socket&&this._disconnected&&(this._socket=new WebSocket(o),this._disconnected=!1,this._socket.onmessage=function(e){var t;try{t=JSON.parse(e.data),i.default.log("Server message received:",t)}catch(o){return void i.default.log("Invalid server message",e.data)}n.emit(c.SocketEventType.Message,t)},this._socket.onclose=function(e){n._disconnected||(i.default.log("Socket closed.",e),n._cleanup(),n._disconnected=!0,n.emit(c.SocketEventType.Disconnected))},this._socket.onopen=function(){n._disconnected||(n._sendQueuedMessages(),i.default.log("Socket open"),n._scheduleHeartbeat())})},r.prototype._scheduleHeartbeat=function(){var e=this;this._wsPingTimer=setTimeout(function(){e._sendHeartbeat()},this.pingInterval)},r.prototype._sendHeartbeat=function(){if(this._wsOpen()){var e=JSON.stringify({type:c.ServerMessageType.Heartbeat});this._socket.send(e),this._scheduleHeartbeat()}else i.default.log("Cannot send heartbeat, because socket closed")},r.prototype._wsOpen=function(){return!!this._socket&&1===this._socket.readyState},r.prototype._sendQueuedMessages=function(){var e,s,r=n([],t(this._messagesQueue));this._messagesQueue=[];try{for(var i=o(r),c=i.next();!c.done;c=i.next()){var a=c.value;this.send(a)}}catch(u){e={error:u}}finally{try{c&&!c.done&&(s=i.return)&&s.call(i)}finally{if(e)throw e.error}}},r.prototype.send=function(e){if(!this._disconnected)if(this._id)if(e.type){if(this._wsOpen()){var t=JSON.stringify(e);this._socket.send(t)}}else this.emit(c.SocketEventType.Error,"Invalid message");else this._messagesQueue.push(e)},r.prototype.close=function(){this._disconnected||(this._cleanup(),this._disconnected=!0)},r.prototype._cleanup=function(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)},r}(r.EventEmitter);exports.Socket=a;
},{"eventemitter3":"JJlS","./logger":"WOs9","./enums":"ZRYf"}],"HCdX":[function(require,module,exports) {
"use strict";var e=this&&this.__assign||function(){return(e=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e}).apply(this,arguments)},n=this&&this.__awaiter||function(e,n,t,o){return new(t||(t=Promise))(function(i,r){function c(e){try{s(o.next(e))}catch(n){r(n)}}function a(e){try{s(o.throw(e))}catch(n){r(n)}}function s(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(c,a)}s((o=o.apply(e,n||[])).next())})},t=this&&this.__generator||function(e,n){var t,o,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(t)throw new TypeError("Generator is already executing.");for(;c;)try{if(t=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,o=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=n.call(e,c)}catch(a){r=[6,a],o=0}finally{t=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Negotiator=void 0;var i=require("./util"),r=o(require("./logger")),c=require("./enums"),a=function(){function o(e){this.connection=e}return o.prototype.startConnection=function(e){var n=this._startPeerConnection();if(this.connection.peerConnection=n,this.connection.type===c.ConnectionType.Media&&e._stream&&this._addTracksToConnection(e._stream,n),e.originator){if(this.connection.type===c.ConnectionType.Data){var t=this.connection,o={ordered:!!e.reliable},i=n.createDataChannel(t.label,o);t.initialize(i)}this._makeOffer()}else this.handleSDP("OFFER",e.sdp)},o.prototype._startPeerConnection=function(){r.default.log("Creating RTCPeerConnection.");var e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e},o.prototype._setupListeners=function(e){var n=this,t=this.connection.peer,o=this.connection.connectionId,a=this.connection.type,s=this.connection.provider;r.default.log("Listening for ICE candidates."),e.onicecandidate=function(e){e.candidate&&e.candidate.candidate&&(r.default.log("Received ICE candidates for "+t+":",e.candidate),s.socket.send({type:c.ServerMessageType.Candidate,payload:{candidate:e.candidate,type:a,connectionId:o},dst:t}))},e.oniceconnectionstatechange=function(){switch(e.iceConnectionState){case"failed":r.default.log("iceConnectionState is failed, closing connections to "+t),n.connection.emit(c.ConnectionEventType.Error,new Error("Negotiation of connection to "+t+" failed.")),n.connection.close();break;case"closed":r.default.log("iceConnectionState is closed, closing connections to "+t),n.connection.emit(c.ConnectionEventType.Error,new Error("Connection to "+t+" closed.")),n.connection.close();break;case"disconnected":r.default.log("iceConnectionState changed to disconnected on the connection with "+t);break;case"completed":e.onicecandidate=i.util.noop}n.connection.emit(c.ConnectionEventType.IceStateChanged,e.iceConnectionState)},r.default.log("Listening for data channel"),e.ondatachannel=function(e){r.default.log("Received data channel");var n=e.channel;s.getConnection(t,o).initialize(n)},r.default.log("Listening for remote stream"),e.ontrack=function(e){r.default.log("Received remote stream");var i=e.streams[0],a=s.getConnection(t,o);if(a.type===c.ConnectionType.Media){var d=a;n._addStreamToMediaConnection(i,d)}}},o.prototype.cleanup=function(){r.default.log("Cleaning up PeerConnection to "+this.connection.peer);var e=this.connection.peerConnection;if(e){this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=function(){};var n="closed"!==e.signalingState,t=!1;if(this.connection.type===c.ConnectionType.Data){var o=this.connection.dataChannel;o&&(t=!!o.readyState&&"closed"!==o.readyState)}(n||t)&&e.close()}},o.prototype._makeOffer=function(){return n(this,void 0,Promise,function(){var n,o,a,s,d,l,u;return t(this,function(t){switch(t.label){case 0:n=this.connection.peerConnection,o=this.connection.provider,t.label=1;case 1:return t.trys.push([1,7,,8]),[4,n.createOffer(this.connection.options.constraints)];case 2:a=t.sent(),r.default.log("Created offer."),this.connection.options.sdpTransform&&"function"==typeof this.connection.options.sdpTransform&&(a.sdp=this.connection.options.sdpTransform(a.sdp)||a.sdp),t.label=3;case 3:return t.trys.push([3,5,,6]),[4,n.setLocalDescription(a)];case 4:return t.sent(),r.default.log("Set localDescription:",a,"for:"+this.connection.peer),s={sdp:a,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata,browser:i.util.browser},this.connection.type===c.ConnectionType.Data&&(d=this.connection,s=e(e({},s),{label:d.label,reliable:d.reliable,serialization:d.serialization})),o.socket.send({type:c.ServerMessageType.Offer,payload:s,dst:this.connection.peer}),[3,6];case 5:return"OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"!=(l=t.sent())&&(o.emitError(c.PeerErrorType.WebRTC,l),r.default.log("Failed to setLocalDescription, ",l)),[3,6];case 6:return[3,8];case 7:return u=t.sent(),o.emitError(c.PeerErrorType.WebRTC,u),r.default.log("Failed to createOffer, ",u),[3,8];case 8:return[2]}})})},o.prototype._makeAnswer=function(){return n(this,void 0,Promise,function(){var e,n,o,a,s;return t(this,function(t){switch(t.label){case 0:e=this.connection.peerConnection,n=this.connection.provider,t.label=1;case 1:return t.trys.push([1,7,,8]),[4,e.createAnswer()];case 2:o=t.sent(),r.default.log("Created answer."),this.connection.options.sdpTransform&&"function"==typeof this.connection.options.sdpTransform&&(o.sdp=this.connection.options.sdpTransform(o.sdp)||o.sdp),t.label=3;case 3:return t.trys.push([3,5,,6]),[4,e.setLocalDescription(o)];case 4:return t.sent(),r.default.log("Set localDescription:",o,"for:"+this.connection.peer),n.socket.send({type:c.ServerMessageType.Answer,payload:{sdp:o,type:this.connection.type,connectionId:this.connection.connectionId,browser:i.util.browser},dst:this.connection.peer}),[3,6];case 5:return a=t.sent(),n.emitError(c.PeerErrorType.WebRTC,a),r.default.log("Failed to setLocalDescription, ",a),[3,6];case 6:return[3,8];case 7:return s=t.sent(),n.emitError(c.PeerErrorType.WebRTC,s),r.default.log("Failed to create answer, ",s),[3,8];case 8:return[2]}})})},o.prototype.handleSDP=function(e,o){return n(this,void 0,Promise,function(){var n,i,a,s;return t(this,function(t){switch(t.label){case 0:o=new RTCSessionDescription(o),n=this.connection.peerConnection,i=this.connection.provider,r.default.log("Setting remote description",o),a=this,t.label=1;case 1:return t.trys.push([1,5,,6]),[4,n.setRemoteDescription(o)];case 2:return t.sent(),r.default.log("Set remoteDescription:"+e+" for:"+this.connection.peer),"OFFER"!==e?[3,4]:[4,a._makeAnswer()];case 3:t.sent(),t.label=4;case 4:return[3,6];case 5:return s=t.sent(),i.emitError(c.PeerErrorType.WebRTC,s),r.default.log("Failed to setRemoteDescription, ",s),[3,6];case 6:return[2]}})})},o.prototype.handleCandidate=function(e){return n(this,void 0,Promise,function(){var n,o,i,a,s,d;return t(this,function(t){switch(t.label){case 0:r.default.log("handleCandidate:",e),n=e.candidate,o=e.sdpMLineIndex,i=e.sdpMid,a=this.connection.peerConnection,s=this.connection.provider,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,a.addIceCandidate(new RTCIceCandidate({sdpMid:i,sdpMLineIndex:o,candidate:n}))];case 2:return t.sent(),r.default.log("Added ICE candidate for:"+this.connection.peer),[3,4];case 3:return d=t.sent(),s.emitError(c.PeerErrorType.WebRTC,d),r.default.log("Failed to handleCandidate, ",d),[3,4];case 4:return[2]}})})},o.prototype._addTracksToConnection=function(e,n){if(r.default.log("add tracks from stream "+e.id+" to peer connection"),!n.addTrack)return r.default.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach(function(t){n.addTrack(t,e)})},o.prototype._addStreamToMediaConnection=function(e,n){r.default.log("add stream "+e.id+" to media connection "+n.connectionId),n.addStream(e)},o}();exports.Negotiator=a;
},{"./util":"BHXf","./logger":"WOs9","./enums":"ZRYf"}],"tQFK":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.BaseConnection=void 0;var e=require("eventemitter3"),n=function(e){function n(t,n,o){var r=e.call(this)||this;return r.peer=t,r.provider=n,r.options=o,r._open=!1,r.metadata=o.metadata,r}return t(n,e),Object.defineProperty(n.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),n}(e.EventEmitter);exports.BaseConnection=n;
},{"eventemitter3":"JJlS"}],"dbHP":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),t=this&&this.__assign||function(){return(t=Object.assign||function(e){for(var t,o=1,r=arguments.length;o<r;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,o=t&&e[t],r=0;if(o)return o.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.MediaConnection=void 0;var n=require("./util"),i=r(require("./logger")),a=require("./negotiator"),s=require("./enums"),l=require("./baseconnection"),c=function(r){function l(e,t,o){var i=r.call(this,e,t,o)||this;return i._localStream=i.options._stream,i.connectionId=i.options.connectionId||l.ID_PREFIX+n.util.randomToken(),i._negotiator=new a.Negotiator(i),i._localStream&&i._negotiator.startConnection({_stream:i._localStream,originator:!0}),i}return e(l,r),Object.defineProperty(l.prototype,"type",{get:function(){return s.ConnectionType.Media},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"localStream",{get:function(){return this._localStream},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"remoteStream",{get:function(){return this._remoteStream},enumerable:!1,configurable:!0}),l.prototype.addStream=function(e){i.default.log("Receiving stream",e),this._remoteStream=e,r.prototype.emit.call(this,s.ConnectionEventType.Stream,e)},l.prototype.handleMessage=function(e){var t=e.type,o=e.payload;switch(e.type){case s.ServerMessageType.Answer:this._negotiator.handleSDP(t,o.sdp),this._open=!0;break;case s.ServerMessageType.Candidate:this._negotiator.handleCandidate(o.candidate);break;default:i.default.warn("Unrecognized message type:"+t+" from peer:"+this.peer)}},l.prototype.answer=function(e,r){var n,a;if(void 0===r&&(r={}),this._localStream)i.default.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");else{this._localStream=e,r&&r.sdpTransform&&(this.options.sdpTransform=r.sdpTransform),this._negotiator.startConnection(t(t({},this.options._payload),{_stream:e}));var s=this.provider._getMessages(this.connectionId);try{for(var l=o(s),c=l.next();!c.done;c=l.next()){var p=c.value;this.handleMessage(p)}}catch(u){n={error:u}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(n)throw n.error}}this._open=!0}},l.prototype.close=function(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,r.prototype.emit.call(this,s.ConnectionEventType.Close))},l.ID_PREFIX="mc_",l}(l.BaseConnection);exports.MediaConnection=c;
},{"./util":"BHXf","./logger":"WOs9","./negotiator":"HCdX","./enums":"ZRYf","./baseconnection":"tQFK"}],"GGp6":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),t=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.EncodingQueue=void 0;var r=require("eventemitter3"),o=t(require("./logger")),n=function(t){function r(){var e=t.call(this)||this;return e.fileReader=new FileReader,e._queue=[],e._processing=!1,e.fileReader.onload=function(t){e._processing=!1,t.target&&e.emit("done",t.target.result),e.doNextTask()},e.fileReader.onerror=function(t){o.default.error("EncodingQueue error:",t),e._processing=!1,e.destroy(),e.emit("error",t)},e}return e(r,t),Object.defineProperty(r.prototype,"queue",{get:function(){return this._queue},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"size",{get:function(){return this.queue.length},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"processing",{get:function(){return this._processing},enumerable:!1,configurable:!0}),r.prototype.enque=function(e){this.queue.push(e),this.processing||this.doNextTask()},r.prototype.destroy=function(){this.fileReader.abort(),this._queue=[]},r.prototype.doNextTask=function(){0!==this.size&&(this.processing||(this._processing=!0,this.fileReader.readAsArrayBuffer(this.queue.shift())))},r}(r.EventEmitter);exports.EncodingQueue=n;
},{"eventemitter3":"JJlS","./logger":"WOs9"}],"GBTQ":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),t=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.DataConnection=void 0;var i=require("./util"),o=n(require("./logger")),r=require("./negotiator"),a=require("./enums"),s=require("./baseconnection"),u=require("./encodingQueue"),l=function(n){function s(e,t,l){var f=n.call(this,e,t,l)||this;return f.stringify=JSON.stringify,f.parse=JSON.parse,f._buffer=[],f._bufferSize=0,f._buffering=!1,f._chunkedData={},f._encodingQueue=new u.EncodingQueue,f.connectionId=f.options.connectionId||s.ID_PREFIX+i.util.randomToken(),f.label=f.options.label||f.connectionId,f.serialization=f.options.serialization||a.SerializationType.Binary,f.reliable=!!f.options.reliable,f._encodingQueue.on("done",function(e){f._bufferedSend(e)}),f._encodingQueue.on("error",function(){o.default.error("DC#"+f.connectionId+": Error occured in encoding from blob to arraybuffer, close DC"),f.close()}),f._negotiator=new r.Negotiator(f),f._negotiator.startConnection(f.options._payload||{originator:!0}),f}return e(s,n),Object.defineProperty(s.prototype,"type",{get:function(){return a.ConnectionType.Data},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"dataChannel",{get:function(){return this._dc},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"bufferSize",{get:function(){return this._bufferSize},enumerable:!1,configurable:!0}),s.prototype.initialize=function(e){this._dc=e,this._configureDataChannel()},s.prototype._configureDataChannel=function(){var e=this;i.util.supports.binaryBlob&&!i.util.supports.reliable||(this.dataChannel.binaryType="arraybuffer"),this.dataChannel.onopen=function(){o.default.log("DC#"+e.connectionId+" dc connection success"),e._open=!0,e.emit(a.ConnectionEventType.Open)},this.dataChannel.onmessage=function(t){o.default.log("DC#"+e.connectionId+" dc onmessage:",t.data),e._handleDataMessage(t)},this.dataChannel.onclose=function(){o.default.log("DC#"+e.connectionId+" dc closed for:",e.peer),e.close()}},s.prototype._handleDataMessage=function(e){var t=this,o=e.data,r=o.constructor,s=o;if(this.serialization===a.SerializationType.Binary||this.serialization===a.SerializationType.BinaryUTF8){if(r===Blob)return void i.util.blobToArrayBuffer(o,function(e){var n=i.util.unpack(e);t.emit(a.ConnectionEventType.Data,n)});if(r===ArrayBuffer)s=i.util.unpack(o);else if(r===String){var u=i.util.binaryStringToArrayBuffer(o);s=i.util.unpack(u)}}else this.serialization===a.SerializationType.JSON&&(s=this.parse(o));s.__peerData?this._handleChunk(s):n.prototype.emit.call(this,a.ConnectionEventType.Data,s)},s.prototype._handleChunk=function(e){var t=e.__peerData,n=this._chunkedData[t]||{data:[],count:0,total:e.total};if(n.data[e.n]=e.data,n.count++,this._chunkedData[t]=n,n.total===n.count){delete this._chunkedData[t];var i=new Blob(n.data);this._handleDataMessage({data:i})}},s.prototype.close=function(){this._buffer=[],this._bufferSize=0,this._chunkedData={},this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this._dc=null),this._encodingQueue&&(this._encodingQueue.destroy(),this._encodingQueue.removeAllListeners(),this._encodingQueue=null),this.open&&(this._open=!1,n.prototype.emit.call(this,a.ConnectionEventType.Close))},s.prototype.send=function(e,t){if(this.open)if(this.serialization===a.SerializationType.JSON)this._bufferedSend(this.stringify(e));else if(this.serialization===a.SerializationType.Binary||this.serialization===a.SerializationType.BinaryUTF8){var o=i.util.pack(e);if(!t&&o.size>i.util.chunkedMTU)return void this._sendChunks(o);i.util.supports.binaryBlob?this._bufferedSend(o):this._encodingQueue.enque(o)}else this._bufferedSend(e);else n.prototype.emit.call(this,a.ConnectionEventType.Error,new Error("Connection is not open. You should listen for the `open` event before sending messages."))},s.prototype._bufferedSend=function(e){!this._buffering&&this._trySend(e)||(this._buffer.push(e),this._bufferSize=this._buffer.length)},s.prototype._trySend=function(e){var t=this;if(!this.open)return!1;if(this.dataChannel.bufferedAmount>s.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(function(){t._buffering=!1,t._tryBuffer()},50),!1;try{this.dataChannel.send(e)}catch(n){return o.default.error("DC#:"+this.connectionId+" Error when sending:",n),this._buffering=!0,this.close(),!1}return!0},s.prototype._tryBuffer=function(){if(this.open&&0!==this._buffer.length){var e=this._buffer[0];this._trySend(e)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}},s.prototype._sendChunks=function(e){var n,r,a=i.util.chunk(e);o.default.log("DC#"+this.connectionId+" Try to send "+a.length+" chunks...");try{for(var s=t(a),u=s.next();!u.done;u=s.next()){var l=u.value;this.send(l,!0)}}catch(f){n={error:f}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}},s.prototype.handleMessage=function(e){var t=e.payload;switch(e.type){case a.ServerMessageType.Answer:this._negotiator.handleSDP(e.type,t.sdp);break;case a.ServerMessageType.Candidate:this._negotiator.handleCandidate(t.candidate);break;default:o.default.warn("Unrecognized message type:",e.type,"from peer:",this.peer)}},s.ID_PREFIX="dc_",s.MAX_BUFFERED_AMOUNT=8388608,s}(s.BaseConnection);exports.DataConnection=l;
},{"./util":"BHXf","./logger":"WOs9","./negotiator":"HCdX","./enums":"ZRYf","./baseconnection":"tQFK","./encodingQueue":"GGp6"}],"in7L":[function(require,module,exports) {
"use strict";var t=this&&this.__awaiter||function(t,e,r,o){return new(r||(r=Promise))(function(n,s){function i(t){try{a(o.next(t))}catch(e){s(e)}}function u(t){try{a(o.throw(t))}catch(e){s(e)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(i,u)}a((o=o.apply(t,e||[])).next())})},e=this&&this.__generator||function(t,e){var r,o,n,s,i={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,o&&(n=2&s[0]?o.return:s[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,s[1])).done)return n;switch(o=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,o=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(n=(n=i.trys).length>0&&n[n.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){i.label=s[1];break}if(6===s[0]&&i.label<n[1]){i.label=n[1],n=s;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(s);break}n[2]&&i.ops.pop(),i.trys.pop();continue}s=e.call(t,i)}catch(u){s=[6,u],o=0}finally{r=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.API=void 0;var o=require("./util"),n=r(require("./logger")),s=function(){function r(t){this._options=t}return r.prototype._buildUrl=function(t){var e=(this._options.secure?"https://":"http://")+this._options.host+":"+this._options.port+this._options.path+this._options.key+"/"+t;return e+="?ts="+(new Date).getTime()+Math.random()},r.prototype.retrieveId=function(){return t(this,void 0,Promise,function(){var t,r,s,i;return e(this,function(e){switch(e.label){case 0:t=this._buildUrl("id"),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,fetch(t)];case 2:if(200!==(r=e.sent()).status)throw new Error("Error. Status:"+r.status);return[2,r.text()];case 3:throw s=e.sent(),n.default.error("Error retrieving ID",s),i="","/"===this._options.path&&this._options.host!==o.util.CLOUD_HOST&&(i=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+i);case 4:return[2]}})})},r.prototype.listAllPeers=function(){return t(this,void 0,Promise,function(){var t,r,s,i;return e(this,function(e){switch(e.label){case 0:t=this._buildUrl("peers"),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,fetch(t)];case 2:if(200!==(r=e.sent()).status){if(401===r.status)throw s="",s=this._options.host===o.util.CLOUD_HOST?"It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":"You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+s);throw new Error("Error. Status:"+r.status)}return[2,r.json()];case 3:throw i=e.sent(),n.default.error("Error retrieving list peers",i),new Error("Could not get list peers from the server."+i);case 4:return[2]}})})},r}();exports.API=s;
},{"./util":"BHXf","./logger":"WOs9"}],"Hxpd":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),t=this&&this.__assign||function(){return(t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(a){o={error:a}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Peer=void 0;var i=require("eventemitter3"),s=require("./util"),a=o(require("./logger")),c=require("./socket"),l=require("./mediaconnection"),u=require("./dataconnection"),d=require("./enums"),p=require("./api"),h=function(){return function(){}}(),f=function(o){function i(e,n){var r,c=o.call(this)||this;return c._id=null,c._lastServerId=null,c._destroyed=!1,c._disconnected=!1,c._open=!1,c._connections=new Map,c._lostMessages=new Map,e&&e.constructor==Object?n=e:e&&(r=e.toString()),n=t({debug:0,host:s.util.CLOUD_HOST,port:s.util.CLOUD_PORT,path:"/",key:i.DEFAULT_KEY,token:s.util.randomToken(),config:s.util.defaultConfig},n),c._options=n,"/"===c._options.host&&(c._options.host=window.location.hostname),c._options.path&&("/"!==c._options.path[0]&&(c._options.path="/"+c._options.path),"/"!==c._options.path[c._options.path.length-1]&&(c._options.path+="/")),void 0===c._options.secure&&c._options.host!==s.util.CLOUD_HOST?c._options.secure=s.util.isSecure():c._options.host==s.util.CLOUD_HOST&&(c._options.secure=!0),c._options.logFunction&&a.default.setLogFunction(c._options.logFunction),a.default.logLevel=c._options.debug||0,c._api=new p.API(n),c._socket=c._createServerConnection(),s.util.supports.audioVideo||s.util.supports.data?r&&!s.util.validateId(r)?(c._delayedAbort(d.PeerErrorType.InvalidID,'ID "'+r+'" is invalid'),c):(r?c._initialize(r):c._api.retrieveId().then(function(e){return c._initialize(e)}).catch(function(e){return c._abort(d.PeerErrorType.ServerError,e)}),c):(c._delayedAbort(d.PeerErrorType.BrowserIncompatible,"The current browser does not support WebRTC"),c)}return e(i,o),Object.defineProperty(i.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"socket",{get:function(){return this._socket},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"connections",{get:function(){var e,t,o=Object.create(null);try{for(var i=n(this._connections),s=i.next();!s.done;s=i.next()){var a=r(s.value,2),c=a[0],l=a[1];o[c]=l}}catch(u){e={error:u}}finally{try{s&&!s.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return o},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"disconnected",{get:function(){return this._disconnected},enumerable:!1,configurable:!0}),i.prototype._createServerConnection=function(){var e=this,t=new c.Socket(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return t.on(d.SocketEventType.Message,function(t){e._handleMessage(t)}),t.on(d.SocketEventType.Error,function(t){e._abort(d.PeerErrorType.SocketError,t)}),t.on(d.SocketEventType.Disconnected,function(){e.disconnected||(e.emitError(d.PeerErrorType.Network,"Lost connection to server."),e.disconnect())}),t.on(d.SocketEventType.Close,function(){e.disconnected||e._abort(d.PeerErrorType.SocketClosed,"Underlying socket is already closed.")}),t},i.prototype._initialize=function(e){this._id=e,this.socket.start(e,this._options.token)},i.prototype._handleMessage=function(e){var t,r,o=e.type,i=e.payload,s=e.src;switch(o){case d.ServerMessageType.Open:this._lastServerId=this.id,this._open=!0,this.emit(d.PeerEventType.Open,this.id);break;case d.ServerMessageType.Error:this._abort(d.PeerErrorType.ServerError,i.msg);break;case d.ServerMessageType.IdTaken:this._abort(d.PeerErrorType.UnavailableID,'ID "'+this.id+'" is taken');break;case d.ServerMessageType.InvalidKey:this._abort(d.PeerErrorType.InvalidKey,'API KEY "'+this._options.key+'" is invalid');break;case d.ServerMessageType.Leave:a.default.log("Received leave message from "+s),this._cleanupPeer(s),this._connections.delete(s);break;case d.ServerMessageType.Expire:this.emitError(d.PeerErrorType.PeerUnavailable,"Could not connect to peer "+s);break;case d.ServerMessageType.Offer:var c=i.connectionId;if((_=this.getConnection(s,c))&&(_.close(),a.default.warn("Offer received for existing Connection ID:"+c)),i.type===d.ConnectionType.Media)_=new l.MediaConnection(s,this,{connectionId:c,_payload:i,metadata:i.metadata}),this._addConnection(s,_),this.emit(d.PeerEventType.Call,_);else{if(i.type!==d.ConnectionType.Data)return void a.default.warn("Received malformed connection type:"+i.type);_=new u.DataConnection(s,this,{connectionId:c,_payload:i,metadata:i.metadata,label:i.label,serialization:i.serialization,reliable:i.reliable}),this._addConnection(s,_),this.emit(d.PeerEventType.Connection,_)}var p=this._getMessages(c);try{for(var h=n(p),f=h.next();!f.done;f=h.next()){var y=f.value;_.handleMessage(y)}}catch(v){t={error:v}}finally{try{f&&!f.done&&(r=h.return)&&r.call(h)}finally{if(t)throw t.error}}break;default:if(!i)return void a.default.warn("You received a malformed message from "+s+" of type "+o);var _;c=i.connectionId;(_=this.getConnection(s,c))&&_.peerConnection?_.handleMessage(e):c?this._storeMessage(c,e):a.default.warn("You received an unrecognized message:",e)}},i.prototype._storeMessage=function(e,t){this._lostMessages.has(e)||this._lostMessages.set(e,[]),this._lostMessages.get(e).push(t)},i.prototype._getMessages=function(e){var t=this._lostMessages.get(e);return t?(this._lostMessages.delete(e),t):[]},i.prototype.connect=function(e,t){if(void 0===t&&(t={}),this.disconnected)return a.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),void this.emitError(d.PeerErrorType.Disconnected,"Cannot connect to new Peer after disconnecting from server.");var n=new u.DataConnection(e,this,t);return this._addConnection(e,n),n},i.prototype.call=function(e,t,n){if(void 0===n&&(n={}),this.disconnected)return a.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),void this.emitError(d.PeerErrorType.Disconnected,"Cannot connect to new Peer after disconnecting from server.");if(t){n._stream=t;var r=new l.MediaConnection(e,this,n);return this._addConnection(e,r),r}a.default.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.")},i.prototype._addConnection=function(e,t){a.default.log("add connection "+t.type+":"+t.connectionId+" to peerId:"+e),this._connections.has(e)||this._connections.set(e,[]),this._connections.get(e).push(t)},i.prototype._removeConnection=function(e){var t=this._connections.get(e.peer);if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}this._lostMessages.delete(e.connectionId)},i.prototype.getConnection=function(e,t){var r,o,i=this._connections.get(e);if(!i)return null;try{for(var s=n(i),a=s.next();!a.done;a=s.next()){var c=a.value;if(c.connectionId===t)return c}}catch(l){r={error:l}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(r)throw r.error}}return null},i.prototype._delayedAbort=function(e,t){var n=this;setTimeout(function(){n._abort(e,t)},0)},i.prototype._abort=function(e,t){a.default.error("Aborting!"),this.emitError(e,t),this._lastServerId?this.disconnect():this.destroy()},i.prototype.emitError=function(e,t){var n;a.default.error("Error:",t),(n="string"==typeof t?new Error(t):t).type=e,this.emit(d.PeerEventType.Error,n)},i.prototype.destroy=function(){this.destroyed||(a.default.log("Destroy peer with ID:"+this.id),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit(d.PeerEventType.Close))},i.prototype._cleanup=function(){var e,t;try{for(var r=n(this._connections.keys()),o=r.next();!o.done;o=r.next()){var i=o.value;this._cleanupPeer(i),this._connections.delete(i)}}catch(s){e={error:s}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}this.socket.removeAllListeners()},i.prototype._cleanupPeer=function(e){var t,r,o=this._connections.get(e);if(o)try{for(var i=n(o),s=i.next();!s.done;s=i.next()){s.value.close()}}catch(a){t={error:a}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},i.prototype.disconnect=function(){if(!this.disconnected){var e=this.id;a.default.log("Disconnect peer with ID:"+e),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=e,this._id=null,this.emit(d.PeerEventType.Disconnected,e)}},i.prototype.reconnect=function(){if(this.disconnected&&!this.destroyed)a.default.log("Attempting reconnection to server with ID "+this._lastServerId),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(this.disconnected||this.open)throw new Error("Peer "+this.id+" cannot reconnect because it is not disconnected from the server!");a.default.error("In a hurry? We're still trying to make the initial connection!")}},i.prototype.listAllPeers=function(e){var t=this;void 0===e&&(e=function(e){}),this._api.listAllPeers().then(function(t){return e(t)}).catch(function(e){return t._abort(d.PeerErrorType.ServerError,e)})},i.DEFAULT_KEY="peerjs",i}(i.EventEmitter);exports.Peer=f;
},{"eventemitter3":"JJlS","./util":"BHXf","./logger":"WOs9","./socket":"wJlv","./mediaconnection":"dbHP","./dataconnection":"GBTQ","./enums":"ZRYf","./api":"in7L"}],"iTK6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.peerjs=void 0;var e=require("./util"),r=require("./peer");exports.peerjs={Peer:r.Peer,util:e.util},exports.default=r.Peer,window.peerjs=exports.peerjs,window.Peer=r.Peer;
},{"./util":"BHXf","./peer":"Hxpd"}]},{},["iTK6"], null)
//# sourceMappingURL=/peerjs.min.js.map

/***/ }),

/***/ "./node_modules/peerjs/dist sync recursive":
/*!****************************************!*\
  !*** ./node_modules/peerjs/dist/ sync ***!
  \****************************************/
/***/ ((module) => {

function webpackEmptyContext(req) {
	var e = new Error("Cannot find module '" + req + "'");
	e.code = 'MODULE_NOT_FOUND';
	throw e;
}
webpackEmptyContext.keys = () => ([]);
webpackEmptyContext.resolve = webpackEmptyContext;
webpackEmptyContext.id = "./node_modules/peerjs/dist sync recursive";
module.exports = webpackEmptyContext;

/***/ }),

/***/ "./node_modules/socket.io-client/build/index.js":
/*!******************************************************!*\
  !*** ./node_modules/socket.io-client/build/index.js ***!
  \******************************************************/
/***/ ((module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.io = exports.Socket = exports.Manager = exports.protocol = void 0;
const url_1 = __webpack_require__(/*! ./url */ "./node_modules/socket.io-client/build/url.js");
const manager_1 = __webpack_require__(/*! ./manager */ "./node_modules/socket.io-client/build/manager.js");
const debug = __webpack_require__(/*! debug */ "./node_modules/socket.io-client/node_modules/debug/src/browser.js")("socket.io-client");
/**
 * Module exports.
 */
module.exports = exports = lookup;
/**
 * Managers cache.
 */
const cache = (exports.managers = {});
function lookup(uri, opts) {
    if (typeof uri === "object") {
        opts = uri;
        uri = undefined;
    }
    opts = opts || {};
    const parsed = url_1.url(uri, opts.path || "/socket.io");
    const source = parsed.source;
    const id = parsed.id;
    const path = parsed.path;
    const sameNamespace = cache[id] && path in cache[id]["nsps"];
    const newConnection = opts.forceNew ||
        opts["force new connection"] ||
        false === opts.multiplex ||
        sameNamespace;
    let io;
    if (newConnection) {
        debug("ignoring socket cache for %s", source);
        io = new manager_1.Manager(source, opts);
    }
    else {
        if (!cache[id]) {
            debug("new io instance for %s", source);
            cache[id] = new manager_1.Manager(source, opts);
        }
        io = cache[id];
    }
    if (parsed.query && !opts.query) {
        opts.query = parsed.queryKey;
    }
    return io.socket(parsed.path, opts);
}
exports.io = lookup;
/**
 * Protocol version.
 *
 * @public
 */
var socket_io_parser_1 = __webpack_require__(/*! socket.io-parser */ "./node_modules/socket.io-parser/dist/index.js");
Object.defineProperty(exports, "protocol", ({ enumerable: true, get: function () { return socket_io_parser_1.protocol; } }));
/**
 * `connect`.
 *
 * @param {String} uri
 * @public
 */
exports.connect = lookup;
/**
 * Expose constructors for standalone build.
 *
 * @public
 */
var manager_2 = __webpack_require__(/*! ./manager */ "./node_modules/socket.io-client/build/manager.js");
Object.defineProperty(exports, "Manager", ({ enumerable: true, get: function () { return manager_2.Manager; } }));
var socket_1 = __webpack_require__(/*! ./socket */ "./node_modules/socket.io-client/build/socket.js");
Object.defineProperty(exports, "Socket", ({ enumerable: true, get: function () { return socket_1.Socket; } }));
exports.default = lookup;


/***/ }),

/***/ "./node_modules/socket.io-client/build/manager.js":
/*!********************************************************!*\
  !*** ./node_modules/socket.io-client/build/manager.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Manager = void 0;
const eio = __webpack_require__(/*! engine.io-client */ "./node_modules/engine.io-client/lib/index.js");
const socket_1 = __webpack_require__(/*! ./socket */ "./node_modules/socket.io-client/build/socket.js");
const parser = __webpack_require__(/*! socket.io-parser */ "./node_modules/socket.io-parser/dist/index.js");
const on_1 = __webpack_require__(/*! ./on */ "./node_modules/socket.io-client/build/on.js");
const Backoff = __webpack_require__(/*! backo2 */ "./node_modules/backo2/index.js");
const typed_events_1 = __webpack_require__(/*! ./typed-events */ "./node_modules/socket.io-client/build/typed-events.js");
const debug = __webpack_require__(/*! debug */ "./node_modules/socket.io-client/node_modules/debug/src/browser.js")("socket.io-client:manager");
class Manager extends typed_events_1.StrictEventEmitter {
    constructor(uri, opts) {
        super();
        this.nsps = {};
        this.subs = [];
        if (uri && "object" === typeof uri) {
            opts = uri;
            uri = undefined;
        }
        opts = opts || {};
        opts.path = opts.path || "/socket.io";
        this.opts = opts;
        this.reconnection(opts.reconnection !== false);
        this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);
        this.reconnectionDelay(opts.reconnectionDelay || 1000);
        this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);
        this.randomizationFactor(opts.randomizationFactor || 0.5);
        this.backoff = new Backoff({
            min: this.reconnectionDelay(),
            max: this.reconnectionDelayMax(),
            jitter: this.randomizationFactor(),
        });
        this.timeout(null == opts.timeout ? 20000 : opts.timeout);
        this._readyState = "closed";
        this.uri = uri;
        const _parser = opts.parser || parser;
        this.encoder = new _parser.Encoder();
        this.decoder = new _parser.Decoder();
        this._autoConnect = opts.autoConnect !== false;
        if (this._autoConnect)
            this.open();
    }
    reconnection(v) {
        if (!arguments.length)
            return this._reconnection;
        this._reconnection = !!v;
        return this;
    }
    reconnectionAttempts(v) {
        if (v === undefined)
            return this._reconnectionAttempts;
        this._reconnectionAttempts = v;
        return this;
    }
    reconnectionDelay(v) {
        var _a;
        if (v === undefined)
            return this._reconnectionDelay;
        this._reconnectionDelay = v;
        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMin(v);
        return this;
    }
    randomizationFactor(v) {
        var _a;
        if (v === undefined)
            return this._randomizationFactor;
        this._randomizationFactor = v;
        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setJitter(v);
        return this;
    }
    reconnectionDelayMax(v) {
        var _a;
        if (v === undefined)
            return this._reconnectionDelayMax;
        this._reconnectionDelayMax = v;
        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMax(v);
        return this;
    }
    timeout(v) {
        if (!arguments.length)
            return this._timeout;
        this._timeout = v;
        return this;
    }
    /**
     * Starts trying to reconnect if reconnection is enabled and we have not
     * started reconnecting yet
     *
     * @private
     */
    maybeReconnectOnOpen() {
        // Only try to reconnect if it's the first time we're connecting
        if (!this._reconnecting &&
            this._reconnection &&
            this.backoff.attempts === 0) {
            // keeps reconnection from firing twice for the same reconnection loop
            this.reconnect();
        }
    }
    /**
     * Sets the current transport `socket`.
     *
     * @param {Function} fn - optional, callback
     * @return self
     * @public
     */
    open(fn) {
        debug("readyState %s", this._readyState);
        if (~this._readyState.indexOf("open"))
            return this;
        debug("opening %s", this.uri);
        this.engine = eio(this.uri, this.opts);
        const socket = this.engine;
        const self = this;
        this._readyState = "opening";
        this.skipReconnect = false;
        // emit `open`
        const openSubDestroy = on_1.on(socket, "open", function () {
            self.onopen();
            fn && fn();
        });
        // emit `error`
        const errorSub = on_1.on(socket, "error", (err) => {
            debug("error");
            self.cleanup();
            self._readyState = "closed";
            this.emitReserved("error", err);
            if (fn) {
                fn(err);
            }
            else {
                // Only do this if there is no fn to handle the error
                self.maybeReconnectOnOpen();
            }
        });
        if (false !== this._timeout) {
            const timeout = this._timeout;
            debug("connect attempt will timeout after %d", timeout);
            if (timeout === 0) {
                openSubDestroy(); // prevents a race condition with the 'open' event
            }
            // set timer
            const timer = setTimeout(() => {
                debug("connect attempt timed out after %d", timeout);
                openSubDestroy();
                socket.close();
                socket.emit("error", new Error("timeout"));
            }, timeout);
            if (this.opts.autoUnref) {
                timer.unref();
            }
            this.subs.push(function subDestroy() {
                clearTimeout(timer);
            });
        }
        this.subs.push(openSubDestroy);
        this.subs.push(errorSub);
        return this;
    }
    /**
     * Alias for open()
     *
     * @return self
     * @public
     */
    connect(fn) {
        return this.open(fn);
    }
    /**
     * Called upon transport open.
     *
     * @private
     */
    onopen() {
        debug("open");
        // clear old subs
        this.cleanup();
        // mark as open
        this._readyState = "open";
        this.emitReserved("open");
        // add new subs
        const socket = this.engine;
        this.subs.push(on_1.on(socket, "ping", this.onping.bind(this)), on_1.on(socket, "data", this.ondata.bind(this)), on_1.on(socket, "error", this.onerror.bind(this)), on_1.on(socket, "close", this.onclose.bind(this)), on_1.on(this.decoder, "decoded", this.ondecoded.bind(this)));
    }
    /**
     * Called upon a ping.
     *
     * @private
     */
    onping() {
        this.emitReserved("ping");
    }
    /**
     * Called with data.
     *
     * @private
     */
    ondata(data) {
        this.decoder.add(data);
    }
    /**
     * Called when parser fully decodes a packet.
     *
     * @private
     */
    ondecoded(packet) {
        this.emitReserved("packet", packet);
    }
    /**
     * Called upon socket error.
     *
     * @private
     */
    onerror(err) {
        debug("error", err);
        this.emitReserved("error", err);
    }
    /**
     * Creates a new socket for the given `nsp`.
     *
     * @return {Socket}
     * @public
     */
    socket(nsp, opts) {
        let socket = this.nsps[nsp];
        if (!socket) {
            socket = new socket_1.Socket(this, nsp, opts);
            this.nsps[nsp] = socket;
        }
        return socket;
    }
    /**
     * Called upon a socket close.
     *
     * @param socket
     * @private
     */
    _destroy(socket) {
        const nsps = Object.keys(this.nsps);
        for (const nsp of nsps) {
            const socket = this.nsps[nsp];
            if (socket.active) {
                debug("socket %s is still active, skipping close", nsp);
                return;
            }
        }
        this._close();
    }
    /**
     * Writes a packet.
     *
     * @param packet
     * @private
     */
    _packet(packet) {
        debug("writing packet %j", packet);
        const encodedPackets = this.encoder.encode(packet);
        for (let i = 0; i < encodedPackets.length; i++) {
            this.engine.write(encodedPackets[i], packet.options);
        }
    }
    /**
     * Clean up transport subscriptions and packet buffer.
     *
     * @private
     */
    cleanup() {
        debug("cleanup");
        this.subs.forEach((subDestroy) => subDestroy());
        this.subs.length = 0;
        this.decoder.destroy();
    }
    /**
     * Close the current socket.
     *
     * @private
     */
    _close() {
        debug("disconnect");
        this.skipReconnect = true;
        this._reconnecting = false;
        if ("opening" === this._readyState) {
            // `onclose` will not fire because
            // an open event never happened
            this.cleanup();
        }
        this.backoff.reset();
        this._readyState = "closed";
        if (this.engine)
            this.engine.close();
    }
    /**
     * Alias for close()
     *
     * @private
     */
    disconnect() {
        return this._close();
    }
    /**
     * Called upon engine close.
     *
     * @private
     */
    onclose(reason) {
        debug("onclose");
        this.cleanup();
        this.backoff.reset();
        this._readyState = "closed";
        this.emitReserved("close", reason);
        if (this._reconnection && !this.skipReconnect) {
            this.reconnect();
        }
    }
    /**
     * Attempt a reconnection.
     *
     * @private
     */
    reconnect() {
        if (this._reconnecting || this.skipReconnect)
            return this;
        const self = this;
        if (this.backoff.attempts >= this._reconnectionAttempts) {
            debug("reconnect failed");
            this.backoff.reset();
            this.emitReserved("reconnect_failed");
            this._reconnecting = false;
        }
        else {
            const delay = this.backoff.duration();
            debug("will wait %dms before reconnect attempt", delay);
            this._reconnecting = true;
            const timer = setTimeout(() => {
                if (self.skipReconnect)
                    return;
                debug("attempting reconnect");
                this.emitReserved("reconnect_attempt", self.backoff.attempts);
                // check again for the case socket closed in above events
                if (self.skipReconnect)
                    return;
                self.open((err) => {
                    if (err) {
                        debug("reconnect attempt error");
                        self._reconnecting = false;
                        self.reconnect();
                        this.emitReserved("reconnect_error", err);
                    }
                    else {
                        debug("reconnect success");
                        self.onreconnect();
                    }
                });
            }, delay);
            if (this.opts.autoUnref) {
                timer.unref();
            }
            this.subs.push(function subDestroy() {
                clearTimeout(timer);
            });
        }
    }
    /**
     * Called upon successful reconnect.
     *
     * @private
     */
    onreconnect() {
        const attempt = this.backoff.attempts;
        this._reconnecting = false;
        this.backoff.reset();
        this.emitReserved("reconnect", attempt);
    }
}
exports.Manager = Manager;


/***/ }),

/***/ "./node_modules/socket.io-client/build/on.js":
/*!***************************************************!*\
  !*** ./node_modules/socket.io-client/build/on.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.on = void 0;
function on(obj, ev, fn) {
    obj.on(ev, fn);
    return function subDestroy() {
        obj.off(ev, fn);
    };
}
exports.on = on;


/***/ }),

/***/ "./node_modules/socket.io-client/build/socket.js":
/*!*******************************************************!*\
  !*** ./node_modules/socket.io-client/build/socket.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Socket = void 0;
const socket_io_parser_1 = __webpack_require__(/*! socket.io-parser */ "./node_modules/socket.io-parser/dist/index.js");
const on_1 = __webpack_require__(/*! ./on */ "./node_modules/socket.io-client/build/on.js");
const typed_events_1 = __webpack_require__(/*! ./typed-events */ "./node_modules/socket.io-client/build/typed-events.js");
const debug = __webpack_require__(/*! debug */ "./node_modules/socket.io-client/node_modules/debug/src/browser.js")("socket.io-client:socket");
/**
 * Internal events.
 * These events can't be emitted by the user.
 */
const RESERVED_EVENTS = Object.freeze({
    connect: 1,
    connect_error: 1,
    disconnect: 1,
    disconnecting: 1,
    // EventEmitter reserved events: https://nodejs.org/api/events.html#events_event_newlistener
    newListener: 1,
    removeListener: 1,
});
class Socket extends typed_events_1.StrictEventEmitter {
    /**
     * `Socket` constructor.
     *
     * @public
     */
    constructor(io, nsp, opts) {
        super();
        this.receiveBuffer = [];
        this.sendBuffer = [];
        this.ids = 0;
        this.acks = {};
        this.flags = {};
        this.io = io;
        this.nsp = nsp;
        this.ids = 0;
        this.acks = {};
        this.receiveBuffer = [];
        this.sendBuffer = [];
        this.connected = false;
        this.disconnected = true;
        this.flags = {};
        if (opts && opts.auth) {
            this.auth = opts.auth;
        }
        if (this.io._autoConnect)
            this.open();
    }
    /**
     * Subscribe to open, close and packet events
     *
     * @private
     */
    subEvents() {
        if (this.subs)
            return;
        const io = this.io;
        this.subs = [
            on_1.on(io, "open", this.onopen.bind(this)),
            on_1.on(io, "packet", this.onpacket.bind(this)),
            on_1.on(io, "error", this.onerror.bind(this)),
            on_1.on(io, "close", this.onclose.bind(this)),
        ];
    }
    /**
     * Whether the Socket will try to reconnect when its Manager connects or reconnects
     */
    get active() {
        return !!this.subs;
    }
    /**
     * "Opens" the socket.
     *
     * @public
     */
    connect() {
        if (this.connected)
            return this;
        this.subEvents();
        if (!this.io["_reconnecting"])
            this.io.open(); // ensure open
        if ("open" === this.io._readyState)
            this.onopen();
        return this;
    }
    /**
     * Alias for connect()
     */
    open() {
        return this.connect();
    }
    /**
     * Sends a `message` event.
     *
     * @return self
     * @public
     */
    send(...args) {
        args.unshift("message");
        this.emit.apply(this, args);
        return this;
    }
    /**
     * Override `emit`.
     * If the event is in `events`, it's emitted normally.
     *
     * @return self
     * @public
     */
    emit(ev, ...args) {
        if (RESERVED_EVENTS.hasOwnProperty(ev)) {
            throw new Error('"' + ev + '" is a reserved event name');
        }
        args.unshift(ev);
        const packet = {
            type: socket_io_parser_1.PacketType.EVENT,
            data: args,
        };
        packet.options = {};
        packet.options.compress = this.flags.compress !== false;
        // event ack callback
        if ("function" === typeof args[args.length - 1]) {
            debug("emitting packet with ack id %d", this.ids);
            this.acks[this.ids] = args.pop();
            packet.id = this.ids++;
        }
        const isTransportWritable = this.io.engine &&
            this.io.engine.transport &&
            this.io.engine.transport.writable;
        const discardPacket = this.flags.volatile && (!isTransportWritable || !this.connected);
        if (discardPacket) {
            debug("discard packet as the transport is not currently writable");
        }
        else if (this.connected) {
            this.packet(packet);
        }
        else {
            this.sendBuffer.push(packet);
        }
        this.flags = {};
        return this;
    }
    /**
     * Sends a packet.
     *
     * @param packet
     * @private
     */
    packet(packet) {
        packet.nsp = this.nsp;
        this.io._packet(packet);
    }
    /**
     * Called upon engine `open`.
     *
     * @private
     */
    onopen() {
        debug("transport is open - connecting");
        if (typeof this.auth == "function") {
            this.auth((data) => {
                this.packet({ type: socket_io_parser_1.PacketType.CONNECT, data });
            });
        }
        else {
            this.packet({ type: socket_io_parser_1.PacketType.CONNECT, data: this.auth });
        }
    }
    /**
     * Called upon engine or manager `error`.
     *
     * @param err
     * @private
     */
    onerror(err) {
        if (!this.connected) {
            this.emitReserved("connect_error", err);
        }
    }
    /**
     * Called upon engine `close`.
     *
     * @param reason
     * @private
     */
    onclose(reason) {
        debug("close (%s)", reason);
        this.connected = false;
        this.disconnected = true;
        delete this.id;
        this.emitReserved("disconnect", reason);
    }
    /**
     * Called with socket packet.
     *
     * @param packet
     * @private
     */
    onpacket(packet) {
        const sameNamespace = packet.nsp === this.nsp;
        if (!sameNamespace)
            return;
        switch (packet.type) {
            case socket_io_parser_1.PacketType.CONNECT:
                if (packet.data && packet.data.sid) {
                    const id = packet.data.sid;
                    this.onconnect(id);
                }
                else {
                    this.emitReserved("connect_error", new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));
                }
                break;
            case socket_io_parser_1.PacketType.EVENT:
                this.onevent(packet);
                break;
            case socket_io_parser_1.PacketType.BINARY_EVENT:
                this.onevent(packet);
                break;
            case socket_io_parser_1.PacketType.ACK:
                this.onack(packet);
                break;
            case socket_io_parser_1.PacketType.BINARY_ACK:
                this.onack(packet);
                break;
            case socket_io_parser_1.PacketType.DISCONNECT:
                this.ondisconnect();
                break;
            case socket_io_parser_1.PacketType.CONNECT_ERROR:
                const err = new Error(packet.data.message);
                // @ts-ignore
                err.data = packet.data.data;
                this.emitReserved("connect_error", err);
                break;
        }
    }
    /**
     * Called upon a server event.
     *
     * @param packet
     * @private
     */
    onevent(packet) {
        const args = packet.data || [];
        debug("emitting event %j", args);
        if (null != packet.id) {
            debug("attaching ack callback to event");
            args.push(this.ack(packet.id));
        }
        if (this.connected) {
            this.emitEvent(args);
        }
        else {
            this.receiveBuffer.push(Object.freeze(args));
        }
    }
    emitEvent(args) {
        if (this._anyListeners && this._anyListeners.length) {
            const listeners = this._anyListeners.slice();
            for (const listener of listeners) {
                listener.apply(this, args);
            }
        }
        super.emit.apply(this, args);
    }
    /**
     * Produces an ack callback to emit with an event.
     *
     * @private
     */
    ack(id) {
        const self = this;
        let sent = false;
        return function (...args) {
            // prevent double callbacks
            if (sent)
                return;
            sent = true;
            debug("sending ack %j", args);
            self.packet({
                type: socket_io_parser_1.PacketType.ACK,
                id: id,
                data: args,
            });
        };
    }
    /**
     * Called upon a server acknowlegement.
     *
     * @param packet
     * @private
     */
    onack(packet) {
        const ack = this.acks[packet.id];
        if ("function" === typeof ack) {
            debug("calling ack %s with %j", packet.id, packet.data);
            ack.apply(this, packet.data);
            delete this.acks[packet.id];
        }
        else {
            debug("bad ack %s", packet.id);
        }
    }
    /**
     * Called upon server connect.
     *
     * @private
     */
    onconnect(id) {
        debug("socket connected with id %s", id);
        this.id = id;
        this.connected = true;
        this.disconnected = false;
        this.emitBuffered();
        this.emitReserved("connect");
    }
    /**
     * Emit buffered events (received and emitted).
     *
     * @private
     */
    emitBuffered() {
        this.receiveBuffer.forEach((args) => this.emitEvent(args));
        this.receiveBuffer = [];
        this.sendBuffer.forEach((packet) => this.packet(packet));
        this.sendBuffer = [];
    }
    /**
     * Called upon server disconnect.
     *
     * @private
     */
    ondisconnect() {
        debug("server disconnect (%s)", this.nsp);
        this.destroy();
        this.onclose("io server disconnect");
    }
    /**
     * Called upon forced client/server side disconnections,
     * this method ensures the manager stops tracking us and
     * that reconnections don't get triggered for this.
     *
     * @private
     */
    destroy() {
        if (this.subs) {
            // clean subscriptions to avoid reconnections
            this.subs.forEach((subDestroy) => subDestroy());
            this.subs = undefined;
        }
        this.io["_destroy"](this);
    }
    /**
     * Disconnects the socket manually.
     *
     * @return self
     * @public
     */
    disconnect() {
        if (this.connected) {
            debug("performing disconnect (%s)", this.nsp);
            this.packet({ type: socket_io_parser_1.PacketType.DISCONNECT });
        }
        // remove socket from pool
        this.destroy();
        if (this.connected) {
            // fire events
            this.onclose("io client disconnect");
        }
        return this;
    }
    /**
     * Alias for disconnect()
     *
     * @return self
     * @public
     */
    close() {
        return this.disconnect();
    }
    /**
     * Sets the compress flag.
     *
     * @param compress - if `true`, compresses the sending data
     * @return self
     * @public
     */
    compress(compress) {
        this.flags.compress = compress;
        return this;
    }
    /**
     * Sets a modifier for a subsequent event emission that the event message will be dropped when this socket is not
     * ready to send messages.
     *
     * @returns self
     * @public
     */
    get volatile() {
        this.flags.volatile = true;
        return this;
    }
    /**
     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the
     * callback.
     *
     * @param listener
     * @public
     */
    onAny(listener) {
        this._anyListeners = this._anyListeners || [];
        this._anyListeners.push(listener);
        return this;
    }
    /**
     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the
     * callback. The listener is added to the beginning of the listeners array.
     *
     * @param listener
     * @public
     */
    prependAny(listener) {
        this._anyListeners = this._anyListeners || [];
        this._anyListeners.unshift(listener);
        return this;
    }
    /**
     * Removes the listener that will be fired when any event is emitted.
     *
     * @param listener
     * @public
     */
    offAny(listener) {
        if (!this._anyListeners) {
            return this;
        }
        if (listener) {
            const listeners = this._anyListeners;
            for (let i = 0; i < listeners.length; i++) {
                if (listener === listeners[i]) {
                    listeners.splice(i, 1);
                    return this;
                }
            }
        }
        else {
            this._anyListeners = [];
        }
        return this;
    }
    /**
     * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,
     * e.g. to remove listeners.
     *
     * @public
     */
    listenersAny() {
        return this._anyListeners || [];
    }
}
exports.Socket = Socket;


/***/ }),

/***/ "./node_modules/socket.io-client/build/typed-events.js":
/*!*************************************************************!*\
  !*** ./node_modules/socket.io-client/build/typed-events.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.StrictEventEmitter = void 0;
const Emitter = __webpack_require__(/*! component-emitter */ "./node_modules/component-emitter/index.js");
/**
 * Strictly typed version of an `EventEmitter`. A `TypedEventEmitter` takes type
 * parameters for mappings of event names to event data types, and strictly
 * types method calls to the `EventEmitter` according to these event maps.
 *
 * @typeParam ListenEvents - `EventsMap` of user-defined events that can be
 * listened to with `on` or `once`
 * @typeParam EmitEvents - `EventsMap` of user-defined events that can be
 * emitted with `emit`
 * @typeParam ReservedEvents - `EventsMap` of reserved events, that can be
 * emitted by socket.io with `emitReserved`, and can be listened to with
 * `listen`.
 */
class StrictEventEmitter extends Emitter {
    /**
     * Adds the `listener` function as an event listener for `ev`.
     *
     * @param ev Name of the event
     * @param listener Callback function
     */
    on(ev, listener) {
        super.on(ev, listener);
        return this;
    }
    /**
     * Adds a one-time `listener` function as an event listener for `ev`.
     *
     * @param ev Name of the event
     * @param listener Callback function
     */
    once(ev, listener) {
        super.once(ev, listener);
        return this;
    }
    /**
     * Emits an event.
     *
     * @param ev Name of the event
     * @param args Values to send to listeners of this event
     */
    emit(ev, ...args) {
        super.emit(ev, ...args);
        return this;
    }
    /**
     * Emits a reserved event.
     *
     * This method is `protected`, so that only a class extending
     * `StrictEventEmitter` can emit its own reserved events.
     *
     * @param ev Reserved event name
     * @param args Arguments to emit along with the event
     */
    emitReserved(ev, ...args) {
        super.emit(ev, ...args);
        return this;
    }
    /**
     * Returns the listeners listening to an event.
     *
     * @param event Event name
     * @returns Array of listeners subscribed to `event`
     */
    listeners(event) {
        return super.listeners(event);
    }
}
exports.StrictEventEmitter = StrictEventEmitter;


/***/ }),

/***/ "./node_modules/socket.io-client/build/url.js":
/*!****************************************************!*\
  !*** ./node_modules/socket.io-client/build/url.js ***!
  \****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.url = void 0;
const parseuri = __webpack_require__(/*! parseuri */ "./node_modules/parseuri/index.js");
const debug = __webpack_require__(/*! debug */ "./node_modules/socket.io-client/node_modules/debug/src/browser.js")("socket.io-client:url");
/**
 * URL parser.
 *
 * @param uri - url
 * @param path - the request path of the connection
 * @param loc - An object meant to mimic window.location.
 *        Defaults to window.location.
 * @public
 */
function url(uri, path = "", loc) {
    let obj = uri;
    // default to window.location
    loc = loc || (typeof location !== "undefined" && location);
    if (null == uri)
        uri = loc.protocol + "//" + loc.host;
    // relative path support
    if (typeof uri === "string") {
        if ("/" === uri.charAt(0)) {
            if ("/" === uri.charAt(1)) {
                uri = loc.protocol + uri;
            }
            else {
                uri = loc.host + uri;
            }
        }
        if (!/^(https?|wss?):\/\//.test(uri)) {
            debug("protocol-less url %s", uri);
            if ("undefined" !== typeof loc) {
                uri = loc.protocol + "//" + uri;
            }
            else {
                uri = "https://" + uri;
            }
        }
        // parse
        debug("parse %s", uri);
        obj = parseuri(uri);
    }
    // make sure we treat `localhost:80` and `localhost` equally
    if (!obj.port) {
        if (/^(http|ws)$/.test(obj.protocol)) {
            obj.port = "80";
        }
        else if (/^(http|ws)s$/.test(obj.protocol)) {
            obj.port = "443";
        }
    }
    obj.path = obj.path || "/";
    const ipv6 = obj.host.indexOf(":") !== -1;
    const host = ipv6 ? "[" + obj.host + "]" : obj.host;
    // define unique id
    obj.id = obj.protocol + "://" + host + ":" + obj.port + path;
    // define href
    obj.href =
        obj.protocol +
            "://" +
            host +
            (loc && loc.port === obj.port ? "" : ":" + obj.port);
    return obj;
}
exports.url = url;


/***/ }),

/***/ "./node_modules/socket.io-client/node_modules/debug/src/browser.js":
/*!*************************************************************************!*\
  !*** ./node_modules/socket.io-client/node_modules/debug/src/browser.js ***!
  \*************************************************************************/
/***/ ((module, exports, __webpack_require__) => {

/* eslint-env browser */

/**
 * This is the web browser implementation of `debug()`.
 */

exports.formatArgs = formatArgs;
exports.save = save;
exports.load = load;
exports.useColors = useColors;
exports.storage = localstorage();
exports.destroy = (() => {
	let warned = false;

	return () => {
		if (!warned) {
			warned = true;
			console.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');
		}
	};
})();

/**
 * Colors.
 */

exports.colors = [
	'#0000CC',
	'#0000FF',
	'#0033CC',
	'#0033FF',
	'#0066CC',
	'#0066FF',
	'#0099CC',
	'#0099FF',
	'#00CC00',
	'#00CC33',
	'#00CC66',
	'#00CC99',
	'#00CCCC',
	'#00CCFF',
	'#3300CC',
	'#3300FF',
	'#3333CC',
	'#3333FF',
	'#3366CC',
	'#3366FF',
	'#3399CC',
	'#3399FF',
	'#33CC00',
	'#33CC33',
	'#33CC66',
	'#33CC99',
	'#33CCCC',
	'#33CCFF',
	'#6600CC',
	'#6600FF',
	'#6633CC',
	'#6633FF',
	'#66CC00',
	'#66CC33',
	'#9900CC',
	'#9900FF',
	'#9933CC',
	'#9933FF',
	'#99CC00',
	'#99CC33',
	'#CC0000',
	'#CC0033',
	'#CC0066',
	'#CC0099',
	'#CC00CC',
	'#CC00FF',
	'#CC3300',
	'#CC3333',
	'#CC3366',
	'#CC3399',
	'#CC33CC',
	'#CC33FF',
	'#CC6600',
	'#CC6633',
	'#CC9900',
	'#CC9933',
	'#CCCC00',
	'#CCCC33',
	'#FF0000',
	'#FF0033',
	'#FF0066',
	'#FF0099',
	'#FF00CC',
	'#FF00FF',
	'#FF3300',
	'#FF3333',
	'#FF3366',
	'#FF3399',
	'#FF33CC',
	'#FF33FF',
	'#FF6600',
	'#FF6633',
	'#FF9900',
	'#FF9933',
	'#FFCC00',
	'#FFCC33'
];

/**
 * Currently only WebKit-based Web Inspectors, Firefox >= v31,
 * and the Firebug extension (any Firefox version) are known
 * to support "%c" CSS customizations.
 *
 * TODO: add a `localStorage` variable to explicitly enable/disable colors
 */

// eslint-disable-next-line complexity
function useColors() {
	// NB: In an Electron preload script, document will be defined but not fully
	// initialized. Since we know we're in Chrome, we'll just detect this case
	// explicitly
	if (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {
		return true;
	}

	// Internet Explorer and Edge do not support colors.
	if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)) {
		return false;
	}

	// Is webkit? http://stackoverflow.com/a/16459606/376773
	// document is undefined in react-native: https://github.com/facebook/react-native/pull/1632
	return (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||
		// Is firebug? http://stackoverflow.com/a/398120/376773
		(typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||
		// Is firefox >= v31?
		// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages
		(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||
		// Double check webkit in userAgent just in case we are in a worker
		(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/));
}

/**
 * Colorize log arguments if enabled.
 *
 * @api public
 */

function formatArgs(args) {
	args[0] = (this.useColors ? '%c' : '') +
		this.namespace +
		(this.useColors ? ' %c' : ' ') +
		args[0] +
		(this.useColors ? '%c ' : ' ') +
		'+' + module.exports.humanize(this.diff);

	if (!this.useColors) {
		return;
	}

	const c = 'color: ' + this.color;
	args.splice(1, 0, c, 'color: inherit');

	// The final "%c" is somewhat tricky, because there could be other
	// arguments passed either before or after the %c, so we need to
	// figure out the correct index to insert the CSS into
	let index = 0;
	let lastC = 0;
	args[0].replace(/%[a-zA-Z%]/g, match => {
		if (match === '%%') {
			return;
		}
		index++;
		if (match === '%c') {
			// We only are interested in the *last* %c
			// (the user may have provided their own)
			lastC = index;
		}
	});

	args.splice(lastC, 0, c);
}

/**
 * Invokes `console.debug()` when available.
 * No-op when `console.debug` is not a "function".
 * If `console.debug` is not available, falls back
 * to `console.log`.
 *
 * @api public
 */
exports.log = console.debug || console.log || (() => {});

/**
 * Save `namespaces`.
 *
 * @param {String} namespaces
 * @api private
 */
function save(namespaces) {
	try {
		if (namespaces) {
			exports.storage.setItem('debug', namespaces);
		} else {
			exports.storage.removeItem('debug');
		}
	} catch (error) {
		// Swallow
		// XXX (@Qix-) should we be logging these?
	}
}

/**
 * Load `namespaces`.
 *
 * @return {String} returns the previously persisted debug modes
 * @api private
 */
function load() {
	let r;
	try {
		r = exports.storage.getItem('debug');
	} catch (error) {
		// Swallow
		// XXX (@Qix-) should we be logging these?
	}

	// If debug isn't set in LS, and we're in Electron, try to load $DEBUG
	if (!r && typeof process !== 'undefined' && 'env' in process) {
		r = process.env.DEBUG;
	}

	return r;
}

/**
 * Localstorage attempts to return the localstorage.
 *
 * This is necessary because safari throws
 * when a user disables cookies/localstorage
 * and you attempt to access it.
 *
 * @return {LocalStorage}
 * @api private
 */

function localstorage() {
	try {
		// TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context
		// The Browser also has localStorage in the global context.
		return localStorage;
	} catch (error) {
		// Swallow
		// XXX (@Qix-) should we be logging these?
	}
}

module.exports = __webpack_require__(/*! ./common */ "./node_modules/socket.io-client/node_modules/debug/src/common.js")(exports);

const {formatters} = module.exports;

/**
 * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.
 */

formatters.j = function (v) {
	try {
		return JSON.stringify(v);
	} catch (error) {
		return '[UnexpectedJSONParseError]: ' + error.message;
	}
};


/***/ }),

/***/ "./node_modules/socket.io-client/node_modules/debug/src/common.js":
/*!************************************************************************!*\
  !*** ./node_modules/socket.io-client/node_modules/debug/src/common.js ***!
  \************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


/**
 * This is the common logic for both the Node.js and web browser
 * implementations of `debug()`.
 */

function setup(env) {
	createDebug.debug = createDebug;
	createDebug.default = createDebug;
	createDebug.coerce = coerce;
	createDebug.disable = disable;
	createDebug.enable = enable;
	createDebug.enabled = enabled;
	createDebug.humanize = __webpack_require__(/*! ms */ "./node_modules/socket.io-client/node_modules/ms/index.js");
	createDebug.destroy = destroy;

	Object.keys(env).forEach(key => {
		createDebug[key] = env[key];
	});

	/**
	* The currently active debug mode names, and names to skip.
	*/

	createDebug.names = [];
	createDebug.skips = [];

	/**
	* Map of special "%n" handling functions, for the debug "format" argument.
	*
	* Valid key names are a single, lower or upper-case letter, i.e. "n" and "N".
	*/
	createDebug.formatters = {};

	/**
	* Selects a color for a debug namespace
	* @param {String} namespace The namespace string for the for the debug instance to be colored
	* @return {Number|String} An ANSI color code for the given namespace
	* @api private
	*/
	function selectColor(namespace) {
		let hash = 0;

		for (let i = 0; i < namespace.length; i++) {
			hash = ((hash << 5) - hash) + namespace.charCodeAt(i);
			hash |= 0; // Convert to 32bit integer
		}

		return createDebug.colors[Math.abs(hash) % createDebug.colors.length];
	}
	createDebug.selectColor = selectColor;

	/**
	* Create a debugger with the given `namespace`.
	*
	* @param {String} namespace
	* @return {Function}
	* @api public
	*/
	function createDebug(namespace) {
		let prevTime;
		let enableOverride = null;

		function debug(...args) {
			// Disabled?
			if (!debug.enabled) {
				return;
			}

			const self = debug;

			// Set `diff` timestamp
			const curr = Number(new Date());
			const ms = curr - (prevTime || curr);
			self.diff = ms;
			self.prev = prevTime;
			self.curr = curr;
			prevTime = curr;

			args[0] = createDebug.coerce(args[0]);

			if (typeof args[0] !== 'string') {
				// Anything else let's inspect with %O
				args.unshift('%O');
			}

			// Apply any `formatters` transformations
			let index = 0;
			args[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format) => {
				// If we encounter an escaped % then don't increase the array index
				if (match === '%%') {
					return '%';
				}
				index++;
				const formatter = createDebug.formatters[format];
				if (typeof formatter === 'function') {
					const val = args[index];
					match = formatter.call(self, val);

					// Now we need to remove `args[index]` since it's inlined in the `format`
					args.splice(index, 1);
					index--;
				}
				return match;
			});

			// Apply env-specific formatting (colors, etc.)
			createDebug.formatArgs.call(self, args);

			const logFn = self.log || createDebug.log;
			logFn.apply(self, args);
		}

		debug.namespace = namespace;
		debug.useColors = createDebug.useColors();
		debug.color = createDebug.selectColor(namespace);
		debug.extend = extend;
		debug.destroy = createDebug.destroy; // XXX Temporary. Will be removed in the next major release.

		Object.defineProperty(debug, 'enabled', {
			enumerable: true,
			configurable: false,
			get: () => enableOverride === null ? createDebug.enabled(namespace) : enableOverride,
			set: v => {
				enableOverride = v;
			}
		});

		// Env-specific initialization logic for debug instances
		if (typeof createDebug.init === 'function') {
			createDebug.init(debug);
		}

		return debug;
	}

	function extend(namespace, delimiter) {
		const newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);
		newDebug.log = this.log;
		return newDebug;
	}

	/**
	* Enables a debug mode by namespaces. This can include modes
	* separated by a colon and wildcards.
	*
	* @param {String} namespaces
	* @api public
	*/
	function enable(namespaces) {
		createDebug.save(namespaces);

		createDebug.names = [];
		createDebug.skips = [];

		let i;
		const split = (typeof namespaces === 'string' ? namespaces : '').split(/[\s,]+/);
		const len = split.length;

		for (i = 0; i < len; i++) {
			if (!split[i]) {
				// ignore empty strings
				continue;
			}

			namespaces = split[i].replace(/\*/g, '.*?');

			if (namespaces[0] === '-') {
				createDebug.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));
			} else {
				createDebug.names.push(new RegExp('^' + namespaces + '$'));
			}
		}
	}

	/**
	* Disable debug output.
	*
	* @return {String} namespaces
	* @api public
	*/
	function disable() {
		const namespaces = [
			...createDebug.names.map(toNamespace),
			...createDebug.skips.map(toNamespace).map(namespace => '-' + namespace)
		].join(',');
		createDebug.enable('');
		return namespaces;
	}

	/**
	* Returns true if the given mode name is enabled, false otherwise.
	*
	* @param {String} name
	* @return {Boolean}
	* @api public
	*/
	function enabled(name) {
		if (name[name.length - 1] === '*') {
			return true;
		}

		let i;
		let len;

		for (i = 0, len = createDebug.skips.length; i < len; i++) {
			if (createDebug.skips[i].test(name)) {
				return false;
			}
		}

		for (i = 0, len = createDebug.names.length; i < len; i++) {
			if (createDebug.names[i].test(name)) {
				return true;
			}
		}

		return false;
	}

	/**
	* Convert regexp to namespace
	*
	* @param {RegExp} regxep
	* @return {String} namespace
	* @api private
	*/
	function toNamespace(regexp) {
		return regexp.toString()
			.substring(2, regexp.toString().length - 2)
			.replace(/\.\*\?$/, '*');
	}

	/**
	* Coerce `val`.
	*
	* @param {Mixed} val
	* @return {Mixed}
	* @api private
	*/
	function coerce(val) {
		if (val instanceof Error) {
			return val.stack || val.message;
		}
		return val;
	}

	/**
	* XXX DO NOT USE. This is a temporary stub function.
	* XXX It WILL be removed in the next major release.
	*/
	function destroy() {
		console.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');
	}

	createDebug.enable(createDebug.load());

	return createDebug;
}

module.exports = setup;


/***/ }),

/***/ "./node_modules/socket.io-client/node_modules/ms/index.js":
/*!****************************************************************!*\
  !*** ./node_modules/socket.io-client/node_modules/ms/index.js ***!
  \****************************************************************/
/***/ ((module) => {

/**
 * Helpers.
 */

var s = 1000;
var m = s * 60;
var h = m * 60;
var d = h * 24;
var w = d * 7;
var y = d * 365.25;

/**
 * Parse or format the given `val`.
 *
 * Options:
 *
 *  - `long` verbose formatting [false]
 *
 * @param {String|Number} val
 * @param {Object} [options]
 * @throws {Error} throw an error if val is not a non-empty string or a number
 * @return {String|Number}
 * @api public
 */

module.exports = function(val, options) {
  options = options || {};
  var type = typeof val;
  if (type === 'string' && val.length > 0) {
    return parse(val);
  } else if (type === 'number' && isFinite(val)) {
    return options.long ? fmtLong(val) : fmtShort(val);
  }
  throw new Error(
    'val is not a non-empty string or a valid number. val=' +
      JSON.stringify(val)
  );
};

/**
 * Parse the given `str` and return milliseconds.
 *
 * @param {String} str
 * @return {Number}
 * @api private
 */

function parse(str) {
  str = String(str);
  if (str.length > 100) {
    return;
  }
  var match = /^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(
    str
  );
  if (!match) {
    return;
  }
  var n = parseFloat(match[1]);
  var type = (match[2] || 'ms').toLowerCase();
  switch (type) {
    case 'years':
    case 'year':
    case 'yrs':
    case 'yr':
    case 'y':
      return n * y;
    case 'weeks':
    case 'week':
    case 'w':
      return n * w;
    case 'days':
    case 'day':
    case 'd':
      return n * d;
    case 'hours':
    case 'hour':
    case 'hrs':
    case 'hr':
    case 'h':
      return n * h;
    case 'minutes':
    case 'minute':
    case 'mins':
    case 'min':
    case 'm':
      return n * m;
    case 'seconds':
    case 'second':
    case 'secs':
    case 'sec':
    case 's':
      return n * s;
    case 'milliseconds':
    case 'millisecond':
    case 'msecs':
    case 'msec':
    case 'ms':
      return n;
    default:
      return undefined;
  }
}

/**
 * Short format for `ms`.
 *
 * @param {Number} ms
 * @return {String}
 * @api private
 */

function fmtShort(ms) {
  var msAbs = Math.abs(ms);
  if (msAbs >= d) {
    return Math.round(ms / d) + 'd';
  }
  if (msAbs >= h) {
    return Math.round(ms / h) + 'h';
  }
  if (msAbs >= m) {
    return Math.round(ms / m) + 'm';
  }
  if (msAbs >= s) {
    return Math.round(ms / s) + 's';
  }
  return ms + 'ms';
}

/**
 * Long format for `ms`.
 *
 * @param {Number} ms
 * @return {String}
 * @api private
 */

function fmtLong(ms) {
  var msAbs = Math.abs(ms);
  if (msAbs >= d) {
    return plural(ms, msAbs, d, 'day');
  }
  if (msAbs >= h) {
    return plural(ms, msAbs, h, 'hour');
  }
  if (msAbs >= m) {
    return plural(ms, msAbs, m, 'minute');
  }
  if (msAbs >= s) {
    return plural(ms, msAbs, s, 'second');
  }
  return ms + ' ms';
}

/**
 * Pluralization helper.
 */

function plural(ms, msAbs, n, name) {
  var isPlural = msAbs >= n * 1.5;
  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');
}


/***/ }),

/***/ "./node_modules/socket.io-parser/dist/binary.js":
/*!******************************************************!*\
  !*** ./node_modules/socket.io-parser/dist/binary.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.reconstructPacket = exports.deconstructPacket = void 0;
const is_binary_1 = __webpack_require__(/*! ./is-binary */ "./node_modules/socket.io-parser/dist/is-binary.js");
/**
 * Replaces every Buffer | ArrayBuffer | Blob | File in packet with a numbered placeholder.
 *
 * @param {Object} packet - socket.io event packet
 * @return {Object} with deconstructed packet and list of buffers
 * @public
 */
function deconstructPacket(packet) {
    const buffers = [];
    const packetData = packet.data;
    const pack = packet;
    pack.data = _deconstructPacket(packetData, buffers);
    pack.attachments = buffers.length; // number of binary 'attachments'
    return { packet: pack, buffers: buffers };
}
exports.deconstructPacket = deconstructPacket;
function _deconstructPacket(data, buffers) {
    if (!data)
        return data;
    if (is_binary_1.isBinary(data)) {
        const placeholder = { _placeholder: true, num: buffers.length };
        buffers.push(data);
        return placeholder;
    }
    else if (Array.isArray(data)) {
        const newData = new Array(data.length);
        for (let i = 0; i < data.length; i++) {
            newData[i] = _deconstructPacket(data[i], buffers);
        }
        return newData;
    }
    else if (typeof data === "object" && !(data instanceof Date)) {
        const newData = {};
        for (const key in data) {
            if (data.hasOwnProperty(key)) {
                newData[key] = _deconstructPacket(data[key], buffers);
            }
        }
        return newData;
    }
    return data;
}
/**
 * Reconstructs a binary packet from its placeholder packet and buffers
 *
 * @param {Object} packet - event packet with placeholders
 * @param {Array} buffers - binary buffers to put in placeholder positions
 * @return {Object} reconstructed packet
 * @public
 */
function reconstructPacket(packet, buffers) {
    packet.data = _reconstructPacket(packet.data, buffers);
    packet.attachments = undefined; // no longer useful
    return packet;
}
exports.reconstructPacket = reconstructPacket;
function _reconstructPacket(data, buffers) {
    if (!data)
        return data;
    if (data && data._placeholder) {
        return buffers[data.num]; // appropriate buffer (should be natural order anyway)
    }
    else if (Array.isArray(data)) {
        for (let i = 0; i < data.length; i++) {
            data[i] = _reconstructPacket(data[i], buffers);
        }
    }
    else if (typeof data === "object") {
        for (const key in data) {
            if (data.hasOwnProperty(key)) {
                data[key] = _reconstructPacket(data[key], buffers);
            }
        }
    }
    return data;
}


/***/ }),

/***/ "./node_modules/socket.io-parser/dist/index.js":
/*!*****************************************************!*\
  !*** ./node_modules/socket.io-parser/dist/index.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Decoder = exports.Encoder = exports.PacketType = exports.protocol = void 0;
const Emitter = __webpack_require__(/*! component-emitter */ "./node_modules/component-emitter/index.js");
const binary_1 = __webpack_require__(/*! ./binary */ "./node_modules/socket.io-parser/dist/binary.js");
const is_binary_1 = __webpack_require__(/*! ./is-binary */ "./node_modules/socket.io-parser/dist/is-binary.js");
const debug = __webpack_require__(/*! debug */ "./node_modules/socket.io-parser/node_modules/debug/src/browser.js")("socket.io-parser");
/**
 * Protocol version.
 *
 * @public
 */
exports.protocol = 5;
var PacketType;
(function (PacketType) {
    PacketType[PacketType["CONNECT"] = 0] = "CONNECT";
    PacketType[PacketType["DISCONNECT"] = 1] = "DISCONNECT";
    PacketType[PacketType["EVENT"] = 2] = "EVENT";
    PacketType[PacketType["ACK"] = 3] = "ACK";
    PacketType[PacketType["CONNECT_ERROR"] = 4] = "CONNECT_ERROR";
    PacketType[PacketType["BINARY_EVENT"] = 5] = "BINARY_EVENT";
    PacketType[PacketType["BINARY_ACK"] = 6] = "BINARY_ACK";
})(PacketType = exports.PacketType || (exports.PacketType = {}));
/**
 * A socket.io Encoder instance
 */
class Encoder {
    /**
     * Encode a packet as a single string if non-binary, or as a
     * buffer sequence, depending on packet type.
     *
     * @param {Object} obj - packet object
     */
    encode(obj) {
        debug("encoding packet %j", obj);
        if (obj.type === PacketType.EVENT || obj.type === PacketType.ACK) {
            if (is_binary_1.hasBinary(obj)) {
                obj.type =
                    obj.type === PacketType.EVENT
                        ? PacketType.BINARY_EVENT
                        : PacketType.BINARY_ACK;
                return this.encodeAsBinary(obj);
            }
        }
        return [this.encodeAsString(obj)];
    }
    /**
     * Encode packet as string.
     */
    encodeAsString(obj) {
        // first is type
        let str = "" + obj.type;
        // attachments if we have them
        if (obj.type === PacketType.BINARY_EVENT ||
            obj.type === PacketType.BINARY_ACK) {
            str += obj.attachments + "-";
        }
        // if we have a namespace other than `/`
        // we append it followed by a comma `,`
        if (obj.nsp && "/" !== obj.nsp) {
            str += obj.nsp + ",";
        }
        // immediately followed by the id
        if (null != obj.id) {
            str += obj.id;
        }
        // json data
        if (null != obj.data) {
            str += JSON.stringify(obj.data);
        }
        debug("encoded %j as %s", obj, str);
        return str;
    }
    /**
     * Encode packet as 'buffer sequence' by removing blobs, and
     * deconstructing packet into object with placeholders and
     * a list of buffers.
     */
    encodeAsBinary(obj) {
        const deconstruction = binary_1.deconstructPacket(obj);
        const pack = this.encodeAsString(deconstruction.packet);
        const buffers = deconstruction.buffers;
        buffers.unshift(pack); // add packet info to beginning of data list
        return buffers; // write all the buffers
    }
}
exports.Encoder = Encoder;
/**
 * A socket.io Decoder instance
 *
 * @return {Object} decoder
 */
class Decoder extends Emitter {
    constructor() {
        super();
    }
    /**
     * Decodes an encoded packet string into packet JSON.
     *
     * @param {String} obj - encoded packet
     */
    add(obj) {
        let packet;
        if (typeof obj === "string") {
            packet = this.decodeString(obj);
            if (packet.type === PacketType.BINARY_EVENT ||
                packet.type === PacketType.BINARY_ACK) {
                // binary packet's json
                this.reconstructor = new BinaryReconstructor(packet);
                // no attachments, labeled binary but no binary data to follow
                if (packet.attachments === 0) {
                    super.emit("decoded", packet);
                }
            }
            else {
                // non-binary full packet
                super.emit("decoded", packet);
            }
        }
        else if (is_binary_1.isBinary(obj) || obj.base64) {
            // raw binary data
            if (!this.reconstructor) {
                throw new Error("got binary data when not reconstructing a packet");
            }
            else {
                packet = this.reconstructor.takeBinaryData(obj);
                if (packet) {
                    // received final buffer
                    this.reconstructor = null;
                    super.emit("decoded", packet);
                }
            }
        }
        else {
            throw new Error("Unknown type: " + obj);
        }
    }
    /**
     * Decode a packet String (JSON data)
     *
     * @param {String} str
     * @return {Object} packet
     */
    decodeString(str) {
        let i = 0;
        // look up type
        const p = {
            type: Number(str.charAt(0)),
        };
        if (PacketType[p.type] === undefined) {
            throw new Error("unknown packet type " + p.type);
        }
        // look up attachments if type binary
        if (p.type === PacketType.BINARY_EVENT ||
            p.type === PacketType.BINARY_ACK) {
            const start = i + 1;
            while (str.charAt(++i) !== "-" && i != str.length) { }
            const buf = str.substring(start, i);
            if (buf != Number(buf) || str.charAt(i) !== "-") {
                throw new Error("Illegal attachments");
            }
            p.attachments = Number(buf);
        }
        // look up namespace (if any)
        if ("/" === str.charAt(i + 1)) {
            const start = i + 1;
            while (++i) {
                const c = str.charAt(i);
                if ("," === c)
                    break;
                if (i === str.length)
                    break;
            }
            p.nsp = str.substring(start, i);
        }
        else {
            p.nsp = "/";
        }
        // look up id
        const next = str.charAt(i + 1);
        if ("" !== next && Number(next) == next) {
            const start = i + 1;
            while (++i) {
                const c = str.charAt(i);
                if (null == c || Number(c) != c) {
                    --i;
                    break;
                }
                if (i === str.length)
                    break;
            }
            p.id = Number(str.substring(start, i + 1));
        }
        // look up json data
        if (str.charAt(++i)) {
            const payload = tryParse(str.substr(i));
            if (Decoder.isPayloadValid(p.type, payload)) {
                p.data = payload;
            }
            else {
                throw new Error("invalid payload");
            }
        }
        debug("decoded %s as %j", str, p);
        return p;
    }
    static isPayloadValid(type, payload) {
        switch (type) {
            case PacketType.CONNECT:
                return typeof payload === "object";
            case PacketType.DISCONNECT:
                return payload === undefined;
            case PacketType.CONNECT_ERROR:
                return typeof payload === "string" || typeof payload === "object";
            case PacketType.EVENT:
            case PacketType.BINARY_EVENT:
                return Array.isArray(payload) && payload.length > 0;
            case PacketType.ACK:
            case PacketType.BINARY_ACK:
                return Array.isArray(payload);
        }
    }
    /**
     * Deallocates a parser's resources
     */
    destroy() {
        if (this.reconstructor) {
            this.reconstructor.finishedReconstruction();
        }
    }
}
exports.Decoder = Decoder;
function tryParse(str) {
    try {
        return JSON.parse(str);
    }
    catch (e) {
        return false;
    }
}
/**
 * A manager of a binary event's 'buffer sequence'. Should
 * be constructed whenever a packet of type BINARY_EVENT is
 * decoded.
 *
 * @param {Object} packet
 * @return {BinaryReconstructor} initialized reconstructor
 */
class BinaryReconstructor {
    constructor(packet) {
        this.packet = packet;
        this.buffers = [];
        this.reconPack = packet;
    }
    /**
     * Method to be called when binary data received from connection
     * after a BINARY_EVENT packet.
     *
     * @param {Buffer | ArrayBuffer} binData - the raw binary data received
     * @return {null | Object} returns null if more binary data is expected or
     *   a reconstructed packet object if all buffers have been received.
     */
    takeBinaryData(binData) {
        this.buffers.push(binData);
        if (this.buffers.length === this.reconPack.attachments) {
            // done with buffer list
            const packet = binary_1.reconstructPacket(this.reconPack, this.buffers);
            this.finishedReconstruction();
            return packet;
        }
        return null;
    }
    /**
     * Cleans up binary packet reconstruction variables.
     */
    finishedReconstruction() {
        this.reconPack = null;
        this.buffers = [];
    }
}


/***/ }),

/***/ "./node_modules/socket.io-parser/dist/is-binary.js":
/*!*********************************************************!*\
  !*** ./node_modules/socket.io-parser/dist/is-binary.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.hasBinary = exports.isBinary = void 0;
const withNativeArrayBuffer = typeof ArrayBuffer === "function";
const isView = (obj) => {
    return typeof ArrayBuffer.isView === "function"
        ? ArrayBuffer.isView(obj)
        : obj.buffer instanceof ArrayBuffer;
};
const toString = Object.prototype.toString;
const withNativeBlob = typeof Blob === "function" ||
    (typeof Blob !== "undefined" &&
        toString.call(Blob) === "[object BlobConstructor]");
const withNativeFile = typeof File === "function" ||
    (typeof File !== "undefined" &&
        toString.call(File) === "[object FileConstructor]");
/**
 * Returns true if obj is a Buffer, an ArrayBuffer, a Blob or a File.
 *
 * @private
 */
function isBinary(obj) {
    return ((withNativeArrayBuffer && (obj instanceof ArrayBuffer || isView(obj))) ||
        (withNativeBlob && obj instanceof Blob) ||
        (withNativeFile && obj instanceof File));
}
exports.isBinary = isBinary;
function hasBinary(obj, toJSON) {
    if (!obj || typeof obj !== "object") {
        return false;
    }
    if (Array.isArray(obj)) {
        for (let i = 0, l = obj.length; i < l; i++) {
            if (hasBinary(obj[i])) {
                return true;
            }
        }
        return false;
    }
    if (isBinary(obj)) {
        return true;
    }
    if (obj.toJSON &&
        typeof obj.toJSON === "function" &&
        arguments.length === 1) {
        return hasBinary(obj.toJSON(), true);
    }
    for (const key in obj) {
        if (Object.prototype.hasOwnProperty.call(obj, key) && hasBinary(obj[key])) {
            return true;
        }
    }
    return false;
}
exports.hasBinary = hasBinary;


/***/ }),

/***/ "./node_modules/socket.io-parser/node_modules/debug/src/browser.js":
/*!*************************************************************************!*\
  !*** ./node_modules/socket.io-parser/node_modules/debug/src/browser.js ***!
  \*************************************************************************/
/***/ ((module, exports, __webpack_require__) => {

/* eslint-env browser */

/**
 * This is the web browser implementation of `debug()`.
 */

exports.formatArgs = formatArgs;
exports.save = save;
exports.load = load;
exports.useColors = useColors;
exports.storage = localstorage();
exports.destroy = (() => {
	let warned = false;

	return () => {
		if (!warned) {
			warned = true;
			console.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');
		}
	};
})();

/**
 * Colors.
 */

exports.colors = [
	'#0000CC',
	'#0000FF',
	'#0033CC',
	'#0033FF',
	'#0066CC',
	'#0066FF',
	'#0099CC',
	'#0099FF',
	'#00CC00',
	'#00CC33',
	'#00CC66',
	'#00CC99',
	'#00CCCC',
	'#00CCFF',
	'#3300CC',
	'#3300FF',
	'#3333CC',
	'#3333FF',
	'#3366CC',
	'#3366FF',
	'#3399CC',
	'#3399FF',
	'#33CC00',
	'#33CC33',
	'#33CC66',
	'#33CC99',
	'#33CCCC',
	'#33CCFF',
	'#6600CC',
	'#6600FF',
	'#6633CC',
	'#6633FF',
	'#66CC00',
	'#66CC33',
	'#9900CC',
	'#9900FF',
	'#9933CC',
	'#9933FF',
	'#99CC00',
	'#99CC33',
	'#CC0000',
	'#CC0033',
	'#CC0066',
	'#CC0099',
	'#CC00CC',
	'#CC00FF',
	'#CC3300',
	'#CC3333',
	'#CC3366',
	'#CC3399',
	'#CC33CC',
	'#CC33FF',
	'#CC6600',
	'#CC6633',
	'#CC9900',
	'#CC9933',
	'#CCCC00',
	'#CCCC33',
	'#FF0000',
	'#FF0033',
	'#FF0066',
	'#FF0099',
	'#FF00CC',
	'#FF00FF',
	'#FF3300',
	'#FF3333',
	'#FF3366',
	'#FF3399',
	'#FF33CC',
	'#FF33FF',
	'#FF6600',
	'#FF6633',
	'#FF9900',
	'#FF9933',
	'#FFCC00',
	'#FFCC33'
];

/**
 * Currently only WebKit-based Web Inspectors, Firefox >= v31,
 * and the Firebug extension (any Firefox version) are known
 * to support "%c" CSS customizations.
 *
 * TODO: add a `localStorage` variable to explicitly enable/disable colors
 */

// eslint-disable-next-line complexity
function useColors() {
	// NB: In an Electron preload script, document will be defined but not fully
	// initialized. Since we know we're in Chrome, we'll just detect this case
	// explicitly
	if (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {
		return true;
	}

	// Internet Explorer and Edge do not support colors.
	if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)) {
		return false;
	}

	// Is webkit? http://stackoverflow.com/a/16459606/376773
	// document is undefined in react-native: https://github.com/facebook/react-native/pull/1632
	return (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||
		// Is firebug? http://stackoverflow.com/a/398120/376773
		(typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||
		// Is firefox >= v31?
		// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages
		(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||
		// Double check webkit in userAgent just in case we are in a worker
		(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/));
}

/**
 * Colorize log arguments if enabled.
 *
 * @api public
 */

function formatArgs(args) {
	args[0] = (this.useColors ? '%c' : '') +
		this.namespace +
		(this.useColors ? ' %c' : ' ') +
		args[0] +
		(this.useColors ? '%c ' : ' ') +
		'+' + module.exports.humanize(this.diff);

	if (!this.useColors) {
		return;
	}

	const c = 'color: ' + this.color;
	args.splice(1, 0, c, 'color: inherit');

	// The final "%c" is somewhat tricky, because there could be other
	// arguments passed either before or after the %c, so we need to
	// figure out the correct index to insert the CSS into
	let index = 0;
	let lastC = 0;
	args[0].replace(/%[a-zA-Z%]/g, match => {
		if (match === '%%') {
			return;
		}
		index++;
		if (match === '%c') {
			// We only are interested in the *last* %c
			// (the user may have provided their own)
			lastC = index;
		}
	});

	args.splice(lastC, 0, c);
}

/**
 * Invokes `console.debug()` when available.
 * No-op when `console.debug` is not a "function".
 * If `console.debug` is not available, falls back
 * to `console.log`.
 *
 * @api public
 */
exports.log = console.debug || console.log || (() => {});

/**
 * Save `namespaces`.
 *
 * @param {String} namespaces
 * @api private
 */
function save(namespaces) {
	try {
		if (namespaces) {
			exports.storage.setItem('debug', namespaces);
		} else {
			exports.storage.removeItem('debug');
		}
	} catch (error) {
		// Swallow
		// XXX (@Qix-) should we be logging these?
	}
}

/**
 * Load `namespaces`.
 *
 * @return {String} returns the previously persisted debug modes
 * @api private
 */
function load() {
	let r;
	try {
		r = exports.storage.getItem('debug');
	} catch (error) {
		// Swallow
		// XXX (@Qix-) should we be logging these?
	}

	// If debug isn't set in LS, and we're in Electron, try to load $DEBUG
	if (!r && typeof process !== 'undefined' && 'env' in process) {
		r = process.env.DEBUG;
	}

	return r;
}

/**
 * Localstorage attempts to return the localstorage.
 *
 * This is necessary because safari throws
 * when a user disables cookies/localstorage
 * and you attempt to access it.
 *
 * @return {LocalStorage}
 * @api private
 */

function localstorage() {
	try {
		// TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context
		// The Browser also has localStorage in the global context.
		return localStorage;
	} catch (error) {
		// Swallow
		// XXX (@Qix-) should we be logging these?
	}
}

module.exports = __webpack_require__(/*! ./common */ "./node_modules/socket.io-parser/node_modules/debug/src/common.js")(exports);

const {formatters} = module.exports;

/**
 * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.
 */

formatters.j = function (v) {
	try {
		return JSON.stringify(v);
	} catch (error) {
		return '[UnexpectedJSONParseError]: ' + error.message;
	}
};


/***/ }),

/***/ "./node_modules/socket.io-parser/node_modules/debug/src/common.js":
/*!************************************************************************!*\
  !*** ./node_modules/socket.io-parser/node_modules/debug/src/common.js ***!
  \************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


/**
 * This is the common logic for both the Node.js and web browser
 * implementations of `debug()`.
 */

function setup(env) {
	createDebug.debug = createDebug;
	createDebug.default = createDebug;
	createDebug.coerce = coerce;
	createDebug.disable = disable;
	createDebug.enable = enable;
	createDebug.enabled = enabled;
	createDebug.humanize = __webpack_require__(/*! ms */ "./node_modules/socket.io-parser/node_modules/ms/index.js");
	createDebug.destroy = destroy;

	Object.keys(env).forEach(key => {
		createDebug[key] = env[key];
	});

	/**
	* The currently active debug mode names, and names to skip.
	*/

	createDebug.names = [];
	createDebug.skips = [];

	/**
	* Map of special "%n" handling functions, for the debug "format" argument.
	*
	* Valid key names are a single, lower or upper-case letter, i.e. "n" and "N".
	*/
	createDebug.formatters = {};

	/**
	* Selects a color for a debug namespace
	* @param {String} namespace The namespace string for the for the debug instance to be colored
	* @return {Number|String} An ANSI color code for the given namespace
	* @api private
	*/
	function selectColor(namespace) {
		let hash = 0;

		for (let i = 0; i < namespace.length; i++) {
			hash = ((hash << 5) - hash) + namespace.charCodeAt(i);
			hash |= 0; // Convert to 32bit integer
		}

		return createDebug.colors[Math.abs(hash) % createDebug.colors.length];
	}
	createDebug.selectColor = selectColor;

	/**
	* Create a debugger with the given `namespace`.
	*
	* @param {String} namespace
	* @return {Function}
	* @api public
	*/
	function createDebug(namespace) {
		let prevTime;
		let enableOverride = null;

		function debug(...args) {
			// Disabled?
			if (!debug.enabled) {
				return;
			}

			const self = debug;

			// Set `diff` timestamp
			const curr = Number(new Date());
			const ms = curr - (prevTime || curr);
			self.diff = ms;
			self.prev = prevTime;
			self.curr = curr;
			prevTime = curr;

			args[0] = createDebug.coerce(args[0]);

			if (typeof args[0] !== 'string') {
				// Anything else let's inspect with %O
				args.unshift('%O');
			}

			// Apply any `formatters` transformations
			let index = 0;
			args[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format) => {
				// If we encounter an escaped % then don't increase the array index
				if (match === '%%') {
					return '%';
				}
				index++;
				const formatter = createDebug.formatters[format];
				if (typeof formatter === 'function') {
					const val = args[index];
					match = formatter.call(self, val);

					// Now we need to remove `args[index]` since it's inlined in the `format`
					args.splice(index, 1);
					index--;
				}
				return match;
			});

			// Apply env-specific formatting (colors, etc.)
			createDebug.formatArgs.call(self, args);

			const logFn = self.log || createDebug.log;
			logFn.apply(self, args);
		}

		debug.namespace = namespace;
		debug.useColors = createDebug.useColors();
		debug.color = createDebug.selectColor(namespace);
		debug.extend = extend;
		debug.destroy = createDebug.destroy; // XXX Temporary. Will be removed in the next major release.

		Object.defineProperty(debug, 'enabled', {
			enumerable: true,
			configurable: false,
			get: () => enableOverride === null ? createDebug.enabled(namespace) : enableOverride,
			set: v => {
				enableOverride = v;
			}
		});

		// Env-specific initialization logic for debug instances
		if (typeof createDebug.init === 'function') {
			createDebug.init(debug);
		}

		return debug;
	}

	function extend(namespace, delimiter) {
		const newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);
		newDebug.log = this.log;
		return newDebug;
	}

	/**
	* Enables a debug mode by namespaces. This can include modes
	* separated by a colon and wildcards.
	*
	* @param {String} namespaces
	* @api public
	*/
	function enable(namespaces) {
		createDebug.save(namespaces);

		createDebug.names = [];
		createDebug.skips = [];

		let i;
		const split = (typeof namespaces === 'string' ? namespaces : '').split(/[\s,]+/);
		const len = split.length;

		for (i = 0; i < len; i++) {
			if (!split[i]) {
				// ignore empty strings
				continue;
			}

			namespaces = split[i].replace(/\*/g, '.*?');

			if (namespaces[0] === '-') {
				createDebug.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));
			} else {
				createDebug.names.push(new RegExp('^' + namespaces + '$'));
			}
		}
	}

	/**
	* Disable debug output.
	*
	* @return {String} namespaces
	* @api public
	*/
	function disable() {
		const namespaces = [
			...createDebug.names.map(toNamespace),
			...createDebug.skips.map(toNamespace).map(namespace => '-' + namespace)
		].join(',');
		createDebug.enable('');
		return namespaces;
	}

	/**
	* Returns true if the given mode name is enabled, false otherwise.
	*
	* @param {String} name
	* @return {Boolean}
	* @api public
	*/
	function enabled(name) {
		if (name[name.length - 1] === '*') {
			return true;
		}

		let i;
		let len;

		for (i = 0, len = createDebug.skips.length; i < len; i++) {
			if (createDebug.skips[i].test(name)) {
				return false;
			}
		}

		for (i = 0, len = createDebug.names.length; i < len; i++) {
			if (createDebug.names[i].test(name)) {
				return true;
			}
		}

		return false;
	}

	/**
	* Convert regexp to namespace
	*
	* @param {RegExp} regxep
	* @return {String} namespace
	* @api private
	*/
	function toNamespace(regexp) {
		return regexp.toString()
			.substring(2, regexp.toString().length - 2)
			.replace(/\.\*\?$/, '*');
	}

	/**
	* Coerce `val`.
	*
	* @param {Mixed} val
	* @return {Mixed}
	* @api private
	*/
	function coerce(val) {
		if (val instanceof Error) {
			return val.stack || val.message;
		}
		return val;
	}

	/**
	* XXX DO NOT USE. This is a temporary stub function.
	* XXX It WILL be removed in the next major release.
	*/
	function destroy() {
		console.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');
	}

	createDebug.enable(createDebug.load());

	return createDebug;
}

module.exports = setup;


/***/ }),

/***/ "./node_modules/socket.io-parser/node_modules/ms/index.js":
/*!****************************************************************!*\
  !*** ./node_modules/socket.io-parser/node_modules/ms/index.js ***!
  \****************************************************************/
/***/ ((module) => {

/**
 * Helpers.
 */

var s = 1000;
var m = s * 60;
var h = m * 60;
var d = h * 24;
var w = d * 7;
var y = d * 365.25;

/**
 * Parse or format the given `val`.
 *
 * Options:
 *
 *  - `long` verbose formatting [false]
 *
 * @param {String|Number} val
 * @param {Object} [options]
 * @throws {Error} throw an error if val is not a non-empty string or a number
 * @return {String|Number}
 * @api public
 */

module.exports = function(val, options) {
  options = options || {};
  var type = typeof val;
  if (type === 'string' && val.length > 0) {
    return parse(val);
  } else if (type === 'number' && isFinite(val)) {
    return options.long ? fmtLong(val) : fmtShort(val);
  }
  throw new Error(
    'val is not a non-empty string or a valid number. val=' +
      JSON.stringify(val)
  );
};

/**
 * Parse the given `str` and return milliseconds.
 *
 * @param {String} str
 * @return {Number}
 * @api private
 */

function parse(str) {
  str = String(str);
  if (str.length > 100) {
    return;
  }
  var match = /^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(
    str
  );
  if (!match) {
    return;
  }
  var n = parseFloat(match[1]);
  var type = (match[2] || 'ms').toLowerCase();
  switch (type) {
    case 'years':
    case 'year':
    case 'yrs':
    case 'yr':
    case 'y':
      return n * y;
    case 'weeks':
    case 'week':
    case 'w':
      return n * w;
    case 'days':
    case 'day':
    case 'd':
      return n * d;
    case 'hours':
    case 'hour':
    case 'hrs':
    case 'hr':
    case 'h':
      return n * h;
    case 'minutes':
    case 'minute':
    case 'mins':
    case 'min':
    case 'm':
      return n * m;
    case 'seconds':
    case 'second':
    case 'secs':
    case 'sec':
    case 's':
      return n * s;
    case 'milliseconds':
    case 'millisecond':
    case 'msecs':
    case 'msec':
    case 'ms':
      return n;
    default:
      return undefined;
  }
}

/**
 * Short format for `ms`.
 *
 * @param {Number} ms
 * @return {String}
 * @api private
 */

function fmtShort(ms) {
  var msAbs = Math.abs(ms);
  if (msAbs >= d) {
    return Math.round(ms / d) + 'd';
  }
  if (msAbs >= h) {
    return Math.round(ms / h) + 'h';
  }
  if (msAbs >= m) {
    return Math.round(ms / m) + 'm';
  }
  if (msAbs >= s) {
    return Math.round(ms / s) + 's';
  }
  return ms + 'ms';
}

/**
 * Long format for `ms`.
 *
 * @param {Number} ms
 * @return {String}
 * @api private
 */

function fmtLong(ms) {
  var msAbs = Math.abs(ms);
  if (msAbs >= d) {
    return plural(ms, msAbs, d, 'day');
  }
  if (msAbs >= h) {
    return plural(ms, msAbs, h, 'hour');
  }
  if (msAbs >= m) {
    return plural(ms, msAbs, m, 'minute');
  }
  if (msAbs >= s) {
    return plural(ms, msAbs, s, 'second');
  }
  return ms + ' ms';
}

/**
 * Pluralization helper.
 */

function plural(ms, msAbs, n, name) {
  var isPlural = msAbs >= n * 1.5;
  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');
}


/***/ }),

/***/ "./src/index.ts":
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.MainScene = exports.mainCharacterinitialPosition = exports.isTouchDevice = void 0;
const enable3d_1 = __webpack_require__(/*! enable3d */ "./node_modules/enable3d/dist/index.js");
const Chair_1 = __webpack_require__(/*! ./modules/Chair */ "./src/modules/Chair.ts");
const Character_1 = __webpack_require__(/*! ./modules/Character */ "./src/modules/Character.ts");
const CharacterController_1 = __webpack_require__(/*! ./modules/CharacterController */ "./src/modules/CharacterController.ts");
const Classroom3D_1 = __webpack_require__(/*! ./modules/Classroom3D */ "./src/modules/Classroom3D.ts");
const ClassroomManager_1 = __webpack_require__(/*! ./modules/ClassroomManager */ "./src/modules/ClassroomManager.ts");
const data_1 = __webpack_require__(/*! ./modules/data */ "./src/modules/data.ts");
/**
* Is touch device?
*/
exports.isTouchDevice = 'ontouchstart' in window;
exports.mainCharacterinitialPosition = new enable3d_1.THREE.Vector3(-6 + Math.random() * 3, 0, 3 + Math.random() * 2);
const MAXIMUM_AUDIBLE_DISTANCE = 10;
class MainScene extends enable3d_1.Scene3D {
    constructor() {
        super({ key: "MainScene" });
        this.subCharacters = {};
        this.chairs = [];
        this.classroom = new ClassroomManager_1.ClassroomManager(this);
    }
    init() {
        this.renderer.setPixelRatio(Math.max(1, window.devicePixelRatio / 2));
    }
    preload() {
        return __awaiter(this, void 0, void 0, function* () {
            yield Promise.all([
                this.load.preload('man', './resources/models/box_man/box_man.glb'),
                this.load.preload('bg1', './resources/textures/world/posx.jpg'),
                this.load.preload('bg2', './resources/textures/world/negx.jpg'),
                this.load.preload('bg3', './resources/textures/world/posy.jpg'),
                this.load.preload('bg4', './resources/textures/world/negy.jpg'),
                this.load.preload('bg5', './resources/textures/world/posz.jpg'),
                this.load.preload('bg6', './resources/textures/world/negz.jpg'),
                this.load.preload('wood', './resources/textures/wood.jpg'),
                this.load.preload('floor', './resources/textures/floor.jpg'),
                this.load.preload('floor', './resources/textures/board.jpg')
            ]);
        });
    }
    create() {
        return __awaiter(this, void 0, void 0, function* () {
            yield this.warpSpeed('-ground', '-orbitControls', '-light', '-sky');
            // this.physics.debug.enable()
            /**
            * Setup Lights
            */
            this.setupLights();
            /**
             * Set up Enviornment
             */
            this.setupEnviornment();
            // Add Character
            this.addMainCharacter(exports.mainCharacterinitialPosition);
        });
    }
    setupEnviornment() {
        const loader = new enable3d_1.THREE.CubeTextureLoader();
        const terrainTexture = loader.load([
            './resources/textures/world/posx.jpg',
            './resources/textures/world/negx.jpg',
            './resources/textures/world/posy.jpg',
            './resources/textures/world/negy.jpg',
            './resources/textures/world/posz.jpg',
            './resources/textures/world/negz.jpg',
        ]);
        terrainTexture.encoding = enable3d_1.THREE.sRGBEncoding;
        this.scene.background = terrainTexture;
        this.addClassroom();
        for (let i of data_1.chairPositions) {
            const chair1 = new Chair_1.Chair();
            const chair2 = new Chair_1.Chair();
            chair1.position.set(i[0], 0, i[1] - 0.35);
            chair2.position.set(i[0], 0, i[1] + 0.35);
            chair1.addToWorld(this);
            chair2.addToWorld(this);
            this.chairs.push(chair1);
            this.chairs.push(chair2);
        }
    }
    addClassroom() {
        Classroom3D_1.addClassroomToScene(this);
    }
    setupLights() {
        const directionalLight = new enable3d_1.THREE.DirectionalLight(0xFFFFFF, 0.6);
        directionalLight.position.set(-40, 30, -40);
        directionalLight.target.position.set(0, 0, 0);
        directionalLight.castShadow = true;
        directionalLight.shadow.bias = -0.001;
        directionalLight.shadow.mapSize.width = 4096;
        directionalLight.shadow.mapSize.height = 4096;
        directionalLight.shadow.camera.near = 0.1;
        directionalLight.shadow.camera.far = 500.0;
        directionalLight.shadow.camera.left = 50;
        directionalLight.shadow.camera.right = -50;
        directionalLight.shadow.camera.top = 50;
        directionalLight.shadow.camera.bottom = -50;
        this.scene.add(directionalLight);
        const ambientLight = new enable3d_1.THREE.AmbientLight(0xFFFFFF, 1);
        this.scene.add(ambientLight);
    }
    addMainCharacter(initialPosition = undefined) {
        this.mainCharacter = new Character_1.Character({
            scene: this,
            initialPosition: exports.mainCharacterinitialPosition,
            name: this.classroom.username,
            onReady: (character) => {
                this.characterController = new CharacterController_1.CharacterController({
                    character,
                    camera: this.camera,
                    scene: this,
                });
            }
        });
    }
    setMainCharacterColorFromString(color) {
        var _a;
        (_a = this.mainCharacter) === null || _a === void 0 ? void 0 : _a.setColor(new enable3d_1.THREE.Color(color));
    }
    addSubCharacter(character) {
        if (!Object.keys(this.subCharacters).includes('uuid')) {
            const initialPosition = new enable3d_1.THREE.Vector3(character.position.x, character.position.y, character.position.z);
            const newCharacter = new Character_1.Character({ scene: this, color: new enable3d_1.THREE.Color(character.color), initialPosition, name: character.username });
            newCharacter.lookingAt.set(...character.lookingAt);
            newCharacter.isSitting = character.isSitting;
            newCharacter.addNameLabel(character.username);
            this.subCharacters[character.uuid] = newCharacter;
            console.log("New character added");
        }
    }
    update(time, delta) {
        var _a;
        (_a = this.characterController) === null || _a === void 0 ? void 0 : _a.update(time, delta);
        Object.keys(this.subCharacters).forEach(uuid => {
            var _a;
            const character = this.subCharacters[uuid];
            character.update(time, delta);
            if (((_a = this.mainCharacter) === null || _a === void 0 ? void 0 : _a.target) && character.target && this.classroom.audios[uuid]) {
                const distance = this.mainCharacter.target.position.distanceTo(character.target.position);
                this.classroom.audios[uuid].volume = Math.max((MAXIMUM_AUDIBLE_DISTANCE - distance) / MAXIMUM_AUDIBLE_DISTANCE, 0);
            }
        });
    }
}
exports.MainScene = MainScene;
if (window.location.protocol != 'https:' && location.hostname !== "localhost") {
    location.href = location.href.replace("http://", "https://");
}
window.addEventListener('load', () => {
    enable3d_1.PhysicsLoader('ammo', () => {
        const project = new enable3d_1.Project({ antialias: true, maxSubSteps: 10, gravity: { x: 0, y: -9.81, z: 0 }, fixedTimeStep: 1 / 120, scenes: [MainScene] });
        project.canvas.style.marginTop = '0px !important';
        const htmlContainer = document.getElementById('classroom');
        if (!htmlContainer)
            throw ("Can't find an html element with id classroom");
        htmlContainer.appendChild(project.canvas);
        project.canvas.style.marginTop = '0px !important';
        const resize = () => {
            const newWidth = window.innerWidth;
            const newHeight = window.innerHeight;
            htmlContainer.style.width = `${newWidth}px`;
            htmlContainer.style.height = `${newHeight}px`;
            project.renderer.setSize(newWidth, newHeight);
            if ('aspect' in project.camera)
                project.camera.aspect = newWidth / newHeight;
            project.camera.updateProjectionMatrix();
        };
        window.onresize = resize;
        resize();
    });
});


/***/ }),

/***/ "./src/modules/Chair.ts":
/*!******************************!*\
  !*** ./src/modules/Chair.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Chair = void 0;
const enable3d_1 = __webpack_require__(/*! enable3d */ "./node_modules/enable3d/dist/index.js");
const loader = new enable3d_1.THREE.TextureLoader();
class Chair extends enable3d_1.ExtendedObject3D {
    constructor() {
        super();
        const group = new enable3d_1.THREE.Group();
        const material = new enable3d_1.THREE.MeshBasicMaterial({
            color: 0xFF8844,
            map: loader.load('./resources/textures/wood.jpg'),
        });
        this.add(new enable3d_1.THREE.Mesh(new enable3d_1.THREE.BoxGeometry(0.1, 1, 0.1).translate(0.45, 0.5, 0.45))); // Leg 1
        this.add(new enable3d_1.THREE.Mesh(new enable3d_1.THREE.BoxGeometry(0.1, 1, 0.1).translate(0.45, 0.5, -0.45))); // Leg 2
        this.add(new enable3d_1.THREE.Mesh(new enable3d_1.THREE.BoxGeometry(0.1, 1, 0.1).translate(-0.45, 0.5, 0.45))); // Leg 3
        this.add(new enable3d_1.THREE.Mesh(new enable3d_1.THREE.BoxGeometry(0.1, 1, 0.1).translate(-0.45, 0.5, -0.45))); // Leg 4
        this.add(new enable3d_1.THREE.Mesh(new enable3d_1.THREE.BoxGeometry(1, 0.11, 1).translate(0, 1, 0))); // Seat
        this.add(new enable3d_1.THREE.Mesh(new enable3d_1.THREE.BoxGeometry(0.1, 1.3, 1).translate(0.5, 1.6, 0))); // Side
        this.traverse((child) => {
            if (child.isMesh) {
                child.castShadow = true;
                child.receiveShadow = true;
                child.material = material;
                child.material.roughness = 0.5;
                child.material.metalness = 0.5;
            }
        });
        this.scale.setScalar(0.43);
    }
    addToWorld(scene) {
        scene.add.existing(this);
        scene.physics.add.existing(this, {
            shape: 'box',
            width: 0.5,
            height: 1,
            offset: { y: -0.25 },
            mass: 100000
        });
        this.body.setFriction(100);
        this.body.setCollisionFlags(0);
        this.body.setAngularFactor(0, 0, 0);
        // https://docs.panda3d.org/1.10/python/programming/physics/bullet/ccd
        this.body.setCcdMotionThreshold(1e-7);
        this.body.setCcdSweptSphereRadius(0.25);
    }
}
exports.Chair = Chair;


/***/ }),

/***/ "./src/modules/Character.ts":
/*!**********************************!*\
  !*** ./src/modules/Character.ts ***!
  \**********************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Character = void 0;
const enable3d_1 = __webpack_require__(/*! enable3d */ "./node_modules/enable3d/dist/index.js");
const __1 = __webpack_require__(/*! .. */ "./src/index.ts");
const DEFAULT_VECTOR_3 = new enable3d_1.THREE.Vector3();
const MOVEMENT_SPEED = 3.5;
class Character {
    constructor(params) {
        var _a;
        this.lookingAt = new enable3d_1.THREE.Vector3();
        this.isMovingForward = false;
        this.isSitting = false;
        this.params = params;
        this.color = (_a = params.color) !== null && _a !== void 0 ? _a : new enable3d_1.THREE.Color(0xFFFFFF);
        this.loadCharacter();
    }
    loadCharacter() {
        var _a;
        return __awaiter(this, void 0, void 0, function* () {
            const object = yield this.params.scene.load.gltf('man');
            const man = object.scene.children[0];
            this.target = new enable3d_1.ExtendedObject3D();
            this.target.name = 'character';
            this.target.rotateY(Math.PI + 0.1); // a hack
            this.target.add(man);
            this.target.rotation.set(0, Math.PI * 1.5, 0);
            const initialPosition = (_a = this.params.initialPosition) !== null && _a !== void 0 ? _a : new enable3d_1.THREE.Vector3();
            initialPosition.setY(initialPosition.y);
            this.target.position.set(...initialPosition.toArray());
            // Add shadow and Color
            this.target.traverse((child) => {
                if (child.isMesh && child.name != 'name-label') {
                    child.castShadow = true;
                    child.receiveShadow = true;
                    child.material.color.set(this.color);
                    child.material.roughness = 0.5;
                    child.material.metalness = 0.5;
                }
            });
            /**
            * Animations
            */
            // ad the box man's animation mixer to the animationMixers array (for auto updates)
            this.params.scene.animationMixers.add(this.target.animation.mixer);
            object.animations.forEach(animation => {
                var _a;
                if (animation.name)
                    (_a = this.target) === null || _a === void 0 ? void 0 : _a.animation.add(animation.name, animation);
            });
            this.target.animation.play('idle');
            /**
            * Add the player to the scene with a body
            */
            this.params.scene.add.existing(this.target);
            this.addPhysics();
            if (this.params.onReady) {
                this.params.onReady(this);
            }
        });
    }
    setColor(color) {
        var _a;
        this.color = color;
        (_a = this.target) === null || _a === void 0 ? void 0 : _a.traverse((child) => {
            if (child.isMesh && child.name != 'name-label') {
                child.material.color.set(this.color);
            }
        });
    }
    addNameLabel(name) {
        var _a;
        if (this.nameLabel) {
            (_a = this.target) === null || _a === void 0 ? void 0 : _a.remove(this.nameLabel);
        }
        var canvas = document.createElement('canvas');
        var ctx = canvas.getContext("2d");
        if (ctx) {
            ctx.canvas.height = 300;
            ctx.canvas.height = 40;
            ctx.fillStyle = "rgba(255,255,255,1)";
            ctx.font = "25px Arial";
            ctx.textAlign = 'center';
            ctx.strokeStyle = '#000000';
            ctx.lineWidth = 8;
            ctx.strokeText(name, 150, 27.5);
            ctx.fillText(name, 150, 27.5);
        }
        var texture = new enable3d_1.THREE.Texture(canvas);
        texture.needsUpdate = true;
        const nameLabel = new enable3d_1.THREE.Mesh(new enable3d_1.THREE.PlaneGeometry(1, 0.15), new enable3d_1.THREE.MeshBasicMaterial({ map: texture, side: enable3d_1.THREE.DoubleSide, transparent: true }));
        nameLabel.name = 'name-label';
        nameLabel.position.setY(1.25);
        this.nameLabel = nameLabel;
        const attatchToTarget = () => {
            if (this.target)
                this.target.add(nameLabel);
            else {
                setTimeout(attatchToTarget, 1000);
            }
        };
        attatchToTarget();
    }
    update(time, delta) {
        var _a, _b;
        if (!((_a = this.target) === null || _a === void 0 ? void 0 : _a.body))
            return;
        const rotation = this.isSitting == false ? this.lookingAt : new enable3d_1.THREE.Vector3(-1000000, 0, 0);
        const theta = Math.atan2(rotation.x, rotation.z);
        this.target.body.setAngularVelocityY(0);
        const rotationMan = this.target.getWorldDirection(DEFAULT_VECTOR_3);
        const thetaMan = Math.atan2(rotationMan.x, rotationMan.z);
        const l = Math.abs(theta - thetaMan);
        let rotationSpeed = __1.isTouchDevice ? 2 : 4;
        let d = Math.PI / 24;
        if (l > d) {
            if (l > Math.PI - d)
                rotationSpeed *= -1;
            if (theta < thetaMan)
                rotationSpeed *= -1;
            this.target.body.setAngularVelocityY(rotationSpeed);
        }
        switch (this.target.animation.current) {
            case 'idle':
                if (this.isMovingForward == true) {
                    this.target.animation.play('run');
                    break;
                }
                if (this.isSitting == true) {
                    this.target.animation.play('sit_down_right', undefined, false);
                    this.target.body.setVelocityY(3.2);
                    setTimeout(() => { var _a; return (_a = this.target) === null || _a === void 0 ? void 0 : _a.body.setVelocityX(1); }, 100);
                    break;
                }
                break;
            case 'run':
                if (this.isMovingForward == false) {
                    this.target.animation.play('idle');
                    break;
                }
                this.updateMovement(theta);
                break;
            case 'sit_down_right':
                if (this.isSitting == false) {
                    this.target.body.setVelocity(-1, 2, 0);
                    this.target.animation.play('idle');
                    break;
                }
        }
        /**
         * Player Label Update
         */
        (_b = this.nameLabel) === null || _b === void 0 ? void 0 : _b.lookAt(this.params.scene.camera.position);
    }
    updateMovement(theta) {
        var _a;
        if (!((_a = this.target) === null || _a === void 0 ? void 0 : _a.body))
            return;
        const x = Math.sin(theta) * MOVEMENT_SPEED, y = this.target.body.velocity.y, z = Math.cos(theta) * MOVEMENT_SPEED;
        this.target.body.setVelocity(x, y, z);
    }
    correctPosition(newPosition, lookingAt) {
        if (this.target) {
            // this.
            // this.target.body.setPosition(...newPosition.toArray());
            // this.target.body.needUpdate = true;
            // this.target.body.refresh();
        }
    }
    addPhysics() {
        if (this.target) {
            this.params.scene.physics.add.existing(this.target, {
                shape: 'sphere',
                radius: 0.25,
                width: 0.5,
                offset: { y: -0.25 },
                mass: 100
            });
            this.target.body.setFriction(100);
            this.target.body.setAngularFactor(0, 0, 0);
            this.target.body.setCollisionFlags(0);
            // https://docs.panda3d.org/1.10/python/programming/physics/bullet/ccd
            this.target.body.setCcdMotionThreshold(1e-7);
            this.target.body.setCcdSweptSphereRadius(0.25);
            this.target.body.needUpdate = true;
        }
    }
    delete() {
        if (this.target)
            this.params.scene.scene.remove(this.target);
    }
}
exports.Character = Character;


/***/ }),

/***/ "./src/modules/CharacterController.ts":
/*!********************************************!*\
  !*** ./src/modules/CharacterController.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CharacterController = void 0;
const enable3d_1 = __webpack_require__(/*! enable3d */ "./node_modules/enable3d/dist/index.js");
const __1 = __webpack_require__(/*! .. */ "./src/index.ts");
const DEFAULT_VECTOR_3 = new enable3d_1.THREE.Vector3();
const MOUSE_SENSITIVITY = 0.25;
class CharacterController {
    constructor(params) {
        this.keys = {
            w: { isDown: false },
        };
        this.mouseMovementX = 0;
        this.mouseMovementY = 0;
        this.params = params;
        this.character = params.character;
        this.controls = new enable3d_1.ThirdPersonControls(this.params.camera, this.character.target, {
            offset: new enable3d_1.THREE.Vector3(0, 1, 0),
            targetRadius: 3,
            theta: 300
        });
        // Map Input
        const press = (e, isDown) => {
            if (this.params.scene.classroom.isPlaying != true)
                return true;
            switch (e.keyCode) {
                case 87: // w
                    this.keys.w.isDown = isDown;
                    e.preventDefault();
                    break;
                case 67: // c
                    if (isDown == false) {
                        this.toggleSitDown();
                    }
                    e.preventDefault();
                    break;
            }
            this.syncMovement();
        };
        document.addEventListener('keydown', e => press(e, true));
        document.addEventListener('keyup', e => press(e, false));
        /**
        * Add Pointer Lock and Pointer Drag
        */
        if (!__1.isTouchDevice) {
            let pl = new enable3d_1.PointerLock(this.params.scene.canvas);
            let pd = new enable3d_1.PointerDrag(this.params.scene.canvas);
            pd.onMove(delta => {
                if (pl.isLocked()) {
                    this.mouseMovementY = -delta.y * MOUSE_SENSITIVITY;
                    this.mouseMovementX = delta.x * MOUSE_SENSITIVITY;
                }
            });
        }
    }
    toggleSitDown() {
        var _a, _b;
        // Find Nearby Chair
        if (!this.character.target)
            return;
        if (this.character.isSitting == true) {
            this.character.isSitting = false;
        }
        else {
            const x = (_b = (_a = this.character) === null || _a === void 0 ? void 0 : _a.target) === null || _b === void 0 ? void 0 : _b.position;
            let distance = 1000000;
            let chair = this.params.scene.chairs[0];
            this.params.scene.chairs.forEach(c => {
                if (c.position.distanceTo(x) < distance) {
                    distance = c.position.distanceTo(x);
                    chair = c;
                }
            });
            if (distance < 1) {
                this.character.isSitting = true;
            }
        }
        this.params.scene.classroom.handleMySitDown(this.character.isSitting);
    }
    syncMovement() {
        var _a, _b, _c;
        this.params.scene.classroom.handleMyMovement(this.keys.w.isDown, {
            x: (_a = this.character.target) === null || _a === void 0 ? void 0 : _a.position.x,
            y: (_b = this.character.target) === null || _b === void 0 ? void 0 : _b.position.y,
            z: (_c = this.character.target) === null || _c === void 0 ? void 0 : _c.position.z,
        });
    }
    syncLookingAt() {
        this.params.scene.classroom.syncMyLookingAt(this.character.lookingAt.toArray());
    }
    update(time, delta) {
        var _a;
        this.character.update(time, delta);
        if ((_a = this.character.target) === null || _a === void 0 ? void 0 : _a.body) {
            /**
            * Update Controls
            */
            this.controls.update(this.mouseMovementX * 3, -this.mouseMovementY * 3);
            if (!__1.isTouchDevice)
                this.mouseMovementX = this.mouseMovementY = 0;
            /**
            * Player Turn
            */
            const oldLookAt = this.character.lookingAt.clone();
            this.character.lookingAt = this.params.camera.getWorldDirection(DEFAULT_VECTOR_3);
            if (!oldLookAt.equals(this.character.lookingAt))
                this.syncLookingAt(); // Sync Lookat
            /**
            * Player Move
            */
            this.character.isMovingForward = this.keys.w.isDown;
        }
    }
}
exports.CharacterController = CharacterController;


/***/ }),

/***/ "./src/modules/Classroom3D.ts":
/*!************************************!*\
  !*** ./src/modules/Classroom3D.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.addClassroomToScene = exports.DEFAULT_BOARD_MATERIAL = exports.textureLoader = void 0;
const enable3d_1 = __webpack_require__(/*! enable3d */ "./node_modules/enable3d/dist/index.js");
exports.textureLoader = new enable3d_1.THREE.TextureLoader();
exports.DEFAULT_BOARD_MATERIAL = exports.textureLoader.load('./resources/textures/board.jpg');
function addClassroomToScene(scene) {
    // Floor
    const floorTexture = exports.textureLoader.load('./resources/textures/floor.jpg');
    floorTexture.wrapS = floorTexture.wrapT = enable3d_1.THREE.RepeatWrapping;
    floorTexture.repeat.set(8, 8);
    const floorMaterial = new enable3d_1.THREE.MeshStandardMaterial({
        color: 0xC1C1C1,
        map: floorTexture
    });
    floorMaterial.roughness = 1;
    floorMaterial.metalness = 0;
    const plane = scene.physics.add.box({ width: 18, height: 0.3, depth: 14, mass: 0 });
    plane.material = floorMaterial;
    plane.body.setGravity(0, 10, 0);
    plane.body.setFriction(1);
    plane.rotation.set(Math.PI / 2, 0, 0);
    plane.receiveShadow = true;
    // Walls
    const wallTexture = exports.textureLoader.load('./resources/textures/wall.jpg');
    wallTexture.wrapS = wallTexture.wrapT = enable3d_1.THREE.RepeatWrapping;
    wallTexture.repeat.set(4, 2);
    const wallMaterial = new enable3d_1.THREE.MeshStandardMaterial({
        color: 0xC1C1C1,
        map: wallTexture
    });
    wallMaterial.roughness = 1;
    wallMaterial.metalness = 0;
    const walls = [
        scene.physics.add.box({ width: 0.3, height: 5, depth: 14, mass: 0, x: 9, y: 2 }),
        scene.physics.add.box({ width: 0.3, height: 5, depth: 14, mass: 0, x: -9, y: 2 }),
        scene.physics.add.box({ width: 18, height: 5, depth: 0.3, mass: 0, z: 7, y: 2 }),
        scene.physics.add.box({ width: 18, height: 5, depth: 0.3, mass: 0, z: -7, y: 2 }),
    ];
    walls.forEach(wall => {
        wall.body.setFriction(0);
        wall.material = wallMaterial;
        wall.receiveShadow = true;
        wall.castShadow = false;
    });
    const roof = scene.physics.add.box({ width: 18, height: 0.3, depth: 14, mass: 0, y: 4.5 });
    roof.castShadow = false;
    roof.receiveShadow = false;
    roof.material = floorMaterial;
    // White Board
    const boardBorder = new enable3d_1.THREE.Mesh(new enable3d_1.THREE.BoxGeometry(0.1, 3.1, 6.1), new enable3d_1.THREE.MeshStandardMaterial({ color: 0xAAAA00 }));
    boardBorder.receiveShadow = true;
    boardBorder.position.set(-8.86, 2.5, 0);
    scene.add.existing(boardBorder);
    const board = new enable3d_1.THREE.Mesh(new enable3d_1.THREE.BoxGeometry(0.1, 3, 6), new enable3d_1.THREE.MeshStandardMaterial({ color: 0xFFFFFF, roughness: 1 }));
    board.receiveShadow = true;
    board.material.map = exports.DEFAULT_BOARD_MATERIAL;
    board.position.set(-8.85, 2.5, 0);
    scene.add.existing(board);
    scene.projectionScreen = board;
}
exports.addClassroomToScene = addClassroomToScene;


/***/ }),

/***/ "./src/modules/ClassroomManager.ts":
/*!*****************************************!*\
  !*** ./src/modules/ClassroomManager.ts ***!
  \*****************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";

var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ClassroomManager = void 0;
const socket_io_client_1 = __webpack_require__(/*! socket.io-client */ "./node_modules/socket.io-client/build/index.js");
const enable3d_1 = __webpack_require__(/*! enable3d */ "./node_modules/enable3d/dist/index.js");
const __1 = __webpack_require__(/*! .. */ "./src/index.ts");
const peerjs_1 = __importDefault(__webpack_require__(/*! peerjs */ "./node_modules/peerjs/dist/peerjs.min.js"));
const Classroom3D_1 = __webpack_require__(/*! ./Classroom3D */ "./src/modules/Classroom3D.ts");
const SOCKET_ADDRESS = "ws://localhost:3500";
const PEER_CONFIG = {
    debug: 3,
    config: {
        iceTransportPolicy: "relay",
        'iceServers': [
            {
                // iceTransportPolicy:"relay",
                urls: 'stun:stun1.l.google.com:19302'
            },
            {
                // iceTransportPolicy:"relay",
                urls: 'turn:20.198.6.107:3478?transport=tcp',
                credential: '1234',
                username: 'caleum'
            }
        ]
    }
};
class ClassroomManager {
    constructor(scene) {
        this.isPlaying = false;
        this.emitHistory = {};
        this.myMediaStream = new MediaStream();
        this.peers = {};
        this.audios = {};
        this.isSocketReady = false;
        this.isAudioReady = false;
        this.isStartButtonLocked = false;
        this.links = [];
        this.activeLink = 0;
        this.scene = scene;
        const joinButton = document.getElementById('button');
        this.myAudio = document.createElement('audio');
        this.myAudio.muted = true;
        // Peer JS Connection
        this.logEvent("Connecting to voice chat manager...");
        this.myPeer = new peerjs_1.default(undefined, PEER_CONFIG);
        this.myPeer.on('error', (e) => { this.logEvent("Could't connect to voice chat manager", "error"); });
        // Microphone Permission
        this.logEvent('Waiting for your permission for microphone...');
        navigator.mediaDevices.getUserMedia({
            video: false,
            audio: true
        }).then(stream => {
            this.logEvent('Microphone permission granted', 'success');
            this.myMediaStream = stream;
        }).catch((e) => {
            this.logEvent("Revoked Microphone Permission. Users won't hear you", 'error');
        });
        // Peer JS Connection
        this.myPeer.on('open', () => {
            var _a;
            console.log("Peer JS connected");
            this.logEvent("Connected to voice chat manager", "success");
            joinButton.disabled = false;
            (_a = document.getElementById("button")) === null || _a === void 0 ? void 0 : _a.addEventListener("click", () => this.onSubmitInput());
        });
        document.addEventListener('keypress', (e) => {
            this.handleKeyEvents(e);
        });
    }
    onSubmitInput() {
        var _a;
        document.getElementById("button").disabled = true;
        const name = (_a = document.getElementById("username")) === null || _a === void 0 ? void 0 : _a.value;
        try {
            this.tryValidateInput(name);
        }
        catch (e) {
            document.getElementById("button").disabled = false;
            return;
        }
        this.username = name;
        this.startConnections();
    }
    startConnections() {
        // const socket = this.socket = io(SOCKET_ADDRESS);
        const socket = this.socket = socket_io_client_1.io();
        this.logEvent("Connecting with server");
        socket.on('connect', () => {
            this.logEvent("Sending data to server");
            socket.emit('init', { uuid: this.myPeer.id, username: this.username, initialPosition: __1.mainCharacterinitialPosition.toArray() }, (data) => {
                this.handleInitResponse(data);
                this.fadeOutMenu().then(() => this.startClassroom());
                this.logEvent("Connected", "success");
            });
            // this.autoCorrectStateOnIntervals();
            this.handlerSocketEvents(socket);
            this.handleCalls();
        });
    }
    tryValidateInput(name) {
        if (!name)
            throw ("Can't find element with id `username`");
        if (name.length < 3) {
            alert("Name too short");
            throw ('Error');
        }
    }
    fadeOutMenu(DURATION = 300) {
        return new Promise((resolve, reject) => {
            const menuUI = document.getElementById("menu");
            const NUMBER_OF_FRAMES = 20;
            const x = setInterval(() => {
                const newOpacity = Number(window.getComputedStyle(menuUI).getPropertyValue("opacity")) - 1 / NUMBER_OF_FRAMES;
                menuUI.style.opacity = newOpacity.toString();
                if (newOpacity <= 0) {
                    resolve(null);
                    menuUI.style.display = "none";
                    clearInterval(x);
                }
            }, DURATION / NUMBER_OF_FRAMES);
        });
    }
    startClassroom() {
        this.isPlaying = true;
    }
    handleKeyEvents(e) {
        var _a, _b;
        if (!this.isPlaying)
            return;
        switch (e.key) {
            case 'p':
            case 'P':
                e.preventDefault();
                document.getElementById('links').style.display = 'flex';
                const elm = document.getElementById('linksTextarea').focus();
                break;
            case '[':
            case '{':
                if (this.activeLink > 0) {
                    (_a = this.socket) === null || _a === void 0 ? void 0 : _a.emit('update-active-link', this.activeLink - 1);
                    this.logEvent('Switching to previous slide');
                }
                else {
                    this.logEvent('Current slide is the first one');
                }
                break;
            case ']':
            case '}':
                if (this.activeLink < this.links.length - 1) {
                    (_b = this.socket) === null || _b === void 0 ? void 0 : _b.emit('update-active-link', this.activeLink + 1);
                    this.logEvent('Switching to next slide');
                }
                else {
                    this.logEvent('Current slide is the last one');
                }
                break;
            case 'o':
            case 'O':
                if (this.links.length > 0) {
                    e.preventDefault();
                    const screen = document.getElementById('screen');
                    screen.style.display = screen.style.display == 'block' ? 'none' : 'block';
                }
                else {
                    this.logEvent('No Active Slide', 'error');
                }
                break;
            case 'Enter':
                const input = document.getElementById('linksTextarea');
                if (input == document.activeElement) {
                    e.preventDefault();
                    this.serveMediaLinks(input.value);
                    document.getElementById('links').style.display = 'none';
                    document.getElementsByTagName('canvas')[0].focus();
                }
                break;
        }
    }
    autoCorrectStateOnIntervals() {
        const x = setInterval(() => {
            var _a, _b, _c;
            const target = (_a = this.scene.mainCharacter) === null || _a === void 0 ? void 0 : _a.target;
            if (target) {
                if (((_b = this.scene.mainCharacter) === null || _b === void 0 ? void 0 : _b.isMovingForward) == false) {
                    (_c = this.socket) === null || _c === void 0 ? void 0 : _c.emit('state-correction', target.position.toArray(), this.scene.mainCharacter.lookingAt.toArray());
                }
            }
        }, 1000);
    }
    handleInitResponse(data) {
        this.scene.setMainCharacterColorFromString(data.color);
        data.otherUsers.forEach(user => {
            this.scene.addSubCharacter(user);
            // Voice Chat
            this.callNewUser(user.uuid);
        });
    }
    handlerSocketEvents(socket) {
        socket.on('new-user', (newUser) => {
            this.logEvent(`New User ${newUser.username} Joined`);
            this.scene.addSubCharacter(newUser);
        });
        socket.on('movement', (uuid, isMovingForward) => {
            const character = this.scene.subCharacters[uuid];
            if (character) {
                character.isMovingForward = isMovingForward;
            }
            else {
                console.error(`Movement failed : ${uuid} is not in the character list `);
            }
        });
        socket.on('lookingAt', (uuid, lookingAt) => {
            if (this.scene.subCharacters[uuid])
                this.scene.subCharacters[uuid].lookingAt.set(...lookingAt);
            else
                console.error(`LooingAt failed : ${uuid} is not in the character list `);
        });
        socket.on('isSitting', (uuid, isSitting) => {
            if (this.scene.subCharacters[uuid])
                this.scene.subCharacters[uuid].isSitting = isSitting;
            else
                console.error(`isSitting failed : ${uuid} is not in the character list `);
        });
        socket.on('state-correction', (uuid, position, lookingAt) => {
            if (this.scene.subCharacters[uuid]) {
                this.scene.subCharacters[uuid].correctPosition(new enable3d_1.THREE.Vector3(...position), new enable3d_1.THREE.Vector3(...lookingAt));
            }
            else
                console.error(`State Correction failed : ${uuid} is not in the character list `);
        });
        socket.on('update-links', (links) => {
            this.activeLink = 0;
            links = links.trim();
            this.links = links.split('\n');
            if (this.scene.projectionScreen) {
                this.logEvent("Slides Updated");
                if (links.length > 0) {
                    this.scene.projectionScreen.material.map = Classroom3D_1.textureLoader.load(this.links[0]);
                    console.log(document.getElementById('screen'));
                    document.getElementById('screen').style.backgroundImage = `url(${this.links[0]}`;
                }
                else {
                    this.scene.projectionScreen.material.map = Classroom3D_1.DEFAULT_BOARD_MATERIAL;
                }
            }
        });
        socket.on('update-active-link', (activeLink) => {
            if (0 <= activeLink && activeLink < this.links.length) {
                if (this.scene.projectionScreen) {
                    this.activeLink = activeLink;
                    this.scene.projectionScreen.material.map = Classroom3D_1.textureLoader.load(this.links[activeLink]);
                    document.getElementById('screen').style.backgroundImage = `url(${this.links[activeLink]}`;
                }
            }
        });
        socket.on('user-exit', (uuid) => {
            const character = this.scene.subCharacters[uuid];
            if (character) {
                this.logEvent(`${character.params.name} exited`);
                character.delete();
                delete this.scene.subCharacters[uuid];
            }
            else {
                console.error(`User exit failed : ${uuid} is not in the character list `);
            }
            if (this.peers[uuid]) {
                this.peers[uuid].close();
                delete this.peers[uuid];
            }
            ;
        });
        socket.on('disconnect', () => {
            this.logEvent("Connection to server is lost", 'error');
            const TIME_LIMIT_SECONDS = 10;
            for (let i = TIME_LIMIT_SECONDS; i > 0; i--) {
                setTimeout(() => this.logEvent(`Reloading in ${i} seconds`, 'error'), (TIME_LIMIT_SECONDS - i) * 1000);
            }
            setTimeout(() => {
                this.logEvent(`Reloading...`, 'error');
                location.reload();
            }, TIME_LIMIT_SECONDS * 1000);
        });
    }
    handleMyMovement(isMovingForward, position) {
        var _a;
        if (this.emitHistory['isMovingForward'] && this.emitHistory['isMovingForward'].data == isMovingForward) {
            if (this.emitHistory['isMovingForward'].sameDataCounter++ != 10)
                return;
        }
        ;
        this.emitHistory['isMovingForward'] = {
            sameDataCounter: 0,
            data: isMovingForward
        };
        (_a = this.socket) === null || _a === void 0 ? void 0 : _a.emit('movement', isMovingForward, position);
    }
    syncMyLookingAt(lookingAt) {
        var _a;
        // if(this.emitHistory['lookingAt']){
        // 	if(JSON.stringify(this.emitHistory['lookingAt'].data) == JSON.stringify(lookingAt)){
        // 		this.emitHistory['lookingAt'].sameDataCounter = 0;
        // 		return;
        // 	}
        // 	else{
        // 		if(this.emitHistory['lookingAt'].sameDataCounter++ != 0) return;
        // 	}
        // };
        this.emitHistory['lookingAt'] = {
            sameDataCounter: 0,
            data: lookingAt
        };
        (_a = this.socket) === null || _a === void 0 ? void 0 : _a.emit('lookingAt', lookingAt);
    }
    handleMySitDown(isSitting) {
        var _a;
        (_a = this.socket) === null || _a === void 0 ? void 0 : _a.emit('isSitting', isSitting);
    }
    serveMediaLinks(links) {
        var _a;
        (_a = this.socket) === null || _a === void 0 ? void 0 : _a.emit('update-links', links);
        this.logEvent("Updating Slides");
    }
    // Voice Chat
    handleCalls() {
        this.myPeer.on('call', call => {
            console.log(`New Call from ${call.peer}`);
            call.answer(this.myMediaStream);
            const audio = document.createElement('audio');
            call.on('stream', userAudioStream => this.addAudioStream(call.peer, audio, userAudioStream));
            call.on('close', () => {
                audio.remove();
                if (this.audios[call.peer])
                    delete this.audios[call.peer];
            });
        });
    }
    callNewUser(uuid) {
        console.log(`Calling User ${uuid}`);
        const call = this.myPeer.call(uuid, this.myMediaStream);
        const audio = document.createElement('audio');
        call.on('stream', userAudioStream => { this.addAudioStream(uuid, audio, userAudioStream); });
        call.on('close', () => {
            audio.remove();
            if (this.audios[uuid])
                delete this.audios[uuid];
        });
        this.peers[uuid] = call;
    }
    addAudioStream(uuid, audio, stream) {
        audio.srcObject = stream;
        audio.addEventListener('loadedmetadata', () => { audio.play(); });
        this.audios[uuid] = audio;
    }
    // Logging
    logEvent(text, type = undefined) {
        const li = document.createElement("li");
        if (type == 'error')
            text = "ERROR: " + text;
        li.innerHTML = text;
        if (type)
            li.className = "log-" + type;
        const console = document.getElementById("console");
        console.appendChild(li);
        console.scrollTop = console.scrollHeight;
    }
}
exports.ClassroomManager = ClassroomManager;


/***/ }),

/***/ "./src/modules/data.ts":
/*!*****************************!*\
  !*** ./src/modules/data.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.chairPositions = void 0;
exports.chairPositions = [
    [-2, -3], [0, -3], [2, -3], [4, -3], [6, -3],
    [-2, -1], [0, -1], [2, -1], [4, -1], [6, -1],
    [-2, 1], [0, 1], [2, 1], [4, 1], [6, 1],
    [-2, 3], [0, 3], [2, 3], [4, 3], [6, 3],
];


/***/ }),

/***/ "./node_modules/yeast/index.js":
/*!*************************************!*\
  !*** ./node_modules/yeast/index.js ***!
  \*************************************/
/***/ ((module) => {

"use strict";


var alphabet = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_'.split('')
  , length = 64
  , map = {}
  , seed = 0
  , i = 0
  , prev;

/**
 * Return a string representing the specified number.
 *
 * @param {Number} num The number to convert.
 * @returns {String} The string representation of the number.
 * @api public
 */
function encode(num) {
  var encoded = '';

  do {
    encoded = alphabet[num % length] + encoded;
    num = Math.floor(num / length);
  } while (num > 0);

  return encoded;
}

/**
 * Return the integer value specified by the given string.
 *
 * @param {String} str The string to convert.
 * @returns {Number} The integer value represented by the string.
 * @api public
 */
function decode(str) {
  var decoded = 0;

  for (i = 0; i < str.length; i++) {
    decoded = decoded * length + map[str.charAt(i)];
  }

  return decoded;
}

/**
 * Yeast: A tiny growing id generator.
 *
 * @returns {String} A unique id.
 * @api public
 */
function yeast() {
  var now = encode(+new Date());

  if (now !== prev) return seed = 0, prev = now;
  return now +'.'+ encode(seed++);
}

//
// Map each character to its index.
//
for (; i < length; i++) map[alphabet[i]] = i;

//
// Expose the `yeast`, `encode` and `decode` functions.
//
yeast.encode = encode;
yeast.decode = decode;
module.exports = yeast;


/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module is referenced by other modules so it can't be inlined
/******/ 	var __webpack_exports__ = __webpack_require__("./src/index.ts");
/******/ 	
/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90aHJlZWpzLWFtbW9qcy13ZWJwYWNrLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvYmFja28yL2luZGV4LmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9iYXNlNjQtYXJyYXlidWZmZXIvbGliL2Jhc2U2NC1hcnJheWJ1ZmZlci5qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWFtbW9qcy13ZWJwYWNrLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvY29tcG9uZW50LWVtaXR0ZXIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL2VuYWJsZTNkL2Rpc3QvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL2VuYWJsZTNkL2Rpc3QvcHJvamVjdC5qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWFtbW9qcy13ZWJwYWNrLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvZW5hYmxlM2QvZGlzdC9zY2VuZTNkLmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9lbmFibGUzZC9ub2RlX21vZHVsZXMvQGVuYWJsZTNkL2FtbW8tcGh5c2ljcy9kaXN0L2NvbGxpc2lvbkV2ZW50cy5qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWFtbW9qcy13ZWJwYWNrLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvZW5hYmxlM2Qvbm9kZV9tb2R1bGVzL0BlbmFibGUzZC9hbW1vLXBoeXNpY3MvZGlzdC9jb25zdHJhaW50cy5qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWFtbW9qcy13ZWJwYWNrLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvZW5hYmxlM2Qvbm9kZV9tb2R1bGVzL0BlbmFibGUzZC9hbW1vLXBoeXNpY3MvZGlzdC9jb252ZXhPYmplY3RCcmVha2VyLmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9lbmFibGUzZC9ub2RlX21vZHVsZXMvQGVuYWJsZTNkL2FtbW8tcGh5c2ljcy9kaXN0L2RlYnVnRHJhd2VyLmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9lbmFibGUzZC9ub2RlX21vZHVsZXMvQGVuYWJsZTNkL2FtbW8tcGh5c2ljcy9kaXN0L2luZGV4LmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9lbmFibGUzZC9ub2RlX21vZHVsZXMvQGVuYWJsZTNkL2FtbW8tcGh5c2ljcy9kaXN0L2xpYi9DbG9jay5qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWFtbW9qcy13ZWJwYWNrLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvZW5hYmxlM2Qvbm9kZV9tb2R1bGVzL0BlbmFibGUzZC9hbW1vLXBoeXNpY3MvZGlzdC9waHlzaWNzLmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9lbmFibGUzZC9ub2RlX21vZHVsZXMvQGVuYWJsZTNkL2FtbW8tcGh5c2ljcy9kaXN0L3JheWNhc3Rlci9hbGxIaXRzUmF5UmVzdWx0Q2FsbGJhY2suanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL2VuYWJsZTNkL25vZGVfbW9kdWxlcy9AZW5hYmxlM2QvYW1tby1waHlzaWNzL2Rpc3QvcmF5Y2FzdGVyL2Nsb3Nlc3RSYXlSZXN1bHRDYWxsYmFjay5qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWFtbW9qcy13ZWJwYWNrLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvZW5hYmxlM2Qvbm9kZV9tb2R1bGVzL0BlbmFibGUzZC9hbW1vLXBoeXNpY3MvZGlzdC9yYXljYXN0ZXIvcmF5Y2FzdGVyLmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9lbmFibGUzZC9ub2RlX21vZHVsZXMvQGVuYWJsZTNkL2FtbW8tcGh5c2ljcy9kaXN0L3NoYXBlcy5qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWFtbW9qcy13ZWJwYWNrLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvZW5hYmxlM2Qvbm9kZV9tb2R1bGVzL0BlbmFibGUzZC9hbW1vLXBoeXNpY3MvZGlzdC90aHJlZS10by1hbW1vLmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9lbmFibGUzZC9ub2RlX21vZHVsZXMvQGVuYWJsZTNkL2FtbW8tcGh5c2ljcy9kaXN0L3RvcnVzU2hhcGUuanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL2VuYWJsZTNkL25vZGVfbW9kdWxlcy9AZW5hYmxlM2QvY29tbW9uL2Rpc3QvYXBwbHlNaXhpbnMuanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL2VuYWJsZTNkL25vZGVfbW9kdWxlcy9AZW5hYmxlM2QvY29tbW9uL2Rpc3QvZGVmYXVsdE1hdGVyaWFsLmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9lbmFibGUzZC9ub2RlX21vZHVsZXMvQGVuYWJsZTNkL2NvbW1vbi9kaXN0L2V4dGVuZGVkR3JvdXAuanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL2VuYWJsZTNkL25vZGVfbW9kdWxlcy9AZW5hYmxlM2QvY29tbW9uL2Rpc3QvZXh0ZW5kZWRNZXNoLmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9lbmFibGUzZC9ub2RlX21vZHVsZXMvQGVuYWJsZTNkL2NvbW1vbi9kaXN0L2V4dGVuZGVkT2JqZWN0M0QuanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL2VuYWJsZTNkL25vZGVfbW9kdWxlcy9AZW5hYmxlM2QvY29tbW9uL2Rpc3QvZmFjdG9yaWVzLmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9lbmFibGUzZC9ub2RlX21vZHVsZXMvQGVuYWJsZTNkL2NvbW1vbi9kaXN0L2xvZ2dlci5qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWFtbW9qcy13ZWJwYWNrLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvZW5hYmxlM2Qvbm9kZV9tb2R1bGVzL0BlbmFibGUzZC9jb21tb24vZGlzdC9taXNjL2ZpcnN0UGVyc29uQ29udHJvbHMuanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL2VuYWJsZTNkL25vZGVfbW9kdWxlcy9AZW5hYmxlM2QvY29tbW9uL2Rpc3QvbWlzYy9qb3lzdGljay5qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWFtbW9qcy13ZWJwYWNrLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvZW5hYmxlM2Qvbm9kZV9tb2R1bGVzL0BlbmFibGUzZC9jb21tb24vZGlzdC9taXNjL3BvaW50ZXJEcmFnLmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9lbmFibGUzZC9ub2RlX21vZHVsZXMvQGVuYWJsZTNkL2NvbW1vbi9kaXN0L21pc2MvcG9pbnRlckxvY2suanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL2VuYWJsZTNkL25vZGVfbW9kdWxlcy9AZW5hYmxlM2QvY29tbW9uL2Rpc3QvbWlzYy90aGlyZFBlcnNvbkNvbnRyb2xzLmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9lbmFibGUzZC9ub2RlX21vZHVsZXMvQGVuYWJsZTNkL2NvbW1vbi9kaXN0L21pc2Mvd2F0ZXIuanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL2VuYWJsZTNkL25vZGVfbW9kdWxlcy9AZW5hYmxlM2QvY29tbW9uL2Rpc3QvcGh5c2ljc0JvZHkuanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL2VuYWJsZTNkL25vZGVfbW9kdWxlcy9AZW5hYmxlM2QvY29tbW9uL2Rpc3QvcGh5c2ljc0xvYWRlci5qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWFtbW9qcy13ZWJwYWNrLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvZW5hYmxlM2Qvbm9kZV9tb2R1bGVzL0BlbmFibGUzZC9jb21tb24vZGlzdC90eXBlcy5qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWFtbW9qcy13ZWJwYWNrLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvZW5hYmxlM2Qvbm9kZV9tb2R1bGVzL0BlbmFibGUzZC9jb21tb24vZGlzdC90eXBlc0FtbW8uanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL2VuYWJsZTNkL25vZGVfbW9kdWxlcy9AZW5hYmxlM2QvY29tbW9uL2Rpc3QvdHlwZXNDdXN0b20uanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL2VuYWJsZTNkL25vZGVfbW9kdWxlcy9AZW5hYmxlM2QvY29tbW9uL2Rpc3Qvd2FzbUxvYWRlci5qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWFtbW9qcy13ZWJwYWNrLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvZW5hYmxlM2Qvbm9kZV9tb2R1bGVzL0BlbmFibGUzZC90aHJlZS1ncmFwaGljcy9kaXN0L2NvcmUuanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL2VuYWJsZTNkL25vZGVfbW9kdWxlcy9AZW5hYmxlM2QvdGhyZWUtZ3JhcGhpY3MvZGlzdC9pbmRleC5qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWFtbW9qcy13ZWJwYWNrLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvZW5hYmxlM2Qvbm9kZV9tb2R1bGVzL0BlbmFibGUzZC90aHJlZS1ncmFwaGljcy9kaXN0L3BsdWdpbnMvY2FtZXJhcy5qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWFtbW9qcy13ZWJwYWNrLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvZW5hYmxlM2Qvbm9kZV9tb2R1bGVzL0BlbmFibGUzZC90aHJlZS1ncmFwaGljcy9kaXN0L3BsdWdpbnMvY3NnLmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9lbmFibGUzZC9ub2RlX21vZHVsZXMvQGVuYWJsZTNkL3RocmVlLWdyYXBoaWNzL2Rpc3QvcGx1Z2lucy9oYXZlU29tZUZ1bi5qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWFtbW9qcy13ZWJwYWNrLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvZW5hYmxlM2Qvbm9kZV9tb2R1bGVzL0BlbmFibGUzZC90aHJlZS1ncmFwaGljcy9kaXN0L3BsdWdpbnMvaGVpZ2h0bWFwLmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9lbmFibGUzZC9ub2RlX21vZHVsZXMvQGVuYWJsZTNkL3RocmVlLWdyYXBoaWNzL2Rpc3QvcGx1Z2lucy9pbmRleC5qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWFtbW9qcy13ZWJwYWNrLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvZW5hYmxlM2Qvbm9kZV9tb2R1bGVzL0BlbmFibGUzZC90aHJlZS1ncmFwaGljcy9kaXN0L3BsdWdpbnMvbGlnaHRzLmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9lbmFibGUzZC9ub2RlX21vZHVsZXMvQGVuYWJsZTNkL3RocmVlLWdyYXBoaWNzL2Rpc3QvcGx1Z2lucy9sb2FkZXJzLmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9lbmFibGUzZC9ub2RlX21vZHVsZXMvQGVuYWJsZTNkL3RocmVlLWdyYXBoaWNzL2Rpc3QvcGx1Z2lucy9taXNjLmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9lbmFibGUzZC9ub2RlX21vZHVsZXMvQGVuYWJsZTNkL3RocmVlLWdyYXBoaWNzL2Rpc3QvcGx1Z2lucy9taXhlcnMuanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL2VuYWJsZTNkL25vZGVfbW9kdWxlcy9AZW5hYmxlM2QvdGhyZWUtZ3JhcGhpY3MvZGlzdC9wbHVnaW5zL3RyYW5zZm9ybS5qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWFtbW9qcy13ZWJwYWNrLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvZW5hYmxlM2Qvbm9kZV9tb2R1bGVzL0BlbmFibGUzZC90aHJlZS1ncmFwaGljcy9kaXN0L3BsdWdpbnMvd2FycFNwZWVkLmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9lbmFibGUzZC9ub2RlX21vZHVsZXMvQGVuYWJsZTNkL3RocmVlLWdyYXBoaWNzL2Rpc3QvcGx1Z2lucy93ZWJ4ci5qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWFtbW9qcy13ZWJwYWNrLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvZW5hYmxlM2Qvbm9kZV9tb2R1bGVzL0BlbmFibGUzZC90aHJlZS1ncmFwaGljcy9kaXN0L3ZlcnNpb24uanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL2VuYWJsZTNkL25vZGVfbW9kdWxlcy9AZW5hYmxlM2QvdGhyZWUtd3JhcHBlci9kaXN0L2luZGV4LmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9lbmdpbmUuaW8tY2xpZW50L2xpYi9nbG9iYWxUaGlzLmJyb3dzZXIuanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL2VuZ2luZS5pby1jbGllbnQvbGliL2luZGV4LmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9lbmdpbmUuaW8tY2xpZW50L2xpYi9zb2NrZXQuanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL2VuZ2luZS5pby1jbGllbnQvbGliL3RyYW5zcG9ydC5qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWFtbW9qcy13ZWJwYWNrLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvZW5naW5lLmlvLWNsaWVudC9saWIvdHJhbnNwb3J0cy9pbmRleC5qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWFtbW9qcy13ZWJwYWNrLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvZW5naW5lLmlvLWNsaWVudC9saWIvdHJhbnNwb3J0cy9wb2xsaW5nLWpzb25wLmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9lbmdpbmUuaW8tY2xpZW50L2xpYi90cmFuc3BvcnRzL3BvbGxpbmcteGhyLmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9lbmdpbmUuaW8tY2xpZW50L2xpYi90cmFuc3BvcnRzL3BvbGxpbmcuanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL2VuZ2luZS5pby1jbGllbnQvbGliL3RyYW5zcG9ydHMvd2Vic29ja2V0LWNvbnN0cnVjdG9yLmJyb3dzZXIuanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL2VuZ2luZS5pby1jbGllbnQvbGliL3RyYW5zcG9ydHMvd2Vic29ja2V0LmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9lbmdpbmUuaW8tY2xpZW50L2xpYi91dGlsLmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9lbmdpbmUuaW8tY2xpZW50L2xpYi94bWxodHRwcmVxdWVzdC5qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWFtbW9qcy13ZWJwYWNrLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvZW5naW5lLmlvLWNsaWVudC9ub2RlX21vZHVsZXMvZGVidWcvc3JjL2Jyb3dzZXIuanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL2VuZ2luZS5pby1jbGllbnQvbm9kZV9tb2R1bGVzL2RlYnVnL3NyYy9jb21tb24uanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL2VuZ2luZS5pby1jbGllbnQvbm9kZV9tb2R1bGVzL21zL2luZGV4LmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9lbmdpbmUuaW8tcGFyc2VyL2xpYi9jb21tb25zLmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9lbmdpbmUuaW8tcGFyc2VyL2xpYi9kZWNvZGVQYWNrZXQuYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWFtbW9qcy13ZWJwYWNrLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvZW5naW5lLmlvLXBhcnNlci9saWIvZW5jb2RlUGFja2V0LmJyb3dzZXIuanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL2VuZ2luZS5pby1wYXJzZXIvbGliL2luZGV4LmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9ldmVudGVtaXR0ZXIzL2luZGV4LmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9oYXMtY29ycy9pbmRleC5qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWFtbW9qcy13ZWJwYWNrLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvcGFyc2Vxcy9pbmRleC5qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWFtbW9qcy13ZWJwYWNrLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvcGFyc2V1cmkvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL3BlZXJqcy9kaXN0L3BlZXJqcy5taW4uanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL3BlZXJqcy9kaXN0fHN5bmMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL3NvY2tldC5pby1jbGllbnQvYnVpbGQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL3NvY2tldC5pby1jbGllbnQvYnVpbGQvbWFuYWdlci5qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWFtbW9qcy13ZWJwYWNrLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvc29ja2V0LmlvLWNsaWVudC9idWlsZC9vbi5qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWFtbW9qcy13ZWJwYWNrLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvc29ja2V0LmlvLWNsaWVudC9idWlsZC9zb2NrZXQuanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL3NvY2tldC5pby1jbGllbnQvYnVpbGQvdHlwZWQtZXZlbnRzLmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9zb2NrZXQuaW8tY2xpZW50L2J1aWxkL3VybC5qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWFtbW9qcy13ZWJwYWNrLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvc29ja2V0LmlvLWNsaWVudC9ub2RlX21vZHVsZXMvZGVidWcvc3JjL2Jyb3dzZXIuanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL3NvY2tldC5pby1jbGllbnQvbm9kZV9tb2R1bGVzL2RlYnVnL3NyYy9jb21tb24uanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL3NvY2tldC5pby1jbGllbnQvbm9kZV9tb2R1bGVzL21zL2luZGV4LmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9zb2NrZXQuaW8tcGFyc2VyL2Rpc3QvYmluYXJ5LmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9zb2NrZXQuaW8tcGFyc2VyL2Rpc3QvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL3NvY2tldC5pby1wYXJzZXIvZGlzdC9pcy1iaW5hcnkuanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL3NvY2tldC5pby1wYXJzZXIvbm9kZV9tb2R1bGVzL2RlYnVnL3NyYy9icm93c2VyLmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9zb2NrZXQuaW8tcGFyc2VyL25vZGVfbW9kdWxlcy9kZWJ1Zy9zcmMvY29tbW9uLmpzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9zb2NrZXQuaW8tcGFyc2VyL25vZGVfbW9kdWxlcy9tcy9pbmRleC5qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWFtbW9qcy13ZWJwYWNrLWV4YW1wbGUvLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vc3JjL21vZHVsZXMvQ2hhaXIudHMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vc3JjL21vZHVsZXMvQ2hhcmFjdGVyLnRzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL3NyYy9tb2R1bGVzL0NoYXJhY3RlckNvbnRyb2xsZXIudHMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vc3JjL21vZHVsZXMvQ2xhc3Nyb29tM0QudHMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlLy4vc3JjL21vZHVsZXMvQ2xhc3Nyb29tTWFuYWdlci50cyIsIndlYnBhY2s6Ly90aHJlZWpzLWFtbW9qcy13ZWJwYWNrLWV4YW1wbGUvLi9zcmMvbW9kdWxlcy9kYXRhLnRzIiwid2VicGFjazovL3RocmVlanMtYW1tb2pzLXdlYnBhY2stZXhhbXBsZS8uL25vZGVfbW9kdWxlcy95ZWFzdC9pbmRleC5qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWFtbW9qcy13ZWJwYWNrLWV4YW1wbGUvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1hbW1vanMtd2VicGFjay1leGFtcGxlL3dlYnBhY2svc3RhcnR1cCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDbkZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxFQUFFLGNBQWM7QUFDaEI7QUFDQTs7QUFFQSxlQUFlLFNBQVM7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxFQUFFLGNBQWM7QUFDaEI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLGVB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QTBGO0FBQzFGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUscUJBQXFCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLDZCQUE2QjtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLGtCQUFrQjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLGlCQUFpQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZix1Qzs7Ozs7Ozs7Ozs7QUM1U2E7QUFDYiw4Q0FBNkMsQ0FBQyxjQUFjLEVBQUM7QUFDN0QscUJBQXFCO0FBQ3JCLHFCQUFxQixtQkFBTyxDQUFDLDhGQUFjO0FBQzNDO0FB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QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLFlBQVk7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLDZCQUE2QjtBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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LDZDQUE2QyxVQUFVLDZDQUE2QyxVQUFVLG1DQUFtQyxVQUFVLHlDQUF5QyxVQUFVLCtDQUErQyxVQUFVLCtDQUErQyxVQUFVLHdDQUF3QyxVQUFVLHlDQUF5QyxVQUFVLHdDQUF3QyxVQUFVLG9DQUFvQyxTQUFTLHFDQUFxQyxTQUFTLHlDQUF5QyxTQUFTLG9DQUFvQyxTQUFTLDZCQUE2QixVQUFVLGlDQUFpQyxVQUFVLHNDQUFzQyxTQUFTLHlDQUF5QyxVQUFVLDhDQUE4QyxVQUFVLHdDQUF3QyxVQUFVLG1DQUFtQyxVQUFVLG1DQUFtQyxVQUFVLDBDQUEwQyxVQUFVLHFDQUFxQyxVQUFVLHlDQUF5QyxVQUFVLGlDQUFpQyxVQUFVLDBDQUEwQyxVQUFVLDhDQUE4QyxVQUFVLDZDQUE2QyxVQUFVLG1DQUFtQyxVQUFVLDBDQUEwQyxVQUFVLG9DQUFvQyxVQUFVLHdDQUF3QyxVQUFVLDhDQUE4QyxVQUFVLDJDQUEyQyxVQUFVLGtEQUFrRCxVQUFVLDRDQUE0QyxVQUFVLGtDQUFrQyxTQUFTLHNDQUFzQyxTQUFTLHNDQUFzQyxTQUFTLDhDQUE4QyxVQUFVLHdDQUF3QyxVQUFVLHdDQUF3QyxVQUFVLHdDQUF3QyxVQUFVLHFDQUFxQyxVQUFVLG1DQUFtQyxVQUFVLG9DQUFvQyxVQUFVLGtDQUFrQyxTQUFTLHdDQUF3QyxVQUFVLHdEQUF3RCxVQUFVLHdEQUF3RCxVQUFVLDZCQUE2QixVQUFVLHVDQUF1QyxVQUFVLDZDQUE2QyxVQUFVLHVDQUF1QyxVQUFVLDZCQUE2QixVQUFVLDZCQUE2QixVQUFVLGtDQUFrQyxVQUFVLGtDQUFrQyxVQUFVLG1DQUFtQyxTQUFTLDhDQUE4QyxVQUFVLHdDQUF3QyxVQUFVLDhDQUE4QyxVQUFVLHdDQUF3QyxVQUFVLDhDQUE4QyxVQUFVLGlDQUFpQyxVQUFVLDJCQUEyQixVQUFVLCtCQUErQixVQUFVLDRCQUE0QixVQUFVLGtDQUFrQyxVQUFVLGlDQUFpQyxTQUFTLCtCQUErQixVQUFVLHlDQUF5QyxVQUFVLDZCQUE2QixVQUFVLDZCQUE2QixVQUFVLHFDQUFxQyxVQUFVLGdDQUFnQyxVQUFVLHFDQUFxQyxVQUFVLG9DQUFvQyxTQUFTLHlDQUF5QyxTQUFTLCtDQUErQyxVQUFVLDBDQUEwQyxVQUFVLGtDQUFrQyxVQUFVLDZCQUE2QixVQUFVLHFDQUFxQyxVQUFVLHVDQUF1QyxVQUFVLDZDQUE2QyxVQUFVLDRDQUE0QyxVQUFVLGlEQUFpRCxVQUFVLDJDQUEyQyxVQUFVLHlDQUF5QyxVQUFVLG1DQUFtQyxVQUFVLGtDQUFrQyxVQUFVLDZDQUE2QyxVQUFVLDBDQUEwQyxVQUFVLDhDQUE4QyxVQUFVLGdEQUFnRCxVQUFVLCtDQUErQyxVQUFVLGtEQUFrRCxVQUFVLHFDQUFxQyxVQUFVLHNDQUFzQyxVQUFVLDRDQUE0QyxVQUFVLHNDQUFzQyxVQUFVLDRDQUE0QyxVQUFVLHFDQUFxQyxVQUFVLDJDQUEyQyxVQUFVLCtCQUErQixVQUFVLHlDQUF5QyxVQUFVLGtEQUFrRCxVQUFVLG1DQUFtQyxVQUFVLDJDQUEyQyxVQUFVLHlDQUF5QyxVQUFVLHlDQUF5QyxVQUFVLHVDQUF1QyxVQUFVLGtDQUFrQyxVQUFVLHFDQUFxQyxVQUFVLHFDQUFxQyxVQUFVLDJCQUEyQixVQUFVLDJDQUEyQyxVQUFVLHFDQUFxQyxVQUFVLDhCQUE4QixVQUFVLGlDQUFpQyxVQUFVLGlDQUFpQyxTQUFTLHNDQUFzQyxTQUFTLDRDQUE0QyxVQUFVLHVDQUF1QyxVQUFVLDZCQUE2QixVQUFVLGtDQUFrQyxVQUFVLDRCQUE0QixVQUFVLDZCQUE2QixVQUFVLHlDQUF5QyxVQUFVLGlDQUFpQyxVQUFVLGtDQUFrQyxVQUFVLDBDQUEwQyxVQUFVLGdDQUFnQyxVQUFVLGtDQUFrQyxVQUFVLG9DQUFvQyxVQUFVLGlDQUFpQyxVQUFVLHNDQUFzQyxVQUFVLG9DQUFvQyxVQUFVLHlDQUF5QyxVQUFVLGdEQUFnRCxVQUFVLGlEQUFpRCxVQUFVLGdEQUFnRCxVQUFVLGlEQUFpRCxVQUFVLHlDQUF5QyxTQUFTLDhCQUE4QixVQUFVLG1DQUFtQyxVQUFVLHNDQUFzQyxVQUFVLHNDQUFzQyxVQUFVLGdDQUFnQyxVQUFVLG9DQUFvQyxVQUFVLGtDQUFrQyxVQUFVLDRDQUE0QyxVQUFVLHVDQUF1QyxVQUFVLDZCQUE2QixTQUFTLGdDQUFnQyxVQUFVLHNDQUFzQyxVQUFVLDRCQUE0QixVQUFVLGlDQUFpQyxVQUFVLCtCQUErQixVQUFVLCtCQUErQixVQUFVLG1DQUFtQyxTQUFTLDRCQUE0QixVQUFVLHlDQUF5QyxVQUFVLHlDQUF5QyxVQUFVLDRDQUE0QyxVQUFVLHdDQUF3QyxVQUFVLDJDQUEyQyxVQUFVLDBDQUEwQyxVQUFVLDBDQUEwQyxVQUFVLHlDQUF5QyxVQUFVLDRDQUE0QyxVQUFVLDRDQUE0QyxVQUFVLHdDQUF3QyxVQUFVLG1DQUFtQyxTQUFTLDhDQUE4QyxVQUFVLG9DQUFvQyxTQUFTLHFDQUFxQyxVQUFVLHdDQUF3QyxTQUFTLHlDQUF5QyxTQUFTLHFDQUFxQyxVQUFVLGlEQUFpRCxVQUFVLGtEQUFrRCxVQUFVLGlEQUFpRCxVQUFVLGtEQUFrRCxVQUFVLGtDQUFrQyxTQUFTLHdDQUF3QyxVQUFVLGtDQUFrQyxTQUFTLGdDQUFnQyxVQUFVLHFDQUFxQyxTQUFTLGdEQUFnRCxVQUFVLHNDQUFzQyxTQUFTLHFDQUFxQyxTQUFTLDJDQUEyQyxVQUFVLDJDQUEyQyxVQUFVLGdDQUFnQyxVQUFVLG9DQUFvQyxVQUFVLDRDQUE0QyxVQUFVLGdEQUFnRCxVQUFVLDBDQUEwQyxVQUFVLGlDQUFpQyxTQUFTLDhDQUE4QyxTQUFTLDhDQUE4QyxTQUFTLDhDQUE4QyxTQUFTLDhDQUE4QyxTQUFTLDBDQUEwQyxVQUFVLG9DQUFvQyxTQUFTLHdDQUF3QyxTQUFTLHNDQUFzQyxVQUFVLGdEQUFnRCxVQUFVLDBDQUEwQyxVQUFVLGdDQUFnQyxVQUFVLDZDQUE2QyxVQUFVLHNDQUFzQyxVQUFVLDhDQUE4QyxVQUFVLDRCQUE0QixVQUFVLHlDQUF5QyxVQUFVLDZCQUE2QixVQUFVLDJDQUEyQyxVQUFVLHFDQUFxQyxVQUFVLG1DQUFtQyxVQUFVLGtDQUFrQyxVQUFVLDBDQUEwQyxVQUFVLGtDQUFrQyxVQUFVLHdDQUF3QyxVQUFVLDhCQUE4QixVQUFVLHNDQUFzQyxVQUFVLHVDQUF1QyxVQUFVLGdEQUFnRCxVQUFVLDBDQUEwQyxVQUFVLHVDQUF1QyxVQUFVLHVDQUF1QyxVQUFVLHFDQUFxQyxVQUFVLDRDQUE0QyxVQUFVLDZDQUE2QyxVQUFVLGtDQUFrQyxVQUFVLCtDQUErQyxVQUFVLG1EQUFtRCxVQUFVLGdDQUFnQyxTQUFTLHdDQUF3QyxVQUFVLGtDQUFrQyxVQUFVLHlDQUF5QyxVQUFVLDhDQUE4QyxVQUFVLDZDQUE2QyxVQUFVLDZDQUE2QyxVQUFVLDZDQUE2QyxVQUFVLDhDQUE4QyxVQUFVLDhDQUE4QyxVQUFVLDRDQUE0QyxVQUFVLDRDQUE0QyxVQUFVLDRDQUE0QyxVQUFVLDRDQUE0QyxVQUFVLDRDQUE0QyxVQUFVLDRDQUE0QyxVQUFVLDRDQUE0QyxVQUFVLDRDQUE0QyxVQUFVLHdDQUF3QyxVQUFVLDRDQUE0QyxVQUFVLGdEQUFnRCxVQUFVLGdEQUFnRCxVQUFVLDZDQUE2QyxVQUFVLDZDQUE2QyxVQUFVLDZDQUE2QyxVQUFVLG9DQUFvQyxVQUFVLG9DQUFvQyxVQUFVLGtDQUFrQyxVQUFVLGlDQUFpQyxVQUFVLHdDQUF3QyxVQUFVLHNDQUFzQyxVQUFVLHFDQUFxQyxVQUFVLHVDQUF1QyxVQUFVLHVDQUF1QyxVQUFVLCtDQUErQyxVQUFVLCtDQUErQyxVQUFVLDRDQUE0QyxVQUFVLGdDQUFnQyxVQUFVLHVDQUF1QyxVQUFVLHlDQUF5QyxVQUFVLDJCQUEyQixVQUFVLGlDQUFpQyxVQUFVLHFDQUFxQyxVQUFVLGlDQUFpQyxVQUFVLHdDQUF3QyxVQUFVLDJDQUEyQyxVQUFVLHNDQUFzQyxVQUFVLHdDQUF3QyxVQUFVLCtDQUErQyxTQUFTLDBDQUEwQyxVQUFVLG9DQUFvQyxVQUFVLHNEQUFzRCxVQUFVLHFEQUFxRCxVQUFVLHFEQUFxRCxVQUFVLHFEQUFxRCxVQUFVLHNEQUFzRCxVQUFVLHNEQUFzRCxVQUFVLG9EQUFvRCxVQUFVLG9EQUFvRCxVQUFVLG9EQUFvRCxVQUFVLG9EQUFvRCxVQUFVLG9EQUFvRCxVQUFVLG9EQUFvRCxVQUFVLG9EQUFvRCxVQUFVLG9EQUFvRCxVQUFVLDZCQUE2QixVQUFVLGtDQUFrQyxVQUFVLG1DQUFtQyxVQUFVLGlDQUFpQyxVQUFVLHNDQUFzQyxVQUFVLHNDQUFzQyxVQUFVLDZCQUE2QixVQUFVLDJDQUEyQyxVQUFVLHFDQUFxQyxVQUFVLGlDQUFpQyxVQUFVLGtDQUFrQyxVQUFVLGlDQUFpQyxVQUFVLGdDQUFnQyxVQUFVLHNDQUFzQyxVQUFVLG1DQUFtQyxVQUFVLHFDQUFxQyxTQUFTLDhCQUE4QixVQUFVLDRDQUE0QyxVQUFVLHNDQUFzQyxVQUFVLGlDQUFpQyxVQUFVLDJDQUEyQyxVQUFVLDhCQUE4QixVQUFVLG1DQUFtQyxVQUFVLG9DQUFvQyxVQUFVLGlDQUFpQyxVQUFVLHVDQUF1QyxVQUFVLDhCQUE4QixVQUFVLHNDQUFzQyxVQUFVLHNDQUFzQyxTQUFTLDhDQUE4QyxTQUFTLHNDQUFzQyxTQUFTLHVDQUF1QyxVQUFVLHVDQUF1QyxVQUFVLHVDQUF1QyxVQUFVLG9DQUFvQyxVQUFVLHVDQUF1QyxVQUFVLHVDQUF1QyxVQUFVLHVDQUF1QyxVQUFVLDJDQUEyQyxVQUFVLHdDQUF3QyxTQUFTLDJDQUEyQyxTQUFTLDZCQUE2QixTQUFTLDZDQUE2QyxVQUFVLGlEQUFpRCxVQUFVLDJDQUEyQyxVQUFVLDBDQUEwQyxVQUFVLG9DQUFvQyxVQUFVLCtCQUErQixVQUFVLHFDQUFxQyxVQUFVLDJDQUEyQyxVQUFVLHFDQUFxQyxVQUFVLCtDQUErQyxVQUFVLHlDQUF5QyxVQUFVLGdDQUFnQyxVQUFVLDJDQUEyQyxVQUFVLDZDQUE2QyxVQUFVLHlDQUF5QyxVQUFVLDBDQUEwQyxVQUFVLG9DQUFvQyxVQUFVLGlDQUFpQyxVQUFVLHVDQUF1QyxVQUFVLDZDQUE2QyxVQUFVLHVDQUF1QyxVQUFVLDZDQUE2QyxVQUFVLHNDQUFzQyxVQUFVLDRDQUE0QyxVQUFVLDZDQUE2QyxVQUFVLG1EQUFtRCxVQUFVLCtCQUErQixVQUFVLG1DQUFtQyxVQUFVLHFDQUFxQyxVQUFVLHdDQUF3QyxVQUFV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O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULDRCQUE0QjtBQUM1QjtBQUNBLE9BQU87QUFDUDtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLE9BQU87QUFDcEIsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsT0FBTztBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCxXQUFXO0FBQzNEOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSx1QkFBdUIsOEJBQThCO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLDZCQUE2QixrQkFBa0I7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1gsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksT0FBTztBQUNuQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYSxPQUFPO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYSxPQUFPO0FBQ3BCLGFBQWEsU0FBUztBQUN0QixhQUFhLE9BQU87QUFDcEIsY0FBYyxPQUFPO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLE9BQU87QUFDcEIsYUFBYSxPQUFPO0FBQ3BCLGFBQWEsT0FBTztBQUNwQixhQUFhLFNBQVM7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLE1BQU07QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLE9BQU87QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsa0NBQWtDOztBQUVsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7Ozs7Ozs7Ozs7O0FDenFCQSxlQUFlLG1CQUFPLENBQUMsc0VBQWtCO0FBQ3pDLGdCQUFnQixtQkFBTyxDQUFDLG9FQUFtQjtBQUMzQyxjQUFjLG1CQUFPLENBQUMsZ0ZBQU87O0FBRTdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxPQUFPO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYSxPQUFPO0FBQ3BCLGNBQWMsVUFBVTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsTUFBTTtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsT0FBTztBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOzs7Ozs7Ozs7OztBQ3RIQSx1QkFBdUIsbUJBQU8sQ0FBQyw4R0FBaUQ7QUFDaEYsWUFBWSxtQkFBTyxDQUFDLG9GQUFlO0FBQ25DLGNBQWMsbUJBQU8sQ0FBQyx3RkFBaUI7QUFDdkMsa0JBQWtCLG1CQUFPLENBQUMsZ0ZBQWE7O0FBRXZDLGVBQWU7QUFDZixpQkFBaUI7O0FBRWpCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O0FDNUNBLGdCQUFnQixtQkFBTyxDQUFDLDRFQUFXO0FBQ25DLG1CQUFtQixtQkFBTyxDQUFDLGdGQUFlOztBQUUxQztBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsT0FBTztBQUNwQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYSxPQUFPO0FBQ3BCLGFBQWEsU0FBUztBQUN0QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7Ozs7Ozs7Ozs7O0FDbE1BOztBQUVBLHVCQUF1QixtQkFBTyxDQUFDLDhHQUFpRDtBQUNoRixnQkFBZ0IsbUJBQU8sQ0FBQyw0RUFBVztBQUNuQyxnQkFBZ0IsbUJBQU8sQ0FBQyxvRUFBbUI7QUFDM0MsT0FBTyxPQUFPLEdBQUcsbUJBQU8sQ0FBQyw0REFBUztBQUNsQyxtQkFBbUIsbUJBQU8sQ0FBQyxnRkFBZTs7QUFFMUMsY0FBYyxtQkFBTyxDQUFDLGdGQUFPOztBQUU3QjtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSxrQ0FBa0MsaUJBQWlCO0FBQ25EO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsT0FBTztBQUNwQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsT0FBTztBQUNwQjtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CLHlCQUF5QiwyQkFBMkI7QUFDcEQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLE9BQU87QUFDcEIsYUFBYSxTQUFTO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLE9BQU87QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPOztBQUVQO0FBQ0E7QUFDQSwyREFBMkQ7QUFDM0QsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQSxPQUFPOztBQUVQO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esc0JBQXNCOzs7Ozs7Ozs7OztBQzNVdEIsa0JBQWtCLG1CQUFPLENBQUMsc0VBQWM7QUFDeEMsZ0JBQWdCLG1CQUFPLENBQUMsZ0RBQVM7QUFDakMsZUFBZSxtQkFBTyxDQUFDLHNFQUFrQjtBQUN6QyxjQUFjLG1CQUFPLENBQUMsNENBQU87O0FBRTdCLGNBQWMsbUJBQU8sQ0FBQyxnRkFBTzs7QUFFN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsU0FBUztBQUN0QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixnQkFBZ0I7QUFDbkM7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLE1BQU07QUFDbkIsYUFBYSxTQUFTO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7Ozs7Ozs7Ozs7QUM1TUEsbUJBQW1CLG1CQUFPLENBQUMsZ0ZBQWU7O0FB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QUFrQjtBQUNsQixZQUFZO0FBQ1osWUFBWTtBQUNaLGlCQUFpQjtBQUNqQixlQUFlO0FBQ2YsZUFBZTtBQUNmOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBOztBQUVBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyw0Q0FBNEM7O0FBRXZEO0FBQ0E7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLE9BQU87QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxpQkFBaUIsbUJBQU8sQ0FBQyxrRkFBVTs7QUFFbkMsT0FBTyxXQUFXOztBQUVsQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDM1FBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLG1CQUFPLENBQUMsb0VBQUk7QUFDcEM7O0FBRUE7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEIsWUFBWSxjQUFjO0FBQzFCO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGlCQUFpQixzQkFBc0I7QUFDdkM7QUFDQSxhQUFhO0FBQ2I7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQixZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQzs7QUFFdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxhQUFhLFNBQVM7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLE9BQU87QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSw2Q0FBNkMsU0FBUztBQUN0RDtBQUNBO0FBQ0E7QUFDQTs7QUFFQSw2Q0FBNkMsU0FBUztBQUN0RDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQixZQUFZLE9BQU87QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxNQUFNO0FBQ2pCLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7Ozs7Ozs7Ozs7O0FDcFFBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGNBQWM7QUFDekIsV0FBVyxPQUFPO0FBQ2xCLFlBQVksTUFBTTtBQUNsQixZQUFZO0FBQ1o7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQixZQUFZO0FBQ1o7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQixZQUFZO0FBQ1o7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEIsWUFBWTtBQUNaO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQ2pLQSx5Q0FBeUM7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRCxzQkFBc0I7O0FBRXRCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O0FDcEJBLE9BQU8scUNBQXFDLEdBQUcsbUJBQU8sQ0FBQyxpRUFBVzs7QUFFbEU7O0FBRUE7QUFDQTtBQUNBLGtCQUFrQixtQkFBTyxDQUFDLHVGQUFvQjtBQUM5Qzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsWUFBWSxzQkFBc0I7QUFDbEM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTs7QUFFQTs7Ozs7Ozs7Ozs7QUN4REEsT0FBTyxlQUFlLEdBQUcsbUJBQU8sQ0FBQyxpRUFBVzs7QUFFNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsdUJBQXVCLGFBQWE7QUFDcEM7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7Ozs7Ozs7Ozs7QUM3Q0EscUJBQXFCLG1CQUFPLENBQUMsbUZBQWdCO0FBQzdDLHFCQUFxQixtQkFBTyxDQUFDLG1GQUFnQjs7QUFFN0MsMENBQTBDOztBQUUxQztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsMkJBQTJCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ3pDYTs7QUFFYjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFNBQVM7QUFDcEIsV0FBVyxFQUFFO0FBQ2IsV0FBVyxRQUFRO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxhQUFhO0FBQ3hCLFdBQVcsZ0JBQWdCO0FBQzNCLFdBQVcsU0FBUztBQUNwQixXQUFXLEVBQUU7QUFDYixXQUFXLFFBQVE7QUFDbkIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsYUFBYTtBQUN4QixXQUFXLGdCQUFnQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsZ0JBQWdCO0FBQzNCLGFBQWEsTUFBTTtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEseURBQXlELE9BQU87QUFDaEU7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsZ0JBQWdCO0FBQzNCLGFBQWEsT0FBTztBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsZ0JBQWdCO0FBQzNCLGFBQWEsUUFBUTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEseUNBQXlDLFNBQVM7QUFDbEQ7QUFDQTs7QUFFQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBLGVBQWUsWUFBWTtBQUMzQjs7QUFFQTtBQUNBLDJEQUEyRDtBQUMzRCwrREFBK0Q7QUFDL0QsbUVBQW1FO0FBQ25FLHVFQUF1RTtBQUN2RTtBQUNBLDBEQUEwRCxTQUFTO0FBQ25FO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGdCQUFnQjtBQUMzQixXQUFXLFNBQVM7QUFDcEIsV0FBVyxFQUFFO0FBQ2IsYUFBYSxhQUFhO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxnQkFBZ0I7QUFDM0IsV0FBVyxTQUFTO0FBQ3BCLFdBQVcsRUFBRTtBQUNiLGFBQWEsYUFBYTtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsZ0JBQWdCO0FBQzNCLFdBQVcsU0FBUztBQUNwQixXQUFXLEVBQUU7QUFDYixXQUFXLFFBQVE7QUFDbkIsYUFBYSxhQUFhO0FBQzFCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCwyREFBMkQsWUFBWTtBQUN2RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsZ0JBQWdCO0FBQzNCLGFBQWEsYUFBYTtBQUMxQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLElBQTZCO0FBQ2pDO0FBQ0E7Ozs7Ozs7Ozs7OztBQzlVQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O0FDaEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7O0FBRUEsY0FBYztBQUNkOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQjtBQUNBOztBQUVBLGNBQWM7QUFDZDtBQUNBO0FBQ0EsbUNBQW1DLE9BQU87QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7QUNwQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHlHQUF5RyxJQUFJLEdBQUcsSUFBSSxTQUFTLElBQUk7O0FBRWpJO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHdFQUF3RTtBQUN4RTs7QUFFQTtBQUNBLGdCQUFnQjtBQUNoQjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHdFQUF3RTtBQUN4RSxrRkFBa0Y7QUFDbEY7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxtQkFBbUIsSUFBSTtBQUN2Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOzs7Ozs7Ozs7OztBQ25FQSxnQ0FBZ0MsMERBQTBELFNBQW1DLENBQUMsZ0JBQWdCLFVBQVUsVUFBVSxzREFBc0Qsd0JBQXdCLG9CQUFvQixHQUFHLEtBQUMsNEJBQTRCLGlFQUFFLENBQUMsQ0FBQyxDQUFDLDhDQUE4QyxrQ0FBa0Msc0JBQXNCLHFCQUFxQixZQUFZLDJCQUEyQiwyQ0FBMkMsb0JBQW9CLGNBQWMsd0JBQXdCLDBDQUEwQyx3Q0FBd0MsMkRBQTJELG9CQUFvQixZQUFZLEdBQUcsR0FBRyxZQUFZLFdBQVcsUUFBUSxRQUFRLFNBQVMsU0FBUyxhQUFhLHVCQUF1QixLQUFvRCxrQkFBa0IsQ0FBaUYsQ0FBQyw2QkFBNkIsU0FBUyxFQUFFO0FBQ2hnQyxTQUFTLDRCQUE0QixJQUFJLHVCQUF1QixTQUFTLFVBQVUsc0RBQXNELElBQUksK0NBQStDLFNBQVMsVUFBVSxtQ0FBbUMsaUNBQWlDLGFBQWEsK0JBQStCLG9MQUFvTCwyRUFBMkUsOEJBQThCLDBCQUEwQixtQ0FBbUMsd0VBQXdFLGtDQUFrQyxrQ0FBa0MseUNBQXlDLElBQUksNkJBQTZCLG1CQUFtQiw2QkFBNkI7QUFDLzVCLENBQUMsR0FBRztBQUNKLDhGQUE4RixtQkFBbUIseUJBQXlCLGtCQUFrQixZQUFZLGlDQUFpQyxjQUFjLG9IQUFvSCxhQUFhLHlCQUF5QixjQUFjLHNCQUFzQixrRkFBa0YsY0FBYywrRUFBK0UsK0NBQStDLDRCQUE0QixrQkFBa0IsK0JBQStCLDJDQUEyQyw4Q0FBOEMsNkNBQTZDLDJDQUEyQyxVQUFVLHFCQUFxQixnQkFBZ0Isa0JBQWtCLGtCQUFrQixvQ0FBb0MscUNBQXFDLG9DQUFvQyxxQ0FBcUMscUNBQXFDLHFDQUFxQyxtQ0FBbUMsb0NBQW9DLG9DQUFvQyxvQ0FBb0MsMkNBQTJDLDZEQUE2RCw2REFBNkQsMERBQTBELDBEQUEwRCw0REFBNEQsNERBQTRELDBEQUEwRCwyREFBMkQscUNBQXFDLG9DQUFvQyxzQkFBc0Isc0NBQXNDLCtDQUErQyx1QkFBdUIsc0NBQXNDLHlEQUF5RCx1QkFBdUIsc0NBQXNDLHFHQUFxRyx1QkFBdUIsb0NBQW9DLDBCQUEwQixxQkFBcUIscUNBQXFDLDJCQUEyQix5QkFBeUIscUNBQXFDLDJCQUEyQiwyQ0FBMkMscUNBQXFDLDJCQUEyQiwyQ0FBMkMsb0NBQW9DLDBIQUEwSCxxREFBcUQsdUJBQXVCLHVDQUF1QyxvQ0FBb0MsSUFBSSx3TEFBd0wsdUJBQXVCLHNDQUFzQywyQkFBMkIsSUFBSSx1QkFBdUIsU0FBUyxvQ0FBb0MsWUFBWSxLQUFLLElBQUksS0FBSyxvQ0FBb0MsT0FBTyxTQUFTLHFDQUFxQyw2Q0FBNkMsNERBQTRELHNDQUFzQyxzRUFBc0UsaUZBQWlGLDhCQUE4QixpQkFBaUIseURBQXlELDhEQUE4RCxrQ0FBa0Msc0NBQXNDLDhCQUE4QixlQUFlLG9DQUFvQyxnRkFBZ0YsbUdBQW1HLHVEQUF1RCxLQUFLLGtFQUFrRSwyQ0FBMkMsS0FBSyxvQkFBb0IsK0JBQStCLGdGQUFnRiw4RkFBOEYscUhBQXFILHdFQUF3RSwrQ0FBK0MsS0FBSyxrR0FBa0csOENBQThDLDJCQUEyQixrQ0FBa0MscUNBQXFDLGdDQUFnQyxvRUFBb0UsS0FBSyxzREFBc0QsbURBQW1ELDZCQUE2QixxQ0FBcUMsV0FBVyxnQ0FBZ0Msb0VBQW9FLEtBQUssc0RBQXNELG1EQUFtRCw2QkFBNkIsb0NBQW9DLGVBQWUsZ0NBQWdDLG9FQUFvRSxLQUFLLHNEQUFzRCxtREFBbUQsWUFBWSxJQUFJLG9CQUFvQixzQ0FBc0MsbURBQW1ELHVFQUF1RSx5RUFBeUUsMEVBQTBFLDhFQUE4RSwrRUFBK0Usd0ZBQXdGLHdHQUF3RyxLQUFLLHNFQUFzRSxvREFBb0QscUNBQXFDLFFBQVEsZ0JBQWdCLGdKQUFnSixxRUFBcUUscUNBQXFDLDRCQUE0QixnQ0FBZ0Msb0VBQW9FLEtBQUssc0RBQXNELG1EQUFtRCxtRUFBbUUsb0NBQW9DLDZCQUE2QixxQ0FBcUMsaUVBQWlFLHFDQUFxQyxtQkFBbUIsc0tBQXNLLHFDQUFxQywwQ0FBMEMsNFVBQTRVLG1DQUFtQyxpQ0FBaUMsb0NBQW9DLHlFQUF5RSxvQ0FBb0MsNkpBQTZKLG9DQUFvQyxzREFBc0Q7QUFDbDhRLENBQUMsRUFBRSx5QkFBeUI7QUFDNUIsYUFBYSxrQkFBa0IseUNBQXlDLGtEQUFrRCxXQUFXLGNBQWMsaUZBQWlGLGdCQUFnQixhQUFhLG9HQUFvRyxLQUFLLDRDQUE0QyxTQUFTLHlPQUF5TyxjQUFjLGtCQUFrQixpQkFBaUIseUNBQXlDLGtCQUFrQix3QkFBd0IseURBQXlELGlDQUFpQyx3Q0FBd0Msa0JBQWtCLFdBQVcsMENBQTBDLHdDQUF3QyxnR0FBZ0csNEJBQTRCLG9DQUFvQyw2RUFBNkUsNERBQTRELCtCQUErQiwwS0FBMEssaUNBQWlDLGVBQWUscUJBQXFCLGlCQUFpQiw0SEFBNEgsK0JBQStCLEdBQUcsY0FBYyx5SkFBeUosY0FBYyx5SkFBeUosYUFBYSxrRUFBa0UsWUFBWSxtR0FBbUcsZ0JBQWdCLCtEQUErRCxjQUFjLE9BQU8sMkJBQTJCLGdFQUFnRSxJQUFJLFlBQVksR0FBRyx1RkFBdUYseUtBQXlLLGlJQUFpSSxLQUFLLGtIQUFrSCxtS0FBbUssU0FBUyxjQUFjLDREQUE0RCxjQUFjLGdEQUFnRCwyREFBMkQsMkNBQTJDLE9BQU8sR0FBRyxJQUFJLGtCQUFrQixtRUFBbUUsZ0ZBQWdGLGdCQUFnQixFQUFFLEdBQUcsa0JBQWtCLCtDQUErQyxxQkFBcUIsU0FBUyw2QkFBNkIsc0RBQXNELHdCQUF3QixzQkFBc0IsdUNBQXVDLEVBQUU7QUFDcHlILENBQUMsR0FBRztBQUNKLGFBQWEsNENBQTRDLFNBQVMsNkJBQTZCLGdDQUFnQyxhQUFhLDBDQUEwQyxrQkFBa0Isb0JBQW9CLFNBQVMsR0FBRyxjQUFjLDRCQUE0Qiw2REFBNkQsV0FBVyxVQUFVLCtCQUErQixRQUFRLDBEQUEwRCw2REFBNkQsa0RBQWtELHlEQUF5RCxtQ0FBbUMsY0FBYyxpRkFBaUYsZ0JBQWdCLGFBQWEsb0dBQW9HLEtBQUssWUFBWSxnQkFBZ0IscUJBQXFCLG1CQUFtQixrQkFBa0IscURBQXFELFNBQVMsMENBQTBDLHFEQUFxRCwrQkFBK0IsWUFBWSxrRUFBa0Usb0JBQW9CLDZFQUE2RSxxQkFBcUIsMEJBQTBCLFNBQVMsd0VBQXdFLGtGQUFrRix1RUFBdUUsaUVBQWlFLDJDQUEyQywyQkFBMkIsR0FBRyxpRUFBaUUsaUJBQWlCLDZCQUE2Qiw2REFBNkQsc0JBQXNCLDRDQUE0QywySkFBMkosNkJBQTZCLHlCQUF5Qix5QkFBeUIsUUFBUSxFQUFFLHFCQUFxQiwrWUFBK1ksOEJBQThCLDRCQUE0QixvQkFBb0IsMEJBQTBCLHlDQUF5QyxFQUFFLEVBQUUsd0ZBQXdGLGlCQUFpQixFQUFFLGlCQUFpQiwwREFBMEQsRUFBRSxtQkFBbUIsNENBQTRDLGVBQWUsd0JBQXdCLE1BQU0sMGFBQTBhLGlHQUFpRyxzREFBc0Qsa0NBQWtDLGdCQUFnQixxQ0FBcUMsV0FBVyxFQUFFLEVBQUUsc0NBQXNDLHVEQUF1RCx3Q0FBd0MsdUJBQXVCLDZCQUE2QixvSEFBb0gsU0FBUyx1Q0FBdUMsU0FBUyxhQUFhLDRCQUE0QixFQUFFO0FBQ2hsSSxDQUFDLEVBQUUscUJBQXFCO0FBQ3hCLGFBQWEsZ0JBQWdCLDZLQUE2Syw2QkFBNkIsb0ZBQW9GLGdCQUFnQixXQUFXLHFFQUFxRSwrR0FBK0csRUFBRSwrRUFBK0UsNENBQTRDLFNBQVM7QUFDaHBCLENBQUMsR0FBRztBQUNKLGFBQWEsNENBQTRDLFNBQVMsMlVBQTJVLDZCQUE2QiwyQkFBMkIsdURBQXVELDZCQUE2Qiw4QkFBOEIsRUFBRSwyRkFBMkYsYUFBYSwwQ0FBMEMsa0JBQWtCLG9CQUFvQixTQUFTLEdBQUcsY0FBYyw0QkFBNEIsNkRBQTZELFdBQVcsVUFBVSwrQkFBK0IsUUFBUSwwREFBMEQsNkRBQTZELGtEQUFrRCx5REFBeUQsbUNBQW1DLGtCQUFrQix5Q0FBeUMsa0RBQWtELFdBQVcsY0FBYyxpRkFBaUYsZ0JBQWdCLGFBQWEsb0dBQW9HLEtBQUssY0FBYyxpREFBaUQsY0FBYyxvSUFBb0ksNkRBQTZELE9BQU8scUJBQXFCLElBQUksRUFBRSxLQUFLLCtEQUErRCxlQUFlLHFCQUFxQixpQkFBaUIsOEdBQThHLCtCQUErQixFQUFFLHlEQUF5RCw4REFBOEQsV0FBVyx5REFBeUQsaURBQWlELE1BQU0sK0VBQStFLHdDQUF3QyxHQUFHLGVBQWUseUJBQXlCLDRDQUE0QyxXQUFXLHlDQUF5QywyQ0FBMkMsTUFBTSwrRUFBK0Usa0NBQWtDLEdBQUcsU0FBUyx5QkFBeUIsc0NBQXNDLFdBQVcseUNBQXlDLEVBQUUsaUZBQWlGLGNBQWMsOElBQThJLG9CQUFvQixPQUFPLG1CQUFtQiwyR0FBMkcsU0FBUyw4Q0FBOEMsb0RBQW9ELDhEQUE4RCw2Q0FBNkMscURBQXFELDhCQUE4QixpREFBaUQsZ0RBQWdELHNEQUFzRCx3QkFBd0IsK0JBQStCLG1DQUFtQyw4Q0FBOEMsb0RBQW9ELFdBQVcsb0ZBQW9GLHdCQUF3QixHQUFHLGlEQUFpRCx1REFBdUQsV0FBVyxvRkFBb0Ysa0NBQWtDLG1CQUFtQixFQUFFLDhDQUE4QyxHQUFHLHNNQUFzTSwrQ0FBK0Msb0RBQW9ELDhCQUE4Qiw2QkFBNkIsZUFBZSxJQUFJLHdEQUF3RCxlQUFlLHFJQUFxSSxHQUFHLGNBQWMsd0JBQXdCLDZDQUE2QyxrREFBa0QsNkJBQTZCLDJFQUEyRSxzRkFBc0Ysa0JBQWtCLFNBQVMsc0NBQXNDLE9BQU8sb0NBQW9DLG9FQUFvRSxrQkFBa0IsOEJBQThCLGVBQWUsWUFBWSxJQUFJLGVBQWUsOENBQThDLGVBQWUsSUFBSSx3QkFBd0IsaUNBQWlDLFdBQVcsS0FBSyxpQ0FBaUMsdUJBQXVCLFdBQVcsS0FBSyxjQUFjLGNBQWMsMkVBQTJFLDZDQUE2QywrQ0FBK0Msd0RBQXdELDhCQUE4Qiw2QkFBNkIsZUFBZSxJQUFJLEVBQUUsNkNBQTZDLHNEQUFzRCw4QkFBOEIsb0JBQW9CLCtDQUErQyxXQUFXLDRDQUE0QyxtQ0FBbUMsR0FBRywrQ0FBK0MsaURBQWlELDBEQUEwRCw4QkFBOEIsNkJBQTZCLGVBQWUsSUFBSSxrREFBa0QscUNBQXFDLGlEQUFpRCxXQUFXLDRDQUE0QyxtQ0FBbUMsR0FBRyxtRkFBbUYsNkNBQTZDLGtEQUFrRCxrRUFBa0UseUJBQXlCLDZDQUE2QywwQkFBMEIsMENBQTBDLDZDQUE2QyxrUUFBa1Esa0NBQWtDLGNBQWMseURBQXlELFdBQVcsOERBQThELHdEQUF3RCxvQ0FBb0MsR0FBRyw2Q0FBNkMscURBQXFELHFDQUFxQyx3REFBd0QsOEJBQThCLHlLQUF5Syw4Q0FBOEMsb0RBQW9ELFdBQVcsdURBQXVELG1DQUFtQyxtQ0FBbUMsbUJBQW1CLHVFQUF1RSxFQUFFLHdCQUF3Qix3QkFBd0IsMkNBQTJDLHdCQUF3QixFQUFFLCtDQUErQyxpREFBaUQsdURBQXVELDhEQUE4RCxpRUFBaUUsZ0RBQWdELHNEQUFzRCxXQUFXLDhEQUE4RCwrREFBK0QsMkNBQTJDLHFIQUFxSCwyQkFBMkIsZ0JBQWdCLHdCQUF3QixxRUFBcUUsb0RBQW9ELHlEQUF5RCwyQkFBMkIsb0RBQW9ELG1CQUFtQiwrQkFBK0IsR0FBRyw4Q0FBOEMsb0RBQW9ELFdBQVcsa0NBQWtDLDhDQUE4QyxtQ0FBbUMsbUNBQW1DLG1CQUFtQix1RUFBdUUsK0JBQStCLHVDQUF1Qyx1REFBdUQsbUJBQW1CLGlEQUFpRCx1REFBdUQsK0JBQStCLDhDQUE4QyxnSkFBZ0osc0RBQXNELFdBQVcsb0lBQW9JLGlDQUFpQyxvREFBb0QsYUFBYSw4SkFBOEosc0NBQXNDLG1CQUFtQix1RUFBdUUsK0JBQStCLCtDQUErQywwQkFBMEIscURBQXFELGdEQUFnRCxFQUFFLEtBQUssNkJBQTZCLHFFQUFxRSwwQ0FBMEMsbUJBQW1CLEVBQUUsb0RBQW9ELDZDQUE2QyxjQUFjLHVCQUF1QixtRkFBbUYsYUFBYSxxQkFBcUIsYUFBYSx5QkFBeUIseURBQXlELGNBQWMsRUFBRSxFQUFFLHNDQUFzQyxFQUFFLHdEQUF3RCw2REFBNkQsK0lBQStJLDhDQUE4Qyx1Q0FBdUMsNkJBQTZCLGtCQUFrQixvREFBb0QsV0FBVyx3RkFBd0Ysd0VBQXdFLGVBQWUsd0JBQXdCLCtCQUErQix3REFBd0QsYUFBYSxvSUFBb0ksdUlBQXVJLDZHQUE2RywrQkFBK0IsZ0RBQWdELDJDQUEyQyxtQkFBbUIscUJBQXFCLHlKQUF5SixnQkFBZ0IsWUFBWSw4REFBOEQsOENBQThDLHVDQUF1Qyw2QkFBNkIsa0JBQWtCLEdBQUcsZ0JBQWdCLHlOQUF5Tiw2Q0FBNkMsY0FBYywrSEFBK0gsRUFBRSxzQ0FBc0MsRUFBRSxnQkFBZ0IsNERBQTRELGVBQWUsMkhBQTJIO0FBQ24yYixDQUFDLEVBQUUsd0VBQXdFO0FBQzNFLGFBQWEsNENBQTRDLFNBQVMsNkJBQTZCLDZCQUE2QixhQUFhLDBDQUEwQyxrQkFBa0Isb0JBQW9CLFNBQVMsR0FBRyxjQUFjLDRCQUE0Qiw2REFBNkQsV0FBVyxVQUFVLCtCQUErQixRQUFRLDBEQUEwRCw2REFBNkQsa0RBQWtELHlEQUF5RCxtQ0FBbUMsZ0JBQWdCLFNBQVMsMkRBQTJELHVCQUF1QixvQkFBb0IscUVBQXFFLHlCQUF5Qix5Q0FBeUMsbUNBQW1DLGlGQUFpRiw2QkFBNkIsMkNBQTJDO0FBQy9rQyxDQUFDLEVBQUUsa0JBQWtCO0FBQ3JCLGFBQWEsT0FBTyw4QkFBOEIsaURBQWlELDZEQUE2RCw0Q0FBNEMsZ0JBQWdCLEVBQUUsNkJBQTZCLHlDQUF5QyxtQ0FBbUMsRUFBRSw4QkFBOEIseUJBQXlCLGVBQWUsZ0NBQWdDLHlCQUF5QixtQkFBbUIsNkJBQTZCLDBDQUEwQyx3QkFBd0IsRUFBRSw4QkFBOEIsYUFBYSwrT0FBK08sS0FBSyxXQUFXLGtCQUFrQixvQ0FBb0MsTUFBTSw4Q0FBOEMsTUFBTSwrQkFBK0IsTUFBTSxxREFBcUQsTUFBTSx1QkFBdUIsU0FBUyw4QkFBOEIsU0FBUyxvSUFBb0ksYUFBYSw4VkFBOFYsK0JBQStCLCtCQUErQiwyQkFBMkIsZ0NBQWdDLG9DQUFvQywwSUFBMEksMkJBQTJCLG9CQUFvQiw0REFBNEQsbUNBQW1DLHVFQUF1RSwyQkFBMkIsNkJBQTZCLE9BQU8sMkZBQTJGLDJCQUEyQixvSEFBb0gseUJBQXlCLGNBQWMsc0NBQXNDLE9BQU8sV0FBVyxpREFBaUQsU0FBUyx5QkFBeUIseUJBQXlCLCtHQUErRyxTQUFTLDhDQUE4Qyx3REFBd0QsOEJBQThCLFVBQVUsU0FBUywyQkFBMkIsNENBQTRDLE9BQU8sc0NBQXNDLDJCQUEyQix5QkFBeUIsNklBQTZJLHlGQUF5RixJQUFJLDhCQUE4Qix3QkFBd0Isa0NBQWtDLG9CQUFvQixnR0FBZ0csOEJBQThCLDhCQUE4QixPQUFPLDRDQUE0QyxzQkFBc0IsR0FBRyxzQkFBc0IsbUNBQW1DLHdCQUF3QixnQ0FBZ0MsOEJBQThCLE9BQU8seUNBQXlDLG1DQUFtQyxPQUFPLHNGQUFzRixxQ0FBcUMsMEJBQTBCLDBDQUEwQyxtREFBbUQsSUFBSSwrQkFBK0IsNkJBQTZCLE9BQU8sZ0ZBQWdGLCtCQUErQix1TEFBdUwsb0NBQW9DLHdDQUF3Qyw2QkFBNkIsT0FBTyxnSUFBZ0ksb0NBQW9DLDRIQUE0SCxxQ0FBcUMsNkRBQTZELGtDQUFrQyxnRkFBZ0YsYUFBYSxvREFBb0QsTUFBTSxrQ0FBa0MsMkVBQTJFLGtDQUFrQyxXQUFXLHVEQUF1RCxxQ0FBcUMsV0FBVyxLQUFLLG1EQUFtRCxNQUFNLDBEQUEwRCxpREFBaUQsOEdBQThHLG9FQUFvRSx3REFBd0QsMENBQTBDLElBQUkscUNBQXFDLFNBQVMsZ0dBQWdHLDRFQUE0RSwyR0FBMkcsMERBQTBELEVBQUUsUUFBUSxvQ0FBb0MsNkJBQTZCLGtIQUFrSCxvQkFBb0IsSUFBSSwwQ0FBMEMsaUtBQWlLLDJCQUEyQixxQkFBcUIsNEJBQTRCLGdGQUFnRiwrQ0FBK0Msc0JBQXNCLEVBQUUsRUFBRSxpRkFBaUYsbURBQW1ELE9BQU8sdURBQXVELGNBQWMsT0FBTyx1REFBdUQsc0NBQXNDLGFBQWEsMkJBQTJCLE9BQU8sRUFBRSw0QkFBNEIsNEtBQTRLLGVBQWUsS0FBSyxtQ0FBbUMsUUFBUSw4Q0FBOEMsMkJBQTJCLHFCQUFxQiw0QkFBNEIsS0FBSyxtQ0FBbUMsc0NBQXNDLGlEQUFpRCxvQ0FBb0MsMEJBQTBCLHlCQUF5QixtQ0FBbUMsdUJBQXVCLG9EQUFvRCxpREFBaUQsMkJBQTJCLHFCQUFxQiwyQkFBMkIsRUFBRSxtQkFBbUIsK0NBQStDLFFBQVEsb0NBQW9DLGlFQUFpRSxpRUFBaUUsc0NBQXNDLHFCQUFxQixtRUFBbUUsMkNBQTJDLDZEQUE2RCxPQUFPLHdEQUF3RCxzQ0FBc0MsU0FBUywrVkFBK1YsZ0NBQWdDLDZDQUE2QywyQ0FBMkMscUJBQXFCLHdIQUF3SCx1Q0FBdUMsc0NBQXNDLCtXQUErVyxtREFBbUQsaVFBQWlRLHFOQUFxTiw4QkFBOEIsOEJBQThCLFdBQVcsaUJBQWlCLDBGQUEwRixzQ0FBc0MsdUJBQXVCLGtEQUFrRCwwQkFBMEIsOEJBQThCLDBCQUEwQiw4Q0FBOEMsT0FBTyx5RUFBeUUsMEJBQTBCLG9EQUFvRCxPQUFPLDBHQUEwRywwQkFBMEIsNkNBQTZDLDhCQUE4QixXQUFXLG9EQUFvRCxTQUFTO0FBQzUzVixDQUFDLEdBQUc7QUFDSixhQUFhLHFCQUFxQixjQUFjLE9BQU8sdUpBQXVKLGlCQUFpQixzQkFBc0Isc0NBQXNDLDJVQUEyVSx3REFBd0QsOEJBQThCLHdDQUF3QyxpUUFBaVEscU5BQXFOLGdCQUFnQixTQUFTLDJEQUEyRCx1QkFBdUIsb0JBQW9CLGtGQUFrRix5QkFBeUIseUNBQXlDLDBLQUEwSywyQ0FBMkMsRUFBRSxnQkFBZ0IsT0FBTywrQ0FBK0MsaUJBQWlCLGlCQUFpQixZQUFZLFdBQVcsdUVBQXVFLHFCQUFxQixvREFBb0QsMERBQTBELG9DQUFvQyxZQUFZLGtCQUFrQixLQUFLLGtCQUFrQiwyRUFBMkUsb0dBQW9HLHNKQUFzSixZQUFZLHdCQUF3QiwyRkFBMkYsU0FBUyxFQUFFLFFBQVEseUNBQXlDLFlBQVksNEJBQTRCLEtBQUssNEJBQTRCLGtCQUFrQiwyQkFBMkIsUUFBUSxJQUFJLGtCQUFrQixZQUFZLE9BQU8sc0dBQXNHLFNBQVMsa0lBQWtJLGtCQUFrQixnQkFBZ0IsK0NBQStDLG9JQUFvSSxFQUFFLHFDQUFxQyxnQkFBZ0IsbUJBQW1CLHdCQUF3QixzR0FBc0csTUFBTSw2QkFBNkIsZ0JBQWdCLHNFQUFzRSxRQUFRLEdBQUcsb0JBQW9CLHlCQUF5QixzQ0FBc0MsV0FBVyxxQ0FBcUMsNEJBQTRCLEVBQUUsa0JBQWtCLCtDQUErQyxrRkFBa0Ysa0JBQWtCLG9UQUFvVCwwSkFBMEosMEVBQTBFLDRCQUE0QixtQ0FBbUMsdUJBQXVCLHVEQUF1RCxrQ0FBa0Msb0hBQW9ILElBQUksa0RBQWtELDBEQUEwRCxHQUFHLDhCQUE4QixnSkFBZ0osc0RBQXNELCtCQUErQiwrQkFBK0IseURBQXlELCtCQUErQixnQ0FBZ0MsNllBQTZZLHlGQUF5RixrREFBa0QsMkNBQTJDLGlEQUFpRCx5Q0FBeUMsb0JBQW9CLHdDQUF3Qyx5QkFBeUIseUNBQXlDLDBCQUEwQiw4Q0FBOEMsb0NBQW9DLG9SQUFvUiwySEFBMkgsS0FBSyx5Q0FBeUMsOERBQThELHNDQUFzQyxvQ0FBb0Msd0dBQXdHLE1BQU0sc0NBQXNDLG1CQUFtQix3REFBd0QsWUFBWSwyQkFBMkIsNkZBQTZGLGlPQUFpTyxtQ0FBbUMsV0FBVyw4Q0FBOEMsZ0JBQWdCLEVBQUUsS0FBSyxnQkFBZ0Isb0NBQW9DLHVCQUF1Qix5Q0FBeUMsb0JBQW9CLEVBQUUsb0NBQW9DLGdCQUFnQixHQUFHLHFDQUFxQywyR0FBMkcsZ0pBQWdKLHlDQUF5Qyx1QkFBdUIsRUFBRSxpRkFBaUYsZUFBZSxzR0FBc0csZ0JBQWdCLDJJQUEySSxzQ0FBc0MsV0FBVyxrQ0FBa0Msc0NBQXNDLG1CQUFtQixFQUFFLG9CQUFvQixFQUFFLG1DQUFtQyw0Q0FBNEMsb0JBQW9CLGtCQUFrQixtQkFBbUIsRUFBRSxxQ0FBcUMsNENBQTRDLHNCQUFzQixrQkFBa0IscUJBQXFCLEVBQUUsOENBQThDLFdBQVcsa0RBQWtELCtEQUErRCw0QkFBNEIsZ0ZBQWdGLEVBQUUsd0NBQXdDLHdCQUF3QixvR0FBb0csd0RBQXdELHNJQUFzSSw4RUFBOEUsbUNBQW1DLDhDQUE4Qyx3QkFBd0IsbURBQW1ELCtKQUErSiwwQkFBMEIsZ0NBQWdDLGFBQWEsMEJBQTBCLGtEQUFrRCxtRUFBbUUsS0FBSyxxR0FBcUcsMEJBQTBCLGlIQUFpSCxPQUFPLGtKQUFrSixrREFBa0QseUtBQXlLLHVDQUF1Qyx3REFBd0QsRUFBRSx1UUFBdVEseUJBQXlCLHNCQUFzQixzQkFBc0IsRUFBRSxLQUFLLG9EQUFvRCx5Q0FBeUMsOEJBQThCLDBEQUEwRCxnQ0FBZ0Msc0NBQXNDLDJCQUEyQixzQkFBc0IsaUNBQWlDLDJCQUEyQiw2QkFBNkIsRUFBRSxnQ0FBZ0Msc0RBQXNELHVDQUF1Qyx1RUFBdUUsd0NBQXdDLHdFQUF3RSx5Q0FBeUMsMkZBQTJGLHlDQUF5QyxrREFBa0QsOERBQThELHNEQUFzRCw4T0FBOE8sYUFBYSxzRkFBc0YsVUFBVSxtQ0FBbUMseUtBQXlLLDZDQUE2QyxlQUFlLGlIQUFpSCwwS0FBMEssaUZBQWlGLDhCQUE4QixzQ0FBc0MsdUNBQXVDLG1CQUFtQixFQUFFLDJCQUEyQix3REFBd0QsNkNBQTZDLHdCQUF3Qix3SEFBd0gsaUZBQWlGLHlEQUF5RCx1SkFBdUosYUFBYSx1Q0FBdUMsRUFBRSw0QkFBNEIsc0JBQXNCLGtIQUFrSCw4Q0FBOEMsV0FBVyxpSEFBaUgsNEtBQTRLLFNBQVMsb0NBQW9DLFVBQVUsRUFBRSxxSUFBcUksZ0JBQWdCLDJDQUEyQyw0R0FBNEcsZ05BQWdOLG1GQUFtRixxQ0FBcUMsS0FBSyxzQkFBc0Isa0dBQWtHLGtDQUFrQyw0R0FBNEcscUlBQXFJLDJCQUEyQixxQkFBcUIsdUJBQXVCLEVBQUUsOGdCQUE4Z0IsMEJBQTBCLGdVQUFnVSxvQkFBb0IsdUxBQXVMLG1DQUFtQyxvWkFBb1osS0FBSywwTEFBMEwsb0JBQW9CLDhIQUE4SCxxQkFBcUIsaUNBQWlDLGtCQUFrQixFQUFFLFdBQVcsbUNBQW1DLG9NQUFvTSxlQUFlLGlCQUFpQixpQ0FBaUMsZUFBZSxnQkFBZ0IsNElBQTRJLDZGQUE2Rix5Q0FBeUMscUNBQXFDLEVBQUUsd0ZBQXdGLFFBQVEsSUFBSSxxQ0FBcUMsOEtBQThLLGdHQUFnRyxzQkFBc0Isb0lBQW9JLFdBQVcseUJBQXlCLG9DQUFvQyx3QkFBd0IsNkJBQTZCLG1DQUFtQyxnQ0FBZ0MsRUFBRSxzQkFBc0Isa0JBQWtCLDZCQUE2QixHQUFHLHdCQUF3Qix3QkFBd0IsMEJBQTBCLHNEQUFzRCxxT0FBcU8sR0FBRyxFQUFFLHdCQUF3Qiw4QkFBOEIsc0NBQXNDLGtKQUFrSix5REFBeUQsK0NBQStDLHNCQUFzQix3Q0FBd0MsOENBQThDLG9EQUFvRCxXQUFXLDRHQUE0RyxzQkFBc0IscUJBQXFCLHFDQUFxQyx5Q0FBeUMsS0FBSyxrREFBa0QsU0FBUywyRUFBMkUseUNBQXlDLHVEQUF1RCxvTUFBb00sMEJBQTBCLDRDQUE0QyxtREFBbUQsK0NBQStDLFNBQVMsNkVBQTZFLHlDQUF5QyxxR0FBcUcsa01BQWtNLHVCQUF1Qix5Q0FBeUMsZ0RBQWdELG9DQUFvQyxXQUFXLG9HQUFvRyx3Q0FBd0MsdUJBQXVCLDZDQUE2Qyx1QkFBdUIsd0JBQXdCLE1BQU0sdUdBQXVHLHdPQUF3Tyx1Q0FBdUMsdUZBQXVGLEVBQUUsU0FBUyxtRkFBbUYsd0VBQXdFLHFDQUFxQyx1REFBdUQsNkVBQTZFLHdDQUF3QywrQ0FBK0MscUJBQXFCLGdDQUFnQyxvTkFBb04sK0dBQStHLEVBQUUseUNBQXlDLHNGQUFzRiwyQkFBMkIsRUFBRSxFQUFFLGtDQUFrQyxrQkFBa0IsRUFBRSxnREFBZ0QsaUJBQWlCLDBIQUEwSCw4RkFBOEYsYUFBYSx3RkFBd0YsME1BQTBNLGlEQUFpRCxxRUFBcUUsRUFBRSxtQ0FBbUMsbUJBQW1CLEVBQUUsMEJBQTBCLHFDQUFxQyxXQUFXLHFHQUFxRyxrTUFBa00sd0VBQXdFLG9FQUFvRSxhQUFhLG1EQUFtRCwwREFBMEQscUNBQXFDLGFBQWEsK1lBQStZLE1BQU0sa05BQWtOLHdDQUF3QyxFQUFFLGtEQUFrRCw2QkFBNkIsbUNBQW1DLG1NQUFtTSxFQUFFLG1DQUFtQyxvQkFBb0IsRUFBRSwwQkFBMEIseUNBQXlDLGFBQWEsMElBQTBJLG1IQUFtSCx3QkFBd0Isc0JBQXNCLHdCQUF3Qix3QkFBd0IseUNBQXlDLElBQUksTUFBTSx3QkFBd0IsZ0VBQWdFLHlCQUF5Qix5RUFBeUUsMkRBQTJELDJDQUEyQyxpSkFBaUoseUJBQXlCLG9OQUFvTixpQkFBaUIsMkdBQTJHLGlMQUFpTCxLQUFLLElBQUksRUFBRSxrQ0FBa0MsdUNBQXVDLFdBQVcseUNBQXlDLDJHQUEyRyx1REFBdUQsb0JBQW9CLFNBQVMsNkNBQTZDLDZGQUE2Riw4QkFBOEIsRUFBRSxrQ0FBa0MsY0FBYyw2QkFBNkIsc0JBQXNCLGNBQWMsRUFBRSxJQUFJLEdBQUcsNEdBQTRHLFdBQVcseUNBQXlDLDJCQUEyQixnQ0FBZ0Msc0NBQXNDLGNBQWMsMENBQTBDLGdDQUFnQyxJQUFJLElBQUksRUFBRSxxQ0FBcUMsNkJBQTZCLHFCQUFxQiwwQkFBMEIsZ0JBQWdCLHFHQUFxRyw4Q0FBOEMsYUFBYSw4Q0FBOEMsMkJBQTJCLDJGQUEyRixxQkFBcUIsMEJBQTBCLGdCQUFnQiwrRkFBK0YsMENBQTBDLGFBQWEsOENBQThDLDJCQUEyQixtQ0FBbUMscUJBQXFCLDBCQUEwQixnQkFBZ0Isc0VBQXNFLDBDQUEwQywyQkFBMkI7QUFDbG40QixDQUFDLEVBQUUsYUFBYTtBQUNoQixhQUFhLGNBQWMsd0VBQXdFLHdDQUF3Qyw4QkFBOEIsa0NBQWtDLE9BQU8sTUFBTSx3Q0FBd0MsK0VBQStFLG1CQUFtQixLQUFLLEdBQUcsNENBQTRDLFNBQVM7QUFDL1osQ0FBQyxHQUFHO0FBQ0osYUFBYSxjQUFjLDhOQUE4Tiw0Q0FBNEMsU0FBUztBQUM5UyxDQUFDLEdBQUc7QUFDSixhQUFhLDRDQUE0QyxTQUFTLDRHQUE0Ryw2QkFBNkIsMkJBQTJCLHVEQUF1RCw2QkFBNkIsOEJBQThCLEVBQUUsK0pBQStKLGNBQWMsMEJBQTBCLFdBQVcsYUFBYSwwQ0FBMEMsa0JBQWtCLG9CQUFvQixTQUFTLEdBQUcsY0FBYyw0QkFBNEIsNkRBQTZELFdBQVcsVUFBVSwrQkFBK0IsUUFBUSwwREFBMEQsNkRBQTZELGtEQUFrRCx5REFBeUQsbUNBQW1DLGdCQUFnQix3RUFBd0UsU0FBUyxnRUFBZ0UsU0FBUyxvQkFBb0IsOEVBQThFLDhEQUE4RCxnQkFBZ0IsbUJBQW1CLDJCQUEyQixtQ0FBbUMsRUFBRSwyR0FBMkcsZUFBZSxzSkFBc0osdUVBQXVFLGlDQUFpQyxnQ0FBZ0Msa0pBQWtKLDJDQUEyQyxjQUFjO0FBQzdrRSxDQUFDLEVBQUUsaUlBQWlJO0FBQ3BJLGFBQWEsNENBQTRDLFNBQVMsNkJBQTZCLDZCQUE2QixhQUFhLDBDQUEwQyxrQkFBa0Isb0JBQW9CLFNBQVMsR0FBRyxjQUFjLDRCQUE0Qiw2REFBNkQsV0FBVyxVQUFVLCtCQUErQixRQUFRLDBEQUEwRCw2REFBNkQsa0RBQWtELHlEQUF5RCxtQ0FBbUMsY0FBYyxpRkFBaUYsZ0JBQWdCLGFBQWEsb0dBQW9HLEtBQUssZ0JBQWdCLDZDQUE2QyxrQ0FBa0Msc0hBQXNILGdGQUFnRixzQkFBc0IsMkNBQTJDLG9EQUFvRCwyQ0FBMkMsMkxBQTJMLDZCQUE2Qiw4QkFBOEIsbUNBQW1DLDhCQUE4QixvR0FBb0csb0NBQW9DLG1DQUFtQyx5Q0FBeUM7QUFDbDBELENBQUMsRUFBRSxrQkFBa0I7QUFDckIsYUFBYSxnQkFBZ0Isd0pBQXdKLGlCQUFpQixpRkFBaUYseURBQXlELDRCQUE0QixjQUFjLGdFQUFnRSxFQUFFLDRDQUE0QyxTQUFTO0FBQ2pmLENBQUMsR0FBRztBQUNKLGFBQWEsNENBQTRDLFNBQVMseVVBQXlVLDZCQUE2QiwyQkFBMkIsdURBQXVELDZCQUE2Qiw4QkFBOEIsRUFBRSx3RkFBd0YsYUFBYSwwQ0FBMEMsa0JBQWtCLG9CQUFvQixTQUFTLEdBQUcsY0FBYyw0QkFBNEIsNkRBQTZELFdBQVcsVUFBVSwrQkFBK0IsUUFBUSwwREFBMEQsNkRBQTZELGtEQUFrRCx5REFBeUQsbUNBQW1DLGtCQUFrQix5Q0FBeUMsa0RBQWtELFdBQVcsY0FBYyxpRkFBaUYsZ0JBQWdCLGFBQWEsb0dBQW9HLEtBQUssY0FBYyx1TEFBdUwsZUFBZSxPQUFPLHlCQUF5QixFQUFFLGdCQUFnQixtRUFBbUUsOExBQThMLDZDQUE2QyxjQUFjLCtIQUErSCxFQUFFLHNDQUFzQyxFQUFFLE9BQU8sdUpBQXVKLDBDQUEwQyxrREFBa0QscUJBQXFCLGdEQUFnRCx3QkFBd0Isc0JBQXNCLHlCQUF5QixFQUFFLFNBQVMsZ0NBQWdDLHdCQUF3Qix3QkFBd0IsSUFBSSx1QkFBdUIsR0FBRyxFQUFFLFNBQVMsY0FBYyxjQUFjLG1IQUFtSCwrQ0FBK0Msd0RBQXdELDhCQUE4Qiw2QkFBNkIsZUFBZSxJQUFJLEVBQUUsNkNBQTZDLHNEQUFzRCw4QkFBOEIsb0JBQW9CLCtDQUErQywyRUFBMkUsY0FBYyxxSEFBcUgsaURBQWlELDBEQUEwRCw4QkFBOEIsNkJBQTZCLGVBQWUsSUFBSSxrREFBa0QscUNBQXFDLGlEQUFpRCx1Q0FBdUMsY0FBYyw4SEFBOEgsV0FBVyxpRkFBaUYsMkRBQTJELEVBQUUsRUFBRSxjQUFjLG1FQUFtRSxjQUFjLHlDQUF5QyxtREFBbUQsNERBQTRELDhCQUE4Qiw0Q0FBNEMsdUNBQXVDLGNBQWMsZUFBZSxLQUFLLG1FQUFtRSwwSUFBMEksNkdBQTZHLEVBQUUsOEJBQThCLE1BQU0sSUFBSSxTQUFTLHVCQUF1QixtTkFBbU4sdUJBQXVCLG1CQUFtQix1QkFBdUIsSUFBSSxTQUFTLEdBQUcsY0FBYyxvQ0FBb0MsNkNBQTZDLHNEQUFzRCw4QkFBOEIscUVBQXFFLE1BQU0sR0FBRyxjQUFjLHlDQUF5QyxnREFBZ0QscURBQXFELHVCQUF1Qiw2SEFBNkgsb0JBQW9CLHFCQUFxQiwyQkFBMkIsNEJBQTRCLGNBQWMseUNBQXlDLGlEQUFpRCxzREFBc0QsdUJBQXVCLDZIQUE2SCxvQkFBb0IscUJBQXFCLDJCQUEyQjtBQUNscE0sQ0FBQyxFQUFFLHFFQUFxRTtBQUN4RSxhQUFhLDRDQUE0QyxTQUFTLDZRQUE2USw2QkFBNkIsYUFBYSwwQ0FBMEMsa0JBQWtCLG9CQUFvQixTQUFTLEdBQUcsY0FBYyw0QkFBNEIsNkRBQTZELFdBQVcsVUFBVSwrQkFBK0IsUUFBUSwwREFBMEQsNkRBQTZELGtEQUFrRCx5REFBeUQsbUNBQW1DLGNBQWMsaUZBQWlGLGdCQUFnQixhQUFhLG9HQUFvRyxLQUFLLGNBQWMseUNBQXlDLGdIQUFnSCxzRUFBc0Usa0RBQWtELDZDQUE2QyxvREFBb0QsV0FBVyw4SUFBOEkscUJBQXFCLHlDQUF5QyxxQkFBcUIsRUFBRSxvREFBb0QsNkRBQTZELElBQUksd0JBQXdCLGdDQUFnQyx5RkFBeUYsMkJBQTJCLHdHQUF3RyxXQUFXLDRDQUE0QyxvQ0FBb0MsV0FBVywrQkFBK0Isb0JBQW9CLHNDQUFzQyxzQ0FBc0MsR0FBRyxHQUFHLGNBQWMseUpBQXlKLGtEQUFrRCxxREFBcUQsbUVBQW1FLGVBQWUseUJBQXlCLGlCQUFpQixXQUFXLDRQQUE0UCw4QkFBOEIsMEVBQTBFLHlCQUF5Qiw2QkFBNkIsK0JBQStCLEVBQUUsR0FBRyxFQUFFLHlEQUF5RCw4REFBOEQsV0FBVyw4RkFBOEYsOEJBQThCLDhFQUE4RSx5QkFBeUIsNkJBQTZCLCtCQUErQixFQUFFLHlCQUF5QixjQUFjLHlDQUF5QywwSUFBMEksNEJBQTRCLHdFQUF3RSwyQ0FBMkMsOEJBQThCLHdFQUF3RSw0Q0FBNEMsc0JBQXNCLHdCQUF3Qiw0Q0FBNEMsMENBQTBDLHdCQUF3QiwyQ0FBMkMsNENBQTRDLHdCQUF3QiwyQ0FBMkMsc0JBQXNCLGNBQWMscUJBQXFCLGdEQUFnRCw4Q0FBOEMsd0NBQXdDLGdCQUFnQiw4RkFBOEYseUNBQXlDLFVBQVUsY0FBYywyQ0FBMkMsSUFBSSwrQkFBK0IsSUFBSSxjQUFjLHdCQUF3QiwwQkFBMEIsa0NBQWtDLG9CQUFvQixpQkFBaUIsc0JBQXNCLEtBQUssc0JBQXNCLHNNQUFzTSxlQUFlLGtCQUFrQix1SUFBdUksZUFBZSw4QkFBOEIsR0FBRyxjQUFjLHVMQUF1TCxlQUFlLE9BQU8seUJBQXlCLEVBQUUsY0FBYyxnREFBZ0Qsc0RBQXNELE1BQU0sZ0ZBQWdGLDhDQUE4QyxzQ0FBc0MsRUFBRSxpV0FBaVcsOENBQThDLHNDQUFzQyxFQUFFLGlSQUFpUixnQ0FBZ0MsY0FBYztBQUMvb04sQ0FBQyxFQUFFLGtCQUFrQjtBQUNyQixhQUFhLDRDQUE0QyxTQUFTLHNNQUFzTSxnREFBZ0QsYUFBYSwwQ0FBMEMsa0JBQWtCLG9CQUFvQixTQUFTLEdBQUcsY0FBYyw0QkFBNEIsNkRBQTZELFdBQVcsVUFBVSwrQkFBK0IsUUFBUSwwREFBMEQsNkRBQTZELGtEQUFrRCx5REFBeUQsbUNBQW1DLGNBQWMsMEJBQTBCLFdBQVcsY0FBYyxpRkFBaUYsZ0JBQWdCLGFBQWEsb0dBQW9HLEtBQUssY0FBYyx3RkFBd0Ysd0JBQXdCLDhCQUE4QixxS0FBcUssNEVBQTRFLDJCQUEyQixPQUFPLHlHQUF5RyxHQUFHLGdCQUFnQixnR0FBZ0cseURBQXlELDBEQUEwRCxJQUFJLEdBQUcsZ0JBQWdCLHdCQUF3QixvR0FBb0csZUFBZSw0Q0FBNEMsRUFBRSx5REFBeUQsOERBQThELHdEQUF3RCxJQUFJLGVBQWUseUJBQXlCLGlEQUFpRCxlQUFlLDJDQUEyQywrQkFBK0IsRUFBRSxlQUFlLHVCQUF1QixxQ0FBcUMsb0NBQW9DLDhCQUE4QixrRUFBa0UsRUFBRSxnQkFBZ0Isb0JBQW9CLHFEQUFxRCxpQ0FBaUMsd0JBQXdCLGlCQUFpQixvS0FBb0ssWUFBWSxpREFBaUQseURBQXlELGlHQUFpRyxpQkFBaUIsaUZBQWlGLFNBQVMsMENBQTBDLGVBQWUsVUFBVSxlQUFlLFFBQVEsaUNBQWlDLGNBQWMsNkVBQTZFLHNEQUFzRCwyREFBMkQsOEJBQThCLG1CQUFtQix1REFBdUQsK0JBQStCLEVBQUUsZ0JBQWdCLGFBQWEsa0JBQWtCLG9EQUFvRCwySkFBMkosOEJBQThCLGNBQWMsOEVBQThFLG9DQUFvQywyQ0FBMkMsZUFBZSxPQUFPLDRDQUE0QyxtREFBbUQsK0JBQStCLHFEQUFxRCxlQUFlLDJDQUEyQyxpQkFBaUIsd09BQXdPLCtCQUErQixxRUFBcUUsV0FBVyxnQkFBZ0IscUZBQXFGLGVBQWUsK0NBQStDLHlDQUF5QywyQ0FBMkMsbUJBQW1CLFNBQVMsNkdBQTZHLEdBQUcsZ0JBQWdCLHNHQUFzRyx5REFBeUQsK0RBQStELDJEQUEyRCwyQ0FBMkMsd0NBQXdDLGFBQWEsd0dBQXdHLGtCQUFrQixVQUFVLGlDQUFpQyxnQkFBZ0IsdURBQXVELG9EQUFvRCwyRUFBMkUsb1FBQW9RO0FBQzdtTSxDQUFDLEVBQUUsOEJBQThCO0FBQ2pDLGFBQWEsNENBQTRDLFNBQVMsMkJBQTJCLDRNQUE0TSxhQUFhLDBDQUEwQyxrQkFBa0Isb0JBQW9CLFNBQVMsR0FBRyxjQUFjLDRCQUE0Qiw2REFBNkQsV0FBVyxVQUFVLCtCQUErQixRQUFRLDBEQUEwRCw2REFBNkQsa0RBQWtELHlEQUF5RCxtQ0FBbUMsYUFBYSxJQUFJLFNBQVMsMERBQTBELDJEQUEyRCx1REFBdUQsaUNBQWlDLHlIQUF5SCxrQkFBa0IsNEhBQTRILHVGQUF1Riw4Y0FBOGMsTUFBTSwrSEFBK0gscWRBQXFkLE1BQU0seUhBQXlILDRNQUE0TSxNQUFNLHFHQUFxRyxpYUFBaWEsTUFBTSxrQ0FBa0M7QUFDdHlHLENBQUMsRUFBRSw4SkFBOEo7QUFDakssYUFBYSw0Q0FBNEMsU0FBUyx5QkFBeUIsOERBQThELGdEQUFnRCxNQUFNO0FBQy9NLENBQUMsRUFBRSw4QkFBOEI7QUFDakMsYUFBYSw4Q0FBOEMsMEJBQTBCLFlBQVksNENBQTRDLFNBQVMsK0JBQStCLG1DQUFtQztBQUN4TixDQUFDLEVBQUUsd0JBQXdCO0FBQzNCLGFBQWEsNENBQTRDLFNBQVMsMEJBQTBCLDJCQUEyQixnQ0FBZ0MsYUFBYSxtTUFBbU0sZ0RBQWdELDRDQUE0QywyQ0FBMkMsNENBQTRDLGtMQUFrTCxtQ0FBbUMsOENBQThDLG1DQUFtQyxpREFBaUQsK0NBQStDLHNFQUFzRSwrQkFBK0IsaUNBQWlDLDBGQUEwRixTQUFTLElBQUksdURBQXVELFVBQVUsUUFBUSxhQUFhLFNBQVMsaUNBQWlDLDZSQUE2UixHQUFHO0FBQzdpRCxDQUFDLEVBQUUsbUJBQW1CO0FBQ3RCLGFBQWEsbUVBQW1FLDZDQUE2Qyw2QkFBNkIsYUFBYSxFQUFFLG1CQUFtQiw0QkFBNEIsZ0VBQWdFLG1DQUFtQyxzQkFBc0IsRUFBRSxlQUFlLFlBQVkseUNBQXlDLDRCQUE0QixTQUFTLDZGQUE2RixpQkFBaUIsNENBQTRDLFNBQVMsc0JBQXNCLG9FQUFvRSxhQUFhLG9DQUFvQyxFQUFFLHFFQUFxRSwrQkFBK0IsNEJBQTRCLGFBQWEseUVBQXlFLGtCQUFrQixzSkFBc0osU0FBUywrSEFBK0gsc0JBQXNCLElBQUksMkNBQTJDLGFBQWEsSUFBSSxxQ0FBcUMsV0FBVyxtQ0FBbUMsSUFBSSxtREFBbUQsV0FBVyxVQUFVLFFBQVEsY0FBYyxVQUFVLFFBQVEsYUFBYSxTQUFTLDJEQUEyRCxvQ0FBb0Msb0NBQW9DLHlEQUF5RCwrQkFBK0IscUVBQXFFLElBQUksRUFBRSw4REFBOEQsK0NBQStDLGtCQUFrQiwyQkFBMkIsNkNBQTZDLHFCQUFxQiw0QkFBNEIsNkJBQTZCLDBCQUEwQixtREFBbUQsdUNBQXVDLFdBQVcsNkJBQTZCLGdCQUFnQixvQ0FBb0MsNENBQTRDLGlDQUFpQyxtQ0FBbUMsR0FBRztBQUNuNkUsQ0FBQyxFQUFFLGtEQUFrRDtBQUNyRCxhQUFhLDRDQUE0QyxjQUFjLGtCQUFrQix5Q0FBeUMsc0JBQXNCLCtFQUErRSxnQ0FBZ0MsMkhBQTJILGdCQUFnQix3REFBd0QsYUFBYSx1Q0FBdUMsNkdBQTZHLGFBQWEsa0NBQWtDLDREQUE0RCxnRkFBZ0YsbUNBQW1DLGdDQUFnQyxlQUFlLHFCQUFxQixzQ0FBc0MsSUFBSSxpQkFBaUIsU0FBUyx1Q0FBdUMsZ0NBQWdDLDJCQUEyQix3Q0FBd0MsY0FBYyw2QkFBNkIsNkNBQTZDLFNBQVMsd0RBQXdELHNDQUFzQyx3Q0FBd0MsMENBQTBDLDRDQUE0Qyw4Q0FBOEMsZ0RBQWdELHlCQUF5QixJQUFJLHdCQUF3Qix3QkFBd0IsS0FBSyxpQkFBaUIsUUFBUSxJQUFJLGtFQUFrRSxrQ0FBa0MsTUFBTSxvQ0FBb0MsTUFBTSxzQ0FBc0MsTUFBTSx3Q0FBd0MsTUFBTSx1Q0FBdUMsSUFBSSx3QkFBd0IsK0JBQStCLFNBQVMsZ0NBQWdDLHdCQUF3QixrQ0FBa0Msd0JBQXdCLDhDQUE4QyxjQUFjLGdDQUFnQyw0QkFBNEIsc0JBQXNCLDBEQUEwRCxLQUFLLDRCQUE0QixJQUFJLG9FQUFvRSx1REFBdUQsWUFBWSw0Q0FBNEMsTUFBTSw4RkFBOEY7QUFDcGpGLENBQUMsR0FBRztBQUNKLGFBQWEsdUNBQXVDLG9EQUFvRCxlQUFlLHlCQUF5QixJQUFJLEtBQUsseUNBQXlDLGlCQUFpQixTQUFTLEdBQUcsU0FBUyxRQUFRLElBQUksb0NBQW9DLFFBQVEsb0JBQW9CLFNBQVMsMkNBQTJDLGtDQUFrQyxJQUFJLGtCQUFrQixVQUFVLDRDQUE0QyxTQUFTLDBCQUEwQixtQkFBbUIsYUFBYSw4RkFBOEYseUNBQXlDLEdBQUcsaUJBQWlCLGFBQWEsMEJBQTBCLHFEQUFxRCxlQUFlLHNCQUFzQixpQkFBaUIsaUJBQWlCLCtCQUErQiw2QkFBNkIsaUJBQWlCLG1CQUFtQixzQkFBc0IsK0RBQStELDZCQUE2QixpQkFBaUIsbUJBQW1CLHNCQUFzQix5RUFBeUUsOEJBQThCLGlCQUFpQixtQkFBbUIsc0JBQXNCLHFFQUFxRSx3Q0FBd0MsY0FBYyxnQ0FBZ0MsaUJBQWlCLG1CQUFtQix3QkFBd0Isa0JBQWtCLDRFQUE0RSx5S0FBeUssR0FBRyxHQUFHO0FBQ3h1RCxDQUFDLEdBQUc7QUFDSixhQUFhLGtCQUFrQiw0Q0FBNEMsU0FBUyxnTUFBZ00sa0hBQWtILCtEQUErRCxlQUFlLDhCQUE4QixxREFBcUQsZUFBZSxvSEFBb0gsbURBQW1ELGVBQWUsdVdBQXVXLG1EQUFtRCxlQUFlLDJEQUEyRCwyREFBMkQsZUFBZSxrRkFBa0YsdURBQXVELGVBQWUsa01BQWtNLDJEQUEyRDtBQUMvcUQsQ0FBQyxHQUFHO0FBQ0osYUFBYSx1Q0FBdUMsb0JBQW9CLGlDQUFpQyxhQUFhLGdDQUFnQyxjQUFjLGdCQUFnQixzRUFBc0UsUUFBUSxxQkFBcUIsd0hBQXdILGFBQWEsbUJBQW1CLDhFQUE4RSxzQ0FBc0Msb0RBQW9ELGVBQWUseUJBQXlCLElBQUksS0FBSyx5Q0FBeUMsaUJBQWlCLFNBQVMsR0FBRyxTQUFTLFFBQVEsSUFBSSxvQ0FBb0MsUUFBUSxvQkFBb0IsU0FBUywyQ0FBMkMsa0NBQWtDLElBQUksa0JBQWtCLFNBQVMsb0NBQW9DLCtEQUErRCxzQkFBc0IsdUNBQXVDLGdCQUFnQixtQ0FBbUMsMkJBQTJCLG1GQUFtRiwyQ0FBMkMsMEJBQTBCLFlBQVksNENBQTRDLFNBQVMsd0JBQXdCLDJGQUEyRix3QkFBd0Isb0JBQW9CLHlCQUF5Qix3REFBd0QseUJBQXlCLGdEQUFnRCw4Q0FBOEMsV0FBVyxXQUFXLHlDQUF5QywySEFBMkgsTUFBTSxJQUFJLGlFQUFpRSxTQUFTLDJEQUEyRCxvQ0FBb0Msa0NBQWtDLDRIQUE0SCxnQ0FBZ0MsK0ZBQStGLEVBQUUsMkNBQTJDLFdBQVcsd0NBQXdDLG1CQUFtQixvQkFBb0IsdUNBQXVDLG1CQUFtQixzQkFBc0IsbUNBQW1DLEVBQUUsK0NBQStDLG1FQUFtRSxnQ0FBZ0Msa0RBQWtELDRDQUE0Qyx1Q0FBdUMsdUJBQXVCLElBQUksMEJBQTBCLFFBQVEsWUFBWSxjQUFjLGNBQWMsU0FBUyxHQUFHLFNBQVMsUUFBUSxJQUFJLG9DQUFvQyxRQUFRLHFCQUFxQiw4QkFBOEIsOENBQThDLG1CQUFtQix3QkFBd0Isc0JBQXNCLDBEQUEwRCxpQ0FBaUMsOEJBQThCLDREQUE0RCxpQ0FBaUMsOEpBQThKLEdBQUcsaUJBQWlCO0FBQy9qSCxDQUFDLEVBQUUsMERBQTBEO0FBQzdELGFBQWEsc0NBQXNDLG9DQUFvQyxpQ0FBaUMsSUFBSSx1RkFBdUYsU0FBUyx3QkFBd0IsMkNBQTJDLHlDQUF5QyxjQUFjLElBQUksYUFBYSxTQUFTLE1BQU0sY0FBYyxJQUFJLGNBQWMsU0FBUyxNQUFNLGNBQWMsTUFBTSxnRUFBZ0UsS0FBSyxhQUFhLCtCQUErQixFQUFFLHlDQUF5QyxlQUFlLHdCQUF3QixxQkFBcUIsWUFBWSxpQkFBaUIsVUFBVSxpQ0FBaUMsMkRBQTJELFlBQVksSUFBSSxjQUFjLG1CQUFtQixtQkFBbUIsNERBQTRELEtBQUssRUFBRSxLQUFLLGtIQUFrSCx5Q0FBeUMsa0JBQWtCLE1BQU0seUJBQXlCLG9CQUFvQiw4QkFBOEIsU0FBUyxrQ0FBa0MsU0FBUywwRUFBMEUsSUFBSSxTQUFTLHlDQUF5QyxhQUFhLE1BQU0sMkJBQTJCLGlCQUFpQixNQUFNLG9CQUFvQiwyQkFBMkIsTUFBTSwrQkFBK0IsU0FBUyxjQUFjLFNBQVMsWUFBWSxRQUFRLE1BQU0scUJBQXFCLE9BQU8sZ0NBQWdDLFVBQVUsMkNBQTJDLDBCQUEwQixZQUFZLDRDQUE0QyxTQUFTLDRCQUE0QixtRkFBbUYsY0FBYyxrQkFBa0IsK0NBQStDLGtDQUFrQyxxSkFBcUosaURBQWlELHlCQUF5QixxQkFBcUIsa0NBQWtDLGdCQUFnQixrQkFBa0IsbUNBQW1DLDZDQUE2Qyw2Q0FBNkMscUVBQXFFLGlDQUFpQyx5Q0FBeUMsbUhBQW1ILDRFQUE0RSxvSEFBb0gsNENBQTRDLDRDQUE0QyxPQUFPLEdBQUcseUNBQXlDLDZCQUE2QixrTkFBa04sTUFBTSxtTUFBbU0sTUFBTSx5R0FBeUcsTUFBTSw2Q0FBNkMsOEVBQThFLHlFQUF5RSx1Q0FBdUMsZ0JBQWdCLG1DQUFtQyxvRUFBb0Usd0NBQXdDLDBDQUEwQyxvQ0FBb0MsUUFBUSxxQ0FBcUMsZ0NBQWdDLHFFQUFxRSxxQ0FBcUMsTUFBTSx5SEFBeUgsdUNBQXVDLGlEQUFpRCxrQ0FBa0MsK0NBQStDLG1CQUFtQixtQ0FBbUMsd0NBQXdDLGtCQUFrQiwwQkFBMEIsZ0JBQWdCLDZFQUE2RSwyRkFBMkYsc05BQXNOLGlFQUFpRSwrRkFBK0YsbUlBQW1JLDBFQUEwRSxLQUFLLGdFQUFnRSxrQkFBa0Isa0VBQWtFLFFBQVEsc05BQXNOLG1CQUFtQixnSEFBZ0gsa0JBQWtCLEVBQUUsRUFBRSxvQ0FBb0Msd0NBQXdDLGNBQWMsMEJBQTBCLGdCQUFnQiw2RUFBNkUseURBQXlELHVOQUF1TixpRUFBaUUsMkdBQTJHLHlDQUF5QyxpR0FBaUcsMEJBQTBCLFFBQVEsd0hBQXdILG1CQUFtQixrSEFBa0gsa0JBQWtCLEVBQUUsRUFBRSxxQ0FBcUMsd0NBQXdDLFlBQVksMEJBQTBCLGdCQUFnQixpS0FBaUssa0VBQWtFLG9JQUFvSSwwQkFBMEIsbUJBQW1CLHlIQUF5SCxrQkFBa0IsRUFBRSxFQUFFLHlDQUF5Qyx3Q0FBd0MsZ0JBQWdCLDBCQUEwQixnQkFBZ0IsNEpBQTRKLDhFQUE4RSxxQ0FBcUMsSUFBSSw0RkFBNEYsb0hBQW9ILGtCQUFrQixFQUFFLEVBQUUsa0RBQWtELDhLQUE4SyxrQ0FBa0MsZ0JBQWdCLEVBQUUsdURBQXVELHdGQUF3RixHQUFHLEdBQUc7QUFDM21SLENBQUMsRUFBRSxtREFBbUQ7QUFDdEQsYUFBYSx1Q0FBdUMsb0JBQW9CLGlDQUFpQyxhQUFhLGdDQUFnQyxjQUFjLGdCQUFnQixzRUFBc0UsUUFBUSxxQkFBcUIsd0hBQXdILGFBQWEsbUJBQW1CLDhFQUE4RSxHQUFHLDRDQUE0QyxTQUFTLGdDQUFnQyw2Q0FBNkMsa0JBQWtCLHlCQUF5Qiw0RUFBNEUsd0RBQXdELGVBQWUsa0JBQWtCLCtCQUErQixJQUFJLGlCQUFpQjtBQUN0NEIsQ0FBQyxFQUFFLHVCQUF1QjtBQUMxQixhQUFhLHVDQUF1QyxvQkFBb0IsaUNBQWlDLGFBQWEsZ0NBQWdDLGNBQWMsZ0JBQWdCLHNFQUFzRSxRQUFRLHFCQUFxQix3SEFBd0gsYUFBYSxtQkFBbUIsOEVBQThFLHFDQUFxQyxvQ0FBb0MsaUNBQWlDLElBQUksdUZBQXVGLFNBQVMsd0JBQXdCLG9DQUFvQywrREFBK0Qsc0JBQXNCLHVDQUF1QyxnQkFBZ0IsbUNBQW1DLDJCQUEyQixtRkFBbUYsMkNBQTJDLDBCQUEwQixZQUFZLDRDQUE0QyxTQUFTLGlDQUFpQyw0SUFBNEksa0JBQWtCLCtCQUErQixpTUFBaU0scUNBQXFDLElBQUksd0RBQXdELGVBQWUsOEJBQThCLCtCQUErQixtREFBbUQsZUFBZSx5QkFBeUIsK0JBQStCLG9EQUFvRCxlQUFlLDBCQUEwQiwrQkFBK0Isb0NBQW9DLG9IQUFvSCx1Q0FBdUMseUJBQXlCLGVBQWUsa0ZBQWtGLE1BQU0saUZBQWlGLE1BQU0sZ0ZBQWdGLGtDQUFrQyxRQUFRLG9CQUFvQiwySEFBMkgsS0FBSyx5SEFBeUgseUJBQXlCLFVBQVUsR0FBRyxvREFBb0QsSUFBSSwwQkFBMEIsUUFBUSxZQUFZLGNBQWMsdUJBQXVCLFNBQVMsR0FBRyxTQUFTLFFBQVEsSUFBSSxvQ0FBb0MsUUFBUSxvQkFBb0IsZUFBZSw4QkFBOEIsaVZBQWlWLHFCQUFxQixtQkFBbUI7QUFDajhHLENBQUMsRUFBRSxtR0FBbUc7QUFDdEcsYUFBYSx1Q0FBdUMsb0JBQW9CLGlDQUFpQyxhQUFhLGdDQUFnQyxjQUFjLGdCQUFnQixzRUFBc0UsUUFBUSxxQkFBcUIsd0hBQXdILGFBQWEsbUJBQW1CLDhFQUE4RSw2Q0FBNkMsMEJBQTBCLFlBQVksNENBQTRDLFNBQVMsK0JBQStCLHNFQUFzRSxhQUFhLHlCQUF5QixnR0FBZ0cseUVBQXlFLGtDQUFrQyx5RkFBeUYsR0FBRyx5REFBeUQsZUFBZSxtQkFBbUIsK0JBQStCLDRDQUE0QyxlQUFlLHlCQUF5QiwrQkFBK0Isa0RBQWtELGVBQWUsd0JBQXdCLCtCQUErQixnQ0FBZ0Msc0RBQXNELGdDQUFnQyx1Q0FBdUMsbUNBQW1DLDhHQUE4RyxHQUFHLGlCQUFpQjtBQUM5dEQsQ0FBQyxFQUFFLHlDQUF5QztBQUM1QyxhQUFhLHVDQUF1QyxvQkFBb0IsaUNBQWlDLGFBQWEsZ0NBQWdDLGNBQWMsZ0JBQWdCLHNFQUFzRSxRQUFRLHFCQUFxQix3SEFBd0gsYUFBYSxtQkFBbUIsOEVBQThFLHNDQUFzQywrREFBK0Qsc0JBQXNCLHVDQUF1QyxnQkFBZ0IsbUNBQW1DLDJCQUEyQixtRkFBbUYsMkNBQTJDLDBCQUEwQixZQUFZLDRDQUE0QyxTQUFTLGdDQUFnQyx5S0FBeUssa0JBQWtCLCtCQUErQixtSEFBbUgsaVNBQWlTLG1CQUFtQix5Q0FBeUMsaUhBQWlILHVGQUF1RixjQUFjLElBQUksd0RBQXdELGVBQWUsNkJBQTZCLCtCQUErQixtREFBbUQsZUFBZSxnQkFBZ0IsK0JBQStCLGtEQUFrRCxlQUFlLHdCQUF3QiwrQkFBK0IscUNBQXFDLHdDQUF3Qyw4Q0FBOEMsV0FBVyxzSUFBc0ksMkdBQTJHLHdDQUF3QyxvRkFBb0YscUNBQXFDLHdFQUF3RSw0Q0FBNEMsd0NBQXdDLHlHQUF5RywrREFBK0QsdUJBQXVCLHFDQUFxQyxFQUFFLHNDQUFzQyxvQkFBb0IsMENBQTBDLG9CQUFvQixzRUFBc0UsMkZBQTJGLHNDQUFzQyw0Q0FBNEMsK0JBQStCLDBFQUEwRSw0QkFBNEIsdUJBQXVCLHlCQUF5QixPQUFPLEdBQUcsOEJBQThCLHVEQUF1RCx1ZEFBdWQsZ0NBQWdDLG9HQUFvRyw4R0FBOEcscUJBQXFCLGdFQUFnRSw4RUFBOEUsMkJBQTJCLGtLQUFrSyx1Q0FBdUMsZ0dBQWdHLGtDQUFrQyxXQUFXLHVCQUF1Qix5R0FBeUcsK0JBQStCLFFBQVEsSUFBSSx5QkFBeUIsU0FBUyw2R0FBNkcsU0FBUyxtQ0FBbUMsdUNBQXVDLHNCQUFzQixpR0FBaUcscUNBQXFDLDBCQUEwQiw2RUFBNkUsSUFBSSwwQkFBMEIsUUFBUSxZQUFZLGNBQWMsaUJBQWlCLFNBQVMsR0FBRyxTQUFTLFFBQVEsSUFBSSxvQ0FBb0MsUUFBUSxxQkFBcUIsdUNBQXVDLGdCQUFnQixlQUFlLHlFQUF5RSxNQUFNLGlGQUFpRixNQUFNLG9GQUFvRixtREFBbUQsbUJBQW1CO0FBQ3JwTSxDQUFDLEVBQUUsNEhBQTRIO0FBQy9ILGFBQWEsOENBQThDLHlDQUF5QyxjQUFjLElBQUksYUFBYSxTQUFTLE1BQU0sY0FBYyxJQUFJLGNBQWMsU0FBUyxNQUFNLGNBQWMsTUFBTSxnRUFBZ0UsS0FBSyxhQUFhLCtCQUErQixFQUFFLHlDQUF5QyxlQUFlLHdCQUF3QixxQkFBcUIsWUFBWSxpQkFBaUIsVUFBVSxpQ0FBaUMsMkRBQTJELFlBQVksSUFBSSxjQUFjLG1CQUFtQixtQkFBbUIsNERBQTRELEtBQUssRUFBRSxLQUFLLGtIQUFrSCx5Q0FBeUMsa0JBQWtCLE1BQU0seUJBQXlCLG9CQUFvQiw4QkFBOEIsU0FBUyxrQ0FBa0MsU0FBUywwRUFBMEUsSUFBSSxTQUFTLHlDQUF5QyxhQUFhLE1BQU0sMkJBQTJCLGlCQUFpQixNQUFNLG9CQUFvQiwyQkFBMkIsTUFBTSwrQkFBK0IsU0FBUyxjQUFjLFNBQVMsWUFBWSxRQUFRLE1BQU0scUJBQXFCLE9BQU8sZ0NBQWdDLFVBQVUsMkNBQTJDLDBCQUEwQixZQUFZLDRDQUE0QyxTQUFTLHFCQUFxQiw4REFBOEQsY0FBYyxnQkFBZ0IseUNBQXlDLHVJQUF1SSxvREFBb0QsbUNBQW1DLHdDQUF3QyxZQUFZLDBCQUEwQixnQkFBZ0Isd0NBQXdDLGlEQUFpRCwrRUFBK0UsbUJBQW1CLGtVQUFrVSxrQkFBa0IsRUFBRSxFQUFFLHFDQUFxQyx3Q0FBd0MsWUFBWSwwQkFBMEIsZ0JBQWdCLDJDQUEyQyxpREFBaUQscUNBQXFDLG1XQUFtVywyQ0FBMkMsbUJBQW1CLGtJQUFrSSxrQkFBa0IsRUFBRSxFQUFFLEdBQUcsR0FBRztBQUN6ekcsQ0FBQyxFQUFFLGtDQUFrQztBQUNyQyxhQUFhLHVDQUF1QyxvQkFBb0IsaUNBQWlDLGFBQWEsZ0NBQWdDLGNBQWMsZ0JBQWdCLHNFQUFzRSxRQUFRLHFCQUFxQix3SEFBd0gsYUFBYSxtQkFBbUIsOEVBQThFLHFDQUFxQyxvQ0FBb0MsaUNBQWlDLElBQUksdUZBQXVGLFNBQVMsd0JBQXdCLG9DQUFvQywrREFBK0Qsc0JBQXNCLHVDQUF1QyxnQkFBZ0IsbUNBQW1DLDJCQUEyQixtRkFBbUYsb0NBQW9DLG9EQUFvRCxlQUFlLHlCQUF5QixJQUFJLEtBQUsseUNBQXlDLGlCQUFpQixTQUFTLEdBQUcsU0FBUyxRQUFRLElBQUksb0NBQW9DLFFBQVEsb0JBQW9CLFNBQVMsMkNBQTJDLDBCQUEwQixZQUFZLDRDQUE0QyxTQUFTLHNCQUFzQixvTkFBb04sb0JBQW9CLGlCQUFpQixnQkFBZ0IsMkJBQTJCLDBMQUEwTCx3SUFBd0ksaXdCQUFpd0Isd0JBQXdCLG9CQUFvQiwrQ0FBK0MsNEdBQTRHLHNEQUFzRCxlQUFlLGdCQUFnQiwrQkFBK0IsK0NBQStDLGVBQWUscUJBQXFCLCtCQUErQiw0Q0FBNEMsZUFBZSxrQkFBa0IsK0JBQStCLDhDQUE4QyxlQUFlLG9CQUFvQiwrQkFBK0IsbURBQW1ELGVBQWUsOEJBQThCLElBQUksMENBQTBDLFFBQVEsWUFBWSxpQ0FBaUMsUUFBUSxTQUFTLEdBQUcsU0FBUyxRQUFRLElBQUksb0NBQW9DLFFBQVEsb0JBQW9CLFNBQVMsK0JBQStCLGlEQUFpRCxlQUFlLHVCQUF1QiwrQkFBK0Isb0RBQW9ELGVBQWUsMEJBQTBCLCtCQUErQixpREFBaUQsc0pBQXNKLGtEQUFrRCxvQkFBb0IsMkNBQTJDLHdDQUF3QyxpREFBaUQsbUdBQW1HLDBDQUEwQyw4RkFBOEYsSUFBSSxxQ0FBcUMsb0RBQW9ELHdDQUF3QyxxQ0FBcUMsVUFBVSwrR0FBK0csTUFBTSw4RUFBOEUsTUFBTSx3R0FBd0csTUFBTSx5SEFBeUgsTUFBTSxnSUFBZ0ksTUFBTSwrR0FBK0csTUFBTSxvREFBb0QsMktBQTJLLDhDQUE4Qyw2REFBNkQsS0FBSywyR0FBMkcsK0JBQStCLDhHQUE4RyxtRUFBbUUsMkJBQTJCLElBQUksMEJBQTBCLFFBQVEsWUFBWSxjQUFjLG9CQUFvQixTQUFTLEdBQUcsU0FBUyxRQUFRLElBQUksb0NBQW9DLFFBQVEsb0JBQW9CLE1BQU0sbUdBQW1HLE1BQU0saUJBQWlCLHNKQUFzSix5Q0FBeUMsMEZBQTBGLHNDQUFzQyxnQ0FBZ0MsNkNBQTZDLG1DQUFtQyxvQkFBb0IsMllBQTJZLHFDQUFxQyxrQ0FBa0Msa0NBQWtDLG9CQUFvQiwrVEFBK1QsTUFBTSxZQUFZLHNDQUFzQyxrQ0FBa0MsaUdBQWlHLDBDQUEwQyxrS0FBa0ssMkNBQTJDLG9DQUFvQyxNQUFNLG1CQUFtQixzQkFBc0IsMENBQTBDLHlDQUF5QyxtQ0FBbUMsa0JBQWtCLElBQUksMEJBQTBCLFFBQVEsWUFBWSxjQUFjLGdDQUFnQyxTQUFTLEdBQUcsU0FBUyxRQUFRLElBQUksb0NBQW9DLFFBQVEsb0JBQW9CLFlBQVkseUNBQXlDLFdBQVcsc0JBQXNCLGNBQWMsSUFBSSxrQ0FBa0MscUdBQXFHLHFDQUFxQyxNQUFNLDRHQUE0RyxnQ0FBZ0MsdUpBQXVKLGlDQUFpQyxRQUFRLElBQUksaURBQWlELFFBQVEsWUFBWSxjQUFjLGtEQUFrRCxTQUFTLEdBQUcsU0FBUyxRQUFRLElBQUksb0NBQW9DLFFBQVEsb0JBQW9CLGlDQUFpQyxzQ0FBc0MsbUNBQW1DLFNBQVMsMEJBQTBCLFFBQVEsWUFBWSxpQkFBaUIsU0FBUyxHQUFHLFNBQVMsUUFBUSxJQUFJLG9DQUFvQyxRQUFRLHFCQUFxQixtQ0FBbUMsdUJBQXVCLGNBQWMsa0xBQWtMLGtDQUFrQyxnTEFBZ0wsS0FBSyw4R0FBOEcscUlBQXFJLG1GQUFtRixzQ0FBc0MsV0FBVyw0QkFBNEIsNENBQTRDLFlBQVksb0JBQW9CLCtDQUErQyxFQUFFLDBCQUEwQixpQkFBaUI7QUFDdHFWLENBQUMsRUFBRSxnS0FBZ0s7QUFDbkssYUFBYSw0Q0FBNEMsU0FBUyx3QkFBd0IsNENBQTRDLGdCQUFnQix3QkFBd0I7QUFDOUssQ0FBQyxFQUFFLGdDQUFnQyxFQUFFLEdBQUc7QUFDeEMsdUM7Ozs7Ozs7Ozs7QUNyRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDOzs7Ozs7Ozs7OztBQ1JhO0FBQ2IsOENBQTZDLENBQUMsY0FBYyxFQUFDO0FBQzdELFVBQVUsR0FBRyxjQUFjLEdBQUcsZUFBZSxHQUFHLGdCQUFnQjtBQUNoRSxjQUFjLG1CQUFPLENBQUMsMkRBQU87QUFDN0Isa0JBQWtCLG1CQUFPLENBQUMsbUVBQVc7QUFDckMsY0FBYyxtQkFBTyxDQUFDLGdGQUFPO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxnQkFBZ0IsS0FBSztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsbUJBQU8sQ0FBQyx1RUFBa0I7QUFDbkQsNENBQTJDLENBQUMscUNBQXFDLG9DQUFvQyxFQUFFLEVBQUUsRUFBQztBQUMxSDtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEI7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLG1CQUFPLENBQUMsbUVBQVc7QUFDbkMsMkNBQTBDLENBQUMscUNBQXFDLDBCQUEwQixFQUFFLEVBQUUsRUFBQztBQUMvRyxlQUFlLG1CQUFPLENBQUMsaUVBQVU7QUFDakMsMENBQXlDLENBQUMscUNBQXFDLHdCQUF3QixFQUFFLEVBQUUsRUFBQztBQUM1RyxlQUFlOzs7Ozs7Ozs7Ozs7QUN0RUY7QUFDYiw4Q0FBNkMsQ0FBQyxjQUFjLEVBQUM7QUFDN0QsZUFBZTtBQUNmLFlBQVksbUJBQU8sQ0FBQyxzRUFBa0I7QUFDdEMsaUJBQWlCLG1CQUFPLENBQUMsaUVBQVU7QUFDbkMsZUFBZSxtQkFBTyxDQUFDLHVFQUFrQjtBQUN6QyxhQUFhLG1CQUFPLENBQUMseURBQU07QUFDM0IsZ0JBQWdCLG1CQUFPLENBQUMsOENBQVE7QUFDaEMsdUJBQXVCLG1CQUFPLENBQUMsNkVBQWdCO0FBQy9DLGNBQWMsbUJBQU8sQ0FBQyxnRkFBTztBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFNBQVM7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsNENBQTRDOztBQUV2RDtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsWUFBWSxPQUFPO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNB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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsNENBQTRDOztBQUV2RDtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsWUFBWSxPQUFPO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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QVU7QUFDckMsWUFBWSxtQkFBTyxDQUFDLDBCQUFJO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlJQUF5SSxxRUFBcUU7QUFDOU07QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsUUFBUSx3RkFBd0YsRUFBRTtBQUN4STtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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IiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiXG4vKipcbiAqIEV4cG9zZSBgQmFja29mZmAuXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBCYWNrb2ZmO1xuXG4vKipcbiAqIEluaXRpYWxpemUgYmFja29mZiB0aW1lciB3aXRoIGBvcHRzYC5cbiAqXG4gKiAtIGBtaW5gIGluaXRpYWwgdGltZW91dCBpbiBtaWxsaXNlY29uZHMgWzEwMF1cbiAqIC0gYG1heGAgbWF4IHRpbWVvdXQgWzEwMDAwXVxuICogLSBgaml0dGVyYCBbMF1cbiAqIC0gYGZhY3RvcmAgWzJdXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9wdHNcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZnVuY3Rpb24gQmFja29mZihvcHRzKSB7XG4gIG9wdHMgPSBvcHRzIHx8IHt9O1xuICB0aGlzLm1zID0gb3B0cy5taW4gfHwgMTAwO1xuICB0aGlzLm1heCA9IG9wdHMubWF4IHx8IDEwMDAwO1xuICB0aGlzLmZhY3RvciA9IG9wdHMuZmFjdG9yIHx8IDI7XG4gIHRoaXMuaml0dGVyID0gb3B0cy5qaXR0ZXIgPiAwICYmIG9wdHMuaml0dGVyIDw9IDEgPyBvcHRzLmppdHRlciA6IDA7XG4gIHRoaXMuYXR0ZW1wdHMgPSAwO1xufVxuXG4vKipcbiAqIFJldHVybiB0aGUgYmFja29mZiBkdXJhdGlvbi5cbiAqXG4gKiBAcmV0dXJuIHtOdW1iZXJ9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbkJhY2tvZmYucHJvdG90eXBlLmR1cmF0aW9uID0gZnVuY3Rpb24oKXtcbiAgdmFyIG1zID0gdGhpcy5tcyAqIE1hdGgucG93KHRoaXMuZmFjdG9yLCB0aGlzLmF0dGVtcHRzKyspO1xuICBpZiAodGhpcy5qaXR0ZXIpIHtcbiAgICB2YXIgcmFuZCA9ICBNYXRoLnJhbmRvbSgpO1xuICAgIHZhciBkZXZpYXRpb24gPSBNYXRoLmZsb29yKHJhbmQgKiB0aGlzLmppdHRlciAqIG1zKTtcbiAgICBtcyA9IChNYXRoLmZsb29yKHJhbmQgKiAxMCkgJiAxKSA9PSAwICA/IG1zIC0gZGV2aWF0aW9uIDogbXMgKyBkZXZpYXRpb247XG4gIH1cbiAgcmV0dXJuIE1hdGgubWluKG1zLCB0aGlzLm1heCkgfCAwO1xufTtcblxuLyoqXG4gKiBSZXNldCB0aGUgbnVtYmVyIG9mIGF0dGVtcHRzLlxuICpcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuQmFja29mZi5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbigpe1xuICB0aGlzLmF0dGVtcHRzID0gMDtcbn07XG5cbi8qKlxuICogU2V0IHRoZSBtaW5pbXVtIGR1cmF0aW9uXG4gKlxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5CYWNrb2ZmLnByb3RvdHlwZS5zZXRNaW4gPSBmdW5jdGlvbihtaW4pe1xuICB0aGlzLm1zID0gbWluO1xufTtcblxuLyoqXG4gKiBTZXQgdGhlIG1heGltdW0gZHVyYXRpb25cbiAqXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbkJhY2tvZmYucHJvdG90eXBlLnNldE1heCA9IGZ1bmN0aW9uKG1heCl7XG4gIHRoaXMubWF4ID0gbWF4O1xufTtcblxuLyoqXG4gKiBTZXQgdGhlIGppdHRlclxuICpcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuQmFja29mZi5wcm90b3R5cGUuc2V0Sml0dGVyID0gZnVuY3Rpb24oaml0dGVyKXtcbiAgdGhpcy5qaXR0ZXIgPSBqaXR0ZXI7XG59O1xuXG4iLCIvKlxuICogYmFzZTY0LWFycmF5YnVmZmVyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vbmlrbGFzdmgvYmFzZTY0LWFycmF5YnVmZmVyXG4gKlxuICogQ29weXJpZ2h0IChjKSAyMDEyIE5pa2xhcyB2b24gSGVydHplblxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuICovXG4oZnVuY3Rpb24oY2hhcnMpe1xuICBcInVzZSBzdHJpY3RcIjtcblxuICBleHBvcnRzLmVuY29kZSA9IGZ1bmN0aW9uKGFycmF5YnVmZmVyKSB7XG4gICAgdmFyIGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlidWZmZXIpLFxuICAgIGksIGxlbiA9IGJ5dGVzLmxlbmd0aCwgYmFzZTY0ID0gXCJcIjtcblxuICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrPTMpIHtcbiAgICAgIGJhc2U2NCArPSBjaGFyc1tieXRlc1tpXSA+PiAyXTtcbiAgICAgIGJhc2U2NCArPSBjaGFyc1soKGJ5dGVzW2ldICYgMykgPDwgNCkgfCAoYnl0ZXNbaSArIDFdID4+IDQpXTtcbiAgICAgIGJhc2U2NCArPSBjaGFyc1soKGJ5dGVzW2kgKyAxXSAmIDE1KSA8PCAyKSB8IChieXRlc1tpICsgMl0gPj4gNildO1xuICAgICAgYmFzZTY0ICs9IGNoYXJzW2J5dGVzW2kgKyAyXSAmIDYzXTtcbiAgICB9XG5cbiAgICBpZiAoKGxlbiAlIDMpID09PSAyKSB7XG4gICAgICBiYXNlNjQgPSBiYXNlNjQuc3Vic3RyaW5nKDAsIGJhc2U2NC5sZW5ndGggLSAxKSArIFwiPVwiO1xuICAgIH0gZWxzZSBpZiAobGVuICUgMyA9PT0gMSkge1xuICAgICAgYmFzZTY0ID0gYmFzZTY0LnN1YnN0cmluZygwLCBiYXNlNjQubGVuZ3RoIC0gMikgKyBcIj09XCI7XG4gICAgfVxuXG4gICAgcmV0dXJuIGJhc2U2NDtcbiAgfTtcblxuICBleHBvcnRzLmRlY29kZSA9ICBmdW5jdGlvbihiYXNlNjQpIHtcbiAgICB2YXIgYnVmZmVyTGVuZ3RoID0gYmFzZTY0Lmxlbmd0aCAqIDAuNzUsXG4gICAgbGVuID0gYmFzZTY0Lmxlbmd0aCwgaSwgcCA9IDAsXG4gICAgZW5jb2RlZDEsIGVuY29kZWQyLCBlbmNvZGVkMywgZW5jb2RlZDQ7XG5cbiAgICBpZiAoYmFzZTY0W2Jhc2U2NC5sZW5ndGggLSAxXSA9PT0gXCI9XCIpIHtcbiAgICAgIGJ1ZmZlckxlbmd0aC0tO1xuICAgICAgaWYgKGJhc2U2NFtiYXNlNjQubGVuZ3RoIC0gMl0gPT09IFwiPVwiKSB7XG4gICAgICAgIGJ1ZmZlckxlbmd0aC0tO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBhcnJheWJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcihidWZmZXJMZW5ndGgpLFxuICAgIGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlidWZmZXIpO1xuXG4gICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSs9NCkge1xuICAgICAgZW5jb2RlZDEgPSBjaGFycy5pbmRleE9mKGJhc2U2NFtpXSk7XG4gICAgICBlbmNvZGVkMiA9IGNoYXJzLmluZGV4T2YoYmFzZTY0W2krMV0pO1xuICAgICAgZW5jb2RlZDMgPSBjaGFycy5pbmRleE9mKGJhc2U2NFtpKzJdKTtcbiAgICAgIGVuY29kZWQ0ID0gY2hhcnMuaW5kZXhPZihiYXNlNjRbaSszXSk7XG5cbiAgICAgIGJ5dGVzW3ArK10gPSAoZW5jb2RlZDEgPDwgMikgfCAoZW5jb2RlZDIgPj4gNCk7XG4gICAgICBieXRlc1twKytdID0gKChlbmNvZGVkMiAmIDE1KSA8PCA0KSB8IChlbmNvZGVkMyA+PiAyKTtcbiAgICAgIGJ5dGVzW3ArK10gPSAoKGVuY29kZWQzICYgMykgPDwgNikgfCAoZW5jb2RlZDQgJiA2Myk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGFycmF5YnVmZmVyO1xuICB9O1xufSkoXCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvXCIpO1xuIiwiXHJcbi8qKlxyXG4gKiBFeHBvc2UgYEVtaXR0ZXJgLlxyXG4gKi9cclxuXHJcbmlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJykge1xyXG4gIG1vZHVsZS5leHBvcnRzID0gRW1pdHRlcjtcclxufVxyXG5cclxuLyoqXHJcbiAqIEluaXRpYWxpemUgYSBuZXcgYEVtaXR0ZXJgLlxyXG4gKlxyXG4gKiBAYXBpIHB1YmxpY1xyXG4gKi9cclxuXHJcbmZ1bmN0aW9uIEVtaXR0ZXIob2JqKSB7XHJcbiAgaWYgKG9iaikgcmV0dXJuIG1peGluKG9iaik7XHJcbn07XHJcblxyXG4vKipcclxuICogTWl4aW4gdGhlIGVtaXR0ZXIgcHJvcGVydGllcy5cclxuICpcclxuICogQHBhcmFtIHtPYmplY3R9IG9ialxyXG4gKiBAcmV0dXJuIHtPYmplY3R9XHJcbiAqIEBhcGkgcHJpdmF0ZVxyXG4gKi9cclxuXHJcbmZ1bmN0aW9uIG1peGluKG9iaikge1xyXG4gIGZvciAodmFyIGtleSBpbiBFbWl0dGVyLnByb3RvdHlwZSkge1xyXG4gICAgb2JqW2tleV0gPSBFbWl0dGVyLnByb3RvdHlwZVtrZXldO1xyXG4gIH1cclxuICByZXR1cm4gb2JqO1xyXG59XHJcblxyXG4vKipcclxuICogTGlzdGVuIG9uIHRoZSBnaXZlbiBgZXZlbnRgIHdpdGggYGZuYC5cclxuICpcclxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XHJcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXHJcbiAqIEByZXR1cm4ge0VtaXR0ZXJ9XHJcbiAqIEBhcGkgcHVibGljXHJcbiAqL1xyXG5cclxuRW1pdHRlci5wcm90b3R5cGUub24gPVxyXG5FbWl0dGVyLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24oZXZlbnQsIGZuKXtcclxuICB0aGlzLl9jYWxsYmFja3MgPSB0aGlzLl9jYWxsYmFja3MgfHwge307XHJcbiAgKHRoaXMuX2NhbGxiYWNrc1snJCcgKyBldmVudF0gPSB0aGlzLl9jYWxsYmFja3NbJyQnICsgZXZlbnRdIHx8IFtdKVxyXG4gICAgLnB1c2goZm4pO1xyXG4gIHJldHVybiB0aGlzO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEFkZHMgYW4gYGV2ZW50YCBsaXN0ZW5lciB0aGF0IHdpbGwgYmUgaW52b2tlZCBhIHNpbmdsZVxyXG4gKiB0aW1lIHRoZW4gYXV0b21hdGljYWxseSByZW1vdmVkLlxyXG4gKlxyXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcclxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cclxuICogQHJldHVybiB7RW1pdHRlcn1cclxuICogQGFwaSBwdWJsaWNcclxuICovXHJcblxyXG5FbWl0dGVyLnByb3RvdHlwZS5vbmNlID0gZnVuY3Rpb24oZXZlbnQsIGZuKXtcclxuICBmdW5jdGlvbiBvbigpIHtcclxuICAgIHRoaXMub2ZmKGV2ZW50LCBvbik7XHJcbiAgICBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG4gIH1cclxuXHJcbiAgb24uZm4gPSBmbjtcclxuICB0aGlzLm9uKGV2ZW50LCBvbik7XHJcbiAgcmV0dXJuIHRoaXM7XHJcbn07XHJcblxyXG4vKipcclxuICogUmVtb3ZlIHRoZSBnaXZlbiBjYWxsYmFjayBmb3IgYGV2ZW50YCBvciBhbGxcclxuICogcmVnaXN0ZXJlZCBjYWxsYmFja3MuXHJcbiAqXHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxyXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxyXG4gKiBAcmV0dXJuIHtFbWl0dGVyfVxyXG4gKiBAYXBpIHB1YmxpY1xyXG4gKi9cclxuXHJcbkVtaXR0ZXIucHJvdG90eXBlLm9mZiA9XHJcbkVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyID1cclxuRW1pdHRlci5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzID1cclxuRW1pdHRlci5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uKGV2ZW50LCBmbil7XHJcbiAgdGhpcy5fY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzIHx8IHt9O1xyXG5cclxuICAvLyBhbGxcclxuICBpZiAoMCA9PSBhcmd1bWVudHMubGVuZ3RoKSB7XHJcbiAgICB0aGlzLl9jYWxsYmFja3MgPSB7fTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxuXHJcbiAgLy8gc3BlY2lmaWMgZXZlbnRcclxuICB2YXIgY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzWyckJyArIGV2ZW50XTtcclxuICBpZiAoIWNhbGxiYWNrcykgcmV0dXJuIHRoaXM7XHJcblxyXG4gIC8vIHJlbW92ZSBhbGwgaGFuZGxlcnNcclxuICBpZiAoMSA9PSBhcmd1bWVudHMubGVuZ3RoKSB7XHJcbiAgICBkZWxldGUgdGhpcy5fY2FsbGJhY2tzWyckJyArIGV2ZW50XTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxuXHJcbiAgLy8gcmVtb3ZlIHNwZWNpZmljIGhhbmRsZXJcclxuICB2YXIgY2I7XHJcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBjYWxsYmFja3MubGVuZ3RoOyBpKyspIHtcclxuICAgIGNiID0gY2FsbGJhY2tzW2ldO1xyXG4gICAgaWYgKGNiID09PSBmbiB8fCBjYi5mbiA9PT0gZm4pIHtcclxuICAgICAgY2FsbGJhY2tzLnNwbGljZShpLCAxKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBSZW1vdmUgZXZlbnQgc3BlY2lmaWMgYXJyYXlzIGZvciBldmVudCB0eXBlcyB0aGF0IG5vXHJcbiAgLy8gb25lIGlzIHN1YnNjcmliZWQgZm9yIHRvIGF2b2lkIG1lbW9yeSBsZWFrLlxyXG4gIGlmIChjYWxsYmFja3MubGVuZ3RoID09PSAwKSB7XHJcbiAgICBkZWxldGUgdGhpcy5fY2FsbGJhY2tzWyckJyArIGV2ZW50XTtcclxuICB9XHJcblxyXG4gIHJldHVybiB0aGlzO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEVtaXQgYGV2ZW50YCB3aXRoIHRoZSBnaXZlbiBhcmdzLlxyXG4gKlxyXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcclxuICogQHBhcmFtIHtNaXhlZH0gLi4uXHJcbiAqIEByZXR1cm4ge0VtaXR0ZXJ9XHJcbiAqL1xyXG5cclxuRW1pdHRlci5wcm90b3R5cGUuZW1pdCA9IGZ1bmN0aW9uKGV2ZW50KXtcclxuICB0aGlzLl9jYWxsYmFja3MgPSB0aGlzLl9jYWxsYmFja3MgfHwge307XHJcblxyXG4gIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKVxyXG4gICAgLCBjYWxsYmFja3MgPSB0aGlzLl9jYWxsYmFja3NbJyQnICsgZXZlbnRdO1xyXG5cclxuICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xyXG4gICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XHJcbiAgfVxyXG5cclxuICBpZiAoY2FsbGJhY2tzKSB7XHJcbiAgICBjYWxsYmFja3MgPSBjYWxsYmFja3Muc2xpY2UoMCk7XHJcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY2FsbGJhY2tzLmxlbmd0aDsgaSA8IGxlbjsgKytpKSB7XHJcbiAgICAgIGNhbGxiYWNrc1tpXS5hcHBseSh0aGlzLCBhcmdzKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJldHVybiB0aGlzO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIFJldHVybiBhcnJheSBvZiBjYWxsYmFja3MgZm9yIGBldmVudGAuXHJcbiAqXHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxyXG4gKiBAcmV0dXJuIHtBcnJheX1cclxuICogQGFwaSBwdWJsaWNcclxuICovXHJcblxyXG5FbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lcnMgPSBmdW5jdGlvbihldmVudCl7XHJcbiAgdGhpcy5fY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzIHx8IHt9O1xyXG4gIHJldHVybiB0aGlzLl9jYWxsYmFja3NbJyQnICsgZXZlbnRdIHx8IFtdO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIENoZWNrIGlmIHRoaXMgZW1pdHRlciBoYXMgYGV2ZW50YCBoYW5kbGVycy5cclxuICpcclxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XHJcbiAqIEByZXR1cm4ge0Jvb2xlYW59XHJcbiAqIEBhcGkgcHVibGljXHJcbiAqL1xyXG5cclxuRW1pdHRlci5wcm90b3R5cGUuaGFzTGlzdGVuZXJzID0gZnVuY3Rpb24oZXZlbnQpe1xyXG4gIHJldHVybiAhISB0aGlzLmxpc3RlbmVycyhldmVudCkubGVuZ3RoO1xyXG59O1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuLyoqXHJcbiAqIEBhdXRob3IgICAgICAgWWFubmljayBEZXViZWwgKGh0dHBzOi8vZ2l0aHViLmNvbS95YW5kZXUpXHJcbiAqIEBjb3B5cmlnaHQgICAgQ29weXJpZ2h0IChjKSAyMDIwIFlhbm5pY2sgRGV1YmVsOyBQcm9qZWN0IFVybDogaHR0cHM6Ly9naXRodWIuY29tL2VuYWJsZTNkL2VuYWJsZTNkXHJcbiAqIEBsaWNlbnNlICAgICAge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9lbmFibGUzZC9lbmFibGUzZC9ibG9iL21hc3Rlci9MSUNFTlNFfEdOVSBHUEx2M31cclxuICovXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIHNjZW5lM2RfMSA9IHJlcXVpcmUoXCIuL3NjZW5lM2RcIik7XHJcbmV4cG9ydHMuU2NlbmUzRCA9IHNjZW5lM2RfMS5TY2VuZTNEO1xyXG52YXIgcHJvamVjdF8xID0gcmVxdWlyZShcIi4vcHJvamVjdFwiKTtcclxuZXhwb3J0cy5Qcm9qZWN0ID0gcHJvamVjdF8xLlByb2plY3Q7XHJcbnZhciBwaHlzaWNzTG9hZGVyXzEgPSByZXF1aXJlKFwiQGVuYWJsZTNkL2NvbW1vbi9kaXN0L3BoeXNpY3NMb2FkZXJcIik7XHJcbmV4cG9ydHMuUGh5c2ljc0xvYWRlciA9IHBoeXNpY3NMb2FkZXJfMS5QaHlzaWNzTG9hZGVyO1xyXG52YXIgZXh0ZW5kZWRNZXNoXzEgPSByZXF1aXJlKFwiQGVuYWJsZTNkL2NvbW1vbi9kaXN0L2V4dGVuZGVkTWVzaFwiKTtcclxuZXhwb3J0cy5FeHRlbmRlZE1lc2ggPSBleHRlbmRlZE1lc2hfMS5FeHRlbmRlZE1lc2g7XHJcbnZhciBleHRlbmRlZE9iamVjdDNEXzEgPSByZXF1aXJlKFwiQGVuYWJsZTNkL2NvbW1vbi9kaXN0L2V4dGVuZGVkT2JqZWN0M0RcIik7XHJcbmV4cG9ydHMuRXh0ZW5kZWRPYmplY3QzRCA9IGV4dGVuZGVkT2JqZWN0M0RfMS5FeHRlbmRlZE9iamVjdDNEO1xyXG52YXIgZXh0ZW5kZWRHcm91cF8xID0gcmVxdWlyZShcIkBlbmFibGUzZC9jb21tb24vZGlzdC9leHRlbmRlZEdyb3VwXCIpO1xyXG5leHBvcnRzLkV4dGVuZGVkR3JvdXAgPSBleHRlbmRlZEdyb3VwXzEuRXh0ZW5kZWRHcm91cDtcclxuY29uc3QgVEhSRUUgPSByZXF1aXJlKFwiQGVuYWJsZTNkL3RocmVlLXdyYXBwZXIvZGlzdC9pbmRleFwiKTtcclxuZXhwb3J0cy5USFJFRSA9IFRIUkVFO1xyXG5jb25zdCBUeXBlcyA9IHJlcXVpcmUoXCJAZW5hYmxlM2QvY29tbW9uL2Rpc3QvdHlwZXNcIik7XHJcbmV4cG9ydHMuVHlwZXMgPSBUeXBlcztcclxudmFyIGpveXN0aWNrXzEgPSByZXF1aXJlKFwiQGVuYWJsZTNkL2NvbW1vbi9kaXN0L21pc2Mvam95c3RpY2tcIik7XHJcbmV4cG9ydHMuSm95U3RpY2sgPSBqb3lzdGlja18xLkpveVN0aWNrO1xyXG52YXIgdGhpcmRQZXJzb25Db250cm9sc18xID0gcmVxdWlyZShcIkBlbmFibGUzZC9jb21tb24vZGlzdC9taXNjL3RoaXJkUGVyc29uQ29udHJvbHNcIik7XHJcbmV4cG9ydHMuVGhpcmRQZXJzb25Db250cm9scyA9IHRoaXJkUGVyc29uQ29udHJvbHNfMS5UaGlyZFBlcnNvbkNvbnRyb2xzO1xyXG52YXIgZmlyc3RQZXJzb25Db250cm9sc18xID0gcmVxdWlyZShcIkBlbmFibGUzZC9jb21tb24vZGlzdC9taXNjL2ZpcnN0UGVyc29uQ29udHJvbHNcIik7XHJcbmV4cG9ydHMuRmlyc3RQZXJzb25Db250cm9scyA9IGZpcnN0UGVyc29uQ29udHJvbHNfMS5GaXJzdFBlcnNvbkNvbnRyb2xzO1xyXG52YXIgcG9pbnRlckxvY2tfMSA9IHJlcXVpcmUoXCJAZW5hYmxlM2QvY29tbW9uL2Rpc3QvbWlzYy9wb2ludGVyTG9ja1wiKTtcclxuZXhwb3J0cy5Qb2ludGVyTG9jayA9IHBvaW50ZXJMb2NrXzEuUG9pbnRlckxvY2s7XHJcbnZhciBwb2ludGVyRHJhZ18xID0gcmVxdWlyZShcIkBlbmFibGUzZC9jb21tb24vZGlzdC9taXNjL3BvaW50ZXJEcmFnXCIpO1xyXG5leHBvcnRzLlBvaW50ZXJEcmFnID0gcG9pbnRlckRyYWdfMS5Qb2ludGVyRHJhZztcclxuLy8gcG9zdC1wcm9jZXNzaW5nXHJcbnZhciBpbmRleF8xID0gcmVxdWlyZShcIkBlbmFibGUzZC90aHJlZS13cmFwcGVyL2Rpc3QvaW5kZXhcIik7XHJcbmV4cG9ydHMuRWZmZWN0Q29tcG9zZXIgPSBpbmRleF8xLkVmZmVjdENvbXBvc2VyO1xyXG5leHBvcnRzLlJlbmRlclBhc3MgPSBpbmRleF8xLlJlbmRlclBhc3M7XHJcbmV4cG9ydHMuU2hhZGVyUGFzcyA9IGluZGV4XzEuU2hhZGVyUGFzcztcclxuZXhwb3J0cy5HbGl0Y2hQYXNzID0gaW5kZXhfMS5HbGl0Y2hQYXNzO1xyXG5leHBvcnRzLkRvdFNjcmVlblNoYWRlciA9IGluZGV4XzEuRG90U2NyZWVuU2hhZGVyO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcclxuLyoqXHJcbiAqIEBhdXRob3IgICAgICAgWWFubmljayBEZXViZWwgKGh0dHBzOi8vZ2l0aHViLmNvbS95YW5kZXUpXHJcbiAqIEBjb3B5cmlnaHQgICAgQ29weXJpZ2h0IChjKSAyMDIwIFlhbm5pY2sgRGV1YmVsOyBQcm9qZWN0IFVybDogaHR0cHM6Ly9naXRodWIuY29tL2VuYWJsZTNkL2VuYWJsZTNkXHJcbiAqIEBsaWNlbnNlICAgICAge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9lbmFibGUzZC9lbmFibGUzZC9ibG9iL21hc3Rlci9MSUNFTlNFfEdOVSBHUEx2M31cclxuICovXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuY29uc3QgaW5kZXhfMSA9IHJlcXVpcmUoXCJAZW5hYmxlM2QvdGhyZWUtZ3JhcGhpY3MvZGlzdC9pbmRleFwiKTtcclxuY2xhc3MgUHJvamVjdCBleHRlbmRzIGluZGV4XzEuVGhyZWVHcmFwaGljcyB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9qZWN0Q29uZmlnKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIHN1cGVyKHByb2plY3RDb25maWcpO1xyXG4gICAgICAgIHRoaXMucHJvamVjdENvbmZpZyA9IHByb2plY3RDb25maWc7XHJcbiAgICAgICAgdGhpcy5zY2VuZXMgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTaXplKHdpbmRvdy5pbm5lcldpZHRoLCB3aW5kb3cuaW5uZXJIZWlnaHQpO1xyXG4gICAgICAgIGlmICh0aGlzLnByb2plY3RDb25maWcucGFyZW50KVxyXG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMucHJvamVjdENvbmZpZy5wYXJlbnQpO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBkb2N1bWVudC5ib2R5O1xyXG4gICAgICAgIGlmICghdGhpcy5wYXJlbnQpIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKGBbZW5hYmxlM2RdIHBhcmVudCBcIiR7dGhpcy5wcm9qZWN0Q29uZmlnLnBhcmVudH1cIiBub3QgZm91bmQhIFdpbGwgYWRkIGl0IHRvIHRoZSBib2R5LmApO1xyXG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IGRvY3VtZW50LmJvZHk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucGFyZW50LmFwcGVuZENoaWxkKHRoaXMucmVuZGVyZXIuZG9tRWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy5jYW52YXMgPSB0aGlzLnJlbmRlcmVyLmRvbUVsZW1lbnQ7XHJcbiAgICAgICAgbGV0IGZpcnN0U2NlbmVLZXkgPSAnJztcclxuICAgICAgICB0aGlzLnByb2plY3RDb25maWcuc2NlbmVzLmZvckVhY2goKHNjZW5lLCBpKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHMgPSBuZXcgc2NlbmUoKTtcclxuICAgICAgICAgICAgaWYgKGkgPT09IDApXHJcbiAgICAgICAgICAgICAgICBmaXJzdFNjZW5lS2V5ID0gcy5zY2VuZUtleTtcclxuICAgICAgICAgICAgY29uc3QgcGx1ZyA9IHtcclxuICAgICAgICAgICAgICAgIC8vIHNjZW5lIGNvbmZpZ3VyYXRpb25cclxuICAgICAgICAgICAgICAgIHNjZW5lQ29uZmlnOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dHVyZUFuaXNvdHJvcHk6IHRoaXMudGV4dHVyZUFuaXNvdHJvcHksXHJcbiAgICAgICAgICAgICAgICAgICAgYXV0b1N0YXJ0OiBmYWxzZVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIC8vIGFkZCBjb3JlIGZlYXR1cmVzIGZyb20gdGhyZWUtZ3JhcGhpY3Njb25maWc6IHtcclxuICAgICAgICAgICAgICAgIHJlbmRlcmVyOiB0aGlzLnJlbmRlcmVyLFxyXG4gICAgICAgICAgICAgICAgcGFyZW50OiB0aGlzLnBhcmVudCxcclxuICAgICAgICAgICAgICAgIGNhbnZhczogdGhpcy5jYW52YXMsXHJcbiAgICAgICAgICAgICAgICBzY2VuZTogdGhpcy5zY2VuZSxcclxuICAgICAgICAgICAgICAgIHNjZW5lczogdGhpcy5zY2VuZXMsXHJcbiAgICAgICAgICAgICAgICBjYW1lcmE6IHRoaXMuY2FtZXJhLFxyXG4gICAgICAgICAgICAgICAgY2FjaGU6IHRoaXMuY2FjaGUsXHJcbiAgICAgICAgICAgICAgICBwaHlzaWNzOiB0aGlzLnBoeXNpY3NcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgcy5pbml0aWFsaXplU2NlbmUocGx1Zyk7XHJcbiAgICAgICAgICAgIGlmIChpID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBzLnNldFNpemUodGhpcy5wYXJlbnQuY2xpZW50V2lkdGgsIHRoaXMucGFyZW50LmNsaWVudEhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICBzLnNldFBpeGVsUmF0aW8oTWF0aC5tYXgoMSwgd2luZG93LmRldmljZVBpeGVsUmF0aW8gLyAyKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5zY2VuZXMuc2V0KHMuc2NlbmVLZXksIHMpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIHN0YXJ0IHRoZSBmaXJzdCBzY2VuZVxyXG4gICAgICAgIChfYSA9IHRoaXMuc2NlbmVzLmdldChmaXJzdFNjZW5lS2V5KSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnN0YXJ0KGZpcnN0U2NlbmVLZXkpO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydHMuUHJvamVjdCA9IFByb2plY3Q7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXByb2plY3QuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbi8qKlxyXG4gKiBAYXV0aG9yICAgICAgIFlhbm5pY2sgRGV1YmVsIChodHRwczovL2dpdGh1Yi5jb20veWFuZGV1KVxyXG4gKiBAY29weXJpZ2h0ICAgIENvcHlyaWdodCAoYykgMjAyMCBZYW5uaWNrIERldWJlbDsgUHJvamVjdCBVcmw6IGh0dHBzOi8vZ2l0aHViLmNvbS9lbmFibGUzZC9lbmFibGUzZFxyXG4gKiBAbGljZW5zZSAgICAgIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZW5hYmxlM2QvZW5hYmxlM2QvYmxvYi9tYXN0ZXIvTElDRU5TRXxHTlUgR1BMdjN9XHJcbiAqL1xyXG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn07XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuY29uc3QgaW5kZXhfMSA9IHJlcXVpcmUoXCJAZW5hYmxlM2QvdGhyZWUtd3JhcHBlci9kaXN0L2luZGV4XCIpO1xyXG5jb25zdCBQbHVnaW5zID0gcmVxdWlyZShcIkBlbmFibGUzZC90aHJlZS1ncmFwaGljcy9kaXN0L3BsdWdpbnMvaW5kZXhcIik7XHJcbi8vIGh0dHBzOi8vd3d3LnR5cGVzY3JpcHRsYW5nLm9yZy9kb2NzL2hhbmRib29rL3V0aWxpdHktdHlwZXMuaHRtbCBQaWNrPFQsSz5cclxuLy8gZXhwb3J0IGNsYXNzIFNjZW5lM0QgaW1wbGVtZW50cyBQYXJ0aWFsPFRocmVlR3JhcGhpY3M+IHtcclxuY2xhc3MgU2NlbmUzRCB7XHJcbiAgICBjb25zdHJ1Y3RvcihzY2VuZUNvbmZpZyA9IHt9KSB7XHJcbiAgICAgICAgdGhpcy5zY2VuZUNvbmZpZyA9IHNjZW5lQ29uZmlnO1xyXG4gICAgICAgIC8vIGNvcmUgbW9kdWxlcyBmcm9tIHRocmVlLWdyYXBoaWNzXHJcbiAgICAgICAgdGhpcy5zY2VuZXMgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgdGhpcy5fX2NvbmZpZyA9IHt9O1xyXG4gICAgICAgIHRoaXMuX2lzUnVubmluZyA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX2RlY29uc3RydWN0b3JGdW5jdGlvbnMgPSBbXTtcclxuICAgICAgICBjb25zdCB7IGtleSA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoKSwgZW5hYmxlWFIgPSBmYWxzZSB9ID0gc2NlbmVDb25maWc7XHJcbiAgICAgICAgdGhpcy5fX2NvbmZpZy5zY2VuZUtleSA9IGtleTtcclxuICAgICAgICB0aGlzLl9fY29uZmlnLmVuYWJsZVhSID0gZW5hYmxlWFI7XHJcbiAgICB9XHJcbiAgICBnZXQgZGVjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBhZGQ6IChmbmMpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2RlY29uc3RydWN0b3JGdW5jdGlvbnMucHVzaChmbmMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIC8vIEB0cy1pZ25vcmVcclxuICAgIGluaXRpYWxpemVTY2VuZShwbHVnaW5zKSB7XHJcbiAgICAgICAgY29uc3QgeyByZW5kZXJlciwgcGFyZW50LCBjYW52YXMsIHNjZW5lLCBzY2VuZXMsIGNhbWVyYSwgY2FjaGUsIHBoeXNpY3MsIHNjZW5lQ29uZmlnIH0gPSBwbHVnaW5zO1xyXG4gICAgICAgIHRoaXMuc2NlbmUgPSBzY2VuZTtcclxuICAgICAgICB0aGlzLnNjZW5lcyA9IHNjZW5lcztcclxuICAgICAgICB0aGlzLmNhbWVyYSA9IGNhbWVyYTtcclxuICAgICAgICB0aGlzLmNhY2hlID0gY2FjaGU7XHJcbiAgICAgICAgdGhpcy5waHlzaWNzID0gcGh5c2ljcztcclxuICAgICAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XHJcbiAgICAgICAgdGhpcy5jYW52YXMgPSBjYW52YXM7XHJcbiAgICAgICAgY29uc3QgeyBhdXRvU3RhcnQsIHRleHR1cmVBbmlzb3Ryb3B5IH0gPSBzY2VuZUNvbmZpZztcclxuICAgICAgICAvLyBwbHVnaW5zXHJcbiAgICAgICAgdGhpcy5sb2FkID0gbmV3IFBsdWdpbnMuTG9hZGVycyh0aGlzLmNhY2hlLCB0ZXh0dXJlQW5pc290cm9weSk7XHJcbiAgICAgICAgdGhpcy5saWdodHMgPSBuZXcgUGx1Z2lucy5MaWdodHModGhpcy5zY2VuZSk7XHJcbiAgICAgICAgdGhpcy50cmFuc2Zvcm0gPSBuZXcgUGx1Z2lucy5UcmFuc2Zvcm0odGhpcy5jYW1lcmEsIHRoaXMucmVuZGVyZXIpO1xyXG4gICAgICAgIHRoaXMuY3NnID0gbmV3IFBsdWdpbnMuQ1NHKHRoaXMuc2NlbmUsIHRoaXMudHJhbnNmb3JtKTtcclxuICAgICAgICB0aGlzLmhlaWdodE1hcCA9IG5ldyBQbHVnaW5zLkhlaWdodE1hcCh0aGlzLnNjZW5lKTtcclxuICAgICAgICB0aGlzLmZhY3RvcmllcyA9IG5ldyBQbHVnaW5zLkZhY3Rvcmllcyh0aGlzLnNjZW5lKTtcclxuICAgICAgICB0aGlzLm1pc2MgPSBuZXcgUGx1Z2lucy5NaXNjKHRoaXMuc2NlbmUsIHRoaXMucmVuZGVyZXIsIHRoaXMuZmFjdG9yaWVzKTtcclxuICAgICAgICB0aGlzLndzID0gbmV3IFBsdWdpbnMuV2FycFNwZWVkKHNjZW5lLCByZW5kZXJlciwgY2FtZXJhLCB0aGlzLmxpZ2h0cywgdGhpcy5waHlzaWNzLCB0aGlzLmxvYWQsIHRoaXMuZmFjdG9yaWVzKTtcclxuICAgICAgICB0aGlzLm1peGVycyA9IG5ldyBQbHVnaW5zLk1peGVycygpO1xyXG4gICAgICAgIHRoaXMuY2FtZXJhcyA9IG5ldyBQbHVnaW5zLkNhbWVyYXMoKTtcclxuICAgICAgICB0aGlzLmNsb2NrID0gbmV3IGluZGV4XzEuQ2xvY2soKTtcclxuICAgICAgICAvLyBhZGQgdnIgY2FtZXJhXHJcbiAgICAgICAgaWYgKHRoaXMuX19jb25maWcuZW5hYmxlWFIpIHtcclxuICAgICAgICAgICAgdGhpcy53ZWJYUiA9IG5ldyBQbHVnaW5zLldlYlhSKHRoaXMucmVuZGVyZXIsIHRoaXMuc2NlbmUsIHRoaXMuY2FtZXJhKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGF1dG9TdGFydClcclxuICAgICAgICAgICAgdGhpcy5zdGFydCh0aGlzLl9fY29uZmlnLnNjZW5lS2V5KTtcclxuICAgIH1cclxuICAgIGdldCBzY2VuZUtleSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fX2NvbmZpZy5zY2VuZUtleTtcclxuICAgIH1cclxuICAgIC8qKiBEZXN0cm95cyBhIG9iamVjdCBhbmQgaXRzIGJvZHkuICovXHJcbiAgICBkZXN0cm95KG9iaikge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICAoX2EgPSB0aGlzLnBoeXNpY3MpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5kZXN0cm95KG9iai5ib2R5KTtcclxuICAgICAgICB0aGlzLnNjZW5lLnJlbW92ZShvYmopO1xyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICBvYmogPSBudWxsO1xyXG4gICAgfVxyXG4gICAgd2FycFNwZWVkKC4uLmZlYXR1cmVzKSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHlpZWxkIHRoaXMud3Mud2FycFNwZWVkKC4uLmZlYXR1cmVzKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGdldCBhbmltYXRpb25NaXhlcnMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubWl4ZXJzLm1peGVycztcclxuICAgIH1cclxuICAgIGdldCBtYWtlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZhY3Rvcmllcy5tYWtlO1xyXG4gICAgfVxyXG4gICAgZ2V0IGFkZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5mYWN0b3JpZXMuYWRkO1xyXG4gICAgfVxyXG4gICAgaGF2ZVNvbWVGdW4obnVtYmVyT2ZFbGVtZW50cyA9IDIwKSB7XHJcbiAgICAgICAgUGx1Z2lucy5IYXZlU29tZUZ1bihudW1iZXJPZkVsZW1lbnRzLCB0aGlzLnBoeXNpY3MpO1xyXG4gICAgfVxyXG4gICAgaXNSdW5uaW5nKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9pc1J1bm5pbmc7XHJcbiAgICB9XHJcbiAgICBzdGFydChrZXksIGRhdGEpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICAgICAgLy8gc3RhcnQgYW5vdGhlciBzY2VuZVxyXG4gICAgICAgICAgICAvLyBhbmQgc3RvcCB0aGlzIG9uZVxyXG4gICAgICAgICAgICBpZiAoa2V5ICYmIGtleSAhPT0gdGhpcy5fX2NvbmZpZy5zY2VuZUtleSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdG9wKCk7XHJcbiAgICAgICAgICAgICAgICAoX2EgPSB0aGlzLnNjZW5lcy5nZXQoa2V5KSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLl9zdGFydChkYXRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3N0YXJ0KGRhdGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBfc3RhcnQoZGF0YSkge1xyXG4gICAgICAgIHZhciBfYSwgX2I7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICAgICAgeWllbGQgKChfYiA9IChfYSA9IHRoaXMpLmluaXQpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5jYWxsKF9hLCBkYXRhKSk7XHJcbiAgICAgICAgICAgIHlpZWxkIHRoaXMuX3ByZWxvYWQoKTtcclxuICAgICAgICAgICAgeWllbGQgdGhpcy5fY3JlYXRlKCk7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdzdGFydCcpXHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0QW5pbWF0aW9uTG9vcCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl91cGRhdGUoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuX2lzUnVubmluZyA9IHRydWU7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZXN0YXJ0KGRhdGEpIHtcclxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgICAgICB0aGlzLnN0b3AoKTtcclxuICAgICAgICAgICAgdGhpcy5zdGFydCh0aGlzLl9fY29uZmlnLnNjZW5lS2V5LCBkYXRhKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHN0b3AoKSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICAgICAgdGhpcy5faXNSdW5uaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0QW5pbWF0aW9uTG9vcChudWxsKTtcclxuICAgICAgICAgICAgLy8gcmVzZXQgY2xvY2tcclxuICAgICAgICAgICAgdGhpcy5jbG9jay5zdGFydCgpO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX2RlY29uc3RydWN0b3JGdW5jdGlvbnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHlpZWxkIHRoaXMuX2RlY29uc3RydWN0b3JGdW5jdGlvbnNbaV0oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl9kZWNvbnN0cnVjdG9yRnVuY3Rpb25zID0gW107XHJcbiAgICAgICAgICAgIC8vIGRlc3Ryb3kgYWxsIHJpZ2lkIGJvZGllc1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5waHlzaWNzLnJpZ2lkQm9kaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBoeXNpY3MuZGVzdHJveSh0aGlzLnBoeXNpY3MucmlnaWRCb2RpZXNbaV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGRlc3Ryb3kgYWxsIHRocmVlIG9iamVjdHNcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMuc2NlbmUuY2hpbGRyZW4ubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2NlbmUucmVtb3ZlKHRoaXMuc2NlbmUuY2hpbGRyZW5baV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBzZXRTaXplKHdpZHRoLCBoZWlnaHQpIHtcclxuICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFNpemUod2lkdGgsIGhlaWdodCk7XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5jYW1lcmEuYXNwZWN0ICE9PSAndW5kZWZpbmVkJylcclxuICAgICAgICAgICAgdGhpcy5jYW1lcmEuYXNwZWN0ID0gd2lkdGggLyBoZWlnaHQ7XHJcbiAgICAgICAgdGhpcy5jYW1lcmEudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpO1xyXG4gICAgfVxyXG4gICAgc2V0UGl4ZWxSYXRpbyhyYXRpbykge1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIuc2V0UGl4ZWxSYXRpbyhyYXRpbyk7XHJcbiAgICB9XHJcbiAgICAvLyBwdWJsaWMgZ2V0IGNvbnRyb2xzKCkge1xyXG4gICAgLy8gICByZXR1cm4ge1xyXG4gICAgLy8gICAgIHBvaW50ZXJEcmFnOiAoYXV0b1N0YXJ0ID0gdHJ1ZSkgPT4gbmV3IFBvaW50ZXJEcmFnKHRoaXMuY2FudmFzLCBhdXRvU3RhcnQpLFxyXG4gICAgLy8gICAgIHBvaW50ZXJMb2NrOiAoYXV0b0xvY2sgPSB0cnVlKSA9PiBuZXcgUG9pbnRlckxvY2sodGhpcy5jYW52YXMsIGF1dG9Mb2NrKSxcclxuICAgIC8vICAgICBqb3lzdGljazogKCkgPT4gbmV3IEpveVN0aWNrKCksXHJcbiAgICAvLyAgICAgZmlyc3RQZXJzb246ICh0YXJnZXQ6IEV4dGVuZGVkT2JqZWN0M0QsIGNvbmZpZzogRmlyc3RQZXJzb25Db250cm9sc0NvbmZpZyA9IHt9KSA9PlxyXG4gICAgLy8gICAgICAgbmV3IEZpcnN0UGVyc29uQ29udHJvbHModGhpcy5jYW1lcmEsIHRhcmdldCwgY29uZmlnKSxcclxuICAgIC8vICAgICB0aGlyZFBlcnNvbjogKHRhcmdldDogRXh0ZW5kZWRPYmplY3QzRCwgY29uZmlnOiBUaGlyZFBlcnNvbkNvbnRyb2xzQ29uZmlnID0ge30pID0+XHJcbiAgICAvLyAgICAgICBuZXcgVGhpcmRQZXJzb25Db250cm9scyh0aGlzLmNhbWVyYSwgdGFyZ2V0LCBjb25maWcpXHJcbiAgICAvLyAgIH1cclxuICAgIC8vIH1cclxuICAgIC8vIEB0cy1pZ25vcmVcclxuICAgIGluaXQoZGF0YSA9IHt9KSB7IH1cclxuICAgIHByZWxvYWQoKSB7IH1cclxuICAgIGNyZWF0ZSgpIHsgfVxyXG4gICAgdXBkYXRlKF90aW1lLCBfZGVsdGEpIHsgfVxyXG4gICAgX3ByZWxvYWQoKSB7XHJcbiAgICAgICAgdmFyIF9hLCBfYjtcclxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgICAgICB5aWVsZCAoKF9iID0gKF9hID0gdGhpcykucHJlbG9hZCkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmNhbGwoX2EpKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIF9jcmVhdGUoKSB7XHJcbiAgICAgICAgdmFyIF9hLCBfYjtcclxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgICAgICB5aWVsZCAoKF9iID0gKF9hID0gdGhpcykuY3JlYXRlKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuY2FsbChfYSkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgX3VwZGF0ZSgpIHtcclxuICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2Q7XHJcbiAgICAgICAgY29uc3QgZGVsdGEgPSB0aGlzLmNsb2NrLmdldERlbHRhKCkgKiAxMDAwO1xyXG4gICAgICAgIGNvbnN0IHRpbWUgPSB0aGlzLmNsb2NrLmdldEVsYXBzZWRUaW1lKCk7XHJcbiAgICAgICAgKF9iID0gKF9hID0gdGhpcykudXBkYXRlKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuY2FsbChfYSwgcGFyc2VGbG9hdCh0aW1lLnRvRml4ZWQoMykpLCBwYXJzZUludChkZWx0YS50b1N0cmluZygpKSk7XHJcbiAgICAgICAgKF9jID0gdGhpcy5waHlzaWNzKSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2MudXBkYXRlKGRlbHRhKTtcclxuICAgICAgICAoX2QgPSB0aGlzLnBoeXNpY3MpID09PSBudWxsIHx8IF9kID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZC51cGRhdGVEZWJ1Z2dlcigpO1xyXG4gICAgICAgIHRoaXMuYW5pbWF0aW9uTWl4ZXJzLnVwZGF0ZShkZWx0YSk7XHJcbiAgICAgICAgaWYgKHRoaXMuY29tcG9zZXIpXHJcbiAgICAgICAgICAgIHRoaXMuY29tcG9zZXIucmVuZGVyKCk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbmRlcih0aGlzLnNjZW5lLCB0aGlzLmNhbWVyYSk7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0cy5TY2VuZTNEID0gU2NlbmUzRDtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2NlbmUzZC5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcclxuLyoqXHJcbiAqIEBhdXRob3IgICAgICAgWWFubmljayBEZXViZWwgKGh0dHBzOi8vZ2l0aHViLmNvbS95YW5kZXUpXHJcbiAqIEBjb3B5cmlnaHQgICAgQ29weXJpZ2h0IChjKSAyMDIwIFlhbm5pY2sgRGV1YmVsOyBQcm9qZWN0IFVybDogaHR0cHM6Ly9naXRodWIuY29tL2VuYWJsZTNkL2VuYWJsZTNkXHJcbiAqIEBsaWNlbnNlICAgICAge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9lbmFibGUzZC9lbmFibGUzZC9ibG9iL21hc3Rlci9MSUNFTlNFfEdOVSBHUEx2M31cclxuICovXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5Db2xsaXNpb25FdmVudHMgPSB2b2lkIDA7XHJcbmNvbnN0IGV2ZW50ZW1pdHRlcjNfMSA9IHJlcXVpcmUoXCJldmVudGVtaXR0ZXIzXCIpO1xyXG5jbGFzcyBDb2xsaXNpb25FdmVudHMgZXh0ZW5kcyBldmVudGVtaXR0ZXIzXzEuRXZlbnRFbWl0dGVyIHtcclxuICAgIGFkZENvbGxpZGVyKG9iamVjdDEsIG9iamVjdDIsIGV2ZW50Q2FsbGJhY2spIHtcclxuICAgICAgICBpZiAoIW9iamVjdDEuYm9keSB8fCAhb2JqZWN0Mi5ib2R5KVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgb2JqZWN0MS5ib2R5LmNoZWNrQ29sbGlzaW9ucyA9IHRydWU7XHJcbiAgICAgICAgb2JqZWN0Mi5ib2R5LmNoZWNrQ29sbGlzaW9ucyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5vbignY29sbGlzaW9uJywgKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgdmFyIF9hLCBfYjtcclxuICAgICAgICAgICAgY29uc3QgeyBib2RpZXMsIGV2ZW50IH0gPSBkYXRhO1xyXG4gICAgICAgICAgICBpZiAoKChfYSA9IGJvZGllc1swXSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm5hbWUpICYmICgoX2IgPSBib2RpZXNbMV0pID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5uYW1lKSAmJiAob2JqZWN0MSA9PT0gbnVsbCB8fCBvYmplY3QxID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvYmplY3QxLm5hbWUpICYmIChvYmplY3QyID09PSBudWxsIHx8IG9iamVjdDIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9iamVjdDIubmFtZSkpIHtcclxuICAgICAgICAgICAgICAgIGlmIChib2RpZXNbMF0ubmFtZSA9PT0gb2JqZWN0MS5uYW1lICYmIGJvZGllc1sxXS5uYW1lID09PSBvYmplY3QyLm5hbWUpXHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnRDYWxsYmFjayhldmVudCk7XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChib2RpZXNbMV0ubmFtZSA9PT0gb2JqZWN0MS5uYW1lICYmIGJvZGllc1swXS5uYW1lID09PSBvYmplY3QyLm5hbWUpXHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnRDYWxsYmFjayhldmVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5leHBvcnRzLkNvbGxpc2lvbkV2ZW50cyA9IENvbGxpc2lvbkV2ZW50cztcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29sbGlzaW9uRXZlbnRzLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xyXG4vKipcclxuICogQGF1dGhvciAgICAgICBZYW5uaWNrIERldWJlbCAoaHR0cHM6Ly9naXRodWIuY29tL3lhbmRldSlcclxuICogQGNvcHlyaWdodCAgICBDb3B5cmlnaHQgKGMpIDIwMjAgWWFubmljayBEZXViZWw7IFByb2plY3QgVXJsOiBodHRwczovL2dpdGh1Yi5jb20vZW5hYmxlM2QvZW5hYmxlM2RcclxuICogQGxpY2Vuc2UgICAgICB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2VuYWJsZTNkL2VuYWJsZTNkL2Jsb2IvbWFzdGVyL0xJQ0VOU0V8R05VIEdQTHYzfVxyXG4gKi9cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5jbGFzcyBDb25zdHJhaW50cyB7XHJcbiAgICBjb25zdHJ1Y3Rvcih3b3JsZFRyYW5zZm9ybSwgcGh5c2ljc1dvcmxkKSB7XHJcbiAgICAgICAgdGhpcy53b3JsZFRyYW5zZm9ybSA9IHdvcmxkVHJhbnNmb3JtO1xyXG4gICAgICAgIHRoaXMucGh5c2ljc1dvcmxkID0gcGh5c2ljc1dvcmxkO1xyXG4gICAgICAgIHRoaXMudG1wQnRWZWN0b3IzID0gbmV3IEFtbW8uYnRWZWN0b3IzKCk7XHJcbiAgICB9XHJcbiAgICB0b0FtbW9WMyh2LCBkID0gMCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgQW1tby5idFZlY3RvcjModHlwZW9mICh2ID09PSBudWxsIHx8IHYgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHYueCkgIT09ICd1bmRlZmluZWQnID8gdi54IDogZCwgdHlwZW9mICh2ID09PSBudWxsIHx8IHYgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHYueSkgIT09ICd1bmRlZmluZWQnID8gdi55IDogZCwgdHlwZW9mICh2ID09PSBudWxsIHx8IHYgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHYueikgIT09ICd1bmRlZmluZWQnID8gdi56IDogZCk7XHJcbiAgICB9XHJcbiAgICBnZXQgYWRkQ29uc3RyYWludHMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbG9jazogKGJvZHlBLCBib2R5QiwgZGlzYWJsZUNvbGxpc2lvbnNCZXR3ZWVuTGlua2VkQm9kaWVzKSA9PiB0aGlzLmxvY2soYm9keUEsIGJvZHlCLCBkaXNhYmxlQ29sbGlzaW9uc0JldHdlZW5MaW5rZWRCb2RpZXMpLFxyXG4gICAgICAgICAgICBmaXhlZDogKGJvZHlBLCBib2R5QiwgZGlzYWJsZUNvbGxpc2lvbnNCZXR3ZWVuTGlua2VkQm9kaWVzKSA9PiB0aGlzLmZpeGVkKGJvZHlBLCBib2R5QiwgZGlzYWJsZUNvbGxpc2lvbnNCZXR3ZWVuTGlua2VkQm9kaWVzKSxcclxuICAgICAgICAgICAgcG9pbnRUb1BvaW50OiAoYm9keUEsIGJvZHlCLCBjb25maWcsIGRpc2FibGVDb2xsaXNpb25zQmV0d2VlbkxpbmtlZEJvZGllcykgPT4gdGhpcy5wb2ludFRvUG9pbnQoYm9keUEsIGJvZHlCLCBjb25maWcsIGRpc2FibGVDb2xsaXNpb25zQmV0d2VlbkxpbmtlZEJvZGllcyksXHJcbiAgICAgICAgICAgIGhpbmdlOiAoYm9keUEsIGJvZHlCLCBjb25maWcsIGRpc2FibGVDb2xsaXNpb25zQmV0d2VlbkxpbmtlZEJvZGllcykgPT4gdGhpcy5oaW5nZShib2R5QSwgYm9keUIsIGNvbmZpZywgZGlzYWJsZUNvbGxpc2lvbnNCZXR3ZWVuTGlua2VkQm9kaWVzKSxcclxuICAgICAgICAgICAgc2xpZGVyOiAoYm9keUEsIGJvZHlCLCBjb25maWcgPSB7fSwgZGlzYWJsZUNvbGxpc2lvbnNCZXR3ZWVuTGlua2VkQm9kaWVzKSA9PiB0aGlzLnNsaWRlcihib2R5QSwgYm9keUIsIGNvbmZpZywgZGlzYWJsZUNvbGxpc2lvbnNCZXR3ZWVuTGlua2VkQm9kaWVzKSxcclxuICAgICAgICAgICAgc3ByaW5nOiAoYm9keUEsIGJvZHlCLCBjb25maWcgPSB7fSwgZGlzYWJsZUNvbGxpc2lvbnNCZXR3ZWVuTGlua2VkQm9kaWVzKSA9PiB0aGlzLnNwcmluZyhib2R5QSwgYm9keUIsIGNvbmZpZywgZGlzYWJsZUNvbGxpc2lvbnNCZXR3ZWVuTGlua2VkQm9kaWVzKSxcclxuICAgICAgICAgICAgY29uZVR3aXN0OiAoYm9keUEsIGJvZHlCLCBjb25maWcgPSB7IGZyYW1lQToge30sIGZyYW1lQjoge30gfSwgZGlzYWJsZUNvbGxpc2lvbnNCZXR3ZWVuTGlua2VkQm9kaWVzKSA9PiB0aGlzLmNvbmVUd2lzdChib2R5QSwgYm9keUIsIGNvbmZpZywgZGlzYWJsZUNvbGxpc2lvbnNCZXR3ZWVuTGlua2VkQm9kaWVzKSxcclxuICAgICAgICAgICAgZG9mOiAoYm9keUEsIGJvZHlCLCBjb25maWcsIGRpc2FibGVDb2xsaXNpb25zQmV0d2VlbkxpbmtlZEJvZGllcykgPT4gdGhpcy5kb2YoYm9keUEsIGJvZHlCLCBjb25maWcsIGRpc2FibGVDb2xsaXNpb25zQmV0d2VlbkxpbmtlZEJvZGllcylcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgZ2V0VHJhbnNmb3JtKGJvZHlBLCBib2R5Qiwgb2Zmc2V0ID0geyB4OiAwLCB5OiAwLCB6OiAwIH0sIGNlbnRlciA9IGZhbHNlKSB7XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIG9mZnNldCA9IE9iamVjdC5hc3NpZ24oeyB4OiAwLCB5OiAwLCB6OiAwIH0sIG9mZnNldCk7XHJcbiAgICAgICAgY29uc3QgY2VudGVyVmVjdG9yID0gKHYxLCB2MikgPT4ge1xyXG4gICAgICAgICAgICB2YXIgZHggPSAodjEueCgpIC0gdjIueCgpKSAvIDIgKyBvZmZzZXQueDtcclxuICAgICAgICAgICAgdmFyIGR5ID0gKHYxLnkoKSAtIHYyLnkoKSkgLyAyICsgb2Zmc2V0Lnk7XHJcbiAgICAgICAgICAgIHZhciBkeiA9ICh2MS56KCkgLSB2Mi56KCkpIC8gMiArIG9mZnNldC56O1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEFtbW8uYnRWZWN0b3IzKGR4LCBkeSwgZHopO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgY29uc3QgdHJhbnNmb3JtQiA9IG5ldyBBbW1vLmJ0VHJhbnNmb3JtKCk7XHJcbiAgICAgICAgdHJhbnNmb3JtQi5zZXRJZGVudGl0eSgpO1xyXG4gICAgICAgIGlmICghY2VudGVyKSB7XHJcbiAgICAgICAgICAgIC8vIG9mZnNldFxyXG4gICAgICAgICAgICB0cmFuc2Zvcm1CLnNldE9yaWdpbihuZXcgQW1tby5idFZlY3RvcjMob2Zmc2V0LngsIG9mZnNldC55LCBvZmZzZXQueikpO1xyXG4gICAgICAgICAgICBjb25zdCB0cmFuc2Zvcm1BID0gYm9keUFcclxuICAgICAgICAgICAgICAgIC5nZXRDZW50ZXJPZk1hc3NUcmFuc2Zvcm0oKVxyXG4gICAgICAgICAgICAgICAgLmludmVyc2UoKVxyXG4gICAgICAgICAgICAgICAgLm9wX211bChib2R5Qi5nZXRXb3JsZFRyYW5zZm9ybSgpKVxyXG4gICAgICAgICAgICAgICAgLm9wX211bCh0cmFuc2Zvcm1CKTtcclxuICAgICAgICAgICAgcmV0dXJuIHsgdHJhbnNmb3JtQTogdHJhbnNmb3JtQSwgdHJhbnNmb3JtQjogdHJhbnNmb3JtQiB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgY2VudGVyID0gY2VudGVyVmVjdG9yKGJvZHlBLmdldFdvcmxkVHJhbnNmb3JtKCkuZ2V0T3JpZ2luKCksIGJvZHlCLmdldFdvcmxkVHJhbnNmb3JtKCkuZ2V0T3JpZ2luKCkpO1xyXG4gICAgICAgICAgICBjb25zdCB0cmFuc2Zvcm1CID0gbmV3IEFtbW8uYnRUcmFuc2Zvcm0oKTtcclxuICAgICAgICAgICAgdHJhbnNmb3JtQi5zZXRJZGVudGl0eSgpO1xyXG4gICAgICAgICAgICB0cmFuc2Zvcm1CLnNldE9yaWdpbihjZW50ZXIpO1xyXG4gICAgICAgICAgICBjb25zdCB0cmFuc2Zvcm1BID0gYm9keUFcclxuICAgICAgICAgICAgICAgIC5nZXRDZW50ZXJPZk1hc3NUcmFuc2Zvcm0oKVxyXG4gICAgICAgICAgICAgICAgLmludmVyc2UoKVxyXG4gICAgICAgICAgICAgICAgLm9wX211bChib2R5Qi5nZXRXb3JsZFRyYW5zZm9ybSgpKTtcclxuICAgICAgICAgICAgdHJhbnNmb3JtQS5vcF9tdWwodHJhbnNmb3JtQik7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHRyYW5zZm9ybUE6IHRyYW5zZm9ybUEsIHRyYW5zZm9ybUI6IHRyYW5zZm9ybUIgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBsb2NrKGJvZHlBLCBib2R5QiwgZGlzYWJsZUNvbGxpc2lvbnNCZXR3ZWVuTGlua2VkQm9kaWVzID0gdHJ1ZSkge1xyXG4gICAgICAgIGNvbnN0IHplcm8gPSB7IHg6IDAsIHk6IDAsIHo6IDAgfTtcclxuICAgICAgICByZXR1cm4gdGhpcy5kb2YoYm9keUEsIGJvZHlCLCB7IGFuZ3VsYXJMb3dlckxpbWl0OiB6ZXJvLCBhbmd1bGFyVXBwZXJMaW1pdDogemVybyB9LCBkaXNhYmxlQ29sbGlzaW9uc0JldHdlZW5MaW5rZWRCb2RpZXMpO1xyXG4gICAgfVxyXG4gICAgZml4ZWQoYm9keUEsIGJvZHlCLCBkaXNhYmxlQ29sbGlzaW9uc0JldHdlZW5MaW5rZWRCb2RpZXMgPSB0cnVlKSB7XHJcbiAgICAgICAgY29uc3QgdHJhbnNmb3JtID0gdGhpcy5nZXRUcmFuc2Zvcm0oYm9keUEuYW1tbywgYm9keUIuYW1tbyk7XHJcbiAgICAgICAgdHJhbnNmb3JtLnRyYW5zZm9ybUEuc2V0Um90YXRpb24oYm9keUEuYW1tby5nZXRXb3JsZFRyYW5zZm9ybSgpLmdldFJvdGF0aW9uKCkpO1xyXG4gICAgICAgIHRyYW5zZm9ybS50cmFuc2Zvcm1CLnNldFJvdGF0aW9uKGJvZHlCLmFtbW8uZ2V0V29ybGRUcmFuc2Zvcm0oKS5nZXRSb3RhdGlvbigpKTtcclxuICAgICAgICBjb25zdCBjb25zdHJhaW50ID0gbmV3IEFtbW8uYnRGaXhlZENvbnN0cmFpbnQoYm9keUEuYW1tbywgYm9keUIuYW1tbywgdHJhbnNmb3JtLnRyYW5zZm9ybUEsIHRyYW5zZm9ybS50cmFuc2Zvcm1CKTtcclxuICAgICAgICB0aGlzLnBoeXNpY3NXb3JsZC5hZGRDb25zdHJhaW50KGNvbnN0cmFpbnQsIGRpc2FibGVDb2xsaXNpb25zQmV0d2VlbkxpbmtlZEJvZGllcyk7XHJcbiAgICAgICAgcmV0dXJuIGNvbnN0cmFpbnQ7XHJcbiAgICB9XHJcbiAgICBwb2ludFRvUG9pbnQoYm9keUEsIGJvZHlCLCBjb25maWcgPSB7fSwgZGlzYWJsZUNvbGxpc2lvbnNCZXR3ZWVuTGlua2VkQm9kaWVzID0gdHJ1ZSkge1xyXG4gICAgICAgIGNvbnN0IHsgcGl2b3RBLCBwaXZvdEIgfSA9IGNvbmZpZztcclxuICAgICAgICBjb25zdCBwaXZvdFYzID0gbmV3IEFtbW8uYnRWZWN0b3IzKChwaXZvdEEgPT09IG51bGwgfHwgcGl2b3RBID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwaXZvdEEueCkgfHwgMCwgKHBpdm90QSA9PT0gbnVsbCB8fCBwaXZvdEEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBpdm90QS55KSB8fCAwLCAocGl2b3RBID09PSBudWxsIHx8IHBpdm90QSA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGl2b3RBLnopIHx8IDApO1xyXG4gICAgICAgIGNvbnN0IHRhcmdldFBpdm90VjMgPSBuZXcgQW1tby5idFZlY3RvcjMoKHBpdm90QiA9PT0gbnVsbCB8fCBwaXZvdEIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBpdm90Qi54KSB8fCAwLCAocGl2b3RCID09PSBudWxsIHx8IHBpdm90QiA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGl2b3RCLnkpIHx8IDAsIChwaXZvdEIgPT09IG51bGwgfHwgcGl2b3RCID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwaXZvdEIueikgfHwgMCk7XHJcbiAgICAgICAgY29uc3QgY29uc3RyYWludCA9IG5ldyBBbW1vLmJ0UG9pbnQyUG9pbnRDb25zdHJhaW50KGJvZHlBLmFtbW8sIGJvZHlCLmFtbW8sIHBpdm90VjMsIHRhcmdldFBpdm90VjMpO1xyXG4gICAgICAgIHRoaXMucGh5c2ljc1dvcmxkLmFkZENvbnN0cmFpbnQoY29uc3RyYWludCwgZGlzYWJsZUNvbGxpc2lvbnNCZXR3ZWVuTGlua2VkQm9kaWVzKTtcclxuICAgICAgICByZXR1cm4gY29uc3RyYWludDtcclxuICAgIH1cclxuICAgIGhpbmdlKGJvZHlBLCBib2R5QiwgY29uZmlnID0ge30sIGRpc2FibGVDb2xsaXNpb25zQmV0d2VlbkxpbmtlZEJvZGllcyA9IHRydWUpIHtcclxuICAgICAgICBjb25zdCB7IHBpdm90QSwgcGl2b3RCLCBheGlzQSwgYXhpc0IgfSA9IGNvbmZpZztcclxuICAgICAgICBjb25zdCBwaXZvdFYzID0gbmV3IEFtbW8uYnRWZWN0b3IzKChwaXZvdEEgPT09IG51bGwgfHwgcGl2b3RBID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwaXZvdEEueCkgfHwgMCwgKHBpdm90QSA9PT0gbnVsbCB8fCBwaXZvdEEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBpdm90QS55KSB8fCAwLCAocGl2b3RBID09PSBudWxsIHx8IHBpdm90QSA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGl2b3RBLnopIHx8IDApO1xyXG4gICAgICAgIGNvbnN0IHRhcmdldFBpdm90VjMgPSBuZXcgQW1tby5idFZlY3RvcjMoKHBpdm90QiA9PT0gbnVsbCB8fCBwaXZvdEIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBpdm90Qi54KSB8fCAwLCAocGl2b3RCID09PSBudWxsIHx8IHBpdm90QiA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGl2b3RCLnkpIHx8IDAsIChwaXZvdEIgPT09IG51bGwgfHwgcGl2b3RCID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwaXZvdEIueikgfHwgMCk7XHJcbiAgICAgICAgY29uc3QgYXhpc1YzID0gbmV3IEFtbW8uYnRWZWN0b3IzKChheGlzQSA9PT0gbnVsbCB8fCBheGlzQSA9PT0gdm9pZCAwID8gdm9pZCAwIDogYXhpc0EueCkgfHwgMCwgKGF4aXNBID09PSBudWxsIHx8IGF4aXNBID09PSB2b2lkIDAgPyB2b2lkIDAgOiBheGlzQS55KSB8fCAwLCAoYXhpc0EgPT09IG51bGwgfHwgYXhpc0EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGF4aXNBLnopIHx8IDApO1xyXG4gICAgICAgIGNvbnN0IHRhcmdldEF4aXNWMyA9IG5ldyBBbW1vLmJ0VmVjdG9yMygoYXhpc0IgPT09IG51bGwgfHwgYXhpc0IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGF4aXNCLngpIHx8IDAsIChheGlzQiA9PT0gbnVsbCB8fCBheGlzQiA9PT0gdm9pZCAwID8gdm9pZCAwIDogYXhpc0IueSkgfHwgMCwgKGF4aXNCID09PSBudWxsIHx8IGF4aXNCID09PSB2b2lkIDAgPyB2b2lkIDAgOiBheGlzQi56KSB8fCAwKTtcclxuICAgICAgICBjb25zdCBjb25zdHJhaW50ID0gbmV3IEFtbW8uYnRIaW5nZUNvbnN0cmFpbnQoYm9keUEuYW1tbywgYm9keUIuYW1tbywgcGl2b3RWMywgdGFyZ2V0UGl2b3RWMywgYXhpc1YzLCB0YXJnZXRBeGlzVjMsIHRydWUpO1xyXG4gICAgICAgIHRoaXMucGh5c2ljc1dvcmxkLmFkZENvbnN0cmFpbnQoY29uc3RyYWludCwgZGlzYWJsZUNvbGxpc2lvbnNCZXR3ZWVuTGlua2VkQm9kaWVzKTtcclxuICAgICAgICByZXR1cm4gY29uc3RyYWludDtcclxuICAgIH1cclxuICAgIC8vIGh0dHBzOi8vcHlidWxsZXQub3JnL0J1bGxldC9waHBCQjMvdmlld3RvcGljLnBocD9mPTkmdD0xMjY5MCZwPTQyMTUyJmhpbGl0PWJ0U2xpZGVyQ29uc3RyYWludCNwNDIxNTJcclxuICAgIHNsaWRlcihib2R5QSwgYm9keUIsIGNvbmZpZyA9IHt9LCBkaXNhYmxlQ29sbGlzaW9uc0JldHdlZW5MaW5rZWRCb2RpZXMgPSB0cnVlKSB7XHJcbiAgICAgICAgY29uc3QgdHJhbnNmb3JtID0gdGhpcy5nZXRUcmFuc2Zvcm0oYm9keUEuYW1tbywgYm9keUIuYW1tbyk7XHJcbiAgICAgICAgY29uc3QgeyBmcmFtZUEgPSB7fSwgZnJhbWVCID0ge30sIGxpbmVhckxvd2VyTGltaXQ6IGxsbCA9IDAsIGxpbmVhclVwcGVyTGltaXQ6IGx1bCA9IDAsIGFuZ3VsYXJMb3dlckxpbWl0OiBhbGwgPSAwLCBhbmd1bGFyVXBwZXJMaW1pdDogYXVsID0gMCB9ID0gY29uZmlnO1xyXG4gICAgICAgIGNvbnN0IHJvdGF0aW9uQSA9IHRyYW5zZm9ybS50cmFuc2Zvcm1BLmdldFJvdGF0aW9uKCk7XHJcbiAgICAgICAgcm90YXRpb25BLnNldEV1bGVyWllYKGZyYW1lQS54IHx8IDAsIGZyYW1lQS55IHx8IDAsIGZyYW1lQS56IHx8IDApO1xyXG4gICAgICAgIHRyYW5zZm9ybS50cmFuc2Zvcm1BLnNldFJvdGF0aW9uKHJvdGF0aW9uQSk7XHJcbiAgICAgICAgY29uc3Qgcm90YXRpb25CID0gdHJhbnNmb3JtLnRyYW5zZm9ybUIuZ2V0Um90YXRpb24oKTtcclxuICAgICAgICByb3RhdGlvbkIuc2V0RXVsZXJaWVgoZnJhbWVCLnggfHwgMCwgZnJhbWVCLnkgfHwgMCwgZnJhbWVCLnogfHwgMCk7XHJcbiAgICAgICAgdHJhbnNmb3JtLnRyYW5zZm9ybUIuc2V0Um90YXRpb24ocm90YXRpb25CKTtcclxuICAgICAgICBjb25zdCBjb25zdHJhaW50ID0gbmV3IEFtbW8uYnRTbGlkZXJDb25zdHJhaW50KGJvZHlBLmFtbW8sIGJvZHlCLmFtbW8sIHRyYW5zZm9ybS50cmFuc2Zvcm1BLCB0cmFuc2Zvcm0udHJhbnNmb3JtQiwgdHJ1ZSk7XHJcbiAgICAgICAgY29uc3RyYWludC5zZXRMb3dlckxpbkxpbWl0KGxsbCk7XHJcbiAgICAgICAgY29uc3RyYWludC5zZXRVcHBlckxpbkxpbWl0KGx1bCk7XHJcbiAgICAgICAgY29uc3RyYWludC5zZXRMb3dlckFuZ0xpbWl0KGFsbCk7XHJcbiAgICAgICAgY29uc3RyYWludC5zZXRVcHBlckFuZ0xpbWl0KGF1bCk7XHJcbiAgICAgICAgdGhpcy5waHlzaWNzV29ybGQuYWRkQ29uc3RyYWludChjb25zdHJhaW50LCBkaXNhYmxlQ29sbGlzaW9uc0JldHdlZW5MaW5rZWRCb2RpZXMpO1xyXG4gICAgICAgIHJldHVybiBjb25zdHJhaW50O1xyXG4gICAgfVxyXG4gICAgc3ByaW5nKGJvZHlBLCBib2R5QiwgY29uZmlnID0ge30sIGRpc2FibGVDb2xsaXNpb25zQmV0d2VlbkxpbmtlZEJvZGllcyA9IHRydWUpIHtcclxuICAgICAgICBjb25zdCB7IHN0aWZmbmVzcyA9IDUwLCBkYW1waW5nID0gMC4wMSwgYW5ndWxhckxvY2sgPSBmYWxzZSwgbGluZWFyTG93ZXJMaW1pdDogbGxsID0ge30sIGxpbmVhclVwcGVyTGltaXQ6IGx1bCA9IHt9LCBhbmd1bGFyTG93ZXJMaW1pdDogYWxsID0ge30sIGFuZ3VsYXJVcHBlckxpbWl0OiBhdWwgPSB7fSwgb2Zmc2V0ID0ge30sIGNlbnRlciA9IGZhbHNlLCBlbmFibGVTcHJpbmcgPSB0cnVlIH0gPSBjb25maWc7XHJcbiAgICAgICAgY29uc3Qgb2ZmID0gT2JqZWN0LmFzc2lnbih7IHg6IDAsIHk6IDAsIHo6IDAgfSwgb2Zmc2V0KTtcclxuICAgICAgICBjb25zdCB0cmFuc2Zvcm0gPSB0aGlzLmdldFRyYW5zZm9ybShib2R5QS5hbW1vLCBib2R5Qi5hbW1vLCBvZmYsIGNlbnRlcik7XHJcbiAgICAgICAgY29uc3QgY29uc3RyYWludCA9IG5ldyBBbW1vLmJ0R2VuZXJpYzZEb2ZTcHJpbmdDb25zdHJhaW50KGJvZHlBLmFtbW8sIGJvZHlCLmFtbW8sIHRyYW5zZm9ybS50cmFuc2Zvcm1BLCB0cmFuc2Zvcm0udHJhbnNmb3JtQiwgdHJ1ZSk7XHJcbiAgICAgICAgdGhpcy50bXBCdFZlY3RvcjMuc2V0VmFsdWUobGxsLnggfHwgMCwgbGxsLnkgfHwgMCwgbGxsLnogfHwgMCk7XHJcbiAgICAgICAgY29uc3RyYWludC5zZXRMaW5lYXJMb3dlckxpbWl0KHRoaXMudG1wQnRWZWN0b3IzKTtcclxuICAgICAgICB0aGlzLnRtcEJ0VmVjdG9yMy5zZXRWYWx1ZShsdWwueCB8fCAwLCBsdWwueSB8fCAwLCBsdWwueiB8fCAwKTtcclxuICAgICAgICBjb25zdHJhaW50LnNldExpbmVhclVwcGVyTGltaXQodGhpcy50bXBCdFZlY3RvcjMpO1xyXG4gICAgICAgIGlmIChhbmd1bGFyTG9jaykge1xyXG4gICAgICAgICAgICB0aGlzLnRtcEJ0VmVjdG9yMy5zZXRWYWx1ZSgwLCAwLCAwKTtcclxuICAgICAgICAgICAgY29uc3RyYWludC5zZXRBbmd1bGFyTG93ZXJMaW1pdCh0aGlzLnRtcEJ0VmVjdG9yMyk7XHJcbiAgICAgICAgICAgIGNvbnN0cmFpbnQuc2V0QW5ndWxhclVwcGVyTGltaXQodGhpcy50bXBCdFZlY3RvcjMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYWxsLCBhdWwpO1xyXG4gICAgICAgICAgICBjb25zdHJhaW50LnNldEFuZ3VsYXJMb3dlckxpbWl0KHRoaXMudG9BbW1vVjMoYWxsLCAtTWF0aC5QSSkpO1xyXG4gICAgICAgICAgICBjb25zdHJhaW50LnNldEFuZ3VsYXJVcHBlckxpbWl0KHRoaXMudG9BbW1vVjMoYXVsLCBNYXRoLlBJKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMzsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0cmFpbnQuZW5hYmxlU3ByaW5nKGksIGVuYWJsZVNwcmluZyk7XHJcbiAgICAgICAgICAgIGNvbnN0cmFpbnQuc2V0U3RpZmZuZXNzKGksIHN0aWZmbmVzcyk7XHJcbiAgICAgICAgICAgIGNvbnN0cmFpbnQuc2V0RGFtcGluZyhpLCBkYW1waW5nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gSSBoYXZlIG5vIGlkZWEgd2hhdCBzZXRFcXVpbGlicml1bVBvaW50IGRvZXMgOi9cclxuICAgICAgICAvLyBjb25zdHJhaW50LnNldEVxdWlsaWJyaXVtUG9pbnQoKVxyXG4gICAgICAgIHRoaXMucGh5c2ljc1dvcmxkLmFkZENvbnN0cmFpbnQoY29uc3RyYWludCwgZGlzYWJsZUNvbGxpc2lvbnNCZXR3ZWVuTGlua2VkQm9kaWVzKTtcclxuICAgICAgICByZXR1cm4gY29uc3RyYWludDtcclxuICAgIH1cclxuICAgIGNvbmVUd2lzdChib2R5QSwgYm9keUIsIGNvbmZpZywgZGlzYWJsZUNvbGxpc2lvbnNCZXR3ZWVuTGlua2VkQm9kaWVzID0gdHJ1ZSkge1xyXG4gICAgICAgIGNvbnN0IHsgZnJhbWVBLCBmcmFtZUIgfSA9IGNvbmZpZztcclxuICAgICAgICBjb25zdCByYkFGcmFtZSA9IG5ldyBBbW1vLmJ0VHJhbnNmb3JtKCk7XHJcbiAgICAgICAgcmJBRnJhbWUuc2V0SWRlbnRpdHkoKTtcclxuICAgICAgICByYkFGcmFtZS5nZXRPcmlnaW4oKS5zZXRWYWx1ZSgoZnJhbWVBID09PSBudWxsIHx8IGZyYW1lQSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZnJhbWVBLngpIHx8IDAsIChmcmFtZUEgPT09IG51bGwgfHwgZnJhbWVBID09PSB2b2lkIDAgPyB2b2lkIDAgOiBmcmFtZUEueSkgfHwgMCwgKGZyYW1lQSA9PT0gbnVsbCB8fCBmcmFtZUEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGZyYW1lQS56KSB8fCAwKTtcclxuICAgICAgICBjb25zdCByYkJGcmFtZSA9IG5ldyBBbW1vLmJ0VHJhbnNmb3JtKCk7XHJcbiAgICAgICAgcmJCRnJhbWUuc2V0SWRlbnRpdHkoKTtcclxuICAgICAgICByYkJGcmFtZS5nZXRPcmlnaW4oKS5zZXRWYWx1ZSgoZnJhbWVCID09PSBudWxsIHx8IGZyYW1lQiA9PT0gdm9pZCAwID8gdm9pZCAwIDogZnJhbWVCLngpIHx8IDAsIChmcmFtZUIgPT09IG51bGwgfHwgZnJhbWVCID09PSB2b2lkIDAgPyB2b2lkIDAgOiBmcmFtZUIueSkgfHwgMCwgKGZyYW1lQiA9PT0gbnVsbCB8fCBmcmFtZUIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGZyYW1lQi56KSB8fCAwKTtcclxuICAgICAgICBjb25zdCB0ID0gdGhpcy5nZXRUcmFuc2Zvcm0oYm9keUEuYW1tbywgYm9keUIuYW1tbyk7XHJcbiAgICAgICAgY29uc3QgY29uc3RyYWludCA9IG5ldyBBbW1vLmJ0Q29uZVR3aXN0Q29uc3RyYWludChib2R5Qi5hbW1vLCBib2R5QS5hbW1vLCByYkFGcmFtZSwgcmJCRnJhbWUpO1xyXG4gICAgICAgIC8vIGRvZXMgbm90IHdvcmsgYXQgYWxsIDovXHJcbiAgICAgICAgLy8gY29uc3RyYWludC5zZXRMaW1pdCgtTWF0aC5QSSAvIDUwLCBNYXRoLlBJIC8gNTApXHJcbiAgICAgICAgY29uc3RyYWludC5zZXRBbmd1bGFyT25seSh0cnVlKTtcclxuICAgICAgICB0aGlzLnBoeXNpY3NXb3JsZC5hZGRDb25zdHJhaW50KGNvbnN0cmFpbnQsIGRpc2FibGVDb2xsaXNpb25zQmV0d2VlbkxpbmtlZEJvZGllcyk7XHJcbiAgICAgICAgcmV0dXJuIGNvbnN0cmFpbnQ7XHJcbiAgICB9XHJcbiAgICBkb2YoYm9keUEsIGJvZHlCLCBjb25maWcgPSB7fSwgZGlzYWJsZUNvbGxpc2lvbnNCZXR3ZWVuTGlua2VkQm9kaWVzID0gdHJ1ZSkge1xyXG4gICAgICAgIGNvbnN0IHsgb2Zmc2V0LCBjZW50ZXIgPSBmYWxzZSB9ID0gY29uZmlnO1xyXG4gICAgICAgIGNvbnN0IG9mZiA9IE9iamVjdC5hc3NpZ24oeyB4OiAwLCB5OiAwLCB6OiAwIH0sIG9mZnNldCk7XHJcbiAgICAgICAgY29uc3QgdHJhbnNmb3JtID0gdGhpcy5nZXRUcmFuc2Zvcm0oYm9keUEuYW1tbywgYm9keUIuYW1tbywgb2ZmLCBjZW50ZXIpO1xyXG4gICAgICAgIGNvbnN0IGNvbnN0cmFpbnQgPSBuZXcgQW1tby5idEdlbmVyaWM2RG9mQ29uc3RyYWludChib2R5QS5hbW1vLCBib2R5Qi5hbW1vLCB0cmFuc2Zvcm0udHJhbnNmb3JtQSwgdHJhbnNmb3JtLnRyYW5zZm9ybUIsIHRydWUpO1xyXG4gICAgICAgIGNvbnN0IHsgbGluZWFyTG93ZXJMaW1pdCwgbGluZWFyVXBwZXJMaW1pdCwgYW5ndWxhckxvd2VyTGltaXQsIGFuZ3VsYXJVcHBlckxpbWl0IH0gPSBjb25maWc7XHJcbiAgICAgICAgY29uc3QgbGxsID0gdGhpcy50b0FtbW9WMyhsaW5lYXJMb3dlckxpbWl0KTtcclxuICAgICAgICBjb25zdCBsdWwgPSB0aGlzLnRvQW1tb1YzKGxpbmVhclVwcGVyTGltaXQpO1xyXG4gICAgICAgIGNvbnN0IGFsbCA9IHRoaXMudG9BbW1vVjMoYW5ndWxhckxvd2VyTGltaXQsIC1NYXRoLlBJKTtcclxuICAgICAgICBjb25zdCBhdWwgPSB0aGlzLnRvQW1tb1YzKGFuZ3VsYXJVcHBlckxpbWl0LCBNYXRoLlBJKTtcclxuICAgICAgICBjb25zdHJhaW50LnNldExpbmVhckxvd2VyTGltaXQobGxsKTtcclxuICAgICAgICBjb25zdHJhaW50LnNldExpbmVhclVwcGVyTGltaXQobHVsKTtcclxuICAgICAgICBjb25zdHJhaW50LnNldEFuZ3VsYXJMb3dlckxpbWl0KGFsbCk7XHJcbiAgICAgICAgY29uc3RyYWludC5zZXRBbmd1bGFyVXBwZXJMaW1pdChhdWwpO1xyXG4gICAgICAgIEFtbW8uZGVzdHJveShsbGwpO1xyXG4gICAgICAgIEFtbW8uZGVzdHJveShsdWwpO1xyXG4gICAgICAgIEFtbW8uZGVzdHJveShhbGwpO1xyXG4gICAgICAgIEFtbW8uZGVzdHJveShhdWwpO1xyXG4gICAgICAgIHRoaXMucGh5c2ljc1dvcmxkLmFkZENvbnN0cmFpbnQoY29uc3RyYWludCwgZGlzYWJsZUNvbGxpc2lvbnNCZXR3ZWVuTGlua2VkQm9kaWVzKTtcclxuICAgICAgICByZXR1cm4gY29uc3RyYWludDtcclxuICAgIH1cclxufVxyXG5leHBvcnRzLmRlZmF1bHQgPSBDb25zdHJhaW50cztcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29uc3RyYWludHMuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbi8qKlxyXG4gKiBDb3BpZWQgZnJvbSB0aHJlZS5qcyBleGFtcGxlcyBhbmQgYWRkZWQgYSBmaXhcclxuICovXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5Db252ZXhPYmplY3RCcmVha2VyID0gdm9pZCAwO1xyXG4vKipcclxuICogQGF1dGhvciB5b21ib3ByaW1lIGh0dHBzOi8vZ2l0aHViLmNvbS95b21ib3ByaW1lXHJcbiAqXHJcbiAqIEBmaWxlb3ZlcnZpZXcgVGhpcyBjbGFzcyBjYW4gYmUgdXNlZCB0byBzdWJkaXZpZGUgYSBjb252ZXggR2VvbWV0cnkgb2JqZWN0IGludG8gcGllY2VzLlxyXG4gKlxyXG4gKiBVc2FnZTpcclxuICpcclxuICogVXNlIHRoZSBmdW5jdGlvbiBwcmVwYXJlQnJlYWthYmxlT2JqZWN0IHRvIHByZXBhcmUgYSBNZXNoIG9iamVjdCB0byBiZSBicm9rZW4uXHJcbiAqXHJcbiAqIFRoZW4sIGNhbGwgdGhlIHZhcmlvdXMgZnVuY3Rpb25zIHRvIHN1YmRpdmlkZSB0aGUgb2JqZWN0IChzdWJkaXZpZGVCeUltcGFjdCwgY3V0QnlQbGFuZSlcclxuICpcclxuICogU3ViLW9iamVjdHMgdGhhdCBhcmUgcHJvZHVjdCBvZiBzdWJkaXZpc2lvbiBkb24ndCBuZWVkIHByZXBhcmVCcmVha2FibGVPYmplY3QgdG8gYmUgY2FsbGVkIG9uIHRoZW0uXHJcbiAqXHJcbiAqIFJlcXVpc2l0ZXMgZm9yIHRoZSBvYmplY3Q6XHJcbiAqXHJcbiAqICAtIE1lc2ggb2JqZWN0IG11c3QgaGF2ZSBhIEJ1ZmZlckdlb21ldHJ5IChub3QgR2VvbWV0cnkpIGFuZCBhIE1hdGVyaWFsXHJcbiAqXHJcbiAqICAtIFZlcnRleCBub3JtYWxzIG11c3QgYmUgcGxhbmFyIChub3Qgc21vb3RoZWQpXHJcbiAqXHJcbiAqICAtIFRoZSBnZW9tZXRyeSBtdXN0IGJlIGNvbnZleCAodGhpcyBpcyBub3QgY2hlY2tlZCBpbiB0aGUgbGlicmFyeSkuIFlvdSBjYW4gY3JlYXRlIGNvbnZleFxyXG4gKiAgZ2VvbWV0cmllcyB3aXRoIENvbnZleEJ1ZmZlckdlb21ldHJ5LiBUaGUgQm94QnVmZmVyR2VvbWV0cnksIFNwaGVyZUJ1ZmZlckdlb21ldHJ5IGFuZCBvdGhlciBjb252ZXggcHJpbWl0aXZlc1xyXG4gKiAgY2FuIGFsc28gYmUgdXNlZC5cclxuICpcclxuICogTm90ZTogVGhpcyBsaWIgYWRkcyBtZW1iZXIgdmFyaWFibGVzIHRvIG9iamVjdCdzIHVzZXJEYXRhIG1lbWJlciAoc2VlIHByZXBhcmVCcmVha2FibGVPYmplY3QgZnVuY3Rpb24pXHJcbiAqIFVzZSB3aXRoIGNhdXRpb24gYW5kIHJlYWQgdGhlIGNvZGUgd2hlbiB1c2luZyB3aXRoIG90aGVyIGxpYnMuXHJcbiAqXHJcbiAqIEBwYXJhbSB7ZG91YmxlfSBtaW5TaXplRm9yQnJlYWsgTWluIHNpemUgYSBkZWJyaXMgY2FuIGhhdmUgdG8gYnJlYWsuXHJcbiAqIEBwYXJhbSB7ZG91YmxlfSBzbWFsbERlbHRhIE1heCBkaXN0YW5jZSB0byBjb25zaWRlciB0aGF0IGEgcG9pbnQgYmVsb25ncyB0byBhIHBsYW5lLlxyXG4gKlxyXG4gKi9cclxuY29uc3QgaW5kZXhfMSA9IHJlcXVpcmUoXCJAZW5hYmxlM2QvdGhyZWUtd3JhcHBlci9kaXN0L2luZGV4XCIpO1xyXG5jb25zdCBpbmRleF8yID0gcmVxdWlyZShcIkBlbmFibGUzZC90aHJlZS13cmFwcGVyL2Rpc3QvaW5kZXhcIik7XHJcbmNvbnN0IGxvZ2dlcl8xID0gcmVxdWlyZShcIkBlbmFibGUzZC9jb21tb24vZGlzdC9sb2dnZXJcIik7XHJcbmNvbnN0IENvbnZleE9iamVjdEJyZWFrZXIgPSBmdW5jdGlvbiAobWluU2l6ZUZvckJyZWFrLCBzbWFsbERlbHRhKSB7XHJcbiAgICAvLyBAdHMtaWdub3JlXHJcbiAgICB0aGlzLm1pblNpemVGb3JCcmVhayA9IG1pblNpemVGb3JCcmVhayB8fCAxLjQ7XHJcbiAgICAvLyBAdHMtaWdub3JlXHJcbiAgICB0aGlzLnNtYWxsRGVsdGEgPSBzbWFsbERlbHRhIHx8IDAuMDAwMTtcclxuICAgIC8vIEB0cy1pZ25vcmVcclxuICAgIHRoaXMudGVtcExpbmUxID0gbmV3IGluZGV4XzEuTGluZTMoKTtcclxuICAgIC8vIEB0cy1pZ25vcmVcclxuICAgIHRoaXMudGVtcFBsYW5lMSA9IG5ldyBpbmRleF8xLlBsYW5lKCk7XHJcbiAgICAvLyBAdHMtaWdub3JlXHJcbiAgICB0aGlzLnRlbXBQbGFuZTIgPSBuZXcgaW5kZXhfMS5QbGFuZSgpO1xyXG4gICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgdGhpcy50ZW1wUGxhbmVfQ3V0ID0gbmV3IGluZGV4XzEuUGxhbmUoKTtcclxuICAgIC8vIEB0cy1pZ25vcmVcclxuICAgIHRoaXMudGVtcENNMSA9IG5ldyBpbmRleF8xLlZlY3RvcjMoKTtcclxuICAgIC8vIEB0cy1pZ25vcmVcclxuICAgIHRoaXMudGVtcENNMiA9IG5ldyBpbmRleF8xLlZlY3RvcjMoKTtcclxuICAgIC8vIEB0cy1pZ25vcmVcclxuICAgIHRoaXMudGVtcFZlY3RvcjMgPSBuZXcgaW5kZXhfMS5WZWN0b3IzKCk7XHJcbiAgICAvLyBAdHMtaWdub3JlXHJcbiAgICB0aGlzLnRlbXBWZWN0b3IzXzIgPSBuZXcgaW5kZXhfMS5WZWN0b3IzKCk7XHJcbiAgICAvLyBAdHMtaWdub3JlXHJcbiAgICB0aGlzLnRlbXBWZWN0b3IzXzMgPSBuZXcgaW5kZXhfMS5WZWN0b3IzKCk7XHJcbiAgICAvLyBAdHMtaWdub3JlXHJcbiAgICB0aGlzLnRlbXBWZWN0b3IzX1AwID0gbmV3IGluZGV4XzEuVmVjdG9yMygpO1xyXG4gICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgdGhpcy50ZW1wVmVjdG9yM19QMSA9IG5ldyBpbmRleF8xLlZlY3RvcjMoKTtcclxuICAgIC8vIEB0cy1pZ25vcmVcclxuICAgIHRoaXMudGVtcFZlY3RvcjNfUDIgPSBuZXcgaW5kZXhfMS5WZWN0b3IzKCk7XHJcbiAgICAvLyBAdHMtaWdub3JlXHJcbiAgICB0aGlzLnRlbXBWZWN0b3IzX04wID0gbmV3IGluZGV4XzEuVmVjdG9yMygpO1xyXG4gICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgdGhpcy50ZW1wVmVjdG9yM19OMSA9IG5ldyBpbmRleF8xLlZlY3RvcjMoKTtcclxuICAgIC8vIEB0cy1pZ25vcmVcclxuICAgIHRoaXMudGVtcFZlY3RvcjNfQUIgPSBuZXcgaW5kZXhfMS5WZWN0b3IzKCk7XHJcbiAgICAvLyBAdHMtaWdub3JlXHJcbiAgICB0aGlzLnRlbXBWZWN0b3IzX0NCID0gbmV3IGluZGV4XzEuVmVjdG9yMygpO1xyXG4gICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgdGhpcy50ZW1wUmVzdWx0T2JqZWN0cyA9IHsgb2JqZWN0MTogbnVsbCwgb2JqZWN0MjogbnVsbCB9O1xyXG4gICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgdGhpcy5zZWdtZW50cyA9IFtdO1xyXG4gICAgdmFyIG4gPSAzMCAqIDMwO1xyXG4gICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspXHJcbiAgICAgICAgdGhpcy5zZWdtZW50c1tpXSA9IGZhbHNlO1xyXG59O1xyXG5leHBvcnRzLkNvbnZleE9iamVjdEJyZWFrZXIgPSBDb252ZXhPYmplY3RCcmVha2VyO1xyXG5Db252ZXhPYmplY3RCcmVha2VyLnByb3RvdHlwZSA9IHtcclxuICAgIGNvbnN0cnVjdG9yOiBDb252ZXhPYmplY3RCcmVha2VyLFxyXG4gICAgcHJlcGFyZUJyZWFrYWJsZU9iamVjdDogZnVuY3Rpb24gKG9iamVjdCwgbWFzcywgdmVsb2NpdHksIGFuZ3VsYXJWZWxvY2l0eSwgYnJlYWthYmxlKSB7XHJcbiAgICAgICAgLy8gb2JqZWN0IGlzIGEgT2JqZWN0M2QgKG5vcm1hbGx5IGEgTWVzaCksIG11c3QgaGF2ZSBhIEJ1ZmZlckdlb21ldHJ5LCBhbmQgaXQgbXVzdCBiZSBjb252ZXguXHJcbiAgICAgICAgLy8gSXRzIG1hdGVyaWFsIHByb3BlcnR5IGlzIHByb3BhZ2F0ZWQgdG8gaXRzIGNoaWxkcmVuIChzdWItcGllY2VzKVxyXG4gICAgICAgIC8vIG1hc3MgbXVzdCBiZSA+IDBcclxuICAgICAgICBpZiAoIW9iamVjdC5nZW9tZXRyeS5pc0J1ZmZlckdlb21ldHJ5KSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1RIUkVFLkNvbnZleE9iamVjdEJyZWFrZXIucHJlcGFyZUJyZWFrYWJsZU9iamVjdCgpOiBQYXJhbWV0ZXIgb2JqZWN0IG11c3QgaGF2ZSBhIEJ1ZmZlckdlb21ldHJ5LicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBvYmplY3QudXNlckRhdGEuYW1tb1BoeXNpY3NEYXRhID0ge307IC8vIGluaXRpYWxpc2Ugb3VyIG5ldyBkYXRhIGNvbnRhaW5lciAtIHdvdWxkIGJlIGJlc3QgdG8gbW92ZSB0aGlzIHRvIEV4dGVuZGVkT2JqZWN0IGFuZCBub3QgcmVseSBvbiB1c2VyRGF0YSBhdCBhbGwgZm9yIGJlc3QgY29tcGF0aWJpbGl0eVxyXG4gICAgICAgIHZhciBhbW1vUGh5c2ljc0RhdGEgPSBvYmplY3QudXNlckRhdGEuYW1tb1BoeXNpY3NEYXRhOyAvLyBnZXQgcmVmZXJlbmNlIHRvIGl0XHJcbiAgICAgICAgYW1tb1BoeXNpY3NEYXRhLm1hc3MgPSBtYXNzO1xyXG4gICAgICAgIGFtbW9QaHlzaWNzRGF0YS52ZWxvY2l0eSA9IHZlbG9jaXR5LmNsb25lKCk7XHJcbiAgICAgICAgYW1tb1BoeXNpY3NEYXRhLmFuZ3VsYXJWZWxvY2l0eSA9IGFuZ3VsYXJWZWxvY2l0eS5jbG9uZSgpO1xyXG4gICAgICAgIGFtbW9QaHlzaWNzRGF0YS5icmVha2FibGUgPSBicmVha2FibGU7XHJcbiAgICB9LFxyXG4gICAgLypcclxuICAgICAqIEBwYXJhbSB7aW50fSBtYXhSYWRpYWxJdGVyYXRpb25zIEl0ZXJhdGlvbnMgZm9yIHJhZGlhbCBjdXRzLlxyXG4gICAgICogQHBhcmFtIHtpbnR9IG1heFJhbmRvbUl0ZXJhdGlvbnMgTWF4IHJhbmRvbSBpdGVyYXRpb25zIGZvciBub3QtcmFkaWFsIGN1dHNcclxuICAgICAqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBhcnJheSBvZiBwaWVjZXNcclxuICAgICAqL1xyXG4gICAgc3ViZGl2aWRlQnlJbXBhY3Q6IGZ1bmN0aW9uIChvYmplY3QsIHBvaW50T2ZJbXBhY3QsIG5vcm1hbCwgbWF4UmFkaWFsSXRlcmF0aW9ucywgbWF4UmFuZG9tSXRlcmF0aW9ucykge1xyXG4gICAgICAgIHZhciBkZWJyaXMgPSBbXTtcclxuICAgICAgICB2YXIgdGVtcFBsYW5lMSA9IHRoaXMudGVtcFBsYW5lMTtcclxuICAgICAgICB2YXIgdGVtcFBsYW5lMiA9IHRoaXMudGVtcFBsYW5lMjtcclxuICAgICAgICB0aGlzLnRlbXBWZWN0b3IzLmFkZFZlY3RvcnMocG9pbnRPZkltcGFjdCwgbm9ybWFsKTtcclxuICAgICAgICB0ZW1wUGxhbmUxLnNldEZyb21Db3BsYW5hclBvaW50cyhwb2ludE9mSW1wYWN0LCBvYmplY3QucG9zaXRpb24sIHRoaXMudGVtcFZlY3RvcjMpO1xyXG4gICAgICAgIHZhciBtYXhUb3RhbEl0ZXJhdGlvbnMgPSBtYXhSYW5kb21JdGVyYXRpb25zICsgbWF4UmFkaWFsSXRlcmF0aW9ucztcclxuICAgICAgICB2YXIgc2NvcGUgPSB0aGlzO1xyXG4gICAgICAgIGZ1bmN0aW9uIHN1YmRpdmlkZVJhZGlhbChzdWJPYmplY3QsIHN0YXJ0QW5nbGUsIGVuZEFuZ2xlLCBudW1JdGVyYXRpb25zKSB7XHJcbiAgICAgICAgICAgIGlmIChNYXRoLnJhbmRvbSgpIDwgbnVtSXRlcmF0aW9ucyAqIDAuMDUgfHwgbnVtSXRlcmF0aW9ucyA+IG1heFRvdGFsSXRlcmF0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgZGVicmlzLnB1c2goc3ViT2JqZWN0KTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgYW5nbGUgPSBNYXRoLlBJO1xyXG4gICAgICAgICAgICBpZiAobnVtSXRlcmF0aW9ucyA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgdGVtcFBsYW5lMi5ub3JtYWwuY29weSh0ZW1wUGxhbmUxLm5vcm1hbCk7XHJcbiAgICAgICAgICAgICAgICB0ZW1wUGxhbmUyLmNvbnN0YW50ID0gdGVtcFBsYW5lMS5jb25zdGFudDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChudW1JdGVyYXRpb25zIDw9IG1heFJhZGlhbEl0ZXJhdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgICAgICBhbmdsZSA9IChlbmRBbmdsZSAtIHN0YXJ0QW5nbGUpICogKDAuMiArIDAuNiAqIE1hdGgucmFuZG9tKCkpICsgc3RhcnRBbmdsZTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBSb3RhdGUgdGVtcFBsYW5lMiBhdCBpbXBhY3QgcG9pbnQgYXJvdW5kIG5vcm1hbCBheGlzIGFuZCB0aGUgYW5nbGVcclxuICAgICAgICAgICAgICAgICAgICBzY29wZS50ZW1wVmVjdG9yM18yLmNvcHkob2JqZWN0LnBvc2l0aW9uKS5zdWIocG9pbnRPZkltcGFjdCkuYXBwbHlBeGlzQW5nbGUobm9ybWFsLCBhbmdsZSkuYWRkKHBvaW50T2ZJbXBhY3QpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBQbGFuZTIuc2V0RnJvbUNvcGxhbmFyUG9pbnRzKHBvaW50T2ZJbXBhY3QsIHNjb3BlLnRlbXBWZWN0b3IzLCBzY29wZS50ZW1wVmVjdG9yM18yKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGFuZ2xlID0gKDAuNSAqIChudW1JdGVyYXRpb25zICYgMSkgKyAwLjIgKiAoMiAtIE1hdGgucmFuZG9tKCkpKSAqIE1hdGguUEk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gUm90YXRlIHRlbXBQbGFuZTIgYXQgb2JqZWN0IHBvc2l0aW9uIGFyb3VuZCBub3JtYWwgYXhpcyBhbmQgdGhlIGFuZ2xlXHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUudGVtcFZlY3RvcjNfMlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuY29weShwb2ludE9mSW1wYWN0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc3ViKHN1Yk9iamVjdC5wb3NpdGlvbilcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGx5QXhpc0FuZ2xlKG5vcm1hbCwgYW5nbGUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGQoc3ViT2JqZWN0LnBvc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICBzY29wZS50ZW1wVmVjdG9yM18zLmNvcHkobm9ybWFsKS5hZGQoc3ViT2JqZWN0LnBvc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wUGxhbmUyLnNldEZyb21Db3BsYW5hclBvaW50cyhzdWJPYmplY3QucG9zaXRpb24sIHNjb3BlLnRlbXBWZWN0b3IzXzMsIHNjb3BlLnRlbXBWZWN0b3IzXzIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIFBlcmZvcm0gdGhlIGN1dFxyXG4gICAgICAgICAgICBzY29wZS5jdXRCeVBsYW5lKHN1Yk9iamVjdCwgdGVtcFBsYW5lMiwgc2NvcGUudGVtcFJlc3VsdE9iamVjdHMpO1xyXG4gICAgICAgICAgICB2YXIgb2JqMSA9IHNjb3BlLnRlbXBSZXN1bHRPYmplY3RzLm9iamVjdDE7XHJcbiAgICAgICAgICAgIHZhciBvYmoyID0gc2NvcGUudGVtcFJlc3VsdE9iamVjdHMub2JqZWN0MjtcclxuICAgICAgICAgICAgaWYgKG9iajEpIHtcclxuICAgICAgICAgICAgICAgIHN1YmRpdmlkZVJhZGlhbChvYmoxLCBzdGFydEFuZ2xlLCBhbmdsZSwgbnVtSXRlcmF0aW9ucyArIDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChvYmoyKSB7XHJcbiAgICAgICAgICAgICAgICBzdWJkaXZpZGVSYWRpYWwob2JqMiwgYW5nbGUsIGVuZEFuZ2xlLCBudW1JdGVyYXRpb25zICsgMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgc3ViZGl2aWRlUmFkaWFsKG9iamVjdCwgMCwgMiAqIE1hdGguUEksIDApO1xyXG4gICAgICAgIHJldHVybiBkZWJyaXM7XHJcbiAgICB9LFxyXG4gICAgY3V0QnlQbGFuZTogZnVuY3Rpb24gKG9iamVjdCwgcGxhbmUsIG91dHB1dCkge1xyXG4gICAgICAgIC8vIFJldHVybnMgYnJlYWthYmxlIG9iamVjdHMgaW4gb3V0cHV0Lm9iamVjdDEgYW5kIG91dHB1dC5vYmplY3QyIG1lbWJlcnMsIHRoZSByZXN1bHRpbmcgMiBwaWVjZXMgb2YgdGhlIGN1dC5cclxuICAgICAgICAvLyBvYmplY3QyIGNhbiBiZSBudWxsIGlmIHRoZSBwbGFuZSBkb2Vzbid0IGN1dCB0aGUgb2JqZWN0LlxyXG4gICAgICAgIC8vIG9iamVjdDEgY2FuIGJlIG51bGwgb25seSBpbiBjYXNlIG9mIGludGVybmFsIGVycm9yXHJcbiAgICAgICAgLy8gUmV0dXJuZWQgdmFsdWUgaXMgbnVtYmVyIG9mIHBpZWNlcywgMCBmb3IgZXJyb3IuXHJcbiAgICAgICAgdmFyIGdlb21ldHJ5ID0gb2JqZWN0Lmdlb21ldHJ5O1xyXG4gICAgICAgIHZhciBjb29yZHMgPSBnZW9tZXRyeS5hdHRyaWJ1dGVzLnBvc2l0aW9uLmFycmF5O1xyXG4gICAgICAgIHZhciBub3JtYWxzID0gZ2VvbWV0cnkuYXR0cmlidXRlcy5ub3JtYWwuYXJyYXk7XHJcbiAgICAgICAgdmFyIG51bVBvaW50cyA9IGNvb3Jkcy5sZW5ndGggLyAzO1xyXG4gICAgICAgIHZhciBudW1GYWNlcyA9IG51bVBvaW50cyAvIDM7XHJcbiAgICAgICAgdmFyIGluZGljZXMgPSBnZW9tZXRyeS5nZXRJbmRleCgpO1xyXG4gICAgICAgIGlmIChpbmRpY2VzKSB7XHJcbiAgICAgICAgICAgIGluZGljZXMgPSBpbmRpY2VzLmFycmF5O1xyXG4gICAgICAgICAgICBudW1GYWNlcyA9IGluZGljZXMubGVuZ3RoIC8gMztcclxuICAgICAgICB9XHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0VmVydGV4SW5kZXgoZmFjZUlkeCwgdmVydCkge1xyXG4gICAgICAgICAgICAvLyB2ZXJ0ID0gMCwgMSBvciAyLlxyXG4gICAgICAgICAgICB2YXIgaWR4ID0gZmFjZUlkeCAqIDMgKyB2ZXJ0O1xyXG4gICAgICAgICAgICByZXR1cm4gaW5kaWNlcyA/IGluZGljZXNbaWR4XSA6IGlkeDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHBvaW50czEgPSBbXTtcclxuICAgICAgICB2YXIgcG9pbnRzMiA9IFtdO1xyXG4gICAgICAgIHZhciBkZWx0YSA9IHRoaXMuc21hbGxEZWx0YTtcclxuICAgICAgICAvLyBSZXNldCBzZWdtZW50cyBtYXJrXHJcbiAgICAgICAgdmFyIG51bVBvaW50UGFpcnMgPSBudW1Qb2ludHMgKiBudW1Qb2ludHM7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1Qb2ludFBhaXJzOyBpKyspXHJcbiAgICAgICAgICAgIHRoaXMuc2VnbWVudHNbaV0gPSBmYWxzZTtcclxuICAgICAgICB2YXIgcDAgPSB0aGlzLnRlbXBWZWN0b3IzX1AwO1xyXG4gICAgICAgIHZhciBwMSA9IHRoaXMudGVtcFZlY3RvcjNfUDE7XHJcbiAgICAgICAgdmFyIG4wID0gdGhpcy50ZW1wVmVjdG9yM19OMDtcclxuICAgICAgICB2YXIgbjEgPSB0aGlzLnRlbXBWZWN0b3IzX04xO1xyXG4gICAgICAgIC8vIEl0ZXJhdGUgdGhyb3VnaCB0aGUgZmFjZXMgdG8gbWFyayBlZGdlcyBzaGFyZWQgYnkgY29wbGFuYXIgZmFjZXNcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bUZhY2VzIC0gMTsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBhMSA9IGdldFZlcnRleEluZGV4KGksIDApO1xyXG4gICAgICAgICAgICB2YXIgYjEgPSBnZXRWZXJ0ZXhJbmRleChpLCAxKTtcclxuICAgICAgICAgICAgdmFyIGMxID0gZ2V0VmVydGV4SW5kZXgoaSwgMik7XHJcbiAgICAgICAgICAgIC8vIEFzc3VtaW5nIGFsbCAzIHZlcnRpY2VzIGhhdmUgdGhlIHNhbWUgbm9ybWFsXHJcbiAgICAgICAgICAgIG4wLnNldChub3JtYWxzW2ExXSwgbm9ybWFsc1thMV0gKyAxLCBub3JtYWxzW2ExXSArIDIpO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBqID0gaSArIDE7IGogPCBudW1GYWNlczsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYTIgPSBnZXRWZXJ0ZXhJbmRleChqLCAwKTtcclxuICAgICAgICAgICAgICAgIHZhciBiMiA9IGdldFZlcnRleEluZGV4KGosIDEpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGMyID0gZ2V0VmVydGV4SW5kZXgoaiwgMik7XHJcbiAgICAgICAgICAgICAgICAvLyBBc3N1bWluZyBhbGwgMyB2ZXJ0aWNlcyBoYXZlIHRoZSBzYW1lIG5vcm1hbFxyXG4gICAgICAgICAgICAgICAgbjEuc2V0KG5vcm1hbHNbYTJdLCBub3JtYWxzW2EyXSArIDEsIG5vcm1hbHNbYTJdICsgMik7XHJcbiAgICAgICAgICAgICAgICB2YXIgY29wbGFuYXIgPSAxIC0gbjAuZG90KG4xKSA8IGRlbHRhO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvcGxhbmFyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGExID09PSBhMiB8fCBhMSA9PT0gYjIgfHwgYTEgPT09IGMyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiMSA9PT0gYTIgfHwgYjEgPT09IGIyIHx8IGIxID09PSBjMikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWdtZW50c1thMSAqIG51bVBvaW50cyArIGIxXSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlZ21lbnRzW2IxICogbnVtUG9pbnRzICsgYTFdID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VnbWVudHNbYzEgKiBudW1Qb2ludHMgKyBhMV0gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWdtZW50c1thMSAqIG51bVBvaW50cyArIGMxXSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoYjEgPT09IGEyIHx8IGIxID09PSBiMiB8fCBiMSA9PT0gYzIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWdtZW50c1tjMSAqIG51bVBvaW50cyArIGIxXSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VnbWVudHNbYjEgKiBudW1Qb2ludHMgKyBjMV0gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBUcmFuc2Zvcm0gdGhlIHBsYW5lIHRvIG9iamVjdCBsb2NhbCBzcGFjZVxyXG4gICAgICAgIHZhciBsb2NhbFBsYW5lID0gdGhpcy50ZW1wUGxhbmVfQ3V0O1xyXG4gICAgICAgIG9iamVjdC51cGRhdGVNYXRyaXgoKTtcclxuICAgICAgICBDb252ZXhPYmplY3RCcmVha2VyLnRyYW5zZm9ybVBsYW5lVG9Mb2NhbFNwYWNlKHBsYW5lLCBvYmplY3QubWF0cml4LCBsb2NhbFBsYW5lKTtcclxuICAgICAgICAvLyBJdGVyYXRlIHRocm91Z2ggdGhlIGZhY2VzIGFkZGluZyBwb2ludHMgdG8gYm90aCBwaWVjZXNcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bUZhY2VzOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIHZhID0gZ2V0VmVydGV4SW5kZXgoaSwgMCk7XHJcbiAgICAgICAgICAgIHZhciB2YiA9IGdldFZlcnRleEluZGV4KGksIDEpO1xyXG4gICAgICAgICAgICB2YXIgdmMgPSBnZXRWZXJ0ZXhJbmRleChpLCAyKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgc2VnbWVudCA9IDA7IHNlZ21lbnQgPCAzOyBzZWdtZW50KyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBpMCA9IHNlZ21lbnQgPT09IDAgPyB2YSA6IHNlZ21lbnQgPT09IDEgPyB2YiA6IHZjO1xyXG4gICAgICAgICAgICAgICAgdmFyIGkxID0gc2VnbWVudCA9PT0gMCA/IHZiIDogc2VnbWVudCA9PT0gMSA/IHZjIDogdmE7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2VnbWVudFN0YXRlID0gdGhpcy5zZWdtZW50c1tpMCAqIG51bVBvaW50cyArIGkxXTtcclxuICAgICAgICAgICAgICAgIGlmIChzZWdtZW50U3RhdGUpXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7IC8vIFRoZSBzZWdtZW50IGFscmVhZHkgaGFzIGJlZW4gcHJvY2Vzc2VkIGluIGFub3RoZXIgZmFjZVxyXG4gICAgICAgICAgICAgICAgLy8gTWFyayBzZWdtZW50IGFzIHByb2Nlc3NlZCAoYWxzbyBpbnZlcnRlZCBzZWdtZW50KVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWdtZW50c1tpMCAqIG51bVBvaW50cyArIGkxXSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlZ21lbnRzW2kxICogbnVtUG9pbnRzICsgaTBdID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHAwLnNldChjb29yZHNbMyAqIGkwXSwgY29vcmRzWzMgKiBpMCArIDFdLCBjb29yZHNbMyAqIGkwICsgMl0pO1xyXG4gICAgICAgICAgICAgICAgcDEuc2V0KGNvb3Jkc1szICogaTFdLCBjb29yZHNbMyAqIGkxICsgMV0sIGNvb3Jkc1szICogaTEgKyAyXSk7XHJcbiAgICAgICAgICAgICAgICAvLyBtYXJrOiAxIGZvciBuZWdhdGl2ZSBzaWRlLCAyIGZvciBwb3NpdGl2ZSBzaWRlLCAzIGZvciBjb3BsYW5hciBwb2ludFxyXG4gICAgICAgICAgICAgICAgdmFyIG1hcmswID0gMDtcclxuICAgICAgICAgICAgICAgIHZhciBkID0gbG9jYWxQbGFuZS5kaXN0YW5jZVRvUG9pbnQocDApO1xyXG4gICAgICAgICAgICAgICAgaWYgKGQgPiBkZWx0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1hcmswID0gMjtcclxuICAgICAgICAgICAgICAgICAgICBwb2ludHMyLnB1c2gocDAuY2xvbmUoKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChkIDwgLWRlbHRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFyazAgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIHBvaW50czEucHVzaChwMC5jbG9uZSgpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIG1hcmswID0gMztcclxuICAgICAgICAgICAgICAgICAgICBwb2ludHMxLnB1c2gocDAuY2xvbmUoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRzMi5wdXNoKHAwLmNsb25lKCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gbWFyazogMSBmb3IgbmVnYXRpdmUgc2lkZSwgMiBmb3IgcG9zaXRpdmUgc2lkZSwgMyBmb3IgY29wbGFuYXIgcG9pbnRcclxuICAgICAgICAgICAgICAgIHZhciBtYXJrMSA9IDA7XHJcbiAgICAgICAgICAgICAgICB2YXIgZCA9IGxvY2FsUGxhbmUuZGlzdGFuY2VUb1BvaW50KHAxKTtcclxuICAgICAgICAgICAgICAgIGlmIChkID4gZGVsdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBtYXJrMSA9IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRzMi5wdXNoKHAxLmNsb25lKCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoZCA8IC1kZWx0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1hcmsxID0gMTtcclxuICAgICAgICAgICAgICAgICAgICBwb2ludHMxLnB1c2gocDEuY2xvbmUoKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBtYXJrMSA9IDM7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRzMS5wdXNoKHAxLmNsb25lKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHBvaW50czIucHVzaChwMS5jbG9uZSgpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICgobWFyazAgPT09IDEgJiYgbWFyazEgPT09IDIpIHx8IChtYXJrMCA9PT0gMiAmJiBtYXJrMSA9PT0gMSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBJbnRlcnNlY3Rpb24gb2Ygc2VnbWVudCB3aXRoIHRoZSBwbGFuZVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGVtcExpbmUxLnN0YXJ0LmNvcHkocDApO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGVtcExpbmUxLmVuZC5jb3B5KHAxKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaW50ZXJzZWN0aW9uID0gbmV3IGluZGV4XzEuVmVjdG9yMygpO1xyXG4gICAgICAgICAgICAgICAgICAgIGludGVyc2VjdGlvbiA9IGxvY2FsUGxhbmUuaW50ZXJzZWN0TGluZSh0aGlzLnRlbXBMaW5lMSwgaW50ZXJzZWN0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW50ZXJzZWN0aW9uID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2hvdWxkbid0IGhhcHBlblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdJbnRlcm5hbCBlcnJvcjogc2VnbWVudCBkb2VzIG5vdCBpbnRlcnNlY3QgcGxhbmUuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dC5zZWdtZW50ZWRPYmplY3QxID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0LnNlZ21lbnRlZE9iamVjdDIgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRzMS5wdXNoKGludGVyc2VjdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRzMi5wdXNoKGludGVyc2VjdGlvbi5jbG9uZSgpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBDYWxjdWxhdGUgZGVicmlzIG1hc3MgKHZlcnkgZmFzdCBhbmQgaW1wcmVjaXNlKTpcclxuICAgICAgICB2YXIgbmV3TWFzcyA9IG9iamVjdC51c2VyRGF0YS5hbW1vUGh5c2ljc0RhdGEubWFzcyAqIDAuNTtcclxuICAgICAgICAvLyBDYWxjdWxhdGUgZGVicmlzIENlbnRlciBvZiBNYXNzIChhZ2FpbiBmYXN0IGFuZCBpbXByZWNpc2UpXHJcbiAgICAgICAgdGhpcy50ZW1wQ00xLnNldCgwLCAwLCAwKTtcclxuICAgICAgICB2YXIgcmFkaXVzMSA9IDA7XHJcbiAgICAgICAgdmFyIG51bVBvaW50czEgPSBwb2ludHMxLmxlbmd0aDtcclxuICAgICAgICBpZiAobnVtUG9pbnRzMSA+IDApIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1Qb2ludHMxOyBpKyspXHJcbiAgICAgICAgICAgICAgICB0aGlzLnRlbXBDTTEuYWRkKHBvaW50czFbaV0pO1xyXG4gICAgICAgICAgICB0aGlzLnRlbXBDTTEuZGl2aWRlU2NhbGFyKG51bVBvaW50czEpO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bVBvaW50czE7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHAgPSBwb2ludHMxW2ldO1xyXG4gICAgICAgICAgICAgICAgcC5zdWIodGhpcy50ZW1wQ00xKTtcclxuICAgICAgICAgICAgICAgIHJhZGl1czEgPSBNYXRoLm1heChyYWRpdXMxLCBwLngsIHAueSwgcC56KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnRlbXBDTTEuYWRkKG9iamVjdC5wb3NpdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudGVtcENNMi5zZXQoMCwgMCwgMCk7XHJcbiAgICAgICAgdmFyIHJhZGl1czIgPSAwO1xyXG4gICAgICAgIHZhciBudW1Qb2ludHMyID0gcG9pbnRzMi5sZW5ndGg7XHJcbiAgICAgICAgaWYgKG51bVBvaW50czIgPiAwKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtUG9pbnRzMjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgdGhpcy50ZW1wQ00yLmFkZChwb2ludHMyW2ldKTtcclxuICAgICAgICAgICAgdGhpcy50ZW1wQ00yLmRpdmlkZVNjYWxhcihudW1Qb2ludHMyKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1Qb2ludHMyOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBwID0gcG9pbnRzMltpXTtcclxuICAgICAgICAgICAgICAgIHAuc3ViKHRoaXMudGVtcENNMik7XHJcbiAgICAgICAgICAgICAgICByYWRpdXMyID0gTWF0aC5tYXgocmFkaXVzMiwgcC54LCBwLnksIHAueik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy50ZW1wQ00yLmFkZChvYmplY3QucG9zaXRpb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgb2JqZWN0MSA9IG51bGw7XHJcbiAgICAgICAgdmFyIG9iamVjdDIgPSBudWxsO1xyXG4gICAgICAgIHZhciBudW1PYmplY3RzID0gMDtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBNT0Q6IFdyYXBwZWQgaW4gdHJ5IGNhdGNoIGJsb2NrIHRvIGF2b2lkIGVycm9yc1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGlmIChudW1Qb2ludHMxID4gNCkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgb2JqZWN0MSA9IG5ldyBpbmRleF8xLk1lc2gobmV3IGluZGV4XzIuQ29udmV4QnVmZmVyR2VvbWV0cnkocG9pbnRzMSksIG9iamVjdC5tYXRlcmlhbCk7XHJcbiAgICAgICAgICAgICAgICBvYmplY3QxLnBvc2l0aW9uLmNvcHkodGhpcy50ZW1wQ00xKTtcclxuICAgICAgICAgICAgICAgIG9iamVjdDEucXVhdGVybmlvbi5jb3B5KG9iamVjdC5xdWF0ZXJuaW9uKTtcclxuICAgICAgICAgICAgICAgIG9iamVjdDEudXNlckRhdGEgPSBvYmplY3QudXNlckRhdGE7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnByZXBhcmVCcmVha2FibGVPYmplY3Qob2JqZWN0MSwgbmV3TWFzcywgb2JqZWN0LnVzZXJEYXRhLmFtbW9QaHlzaWNzRGF0YS52ZWxvY2l0eSwgb2JqZWN0LnVzZXJEYXRhLmFtbW9QaHlzaWNzRGF0YS5hbmd1bGFyVmVsb2NpdHksIDIgKiByYWRpdXMxID4gdGhpcy5taW5TaXplRm9yQnJlYWspO1xyXG4gICAgICAgICAgICAgICAgbnVtT2JqZWN0cysrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgbG9nZ2VyXzEuZGVmYXVsdCgnRXJyb3IgaW4gQ29udmV4T2JqZWN0QnJlYWtlci50cycpO1xyXG4gICAgICAgICAgICAgICAgbG9nZ2VyXzEuZGVmYXVsdChlcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG51bVBvaW50czIgPiA0KSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBvYmplY3QyID0gbmV3IGluZGV4XzEuTWVzaChuZXcgaW5kZXhfMi5Db252ZXhCdWZmZXJHZW9tZXRyeShwb2ludHMyKSwgb2JqZWN0Lm1hdGVyaWFsKTtcclxuICAgICAgICAgICAgICAgIG9iamVjdDIucG9zaXRpb24uY29weSh0aGlzLnRlbXBDTTIpO1xyXG4gICAgICAgICAgICAgICAgb2JqZWN0Mi5xdWF0ZXJuaW9uLmNvcHkob2JqZWN0LnF1YXRlcm5pb24pO1xyXG4gICAgICAgICAgICAgICAgb2JqZWN0Mi51c2VyRGF0YSA9IG9iamVjdC51c2VyRGF0YTtcclxuICAgICAgICAgICAgICAgIHRoaXMucHJlcGFyZUJyZWFrYWJsZU9iamVjdChvYmplY3QyLCBuZXdNYXNzLCBvYmplY3QudXNlckRhdGEuYW1tb1BoeXNpY3NEYXRhLnZlbG9jaXR5LCBvYmplY3QudXNlckRhdGEuYW1tb1BoeXNpY3NEYXRhLmFuZ3VsYXJWZWxvY2l0eSwgMiAqIHJhZGl1czIgPiB0aGlzLm1pblNpemVGb3JCcmVhayk7XHJcbiAgICAgICAgICAgICAgICBudW1PYmplY3RzKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBsb2dnZXJfMS5kZWZhdWx0KCdFcnJvciBpbiBDb252ZXhPYmplY3RCcmVha2VyLnRzJyk7XHJcbiAgICAgICAgICAgICAgICBsb2dnZXJfMS5kZWZhdWx0KGVycm9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBvdXRwdXQub2JqZWN0MSA9IG9iamVjdDE7XHJcbiAgICAgICAgb3V0cHV0Lm9iamVjdDIgPSBvYmplY3QyO1xyXG4gICAgICAgIHJldHVybiBudW1PYmplY3RzO1xyXG4gICAgfVxyXG59O1xyXG5Db252ZXhPYmplY3RCcmVha2VyLnRyYW5zZm9ybUZyZWVWZWN0b3IgPSBmdW5jdGlvbiAodiwgbSkge1xyXG4gICAgLy8gaW5wdXQ6XHJcbiAgICAvLyB2ZWN0b3IgaW50ZXJwcmV0ZWQgYXMgYSBmcmVlIHZlY3RvclxyXG4gICAgLy8gVEhSRUUuTWF0cml4NCBvcnRob2dvbmFsIG1hdHJpeCAobWF0cml4IHdpdGhvdXQgc2NhbGUpXHJcbiAgICB2YXIgeCA9IHYueCwgeSA9IHYueSwgeiA9IHYuejtcclxuICAgIHZhciBlID0gbS5lbGVtZW50cztcclxuICAgIHYueCA9IGVbMF0gKiB4ICsgZVs0XSAqIHkgKyBlWzhdICogejtcclxuICAgIHYueSA9IGVbMV0gKiB4ICsgZVs1XSAqIHkgKyBlWzldICogejtcclxuICAgIHYueiA9IGVbMl0gKiB4ICsgZVs2XSAqIHkgKyBlWzEwXSAqIHo7XHJcbiAgICByZXR1cm4gdjtcclxufTtcclxuQ29udmV4T2JqZWN0QnJlYWtlci50cmFuc2Zvcm1GcmVlVmVjdG9ySW52ZXJzZSA9IGZ1bmN0aW9uICh2LCBtKSB7XHJcbiAgICAvLyBpbnB1dDpcclxuICAgIC8vIHZlY3RvciBpbnRlcnByZXRlZCBhcyBhIGZyZWUgdmVjdG9yXHJcbiAgICAvLyBUSFJFRS5NYXRyaXg0IG9ydGhvZ29uYWwgbWF0cml4IChtYXRyaXggd2l0aG91dCBzY2FsZSlcclxuICAgIHZhciB4ID0gdi54LCB5ID0gdi55LCB6ID0gdi56O1xyXG4gICAgdmFyIGUgPSBtLmVsZW1lbnRzO1xyXG4gICAgdi54ID0gZVswXSAqIHggKyBlWzFdICogeSArIGVbMl0gKiB6O1xyXG4gICAgdi55ID0gZVs0XSAqIHggKyBlWzVdICogeSArIGVbNl0gKiB6O1xyXG4gICAgdi56ID0gZVs4XSAqIHggKyBlWzldICogeSArIGVbMTBdICogejtcclxuICAgIHJldHVybiB2O1xyXG59O1xyXG5Db252ZXhPYmplY3RCcmVha2VyLnRyYW5zZm9ybVRpZWRWZWN0b3JJbnZlcnNlID0gZnVuY3Rpb24gKHYsIG0pIHtcclxuICAgIC8vIGlucHV0OlxyXG4gICAgLy8gdmVjdG9yIGludGVycHJldGVkIGFzIGEgdGllZCAob3JkaW5hcnkpIHZlY3RvclxyXG4gICAgLy8gVEhSRUUuTWF0cml4NCBvcnRob2dvbmFsIG1hdHJpeCAobWF0cml4IHdpdGhvdXQgc2NhbGUpXHJcbiAgICB2YXIgeCA9IHYueCwgeSA9IHYueSwgeiA9IHYuejtcclxuICAgIHZhciBlID0gbS5lbGVtZW50cztcclxuICAgIHYueCA9IGVbMF0gKiB4ICsgZVsxXSAqIHkgKyBlWzJdICogeiAtIGVbMTJdO1xyXG4gICAgdi55ID0gZVs0XSAqIHggKyBlWzVdICogeSArIGVbNl0gKiB6IC0gZVsxM107XHJcbiAgICB2LnogPSBlWzhdICogeCArIGVbOV0gKiB5ICsgZVsxMF0gKiB6IC0gZVsxNF07XHJcbiAgICByZXR1cm4gdjtcclxufTtcclxuQ29udmV4T2JqZWN0QnJlYWtlci50cmFuc2Zvcm1QbGFuZVRvTG9jYWxTcGFjZSA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgdjEgPSBuZXcgaW5kZXhfMS5WZWN0b3IzKCk7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gdHJhbnNmb3JtUGxhbmVUb0xvY2FsU3BhY2UocGxhbmUsIG0sIHJlc3VsdFBsYW5lKSB7XHJcbiAgICAgICAgcmVzdWx0UGxhbmUubm9ybWFsLmNvcHkocGxhbmUubm9ybWFsKTtcclxuICAgICAgICByZXN1bHRQbGFuZS5jb25zdGFudCA9IHBsYW5lLmNvbnN0YW50O1xyXG4gICAgICAgIHZhciByZWZlcmVuY2VQb2ludCA9IENvbnZleE9iamVjdEJyZWFrZXIudHJhbnNmb3JtVGllZFZlY3RvckludmVyc2UocGxhbmUuY29wbGFuYXJQb2ludCh2MSksIG0pO1xyXG4gICAgICAgIENvbnZleE9iamVjdEJyZWFrZXIudHJhbnNmb3JtRnJlZVZlY3RvckludmVyc2UocmVzdWx0UGxhbmUubm9ybWFsLCBtKTtcclxuICAgICAgICAvLyByZWNhbGN1bGF0ZSBjb25zdGFudCAobGlrZSBpbiBzZXRGcm9tTm9ybWFsQW5kQ29wbGFuYXJQb2ludClcclxuICAgICAgICByZXN1bHRQbGFuZS5jb25zdGFudCA9IC1yZWZlcmVuY2VQb2ludC5kb3QocmVzdWx0UGxhbmUubm9ybWFsKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbnZleE9iamVjdEJyZWFrZXIuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbi8qKlxyXG4gKiBAYXV0aG9yICAgICAgIFlhbm5pY2sgRGV1YmVsIChodHRwczovL2dpdGh1Yi5jb20veWFuZGV1KVxyXG4gKiBAY29weXJpZ2h0ICAgIENvcHlyaWdodCAoYykgMjAyMCBZYW5uaWNrIERldWJlbDsgUHJvamVjdCBVcmw6IGh0dHBzOi8vZ2l0aHViLmNvbS9lbmFibGUzZC9lbmFibGUzZFxyXG4gKiBAZGVzY3JpcHRpb24gIFRoaXMgaXMgYSBtb2RpZmllZCB2ZXJzaW9uIG9mIHRoZSBvcmlnaW5hbCBjb2RlIGZyb20gS2V2aW4gTGVlXHJcbiAqL1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbi8qKlxyXG4gKiBAYXV0aG9yICAgICAgIEtldmluIExlZSAoaHR0cHM6Ly9naXRodWIuY29tL0luZmluaXRlTGVlKVxyXG4gKiBAY29weXJpZ2h0ICAgIENvcHlyaWdodCAoYykgMjAxOSBLZXZpbiBMZWU7IFByb2plY3QgVXJsOiBodHRwczovL2dpdGh1Yi5jb20vSW5maW5pdGVMZWUvYW1tby1kZWJ1Zy1kcmF3ZXJcclxuICogQGxpY2Vuc2UgICAgICB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL0luZmluaXRlTGVlL2FtbW8tZGVidWctZHJhd2VyL2Jsb2IvbWFzdGVyL0xJQ0VOU0V8TVBMLTIuMH1cclxuICovXHJcbmNvbnN0IGluZGV4XzEgPSByZXF1aXJlKFwiQGVuYWJsZTNkL3RocmVlLXdyYXBwZXIvZGlzdC9pbmRleFwiKTtcclxuY29uc3QgQW1tb0RlYnVnQ29uc3RhbnRzID0ge1xyXG4gICAgTm9EZWJ1ZzogMCxcclxuICAgIERyYXdXaXJlZnJhbWU6IDEsXHJcbiAgICBEcmF3QWFiYjogMixcclxuICAgIERyYXdGZWF0dXJlc1RleHQ6IDQsXHJcbiAgICBEcmF3Q29udGFjdFBvaW50czogOCxcclxuICAgIE5vRGVhY3RpdmF0aW9uOiAxNixcclxuICAgIE5vSGVscFRleHQ6IDMyLFxyXG4gICAgRHJhd1RleHQ6IDY0LFxyXG4gICAgUHJvZmlsZVRpbWluZ3M6IDEyOCxcclxuICAgIEVuYWJsZVNhdENvbXBhcmlzb246IDI1NixcclxuICAgIERpc2FibGVCdWxsZXRMQ1A6IDUxMixcclxuICAgIEVuYWJsZUNDRDogMTAyNCxcclxuICAgIERyYXdDb25zdHJhaW50czogMSA8PCAxMSxcclxuICAgIERyYXdDb25zdHJhaW50TGltaXRzOiAxIDw8IDEyLFxyXG4gICAgRmFzdFdpcmVmcmFtZTogMSA8PCAxMyxcclxuICAgIERyYXdOb3JtYWxzOiAxIDw8IDE0LFxyXG4gICAgRHJhd09uVG9wOiAxIDw8IDE1LFxyXG4gICAgTUFYX0RFQlVHX0RSQVdfTU9ERTogMHhmZmZmZmZmZlxyXG59O1xyXG4vKipcclxuICogQW4gaW1wbGVtZW50YXRpb24gb2YgdGhlIGJ0SURlYnVnRHJhdyBpbnRlcmZhY2UgaW4gQW1tby5qcywgZm9yIGRlYnVnIHJlbmRlcmluZyBvZiBBbW1vIHNoYXBlc1xyXG4gKi9cclxuY2xhc3MgRGVidWdEcmF3ZXIge1xyXG4gICAgY29uc3RydWN0b3Ioc2NlbmUsIHdvcmxkLCBvcHRpb25zID0ge30pIHtcclxuICAgICAgICB0aGlzLnNjZW5lID0gc2NlbmU7XHJcbiAgICAgICAgdGhpcy53b3JsZCA9IHdvcmxkO1xyXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XHJcbiAgICAgICAgdGhpcy5kZWJ1Z0RyYXdNb2RlID0gb3B0aW9ucy5kZWJ1Z0RyYXdNb2RlIHx8IEFtbW9EZWJ1Z0NvbnN0YW50cy5EcmF3V2lyZWZyYW1lO1xyXG4gICAgICAgIGNvbnN0IGRyYXdPblRvcCA9IHRoaXMuZGVidWdEcmF3TW9kZSAmIEFtbW9EZWJ1Z0NvbnN0YW50cy5EcmF3T25Ub3AgfHwgZmFsc2U7XHJcbiAgICAgICAgY29uc3QgbWF4QnVmZmVyU2l6ZSA9IG9wdGlvbnMubWF4QnVmZmVyU2l6ZSB8fCAxMDAwMDAwO1xyXG4gICAgICAgIHRoaXMuZ2VvbWV0cnkgPSBuZXcgaW5kZXhfMS5CdWZmZXJHZW9tZXRyeSgpO1xyXG4gICAgICAgIGNvbnN0IHZlcnRpY2VzID0gbmV3IEZsb2F0MzJBcnJheShtYXhCdWZmZXJTaXplICogMyk7XHJcbiAgICAgICAgY29uc3QgY29sb3JzID0gbmV3IEZsb2F0MzJBcnJheShtYXhCdWZmZXJTaXplICogMyk7XHJcbiAgICAgICAgLypcclxuICAgICAgICBJIGRvIG5vdCBrbm93IHRoZSBkaWZmZXJlbmNlLCBqdXN0IHVzaW5nIHRoZSBmaXJzdCBvbmUuXHJcbiAgICAgICAgZXhwb3J0IGNvbnN0IFN0YXRpY0RyYXdVc2FnZTogVXNhZ2U7XHJcbiAgICAgICAgZXhwb3J0IGNvbnN0IER5bmFtaWNEcmF3VXNhZ2U6IFVzYWdlO1xyXG4gICAgICAgIGV4cG9ydCBjb25zdCBTdHJlYW1EcmF3VXNhZ2U6IFVzYWdlO1xyXG4gICAgICAgIGV4cG9ydCBjb25zdCBTdGF0aWNSZWFkVXNhZ2U6IFVzYWdlO1xyXG4gICAgICAgIGV4cG9ydCBjb25zdCBEeW5hbWljUmVhZFVzYWdlOiBVc2FnZTtcclxuICAgICAgICBleHBvcnQgY29uc3QgU3RyZWFtUmVhZFVzYWdlOiBVc2FnZTtcclxuICAgICAgICBleHBvcnQgY29uc3QgU3RhdGljQ29weVVzYWdlOiBVc2FnZTtcclxuICAgICAgICBleHBvcnQgY29uc3QgRHluYW1pY0NvcHlVc2FnZTogVXNhZ2U7XHJcbiAgICAgICAgZXhwb3J0IGNvbnN0IFN0cmVhbUNvcHlVc2FnZTogVXNhZ2U7XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5nZW9tZXRyeS5zZXRBdHRyaWJ1dGUoJ3Bvc2l0aW9uJywgbmV3IGluZGV4XzEuQnVmZmVyQXR0cmlidXRlKHZlcnRpY2VzLCAzKS5zZXRVc2FnZShpbmRleF8xLlN0YXRpY0RyYXdVc2FnZSkpO1xyXG4gICAgICAgIHRoaXMuZ2VvbWV0cnkuc2V0QXR0cmlidXRlKCdjb2xvcicsIG5ldyBpbmRleF8xLkJ1ZmZlckF0dHJpYnV0ZShjb2xvcnMsIDMpLnNldFVzYWdlKGluZGV4XzEuU3RhdGljRHJhd1VzYWdlKSk7XHJcbiAgICAgICAgdGhpcy5pbmRleCA9IDA7XHJcbiAgICAgICAgY29uc3QgbWF0ZXJpYWwgPSBuZXcgaW5kZXhfMS5MaW5lQmFzaWNNYXRlcmlhbCh7XHJcbiAgICAgICAgICAgIHZlcnRleENvbG9yczogdHJ1ZSxcclxuICAgICAgICAgICAgZGVwdGhUZXN0OiAhZHJhd09uVG9wXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5tZXNoID0gbmV3IGluZGV4XzEuTGluZVNlZ21lbnRzKHRoaXMuZ2VvbWV0cnksIG1hdGVyaWFsKTtcclxuICAgICAgICBpZiAoZHJhd09uVG9wKVxyXG4gICAgICAgICAgICB0aGlzLm1lc2gucmVuZGVyT3JkZXIgPSA5OTk7XHJcbiAgICAgICAgdGhpcy5tZXNoLmZydXN0dW1DdWxsZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmVuYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmRlYnVnRHJhd2VyID0gbmV3IEFtbW8uRGVidWdEcmF3ZXIoKTtcclxuICAgICAgICB0aGlzLmRlYnVnRHJhd2VyLmRyYXdMaW5lID0gdGhpcy5kcmF3TGluZS5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuZGVidWdEcmF3ZXIuZHJhd0NvbnRhY3RQb2ludCA9IHRoaXMuZHJhd0NvbnRhY3RQb2ludC5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuZGVidWdEcmF3ZXIucmVwb3J0RXJyb3JXYXJuaW5nID0gdGhpcy5yZXBvcnRFcnJvcldhcm5pbmcuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLmRlYnVnRHJhd2VyLmRyYXczZFRleHQgPSB0aGlzLmRyYXczZFRleHQuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLmRlYnVnRHJhd2VyLnNldERlYnVnTW9kZSA9IHRoaXMuc2V0RGVidWdNb2RlLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5kZWJ1Z0RyYXdlci5nZXREZWJ1Z01vZGUgPSB0aGlzLmdldERlYnVnTW9kZS5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMud29ybGQuc2V0RGVidWdEcmF3ZXIodGhpcy5kZWJ1Z0RyYXdlcik7XHJcbiAgICB9XHJcbiAgICBlbmFibGUoKSB7XHJcbiAgICAgICAgdGhpcy5lbmFibGVkID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnNjZW5lLmFkZCh0aGlzLm1lc2gpO1xyXG4gICAgfVxyXG4gICAgZGlzYWJsZSgpIHtcclxuICAgICAgICB0aGlzLmVuYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnNjZW5lLnJlbW92ZSh0aGlzLm1lc2gpO1xyXG4gICAgfVxyXG4gICAgdXBkYXRlKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5lbmFibGVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuaW5kZXggIT0gMCkge1xyXG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgIHRoaXMuZ2VvbWV0cnkuYXR0cmlidXRlcy5wb3NpdGlvbi5uZWVkc1VwZGF0ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgdGhpcy5nZW9tZXRyeS5hdHRyaWJ1dGVzLmNvbG9yLm5lZWRzVXBkYXRlID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5pbmRleCA9IDA7XHJcbiAgICAgICAgdGhpcy53b3JsZC5kZWJ1Z0RyYXdXb3JsZCgpO1xyXG4gICAgICAgIHRoaXMuZ2VvbWV0cnkuc2V0RHJhd1JhbmdlKDAsIHRoaXMuaW5kZXgpO1xyXG4gICAgfVxyXG4gICAgZHJhd0xpbmUoZnJvbSwgdG8sIGNvbG9yKSB7XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIGNvbnN0IGhlYXAgPSBBbW1vLkhFQVBGMzI7XHJcbiAgICAgICAgY29uc3QgciA9IGhlYXBbKGNvbG9yICsgMCkgLyA0XTtcclxuICAgICAgICBjb25zdCBnID0gaGVhcFsoY29sb3IgKyA0KSAvIDRdO1xyXG4gICAgICAgIGNvbnN0IGIgPSBoZWFwWyhjb2xvciArIDgpIC8gNF07XHJcbiAgICAgICAgY29uc3QgZnJvbVggPSBoZWFwWyhmcm9tICsgMCkgLyA0XTtcclxuICAgICAgICBjb25zdCBmcm9tWSA9IGhlYXBbKGZyb20gKyA0KSAvIDRdO1xyXG4gICAgICAgIGNvbnN0IGZyb21aID0gaGVhcFsoZnJvbSArIDgpIC8gNF07XHJcbiAgICAgICAgdGhpcy5nZW9tZXRyeS5hdHRyaWJ1dGVzLnBvc2l0aW9uLnNldFhZWih0aGlzLmluZGV4LCBmcm9tWCwgZnJvbVksIGZyb21aKTtcclxuICAgICAgICB0aGlzLmdlb21ldHJ5LmF0dHJpYnV0ZXMuY29sb3Iuc2V0WFlaKHRoaXMuaW5kZXgrKywgciwgZywgYik7XHJcbiAgICAgICAgY29uc3QgdG9YID0gaGVhcFsodG8gKyAwKSAvIDRdO1xyXG4gICAgICAgIGNvbnN0IHRvWSA9IGhlYXBbKHRvICsgNCkgLyA0XTtcclxuICAgICAgICBjb25zdCB0b1ogPSBoZWFwWyh0byArIDgpIC8gNF07XHJcbiAgICAgICAgdGhpcy5nZW9tZXRyeS5hdHRyaWJ1dGVzLnBvc2l0aW9uLnNldFhZWih0aGlzLmluZGV4LCB0b1gsIHRvWSwgdG9aKTtcclxuICAgICAgICB0aGlzLmdlb21ldHJ5LmF0dHJpYnV0ZXMuY29sb3Iuc2V0WFlaKHRoaXMuaW5kZXgrKywgciwgZywgYik7XHJcbiAgICB9XHJcbiAgICAvL1RPRE86IGZpZ3VyZSBvdXQgaG93IHRvIG1ha2UgbGlmZVRpbWUgd29ya1xyXG4gICAgZHJhd0NvbnRhY3RQb2ludChwb2ludE9uQiwgbm9ybWFsT25CLCBkaXN0YW5jZSwgX2xpZmVUaW1lLCBjb2xvcikge1xyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICBjb25zdCBoZWFwID0gQW1tby5IRUFQRjMyO1xyXG4gICAgICAgIGNvbnN0IHIgPSBoZWFwWyhjb2xvciArIDApIC8gNF07XHJcbiAgICAgICAgY29uc3QgZyA9IGhlYXBbKGNvbG9yICsgNCkgLyA0XTtcclxuICAgICAgICBjb25zdCBiID0gaGVhcFsoY29sb3IgKyA4KSAvIDRdO1xyXG4gICAgICAgIGNvbnN0IHggPSBoZWFwWyhwb2ludE9uQiArIDApIC8gNF07XHJcbiAgICAgICAgY29uc3QgeSA9IGhlYXBbKHBvaW50T25CICsgNCkgLyA0XTtcclxuICAgICAgICBjb25zdCB6ID0gaGVhcFsocG9pbnRPbkIgKyA4KSAvIDRdO1xyXG4gICAgICAgIHRoaXMuZ2VvbWV0cnkuYXR0cmlidXRlcy5wb3NpdGlvbi5zZXRYWVoodGhpcy5pbmRleCwgeCwgeSwgeik7XHJcbiAgICAgICAgdGhpcy5nZW9tZXRyeS5hdHRyaWJ1dGVzLmNvbG9yLnNldFhZWih0aGlzLmluZGV4KyssIHIsIGcsIGIpO1xyXG4gICAgICAgIGNvbnN0IGR4ID0gaGVhcFsobm9ybWFsT25CICsgMCkgLyA0XSAqIGRpc3RhbmNlO1xyXG4gICAgICAgIGNvbnN0IGR5ID0gaGVhcFsobm9ybWFsT25CICsgNCkgLyA0XSAqIGRpc3RhbmNlO1xyXG4gICAgICAgIGNvbnN0IGR6ID0gaGVhcFsobm9ybWFsT25CICsgOCkgLyA0XSAqIGRpc3RhbmNlO1xyXG4gICAgICAgIHRoaXMuZ2VvbWV0cnkuYXR0cmlidXRlcy5wb3NpdGlvbi5zZXRYWVoodGhpcy5pbmRleCwgeCArIGR4LCB5ICsgZHksIHogKyBkeik7XHJcbiAgICAgICAgdGhpcy5nZW9tZXRyeS5hdHRyaWJ1dGVzLmNvbG9yLnNldFhZWih0aGlzLmluZGV4KyssIHIsIGcsIGIpO1xyXG4gICAgfVxyXG4gICAgcmVwb3J0RXJyb3JXYXJuaW5nKHdhcm5pbmdTdHJpbmcpIHtcclxuICAgICAgICBpZiAoQW1tby5oYXNPd25Qcm9wZXJ0eSgnUG9pbnRlcl9zdHJpbmdpZnknKSkge1xyXG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihBbW1vLlBvaW50ZXJfc3RyaW5naWZ5KHdhcm5pbmdTdHJpbmcpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoIXRoaXMud2FybmVkT25jZSkge1xyXG4gICAgICAgICAgICB0aGlzLndhcm5lZE9uY2UgPSB0cnVlO1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oXCJDYW5ub3QgcHJpbnQgd2FybmluZ1N0cmluZywgcGxlYXNlIHJlYnVpbGQgQW1tby5qcyB1c2luZyAnZGVidWcnIGZsYWdcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZHJhdzNkVGV4dChfbG9jYXRpb24sIF90ZXh0U3RyaW5nKSB7XHJcbiAgICAgICAgLy9UT0RPXHJcbiAgICAgICAgY29uc29sZS53YXJuKCdUT0RPOiBkcmF3M2RUZXh0Jyk7XHJcbiAgICB9XHJcbiAgICBzZXREZWJ1Z01vZGUoZGVidWdNb2RlKSB7XHJcbiAgICAgICAgdGhpcy5kZWJ1Z0RyYXdNb2RlID0gZGVidWdNb2RlO1xyXG4gICAgfVxyXG4gICAgZ2V0RGVidWdNb2RlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRlYnVnRHJhd01vZGU7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0cy5kZWZhdWx0ID0gRGVidWdEcmF3ZXI7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlYnVnRHJhd2VyLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19jcmVhdGVCaW5kaW5nID0gKHRoaXMgJiYgdGhpcy5fX2NyZWF0ZUJpbmRpbmcpIHx8IChPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XHJcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIGsyLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBtW2tdOyB9IH0pO1xyXG59KSA6IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xyXG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcclxuICAgIG9bazJdID0gbVtrXTtcclxufSkpO1xyXG52YXIgX19leHBvcnRTdGFyID0gKHRoaXMgJiYgdGhpcy5fX2V4cG9ydFN0YXIpIHx8IGZ1bmN0aW9uKG0sIGV4cG9ydHMpIHtcclxuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKHAgIT09IFwiZGVmYXVsdFwiICYmICFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZXhwb3J0cywgcCkpIF9fY3JlYXRlQmluZGluZyhleHBvcnRzLCBtLCBwKTtcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5yZXF1aXJlKFwiQGVuYWJsZTNkL2NvbW1vbi9kaXN0L3R5cGVzQW1tb1wiKTtcclxucmVxdWlyZShcIkBlbmFibGUzZC9jb21tb24vZGlzdC90eXBlc0N1c3RvbVwiKTtcclxuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL3BoeXNpY3NcIiksIGV4cG9ydHMpO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcclxuLyoqXHJcbiAqIEBhdXRob3IgeWFuZGV1XHJcbiAqIEBkZXNjcmlwdGlvbiBQb3J0ZWQgdG8gVHlwZVNjcmlwdFxyXG4gKi9cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLkNsb2NrID0gdm9pZCAwO1xyXG4vKipcclxuICogQGF1dGhvciBhbHRlcmVkcSAvIGh0dHA6Ly9hbHRlcmVkcXVhbGlhLmNvbS9cclxuICovXHJcbi8qKlxyXG4gKiBUaGlzIGlzIHRoZSBDbG9jayBjbGFzcyBUSFJFRSBwcm92aWRlcy5cclxuICovXHJcbmNsYXNzIENsb2NrIHtcclxuICAgIGNvbnN0cnVjdG9yKGF1dG9TdGFydCA9IHRydWUpIHtcclxuICAgICAgICB0aGlzLmF1dG9TdGFydCA9IGF1dG9TdGFydCAhPT0gdW5kZWZpbmVkID8gYXV0b1N0YXJ0IDogdHJ1ZTtcclxuICAgICAgICB0aGlzLnN0YXJ0VGltZSA9IDA7XHJcbiAgICAgICAgdGhpcy5vbGRUaW1lID0gMDtcclxuICAgICAgICB0aGlzLmVsYXBzZWRUaW1lID0gMDtcclxuICAgICAgICB0aGlzLnJ1bm5pbmcgPSBmYWxzZTtcclxuICAgIH1cclxuICAgIHN0YXJ0KCkge1xyXG4gICAgICAgIHRoaXMuc3RhcnRUaW1lID0gKHR5cGVvZiBwZXJmb3JtYW5jZSA9PT0gJ3VuZGVmaW5lZCcgPyBEYXRlIDogcGVyZm9ybWFuY2UpLm5vdygpOyAvLyBzZWUgIzEwNzMyXHJcbiAgICAgICAgdGhpcy5vbGRUaW1lID0gdGhpcy5zdGFydFRpbWU7XHJcbiAgICAgICAgdGhpcy5lbGFwc2VkVGltZSA9IDA7XHJcbiAgICAgICAgdGhpcy5ydW5uaW5nID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIHN0b3AoKSB7XHJcbiAgICAgICAgdGhpcy5nZXRFbGFwc2VkVGltZSgpO1xyXG4gICAgICAgIHRoaXMucnVubmluZyA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuYXV0b1N0YXJ0ID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBnZXRFbGFwc2VkVGltZSgpIHtcclxuICAgICAgICB0aGlzLmdldERlbHRhKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZWxhcHNlZFRpbWU7XHJcbiAgICB9XHJcbiAgICBnZXREZWx0YSgpIHtcclxuICAgICAgICBsZXQgZGlmZiA9IDA7XHJcbiAgICAgICAgaWYgKHRoaXMuYXV0b1N0YXJ0ICYmICF0aGlzLnJ1bm5pbmcpIHtcclxuICAgICAgICAgICAgdGhpcy5zdGFydCgpO1xyXG4gICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMucnVubmluZykge1xyXG4gICAgICAgICAgICBsZXQgbmV3VGltZSA9ICh0eXBlb2YgcGVyZm9ybWFuY2UgPT09ICd1bmRlZmluZWQnID8gRGF0ZSA6IHBlcmZvcm1hbmNlKS5ub3coKTtcclxuICAgICAgICAgICAgZGlmZiA9IChuZXdUaW1lIC0gdGhpcy5vbGRUaW1lKSAvIDEwMDA7XHJcbiAgICAgICAgICAgIHRoaXMub2xkVGltZSA9IG5ld1RpbWU7XHJcbiAgICAgICAgICAgIHRoaXMuZWxhcHNlZFRpbWUgKz0gZGlmZjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGRpZmY7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0cy5DbG9jayA9IENsb2NrO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1DbG9jay5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcclxuLyoqXHJcbiAqIEBhdXRob3IgICAgICAgWWFubmljayBEZXViZWwgKGh0dHBzOi8vZ2l0aHViLmNvbS95YW5kZXUpXHJcbiAqIEBjb3B5cmlnaHQgICAgQ29weXJpZ2h0IChjKSAyMDIwIFlhbm5pY2sgRGV1YmVsOyBQcm9qZWN0IFVybDogaHR0cHM6Ly9naXRodWIuY29tL2VuYWJsZTNkL2VuYWJsZTNkXHJcbiAqIEBsaWNlbnNlICAgICAge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9lbmFibGUzZC9lbmFibGUzZC9ibG9iL21hc3Rlci9MSUNFTlNFfEdOVSBHUEx2M31cclxuICovXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5BbW1vUGh5c2ljcyA9IGV4cG9ydHMuQ2xvY2sgPSBleHBvcnRzLlR5cGVzID0gZXhwb3J0cy5BbGxIaXRzUmF5Y2FzdGVyID0gZXhwb3J0cy5DbG9zZXN0UmF5Y2FzdGVyID0gZXhwb3J0cy5QaHlzaWNzTG9hZGVyID0gZXhwb3J0cy5FeHRlbmRlZEdyb3VwID0gZXhwb3J0cy5FeHRlbmRlZE1lc2ggPSBleHBvcnRzLkV4dGVuZGVkT2JqZWN0M0QgPSB2b2lkIDA7XHJcbmNvbnN0IGxvZ2dlcl8xID0gcmVxdWlyZShcIkBlbmFibGUzZC9jb21tb24vZGlzdC9sb2dnZXJcIik7XHJcbmNvbnN0IHBoeXNpY3NCb2R5XzEgPSByZXF1aXJlKFwiQGVuYWJsZTNkL2NvbW1vbi9kaXN0L3BoeXNpY3NCb2R5XCIpO1xyXG5jb25zdCBleHRlbmRlZE9iamVjdDNEXzEgPSByZXF1aXJlKFwiQGVuYWJsZTNkL2NvbW1vbi9kaXN0L2V4dGVuZGVkT2JqZWN0M0RcIik7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkV4dGVuZGVkT2JqZWN0M0RcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGV4dGVuZGVkT2JqZWN0M0RfMS5FeHRlbmRlZE9iamVjdDNEOyB9IH0pO1xyXG5jb25zdCBleHRlbmRlZE1lc2hfMSA9IHJlcXVpcmUoXCJAZW5hYmxlM2QvY29tbW9uL2Rpc3QvZXh0ZW5kZWRNZXNoXCIpO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJFeHRlbmRlZE1lc2hcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGV4dGVuZGVkTWVzaF8xLkV4dGVuZGVkTWVzaDsgfSB9KTtcclxuY29uc3QgZXh0ZW5kZWRHcm91cF8xID0gcmVxdWlyZShcIkBlbmFibGUzZC9jb21tb24vZGlzdC9leHRlbmRlZEdyb3VwXCIpO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJFeHRlbmRlZEdyb3VwXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBleHRlbmRlZEdyb3VwXzEuRXh0ZW5kZWRHcm91cDsgfSB9KTtcclxuY29uc3Qgc2hhcGVzXzEgPSByZXF1aXJlKFwiLi9zaGFwZXNcIik7XHJcbmNvbnN0IGNvbnN0cmFpbnRzXzEgPSByZXF1aXJlKFwiLi9jb25zdHJhaW50c1wiKTtcclxuY29uc3QgZXZlbnRlbWl0dGVyM18xID0gcmVxdWlyZShcImV2ZW50ZW1pdHRlcjNcIik7XHJcbmNvbnN0IGluZGV4XzEgPSByZXF1aXJlKFwiQGVuYWJsZTNkL3RocmVlLXdyYXBwZXIvZGlzdC9pbmRleFwiKTtcclxuY29uc3QgdGhyZWVfdG9fYW1tb18xID0gcmVxdWlyZShcIi4vdGhyZWUtdG8tYW1tb1wiKTtcclxuY29uc3QgdG9ydXNTaGFwZV8xID0gcmVxdWlyZShcIi4vdG9ydXNTaGFwZVwiKTtcclxuY29uc3QgZmFjdG9yaWVzXzEgPSByZXF1aXJlKFwiQGVuYWJsZTNkL2NvbW1vbi9kaXN0L2ZhY3Rvcmllc1wiKTtcclxuY29uc3QgY29sbGlzaW9uRXZlbnRzXzEgPSByZXF1aXJlKFwiLi9jb2xsaXNpb25FdmVudHNcIik7XHJcbmNvbnN0IGRlYnVnRHJhd2VyXzEgPSByZXF1aXJlKFwiLi9kZWJ1Z0RyYXdlclwiKTtcclxuY29uc3QgY29udmV4T2JqZWN0QnJlYWtlcl8xID0gcmVxdWlyZShcIi4vY29udmV4T2JqZWN0QnJlYWtlclwiKTtcclxuY29uc3QgcGh5c2ljc0xvYWRlcl8xID0gcmVxdWlyZShcIkBlbmFibGUzZC9jb21tb24vZGlzdC9waHlzaWNzTG9hZGVyXCIpO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJQaHlzaWNzTG9hZGVyXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBwaHlzaWNzTG9hZGVyXzEuUGh5c2ljc0xvYWRlcjsgfSB9KTtcclxuY29uc3QgZGVmYXVsdE1hdGVyaWFsXzEgPSByZXF1aXJlKFwiQGVuYWJsZTNkL2NvbW1vbi9kaXN0L2RlZmF1bHRNYXRlcmlhbFwiKTtcclxuY29uc3QgVHlwZXMgPSByZXF1aXJlKFwiQGVuYWJsZTNkL2NvbW1vbi9kaXN0L3R5cGVzXCIpO1xyXG5leHBvcnRzLlR5cGVzID0gVHlwZXM7XHJcbmNvbnN0IHJheWNhc3Rlcl8xID0gcmVxdWlyZShcIi4vcmF5Y2FzdGVyL3JheWNhc3RlclwiKTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiQ2xvc2VzdFJheWNhc3RlclwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gcmF5Y2FzdGVyXzEuQ2xvc2VzdFJheWNhc3RlcjsgfSB9KTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiQWxsSGl0c1JheWNhc3RlclwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gcmF5Y2FzdGVyXzEuQWxsSGl0c1JheWNhc3RlcjsgfSB9KTtcclxuLy8gRXhwb3J0IFRIUkVFLkNsb2NrXHJcbnZhciBDbG9ja18xID0gcmVxdWlyZShcIi4vbGliL0Nsb2NrXCIpO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJDbG9ja1wiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gQ2xvY2tfMS5DbG9jazsgfSB9KTtcclxuY2xhc3MgQW1tb1BoeXNpY3MgZXh0ZW5kcyBldmVudGVtaXR0ZXIzXzEuRXZlbnRFbWl0dGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKHNjZW5lLCBjb25maWcgPSB7fSkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5zY2VuZSA9IHNjZW5lO1xyXG4gICAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xyXG4gICAgICAgIHRoaXMucmlnaWRCb2RpZXMgPSBbXTtcclxuICAgICAgICB0aGlzLmVhcmxpZXJEZXRlY3RlZENvbGxpc2lvbnMgPSBbXTtcclxuICAgICAgICB0aGlzLmNvbXBsZXhTaGFwZXMgPSBbJ3BsYW5lJywgJ2h1bGwnLCAnaGFjZCcsICd2aGFjZCcsICdjb252ZXhNZXNoJywgJ2NvbmNhdmVNZXNoJ107XHJcbiAgICAgICAgdGhpcy5ncmF2aXR5ID0gY29uZmlnLmdyYXZpdHkgfHwgeyB4OiAwLCB5OiAtOS44MSwgejogMCB9O1xyXG4gICAgICAgIHRoaXMuaXNIZWFkbGVzcyA9IHNjZW5lID09PSAnaGVhZGxlc3MnID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgICAgIHRoaXMudG1wRXVsZXIgPSBuZXcgaW5kZXhfMS5FdWxlcigpO1xyXG4gICAgICAgIHRoaXMudG1wUXVhdGVybmlvbiA9IG5ldyBpbmRleF8xLlF1YXRlcm5pb24oKTtcclxuICAgICAgICB0aGlzLnRtcFZlY3RvcjMgPSBuZXcgaW5kZXhfMS5WZWN0b3IzKCk7XHJcbiAgICAgICAgdGhpcy50bXBWZWN0b3IzYSA9IG5ldyBpbmRleF8xLlZlY3RvcjMoKTtcclxuICAgICAgICB0aGlzLnRtcE1hdHJpeDQgPSBuZXcgaW5kZXhfMS5NYXRyaXg0KCk7XHJcbiAgICAgICAgdGhpcy50bXBNYXRyaXg0YSA9IG5ldyBpbmRleF8xLk1hdHJpeDQoKTtcclxuICAgICAgICB0aGlzLnRtcEJ0VmVjdG9yMyA9IG5ldyBBbW1vLmJ0VmVjdG9yMygpO1xyXG4gICAgICAgIHRoaXMudG1wQnRRdWF0ZXJuaW9uID0gbmV3IEFtbW8uYnRRdWF0ZXJuaW9uKDAsIDAsIDAsIDEpO1xyXG4gICAgICAgIHRoaXMuZW1wdHlWMyA9IG5ldyBpbmRleF8xLlZlY3RvcjMoKTtcclxuICAgICAgICB0aGlzLmltcGFjdFBvaW50ID0gbmV3IGluZGV4XzEuVmVjdG9yMygpO1xyXG4gICAgICAgIHRoaXMuaW1wYWN0Tm9ybWFsID0gbmV3IGluZGV4XzEuVmVjdG9yMygpO1xyXG4gICAgICAgIGlmIChzY2VuZSAhPT0gJ2hlYWRsZXNzJykge1xyXG4gICAgICAgICAgICB0aGlzLmRlZmF1bHRNYXRlcmlhbCA9IG5ldyBkZWZhdWx0TWF0ZXJpYWxfMS5kZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIC8vIGNvbnN0IGluZm8gPSBgQW1tby5qcyBwaHlzaWNzIHByb3ZpZGVkIGJ5IGVuYWJsZTNkYFxyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcclxuICAgICAgICAgICAgLy8gICBgJWMgJWMgJWMgJWMgJWMgJHtpbmZvfSAlYyBodHRwczovL2VuYWJsZTNkLmlvL2AsXHJcbiAgICAgICAgICAgIC8vICAgJ2JhY2tncm91bmQ6ICNmZjAwMDAnLFxyXG4gICAgICAgICAgICAvLyAgICdiYWNrZ3JvdW5kOiAjZmZmZjAwJyxcclxuICAgICAgICAgICAgLy8gICAnYmFja2dyb3VuZDogIzAwZmYwMCcsXHJcbiAgICAgICAgICAgIC8vICAgJ2JhY2tncm91bmQ6ICMwMGZmZmYnLFxyXG4gICAgICAgICAgICAvLyAgICdjb2xvcjogI2ZmZjsgYmFja2dyb3VuZDogIzAwMDAwMDsnLFxyXG4gICAgICAgICAgICAvLyAgICdiYWNrZ3JvdW5kOiBub25lJ1xyXG4gICAgICAgICAgICAvLyApXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc3RhcnQoKTtcclxuICAgIH1cclxuICAgIC8qKiBAZGVwcmVjYXRlZCBVc2Ugd29ybGRUcmFuc2Zvcm0gaW5zdGVhZCBvZiB0bXBUcmFucy4gKi9cclxuICAgIGdldCB0bXBUcmFucygpIHtcclxuICAgICAgICBjb25zb2xlLndhcm4oJ1VzZSB3b3JsZFRyYW5zZm9ybSBpbnN0ZWFkIG9mIHRtcFRyYW5zLicpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLndvcmxkVHJhbnNmb3JtO1xyXG4gICAgfVxyXG4gICAgLyoqIEBkZXByZWNhdGVkIFVzZSB3b3JsZFRyYW5zZm9ybSBpbnN0ZWFkIG9mIHRtcFRyYW5zLiAqL1xyXG4gICAgc2V0IHRtcFRyYW5zKHRyYW5zZm9ybSkge1xyXG4gICAgICAgIGNvbnNvbGUud2FybignVXNlIHdvcmxkVHJhbnNmb3JtIGluc3RlYWQgb2YgdG1wVHJhbnMuJyk7XHJcbiAgICAgICAgdGhpcy53b3JsZFRyYW5zZm9ybSA9IHRyYW5zZm9ybTtcclxuICAgIH1cclxuICAgIC8qKiBEZXN0cm95cyBhIHBoeXNpY3MgYm9keS4gKi9cclxuICAgIGRlc3Ryb3koYm9keSkge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgY29uc3QgYiA9IE9iamVjdC5rZXlzKGJvZHkpLmluY2x1ZGVzKCdib2R5JykgPyBib2R5LmJvZHkgOiBib2R5O1xyXG4gICAgICAgIGlmICh0eXBlb2YgKGIgPT09IG51bGwgfHwgYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogYi5hbW1vKSA9PT0gJ3VuZGVmaW5lZCcpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgY29uc3QgbmFtZSA9IGIuYW1tby5uYW1lO1xyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICBsZXQgb2JqID0gYi5hbW1vLnRocmVlT2JqZWN0O1xyXG4gICAgICAgIGlmIChuYW1lICYmIG9iaikge1xyXG4gICAgICAgICAgICBpZiAoKF9hID0gb2JqID09PSBudWxsIHx8IG9iaiA9PT0gdm9pZCAwID8gdm9pZCAwIDogb2JqLmJvZHkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5hbW1vKSB7XHJcbiAgICAgICAgICAgICAgICAvLyByZW1vdmUgZnJvbSBwaHlzaWNzIHdvcmxkXHJcbiAgICAgICAgICAgICAgICAhb2JqLmJvZHkuaXNTb2Z0Qm9keVxyXG4gICAgICAgICAgICAgICAgICAgID8gdGhpcy5waHlzaWNzV29ybGQucmVtb3ZlUmlnaWRCb2R5KG9iai5ib2R5LmFtbW8pXHJcbiAgICAgICAgICAgICAgICAgICAgOiB0aGlzLnBoeXNpY3NXb3JsZC5yZW1vdmVTb2Z0Qm9keShvYmouYm9keS5hbW1vKTtcclxuICAgICAgICAgICAgICAgIC8vIGNhbGwgZGVzdHJ1Y3RvciBvbiBib2R5XHJcbiAgICAgICAgICAgICAgICBvYmouYm9keS5kZXN0cnVjdG9yKCk7XHJcbiAgICAgICAgICAgICAgICAvLyByZXNldCBwcm9wZXJ0aWVzXHJcbiAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgICAgICBvYmouYm9keSA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgIG9iai5oYXNCb2R5ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAvLyByZW1vdmUgZnJvbSB0aGlzLm9iamVjdEFtbW9cclxuICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSBiLmFtbW8udGhyZWVPYmplY3Q7XHJcbiAgICAgICAgICAgICAgICAvLyByZW1vdmUgZnJvbSB0aGlzLnJpZ2lkQm9kaWVzXHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucmlnaWRCb2RpZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5yaWdpZEJvZGllc1tpXS5uYW1lID09PSBuYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmlnaWRCb2RpZXMuc3BsaWNlKGksIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpLS07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnNjZW5lID09PSAnaGVhZGxlc3MnICYmIG9iailcclxuICAgICAgICAgICAgb2JqID0gbnVsbDtcclxuICAgIH1cclxuICAgIHNldHVwKCkge1xyXG4gICAgICAgIC8vIGFkZCB3b3JsZFRyYW5zZm9ybVxyXG4gICAgICAgIHRoaXMud29ybGRUcmFuc2Zvcm0gPSBuZXcgQW1tby5idFRyYW5zZm9ybSgpO1xyXG4gICAgICAgIC8vIHNldHVwIGFtbW8gcGh5c2ljc1xyXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5jb25maWcuc2V0dXBQaHlzaWNzV29ybGQgPT09ICdmdW5jdGlvbicpXHJcbiAgICAgICAgICAgIHRoaXMucGh5c2ljc1dvcmxkID0gdGhpcy5jb25maWcuc2V0dXBQaHlzaWNzV29ybGQoKTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHRoaXMucGh5c2ljc1dvcmxkID0gdGhpcy5zZXR1cFBoeXNpY3NXb3JsZCgpO1xyXG4gICAgICAgIGlmICh0aGlzLnNjZW5lICE9PSAnaGVhZGxlc3MnKSB7XHJcbiAgICAgICAgICAgIC8vIEluaXRpYWxpemUgY29udmV4QnJlYWtlclxyXG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgIHRoaXMuY29udmV4QnJlYWtlciA9IG5ldyBjb252ZXhPYmplY3RCcmVha2VyXzEuQ29udmV4T2JqZWN0QnJlYWtlcigpO1xyXG4gICAgICAgICAgICB0aGlzLm9iamVjdHNUb1JlbW92ZSA9IFtdO1xyXG4gICAgICAgICAgICB0aGlzLm51bU9iamVjdHNUb1JlbW92ZSA9IDA7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNTAwOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHRoaXMub2JqZWN0c1RvUmVtb3ZlW2ldID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNvbGxpc2lvbkV2ZW50cyA9IG5ldyBjb2xsaXNpb25FdmVudHNfMS5Db2xsaXNpb25FdmVudHMoKTtcclxuICAgICAgICB0aGlzLmZhY3RvcnkgPSBuZXcgZmFjdG9yaWVzXzEuZGVmYXVsdCh0aGlzLnNjZW5lKTtcclxuICAgICAgICB0aGlzLnNoYXBlcyA9IG5ldyBzaGFwZXNfMS5kZWZhdWx0KHRoaXMuZmFjdG9yeSwgKG9iamVjdCwgY29uZmlnKSA9PiB0aGlzLmFkZEV4aXN0aW5nKG9iamVjdCwgY29uZmlnKSk7XHJcbiAgICAgICAgdGhpcy5jb25zdHJhaW50cyA9IG5ldyBjb25zdHJhaW50c18xLmRlZmF1bHQodGhpcy53b3JsZFRyYW5zZm9ybSwgdGhpcy5waHlzaWNzV29ybGQpO1xyXG4gICAgICAgIGlmICh0aGlzLnNjZW5lICE9PSAnaGVhZGxlc3MnKVxyXG4gICAgICAgICAgICB0aGlzLmRlYnVnRHJhd2VyID0gbmV3IGRlYnVnRHJhd2VyXzEuZGVmYXVsdCh0aGlzLnNjZW5lLCB0aGlzLnBoeXNpY3NXb3JsZCwge30pO1xyXG4gICAgfVxyXG4gICAgdXBkYXRlRGVidWdnZXIoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc2NlbmUgPT09ICdoZWFkbGVzcycpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICBpZiAodGhpcy5kZWJ1Z0RyYXdlciAmJiB0aGlzLmRlYnVnRHJhd2VyLmVuYWJsZWQpXHJcbiAgICAgICAgICAgIHRoaXMuZGVidWdEcmF3ZXIudXBkYXRlKCk7XHJcbiAgICB9XHJcbiAgICBzZXR1cFBoeXNpY3NXb3JsZCgpIHtcclxuICAgICAgICBjb25zdCBnID0gdGhpcy5ncmF2aXR5O1xyXG4gICAgICAgIGNvbnN0IHsgc29mdEJvZGllcyA9IGZhbHNlIH0gPSB0aGlzLmNvbmZpZztcclxuICAgICAgICBsZXQgcGh5c2ljc1dvcmxkO1xyXG4gICAgICAgIGlmICghc29mdEJvZGllcykge1xyXG4gICAgICAgICAgICBjb25zdCBjb2xsaXNpb25Db25maWd1cmF0aW9uID0gbmV3IEFtbW8uYnREZWZhdWx0Q29sbGlzaW9uQ29uZmlndXJhdGlvbigpLCBkaXNwYXRjaGVyID0gbmV3IEFtbW8uYnRDb2xsaXNpb25EaXNwYXRjaGVyKGNvbGxpc2lvbkNvbmZpZ3VyYXRpb24pLCBicm9hZHBoYXNlID0gbmV3IEFtbW8uYnREYnZ0QnJvYWRwaGFzZSgpLCBzb2x2ZXIgPSBuZXcgQW1tby5idFNlcXVlbnRpYWxJbXB1bHNlQ29uc3RyYWludFNvbHZlcigpO1xyXG4gICAgICAgICAgICBwaHlzaWNzV29ybGQgPSBuZXcgQW1tby5idERpc2NyZXRlRHluYW1pY3NXb3JsZChkaXNwYXRjaGVyLCBicm9hZHBoYXNlLCBzb2x2ZXIsIGNvbGxpc2lvbkNvbmZpZ3VyYXRpb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc29mdEJvZGllcykge1xyXG4gICAgICAgICAgICBjb25zdCBjb2xsaXNpb25Db25maWd1cmF0aW9uID0gbmV3IEFtbW8uYnRTb2Z0Qm9keVJpZ2lkQm9keUNvbGxpc2lvbkNvbmZpZ3VyYXRpb24oKSwgZGlzcGF0Y2hlciA9IG5ldyBBbW1vLmJ0Q29sbGlzaW9uRGlzcGF0Y2hlcihjb2xsaXNpb25Db25maWd1cmF0aW9uKSwgYnJvYWRwaGFzZSA9IG5ldyBBbW1vLmJ0RGJ2dEJyb2FkcGhhc2UoKSwgc29sdmVyID0gbmV3IEFtbW8uYnRTZXF1ZW50aWFsSW1wdWxzZUNvbnN0cmFpbnRTb2x2ZXIoKSwgc29mdEJvZHlTb2x2ZXIgPSBuZXcgQW1tby5idERlZmF1bHRTb2Z0Qm9keVNvbHZlcigpO1xyXG4gICAgICAgICAgICBwaHlzaWNzV29ybGQgPSBuZXcgQW1tby5idFNvZnRSaWdpZER5bmFtaWNzV29ybGQoZGlzcGF0Y2hlciwgYnJvYWRwaGFzZSwgc29sdmVyLCBjb2xsaXNpb25Db25maWd1cmF0aW9uLCBzb2Z0Qm9keVNvbHZlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHBoeXNpY3NXb3JsZC5zZXRHcmF2aXR5KG5ldyBBbW1vLmJ0VmVjdG9yMyhnLngsIGcueSwgZy56KSk7XHJcbiAgICAgICAgcmV0dXJuIHBoeXNpY3NXb3JsZDtcclxuICAgIH1cclxuICAgIGNyZWF0ZURlYnJpc0Zyb21CcmVha2FibGVPYmplY3Qob2JqZWN0LCBwYXJlbnQpIHtcclxuICAgICAgICBpZiAodGhpcy5zY2VuZSA9PT0gJ2hlYWRsZXNzJylcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIG9iamVjdC5tYXRlcmlhbCA9IHRoaXMuZGVmYXVsdE1hdGVyaWFsLmdldCgpO1xyXG4gICAgICAgIG9iamVjdC5zaGFwZSA9ICdodWxsJztcclxuICAgICAgICBvYmplY3QuZnJhZ21lbnREZXB0aCA9IHBhcmVudC5mcmFnbWVudERlcHRoICsgMTtcclxuICAgICAgICAvLyBBZGQgdGhlIG9iamVjdCB0byB0aGUgc2NlbmVcclxuICAgICAgICB0aGlzLnNjZW5lLmFkZChvYmplY3QpO1xyXG4gICAgICAgIC8vIEFkZCBwaHlzaWNzIHRvIHRoZSBvYmplY3RcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgdGhpcy5hZGRFeGlzdGluZyhvYmplY3QpO1xyXG4gICAgICAgIG9iamVjdC5ib2R5LmJyZWFrYWJsZSA9IGZhbHNlO1xyXG4gICAgICAgIC8vIG1ha2UgdGhpcyBmcmFnbWVudCBicmVha2FibGUgaW4gMi41c2Vjb25kc1xyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICBvYmplY3QuYm9keS5icmVha2FibGUgPSB0cnVlO1xyXG4gICAgICAgIH0sIDI1MDApO1xyXG4gICAgfVxyXG4gICAgcmVtb3ZlRGVicmlzKG9iamVjdCkge1xyXG4gICAgICAgIGlmICh0aGlzLnNjZW5lID09PSAnaGVhZGxlc3MnKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgdGhpcy5zY2VuZS5yZW1vdmUob2JqZWN0KTtcclxuICAgICAgICB0aGlzLmRlc3Ryb3kob2JqZWN0KTtcclxuICAgIH1cclxuICAgIHVwZGF0ZShkZWx0YSkge1xyXG4gICAgICAgIHRoaXMudXBkYXRlUGh5c2ljcyhkZWx0YSk7XHJcbiAgICAgICAgdGhpcy5kZXRlY3RDb2xsaXNpb25zKCk7XHJcbiAgICB9XHJcbiAgICB1cGRhdGVQaHlzaWNzKGRlbHRhKSB7XHJcbiAgICAgICAgLy8gc3RlcCB3b3JsZFxyXG4gICAgICAgIGNvbnN0IGRlbHRhVGltZSA9IGRlbHRhIC8gMTAwMDtcclxuICAgICAgICAvLyBtdXN0IGFsd2F5cyBzYXRpc2Z5IHRoZSBlcXVhdGlvbiB0aW1lU3RlcCA8IG1heFN1YlN0ZXBzICogZml4ZWRUaW1lU3RlcFxyXG4gICAgICAgIHRoaXMucGh5c2ljc1dvcmxkLnN0ZXBTaW11bGF0aW9uKGRlbHRhVGltZSwgdGhpcy5jb25maWcubWF4U3ViU3RlcHMgfHwgNCwgdGhpcy5jb25maWcuZml4ZWRUaW1lU3RlcCB8fCAxIC8gNjApO1xyXG4gICAgICAgIC8vIHVwZGF0ZSByaWdpZCBib2RpZXNcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucmlnaWRCb2RpZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3Qgb2JqVGhyZWUgPSB0aGlzLnJpZ2lkQm9kaWVzW2ldO1xyXG4gICAgICAgICAgICBjb25zdCBvYmpQaHlzID0gb2JqVGhyZWUuYm9keS5hbW1vO1xyXG4gICAgICAgICAgICBjb25zdCBtcyA9IG9ialBoeXMuZ2V0TW90aW9uU3RhdGUoKTtcclxuICAgICAgICAgICAgaWYgKG1zKSB7XHJcbiAgICAgICAgICAgICAgICBtcy5nZXRXb3JsZFRyYW5zZm9ybSh0aGlzLndvcmxkVHJhbnNmb3JtKTtcclxuICAgICAgICAgICAgICAgIC8vIGNoZWNrIGlmIG9iamVjdCBkaWQgYW4gdXBkYXRlIHNpbmNlIGxhc3QgY2FsbFxyXG4gICAgICAgICAgICAgICAgaWYgKG9ialRocmVlLmJvZHkuZGlkVXBkYXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvYmpUaHJlZS5ib2R5Ll9lbWl0VXBkYXRlRXZlbnRzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmpUaHJlZS5ib2R5LmV2ZW50RW1pdHRlci5lbWl0KCd1cGRhdGUnKTtcclxuICAgICAgICAgICAgICAgICAgICBvYmpUaHJlZS5ib2R5LmRpZFVwZGF0ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gdXBkYXRlIHBvc2l0aW9uc1xyXG4gICAgICAgICAgICAgICAgaWYgKG9ialRocmVlLmJvZHkuYW1tby5pc0tpbmVtYXRpY09iamVjdCgpICYmIG9ialRocmVlLmJvZHkubmVlZFVwZGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGdldCBwb3NpdGlvbiBhbmQgcm90YXRpb25cclxuICAgICAgICAgICAgICAgICAgICBvYmpUaHJlZS5nZXRXb3JsZFF1YXRlcm5pb24odGhpcy50bXBRdWF0ZXJuaW9uKTtcclxuICAgICAgICAgICAgICAgICAgICBvYmpUaHJlZS5nZXRXb3JsZFBvc2l0aW9uKHRoaXMudG1wVmVjdG9yMyk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYWRqdXN0IHRtcCB2YXJpYWJsZXNcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRtcEJ0VmVjdG9yMy5zZXRWYWx1ZSh0aGlzLnRtcFZlY3RvcjMueCwgdGhpcy50bXBWZWN0b3IzLnksIHRoaXMudG1wVmVjdG9yMy56KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRtcEJ0UXVhdGVybmlvbi5zZXRWYWx1ZSh0aGlzLnRtcFF1YXRlcm5pb24ueCwgdGhpcy50bXBRdWF0ZXJuaW9uLnksIHRoaXMudG1wUXVhdGVybmlvbi56LCB0aGlzLnRtcFF1YXRlcm5pb24udyk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHBvc2l0aW9uIGFuZCByb3RhdGlvblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMud29ybGRUcmFuc2Zvcm0uc2V0T3JpZ2luKHRoaXMudG1wQnRWZWN0b3IzKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLndvcmxkVHJhbnNmb3JtLnNldFJvdGF0aW9uKHRoaXMudG1wQnRRdWF0ZXJuaW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBzZXQgdHJhbnNmb3JtXHJcbiAgICAgICAgICAgICAgICAgICAgbXMuc2V0V29ybGRUcmFuc2Zvcm0odGhpcy53b3JsZFRyYW5zZm9ybSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVzZXQgbmVlZHNVcGRhdGVcclxuICAgICAgICAgICAgICAgICAgICBvYmpUaHJlZS5ib2R5Lm5lZWRVcGRhdGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG9ialRocmVlLmJvZHkuc2tpcFVwZGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGRvIG5vdGhpbmcgLi4uXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmICghb2JqVGhyZWUuYm9keS5hbW1vLmlzU3RhdGljT2JqZWN0KCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBnZXQgcG9zaXRpb24gYW5kIHJvdGF0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHAgPSB0aGlzLndvcmxkVHJhbnNmb3JtLmdldE9yaWdpbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBxID0gdGhpcy53b3JsZFRyYW5zZm9ybS5nZXRSb3RhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGJvZHkgb2Zmc2V0XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG8gPSBvYmpUaHJlZS5ib2R5Lm9mZnNldDtcclxuICAgICAgICAgICAgICAgICAgICAvLyBzZXQgcG9zaXRpb24gYW5kIHJvdGF0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9ialRocmVlLmJvZHkuaWdub3JlU2NhbGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50bXBWZWN0b3IzYS5zZXQob2JqVGhyZWUuc2NhbGUueCwgb2JqVGhyZWUuc2NhbGUueSwgb2JqVGhyZWUuc2NhbGUueik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzY2FsZSA9IG9ialRocmVlLmJvZHkuYW1tby5nZXRDb2xsaXNpb25TaGFwZSgpLmdldExvY2FsU2NhbGluZygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRtcFZlY3RvcjNhLnNldChzY2FsZS54KCksIHNjYWxlLnkoKSwgc2NhbGUueigpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50bXBWZWN0b3IzLnNldChwLngoKSArIG8ueCwgcC55KCkgKyBvLnksIHAueigpICsgby56KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRtcFF1YXRlcm5pb24uc2V0KHEueCgpLCBxLnkoKSwgcS56KCksIHEudygpKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRtcE1hdHJpeDQuY29tcG9zZSh0aGlzLnRtcFZlY3RvcjMsIHRoaXMudG1wUXVhdGVybmlvbiwgdGhpcy50bXBWZWN0b3IzYSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9ialRocmVlLnBhcmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb21wYXRpYmlsaXR5IGZpeCBmb3IgdGhyZWUuanMgPj0gcjEyMyAoRGV6ZW1iZXIgMjAyMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoK2luZGV4XzEuUkVWSVNJT04gPj0gMTIzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50bXBNYXRyaXg0YS5jb3B5KG9ialRocmVlLnBhcmVudC5tYXRyaXhXb3JsZCkuaW52ZXJ0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG1wTWF0cml4NGEuZ2V0SW52ZXJzZShvYmpUaHJlZS5wYXJlbnQubWF0cml4V29ybGQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50bXBNYXRyaXg0YS5pZGVudGl0eSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRtcE1hdHJpeDRhLm11bHRpcGx5KHRoaXMudG1wTWF0cml4NCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50bXBNYXRyaXg0YS5kZWNvbXBvc2Uob2JqVGhyZWUucG9zaXRpb24sIG9ialRocmVlLnF1YXRlcm5pb24sIG9ialRocmVlLnNjYWxlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGRldGVjdENvbGxpc2lvbnMoKSB7XHJcbiAgICAgICAgdmFyIF9hLCBfYjtcclxuICAgICAgICBjb25zdCBkZXRlY3RlZENvbGxpc2lvbnMgPSBbXTtcclxuICAgICAgICAvLyByZXNldCB0aGVzZSB2ZWN0b3JzXHJcbiAgICAgICAgdGhpcy5pbXBhY3RQb2ludC5zZXQoMCwgMCwgMCk7XHJcbiAgICAgICAgdGhpcy5pbXBhY3ROb3JtYWwuc2V0KDAsIDAsIDApO1xyXG4gICAgICAgIGNvbnN0IGRpc3BhdGNoZXIgPSB0aGlzLnBoeXNpY3NXb3JsZC5nZXREaXNwYXRjaGVyKCk7XHJcbiAgICAgICAgY29uc3QgbnVtTWFuaWZvbGRzID0gZGlzcGF0Y2hlci5nZXROdW1NYW5pZm9sZHMoKTtcclxuICAgICAgICAvLyBjaGVjayBjb2xsaXNpb25zXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1NYW5pZm9sZHM7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgY29udGFjdE1hbmlmb2xkID0gZGlzcGF0Y2hlci5nZXRNYW5pZm9sZEJ5SW5kZXhJbnRlcm5hbChpKTtcclxuICAgICAgICAgICAgbGV0IG51bUNvbnRhY3RzID0gY29udGFjdE1hbmlmb2xkLmdldE51bUNvbnRhY3RzKCk7XHJcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgY29uc3QgcmIwID0gQW1tby5jYXN0T2JqZWN0KGNvbnRhY3RNYW5pZm9sZC5nZXRCb2R5MCgpLCBBbW1vLmJ0UmlnaWRCb2R5KTtcclxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICBjb25zdCByYjEgPSBBbW1vLmNhc3RPYmplY3QoY29udGFjdE1hbmlmb2xkLmdldEJvZHkxKCksIEFtbW8uYnRSaWdpZEJvZHkpO1xyXG4gICAgICAgICAgICBsZXQgdGhyZWVPYmplY3QwID0gcmIwLnRocmVlT2JqZWN0O1xyXG4gICAgICAgICAgICBsZXQgdGhyZWVPYmplY3QxID0gcmIxLnRocmVlT2JqZWN0O1xyXG4gICAgICAgICAgICBpZiAoIXRocmVlT2JqZWN0MCB8fCAhdGhyZWVPYmplY3QxKSB7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBkbyBub3QgY2hlY2sgY29sbGlzaW9uIGJldHdlZW4gMiB1bm5hbWVkIG9iamVjdHNcclxuICAgICAgICAgICAgLy8gKGZyYWdtZW50cyBkbyBub3QgaGF2ZSBhIG5hbWUsIGZvciBleGFtcGxlKVxyXG4gICAgICAgICAgICBpZiAocmIwLm5hbWUgPT09ICcnICYmIHJiMS5uYW1lID09PSAnJylcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogR2V0IHNvbWUgaW5mb3JtYXRpb25cclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGNvbnN0IGNoZWNrQ29sbGlzaW9uczAgPSAoX2EgPSB0aHJlZU9iamVjdDAuYm9keSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNoZWNrQ29sbGlzaW9ucztcclxuICAgICAgICAgICAgY29uc3QgY2hlY2tDb2xsaXNpb25zMSA9IChfYiA9IHRocmVlT2JqZWN0MS5ib2R5KSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuY2hlY2tDb2xsaXNpb25zO1xyXG4gICAgICAgICAgICBjb25zdCBicmVha2FibGUwID0gdGhyZWVPYmplY3QwLmJvZHkuYnJlYWthYmxlO1xyXG4gICAgICAgICAgICBjb25zdCBicmVha2FibGUxID0gdGhyZWVPYmplY3QxLmJvZHkuYnJlYWthYmxlO1xyXG4gICAgICAgICAgICBjb25zdCBjaGVja0NvbGxpc2lvbnMgPSBjaGVja0NvbGxpc2lvbnMwIHx8IGNoZWNrQ29sbGlzaW9uczE7XHJcbiAgICAgICAgICAgIGNvbnN0IGNoZWNrQnJlYWthYmxlID0gYnJlYWthYmxlMCB8fCBicmVha2FibGUxO1xyXG4gICAgICAgICAgICBpZiAoIWNoZWNrQ29sbGlzaW9ucyAmJiAhY2hlY2tCcmVha2FibGUpXHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgbGV0IGNvbnRhY3QgPSBmYWxzZTtcclxuICAgICAgICAgICAgbGV0IG1heEltcHVsc2UgPSAwO1xyXG4gICAgICAgICAgICBsZXQgZXZlbnQgPSAnc3RhcnQnO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IG51bUNvbnRhY3RzOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRhY3RQb2ludCA9IGNvbnRhY3RNYW5pZm9sZC5nZXRDb250YWN0UG9pbnQoaik7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkaXN0YW5jZSA9IGNvbnRhY3RQb2ludC5nZXREaXN0YW5jZSgpO1xyXG4gICAgICAgICAgICAgICAgLy8gRGlzdGFuY2UgZGVmaW5pdGlvbjogd2hlbiB0aGUgZGlzdGFuY2UgYmV0d2VlbiBvYmplY3RzIGlzIHBvc2l0aXZlLCB0aGV5IGFyZSBzZXBhcmF0ZWQuIFdoZW4gdGhlIGRpc3RhbmNlIGlzIG5lZ2F0aXZlLCB0aGV5IGFyZSBwZW5ldHJhdGluZy4gWmVybyBkaXN0YW5jZSBtZWFucyBleGFjdGx5IHRvdWNoaW5nLlxyXG4gICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly9weWJ1bGxldC5vcmcvQnVsbGV0L3BocEJCMy92aWV3dG9waWMucGhwP3Q9NTgzMVxyXG4gICAgICAgICAgICAgICAgaWYgKGRpc3RhbmNlIDw9IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250YWN0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbXB1bHNlID0gY29udGFjdFBvaW50LmdldEFwcGxpZWRJbXB1bHNlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW1wYWN0UG9pbnQgPSBjb250YWN0UG9pbnQuZ2V0X21fcG9zaXRpb25Xb3JsZE9uQigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGltcGFjdE5vcm1hbCA9IGNvbnRhY3RQb2ludC5nZXRfbV9ub3JtYWxXb3JsZE9uQigpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGhhbmRsZSBjb2xsaXNpb24gZXZlbnRzXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrQ29sbGlzaW9uczAgfHwgY2hlY2tDb2xsaXNpb25zMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuYW1lcyA9IFt0aHJlZU9iamVjdDAubmFtZSwgdGhyZWVPYmplY3QxLm5hbWVdLnNvcnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29tYmluZWROYW1lID0gYCR7bmFtZXNbMF19X18ke25hbWVzWzFdfWA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmVhcmxpZXJEZXRlY3RlZENvbGxpc2lvbnMuZmluZChlbCA9PiBlbC5jb21iaW5lZE5hbWUgPT09IGNvbWJpbmVkTmFtZSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudCA9ICdjb2xsaXNpb24nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWRldGVjdGVkQ29sbGlzaW9ucy5maW5kKGVsID0+IGVsLmNvbWJpbmVkTmFtZSA9PT0gY29tYmluZWROYW1lKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGV0ZWN0ZWRDb2xsaXNpb25zLnB1c2goeyBjb21iaW5lZE5hbWUsIGNvbGxpc2lvbjogdHJ1ZSB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29sbGlzaW9uRXZlbnRzLmVtaXQoJ2NvbGxpc2lvbicsIHsgYm9kaWVzOiBbdGhyZWVPYmplY3QwLCB0aHJlZU9iamVjdDFdLCBldmVudCB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvLyBnZXQgaW1wYWN0UG9pbnQgYW5kIGltcGFjdE5vcm1hbCBvZiB0aGUgaGlnaHQgaW1wdWxzZSBwb2ludCAoZm9yIGJyZWFrYWJsZSBvYmplY3RzKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbXB1bHNlID49IG1heEltcHVsc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4SW1wdWxzZSA9IGltcHVsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGdldCB3aGF0IHdlZW4gbmVlZCBmb3IgdGhlIGNvbnZleCBicmVha2luZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYnJlYWthYmxlMCB8fCBicmVha2FibGUxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmltcGFjdFBvaW50LnNldChpbXBhY3RQb2ludC54KCksIGltcGFjdFBvaW50LnkoKSwgaW1wYWN0UG9pbnQueigpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW1wYWN0Tm9ybWFsLnNldChpbXBhY3ROb3JtYWwueCgpLCBpbXBhY3ROb3JtYWwueSgpLCBpbXBhY3ROb3JtYWwueigpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBpZiBubyBwb2ludCBoYXMgY29udGFjdCwgYWJvcnRcclxuICAgICAgICAgICAgaWYgKCFjb250YWN0KVxyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIC8vIGlmIG5vIG9iamVjdHMgYXJlIGJyZWFrYWJsZSwgYWJvcnRcclxuICAgICAgICAgICAgaWYgKCFjaGVja0JyZWFrYWJsZSlcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogY2hlY2sgZm9yIGJyZWFrYWJsZSBvYmplY3RzIChzdWJkaXZpc2lvbilcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGNvbnN0IGZyYWN0dXJlSW1wdWxzZSA9IDU7IC8vMjUwXHJcbiAgICAgICAgICAgIGNvbnN0IE1BWF9GUkFHTUVOVF9ERVBUSCA9IDI7XHJcbiAgICAgICAgICAgIC8vIHNpbmNlIHRoZSBsaWJyYXJ5IGNvbnZleEJyZWFrZXIgbWFrZXMgdXNlIG9mIHRocmVlJ3MgdXNlckRhdGEuYW1tb1BoeXNpY3NEYXRhXHJcbiAgICAgICAgICAgIC8vIHdlIGhhdmUgdG8gY2xvbmUgdGhlIG5lY2Vzc2FyeSBwYXJhbXMgdG8gdGhyZWVPYmplY3RYLnVzZXJEYXRhLmFtbW9QaHlzaWNzRGF0YVxyXG4gICAgICAgICAgICAvLyBUT0RPIGltcHJvdmUgdGhpc1xyXG4gICAgICAgICAgICB0aGlzLmVtcHR5VjMuc2V0KDAsIDAsIDApO1xyXG4gICAgICAgICAgICB0aHJlZU9iamVjdDAudXNlckRhdGEuYW1tb1BoeXNpY3NEYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgbWFzczogMSxcclxuICAgICAgICAgICAgICAgIHZlbG9jaXR5OiB0aGlzLmVtcHR5VjMsXHJcbiAgICAgICAgICAgICAgICBhbmd1bGFyVmVsb2NpdHk6IHRoaXMuZW1wdHlWMyxcclxuICAgICAgICAgICAgICAgIGJyZWFrYWJsZTogYnJlYWthYmxlMCxcclxuICAgICAgICAgICAgICAgIHBoeXNpY3NCb2R5OiByYjBcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdGhyZWVPYmplY3QxLnVzZXJEYXRhLmFtbW9QaHlzaWNzRGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIG1hc3M6IDEsXHJcbiAgICAgICAgICAgICAgICB2ZWxvY2l0eTogdGhpcy5lbXB0eVYzLFxyXG4gICAgICAgICAgICAgICAgYW5ndWxhclZlbG9jaXR5OiB0aGlzLmVtcHR5VjMsXHJcbiAgICAgICAgICAgICAgICBicmVha2FibGU6IGJyZWFrYWJsZTEsXHJcbiAgICAgICAgICAgICAgICBwaHlzaWNzQm9keTogcmIxXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdGhyZWVPYmplY3QwLmZyYWdtZW50RGVwdGggPT09ICd1bmRlZmluZWQnKVxyXG4gICAgICAgICAgICAgICAgdGhyZWVPYmplY3QwLmZyYWdtZW50RGVwdGggPSAwO1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHRocmVlT2JqZWN0MS5mcmFnbWVudERlcHRoID09PSAndW5kZWZpbmVkJylcclxuICAgICAgICAgICAgICAgIHRocmVlT2JqZWN0MS5mcmFnbWVudERlcHRoID0gMDtcclxuICAgICAgICAgICAgLy8gdGhyZWVPYmplY3QwXHJcbiAgICAgICAgICAgIGlmIChicmVha2FibGUwICYmIG1heEltcHVsc2UgPiBmcmFjdHVyZUltcHVsc2UgJiYgdGhyZWVPYmplY3QwLmZyYWdtZW50RGVwdGggPCBNQVhfRlJBR01FTlRfREVQVEgpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRlYnJpcyA9IHRoaXMuY29udmV4QnJlYWtlci5zdWJkaXZpZGVCeUltcGFjdCh0aHJlZU9iamVjdDAsIHRoaXMuaW1wYWN0UG9pbnQsIHRoaXMuaW1wYWN0Tm9ybWFsLCAxLCAyKTsgLy8sIDEuNSlcclxuICAgICAgICAgICAgICAgIGNvbnN0IG51bU9iamVjdHMgPSBkZWJyaXMubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBudW1PYmplY3RzOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB2ZWwgPSByYjAuZ2V0TGluZWFyVmVsb2NpdHkoKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBhbmdWZWwgPSByYjAuZ2V0QW5ndWxhclZlbG9jaXR5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZnJhZ21lbnQgPSBkZWJyaXNbal07XHJcbiAgICAgICAgICAgICAgICAgICAgZnJhZ21lbnQudXNlckRhdGEuYW1tb1BoeXNpY3NEYXRhLnZlbG9jaXR5LnNldCh2ZWwueCgpLCB2ZWwueSgpLCB2ZWwueigpKTtcclxuICAgICAgICAgICAgICAgICAgICBmcmFnbWVudC51c2VyRGF0YS5hbW1vUGh5c2ljc0RhdGEuYW5ndWxhclZlbG9jaXR5LnNldChhbmdWZWwueCgpLCBhbmdWZWwueSgpLCBhbmdWZWwueigpKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZURlYnJpc0Zyb21CcmVha2FibGVPYmplY3QoZnJhZ21lbnQsIHRocmVlT2JqZWN0MCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9iamVjdHNUb1JlbW92ZVt0aGlzLm51bU9iamVjdHNUb1JlbW92ZSsrXSA9IHRocmVlT2JqZWN0MDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyB0aHJlZU9iamVjdDFcclxuICAgICAgICAgICAgaWYgKGJyZWFrYWJsZTEgJiYgbWF4SW1wdWxzZSA+IGZyYWN0dXJlSW1wdWxzZSAmJiB0aHJlZU9iamVjdDEuZnJhZ21lbnREZXB0aCA8IE1BWF9GUkFHTUVOVF9ERVBUSCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGVicmlzID0gdGhpcy5jb252ZXhCcmVha2VyLnN1YmRpdmlkZUJ5SW1wYWN0KHRocmVlT2JqZWN0MSwgdGhpcy5pbXBhY3RQb2ludCwgdGhpcy5pbXBhY3ROb3JtYWwsIDEsIDIpOyAvLywgMS41KVxyXG4gICAgICAgICAgICAgICAgY29uc3QgbnVtT2JqZWN0cyA9IGRlYnJpcy5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IG51bU9iamVjdHM7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZlbCA9IHJiMS5nZXRMaW5lYXJWZWxvY2l0eSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFuZ1ZlbCA9IHJiMS5nZXRBbmd1bGFyVmVsb2NpdHkoKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBmcmFnbWVudCA9IGRlYnJpc1tqXTtcclxuICAgICAgICAgICAgICAgICAgICBmcmFnbWVudC51c2VyRGF0YS5hbW1vUGh5c2ljc0RhdGEudmVsb2NpdHkuc2V0KHZlbC54KCksIHZlbC55KCksIHZlbC56KCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZyYWdtZW50LnVzZXJEYXRhLmFtbW9QaHlzaWNzRGF0YS5hbmd1bGFyVmVsb2NpdHkuc2V0KGFuZ1ZlbC54KCksIGFuZ1ZlbC55KCksIGFuZ1ZlbC56KCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlRGVicmlzRnJvbUJyZWFrYWJsZU9iamVjdChmcmFnbWVudCwgdGhyZWVPYmplY3QxKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMub2JqZWN0c1RvUmVtb3ZlW3RoaXMubnVtT2JqZWN0c1RvUmVtb3ZlKytdID0gdGhyZWVPYmplY3QxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIHJlbW92ZSBvYmplY3RzXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm51bU9iamVjdHNUb1JlbW92ZTsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRGVicmlzKHRoaXMub2JqZWN0c1RvUmVtb3ZlW2ldKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5udW1PYmplY3RzVG9SZW1vdmUgPSAwO1xyXG4gICAgICAgIC8vIGhhbmRsZSBjb2xsaXNpb24gZW5kIGV2ZW50c1xyXG4gICAgICAgIHRoaXMuZWFybGllckRldGVjdGVkQ29sbGlzaW9ucy5mb3JFYWNoKGVsID0+IHtcclxuICAgICAgICAgICAgY29uc3QgeyBjb21iaW5lZE5hbWUgfSA9IGVsO1xyXG4gICAgICAgICAgICBpZiAoIWRldGVjdGVkQ29sbGlzaW9ucy5maW5kKGVsID0+IGVsLmNvbWJpbmVkTmFtZSA9PT0gY29tYmluZWROYW1lKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3BsaXQgPSBjb21iaW5lZE5hbWUuc3BsaXQoJ19fJyk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBvYmowID0gdGhpcy5yaWdpZEJvZGllcy5maW5kKG9iaiA9PiBvYmoubmFtZSA9PT0gc3BsaXRbMF0pO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgb2JqMSA9IHRoaXMucmlnaWRCb2RpZXMuZmluZChvYmogPT4gb2JqLm5hbWUgPT09IHNwbGl0WzFdKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGV2ZW50ID0gJ2VuZCc7XHJcbiAgICAgICAgICAgICAgICBpZiAob2JqMCAmJiBvYmoxKVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29sbGlzaW9uRXZlbnRzLmVtaXQoJ2NvbGxpc2lvbicsIHsgYm9kaWVzOiBbb2JqMCwgb2JqMV0sIGV2ZW50IH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5lYXJsaWVyRGV0ZWN0ZWRDb2xsaXNpb25zID0gWy4uLmRldGVjdGVkQ29sbGlzaW9uc107XHJcbiAgICB9XHJcbiAgICBzZXRHcmF2aXR5KHggPSAwLCB5ID0gLTkuOCwgeiA9IDApIHtcclxuICAgICAgICB0aGlzLnRtcEJ0VmVjdG9yMy5zZXRWYWx1ZSh4LCB5LCB6KTtcclxuICAgICAgICB0aGlzLnBoeXNpY3NXb3JsZC5zZXRHcmF2aXR5KHRoaXMudG1wQnRWZWN0b3IzKTtcclxuICAgIH1cclxuICAgIGdldCBkZWJ1ZygpIHtcclxuICAgICAgICBpZiAodGhpcy5pc0hlYWRsZXNzKVxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBlbmFibGU6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGVidWdEcmF3ZXIuZW5hYmxlKCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG1vZGU6IChkZWJ1Z01vZGUgPSAxKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRlYnVnRHJhd2VyLnNldERlYnVnTW9kZShkZWJ1Z01vZGUpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBkaXNhYmxlOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRlYnVnRHJhd2VyLmRpc2FibGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBzdGFydCgpIHtcclxuICAgICAgICBpZiAodHlwZW9mIEFtbW8gPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgIGxvZ2dlcl8xLmRlZmF1bHQoJ0FyZSB5b3Ugc3VyZSB5b3UgaW5jbHVkZWQgYW1tby5qcz8nKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHlwZW9mIEFtbW8gPT09ICdmdW5jdGlvbicpXHJcbiAgICAgICAgICAgIEFtbW8oKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0dXAoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB0aGlzLnNldHVwKCk7XHJcbiAgICB9XHJcbiAgICBnZXQgYWRkKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGNvbGxpZGVyOiAob2JqZWN0MSwgb2JqZWN0MiwgZXZlbnRDYWxsYmFjaykgPT4gdGhpcy5jb2xsaXNpb25FdmVudHMuYWRkQ29sbGlkZXIob2JqZWN0MSwgb2JqZWN0MiwgZXZlbnRDYWxsYmFjayksXHJcbiAgICAgICAgICAgIGNvbnN0cmFpbnRzOiB0aGlzLmNvbnN0cmFpbnRzLmFkZENvbnN0cmFpbnRzLFxyXG4gICAgICAgICAgICBleGlzdGluZzogKG9iamVjdCwgY29uZmlnKSA9PiB0aGlzLmFkZEV4aXN0aW5nKG9iamVjdCwgY29uZmlnKSxcclxuICAgICAgICAgICAgcGxhbmU6IChwbGFuZUNvbmZpZyA9IHt9LCBtYXRlcmlhbENvbmZpZyA9IHt9KSA9PiB0aGlzLnNoYXBlcy5hZGRQbGFuZShwbGFuZUNvbmZpZywgbWF0ZXJpYWxDb25maWcpLFxyXG4gICAgICAgICAgICBzcGhlcmU6IChzcGhlcmVDb25maWcgPSB7fSwgbWF0ZXJpYWxDb25maWcgPSB7fSkgPT4gdGhpcy5zaGFwZXMuYWRkU3BoZXJlKHNwaGVyZUNvbmZpZywgbWF0ZXJpYWxDb25maWcpLFxyXG4gICAgICAgICAgICBncm91bmQ6IChncm91bmRDb25maWcgPSB7fSwgbWF0ZXJpYWxDb25maWcgPSB7fSkgPT4gdGhpcy5zaGFwZXMuYWRkR3JvdW5kKGdyb3VuZENvbmZpZywgbWF0ZXJpYWxDb25maWcpLFxyXG4gICAgICAgICAgICBib3g6IChib3hDb25maWcgPSB7fSwgbWF0ZXJpYWxDb25maWcgPSB7fSkgPT4gdGhpcy5zaGFwZXMuYWRkQm94KGJveENvbmZpZywgbWF0ZXJpYWxDb25maWcpLFxyXG4gICAgICAgICAgICBjeWxpbmRlcjogKGN5bGluZGVyQ29uZmlnID0ge30sIG1hdGVyaWFsQ29uZmlnID0ge30pID0+IHRoaXMuc2hhcGVzLmFkZEN5bGluZGVyKGN5bGluZGVyQ29uZmlnLCBtYXRlcmlhbENvbmZpZyksXHJcbiAgICAgICAgICAgIGNvbmU6IChjb25lQ29uZmlnID0ge30sIG1hdGVyaWFsQ29uZmlnID0ge30pID0+IHRoaXMuc2hhcGVzLmFkZENvbmUoY29uZUNvbmZpZywgbWF0ZXJpYWxDb25maWcpLFxyXG4gICAgICAgICAgICB0b3J1czogKHRvcnVzQ29uZmlnID0ge30sIG1hdGVyaWFsQ29uZmlnID0ge30pID0+IHRoaXMuc2hhcGVzLmFkZFRvcnVzKHRvcnVzQ29uZmlnLCBtYXRlcmlhbENvbmZpZyksXHJcbiAgICAgICAgICAgIGV4dHJ1ZGU6IChleHRydWRlQ29uZmlnLCBtYXRlcmlhbENvbmZpZyA9IHt9KSA9PiB0aGlzLnNoYXBlcy5hZGRFeHRydWRlKGV4dHJ1ZGVDb25maWcsIG1hdGVyaWFsQ29uZmlnKSxcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBuZXcgUmF5Y2FzdGVyXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB0eXBlIFJldHVybnMgb25seSB0aGUgY2xvc2VzIGJvZHkgYnkgZGVmYXVsdC4gQ2FuIGJlICdjbG9zZXN0JyBvciAnYWxsSGl0cycuXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICByYXljYXN0ZXI6ICh0eXBlID0gJ2Nsb3Nlc3QnKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gJ2Nsb3Nlc3QnKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgcmF5Y2FzdGVyXzEuQ2xvc2VzdFJheWNhc3Rlcih0aGlzKTtcclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IHJheWNhc3Rlcl8xLkFsbEhpdHNSYXljYXN0ZXIodGhpcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgcHJlcGFyZVRocmVlT2JqZWN0Rm9yQ29sbGlzaW9uU2hhcGUob2JqZWN0LCBjb25maWcgPSB7fSkge1xyXG4gICAgICAgIHZhciBfYSwgX2I7XHJcbiAgICAgICAgY29uc3QgeyBhdXRvQ2VudGVyID0gZmFsc2UgfSA9IGNvbmZpZztcclxuICAgICAgICAvLyBzZXQgZGVmYXVsdCBwYXJhbXNcclxuICAgICAgICBjb25zdCBkZWZhdWx0UGFyYW1zID0ge1xyXG4gICAgICAgICAgICB3aWR0aDogMSxcclxuICAgICAgICAgICAgaGVpZ2h0OiAxLFxyXG4gICAgICAgICAgICBkZXB0aDogMSxcclxuICAgICAgICAgICAgcmFkaXVzOiAxLFxyXG4gICAgICAgICAgICByYWRpdXNUb3A6IDEsXHJcbiAgICAgICAgICAgIHJhZGl1c0JvdHRvbTogMSxcclxuICAgICAgICAgICAgdHViZTogMC40LFxyXG4gICAgICAgICAgICB0dWJ1bGFyU2VnbWVudHM6IDYgLy8gZm9yIHRoZSB0b3J1c1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLy8gZGV0ZXJtaW5lIHRoZSBzaGFwZSAoZmFsbGJhY2sgdG8gaGFjZClcclxuICAgICAgICBsZXQgc2hhcGUgPSAndW5rbm93bic7XHJcbiAgICAgICAgLy8gcmV0cmlldmUgdGhlIHNoYXBlIGZyb20gdGhlIGdlb21ldHJ5XHJcbiAgICAgICAgY29uc3QgdHlwZSA9ICgoX2EgPSBvYmplY3QuZ2VvbWV0cnkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS50eXBlKSB8fCAndW5rbm93bic7XHJcbiAgICAgICAgaWYgKC9ib3gvaS50ZXN0KHR5cGUpKVxyXG4gICAgICAgICAgICBzaGFwZSA9ICdib3gnO1xyXG4gICAgICAgIGVsc2UgaWYgKC9jb25lL2kudGVzdCh0eXBlKSlcclxuICAgICAgICAgICAgc2hhcGUgPSAnY29uZSc7XHJcbiAgICAgICAgZWxzZSBpZiAoL2N5bGluZGVyL2kudGVzdCh0eXBlKSlcclxuICAgICAgICAgICAgc2hhcGUgPSAnY3lsaW5kZXInO1xyXG4gICAgICAgIGVsc2UgaWYgKC9leHRydWRlL2kudGVzdCh0eXBlKSlcclxuICAgICAgICAgICAgc2hhcGUgPSAnZXh0cnVkZSc7XHJcbiAgICAgICAgZWxzZSBpZiAoL3BsYW5lL2kudGVzdCh0eXBlKSlcclxuICAgICAgICAgICAgc2hhcGUgPSAncGxhbmUnO1xyXG4gICAgICAgIGVsc2UgaWYgKC9zcGhlcmUvaS50ZXN0KHR5cGUpKVxyXG4gICAgICAgICAgICBzaGFwZSA9ICdzcGhlcmUnO1xyXG4gICAgICAgIGVsc2UgaWYgKC90b3J1cy9pLnRlc3QodHlwZSkpXHJcbiAgICAgICAgICAgIHNoYXBlID0gJ3RvcnVzJztcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgbGV0IHBhcmFtcyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdFBhcmFtcyksIChfYiA9IG9iamVjdCA9PT0gbnVsbCB8fCBvYmplY3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9iamVjdC5nZW9tZXRyeSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLnBhcmFtZXRlcnMpO1xyXG4gICAgICAgIGlmIChjb25maWcuc2hhcGUpIHtcclxuICAgICAgICAgICAgcGFyYW1zID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0UGFyYW1zKSwgY29uZmlnKTtcclxuICAgICAgICAgICAgc2hhcGUgPSBjb25maWcuc2hhcGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKG9iamVjdC5zaGFwZSkge1xyXG4gICAgICAgICAgICBzaGFwZSA9IG9iamVjdC5zaGFwZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQWRkIGFsbCBkZWZhdWx0IHBhcmFtcyBpZiB1bmRlZmluZWRcclxuICAgICAgICBPYmplY3Qua2V5cyhwYXJhbXMpLmZvckVhY2goa2V5ID0+IHtcclxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHBhcmFtc1trZXldID09PSAndW5kZWZpbmVkJyAmJiBkZWZhdWx0UGFyYW1zW2tleV0pIHtcclxuICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgICAgIHBhcmFtc1trZXldID0gZGVmYXVsdFBhcmFtc1trZXldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gYXV0byBhZGp1c3QgdGhlIGNlbnRlciBmb3IgY3VzdG9tIHNoYXBlc1xyXG4gICAgICAgIGlmIChhdXRvQ2VudGVyKVxyXG4gICAgICAgICAgICBvYmplY3QuZ2VvbWV0cnkuY2VudGVyKCk7XHJcbiAgICAgICAgLy8gYWRqdXN0IHRoZSBjeWxpbmRlciByYWRpdXMgZm9yIGl0cyBwaHlzY2lzIGJvZHlcclxuICAgICAgICBpZiAoc2hhcGUgPT09ICdjeWxpbmRlcicpXHJcbiAgICAgICAgICAgIHBhcmFtcy5yYWRpdXMgPSBjb25maWcucmFkaXVzIHx8IHBhcmFtcy5yYWRpdXNUb3A7XHJcbiAgICAgICAgLy8gc29tZSBhbGlhc2VzXHJcbiAgICAgICAgaWYgKHNoYXBlID09PSAnZXh0cnVkZScpXHJcbiAgICAgICAgICAgIHNoYXBlID0gJ2hhY2QnO1xyXG4gICAgICAgIGlmIChzaGFwZSA9PT0gJ21lc2gnIHx8IHNoYXBlID09PSAnY29udmV4JylcclxuICAgICAgICAgICAgc2hhcGUgPSAnY29udmV4TWVzaCc7XHJcbiAgICAgICAgaWYgKHNoYXBlID09PSAnY29uY2F2ZScpXHJcbiAgICAgICAgICAgIHNoYXBlID0gJ2NvbmNhdmVNZXNoJztcclxuICAgICAgICAvLyBpZiB3ZSBoYXZlIG5vdCBmb3VuZCBhIHNoYXBlIHVudGlsIGhlcmUsIHdlIGZhbGxiYWNrIHRvICdib3gnXHJcbiAgICAgICAgaWYgKHNoYXBlID09PSAndW5rbm93bicpIHtcclxuICAgICAgICAgICAgbG9nZ2VyXzEuZGVmYXVsdChgU2hhcGUgZm9yICR7b2JqZWN0ID09PSBudWxsIHx8IG9iamVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogb2JqZWN0Lm5hbWV9IG5vdCByZWNvZ25pemVkISBXaWxsIGZhbGxiYWNrIHRvIGJveC5gKTtcclxuICAgICAgICAgICAgc2hhcGUgPSAnYm94JztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHsgc2hhcGUsIHBhcmFtcywgb2JqZWN0IH07XHJcbiAgICB9XHJcbiAgICBjcmVhdGVDb2xsaXNpb25TaGFwZShzaGFwZSwgcGFyYW1zLCBvYmplY3QpIHtcclxuICAgICAgICBjb25zdCBxdWF0ID0gKG9iamVjdCA9PT0gbnVsbCB8fCBvYmplY3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9iamVjdC5xdWF0ZXJuaW9uKSA/IG9iamVjdCA9PT0gbnVsbCB8fCBvYmplY3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9iamVjdC5xdWF0ZXJuaW9uIDogbmV3IGluZGV4XzEuUXVhdGVybmlvbigwLCAwLCAwLCAxKTtcclxuICAgICAgICBjb25zdCB7IGF4aXMgPSAneScgfSA9IHBhcmFtcztcclxuICAgICAgICBjb25zdCBidEhhbGZFeHRlbnRzID0gbmV3IEFtbW8uYnRWZWN0b3IzKCk7XHJcbiAgICAgICAgLy8gdHJhbnNmb3JtIGdlb21ldHJ5IHRvIGJ1ZmZlckdlb21ldHJ5IChiZWNhdXNlIHRocmVlLXRvLWFtbW8gd29ya3Mgb25seSB3aXRoIGJ1ZmZlckdlb21ldHJ5KVxyXG4gICAgICAgIGNvbnN0IGdlb21ldHJ5ID0gb2JqZWN0ID09PSBudWxsIHx8IG9iamVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogb2JqZWN0Lmdlb21ldHJ5O1xyXG4gICAgICAgIGlmIChvYmplY3QgJiYgKGdlb21ldHJ5ID09PSBudWxsIHx8IGdlb21ldHJ5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBnZW9tZXRyeS5pc0dlb21ldHJ5KSkge1xyXG4gICAgICAgICAgICBvYmplY3QuZ2VvbWV0cnkgPSBuZXcgaW5kZXhfMS5CdWZmZXJHZW9tZXRyeSgpLmZyb21HZW9tZXRyeShnZW9tZXRyeSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIHByZXBhcmUgZGF0YSB0byBwYXNzIHRvIHRocmVlLXRvLWFtbW8uanNcclxuICAgICAgICBjb25zdCBleHRyYWN0RGF0YSA9IChvYmplY3QpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbWF0cml4V29ybGQgPSBuZXcgaW5kZXhfMS5NYXRyaXg0KCkuZWxlbWVudHM7XHJcbiAgICAgICAgICAgIGNvbnN0IHZlcnRpY2VzID0gW107XHJcbiAgICAgICAgICAgIGNvbnN0IG1hdHJpY2VzID0gW107XHJcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ZXMgPSBbXTtcclxuICAgICAgICAgICAgdGhyZWVfdG9fYW1tb18xLml0ZXJhdGVHZW9tZXRyaWVzKG9iamVjdCwge30sICh2ZXJ0ZXhBcnJheSwgbWF0cml4QXJyYXksIGluZGV4QXJyYXkpID0+IHtcclxuICAgICAgICAgICAgICAgIHZlcnRpY2VzLnB1c2godmVydGV4QXJyYXkpO1xyXG4gICAgICAgICAgICAgICAgbWF0cmljZXMucHVzaChtYXRyaXhBcnJheSk7XHJcbiAgICAgICAgICAgICAgICBpbmRleGVzLnB1c2goaW5kZXhBcnJheSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4geyB2ZXJ0aWNlcywgbWF0cmljZXMsIGluZGV4ZXMsIG1hdHJpeFdvcmxkIH07XHJcbiAgICAgICAgfTtcclxuICAgICAgICBsZXQgZCA9IHt9O1xyXG4gICAgICAgIC8vIGV4dHJhY3QgZGF0YSBmb3IgY29tcGxleCBzaGFwZXMgZ2VuZXJhdGVkIHdpdGggdGhyZWUtdG8tYW1tby5qc1xyXG4gICAgICAgIGlmICh0aGlzLmNvbXBsZXhTaGFwZXMuaW5kZXhPZihzaGFwZSkgPiAwKVxyXG4gICAgICAgICAgICBkID0gZXh0cmFjdERhdGEob2JqZWN0KTtcclxuICAgICAgICBsZXQgY29sbGlzaW9uU2hhcGU7XHJcbiAgICAgICAgc3dpdGNoIChzaGFwZSkge1xyXG4gICAgICAgICAgICBjYXNlICdib3gnOlxyXG4gICAgICAgICAgICAgICAgYnRIYWxmRXh0ZW50cy5zZXRWYWx1ZShwYXJhbXMud2lkdGggLyAyLCBwYXJhbXMuaGVpZ2h0IC8gMiwgcGFyYW1zLmRlcHRoIC8gMik7XHJcbiAgICAgICAgICAgICAgICBjb2xsaXNpb25TaGFwZSA9IG5ldyBBbW1vLmJ0Qm94U2hhcGUoYnRIYWxmRXh0ZW50cyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnc3BoZXJlJzpcclxuICAgICAgICAgICAgICAgIGNvbGxpc2lvblNoYXBlID0gbmV3IEFtbW8uYnRTcGhlcmVTaGFwZShwYXJhbXMucmFkaXVzKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdjeWxpbmRlcic6XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGF4aXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlICd5JzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnRIYWxmRXh0ZW50cy5zZXRWYWx1ZShwYXJhbXMucmFkaXVzLCBwYXJhbXMuaGVpZ2h0IC8gMiwgcGFyYW1zLnJhZGl1cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxpc2lvblNoYXBlID0gbmV3IEFtbW8uYnRDeWxpbmRlclNoYXBlKGJ0SGFsZkV4dGVudHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlICd4JzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnRIYWxmRXh0ZW50cy5zZXRWYWx1ZShwYXJhbXMuaGVpZ2h0IC8gMiwgcGFyYW1zLnJhZGl1cywgcGFyYW1zLnJhZGl1cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxpc2lvblNoYXBlID0gbmV3IEFtbW8uYnRDeWxpbmRlclNoYXBlWChidEhhbGZFeHRlbnRzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAneic6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ0SGFsZkV4dGVudHMuc2V0VmFsdWUocGFyYW1zLnJhZGl1cywgcGFyYW1zLnJhZGl1cywgcGFyYW1zLmhlaWdodCAvIDIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xsaXNpb25TaGFwZSA9IG5ldyBBbW1vLmJ0Q3lsaW5kZXJTaGFwZVooYnRIYWxmRXh0ZW50cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ2NvbmUnOlxyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChheGlzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAneSc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxpc2lvblNoYXBlID0gbmV3IEFtbW8uYnRDb25lU2hhcGUocGFyYW1zLnJhZGl1cywgcGFyYW1zLmhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3gnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xsaXNpb25TaGFwZSA9IG5ldyBBbW1vLmJ0Q29uZVNoYXBlWChwYXJhbXMucmFkaXVzLCBwYXJhbXMuaGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAneic6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxpc2lvblNoYXBlID0gbmV3IEFtbW8uYnRDb25lU2hhcGVaKHBhcmFtcy5yYWRpdXMsIHBhcmFtcy5oZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdjYXBzdWxlJzpcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoYXhpcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3knOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xsaXNpb25TaGFwZSA9IG5ldyBBbW1vLmJ0Q2Fwc3VsZVNoYXBlKHBhcmFtcy5yYWRpdXMsIHBhcmFtcy5oZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlICd4JzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sbGlzaW9uU2hhcGUgPSBuZXcgQW1tby5idENhcHN1bGVTaGFwZVgocGFyYW1zLnJhZGl1cywgcGFyYW1zLmhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3onOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xsaXNpb25TaGFwZSA9IG5ldyBBbW1vLmJ0Q2Fwc3VsZVNoYXBlWihwYXJhbXMucmFkaXVzLCBwYXJhbXMuaGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAndG9ydXMnOlxyXG4gICAgICAgICAgICAgICAgY29sbGlzaW9uU2hhcGUgPSB0b3J1c1NoYXBlXzEuY3JlYXRlVG9ydXNTaGFwZShwYXJhbXMsIHF1YXQpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3BsYW5lJzpcclxuICAgICAgICAgICAgICAgIC8vIHVzZXMgYSB0cmlNZXNoU2hhcGUgZm9yIHRoZSBwbGFuZVxyXG4gICAgICAgICAgICAgICAgY29sbGlzaW9uU2hhcGUgPSB0aHJlZV90b19hbW1vXzEuY3JlYXRlVHJpTWVzaFNoYXBlKGQudmVydGljZXMsIGQubWF0cmljZXMsIGQuaW5kZXhlcywgZC5tYXRyaXhXb3JsZCwgT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBwYXJhbXMpLCB7IGNvbmNhdmU6IGZhbHNlIH0pKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdodWxsJzpcclxuICAgICAgICAgICAgICAgIGNvbGxpc2lvblNoYXBlID0gdGhyZWVfdG9fYW1tb18xLmNyZWF0ZUh1bGxTaGFwZShkLnZlcnRpY2VzLCBkLm1hdHJpY2VzLCBkLm1hdHJpeFdvcmxkLCBwYXJhbXMpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ2hhY2QnOlxyXG4gICAgICAgICAgICAgICAgY29sbGlzaW9uU2hhcGUgPSB0aHJlZV90b19hbW1vXzEuY3JlYXRlSEFDRFNoYXBlcyhkLnZlcnRpY2VzLCBkLm1hdHJpY2VzLCBkLmluZGV4ZXMsIGQubWF0cml4V29ybGQsIHBhcmFtcyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAndmhhY2QnOlxyXG4gICAgICAgICAgICAgICAgY29sbGlzaW9uU2hhcGUgPSB0aHJlZV90b19hbW1vXzEuY3JlYXRlVkhBQ0RTaGFwZXMoZC52ZXJ0aWNlcywgZC5tYXRyaWNlcywgZC5pbmRleGVzLCBkLm1hdHJpeFdvcmxkLCBwYXJhbXMpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ2NvbnZleE1lc2gnOlxyXG4gICAgICAgICAgICAgICAgY29sbGlzaW9uU2hhcGUgPSB0aHJlZV90b19hbW1vXzEuY3JlYXRlVHJpTWVzaFNoYXBlKGQudmVydGljZXMsIGQubWF0cmljZXMsIGQuaW5kZXhlcywgZC5tYXRyaXhXb3JsZCwgT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBwYXJhbXMpLCB7IGNvbmNhdmU6IGZhbHNlIH0pKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdjb25jYXZlTWVzaCc6XHJcbiAgICAgICAgICAgICAgICBjb2xsaXNpb25TaGFwZSA9IHRocmVlX3RvX2FtbW9fMS5jcmVhdGVUcmlNZXNoU2hhcGUoZC52ZXJ0aWNlcywgZC5tYXRyaWNlcywgZC5pbmRleGVzLCBkLm1hdHJpeFdvcmxkLCBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHBhcmFtcyksIHsgY29uY2F2ZTogdHJ1ZSB9KSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgQW1tby5kZXN0cm95KGJ0SGFsZkV4dGVudHMpO1xyXG4gICAgICAgIC8vIGlmIHRoZXJlIGlzIGEgeCwgeSBvciB6LCB0YWtlIGlzIGFzIHRlbXBvcmFyeSBvZmZzZXQgcGFyYW1ldGVyXHJcbiAgICAgICAgY29uc3QgeyB4LCB5LCB6IH0gPSBwYXJhbXM7XHJcbiAgICAgICAgaWYgKHggfHwgeSB8fCB6KSB7XHJcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgY29sbGlzaW9uU2hhcGUub2Zmc2V0ID0geyB4OiB4IHx8IDAsIHk6IHkgfHwgMCwgejogeiB8fCAwIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGluIHNvbWUgY2FzZXMsIGxpa2UgaGFjZCwgaXQgd2lsbCBiZSBhbiBhcnJheSBvZiBzaGFwZXNcclxuICAgICAgICAvLyBzbyB3ZSBtZXJnZSB0aGVtXHJcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoY29sbGlzaW9uU2hhcGUpKVxyXG4gICAgICAgICAgICBjb2xsaXNpb25TaGFwZSA9IHRoaXMubWVyZ2VDb2xsaXNpb25TaGFwZXNUb0NvbXBvdW5kU2hhcGUoY29sbGlzaW9uU2hhcGUpO1xyXG4gICAgICAgIHJldHVybiBjb2xsaXNpb25TaGFwZTtcclxuICAgIH1cclxuICAgIG1lcmdlQ29sbGlzaW9uU2hhcGVzVG9Db21wb3VuZFNoYXBlKGNvbGxpc2lvblNoYXBlcykge1xyXG4gICAgICAgIGNvbnN0IGNvbXBvdW5kU2hhcGUgPSBuZXcgQW1tby5idENvbXBvdW5kU2hhcGUoKTtcclxuICAgICAgICBjb2xsaXNpb25TaGFwZXMuZm9yRWFjaChzaGFwZSA9PiB7XHJcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgY29uc3QgeyBvZmZzZXQgfSA9IHNoYXBlOyAvLyBvZmZzZXQgaXMgYSBjdXN0b20gcGFyYW1ldGVyXHJcbiAgICAgICAgICAgIGNvbnN0IHRyYW5zZm9ybSA9IG5ldyBBbW1vLmJ0VHJhbnNmb3JtKCk7XHJcbiAgICAgICAgICAgIHRyYW5zZm9ybS5zZXRJZGVudGl0eSgpO1xyXG4gICAgICAgICAgICBpZiAob2Zmc2V0KVxyXG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtLmdldE9yaWdpbigpLnNldFZhbHVlKG9mZnNldC54IHx8IDAsIG9mZnNldC55IHx8IDAsIG9mZnNldC56IHx8IDApO1xyXG4gICAgICAgICAgICBjb21wb3VuZFNoYXBlLmFkZENoaWxkU2hhcGUodHJhbnNmb3JtLCBzaGFwZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGNvbXBvdW5kU2hhcGU7XHJcbiAgICB9XHJcbiAgICBhZGRFeGlzdGluZyhvYmplY3QsIGNvbmZpZyA9IHt9KSB7XHJcbiAgICAgICAgY29uc3QgeyBoYXNCb2R5IH0gPSBvYmplY3Q7XHJcbiAgICAgICAgaWYgKGhhc0JvZHkpIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKGBbRW5hYmxlM2RdOiBPYmplY3QgXCIke29iamVjdC5uYW1lfVwiIGFscmVhZHkgaGFzIGEgcGh5c2ljYWwgYm9keSFgKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBwb3MgPSBuZXcgaW5kZXhfMS5WZWN0b3IzKCk7XHJcbiAgICAgICAgY29uc3QgcXVhdCA9IG5ldyBpbmRleF8xLlF1YXRlcm5pb24oKTtcclxuICAgICAgICBjb25zdCBzY2FsZSA9IG5ldyBpbmRleF8xLlZlY3RvcjMoKTtcclxuICAgICAgICBvYmplY3QuZ2V0V29ybGRQb3NpdGlvbihwb3MpO1xyXG4gICAgICAgIG9iamVjdC5nZXRXb3JsZFF1YXRlcm5pb24ocXVhdCk7XHJcbiAgICAgICAgb2JqZWN0LmdldFdvcmxkU2NhbGUoc2NhbGUpO1xyXG4gICAgICAgIGNvbnN0IGlzU3RhdGljT2JqZWN0ID0gKGNvbmZpZy5jb2xsaXNpb25GbGFncyB8fCAwKS50b1N0cmluZygyKS5zbGljZSgtMSkgPT09ICcxJztcclxuICAgICAgICBjb25zdCBpc0tpbmVtYXRpY09iamVjdCA9IChjb25maWcuY29sbGlzaW9uRmxhZ3MgfHwgMCkudG9TdHJpbmcoMikuc2xpY2UoLTIsIC0xKSA9PT0gJzEnO1xyXG4gICAgICAgIGNvbnN0IHsgc2hhcGUgPSAndW5rbm93bicsIGNvbXBvdW5kID0gW10sIG1hc3MgPSBpc1N0YXRpY09iamVjdCB8fCBpc0tpbmVtYXRpY09iamVjdCA/IDAgOiAxLCAvLyBzZXQgZGVmYXVsdCBtYXNzIG9mIDAgZm9yIHN0YXRpYyBvYmplY3RzLCBhbmQgMSBmb3IgYWxsIG90aGVyIG9iamVjdHNcclxuICAgICAgICBjb2xsaXNpb25GbGFncyA9IDAsIGNvbGxpc2lvbkdyb3VwID0gMSwgY29sbGlzaW9uTWFzayA9IC0xLCBvZmZzZXQgPSB1bmRlZmluZWQsIGJyZWFrYWJsZSA9IGZhbHNlLCBhZGRDaGlsZHJlbiA9IHRydWUsIG1hcmdpbiA9IDAuMDEsIGlnbm9yZVNjYWxlID0gZmFsc2UgfSA9IGNvbmZpZztcclxuICAgICAgICBpZiAoaWdub3JlU2NhbGUpXHJcbiAgICAgICAgICAgIHNjYWxlLnNldCgxLCAxLCAxKTtcclxuICAgICAgICBpZiAoY29tcG91bmQubGVuZ3RoID49IDEpIHtcclxuICAgICAgICAgICAgLy8gaWYgd2Ugd2FudCBhIGN1c3RvbSBjb21wb3VuZCBzaGFwZSwgd2Ugc2ltcGx5IGRvXHJcbiAgICAgICAgICAgIGNvbnN0IGNvbGxpc2lvblNoYXBlcyA9IGNvbXBvdW5kLm1hcCgocykgPT4gdGhpcy5jcmVhdGVDb2xsaXNpb25TaGFwZShzLnNoYXBlLCBzKSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbXBvdW5kU2hhcGUgPSB0aGlzLm1lcmdlQ29sbGlzaW9uU2hhcGVzVG9Db21wb3VuZFNoYXBlKGNvbGxpc2lvblNoYXBlcyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVHJhbnNmb3JtID0gdGhpcy5maW5pc2hDb2xsaXNpb25TaGFwZShjb21wb3VuZFNoYXBlLCBwb3MsIHF1YXQsIHNjYWxlLCBtYXJnaW4pO1xyXG4gICAgICAgICAgICBjb25zdCByaWdpZEJvZHkgPSB0aGlzLmNvbGxpc2lvblNoYXBlVG9SaWdpZEJvZHkoY29tcG91bmRTaGFwZSwgbG9jYWxUcmFuc2Zvcm0sIG1hc3MsIGlzS2luZW1hdGljT2JqZWN0KTtcclxuICAgICAgICAgICAgdGhpcy5hZGRSaWdpZEJvZHlUb1dvcmxkKG9iamVjdCwgcmlnaWRCb2R5LCBjb2xsaXNpb25GbGFncywgY29sbGlzaW9uR3JvdXAsIGNvbGxpc2lvbk1hc2ssIGJyZWFrYWJsZSwgb2Zmc2V0KTtcclxuICAgICAgICAgICAgb2JqZWN0LmJvZHkuaWdub3JlU2NhbGUgPSBpZ25vcmVTY2FsZTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBjb2xsaXNpb25TaGFwZXMgPSBbXTtcclxuICAgICAgICAvLyBpZiBvYmplY3QgaXMgYSBUSFJFRS5Hcm91cCwgb2JqZWN0IGRvZXMgbm90IGhhdmUgYSBtZXNoXHJcbiAgICAgICAgaWYgKHNoYXBlICE9PSAndW5rbm93bicgfHwgb2JqZWN0LmlzTWVzaCkge1xyXG4gICAgICAgICAgICBjb25zdCBwID0gdGhpcy5wcmVwYXJlVGhyZWVPYmplY3RGb3JDb2xsaXNpb25TaGFwZShvYmplY3QsIGNvbmZpZyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNzID0gdGhpcy5jcmVhdGVDb2xsaXNpb25TaGFwZShwLnNoYXBlLCBwLnBhcmFtcywgcC5vYmplY3QpO1xyXG4gICAgICAgICAgICBjb2xsaXNpb25TaGFwZXMucHVzaChjcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGNoZWNrIGlmIHRoZSBvYmplY3QgaGFzIGNoaWxkcmVuXHJcbiAgICAgICAgaWYgKHNoYXBlID09PSAndW5rbm93bicgJiYgYWRkQ2hpbGRyZW4gJiYgb2JqZWN0LmNoaWxkcmVuLmxlbmd0aCA+PSAxKSB7XHJcbiAgICAgICAgICAgIG9iamVjdC5jaGlsZHJlbi5mb3JFYWNoKChjaGlsZCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNoaWxkLmlzTWVzaCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHAgPSB0aGlzLnByZXBhcmVUaHJlZU9iamVjdEZvckNvbGxpc2lvblNoYXBlKGNoaWxkKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjcyA9IHRoaXMuY3JlYXRlQ29sbGlzaW9uU2hhcGUocC5zaGFwZSwgcC5wYXJhbXMsIHAub2JqZWN0KTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgICAgICAgICAgY3Mub2Zmc2V0ID0gY2hpbGQucG9zaXRpb24uY2xvbmUoKTsgLy8gdGhpcyBpcyByZWxhdGl2ZSBwb3NpdGlvbiB0byBpdHMgcGFyZW50XHJcbiAgICAgICAgICAgICAgICAgICAgY29sbGlzaW9uU2hhcGVzLnB1c2goY3MpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gRkFMTEJBQ0s6IGlmIHdlIGRvIG5vdCBoYXZlIGFueSBjb2xsaXNpb25TaGFwZXMgeWV0LCBhZGQgYSBzaW1wbGUgYm94IGFzIGEgZmFsbGJhY2tcclxuICAgICAgICBpZiAoY29sbGlzaW9uU2hhcGVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICBjb25zdCBwID0gdGhpcy5wcmVwYXJlVGhyZWVPYmplY3RGb3JDb2xsaXNpb25TaGFwZShvYmplY3QsIGNvbmZpZyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNzID0gdGhpcy5jcmVhdGVDb2xsaXNpb25TaGFwZShwLnNoYXBlLCBwLnBhcmFtcywgcC5vYmplY3QpO1xyXG4gICAgICAgICAgICBjb2xsaXNpb25TaGFwZXMucHVzaChjcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGNvbGxpc2lvblNoYXBlID0gY29sbGlzaW9uU2hhcGVzLmxlbmd0aCA9PT0gMSA/IGNvbGxpc2lvblNoYXBlc1swXSA6IHRoaXMubWVyZ2VDb2xsaXNpb25TaGFwZXNUb0NvbXBvdW5kU2hhcGUoY29sbGlzaW9uU2hhcGVzKTtcclxuICAgICAgICAvLyBhZGQgcmlnaWQgYm9keVxyXG4gICAgICAgIC8vIG9iamVjdC5wb3NpdGlvbi5jb3B5KHBvcylcclxuICAgICAgICAvLyBvYmplY3QucXVhdGVybmlvbi5jb3B5KHF1YXQpXHJcbiAgICAgICAgY29uc3QgbG9jYWxUcmFuc2Zvcm0gPSB0aGlzLmZpbmlzaENvbGxpc2lvblNoYXBlKGNvbGxpc2lvblNoYXBlLCBwb3MsIHF1YXQsIHNjYWxlLCBtYXJnaW4pO1xyXG4gICAgICAgIGNvbnN0IHJpZ2lkQm9keSA9IHRoaXMuY29sbGlzaW9uU2hhcGVUb1JpZ2lkQm9keShjb2xsaXNpb25TaGFwZSwgbG9jYWxUcmFuc2Zvcm0sIG1hc3MsIGlzS2luZW1hdGljT2JqZWN0KTtcclxuICAgICAgICB0aGlzLmFkZFJpZ2lkQm9keVRvV29ybGQob2JqZWN0LCByaWdpZEJvZHksIGNvbGxpc2lvbkZsYWdzLCBjb2xsaXNpb25Hcm91cCwgY29sbGlzaW9uTWFzaywgYnJlYWthYmxlLCBvZmZzZXQpO1xyXG4gICAgICAgIG9iamVjdC5ib2R5Lmlnbm9yZVNjYWxlID0gaWdub3JlU2NhbGU7XHJcbiAgICB9XHJcbiAgICBhZGRSaWdpZEJvZHlUb1dvcmxkKG9iamVjdCwgcmlnaWRCb2R5LCBjb2xsaXNpb25GbGFncywgY29sbGlzaW9uR3JvdXAsIGNvbGxpc2lvbk1hc2ssIGJyZWFrYWJsZSwgb2Zmc2V0KSB7XHJcbiAgICAgICAgdGhpcy5yaWdpZEJvZGllcy5wdXNoKG9iamVjdCk7XHJcbiAgICAgICAgdGhpcy5waHlzaWNzV29ybGQuYWRkUmlnaWRCb2R5KHJpZ2lkQm9keSwgY29sbGlzaW9uR3JvdXAsIGNvbGxpc2lvbk1hc2spO1xyXG4gICAgICAgIGNvbnN0IHB0ciA9IE9iamVjdC52YWx1ZXMocmlnaWRCb2R5KVswXTtcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgcmlnaWRCb2R5Lm5hbWUgPSBvYmplY3QubmFtZTtcclxuICAgICAgICBvYmplY3QuYm9keSA9IG5ldyBwaHlzaWNzQm9keV8xLmRlZmF1bHQodGhpcywgcmlnaWRCb2R5KTtcclxuICAgICAgICBvYmplY3QuaGFzQm9keSA9IHRydWU7XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIG9iamVjdC5wdHIgPSBwdHI7XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIHJpZ2lkQm9keS50aHJlZU9iamVjdCA9IG9iamVjdDtcclxuICAgICAgICBpZiAoYnJlYWthYmxlKVxyXG4gICAgICAgICAgICBvYmplY3QuYm9keS5icmVha2FibGUgPSB0cnVlO1xyXG4gICAgICAgIGlmIChvZmZzZXQpXHJcbiAgICAgICAgICAgIG9iamVjdC5ib2R5Lm9mZnNldCA9IE9iamVjdC5hc3NpZ24oeyB4OiAwLCB5OiAwLCB6OiAwIH0sIG9mZnNldCk7XHJcbiAgICAgICAgb2JqZWN0LmJvZHkuc2V0Q29sbGlzaW9uRmxhZ3MoY29sbGlzaW9uRmxhZ3MpO1xyXG4gICAgfVxyXG4gICAgZmluaXNoQ29sbGlzaW9uU2hhcGUoY29sbGlzaW9uU2hhcGUsIHBvcywgcXVhdCwgc2NhbGUsIG1hcmdpbikge1xyXG4gICAgICAgIGNvbGxpc2lvblNoYXBlLnNldE1hcmdpbihtYXJnaW4pO1xyXG4gICAgICAgIGNvbnN0IHJvdGF0aW9uID0gbmV3IEFtbW8uYnRRdWF0ZXJuaW9uKDAsIDAsIDAsIDEpO1xyXG4gICAgICAgIHJvdGF0aW9uLnNldFZhbHVlKHF1YXQueCwgcXVhdC55LCBxdWF0LnosIHF1YXQudyk7XHJcbiAgICAgICAgY29uc3QgbG9jYWxUcmFuc2Zvcm0gPSBuZXcgQW1tby5idFRyYW5zZm9ybSgpO1xyXG4gICAgICAgIGxvY2FsVHJhbnNmb3JtLnNldElkZW50aXR5KCk7XHJcbiAgICAgICAgbG9jYWxUcmFuc2Zvcm0uZ2V0T3JpZ2luKCkuc2V0VmFsdWUocG9zLngsIHBvcy55LCBwb3Mueik7XHJcbiAgICAgICAgbG9jYWxUcmFuc2Zvcm0uc2V0Um90YXRpb24ocm90YXRpb24pO1xyXG4gICAgICAgIEFtbW8uZGVzdHJveShyb3RhdGlvbik7XHJcbiAgICAgICAgY29uc3QgbG9jYWxTY2FsZSA9IG5ldyBBbW1vLmJ0VmVjdG9yMyhzY2FsZS54LCBzY2FsZS55LCBzY2FsZS56KTtcclxuICAgICAgICBjb2xsaXNpb25TaGFwZS5zZXRMb2NhbFNjYWxpbmcobG9jYWxTY2FsZSk7XHJcbiAgICAgICAgQW1tby5kZXN0cm95KGxvY2FsU2NhbGUpO1xyXG4gICAgICAgIHJldHVybiBsb2NhbFRyYW5zZm9ybTtcclxuICAgIH1cclxuICAgIGNvbGxpc2lvblNoYXBlVG9SaWdpZEJvZHkoY29sbGlzaW9uU2hhcGUsIGxvY2FsVHJhbnNmb3JtLCBtYXNzLCBkaXNhYmxlRGVhY3RpdmF0aW9uKSB7XHJcbiAgICAgICAgY29uc3QgbW90aW9uU3RhdGUgPSBuZXcgQW1tby5idERlZmF1bHRNb3Rpb25TdGF0ZShsb2NhbFRyYW5zZm9ybSk7XHJcbiAgICAgICAgY29uc3QgbG9jYWxJbmVydGlhID0gbmV3IEFtbW8uYnRWZWN0b3IzKDAsIDAsIDApO1xyXG4gICAgICAgIGlmIChtYXNzID4gMClcclxuICAgICAgICAgICAgY29sbGlzaW9uU2hhcGUuY2FsY3VsYXRlTG9jYWxJbmVydGlhKG1hc3MsIGxvY2FsSW5lcnRpYSk7XHJcbiAgICAgICAgY29uc3QgcmJJbmZvID0gbmV3IEFtbW8uYnRSaWdpZEJvZHlDb25zdHJ1Y3Rpb25JbmZvKG1hc3MsIG1vdGlvblN0YXRlLCBjb2xsaXNpb25TaGFwZSwgbG9jYWxJbmVydGlhKTtcclxuICAgICAgICBjb25zdCByaWdpZEJvZHkgPSBuZXcgQW1tby5idFJpZ2lkQm9keShyYkluZm8pO1xyXG4gICAgICAgIGlmIChtYXNzID4gMCB8fCBkaXNhYmxlRGVhY3RpdmF0aW9uKVxyXG4gICAgICAgICAgICByaWdpZEJvZHkuc2V0QWN0aXZhdGlvblN0YXRlKDQpOyAvLyBEaXNhYmxlIGRlYWN0aXZhdGlvblxyXG4gICAgICAgIHJldHVybiByaWdpZEJvZHk7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0cy5BbW1vUGh5c2ljcyA9IEFtbW9QaHlzaWNzO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1waHlzaWNzLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xyXG4vKipcclxuICogQGF1dGhvciAgICAgICBZYW5uaWNrIERldWJlbCAoaHR0cHM6Ly9naXRodWIuY29tL3lhbmRldSlcclxuICogQGNvcHlyaWdodCAgICBDb3B5cmlnaHQgKGMpIDIwMjAgWWFubmljayBEZXViZWw7IFByb2plY3QgVXJsOiBodHRwczovL2dpdGh1Yi5jb20vZW5hYmxlM2QvZW5hYmxlM2RcclxuICogQGxpY2Vuc2UgICAgICB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2VuYWJsZTNkL2VuYWJsZTNkL2Jsb2IvbWFzdGVyL0xJQ0VOU0V8R05VIEdQTHYzfVxyXG4gKi9cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5jbGFzcyBBbGxIaXRzUmF5UmVzdWx0Q2FsbGJhY2sge1xyXG4gICAgY29uc3RydWN0b3IocGh5c2ljcykge1xyXG4gICAgICAgIHRoaXMucGh5c2ljcyA9IHBoeXNpY3M7XHJcbiAgICB9XHJcbiAgICBnZXRIaXRQb2ludHNXb3JsZCgpIHtcclxuICAgICAgICBjb25zdCBoID0gdGhpcy5fYnRSYXlDYWxsYmFjay5nZXRfbV9oaXRQb2ludFdvcmxkKCk7XHJcbiAgICAgICAgY29uc3QgcG9pbnRzID0gW107XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IGguc2l6ZSgpIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgICAgICAgY29uc3QgaGggPSBoLmF0KGkpO1xyXG4gICAgICAgICAgICBwb2ludHMucHVzaCh7IHg6IGhoLngoKSwgeTogaGgueSgpLCB6OiBoaC56KCkgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBwb2ludHM7XHJcbiAgICB9XHJcbiAgICAvLyBUT0RPOiBSZW1vdmUgdGhpcyBpbiBmdXR1cmUgdmVyc2lvbnMhXHJcbiAgICBnZXRIaXRQb2ludFdvcmxkKCkge1xyXG4gICAgICAgIGNvbnNvbGUud2FybignW2VuYWJsZTNkXSBVc2UgZ2V0SGl0UG9pbnRzV29ybGQoKSBpbnN0ZWFkIG9mIGdldEhpdFBvaW50V29ybGQoKSBmb3IgdGhlIEFsbEhpdHNSYXlDYXN0ZXIhJyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0SGl0UG9pbnRzV29ybGQoKTtcclxuICAgIH1cclxuICAgIGdldEhpdE5vcm1hbHNXb3JsZCgpIHtcclxuICAgICAgICBjb25zdCBoID0gdGhpcy5fYnRSYXlDYWxsYmFjay5nZXRfbV9oaXROb3JtYWxXb3JsZCgpO1xyXG4gICAgICAgIGNvbnN0IG5vcm1hbHMgPSBbXTtcclxuICAgICAgICBmb3IgKGxldCBpID0gaC5zaXplKCkgLSAxOyBpID49IDA7IGktLSkge1xyXG4gICAgICAgICAgICBjb25zdCBoaCA9IGguYXQoaSk7XHJcbiAgICAgICAgICAgIG5vcm1hbHMucHVzaCh7IHg6IGhoLngoKSwgeTogaGgueSgpLCB6OiBoaC56KCkgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBub3JtYWxzO1xyXG4gICAgfVxyXG4gICAgZ2V0Q29sbGlzaW9uT2JqZWN0cygpIHtcclxuICAgICAgICBjb25zdCB0aHJlZU9iamVjdHMgPSBbXTtcclxuICAgICAgICBjb25zdCBvYmplY3RzID0gdGhpcy5fYnRSYXlDYWxsYmFjay5nZXRfbV9jb2xsaXNpb25PYmplY3RzKCk7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IG9iamVjdHMuc2l6ZSgpIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICBjb25zdCByYiA9IEFtbW8uY2FzdE9iamVjdChvYmplY3RzLmF0KGkpLCBBbW1vLmJ0UmlnaWRCb2R5KTtcclxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICB0aHJlZU9iamVjdHMucHVzaChyYi50aHJlZU9iamVjdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aHJlZU9iamVjdHM7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0cy5kZWZhdWx0ID0gQWxsSGl0c1JheVJlc3VsdENhbGxiYWNrO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hbGxIaXRzUmF5UmVzdWx0Q2FsbGJhY2suanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbi8qKlxyXG4gKiBAYXV0aG9yICAgICAgIFlhbm5pY2sgRGV1YmVsIChodHRwczovL2dpdGh1Yi5jb20veWFuZGV1KVxyXG4gKiBAY29weXJpZ2h0ICAgIENvcHlyaWdodCAoYykgMjAyMCBZYW5uaWNrIERldWJlbDsgUHJvamVjdCBVcmw6IGh0dHBzOi8vZ2l0aHViLmNvbS9lbmFibGUzZC9lbmFibGUzZFxyXG4gKiBAbGljZW5zZSAgICAgIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZW5hYmxlM2QvZW5hYmxlM2QvYmxvYi9tYXN0ZXIvTElDRU5TRXxHTlUgR1BMdjN9XHJcbiAqL1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmNsYXNzIENsb3Nlc3RSYXlSZXN1bHRDYWxsYmFjayB7XHJcbiAgICBjb25zdHJ1Y3RvcihwaHlzaWNzKSB7XHJcbiAgICAgICAgdGhpcy5waHlzaWNzID0gcGh5c2ljcztcclxuICAgIH1cclxuICAgIGdldEhpdFBvaW50V29ybGQoKSB7XHJcbiAgICAgICAgY29uc3QgaCA9IHRoaXMuX2J0UmF5Q2FsbGJhY2suZ2V0X21faGl0UG9pbnRXb3JsZCgpO1xyXG4gICAgICAgIGNvbnN0IHBvaW50ID0geyB4OiBoLngoKSwgeTogaC55KCksIHo6IGgueigpIH07XHJcbiAgICAgICAgcmV0dXJuIHBvaW50O1xyXG4gICAgfVxyXG4gICAgZ2V0SGl0Tm9ybWFsV29ybGQoKSB7XHJcbiAgICAgICAgY29uc3QgaCA9IHRoaXMuX2J0UmF5Q2FsbGJhY2suZ2V0X21faGl0Tm9ybWFsV29ybGQoKTtcclxuICAgICAgICBjb25zdCBub3JtYWwgPSB7IHg6IGgueCgpLCB5OiBoLnkoKSwgejogaC56KCkgfTtcclxuICAgICAgICByZXR1cm4gbm9ybWFsO1xyXG4gICAgfVxyXG4gICAgZ2V0Q29sbGlzaW9uT2JqZWN0KCkge1xyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICBjb25zdCByYiA9IEFtbW8uY2FzdE9iamVjdCh0aGlzLl9idFJheUNhbGxiYWNrLmdldF9tX2NvbGxpc2lvbk9iamVjdCgpLCBBbW1vLmJ0UmlnaWRCb2R5KTtcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgcmV0dXJuIHJiLnRocmVlT2JqZWN0O1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydHMuZGVmYXVsdCA9IENsb3Nlc3RSYXlSZXN1bHRDYWxsYmFjaztcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2xvc2VzdFJheVJlc3VsdENhbGxiYWNrLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xyXG4vKipcclxuICogQGF1dGhvciAgICAgICBZYW5uaWNrIERldWJlbCAoaHR0cHM6Ly9naXRodWIuY29tL3lhbmRldSlcclxuICogQGNvcHlyaWdodCAgICBDb3B5cmlnaHQgKGMpIDIwMjAgWWFubmljayBEZXViZWw7IFByb2plY3QgVXJsOiBodHRwczovL2dpdGh1Yi5jb20vZW5hYmxlM2QvZW5hYmxlM2RcclxuICogQGxpY2Vuc2UgICAgICB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2VuYWJsZTNkL2VuYWJsZTNkL2Jsb2IvbWFzdGVyL0xJQ0VOU0V8R05VIEdQTHYzfVxyXG4gKi9cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLkFsbEhpdHNSYXljYXN0ZXIgPSBleHBvcnRzLkNsb3Nlc3RSYXljYXN0ZXIgPSB2b2lkIDA7XHJcbmNvbnN0IGFwcGx5TWl4aW5zXzEgPSByZXF1aXJlKFwiQGVuYWJsZTNkL2NvbW1vbi9kaXN0L2FwcGx5TWl4aW5zXCIpO1xyXG5jb25zdCBjbG9zZXN0UmF5UmVzdWx0Q2FsbGJhY2tfMSA9IHJlcXVpcmUoXCIuL2Nsb3Nlc3RSYXlSZXN1bHRDYWxsYmFja1wiKTtcclxuY29uc3QgYWxsSGl0c1JheVJlc3VsdENhbGxiYWNrXzEgPSByZXF1aXJlKFwiLi9hbGxIaXRzUmF5UmVzdWx0Q2FsbGJhY2tcIik7XHJcbmNsYXNzIFJheWNhc3RlciB7XHJcbiAgICBjb25zdHJ1Y3RvcihwaHlzaWNzKSB7XHJcbiAgICAgICAgdGhpcy5waHlzaWNzID0gcGh5c2ljcztcclxuICAgIH1cclxuICAgIHNldFJheUZyb21Xb3JsZCh4ID0gMCwgeSA9IDAsIHogPSAwKSB7XHJcbiAgICAgICAgdGhpcy5fYnRSYXlGcm9tLnNldFZhbHVlKHgsIHksIHopO1xyXG4gICAgfVxyXG4gICAgc2V0UmF5VG9Xb3JsZCh4ID0gMCwgeSA9IDAsIHogPSAwKSB7XHJcbiAgICAgICAgdGhpcy5fYnRSYXlUby5zZXRWYWx1ZSh4LCB5LCB6KTtcclxuICAgIH1cclxuICAgIGhhc0hpdCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fYnRSYXlDYWxsYmFjay5oYXNIaXQoKTtcclxuICAgIH1cclxuICAgIHJheVRlc3QoKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLl9idFJheUNhbGxiYWNrICE9PSAndW5kZWZpbmVkJylcclxuICAgICAgICAgICAgQW1tby5kZXN0cm95KHRoaXMuX2J0UmF5Q2FsbGJhY2spO1xyXG4gICAgICAgIHRoaXMuX2J0UmF5Q2FsbGJhY2sgPVxyXG4gICAgICAgICAgICB0aGlzLnR5cGUgPT09ICdjbG9zZXN0J1xyXG4gICAgICAgICAgICAgICAgPyBuZXcgQW1tby5DbG9zZXN0UmF5UmVzdWx0Q2FsbGJhY2sodGhpcy5fYnRSYXlGcm9tLCB0aGlzLl9idFJheVRvKVxyXG4gICAgICAgICAgICAgICAgOiBuZXcgQW1tby5BbGxIaXRzUmF5UmVzdWx0Q2FsbGJhY2sodGhpcy5fYnRSYXlGcm9tLCB0aGlzLl9idFJheVRvKTtcclxuICAgICAgICB0aGlzLnBoeXNpY3MucGh5c2ljc1dvcmxkLnJheVRlc3QodGhpcy5fYnRSYXlGcm9tLCB0aGlzLl9idFJheVRvLCB0aGlzLl9idFJheUNhbGxiYWNrKTtcclxuICAgIH1cclxuICAgIGRlc3Ryb3koKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLl9idFJheUZyb20gIT09ICd1bmRlZmluZWQnKVxyXG4gICAgICAgICAgICBBbW1vLmRlc3Ryb3kodGhpcy5fYnRSYXlGcm9tKTtcclxuICAgICAgICBpZiAodHlwZW9mIHRoaXMuX2J0UmF5VG8gIT09ICd1bmRlZmluZWQnKVxyXG4gICAgICAgICAgICBBbW1vLmRlc3Ryb3kodGhpcy5fYnRSYXlUbyk7XHJcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLl9idFJheUNhbGxiYWNrICE9PSAndW5kZWZpbmVkJylcclxuICAgICAgICAgICAgQW1tby5kZXN0cm95KHRoaXMuX2J0UmF5Q2FsbGJhY2spO1xyXG4gICAgfVxyXG59XHJcbmNsYXNzIENsb3Nlc3RSYXljYXN0ZXIge1xyXG4gICAgY29uc3RydWN0b3IocGh5c2ljcykge1xyXG4gICAgICAgIHRoaXMucGh5c2ljcyA9IHBoeXNpY3M7XHJcbiAgICAgICAgdGhpcy50eXBlID0gJ2Nsb3Nlc3QnO1xyXG4gICAgICAgIHRoaXMuX2J0UmF5RnJvbSA9IG5ldyBBbW1vLmJ0VmVjdG9yMygwLCAwLCAwKTtcclxuICAgICAgICB0aGlzLl9idFJheVRvID0gbmV3IEFtbW8uYnRWZWN0b3IzKDAsIDAsIDApO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydHMuQ2xvc2VzdFJheWNhc3RlciA9IENsb3Nlc3RSYXljYXN0ZXI7XHJcbmNsYXNzIEFsbEhpdHNSYXljYXN0ZXIge1xyXG4gICAgY29uc3RydWN0b3IocGh5c2ljcykge1xyXG4gICAgICAgIHRoaXMucGh5c2ljcyA9IHBoeXNpY3M7XHJcbiAgICAgICAgdGhpcy50eXBlID0gJ2FsbEhpdHMnO1xyXG4gICAgICAgIHRoaXMuX2J0UmF5RnJvbSA9IG5ldyBBbW1vLmJ0VmVjdG9yMygwLCAwLCAwKTtcclxuICAgICAgICB0aGlzLl9idFJheVRvID0gbmV3IEFtbW8uYnRWZWN0b3IzKDAsIDAsIDApO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydHMuQWxsSGl0c1JheWNhc3RlciA9IEFsbEhpdHNSYXljYXN0ZXI7XHJcbmFwcGx5TWl4aW5zXzEuZGVmYXVsdChDbG9zZXN0UmF5Y2FzdGVyLCBbUmF5Y2FzdGVyLCBjbG9zZXN0UmF5UmVzdWx0Q2FsbGJhY2tfMS5kZWZhdWx0XSk7XHJcbmFwcGx5TWl4aW5zXzEuZGVmYXVsdChBbGxIaXRzUmF5Y2FzdGVyLCBbUmF5Y2FzdGVyLCBhbGxIaXRzUmF5UmVzdWx0Q2FsbGJhY2tfMS5kZWZhdWx0XSk7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJheWNhc3Rlci5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcclxuLyoqXHJcbiAqIEBhdXRob3IgICAgICAgWWFubmljayBEZXViZWwgKGh0dHBzOi8vZ2l0aHViLmNvbS95YW5kZXUpXHJcbiAqIEBjb3B5cmlnaHQgICAgQ29weXJpZ2h0IChjKSAyMDIwIFlhbm5pY2sgRGV1YmVsOyBQcm9qZWN0IFVybDogaHR0cHM6Ly9naXRodWIuY29tL2VuYWJsZTNkL2VuYWJsZTNkXHJcbiAqIEBsaWNlbnNlICAgICAge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9lbmFibGUzZC9lbmFibGUzZC9ibG9iL21hc3Rlci9MSUNFTlNFfEdOVSBHUEx2M31cclxuICovXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuY2xhc3MgU2hhcGVzIHtcclxuICAgIGNvbnN0cnVjdG9yKGZhY3RvcnksIGFkZEV4aXN0aW5nKSB7XHJcbiAgICAgICAgdGhpcy5mYWN0b3J5ID0gZmFjdG9yeTtcclxuICAgICAgICB0aGlzLmFkZEV4aXN0aW5nID0gYWRkRXhpc3Rpbmc7XHJcbiAgICB9XHJcbiAgICBhZGRQbGFuZShwbGFuZUNvbmZpZyA9IHt9LCBtYXRlcmlhbENvbmZpZyA9IHt9KSB7XHJcbiAgICAgICAgY29uc3QgcGxhbmUgPSB0aGlzLmZhY3RvcnkuYWRkLnBsYW5lKHBsYW5lQ29uZmlnLCBtYXRlcmlhbENvbmZpZyk7XHJcbiAgICAgICAgdGhpcy5hZGRFeGlzdGluZyhwbGFuZSwgcGxhbmVDb25maWcpO1xyXG4gICAgICAgIHJldHVybiBwbGFuZTtcclxuICAgIH1cclxuICAgIGFkZFNwaGVyZShzcGhlcmVDb25maWcgPSB7fSwgbWF0ZXJpYWxDb25maWcgPSB7fSkge1xyXG4gICAgICAgIGNvbnN0IHNwaGVyZSA9IHRoaXMuZmFjdG9yeS5hZGQuc3BoZXJlKHNwaGVyZUNvbmZpZywgbWF0ZXJpYWxDb25maWcpO1xyXG4gICAgICAgIHRoaXMuYWRkRXhpc3Rpbmcoc3BoZXJlLCBzcGhlcmVDb25maWcpO1xyXG4gICAgICAgIHJldHVybiBzcGhlcmU7XHJcbiAgICB9XHJcbiAgICBhZGRCb3goYm94Q29uZmlnID0ge30sIG1hdGVyaWFsQ29uZmlnID0ge30pIHtcclxuICAgICAgICBjb25zdCBib3ggPSB0aGlzLmZhY3RvcnkuYWRkLmJveChib3hDb25maWcsIG1hdGVyaWFsQ29uZmlnKTtcclxuICAgICAgICB0aGlzLmFkZEV4aXN0aW5nKGJveCwgYm94Q29uZmlnKTtcclxuICAgICAgICByZXR1cm4gYm94O1xyXG4gICAgfVxyXG4gICAgYWRkR3JvdW5kKGdyb3VuZENvbmZpZywgbWF0ZXJpYWxDb25maWcgPSB7fSkge1xyXG4gICAgICAgIGNvbnN0IGdyb3VuZCA9IHRoaXMuZmFjdG9yeS5hZGQuZ3JvdW5kKGdyb3VuZENvbmZpZywgbWF0ZXJpYWxDb25maWcpO1xyXG4gICAgICAgIGNvbnN0IGNvbmZpZyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgZ3JvdW5kQ29uZmlnKSwgeyBtYXNzOiAwLCBjb2xsaXNpb25GbGFnczogMSB9KTtcclxuICAgICAgICB0aGlzLmFkZEV4aXN0aW5nKGdyb3VuZCwgY29uZmlnKTtcclxuICAgICAgICByZXR1cm4gZ3JvdW5kO1xyXG4gICAgfVxyXG4gICAgYWRkQ3lsaW5kZXIoY3lsaW5kZXJDb25maWcgPSB7fSwgbWF0ZXJpYWxDb25maWcgPSB7fSkge1xyXG4gICAgICAgIGNvbnN0IGN5bGluZGVyID0gdGhpcy5mYWN0b3J5LmFkZC5jeWxpbmRlcihjeWxpbmRlckNvbmZpZywgbWF0ZXJpYWxDb25maWcpO1xyXG4gICAgICAgIHRoaXMuYWRkRXhpc3RpbmcoY3lsaW5kZXIsIGN5bGluZGVyQ29uZmlnKTtcclxuICAgICAgICByZXR1cm4gY3lsaW5kZXI7XHJcbiAgICB9XHJcbiAgICBhZGRDb25lKGNvbmVDb25maWcgPSB7fSwgbWF0ZXJpYWxDb25maWcgPSB7fSkge1xyXG4gICAgICAgIGNvbnN0IGNvbmUgPSB0aGlzLmZhY3RvcnkuYWRkLmNvbmUoY29uZUNvbmZpZywgbWF0ZXJpYWxDb25maWcpO1xyXG4gICAgICAgIHRoaXMuYWRkRXhpc3RpbmcoY29uZSwgY29uZUNvbmZpZyk7XHJcbiAgICAgICAgcmV0dXJuIGNvbmU7XHJcbiAgICB9XHJcbiAgICBhZGRUb3J1cyh0b3J1c0NvbmZpZyA9IHt9LCBtYXRlcmlhbENvbmZpZyA9IHt9KSB7XHJcbiAgICAgICAgY29uc3QgdG9ydXMgPSB0aGlzLmZhY3RvcnkuYWRkLnRvcnVzKHRvcnVzQ29uZmlnLCBtYXRlcmlhbENvbmZpZyk7XHJcbiAgICAgICAgdGhpcy5hZGRFeGlzdGluZyh0b3J1cywgdG9ydXNDb25maWcpO1xyXG4gICAgICAgIHJldHVybiB0b3J1cztcclxuICAgIH1cclxuICAgIGFkZEV4dHJ1ZGUoZXh0cnVkZUNvbmZpZywgbWF0ZXJpYWxDb25maWcgPSB7fSkge1xyXG4gICAgICAgIGNvbnN0IG9iamVjdCA9IHRoaXMuZmFjdG9yeS5hZGQuZXh0cnVkZShleHRydWRlQ29uZmlnLCBtYXRlcmlhbENvbmZpZyk7XHJcbiAgICAgICAgb2JqZWN0LnRyYW5zbGF0ZVgoMSk7XHJcbiAgICAgICAgdGhpcy5hZGRFeGlzdGluZyhvYmplY3QpO1xyXG4gICAgICAgIHJldHVybiBvYmplY3Q7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0cy5kZWZhdWx0ID0gU2hhcGVzO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1zaGFwZXMuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbi8qKlxyXG4gKiBAYXV0aG9yICAgICAgIFlhbm5pY2sgRGV1YmVsIChodHRwczovL2dpdGh1Yi5jb20veWFuZGV1KVxyXG4gKiBAY29weXJpZ2h0ICAgIENvcHlyaWdodCAoYykgMjAyMCBZYW5uaWNrIERldWJlbDsgUHJvamVjdCBVcmw6IGh0dHBzOi8vZ2l0aHViLmNvbS9lbmFibGUzZC9lbmFibGUzZFxyXG4gKiBAZGVzY3JpcHRpb24gIFRoaXMgaXMgYSBtb2RpZmllZCB2ZXJzaW9uIG9mIHRoZSBvcmlnaW5hbCBjb2RlIGZyb20gS2V2aW4gTGVlXHJcbiAqIChJbmNsdWRlcyBsYXRlc3QgdGhyZWUtdG8tYW1tbyBjb21taXQgZnJvbSBBdWd1c3QgNiwgMjAyMClcclxuICovXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5pdGVyYXRlR2VvbWV0cmllcyA9IGV4cG9ydHMuY3JlYXRlSGVpZ2h0ZmllbGRUZXJyYWluU2hhcGUgPSBleHBvcnRzLmNyZWF0ZVRyaU1lc2hTaGFwZSA9IGV4cG9ydHMuY3JlYXRlVkhBQ0RTaGFwZXMgPSBleHBvcnRzLmNyZWF0ZUhBQ0RTaGFwZXMgPSBleHBvcnRzLmNyZWF0ZUh1bGxTaGFwZSA9IGV4cG9ydHMuY3JlYXRlU3BoZXJlU2hhcGUgPSBleHBvcnRzLmNyZWF0ZUNvbmVTaGFwZSA9IGV4cG9ydHMuY3JlYXRlQ2Fwc3VsZVNoYXBlID0gZXhwb3J0cy5jcmVhdGVDeWxpbmRlclNoYXBlID0gZXhwb3J0cy5jcmVhdGVCb3hTaGFwZSA9IGV4cG9ydHMuY3JlYXRlQ29sbGlzaW9uU2hhcGVzID0gZXhwb3J0cy5IRUlHSFRGSUVMRF9EQVRBX1RZUEUgPSBleHBvcnRzLkZJVCA9IGV4cG9ydHMuVFlQRSA9IHZvaWQgMDtcclxuLyoqXHJcbiAqIEBhdXRob3IgICAgICAgS2V2aW4gTGVlIChodHRwczovL2dpdGh1Yi5jb20vSW5maW5pdGVMZWUpXHJcbiAqIEBjb3B5cmlnaHQgICAgQ29weXJpZ2h0IChjKSAyMDIwIEtldmluIExlZTsgUHJvamVjdCBVcmw6IGh0dHBzOi8vZ2l0aHViLmNvbS9JbmZpbml0ZUxlZS90aHJlZS10by1hbW1vXHJcbiAqIEBsaWNlbnNlICAgICAge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9JbmZpbml0ZUxlZS90aHJlZS10by1hbW1vL2Jsb2IvbWFzdGVyL0xJQ0VOU0V8TVBMLTIuMH1cclxuICovXHJcbmNvbnN0IGluZGV4XzEgPSByZXF1aXJlKFwiQGVuYWJsZTNkL3RocmVlLXdyYXBwZXIvZGlzdC9pbmRleFwiKTtcclxuKCd1c2Ugc3RyaWN0Jyk7XHJcbi8qIGdsb2JhbCBBbW1vICovXHJcbmV4cG9ydHMuVFlQRSA9IHtcclxuICAgIEJPWDogJ2JveCcsXHJcbiAgICBDWUxJTkRFUjogJ2N5bGluZGVyJyxcclxuICAgIFNQSEVSRTogJ3NwaGVyZScsXHJcbiAgICBDQVBTVUxFOiAnY2Fwc3VsZScsXHJcbiAgICBDT05FOiAnY29uZScsXHJcbiAgICBIVUxMOiAnaHVsbCcsXHJcbiAgICBIQUNEOiAnaGFjZCcsXHJcbiAgICBWSEFDRDogJ3ZoYWNkJyxcclxuICAgIE1FU0g6ICdtZXNoJyxcclxuICAgIEhFSUdIVEZJRUxEOiAnaGVpZ2h0ZmllbGQnXHJcbn07XHJcbmV4cG9ydHMuRklUID0ge1xyXG4gICAgQUxMOiAnYWxsJyxcclxuICAgIE1BTlVBTDogJ21hbnVhbCcgLy9BIHNpbmdsZSBzaGFwZSBpcyBzaXplZCBtYW51YWxseS4gUmVxdWlyZXMgaGFsZkV4dGVudHMgb3Igc3BoZXJlUmFkaXVzLlxyXG59O1xyXG5leHBvcnRzLkhFSUdIVEZJRUxEX0RBVEFfVFlQRSA9IHtcclxuICAgIHNob3J0OiAnc2hvcnQnLFxyXG4gICAgZmxvYXQ6ICdmbG9hdCdcclxufTtcclxuY29uc3QgY3JlYXRlQ29sbGlzaW9uU2hhcGVzID0gZnVuY3Rpb24gKHZlcnRpY2VzLCBtYXRyaWNlcywgaW5kZXhlcywgbWF0cml4V29ybGQsIG9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3dpdGNoIChvcHRpb25zLnR5cGUpIHtcclxuICAgICAgICBjYXNlIGV4cG9ydHMuVFlQRS5CT1g6XHJcbiAgICAgICAgICAgIHJldHVybiBbZXhwb3J0cy5jcmVhdGVCb3hTaGFwZSh2ZXJ0aWNlcywgbWF0cmljZXMsIG1hdHJpeFdvcmxkLCBvcHRpb25zKV07XHJcbiAgICAgICAgY2FzZSBleHBvcnRzLlRZUEUuQ1lMSU5ERVI6XHJcbiAgICAgICAgICAgIHJldHVybiBbZXhwb3J0cy5jcmVhdGVDeWxpbmRlclNoYXBlKHZlcnRpY2VzLCBtYXRyaWNlcywgbWF0cml4V29ybGQsIG9wdGlvbnMpXTtcclxuICAgICAgICBjYXNlIGV4cG9ydHMuVFlQRS5DQVBTVUxFOlxyXG4gICAgICAgICAgICByZXR1cm4gW2V4cG9ydHMuY3JlYXRlQ2Fwc3VsZVNoYXBlKHZlcnRpY2VzLCBtYXRyaWNlcywgbWF0cml4V29ybGQsIG9wdGlvbnMpXTtcclxuICAgICAgICBjYXNlIGV4cG9ydHMuVFlQRS5DT05FOlxyXG4gICAgICAgICAgICByZXR1cm4gW2V4cG9ydHMuY3JlYXRlQ29uZVNoYXBlKHZlcnRpY2VzLCBtYXRyaWNlcywgbWF0cml4V29ybGQsIG9wdGlvbnMpXTtcclxuICAgICAgICBjYXNlIGV4cG9ydHMuVFlQRS5TUEhFUkU6XHJcbiAgICAgICAgICAgIHJldHVybiBbZXhwb3J0cy5jcmVhdGVTcGhlcmVTaGFwZSh2ZXJ0aWNlcywgbWF0cmljZXMsIG1hdHJpeFdvcmxkLCBvcHRpb25zKV07XHJcbiAgICAgICAgY2FzZSBleHBvcnRzLlRZUEUuSFVMTDpcclxuICAgICAgICAgICAgcmV0dXJuIFtleHBvcnRzLmNyZWF0ZUh1bGxTaGFwZSh2ZXJ0aWNlcywgbWF0cmljZXMsIG1hdHJpeFdvcmxkLCBvcHRpb25zKV07XHJcbiAgICAgICAgY2FzZSBleHBvcnRzLlRZUEUuSEFDRDpcclxuICAgICAgICAgICAgcmV0dXJuIGV4cG9ydHMuY3JlYXRlSEFDRFNoYXBlcyh2ZXJ0aWNlcywgbWF0cmljZXMsIGluZGV4ZXMsIG1hdHJpeFdvcmxkLCBvcHRpb25zKTtcclxuICAgICAgICBjYXNlIGV4cG9ydHMuVFlQRS5WSEFDRDpcclxuICAgICAgICAgICAgcmV0dXJuIGV4cG9ydHMuY3JlYXRlVkhBQ0RTaGFwZXModmVydGljZXMsIG1hdHJpY2VzLCBpbmRleGVzLCBtYXRyaXhXb3JsZCwgb3B0aW9ucyk7XHJcbiAgICAgICAgY2FzZSBleHBvcnRzLlRZUEUuTUVTSDpcclxuICAgICAgICAgICAgcmV0dXJuIFtleHBvcnRzLmNyZWF0ZVRyaU1lc2hTaGFwZSh2ZXJ0aWNlcywgbWF0cmljZXMsIGluZGV4ZXMsIG1hdHJpeFdvcmxkLCBvcHRpb25zKV07XHJcbiAgICAgICAgY2FzZSBleHBvcnRzLlRZUEUuSEVJR0hURklFTEQ6XHJcbiAgICAgICAgICAgIHJldHVybiBbZXhwb3J0cy5jcmVhdGVIZWlnaHRmaWVsZFRlcnJhaW5TaGFwZShvcHRpb25zKV07XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKG9wdGlvbnMudHlwZSArICcgaXMgbm90IGN1cnJlbnRseSBzdXBwb3J0ZWQnKTtcclxuICAgICAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG59O1xyXG5leHBvcnRzLmNyZWF0ZUNvbGxpc2lvblNoYXBlcyA9IGNyZWF0ZUNvbGxpc2lvblNoYXBlcztcclxuLy9UT0RPOiBzdXBwb3J0IGdpbXBhY3QgKGR5bmFtaWMgdHJpbWVzaCkgYW5kIGhlaWdodG1hcFxyXG5jb25zdCBjcmVhdGVCb3hTaGFwZSA9IGZ1bmN0aW9uICh2ZXJ0aWNlcywgbWF0cmljZXMsIG1hdHJpeFdvcmxkLCBvcHRpb25zID0ge30pIHtcclxuICAgIG9wdGlvbnMudHlwZSA9IGV4cG9ydHMuVFlQRS5CT1g7XHJcbiAgICBfc2V0T3B0aW9ucyhvcHRpb25zKTtcclxuICAgIGlmIChvcHRpb25zLmZpdCA9PT0gZXhwb3J0cy5GSVQuQUxMKSB7XHJcbiAgICAgICAgb3B0aW9ucy5oYWxmRXh0ZW50cyA9IF9jb21wdXRlSGFsZkV4dGVudHMoX2NvbXB1dGVCb3VuZHModmVydGljZXMsIG1hdHJpY2VzKSwgb3B0aW9ucy5taW5IYWxmRXh0ZW50LCBvcHRpb25zLm1heEhhbGZFeHRlbnQpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgYnRIYWxmRXh0ZW50cyA9IG5ldyBBbW1vLmJ0VmVjdG9yMyhvcHRpb25zLmhhbGZFeHRlbnRzLngsIG9wdGlvbnMuaGFsZkV4dGVudHMueSwgb3B0aW9ucy5oYWxmRXh0ZW50cy56KTtcclxuICAgIGNvbnN0IGNvbGxpc2lvblNoYXBlID0gbmV3IEFtbW8uYnRCb3hTaGFwZShidEhhbGZFeHRlbnRzKTtcclxuICAgIEFtbW8uZGVzdHJveShidEhhbGZFeHRlbnRzKTtcclxuICAgIF9maW5pc2hDb2xsaXNpb25TaGFwZShjb2xsaXNpb25TaGFwZSwgb3B0aW9ucywgX2NvbXB1dGVTY2FsZShtYXRyaXhXb3JsZCwgb3B0aW9ucykpO1xyXG4gICAgcmV0dXJuIGNvbGxpc2lvblNoYXBlO1xyXG59O1xyXG5leHBvcnRzLmNyZWF0ZUJveFNoYXBlID0gY3JlYXRlQm94U2hhcGU7XHJcbmNvbnN0IGNyZWF0ZUN5bGluZGVyU2hhcGUgPSBmdW5jdGlvbiAodmVydGljZXMsIG1hdHJpY2VzLCBtYXRyaXhXb3JsZCwgb3B0aW9ucyA9IHt9KSB7XHJcbiAgICBvcHRpb25zLnR5cGUgPSBleHBvcnRzLlRZUEUuQ1lMSU5ERVI7XHJcbiAgICBfc2V0T3B0aW9ucyhvcHRpb25zKTtcclxuICAgIGlmIChvcHRpb25zLmZpdCA9PT0gZXhwb3J0cy5GSVQuQUxMKSB7XHJcbiAgICAgICAgb3B0aW9ucy5oYWxmRXh0ZW50cyA9IF9jb21wdXRlSGFsZkV4dGVudHMoX2NvbXB1dGVCb3VuZHModmVydGljZXMsIG1hdHJpY2VzKSwgb3B0aW9ucy5taW5IYWxmRXh0ZW50LCBvcHRpb25zLm1heEhhbGZFeHRlbnQpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgYnRIYWxmRXh0ZW50cyA9IG5ldyBBbW1vLmJ0VmVjdG9yMyhvcHRpb25zLmhhbGZFeHRlbnRzLngsIG9wdGlvbnMuaGFsZkV4dGVudHMueSwgb3B0aW9ucy5oYWxmRXh0ZW50cy56KTtcclxuICAgIGNvbnN0IGNvbGxpc2lvblNoYXBlID0gKCgpID0+IHtcclxuICAgICAgICBzd2l0Y2ggKG9wdGlvbnMuY3lsaW5kZXJBeGlzKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ3knOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBbW1vLmJ0Q3lsaW5kZXJTaGFwZShidEhhbGZFeHRlbnRzKTtcclxuICAgICAgICAgICAgY2FzZSAneCc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEFtbW8uYnRDeWxpbmRlclNoYXBlWChidEhhbGZFeHRlbnRzKTtcclxuICAgICAgICAgICAgY2FzZSAneic6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEFtbW8uYnRDeWxpbmRlclNoYXBlWihidEhhbGZFeHRlbnRzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9KSgpO1xyXG4gICAgQW1tby5kZXN0cm95KGJ0SGFsZkV4dGVudHMpO1xyXG4gICAgX2ZpbmlzaENvbGxpc2lvblNoYXBlKGNvbGxpc2lvblNoYXBlLCBvcHRpb25zLCBfY29tcHV0ZVNjYWxlKG1hdHJpeFdvcmxkLCBvcHRpb25zKSk7XHJcbiAgICByZXR1cm4gY29sbGlzaW9uU2hhcGU7XHJcbn07XHJcbmV4cG9ydHMuY3JlYXRlQ3lsaW5kZXJTaGFwZSA9IGNyZWF0ZUN5bGluZGVyU2hhcGU7XHJcbmNvbnN0IGNyZWF0ZUNhcHN1bGVTaGFwZSA9IGZ1bmN0aW9uICh2ZXJ0aWNlcywgbWF0cmljZXMsIG1hdHJpeFdvcmxkLCBvcHRpb25zID0ge30pIHtcclxuICAgIG9wdGlvbnMudHlwZSA9IGV4cG9ydHMuVFlQRS5DQVBTVUxFO1xyXG4gICAgX3NldE9wdGlvbnMob3B0aW9ucyk7XHJcbiAgICBpZiAob3B0aW9ucy5maXQgPT09IGV4cG9ydHMuRklULkFMTCkge1xyXG4gICAgICAgIG9wdGlvbnMuaGFsZkV4dGVudHMgPSBfY29tcHV0ZUhhbGZFeHRlbnRzKF9jb21wdXRlQm91bmRzKHZlcnRpY2VzLCBtYXRyaWNlcyksIG9wdGlvbnMubWluSGFsZkV4dGVudCwgb3B0aW9ucy5tYXhIYWxmRXh0ZW50KTtcclxuICAgIH1cclxuICAgIGNvbnN0IHsgeCwgeSwgeiB9ID0gb3B0aW9ucy5oYWxmRXh0ZW50cztcclxuICAgIGNvbnN0IGNvbGxpc2lvblNoYXBlID0gKCgpID0+IHtcclxuICAgICAgICBzd2l0Y2ggKG9wdGlvbnMuY3lsaW5kZXJBeGlzKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ3knOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBbW1vLmJ0Q2Fwc3VsZVNoYXBlKE1hdGgubWF4KHgsIHopLCB5ICogMik7XHJcbiAgICAgICAgICAgIGNhc2UgJ3gnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBbW1vLmJ0Q2Fwc3VsZVNoYXBlWChNYXRoLm1heCh5LCB6KSwgeCAqIDIpO1xyXG4gICAgICAgICAgICBjYXNlICd6JzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQW1tby5idENhcHN1bGVTaGFwZVooTWF0aC5tYXgoeCwgeSksIHogKiAyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9KSgpO1xyXG4gICAgX2ZpbmlzaENvbGxpc2lvblNoYXBlKGNvbGxpc2lvblNoYXBlLCBvcHRpb25zLCBfY29tcHV0ZVNjYWxlKG1hdHJpeFdvcmxkLCBvcHRpb25zKSk7XHJcbiAgICByZXR1cm4gY29sbGlzaW9uU2hhcGU7XHJcbn07XHJcbmV4cG9ydHMuY3JlYXRlQ2Fwc3VsZVNoYXBlID0gY3JlYXRlQ2Fwc3VsZVNoYXBlO1xyXG5jb25zdCBjcmVhdGVDb25lU2hhcGUgPSBmdW5jdGlvbiAodmVydGljZXMsIG1hdHJpY2VzLCBtYXRyaXhXb3JsZCwgb3B0aW9ucyA9IHt9KSB7XHJcbiAgICBvcHRpb25zLnR5cGUgPSBleHBvcnRzLlRZUEUuQ09ORTtcclxuICAgIF9zZXRPcHRpb25zKG9wdGlvbnMpO1xyXG4gICAgaWYgKG9wdGlvbnMuZml0ID09PSBleHBvcnRzLkZJVC5BTEwpIHtcclxuICAgICAgICBvcHRpb25zLmhhbGZFeHRlbnRzID0gX2NvbXB1dGVIYWxmRXh0ZW50cyhfY29tcHV0ZUJvdW5kcyh2ZXJ0aWNlcywgbWF0cmljZXMpLCBvcHRpb25zLm1pbkhhbGZFeHRlbnQsIG9wdGlvbnMubWF4SGFsZkV4dGVudCk7XHJcbiAgICB9XHJcbiAgICBjb25zdCB7IHgsIHksIHogfSA9IG9wdGlvbnMuaGFsZkV4dGVudHM7XHJcbiAgICBjb25zdCBjb2xsaXNpb25TaGFwZSA9ICgoKSA9PiB7XHJcbiAgICAgICAgc3dpdGNoIChvcHRpb25zLmN5bGluZGVyQXhpcykge1xyXG4gICAgICAgICAgICBjYXNlICd5JzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQW1tby5idENvbmVTaGFwZShNYXRoLm1heCh4LCB6KSwgeSAqIDIpO1xyXG4gICAgICAgICAgICBjYXNlICd4JzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQW1tby5idENvbmVTaGFwZVgoTWF0aC5tYXgoeSwgeiksIHggKiAyKTtcclxuICAgICAgICAgICAgY2FzZSAneic6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEFtbW8uYnRDb25lU2hhcGVaKE1hdGgubWF4KHgsIHkpLCB6ICogMik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfSkoKTtcclxuICAgIF9maW5pc2hDb2xsaXNpb25TaGFwZShjb2xsaXNpb25TaGFwZSwgb3B0aW9ucywgX2NvbXB1dGVTY2FsZShtYXRyaXhXb3JsZCwgb3B0aW9ucykpO1xyXG4gICAgcmV0dXJuIGNvbGxpc2lvblNoYXBlO1xyXG59O1xyXG5leHBvcnRzLmNyZWF0ZUNvbmVTaGFwZSA9IGNyZWF0ZUNvbmVTaGFwZTtcclxuY29uc3QgY3JlYXRlU3BoZXJlU2hhcGUgPSBmdW5jdGlvbiAodmVydGljZXMsIG1hdHJpY2VzLCBtYXRyaXhXb3JsZCwgb3B0aW9ucyA9IHt9KSB7XHJcbiAgICBvcHRpb25zLnR5cGUgPSBleHBvcnRzLlRZUEUuU1BIRVJFO1xyXG4gICAgX3NldE9wdGlvbnMob3B0aW9ucyk7XHJcbiAgICBsZXQgcmFkaXVzO1xyXG4gICAgaWYgKG9wdGlvbnMuZml0ID09PSBleHBvcnRzLkZJVC5NQU5VQUwgJiYgIWlzTmFOKG9wdGlvbnMuc3BoZXJlUmFkaXVzKSkge1xyXG4gICAgICAgIHJhZGl1cyA9IG9wdGlvbnMuc3BoZXJlUmFkaXVzO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmFkaXVzID0gX2NvbXB1dGVSYWRpdXModmVydGljZXMsIG1hdHJpY2VzLCBfY29tcHV0ZUJvdW5kcyh2ZXJ0aWNlcywgbWF0cmljZXMpKTtcclxuICAgIH1cclxuICAgIGNvbnN0IGNvbGxpc2lvblNoYXBlID0gbmV3IEFtbW8uYnRTcGhlcmVTaGFwZShyYWRpdXMpO1xyXG4gICAgX2ZpbmlzaENvbGxpc2lvblNoYXBlKGNvbGxpc2lvblNoYXBlLCBvcHRpb25zLCBfY29tcHV0ZVNjYWxlKG1hdHJpeFdvcmxkLCBvcHRpb25zKSk7XHJcbiAgICByZXR1cm4gY29sbGlzaW9uU2hhcGU7XHJcbn07XHJcbmV4cG9ydHMuY3JlYXRlU3BoZXJlU2hhcGUgPSBjcmVhdGVTcGhlcmVTaGFwZTtcclxuZXhwb3J0cy5jcmVhdGVIdWxsU2hhcGUgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgY29uc3QgdmVydGV4ID0gbmV3IGluZGV4XzEuVmVjdG9yMygpO1xyXG4gICAgY29uc3QgY2VudGVyID0gbmV3IGluZGV4XzEuVmVjdG9yMygpO1xyXG4gICAgY29uc3QgbWF0cml4ID0gbmV3IGluZGV4XzEuTWF0cml4NCgpO1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh2ZXJ0aWNlcywgbWF0cmljZXMsIG1hdHJpeFdvcmxkLCBvcHRpb25zID0ge30pIHtcclxuICAgICAgICBvcHRpb25zLnR5cGUgPSBleHBvcnRzLlRZUEUuSFVMTDtcclxuICAgICAgICBfc2V0T3B0aW9ucyhvcHRpb25zKTtcclxuICAgICAgICBpZiAob3B0aW9ucy5maXQgPT09IGV4cG9ydHMuRklULk1BTlVBTCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ2Nhbm5vdCB1c2UgZml0OiBtYW51YWwgd2l0aCB0eXBlOiBodWxsJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBib3VuZHMgPSBfY29tcHV0ZUJvdW5kcyh2ZXJ0aWNlcywgbWF0cmljZXMpO1xyXG4gICAgICAgIGNvbnN0IGJ0VmVydGV4ID0gbmV3IEFtbW8uYnRWZWN0b3IzKCk7XHJcbiAgICAgICAgY29uc3Qgb3JpZ2luYWxIdWxsID0gbmV3IEFtbW8uYnRDb252ZXhIdWxsU2hhcGUoKTtcclxuICAgICAgICBvcmlnaW5hbEh1bGwuc2V0TWFyZ2luKG9wdGlvbnMubWFyZ2luKTtcclxuICAgICAgICBjZW50ZXIuYWRkVmVjdG9ycyhib3VuZHMubWF4LCBib3VuZHMubWluKS5tdWx0aXBseVNjYWxhcigwLjUpO1xyXG4gICAgICAgIGxldCB2ZXJ0ZXhDb3VudCA9IDA7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2ZXJ0aWNlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB2ZXJ0ZXhDb3VudCArPSB2ZXJ0aWNlc1tpXS5sZW5ndGggLyAzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBtYXhWZXJ0aWNlcyA9IG9wdGlvbnMuaHVsbE1heFZlcnRpY2VzIHx8IDEwMDAwMDtcclxuICAgICAgICAvLyB0b2RvOiBtaWdodCB3YW50IHRvIGltcGxlbWVudCB0aGlzIGluIGEgZGV0ZXJtaW5pc3RpYyB3YXkgdGhhdCBkb2Vzbid0IGRvIE8odmVydHMpIGNhbGxzIHRvIE1hdGgucmFuZG9tXHJcbiAgICAgICAgaWYgKHZlcnRleENvdW50ID4gbWF4VmVydGljZXMpIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKGB0b28gbWFueSB2ZXJ0aWNlcyBmb3IgaHVsbCBzaGFwZTsgc2FtcGxpbmcgfiR7bWF4VmVydGljZXN9IGZyb20gfiR7dmVydGV4Q291bnR9IHZlcnRpY2VzYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHAgPSBNYXRoLm1pbigxLCBtYXhWZXJ0aWNlcyAvIHZlcnRleENvdW50KTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZlcnRpY2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbXBvbmVudHMgPSB2ZXJ0aWNlc1tpXTtcclxuICAgICAgICAgICAgbWF0cml4LmZyb21BcnJheShtYXRyaWNlc1tpXSk7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgY29tcG9uZW50cy5sZW5ndGg7IGogKz0gMykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaXNMYXN0VmVydGV4ID0gaSA9PT0gdmVydGljZXMubGVuZ3RoIC0gMSAmJiBqID09PSBjb21wb25lbnRzLmxlbmd0aCAtIDM7XHJcbiAgICAgICAgICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA8PSBwIHx8IGlzTGFzdFZlcnRleCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGFsd2F5cyBpbmNsdWRlIHRoZSBsYXN0IHZlcnRleFxyXG4gICAgICAgICAgICAgICAgICAgIHZlcnRleFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0KGNvbXBvbmVudHNbal0sIGNvbXBvbmVudHNbaiArIDFdLCBjb21wb25lbnRzW2ogKyAyXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGx5TWF0cml4NChtYXRyaXgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zdWIoY2VudGVyKTtcclxuICAgICAgICAgICAgICAgICAgICBidFZlcnRleC5zZXRWYWx1ZSh2ZXJ0ZXgueCwgdmVydGV4LnksIHZlcnRleC56KTtcclxuICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbEh1bGwuYWRkUG9pbnQoYnRWZXJ0ZXgsIGlzTGFzdFZlcnRleCk7IC8vIHJlY2FsYyBBQUJCIG9ubHkgb24gbGFzdCBnZW9tZXRyeVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBjb2xsaXNpb25TaGFwZSA9IG9yaWdpbmFsSHVsbDtcclxuICAgICAgICBpZiAob3JpZ2luYWxIdWxsLmdldE51bVZlcnRpY2VzKCkgPj0gMTAwKSB7XHJcbiAgICAgICAgICAgIC8vQnVsbGV0IGRvY3VtZW50YXRpb24gc2F5cyBkb24ndCB1c2UgY29udmV4SHVsbHMgd2l0aCAxMDAgdmVydHMgb3IgbW9yZVxyXG4gICAgICAgICAgICBjb25zdCBzaGFwZUh1bGwgPSBuZXcgQW1tby5idFNoYXBlSHVsbChvcmlnaW5hbEh1bGwpO1xyXG4gICAgICAgICAgICBzaGFwZUh1bGwuYnVpbGRIdWxsKG9wdGlvbnMubWFyZ2luKTtcclxuICAgICAgICAgICAgQW1tby5kZXN0cm95KG9yaWdpbmFsSHVsbCk7XHJcbiAgICAgICAgICAgIGNvbGxpc2lvblNoYXBlID0gbmV3IEFtbW8uYnRDb252ZXhIdWxsU2hhcGUoQW1tby5nZXRQb2ludGVyKHNoYXBlSHVsbC5nZXRWZXJ0ZXhQb2ludGVyKCkpLCBzaGFwZUh1bGwubnVtVmVydGljZXMoKSk7XHJcbiAgICAgICAgICAgIEFtbW8uZGVzdHJveShzaGFwZUh1bGwpOyAvLyBidENvbnZleEh1bGxTaGFwZSBtYWtlcyBhIGNvcHlcclxuICAgICAgICB9XHJcbiAgICAgICAgQW1tby5kZXN0cm95KGJ0VmVydGV4KTtcclxuICAgICAgICBfZmluaXNoQ29sbGlzaW9uU2hhcGUoY29sbGlzaW9uU2hhcGUsIG9wdGlvbnMsIF9jb21wdXRlU2NhbGUobWF0cml4V29ybGQsIG9wdGlvbnMpKTtcclxuICAgICAgICByZXR1cm4gY29sbGlzaW9uU2hhcGU7XHJcbiAgICB9O1xyXG59KSgpO1xyXG5leHBvcnRzLmNyZWF0ZUhBQ0RTaGFwZXMgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgY29uc3QgdmVjdG9yID0gbmV3IGluZGV4XzEuVmVjdG9yMygpO1xyXG4gICAgY29uc3QgY2VudGVyID0gbmV3IGluZGV4XzEuVmVjdG9yMygpO1xyXG4gICAgY29uc3QgbWF0cml4ID0gbmV3IGluZGV4XzEuTWF0cml4NCgpO1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh2ZXJ0aWNlcywgbWF0cmljZXMsIGluZGV4ZXMsIG1hdHJpeFdvcmxkLCBvcHRpb25zID0ge30pIHtcclxuICAgICAgICBvcHRpb25zLnR5cGUgPSBleHBvcnRzLlRZUEUuSEFDRDtcclxuICAgICAgICBfc2V0T3B0aW9ucyhvcHRpb25zKTtcclxuICAgICAgICBpZiAob3B0aW9ucy5maXQgPT09IGV4cG9ydHMuRklULk1BTlVBTCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ2Nhbm5vdCB1c2UgZml0OiBtYW51YWwgd2l0aCB0eXBlOiBoYWNkJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBbXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFBbW1vLmhhc093blByb3BlcnR5KCdIQUNEJykpIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKCdIQUNEIHVuYXZhaWxhYmxlIGluIGluY2x1ZGVkIGJ1aWxkIG9mIEFtbW8uanMuIFZpc2l0IGh0dHBzOi8vZ2l0aHViLmNvbS9tb3ppbGxhcmVhbGl0eS9hbW1vLmpzIGZvciB0aGUgbGF0ZXN0IHZlcnNpb24uJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBbXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgYm91bmRzID0gX2NvbXB1dGVCb3VuZHModmVydGljZXMsIG1hdHJpY2VzKTtcclxuICAgICAgICBjb25zdCBzY2FsZSA9IF9jb21wdXRlU2NhbGUobWF0cml4V29ybGQsIG9wdGlvbnMpO1xyXG4gICAgICAgIGxldCB2ZXJ0ZXhDb3VudCA9IDA7XHJcbiAgICAgICAgbGV0IHRyaUNvdW50ID0gMDtcclxuICAgICAgICBjZW50ZXIuYWRkVmVjdG9ycyhib3VuZHMubWF4LCBib3VuZHMubWluKS5tdWx0aXBseVNjYWxhcigwLjUpO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmVydGljZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdmVydGV4Q291bnQgKz0gdmVydGljZXNbaV0ubGVuZ3RoIC8gMztcclxuICAgICAgICAgICAgaWYgKGluZGV4ZXMgJiYgaW5kZXhlc1tpXSkge1xyXG4gICAgICAgICAgICAgICAgdHJpQ291bnQgKz0gaW5kZXhlc1tpXS5sZW5ndGggLyAzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdHJpQ291bnQgKz0gdmVydGljZXNbaV0ubGVuZ3RoIC8gOTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBoYWNkID0gbmV3IEFtbW8uSEFDRCgpO1xyXG4gICAgICAgIGlmIChvcHRpb25zLmhhc093blByb3BlcnR5KCdjb21wYWNpdHlXZWlnaHQnKSlcclxuICAgICAgICAgICAgaGFjZC5TZXRDb21wYWNpdHlXZWlnaHQob3B0aW9ucy5jb21wYWNpdHlXZWlnaHQpO1xyXG4gICAgICAgIGlmIChvcHRpb25zLmhhc093blByb3BlcnR5KCd2b2x1bWVXZWlnaHQnKSlcclxuICAgICAgICAgICAgaGFjZC5TZXRWb2x1bWVXZWlnaHQob3B0aW9ucy52b2x1bWVXZWlnaHQpO1xyXG4gICAgICAgIGlmIChvcHRpb25zLmhhc093blByb3BlcnR5KCduQ2x1c3RlcnMnKSlcclxuICAgICAgICAgICAgaGFjZC5TZXROQ2x1c3RlcnMob3B0aW9ucy5uQ2x1c3RlcnMpO1xyXG4gICAgICAgIGlmIChvcHRpb25zLmhhc093blByb3BlcnR5KCduVmVydGljZXNQZXJDSCcpKVxyXG4gICAgICAgICAgICBoYWNkLlNldE5WZXJ0aWNlc1BlckNIKG9wdGlvbnMublZlcnRpY2VzUGVyQ0gpO1xyXG4gICAgICAgIGlmIChvcHRpb25zLmhhc093blByb3BlcnR5KCdjb25jYXZpdHknKSlcclxuICAgICAgICAgICAgaGFjZC5TZXRDb25jYXZpdHkob3B0aW9ucy5jb25jYXZpdHkpO1xyXG4gICAgICAgIGNvbnN0IHBvaW50cyA9IEFtbW8uX21hbGxvYyh2ZXJ0ZXhDb3VudCAqIDMgKiA4KTtcclxuICAgICAgICBjb25zdCB0cmlhbmdsZXMgPSBBbW1vLl9tYWxsb2ModHJpQ291bnQgKiAzICogNCk7XHJcbiAgICAgICAgaGFjZC5TZXRQb2ludHMocG9pbnRzKTtcclxuICAgICAgICBoYWNkLlNldFRyaWFuZ2xlcyh0cmlhbmdsZXMpO1xyXG4gICAgICAgIGhhY2QuU2V0TlBvaW50cyh2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgaGFjZC5TZXROVHJpYW5nbGVzKHRyaUNvdW50KTtcclxuICAgICAgICBsZXQgcHB0ciA9IHBvaW50cyAvIDgsIHRwdHIgPSB0cmlhbmdsZXMgLyA0O1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmVydGljZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgY29tcG9uZW50cyA9IHZlcnRpY2VzW2ldO1xyXG4gICAgICAgICAgICBtYXRyaXguZnJvbUFycmF5KG1hdHJpY2VzW2ldKTtcclxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBjb21wb25lbnRzLmxlbmd0aDsgaiArPSAzKSB7XHJcbiAgICAgICAgICAgICAgICB2ZWN0b3JcclxuICAgICAgICAgICAgICAgICAgICAuc2V0KGNvbXBvbmVudHNbaiArIDBdLCBjb21wb25lbnRzW2ogKyAxXSwgY29tcG9uZW50c1tqICsgMl0pXHJcbiAgICAgICAgICAgICAgICAgICAgLmFwcGx5TWF0cml4NChtYXRyaXgpXHJcbiAgICAgICAgICAgICAgICAgICAgLnN1YihjZW50ZXIpO1xyXG4gICAgICAgICAgICAgICAgQW1tby5IRUFQRjY0W3BwdHIgKyAwXSA9IHZlY3Rvci54O1xyXG4gICAgICAgICAgICAgICAgQW1tby5IRUFQRjY0W3BwdHIgKyAxXSA9IHZlY3Rvci55O1xyXG4gICAgICAgICAgICAgICAgQW1tby5IRUFQRjY0W3BwdHIgKyAyXSA9IHZlY3Rvci56O1xyXG4gICAgICAgICAgICAgICAgcHB0ciArPSAzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChpbmRleGVzW2ldKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRpY2VzID0gaW5kZXhlc1tpXTtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgaW5kaWNlcy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgIEFtbW8uSEVBUDMyW3RwdHJdID0gaW5kaWNlc1tqXTtcclxuICAgICAgICAgICAgICAgICAgICB0cHRyKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGNvbXBvbmVudHMubGVuZ3RoIC8gMzsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgQW1tby5IRUFQMzJbdHB0cl0gPSBqO1xyXG4gICAgICAgICAgICAgICAgICAgIHRwdHIrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBoYWNkLkNvbXB1dGUoKTtcclxuICAgICAgICBBbW1vLl9mcmVlKHBvaW50cyk7XHJcbiAgICAgICAgQW1tby5fZnJlZSh0cmlhbmdsZXMpO1xyXG4gICAgICAgIGNvbnN0IG5DbHVzdGVycyA9IGhhY2QuR2V0TkNsdXN0ZXJzKCk7XHJcbiAgICAgICAgY29uc3Qgc2hhcGVzID0gW107XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuQ2x1c3RlcnM7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBodWxsID0gbmV3IEFtbW8uYnRDb252ZXhIdWxsU2hhcGUoKTtcclxuICAgICAgICAgICAgaHVsbC5zZXRNYXJnaW4ob3B0aW9ucy5tYXJnaW4pO1xyXG4gICAgICAgICAgICBjb25zdCBuUG9pbnRzID0gaGFjZC5HZXROUG9pbnRzQ0goaSk7XHJcbiAgICAgICAgICAgIGNvbnN0IG5UcmlhbmdsZXMgPSBoYWNkLkdldE5UcmlhbmdsZXNDSChpKTtcclxuICAgICAgICAgICAgY29uc3QgaHVsbFBvaW50cyA9IEFtbW8uX21hbGxvYyhuUG9pbnRzICogMyAqIDgpO1xyXG4gICAgICAgICAgICBjb25zdCBodWxsVHJpYW5nbGVzID0gQW1tby5fbWFsbG9jKG5UcmlhbmdsZXMgKiAzICogNCk7XHJcbiAgICAgICAgICAgIGhhY2QuR2V0Q0goaSwgaHVsbFBvaW50cywgaHVsbFRyaWFuZ2xlcyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHBwdHIgPSBodWxsUG9pbnRzIC8gODtcclxuICAgICAgICAgICAgZm9yIChsZXQgcGkgPSAwOyBwaSA8IG5Qb2ludHM7IHBpKyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJ0VmVydGV4ID0gbmV3IEFtbW8uYnRWZWN0b3IzKCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBweCA9IEFtbW8uSEVBUEY2NFtwcHRyICsgcGkgKiAzICsgMF07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBweSA9IEFtbW8uSEVBUEY2NFtwcHRyICsgcGkgKiAzICsgMV07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBweiA9IEFtbW8uSEVBUEY2NFtwcHRyICsgcGkgKiAzICsgMl07XHJcbiAgICAgICAgICAgICAgICBidFZlcnRleC5zZXRWYWx1ZShweCwgcHksIHB6KTtcclxuICAgICAgICAgICAgICAgIGh1bGwuYWRkUG9pbnQoYnRWZXJ0ZXgsIHBpID09PSBuUG9pbnRzIC0gMSk7XHJcbiAgICAgICAgICAgICAgICBBbW1vLmRlc3Ryb3koYnRWZXJ0ZXgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF9maW5pc2hDb2xsaXNpb25TaGFwZShodWxsLCBvcHRpb25zLCBzY2FsZSk7XHJcbiAgICAgICAgICAgIHNoYXBlcy5wdXNoKGh1bGwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gc2hhcGVzO1xyXG4gICAgfTtcclxufSkoKTtcclxuZXhwb3J0cy5jcmVhdGVWSEFDRFNoYXBlcyA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBjb25zdCB2ZWN0b3IgPSBuZXcgaW5kZXhfMS5WZWN0b3IzKCk7XHJcbiAgICBjb25zdCBjZW50ZXIgPSBuZXcgaW5kZXhfMS5WZWN0b3IzKCk7XHJcbiAgICBjb25zdCBtYXRyaXggPSBuZXcgaW5kZXhfMS5NYXRyaXg0KCk7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHZlcnRpY2VzLCBtYXRyaWNlcywgaW5kZXhlcywgbWF0cml4V29ybGQsIG9wdGlvbnMgPSB7fSkge1xyXG4gICAgICAgIG9wdGlvbnMudHlwZSA9IGV4cG9ydHMuVFlQRS5WSEFDRDtcclxuICAgICAgICBfc2V0T3B0aW9ucyhvcHRpb25zKTtcclxuICAgICAgICBpZiAob3B0aW9ucy5maXQgPT09IGV4cG9ydHMuRklULk1BTlVBTCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ2Nhbm5vdCB1c2UgZml0OiBtYW51YWwgd2l0aCB0eXBlOiB2aGFjZCcpO1xyXG4gICAgICAgICAgICByZXR1cm4gW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghQW1tby5oYXNPd25Qcm9wZXJ0eSgnVkhBQ0QnKSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ1ZIQUNEIHVuYXZhaWxhYmxlIGluIGluY2x1ZGVkIGJ1aWxkIG9mIEFtbW8uanMuIFZpc2l0IGh0dHBzOi8vZ2l0aHViLmNvbS9tb3ppbGxhcmVhbGl0eS9hbW1vLmpzIGZvciB0aGUgbGF0ZXN0IHZlcnNpb24uJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBbXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgYm91bmRzID0gX2NvbXB1dGVCb3VuZHModmVydGljZXMsIG1hdHJpY2VzKTtcclxuICAgICAgICBjb25zdCBzY2FsZSA9IF9jb21wdXRlU2NhbGUobWF0cml4V29ybGQsIG9wdGlvbnMpO1xyXG4gICAgICAgIGxldCB2ZXJ0ZXhDb3VudCA9IDA7XHJcbiAgICAgICAgbGV0IHRyaUNvdW50ID0gMDtcclxuICAgICAgICBjZW50ZXIuYWRkVmVjdG9ycyhib3VuZHMubWF4LCBib3VuZHMubWluKS5tdWx0aXBseVNjYWxhcigwLjUpO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmVydGljZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdmVydGV4Q291bnQgKz0gdmVydGljZXNbaV0ubGVuZ3RoIC8gMztcclxuICAgICAgICAgICAgaWYgKGluZGV4ZXMgJiYgaW5kZXhlc1tpXSkge1xyXG4gICAgICAgICAgICAgICAgdHJpQ291bnQgKz0gaW5kZXhlc1tpXS5sZW5ndGggLyAzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdHJpQ291bnQgKz0gdmVydGljZXNbaV0ubGVuZ3RoIC8gOTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB2aGFjZCA9IG5ldyBBbW1vLlZIQUNEKCk7XHJcbiAgICAgICAgY29uc3QgcGFyYW1zID0gbmV3IEFtbW8uUGFyYW1ldGVycygpO1xyXG4gICAgICAgIC8vaHR0cHM6Ly9rbWFtb3UuYmxvZ3Nwb3QuY29tLzIwMTQvMTIvdi1oYWNkLTIwLXBhcmFtZXRlcnMtZGVzY3JpcHRpb24uaHRtbFxyXG4gICAgICAgIGlmIChvcHRpb25zLmhhc093blByb3BlcnR5KCdyZXNvbHV0aW9uJykpXHJcbiAgICAgICAgICAgIHBhcmFtcy5zZXRfbV9yZXNvbHV0aW9uKG9wdGlvbnMucmVzb2x1dGlvbik7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMuaGFzT3duUHJvcGVydHkoJ2RlcHRoJykpXHJcbiAgICAgICAgICAgIHBhcmFtcy5zZXRfbV9kZXB0aChvcHRpb25zLmRlcHRoKTtcclxuICAgICAgICBpZiAob3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgnY29uY2F2aXR5JykpXHJcbiAgICAgICAgICAgIHBhcmFtcy5zZXRfbV9jb25jYXZpdHkob3B0aW9ucy5jb25jYXZpdHkpO1xyXG4gICAgICAgIGlmIChvcHRpb25zLmhhc093blByb3BlcnR5KCdwbGFuZURvd25zYW1wbGluZycpKVxyXG4gICAgICAgICAgICBwYXJhbXMuc2V0X21fcGxhbmVEb3duc2FtcGxpbmcob3B0aW9ucy5wbGFuZURvd25zYW1wbGluZyk7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMuaGFzT3duUHJvcGVydHkoJ2NvbnZleGh1bGxEb3duc2FtcGxpbmcnKSlcclxuICAgICAgICAgICAgcGFyYW1zLnNldF9tX2NvbnZleGh1bGxEb3duc2FtcGxpbmcob3B0aW9ucy5jb252ZXhodWxsRG93bnNhbXBsaW5nKTtcclxuICAgICAgICBpZiAob3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgnYWxwaGEnKSlcclxuICAgICAgICAgICAgcGFyYW1zLnNldF9tX2FscGhhKG9wdGlvbnMuYWxwaGEpO1xyXG4gICAgICAgIGlmIChvcHRpb25zLmhhc093blByb3BlcnR5KCdiZXRhJykpXHJcbiAgICAgICAgICAgIHBhcmFtcy5zZXRfbV9iZXRhKG9wdGlvbnMuYmV0YSk7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMuaGFzT3duUHJvcGVydHkoJ2dhbW1hJykpXHJcbiAgICAgICAgICAgIHBhcmFtcy5zZXRfbV9nYW1tYShvcHRpb25zLmdhbW1hKTtcclxuICAgICAgICBpZiAob3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgncGNhJykpXHJcbiAgICAgICAgICAgIHBhcmFtcy5zZXRfbV9wY2Eob3B0aW9ucy5wY2EpO1xyXG4gICAgICAgIGlmIChvcHRpb25zLmhhc093blByb3BlcnR5KCdtb2RlJykpXHJcbiAgICAgICAgICAgIHBhcmFtcy5zZXRfbV9tb2RlKG9wdGlvbnMubW9kZSk7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMuaGFzT3duUHJvcGVydHkoJ21heE51bVZlcnRpY2VzUGVyQ0gnKSlcclxuICAgICAgICAgICAgcGFyYW1zLnNldF9tX21heE51bVZlcnRpY2VzUGVyQ0gob3B0aW9ucy5tYXhOdW1WZXJ0aWNlc1BlckNIKTtcclxuICAgICAgICBpZiAob3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgnbWluVm9sdW1lUGVyQ0gnKSlcclxuICAgICAgICAgICAgcGFyYW1zLnNldF9tX21pblZvbHVtZVBlckNIKG9wdGlvbnMubWluVm9sdW1lUGVyQ0gpO1xyXG4gICAgICAgIGlmIChvcHRpb25zLmhhc093blByb3BlcnR5KCdjb252ZXhodWxsQXBwcm94aW1hdGlvbicpKVxyXG4gICAgICAgICAgICBwYXJhbXMuc2V0X21fY29udmV4aHVsbEFwcHJveGltYXRpb24ob3B0aW9ucy5jb252ZXhodWxsQXBwcm94aW1hdGlvbik7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMuaGFzT3duUHJvcGVydHkoJ29jbEFjY2VsZXJhdGlvbicpKVxyXG4gICAgICAgICAgICBwYXJhbXMuc2V0X21fb2NsQWNjZWxlcmF0aW9uKG9wdGlvbnMub2NsQWNjZWxlcmF0aW9uKTtcclxuICAgICAgICBjb25zdCBwb2ludHMgPSBBbW1vLl9tYWxsb2ModmVydGV4Q291bnQgKiAzICogOCArIDMpO1xyXG4gICAgICAgIGNvbnN0IHRyaWFuZ2xlcyA9IEFtbW8uX21hbGxvYyh0cmlDb3VudCAqIDMgKiA0KTtcclxuICAgICAgICBsZXQgcHB0ciA9IHBvaW50cyAvIDgsIHRwdHIgPSB0cmlhbmdsZXMgLyA0O1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmVydGljZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgY29tcG9uZW50cyA9IHZlcnRpY2VzW2ldO1xyXG4gICAgICAgICAgICBtYXRyaXguZnJvbUFycmF5KG1hdHJpY2VzW2ldKTtcclxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBjb21wb25lbnRzLmxlbmd0aDsgaiArPSAzKSB7XHJcbiAgICAgICAgICAgICAgICB2ZWN0b3JcclxuICAgICAgICAgICAgICAgICAgICAuc2V0KGNvbXBvbmVudHNbaiArIDBdLCBjb21wb25lbnRzW2ogKyAxXSwgY29tcG9uZW50c1tqICsgMl0pXHJcbiAgICAgICAgICAgICAgICAgICAgLmFwcGx5TWF0cml4NChtYXRyaXgpXHJcbiAgICAgICAgICAgICAgICAgICAgLnN1YihjZW50ZXIpO1xyXG4gICAgICAgICAgICAgICAgQW1tby5IRUFQRjY0W3BwdHIgKyAwXSA9IHZlY3Rvci54O1xyXG4gICAgICAgICAgICAgICAgQW1tby5IRUFQRjY0W3BwdHIgKyAxXSA9IHZlY3Rvci55O1xyXG4gICAgICAgICAgICAgICAgQW1tby5IRUFQRjY0W3BwdHIgKyAyXSA9IHZlY3Rvci56O1xyXG4gICAgICAgICAgICAgICAgcHB0ciArPSAzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChpbmRleGVzW2ldKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRpY2VzID0gaW5kZXhlc1tpXTtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgaW5kaWNlcy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgIEFtbW8uSEVBUDMyW3RwdHJdID0gaW5kaWNlc1tqXTtcclxuICAgICAgICAgICAgICAgICAgICB0cHRyKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGNvbXBvbmVudHMubGVuZ3RoIC8gMzsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgQW1tby5IRUFQMzJbdHB0cl0gPSBqO1xyXG4gICAgICAgICAgICAgICAgICAgIHRwdHIrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB2aGFjZC5Db21wdXRlKHBvaW50cywgMywgdmVydGV4Q291bnQsIHRyaWFuZ2xlcywgMywgdHJpQ291bnQsIHBhcmFtcyk7XHJcbiAgICAgICAgQW1tby5fZnJlZShwb2ludHMpO1xyXG4gICAgICAgIEFtbW8uX2ZyZWUodHJpYW5nbGVzKTtcclxuICAgICAgICBjb25zdCBuSHVsbHMgPSB2aGFjZC5HZXROQ29udmV4SHVsbHMoKTtcclxuICAgICAgICBjb25zdCBzaGFwZXMgPSBbXTtcclxuICAgICAgICBjb25zdCBjaCA9IG5ldyBBbW1vLkNvbnZleEh1bGwoKTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5IdWxsczsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZoYWNkLkdldENvbnZleEh1bGwoaSwgY2gpO1xyXG4gICAgICAgICAgICBjb25zdCBuUG9pbnRzID0gY2guZ2V0X21fblBvaW50cygpO1xyXG4gICAgICAgICAgICBjb25zdCBodWxsUG9pbnRzID0gY2guZ2V0X21fcG9pbnRzKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGh1bGwgPSBuZXcgQW1tby5idENvbnZleEh1bGxTaGFwZSgpO1xyXG4gICAgICAgICAgICBodWxsLnNldE1hcmdpbihvcHRpb25zLm1hcmdpbik7XHJcbiAgICAgICAgICAgIGZvciAobGV0IHBpID0gMDsgcGkgPCBuUG9pbnRzOyBwaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBidFZlcnRleCA9IG5ldyBBbW1vLmJ0VmVjdG9yMygpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcHggPSBjaC5nZXRfbV9wb2ludHMocGkgKiAzICsgMCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBweSA9IGNoLmdldF9tX3BvaW50cyhwaSAqIDMgKyAxKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHB6ID0gY2guZ2V0X21fcG9pbnRzKHBpICogMyArIDIpO1xyXG4gICAgICAgICAgICAgICAgYnRWZXJ0ZXguc2V0VmFsdWUocHgsIHB5LCBweik7XHJcbiAgICAgICAgICAgICAgICBodWxsLmFkZFBvaW50KGJ0VmVydGV4LCBwaSA9PT0gblBvaW50cyAtIDEpO1xyXG4gICAgICAgICAgICAgICAgQW1tby5kZXN0cm95KGJ0VmVydGV4KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBfZmluaXNoQ29sbGlzaW9uU2hhcGUoaHVsbCwgb3B0aW9ucywgc2NhbGUpO1xyXG4gICAgICAgICAgICBzaGFwZXMucHVzaChodWxsKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgQW1tby5kZXN0cm95KGNoKTtcclxuICAgICAgICBBbW1vLmRlc3Ryb3kodmhhY2QpO1xyXG4gICAgICAgIHJldHVybiBzaGFwZXM7XHJcbiAgICB9O1xyXG59KSgpO1xyXG5leHBvcnRzLmNyZWF0ZVRyaU1lc2hTaGFwZSA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBjb25zdCB2YSA9IG5ldyBpbmRleF8xLlZlY3RvcjMoKTtcclxuICAgIGNvbnN0IHZiID0gbmV3IGluZGV4XzEuVmVjdG9yMygpO1xyXG4gICAgY29uc3QgdmMgPSBuZXcgaW5kZXhfMS5WZWN0b3IzKCk7XHJcbiAgICBjb25zdCBtYXRyaXggPSBuZXcgaW5kZXhfMS5NYXRyaXg0KCk7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHZlcnRpY2VzLCBtYXRyaWNlcywgaW5kZXhlcywgbWF0cml4V29ybGQsIG9wdGlvbnMgPSB7fSkge1xyXG4gICAgICAgIG9wdGlvbnMudHlwZSA9IGV4cG9ydHMuVFlQRS5NRVNIO1xyXG4gICAgICAgIF9zZXRPcHRpb25zKG9wdGlvbnMpO1xyXG4gICAgICAgIGlmIChvcHRpb25zLmZpdCA9PT0gZXhwb3J0cy5GSVQuTUFOVUFMKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignY2Fubm90IHVzZSBmaXQ6IG1hbnVhbCB3aXRoIHR5cGU6IG1lc2gnKTtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHNjYWxlID0gX2NvbXB1dGVTY2FsZShtYXRyaXhXb3JsZCwgb3B0aW9ucyk7XHJcbiAgICAgICAgY29uc3QgYnRhID0gbmV3IEFtbW8uYnRWZWN0b3IzKCk7XHJcbiAgICAgICAgY29uc3QgYnRiID0gbmV3IEFtbW8uYnRWZWN0b3IzKCk7XHJcbiAgICAgICAgY29uc3QgYnRjID0gbmV3IEFtbW8uYnRWZWN0b3IzKCk7XHJcbiAgICAgICAgY29uc3QgdHJpTWVzaCA9IG5ldyBBbW1vLmJ0VHJpYW5nbGVNZXNoKHRydWUsIGZhbHNlKTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZlcnRpY2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbXBvbmVudHMgPSB2ZXJ0aWNlc1tpXTtcclxuICAgICAgICAgICAgY29uc3QgaW5kZXggPSBpbmRleGVzW2ldID8gaW5kZXhlc1tpXSA6IG51bGw7XHJcbiAgICAgICAgICAgIG1hdHJpeC5mcm9tQXJyYXkobWF0cmljZXNbaV0pO1xyXG4gICAgICAgICAgICBpZiAoaW5kZXgpIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgaW5kZXgubGVuZ3RoOyBqICs9IDMpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBhaSA9IGluZGV4W2pdICogMztcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBiaSA9IGluZGV4W2ogKyAxXSAqIDM7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2kgPSBpbmRleFtqICsgMl0gKiAzO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhLnNldChjb21wb25lbnRzW2FpXSwgY29tcG9uZW50c1thaSArIDFdLCBjb21wb25lbnRzW2FpICsgMl0pLmFwcGx5TWF0cml4NChtYXRyaXgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZiLnNldChjb21wb25lbnRzW2JpXSwgY29tcG9uZW50c1tiaSArIDFdLCBjb21wb25lbnRzW2JpICsgMl0pLmFwcGx5TWF0cml4NChtYXRyaXgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZjLnNldChjb21wb25lbnRzW2NpXSwgY29tcG9uZW50c1tjaSArIDFdLCBjb21wb25lbnRzW2NpICsgMl0pLmFwcGx5TWF0cml4NChtYXRyaXgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJ0YS5zZXRWYWx1ZSh2YS54LCB2YS55LCB2YS56KTtcclxuICAgICAgICAgICAgICAgICAgICBidGIuc2V0VmFsdWUodmIueCwgdmIueSwgdmIueik7XHJcbiAgICAgICAgICAgICAgICAgICAgYnRjLnNldFZhbHVlKHZjLngsIHZjLnksIHZjLnopO1xyXG4gICAgICAgICAgICAgICAgICAgIHRyaU1lc2guYWRkVHJpYW5nbGUoYnRhLCBidGIsIGJ0YywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBjb21wb25lbnRzLmxlbmd0aDsgaiArPSA5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmEuc2V0KGNvbXBvbmVudHNbaiArIDBdLCBjb21wb25lbnRzW2ogKyAxXSwgY29tcG9uZW50c1tqICsgMl0pLmFwcGx5TWF0cml4NChtYXRyaXgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZiLnNldChjb21wb25lbnRzW2ogKyAzXSwgY29tcG9uZW50c1tqICsgNF0sIGNvbXBvbmVudHNbaiArIDVdKS5hcHBseU1hdHJpeDQobWF0cml4KTtcclxuICAgICAgICAgICAgICAgICAgICB2Yy5zZXQoY29tcG9uZW50c1tqICsgNl0sIGNvbXBvbmVudHNbaiArIDddLCBjb21wb25lbnRzW2ogKyA4XSkuYXBwbHlNYXRyaXg0KG1hdHJpeCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnRhLnNldFZhbHVlKHZhLngsIHZhLnksIHZhLnopO1xyXG4gICAgICAgICAgICAgICAgICAgIGJ0Yi5zZXRWYWx1ZSh2Yi54LCB2Yi55LCB2Yi56KTtcclxuICAgICAgICAgICAgICAgICAgICBidGMuc2V0VmFsdWUodmMueCwgdmMueSwgdmMueik7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJpTWVzaC5hZGRUcmlhbmdsZShidGEsIGJ0YiwgYnRjLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgbG9jYWxTY2FsZSA9IG5ldyBBbW1vLmJ0VmVjdG9yMyhzY2FsZS54LCBzY2FsZS55LCBzY2FsZS56KTtcclxuICAgICAgICB0cmlNZXNoLnNldFNjYWxpbmcobG9jYWxTY2FsZSk7XHJcbiAgICAgICAgQW1tby5kZXN0cm95KGxvY2FsU2NhbGUpO1xyXG4gICAgICAgIC8vIE1PRCAoeWFuZGV1KTogVXNlIGJ0Q29udmV4VHJpYW5nbGVNZXNoU2hhcGUgZm9yIGNvbmNhdmUgc2hhcGVzXHJcbiAgICAgICAgbGV0IGNvbGxpc2lvblNoYXBlO1xyXG4gICAgICAgIGlmIChvcHRpb25zLmNvbmNhdmUpXHJcbiAgICAgICAgICAgIGNvbGxpc2lvblNoYXBlID0gbmV3IEFtbW8uYnRCdmhUcmlhbmdsZU1lc2hTaGFwZSh0cmlNZXNoLCB0cnVlLCB0cnVlKTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIGNvbGxpc2lvblNoYXBlID0gbmV3IEFtbW8uYnRDb252ZXhUcmlhbmdsZU1lc2hTaGFwZSh0cmlNZXNoLCB0cnVlKTtcclxuICAgICAgICAvLyBjb25zdCBjb2xsaXNpb25TaGFwZSA9IG5ldyBBbW1vLmJ0QnZoVHJpYW5nbGVNZXNoU2hhcGUodHJpTWVzaCwgdHJ1ZSwgdHJ1ZSlcclxuICAgICAgICBjb2xsaXNpb25TaGFwZS5yZXNvdXJjZXMgPSBbdHJpTWVzaF07XHJcbiAgICAgICAgQW1tby5kZXN0cm95KGJ0YSk7XHJcbiAgICAgICAgQW1tby5kZXN0cm95KGJ0Yik7XHJcbiAgICAgICAgQW1tby5kZXN0cm95KGJ0Yyk7XHJcbiAgICAgICAgX2ZpbmlzaENvbGxpc2lvblNoYXBlKGNvbGxpc2lvblNoYXBlLCBvcHRpb25zKTtcclxuICAgICAgICByZXR1cm4gY29sbGlzaW9uU2hhcGU7XHJcbiAgICB9O1xyXG59KSgpO1xyXG5jb25zdCBjcmVhdGVIZWlnaHRmaWVsZFRlcnJhaW5TaGFwZSA9IGZ1bmN0aW9uIChvcHRpb25zID0ge30pIHtcclxuICAgIF9zZXRPcHRpb25zKG9wdGlvbnMpO1xyXG4gICAgaWYgKG9wdGlvbnMuZml0ID09PSBleHBvcnRzLkZJVC5BTEwpIHtcclxuICAgICAgICBjb25zb2xlLndhcm4oJ2Nhbm5vdCB1c2UgZml0OiBhbGwgd2l0aCB0eXBlOiBoZWlnaHRmaWVsZCcpO1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgY29uc3QgaGVpZ2h0ZmllbGREaXN0YW5jZSA9IG9wdGlvbnMuaGVpZ2h0ZmllbGREaXN0YW5jZSB8fCAxO1xyXG4gICAgY29uc3QgaGVpZ2h0ZmllbGREYXRhID0gb3B0aW9ucy5oZWlnaHRmaWVsZERhdGEgfHwgW107XHJcbiAgICBjb25zdCBoZWlnaHRTY2FsZSA9IG9wdGlvbnMuaGVpZ2h0U2NhbGUgfHwgMDtcclxuICAgIGNvbnN0IHVwQXhpcyA9IG9wdGlvbnMuaGFzT3duUHJvcGVydHkoJ3VwQXhpcycpID8gb3B0aW9ucy51cEF4aXMgOiAxOyAvLyB4ID0gMDsgeSA9IDE7IHogPSAyXHJcbiAgICBjb25zdCBoZHQgPSAoKCkgPT4ge1xyXG4gICAgICAgIHN3aXRjaCAob3B0aW9ucy5oZWlnaHREYXRhVHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlICdzaG9ydCc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gQW1tby5QSFlfU0hPUlQ7XHJcbiAgICAgICAgICAgIGNhc2UgJ2Zsb2F0JzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBBbW1vLlBIWV9GTE9BVDtcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHJldHVybiBBbW1vLlBIWV9GTE9BVDtcclxuICAgICAgICB9XHJcbiAgICB9KSgpO1xyXG4gICAgY29uc3QgZmxpcFF1YWRFZGdlcyA9IG9wdGlvbnMuaGFzT3duUHJvcGVydHkoJ2ZsaXBRdWFkRWRnZXMnKSA/IG9wdGlvbnMuZmxpcFF1YWRFZGdlcyA6IHRydWU7XHJcbiAgICBjb25zdCBoZWlnaHRTdGlja0xlbmd0aCA9IGhlaWdodGZpZWxkRGF0YS5sZW5ndGg7XHJcbiAgICBjb25zdCBoZWlnaHRTdGlja1dpZHRoID0gaGVpZ2h0U3RpY2tMZW5ndGggPiAwID8gaGVpZ2h0ZmllbGREYXRhWzBdLmxlbmd0aCA6IDA7XHJcbiAgICBjb25zdCBkYXRhID0gQW1tby5fbWFsbG9jKGhlaWdodFN0aWNrTGVuZ3RoICogaGVpZ2h0U3RpY2tXaWR0aCAqIDQpO1xyXG4gICAgY29uc3QgcHRyID0gZGF0YSAvIDQ7XHJcbiAgICBsZXQgbWluSGVpZ2h0ID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZO1xyXG4gICAgbGV0IG1heEhlaWdodCA9IE51bWJlci5ORUdBVElWRV9JTkZJTklUWTtcclxuICAgIGxldCBpbmRleCA9IDA7XHJcbiAgICBmb3IgKGxldCBsID0gMDsgbCA8IGhlaWdodFN0aWNrTGVuZ3RoOyBsKyspIHtcclxuICAgICAgICBmb3IgKGxldCB3ID0gMDsgdyA8IGhlaWdodFN0aWNrV2lkdGg7IHcrKykge1xyXG4gICAgICAgICAgICBjb25zdCBoZWlnaHQgPSBoZWlnaHRmaWVsZERhdGFbbF1bd107XHJcbiAgICAgICAgICAgIEFtbW8uSEVBUEYzMltwdHIgKyBpbmRleF0gPSBoZWlnaHQ7XHJcbiAgICAgICAgICAgIGluZGV4Kys7XHJcbiAgICAgICAgICAgIG1pbkhlaWdodCA9IE1hdGgubWluKG1pbkhlaWdodCwgaGVpZ2h0KTtcclxuICAgICAgICAgICAgbWF4SGVpZ2h0ID0gTWF0aC5tYXgobWF4SGVpZ2h0LCBoZWlnaHQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnN0IGNvbGxpc2lvblNoYXBlID0gbmV3IEFtbW8uYnRIZWlnaHRmaWVsZFRlcnJhaW5TaGFwZShoZWlnaHRTdGlja1dpZHRoLCBoZWlnaHRTdGlja0xlbmd0aCwgZGF0YSwgaGVpZ2h0U2NhbGUsIG1pbkhlaWdodCwgbWF4SGVpZ2h0LCB1cEF4aXMsIGhkdCwgZmxpcFF1YWRFZGdlcyk7XHJcbiAgICBjb25zdCBzY2FsZSA9IG5ldyBBbW1vLmJ0VmVjdG9yMyhoZWlnaHRmaWVsZERpc3RhbmNlLCAxLCBoZWlnaHRmaWVsZERpc3RhbmNlKTtcclxuICAgIGNvbGxpc2lvblNoYXBlLnNldExvY2FsU2NhbGluZyhzY2FsZSk7XHJcbiAgICBBbW1vLmRlc3Ryb3koc2NhbGUpO1xyXG4gICAgY29sbGlzaW9uU2hhcGUuaGVpZ2h0ZmllbGREYXRhID0gZGF0YTtcclxuICAgIF9maW5pc2hDb2xsaXNpb25TaGFwZShjb2xsaXNpb25TaGFwZSwgb3B0aW9ucyk7XHJcbiAgICByZXR1cm4gY29sbGlzaW9uU2hhcGU7XHJcbn07XHJcbmV4cG9ydHMuY3JlYXRlSGVpZ2h0ZmllbGRUZXJyYWluU2hhcGUgPSBjcmVhdGVIZWlnaHRmaWVsZFRlcnJhaW5TaGFwZTtcclxuZnVuY3Rpb24gX3NldE9wdGlvbnMob3B0aW9ucykge1xyXG4gICAgLy8gTU9EICh5YW5kZXUpOiBBbGwgb2YgdGhpcyB3aWxsIGJlIGRvbmUgaW4gcGh5c2ljcy50c1xyXG4gICAgLy8gd2Ugb25seSBrZWVwIHR5cGUgYW5kIG1hcmdpblxyXG4gICAgb3B0aW9ucy50eXBlID0gb3B0aW9ucy50eXBlIHx8IGV4cG9ydHMuVFlQRS5IVUxMO1xyXG4gICAgb3B0aW9ucy5tYXJnaW4gPSBvcHRpb25zLmhhc093blByb3BlcnR5KCdtYXJnaW4nKSA/IG9wdGlvbnMubWFyZ2luIDogMC4wMTtcclxuICAgIHJldHVybjtcclxuICAgIG9wdGlvbnMuZml0ID0gb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgnZml0JykgPyBvcHRpb25zLmZpdCA6IGV4cG9ydHMuRklULkFMTDtcclxuICAgIG9wdGlvbnMudHlwZSA9IG9wdGlvbnMudHlwZSB8fCBleHBvcnRzLlRZUEUuSFVMTDtcclxuICAgIG9wdGlvbnMubWluSGFsZkV4dGVudCA9IG9wdGlvbnMuaGFzT3duUHJvcGVydHkoJ21pbkhhbGZFeHRlbnQnKSA/IG9wdGlvbnMubWluSGFsZkV4dGVudCA6IDA7XHJcbiAgICBvcHRpb25zLm1heEhhbGZFeHRlbnQgPSBvcHRpb25zLmhhc093blByb3BlcnR5KCdtYXhIYWxmRXh0ZW50JykgPyBvcHRpb25zLm1heEhhbGZFeHRlbnQgOiBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7XHJcbiAgICBvcHRpb25zLmN5bGluZGVyQXhpcyA9IG9wdGlvbnMuY3lsaW5kZXJBeGlzIHx8ICd5JztcclxuICAgIG9wdGlvbnMubWFyZ2luID0gb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgnbWFyZ2luJykgPyBvcHRpb25zLm1hcmdpbiA6IDAuMDE7XHJcbiAgICBvcHRpb25zLmluY2x1ZGVJbnZpc2libGUgPSBvcHRpb25zLmhhc093blByb3BlcnR5KCdpbmNsdWRlSW52aXNpYmxlJykgPyBvcHRpb25zLmluY2x1ZGVJbnZpc2libGUgOiBmYWxzZTtcclxuICAgIGlmICghb3B0aW9ucy5vZmZzZXQpIHtcclxuICAgICAgICBvcHRpb25zLm9mZnNldCA9IG5ldyBpbmRleF8xLlZlY3RvcjMoKTtcclxuICAgIH1cclxuICAgIGlmICghb3B0aW9ucy5vcmllbnRhdGlvbikge1xyXG4gICAgICAgIG9wdGlvbnMub3JpZW50YXRpb24gPSBuZXcgaW5kZXhfMS5RdWF0ZXJuaW9uKCk7XHJcbiAgICB9XHJcbn1cclxuY29uc3QgX2ZpbmlzaENvbGxpc2lvblNoYXBlID0gZnVuY3Rpb24gKGNvbGxpc2lvblNoYXBlLCBvcHRpb25zLCBzY2FsZSkge1xyXG4gICAgLy8gTU9EICh5YW5kZXUpOiBBbGwgb2YgdGhpcyB3aWxsIGJlIGRvbmUgaW4gcGh5c2ljcy50c1xyXG4gICAgcmV0dXJuO1xyXG4gICAgY29sbGlzaW9uU2hhcGUudHlwZSA9IG9wdGlvbnMudHlwZTtcclxuICAgIGNvbGxpc2lvblNoYXBlLnNldE1hcmdpbihvcHRpb25zLm1hcmdpbik7XHJcbiAgICBjb2xsaXNpb25TaGFwZS5kZXN0cm95ID0gKCkgPT4ge1xyXG4gICAgICAgIGZvciAobGV0IHJlcyBvZiBjb2xsaXNpb25TaGFwZS5yZXNvdXJjZXMgfHwgW10pIHtcclxuICAgICAgICAgICAgQW1tby5kZXN0cm95KHJlcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjb2xsaXNpb25TaGFwZS5oZWlnaHRmaWVsZERhdGEpIHtcclxuICAgICAgICAgICAgQW1tby5fZnJlZShjb2xsaXNpb25TaGFwZS5oZWlnaHRmaWVsZERhdGEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBBbW1vLmRlc3Ryb3koY29sbGlzaW9uU2hhcGUpO1xyXG4gICAgfTtcclxuICAgIGNvbnN0IGxvY2FsVHJhbnNmb3JtID0gbmV3IEFtbW8uYnRUcmFuc2Zvcm0oKTtcclxuICAgIGNvbnN0IHJvdGF0aW9uID0gbmV3IEFtbW8uYnRRdWF0ZXJuaW9uKCk7XHJcbiAgICBsb2NhbFRyYW5zZm9ybS5zZXRJZGVudGl0eSgpO1xyXG4gICAgbG9jYWxUcmFuc2Zvcm0uZ2V0T3JpZ2luKCkuc2V0VmFsdWUob3B0aW9ucy5vZmZzZXQueCwgb3B0aW9ucy5vZmZzZXQueSwgb3B0aW9ucy5vZmZzZXQueik7XHJcbiAgICByb3RhdGlvbi5zZXRWYWx1ZShvcHRpb25zLm9yaWVudGF0aW9uLngsIG9wdGlvbnMub3JpZW50YXRpb24ueSwgb3B0aW9ucy5vcmllbnRhdGlvbi56LCBvcHRpb25zLm9yaWVudGF0aW9uLncpO1xyXG4gICAgbG9jYWxUcmFuc2Zvcm0uc2V0Um90YXRpb24ocm90YXRpb24pO1xyXG4gICAgQW1tby5kZXN0cm95KHJvdGF0aW9uKTtcclxuICAgIGlmIChzY2FsZSkge1xyXG4gICAgICAgIGNvbnN0IGxvY2FsU2NhbGUgPSBuZXcgQW1tby5idFZlY3RvcjMoc2NhbGUueCwgc2NhbGUueSwgc2NhbGUueik7XHJcbiAgICAgICAgY29sbGlzaW9uU2hhcGUuc2V0TG9jYWxTY2FsaW5nKGxvY2FsU2NhbGUpO1xyXG4gICAgICAgIEFtbW8uZGVzdHJveShsb2NhbFNjYWxlKTtcclxuICAgIH1cclxuICAgIGNvbGxpc2lvblNoYXBlLmxvY2FsVHJhbnNmb3JtID0gbG9jYWxUcmFuc2Zvcm07XHJcbn07XHJcbmV4cG9ydHMuaXRlcmF0ZUdlb21ldHJpZXMgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgY29uc3QgaW52ZXJzZSA9IG5ldyBpbmRleF8xLk1hdHJpeDQoKTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAocm9vdCwgb3B0aW9ucywgY2IpIHtcclxuICAgICAgICAvLyBNT0QgKHlhbmRldSk6IFVwZGF0ZSB0byB0aHJlZS5qcyByMTIzXHJcbiAgICAgICAgLy8gY29tcGF0aWJpbGl0eSBmaXggZm9yIHRocmVlLmpzID49IHIxMjMgKERlemVtYmVyIDIwMjApXHJcbiAgICAgICAgaWYgKCtpbmRleF8xLlJFVklTSU9OID49IDEyMylcclxuICAgICAgICAgICAgaW52ZXJzZS5jb3B5KHJvb3QubWF0cml4V29ybGQpLmludmVydCgpO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgaW52ZXJzZS5nZXRJbnZlcnNlKHJvb3QubWF0cml4V29ybGQpO1xyXG4gICAgICAgIGNvbnN0IHNjYWxlID0gbmV3IGluZGV4XzEuVmVjdG9yMygpO1xyXG4gICAgICAgIHNjYWxlLnNldEZyb21NYXRyaXhTY2FsZShyb290Lm1hdHJpeFdvcmxkKTtcclxuICAgICAgICByb290LnRyYXZlcnNlKG1lc2ggPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB0cmFuc2Zvcm0gPSBuZXcgaW5kZXhfMS5NYXRyaXg0KCk7XHJcbiAgICAgICAgICAgIGlmIChtZXNoLmlzTWVzaCAmJlxyXG4gICAgICAgICAgICAgICAgLy8gTU9EICh5YW5kZXUpOiBObyBuZWVkIHRvIGNoZWNrIGlmIG5hbWUgaXMgJ1NreSdcclxuICAgICAgICAgICAgICAgIC8vIG1lc2gubmFtZSAhPT0gJ1NreScgJiZcclxuICAgICAgICAgICAgICAgIChvcHRpb25zLmluY2x1ZGVJbnZpc2libGUgfHwgKG1lc2guZWwgJiYgbWVzaC5lbC5vYmplY3QzRC52aXNpYmxlKSB8fCBtZXNoLnZpc2libGUpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzaCA9PT0gcm9vdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybS5pZGVudGl0eSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzaC51cGRhdGVXb3JsZE1hdHJpeCh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm0ubXVsdGlwbHlNYXRyaWNlcyhpbnZlcnNlLCBtZXNoLm1hdHJpeFdvcmxkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIHRvZG86IG1pZ2h0IHdhbnQgdG8gcmV0dXJuIG51bGwgeGZvcm0gaWYgdGhpcyBpcyB0aGUgcm9vdCBzbyB0aGF0IGNhbGxlcnMgY2FuIGF2b2lkIG11bHRpcGx5aW5nXHJcbiAgICAgICAgICAgICAgICAvLyB0aGluZ3MgYnkgdGhlIGlkZW50aXR5IG1hdHJpeFxyXG4gICAgICAgICAgICAgICAgY2IobWVzaC5nZW9tZXRyeS5pc0J1ZmZlckdlb21ldHJ5ID8gbWVzaC5nZW9tZXRyeS5hdHRyaWJ1dGVzLnBvc2l0aW9uLmFycmF5IDogbWVzaC5nZW9tZXRyeS52ZXJ0aWNlcywgdHJhbnNmb3JtLmVsZW1lbnRzLCBtZXNoLmdlb21ldHJ5LmluZGV4ID8gbWVzaC5nZW9tZXRyeS5pbmRleC5hcnJheSA6IG51bGwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG5jb25zdCBfY29tcHV0ZVNjYWxlID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGNvbnN0IG1hdHJpeCA9IG5ldyBpbmRleF8xLk1hdHJpeDQoKTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAobWF0cml4V29ybGQsIG9wdGlvbnMgPSB7fSkge1xyXG4gICAgICAgIGNvbnN0IHNjYWxlID0gbmV3IGluZGV4XzEuVmVjdG9yMygxLCAxLCAxKTtcclxuICAgICAgICBpZiAob3B0aW9ucy5maXQgPT09IGV4cG9ydHMuRklULkFMTCkge1xyXG4gICAgICAgICAgICBtYXRyaXguZnJvbUFycmF5KG1hdHJpeFdvcmxkKTtcclxuICAgICAgICAgICAgc2NhbGUuc2V0RnJvbU1hdHJpeFNjYWxlKG1hdHJpeCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzY2FsZTtcclxuICAgIH07XHJcbn0pKCk7XHJcbmNvbnN0IF9jb21wdXRlUmFkaXVzID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGNvbnN0IGNlbnRlciA9IG5ldyBpbmRleF8xLlZlY3RvcjMoKTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAodmVydGljZXMsIG1hdHJpY2VzLCBib3VuZHMpIHtcclxuICAgICAgICBsZXQgbWF4UmFkaXVzU3EgPSAwO1xyXG4gICAgICAgIGxldCB7IHg6IGN4LCB5OiBjeSwgejogY3ogfSA9IGJvdW5kcy5nZXRDZW50ZXIoY2VudGVyKTtcclxuICAgICAgICBfaXRlcmF0ZVZlcnRpY2VzKHZlcnRpY2VzLCBtYXRyaWNlcywgdiA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGR4ID0gY3ggLSB2Lng7XHJcbiAgICAgICAgICAgIGNvbnN0IGR5ID0gY3kgLSB2Lnk7XHJcbiAgICAgICAgICAgIGNvbnN0IGR6ID0gY3ogLSB2Lno7XHJcbiAgICAgICAgICAgIG1heFJhZGl1c1NxID0gTWF0aC5tYXgobWF4UmFkaXVzU3EsIGR4ICogZHggKyBkeSAqIGR5ICsgZHogKiBkeik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIE1hdGguc3FydChtYXhSYWRpdXNTcSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG5jb25zdCBfY29tcHV0ZUhhbGZFeHRlbnRzID0gZnVuY3Rpb24gKGJvdW5kcywgbWluSGFsZkV4dGVudCwgbWF4SGFsZkV4dGVudCkge1xyXG4gICAgY29uc3QgaGFsZkV4dGVudHMgPSBuZXcgaW5kZXhfMS5WZWN0b3IzKCk7XHJcbiAgICByZXR1cm4gaGFsZkV4dGVudHMuc3ViVmVjdG9ycyhib3VuZHMubWF4LCBib3VuZHMubWluKS5tdWx0aXBseVNjYWxhcigwLjUpLmNsYW1wU2NhbGFyKG1pbkhhbGZFeHRlbnQsIG1heEhhbGZFeHRlbnQpO1xyXG59O1xyXG5jb25zdCBfY29tcHV0ZUxvY2FsT2Zmc2V0ID0gZnVuY3Rpb24gKG1hdHJpeCwgYm91bmRzLCB0YXJnZXQpIHtcclxuICAgIHRhcmdldC5hZGRWZWN0b3JzKGJvdW5kcy5tYXgsIGJvdW5kcy5taW4pLm11bHRpcGx5U2NhbGFyKDAuNSkuYXBwbHlNYXRyaXg0KG1hdHJpeCk7XHJcbiAgICByZXR1cm4gdGFyZ2V0O1xyXG59O1xyXG4vLyByZXR1cm5zIHRoZSBib3VuZGluZyBib3ggZm9yIHRoZSBnZW9tZXRyaWVzIHVuZGVybmVhdGggYHJvb3RgLlxyXG5jb25zdCBfY29tcHV0ZUJvdW5kcyA9IGZ1bmN0aW9uICh2ZXJ0aWNlcywgbWF0cmljZXMpIHtcclxuICAgIGNvbnN0IGJvdW5kcyA9IG5ldyBpbmRleF8xLkJveDMoKTtcclxuICAgIGxldCBtaW5YID0gK0luZmluaXR5O1xyXG4gICAgbGV0IG1pblkgPSArSW5maW5pdHk7XHJcbiAgICBsZXQgbWluWiA9ICtJbmZpbml0eTtcclxuICAgIGxldCBtYXhYID0gLUluZmluaXR5O1xyXG4gICAgbGV0IG1heFkgPSAtSW5maW5pdHk7XHJcbiAgICBsZXQgbWF4WiA9IC1JbmZpbml0eTtcclxuICAgIGJvdW5kcy5taW4uc2V0KDAsIDAsIDApO1xyXG4gICAgYm91bmRzLm1heC5zZXQoMCwgMCwgMCk7XHJcbiAgICBfaXRlcmF0ZVZlcnRpY2VzKHZlcnRpY2VzLCBtYXRyaWNlcywgdiA9PiB7XHJcbiAgICAgICAgaWYgKHYueCA8IG1pblgpXHJcbiAgICAgICAgICAgIG1pblggPSB2Lng7XHJcbiAgICAgICAgaWYgKHYueSA8IG1pblkpXHJcbiAgICAgICAgICAgIG1pblkgPSB2Lnk7XHJcbiAgICAgICAgaWYgKHYueiA8IG1pblopXHJcbiAgICAgICAgICAgIG1pblogPSB2Lno7XHJcbiAgICAgICAgaWYgKHYueCA+IG1heFgpXHJcbiAgICAgICAgICAgIG1heFggPSB2Lng7XHJcbiAgICAgICAgaWYgKHYueSA+IG1heFkpXHJcbiAgICAgICAgICAgIG1heFkgPSB2Lnk7XHJcbiAgICAgICAgaWYgKHYueiA+IG1heFopXHJcbiAgICAgICAgICAgIG1heFogPSB2Lno7XHJcbiAgICB9KTtcclxuICAgIGJvdW5kcy5taW4uc2V0KG1pblgsIG1pblksIG1pblopO1xyXG4gICAgYm91bmRzLm1heC5zZXQobWF4WCwgbWF4WSwgbWF4Wik7XHJcbiAgICByZXR1cm4gYm91bmRzO1xyXG59O1xyXG5jb25zdCBfaXRlcmF0ZVZlcnRpY2VzID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGNvbnN0IHZlcnRleCA9IG5ldyBpbmRleF8xLlZlY3RvcjMoKTtcclxuICAgIGNvbnN0IG1hdHJpeCA9IG5ldyBpbmRleF8xLk1hdHJpeDQoKTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAodmVydGljZXMsIG1hdHJpY2VzLCBjYikge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmVydGljZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgbWF0cml4LmZyb21BcnJheShtYXRyaWNlc1tpXSk7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdmVydGljZXNbaV0ubGVuZ3RoOyBqICs9IDMpIHtcclxuICAgICAgICAgICAgICAgIHZlcnRleC5zZXQodmVydGljZXNbaV1bal0sIHZlcnRpY2VzW2ldW2ogKyAxXSwgdmVydGljZXNbaV1baiArIDJdKS5hcHBseU1hdHJpeDQobWF0cml4KTtcclxuICAgICAgICAgICAgICAgIGNiKHZlcnRleCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59KSgpO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD10aHJlZS10by1hbW1vLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xyXG4vKipcclxuICogQGF1dGhvciAgICAgICBZYW5uaWNrIERldWJlbCAoaHR0cHM6Ly9naXRodWIuY29tL3lhbmRldSlcclxuICogQGNvcHlyaWdodCAgICBDb3B5cmlnaHQgKGMpIDIwMjAgWWFubmljayBEZXViZWw7IFByb2plY3QgVXJsOiBodHRwczovL2dpdGh1Yi5jb20vZW5hYmxlM2QvZW5hYmxlM2RcclxuICogQGxpY2Vuc2UgICAgICB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2VuYWJsZTNkL2VuYWJsZTNkL2Jsb2IvbWFzdGVyL0xJQ0VOU0V8R05VIEdQTHYzfVxyXG4gKi9cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLmNyZWF0ZVRvcnVzU2hhcGUgPSB2b2lkIDA7XHJcbi8vIGh0dHBzOi8vcHlidWxsZXQub3JnL0J1bGxldC9waHBCQjMvdmlld3RvcGljLnBocD90PTcyMjhcclxuY29uc3QgY3JlYXRlVG9ydXNTaGFwZSA9IChjb25maWcsIHF1YXQpID0+IHtcclxuICAgIGNvbnN0IHsgcmFkaXVzID0gMSwgdHViZSA9IDAuNCwgdHVidWxhclNlZ21lbnRzID0gOCB9ID0gY29uZmlnO1xyXG4gICAgY29uc3QgU0lNRF9QSSA9IE1hdGguUEk7XHJcbiAgICBjb25zdCBzdWJkaXZpc2lvbnMgPSB0dWJ1bGFyU2VnbWVudHM7XHJcbiAgICBjb25zdCBnYXAgPSBNYXRoLnNxcnQoMi4wICogdHViZSAqIHR1YmUgLSAyLjAgKiB0dWJlICogdHViZSAqIE1hdGguY29zKCgyLjAgKiBTSU1EX1BJKSAvIHN1YmRpdmlzaW9ucykpO1xyXG4gICAgY29uc3QgYnRIYWxmRXh0ZW50cyA9IG5ldyBBbW1vLmJ0VmVjdG9yMyh0dWJlLCBTSU1EX1BJIC8gc3ViZGl2aXNpb25zICsgMC41ICogZ2FwLCB0dWJlKTtcclxuICAgIGNvbnN0IGN5bGluZGVyU2hhcGUgPSBuZXcgQW1tby5idEN5bGluZGVyU2hhcGUoYnRIYWxmRXh0ZW50cyk7XHJcbiAgICBjeWxpbmRlclNoYXBlLnNldE1hcmdpbigwLjA1KTtcclxuICAgIGNvbnN0IGNvbXBvdW5kU2hhcGUgPSBuZXcgQW1tby5idENvbXBvdW5kU2hhcGUoKTtcclxuICAgIGNvbnN0IGZvcndhcmQgPSBuZXcgQW1tby5idFZlY3RvcjMoMCwgMCwgMSk7XHJcbiAgICBjb25zdCBzaWRlID0gbmV3IEFtbW8uYnRWZWN0b3IzKDAsIHJhZGl1cywgMCk7XHJcbiAgICBjb25zdCByb3RhdGlvbiA9IG5ldyBBbW1vLmJ0UXVhdGVybmlvbihxdWF0LngsIHF1YXQueSwgcXVhdC56LCBxdWF0LncpO1xyXG4gICAgZm9yIChsZXQgeCA9IDA7IHggPCBzdWJkaXZpc2lvbnM7IHgrKykge1xyXG4gICAgICAgIGNvbnN0IGFuZ2xlID0gKHggKiAyLjAgKiBTSU1EX1BJKSAvIHN1YmRpdmlzaW9ucztcclxuICAgICAgICBjb25zdCBwb3NpdGlvbiA9IHNpZGUucm90YXRlKGZvcndhcmQsIGFuZ2xlKTtcclxuICAgICAgICBjb25zdCB0cmFuc2Zvcm0gPSBuZXcgQW1tby5idFRyYW5zZm9ybSgpO1xyXG4gICAgICAgIHJvdGF0aW9uLnNldFJvdGF0aW9uKGZvcndhcmQsIGFuZ2xlICsgTWF0aC5QSSAvIDIpO1xyXG4gICAgICAgIHRyYW5zZm9ybS5zZXRJZGVudGl0eSgpO1xyXG4gICAgICAgIHRyYW5zZm9ybS5zZXRPcmlnaW4ocG9zaXRpb24pO1xyXG4gICAgICAgIHRyYW5zZm9ybS5zZXRSb3RhdGlvbihyb3RhdGlvbik7XHJcbiAgICAgICAgY29tcG91bmRTaGFwZS5hZGRDaGlsZFNoYXBlKHRyYW5zZm9ybSwgY3lsaW5kZXJTaGFwZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gY29tcG91bmRTaGFwZTtcclxufTtcclxuZXhwb3J0cy5jcmVhdGVUb3J1c1NoYXBlID0gY3JlYXRlVG9ydXNTaGFwZTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dG9ydXNTaGFwZS5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG4vLyBodHRwczovL3d3dy50eXBlc2NyaXB0bGFuZy5vcmcvZG9jcy9oYW5kYm9vay9taXhpbnMuaHRtbFxyXG5jb25zdCBhcHBseU1peGlucyA9IChkZXJpdmVkQ3RvciwgYmFzZUN0b3JzKSA9PiB7XHJcbiAgICBiYXNlQ3RvcnMuZm9yRWFjaChiYXNlQ3RvciA9PiB7XHJcbiAgICAgICAgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYmFzZUN0b3IucHJvdG90eXBlKS5mb3JFYWNoKG5hbWUgPT4ge1xyXG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShkZXJpdmVkQ3Rvci5wcm90b3R5cGUsIG5hbWUsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYmFzZUN0b3IucHJvdG90eXBlLCBuYW1lKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gYXBwbHlNaXhpbnM7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcGx5TWl4aW5zLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmNvbnN0IGluZGV4XzEgPSByZXF1aXJlKFwiQGVuYWJsZTNkL3RocmVlLXdyYXBwZXIvZGlzdC9pbmRleFwiKTtcclxuY2xhc3MgRGVmYXVsdE1hdGVyaWFsIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuX2RlZmF1bHRNYXRlcmlhbCA9IG5ldyBpbmRleF8xLk1lc2hMYW1iZXJ0TWF0ZXJpYWwoeyBjb2xvcjogMHhjY2NjY2MgfSk7XHJcbiAgICB9XHJcbiAgICBnZXQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZmF1bHRNYXRlcmlhbDtcclxuICAgIH1cclxufVxyXG5leHBvcnRzLmRlZmF1bHQgPSBEZWZhdWx0TWF0ZXJpYWw7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlZmF1bHRNYXRlcmlhbC5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcclxuLyoqXHJcbiAqIEBhdXRob3IgICAgICAgWWFubmljayBEZXViZWwgKGh0dHBzOi8vZ2l0aHViLmNvbS95YW5kZXUpXHJcbiAqIEBjb3B5cmlnaHQgICAgQ29weXJpZ2h0IChjKSAyMDIwIFlhbm5pY2sgRGV1YmVsOyBQcm9qZWN0IFVybDogaHR0cHM6Ly9naXRodWIuY29tL2VuYWJsZTNkL2VuYWJsZTNkXHJcbiAqIEBsaWNlbnNlICAgICAge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9lbmFibGUzZC9lbmFibGUzZC9ibG9iL21hc3Rlci9MSUNFTlNFfEdOVSBHUEx2M31cclxuICovXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5FeHRlbmRlZEdyb3VwID0gdm9pZCAwO1xyXG5jb25zdCBpbmRleF8xID0gcmVxdWlyZShcIkBlbmFibGUzZC90aHJlZS13cmFwcGVyL2Rpc3QvaW5kZXhcIik7XHJcbmNsYXNzIEV4dGVuZGVkR3JvdXAgZXh0ZW5kcyBpbmRleF8xLkdyb3VwIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5pc01lc2ggPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmhhc0JvZHkgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLm5hbWUgPSBgb2JqZWN0LSR7dGhpcy5pZH1gO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydHMuRXh0ZW5kZWRHcm91cCA9IEV4dGVuZGVkR3JvdXA7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWV4dGVuZGVkR3JvdXAuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbi8qKlxyXG4gKiBAYXV0aG9yICAgICAgIFlhbm5pY2sgRGV1YmVsIChodHRwczovL2dpdGh1Yi5jb20veWFuZGV1KVxyXG4gKiBAY29weXJpZ2h0ICAgIENvcHlyaWdodCAoYykgMjAyMCBZYW5uaWNrIERldWJlbDsgUHJvamVjdCBVcmw6IGh0dHBzOi8vZ2l0aHViLmNvbS9lbmFibGUzZC9lbmFibGUzZFxyXG4gKiBAbGljZW5zZSAgICAgIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZW5hYmxlM2QvZW5hYmxlM2QvYmxvYi9tYXN0ZXIvTElDRU5TRXxHTlUgR1BMdjN9XHJcbiAqL1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuRXh0ZW5kZWRNZXNoID0gdm9pZCAwO1xyXG5jb25zdCBpbmRleF8xID0gcmVxdWlyZShcIkBlbmFibGUzZC90aHJlZS13cmFwcGVyL2Rpc3QvaW5kZXhcIik7XHJcbmNsYXNzIEV4dGVuZGVkTWVzaCBleHRlbmRzIGluZGV4XzEuTWVzaCB7XHJcbiAgICBjb25zdHJ1Y3RvcihnZW9tZXRyeSwgbWF0ZXJpYWwpIHtcclxuICAgICAgICBzdXBlcihnZW9tZXRyeSwgbWF0ZXJpYWwpO1xyXG4gICAgICAgIHRoaXMudmVjdG9yMyA9IG5ldyBpbmRleF8xLlZlY3RvcjMoKTtcclxuICAgICAgICB0aGlzLmlzR3JvdXAgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmhhc0JvZHkgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLm5hbWUgPSBgb2JqZWN0LSR7dGhpcy5pZH1gO1xyXG4gICAgfVxyXG4gICAgLyoqIFJldHVybnMgYWxsIHZhbHVlcyByZWxhdGl2ZSB0byB0aGUgd29ybGQuICovXHJcbiAgICBnZXQgd29ybGQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgdGhldGE6IHRoaXMud29ybGRUaGV0YSxcclxuICAgICAgICAgICAgcGhpOiB0aGlzLndvcmxkUGhpXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIC8qKiBHZXQgdGhlIHRoZXRhIHJlbGF0aXZlIHRvIHRoZSB3b3JsZC4gKi9cclxuICAgIGdldCB3b3JsZFRoZXRhKCkge1xyXG4gICAgICAgIHRoaXMuZ2V0V29ybGREaXJlY3Rpb24odGhpcy52ZWN0b3IzKTtcclxuICAgICAgICByZXR1cm4gTWF0aC5hdGFuMih0aGlzLnZlY3RvcjMueCwgdGhpcy52ZWN0b3IzLnopO1xyXG4gICAgfVxyXG4gICAgLyoqIEdldCB0aGUgcGhpIHJlbGF0aXZlIHRvIHRoZSB3b3JsZC4gKi9cclxuICAgIGdldCB3b3JsZFBoaSgpIHtcclxuICAgICAgICB0aGlzLmdldFdvcmxkRGlyZWN0aW9uKHRoaXMudmVjdG9yMyk7XHJcbiAgICAgICAgcmV0dXJuIE1hdGguYWNvcyh0aGlzLnZlY3RvcjMueSk7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0cy5FeHRlbmRlZE1lc2ggPSBFeHRlbmRlZE1lc2g7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWV4dGVuZGVkTWVzaC5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcclxuLyoqXHJcbiAqIEBhdXRob3IgICAgICAgWWFubmljayBEZXViZWwgKGh0dHBzOi8vZ2l0aHViLmNvbS95YW5kZXUpXHJcbiAqIEBjb3B5cmlnaHQgICAgQ29weXJpZ2h0IChjKSAyMDIwIFlhbm5pY2sgRGV1YmVsOyBQcm9qZWN0IFVybDogaHR0cHM6Ly9naXRodWIuY29tL2VuYWJsZTNkL2VuYWJsZTNkXHJcbiAqIEBsaWNlbnNlICAgICAge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9lbmFibGUzZC9lbmFibGUzZC9ibG9iL21hc3Rlci9MSUNFTlNFfEdOVSBHUEx2M31cclxuICovXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5FeHRlbmRlZE9iamVjdDNEID0gdm9pZCAwO1xyXG5jb25zdCBpbmRleF8xID0gcmVxdWlyZShcIkBlbmFibGUzZC90aHJlZS13cmFwcGVyL2Rpc3QvaW5kZXhcIik7XHJcbi8qKlxyXG4gKiBFeHRlbmRzIHRoZSBPYmplY3QzRCBjbGFzcyBmcm9tIFRIUkVFLmpzIGFuZCBpbXBsZW1lbnRzIHByb3BlcnRpZXMgZnJvbSBMaW5lLCBNZXNoIGFuZCBQb2ludHMuXHJcbiAqL1xyXG5jbGFzcyBFeHRlbmRlZE9iamVjdDNEIGV4dGVuZHMgaW5kZXhfMS5PYmplY3QzRCB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMudmVjdG9yMyA9IG5ldyBpbmRleF8xLlZlY3RvcjMoKTtcclxuICAgICAgICB0aGlzLmlzR3JvdXAgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmhhc0JvZHkgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmFuaW1zID0ge307IC8vIGRlcHJlY2F0ZWRcclxuICAgICAgICB0aGlzLl9jdXJyZW50QW5pbWF0aW9uID0gJyc7XHJcbiAgICAgICAgdGhpcy5fYW5pbWF0aW9uQWN0aW9ucyA9IG5ldyBNYXAoKTtcclxuICAgICAgICB0aGlzLm5hbWUgPSBgb2JqZWN0LSR7dGhpcy5pZH1gO1xyXG4gICAgfVxyXG4gICAgLyoqIHNldEFjdGlvbihuYW1lKSBpcyBkZXByZWNhdGVkLiBVc2UgYW5pbWF0aW9uLnBsYXkobmFtZSkgaW5zdGVhZCEgKi9cclxuICAgIHNldEFjdGlvbihuYW1lKSB7XHJcbiAgICAgICAgY29uc29sZS53YXJuKCdbZW5hYmxlM2RdIHNldEFjdGlvbihuYW1lKSBpcyBkZXByZWNhdGVkLiBVc2UgYW5pbWF0aW9uLnBsYXkobmFtZSkgaW5zdGVhZCEnKTtcclxuICAgICAgICB0aGlzLmFuaW1hdGlvblBsYXkobmFtZSk7XHJcbiAgICB9XHJcbiAgICAvKiogUmV0dXJucyBhbGwgdmFsdWVzIHJlbGF0aXZlIHRvIHRoZSB3b3JsZC4gKi9cclxuICAgIGdldCB3b3JsZCgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB0aGV0YTogdGhpcy53b3JsZFRoZXRhLFxyXG4gICAgICAgICAgICBwaGk6IHRoaXMud29ybGRQaGlcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgLyoqIEdldCB0aGUgdGhldGEgcmVsYXRpdmUgdG8gdGhlIHdvcmxkLiAqL1xyXG4gICAgZ2V0IHdvcmxkVGhldGEoKSB7XHJcbiAgICAgICAgdGhpcy5nZXRXb3JsZERpcmVjdGlvbih0aGlzLnZlY3RvcjMpO1xyXG4gICAgICAgIHJldHVybiBNYXRoLmF0YW4yKHRoaXMudmVjdG9yMy54LCB0aGlzLnZlY3RvcjMueik7XHJcbiAgICB9XHJcbiAgICAvKiogR2V0IHRoZSBwaGkgcmVsYXRpdmUgdG8gdGhlIHdvcmxkLiAqL1xyXG4gICAgZ2V0IHdvcmxkUGhpKCkge1xyXG4gICAgICAgIHRoaXMuZ2V0V29ybGREaXJlY3Rpb24odGhpcy52ZWN0b3IzKTtcclxuICAgICAgICByZXR1cm4gTWF0aC5hY29zKHRoaXMudmVjdG9yMy55KTtcclxuICAgIH1cclxuICAgIGdldCBhbmltYXRpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgY3VycmVudDogdGhpcy5fY3VycmVudEFuaW1hdGlvbixcclxuICAgICAgICAgICAgYWRkOiAoa2V5LCBhbmltYXRpb24pID0+IHRoaXMuYW5pbWF0aW9uQWRkKGtleSwgYW5pbWF0aW9uKSxcclxuICAgICAgICAgICAgcGxheTogKG5hbWUsIHRyYW5zaXRpb25EdXJhdGlvbiA9IDUwMCwgbG9vcCA9IHRydWUpID0+IHRoaXMuYW5pbWF0aW9uUGxheShuYW1lLCB0cmFuc2l0aW9uRHVyYXRpb24sIGxvb3ApLFxyXG4gICAgICAgICAgICBtaXhlcjogdGhpcy5hbmltYXRpb25NaXhlclxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBzZXQgYW5pbWF0aW9uTWl4ZXIoYW5pbWF0aW9uTWl4ZXIpIHtcclxuICAgICAgICB0aGlzLl9hbmltYXRpb25NaXhlciA9IGFuaW1hdGlvbk1peGVyO1xyXG4gICAgfVxyXG4gICAgZ2V0IGFuaW1hdGlvbk1peGVyKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5fYW5pbWF0aW9uTWl4ZXIpXHJcbiAgICAgICAgICAgIHRoaXMuX2FuaW1hdGlvbk1peGVyID0gbmV3IGluZGV4XzEuQW5pbWF0aW9uTWl4ZXIodGhpcyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FuaW1hdGlvbk1peGVyO1xyXG4gICAgfVxyXG4gICAgYW5pbWF0aW9uQWRkKGtleSwgYW5pbWF0aW9uKSB7XHJcbiAgICAgICAgdGhpcy5fYW5pbWF0aW9uQWN0aW9ucy5zZXQoa2V5LCB0aGlzLmFuaW1hdGlvbk1peGVyLmNsaXBBY3Rpb24oYW5pbWF0aW9uKSk7XHJcbiAgICB9XHJcbiAgICBhbmltYXRpb25QbGF5KG5hbWUsIHRyYW5zaXRpb25EdXJhdGlvbiA9IDUwMCwgbG9vcCA9IHRydWUpIHtcclxuICAgICAgICBjb25zdCBuZXh0ID0gdGhpcy5fYW5pbWF0aW9uQWN0aW9ucy5nZXQobmFtZSk7XHJcbiAgICAgICAgY29uc3QgY3VycmVudCA9IHRoaXMuX2FuaW1hdGlvbkFjdGlvbnMuZ2V0KHRoaXMuX2N1cnJlbnRBbmltYXRpb24pO1xyXG4gICAgICAgIGlmIChuZXh0KSB7XHJcbiAgICAgICAgICAgIG5leHQucmVzZXQoKTtcclxuICAgICAgICAgICAgaWYgKGN1cnJlbnQpIHtcclxuICAgICAgICAgICAgICAgIG5leHQuY3Jvc3NGYWRlRnJvbShjdXJyZW50LCB0cmFuc2l0aW9uRHVyYXRpb24gLyAxMDAwLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIG5leHQuY2xhbXBXaGVuRmluaXNoZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghbG9vcClcclxuICAgICAgICAgICAgICAgIG5leHQuc2V0TG9vcChpbmRleF8xLkxvb3BPbmNlLCAwKTtcclxuICAgICAgICAgICAgbmV4dC5wbGF5KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2N1cnJlbnRBbmltYXRpb24gPSBuYW1lO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydHMuRXh0ZW5kZWRPYmplY3QzRCA9IEV4dGVuZGVkT2JqZWN0M0Q7XHJcbmV4cG9ydHMuZGVmYXVsdCA9IEV4dGVuZGVkT2JqZWN0M0Q7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWV4dGVuZGVkT2JqZWN0M0QuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbi8qKlxyXG4gKiBAYXV0aG9yICAgICAgIFlhbm5pY2sgRGV1YmVsIChodHRwczovL2dpdGh1Yi5jb20veWFuZGV1KVxyXG4gKiBAY29weXJpZ2h0ICAgIENvcHlyaWdodCAoYykgMjAyMCBZYW5uaWNrIERldWJlbDsgUHJvamVjdCBVcmw6IGh0dHBzOi8vZ2l0aHViLmNvbS9lbmFibGUzZC9lbmFibGUzZFxyXG4gKiBAbGljZW5zZSAgICAgIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZW5hYmxlM2QvZW5hYmxlM2QvYmxvYi9tYXN0ZXIvTElDRU5TRXxHTlUgR1BMdjN9XHJcbiAqL1xyXG52YXIgX19yZXN0ID0gKHRoaXMgJiYgdGhpcy5fX3Jlc3QpIHx8IGZ1bmN0aW9uIChzLCBlKSB7XHJcbiAgICB2YXIgdCA9IHt9O1xyXG4gICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApXHJcbiAgICAgICAgdFtwXSA9IHNbcF07XHJcbiAgICBpZiAocyAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSBcImZ1bmN0aW9uXCIpXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMCAmJiBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwocywgcFtpXSkpXHJcbiAgICAgICAgICAgICAgICB0W3BbaV1dID0gc1twW2ldXTtcclxuICAgICAgICB9XHJcbiAgICByZXR1cm4gdDtcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5jb25zdCBpbmRleF8xID0gcmVxdWlyZShcIkBlbmFibGUzZC90aHJlZS13cmFwcGVyL2Rpc3QvaW5kZXhcIik7XHJcbmNvbnN0IGV4dGVuZGVkTWVzaF8xID0gcmVxdWlyZShcIi4vZXh0ZW5kZWRNZXNoXCIpO1xyXG5jb25zdCBsb2dnZXJfMSA9IHJlcXVpcmUoXCIuL2xvZ2dlclwiKTtcclxuY29uc3QgZGVmYXVsdE1hdGVyaWFsXzEgPSByZXF1aXJlKFwiLi9kZWZhdWx0TWF0ZXJpYWxcIik7XHJcbmNsYXNzIEZhY3RvcmllcyB7XHJcbiAgICBjb25zdHJ1Y3RvcihzY2VuZSkge1xyXG4gICAgICAgIHRoaXMuc2NlbmUgPSBzY2VuZTtcclxuICAgICAgICB0aGlzLmlzSGVhZGxlc3MgPSBzY2VuZSA9PT0gJ2hlYWRsZXNzJyA/IHRydWUgOiBmYWxzZTtcclxuICAgICAgICB0aGlzLmRlZmF1bHRNYXRlcmlhbCA9IG5ldyBkZWZhdWx0TWF0ZXJpYWxfMS5kZWZhdWx0KCk7XHJcbiAgICB9XHJcbiAgICBnZXQgbWFrZSgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBwbGFuZTogKHBsYW5lQ29uZmlnID0ge30sIG1hdGVyaWFsQ29uZmlnID0ge30pID0+IHRoaXMubWFrZVBsYW5lKHBsYW5lQ29uZmlnLCBtYXRlcmlhbENvbmZpZyksXHJcbiAgICAgICAgICAgIGJveDogKGJveENvbmZpZyA9IHt9LCBtYXRlcmlhbENvbmZpZyA9IHt9KSA9PiB0aGlzLm1ha2VCb3goYm94Q29uZmlnLCBtYXRlcmlhbENvbmZpZyksXHJcbiAgICAgICAgICAgIHNwaGVyZTogKHNwaGVyZUNvbmZpZyA9IHt9LCBtYXRlcmlhbENvbmZpZyA9IHt9KSA9PiB0aGlzLm1ha2VTcGhlcmUoc3BoZXJlQ29uZmlnLCBtYXRlcmlhbENvbmZpZyksXHJcbiAgICAgICAgICAgIGN5bGluZGVyOiAoY3lsaW5kZXJDb25maWcgPSB7fSwgbWF0ZXJpYWxDb25maWcgPSB7fSkgPT4gdGhpcy5tYWtlQ3lsaW5kZXIoY3lsaW5kZXJDb25maWcsIG1hdGVyaWFsQ29uZmlnKSxcclxuICAgICAgICAgICAgY29uZTogKGNvbmVDb25maWcgPSB7fSwgbWF0ZXJpYWxDb25maWcgPSB7fSkgPT4gdGhpcy5tYWtlQ29uZShjb25lQ29uZmlnLCBtYXRlcmlhbENvbmZpZyksXHJcbiAgICAgICAgICAgIHRvcnVzOiAodG9ydXNDb25maWcgPSB7fSwgbWF0ZXJpYWxDb25maWcgPSB7fSkgPT4gdGhpcy5tYWtlVG9ydXModG9ydXNDb25maWcsIG1hdGVyaWFsQ29uZmlnKSxcclxuICAgICAgICAgICAgZXh0cnVkZTogKGV4dHJ1ZGVDb25maWcsIG1hdGVyaWFsQ29uZmlnID0ge30pID0+IHRoaXMubWFrZUV4dHJ1ZGUoZXh0cnVkZUNvbmZpZywgbWF0ZXJpYWxDb25maWcpXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIGdldCBhZGQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgLy8gZWZmZWN0Q29tcG9zZXI6ICgpID0+IHRoaXMuYWRkRWZmZWN0Q29tcG9zZXIoKSxcclxuICAgICAgICAgICAgbWVzaDogKG1lc2gpID0+IHRoaXMuYWRkTWVzaChtZXNoKSxcclxuICAgICAgICAgICAgLy8gZ3JvdXA6ICguLi5jaGlsZHJlbikgPT4gdGhpcy5hZGRHcm91cChjaGlsZHJlbiksXHJcbiAgICAgICAgICAgIGV4aXN0aW5nOiAob2JqZWN0KSA9PiB0aGlzLmFkZEV4aXN0aW5nKG9iamVjdCksXHJcbiAgICAgICAgICAgIC8vICBHZW9tZXRyeVxyXG4gICAgICAgICAgICBwbGFuZTogKHBsYW5lQ29uZmlnID0ge30sIG1hdGVyaWFsQ29uZmlnID0ge30pID0+IHRoaXMuYWRkUGxhbmUocGxhbmVDb25maWcsIG1hdGVyaWFsQ29uZmlnKSxcclxuICAgICAgICAgICAgYm94OiAoYm94Q29uZmlnID0ge30sIG1hdGVyaWFsQ29uZmlnID0ge30pID0+IHRoaXMuYWRkQm94KGJveENvbmZpZywgbWF0ZXJpYWxDb25maWcpLFxyXG4gICAgICAgICAgICBncm91bmQ6IChncm91bmRDb25maWcsIG1hdGVyaWFsQ29uZmlnID0ge30pID0+IHRoaXMuYWRkR3JvdW5kKGdyb3VuZENvbmZpZywgbWF0ZXJpYWxDb25maWcpLFxyXG4gICAgICAgICAgICAvLy4uLlxyXG4gICAgICAgICAgICBzcGhlcmU6IChzcGhlcmVDb25maWcgPSB7fSwgbWF0ZXJpYWxDb25maWcgPSB7fSkgPT4gdGhpcy5hZGRTcGhlcmUoc3BoZXJlQ29uZmlnLCBtYXRlcmlhbENvbmZpZyksXHJcbiAgICAgICAgICAgIGN5bGluZGVyOiAoY3lsaW5kZXJDb25maWcgPSB7fSwgbWF0ZXJpYWxDb25maWcgPSB7fSkgPT4gdGhpcy5hZGRDeWxpbmRlcihjeWxpbmRlckNvbmZpZywgbWF0ZXJpYWxDb25maWcpLFxyXG4gICAgICAgICAgICBjb25lOiAoY29uZUNvbmZpZyA9IHt9LCBtYXRlcmlhbENvbmZpZyA9IHt9KSA9PiB0aGlzLmFkZENvbmUoY29uZUNvbmZpZywgbWF0ZXJpYWxDb25maWcpLFxyXG4gICAgICAgICAgICB0b3J1czogKHRvcnVzQ29uZmlnID0ge30sIG1hdGVyaWFsQ29uZmlnID0ge30pID0+IHRoaXMuYWRkVG9ydXModG9ydXNDb25maWcsIG1hdGVyaWFsQ29uZmlnKSxcclxuICAgICAgICAgICAgZXh0cnVkZTogKGV4dHJ1ZGVDb25maWcsIG1hdGVyaWFsQ29uZmlnID0ge30pID0+IHRoaXMuYWRkRXh0cnVkZShleHRydWRlQ29uZmlnLCBtYXRlcmlhbENvbmZpZyksXHJcbiAgICAgICAgICAgIC8vLi4uXHJcbiAgICAgICAgICAgIG1hdGVyaWFsOiAobWF0ZXJpYWxDb25maWcgPSB7fSkgPT4gdGhpcy5hZGRNYXRlcmlhbChtYXRlcmlhbENvbmZpZylcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgYWRkRXhpc3RpbmcoLi4ub2JqZWN0KSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc2NlbmUgPT09ICdoZWFkbGVzcycpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB0aGlzLnNjZW5lLmFkZCguLi5vYmplY3QpO1xyXG4gICAgfVxyXG4gICAgYWRkTWVzaChtZXNoKSB7XHJcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobWVzaCkpIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtZXNoLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFkZEV4aXN0aW5nKG1lc2hbaV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmFkZEV4aXN0aW5nKG1lc2gpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIGNyZWF0ZU1lc2goZ2VvbWV0cnksIG1hdGVyaWFsLCBwb3NpdGlvbikge1xyXG4gICAgICAgIGNvbnN0IHsgeCA9IDAsIHkgPSAwLCB6ID0gMCB9ID0gcG9zaXRpb247XHJcbiAgICAgICAgbGV0IG9iajtcclxuICAgICAgICBzd2l0Y2ggKCFBcnJheS5pc0FycmF5KG1hdGVyaWFsKSAmJiBtYXRlcmlhbC50eXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ0xpbmVCYXNpY01hdGVyaWFsJzpcclxuICAgICAgICAgICAgICAgIG9iaiA9IG5ldyBpbmRleF8xLkxpbmUoZ2VvbWV0cnksIG1hdGVyaWFsKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdQb2ludHNNYXRlcmlhbCc6XHJcbiAgICAgICAgICAgICAgICBvYmogPSBuZXcgaW5kZXhfMS5Qb2ludHMoZ2VvbWV0cnksIG1hdGVyaWFsKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgb2JqID0gbmV3IGV4dGVuZGVkTWVzaF8xLkV4dGVuZGVkTWVzaChnZW9tZXRyeSwgbWF0ZXJpYWwpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG9iai5wb3NpdGlvbi5zZXQoeCwgeSwgeik7XHJcbiAgICAgICAgb2JqLmNhc3RTaGFkb3cgPSBvYmoucmVjZWl2ZVNoYWRvdyA9IHRydWU7XHJcbiAgICAgICAgcmV0dXJuIG9iajtcclxuICAgIH1cclxuICAgIG1ha2VFeHRydWRlKGV4dHJ1ZGVDb25maWcsIG1hdGVyaWFsQ29uZmlnKSB7XHJcbiAgICAgICAgY29uc3QgeyB4LCB5LCB6LCBuYW1lLCBzaGFwZSwgYXV0b0NlbnRlciA9IHRydWUsIGJyZWFrYWJsZSA9IGZhbHNlLCBidWZmZXJHZW9tZXRyeSA9IHRydWUgfSA9IGV4dHJ1ZGVDb25maWcsIHJlc3QgPSBfX3Jlc3QoZXh0cnVkZUNvbmZpZ1xyXG4gICAgICAgIC8vIEB0cy1pZ25vcmUgLy8gRXh0cnVkZUdlb21ldHJ5T3B0aW9ucyBpbnRlcmZhY2UgbWlzc2luZyBzaW5jZSB0aHJlZS5qcyByMTIxXHJcbiAgICAgICAgLCBbXCJ4XCIsIFwieVwiLCBcInpcIiwgXCJuYW1lXCIsIFwic2hhcGVcIiwgXCJhdXRvQ2VudGVyXCIsIFwiYnJlYWthYmxlXCIsIFwiYnVmZmVyR2VvbWV0cnlcIl0pO1xyXG4gICAgICAgIC8vIEB0cy1pZ25vcmUgLy8gRXh0cnVkZUdlb21ldHJ5T3B0aW9ucyBpbnRlcmZhY2UgbWlzc2luZyBzaW5jZSB0aHJlZS5qcyByMTIxXHJcbiAgICAgICAgY29uc3QgeyBkZXB0aCA9IDEsIGJldmVsRW5hYmxlZCA9IGZhbHNlIH0gPSByZXN0O1xyXG4gICAgICAgIGNvbnN0IGdlb21ldHJ5ID0gYnVmZmVyR2VvbWV0cnkgfHwgYnJlYWthYmxlIHx8IHRoaXMuaXNIZWFkbGVzc1xyXG4gICAgICAgICAgICA/IG5ldyBpbmRleF8xLkV4dHJ1ZGVCdWZmZXJHZW9tZXRyeShzaGFwZSwgT2JqZWN0LmFzc2lnbih7IGRlcHRoLCBiZXZlbEVuYWJsZWQgfSwgcmVzdCkpXHJcbiAgICAgICAgICAgIDogbmV3IGluZGV4XzEuRXh0cnVkZUdlb21ldHJ5KHNoYXBlLCBPYmplY3QuYXNzaWduKHsgZGVwdGgsIGJldmVsRW5hYmxlZCB9LCByZXN0KSk7XHJcbiAgICAgICAgY29uc3QgbWF0ZXJpYWwgPSB0aGlzLmFkZE1hdGVyaWFsKG1hdGVyaWFsQ29uZmlnKTtcclxuICAgICAgICBjb25zdCBtZXNoID0gdGhpcy5jcmVhdGVNZXNoKGdlb21ldHJ5LCBtYXRlcmlhbCwgeyB4LCB5LCB6IH0pO1xyXG4gICAgICAgIC8vIGF1dG8gYWRqdXN0IHRoZSBjZW50ZXIgZm9yIGN1c3RvbSBzaGFwZXNcclxuICAgICAgICBpZiAoYXV0b0NlbnRlcilcclxuICAgICAgICAgICAgbWVzaC5nZW9tZXRyeS5jZW50ZXIoKTtcclxuICAgICAgICBtZXNoLm5hbWUgPSBuYW1lIHx8IGBib2R5X2lkXyR7bWVzaC5pZH1gO1xyXG4gICAgICAgIG1lc2guc2hhcGUgPSAnZXh0cnVkZSc7XHJcbiAgICAgICAgcmV0dXJuIG1lc2g7XHJcbiAgICB9XHJcbiAgICBhZGRFeHRydWRlKGV4dHJ1ZGVDb25maWcsIG1hdGVyaWFsQ29uZmlnID0ge30pIHtcclxuICAgICAgICBjb25zdCBvYmogPSB0aGlzLm1ha2VFeHRydWRlKGV4dHJ1ZGVDb25maWcsIG1hdGVyaWFsQ29uZmlnKTtcclxuICAgICAgICB0aGlzLmFkZEV4aXN0aW5nKG9iaik7XHJcbiAgICAgICAgcmV0dXJuIG9iajtcclxuICAgIH1cclxuICAgIG1ha2VQbGFuZShwbGFuZUNvbmZpZywgbWF0ZXJpYWxDb25maWcpIHtcclxuICAgICAgICBjb25zdCB7IHgsIHksIHosIG5hbWUsIGJyZWFrYWJsZSA9IGZhbHNlLCBidWZmZXJHZW9tZXRyeSA9IHRydWUgfSA9IHBsYW5lQ29uZmlnLCByZXN0ID0gX19yZXN0KHBsYW5lQ29uZmlnLCBbXCJ4XCIsIFwieVwiLCBcInpcIiwgXCJuYW1lXCIsIFwiYnJlYWthYmxlXCIsIFwiYnVmZmVyR2VvbWV0cnlcIl0pO1xyXG4gICAgICAgIGNvbnN0IGdlb21ldHJ5ID0gYnVmZmVyR2VvbWV0cnkgfHwgYnJlYWthYmxlIHx8IHRoaXMuaXNIZWFkbGVzc1xyXG4gICAgICAgICAgICA/IG5ldyBpbmRleF8xLlBsYW5lQnVmZmVyR2VvbWV0cnkocmVzdC53aWR0aCB8fCAxLCByZXN0LmhlaWdodCB8fCAxLCByZXN0LndpZHRoU2VnbWVudHMgfHwgMSwgcmVzdC5oZWlnaHRTZWdtZW50cyB8fCAxKVxyXG4gICAgICAgICAgICA6IG5ldyBpbmRleF8xLlBsYW5lR2VvbWV0cnkocmVzdC53aWR0aCB8fCAxLCByZXN0LmhlaWdodCB8fCAxLCByZXN0LndpZHRoU2VnbWVudHMgfHwgMSwgcmVzdC5oZWlnaHRTZWdtZW50cyB8fCAxKTtcclxuICAgICAgICBjb25zdCBtYXRlcmlhbCA9IHRoaXMuYWRkTWF0ZXJpYWwobWF0ZXJpYWxDb25maWcpO1xyXG4gICAgICAgIG1hdGVyaWFsLnNpZGUgPSBpbmRleF8xLkRvdWJsZVNpZGU7XHJcbiAgICAgICAgY29uc3QgbWVzaCA9IHRoaXMuY3JlYXRlTWVzaChnZW9tZXRyeSwgbWF0ZXJpYWwsIHsgeCwgeSwgeiB9KTtcclxuICAgICAgICBtZXNoLm5hbWUgPSBuYW1lIHx8IGBib2R5X2lkXyR7bWVzaC5pZH1gO1xyXG4gICAgICAgIG1lc2guc2hhcGUgPSAncGxhbmUnO1xyXG4gICAgICAgIHJldHVybiBtZXNoO1xyXG4gICAgfVxyXG4gICAgYWRkUGxhbmUocGxhbmVDb25maWcsIG1hdGVyaWFsQ29uZmlnKSB7XHJcbiAgICAgICAgY29uc3Qgb2JqID0gdGhpcy5tYWtlUGxhbmUocGxhbmVDb25maWcsIG1hdGVyaWFsQ29uZmlnKTtcclxuICAgICAgICB0aGlzLmFkZEV4aXN0aW5nKG9iaik7XHJcbiAgICAgICAgcmV0dXJuIG9iajtcclxuICAgIH1cclxuICAgIG1ha2VTcGhlcmUoc3BoZXJlQ29uZmlnLCBtYXRlcmlhbENvbmZpZykge1xyXG4gICAgICAgIGNvbnN0IHsgeCwgeSwgeiwgbmFtZSwgYnJlYWthYmxlID0gZmFsc2UsIGJ1ZmZlckdlb21ldHJ5ID0gdHJ1ZSB9ID0gc3BoZXJlQ29uZmlnLCByZXN0ID0gX19yZXN0KHNwaGVyZUNvbmZpZywgW1wieFwiLCBcInlcIiwgXCJ6XCIsIFwibmFtZVwiLCBcImJyZWFrYWJsZVwiLCBcImJ1ZmZlckdlb21ldHJ5XCJdKTtcclxuICAgICAgICBjb25zdCBnZW9tZXRyeSA9IGJ1ZmZlckdlb21ldHJ5IHx8IGJyZWFrYWJsZSB8fCB0aGlzLmlzSGVhZGxlc3NcclxuICAgICAgICAgICAgPyBuZXcgaW5kZXhfMS5TcGhlcmVCdWZmZXJHZW9tZXRyeShyZXN0LnJhZGl1cyB8fCAxLCByZXN0LndpZHRoU2VnbWVudHMgfHwgMTYsIHJlc3QuaGVpZ2h0U2VnbWVudHMgfHwgMTIsIHJlc3QucGhpU3RhcnQgfHwgdW5kZWZpbmVkLCByZXN0LnBoaUxlbmd0aCB8fCB1bmRlZmluZWQsIHJlc3QudGhldGFTdGFydCB8fCB1bmRlZmluZWQsIHJlc3QudGhldGFMZW5ndGggfHwgdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICA6IG5ldyBpbmRleF8xLlNwaGVyZUdlb21ldHJ5KHJlc3QucmFkaXVzIHx8IDEsIHJlc3Qud2lkdGhTZWdtZW50cyB8fCAxNiwgcmVzdC5oZWlnaHRTZWdtZW50cyB8fCAxMiwgcmVzdC5waGlTdGFydCB8fCB1bmRlZmluZWQsIHJlc3QucGhpTGVuZ3RoIHx8IHVuZGVmaW5lZCwgcmVzdC50aGV0YVN0YXJ0IHx8IHVuZGVmaW5lZCwgcmVzdC50aGV0YUxlbmd0aCB8fCB1bmRlZmluZWQpO1xyXG4gICAgICAgIGNvbnN0IG1hdGVyaWFsID0gdGhpcy5hZGRNYXRlcmlhbChtYXRlcmlhbENvbmZpZyk7XHJcbiAgICAgICAgY29uc3QgbWVzaCA9IHRoaXMuY3JlYXRlTWVzaChnZW9tZXRyeSwgbWF0ZXJpYWwsIHsgeCwgeSwgeiB9KTtcclxuICAgICAgICBtZXNoLm5hbWUgPSBuYW1lIHx8IGBib2R5X2lkXyR7bWVzaC5pZH1gO1xyXG4gICAgICAgIG1lc2guc2hhcGUgPSAnc3BoZXJlJztcclxuICAgICAgICByZXR1cm4gbWVzaDtcclxuICAgIH1cclxuICAgIGFkZFNwaGVyZShzcGhlcmVDb25maWcgPSB7fSwgbWF0ZXJpYWxDb25maWcgPSB7fSkge1xyXG4gICAgICAgIGNvbnN0IG9iaiA9IHRoaXMubWFrZVNwaGVyZShzcGhlcmVDb25maWcsIG1hdGVyaWFsQ29uZmlnKTtcclxuICAgICAgICB0aGlzLmFkZEV4aXN0aW5nKG9iaik7XHJcbiAgICAgICAgcmV0dXJuIG9iajtcclxuICAgIH1cclxuICAgIG1ha2VCb3goYm94Q29uZmlnLCBtYXRlcmlhbENvbmZpZykge1xyXG4gICAgICAgIGNvbnN0IHsgeCwgeSwgeiwgbmFtZSwgYnJlYWthYmxlID0gZmFsc2UsIGJ1ZmZlckdlb21ldHJ5ID0gdHJ1ZSB9ID0gYm94Q29uZmlnLCByZXN0ID0gX19yZXN0KGJveENvbmZpZywgW1wieFwiLCBcInlcIiwgXCJ6XCIsIFwibmFtZVwiLCBcImJyZWFrYWJsZVwiLCBcImJ1ZmZlckdlb21ldHJ5XCJdKTtcclxuICAgICAgICBjb25zdCBnZW9tZXRyeSA9IGJ1ZmZlckdlb21ldHJ5IHx8IGJyZWFrYWJsZSB8fCB0aGlzLmlzSGVhZGxlc3NcclxuICAgICAgICAgICAgPyBuZXcgaW5kZXhfMS5Cb3hCdWZmZXJHZW9tZXRyeShyZXN0LndpZHRoIHx8IDEsIHJlc3QuaGVpZ2h0IHx8IDEsIHJlc3QuZGVwdGggfHwgMSwgcmVzdC53aWR0aFNlZ21lbnRzIHx8IHVuZGVmaW5lZCwgcmVzdC5oZWlnaHRTZWdtZW50cyB8fCB1bmRlZmluZWQsIHJlc3QuZGVwdGhTZWdtZW50cyB8fCB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgIDogbmV3IGluZGV4XzEuQm94R2VvbWV0cnkocmVzdC53aWR0aCB8fCAxLCByZXN0LmhlaWdodCB8fCAxLCByZXN0LmRlcHRoIHx8IDEsIHJlc3Qud2lkdGhTZWdtZW50cyB8fCB1bmRlZmluZWQsIHJlc3QuaGVpZ2h0U2VnbWVudHMgfHwgdW5kZWZpbmVkLCByZXN0LmRlcHRoU2VnbWVudHMgfHwgdW5kZWZpbmVkKTtcclxuICAgICAgICBjb25zdCBtYXRlcmlhbCA9IHRoaXMuYWRkTWF0ZXJpYWwobWF0ZXJpYWxDb25maWcpO1xyXG4gICAgICAgIGNvbnN0IG1lc2ggPSB0aGlzLmNyZWF0ZU1lc2goZ2VvbWV0cnksIG1hdGVyaWFsLCB7IHgsIHksIHogfSk7XHJcbiAgICAgICAgbWVzaC5uYW1lID0gbmFtZSB8fCBgYm9keV9pZF8ke21lc2guaWR9YDtcclxuICAgICAgICBtZXNoLnNoYXBlID0gJ2JveCc7XHJcbiAgICAgICAgcmV0dXJuIG1lc2g7XHJcbiAgICB9XHJcbiAgICBhZGRCb3goYm94Q29uZmlnID0ge30sIG1hdGVyaWFsQ29uZmlnID0ge30pIHtcclxuICAgICAgICBjb25zdCBvYmogPSB0aGlzLm1ha2VCb3goYm94Q29uZmlnLCBtYXRlcmlhbENvbmZpZyk7XHJcbiAgICAgICAgdGhpcy5hZGRFeGlzdGluZyhvYmopO1xyXG4gICAgICAgIHJldHVybiBvYmo7XHJcbiAgICB9XHJcbiAgICBhZGRHcm91bmQoZ3JvdW5kQ29uZmlnLCBtYXRlcmlhbENvbmZpZyA9IHt9KSB7XHJcbiAgICAgICAgY29uc3Qgb2JqID0gdGhpcy5tYWtlQm94KGdyb3VuZENvbmZpZywgbWF0ZXJpYWxDb25maWcpO1xyXG4gICAgICAgIG9iai5yb3RhdGVYKGluZGV4XzEuTWF0aFV0aWxzLmRlZ1RvUmFkKDkwKSk7XHJcbiAgICAgICAgdGhpcy5hZGRFeGlzdGluZyhvYmopO1xyXG4gICAgICAgIHJldHVybiBvYmo7XHJcbiAgICB9XHJcbiAgICBtYWtlQ3lsaW5kZXIoY3lsaW5kZXJDb25maWcgPSB7fSwgbWF0ZXJpYWxDb25maWcgPSB7fSkge1xyXG4gICAgICAgIGNvbnN0IHsgeCwgeSwgeiwgbmFtZSwgYnJlYWthYmxlID0gZmFsc2UsIGJ1ZmZlckdlb21ldHJ5ID0gdHJ1ZSB9ID0gY3lsaW5kZXJDb25maWcsIHJlc3QgPSBfX3Jlc3QoY3lsaW5kZXJDb25maWcsIFtcInhcIiwgXCJ5XCIsIFwielwiLCBcIm5hbWVcIiwgXCJicmVha2FibGVcIiwgXCJidWZmZXJHZW9tZXRyeVwiXSk7XHJcbiAgICAgICAgY29uc3QgZ2VvbWV0cnkgPSBidWZmZXJHZW9tZXRyeSB8fCBicmVha2FibGUgfHwgdGhpcy5pc0hlYWRsZXNzXHJcbiAgICAgICAgICAgID8gbmV3IGluZGV4XzEuQ3lsaW5kZXJCdWZmZXJHZW9tZXRyeShyZXN0LnJhZGl1c1RvcCB8fCAxLCByZXN0LnJhZGl1c0JvdHRvbSB8fCAxLCByZXN0LmhlaWdodCB8fCAxLCByZXN0LnJhZGl1c1NlZ21lbnRzIHx8IHVuZGVmaW5lZCwgcmVzdC5oZWlnaHRTZWdtZW50cyB8fCB1bmRlZmluZWQsIHJlc3Qub3BlbkVuZGVkIHx8IHVuZGVmaW5lZCwgcmVzdC50aGV0YVN0YXJ0IHx8IHVuZGVmaW5lZCwgcmVzdC50aGV0YUxlbmd0aCB8fCB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgIDogbmV3IGluZGV4XzEuQ3lsaW5kZXJHZW9tZXRyeShyZXN0LnJhZGl1c1RvcCB8fCAxLCByZXN0LnJhZGl1c0JvdHRvbSB8fCAxLCByZXN0LmhlaWdodCB8fCAxLCByZXN0LnJhZGl1c1NlZ21lbnRzIHx8IHVuZGVmaW5lZCwgcmVzdC5oZWlnaHRTZWdtZW50cyB8fCB1bmRlZmluZWQsIHJlc3Qub3BlbkVuZGVkIHx8IHVuZGVmaW5lZCwgcmVzdC50aGV0YVN0YXJ0IHx8IHVuZGVmaW5lZCwgcmVzdC50aGV0YUxlbmd0aCB8fCB1bmRlZmluZWQpO1xyXG4gICAgICAgIGNvbnN0IG1hdGVyaWFsID0gdGhpcy5hZGRNYXRlcmlhbChtYXRlcmlhbENvbmZpZyk7XHJcbiAgICAgICAgY29uc3QgbWVzaCA9IHRoaXMuY3JlYXRlTWVzaChnZW9tZXRyeSwgbWF0ZXJpYWwsIHsgeCwgeSwgeiB9KTtcclxuICAgICAgICBtZXNoLm5hbWUgPSBuYW1lIHx8IGBib2R5X2lkXyR7bWVzaC5pZH1gO1xyXG4gICAgICAgIG1lc2guc2hhcGUgPSAnY3lsaW5kZXInO1xyXG4gICAgICAgIHJldHVybiBtZXNoO1xyXG4gICAgfVxyXG4gICAgYWRkQ3lsaW5kZXIoY3lsaW5kZXJDb25maWcgPSB7fSwgbWF0ZXJpYWxDb25maWcgPSB7fSkge1xyXG4gICAgICAgIGNvbnN0IG9iaiA9IHRoaXMubWFrZUN5bGluZGVyKGN5bGluZGVyQ29uZmlnLCBtYXRlcmlhbENvbmZpZyk7XHJcbiAgICAgICAgdGhpcy5hZGRFeGlzdGluZyhvYmopO1xyXG4gICAgICAgIHJldHVybiBvYmo7XHJcbiAgICB9XHJcbiAgICBtYWtlQ29uZShjb25lQ29uZmlnID0ge30sIG1hdGVyaWFsQ29uZmlnID0ge30pIHtcclxuICAgICAgICBjb25zdCB7IHgsIHksIHosIG5hbWUsIGJyZWFrYWJsZSA9IGZhbHNlLCBidWZmZXJHZW9tZXRyeSA9IHRydWUgfSA9IGNvbmVDb25maWcsIHJlc3QgPSBfX3Jlc3QoY29uZUNvbmZpZywgW1wieFwiLCBcInlcIiwgXCJ6XCIsIFwibmFtZVwiLCBcImJyZWFrYWJsZVwiLCBcImJ1ZmZlckdlb21ldHJ5XCJdKTtcclxuICAgICAgICBjb25zdCBnZW9tZXRyeSA9IGJ1ZmZlckdlb21ldHJ5IHx8IGJyZWFrYWJsZSB8fCB0aGlzLmlzSGVhZGxlc3NcclxuICAgICAgICAgICAgPyBuZXcgaW5kZXhfMS5Db25lQnVmZmVyR2VvbWV0cnkocmVzdC5yYWRpdXMgfHwgMSwgcmVzdC5oZWlnaHQgfHwgMSwgcmVzdC5yYWRpdXNTZWdtZW50cyB8fCA4LCByZXN0LmhlaWdodFNlZ21lbnRzIHx8IDEsIHJlc3Qub3BlbkVuZGVkIHx8IGZhbHNlLCByZXN0LnRoZXRhU3RhcnQgfHwgMCwgcmVzdC50aGV0YUxlbmd0aCB8fCAyICogTWF0aC5QSSlcclxuICAgICAgICAgICAgOiBuZXcgaW5kZXhfMS5Db25lQnVmZmVyR2VvbWV0cnkocmVzdC5yYWRpdXMgfHwgMSwgcmVzdC5oZWlnaHQgfHwgMSwgcmVzdC5yYWRpdXNTZWdtZW50cyB8fCA4LCByZXN0LmhlaWdodFNlZ21lbnRzIHx8IDEsIHJlc3Qub3BlbkVuZGVkIHx8IGZhbHNlLCByZXN0LnRoZXRhU3RhcnQgfHwgMCwgcmVzdC50aGV0YUxlbmd0aCB8fCAyICogTWF0aC5QSSk7XHJcbiAgICAgICAgY29uc3QgbWF0ZXJpYWwgPSB0aGlzLmFkZE1hdGVyaWFsKG1hdGVyaWFsQ29uZmlnKTtcclxuICAgICAgICBjb25zdCBtZXNoID0gdGhpcy5jcmVhdGVNZXNoKGdlb21ldHJ5LCBtYXRlcmlhbCwgeyB4LCB5LCB6IH0pO1xyXG4gICAgICAgIG1lc2gubmFtZSA9IG5hbWUgfHwgYGJvZHlfaWRfJHttZXNoLmlkfWA7XHJcbiAgICAgICAgbWVzaC5zaGFwZSA9ICdjb25lJztcclxuICAgICAgICByZXR1cm4gbWVzaDtcclxuICAgIH1cclxuICAgIGFkZENvbmUoY29uZUNvbmZpZyA9IHt9LCBtYXRlcmlhbENvbmZpZyA9IHt9KSB7XHJcbiAgICAgICAgY29uc3Qgb2JqID0gdGhpcy5tYWtlQ29uZShjb25lQ29uZmlnLCBtYXRlcmlhbENvbmZpZyk7XHJcbiAgICAgICAgdGhpcy5hZGRFeGlzdGluZyhvYmopO1xyXG4gICAgICAgIHJldHVybiBvYmo7XHJcbiAgICB9XHJcbiAgICAvLyBodHRwczovL3RocmVlanMub3JnL2RvY3MvaW5kZXguaHRtbCNhcGkvZW4vZ2VvbWV0cmllcy9Ub3J1c0J1ZmZlckdlb21ldHJ5XHJcbiAgICBtYWtlVG9ydXModG9ydXNDb25maWcgPSB7fSwgbWF0ZXJpYWxDb25maWcgPSB7fSkge1xyXG4gICAgICAgIGNvbnN0IHsgeCwgeSwgeiwgbmFtZSwgYnJlYWthYmxlID0gZmFsc2UsIGJ1ZmZlckdlb21ldHJ5ID0gdHJ1ZSB9ID0gdG9ydXNDb25maWcsIHJlc3QgPSBfX3Jlc3QodG9ydXNDb25maWcsIFtcInhcIiwgXCJ5XCIsIFwielwiLCBcIm5hbWVcIiwgXCJicmVha2FibGVcIiwgXCJidWZmZXJHZW9tZXRyeVwiXSk7XHJcbiAgICAgICAgY29uc3QgZ2VvbWV0cnkgPSBidWZmZXJHZW9tZXRyeSB8fCBicmVha2FibGUgfHwgdGhpcy5pc0hlYWRsZXNzXHJcbiAgICAgICAgICAgID8gbmV3IGluZGV4XzEuVG9ydXNCdWZmZXJHZW9tZXRyeShyZXN0LnJhZGl1cyB8fCB1bmRlZmluZWQsIHJlc3QudHViZSB8fCB1bmRlZmluZWQsIHJlc3QucmFkaWFsU2VnbWVudHMgfHwgdW5kZWZpbmVkLCByZXN0LnR1YnVsYXJTZWdtZW50cyB8fCB1bmRlZmluZWQsIHJlc3QuYXJjIHx8IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgOiBuZXcgaW5kZXhfMS5Ub3J1c0dlb21ldHJ5KHJlc3QucmFkaXVzIHx8IHVuZGVmaW5lZCwgcmVzdC50dWJlIHx8IHVuZGVmaW5lZCwgcmVzdC5yYWRpYWxTZWdtZW50cyB8fCB1bmRlZmluZWQsIHJlc3QudHVidWxhclNlZ21lbnRzIHx8IHVuZGVmaW5lZCwgcmVzdC5hcmMgfHwgdW5kZWZpbmVkKTtcclxuICAgICAgICBjb25zdCBtYXRlcmlhbCA9IHRoaXMuYWRkTWF0ZXJpYWwobWF0ZXJpYWxDb25maWcpO1xyXG4gICAgICAgIGNvbnN0IG1lc2ggPSB0aGlzLmNyZWF0ZU1lc2goZ2VvbWV0cnksIG1hdGVyaWFsLCB7IHgsIHksIHogfSk7XHJcbiAgICAgICAgbWVzaC5uYW1lID0gbmFtZSB8fCBgYm9keV9pZF8ke21lc2guaWR9YDtcclxuICAgICAgICBtZXNoLnNoYXBlID0gJ3RvcnVzJztcclxuICAgICAgICByZXR1cm4gbWVzaDtcclxuICAgIH1cclxuICAgIGFkZFRvcnVzKHRvcnVzQ29uZmlnID0ge30sIG1hdGVyaWFsQ29uZmlnID0ge30pIHtcclxuICAgICAgICBjb25zdCBvYmogPSB0aGlzLm1ha2VUb3J1cyh0b3J1c0NvbmZpZywgbWF0ZXJpYWxDb25maWcpO1xyXG4gICAgICAgIHRoaXMuYWRkRXhpc3Rpbmcob2JqKTtcclxuICAgICAgICByZXR1cm4gb2JqO1xyXG4gICAgfVxyXG4gICAgYWRkTWF0ZXJpYWwobWF0ZXJpYWxDb25maWcgPSB7fSkge1xyXG4gICAgICAgIGNvbnN0IHR5cGUgPSBPYmplY3Qua2V5cyhtYXRlcmlhbENvbmZpZylbMF07XHJcbiAgICAgICAgbGV0IG1hdGVyaWFsO1xyXG4gICAgICAgIC8vIGlmICh0eXBlKSB7XHJcbiAgICAgICAgLy8gICBjb25zdCB7IG1hcCB9ID0gbWF0ZXJpYWxDb25maWdbdHlwZV1cclxuICAgICAgICAvLyAgIGlmICh0eXBlb2YgbWFwID09PSAnc3RyaW5nJykgbWF0ZXJpYWxDb25maWdbdHlwZV0ubWFwID0gdGhpcy5sb2FkVGV4dHVyZShtYXApXHJcbiAgICAgICAgLy8gfVxyXG4gICAgICAgIC8vIGFsd2F5cyBzaGFyZSB0aGUgc2FtZSBtYXRlcmlhbCBpbiBoZWFkbGVzcyBtb2RlIHRvIHNhdmUgbWVtb3J5XHJcbiAgICAgICAgaWYgKHRoaXMuc2NlbmUgPT09ICdoZWFkbGVzcycpXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRlZmF1bHRNYXRlcmlhbC5nZXQoKTtcclxuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSAnYmFzaWMnOlxyXG4gICAgICAgICAgICAgICAgbWF0ZXJpYWwgPSBuZXcgaW5kZXhfMS5NZXNoQmFzaWNNYXRlcmlhbChtYXRlcmlhbENvbmZpZy5iYXNpYyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnbm9ybWFsJzpcclxuICAgICAgICAgICAgICAgIG1hdGVyaWFsID0gbmV3IGluZGV4XzEuTWVzaE5vcm1hbE1hdGVyaWFsKG1hdGVyaWFsQ29uZmlnLm5vcm1hbCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnc3RhbmRhcmQnOlxyXG4gICAgICAgICAgICAgICAgbWF0ZXJpYWwgPSBuZXcgaW5kZXhfMS5NZXNoU3RhbmRhcmRNYXRlcmlhbChtYXRlcmlhbENvbmZpZy5zdGFuZGFyZCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnbGFtYmVydCc6XHJcbiAgICAgICAgICAgICAgICBtYXRlcmlhbCA9IG5ldyBpbmRleF8xLk1lc2hMYW1iZXJ0TWF0ZXJpYWwobWF0ZXJpYWxDb25maWcubGFtYmVydCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAncGhvbmcnOlxyXG4gICAgICAgICAgICAgICAgbWF0ZXJpYWwgPSBuZXcgaW5kZXhfMS5NZXNoUGhvbmdNYXRlcmlhbChtYXRlcmlhbENvbmZpZy5waG9uZyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAncGh5c2ljYWwnOlxyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtYXRlcmlhbENvbmZpZy5waHlzaWNhbCAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbCA9IG5ldyBpbmRleF8xLk1lc2hQaHlzaWNhbE1hdGVyaWFsKG1hdGVyaWFsQ29uZmlnLnBoeXNpY2FsKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlcl8xLmRlZmF1bHQoJ1lvdSBuZWVkIHRvIHBhc3MgcGFyYW1ldGVycyB0byB0aGUgcGh5c2ljYWwgbWF0ZXJpYWwuIChGYWxsYmFjayB0byBkZWZhdWx0IG1hdGVyaWFsKScpO1xyXG4gICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsID0gdGhpcy5kZWZhdWx0TWF0ZXJpYWwuZ2V0KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAndG9vbic6XHJcbiAgICAgICAgICAgICAgICBtYXRlcmlhbCA9IG5ldyBpbmRleF8xLk1lc2hUb29uTWF0ZXJpYWwobWF0ZXJpYWxDb25maWcudG9vbik7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnbGluZSc6XHJcbiAgICAgICAgICAgICAgICBtYXRlcmlhbCA9IG5ldyBpbmRleF8xLkxpbmVCYXNpY01hdGVyaWFsKG1hdGVyaWFsQ29uZmlnLmxpbmUpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3BvaW50cyc6XHJcbiAgICAgICAgICAgICAgICBtYXRlcmlhbCA9IG5ldyBpbmRleF8xLlBvaW50c01hdGVyaWFsKG1hdGVyaWFsQ29uZmlnLnBvaW50cyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnY3VzdG9tJzpcclxuICAgICAgICAgICAgICAgIG1hdGVyaWFsID0gbWF0ZXJpYWxDb25maWcuY3VzdG9tIHx8IHRoaXMuZGVmYXVsdE1hdGVyaWFsLmdldCgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBtYXRlcmlhbCA9IHRoaXMuZGVmYXVsdE1hdGVyaWFsLmdldCgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBtYXRlcmlhbDtcclxuICAgIH1cclxufVxyXG5leHBvcnRzLmRlZmF1bHQgPSBGYWN0b3JpZXM7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZhY3Rvcmllcy5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5jb25zdCBsb2dnZXIgPSAobXNnKSA9PiB7XHJcbiAgICBjb25zb2xlLmVycm9yKGAlYyBbZW5hYmxlM2RdICR7bXNnfSBgLCAnYmFja2dyb3VuZDogIzIyMjsgY29sb3I6ICNiYWRhNTUnKTtcclxufTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gbG9nZ2VyO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1sb2dnZXIuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbi8qKlxyXG4gKiBAZGVzY3JpcHRpb24gIFRoaXMgY29kZSBoYXMgb3JpZ2luYWxseSBiZWVuIGNvcGllZCBmcm9tIFNrZXRjaGJvb2tcclxuICpcclxuICogQGF1dGhvciAgICAgICBzd2lmdDUwMiA8YmxhaGEuajUwMkBnbWFpbC5jb20+IChodHRwOi8vamJsYWhhLmFydC8pXHJcbiAqIEBjb3B5cmlnaHQgICAgQ29weXJpZ2h0IChjKSAyMDE4IHN3aWZ0NTAyOyBQcm9qZWN0IFVybDogaHR0cHM6Ly9naXRodWIuY29tL3N3aWZ0NTAyL1NrZXRjaGJvb2tcclxuICogQGxpY2Vuc2UgICAgICB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL3N3aWZ0NTAyL1NrZXRjaGJvb2svYmxvYi9tYXN0ZXIvTElDRU5TRXxHUEwtMy4wfVxyXG4gKlxyXG4gKiBAYXV0aG9yICAgICAgIFlhbm5pY2sgRGV1YmVsIChodHRwczovL2dpdGh1Yi5jb20veWFuZGV1KVxyXG4gKiBAY29weXJpZ2h0ICAgIENvcHlyaWdodCAoYykgMjAyMCBZYW5uaWNrIERldWJlbDsgUHJvamVjdCBVcmw6IGh0dHBzOi8vZ2l0aHViLmNvbS9lbmFibGUzZC9lbmFibGUzZFxyXG4gKiBAbGljZW5zZSAgICAgIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZW5hYmxlM2QvZW5hYmxlM2QvYmxvYi9tYXN0ZXIvTElDRU5TRXxHTlUgR1BMdjN9XHJcbiAqL1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuRmlyc3RQZXJzb25Db250cm9scyA9IHZvaWQgMDtcclxuY29uc3QgZGlzdF8xID0gcmVxdWlyZShcIkBlbmFibGUzZC90aHJlZS13cmFwcGVyL2Rpc3RcIik7XHJcbmNsYXNzIEZpcnN0UGVyc29uQ29udHJvbHMge1xyXG4gICAgY29uc3RydWN0b3IoY2FtZXJhLCB0YXJnZXQsIGNvbmZpZykge1xyXG4gICAgICAgIHRoaXMuY2FtZXJhID0gY2FtZXJhO1xyXG4gICAgICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xyXG4gICAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xyXG4gICAgICAgIGNvbnN0IHsgb2Zmc2V0ID0gbmV3IGRpc3RfMS5WZWN0b3IzKDAsIDAsIDApLCBzZW5zaXRpdml0eSA9IG5ldyBkaXN0XzEuVmVjdG9yMigxLCAxKSwgcmFkaXVzID0gOCwgdGFyZ2V0UmFkaXVzID0gMTAsIGludGVycG9sYXRpb25GYWN0b3IgPSAwLjA1LCBwb2ludGVyTG9jayA9IHRydWUsIGF1dG9VcGRhdGUgPSB0cnVlIH0gPSBjb25maWc7XHJcbiAgICAgICAgdGhpcy5vZmZzZXQgPSBvZmZzZXQ7XHJcbiAgICAgICAgdGhpcy5zZW5zaXRpdml0eSA9IHNlbnNpdGl2aXR5O1xyXG4gICAgICAgIHRoaXMucmFkaXVzID0gcmFkaXVzO1xyXG4gICAgICAgIHRoaXMudGFyZ2V0UmFkaXVzID0gdGFyZ2V0UmFkaXVzO1xyXG4gICAgICAgIHRoaXMuaW50ZXJwb2xhdGlvbkZhY3RvciA9IGludGVycG9sYXRpb25GYWN0b3I7XHJcbiAgICAgICAgdGhpcy50aGV0YSA9IDA7XHJcbiAgICAgICAgdGhpcy5waGkgPSAwO1xyXG4gICAgICAgIC8vIGlmIChwb2ludGVyTG9jaykge1xyXG4gICAgICAgIC8vICAgc2NlbmUuaW5wdXQub24oJ3BvaW50ZXJkb3duJywgKCkgPT4ge1xyXG4gICAgICAgIC8vICAgICBzY2VuZS5pbnB1dC5tb3VzZS5yZXF1ZXN0UG9pbnRlckxvY2soKVxyXG4gICAgICAgIC8vICAgfSlcclxuICAgICAgICAvLyAgIHNjZW5lLmlucHV0Lm9uKCdwb2ludGVybW92ZScsIChwb2ludGVyOiBQb2ludGVyRXZlbnQpID0+IHtcclxuICAgICAgICAvLyAgICAgaWYgKHNjZW5lLmlucHV0Lm1vdXNlLmxvY2tlZCkge1xyXG4gICAgICAgIC8vICAgICAgIHRoaXMudXBkYXRlKHBvaW50ZXIubW92ZW1lbnRYLCBwb2ludGVyLm1vdmVtZW50WSlcclxuICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgIC8vICAgfSlcclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgLy8gaWYgKGF1dG9VcGRhdGUpIHtcclxuICAgICAgICAvLyAgIHNjZW5lLmV2ZW50cy5vbigndXBkYXRlJywgKCkgPT4ge1xyXG4gICAgICAgIC8vICAgICB0aGlzLnVwZGF0ZSgwLCAwKVxyXG4gICAgICAgIC8vICAgfSlcclxuICAgICAgICAvLyB9XHJcbiAgICB9XHJcbiAgICB1cGRhdGUoZGVsdGFYLCBkZWx0YVkpIHtcclxuICAgICAgICBjb25zdCBjZW50ZXIgPSB0aGlzLnRhcmdldC5wb3NpdGlvbi5jbG9uZSgpLmFkZCh0aGlzLm9mZnNldCk7XHJcbiAgICAgICAgdGhpcy5jYW1lcmEucG9zaXRpb24uY29weShjZW50ZXIpO1xyXG4gICAgICAgIHRoaXMudGhldGEgLT0gZGVsdGFYICogKHRoaXMuc2Vuc2l0aXZpdHkueCAvIDIpO1xyXG4gICAgICAgIHRoaXMudGhldGEgJT0gMzYwO1xyXG4gICAgICAgIHRoaXMucGhpICs9IGRlbHRhWSAqICgtdGhpcy5zZW5zaXRpdml0eS55IC8gMik7XHJcbiAgICAgICAgdGhpcy5waGkgPSBNYXRoLm1pbig4NSwgTWF0aC5tYXgoLTg1LCB0aGlzLnBoaSkpO1xyXG4gICAgICAgIGNvbnN0IGxvb2tBdCA9IG5ldyBkaXN0XzEuVmVjdG9yMygpO1xyXG4gICAgICAgIGxvb2tBdC54ID0gY2VudGVyLnggKyB0aGlzLnJhZGl1cyAqIE1hdGguc2luKCh0aGlzLnRoZXRhICogTWF0aC5QSSkgLyAxODApICogTWF0aC5jb3MoKHRoaXMucGhpICogTWF0aC5QSSkgLyAxODApO1xyXG4gICAgICAgIGxvb2tBdC55ID0gY2VudGVyLnkgKyB0aGlzLnJhZGl1cyAqIE1hdGguc2luKCh0aGlzLnBoaSAqIE1hdGguUEkpIC8gMTgwKTtcclxuICAgICAgICBsb29rQXQueiA9IGNlbnRlci56ICsgdGhpcy5yYWRpdXMgKiBNYXRoLmNvcygodGhpcy50aGV0YSAqIE1hdGguUEkpIC8gMTgwKSAqIE1hdGguY29zKCh0aGlzLnBoaSAqIE1hdGguUEkpIC8gMTgwKTtcclxuICAgICAgICB0aGlzLmNhbWVyYS51cGRhdGVNYXRyaXgoKTtcclxuICAgICAgICB0aGlzLmNhbWVyYS5sb29rQXQobG9va0F0KTtcclxuICAgIH1cclxufVxyXG5leHBvcnRzLkZpcnN0UGVyc29uQ29udHJvbHMgPSBGaXJzdFBlcnNvbkNvbnRyb2xzO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1maXJzdFBlcnNvbkNvbnRyb2xzLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xyXG4vKipcclxuICogQGF1dGhvciAgICAgICBZYW5uaWNrIERldWJlbCAoaHR0cHM6Ly9naXRodWIuY29tL3lhbmRldSlcclxuICogQGNvcHlyaWdodCAgICBDb3B5cmlnaHQgKGMpIDIwMjAgWWFubmljayBEZXViZWw7IFByb2plY3QgVXJsOiBodHRwczovL2dpdGh1Yi5jb20vZW5hYmxlM2QvZW5hYmxlM2RcclxuICogQGxpY2Vuc2UgICAgICB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2VuYWJsZTNkL2VuYWJsZTNkL2Jsb2IvbWFzdGVyL0xJQ0VOU0V8R05VIEdQTHYzfVxyXG4gKi9cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLkpveVN0aWNrID0gdm9pZCAwO1xyXG5jb25zdCBldmVudGVtaXR0ZXIzXzEgPSByZXF1aXJlKFwiZXZlbnRlbWl0dGVyM1wiKTtcclxuLy8gVGhpcyBjbGFzcyBpcyBiYXNlZCBvbiBhIGZpbGUgSSBmb3VuZCBvbmxpbmUgY2FsbGVkIHRvb24zZC5qc1xyXG4vLyBVbmZvcnR1bmF0ZWx5IEkgY291bGQgbm90IGZpbmQgaXRzIGxpY2Vuc2Ugb3IgYXV0aG9yLlxyXG4vLyBJIGp1c3QgcG9ydGVkIGl0IHRvIFR5cGVTY3JpcHQgYW5kIGltcHJvdmVkIHRoZSBjb2RlLlxyXG5jbGFzcyBKb3lTdGljayBleHRlbmRzIGV2ZW50ZW1pdHRlcjNfMS5FdmVudEVtaXR0ZXIge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcclxuICAgICAgICB0aGlzLmlkID0gLTE7XHJcbiAgICB9XHJcbiAgICBnZXQgYWRkKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGF4aXM6IChjb25maWcgPSB7fSkgPT4gdGhpcy5hZGRBeGlzKGNvbmZpZyksXHJcbiAgICAgICAgICAgIGJ1dHRvbjogKGNvbmZpZyA9IHt9KSA9PiB0aGlzLmFkZEJ1dHRvbihjb25maWcpXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIGFkZEF4aXMoY29uZmlnID0ge30pIHtcclxuICAgICAgICB0aGlzLmlkKys7XHJcbiAgICAgICAgY29uc3QgeyBzdHlsZXMgPSB7IGxlZnQ6IDM1LCBib3R0b206IDM1LCBzaXplOiAxMDAgfSB9ID0gY29uZmlnO1xyXG4gICAgICAgIGNvbnN0IGNpcmNsZSA9IHRoaXMuY2lyY2xlKHsgc3R5bGVzIH0pO1xyXG4gICAgICAgIGNvbnN0IHRodW1iID0gdGhpcy50aHVtYih7IHN0eWxlcyB9KTtcclxuICAgICAgICBjaXJjbGUuYXBwZW5kQ2hpbGQodGh1bWIpO1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoY2lyY2xlKTtcclxuICAgICAgICBjb25zdCB7IG1heFJhZGl1cyA9IDQwLCByb3RhdGlvbkRhbXBpbmcgPSAwLjA2LCBtb3ZlRGFtcGluZyA9IDAuMDEgfSA9IGNvbmZpZztcclxuICAgICAgICAvLyBlbGVtZW50XHJcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IHtcclxuICAgICAgICAgICAgaWQ6IHRoaXMuaWQsXHJcbiAgICAgICAgICAgIGRvbUVsZW1lbnQ6IHRodW1iLFxyXG4gICAgICAgICAgICBtYXhSYWRpdXM6IG1heFJhZGl1cyxcclxuICAgICAgICAgICAgbWF4UmFkaXVzU3F1YXJlZDogbWF4UmFkaXVzICogbWF4UmFkaXVzLFxyXG4gICAgICAgICAgICBvcmlnaW46IHsgbGVmdDogdGh1bWIub2Zmc2V0TGVmdCwgdG9wOiB0aHVtYi5vZmZzZXRUb3AgfSxcclxuICAgICAgICAgICAgb2Zmc2V0OiB7IHg6IDAsIHk6IDAgfSxcclxuICAgICAgICAgICAgcm90YXRpb25EYW1waW5nOiByb3RhdGlvbkRhbXBpbmcsXHJcbiAgICAgICAgICAgIG1vdmVEYW1waW5nOiBtb3ZlRGFtcGluZ1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgaWYgKGVsZW1lbnQgPT09IG51bGwgfHwgZWxlbWVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogZWxlbWVudC5kb21FbGVtZW50KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgZG9tRWxlbWVudCB9ID0gZWxlbWVudDtcclxuICAgICAgICAgICAgaWYgKCdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdykge1xyXG4gICAgICAgICAgICAgICAgZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgZXZ0ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRhcChldnQsIGVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBldnQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGFwKGV2dCwgZWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgb25Nb3ZlOiAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMub24oYGF4aXNfb25tb3ZlXyR7ZWxlbWVudC5pZH1gLCBkZWx0YSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQoZGVsdGEpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgYWRkQnV0dG9uKGNvbmZpZyA9IHt9KSB7XHJcbiAgICAgICAgdGhpcy5pZCsrO1xyXG4gICAgICAgIGNvbnN0IHsgc3R5bGVzID0geyByaWdodDogMzUsIGJvdHRvbTogMzUsIHNpemU6IDgwIH0sIGxldHRlcjogbCA9ICdBJyB9ID0gY29uZmlnO1xyXG4gICAgICAgIGNvbnN0IGNpcmNsZSA9IHRoaXMuY2lyY2xlKHsgc3R5bGVzIH0pO1xyXG4gICAgICAgIGNvbnN0IGxldHRlciA9IHRoaXMubGV0dGVyKHsgbGV0dGVyOiBsIH0pO1xyXG4gICAgICAgIGNpcmNsZS5hcHBlbmRDaGlsZChsZXR0ZXIpO1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoY2lyY2xlKTtcclxuICAgICAgICAvLyBlbGVtZW50XHJcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IHtcclxuICAgICAgICAgICAgaWQ6IHRoaXMuaWQsXHJcbiAgICAgICAgICAgIGRvbUVsZW1lbnQ6IGNpcmNsZSxcclxuICAgICAgICAgICAgb2Zmc2V0OiB7IHg6IDAsIHk6IDAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgaWYgKGVsZW1lbnQgPT09IG51bGwgfHwgZWxlbWVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogZWxlbWVudC5kb21FbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xpY2soZWxlbWVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIG9uQ2xpY2s6IChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbihgYnV0dG9uX29uY2xpY2tfJHtlbGVtZW50LmlkfWAsIGRhdGEgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50KGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG9uUmVsZWFzZTogKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uKGBidXR0b25fb25yZWxlYXNlXyR7ZWxlbWVudC5pZH1gLCBkYXRhID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBldmVudChkYXRhKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIGNpcmNsZShjb25maWcgPSB7fSkge1xyXG4gICAgICAgIGNvbnN0IHsgc3R5bGVzIH0gPSBjb25maWc7XHJcbiAgICAgICAgY29uc3QgeyB0b3AsIHJpZ2h0LCBib3R0b20sIGxlZnQsIHNpemUgfSA9IHN0eWxlcztcclxuICAgICAgICBjb25zdCBjaXJjbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBsZXQgY3NzID0gYHBvc2l0aW9uOmFic29sdXRlOyB3aWR0aDoke3NpemV9cHg7IGhlaWdodDoke3NpemV9cHg7IGJhY2tncm91bmQ6cmdiYSgxMjYsIDEyNiwgMTI2LCAwLjUpOyBib3JkZXI6IzQ0NCBzb2xpZCBtZWRpdW07IGJvcmRlci1yYWRpdXM6NTAlOyBjdXJzb3I6IHBvaW50ZXI7IGA7XHJcbiAgICAgICAgaWYgKHRvcClcclxuICAgICAgICAgICAgY3NzICs9IGB0b3A6JHt0b3B9cHg7IGA7XHJcbiAgICAgICAgaWYgKHJpZ2h0KVxyXG4gICAgICAgICAgICBjc3MgKz0gYHJpZ2h0OiR7cmlnaHR9cHg7IGA7XHJcbiAgICAgICAgaWYgKGJvdHRvbSlcclxuICAgICAgICAgICAgY3NzICs9IGBib3R0b206JHtib3R0b219cHg7IGA7XHJcbiAgICAgICAgaWYgKGxlZnQpXHJcbiAgICAgICAgICAgIGNzcyArPSBgbGVmdDoke2xlZnR9cHg7IGA7XHJcbiAgICAgICAgY2lyY2xlLnN0eWxlLmNzc1RleHQgPSBjc3M7XHJcbiAgICAgICAgcmV0dXJuIGNpcmNsZTtcclxuICAgIH1cclxuICAgIHRodW1iKGNvbmZpZyA9IHt9KSB7XHJcbiAgICAgICAgY29uc3QgeyBzdHlsZXMgfSA9IGNvbmZpZztcclxuICAgICAgICBjb25zdCB7IHNpemUgfSA9IHN0eWxlcztcclxuICAgICAgICBjb25zdCB0aHVtYiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIHRodW1iLnN0eWxlLmNzc1RleHQgPSBgcG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiAke3NpemUgLyA0fXB4OyB0b3A6ICR7c2l6ZSAvIDR9cHg7IHdpZHRoOiAke3NpemUgLyAyfXB4OyBoZWlnaHQ6ICR7c2l6ZSAvIDJ9cHg7IGJvcmRlci1yYWRpdXM6IDUwJTsgYmFja2dyb3VuZDogI2ZmZjsgYDtcclxuICAgICAgICByZXR1cm4gdGh1bWI7XHJcbiAgICB9XHJcbiAgICBsZXR0ZXIoY29uZmlnID0ge30pIHtcclxuICAgICAgICBjb25zdCB7IGxldHRlcjogbCB9ID0gY29uZmlnO1xyXG4gICAgICAgIGNvbnN0IGxldHRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcclxuICAgICAgICBsZXR0ZXIuaW5uZXJUZXh0ID0gbDtcclxuICAgICAgICBsZXR0ZXIuc3R5bGUuY3NzVGV4dCA9XHJcbiAgICAgICAgICAgICdwb3NpdGlvbjogYWJzb2x1dGU7IHRleHQtYWxpZ246IGNlbnRlcjsgdG9wOiA0cHg7IHdpZHRoOiA4MHB4OyBoZWlnaHQ6IDgwcHg7IGZvbnQtc2l6ZTogNjRweDsgY29sb3I6ICNmZmY7ICc7XHJcbiAgICAgICAgcmV0dXJuIGxldHRlcjtcclxuICAgIH1cclxuICAgIGNsaWNrKGVsZW1lbnQpIHtcclxuICAgICAgICBjb25zdCB7IGlkLCBkb21FbGVtZW50IH0gPSBlbGVtZW50O1xyXG4gICAgICAgIGlmICgnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3cpIHtcclxuICAgICAgICAgICAgZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgZXZ0ID0+IHtcclxuICAgICAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KGBidXR0b25fb25jbGlja18ke2lkfWApO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIGV2dCA9PiB7XHJcbiAgICAgICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZW1pdChgYnV0dG9uX29ucmVsZWFzZV8ke2lkfWApO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgZXZ0ID0+IHtcclxuICAgICAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KGBidXR0b25fb25jbGlja18ke2lkfWApO1xyXG4gICAgICAgICAgICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgZXZ0ID0+IHtcclxuICAgICAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KGBidXR0b25fb25yZWxlYXNlXyR7aWR9YCk7XHJcbiAgICAgICAgICAgICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHRhcChldnQsIGVsZW1lbnQpIHtcclxuICAgICAgICBldnQgPSBldnQgfHwgd2luZG93LmV2ZW50O1xyXG4gICAgICAgIC8vIGdldCB0aGUgbW91c2UgY3Vyc29yIHBvc2l0aW9uIGF0IHN0YXJ0dXA6XHJcbiAgICAgICAgZWxlbWVudC5vZmZzZXQgPSB0aGlzLmdldE1vdXNlUG9zaXRpb24oZXZ0KTtcclxuICAgICAgICBpZiAoJ29udG91Y2hzdGFydCcgaW4gd2luZG93KSB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50Lm9udG91Y2htb3ZlID0gZXZ0ID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChldnQudGFyZ2V0ID09PSBlbGVtZW50LmRvbUVsZW1lbnQpXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tb3ZlKGV2dCwgZWxlbWVudCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGRvY3VtZW50Lm9udG91Y2hlbmQgPSBldnQgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGV2dC50YXJnZXQgPT09IGVsZW1lbnQuZG9tRWxlbWVudClcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgZG9jdW1lbnQub25tb3VzZW1vdmUgPSBldnQgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGV2dC50YXJnZXQgPT09IGVsZW1lbnQuZG9tRWxlbWVudClcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1vdmUoZXZ0LCBlbGVtZW50KTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgZG9jdW1lbnQub25tb3VzZXVwID0gX2V2dCA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIG1vdmUoZXZ0LCBlbGVtZW50KSB7XHJcbiAgICAgICAgY29uc3QgeyBkb21FbGVtZW50LCBtYXhSYWRpdXMsIG1heFJhZGl1c1NxdWFyZWQsIG9yaWdpbiwgb2Zmc2V0LCBpZCB9ID0gZWxlbWVudDtcclxuICAgICAgICBldnQgPSBldnQgfHwgd2luZG93LmV2ZW50O1xyXG4gICAgICAgIGNvbnN0IG1vdXNlID0gdGhpcy5nZXRNb3VzZVBvc2l0aW9uKGV2dCk7XHJcbiAgICAgICAgLy8gY2FsY3VsYXRlIHRoZSBuZXcgY3Vyc29yIHBvc2l0aW9uOlxyXG4gICAgICAgIGxldCBsZWZ0ID0gbW91c2UueCAtIG9mZnNldC54O1xyXG4gICAgICAgIGxldCB0b3AgPSBtb3VzZS55IC0gb2Zmc2V0Lnk7XHJcbiAgICAgICAgLy90aGlzLm9mZnNldCA9IG1vdXNlO1xyXG4gICAgICAgIGNvbnN0IHNxTWFnID0gbGVmdCAqIGxlZnQgKyB0b3AgKiB0b3A7XHJcbiAgICAgICAgaWYgKHNxTWFnID4gbWF4UmFkaXVzU3F1YXJlZCkge1xyXG4gICAgICAgICAgICAvL09ubHkgdXNlIHNxcnQgaWYgZXNzZW50aWFsXHJcbiAgICAgICAgICAgIGNvbnN0IG1hZ25pdHVkZSA9IE1hdGguc3FydChzcU1hZyk7XHJcbiAgICAgICAgICAgIGxlZnQgLz0gbWFnbml0dWRlO1xyXG4gICAgICAgICAgICB0b3AgLz0gbWFnbml0dWRlO1xyXG4gICAgICAgICAgICBsZWZ0ICo9IG1heFJhZGl1cztcclxuICAgICAgICAgICAgdG9wICo9IG1heFJhZGl1cztcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gc2V0IHRoZSBlbGVtZW50J3MgbmV3IHBvc2l0aW9uOlxyXG4gICAgICAgIGRvbUVsZW1lbnQuc3R5bGUudG9wID0gYCR7dG9wICsgZG9tRWxlbWVudC5jbGllbnRIZWlnaHQgLyAyfXB4YDtcclxuICAgICAgICBkb21FbGVtZW50LnN0eWxlLmxlZnQgPSBgJHtsZWZ0ICsgZG9tRWxlbWVudC5jbGllbnRXaWR0aCAvIDJ9cHhgO1xyXG4gICAgICAgIGNvbnN0IGZvcndhcmQgPSAtKHRvcCAtIG9yaWdpbi50b3AgKyBkb21FbGVtZW50LmNsaWVudEhlaWdodCAvIDIpIC8gbWF4UmFkaXVzO1xyXG4gICAgICAgIGNvbnN0IHR1cm4gPSAobGVmdCAtIG9yaWdpbi5sZWZ0ICsgZG9tRWxlbWVudC5jbGllbnRXaWR0aCAvIDIpIC8gbWF4UmFkaXVzO1xyXG4gICAgICAgIHRoaXMuZW1pdChgYXhpc19vbm1vdmVfJHtpZH1gLCB7IHRvcDogZm9yd2FyZCwgcmlnaHQ6IHR1cm4gfSk7XHJcbiAgICB9XHJcbiAgICB1cChlbGVtZW50KSB7XHJcbiAgICAgICAgY29uc3QgeyBkb21FbGVtZW50LCBvcmlnaW4sIGlkIH0gPSBlbGVtZW50O1xyXG4gICAgICAgIGlmICgnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3cpIHtcclxuICAgICAgICAgICAgZG9jdW1lbnQub250b3VjaG1vdmUgPSBudWxsO1xyXG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgIGRvY3VtZW50LnRvdWNoZW5kID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50Lm9ubW91c2Vtb3ZlID0gbnVsbDtcclxuICAgICAgICAgICAgZG9jdW1lbnQub25tb3VzZXVwID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZG9tRWxlbWVudC5zdHlsZS50b3AgPSBgJHtvcmlnaW4udG9wfXB4YDtcclxuICAgICAgICBkb21FbGVtZW50LnN0eWxlLmxlZnQgPSBgJHtvcmlnaW4ubGVmdH1weGA7XHJcbiAgICAgICAgdGhpcy5lbWl0KGBheGlzX29ubW92ZV8ke2lkfWAsIHsgdG9wOiAwLCByaWdodDogMCB9KTtcclxuICAgIH1cclxuICAgIGdldE1vdXNlUG9zaXRpb24oZXZ0KSB7XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIGxldCBjbGllbnRYID0gZXZ0LnRhcmdldFRvdWNoZXMgPyBldnQudGFyZ2V0VG91Y2hlc1swXS5wYWdlWCA6IGV2dC5jbGllbnRYO1xyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICBsZXQgY2xpZW50WSA9IGV2dC50YXJnZXRUb3VjaGVzID8gZXZ0LnRhcmdldFRvdWNoZXNbMF0ucGFnZVkgOiBldnQuY2xpZW50WTtcclxuICAgICAgICByZXR1cm4geyB4OiBjbGllbnRYLCB5OiBjbGllbnRZIH07XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0cy5Kb3lTdGljayA9IEpveVN0aWNrO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1qb3lzdGljay5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLlBvaW50ZXJEcmFnID0gdm9pZCAwO1xyXG5jbGFzcyBQb2ludGVyRHJhZyB7XHJcbiAgICBjb25zdHJ1Y3RvcihfZWxlbWVudCwgYXV0b1N0YXJ0ID0gdHJ1ZSkge1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnQgPSBfZWxlbWVudDtcclxuICAgICAgICB0aGlzLl9pc1J1bm5pbmcgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9wb3NpdGlvbiA9IHsgeDogMCwgeTogMCB9O1xyXG4gICAgICAgIHRoaXMuX2RlbHRhID0geyB4OiAwLCB5OiAwIH07XHJcbiAgICAgICAgdGhpcy5fb25Nb3ZlQ2FsbGJhY2sgPSAoKSA9PiB7IH07XHJcbiAgICAgICAgdGhpcy5faXNQb2ludGVyRG93biA9IGZhbHNlO1xyXG4gICAgICAgIGlmIChhdXRvU3RhcnQpXHJcbiAgICAgICAgICAgIHRoaXMuc3RhcnQoKTtcclxuICAgIH1cclxuICAgIGdldCBpc1RvdWNoRGV2aWNlKCkge1xyXG4gICAgICAgIHJldHVybiAnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3c7XHJcbiAgICB9XHJcbiAgICBnZXQgaXNQb2ludGVyRG93bigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faXNQb2ludGVyRG93bjtcclxuICAgIH1cclxuICAgIHN0YXJ0KCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9pc1J1bm5pbmcpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB0aGlzLl9pc1J1bm5pbmcgPSB0cnVlO1xyXG4gICAgICAgIGlmICh0aGlzLmlzVG91Y2hEZXZpY2UpIHtcclxuICAgICAgICAgICAgdGhpcy5fZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgZSA9PiB0aGlzLm9uVG91Y2hTdGFydChlKSk7XHJcbiAgICAgICAgICAgIHRoaXMuX2VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBlID0+IHRoaXMub25Ub3VjaEVuZChlKSk7XHJcbiAgICAgICAgICAgIHRoaXMuX2VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgZSA9PiB0aGlzLm9uVG91Y2hNb3ZlKGUpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgZSA9PiB0aGlzLm9uUG9pbnRlckRvd24oZSkpO1xyXG4gICAgICAgICAgICB0aGlzLl9lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBlID0+IHRoaXMub25Qb2ludGVyVXAoZSkpO1xyXG4gICAgICAgICAgICB0aGlzLl9lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCBlID0+IHRoaXMub25Qb2ludGVyTGVhdmUoZSkpO1xyXG4gICAgICAgICAgICB0aGlzLl9lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsIGUgPT4gdGhpcy5vblBvaW50ZXJPdmVyKGUpKTtcclxuICAgICAgICAgICAgdGhpcy5fZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBlID0+IHRoaXMub25Qb2ludGVyTW92ZShlKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgc3RvcCgpIHtcclxuICAgICAgICBpZiAodGhpcy5pc1RvdWNoRGV2aWNlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIGUgPT4gdGhpcy5vblRvdWNoU3RhcnQoZSkpO1xyXG4gICAgICAgICAgICB0aGlzLl9lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgZSA9PiB0aGlzLm9uVG91Y2hFbmQoZSkpO1xyXG4gICAgICAgICAgICB0aGlzLl9lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIGUgPT4gdGhpcy5vblRvdWNoTW92ZShlKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGUgPT4gdGhpcy5vblBvaW50ZXJEb3duKGUpKTtcclxuICAgICAgICAgICAgdGhpcy5fZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgZSA9PiB0aGlzLm9uUG9pbnRlckxlYXZlKGUpKTtcclxuICAgICAgICAgICAgdGhpcy5fZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgZSA9PiB0aGlzLm9uUG9pbnRlclVwKGUpKTtcclxuICAgICAgICAgICAgdGhpcy5fZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLCBlID0+IHRoaXMub25Qb2ludGVyT3ZlcihlKSk7XHJcbiAgICAgICAgICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgZSA9PiB0aGlzLm9uUG9pbnRlck1vdmUoZSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9pc1J1bm5pbmcgPSBmYWxzZTtcclxuICAgIH1cclxuICAgIHJlbW92ZUxpc3RlbmVycygpIHtcclxuICAgICAgICB0aGlzLnN0b3AoKTtcclxuICAgIH1cclxuICAgIG9uTW92ZShvbk1vdmVDYWxsYmFjaykge1xyXG4gICAgICAgIHRoaXMuX29uTW92ZUNhbGxiYWNrID0gb25Nb3ZlQ2FsbGJhY2s7XHJcbiAgICB9XHJcbiAgICBvblBvaW50ZXJEb3duKF9lKSB7XHJcbiAgICAgICAgdGhpcy5faXNQb2ludGVyRG93biA9IHRydWU7XHJcbiAgICB9XHJcbiAgICBvblBvaW50ZXJVcChfZSkge1xyXG4gICAgICAgIHRoaXMuX2lzUG9pbnRlckRvd24gPSBmYWxzZTtcclxuICAgIH1cclxuICAgIG9uUG9pbnRlckxlYXZlKF9lKSB7XHJcbiAgICAgICAgdGhpcy5faXNQb2ludGVyRG93biA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgb25Qb2ludGVyTW92ZShlKSB7XHJcbiAgICAgICAgY29uc3QgY2xpZW50WCA9IGUubW92ZW1lbnRYO1xyXG4gICAgICAgIGNvbnN0IGNsaWVudFkgPSBlLm1vdmVtZW50WTtcclxuICAgICAgICB0aGlzLl9kZWx0YSA9IHsgeDogY2xpZW50WCwgeTogY2xpZW50WSB9O1xyXG4gICAgICAgIHRoaXMuX29uTW92ZUNhbGxiYWNrKHRoaXMuX2RlbHRhKTtcclxuICAgIH1cclxuICAgIG9uUG9pbnRlck92ZXIoX2UpIHsgfVxyXG4gICAgb25Ub3VjaFN0YXJ0KGUpIHtcclxuICAgICAgICBjb25zdCBjbGllbnRYID0gZS50b3VjaGVzWzBdLmNsaWVudFg7XHJcbiAgICAgICAgY29uc3QgY2xpZW50WSA9IGUudG91Y2hlc1swXS5jbGllbnRZO1xyXG4gICAgICAgIHRoaXMuX3Bvc2l0aW9uID0geyB4OiBjbGllbnRYLCB5OiBjbGllbnRZIH07XHJcbiAgICB9XHJcbiAgICBvblRvdWNoRW5kKF9lKSB7XHJcbiAgICAgICAgdGhpcy5fcG9zaXRpb24gPSB7IHg6IDAsIHk6IDAgfTtcclxuICAgICAgICB0aGlzLl9kZWx0YSA9IHsgeDogMCwgeTogMCB9O1xyXG4gICAgICAgIHRoaXMuX29uTW92ZUNhbGxiYWNrKHRoaXMuX2RlbHRhKTtcclxuICAgIH1cclxuICAgIG9uVG91Y2hNb3ZlKGUpIHtcclxuICAgICAgICBjb25zdCBjbGllbnRYID0gZS50b3VjaGVzWzBdLmNsaWVudFg7XHJcbiAgICAgICAgY29uc3QgY2xpZW50WSA9IGUudG91Y2hlc1swXS5jbGllbnRZO1xyXG4gICAgICAgIHRoaXMuX2RlbHRhID0geyB4OiBjbGllbnRYIC0gdGhpcy5fcG9zaXRpb24ueCwgeTogY2xpZW50WSAtIHRoaXMuX3Bvc2l0aW9uLnkgfTtcclxuICAgICAgICB0aGlzLl9vbk1vdmVDYWxsYmFjayh0aGlzLl9kZWx0YSk7XHJcbiAgICAgICAgdGhpcy5fcG9zaXRpb24gPSB7IHg6IGNsaWVudFgsIHk6IGNsaWVudFkgfTtcclxuICAgIH1cclxufVxyXG5leHBvcnRzLlBvaW50ZXJEcmFnID0gUG9pbnRlckRyYWc7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBvaW50ZXJEcmFnLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuUG9pbnRlckxvY2sgPSB2b2lkIDA7XHJcbmNsYXNzIFBvaW50ZXJMb2NrIHtcclxuICAgIGNvbnN0cnVjdG9yKF9lbGVtZW50LCBhdXRvTG9jayA9IHRydWUpIHtcclxuICAgICAgICB0aGlzLl9lbGVtZW50ID0gX2VsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy5faXNSdW5uaW5nID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKGF1dG9Mb2NrKVxyXG4gICAgICAgICAgICB0aGlzLnJlcXVlc3QoKTtcclxuICAgIH1cclxuICAgIGlzTG9ja2VkKCkge1xyXG4gICAgICAgIHJldHVybiAhIWRvY3VtZW50LnBvaW50ZXJMb2NrRWxlbWVudDtcclxuICAgIH1cclxuICAgIGV4aXQoKSB7XHJcbiAgICAgICAgdGhpcy5faXNSdW5uaW5nID0gZmFsc2U7XHJcbiAgICAgICAgZG9jdW1lbnQuZXhpdFBvaW50ZXJMb2NrKCk7XHJcbiAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcnMoKTtcclxuICAgIH1cclxuICAgIHJlbW92ZUxpc3RlbmVycygpIHtcclxuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdwb2ludGVybG9ja2NoYW5nZScsICgpID0+IHRoaXMucG9pbnRlckxvY2tDaGFuZ2VIYW5kbGVyKCkpO1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9pbnRlcmRvd24nLCAoKSA9PiB0aGlzLnBvaW50ZXJEb3duSGFuZGxlckhhbmRsZXIoKSk7XHJcbiAgICB9XHJcbiAgICBwb2ludGVyTG9ja0NoYW5nZUhhbmRsZXIoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9pc1J1bm5pbmcpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB0aGlzLl9yZXF1ZXN0KCk7XHJcbiAgICB9XHJcbiAgICBwb2ludGVyRG93bkhhbmRsZXJIYW5kbGVyKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5faXNSdW5uaW5nKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgdGhpcy5fZWxlbWVudC5yZXF1ZXN0UG9pbnRlckxvY2soKTtcclxuICAgIH1cclxuICAgIHJlcXVlc3QoKSB7XHJcbiAgICAgICAgdGhpcy5faXNSdW5uaW5nID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLl9yZXF1ZXN0KCk7XHJcbiAgICB9XHJcbiAgICBfcmVxdWVzdCgpIHtcclxuICAgICAgICAvLyBsaXN0ZW4gdG8gcG9pbnRlciBsb2NrIGNoYW5nZSBldmVudHNcclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVybG9ja2NoYW5nZScsICgpID0+IHRoaXMucG9pbnRlckxvY2tDaGFuZ2VIYW5kbGVyKCksIHtcclxuICAgICAgICAgICAgb25jZTogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIHJldHVybiBpZiBwb2ludGVyIGlzIGFscmVhZHkgbG9ja2VkXHJcbiAgICAgICAgaWYgKCEhZG9jdW1lbnQucG9pbnRlckxvY2tFbGVtZW50KVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgLy8gbGlzdGVuIGZvciBwb2ludGVyZG93biBldmVudFxyXG4gICAgICAgIHRoaXMuX2VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcmRvd24nLCAoKSA9PiB0aGlzLnBvaW50ZXJEb3duSGFuZGxlckhhbmRsZXIoKSwgeyBvbmNlOiB0cnVlIH0pO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydHMuUG9pbnRlckxvY2sgPSBQb2ludGVyTG9jaztcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cG9pbnRlckxvY2suanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbi8qKlxyXG4gKiBAZGVzY3JpcHRpb24gIFRoaXMgY29kZSBoYXMgb3JpZ2luYWxseSBiZWVuIGNvcGllZCBmcm9tIFNrZXRjaGJvb2tcclxuICpcclxuICogQGF1dGhvciAgICAgICBzd2lmdDUwMiA8YmxhaGEuajUwMkBnbWFpbC5jb20+IChodHRwOi8vamJsYWhhLmFydC8pXHJcbiAqIEBjb3B5cmlnaHQgICAgQ29weXJpZ2h0IChjKSAyMDE4IHN3aWZ0NTAyOyBQcm9qZWN0IFVybDogaHR0cHM6Ly9naXRodWIuY29tL3N3aWZ0NTAyL1NrZXRjaGJvb2tcclxuICogQGxpY2Vuc2UgICAgICB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL3N3aWZ0NTAyL1NrZXRjaGJvb2svYmxvYi9tYXN0ZXIvTElDRU5TRXxHUEwtMy4wfVxyXG4gKlxyXG4gKiBAYXV0aG9yICAgICAgIFlhbm5pY2sgRGV1YmVsIChodHRwczovL2dpdGh1Yi5jb20veWFuZGV1KVxyXG4gKiBAY29weXJpZ2h0ICAgIENvcHlyaWdodCAoYykgMjAyMCBZYW5uaWNrIERldWJlbDsgUHJvamVjdCBVcmw6IGh0dHBzOi8vZ2l0aHViLmNvbS9lbmFibGUzZC9lbmFibGUzZFxyXG4gKiBAbGljZW5zZSAgICAgIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZW5hYmxlM2QvZW5hYmxlM2QvYmxvYi9tYXN0ZXIvTElDRU5TRXxHTlUgR1BMdjN9XHJcbiAqL1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuVGhpcmRQZXJzb25Db250cm9scyA9IHZvaWQgMDtcclxuY29uc3QgZGlzdF8xID0gcmVxdWlyZShcIkBlbmFibGUzZC90aHJlZS13cmFwcGVyL2Rpc3RcIik7XHJcbmNsYXNzIFRoaXJkUGVyc29uQ29udHJvbHMge1xyXG4gICAgY29uc3RydWN0b3IoY2FtZXJhLCB0YXJnZXQsIGNvbmZpZykge1xyXG4gICAgICAgIHRoaXMuY2FtZXJhID0gY2FtZXJhO1xyXG4gICAgICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xyXG4gICAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xyXG4gICAgICAgIGNvbnN0IHsgb2Zmc2V0ID0gbmV3IGRpc3RfMS5WZWN0b3IzKDAsIDAsIDApLCBzZW5zaXRpdml0eSA9IG5ldyBkaXN0XzEuVmVjdG9yMigxLCAxKSwgcmFkaXVzID0gOCwgdGFyZ2V0UmFkaXVzID0gMTAsIGludGVycG9sYXRpb25GYWN0b3IgPSAwLjA1LCBwb2ludGVyTG9jayA9IHRydWUsIGF1dG9VcGRhdGUgPSB0cnVlLCB0aGV0YSA9IDAsIHBoaSA9IDAsIFxyXG4gICAgICAgIC8qKiBNYXggUGhpIGluIGRlZyAqL1xyXG4gICAgICAgIG1heFBoaSA9IDg1LCBcclxuICAgICAgICAvKiogTWluIFBoaSBpbiBkZWcgKi9cclxuICAgICAgICBtaW5QaGkgPSAtODUgfSA9IGNvbmZpZztcclxuICAgICAgICB0aGlzLm9mZnNldCA9IG9mZnNldDtcclxuICAgICAgICB0aGlzLnNlbnNpdGl2aXR5ID0gc2Vuc2l0aXZpdHk7XHJcbiAgICAgICAgdGhpcy5yYWRpdXMgPSByYWRpdXM7XHJcbiAgICAgICAgdGhpcy50YXJnZXRSYWRpdXMgPSB0YXJnZXRSYWRpdXM7XHJcbiAgICAgICAgdGhpcy5pbnRlcnBvbGF0aW9uRmFjdG9yID0gaW50ZXJwb2xhdGlvbkZhY3RvcjtcclxuICAgICAgICB0aGlzLnRoZXRhID0gdGhldGE7XHJcbiAgICAgICAgdGhpcy5waGkgPSBwaGk7XHJcbiAgICAgICAgdGhpcy5tYXhQaGkgPSBtYXhQaGk7XHJcbiAgICAgICAgdGhpcy5taW5QaGkgPSBtaW5QaGk7XHJcbiAgICAgICAgLy8gaWYgKHBvaW50ZXJMb2NrKSB7XHJcbiAgICAgICAgLy8gICBzY2VuZS5pbnB1dC5vbigncG9pbnRlcmRvd24nLCAoKSA9PiB7XHJcbiAgICAgICAgLy8gICAgIHNjZW5lLmlucHV0Lm1vdXNlLnJlcXVlc3RQb2ludGVyTG9jaygpXHJcbiAgICAgICAgLy8gICB9KVxyXG4gICAgICAgIC8vICAgc2NlbmUuaW5wdXQub24oJ3BvaW50ZXJtb3ZlJywgKHBvaW50ZXI6IFBvaW50ZXJFdmVudCkgPT4ge1xyXG4gICAgICAgIC8vICAgICBpZiAoc2NlbmUuaW5wdXQubW91c2UubG9ja2VkKSB7XHJcbiAgICAgICAgLy8gICAgICAgdGhpcy51cGRhdGUocG9pbnRlci5tb3ZlbWVudFgsIHBvaW50ZXIubW92ZW1lbnRZKVxyXG4gICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgLy8gICB9KVxyXG4gICAgICAgIC8vIH1cclxuICAgICAgICAvLyBpZiAoYXV0b1VwZGF0ZSkge1xyXG4gICAgICAgIC8vICAgc2NlbmUuZXZlbnRzLm9uKCd1cGRhdGUnLCAoKSA9PiB7XHJcbiAgICAgICAgLy8gICAgIHRoaXMudXBkYXRlKDAsIDApXHJcbiAgICAgICAgLy8gICB9KVxyXG4gICAgICAgIC8vIH1cclxuICAgIH1cclxuICAgIHVwZGF0ZShkZWx0YVgsIGRlbHRhWSkge1xyXG4gICAgICAgIGNvbnN0IHRhcmdldCA9IHRoaXMudGFyZ2V0LnBvc2l0aW9uLmNsb25lKCkuYWRkKHRoaXMub2Zmc2V0KTtcclxuICAgICAgICB0aGlzLnRoZXRhIC09IGRlbHRhWCAqICh0aGlzLnNlbnNpdGl2aXR5LnggLyAyKTtcclxuICAgICAgICB0aGlzLnRoZXRhICU9IDM2MDtcclxuICAgICAgICB0aGlzLnBoaSArPSBkZWx0YVkgKiAodGhpcy5zZW5zaXRpdml0eS55IC8gMik7XHJcbiAgICAgICAgdGhpcy5waGkgPSBNYXRoLm1pbih0aGlzLm1heFBoaSwgTWF0aC5tYXgodGhpcy5taW5QaGksIHRoaXMucGhpKSk7XHJcbiAgICAgICAgdGhpcy5yYWRpdXMgPSBkaXN0XzEuTWF0aFV0aWxzLmxlcnAodGhpcy5yYWRpdXMsIHRoaXMudGFyZ2V0UmFkaXVzLCB0aGlzLmludGVycG9sYXRpb25GYWN0b3IpO1xyXG4gICAgICAgIHRoaXMuY2FtZXJhLnBvc2l0aW9uLnggPVxyXG4gICAgICAgICAgICB0YXJnZXQueCArIHRoaXMucmFkaXVzICogTWF0aC5zaW4oKHRoaXMudGhldGEgKiBNYXRoLlBJKSAvIDE4MCkgKiBNYXRoLmNvcygodGhpcy5waGkgKiBNYXRoLlBJKSAvIDE4MCk7XHJcbiAgICAgICAgdGhpcy5jYW1lcmEucG9zaXRpb24ueSA9IHRhcmdldC55ICsgdGhpcy5yYWRpdXMgKiBNYXRoLnNpbigodGhpcy5waGkgKiBNYXRoLlBJKSAvIDE4MCk7XHJcbiAgICAgICAgdGhpcy5jYW1lcmEucG9zaXRpb24ueiA9XHJcbiAgICAgICAgICAgIHRhcmdldC56ICsgdGhpcy5yYWRpdXMgKiBNYXRoLmNvcygodGhpcy50aGV0YSAqIE1hdGguUEkpIC8gMTgwKSAqIE1hdGguY29zKCh0aGlzLnBoaSAqIE1hdGguUEkpIC8gMTgwKTtcclxuICAgICAgICB0aGlzLmNhbWVyYS51cGRhdGVNYXRyaXgoKTtcclxuICAgICAgICB0aGlzLmNhbWVyYS5sb29rQXQodGFyZ2V0KTtcclxuICAgIH1cclxufVxyXG5leHBvcnRzLlRoaXJkUGVyc29uQ29udHJvbHMgPSBUaGlyZFBlcnNvbkNvbnRyb2xzO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD10aGlyZFBlcnNvbkNvbnRyb2xzLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuYWRkV2F0ZXIgPSB2b2lkIDA7XHJcbmNvbnN0IGluZGV4XzEgPSByZXF1aXJlKFwiQGVuYWJsZTNkL3RocmVlLXdyYXBwZXIvZGlzdC9pbmRleFwiKTtcclxuY29uc3QgYWRkV2F0ZXIgPSAoc2NlbmUsIHJlbmRlcmVyLCBjb25maWcgPSB7fSkgPT4ge1xyXG4gICAgY29uc3QgeyB3aWR0aCA9IDIwLCBoZWlnaHQgPSAyMCwgeCA9IDAsIHkgPSAwLCB6ID0gMCwgY29sb3IgPSAnI2ZmZmZmZicsIHNjYWxlID0gNCwgZmxvd1ggPSAxLCBmbG93WSA9IDEsIG5vcm1hbE1hcDAgPSB1bmRlZmluZWQsIG5vcm1hbE1hcDEgPSB1bmRlZmluZWQgfSA9IGNvbmZpZztcclxuICAgIC8vZ3JvdW5kXHJcbiAgICBjb25zdCBncm91bmRHZW9tZXRyeSA9IG5ldyBpbmRleF8xLlBsYW5lQnVmZmVyR2VvbWV0cnkod2lkdGgsIGhlaWdodCk7XHJcbiAgICAvLyAjMDA3N2JlIChhbHNvIGtub3duIGFzIE9jZWFuIEJvYXQgQmx1ZSlcclxuICAgIGNvbnN0IGdyb3VuZE1hdGVyaWFsID0gbmV3IGluZGV4XzEuTWVzaFN0YW5kYXJkTWF0ZXJpYWwoeyBjb2xvcjogMHgwMDc3YmUsIHRyYW5zcGFyZW50OiB0cnVlLCBvcGFjaXR5OiAwLjggfSk7XHJcbiAgICBjb25zdCBncm91bmQgPSBuZXcgaW5kZXhfMS5NZXNoKGdyb3VuZEdlb21ldHJ5LCBncm91bmRNYXRlcmlhbCk7XHJcbiAgICBncm91bmQucG9zaXRpb24uc2V0KHgsIHksIHopO1xyXG4gICAgZ3JvdW5kLnJvdGF0aW9uLnggPSBNYXRoLlBJICogLTAuNTtcclxuICAgIHNjZW5lLmFkZChncm91bmQpO1xyXG4gICAgLy8gd2F0ZXJcclxuICAgIGNvbnN0IHdhdGVyR2VvbWV0cnkgPSBuZXcgaW5kZXhfMS5QbGFuZUJ1ZmZlckdlb21ldHJ5KHdpZHRoLCBoZWlnaHQpO1xyXG4gICAgY29uc3Qgd2F0ZXIgPSBuZXcgaW5kZXhfMS5XYXRlcih3YXRlckdlb21ldHJ5LCB7XHJcbiAgICAgICAgY29sb3I6IGNvbG9yLFxyXG4gICAgICAgIHNjYWxlOiBzY2FsZSxcclxuICAgICAgICBmbG93RGlyZWN0aW9uOiBuZXcgaW5kZXhfMS5WZWN0b3IyKGZsb3dYLCBmbG93WSksXHJcbiAgICAgICAgdGV4dHVyZVdpZHRoOiAxMDI0LFxyXG4gICAgICAgIHRleHR1cmVIZWlnaHQ6IDEwMjQsXHJcbiAgICAgICAgbm9ybWFsTWFwMDogbm9ybWFsTWFwMCxcclxuICAgICAgICBub3JtYWxNYXAxOiBub3JtYWxNYXAxLFxyXG4gICAgICAgIGVuY29kaW5nOiByZW5kZXJlci5vdXRwdXRFbmNvZGluZ1xyXG4gICAgfSk7XHJcbiAgICB3YXRlci5wb3NpdGlvbi5zZXQoeCwgeSArIDAuMSwgeik7XHJcbiAgICB3YXRlci5yb3RhdGlvbi54ID0gTWF0aC5QSSAqIC0wLjU7XHJcbiAgICBzY2VuZS5hZGQod2F0ZXIpO1xyXG4gICAgcmV0dXJuIHsgZ3JvdW5kLCB3YXRlciB9O1xyXG59O1xyXG5leHBvcnRzLmFkZFdhdGVyID0gYWRkV2F0ZXI7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXdhdGVyLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xyXG4vKipcclxuICogQGF1dGhvciAgICAgICBZYW5uaWNrIERldWJlbCAoaHR0cHM6Ly9naXRodWIuY29tL3lhbmRldSlcclxuICogQGNvcHlyaWdodCAgICBDb3B5cmlnaHQgKGMpIDIwMjAgWWFubmljayBEZXViZWw7IFByb2plY3QgVXJsOiBodHRwczovL2dpdGh1Yi5jb20vZW5hYmxlM2QvZW5hYmxlM2RcclxuICogQGxpY2Vuc2UgICAgICB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2VuYWJsZTNkL2VuYWJsZTNkL2Jsb2IvbWFzdGVyL0xJQ0VOU0V8R05VIEdQTHYzfVxyXG4gKi9cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5jb25zdCBldmVudGVtaXR0ZXIzXzEgPSByZXF1aXJlKFwiZXZlbnRlbWl0dGVyM1wiKTtcclxuY29uc3QgaW5kZXhfMSA9IHJlcXVpcmUoXCJAZW5hYmxlM2QvdGhyZWUtd3JhcHBlci9kaXN0L2luZGV4XCIpO1xyXG5jbGFzcyBQaHlzaWNzQm9keSB7XHJcbiAgICBjb25zdHJ1Y3RvcihwaHlzaWNzLCBhbW1vKSB7XHJcbiAgICAgICAgdGhpcy5waHlzaWNzID0gcGh5c2ljcztcclxuICAgICAgICB0aGlzLmFtbW8gPSBhbW1vO1xyXG4gICAgICAgIHRoaXMuaWdub3JlU2NhbGUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmlzU29mdEJvZHkgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLm9mZnNldCA9IHsgeDogMCwgeTogMCwgejogMCB9O1xyXG4gICAgICAgIHRoaXMuZXJyb3JzID0gW107XHJcbiAgICAgICAgdGhpcy5jaGVja0NvbGxpc2lvbnMgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmJyZWFrYWJsZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuZGlkVXBkYXRlID0gZmFsc2U7XHJcbiAgICAgICAgLyoqIFNraXAgc3luY2luZyB0aGUgbWVzaCB0byB0aGUgcGh5c2ljcyBib2R5LiAqL1xyXG4gICAgICAgIHRoaXMuc2tpcFVwZGF0ZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX2VtaXRVcGRhdGVFdmVudHMgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9uZWVkVXBkYXRlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy50bXBFdWxlciA9IG5ldyBpbmRleF8xLkV1bGVyKCk7XHJcbiAgICAgICAgdGhpcy50bXBRdWF0ZXJuaW9uID0gbmV3IGluZGV4XzEuUXVhdGVybmlvbigpO1xyXG4gICAgICAgIHRoaXMudG1wQnRWZWN0b3IzID0gbmV3IEFtbW8uYnRWZWN0b3IzKCk7XHJcbiAgICAgICAgdGhpcy50bXBCdFZlY3RvcjNfMSA9IG5ldyBBbW1vLmJ0VmVjdG9yMygpO1xyXG4gICAgICAgIHRoaXMudG1wQnRRdWF0ZXJuaW9uID0gbmV3IEFtbW8uYnRRdWF0ZXJuaW9uKDAsIDAsIDAsIDEpO1xyXG4gICAgICAgIHRoaXMuZXZlbnRFbWl0dGVyID0gbmV3IGV2ZW50ZW1pdHRlcjNfMS5FdmVudEVtaXR0ZXIoKTtcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgdGhpcy5uYW1lID0gYW1tby5uYW1lO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBEb24ndCBjYWxsIHRoaXMgbWFudWFsbHkhIERvIHBoeXNpY3MuZGVzdHJveSgpIGluc3RlYWQuXHJcbiAgICAgKi9cclxuICAgIGRlc3RydWN0b3IoKSB7XHJcbiAgICAgICAgLy8gcmVtb3ZlIGV2ZW50c1xyXG4gICAgICAgIGlmICh0aGlzLmV2ZW50RW1pdHRlcilcclxuICAgICAgICAgICAgdGhpcy5ldmVudEVtaXR0ZXIucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XHJcbiAgICAgICAgLy8gZGVzdHJveSB0bXAgYW1tbyB2YWx1ZXNcclxuICAgICAgICBBbW1vLmRlc3Ryb3kodGhpcy50bXBCdFZlY3RvcjMpO1xyXG4gICAgICAgIEFtbW8uZGVzdHJveSh0aGlzLnRtcEJ0VmVjdG9yM18xKTtcclxuICAgICAgICBBbW1vLmRlc3Ryb3kodGhpcy50bXBCdFF1YXRlcm5pb24pO1xyXG4gICAgICAgIC8vIGRlc3RvcnkgY29sbGlzaW9uIHNoYXBlXHJcbiAgICAgICAgQW1tby5kZXN0cm95KHRoaXMuYW1tby5nZXRDb2xsaXNpb25TaGFwZSgpKTtcclxuICAgICAgICAvLyBkZXN0cm95IGJvZHlcclxuICAgICAgICBBbW1vLmRlc3Ryb3kodGhpcy5hbW1vKTtcclxuICAgIH1cclxuICAgIHNldHVwRXZlbnRFbWl0dGVyKCkge1xyXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5ldmVudEVtaXR0ZXIgPT09ICd1bmRlZmluZWQnKVxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50RW1pdHRlciA9IG5ldyBldmVudGVtaXR0ZXIzXzEuRXZlbnRFbWl0dGVyKCk7XHJcbiAgICB9XHJcbiAgICBnZXQgbmVlZFVwZGF0ZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbmVlZFVwZGF0ZTtcclxuICAgIH1cclxuICAgIHNldCBuZWVkVXBkYXRlKG5lZWQpIHtcclxuICAgICAgICBpZiAoIW5lZWQgJiYgdGhpcy5fbmVlZFVwZGF0ZSlcclxuICAgICAgICAgICAgdGhpcy5kaWRVcGRhdGUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuX25lZWRVcGRhdGUgPSBuZWVkO1xyXG4gICAgfVxyXG4gICAgb25VcGRhdGVFdmVudCh1cGRhdGVDYWxsYmFjaywgb25jZSA9IGZhbHNlKSB7XHJcbiAgICAgICAgdGhpcy5zZXR1cEV2ZW50RW1pdHRlcigpO1xyXG4gICAgICAgIHRoaXMuX2VtaXRVcGRhdGVFdmVudHMgPSB0cnVlO1xyXG4gICAgICAgIGlmIChvbmNlKVxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50RW1pdHRlci5vbmNlKCd1cGRhdGUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVDYWxsYmFjaygpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRFbWl0dGVyLm9uKCd1cGRhdGUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVDYWxsYmFjaygpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGdldCBvbigpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB1cGRhdGU6ICh1cGRhdGVDYWxsYmFjaykgPT4gdGhpcy5vblVwZGF0ZUV2ZW50KHVwZGF0ZUNhbGxiYWNrKSxcclxuICAgICAgICAgICAgY29sbGlzaW9uOiAoY29sbGlzaW9uQ2FsbGJhY2spID0+IHRoaXMub25Db2xsaXNpb24oY29sbGlzaW9uQ2FsbGJhY2spXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIGdldCBvbmNlKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHVwZGF0ZTogKHVwZGF0ZUNhbGxiYWNrKSA9PiB0aGlzLm9uVXBkYXRlRXZlbnQodXBkYXRlQ2FsbGJhY2ssIHRydWUpXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIG9uQ29sbGlzaW9uKGNvbGxpc2lvbkNhbGxiYWNrKSB7XHJcbiAgICAgICAgdGhpcy5jaGVja0NvbGxpc2lvbnMgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMucGh5c2ljcy5jb2xsaXNpb25FdmVudHMub24oJ2NvbGxpc2lvbicsIChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgYm9kaWVzLCBldmVudCB9ID0gZGF0YTtcclxuICAgICAgICAgICAgaWYgKGJvZGllc1swXS5uYW1lID09PSB0aGlzLm5hbWUpXHJcbiAgICAgICAgICAgICAgICBjb2xsaXNpb25DYWxsYmFjayhib2RpZXNbMV0sIGV2ZW50KTtcclxuICAgICAgICAgICAgZWxzZSBpZiAoYm9kaWVzWzFdLm5hbWUgPT09IHRoaXMubmFtZSlcclxuICAgICAgICAgICAgICAgIGNvbGxpc2lvbkNhbGxiYWNrKGJvZGllc1swXSwgZXZlbnQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqIFlvdSBoYXZlIHRvIGNhbGwgdHJhbnNmb3JtKCkgYmVmb3JlIHlvdSBjYW4gZ2V0IG9yIHNldCB0aGUgYm9keSdzIHBvc2l0aW9uIG9yIHJvdGF0aW9uLiAoZm9yIGhlYWRsZXNzIG1vZGUgb25seSkgKi9cclxuICAgIHRyYW5zZm9ybSgpIHtcclxuICAgICAgICBjb25zdCB0ID0gdGhpcy5waHlzaWNzLndvcmxkVHJhbnNmb3JtO1xyXG4gICAgICAgIHRoaXMuYW1tby5nZXRNb3Rpb25TdGF0ZSgpLmdldFdvcmxkVHJhbnNmb3JtKHQpO1xyXG4gICAgfVxyXG4gICAgLyoqIFlvdSBoYXZlIHRvIGNhbGwgcmVmcmVzaCgpIGFmdGVyIHlvdSBzZXQgdGhlIHBvc2l0aW9uIG9yIHJvdGF0aW9uIG9mIHRoZSBib2R5LiAoZm9yIGhlYWRsZXNzIG1vZGUgb25seSkgKi9cclxuICAgIHJlZnJlc2goKSB7XHJcbiAgICAgICAgY29uc3QgdCA9IHRoaXMucGh5c2ljcy53b3JsZFRyYW5zZm9ybTtcclxuICAgICAgICB0aGlzLmFtbW8uZ2V0TW90aW9uU3RhdGUoKS5zZXRXb3JsZFRyYW5zZm9ybSh0KTtcclxuICAgIH1cclxuICAgIC8qKiBTZXQgdGhlIHJvdGF0aW9uIGluIHJhZGlhbnMuIChmb3IgaGVhZGxlc3MgbW9kZSBvbmx5KSAqL1xyXG4gICAgc2V0Um90YXRpb24oeCwgeSwgeikge1xyXG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnRtcEV1bGVyLnNldCh4LCB5LCB6KTtcclxuICAgICAgICBjb25zdCBxID0gdGhpcy50bXBRdWF0ZXJuaW9uLnNldCgwLCAwLCAwLCAxKTtcclxuICAgICAgICBxLnNldEZyb21FdWxlcihlKTtcclxuICAgICAgICB0aGlzLnRtcEJ0UXVhdGVybmlvbi5zZXRWYWx1ZSgwLCAwLCAwLCAxKTtcclxuICAgICAgICBjb25zdCBhbW1vUXVhdCA9IHRoaXMudG1wQnRRdWF0ZXJuaW9uO1xyXG4gICAgICAgIGFtbW9RdWF0LnNldFZhbHVlKHEueCwgcS55LCBxLnosIHEudyk7XHJcbiAgICAgICAgY29uc3QgdCA9IHRoaXMucGh5c2ljcy53b3JsZFRyYW5zZm9ybTtcclxuICAgICAgICB0LnNldFJvdGF0aW9uKGFtbW9RdWF0KTtcclxuICAgIH1cclxuICAgIC8qKiBHZXQgdGhlIHJvdGF0aW9uIGluIHJhZGlhbnMuIChmb3IgaGVhZGxlc3MgbW9kZSBvbmx5KSAqL1xyXG4gICAgZ2V0IHJvdGF0aW9uKCkge1xyXG4gICAgICAgIC8vIGh0dHBzOi8vd3d3LmV1Y2xpZGVhbnNwYWNlLmNvbS9tYXRocy9nZW9tZXRyeS9yb3RhdGlvbnMvY29udmVyc2lvbnMvcXVhdGVybmlvblRvQW5nbGUvaW5kZXguaHRtXHJcbiAgICAgICAgbGV0IHgsIHksIHo7XHJcbiAgICAgICAgY29uc3QgdCA9IHRoaXMucGh5c2ljcy53b3JsZFRyYW5zZm9ybTtcclxuICAgICAgICBjb25zdCBhbW1vUXVhdCA9IHQuZ2V0Um90YXRpb24oKTtcclxuICAgICAgICBsZXQgcTEgPSB0aGlzLnRtcFF1YXRlcm5pb24uc2V0KGFtbW9RdWF0LngoKSwgYW1tb1F1YXQueSgpLCBhbW1vUXVhdC56KCksIGFtbW9RdWF0LncoKSk7XHJcbiAgICAgICAgaWYgKHExLncgPiAxKVxyXG4gICAgICAgICAgICBxMSA9IHExLm5vcm1hbGl6ZSgpOyAvLyBpZiB3PjEgYWNvcyBhbmQgc3FydCB3aWxsIHByb2R1Y2UgZXJyb3JzLCB0aGlzIGNhbnQgaGFwcGVuIGlmIHF1YXRlcm5pb24gaXMgbm9ybWFsaXplZFxyXG4gICAgICAgIGNvbnN0IGFuZ2xlID0gMiAqIE1hdGguYWNvcyhxMS53KTtcclxuICAgICAgICBjb25zdCBzID0gTWF0aC5zcXJ0KDEgLSBxMS53ICogcTEudyk7IC8vIGFzc3VtaW5nIHF1YXRlcm5pb24gbm9ybWFsaXplZCB0aGVuIHcgaXMgbGVzcyB0aGFuIDEsIHNvIHRlcm0gYWx3YXlzIHBvc2l0aXZlLlxyXG4gICAgICAgIGlmIChzIDwgMC4wMDEpIHtcclxuICAgICAgICAgICAgLy8gdGVzdCB0byBhdm9pZCBkaXZpZGUgYnkgemVybywgcyBpcyBhbHdheXMgcG9zaXRpdmUgZHVlIHRvIHNxcnRcclxuICAgICAgICAgICAgLy8gaWYgcyBjbG9zZSB0byB6ZXJvIHRoZW4gZGlyZWN0aW9uIG9mIGF4aXMgbm90IGltcG9ydGFudFxyXG4gICAgICAgICAgICB4ID0gcTEueDsgLy8gaWYgaXQgaXMgaW1wb3J0YW50IHRoYXQgYXhpcyBpcyBub3JtYWxpemVkIHRoZW4gcmVwbGFjZSB3aXRoIHg9MTsgeT16PTA7XHJcbiAgICAgICAgICAgIHkgPSBxMS55O1xyXG4gICAgICAgICAgICB6ID0gcTEuejtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHggPSBxMS54IC8gczsgLy8gbm9ybWFsaXplZCBheGlzXHJcbiAgICAgICAgICAgIHkgPSBxMS55IC8gcztcclxuICAgICAgICAgICAgeiA9IHExLnogLyBzO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4geyB4OiB4ICogYW5nbGUsIHk6IHkgKiBhbmdsZSwgejogeiAqIGFuZ2xlIH07XHJcbiAgICB9XHJcbiAgICAvKiogU2V0IHBvc2l0aW9uLiAoZm9yIGhlYWRsZXNzIG1vZGUgb25seSkgKi9cclxuICAgIHNldFBvc2l0aW9uKHgsIHksIHopIHtcclxuICAgICAgICBjb25zdCB0ID0gdGhpcy5waHlzaWNzLndvcmxkVHJhbnNmb3JtO1xyXG4gICAgICAgIHQuZ2V0T3JpZ2luKCkuc2V0VmFsdWUoeCwgeSwgeik7XHJcbiAgICB9XHJcbiAgICAvKiogR2V0IHBvc2l0aW9uLiAoZm9yIGhlYWRsZXNzIG1vZGUgb25seSkgKi9cclxuICAgIGdldCBwb3NpdGlvbigpIHtcclxuICAgICAgICBjb25zdCB0ID0gdGhpcy5waHlzaWNzLndvcmxkVHJhbnNmb3JtO1xyXG4gICAgICAgIHJldHVybiB7IHg6IHQuZ2V0T3JpZ2luKCkueCgpLCB5OiB0LmdldE9yaWdpbigpLnkoKSwgejogdC5nZXRPcmlnaW4oKS56KCkgfTtcclxuICAgIH1cclxuICAgIGdldCB2ZWxvY2l0eSgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB4OiB0aGlzLmFtbW8uZ2V0TGluZWFyVmVsb2NpdHkoKS54KCksXHJcbiAgICAgICAgICAgIHk6IHRoaXMuYW1tby5nZXRMaW5lYXJWZWxvY2l0eSgpLnkoKSxcclxuICAgICAgICAgICAgejogdGhpcy5hbW1vLmdldExpbmVhclZlbG9jaXR5KCkueigpXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIGdldCBhbmd1bGFyVmVsb2NpdHkoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgeDogdGhpcy5hbW1vLmdldEFuZ3VsYXJWZWxvY2l0eSgpLngoKSxcclxuICAgICAgICAgICAgeTogdGhpcy5hbW1vLmdldEFuZ3VsYXJWZWxvY2l0eSgpLnkoKSxcclxuICAgICAgICAgICAgejogdGhpcy5hbW1vLmdldEFuZ3VsYXJWZWxvY2l0eSgpLnooKVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBzZXRWZWxvY2l0eSh4LCB5LCB6KSB7XHJcbiAgICAgICAgdGhpcy50bXBCdFZlY3RvcjMuc2V0VmFsdWUoeCwgeSwgeik7XHJcbiAgICAgICAgdGhpcy5hbW1vLnNldExpbmVhclZlbG9jaXR5KHRoaXMudG1wQnRWZWN0b3IzKTtcclxuICAgIH1cclxuICAgIHNldFZlbG9jaXR5WCh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMudG1wQnRWZWN0b3IzLnNldFZhbHVlKHZhbHVlLCB0aGlzLnZlbG9jaXR5LnksIHRoaXMudmVsb2NpdHkueik7XHJcbiAgICAgICAgdGhpcy5hbW1vLnNldExpbmVhclZlbG9jaXR5KHRoaXMudG1wQnRWZWN0b3IzKTtcclxuICAgIH1cclxuICAgIHNldFZlbG9jaXR5WSh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMudG1wQnRWZWN0b3IzLnNldFZhbHVlKHRoaXMudmVsb2NpdHkueCwgdmFsdWUsIHRoaXMudmVsb2NpdHkueik7XHJcbiAgICAgICAgdGhpcy5hbW1vLnNldExpbmVhclZlbG9jaXR5KHRoaXMudG1wQnRWZWN0b3IzKTtcclxuICAgIH1cclxuICAgIHNldFZlbG9jaXR5Wih2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMudG1wQnRWZWN0b3IzLnNldFZhbHVlKHRoaXMudmVsb2NpdHkueCwgdGhpcy52ZWxvY2l0eS55LCB2YWx1ZSk7XHJcbiAgICAgICAgdGhpcy5hbW1vLnNldExpbmVhclZlbG9jaXR5KHRoaXMudG1wQnRWZWN0b3IzKTtcclxuICAgIH1cclxuICAgIHNldEFuZ3VsYXJWZWxvY2l0eSh4LCB5LCB6KSB7XHJcbiAgICAgICAgdGhpcy50bXBCdFZlY3RvcjMuc2V0VmFsdWUoeCwgeSwgeik7XHJcbiAgICAgICAgdGhpcy5hbW1vLnNldEFuZ3VsYXJWZWxvY2l0eSh0aGlzLnRtcEJ0VmVjdG9yMyk7XHJcbiAgICB9XHJcbiAgICBzZXRBbmd1bGFyVmVsb2NpdHlYKHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy50bXBCdFZlY3RvcjMuc2V0VmFsdWUodmFsdWUsIHRoaXMuYW5ndWxhclZlbG9jaXR5LnksIHRoaXMuYW5ndWxhclZlbG9jaXR5LnopO1xyXG4gICAgICAgIHRoaXMuYW1tby5zZXRBbmd1bGFyVmVsb2NpdHkodGhpcy50bXBCdFZlY3RvcjMpO1xyXG4gICAgfVxyXG4gICAgc2V0QW5ndWxhclZlbG9jaXR5WSh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMudG1wQnRWZWN0b3IzLnNldFZhbHVlKHRoaXMuYW5ndWxhclZlbG9jaXR5LngsIHZhbHVlLCB0aGlzLmFuZ3VsYXJWZWxvY2l0eS56KTtcclxuICAgICAgICB0aGlzLmFtbW8uc2V0QW5ndWxhclZlbG9jaXR5KHRoaXMudG1wQnRWZWN0b3IzKTtcclxuICAgIH1cclxuICAgIHNldEFuZ3VsYXJWZWxvY2l0eVoodmFsdWUpIHtcclxuICAgICAgICB0aGlzLnRtcEJ0VmVjdG9yMy5zZXRWYWx1ZSh0aGlzLmFuZ3VsYXJWZWxvY2l0eS54LCB0aGlzLmFuZ3VsYXJWZWxvY2l0eS55LCB2YWx1ZSk7XHJcbiAgICAgICAgdGhpcy5hbW1vLnNldEFuZ3VsYXJWZWxvY2l0eSh0aGlzLnRtcEJ0VmVjdG9yMyk7XHJcbiAgICB9XHJcbiAgICAvLyBBcHBseSBGb3JjZSBtZXRob2RzXHJcbiAgICBhcHBseUZvcmNlKHgsIHksIHopIHtcclxuICAgICAgICB0aGlzLnRtcEJ0VmVjdG9yMy5zZXRWYWx1ZSh4LCB5LCB6KTtcclxuICAgICAgICB0aGlzLmFtbW8uYXBwbHlDZW50cmFsSW1wdWxzZSh0aGlzLnRtcEJ0VmVjdG9yMyk7XHJcbiAgICB9XHJcbiAgICBhcHBseUZvcmNlWCh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMudG1wQnRWZWN0b3IzLnNldFZhbHVlKHZhbHVlLCAwLCAwKTtcclxuICAgICAgICB0aGlzLmFtbW8uYXBwbHlDZW50cmFsSW1wdWxzZSh0aGlzLnRtcEJ0VmVjdG9yMyk7XHJcbiAgICB9XHJcbiAgICBhcHBseUZvcmNlWSh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMudG1wQnRWZWN0b3IzLnNldFZhbHVlKDAsIHZhbHVlLCAwKTtcclxuICAgICAgICB0aGlzLmFtbW8uYXBwbHlDZW50cmFsSW1wdWxzZSh0aGlzLnRtcEJ0VmVjdG9yMyk7XHJcbiAgICB9XHJcbiAgICBhcHBseUZvcmNlWih2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMudG1wQnRWZWN0b3IzLnNldFZhbHVlKDAsIDAsIHZhbHVlKTtcclxuICAgICAgICB0aGlzLmFtbW8uYXBwbHlDZW50cmFsSW1wdWxzZSh0aGlzLnRtcEJ0VmVjdG9yMyk7XHJcbiAgICB9XHJcbiAgICAvLyBBcHBseSBcIlNvbWV0aGluZ1wiIE1ldGhvZHNcclxuICAgIGFwcGx5Q2VudHJhbEZvcmNlKHgsIHksIHopIHtcclxuICAgICAgICB0aGlzLnRtcEJ0VmVjdG9yMy5zZXRWYWx1ZSh4LCB5LCB6KTtcclxuICAgICAgICB0aGlzLmFtbW8uYXBwbHlDZW50cmFsRm9yY2UodGhpcy50bXBCdFZlY3RvcjMpO1xyXG4gICAgfVxyXG4gICAgYXBwbHlDZW50cmFsSW1wdWxzZSh4LCB5LCB6KSB7XHJcbiAgICAgICAgdGhpcy50bXBCdFZlY3RvcjMuc2V0VmFsdWUoeCwgeSwgeik7XHJcbiAgICAgICAgdGhpcy5hbW1vLmFwcGx5Q2VudHJhbEltcHVsc2UodGhpcy50bXBCdFZlY3RvcjMpO1xyXG4gICAgfVxyXG4gICAgYXBwbHlDZW50cmFsTG9jYWxGb3JjZSh4LCB5LCB6KSB7XHJcbiAgICAgICAgdGhpcy50bXBCdFZlY3RvcjMuc2V0VmFsdWUoeCwgeSwgeik7XHJcbiAgICAgICAgdGhpcy5hbW1vLmFwcGx5Q2VudHJhbExvY2FsRm9yY2UodGhpcy50bXBCdFZlY3RvcjMpO1xyXG4gICAgfVxyXG4gICAgYXBwbHlJbXB1bHNlKGltcHVsc2UsIHJlbGF0aXZlUG9zaXRpb24pIHtcclxuICAgICAgICB0aGlzLnRtcEJ0VmVjdG9yMy5zZXRWYWx1ZShpbXB1bHNlLnggfHwgMCwgaW1wdWxzZS55IHx8IDAsIGltcHVsc2UueiB8fCAwKTtcclxuICAgICAgICB0aGlzLnRtcEJ0VmVjdG9yM18xLnNldFZhbHVlKHJlbGF0aXZlUG9zaXRpb24ueCB8fCAwLCByZWxhdGl2ZVBvc2l0aW9uLnkgfHwgMCwgcmVsYXRpdmVQb3NpdGlvbi56IHx8IDApO1xyXG4gICAgICAgIHRoaXMuYW1tby5hcHBseUltcHVsc2UodGhpcy50bXBCdFZlY3RvcjMsIHRoaXMudG1wQnRWZWN0b3IzXzEpO1xyXG4gICAgfVxyXG4gICAgYXBwbHlMb2NhbFRvcnF1ZSh4LCB5LCB6KSB7XHJcbiAgICAgICAgdGhpcy50bXBCdFZlY3RvcjMuc2V0VmFsdWUoeCwgeSwgeik7XHJcbiAgICAgICAgdGhpcy5hbW1vLmFwcGx5TG9jYWxUb3JxdWUodGhpcy50bXBCdFZlY3RvcjMpO1xyXG4gICAgfVxyXG4gICAgYXBwbHlUb3JxdWUoeCwgeSwgeikge1xyXG4gICAgICAgIHRoaXMudG1wQnRWZWN0b3IzLnNldFZhbHVlKHgsIHksIHopO1xyXG4gICAgICAgIHRoaXMuYW1tby5hcHBseVRvcnF1ZSh0aGlzLnRtcEJ0VmVjdG9yMyk7XHJcbiAgICB9XHJcbiAgICBhcHBseVRvcnF1ZUltcHVsc2UoeCwgeSwgeikge1xyXG4gICAgICAgIHRoaXMudG1wQnRWZWN0b3IzLnNldFZhbHVlKHgsIHksIHopO1xyXG4gICAgICAgIHRoaXMuYW1tby5hcHBseVRvcnF1ZUltcHVsc2UodGhpcy50bXBCdFZlY3RvcjMpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGQgdGhlIGNvbGxpc2lvbiBmbGFnc1xyXG4gICAgICogQHBhcmFtIHZhbHVlIDAgaXMgRFlOQU1JQywgMSBpcyBTVEFUSUMsIDIgaXMgS0lORU1BVElDLCA0IEdIT1NUXHJcbiAgICAgKi9cclxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9idWxsZXRwaHlzaWNzL2J1bGxldDMvYmxvYi9hYWU4MDQ4NzIyZjI1OTZmN2UyYmRkNTJkMmExZGNiNTJhMjE4ZjJiL3NyYy9CdWxsZXRDb2xsaXNpb24vQ29sbGlzaW9uRGlzcGF0Y2gvYnRDb2xsaXNpb25PYmplY3QuaCNMMTI4XHJcbiAgICBzZXRDb2xsaXNpb25GbGFncyh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuYW1tby5zZXRDb2xsaXNpb25GbGFncyh2YWx1ZSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEdldCB0aGUgY29sbGlzaW9uIGZsYWdzXHJcbiAgICAgKiBAcGFyYW0gdmFsdWUgMCBpcyBEWU5BTUlDLCAxIGlzIFNUQVRJQywgMiBpcyBLSU5FTUFUSUMsIDQgR0hPU1RcclxuICAgICAqL1xyXG4gICAgZ2V0Q29sbGlzaW9uRmxhZ3MoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYW1tby5nZXRDb2xsaXNpb25GbGFncygpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgdGhlIHJlc3RpdHV0aW9uIChzYW1lIGFzIGJvdW5jaW5lc3MpXHJcbiAgICAgKiBAcGFyYW0gdmFsdWUgQSBudW1iZXIgZnJvbSAwIHRvIDEuXHJcbiAgICAgKi9cclxuICAgIHNldFJlc3RpdHV0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5hbW1vLnNldFJlc3RpdHV0aW9uKHZhbHVlKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogU2V0IHRoZSBib3VuY2luZXNzIChzYW1lIGFzIHJlc3RpdHV0aW9uKVxyXG4gICAgICogQHBhcmFtIHZhbHVlIEEgbnVtYmVyIGZyb20gMCB0byAxLlxyXG4gICAgICovXHJcbiAgICBzZXRCb3VuY2luZXNzKHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5zZXRSZXN0aXR1dGlvbih2YWx1ZSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFNldCB0aGUgZnJpY3Rpb25cclxuICAgICAqIEBwYXJhbSB2YWx1ZSBBIG51bWJlciBmcm9tIDAgdG8gMS5cclxuICAgICAqL1xyXG4gICAgc2V0RnJpY3Rpb24odmFsdWUpIHtcclxuICAgICAgICB0aGlzLmFtbW8uc2V0RnJpY3Rpb24odmFsdWUpO1xyXG4gICAgfVxyXG4gICAgLyoqIFNldCBwZXIgYm9keSBncmF2aXR5ICovXHJcbiAgICBzZXRHcmF2aXR5KHgsIHksIHopIHtcclxuICAgICAgICB0aGlzLnRtcEJ0VmVjdG9yMy5zZXRWYWx1ZSh4LCB5LCB6KTtcclxuICAgICAgICB0aGlzLmFtbW8uc2V0R3Jhdml0eSh0aGlzLnRtcEJ0VmVjdG9yMyk7XHJcbiAgICB9XHJcbiAgICBzZXRMaW5lYXJGYWN0b3IoeCwgeSwgeikge1xyXG4gICAgICAgIHRoaXMudG1wQnRWZWN0b3IzLnNldFZhbHVlKHgsIHksIHopO1xyXG4gICAgICAgIHRoaXMuYW1tby5zZXRMaW5lYXJGYWN0b3IodGhpcy50bXBCdFZlY3RvcjMpO1xyXG4gICAgfVxyXG4gICAgc2V0QW5ndWxhckZhY3Rvcih4LCB5LCB6KSB7XHJcbiAgICAgICAgdGhpcy50bXBCdFZlY3RvcjMuc2V0VmFsdWUoeCwgeSwgeik7XHJcbiAgICAgICAgdGhpcy5hbW1vLnNldEFuZ3VsYXJGYWN0b3IodGhpcy50bXBCdFZlY3RvcjMpO1xyXG4gICAgfVxyXG4gICAgc2V0Q2NkTW90aW9uVGhyZXNob2xkKHRocmVzaG9sZCkge1xyXG4gICAgICAgIHRoaXMuYW1tby5zZXRDY2RNb3Rpb25UaHJlc2hvbGQodGhyZXNob2xkKTtcclxuICAgIH1cclxuICAgIHNldENjZFN3ZXB0U3BoZXJlUmFkaXVzKHJhZGl1cykge1xyXG4gICAgICAgIHRoaXMuYW1tby5zZXRDY2RTd2VwdFNwaGVyZVJhZGl1cyhyYWRpdXMpO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydHMuZGVmYXVsdCA9IFBoeXNpY3NCb2R5O1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1waHlzaWNzQm9keS5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLlBoeXNpY3NMb2FkZXIgPSB2b2lkIDA7XHJcbmNvbnN0IHdhc21Mb2FkZXJfMSA9IHJlcXVpcmUoXCIuL3dhc21Mb2FkZXJcIik7XHJcbmNvbnN0IFBoeXNpY3NMb2FkZXIgPSAocGF0aCwgY2FsbGJhY2spID0+IHtcclxuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJylcclxuICAgICAgICB3aW5kb3cuX19sb2FkUGh5c2ljcyA9IHRydWU7XHJcbiAgICB3YXNtTG9hZGVyXzEuZGVmYXVsdChwYXRoLCAoKSA9PiB7XHJcbiAgICAgICAgQW1tbygpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICBjYWxsYmFjaygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn07XHJcbmV4cG9ydHMuUGh5c2ljc0xvYWRlciA9IFBoeXNpY3NMb2FkZXI7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBoeXNpY3NMb2FkZXIuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbi8qKlxyXG4gKiBAYXV0aG9yICAgICAgIFlhbm5pY2sgRGV1YmVsIChodHRwczovL2dpdGh1Yi5jb20veWFuZGV1KVxyXG4gKiBAY29weXJpZ2h0ICAgIENvcHlyaWdodCAoYykgMjAyMCBZYW5uaWNrIERldWJlbDsgUHJvamVjdCBVcmw6IGh0dHBzOi8vZ2l0aHViLmNvbS9lbmFibGUzZC9lbmFibGUzZFxyXG4gKiBAbGljZW5zZSAgICAgIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZW5hYmxlM2QvZW5hYmxlM2QvYmxvYi9tYXN0ZXIvTElDRU5TRXxHTlUgR1BMdjN9XHJcbiAqL1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuR3JvdXAgPSBleHBvcnRzLlBvaW50cyA9IGV4cG9ydHMuTGluZSA9IGV4cG9ydHMuTWF0ZXJpYWwgPSBleHBvcnRzLk1lc2ggPSBleHBvcnRzLk9iamVjdDNEID0gZXhwb3J0cy5BbmltYXRpb25BY3Rpb24gPSBleHBvcnRzLkFuaW1hdGlvbkNsaXAgPSBleHBvcnRzLkFuaW1hdGlvbk1peGVyID0gZXhwb3J0cy5FeHRlbmRlZE1lc2ggPSBleHBvcnRzLkV4dGVuZGVkT2JqZWN0M0QgPSB2b2lkIDA7XHJcbmNvbnN0IGV4dGVuZGVkT2JqZWN0M0RfMSA9IHJlcXVpcmUoXCIuL2V4dGVuZGVkT2JqZWN0M0RcIik7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkV4dGVuZGVkT2JqZWN0M0RcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGV4dGVuZGVkT2JqZWN0M0RfMS5FeHRlbmRlZE9iamVjdDNEOyB9IH0pO1xyXG5jb25zdCBleHRlbmRlZE1lc2hfMSA9IHJlcXVpcmUoXCIuL2V4dGVuZGVkTWVzaFwiKTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiRXh0ZW5kZWRNZXNoXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBleHRlbmRlZE1lc2hfMS5FeHRlbmRlZE1lc2g7IH0gfSk7XHJcbi8vIFRPRE8gZml4IHRoaXMgZXhwb3J0XHJcbi8vIGV4cG9ydCB7IFRoaXJkUGVyc29uQ29udHJvbHMgfSBmcm9tICcuLi9taXNjL3RoaXJkUGVyc29uQ29udHJvbHMnXHJcbnZhciBpbmRleF8xID0gcmVxdWlyZShcIkBlbmFibGUzZC90aHJlZS13cmFwcGVyL2Rpc3QvaW5kZXhcIik7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkFuaW1hdGlvbk1peGVyXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBpbmRleF8xLkFuaW1hdGlvbk1peGVyOyB9IH0pO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJBbmltYXRpb25DbGlwXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBpbmRleF8xLkFuaW1hdGlvbkNsaXA7IH0gfSk7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkFuaW1hdGlvbkFjdGlvblwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gaW5kZXhfMS5BbmltYXRpb25BY3Rpb247IH0gfSk7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIk9iamVjdDNEXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBpbmRleF8xLk9iamVjdDNEOyB9IH0pO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJNZXNoXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBpbmRleF8xLk1lc2g7IH0gfSk7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIk1hdGVyaWFsXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBpbmRleF8xLk1hdGVyaWFsOyB9IH0pO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJMaW5lXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBpbmRleF8xLkxpbmU7IH0gfSk7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIlBvaW50c1wiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gaW5kZXhfMS5Qb2ludHM7IH0gfSk7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkdyb3VwXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBpbmRleF8xLkdyb3VwOyB9IH0pO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD10eXBlcy5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dHlwZXNBbW1vLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD10eXBlc0N1c3RvbS5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG4vLyBJbnNwaXJlZCBieSBodHRwczovL2dpdGh1Yi5jb20vcGxheWNhbnZhcy9lbmdpbmUvYmxvYi9tYXN0ZXIvZXhhbXBsZXMvd2FzbS1sb2FkZXIuanNcclxuY29uc3Qgd2FzbVN1cHBvcnRlZCA9ICgoKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGlmICh0eXBlb2YgV2ViQXNzZW1ibHkgPT09ICdvYmplY3QnICYmIHR5cGVvZiBXZWJBc3NlbWJseS5pbnN0YW50aWF0ZSA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICBjb25zdCBtb2R1bGUgPSBuZXcgV2ViQXNzZW1ibHkuTW9kdWxlKFVpbnQ4QXJyYXkub2YoMHgwLCAweDYxLCAweDczLCAweDZkLCAweDAxLCAweDAwLCAweDAwLCAweDAwKSk7XHJcbiAgICAgICAgICAgIGlmIChtb2R1bGUgaW5zdGFuY2VvZiBXZWJBc3NlbWJseS5Nb2R1bGUpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFdlYkFzc2VtYmx5Lkluc3RhbmNlKG1vZHVsZSkgaW5zdGFuY2VvZiBXZWJBc3NlbWJseS5JbnN0YW5jZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkgeyB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbn0pKCk7XHJcbmNvbnN0IGxvYWRTY3JpcHRBc3luYyA9ICh1cmwsIGRvbmVDYWxsYmFjaykgPT4ge1xyXG4gICAgdmFyIHRhZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xyXG4gICAgdGFnLm9ubG9hZCA9ICgpID0+IHtcclxuICAgICAgICBkb25lQ2FsbGJhY2soKTtcclxuICAgIH07XHJcbiAgICB0YWcub25lcnJvciA9ICgpID0+IHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ZhaWxlZCB0byBsb2FkICcgKyB1cmwpO1xyXG4gICAgfTtcclxuICAgIHRhZy5hc3luYyA9IHRydWU7XHJcbiAgICB0YWcuc3JjID0gdXJsO1xyXG4gICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZCh0YWcpO1xyXG59O1xyXG5jb25zdCBsb2FkQW1tb01vZHVsZSA9IChwYXRoLCBkb25lQ2FsbGJhY2spID0+IHtcclxuICAgIC8vIGNvbnNvbGUubG9nKHdhc21TdXBwb3J0ZWQgPyAnV2ViQXNzZW1ibHkgaXMgc3VwcG9ydGVkJyA6ICdXZWJBc3NlbWJseSBpcyBub3Qgc3VwcG9ydGVkJylcclxuICAgIGlmICh3YXNtU3VwcG9ydGVkKVxyXG4gICAgICAgIGxvYWRTY3JpcHRBc3luYyhgJHtwYXRofS9hbW1vLndhc20uanNgLCAoKSA9PiBkb25lQ2FsbGJhY2soKSk7XHJcbiAgICBlbHNlXHJcbiAgICAgICAgbG9hZFNjcmlwdEFzeW5jKGAke3BhdGh9L2FtbW8uanNgLCAoKSA9PiBkb25lQ2FsbGJhY2soKSk7XHJcbn07XHJcbmV4cG9ydHMuZGVmYXVsdCA9IGxvYWRBbW1vTW9kdWxlO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD13YXNtTG9hZGVyLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xyXG4vKipcclxuICogQGF1dGhvciAgICAgICBZYW5uaWNrIERldWJlbCAoaHR0cHM6Ly9naXRodWIuY29tL3lhbmRldSlcclxuICogQGNvcHlyaWdodCAgICBDb3B5cmlnaHQgKGMpIDIwMjAgWWFubmljayBEZXViZWw7IFByb2plY3QgVXJsOiBodHRwczovL2dpdGh1Yi5jb20vZW5hYmxlM2QvZW5hYmxlM2RcclxuICogQGxpY2Vuc2UgICAgICB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2VuYWJsZTNkL2VuYWJsZTNkL2Jsb2IvbWFzdGVyL0xJQ0VOU0V8R05VIEdQTHYzfVxyXG4gKi9cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLlRocmVlR3JhcGhpY3MgPSB2b2lkIDA7XHJcbmNvbnN0IFRIUkVFID0gcmVxdWlyZShcIkBlbmFibGUzZC90aHJlZS13cmFwcGVyL2Rpc3QvaW5kZXhcIik7XHJcbmNvbnN0IGNhbWVyYXNfMSA9IHJlcXVpcmUoXCIuL3BsdWdpbnMvY2FtZXJhc1wiKTtcclxuY29uc3QgaW5kZXhfMSA9IHJlcXVpcmUoXCJAZW5hYmxlM2QvYW1tby1waHlzaWNzL2Rpc3QvaW5kZXhcIik7XHJcbmNsYXNzIFRocmVlR3JhcGhpY3Mge1xyXG4gICAgY29uc3RydWN0b3IodGhyZWVHcmFwaGljc0NvbmZpZyA9IHt9KSB7XHJcbiAgICAgICAgdGhpcy50aHJlZUdyYXBoaWNzQ29uZmlnID0gdGhyZWVHcmFwaGljc0NvbmZpZztcclxuICAgICAgICBjb25zdCB7IGFuaXNvdHJvcHkgPSAxLCBjYW1lcmEgPSBjYW1lcmFzXzEuZGVmYXVsdC5QZXJzcGVjdGl2ZSh7IHo6IDI1LCB5OiA1IH0pLCBhbnRpYWxpYXMgPSBmYWxzZSwgdXNlUGh5c2ljcyA9IHRydWUsIHJlbmRlcmVyIH0gPSB0aHJlZUdyYXBoaWNzQ29uZmlnO1xyXG4gICAgICAgIHRoaXMudGV4dHVyZUFuaXNvdHJvcHkgPSBhbmlzb3Ryb3B5O1xyXG4gICAgICAgIHRoaXMuY2FtZXJhID0gY2FtZXJhO1xyXG4gICAgICAgIHRoaXMuc2NlbmUgPSBuZXcgVEhSRUUuU2NlbmUoKTtcclxuICAgICAgICAvLyB0aGlzLnJlbmRlcmVyLnBoeXNpY2FsbHlDb3JyZWN0TGlnaHRzID0gdHJ1ZVxyXG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlciB8fCBuZXcgVEhSRUUuV2ViR0xSZW5kZXJlcih7IGFudGlhbGlhcyB9KTtcclxuICAgICAgICAvLyBzZWUgaHR0cHM6Ly90aHJlZWpzLm9yZy9kb2NzLyNleGFtcGxlcy9lbi9sb2FkZXJzL0dMVEZMb2FkZXJcclxuICAgICAgICAvLyB0aGlzLnJlbmRlcmVyLm91dHB1dEVuY29kaW5nID0gc1JHQkVuY29kaW5nXHJcbiAgICAgICAgLy8gc2hhZG93XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci5zaGFkb3dNYXAuZW5hYmxlZCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci5zaGFkb3dNYXAudHlwZSA9IFRIUkVFLlBDRlNvZnRTaGFkb3dNYXA7XHJcbiAgICAgICAgLy8gZW5hYmxlIGNhY2hlXHJcbiAgICAgICAgdGhpcy5jYWNoZSA9IFRIUkVFLkNhY2hlO1xyXG4gICAgICAgIHRoaXMuY2FjaGUuZW5hYmxlZCA9IHRydWU7XHJcbiAgICAgICAgaWYgKHVzZVBoeXNpY3MpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBBbW1vICE9PSAndW5kZWZpbmVkJylcclxuICAgICAgICAgICAgICAgIHRoaXMucGh5c2ljcyA9IG5ldyBpbmRleF8xLkFtbW9QaHlzaWNzKHRoaXMuc2NlbmUsIHRocmVlR3JhcGhpY3NDb25maWcpO1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW2VuYWJsZTNkXTogQXJlIHlvdSBzdXJlIHlvdSBpbmNsdWRlZCBhbW1vLmpzPycpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5leHBvcnRzLlRocmVlR3JhcGhpY3MgPSBUaHJlZUdyYXBoaWNzO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb3JlLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuTWF0aFV0aWxzID0gZXhwb3J0cy5WZWN0b3IzID0gZXhwb3J0cy5WZWN0b3IyID0gZXhwb3J0cy5PYmplY3QzRCA9IGV4cG9ydHMuRkJYTG9hZGVyID0gZXhwb3J0cy5HTFRGTG9hZGVyID0gZXhwb3J0cy5SR0JBRm9ybWF0ID0gZXhwb3J0cy5UZXh0dXJlID0gZXhwb3J0cy5XZWJHTFJlbmRlcmVyID0gZXhwb3J0cy5UeXBlcyA9IGV4cG9ydHMuVEhSRUUgPSBleHBvcnRzLlBoeXNpY3NMb2FkZXIgPSBleHBvcnRzLlRocmVlR3JhcGhpY3MgPSB2b2lkIDA7XHJcbmNvbnN0IGNvcmVfMSA9IHJlcXVpcmUoXCIuL2NvcmVcIik7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIlRocmVlR3JhcGhpY3NcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNvcmVfMS5UaHJlZUdyYXBoaWNzOyB9IH0pO1xyXG5jb25zdCBwaHlzaWNzTG9hZGVyXzEgPSByZXF1aXJlKFwiQGVuYWJsZTNkL2NvbW1vbi9kaXN0L3BoeXNpY3NMb2FkZXJcIik7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIlBoeXNpY3NMb2FkZXJcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHBoeXNpY3NMb2FkZXJfMS5QaHlzaWNzTG9hZGVyOyB9IH0pO1xyXG5jb25zdCBUSFJFRSA9IHJlcXVpcmUoXCJAZW5hYmxlM2QvdGhyZWUtd3JhcHBlci9kaXN0L2luZGV4XCIpO1xyXG5leHBvcnRzLlRIUkVFID0gVEhSRUU7XHJcbmNvbnN0IFR5cGVzID0gcmVxdWlyZShcIkBlbmFibGUzZC9jb21tb24vZGlzdC90eXBlc1wiKTtcclxuZXhwb3J0cy5UeXBlcyA9IFR5cGVzO1xyXG5jb25zdCB2ZXJzaW9uXzEgPSByZXF1aXJlKFwiLi92ZXJzaW9uXCIpO1xyXG52YXIgaW5kZXhfMSA9IHJlcXVpcmUoXCJAZW5hYmxlM2QvdGhyZWUtd3JhcHBlci9kaXN0L2luZGV4XCIpO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJXZWJHTFJlbmRlcmVyXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBpbmRleF8xLldlYkdMUmVuZGVyZXI7IH0gfSk7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIlRleHR1cmVcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGluZGV4XzEuVGV4dHVyZTsgfSB9KTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiUkdCQUZvcm1hdFwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gaW5kZXhfMS5SR0JBRm9ybWF0OyB9IH0pO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJHTFRGTG9hZGVyXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBpbmRleF8xLkdMVEZMb2FkZXI7IH0gfSk7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkZCWExvYWRlclwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gaW5kZXhfMS5GQlhMb2FkZXI7IH0gfSk7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIk9iamVjdDNEXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBpbmRleF8xLk9iamVjdDNEOyB9IH0pO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJWZWN0b3IyXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBpbmRleF8xLlZlY3RvcjI7IH0gfSk7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIlZlY3RvcjNcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGluZGV4XzEuVmVjdG9yMzsgfSB9KTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiTWF0aFV0aWxzXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBpbmRleF8xLk1hdGhVdGlsczsgfSB9KTtcclxuY29uc3QgaW5mbyA9IGBQb3dlcmVkIGJ5IGVuYWJsZTNkIHYke3ZlcnNpb25fMS5WRVJTSU9OfWA7XHJcbmNvbnNvbGUubG9nKGAlYyAlYyAlYyAlYyAlYyAke2luZm99ICVjIGh0dHBzOi8vZW5hYmxlM2QuaW8vYCwgJ2JhY2tncm91bmQ6ICNmZjAwMDAnLCAnYmFja2dyb3VuZDogI2ZmZmYwMCcsICdiYWNrZ3JvdW5kOiAjMDBmZjAwJywgJ2JhY2tncm91bmQ6ICMwMGZmZmYnLCAnY29sb3I6ICNmZmY7IGJhY2tncm91bmQ6ICMwMDAwMDA7JywgJ2JhY2tncm91bmQ6IG5vbmUnKTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbi8qKlxyXG4gKiBAYXV0aG9yICAgICAgIFlhbm5pY2sgRGV1YmVsIChodHRwczovL2dpdGh1Yi5jb20veWFuZGV1KVxyXG4gKiBAY29weXJpZ2h0ICAgIENvcHlyaWdodCAoYykgMjAyMCBZYW5uaWNrIERldWJlbDsgUHJvamVjdCBVcmw6IGh0dHBzOi8vZ2l0aHViLmNvbS9lbmFibGUzZC9lbmFibGUzZFxyXG4gKiBAbGljZW5zZSAgICAgIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZW5hYmxlM2QvZW5hYmxlM2QvYmxvYi9tYXN0ZXIvTElDRU5TRXxHTlUgR1BMdjN9XHJcbiAqL1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmNvbnN0IGluZGV4XzEgPSByZXF1aXJlKFwiQGVuYWJsZTNkL3RocmVlLXdyYXBwZXIvZGlzdC9pbmRleFwiKTtcclxuY2xhc3MgQ2FtZXJhcyB7XHJcbiAgICBwZXJzcGVjdGl2ZUNhbWVyYShjb25maWcgPSB7fSkge1xyXG4gICAgICAgIHJldHVybiBDYW1lcmFzLlBlcnNwZWN0aXZlKGNvbmZpZyk7XHJcbiAgICB9XHJcbiAgICBvcnRob2dyYXBoaWNDYW1lcmEoY29uZmlnID0ge30pIHtcclxuICAgICAgICByZXR1cm4gQ2FtZXJhcy5PcnRob2dyYXBoaWMoY29uZmlnKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBQZXJzcGVjdGl2ZShjb25maWcgPSB7fSkge1xyXG4gICAgICAgIC8vIGZvciBwaGFzZXJcclxuICAgICAgICAvLyBhc3BlY3QgPSBzY2VuZS5zY2FsZS5nYW1lU2l6ZS5hc3BlY3RSYXRpb1xyXG4gICAgICAgIGNvbnN0IHsgZm92ID0gNTAsIGFzcGVjdCA9IHdpbmRvdy5pbm5lcldpZHRoIC8gd2luZG93LmlubmVySGVpZ2h0LCBuZWFyID0gMC4xLCBmYXIgPSAyMDAwLCB4ID0gMCwgeSA9IDAsIHogPSAwIH0gPSBjb25maWc7XHJcbiAgICAgICAgY29uc3QgY2FtZXJhID0gbmV3IGluZGV4XzEuUGVyc3BlY3RpdmVDYW1lcmEoZm92LCBhc3BlY3QsIG5lYXIsIGZhcik7XHJcbiAgICAgICAgY2FtZXJhLnBvc2l0aW9uLnNldCh4LCB5LCB6KTtcclxuICAgICAgICByZXR1cm4gY2FtZXJhO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIE9ydGhvZ3JhcGhpYyhjb25maWcgPSB7fSkge1xyXG4gICAgICAgIC8vIGZvciBwaGFzZXJcclxuICAgICAgICAvLyBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IHNjZW5lLmNhbWVyYXMubWFpblxyXG4gICAgICAgIGNvbnN0IHdpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XHJcbiAgICAgICAgY29uc3QgaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xyXG4gICAgICAgIGNvbnN0IHsgbGVmdCA9IHdpZHRoIC8gLTEwMCwgcmlnaHQgPSB3aWR0aCAvIDEwMCwgdG9wID0gaGVpZ2h0IC8gMTAwLCBib3R0b20gPSBoZWlnaHQgLyAtMTAwLCBuZWFyID0gMSwgZmFyID0gMTAwMCwgeCA9IDAsIHkgPSAwLCB6ID0gMCB9ID0gY29uZmlnO1xyXG4gICAgICAgIGNvbnN0IGNhbWVyYSA9IG5ldyBpbmRleF8xLk9ydGhvZ3JhcGhpY0NhbWVyYShsZWZ0LCByaWdodCwgdG9wLCBib3R0b20sIG5lYXIsIGZhcik7XHJcbiAgICAgICAgY2FtZXJhLnBvc2l0aW9uLnNldCh4LCB5LCB6KTtcclxuICAgICAgICByZXR1cm4gY2FtZXJhO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydHMuZGVmYXVsdCA9IENhbWVyYXM7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNhbWVyYXMuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbi8qKlxyXG4gKiBAYXV0aG9yICAgICAgIFlhbm5pY2sgRGV1YmVsIChodHRwczovL2dpdGh1Yi5jb20veWFuZGV1KVxyXG4gKiBAY29weXJpZ2h0ICAgIENvcHlyaWdodCAoYykgMjAyMCBZYW5uaWNrIERldWJlbDsgUHJvamVjdCBVcmw6IGh0dHBzOi8vZ2l0aHViLmNvbS9lbmFibGUzZC9lbmFibGUzZFxyXG4gKiBAbGljZW5zZSAgICAgIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZW5hYmxlM2QvZW5hYmxlM2QvYmxvYi9tYXN0ZXIvTElDRU5TRXxHTlUgR1BMdjN9XHJcbiAqL1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbi8vIE9yaWdpbmFsbHkgY29waWVkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL0hpLUxldmVsL3RocmVlLWNzZ1xyXG4vLyB3aGljaCBpcyBhIHR5cGVzY3JpcHQgcmV3cml0ZSBvZiBodHRwczovL2dpdGh1Yi5jb20vbWFudGhyYXgvVEhSRUUtQ1NHTWVzaFxyXG4vLyB3aGljaCBhcyBvcmlnaW5hbGx5IHdyaXR0ZW4gYnkgQ29weXJpZ2h0IChjKSAyMDExIEV2YW4gV2FsbGFjZSAoaHR0cDovL21hZGVieWV2YW4uY29tLyksIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cclxuY29uc3QgaW5kZXhfMSA9IHJlcXVpcmUoXCJAZW5hYmxlM2QvdGhyZWUtd3JhcHBlci9kaXN0L2luZGV4XCIpO1xyXG4vKipcclxuICogQ1NHIHdyYXBwZXIgZm9yIGVuYWJsZTNkXHJcbiAqXHJcbiAqIFRoZSBDU0cgbGlicmFyeSBkb2VzIG5vdCBzdXBwb3J0IGJ1ZmZlciBnZW9tZXRyaWVzLlxyXG4gKiBNZWFucyB3ZSBmaXJzdCBtYWtlIHN1cmUgd2UgYXJlIGRlYWxpbmcgd2l0aCBnZW9tZXRyaWVzXHJcbiAqIGFuZCB0aGVuIHRyYW5zZm9ybSB0aGVtIGJhY2sgdG8gYnVmZmVyIGdlb21ldHJpZXMuXHJcbiAqL1xyXG5jbGFzcyBDU0dXcmFwcGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKHNjZW5lLCB0cmFuc2Zvcm0pIHtcclxuICAgICAgICB0aGlzLnNjZW5lID0gc2NlbmU7XHJcbiAgICAgICAgdGhpcy50cmFuc2Zvcm0gPSB0cmFuc2Zvcm07XHJcbiAgICB9XHJcbiAgICB0b0dlb21ldHJ5KG1lc2hBLCBtZXNoQikge1xyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICBtZXNoQS5nZW9tZXRyeSA9IHRoaXMudHJhbnNmb3JtLmJ1ZmZlckdlb21ldHJ5VG9HZW9tZXRyeShtZXNoQS5nZW9tZXRyeSk7XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIG1lc2hCLmdlb21ldHJ5ID0gdGhpcy50cmFuc2Zvcm0uYnVmZmVyR2VvbWV0cnlUb0dlb21ldHJ5KG1lc2hCLmdlb21ldHJ5KTtcclxuICAgIH1cclxuICAgIHRvQnVmZmVyR2VvbWV0cnkobWVzaEMpIHtcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgbWVzaEMuZ2VvbWV0cnkgPSB0aGlzLnRyYW5zZm9ybS5nZW9tZXRyeVRvQnVmZmVyR2VvbWV0cnkobWVzaEMuZ2VvbWV0cnkpO1xyXG4gICAgfVxyXG4gICAgdW5pb24obWVzaEEsIG1lc2hCKSB7XHJcbiAgICAgICAgdGhpcy50b0dlb21ldHJ5KG1lc2hBLCBtZXNoQik7XHJcbiAgICAgICAgY29uc3QgbWVzaEMgPSB0aGlzLmRvQ1NHKG1lc2hBLCBtZXNoQiwgJ3VuaW9uJyk7XHJcbiAgICAgICAgdGhpcy50b0J1ZmZlckdlb21ldHJ5KG1lc2hDKTtcclxuICAgICAgICByZXR1cm4gbWVzaEM7XHJcbiAgICB9XHJcbiAgICBzdWJ0cmFjdChtZXNoQSwgbWVzaEIpIHtcclxuICAgICAgICB0aGlzLnRvR2VvbWV0cnkobWVzaEEsIG1lc2hCKTtcclxuICAgICAgICBjb25zdCBtZXNoQyA9IHRoaXMuZG9DU0cobWVzaEEsIG1lc2hCLCAnc3VidHJhY3QnKTtcclxuICAgICAgICB0aGlzLnRvQnVmZmVyR2VvbWV0cnkobWVzaEMpO1xyXG4gICAgICAgIHJldHVybiBtZXNoQztcclxuICAgIH1cclxuICAgIGludGVyc2VjdChtZXNoQSwgbWVzaEIpIHtcclxuICAgICAgICB0aGlzLnRvR2VvbWV0cnkobWVzaEEsIG1lc2hCKTtcclxuICAgICAgICBjb25zdCBtZXNoQyA9IHRoaXMuZG9DU0cobWVzaEEsIG1lc2hCLCAnaW50ZXJzZWN0Jyk7XHJcbiAgICAgICAgdGhpcy50b0J1ZmZlckdlb21ldHJ5KG1lc2hDKTtcclxuICAgICAgICByZXR1cm4gbWVzaEM7XHJcbiAgICB9XHJcbiAgICBkb0NTRyhtZXNoQSwgbWVzaEIsIG9wZXJhdGlvbikge1xyXG4gICAgICAgIG1lc2hBLnVwZGF0ZU1hdHJpeCgpO1xyXG4gICAgICAgIG1lc2hCLnVwZGF0ZU1hdHJpeCgpO1xyXG4gICAgICAgIGNvbnN0IGJzcEEgPSBDU0cuZnJvbU1lc2gobWVzaEEpO1xyXG4gICAgICAgIGNvbnN0IGJzcEIgPSBDU0cuZnJvbU1lc2gobWVzaEIpO1xyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICBjb25zdCBic3BDID0gYnNwQVtvcGVyYXRpb25dKGJzcEIpO1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IENTRy50b01lc2goYnNwQywgbWVzaEEubWF0cml4KTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydHMuZGVmYXVsdCA9IENTR1dyYXBwZXI7XHJcbi8qKlxyXG4gKiBDU0cgKENvbnN0cnVjdGl2ZSBTb2xpZCBHZW9tZXRyeSkgbGlicmFyeSBmb3IgdGhyZWUuanMgd2l0aCBUeXBlc2NyaXB0IHN1cHBvcnQuXHJcbiAqIEhvbGRzIGEgYmluYXJ5IHNwYWNlIHBhcnRpdGlvbiB0cmVlIHJlcHJlc2VudGluZyBhIDNEIHNvbGlkLiBUd28gc29saWRzIGNhblxyXG4gKiBiZSBjb21iaW5lZCB1c2luZyB0aGUgYHVuaW9uKClgLCBgc3VidHJhY3QoKWAsIGFuZCBgaW50ZXJzZWN0KClgIG1ldGhvZHMuXHJcbiAqL1xyXG5jbGFzcyBDU0cge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5wb2x5Z29ucyA9IFtdO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGZyb21Qb2x5Z29ucyhwb2x5Z29ucykge1xyXG4gICAgICAgIGNvbnN0IGNzZyA9IG5ldyBDU0coKTtcclxuICAgICAgICBjc2cucG9seWdvbnMgPSBwb2x5Z29ucztcclxuICAgICAgICByZXR1cm4gY3NnO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGZyb21HZW9tZXRyeShnZW9tKSB7XHJcbiAgICAgICAgaWYgKGdlb20uaXNCdWZmZXJHZW9tZXRyeSkge1xyXG4gICAgICAgICAgICBnZW9tID0gbmV3IGluZGV4XzEuR2VvbWV0cnkoKS5mcm9tQnVmZmVyR2VvbWV0cnkoZ2VvbSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGZzID0gZ2VvbS5mYWNlcztcclxuICAgICAgICBjb25zdCB2cyA9IGdlb20udmVydGljZXM7XHJcbiAgICAgICAgY29uc3QgcG9seXMgPSBbXTtcclxuICAgICAgICBjb25zdCBmbSA9IFsnYScsICdiJywgJ2MnXTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGYgPSBmc1tpXTtcclxuICAgICAgICAgICAgY29uc3QgdmVydGljZXMgPSBbXTtcclxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCAzOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHV2cyA9IGdlb20uZmFjZVZlcnRleFV2c1swXVtpXSAhPT0gdW5kZWZpbmVkICYmIGdlb20uZmFjZVZlcnRleFV2c1swXVtpXVtqXSAhPT0gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgICAgICAgICAgPyBnZW9tLmZhY2VWZXJ0ZXhVdnNbMF1baV1bal1cclxuICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgIHZlcnRpY2VzLnB1c2gobmV3IFZlcnRleCh2c1tmW2ZtW2pdXV0sIGYudmVydGV4Tm9ybWFsc1tqXSwgdXZzKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcG9seXMucHVzaChuZXcgUG9seWdvbih2ZXJ0aWNlcykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gQ1NHLmZyb21Qb2x5Z29ucyhwb2x5cyk7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgZnJvbU1lc2gobWVzaCkge1xyXG4gICAgICAgIGNvbnN0IGNzZyA9IENTRy5mcm9tR2VvbWV0cnkobWVzaC5nZW9tZXRyeSk7XHJcbiAgICAgICAgQ1NHLl90bXBtMy5nZXROb3JtYWxNYXRyaXgobWVzaC5tYXRyaXgpO1xyXG4gICAgICAgIGZvciAoY29uc3QgcCBvZiBjc2cucG9seWdvbnMpIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCB2IG9mIHAudmVydGljZXMpIHtcclxuICAgICAgICAgICAgICAgIHYucG9zLmFwcGx5TWF0cml4NChtZXNoLm1hdHJpeCk7XHJcbiAgICAgICAgICAgICAgICB2Lm5vcm1hbC5hcHBseU1hdHJpeDMoQ1NHLl90bXBtMyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGNzZztcclxuICAgIH1cclxuICAgIHN0YXRpYyB0b01lc2goY3NnLCB0b01hdHJpeCkge1xyXG4gICAgICAgIGNvbnN0IGdlb20gPSBuZXcgaW5kZXhfMS5HZW9tZXRyeSgpO1xyXG4gICAgICAgIGNvbnN0IHBzID0gY3NnLnBvbHlnb25zO1xyXG4gICAgICAgIGNvbnN0IHZzID0gZ2VvbS52ZXJ0aWNlcztcclxuICAgICAgICBjb25zdCBmdnV2ID0gZ2VvbS5mYWNlVmVydGV4VXZzWzBdO1xyXG4gICAgICAgIGZvciAoY29uc3QgcCBvZiBwcykge1xyXG4gICAgICAgICAgICBjb25zdCBwdnMgPSBwLnZlcnRpY2VzO1xyXG4gICAgICAgICAgICBjb25zdCB2MCA9IHZzLmxlbmd0aDtcclxuICAgICAgICAgICAgY29uc3QgcHZsZW4gPSBwdnMubGVuZ3RoO1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHB2IG9mIHB2cykge1xyXG4gICAgICAgICAgICAgICAgdnMucHVzaChuZXcgaW5kZXhfMS5WZWN0b3IzKCkuY29weShwdi5wb3MpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMzsgaiA8PSBwdmxlbjsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBmYyA9IG5ldyBpbmRleF8xLkZhY2UzKHYwLCB2MCArIGogLSAyLCB2MCArIGogLSAxKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZ1diA9IFtdO1xyXG4gICAgICAgICAgICAgICAgZnZ1di5wdXNoKGZ1dik7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBmbm1sID0gZmMudmVydGV4Tm9ybWFscztcclxuICAgICAgICAgICAgICAgIGZubWwucHVzaChuZXcgaW5kZXhfMS5WZWN0b3IzKCkuY29weShwdnNbMF0ubm9ybWFsKSk7XHJcbiAgICAgICAgICAgICAgICBmbm1sLnB1c2gobmV3IGluZGV4XzEuVmVjdG9yMygpLmNvcHkocHZzW2ogLSAyXS5ub3JtYWwpKTtcclxuICAgICAgICAgICAgICAgIGZubWwucHVzaChuZXcgaW5kZXhfMS5WZWN0b3IzKCkuY29weShwdnNbaiAtIDFdLm5vcm1hbCkpO1xyXG4gICAgICAgICAgICAgICAgLy8gY2hlY2sgZm9yIHV2IHByb3BlcnR5XHJcbiAgICAgICAgICAgICAgICBpZiAocHZzWzBdLnV2ICYmIHB2c1tqIC0gMl0udXYgJiYgcHZzW2ogLSAxXS51dikge1xyXG4gICAgICAgICAgICAgICAgICAgIGZ1di5wdXNoKG5ldyBpbmRleF8xLlZlY3RvcjMoKS5jb3B5KHB2c1swXS51dikpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZ1di5wdXNoKG5ldyBpbmRleF8xLlZlY3RvcjMoKS5jb3B5KHB2c1tqIC0gMl0udXYpKTtcclxuICAgICAgICAgICAgICAgICAgICBmdXYucHVzaChuZXcgaW5kZXhfMS5WZWN0b3IzKCkuY29weShwdnNbaiAtIDFdLnV2KSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBmYy5ub3JtYWwgPSBuZXcgaW5kZXhfMS5WZWN0b3IzKCkuY29weShwLnBsYW5lLm5vcm1hbCk7XHJcbiAgICAgICAgICAgICAgICBnZW9tLmZhY2VzLnB1c2goZmMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGNvbXBhdGliaWxpdHkgZml4IGZvciB0aHJlZS5qcyA+PSByMTIzIChEZXplbWJlciAyMDIwKVxyXG4gICAgICAgIGNvbnN0IGludiA9IFxyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAraW5kZXhfMS5SRVZJU0lPTiA+PSAxMjMgPyBuZXcgaW5kZXhfMS5NYXRyaXg0KCkuY29weSh0b01hdHJpeCkuaW52ZXJ0KCkgOiBuZXcgaW5kZXhfMS5NYXRyaXg0KCkuZ2V0SW52ZXJzZSh0b01hdHJpeCk7XHJcbiAgICAgICAgZ2VvbS5hcHBseU1hdHJpeDQoaW52KTtcclxuICAgICAgICBnZW9tLnZlcnRpY2VzTmVlZFVwZGF0ZSA9IGdlb20uZWxlbWVudHNOZWVkVXBkYXRlID0gZ2VvbS5ub3JtYWxzTmVlZFVwZGF0ZSA9IHRydWU7XHJcbiAgICAgICAgZ2VvbS5jb21wdXRlQm91bmRpbmdTcGhlcmUoKTtcclxuICAgICAgICBnZW9tLmNvbXB1dGVCb3VuZGluZ0JveCgpO1xyXG4gICAgICAgIGNvbnN0IG0gPSBuZXcgaW5kZXhfMS5NZXNoKGdlb20pO1xyXG4gICAgICAgIG0ubWF0cml4LmNvcHkodG9NYXRyaXgpO1xyXG4gICAgICAgIG0ubWF0cml4LmRlY29tcG9zZShtLnBvc2l0aW9uLCBtLnJvdGF0aW9uLCBtLnNjYWxlKTtcclxuICAgICAgICBtLnVwZGF0ZU1hdHJpeFdvcmxkKCk7XHJcbiAgICAgICAgcmV0dXJuIG07XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgaUV2YWwodG9rZW5zLCBfaW5kZXggPSAwKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGlmICh0eXBlb2YgdG9rZW5zID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICBDU0cuY3VycmVudE9wID0gdG9rZW5zO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0b2tlbnMgaW5zdGFuY2VvZiBBcnJheSkge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHRva2VuIG9mIHRva2Vucykge1xyXG4gICAgICAgICAgICAgICAgQ1NHLmlFdmFsKHRva2VuLCAwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgdG9rZW5zID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgICAgICBjb25zdCBvcCA9IENTRy5jdXJyZW50T3A7XHJcbiAgICAgICAgICAgIHRva2Vucy51cGRhdGVNYXRyaXgoKTtcclxuICAgICAgICAgICAgdG9rZW5zLnVwZGF0ZU1hdHJpeFdvcmxkKCk7XHJcbiAgICAgICAgICAgIGlmICghQ1NHLnNvdXJjZU1lc2gpIHtcclxuICAgICAgICAgICAgICAgIENTRy5jdXJyZW50UHJpbSA9IENTRy5mcm9tTWVzaCgoQ1NHLnNvdXJjZU1lc2ggPSB0b2tlbnMpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIENTRy5uZXh0UHJpbSA9IENTRy5mcm9tTWVzaCh0b2tlbnMpO1xyXG4gICAgICAgICAgICAgICAgQ1NHLmN1cnJlbnRQcmltID0gQ1NHLmN1cnJlbnRQcmltW29wXShDU0cubmV4dFByaW0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChDU0cuZG9SZW1vdmUpXHJcbiAgICAgICAgICAgICAgICAoX2EgPSB0b2tlbnMgPT09IG51bGwgfHwgdG9rZW5zID09PSB2b2lkIDAgPyB2b2lkIDAgOiB0b2tlbnMucGFyZW50KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucmVtb3ZlKHRva2Vucyk7XHJcbiAgICAgICAgfSAvLyB1bmlvbixzdWJ0cmFjdCxpbnRlcnNlY3QsaW52ZXJzZVxyXG4gICAgfVxyXG4gICAgc3RhdGljIGV2YWwodG9rZW5zLCBkb1JlbW92ZSkge1xyXG4gICAgICAgIC8vIFtbJ2FkZCcsbWVzaCxtZXNoLG1lc2gsbWVzaF0sWydzdWInLG1lc2gsbWVzaCxtZXNoLG1lc2hdXVxyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICBkZWxldGUgQ1NHLmN1cnJlbnRPcDtcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgZGVsZXRlIENTRy5zb3VyY2VNZXNoO1xyXG4gICAgICAgIENTRy5kb1JlbW92ZSA9IGRvUmVtb3ZlO1xyXG4gICAgICAgIENTRy5pRXZhbCh0b2tlbnMpO1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IENTRy50b01lc2goQ1NHLmN1cnJlbnRQcmltLCBDU0cuc291cmNlTWVzaC5tYXRyaXgpO1xyXG4gICAgICAgIHJlc3VsdC5tYXRlcmlhbCA9IENTRy5zb3VyY2VNZXNoLm1hdGVyaWFsO1xyXG4gICAgICAgIHJlc3VsdC5jYXN0U2hhZG93ID0gcmVzdWx0LnJlY2VpdmVTaGFkb3cgPSB0cnVlO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcbiAgICBjbG9uZSgpIHtcclxuICAgICAgICBjb25zdCBjc2cgPSBuZXcgQ1NHKCk7XHJcbiAgICAgICAgY3NnLnBvbHlnb25zID0gdGhpcy5wb2x5Z29ucy5tYXAocCA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBwLmNsb25lKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGNzZztcclxuICAgIH1cclxuICAgIHRvUG9seWdvbnMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucG9seWdvbnM7XHJcbiAgICB9XHJcbiAgICB1bmlvbihjc2cpIHtcclxuICAgICAgICBjb25zdCBhID0gbmV3IE5vZGUodGhpcy5jbG9uZSgpLnBvbHlnb25zKTtcclxuICAgICAgICBjb25zdCBiID0gbmV3IE5vZGUoY3NnLmNsb25lKCkucG9seWdvbnMpO1xyXG4gICAgICAgIGEuY2xpcFRvKGIpO1xyXG4gICAgICAgIGIuY2xpcFRvKGEpO1xyXG4gICAgICAgIGIuaW52ZXJ0KCk7XHJcbiAgICAgICAgYi5jbGlwVG8oYSk7XHJcbiAgICAgICAgYi5pbnZlcnQoKTtcclxuICAgICAgICBhLmJ1aWxkKGIuYWxsUG9seWdvbnMoKSk7XHJcbiAgICAgICAgcmV0dXJuIENTRy5mcm9tUG9seWdvbnMoYS5hbGxQb2x5Z29ucygpKTtcclxuICAgIH1cclxuICAgIHN1YnRyYWN0KGNzZykge1xyXG4gICAgICAgIGNvbnN0IGEgPSBuZXcgTm9kZSh0aGlzLmNsb25lKCkucG9seWdvbnMpO1xyXG4gICAgICAgIGNvbnN0IGIgPSBuZXcgTm9kZShjc2cuY2xvbmUoKS5wb2x5Z29ucyk7XHJcbiAgICAgICAgYS5pbnZlcnQoKTtcclxuICAgICAgICBhLmNsaXBUbyhiKTtcclxuICAgICAgICBiLmNsaXBUbyhhKTtcclxuICAgICAgICBiLmludmVydCgpO1xyXG4gICAgICAgIGIuY2xpcFRvKGEpO1xyXG4gICAgICAgIGIuaW52ZXJ0KCk7XHJcbiAgICAgICAgYS5idWlsZChiLmFsbFBvbHlnb25zKCkpO1xyXG4gICAgICAgIGEuaW52ZXJ0KCk7XHJcbiAgICAgICAgcmV0dXJuIENTRy5mcm9tUG9seWdvbnMoYS5hbGxQb2x5Z29ucygpKTtcclxuICAgIH1cclxuICAgIGludGVyc2VjdChjc2cpIHtcclxuICAgICAgICBjb25zdCBhID0gbmV3IE5vZGUodGhpcy5jbG9uZSgpLnBvbHlnb25zKTtcclxuICAgICAgICBjb25zdCBiID0gbmV3IE5vZGUoY3NnLmNsb25lKCkucG9seWdvbnMpO1xyXG4gICAgICAgIGEuaW52ZXJ0KCk7XHJcbiAgICAgICAgYi5jbGlwVG8oYSk7XHJcbiAgICAgICAgYi5pbnZlcnQoKTtcclxuICAgICAgICBhLmNsaXBUbyhiKTtcclxuICAgICAgICBiLmNsaXBUbyhhKTtcclxuICAgICAgICBhLmJ1aWxkKGIuYWxsUG9seWdvbnMoKSk7XHJcbiAgICAgICAgYS5pbnZlcnQoKTtcclxuICAgICAgICByZXR1cm4gQ1NHLmZyb21Qb2x5Z29ucyhhLmFsbFBvbHlnb25zKCkpO1xyXG4gICAgfVxyXG4gICAgaW52ZXJzZSgpIHtcclxuICAgICAgICBjb25zdCBjc2cgPSB0aGlzLmNsb25lKCk7XHJcbiAgICAgICAgY3NnLnBvbHlnb25zLm1hcChwID0+IHtcclxuICAgICAgICAgICAgcC5mbGlwKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGNzZztcclxuICAgIH1cclxufVxyXG5DU0cuX3RtcG0zID0gbmV3IGluZGV4XzEuTWF0cml4MygpO1xyXG4vKipcclxuICogUmVwcmVzZW50cyBhIDNEIHZlY3Rvci5cclxuICovXHJcbmNsYXNzIFZlY3RvciBleHRlbmRzIGluZGV4XzEuVmVjdG9yMyB7XHJcbiAgICBjb25zdHJ1Y3Rvcih4LCB5LCB6KSB7XHJcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDMpIHtcclxuICAgICAgICAgICAgc3VwZXIoeCwgeSwgeik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoeCkpIHtcclxuICAgICAgICAgICAgc3VwZXIoeFswXSwgeFsxXSwgeFsyXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiB4ID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgIHRoaXMuY29weSh4KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBjb25zdHJ1Y3RvciB0byB2ZWN0b3InKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjbG9uZSgpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFZlY3Rvcih0aGlzLngsIHRoaXMueSwgdGhpcy56KTtcclxuICAgIH1cclxuICAgIG5lZ2F0ZWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY2xvbmUoKS5tdWx0aXBseVNjYWxhcigtMSk7XHJcbiAgICB9XHJcbiAgICBwbHVzKGEpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jbG9uZSgpLmFkZChhKTtcclxuICAgIH1cclxuICAgIG1pbnVzKGEpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jbG9uZSgpLnN1YihhKTtcclxuICAgIH1cclxuICAgIHRpbWVzKGEpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jbG9uZSgpLm11bHRpcGx5U2NhbGFyKGEpO1xyXG4gICAgfVxyXG4gICAgZGl2aWRlZEJ5KGEpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jbG9uZSgpLmRpdmlkZVNjYWxhcihhKTtcclxuICAgIH1cclxuICAgIGxlcnAoYSwgdCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBsdXMoYS5taW51cyh0aGlzKS50aW1lcyh0KSk7XHJcbiAgICB9XHJcbiAgICB1bml0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRpdmlkZWRCeSh0aGlzLmxlbmd0aCgpKTtcclxuICAgIH1cclxuICAgIC8vIEB0cy1pZ25vcmVcclxuICAgIGNyb3NzKGEsIHcpIHtcclxuICAgICAgICByZXR1cm4gaW5kZXhfMS5WZWN0b3IzLnByb3RvdHlwZS5jcm9zcy5jYWxsKHRoaXMuY2xvbmUoKSwgYSk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFJlcHJlc2VudHMgYSB2ZXJ0ZXggb2YgYSBwb2x5Z29uLiBVc2UgeW91ciBvd24gdmVydGV4IGNsYXNzIGluc3RlYWQgb2YgdGhpc1xyXG4gKiBvbmUgdG8gcHJvdmlkZSBhZGRpdGlvbmFsIGZlYXR1cmVzIGxpa2UgdGV4dHVyZSBjb29yZGluYXRlcyBhbmQgdmVydGV4XHJcbiAqIGNvbG9ycy4gQ3VzdG9tIHZlcnRleCBjbGFzc2VzIG5lZWQgdG8gcHJvdmlkZSBhIGBwb3NgIHByb3BlcnR5IGFuZCBgY2xvbmUoKWAsXHJcbiAqIGBmbGlwKClgLCBhbmQgYGludGVycG9sYXRlKClgIG1ldGhvZHMgdGhhdCBiZWhhdmUgYW5hbG9nb3VzIHRvIHRoZSBvbmVzXHJcbiAqIGRlZmluZWQgYnkgYENTRy5WZXJ0ZXhgLiBUaGlzIGNsYXNzIHByb3ZpZGVzIGBub3JtYWxgIHNvIGNvbnZlbmllbmNlXHJcbiAqIGZ1bmN0aW9ucyBsaWtlIGBDU0cuc3BoZXJlKClgIGNhbiByZXR1cm4gYSBzbW9vdGggdmVydGV4IG5vcm1hbCwgYnV0IGBub3JtYWxgXHJcbiAqIGlzIG5vdCB1c2VkIGFueXdoZXJlIGVsc2UuXHJcbiAqL1xyXG5jbGFzcyBWZXJ0ZXgge1xyXG4gICAgY29uc3RydWN0b3IocG9zLCBub3JtYWwsIHV2KSB7XHJcbiAgICAgICAgdGhpcy5wb3MgPSBuZXcgVmVjdG9yKHBvcy54LCBwb3MueSwgcG9zLnopO1xyXG4gICAgICAgIHRoaXMubm9ybWFsID0gbmV3IFZlY3Rvcihub3JtYWwueCwgbm9ybWFsLnksIG5vcm1hbC56KTtcclxuICAgICAgICBpZiAodXYpXHJcbiAgICAgICAgICAgIHRoaXMudXYgPSBuZXcgVmVjdG9yKHV2LngsIHV2LnksIHV2LnopO1xyXG4gICAgfVxyXG4gICAgY2xvbmUoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBWZXJ0ZXgodGhpcy5wb3MuY2xvbmUoKSwgdGhpcy5ub3JtYWwuY2xvbmUoKSwgdGhpcy51diA/IHRoaXMudXYuY2xvbmUoKSA6IHVuZGVmaW5lZCk7XHJcbiAgICB9XHJcbiAgICAvLyBJbnZlcnQgYWxsIG9yaWVudGF0aW9uLXNwZWNpZmljIGRhdGEgKGUuZy4gdmVydGV4IG5vcm1hbCkuIENhbGxlZCB3aGVuIHRoZVxyXG4gICAgLy8gb3JpZW50YXRpb24gb2YgYSBwb2x5Z29uIGlzIGZsaXBwZWQuXHJcbiAgICBmbGlwKCkge1xyXG4gICAgICAgIHRoaXMubm9ybWFsID0gdGhpcy5ub3JtYWwubmVnYXRlZCgpO1xyXG4gICAgfVxyXG4gICAgLy8gQ3JlYXRlIGEgbmV3IHZlcnRleCBiZXR3ZWVuIHRoaXMgdmVydGV4IGFuZCBgb3RoZXJgIGJ5IGxpbmVhcmx5XHJcbiAgICAvLyBpbnRlcnBvbGF0aW5nIGFsbCBwcm9wZXJ0aWVzIHVzaW5nIGEgcGFyYW1ldGVyIG9mIGB0YC4gU3ViY2xhc3NlcyBzaG91bGRcclxuICAgIC8vIG92ZXJyaWRlIHRoaXMgdG8gaW50ZXJwb2xhdGUgYWRkaXRpb25hbCBwcm9wZXJ0aWVzLlxyXG4gICAgaW50ZXJwb2xhdGUob3RoZXIsIHQpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFZlcnRleCh0aGlzLnBvcy5sZXJwKG90aGVyLnBvcywgdCksIHRoaXMubm9ybWFsLmxlcnAob3RoZXIubm9ybWFsLCB0KSwgdGhpcy51diA/IHRoaXMudXYubGVycChvdGhlci51diwgdCkgOiB1bmRlZmluZWQpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBSZXByZXNlbnRzIGEgcGxhbmUgaW4gM0Qgc3BhY2UuXHJcbiAqL1xyXG5jbGFzcyBQbGFuZSB7XHJcbiAgICBjb25zdHJ1Y3Rvcihub3JtYWwsIHcpIHtcclxuICAgICAgICB0aGlzLm5vcm1hbCA9IG5vcm1hbDtcclxuICAgICAgICB0aGlzLncgPSB3O1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGZyb21Qb2ludHMoYSwgYiwgYykge1xyXG4gICAgICAgIGNvbnN0IG4gPSBiXHJcbiAgICAgICAgICAgIC5taW51cyhhKVxyXG4gICAgICAgICAgICAuY3Jvc3MoYy5taW51cyhhKSlcclxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICAudW5pdCgpO1xyXG4gICAgICAgIHJldHVybiBuZXcgUGxhbmUobiwgbi5kb3QoYSkpO1xyXG4gICAgfVxyXG4gICAgY2xvbmUoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQbGFuZSh0aGlzLm5vcm1hbC5jbG9uZSgpLCB0aGlzLncpO1xyXG4gICAgfVxyXG4gICAgZmxpcCgpIHtcclxuICAgICAgICB0aGlzLm5vcm1hbCA9IHRoaXMubm9ybWFsLm5lZ2F0ZWQoKTtcclxuICAgICAgICB0aGlzLncgPSAtdGhpcy53O1xyXG4gICAgfVxyXG4gICAgLy8gU3BsaXQgYHBvbHlnb25gIGJ5IHRoaXMgcGxhbmUgaWYgbmVlZGVkLCB0aGVuIHB1dCB0aGUgcG9seWdvbiBvciBwb2x5Z29uXHJcbiAgICAvLyBmcmFnbWVudHMgaW4gdGhlIGFwcHJvcHJpYXRlIGxpc3RzLiBDb3BsYW5hciBwb2x5Z29ucyBnbyBpbnRvIGVpdGhlclxyXG4gICAgLy8gYGNvcGxhbmFyRnJvbnRgIG9yIGBjb3BsYW5hckJhY2tgIGRlcGVuZGluZyBvbiB0aGVpciBvcmllbnRhdGlvbiB3aXRoXHJcbiAgICAvLyByZXNwZWN0IHRvIHRoaXMgcGxhbmUuIFBvbHlnb25zIGluIGZyb250IG9yIGluIGJhY2sgb2YgdGhpcyBwbGFuZSBnbyBpbnRvXHJcbiAgICAvLyBlaXRoZXIgYGZyb250YCBvciBgYmFja2AuXHJcbiAgICBzcGxpdFBvbHlnb24ocG9seWdvbiwgY29wbGFuYXJGcm9udCwgY29wbGFuYXJCYWNrLCBmcm9udCwgYmFjaykge1xyXG4gICAgICAgIGNvbnN0IENPUExBTkFSID0gMDtcclxuICAgICAgICBjb25zdCBGUk9OVCA9IDE7XHJcbiAgICAgICAgY29uc3QgQkFDSyA9IDI7XHJcbiAgICAgICAgY29uc3QgU1BBTk5JTkcgPSAzO1xyXG4gICAgICAgIC8vIENsYXNzaWZ5IGVhY2ggcG9pbnQgYXMgd2VsbCBhcyB0aGUgZW50aXJlIHBvbHlnb24gaW50byBvbmUgb2YgdGhlIGFib3ZlXHJcbiAgICAgICAgLy8gZm91ciBjbGFzc2VzLlxyXG4gICAgICAgIGxldCBwb2x5Z29uVHlwZSA9IDA7XHJcbiAgICAgICAgY29uc3QgdHlwZXMgPSBbXTtcclxuICAgICAgICBmb3IgKGNvbnN0IHZlcnRleCBvZiBwb2x5Z29uLnZlcnRpY2VzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLm5vcm1hbC5kb3QodmVydGV4LnBvcykgLSB0aGlzLnc7XHJcbiAgICAgICAgICAgIGNvbnN0IHR5cGUgPSB0IDwgLVBsYW5lLkVQU0lMT04gPyBCQUNLIDogdCA+IFBsYW5lLkVQU0lMT04gPyBGUk9OVCA6IENPUExBTkFSO1xyXG4gICAgICAgICAgICBwb2x5Z29uVHlwZSB8PSB0eXBlO1xyXG4gICAgICAgICAgICB0eXBlcy5wdXNoKHR5cGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBQdXQgdGhlIHBvbHlnb24gaW4gdGhlIGNvcnJlY3QgbGlzdCwgc3BsaXR0aW5nIGl0IHdoZW4gbmVjZXNzYXJ5LlxyXG4gICAgICAgIHN3aXRjaCAocG9seWdvblR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSBDT1BMQU5BUjpcclxuICAgICAgICAgICAgICAgIDtcclxuICAgICAgICAgICAgICAgICh0aGlzLm5vcm1hbC5kb3QocG9seWdvbi5wbGFuZS5ub3JtYWwpID4gMCA/IGNvcGxhbmFyRnJvbnQgOiBjb3BsYW5hckJhY2spLnB1c2gocG9seWdvbik7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBGUk9OVDpcclxuICAgICAgICAgICAgICAgIGZyb250LnB1c2gocG9seWdvbik7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBCQUNLOlxyXG4gICAgICAgICAgICAgICAgYmFjay5wdXNoKHBvbHlnb24pO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgU1BBTk5JTkc6XHJcbiAgICAgICAgICAgICAgICBjb25zdCBmID0gW107XHJcbiAgICAgICAgICAgICAgICBjb25zdCBiID0gW107XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBvbHlnb24udmVydGljZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBqID0gKGkgKyAxKSAlIHBvbHlnb24udmVydGljZXMubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpID0gdHlwZXNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGogPSB0eXBlc1tqXTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB2aSA9IHBvbHlnb24udmVydGljZXNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmogPSBwb2x5Z29uLnZlcnRpY2VzW2pdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aSAhPT0gQkFDSykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmLnB1c2godmkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodGkgIT09IEZST05UKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGIucHVzaCh0aSAhPT0gQkFDSyA/IHZpLmNsb25lKCkgOiB2aSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgodGkgfCB0aikgPT09IFNQQU5OSU5HKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSAodGhpcy53IC0gdGhpcy5ub3JtYWwuZG90KHZpLnBvcykpIC8gdGhpcy5ub3JtYWwuZG90KHZqLnBvcy5taW51cyh2aS5wb3MpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdiA9IHZpLmludGVycG9sYXRlKHZqLCB0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZi5wdXNoKHYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiLnB1c2godi5jbG9uZSgpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoZi5sZW5ndGggPj0gMykge1xyXG4gICAgICAgICAgICAgICAgICAgIGZyb250LnB1c2gobmV3IFBvbHlnb24oZiwgcG9seWdvbi5zaGFyZWQpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChiLmxlbmd0aCA+PSAzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYmFjay5wdXNoKG5ldyBQb2x5Z29uKGIsIHBvbHlnb24uc2hhcmVkKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuLy8gdGhlIHRvbGVyYW5jZSB1c2VkIGJ5IGBzcGxpdFBvbHlnb24oKWAgdG8gZGVjaWRlIGlmIGFcclxuLy8gcG9pbnQgaXMgb24gdGhlIHBsYW5lLlxyXG5QbGFuZS5FUFNJTE9OID0gMWUtNTtcclxuLyoqXHJcbiAqIFJlcHJlc2VudHMgYSBjb252ZXggcG9seWdvbi4gVGhlIHZlcnRpY2VzIHVzZWQgdG8gaW5pdGlhbGl6ZSBhIHBvbHlnb24gbXVzdFxyXG4gKiBiZSBjb3BsYW5hciBhbmQgZm9ybSBhIGNvbnZleCBsb29wLiBUaGV5IGRvIG5vdCBoYXZlIHRvIGJlIGBWZXJ0ZXhgXHJcbiAqIGluc3RhbmNlcyBidXQgdGhleSBtdXN0IGJlaGF2ZSBzaW1pbGFybHkgKGR1Y2sgdHlwaW5nIGNhbiBiZSB1c2VkIGZvclxyXG4gKiBjdXN0b21pemF0aW9uKS5cclxuICpcclxuICogRWFjaCBjb252ZXggcG9seWdvbiBoYXMgYSBgc2hhcmVkYCBwcm9wZXJ0eSwgd2hpY2ggaXMgc2hhcmVkIGJldHdlZW4gYWxsXHJcbiAqIHBvbHlnb25zIHRoYXQgYXJlIGNsb25lcyBvZiBlYWNoIG90aGVyIG9yIHdlcmUgc3BsaXQgZnJvbSB0aGUgc2FtZSBwb2x5Z29uLlxyXG4gKiBUaGlzIGNhbiBiZSB1c2VkIHRvIGRlZmluZSBwZXItcG9seWdvbiBwcm9wZXJ0aWVzIChzdWNoIGFzIHN1cmZhY2UgY29sb3IpLlxyXG4gKi9cclxuY2xhc3MgUG9seWdvbiB7XHJcbiAgICBjb25zdHJ1Y3Rvcih2ZXJ0aWNlcywgc2hhcmVkID0gbnVsbCkge1xyXG4gICAgICAgIHRoaXMudmVydGljZXMgPSB2ZXJ0aWNlcztcclxuICAgICAgICB0aGlzLnNoYXJlZCA9IHNoYXJlZDtcclxuICAgICAgICB0aGlzLnBsYW5lID0gUGxhbmUuZnJvbVBvaW50cyh2ZXJ0aWNlc1swXS5wb3MsIHZlcnRpY2VzWzFdLnBvcywgdmVydGljZXNbMl0ucG9zKTtcclxuICAgIH1cclxuICAgIGNsb25lKCkge1xyXG4gICAgICAgIGNvbnN0IHZlcnRpY2VzID0gdGhpcy52ZXJ0aWNlcy5tYXAodiA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiB2LmNsb25lKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQb2x5Z29uKHZlcnRpY2VzLCB0aGlzLnNoYXJlZCk7XHJcbiAgICB9XHJcbiAgICBmbGlwKCkge1xyXG4gICAgICAgIHRoaXMudmVydGljZXMucmV2ZXJzZSgpLm1hcCh2ID0+IHtcclxuICAgICAgICAgICAgdi5mbGlwKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5wbGFuZS5mbGlwKCk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIEhvbGRzIGEgbm9kZSBpbiBhIEJTUCB0cmVlLiBBIEJTUCB0cmVlIGlzIGJ1aWx0IGZyb20gYSBjb2xsZWN0aW9uIG9mIHBvbHlnb25zXHJcbiAqIGJ5IHBpY2tpbmcgYSBwb2x5Z29uIHRvIHNwbGl0IGFsb25nLiBUaGF0IHBvbHlnb24gKGFuZCBhbGwgb3RoZXIgY29wbGFuYXJcclxuICogcG9seWdvbnMpIGFyZSBhZGRlZCBkaXJlY3RseSB0byB0aGF0IG5vZGUgYW5kIHRoZSBvdGhlciBwb2x5Z29ucyBhcmUgYWRkZWQgdG9cclxuICogdGhlIGZyb250IGFuZC9vciBiYWNrIHN1YnRyZWVzLiBUaGlzIGlzIG5vdCBhIGxlYWZ5IEJTUCB0cmVlIHNpbmNlIHRoZXJlIGlzXHJcbiAqIG5vIGRpc3RpbmN0aW9uIGJldHdlZW4gaW50ZXJuYWwgYW5kIGxlYWYgbm9kZXMuXHJcbiAqL1xyXG5jbGFzcyBOb2RlIHtcclxuICAgIGNvbnN0cnVjdG9yKHBvbHlnb25zKSB7XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIGRlbGV0ZSB0aGlzLnBsYW5lO1xyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICBkZWxldGUgdGhpcy5mcm9udDtcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgZGVsZXRlIHRoaXMuYmFjaztcclxuICAgICAgICB0aGlzLnBvbHlnb25zID0gW107XHJcbiAgICAgICAgaWYgKHBvbHlnb25zKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYnVpbGQocG9seWdvbnMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNsb25lKCkge1xyXG4gICAgICAgIGNvbnN0IG5vZGUgPSBuZXcgTm9kZSgpO1xyXG4gICAgICAgIG5vZGUucGxhbmUgPSB0aGlzLnBsYW5lICYmIHRoaXMucGxhbmUuY2xvbmUoKTtcclxuICAgICAgICBub2RlLmZyb250ID0gdGhpcy5mcm9udCAmJiB0aGlzLmZyb250LmNsb25lKCk7XHJcbiAgICAgICAgbm9kZS5iYWNrID0gdGhpcy5iYWNrICYmIHRoaXMuYmFjay5jbG9uZSgpO1xyXG4gICAgICAgIG5vZGUucG9seWdvbnMgPSB0aGlzLnBvbHlnb25zLm1hcChwID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHAuY2xvbmUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gbm9kZTtcclxuICAgIH1cclxuICAgIC8vIENvbnZlcnQgc29saWQgc3BhY2UgdG8gZW1wdHkgc3BhY2UgYW5kIGVtcHR5IHNwYWNlIHRvIHNvbGlkIHNwYWNlLlxyXG4gICAgaW52ZXJ0KCkge1xyXG4gICAgICAgIGZvciAoY29uc3QgcG9seWdvbiBvZiB0aGlzLnBvbHlnb25zKSB7XHJcbiAgICAgICAgICAgIHBvbHlnb24uZmxpcCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnBsYW5lLmZsaXAoKTtcclxuICAgICAgICBpZiAodGhpcy5mcm9udCkge1xyXG4gICAgICAgICAgICB0aGlzLmZyb250LmludmVydCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5iYWNrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYmFjay5pbnZlcnQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgdGVtcCA9IHRoaXMuZnJvbnQ7XHJcbiAgICAgICAgdGhpcy5mcm9udCA9IHRoaXMuYmFjaztcclxuICAgICAgICB0aGlzLmJhY2sgPSB0ZW1wO1xyXG4gICAgfVxyXG4gICAgLy8gUmVjdXJzaXZlbHkgcmVtb3ZlIGFsbCBwb2x5Z29ucyBpbiBgcG9seWdvbnNgIHRoYXQgYXJlIGluc2lkZSB0aGlzIEJTUFxyXG4gICAgLy8gdHJlZS5cclxuICAgIGNsaXBQb2x5Z29ucyhwb2x5Z29ucykge1xyXG4gICAgICAgIGlmICghdGhpcy5wbGFuZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gcG9seWdvbnMuc2xpY2UoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGZyb250ID0gW107XHJcbiAgICAgICAgbGV0IGJhY2sgPSBbXTtcclxuICAgICAgICBmb3IgKGNvbnN0IHBvbHlnb24gb2YgcG9seWdvbnMpIHtcclxuICAgICAgICAgICAgdGhpcy5wbGFuZS5zcGxpdFBvbHlnb24ocG9seWdvbiwgZnJvbnQsIGJhY2ssIGZyb250LCBiYWNrKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuZnJvbnQpIHtcclxuICAgICAgICAgICAgZnJvbnQgPSB0aGlzLmZyb250LmNsaXBQb2x5Z29ucyhmcm9udCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJhY2sgPSB0aGlzLmJhY2sgPyB0aGlzLmJhY2suY2xpcFBvbHlnb25zKGJhY2spIDogW107XHJcbiAgICAgICAgcmV0dXJuIGZyb250LmNvbmNhdChiYWNrKTtcclxuICAgIH1cclxuICAgIC8vIFJlbW92ZSBhbGwgcG9seWdvbnMgaW4gdGhpcyBCU1AgdHJlZSB0aGF0IGFyZSBpbnNpZGUgdGhlIG90aGVyIEJTUCB0cmVlXHJcbiAgICAvLyBgYnNwYC5cclxuICAgIGNsaXBUbyhic3ApIHtcclxuICAgICAgICB0aGlzLnBvbHlnb25zID0gYnNwLmNsaXBQb2x5Z29ucyh0aGlzLnBvbHlnb25zKTtcclxuICAgICAgICBpZiAodGhpcy5mcm9udCkge1xyXG4gICAgICAgICAgICB0aGlzLmZyb250LmNsaXBUbyhic3ApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5iYWNrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYmFjay5jbGlwVG8oYnNwKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBSZXR1cm4gYSBsaXN0IG9mIGFsbCBwb2x5Z29ucyBpbiB0aGlzIEJTUCB0cmVlLlxyXG4gICAgYWxsUG9seWdvbnMoKSB7XHJcbiAgICAgICAgbGV0IHBvbHlnb25zID0gdGhpcy5wb2x5Z29ucy5zbGljZSgpO1xyXG4gICAgICAgIGlmICh0aGlzLmZyb250KSB7XHJcbiAgICAgICAgICAgIHBvbHlnb25zID0gcG9seWdvbnMuY29uY2F0KHRoaXMuZnJvbnQuYWxsUG9seWdvbnMoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmJhY2spIHtcclxuICAgICAgICAgICAgcG9seWdvbnMgPSBwb2x5Z29ucy5jb25jYXQodGhpcy5iYWNrLmFsbFBvbHlnb25zKCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcG9seWdvbnM7XHJcbiAgICB9XHJcbiAgICAvLyBCdWlsZCBhIEJTUCB0cmVlIG91dCBvZiBgcG9seWdvbnNgLiBXaGVuIGNhbGxlZCBvbiBhbiBleGlzdGluZyB0cmVlLCB0aGVcclxuICAgIC8vIG5ldyBwb2x5Z29ucyBhcmUgZmlsdGVyZWQgZG93biB0byB0aGUgYm90dG9tIG9mIHRoZSB0cmVlIGFuZCBiZWNvbWUgbmV3XHJcbiAgICAvLyBub2RlcyB0aGVyZS4gRWFjaCBzZXQgb2YgcG9seWdvbnMgaXMgcGFydGl0aW9uZWQgdXNpbmcgdGhlIGZpcnN0IHBvbHlnb25cclxuICAgIC8vIChubyBoZXVyaXN0aWMgaXMgdXNlZCB0byBwaWNrIGEgZ29vZCBzcGxpdCkuXHJcbiAgICBidWlsZChwb2x5Z29ucykge1xyXG4gICAgICAgIGlmICghcG9seWdvbnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0aGlzLnBsYW5lKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGxhbmUgPSBwb2x5Z29uc1swXS5wbGFuZS5jbG9uZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBmcm9udCA9IFtdO1xyXG4gICAgICAgIGNvbnN0IGJhY2sgPSBbXTtcclxuICAgICAgICBmb3IgKGNvbnN0IHBvbHlnb24gb2YgcG9seWdvbnMpIHtcclxuICAgICAgICAgICAgdGhpcy5wbGFuZS5zcGxpdFBvbHlnb24ocG9seWdvbiwgdGhpcy5wb2x5Z29ucywgdGhpcy5wb2x5Z29ucywgZnJvbnQsIGJhY2spO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZnJvbnQubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5mcm9udCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5mcm9udCA9IG5ldyBOb2RlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5mcm9udC5idWlsZChmcm9udCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChiYWNrLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuYmFjaykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5iYWNrID0gbmV3IE5vZGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmJhY2suYnVpbGQoYmFjayk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNzZy5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5jb25zdCBIYXZlU29tZUZ1biA9IChudW1iZXJPZkVsZW1lbnRzID0gMjAsIHBoeXNpY3MpID0+IHtcclxuICAgIGlmICghd2luZG93Ll9fbG9hZFBoeXNpY3MpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnVGhlcmUgaXMgbm90IG11Y2ggZnVuIHdpdGhvdXQgcGh5c2ljcyBlbmFibGVkIScpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIC8vIGFkZGluZyBzb21lIGJveGVzICh3aXRoIHBoeXNpY3MpXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bWJlck9mRWxlbWVudHM7IGkrKykge1xyXG4gICAgICAgIGNvbnN0IG1hdGVyaWFscyA9IFsnc3RhbmRhcmQnLCAnYmFzaWMnLCAnbm9ybWFsJywgJ3Bob25nJywgJ2xpbmUnLCAncG9pbnRzJ107XHJcbiAgICAgICAgY29uc3QgQmV0d2VlbiA9IChtaW4sIG1heCkgPT4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbiArIDEpICsgbWluKTtcclxuICAgICAgICBjb25zdCBSYW5kb21QaWNrID0gKGFycmF5KSA9PiBhcnJheVtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBhcnJheS5sZW5ndGgpXTtcclxuICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA+IDAuNSkge1xyXG4gICAgICAgICAgICBwaHlzaWNzLmFkZFxyXG4gICAgICAgICAgICAgICAgLmJveCh7XHJcbiAgICAgICAgICAgICAgICB4OiBCZXR3ZWVuKC0xMCwgMTApLFxyXG4gICAgICAgICAgICAgICAgeTogQmV0d2VlbigxMCwgMjApLFxyXG4gICAgICAgICAgICAgICAgejogQmV0d2VlbigtMTAsIDEwKSxcclxuICAgICAgICAgICAgICAgIHdpZHRoOiBCZXR3ZWVuKDEsIDIpIC8gMTAsXHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IEJldHdlZW4oMSwgMikgLyAxMCxcclxuICAgICAgICAgICAgICAgIGRlcHRoOiBCZXR3ZWVuKDEsIDIpIC8gMTAsXHJcbiAgICAgICAgICAgICAgICBtYXNzOiAxXHJcbiAgICAgICAgICAgIH0sIHsgW1JhbmRvbVBpY2sobWF0ZXJpYWxzKV06IHsgY29sb3I6IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDB4ZmZmZmZmKSB9IH0pXHJcbiAgICAgICAgICAgICAgICAuYm9keS5zZXRSZXN0aXR1dGlvbihNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMCkgLyAyMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBwaHlzaWNzLmFkZFxyXG4gICAgICAgICAgICAgICAgLnNwaGVyZSh7XHJcbiAgICAgICAgICAgICAgICB4OiBCZXR3ZWVuKC0xMCwgMTApLFxyXG4gICAgICAgICAgICAgICAgeTogQmV0d2VlbigxMCwgMjApLFxyXG4gICAgICAgICAgICAgICAgejogQmV0d2VlbigtMTAsIDEwKSxcclxuICAgICAgICAgICAgICAgIHJhZGl1czogQmV0d2VlbigxLCAyKSAvIDEwLFxyXG4gICAgICAgICAgICAgICAgbWFzczogMVxyXG4gICAgICAgICAgICB9LCB7IFtSYW5kb21QaWNrKG1hdGVyaWFscyldOiB7IGNvbG9yOiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAweGZmZmZmZikgfSB9KVxyXG4gICAgICAgICAgICAgICAgLmJvZHkuc2V0UmVzdGl0dXRpb24oTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApIC8gMjApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gSGF2ZVNvbWVGdW47XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWhhdmVTb21lRnVuLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xyXG4vKipcclxuICogQGF1dGhvciAgICAgICBZYW5uaWNrIERldWJlbCAoaHR0cHM6Ly9naXRodWIuY29tL3lhbmRldSlcclxuICogQGNvcHlyaWdodCAgICBDb3B5cmlnaHQgKGMpIDIwMjAgWWFubmljayBEZXViZWw7IFByb2plY3QgVXJsOiBodHRwczovL2dpdGh1Yi5jb20vZW5hYmxlM2QvZW5hYmxlM2RcclxuICogQGxpY2Vuc2UgICAgICB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2VuYWJsZTNkL2VuYWJsZTNkL2Jsb2IvbWFzdGVyL0xJQ0VOU0V8R05VIEdQTHYzfVxyXG4gKi9cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5jb25zdCBpbmRleF8xID0gcmVxdWlyZShcIkBlbmFibGUzZC90aHJlZS13cmFwcGVyL2Rpc3QvaW5kZXhcIik7XHJcbmNvbnN0IHR5cGVzXzEgPSByZXF1aXJlKFwiQGVuYWJsZTNkL2NvbW1vbi9kaXN0L3R5cGVzXCIpO1xyXG5jb25zdCBsb2dnZXJfMSA9IHJlcXVpcmUoXCJAZW5hYmxlM2QvY29tbW9uL2Rpc3QvbG9nZ2VyXCIpO1xyXG5jbGFzcyBIZWlnaHRNYXAge1xyXG4gICAgY29uc3RydWN0b3Ioc2NlbmUpIHtcclxuICAgICAgICB0aGlzLnNjZW5lID0gc2NlbmU7XHJcbiAgICB9XHJcbiAgICBhZGQodGV4dHVyZSwgY29uZmlnID0ge30pIHtcclxuICAgICAgICBjb25zdCBoZWlnaHRNYXAgPSB0aGlzLm1ha2UodGV4dHVyZSwgY29uZmlnKTtcclxuICAgICAgICBpZiAoaGVpZ2h0TWFwKVxyXG4gICAgICAgICAgICB0aGlzLnNjZW5lLmFkZChoZWlnaHRNYXApO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgbG9nZ2VyXzEuZGVmYXVsdCgnQ291bGQgbm90IG1ha2UgaGVpZ2h0bWFwJyk7XHJcbiAgICAgICAgcmV0dXJuIGhlaWdodE1hcDtcclxuICAgIH1cclxuICAgIG1ha2UodGV4dHVyZSwgY29uZmlnID0ge30pIHtcclxuICAgICAgICAvLyB2YXIgc3BhY2luZ1ggPSAzXHJcbiAgICAgICAgLy8gdmFyIHNwYWNpbmdaID0gM1xyXG4gICAgICAgIC8vIHZhciBoZWlnaHRPZmZzZXQgPSAyXHJcbiAgICAgICAgY29uc3QgeyBpbWFnZSB9ID0gdGV4dHVyZTtcclxuICAgICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IGltYWdlO1xyXG4gICAgICAgIGNvbnN0IHsgY29sb3JTY2FsZSB9ID0gY29uZmlnO1xyXG4gICAgICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xyXG4gICAgICAgIGNhbnZhcy53aWR0aCA9IHdpZHRoO1xyXG4gICAgICAgIGNhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7XHJcbiAgICAgICAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcbiAgICAgICAgaWYgKCFjdHgpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICBjdHguZHJhd0ltYWdlKHRleHR1cmUuaW1hZ2UsIDAsIDApO1xyXG4gICAgICAgIGNvbnN0IHBpeGVsID0gY3R4LmdldEltYWdlRGF0YSgwLCAwLCB3aWR0aCwgaGVpZ2h0KTtcclxuICAgICAgICAvLyBnZW9tZXRyeVxyXG4gICAgICAgIGNvbnN0IHBsYW5lID0gbmV3IGluZGV4XzEuUGxhbmVHZW9tZXRyeSgxMCwgMTAsIHdpZHRoIC0gMSwgaGVpZ2h0IC0gMSk7XHJcbiAgICAgICAgLy8gbWF0ZXJpYWxcclxuICAgICAgICBsZXQgbWF0ZXJpYWxDb25maWcgPSB7IGNvbG9yOiAweGNjY2NjYywgc2lkZTogaW5kZXhfMS5Eb3VibGVTaWRlIH07XHJcbiAgICAgICAgaWYgKGNvbG9yU2NhbGUpXHJcbiAgICAgICAgICAgIG1hdGVyaWFsQ29uZmlnID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBtYXRlcmlhbENvbmZpZyksIHsgdmVydGV4Q29sb3JzOiBpbmRleF8xLkZhY2VDb2xvcnMgfSk7XHJcbiAgICAgICAgY29uc3QgbWF0ZXJpYWwgPSBuZXcgaW5kZXhfMS5NZXNoUGhvbmdNYXRlcmlhbChtYXRlcmlhbENvbmZpZyk7XHJcbiAgICAgICAgLy8gbWVzaFxyXG4gICAgICAgIGNvbnN0IG1lc2ggPSBuZXcgdHlwZXNfMS5FeHRlbmRlZE1lc2gocGxhbmUsIG1hdGVyaWFsKTtcclxuICAgICAgICBtZXNoLnJlY2VpdmVTaGFkb3cgPSBtZXNoLmNhc3RTaGFkb3cgPSB0cnVlO1xyXG4gICAgICAgIG1lc2guc2hhcGUgPSAnY29uY2F2ZSc7XHJcbiAgICAgICAgLy8gYWRqdXN0IGFsbCB6IHZhbHVlc1xyXG4gICAgICAgIGNvbnN0IGdlbyA9IG1lc2guZ2VvbWV0cnk7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBnZW8udmVydGljZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgZ2VvLnZlcnRpY2VzW2ldLnogPSBwaXhlbC5kYXRhW2kgKiA0XSAvIDEyMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gaGVscGVyIGZ1bmN0aW9uIHRvIGdldCB0aGUgaGlnaGVzdCBwb2ludFxyXG4gICAgICAgIGNvbnN0IGdldEhpZ2hQb2ludCA9IChnZW9tZXRyeSwgZmFjZSkgPT4ge1xyXG4gICAgICAgICAgICB2YXIgdjEgPSBnZW9tZXRyeS52ZXJ0aWNlc1tmYWNlLmFdLno7XHJcbiAgICAgICAgICAgIHZhciB2MiA9IGdlb21ldHJ5LnZlcnRpY2VzW2ZhY2UuYl0uejtcclxuICAgICAgICAgICAgdmFyIHYzID0gZ2VvbWV0cnkudmVydGljZXNbZmFjZS5jXS56O1xyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5tYXgodjEsIHYyLCB2Myk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvLyBhcHBseSBjb2xvciBzY2FsZSBpZiBhdmFpbGFibGVcclxuICAgICAgICBpZiAoY29sb3JTY2FsZSlcclxuICAgICAgICAgICAgZ2VvLmZhY2VzLmZvckVhY2goZmFjZSA9PiAoZmFjZS5jb2xvciA9IG5ldyBpbmRleF8xLkNvbG9yKGNvbG9yU2NhbGUoZ2V0SGlnaFBvaW50KGdlbywgZmFjZSkpLmhleCgpKSkpO1xyXG4gICAgICAgIG1lc2gucm90YXRlWCgtTWF0aC5QSSAvIDIpO1xyXG4gICAgICAgIG1lc2gudXBkYXRlTWF0cml4KCk7XHJcbiAgICAgICAgcGxhbmUuY29tcHV0ZUZhY2VOb3JtYWxzKCk7XHJcbiAgICAgICAgcGxhbmUuY29tcHV0ZVZlcnRleE5vcm1hbHMoKTtcclxuICAgICAgICBtZXNoLm5hbWUgPSAnaGVpZ2h0bWFwJztcclxuICAgICAgICByZXR1cm4gbWVzaDtcclxuICAgIH1cclxufVxyXG5leHBvcnRzLmRlZmF1bHQgPSBIZWlnaHRNYXA7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWhlaWdodG1hcC5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcclxuLyoqXHJcbiAqIFRoZXNlIFBsdWdpbnMgYXJlIG5vdCBpbmNsdWRlZCBpbiB0aGUgQ29yZSB0aHJlZS1ncmFwaGljcyBwYWNrYWdlXHJcbiAqL1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuQ2FtZXJhcyA9IGV4cG9ydHMuSGF2ZVNvbWVGdW4gPSBleHBvcnRzLldlYlhSID0gZXhwb3J0cy5UcmFuc2Zvcm0gPSBleHBvcnRzLlRleHR1cmVDdWJlID0gZXhwb3J0cy5NaXNjID0gZXhwb3J0cy5NaXhlcnMgPSBleHBvcnRzLldhcnBTcGVlZCA9IGV4cG9ydHMuSGVpZ2h0TWFwID0gZXhwb3J0cy5DU0cgPSBleHBvcnRzLkZhY3RvcmllcyA9IGV4cG9ydHMuTGlnaHRzID0gZXhwb3J0cy5Mb2FkZXJzID0gdm9pZCAwO1xyXG5jb25zdCBsb2FkZXJzXzEgPSByZXF1aXJlKFwiLi9sb2FkZXJzXCIpO1xyXG5leHBvcnRzLkxvYWRlcnMgPSBsb2FkZXJzXzEuZGVmYXVsdDtcclxuY29uc3QgbGlnaHRzXzEgPSByZXF1aXJlKFwiLi9saWdodHNcIik7XHJcbmV4cG9ydHMuTGlnaHRzID0gbGlnaHRzXzEuZGVmYXVsdDtcclxuY29uc3QgZmFjdG9yaWVzXzEgPSByZXF1aXJlKFwiQGVuYWJsZTNkL2NvbW1vbi9kaXN0L2ZhY3Rvcmllc1wiKTtcclxuZXhwb3J0cy5GYWN0b3JpZXMgPSBmYWN0b3JpZXNfMS5kZWZhdWx0O1xyXG5jb25zdCBjc2dfMSA9IHJlcXVpcmUoXCIuL2NzZ1wiKTtcclxuZXhwb3J0cy5DU0cgPSBjc2dfMS5kZWZhdWx0O1xyXG5jb25zdCBoZWlnaHRtYXBfMSA9IHJlcXVpcmUoXCIuL2hlaWdodG1hcFwiKTtcclxuZXhwb3J0cy5IZWlnaHRNYXAgPSBoZWlnaHRtYXBfMS5kZWZhdWx0O1xyXG5jb25zdCB3YXJwU3BlZWRfMSA9IHJlcXVpcmUoXCIuL3dhcnBTcGVlZFwiKTtcclxuZXhwb3J0cy5XYXJwU3BlZWQgPSB3YXJwU3BlZWRfMS5kZWZhdWx0O1xyXG5jb25zdCBtaXhlcnNfMSA9IHJlcXVpcmUoXCIuL21peGVyc1wiKTtcclxuZXhwb3J0cy5NaXhlcnMgPSBtaXhlcnNfMS5kZWZhdWx0O1xyXG5jb25zdCBtaXNjXzEgPSByZXF1aXJlKFwiLi9taXNjXCIpO1xyXG5leHBvcnRzLk1pc2MgPSBtaXNjXzEuZGVmYXVsdDtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiVGV4dHVyZUN1YmVcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG1pc2NfMS5UZXh0dXJlQ3ViZTsgfSB9KTtcclxuY29uc3QgdHJhbnNmb3JtXzEgPSByZXF1aXJlKFwiLi90cmFuc2Zvcm1cIik7XHJcbmV4cG9ydHMuVHJhbnNmb3JtID0gdHJhbnNmb3JtXzEuZGVmYXVsdDtcclxuY29uc3Qgd2VieHJfMSA9IHJlcXVpcmUoXCIuL3dlYnhyXCIpO1xyXG5leHBvcnRzLldlYlhSID0gd2VieHJfMS5kZWZhdWx0O1xyXG5jb25zdCBoYXZlU29tZUZ1bl8xID0gcmVxdWlyZShcIi4vaGF2ZVNvbWVGdW5cIik7XHJcbmV4cG9ydHMuSGF2ZVNvbWVGdW4gPSBoYXZlU29tZUZ1bl8xLmRlZmF1bHQ7XHJcbmNvbnN0IGNhbWVyYXNfMSA9IHJlcXVpcmUoXCIuL2NhbWVyYXNcIik7XHJcbmV4cG9ydHMuQ2FtZXJhcyA9IGNhbWVyYXNfMS5kZWZhdWx0O1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcclxuLyoqXHJcbiAqIEBhdXRob3IgICAgICAgWWFubmljayBEZXViZWwgKGh0dHBzOi8vZ2l0aHViLmNvbS95YW5kZXUpXHJcbiAqIEBjb3B5cmlnaHQgICAgQ29weXJpZ2h0IChjKSAyMDIwIFlhbm5pY2sgRGV1YmVsOyBQcm9qZWN0IFVybDogaHR0cHM6Ly9naXRodWIuY29tL2VuYWJsZTNkL2VuYWJsZTNkXHJcbiAqIEBsaWNlbnNlICAgICAge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9lbmFibGUzZC9lbmFibGUzZC9ibG9iL21hc3Rlci9MSUNFTlNFfEdOVSBHUEx2M31cclxuICovXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuY29uc3QgaW5kZXhfMSA9IHJlcXVpcmUoXCJAZW5hYmxlM2QvdGhyZWUtd3JhcHBlci9kaXN0L2luZGV4XCIpO1xyXG5jb25zdCBpbmRleF8yID0gcmVxdWlyZShcIkBlbmFibGUzZC90aHJlZS13cmFwcGVyL2Rpc3QvaW5kZXhcIik7XHJcbmNvbnN0IGluZGV4XzMgPSByZXF1aXJlKFwiQGVuYWJsZTNkL3RocmVlLXdyYXBwZXIvZGlzdC9pbmRleFwiKTtcclxuY2xhc3MgUG9pbnRMaWdodEhlbHBlciBleHRlbmRzIGluZGV4XzEuT2JqZWN0M0Qge1xyXG4gICAgY29uc3RydWN0b3Ioc2NlbmUsIGxpZ2h0LCBzaXplLCBjb2xvcikge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5zY2VuZSA9IHNjZW5lO1xyXG4gICAgICAgIHRoaXMubGlnaHQgPSBsaWdodDtcclxuICAgICAgICB0aGlzLnNpemUgPSBzaXplO1xyXG4gICAgICAgIHRoaXMuY29sb3IgPSBjb2xvcjtcclxuICAgICAgICB0aGlzLmdlbyA9IG5ldyBpbmRleF8xLlNwaGVyZUJ1ZmZlckdlb21ldHJ5KHNpemUgfHwgMC4yLCAxNiwgOCk7XHJcbiAgICAgICAgdGhpcy5tYXQgPSBuZXcgaW5kZXhfMS5NZXNoQmFzaWNNYXRlcmlhbCh7IGNvbG9yOiBjb2xvciB8fCBsaWdodC5jb2xvciB9KTtcclxuICAgICAgICB0aGlzLm1lc2ggPSBuZXcgaW5kZXhfMS5NZXNoKHRoaXMuZ2VvLCB0aGlzLm1hdCk7XHJcbiAgICAgICAgdGhpcy5hZGQodGhpcy5tZXNoKTtcclxuICAgICAgICBsaWdodC5hZGQodGhpcyk7XHJcbiAgICB9XHJcbiAgICBkaXNwb3NlKCkge1xyXG4gICAgICAgIHRoaXMubWVzaC5nZW9tZXRyeS5kaXNwb3NlKCk7XHJcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHRoaXMubWVzaC5tYXRlcmlhbCkpXHJcbiAgICAgICAgICAgIHRoaXMubWVzaC5tYXRlcmlhbC5kaXNwb3NlKCk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB0aGlzLm1lc2gubWF0ZXJpYWwuZm9yRWFjaChtID0+IG0uZGlzcG9zZSgpKTtcclxuICAgICAgICB0aGlzLnJlbW92ZSh0aGlzLm1lc2gpO1xyXG4gICAgfVxyXG4gICAgdXBkYXRlKCkgeyB9XHJcbn1cclxuY2xhc3MgTGlnaHRzIHtcclxuICAgIGNvbnN0cnVjdG9yKHNjZW5lKSB7XHJcbiAgICAgICAgdGhpcy5zY2VuZSA9IHNjZW5lO1xyXG4gICAgfVxyXG4gICAgZ2V0IGhlbHBlcigpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBkaXJlY3Rpb25hbExpZ2h0SGVscGVyOiAobGlnaHQsIHNpemUsIGNvbG9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBoZWxwZXIgPSBuZXcgaW5kZXhfMy5EaXJlY3Rpb25hbExpZ2h0SGVscGVyKGxpZ2h0LCBzaXplLCBjb2xvcik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjZW5lLmFkZChoZWxwZXIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGhlbHBlcjtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc3BvdExpZ2h0SGVscGVyOiAobGlnaHQsIGNvbG9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBoZWxwZXIgPSBuZXcgaW5kZXhfMy5TcG90TGlnaHRIZWxwZXIobGlnaHQsIGNvbG9yKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2NlbmUuYWRkKGhlbHBlcik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaGVscGVyO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBwb2ludExpZ2h0SGVscGVyOiAobGlnaHQsIHNpemUsIGNvbG9yKSA9PiBuZXcgUG9pbnRMaWdodEhlbHBlcih0aGlzLnNjZW5lLCBsaWdodCwgc2l6ZSwgY29sb3IpXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIGRpcmVjdGlvbmFsTGlnaHQob3B0aW9ucyA9IHt9KSB7XHJcbiAgICAgICAgY29uc3QgeyBjb2xvciA9IDB4ZmZmZmZmLCBpbnRlbnNpdHkgPSAxIH0gPSBvcHRpb25zO1xyXG4gICAgICAgIGNvbnN0IGxpZ2h0ID0gbmV3IGluZGV4XzIuRGlyZWN0aW9uYWxMaWdodChjb2xvciwgaW50ZW5zaXR5KTtcclxuICAgICAgICBsaWdodC5jYXN0U2hhZG93ID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnNjZW5lLmFkZChsaWdodCk7XHJcbiAgICAgICAgcmV0dXJuIGxpZ2h0O1xyXG4gICAgfVxyXG4gICAgaGVtaXNwaGVyZUxpZ2h0KG9wdGlvbnMgPSB7fSkge1xyXG4gICAgICAgIGNvbnN0IHsgc2t5Q29sb3IgPSAweGZmZmZmZiwgZ3JvdW5kQ29sb3IgPSAweGZmZmZmZiwgaW50ZW5zaXR5ID0gMSB9ID0gb3B0aW9ucztcclxuICAgICAgICBjb25zdCBsaWdodCA9IG5ldyBpbmRleF8yLkhlbWlzcGhlcmVMaWdodChza3lDb2xvciwgZ3JvdW5kQ29sb3IsIGludGVuc2l0eSk7XHJcbiAgICAgICAgdGhpcy5zY2VuZS5hZGQobGlnaHQpO1xyXG4gICAgICAgIHJldHVybiBsaWdodDtcclxuICAgIH1cclxuICAgIGFtYmllbnRMaWdodChvcHRpb25zID0ge30pIHtcclxuICAgICAgICBjb25zdCB7IGNvbG9yID0gMHhmZmZmZmYsIGludGVuc2l0eSA9IDEgfSA9IG9wdGlvbnM7XHJcbiAgICAgICAgY29uc3QgbGlnaHQgPSBuZXcgaW5kZXhfMi5BbWJpZW50TGlnaHQoY29sb3IsIGludGVuc2l0eSk7XHJcbiAgICAgICAgdGhpcy5zY2VuZS5hZGQobGlnaHQpO1xyXG4gICAgICAgIHJldHVybiBsaWdodDtcclxuICAgIH1cclxuICAgIHBvaW50TGlnaHQob3B0aW9ucyA9IHt9KSB7XHJcbiAgICAgICAgY29uc3QgeyBjb2xvciA9IDB4ZmZmZmZmLCBpbnRlbnNpdHkgPSAxLCBkaXN0YW5jZSA9IDAsIGRlY2F5ID0gMSB9ID0gb3B0aW9ucztcclxuICAgICAgICBjb25zdCBsaWdodCA9IG5ldyBpbmRleF8yLlBvaW50TGlnaHQoY29sb3IsIGludGVuc2l0eSwgZGlzdGFuY2UsIGRlY2F5KTtcclxuICAgICAgICBsaWdodC5jYXN0U2hhZG93ID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnNjZW5lLmFkZChsaWdodCk7XHJcbiAgICAgICAgcmV0dXJuIGxpZ2h0O1xyXG4gICAgfVxyXG4gICAgc3BvdExpZ2h0KG9wdGlvbnMgPSB7fSkge1xyXG4gICAgICAgIGNvbnN0IHsgY29sb3IgPSAweGZmZmZmZiwgaW50ZW5zaXR5ID0gMSwgZGlzdGFuY2UgPSAwLCBhbmdsZSA9IE1hdGguUEkgLyA4LCBwZW51bWJyYSA9IDAsIGRlY2F5ID0gMSB9ID0gb3B0aW9ucztcclxuICAgICAgICBjb25zdCBsaWdodCA9IG5ldyBpbmRleF8yLlNwb3RMaWdodChjb2xvciwgaW50ZW5zaXR5LCBkaXN0YW5jZSwgYW5nbGUsIHBlbnVtYnJhLCBkZWNheSk7XHJcbiAgICAgICAgbGlnaHQuY2FzdFNoYWRvdyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5zY2VuZS5hZGQobGlnaHQpO1xyXG4gICAgICAgIHJldHVybiBsaWdodDtcclxuICAgIH1cclxuICAgIHJlY3RBcmVhTGlnaHQob3B0aW9ucyA9IHt9KSB7XHJcbiAgICAgICAgY29uc3QgeyBjb2xvciA9IDB4ZmZmZmZmLCBpbnRlbnNpdHkgPSAxLCB3aWR0aCA9IDEwLCBoZWlnaHQgPSAxMCB9ID0gb3B0aW9ucztcclxuICAgICAgICBjb25zdCBsaWdodCA9IG5ldyBpbmRleF8yLlJlY3RBcmVhTGlnaHQoY29sb3IsIGludGVuc2l0eSwgd2lkdGgsIGhlaWdodCk7XHJcbiAgICAgICAgdGhpcy5zY2VuZS5hZGQobGlnaHQpO1xyXG4gICAgICAgIHJldHVybiBsaWdodDtcclxuICAgIH1cclxufVxyXG5leHBvcnRzLmRlZmF1bHQgPSBMaWdodHM7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWxpZ2h0cy5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcclxuLyoqXHJcbiAqIEBhdXRob3IgICAgICAgWWFubmljayBEZXViZWwgKGh0dHBzOi8vZ2l0aHViLmNvbS95YW5kZXUpXHJcbiAqIEBjb3B5cmlnaHQgICAgQ29weXJpZ2h0IChjKSAyMDIwIFlhbm5pY2sgRGV1YmVsOyBQcm9qZWN0IFVybDogaHR0cHM6Ly9naXRodWIuY29tL2VuYWJsZTNkL2VuYWJsZTNkXHJcbiAqIEBsaWNlbnNlICAgICAge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9lbmFibGUzZC9lbmFibGUzZC9ibG9iL21hc3Rlci9MSUNFTlNFfEdOVSBHUEx2M31cclxuICovXHJcbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5jb25zdCBpbmRleF8xID0gcmVxdWlyZShcIkBlbmFibGUzZC90aHJlZS13cmFwcGVyL2Rpc3QvaW5kZXhcIik7XHJcbmNsYXNzIExvYWRlcnMge1xyXG4gICAgY29uc3RydWN0b3IoY2FjaGUsIHRleHR1cmVBbmlzb3Ryb3B5KSB7XHJcbiAgICAgICAgdGhpcy5jYWNoZSA9IGNhY2hlO1xyXG4gICAgICAgIHRoaXMudGV4dHVyZUFuaXNvdHJvcHkgPSB0ZXh0dXJlQW5pc290cm9weTtcclxuICAgIH1cclxuICAgIGdldCBmaWxlTG9hZGVyKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5fZmlsZUxvYWRlcilcclxuICAgICAgICAgICAgdGhpcy5fZmlsZUxvYWRlciA9IG5ldyBpbmRleF8xLkZpbGVMb2FkZXIoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZmlsZUxvYWRlcjtcclxuICAgIH1cclxuICAgIGdldCBpbWFnZUxvYWRlcigpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX2ltZ0xvYWRlcilcclxuICAgICAgICAgICAgdGhpcy5faW1nTG9hZGVyID0gbmV3IGluZGV4XzEuSW1hZ2VMb2FkZXIoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5faW1nTG9hZGVyO1xyXG4gICAgfVxyXG4gICAgZ2V0IHN2Z0xvYWRlcigpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX3N2Z0xvYWRlcilcclxuICAgICAgICAgICAgdGhpcy5fc3ZnTG9hZGVyID0gbmV3IGluZGV4XzEuU1ZHTG9hZGVyKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N2Z0xvYWRlcjtcclxuICAgIH1cclxuICAgIGdldCB0ZXh0dXJlTG9hZGVyKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5fdGV4dHVyZUxvYWRlcilcclxuICAgICAgICAgICAgdGhpcy5fdGV4dHVyZUxvYWRlciA9IG5ldyBpbmRleF8xLlRleHR1cmVMb2FkZXIoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdGV4dHVyZUxvYWRlcjtcclxuICAgIH1cclxuICAgIGdldCBvYmplY3RMb2FkZXIoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9vYmplY3RMb2FkZXIpXHJcbiAgICAgICAgICAgIHRoaXMuX29iamVjdExvYWRlciA9IG5ldyBpbmRleF8xLk9iamVjdExvYWRlcigpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9vYmplY3RMb2FkZXI7XHJcbiAgICB9XHJcbiAgICBnZXQgZ2x0ZkxvYWRlcigpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX2dsdGZMb2FkZXIpXHJcbiAgICAgICAgICAgIHRoaXMuX2dsdGZMb2FkZXIgPSBuZXcgaW5kZXhfMS5HTFRGTG9hZGVyKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dsdGZMb2FkZXI7XHJcbiAgICB9XHJcbiAgICBnZXQgZmJ4TG9hZGVyKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5fZmJ4TG9hZGVyKVxyXG4gICAgICAgICAgICB0aGlzLl9mYnhMb2FkZXIgPSBuZXcgaW5kZXhfMS5GQlhMb2FkZXIoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZmJ4TG9hZGVyO1xyXG4gICAgfVxyXG4gICAgcHJlbG9hZChrZXksIHVybCkge1xyXG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2FjaGUuYWRkKGtleSwgdXJsKTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaXNNb2RlbCA9IC9cXC5mYngkfFxcLmdsYiR8XFwuZ2x0ZiQvLnRlc3QodXJsKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGlzVGV4dHVyZSA9IC9cXC5qcGU/ZyR8XFwucG5nJC8udGVzdCh1cmwpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGlzVGV4dHVyZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGV4dHVyZUxvYWRlci5sb2FkKHVybCwgdGV4dHVyZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHRleHR1cmUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzTW9kZWwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmlsZUxvYWRlci5zZXRSZXNwb25zZVR5cGUoJ2FycmF5YnVmZmVyJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5maWxlTG9hZGVyLmxvYWQodXJsLCBmaWxlID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoZmlsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZmlsZSh1cmwpIHtcclxuICAgICAgICBjb25zdCBrZXkgPSB0aGlzLmNhY2hlLmdldCh1cmwpO1xyXG4gICAgICAgIHVybCA9IGtleSA/IGtleSA6IHVybDtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuZmlsZUxvYWRlci5sb2FkKHVybCwgZmlsZSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShmaWxlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBzdmcodXJsKSB7XHJcbiAgICAgICAgY29uc3Qga2V5ID0gdGhpcy5jYWNoZS5nZXQodXJsKTtcclxuICAgICAgICB1cmwgPSBrZXkgPyBrZXkgOiB1cmw7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnN2Z0xvYWRlci5sb2FkKHVybCwgc3ZnID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHN2Zyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgdGV4dHVyZSh1cmwpIHtcclxuICAgICAgICBjb25zdCBpc0Jhc2U2NCA9IC9eZGF0YTppbWFnZVxcL1tcXFNdKztiYXNlNjQsL2dtLnRlc3QodXJsKTtcclxuICAgICAgICAvLyB3ZSBkbyBub3Qgd2FudCB0byBjYWNoZSBiYXNlNjQgaW1hZ2VzXHJcbiAgICAgICAgaWYgKCFpc0Jhc2U2NCkge1xyXG4gICAgICAgICAgICBjb25zdCBrZXkgPSB0aGlzLmNhY2hlLmdldCh1cmwpO1xyXG4gICAgICAgICAgICB1cmwgPSBrZXkgPyBrZXkgOiB1cmw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcclxuICAgICAgICAgICAgdGhpcy50ZXh0dXJlTG9hZGVyLmxvYWQodXJsLCAodGV4dHVyZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gb3B0aW9uc1xyXG4gICAgICAgICAgICAgICAgdGV4dHVyZS5hbmlzb3Ryb3B5ID0gdGhpcy50ZXh0dXJlQW5pc290cm9weTtcclxuICAgICAgICAgICAgICAgIHRleHR1cmUuZm9ybWF0ID0gaW5kZXhfMS5SR0JBRm9ybWF0O1xyXG4gICAgICAgICAgICAgICAgdGV4dHVyZS5uZWVkc1VwZGF0ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKHRleHR1cmUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8vIGV4YW1wbGVzOiBodHRwczovL2dpdGh1Yi5jb20vbXJkb29iL3RocmVlLmpzL3dpa2kvSlNPTi1PYmplY3QtU2NlbmUtZm9ybWF0LTRcclxuICAgIG9iamVjdCh1cmwpIHtcclxuICAgICAgICBjb25zdCBrZXkgPSB0aGlzLmNhY2hlLmdldCh1cmwpO1xyXG4gICAgICAgIHVybCA9IGtleSA/IGtleSA6IHVybDtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMub2JqZWN0TG9hZGVyLmxvYWQodXJsLCAoanNvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShqc29uKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBnbHRmKHVybCkge1xyXG4gICAgICAgIGNvbnN0IGtleSA9IHRoaXMuY2FjaGUuZ2V0KHVybCk7XHJcbiAgICAgICAgdXJsID0ga2V5ID8ga2V5IDogdXJsO1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcclxuICAgICAgICAgICAgdGhpcy5nbHRmTG9hZGVyLmxvYWQodXJsLCAoZ2x0ZikgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShnbHRmKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBmYngodXJsKSB7XHJcbiAgICAgICAgY29uc3Qga2V5ID0gdGhpcy5jYWNoZS5nZXQodXJsKTtcclxuICAgICAgICB1cmwgPSBrZXkgPyBrZXkgOiB1cmw7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmZieExvYWRlci5sb2FkKHVybCwgKGZieCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShmYngpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5leHBvcnRzLmRlZmF1bHQgPSBMb2FkZXJzO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1sb2FkZXJzLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuVGV4dHVyZUN1YmUgPSB2b2lkIDA7XHJcbi8vIG1pc2NcclxuY29uc3Qgd2F0ZXJfMSA9IHJlcXVpcmUoXCJAZW5hYmxlM2QvY29tbW9uL2Rpc3QvbWlzYy93YXRlclwiKTtcclxuY29uc3QgZGlzdF8xID0gcmVxdWlyZShcIkBlbmFibGUzZC90aHJlZS13cmFwcGVyL2Rpc3RcIik7XHJcbmNsYXNzIE1pc2Mge1xyXG4gICAgY29uc3RydWN0b3Ioc2NlbmUsIHJlbmRlcmVyLCBmYWN0b3JpZXMpIHtcclxuICAgICAgICB0aGlzLnNjZW5lID0gc2NlbmU7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgICAgIHRoaXMuZmFjdG9yaWVzID0gZmFjdG9yaWVzO1xyXG4gICAgfVxyXG4gICAgd2F0ZXIoY29uZmlnID0ge30pIHtcclxuICAgICAgICB3YXRlcl8xLmFkZFdhdGVyKHRoaXMuc2NlbmUsIHRoaXMucmVuZGVyZXIsIGNvbmZpZyk7XHJcbiAgICB9XHJcbiAgICB0ZXh0dXJlQ3ViZSh0ZXh0dXJlcykge1xyXG4gICAgICAgIGlmICh0ZXh0dXJlcy5sZW5ndGggIT09IDYpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tlbmFibGUzZF0gWW91IG5lZWQgdG8gcGFzcyA2IHVybHMgdG8gdGV4dHVyZUN1YmUoKScpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB0ZXh0dXJlQ3ViZSA9IG5ldyBUZXh0dXJlQ3ViZSgpO1xyXG4gICAgICAgIHRleHR1cmVzLmZvckVhY2goKHRleHR1cmUsIGkpID0+IHtcclxuICAgICAgICAgICAgdGV4dHVyZS53cmFwUyA9IHRleHR1cmUud3JhcFQgPSBkaXN0XzEuUmVwZWF0V3JhcHBpbmc7XHJcbiAgICAgICAgICAgIGNvbnN0IG1hdGVyaWFsID0gdGhpcy5mYWN0b3JpZXMuYWRkLm1hdGVyaWFsKHsgcGhvbmc6IHsgbWFwOiB0ZXh0dXJlIH0gfSk7XHJcbiAgICAgICAgICAgIHRleHR1cmVDdWJlLm1hdGVyaWFsc1tpXSA9IG1hdGVyaWFsO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB0ZXh0dXJlQ3ViZTtcclxuICAgIH1cclxufVxyXG5leHBvcnRzLmRlZmF1bHQgPSBNaXNjO1xyXG5jbGFzcyBUZXh0dXJlQ3ViZSB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLm1hdGVyaWFscyA9IG5ldyBBcnJheSg2KTtcclxuICAgIH1cclxuICAgIGdldCB0ZXh0dXJlKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGxlZnQ6IHRoaXMuZ2V0VGV4dHVyZSgwKSxcclxuICAgICAgICAgICAgcmlnaHQ6IHRoaXMuZ2V0VGV4dHVyZSgxKSxcclxuICAgICAgICAgICAgdXA6IHRoaXMuZ2V0VGV4dHVyZSgyKSxcclxuICAgICAgICAgICAgZG93bjogdGhpcy5nZXRUZXh0dXJlKDMpLFxyXG4gICAgICAgICAgICBmcm9udDogdGhpcy5nZXRUZXh0dXJlKDQpLFxyXG4gICAgICAgICAgICBiYWNrOiB0aGlzLmdldFRleHR1cmUoNSlcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgZ2V0VGV4dHVyZShpKSB7XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIHJldHVybiB0aGlzLm1hdGVyaWFsc1tpXS5tYXA7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0cy5UZXh0dXJlQ3ViZSA9IFRleHR1cmVDdWJlO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1taXNjLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmNvbnN0IHR5cGVzXzEgPSByZXF1aXJlKFwiQGVuYWJsZTNkL2NvbW1vbi9kaXN0L3R5cGVzXCIpO1xyXG5jbGFzcyBNaXhlcnMge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5fbWl4ZXJzID0gW107XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZSBhbiBBbmltYXRpb24gTWl4ZXIgYW5kIGFkcyBpdCB0byB0aGUgbWl4ZXJzIGFycmF5XHJcbiAgICAgKi9cclxuICAgIGFuaW1hdGlvbk1peGVyKHJvb3QpIHtcclxuICAgICAgICBjb25zdCBtaXhlciA9IG5ldyB0eXBlc18xLkFuaW1hdGlvbk1peGVyKHJvb3QpO1xyXG4gICAgICAgIHRoaXMubWl4ZXJzLmFkZChtaXhlcik7XHJcbiAgICAgICAgcmV0dXJuIG1peGVyO1xyXG4gICAgfVxyXG4gICAgZ2V0IG1peGVycygpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBjcmVhdGU6IChyb290KSA9PiB0aGlzLmFuaW1hdGlvbk1peGVyKHJvb3QpLFxyXG4gICAgICAgICAgICBhZGQ6IChhbmltYXRpb25NaXhlcikgPT4gdGhpcy5fbWl4ZXJzLnB1c2goYW5pbWF0aW9uTWl4ZXIpLFxyXG4gICAgICAgICAgICBnZXQ6ICgpID0+IHRoaXMuX21peGVycyxcclxuICAgICAgICAgICAgdXBkYXRlOiAoZGVsdGEpID0+IHsgdmFyIF9hOyByZXR1cm4gKF9hID0gdGhpcy5fbWl4ZXJzKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZm9yRWFjaChtaXhlciA9PiBtaXhlci51cGRhdGUoZGVsdGEgLyAxMDAwKSk7IH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydHMuZGVmYXVsdCA9IE1peGVycztcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWl4ZXJzLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmNvbnN0IGluZGV4XzEgPSByZXF1aXJlKFwiQGVuYWJsZTNkL3RocmVlLXdyYXBwZXIvZGlzdC9pbmRleFwiKTtcclxuY29uc3QgaW5kZXhfMiA9IHJlcXVpcmUoXCJAZW5hYmxlM2QvdGhyZWUtd3JhcHBlci9kaXN0L2luZGV4XCIpO1xyXG4vKipcclxuICogQGF1dGhvciAgICAgICBZYW5uaWNrIERldWJlbCAoaHR0cHM6Ly9naXRodWIuY29tL3lhbmRldSlcclxuICogQGNvcHlyaWdodCAgICBDb3B5cmlnaHQgKGMpIDIwMjAgWWFubmljayBEZXViZWw7IFByb2plY3QgVXJsOiBodHRwczovL2dpdGh1Yi5jb20vZW5hYmxlM2QvZW5hYmxlM2RcclxuICogQGxpY2Vuc2UgICAgICB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2VuYWJsZTNkL2VuYWJsZTNkL2Jsb2IvbWFzdGVyL0xJQ0VOU0V8R05VIEdQTHYzfVxyXG4gKi9cclxuY2xhc3MgVHJhbnNmb3JtIHtcclxuICAgIGNvbnN0cnVjdG9yKGNhbWVyYSwgcmVuZGVyZXIpIHtcclxuICAgICAgICB0aGlzLmNhbWVyYSA9IGNhbWVyYTtcclxuICAgICAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB9XHJcbiAgICBnZW9tZXRyeVRvQnVmZmVyR2VvbWV0cnkoZ2VvbWV0cnkpIHtcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgaWYgKGdlb21ldHJ5LmlzR2VvbWV0cnkpXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgaW5kZXhfMS5CdWZmZXJHZW9tZXRyeSgpLmZyb21HZW9tZXRyeShnZW9tZXRyeSk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICByZXR1cm4gZ2VvbWV0cnk7XHJcbiAgICB9XHJcbiAgICBidWZmZXJHZW9tZXRyeVRvR2VvbWV0cnkoYnVmZmVyR2VvbWV0cnkpIHtcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgaWYgKGJ1ZmZlckdlb21ldHJ5LmlzQnVmZmVyR2VvbWV0cnkpXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgaW5kZXhfMS5HZW9tZXRyeSgpLmZyb21CdWZmZXJHZW9tZXRyeShidWZmZXJHZW9tZXRyeSk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICByZXR1cm4gYnVmZmVyR2VvbWV0cnk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFRyYW5zZm9ybXMgeW91ciBzdmcgZmlsZXMgdG8gcGF0aHMuXHJcbiAgICAgKi9cclxuICAgIGZyb21TVkd0b1NoYXBlKHN2ZywgaXNDQ1cgPSBmYWxzZSwgbm9Ib2xlcykge1xyXG4gICAgICAgIGlmIChzdmcpIHtcclxuICAgICAgICAgICAgY29uc3Qgc3ZnTG9hZGVyID0gbmV3IGluZGV4XzIuU1ZHTG9hZGVyKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNoYXBlcyA9IFtdO1xyXG4gICAgICAgICAgICBzdmdMb2FkZXIucGFyc2Uoc3ZnKS5wYXRocy5mb3JFYWNoKHBhdGggPT4ge1xyXG4gICAgICAgICAgICAgICAgcGF0aC50b1NoYXBlcyhpc0NDVywgbm9Ib2xlcykuZm9yRWFjaChzaGFwZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2hhcGVzLnB1c2goc2hhcGUpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gc2hhcGVzO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcbiAgICBmcm9tM2R0bzJkKHBvc2l0aW9uKSB7XHJcbiAgICAgICAgY29uc3QgdmVjdG9yMyA9IG5ldyBpbmRleF8xLlZlY3RvcjMocG9zaXRpb24ueCwgcG9zaXRpb24ueSwgcG9zaXRpb24ueik7XHJcbiAgICAgICAgY29uc3QgY2FudmFzID0gdGhpcy5yZW5kZXJlci5kb21FbGVtZW50O1xyXG4gICAgICAgIC8vIG1hcCB0byBub3JtYWxpemVkIGRldmljZSBjb29yZGluYXRlIChOREMpIHNwYWNlXHJcbiAgICAgICAgdGhpcy5jYW1lcmEudXBkYXRlTWF0cml4V29ybGQoKTtcclxuICAgICAgICB2ZWN0b3IzLnByb2plY3QodGhpcy5jYW1lcmEpO1xyXG4gICAgICAgIC8vIG1hcCB0byAyRCBzY3JlZW4gc3BhY2VcclxuICAgICAgICBjb25zdCB4ID0gTWF0aC5yb3VuZCgodmVjdG9yMy54ICsgMSkgKiAoY2FudmFzLndpZHRoIC8gMikpO1xyXG4gICAgICAgIGNvbnN0IHkgPSBNYXRoLnJvdW5kKCgtdmVjdG9yMy55ICsgMSkgKiAoY2FudmFzLmhlaWdodCAvIDIpKTtcclxuICAgICAgICByZXR1cm4gbmV3IGluZGV4XzEuVmVjdG9yMih4LCB5KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB4IFggY29vcmRpbmF0ZSBpbiBub3JtYWxpemVkIGRldmljZSBjb29yZGluYXRlIChOREMpICgtMSB0byArMSkuXHJcbiAgICAgKiBAcGFyYW0geSBZIGNvb3JkaW5hdGUgaW4gbm9ybWFsaXplZCBkZXZpY2UgY29vcmRpbmF0ZSAoTkRDKSAoLTEgdG8gKzEpLlxyXG4gICAgICogQHBhcmFtIGRpc3RhbmNlRnJvbUNhbWVyYSBUaGUgZGlzdGFuY2UgZnJvbSB0aGUgY2FtZXJhLlxyXG4gICAgICovXHJcbiAgICBmcm9tMmR0bzNkKHgsIHksIGRpc3RhbmNlRnJvbUNhbWVyYSkge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICAvLyBpbml0aWFsaXplIHRlbXBvcmFyeSB2YXJpYWJsZXNcclxuICAgICAgICBpZiAoIXRoaXMudG1wUGxhbmUpIHtcclxuICAgICAgICAgICAgY29uc3QgZ2VvID0gbmV3IGluZGV4XzEuUGxhbmVCdWZmZXJHZW9tZXRyeSgxMDAwMCwgMTAwMDApO1xyXG4gICAgICAgICAgICBjb25zdCBtYXQgPSBuZXcgaW5kZXhfMS5NZXNoQmFzaWNNYXRlcmlhbCh7IHRyYW5zcGFyZW50OiB0cnVlLCBvcGFjaXR5OiAwLjI1IH0pO1xyXG4gICAgICAgICAgICB0aGlzLnRtcFBsYW5lID0gbmV3IGluZGV4XzEuTWVzaChnZW8sIG1hdCk7XHJcbiAgICAgICAgICAgIHRoaXMudG1wUGxhbmUubmFtZSA9ICdfdG1wX3JheWNhc3RfcGxhbmUnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXRoaXMudG1wUmF5Y2FzdGVyKVxyXG4gICAgICAgICAgICB0aGlzLnRtcFJheWNhc3RlciA9IG5ldyBpbmRleF8xLlJheWNhc3RlcigpO1xyXG4gICAgICAgIGlmICghdGhpcy50bXBWZWN0b3IzKVxyXG4gICAgICAgICAgICB0aGlzLnRtcFZlY3RvcjMgPSBuZXcgaW5kZXhfMS5WZWN0b3IzKCk7XHJcbiAgICAgICAgLy8gaG9sZHMgdGhlIHBvc2l0aW9uIHdlIHdhbnQgdG8gcmV0dXJuIGxhdGVyXHJcbiAgICAgICAgbGV0IHBvc2l0aW9uO1xyXG4gICAgICAgIC8vIGFkZCBwbGFuZSBwYXJhbGxlbCB0byBjYW1lcmFcclxuICAgICAgICB0aGlzLnRtcFBsYW5lLnNldFJvdGF0aW9uRnJvbUV1bGVyKHRoaXMuY2FtZXJhLnJvdGF0aW9uKTtcclxuICAgICAgICBjb25zdCBwID0gdGhpcy5jYW1lcmEucG9zaXRpb247XHJcbiAgICAgICAgdGhpcy50bXBQbGFuZS5wb3NpdGlvbi5zZXQocC54LCBwLnksIHAueik7XHJcbiAgICAgICAgLy8gYWRqdXN0IHRoZSBkaXN0YW5jZSBvZiB0aGUgcGxhbmVcclxuICAgICAgICB0aGlzLmNhbWVyYS5nZXRXb3JsZERpcmVjdGlvbih0aGlzLnRtcFZlY3RvcjMpO1xyXG4gICAgICAgIHRoaXMudG1wUGxhbmUucG9zaXRpb24uYWRkKHRoaXMudG1wVmVjdG9yMy5jbG9uZSgpLm11bHRpcGx5U2NhbGFyKGRpc3RhbmNlRnJvbUNhbWVyYSkpO1xyXG4gICAgICAgIHRoaXMudG1wUGxhbmUudXBkYXRlTWF0cml4KCk7XHJcbiAgICAgICAgdGhpcy50bXBQbGFuZS51cGRhdGVNYXRyaXhXb3JsZCh0cnVlKTtcclxuICAgICAgICAvLyByYXljYXN0XHJcbiAgICAgICAgdGhpcy50bXBSYXljYXN0ZXIuc2V0RnJvbUNhbWVyYSh7IHgsIHkgfSwgdGhpcy5jYW1lcmEpO1xyXG4gICAgICAgIC8vIGNoZWNrIGludGVyc2VjdGlvbiB3aXRoIHBsYW5lXHJcbiAgICAgICAgY29uc3QgaW50ZXJzZWN0cyA9IHRoaXMudG1wUmF5Y2FzdGVyLmludGVyc2VjdE9iamVjdHMoW3RoaXMudG1wUGxhbmVdKTtcclxuICAgICAgICBpZiAoKChfYSA9IGludGVyc2VjdHNbMF0pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5vYmplY3QubmFtZSkgPT09ICdfdG1wX3JheWNhc3RfcGxhbmUnKVxyXG4gICAgICAgICAgICBwb3NpdGlvbiA9IGludGVyc2VjdHNbMF0ucG9pbnQ7XHJcbiAgICAgICAgcmV0dXJuIHBvc2l0aW9uO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydHMuZGVmYXVsdCA9IFRyYW5zZm9ybTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dHJhbnNmb3JtLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn07XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuY29uc3QgaW5kZXhfMSA9IHJlcXVpcmUoXCJAZW5hYmxlM2QvdGhyZWUtd3JhcHBlci9kaXN0L2luZGV4XCIpO1xyXG5jb25zdCBUSFJFRSA9IHJlcXVpcmUoXCJAZW5hYmxlM2QvdGhyZWUtd3JhcHBlci9kaXN0L2luZGV4XCIpO1xyXG5jbGFzcyBXYXJwU3BlZWQge1xyXG4gICAgY29uc3RydWN0b3Ioc2NlbmUsIHJlbmRlcmVyLCBjYW1lcmEsIGxpZ2h0cywgcGh5c2ljcywgbG9hZCwgZmFjdG9yaWVzKSB7XHJcbiAgICAgICAgdGhpcy5zY2VuZSA9IHNjZW5lO1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgICAgICB0aGlzLmNhbWVyYSA9IGNhbWVyYTtcclxuICAgICAgICB0aGlzLmxpZ2h0cyA9IGxpZ2h0cztcclxuICAgICAgICB0aGlzLnBoeXNpY3MgPSBwaHlzaWNzO1xyXG4gICAgICAgIHRoaXMubG9hZCA9IGxvYWQ7XHJcbiAgICAgICAgdGhpcy5mYWN0b3JpZXMgPSBmYWN0b3JpZXM7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEl0IHRha2VzIHRvb2sgbG9uZyB0byBzZXR1cCB0aGUgdGhpcmQgZGltZW5zaW9uIHlvdXIgc2VsZj8gR2V0IHN0YXJ0ZWQgd2l0aCB3YXJwIHNwZWVkIGJ5IHVzaW5nIHRoaXMgZnVuY3Rpb24uXHJcbiAgICAgKiBAcGFyYW0gZmVhdHVyZXMgUGFzcyB0aGUgZmVhdHVyZXMgeW91IHdhbnQgdG8gc2V0dXAuXHJcbiAgICAgKi9cclxuICAgIHdhcnBTcGVlZCguLi5mZWF0dXJlcykge1xyXG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgICAgIGxldCBGZWF0dXJlcyA9IHt9O1xyXG4gICAgICAgICAgICAvLyB0ZXN0IGZvciBuZWdhdGl2ZSBmZWF0dXJlc1xyXG4gICAgICAgICAgICBjb25zdCBuZWdhdGl2ZUZlYXR1cmVzID0gZmVhdHVyZXMuZmlsdGVyKGZlYXR1cmUgPT4gL14tXFx3Ky8udGVzdChmZWF0dXJlKSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGhhc05lZ2F0aXZlRmVhdHVyZXMgPSBuZWdhdGl2ZUZlYXR1cmVzLmxlbmd0aCA+IDAgPyB0cnVlIDogZmFsc2U7XHJcbiAgICAgICAgICAgIC8vIGFkZCBhbGwgZmVhdHVyZXNcclxuICAgICAgICAgICAgaWYgKGZlYXR1cmVzLmxlbmd0aCA9PT0gMCB8fCBoYXNOZWdhdGl2ZUZlYXR1cmVzKVxyXG4gICAgICAgICAgICAgICAgZmVhdHVyZXMgPSBbJ2xpZ2h0JywgJ2NhbWVyYScsICdsb29rQXRDZW50ZXInLCAnZ3JvdW5kJywgJ2dyaWQnLCAnb3JiaXRDb250cm9scycsICdmb2cnLCAnc2t5J107XHJcbiAgICAgICAgICAgIC8vIHJlbW92ZSB0aGUgbmVnYXRpdmUgZmVhdHVyZXNcclxuICAgICAgICAgICAgaWYgKGhhc05lZ2F0aXZlRmVhdHVyZXMpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZlYXR1cmVzVG9SZW1vdmUgPSBuZWdhdGl2ZUZlYXR1cmVzLm1hcChmZWF0dXJlID0+IGZlYXR1cmUuc3Vic3RyKDEpKTtcclxuICAgICAgICAgICAgICAgIGZlYXR1cmVzVG9SZW1vdmUuZm9yRWFjaChmZWF0dXJlID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSBmZWF0dXJlcy5pbmRleE9mKGZlYXR1cmUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZlYXR1cmVzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBUT0RPOiBhZGQgZm9nXHJcbiAgICAgICAgICAgIGlmIChmZWF0dXJlcy5pbmNsdWRlcygnZm9nJykpIHtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZmVhdHVyZXMuaW5jbHVkZXMoJ3NreScpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vbXJkb29iL3RocmVlLmpzL2Jsb2IvbWFzdGVyL2V4YW1wbGVzL3dlYmdsX2xpZ2h0c19oZW1pc3BoZXJlLmh0bWxcclxuICAgICAgICAgICAgICAgIC8vIFNLWURPTUVcclxuICAgICAgICAgICAgICAgIGNvbnN0IHZlcnRleFNoYWRlciA9IFtcclxuICAgICAgICAgICAgICAgICAgICAndmFyeWluZyB2ZWMzIHZXb3JsZFBvc2l0aW9uOycsXHJcbiAgICAgICAgICAgICAgICAgICAgJycsXHJcbiAgICAgICAgICAgICAgICAgICAgJ3ZvaWQgbWFpbigpIHsnLFxyXG4gICAgICAgICAgICAgICAgICAgICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICd2ZWM0IHdvcmxkUG9zaXRpb24gPSBtb2RlbE1hdHJpeCAqIHZlYzQoIHBvc2l0aW9uLCAxLjAgKTsnLFxyXG4gICAgICAgICAgICAgICAgICAgICd2V29ybGRQb3NpdGlvbiA9IHdvcmxkUG9zaXRpb24ueHl6OycsXHJcbiAgICAgICAgICAgICAgICAgICAgJycsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2dsX1Bvc2l0aW9uID0gcHJvamVjdGlvbk1hdHJpeCAqIG1vZGVsVmlld01hdHJpeCAqIHZlYzQoIHBvc2l0aW9uLCAxLjAgKTsnLFxyXG4gICAgICAgICAgICAgICAgICAgICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICd9J1xyXG4gICAgICAgICAgICAgICAgXS5qb2luKCdcXG4nKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZyYWdtZW50U2hhZGVyID0gW1xyXG4gICAgICAgICAgICAgICAgICAgICd1bmlmb3JtIHZlYzMgdG9wQ29sb3I7JyxcclxuICAgICAgICAgICAgICAgICAgICAndW5pZm9ybSB2ZWMzIGJvdHRvbUNvbG9yOycsXHJcbiAgICAgICAgICAgICAgICAgICAgJ3VuaWZvcm0gZmxvYXQgb2Zmc2V0OycsXHJcbiAgICAgICAgICAgICAgICAgICAgJ3VuaWZvcm0gZmxvYXQgZXhwb25lbnQ7JyxcclxuICAgICAgICAgICAgICAgICAgICAnJyxcclxuICAgICAgICAgICAgICAgICAgICAndmFyeWluZyB2ZWMzIHZXb3JsZFBvc2l0aW9uOycsXHJcbiAgICAgICAgICAgICAgICAgICAgJycsXHJcbiAgICAgICAgICAgICAgICAgICAgJ3ZvaWQgbWFpbigpIHsnLFxyXG4gICAgICAgICAgICAgICAgICAgICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICdmbG9hdCBoID0gbm9ybWFsaXplKCB2V29ybGRQb3NpdGlvbiArIG9mZnNldCApLnk7JyxcclxuICAgICAgICAgICAgICAgICAgICAnZ2xfRnJhZ0NvbG9yID0gdmVjNCggbWl4KCBib3R0b21Db2xvciwgdG9wQ29sb3IsIG1heCggcG93KCBtYXgoIGggLCAwLjApLCBleHBvbmVudCApLCAwLjAgKSApLCAxLjAgKTsnLFxyXG4gICAgICAgICAgICAgICAgICAgICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICd9J1xyXG4gICAgICAgICAgICAgICAgXS5qb2luKCdcXG4nKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHVuaWZvcm1zID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRvcENvbG9yOiB7IHZhbHVlOiBuZXcgVEhSRUUuQ29sb3IoMHgwMDc3ZmYpIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgYm90dG9tQ29sb3I6IHsgdmFsdWU6IG5ldyBUSFJFRS5Db2xvcigweGVkZjVmZikgfSxcclxuICAgICAgICAgICAgICAgICAgICBvZmZzZXQ6IHsgdmFsdWU6IDMzIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZXhwb25lbnQ6IHsgdmFsdWU6IDAuNiB9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgdmFyIHNreUdlbyA9IG5ldyBUSFJFRS5TcGhlcmVCdWZmZXJHZW9tZXRyeSg1MDAsIDMyLCAxNSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2t5TWF0ID0gbmV3IFRIUkVFLlNoYWRlck1hdGVyaWFsKHtcclxuICAgICAgICAgICAgICAgICAgICB1bmlmb3JtczogdW5pZm9ybXMsXHJcbiAgICAgICAgICAgICAgICAgICAgdmVydGV4U2hhZGVyOiB2ZXJ0ZXhTaGFkZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgZnJhZ21lbnRTaGFkZXI6IGZyYWdtZW50U2hhZGVyLFxyXG4gICAgICAgICAgICAgICAgICAgIHNpZGU6IFRIUkVFLkJhY2tTaWRlXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHZhciBza3kgPSBuZXcgVEhSRUUuTWVzaChza3lHZW8sIHNreU1hdCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjZW5lLmFkZChza3kpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChmZWF0dXJlcy5pbmNsdWRlcygnY2FtZXJhJykpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2FtZXJhLnBvc2l0aW9uLnNldCgwLCA2LCAxMik7XHJcbiAgICAgICAgICAgICAgICBGZWF0dXJlcyA9IE9iamVjdC5hc3NpZ24oeyBjYW1lcmE6IHRoaXMuY2FtZXJhIH0sIEZlYXR1cmVzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZmVhdHVyZXMuaW5jbHVkZXMoJ2xpZ2h0JykpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGludGVuc2l0eSA9IDAuNDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGhlbWlzcGhlcmVMaWdodCA9IHRoaXMubGlnaHRzLmhlbWlzcGhlcmVMaWdodCh7IHNreUNvbG9yOiAweGZmZmZmZiwgZ3JvdW5kQ29sb3I6IDB4MDAwMDAwLCBpbnRlbnNpdHkgfSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhbWJpZW50TGlnaHQgPSB0aGlzLmxpZ2h0cy5hbWJpZW50TGlnaHQoeyBjb2xvcjogMHhmZmZmZmYsIGludGVuc2l0eSB9KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRpcmVjdGlvbmFsTGlnaHQgPSB0aGlzLmxpZ2h0cy5kaXJlY3Rpb25hbExpZ2h0KHsgY29sb3I6IDB4ZmZmZmZmLCBpbnRlbnNpdHkgfSk7XHJcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb25hbExpZ2h0LnBvc2l0aW9uLnNldCgxMDAsIDIwMCwgNTApO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZCA9IDIwO1xyXG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uYWxMaWdodC5zaGFkb3cuY2FtZXJhLnRvcCA9IGQ7XHJcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb25hbExpZ2h0LnNoYWRvdy5jYW1lcmEuYm90dG9tID0gLWQ7XHJcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb25hbExpZ2h0LnNoYWRvdy5jYW1lcmEubGVmdCA9IC1kO1xyXG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uYWxMaWdodC5zaGFkb3cuY2FtZXJhLnJpZ2h0ID0gZDtcclxuICAgICAgICAgICAgICAgIGRpcmVjdGlvbmFsTGlnaHQuc2hhZG93Lm1hcFNpemUuc2V0KDEwMjQsIDEwMjQpO1xyXG4gICAgICAgICAgICAgICAgLy8gdGhpcy5kaXJlY3Rpb25hbExpZ2h0ID0gbGlnaHRcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxpZ2h0cyA9IHtcclxuICAgICAgICAgICAgICAgICAgICBhbWJpZW50TGlnaHQsXHJcbiAgICAgICAgICAgICAgICAgICAgZGlyZWN0aW9uYWxMaWdodCxcclxuICAgICAgICAgICAgICAgICAgICBoZW1pc3BoZXJlTGlnaHRcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBGZWF0dXJlcyA9IE9iamVjdC5hc3NpZ24oeyBsaWdodHMgfSwgRmVhdHVyZXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChmZWF0dXJlcy5pbmNsdWRlcygnbG9va0F0Q2VudGVyJykpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2FtZXJhLmxvb2tBdCh0aGlzLnNjZW5lLnBvc2l0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZmVhdHVyZXMuaW5jbHVkZXMoJ2dyb3VuZCcpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBncmlkICh0ZXh0dXJlKVxyXG4gICAgICAgICAgICAgICAgY29uc3QgYWRkR3JpZCA9IGZlYXR1cmVzLmluY2x1ZGVzKCdncmlkJyk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBncmlkRGF0YSA9ICdkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUVBQUFBQkFDQVlBQUFDcWFYSGVBQUFBQkhOQ1NWUUlDQWdJZkFoa2lBQUFBQWx3U0ZsekFBQU9uQUFBRHVzQlorcTg3QUFBQUp0SlJFRlVlSnp0MEVFTndEQUF4TERiTlA2VU94aCtORVlRNWRsMmRyRnYyODY1OThHckE3UUc2QUN0QVRwQWE0QU8wQnFnQTdRRzZBQ3RBVHBBYTRBTzBCcWdBN1FHNkFDdEFUcEFhNEFPMEJxZ0E3UUc2QUN0QVRwQWE0QU8wQnFnQTdRRzZBQ3RBVHBBYTRBTzBCcWdBN1FHNkFDdEFUcEFhNEFPMEJxZ0E3UUc2QUN0QVRwQWE0QU8wQnFnQTdRRzZBQ3RBVHBBdTM3QUQ4ZWFCSDVKUWRWYkFBQUFBRWxGVGtTdVFtQ0MnO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGV4dHVyZSA9IHlpZWxkIHRoaXMubG9hZC50ZXh0dXJlKGdyaWREYXRhKTtcclxuICAgICAgICAgICAgICAgIHRleHR1cmUud3JhcFMgPSB0ZXh0dXJlLndyYXBUID0gVEhSRUUuUmVwZWF0V3JhcHBpbmc7XHJcbiAgICAgICAgICAgICAgICB0ZXh0dXJlLnJlcGVhdC5zZXQoMjEsIDIxKTtcclxuICAgICAgICAgICAgICAgIC8vIGdyb3VuZFxyXG4gICAgICAgICAgICAgICAgY29uc3QgZ2VvbWV0cnkgPSB7IG5hbWU6ICdncm91bmQnLCB3aWR0aDogMjEsIGhlaWdodDogMjEsIGRlcHRoOiAxLCB5OiAtMC41IH07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtYXRlcmlhbCA9IHtcclxuICAgICAgICAgICAgICAgICAgICBwaG9uZzogeyBtYXA6IGFkZEdyaWQgPyB0ZXh0dXJlIDogbnVsbCwgdHJhbnNwYXJlbnQ6IHRydWUsIG9wYWNpdHk6IDAuOCwgY29sb3I6IDB4ZmZmZmZmIH1cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBsZXQgZ3JvdW5kO1xyXG4gICAgICAgICAgICAgICAgaWYgKHdpbmRvdy5fX2xvYWRQaHlzaWNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZ3JvdW5kID0gdGhpcy5waHlzaWNzLmFkZC5ncm91bmQoZ2VvbWV0cnksIG1hdGVyaWFsKTtcclxuICAgICAgICAgICAgICAgICAgICBncm91bmQuYm9keS5zZXRSZXN0aXR1dGlvbigxKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGdyb3VuZCA9IHRoaXMuZmFjdG9yaWVzLmFkZC5ncm91bmQoZ2VvbWV0cnksIG1hdGVyaWFsKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGdyb3VuZC5yZWNlaXZlU2hhZG93ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIEZlYXR1cmVzID0gT2JqZWN0LmFzc2lnbih7IGdyb3VuZCB9LCBGZWF0dXJlcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGZlYXR1cmVzLmluY2x1ZGVzKCdvcmJpdENvbnRyb2xzJykpIHtcclxuICAgICAgICAgICAgICAgIC8vIGZvciBwaGFzZXJcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMucm9vdCBpcyB0aGUgcGhhc2VyIHNjZW5lIChzY2VuZTNEKVxyXG4gICAgICAgICAgICAgICAgLy8gdGhpcy5yb290LnNjYWxlLnBhcmVudCBpbnN0ZWFkIG9mIHRoaXMucmVuZGVyZXIuZG9tRWxlbWVudFxyXG4gICAgICAgICAgICAgICAgY29uc3Qgb3JiaXRDb250cm9scyA9IG5ldyBpbmRleF8xLk9yYml0Q29udHJvbHModGhpcy5jYW1lcmEsIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbmFibGUzZC1waGFzZXItY2FudmFzJykgfHwgdGhpcy5yZW5kZXJlci5kb21FbGVtZW50KTtcclxuICAgICAgICAgICAgICAgIEZlYXR1cmVzID0gT2JqZWN0LmFzc2lnbih7IG9yYml0Q29udHJvbHMgfSwgRmVhdHVyZXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBGZWF0dXJlcztcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5leHBvcnRzLmRlZmF1bHQgPSBXYXJwU3BlZWQ7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXdhcnBTcGVlZC5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcclxuLyoqXHJcbiAqIEBhdXRob3IgICAgICAgWWFubmljayBEZXViZWwgKGh0dHBzOi8vZ2l0aHViLmNvbS95YW5kZXUpXHJcbiAqIEBjb3B5cmlnaHQgICAgQ29weXJpZ2h0IChjKSAyMDIwIFlhbm5pY2sgRGV1YmVsOyBQcm9qZWN0IFVybDogaHR0cHM6Ly9naXRodWIuY29tL2VuYWJsZTNkL2VuYWJsZTNkXHJcbiAqIEBsaWNlbnNlICAgICAge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9lbmFibGUzZC9lbmFibGUzZC9ibG9iL21hc3Rlci9MSUNFTlNFfEdOVSBHUEx2M31cclxuICovXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuY29uc3QgVEhSRUUgPSByZXF1aXJlKFwiQGVuYWJsZTNkL3RocmVlLXdyYXBwZXIvZGlzdC9pbmRleFwiKTtcclxuY2xhc3MgV2ViWFIge1xyXG4gICAgY29uc3RydWN0b3IoX3JlbmRlcmVyLCBfc2NlbmUsIF9jYW1lcmEpIHtcclxuICAgICAgICAvLyBodHRwczovL21lZGl1bS5jb20vc2Ftc3VuZy1pbnRlcm5ldC1kZXYvdnItbG9jb21vdGlvbi03NDBkYWZhODU5MTRcclxuICAgICAgICB0aGlzLl9yZW5kZXJlciA9IF9yZW5kZXJlcjtcclxuICAgICAgICB0aGlzLl9zY2VuZSA9IF9zY2VuZTtcclxuICAgICAgICB0aGlzLl9jYW1lcmEgPSBfY2FtZXJhO1xyXG4gICAgICAgIHRoaXMuY29udHJvbGxlck1vZGVsRmFjdG9yeSA9IG5ldyBUSFJFRS5YUkNvbnRyb2xsZXJNb2RlbEZhY3RvcnkoKTtcclxuICAgICAgICAvLyBjb25zdCBnZW8gPSBuZXcgVEhSRUUuU3BoZXJlR2VvbWV0cnkoMC41KVxyXG4gICAgICAgIC8vIGNvbnN0IG1hdCA9IG5ldyBUSFJFRS5NZXNoTGFtYmVydE1hdGVyaWFsKHsgY29sb3I6IDB4ZmYwMDAwIH0pXHJcbiAgICAgICAgLy8gdGhpcy5kb3QgPSBuZXcgVEhSRUUuTWVzaChnZW8sIG1hdClcclxuICAgICAgICAvLyB0aGlzLmRvdC5wb3NpdGlvbi5zZXQoMCwgMSwgMClcclxuICAgICAgICB0aGlzLmNhbWVyYUdyb3VwID0gbmV3IFRIUkVFLkdyb3VwKCk7XHJcbiAgICAgICAgdGhpcy5jYW1lcmFHcm91cC5hZGQoX2NhbWVyYSk7XHJcbiAgICAgICAgX3NjZW5lLmFkZCh0aGlzLmNhbWVyYUdyb3VwKTtcclxuICAgICAgICBfcmVuZGVyZXIueHIuZW5hYmxlZCA9IHRydWU7XHJcbiAgICAgICAgLy8gYWRkIHZyIGJ1dHRvblxyXG4gICAgICAgIGNvbnN0IHZyQnV0dG9uID0gVEhSRUUuVlJCdXR0b24uY3JlYXRlQnV0dG9uKF9yZW5kZXJlcik7XHJcbiAgICAgICAgdnJCdXR0b24uc3R5bGUuY3NzVGV4dCArPSAnYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjgpOyAnO1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodnJCdXR0b24pO1xyXG4gICAgfVxyXG4gICAgZ2V0IGlzUHJlc2VudGluZygpIHtcclxuICAgICAgICB2YXIgX2EsIF9iO1xyXG4gICAgICAgIHJldHVybiAhISgoX2IgPSAoX2EgPSB0aGlzLl9yZW5kZXJlcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnhyKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuaXNQcmVzZW50aW5nKTtcclxuICAgIH1cclxuICAgIGdldENvbnRyb2xsZXIoaWQpIHtcclxuICAgICAgICBjb25zdCBjb250cm9sbGVyID0gdGhpcy5fcmVuZGVyZXIueHIuZ2V0Q29udHJvbGxlcihpZCk7XHJcbiAgICAgICAgdGhpcy5jYW1lcmFHcm91cC5hZGQoY29udHJvbGxlcik7XHJcbiAgICAgICAgcmV0dXJuIGNvbnRyb2xsZXI7XHJcbiAgICB9XHJcbiAgICBnZXRDb250cm9sbGVyR3JpcChpZCkge1xyXG4gICAgICAgIGNvbnN0IGNvbnRyb2xsZXJHcmlwID0gdGhpcy5fcmVuZGVyZXIueHIuZ2V0Q29udHJvbGxlckdyaXAoaWQpO1xyXG4gICAgICAgIGNvbnN0IG1vZGVsID0gdGhpcy5jb250cm9sbGVyTW9kZWxGYWN0b3J5LmNyZWF0ZUNvbnRyb2xsZXJNb2RlbChjb250cm9sbGVyR3JpcCk7XHJcbiAgICAgICAgY29udHJvbGxlckdyaXAuYWRkKG1vZGVsKTtcclxuICAgICAgICB0aGlzLmNhbWVyYUdyb3VwLmFkZChjb250cm9sbGVyR3JpcCk7XHJcbiAgICAgICAgcmV0dXJuIGNvbnRyb2xsZXJHcmlwO1xyXG4gICAgfVxyXG4gICAgZ2V0Q29udHJvbGxlclJheShkYXRhKSB7XHJcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL21yZG9vYi90aHJlZS5qcy9ibG9iL21hc3Rlci9leGFtcGxlcy93ZWJ4cl92cl9iYWxsc2hvb3Rlci5odG1sXHJcbiAgICAgICAgY29uc3QgeyB0YXJnZXRSYXlNb2RlIH0gPSBkYXRhO1xyXG4gICAgICAgIGlmICh0YXJnZXRSYXlNb2RlID09PSAndHJhY2tlZC1wb2ludGVyJykge1xyXG4gICAgICAgICAgICBsZXQgZ2VvbWV0cnkgPSBuZXcgVEhSRUUuQnVmZmVyR2VvbWV0cnkoKTtcclxuICAgICAgICAgICAgZ2VvbWV0cnkuc2V0QXR0cmlidXRlKCdwb3NpdGlvbicsIG5ldyBUSFJFRS5GbG9hdDMyQnVmZmVyQXR0cmlidXRlKFswLCAwLCAwLCAwLCAwLCAtMV0sIDMpKTtcclxuICAgICAgICAgICAgZ2VvbWV0cnkuc2V0QXR0cmlidXRlKCdjb2xvcicsIG5ldyBUSFJFRS5GbG9hdDMyQnVmZmVyQXR0cmlidXRlKFsxLCAwLCAwLCAxLCAxLCAxXSwgMykpO1xyXG4gICAgICAgICAgICBsZXQgbWF0ZXJpYWwgPSBuZXcgVEhSRUUuTGluZUJhc2ljTWF0ZXJpYWwoe1xyXG4gICAgICAgICAgICAgICAgdmVydGV4Q29sb3JzOiB0cnVlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFRIUkVFLkxpbmUoZ2VvbWV0cnksIG1hdGVyaWFsKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRhcmdldFJheU1vZGUgPT09ICdnYXplJykge1xyXG4gICAgICAgICAgICBsZXQgZ2VvbWV0cnkgPSBuZXcgVEhSRUUuUmluZ0J1ZmZlckdlb21ldHJ5KDAuMDIsIDAuMDQsIDMyKS50cmFuc2xhdGUoMCwgMCwgLTEpO1xyXG4gICAgICAgICAgICBsZXQgbWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoeyBjb2xvcjogJ3JlZCcsIG9wYWNpdHk6IDAuNSwgdHJhbnNwYXJlbnQ6IHRydWUgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgVEhSRUUuTWVzaChnZW9tZXRyeSwgbWF0ZXJpYWwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBnZXQgY2FtZXJhKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLldlYlhSQ2FtZXJhO1xyXG4gICAgfVxyXG4gICAgZ2V0IFdlYlhSQ2FtZXJhKCkge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBncm91cDogdGhpcy5jYW1lcmFHcm91cCxcclxuICAgICAgICAgICAgcG9zaXRpb246IChfYSA9IHRoaXMuY2FtZXJhR3JvdXApID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5wb3NpdGlvbixcclxuICAgICAgICAgICAgcm90YXRpb246IHRoaXMuaXNQcmVzZW50aW5nID8gdGhpcy5fcmVuZGVyZXIueHIuZ2V0Q2FtZXJhKHRoaXMuX2NhbWVyYSkucm90YXRpb24gOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIGdldFdvcmxkRGlyZWN0aW9uOiAodGFyZ2V0KSA9PiB0aGlzLmlzUHJlc2VudGluZyA/IHRoaXMuX3JlbmRlcmVyLnhyLmdldENhbWVyYSh0aGlzLl9jYW1lcmEpLmdldFdvcmxkRGlyZWN0aW9uKHRhcmdldCkgOiB1bmRlZmluZWRcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydHMuZGVmYXVsdCA9IFdlYlhSO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD13ZWJ4ci5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLlZFUlNJT04gPSB2b2lkIDA7XHJcbmV4cG9ydHMuVkVSU0lPTiA9ICcwLjIxLjAnO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD12ZXJzaW9uLmpzLm1hcCIsIiFmdW5jdGlvbih0LGUpe2Zvcih2YXIgbiBpbiBlKXRbbl09ZVtuXX0oZXhwb3J0cyxmdW5jdGlvbih0KXt2YXIgZT17fTtmdW5jdGlvbiBuKHIpe2lmKGVbcl0pcmV0dXJuIGVbcl0uZXhwb3J0czt2YXIgaT1lW3JdPXtpOnIsbDohMSxleHBvcnRzOnt9fTtyZXR1cm4gdFtyXS5jYWxsKGkuZXhwb3J0cyxpLGkuZXhwb3J0cyxuKSxpLmw9ITAsaS5leHBvcnRzfXJldHVybiBuLm09dCxuLmM9ZSxuLmQ9ZnVuY3Rpb24odCxlLHIpe24ubyh0LGUpfHxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxlLHtlbnVtZXJhYmxlOiEwLGdldDpyfSl9LG4ucj1mdW5jdGlvbih0KXtcInVuZGVmaW5lZFwiIT10eXBlb2YgU3ltYm9sJiZTeW1ib2wudG9TdHJpbmdUYWcmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFN5bWJvbC50b1N0cmluZ1RhZyx7dmFsdWU6XCJNb2R1bGVcIn0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pfSxuLnQ9ZnVuY3Rpb24odCxlKXtpZigxJmUmJih0PW4odCkpLDgmZSlyZXR1cm4gdDtpZig0JmUmJlwib2JqZWN0XCI9PXR5cGVvZiB0JiZ0JiZ0Ll9fZXNNb2R1bGUpcmV0dXJuIHQ7dmFyIHI9T2JqZWN0LmNyZWF0ZShudWxsKTtpZihuLnIociksT2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJkZWZhdWx0XCIse2VudW1lcmFibGU6ITAsdmFsdWU6dH0pLDImZSYmXCJzdHJpbmdcIiE9dHlwZW9mIHQpZm9yKHZhciBpIGluIHQpbi5kKHIsaSxmdW5jdGlvbihlKXtyZXR1cm4gdFtlXX0uYmluZChudWxsLGkpKTtyZXR1cm4gcn0sbi5uPWZ1bmN0aW9uKHQpe3ZhciBlPXQmJnQuX19lc01vZHVsZT9mdW5jdGlvbigpe3JldHVybiB0LmRlZmF1bHR9OmZ1bmN0aW9uKCl7cmV0dXJuIHR9O3JldHVybiBuLmQoZSxcImFcIixlKSxlfSxuLm89ZnVuY3Rpb24odCxlKXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsZSl9LG4ucD1cIlwiLG4obi5zPTQpfShbZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO24ucihlKSxuLmQoZSxcIkFDRVNGaWxtaWNUb25lTWFwcGluZ1wiLChmdW5jdGlvbigpe3JldHVybiBudH0pKSxuLmQoZSxcIkFkZEVxdWF0aW9uXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFR9KSksbi5kKGUsXCJBZGRPcGVyYXRpb25cIiwoZnVuY3Rpb24oKXtyZXR1cm4gS30pKSxuLmQoZSxcIkFkZGl0aXZlQW5pbWF0aW9uQmxlbmRNb2RlXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFhlfSkpLG4uZChlLFwiQWRkaXRpdmVCbGVuZGluZ1wiLChmdW5jdGlvbigpe3JldHVybiB3fSkpLG4uZChlLFwiQWxwaGFGb3JtYXRcIiwoZnVuY3Rpb24oKXtyZXR1cm4gQnR9KSksbi5kKGUsXCJBbHdheXNEZXB0aFwiLChmdW5jdGlvbigpe3JldHVybiBrfSkpLG4uZChlLFwiQWx3YXlzU3RlbmNpbEZ1bmNcIiwoZnVuY3Rpb24oKXtyZXR1cm4gU259KSksbi5kKGUsXCJBbWJpZW50TGlnaHRcIiwoZnVuY3Rpb24oKXtyZXR1cm4gTGh9KSksbi5kKGUsXCJBbWJpZW50TGlnaHRQcm9iZVwiLChmdW5jdGlvbigpe3JldHVybiBKaH0pKSxuLmQoZSxcIkFuaW1hdGlvbkNsaXBcIiwoZnVuY3Rpb24oKXtyZXR1cm4gRHV9KSksbi5kKGUsXCJBbmltYXRpb25Mb2FkZXJcIiwoZnVuY3Rpb24oKXtyZXR1cm4gVnV9KSksbi5kKGUsXCJBbmltYXRpb25NaXhlclwiLChmdW5jdGlvbigpe3JldHVybiBBZH0pKSxuLmQoZSxcIkFuaW1hdGlvbk9iamVjdEdyb3VwXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFRkfSkpLG4uZChlLFwiQW5pbWF0aW9uVXRpbHNcIiwoZnVuY3Rpb24oKXtyZXR1cm4gX3V9KSksbi5kKGUsXCJBcmNDdXJ2ZVwiLChmdW5jdGlvbigpe3JldHVybiBLdX0pKSxuLmQoZSxcIkFycmF5Q2FtZXJhXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFBzfSkpLG4uZChlLFwiQXJyb3dIZWxwZXJcIiwoZnVuY3Rpb24oKXtyZXR1cm4gZ3B9KSksbi5kKGUsXCJBdWRpb1wiLChmdW5jdGlvbigpe3JldHVybiBzZH0pKSxuLmQoZSxcIkF1ZGlvQW5hbHlzZXJcIiwoZnVuY3Rpb24oKXtyZXR1cm4gcGR9KSksbi5kKGUsXCJBdWRpb0NvbnRleHRcIiwoZnVuY3Rpb24oKXtyZXR1cm4gcWh9KSksbi5kKGUsXCJBdWRpb0xpc3RlbmVyXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGFkfSkpLG4uZChlLFwiQXVkaW9Mb2FkZXJcIiwoZnVuY3Rpb24oKXtyZXR1cm4gWWh9KSksbi5kKGUsXCJBeGVzSGVscGVyXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHZwfSkpLG4uZChlLFwiQXhpc0hlbHBlclwiLChmdW5jdGlvbigpe3JldHVybiB2Zn0pKSxuLmQoZSxcIkJhY2tTaWRlXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIG19KSksbi5kKGUsXCJCYXNpY0RlcHRoUGFja2luZ1wiLChmdW5jdGlvbigpe3JldHVybiBvbn0pKSxuLmQoZSxcIkJhc2ljU2hhZG93TWFwXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHV9KSksbi5kKGUsXCJCaW5hcnlUZXh0dXJlTG9hZGVyXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIF9mfSkpLG4uZChlLFwiQm9uZVwiLChmdW5jdGlvbigpe3JldHVybiBsY30pKSxuLmQoZSxcIkJvb2xlYW5LZXlmcmFtZVRyYWNrXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEx1fSkpLG4uZChlLFwiQm91bmRpbmdCb3hIZWxwZXJcIiwoZnVuY3Rpb24oKXtyZXR1cm4geWZ9KSksbi5kKGUsXCJCb3gyXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEZkfSkpLG4uZChlLFwiQm94M1wiLChmdW5jdGlvbigpe3JldHVybiB0cn0pKSxuLmQoZSxcIkJveDNIZWxwZXJcIiwoZnVuY3Rpb24oKXtyZXR1cm4gaHB9KSksbi5kKGUsXCJCb3hCdWZmZXJHZW9tZXRyeVwiLChmdW5jdGlvbigpe3JldHVybiBtb30pKSxuLmQoZSxcIkJveEdlb21ldHJ5XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFdjfSkpLG4uZChlLFwiQm94SGVscGVyXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHVwfSkpLG4uZChlLFwiQnVmZmVyQXR0cmlidXRlXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFRpfSkpLG4uZChlLFwiQnVmZmVyR2VvbWV0cnlcIiwoZnVuY3Rpb24oKXtyZXR1cm4gcWl9KSksbi5kKGUsXCJCdWZmZXJHZW9tZXRyeUxvYWRlclwiLChmdW5jdGlvbigpe3JldHVybiBCaH0pKSxuLmQoZSxcIkJ5dGVUeXBlXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFR0fSkpLG4uZChlLFwiQ2FjaGVcIiwoZnVuY3Rpb24oKXtyZXR1cm4gRnV9KSksbi5kKGUsXCJDYW1lcmFcIiwoZnVuY3Rpb24oKXtyZXR1cm4gYm99KSksbi5kKGUsXCJDYW1lcmFIZWxwZXJcIiwoZnVuY3Rpb24oKXtyZXR1cm4gc3B9KSksbi5kKGUsXCJDYW52YXNSZW5kZXJlclwiLChmdW5jdGlvbigpe3JldHVybiBUZn0pKSxuLmQoZSxcIkNhbnZhc1RleHR1cmVcIiwoZnVuY3Rpb24oKXtyZXR1cm4gVWN9KSksbi5kKGUsXCJDYXRtdWxsUm9tQ3VydmUzXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHJofSkpLG4uZChlLFwiQ2luZW9uVG9uZU1hcHBpbmdcIiwoZnVuY3Rpb24oKXtyZXR1cm4gZXR9KSksbi5kKGUsXCJDaXJjbGVCdWZmZXJHZW9tZXRyeVwiLChmdW5jdGlvbigpe3JldHVybiBYY30pKSxuLmQoZSxcIkNpcmNsZUdlb21ldHJ5XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHFjfSkpLG4uZChlLFwiQ2xhbXBUb0VkZ2VXcmFwcGluZ1wiLChmdW5jdGlvbigpe3JldHVybiBkdH0pKSxuLmQoZSxcIkNsb2NrXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHRkfSkpLG4uZChlLFwiQ2xvc2VkU3BsaW5lQ3VydmUzXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGZmfSkpLG4uZChlLFwiQ29sb3JcIiwoZnVuY3Rpb24oKXtyZXR1cm4geWl9KSksbi5kKGUsXCJDb2xvcktleWZyYW1lVHJhY2tcIiwoZnVuY3Rpb24oKXtyZXR1cm4gUnV9KSksbi5kKGUsXCJDb21wcmVzc2VkVGV4dHVyZVwiLChmdW5jdGlvbigpe3JldHVybiBGY30pKSxuLmQoZSxcIkNvbXByZXNzZWRUZXh0dXJlTG9hZGVyXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGp1fSkpLG4uZChlLFwiQ29uZUJ1ZmZlckdlb21ldHJ5XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEtjfSkpLG4uZChlLFwiQ29uZUdlb21ldHJ5XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEpjfSkpLG4uZChlLFwiQ3ViZUNhbWVyYVwiLChmdW5jdGlvbigpe3JldHVybiBfb30pKSxuLmQoZSxcIkN1YmVHZW9tZXRyeVwiLChmdW5jdGlvbigpe3JldHVybiBXY30pKSxuLmQoZSxcIkN1YmVSZWZsZWN0aW9uTWFwcGluZ1wiLChmdW5jdGlvbigpe3JldHVybiBvdH0pKSxuLmQoZSxcIkN1YmVSZWZyYWN0aW9uTWFwcGluZ1wiLChmdW5jdGlvbigpe3JldHVybiBhdH0pKSxuLmQoZSxcIkN1YmVUZXh0dXJlXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIE1vfSkpLG4uZChlLFwiQ3ViZVRleHR1cmVMb2FkZXJcIiwoZnVuY3Rpb24oKXtyZXR1cm4gWHV9KSksbi5kKGUsXCJDdWJlVVZSZWZsZWN0aW9uTWFwcGluZ1wiLChmdW5jdGlvbigpe3JldHVybiBsdH0pKSxuLmQoZSxcIkN1YmVVVlJlZnJhY3Rpb25NYXBwaW5nXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHV0fSkpLG4uZChlLFwiQ3ViaWNCZXppZXJDdXJ2ZVwiLChmdW5jdGlvbigpe3JldHVybiBzaH0pKSxuLmQoZSxcIkN1YmljQmV6aWVyQ3VydmUzXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGNofSkpLG4uZChlLFwiQ3ViaWNJbnRlcnBvbGFudFwiLChmdW5jdGlvbigpe3JldHVybiBTdX0pKSxuLmQoZSxcIkN1bGxGYWNlQmFja1wiLChmdW5jdGlvbigpe3JldHVybiBzfSkpLG4uZChlLFwiQ3VsbEZhY2VGcm9udFwiLChmdW5jdGlvbigpe3JldHVybiBjfSkpLG4uZChlLFwiQ3VsbEZhY2VGcm9udEJhY2tcIiwoZnVuY3Rpb24oKXtyZXR1cm4gbH0pKSxuLmQoZSxcIkN1bGxGYWNlTm9uZVwiLChmdW5jdGlvbigpe3JldHVybiBhfSkpLG4uZChlLFwiQ3VydmVcIiwoZnVuY3Rpb24oKXtyZXR1cm4gWnV9KSksbi5kKGUsXCJDdXJ2ZVBhdGhcIiwoZnVuY3Rpb24oKXtyZXR1cm4gbWh9KSksbi5kKGUsXCJDdXN0b21CbGVuZGluZ1wiLChmdW5jdGlvbigpe3JldHVybiBTfSkpLG4uZChlLFwiQ3VzdG9tVG9uZU1hcHBpbmdcIiwoZnVuY3Rpb24oKXtyZXR1cm4gcnR9KSksbi5kKGUsXCJDeWxpbmRlckJ1ZmZlckdlb21ldHJ5XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFljfSkpLG4uZChlLFwiQ3lsaW5kZXJHZW9tZXRyeVwiLChmdW5jdGlvbigpe3JldHVybiBaY30pKSxuLmQoZSxcIkN5bGluZHJpY2FsXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIERkfSkpLG4uZChlLFwiRGF0YVRleHR1cmVcIiwoZnVuY3Rpb24oKXtyZXR1cm4gVG99KSksbi5kKGUsXCJEYXRhVGV4dHVyZTJEQXJyYXlcIiwoZnVuY3Rpb24oKXtyZXR1cm4gWm99KSksbi5kKGUsXCJEYXRhVGV4dHVyZTNEXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEpvfSkpLG4uZChlLFwiRGF0YVRleHR1cmVMb2FkZXJcIiwoZnVuY3Rpb24oKXtyZXR1cm4gcXV9KSksbi5kKGUsXCJEYXRhVXRpbHNcIiwoZnVuY3Rpb24oKXtyZXR1cm4gYnB9KSksbi5kKGUsXCJEZWNyZW1lbnRTdGVuY2lsT3BcIiwoZnVuY3Rpb24oKXtyZXR1cm4gcG59KSksbi5kKGUsXCJEZWNyZW1lbnRXcmFwU3RlbmNpbE9wXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIG1ufSkpLG4uZChlLFwiRGVmYXVsdExvYWRpbmdNYW5hZ2VyXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHp1fSkpLG4uZChlLFwiRGVwdGhGb3JtYXRcIiwoZnVuY3Rpb24oKXtyZXR1cm4ga3R9KSksbi5kKGUsXCJEZXB0aFN0ZW5jaWxGb3JtYXRcIiwoZnVuY3Rpb24oKXtyZXR1cm4gVnR9KSksbi5kKGUsXCJEZXB0aFRleHR1cmVcIiwoZnVuY3Rpb24oKXtyZXR1cm4gemN9KSksbi5kKGUsXCJEaXJlY3Rpb25hbExpZ2h0XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEFofSkpLG4uZChlLFwiRGlyZWN0aW9uYWxMaWdodEhlbHBlclwiLChmdW5jdGlvbigpe3JldHVybiBpcH0pKSxuLmQoZSxcIkRpc2NyZXRlSW50ZXJwb2xhbnRcIiwoZnVuY3Rpb24oKXtyZXR1cm4gRXV9KSksbi5kKGUsXCJEb2RlY2FoZWRyb25CdWZmZXJHZW9tZXRyeVwiLChmdW5jdGlvbigpe3JldHVybiAkY30pKSxuLmQoZSxcIkRvZGVjYWhlZHJvbkdlb21ldHJ5XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHRsfSkpLG4uZChlLFwiRG91YmxlU2lkZVwiLChmdW5jdGlvbigpe3JldHVybiBnfSkpLG4uZChlLFwiRHN0QWxwaGFGYWN0b3JcIiwoZnVuY3Rpb24oKXtyZXR1cm4gQn0pKSxuLmQoZSxcIkRzdENvbG9yRmFjdG9yXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFV9KSksbi5kKGUsXCJEeW5hbWljQnVmZmVyQXR0cmlidXRlXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHJmfSkpLG4uZChlLFwiRHluYW1pY0NvcHlVc2FnZVwiLChmdW5jdGlvbigpe3JldHVybiBJbn0pKSxuLmQoZSxcIkR5bmFtaWNEcmF3VXNhZ2VcIiwoZnVuY3Rpb24oKXtyZXR1cm4gRW59KSksbi5kKGUsXCJEeW5hbWljUmVhZFVzYWdlXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFJufSkpLG4uZChlLFwiRWRnZXNHZW9tZXRyeVwiLChmdW5jdGlvbigpe3JldHVybiBvbH0pKSxuLmQoZSxcIkVkZ2VzSGVscGVyXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHhmfSkpLG4uZChlLFwiRWxsaXBzZUN1cnZlXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEp1fSkpLG4uZChlLFwiRXF1YWxEZXB0aFwiLChmdW5jdGlvbigpe3JldHVybiBXfSkpLG4uZChlLFwiRXF1YWxTdGVuY2lsRnVuY1wiLChmdW5jdGlvbigpe3JldHVybiB4bn0pKSxuLmQoZSxcIkVxdWlyZWN0YW5ndWxhclJlZmxlY3Rpb25NYXBwaW5nXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHN0fSkpLG4uZChlLFwiRXF1aXJlY3Rhbmd1bGFyUmVmcmFjdGlvbk1hcHBpbmdcIiwoZnVuY3Rpb24oKXtyZXR1cm4gY3R9KSksbi5kKGUsXCJFdWxlclwiLChmdW5jdGlvbigpe3JldHVybiBPcn0pKSxuLmQoZSxcIkV2ZW50RGlzcGF0Y2hlclwiLChmdW5jdGlvbigpe3JldHVybiBCbn0pKSxuLmQoZSxcIkV4dHJ1ZGVCdWZmZXJHZW9tZXRyeVwiLChmdW5jdGlvbigpe3JldHVybiBObH0pKSxuLmQoZSxcIkV4dHJ1ZGVHZW9tZXRyeVwiLChmdW5jdGlvbigpe3JldHVybiBCbH0pKSxuLmQoZSxcIkZhY2UzXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHhpfSkpLG4uZChlLFwiRmFjZTRcIiwoZnVuY3Rpb24oKXtyZXR1cm4ga3B9KSksbi5kKGUsXCJGYWNlQ29sb3JzXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFhwfSkpLG4uZChlLFwiRmlsZUxvYWRlclwiLChmdW5jdGlvbigpe3JldHVybiBrdX0pKSxuLmQoZSxcIkZsYXRTaGFkaW5nXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHZ9KSksbi5kKGUsXCJGbG9hdDE2QnVmZmVyQXR0cmlidXRlXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIE9pfSkpLG4uZChlLFwiRmxvYXQzMkF0dHJpYnV0ZVwiLChmdW5jdGlvbigpe3JldHVybiBkZn0pKSxuLmQoZSxcIkZsb2F0MzJCdWZmZXJBdHRyaWJ1dGVcIiwoZnVuY3Rpb24oKXtyZXR1cm4gTml9KSksbi5kKGUsXCJGbG9hdDY0QXR0cmlidXRlXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHBmfSkpLG4uZChlLFwiRmxvYXQ2NEJ1ZmZlckF0dHJpYnV0ZVwiLChmdW5jdGlvbigpe3JldHVybiBEaX0pKSxuLmQoZSxcIkZsb2F0VHlwZVwiLChmdW5jdGlvbigpe3JldHVybiBQdH0pKSxuLmQoZSxcIkZvZ1wiLChmdW5jdGlvbigpe3JldHVybiBVc30pKSxuLmQoZSxcIkZvZ0V4cDJcIiwoZnVuY3Rpb24oKXtyZXR1cm4gRnN9KSksbi5kKGUsXCJGb250XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFZofSkpLG4uZChlLFwiRm9udExvYWRlclwiLChmdW5jdGlvbigpe3JldHVybiBXaH0pKSxuLmQoZSxcIkZyb250U2lkZVwiLChmdW5jdGlvbigpe3JldHVybiBmfSkpLG4uZChlLFwiRnJ1c3R1bVwiLChmdW5jdGlvbigpe3JldHVybiBMb30pKSxuLmQoZSxcIkdMQnVmZmVyQXR0cmlidXRlXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFBkfSkpLG4uZChlLFwiR0xTTDFcIiwoZnVuY3Rpb24oKXtyZXR1cm4gTm59KSksbi5kKGUsXCJHTFNMM1wiLChmdW5jdGlvbigpe3JldHVybiBEbn0pKSxuLmQoZSxcIkdhbW1hRW5jb2RpbmdcIiwoZnVuY3Rpb24oKXtyZXR1cm4gUWV9KSksbi5kKGUsXCJHZW9tZXRyeVwiLChmdW5jdGlvbigpe3JldHVybiBqY30pKSxuLmQoZSxcIkdlb21ldHJ5VXRpbHNcIiwoZnVuY3Rpb24oKXtyZXR1cm4gU2Z9KSksbi5kKGUsXCJHcmVhdGVyRGVwdGhcIiwoZnVuY3Rpb24oKXtyZXR1cm4gcX0pKSxuLmQoZSxcIkdyZWF0ZXJFcXVhbERlcHRoXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFh9KSksbi5kKGUsXCJHcmVhdGVyRXF1YWxTdGVuY2lsRnVuY1wiLChmdW5jdGlvbigpe3JldHVybiBNbn0pKSxuLmQoZSxcIkdyZWF0ZXJTdGVuY2lsRnVuY1wiLChmdW5jdGlvbigpe3JldHVybiB3bn0pKSxuLmQoZSxcIkdyaWRIZWxwZXJcIiwoZnVuY3Rpb24oKXtyZXR1cm4gJGR9KSksbi5kKGUsXCJHcm91cFwiLChmdW5jdGlvbigpe3JldHVybiBDc30pKSxuLmQoZSxcIkhhbGZGbG9hdFR5cGVcIiwoZnVuY3Rpb24oKXtyZXR1cm4gQ3R9KSksbi5kKGUsXCJIZW1pc3BoZXJlTGlnaHRcIiwoZnVuY3Rpb24oKXtyZXR1cm4geGh9KSksbi5kKGUsXCJIZW1pc3BoZXJlTGlnaHRIZWxwZXJcIiwoZnVuY3Rpb24oKXtyZXR1cm4gUWR9KSksbi5kKGUsXCJIZW1pc3BoZXJlTGlnaHRQcm9iZVwiLChmdW5jdGlvbigpe3JldHVybiBaaH0pKSxuLmQoZSxcIkljb3NhaGVkcm9uQnVmZmVyR2VvbWV0cnlcIiwoZnVuY3Rpb24oKXtyZXR1cm4gRmx9KSksbi5kKGUsXCJJY29zYWhlZHJvbkdlb21ldHJ5XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFVsfSkpLG4uZChlLFwiSW1hZ2VCaXRtYXBMb2FkZXJcIiwoZnVuY3Rpb24oKXtyZXR1cm4gSGh9KSksbi5kKGUsXCJJbWFnZUxvYWRlclwiLChmdW5jdGlvbigpe3JldHVybiBXdX0pKSxuLmQoZSxcIkltYWdlVXRpbHNcIiwoZnVuY3Rpb24oKXtyZXR1cm4gVm59KSksbi5kKGUsXCJJbW1lZGlhdGVSZW5kZXJPYmplY3RcIiwoZnVuY3Rpb24oKXtyZXR1cm4gSGR9KSksbi5kKGUsXCJJbmNyZW1lbnRTdGVuY2lsT3BcIiwoZnVuY3Rpb24oKXtyZXR1cm4gZG59KSksbi5kKGUsXCJJbmNyZW1lbnRXcmFwU3RlbmNpbE9wXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGZufSkpLG4uZChlLFwiSW5zdGFuY2VkQnVmZmVyQXR0cmlidXRlXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIERofSkpLG4uZChlLFwiSW5zdGFuY2VkQnVmZmVyR2VvbWV0cnlcIiwoZnVuY3Rpb24oKXtyZXR1cm4gTmh9KSksbi5kKGUsXCJJbnN0YW5jZWRJbnRlcmxlYXZlZEJ1ZmZlclwiLChmdW5jdGlvbigpe3JldHVybiBSZH0pKSxuLmQoZSxcIkluc3RhbmNlZE1lc2hcIiwoZnVuY3Rpb24oKXtyZXR1cm4gdmN9KSksbi5kKGUsXCJJbnQxNkF0dHJpYnV0ZVwiLChmdW5jdGlvbigpe3JldHVybiBjZn0pKSxuLmQoZSxcIkludDE2QnVmZmVyQXR0cmlidXRlXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFJpfSkpLG4uZChlLFwiSW50MzJBdHRyaWJ1dGVcIiwoZnVuY3Rpb24oKXtyZXR1cm4gdWZ9KSksbi5kKGUsXCJJbnQzMkJ1ZmZlckF0dHJpYnV0ZVwiLChmdW5jdGlvbigpe3JldHVybiBDaX0pKSxuLmQoZSxcIkludDhBdHRyaWJ1dGVcIiwoZnVuY3Rpb24oKXtyZXR1cm4gb2Z9KSksbi5kKGUsXCJJbnQ4QnVmZmVyQXR0cmlidXRlXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEVpfSkpLG4uZChlLFwiSW50VHlwZVwiLChmdW5jdGlvbigpe3JldHVybiBMdH0pKSxuLmQoZSxcIkludGVybGVhdmVkQnVmZmVyXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEdzfSkpLG4uZChlLFwiSW50ZXJsZWF2ZWRCdWZmZXJBdHRyaWJ1dGVcIiwoZnVuY3Rpb24oKXtyZXR1cm4ga3N9KSksbi5kKGUsXCJJbnRlcnBvbGFudFwiLChmdW5jdGlvbigpe3JldHVybiBNdX0pKSxuLmQoZSxcIkludGVycG9sYXRlRGlzY3JldGVcIiwoZnVuY3Rpb24oKXtyZXR1cm4gemV9KSksbi5kKGUsXCJJbnRlcnBvbGF0ZUxpbmVhclwiLChmdW5jdGlvbigpe3JldHVybiBHZX0pKSxuLmQoZSxcIkludGVycG9sYXRlU21vb3RoXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEhlfSkpLG4uZChlLFwiSW52ZXJ0U3RlbmNpbE9wXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGdufSkpLG4uZChlLFwiSlNPTkxvYWRlclwiLChmdW5jdGlvbigpe3JldHVybiBFZn0pKSxuLmQoZSxcIktlZXBTdGVuY2lsT3BcIiwoZnVuY3Rpb24oKXtyZXR1cm4gdW59KSksbi5kKGUsXCJLZXlmcmFtZVRyYWNrXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEF1fSkpLG4uZChlLFwiTE9EXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHNjfSkpLG4uZChlLFwiTGF0aGVCdWZmZXJHZW9tZXRyeVwiLChmdW5jdGlvbigpe3JldHVybiB6bH0pKSxuLmQoZSxcIkxhdGhlR2VvbWV0cnlcIiwoZnVuY3Rpb24oKXtyZXR1cm4gR2x9KSksbi5kKGUsXCJMYXllcnNcIiwoZnVuY3Rpb24oKXtyZXR1cm4gQnJ9KSksbi5kKGUsXCJMZW5zRmxhcmVcIiwoZnVuY3Rpb24oKXtyZXR1cm4gTGZ9KSksbi5kKGUsXCJMZXNzRGVwdGhcIiwoZnVuY3Rpb24oKXtyZXR1cm4gVn0pKSxuLmQoZSxcIkxlc3NFcXVhbERlcHRoXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGp9KSksbi5kKGUsXCJMZXNzRXF1YWxTdGVuY2lsRnVuY1wiLChmdW5jdGlvbigpe3JldHVybiBibn0pKSxuLmQoZSxcIkxlc3NTdGVuY2lsRnVuY1wiLChmdW5jdGlvbigpe3JldHVybiB5bn0pKSxuLmQoZSxcIkxpZ2h0XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHlofSkpLG4uZChlLFwiTGlnaHRQcm9iZVwiLChmdW5jdGlvbigpe3JldHVybiBDaH0pKSxuLmQoZSxcIkxpbmVcIiwoZnVuY3Rpb24oKXtyZXR1cm4gU2N9KSksbi5kKGUsXCJMaW5lM1wiLChmdW5jdGlvbigpe3JldHVybiBHZH0pKSxuLmQoZSxcIkxpbmVCYXNpY01hdGVyaWFsXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHljfSkpLG4uZChlLFwiTGluZUN1cnZlXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGxofSkpLG4uZChlLFwiTGluZUN1cnZlM1wiLChmdW5jdGlvbigpe3JldHVybiB1aH0pKSxuLmQoZSxcIkxpbmVEYXNoZWRNYXRlcmlhbFwiLChmdW5jdGlvbigpe3JldHVybiBidX0pKSxuLmQoZSxcIkxpbmVMb29wXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIExjfSkpLG4uZChlLFwiTGluZVBpZWNlc1wiLChmdW5jdGlvbigpe3JldHVybiBqcH0pKSxuLmQoZSxcIkxpbmVTZWdtZW50c1wiLChmdW5jdGlvbigpe3JldHVybiBBY30pKSxuLmQoZSxcIkxpbmVTdHJpcFwiLChmdW5jdGlvbigpe3JldHVybiBWcH0pKSxuLmQoZSxcIkxpbmVhckVuY29kaW5nXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEplfSkpLG4uZChlLFwiTGluZWFyRmlsdGVyXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHh0fSkpLG4uZChlLFwiTGluZWFySW50ZXJwb2xhbnRcIiwoZnVuY3Rpb24oKXtyZXR1cm4gVHV9KSksbi5kKGUsXCJMaW5lYXJNaXBNYXBMaW5lYXJGaWx0ZXJcIiwoZnVuY3Rpb24oKXtyZXR1cm4gTXR9KSksbi5kKGUsXCJMaW5lYXJNaXBNYXBOZWFyZXN0RmlsdGVyXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHd0fSkpLG4uZChlLFwiTGluZWFyTWlwbWFwTGluZWFyRmlsdGVyXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIF90fSkpLG4uZChlLFwiTGluZWFyTWlwbWFwTmVhcmVzdEZpbHRlclwiLChmdW5jdGlvbigpe3JldHVybiBidH0pKSxuLmQoZSxcIkxpbmVhclRvbmVNYXBwaW5nXCIsKGZ1bmN0aW9uKCl7cmV0dXJuICR9KSksbi5kKGUsXCJMb2FkZXJcIiwoZnVuY3Rpb24oKXtyZXR1cm4gR3V9KSksbi5kKGUsXCJMb2FkZXJVdGlsc1wiLChmdW5jdGlvbigpe3JldHVybiBPaH0pKSxuLmQoZSxcIkxvYWRpbmdNYW5hZ2VyXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFV1fSkpLG4uZChlLFwiTG9nTHV2RW5jb2RpbmdcIiwoZnVuY3Rpb24oKXtyZXR1cm4gdG59KSksbi5kKGUsXCJMb29wT25jZVwiLChmdW5jdGlvbigpe3JldHVybiBCZX0pKSxuLmQoZSxcIkxvb3BQaW5nUG9uZ1wiLChmdW5jdGlvbigpe3JldHVybiBVZX0pKSxuLmQoZSxcIkxvb3BSZXBlYXRcIiwoZnVuY3Rpb24oKXtyZXR1cm4gRmV9KSksbi5kKGUsXCJMdW1pbmFuY2VBbHBoYUZvcm1hdFwiLChmdW5jdGlvbigpe3JldHVybiBHdH0pKSxuLmQoZSxcIkx1bWluYW5jZUZvcm1hdFwiLChmdW5jdGlvbigpe3JldHVybiB6dH0pKSxuLmQoZSxcIk1PVVNFXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGl9KSksbi5kKGUsXCJNYXRlcmlhbFwiLChmdW5jdGlvbigpe3JldHVybiB3aX0pKSxuLmQoZSxcIk1hdGVyaWFsTG9hZGVyXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIElofSkpLG4uZChlLFwiTWF0aFwiLChmdW5jdGlvbigpe3JldHVybiB6bn0pKSxuLmQoZSxcIk1hdGhVdGlsc1wiLChmdW5jdGlvbigpe3JldHVybiB6bn0pKSxuLmQoZSxcIk1hdHJpeDNcIiwoZnVuY3Rpb24oKXtyZXR1cm4gSG59KSksbi5kKGUsXCJNYXRyaXg0XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFRyfSkpLG4uZChlLFwiTWF4RXF1YXRpb25cIiwoZnVuY3Rpb24oKXtyZXR1cm4gUn0pKSxuLmQoZSxcIk1lc2hcIiwoZnVuY3Rpb24oKXtyZXR1cm4gaG99KSksbi5kKGUsXCJNZXNoQmFzaWNNYXRlcmlhbFwiLChmdW5jdGlvbigpe3JldHVybiBfaX0pKSxuLmQoZSxcIk1lc2hEZXB0aE1hdGVyaWFsXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFNzfSkpLG4uZChlLFwiTWVzaERpc3RhbmNlTWF0ZXJpYWxcIiwoZnVuY3Rpb24oKXtyZXR1cm4gVHN9KSksbi5kKGUsXCJNZXNoRmFjZU1hdGVyaWFsXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFlwfSkpLG4uZChlLFwiTWVzaExhbWJlcnRNYXRlcmlhbFwiLChmdW5jdGlvbigpe3JldHVybiB5dX0pKSxuLmQoZSxcIk1lc2hNYXRjYXBNYXRlcmlhbFwiLChmdW5jdGlvbigpe3JldHVybiB4dX0pKSxuLmQoZSxcIk1lc2hOb3JtYWxNYXRlcmlhbFwiLChmdW5jdGlvbigpe3JldHVybiB2dX0pKSxuLmQoZSxcIk1lc2hQaG9uZ01hdGVyaWFsXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIG11fSkpLG4uZChlLFwiTWVzaFBoeXNpY2FsTWF0ZXJpYWxcIiwoZnVuY3Rpb24oKXtyZXR1cm4gZnV9KSksbi5kKGUsXCJNZXNoU3RhbmRhcmRNYXRlcmlhbFwiLChmdW5jdGlvbigpe3JldHVybiBwdX0pKSxuLmQoZSxcIk1lc2hUb29uTWF0ZXJpYWxcIiwoZnVuY3Rpb24oKXtyZXR1cm4gZ3V9KSksbi5kKGUsXCJNaW5FcXVhdGlvblwiLChmdW5jdGlvbigpe3JldHVybiBMfSkpLG4uZChlLFwiTWlycm9yZWRSZXBlYXRXcmFwcGluZ1wiLChmdW5jdGlvbigpe3JldHVybiBwdH0pKSxuLmQoZSxcIk1peE9wZXJhdGlvblwiLChmdW5jdGlvbigpe3JldHVybiBKfSkpLG4uZChlLFwiTXVsdGlNYXRlcmlhbFwiLChmdW5jdGlvbigpe3JldHVybiBacH0pKSxuLmQoZSxcIk11bHRpcGx5QmxlbmRpbmdcIiwoZnVuY3Rpb24oKXtyZXR1cm4gTX0pKSxuLmQoZSxcIk11bHRpcGx5T3BlcmF0aW9uXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFp9KSksbi5kKGUsXCJOZWFyZXN0RmlsdGVyXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGZ0fSkpLG4uZChlLFwiTmVhcmVzdE1pcE1hcExpbmVhckZpbHRlclwiLChmdW5jdGlvbigpe3JldHVybiB5dH0pKSxuLmQoZSxcIk5lYXJlc3RNaXBNYXBOZWFyZXN0RmlsdGVyXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGd0fSkpLG4uZChlLFwiTmVhcmVzdE1pcG1hcExpbmVhckZpbHRlclwiLChmdW5jdGlvbigpe3JldHVybiB2dH0pKSxuLmQoZSxcIk5lYXJlc3RNaXBtYXBOZWFyZXN0RmlsdGVyXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIG10fSkpLG4uZChlLFwiTmV2ZXJEZXB0aFwiLChmdW5jdGlvbigpe3JldHVybiBIfSkpLG4uZChlLFwiTmV2ZXJTdGVuY2lsRnVuY1wiLChmdW5jdGlvbigpe3JldHVybiB2bn0pKSxuLmQoZSxcIk5vQmxlbmRpbmdcIiwoZnVuY3Rpb24oKXtyZXR1cm4geH0pKSxuLmQoZSxcIk5vQ29sb3JzXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFdwfSkpLG4uZChlLFwiTm9Ub25lTWFwcGluZ1wiLChmdW5jdGlvbigpe3JldHVybiBRfSkpLG4uZChlLFwiTm9ybWFsQW5pbWF0aW9uQmxlbmRNb2RlXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFdlfSkpLG4uZChlLFwiTm9ybWFsQmxlbmRpbmdcIiwoZnVuY3Rpb24oKXtyZXR1cm4gYn0pKSxuLmQoZSxcIk5vdEVxdWFsRGVwdGhcIiwoZnVuY3Rpb24oKXtyZXR1cm4gWX0pKSxuLmQoZSxcIk5vdEVxdWFsU3RlbmNpbEZ1bmNcIiwoZnVuY3Rpb24oKXtyZXR1cm4gX259KSksbi5kKGUsXCJOdW1iZXJLZXlmcmFtZVRyYWNrXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFB1fSkpLG4uZChlLFwiT2JqZWN0M0RcIiwoZnVuY3Rpb24oKXtyZXR1cm4gSnJ9KSksbi5kKGUsXCJPYmplY3RMb2FkZXJcIiwoZnVuY3Rpb24oKXtyZXR1cm4gRmh9KSksbi5kKGUsXCJPYmplY3RTcGFjZU5vcm1hbE1hcFwiLChmdW5jdGlvbigpe3JldHVybiBjbn0pKSxuLmQoZSxcIk9jdGFoZWRyb25CdWZmZXJHZW9tZXRyeVwiLChmdW5jdGlvbigpe3JldHVybiBIbH0pKSxuLmQoZSxcIk9jdGFoZWRyb25HZW9tZXRyeVwiLChmdW5jdGlvbigpe3JldHVybiBrbH0pKSxuLmQoZSxcIk9uZUZhY3RvclwiLChmdW5jdGlvbigpe3JldHVybiBDfSkpLG4uZChlLFwiT25lTWludXNEc3RBbHBoYUZhY3RvclwiLChmdW5jdGlvbigpe3JldHVybiBGfSkpLG4uZChlLFwiT25lTWludXNEc3RDb2xvckZhY3RvclwiLChmdW5jdGlvbigpe3JldHVybiB6fSkpLG4uZChlLFwiT25lTWludXNTcmNBbHBoYUZhY3RvclwiLChmdW5jdGlvbigpe3JldHVybiBEfSkpLG4uZChlLFwiT25lTWludXNTcmNDb2xvckZhY3RvclwiLChmdW5jdGlvbigpe3JldHVybiBPfSkpLG4uZChlLFwiT3J0aG9ncmFwaGljQ2FtZXJhXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFRofSkpLG4uZChlLFwiUENGU2hhZG93TWFwXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGh9KSksbi5kKGUsXCJQQ0ZTb2Z0U2hhZG93TWFwXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGR9KSksbi5kKGUsXCJQTVJFTUdlbmVyYXRvclwiLChmdW5jdGlvbigpe3JldHVybiBPcH0pKSxuLmQoZSxcIlBhcmFtZXRyaWNCdWZmZXJHZW9tZXRyeVwiLChmdW5jdGlvbigpe3JldHVybiBWbH0pKSxuLmQoZSxcIlBhcmFtZXRyaWNHZW9tZXRyeVwiLChmdW5jdGlvbigpe3JldHVybiBqbH0pKSxuLmQoZSxcIlBhcnRpY2xlXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEtwfSkpLG4uZChlLFwiUGFydGljbGVCYXNpY01hdGVyaWFsXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHRmfSkpLG4uZChlLFwiUGFydGljbGVTeXN0ZW1cIiwoZnVuY3Rpb24oKXtyZXR1cm4gUXB9KSksbi5kKGUsXCJQYXJ0aWNsZVN5c3RlbU1hdGVyaWFsXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGVmfSkpLG4uZChlLFwiUGF0aFwiLChmdW5jdGlvbigpe3JldHVybiBnaH0pKSxuLmQoZSxcIlBlcnNwZWN0aXZlQ2FtZXJhXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHdvfSkpLG4uZChlLFwiUGxhbmVcIiwoZnVuY3Rpb24oKXtyZXR1cm4gdGl9KSksbi5kKGUsXCJQbGFuZUJ1ZmZlckdlb21ldHJ5XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIENvfSkpLG4uZChlLFwiUGxhbmVHZW9tZXRyeVwiLChmdW5jdGlvbigpe3JldHVybiBXbH0pKSxuLmQoZSxcIlBsYW5lSGVscGVyXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGRwfSkpLG4uZChlLFwiUG9pbnRDbG91ZFwiLChmdW5jdGlvbigpe3JldHVybiBKcH0pKSxuLmQoZSxcIlBvaW50Q2xvdWRNYXRlcmlhbFwiLChmdW5jdGlvbigpe3JldHVybiAkcH0pKSxuLmQoZSxcIlBvaW50TGlnaHRcIiwoZnVuY3Rpb24oKXtyZXR1cm4gU2h9KSksbi5kKGUsXCJQb2ludExpZ2h0SGVscGVyXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFlkfSkpLG4uZChlLFwiUG9pbnRzXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIE5jfSkpLG4uZChlLFwiUG9pbnRzTWF0ZXJpYWxcIiwoZnVuY3Rpb24oKXtyZXR1cm4gUmN9KSksbi5kKGUsXCJQb2xhckdyaWRIZWxwZXJcIiwoZnVuY3Rpb24oKXtyZXR1cm4gdHB9KSksbi5kKGUsXCJQb2x5aGVkcm9uQnVmZmVyR2VvbWV0cnlcIiwoZnVuY3Rpb24oKXtyZXR1cm4gUWN9KSksbi5kKGUsXCJQb2x5aGVkcm9uR2VvbWV0cnlcIiwoZnVuY3Rpb24oKXtyZXR1cm4gWGx9KSksbi5kKGUsXCJQb3NpdGlvbmFsQXVkaW9cIiwoZnVuY3Rpb24oKXtyZXR1cm4gZGR9KSksbi5kKGUsXCJQcm9wZXJ0eUJpbmRpbmdcIiwoZnVuY3Rpb24oKXtyZXR1cm4gU2R9KSksbi5kKGUsXCJQcm9wZXJ0eU1peGVyXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGZkfSkpLG4uZChlLFwiUXVhZHJhdGljQmV6aWVyQ3VydmVcIiwoZnVuY3Rpb24oKXtyZXR1cm4gaGh9KSksbi5kKGUsXCJRdWFkcmF0aWNCZXppZXJDdXJ2ZTNcIiwoZnVuY3Rpb24oKXtyZXR1cm4gZGh9KSksbi5kKGUsXCJRdWF0ZXJuaW9uXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEpufSkpLG4uZChlLFwiUXVhdGVybmlvbktleWZyYW1lVHJhY2tcIiwoZnVuY3Rpb24oKXtyZXR1cm4gSXV9KSksbi5kKGUsXCJRdWF0ZXJuaW9uTGluZWFySW50ZXJwb2xhbnRcIiwoZnVuY3Rpb24oKXtyZXR1cm4gQ3V9KSksbi5kKGUsXCJSRVZJU0lPTlwiLChmdW5jdGlvbigpe3JldHVybiByfSkpLG4uZChlLFwiUkdCQURlcHRoUGFja2luZ1wiLChmdW5jdGlvbigpe3JldHVybiBhbn0pKSxuLmQoZSxcIlJHQkFGb3JtYXRcIiwoZnVuY3Rpb24oKXtyZXR1cm4gVXR9KSksbi5kKGUsXCJSR0JBSW50ZWdlckZvcm1hdFwiLChmdW5jdGlvbigpe3JldHVybiBadH0pKSxuLmQoZSxcIlJHQkFfQVNUQ18xMHgxMF9Gb3JtYXRcIiwoZnVuY3Rpb24oKXtyZXR1cm4geWV9KSksbi5kKGUsXCJSR0JBX0FTVENfMTB4NV9Gb3JtYXRcIiwoZnVuY3Rpb24oKXtyZXR1cm4gbWV9KSksbi5kKGUsXCJSR0JBX0FTVENfMTB4Nl9Gb3JtYXRcIiwoZnVuY3Rpb24oKXtyZXR1cm4gZ2V9KSksbi5kKGUsXCJSR0JBX0FTVENfMTB4OF9Gb3JtYXRcIiwoZnVuY3Rpb24oKXtyZXR1cm4gdmV9KSksbi5kKGUsXCJSR0JBX0FTVENfMTJ4MTBfRm9ybWF0XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHhlfSkpLG4uZChlLFwiUkdCQV9BU1RDXzEyeDEyX0Zvcm1hdFwiLChmdW5jdGlvbigpe3JldHVybiBiZX0pKSxuLmQoZSxcIlJHQkFfQVNUQ180eDRfRm9ybWF0XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHNlfSkpLG4uZChlLFwiUkdCQV9BU1RDXzV4NF9Gb3JtYXRcIiwoZnVuY3Rpb24oKXtyZXR1cm4gY2V9KSksbi5kKGUsXCJSR0JBX0FTVENfNXg1X0Zvcm1hdFwiLChmdW5jdGlvbigpe3JldHVybiBsZX0pKSxuLmQoZSxcIlJHQkFfQVNUQ182eDVfRm9ybWF0XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHVlfSkpLG4uZChlLFwiUkdCQV9BU1RDXzZ4Nl9Gb3JtYXRcIiwoZnVuY3Rpb24oKXtyZXR1cm4gaGV9KSksbi5kKGUsXCJSR0JBX0FTVENfOHg1X0Zvcm1hdFwiLChmdW5jdGlvbigpe3JldHVybiBkZX0pKSxuLmQoZSxcIlJHQkFfQVNUQ184eDZfRm9ybWF0XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHBlfSkpLG4uZChlLFwiUkdCQV9BU1RDXzh4OF9Gb3JtYXRcIiwoZnVuY3Rpb24oKXtyZXR1cm4gZmV9KSksbi5kKGUsXCJSR0JBX0JQVENfRm9ybWF0XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHdlfSkpLG4uZChlLFwiUkdCQV9FVEMyX0VBQ19Gb3JtYXRcIiwoZnVuY3Rpb24oKXtyZXR1cm4gYWV9KSksbi5kKGUsXCJSR0JBX1BWUlRDXzJCUFBWMV9Gb3JtYXRcIiwoZnVuY3Rpb24oKXtyZXR1cm4gcmV9KSksbi5kKGUsXCJSR0JBX1BWUlRDXzRCUFBWMV9Gb3JtYXRcIiwoZnVuY3Rpb24oKXtyZXR1cm4gbmV9KSksbi5kKGUsXCJSR0JBX1MzVENfRFhUMV9Gb3JtYXRcIiwoZnVuY3Rpb24oKXtyZXR1cm4gS3R9KSksbi5kKGUsXCJSR0JBX1MzVENfRFhUM19Gb3JtYXRcIiwoZnVuY3Rpb24oKXtyZXR1cm4gUXR9KSksbi5kKGUsXCJSR0JBX1MzVENfRFhUNV9Gb3JtYXRcIiwoZnVuY3Rpb24oKXtyZXR1cm4gJHR9KSksbi5kKGUsXCJSR0JERW5jb2RpbmdcIiwoZnVuY3Rpb24oKXtyZXR1cm4gcm59KSksbi5kKGUsXCJSR0JFRW5jb2RpbmdcIiwoZnVuY3Rpb24oKXtyZXR1cm4gJGV9KSksbi5kKGUsXCJSR0JFRm9ybWF0XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEh0fSkpLG4uZChlLFwiUkdCRm9ybWF0XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEZ0fSkpLG4uZChlLFwiUkdCSW50ZWdlckZvcm1hdFwiLChmdW5jdGlvbigpe3JldHVybiBZdH0pKSxuLmQoZSxcIlJHQk0xNkVuY29kaW5nXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIG5ufSkpLG4uZChlLFwiUkdCTTdFbmNvZGluZ1wiLChmdW5jdGlvbigpe3JldHVybiBlbn0pKSxuLmQoZSxcIlJHQl9FVEMxX0Zvcm1hdFwiLChmdW5jdGlvbigpe3JldHVybiBpZX0pKSxuLmQoZSxcIlJHQl9FVEMyX0Zvcm1hdFwiLChmdW5jdGlvbigpe3JldHVybiBvZX0pKSxuLmQoZSxcIlJHQl9QVlJUQ18yQlBQVjFfRm9ybWF0XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGVlfSkpLG4uZChlLFwiUkdCX1BWUlRDXzRCUFBWMV9Gb3JtYXRcIiwoZnVuY3Rpb24oKXtyZXR1cm4gdGV9KSksbi5kKGUsXCJSR0JfUzNUQ19EWFQxX0Zvcm1hdFwiLChmdW5jdGlvbigpe3JldHVybiBKdH0pKSxuLmQoZSxcIlJHRm9ybWF0XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFh0fSkpLG4uZChlLFwiUkdJbnRlZ2VyRm9ybWF0XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHF0fSkpLG4uZChlLFwiUmF3U2hhZGVyTWF0ZXJpYWxcIiwoZnVuY3Rpb24oKXtyZXR1cm4gZHV9KSksbi5kKGUsXCJSYXlcIiwoZnVuY3Rpb24oKXtyZXR1cm4gU3J9KSksbi5kKGUsXCJSYXljYXN0ZXJcIiwoZnVuY3Rpb24oKXtyZXR1cm4gQ2R9KSksbi5kKGUsXCJSZWN0QXJlYUxpZ2h0XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFJofSkpLG4uZChlLFwiUmVkRm9ybWF0XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGp0fSkpLG4uZChlLFwiUmVkSW50ZWdlckZvcm1hdFwiLChmdW5jdGlvbigpe3JldHVybiBXdH0pKSxuLmQoZSxcIlJlaW5oYXJkVG9uZU1hcHBpbmdcIiwoZnVuY3Rpb24oKXtyZXR1cm4gdHR9KSksbi5kKGUsXCJSZXBlYXRXcmFwcGluZ1wiLChmdW5jdGlvbigpe3JldHVybiBodH0pKSxuLmQoZSxcIlJlcGxhY2VTdGVuY2lsT3BcIiwoZnVuY3Rpb24oKXtyZXR1cm4gaG59KSksbi5kKGUsXCJSZXZlcnNlU3VidHJhY3RFcXVhdGlvblwiLChmdW5jdGlvbigpe3JldHVybiBBfSkpLG4uZChlLFwiUmluZ0J1ZmZlckdlb21ldHJ5XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHFsfSkpLG4uZChlLFwiUmluZ0dlb21ldHJ5XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFlsfSkpLG4uZChlLFwiU1JHQjhfQUxQSEE4X0FTVENfMTB4MTBfRm9ybWF0XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIE9lfSkpLG4uZChlLFwiU1JHQjhfQUxQSEE4X0FTVENfMTB4NV9Gb3JtYXRcIiwoZnVuY3Rpb24oKXtyZXR1cm4gUGV9KSksbi5kKGUsXCJTUkdCOF9BTFBIQThfQVNUQ18xMHg2X0Zvcm1hdFwiLChmdW5jdGlvbigpe3JldHVybiBDZX0pKSxuLmQoZSxcIlNSR0I4X0FMUEhBOF9BU1RDXzEweDhfRm9ybWF0XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEllfSkpLG4uZChlLFwiU1JHQjhfQUxQSEE4X0FTVENfMTJ4MTBfRm9ybWF0XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIE5lfSkpLG4uZChlLFwiU1JHQjhfQUxQSEE4X0FTVENfMTJ4MTJfRm9ybWF0XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIERlfSkpLG4uZChlLFwiU1JHQjhfQUxQSEE4X0FTVENfNHg0X0Zvcm1hdFwiLChmdW5jdGlvbigpe3JldHVybiBfZX0pKSxuLmQoZSxcIlNSR0I4X0FMUEhBOF9BU1RDXzV4NF9Gb3JtYXRcIiwoZnVuY3Rpb24oKXtyZXR1cm4gTWV9KSksbi5kKGUsXCJTUkdCOF9BTFBIQThfQVNUQ181eDVfRm9ybWF0XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFNlfSkpLG4uZChlLFwiU1JHQjhfQUxQSEE4X0FTVENfNng1X0Zvcm1hdFwiLChmdW5jdGlvbigpe3JldHVybiBUZX0pKSxuLmQoZSxcIlNSR0I4X0FMUEhBOF9BU1RDXzZ4Nl9Gb3JtYXRcIiwoZnVuY3Rpb24oKXtyZXR1cm4gRWV9KSksbi5kKGUsXCJTUkdCOF9BTFBIQThfQVNUQ184eDVfRm9ybWF0XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEFlfSkpLG4uZChlLFwiU1JHQjhfQUxQSEE4X0FTVENfOHg2X0Zvcm1hdFwiLChmdW5jdGlvbigpe3JldHVybiBMZX0pKSxuLmQoZSxcIlNSR0I4X0FMUEhBOF9BU1RDXzh4OF9Gb3JtYXRcIiwoZnVuY3Rpb24oKXtyZXR1cm4gUmV9KSksbi5kKGUsXCJTY2VuZVwiLChmdW5jdGlvbigpe3JldHVybiB6c30pKSxuLmQoZSxcIlNjZW5lVXRpbHNcIiwoZnVuY3Rpb24oKXtyZXR1cm4gQWZ9KSksbi5kKGUsXCJTaGFkZXJDaHVua1wiLChmdW5jdGlvbigpe3JldHVybiBJb30pKSxuLmQoZSxcIlNoYWRlckxpYlwiLChmdW5jdGlvbigpe3JldHVybiBOb30pKSxuLmQoZSxcIlNoYWRlck1hdGVyaWFsXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHhvfSkpLG4uZChlLFwiU2hhZG93TWF0ZXJpYWxcIiwoZnVuY3Rpb24oKXtyZXR1cm4gaHV9KSksbi5kKGUsXCJTaGFwZVwiLChmdW5jdGlvbigpe3JldHVybiB2aH0pKSxuLmQoZSxcIlNoYXBlQnVmZmVyR2VvbWV0cnlcIiwoZnVuY3Rpb24oKXtyZXR1cm4gWmx9KSksbi5kKGUsXCJTaGFwZUdlb21ldHJ5XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEpsfSkpLG4uZChlLFwiU2hhcGVQYXRoXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGtofSkpLG4uZChlLFwiU2hhcGVVdGlsc1wiLChmdW5jdGlvbigpe3JldHVybiBDbH0pKSxuLmQoZSxcIlNob3J0VHlwZVwiLChmdW5jdGlvbigpe3JldHVybiBFdH0pKSxuLmQoZSxcIlNrZWxldG9uXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGRjfSkpLG4uZChlLFwiU2tlbGV0b25IZWxwZXJcIiwoZnVuY3Rpb24oKXtyZXR1cm4gcWR9KSksbi5kKGUsXCJTa2lubmVkTWVzaFwiLChmdW5jdGlvbigpe3JldHVybiBjY30pKSxuLmQoZSxcIlNtb290aFNoYWRpbmdcIiwoZnVuY3Rpb24oKXtyZXR1cm4geX0pKSxuLmQoZSxcIlNwaGVyZVwiLChmdW5jdGlvbigpe3JldHVybiBncn0pKSxuLmQoZSxcIlNwaGVyZUJ1ZmZlckdlb21ldHJ5XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEtsfSkpLG4uZChlLFwiU3BoZXJlR2VvbWV0cnlcIiwoZnVuY3Rpb24oKXtyZXR1cm4gUWx9KSksbi5kKGUsXCJTcGhlcmljYWxcIiwoZnVuY3Rpb24oKXtyZXR1cm4gTmR9KSksbi5kKGUsXCJTcGhlcmljYWxIYXJtb25pY3MzXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFBofSkpLG4uZChlLFwiU3BsaW5lXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGdmfSkpLG4uZChlLFwiU3BsaW5lQ3VydmVcIiwoZnVuY3Rpb24oKXtyZXR1cm4gcGh9KSksbi5kKGUsXCJTcGxpbmVDdXJ2ZTNcIiwoZnVuY3Rpb24oKXtyZXR1cm4gbWZ9KSksbi5kKGUsXCJTcG90TGlnaHRcIiwoZnVuY3Rpb24oKXtyZXR1cm4gX2h9KSksbi5kKGUsXCJTcG90TGlnaHRIZWxwZXJcIiwoZnVuY3Rpb24oKXtyZXR1cm4gVmR9KSksbi5kKGUsXCJTcHJpdGVcIiwoZnVuY3Rpb24oKXtyZXR1cm4gcmN9KSksbi5kKGUsXCJTcHJpdGVNYXRlcmlhbFwiLChmdW5jdGlvbigpe3JldHVybiBWc30pKSxuLmQoZSxcIlNyY0FscGhhRmFjdG9yXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIE59KSksbi5kKGUsXCJTcmNBbHBoYVNhdHVyYXRlRmFjdG9yXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEd9KSksbi5kKGUsXCJTcmNDb2xvckZhY3RvclwiLChmdW5jdGlvbigpe3JldHVybiBJfSkpLG4uZChlLFwiU3RhdGljQ29weVVzYWdlXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIENufSkpLG4uZChlLFwiU3RhdGljRHJhd1VzYWdlXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFRufSkpLG4uZChlLFwiU3RhdGljUmVhZFVzYWdlXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIExufSkpLG4uZChlLFwiU3RlcmVvQ2FtZXJhXCIsKGZ1bmN0aW9uKCl7cmV0dXJuICRofSkpLG4uZChlLFwiU3RyZWFtQ29weVVzYWdlXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIE9ufSkpLG4uZChlLFwiU3RyZWFtRHJhd1VzYWdlXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEFufSkpLG4uZChlLFwiU3RyZWFtUmVhZFVzYWdlXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFBufSkpLG4uZChlLFwiU3RyaW5nS2V5ZnJhbWVUcmFja1wiLChmdW5jdGlvbigpe3JldHVybiBPdX0pKSxuLmQoZSxcIlN1YnRyYWN0RXF1YXRpb25cIiwoZnVuY3Rpb24oKXtyZXR1cm4gRX0pKSxuLmQoZSxcIlN1YnRyYWN0aXZlQmxlbmRpbmdcIiwoZnVuY3Rpb24oKXtyZXR1cm4gX30pKSxuLmQoZSxcIlRPVUNIXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIG99KSksbi5kKGUsXCJUYW5nZW50U3BhY2VOb3JtYWxNYXBcIiwoZnVuY3Rpb24oKXtyZXR1cm4gc259KSksbi5kKGUsXCJUZXRyYWhlZHJvbkJ1ZmZlckdlb21ldHJ5XCIsKGZ1bmN0aW9uKCl7cmV0dXJuICRsfSkpLG4uZChlLFwiVGV0cmFoZWRyb25HZW9tZXRyeVwiLChmdW5jdGlvbigpe3JldHVybiB0dX0pKSxuLmQoZSxcIlRleHRCdWZmZXJHZW9tZXRyeVwiLChmdW5jdGlvbigpe3JldHVybiBldX0pKSxuLmQoZSxcIlRleHRHZW9tZXRyeVwiLChmdW5jdGlvbigpe3JldHVybiBudX0pKSxuLmQoZSxcIlRleHR1cmVcIiwoZnVuY3Rpb24oKXtyZXR1cm4gV259KSksbi5kKGUsXCJUZXh0dXJlTG9hZGVyXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFl1fSkpLG4uZChlLFwiVG9ydXNCdWZmZXJHZW9tZXRyeVwiLChmdW5jdGlvbigpe3JldHVybiBydX0pKSxuLmQoZSxcIlRvcnVzR2VvbWV0cnlcIiwoZnVuY3Rpb24oKXtyZXR1cm4gaXV9KSksbi5kKGUsXCJUb3J1c0tub3RCdWZmZXJHZW9tZXRyeVwiLChmdW5jdGlvbigpe3JldHVybiBvdX0pKSxuLmQoZSxcIlRvcnVzS25vdEdlb21ldHJ5XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGF1fSkpLG4uZChlLFwiVHJpYW5nbGVcIiwoZnVuY3Rpb24oKXtyZXR1cm4gaGl9KSksbi5kKGUsXCJUcmlhbmdsZUZhbkRyYXdNb2RlXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFplfSkpLG4uZChlLFwiVHJpYW5nbGVTdHJpcERyYXdNb2RlXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFllfSkpLG4uZChlLFwiVHJpYW5nbGVzRHJhd01vZGVcIiwoZnVuY3Rpb24oKXtyZXR1cm4gcWV9KSksbi5kKGUsXCJUdWJlQnVmZmVyR2VvbWV0cnlcIiwoZnVuY3Rpb24oKXtyZXR1cm4gc3V9KSksbi5kKGUsXCJUdWJlR2VvbWV0cnlcIiwoZnVuY3Rpb24oKXtyZXR1cm4gY3V9KSksbi5kKGUsXCJVVk1hcHBpbmdcIiwoZnVuY3Rpb24oKXtyZXR1cm4gaXR9KSksbi5kKGUsXCJVaW50MTZBdHRyaWJ1dGVcIiwoZnVuY3Rpb24oKXtyZXR1cm4gbGZ9KSksbi5kKGUsXCJVaW50MTZCdWZmZXJBdHRyaWJ1dGVcIiwoZnVuY3Rpb24oKXtyZXR1cm4gUGl9KSksbi5kKGUsXCJVaW50MzJBdHRyaWJ1dGVcIiwoZnVuY3Rpb24oKXtyZXR1cm4gaGZ9KSksbi5kKGUsXCJVaW50MzJCdWZmZXJBdHRyaWJ1dGVcIiwoZnVuY3Rpb24oKXtyZXR1cm4gSWl9KSksbi5kKGUsXCJVaW50OEF0dHJpYnV0ZVwiLChmdW5jdGlvbigpe3JldHVybiBhZn0pKSxuLmQoZSxcIlVpbnQ4QnVmZmVyQXR0cmlidXRlXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEFpfSkpLG4uZChlLFwiVWludDhDbGFtcGVkQXR0cmlidXRlXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHNmfSkpLG4uZChlLFwiVWludDhDbGFtcGVkQnVmZmVyQXR0cmlidXRlXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIExpfSkpLG4uZChlLFwiVW5pZm9ybVwiLChmdW5jdGlvbigpe3JldHVybiBMZH0pKSxuLmQoZSxcIlVuaWZvcm1zTGliXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIE9vfSkpLG4uZChlLFwiVW5pZm9ybXNVdGlsc1wiLChmdW5jdGlvbigpe3JldHVybiB5b30pKSxuLmQoZSxcIlVuc2lnbmVkQnl0ZVR5cGVcIiwoZnVuY3Rpb24oKXtyZXR1cm4gU3R9KSksbi5kKGUsXCJVbnNpZ25lZEludDI0OFR5cGVcIiwoZnVuY3Rpb24oKXtyZXR1cm4gRHR9KSksbi5kKGUsXCJVbnNpZ25lZEludFR5cGVcIiwoZnVuY3Rpb24oKXtyZXR1cm4gUnR9KSksbi5kKGUsXCJVbnNpZ25lZFNob3J0NDQ0NFR5cGVcIiwoZnVuY3Rpb24oKXtyZXR1cm4gSXR9KSksbi5kKGUsXCJVbnNpZ25lZFNob3J0NTU1MVR5cGVcIiwoZnVuY3Rpb24oKXtyZXR1cm4gT3R9KSksbi5kKGUsXCJVbnNpZ25lZFNob3J0NTY1VHlwZVwiLChmdW5jdGlvbigpe3JldHVybiBOdH0pKSxuLmQoZSxcIlVuc2lnbmVkU2hvcnRUeXBlXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEF0fSkpLG4uZChlLFwiVlNNU2hhZG93TWFwXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHB9KSksbi5kKGUsXCJWZWN0b3IyXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEdufSkpLG4uZChlLFwiVmVjdG9yM1wiLChmdW5jdGlvbigpe3JldHVybiBLbn0pKSxuLmQoZSxcIlZlY3RvcjRcIiwoZnVuY3Rpb24oKXtyZXR1cm4gcW59KSksbi5kKGUsXCJWZWN0b3JLZXlmcmFtZVRyYWNrXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIE51fSkpLG4uZChlLFwiVmVydGV4XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIG5mfSkpLG4uZChlLFwiVmVydGV4Q29sb3JzXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHFwfSkpLG4uZChlLFwiVmlkZW9UZXh0dXJlXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEJjfSkpLG4uZChlLFwiV2ViR0wxUmVuZGVyZXJcIiwoZnVuY3Rpb24oKXtyZXR1cm4gQnN9KSksbi5kKGUsXCJXZWJHTEN1YmVSZW5kZXJUYXJnZXRcIiwoZnVuY3Rpb24oKXtyZXR1cm4gU299KSksbi5kKGUsXCJXZWJHTE11bHRpc2FtcGxlUmVuZGVyVGFyZ2V0XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFpufSkpLG4uZChlLFwiV2ViR0xSZW5kZXJUYXJnZXRcIiwoZnVuY3Rpb24oKXtyZXR1cm4gWW59KSksbi5kKGUsXCJXZWJHTFJlbmRlclRhcmdldEN1YmVcIiwoZnVuY3Rpb24oKXtyZXR1cm4gTWZ9KSksbi5kKGUsXCJXZWJHTFJlbmRlcmVyXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIERzfSkpLG4uZChlLFwiV2ViR0xVdGlsc1wiLChmdW5jdGlvbigpe3JldHVybiBSc30pKSxuLmQoZSxcIldpcmVmcmFtZUdlb21ldHJ5XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGx1fSkpLG4uZChlLFwiV2lyZWZyYW1lSGVscGVyXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGJmfSkpLG4uZChlLFwiV3JhcEFyb3VuZEVuZGluZ1wiLChmdW5jdGlvbigpe3JldHVybiBqZX0pKSxuLmQoZSxcIlhIUkxvYWRlclwiLChmdW5jdGlvbigpe3JldHVybiB3Zn0pKSxuLmQoZSxcIlplcm9DdXJ2YXR1cmVFbmRpbmdcIiwoZnVuY3Rpb24oKXtyZXR1cm4ga2V9KSksbi5kKGUsXCJaZXJvRmFjdG9yXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFB9KSksbi5kKGUsXCJaZXJvU2xvcGVFbmRpbmdcIiwoZnVuY3Rpb24oKXtyZXR1cm4gVmV9KSksbi5kKGUsXCJaZXJvU3RlbmNpbE9wXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGxufSkpLG4uZChlLFwic1JHQkVuY29kaW5nXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEtlfSkpO2NvbnN0IHI9XCIxMjNcIixpPXtMRUZUOjAsTUlERExFOjEsUklHSFQ6MixST1RBVEU6MCxET0xMWToxLFBBTjoyfSxvPXtST1RBVEU6MCxQQU46MSxET0xMWV9QQU46MixET0xMWV9ST1RBVEU6M30sYT0wLHM9MSxjPTIsbD0zLHU9MCxoPTEsZD0yLHA9MyxmPTAsbT0xLGc9Mix2PTEseT0yLHg9MCxiPTEsdz0yLF89MyxNPTQsUz01LFQ9MTAwLEU9MTAxLEE9MTAyLEw9MTAzLFI9MTA0LFA9MjAwLEM9MjAxLEk9MjAyLE89MjAzLE49MjA0LEQ9MjA1LEI9MjA2LEY9MjA3LFU9MjA4LHo9MjA5LEc9MjEwLEg9MCxrPTEsVj0yLGo9MyxXPTQsWD01LHE9NixZPTcsWj0wLEo9MSxLPTIsUT0wLCQ9MSx0dD0yLGV0PTMsbnQ9NCxydD01LGl0PTMwMCxvdD0zMDEsYXQ9MzAyLHN0PTMwMyxjdD0zMDQsbHQ9MzA2LHV0PTMwNyxodD0xZTMsZHQ9MTAwMSxwdD0xMDAyLGZ0PTEwMDMsbXQ9MTAwNCxndD0xMDA0LHZ0PTEwMDUseXQ9MTAwNSx4dD0xMDA2LGJ0PTEwMDcsd3Q9MTAwNyxfdD0xMDA4LE10PTEwMDgsU3Q9MTAwOSxUdD0xMDEwLEV0PTEwMTEsQXQ9MTAxMixMdD0xMDEzLFJ0PTEwMTQsUHQ9MTAxNSxDdD0xMDE2LEl0PTEwMTcsT3Q9MTAxOCxOdD0xMDE5LER0PTEwMjAsQnQ9MTAyMSxGdD0xMDIyLFV0PTEwMjMsenQ9MTAyNCxHdD0xMDI1LEh0PVV0LGt0PTEwMjYsVnQ9MTAyNyxqdD0xMDI4LFd0PTEwMjksWHQ9MTAzMCxxdD0xMDMxLFl0PTEwMzIsWnQ9MTAzMyxKdD0zMzc3NixLdD0zMzc3NyxRdD0zMzc3OCwkdD0zMzc3OSx0ZT0zNTg0MCxlZT0zNTg0MSxuZT0zNTg0MixyZT0zNTg0MyxpZT0zNjE5NixvZT0zNzQ5MixhZT0zNzQ5NixzZT0zNzgwOCxjZT0zNzgwOSxsZT0zNzgxMCx1ZT0zNzgxMSxoZT0zNzgxMixkZT0zNzgxMyxwZT0zNzgxNCxmZT0zNzgxNSxtZT0zNzgxNixnZT0zNzgxNyx2ZT0zNzgxOCx5ZT0zNzgxOSx4ZT0zNzgyMCxiZT0zNzgyMSx3ZT0zNjQ5MixfZT0zNzg0MCxNZT0zNzg0MSxTZT0zNzg0MixUZT0zNzg0MyxFZT0zNzg0NCxBZT0zNzg0NSxMZT0zNzg0NixSZT0zNzg0NyxQZT0zNzg0OCxDZT0zNzg0OSxJZT0zNzg1MCxPZT0zNzg1MSxOZT0zNzg1MixEZT0zNzg1MyxCZT0yMjAwLEZlPTIyMDEsVWU9MjIwMix6ZT0yMzAwLEdlPTIzMDEsSGU9MjMwMixrZT0yNDAwLFZlPTI0MDEsamU9MjQwMixXZT0yNTAwLFhlPTI1MDEscWU9MCxZZT0xLFplPTIsSmU9M2UzLEtlPTMwMDEsUWU9MzAwNywkZT0zMDAyLHRuPTMwMDMsZW49MzAwNCxubj0zMDA1LHJuPTMwMDYsb249MzIwMCxhbj0zMjAxLHNuPTAsY249MSxsbj0wLHVuPTc2ODAsaG49NzY4MSxkbj03NjgyLHBuPTc2ODMsZm49MzQwNTUsbW49MzQwNTYsZ249NTM4Nix2bj01MTIseW49NTEzLHhuPTUxNCxibj01MTUsd249NTE2LF9uPTUxNyxNbj01MTgsU249NTE5LFRuPTM1MDQ0LEVuPTM1MDQ4LEFuPTM1MDQwLExuPTM1MDQ1LFJuPTM1MDQ5LFBuPTM1MDQxLENuPTM1MDQ2LEluPTM1MDUwLE9uPTM1MDQyLE5uPVwiMTAwXCIsRG49XCIzMDAgZXNcIjtmdW5jdGlvbiBCbigpe31PYmplY3QuYXNzaWduKEJuLnByb3RvdHlwZSx7YWRkRXZlbnRMaXN0ZW5lcjpmdW5jdGlvbih0LGUpe3ZvaWQgMD09PXRoaXMuX2xpc3RlbmVycyYmKHRoaXMuX2xpc3RlbmVycz17fSk7Y29uc3Qgbj10aGlzLl9saXN0ZW5lcnM7dm9pZCAwPT09blt0XSYmKG5bdF09W10pLC0xPT09blt0XS5pbmRleE9mKGUpJiZuW3RdLnB1c2goZSl9LGhhc0V2ZW50TGlzdGVuZXI6ZnVuY3Rpb24odCxlKXtpZih2b2lkIDA9PT10aGlzLl9saXN0ZW5lcnMpcmV0dXJuITE7Y29uc3Qgbj10aGlzLl9saXN0ZW5lcnM7cmV0dXJuIHZvaWQgMCE9PW5bdF0mJi0xIT09blt0XS5pbmRleE9mKGUpfSxyZW1vdmVFdmVudExpc3RlbmVyOmZ1bmN0aW9uKHQsZSl7aWYodm9pZCAwPT09dGhpcy5fbGlzdGVuZXJzKXJldHVybjtjb25zdCBuPXRoaXMuX2xpc3RlbmVyc1t0XTtpZih2b2lkIDAhPT1uKXtjb25zdCB0PW4uaW5kZXhPZihlKTstMSE9PXQmJm4uc3BsaWNlKHQsMSl9fSxkaXNwYXRjaEV2ZW50OmZ1bmN0aW9uKHQpe2lmKHZvaWQgMD09PXRoaXMuX2xpc3RlbmVycylyZXR1cm47Y29uc3QgZT10aGlzLl9saXN0ZW5lcnNbdC50eXBlXTtpZih2b2lkIDAhPT1lKXt0LnRhcmdldD10aGlzO2NvbnN0IG49ZS5zbGljZSgwKTtmb3IobGV0IGU9MCxyPW4ubGVuZ3RoO2U8cjtlKyspbltlXS5jYWxsKHRoaXMsdCl9fX0pO2NvbnN0IEZuPVtdO2ZvcihsZXQgdD0wO3Q8MjU2O3QrKylGblt0XT0odDwxNj9cIjBcIjpcIlwiKSt0LnRvU3RyaW5nKDE2KTtsZXQgVW49MTIzNDU2Nztjb25zdCB6bj17REVHMlJBRDpNYXRoLlBJLzE4MCxSQUQyREVHOjE4MC9NYXRoLlBJLGdlbmVyYXRlVVVJRDpmdW5jdGlvbigpe2NvbnN0IHQ9NDI5NDk2NzI5NSpNYXRoLnJhbmRvbSgpfDAsZT00Mjk0OTY3Mjk1Kk1hdGgucmFuZG9tKCl8MCxuPTQyOTQ5NjcyOTUqTWF0aC5yYW5kb20oKXwwLHI9NDI5NDk2NzI5NSpNYXRoLnJhbmRvbSgpfDA7cmV0dXJuKEZuWzI1NSZ0XStGblt0Pj44JjI1NV0rRm5bdD4+MTYmMjU1XStGblt0Pj4yNCYyNTVdK1wiLVwiK0ZuWzI1NSZlXStGbltlPj44JjI1NV0rXCItXCIrRm5bZT4+MTYmMTV8NjRdK0ZuW2U+PjI0JjI1NV0rXCItXCIrRm5bNjMmbnwxMjhdK0ZuW24+PjgmMjU1XStcIi1cIitGbltuPj4xNiYyNTVdK0ZuW24+PjI0JjI1NV0rRm5bMjU1JnJdK0ZuW3I+PjgmMjU1XStGbltyPj4xNiYyNTVdK0ZuW3I+PjI0JjI1NV0pLnRvVXBwZXJDYXNlKCl9LGNsYW1wOmZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gTWF0aC5tYXgoZSxNYXRoLm1pbihuLHQpKX0sZXVjbGlkZWFuTW9kdWxvOmZ1bmN0aW9uKHQsZSl7cmV0dXJuKHQlZStlKSVlfSxtYXBMaW5lYXI6ZnVuY3Rpb24odCxlLG4scixpKXtyZXR1cm4gcisodC1lKSooaS1yKS8obi1lKX0sbGVycDpmdW5jdGlvbih0LGUsbil7cmV0dXJuKDEtbikqdCtuKmV9LHNtb290aHN0ZXA6ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0PD1lPzA6dD49bj8xOih0PSh0LWUpLyhuLWUpKSp0KigzLTIqdCl9LHNtb290aGVyc3RlcDpmdW5jdGlvbih0LGUsbil7cmV0dXJuIHQ8PWU/MDp0Pj1uPzE6KHQ9KHQtZSkvKG4tZSkpKnQqdCoodCooNip0LTE1KSsxMCl9LHJhbmRJbnQ6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdCtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqKGUtdCsxKSl9LHJhbmRGbG9hdDpmdW5jdGlvbih0LGUpe3JldHVybiB0K01hdGgucmFuZG9tKCkqKGUtdCl9LHJhbmRGbG9hdFNwcmVhZDpmdW5jdGlvbih0KXtyZXR1cm4gdCooLjUtTWF0aC5yYW5kb20oKSl9LHNlZWRlZFJhbmRvbTpmdW5jdGlvbih0KXtyZXR1cm4gdm9pZCAwIT09dCYmKFVuPXQlMjE0NzQ4MzY0NyksVW49MTY4MDcqVW4lMjE0NzQ4MzY0NywoVW4tMSkvMjE0NzQ4MzY0Nn0sZGVnVG9SYWQ6ZnVuY3Rpb24odCl7cmV0dXJuIHQqem4uREVHMlJBRH0scmFkVG9EZWc6ZnVuY3Rpb24odCl7cmV0dXJuIHQqem4uUkFEMkRFR30saXNQb3dlck9mVHdvOmZ1bmN0aW9uKHQpe3JldHVybiAwPT0odCZ0LTEpJiYwIT09dH0sY2VpbFBvd2VyT2ZUd286ZnVuY3Rpb24odCl7cmV0dXJuIE1hdGgucG93KDIsTWF0aC5jZWlsKE1hdGgubG9nKHQpL01hdGguTE4yKSl9LGZsb29yUG93ZXJPZlR3bzpmdW5jdGlvbih0KXtyZXR1cm4gTWF0aC5wb3coMixNYXRoLmZsb29yKE1hdGgubG9nKHQpL01hdGguTE4yKSl9LHNldFF1YXRlcm5pb25Gcm9tUHJvcGVyRXVsZXI6ZnVuY3Rpb24odCxlLG4scixpKXtjb25zdCBvPU1hdGguY29zLGE9TWF0aC5zaW4scz1vKG4vMiksYz1hKG4vMiksbD1vKChlK3IpLzIpLHU9YSgoZStyKS8yKSxoPW8oKGUtcikvMiksZD1hKChlLXIpLzIpLHA9bygoci1lKS8yKSxmPWEoKHItZSkvMik7c3dpdGNoKGkpe2Nhc2VcIlhZWFwiOnQuc2V0KHMqdSxjKmgsYypkLHMqbCk7YnJlYWs7Y2FzZVwiWVpZXCI6dC5zZXQoYypkLHMqdSxjKmgscypsKTticmVhaztjYXNlXCJaWFpcIjp0LnNldChjKmgsYypkLHMqdSxzKmwpO2JyZWFrO2Nhc2VcIlhaWFwiOnQuc2V0KHMqdSxjKmYsYypwLHMqbCk7YnJlYWs7Y2FzZVwiWVhZXCI6dC5zZXQoYypwLHMqdSxjKmYscypsKTticmVhaztjYXNlXCJaWVpcIjp0LnNldChjKmYsYypwLHMqdSxzKmwpO2JyZWFrO2RlZmF1bHQ6Y29uc29sZS53YXJuKFwiVEhSRUUuTWF0aFV0aWxzOiAuc2V0UXVhdGVybmlvbkZyb21Qcm9wZXJFdWxlcigpIGVuY291bnRlcmVkIGFuIHVua25vd24gb3JkZXI6IFwiK2kpfX19O2NsYXNzIEdue2NvbnN0cnVjdG9yKHQ9MCxlPTApe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiaXNWZWN0b3IyXCIse3ZhbHVlOiEwfSksdGhpcy54PXQsdGhpcy55PWV9Z2V0IHdpZHRoKCl7cmV0dXJuIHRoaXMueH1zZXQgd2lkdGgodCl7dGhpcy54PXR9Z2V0IGhlaWdodCgpe3JldHVybiB0aGlzLnl9c2V0IGhlaWdodCh0KXt0aGlzLnk9dH1zZXQodCxlKXtyZXR1cm4gdGhpcy54PXQsdGhpcy55PWUsdGhpc31zZXRTY2FsYXIodCl7cmV0dXJuIHRoaXMueD10LHRoaXMueT10LHRoaXN9c2V0WCh0KXtyZXR1cm4gdGhpcy54PXQsdGhpc31zZXRZKHQpe3JldHVybiB0aGlzLnk9dCx0aGlzfXNldENvbXBvbmVudCh0LGUpe3N3aXRjaCh0KXtjYXNlIDA6dGhpcy54PWU7YnJlYWs7Y2FzZSAxOnRoaXMueT1lO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKFwiaW5kZXggaXMgb3V0IG9mIHJhbmdlOiBcIit0KX1yZXR1cm4gdGhpc31nZXRDb21wb25lbnQodCl7c3dpdGNoKHQpe2Nhc2UgMDpyZXR1cm4gdGhpcy54O2Nhc2UgMTpyZXR1cm4gdGhpcy55O2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKFwiaW5kZXggaXMgb3V0IG9mIHJhbmdlOiBcIit0KX19Y2xvbmUoKXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy54LHRoaXMueSl9Y29weSh0KXtyZXR1cm4gdGhpcy54PXQueCx0aGlzLnk9dC55LHRoaXN9YWRkKHQsZSl7cmV0dXJuIHZvaWQgMCE9PWU/KGNvbnNvbGUud2FybihcIlRIUkVFLlZlY3RvcjI6IC5hZGQoKSBub3cgb25seSBhY2NlcHRzIG9uZSBhcmd1bWVudC4gVXNlIC5hZGRWZWN0b3JzKCBhLCBiICkgaW5zdGVhZC5cIiksdGhpcy5hZGRWZWN0b3JzKHQsZSkpOih0aGlzLngrPXQueCx0aGlzLnkrPXQueSx0aGlzKX1hZGRTY2FsYXIodCl7cmV0dXJuIHRoaXMueCs9dCx0aGlzLnkrPXQsdGhpc31hZGRWZWN0b3JzKHQsZSl7cmV0dXJuIHRoaXMueD10LngrZS54LHRoaXMueT10LnkrZS55LHRoaXN9YWRkU2NhbGVkVmVjdG9yKHQsZSl7cmV0dXJuIHRoaXMueCs9dC54KmUsdGhpcy55Kz10LnkqZSx0aGlzfXN1Yih0LGUpe3JldHVybiB2b2lkIDAhPT1lPyhjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3IyOiAuc3ViKCkgbm93IG9ubHkgYWNjZXB0cyBvbmUgYXJndW1lbnQuIFVzZSAuc3ViVmVjdG9ycyggYSwgYiApIGluc3RlYWQuXCIpLHRoaXMuc3ViVmVjdG9ycyh0LGUpKToodGhpcy54LT10LngsdGhpcy55LT10LnksdGhpcyl9c3ViU2NhbGFyKHQpe3JldHVybiB0aGlzLngtPXQsdGhpcy55LT10LHRoaXN9c3ViVmVjdG9ycyh0LGUpe3JldHVybiB0aGlzLng9dC54LWUueCx0aGlzLnk9dC55LWUueSx0aGlzfW11bHRpcGx5KHQpe3JldHVybiB0aGlzLngqPXQueCx0aGlzLnkqPXQueSx0aGlzfW11bHRpcGx5U2NhbGFyKHQpe3JldHVybiB0aGlzLngqPXQsdGhpcy55Kj10LHRoaXN9ZGl2aWRlKHQpe3JldHVybiB0aGlzLngvPXQueCx0aGlzLnkvPXQueSx0aGlzfWRpdmlkZVNjYWxhcih0KXtyZXR1cm4gdGhpcy5tdWx0aXBseVNjYWxhcigxL3QpfWFwcGx5TWF0cml4Myh0KXtjb25zdCBlPXRoaXMueCxuPXRoaXMueSxyPXQuZWxlbWVudHM7cmV0dXJuIHRoaXMueD1yWzBdKmUrclszXSpuK3JbNl0sdGhpcy55PXJbMV0qZStyWzRdKm4rcls3XSx0aGlzfW1pbih0KXtyZXR1cm4gdGhpcy54PU1hdGgubWluKHRoaXMueCx0LngpLHRoaXMueT1NYXRoLm1pbih0aGlzLnksdC55KSx0aGlzfW1heCh0KXtyZXR1cm4gdGhpcy54PU1hdGgubWF4KHRoaXMueCx0LngpLHRoaXMueT1NYXRoLm1heCh0aGlzLnksdC55KSx0aGlzfWNsYW1wKHQsZSl7cmV0dXJuIHRoaXMueD1NYXRoLm1heCh0LngsTWF0aC5taW4oZS54LHRoaXMueCkpLHRoaXMueT1NYXRoLm1heCh0LnksTWF0aC5taW4oZS55LHRoaXMueSkpLHRoaXN9Y2xhbXBTY2FsYXIodCxlKXtyZXR1cm4gdGhpcy54PU1hdGgubWF4KHQsTWF0aC5taW4oZSx0aGlzLngpKSx0aGlzLnk9TWF0aC5tYXgodCxNYXRoLm1pbihlLHRoaXMueSkpLHRoaXN9Y2xhbXBMZW5ndGgodCxlKXtjb25zdCBuPXRoaXMubGVuZ3RoKCk7cmV0dXJuIHRoaXMuZGl2aWRlU2NhbGFyKG58fDEpLm11bHRpcGx5U2NhbGFyKE1hdGgubWF4KHQsTWF0aC5taW4oZSxuKSkpfWZsb29yKCl7cmV0dXJuIHRoaXMueD1NYXRoLmZsb29yKHRoaXMueCksdGhpcy55PU1hdGguZmxvb3IodGhpcy55KSx0aGlzfWNlaWwoKXtyZXR1cm4gdGhpcy54PU1hdGguY2VpbCh0aGlzLngpLHRoaXMueT1NYXRoLmNlaWwodGhpcy55KSx0aGlzfXJvdW5kKCl7cmV0dXJuIHRoaXMueD1NYXRoLnJvdW5kKHRoaXMueCksdGhpcy55PU1hdGgucm91bmQodGhpcy55KSx0aGlzfXJvdW5kVG9aZXJvKCl7cmV0dXJuIHRoaXMueD10aGlzLng8MD9NYXRoLmNlaWwodGhpcy54KTpNYXRoLmZsb29yKHRoaXMueCksdGhpcy55PXRoaXMueTwwP01hdGguY2VpbCh0aGlzLnkpOk1hdGguZmxvb3IodGhpcy55KSx0aGlzfW5lZ2F0ZSgpe3JldHVybiB0aGlzLng9LXRoaXMueCx0aGlzLnk9LXRoaXMueSx0aGlzfWRvdCh0KXtyZXR1cm4gdGhpcy54KnQueCt0aGlzLnkqdC55fWNyb3NzKHQpe3JldHVybiB0aGlzLngqdC55LXRoaXMueSp0Lnh9bGVuZ3RoU3EoKXtyZXR1cm4gdGhpcy54KnRoaXMueCt0aGlzLnkqdGhpcy55fWxlbmd0aCgpe3JldHVybiBNYXRoLnNxcnQodGhpcy54KnRoaXMueCt0aGlzLnkqdGhpcy55KX1tYW5oYXR0YW5MZW5ndGgoKXtyZXR1cm4gTWF0aC5hYnModGhpcy54KStNYXRoLmFicyh0aGlzLnkpfW5vcm1hbGl6ZSgpe3JldHVybiB0aGlzLmRpdmlkZVNjYWxhcih0aGlzLmxlbmd0aCgpfHwxKX1hbmdsZSgpe3JldHVybiBNYXRoLmF0YW4yKC10aGlzLnksLXRoaXMueCkrTWF0aC5QSX1kaXN0YW5jZVRvKHQpe3JldHVybiBNYXRoLnNxcnQodGhpcy5kaXN0YW5jZVRvU3F1YXJlZCh0KSl9ZGlzdGFuY2VUb1NxdWFyZWQodCl7Y29uc3QgZT10aGlzLngtdC54LG49dGhpcy55LXQueTtyZXR1cm4gZSplK24qbn1tYW5oYXR0YW5EaXN0YW5jZVRvKHQpe3JldHVybiBNYXRoLmFicyh0aGlzLngtdC54KStNYXRoLmFicyh0aGlzLnktdC55KX1zZXRMZW5ndGgodCl7cmV0dXJuIHRoaXMubm9ybWFsaXplKCkubXVsdGlwbHlTY2FsYXIodCl9bGVycCh0LGUpe3JldHVybiB0aGlzLngrPSh0LngtdGhpcy54KSplLHRoaXMueSs9KHQueS10aGlzLnkpKmUsdGhpc31sZXJwVmVjdG9ycyh0LGUsbil7cmV0dXJuIHRoaXMueD10LngrKGUueC10LngpKm4sdGhpcy55PXQueSsoZS55LXQueSkqbix0aGlzfWVxdWFscyh0KXtyZXR1cm4gdC54PT09dGhpcy54JiZ0Lnk9PT10aGlzLnl9ZnJvbUFycmF5KHQsZT0wKXtyZXR1cm4gdGhpcy54PXRbZV0sdGhpcy55PXRbZSsxXSx0aGlzfXRvQXJyYXkodD1bXSxlPTApe3JldHVybiB0W2VdPXRoaXMueCx0W2UrMV09dGhpcy55LHR9ZnJvbUJ1ZmZlckF0dHJpYnV0ZSh0LGUsbil7cmV0dXJuIHZvaWQgMCE9PW4mJmNvbnNvbGUud2FybihcIlRIUkVFLlZlY3RvcjI6IG9mZnNldCBoYXMgYmVlbiByZW1vdmVkIGZyb20gLmZyb21CdWZmZXJBdHRyaWJ1dGUoKS5cIiksdGhpcy54PXQuZ2V0WChlKSx0aGlzLnk9dC5nZXRZKGUpLHRoaXN9cm90YXRlQXJvdW5kKHQsZSl7Y29uc3Qgbj1NYXRoLmNvcyhlKSxyPU1hdGguc2luKGUpLGk9dGhpcy54LXQueCxvPXRoaXMueS10Lnk7cmV0dXJuIHRoaXMueD1pKm4tbypyK3QueCx0aGlzLnk9aSpyK28qbit0LnksdGhpc31yYW5kb20oKXtyZXR1cm4gdGhpcy54PU1hdGgucmFuZG9tKCksdGhpcy55PU1hdGgucmFuZG9tKCksdGhpc319Y2xhc3MgSG57Y29uc3RydWN0b3IoKXtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImlzTWF0cml4M1wiLHt2YWx1ZTohMH0pLHRoaXMuZWxlbWVudHM9WzEsMCwwLDAsMSwwLDAsMCwxXSxhcmd1bWVudHMubGVuZ3RoPjAmJmNvbnNvbGUuZXJyb3IoXCJUSFJFRS5NYXRyaXgzOiB0aGUgY29uc3RydWN0b3Igbm8gbG9uZ2VyIHJlYWRzIGFyZ3VtZW50cy4gdXNlIC5zZXQoKSBpbnN0ZWFkLlwiKX1zZXQodCxlLG4scixpLG8sYSxzLGMpe2NvbnN0IGw9dGhpcy5lbGVtZW50cztyZXR1cm4gbFswXT10LGxbMV09cixsWzJdPWEsbFszXT1lLGxbNF09aSxsWzVdPXMsbFs2XT1uLGxbN109byxsWzhdPWMsdGhpc31pZGVudGl0eSgpe3JldHVybiB0aGlzLnNldCgxLDAsMCwwLDEsMCwwLDAsMSksdGhpc31jbG9uZSgpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3RvcikuZnJvbUFycmF5KHRoaXMuZWxlbWVudHMpfWNvcHkodCl7Y29uc3QgZT10aGlzLmVsZW1lbnRzLG49dC5lbGVtZW50cztyZXR1cm4gZVswXT1uWzBdLGVbMV09blsxXSxlWzJdPW5bMl0sZVszXT1uWzNdLGVbNF09bls0XSxlWzVdPW5bNV0sZVs2XT1uWzZdLGVbN109bls3XSxlWzhdPW5bOF0sdGhpc31leHRyYWN0QmFzaXModCxlLG4pe3JldHVybiB0LnNldEZyb21NYXRyaXgzQ29sdW1uKHRoaXMsMCksZS5zZXRGcm9tTWF0cml4M0NvbHVtbih0aGlzLDEpLG4uc2V0RnJvbU1hdHJpeDNDb2x1bW4odGhpcywyKSx0aGlzfXNldEZyb21NYXRyaXg0KHQpe2NvbnN0IGU9dC5lbGVtZW50cztyZXR1cm4gdGhpcy5zZXQoZVswXSxlWzRdLGVbOF0sZVsxXSxlWzVdLGVbOV0sZVsyXSxlWzZdLGVbMTBdKSx0aGlzfW11bHRpcGx5KHQpe3JldHVybiB0aGlzLm11bHRpcGx5TWF0cmljZXModGhpcyx0KX1wcmVtdWx0aXBseSh0KXtyZXR1cm4gdGhpcy5tdWx0aXBseU1hdHJpY2VzKHQsdGhpcyl9bXVsdGlwbHlNYXRyaWNlcyh0LGUpe2NvbnN0IG49dC5lbGVtZW50cyxyPWUuZWxlbWVudHMsaT10aGlzLmVsZW1lbnRzLG89blswXSxhPW5bM10scz1uWzZdLGM9blsxXSxsPW5bNF0sdT1uWzddLGg9blsyXSxkPW5bNV0scD1uWzhdLGY9clswXSxtPXJbM10sZz1yWzZdLHY9clsxXSx5PXJbNF0seD1yWzddLGI9clsyXSx3PXJbNV0sXz1yWzhdO3JldHVybiBpWzBdPW8qZithKnYrcypiLGlbM109byptK2EqeStzKncsaVs2XT1vKmcrYSp4K3MqXyxpWzFdPWMqZitsKnYrdSpiLGlbNF09YyptK2wqeSt1KncsaVs3XT1jKmcrbCp4K3UqXyxpWzJdPWgqZitkKnYrcCpiLGlbNV09aCptK2QqeStwKncsaVs4XT1oKmcrZCp4K3AqXyx0aGlzfW11bHRpcGx5U2NhbGFyKHQpe2NvbnN0IGU9dGhpcy5lbGVtZW50cztyZXR1cm4gZVswXSo9dCxlWzNdKj10LGVbNl0qPXQsZVsxXSo9dCxlWzRdKj10LGVbN10qPXQsZVsyXSo9dCxlWzVdKj10LGVbOF0qPXQsdGhpc31kZXRlcm1pbmFudCgpe2NvbnN0IHQ9dGhpcy5lbGVtZW50cyxlPXRbMF0sbj10WzFdLHI9dFsyXSxpPXRbM10sbz10WzRdLGE9dFs1XSxzPXRbNl0sYz10WzddLGw9dFs4XTtyZXR1cm4gZSpvKmwtZSphKmMtbippKmwrbiphKnMrcippKmMtcipvKnN9aW52ZXJ0KCl7Y29uc3QgdD10aGlzLmVsZW1lbnRzLGU9dFswXSxuPXRbMV0scj10WzJdLGk9dFszXSxvPXRbNF0sYT10WzVdLHM9dFs2XSxjPXRbN10sbD10WzhdLHU9bCpvLWEqYyxoPWEqcy1sKmksZD1jKmktbypzLHA9ZSp1K24qaCtyKmQ7aWYoMD09PXApcmV0dXJuIHRoaXMuc2V0KDAsMCwwLDAsMCwwLDAsMCwwKTtjb25zdCBmPTEvcDtyZXR1cm4gdFswXT11KmYsdFsxXT0ocipjLWwqbikqZix0WzJdPShhKm4tcipvKSpmLHRbM109aCpmLHRbNF09KGwqZS1yKnMpKmYsdFs1XT0ocippLWEqZSkqZix0WzZdPWQqZix0WzddPShuKnMtYyplKSpmLHRbOF09KG8qZS1uKmkpKmYsdGhpc310cmFuc3Bvc2UoKXtsZXQgdDtjb25zdCBlPXRoaXMuZWxlbWVudHM7cmV0dXJuIHQ9ZVsxXSxlWzFdPWVbM10sZVszXT10LHQ9ZVsyXSxlWzJdPWVbNl0sZVs2XT10LHQ9ZVs1XSxlWzVdPWVbN10sZVs3XT10LHRoaXN9Z2V0Tm9ybWFsTWF0cml4KHQpe3JldHVybiB0aGlzLnNldEZyb21NYXRyaXg0KHQpLmNvcHkodGhpcykuaW52ZXJ0KCkudHJhbnNwb3NlKCl9dHJhbnNwb3NlSW50b0FycmF5KHQpe2NvbnN0IGU9dGhpcy5lbGVtZW50cztyZXR1cm4gdFswXT1lWzBdLHRbMV09ZVszXSx0WzJdPWVbNl0sdFszXT1lWzFdLHRbNF09ZVs0XSx0WzVdPWVbN10sdFs2XT1lWzJdLHRbN109ZVs1XSx0WzhdPWVbOF0sdGhpc31zZXRVdlRyYW5zZm9ybSh0LGUsbixyLGksbyxhKXtjb25zdCBzPU1hdGguY29zKGkpLGM9TWF0aC5zaW4oaSk7dGhpcy5zZXQobipzLG4qYywtbioocypvK2MqYSkrbyt0LC1yKmMscipzLC1yKigtYypvK3MqYSkrYStlLDAsMCwxKX1zY2FsZSh0LGUpe2NvbnN0IG49dGhpcy5lbGVtZW50cztyZXR1cm4gblswXSo9dCxuWzNdKj10LG5bNl0qPXQsblsxXSo9ZSxuWzRdKj1lLG5bN10qPWUsdGhpc31yb3RhdGUodCl7Y29uc3QgZT1NYXRoLmNvcyh0KSxuPU1hdGguc2luKHQpLHI9dGhpcy5lbGVtZW50cyxpPXJbMF0sbz1yWzNdLGE9cls2XSxzPXJbMV0sYz1yWzRdLGw9cls3XTtyZXR1cm4gclswXT1lKmkrbipzLHJbM109ZSpvK24qYyxyWzZdPWUqYStuKmwsclsxXT0tbippK2UqcyxyWzRdPS1uKm8rZSpjLHJbN109LW4qYStlKmwsdGhpc310cmFuc2xhdGUodCxlKXtjb25zdCBuPXRoaXMuZWxlbWVudHM7cmV0dXJuIG5bMF0rPXQqblsyXSxuWzNdKz10Km5bNV0sbls2XSs9dCpuWzhdLG5bMV0rPWUqblsyXSxuWzRdKz1lKm5bNV0sbls3XSs9ZSpuWzhdLHRoaXN9ZXF1YWxzKHQpe2NvbnN0IGU9dGhpcy5lbGVtZW50cyxuPXQuZWxlbWVudHM7Zm9yKGxldCB0PTA7dDw5O3QrKylpZihlW3RdIT09blt0XSlyZXR1cm4hMTtyZXR1cm4hMH1mcm9tQXJyYXkodCxlPTApe2ZvcihsZXQgbj0wO248OTtuKyspdGhpcy5lbGVtZW50c1tuXT10W24rZV07cmV0dXJuIHRoaXN9dG9BcnJheSh0PVtdLGU9MCl7Y29uc3Qgbj10aGlzLmVsZW1lbnRzO3JldHVybiB0W2VdPW5bMF0sdFtlKzFdPW5bMV0sdFtlKzJdPW5bMl0sdFtlKzNdPW5bM10sdFtlKzRdPW5bNF0sdFtlKzVdPW5bNV0sdFtlKzZdPW5bNl0sdFtlKzddPW5bN10sdFtlKzhdPW5bOF0sdH19bGV0IGtuO2NvbnN0IFZuPXtnZXREYXRhVVJMOmZ1bmN0aW9uKHQpe2lmKC9eZGF0YTovaS50ZXN0KHQuc3JjKSlyZXR1cm4gdC5zcmM7aWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIEhUTUxDYW52YXNFbGVtZW50KXJldHVybiB0LnNyYztsZXQgZTtpZih0IGluc3RhbmNlb2YgSFRNTENhbnZhc0VsZW1lbnQpZT10O2Vsc2V7dm9pZCAwPT09a24mJihrbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sXCIsXCJjYW52YXNcIikpLGtuLndpZHRoPXQud2lkdGgsa24uaGVpZ2h0PXQuaGVpZ2h0O2NvbnN0IG49a24uZ2V0Q29udGV4dChcIjJkXCIpO3QgaW5zdGFuY2VvZiBJbWFnZURhdGE/bi5wdXRJbWFnZURhdGEodCwwLDApOm4uZHJhd0ltYWdlKHQsMCwwLHQud2lkdGgsdC5oZWlnaHQpLGU9a259cmV0dXJuIGUud2lkdGg+MjA0OHx8ZS5oZWlnaHQ+MjA0OD9lLnRvRGF0YVVSTChcImltYWdlL2pwZWdcIiwuNik6ZS50b0RhdGFVUkwoXCJpbWFnZS9wbmdcIil9fTtsZXQgam49MDtmdW5jdGlvbiBXbih0PVduLkRFRkFVTFRfSU1BR0UsZT1Xbi5ERUZBVUxUX01BUFBJTkcsbj1kdCxyPWR0LGk9eHQsbz1fdCxhPVV0LHM9U3QsYz0xLGw9SmUpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiaWRcIix7dmFsdWU6am4rK30pLHRoaXMudXVpZD16bi5nZW5lcmF0ZVVVSUQoKSx0aGlzLm5hbWU9XCJcIix0aGlzLmltYWdlPXQsdGhpcy5taXBtYXBzPVtdLHRoaXMubWFwcGluZz1lLHRoaXMud3JhcFM9bix0aGlzLndyYXBUPXIsdGhpcy5tYWdGaWx0ZXI9aSx0aGlzLm1pbkZpbHRlcj1vLHRoaXMuYW5pc290cm9weT1jLHRoaXMuZm9ybWF0PWEsdGhpcy5pbnRlcm5hbEZvcm1hdD1udWxsLHRoaXMudHlwZT1zLHRoaXMub2Zmc2V0PW5ldyBHbigwLDApLHRoaXMucmVwZWF0PW5ldyBHbigxLDEpLHRoaXMuY2VudGVyPW5ldyBHbigwLDApLHRoaXMucm90YXRpb249MCx0aGlzLm1hdHJpeEF1dG9VcGRhdGU9ITAsdGhpcy5tYXRyaXg9bmV3IEhuLHRoaXMuZ2VuZXJhdGVNaXBtYXBzPSEwLHRoaXMucHJlbXVsdGlwbHlBbHBoYT0hMSx0aGlzLmZsaXBZPSEwLHRoaXMudW5wYWNrQWxpZ25tZW50PTQsdGhpcy5lbmNvZGluZz1sLHRoaXMudmVyc2lvbj0wLHRoaXMub25VcGRhdGU9bnVsbH1mdW5jdGlvbiBYbih0KXtyZXR1cm5cInVuZGVmaW5lZFwiIT10eXBlb2YgSFRNTEltYWdlRWxlbWVudCYmdCBpbnN0YW5jZW9mIEhUTUxJbWFnZUVsZW1lbnR8fFwidW5kZWZpbmVkXCIhPXR5cGVvZiBIVE1MQ2FudmFzRWxlbWVudCYmdCBpbnN0YW5jZW9mIEhUTUxDYW52YXNFbGVtZW50fHxcInVuZGVmaW5lZFwiIT10eXBlb2YgSW1hZ2VCaXRtYXAmJnQgaW5zdGFuY2VvZiBJbWFnZUJpdG1hcD9Wbi5nZXREYXRhVVJMKHQpOnQuZGF0YT97ZGF0YTpBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0LmRhdGEpLHdpZHRoOnQud2lkdGgsaGVpZ2h0OnQuaGVpZ2h0LHR5cGU6dC5kYXRhLmNvbnN0cnVjdG9yLm5hbWV9Oihjb25zb2xlLndhcm4oXCJUSFJFRS5UZXh0dXJlOiBVbmFibGUgdG8gc2VyaWFsaXplIFRleHR1cmUuXCIpLHt9KX1Xbi5ERUZBVUxUX0lNQUdFPXZvaWQgMCxXbi5ERUZBVUxUX01BUFBJTkc9aXQsV24ucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShCbi5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpXbixpc1RleHR1cmU6ITAsdXBkYXRlTWF0cml4OmZ1bmN0aW9uKCl7dGhpcy5tYXRyaXguc2V0VXZUcmFuc2Zvcm0odGhpcy5vZmZzZXQueCx0aGlzLm9mZnNldC55LHRoaXMucmVwZWF0LngsdGhpcy5yZXBlYXQueSx0aGlzLnJvdGF0aW9uLHRoaXMuY2VudGVyLngsdGhpcy5jZW50ZXIueSl9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKS5jb3B5KHRoaXMpfSxjb3B5OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm5hbWU9dC5uYW1lLHRoaXMuaW1hZ2U9dC5pbWFnZSx0aGlzLm1pcG1hcHM9dC5taXBtYXBzLnNsaWNlKDApLHRoaXMubWFwcGluZz10Lm1hcHBpbmcsdGhpcy53cmFwUz10LndyYXBTLHRoaXMud3JhcFQ9dC53cmFwVCx0aGlzLm1hZ0ZpbHRlcj10Lm1hZ0ZpbHRlcix0aGlzLm1pbkZpbHRlcj10Lm1pbkZpbHRlcix0aGlzLmFuaXNvdHJvcHk9dC5hbmlzb3Ryb3B5LHRoaXMuZm9ybWF0PXQuZm9ybWF0LHRoaXMuaW50ZXJuYWxGb3JtYXQ9dC5pbnRlcm5hbEZvcm1hdCx0aGlzLnR5cGU9dC50eXBlLHRoaXMub2Zmc2V0LmNvcHkodC5vZmZzZXQpLHRoaXMucmVwZWF0LmNvcHkodC5yZXBlYXQpLHRoaXMuY2VudGVyLmNvcHkodC5jZW50ZXIpLHRoaXMucm90YXRpb249dC5yb3RhdGlvbix0aGlzLm1hdHJpeEF1dG9VcGRhdGU9dC5tYXRyaXhBdXRvVXBkYXRlLHRoaXMubWF0cml4LmNvcHkodC5tYXRyaXgpLHRoaXMuZ2VuZXJhdGVNaXBtYXBzPXQuZ2VuZXJhdGVNaXBtYXBzLHRoaXMucHJlbXVsdGlwbHlBbHBoYT10LnByZW11bHRpcGx5QWxwaGEsdGhpcy5mbGlwWT10LmZsaXBZLHRoaXMudW5wYWNrQWxpZ25tZW50PXQudW5wYWNrQWxpZ25tZW50LHRoaXMuZW5jb2Rpbmc9dC5lbmNvZGluZyx0aGlzfSx0b0pTT046ZnVuY3Rpb24odCl7Y29uc3QgZT12b2lkIDA9PT10fHxcInN0cmluZ1wiPT10eXBlb2YgdDtpZighZSYmdm9pZCAwIT09dC50ZXh0dXJlc1t0aGlzLnV1aWRdKXJldHVybiB0LnRleHR1cmVzW3RoaXMudXVpZF07Y29uc3Qgbj17bWV0YWRhdGE6e3ZlcnNpb246NC41LHR5cGU6XCJUZXh0dXJlXCIsZ2VuZXJhdG9yOlwiVGV4dHVyZS50b0pTT05cIn0sdXVpZDp0aGlzLnV1aWQsbmFtZTp0aGlzLm5hbWUsbWFwcGluZzp0aGlzLm1hcHBpbmcscmVwZWF0Olt0aGlzLnJlcGVhdC54LHRoaXMucmVwZWF0LnldLG9mZnNldDpbdGhpcy5vZmZzZXQueCx0aGlzLm9mZnNldC55XSxjZW50ZXI6W3RoaXMuY2VudGVyLngsdGhpcy5jZW50ZXIueV0scm90YXRpb246dGhpcy5yb3RhdGlvbix3cmFwOlt0aGlzLndyYXBTLHRoaXMud3JhcFRdLGZvcm1hdDp0aGlzLmZvcm1hdCx0eXBlOnRoaXMudHlwZSxlbmNvZGluZzp0aGlzLmVuY29kaW5nLG1pbkZpbHRlcjp0aGlzLm1pbkZpbHRlcixtYWdGaWx0ZXI6dGhpcy5tYWdGaWx0ZXIsYW5pc290cm9weTp0aGlzLmFuaXNvdHJvcHksZmxpcFk6dGhpcy5mbGlwWSxwcmVtdWx0aXBseUFscGhhOnRoaXMucHJlbXVsdGlwbHlBbHBoYSx1bnBhY2tBbGlnbm1lbnQ6dGhpcy51bnBhY2tBbGlnbm1lbnR9O2lmKHZvaWQgMCE9PXRoaXMuaW1hZ2Upe2NvbnN0IHI9dGhpcy5pbWFnZTtpZih2b2lkIDA9PT1yLnV1aWQmJihyLnV1aWQ9em4uZ2VuZXJhdGVVVUlEKCkpLCFlJiZ2b2lkIDA9PT10LmltYWdlc1tyLnV1aWRdKXtsZXQgZTtpZihBcnJheS5pc0FycmF5KHIpKXtlPVtdO2ZvcihsZXQgdD0wLG49ci5sZW5ndGg7dDxuO3QrKylyW3RdLmlzRGF0YVRleHR1cmU/ZS5wdXNoKFhuKHJbdF0uaW1hZ2UpKTplLnB1c2goWG4oclt0XSkpfWVsc2UgZT1YbihyKTt0LmltYWdlc1tyLnV1aWRdPXt1dWlkOnIudXVpZCx1cmw6ZX19bi5pbWFnZT1yLnV1aWR9cmV0dXJuIGV8fCh0LnRleHR1cmVzW3RoaXMudXVpZF09biksbn0sZGlzcG9zZTpmdW5jdGlvbigpe3RoaXMuZGlzcGF0Y2hFdmVudCh7dHlwZTpcImRpc3Bvc2VcIn0pfSx0cmFuc2Zvcm1VdjpmdW5jdGlvbih0KXtpZih0aGlzLm1hcHBpbmchPT1pdClyZXR1cm4gdDtpZih0LmFwcGx5TWF0cml4Myh0aGlzLm1hdHJpeCksdC54PDB8fHQueD4xKXN3aXRjaCh0aGlzLndyYXBTKXtjYXNlIGh0OnQueD10LngtTWF0aC5mbG9vcih0LngpO2JyZWFrO2Nhc2UgZHQ6dC54PXQueDwwPzA6MTticmVhaztjYXNlIHB0OjE9PT1NYXRoLmFicyhNYXRoLmZsb29yKHQueCklMik/dC54PU1hdGguY2VpbCh0LngpLXQueDp0Lng9dC54LU1hdGguZmxvb3IodC54KX1pZih0Lnk8MHx8dC55PjEpc3dpdGNoKHRoaXMud3JhcFQpe2Nhc2UgaHQ6dC55PXQueS1NYXRoLmZsb29yKHQueSk7YnJlYWs7Y2FzZSBkdDp0Lnk9dC55PDA/MDoxO2JyZWFrO2Nhc2UgcHQ6MT09PU1hdGguYWJzKE1hdGguZmxvb3IodC55KSUyKT90Lnk9TWF0aC5jZWlsKHQueSktdC55OnQueT10LnktTWF0aC5mbG9vcih0LnkpfXJldHVybiB0aGlzLmZsaXBZJiYodC55PTEtdC55KSx0fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShXbi5wcm90b3R5cGUsXCJuZWVkc1VwZGF0ZVwiLHtzZXQ6ZnVuY3Rpb24odCl7ITA9PT10JiZ0aGlzLnZlcnNpb24rK319KTtjbGFzcyBxbntjb25zdHJ1Y3Rvcih0PTAsZT0wLG49MCxyPTEpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiaXNWZWN0b3I0XCIse3ZhbHVlOiEwfSksdGhpcy54PXQsdGhpcy55PWUsdGhpcy56PW4sdGhpcy53PXJ9Z2V0IHdpZHRoKCl7cmV0dXJuIHRoaXMuen1zZXQgd2lkdGgodCl7dGhpcy56PXR9Z2V0IGhlaWdodCgpe3JldHVybiB0aGlzLnd9c2V0IGhlaWdodCh0KXt0aGlzLnc9dH1zZXQodCxlLG4scil7cmV0dXJuIHRoaXMueD10LHRoaXMueT1lLHRoaXMuej1uLHRoaXMudz1yLHRoaXN9c2V0U2NhbGFyKHQpe3JldHVybiB0aGlzLng9dCx0aGlzLnk9dCx0aGlzLno9dCx0aGlzLnc9dCx0aGlzfXNldFgodCl7cmV0dXJuIHRoaXMueD10LHRoaXN9c2V0WSh0KXtyZXR1cm4gdGhpcy55PXQsdGhpc31zZXRaKHQpe3JldHVybiB0aGlzLno9dCx0aGlzfXNldFcodCl7cmV0dXJuIHRoaXMudz10LHRoaXN9c2V0Q29tcG9uZW50KHQsZSl7c3dpdGNoKHQpe2Nhc2UgMDp0aGlzLng9ZTticmVhaztjYXNlIDE6dGhpcy55PWU7YnJlYWs7Y2FzZSAyOnRoaXMuej1lO2JyZWFrO2Nhc2UgMzp0aGlzLnc9ZTticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcihcImluZGV4IGlzIG91dCBvZiByYW5nZTogXCIrdCl9cmV0dXJuIHRoaXN9Z2V0Q29tcG9uZW50KHQpe3N3aXRjaCh0KXtjYXNlIDA6cmV0dXJuIHRoaXMueDtjYXNlIDE6cmV0dXJuIHRoaXMueTtjYXNlIDI6cmV0dXJuIHRoaXMuejtjYXNlIDM6cmV0dXJuIHRoaXMudztkZWZhdWx0OnRocm93IG5ldyBFcnJvcihcImluZGV4IGlzIG91dCBvZiByYW5nZTogXCIrdCl9fWNsb25lKCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMueCx0aGlzLnksdGhpcy56LHRoaXMudyl9Y29weSh0KXtyZXR1cm4gdGhpcy54PXQueCx0aGlzLnk9dC55LHRoaXMuej10LnosdGhpcy53PXZvaWQgMCE9PXQudz90Lnc6MSx0aGlzfWFkZCh0LGUpe3JldHVybiB2b2lkIDAhPT1lPyhjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3I0OiAuYWRkKCkgbm93IG9ubHkgYWNjZXB0cyBvbmUgYXJndW1lbnQuIFVzZSAuYWRkVmVjdG9ycyggYSwgYiApIGluc3RlYWQuXCIpLHRoaXMuYWRkVmVjdG9ycyh0LGUpKToodGhpcy54Kz10LngsdGhpcy55Kz10LnksdGhpcy56Kz10LnosdGhpcy53Kz10LncsdGhpcyl9YWRkU2NhbGFyKHQpe3JldHVybiB0aGlzLngrPXQsdGhpcy55Kz10LHRoaXMueis9dCx0aGlzLncrPXQsdGhpc31hZGRWZWN0b3JzKHQsZSl7cmV0dXJuIHRoaXMueD10LngrZS54LHRoaXMueT10LnkrZS55LHRoaXMuej10LnorZS56LHRoaXMudz10LncrZS53LHRoaXN9YWRkU2NhbGVkVmVjdG9yKHQsZSl7cmV0dXJuIHRoaXMueCs9dC54KmUsdGhpcy55Kz10LnkqZSx0aGlzLnorPXQueiplLHRoaXMudys9dC53KmUsdGhpc31zdWIodCxlKXtyZXR1cm4gdm9pZCAwIT09ZT8oY29uc29sZS53YXJuKFwiVEhSRUUuVmVjdG9yNDogLnN1YigpIG5vdyBvbmx5IGFjY2VwdHMgb25lIGFyZ3VtZW50LiBVc2UgLnN1YlZlY3RvcnMoIGEsIGIgKSBpbnN0ZWFkLlwiKSx0aGlzLnN1YlZlY3RvcnModCxlKSk6KHRoaXMueC09dC54LHRoaXMueS09dC55LHRoaXMuei09dC56LHRoaXMudy09dC53LHRoaXMpfXN1YlNjYWxhcih0KXtyZXR1cm4gdGhpcy54LT10LHRoaXMueS09dCx0aGlzLnotPXQsdGhpcy53LT10LHRoaXN9c3ViVmVjdG9ycyh0LGUpe3JldHVybiB0aGlzLng9dC54LWUueCx0aGlzLnk9dC55LWUueSx0aGlzLno9dC56LWUueix0aGlzLnc9dC53LWUudyx0aGlzfW11bHRpcGx5U2NhbGFyKHQpe3JldHVybiB0aGlzLngqPXQsdGhpcy55Kj10LHRoaXMueio9dCx0aGlzLncqPXQsdGhpc31hcHBseU1hdHJpeDQodCl7Y29uc3QgZT10aGlzLngsbj10aGlzLnkscj10aGlzLnosaT10aGlzLncsbz10LmVsZW1lbnRzO3JldHVybiB0aGlzLng9b1swXSplK29bNF0qbitvWzhdKnIrb1sxMl0qaSx0aGlzLnk9b1sxXSplK29bNV0qbitvWzldKnIrb1sxM10qaSx0aGlzLno9b1syXSplK29bNl0qbitvWzEwXSpyK29bMTRdKmksdGhpcy53PW9bM10qZStvWzddKm4rb1sxMV0qcitvWzE1XSppLHRoaXN9ZGl2aWRlU2NhbGFyKHQpe3JldHVybiB0aGlzLm11bHRpcGx5U2NhbGFyKDEvdCl9c2V0QXhpc0FuZ2xlRnJvbVF1YXRlcm5pb24odCl7dGhpcy53PTIqTWF0aC5hY29zKHQudyk7Y29uc3QgZT1NYXRoLnNxcnQoMS10LncqdC53KTtyZXR1cm4gZTwxZS00Pyh0aGlzLng9MSx0aGlzLnk9MCx0aGlzLno9MCk6KHRoaXMueD10LngvZSx0aGlzLnk9dC55L2UsdGhpcy56PXQuei9lKSx0aGlzfXNldEF4aXNBbmdsZUZyb21Sb3RhdGlvbk1hdHJpeCh0KXtsZXQgZSxuLHIsaTtjb25zdCBvPXQuZWxlbWVudHMsYT1vWzBdLHM9b1s0XSxjPW9bOF0sbD1vWzFdLHU9b1s1XSxoPW9bOV0sZD1vWzJdLHA9b1s2XSxmPW9bMTBdO2lmKE1hdGguYWJzKHMtbCk8LjAxJiZNYXRoLmFicyhjLWQpPC4wMSYmTWF0aC5hYnMoaC1wKTwuMDEpe2lmKE1hdGguYWJzKHMrbCk8LjEmJk1hdGguYWJzKGMrZCk8LjEmJk1hdGguYWJzKGgrcCk8LjEmJk1hdGguYWJzKGErdStmLTMpPC4xKXJldHVybiB0aGlzLnNldCgxLDAsMCwwKSx0aGlzO2U9TWF0aC5QSTtjb25zdCB0PShhKzEpLzIsbz0odSsxKS8yLG09KGYrMSkvMixnPShzK2wpLzQsdj0oYytkKS80LHk9KGgrcCkvNDtyZXR1cm4gdD5vJiZ0Pm0/dDwuMDE/KG49MCxyPS43MDcxMDY3ODEsaT0uNzA3MTA2NzgxKToobj1NYXRoLnNxcnQodCkscj1nL24saT12L24pOm8+bT9vPC4wMT8obj0uNzA3MTA2NzgxLHI9MCxpPS43MDcxMDY3ODEpOihyPU1hdGguc3FydChvKSxuPWcvcixpPXkvcik6bTwuMDE/KG49LjcwNzEwNjc4MSxyPS43MDcxMDY3ODEsaT0wKTooaT1NYXRoLnNxcnQobSksbj12L2kscj15L2kpLHRoaXMuc2V0KG4scixpLGUpLHRoaXN9bGV0IG09TWF0aC5zcXJ0KChwLWgpKihwLWgpKyhjLWQpKihjLWQpKyhsLXMpKihsLXMpKTtyZXR1cm4gTWF0aC5hYnMobSk8LjAwMSYmKG09MSksdGhpcy54PShwLWgpL20sdGhpcy55PShjLWQpL20sdGhpcy56PShsLXMpL20sdGhpcy53PU1hdGguYWNvcygoYSt1K2YtMSkvMiksdGhpc31taW4odCl7cmV0dXJuIHRoaXMueD1NYXRoLm1pbih0aGlzLngsdC54KSx0aGlzLnk9TWF0aC5taW4odGhpcy55LHQueSksdGhpcy56PU1hdGgubWluKHRoaXMueix0LnopLHRoaXMudz1NYXRoLm1pbih0aGlzLncsdC53KSx0aGlzfW1heCh0KXtyZXR1cm4gdGhpcy54PU1hdGgubWF4KHRoaXMueCx0LngpLHRoaXMueT1NYXRoLm1heCh0aGlzLnksdC55KSx0aGlzLno9TWF0aC5tYXgodGhpcy56LHQueiksdGhpcy53PU1hdGgubWF4KHRoaXMudyx0LncpLHRoaXN9Y2xhbXAodCxlKXtyZXR1cm4gdGhpcy54PU1hdGgubWF4KHQueCxNYXRoLm1pbihlLngsdGhpcy54KSksdGhpcy55PU1hdGgubWF4KHQueSxNYXRoLm1pbihlLnksdGhpcy55KSksdGhpcy56PU1hdGgubWF4KHQueixNYXRoLm1pbihlLnosdGhpcy56KSksdGhpcy53PU1hdGgubWF4KHQudyxNYXRoLm1pbihlLncsdGhpcy53KSksdGhpc31jbGFtcFNjYWxhcih0LGUpe3JldHVybiB0aGlzLng9TWF0aC5tYXgodCxNYXRoLm1pbihlLHRoaXMueCkpLHRoaXMueT1NYXRoLm1heCh0LE1hdGgubWluKGUsdGhpcy55KSksdGhpcy56PU1hdGgubWF4KHQsTWF0aC5taW4oZSx0aGlzLnopKSx0aGlzLnc9TWF0aC5tYXgodCxNYXRoLm1pbihlLHRoaXMudykpLHRoaXN9Y2xhbXBMZW5ndGgodCxlKXtjb25zdCBuPXRoaXMubGVuZ3RoKCk7cmV0dXJuIHRoaXMuZGl2aWRlU2NhbGFyKG58fDEpLm11bHRpcGx5U2NhbGFyKE1hdGgubWF4KHQsTWF0aC5taW4oZSxuKSkpfWZsb29yKCl7cmV0dXJuIHRoaXMueD1NYXRoLmZsb29yKHRoaXMueCksdGhpcy55PU1hdGguZmxvb3IodGhpcy55KSx0aGlzLno9TWF0aC5mbG9vcih0aGlzLnopLHRoaXMudz1NYXRoLmZsb29yKHRoaXMudyksdGhpc31jZWlsKCl7cmV0dXJuIHRoaXMueD1NYXRoLmNlaWwodGhpcy54KSx0aGlzLnk9TWF0aC5jZWlsKHRoaXMueSksdGhpcy56PU1hdGguY2VpbCh0aGlzLnopLHRoaXMudz1NYXRoLmNlaWwodGhpcy53KSx0aGlzfXJvdW5kKCl7cmV0dXJuIHRoaXMueD1NYXRoLnJvdW5kKHRoaXMueCksdGhpcy55PU1hdGgucm91bmQodGhpcy55KSx0aGlzLno9TWF0aC5yb3VuZCh0aGlzLnopLHRoaXMudz1NYXRoLnJvdW5kKHRoaXMudyksdGhpc31yb3VuZFRvWmVybygpe3JldHVybiB0aGlzLng9dGhpcy54PDA/TWF0aC5jZWlsKHRoaXMueCk6TWF0aC5mbG9vcih0aGlzLngpLHRoaXMueT10aGlzLnk8MD9NYXRoLmNlaWwodGhpcy55KTpNYXRoLmZsb29yKHRoaXMueSksdGhpcy56PXRoaXMuejwwP01hdGguY2VpbCh0aGlzLnopOk1hdGguZmxvb3IodGhpcy56KSx0aGlzLnc9dGhpcy53PDA/TWF0aC5jZWlsKHRoaXMudyk6TWF0aC5mbG9vcih0aGlzLncpLHRoaXN9bmVnYXRlKCl7cmV0dXJuIHRoaXMueD0tdGhpcy54LHRoaXMueT0tdGhpcy55LHRoaXMuej0tdGhpcy56LHRoaXMudz0tdGhpcy53LHRoaXN9ZG90KHQpe3JldHVybiB0aGlzLngqdC54K3RoaXMueSp0LnkrdGhpcy56KnQueit0aGlzLncqdC53fWxlbmd0aFNxKCl7cmV0dXJuIHRoaXMueCp0aGlzLngrdGhpcy55KnRoaXMueSt0aGlzLnoqdGhpcy56K3RoaXMudyp0aGlzLnd9bGVuZ3RoKCl7cmV0dXJuIE1hdGguc3FydCh0aGlzLngqdGhpcy54K3RoaXMueSp0aGlzLnkrdGhpcy56KnRoaXMueit0aGlzLncqdGhpcy53KX1tYW5oYXR0YW5MZW5ndGgoKXtyZXR1cm4gTWF0aC5hYnModGhpcy54KStNYXRoLmFicyh0aGlzLnkpK01hdGguYWJzKHRoaXMueikrTWF0aC5hYnModGhpcy53KX1ub3JtYWxpemUoKXtyZXR1cm4gdGhpcy5kaXZpZGVTY2FsYXIodGhpcy5sZW5ndGgoKXx8MSl9c2V0TGVuZ3RoKHQpe3JldHVybiB0aGlzLm5vcm1hbGl6ZSgpLm11bHRpcGx5U2NhbGFyKHQpfWxlcnAodCxlKXtyZXR1cm4gdGhpcy54Kz0odC54LXRoaXMueCkqZSx0aGlzLnkrPSh0LnktdGhpcy55KSplLHRoaXMueis9KHQuei10aGlzLnopKmUsdGhpcy53Kz0odC53LXRoaXMudykqZSx0aGlzfWxlcnBWZWN0b3JzKHQsZSxuKXtyZXR1cm4gdGhpcy54PXQueCsoZS54LXQueCkqbix0aGlzLnk9dC55KyhlLnktdC55KSpuLHRoaXMuej10LnorKGUuei10LnopKm4sdGhpcy53PXQudysoZS53LXQudykqbix0aGlzfWVxdWFscyh0KXtyZXR1cm4gdC54PT09dGhpcy54JiZ0Lnk9PT10aGlzLnkmJnQuej09PXRoaXMueiYmdC53PT09dGhpcy53fWZyb21BcnJheSh0LGU9MCl7cmV0dXJuIHRoaXMueD10W2VdLHRoaXMueT10W2UrMV0sdGhpcy56PXRbZSsyXSx0aGlzLnc9dFtlKzNdLHRoaXN9dG9BcnJheSh0PVtdLGU9MCl7cmV0dXJuIHRbZV09dGhpcy54LHRbZSsxXT10aGlzLnksdFtlKzJdPXRoaXMueix0W2UrM109dGhpcy53LHR9ZnJvbUJ1ZmZlckF0dHJpYnV0ZSh0LGUsbil7cmV0dXJuIHZvaWQgMCE9PW4mJmNvbnNvbGUud2FybihcIlRIUkVFLlZlY3RvcjQ6IG9mZnNldCBoYXMgYmVlbiByZW1vdmVkIGZyb20gLmZyb21CdWZmZXJBdHRyaWJ1dGUoKS5cIiksdGhpcy54PXQuZ2V0WChlKSx0aGlzLnk9dC5nZXRZKGUpLHRoaXMuej10LmdldFooZSksdGhpcy53PXQuZ2V0VyhlKSx0aGlzfXJhbmRvbSgpe3JldHVybiB0aGlzLng9TWF0aC5yYW5kb20oKSx0aGlzLnk9TWF0aC5yYW5kb20oKSx0aGlzLno9TWF0aC5yYW5kb20oKSx0aGlzLnc9TWF0aC5yYW5kb20oKSx0aGlzfX1mdW5jdGlvbiBZbih0LGUsbil7dGhpcy53aWR0aD10LHRoaXMuaGVpZ2h0PWUsdGhpcy5zY2lzc29yPW5ldyBxbigwLDAsdCxlKSx0aGlzLnNjaXNzb3JUZXN0PSExLHRoaXMudmlld3BvcnQ9bmV3IHFuKDAsMCx0LGUpLG49bnx8e30sdGhpcy50ZXh0dXJlPW5ldyBXbih2b2lkIDAsbi5tYXBwaW5nLG4ud3JhcFMsbi53cmFwVCxuLm1hZ0ZpbHRlcixuLm1pbkZpbHRlcixuLmZvcm1hdCxuLnR5cGUsbi5hbmlzb3Ryb3B5LG4uZW5jb2RpbmcpLHRoaXMudGV4dHVyZS5pbWFnZT17fSx0aGlzLnRleHR1cmUuaW1hZ2Uud2lkdGg9dCx0aGlzLnRleHR1cmUuaW1hZ2UuaGVpZ2h0PWUsdGhpcy50ZXh0dXJlLmdlbmVyYXRlTWlwbWFwcz12b2lkIDAhPT1uLmdlbmVyYXRlTWlwbWFwcyYmbi5nZW5lcmF0ZU1pcG1hcHMsdGhpcy50ZXh0dXJlLm1pbkZpbHRlcj12b2lkIDAhPT1uLm1pbkZpbHRlcj9uLm1pbkZpbHRlcjp4dCx0aGlzLmRlcHRoQnVmZmVyPXZvaWQgMD09PW4uZGVwdGhCdWZmZXJ8fG4uZGVwdGhCdWZmZXIsdGhpcy5zdGVuY2lsQnVmZmVyPXZvaWQgMCE9PW4uc3RlbmNpbEJ1ZmZlciYmbi5zdGVuY2lsQnVmZmVyLHRoaXMuZGVwdGhUZXh0dXJlPXZvaWQgMCE9PW4uZGVwdGhUZXh0dXJlP24uZGVwdGhUZXh0dXJlOm51bGx9ZnVuY3Rpb24gWm4odCxlLG4pe1luLmNhbGwodGhpcyx0LGUsbiksdGhpcy5zYW1wbGVzPTR9WW4ucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShCbi5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpZbixpc1dlYkdMUmVuZGVyVGFyZ2V0OiEwLHNldFNpemU6ZnVuY3Rpb24odCxlKXt0aGlzLndpZHRoPT09dCYmdGhpcy5oZWlnaHQ9PT1lfHwodGhpcy53aWR0aD10LHRoaXMuaGVpZ2h0PWUsdGhpcy50ZXh0dXJlLmltYWdlLndpZHRoPXQsdGhpcy50ZXh0dXJlLmltYWdlLmhlaWdodD1lLHRoaXMuZGlzcG9zZSgpKSx0aGlzLnZpZXdwb3J0LnNldCgwLDAsdCxlKSx0aGlzLnNjaXNzb3Iuc2V0KDAsMCx0LGUpfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3RvcikuY29weSh0aGlzKX0sY29weTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy53aWR0aD10LndpZHRoLHRoaXMuaGVpZ2h0PXQuaGVpZ2h0LHRoaXMudmlld3BvcnQuY29weSh0LnZpZXdwb3J0KSx0aGlzLnRleHR1cmU9dC50ZXh0dXJlLmNsb25lKCksdGhpcy5kZXB0aEJ1ZmZlcj10LmRlcHRoQnVmZmVyLHRoaXMuc3RlbmNpbEJ1ZmZlcj10LnN0ZW5jaWxCdWZmZXIsdGhpcy5kZXB0aFRleHR1cmU9dC5kZXB0aFRleHR1cmUsdGhpc30sZGlzcG9zZTpmdW5jdGlvbigpe3RoaXMuZGlzcGF0Y2hFdmVudCh7dHlwZTpcImRpc3Bvc2VcIn0pfX0pLFpuLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoWW4ucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6Wm4saXNXZWJHTE11bHRpc2FtcGxlUmVuZGVyVGFyZ2V0OiEwLGNvcHk6ZnVuY3Rpb24odCl7cmV0dXJuIFluLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyx0KSx0aGlzLnNhbXBsZXM9dC5zYW1wbGVzLHRoaXN9fSk7Y2xhc3MgSm57Y29uc3RydWN0b3IodD0wLGU9MCxuPTAscj0xKXtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImlzUXVhdGVybmlvblwiLHt2YWx1ZTohMH0pLHRoaXMuX3g9dCx0aGlzLl95PWUsdGhpcy5fej1uLHRoaXMuX3c9cn1zdGF0aWMgc2xlcnAodCxlLG4scil7cmV0dXJuIG4uY29weSh0KS5zbGVycChlLHIpfXN0YXRpYyBzbGVycEZsYXQodCxlLG4scixpLG8sYSl7bGV0IHM9bltyKzBdLGM9bltyKzFdLGw9bltyKzJdLHU9bltyKzNdO2NvbnN0IGg9aVtvKzBdLGQ9aVtvKzFdLHA9aVtvKzJdLGY9aVtvKzNdO2lmKHUhPT1mfHxzIT09aHx8YyE9PWR8fGwhPT1wKXtsZXQgdD0xLWE7Y29uc3QgZT1zKmgrYypkK2wqcCt1KmYsbj1lPj0wPzE6LTEscj0xLWUqZTtpZihyPk51bWJlci5FUFNJTE9OKXtjb25zdCBpPU1hdGguc3FydChyKSxvPU1hdGguYXRhbjIoaSxlKm4pO3Q9TWF0aC5zaW4odCpvKS9pLGE9TWF0aC5zaW4oYSpvKS9pfWNvbnN0IGk9YSpuO2lmKHM9cyp0K2gqaSxjPWMqdCtkKmksbD1sKnQrcCppLHU9dSp0K2YqaSx0PT09MS1hKXtjb25zdCB0PTEvTWF0aC5zcXJ0KHMqcytjKmMrbCpsK3UqdSk7cyo9dCxjKj10LGwqPXQsdSo9dH19dFtlXT1zLHRbZSsxXT1jLHRbZSsyXT1sLHRbZSszXT11fXN0YXRpYyBtdWx0aXBseVF1YXRlcm5pb25zRmxhdCh0LGUsbixyLGksbyl7Y29uc3QgYT1uW3JdLHM9bltyKzFdLGM9bltyKzJdLGw9bltyKzNdLHU9aVtvXSxoPWlbbysxXSxkPWlbbysyXSxwPWlbbyszXTtyZXR1cm4gdFtlXT1hKnArbCp1K3MqZC1jKmgsdFtlKzFdPXMqcCtsKmgrYyp1LWEqZCx0W2UrMl09YypwK2wqZCthKmgtcyp1LHRbZSszXT1sKnAtYSp1LXMqaC1jKmQsdH1nZXQgeCgpe3JldHVybiB0aGlzLl94fXNldCB4KHQpe3RoaXMuX3g9dCx0aGlzLl9vbkNoYW5nZUNhbGxiYWNrKCl9Z2V0IHkoKXtyZXR1cm4gdGhpcy5feX1zZXQgeSh0KXt0aGlzLl95PXQsdGhpcy5fb25DaGFuZ2VDYWxsYmFjaygpfWdldCB6KCl7cmV0dXJuIHRoaXMuX3p9c2V0IHoodCl7dGhpcy5fej10LHRoaXMuX29uQ2hhbmdlQ2FsbGJhY2soKX1nZXQgdygpe3JldHVybiB0aGlzLl93fXNldCB3KHQpe3RoaXMuX3c9dCx0aGlzLl9vbkNoYW5nZUNhbGxiYWNrKCl9c2V0KHQsZSxuLHIpe3JldHVybiB0aGlzLl94PXQsdGhpcy5feT1lLHRoaXMuX3o9bix0aGlzLl93PXIsdGhpcy5fb25DaGFuZ2VDYWxsYmFjaygpLHRoaXN9Y2xvbmUoKXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy5feCx0aGlzLl95LHRoaXMuX3osdGhpcy5fdyl9Y29weSh0KXtyZXR1cm4gdGhpcy5feD10LngsdGhpcy5feT10LnksdGhpcy5fej10LnosdGhpcy5fdz10LncsdGhpcy5fb25DaGFuZ2VDYWxsYmFjaygpLHRoaXN9c2V0RnJvbUV1bGVyKHQsZSl7aWYoIXR8fCF0LmlzRXVsZXIpdGhyb3cgbmV3IEVycm9yKFwiVEhSRUUuUXVhdGVybmlvbjogLnNldEZyb21FdWxlcigpIG5vdyBleHBlY3RzIGFuIEV1bGVyIHJvdGF0aW9uIHJhdGhlciB0aGFuIGEgVmVjdG9yMyBhbmQgb3JkZXIuXCIpO2NvbnN0IG49dC5feCxyPXQuX3ksaT10Ll96LG89dC5fb3JkZXIsYT1NYXRoLmNvcyxzPU1hdGguc2luLGM9YShuLzIpLGw9YShyLzIpLHU9YShpLzIpLGg9cyhuLzIpLGQ9cyhyLzIpLHA9cyhpLzIpO3N3aXRjaChvKXtjYXNlXCJYWVpcIjp0aGlzLl94PWgqbCp1K2MqZCpwLHRoaXMuX3k9YypkKnUtaCpsKnAsdGhpcy5fej1jKmwqcCtoKmQqdSx0aGlzLl93PWMqbCp1LWgqZCpwO2JyZWFrO2Nhc2VcIllYWlwiOnRoaXMuX3g9aCpsKnUrYypkKnAsdGhpcy5feT1jKmQqdS1oKmwqcCx0aGlzLl96PWMqbCpwLWgqZCp1LHRoaXMuX3c9YypsKnUraCpkKnA7YnJlYWs7Y2FzZVwiWlhZXCI6dGhpcy5feD1oKmwqdS1jKmQqcCx0aGlzLl95PWMqZCp1K2gqbCpwLHRoaXMuX3o9YypsKnAraCpkKnUsdGhpcy5fdz1jKmwqdS1oKmQqcDticmVhaztjYXNlXCJaWVhcIjp0aGlzLl94PWgqbCp1LWMqZCpwLHRoaXMuX3k9YypkKnUraCpsKnAsdGhpcy5fej1jKmwqcC1oKmQqdSx0aGlzLl93PWMqbCp1K2gqZCpwO2JyZWFrO2Nhc2VcIllaWFwiOnRoaXMuX3g9aCpsKnUrYypkKnAsdGhpcy5feT1jKmQqdStoKmwqcCx0aGlzLl96PWMqbCpwLWgqZCp1LHRoaXMuX3c9YypsKnUtaCpkKnA7YnJlYWs7Y2FzZVwiWFpZXCI6dGhpcy5feD1oKmwqdS1jKmQqcCx0aGlzLl95PWMqZCp1LWgqbCpwLHRoaXMuX3o9YypsKnAraCpkKnUsdGhpcy5fdz1jKmwqdStoKmQqcDticmVhaztkZWZhdWx0OmNvbnNvbGUud2FybihcIlRIUkVFLlF1YXRlcm5pb246IC5zZXRGcm9tRXVsZXIoKSBlbmNvdW50ZXJlZCBhbiB1bmtub3duIG9yZGVyOiBcIitvKX1yZXR1cm4hMSE9PWUmJnRoaXMuX29uQ2hhbmdlQ2FsbGJhY2soKSx0aGlzfXNldEZyb21BeGlzQW5nbGUodCxlKXtjb25zdCBuPWUvMixyPU1hdGguc2luKG4pO3JldHVybiB0aGlzLl94PXQueCpyLHRoaXMuX3k9dC55KnIsdGhpcy5fej10Lnoqcix0aGlzLl93PU1hdGguY29zKG4pLHRoaXMuX29uQ2hhbmdlQ2FsbGJhY2soKSx0aGlzfXNldEZyb21Sb3RhdGlvbk1hdHJpeCh0KXtjb25zdCBlPXQuZWxlbWVudHMsbj1lWzBdLHI9ZVs0XSxpPWVbOF0sbz1lWzFdLGE9ZVs1XSxzPWVbOV0sYz1lWzJdLGw9ZVs2XSx1PWVbMTBdLGg9bithK3U7aWYoaD4wKXtjb25zdCB0PS41L01hdGguc3FydChoKzEpO3RoaXMuX3c9LjI1L3QsdGhpcy5feD0obC1zKSp0LHRoaXMuX3k9KGktYykqdCx0aGlzLl96PShvLXIpKnR9ZWxzZSBpZihuPmEmJm4+dSl7Y29uc3QgdD0yKk1hdGguc3FydCgxK24tYS11KTt0aGlzLl93PShsLXMpL3QsdGhpcy5feD0uMjUqdCx0aGlzLl95PShyK28pL3QsdGhpcy5fej0oaStjKS90fWVsc2UgaWYoYT51KXtjb25zdCB0PTIqTWF0aC5zcXJ0KDErYS1uLXUpO3RoaXMuX3c9KGktYykvdCx0aGlzLl94PShyK28pL3QsdGhpcy5feT0uMjUqdCx0aGlzLl96PShzK2wpL3R9ZWxzZXtjb25zdCB0PTIqTWF0aC5zcXJ0KDErdS1uLWEpO3RoaXMuX3c9KG8tcikvdCx0aGlzLl94PShpK2MpL3QsdGhpcy5feT0ocytsKS90LHRoaXMuX3o9LjI1KnR9cmV0dXJuIHRoaXMuX29uQ2hhbmdlQ2FsbGJhY2soKSx0aGlzfXNldEZyb21Vbml0VmVjdG9ycyh0LGUpe2xldCBuPXQuZG90KGUpKzE7cmV0dXJuIG48MWUtNj8obj0wLE1hdGguYWJzKHQueCk+TWF0aC5hYnModC56KT8odGhpcy5feD0tdC55LHRoaXMuX3k9dC54LHRoaXMuX3o9MCx0aGlzLl93PW4pOih0aGlzLl94PTAsdGhpcy5feT0tdC56LHRoaXMuX3o9dC55LHRoaXMuX3c9bikpOih0aGlzLl94PXQueSplLnotdC56KmUueSx0aGlzLl95PXQueiplLngtdC54KmUueix0aGlzLl96PXQueCplLnktdC55KmUueCx0aGlzLl93PW4pLHRoaXMubm9ybWFsaXplKCl9YW5nbGVUbyh0KXtyZXR1cm4gMipNYXRoLmFjb3MoTWF0aC5hYnMoem4uY2xhbXAodGhpcy5kb3QodCksLTEsMSkpKX1yb3RhdGVUb3dhcmRzKHQsZSl7Y29uc3Qgbj10aGlzLmFuZ2xlVG8odCk7aWYoMD09PW4pcmV0dXJuIHRoaXM7Y29uc3Qgcj1NYXRoLm1pbigxLGUvbik7cmV0dXJuIHRoaXMuc2xlcnAodCxyKSx0aGlzfWlkZW50aXR5KCl7cmV0dXJuIHRoaXMuc2V0KDAsMCwwLDEpfWludmVydCgpe3JldHVybiB0aGlzLmNvbmp1Z2F0ZSgpfWNvbmp1Z2F0ZSgpe3JldHVybiB0aGlzLl94Kj0tMSx0aGlzLl95Kj0tMSx0aGlzLl96Kj0tMSx0aGlzLl9vbkNoYW5nZUNhbGxiYWNrKCksdGhpc31kb3QodCl7cmV0dXJuIHRoaXMuX3gqdC5feCt0aGlzLl95KnQuX3krdGhpcy5feip0Ll96K3RoaXMuX3cqdC5fd31sZW5ndGhTcSgpe3JldHVybiB0aGlzLl94KnRoaXMuX3grdGhpcy5feSp0aGlzLl95K3RoaXMuX3oqdGhpcy5feit0aGlzLl93KnRoaXMuX3d9bGVuZ3RoKCl7cmV0dXJuIE1hdGguc3FydCh0aGlzLl94KnRoaXMuX3grdGhpcy5feSp0aGlzLl95K3RoaXMuX3oqdGhpcy5feit0aGlzLl93KnRoaXMuX3cpfW5vcm1hbGl6ZSgpe2xldCB0PXRoaXMubGVuZ3RoKCk7cmV0dXJuIDA9PT10Pyh0aGlzLl94PTAsdGhpcy5feT0wLHRoaXMuX3o9MCx0aGlzLl93PTEpOih0PTEvdCx0aGlzLl94PXRoaXMuX3gqdCx0aGlzLl95PXRoaXMuX3kqdCx0aGlzLl96PXRoaXMuX3oqdCx0aGlzLl93PXRoaXMuX3cqdCksdGhpcy5fb25DaGFuZ2VDYWxsYmFjaygpLHRoaXN9bXVsdGlwbHkodCxlKXtyZXR1cm4gdm9pZCAwIT09ZT8oY29uc29sZS53YXJuKFwiVEhSRUUuUXVhdGVybmlvbjogLm11bHRpcGx5KCkgbm93IG9ubHkgYWNjZXB0cyBvbmUgYXJndW1lbnQuIFVzZSAubXVsdGlwbHlRdWF0ZXJuaW9ucyggYSwgYiApIGluc3RlYWQuXCIpLHRoaXMubXVsdGlwbHlRdWF0ZXJuaW9ucyh0LGUpKTp0aGlzLm11bHRpcGx5UXVhdGVybmlvbnModGhpcyx0KX1wcmVtdWx0aXBseSh0KXtyZXR1cm4gdGhpcy5tdWx0aXBseVF1YXRlcm5pb25zKHQsdGhpcyl9bXVsdGlwbHlRdWF0ZXJuaW9ucyh0LGUpe2NvbnN0IG49dC5feCxyPXQuX3ksaT10Ll96LG89dC5fdyxhPWUuX3gscz1lLl95LGM9ZS5feixsPWUuX3c7cmV0dXJuIHRoaXMuX3g9bipsK28qYStyKmMtaSpzLHRoaXMuX3k9cipsK28qcytpKmEtbipjLHRoaXMuX3o9aSpsK28qYytuKnMtciphLHRoaXMuX3c9bypsLW4qYS1yKnMtaSpjLHRoaXMuX29uQ2hhbmdlQ2FsbGJhY2soKSx0aGlzfXNsZXJwKHQsZSl7aWYoMD09PWUpcmV0dXJuIHRoaXM7aWYoMT09PWUpcmV0dXJuIHRoaXMuY29weSh0KTtjb25zdCBuPXRoaXMuX3gscj10aGlzLl95LGk9dGhpcy5feixvPXRoaXMuX3c7bGV0IGE9byp0Ll93K24qdC5feCtyKnQuX3kraSp0Ll96O2lmKGE8MD8odGhpcy5fdz0tdC5fdyx0aGlzLl94PS10Ll94LHRoaXMuX3k9LXQuX3ksdGhpcy5fej0tdC5feixhPS1hKTp0aGlzLmNvcHkodCksYT49MSlyZXR1cm4gdGhpcy5fdz1vLHRoaXMuX3g9bix0aGlzLl95PXIsdGhpcy5fej1pLHRoaXM7Y29uc3Qgcz0xLWEqYTtpZihzPD1OdW1iZXIuRVBTSUxPTil7Y29uc3QgdD0xLWU7cmV0dXJuIHRoaXMuX3c9dCpvK2UqdGhpcy5fdyx0aGlzLl94PXQqbitlKnRoaXMuX3gsdGhpcy5feT10KnIrZSp0aGlzLl95LHRoaXMuX3o9dCppK2UqdGhpcy5feix0aGlzLm5vcm1hbGl6ZSgpLHRoaXMuX29uQ2hhbmdlQ2FsbGJhY2soKSx0aGlzfWNvbnN0IGM9TWF0aC5zcXJ0KHMpLGw9TWF0aC5hdGFuMihjLGEpLHU9TWF0aC5zaW4oKDEtZSkqbCkvYyxoPU1hdGguc2luKGUqbCkvYztyZXR1cm4gdGhpcy5fdz1vKnUrdGhpcy5fdypoLHRoaXMuX3g9bip1K3RoaXMuX3gqaCx0aGlzLl95PXIqdSt0aGlzLl95KmgsdGhpcy5fej1pKnUrdGhpcy5feipoLHRoaXMuX29uQ2hhbmdlQ2FsbGJhY2soKSx0aGlzfWVxdWFscyh0KXtyZXR1cm4gdC5feD09PXRoaXMuX3gmJnQuX3k9PT10aGlzLl95JiZ0Ll96PT09dGhpcy5feiYmdC5fdz09PXRoaXMuX3d9ZnJvbUFycmF5KHQsZT0wKXtyZXR1cm4gdGhpcy5feD10W2VdLHRoaXMuX3k9dFtlKzFdLHRoaXMuX3o9dFtlKzJdLHRoaXMuX3c9dFtlKzNdLHRoaXMuX29uQ2hhbmdlQ2FsbGJhY2soKSx0aGlzfXRvQXJyYXkodD1bXSxlPTApe3JldHVybiB0W2VdPXRoaXMuX3gsdFtlKzFdPXRoaXMuX3ksdFtlKzJdPXRoaXMuX3osdFtlKzNdPXRoaXMuX3csdH1mcm9tQnVmZmVyQXR0cmlidXRlKHQsZSl7cmV0dXJuIHRoaXMuX3g9dC5nZXRYKGUpLHRoaXMuX3k9dC5nZXRZKGUpLHRoaXMuX3o9dC5nZXRaKGUpLHRoaXMuX3c9dC5nZXRXKGUpLHRoaXN9X29uQ2hhbmdlKHQpe3JldHVybiB0aGlzLl9vbkNoYW5nZUNhbGxiYWNrPXQsdGhpc31fb25DaGFuZ2VDYWxsYmFjaygpe319Y2xhc3MgS257Y29uc3RydWN0b3IodD0wLGU9MCxuPTApe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiaXNWZWN0b3IzXCIse3ZhbHVlOiEwfSksdGhpcy54PXQsdGhpcy55PWUsdGhpcy56PW59c2V0KHQsZSxuKXtyZXR1cm4gdm9pZCAwPT09biYmKG49dGhpcy56KSx0aGlzLng9dCx0aGlzLnk9ZSx0aGlzLno9bix0aGlzfXNldFNjYWxhcih0KXtyZXR1cm4gdGhpcy54PXQsdGhpcy55PXQsdGhpcy56PXQsdGhpc31zZXRYKHQpe3JldHVybiB0aGlzLng9dCx0aGlzfXNldFkodCl7cmV0dXJuIHRoaXMueT10LHRoaXN9c2V0Wih0KXtyZXR1cm4gdGhpcy56PXQsdGhpc31zZXRDb21wb25lbnQodCxlKXtzd2l0Y2godCl7Y2FzZSAwOnRoaXMueD1lO2JyZWFrO2Nhc2UgMTp0aGlzLnk9ZTticmVhaztjYXNlIDI6dGhpcy56PWU7YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoXCJpbmRleCBpcyBvdXQgb2YgcmFuZ2U6IFwiK3QpfXJldHVybiB0aGlzfWdldENvbXBvbmVudCh0KXtzd2l0Y2godCl7Y2FzZSAwOnJldHVybiB0aGlzLng7Y2FzZSAxOnJldHVybiB0aGlzLnk7Y2FzZSAyOnJldHVybiB0aGlzLno7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoXCJpbmRleCBpcyBvdXQgb2YgcmFuZ2U6IFwiK3QpfX1jbG9uZSgpe3JldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLngsdGhpcy55LHRoaXMueil9Y29weSh0KXtyZXR1cm4gdGhpcy54PXQueCx0aGlzLnk9dC55LHRoaXMuej10LnosdGhpc31hZGQodCxlKXtyZXR1cm4gdm9pZCAwIT09ZT8oY29uc29sZS53YXJuKFwiVEhSRUUuVmVjdG9yMzogLmFkZCgpIG5vdyBvbmx5IGFjY2VwdHMgb25lIGFyZ3VtZW50LiBVc2UgLmFkZFZlY3RvcnMoIGEsIGIgKSBpbnN0ZWFkLlwiKSx0aGlzLmFkZFZlY3RvcnModCxlKSk6KHRoaXMueCs9dC54LHRoaXMueSs9dC55LHRoaXMueis9dC56LHRoaXMpfWFkZFNjYWxhcih0KXtyZXR1cm4gdGhpcy54Kz10LHRoaXMueSs9dCx0aGlzLnorPXQsdGhpc31hZGRWZWN0b3JzKHQsZSl7cmV0dXJuIHRoaXMueD10LngrZS54LHRoaXMueT10LnkrZS55LHRoaXMuej10LnorZS56LHRoaXN9YWRkU2NhbGVkVmVjdG9yKHQsZSl7cmV0dXJuIHRoaXMueCs9dC54KmUsdGhpcy55Kz10LnkqZSx0aGlzLnorPXQueiplLHRoaXN9c3ViKHQsZSl7cmV0dXJuIHZvaWQgMCE9PWU/KGNvbnNvbGUud2FybihcIlRIUkVFLlZlY3RvcjM6IC5zdWIoKSBub3cgb25seSBhY2NlcHRzIG9uZSBhcmd1bWVudC4gVXNlIC5zdWJWZWN0b3JzKCBhLCBiICkgaW5zdGVhZC5cIiksdGhpcy5zdWJWZWN0b3JzKHQsZSkpOih0aGlzLngtPXQueCx0aGlzLnktPXQueSx0aGlzLnotPXQueix0aGlzKX1zdWJTY2FsYXIodCl7cmV0dXJuIHRoaXMueC09dCx0aGlzLnktPXQsdGhpcy56LT10LHRoaXN9c3ViVmVjdG9ycyh0LGUpe3JldHVybiB0aGlzLng9dC54LWUueCx0aGlzLnk9dC55LWUueSx0aGlzLno9dC56LWUueix0aGlzfW11bHRpcGx5KHQsZSl7cmV0dXJuIHZvaWQgMCE9PWU/KGNvbnNvbGUud2FybihcIlRIUkVFLlZlY3RvcjM6IC5tdWx0aXBseSgpIG5vdyBvbmx5IGFjY2VwdHMgb25lIGFyZ3VtZW50LiBVc2UgLm11bHRpcGx5VmVjdG9ycyggYSwgYiApIGluc3RlYWQuXCIpLHRoaXMubXVsdGlwbHlWZWN0b3JzKHQsZSkpOih0aGlzLngqPXQueCx0aGlzLnkqPXQueSx0aGlzLnoqPXQueix0aGlzKX1tdWx0aXBseVNjYWxhcih0KXtyZXR1cm4gdGhpcy54Kj10LHRoaXMueSo9dCx0aGlzLnoqPXQsdGhpc31tdWx0aXBseVZlY3RvcnModCxlKXtyZXR1cm4gdGhpcy54PXQueCplLngsdGhpcy55PXQueSplLnksdGhpcy56PXQueiplLnosdGhpc31hcHBseUV1bGVyKHQpe3JldHVybiB0JiZ0LmlzRXVsZXJ8fGNvbnNvbGUuZXJyb3IoXCJUSFJFRS5WZWN0b3IzOiAuYXBwbHlFdWxlcigpIG5vdyBleHBlY3RzIGFuIEV1bGVyIHJvdGF0aW9uIHJhdGhlciB0aGFuIGEgVmVjdG9yMyBhbmQgb3JkZXIuXCIpLHRoaXMuYXBwbHlRdWF0ZXJuaW9uKCRuLnNldEZyb21FdWxlcih0KSl9YXBwbHlBeGlzQW5nbGUodCxlKXtyZXR1cm4gdGhpcy5hcHBseVF1YXRlcm5pb24oJG4uc2V0RnJvbUF4aXNBbmdsZSh0LGUpKX1hcHBseU1hdHJpeDModCl7Y29uc3QgZT10aGlzLngsbj10aGlzLnkscj10aGlzLnosaT10LmVsZW1lbnRzO3JldHVybiB0aGlzLng9aVswXSplK2lbM10qbitpWzZdKnIsdGhpcy55PWlbMV0qZStpWzRdKm4raVs3XSpyLHRoaXMuej1pWzJdKmUraVs1XSpuK2lbOF0qcix0aGlzfWFwcGx5Tm9ybWFsTWF0cml4KHQpe3JldHVybiB0aGlzLmFwcGx5TWF0cml4Myh0KS5ub3JtYWxpemUoKX1hcHBseU1hdHJpeDQodCl7Y29uc3QgZT10aGlzLngsbj10aGlzLnkscj10aGlzLnosaT10LmVsZW1lbnRzLG89MS8oaVszXSplK2lbN10qbitpWzExXSpyK2lbMTVdKTtyZXR1cm4gdGhpcy54PShpWzBdKmUraVs0XSpuK2lbOF0qcitpWzEyXSkqbyx0aGlzLnk9KGlbMV0qZStpWzVdKm4raVs5XSpyK2lbMTNdKSpvLHRoaXMuej0oaVsyXSplK2lbNl0qbitpWzEwXSpyK2lbMTRdKSpvLHRoaXN9YXBwbHlRdWF0ZXJuaW9uKHQpe2NvbnN0IGU9dGhpcy54LG49dGhpcy55LHI9dGhpcy56LGk9dC54LG89dC55LGE9dC56LHM9dC53LGM9cyplK28qci1hKm4sbD1zKm4rYSplLWkqcix1PXMqcitpKm4tbyplLGg9LWkqZS1vKm4tYSpyO3JldHVybiB0aGlzLng9YypzK2gqLWkrbCotYS11Ki1vLHRoaXMueT1sKnMraCotbyt1Ki1pLWMqLWEsdGhpcy56PXUqcytoKi1hK2MqLW8tbCotaSx0aGlzfXByb2plY3QodCl7cmV0dXJuIHRoaXMuYXBwbHlNYXRyaXg0KHQubWF0cml4V29ybGRJbnZlcnNlKS5hcHBseU1hdHJpeDQodC5wcm9qZWN0aW9uTWF0cml4KX11bnByb2plY3QodCl7cmV0dXJuIHRoaXMuYXBwbHlNYXRyaXg0KHQucHJvamVjdGlvbk1hdHJpeEludmVyc2UpLmFwcGx5TWF0cml4NCh0Lm1hdHJpeFdvcmxkKX10cmFuc2Zvcm1EaXJlY3Rpb24odCl7Y29uc3QgZT10aGlzLngsbj10aGlzLnkscj10aGlzLnosaT10LmVsZW1lbnRzO3JldHVybiB0aGlzLng9aVswXSplK2lbNF0qbitpWzhdKnIsdGhpcy55PWlbMV0qZStpWzVdKm4raVs5XSpyLHRoaXMuej1pWzJdKmUraVs2XSpuK2lbMTBdKnIsdGhpcy5ub3JtYWxpemUoKX1kaXZpZGUodCl7cmV0dXJuIHRoaXMueC89dC54LHRoaXMueS89dC55LHRoaXMuei89dC56LHRoaXN9ZGl2aWRlU2NhbGFyKHQpe3JldHVybiB0aGlzLm11bHRpcGx5U2NhbGFyKDEvdCl9bWluKHQpe3JldHVybiB0aGlzLng9TWF0aC5taW4odGhpcy54LHQueCksdGhpcy55PU1hdGgubWluKHRoaXMueSx0LnkpLHRoaXMuej1NYXRoLm1pbih0aGlzLnosdC56KSx0aGlzfW1heCh0KXtyZXR1cm4gdGhpcy54PU1hdGgubWF4KHRoaXMueCx0LngpLHRoaXMueT1NYXRoLm1heCh0aGlzLnksdC55KSx0aGlzLno9TWF0aC5tYXgodGhpcy56LHQueiksdGhpc31jbGFtcCh0LGUpe3JldHVybiB0aGlzLng9TWF0aC5tYXgodC54LE1hdGgubWluKGUueCx0aGlzLngpKSx0aGlzLnk9TWF0aC5tYXgodC55LE1hdGgubWluKGUueSx0aGlzLnkpKSx0aGlzLno9TWF0aC5tYXgodC56LE1hdGgubWluKGUueix0aGlzLnopKSx0aGlzfWNsYW1wU2NhbGFyKHQsZSl7cmV0dXJuIHRoaXMueD1NYXRoLm1heCh0LE1hdGgubWluKGUsdGhpcy54KSksdGhpcy55PU1hdGgubWF4KHQsTWF0aC5taW4oZSx0aGlzLnkpKSx0aGlzLno9TWF0aC5tYXgodCxNYXRoLm1pbihlLHRoaXMueikpLHRoaXN9Y2xhbXBMZW5ndGgodCxlKXtjb25zdCBuPXRoaXMubGVuZ3RoKCk7cmV0dXJuIHRoaXMuZGl2aWRlU2NhbGFyKG58fDEpLm11bHRpcGx5U2NhbGFyKE1hdGgubWF4KHQsTWF0aC5taW4oZSxuKSkpfWZsb29yKCl7cmV0dXJuIHRoaXMueD1NYXRoLmZsb29yKHRoaXMueCksdGhpcy55PU1hdGguZmxvb3IodGhpcy55KSx0aGlzLno9TWF0aC5mbG9vcih0aGlzLnopLHRoaXN9Y2VpbCgpe3JldHVybiB0aGlzLng9TWF0aC5jZWlsKHRoaXMueCksdGhpcy55PU1hdGguY2VpbCh0aGlzLnkpLHRoaXMuej1NYXRoLmNlaWwodGhpcy56KSx0aGlzfXJvdW5kKCl7cmV0dXJuIHRoaXMueD1NYXRoLnJvdW5kKHRoaXMueCksdGhpcy55PU1hdGgucm91bmQodGhpcy55KSx0aGlzLno9TWF0aC5yb3VuZCh0aGlzLnopLHRoaXN9cm91bmRUb1plcm8oKXtyZXR1cm4gdGhpcy54PXRoaXMueDwwP01hdGguY2VpbCh0aGlzLngpOk1hdGguZmxvb3IodGhpcy54KSx0aGlzLnk9dGhpcy55PDA/TWF0aC5jZWlsKHRoaXMueSk6TWF0aC5mbG9vcih0aGlzLnkpLHRoaXMuej10aGlzLno8MD9NYXRoLmNlaWwodGhpcy56KTpNYXRoLmZsb29yKHRoaXMueiksdGhpc31uZWdhdGUoKXtyZXR1cm4gdGhpcy54PS10aGlzLngsdGhpcy55PS10aGlzLnksdGhpcy56PS10aGlzLnosdGhpc31kb3QodCl7cmV0dXJuIHRoaXMueCp0LngrdGhpcy55KnQueSt0aGlzLnoqdC56fWxlbmd0aFNxKCl7cmV0dXJuIHRoaXMueCp0aGlzLngrdGhpcy55KnRoaXMueSt0aGlzLnoqdGhpcy56fWxlbmd0aCgpe3JldHVybiBNYXRoLnNxcnQodGhpcy54KnRoaXMueCt0aGlzLnkqdGhpcy55K3RoaXMueip0aGlzLnopfW1hbmhhdHRhbkxlbmd0aCgpe3JldHVybiBNYXRoLmFicyh0aGlzLngpK01hdGguYWJzKHRoaXMueSkrTWF0aC5hYnModGhpcy56KX1ub3JtYWxpemUoKXtyZXR1cm4gdGhpcy5kaXZpZGVTY2FsYXIodGhpcy5sZW5ndGgoKXx8MSl9c2V0TGVuZ3RoKHQpe3JldHVybiB0aGlzLm5vcm1hbGl6ZSgpLm11bHRpcGx5U2NhbGFyKHQpfWxlcnAodCxlKXtyZXR1cm4gdGhpcy54Kz0odC54LXRoaXMueCkqZSx0aGlzLnkrPSh0LnktdGhpcy55KSplLHRoaXMueis9KHQuei10aGlzLnopKmUsdGhpc31sZXJwVmVjdG9ycyh0LGUsbil7cmV0dXJuIHRoaXMueD10LngrKGUueC10LngpKm4sdGhpcy55PXQueSsoZS55LXQueSkqbix0aGlzLno9dC56KyhlLnotdC56KSpuLHRoaXN9Y3Jvc3ModCxlKXtyZXR1cm4gdm9pZCAwIT09ZT8oY29uc29sZS53YXJuKFwiVEhSRUUuVmVjdG9yMzogLmNyb3NzKCkgbm93IG9ubHkgYWNjZXB0cyBvbmUgYXJndW1lbnQuIFVzZSAuY3Jvc3NWZWN0b3JzKCBhLCBiICkgaW5zdGVhZC5cIiksdGhpcy5jcm9zc1ZlY3RvcnModCxlKSk6dGhpcy5jcm9zc1ZlY3RvcnModGhpcyx0KX1jcm9zc1ZlY3RvcnModCxlKXtjb25zdCBuPXQueCxyPXQueSxpPXQueixvPWUueCxhPWUueSxzPWUuejtyZXR1cm4gdGhpcy54PXIqcy1pKmEsdGhpcy55PWkqby1uKnMsdGhpcy56PW4qYS1yKm8sdGhpc31wcm9qZWN0T25WZWN0b3IodCl7Y29uc3QgZT10Lmxlbmd0aFNxKCk7aWYoMD09PWUpcmV0dXJuIHRoaXMuc2V0KDAsMCwwKTtjb25zdCBuPXQuZG90KHRoaXMpL2U7cmV0dXJuIHRoaXMuY29weSh0KS5tdWx0aXBseVNjYWxhcihuKX1wcm9qZWN0T25QbGFuZSh0KXtyZXR1cm4gUW4uY29weSh0aGlzKS5wcm9qZWN0T25WZWN0b3IodCksdGhpcy5zdWIoUW4pfXJlZmxlY3QodCl7cmV0dXJuIHRoaXMuc3ViKFFuLmNvcHkodCkubXVsdGlwbHlTY2FsYXIoMip0aGlzLmRvdCh0KSkpfWFuZ2xlVG8odCl7Y29uc3QgZT1NYXRoLnNxcnQodGhpcy5sZW5ndGhTcSgpKnQubGVuZ3RoU3EoKSk7aWYoMD09PWUpcmV0dXJuIE1hdGguUEkvMjtjb25zdCBuPXRoaXMuZG90KHQpL2U7cmV0dXJuIE1hdGguYWNvcyh6bi5jbGFtcChuLC0xLDEpKX1kaXN0YW5jZVRvKHQpe3JldHVybiBNYXRoLnNxcnQodGhpcy5kaXN0YW5jZVRvU3F1YXJlZCh0KSl9ZGlzdGFuY2VUb1NxdWFyZWQodCl7Y29uc3QgZT10aGlzLngtdC54LG49dGhpcy55LXQueSxyPXRoaXMuei10Lno7cmV0dXJuIGUqZStuKm4rcipyfW1hbmhhdHRhbkRpc3RhbmNlVG8odCl7cmV0dXJuIE1hdGguYWJzKHRoaXMueC10LngpK01hdGguYWJzKHRoaXMueS10LnkpK01hdGguYWJzKHRoaXMuei10LnopfXNldEZyb21TcGhlcmljYWwodCl7cmV0dXJuIHRoaXMuc2V0RnJvbVNwaGVyaWNhbENvb3Jkcyh0LnJhZGl1cyx0LnBoaSx0LnRoZXRhKX1zZXRGcm9tU3BoZXJpY2FsQ29vcmRzKHQsZSxuKXtjb25zdCByPU1hdGguc2luKGUpKnQ7cmV0dXJuIHRoaXMueD1yKk1hdGguc2luKG4pLHRoaXMueT1NYXRoLmNvcyhlKSp0LHRoaXMuej1yKk1hdGguY29zKG4pLHRoaXN9c2V0RnJvbUN5bGluZHJpY2FsKHQpe3JldHVybiB0aGlzLnNldEZyb21DeWxpbmRyaWNhbENvb3Jkcyh0LnJhZGl1cyx0LnRoZXRhLHQueSl9c2V0RnJvbUN5bGluZHJpY2FsQ29vcmRzKHQsZSxuKXtyZXR1cm4gdGhpcy54PXQqTWF0aC5zaW4oZSksdGhpcy55PW4sdGhpcy56PXQqTWF0aC5jb3MoZSksdGhpc31zZXRGcm9tTWF0cml4UG9zaXRpb24odCl7Y29uc3QgZT10LmVsZW1lbnRzO3JldHVybiB0aGlzLng9ZVsxMl0sdGhpcy55PWVbMTNdLHRoaXMuej1lWzE0XSx0aGlzfXNldEZyb21NYXRyaXhTY2FsZSh0KXtjb25zdCBlPXRoaXMuc2V0RnJvbU1hdHJpeENvbHVtbih0LDApLmxlbmd0aCgpLG49dGhpcy5zZXRGcm9tTWF0cml4Q29sdW1uKHQsMSkubGVuZ3RoKCkscj10aGlzLnNldEZyb21NYXRyaXhDb2x1bW4odCwyKS5sZW5ndGgoKTtyZXR1cm4gdGhpcy54PWUsdGhpcy55PW4sdGhpcy56PXIsdGhpc31zZXRGcm9tTWF0cml4Q29sdW1uKHQsZSl7cmV0dXJuIHRoaXMuZnJvbUFycmF5KHQuZWxlbWVudHMsNCplKX1zZXRGcm9tTWF0cml4M0NvbHVtbih0LGUpe3JldHVybiB0aGlzLmZyb21BcnJheSh0LmVsZW1lbnRzLDMqZSl9ZXF1YWxzKHQpe3JldHVybiB0Lng9PT10aGlzLngmJnQueT09PXRoaXMueSYmdC56PT09dGhpcy56fWZyb21BcnJheSh0LGU9MCl7cmV0dXJuIHRoaXMueD10W2VdLHRoaXMueT10W2UrMV0sdGhpcy56PXRbZSsyXSx0aGlzfXRvQXJyYXkodD1bXSxlPTApe3JldHVybiB0W2VdPXRoaXMueCx0W2UrMV09dGhpcy55LHRbZSsyXT10aGlzLnosdH1mcm9tQnVmZmVyQXR0cmlidXRlKHQsZSxuKXtyZXR1cm4gdm9pZCAwIT09biYmY29uc29sZS53YXJuKFwiVEhSRUUuVmVjdG9yMzogb2Zmc2V0IGhhcyBiZWVuIHJlbW92ZWQgZnJvbSAuZnJvbUJ1ZmZlckF0dHJpYnV0ZSgpLlwiKSx0aGlzLng9dC5nZXRYKGUpLHRoaXMueT10LmdldFkoZSksdGhpcy56PXQuZ2V0WihlKSx0aGlzfXJhbmRvbSgpe3JldHVybiB0aGlzLng9TWF0aC5yYW5kb20oKSx0aGlzLnk9TWF0aC5yYW5kb20oKSx0aGlzLno9TWF0aC5yYW5kb20oKSx0aGlzfX1jb25zdCBRbj1uZXcgS24sJG49bmV3IEpuO2NsYXNzIHRye2NvbnN0cnVjdG9yKHQsZSl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJpc0JveDNcIix7dmFsdWU6ITB9KSx0aGlzLm1pbj12b2lkIDAhPT10P3Q6bmV3IEtuKDEvMCwxLzAsMS8wKSx0aGlzLm1heD12b2lkIDAhPT1lP2U6bmV3IEtuKC0xLzAsLTEvMCwtMS8wKX1zZXQodCxlKXtyZXR1cm4gdGhpcy5taW4uY29weSh0KSx0aGlzLm1heC5jb3B5KGUpLHRoaXN9c2V0RnJvbUFycmF5KHQpe2xldCBlPTEvMCxuPTEvMCxyPTEvMCxpPS0xLzAsbz0tMS8wLGE9LTEvMDtmb3IobGV0IHM9MCxjPXQubGVuZ3RoO3M8YztzKz0zKXtjb25zdCBjPXRbc10sbD10W3MrMV0sdT10W3MrMl07YzxlJiYoZT1jKSxsPG4mJihuPWwpLHU8ciYmKHI9dSksYz5pJiYoaT1jKSxsPm8mJihvPWwpLHU+YSYmKGE9dSl9cmV0dXJuIHRoaXMubWluLnNldChlLG4sciksdGhpcy5tYXguc2V0KGksbyxhKSx0aGlzfXNldEZyb21CdWZmZXJBdHRyaWJ1dGUodCl7bGV0IGU9MS8wLG49MS8wLHI9MS8wLGk9LTEvMCxvPS0xLzAsYT0tMS8wO2ZvcihsZXQgcz0wLGM9dC5jb3VudDtzPGM7cysrKXtjb25zdCBjPXQuZ2V0WChzKSxsPXQuZ2V0WShzKSx1PXQuZ2V0WihzKTtjPGUmJihlPWMpLGw8biYmKG49bCksdTxyJiYocj11KSxjPmkmJihpPWMpLGw+byYmKG89bCksdT5hJiYoYT11KX1yZXR1cm4gdGhpcy5taW4uc2V0KGUsbixyKSx0aGlzLm1heC5zZXQoaSxvLGEpLHRoaXN9c2V0RnJvbVBvaW50cyh0KXt0aGlzLm1ha2VFbXB0eSgpO2ZvcihsZXQgZT0wLG49dC5sZW5ndGg7ZTxuO2UrKyl0aGlzLmV4cGFuZEJ5UG9pbnQodFtlXSk7cmV0dXJuIHRoaXN9c2V0RnJvbUNlbnRlckFuZFNpemUodCxlKXtjb25zdCBuPXJyLmNvcHkoZSkubXVsdGlwbHlTY2FsYXIoLjUpO3JldHVybiB0aGlzLm1pbi5jb3B5KHQpLnN1YihuKSx0aGlzLm1heC5jb3B5KHQpLmFkZChuKSx0aGlzfXNldEZyb21PYmplY3QodCl7cmV0dXJuIHRoaXMubWFrZUVtcHR5KCksdGhpcy5leHBhbmRCeU9iamVjdCh0KX1jbG9uZSgpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3RvcikuY29weSh0aGlzKX1jb3B5KHQpe3JldHVybiB0aGlzLm1pbi5jb3B5KHQubWluKSx0aGlzLm1heC5jb3B5KHQubWF4KSx0aGlzfW1ha2VFbXB0eSgpe3JldHVybiB0aGlzLm1pbi54PXRoaXMubWluLnk9dGhpcy5taW4uej0xLzAsdGhpcy5tYXgueD10aGlzLm1heC55PXRoaXMubWF4Lno9LTEvMCx0aGlzfWlzRW1wdHkoKXtyZXR1cm4gdGhpcy5tYXgueDx0aGlzLm1pbi54fHx0aGlzLm1heC55PHRoaXMubWluLnl8fHRoaXMubWF4Lno8dGhpcy5taW4uen1nZXRDZW50ZXIodCl7cmV0dXJuIHZvaWQgMD09PXQmJihjb25zb2xlLndhcm4oXCJUSFJFRS5Cb3gzOiAuZ2V0Q2VudGVyKCkgdGFyZ2V0IGlzIG5vdyByZXF1aXJlZFwiKSx0PW5ldyBLbiksdGhpcy5pc0VtcHR5KCk/dC5zZXQoMCwwLDApOnQuYWRkVmVjdG9ycyh0aGlzLm1pbix0aGlzLm1heCkubXVsdGlwbHlTY2FsYXIoLjUpfWdldFNpemUodCl7cmV0dXJuIHZvaWQgMD09PXQmJihjb25zb2xlLndhcm4oXCJUSFJFRS5Cb3gzOiAuZ2V0U2l6ZSgpIHRhcmdldCBpcyBub3cgcmVxdWlyZWRcIiksdD1uZXcgS24pLHRoaXMuaXNFbXB0eSgpP3Quc2V0KDAsMCwwKTp0LnN1YlZlY3RvcnModGhpcy5tYXgsdGhpcy5taW4pfWV4cGFuZEJ5UG9pbnQodCl7cmV0dXJuIHRoaXMubWluLm1pbih0KSx0aGlzLm1heC5tYXgodCksdGhpc31leHBhbmRCeVZlY3Rvcih0KXtyZXR1cm4gdGhpcy5taW4uc3ViKHQpLHRoaXMubWF4LmFkZCh0KSx0aGlzfWV4cGFuZEJ5U2NhbGFyKHQpe3JldHVybiB0aGlzLm1pbi5hZGRTY2FsYXIoLXQpLHRoaXMubWF4LmFkZFNjYWxhcih0KSx0aGlzfWV4cGFuZEJ5T2JqZWN0KHQpe3QudXBkYXRlV29ybGRNYXRyaXgoITEsITEpO2NvbnN0IGU9dC5nZW9tZXRyeTt2b2lkIDAhPT1lJiYobnVsbD09PWUuYm91bmRpbmdCb3gmJmUuY29tcHV0ZUJvdW5kaW5nQm94KCksaXIuY29weShlLmJvdW5kaW5nQm94KSxpci5hcHBseU1hdHJpeDQodC5tYXRyaXhXb3JsZCksdGhpcy51bmlvbihpcikpO2NvbnN0IG49dC5jaGlsZHJlbjtmb3IobGV0IHQ9MCxlPW4ubGVuZ3RoO3Q8ZTt0KyspdGhpcy5leHBhbmRCeU9iamVjdChuW3RdKTtyZXR1cm4gdGhpc31jb250YWluc1BvaW50KHQpe3JldHVybiEodC54PHRoaXMubWluLnh8fHQueD50aGlzLm1heC54fHx0Lnk8dGhpcy5taW4ueXx8dC55PnRoaXMubWF4Lnl8fHQuejx0aGlzLm1pbi56fHx0Lno+dGhpcy5tYXgueil9Y29udGFpbnNCb3godCl7cmV0dXJuIHRoaXMubWluLng8PXQubWluLngmJnQubWF4Lng8PXRoaXMubWF4LngmJnRoaXMubWluLnk8PXQubWluLnkmJnQubWF4Lnk8PXRoaXMubWF4LnkmJnRoaXMubWluLno8PXQubWluLnomJnQubWF4Lno8PXRoaXMubWF4Lnp9Z2V0UGFyYW1ldGVyKHQsZSl7cmV0dXJuIHZvaWQgMD09PWUmJihjb25zb2xlLndhcm4oXCJUSFJFRS5Cb3gzOiAuZ2V0UGFyYW1ldGVyKCkgdGFyZ2V0IGlzIG5vdyByZXF1aXJlZFwiKSxlPW5ldyBLbiksZS5zZXQoKHQueC10aGlzLm1pbi54KS8odGhpcy5tYXgueC10aGlzLm1pbi54KSwodC55LXRoaXMubWluLnkpLyh0aGlzLm1heC55LXRoaXMubWluLnkpLCh0LnotdGhpcy5taW4ueikvKHRoaXMubWF4LnotdGhpcy5taW4ueikpfWludGVyc2VjdHNCb3godCl7cmV0dXJuISh0Lm1heC54PHRoaXMubWluLnh8fHQubWluLng+dGhpcy5tYXgueHx8dC5tYXgueTx0aGlzLm1pbi55fHx0Lm1pbi55PnRoaXMubWF4Lnl8fHQubWF4Lno8dGhpcy5taW4uenx8dC5taW4uej50aGlzLm1heC56KX1pbnRlcnNlY3RzU3BoZXJlKHQpe3JldHVybiB0aGlzLmNsYW1wUG9pbnQodC5jZW50ZXIscnIpLHJyLmRpc3RhbmNlVG9TcXVhcmVkKHQuY2VudGVyKTw9dC5yYWRpdXMqdC5yYWRpdXN9aW50ZXJzZWN0c1BsYW5lKHQpe2xldCBlLG47cmV0dXJuIHQubm9ybWFsLng+MD8oZT10Lm5vcm1hbC54KnRoaXMubWluLngsbj10Lm5vcm1hbC54KnRoaXMubWF4LngpOihlPXQubm9ybWFsLngqdGhpcy5tYXgueCxuPXQubm9ybWFsLngqdGhpcy5taW4ueCksdC5ub3JtYWwueT4wPyhlKz10Lm5vcm1hbC55KnRoaXMubWluLnksbis9dC5ub3JtYWwueSp0aGlzLm1heC55KTooZSs9dC5ub3JtYWwueSp0aGlzLm1heC55LG4rPXQubm9ybWFsLnkqdGhpcy5taW4ueSksdC5ub3JtYWwuej4wPyhlKz10Lm5vcm1hbC56KnRoaXMubWluLnosbis9dC5ub3JtYWwueip0aGlzLm1heC56KTooZSs9dC5ub3JtYWwueip0aGlzLm1heC56LG4rPXQubm9ybWFsLnoqdGhpcy5taW4ueiksZTw9LXQuY29uc3RhbnQmJm4+PS10LmNvbnN0YW50fWludGVyc2VjdHNUcmlhbmdsZSh0KXtpZih0aGlzLmlzRW1wdHkoKSlyZXR1cm4hMTt0aGlzLmdldENlbnRlcihociksZHIuc3ViVmVjdG9ycyh0aGlzLm1heCxociksb3Iuc3ViVmVjdG9ycyh0LmEsaHIpLGFyLnN1YlZlY3RvcnModC5iLGhyKSxzci5zdWJWZWN0b3JzKHQuYyxociksY3Iuc3ViVmVjdG9ycyhhcixvciksbHIuc3ViVmVjdG9ycyhzcixhciksdXIuc3ViVmVjdG9ycyhvcixzcik7bGV0IGU9WzAsLWNyLnosY3IueSwwLC1sci56LGxyLnksMCwtdXIueix1ci55LGNyLnosMCwtY3IueCxsci56LDAsLWxyLngsdXIueiwwLC11ci54LC1jci55LGNyLngsMCwtbHIueSxsci54LDAsLXVyLnksdXIueCwwXTtyZXR1cm4hIWVyKGUsb3IsYXIsc3IsZHIpJiYoZT1bMSwwLDAsMCwxLDAsMCwwLDFdLCEhZXIoZSxvcixhcixzcixkcikmJihwci5jcm9zc1ZlY3RvcnMoY3IsbHIpLGU9W3ByLngscHIueSxwci56XSxlcihlLG9yLGFyLHNyLGRyKSkpfWNsYW1wUG9pbnQodCxlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGNvbnNvbGUud2FybihcIlRIUkVFLkJveDM6IC5jbGFtcFBvaW50KCkgdGFyZ2V0IGlzIG5vdyByZXF1aXJlZFwiKSxlPW5ldyBLbiksZS5jb3B5KHQpLmNsYW1wKHRoaXMubWluLHRoaXMubWF4KX1kaXN0YW5jZVRvUG9pbnQodCl7cmV0dXJuIHJyLmNvcHkodCkuY2xhbXAodGhpcy5taW4sdGhpcy5tYXgpLnN1Yih0KS5sZW5ndGgoKX1nZXRCb3VuZGluZ1NwaGVyZSh0KXtyZXR1cm4gdm9pZCAwPT09dCYmY29uc29sZS5lcnJvcihcIlRIUkVFLkJveDM6IC5nZXRCb3VuZGluZ1NwaGVyZSgpIHRhcmdldCBpcyBub3cgcmVxdWlyZWRcIiksdGhpcy5nZXRDZW50ZXIodC5jZW50ZXIpLHQucmFkaXVzPS41KnRoaXMuZ2V0U2l6ZShycikubGVuZ3RoKCksdH1pbnRlcnNlY3QodCl7cmV0dXJuIHRoaXMubWluLm1heCh0Lm1pbiksdGhpcy5tYXgubWluKHQubWF4KSx0aGlzLmlzRW1wdHkoKSYmdGhpcy5tYWtlRW1wdHkoKSx0aGlzfXVuaW9uKHQpe3JldHVybiB0aGlzLm1pbi5taW4odC5taW4pLHRoaXMubWF4Lm1heCh0Lm1heCksdGhpc31hcHBseU1hdHJpeDQodCl7cmV0dXJuIHRoaXMuaXNFbXB0eSgpfHwobnJbMF0uc2V0KHRoaXMubWluLngsdGhpcy5taW4ueSx0aGlzLm1pbi56KS5hcHBseU1hdHJpeDQodCksbnJbMV0uc2V0KHRoaXMubWluLngsdGhpcy5taW4ueSx0aGlzLm1heC56KS5hcHBseU1hdHJpeDQodCksbnJbMl0uc2V0KHRoaXMubWluLngsdGhpcy5tYXgueSx0aGlzLm1pbi56KS5hcHBseU1hdHJpeDQodCksbnJbM10uc2V0KHRoaXMubWluLngsdGhpcy5tYXgueSx0aGlzLm1heC56KS5hcHBseU1hdHJpeDQodCksbnJbNF0uc2V0KHRoaXMubWF4LngsdGhpcy5taW4ueSx0aGlzLm1pbi56KS5hcHBseU1hdHJpeDQodCksbnJbNV0uc2V0KHRoaXMubWF4LngsdGhpcy5taW4ueSx0aGlzLm1heC56KS5hcHBseU1hdHJpeDQodCksbnJbNl0uc2V0KHRoaXMubWF4LngsdGhpcy5tYXgueSx0aGlzLm1pbi56KS5hcHBseU1hdHJpeDQodCksbnJbN10uc2V0KHRoaXMubWF4LngsdGhpcy5tYXgueSx0aGlzLm1heC56KS5hcHBseU1hdHJpeDQodCksdGhpcy5zZXRGcm9tUG9pbnRzKG5yKSksdGhpc310cmFuc2xhdGUodCl7cmV0dXJuIHRoaXMubWluLmFkZCh0KSx0aGlzLm1heC5hZGQodCksdGhpc31lcXVhbHModCl7cmV0dXJuIHQubWluLmVxdWFscyh0aGlzLm1pbikmJnQubWF4LmVxdWFscyh0aGlzLm1heCl9fWZ1bmN0aW9uIGVyKHQsZSxuLHIsaSl7Zm9yKGxldCBvPTAsYT10Lmxlbmd0aC0zO288PWE7bys9Myl7ZnIuZnJvbUFycmF5KHQsbyk7Y29uc3QgYT1pLngqTWF0aC5hYnMoZnIueCkraS55Kk1hdGguYWJzKGZyLnkpK2kueipNYXRoLmFicyhmci56KSxzPWUuZG90KGZyKSxjPW4uZG90KGZyKSxsPXIuZG90KGZyKTtpZihNYXRoLm1heCgtTWF0aC5tYXgocyxjLGwpLE1hdGgubWluKHMsYyxsKSk+YSlyZXR1cm4hMX1yZXR1cm4hMH1jb25zdCBucj1bbmV3IEtuLG5ldyBLbixuZXcgS24sbmV3IEtuLG5ldyBLbixuZXcgS24sbmV3IEtuLG5ldyBLbl0scnI9bmV3IEtuLGlyPW5ldyB0cixvcj1uZXcgS24sYXI9bmV3IEtuLHNyPW5ldyBLbixjcj1uZXcgS24sbHI9bmV3IEtuLHVyPW5ldyBLbixocj1uZXcgS24sZHI9bmV3IEtuLHByPW5ldyBLbixmcj1uZXcgS24sbXI9bmV3IHRyO2NsYXNzIGdye2NvbnN0cnVjdG9yKHQsZSl7dGhpcy5jZW50ZXI9dm9pZCAwIT09dD90Om5ldyBLbix0aGlzLnJhZGl1cz12b2lkIDAhPT1lP2U6LTF9c2V0KHQsZSl7cmV0dXJuIHRoaXMuY2VudGVyLmNvcHkodCksdGhpcy5yYWRpdXM9ZSx0aGlzfXNldEZyb21Qb2ludHModCxlKXtjb25zdCBuPXRoaXMuY2VudGVyO3ZvaWQgMCE9PWU/bi5jb3B5KGUpOm1yLnNldEZyb21Qb2ludHModCkuZ2V0Q2VudGVyKG4pO2xldCByPTA7Zm9yKGxldCBlPTAsaT10Lmxlbmd0aDtlPGk7ZSsrKXI9TWF0aC5tYXgocixuLmRpc3RhbmNlVG9TcXVhcmVkKHRbZV0pKTtyZXR1cm4gdGhpcy5yYWRpdXM9TWF0aC5zcXJ0KHIpLHRoaXN9Y2xvbmUoKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyl9Y29weSh0KXtyZXR1cm4gdGhpcy5jZW50ZXIuY29weSh0LmNlbnRlciksdGhpcy5yYWRpdXM9dC5yYWRpdXMsdGhpc31pc0VtcHR5KCl7cmV0dXJuIHRoaXMucmFkaXVzPDB9bWFrZUVtcHR5KCl7cmV0dXJuIHRoaXMuY2VudGVyLnNldCgwLDAsMCksdGhpcy5yYWRpdXM9LTEsdGhpc31jb250YWluc1BvaW50KHQpe3JldHVybiB0LmRpc3RhbmNlVG9TcXVhcmVkKHRoaXMuY2VudGVyKTw9dGhpcy5yYWRpdXMqdGhpcy5yYWRpdXN9ZGlzdGFuY2VUb1BvaW50KHQpe3JldHVybiB0LmRpc3RhbmNlVG8odGhpcy5jZW50ZXIpLXRoaXMucmFkaXVzfWludGVyc2VjdHNTcGhlcmUodCl7Y29uc3QgZT10aGlzLnJhZGl1cyt0LnJhZGl1cztyZXR1cm4gdC5jZW50ZXIuZGlzdGFuY2VUb1NxdWFyZWQodGhpcy5jZW50ZXIpPD1lKmV9aW50ZXJzZWN0c0JveCh0KXtyZXR1cm4gdC5pbnRlcnNlY3RzU3BoZXJlKHRoaXMpfWludGVyc2VjdHNQbGFuZSh0KXtyZXR1cm4gTWF0aC5hYnModC5kaXN0YW5jZVRvUG9pbnQodGhpcy5jZW50ZXIpKTw9dGhpcy5yYWRpdXN9Y2xhbXBQb2ludCh0LGUpe2NvbnN0IG49dGhpcy5jZW50ZXIuZGlzdGFuY2VUb1NxdWFyZWQodCk7cmV0dXJuIHZvaWQgMD09PWUmJihjb25zb2xlLndhcm4oXCJUSFJFRS5TcGhlcmU6IC5jbGFtcFBvaW50KCkgdGFyZ2V0IGlzIG5vdyByZXF1aXJlZFwiKSxlPW5ldyBLbiksZS5jb3B5KHQpLG4+dGhpcy5yYWRpdXMqdGhpcy5yYWRpdXMmJihlLnN1Yih0aGlzLmNlbnRlcikubm9ybWFsaXplKCksZS5tdWx0aXBseVNjYWxhcih0aGlzLnJhZGl1cykuYWRkKHRoaXMuY2VudGVyKSksZX1nZXRCb3VuZGluZ0JveCh0KXtyZXR1cm4gdm9pZCAwPT09dCYmKGNvbnNvbGUud2FybihcIlRIUkVFLlNwaGVyZTogLmdldEJvdW5kaW5nQm94KCkgdGFyZ2V0IGlzIG5vdyByZXF1aXJlZFwiKSx0PW5ldyB0ciksdGhpcy5pc0VtcHR5KCk/KHQubWFrZUVtcHR5KCksdCk6KHQuc2V0KHRoaXMuY2VudGVyLHRoaXMuY2VudGVyKSx0LmV4cGFuZEJ5U2NhbGFyKHRoaXMucmFkaXVzKSx0KX1hcHBseU1hdHJpeDQodCl7cmV0dXJuIHRoaXMuY2VudGVyLmFwcGx5TWF0cml4NCh0KSx0aGlzLnJhZGl1cz10aGlzLnJhZGl1cyp0LmdldE1heFNjYWxlT25BeGlzKCksdGhpc310cmFuc2xhdGUodCl7cmV0dXJuIHRoaXMuY2VudGVyLmFkZCh0KSx0aGlzfWVxdWFscyh0KXtyZXR1cm4gdC5jZW50ZXIuZXF1YWxzKHRoaXMuY2VudGVyKSYmdC5yYWRpdXM9PT10aGlzLnJhZGl1c319Y29uc3QgdnI9bmV3IEtuLHlyPW5ldyBLbix4cj1uZXcgS24sYnI9bmV3IEtuLHdyPW5ldyBLbixfcj1uZXcgS24sTXI9bmV3IEtuO2NsYXNzIFNye2NvbnN0cnVjdG9yKHQsZSl7dGhpcy5vcmlnaW49dm9pZCAwIT09dD90Om5ldyBLbix0aGlzLmRpcmVjdGlvbj12b2lkIDAhPT1lP2U6bmV3IEtuKDAsMCwtMSl9c2V0KHQsZSl7cmV0dXJuIHRoaXMub3JpZ2luLmNvcHkodCksdGhpcy5kaXJlY3Rpb24uY29weShlKSx0aGlzfWNsb25lKCl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKS5jb3B5KHRoaXMpfWNvcHkodCl7cmV0dXJuIHRoaXMub3JpZ2luLmNvcHkodC5vcmlnaW4pLHRoaXMuZGlyZWN0aW9uLmNvcHkodC5kaXJlY3Rpb24pLHRoaXN9YXQodCxlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGNvbnNvbGUud2FybihcIlRIUkVFLlJheTogLmF0KCkgdGFyZ2V0IGlzIG5vdyByZXF1aXJlZFwiKSxlPW5ldyBLbiksZS5jb3B5KHRoaXMuZGlyZWN0aW9uKS5tdWx0aXBseVNjYWxhcih0KS5hZGQodGhpcy5vcmlnaW4pfWxvb2tBdCh0KXtyZXR1cm4gdGhpcy5kaXJlY3Rpb24uY29weSh0KS5zdWIodGhpcy5vcmlnaW4pLm5vcm1hbGl6ZSgpLHRoaXN9cmVjYXN0KHQpe3JldHVybiB0aGlzLm9yaWdpbi5jb3B5KHRoaXMuYXQodCx2cikpLHRoaXN9Y2xvc2VzdFBvaW50VG9Qb2ludCh0LGUpe3ZvaWQgMD09PWUmJihjb25zb2xlLndhcm4oXCJUSFJFRS5SYXk6IC5jbG9zZXN0UG9pbnRUb1BvaW50KCkgdGFyZ2V0IGlzIG5vdyByZXF1aXJlZFwiKSxlPW5ldyBLbiksZS5zdWJWZWN0b3JzKHQsdGhpcy5vcmlnaW4pO2NvbnN0IG49ZS5kb3QodGhpcy5kaXJlY3Rpb24pO3JldHVybiBuPDA/ZS5jb3B5KHRoaXMub3JpZ2luKTplLmNvcHkodGhpcy5kaXJlY3Rpb24pLm11bHRpcGx5U2NhbGFyKG4pLmFkZCh0aGlzLm9yaWdpbil9ZGlzdGFuY2VUb1BvaW50KHQpe3JldHVybiBNYXRoLnNxcnQodGhpcy5kaXN0YW5jZVNxVG9Qb2ludCh0KSl9ZGlzdGFuY2VTcVRvUG9pbnQodCl7Y29uc3QgZT12ci5zdWJWZWN0b3JzKHQsdGhpcy5vcmlnaW4pLmRvdCh0aGlzLmRpcmVjdGlvbik7cmV0dXJuIGU8MD90aGlzLm9yaWdpbi5kaXN0YW5jZVRvU3F1YXJlZCh0KToodnIuY29weSh0aGlzLmRpcmVjdGlvbikubXVsdGlwbHlTY2FsYXIoZSkuYWRkKHRoaXMub3JpZ2luKSx2ci5kaXN0YW5jZVRvU3F1YXJlZCh0KSl9ZGlzdGFuY2VTcVRvU2VnbWVudCh0LGUsbixyKXt5ci5jb3B5KHQpLmFkZChlKS5tdWx0aXBseVNjYWxhciguNSkseHIuY29weShlKS5zdWIodCkubm9ybWFsaXplKCksYnIuY29weSh0aGlzLm9yaWdpbikuc3ViKHlyKTtjb25zdCBpPS41KnQuZGlzdGFuY2VUbyhlKSxvPS10aGlzLmRpcmVjdGlvbi5kb3QoeHIpLGE9YnIuZG90KHRoaXMuZGlyZWN0aW9uKSxzPS1ici5kb3QoeHIpLGM9YnIubGVuZ3RoU3EoKSxsPU1hdGguYWJzKDEtbypvKTtsZXQgdSxoLGQscDtpZihsPjApaWYodT1vKnMtYSxoPW8qYS1zLHA9aSpsLHU+PTApaWYoaD49LXApaWYoaDw9cCl7Y29uc3QgdD0xL2w7dSo9dCxoKj10LGQ9dSoodStvKmgrMiphKStoKihvKnUraCsyKnMpK2N9ZWxzZSBoPWksdT1NYXRoLm1heCgwLC0obypoK2EpKSxkPS11KnUraCooaCsyKnMpK2M7ZWxzZSBoPS1pLHU9TWF0aC5tYXgoMCwtKG8qaCthKSksZD0tdSp1K2gqKGgrMipzKStjO2Vsc2UgaDw9LXA/KHU9TWF0aC5tYXgoMCwtKC1vKmkrYSkpLGg9dT4wPy1pOk1hdGgubWluKE1hdGgubWF4KC1pLC1zKSxpKSxkPS11KnUraCooaCsyKnMpK2MpOmg8PXA/KHU9MCxoPU1hdGgubWluKE1hdGgubWF4KC1pLC1zKSxpKSxkPWgqKGgrMipzKStjKToodT1NYXRoLm1heCgwLC0obyppK2EpKSxoPXU+MD9pOk1hdGgubWluKE1hdGgubWF4KC1pLC1zKSxpKSxkPS11KnUraCooaCsyKnMpK2MpO2Vsc2UgaD1vPjA/LWk6aSx1PU1hdGgubWF4KDAsLShvKmgrYSkpLGQ9LXUqdStoKihoKzIqcykrYztyZXR1cm4gbiYmbi5jb3B5KHRoaXMuZGlyZWN0aW9uKS5tdWx0aXBseVNjYWxhcih1KS5hZGQodGhpcy5vcmlnaW4pLHImJnIuY29weSh4cikubXVsdGlwbHlTY2FsYXIoaCkuYWRkKHlyKSxkfWludGVyc2VjdFNwaGVyZSh0LGUpe3ZyLnN1YlZlY3RvcnModC5jZW50ZXIsdGhpcy5vcmlnaW4pO2NvbnN0IG49dnIuZG90KHRoaXMuZGlyZWN0aW9uKSxyPXZyLmRvdCh2ciktbipuLGk9dC5yYWRpdXMqdC5yYWRpdXM7aWYocj5pKXJldHVybiBudWxsO2NvbnN0IG89TWF0aC5zcXJ0KGktciksYT1uLW8scz1uK287cmV0dXJuIGE8MCYmczwwP251bGw6YTwwP3RoaXMuYXQocyxlKTp0aGlzLmF0KGEsZSl9aW50ZXJzZWN0c1NwaGVyZSh0KXtyZXR1cm4gdGhpcy5kaXN0YW5jZVNxVG9Qb2ludCh0LmNlbnRlcik8PXQucmFkaXVzKnQucmFkaXVzfWRpc3RhbmNlVG9QbGFuZSh0KXtjb25zdCBlPXQubm9ybWFsLmRvdCh0aGlzLmRpcmVjdGlvbik7aWYoMD09PWUpcmV0dXJuIDA9PT10LmRpc3RhbmNlVG9Qb2ludCh0aGlzLm9yaWdpbik/MDpudWxsO2NvbnN0IG49LSh0aGlzLm9yaWdpbi5kb3QodC5ub3JtYWwpK3QuY29uc3RhbnQpL2U7cmV0dXJuIG4+PTA/bjpudWxsfWludGVyc2VjdFBsYW5lKHQsZSl7Y29uc3Qgbj10aGlzLmRpc3RhbmNlVG9QbGFuZSh0KTtyZXR1cm4gbnVsbD09PW4/bnVsbDp0aGlzLmF0KG4sZSl9aW50ZXJzZWN0c1BsYW5lKHQpe2NvbnN0IGU9dC5kaXN0YW5jZVRvUG9pbnQodGhpcy5vcmlnaW4pO2lmKDA9PT1lKXJldHVybiEwO3JldHVybiB0Lm5vcm1hbC5kb3QodGhpcy5kaXJlY3Rpb24pKmU8MH1pbnRlcnNlY3RCb3godCxlKXtsZXQgbixyLGksbyxhLHM7Y29uc3QgYz0xL3RoaXMuZGlyZWN0aW9uLngsbD0xL3RoaXMuZGlyZWN0aW9uLnksdT0xL3RoaXMuZGlyZWN0aW9uLnosaD10aGlzLm9yaWdpbjtyZXR1cm4gYz49MD8obj0odC5taW4ueC1oLngpKmMscj0odC5tYXgueC1oLngpKmMpOihuPSh0Lm1heC54LWgueCkqYyxyPSh0Lm1pbi54LWgueCkqYyksbD49MD8oaT0odC5taW4ueS1oLnkpKmwsbz0odC5tYXgueS1oLnkpKmwpOihpPSh0Lm1heC55LWgueSkqbCxvPSh0Lm1pbi55LWgueSkqbCksbj5vfHxpPnI/bnVsbDooKGk+bnx8biE9bikmJihuPWkpLChvPHJ8fHIhPXIpJiYocj1vKSx1Pj0wPyhhPSh0Lm1pbi56LWgueikqdSxzPSh0Lm1heC56LWgueikqdSk6KGE9KHQubWF4LnotaC56KSp1LHM9KHQubWluLnotaC56KSp1KSxuPnN8fGE+cj9udWxsOigoYT5ufHxuIT1uKSYmKG49YSksKHM8cnx8ciE9cikmJihyPXMpLHI8MD9udWxsOnRoaXMuYXQobj49MD9uOnIsZSkpKX1pbnRlcnNlY3RzQm94KHQpe3JldHVybiBudWxsIT09dGhpcy5pbnRlcnNlY3RCb3godCx2cil9aW50ZXJzZWN0VHJpYW5nbGUodCxlLG4scixpKXt3ci5zdWJWZWN0b3JzKGUsdCksX3Iuc3ViVmVjdG9ycyhuLHQpLE1yLmNyb3NzVmVjdG9ycyh3cixfcik7bGV0IG8sYT10aGlzLmRpcmVjdGlvbi5kb3QoTXIpO2lmKGE+MCl7aWYocilyZXR1cm4gbnVsbDtvPTF9ZWxzZXtpZighKGE8MCkpcmV0dXJuIG51bGw7bz0tMSxhPS1hfWJyLnN1YlZlY3RvcnModGhpcy5vcmlnaW4sdCk7Y29uc3Qgcz1vKnRoaXMuZGlyZWN0aW9uLmRvdChfci5jcm9zc1ZlY3RvcnMoYnIsX3IpKTtpZihzPDApcmV0dXJuIG51bGw7Y29uc3QgYz1vKnRoaXMuZGlyZWN0aW9uLmRvdCh3ci5jcm9zcyhicikpO2lmKGM8MClyZXR1cm4gbnVsbDtpZihzK2M+YSlyZXR1cm4gbnVsbDtjb25zdCBsPS1vKmJyLmRvdChNcik7cmV0dXJuIGw8MD9udWxsOnRoaXMuYXQobC9hLGkpfWFwcGx5TWF0cml4NCh0KXtyZXR1cm4gdGhpcy5vcmlnaW4uYXBwbHlNYXRyaXg0KHQpLHRoaXMuZGlyZWN0aW9uLnRyYW5zZm9ybURpcmVjdGlvbih0KSx0aGlzfWVxdWFscyh0KXtyZXR1cm4gdC5vcmlnaW4uZXF1YWxzKHRoaXMub3JpZ2luKSYmdC5kaXJlY3Rpb24uZXF1YWxzKHRoaXMuZGlyZWN0aW9uKX19Y2xhc3MgVHJ7Y29uc3RydWN0b3IoKXtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImlzTWF0cml4NFwiLHt2YWx1ZTohMH0pLHRoaXMuZWxlbWVudHM9WzEsMCwwLDAsMCwxLDAsMCwwLDAsMSwwLDAsMCwwLDFdLGFyZ3VtZW50cy5sZW5ndGg+MCYmY29uc29sZS5lcnJvcihcIlRIUkVFLk1hdHJpeDQ6IHRoZSBjb25zdHJ1Y3RvciBubyBsb25nZXIgcmVhZHMgYXJndW1lbnRzLiB1c2UgLnNldCgpIGluc3RlYWQuXCIpfXNldCh0LGUsbixyLGksbyxhLHMsYyxsLHUsaCxkLHAsZixtKXtjb25zdCBnPXRoaXMuZWxlbWVudHM7cmV0dXJuIGdbMF09dCxnWzRdPWUsZ1s4XT1uLGdbMTJdPXIsZ1sxXT1pLGdbNV09byxnWzldPWEsZ1sxM109cyxnWzJdPWMsZ1s2XT1sLGdbMTBdPXUsZ1sxNF09aCxnWzNdPWQsZ1s3XT1wLGdbMTFdPWYsZ1sxNV09bSx0aGlzfWlkZW50aXR5KCl7cmV0dXJuIHRoaXMuc2V0KDEsMCwwLDAsMCwxLDAsMCwwLDAsMSwwLDAsMCwwLDEpLHRoaXN9Y2xvbmUoKXtyZXR1cm4obmV3IFRyKS5mcm9tQXJyYXkodGhpcy5lbGVtZW50cyl9Y29weSh0KXtjb25zdCBlPXRoaXMuZWxlbWVudHMsbj10LmVsZW1lbnRzO3JldHVybiBlWzBdPW5bMF0sZVsxXT1uWzFdLGVbMl09blsyXSxlWzNdPW5bM10sZVs0XT1uWzRdLGVbNV09bls1XSxlWzZdPW5bNl0sZVs3XT1uWzddLGVbOF09bls4XSxlWzldPW5bOV0sZVsxMF09blsxMF0sZVsxMV09blsxMV0sZVsxMl09blsxMl0sZVsxM109blsxM10sZVsxNF09blsxNF0sZVsxNV09blsxNV0sdGhpc31jb3B5UG9zaXRpb24odCl7Y29uc3QgZT10aGlzLmVsZW1lbnRzLG49dC5lbGVtZW50cztyZXR1cm4gZVsxMl09blsxMl0sZVsxM109blsxM10sZVsxNF09blsxNF0sdGhpc31leHRyYWN0QmFzaXModCxlLG4pe3JldHVybiB0LnNldEZyb21NYXRyaXhDb2x1bW4odGhpcywwKSxlLnNldEZyb21NYXRyaXhDb2x1bW4odGhpcywxKSxuLnNldEZyb21NYXRyaXhDb2x1bW4odGhpcywyKSx0aGlzfW1ha2VCYXNpcyh0LGUsbil7cmV0dXJuIHRoaXMuc2V0KHQueCxlLngsbi54LDAsdC55LGUueSxuLnksMCx0LnosZS56LG4ueiwwLDAsMCwwLDEpLHRoaXN9ZXh0cmFjdFJvdGF0aW9uKHQpe2NvbnN0IGU9dGhpcy5lbGVtZW50cyxuPXQuZWxlbWVudHMscj0xL0VyLnNldEZyb21NYXRyaXhDb2x1bW4odCwwKS5sZW5ndGgoKSxpPTEvRXIuc2V0RnJvbU1hdHJpeENvbHVtbih0LDEpLmxlbmd0aCgpLG89MS9Fci5zZXRGcm9tTWF0cml4Q29sdW1uKHQsMikubGVuZ3RoKCk7cmV0dXJuIGVbMF09blswXSpyLGVbMV09blsxXSpyLGVbMl09blsyXSpyLGVbM109MCxlWzRdPW5bNF0qaSxlWzVdPW5bNV0qaSxlWzZdPW5bNl0qaSxlWzddPTAsZVs4XT1uWzhdKm8sZVs5XT1uWzldKm8sZVsxMF09blsxMF0qbyxlWzExXT0wLGVbMTJdPTAsZVsxM109MCxlWzE0XT0wLGVbMTVdPTEsdGhpc31tYWtlUm90YXRpb25Gcm9tRXVsZXIodCl7dCYmdC5pc0V1bGVyfHxjb25zb2xlLmVycm9yKFwiVEhSRUUuTWF0cml4NDogLm1ha2VSb3RhdGlvbkZyb21FdWxlcigpIG5vdyBleHBlY3RzIGEgRXVsZXIgcm90YXRpb24gcmF0aGVyIHRoYW4gYSBWZWN0b3IzIGFuZCBvcmRlci5cIik7Y29uc3QgZT10aGlzLmVsZW1lbnRzLG49dC54LHI9dC55LGk9dC56LG89TWF0aC5jb3MobiksYT1NYXRoLnNpbihuKSxzPU1hdGguY29zKHIpLGM9TWF0aC5zaW4ociksbD1NYXRoLmNvcyhpKSx1PU1hdGguc2luKGkpO2lmKFwiWFlaXCI9PT10Lm9yZGVyKXtjb25zdCB0PW8qbCxuPW8qdSxyPWEqbCxpPWEqdTtlWzBdPXMqbCxlWzRdPS1zKnUsZVs4XT1jLGVbMV09bityKmMsZVs1XT10LWkqYyxlWzldPS1hKnMsZVsyXT1pLXQqYyxlWzZdPXIrbipjLGVbMTBdPW8qc31lbHNlIGlmKFwiWVhaXCI9PT10Lm9yZGVyKXtjb25zdCB0PXMqbCxuPXMqdSxyPWMqbCxpPWMqdTtlWzBdPXQraSphLGVbNF09ciphLW4sZVs4XT1vKmMsZVsxXT1vKnUsZVs1XT1vKmwsZVs5XT0tYSxlWzJdPW4qYS1yLGVbNl09aSt0KmEsZVsxMF09bypzfWVsc2UgaWYoXCJaWFlcIj09PXQub3JkZXIpe2NvbnN0IHQ9cypsLG49cyp1LHI9YypsLGk9Yyp1O2VbMF09dC1pKmEsZVs0XT0tbyp1LGVbOF09cituKmEsZVsxXT1uK3IqYSxlWzVdPW8qbCxlWzldPWktdCphLGVbMl09LW8qYyxlWzZdPWEsZVsxMF09bypzfWVsc2UgaWYoXCJaWVhcIj09PXQub3JkZXIpe2NvbnN0IHQ9bypsLG49byp1LHI9YSpsLGk9YSp1O2VbMF09cypsLGVbNF09cipjLW4sZVs4XT10KmMraSxlWzFdPXMqdSxlWzVdPWkqYyt0LGVbOV09bipjLXIsZVsyXT0tYyxlWzZdPWEqcyxlWzEwXT1vKnN9ZWxzZSBpZihcIllaWFwiPT09dC5vcmRlcil7Y29uc3QgdD1vKnMsbj1vKmMscj1hKnMsaT1hKmM7ZVswXT1zKmwsZVs0XT1pLXQqdSxlWzhdPXIqdStuLGVbMV09dSxlWzVdPW8qbCxlWzldPS1hKmwsZVsyXT0tYypsLGVbNl09bip1K3IsZVsxMF09dC1pKnV9ZWxzZSBpZihcIlhaWVwiPT09dC5vcmRlcil7Y29uc3QgdD1vKnMsbj1vKmMscj1hKnMsaT1hKmM7ZVswXT1zKmwsZVs0XT0tdSxlWzhdPWMqbCxlWzFdPXQqdStpLGVbNV09bypsLGVbOV09bip1LXIsZVsyXT1yKnUtbixlWzZdPWEqbCxlWzEwXT1pKnUrdH1yZXR1cm4gZVszXT0wLGVbN109MCxlWzExXT0wLGVbMTJdPTAsZVsxM109MCxlWzE0XT0wLGVbMTVdPTEsdGhpc31tYWtlUm90YXRpb25Gcm9tUXVhdGVybmlvbih0KXtyZXR1cm4gdGhpcy5jb21wb3NlKExyLHQsUnIpfWxvb2tBdCh0LGUsbil7Y29uc3Qgcj10aGlzLmVsZW1lbnRzO3JldHVybiBJci5zdWJWZWN0b3JzKHQsZSksMD09PUlyLmxlbmd0aFNxKCkmJihJci56PTEpLElyLm5vcm1hbGl6ZSgpLFByLmNyb3NzVmVjdG9ycyhuLElyKSwwPT09UHIubGVuZ3RoU3EoKSYmKDE9PT1NYXRoLmFicyhuLnopP0lyLngrPTFlLTQ6SXIueis9MWUtNCxJci5ub3JtYWxpemUoKSxQci5jcm9zc1ZlY3RvcnMobixJcikpLFByLm5vcm1hbGl6ZSgpLENyLmNyb3NzVmVjdG9ycyhJcixQciksclswXT1Qci54LHJbNF09Q3IueCxyWzhdPUlyLngsclsxXT1Qci55LHJbNV09Q3IueSxyWzldPUlyLnksclsyXT1Qci56LHJbNl09Q3IueixyWzEwXT1Jci56LHRoaXN9bXVsdGlwbHkodCxlKXtyZXR1cm4gdm9pZCAwIT09ZT8oY29uc29sZS53YXJuKFwiVEhSRUUuTWF0cml4NDogLm11bHRpcGx5KCkgbm93IG9ubHkgYWNjZXB0cyBvbmUgYXJndW1lbnQuIFVzZSAubXVsdGlwbHlNYXRyaWNlcyggYSwgYiApIGluc3RlYWQuXCIpLHRoaXMubXVsdGlwbHlNYXRyaWNlcyh0LGUpKTp0aGlzLm11bHRpcGx5TWF0cmljZXModGhpcyx0KX1wcmVtdWx0aXBseSh0KXtyZXR1cm4gdGhpcy5tdWx0aXBseU1hdHJpY2VzKHQsdGhpcyl9bXVsdGlwbHlNYXRyaWNlcyh0LGUpe2NvbnN0IG49dC5lbGVtZW50cyxyPWUuZWxlbWVudHMsaT10aGlzLmVsZW1lbnRzLG89blswXSxhPW5bNF0scz1uWzhdLGM9blsxMl0sbD1uWzFdLHU9bls1XSxoPW5bOV0sZD1uWzEzXSxwPW5bMl0sZj1uWzZdLG09blsxMF0sZz1uWzE0XSx2PW5bM10seT1uWzddLHg9blsxMV0sYj1uWzE1XSx3PXJbMF0sXz1yWzRdLE09cls4XSxTPXJbMTJdLFQ9clsxXSxFPXJbNV0sQT1yWzldLEw9clsxM10sUj1yWzJdLFA9cls2XSxDPXJbMTBdLEk9clsxNF0sTz1yWzNdLE49cls3XSxEPXJbMTFdLEI9clsxNV07cmV0dXJuIGlbMF09byp3K2EqVCtzKlIrYypPLGlbNF09bypfK2EqRStzKlArYypOLGlbOF09bypNK2EqQStzKkMrYypELGlbMTJdPW8qUythKkwrcypJK2MqQixpWzFdPWwqdyt1KlQraCpSK2QqTyxpWzVdPWwqXyt1KkUraCpQK2QqTixpWzldPWwqTSt1KkEraCpDK2QqRCxpWzEzXT1sKlMrdSpMK2gqSStkKkIsaVsyXT1wKncrZipUK20qUitnKk8saVs2XT1wKl8rZipFK20qUCtnKk4saVsxMF09cCpNK2YqQSttKkMrZypELGlbMTRdPXAqUytmKkwrbSpJK2cqQixpWzNdPXYqdyt5KlQreCpSK2IqTyxpWzddPXYqXyt5KkUreCpQK2IqTixpWzExXT12Kk0reSpBK3gqQytiKkQsaVsxNV09dipTK3kqTCt4KkkrYipCLHRoaXN9bXVsdGlwbHlTY2FsYXIodCl7Y29uc3QgZT10aGlzLmVsZW1lbnRzO3JldHVybiBlWzBdKj10LGVbNF0qPXQsZVs4XSo9dCxlWzEyXSo9dCxlWzFdKj10LGVbNV0qPXQsZVs5XSo9dCxlWzEzXSo9dCxlWzJdKj10LGVbNl0qPXQsZVsxMF0qPXQsZVsxNF0qPXQsZVszXSo9dCxlWzddKj10LGVbMTFdKj10LGVbMTVdKj10LHRoaXN9ZGV0ZXJtaW5hbnQoKXtjb25zdCB0PXRoaXMuZWxlbWVudHMsZT10WzBdLG49dFs0XSxyPXRbOF0saT10WzEyXSxvPXRbMV0sYT10WzVdLHM9dFs5XSxjPXRbMTNdLGw9dFsyXSx1PXRbNl0saD10WzEwXSxkPXRbMTRdO3JldHVybiB0WzNdKigraSpzKnUtcipjKnUtaSphKmgrbipjKmgrciphKmQtbipzKmQpK3RbN10qKCtlKnMqZC1lKmMqaCtpKm8qaC1yKm8qZCtyKmMqbC1pKnMqbCkrdFsxMV0qKCtlKmMqdS1lKmEqZC1pKm8qdStuKm8qZCtpKmEqbC1uKmMqbCkrdFsxNV0qKC1yKmEqbC1lKnMqdStlKmEqaCtyKm8qdS1uKm8qaCtuKnMqbCl9dHJhbnNwb3NlKCl7Y29uc3QgdD10aGlzLmVsZW1lbnRzO2xldCBlO3JldHVybiBlPXRbMV0sdFsxXT10WzRdLHRbNF09ZSxlPXRbMl0sdFsyXT10WzhdLHRbOF09ZSxlPXRbNl0sdFs2XT10WzldLHRbOV09ZSxlPXRbM10sdFszXT10WzEyXSx0WzEyXT1lLGU9dFs3XSx0WzddPXRbMTNdLHRbMTNdPWUsZT10WzExXSx0WzExXT10WzE0XSx0WzE0XT1lLHRoaXN9c2V0UG9zaXRpb24odCxlLG4pe2NvbnN0IHI9dGhpcy5lbGVtZW50cztyZXR1cm4gdC5pc1ZlY3RvcjM/KHJbMTJdPXQueCxyWzEzXT10LnksclsxNF09dC56KTooclsxMl09dCxyWzEzXT1lLHJbMTRdPW4pLHRoaXN9aW52ZXJ0KCl7Y29uc3QgdD10aGlzLmVsZW1lbnRzLGU9dFswXSxuPXRbMV0scj10WzJdLGk9dFszXSxvPXRbNF0sYT10WzVdLHM9dFs2XSxjPXRbN10sbD10WzhdLHU9dFs5XSxoPXRbMTBdLGQ9dFsxMV0scD10WzEyXSxmPXRbMTNdLG09dFsxNF0sZz10WzE1XSx2PXUqbSpjLWYqaCpjK2YqcypkLWEqbSpkLXUqcypnK2EqaCpnLHk9cCpoKmMtbCptKmMtcCpzKmQrbyptKmQrbCpzKmctbypoKmcseD1sKmYqYy1wKnUqYytwKmEqZC1vKmYqZC1sKmEqZytvKnUqZyxiPXAqdSpzLWwqZipzLXAqYSpoK28qZipoK2wqYSptLW8qdSptLHc9ZSp2K24qeStyKngraSpiO2lmKDA9PT13KXJldHVybiB0aGlzLnNldCgwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwKTtjb25zdCBfPTEvdztyZXR1cm4gdFswXT12Kl8sdFsxXT0oZipoKmktdSptKmktZipyKmQrbiptKmQrdSpyKmctbipoKmcpKl8sdFsyXT0oYSptKmktZipzKmkrZipyKmMtbiptKmMtYSpyKmcrbipzKmcpKl8sdFszXT0odSpzKmktYSpoKmktdSpyKmMrbipoKmMrYSpyKmQtbipzKmQpKl8sdFs0XT15Kl8sdFs1XT0obCptKmktcCpoKmkrcCpyKmQtZSptKmQtbCpyKmcrZSpoKmcpKl8sdFs2XT0ocCpzKmktbyptKmktcCpyKmMrZSptKmMrbypyKmctZSpzKmcpKl8sdFs3XT0obypoKmktbCpzKmkrbCpyKmMtZSpoKmMtbypyKmQrZSpzKmQpKl8sdFs4XT14Kl8sdFs5XT0ocCp1KmktbCpmKmktcCpuKmQrZSpmKmQrbCpuKmctZSp1KmcpKl8sdFsxMF09KG8qZippLXAqYSppK3AqbipjLWUqZipjLW8qbipnK2UqYSpnKSpfLHRbMTFdPShsKmEqaS1vKnUqaS1sKm4qYytlKnUqYytvKm4qZC1lKmEqZCkqXyx0WzEyXT1iKl8sdFsxM109KGwqZipyLXAqdSpyK3AqbipoLWUqZipoLWwqbiptK2UqdSptKSpfLHRbMTRdPShwKmEqci1vKmYqci1wKm4qcytlKmYqcytvKm4qbS1lKmEqbSkqXyx0WzE1XT0obyp1KnItbCphKnIrbCpuKnMtZSp1KnMtbypuKmgrZSphKmgpKl8sdGhpc31zY2FsZSh0KXtjb25zdCBlPXRoaXMuZWxlbWVudHMsbj10Lngscj10LnksaT10Lno7cmV0dXJuIGVbMF0qPW4sZVs0XSo9cixlWzhdKj1pLGVbMV0qPW4sZVs1XSo9cixlWzldKj1pLGVbMl0qPW4sZVs2XSo9cixlWzEwXSo9aSxlWzNdKj1uLGVbN10qPXIsZVsxMV0qPWksdGhpc31nZXRNYXhTY2FsZU9uQXhpcygpe2NvbnN0IHQ9dGhpcy5lbGVtZW50cyxlPXRbMF0qdFswXSt0WzFdKnRbMV0rdFsyXSp0WzJdLG49dFs0XSp0WzRdK3RbNV0qdFs1XSt0WzZdKnRbNl0scj10WzhdKnRbOF0rdFs5XSp0WzldK3RbMTBdKnRbMTBdO3JldHVybiBNYXRoLnNxcnQoTWF0aC5tYXgoZSxuLHIpKX1tYWtlVHJhbnNsYXRpb24odCxlLG4pe3JldHVybiB0aGlzLnNldCgxLDAsMCx0LDAsMSwwLGUsMCwwLDEsbiwwLDAsMCwxKSx0aGlzfW1ha2VSb3RhdGlvblgodCl7Y29uc3QgZT1NYXRoLmNvcyh0KSxuPU1hdGguc2luKHQpO3JldHVybiB0aGlzLnNldCgxLDAsMCwwLDAsZSwtbiwwLDAsbixlLDAsMCwwLDAsMSksdGhpc31tYWtlUm90YXRpb25ZKHQpe2NvbnN0IGU9TWF0aC5jb3ModCksbj1NYXRoLnNpbih0KTtyZXR1cm4gdGhpcy5zZXQoZSwwLG4sMCwwLDEsMCwwLC1uLDAsZSwwLDAsMCwwLDEpLHRoaXN9bWFrZVJvdGF0aW9uWih0KXtjb25zdCBlPU1hdGguY29zKHQpLG49TWF0aC5zaW4odCk7cmV0dXJuIHRoaXMuc2V0KGUsLW4sMCwwLG4sZSwwLDAsMCwwLDEsMCwwLDAsMCwxKSx0aGlzfW1ha2VSb3RhdGlvbkF4aXModCxlKXtjb25zdCBuPU1hdGguY29zKGUpLHI9TWF0aC5zaW4oZSksaT0xLW4sbz10LngsYT10Lnkscz10LnosYz1pKm8sbD1pKmE7cmV0dXJuIHRoaXMuc2V0KGMqbytuLGMqYS1yKnMsYypzK3IqYSwwLGMqYStyKnMsbCphK24sbCpzLXIqbywwLGMqcy1yKmEsbCpzK3IqbyxpKnMqcytuLDAsMCwwLDAsMSksdGhpc31tYWtlU2NhbGUodCxlLG4pe3JldHVybiB0aGlzLnNldCh0LDAsMCwwLDAsZSwwLDAsMCwwLG4sMCwwLDAsMCwxKSx0aGlzfW1ha2VTaGVhcih0LGUsbil7cmV0dXJuIHRoaXMuc2V0KDEsZSxuLDAsdCwxLG4sMCx0LGUsMSwwLDAsMCwwLDEpLHRoaXN9Y29tcG9zZSh0LGUsbil7Y29uc3Qgcj10aGlzLmVsZW1lbnRzLGk9ZS5feCxvPWUuX3ksYT1lLl96LHM9ZS5fdyxjPWkraSxsPW8rbyx1PWErYSxoPWkqYyxkPWkqbCxwPWkqdSxmPW8qbCxtPW8qdSxnPWEqdSx2PXMqYyx5PXMqbCx4PXMqdSxiPW4ueCx3PW4ueSxfPW4uejtyZXR1cm4gclswXT0oMS0oZitnKSkqYixyWzFdPShkK3gpKmIsclsyXT0ocC15KSpiLHJbM109MCxyWzRdPShkLXgpKncscls1XT0oMS0oaCtnKSkqdyxyWzZdPShtK3YpKncscls3XT0wLHJbOF09KHAreSkqXyxyWzldPShtLXYpKl8sclsxMF09KDEtKGgrZikpKl8sclsxMV09MCxyWzEyXT10LngsclsxM109dC55LHJbMTRdPXQueixyWzE1XT0xLHRoaXN9ZGVjb21wb3NlKHQsZSxuKXtjb25zdCByPXRoaXMuZWxlbWVudHM7bGV0IGk9RXIuc2V0KHJbMF0sclsxXSxyWzJdKS5sZW5ndGgoKTtjb25zdCBvPUVyLnNldChyWzRdLHJbNV0scls2XSkubGVuZ3RoKCksYT1Fci5zZXQocls4XSxyWzldLHJbMTBdKS5sZW5ndGgoKTt0aGlzLmRldGVybWluYW50KCk8MCYmKGk9LWkpLHQueD1yWzEyXSx0Lnk9clsxM10sdC56PXJbMTRdLEFyLmNvcHkodGhpcyk7Y29uc3Qgcz0xL2ksYz0xL28sbD0xL2E7cmV0dXJuIEFyLmVsZW1lbnRzWzBdKj1zLEFyLmVsZW1lbnRzWzFdKj1zLEFyLmVsZW1lbnRzWzJdKj1zLEFyLmVsZW1lbnRzWzRdKj1jLEFyLmVsZW1lbnRzWzVdKj1jLEFyLmVsZW1lbnRzWzZdKj1jLEFyLmVsZW1lbnRzWzhdKj1sLEFyLmVsZW1lbnRzWzldKj1sLEFyLmVsZW1lbnRzWzEwXSo9bCxlLnNldEZyb21Sb3RhdGlvbk1hdHJpeChBciksbi54PWksbi55PW8sbi56PWEsdGhpc31tYWtlUGVyc3BlY3RpdmUodCxlLG4scixpLG8pe3ZvaWQgMD09PW8mJmNvbnNvbGUud2FybihcIlRIUkVFLk1hdHJpeDQ6IC5tYWtlUGVyc3BlY3RpdmUoKSBoYXMgYmVlbiByZWRlZmluZWQgYW5kIGhhcyBhIG5ldyBzaWduYXR1cmUuIFBsZWFzZSBjaGVjayB0aGUgZG9jcy5cIik7Y29uc3QgYT10aGlzLmVsZW1lbnRzLHM9MippLyhlLXQpLGM9MippLyhuLXIpLGw9KGUrdCkvKGUtdCksdT0obityKS8obi1yKSxoPS0obytpKS8oby1pKSxkPS0yKm8qaS8oby1pKTtyZXR1cm4gYVswXT1zLGFbNF09MCxhWzhdPWwsYVsxMl09MCxhWzFdPTAsYVs1XT1jLGFbOV09dSxhWzEzXT0wLGFbMl09MCxhWzZdPTAsYVsxMF09aCxhWzE0XT1kLGFbM109MCxhWzddPTAsYVsxMV09LTEsYVsxNV09MCx0aGlzfW1ha2VPcnRob2dyYXBoaWModCxlLG4scixpLG8pe2NvbnN0IGE9dGhpcy5lbGVtZW50cyxzPTEvKGUtdCksYz0xLyhuLXIpLGw9MS8oby1pKSx1PShlK3QpKnMsaD0obityKSpjLGQ9KG8raSkqbDtyZXR1cm4gYVswXT0yKnMsYVs0XT0wLGFbOF09MCxhWzEyXT0tdSxhWzFdPTAsYVs1XT0yKmMsYVs5XT0wLGFbMTNdPS1oLGFbMl09MCxhWzZdPTAsYVsxMF09LTIqbCxhWzE0XT0tZCxhWzNdPTAsYVs3XT0wLGFbMTFdPTAsYVsxNV09MSx0aGlzfWVxdWFscyh0KXtjb25zdCBlPXRoaXMuZWxlbWVudHMsbj10LmVsZW1lbnRzO2ZvcihsZXQgdD0wO3Q8MTY7dCsrKWlmKGVbdF0hPT1uW3RdKXJldHVybiExO3JldHVybiEwfWZyb21BcnJheSh0LGU9MCl7Zm9yKGxldCBuPTA7bjwxNjtuKyspdGhpcy5lbGVtZW50c1tuXT10W24rZV07cmV0dXJuIHRoaXN9dG9BcnJheSh0PVtdLGU9MCl7Y29uc3Qgbj10aGlzLmVsZW1lbnRzO3JldHVybiB0W2VdPW5bMF0sdFtlKzFdPW5bMV0sdFtlKzJdPW5bMl0sdFtlKzNdPW5bM10sdFtlKzRdPW5bNF0sdFtlKzVdPW5bNV0sdFtlKzZdPW5bNl0sdFtlKzddPW5bN10sdFtlKzhdPW5bOF0sdFtlKzldPW5bOV0sdFtlKzEwXT1uWzEwXSx0W2UrMTFdPW5bMTFdLHRbZSsxMl09blsxMl0sdFtlKzEzXT1uWzEzXSx0W2UrMTRdPW5bMTRdLHRbZSsxNV09blsxNV0sdH19Y29uc3QgRXI9bmV3IEtuLEFyPW5ldyBUcixMcj1uZXcgS24oMCwwLDApLFJyPW5ldyBLbigxLDEsMSksUHI9bmV3IEtuLENyPW5ldyBLbixJcj1uZXcgS247Y2xhc3MgT3J7Y29uc3RydWN0b3IodD0wLGU9MCxuPTAscj1Pci5EZWZhdWx0T3JkZXIpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiaXNFdWxlclwiLHt2YWx1ZTohMH0pLHRoaXMuX3g9dCx0aGlzLl95PWUsdGhpcy5fej1uLHRoaXMuX29yZGVyPXJ9Z2V0IHgoKXtyZXR1cm4gdGhpcy5feH1zZXQgeCh0KXt0aGlzLl94PXQsdGhpcy5fb25DaGFuZ2VDYWxsYmFjaygpfWdldCB5KCl7cmV0dXJuIHRoaXMuX3l9c2V0IHkodCl7dGhpcy5feT10LHRoaXMuX29uQ2hhbmdlQ2FsbGJhY2soKX1nZXQgeigpe3JldHVybiB0aGlzLl96fXNldCB6KHQpe3RoaXMuX3o9dCx0aGlzLl9vbkNoYW5nZUNhbGxiYWNrKCl9Z2V0IG9yZGVyKCl7cmV0dXJuIHRoaXMuX29yZGVyfXNldCBvcmRlcih0KXt0aGlzLl9vcmRlcj10LHRoaXMuX29uQ2hhbmdlQ2FsbGJhY2soKX1zZXQodCxlLG4scil7cmV0dXJuIHRoaXMuX3g9dCx0aGlzLl95PWUsdGhpcy5fej1uLHRoaXMuX29yZGVyPXJ8fHRoaXMuX29yZGVyLHRoaXMuX29uQ2hhbmdlQ2FsbGJhY2soKSx0aGlzfWNsb25lKCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMuX3gsdGhpcy5feSx0aGlzLl96LHRoaXMuX29yZGVyKX1jb3B5KHQpe3JldHVybiB0aGlzLl94PXQuX3gsdGhpcy5feT10Ll95LHRoaXMuX3o9dC5feix0aGlzLl9vcmRlcj10Ll9vcmRlcix0aGlzLl9vbkNoYW5nZUNhbGxiYWNrKCksdGhpc31zZXRGcm9tUm90YXRpb25NYXRyaXgodCxlLG4pe2NvbnN0IHI9em4uY2xhbXAsaT10LmVsZW1lbnRzLG89aVswXSxhPWlbNF0scz1pWzhdLGM9aVsxXSxsPWlbNV0sdT1pWzldLGg9aVsyXSxkPWlbNl0scD1pWzEwXTtzd2l0Y2goZT1lfHx0aGlzLl9vcmRlcil7Y2FzZVwiWFlaXCI6dGhpcy5feT1NYXRoLmFzaW4ocihzLC0xLDEpKSxNYXRoLmFicyhzKTwuOTk5OTk5OT8odGhpcy5feD1NYXRoLmF0YW4yKC11LHApLHRoaXMuX3o9TWF0aC5hdGFuMigtYSxvKSk6KHRoaXMuX3g9TWF0aC5hdGFuMihkLGwpLHRoaXMuX3o9MCk7YnJlYWs7Y2FzZVwiWVhaXCI6dGhpcy5feD1NYXRoLmFzaW4oLXIodSwtMSwxKSksTWF0aC5hYnModSk8Ljk5OTk5OTk/KHRoaXMuX3k9TWF0aC5hdGFuMihzLHApLHRoaXMuX3o9TWF0aC5hdGFuMihjLGwpKToodGhpcy5feT1NYXRoLmF0YW4yKC1oLG8pLHRoaXMuX3o9MCk7YnJlYWs7Y2FzZVwiWlhZXCI6dGhpcy5feD1NYXRoLmFzaW4ocihkLC0xLDEpKSxNYXRoLmFicyhkKTwuOTk5OTk5OT8odGhpcy5feT1NYXRoLmF0YW4yKC1oLHApLHRoaXMuX3o9TWF0aC5hdGFuMigtYSxsKSk6KHRoaXMuX3k9MCx0aGlzLl96PU1hdGguYXRhbjIoYyxvKSk7YnJlYWs7Y2FzZVwiWllYXCI6dGhpcy5feT1NYXRoLmFzaW4oLXIoaCwtMSwxKSksTWF0aC5hYnMoaCk8Ljk5OTk5OTk/KHRoaXMuX3g9TWF0aC5hdGFuMihkLHApLHRoaXMuX3o9TWF0aC5hdGFuMihjLG8pKToodGhpcy5feD0wLHRoaXMuX3o9TWF0aC5hdGFuMigtYSxsKSk7YnJlYWs7Y2FzZVwiWVpYXCI6dGhpcy5fej1NYXRoLmFzaW4ocihjLC0xLDEpKSxNYXRoLmFicyhjKTwuOTk5OTk5OT8odGhpcy5feD1NYXRoLmF0YW4yKC11LGwpLHRoaXMuX3k9TWF0aC5hdGFuMigtaCxvKSk6KHRoaXMuX3g9MCx0aGlzLl95PU1hdGguYXRhbjIocyxwKSk7YnJlYWs7Y2FzZVwiWFpZXCI6dGhpcy5fej1NYXRoLmFzaW4oLXIoYSwtMSwxKSksTWF0aC5hYnMoYSk8Ljk5OTk5OTk/KHRoaXMuX3g9TWF0aC5hdGFuMihkLGwpLHRoaXMuX3k9TWF0aC5hdGFuMihzLG8pKToodGhpcy5feD1NYXRoLmF0YW4yKC11LHApLHRoaXMuX3k9MCk7YnJlYWs7ZGVmYXVsdDpjb25zb2xlLndhcm4oXCJUSFJFRS5FdWxlcjogLnNldEZyb21Sb3RhdGlvbk1hdHJpeCgpIGVuY291bnRlcmVkIGFuIHVua25vd24gb3JkZXI6IFwiK2UpfXJldHVybiB0aGlzLl9vcmRlcj1lLCExIT09biYmdGhpcy5fb25DaGFuZ2VDYWxsYmFjaygpLHRoaXN9c2V0RnJvbVF1YXRlcm5pb24odCxlLG4pe3JldHVybiBOci5tYWtlUm90YXRpb25Gcm9tUXVhdGVybmlvbih0KSx0aGlzLnNldEZyb21Sb3RhdGlvbk1hdHJpeChOcixlLG4pfXNldEZyb21WZWN0b3IzKHQsZSl7cmV0dXJuIHRoaXMuc2V0KHQueCx0LnksdC56LGV8fHRoaXMuX29yZGVyKX1yZW9yZGVyKHQpe3JldHVybiBEci5zZXRGcm9tRXVsZXIodGhpcyksdGhpcy5zZXRGcm9tUXVhdGVybmlvbihEcix0KX1lcXVhbHModCl7cmV0dXJuIHQuX3g9PT10aGlzLl94JiZ0Ll95PT09dGhpcy5feSYmdC5fej09PXRoaXMuX3omJnQuX29yZGVyPT09dGhpcy5fb3JkZXJ9ZnJvbUFycmF5KHQpe3JldHVybiB0aGlzLl94PXRbMF0sdGhpcy5feT10WzFdLHRoaXMuX3o9dFsyXSx2b2lkIDAhPT10WzNdJiYodGhpcy5fb3JkZXI9dFszXSksdGhpcy5fb25DaGFuZ2VDYWxsYmFjaygpLHRoaXN9dG9BcnJheSh0PVtdLGU9MCl7cmV0dXJuIHRbZV09dGhpcy5feCx0W2UrMV09dGhpcy5feSx0W2UrMl09dGhpcy5feix0W2UrM109dGhpcy5fb3JkZXIsdH10b1ZlY3RvcjModCl7cmV0dXJuIHQ/dC5zZXQodGhpcy5feCx0aGlzLl95LHRoaXMuX3opOm5ldyBLbih0aGlzLl94LHRoaXMuX3ksdGhpcy5feil9X29uQ2hhbmdlKHQpe3JldHVybiB0aGlzLl9vbkNoYW5nZUNhbGxiYWNrPXQsdGhpc31fb25DaGFuZ2VDYWxsYmFjaygpe319T3IuRGVmYXVsdE9yZGVyPVwiWFlaXCIsT3IuUm90YXRpb25PcmRlcnM9W1wiWFlaXCIsXCJZWlhcIixcIlpYWVwiLFwiWFpZXCIsXCJZWFpcIixcIlpZWFwiXTtjb25zdCBOcj1uZXcgVHIsRHI9bmV3IEpuO2NsYXNzIEJye2NvbnN0cnVjdG9yKCl7dGhpcy5tYXNrPTF9c2V0KHQpe3RoaXMubWFzaz0xPDx0fDB9ZW5hYmxlKHQpe3RoaXMubWFza3w9MTw8dHwwfWVuYWJsZUFsbCgpe3RoaXMubWFzaz0tMX10b2dnbGUodCl7dGhpcy5tYXNrXj0xPDx0fDB9ZGlzYWJsZSh0KXt0aGlzLm1hc2smPX4oMTw8dHwwKX1kaXNhYmxlQWxsKCl7dGhpcy5tYXNrPTB9dGVzdCh0KXtyZXR1cm4gMCE9KHRoaXMubWFzayZ0Lm1hc2spfX1sZXQgRnI9MDtjb25zdCBVcj1uZXcgS24senI9bmV3IEpuLEdyPW5ldyBUcixIcj1uZXcgS24sa3I9bmV3IEtuLFZyPW5ldyBLbixqcj1uZXcgSm4sV3I9bmV3IEtuKDEsMCwwKSxYcj1uZXcgS24oMCwxLDApLHFyPW5ldyBLbigwLDAsMSksWXI9e3R5cGU6XCJhZGRlZFwifSxacj17dHlwZTpcInJlbW92ZWRcIn07ZnVuY3Rpb24gSnIoKXtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImlkXCIse3ZhbHVlOkZyKyt9KSx0aGlzLnV1aWQ9em4uZ2VuZXJhdGVVVUlEKCksdGhpcy5uYW1lPVwiXCIsdGhpcy50eXBlPVwiT2JqZWN0M0RcIix0aGlzLnBhcmVudD1udWxsLHRoaXMuY2hpbGRyZW49W10sdGhpcy51cD1Kci5EZWZhdWx0VXAuY2xvbmUoKTtjb25zdCB0PW5ldyBLbixlPW5ldyBPcixuPW5ldyBKbixyPW5ldyBLbigxLDEsMSk7ZS5fb25DaGFuZ2UoKGZ1bmN0aW9uKCl7bi5zZXRGcm9tRXVsZXIoZSwhMSl9KSksbi5fb25DaGFuZ2UoKGZ1bmN0aW9uKCl7ZS5zZXRGcm9tUXVhdGVybmlvbihuLHZvaWQgMCwhMSl9KSksT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcyx7cG9zaXRpb246e2NvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwLHZhbHVlOnR9LHJvdGF0aW9uOntjb25maWd1cmFibGU6ITAsZW51bWVyYWJsZTohMCx2YWx1ZTplfSxxdWF0ZXJuaW9uOntjb25maWd1cmFibGU6ITAsZW51bWVyYWJsZTohMCx2YWx1ZTpufSxzY2FsZTp7Y29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITAsdmFsdWU6cn0sbW9kZWxWaWV3TWF0cml4Ont2YWx1ZTpuZXcgVHJ9LG5vcm1hbE1hdHJpeDp7dmFsdWU6bmV3IEhufX0pLHRoaXMubWF0cml4PW5ldyBUcix0aGlzLm1hdHJpeFdvcmxkPW5ldyBUcix0aGlzLm1hdHJpeEF1dG9VcGRhdGU9SnIuRGVmYXVsdE1hdHJpeEF1dG9VcGRhdGUsdGhpcy5tYXRyaXhXb3JsZE5lZWRzVXBkYXRlPSExLHRoaXMubGF5ZXJzPW5ldyBCcix0aGlzLnZpc2libGU9ITAsdGhpcy5jYXN0U2hhZG93PSExLHRoaXMucmVjZWl2ZVNoYWRvdz0hMSx0aGlzLmZydXN0dW1DdWxsZWQ9ITAsdGhpcy5yZW5kZXJPcmRlcj0wLHRoaXMuYW5pbWF0aW9ucz1bXSx0aGlzLnVzZXJEYXRhPXt9fUpyLkRlZmF1bHRVcD1uZXcgS24oMCwxLDApLEpyLkRlZmF1bHRNYXRyaXhBdXRvVXBkYXRlPSEwLEpyLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoQm4ucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6SnIsaXNPYmplY3QzRDohMCxvbkJlZm9yZVJlbmRlcjpmdW5jdGlvbigpe30sb25BZnRlclJlbmRlcjpmdW5jdGlvbigpe30sYXBwbHlNYXRyaXg0OmZ1bmN0aW9uKHQpe3RoaXMubWF0cml4QXV0b1VwZGF0ZSYmdGhpcy51cGRhdGVNYXRyaXgoKSx0aGlzLm1hdHJpeC5wcmVtdWx0aXBseSh0KSx0aGlzLm1hdHJpeC5kZWNvbXBvc2UodGhpcy5wb3NpdGlvbix0aGlzLnF1YXRlcm5pb24sdGhpcy5zY2FsZSl9LGFwcGx5UXVhdGVybmlvbjpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5xdWF0ZXJuaW9uLnByZW11bHRpcGx5KHQpLHRoaXN9LHNldFJvdGF0aW9uRnJvbUF4aXNBbmdsZTpmdW5jdGlvbih0LGUpe3RoaXMucXVhdGVybmlvbi5zZXRGcm9tQXhpc0FuZ2xlKHQsZSl9LHNldFJvdGF0aW9uRnJvbUV1bGVyOmZ1bmN0aW9uKHQpe3RoaXMucXVhdGVybmlvbi5zZXRGcm9tRXVsZXIodCwhMCl9LHNldFJvdGF0aW9uRnJvbU1hdHJpeDpmdW5jdGlvbih0KXt0aGlzLnF1YXRlcm5pb24uc2V0RnJvbVJvdGF0aW9uTWF0cml4KHQpfSxzZXRSb3RhdGlvbkZyb21RdWF0ZXJuaW9uOmZ1bmN0aW9uKHQpe3RoaXMucXVhdGVybmlvbi5jb3B5KHQpfSxyb3RhdGVPbkF4aXM6ZnVuY3Rpb24odCxlKXtyZXR1cm4genIuc2V0RnJvbUF4aXNBbmdsZSh0LGUpLHRoaXMucXVhdGVybmlvbi5tdWx0aXBseSh6ciksdGhpc30scm90YXRlT25Xb3JsZEF4aXM6ZnVuY3Rpb24odCxlKXtyZXR1cm4genIuc2V0RnJvbUF4aXNBbmdsZSh0LGUpLHRoaXMucXVhdGVybmlvbi5wcmVtdWx0aXBseSh6ciksdGhpc30scm90YXRlWDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5yb3RhdGVPbkF4aXMoV3IsdCl9LHJvdGF0ZVk6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucm90YXRlT25BeGlzKFhyLHQpfSxyb3RhdGVaOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnJvdGF0ZU9uQXhpcyhxcix0KX0sdHJhbnNsYXRlT25BeGlzOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIFVyLmNvcHkodCkuYXBwbHlRdWF0ZXJuaW9uKHRoaXMucXVhdGVybmlvbiksdGhpcy5wb3NpdGlvbi5hZGQoVXIubXVsdGlwbHlTY2FsYXIoZSkpLHRoaXN9LHRyYW5zbGF0ZVg6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMudHJhbnNsYXRlT25BeGlzKFdyLHQpfSx0cmFuc2xhdGVZOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnRyYW5zbGF0ZU9uQXhpcyhYcix0KX0sdHJhbnNsYXRlWjpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy50cmFuc2xhdGVPbkF4aXMocXIsdCl9LGxvY2FsVG9Xb3JsZDpmdW5jdGlvbih0KXtyZXR1cm4gdC5hcHBseU1hdHJpeDQodGhpcy5tYXRyaXhXb3JsZCl9LHdvcmxkVG9Mb2NhbDpmdW5jdGlvbih0KXtyZXR1cm4gdC5hcHBseU1hdHJpeDQoR3IuY29weSh0aGlzLm1hdHJpeFdvcmxkKS5pbnZlcnQoKSl9LGxvb2tBdDpmdW5jdGlvbih0LGUsbil7dC5pc1ZlY3RvcjM/SHIuY29weSh0KTpIci5zZXQodCxlLG4pO2NvbnN0IHI9dGhpcy5wYXJlbnQ7dGhpcy51cGRhdGVXb3JsZE1hdHJpeCghMCwhMSksa3Iuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKHRoaXMubWF0cml4V29ybGQpLHRoaXMuaXNDYW1lcmF8fHRoaXMuaXNMaWdodD9Hci5sb29rQXQoa3IsSHIsdGhpcy51cCk6R3IubG9va0F0KEhyLGtyLHRoaXMudXApLHRoaXMucXVhdGVybmlvbi5zZXRGcm9tUm90YXRpb25NYXRyaXgoR3IpLHImJihHci5leHRyYWN0Um90YXRpb24oci5tYXRyaXhXb3JsZCksenIuc2V0RnJvbVJvdGF0aW9uTWF0cml4KEdyKSx0aGlzLnF1YXRlcm5pb24ucHJlbXVsdGlwbHkoenIuaW52ZXJ0KCkpKX0sYWRkOmZ1bmN0aW9uKHQpe2lmKGFyZ3VtZW50cy5sZW5ndGg+MSl7Zm9yKGxldCB0PTA7dDxhcmd1bWVudHMubGVuZ3RoO3QrKyl0aGlzLmFkZChhcmd1bWVudHNbdF0pO3JldHVybiB0aGlzfXJldHVybiB0PT09dGhpcz8oY29uc29sZS5lcnJvcihcIlRIUkVFLk9iamVjdDNELmFkZDogb2JqZWN0IGNhbid0IGJlIGFkZGVkIGFzIGEgY2hpbGQgb2YgaXRzZWxmLlwiLHQpLHRoaXMpOih0JiZ0LmlzT2JqZWN0M0Q/KG51bGwhPT10LnBhcmVudCYmdC5wYXJlbnQucmVtb3ZlKHQpLHQucGFyZW50PXRoaXMsdGhpcy5jaGlsZHJlbi5wdXNoKHQpLHQuZGlzcGF0Y2hFdmVudChZcikpOmNvbnNvbGUuZXJyb3IoXCJUSFJFRS5PYmplY3QzRC5hZGQ6IG9iamVjdCBub3QgYW4gaW5zdGFuY2Ugb2YgVEhSRUUuT2JqZWN0M0QuXCIsdCksdGhpcyl9LHJlbW92ZTpmdW5jdGlvbih0KXtpZihhcmd1bWVudHMubGVuZ3RoPjEpe2ZvcihsZXQgdD0wO3Q8YXJndW1lbnRzLmxlbmd0aDt0KyspdGhpcy5yZW1vdmUoYXJndW1lbnRzW3RdKTtyZXR1cm4gdGhpc31jb25zdCBlPXRoaXMuY2hpbGRyZW4uaW5kZXhPZih0KTtyZXR1cm4tMSE9PWUmJih0LnBhcmVudD1udWxsLHRoaXMuY2hpbGRyZW4uc3BsaWNlKGUsMSksdC5kaXNwYXRjaEV2ZW50KFpyKSksdGhpc30sY2xlYXI6ZnVuY3Rpb24oKXtmb3IobGV0IHQ9MDt0PHRoaXMuY2hpbGRyZW4ubGVuZ3RoO3QrKyl7Y29uc3QgZT10aGlzLmNoaWxkcmVuW3RdO2UucGFyZW50PW51bGwsZS5kaXNwYXRjaEV2ZW50KFpyKX1yZXR1cm4gdGhpcy5jaGlsZHJlbi5sZW5ndGg9MCx0aGlzfSxhdHRhY2g6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMudXBkYXRlV29ybGRNYXRyaXgoITAsITEpLEdyLmNvcHkodGhpcy5tYXRyaXhXb3JsZCkuaW52ZXJ0KCksbnVsbCE9PXQucGFyZW50JiYodC5wYXJlbnQudXBkYXRlV29ybGRNYXRyaXgoITAsITEpLEdyLm11bHRpcGx5KHQucGFyZW50Lm1hdHJpeFdvcmxkKSksdC5hcHBseU1hdHJpeDQoR3IpLHQudXBkYXRlV29ybGRNYXRyaXgoITEsITEpLHRoaXMuYWRkKHQpLHRoaXN9LGdldE9iamVjdEJ5SWQ6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZ2V0T2JqZWN0QnlQcm9wZXJ0eShcImlkXCIsdCl9LGdldE9iamVjdEJ5TmFtZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5nZXRPYmplY3RCeVByb3BlcnR5KFwibmFtZVwiLHQpfSxnZXRPYmplY3RCeVByb3BlcnR5OmZ1bmN0aW9uKHQsZSl7aWYodGhpc1t0XT09PWUpcmV0dXJuIHRoaXM7Zm9yKGxldCBuPTAscj10aGlzLmNoaWxkcmVuLmxlbmd0aDtuPHI7bisrKXtjb25zdCByPXRoaXMuY2hpbGRyZW5bbl0uZ2V0T2JqZWN0QnlQcm9wZXJ0eSh0LGUpO2lmKHZvaWQgMCE9PXIpcmV0dXJuIHJ9fSxnZXRXb3JsZFBvc2l0aW9uOmZ1bmN0aW9uKHQpe3JldHVybiB2b2lkIDA9PT10JiYoY29uc29sZS53YXJuKFwiVEhSRUUuT2JqZWN0M0Q6IC5nZXRXb3JsZFBvc2l0aW9uKCkgdGFyZ2V0IGlzIG5vdyByZXF1aXJlZFwiKSx0PW5ldyBLbiksdGhpcy51cGRhdGVXb3JsZE1hdHJpeCghMCwhMSksdC5zZXRGcm9tTWF0cml4UG9zaXRpb24odGhpcy5tYXRyaXhXb3JsZCl9LGdldFdvcmxkUXVhdGVybmlvbjpmdW5jdGlvbih0KXtyZXR1cm4gdm9pZCAwPT09dCYmKGNvbnNvbGUud2FybihcIlRIUkVFLk9iamVjdDNEOiAuZ2V0V29ybGRRdWF0ZXJuaW9uKCkgdGFyZ2V0IGlzIG5vdyByZXF1aXJlZFwiKSx0PW5ldyBKbiksdGhpcy51cGRhdGVXb3JsZE1hdHJpeCghMCwhMSksdGhpcy5tYXRyaXhXb3JsZC5kZWNvbXBvc2Uoa3IsdCxWciksdH0sZ2V0V29ybGRTY2FsZTpmdW5jdGlvbih0KXtyZXR1cm4gdm9pZCAwPT09dCYmKGNvbnNvbGUud2FybihcIlRIUkVFLk9iamVjdDNEOiAuZ2V0V29ybGRTY2FsZSgpIHRhcmdldCBpcyBub3cgcmVxdWlyZWRcIiksdD1uZXcgS24pLHRoaXMudXBkYXRlV29ybGRNYXRyaXgoITAsITEpLHRoaXMubWF0cml4V29ybGQuZGVjb21wb3NlKGtyLGpyLHQpLHR9LGdldFdvcmxkRGlyZWN0aW9uOmZ1bmN0aW9uKHQpe3ZvaWQgMD09PXQmJihjb25zb2xlLndhcm4oXCJUSFJFRS5PYmplY3QzRDogLmdldFdvcmxkRGlyZWN0aW9uKCkgdGFyZ2V0IGlzIG5vdyByZXF1aXJlZFwiKSx0PW5ldyBLbiksdGhpcy51cGRhdGVXb3JsZE1hdHJpeCghMCwhMSk7Y29uc3QgZT10aGlzLm1hdHJpeFdvcmxkLmVsZW1lbnRzO3JldHVybiB0LnNldChlWzhdLGVbOV0sZVsxMF0pLm5vcm1hbGl6ZSgpfSxyYXljYXN0OmZ1bmN0aW9uKCl7fSx0cmF2ZXJzZTpmdW5jdGlvbih0KXt0KHRoaXMpO2NvbnN0IGU9dGhpcy5jaGlsZHJlbjtmb3IobGV0IG49MCxyPWUubGVuZ3RoO248cjtuKyspZVtuXS50cmF2ZXJzZSh0KX0sdHJhdmVyc2VWaXNpYmxlOmZ1bmN0aW9uKHQpe2lmKCExPT09dGhpcy52aXNpYmxlKXJldHVybjt0KHRoaXMpO2NvbnN0IGU9dGhpcy5jaGlsZHJlbjtmb3IobGV0IG49MCxyPWUubGVuZ3RoO248cjtuKyspZVtuXS50cmF2ZXJzZVZpc2libGUodCl9LHRyYXZlcnNlQW5jZXN0b3JzOmZ1bmN0aW9uKHQpe2NvbnN0IGU9dGhpcy5wYXJlbnQ7bnVsbCE9PWUmJih0KGUpLGUudHJhdmVyc2VBbmNlc3RvcnModCkpfSx1cGRhdGVNYXRyaXg6ZnVuY3Rpb24oKXt0aGlzLm1hdHJpeC5jb21wb3NlKHRoaXMucG9zaXRpb24sdGhpcy5xdWF0ZXJuaW9uLHRoaXMuc2NhbGUpLHRoaXMubWF0cml4V29ybGROZWVkc1VwZGF0ZT0hMH0sdXBkYXRlTWF0cml4V29ybGQ6ZnVuY3Rpb24odCl7dGhpcy5tYXRyaXhBdXRvVXBkYXRlJiZ0aGlzLnVwZGF0ZU1hdHJpeCgpLCh0aGlzLm1hdHJpeFdvcmxkTmVlZHNVcGRhdGV8fHQpJiYobnVsbD09PXRoaXMucGFyZW50P3RoaXMubWF0cml4V29ybGQuY29weSh0aGlzLm1hdHJpeCk6dGhpcy5tYXRyaXhXb3JsZC5tdWx0aXBseU1hdHJpY2VzKHRoaXMucGFyZW50Lm1hdHJpeFdvcmxkLHRoaXMubWF0cml4KSx0aGlzLm1hdHJpeFdvcmxkTmVlZHNVcGRhdGU9ITEsdD0hMCk7Y29uc3QgZT10aGlzLmNoaWxkcmVuO2ZvcihsZXQgbj0wLHI9ZS5sZW5ndGg7bjxyO24rKyllW25dLnVwZGF0ZU1hdHJpeFdvcmxkKHQpfSx1cGRhdGVXb3JsZE1hdHJpeDpmdW5jdGlvbih0LGUpe2NvbnN0IG49dGhpcy5wYXJlbnQ7aWYoITA9PT10JiZudWxsIT09biYmbi51cGRhdGVXb3JsZE1hdHJpeCghMCwhMSksdGhpcy5tYXRyaXhBdXRvVXBkYXRlJiZ0aGlzLnVwZGF0ZU1hdHJpeCgpLG51bGw9PT10aGlzLnBhcmVudD90aGlzLm1hdHJpeFdvcmxkLmNvcHkodGhpcy5tYXRyaXgpOnRoaXMubWF0cml4V29ybGQubXVsdGlwbHlNYXRyaWNlcyh0aGlzLnBhcmVudC5tYXRyaXhXb3JsZCx0aGlzLm1hdHJpeCksITA9PT1lKXtjb25zdCB0PXRoaXMuY2hpbGRyZW47Zm9yKGxldCBlPTAsbj10Lmxlbmd0aDtlPG47ZSsrKXRbZV0udXBkYXRlV29ybGRNYXRyaXgoITEsITApfX0sdG9KU09OOmZ1bmN0aW9uKHQpe2NvbnN0IGU9dm9pZCAwPT09dHx8XCJzdHJpbmdcIj09dHlwZW9mIHQsbj17fTtlJiYodD17Z2VvbWV0cmllczp7fSxtYXRlcmlhbHM6e30sdGV4dHVyZXM6e30saW1hZ2VzOnt9LHNoYXBlczp7fSxza2VsZXRvbnM6e30sYW5pbWF0aW9uczp7fX0sbi5tZXRhZGF0YT17dmVyc2lvbjo0LjUsdHlwZTpcIk9iamVjdFwiLGdlbmVyYXRvcjpcIk9iamVjdDNELnRvSlNPTlwifSk7Y29uc3Qgcj17fTtmdW5jdGlvbiBpKGUsbil7cmV0dXJuIHZvaWQgMD09PWVbbi51dWlkXSYmKGVbbi51dWlkXT1uLnRvSlNPTih0KSksbi51dWlkfWlmKHIudXVpZD10aGlzLnV1aWQsci50eXBlPXRoaXMudHlwZSxcIlwiIT09dGhpcy5uYW1lJiYoci5uYW1lPXRoaXMubmFtZSksITA9PT10aGlzLmNhc3RTaGFkb3cmJihyLmNhc3RTaGFkb3c9ITApLCEwPT09dGhpcy5yZWNlaXZlU2hhZG93JiYoci5yZWNlaXZlU2hhZG93PSEwKSwhMT09PXRoaXMudmlzaWJsZSYmKHIudmlzaWJsZT0hMSksITE9PT10aGlzLmZydXN0dW1DdWxsZWQmJihyLmZydXN0dW1DdWxsZWQ9ITEpLDAhPT10aGlzLnJlbmRlck9yZGVyJiYoci5yZW5kZXJPcmRlcj10aGlzLnJlbmRlck9yZGVyKSxcInt9XCIhPT1KU09OLnN0cmluZ2lmeSh0aGlzLnVzZXJEYXRhKSYmKHIudXNlckRhdGE9dGhpcy51c2VyRGF0YSksci5sYXllcnM9dGhpcy5sYXllcnMubWFzayxyLm1hdHJpeD10aGlzLm1hdHJpeC50b0FycmF5KCksITE9PT10aGlzLm1hdHJpeEF1dG9VcGRhdGUmJihyLm1hdHJpeEF1dG9VcGRhdGU9ITEpLHRoaXMuaXNJbnN0YW5jZWRNZXNoJiYoci50eXBlPVwiSW5zdGFuY2VkTWVzaFwiLHIuY291bnQ9dGhpcy5jb3VudCxyLmluc3RhbmNlTWF0cml4PXRoaXMuaW5zdGFuY2VNYXRyaXgudG9KU09OKCkpLHRoaXMuaXNNZXNofHx0aGlzLmlzTGluZXx8dGhpcy5pc1BvaW50cyl7ci5nZW9tZXRyeT1pKHQuZ2VvbWV0cmllcyx0aGlzLmdlb21ldHJ5KTtjb25zdCBlPXRoaXMuZ2VvbWV0cnkucGFyYW1ldGVycztpZih2b2lkIDAhPT1lJiZ2b2lkIDAhPT1lLnNoYXBlcyl7Y29uc3Qgbj1lLnNoYXBlcztpZihBcnJheS5pc0FycmF5KG4pKWZvcihsZXQgZT0wLHI9bi5sZW5ndGg7ZTxyO2UrKyl7Y29uc3Qgcj1uW2VdO2kodC5zaGFwZXMscil9ZWxzZSBpKHQuc2hhcGVzLG4pfX1pZih0aGlzLmlzU2tpbm5lZE1lc2gmJihyLmJpbmRNb2RlPXRoaXMuYmluZE1vZGUsci5iaW5kTWF0cml4PXRoaXMuYmluZE1hdHJpeC50b0FycmF5KCksdm9pZCAwIT09dGhpcy5za2VsZXRvbiYmKGkodC5za2VsZXRvbnMsdGhpcy5za2VsZXRvbiksci5za2VsZXRvbj10aGlzLnNrZWxldG9uLnV1aWQpKSx2b2lkIDAhPT10aGlzLm1hdGVyaWFsKWlmKEFycmF5LmlzQXJyYXkodGhpcy5tYXRlcmlhbCkpe2NvbnN0IGU9W107Zm9yKGxldCBuPTAscj10aGlzLm1hdGVyaWFsLmxlbmd0aDtuPHI7bisrKWUucHVzaChpKHQubWF0ZXJpYWxzLHRoaXMubWF0ZXJpYWxbbl0pKTtyLm1hdGVyaWFsPWV9ZWxzZSByLm1hdGVyaWFsPWkodC5tYXRlcmlhbHMsdGhpcy5tYXRlcmlhbCk7aWYodGhpcy5jaGlsZHJlbi5sZW5ndGg+MCl7ci5jaGlsZHJlbj1bXTtmb3IobGV0IGU9MDtlPHRoaXMuY2hpbGRyZW4ubGVuZ3RoO2UrKylyLmNoaWxkcmVuLnB1c2godGhpcy5jaGlsZHJlbltlXS50b0pTT04odCkub2JqZWN0KX1pZih0aGlzLmFuaW1hdGlvbnMubGVuZ3RoPjApe3IuYW5pbWF0aW9ucz1bXTtmb3IobGV0IGU9MDtlPHRoaXMuYW5pbWF0aW9ucy5sZW5ndGg7ZSsrKXtjb25zdCBuPXRoaXMuYW5pbWF0aW9uc1tlXTtyLmFuaW1hdGlvbnMucHVzaChpKHQuYW5pbWF0aW9ucyxuKSl9fWlmKGUpe2NvbnN0IGU9byh0Lmdlb21ldHJpZXMpLHI9byh0Lm1hdGVyaWFscyksaT1vKHQudGV4dHVyZXMpLGE9byh0LmltYWdlcykscz1vKHQuc2hhcGVzKSxjPW8odC5za2VsZXRvbnMpLGw9byh0LmFuaW1hdGlvbnMpO2UubGVuZ3RoPjAmJihuLmdlb21ldHJpZXM9ZSksci5sZW5ndGg+MCYmKG4ubWF0ZXJpYWxzPXIpLGkubGVuZ3RoPjAmJihuLnRleHR1cmVzPWkpLGEubGVuZ3RoPjAmJihuLmltYWdlcz1hKSxzLmxlbmd0aD4wJiYobi5zaGFwZXM9cyksYy5sZW5ndGg+MCYmKG4uc2tlbGV0b25zPWMpLGwubGVuZ3RoPjAmJihuLmFuaW1hdGlvbnM9bCl9cmV0dXJuIG4ub2JqZWN0PXIsbjtmdW5jdGlvbiBvKHQpe2NvbnN0IGU9W107Zm9yKGNvbnN0IG4gaW4gdCl7Y29uc3Qgcj10W25dO2RlbGV0ZSByLm1ldGFkYXRhLGUucHVzaChyKX1yZXR1cm4gZX19LGNsb25lOmZ1bmN0aW9uKHQpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3RvcikuY29weSh0aGlzLHQpfSxjb3B5OmZ1bmN0aW9uKHQsZT0hMCl7aWYodGhpcy5uYW1lPXQubmFtZSx0aGlzLnVwLmNvcHkodC51cCksdGhpcy5wb3NpdGlvbi5jb3B5KHQucG9zaXRpb24pLHRoaXMucm90YXRpb24ub3JkZXI9dC5yb3RhdGlvbi5vcmRlcix0aGlzLnF1YXRlcm5pb24uY29weSh0LnF1YXRlcm5pb24pLHRoaXMuc2NhbGUuY29weSh0LnNjYWxlKSx0aGlzLm1hdHJpeC5jb3B5KHQubWF0cml4KSx0aGlzLm1hdHJpeFdvcmxkLmNvcHkodC5tYXRyaXhXb3JsZCksdGhpcy5tYXRyaXhBdXRvVXBkYXRlPXQubWF0cml4QXV0b1VwZGF0ZSx0aGlzLm1hdHJpeFdvcmxkTmVlZHNVcGRhdGU9dC5tYXRyaXhXb3JsZE5lZWRzVXBkYXRlLHRoaXMubGF5ZXJzLm1hc2s9dC5sYXllcnMubWFzayx0aGlzLnZpc2libGU9dC52aXNpYmxlLHRoaXMuY2FzdFNoYWRvdz10LmNhc3RTaGFkb3csdGhpcy5yZWNlaXZlU2hhZG93PXQucmVjZWl2ZVNoYWRvdyx0aGlzLmZydXN0dW1DdWxsZWQ9dC5mcnVzdHVtQ3VsbGVkLHRoaXMucmVuZGVyT3JkZXI9dC5yZW5kZXJPcmRlcix0aGlzLnVzZXJEYXRhPUpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodC51c2VyRGF0YSkpLCEwPT09ZSlmb3IobGV0IGU9MDtlPHQuY2hpbGRyZW4ubGVuZ3RoO2UrKyl7Y29uc3Qgbj10LmNoaWxkcmVuW2VdO3RoaXMuYWRkKG4uY2xvbmUoKSl9cmV0dXJuIHRoaXN9fSk7Y29uc3QgS3I9bmV3IEtuLFFyPW5ldyBLbiwkcj1uZXcgSG47Y2xhc3MgdGl7Y29uc3RydWN0b3IodCxlKXtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImlzUGxhbmVcIix7dmFsdWU6ITB9KSx0aGlzLm5vcm1hbD12b2lkIDAhPT10P3Q6bmV3IEtuKDEsMCwwKSx0aGlzLmNvbnN0YW50PXZvaWQgMCE9PWU/ZTowfXNldCh0LGUpe3JldHVybiB0aGlzLm5vcm1hbC5jb3B5KHQpLHRoaXMuY29uc3RhbnQ9ZSx0aGlzfXNldENvbXBvbmVudHModCxlLG4scil7cmV0dXJuIHRoaXMubm9ybWFsLnNldCh0LGUsbiksdGhpcy5jb25zdGFudD1yLHRoaXN9c2V0RnJvbU5vcm1hbEFuZENvcGxhbmFyUG9pbnQodCxlKXtyZXR1cm4gdGhpcy5ub3JtYWwuY29weSh0KSx0aGlzLmNvbnN0YW50PS1lLmRvdCh0aGlzLm5vcm1hbCksdGhpc31zZXRGcm9tQ29wbGFuYXJQb2ludHModCxlLG4pe2NvbnN0IHI9S3Iuc3ViVmVjdG9ycyhuLGUpLmNyb3NzKFFyLnN1YlZlY3RvcnModCxlKSkubm9ybWFsaXplKCk7cmV0dXJuIHRoaXMuc2V0RnJvbU5vcm1hbEFuZENvcGxhbmFyUG9pbnQocix0KSx0aGlzfWNsb25lKCl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKS5jb3B5KHRoaXMpfWNvcHkodCl7cmV0dXJuIHRoaXMubm9ybWFsLmNvcHkodC5ub3JtYWwpLHRoaXMuY29uc3RhbnQ9dC5jb25zdGFudCx0aGlzfW5vcm1hbGl6ZSgpe2NvbnN0IHQ9MS90aGlzLm5vcm1hbC5sZW5ndGgoKTtyZXR1cm4gdGhpcy5ub3JtYWwubXVsdGlwbHlTY2FsYXIodCksdGhpcy5jb25zdGFudCo9dCx0aGlzfW5lZ2F0ZSgpe3JldHVybiB0aGlzLmNvbnN0YW50Kj0tMSx0aGlzLm5vcm1hbC5uZWdhdGUoKSx0aGlzfWRpc3RhbmNlVG9Qb2ludCh0KXtyZXR1cm4gdGhpcy5ub3JtYWwuZG90KHQpK3RoaXMuY29uc3RhbnR9ZGlzdGFuY2VUb1NwaGVyZSh0KXtyZXR1cm4gdGhpcy5kaXN0YW5jZVRvUG9pbnQodC5jZW50ZXIpLXQucmFkaXVzfXByb2plY3RQb2ludCh0LGUpe3JldHVybiB2b2lkIDA9PT1lJiYoY29uc29sZS53YXJuKFwiVEhSRUUuUGxhbmU6IC5wcm9qZWN0UG9pbnQoKSB0YXJnZXQgaXMgbm93IHJlcXVpcmVkXCIpLGU9bmV3IEtuKSxlLmNvcHkodGhpcy5ub3JtYWwpLm11bHRpcGx5U2NhbGFyKC10aGlzLmRpc3RhbmNlVG9Qb2ludCh0KSkuYWRkKHQpfWludGVyc2VjdExpbmUodCxlKXt2b2lkIDA9PT1lJiYoY29uc29sZS53YXJuKFwiVEhSRUUuUGxhbmU6IC5pbnRlcnNlY3RMaW5lKCkgdGFyZ2V0IGlzIG5vdyByZXF1aXJlZFwiKSxlPW5ldyBLbik7Y29uc3Qgbj10LmRlbHRhKEtyKSxyPXRoaXMubm9ybWFsLmRvdChuKTtpZigwPT09cilyZXR1cm4gMD09PXRoaXMuZGlzdGFuY2VUb1BvaW50KHQuc3RhcnQpP2UuY29weSh0LnN0YXJ0KTp2b2lkIDA7Y29uc3QgaT0tKHQuc3RhcnQuZG90KHRoaXMubm9ybWFsKSt0aGlzLmNvbnN0YW50KS9yO3JldHVybiBpPDB8fGk+MT92b2lkIDA6ZS5jb3B5KG4pLm11bHRpcGx5U2NhbGFyKGkpLmFkZCh0LnN0YXJ0KX1pbnRlcnNlY3RzTGluZSh0KXtjb25zdCBlPXRoaXMuZGlzdGFuY2VUb1BvaW50KHQuc3RhcnQpLG49dGhpcy5kaXN0YW5jZVRvUG9pbnQodC5lbmQpO3JldHVybiBlPDAmJm4+MHx8bjwwJiZlPjB9aW50ZXJzZWN0c0JveCh0KXtyZXR1cm4gdC5pbnRlcnNlY3RzUGxhbmUodGhpcyl9aW50ZXJzZWN0c1NwaGVyZSh0KXtyZXR1cm4gdC5pbnRlcnNlY3RzUGxhbmUodGhpcyl9Y29wbGFuYXJQb2ludCh0KXtyZXR1cm4gdm9pZCAwPT09dCYmKGNvbnNvbGUud2FybihcIlRIUkVFLlBsYW5lOiAuY29wbGFuYXJQb2ludCgpIHRhcmdldCBpcyBub3cgcmVxdWlyZWRcIiksdD1uZXcgS24pLHQuY29weSh0aGlzLm5vcm1hbCkubXVsdGlwbHlTY2FsYXIoLXRoaXMuY29uc3RhbnQpfWFwcGx5TWF0cml4NCh0LGUpe2NvbnN0IG49ZXx8JHIuZ2V0Tm9ybWFsTWF0cml4KHQpLHI9dGhpcy5jb3BsYW5hclBvaW50KEtyKS5hcHBseU1hdHJpeDQodCksaT10aGlzLm5vcm1hbC5hcHBseU1hdHJpeDMobikubm9ybWFsaXplKCk7cmV0dXJuIHRoaXMuY29uc3RhbnQ9LXIuZG90KGkpLHRoaXN9dHJhbnNsYXRlKHQpe3JldHVybiB0aGlzLmNvbnN0YW50LT10LmRvdCh0aGlzLm5vcm1hbCksdGhpc31lcXVhbHModCl7cmV0dXJuIHQubm9ybWFsLmVxdWFscyh0aGlzLm5vcm1hbCkmJnQuY29uc3RhbnQ9PT10aGlzLmNvbnN0YW50fX1jb25zdCBlaT1uZXcgS24sbmk9bmV3IEtuLHJpPW5ldyBLbixpaT1uZXcgS24sb2k9bmV3IEtuLGFpPW5ldyBLbixzaT1uZXcgS24sY2k9bmV3IEtuLGxpPW5ldyBLbix1aT1uZXcgS247Y2xhc3MgaGl7Y29uc3RydWN0b3IodCxlLG4pe3RoaXMuYT12b2lkIDAhPT10P3Q6bmV3IEtuLHRoaXMuYj12b2lkIDAhPT1lP2U6bmV3IEtuLHRoaXMuYz12b2lkIDAhPT1uP246bmV3IEtufXN0YXRpYyBnZXROb3JtYWwodCxlLG4scil7dm9pZCAwPT09ciYmKGNvbnNvbGUud2FybihcIlRIUkVFLlRyaWFuZ2xlOiAuZ2V0Tm9ybWFsKCkgdGFyZ2V0IGlzIG5vdyByZXF1aXJlZFwiKSxyPW5ldyBLbiksci5zdWJWZWN0b3JzKG4sZSksZWkuc3ViVmVjdG9ycyh0LGUpLHIuY3Jvc3MoZWkpO2NvbnN0IGk9ci5sZW5ndGhTcSgpO3JldHVybiBpPjA/ci5tdWx0aXBseVNjYWxhcigxL01hdGguc3FydChpKSk6ci5zZXQoMCwwLDApfXN0YXRpYyBnZXRCYXJ5Y29vcmQodCxlLG4scixpKXtlaS5zdWJWZWN0b3JzKHIsZSksbmkuc3ViVmVjdG9ycyhuLGUpLHJpLnN1YlZlY3RvcnModCxlKTtjb25zdCBvPWVpLmRvdChlaSksYT1laS5kb3QobmkpLHM9ZWkuZG90KHJpKSxjPW5pLmRvdChuaSksbD1uaS5kb3QocmkpLHU9bypjLWEqYTtpZih2b2lkIDA9PT1pJiYoY29uc29sZS53YXJuKFwiVEhSRUUuVHJpYW5nbGU6IC5nZXRCYXJ5Y29vcmQoKSB0YXJnZXQgaXMgbm93IHJlcXVpcmVkXCIpLGk9bmV3IEtuKSwwPT09dSlyZXR1cm4gaS5zZXQoLTIsLTEsLTEpO2NvbnN0IGg9MS91LGQ9KGMqcy1hKmwpKmgscD0obypsLWEqcykqaDtyZXR1cm4gaS5zZXQoMS1kLXAscCxkKX1zdGF0aWMgY29udGFpbnNQb2ludCh0LGUsbixyKXtyZXR1cm4gdGhpcy5nZXRCYXJ5Y29vcmQodCxlLG4scixpaSksaWkueD49MCYmaWkueT49MCYmaWkueCtpaS55PD0xfXN0YXRpYyBnZXRVVih0LGUsbixyLGksbyxhLHMpe3JldHVybiB0aGlzLmdldEJhcnljb29yZCh0LGUsbixyLGlpKSxzLnNldCgwLDApLHMuYWRkU2NhbGVkVmVjdG9yKGksaWkueCkscy5hZGRTY2FsZWRWZWN0b3IobyxpaS55KSxzLmFkZFNjYWxlZFZlY3RvcihhLGlpLnopLHN9c3RhdGljIGlzRnJvbnRGYWNpbmcodCxlLG4scil7cmV0dXJuIGVpLnN1YlZlY3RvcnMobixlKSxuaS5zdWJWZWN0b3JzKHQsZSksZWkuY3Jvc3MobmkpLmRvdChyKTwwfXNldCh0LGUsbil7cmV0dXJuIHRoaXMuYS5jb3B5KHQpLHRoaXMuYi5jb3B5KGUpLHRoaXMuYy5jb3B5KG4pLHRoaXN9c2V0RnJvbVBvaW50c0FuZEluZGljZXModCxlLG4scil7cmV0dXJuIHRoaXMuYS5jb3B5KHRbZV0pLHRoaXMuYi5jb3B5KHRbbl0pLHRoaXMuYy5jb3B5KHRbcl0pLHRoaXN9Y2xvbmUoKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyl9Y29weSh0KXtyZXR1cm4gdGhpcy5hLmNvcHkodC5hKSx0aGlzLmIuY29weSh0LmIpLHRoaXMuYy5jb3B5KHQuYyksdGhpc31nZXRBcmVhKCl7cmV0dXJuIGVpLnN1YlZlY3RvcnModGhpcy5jLHRoaXMuYiksbmkuc3ViVmVjdG9ycyh0aGlzLmEsdGhpcy5iKSwuNSplaS5jcm9zcyhuaSkubGVuZ3RoKCl9Z2V0TWlkcG9pbnQodCl7cmV0dXJuIHZvaWQgMD09PXQmJihjb25zb2xlLndhcm4oXCJUSFJFRS5UcmlhbmdsZTogLmdldE1pZHBvaW50KCkgdGFyZ2V0IGlzIG5vdyByZXF1aXJlZFwiKSx0PW5ldyBLbiksdC5hZGRWZWN0b3JzKHRoaXMuYSx0aGlzLmIpLmFkZCh0aGlzLmMpLm11bHRpcGx5U2NhbGFyKDEvMyl9Z2V0Tm9ybWFsKHQpe3JldHVybiBoaS5nZXROb3JtYWwodGhpcy5hLHRoaXMuYix0aGlzLmMsdCl9Z2V0UGxhbmUodCl7cmV0dXJuIHZvaWQgMD09PXQmJihjb25zb2xlLndhcm4oXCJUSFJFRS5UcmlhbmdsZTogLmdldFBsYW5lKCkgdGFyZ2V0IGlzIG5vdyByZXF1aXJlZFwiKSx0PW5ldyB0aSksdC5zZXRGcm9tQ29wbGFuYXJQb2ludHModGhpcy5hLHRoaXMuYix0aGlzLmMpfWdldEJhcnljb29yZCh0LGUpe3JldHVybiBoaS5nZXRCYXJ5Y29vcmQodCx0aGlzLmEsdGhpcy5iLHRoaXMuYyxlKX1nZXRVVih0LGUsbixyLGkpe3JldHVybiBoaS5nZXRVVih0LHRoaXMuYSx0aGlzLmIsdGhpcy5jLGUsbixyLGkpfWNvbnRhaW5zUG9pbnQodCl7cmV0dXJuIGhpLmNvbnRhaW5zUG9pbnQodCx0aGlzLmEsdGhpcy5iLHRoaXMuYyl9aXNGcm9udEZhY2luZyh0KXtyZXR1cm4gaGkuaXNGcm9udEZhY2luZyh0aGlzLmEsdGhpcy5iLHRoaXMuYyx0KX1pbnRlcnNlY3RzQm94KHQpe3JldHVybiB0LmludGVyc2VjdHNUcmlhbmdsZSh0aGlzKX1jbG9zZXN0UG9pbnRUb1BvaW50KHQsZSl7dm9pZCAwPT09ZSYmKGNvbnNvbGUud2FybihcIlRIUkVFLlRyaWFuZ2xlOiAuY2xvc2VzdFBvaW50VG9Qb2ludCgpIHRhcmdldCBpcyBub3cgcmVxdWlyZWRcIiksZT1uZXcgS24pO2NvbnN0IG49dGhpcy5hLHI9dGhpcy5iLGk9dGhpcy5jO2xldCBvLGE7b2kuc3ViVmVjdG9ycyhyLG4pLGFpLnN1YlZlY3RvcnMoaSxuKSxjaS5zdWJWZWN0b3JzKHQsbik7Y29uc3Qgcz1vaS5kb3QoY2kpLGM9YWkuZG90KGNpKTtpZihzPD0wJiZjPD0wKXJldHVybiBlLmNvcHkobik7bGkuc3ViVmVjdG9ycyh0LHIpO2NvbnN0IGw9b2kuZG90KGxpKSx1PWFpLmRvdChsaSk7aWYobD49MCYmdTw9bClyZXR1cm4gZS5jb3B5KHIpO2NvbnN0IGg9cyp1LWwqYztpZihoPD0wJiZzPj0wJiZsPD0wKXJldHVybiBvPXMvKHMtbCksZS5jb3B5KG4pLmFkZFNjYWxlZFZlY3RvcihvaSxvKTt1aS5zdWJWZWN0b3JzKHQsaSk7Y29uc3QgZD1vaS5kb3QodWkpLHA9YWkuZG90KHVpKTtpZihwPj0wJiZkPD1wKXJldHVybiBlLmNvcHkoaSk7Y29uc3QgZj1kKmMtcypwO2lmKGY8PTAmJmM+PTAmJnA8PTApcmV0dXJuIGE9Yy8oYy1wKSxlLmNvcHkobikuYWRkU2NhbGVkVmVjdG9yKGFpLGEpO2NvbnN0IG09bCpwLWQqdTtpZihtPD0wJiZ1LWw+PTAmJmQtcD49MClyZXR1cm4gc2kuc3ViVmVjdG9ycyhpLHIpLGE9KHUtbCkvKHUtbCsoZC1wKSksZS5jb3B5KHIpLmFkZFNjYWxlZFZlY3RvcihzaSxhKTtjb25zdCBnPTEvKG0rZitoKTtyZXR1cm4gbz1mKmcsYT1oKmcsZS5jb3B5KG4pLmFkZFNjYWxlZFZlY3RvcihvaSxvKS5hZGRTY2FsZWRWZWN0b3IoYWksYSl9ZXF1YWxzKHQpe3JldHVybiB0LmEuZXF1YWxzKHRoaXMuYSkmJnQuYi5lcXVhbHModGhpcy5iKSYmdC5jLmVxdWFscyh0aGlzLmMpfX1jb25zdCBkaT17YWxpY2VibHVlOjE1NzkyMzgzLGFudGlxdWV3aGl0ZToxNjQ0NDM3NSxhcXVhOjY1NTM1LGFxdWFtYXJpbmU6ODM4ODU2NCxhenVyZToxNTc5NDE3NSxiZWlnZToxNjExOTI2MCxiaXNxdWU6MTY3NzAyNDQsYmxhY2s6MCxibGFuY2hlZGFsbW9uZDoxNjc3MjA0NSxibHVlOjI1NSxibHVldmlvbGV0OjkwNTUyMDIsYnJvd246MTA4MjQyMzQsYnVybHl3b29kOjE0NTk2MjMxLGNhZGV0Ymx1ZTo2MjY2NTI4LGNoYXJ0cmV1c2U6ODM4ODM1MixjaG9jb2xhdGU6MTM3ODk0NzAsY29yYWw6MTY3NDQyNzIsY29ybmZsb3dlcmJsdWU6NjU5MTk4MSxjb3Juc2lsazoxNjc3NTM4OCxjcmltc29uOjE0NDIzMTAwLGN5YW46NjU1MzUsZGFya2JsdWU6MTM5LGRhcmtjeWFuOjM1NzIzLGRhcmtnb2xkZW5yb2Q6MTIwOTI5MzksZGFya2dyYXk6MTExMTkwMTcsZGFya2dyZWVuOjI1NjAwLGRhcmtncmV5OjExMTE5MDE3LGRhcmtraGFraToxMjQzMzI1OSxkYXJrbWFnZW50YTo5MTA5NjQzLGRhcmtvbGl2ZWdyZWVuOjU1OTc5OTksZGFya29yYW5nZToxNjc0NzUyMCxkYXJrb3JjaGlkOjEwMDQwMDEyLGRhcmtyZWQ6OTEwOTUwNCxkYXJrc2FsbW9uOjE1MzA4NDEwLGRhcmtzZWFncmVlbjo5NDE5OTE5LGRhcmtzbGF0ZWJsdWU6NDczNDM0NyxkYXJrc2xhdGVncmF5OjMxMDA0OTUsZGFya3NsYXRlZ3JleTozMTAwNDk1LGRhcmt0dXJxdW9pc2U6NTI5NDUsZGFya3Zpb2xldDo5Njk5NTM5LGRlZXBwaW5rOjE2NzE2OTQ3LGRlZXBza3libHVlOjQ5MTUxLGRpbWdyYXk6NjkwODI2NSxkaW1ncmV5OjY5MDgyNjUsZG9kZ2VyYmx1ZToyMDAzMTk5LGZpcmVicmljazoxMTY3NDE0NixmbG9yYWx3aGl0ZToxNjc3NTkyMCxmb3Jlc3RncmVlbjoyMjYzODQyLGZ1Y2hzaWE6MTY3MTE5MzUsZ2FpbnNib3JvOjE0NDc0NDYwLGdob3N0d2hpdGU6MTYzMTY2NzEsZ29sZDoxNjc2NjcyMCxnb2xkZW5yb2Q6MTQzMjkxMjAsZ3JheTo4NDIxNTA0LGdyZWVuOjMyNzY4LGdyZWVueWVsbG93OjExNDAzMDU1LGdyZXk6ODQyMTUwNCxob25leWRldzoxNTc5NDE2MCxob3RwaW5rOjE2NzM4NzQwLGluZGlhbnJlZDoxMzQ1ODUyNCxpbmRpZ286NDkxNTMzMCxpdm9yeToxNjc3NzIwMCxraGFraToxNTc4NzY2MCxsYXZlbmRlcjoxNTEzMjQxMCxsYXZlbmRlcmJsdXNoOjE2NzczMzY1LGxhd25ncmVlbjo4MTkwOTc2LGxlbW9uY2hpZmZvbjoxNjc3NTg4NSxsaWdodGJsdWU6MTEzOTMyNTQsbGlnaHRjb3JhbDoxNTc2MTUzNixsaWdodGN5YW46MTQ3NDU1OTksbGlnaHRnb2xkZW5yb2R5ZWxsb3c6MTY0NDgyMTAsbGlnaHRncmF5OjEzODgyMzIzLGxpZ2h0Z3JlZW46OTQ5ODI1NixsaWdodGdyZXk6MTM4ODIzMjMsbGlnaHRwaW5rOjE2NzU4NDY1LGxpZ2h0c2FsbW9uOjE2NzUyNzYyLGxpZ2h0c2VhZ3JlZW46MjE0Mjg5MCxsaWdodHNreWJsdWU6ODkwMDM0NixsaWdodHNsYXRlZ3JheTo3ODMzNzUzLGxpZ2h0c2xhdGVncmV5Ojc4MzM3NTMsbGlnaHRzdGVlbGJsdWU6MTE1ODQ3MzQsbGlnaHR5ZWxsb3c6MTY3NzcxODQsbGltZTo2NTI4MCxsaW1lZ3JlZW46MzMyOTMzMCxsaW5lbjoxNjQ0NTY3MCxtYWdlbnRhOjE2NzExOTM1LG1hcm9vbjo4Mzg4NjA4LG1lZGl1bWFxdWFtYXJpbmU6NjczNzMyMixtZWRpdW1ibHVlOjIwNSxtZWRpdW1vcmNoaWQ6MTIyMTE2NjcsbWVkaXVtcHVycGxlOjk2NjI2ODMsbWVkaXVtc2VhZ3JlZW46Mzk3ODA5NyxtZWRpdW1zbGF0ZWJsdWU6ODA4Nzc5MCxtZWRpdW1zcHJpbmdncmVlbjo2NDE1NCxtZWRpdW10dXJxdW9pc2U6NDc3MjMwMCxtZWRpdW12aW9sZXRyZWQ6MTMwNDcxNzMsbWlkbmlnaHRibHVlOjE2NDQ5MTIsbWludGNyZWFtOjE2MTIxODUwLG1pc3R5cm9zZToxNjc3MDI3Myxtb2NjYXNpbjoxNjc3MDIyOSxuYXZham93aGl0ZToxNjc2ODY4NSxuYXZ5OjEyOCxvbGRsYWNlOjE2NjQzNTU4LG9saXZlOjg0MjEzNzYsb2xpdmVkcmFiOjcwNDg3Mzksb3JhbmdlOjE2NzUzOTIwLG9yYW5nZXJlZDoxNjcyOTM0NCxvcmNoaWQ6MTQzMTU3MzQscGFsZWdvbGRlbnJvZDoxNTY1NzEzMCxwYWxlZ3JlZW46MTAwMjU4ODAscGFsZXR1cnF1b2lzZToxMTUyOTk2NixwYWxldmlvbGV0cmVkOjE0MzgxMjAzLHBhcGF5YXdoaXA6MTY3NzMwNzcscGVhY2hwdWZmOjE2NzY3NjczLHBlcnU6MTM0Njg5OTEscGluazoxNjc2MTAzNSxwbHVtOjE0NTI0NjM3LHBvd2RlcmJsdWU6MTE1OTE5MTAscHVycGxlOjgzODg3MzYscmViZWNjYXB1cnBsZTo2Njk3ODgxLHJlZDoxNjcxMTY4MCxyb3N5YnJvd246MTIzNTc1MTkscm95YWxibHVlOjQyODY5NDUsc2FkZGxlYnJvd246OTEyNzE4NyxzYWxtb246MTY0MTY4ODIsc2FuZHlicm93bjoxNjAzMjg2NCxzZWFncmVlbjozMDUwMzI3LHNlYXNoZWxsOjE2Nzc0NjM4LHNpZW5uYToxMDUwNjc5NyxzaWx2ZXI6MTI2MzIyNTYsc2t5Ymx1ZTo4OTAwMzMxLHNsYXRlYmx1ZTo2OTcwMDYxLHNsYXRlZ3JheTo3MzcyOTQ0LHNsYXRlZ3JleTo3MzcyOTQ0LHNub3c6MTY3NzU5MzAsc3ByaW5nZ3JlZW46NjU0MDcsc3RlZWxibHVlOjQ2MjA5ODAsdGFuOjEzODA4NzgwLHRlYWw6MzI4OTYsdGhpc3RsZToxNDIwNDg4OCx0b21hdG86MTY3MzcwOTUsdHVycXVvaXNlOjQyNTE4NTYsdmlvbGV0OjE1NjMxMDg2LHdoZWF0OjE2MTEzMzMxLHdoaXRlOjE2Nzc3MjE1LHdoaXRlc21va2U6MTYxMTkyODUseWVsbG93OjE2Nzc2OTYwLHllbGxvd2dyZWVuOjEwMTQ1MDc0fSxwaT17aDowLHM6MCxsOjB9LGZpPXtoOjAsczowLGw6MH07ZnVuY3Rpb24gbWkodCxlLG4pe3JldHVybiBuPDAmJihuKz0xKSxuPjEmJihuLT0xKSxuPDEvNj90KzYqKGUtdCkqbjpuPC41P2U6bjwyLzM/dCs2KihlLXQpKigyLzMtbik6dH1mdW5jdGlvbiBnaSh0KXtyZXR1cm4gdDwuMDQwNDU/LjA3NzM5OTM4MDgqdDpNYXRoLnBvdyguOTQ3ODY3Mjk4Nip0Ky4wNTIxMzI3MDE0LDIuNCl9ZnVuY3Rpb24gdmkodCl7cmV0dXJuIHQ8LjAwMzEzMDg/MTIuOTIqdDoxLjA1NSpNYXRoLnBvdyh0LC40MTY2NiktLjA1NX1jbGFzcyB5aXtjb25zdHJ1Y3Rvcih0LGUsbil7cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiaXNDb2xvclwiLHt2YWx1ZTohMH0pLHZvaWQgMD09PWUmJnZvaWQgMD09PW4/dGhpcy5zZXQodCk6dGhpcy5zZXRSR0IodCxlLG4pfXNldCh0KXtyZXR1cm4gdCYmdC5pc0NvbG9yP3RoaXMuY29weSh0KTpcIm51bWJlclwiPT10eXBlb2YgdD90aGlzLnNldEhleCh0KTpcInN0cmluZ1wiPT10eXBlb2YgdCYmdGhpcy5zZXRTdHlsZSh0KSx0aGlzfXNldFNjYWxhcih0KXtyZXR1cm4gdGhpcy5yPXQsdGhpcy5nPXQsdGhpcy5iPXQsdGhpc31zZXRIZXgodCl7cmV0dXJuIHQ9TWF0aC5mbG9vcih0KSx0aGlzLnI9KHQ+PjE2JjI1NSkvMjU1LHRoaXMuZz0odD4+OCYyNTUpLzI1NSx0aGlzLmI9KDI1NSZ0KS8yNTUsdGhpc31zZXRSR0IodCxlLG4pe3JldHVybiB0aGlzLnI9dCx0aGlzLmc9ZSx0aGlzLmI9bix0aGlzfXNldEhTTCh0LGUsbil7aWYodD16bi5ldWNsaWRlYW5Nb2R1bG8odCwxKSxlPXpuLmNsYW1wKGUsMCwxKSxuPXpuLmNsYW1wKG4sMCwxKSwwPT09ZSl0aGlzLnI9dGhpcy5nPXRoaXMuYj1uO2Vsc2V7Y29uc3Qgcj1uPD0uNT9uKigxK2UpOm4rZS1uKmUsaT0yKm4tcjt0aGlzLnI9bWkoaSxyLHQrMS8zKSx0aGlzLmc9bWkoaSxyLHQpLHRoaXMuYj1taShpLHIsdC0xLzMpfXJldHVybiB0aGlzfXNldFN0eWxlKHQpe2Z1bmN0aW9uIGUoZSl7dm9pZCAwIT09ZSYmcGFyc2VGbG9hdChlKTwxJiZjb25zb2xlLndhcm4oXCJUSFJFRS5Db2xvcjogQWxwaGEgY29tcG9uZW50IG9mIFwiK3QrXCIgd2lsbCBiZSBpZ25vcmVkLlwiKX1sZXQgbjtpZihuPS9eKCg/OnJnYnxoc2wpYT8pXFwoXFxzKihbXlxcKV0qKVxcKS8uZXhlYyh0KSl7bGV0IHQ7Y29uc3Qgcj1uWzFdLGk9blsyXTtzd2l0Y2gocil7Y2FzZVwicmdiXCI6Y2FzZVwicmdiYVwiOmlmKHQ9L14oXFxkKylcXHMqLFxccyooXFxkKylcXHMqLFxccyooXFxkKylcXHMqKCxcXHMqKFswLTldKlxcLj9bMC05XSspXFxzKik/JC8uZXhlYyhpKSlyZXR1cm4gdGhpcy5yPU1hdGgubWluKDI1NSxwYXJzZUludCh0WzFdLDEwKSkvMjU1LHRoaXMuZz1NYXRoLm1pbigyNTUscGFyc2VJbnQodFsyXSwxMCkpLzI1NSx0aGlzLmI9TWF0aC5taW4oMjU1LHBhcnNlSW50KHRbM10sMTApKS8yNTUsZSh0WzVdKSx0aGlzO2lmKHQ9L14oXFxkKylcXCVcXHMqLFxccyooXFxkKylcXCVcXHMqLFxccyooXFxkKylcXCVcXHMqKCxcXHMqKFswLTldKlxcLj9bMC05XSspXFxzKik/JC8uZXhlYyhpKSlyZXR1cm4gdGhpcy5yPU1hdGgubWluKDEwMCxwYXJzZUludCh0WzFdLDEwKSkvMTAwLHRoaXMuZz1NYXRoLm1pbigxMDAscGFyc2VJbnQodFsyXSwxMCkpLzEwMCx0aGlzLmI9TWF0aC5taW4oMTAwLHBhcnNlSW50KHRbM10sMTApKS8xMDAsZSh0WzVdKSx0aGlzO2JyZWFrO2Nhc2VcImhzbFwiOmNhc2VcImhzbGFcIjppZih0PS9eKFswLTldKlxcLj9bMC05XSspXFxzKixcXHMqKFxcZCspXFwlXFxzKixcXHMqKFxcZCspXFwlXFxzKigsXFxzKihbMC05XSpcXC4/WzAtOV0rKVxccyopPyQvLmV4ZWMoaSkpe2NvbnN0IG49cGFyc2VGbG9hdCh0WzFdKS8zNjAscj1wYXJzZUludCh0WzJdLDEwKS8xMDAsaT1wYXJzZUludCh0WzNdLDEwKS8xMDA7cmV0dXJuIGUodFs1XSksdGhpcy5zZXRIU0wobixyLGkpfX19ZWxzZSBpZihuPS9eXFwjKFtBLUZhLWYwLTldKykkLy5leGVjKHQpKXtjb25zdCB0PW5bMV0sZT10Lmxlbmd0aDtpZigzPT09ZSlyZXR1cm4gdGhpcy5yPXBhcnNlSW50KHQuY2hhckF0KDApK3QuY2hhckF0KDApLDE2KS8yNTUsdGhpcy5nPXBhcnNlSW50KHQuY2hhckF0KDEpK3QuY2hhckF0KDEpLDE2KS8yNTUsdGhpcy5iPXBhcnNlSW50KHQuY2hhckF0KDIpK3QuY2hhckF0KDIpLDE2KS8yNTUsdGhpcztpZig2PT09ZSlyZXR1cm4gdGhpcy5yPXBhcnNlSW50KHQuY2hhckF0KDApK3QuY2hhckF0KDEpLDE2KS8yNTUsdGhpcy5nPXBhcnNlSW50KHQuY2hhckF0KDIpK3QuY2hhckF0KDMpLDE2KS8yNTUsdGhpcy5iPXBhcnNlSW50KHQuY2hhckF0KDQpK3QuY2hhckF0KDUpLDE2KS8yNTUsdGhpc31yZXR1cm4gdCYmdC5sZW5ndGg+MD90aGlzLnNldENvbG9yTmFtZSh0KTp0aGlzfXNldENvbG9yTmFtZSh0KXtjb25zdCBlPWRpW3RdO3JldHVybiB2b2lkIDAhPT1lP3RoaXMuc2V0SGV4KGUpOmNvbnNvbGUud2FybihcIlRIUkVFLkNvbG9yOiBVbmtub3duIGNvbG9yIFwiK3QpLHRoaXN9Y2xvbmUoKXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy5yLHRoaXMuZyx0aGlzLmIpfWNvcHkodCl7cmV0dXJuIHRoaXMucj10LnIsdGhpcy5nPXQuZyx0aGlzLmI9dC5iLHRoaXN9Y29weUdhbW1hVG9MaW5lYXIodCxlPTIpe3JldHVybiB0aGlzLnI9TWF0aC5wb3codC5yLGUpLHRoaXMuZz1NYXRoLnBvdyh0LmcsZSksdGhpcy5iPU1hdGgucG93KHQuYixlKSx0aGlzfWNvcHlMaW5lYXJUb0dhbW1hKHQsZT0yKXtjb25zdCBuPWU+MD8xL2U6MTtyZXR1cm4gdGhpcy5yPU1hdGgucG93KHQucixuKSx0aGlzLmc9TWF0aC5wb3codC5nLG4pLHRoaXMuYj1NYXRoLnBvdyh0LmIsbiksdGhpc31jb252ZXJ0R2FtbWFUb0xpbmVhcih0KXtyZXR1cm4gdGhpcy5jb3B5R2FtbWFUb0xpbmVhcih0aGlzLHQpLHRoaXN9Y29udmVydExpbmVhclRvR2FtbWEodCl7cmV0dXJuIHRoaXMuY29weUxpbmVhclRvR2FtbWEodGhpcyx0KSx0aGlzfWNvcHlTUkdCVG9MaW5lYXIodCl7cmV0dXJuIHRoaXMucj1naSh0LnIpLHRoaXMuZz1naSh0LmcpLHRoaXMuYj1naSh0LmIpLHRoaXN9Y29weUxpbmVhclRvU1JHQih0KXtyZXR1cm4gdGhpcy5yPXZpKHQuciksdGhpcy5nPXZpKHQuZyksdGhpcy5iPXZpKHQuYiksdGhpc31jb252ZXJ0U1JHQlRvTGluZWFyKCl7cmV0dXJuIHRoaXMuY29weVNSR0JUb0xpbmVhcih0aGlzKSx0aGlzfWNvbnZlcnRMaW5lYXJUb1NSR0IoKXtyZXR1cm4gdGhpcy5jb3B5TGluZWFyVG9TUkdCKHRoaXMpLHRoaXN9Z2V0SGV4KCl7cmV0dXJuIDI1NSp0aGlzLnI8PDE2XjI1NSp0aGlzLmc8PDheMjU1KnRoaXMuYjw8MH1nZXRIZXhTdHJpbmcoKXtyZXR1cm4oXCIwMDAwMDBcIit0aGlzLmdldEhleCgpLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTYpfWdldEhTTCh0KXt2b2lkIDA9PT10JiYoY29uc29sZS53YXJuKFwiVEhSRUUuQ29sb3I6IC5nZXRIU0woKSB0YXJnZXQgaXMgbm93IHJlcXVpcmVkXCIpLHQ9e2g6MCxzOjAsbDowfSk7Y29uc3QgZT10aGlzLnIsbj10aGlzLmcscj10aGlzLmIsaT1NYXRoLm1heChlLG4sciksbz1NYXRoLm1pbihlLG4scik7bGV0IGEscztjb25zdCBjPShvK2kpLzI7aWYobz09PWkpYT0wLHM9MDtlbHNle2NvbnN0IHQ9aS1vO3N3aXRjaChzPWM8PS41P3QvKGkrbyk6dC8oMi1pLW8pLGkpe2Nhc2UgZTphPShuLXIpL3QrKG48cj82OjApO2JyZWFrO2Nhc2UgbjphPShyLWUpL3QrMjticmVhaztjYXNlIHI6YT0oZS1uKS90KzR9YS89Nn1yZXR1cm4gdC5oPWEsdC5zPXMsdC5sPWMsdH1nZXRTdHlsZSgpe3JldHVyblwicmdiKFwiKygyNTUqdGhpcy5yfDApK1wiLFwiKygyNTUqdGhpcy5nfDApK1wiLFwiKygyNTUqdGhpcy5ifDApK1wiKVwifW9mZnNldEhTTCh0LGUsbil7cmV0dXJuIHRoaXMuZ2V0SFNMKHBpKSxwaS5oKz10LHBpLnMrPWUscGkubCs9bix0aGlzLnNldEhTTChwaS5oLHBpLnMscGkubCksdGhpc31hZGQodCl7cmV0dXJuIHRoaXMucis9dC5yLHRoaXMuZys9dC5nLHRoaXMuYis9dC5iLHRoaXN9YWRkQ29sb3JzKHQsZSl7cmV0dXJuIHRoaXMucj10LnIrZS5yLHRoaXMuZz10LmcrZS5nLHRoaXMuYj10LmIrZS5iLHRoaXN9YWRkU2NhbGFyKHQpe3JldHVybiB0aGlzLnIrPXQsdGhpcy5nKz10LHRoaXMuYis9dCx0aGlzfXN1Yih0KXtyZXR1cm4gdGhpcy5yPU1hdGgubWF4KDAsdGhpcy5yLXQuciksdGhpcy5nPU1hdGgubWF4KDAsdGhpcy5nLXQuZyksdGhpcy5iPU1hdGgubWF4KDAsdGhpcy5iLXQuYiksdGhpc31tdWx0aXBseSh0KXtyZXR1cm4gdGhpcy5yKj10LnIsdGhpcy5nKj10LmcsdGhpcy5iKj10LmIsdGhpc31tdWx0aXBseVNjYWxhcih0KXtyZXR1cm4gdGhpcy5yKj10LHRoaXMuZyo9dCx0aGlzLmIqPXQsdGhpc31sZXJwKHQsZSl7cmV0dXJuIHRoaXMucis9KHQuci10aGlzLnIpKmUsdGhpcy5nKz0odC5nLXRoaXMuZykqZSx0aGlzLmIrPSh0LmItdGhpcy5iKSplLHRoaXN9bGVycEhTTCh0LGUpe3RoaXMuZ2V0SFNMKHBpKSx0LmdldEhTTChmaSk7Y29uc3Qgbj16bi5sZXJwKHBpLmgsZmkuaCxlKSxyPXpuLmxlcnAocGkucyxmaS5zLGUpLGk9em4ubGVycChwaS5sLGZpLmwsZSk7cmV0dXJuIHRoaXMuc2V0SFNMKG4scixpKSx0aGlzfWVxdWFscyh0KXtyZXR1cm4gdC5yPT09dGhpcy5yJiZ0Lmc9PT10aGlzLmcmJnQuYj09PXRoaXMuYn1mcm9tQXJyYXkodCxlPTApe3JldHVybiB0aGlzLnI9dFtlXSx0aGlzLmc9dFtlKzFdLHRoaXMuYj10W2UrMl0sdGhpc310b0FycmF5KHQ9W10sZT0wKXtyZXR1cm4gdFtlXT10aGlzLnIsdFtlKzFdPXRoaXMuZyx0W2UrMl09dGhpcy5iLHR9ZnJvbUJ1ZmZlckF0dHJpYnV0ZSh0LGUpe3JldHVybiB0aGlzLnI9dC5nZXRYKGUpLHRoaXMuZz10LmdldFkoZSksdGhpcy5iPXQuZ2V0WihlKSwhMD09PXQubm9ybWFsaXplZCYmKHRoaXMuci89MjU1LHRoaXMuZy89MjU1LHRoaXMuYi89MjU1KSx0aGlzfXRvSlNPTigpe3JldHVybiB0aGlzLmdldEhleCgpfX15aS5OQU1FUz1kaSx5aS5wcm90b3R5cGUucj0xLHlpLnByb3RvdHlwZS5nPTEseWkucHJvdG90eXBlLmI9MTtjbGFzcyB4aXtjb25zdHJ1Y3Rvcih0LGUsbixyLGksbz0wKXt0aGlzLmE9dCx0aGlzLmI9ZSx0aGlzLmM9bix0aGlzLm5vcm1hbD1yJiZyLmlzVmVjdG9yMz9yOm5ldyBLbix0aGlzLnZlcnRleE5vcm1hbHM9QXJyYXkuaXNBcnJheShyKT9yOltdLHRoaXMuY29sb3I9aSYmaS5pc0NvbG9yP2k6bmV3IHlpLHRoaXMudmVydGV4Q29sb3JzPUFycmF5LmlzQXJyYXkoaSk/aTpbXSx0aGlzLm1hdGVyaWFsSW5kZXg9b31jbG9uZSgpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3RvcikuY29weSh0aGlzKX1jb3B5KHQpe3RoaXMuYT10LmEsdGhpcy5iPXQuYix0aGlzLmM9dC5jLHRoaXMubm9ybWFsLmNvcHkodC5ub3JtYWwpLHRoaXMuY29sb3IuY29weSh0LmNvbG9yKSx0aGlzLm1hdGVyaWFsSW5kZXg9dC5tYXRlcmlhbEluZGV4O2ZvcihsZXQgZT0wLG49dC52ZXJ0ZXhOb3JtYWxzLmxlbmd0aDtlPG47ZSsrKXRoaXMudmVydGV4Tm9ybWFsc1tlXT10LnZlcnRleE5vcm1hbHNbZV0uY2xvbmUoKTtmb3IobGV0IGU9MCxuPXQudmVydGV4Q29sb3JzLmxlbmd0aDtlPG47ZSsrKXRoaXMudmVydGV4Q29sb3JzW2VdPXQudmVydGV4Q29sb3JzW2VdLmNsb25lKCk7cmV0dXJuIHRoaXN9fWxldCBiaT0wO2Z1bmN0aW9uIHdpKCl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJpZFwiLHt2YWx1ZTpiaSsrfSksdGhpcy51dWlkPXpuLmdlbmVyYXRlVVVJRCgpLHRoaXMubmFtZT1cIlwiLHRoaXMudHlwZT1cIk1hdGVyaWFsXCIsdGhpcy5mb2c9ITAsdGhpcy5ibGVuZGluZz1iLHRoaXMuc2lkZT1mLHRoaXMuZmxhdFNoYWRpbmc9ITEsdGhpcy52ZXJ0ZXhDb2xvcnM9ITEsdGhpcy5vcGFjaXR5PTEsdGhpcy50cmFuc3BhcmVudD0hMSx0aGlzLmJsZW5kU3JjPU4sdGhpcy5ibGVuZERzdD1ELHRoaXMuYmxlbmRFcXVhdGlvbj1ULHRoaXMuYmxlbmRTcmNBbHBoYT1udWxsLHRoaXMuYmxlbmREc3RBbHBoYT1udWxsLHRoaXMuYmxlbmRFcXVhdGlvbkFscGhhPW51bGwsdGhpcy5kZXB0aEZ1bmM9aix0aGlzLmRlcHRoVGVzdD0hMCx0aGlzLmRlcHRoV3JpdGU9ITAsdGhpcy5zdGVuY2lsV3JpdGVNYXNrPTI1NSx0aGlzLnN0ZW5jaWxGdW5jPVNuLHRoaXMuc3RlbmNpbFJlZj0wLHRoaXMuc3RlbmNpbEZ1bmNNYXNrPTI1NSx0aGlzLnN0ZW5jaWxGYWlsPXVuLHRoaXMuc3RlbmNpbFpGYWlsPXVuLHRoaXMuc3RlbmNpbFpQYXNzPXVuLHRoaXMuc3RlbmNpbFdyaXRlPSExLHRoaXMuY2xpcHBpbmdQbGFuZXM9bnVsbCx0aGlzLmNsaXBJbnRlcnNlY3Rpb249ITEsdGhpcy5jbGlwU2hhZG93cz0hMSx0aGlzLnNoYWRvd1NpZGU9bnVsbCx0aGlzLmNvbG9yV3JpdGU9ITAsdGhpcy5wcmVjaXNpb249bnVsbCx0aGlzLnBvbHlnb25PZmZzZXQ9ITEsdGhpcy5wb2x5Z29uT2Zmc2V0RmFjdG9yPTAsdGhpcy5wb2x5Z29uT2Zmc2V0VW5pdHM9MCx0aGlzLmRpdGhlcmluZz0hMSx0aGlzLmFscGhhVGVzdD0wLHRoaXMucHJlbXVsdGlwbGllZEFscGhhPSExLHRoaXMudmlzaWJsZT0hMCx0aGlzLnRvbmVNYXBwZWQ9ITAsdGhpcy51c2VyRGF0YT17fSx0aGlzLnZlcnNpb249MH1mdW5jdGlvbiBfaSh0KXt3aS5jYWxsKHRoaXMpLHRoaXMudHlwZT1cIk1lc2hCYXNpY01hdGVyaWFsXCIsdGhpcy5jb2xvcj1uZXcgeWkoMTY3NzcyMTUpLHRoaXMubWFwPW51bGwsdGhpcy5saWdodE1hcD1udWxsLHRoaXMubGlnaHRNYXBJbnRlbnNpdHk9MSx0aGlzLmFvTWFwPW51bGwsdGhpcy5hb01hcEludGVuc2l0eT0xLHRoaXMuc3BlY3VsYXJNYXA9bnVsbCx0aGlzLmFscGhhTWFwPW51bGwsdGhpcy5lbnZNYXA9bnVsbCx0aGlzLmNvbWJpbmU9Wix0aGlzLnJlZmxlY3Rpdml0eT0xLHRoaXMucmVmcmFjdGlvblJhdGlvPS45OCx0aGlzLndpcmVmcmFtZT0hMSx0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD0xLHRoaXMud2lyZWZyYW1lTGluZWNhcD1cInJvdW5kXCIsdGhpcy53aXJlZnJhbWVMaW5lam9pbj1cInJvdW5kXCIsdGhpcy5za2lubmluZz0hMSx0aGlzLm1vcnBoVGFyZ2V0cz0hMSx0aGlzLnNldFZhbHVlcyh0KX13aS5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKEJuLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOndpLGlzTWF0ZXJpYWw6ITAsb25CZWZvcmVDb21waWxlOmZ1bmN0aW9uKCl7fSxjdXN0b21Qcm9ncmFtQ2FjaGVLZXk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vbkJlZm9yZUNvbXBpbGUudG9TdHJpbmcoKX0sc2V0VmFsdWVzOmZ1bmN0aW9uKHQpe2lmKHZvaWQgMCE9PXQpZm9yKGNvbnN0IGUgaW4gdCl7Y29uc3Qgbj10W2VdO2lmKHZvaWQgMD09PW4pe2NvbnNvbGUud2FybihcIlRIUkVFLk1hdGVyaWFsOiAnXCIrZStcIicgcGFyYW1ldGVyIGlzIHVuZGVmaW5lZC5cIik7Y29udGludWV9aWYoXCJzaGFkaW5nXCI9PT1lKXtjb25zb2xlLndhcm4oXCJUSFJFRS5cIit0aGlzLnR5cGUrXCI6IC5zaGFkaW5nIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSB0aGUgYm9vbGVhbiAuZmxhdFNoYWRpbmcgaW5zdGVhZC5cIiksdGhpcy5mbGF0U2hhZGluZz1uPT09djtjb250aW51ZX1jb25zdCByPXRoaXNbZV07dm9pZCAwIT09cj9yJiZyLmlzQ29sb3I/ci5zZXQobik6ciYmci5pc1ZlY3RvcjMmJm4mJm4uaXNWZWN0b3IzP3IuY29weShuKTp0aGlzW2VdPW46Y29uc29sZS53YXJuKFwiVEhSRUUuXCIrdGhpcy50eXBlK1wiOiAnXCIrZStcIicgaXMgbm90IGEgcHJvcGVydHkgb2YgdGhpcyBtYXRlcmlhbC5cIil9fSx0b0pTT046ZnVuY3Rpb24odCl7Y29uc3QgZT12b2lkIDA9PT10fHxcInN0cmluZ1wiPT10eXBlb2YgdDtlJiYodD17dGV4dHVyZXM6e30saW1hZ2VzOnt9fSk7Y29uc3Qgbj17bWV0YWRhdGE6e3ZlcnNpb246NC41LHR5cGU6XCJNYXRlcmlhbFwiLGdlbmVyYXRvcjpcIk1hdGVyaWFsLnRvSlNPTlwifX07ZnVuY3Rpb24gcih0KXtjb25zdCBlPVtdO2Zvcihjb25zdCBuIGluIHQpe2NvbnN0IHI9dFtuXTtkZWxldGUgci5tZXRhZGF0YSxlLnB1c2gocil9cmV0dXJuIGV9aWYobi51dWlkPXRoaXMudXVpZCxuLnR5cGU9dGhpcy50eXBlLFwiXCIhPT10aGlzLm5hbWUmJihuLm5hbWU9dGhpcy5uYW1lKSx0aGlzLmNvbG9yJiZ0aGlzLmNvbG9yLmlzQ29sb3ImJihuLmNvbG9yPXRoaXMuY29sb3IuZ2V0SGV4KCkpLHZvaWQgMCE9PXRoaXMucm91Z2huZXNzJiYobi5yb3VnaG5lc3M9dGhpcy5yb3VnaG5lc3MpLHZvaWQgMCE9PXRoaXMubWV0YWxuZXNzJiYobi5tZXRhbG5lc3M9dGhpcy5tZXRhbG5lc3MpLHRoaXMuc2hlZW4mJnRoaXMuc2hlZW4uaXNDb2xvciYmKG4uc2hlZW49dGhpcy5zaGVlbi5nZXRIZXgoKSksdGhpcy5lbWlzc2l2ZSYmdGhpcy5lbWlzc2l2ZS5pc0NvbG9yJiYobi5lbWlzc2l2ZT10aGlzLmVtaXNzaXZlLmdldEhleCgpKSx0aGlzLmVtaXNzaXZlSW50ZW5zaXR5JiYxIT09dGhpcy5lbWlzc2l2ZUludGVuc2l0eSYmKG4uZW1pc3NpdmVJbnRlbnNpdHk9dGhpcy5lbWlzc2l2ZUludGVuc2l0eSksdGhpcy5zcGVjdWxhciYmdGhpcy5zcGVjdWxhci5pc0NvbG9yJiYobi5zcGVjdWxhcj10aGlzLnNwZWN1bGFyLmdldEhleCgpKSx2b2lkIDAhPT10aGlzLnNoaW5pbmVzcyYmKG4uc2hpbmluZXNzPXRoaXMuc2hpbmluZXNzKSx2b2lkIDAhPT10aGlzLmNsZWFyY29hdCYmKG4uY2xlYXJjb2F0PXRoaXMuY2xlYXJjb2F0KSx2b2lkIDAhPT10aGlzLmNsZWFyY29hdFJvdWdobmVzcyYmKG4uY2xlYXJjb2F0Um91Z2huZXNzPXRoaXMuY2xlYXJjb2F0Um91Z2huZXNzKSx0aGlzLmNsZWFyY29hdE1hcCYmdGhpcy5jbGVhcmNvYXRNYXAuaXNUZXh0dXJlJiYobi5jbGVhcmNvYXRNYXA9dGhpcy5jbGVhcmNvYXRNYXAudG9KU09OKHQpLnV1aWQpLHRoaXMuY2xlYXJjb2F0Um91Z2huZXNzTWFwJiZ0aGlzLmNsZWFyY29hdFJvdWdobmVzc01hcC5pc1RleHR1cmUmJihuLmNsZWFyY29hdFJvdWdobmVzc01hcD10aGlzLmNsZWFyY29hdFJvdWdobmVzc01hcC50b0pTT04odCkudXVpZCksdGhpcy5jbGVhcmNvYXROb3JtYWxNYXAmJnRoaXMuY2xlYXJjb2F0Tm9ybWFsTWFwLmlzVGV4dHVyZSYmKG4uY2xlYXJjb2F0Tm9ybWFsTWFwPXRoaXMuY2xlYXJjb2F0Tm9ybWFsTWFwLnRvSlNPTih0KS51dWlkLG4uY2xlYXJjb2F0Tm9ybWFsU2NhbGU9dGhpcy5jbGVhcmNvYXROb3JtYWxTY2FsZS50b0FycmF5KCkpLHRoaXMubWFwJiZ0aGlzLm1hcC5pc1RleHR1cmUmJihuLm1hcD10aGlzLm1hcC50b0pTT04odCkudXVpZCksdGhpcy5tYXRjYXAmJnRoaXMubWF0Y2FwLmlzVGV4dHVyZSYmKG4ubWF0Y2FwPXRoaXMubWF0Y2FwLnRvSlNPTih0KS51dWlkKSx0aGlzLmFscGhhTWFwJiZ0aGlzLmFscGhhTWFwLmlzVGV4dHVyZSYmKG4uYWxwaGFNYXA9dGhpcy5hbHBoYU1hcC50b0pTT04odCkudXVpZCksdGhpcy5saWdodE1hcCYmdGhpcy5saWdodE1hcC5pc1RleHR1cmUmJihuLmxpZ2h0TWFwPXRoaXMubGlnaHRNYXAudG9KU09OKHQpLnV1aWQpLHRoaXMuYW9NYXAmJnRoaXMuYW9NYXAuaXNUZXh0dXJlJiYobi5hb01hcD10aGlzLmFvTWFwLnRvSlNPTih0KS51dWlkLG4uYW9NYXBJbnRlbnNpdHk9dGhpcy5hb01hcEludGVuc2l0eSksdGhpcy5idW1wTWFwJiZ0aGlzLmJ1bXBNYXAuaXNUZXh0dXJlJiYobi5idW1wTWFwPXRoaXMuYnVtcE1hcC50b0pTT04odCkudXVpZCxuLmJ1bXBTY2FsZT10aGlzLmJ1bXBTY2FsZSksdGhpcy5ub3JtYWxNYXAmJnRoaXMubm9ybWFsTWFwLmlzVGV4dHVyZSYmKG4ubm9ybWFsTWFwPXRoaXMubm9ybWFsTWFwLnRvSlNPTih0KS51dWlkLG4ubm9ybWFsTWFwVHlwZT10aGlzLm5vcm1hbE1hcFR5cGUsbi5ub3JtYWxTY2FsZT10aGlzLm5vcm1hbFNjYWxlLnRvQXJyYXkoKSksdGhpcy5kaXNwbGFjZW1lbnRNYXAmJnRoaXMuZGlzcGxhY2VtZW50TWFwLmlzVGV4dHVyZSYmKG4uZGlzcGxhY2VtZW50TWFwPXRoaXMuZGlzcGxhY2VtZW50TWFwLnRvSlNPTih0KS51dWlkLG4uZGlzcGxhY2VtZW50U2NhbGU9dGhpcy5kaXNwbGFjZW1lbnRTY2FsZSxuLmRpc3BsYWNlbWVudEJpYXM9dGhpcy5kaXNwbGFjZW1lbnRCaWFzKSx0aGlzLnJvdWdobmVzc01hcCYmdGhpcy5yb3VnaG5lc3NNYXAuaXNUZXh0dXJlJiYobi5yb3VnaG5lc3NNYXA9dGhpcy5yb3VnaG5lc3NNYXAudG9KU09OKHQpLnV1aWQpLHRoaXMubWV0YWxuZXNzTWFwJiZ0aGlzLm1ldGFsbmVzc01hcC5pc1RleHR1cmUmJihuLm1ldGFsbmVzc01hcD10aGlzLm1ldGFsbmVzc01hcC50b0pTT04odCkudXVpZCksdGhpcy5lbWlzc2l2ZU1hcCYmdGhpcy5lbWlzc2l2ZU1hcC5pc1RleHR1cmUmJihuLmVtaXNzaXZlTWFwPXRoaXMuZW1pc3NpdmVNYXAudG9KU09OKHQpLnV1aWQpLHRoaXMuc3BlY3VsYXJNYXAmJnRoaXMuc3BlY3VsYXJNYXAuaXNUZXh0dXJlJiYobi5zcGVjdWxhck1hcD10aGlzLnNwZWN1bGFyTWFwLnRvSlNPTih0KS51dWlkKSx0aGlzLmVudk1hcCYmdGhpcy5lbnZNYXAuaXNUZXh0dXJlJiYobi5lbnZNYXA9dGhpcy5lbnZNYXAudG9KU09OKHQpLnV1aWQsbi5yZWZsZWN0aXZpdHk9dGhpcy5yZWZsZWN0aXZpdHksbi5yZWZyYWN0aW9uUmF0aW89dGhpcy5yZWZyYWN0aW9uUmF0aW8sdm9pZCAwIT09dGhpcy5jb21iaW5lJiYobi5jb21iaW5lPXRoaXMuY29tYmluZSksdm9pZCAwIT09dGhpcy5lbnZNYXBJbnRlbnNpdHkmJihuLmVudk1hcEludGVuc2l0eT10aGlzLmVudk1hcEludGVuc2l0eSkpLHRoaXMuZ3JhZGllbnRNYXAmJnRoaXMuZ3JhZGllbnRNYXAuaXNUZXh0dXJlJiYobi5ncmFkaWVudE1hcD10aGlzLmdyYWRpZW50TWFwLnRvSlNPTih0KS51dWlkKSx2b2lkIDAhPT10aGlzLnNpemUmJihuLnNpemU9dGhpcy5zaXplKSx2b2lkIDAhPT10aGlzLnNpemVBdHRlbnVhdGlvbiYmKG4uc2l6ZUF0dGVudWF0aW9uPXRoaXMuc2l6ZUF0dGVudWF0aW9uKSx0aGlzLmJsZW5kaW5nIT09YiYmKG4uYmxlbmRpbmc9dGhpcy5ibGVuZGluZyksITA9PT10aGlzLmZsYXRTaGFkaW5nJiYobi5mbGF0U2hhZGluZz10aGlzLmZsYXRTaGFkaW5nKSx0aGlzLnNpZGUhPT1mJiYobi5zaWRlPXRoaXMuc2lkZSksdGhpcy52ZXJ0ZXhDb2xvcnMmJihuLnZlcnRleENvbG9ycz0hMCksdGhpcy5vcGFjaXR5PDEmJihuLm9wYWNpdHk9dGhpcy5vcGFjaXR5KSwhMD09PXRoaXMudHJhbnNwYXJlbnQmJihuLnRyYW5zcGFyZW50PXRoaXMudHJhbnNwYXJlbnQpLG4uZGVwdGhGdW5jPXRoaXMuZGVwdGhGdW5jLG4uZGVwdGhUZXN0PXRoaXMuZGVwdGhUZXN0LG4uZGVwdGhXcml0ZT10aGlzLmRlcHRoV3JpdGUsbi5zdGVuY2lsV3JpdGU9dGhpcy5zdGVuY2lsV3JpdGUsbi5zdGVuY2lsV3JpdGVNYXNrPXRoaXMuc3RlbmNpbFdyaXRlTWFzayxuLnN0ZW5jaWxGdW5jPXRoaXMuc3RlbmNpbEZ1bmMsbi5zdGVuY2lsUmVmPXRoaXMuc3RlbmNpbFJlZixuLnN0ZW5jaWxGdW5jTWFzaz10aGlzLnN0ZW5jaWxGdW5jTWFzayxuLnN0ZW5jaWxGYWlsPXRoaXMuc3RlbmNpbEZhaWwsbi5zdGVuY2lsWkZhaWw9dGhpcy5zdGVuY2lsWkZhaWwsbi5zdGVuY2lsWlBhc3M9dGhpcy5zdGVuY2lsWlBhc3MsdGhpcy5yb3RhdGlvbiYmMCE9PXRoaXMucm90YXRpb24mJihuLnJvdGF0aW9uPXRoaXMucm90YXRpb24pLCEwPT09dGhpcy5wb2x5Z29uT2Zmc2V0JiYobi5wb2x5Z29uT2Zmc2V0PSEwKSwwIT09dGhpcy5wb2x5Z29uT2Zmc2V0RmFjdG9yJiYobi5wb2x5Z29uT2Zmc2V0RmFjdG9yPXRoaXMucG9seWdvbk9mZnNldEZhY3RvciksMCE9PXRoaXMucG9seWdvbk9mZnNldFVuaXRzJiYobi5wb2x5Z29uT2Zmc2V0VW5pdHM9dGhpcy5wb2x5Z29uT2Zmc2V0VW5pdHMpLHRoaXMubGluZXdpZHRoJiYxIT09dGhpcy5saW5ld2lkdGgmJihuLmxpbmV3aWR0aD10aGlzLmxpbmV3aWR0aCksdm9pZCAwIT09dGhpcy5kYXNoU2l6ZSYmKG4uZGFzaFNpemU9dGhpcy5kYXNoU2l6ZSksdm9pZCAwIT09dGhpcy5nYXBTaXplJiYobi5nYXBTaXplPXRoaXMuZ2FwU2l6ZSksdm9pZCAwIT09dGhpcy5zY2FsZSYmKG4uc2NhbGU9dGhpcy5zY2FsZSksITA9PT10aGlzLmRpdGhlcmluZyYmKG4uZGl0aGVyaW5nPSEwKSx0aGlzLmFscGhhVGVzdD4wJiYobi5hbHBoYVRlc3Q9dGhpcy5hbHBoYVRlc3QpLCEwPT09dGhpcy5wcmVtdWx0aXBsaWVkQWxwaGEmJihuLnByZW11bHRpcGxpZWRBbHBoYT10aGlzLnByZW11bHRpcGxpZWRBbHBoYSksITA9PT10aGlzLndpcmVmcmFtZSYmKG4ud2lyZWZyYW1lPXRoaXMud2lyZWZyYW1lKSx0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD4xJiYobi53aXJlZnJhbWVMaW5ld2lkdGg9dGhpcy53aXJlZnJhbWVMaW5ld2lkdGgpLFwicm91bmRcIiE9PXRoaXMud2lyZWZyYW1lTGluZWNhcCYmKG4ud2lyZWZyYW1lTGluZWNhcD10aGlzLndpcmVmcmFtZUxpbmVjYXApLFwicm91bmRcIiE9PXRoaXMud2lyZWZyYW1lTGluZWpvaW4mJihuLndpcmVmcmFtZUxpbmVqb2luPXRoaXMud2lyZWZyYW1lTGluZWpvaW4pLCEwPT09dGhpcy5tb3JwaFRhcmdldHMmJihuLm1vcnBoVGFyZ2V0cz0hMCksITA9PT10aGlzLm1vcnBoTm9ybWFscyYmKG4ubW9ycGhOb3JtYWxzPSEwKSwhMD09PXRoaXMuc2tpbm5pbmcmJihuLnNraW5uaW5nPSEwKSwhMT09PXRoaXMudmlzaWJsZSYmKG4udmlzaWJsZT0hMSksITE9PT10aGlzLnRvbmVNYXBwZWQmJihuLnRvbmVNYXBwZWQ9ITEpLFwie31cIiE9PUpTT04uc3RyaW5naWZ5KHRoaXMudXNlckRhdGEpJiYobi51c2VyRGF0YT10aGlzLnVzZXJEYXRhKSxlKXtjb25zdCBlPXIodC50ZXh0dXJlcyksaT1yKHQuaW1hZ2VzKTtlLmxlbmd0aD4wJiYobi50ZXh0dXJlcz1lKSxpLmxlbmd0aD4wJiYobi5pbWFnZXM9aSl9cmV0dXJuIG59LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKS5jb3B5KHRoaXMpfSxjb3B5OmZ1bmN0aW9uKHQpe3RoaXMubmFtZT10Lm5hbWUsdGhpcy5mb2c9dC5mb2csdGhpcy5ibGVuZGluZz10LmJsZW5kaW5nLHRoaXMuc2lkZT10LnNpZGUsdGhpcy5mbGF0U2hhZGluZz10LmZsYXRTaGFkaW5nLHRoaXMudmVydGV4Q29sb3JzPXQudmVydGV4Q29sb3JzLHRoaXMub3BhY2l0eT10Lm9wYWNpdHksdGhpcy50cmFuc3BhcmVudD10LnRyYW5zcGFyZW50LHRoaXMuYmxlbmRTcmM9dC5ibGVuZFNyYyx0aGlzLmJsZW5kRHN0PXQuYmxlbmREc3QsdGhpcy5ibGVuZEVxdWF0aW9uPXQuYmxlbmRFcXVhdGlvbix0aGlzLmJsZW5kU3JjQWxwaGE9dC5ibGVuZFNyY0FscGhhLHRoaXMuYmxlbmREc3RBbHBoYT10LmJsZW5kRHN0QWxwaGEsdGhpcy5ibGVuZEVxdWF0aW9uQWxwaGE9dC5ibGVuZEVxdWF0aW9uQWxwaGEsdGhpcy5kZXB0aEZ1bmM9dC5kZXB0aEZ1bmMsdGhpcy5kZXB0aFRlc3Q9dC5kZXB0aFRlc3QsdGhpcy5kZXB0aFdyaXRlPXQuZGVwdGhXcml0ZSx0aGlzLnN0ZW5jaWxXcml0ZU1hc2s9dC5zdGVuY2lsV3JpdGVNYXNrLHRoaXMuc3RlbmNpbEZ1bmM9dC5zdGVuY2lsRnVuYyx0aGlzLnN0ZW5jaWxSZWY9dC5zdGVuY2lsUmVmLHRoaXMuc3RlbmNpbEZ1bmNNYXNrPXQuc3RlbmNpbEZ1bmNNYXNrLHRoaXMuc3RlbmNpbEZhaWw9dC5zdGVuY2lsRmFpbCx0aGlzLnN0ZW5jaWxaRmFpbD10LnN0ZW5jaWxaRmFpbCx0aGlzLnN0ZW5jaWxaUGFzcz10LnN0ZW5jaWxaUGFzcyx0aGlzLnN0ZW5jaWxXcml0ZT10LnN0ZW5jaWxXcml0ZTtjb25zdCBlPXQuY2xpcHBpbmdQbGFuZXM7bGV0IG49bnVsbDtpZihudWxsIT09ZSl7Y29uc3QgdD1lLmxlbmd0aDtuPW5ldyBBcnJheSh0KTtmb3IobGV0IHI9MDtyIT09dDsrK3IpbltyXT1lW3JdLmNsb25lKCl9cmV0dXJuIHRoaXMuY2xpcHBpbmdQbGFuZXM9bix0aGlzLmNsaXBJbnRlcnNlY3Rpb249dC5jbGlwSW50ZXJzZWN0aW9uLHRoaXMuY2xpcFNoYWRvd3M9dC5jbGlwU2hhZG93cyx0aGlzLnNoYWRvd1NpZGU9dC5zaGFkb3dTaWRlLHRoaXMuY29sb3JXcml0ZT10LmNvbG9yV3JpdGUsdGhpcy5wcmVjaXNpb249dC5wcmVjaXNpb24sdGhpcy5wb2x5Z29uT2Zmc2V0PXQucG9seWdvbk9mZnNldCx0aGlzLnBvbHlnb25PZmZzZXRGYWN0b3I9dC5wb2x5Z29uT2Zmc2V0RmFjdG9yLHRoaXMucG9seWdvbk9mZnNldFVuaXRzPXQucG9seWdvbk9mZnNldFVuaXRzLHRoaXMuZGl0aGVyaW5nPXQuZGl0aGVyaW5nLHRoaXMuYWxwaGFUZXN0PXQuYWxwaGFUZXN0LHRoaXMucHJlbXVsdGlwbGllZEFscGhhPXQucHJlbXVsdGlwbGllZEFscGhhLHRoaXMudmlzaWJsZT10LnZpc2libGUsdGhpcy50b25lTWFwcGVkPXQudG9uZU1hcHBlZCx0aGlzLnVzZXJEYXRhPUpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodC51c2VyRGF0YSkpLHRoaXN9LGRpc3Bvc2U6ZnVuY3Rpb24oKXt0aGlzLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJkaXNwb3NlXCJ9KX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkod2kucHJvdG90eXBlLFwibmVlZHNVcGRhdGVcIix7c2V0OmZ1bmN0aW9uKHQpeyEwPT09dCYmdGhpcy52ZXJzaW9uKyt9fSksX2kucHJvdG90eXBlPU9iamVjdC5jcmVhdGUod2kucHJvdG90eXBlKSxfaS5wcm90b3R5cGUuY29uc3RydWN0b3I9X2ksX2kucHJvdG90eXBlLmlzTWVzaEJhc2ljTWF0ZXJpYWw9ITAsX2kucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24odCl7cmV0dXJuIHdpLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyx0KSx0aGlzLmNvbG9yLmNvcHkodC5jb2xvciksdGhpcy5tYXA9dC5tYXAsdGhpcy5saWdodE1hcD10LmxpZ2h0TWFwLHRoaXMubGlnaHRNYXBJbnRlbnNpdHk9dC5saWdodE1hcEludGVuc2l0eSx0aGlzLmFvTWFwPXQuYW9NYXAsdGhpcy5hb01hcEludGVuc2l0eT10LmFvTWFwSW50ZW5zaXR5LHRoaXMuc3BlY3VsYXJNYXA9dC5zcGVjdWxhck1hcCx0aGlzLmFscGhhTWFwPXQuYWxwaGFNYXAsdGhpcy5lbnZNYXA9dC5lbnZNYXAsdGhpcy5jb21iaW5lPXQuY29tYmluZSx0aGlzLnJlZmxlY3Rpdml0eT10LnJlZmxlY3Rpdml0eSx0aGlzLnJlZnJhY3Rpb25SYXRpbz10LnJlZnJhY3Rpb25SYXRpbyx0aGlzLndpcmVmcmFtZT10LndpcmVmcmFtZSx0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD10LndpcmVmcmFtZUxpbmV3aWR0aCx0aGlzLndpcmVmcmFtZUxpbmVjYXA9dC53aXJlZnJhbWVMaW5lY2FwLHRoaXMud2lyZWZyYW1lTGluZWpvaW49dC53aXJlZnJhbWVMaW5lam9pbix0aGlzLnNraW5uaW5nPXQuc2tpbm5pbmcsdGhpcy5tb3JwaFRhcmdldHM9dC5tb3JwaFRhcmdldHMsdGhpc307Y29uc3QgTWk9bmV3IEtuLFNpPW5ldyBHbjtmdW5jdGlvbiBUaSh0LGUsbil7aWYoQXJyYXkuaXNBcnJheSh0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiVEhSRUUuQnVmZmVyQXR0cmlidXRlOiBhcnJheSBzaG91bGQgYmUgYSBUeXBlZCBBcnJheS5cIik7dGhpcy5uYW1lPVwiXCIsdGhpcy5hcnJheT10LHRoaXMuaXRlbVNpemU9ZSx0aGlzLmNvdW50PXZvaWQgMCE9PXQ/dC5sZW5ndGgvZTowLHRoaXMubm9ybWFsaXplZD0hMD09PW4sdGhpcy51c2FnZT1Ubix0aGlzLnVwZGF0ZVJhbmdlPXtvZmZzZXQ6MCxjb3VudDotMX0sdGhpcy52ZXJzaW9uPTB9ZnVuY3Rpb24gRWkodCxlLG4pe1RpLmNhbGwodGhpcyxuZXcgSW50OEFycmF5KHQpLGUsbil9ZnVuY3Rpb24gQWkodCxlLG4pe1RpLmNhbGwodGhpcyxuZXcgVWludDhBcnJheSh0KSxlLG4pfWZ1bmN0aW9uIExpKHQsZSxuKXtUaS5jYWxsKHRoaXMsbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHQpLGUsbil9ZnVuY3Rpb24gUmkodCxlLG4pe1RpLmNhbGwodGhpcyxuZXcgSW50MTZBcnJheSh0KSxlLG4pfWZ1bmN0aW9uIFBpKHQsZSxuKXtUaS5jYWxsKHRoaXMsbmV3IFVpbnQxNkFycmF5KHQpLGUsbil9ZnVuY3Rpb24gQ2kodCxlLG4pe1RpLmNhbGwodGhpcyxuZXcgSW50MzJBcnJheSh0KSxlLG4pfWZ1bmN0aW9uIElpKHQsZSxuKXtUaS5jYWxsKHRoaXMsbmV3IFVpbnQzMkFycmF5KHQpLGUsbil9ZnVuY3Rpb24gT2kodCxlLG4pe1RpLmNhbGwodGhpcyxuZXcgVWludDE2QXJyYXkodCksZSxuKX1mdW5jdGlvbiBOaSh0LGUsbil7VGkuY2FsbCh0aGlzLG5ldyBGbG9hdDMyQXJyYXkodCksZSxuKX1mdW5jdGlvbiBEaSh0LGUsbil7VGkuY2FsbCh0aGlzLG5ldyBGbG9hdDY0QXJyYXkodCksZSxuKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoVGkucHJvdG90eXBlLFwibmVlZHNVcGRhdGVcIix7c2V0OmZ1bmN0aW9uKHQpeyEwPT09dCYmdGhpcy52ZXJzaW9uKyt9fSksT2JqZWN0LmFzc2lnbihUaS5wcm90b3R5cGUse2lzQnVmZmVyQXR0cmlidXRlOiEwLG9uVXBsb2FkQ2FsbGJhY2s6ZnVuY3Rpb24oKXt9LHNldFVzYWdlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnVzYWdlPXQsdGhpc30sY29weTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5uYW1lPXQubmFtZSx0aGlzLmFycmF5PW5ldyB0LmFycmF5LmNvbnN0cnVjdG9yKHQuYXJyYXkpLHRoaXMuaXRlbVNpemU9dC5pdGVtU2l6ZSx0aGlzLmNvdW50PXQuY291bnQsdGhpcy5ub3JtYWxpemVkPXQubm9ybWFsaXplZCx0aGlzLnVzYWdlPXQudXNhZ2UsdGhpc30sY29weUF0OmZ1bmN0aW9uKHQsZSxuKXt0Kj10aGlzLml0ZW1TaXplLG4qPWUuaXRlbVNpemU7Zm9yKGxldCByPTAsaT10aGlzLml0ZW1TaXplO3I8aTtyKyspdGhpcy5hcnJheVt0K3JdPWUuYXJyYXlbbityXTtyZXR1cm4gdGhpc30sY29weUFycmF5OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmFycmF5LnNldCh0KSx0aGlzfSxjb3B5Q29sb3JzQXJyYXk6ZnVuY3Rpb24odCl7Y29uc3QgZT10aGlzLmFycmF5O2xldCBuPTA7Zm9yKGxldCByPTAsaT10Lmxlbmd0aDtyPGk7cisrKXtsZXQgaT10W3JdO3ZvaWQgMD09PWkmJihjb25zb2xlLndhcm4oXCJUSFJFRS5CdWZmZXJBdHRyaWJ1dGUuY29weUNvbG9yc0FycmF5KCk6IGNvbG9yIGlzIHVuZGVmaW5lZFwiLHIpLGk9bmV3IHlpKSxlW24rK109aS5yLGVbbisrXT1pLmcsZVtuKytdPWkuYn1yZXR1cm4gdGhpc30sY29weVZlY3RvcjJzQXJyYXk6ZnVuY3Rpb24odCl7Y29uc3QgZT10aGlzLmFycmF5O2xldCBuPTA7Zm9yKGxldCByPTAsaT10Lmxlbmd0aDtyPGk7cisrKXtsZXQgaT10W3JdO3ZvaWQgMD09PWkmJihjb25zb2xlLndhcm4oXCJUSFJFRS5CdWZmZXJBdHRyaWJ1dGUuY29weVZlY3RvcjJzQXJyYXkoKTogdmVjdG9yIGlzIHVuZGVmaW5lZFwiLHIpLGk9bmV3IEduKSxlW24rK109aS54LGVbbisrXT1pLnl9cmV0dXJuIHRoaXN9LGNvcHlWZWN0b3Izc0FycmF5OmZ1bmN0aW9uKHQpe2NvbnN0IGU9dGhpcy5hcnJheTtsZXQgbj0wO2ZvcihsZXQgcj0wLGk9dC5sZW5ndGg7cjxpO3IrKyl7bGV0IGk9dFtyXTt2b2lkIDA9PT1pJiYoY29uc29sZS53YXJuKFwiVEhSRUUuQnVmZmVyQXR0cmlidXRlLmNvcHlWZWN0b3Izc0FycmF5KCk6IHZlY3RvciBpcyB1bmRlZmluZWRcIixyKSxpPW5ldyBLbiksZVtuKytdPWkueCxlW24rK109aS55LGVbbisrXT1pLnp9cmV0dXJuIHRoaXN9LGNvcHlWZWN0b3I0c0FycmF5OmZ1bmN0aW9uKHQpe2NvbnN0IGU9dGhpcy5hcnJheTtsZXQgbj0wO2ZvcihsZXQgcj0wLGk9dC5sZW5ndGg7cjxpO3IrKyl7bGV0IGk9dFtyXTt2b2lkIDA9PT1pJiYoY29uc29sZS53YXJuKFwiVEhSRUUuQnVmZmVyQXR0cmlidXRlLmNvcHlWZWN0b3I0c0FycmF5KCk6IHZlY3RvciBpcyB1bmRlZmluZWRcIixyKSxpPW5ldyBxbiksZVtuKytdPWkueCxlW24rK109aS55LGVbbisrXT1pLnosZVtuKytdPWkud31yZXR1cm4gdGhpc30sYXBwbHlNYXRyaXgzOmZ1bmN0aW9uKHQpe2lmKDI9PT10aGlzLml0ZW1TaXplKWZvcihsZXQgZT0wLG49dGhpcy5jb3VudDtlPG47ZSsrKVNpLmZyb21CdWZmZXJBdHRyaWJ1dGUodGhpcyxlKSxTaS5hcHBseU1hdHJpeDModCksdGhpcy5zZXRYWShlLFNpLngsU2kueSk7ZWxzZSBpZigzPT09dGhpcy5pdGVtU2l6ZSlmb3IobGV0IGU9MCxuPXRoaXMuY291bnQ7ZTxuO2UrKylNaS5mcm9tQnVmZmVyQXR0cmlidXRlKHRoaXMsZSksTWkuYXBwbHlNYXRyaXgzKHQpLHRoaXMuc2V0WFlaKGUsTWkueCxNaS55LE1pLnopO3JldHVybiB0aGlzfSxhcHBseU1hdHJpeDQ6ZnVuY3Rpb24odCl7Zm9yKGxldCBlPTAsbj10aGlzLmNvdW50O2U8bjtlKyspTWkueD10aGlzLmdldFgoZSksTWkueT10aGlzLmdldFkoZSksTWkuej10aGlzLmdldFooZSksTWkuYXBwbHlNYXRyaXg0KHQpLHRoaXMuc2V0WFlaKGUsTWkueCxNaS55LE1pLnopO3JldHVybiB0aGlzfSxhcHBseU5vcm1hbE1hdHJpeDpmdW5jdGlvbih0KXtmb3IobGV0IGU9MCxuPXRoaXMuY291bnQ7ZTxuO2UrKylNaS54PXRoaXMuZ2V0WChlKSxNaS55PXRoaXMuZ2V0WShlKSxNaS56PXRoaXMuZ2V0WihlKSxNaS5hcHBseU5vcm1hbE1hdHJpeCh0KSx0aGlzLnNldFhZWihlLE1pLngsTWkueSxNaS56KTtyZXR1cm4gdGhpc30sdHJhbnNmb3JtRGlyZWN0aW9uOmZ1bmN0aW9uKHQpe2ZvcihsZXQgZT0wLG49dGhpcy5jb3VudDtlPG47ZSsrKU1pLng9dGhpcy5nZXRYKGUpLE1pLnk9dGhpcy5nZXRZKGUpLE1pLno9dGhpcy5nZXRaKGUpLE1pLnRyYW5zZm9ybURpcmVjdGlvbih0KSx0aGlzLnNldFhZWihlLE1pLngsTWkueSxNaS56KTtyZXR1cm4gdGhpc30sc2V0OmZ1bmN0aW9uKHQsZT0wKXtyZXR1cm4gdGhpcy5hcnJheS5zZXQodCxlKSx0aGlzfSxnZXRYOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmFycmF5W3QqdGhpcy5pdGVtU2l6ZV19LHNldFg6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5hcnJheVt0KnRoaXMuaXRlbVNpemVdPWUsdGhpc30sZ2V0WTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5hcnJheVt0KnRoaXMuaXRlbVNpemUrMV19LHNldFk6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5hcnJheVt0KnRoaXMuaXRlbVNpemUrMV09ZSx0aGlzfSxnZXRaOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmFycmF5W3QqdGhpcy5pdGVtU2l6ZSsyXX0sc2V0WjpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmFycmF5W3QqdGhpcy5pdGVtU2l6ZSsyXT1lLHRoaXN9LGdldFc6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuYXJyYXlbdCp0aGlzLml0ZW1TaXplKzNdfSxzZXRXOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuYXJyYXlbdCp0aGlzLml0ZW1TaXplKzNdPWUsdGhpc30sc2V0WFk6ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0Kj10aGlzLml0ZW1TaXplLHRoaXMuYXJyYXlbdCswXT1lLHRoaXMuYXJyYXlbdCsxXT1uLHRoaXN9LHNldFhZWjpmdW5jdGlvbih0LGUsbixyKXtyZXR1cm4gdCo9dGhpcy5pdGVtU2l6ZSx0aGlzLmFycmF5W3QrMF09ZSx0aGlzLmFycmF5W3QrMV09bix0aGlzLmFycmF5W3QrMl09cix0aGlzfSxzZXRYWVpXOmZ1bmN0aW9uKHQsZSxuLHIsaSl7cmV0dXJuIHQqPXRoaXMuaXRlbVNpemUsdGhpcy5hcnJheVt0KzBdPWUsdGhpcy5hcnJheVt0KzFdPW4sdGhpcy5hcnJheVt0KzJdPXIsdGhpcy5hcnJheVt0KzNdPWksdGhpc30sb25VcGxvYWQ6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMub25VcGxvYWRDYWxsYmFjaz10LHRoaXN9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMuYXJyYXksdGhpcy5pdGVtU2l6ZSkuY29weSh0aGlzKX0sdG9KU09OOmZ1bmN0aW9uKCl7cmV0dXJue2l0ZW1TaXplOnRoaXMuaXRlbVNpemUsdHlwZTp0aGlzLmFycmF5LmNvbnN0cnVjdG9yLm5hbWUsYXJyYXk6QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodGhpcy5hcnJheSksbm9ybWFsaXplZDp0aGlzLm5vcm1hbGl6ZWR9fX0pLEVpLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRpLnByb3RvdHlwZSksRWkucHJvdG90eXBlLmNvbnN0cnVjdG9yPUVpLEFpLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRpLnByb3RvdHlwZSksQWkucHJvdG90eXBlLmNvbnN0cnVjdG9yPUFpLExpLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRpLnByb3RvdHlwZSksTGkucHJvdG90eXBlLmNvbnN0cnVjdG9yPUxpLFJpLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRpLnByb3RvdHlwZSksUmkucHJvdG90eXBlLmNvbnN0cnVjdG9yPVJpLFBpLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRpLnByb3RvdHlwZSksUGkucHJvdG90eXBlLmNvbnN0cnVjdG9yPVBpLENpLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRpLnByb3RvdHlwZSksQ2kucHJvdG90eXBlLmNvbnN0cnVjdG9yPUNpLElpLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRpLnByb3RvdHlwZSksSWkucHJvdG90eXBlLmNvbnN0cnVjdG9yPUlpLE9pLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRpLnByb3RvdHlwZSksT2kucHJvdG90eXBlLmNvbnN0cnVjdG9yPU9pLE9pLnByb3RvdHlwZS5pc0Zsb2F0MTZCdWZmZXJBdHRyaWJ1dGU9ITAsTmkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVGkucHJvdG90eXBlKSxOaS5wcm90b3R5cGUuY29uc3RydWN0b3I9TmksRGkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVGkucHJvdG90eXBlKSxEaS5wcm90b3R5cGUuY29uc3RydWN0b3I9RGk7Y2xhc3MgQml7Y29uc3RydWN0b3IoKXt0aGlzLnZlcnRpY2VzPVtdLHRoaXMubm9ybWFscz1bXSx0aGlzLmNvbG9ycz1bXSx0aGlzLnV2cz1bXSx0aGlzLnV2czI9W10sdGhpcy5ncm91cHM9W10sdGhpcy5tb3JwaFRhcmdldHM9e30sdGhpcy5za2luV2VpZ2h0cz1bXSx0aGlzLnNraW5JbmRpY2VzPVtdLHRoaXMuYm91bmRpbmdCb3g9bnVsbCx0aGlzLmJvdW5kaW5nU3BoZXJlPW51bGwsdGhpcy52ZXJ0aWNlc05lZWRVcGRhdGU9ITEsdGhpcy5ub3JtYWxzTmVlZFVwZGF0ZT0hMSx0aGlzLmNvbG9yc05lZWRVcGRhdGU9ITEsdGhpcy51dnNOZWVkVXBkYXRlPSExLHRoaXMuZ3JvdXBzTmVlZFVwZGF0ZT0hMX1jb21wdXRlR3JvdXBzKHQpe2NvbnN0IGU9W107bGV0IG4scixpPXZvaWQgMDtjb25zdCBvPXQuZmFjZXM7Zm9yKHI9MDtyPG8ubGVuZ3RoO3IrKyl7Y29uc3QgdD1vW3JdO3QubWF0ZXJpYWxJbmRleCE9PWkmJihpPXQubWF0ZXJpYWxJbmRleCx2b2lkIDAhPT1uJiYobi5jb3VudD0zKnItbi5zdGFydCxlLnB1c2gobikpLG49e3N0YXJ0OjMqcixtYXRlcmlhbEluZGV4Oml9KX12b2lkIDAhPT1uJiYobi5jb3VudD0zKnItbi5zdGFydCxlLnB1c2gobikpLHRoaXMuZ3JvdXBzPWV9ZnJvbUdlb21ldHJ5KHQpe2NvbnN0IGU9dC5mYWNlcyxuPXQudmVydGljZXMscj10LmZhY2VWZXJ0ZXhVdnMsaT1yWzBdJiZyWzBdLmxlbmd0aD4wLG89clsxXSYmclsxXS5sZW5ndGg+MCxhPXQubW9ycGhUYXJnZXRzLHM9YS5sZW5ndGg7bGV0IGM7aWYocz4wKXtjPVtdO2ZvcihsZXQgdD0wO3Q8czt0KyspY1t0XT17bmFtZTphW3RdLm5hbWUsZGF0YTpbXX07dGhpcy5tb3JwaFRhcmdldHMucG9zaXRpb249Y31jb25zdCBsPXQubW9ycGhOb3JtYWxzLHU9bC5sZW5ndGg7bGV0IGg7aWYodT4wKXtoPVtdO2ZvcihsZXQgdD0wO3Q8dTt0KyspaFt0XT17bmFtZTpsW3RdLm5hbWUsZGF0YTpbXX07dGhpcy5tb3JwaFRhcmdldHMubm9ybWFsPWh9Y29uc3QgZD10LnNraW5JbmRpY2VzLHA9dC5za2luV2VpZ2h0cyxmPWQubGVuZ3RoPT09bi5sZW5ndGgsbT1wLmxlbmd0aD09PW4ubGVuZ3RoO24ubGVuZ3RoPjAmJjA9PT1lLmxlbmd0aCYmY29uc29sZS5lcnJvcihcIlRIUkVFLkRpcmVjdEdlb21ldHJ5OiBGYWNlbGVzcyBnZW9tZXRyaWVzIGFyZSBub3Qgc3VwcG9ydGVkLlwiKTtmb3IobGV0IHQ9MDt0PGUubGVuZ3RoO3QrKyl7Y29uc3QgZz1lW3RdO3RoaXMudmVydGljZXMucHVzaChuW2cuYV0sbltnLmJdLG5bZy5jXSk7Y29uc3Qgdj1nLnZlcnRleE5vcm1hbHM7aWYoMz09PXYubGVuZ3RoKXRoaXMubm9ybWFscy5wdXNoKHZbMF0sdlsxXSx2WzJdKTtlbHNle2NvbnN0IHQ9Zy5ub3JtYWw7dGhpcy5ub3JtYWxzLnB1c2godCx0LHQpfWNvbnN0IHk9Zy52ZXJ0ZXhDb2xvcnM7aWYoMz09PXkubGVuZ3RoKXRoaXMuY29sb3JzLnB1c2goeVswXSx5WzFdLHlbMl0pO2Vsc2V7Y29uc3QgdD1nLmNvbG9yO3RoaXMuY29sb3JzLnB1c2godCx0LHQpfWlmKCEwPT09aSl7Y29uc3QgZT1yWzBdW3RdO3ZvaWQgMCE9PWU/dGhpcy51dnMucHVzaChlWzBdLGVbMV0sZVsyXSk6KGNvbnNvbGUud2FybihcIlRIUkVFLkRpcmVjdEdlb21ldHJ5LmZyb21HZW9tZXRyeSgpOiBVbmRlZmluZWQgdmVydGV4VXYgXCIsdCksdGhpcy51dnMucHVzaChuZXcgR24sbmV3IEduLG5ldyBHbikpfWlmKCEwPT09byl7Y29uc3QgZT1yWzFdW3RdO3ZvaWQgMCE9PWU/dGhpcy51dnMyLnB1c2goZVswXSxlWzFdLGVbMl0pOihjb25zb2xlLndhcm4oXCJUSFJFRS5EaXJlY3RHZW9tZXRyeS5mcm9tR2VvbWV0cnkoKTogVW5kZWZpbmVkIHZlcnRleFV2MiBcIix0KSx0aGlzLnV2czIucHVzaChuZXcgR24sbmV3IEduLG5ldyBHbikpfWZvcihsZXQgdD0wO3Q8czt0Kyspe2NvbnN0IGU9YVt0XS52ZXJ0aWNlcztjW3RdLmRhdGEucHVzaChlW2cuYV0sZVtnLmJdLGVbZy5jXSl9Zm9yKGxldCBlPTA7ZTx1O2UrKyl7Y29uc3Qgbj1sW2VdLnZlcnRleE5vcm1hbHNbdF07aFtlXS5kYXRhLnB1c2gobi5hLG4uYixuLmMpfWYmJnRoaXMuc2tpbkluZGljZXMucHVzaChkW2cuYV0sZFtnLmJdLGRbZy5jXSksbSYmdGhpcy5za2luV2VpZ2h0cy5wdXNoKHBbZy5hXSxwW2cuYl0scFtnLmNdKX1yZXR1cm4gdGhpcy5jb21wdXRlR3JvdXBzKHQpLHRoaXMudmVydGljZXNOZWVkVXBkYXRlPXQudmVydGljZXNOZWVkVXBkYXRlLHRoaXMubm9ybWFsc05lZWRVcGRhdGU9dC5ub3JtYWxzTmVlZFVwZGF0ZSx0aGlzLmNvbG9yc05lZWRVcGRhdGU9dC5jb2xvcnNOZWVkVXBkYXRlLHRoaXMudXZzTmVlZFVwZGF0ZT10LnV2c05lZWRVcGRhdGUsdGhpcy5ncm91cHNOZWVkVXBkYXRlPXQuZ3JvdXBzTmVlZFVwZGF0ZSxudWxsIT09dC5ib3VuZGluZ1NwaGVyZSYmKHRoaXMuYm91bmRpbmdTcGhlcmU9dC5ib3VuZGluZ1NwaGVyZS5jbG9uZSgpKSxudWxsIT09dC5ib3VuZGluZ0JveCYmKHRoaXMuYm91bmRpbmdCb3g9dC5ib3VuZGluZ0JveC5jbG9uZSgpKSx0aGlzfX1mdW5jdGlvbiBGaSh0KXtpZigwPT09dC5sZW5ndGgpcmV0dXJuLTEvMDtsZXQgZT10WzBdO2ZvcihsZXQgbj0xLHI9dC5sZW5ndGg7bjxyOysrbil0W25dPmUmJihlPXRbbl0pO3JldHVybiBlfWNvbnN0IFVpPXtJbnQ4QXJyYXk6SW50OEFycmF5LFVpbnQ4QXJyYXk6VWludDhBcnJheSxVaW50OENsYW1wZWRBcnJheTpcInVuZGVmaW5lZFwiIT10eXBlb2YgVWludDhDbGFtcGVkQXJyYXk/VWludDhDbGFtcGVkQXJyYXk6VWludDhBcnJheSxJbnQxNkFycmF5OkludDE2QXJyYXksVWludDE2QXJyYXk6VWludDE2QXJyYXksSW50MzJBcnJheTpJbnQzMkFycmF5LFVpbnQzMkFycmF5OlVpbnQzMkFycmF5LEZsb2F0MzJBcnJheTpGbG9hdDMyQXJyYXksRmxvYXQ2NEFycmF5OkZsb2F0NjRBcnJheX07ZnVuY3Rpb24gemkodCxlKXtyZXR1cm4gbmV3IFVpW3RdKGUpfWxldCBHaT0xO2NvbnN0IEhpPW5ldyBUcixraT1uZXcgSnIsVmk9bmV3IEtuLGppPW5ldyB0cixXaT1uZXcgdHIsWGk9bmV3IEtuO2Z1bmN0aW9uIHFpKCl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJpZFwiLHt2YWx1ZTpHaSs9Mn0pLHRoaXMudXVpZD16bi5nZW5lcmF0ZVVVSUQoKSx0aGlzLm5hbWU9XCJcIix0aGlzLnR5cGU9XCJCdWZmZXJHZW9tZXRyeVwiLHRoaXMuaW5kZXg9bnVsbCx0aGlzLmF0dHJpYnV0ZXM9e30sdGhpcy5tb3JwaEF0dHJpYnV0ZXM9e30sdGhpcy5tb3JwaFRhcmdldHNSZWxhdGl2ZT0hMSx0aGlzLmdyb3Vwcz1bXSx0aGlzLmJvdW5kaW5nQm94PW51bGwsdGhpcy5ib3VuZGluZ1NwaGVyZT1udWxsLHRoaXMuZHJhd1JhbmdlPXtzdGFydDowLGNvdW50OjEvMH0sdGhpcy51c2VyRGF0YT17fX1xaS5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKEJuLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOnFpLGlzQnVmZmVyR2VvbWV0cnk6ITAsZ2V0SW5kZXg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbmRleH0sc2V0SW5kZXg6ZnVuY3Rpb24odCl7cmV0dXJuIEFycmF5LmlzQXJyYXkodCk/dGhpcy5pbmRleD1uZXcoRmkodCk+NjU1MzU/SWk6UGkpKHQsMSk6dGhpcy5pbmRleD10LHRoaXN9LGdldEF0dHJpYnV0ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5hdHRyaWJ1dGVzW3RdfSxzZXRBdHRyaWJ1dGU6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5hdHRyaWJ1dGVzW3RdPWUsdGhpc30sZGVsZXRlQXR0cmlidXRlOmZ1bmN0aW9uKHQpe3JldHVybiBkZWxldGUgdGhpcy5hdHRyaWJ1dGVzW3RdLHRoaXN9LGhhc0F0dHJpYnV0ZTpmdW5jdGlvbih0KXtyZXR1cm4gdm9pZCAwIT09dGhpcy5hdHRyaWJ1dGVzW3RdfSxhZGRHcm91cDpmdW5jdGlvbih0LGUsbj0wKXt0aGlzLmdyb3Vwcy5wdXNoKHtzdGFydDp0LGNvdW50OmUsbWF0ZXJpYWxJbmRleDpufSl9LGNsZWFyR3JvdXBzOmZ1bmN0aW9uKCl7dGhpcy5ncm91cHM9W119LHNldERyYXdSYW5nZTpmdW5jdGlvbih0LGUpe3RoaXMuZHJhd1JhbmdlLnN0YXJ0PXQsdGhpcy5kcmF3UmFuZ2UuY291bnQ9ZX0sYXBwbHlNYXRyaXg0OmZ1bmN0aW9uKHQpe2NvbnN0IGU9dGhpcy5hdHRyaWJ1dGVzLnBvc2l0aW9uO3ZvaWQgMCE9PWUmJihlLmFwcGx5TWF0cml4NCh0KSxlLm5lZWRzVXBkYXRlPSEwKTtjb25zdCBuPXRoaXMuYXR0cmlidXRlcy5ub3JtYWw7aWYodm9pZCAwIT09bil7Y29uc3QgZT0obmV3IEhuKS5nZXROb3JtYWxNYXRyaXgodCk7bi5hcHBseU5vcm1hbE1hdHJpeChlKSxuLm5lZWRzVXBkYXRlPSEwfWNvbnN0IHI9dGhpcy5hdHRyaWJ1dGVzLnRhbmdlbnQ7cmV0dXJuIHZvaWQgMCE9PXImJihyLnRyYW5zZm9ybURpcmVjdGlvbih0KSxyLm5lZWRzVXBkYXRlPSEwKSxudWxsIT09dGhpcy5ib3VuZGluZ0JveCYmdGhpcy5jb21wdXRlQm91bmRpbmdCb3goKSxudWxsIT09dGhpcy5ib3VuZGluZ1NwaGVyZSYmdGhpcy5jb21wdXRlQm91bmRpbmdTcGhlcmUoKSx0aGlzfSxyb3RhdGVYOmZ1bmN0aW9uKHQpe3JldHVybiBIaS5tYWtlUm90YXRpb25YKHQpLHRoaXMuYXBwbHlNYXRyaXg0KEhpKSx0aGlzfSxyb3RhdGVZOmZ1bmN0aW9uKHQpe3JldHVybiBIaS5tYWtlUm90YXRpb25ZKHQpLHRoaXMuYXBwbHlNYXRyaXg0KEhpKSx0aGlzfSxyb3RhdGVaOmZ1bmN0aW9uKHQpe3JldHVybiBIaS5tYWtlUm90YXRpb25aKHQpLHRoaXMuYXBwbHlNYXRyaXg0KEhpKSx0aGlzfSx0cmFuc2xhdGU6ZnVuY3Rpb24odCxlLG4pe3JldHVybiBIaS5tYWtlVHJhbnNsYXRpb24odCxlLG4pLHRoaXMuYXBwbHlNYXRyaXg0KEhpKSx0aGlzfSxzY2FsZTpmdW5jdGlvbih0LGUsbil7cmV0dXJuIEhpLm1ha2VTY2FsZSh0LGUsbiksdGhpcy5hcHBseU1hdHJpeDQoSGkpLHRoaXN9LGxvb2tBdDpmdW5jdGlvbih0KXtyZXR1cm4ga2kubG9va0F0KHQpLGtpLnVwZGF0ZU1hdHJpeCgpLHRoaXMuYXBwbHlNYXRyaXg0KGtpLm1hdHJpeCksdGhpc30sY2VudGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29tcHV0ZUJvdW5kaW5nQm94KCksdGhpcy5ib3VuZGluZ0JveC5nZXRDZW50ZXIoVmkpLm5lZ2F0ZSgpLHRoaXMudHJhbnNsYXRlKFZpLngsVmkueSxWaS56KSx0aGlzfSxzZXRGcm9tT2JqZWN0OmZ1bmN0aW9uKHQpe2NvbnN0IGU9dC5nZW9tZXRyeTtpZih0LmlzUG9pbnRzfHx0LmlzTGluZSl7Y29uc3QgdD1uZXcgTmkoMyplLnZlcnRpY2VzLmxlbmd0aCwzKSxuPW5ldyBOaSgzKmUuY29sb3JzLmxlbmd0aCwzKTtpZih0aGlzLnNldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsdC5jb3B5VmVjdG9yM3NBcnJheShlLnZlcnRpY2VzKSksdGhpcy5zZXRBdHRyaWJ1dGUoXCJjb2xvclwiLG4uY29weUNvbG9yc0FycmF5KGUuY29sb3JzKSksZS5saW5lRGlzdGFuY2VzJiZlLmxpbmVEaXN0YW5jZXMubGVuZ3RoPT09ZS52ZXJ0aWNlcy5sZW5ndGgpe2NvbnN0IHQ9bmV3IE5pKGUubGluZURpc3RhbmNlcy5sZW5ndGgsMSk7dGhpcy5zZXRBdHRyaWJ1dGUoXCJsaW5lRGlzdGFuY2VcIix0LmNvcHlBcnJheShlLmxpbmVEaXN0YW5jZXMpKX1udWxsIT09ZS5ib3VuZGluZ1NwaGVyZSYmKHRoaXMuYm91bmRpbmdTcGhlcmU9ZS5ib3VuZGluZ1NwaGVyZS5jbG9uZSgpKSxudWxsIT09ZS5ib3VuZGluZ0JveCYmKHRoaXMuYm91bmRpbmdCb3g9ZS5ib3VuZGluZ0JveC5jbG9uZSgpKX1lbHNlIHQuaXNNZXNoJiZlJiZlLmlzR2VvbWV0cnkmJnRoaXMuZnJvbUdlb21ldHJ5KGUpO3JldHVybiB0aGlzfSxzZXRGcm9tUG9pbnRzOmZ1bmN0aW9uKHQpe2NvbnN0IGU9W107Zm9yKGxldCBuPTAscj10Lmxlbmd0aDtuPHI7bisrKXtjb25zdCByPXRbbl07ZS5wdXNoKHIueCxyLnksci56fHwwKX1yZXR1cm4gdGhpcy5zZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBOaShlLDMpKSx0aGlzfSx1cGRhdGVGcm9tT2JqZWN0OmZ1bmN0aW9uKHQpe2xldCBlPXQuZ2VvbWV0cnk7aWYodC5pc01lc2gpe2xldCB0PWUuX19kaXJlY3RHZW9tZXRyeTtpZighMD09PWUuZWxlbWVudHNOZWVkVXBkYXRlJiYodD12b2lkIDAsZS5lbGVtZW50c05lZWRVcGRhdGU9ITEpLHZvaWQgMD09PXQpcmV0dXJuIHRoaXMuZnJvbUdlb21ldHJ5KGUpO3QudmVydGljZXNOZWVkVXBkYXRlPWUudmVydGljZXNOZWVkVXBkYXRlLHQubm9ybWFsc05lZWRVcGRhdGU9ZS5ub3JtYWxzTmVlZFVwZGF0ZSx0LmNvbG9yc05lZWRVcGRhdGU9ZS5jb2xvcnNOZWVkVXBkYXRlLHQudXZzTmVlZFVwZGF0ZT1lLnV2c05lZWRVcGRhdGUsdC5ncm91cHNOZWVkVXBkYXRlPWUuZ3JvdXBzTmVlZFVwZGF0ZSxlLnZlcnRpY2VzTmVlZFVwZGF0ZT0hMSxlLm5vcm1hbHNOZWVkVXBkYXRlPSExLGUuY29sb3JzTmVlZFVwZGF0ZT0hMSxlLnV2c05lZWRVcGRhdGU9ITEsZS5ncm91cHNOZWVkVXBkYXRlPSExLGU9dH1pZighMD09PWUudmVydGljZXNOZWVkVXBkYXRlKXtjb25zdCB0PXRoaXMuYXR0cmlidXRlcy5wb3NpdGlvbjt2b2lkIDAhPT10JiYodC5jb3B5VmVjdG9yM3NBcnJheShlLnZlcnRpY2VzKSx0Lm5lZWRzVXBkYXRlPSEwKSxlLnZlcnRpY2VzTmVlZFVwZGF0ZT0hMX1pZighMD09PWUubm9ybWFsc05lZWRVcGRhdGUpe2NvbnN0IHQ9dGhpcy5hdHRyaWJ1dGVzLm5vcm1hbDt2b2lkIDAhPT10JiYodC5jb3B5VmVjdG9yM3NBcnJheShlLm5vcm1hbHMpLHQubmVlZHNVcGRhdGU9ITApLGUubm9ybWFsc05lZWRVcGRhdGU9ITF9aWYoITA9PT1lLmNvbG9yc05lZWRVcGRhdGUpe2NvbnN0IHQ9dGhpcy5hdHRyaWJ1dGVzLmNvbG9yO3ZvaWQgMCE9PXQmJih0LmNvcHlDb2xvcnNBcnJheShlLmNvbG9ycyksdC5uZWVkc1VwZGF0ZT0hMCksZS5jb2xvcnNOZWVkVXBkYXRlPSExfWlmKGUudXZzTmVlZFVwZGF0ZSl7Y29uc3QgdD10aGlzLmF0dHJpYnV0ZXMudXY7dm9pZCAwIT09dCYmKHQuY29weVZlY3RvcjJzQXJyYXkoZS51dnMpLHQubmVlZHNVcGRhdGU9ITApLGUudXZzTmVlZFVwZGF0ZT0hMX1pZihlLmxpbmVEaXN0YW5jZXNOZWVkVXBkYXRlKXtjb25zdCB0PXRoaXMuYXR0cmlidXRlcy5saW5lRGlzdGFuY2U7dm9pZCAwIT09dCYmKHQuY29weUFycmF5KGUubGluZURpc3RhbmNlcyksdC5uZWVkc1VwZGF0ZT0hMCksZS5saW5lRGlzdGFuY2VzTmVlZFVwZGF0ZT0hMX1yZXR1cm4gZS5ncm91cHNOZWVkVXBkYXRlJiYoZS5jb21wdXRlR3JvdXBzKHQuZ2VvbWV0cnkpLHRoaXMuZ3JvdXBzPWUuZ3JvdXBzLGUuZ3JvdXBzTmVlZFVwZGF0ZT0hMSksdGhpc30sZnJvbUdlb21ldHJ5OmZ1bmN0aW9uKHQpe3JldHVybiB0Ll9fZGlyZWN0R2VvbWV0cnk9KG5ldyBCaSkuZnJvbUdlb21ldHJ5KHQpLHRoaXMuZnJvbURpcmVjdEdlb21ldHJ5KHQuX19kaXJlY3RHZW9tZXRyeSl9LGZyb21EaXJlY3RHZW9tZXRyeTpmdW5jdGlvbih0KXtjb25zdCBlPW5ldyBGbG9hdDMyQXJyYXkoMyp0LnZlcnRpY2VzLmxlbmd0aCk7aWYodGhpcy5zZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBUaShlLDMpLmNvcHlWZWN0b3Izc0FycmF5KHQudmVydGljZXMpKSx0Lm5vcm1hbHMubGVuZ3RoPjApe2NvbnN0IGU9bmV3IEZsb2F0MzJBcnJheSgzKnQubm9ybWFscy5sZW5ndGgpO3RoaXMuc2V0QXR0cmlidXRlKFwibm9ybWFsXCIsbmV3IFRpKGUsMykuY29weVZlY3RvcjNzQXJyYXkodC5ub3JtYWxzKSl9aWYodC5jb2xvcnMubGVuZ3RoPjApe2NvbnN0IGU9bmV3IEZsb2F0MzJBcnJheSgzKnQuY29sb3JzLmxlbmd0aCk7dGhpcy5zZXRBdHRyaWJ1dGUoXCJjb2xvclwiLG5ldyBUaShlLDMpLmNvcHlDb2xvcnNBcnJheSh0LmNvbG9ycykpfWlmKHQudXZzLmxlbmd0aD4wKXtjb25zdCBlPW5ldyBGbG9hdDMyQXJyYXkoMip0LnV2cy5sZW5ndGgpO3RoaXMuc2V0QXR0cmlidXRlKFwidXZcIixuZXcgVGkoZSwyKS5jb3B5VmVjdG9yMnNBcnJheSh0LnV2cykpfWlmKHQudXZzMi5sZW5ndGg+MCl7Y29uc3QgZT1uZXcgRmxvYXQzMkFycmF5KDIqdC51dnMyLmxlbmd0aCk7dGhpcy5zZXRBdHRyaWJ1dGUoXCJ1djJcIixuZXcgVGkoZSwyKS5jb3B5VmVjdG9yMnNBcnJheSh0LnV2czIpKX10aGlzLmdyb3Vwcz10Lmdyb3Vwcztmb3IoY29uc3QgZSBpbiB0Lm1vcnBoVGFyZ2V0cyl7Y29uc3Qgbj1bXSxyPXQubW9ycGhUYXJnZXRzW2VdO2ZvcihsZXQgdD0wLGU9ci5sZW5ndGg7dDxlO3QrKyl7Y29uc3QgZT1yW3RdLGk9bmV3IE5pKDMqZS5kYXRhLmxlbmd0aCwzKTtpLm5hbWU9ZS5uYW1lLG4ucHVzaChpLmNvcHlWZWN0b3Izc0FycmF5KGUuZGF0YSkpfXRoaXMubW9ycGhBdHRyaWJ1dGVzW2VdPW59aWYodC5za2luSW5kaWNlcy5sZW5ndGg+MCl7Y29uc3QgZT1uZXcgTmkoNCp0LnNraW5JbmRpY2VzLmxlbmd0aCw0KTt0aGlzLnNldEF0dHJpYnV0ZShcInNraW5JbmRleFwiLGUuY29weVZlY3RvcjRzQXJyYXkodC5za2luSW5kaWNlcykpfWlmKHQuc2tpbldlaWdodHMubGVuZ3RoPjApe2NvbnN0IGU9bmV3IE5pKDQqdC5za2luV2VpZ2h0cy5sZW5ndGgsNCk7dGhpcy5zZXRBdHRyaWJ1dGUoXCJza2luV2VpZ2h0XCIsZS5jb3B5VmVjdG9yNHNBcnJheSh0LnNraW5XZWlnaHRzKSl9cmV0dXJuIG51bGwhPT10LmJvdW5kaW5nU3BoZXJlJiYodGhpcy5ib3VuZGluZ1NwaGVyZT10LmJvdW5kaW5nU3BoZXJlLmNsb25lKCkpLG51bGwhPT10LmJvdW5kaW5nQm94JiYodGhpcy5ib3VuZGluZ0JveD10LmJvdW5kaW5nQm94LmNsb25lKCkpLHRoaXN9LGNvbXB1dGVCb3VuZGluZ0JveDpmdW5jdGlvbigpe251bGw9PT10aGlzLmJvdW5kaW5nQm94JiYodGhpcy5ib3VuZGluZ0JveD1uZXcgdHIpO2NvbnN0IHQ9dGhpcy5hdHRyaWJ1dGVzLnBvc2l0aW9uLGU9dGhpcy5tb3JwaEF0dHJpYnV0ZXMucG9zaXRpb247aWYodCYmdC5pc0dMQnVmZmVyQXR0cmlidXRlKXJldHVybiBjb25zb2xlLmVycm9yKCdUSFJFRS5CdWZmZXJHZW9tZXRyeS5jb21wdXRlQm91bmRpbmdCb3goKTogR0xCdWZmZXJBdHRyaWJ1dGUgcmVxdWlyZXMgYSBtYW51YWwgYm91bmRpbmcgYm94LiBBbHRlcm5hdGl2ZWx5IHNldCBcIm1lc2guZnJ1c3R1bUN1bGxlZFwiIHRvIFwiZmFsc2VcIi4nLHRoaXMpLHZvaWQgdGhpcy5ib3VuZGluZ0JveC5zZXQobmV3IEtuKC0xLzAsLTEvMCwtMS8wKSxuZXcgS24oMS8wLDEvMCwxLzApKTtpZih2b2lkIDAhPT10KXtpZih0aGlzLmJvdW5kaW5nQm94LnNldEZyb21CdWZmZXJBdHRyaWJ1dGUodCksZSlmb3IobGV0IHQ9MCxuPWUubGVuZ3RoO3Q8bjt0Kyspe2NvbnN0IG49ZVt0XTtqaS5zZXRGcm9tQnVmZmVyQXR0cmlidXRlKG4pLHRoaXMubW9ycGhUYXJnZXRzUmVsYXRpdmU/KFhpLmFkZFZlY3RvcnModGhpcy5ib3VuZGluZ0JveC5taW4samkubWluKSx0aGlzLmJvdW5kaW5nQm94LmV4cGFuZEJ5UG9pbnQoWGkpLFhpLmFkZFZlY3RvcnModGhpcy5ib3VuZGluZ0JveC5tYXgsamkubWF4KSx0aGlzLmJvdW5kaW5nQm94LmV4cGFuZEJ5UG9pbnQoWGkpKToodGhpcy5ib3VuZGluZ0JveC5leHBhbmRCeVBvaW50KGppLm1pbiksdGhpcy5ib3VuZGluZ0JveC5leHBhbmRCeVBvaW50KGppLm1heCkpfX1lbHNlIHRoaXMuYm91bmRpbmdCb3gubWFrZUVtcHR5KCk7KGlzTmFOKHRoaXMuYm91bmRpbmdCb3gubWluLngpfHxpc05hTih0aGlzLmJvdW5kaW5nQm94Lm1pbi55KXx8aXNOYU4odGhpcy5ib3VuZGluZ0JveC5taW4ueikpJiZjb25zb2xlLmVycm9yKCdUSFJFRS5CdWZmZXJHZW9tZXRyeS5jb21wdXRlQm91bmRpbmdCb3goKTogQ29tcHV0ZWQgbWluL21heCBoYXZlIE5hTiB2YWx1ZXMuIFRoZSBcInBvc2l0aW9uXCIgYXR0cmlidXRlIGlzIGxpa2VseSB0byBoYXZlIE5hTiB2YWx1ZXMuJyx0aGlzKX0sY29tcHV0ZUJvdW5kaW5nU3BoZXJlOmZ1bmN0aW9uKCl7bnVsbD09PXRoaXMuYm91bmRpbmdTcGhlcmUmJih0aGlzLmJvdW5kaW5nU3BoZXJlPW5ldyBncik7Y29uc3QgdD10aGlzLmF0dHJpYnV0ZXMucG9zaXRpb24sZT10aGlzLm1vcnBoQXR0cmlidXRlcy5wb3NpdGlvbjtpZih0JiZ0LmlzR0xCdWZmZXJBdHRyaWJ1dGUpcmV0dXJuIGNvbnNvbGUuZXJyb3IoJ1RIUkVFLkJ1ZmZlckdlb21ldHJ5LmNvbXB1dGVCb3VuZGluZ1NwaGVyZSgpOiBHTEJ1ZmZlckF0dHJpYnV0ZSByZXF1aXJlcyBhIG1hbnVhbCBib3VuZGluZyBzcGhlcmUuIEFsdGVybmF0aXZlbHkgc2V0IFwibWVzaC5mcnVzdHVtQ3VsbGVkXCIgdG8gXCJmYWxzZVwiLicsdGhpcyksdm9pZCB0aGlzLmJvdW5kaW5nU3BoZXJlLnNldChuZXcgS24sMS8wKTtpZih0KXtjb25zdCBuPXRoaXMuYm91bmRpbmdTcGhlcmUuY2VudGVyO2lmKGppLnNldEZyb21CdWZmZXJBdHRyaWJ1dGUodCksZSlmb3IobGV0IHQ9MCxuPWUubGVuZ3RoO3Q8bjt0Kyspe2NvbnN0IG49ZVt0XTtXaS5zZXRGcm9tQnVmZmVyQXR0cmlidXRlKG4pLHRoaXMubW9ycGhUYXJnZXRzUmVsYXRpdmU/KFhpLmFkZFZlY3RvcnMoamkubWluLFdpLm1pbiksamkuZXhwYW5kQnlQb2ludChYaSksWGkuYWRkVmVjdG9ycyhqaS5tYXgsV2kubWF4KSxqaS5leHBhbmRCeVBvaW50KFhpKSk6KGppLmV4cGFuZEJ5UG9pbnQoV2kubWluKSxqaS5leHBhbmRCeVBvaW50KFdpLm1heCkpfWppLmdldENlbnRlcihuKTtsZXQgcj0wO2ZvcihsZXQgZT0wLGk9dC5jb3VudDtlPGk7ZSsrKVhpLmZyb21CdWZmZXJBdHRyaWJ1dGUodCxlKSxyPU1hdGgubWF4KHIsbi5kaXN0YW5jZVRvU3F1YXJlZChYaSkpO2lmKGUpZm9yKGxldCBpPTAsbz1lLmxlbmd0aDtpPG87aSsrKXtjb25zdCBvPWVbaV0sYT10aGlzLm1vcnBoVGFyZ2V0c1JlbGF0aXZlO2ZvcihsZXQgZT0wLGk9by5jb3VudDtlPGk7ZSsrKVhpLmZyb21CdWZmZXJBdHRyaWJ1dGUobyxlKSxhJiYoVmkuZnJvbUJ1ZmZlckF0dHJpYnV0ZSh0LGUpLFhpLmFkZChWaSkpLHI9TWF0aC5tYXgocixuLmRpc3RhbmNlVG9TcXVhcmVkKFhpKSl9dGhpcy5ib3VuZGluZ1NwaGVyZS5yYWRpdXM9TWF0aC5zcXJ0KHIpLGlzTmFOKHRoaXMuYm91bmRpbmdTcGhlcmUucmFkaXVzKSYmY29uc29sZS5lcnJvcignVEhSRUUuQnVmZmVyR2VvbWV0cnkuY29tcHV0ZUJvdW5kaW5nU3BoZXJlKCk6IENvbXB1dGVkIHJhZGl1cyBpcyBOYU4uIFRoZSBcInBvc2l0aW9uXCIgYXR0cmlidXRlIGlzIGxpa2VseSB0byBoYXZlIE5hTiB2YWx1ZXMuJyx0aGlzKX19LGNvbXB1dGVGYWNlTm9ybWFsczpmdW5jdGlvbigpe30sY29tcHV0ZVZlcnRleE5vcm1hbHM6ZnVuY3Rpb24oKXtjb25zdCB0PXRoaXMuaW5kZXgsZT10aGlzLmdldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIpO2lmKHZvaWQgMCE9PWUpe2xldCBuPXRoaXMuZ2V0QXR0cmlidXRlKFwibm9ybWFsXCIpO2lmKHZvaWQgMD09PW4pbj1uZXcgVGkobmV3IEZsb2F0MzJBcnJheSgzKmUuY291bnQpLDMpLHRoaXMuc2V0QXR0cmlidXRlKFwibm9ybWFsXCIsbik7ZWxzZSBmb3IobGV0IHQ9MCxlPW4uY291bnQ7dDxlO3QrKyluLnNldFhZWih0LDAsMCwwKTtjb25zdCByPW5ldyBLbixpPW5ldyBLbixvPW5ldyBLbixhPW5ldyBLbixzPW5ldyBLbixjPW5ldyBLbixsPW5ldyBLbix1PW5ldyBLbjtpZih0KWZvcihsZXQgaD0wLGQ9dC5jb3VudDtoPGQ7aCs9Myl7Y29uc3QgZD10LmdldFgoaCswKSxwPXQuZ2V0WChoKzEpLGY9dC5nZXRYKGgrMik7ci5mcm9tQnVmZmVyQXR0cmlidXRlKGUsZCksaS5mcm9tQnVmZmVyQXR0cmlidXRlKGUscCksby5mcm9tQnVmZmVyQXR0cmlidXRlKGUsZiksbC5zdWJWZWN0b3JzKG8saSksdS5zdWJWZWN0b3JzKHIsaSksbC5jcm9zcyh1KSxhLmZyb21CdWZmZXJBdHRyaWJ1dGUobixkKSxzLmZyb21CdWZmZXJBdHRyaWJ1dGUobixwKSxjLmZyb21CdWZmZXJBdHRyaWJ1dGUobixmKSxhLmFkZChsKSxzLmFkZChsKSxjLmFkZChsKSxuLnNldFhZWihkLGEueCxhLnksYS56KSxuLnNldFhZWihwLHMueCxzLnkscy56KSxuLnNldFhZWihmLGMueCxjLnksYy56KX1lbHNlIGZvcihsZXQgdD0wLGE9ZS5jb3VudDt0PGE7dCs9MylyLmZyb21CdWZmZXJBdHRyaWJ1dGUoZSx0KzApLGkuZnJvbUJ1ZmZlckF0dHJpYnV0ZShlLHQrMSksby5mcm9tQnVmZmVyQXR0cmlidXRlKGUsdCsyKSxsLnN1YlZlY3RvcnMobyxpKSx1LnN1YlZlY3RvcnMocixpKSxsLmNyb3NzKHUpLG4uc2V0WFlaKHQrMCxsLngsbC55LGwueiksbi5zZXRYWVoodCsxLGwueCxsLnksbC56KSxuLnNldFhZWih0KzIsbC54LGwueSxsLnopO3RoaXMubm9ybWFsaXplTm9ybWFscygpLG4ubmVlZHNVcGRhdGU9ITB9fSxtZXJnZTpmdW5jdGlvbih0LGUpe2lmKCF0fHwhdC5pc0J1ZmZlckdlb21ldHJ5KXJldHVybiB2b2lkIGNvbnNvbGUuZXJyb3IoXCJUSFJFRS5CdWZmZXJHZW9tZXRyeS5tZXJnZSgpOiBnZW9tZXRyeSBub3QgYW4gaW5zdGFuY2Ugb2YgVEhSRUUuQnVmZmVyR2VvbWV0cnkuXCIsdCk7dm9pZCAwPT09ZSYmKGU9MCxjb25zb2xlLndhcm4oXCJUSFJFRS5CdWZmZXJHZW9tZXRyeS5tZXJnZSgpOiBPdmVyd3JpdGluZyBvcmlnaW5hbCBnZW9tZXRyeSwgc3RhcnRpbmcgYXQgb2Zmc2V0PTAuIFVzZSBCdWZmZXJHZW9tZXRyeVV0aWxzLm1lcmdlQnVmZmVyR2VvbWV0cmllcygpIGZvciBsb3NzbGVzcyBtZXJnZS5cIikpO2NvbnN0IG49dGhpcy5hdHRyaWJ1dGVzO2Zvcihjb25zdCByIGluIG4pe2lmKHZvaWQgMD09PXQuYXR0cmlidXRlc1tyXSljb250aW51ZTtjb25zdCBpPW5bcl0uYXJyYXksbz10LmF0dHJpYnV0ZXNbcl0sYT1vLmFycmF5LHM9by5pdGVtU2l6ZSplLGM9TWF0aC5taW4oYS5sZW5ndGgsaS5sZW5ndGgtcyk7Zm9yKGxldCB0PTAsZT1zO3Q8Yzt0KyssZSsrKWlbZV09YVt0XX1yZXR1cm4gdGhpc30sbm9ybWFsaXplTm9ybWFsczpmdW5jdGlvbigpe2NvbnN0IHQ9dGhpcy5hdHRyaWJ1dGVzLm5vcm1hbDtmb3IobGV0IGU9MCxuPXQuY291bnQ7ZTxuO2UrKylYaS5mcm9tQnVmZmVyQXR0cmlidXRlKHQsZSksWGkubm9ybWFsaXplKCksdC5zZXRYWVooZSxYaS54LFhpLnksWGkueil9LHRvTm9uSW5kZXhlZDpmdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtjb25zdCBuPXQuYXJyYXkscj10Lml0ZW1TaXplLGk9dC5ub3JtYWxpemVkLG89bmV3IG4uY29uc3RydWN0b3IoZS5sZW5ndGgqcik7bGV0IGE9MCxzPTA7Zm9yKGxldCB0PTAsaT1lLmxlbmd0aDt0PGk7dCsrKXthPWVbdF0qcjtmb3IobGV0IHQ9MDt0PHI7dCsrKW9bcysrXT1uW2ErK119cmV0dXJuIG5ldyBUaShvLHIsaSl9aWYobnVsbD09PXRoaXMuaW5kZXgpcmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLkJ1ZmZlckdlb21ldHJ5LnRvTm9uSW5kZXhlZCgpOiBHZW9tZXRyeSBpcyBhbHJlYWR5IG5vbi1pbmRleGVkLlwiKSx0aGlzO2NvbnN0IGU9bmV3IHFpLG49dGhpcy5pbmRleC5hcnJheSxyPXRoaXMuYXR0cmlidXRlcztmb3IoY29uc3QgaSBpbiByKXtjb25zdCBvPXQocltpXSxuKTtlLnNldEF0dHJpYnV0ZShpLG8pfWNvbnN0IGk9dGhpcy5tb3JwaEF0dHJpYnV0ZXM7Zm9yKGNvbnN0IHIgaW4gaSl7Y29uc3Qgbz1bXSxhPWlbcl07Zm9yKGxldCBlPTAscj1hLmxlbmd0aDtlPHI7ZSsrKXtjb25zdCByPXQoYVtlXSxuKTtvLnB1c2gocil9ZS5tb3JwaEF0dHJpYnV0ZXNbcl09b31lLm1vcnBoVGFyZ2V0c1JlbGF0aXZlPXRoaXMubW9ycGhUYXJnZXRzUmVsYXRpdmU7Y29uc3Qgbz10aGlzLmdyb3Vwcztmb3IobGV0IHQ9MCxuPW8ubGVuZ3RoO3Q8bjt0Kyspe2NvbnN0IG49b1t0XTtlLmFkZEdyb3VwKG4uc3RhcnQsbi5jb3VudCxuLm1hdGVyaWFsSW5kZXgpfXJldHVybiBlfSx0b0pTT046ZnVuY3Rpb24oKXtjb25zdCB0PXttZXRhZGF0YTp7dmVyc2lvbjo0LjUsdHlwZTpcIkJ1ZmZlckdlb21ldHJ5XCIsZ2VuZXJhdG9yOlwiQnVmZmVyR2VvbWV0cnkudG9KU09OXCJ9fTtpZih0LnV1aWQ9dGhpcy51dWlkLHQudHlwZT10aGlzLnR5cGUsXCJcIiE9PXRoaXMubmFtZSYmKHQubmFtZT10aGlzLm5hbWUpLE9iamVjdC5rZXlzKHRoaXMudXNlckRhdGEpLmxlbmd0aD4wJiYodC51c2VyRGF0YT10aGlzLnVzZXJEYXRhKSx2b2lkIDAhPT10aGlzLnBhcmFtZXRlcnMpe2NvbnN0IGU9dGhpcy5wYXJhbWV0ZXJzO2Zvcihjb25zdCBuIGluIGUpdm9pZCAwIT09ZVtuXSYmKHRbbl09ZVtuXSk7cmV0dXJuIHR9dC5kYXRhPXthdHRyaWJ1dGVzOnt9fTtjb25zdCBlPXRoaXMuaW5kZXg7bnVsbCE9PWUmJih0LmRhdGEuaW5kZXg9e3R5cGU6ZS5hcnJheS5jb25zdHJ1Y3Rvci5uYW1lLGFycmF5OkFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGUuYXJyYXkpfSk7Y29uc3Qgbj10aGlzLmF0dHJpYnV0ZXM7Zm9yKGNvbnN0IGUgaW4gbil7Y29uc3Qgcj1uW2VdLGk9ci50b0pTT04odC5kYXRhKTtcIlwiIT09ci5uYW1lJiYoaS5uYW1lPXIubmFtZSksdC5kYXRhLmF0dHJpYnV0ZXNbZV09aX1jb25zdCByPXt9O2xldCBpPSExO2Zvcihjb25zdCBlIGluIHRoaXMubW9ycGhBdHRyaWJ1dGVzKXtjb25zdCBuPXRoaXMubW9ycGhBdHRyaWJ1dGVzW2VdLG89W107Zm9yKGxldCBlPTAscj1uLmxlbmd0aDtlPHI7ZSsrKXtjb25zdCByPW5bZV0saT1yLnRvSlNPTih0LmRhdGEpO1wiXCIhPT1yLm5hbWUmJihpLm5hbWU9ci5uYW1lKSxvLnB1c2goaSl9by5sZW5ndGg+MCYmKHJbZV09byxpPSEwKX1pJiYodC5kYXRhLm1vcnBoQXR0cmlidXRlcz1yLHQuZGF0YS5tb3JwaFRhcmdldHNSZWxhdGl2ZT10aGlzLm1vcnBoVGFyZ2V0c1JlbGF0aXZlKTtjb25zdCBvPXRoaXMuZ3JvdXBzO28ubGVuZ3RoPjAmJih0LmRhdGEuZ3JvdXBzPUpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkobykpKTtjb25zdCBhPXRoaXMuYm91bmRpbmdTcGhlcmU7cmV0dXJuIG51bGwhPT1hJiYodC5kYXRhLmJvdW5kaW5nU3BoZXJlPXtjZW50ZXI6YS5jZW50ZXIudG9BcnJheSgpLHJhZGl1czphLnJhZGl1c30pLHR9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyBxaSkuY29weSh0aGlzKX0sY29weTpmdW5jdGlvbih0KXt0aGlzLmluZGV4PW51bGwsdGhpcy5hdHRyaWJ1dGVzPXt9LHRoaXMubW9ycGhBdHRyaWJ1dGVzPXt9LHRoaXMuZ3JvdXBzPVtdLHRoaXMuYm91bmRpbmdCb3g9bnVsbCx0aGlzLmJvdW5kaW5nU3BoZXJlPW51bGw7Y29uc3QgZT17fTt0aGlzLm5hbWU9dC5uYW1lO2NvbnN0IG49dC5pbmRleDtudWxsIT09biYmdGhpcy5zZXRJbmRleChuLmNsb25lKGUpKTtjb25zdCByPXQuYXR0cmlidXRlcztmb3IoY29uc3QgdCBpbiByKXtjb25zdCBuPXJbdF07dGhpcy5zZXRBdHRyaWJ1dGUodCxuLmNsb25lKGUpKX1jb25zdCBpPXQubW9ycGhBdHRyaWJ1dGVzO2Zvcihjb25zdCB0IGluIGkpe2NvbnN0IG49W10scj1pW3RdO2ZvcihsZXQgdD0wLGk9ci5sZW5ndGg7dDxpO3QrKyluLnB1c2goclt0XS5jbG9uZShlKSk7dGhpcy5tb3JwaEF0dHJpYnV0ZXNbdF09bn10aGlzLm1vcnBoVGFyZ2V0c1JlbGF0aXZlPXQubW9ycGhUYXJnZXRzUmVsYXRpdmU7Y29uc3Qgbz10Lmdyb3Vwcztmb3IobGV0IHQ9MCxlPW8ubGVuZ3RoO3Q8ZTt0Kyspe2NvbnN0IGU9b1t0XTt0aGlzLmFkZEdyb3VwKGUuc3RhcnQsZS5jb3VudCxlLm1hdGVyaWFsSW5kZXgpfWNvbnN0IGE9dC5ib3VuZGluZ0JveDtudWxsIT09YSYmKHRoaXMuYm91bmRpbmdCb3g9YS5jbG9uZSgpKTtjb25zdCBzPXQuYm91bmRpbmdTcGhlcmU7cmV0dXJuIG51bGwhPT1zJiYodGhpcy5ib3VuZGluZ1NwaGVyZT1zLmNsb25lKCkpLHRoaXMuZHJhd1JhbmdlLnN0YXJ0PXQuZHJhd1JhbmdlLnN0YXJ0LHRoaXMuZHJhd1JhbmdlLmNvdW50PXQuZHJhd1JhbmdlLmNvdW50LHRoaXMudXNlckRhdGE9dC51c2VyRGF0YSx0aGlzfSxkaXNwb3NlOmZ1bmN0aW9uKCl7dGhpcy5kaXNwYXRjaEV2ZW50KHt0eXBlOlwiZGlzcG9zZVwifSl9fSk7Y29uc3QgWWk9bmV3IFRyLFppPW5ldyBTcixKaT1uZXcgZ3IsS2k9bmV3IEtuLFFpPW5ldyBLbiwkaT1uZXcgS24sdG89bmV3IEtuLGVvPW5ldyBLbixubz1uZXcgS24scm89bmV3IEtuLGlvPW5ldyBLbixvbz1uZXcgS24sYW89bmV3IEduLHNvPW5ldyBHbixjbz1uZXcgR24sbG89bmV3IEtuLHVvPW5ldyBLbjtmdW5jdGlvbiBobyh0LGUpe0pyLmNhbGwodGhpcyksdGhpcy50eXBlPVwiTWVzaFwiLHRoaXMuZ2VvbWV0cnk9dm9pZCAwIT09dD90Om5ldyBxaSx0aGlzLm1hdGVyaWFsPXZvaWQgMCE9PWU/ZTpuZXcgX2ksdGhpcy51cGRhdGVNb3JwaFRhcmdldHMoKX1mdW5jdGlvbiBwbyh0LGUsbixyLGksbyxhLHMpe2xldCBjO2lmKGM9ZS5zaWRlPT09bT9yLmludGVyc2VjdFRyaWFuZ2xlKGEsbyxpLCEwLHMpOnIuaW50ZXJzZWN0VHJpYW5nbGUoaSxvLGEsZS5zaWRlIT09ZyxzKSxudWxsPT09YylyZXR1cm4gbnVsbDt1by5jb3B5KHMpLHVvLmFwcGx5TWF0cml4NCh0Lm1hdHJpeFdvcmxkKTtjb25zdCBsPW4ucmF5Lm9yaWdpbi5kaXN0YW5jZVRvKHVvKTtyZXR1cm4gbDxuLm5lYXJ8fGw+bi5mYXI/bnVsbDp7ZGlzdGFuY2U6bCxwb2ludDp1by5jbG9uZSgpLG9iamVjdDp0fX1mdW5jdGlvbiBmbyh0LGUsbixyLGksbyxhLHMsYyxsLHUsaCl7S2kuZnJvbUJ1ZmZlckF0dHJpYnV0ZShpLGwpLFFpLmZyb21CdWZmZXJBdHRyaWJ1dGUoaSx1KSwkaS5mcm9tQnVmZmVyQXR0cmlidXRlKGksaCk7Y29uc3QgZD10Lm1vcnBoVGFyZ2V0SW5mbHVlbmNlcztpZihlLm1vcnBoVGFyZ2V0cyYmbyYmZCl7cm8uc2V0KDAsMCwwKSxpby5zZXQoMCwwLDApLG9vLnNldCgwLDAsMCk7Zm9yKGxldCB0PTAsZT1vLmxlbmd0aDt0PGU7dCsrKXtjb25zdCBlPWRbdF0sbj1vW3RdOzAhPT1lJiYodG8uZnJvbUJ1ZmZlckF0dHJpYnV0ZShuLGwpLGVvLmZyb21CdWZmZXJBdHRyaWJ1dGUobix1KSxuby5mcm9tQnVmZmVyQXR0cmlidXRlKG4saCksYT8ocm8uYWRkU2NhbGVkVmVjdG9yKHRvLGUpLGlvLmFkZFNjYWxlZFZlY3RvcihlbyxlKSxvby5hZGRTY2FsZWRWZWN0b3Iobm8sZSkpOihyby5hZGRTY2FsZWRWZWN0b3IodG8uc3ViKEtpKSxlKSxpby5hZGRTY2FsZWRWZWN0b3IoZW8uc3ViKFFpKSxlKSxvby5hZGRTY2FsZWRWZWN0b3Iobm8uc3ViKCRpKSxlKSkpfUtpLmFkZChybyksUWkuYWRkKGlvKSwkaS5hZGQob28pfXQuaXNTa2lubmVkTWVzaCYmKHQuYm9uZVRyYW5zZm9ybShsLEtpKSx0LmJvbmVUcmFuc2Zvcm0odSxRaSksdC5ib25lVHJhbnNmb3JtKGgsJGkpKTtjb25zdCBwPXBvKHQsZSxuLHIsS2ksUWksJGksbG8pO2lmKHApe3MmJihhby5mcm9tQnVmZmVyQXR0cmlidXRlKHMsbCksc28uZnJvbUJ1ZmZlckF0dHJpYnV0ZShzLHUpLGNvLmZyb21CdWZmZXJBdHRyaWJ1dGUocyxoKSxwLnV2PWhpLmdldFVWKGxvLEtpLFFpLCRpLGFvLHNvLGNvLG5ldyBHbikpLGMmJihhby5mcm9tQnVmZmVyQXR0cmlidXRlKGMsbCksc28uZnJvbUJ1ZmZlckF0dHJpYnV0ZShjLHUpLGNvLmZyb21CdWZmZXJBdHRyaWJ1dGUoYyxoKSxwLnV2Mj1oaS5nZXRVVihsbyxLaSxRaSwkaSxhbyxzbyxjbyxuZXcgR24pKTtjb25zdCB0PW5ldyB4aShsLHUsaCk7aGkuZ2V0Tm9ybWFsKEtpLFFpLCRpLHQubm9ybWFsKSxwLmZhY2U9dH1yZXR1cm4gcH1oby5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKEpyLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOmhvLGlzTWVzaDohMCxjb3B5OmZ1bmN0aW9uKHQpe3JldHVybiBKci5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsdCksdm9pZCAwIT09dC5tb3JwaFRhcmdldEluZmx1ZW5jZXMmJih0aGlzLm1vcnBoVGFyZ2V0SW5mbHVlbmNlcz10Lm1vcnBoVGFyZ2V0SW5mbHVlbmNlcy5zbGljZSgpKSx2b2lkIDAhPT10Lm1vcnBoVGFyZ2V0RGljdGlvbmFyeSYmKHRoaXMubW9ycGhUYXJnZXREaWN0aW9uYXJ5PU9iamVjdC5hc3NpZ24oe30sdC5tb3JwaFRhcmdldERpY3Rpb25hcnkpKSx0aGlzLm1hdGVyaWFsPXQubWF0ZXJpYWwsdGhpcy5nZW9tZXRyeT10Lmdlb21ldHJ5LHRoaXN9LHVwZGF0ZU1vcnBoVGFyZ2V0czpmdW5jdGlvbigpe2NvbnN0IHQ9dGhpcy5nZW9tZXRyeTtpZih0LmlzQnVmZmVyR2VvbWV0cnkpe2NvbnN0IGU9dC5tb3JwaEF0dHJpYnV0ZXMsbj1PYmplY3Qua2V5cyhlKTtpZihuLmxlbmd0aD4wKXtjb25zdCB0PWVbblswXV07aWYodm9pZCAwIT09dCl7dGhpcy5tb3JwaFRhcmdldEluZmx1ZW5jZXM9W10sdGhpcy5tb3JwaFRhcmdldERpY3Rpb25hcnk9e307Zm9yKGxldCBlPTAsbj10Lmxlbmd0aDtlPG47ZSsrKXtjb25zdCBuPXRbZV0ubmFtZXx8U3RyaW5nKGUpO3RoaXMubW9ycGhUYXJnZXRJbmZsdWVuY2VzLnB1c2goMCksdGhpcy5tb3JwaFRhcmdldERpY3Rpb25hcnlbbl09ZX19fX1lbHNle2NvbnN0IGU9dC5tb3JwaFRhcmdldHM7dm9pZCAwIT09ZSYmZS5sZW5ndGg+MCYmY29uc29sZS5lcnJvcihcIlRIUkVFLk1lc2gudXBkYXRlTW9ycGhUYXJnZXRzKCkgbm8gbG9uZ2VyIHN1cHBvcnRzIFRIUkVFLkdlb21ldHJ5LiBVc2UgVEhSRUUuQnVmZmVyR2VvbWV0cnkgaW5zdGVhZC5cIil9fSxyYXljYXN0OmZ1bmN0aW9uKHQsZSl7Y29uc3Qgbj10aGlzLmdlb21ldHJ5LHI9dGhpcy5tYXRlcmlhbCxpPXRoaXMubWF0cml4V29ybGQ7aWYodm9pZCAwPT09cilyZXR1cm47aWYobnVsbD09PW4uYm91bmRpbmdTcGhlcmUmJm4uY29tcHV0ZUJvdW5kaW5nU3BoZXJlKCksSmkuY29weShuLmJvdW5kaW5nU3BoZXJlKSxKaS5hcHBseU1hdHJpeDQoaSksITE9PT10LnJheS5pbnRlcnNlY3RzU3BoZXJlKEppKSlyZXR1cm47aWYoWWkuY29weShpKS5pbnZlcnQoKSxaaS5jb3B5KHQucmF5KS5hcHBseU1hdHJpeDQoWWkpLG51bGwhPT1uLmJvdW5kaW5nQm94JiYhMT09PVppLmludGVyc2VjdHNCb3gobi5ib3VuZGluZ0JveCkpcmV0dXJuO2xldCBvO2lmKG4uaXNCdWZmZXJHZW9tZXRyeSl7Y29uc3QgaT1uLmluZGV4LGE9bi5hdHRyaWJ1dGVzLnBvc2l0aW9uLHM9bi5tb3JwaEF0dHJpYnV0ZXMucG9zaXRpb24sYz1uLm1vcnBoVGFyZ2V0c1JlbGF0aXZlLGw9bi5hdHRyaWJ1dGVzLnV2LHU9bi5hdHRyaWJ1dGVzLnV2MixoPW4uZ3JvdXBzLGQ9bi5kcmF3UmFuZ2U7aWYobnVsbCE9PWkpaWYoQXJyYXkuaXNBcnJheShyKSlmb3IobGV0IG49MCxwPWgubGVuZ3RoO248cDtuKyspe2NvbnN0IHA9aFtuXSxmPXJbcC5tYXRlcmlhbEluZGV4XTtmb3IobGV0IG49TWF0aC5tYXgocC5zdGFydCxkLnN0YXJ0KSxyPU1hdGgubWluKHAuc3RhcnQrcC5jb3VudCxkLnN0YXJ0K2QuY291bnQpO248cjtuKz0zKXtjb25zdCByPWkuZ2V0WChuKSxoPWkuZ2V0WChuKzEpLGQ9aS5nZXRYKG4rMik7bz1mbyh0aGlzLGYsdCxaaSxhLHMsYyxsLHUscixoLGQpLG8mJihvLmZhY2VJbmRleD1NYXRoLmZsb29yKG4vMyksby5mYWNlLm1hdGVyaWFsSW5kZXg9cC5tYXRlcmlhbEluZGV4LGUucHVzaChvKSl9fWVsc2V7Zm9yKGxldCBuPU1hdGgubWF4KDAsZC5zdGFydCksaD1NYXRoLm1pbihpLmNvdW50LGQuc3RhcnQrZC5jb3VudCk7bjxoO24rPTMpe2NvbnN0IGg9aS5nZXRYKG4pLGQ9aS5nZXRYKG4rMSkscD1pLmdldFgobisyKTtvPWZvKHRoaXMscix0LFppLGEscyxjLGwsdSxoLGQscCksbyYmKG8uZmFjZUluZGV4PU1hdGguZmxvb3Iobi8zKSxlLnB1c2gobykpfX1lbHNlIGlmKHZvaWQgMCE9PWEpaWYoQXJyYXkuaXNBcnJheShyKSlmb3IobGV0IG49MCxpPWgubGVuZ3RoO248aTtuKyspe2NvbnN0IGk9aFtuXSxwPXJbaS5tYXRlcmlhbEluZGV4XTtmb3IobGV0IG49TWF0aC5tYXgoaS5zdGFydCxkLnN0YXJ0KSxyPU1hdGgubWluKGkuc3RhcnQraS5jb3VudCxkLnN0YXJ0K2QuY291bnQpO248cjtuKz0zKXtvPWZvKHRoaXMscCx0LFppLGEscyxjLGwsdSxuLG4rMSxuKzIpLG8mJihvLmZhY2VJbmRleD1NYXRoLmZsb29yKG4vMyksby5mYWNlLm1hdGVyaWFsSW5kZXg9aS5tYXRlcmlhbEluZGV4LGUucHVzaChvKSl9fWVsc2V7Zm9yKGxldCBuPU1hdGgubWF4KDAsZC5zdGFydCksaT1NYXRoLm1pbihhLmNvdW50LGQuc3RhcnQrZC5jb3VudCk7bjxpO24rPTMpe289Zm8odGhpcyxyLHQsWmksYSxzLGMsbCx1LG4sbisxLG4rMiksbyYmKG8uZmFjZUluZGV4PU1hdGguZmxvb3Iobi8zKSxlLnB1c2gobykpfX19ZWxzZSBpZihuLmlzR2VvbWV0cnkpe2NvbnN0IGk9QXJyYXkuaXNBcnJheShyKSxhPW4udmVydGljZXMscz1uLmZhY2VzO2xldCBjO2NvbnN0IGw9bi5mYWNlVmVydGV4VXZzWzBdO2wubGVuZ3RoPjAmJihjPWwpO2ZvcihsZXQgbj0wLGw9cy5sZW5ndGg7bjxsO24rKyl7Y29uc3QgbD1zW25dLHU9aT9yW2wubWF0ZXJpYWxJbmRleF06cjtpZih2b2lkIDA9PT11KWNvbnRpbnVlO2NvbnN0IGg9YVtsLmFdLGQ9YVtsLmJdLHA9YVtsLmNdO2lmKG89cG8odGhpcyx1LHQsWmksaCxkLHAsbG8pLG8pe2lmKGMmJmNbbl0pe2NvbnN0IHQ9Y1tuXTthby5jb3B5KHRbMF0pLHNvLmNvcHkodFsxXSksY28uY29weSh0WzJdKSxvLnV2PWhpLmdldFVWKGxvLGgsZCxwLGFvLHNvLGNvLG5ldyBHbil9by5mYWNlPWwsby5mYWNlSW5kZXg9bixlLnB1c2gobyl9fX19fSk7Y2xhc3MgbW8gZXh0ZW5kcyBxaXtjb25zdHJ1Y3Rvcih0PTEsZT0xLG49MSxyPTEsaT0xLG89MSl7c3VwZXIoKSx0aGlzLnR5cGU9XCJCb3hCdWZmZXJHZW9tZXRyeVwiLHRoaXMucGFyYW1ldGVycz17d2lkdGg6dCxoZWlnaHQ6ZSxkZXB0aDpuLHdpZHRoU2VnbWVudHM6cixoZWlnaHRTZWdtZW50czppLGRlcHRoU2VnbWVudHM6b307Y29uc3QgYT10aGlzO3I9TWF0aC5mbG9vcihyKSxpPU1hdGguZmxvb3IoaSksbz1NYXRoLmZsb29yKG8pO2NvbnN0IHM9W10sYz1bXSxsPVtdLHU9W107bGV0IGg9MCxkPTA7ZnVuY3Rpb24gcCh0LGUsbixyLGksbyxwLGYsbSxnLHYpe2NvbnN0IHk9by9tLHg9cC9nLGI9by8yLHc9cC8yLF89Zi8yLE09bSsxLFM9ZysxO2xldCBUPTAsRT0wO2NvbnN0IEE9bmV3IEtuO2ZvcihsZXQgbz0wO288UztvKyspe2NvbnN0IGE9byp4LXc7Zm9yKGxldCBzPTA7czxNO3MrKyl7Y29uc3QgaD1zKnktYjtBW3RdPWgqcixBW2VdPWEqaSxBW25dPV8sYy5wdXNoKEEueCxBLnksQS56KSxBW3RdPTAsQVtlXT0wLEFbbl09Zj4wPzE6LTEsbC5wdXNoKEEueCxBLnksQS56KSx1LnB1c2gocy9tKSx1LnB1c2goMS1vL2cpLFQrPTF9fWZvcihsZXQgdD0wO3Q8Zzt0KyspZm9yKGxldCBlPTA7ZTxtO2UrKyl7Y29uc3Qgbj1oK2UrTSp0LHI9aCtlK00qKHQrMSksaT1oKyhlKzEpK00qKHQrMSksbz1oKyhlKzEpK00qdDtzLnB1c2gobixyLG8pLHMucHVzaChyLGksbyksRSs9Nn1hLmFkZEdyb3VwKGQsRSx2KSxkKz1FLGgrPVR9cChcInpcIixcInlcIixcInhcIiwtMSwtMSxuLGUsdCxvLGksMCkscChcInpcIixcInlcIixcInhcIiwxLC0xLG4sZSwtdCxvLGksMSkscChcInhcIixcInpcIixcInlcIiwxLDEsdCxuLGUscixvLDIpLHAoXCJ4XCIsXCJ6XCIsXCJ5XCIsMSwtMSx0LG4sLWUscixvLDMpLHAoXCJ4XCIsXCJ5XCIsXCJ6XCIsMSwtMSx0LGUsbixyLGksNCkscChcInhcIixcInlcIixcInpcIiwtMSwtMSx0LGUsLW4scixpLDUpLHRoaXMuc2V0SW5kZXgocyksdGhpcy5zZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBOaShjLDMpKSx0aGlzLnNldEF0dHJpYnV0ZShcIm5vcm1hbFwiLG5ldyBOaShsLDMpKSx0aGlzLnNldEF0dHJpYnV0ZShcInV2XCIsbmV3IE5pKHUsMikpfX1mdW5jdGlvbiBnbyh0KXtjb25zdCBlPXt9O2Zvcihjb25zdCBuIGluIHQpe2Vbbl09e307Zm9yKGNvbnN0IHIgaW4gdFtuXSl7Y29uc3QgaT10W25dW3JdO2kmJihpLmlzQ29sb3J8fGkuaXNNYXRyaXgzfHxpLmlzTWF0cml4NHx8aS5pc1ZlY3RvcjJ8fGkuaXNWZWN0b3IzfHxpLmlzVmVjdG9yNHx8aS5pc1RleHR1cmUpP2Vbbl1bcl09aS5jbG9uZSgpOkFycmF5LmlzQXJyYXkoaSk/ZVtuXVtyXT1pLnNsaWNlKCk6ZVtuXVtyXT1pfX1yZXR1cm4gZX1mdW5jdGlvbiB2byh0KXtjb25zdCBlPXt9O2ZvcihsZXQgbj0wO248dC5sZW5ndGg7bisrKXtjb25zdCByPWdvKHRbbl0pO2Zvcihjb25zdCB0IGluIHIpZVt0XT1yW3RdfXJldHVybiBlfWNvbnN0IHlvPXtjbG9uZTpnbyxtZXJnZTp2b307ZnVuY3Rpb24geG8odCl7d2kuY2FsbCh0aGlzKSx0aGlzLnR5cGU9XCJTaGFkZXJNYXRlcmlhbFwiLHRoaXMuZGVmaW5lcz17fSx0aGlzLnVuaWZvcm1zPXt9LHRoaXMudmVydGV4U2hhZGVyPVwidm9pZCBtYWluKCkge1xcblxcdGdsX1Bvc2l0aW9uID0gcHJvamVjdGlvbk1hdHJpeCAqIG1vZGVsVmlld01hdHJpeCAqIHZlYzQoIHBvc2l0aW9uLCAxLjAgKTtcXG59XCIsdGhpcy5mcmFnbWVudFNoYWRlcj1cInZvaWQgbWFpbigpIHtcXG5cXHRnbF9GcmFnQ29sb3IgPSB2ZWM0KCAxLjAsIDAuMCwgMC4wLCAxLjAgKTtcXG59XCIsdGhpcy5saW5ld2lkdGg9MSx0aGlzLndpcmVmcmFtZT0hMSx0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD0xLHRoaXMuZm9nPSExLHRoaXMubGlnaHRzPSExLHRoaXMuY2xpcHBpbmc9ITEsdGhpcy5za2lubmluZz0hMSx0aGlzLm1vcnBoVGFyZ2V0cz0hMSx0aGlzLm1vcnBoTm9ybWFscz0hMSx0aGlzLmV4dGVuc2lvbnM9e2Rlcml2YXRpdmVzOiExLGZyYWdEZXB0aDohMSxkcmF3QnVmZmVyczohMSxzaGFkZXJUZXh0dXJlTE9EOiExfSx0aGlzLmRlZmF1bHRBdHRyaWJ1dGVWYWx1ZXM9e2NvbG9yOlsxLDEsMV0sdXY6WzAsMF0sdXYyOlswLDBdfSx0aGlzLmluZGV4MEF0dHJpYnV0ZU5hbWU9dm9pZCAwLHRoaXMudW5pZm9ybXNOZWVkVXBkYXRlPSExLHRoaXMuZ2xzbFZlcnNpb249bnVsbCx2b2lkIDAhPT10JiYodm9pZCAwIT09dC5hdHRyaWJ1dGVzJiZjb25zb2xlLmVycm9yKFwiVEhSRUUuU2hhZGVyTWF0ZXJpYWw6IGF0dHJpYnV0ZXMgc2hvdWxkIG5vdyBiZSBkZWZpbmVkIGluIFRIUkVFLkJ1ZmZlckdlb21ldHJ5IGluc3RlYWQuXCIpLHRoaXMuc2V0VmFsdWVzKHQpKX1mdW5jdGlvbiBibygpe0pyLmNhbGwodGhpcyksdGhpcy50eXBlPVwiQ2FtZXJhXCIsdGhpcy5tYXRyaXhXb3JsZEludmVyc2U9bmV3IFRyLHRoaXMucHJvamVjdGlvbk1hdHJpeD1uZXcgVHIsdGhpcy5wcm9qZWN0aW9uTWF0cml4SW52ZXJzZT1uZXcgVHJ9ZnVuY3Rpb24gd28odD01MCxlPTEsbj0uMSxyPTJlMyl7Ym8uY2FsbCh0aGlzKSx0aGlzLnR5cGU9XCJQZXJzcGVjdGl2ZUNhbWVyYVwiLHRoaXMuZm92PXQsdGhpcy56b29tPTEsdGhpcy5uZWFyPW4sdGhpcy5mYXI9cix0aGlzLmZvY3VzPTEwLHRoaXMuYXNwZWN0PWUsdGhpcy52aWV3PW51bGwsdGhpcy5maWxtR2F1Z2U9MzUsdGhpcy5maWxtT2Zmc2V0PTAsdGhpcy51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCl9eG8ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUod2kucHJvdG90eXBlKSx4by5wcm90b3R5cGUuY29uc3RydWN0b3I9eG8seG8ucHJvdG90eXBlLmlzU2hhZGVyTWF0ZXJpYWw9ITAseG8ucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24odCl7cmV0dXJuIHdpLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyx0KSx0aGlzLmZyYWdtZW50U2hhZGVyPXQuZnJhZ21lbnRTaGFkZXIsdGhpcy52ZXJ0ZXhTaGFkZXI9dC52ZXJ0ZXhTaGFkZXIsdGhpcy51bmlmb3Jtcz1nbyh0LnVuaWZvcm1zKSx0aGlzLmRlZmluZXM9T2JqZWN0LmFzc2lnbih7fSx0LmRlZmluZXMpLHRoaXMud2lyZWZyYW1lPXQud2lyZWZyYW1lLHRoaXMud2lyZWZyYW1lTGluZXdpZHRoPXQud2lyZWZyYW1lTGluZXdpZHRoLHRoaXMubGlnaHRzPXQubGlnaHRzLHRoaXMuY2xpcHBpbmc9dC5jbGlwcGluZyx0aGlzLnNraW5uaW5nPXQuc2tpbm5pbmcsdGhpcy5tb3JwaFRhcmdldHM9dC5tb3JwaFRhcmdldHMsdGhpcy5tb3JwaE5vcm1hbHM9dC5tb3JwaE5vcm1hbHMsdGhpcy5leHRlbnNpb25zPU9iamVjdC5hc3NpZ24oe30sdC5leHRlbnNpb25zKSx0aGlzLmdsc2xWZXJzaW9uPXQuZ2xzbFZlcnNpb24sdGhpc30seG8ucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbih0KXtjb25zdCBlPXdpLnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzLHQpO2UuZ2xzbFZlcnNpb249dGhpcy5nbHNsVmVyc2lvbixlLnVuaWZvcm1zPXt9O2Zvcihjb25zdCBuIGluIHRoaXMudW5pZm9ybXMpe2NvbnN0IHI9dGhpcy51bmlmb3Jtc1tuXS52YWx1ZTtyJiZyLmlzVGV4dHVyZT9lLnVuaWZvcm1zW25dPXt0eXBlOlwidFwiLHZhbHVlOnIudG9KU09OKHQpLnV1aWR9OnImJnIuaXNDb2xvcj9lLnVuaWZvcm1zW25dPXt0eXBlOlwiY1wiLHZhbHVlOnIuZ2V0SGV4KCl9OnImJnIuaXNWZWN0b3IyP2UudW5pZm9ybXNbbl09e3R5cGU6XCJ2MlwiLHZhbHVlOnIudG9BcnJheSgpfTpyJiZyLmlzVmVjdG9yMz9lLnVuaWZvcm1zW25dPXt0eXBlOlwidjNcIix2YWx1ZTpyLnRvQXJyYXkoKX06ciYmci5pc1ZlY3RvcjQ/ZS51bmlmb3Jtc1tuXT17dHlwZTpcInY0XCIsdmFsdWU6ci50b0FycmF5KCl9OnImJnIuaXNNYXRyaXgzP2UudW5pZm9ybXNbbl09e3R5cGU6XCJtM1wiLHZhbHVlOnIudG9BcnJheSgpfTpyJiZyLmlzTWF0cml4ND9lLnVuaWZvcm1zW25dPXt0eXBlOlwibTRcIix2YWx1ZTpyLnRvQXJyYXkoKX06ZS51bmlmb3Jtc1tuXT17dmFsdWU6cn19T2JqZWN0LmtleXModGhpcy5kZWZpbmVzKS5sZW5ndGg+MCYmKGUuZGVmaW5lcz10aGlzLmRlZmluZXMpLGUudmVydGV4U2hhZGVyPXRoaXMudmVydGV4U2hhZGVyLGUuZnJhZ21lbnRTaGFkZXI9dGhpcy5mcmFnbWVudFNoYWRlcjtjb25zdCBuPXt9O2Zvcihjb25zdCB0IGluIHRoaXMuZXh0ZW5zaW9ucykhMD09PXRoaXMuZXh0ZW5zaW9uc1t0XSYmKG5bdF09ITApO3JldHVybiBPYmplY3Qua2V5cyhuKS5sZW5ndGg+MCYmKGUuZXh0ZW5zaW9ucz1uKSxlfSxiby5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKEpyLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOmJvLGlzQ2FtZXJhOiEwLGNvcHk6ZnVuY3Rpb24odCxlKXtyZXR1cm4gSnIucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLHQsZSksdGhpcy5tYXRyaXhXb3JsZEludmVyc2UuY29weSh0Lm1hdHJpeFdvcmxkSW52ZXJzZSksdGhpcy5wcm9qZWN0aW9uTWF0cml4LmNvcHkodC5wcm9qZWN0aW9uTWF0cml4KSx0aGlzLnByb2plY3Rpb25NYXRyaXhJbnZlcnNlLmNvcHkodC5wcm9qZWN0aW9uTWF0cml4SW52ZXJzZSksdGhpc30sZ2V0V29ybGREaXJlY3Rpb246ZnVuY3Rpb24odCl7dm9pZCAwPT09dCYmKGNvbnNvbGUud2FybihcIlRIUkVFLkNhbWVyYTogLmdldFdvcmxkRGlyZWN0aW9uKCkgdGFyZ2V0IGlzIG5vdyByZXF1aXJlZFwiKSx0PW5ldyBLbiksdGhpcy51cGRhdGVXb3JsZE1hdHJpeCghMCwhMSk7Y29uc3QgZT10aGlzLm1hdHJpeFdvcmxkLmVsZW1lbnRzO3JldHVybiB0LnNldCgtZVs4XSwtZVs5XSwtZVsxMF0pLm5vcm1hbGl6ZSgpfSx1cGRhdGVNYXRyaXhXb3JsZDpmdW5jdGlvbih0KXtKci5wcm90b3R5cGUudXBkYXRlTWF0cml4V29ybGQuY2FsbCh0aGlzLHQpLHRoaXMubWF0cml4V29ybGRJbnZlcnNlLmNvcHkodGhpcy5tYXRyaXhXb3JsZCkuaW52ZXJ0KCl9LHVwZGF0ZVdvcmxkTWF0cml4OmZ1bmN0aW9uKHQsZSl7SnIucHJvdG90eXBlLnVwZGF0ZVdvcmxkTWF0cml4LmNhbGwodGhpcyx0LGUpLHRoaXMubWF0cml4V29ybGRJbnZlcnNlLmNvcHkodGhpcy5tYXRyaXhXb3JsZCkuaW52ZXJ0KCl9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKS5jb3B5KHRoaXMpfX0pLHdvLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoYm8ucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6d28saXNQZXJzcGVjdGl2ZUNhbWVyYTohMCxjb3B5OmZ1bmN0aW9uKHQsZSl7cmV0dXJuIGJvLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyx0LGUpLHRoaXMuZm92PXQuZm92LHRoaXMuem9vbT10Lnpvb20sdGhpcy5uZWFyPXQubmVhcix0aGlzLmZhcj10LmZhcix0aGlzLmZvY3VzPXQuZm9jdXMsdGhpcy5hc3BlY3Q9dC5hc3BlY3QsdGhpcy52aWV3PW51bGw9PT10LnZpZXc/bnVsbDpPYmplY3QuYXNzaWduKHt9LHQudmlldyksdGhpcy5maWxtR2F1Z2U9dC5maWxtR2F1Z2UsdGhpcy5maWxtT2Zmc2V0PXQuZmlsbU9mZnNldCx0aGlzfSxzZXRGb2NhbExlbmd0aDpmdW5jdGlvbih0KXtjb25zdCBlPS41KnRoaXMuZ2V0RmlsbUhlaWdodCgpL3Q7dGhpcy5mb3Y9Mip6bi5SQUQyREVHKk1hdGguYXRhbihlKSx0aGlzLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKX0sZ2V0Rm9jYWxMZW5ndGg6ZnVuY3Rpb24oKXtjb25zdCB0PU1hdGgudGFuKC41KnpuLkRFRzJSQUQqdGhpcy5mb3YpO3JldHVybi41KnRoaXMuZ2V0RmlsbUhlaWdodCgpL3R9LGdldEVmZmVjdGl2ZUZPVjpmdW5jdGlvbigpe3JldHVybiAyKnpuLlJBRDJERUcqTWF0aC5hdGFuKE1hdGgudGFuKC41KnpuLkRFRzJSQUQqdGhpcy5mb3YpL3RoaXMuem9vbSl9LGdldEZpbG1XaWR0aDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmZpbG1HYXVnZSpNYXRoLm1pbih0aGlzLmFzcGVjdCwxKX0sZ2V0RmlsbUhlaWdodDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmZpbG1HYXVnZS9NYXRoLm1heCh0aGlzLmFzcGVjdCwxKX0sc2V0Vmlld09mZnNldDpmdW5jdGlvbih0LGUsbixyLGksbyl7dGhpcy5hc3BlY3Q9dC9lLG51bGw9PT10aGlzLnZpZXcmJih0aGlzLnZpZXc9e2VuYWJsZWQ6ITAsZnVsbFdpZHRoOjEsZnVsbEhlaWdodDoxLG9mZnNldFg6MCxvZmZzZXRZOjAsd2lkdGg6MSxoZWlnaHQ6MX0pLHRoaXMudmlldy5lbmFibGVkPSEwLHRoaXMudmlldy5mdWxsV2lkdGg9dCx0aGlzLnZpZXcuZnVsbEhlaWdodD1lLHRoaXMudmlldy5vZmZzZXRYPW4sdGhpcy52aWV3Lm9mZnNldFk9cix0aGlzLnZpZXcud2lkdGg9aSx0aGlzLnZpZXcuaGVpZ2h0PW8sdGhpcy51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCl9LGNsZWFyVmlld09mZnNldDpmdW5jdGlvbigpe251bGwhPT10aGlzLnZpZXcmJih0aGlzLnZpZXcuZW5hYmxlZD0hMSksdGhpcy51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCl9LHVwZGF0ZVByb2plY3Rpb25NYXRyaXg6ZnVuY3Rpb24oKXtjb25zdCB0PXRoaXMubmVhcjtsZXQgZT10Kk1hdGgudGFuKC41KnpuLkRFRzJSQUQqdGhpcy5mb3YpL3RoaXMuem9vbSxuPTIqZSxyPXRoaXMuYXNwZWN0Km4saT0tLjUqcjtjb25zdCBvPXRoaXMudmlldztpZihudWxsIT09dGhpcy52aWV3JiZ0aGlzLnZpZXcuZW5hYmxlZCl7Y29uc3QgdD1vLmZ1bGxXaWR0aCxhPW8uZnVsbEhlaWdodDtpKz1vLm9mZnNldFgqci90LGUtPW8ub2Zmc2V0WSpuL2Escio9by53aWR0aC90LG4qPW8uaGVpZ2h0L2F9Y29uc3QgYT10aGlzLmZpbG1PZmZzZXQ7MCE9PWEmJihpKz10KmEvdGhpcy5nZXRGaWxtV2lkdGgoKSksdGhpcy5wcm9qZWN0aW9uTWF0cml4Lm1ha2VQZXJzcGVjdGl2ZShpLGkrcixlLGUtbix0LHRoaXMuZmFyKSx0aGlzLnByb2plY3Rpb25NYXRyaXhJbnZlcnNlLmNvcHkodGhpcy5wcm9qZWN0aW9uTWF0cml4KS5pbnZlcnQoKX0sdG9KU09OOmZ1bmN0aW9uKHQpe2NvbnN0IGU9SnIucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMsdCk7cmV0dXJuIGUub2JqZWN0LmZvdj10aGlzLmZvdixlLm9iamVjdC56b29tPXRoaXMuem9vbSxlLm9iamVjdC5uZWFyPXRoaXMubmVhcixlLm9iamVjdC5mYXI9dGhpcy5mYXIsZS5vYmplY3QuZm9jdXM9dGhpcy5mb2N1cyxlLm9iamVjdC5hc3BlY3Q9dGhpcy5hc3BlY3QsbnVsbCE9PXRoaXMudmlldyYmKGUub2JqZWN0LnZpZXc9T2JqZWN0LmFzc2lnbih7fSx0aGlzLnZpZXcpKSxlLm9iamVjdC5maWxtR2F1Z2U9dGhpcy5maWxtR2F1Z2UsZS5vYmplY3QuZmlsbU9mZnNldD10aGlzLmZpbG1PZmZzZXQsZX19KTtmdW5jdGlvbiBfbyh0LGUsbil7aWYoSnIuY2FsbCh0aGlzKSx0aGlzLnR5cGU9XCJDdWJlQ2FtZXJhXCIsITAhPT1uLmlzV2ViR0xDdWJlUmVuZGVyVGFyZ2V0KXJldHVybiB2b2lkIGNvbnNvbGUuZXJyb3IoXCJUSFJFRS5DdWJlQ2FtZXJhOiBUaGUgY29uc3RydWN0b3Igbm93IGV4cGVjdHMgYW4gaW5zdGFuY2Ugb2YgV2ViR0xDdWJlUmVuZGVyVGFyZ2V0IGFzIHRoaXJkIHBhcmFtZXRlci5cIik7dGhpcy5yZW5kZXJUYXJnZXQ9bjtjb25zdCByPW5ldyB3byg5MCwxLHQsZSk7ci5sYXllcnM9dGhpcy5sYXllcnMsci51cC5zZXQoMCwtMSwwKSxyLmxvb2tBdChuZXcgS24oMSwwLDApKSx0aGlzLmFkZChyKTtjb25zdCBpPW5ldyB3byg5MCwxLHQsZSk7aS5sYXllcnM9dGhpcy5sYXllcnMsaS51cC5zZXQoMCwtMSwwKSxpLmxvb2tBdChuZXcgS24oLTEsMCwwKSksdGhpcy5hZGQoaSk7Y29uc3Qgbz1uZXcgd28oOTAsMSx0LGUpO28ubGF5ZXJzPXRoaXMubGF5ZXJzLG8udXAuc2V0KDAsMCwxKSxvLmxvb2tBdChuZXcgS24oMCwxLDApKSx0aGlzLmFkZChvKTtjb25zdCBhPW5ldyB3byg5MCwxLHQsZSk7YS5sYXllcnM9dGhpcy5sYXllcnMsYS51cC5zZXQoMCwwLC0xKSxhLmxvb2tBdChuZXcgS24oMCwtMSwwKSksdGhpcy5hZGQoYSk7Y29uc3Qgcz1uZXcgd28oOTAsMSx0LGUpO3MubGF5ZXJzPXRoaXMubGF5ZXJzLHMudXAuc2V0KDAsLTEsMCkscy5sb29rQXQobmV3IEtuKDAsMCwxKSksdGhpcy5hZGQocyk7Y29uc3QgYz1uZXcgd28oOTAsMSx0LGUpO2MubGF5ZXJzPXRoaXMubGF5ZXJzLGMudXAuc2V0KDAsLTEsMCksYy5sb29rQXQobmV3IEtuKDAsMCwtMSkpLHRoaXMuYWRkKGMpLHRoaXMudXBkYXRlPWZ1bmN0aW9uKHQsZSl7bnVsbD09PXRoaXMucGFyZW50JiZ0aGlzLnVwZGF0ZU1hdHJpeFdvcmxkKCk7Y29uc3QgbD10LnhyLmVuYWJsZWQsdT10LmdldFJlbmRlclRhcmdldCgpO3QueHIuZW5hYmxlZD0hMTtjb25zdCBoPW4udGV4dHVyZS5nZW5lcmF0ZU1pcG1hcHM7bi50ZXh0dXJlLmdlbmVyYXRlTWlwbWFwcz0hMSx0LnNldFJlbmRlclRhcmdldChuLDApLHQucmVuZGVyKGUsciksdC5zZXRSZW5kZXJUYXJnZXQobiwxKSx0LnJlbmRlcihlLGkpLHQuc2V0UmVuZGVyVGFyZ2V0KG4sMiksdC5yZW5kZXIoZSxvKSx0LnNldFJlbmRlclRhcmdldChuLDMpLHQucmVuZGVyKGUsYSksdC5zZXRSZW5kZXJUYXJnZXQobiw0KSx0LnJlbmRlcihlLHMpLG4udGV4dHVyZS5nZW5lcmF0ZU1pcG1hcHM9aCx0LnNldFJlbmRlclRhcmdldChuLDUpLHQucmVuZGVyKGUsYyksdC5zZXRSZW5kZXJUYXJnZXQodSksdC54ci5lbmFibGVkPWx9fWZ1bmN0aW9uIE1vKHQsZSxuLHIsaSxvLGEscyxjLGwpe3Q9dm9pZCAwIT09dD90OltdLGU9dm9pZCAwIT09ZT9lOm90LGE9dm9pZCAwIT09YT9hOkZ0LFduLmNhbGwodGhpcyx0LGUsbixyLGksbyxhLHMsYyxsKSx0aGlzLmZsaXBZPSExLHRoaXMuX25lZWRzRmxpcEVudk1hcD0hMH1mdW5jdGlvbiBTbyh0LGUsbil7TnVtYmVyLmlzSW50ZWdlcihlKSYmKGNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMQ3ViZVJlbmRlclRhcmdldDogY29uc3RydWN0b3Igc2lnbmF0dXJlIGlzIG5vdyBXZWJHTEN1YmVSZW5kZXJUYXJnZXQoIHNpemUsIG9wdGlvbnMgKVwiKSxlPW4pLFluLmNhbGwodGhpcyx0LHQsZSksZT1lfHx7fSx0aGlzLnRleHR1cmU9bmV3IE1vKHZvaWQgMCxlLm1hcHBpbmcsZS53cmFwUyxlLndyYXBULGUubWFnRmlsdGVyLGUubWluRmlsdGVyLGUuZm9ybWF0LGUudHlwZSxlLmFuaXNvdHJvcHksZS5lbmNvZGluZyksdGhpcy50ZXh0dXJlLl9uZWVkc0ZsaXBFbnZNYXA9ITF9ZnVuY3Rpb24gVG8odCxlLG4scixpLG8sYSxzLGMsbCx1LGgpe1duLmNhbGwodGhpcyxudWxsLG8sYSxzLGMsbCxyLGksdSxoKSx0aGlzLmltYWdlPXtkYXRhOnR8fG51bGwsd2lkdGg6ZXx8MSxoZWlnaHQ6bnx8MX0sdGhpcy5tYWdGaWx0ZXI9dm9pZCAwIT09Yz9jOmZ0LHRoaXMubWluRmlsdGVyPXZvaWQgMCE9PWw/bDpmdCx0aGlzLmdlbmVyYXRlTWlwbWFwcz0hMSx0aGlzLmZsaXBZPSExLHRoaXMudW5wYWNrQWxpZ25tZW50PTEsdGhpcy5uZWVkc1VwZGF0ZT0hMH1fby5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShKci5wcm90b3R5cGUpLF9vLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1fbyxNby5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShXbi5wcm90b3R5cGUpLE1vLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1NbyxNby5wcm90b3R5cGUuaXNDdWJlVGV4dHVyZT0hMCxPYmplY3QuZGVmaW5lUHJvcGVydHkoTW8ucHJvdG90eXBlLFwiaW1hZ2VzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmltYWdlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5pbWFnZT10fX0pLFNvLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFluLnByb3RvdHlwZSksU28ucHJvdG90eXBlLmNvbnN0cnVjdG9yPVNvLFNvLnByb3RvdHlwZS5pc1dlYkdMQ3ViZVJlbmRlclRhcmdldD0hMCxTby5wcm90b3R5cGUuZnJvbUVxdWlyZWN0YW5ndWxhclRleHR1cmU9ZnVuY3Rpb24odCxlKXt0aGlzLnRleHR1cmUudHlwZT1lLnR5cGUsdGhpcy50ZXh0dXJlLmZvcm1hdD1VdCx0aGlzLnRleHR1cmUuZW5jb2Rpbmc9ZS5lbmNvZGluZyx0aGlzLnRleHR1cmUuZ2VuZXJhdGVNaXBtYXBzPWUuZ2VuZXJhdGVNaXBtYXBzLHRoaXMudGV4dHVyZS5taW5GaWx0ZXI9ZS5taW5GaWx0ZXIsdGhpcy50ZXh0dXJlLm1hZ0ZpbHRlcj1lLm1hZ0ZpbHRlcjtjb25zdCBuPXt1bmlmb3Jtczp7dEVxdWlyZWN0Ont2YWx1ZTpudWxsfX0sdmVydGV4U2hhZGVyOlwiXFxuXFxuXFx0XFx0XFx0dmFyeWluZyB2ZWMzIHZXb3JsZERpcmVjdGlvbjtcXG5cXG5cXHRcXHRcXHR2ZWMzIHRyYW5zZm9ybURpcmVjdGlvbiggaW4gdmVjMyBkaXIsIGluIG1hdDQgbWF0cml4ICkge1xcblxcblxcdFxcdFxcdFxcdHJldHVybiBub3JtYWxpemUoICggbWF0cml4ICogdmVjNCggZGlyLCAwLjAgKSApLnh5eiApO1xcblxcblxcdFxcdFxcdH1cXG5cXG5cXHRcXHRcXHR2b2lkIG1haW4oKSB7XFxuXFxuXFx0XFx0XFx0XFx0dldvcmxkRGlyZWN0aW9uID0gdHJhbnNmb3JtRGlyZWN0aW9uKCBwb3NpdGlvbiwgbW9kZWxNYXRyaXggKTtcXG5cXG5cXHRcXHRcXHRcXHQjaW5jbHVkZSA8YmVnaW5fdmVydGV4PlxcblxcdFxcdFxcdFxcdCNpbmNsdWRlIDxwcm9qZWN0X3ZlcnRleD5cXG5cXG5cXHRcXHRcXHR9XFxuXFx0XFx0XCIsZnJhZ21lbnRTaGFkZXI6XCJcXG5cXG5cXHRcXHRcXHR1bmlmb3JtIHNhbXBsZXIyRCB0RXF1aXJlY3Q7XFxuXFxuXFx0XFx0XFx0dmFyeWluZyB2ZWMzIHZXb3JsZERpcmVjdGlvbjtcXG5cXG5cXHRcXHRcXHQjaW5jbHVkZSA8Y29tbW9uPlxcblxcblxcdFxcdFxcdHZvaWQgbWFpbigpIHtcXG5cXG5cXHRcXHRcXHRcXHR2ZWMzIGRpcmVjdGlvbiA9IG5vcm1hbGl6ZSggdldvcmxkRGlyZWN0aW9uICk7XFxuXFxuXFx0XFx0XFx0XFx0dmVjMiBzYW1wbGVVViA9IGVxdWlyZWN0VXYoIGRpcmVjdGlvbiApO1xcblxcblxcdFxcdFxcdFxcdGdsX0ZyYWdDb2xvciA9IHRleHR1cmUyRCggdEVxdWlyZWN0LCBzYW1wbGVVViApO1xcblxcblxcdFxcdFxcdH1cXG5cXHRcXHRcIn0scj1uZXcgbW8oNSw1LDUpLGk9bmV3IHhvKHtuYW1lOlwiQ3ViZW1hcEZyb21FcXVpcmVjdFwiLHVuaWZvcm1zOmdvKG4udW5pZm9ybXMpLHZlcnRleFNoYWRlcjpuLnZlcnRleFNoYWRlcixmcmFnbWVudFNoYWRlcjpuLmZyYWdtZW50U2hhZGVyLHNpZGU6bSxibGVuZGluZzp4fSk7aS51bmlmb3Jtcy50RXF1aXJlY3QudmFsdWU9ZTtjb25zdCBvPW5ldyBobyhyLGkpLGE9ZS5taW5GaWx0ZXI7ZS5taW5GaWx0ZXI9PT1fdCYmKGUubWluRmlsdGVyPXh0KTtyZXR1cm4gbmV3IF9vKDEsMTAsdGhpcykudXBkYXRlKHQsbyksZS5taW5GaWx0ZXI9YSxvLmdlb21ldHJ5LmRpc3Bvc2UoKSxvLm1hdGVyaWFsLmRpc3Bvc2UoKSx0aGlzfSxTby5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24odCxlLG4scil7Y29uc3QgaT10LmdldFJlbmRlclRhcmdldCgpO2ZvcihsZXQgaT0wO2k8NjtpKyspdC5zZXRSZW5kZXJUYXJnZXQodGhpcyxpKSx0LmNsZWFyKGUsbixyKTt0LnNldFJlbmRlclRhcmdldChpKX0sVG8ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoV24ucHJvdG90eXBlKSxUby5wcm90b3R5cGUuY29uc3RydWN0b3I9VG8sVG8ucHJvdG90eXBlLmlzRGF0YVRleHR1cmU9ITA7Y29uc3QgRW89bmV3IGdyLEFvPW5ldyBLbjtjbGFzcyBMb3tjb25zdHJ1Y3Rvcih0LGUsbixyLGksbyl7dGhpcy5wbGFuZXM9W3ZvaWQgMCE9PXQ/dDpuZXcgdGksdm9pZCAwIT09ZT9lOm5ldyB0aSx2b2lkIDAhPT1uP246bmV3IHRpLHZvaWQgMCE9PXI/cjpuZXcgdGksdm9pZCAwIT09aT9pOm5ldyB0aSx2b2lkIDAhPT1vP286bmV3IHRpXX1zZXQodCxlLG4scixpLG8pe2NvbnN0IGE9dGhpcy5wbGFuZXM7cmV0dXJuIGFbMF0uY29weSh0KSxhWzFdLmNvcHkoZSksYVsyXS5jb3B5KG4pLGFbM10uY29weShyKSxhWzRdLmNvcHkoaSksYVs1XS5jb3B5KG8pLHRoaXN9Y2xvbmUoKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyl9Y29weSh0KXtjb25zdCBlPXRoaXMucGxhbmVzO2ZvcihsZXQgbj0wO248NjtuKyspZVtuXS5jb3B5KHQucGxhbmVzW25dKTtyZXR1cm4gdGhpc31zZXRGcm9tUHJvamVjdGlvbk1hdHJpeCh0KXtjb25zdCBlPXRoaXMucGxhbmVzLG49dC5lbGVtZW50cyxyPW5bMF0saT1uWzFdLG89blsyXSxhPW5bM10scz1uWzRdLGM9bls1XSxsPW5bNl0sdT1uWzddLGg9bls4XSxkPW5bOV0scD1uWzEwXSxmPW5bMTFdLG09blsxMl0sZz1uWzEzXSx2PW5bMTRdLHk9blsxNV07cmV0dXJuIGVbMF0uc2V0Q29tcG9uZW50cyhhLXIsdS1zLGYtaCx5LW0pLm5vcm1hbGl6ZSgpLGVbMV0uc2V0Q29tcG9uZW50cyhhK3IsdStzLGYraCx5K20pLm5vcm1hbGl6ZSgpLGVbMl0uc2V0Q29tcG9uZW50cyhhK2ksdStjLGYrZCx5K2cpLm5vcm1hbGl6ZSgpLGVbM10uc2V0Q29tcG9uZW50cyhhLWksdS1jLGYtZCx5LWcpLm5vcm1hbGl6ZSgpLGVbNF0uc2V0Q29tcG9uZW50cyhhLW8sdS1sLGYtcCx5LXYpLm5vcm1hbGl6ZSgpLGVbNV0uc2V0Q29tcG9uZW50cyhhK28sdStsLGYrcCx5K3YpLm5vcm1hbGl6ZSgpLHRoaXN9aW50ZXJzZWN0c09iamVjdCh0KXtjb25zdCBlPXQuZ2VvbWV0cnk7cmV0dXJuIG51bGw9PT1lLmJvdW5kaW5nU3BoZXJlJiZlLmNvbXB1dGVCb3VuZGluZ1NwaGVyZSgpLEVvLmNvcHkoZS5ib3VuZGluZ1NwaGVyZSkuYXBwbHlNYXRyaXg0KHQubWF0cml4V29ybGQpLHRoaXMuaW50ZXJzZWN0c1NwaGVyZShFbyl9aW50ZXJzZWN0c1Nwcml0ZSh0KXtyZXR1cm4gRW8uY2VudGVyLnNldCgwLDAsMCksRW8ucmFkaXVzPS43MDcxMDY3ODExODY1NDc2LEVvLmFwcGx5TWF0cml4NCh0Lm1hdHJpeFdvcmxkKSx0aGlzLmludGVyc2VjdHNTcGhlcmUoRW8pfWludGVyc2VjdHNTcGhlcmUodCl7Y29uc3QgZT10aGlzLnBsYW5lcyxuPXQuY2VudGVyLHI9LXQucmFkaXVzO2ZvcihsZXQgdD0wO3Q8Njt0Kyspe2lmKGVbdF0uZGlzdGFuY2VUb1BvaW50KG4pPHIpcmV0dXJuITF9cmV0dXJuITB9aW50ZXJzZWN0c0JveCh0KXtjb25zdCBlPXRoaXMucGxhbmVzO2ZvcihsZXQgbj0wO248NjtuKyspe2NvbnN0IHI9ZVtuXTtpZihBby54PXIubm9ybWFsLng+MD90Lm1heC54OnQubWluLngsQW8ueT1yLm5vcm1hbC55PjA/dC5tYXgueTp0Lm1pbi55LEFvLno9ci5ub3JtYWwuej4wP3QubWF4Lno6dC5taW4ueixyLmRpc3RhbmNlVG9Qb2ludChBbyk8MClyZXR1cm4hMX1yZXR1cm4hMH1jb250YWluc1BvaW50KHQpe2NvbnN0IGU9dGhpcy5wbGFuZXM7Zm9yKGxldCBuPTA7bjw2O24rKylpZihlW25dLmRpc3RhbmNlVG9Qb2ludCh0KTwwKXJldHVybiExO3JldHVybiEwfX1mdW5jdGlvbiBSbygpe2xldCB0PW51bGwsZT0hMSxuPW51bGwscj1udWxsO2Z1bmN0aW9uIGkoZSxvKXtuKGUsbykscj10LnJlcXVlc3RBbmltYXRpb25GcmFtZShpKX1yZXR1cm57c3RhcnQ6ZnVuY3Rpb24oKXshMCE9PWUmJm51bGwhPT1uJiYocj10LnJlcXVlc3RBbmltYXRpb25GcmFtZShpKSxlPSEwKX0sc3RvcDpmdW5jdGlvbigpe3QuY2FuY2VsQW5pbWF0aW9uRnJhbWUociksZT0hMX0sc2V0QW5pbWF0aW9uTG9vcDpmdW5jdGlvbih0KXtuPXR9LHNldENvbnRleHQ6ZnVuY3Rpb24oZSl7dD1lfX19ZnVuY3Rpb24gUG8odCxlKXtjb25zdCBuPWUuaXNXZWJHTDIscj1uZXcgV2Vha01hcDtyZXR1cm57Z2V0OmZ1bmN0aW9uKHQpe3JldHVybiB0LmlzSW50ZXJsZWF2ZWRCdWZmZXJBdHRyaWJ1dGUmJih0PXQuZGF0YSksci5nZXQodCl9LHJlbW92ZTpmdW5jdGlvbihlKXtlLmlzSW50ZXJsZWF2ZWRCdWZmZXJBdHRyaWJ1dGUmJihlPWUuZGF0YSk7Y29uc3Qgbj1yLmdldChlKTtuJiYodC5kZWxldGVCdWZmZXIobi5idWZmZXIpLHIuZGVsZXRlKGUpKX0sdXBkYXRlOmZ1bmN0aW9uKGUsaSl7aWYoZS5pc0dMQnVmZmVyQXR0cmlidXRlKXtjb25zdCB0PXIuZ2V0KGUpO3JldHVybiB2b2lkKCghdHx8dC52ZXJzaW9uPGUudmVyc2lvbikmJnIuc2V0KGUse2J1ZmZlcjplLmJ1ZmZlcix0eXBlOmUudHlwZSxieXRlc1BlckVsZW1lbnQ6ZS5lbGVtZW50U2l6ZSx2ZXJzaW9uOmUudmVyc2lvbn0pKX1lLmlzSW50ZXJsZWF2ZWRCdWZmZXJBdHRyaWJ1dGUmJihlPWUuZGF0YSk7Y29uc3Qgbz1yLmdldChlKTt2b2lkIDA9PT1vP3Iuc2V0KGUsZnVuY3Rpb24oZSxyKXtjb25zdCBpPWUuYXJyYXksbz1lLnVzYWdlLGE9dC5jcmVhdGVCdWZmZXIoKTt0LmJpbmRCdWZmZXIocixhKSx0LmJ1ZmZlckRhdGEocixpLG8pLGUub25VcGxvYWRDYWxsYmFjaygpO2xldCBzPTUxMjY7cmV0dXJuIGkgaW5zdGFuY2VvZiBGbG9hdDMyQXJyYXk/cz01MTI2OmkgaW5zdGFuY2VvZiBGbG9hdDY0QXJyYXk/Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xBdHRyaWJ1dGVzOiBVbnN1cHBvcnRlZCBkYXRhIGJ1ZmZlciBmb3JtYXQ6IEZsb2F0NjRBcnJheS5cIik6aSBpbnN0YW5jZW9mIFVpbnQxNkFycmF5P2UuaXNGbG9hdDE2QnVmZmVyQXR0cmlidXRlP24/cz01MTMxOmNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMQXR0cmlidXRlczogVXNhZ2Ugb2YgRmxvYXQxNkJ1ZmZlckF0dHJpYnV0ZSByZXF1aXJlcyBXZWJHTDIuXCIpOnM9NTEyMzppIGluc3RhbmNlb2YgSW50MTZBcnJheT9zPTUxMjI6aSBpbnN0YW5jZW9mIFVpbnQzMkFycmF5P3M9NTEyNTppIGluc3RhbmNlb2YgSW50MzJBcnJheT9zPTUxMjQ6aSBpbnN0YW5jZW9mIEludDhBcnJheT9zPTUxMjA6aSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkmJihzPTUxMjEpLHtidWZmZXI6YSx0eXBlOnMsYnl0ZXNQZXJFbGVtZW50OmkuQllURVNfUEVSX0VMRU1FTlQsdmVyc2lvbjplLnZlcnNpb259fShlLGkpKTpvLnZlcnNpb248ZS52ZXJzaW9uJiYoIWZ1bmN0aW9uKGUscixpKXtjb25zdCBvPXIuYXJyYXksYT1yLnVwZGF0ZVJhbmdlO3QuYmluZEJ1ZmZlcihpLGUpLC0xPT09YS5jb3VudD90LmJ1ZmZlclN1YkRhdGEoaSwwLG8pOihuP3QuYnVmZmVyU3ViRGF0YShpLGEub2Zmc2V0Km8uQllURVNfUEVSX0VMRU1FTlQsbyxhLm9mZnNldCxhLmNvdW50KTp0LmJ1ZmZlclN1YkRhdGEoaSxhLm9mZnNldCpvLkJZVEVTX1BFUl9FTEVNRU5ULG8uc3ViYXJyYXkoYS5vZmZzZXQsYS5vZmZzZXQrYS5jb3VudCkpLGEuY291bnQ9LTEpfShvLmJ1ZmZlcixlLGkpLG8udmVyc2lvbj1lLnZlcnNpb24pfX19Y2xhc3MgQ28gZXh0ZW5kcyBxaXtjb25zdHJ1Y3Rvcih0PTEsZT0xLG49MSxyPTEpe3N1cGVyKCksdGhpcy50eXBlPVwiUGxhbmVCdWZmZXJHZW9tZXRyeVwiLHRoaXMucGFyYW1ldGVycz17d2lkdGg6dCxoZWlnaHQ6ZSx3aWR0aFNlZ21lbnRzOm4saGVpZ2h0U2VnbWVudHM6cn07Y29uc3QgaT10LzIsbz1lLzIsYT1NYXRoLmZsb29yKG4pLHM9TWF0aC5mbG9vcihyKSxjPWErMSxsPXMrMSx1PXQvYSxoPWUvcyxkPVtdLHA9W10sZj1bXSxtPVtdO2ZvcihsZXQgdD0wO3Q8bDt0Kyspe2NvbnN0IGU9dCpoLW87Zm9yKGxldCBuPTA7bjxjO24rKyl7Y29uc3Qgcj1uKnUtaTtwLnB1c2gociwtZSwwKSxmLnB1c2goMCwwLDEpLG0ucHVzaChuL2EpLG0ucHVzaCgxLXQvcyl9fWZvcihsZXQgdD0wO3Q8czt0KyspZm9yKGxldCBlPTA7ZTxhO2UrKyl7Y29uc3Qgbj1lK2MqdCxyPWUrYyoodCsxKSxpPWUrMStjKih0KzEpLG89ZSsxK2MqdDtkLnB1c2gobixyLG8pLGQucHVzaChyLGksbyl9dGhpcy5zZXRJbmRleChkKSx0aGlzLnNldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IE5pKHAsMykpLHRoaXMuc2V0QXR0cmlidXRlKFwibm9ybWFsXCIsbmV3IE5pKGYsMykpLHRoaXMuc2V0QXR0cmlidXRlKFwidXZcIixuZXcgTmkobSwyKSl9fWNvbnN0IElvPXthbHBoYW1hcF9mcmFnbWVudDpcIiNpZmRlZiBVU0VfQUxQSEFNQVBcXG5cXHRkaWZmdXNlQ29sb3IuYSAqPSB0ZXh0dXJlMkQoIGFscGhhTWFwLCB2VXYgKS5nO1xcbiNlbmRpZlwiLGFscGhhbWFwX3BhcnNfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX0FMUEhBTUFQXFxuXFx0dW5pZm9ybSBzYW1wbGVyMkQgYWxwaGFNYXA7XFxuI2VuZGlmXCIsYWxwaGF0ZXN0X2ZyYWdtZW50OlwiI2lmZGVmIEFMUEhBVEVTVFxcblxcdGlmICggZGlmZnVzZUNvbG9yLmEgPCBBTFBIQVRFU1QgKSBkaXNjYXJkO1xcbiNlbmRpZlwiLGFvbWFwX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9BT01BUFxcblxcdGZsb2F0IGFtYmllbnRPY2NsdXNpb24gPSAoIHRleHR1cmUyRCggYW9NYXAsIHZVdjIgKS5yIC0gMS4wICkgKiBhb01hcEludGVuc2l0eSArIDEuMDtcXG5cXHRyZWZsZWN0ZWRMaWdodC5pbmRpcmVjdERpZmZ1c2UgKj0gYW1iaWVudE9jY2x1c2lvbjtcXG5cXHQjaWYgZGVmaW5lZCggVVNFX0VOVk1BUCApICYmIGRlZmluZWQoIFNUQU5EQVJEIClcXG5cXHRcXHRmbG9hdCBkb3ROViA9IHNhdHVyYXRlKCBkb3QoIGdlb21ldHJ5Lm5vcm1hbCwgZ2VvbWV0cnkudmlld0RpciApICk7XFxuXFx0XFx0cmVmbGVjdGVkTGlnaHQuaW5kaXJlY3RTcGVjdWxhciAqPSBjb21wdXRlU3BlY3VsYXJPY2NsdXNpb24oIGRvdE5WLCBhbWJpZW50T2NjbHVzaW9uLCBtYXRlcmlhbC5zcGVjdWxhclJvdWdobmVzcyApO1xcblxcdCNlbmRpZlxcbiNlbmRpZlwiLGFvbWFwX3BhcnNfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX0FPTUFQXFxuXFx0dW5pZm9ybSBzYW1wbGVyMkQgYW9NYXA7XFxuXFx0dW5pZm9ybSBmbG9hdCBhb01hcEludGVuc2l0eTtcXG4jZW5kaWZcIixiZWdpbl92ZXJ0ZXg6XCJ2ZWMzIHRyYW5zZm9ybWVkID0gdmVjMyggcG9zaXRpb24gKTtcIixiZWdpbm5vcm1hbF92ZXJ0ZXg6XCJ2ZWMzIG9iamVjdE5vcm1hbCA9IHZlYzMoIG5vcm1hbCApO1xcbiNpZmRlZiBVU0VfVEFOR0VOVFxcblxcdHZlYzMgb2JqZWN0VGFuZ2VudCA9IHZlYzMoIHRhbmdlbnQueHl6ICk7XFxuI2VuZGlmXCIsYnNkZnM6XCJ2ZWMyIGludGVncmF0ZVNwZWN1bGFyQlJERiggY29uc3QgaW4gZmxvYXQgZG90TlYsIGNvbnN0IGluIGZsb2F0IHJvdWdobmVzcyApIHtcXG5cXHRjb25zdCB2ZWM0IGMwID0gdmVjNCggLSAxLCAtIDAuMDI3NSwgLSAwLjU3MiwgMC4wMjIgKTtcXG5cXHRjb25zdCB2ZWM0IGMxID0gdmVjNCggMSwgMC4wNDI1LCAxLjA0LCAtIDAuMDQgKTtcXG5cXHR2ZWM0IHIgPSByb3VnaG5lc3MgKiBjMCArIGMxO1xcblxcdGZsb2F0IGEwMDQgPSBtaW4oIHIueCAqIHIueCwgZXhwMiggLSA5LjI4ICogZG90TlYgKSApICogci54ICsgci55O1xcblxcdHJldHVybiB2ZWMyKCAtMS4wNCwgMS4wNCApICogYTAwNCArIHIuenc7XFxufVxcbmZsb2F0IHB1bmN0dWFsTGlnaHRJbnRlbnNpdHlUb0lycmFkaWFuY2VGYWN0b3IoIGNvbnN0IGluIGZsb2F0IGxpZ2h0RGlzdGFuY2UsIGNvbnN0IGluIGZsb2F0IGN1dG9mZkRpc3RhbmNlLCBjb25zdCBpbiBmbG9hdCBkZWNheUV4cG9uZW50ICkge1xcbiNpZiBkZWZpbmVkICggUEhZU0lDQUxMWV9DT1JSRUNUX0xJR0hUUyApXFxuXFx0ZmxvYXQgZGlzdGFuY2VGYWxsb2ZmID0gMS4wIC8gbWF4KCBwb3coIGxpZ2h0RGlzdGFuY2UsIGRlY2F5RXhwb25lbnQgKSwgMC4wMSApO1xcblxcdGlmKCBjdXRvZmZEaXN0YW5jZSA+IDAuMCApIHtcXG5cXHRcXHRkaXN0YW5jZUZhbGxvZmYgKj0gcG93Miggc2F0dXJhdGUoIDEuMCAtIHBvdzQoIGxpZ2h0RGlzdGFuY2UgLyBjdXRvZmZEaXN0YW5jZSApICkgKTtcXG5cXHR9XFxuXFx0cmV0dXJuIGRpc3RhbmNlRmFsbG9mZjtcXG4jZWxzZVxcblxcdGlmKCBjdXRvZmZEaXN0YW5jZSA+IDAuMCAmJiBkZWNheUV4cG9uZW50ID4gMC4wICkge1xcblxcdFxcdHJldHVybiBwb3coIHNhdHVyYXRlKCAtbGlnaHREaXN0YW5jZSAvIGN1dG9mZkRpc3RhbmNlICsgMS4wICksIGRlY2F5RXhwb25lbnQgKTtcXG5cXHR9XFxuXFx0cmV0dXJuIDEuMDtcXG4jZW5kaWZcXG59XFxudmVjMyBCUkRGX0RpZmZ1c2VfTGFtYmVydCggY29uc3QgaW4gdmVjMyBkaWZmdXNlQ29sb3IgKSB7XFxuXFx0cmV0dXJuIFJFQ0lQUk9DQUxfUEkgKiBkaWZmdXNlQ29sb3I7XFxufVxcbnZlYzMgRl9TY2hsaWNrKCBjb25zdCBpbiB2ZWMzIHNwZWN1bGFyQ29sb3IsIGNvbnN0IGluIGZsb2F0IGRvdExIICkge1xcblxcdGZsb2F0IGZyZXNuZWwgPSBleHAyKCAoIC01LjU1NDczICogZG90TEggLSA2Ljk4MzE2ICkgKiBkb3RMSCApO1xcblxcdHJldHVybiAoIDEuMCAtIHNwZWN1bGFyQ29sb3IgKSAqIGZyZXNuZWwgKyBzcGVjdWxhckNvbG9yO1xcbn1cXG52ZWMzIEZfU2NobGlja19Sb3VnaG5lc3NEZXBlbmRlbnQoIGNvbnN0IGluIHZlYzMgRjAsIGNvbnN0IGluIGZsb2F0IGRvdE5WLCBjb25zdCBpbiBmbG9hdCByb3VnaG5lc3MgKSB7XFxuXFx0ZmxvYXQgZnJlc25lbCA9IGV4cDIoICggLTUuNTU0NzMgKiBkb3ROViAtIDYuOTgzMTYgKSAqIGRvdE5WICk7XFxuXFx0dmVjMyBGciA9IG1heCggdmVjMyggMS4wIC0gcm91Z2huZXNzICksIEYwICkgLSBGMDtcXG5cXHRyZXR1cm4gRnIgKiBmcmVzbmVsICsgRjA7XFxufVxcbmZsb2F0IEdfR0dYX1NtaXRoKCBjb25zdCBpbiBmbG9hdCBhbHBoYSwgY29uc3QgaW4gZmxvYXQgZG90TkwsIGNvbnN0IGluIGZsb2F0IGRvdE5WICkge1xcblxcdGZsb2F0IGEyID0gcG93MiggYWxwaGEgKTtcXG5cXHRmbG9hdCBnbCA9IGRvdE5MICsgc3FydCggYTIgKyAoIDEuMCAtIGEyICkgKiBwb3cyKCBkb3ROTCApICk7XFxuXFx0ZmxvYXQgZ3YgPSBkb3ROViArIHNxcnQoIGEyICsgKCAxLjAgLSBhMiApICogcG93MiggZG90TlYgKSApO1xcblxcdHJldHVybiAxLjAgLyAoIGdsICogZ3YgKTtcXG59XFxuZmxvYXQgR19HR1hfU21pdGhDb3JyZWxhdGVkKCBjb25zdCBpbiBmbG9hdCBhbHBoYSwgY29uc3QgaW4gZmxvYXQgZG90TkwsIGNvbnN0IGluIGZsb2F0IGRvdE5WICkge1xcblxcdGZsb2F0IGEyID0gcG93MiggYWxwaGEgKTtcXG5cXHRmbG9hdCBndiA9IGRvdE5MICogc3FydCggYTIgKyAoIDEuMCAtIGEyICkgKiBwb3cyKCBkb3ROViApICk7XFxuXFx0ZmxvYXQgZ2wgPSBkb3ROViAqIHNxcnQoIGEyICsgKCAxLjAgLSBhMiApICogcG93MiggZG90TkwgKSApO1xcblxcdHJldHVybiAwLjUgLyBtYXgoIGd2ICsgZ2wsIEVQU0lMT04gKTtcXG59XFxuZmxvYXQgRF9HR1goIGNvbnN0IGluIGZsb2F0IGFscGhhLCBjb25zdCBpbiBmbG9hdCBkb3ROSCApIHtcXG5cXHRmbG9hdCBhMiA9IHBvdzIoIGFscGhhICk7XFxuXFx0ZmxvYXQgZGVub20gPSBwb3cyKCBkb3ROSCApICogKCBhMiAtIDEuMCApICsgMS4wO1xcblxcdHJldHVybiBSRUNJUFJPQ0FMX1BJICogYTIgLyBwb3cyKCBkZW5vbSApO1xcbn1cXG52ZWMzIEJSREZfU3BlY3VsYXJfR0dYKCBjb25zdCBpbiBJbmNpZGVudExpZ2h0IGluY2lkZW50TGlnaHQsIGNvbnN0IGluIHZlYzMgdmlld0RpciwgY29uc3QgaW4gdmVjMyBub3JtYWwsIGNvbnN0IGluIHZlYzMgc3BlY3VsYXJDb2xvciwgY29uc3QgaW4gZmxvYXQgcm91Z2huZXNzICkge1xcblxcdGZsb2F0IGFscGhhID0gcG93Miggcm91Z2huZXNzICk7XFxuXFx0dmVjMyBoYWxmRGlyID0gbm9ybWFsaXplKCBpbmNpZGVudExpZ2h0LmRpcmVjdGlvbiArIHZpZXdEaXIgKTtcXG5cXHRmbG9hdCBkb3ROTCA9IHNhdHVyYXRlKCBkb3QoIG5vcm1hbCwgaW5jaWRlbnRMaWdodC5kaXJlY3Rpb24gKSApO1xcblxcdGZsb2F0IGRvdE5WID0gc2F0dXJhdGUoIGRvdCggbm9ybWFsLCB2aWV3RGlyICkgKTtcXG5cXHRmbG9hdCBkb3ROSCA9IHNhdHVyYXRlKCBkb3QoIG5vcm1hbCwgaGFsZkRpciApICk7XFxuXFx0ZmxvYXQgZG90TEggPSBzYXR1cmF0ZSggZG90KCBpbmNpZGVudExpZ2h0LmRpcmVjdGlvbiwgaGFsZkRpciApICk7XFxuXFx0dmVjMyBGID0gRl9TY2hsaWNrKCBzcGVjdWxhckNvbG9yLCBkb3RMSCApO1xcblxcdGZsb2F0IEcgPSBHX0dHWF9TbWl0aENvcnJlbGF0ZWQoIGFscGhhLCBkb3ROTCwgZG90TlYgKTtcXG5cXHRmbG9hdCBEID0gRF9HR1goIGFscGhhLCBkb3ROSCApO1xcblxcdHJldHVybiBGICogKCBHICogRCApO1xcbn1cXG52ZWMyIExUQ19VdiggY29uc3QgaW4gdmVjMyBOLCBjb25zdCBpbiB2ZWMzIFYsIGNvbnN0IGluIGZsb2F0IHJvdWdobmVzcyApIHtcXG5cXHRjb25zdCBmbG9hdCBMVVRfU0laRSA9IDY0LjA7XFxuXFx0Y29uc3QgZmxvYXQgTFVUX1NDQUxFID0gKCBMVVRfU0laRSAtIDEuMCApIC8gTFVUX1NJWkU7XFxuXFx0Y29uc3QgZmxvYXQgTFVUX0JJQVMgPSAwLjUgLyBMVVRfU0laRTtcXG5cXHRmbG9hdCBkb3ROViA9IHNhdHVyYXRlKCBkb3QoIE4sIFYgKSApO1xcblxcdHZlYzIgdXYgPSB2ZWMyKCByb3VnaG5lc3MsIHNxcnQoIDEuMCAtIGRvdE5WICkgKTtcXG5cXHR1diA9IHV2ICogTFVUX1NDQUxFICsgTFVUX0JJQVM7XFxuXFx0cmV0dXJuIHV2O1xcbn1cXG5mbG9hdCBMVENfQ2xpcHBlZFNwaGVyZUZvcm1GYWN0b3IoIGNvbnN0IGluIHZlYzMgZiApIHtcXG5cXHRmbG9hdCBsID0gbGVuZ3RoKCBmICk7XFxuXFx0cmV0dXJuIG1heCggKCBsICogbCArIGYueiApIC8gKCBsICsgMS4wICksIDAuMCApO1xcbn1cXG52ZWMzIExUQ19FZGdlVmVjdG9yRm9ybUZhY3RvciggY29uc3QgaW4gdmVjMyB2MSwgY29uc3QgaW4gdmVjMyB2MiApIHtcXG5cXHRmbG9hdCB4ID0gZG90KCB2MSwgdjIgKTtcXG5cXHRmbG9hdCB5ID0gYWJzKCB4ICk7XFxuXFx0ZmxvYXQgYSA9IDAuODU0Mzk4NSArICggMC40OTY1MTU1ICsgMC4wMTQ1MjA2ICogeSApICogeTtcXG5cXHRmbG9hdCBiID0gMy40MTc1OTQwICsgKCA0LjE2MTY3MjQgKyB5ICkgKiB5O1xcblxcdGZsb2F0IHYgPSBhIC8gYjtcXG5cXHRmbG9hdCB0aGV0YV9zaW50aGV0YSA9ICggeCA+IDAuMCApID8gdiA6IDAuNSAqIGludmVyc2VzcXJ0KCBtYXgoIDEuMCAtIHggKiB4LCAxZS03ICkgKSAtIHY7XFxuXFx0cmV0dXJuIGNyb3NzKCB2MSwgdjIgKSAqIHRoZXRhX3NpbnRoZXRhO1xcbn1cXG52ZWMzIExUQ19FdmFsdWF0ZSggY29uc3QgaW4gdmVjMyBOLCBjb25zdCBpbiB2ZWMzIFYsIGNvbnN0IGluIHZlYzMgUCwgY29uc3QgaW4gbWF0MyBtSW52LCBjb25zdCBpbiB2ZWMzIHJlY3RDb29yZHNbIDQgXSApIHtcXG5cXHR2ZWMzIHYxID0gcmVjdENvb3Jkc1sgMSBdIC0gcmVjdENvb3Jkc1sgMCBdO1xcblxcdHZlYzMgdjIgPSByZWN0Q29vcmRzWyAzIF0gLSByZWN0Q29vcmRzWyAwIF07XFxuXFx0dmVjMyBsaWdodE5vcm1hbCA9IGNyb3NzKCB2MSwgdjIgKTtcXG5cXHRpZiggZG90KCBsaWdodE5vcm1hbCwgUCAtIHJlY3RDb29yZHNbIDAgXSApIDwgMC4wICkgcmV0dXJuIHZlYzMoIDAuMCApO1xcblxcdHZlYzMgVDEsIFQyO1xcblxcdFQxID0gbm9ybWFsaXplKCBWIC0gTiAqIGRvdCggViwgTiApICk7XFxuXFx0VDIgPSAtIGNyb3NzKCBOLCBUMSApO1xcblxcdG1hdDMgbWF0ID0gbUludiAqIHRyYW5zcG9zZU1hdDMoIG1hdDMoIFQxLCBUMiwgTiApICk7XFxuXFx0dmVjMyBjb29yZHNbIDQgXTtcXG5cXHRjb29yZHNbIDAgXSA9IG1hdCAqICggcmVjdENvb3Jkc1sgMCBdIC0gUCApO1xcblxcdGNvb3Jkc1sgMSBdID0gbWF0ICogKCByZWN0Q29vcmRzWyAxIF0gLSBQICk7XFxuXFx0Y29vcmRzWyAyIF0gPSBtYXQgKiAoIHJlY3RDb29yZHNbIDIgXSAtIFAgKTtcXG5cXHRjb29yZHNbIDMgXSA9IG1hdCAqICggcmVjdENvb3Jkc1sgMyBdIC0gUCApO1xcblxcdGNvb3Jkc1sgMCBdID0gbm9ybWFsaXplKCBjb29yZHNbIDAgXSApO1xcblxcdGNvb3Jkc1sgMSBdID0gbm9ybWFsaXplKCBjb29yZHNbIDEgXSApO1xcblxcdGNvb3Jkc1sgMiBdID0gbm9ybWFsaXplKCBjb29yZHNbIDIgXSApO1xcblxcdGNvb3Jkc1sgMyBdID0gbm9ybWFsaXplKCBjb29yZHNbIDMgXSApO1xcblxcdHZlYzMgdmVjdG9yRm9ybUZhY3RvciA9IHZlYzMoIDAuMCApO1xcblxcdHZlY3RvckZvcm1GYWN0b3IgKz0gTFRDX0VkZ2VWZWN0b3JGb3JtRmFjdG9yKCBjb29yZHNbIDAgXSwgY29vcmRzWyAxIF0gKTtcXG5cXHR2ZWN0b3JGb3JtRmFjdG9yICs9IExUQ19FZGdlVmVjdG9yRm9ybUZhY3RvciggY29vcmRzWyAxIF0sIGNvb3Jkc1sgMiBdICk7XFxuXFx0dmVjdG9yRm9ybUZhY3RvciArPSBMVENfRWRnZVZlY3RvckZvcm1GYWN0b3IoIGNvb3Jkc1sgMiBdLCBjb29yZHNbIDMgXSApO1xcblxcdHZlY3RvckZvcm1GYWN0b3IgKz0gTFRDX0VkZ2VWZWN0b3JGb3JtRmFjdG9yKCBjb29yZHNbIDMgXSwgY29vcmRzWyAwIF0gKTtcXG5cXHRmbG9hdCByZXN1bHQgPSBMVENfQ2xpcHBlZFNwaGVyZUZvcm1GYWN0b3IoIHZlY3RvckZvcm1GYWN0b3IgKTtcXG5cXHRyZXR1cm4gdmVjMyggcmVzdWx0ICk7XFxufVxcbnZlYzMgQlJERl9TcGVjdWxhcl9HR1hfRW52aXJvbm1lbnQoIGNvbnN0IGluIHZlYzMgdmlld0RpciwgY29uc3QgaW4gdmVjMyBub3JtYWwsIGNvbnN0IGluIHZlYzMgc3BlY3VsYXJDb2xvciwgY29uc3QgaW4gZmxvYXQgcm91Z2huZXNzICkge1xcblxcdGZsb2F0IGRvdE5WID0gc2F0dXJhdGUoIGRvdCggbm9ybWFsLCB2aWV3RGlyICkgKTtcXG5cXHR2ZWMyIGJyZGYgPSBpbnRlZ3JhdGVTcGVjdWxhckJSREYoIGRvdE5WLCByb3VnaG5lc3MgKTtcXG5cXHRyZXR1cm4gc3BlY3VsYXJDb2xvciAqIGJyZGYueCArIGJyZGYueTtcXG59XFxudm9pZCBCUkRGX1NwZWN1bGFyX011bHRpc2NhdHRlcmluZ19FbnZpcm9ubWVudCggY29uc3QgaW4gR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeSwgY29uc3QgaW4gdmVjMyBzcGVjdWxhckNvbG9yLCBjb25zdCBpbiBmbG9hdCByb3VnaG5lc3MsIGlub3V0IHZlYzMgc2luZ2xlU2NhdHRlciwgaW5vdXQgdmVjMyBtdWx0aVNjYXR0ZXIgKSB7XFxuXFx0ZmxvYXQgZG90TlYgPSBzYXR1cmF0ZSggZG90KCBnZW9tZXRyeS5ub3JtYWwsIGdlb21ldHJ5LnZpZXdEaXIgKSApO1xcblxcdHZlYzMgRiA9IEZfU2NobGlja19Sb3VnaG5lc3NEZXBlbmRlbnQoIHNwZWN1bGFyQ29sb3IsIGRvdE5WLCByb3VnaG5lc3MgKTtcXG5cXHR2ZWMyIGJyZGYgPSBpbnRlZ3JhdGVTcGVjdWxhckJSREYoIGRvdE5WLCByb3VnaG5lc3MgKTtcXG5cXHR2ZWMzIEZzc0VzcyA9IEYgKiBicmRmLnggKyBicmRmLnk7XFxuXFx0ZmxvYXQgRXNzID0gYnJkZi54ICsgYnJkZi55O1xcblxcdGZsb2F0IEVtcyA9IDEuMCAtIEVzcztcXG5cXHR2ZWMzIEZhdmcgPSBzcGVjdWxhckNvbG9yICsgKCAxLjAgLSBzcGVjdWxhckNvbG9yICkgKiAwLjA0NzYxOTtcXHR2ZWMzIEZtcyA9IEZzc0VzcyAqIEZhdmcgLyAoIDEuMCAtIEVtcyAqIEZhdmcgKTtcXG5cXHRzaW5nbGVTY2F0dGVyICs9IEZzc0VzcztcXG5cXHRtdWx0aVNjYXR0ZXIgKz0gRm1zICogRW1zO1xcbn1cXG5mbG9hdCBHX0JsaW5uUGhvbmdfSW1wbGljaXQoICkge1xcblxcdHJldHVybiAwLjI1O1xcbn1cXG5mbG9hdCBEX0JsaW5uUGhvbmcoIGNvbnN0IGluIGZsb2F0IHNoaW5pbmVzcywgY29uc3QgaW4gZmxvYXQgZG90TkggKSB7XFxuXFx0cmV0dXJuIFJFQ0lQUk9DQUxfUEkgKiAoIHNoaW5pbmVzcyAqIDAuNSArIDEuMCApICogcG93KCBkb3ROSCwgc2hpbmluZXNzICk7XFxufVxcbnZlYzMgQlJERl9TcGVjdWxhcl9CbGlublBob25nKCBjb25zdCBpbiBJbmNpZGVudExpZ2h0IGluY2lkZW50TGlnaHQsIGNvbnN0IGluIEdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnksIGNvbnN0IGluIHZlYzMgc3BlY3VsYXJDb2xvciwgY29uc3QgaW4gZmxvYXQgc2hpbmluZXNzICkge1xcblxcdHZlYzMgaGFsZkRpciA9IG5vcm1hbGl6ZSggaW5jaWRlbnRMaWdodC5kaXJlY3Rpb24gKyBnZW9tZXRyeS52aWV3RGlyICk7XFxuXFx0ZmxvYXQgZG90TkggPSBzYXR1cmF0ZSggZG90KCBnZW9tZXRyeS5ub3JtYWwsIGhhbGZEaXIgKSApO1xcblxcdGZsb2F0IGRvdExIID0gc2F0dXJhdGUoIGRvdCggaW5jaWRlbnRMaWdodC5kaXJlY3Rpb24sIGhhbGZEaXIgKSApO1xcblxcdHZlYzMgRiA9IEZfU2NobGljayggc3BlY3VsYXJDb2xvciwgZG90TEggKTtcXG5cXHRmbG9hdCBHID0gR19CbGlublBob25nX0ltcGxpY2l0KCApO1xcblxcdGZsb2F0IEQgPSBEX0JsaW5uUGhvbmcoIHNoaW5pbmVzcywgZG90TkggKTtcXG5cXHRyZXR1cm4gRiAqICggRyAqIEQgKTtcXG59XFxuZmxvYXQgR0dYUm91Z2huZXNzVG9CbGlubkV4cG9uZW50KCBjb25zdCBpbiBmbG9hdCBnZ3hSb3VnaG5lc3MgKSB7XFxuXFx0cmV0dXJuICggMi4wIC8gcG93MiggZ2d4Um91Z2huZXNzICsgMC4wMDAxICkgLSAyLjAgKTtcXG59XFxuZmxvYXQgQmxpbm5FeHBvbmVudFRvR0dYUm91Z2huZXNzKCBjb25zdCBpbiBmbG9hdCBibGlubkV4cG9uZW50ICkge1xcblxcdHJldHVybiBzcXJ0KCAyLjAgLyAoIGJsaW5uRXhwb25lbnQgKyAyLjAgKSApO1xcbn1cXG4jaWYgZGVmaW5lZCggVVNFX1NIRUVOIClcXG5mbG9hdCBEX0NoYXJsaWUoZmxvYXQgcm91Z2huZXNzLCBmbG9hdCBOb0gpIHtcXG5cXHRmbG9hdCBpbnZBbHBoYSA9IDEuMCAvIHJvdWdobmVzcztcXG5cXHRmbG9hdCBjb3MyaCA9IE5vSCAqIE5vSDtcXG5cXHRmbG9hdCBzaW4yaCA9IG1heCgxLjAgLSBjb3MyaCwgMC4wMDc4MTI1KTtcXHRyZXR1cm4gKDIuMCArIGludkFscGhhKSAqIHBvdyhzaW4yaCwgaW52QWxwaGEgKiAwLjUpIC8gKDIuMCAqIFBJKTtcXG59XFxuZmxvYXQgVl9OZXViZWx0KGZsb2F0IE5vViwgZmxvYXQgTm9MKSB7XFxuXFx0cmV0dXJuIHNhdHVyYXRlKDEuMCAvICg0LjAgKiAoTm9MICsgTm9WIC0gTm9MICogTm9WKSkpO1xcbn1cXG52ZWMzIEJSREZfU3BlY3VsYXJfU2hlZW4oIGNvbnN0IGluIGZsb2F0IHJvdWdobmVzcywgY29uc3QgaW4gdmVjMyBMLCBjb25zdCBpbiBHZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5LCB2ZWMzIHNwZWN1bGFyQ29sb3IgKSB7XFxuXFx0dmVjMyBOID0gZ2VvbWV0cnkubm9ybWFsO1xcblxcdHZlYzMgViA9IGdlb21ldHJ5LnZpZXdEaXI7XFxuXFx0dmVjMyBIID0gbm9ybWFsaXplKCBWICsgTCApO1xcblxcdGZsb2F0IGRvdE5IID0gc2F0dXJhdGUoIGRvdCggTiwgSCApICk7XFxuXFx0cmV0dXJuIHNwZWN1bGFyQ29sb3IgKiBEX0NoYXJsaWUoIHJvdWdobmVzcywgZG90TkggKSAqIFZfTmV1YmVsdCggZG90KE4sIFYpLCBkb3QoTiwgTCkgKTtcXG59XFxuI2VuZGlmXCIsYnVtcG1hcF9wYXJzX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9CVU1QTUFQXFxuXFx0dW5pZm9ybSBzYW1wbGVyMkQgYnVtcE1hcDtcXG5cXHR1bmlmb3JtIGZsb2F0IGJ1bXBTY2FsZTtcXG5cXHR2ZWMyIGRIZHh5X2Z3ZCgpIHtcXG5cXHRcXHR2ZWMyIGRTVGR4ID0gZEZkeCggdlV2ICk7XFxuXFx0XFx0dmVjMiBkU1RkeSA9IGRGZHkoIHZVdiApO1xcblxcdFxcdGZsb2F0IEhsbCA9IGJ1bXBTY2FsZSAqIHRleHR1cmUyRCggYnVtcE1hcCwgdlV2ICkueDtcXG5cXHRcXHRmbG9hdCBkQnggPSBidW1wU2NhbGUgKiB0ZXh0dXJlMkQoIGJ1bXBNYXAsIHZVdiArIGRTVGR4ICkueCAtIEhsbDtcXG5cXHRcXHRmbG9hdCBkQnkgPSBidW1wU2NhbGUgKiB0ZXh0dXJlMkQoIGJ1bXBNYXAsIHZVdiArIGRTVGR5ICkueCAtIEhsbDtcXG5cXHRcXHRyZXR1cm4gdmVjMiggZEJ4LCBkQnkgKTtcXG5cXHR9XFxuXFx0dmVjMyBwZXJ0dXJiTm9ybWFsQXJiKCB2ZWMzIHN1cmZfcG9zLCB2ZWMzIHN1cmZfbm9ybSwgdmVjMiBkSGR4eSApIHtcXG5cXHRcXHR2ZWMzIHZTaWdtYVggPSB2ZWMzKCBkRmR4KCBzdXJmX3Bvcy54ICksIGRGZHgoIHN1cmZfcG9zLnkgKSwgZEZkeCggc3VyZl9wb3MueiApICk7XFxuXFx0XFx0dmVjMyB2U2lnbWFZID0gdmVjMyggZEZkeSggc3VyZl9wb3MueCApLCBkRmR5KCBzdXJmX3Bvcy55ICksIGRGZHkoIHN1cmZfcG9zLnogKSApO1xcblxcdFxcdHZlYzMgdk4gPSBzdXJmX25vcm07XFxuXFx0XFx0dmVjMyBSMSA9IGNyb3NzKCB2U2lnbWFZLCB2TiApO1xcblxcdFxcdHZlYzMgUjIgPSBjcm9zcyggdk4sIHZTaWdtYVggKTtcXG5cXHRcXHRmbG9hdCBmRGV0ID0gZG90KCB2U2lnbWFYLCBSMSApO1xcblxcdFxcdGZEZXQgKj0gKCBmbG9hdCggZ2xfRnJvbnRGYWNpbmcgKSAqIDIuMCAtIDEuMCApO1xcblxcdFxcdHZlYzMgdkdyYWQgPSBzaWduKCBmRGV0ICkgKiAoIGRIZHh5LnggKiBSMSArIGRIZHh5LnkgKiBSMiApO1xcblxcdFxcdHJldHVybiBub3JtYWxpemUoIGFicyggZkRldCApICogc3VyZl9ub3JtIC0gdkdyYWQgKTtcXG5cXHR9XFxuI2VuZGlmXCIsY2xpcHBpbmdfcGxhbmVzX2ZyYWdtZW50OlwiI2lmIE5VTV9DTElQUElOR19QTEFORVMgPiAwXFxuXFx0dmVjNCBwbGFuZTtcXG5cXHQjcHJhZ21hIHVucm9sbF9sb29wX3N0YXJ0XFxuXFx0Zm9yICggaW50IGkgPSAwOyBpIDwgVU5JT05fQ0xJUFBJTkdfUExBTkVTOyBpICsrICkge1xcblxcdFxcdHBsYW5lID0gY2xpcHBpbmdQbGFuZXNbIGkgXTtcXG5cXHRcXHRpZiAoIGRvdCggdkNsaXBQb3NpdGlvbiwgcGxhbmUueHl6ICkgPiBwbGFuZS53ICkgZGlzY2FyZDtcXG5cXHR9XFxuXFx0I3ByYWdtYSB1bnJvbGxfbG9vcF9lbmRcXG5cXHQjaWYgVU5JT05fQ0xJUFBJTkdfUExBTkVTIDwgTlVNX0NMSVBQSU5HX1BMQU5FU1xcblxcdFxcdGJvb2wgY2xpcHBlZCA9IHRydWU7XFxuXFx0XFx0I3ByYWdtYSB1bnJvbGxfbG9vcF9zdGFydFxcblxcdFxcdGZvciAoIGludCBpID0gVU5JT05fQ0xJUFBJTkdfUExBTkVTOyBpIDwgTlVNX0NMSVBQSU5HX1BMQU5FUzsgaSArKyApIHtcXG5cXHRcXHRcXHRwbGFuZSA9IGNsaXBwaW5nUGxhbmVzWyBpIF07XFxuXFx0XFx0XFx0Y2xpcHBlZCA9ICggZG90KCB2Q2xpcFBvc2l0aW9uLCBwbGFuZS54eXogKSA+IHBsYW5lLncgKSAmJiBjbGlwcGVkO1xcblxcdFxcdH1cXG5cXHRcXHQjcHJhZ21hIHVucm9sbF9sb29wX2VuZFxcblxcdFxcdGlmICggY2xpcHBlZCApIGRpc2NhcmQ7XFxuXFx0I2VuZGlmXFxuI2VuZGlmXCIsY2xpcHBpbmdfcGxhbmVzX3BhcnNfZnJhZ21lbnQ6XCIjaWYgTlVNX0NMSVBQSU5HX1BMQU5FUyA+IDBcXG5cXHR2YXJ5aW5nIHZlYzMgdkNsaXBQb3NpdGlvbjtcXG5cXHR1bmlmb3JtIHZlYzQgY2xpcHBpbmdQbGFuZXNbIE5VTV9DTElQUElOR19QTEFORVMgXTtcXG4jZW5kaWZcIixjbGlwcGluZ19wbGFuZXNfcGFyc192ZXJ0ZXg6XCIjaWYgTlVNX0NMSVBQSU5HX1BMQU5FUyA+IDBcXG5cXHR2YXJ5aW5nIHZlYzMgdkNsaXBQb3NpdGlvbjtcXG4jZW5kaWZcIixjbGlwcGluZ19wbGFuZXNfdmVydGV4OlwiI2lmIE5VTV9DTElQUElOR19QTEFORVMgPiAwXFxuXFx0dkNsaXBQb3NpdGlvbiA9IC0gbXZQb3NpdGlvbi54eXo7XFxuI2VuZGlmXCIsY29sb3JfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX0NPTE9SXFxuXFx0ZGlmZnVzZUNvbG9yLnJnYiAqPSB2Q29sb3I7XFxuI2VuZGlmXCIsY29sb3JfcGFyc19mcmFnbWVudDpcIiNpZmRlZiBVU0VfQ09MT1JcXG5cXHR2YXJ5aW5nIHZlYzMgdkNvbG9yO1xcbiNlbmRpZlwiLGNvbG9yX3BhcnNfdmVydGV4OlwiI2lmIGRlZmluZWQoIFVTRV9DT0xPUiApIHx8IGRlZmluZWQoIFVTRV9JTlNUQU5DSU5HX0NPTE9SIClcXG5cXHR2YXJ5aW5nIHZlYzMgdkNvbG9yO1xcbiNlbmRpZlwiLGNvbG9yX3ZlcnRleDpcIiNpZiBkZWZpbmVkKCBVU0VfQ09MT1IgKSB8fCBkZWZpbmVkKCBVU0VfSU5TVEFOQ0lOR19DT0xPUiApXFxuXFx0dkNvbG9yID0gdmVjMyggMS4wICk7XFxuI2VuZGlmXFxuI2lmZGVmIFVTRV9DT0xPUlxcblxcdHZDb2xvci54eXogKj0gY29sb3IueHl6O1xcbiNlbmRpZlxcbiNpZmRlZiBVU0VfSU5TVEFOQ0lOR19DT0xPUlxcblxcdHZDb2xvci54eXogKj0gaW5zdGFuY2VDb2xvci54eXo7XFxuI2VuZGlmXCIsY29tbW9uOlwiI2RlZmluZSBQSSAzLjE0MTU5MjY1MzU4OTc5M1xcbiNkZWZpbmUgUEkyIDYuMjgzMTg1MzA3MTc5NTg2XFxuI2RlZmluZSBQSV9IQUxGIDEuNTcwNzk2MzI2Nzk0ODk2NlxcbiNkZWZpbmUgUkVDSVBST0NBTF9QSSAwLjMxODMwOTg4NjE4Mzc5MDdcXG4jZGVmaW5lIFJFQ0lQUk9DQUxfUEkyIDAuMTU5MTU0OTQzMDkxODk1MzVcXG4jZGVmaW5lIEVQU0lMT04gMWUtNlxcbiNpZm5kZWYgc2F0dXJhdGVcXG4jZGVmaW5lIHNhdHVyYXRlKGEpIGNsYW1wKCBhLCAwLjAsIDEuMCApXFxuI2VuZGlmXFxuI2RlZmluZSB3aGl0ZUNvbXBsZW1lbnQoYSkgKCAxLjAgLSBzYXR1cmF0ZSggYSApIClcXG5mbG9hdCBwb3cyKCBjb25zdCBpbiBmbG9hdCB4ICkgeyByZXR1cm4geCp4OyB9XFxuZmxvYXQgcG93MyggY29uc3QgaW4gZmxvYXQgeCApIHsgcmV0dXJuIHgqeCp4OyB9XFxuZmxvYXQgcG93NCggY29uc3QgaW4gZmxvYXQgeCApIHsgZmxvYXQgeDIgPSB4Kng7IHJldHVybiB4Mip4MjsgfVxcbmZsb2F0IGF2ZXJhZ2UoIGNvbnN0IGluIHZlYzMgY29sb3IgKSB7IHJldHVybiBkb3QoIGNvbG9yLCB2ZWMzKCAwLjMzMzMgKSApOyB9XFxuaGlnaHAgZmxvYXQgcmFuZCggY29uc3QgaW4gdmVjMiB1diApIHtcXG5cXHRjb25zdCBoaWdocCBmbG9hdCBhID0gMTIuOTg5OCwgYiA9IDc4LjIzMywgYyA9IDQzNzU4LjU0NTM7XFxuXFx0aGlnaHAgZmxvYXQgZHQgPSBkb3QoIHV2Lnh5LCB2ZWMyKCBhLGIgKSApLCBzbiA9IG1vZCggZHQsIFBJICk7XFxuXFx0cmV0dXJuIGZyYWN0KHNpbihzbikgKiBjKTtcXG59XFxuI2lmZGVmIEhJR0hfUFJFQ0lTSU9OXFxuXFx0ZmxvYXQgcHJlY2lzaW9uU2FmZUxlbmd0aCggdmVjMyB2ICkgeyByZXR1cm4gbGVuZ3RoKCB2ICk7IH1cXG4jZWxzZVxcblxcdGZsb2F0IG1heDMoIHZlYzMgdiApIHsgcmV0dXJuIG1heCggbWF4KCB2LngsIHYueSApLCB2LnogKTsgfVxcblxcdGZsb2F0IHByZWNpc2lvblNhZmVMZW5ndGgoIHZlYzMgdiApIHtcXG5cXHRcXHRmbG9hdCBtYXhDb21wb25lbnQgPSBtYXgzKCBhYnMoIHYgKSApO1xcblxcdFxcdHJldHVybiBsZW5ndGgoIHYgLyBtYXhDb21wb25lbnQgKSAqIG1heENvbXBvbmVudDtcXG5cXHR9XFxuI2VuZGlmXFxuc3RydWN0IEluY2lkZW50TGlnaHQge1xcblxcdHZlYzMgY29sb3I7XFxuXFx0dmVjMyBkaXJlY3Rpb247XFxuXFx0Ym9vbCB2aXNpYmxlO1xcbn07XFxuc3RydWN0IFJlZmxlY3RlZExpZ2h0IHtcXG5cXHR2ZWMzIGRpcmVjdERpZmZ1c2U7XFxuXFx0dmVjMyBkaXJlY3RTcGVjdWxhcjtcXG5cXHR2ZWMzIGluZGlyZWN0RGlmZnVzZTtcXG5cXHR2ZWMzIGluZGlyZWN0U3BlY3VsYXI7XFxufTtcXG5zdHJ1Y3QgR2VvbWV0cmljQ29udGV4dCB7XFxuXFx0dmVjMyBwb3NpdGlvbjtcXG5cXHR2ZWMzIG5vcm1hbDtcXG5cXHR2ZWMzIHZpZXdEaXI7XFxuI2lmZGVmIENMRUFSQ09BVFxcblxcdHZlYzMgY2xlYXJjb2F0Tm9ybWFsO1xcbiNlbmRpZlxcbn07XFxudmVjMyB0cmFuc2Zvcm1EaXJlY3Rpb24oIGluIHZlYzMgZGlyLCBpbiBtYXQ0IG1hdHJpeCApIHtcXG5cXHRyZXR1cm4gbm9ybWFsaXplKCAoIG1hdHJpeCAqIHZlYzQoIGRpciwgMC4wICkgKS54eXogKTtcXG59XFxudmVjMyBpbnZlcnNlVHJhbnNmb3JtRGlyZWN0aW9uKCBpbiB2ZWMzIGRpciwgaW4gbWF0NCBtYXRyaXggKSB7XFxuXFx0cmV0dXJuIG5vcm1hbGl6ZSggKCB2ZWM0KCBkaXIsIDAuMCApICogbWF0cml4ICkueHl6ICk7XFxufVxcbnZlYzMgcHJvamVjdE9uUGxhbmUoaW4gdmVjMyBwb2ludCwgaW4gdmVjMyBwb2ludE9uUGxhbmUsIGluIHZlYzMgcGxhbmVOb3JtYWwgKSB7XFxuXFx0ZmxvYXQgZGlzdGFuY2UgPSBkb3QoIHBsYW5lTm9ybWFsLCBwb2ludCAtIHBvaW50T25QbGFuZSApO1xcblxcdHJldHVybiAtIGRpc3RhbmNlICogcGxhbmVOb3JtYWwgKyBwb2ludDtcXG59XFxuZmxvYXQgc2lkZU9mUGxhbmUoIGluIHZlYzMgcG9pbnQsIGluIHZlYzMgcG9pbnRPblBsYW5lLCBpbiB2ZWMzIHBsYW5lTm9ybWFsICkge1xcblxcdHJldHVybiBzaWduKCBkb3QoIHBvaW50IC0gcG9pbnRPblBsYW5lLCBwbGFuZU5vcm1hbCApICk7XFxufVxcbnZlYzMgbGluZVBsYW5lSW50ZXJzZWN0KCBpbiB2ZWMzIHBvaW50T25MaW5lLCBpbiB2ZWMzIGxpbmVEaXJlY3Rpb24sIGluIHZlYzMgcG9pbnRPblBsYW5lLCBpbiB2ZWMzIHBsYW5lTm9ybWFsICkge1xcblxcdHJldHVybiBsaW5lRGlyZWN0aW9uICogKCBkb3QoIHBsYW5lTm9ybWFsLCBwb2ludE9uUGxhbmUgLSBwb2ludE9uTGluZSApIC8gZG90KCBwbGFuZU5vcm1hbCwgbGluZURpcmVjdGlvbiApICkgKyBwb2ludE9uTGluZTtcXG59XFxubWF0MyB0cmFuc3Bvc2VNYXQzKCBjb25zdCBpbiBtYXQzIG0gKSB7XFxuXFx0bWF0MyB0bXA7XFxuXFx0dG1wWyAwIF0gPSB2ZWMzKCBtWyAwIF0ueCwgbVsgMSBdLngsIG1bIDIgXS54ICk7XFxuXFx0dG1wWyAxIF0gPSB2ZWMzKCBtWyAwIF0ueSwgbVsgMSBdLnksIG1bIDIgXS55ICk7XFxuXFx0dG1wWyAyIF0gPSB2ZWMzKCBtWyAwIF0ueiwgbVsgMSBdLnosIG1bIDIgXS56ICk7XFxuXFx0cmV0dXJuIHRtcDtcXG59XFxuZmxvYXQgbGluZWFyVG9SZWxhdGl2ZUx1bWluYW5jZSggY29uc3QgaW4gdmVjMyBjb2xvciApIHtcXG5cXHR2ZWMzIHdlaWdodHMgPSB2ZWMzKCAwLjIxMjYsIDAuNzE1MiwgMC4wNzIyICk7XFxuXFx0cmV0dXJuIGRvdCggd2VpZ2h0cywgY29sb3IucmdiICk7XFxufVxcbmJvb2wgaXNQZXJzcGVjdGl2ZU1hdHJpeCggbWF0NCBtICkge1xcblxcdHJldHVybiBtWyAyIF1bIDMgXSA9PSAtIDEuMDtcXG59XFxudmVjMiBlcXVpcmVjdFV2KCBpbiB2ZWMzIGRpciApIHtcXG5cXHRmbG9hdCB1ID0gYXRhbiggZGlyLnosIGRpci54ICkgKiBSRUNJUFJPQ0FMX1BJMiArIDAuNTtcXG5cXHRmbG9hdCB2ID0gYXNpbiggY2xhbXAoIGRpci55LCAtIDEuMCwgMS4wICkgKSAqIFJFQ0lQUk9DQUxfUEkgKyAwLjU7XFxuXFx0cmV0dXJuIHZlYzIoIHUsIHYgKTtcXG59XCIsY3ViZV91dl9yZWZsZWN0aW9uX2ZyYWdtZW50OlwiI2lmZGVmIEVOVk1BUF9UWVBFX0NVQkVfVVZcXG5cXHQjZGVmaW5lIGN1YmVVVl9tYXhNaXBMZXZlbCA4LjBcXG5cXHQjZGVmaW5lIGN1YmVVVl9taW5NaXBMZXZlbCA0LjBcXG5cXHQjZGVmaW5lIGN1YmVVVl9tYXhUaWxlU2l6ZSAyNTYuMFxcblxcdCNkZWZpbmUgY3ViZVVWX21pblRpbGVTaXplIDE2LjBcXG5cXHRmbG9hdCBnZXRGYWNlKCB2ZWMzIGRpcmVjdGlvbiApIHtcXG5cXHRcXHR2ZWMzIGFic0RpcmVjdGlvbiA9IGFicyggZGlyZWN0aW9uICk7XFxuXFx0XFx0ZmxvYXQgZmFjZSA9IC0gMS4wO1xcblxcdFxcdGlmICggYWJzRGlyZWN0aW9uLnggPiBhYnNEaXJlY3Rpb24ueiApIHtcXG5cXHRcXHRcXHRpZiAoIGFic0RpcmVjdGlvbi54ID4gYWJzRGlyZWN0aW9uLnkgKVxcblxcdFxcdFxcdFxcdGZhY2UgPSBkaXJlY3Rpb24ueCA+IDAuMCA/IDAuMCA6IDMuMDtcXG5cXHRcXHRcXHRlbHNlXFxuXFx0XFx0XFx0XFx0ZmFjZSA9IGRpcmVjdGlvbi55ID4gMC4wID8gMS4wIDogNC4wO1xcblxcdFxcdH0gZWxzZSB7XFxuXFx0XFx0XFx0aWYgKCBhYnNEaXJlY3Rpb24ueiA+IGFic0RpcmVjdGlvbi55IClcXG5cXHRcXHRcXHRcXHRmYWNlID0gZGlyZWN0aW9uLnogPiAwLjAgPyAyLjAgOiA1LjA7XFxuXFx0XFx0XFx0ZWxzZVxcblxcdFxcdFxcdFxcdGZhY2UgPSBkaXJlY3Rpb24ueSA+IDAuMCA/IDEuMCA6IDQuMDtcXG5cXHRcXHR9XFxuXFx0XFx0cmV0dXJuIGZhY2U7XFxuXFx0fVxcblxcdHZlYzIgZ2V0VVYoIHZlYzMgZGlyZWN0aW9uLCBmbG9hdCBmYWNlICkge1xcblxcdFxcdHZlYzIgdXY7XFxuXFx0XFx0aWYgKCBmYWNlID09IDAuMCApIHtcXG5cXHRcXHRcXHR1diA9IHZlYzIoIGRpcmVjdGlvbi56LCBkaXJlY3Rpb24ueSApIC8gYWJzKCBkaXJlY3Rpb24ueCApO1xcblxcdFxcdH0gZWxzZSBpZiAoIGZhY2UgPT0gMS4wICkge1xcblxcdFxcdFxcdHV2ID0gdmVjMiggLSBkaXJlY3Rpb24ueCwgLSBkaXJlY3Rpb24ueiApIC8gYWJzKCBkaXJlY3Rpb24ueSApO1xcblxcdFxcdH0gZWxzZSBpZiAoIGZhY2UgPT0gMi4wICkge1xcblxcdFxcdFxcdHV2ID0gdmVjMiggLSBkaXJlY3Rpb24ueCwgZGlyZWN0aW9uLnkgKSAvIGFicyggZGlyZWN0aW9uLnogKTtcXG5cXHRcXHR9IGVsc2UgaWYgKCBmYWNlID09IDMuMCApIHtcXG5cXHRcXHRcXHR1diA9IHZlYzIoIC0gZGlyZWN0aW9uLnosIGRpcmVjdGlvbi55ICkgLyBhYnMoIGRpcmVjdGlvbi54ICk7XFxuXFx0XFx0fSBlbHNlIGlmICggZmFjZSA9PSA0LjAgKSB7XFxuXFx0XFx0XFx0dXYgPSB2ZWMyKCAtIGRpcmVjdGlvbi54LCBkaXJlY3Rpb24ueiApIC8gYWJzKCBkaXJlY3Rpb24ueSApO1xcblxcdFxcdH0gZWxzZSB7XFxuXFx0XFx0XFx0dXYgPSB2ZWMyKCBkaXJlY3Rpb24ueCwgZGlyZWN0aW9uLnkgKSAvIGFicyggZGlyZWN0aW9uLnogKTtcXG5cXHRcXHR9XFxuXFx0XFx0cmV0dXJuIDAuNSAqICggdXYgKyAxLjAgKTtcXG5cXHR9XFxuXFx0dmVjMyBiaWxpbmVhckN1YmVVViggc2FtcGxlcjJEIGVudk1hcCwgdmVjMyBkaXJlY3Rpb24sIGZsb2F0IG1pcEludCApIHtcXG5cXHRcXHRmbG9hdCBmYWNlID0gZ2V0RmFjZSggZGlyZWN0aW9uICk7XFxuXFx0XFx0ZmxvYXQgZmlsdGVySW50ID0gbWF4KCBjdWJlVVZfbWluTWlwTGV2ZWwgLSBtaXBJbnQsIDAuMCApO1xcblxcdFxcdG1pcEludCA9IG1heCggbWlwSW50LCBjdWJlVVZfbWluTWlwTGV2ZWwgKTtcXG5cXHRcXHRmbG9hdCBmYWNlU2l6ZSA9IGV4cDIoIG1pcEludCApO1xcblxcdFxcdGZsb2F0IHRleGVsU2l6ZSA9IDEuMCAvICggMy4wICogY3ViZVVWX21heFRpbGVTaXplICk7XFxuXFx0XFx0dmVjMiB1diA9IGdldFVWKCBkaXJlY3Rpb24sIGZhY2UgKSAqICggZmFjZVNpemUgLSAxLjAgKTtcXG5cXHRcXHR2ZWMyIGYgPSBmcmFjdCggdXYgKTtcXG5cXHRcXHR1diArPSAwLjUgLSBmO1xcblxcdFxcdGlmICggZmFjZSA+IDIuMCApIHtcXG5cXHRcXHRcXHR1di55ICs9IGZhY2VTaXplO1xcblxcdFxcdFxcdGZhY2UgLT0gMy4wO1xcblxcdFxcdH1cXG5cXHRcXHR1di54ICs9IGZhY2UgKiBmYWNlU2l6ZTtcXG5cXHRcXHRpZiAoIG1pcEludCA8IGN1YmVVVl9tYXhNaXBMZXZlbCApIHtcXG5cXHRcXHRcXHR1di55ICs9IDIuMCAqIGN1YmVVVl9tYXhUaWxlU2l6ZTtcXG5cXHRcXHR9XFxuXFx0XFx0dXYueSArPSBmaWx0ZXJJbnQgKiAyLjAgKiBjdWJlVVZfbWluVGlsZVNpemU7XFxuXFx0XFx0dXYueCArPSAzLjAgKiBtYXgoIDAuMCwgY3ViZVVWX21heFRpbGVTaXplIC0gMi4wICogZmFjZVNpemUgKTtcXG5cXHRcXHR1diAqPSB0ZXhlbFNpemU7XFxuXFx0XFx0dmVjMyB0bCA9IGVudk1hcFRleGVsVG9MaW5lYXIoIHRleHR1cmUyRCggZW52TWFwLCB1diApICkucmdiO1xcblxcdFxcdHV2LnggKz0gdGV4ZWxTaXplO1xcblxcdFxcdHZlYzMgdHIgPSBlbnZNYXBUZXhlbFRvTGluZWFyKCB0ZXh0dXJlMkQoIGVudk1hcCwgdXYgKSApLnJnYjtcXG5cXHRcXHR1di55ICs9IHRleGVsU2l6ZTtcXG5cXHRcXHR2ZWMzIGJyID0gZW52TWFwVGV4ZWxUb0xpbmVhciggdGV4dHVyZTJEKCBlbnZNYXAsIHV2ICkgKS5yZ2I7XFxuXFx0XFx0dXYueCAtPSB0ZXhlbFNpemU7XFxuXFx0XFx0dmVjMyBibCA9IGVudk1hcFRleGVsVG9MaW5lYXIoIHRleHR1cmUyRCggZW52TWFwLCB1diApICkucmdiO1xcblxcdFxcdHZlYzMgdG0gPSBtaXgoIHRsLCB0ciwgZi54ICk7XFxuXFx0XFx0dmVjMyBibSA9IG1peCggYmwsIGJyLCBmLnggKTtcXG5cXHRcXHRyZXR1cm4gbWl4KCB0bSwgYm0sIGYueSApO1xcblxcdH1cXG5cXHQjZGVmaW5lIHIwIDEuMFxcblxcdCNkZWZpbmUgdjAgMC4zMzlcXG5cXHQjZGVmaW5lIG0wIC0gMi4wXFxuXFx0I2RlZmluZSByMSAwLjhcXG5cXHQjZGVmaW5lIHYxIDAuMjc2XFxuXFx0I2RlZmluZSBtMSAtIDEuMFxcblxcdCNkZWZpbmUgcjQgMC40XFxuXFx0I2RlZmluZSB2NCAwLjA0NlxcblxcdCNkZWZpbmUgbTQgMi4wXFxuXFx0I2RlZmluZSByNSAwLjMwNVxcblxcdCNkZWZpbmUgdjUgMC4wMTZcXG5cXHQjZGVmaW5lIG01IDMuMFxcblxcdCNkZWZpbmUgcjYgMC4yMVxcblxcdCNkZWZpbmUgdjYgMC4wMDM4XFxuXFx0I2RlZmluZSBtNiA0LjBcXG5cXHRmbG9hdCByb3VnaG5lc3NUb01pcCggZmxvYXQgcm91Z2huZXNzICkge1xcblxcdFxcdGZsb2F0IG1pcCA9IDAuMDtcXG5cXHRcXHRpZiAoIHJvdWdobmVzcyA+PSByMSApIHtcXG5cXHRcXHRcXHRtaXAgPSAoIHIwIC0gcm91Z2huZXNzICkgKiAoIG0xIC0gbTAgKSAvICggcjAgLSByMSApICsgbTA7XFxuXFx0XFx0fSBlbHNlIGlmICggcm91Z2huZXNzID49IHI0ICkge1xcblxcdFxcdFxcdG1pcCA9ICggcjEgLSByb3VnaG5lc3MgKSAqICggbTQgLSBtMSApIC8gKCByMSAtIHI0ICkgKyBtMTtcXG5cXHRcXHR9IGVsc2UgaWYgKCByb3VnaG5lc3MgPj0gcjUgKSB7XFxuXFx0XFx0XFx0bWlwID0gKCByNCAtIHJvdWdobmVzcyApICogKCBtNSAtIG00ICkgLyAoIHI0IC0gcjUgKSArIG00O1xcblxcdFxcdH0gZWxzZSBpZiAoIHJvdWdobmVzcyA+PSByNiApIHtcXG5cXHRcXHRcXHRtaXAgPSAoIHI1IC0gcm91Z2huZXNzICkgKiAoIG02IC0gbTUgKSAvICggcjUgLSByNiApICsgbTU7XFxuXFx0XFx0fSBlbHNlIHtcXG5cXHRcXHRcXHRtaXAgPSAtIDIuMCAqIGxvZzIoIDEuMTYgKiByb3VnaG5lc3MgKTtcXHRcXHR9XFxuXFx0XFx0cmV0dXJuIG1pcDtcXG5cXHR9XFxuXFx0dmVjNCB0ZXh0dXJlQ3ViZVVWKCBzYW1wbGVyMkQgZW52TWFwLCB2ZWMzIHNhbXBsZURpciwgZmxvYXQgcm91Z2huZXNzICkge1xcblxcdFxcdGZsb2F0IG1pcCA9IGNsYW1wKCByb3VnaG5lc3NUb01pcCggcm91Z2huZXNzICksIG0wLCBjdWJlVVZfbWF4TWlwTGV2ZWwgKTtcXG5cXHRcXHRmbG9hdCBtaXBGID0gZnJhY3QoIG1pcCApO1xcblxcdFxcdGZsb2F0IG1pcEludCA9IGZsb29yKCBtaXAgKTtcXG5cXHRcXHR2ZWMzIGNvbG9yMCA9IGJpbGluZWFyQ3ViZVVWKCBlbnZNYXAsIHNhbXBsZURpciwgbWlwSW50ICk7XFxuXFx0XFx0aWYgKCBtaXBGID09IDAuMCApIHtcXG5cXHRcXHRcXHRyZXR1cm4gdmVjNCggY29sb3IwLCAxLjAgKTtcXG5cXHRcXHR9IGVsc2Uge1xcblxcdFxcdFxcdHZlYzMgY29sb3IxID0gYmlsaW5lYXJDdWJlVVYoIGVudk1hcCwgc2FtcGxlRGlyLCBtaXBJbnQgKyAxLjAgKTtcXG5cXHRcXHRcXHRyZXR1cm4gdmVjNCggbWl4KCBjb2xvcjAsIGNvbG9yMSwgbWlwRiApLCAxLjAgKTtcXG5cXHRcXHR9XFxuXFx0fVxcbiNlbmRpZlwiLGRlZmF1bHRub3JtYWxfdmVydGV4OlwidmVjMyB0cmFuc2Zvcm1lZE5vcm1hbCA9IG9iamVjdE5vcm1hbDtcXG4jaWZkZWYgVVNFX0lOU1RBTkNJTkdcXG5cXHRtYXQzIG0gPSBtYXQzKCBpbnN0YW5jZU1hdHJpeCApO1xcblxcdHRyYW5zZm9ybWVkTm9ybWFsIC89IHZlYzMoIGRvdCggbVsgMCBdLCBtWyAwIF0gKSwgZG90KCBtWyAxIF0sIG1bIDEgXSApLCBkb3QoIG1bIDIgXSwgbVsgMiBdICkgKTtcXG5cXHR0cmFuc2Zvcm1lZE5vcm1hbCA9IG0gKiB0cmFuc2Zvcm1lZE5vcm1hbDtcXG4jZW5kaWZcXG50cmFuc2Zvcm1lZE5vcm1hbCA9IG5vcm1hbE1hdHJpeCAqIHRyYW5zZm9ybWVkTm9ybWFsO1xcbiNpZmRlZiBGTElQX1NJREVEXFxuXFx0dHJhbnNmb3JtZWROb3JtYWwgPSAtIHRyYW5zZm9ybWVkTm9ybWFsO1xcbiNlbmRpZlxcbiNpZmRlZiBVU0VfVEFOR0VOVFxcblxcdHZlYzMgdHJhbnNmb3JtZWRUYW5nZW50ID0gKCBtb2RlbFZpZXdNYXRyaXggKiB2ZWM0KCBvYmplY3RUYW5nZW50LCAwLjAgKSApLnh5ejtcXG5cXHQjaWZkZWYgRkxJUF9TSURFRFxcblxcdFxcdHRyYW5zZm9ybWVkVGFuZ2VudCA9IC0gdHJhbnNmb3JtZWRUYW5nZW50O1xcblxcdCNlbmRpZlxcbiNlbmRpZlwiLGRpc3BsYWNlbWVudG1hcF9wYXJzX3ZlcnRleDpcIiNpZmRlZiBVU0VfRElTUExBQ0VNRU5UTUFQXFxuXFx0dW5pZm9ybSBzYW1wbGVyMkQgZGlzcGxhY2VtZW50TWFwO1xcblxcdHVuaWZvcm0gZmxvYXQgZGlzcGxhY2VtZW50U2NhbGU7XFxuXFx0dW5pZm9ybSBmbG9hdCBkaXNwbGFjZW1lbnRCaWFzO1xcbiNlbmRpZlwiLGRpc3BsYWNlbWVudG1hcF92ZXJ0ZXg6XCIjaWZkZWYgVVNFX0RJU1BMQUNFTUVOVE1BUFxcblxcdHRyYW5zZm9ybWVkICs9IG5vcm1hbGl6ZSggb2JqZWN0Tm9ybWFsICkgKiAoIHRleHR1cmUyRCggZGlzcGxhY2VtZW50TWFwLCB2VXYgKS54ICogZGlzcGxhY2VtZW50U2NhbGUgKyBkaXNwbGFjZW1lbnRCaWFzICk7XFxuI2VuZGlmXCIsZW1pc3NpdmVtYXBfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX0VNSVNTSVZFTUFQXFxuXFx0dmVjNCBlbWlzc2l2ZUNvbG9yID0gdGV4dHVyZTJEKCBlbWlzc2l2ZU1hcCwgdlV2ICk7XFxuXFx0ZW1pc3NpdmVDb2xvci5yZ2IgPSBlbWlzc2l2ZU1hcFRleGVsVG9MaW5lYXIoIGVtaXNzaXZlQ29sb3IgKS5yZ2I7XFxuXFx0dG90YWxFbWlzc2l2ZVJhZGlhbmNlICo9IGVtaXNzaXZlQ29sb3IucmdiO1xcbiNlbmRpZlwiLGVtaXNzaXZlbWFwX3BhcnNfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX0VNSVNTSVZFTUFQXFxuXFx0dW5pZm9ybSBzYW1wbGVyMkQgZW1pc3NpdmVNYXA7XFxuI2VuZGlmXCIsZW5jb2RpbmdzX2ZyYWdtZW50OlwiZ2xfRnJhZ0NvbG9yID0gbGluZWFyVG9PdXRwdXRUZXhlbCggZ2xfRnJhZ0NvbG9yICk7XCIsZW5jb2RpbmdzX3BhcnNfZnJhZ21lbnQ6XCJcXG52ZWM0IExpbmVhclRvTGluZWFyKCBpbiB2ZWM0IHZhbHVlICkge1xcblxcdHJldHVybiB2YWx1ZTtcXG59XFxudmVjNCBHYW1tYVRvTGluZWFyKCBpbiB2ZWM0IHZhbHVlLCBpbiBmbG9hdCBnYW1tYUZhY3RvciApIHtcXG5cXHRyZXR1cm4gdmVjNCggcG93KCB2YWx1ZS5yZ2IsIHZlYzMoIGdhbW1hRmFjdG9yICkgKSwgdmFsdWUuYSApO1xcbn1cXG52ZWM0IExpbmVhclRvR2FtbWEoIGluIHZlYzQgdmFsdWUsIGluIGZsb2F0IGdhbW1hRmFjdG9yICkge1xcblxcdHJldHVybiB2ZWM0KCBwb3coIHZhbHVlLnJnYiwgdmVjMyggMS4wIC8gZ2FtbWFGYWN0b3IgKSApLCB2YWx1ZS5hICk7XFxufVxcbnZlYzQgc1JHQlRvTGluZWFyKCBpbiB2ZWM0IHZhbHVlICkge1xcblxcdHJldHVybiB2ZWM0KCBtaXgoIHBvdyggdmFsdWUucmdiICogMC45NDc4NjcyOTg2ICsgdmVjMyggMC4wNTIxMzI3MDE0ICksIHZlYzMoIDIuNCApICksIHZhbHVlLnJnYiAqIDAuMDc3Mzk5MzgwOCwgdmVjMyggbGVzc1RoYW5FcXVhbCggdmFsdWUucmdiLCB2ZWMzKCAwLjA0MDQ1ICkgKSApICksIHZhbHVlLmEgKTtcXG59XFxudmVjNCBMaW5lYXJUb3NSR0IoIGluIHZlYzQgdmFsdWUgKSB7XFxuXFx0cmV0dXJuIHZlYzQoIG1peCggcG93KCB2YWx1ZS5yZ2IsIHZlYzMoIDAuNDE2NjYgKSApICogMS4wNTUgLSB2ZWMzKCAwLjA1NSApLCB2YWx1ZS5yZ2IgKiAxMi45MiwgdmVjMyggbGVzc1RoYW5FcXVhbCggdmFsdWUucmdiLCB2ZWMzKCAwLjAwMzEzMDggKSApICkgKSwgdmFsdWUuYSApO1xcbn1cXG52ZWM0IFJHQkVUb0xpbmVhciggaW4gdmVjNCB2YWx1ZSApIHtcXG5cXHRyZXR1cm4gdmVjNCggdmFsdWUucmdiICogZXhwMiggdmFsdWUuYSAqIDI1NS4wIC0gMTI4LjAgKSwgMS4wICk7XFxufVxcbnZlYzQgTGluZWFyVG9SR0JFKCBpbiB2ZWM0IHZhbHVlICkge1xcblxcdGZsb2F0IG1heENvbXBvbmVudCA9IG1heCggbWF4KCB2YWx1ZS5yLCB2YWx1ZS5nICksIHZhbHVlLmIgKTtcXG5cXHRmbG9hdCBmRXhwID0gY2xhbXAoIGNlaWwoIGxvZzIoIG1heENvbXBvbmVudCApICksIC0xMjguMCwgMTI3LjAgKTtcXG5cXHRyZXR1cm4gdmVjNCggdmFsdWUucmdiIC8gZXhwMiggZkV4cCApLCAoIGZFeHAgKyAxMjguMCApIC8gMjU1LjAgKTtcXG59XFxudmVjNCBSR0JNVG9MaW5lYXIoIGluIHZlYzQgdmFsdWUsIGluIGZsb2F0IG1heFJhbmdlICkge1xcblxcdHJldHVybiB2ZWM0KCB2YWx1ZS5yZ2IgKiB2YWx1ZS5hICogbWF4UmFuZ2UsIDEuMCApO1xcbn1cXG52ZWM0IExpbmVhclRvUkdCTSggaW4gdmVjNCB2YWx1ZSwgaW4gZmxvYXQgbWF4UmFuZ2UgKSB7XFxuXFx0ZmxvYXQgbWF4UkdCID0gbWF4KCB2YWx1ZS5yLCBtYXgoIHZhbHVlLmcsIHZhbHVlLmIgKSApO1xcblxcdGZsb2F0IE0gPSBjbGFtcCggbWF4UkdCIC8gbWF4UmFuZ2UsIDAuMCwgMS4wICk7XFxuXFx0TSA9IGNlaWwoIE0gKiAyNTUuMCApIC8gMjU1LjA7XFxuXFx0cmV0dXJuIHZlYzQoIHZhbHVlLnJnYiAvICggTSAqIG1heFJhbmdlICksIE0gKTtcXG59XFxudmVjNCBSR0JEVG9MaW5lYXIoIGluIHZlYzQgdmFsdWUsIGluIGZsb2F0IG1heFJhbmdlICkge1xcblxcdHJldHVybiB2ZWM0KCB2YWx1ZS5yZ2IgKiAoICggbWF4UmFuZ2UgLyAyNTUuMCApIC8gdmFsdWUuYSApLCAxLjAgKTtcXG59XFxudmVjNCBMaW5lYXJUb1JHQkQoIGluIHZlYzQgdmFsdWUsIGluIGZsb2F0IG1heFJhbmdlICkge1xcblxcdGZsb2F0IG1heFJHQiA9IG1heCggdmFsdWUuciwgbWF4KCB2YWx1ZS5nLCB2YWx1ZS5iICkgKTtcXG5cXHRmbG9hdCBEID0gbWF4KCBtYXhSYW5nZSAvIG1heFJHQiwgMS4wICk7XFxuXFx0RCA9IGNsYW1wKCBmbG9vciggRCApIC8gMjU1LjAsIDAuMCwgMS4wICk7XFxuXFx0cmV0dXJuIHZlYzQoIHZhbHVlLnJnYiAqICggRCAqICggMjU1LjAgLyBtYXhSYW5nZSApICksIEQgKTtcXG59XFxuY29uc3QgbWF0MyBjTG9nTHV2TSA9IG1hdDMoIDAuMjIwOSwgMC4zMzkwLCAwLjQxODQsIDAuMTEzOCwgMC42NzgwLCAwLjczMTksIDAuMDEwMiwgMC4xMTMwLCAwLjI5NjkgKTtcXG52ZWM0IExpbmVhclRvTG9nTHV2KCBpbiB2ZWM0IHZhbHVlICkge1xcblxcdHZlYzMgWHBfWV9YWVpwID0gY0xvZ0x1dk0gKiB2YWx1ZS5yZ2I7XFxuXFx0WHBfWV9YWVpwID0gbWF4KCBYcF9ZX1hZWnAsIHZlYzMoIDFlLTYsIDFlLTYsIDFlLTYgKSApO1xcblxcdHZlYzQgdlJlc3VsdDtcXG5cXHR2UmVzdWx0Lnh5ID0gWHBfWV9YWVpwLnh5IC8gWHBfWV9YWVpwLno7XFxuXFx0ZmxvYXQgTGUgPSAyLjAgKiBsb2cyKFhwX1lfWFlacC55KSArIDEyNy4wO1xcblxcdHZSZXN1bHQudyA9IGZyYWN0KCBMZSApO1xcblxcdHZSZXN1bHQueiA9ICggTGUgLSAoIGZsb29yKCB2UmVzdWx0LncgKiAyNTUuMCApICkgLyAyNTUuMCApIC8gMjU1LjA7XFxuXFx0cmV0dXJuIHZSZXN1bHQ7XFxufVxcbmNvbnN0IG1hdDMgY0xvZ0x1dkludmVyc2VNID0gbWF0MyggNi4wMDE0LCAtMi43MDA4LCAtMS43OTk2LCAtMS4zMzIwLCAzLjEwMjksIC01Ljc3MjEsIDAuMzAwOCwgLTEuMDg4MiwgNS42MjY4ICk7XFxudmVjNCBMb2dMdXZUb0xpbmVhciggaW4gdmVjNCB2YWx1ZSApIHtcXG5cXHRmbG9hdCBMZSA9IHZhbHVlLnogKiAyNTUuMCArIHZhbHVlLnc7XFxuXFx0dmVjMyBYcF9ZX1hZWnA7XFxuXFx0WHBfWV9YWVpwLnkgPSBleHAyKCAoIExlIC0gMTI3LjAgKSAvIDIuMCApO1xcblxcdFhwX1lfWFlacC56ID0gWHBfWV9YWVpwLnkgLyB2YWx1ZS55O1xcblxcdFhwX1lfWFlacC54ID0gdmFsdWUueCAqIFhwX1lfWFlacC56O1xcblxcdHZlYzMgdlJHQiA9IGNMb2dMdXZJbnZlcnNlTSAqIFhwX1lfWFlacC5yZ2I7XFxuXFx0cmV0dXJuIHZlYzQoIG1heCggdlJHQiwgMC4wICksIDEuMCApO1xcbn1cIixlbnZtYXBfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX0VOVk1BUFxcblxcdCNpZmRlZiBFTlZfV09STERQT1NcXG5cXHRcXHR2ZWMzIGNhbWVyYVRvRnJhZztcXG5cXHRcXHRpZiAoIGlzT3J0aG9ncmFwaGljICkge1xcblxcdFxcdFxcdGNhbWVyYVRvRnJhZyA9IG5vcm1hbGl6ZSggdmVjMyggLSB2aWV3TWF0cml4WyAwIF1bIDIgXSwgLSB2aWV3TWF0cml4WyAxIF1bIDIgXSwgLSB2aWV3TWF0cml4WyAyIF1bIDIgXSApICk7XFxuXFx0XFx0fSBlbHNlIHtcXG5cXHRcXHRcXHRjYW1lcmFUb0ZyYWcgPSBub3JtYWxpemUoIHZXb3JsZFBvc2l0aW9uIC0gY2FtZXJhUG9zaXRpb24gKTtcXG5cXHRcXHR9XFxuXFx0XFx0dmVjMyB3b3JsZE5vcm1hbCA9IGludmVyc2VUcmFuc2Zvcm1EaXJlY3Rpb24oIG5vcm1hbCwgdmlld01hdHJpeCApO1xcblxcdFxcdCNpZmRlZiBFTlZNQVBfTU9ERV9SRUZMRUNUSU9OXFxuXFx0XFx0XFx0dmVjMyByZWZsZWN0VmVjID0gcmVmbGVjdCggY2FtZXJhVG9GcmFnLCB3b3JsZE5vcm1hbCApO1xcblxcdFxcdCNlbHNlXFxuXFx0XFx0XFx0dmVjMyByZWZsZWN0VmVjID0gcmVmcmFjdCggY2FtZXJhVG9GcmFnLCB3b3JsZE5vcm1hbCwgcmVmcmFjdGlvblJhdGlvICk7XFxuXFx0XFx0I2VuZGlmXFxuXFx0I2Vsc2VcXG5cXHRcXHR2ZWMzIHJlZmxlY3RWZWMgPSB2UmVmbGVjdDtcXG5cXHQjZW5kaWZcXG5cXHQjaWZkZWYgRU5WTUFQX1RZUEVfQ1VCRVxcblxcdFxcdHZlYzQgZW52Q29sb3IgPSB0ZXh0dXJlQ3ViZSggZW52TWFwLCB2ZWMzKCBmbGlwRW52TWFwICogcmVmbGVjdFZlYy54LCByZWZsZWN0VmVjLnl6ICkgKTtcXG5cXHQjZWxpZiBkZWZpbmVkKCBFTlZNQVBfVFlQRV9DVUJFX1VWIClcXG5cXHRcXHR2ZWM0IGVudkNvbG9yID0gdGV4dHVyZUN1YmVVViggZW52TWFwLCByZWZsZWN0VmVjLCAwLjAgKTtcXG5cXHQjZWxzZVxcblxcdFxcdHZlYzQgZW52Q29sb3IgPSB2ZWM0KCAwLjAgKTtcXG5cXHQjZW5kaWZcXG5cXHQjaWZuZGVmIEVOVk1BUF9UWVBFX0NVQkVfVVZcXG5cXHRcXHRlbnZDb2xvciA9IGVudk1hcFRleGVsVG9MaW5lYXIoIGVudkNvbG9yICk7XFxuXFx0I2VuZGlmXFxuXFx0I2lmZGVmIEVOVk1BUF9CTEVORElOR19NVUxUSVBMWVxcblxcdFxcdG91dGdvaW5nTGlnaHQgPSBtaXgoIG91dGdvaW5nTGlnaHQsIG91dGdvaW5nTGlnaHQgKiBlbnZDb2xvci54eXosIHNwZWN1bGFyU3RyZW5ndGggKiByZWZsZWN0aXZpdHkgKTtcXG5cXHQjZWxpZiBkZWZpbmVkKCBFTlZNQVBfQkxFTkRJTkdfTUlYIClcXG5cXHRcXHRvdXRnb2luZ0xpZ2h0ID0gbWl4KCBvdXRnb2luZ0xpZ2h0LCBlbnZDb2xvci54eXosIHNwZWN1bGFyU3RyZW5ndGggKiByZWZsZWN0aXZpdHkgKTtcXG5cXHQjZWxpZiBkZWZpbmVkKCBFTlZNQVBfQkxFTkRJTkdfQUREIClcXG5cXHRcXHRvdXRnb2luZ0xpZ2h0ICs9IGVudkNvbG9yLnh5eiAqIHNwZWN1bGFyU3RyZW5ndGggKiByZWZsZWN0aXZpdHk7XFxuXFx0I2VuZGlmXFxuI2VuZGlmXCIsZW52bWFwX2NvbW1vbl9wYXJzX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9FTlZNQVBcXG5cXHR1bmlmb3JtIGZsb2F0IGVudk1hcEludGVuc2l0eTtcXG5cXHR1bmlmb3JtIGZsb2F0IGZsaXBFbnZNYXA7XFxuXFx0dW5pZm9ybSBpbnQgbWF4TWlwTGV2ZWw7XFxuXFx0I2lmZGVmIEVOVk1BUF9UWVBFX0NVQkVcXG5cXHRcXHR1bmlmb3JtIHNhbXBsZXJDdWJlIGVudk1hcDtcXG5cXHQjZWxzZVxcblxcdFxcdHVuaWZvcm0gc2FtcGxlcjJEIGVudk1hcDtcXG5cXHQjZW5kaWZcXG5cXHRcXG4jZW5kaWZcIixlbnZtYXBfcGFyc19mcmFnbWVudDpcIiNpZmRlZiBVU0VfRU5WTUFQXFxuXFx0dW5pZm9ybSBmbG9hdCByZWZsZWN0aXZpdHk7XFxuXFx0I2lmIGRlZmluZWQoIFVTRV9CVU1QTUFQICkgfHwgZGVmaW5lZCggVVNFX05PUk1BTE1BUCApIHx8IGRlZmluZWQoIFBIT05HIClcXG5cXHRcXHQjZGVmaW5lIEVOVl9XT1JMRFBPU1xcblxcdCNlbmRpZlxcblxcdCNpZmRlZiBFTlZfV09STERQT1NcXG5cXHRcXHR2YXJ5aW5nIHZlYzMgdldvcmxkUG9zaXRpb247XFxuXFx0XFx0dW5pZm9ybSBmbG9hdCByZWZyYWN0aW9uUmF0aW87XFxuXFx0I2Vsc2VcXG5cXHRcXHR2YXJ5aW5nIHZlYzMgdlJlZmxlY3Q7XFxuXFx0I2VuZGlmXFxuI2VuZGlmXCIsZW52bWFwX3BhcnNfdmVydGV4OlwiI2lmZGVmIFVTRV9FTlZNQVBcXG5cXHQjaWYgZGVmaW5lZCggVVNFX0JVTVBNQVAgKSB8fCBkZWZpbmVkKCBVU0VfTk9STUFMTUFQICkgfHxkZWZpbmVkKCBQSE9ORyApXFxuXFx0XFx0I2RlZmluZSBFTlZfV09STERQT1NcXG5cXHQjZW5kaWZcXG5cXHQjaWZkZWYgRU5WX1dPUkxEUE9TXFxuXFx0XFx0XFxuXFx0XFx0dmFyeWluZyB2ZWMzIHZXb3JsZFBvc2l0aW9uO1xcblxcdCNlbHNlXFxuXFx0XFx0dmFyeWluZyB2ZWMzIHZSZWZsZWN0O1xcblxcdFxcdHVuaWZvcm0gZmxvYXQgcmVmcmFjdGlvblJhdGlvO1xcblxcdCNlbmRpZlxcbiNlbmRpZlwiLGVudm1hcF9waHlzaWNhbF9wYXJzX2ZyYWdtZW50OlwiI2lmIGRlZmluZWQoIFVTRV9FTlZNQVAgKVxcblxcdCNpZmRlZiBFTlZNQVBfTU9ERV9SRUZSQUNUSU9OXFxuXFx0XFx0dW5pZm9ybSBmbG9hdCByZWZyYWN0aW9uUmF0aW87XFxuXFx0I2VuZGlmXFxuXFx0dmVjMyBnZXRMaWdodFByb2JlSW5kaXJlY3RJcnJhZGlhbmNlKCBjb25zdCBpbiBHZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5LCBjb25zdCBpbiBpbnQgbWF4TUlQTGV2ZWwgKSB7XFxuXFx0XFx0dmVjMyB3b3JsZE5vcm1hbCA9IGludmVyc2VUcmFuc2Zvcm1EaXJlY3Rpb24oIGdlb21ldHJ5Lm5vcm1hbCwgdmlld01hdHJpeCApO1xcblxcdFxcdCNpZmRlZiBFTlZNQVBfVFlQRV9DVUJFXFxuXFx0XFx0XFx0dmVjMyBxdWVyeVZlYyA9IHZlYzMoIGZsaXBFbnZNYXAgKiB3b3JsZE5vcm1hbC54LCB3b3JsZE5vcm1hbC55eiApO1xcblxcdFxcdFxcdCNpZmRlZiBURVhUVVJFX0xPRF9FWFRcXG5cXHRcXHRcXHRcXHR2ZWM0IGVudk1hcENvbG9yID0gdGV4dHVyZUN1YmVMb2RFWFQoIGVudk1hcCwgcXVlcnlWZWMsIGZsb2F0KCBtYXhNSVBMZXZlbCApICk7XFxuXFx0XFx0XFx0I2Vsc2VcXG5cXHRcXHRcXHRcXHR2ZWM0IGVudk1hcENvbG9yID0gdGV4dHVyZUN1YmUoIGVudk1hcCwgcXVlcnlWZWMsIGZsb2F0KCBtYXhNSVBMZXZlbCApICk7XFxuXFx0XFx0XFx0I2VuZGlmXFxuXFx0XFx0XFx0ZW52TWFwQ29sb3IucmdiID0gZW52TWFwVGV4ZWxUb0xpbmVhciggZW52TWFwQ29sb3IgKS5yZ2I7XFxuXFx0XFx0I2VsaWYgZGVmaW5lZCggRU5WTUFQX1RZUEVfQ1VCRV9VViApXFxuXFx0XFx0XFx0dmVjNCBlbnZNYXBDb2xvciA9IHRleHR1cmVDdWJlVVYoIGVudk1hcCwgd29ybGROb3JtYWwsIDEuMCApO1xcblxcdFxcdCNlbHNlXFxuXFx0XFx0XFx0dmVjNCBlbnZNYXBDb2xvciA9IHZlYzQoIDAuMCApO1xcblxcdFxcdCNlbmRpZlxcblxcdFxcdHJldHVybiBQSSAqIGVudk1hcENvbG9yLnJnYiAqIGVudk1hcEludGVuc2l0eTtcXG5cXHR9XFxuXFx0ZmxvYXQgZ2V0U3BlY3VsYXJNSVBMZXZlbCggY29uc3QgaW4gZmxvYXQgcm91Z2huZXNzLCBjb25zdCBpbiBpbnQgbWF4TUlQTGV2ZWwgKSB7XFxuXFx0XFx0ZmxvYXQgbWF4TUlQTGV2ZWxTY2FsYXIgPSBmbG9hdCggbWF4TUlQTGV2ZWwgKTtcXG5cXHRcXHRmbG9hdCBzaWdtYSA9IFBJICogcm91Z2huZXNzICogcm91Z2huZXNzIC8gKCAxLjAgKyByb3VnaG5lc3MgKTtcXG5cXHRcXHRmbG9hdCBkZXNpcmVkTUlQTGV2ZWwgPSBtYXhNSVBMZXZlbFNjYWxhciArIGxvZzIoIHNpZ21hICk7XFxuXFx0XFx0cmV0dXJuIGNsYW1wKCBkZXNpcmVkTUlQTGV2ZWwsIDAuMCwgbWF4TUlQTGV2ZWxTY2FsYXIgKTtcXG5cXHR9XFxuXFx0dmVjMyBnZXRMaWdodFByb2JlSW5kaXJlY3RSYWRpYW5jZSggY29uc3QgaW4gdmVjMyB2aWV3RGlyLCBjb25zdCBpbiB2ZWMzIG5vcm1hbCwgY29uc3QgaW4gZmxvYXQgcm91Z2huZXNzLCBjb25zdCBpbiBpbnQgbWF4TUlQTGV2ZWwgKSB7XFxuXFx0XFx0I2lmZGVmIEVOVk1BUF9NT0RFX1JFRkxFQ1RJT05cXG5cXHRcXHRcXHR2ZWMzIHJlZmxlY3RWZWMgPSByZWZsZWN0KCAtdmlld0Rpciwgbm9ybWFsICk7XFxuXFx0XFx0XFx0cmVmbGVjdFZlYyA9IG5vcm1hbGl6ZSggbWl4KCByZWZsZWN0VmVjLCBub3JtYWwsIHJvdWdobmVzcyAqIHJvdWdobmVzcykgKTtcXG5cXHRcXHQjZWxzZVxcblxcdFxcdFxcdHZlYzMgcmVmbGVjdFZlYyA9IHJlZnJhY3QoIC12aWV3RGlyLCBub3JtYWwsIHJlZnJhY3Rpb25SYXRpbyApO1xcblxcdFxcdCNlbmRpZlxcblxcdFxcdHJlZmxlY3RWZWMgPSBpbnZlcnNlVHJhbnNmb3JtRGlyZWN0aW9uKCByZWZsZWN0VmVjLCB2aWV3TWF0cml4ICk7XFxuXFx0XFx0ZmxvYXQgc3BlY3VsYXJNSVBMZXZlbCA9IGdldFNwZWN1bGFyTUlQTGV2ZWwoIHJvdWdobmVzcywgbWF4TUlQTGV2ZWwgKTtcXG5cXHRcXHQjaWZkZWYgRU5WTUFQX1RZUEVfQ1VCRVxcblxcdFxcdFxcdHZlYzMgcXVlcnlSZWZsZWN0VmVjID0gdmVjMyggZmxpcEVudk1hcCAqIHJlZmxlY3RWZWMueCwgcmVmbGVjdFZlYy55eiApO1xcblxcdFxcdFxcdCNpZmRlZiBURVhUVVJFX0xPRF9FWFRcXG5cXHRcXHRcXHRcXHR2ZWM0IGVudk1hcENvbG9yID0gdGV4dHVyZUN1YmVMb2RFWFQoIGVudk1hcCwgcXVlcnlSZWZsZWN0VmVjLCBzcGVjdWxhck1JUExldmVsICk7XFxuXFx0XFx0XFx0I2Vsc2VcXG5cXHRcXHRcXHRcXHR2ZWM0IGVudk1hcENvbG9yID0gdGV4dHVyZUN1YmUoIGVudk1hcCwgcXVlcnlSZWZsZWN0VmVjLCBzcGVjdWxhck1JUExldmVsICk7XFxuXFx0XFx0XFx0I2VuZGlmXFxuXFx0XFx0XFx0ZW52TWFwQ29sb3IucmdiID0gZW52TWFwVGV4ZWxUb0xpbmVhciggZW52TWFwQ29sb3IgKS5yZ2I7XFxuXFx0XFx0I2VsaWYgZGVmaW5lZCggRU5WTUFQX1RZUEVfQ1VCRV9VViApXFxuXFx0XFx0XFx0dmVjNCBlbnZNYXBDb2xvciA9IHRleHR1cmVDdWJlVVYoIGVudk1hcCwgcmVmbGVjdFZlYywgcm91Z2huZXNzICk7XFxuXFx0XFx0I2VuZGlmXFxuXFx0XFx0cmV0dXJuIGVudk1hcENvbG9yLnJnYiAqIGVudk1hcEludGVuc2l0eTtcXG5cXHR9XFxuI2VuZGlmXCIsZW52bWFwX3ZlcnRleDpcIiNpZmRlZiBVU0VfRU5WTUFQXFxuXFx0I2lmZGVmIEVOVl9XT1JMRFBPU1xcblxcdFxcdHZXb3JsZFBvc2l0aW9uID0gd29ybGRQb3NpdGlvbi54eXo7XFxuXFx0I2Vsc2VcXG5cXHRcXHR2ZWMzIGNhbWVyYVRvVmVydGV4O1xcblxcdFxcdGlmICggaXNPcnRob2dyYXBoaWMgKSB7XFxuXFx0XFx0XFx0Y2FtZXJhVG9WZXJ0ZXggPSBub3JtYWxpemUoIHZlYzMoIC0gdmlld01hdHJpeFsgMCBdWyAyIF0sIC0gdmlld01hdHJpeFsgMSBdWyAyIF0sIC0gdmlld01hdHJpeFsgMiBdWyAyIF0gKSApO1xcblxcdFxcdH0gZWxzZSB7XFxuXFx0XFx0XFx0Y2FtZXJhVG9WZXJ0ZXggPSBub3JtYWxpemUoIHdvcmxkUG9zaXRpb24ueHl6IC0gY2FtZXJhUG9zaXRpb24gKTtcXG5cXHRcXHR9XFxuXFx0XFx0dmVjMyB3b3JsZE5vcm1hbCA9IGludmVyc2VUcmFuc2Zvcm1EaXJlY3Rpb24oIHRyYW5zZm9ybWVkTm9ybWFsLCB2aWV3TWF0cml4ICk7XFxuXFx0XFx0I2lmZGVmIEVOVk1BUF9NT0RFX1JFRkxFQ1RJT05cXG5cXHRcXHRcXHR2UmVmbGVjdCA9IHJlZmxlY3QoIGNhbWVyYVRvVmVydGV4LCB3b3JsZE5vcm1hbCApO1xcblxcdFxcdCNlbHNlXFxuXFx0XFx0XFx0dlJlZmxlY3QgPSByZWZyYWN0KCBjYW1lcmFUb1ZlcnRleCwgd29ybGROb3JtYWwsIHJlZnJhY3Rpb25SYXRpbyApO1xcblxcdFxcdCNlbmRpZlxcblxcdCNlbmRpZlxcbiNlbmRpZlwiLGZvZ192ZXJ0ZXg6XCIjaWZkZWYgVVNFX0ZPR1xcblxcdGZvZ0RlcHRoID0gLSBtdlBvc2l0aW9uLno7XFxuI2VuZGlmXCIsZm9nX3BhcnNfdmVydGV4OlwiI2lmZGVmIFVTRV9GT0dcXG5cXHR2YXJ5aW5nIGZsb2F0IGZvZ0RlcHRoO1xcbiNlbmRpZlwiLGZvZ19mcmFnbWVudDpcIiNpZmRlZiBVU0VfRk9HXFxuXFx0I2lmZGVmIEZPR19FWFAyXFxuXFx0XFx0ZmxvYXQgZm9nRmFjdG9yID0gMS4wIC0gZXhwKCAtIGZvZ0RlbnNpdHkgKiBmb2dEZW5zaXR5ICogZm9nRGVwdGggKiBmb2dEZXB0aCApO1xcblxcdCNlbHNlXFxuXFx0XFx0ZmxvYXQgZm9nRmFjdG9yID0gc21vb3Roc3RlcCggZm9nTmVhciwgZm9nRmFyLCBmb2dEZXB0aCApO1xcblxcdCNlbmRpZlxcblxcdGdsX0ZyYWdDb2xvci5yZ2IgPSBtaXgoIGdsX0ZyYWdDb2xvci5yZ2IsIGZvZ0NvbG9yLCBmb2dGYWN0b3IgKTtcXG4jZW5kaWZcIixmb2dfcGFyc19mcmFnbWVudDpcIiNpZmRlZiBVU0VfRk9HXFxuXFx0dW5pZm9ybSB2ZWMzIGZvZ0NvbG9yO1xcblxcdHZhcnlpbmcgZmxvYXQgZm9nRGVwdGg7XFxuXFx0I2lmZGVmIEZPR19FWFAyXFxuXFx0XFx0dW5pZm9ybSBmbG9hdCBmb2dEZW5zaXR5O1xcblxcdCNlbHNlXFxuXFx0XFx0dW5pZm9ybSBmbG9hdCBmb2dOZWFyO1xcblxcdFxcdHVuaWZvcm0gZmxvYXQgZm9nRmFyO1xcblxcdCNlbmRpZlxcbiNlbmRpZlwiLGdyYWRpZW50bWFwX3BhcnNfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX0dSQURJRU5UTUFQXFxuXFx0dW5pZm9ybSBzYW1wbGVyMkQgZ3JhZGllbnRNYXA7XFxuI2VuZGlmXFxudmVjMyBnZXRHcmFkaWVudElycmFkaWFuY2UoIHZlYzMgbm9ybWFsLCB2ZWMzIGxpZ2h0RGlyZWN0aW9uICkge1xcblxcdGZsb2F0IGRvdE5MID0gZG90KCBub3JtYWwsIGxpZ2h0RGlyZWN0aW9uICk7XFxuXFx0dmVjMiBjb29yZCA9IHZlYzIoIGRvdE5MICogMC41ICsgMC41LCAwLjAgKTtcXG5cXHQjaWZkZWYgVVNFX0dSQURJRU5UTUFQXFxuXFx0XFx0cmV0dXJuIHRleHR1cmUyRCggZ3JhZGllbnRNYXAsIGNvb3JkICkucmdiO1xcblxcdCNlbHNlXFxuXFx0XFx0cmV0dXJuICggY29vcmQueCA8IDAuNyApID8gdmVjMyggMC43ICkgOiB2ZWMzKCAxLjAgKTtcXG5cXHQjZW5kaWZcXG59XCIsbGlnaHRtYXBfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX0xJR0hUTUFQXFxuXFx0dmVjNCBsaWdodE1hcFRleGVsPSB0ZXh0dXJlMkQoIGxpZ2h0TWFwLCB2VXYyICk7XFxuXFx0cmVmbGVjdGVkTGlnaHQuaW5kaXJlY3REaWZmdXNlICs9IFBJICogbGlnaHRNYXBUZXhlbFRvTGluZWFyKCBsaWdodE1hcFRleGVsICkucmdiICogbGlnaHRNYXBJbnRlbnNpdHk7XFxuI2VuZGlmXCIsbGlnaHRtYXBfcGFyc19mcmFnbWVudDpcIiNpZmRlZiBVU0VfTElHSFRNQVBcXG5cXHR1bmlmb3JtIHNhbXBsZXIyRCBsaWdodE1hcDtcXG5cXHR1bmlmb3JtIGZsb2F0IGxpZ2h0TWFwSW50ZW5zaXR5O1xcbiNlbmRpZlwiLGxpZ2h0c19sYW1iZXJ0X3ZlcnRleDpcInZlYzMgZGlmZnVzZSA9IHZlYzMoIDEuMCApO1xcbkdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnk7XFxuZ2VvbWV0cnkucG9zaXRpb24gPSBtdlBvc2l0aW9uLnh5ejtcXG5nZW9tZXRyeS5ub3JtYWwgPSBub3JtYWxpemUoIHRyYW5zZm9ybWVkTm9ybWFsICk7XFxuZ2VvbWV0cnkudmlld0RpciA9ICggaXNPcnRob2dyYXBoaWMgKSA/IHZlYzMoIDAsIDAsIDEgKSA6IG5vcm1hbGl6ZSggLW12UG9zaXRpb24ueHl6ICk7XFxuR2VvbWV0cmljQ29udGV4dCBiYWNrR2VvbWV0cnk7XFxuYmFja0dlb21ldHJ5LnBvc2l0aW9uID0gZ2VvbWV0cnkucG9zaXRpb247XFxuYmFja0dlb21ldHJ5Lm5vcm1hbCA9IC1nZW9tZXRyeS5ub3JtYWw7XFxuYmFja0dlb21ldHJ5LnZpZXdEaXIgPSBnZW9tZXRyeS52aWV3RGlyO1xcbnZMaWdodEZyb250ID0gdmVjMyggMC4wICk7XFxudkluZGlyZWN0RnJvbnQgPSB2ZWMzKCAwLjAgKTtcXG4jaWZkZWYgRE9VQkxFX1NJREVEXFxuXFx0dkxpZ2h0QmFjayA9IHZlYzMoIDAuMCApO1xcblxcdHZJbmRpcmVjdEJhY2sgPSB2ZWMzKCAwLjAgKTtcXG4jZW5kaWZcXG5JbmNpZGVudExpZ2h0IGRpcmVjdExpZ2h0O1xcbmZsb2F0IGRvdE5MO1xcbnZlYzMgZGlyZWN0TGlnaHRDb2xvcl9EaWZmdXNlO1xcbnZJbmRpcmVjdEZyb250ICs9IGdldEFtYmllbnRMaWdodElycmFkaWFuY2UoIGFtYmllbnRMaWdodENvbG9yICk7XFxudkluZGlyZWN0RnJvbnQgKz0gZ2V0TGlnaHRQcm9iZUlycmFkaWFuY2UoIGxpZ2h0UHJvYmUsIGdlb21ldHJ5ICk7XFxuI2lmZGVmIERPVUJMRV9TSURFRFxcblxcdHZJbmRpcmVjdEJhY2sgKz0gZ2V0QW1iaWVudExpZ2h0SXJyYWRpYW5jZSggYW1iaWVudExpZ2h0Q29sb3IgKTtcXG5cXHR2SW5kaXJlY3RCYWNrICs9IGdldExpZ2h0UHJvYmVJcnJhZGlhbmNlKCBsaWdodFByb2JlLCBiYWNrR2VvbWV0cnkgKTtcXG4jZW5kaWZcXG4jaWYgTlVNX1BPSU5UX0xJR0hUUyA+IDBcXG5cXHQjcHJhZ21hIHVucm9sbF9sb29wX3N0YXJ0XFxuXFx0Zm9yICggaW50IGkgPSAwOyBpIDwgTlVNX1BPSU5UX0xJR0hUUzsgaSArKyApIHtcXG5cXHRcXHRnZXRQb2ludERpcmVjdExpZ2h0SXJyYWRpYW5jZSggcG9pbnRMaWdodHNbIGkgXSwgZ2VvbWV0cnksIGRpcmVjdExpZ2h0ICk7XFxuXFx0XFx0ZG90TkwgPSBkb3QoIGdlb21ldHJ5Lm5vcm1hbCwgZGlyZWN0TGlnaHQuZGlyZWN0aW9uICk7XFxuXFx0XFx0ZGlyZWN0TGlnaHRDb2xvcl9EaWZmdXNlID0gUEkgKiBkaXJlY3RMaWdodC5jb2xvcjtcXG5cXHRcXHR2TGlnaHRGcm9udCArPSBzYXR1cmF0ZSggZG90TkwgKSAqIGRpcmVjdExpZ2h0Q29sb3JfRGlmZnVzZTtcXG5cXHRcXHQjaWZkZWYgRE9VQkxFX1NJREVEXFxuXFx0XFx0XFx0dkxpZ2h0QmFjayArPSBzYXR1cmF0ZSggLWRvdE5MICkgKiBkaXJlY3RMaWdodENvbG9yX0RpZmZ1c2U7XFxuXFx0XFx0I2VuZGlmXFxuXFx0fVxcblxcdCNwcmFnbWEgdW5yb2xsX2xvb3BfZW5kXFxuI2VuZGlmXFxuI2lmIE5VTV9TUE9UX0xJR0hUUyA+IDBcXG5cXHQjcHJhZ21hIHVucm9sbF9sb29wX3N0YXJ0XFxuXFx0Zm9yICggaW50IGkgPSAwOyBpIDwgTlVNX1NQT1RfTElHSFRTOyBpICsrICkge1xcblxcdFxcdGdldFNwb3REaXJlY3RMaWdodElycmFkaWFuY2UoIHNwb3RMaWdodHNbIGkgXSwgZ2VvbWV0cnksIGRpcmVjdExpZ2h0ICk7XFxuXFx0XFx0ZG90TkwgPSBkb3QoIGdlb21ldHJ5Lm5vcm1hbCwgZGlyZWN0TGlnaHQuZGlyZWN0aW9uICk7XFxuXFx0XFx0ZGlyZWN0TGlnaHRDb2xvcl9EaWZmdXNlID0gUEkgKiBkaXJlY3RMaWdodC5jb2xvcjtcXG5cXHRcXHR2TGlnaHRGcm9udCArPSBzYXR1cmF0ZSggZG90TkwgKSAqIGRpcmVjdExpZ2h0Q29sb3JfRGlmZnVzZTtcXG5cXHRcXHQjaWZkZWYgRE9VQkxFX1NJREVEXFxuXFx0XFx0XFx0dkxpZ2h0QmFjayArPSBzYXR1cmF0ZSggLWRvdE5MICkgKiBkaXJlY3RMaWdodENvbG9yX0RpZmZ1c2U7XFxuXFx0XFx0I2VuZGlmXFxuXFx0fVxcblxcdCNwcmFnbWEgdW5yb2xsX2xvb3BfZW5kXFxuI2VuZGlmXFxuI2lmIE5VTV9ESVJfTElHSFRTID4gMFxcblxcdCNwcmFnbWEgdW5yb2xsX2xvb3Bfc3RhcnRcXG5cXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBOVU1fRElSX0xJR0hUUzsgaSArKyApIHtcXG5cXHRcXHRnZXREaXJlY3Rpb25hbERpcmVjdExpZ2h0SXJyYWRpYW5jZSggZGlyZWN0aW9uYWxMaWdodHNbIGkgXSwgZ2VvbWV0cnksIGRpcmVjdExpZ2h0ICk7XFxuXFx0XFx0ZG90TkwgPSBkb3QoIGdlb21ldHJ5Lm5vcm1hbCwgZGlyZWN0TGlnaHQuZGlyZWN0aW9uICk7XFxuXFx0XFx0ZGlyZWN0TGlnaHRDb2xvcl9EaWZmdXNlID0gUEkgKiBkaXJlY3RMaWdodC5jb2xvcjtcXG5cXHRcXHR2TGlnaHRGcm9udCArPSBzYXR1cmF0ZSggZG90TkwgKSAqIGRpcmVjdExpZ2h0Q29sb3JfRGlmZnVzZTtcXG5cXHRcXHQjaWZkZWYgRE9VQkxFX1NJREVEXFxuXFx0XFx0XFx0dkxpZ2h0QmFjayArPSBzYXR1cmF0ZSggLWRvdE5MICkgKiBkaXJlY3RMaWdodENvbG9yX0RpZmZ1c2U7XFxuXFx0XFx0I2VuZGlmXFxuXFx0fVxcblxcdCNwcmFnbWEgdW5yb2xsX2xvb3BfZW5kXFxuI2VuZGlmXFxuI2lmIE5VTV9IRU1JX0xJR0hUUyA+IDBcXG5cXHQjcHJhZ21hIHVucm9sbF9sb29wX3N0YXJ0XFxuXFx0Zm9yICggaW50IGkgPSAwOyBpIDwgTlVNX0hFTUlfTElHSFRTOyBpICsrICkge1xcblxcdFxcdHZJbmRpcmVjdEZyb250ICs9IGdldEhlbWlzcGhlcmVMaWdodElycmFkaWFuY2UoIGhlbWlzcGhlcmVMaWdodHNbIGkgXSwgZ2VvbWV0cnkgKTtcXG5cXHRcXHQjaWZkZWYgRE9VQkxFX1NJREVEXFxuXFx0XFx0XFx0dkluZGlyZWN0QmFjayArPSBnZXRIZW1pc3BoZXJlTGlnaHRJcnJhZGlhbmNlKCBoZW1pc3BoZXJlTGlnaHRzWyBpIF0sIGJhY2tHZW9tZXRyeSApO1xcblxcdFxcdCNlbmRpZlxcblxcdH1cXG5cXHQjcHJhZ21hIHVucm9sbF9sb29wX2VuZFxcbiNlbmRpZlwiLGxpZ2h0c19wYXJzX2JlZ2luOlwidW5pZm9ybSBib29sIHJlY2VpdmVTaGFkb3c7XFxudW5pZm9ybSB2ZWMzIGFtYmllbnRMaWdodENvbG9yO1xcbnVuaWZvcm0gdmVjMyBsaWdodFByb2JlWyA5IF07XFxudmVjMyBzaEdldElycmFkaWFuY2VBdCggaW4gdmVjMyBub3JtYWwsIGluIHZlYzMgc2hDb2VmZmljaWVudHNbIDkgXSApIHtcXG5cXHRmbG9hdCB4ID0gbm9ybWFsLngsIHkgPSBub3JtYWwueSwgeiA9IG5vcm1hbC56O1xcblxcdHZlYzMgcmVzdWx0ID0gc2hDb2VmZmljaWVudHNbIDAgXSAqIDAuODg2MjI3O1xcblxcdHJlc3VsdCArPSBzaENvZWZmaWNpZW50c1sgMSBdICogMi4wICogMC41MTE2NjQgKiB5O1xcblxcdHJlc3VsdCArPSBzaENvZWZmaWNpZW50c1sgMiBdICogMi4wICogMC41MTE2NjQgKiB6O1xcblxcdHJlc3VsdCArPSBzaENvZWZmaWNpZW50c1sgMyBdICogMi4wICogMC41MTE2NjQgKiB4O1xcblxcdHJlc3VsdCArPSBzaENvZWZmaWNpZW50c1sgNCBdICogMi4wICogMC40MjkwNDMgKiB4ICogeTtcXG5cXHRyZXN1bHQgKz0gc2hDb2VmZmljaWVudHNbIDUgXSAqIDIuMCAqIDAuNDI5MDQzICogeSAqIHo7XFxuXFx0cmVzdWx0ICs9IHNoQ29lZmZpY2llbnRzWyA2IF0gKiAoIDAuNzQzMTI1ICogeiAqIHogLSAwLjI0NzcwOCApO1xcblxcdHJlc3VsdCArPSBzaENvZWZmaWNpZW50c1sgNyBdICogMi4wICogMC40MjkwNDMgKiB4ICogejtcXG5cXHRyZXN1bHQgKz0gc2hDb2VmZmljaWVudHNbIDggXSAqIDAuNDI5MDQzICogKCB4ICogeCAtIHkgKiB5ICk7XFxuXFx0cmV0dXJuIHJlc3VsdDtcXG59XFxudmVjMyBnZXRMaWdodFByb2JlSXJyYWRpYW5jZSggY29uc3QgaW4gdmVjMyBsaWdodFByb2JlWyA5IF0sIGNvbnN0IGluIEdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnkgKSB7XFxuXFx0dmVjMyB3b3JsZE5vcm1hbCA9IGludmVyc2VUcmFuc2Zvcm1EaXJlY3Rpb24oIGdlb21ldHJ5Lm5vcm1hbCwgdmlld01hdHJpeCApO1xcblxcdHZlYzMgaXJyYWRpYW5jZSA9IHNoR2V0SXJyYWRpYW5jZUF0KCB3b3JsZE5vcm1hbCwgbGlnaHRQcm9iZSApO1xcblxcdHJldHVybiBpcnJhZGlhbmNlO1xcbn1cXG52ZWMzIGdldEFtYmllbnRMaWdodElycmFkaWFuY2UoIGNvbnN0IGluIHZlYzMgYW1iaWVudExpZ2h0Q29sb3IgKSB7XFxuXFx0dmVjMyBpcnJhZGlhbmNlID0gYW1iaWVudExpZ2h0Q29sb3I7XFxuXFx0I2lmbmRlZiBQSFlTSUNBTExZX0NPUlJFQ1RfTElHSFRTXFxuXFx0XFx0aXJyYWRpYW5jZSAqPSBQSTtcXG5cXHQjZW5kaWZcXG5cXHRyZXR1cm4gaXJyYWRpYW5jZTtcXG59XFxuI2lmIE5VTV9ESVJfTElHSFRTID4gMFxcblxcdHN0cnVjdCBEaXJlY3Rpb25hbExpZ2h0IHtcXG5cXHRcXHR2ZWMzIGRpcmVjdGlvbjtcXG5cXHRcXHR2ZWMzIGNvbG9yO1xcblxcdH07XFxuXFx0dW5pZm9ybSBEaXJlY3Rpb25hbExpZ2h0IGRpcmVjdGlvbmFsTGlnaHRzWyBOVU1fRElSX0xJR0hUUyBdO1xcblxcdHZvaWQgZ2V0RGlyZWN0aW9uYWxEaXJlY3RMaWdodElycmFkaWFuY2UoIGNvbnN0IGluIERpcmVjdGlvbmFsTGlnaHQgZGlyZWN0aW9uYWxMaWdodCwgY29uc3QgaW4gR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeSwgb3V0IEluY2lkZW50TGlnaHQgZGlyZWN0TGlnaHQgKSB7XFxuXFx0XFx0ZGlyZWN0TGlnaHQuY29sb3IgPSBkaXJlY3Rpb25hbExpZ2h0LmNvbG9yO1xcblxcdFxcdGRpcmVjdExpZ2h0LmRpcmVjdGlvbiA9IGRpcmVjdGlvbmFsTGlnaHQuZGlyZWN0aW9uO1xcblxcdFxcdGRpcmVjdExpZ2h0LnZpc2libGUgPSB0cnVlO1xcblxcdH1cXG4jZW5kaWZcXG4jaWYgTlVNX1BPSU5UX0xJR0hUUyA+IDBcXG5cXHRzdHJ1Y3QgUG9pbnRMaWdodCB7XFxuXFx0XFx0dmVjMyBwb3NpdGlvbjtcXG5cXHRcXHR2ZWMzIGNvbG9yO1xcblxcdFxcdGZsb2F0IGRpc3RhbmNlO1xcblxcdFxcdGZsb2F0IGRlY2F5O1xcblxcdH07XFxuXFx0dW5pZm9ybSBQb2ludExpZ2h0IHBvaW50TGlnaHRzWyBOVU1fUE9JTlRfTElHSFRTIF07XFxuXFx0dm9pZCBnZXRQb2ludERpcmVjdExpZ2h0SXJyYWRpYW5jZSggY29uc3QgaW4gUG9pbnRMaWdodCBwb2ludExpZ2h0LCBjb25zdCBpbiBHZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5LCBvdXQgSW5jaWRlbnRMaWdodCBkaXJlY3RMaWdodCApIHtcXG5cXHRcXHR2ZWMzIGxWZWN0b3IgPSBwb2ludExpZ2h0LnBvc2l0aW9uIC0gZ2VvbWV0cnkucG9zaXRpb247XFxuXFx0XFx0ZGlyZWN0TGlnaHQuZGlyZWN0aW9uID0gbm9ybWFsaXplKCBsVmVjdG9yICk7XFxuXFx0XFx0ZmxvYXQgbGlnaHREaXN0YW5jZSA9IGxlbmd0aCggbFZlY3RvciApO1xcblxcdFxcdGRpcmVjdExpZ2h0LmNvbG9yID0gcG9pbnRMaWdodC5jb2xvcjtcXG5cXHRcXHRkaXJlY3RMaWdodC5jb2xvciAqPSBwdW5jdHVhbExpZ2h0SW50ZW5zaXR5VG9JcnJhZGlhbmNlRmFjdG9yKCBsaWdodERpc3RhbmNlLCBwb2ludExpZ2h0LmRpc3RhbmNlLCBwb2ludExpZ2h0LmRlY2F5ICk7XFxuXFx0XFx0ZGlyZWN0TGlnaHQudmlzaWJsZSA9ICggZGlyZWN0TGlnaHQuY29sb3IgIT0gdmVjMyggMC4wICkgKTtcXG5cXHR9XFxuI2VuZGlmXFxuI2lmIE5VTV9TUE9UX0xJR0hUUyA+IDBcXG5cXHRzdHJ1Y3QgU3BvdExpZ2h0IHtcXG5cXHRcXHR2ZWMzIHBvc2l0aW9uO1xcblxcdFxcdHZlYzMgZGlyZWN0aW9uO1xcblxcdFxcdHZlYzMgY29sb3I7XFxuXFx0XFx0ZmxvYXQgZGlzdGFuY2U7XFxuXFx0XFx0ZmxvYXQgZGVjYXk7XFxuXFx0XFx0ZmxvYXQgY29uZUNvcztcXG5cXHRcXHRmbG9hdCBwZW51bWJyYUNvcztcXG5cXHR9O1xcblxcdHVuaWZvcm0gU3BvdExpZ2h0IHNwb3RMaWdodHNbIE5VTV9TUE9UX0xJR0hUUyBdO1xcblxcdHZvaWQgZ2V0U3BvdERpcmVjdExpZ2h0SXJyYWRpYW5jZSggY29uc3QgaW4gU3BvdExpZ2h0IHNwb3RMaWdodCwgY29uc3QgaW4gR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeSwgb3V0IEluY2lkZW50TGlnaHQgZGlyZWN0TGlnaHQgKSB7XFxuXFx0XFx0dmVjMyBsVmVjdG9yID0gc3BvdExpZ2h0LnBvc2l0aW9uIC0gZ2VvbWV0cnkucG9zaXRpb247XFxuXFx0XFx0ZGlyZWN0TGlnaHQuZGlyZWN0aW9uID0gbm9ybWFsaXplKCBsVmVjdG9yICk7XFxuXFx0XFx0ZmxvYXQgbGlnaHREaXN0YW5jZSA9IGxlbmd0aCggbFZlY3RvciApO1xcblxcdFxcdGZsb2F0IGFuZ2xlQ29zID0gZG90KCBkaXJlY3RMaWdodC5kaXJlY3Rpb24sIHNwb3RMaWdodC5kaXJlY3Rpb24gKTtcXG5cXHRcXHRpZiAoIGFuZ2xlQ29zID4gc3BvdExpZ2h0LmNvbmVDb3MgKSB7XFxuXFx0XFx0XFx0ZmxvYXQgc3BvdEVmZmVjdCA9IHNtb290aHN0ZXAoIHNwb3RMaWdodC5jb25lQ29zLCBzcG90TGlnaHQucGVudW1icmFDb3MsIGFuZ2xlQ29zICk7XFxuXFx0XFx0XFx0ZGlyZWN0TGlnaHQuY29sb3IgPSBzcG90TGlnaHQuY29sb3I7XFxuXFx0XFx0XFx0ZGlyZWN0TGlnaHQuY29sb3IgKj0gc3BvdEVmZmVjdCAqIHB1bmN0dWFsTGlnaHRJbnRlbnNpdHlUb0lycmFkaWFuY2VGYWN0b3IoIGxpZ2h0RGlzdGFuY2UsIHNwb3RMaWdodC5kaXN0YW5jZSwgc3BvdExpZ2h0LmRlY2F5ICk7XFxuXFx0XFx0XFx0ZGlyZWN0TGlnaHQudmlzaWJsZSA9IHRydWU7XFxuXFx0XFx0fSBlbHNlIHtcXG5cXHRcXHRcXHRkaXJlY3RMaWdodC5jb2xvciA9IHZlYzMoIDAuMCApO1xcblxcdFxcdFxcdGRpcmVjdExpZ2h0LnZpc2libGUgPSBmYWxzZTtcXG5cXHRcXHR9XFxuXFx0fVxcbiNlbmRpZlxcbiNpZiBOVU1fUkVDVF9BUkVBX0xJR0hUUyA+IDBcXG5cXHRzdHJ1Y3QgUmVjdEFyZWFMaWdodCB7XFxuXFx0XFx0dmVjMyBjb2xvcjtcXG5cXHRcXHR2ZWMzIHBvc2l0aW9uO1xcblxcdFxcdHZlYzMgaGFsZldpZHRoO1xcblxcdFxcdHZlYzMgaGFsZkhlaWdodDtcXG5cXHR9O1xcblxcdHVuaWZvcm0gc2FtcGxlcjJEIGx0Y18xO1xcdHVuaWZvcm0gc2FtcGxlcjJEIGx0Y18yO1xcblxcdHVuaWZvcm0gUmVjdEFyZWFMaWdodCByZWN0QXJlYUxpZ2h0c1sgTlVNX1JFQ1RfQVJFQV9MSUdIVFMgXTtcXG4jZW5kaWZcXG4jaWYgTlVNX0hFTUlfTElHSFRTID4gMFxcblxcdHN0cnVjdCBIZW1pc3BoZXJlTGlnaHQge1xcblxcdFxcdHZlYzMgZGlyZWN0aW9uO1xcblxcdFxcdHZlYzMgc2t5Q29sb3I7XFxuXFx0XFx0dmVjMyBncm91bmRDb2xvcjtcXG5cXHR9O1xcblxcdHVuaWZvcm0gSGVtaXNwaGVyZUxpZ2h0IGhlbWlzcGhlcmVMaWdodHNbIE5VTV9IRU1JX0xJR0hUUyBdO1xcblxcdHZlYzMgZ2V0SGVtaXNwaGVyZUxpZ2h0SXJyYWRpYW5jZSggY29uc3QgaW4gSGVtaXNwaGVyZUxpZ2h0IGhlbWlMaWdodCwgY29uc3QgaW4gR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeSApIHtcXG5cXHRcXHRmbG9hdCBkb3ROTCA9IGRvdCggZ2VvbWV0cnkubm9ybWFsLCBoZW1pTGlnaHQuZGlyZWN0aW9uICk7XFxuXFx0XFx0ZmxvYXQgaGVtaURpZmZ1c2VXZWlnaHQgPSAwLjUgKiBkb3ROTCArIDAuNTtcXG5cXHRcXHR2ZWMzIGlycmFkaWFuY2UgPSBtaXgoIGhlbWlMaWdodC5ncm91bmRDb2xvciwgaGVtaUxpZ2h0LnNreUNvbG9yLCBoZW1pRGlmZnVzZVdlaWdodCApO1xcblxcdFxcdCNpZm5kZWYgUEhZU0lDQUxMWV9DT1JSRUNUX0xJR0hUU1xcblxcdFxcdFxcdGlycmFkaWFuY2UgKj0gUEk7XFxuXFx0XFx0I2VuZGlmXFxuXFx0XFx0cmV0dXJuIGlycmFkaWFuY2U7XFxuXFx0fVxcbiNlbmRpZlwiLGxpZ2h0c190b29uX2ZyYWdtZW50OlwiVG9vbk1hdGVyaWFsIG1hdGVyaWFsO1xcbm1hdGVyaWFsLmRpZmZ1c2VDb2xvciA9IGRpZmZ1c2VDb2xvci5yZ2I7XCIsbGlnaHRzX3Rvb25fcGFyc19mcmFnbWVudDpcInZhcnlpbmcgdmVjMyB2Vmlld1Bvc2l0aW9uO1xcbiNpZm5kZWYgRkxBVF9TSEFERURcXG5cXHR2YXJ5aW5nIHZlYzMgdk5vcm1hbDtcXG4jZW5kaWZcXG5zdHJ1Y3QgVG9vbk1hdGVyaWFsIHtcXG5cXHR2ZWMzIGRpZmZ1c2VDb2xvcjtcXG59O1xcbnZvaWQgUkVfRGlyZWN0X1Rvb24oIGNvbnN0IGluIEluY2lkZW50TGlnaHQgZGlyZWN0TGlnaHQsIGNvbnN0IGluIEdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnksIGNvbnN0IGluIFRvb25NYXRlcmlhbCBtYXRlcmlhbCwgaW5vdXQgUmVmbGVjdGVkTGlnaHQgcmVmbGVjdGVkTGlnaHQgKSB7XFxuXFx0dmVjMyBpcnJhZGlhbmNlID0gZ2V0R3JhZGllbnRJcnJhZGlhbmNlKCBnZW9tZXRyeS5ub3JtYWwsIGRpcmVjdExpZ2h0LmRpcmVjdGlvbiApICogZGlyZWN0TGlnaHQuY29sb3I7XFxuXFx0I2lmbmRlZiBQSFlTSUNBTExZX0NPUlJFQ1RfTElHSFRTXFxuXFx0XFx0aXJyYWRpYW5jZSAqPSBQSTtcXG5cXHQjZW5kaWZcXG5cXHRyZWZsZWN0ZWRMaWdodC5kaXJlY3REaWZmdXNlICs9IGlycmFkaWFuY2UgKiBCUkRGX0RpZmZ1c2VfTGFtYmVydCggbWF0ZXJpYWwuZGlmZnVzZUNvbG9yICk7XFxufVxcbnZvaWQgUkVfSW5kaXJlY3REaWZmdXNlX1Rvb24oIGNvbnN0IGluIHZlYzMgaXJyYWRpYW5jZSwgY29uc3QgaW4gR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeSwgY29uc3QgaW4gVG9vbk1hdGVyaWFsIG1hdGVyaWFsLCBpbm91dCBSZWZsZWN0ZWRMaWdodCByZWZsZWN0ZWRMaWdodCApIHtcXG5cXHRyZWZsZWN0ZWRMaWdodC5pbmRpcmVjdERpZmZ1c2UgKz0gaXJyYWRpYW5jZSAqIEJSREZfRGlmZnVzZV9MYW1iZXJ0KCBtYXRlcmlhbC5kaWZmdXNlQ29sb3IgKTtcXG59XFxuI2RlZmluZSBSRV9EaXJlY3RcXHRcXHRcXHRcXHRSRV9EaXJlY3RfVG9vblxcbiNkZWZpbmUgUkVfSW5kaXJlY3REaWZmdXNlXFx0XFx0UkVfSW5kaXJlY3REaWZmdXNlX1Rvb25cXG4jZGVmaW5lIE1hdGVyaWFsX0xpZ2h0UHJvYmVMT0QoIG1hdGVyaWFsIClcXHQoMClcIixsaWdodHNfcGhvbmdfZnJhZ21lbnQ6XCJCbGlublBob25nTWF0ZXJpYWwgbWF0ZXJpYWw7XFxubWF0ZXJpYWwuZGlmZnVzZUNvbG9yID0gZGlmZnVzZUNvbG9yLnJnYjtcXG5tYXRlcmlhbC5zcGVjdWxhckNvbG9yID0gc3BlY3VsYXI7XFxubWF0ZXJpYWwuc3BlY3VsYXJTaGluaW5lc3MgPSBzaGluaW5lc3M7XFxubWF0ZXJpYWwuc3BlY3VsYXJTdHJlbmd0aCA9IHNwZWN1bGFyU3RyZW5ndGg7XCIsbGlnaHRzX3Bob25nX3BhcnNfZnJhZ21lbnQ6XCJ2YXJ5aW5nIHZlYzMgdlZpZXdQb3NpdGlvbjtcXG4jaWZuZGVmIEZMQVRfU0hBREVEXFxuXFx0dmFyeWluZyB2ZWMzIHZOb3JtYWw7XFxuI2VuZGlmXFxuc3RydWN0IEJsaW5uUGhvbmdNYXRlcmlhbCB7XFxuXFx0dmVjMyBkaWZmdXNlQ29sb3I7XFxuXFx0dmVjMyBzcGVjdWxhckNvbG9yO1xcblxcdGZsb2F0IHNwZWN1bGFyU2hpbmluZXNzO1xcblxcdGZsb2F0IHNwZWN1bGFyU3RyZW5ndGg7XFxufTtcXG52b2lkIFJFX0RpcmVjdF9CbGlublBob25nKCBjb25zdCBpbiBJbmNpZGVudExpZ2h0IGRpcmVjdExpZ2h0LCBjb25zdCBpbiBHZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5LCBjb25zdCBpbiBCbGlublBob25nTWF0ZXJpYWwgbWF0ZXJpYWwsIGlub3V0IFJlZmxlY3RlZExpZ2h0IHJlZmxlY3RlZExpZ2h0ICkge1xcblxcdGZsb2F0IGRvdE5MID0gc2F0dXJhdGUoIGRvdCggZ2VvbWV0cnkubm9ybWFsLCBkaXJlY3RMaWdodC5kaXJlY3Rpb24gKSApO1xcblxcdHZlYzMgaXJyYWRpYW5jZSA9IGRvdE5MICogZGlyZWN0TGlnaHQuY29sb3I7XFxuXFx0I2lmbmRlZiBQSFlTSUNBTExZX0NPUlJFQ1RfTElHSFRTXFxuXFx0XFx0aXJyYWRpYW5jZSAqPSBQSTtcXG5cXHQjZW5kaWZcXG5cXHRyZWZsZWN0ZWRMaWdodC5kaXJlY3REaWZmdXNlICs9IGlycmFkaWFuY2UgKiBCUkRGX0RpZmZ1c2VfTGFtYmVydCggbWF0ZXJpYWwuZGlmZnVzZUNvbG9yICk7XFxuXFx0cmVmbGVjdGVkTGlnaHQuZGlyZWN0U3BlY3VsYXIgKz0gaXJyYWRpYW5jZSAqIEJSREZfU3BlY3VsYXJfQmxpbm5QaG9uZyggZGlyZWN0TGlnaHQsIGdlb21ldHJ5LCBtYXRlcmlhbC5zcGVjdWxhckNvbG9yLCBtYXRlcmlhbC5zcGVjdWxhclNoaW5pbmVzcyApICogbWF0ZXJpYWwuc3BlY3VsYXJTdHJlbmd0aDtcXG59XFxudm9pZCBSRV9JbmRpcmVjdERpZmZ1c2VfQmxpbm5QaG9uZyggY29uc3QgaW4gdmVjMyBpcnJhZGlhbmNlLCBjb25zdCBpbiBHZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5LCBjb25zdCBpbiBCbGlublBob25nTWF0ZXJpYWwgbWF0ZXJpYWwsIGlub3V0IFJlZmxlY3RlZExpZ2h0IHJlZmxlY3RlZExpZ2h0ICkge1xcblxcdHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0RGlmZnVzZSArPSBpcnJhZGlhbmNlICogQlJERl9EaWZmdXNlX0xhbWJlcnQoIG1hdGVyaWFsLmRpZmZ1c2VDb2xvciApO1xcbn1cXG4jZGVmaW5lIFJFX0RpcmVjdFxcdFxcdFxcdFxcdFJFX0RpcmVjdF9CbGlublBob25nXFxuI2RlZmluZSBSRV9JbmRpcmVjdERpZmZ1c2VcXHRcXHRSRV9JbmRpcmVjdERpZmZ1c2VfQmxpbm5QaG9uZ1xcbiNkZWZpbmUgTWF0ZXJpYWxfTGlnaHRQcm9iZUxPRCggbWF0ZXJpYWwgKVxcdCgwKVwiLGxpZ2h0c19waHlzaWNhbF9mcmFnbWVudDpcIlBoeXNpY2FsTWF0ZXJpYWwgbWF0ZXJpYWw7XFxubWF0ZXJpYWwuZGlmZnVzZUNvbG9yID0gZGlmZnVzZUNvbG9yLnJnYiAqICggMS4wIC0gbWV0YWxuZXNzRmFjdG9yICk7XFxudmVjMyBkeHkgPSBtYXgoIGFicyggZEZkeCggZ2VvbWV0cnlOb3JtYWwgKSApLCBhYnMoIGRGZHkoIGdlb21ldHJ5Tm9ybWFsICkgKSApO1xcbmZsb2F0IGdlb21ldHJ5Um91Z2huZXNzID0gbWF4KCBtYXgoIGR4eS54LCBkeHkueSApLCBkeHkueiApO1xcbm1hdGVyaWFsLnNwZWN1bGFyUm91Z2huZXNzID0gbWF4KCByb3VnaG5lc3NGYWN0b3IsIDAuMDUyNSApO21hdGVyaWFsLnNwZWN1bGFyUm91Z2huZXNzICs9IGdlb21ldHJ5Um91Z2huZXNzO1xcbm1hdGVyaWFsLnNwZWN1bGFyUm91Z2huZXNzID0gbWluKCBtYXRlcmlhbC5zcGVjdWxhclJvdWdobmVzcywgMS4wICk7XFxuI2lmZGVmIFJFRkxFQ1RJVklUWVxcblxcdG1hdGVyaWFsLnNwZWN1bGFyQ29sb3IgPSBtaXgoIHZlYzMoIE1BWElNVU1fU1BFQ1VMQVJfQ09FRkZJQ0lFTlQgKiBwb3cyKCByZWZsZWN0aXZpdHkgKSApLCBkaWZmdXNlQ29sb3IucmdiLCBtZXRhbG5lc3NGYWN0b3IgKTtcXG4jZWxzZVxcblxcdG1hdGVyaWFsLnNwZWN1bGFyQ29sb3IgPSBtaXgoIHZlYzMoIERFRkFVTFRfU1BFQ1VMQVJfQ09FRkZJQ0lFTlQgKSwgZGlmZnVzZUNvbG9yLnJnYiwgbWV0YWxuZXNzRmFjdG9yICk7XFxuI2VuZGlmXFxuI2lmZGVmIENMRUFSQ09BVFxcblxcdG1hdGVyaWFsLmNsZWFyY29hdCA9IGNsZWFyY29hdDtcXG5cXHRtYXRlcmlhbC5jbGVhcmNvYXRSb3VnaG5lc3MgPSBjbGVhcmNvYXRSb3VnaG5lc3M7XFxuXFx0I2lmZGVmIFVTRV9DTEVBUkNPQVRNQVBcXG5cXHRcXHRtYXRlcmlhbC5jbGVhcmNvYXQgKj0gdGV4dHVyZTJEKCBjbGVhcmNvYXRNYXAsIHZVdiApLng7XFxuXFx0I2VuZGlmXFxuXFx0I2lmZGVmIFVTRV9DTEVBUkNPQVRfUk9VR0hORVNTTUFQXFxuXFx0XFx0bWF0ZXJpYWwuY2xlYXJjb2F0Um91Z2huZXNzICo9IHRleHR1cmUyRCggY2xlYXJjb2F0Um91Z2huZXNzTWFwLCB2VXYgKS55O1xcblxcdCNlbmRpZlxcblxcdG1hdGVyaWFsLmNsZWFyY29hdCA9IHNhdHVyYXRlKCBtYXRlcmlhbC5jbGVhcmNvYXQgKTtcXHRtYXRlcmlhbC5jbGVhcmNvYXRSb3VnaG5lc3MgPSBtYXgoIG1hdGVyaWFsLmNsZWFyY29hdFJvdWdobmVzcywgMC4wNTI1ICk7XFxuXFx0bWF0ZXJpYWwuY2xlYXJjb2F0Um91Z2huZXNzICs9IGdlb21ldHJ5Um91Z2huZXNzO1xcblxcdG1hdGVyaWFsLmNsZWFyY29hdFJvdWdobmVzcyA9IG1pbiggbWF0ZXJpYWwuY2xlYXJjb2F0Um91Z2huZXNzLCAxLjAgKTtcXG4jZW5kaWZcXG4jaWZkZWYgVVNFX1NIRUVOXFxuXFx0bWF0ZXJpYWwuc2hlZW5Db2xvciA9IHNoZWVuO1xcbiNlbmRpZlwiLGxpZ2h0c19waHlzaWNhbF9wYXJzX2ZyYWdtZW50Olwic3RydWN0IFBoeXNpY2FsTWF0ZXJpYWwge1xcblxcdHZlYzMgZGlmZnVzZUNvbG9yO1xcblxcdGZsb2F0IHNwZWN1bGFyUm91Z2huZXNzO1xcblxcdHZlYzMgc3BlY3VsYXJDb2xvcjtcXG4jaWZkZWYgQ0xFQVJDT0FUXFxuXFx0ZmxvYXQgY2xlYXJjb2F0O1xcblxcdGZsb2F0IGNsZWFyY29hdFJvdWdobmVzcztcXG4jZW5kaWZcXG4jaWZkZWYgVVNFX1NIRUVOXFxuXFx0dmVjMyBzaGVlbkNvbG9yO1xcbiNlbmRpZlxcbn07XFxuI2RlZmluZSBNQVhJTVVNX1NQRUNVTEFSX0NPRUZGSUNJRU5UIDAuMTZcXG4jZGVmaW5lIERFRkFVTFRfU1BFQ1VMQVJfQ09FRkZJQ0lFTlQgMC4wNFxcbmZsb2F0IGNsZWFyY29hdERIUkFwcHJveCggY29uc3QgaW4gZmxvYXQgcm91Z2huZXNzLCBjb25zdCBpbiBmbG9hdCBkb3ROTCApIHtcXG5cXHRyZXR1cm4gREVGQVVMVF9TUEVDVUxBUl9DT0VGRklDSUVOVCArICggMS4wIC0gREVGQVVMVF9TUEVDVUxBUl9DT0VGRklDSUVOVCApICogKCBwb3coIDEuMCAtIGRvdE5MLCA1LjAgKSAqIHBvdyggMS4wIC0gcm91Z2huZXNzLCAyLjAgKSApO1xcbn1cXG4jaWYgTlVNX1JFQ1RfQVJFQV9MSUdIVFMgPiAwXFxuXFx0dm9pZCBSRV9EaXJlY3RfUmVjdEFyZWFfUGh5c2ljYWwoIGNvbnN0IGluIFJlY3RBcmVhTGlnaHQgcmVjdEFyZWFMaWdodCwgY29uc3QgaW4gR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeSwgY29uc3QgaW4gUGh5c2ljYWxNYXRlcmlhbCBtYXRlcmlhbCwgaW5vdXQgUmVmbGVjdGVkTGlnaHQgcmVmbGVjdGVkTGlnaHQgKSB7XFxuXFx0XFx0dmVjMyBub3JtYWwgPSBnZW9tZXRyeS5ub3JtYWw7XFxuXFx0XFx0dmVjMyB2aWV3RGlyID0gZ2VvbWV0cnkudmlld0RpcjtcXG5cXHRcXHR2ZWMzIHBvc2l0aW9uID0gZ2VvbWV0cnkucG9zaXRpb247XFxuXFx0XFx0dmVjMyBsaWdodFBvcyA9IHJlY3RBcmVhTGlnaHQucG9zaXRpb247XFxuXFx0XFx0dmVjMyBoYWxmV2lkdGggPSByZWN0QXJlYUxpZ2h0LmhhbGZXaWR0aDtcXG5cXHRcXHR2ZWMzIGhhbGZIZWlnaHQgPSByZWN0QXJlYUxpZ2h0LmhhbGZIZWlnaHQ7XFxuXFx0XFx0dmVjMyBsaWdodENvbG9yID0gcmVjdEFyZWFMaWdodC5jb2xvcjtcXG5cXHRcXHRmbG9hdCByb3VnaG5lc3MgPSBtYXRlcmlhbC5zcGVjdWxhclJvdWdobmVzcztcXG5cXHRcXHR2ZWMzIHJlY3RDb29yZHNbIDQgXTtcXG5cXHRcXHRyZWN0Q29vcmRzWyAwIF0gPSBsaWdodFBvcyArIGhhbGZXaWR0aCAtIGhhbGZIZWlnaHQ7XFx0XFx0cmVjdENvb3Jkc1sgMSBdID0gbGlnaHRQb3MgLSBoYWxmV2lkdGggLSBoYWxmSGVpZ2h0O1xcblxcdFxcdHJlY3RDb29yZHNbIDIgXSA9IGxpZ2h0UG9zIC0gaGFsZldpZHRoICsgaGFsZkhlaWdodDtcXG5cXHRcXHRyZWN0Q29vcmRzWyAzIF0gPSBsaWdodFBvcyArIGhhbGZXaWR0aCArIGhhbGZIZWlnaHQ7XFxuXFx0XFx0dmVjMiB1diA9IExUQ19Vdiggbm9ybWFsLCB2aWV3RGlyLCByb3VnaG5lc3MgKTtcXG5cXHRcXHR2ZWM0IHQxID0gdGV4dHVyZTJEKCBsdGNfMSwgdXYgKTtcXG5cXHRcXHR2ZWM0IHQyID0gdGV4dHVyZTJEKCBsdGNfMiwgdXYgKTtcXG5cXHRcXHRtYXQzIG1JbnYgPSBtYXQzKFxcblxcdFxcdFxcdHZlYzMoIHQxLngsIDAsIHQxLnkgKSxcXG5cXHRcXHRcXHR2ZWMzKCAgICAwLCAxLCAgICAwICksXFxuXFx0XFx0XFx0dmVjMyggdDEueiwgMCwgdDEudyApXFxuXFx0XFx0KTtcXG5cXHRcXHR2ZWMzIGZyZXNuZWwgPSAoIG1hdGVyaWFsLnNwZWN1bGFyQ29sb3IgKiB0Mi54ICsgKCB2ZWMzKCAxLjAgKSAtIG1hdGVyaWFsLnNwZWN1bGFyQ29sb3IgKSAqIHQyLnkgKTtcXG5cXHRcXHRyZWZsZWN0ZWRMaWdodC5kaXJlY3RTcGVjdWxhciArPSBsaWdodENvbG9yICogZnJlc25lbCAqIExUQ19FdmFsdWF0ZSggbm9ybWFsLCB2aWV3RGlyLCBwb3NpdGlvbiwgbUludiwgcmVjdENvb3JkcyApO1xcblxcdFxcdHJlZmxlY3RlZExpZ2h0LmRpcmVjdERpZmZ1c2UgKz0gbGlnaHRDb2xvciAqIG1hdGVyaWFsLmRpZmZ1c2VDb2xvciAqIExUQ19FdmFsdWF0ZSggbm9ybWFsLCB2aWV3RGlyLCBwb3NpdGlvbiwgbWF0MyggMS4wICksIHJlY3RDb29yZHMgKTtcXG5cXHR9XFxuI2VuZGlmXFxudm9pZCBSRV9EaXJlY3RfUGh5c2ljYWwoIGNvbnN0IGluIEluY2lkZW50TGlnaHQgZGlyZWN0TGlnaHQsIGNvbnN0IGluIEdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnksIGNvbnN0IGluIFBoeXNpY2FsTWF0ZXJpYWwgbWF0ZXJpYWwsIGlub3V0IFJlZmxlY3RlZExpZ2h0IHJlZmxlY3RlZExpZ2h0ICkge1xcblxcdGZsb2F0IGRvdE5MID0gc2F0dXJhdGUoIGRvdCggZ2VvbWV0cnkubm9ybWFsLCBkaXJlY3RMaWdodC5kaXJlY3Rpb24gKSApO1xcblxcdHZlYzMgaXJyYWRpYW5jZSA9IGRvdE5MICogZGlyZWN0TGlnaHQuY29sb3I7XFxuXFx0I2lmbmRlZiBQSFlTSUNBTExZX0NPUlJFQ1RfTElHSFRTXFxuXFx0XFx0aXJyYWRpYW5jZSAqPSBQSTtcXG5cXHQjZW5kaWZcXG5cXHQjaWZkZWYgQ0xFQVJDT0FUXFxuXFx0XFx0ZmxvYXQgY2NEb3ROTCA9IHNhdHVyYXRlKCBkb3QoIGdlb21ldHJ5LmNsZWFyY29hdE5vcm1hbCwgZGlyZWN0TGlnaHQuZGlyZWN0aW9uICkgKTtcXG5cXHRcXHR2ZWMzIGNjSXJyYWRpYW5jZSA9IGNjRG90TkwgKiBkaXJlY3RMaWdodC5jb2xvcjtcXG5cXHRcXHQjaWZuZGVmIFBIWVNJQ0FMTFlfQ09SUkVDVF9MSUdIVFNcXG5cXHRcXHRcXHRjY0lycmFkaWFuY2UgKj0gUEk7XFxuXFx0XFx0I2VuZGlmXFxuXFx0XFx0ZmxvYXQgY2xlYXJjb2F0REhSID0gbWF0ZXJpYWwuY2xlYXJjb2F0ICogY2xlYXJjb2F0REhSQXBwcm94KCBtYXRlcmlhbC5jbGVhcmNvYXRSb3VnaG5lc3MsIGNjRG90TkwgKTtcXG5cXHRcXHRyZWZsZWN0ZWRMaWdodC5kaXJlY3RTcGVjdWxhciArPSBjY0lycmFkaWFuY2UgKiBtYXRlcmlhbC5jbGVhcmNvYXQgKiBCUkRGX1NwZWN1bGFyX0dHWCggZGlyZWN0TGlnaHQsIGdlb21ldHJ5LnZpZXdEaXIsIGdlb21ldHJ5LmNsZWFyY29hdE5vcm1hbCwgdmVjMyggREVGQVVMVF9TUEVDVUxBUl9DT0VGRklDSUVOVCApLCBtYXRlcmlhbC5jbGVhcmNvYXRSb3VnaG5lc3MgKTtcXG5cXHQjZWxzZVxcblxcdFxcdGZsb2F0IGNsZWFyY29hdERIUiA9IDAuMDtcXG5cXHQjZW5kaWZcXG5cXHQjaWZkZWYgVVNFX1NIRUVOXFxuXFx0XFx0cmVmbGVjdGVkTGlnaHQuZGlyZWN0U3BlY3VsYXIgKz0gKCAxLjAgLSBjbGVhcmNvYXRESFIgKSAqIGlycmFkaWFuY2UgKiBCUkRGX1NwZWN1bGFyX1NoZWVuKFxcblxcdFxcdFxcdG1hdGVyaWFsLnNwZWN1bGFyUm91Z2huZXNzLFxcblxcdFxcdFxcdGRpcmVjdExpZ2h0LmRpcmVjdGlvbixcXG5cXHRcXHRcXHRnZW9tZXRyeSxcXG5cXHRcXHRcXHRtYXRlcmlhbC5zaGVlbkNvbG9yXFxuXFx0XFx0KTtcXG5cXHQjZWxzZVxcblxcdFxcdHJlZmxlY3RlZExpZ2h0LmRpcmVjdFNwZWN1bGFyICs9ICggMS4wIC0gY2xlYXJjb2F0REhSICkgKiBpcnJhZGlhbmNlICogQlJERl9TcGVjdWxhcl9HR1goIGRpcmVjdExpZ2h0LCBnZW9tZXRyeS52aWV3RGlyLCBnZW9tZXRyeS5ub3JtYWwsIG1hdGVyaWFsLnNwZWN1bGFyQ29sb3IsIG1hdGVyaWFsLnNwZWN1bGFyUm91Z2huZXNzKTtcXG5cXHQjZW5kaWZcXG5cXHRyZWZsZWN0ZWRMaWdodC5kaXJlY3REaWZmdXNlICs9ICggMS4wIC0gY2xlYXJjb2F0REhSICkgKiBpcnJhZGlhbmNlICogQlJERl9EaWZmdXNlX0xhbWJlcnQoIG1hdGVyaWFsLmRpZmZ1c2VDb2xvciApO1xcbn1cXG52b2lkIFJFX0luZGlyZWN0RGlmZnVzZV9QaHlzaWNhbCggY29uc3QgaW4gdmVjMyBpcnJhZGlhbmNlLCBjb25zdCBpbiBHZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5LCBjb25zdCBpbiBQaHlzaWNhbE1hdGVyaWFsIG1hdGVyaWFsLCBpbm91dCBSZWZsZWN0ZWRMaWdodCByZWZsZWN0ZWRMaWdodCApIHtcXG5cXHRyZWZsZWN0ZWRMaWdodC5pbmRpcmVjdERpZmZ1c2UgKz0gaXJyYWRpYW5jZSAqIEJSREZfRGlmZnVzZV9MYW1iZXJ0KCBtYXRlcmlhbC5kaWZmdXNlQ29sb3IgKTtcXG59XFxudm9pZCBSRV9JbmRpcmVjdFNwZWN1bGFyX1BoeXNpY2FsKCBjb25zdCBpbiB2ZWMzIHJhZGlhbmNlLCBjb25zdCBpbiB2ZWMzIGlycmFkaWFuY2UsIGNvbnN0IGluIHZlYzMgY2xlYXJjb2F0UmFkaWFuY2UsIGNvbnN0IGluIEdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnksIGNvbnN0IGluIFBoeXNpY2FsTWF0ZXJpYWwgbWF0ZXJpYWwsIGlub3V0IFJlZmxlY3RlZExpZ2h0IHJlZmxlY3RlZExpZ2h0KSB7XFxuXFx0I2lmZGVmIENMRUFSQ09BVFxcblxcdFxcdGZsb2F0IGNjRG90TlYgPSBzYXR1cmF0ZSggZG90KCBnZW9tZXRyeS5jbGVhcmNvYXROb3JtYWwsIGdlb21ldHJ5LnZpZXdEaXIgKSApO1xcblxcdFxcdHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0U3BlY3VsYXIgKz0gY2xlYXJjb2F0UmFkaWFuY2UgKiBtYXRlcmlhbC5jbGVhcmNvYXQgKiBCUkRGX1NwZWN1bGFyX0dHWF9FbnZpcm9ubWVudCggZ2VvbWV0cnkudmlld0RpciwgZ2VvbWV0cnkuY2xlYXJjb2F0Tm9ybWFsLCB2ZWMzKCBERUZBVUxUX1NQRUNVTEFSX0NPRUZGSUNJRU5UICksIG1hdGVyaWFsLmNsZWFyY29hdFJvdWdobmVzcyApO1xcblxcdFxcdGZsb2F0IGNjRG90TkwgPSBjY0RvdE5WO1xcblxcdFxcdGZsb2F0IGNsZWFyY29hdERIUiA9IG1hdGVyaWFsLmNsZWFyY29hdCAqIGNsZWFyY29hdERIUkFwcHJveCggbWF0ZXJpYWwuY2xlYXJjb2F0Um91Z2huZXNzLCBjY0RvdE5MICk7XFxuXFx0I2Vsc2VcXG5cXHRcXHRmbG9hdCBjbGVhcmNvYXRESFIgPSAwLjA7XFxuXFx0I2VuZGlmXFxuXFx0ZmxvYXQgY2xlYXJjb2F0SW52ID0gMS4wIC0gY2xlYXJjb2F0REhSO1xcblxcdHZlYzMgc2luZ2xlU2NhdHRlcmluZyA9IHZlYzMoIDAuMCApO1xcblxcdHZlYzMgbXVsdGlTY2F0dGVyaW5nID0gdmVjMyggMC4wICk7XFxuXFx0dmVjMyBjb3NpbmVXZWlnaHRlZElycmFkaWFuY2UgPSBpcnJhZGlhbmNlICogUkVDSVBST0NBTF9QSTtcXG5cXHRCUkRGX1NwZWN1bGFyX011bHRpc2NhdHRlcmluZ19FbnZpcm9ubWVudCggZ2VvbWV0cnksIG1hdGVyaWFsLnNwZWN1bGFyQ29sb3IsIG1hdGVyaWFsLnNwZWN1bGFyUm91Z2huZXNzLCBzaW5nbGVTY2F0dGVyaW5nLCBtdWx0aVNjYXR0ZXJpbmcgKTtcXG5cXHR2ZWMzIGRpZmZ1c2UgPSBtYXRlcmlhbC5kaWZmdXNlQ29sb3IgKiAoIDEuMCAtICggc2luZ2xlU2NhdHRlcmluZyArIG11bHRpU2NhdHRlcmluZyApICk7XFxuXFx0cmVmbGVjdGVkTGlnaHQuaW5kaXJlY3RTcGVjdWxhciArPSBjbGVhcmNvYXRJbnYgKiByYWRpYW5jZSAqIHNpbmdsZVNjYXR0ZXJpbmc7XFxuXFx0cmVmbGVjdGVkTGlnaHQuaW5kaXJlY3RTcGVjdWxhciArPSBtdWx0aVNjYXR0ZXJpbmcgKiBjb3NpbmVXZWlnaHRlZElycmFkaWFuY2U7XFxuXFx0cmVmbGVjdGVkTGlnaHQuaW5kaXJlY3REaWZmdXNlICs9IGRpZmZ1c2UgKiBjb3NpbmVXZWlnaHRlZElycmFkaWFuY2U7XFxufVxcbiNkZWZpbmUgUkVfRGlyZWN0XFx0XFx0XFx0XFx0UkVfRGlyZWN0X1BoeXNpY2FsXFxuI2RlZmluZSBSRV9EaXJlY3RfUmVjdEFyZWFcXHRcXHRSRV9EaXJlY3RfUmVjdEFyZWFfUGh5c2ljYWxcXG4jZGVmaW5lIFJFX0luZGlyZWN0RGlmZnVzZVxcdFxcdFJFX0luZGlyZWN0RGlmZnVzZV9QaHlzaWNhbFxcbiNkZWZpbmUgUkVfSW5kaXJlY3RTcGVjdWxhclxcdFxcdFJFX0luZGlyZWN0U3BlY3VsYXJfUGh5c2ljYWxcXG5mbG9hdCBjb21wdXRlU3BlY3VsYXJPY2NsdXNpb24oIGNvbnN0IGluIGZsb2F0IGRvdE5WLCBjb25zdCBpbiBmbG9hdCBhbWJpZW50T2NjbHVzaW9uLCBjb25zdCBpbiBmbG9hdCByb3VnaG5lc3MgKSB7XFxuXFx0cmV0dXJuIHNhdHVyYXRlKCBwb3coIGRvdE5WICsgYW1iaWVudE9jY2x1c2lvbiwgZXhwMiggLSAxNi4wICogcm91Z2huZXNzIC0gMS4wICkgKSAtIDEuMCArIGFtYmllbnRPY2NsdXNpb24gKTtcXG59XCIsbGlnaHRzX2ZyYWdtZW50X2JlZ2luOlwiXFxuR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeTtcXG5nZW9tZXRyeS5wb3NpdGlvbiA9IC0gdlZpZXdQb3NpdGlvbjtcXG5nZW9tZXRyeS5ub3JtYWwgPSBub3JtYWw7XFxuZ2VvbWV0cnkudmlld0RpciA9ICggaXNPcnRob2dyYXBoaWMgKSA/IHZlYzMoIDAsIDAsIDEgKSA6IG5vcm1hbGl6ZSggdlZpZXdQb3NpdGlvbiApO1xcbiNpZmRlZiBDTEVBUkNPQVRcXG5cXHRnZW9tZXRyeS5jbGVhcmNvYXROb3JtYWwgPSBjbGVhcmNvYXROb3JtYWw7XFxuI2VuZGlmXFxuSW5jaWRlbnRMaWdodCBkaXJlY3RMaWdodDtcXG4jaWYgKCBOVU1fUE9JTlRfTElHSFRTID4gMCApICYmIGRlZmluZWQoIFJFX0RpcmVjdCApXFxuXFx0UG9pbnRMaWdodCBwb2ludExpZ2h0O1xcblxcdCNpZiBkZWZpbmVkKCBVU0VfU0hBRE9XTUFQICkgJiYgTlVNX1BPSU5UX0xJR0hUX1NIQURPV1MgPiAwXFxuXFx0UG9pbnRMaWdodFNoYWRvdyBwb2ludExpZ2h0U2hhZG93O1xcblxcdCNlbmRpZlxcblxcdCNwcmFnbWEgdW5yb2xsX2xvb3Bfc3RhcnRcXG5cXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBOVU1fUE9JTlRfTElHSFRTOyBpICsrICkge1xcblxcdFxcdHBvaW50TGlnaHQgPSBwb2ludExpZ2h0c1sgaSBdO1xcblxcdFxcdGdldFBvaW50RGlyZWN0TGlnaHRJcnJhZGlhbmNlKCBwb2ludExpZ2h0LCBnZW9tZXRyeSwgZGlyZWN0TGlnaHQgKTtcXG5cXHRcXHQjaWYgZGVmaW5lZCggVVNFX1NIQURPV01BUCApICYmICggVU5ST0xMRURfTE9PUF9JTkRFWCA8IE5VTV9QT0lOVF9MSUdIVF9TSEFET1dTIClcXG5cXHRcXHRwb2ludExpZ2h0U2hhZG93ID0gcG9pbnRMaWdodFNoYWRvd3NbIGkgXTtcXG5cXHRcXHRkaXJlY3RMaWdodC5jb2xvciAqPSBhbGwoIGJ2ZWMyKCBkaXJlY3RMaWdodC52aXNpYmxlLCByZWNlaXZlU2hhZG93ICkgKSA/IGdldFBvaW50U2hhZG93KCBwb2ludFNoYWRvd01hcFsgaSBdLCBwb2ludExpZ2h0U2hhZG93LnNoYWRvd01hcFNpemUsIHBvaW50TGlnaHRTaGFkb3cuc2hhZG93QmlhcywgcG9pbnRMaWdodFNoYWRvdy5zaGFkb3dSYWRpdXMsIHZQb2ludFNoYWRvd0Nvb3JkWyBpIF0sIHBvaW50TGlnaHRTaGFkb3cuc2hhZG93Q2FtZXJhTmVhciwgcG9pbnRMaWdodFNoYWRvdy5zaGFkb3dDYW1lcmFGYXIgKSA6IDEuMDtcXG5cXHRcXHQjZW5kaWZcXG5cXHRcXHRSRV9EaXJlY3QoIGRpcmVjdExpZ2h0LCBnZW9tZXRyeSwgbWF0ZXJpYWwsIHJlZmxlY3RlZExpZ2h0ICk7XFxuXFx0fVxcblxcdCNwcmFnbWEgdW5yb2xsX2xvb3BfZW5kXFxuI2VuZGlmXFxuI2lmICggTlVNX1NQT1RfTElHSFRTID4gMCApICYmIGRlZmluZWQoIFJFX0RpcmVjdCApXFxuXFx0U3BvdExpZ2h0IHNwb3RMaWdodDtcXG5cXHQjaWYgZGVmaW5lZCggVVNFX1NIQURPV01BUCApICYmIE5VTV9TUE9UX0xJR0hUX1NIQURPV1MgPiAwXFxuXFx0U3BvdExpZ2h0U2hhZG93IHNwb3RMaWdodFNoYWRvdztcXG5cXHQjZW5kaWZcXG5cXHQjcHJhZ21hIHVucm9sbF9sb29wX3N0YXJ0XFxuXFx0Zm9yICggaW50IGkgPSAwOyBpIDwgTlVNX1NQT1RfTElHSFRTOyBpICsrICkge1xcblxcdFxcdHNwb3RMaWdodCA9IHNwb3RMaWdodHNbIGkgXTtcXG5cXHRcXHRnZXRTcG90RGlyZWN0TGlnaHRJcnJhZGlhbmNlKCBzcG90TGlnaHQsIGdlb21ldHJ5LCBkaXJlY3RMaWdodCApO1xcblxcdFxcdCNpZiBkZWZpbmVkKCBVU0VfU0hBRE9XTUFQICkgJiYgKCBVTlJPTExFRF9MT09QX0lOREVYIDwgTlVNX1NQT1RfTElHSFRfU0hBRE9XUyApXFxuXFx0XFx0c3BvdExpZ2h0U2hhZG93ID0gc3BvdExpZ2h0U2hhZG93c1sgaSBdO1xcblxcdFxcdGRpcmVjdExpZ2h0LmNvbG9yICo9IGFsbCggYnZlYzIoIGRpcmVjdExpZ2h0LnZpc2libGUsIHJlY2VpdmVTaGFkb3cgKSApID8gZ2V0U2hhZG93KCBzcG90U2hhZG93TWFwWyBpIF0sIHNwb3RMaWdodFNoYWRvdy5zaGFkb3dNYXBTaXplLCBzcG90TGlnaHRTaGFkb3cuc2hhZG93Qmlhcywgc3BvdExpZ2h0U2hhZG93LnNoYWRvd1JhZGl1cywgdlNwb3RTaGFkb3dDb29yZFsgaSBdICkgOiAxLjA7XFxuXFx0XFx0I2VuZGlmXFxuXFx0XFx0UkVfRGlyZWN0KCBkaXJlY3RMaWdodCwgZ2VvbWV0cnksIG1hdGVyaWFsLCByZWZsZWN0ZWRMaWdodCApO1xcblxcdH1cXG5cXHQjcHJhZ21hIHVucm9sbF9sb29wX2VuZFxcbiNlbmRpZlxcbiNpZiAoIE5VTV9ESVJfTElHSFRTID4gMCApICYmIGRlZmluZWQoIFJFX0RpcmVjdCApXFxuXFx0RGlyZWN0aW9uYWxMaWdodCBkaXJlY3Rpb25hbExpZ2h0O1xcblxcdCNpZiBkZWZpbmVkKCBVU0VfU0hBRE9XTUFQICkgJiYgTlVNX0RJUl9MSUdIVF9TSEFET1dTID4gMFxcblxcdERpcmVjdGlvbmFsTGlnaHRTaGFkb3cgZGlyZWN0aW9uYWxMaWdodFNoYWRvdztcXG5cXHQjZW5kaWZcXG5cXHQjcHJhZ21hIHVucm9sbF9sb29wX3N0YXJ0XFxuXFx0Zm9yICggaW50IGkgPSAwOyBpIDwgTlVNX0RJUl9MSUdIVFM7IGkgKysgKSB7XFxuXFx0XFx0ZGlyZWN0aW9uYWxMaWdodCA9IGRpcmVjdGlvbmFsTGlnaHRzWyBpIF07XFxuXFx0XFx0Z2V0RGlyZWN0aW9uYWxEaXJlY3RMaWdodElycmFkaWFuY2UoIGRpcmVjdGlvbmFsTGlnaHQsIGdlb21ldHJ5LCBkaXJlY3RMaWdodCApO1xcblxcdFxcdCNpZiBkZWZpbmVkKCBVU0VfU0hBRE9XTUFQICkgJiYgKCBVTlJPTExFRF9MT09QX0lOREVYIDwgTlVNX0RJUl9MSUdIVF9TSEFET1dTIClcXG5cXHRcXHRkaXJlY3Rpb25hbExpZ2h0U2hhZG93ID0gZGlyZWN0aW9uYWxMaWdodFNoYWRvd3NbIGkgXTtcXG5cXHRcXHRkaXJlY3RMaWdodC5jb2xvciAqPSBhbGwoIGJ2ZWMyKCBkaXJlY3RMaWdodC52aXNpYmxlLCByZWNlaXZlU2hhZG93ICkgKSA/IGdldFNoYWRvdyggZGlyZWN0aW9uYWxTaGFkb3dNYXBbIGkgXSwgZGlyZWN0aW9uYWxMaWdodFNoYWRvdy5zaGFkb3dNYXBTaXplLCBkaXJlY3Rpb25hbExpZ2h0U2hhZG93LnNoYWRvd0JpYXMsIGRpcmVjdGlvbmFsTGlnaHRTaGFkb3cuc2hhZG93UmFkaXVzLCB2RGlyZWN0aW9uYWxTaGFkb3dDb29yZFsgaSBdICkgOiAxLjA7XFxuXFx0XFx0I2VuZGlmXFxuXFx0XFx0UkVfRGlyZWN0KCBkaXJlY3RMaWdodCwgZ2VvbWV0cnksIG1hdGVyaWFsLCByZWZsZWN0ZWRMaWdodCApO1xcblxcdH1cXG5cXHQjcHJhZ21hIHVucm9sbF9sb29wX2VuZFxcbiNlbmRpZlxcbiNpZiAoIE5VTV9SRUNUX0FSRUFfTElHSFRTID4gMCApICYmIGRlZmluZWQoIFJFX0RpcmVjdF9SZWN0QXJlYSApXFxuXFx0UmVjdEFyZWFMaWdodCByZWN0QXJlYUxpZ2h0O1xcblxcdCNwcmFnbWEgdW5yb2xsX2xvb3Bfc3RhcnRcXG5cXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBOVU1fUkVDVF9BUkVBX0xJR0hUUzsgaSArKyApIHtcXG5cXHRcXHRyZWN0QXJlYUxpZ2h0ID0gcmVjdEFyZWFMaWdodHNbIGkgXTtcXG5cXHRcXHRSRV9EaXJlY3RfUmVjdEFyZWEoIHJlY3RBcmVhTGlnaHQsIGdlb21ldHJ5LCBtYXRlcmlhbCwgcmVmbGVjdGVkTGlnaHQgKTtcXG5cXHR9XFxuXFx0I3ByYWdtYSB1bnJvbGxfbG9vcF9lbmRcXG4jZW5kaWZcXG4jaWYgZGVmaW5lZCggUkVfSW5kaXJlY3REaWZmdXNlIClcXG5cXHR2ZWMzIGlibElycmFkaWFuY2UgPSB2ZWMzKCAwLjAgKTtcXG5cXHR2ZWMzIGlycmFkaWFuY2UgPSBnZXRBbWJpZW50TGlnaHRJcnJhZGlhbmNlKCBhbWJpZW50TGlnaHRDb2xvciApO1xcblxcdGlycmFkaWFuY2UgKz0gZ2V0TGlnaHRQcm9iZUlycmFkaWFuY2UoIGxpZ2h0UHJvYmUsIGdlb21ldHJ5ICk7XFxuXFx0I2lmICggTlVNX0hFTUlfTElHSFRTID4gMCApXFxuXFx0XFx0I3ByYWdtYSB1bnJvbGxfbG9vcF9zdGFydFxcblxcdFxcdGZvciAoIGludCBpID0gMDsgaSA8IE5VTV9IRU1JX0xJR0hUUzsgaSArKyApIHtcXG5cXHRcXHRcXHRpcnJhZGlhbmNlICs9IGdldEhlbWlzcGhlcmVMaWdodElycmFkaWFuY2UoIGhlbWlzcGhlcmVMaWdodHNbIGkgXSwgZ2VvbWV0cnkgKTtcXG5cXHRcXHR9XFxuXFx0XFx0I3ByYWdtYSB1bnJvbGxfbG9vcF9lbmRcXG5cXHQjZW5kaWZcXG4jZW5kaWZcXG4jaWYgZGVmaW5lZCggUkVfSW5kaXJlY3RTcGVjdWxhciApXFxuXFx0dmVjMyByYWRpYW5jZSA9IHZlYzMoIDAuMCApO1xcblxcdHZlYzMgY2xlYXJjb2F0UmFkaWFuY2UgPSB2ZWMzKCAwLjAgKTtcXG4jZW5kaWZcIixsaWdodHNfZnJhZ21lbnRfbWFwczpcIiNpZiBkZWZpbmVkKCBSRV9JbmRpcmVjdERpZmZ1c2UgKVxcblxcdCNpZmRlZiBVU0VfTElHSFRNQVBcXG5cXHRcXHR2ZWM0IGxpZ2h0TWFwVGV4ZWw9IHRleHR1cmUyRCggbGlnaHRNYXAsIHZVdjIgKTtcXG5cXHRcXHR2ZWMzIGxpZ2h0TWFwSXJyYWRpYW5jZSA9IGxpZ2h0TWFwVGV4ZWxUb0xpbmVhciggbGlnaHRNYXBUZXhlbCApLnJnYiAqIGxpZ2h0TWFwSW50ZW5zaXR5O1xcblxcdFxcdCNpZm5kZWYgUEhZU0lDQUxMWV9DT1JSRUNUX0xJR0hUU1xcblxcdFxcdFxcdGxpZ2h0TWFwSXJyYWRpYW5jZSAqPSBQSTtcXG5cXHRcXHQjZW5kaWZcXG5cXHRcXHRpcnJhZGlhbmNlICs9IGxpZ2h0TWFwSXJyYWRpYW5jZTtcXG5cXHQjZW5kaWZcXG5cXHQjaWYgZGVmaW5lZCggVVNFX0VOVk1BUCApICYmIGRlZmluZWQoIFNUQU5EQVJEICkgJiYgZGVmaW5lZCggRU5WTUFQX1RZUEVfQ1VCRV9VViApXFxuXFx0XFx0aWJsSXJyYWRpYW5jZSArPSBnZXRMaWdodFByb2JlSW5kaXJlY3RJcnJhZGlhbmNlKCBnZW9tZXRyeSwgbWF4TWlwTGV2ZWwgKTtcXG5cXHQjZW5kaWZcXG4jZW5kaWZcXG4jaWYgZGVmaW5lZCggVVNFX0VOVk1BUCApICYmIGRlZmluZWQoIFJFX0luZGlyZWN0U3BlY3VsYXIgKVxcblxcdHJhZGlhbmNlICs9IGdldExpZ2h0UHJvYmVJbmRpcmVjdFJhZGlhbmNlKCBnZW9tZXRyeS52aWV3RGlyLCBnZW9tZXRyeS5ub3JtYWwsIG1hdGVyaWFsLnNwZWN1bGFyUm91Z2huZXNzLCBtYXhNaXBMZXZlbCApO1xcblxcdCNpZmRlZiBDTEVBUkNPQVRcXG5cXHRcXHRjbGVhcmNvYXRSYWRpYW5jZSArPSBnZXRMaWdodFByb2JlSW5kaXJlY3RSYWRpYW5jZSggZ2VvbWV0cnkudmlld0RpciwgZ2VvbWV0cnkuY2xlYXJjb2F0Tm9ybWFsLCBtYXRlcmlhbC5jbGVhcmNvYXRSb3VnaG5lc3MsIG1heE1pcExldmVsICk7XFxuXFx0I2VuZGlmXFxuI2VuZGlmXCIsbGlnaHRzX2ZyYWdtZW50X2VuZDpcIiNpZiBkZWZpbmVkKCBSRV9JbmRpcmVjdERpZmZ1c2UgKVxcblxcdFJFX0luZGlyZWN0RGlmZnVzZSggaXJyYWRpYW5jZSwgZ2VvbWV0cnksIG1hdGVyaWFsLCByZWZsZWN0ZWRMaWdodCApO1xcbiNlbmRpZlxcbiNpZiBkZWZpbmVkKCBSRV9JbmRpcmVjdFNwZWN1bGFyIClcXG5cXHRSRV9JbmRpcmVjdFNwZWN1bGFyKCByYWRpYW5jZSwgaWJsSXJyYWRpYW5jZSwgY2xlYXJjb2F0UmFkaWFuY2UsIGdlb21ldHJ5LCBtYXRlcmlhbCwgcmVmbGVjdGVkTGlnaHQgKTtcXG4jZW5kaWZcIixsb2dkZXB0aGJ1Zl9mcmFnbWVudDpcIiNpZiBkZWZpbmVkKCBVU0VfTE9HREVQVEhCVUYgKSAmJiBkZWZpbmVkKCBVU0VfTE9HREVQVEhCVUZfRVhUIClcXG5cXHRnbF9GcmFnRGVwdGhFWFQgPSB2SXNQZXJzcGVjdGl2ZSA9PSAwLjAgPyBnbF9GcmFnQ29vcmQueiA6IGxvZzIoIHZGcmFnRGVwdGggKSAqIGxvZ0RlcHRoQnVmRkMgKiAwLjU7XFxuI2VuZGlmXCIsbG9nZGVwdGhidWZfcGFyc19mcmFnbWVudDpcIiNpZiBkZWZpbmVkKCBVU0VfTE9HREVQVEhCVUYgKSAmJiBkZWZpbmVkKCBVU0VfTE9HREVQVEhCVUZfRVhUIClcXG5cXHR1bmlmb3JtIGZsb2F0IGxvZ0RlcHRoQnVmRkM7XFxuXFx0dmFyeWluZyBmbG9hdCB2RnJhZ0RlcHRoO1xcblxcdHZhcnlpbmcgZmxvYXQgdklzUGVyc3BlY3RpdmU7XFxuI2VuZGlmXCIsbG9nZGVwdGhidWZfcGFyc192ZXJ0ZXg6XCIjaWZkZWYgVVNFX0xPR0RFUFRIQlVGXFxuXFx0I2lmZGVmIFVTRV9MT0dERVBUSEJVRl9FWFRcXG5cXHRcXHR2YXJ5aW5nIGZsb2F0IHZGcmFnRGVwdGg7XFxuXFx0XFx0dmFyeWluZyBmbG9hdCB2SXNQZXJzcGVjdGl2ZTtcXG5cXHQjZWxzZVxcblxcdFxcdHVuaWZvcm0gZmxvYXQgbG9nRGVwdGhCdWZGQztcXG5cXHQjZW5kaWZcXG4jZW5kaWZcIixsb2dkZXB0aGJ1Zl92ZXJ0ZXg6XCIjaWZkZWYgVVNFX0xPR0RFUFRIQlVGXFxuXFx0I2lmZGVmIFVTRV9MT0dERVBUSEJVRl9FWFRcXG5cXHRcXHR2RnJhZ0RlcHRoID0gMS4wICsgZ2xfUG9zaXRpb24udztcXG5cXHRcXHR2SXNQZXJzcGVjdGl2ZSA9IGZsb2F0KCBpc1BlcnNwZWN0aXZlTWF0cml4KCBwcm9qZWN0aW9uTWF0cml4ICkgKTtcXG5cXHQjZWxzZVxcblxcdFxcdGlmICggaXNQZXJzcGVjdGl2ZU1hdHJpeCggcHJvamVjdGlvbk1hdHJpeCApICkge1xcblxcdFxcdFxcdGdsX1Bvc2l0aW9uLnogPSBsb2cyKCBtYXgoIEVQU0lMT04sIGdsX1Bvc2l0aW9uLncgKyAxLjAgKSApICogbG9nRGVwdGhCdWZGQyAtIDEuMDtcXG5cXHRcXHRcXHRnbF9Qb3NpdGlvbi56ICo9IGdsX1Bvc2l0aW9uLnc7XFxuXFx0XFx0fVxcblxcdCNlbmRpZlxcbiNlbmRpZlwiLG1hcF9mcmFnbWVudDpcIiNpZmRlZiBVU0VfTUFQXFxuXFx0dmVjNCB0ZXhlbENvbG9yID0gdGV4dHVyZTJEKCBtYXAsIHZVdiApO1xcblxcdHRleGVsQ29sb3IgPSBtYXBUZXhlbFRvTGluZWFyKCB0ZXhlbENvbG9yICk7XFxuXFx0ZGlmZnVzZUNvbG9yICo9IHRleGVsQ29sb3I7XFxuI2VuZGlmXCIsbWFwX3BhcnNfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX01BUFxcblxcdHVuaWZvcm0gc2FtcGxlcjJEIG1hcDtcXG4jZW5kaWZcIixtYXBfcGFydGljbGVfZnJhZ21lbnQ6XCIjaWYgZGVmaW5lZCggVVNFX01BUCApIHx8IGRlZmluZWQoIFVTRV9BTFBIQU1BUCApXFxuXFx0dmVjMiB1diA9ICggdXZUcmFuc2Zvcm0gKiB2ZWMzKCBnbF9Qb2ludENvb3JkLngsIDEuMCAtIGdsX1BvaW50Q29vcmQueSwgMSApICkueHk7XFxuI2VuZGlmXFxuI2lmZGVmIFVTRV9NQVBcXG5cXHR2ZWM0IG1hcFRleGVsID0gdGV4dHVyZTJEKCBtYXAsIHV2ICk7XFxuXFx0ZGlmZnVzZUNvbG9yICo9IG1hcFRleGVsVG9MaW5lYXIoIG1hcFRleGVsICk7XFxuI2VuZGlmXFxuI2lmZGVmIFVTRV9BTFBIQU1BUFxcblxcdGRpZmZ1c2VDb2xvci5hICo9IHRleHR1cmUyRCggYWxwaGFNYXAsIHV2ICkuZztcXG4jZW5kaWZcIixtYXBfcGFydGljbGVfcGFyc19mcmFnbWVudDpcIiNpZiBkZWZpbmVkKCBVU0VfTUFQICkgfHwgZGVmaW5lZCggVVNFX0FMUEhBTUFQIClcXG5cXHR1bmlmb3JtIG1hdDMgdXZUcmFuc2Zvcm07XFxuI2VuZGlmXFxuI2lmZGVmIFVTRV9NQVBcXG5cXHR1bmlmb3JtIHNhbXBsZXIyRCBtYXA7XFxuI2VuZGlmXFxuI2lmZGVmIFVTRV9BTFBIQU1BUFxcblxcdHVuaWZvcm0gc2FtcGxlcjJEIGFscGhhTWFwO1xcbiNlbmRpZlwiLG1ldGFsbmVzc21hcF9mcmFnbWVudDpcImZsb2F0IG1ldGFsbmVzc0ZhY3RvciA9IG1ldGFsbmVzcztcXG4jaWZkZWYgVVNFX01FVEFMTkVTU01BUFxcblxcdHZlYzQgdGV4ZWxNZXRhbG5lc3MgPSB0ZXh0dXJlMkQoIG1ldGFsbmVzc01hcCwgdlV2ICk7XFxuXFx0bWV0YWxuZXNzRmFjdG9yICo9IHRleGVsTWV0YWxuZXNzLmI7XFxuI2VuZGlmXCIsbWV0YWxuZXNzbWFwX3BhcnNfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX01FVEFMTkVTU01BUFxcblxcdHVuaWZvcm0gc2FtcGxlcjJEIG1ldGFsbmVzc01hcDtcXG4jZW5kaWZcIixtb3JwaG5vcm1hbF92ZXJ0ZXg6XCIjaWZkZWYgVVNFX01PUlBITk9STUFMU1xcblxcdG9iamVjdE5vcm1hbCAqPSBtb3JwaFRhcmdldEJhc2VJbmZsdWVuY2U7XFxuXFx0b2JqZWN0Tm9ybWFsICs9IG1vcnBoTm9ybWFsMCAqIG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgMCBdO1xcblxcdG9iamVjdE5vcm1hbCArPSBtb3JwaE5vcm1hbDEgKiBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDEgXTtcXG5cXHRvYmplY3ROb3JtYWwgKz0gbW9ycGhOb3JtYWwyICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyAyIF07XFxuXFx0b2JqZWN0Tm9ybWFsICs9IG1vcnBoTm9ybWFsMyAqIG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgMyBdO1xcbiNlbmRpZlwiLG1vcnBodGFyZ2V0X3BhcnNfdmVydGV4OlwiI2lmZGVmIFVTRV9NT1JQSFRBUkdFVFNcXG5cXHR1bmlmb3JtIGZsb2F0IG1vcnBoVGFyZ2V0QmFzZUluZmx1ZW5jZTtcXG5cXHQjaWZuZGVmIFVTRV9NT1JQSE5PUk1BTFNcXG5cXHRcXHR1bmlmb3JtIGZsb2F0IG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgOCBdO1xcblxcdCNlbHNlXFxuXFx0XFx0dW5pZm9ybSBmbG9hdCBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDQgXTtcXG5cXHQjZW5kaWZcXG4jZW5kaWZcIixtb3JwaHRhcmdldF92ZXJ0ZXg6XCIjaWZkZWYgVVNFX01PUlBIVEFSR0VUU1xcblxcdHRyYW5zZm9ybWVkICo9IG1vcnBoVGFyZ2V0QmFzZUluZmx1ZW5jZTtcXG5cXHR0cmFuc2Zvcm1lZCArPSBtb3JwaFRhcmdldDAgKiBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDAgXTtcXG5cXHR0cmFuc2Zvcm1lZCArPSBtb3JwaFRhcmdldDEgKiBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDEgXTtcXG5cXHR0cmFuc2Zvcm1lZCArPSBtb3JwaFRhcmdldDIgKiBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDIgXTtcXG5cXHR0cmFuc2Zvcm1lZCArPSBtb3JwaFRhcmdldDMgKiBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDMgXTtcXG5cXHQjaWZuZGVmIFVTRV9NT1JQSE5PUk1BTFNcXG5cXHRcXHR0cmFuc2Zvcm1lZCArPSBtb3JwaFRhcmdldDQgKiBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDQgXTtcXG5cXHRcXHR0cmFuc2Zvcm1lZCArPSBtb3JwaFRhcmdldDUgKiBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDUgXTtcXG5cXHRcXHR0cmFuc2Zvcm1lZCArPSBtb3JwaFRhcmdldDYgKiBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDYgXTtcXG5cXHRcXHR0cmFuc2Zvcm1lZCArPSBtb3JwaFRhcmdldDcgKiBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDcgXTtcXG5cXHQjZW5kaWZcXG4jZW5kaWZcIixub3JtYWxfZnJhZ21lbnRfYmVnaW46XCIjaWZkZWYgRkxBVF9TSEFERURcXG5cXHR2ZWMzIGZkeCA9IHZlYzMoIGRGZHgoIHZWaWV3UG9zaXRpb24ueCApLCBkRmR4KCB2Vmlld1Bvc2l0aW9uLnkgKSwgZEZkeCggdlZpZXdQb3NpdGlvbi56ICkgKTtcXG5cXHR2ZWMzIGZkeSA9IHZlYzMoIGRGZHkoIHZWaWV3UG9zaXRpb24ueCApLCBkRmR5KCB2Vmlld1Bvc2l0aW9uLnkgKSwgZEZkeSggdlZpZXdQb3NpdGlvbi56ICkgKTtcXG5cXHR2ZWMzIG5vcm1hbCA9IG5vcm1hbGl6ZSggY3Jvc3MoIGZkeCwgZmR5ICkgKTtcXG4jZWxzZVxcblxcdHZlYzMgbm9ybWFsID0gbm9ybWFsaXplKCB2Tm9ybWFsICk7XFxuXFx0I2lmZGVmIERPVUJMRV9TSURFRFxcblxcdFxcdG5vcm1hbCA9IG5vcm1hbCAqICggZmxvYXQoIGdsX0Zyb250RmFjaW5nICkgKiAyLjAgLSAxLjAgKTtcXG5cXHQjZW5kaWZcXG5cXHQjaWZkZWYgVVNFX1RBTkdFTlRcXG5cXHRcXHR2ZWMzIHRhbmdlbnQgPSBub3JtYWxpemUoIHZUYW5nZW50ICk7XFxuXFx0XFx0dmVjMyBiaXRhbmdlbnQgPSBub3JtYWxpemUoIHZCaXRhbmdlbnQgKTtcXG5cXHRcXHQjaWZkZWYgRE9VQkxFX1NJREVEXFxuXFx0XFx0XFx0dGFuZ2VudCA9IHRhbmdlbnQgKiAoIGZsb2F0KCBnbF9Gcm9udEZhY2luZyApICogMi4wIC0gMS4wICk7XFxuXFx0XFx0XFx0Yml0YW5nZW50ID0gYml0YW5nZW50ICogKCBmbG9hdCggZ2xfRnJvbnRGYWNpbmcgKSAqIDIuMCAtIDEuMCApO1xcblxcdFxcdCNlbmRpZlxcblxcdFxcdCNpZiBkZWZpbmVkKCBUQU5HRU5UU1BBQ0VfTk9STUFMTUFQICkgfHwgZGVmaW5lZCggVVNFX0NMRUFSQ09BVF9OT1JNQUxNQVAgKVxcblxcdFxcdFxcdG1hdDMgdlRCTiA9IG1hdDMoIHRhbmdlbnQsIGJpdGFuZ2VudCwgbm9ybWFsICk7XFxuXFx0XFx0I2VuZGlmXFxuXFx0I2VuZGlmXFxuI2VuZGlmXFxudmVjMyBnZW9tZXRyeU5vcm1hbCA9IG5vcm1hbDtcIixub3JtYWxfZnJhZ21lbnRfbWFwczpcIiNpZmRlZiBPQkpFQ1RTUEFDRV9OT1JNQUxNQVBcXG5cXHRub3JtYWwgPSB0ZXh0dXJlMkQoIG5vcm1hbE1hcCwgdlV2ICkueHl6ICogMi4wIC0gMS4wO1xcblxcdCNpZmRlZiBGTElQX1NJREVEXFxuXFx0XFx0bm9ybWFsID0gLSBub3JtYWw7XFxuXFx0I2VuZGlmXFxuXFx0I2lmZGVmIERPVUJMRV9TSURFRFxcblxcdFxcdG5vcm1hbCA9IG5vcm1hbCAqICggZmxvYXQoIGdsX0Zyb250RmFjaW5nICkgKiAyLjAgLSAxLjAgKTtcXG5cXHQjZW5kaWZcXG5cXHRub3JtYWwgPSBub3JtYWxpemUoIG5vcm1hbE1hdHJpeCAqIG5vcm1hbCApO1xcbiNlbGlmIGRlZmluZWQoIFRBTkdFTlRTUEFDRV9OT1JNQUxNQVAgKVxcblxcdHZlYzMgbWFwTiA9IHRleHR1cmUyRCggbm9ybWFsTWFwLCB2VXYgKS54eXogKiAyLjAgLSAxLjA7XFxuXFx0bWFwTi54eSAqPSBub3JtYWxTY2FsZTtcXG5cXHQjaWZkZWYgVVNFX1RBTkdFTlRcXG5cXHRcXHRub3JtYWwgPSBub3JtYWxpemUoIHZUQk4gKiBtYXBOICk7XFxuXFx0I2Vsc2VcXG5cXHRcXHRub3JtYWwgPSBwZXJ0dXJiTm9ybWFsMkFyYiggLXZWaWV3UG9zaXRpb24sIG5vcm1hbCwgbWFwTiApO1xcblxcdCNlbmRpZlxcbiNlbGlmIGRlZmluZWQoIFVTRV9CVU1QTUFQIClcXG5cXHRub3JtYWwgPSBwZXJ0dXJiTm9ybWFsQXJiKCAtdlZpZXdQb3NpdGlvbiwgbm9ybWFsLCBkSGR4eV9md2QoKSApO1xcbiNlbmRpZlwiLG5vcm1hbG1hcF9wYXJzX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9OT1JNQUxNQVBcXG5cXHR1bmlmb3JtIHNhbXBsZXIyRCBub3JtYWxNYXA7XFxuXFx0dW5pZm9ybSB2ZWMyIG5vcm1hbFNjYWxlO1xcbiNlbmRpZlxcbiNpZmRlZiBPQkpFQ1RTUEFDRV9OT1JNQUxNQVBcXG5cXHR1bmlmb3JtIG1hdDMgbm9ybWFsTWF0cml4O1xcbiNlbmRpZlxcbiNpZiAhIGRlZmluZWQgKCBVU0VfVEFOR0VOVCApICYmICggZGVmaW5lZCAoIFRBTkdFTlRTUEFDRV9OT1JNQUxNQVAgKSB8fCBkZWZpbmVkICggVVNFX0NMRUFSQ09BVF9OT1JNQUxNQVAgKSApXFxuXFx0dmVjMyBwZXJ0dXJiTm9ybWFsMkFyYiggdmVjMyBleWVfcG9zLCB2ZWMzIHN1cmZfbm9ybSwgdmVjMyBtYXBOICkge1xcblxcdFxcdHZlYzMgcTAgPSB2ZWMzKCBkRmR4KCBleWVfcG9zLnggKSwgZEZkeCggZXllX3Bvcy55ICksIGRGZHgoIGV5ZV9wb3MueiApICk7XFxuXFx0XFx0dmVjMyBxMSA9IHZlYzMoIGRGZHkoIGV5ZV9wb3MueCApLCBkRmR5KCBleWVfcG9zLnkgKSwgZEZkeSggZXllX3Bvcy56ICkgKTtcXG5cXHRcXHR2ZWMyIHN0MCA9IGRGZHgoIHZVdi5zdCApO1xcblxcdFxcdHZlYzIgc3QxID0gZEZkeSggdlV2LnN0ICk7XFxuXFx0XFx0ZmxvYXQgc2NhbGUgPSBzaWduKCBzdDEudCAqIHN0MC5zIC0gc3QwLnQgKiBzdDEucyApO1xcblxcdFxcdHZlYzMgUyA9IG5vcm1hbGl6ZSggKCBxMCAqIHN0MS50IC0gcTEgKiBzdDAudCApICogc2NhbGUgKTtcXG5cXHRcXHR2ZWMzIFQgPSBub3JtYWxpemUoICggLSBxMCAqIHN0MS5zICsgcTEgKiBzdDAucyApICogc2NhbGUgKTtcXG5cXHRcXHR2ZWMzIE4gPSBub3JtYWxpemUoIHN1cmZfbm9ybSApO1xcblxcdFxcdG1hdDMgdHNuID0gbWF0MyggUywgVCwgTiApO1xcblxcdFxcdG1hcE4ueHkgKj0gKCBmbG9hdCggZ2xfRnJvbnRGYWNpbmcgKSAqIDIuMCAtIDEuMCApO1xcblxcdFxcdHJldHVybiBub3JtYWxpemUoIHRzbiAqIG1hcE4gKTtcXG5cXHR9XFxuI2VuZGlmXCIsY2xlYXJjb2F0X25vcm1hbF9mcmFnbWVudF9iZWdpbjpcIiNpZmRlZiBDTEVBUkNPQVRcXG5cXHR2ZWMzIGNsZWFyY29hdE5vcm1hbCA9IGdlb21ldHJ5Tm9ybWFsO1xcbiNlbmRpZlwiLGNsZWFyY29hdF9ub3JtYWxfZnJhZ21lbnRfbWFwczpcIiNpZmRlZiBVU0VfQ0xFQVJDT0FUX05PUk1BTE1BUFxcblxcdHZlYzMgY2xlYXJjb2F0TWFwTiA9IHRleHR1cmUyRCggY2xlYXJjb2F0Tm9ybWFsTWFwLCB2VXYgKS54eXogKiAyLjAgLSAxLjA7XFxuXFx0Y2xlYXJjb2F0TWFwTi54eSAqPSBjbGVhcmNvYXROb3JtYWxTY2FsZTtcXG5cXHQjaWZkZWYgVVNFX1RBTkdFTlRcXG5cXHRcXHRjbGVhcmNvYXROb3JtYWwgPSBub3JtYWxpemUoIHZUQk4gKiBjbGVhcmNvYXRNYXBOICk7XFxuXFx0I2Vsc2VcXG5cXHRcXHRjbGVhcmNvYXROb3JtYWwgPSBwZXJ0dXJiTm9ybWFsMkFyYiggLSB2Vmlld1Bvc2l0aW9uLCBjbGVhcmNvYXROb3JtYWwsIGNsZWFyY29hdE1hcE4gKTtcXG5cXHQjZW5kaWZcXG4jZW5kaWZcIixjbGVhcmNvYXRfcGFyc19mcmFnbWVudDpcIiNpZmRlZiBVU0VfQ0xFQVJDT0FUTUFQXFxuXFx0dW5pZm9ybSBzYW1wbGVyMkQgY2xlYXJjb2F0TWFwO1xcbiNlbmRpZlxcbiNpZmRlZiBVU0VfQ0xFQVJDT0FUX1JPVUdITkVTU01BUFxcblxcdHVuaWZvcm0gc2FtcGxlcjJEIGNsZWFyY29hdFJvdWdobmVzc01hcDtcXG4jZW5kaWZcXG4jaWZkZWYgVVNFX0NMRUFSQ09BVF9OT1JNQUxNQVBcXG5cXHR1bmlmb3JtIHNhbXBsZXIyRCBjbGVhcmNvYXROb3JtYWxNYXA7XFxuXFx0dW5pZm9ybSB2ZWMyIGNsZWFyY29hdE5vcm1hbFNjYWxlO1xcbiNlbmRpZlwiLHBhY2tpbmc6XCJ2ZWMzIHBhY2tOb3JtYWxUb1JHQiggY29uc3QgaW4gdmVjMyBub3JtYWwgKSB7XFxuXFx0cmV0dXJuIG5vcm1hbGl6ZSggbm9ybWFsICkgKiAwLjUgKyAwLjU7XFxufVxcbnZlYzMgdW5wYWNrUkdCVG9Ob3JtYWwoIGNvbnN0IGluIHZlYzMgcmdiICkge1xcblxcdHJldHVybiAyLjAgKiByZ2IueHl6IC0gMS4wO1xcbn1cXG5jb25zdCBmbG9hdCBQYWNrVXBzY2FsZSA9IDI1Ni4gLyAyNTUuO2NvbnN0IGZsb2F0IFVucGFja0Rvd25zY2FsZSA9IDI1NS4gLyAyNTYuO1xcbmNvbnN0IHZlYzMgUGFja0ZhY3RvcnMgPSB2ZWMzKCAyNTYuICogMjU2LiAqIDI1Ni4sIDI1Ni4gKiAyNTYuLCAyNTYuICk7XFxuY29uc3QgdmVjNCBVbnBhY2tGYWN0b3JzID0gVW5wYWNrRG93bnNjYWxlIC8gdmVjNCggUGFja0ZhY3RvcnMsIDEuICk7XFxuY29uc3QgZmxvYXQgU2hpZnRSaWdodDggPSAxLiAvIDI1Ni47XFxudmVjNCBwYWNrRGVwdGhUb1JHQkEoIGNvbnN0IGluIGZsb2F0IHYgKSB7XFxuXFx0dmVjNCByID0gdmVjNCggZnJhY3QoIHYgKiBQYWNrRmFjdG9ycyApLCB2ICk7XFxuXFx0ci55encgLT0gci54eXogKiBTaGlmdFJpZ2h0ODtcXHRyZXR1cm4gciAqIFBhY2tVcHNjYWxlO1xcbn1cXG5mbG9hdCB1bnBhY2tSR0JBVG9EZXB0aCggY29uc3QgaW4gdmVjNCB2ICkge1xcblxcdHJldHVybiBkb3QoIHYsIFVucGFja0ZhY3RvcnMgKTtcXG59XFxudmVjNCBwYWNrMkhhbGZUb1JHQkEoIHZlYzIgdiApIHtcXG5cXHR2ZWM0IHIgPSB2ZWM0KCB2LngsIGZyYWN0KCB2LnggKiAyNTUuMCApLCB2LnksIGZyYWN0KCB2LnkgKiAyNTUuMCApKTtcXG5cXHRyZXR1cm4gdmVjNCggci54IC0gci55IC8gMjU1LjAsIHIueSwgci56IC0gci53IC8gMjU1LjAsIHIudyk7XFxufVxcbnZlYzIgdW5wYWNrUkdCQVRvMkhhbGYoIHZlYzQgdiApIHtcXG5cXHRyZXR1cm4gdmVjMiggdi54ICsgKCB2LnkgLyAyNTUuMCApLCB2LnogKyAoIHYudyAvIDI1NS4wICkgKTtcXG59XFxuZmxvYXQgdmlld1pUb09ydGhvZ3JhcGhpY0RlcHRoKCBjb25zdCBpbiBmbG9hdCB2aWV3WiwgY29uc3QgaW4gZmxvYXQgbmVhciwgY29uc3QgaW4gZmxvYXQgZmFyICkge1xcblxcdHJldHVybiAoIHZpZXdaICsgbmVhciApIC8gKCBuZWFyIC0gZmFyICk7XFxufVxcbmZsb2F0IG9ydGhvZ3JhcGhpY0RlcHRoVG9WaWV3WiggY29uc3QgaW4gZmxvYXQgbGluZWFyQ2xpcFosIGNvbnN0IGluIGZsb2F0IG5lYXIsIGNvbnN0IGluIGZsb2F0IGZhciApIHtcXG5cXHRyZXR1cm4gbGluZWFyQ2xpcFogKiAoIG5lYXIgLSBmYXIgKSAtIG5lYXI7XFxufVxcbmZsb2F0IHZpZXdaVG9QZXJzcGVjdGl2ZURlcHRoKCBjb25zdCBpbiBmbG9hdCB2aWV3WiwgY29uc3QgaW4gZmxvYXQgbmVhciwgY29uc3QgaW4gZmxvYXQgZmFyICkge1xcblxcdHJldHVybiAoKCBuZWFyICsgdmlld1ogKSAqIGZhciApIC8gKCggZmFyIC0gbmVhciApICogdmlld1ogKTtcXG59XFxuZmxvYXQgcGVyc3BlY3RpdmVEZXB0aFRvVmlld1ooIGNvbnN0IGluIGZsb2F0IGludkNsaXBaLCBjb25zdCBpbiBmbG9hdCBuZWFyLCBjb25zdCBpbiBmbG9hdCBmYXIgKSB7XFxuXFx0cmV0dXJuICggbmVhciAqIGZhciApIC8gKCAoIGZhciAtIG5lYXIgKSAqIGludkNsaXBaIC0gZmFyICk7XFxufVwiLHByZW11bHRpcGxpZWRfYWxwaGFfZnJhZ21lbnQ6XCIjaWZkZWYgUFJFTVVMVElQTElFRF9BTFBIQVxcblxcdGdsX0ZyYWdDb2xvci5yZ2IgKj0gZ2xfRnJhZ0NvbG9yLmE7XFxuI2VuZGlmXCIscHJvamVjdF92ZXJ0ZXg6XCJ2ZWM0IG12UG9zaXRpb24gPSB2ZWM0KCB0cmFuc2Zvcm1lZCwgMS4wICk7XFxuI2lmZGVmIFVTRV9JTlNUQU5DSU5HXFxuXFx0bXZQb3NpdGlvbiA9IGluc3RhbmNlTWF0cml4ICogbXZQb3NpdGlvbjtcXG4jZW5kaWZcXG5tdlBvc2l0aW9uID0gbW9kZWxWaWV3TWF0cml4ICogbXZQb3NpdGlvbjtcXG5nbF9Qb3NpdGlvbiA9IHByb2plY3Rpb25NYXRyaXggKiBtdlBvc2l0aW9uO1wiLGRpdGhlcmluZ19mcmFnbWVudDpcIiNpZmRlZiBESVRIRVJJTkdcXG5cXHRnbF9GcmFnQ29sb3IucmdiID0gZGl0aGVyaW5nKCBnbF9GcmFnQ29sb3IucmdiICk7XFxuI2VuZGlmXCIsZGl0aGVyaW5nX3BhcnNfZnJhZ21lbnQ6XCIjaWZkZWYgRElUSEVSSU5HXFxuXFx0dmVjMyBkaXRoZXJpbmcoIHZlYzMgY29sb3IgKSB7XFxuXFx0XFx0ZmxvYXQgZ3JpZF9wb3NpdGlvbiA9IHJhbmQoIGdsX0ZyYWdDb29yZC54eSApO1xcblxcdFxcdHZlYzMgZGl0aGVyX3NoaWZ0X1JHQiA9IHZlYzMoIDAuMjUgLyAyNTUuMCwgLTAuMjUgLyAyNTUuMCwgMC4yNSAvIDI1NS4wICk7XFxuXFx0XFx0ZGl0aGVyX3NoaWZ0X1JHQiA9IG1peCggMi4wICogZGl0aGVyX3NoaWZ0X1JHQiwgLTIuMCAqIGRpdGhlcl9zaGlmdF9SR0IsIGdyaWRfcG9zaXRpb24gKTtcXG5cXHRcXHRyZXR1cm4gY29sb3IgKyBkaXRoZXJfc2hpZnRfUkdCO1xcblxcdH1cXG4jZW5kaWZcIixyb3VnaG5lc3NtYXBfZnJhZ21lbnQ6XCJmbG9hdCByb3VnaG5lc3NGYWN0b3IgPSByb3VnaG5lc3M7XFxuI2lmZGVmIFVTRV9ST1VHSE5FU1NNQVBcXG5cXHR2ZWM0IHRleGVsUm91Z2huZXNzID0gdGV4dHVyZTJEKCByb3VnaG5lc3NNYXAsIHZVdiApO1xcblxcdHJvdWdobmVzc0ZhY3RvciAqPSB0ZXhlbFJvdWdobmVzcy5nO1xcbiNlbmRpZlwiLHJvdWdobmVzc21hcF9wYXJzX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9ST1VHSE5FU1NNQVBcXG5cXHR1bmlmb3JtIHNhbXBsZXIyRCByb3VnaG5lc3NNYXA7XFxuI2VuZGlmXCIsc2hhZG93bWFwX3BhcnNfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX1NIQURPV01BUFxcblxcdCNpZiBOVU1fRElSX0xJR0hUX1NIQURPV1MgPiAwXFxuXFx0XFx0dW5pZm9ybSBzYW1wbGVyMkQgZGlyZWN0aW9uYWxTaGFkb3dNYXBbIE5VTV9ESVJfTElHSFRfU0hBRE9XUyBdO1xcblxcdFxcdHZhcnlpbmcgdmVjNCB2RGlyZWN0aW9uYWxTaGFkb3dDb29yZFsgTlVNX0RJUl9MSUdIVF9TSEFET1dTIF07XFxuXFx0XFx0c3RydWN0IERpcmVjdGlvbmFsTGlnaHRTaGFkb3cge1xcblxcdFxcdFxcdGZsb2F0IHNoYWRvd0JpYXM7XFxuXFx0XFx0XFx0ZmxvYXQgc2hhZG93Tm9ybWFsQmlhcztcXG5cXHRcXHRcXHRmbG9hdCBzaGFkb3dSYWRpdXM7XFxuXFx0XFx0XFx0dmVjMiBzaGFkb3dNYXBTaXplO1xcblxcdFxcdH07XFxuXFx0XFx0dW5pZm9ybSBEaXJlY3Rpb25hbExpZ2h0U2hhZG93IGRpcmVjdGlvbmFsTGlnaHRTaGFkb3dzWyBOVU1fRElSX0xJR0hUX1NIQURPV1MgXTtcXG5cXHQjZW5kaWZcXG5cXHQjaWYgTlVNX1NQT1RfTElHSFRfU0hBRE9XUyA+IDBcXG5cXHRcXHR1bmlmb3JtIHNhbXBsZXIyRCBzcG90U2hhZG93TWFwWyBOVU1fU1BPVF9MSUdIVF9TSEFET1dTIF07XFxuXFx0XFx0dmFyeWluZyB2ZWM0IHZTcG90U2hhZG93Q29vcmRbIE5VTV9TUE9UX0xJR0hUX1NIQURPV1MgXTtcXG5cXHRcXHRzdHJ1Y3QgU3BvdExpZ2h0U2hhZG93IHtcXG5cXHRcXHRcXHRmbG9hdCBzaGFkb3dCaWFzO1xcblxcdFxcdFxcdGZsb2F0IHNoYWRvd05vcm1hbEJpYXM7XFxuXFx0XFx0XFx0ZmxvYXQgc2hhZG93UmFkaXVzO1xcblxcdFxcdFxcdHZlYzIgc2hhZG93TWFwU2l6ZTtcXG5cXHRcXHR9O1xcblxcdFxcdHVuaWZvcm0gU3BvdExpZ2h0U2hhZG93IHNwb3RMaWdodFNoYWRvd3NbIE5VTV9TUE9UX0xJR0hUX1NIQURPV1MgXTtcXG5cXHQjZW5kaWZcXG5cXHQjaWYgTlVNX1BPSU5UX0xJR0hUX1NIQURPV1MgPiAwXFxuXFx0XFx0dW5pZm9ybSBzYW1wbGVyMkQgcG9pbnRTaGFkb3dNYXBbIE5VTV9QT0lOVF9MSUdIVF9TSEFET1dTIF07XFxuXFx0XFx0dmFyeWluZyB2ZWM0IHZQb2ludFNoYWRvd0Nvb3JkWyBOVU1fUE9JTlRfTElHSFRfU0hBRE9XUyBdO1xcblxcdFxcdHN0cnVjdCBQb2ludExpZ2h0U2hhZG93IHtcXG5cXHRcXHRcXHRmbG9hdCBzaGFkb3dCaWFzO1xcblxcdFxcdFxcdGZsb2F0IHNoYWRvd05vcm1hbEJpYXM7XFxuXFx0XFx0XFx0ZmxvYXQgc2hhZG93UmFkaXVzO1xcblxcdFxcdFxcdHZlYzIgc2hhZG93TWFwU2l6ZTtcXG5cXHRcXHRcXHRmbG9hdCBzaGFkb3dDYW1lcmFOZWFyO1xcblxcdFxcdFxcdGZsb2F0IHNoYWRvd0NhbWVyYUZhcjtcXG5cXHRcXHR9O1xcblxcdFxcdHVuaWZvcm0gUG9pbnRMaWdodFNoYWRvdyBwb2ludExpZ2h0U2hhZG93c1sgTlVNX1BPSU5UX0xJR0hUX1NIQURPV1MgXTtcXG5cXHQjZW5kaWZcXG5cXHRmbG9hdCB0ZXh0dXJlMkRDb21wYXJlKCBzYW1wbGVyMkQgZGVwdGhzLCB2ZWMyIHV2LCBmbG9hdCBjb21wYXJlICkge1xcblxcdFxcdHJldHVybiBzdGVwKCBjb21wYXJlLCB1bnBhY2tSR0JBVG9EZXB0aCggdGV4dHVyZTJEKCBkZXB0aHMsIHV2ICkgKSApO1xcblxcdH1cXG5cXHR2ZWMyIHRleHR1cmUyRERpc3RyaWJ1dGlvbiggc2FtcGxlcjJEIHNoYWRvdywgdmVjMiB1diApIHtcXG5cXHRcXHRyZXR1cm4gdW5wYWNrUkdCQVRvMkhhbGYoIHRleHR1cmUyRCggc2hhZG93LCB1diApICk7XFxuXFx0fVxcblxcdGZsb2F0IFZTTVNoYWRvdyAoc2FtcGxlcjJEIHNoYWRvdywgdmVjMiB1diwgZmxvYXQgY29tcGFyZSApe1xcblxcdFxcdGZsb2F0IG9jY2x1c2lvbiA9IDEuMDtcXG5cXHRcXHR2ZWMyIGRpc3RyaWJ1dGlvbiA9IHRleHR1cmUyRERpc3RyaWJ1dGlvbiggc2hhZG93LCB1diApO1xcblxcdFxcdGZsb2F0IGhhcmRfc2hhZG93ID0gc3RlcCggY29tcGFyZSAsIGRpc3RyaWJ1dGlvbi54ICk7XFxuXFx0XFx0aWYgKGhhcmRfc2hhZG93ICE9IDEuMCApIHtcXG5cXHRcXHRcXHRmbG9hdCBkaXN0YW5jZSA9IGNvbXBhcmUgLSBkaXN0cmlidXRpb24ueCA7XFxuXFx0XFx0XFx0ZmxvYXQgdmFyaWFuY2UgPSBtYXgoIDAuMDAwMDAsIGRpc3RyaWJ1dGlvbi55ICogZGlzdHJpYnV0aW9uLnkgKTtcXG5cXHRcXHRcXHRmbG9hdCBzb2Z0bmVzc19wcm9iYWJpbGl0eSA9IHZhcmlhbmNlIC8gKHZhcmlhbmNlICsgZGlzdGFuY2UgKiBkaXN0YW5jZSApO1xcdFxcdFxcdHNvZnRuZXNzX3Byb2JhYmlsaXR5ID0gY2xhbXAoICggc29mdG5lc3NfcHJvYmFiaWxpdHkgLSAwLjMgKSAvICggMC45NSAtIDAuMyApLCAwLjAsIDEuMCApO1xcdFxcdFxcdG9jY2x1c2lvbiA9IGNsYW1wKCBtYXgoIGhhcmRfc2hhZG93LCBzb2Z0bmVzc19wcm9iYWJpbGl0eSApLCAwLjAsIDEuMCApO1xcblxcdFxcdH1cXG5cXHRcXHRyZXR1cm4gb2NjbHVzaW9uO1xcblxcdH1cXG5cXHRmbG9hdCBnZXRTaGFkb3coIHNhbXBsZXIyRCBzaGFkb3dNYXAsIHZlYzIgc2hhZG93TWFwU2l6ZSwgZmxvYXQgc2hhZG93QmlhcywgZmxvYXQgc2hhZG93UmFkaXVzLCB2ZWM0IHNoYWRvd0Nvb3JkICkge1xcblxcdFxcdGZsb2F0IHNoYWRvdyA9IDEuMDtcXG5cXHRcXHRzaGFkb3dDb29yZC54eXogLz0gc2hhZG93Q29vcmQudztcXG5cXHRcXHRzaGFkb3dDb29yZC56ICs9IHNoYWRvd0JpYXM7XFxuXFx0XFx0YnZlYzQgaW5GcnVzdHVtVmVjID0gYnZlYzQgKCBzaGFkb3dDb29yZC54ID49IDAuMCwgc2hhZG93Q29vcmQueCA8PSAxLjAsIHNoYWRvd0Nvb3JkLnkgPj0gMC4wLCBzaGFkb3dDb29yZC55IDw9IDEuMCApO1xcblxcdFxcdGJvb2wgaW5GcnVzdHVtID0gYWxsKCBpbkZydXN0dW1WZWMgKTtcXG5cXHRcXHRidmVjMiBmcnVzdHVtVGVzdFZlYyA9IGJ2ZWMyKCBpbkZydXN0dW0sIHNoYWRvd0Nvb3JkLnogPD0gMS4wICk7XFxuXFx0XFx0Ym9vbCBmcnVzdHVtVGVzdCA9IGFsbCggZnJ1c3R1bVRlc3RWZWMgKTtcXG5cXHRcXHRpZiAoIGZydXN0dW1UZXN0ICkge1xcblxcdFxcdCNpZiBkZWZpbmVkKCBTSEFET1dNQVBfVFlQRV9QQ0YgKVxcblxcdFxcdFxcdHZlYzIgdGV4ZWxTaXplID0gdmVjMiggMS4wICkgLyBzaGFkb3dNYXBTaXplO1xcblxcdFxcdFxcdGZsb2F0IGR4MCA9IC0gdGV4ZWxTaXplLnggKiBzaGFkb3dSYWRpdXM7XFxuXFx0XFx0XFx0ZmxvYXQgZHkwID0gLSB0ZXhlbFNpemUueSAqIHNoYWRvd1JhZGl1cztcXG5cXHRcXHRcXHRmbG9hdCBkeDEgPSArIHRleGVsU2l6ZS54ICogc2hhZG93UmFkaXVzO1xcblxcdFxcdFxcdGZsb2F0IGR5MSA9ICsgdGV4ZWxTaXplLnkgKiBzaGFkb3dSYWRpdXM7XFxuXFx0XFx0XFx0ZmxvYXQgZHgyID0gZHgwIC8gMi4wO1xcblxcdFxcdFxcdGZsb2F0IGR5MiA9IGR5MCAvIDIuMDtcXG5cXHRcXHRcXHRmbG9hdCBkeDMgPSBkeDEgLyAyLjA7XFxuXFx0XFx0XFx0ZmxvYXQgZHkzID0gZHkxIC8gMi4wO1xcblxcdFxcdFxcdHNoYWRvdyA9IChcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgwLCBkeTAgKSwgc2hhZG93Q29vcmQueiApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggMC4wLCBkeTAgKSwgc2hhZG93Q29vcmQueiApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgxLCBkeTAgKSwgc2hhZG93Q29vcmQueiApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgyLCBkeTIgKSwgc2hhZG93Q29vcmQueiApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggMC4wLCBkeTIgKSwgc2hhZG93Q29vcmQueiApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgzLCBkeTIgKSwgc2hhZG93Q29vcmQueiApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgwLCAwLjAgKSwgc2hhZG93Q29vcmQueiApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgyLCAwLjAgKSwgc2hhZG93Q29vcmQueiApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHNoYWRvd0Nvb3JkLnh5LCBzaGFkb3dDb29yZC56ICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCBkeDMsIDAuMCApLCBzaGFkb3dDb29yZC56ICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCBkeDEsIDAuMCApLCBzaGFkb3dDb29yZC56ICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCBkeDIsIGR5MyApLCBzaGFkb3dDb29yZC56ICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCAwLjAsIGR5MyApLCBzaGFkb3dDb29yZC56ICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCBkeDMsIGR5MyApLCBzaGFkb3dDb29yZC56ICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCBkeDAsIGR5MSApLCBzaGFkb3dDb29yZC56ICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCAwLjAsIGR5MSApLCBzaGFkb3dDb29yZC56ICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCBkeDEsIGR5MSApLCBzaGFkb3dDb29yZC56IClcXG5cXHRcXHRcXHQpICogKCAxLjAgLyAxNy4wICk7XFxuXFx0XFx0I2VsaWYgZGVmaW5lZCggU0hBRE9XTUFQX1RZUEVfUENGX1NPRlQgKVxcblxcdFxcdFxcdHZlYzIgdGV4ZWxTaXplID0gdmVjMiggMS4wICkgLyBzaGFkb3dNYXBTaXplO1xcblxcdFxcdFxcdGZsb2F0IGR4ID0gdGV4ZWxTaXplLng7XFxuXFx0XFx0XFx0ZmxvYXQgZHkgPSB0ZXhlbFNpemUueTtcXG5cXHRcXHRcXHR2ZWMyIHV2ID0gc2hhZG93Q29vcmQueHk7XFxuXFx0XFx0XFx0dmVjMiBmID0gZnJhY3QoIHV2ICogc2hhZG93TWFwU2l6ZSArIDAuNSApO1xcblxcdFxcdFxcdHV2IC09IGYgKiB0ZXhlbFNpemU7XFxuXFx0XFx0XFx0c2hhZG93ID0gKFxcblxcdFxcdFxcdFxcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgdXYsIHNoYWRvd0Nvb3JkLnogKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCB1diArIHZlYzIoIGR4LCAwLjAgKSwgc2hhZG93Q29vcmQueiApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHV2ICsgdmVjMiggMC4wLCBkeSApLCBzaGFkb3dDb29yZC56ICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgdXYgKyB0ZXhlbFNpemUsIHNoYWRvd0Nvb3JkLnogKSArXFxuXFx0XFx0XFx0XFx0bWl4KCB0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHV2ICsgdmVjMiggLWR4LCAwLjAgKSwgc2hhZG93Q29vcmQueiApLCBcXG5cXHRcXHRcXHRcXHRcXHQgdGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCB1diArIHZlYzIoIDIuMCAqIGR4LCAwLjAgKSwgc2hhZG93Q29vcmQueiApLFxcblxcdFxcdFxcdFxcdFxcdCBmLnggKSArXFxuXFx0XFx0XFx0XFx0bWl4KCB0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHV2ICsgdmVjMiggLWR4LCBkeSApLCBzaGFkb3dDb29yZC56ICksIFxcblxcdFxcdFxcdFxcdFxcdCB0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHV2ICsgdmVjMiggMi4wICogZHgsIGR5ICksIHNoYWRvd0Nvb3JkLnogKSxcXG5cXHRcXHRcXHRcXHRcXHQgZi54ICkgK1xcblxcdFxcdFxcdFxcdG1peCggdGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCB1diArIHZlYzIoIDAuMCwgLWR5ICksIHNoYWRvd0Nvb3JkLnogKSwgXFxuXFx0XFx0XFx0XFx0XFx0IHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgdXYgKyB2ZWMyKCAwLjAsIDIuMCAqIGR5ICksIHNoYWRvd0Nvb3JkLnogKSxcXG5cXHRcXHRcXHRcXHRcXHQgZi55ICkgK1xcblxcdFxcdFxcdFxcdG1peCggdGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCB1diArIHZlYzIoIGR4LCAtZHkgKSwgc2hhZG93Q29vcmQueiApLCBcXG5cXHRcXHRcXHRcXHRcXHQgdGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCB1diArIHZlYzIoIGR4LCAyLjAgKiBkeSApLCBzaGFkb3dDb29yZC56ICksXFxuXFx0XFx0XFx0XFx0XFx0IGYueSApICtcXG5cXHRcXHRcXHRcXHRtaXgoIG1peCggdGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCB1diArIHZlYzIoIC1keCwgLWR5ICksIHNoYWRvd0Nvb3JkLnogKSwgXFxuXFx0XFx0XFx0XFx0XFx0XFx0ICB0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHV2ICsgdmVjMiggMi4wICogZHgsIC1keSApLCBzaGFkb3dDb29yZC56ICksXFxuXFx0XFx0XFx0XFx0XFx0XFx0ICBmLnggKSxcXG5cXHRcXHRcXHRcXHRcXHQgbWl4KCB0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHV2ICsgdmVjMiggLWR4LCAyLjAgKiBkeSApLCBzaGFkb3dDb29yZC56ICksIFxcblxcdFxcdFxcdFxcdFxcdFxcdCAgdGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCB1diArIHZlYzIoIDIuMCAqIGR4LCAyLjAgKiBkeSApLCBzaGFkb3dDb29yZC56ICksXFxuXFx0XFx0XFx0XFx0XFx0XFx0ICBmLnggKSxcXG5cXHRcXHRcXHRcXHRcXHQgZi55IClcXG5cXHRcXHRcXHQpICogKCAxLjAgLyA5LjAgKTtcXG5cXHRcXHQjZWxpZiBkZWZpbmVkKCBTSEFET1dNQVBfVFlQRV9WU00gKVxcblxcdFxcdFxcdHNoYWRvdyA9IFZTTVNoYWRvdyggc2hhZG93TWFwLCBzaGFkb3dDb29yZC54eSwgc2hhZG93Q29vcmQueiApO1xcblxcdFxcdCNlbHNlXFxuXFx0XFx0XFx0c2hhZG93ID0gdGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBzaGFkb3dDb29yZC54eSwgc2hhZG93Q29vcmQueiApO1xcblxcdFxcdCNlbmRpZlxcblxcdFxcdH1cXG5cXHRcXHRyZXR1cm4gc2hhZG93O1xcblxcdH1cXG5cXHR2ZWMyIGN1YmVUb1VWKCB2ZWMzIHYsIGZsb2F0IHRleGVsU2l6ZVkgKSB7XFxuXFx0XFx0dmVjMyBhYnNWID0gYWJzKCB2ICk7XFxuXFx0XFx0ZmxvYXQgc2NhbGVUb0N1YmUgPSAxLjAgLyBtYXgoIGFic1YueCwgbWF4KCBhYnNWLnksIGFic1YueiApICk7XFxuXFx0XFx0YWJzViAqPSBzY2FsZVRvQ3ViZTtcXG5cXHRcXHR2ICo9IHNjYWxlVG9DdWJlICogKCAxLjAgLSAyLjAgKiB0ZXhlbFNpemVZICk7XFxuXFx0XFx0dmVjMiBwbGFuYXIgPSB2Lnh5O1xcblxcdFxcdGZsb2F0IGFsbW9zdEFUZXhlbCA9IDEuNSAqIHRleGVsU2l6ZVk7XFxuXFx0XFx0ZmxvYXQgYWxtb3N0T25lID0gMS4wIC0gYWxtb3N0QVRleGVsO1xcblxcdFxcdGlmICggYWJzVi56ID49IGFsbW9zdE9uZSApIHtcXG5cXHRcXHRcXHRpZiAoIHYueiA+IDAuMCApXFxuXFx0XFx0XFx0XFx0cGxhbmFyLnggPSA0LjAgLSB2Lng7XFxuXFx0XFx0fSBlbHNlIGlmICggYWJzVi54ID49IGFsbW9zdE9uZSApIHtcXG5cXHRcXHRcXHRmbG9hdCBzaWduWCA9IHNpZ24oIHYueCApO1xcblxcdFxcdFxcdHBsYW5hci54ID0gdi56ICogc2lnblggKyAyLjAgKiBzaWduWDtcXG5cXHRcXHR9IGVsc2UgaWYgKCBhYnNWLnkgPj0gYWxtb3N0T25lICkge1xcblxcdFxcdFxcdGZsb2F0IHNpZ25ZID0gc2lnbiggdi55ICk7XFxuXFx0XFx0XFx0cGxhbmFyLnggPSB2LnggKyAyLjAgKiBzaWduWSArIDIuMDtcXG5cXHRcXHRcXHRwbGFuYXIueSA9IHYueiAqIHNpZ25ZIC0gMi4wO1xcblxcdFxcdH1cXG5cXHRcXHRyZXR1cm4gdmVjMiggMC4xMjUsIDAuMjUgKSAqIHBsYW5hciArIHZlYzIoIDAuMzc1LCAwLjc1ICk7XFxuXFx0fVxcblxcdGZsb2F0IGdldFBvaW50U2hhZG93KCBzYW1wbGVyMkQgc2hhZG93TWFwLCB2ZWMyIHNoYWRvd01hcFNpemUsIGZsb2F0IHNoYWRvd0JpYXMsIGZsb2F0IHNoYWRvd1JhZGl1cywgdmVjNCBzaGFkb3dDb29yZCwgZmxvYXQgc2hhZG93Q2FtZXJhTmVhciwgZmxvYXQgc2hhZG93Q2FtZXJhRmFyICkge1xcblxcdFxcdHZlYzIgdGV4ZWxTaXplID0gdmVjMiggMS4wICkgLyAoIHNoYWRvd01hcFNpemUgKiB2ZWMyKCA0LjAsIDIuMCApICk7XFxuXFx0XFx0dmVjMyBsaWdodFRvUG9zaXRpb24gPSBzaGFkb3dDb29yZC54eXo7XFxuXFx0XFx0ZmxvYXQgZHAgPSAoIGxlbmd0aCggbGlnaHRUb1Bvc2l0aW9uICkgLSBzaGFkb3dDYW1lcmFOZWFyICkgLyAoIHNoYWRvd0NhbWVyYUZhciAtIHNoYWRvd0NhbWVyYU5lYXIgKTtcXHRcXHRkcCArPSBzaGFkb3dCaWFzO1xcblxcdFxcdHZlYzMgYmQzRCA9IG5vcm1hbGl6ZSggbGlnaHRUb1Bvc2l0aW9uICk7XFxuXFx0XFx0I2lmIGRlZmluZWQoIFNIQURPV01BUF9UWVBFX1BDRiApIHx8IGRlZmluZWQoIFNIQURPV01BUF9UWVBFX1BDRl9TT0ZUICkgfHwgZGVmaW5lZCggU0hBRE9XTUFQX1RZUEVfVlNNIClcXG5cXHRcXHRcXHR2ZWMyIG9mZnNldCA9IHZlYzIoIC0gMSwgMSApICogc2hhZG93UmFkaXVzICogdGV4ZWxTaXplLnk7XFxuXFx0XFx0XFx0cmV0dXJuIChcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIGN1YmVUb1VWKCBiZDNEICsgb2Zmc2V0Lnh5eSwgdGV4ZWxTaXplLnkgKSwgZHAgKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBjdWJlVG9VViggYmQzRCArIG9mZnNldC55eXksIHRleGVsU2l6ZS55ICksIGRwICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgY3ViZVRvVVYoIGJkM0QgKyBvZmZzZXQueHl4LCB0ZXhlbFNpemUueSApLCBkcCApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIGN1YmVUb1VWKCBiZDNEICsgb2Zmc2V0Lnl5eCwgdGV4ZWxTaXplLnkgKSwgZHAgKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBjdWJlVG9VViggYmQzRCwgdGV4ZWxTaXplLnkgKSwgZHAgKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBjdWJlVG9VViggYmQzRCArIG9mZnNldC54eHksIHRleGVsU2l6ZS55ICksIGRwICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgY3ViZVRvVVYoIGJkM0QgKyBvZmZzZXQueXh5LCB0ZXhlbFNpemUueSApLCBkcCApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIGN1YmVUb1VWKCBiZDNEICsgb2Zmc2V0Lnh4eCwgdGV4ZWxTaXplLnkgKSwgZHAgKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBjdWJlVG9VViggYmQzRCArIG9mZnNldC55eHgsIHRleGVsU2l6ZS55ICksIGRwIClcXG5cXHRcXHRcXHQpICogKCAxLjAgLyA5LjAgKTtcXG5cXHRcXHQjZWxzZVxcblxcdFxcdFxcdHJldHVybiB0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIGN1YmVUb1VWKCBiZDNELCB0ZXhlbFNpemUueSApLCBkcCApO1xcblxcdFxcdCNlbmRpZlxcblxcdH1cXG4jZW5kaWZcIixzaGFkb3dtYXBfcGFyc192ZXJ0ZXg6XCIjaWZkZWYgVVNFX1NIQURPV01BUFxcblxcdCNpZiBOVU1fRElSX0xJR0hUX1NIQURPV1MgPiAwXFxuXFx0XFx0dW5pZm9ybSBtYXQ0IGRpcmVjdGlvbmFsU2hhZG93TWF0cml4WyBOVU1fRElSX0xJR0hUX1NIQURPV1MgXTtcXG5cXHRcXHR2YXJ5aW5nIHZlYzQgdkRpcmVjdGlvbmFsU2hhZG93Q29vcmRbIE5VTV9ESVJfTElHSFRfU0hBRE9XUyBdO1xcblxcdFxcdHN0cnVjdCBEaXJlY3Rpb25hbExpZ2h0U2hhZG93IHtcXG5cXHRcXHRcXHRmbG9hdCBzaGFkb3dCaWFzO1xcblxcdFxcdFxcdGZsb2F0IHNoYWRvd05vcm1hbEJpYXM7XFxuXFx0XFx0XFx0ZmxvYXQgc2hhZG93UmFkaXVzO1xcblxcdFxcdFxcdHZlYzIgc2hhZG93TWFwU2l6ZTtcXG5cXHRcXHR9O1xcblxcdFxcdHVuaWZvcm0gRGlyZWN0aW9uYWxMaWdodFNoYWRvdyBkaXJlY3Rpb25hbExpZ2h0U2hhZG93c1sgTlVNX0RJUl9MSUdIVF9TSEFET1dTIF07XFxuXFx0I2VuZGlmXFxuXFx0I2lmIE5VTV9TUE9UX0xJR0hUX1NIQURPV1MgPiAwXFxuXFx0XFx0dW5pZm9ybSBtYXQ0IHNwb3RTaGFkb3dNYXRyaXhbIE5VTV9TUE9UX0xJR0hUX1NIQURPV1MgXTtcXG5cXHRcXHR2YXJ5aW5nIHZlYzQgdlNwb3RTaGFkb3dDb29yZFsgTlVNX1NQT1RfTElHSFRfU0hBRE9XUyBdO1xcblxcdFxcdHN0cnVjdCBTcG90TGlnaHRTaGFkb3cge1xcblxcdFxcdFxcdGZsb2F0IHNoYWRvd0JpYXM7XFxuXFx0XFx0XFx0ZmxvYXQgc2hhZG93Tm9ybWFsQmlhcztcXG5cXHRcXHRcXHRmbG9hdCBzaGFkb3dSYWRpdXM7XFxuXFx0XFx0XFx0dmVjMiBzaGFkb3dNYXBTaXplO1xcblxcdFxcdH07XFxuXFx0XFx0dW5pZm9ybSBTcG90TGlnaHRTaGFkb3cgc3BvdExpZ2h0U2hhZG93c1sgTlVNX1NQT1RfTElHSFRfU0hBRE9XUyBdO1xcblxcdCNlbmRpZlxcblxcdCNpZiBOVU1fUE9JTlRfTElHSFRfU0hBRE9XUyA+IDBcXG5cXHRcXHR1bmlmb3JtIG1hdDQgcG9pbnRTaGFkb3dNYXRyaXhbIE5VTV9QT0lOVF9MSUdIVF9TSEFET1dTIF07XFxuXFx0XFx0dmFyeWluZyB2ZWM0IHZQb2ludFNoYWRvd0Nvb3JkWyBOVU1fUE9JTlRfTElHSFRfU0hBRE9XUyBdO1xcblxcdFxcdHN0cnVjdCBQb2ludExpZ2h0U2hhZG93IHtcXG5cXHRcXHRcXHRmbG9hdCBzaGFkb3dCaWFzO1xcblxcdFxcdFxcdGZsb2F0IHNoYWRvd05vcm1hbEJpYXM7XFxuXFx0XFx0XFx0ZmxvYXQgc2hhZG93UmFkaXVzO1xcblxcdFxcdFxcdHZlYzIgc2hhZG93TWFwU2l6ZTtcXG5cXHRcXHRcXHRmbG9hdCBzaGFkb3dDYW1lcmFOZWFyO1xcblxcdFxcdFxcdGZsb2F0IHNoYWRvd0NhbWVyYUZhcjtcXG5cXHRcXHR9O1xcblxcdFxcdHVuaWZvcm0gUG9pbnRMaWdodFNoYWRvdyBwb2ludExpZ2h0U2hhZG93c1sgTlVNX1BPSU5UX0xJR0hUX1NIQURPV1MgXTtcXG5cXHQjZW5kaWZcXG4jZW5kaWZcIixzaGFkb3dtYXBfdmVydGV4OlwiI2lmZGVmIFVTRV9TSEFET1dNQVBcXG5cXHQjaWYgTlVNX0RJUl9MSUdIVF9TSEFET1dTID4gMCB8fCBOVU1fU1BPVF9MSUdIVF9TSEFET1dTID4gMCB8fCBOVU1fUE9JTlRfTElHSFRfU0hBRE9XUyA+IDBcXG5cXHRcXHR2ZWMzIHNoYWRvd1dvcmxkTm9ybWFsID0gaW52ZXJzZVRyYW5zZm9ybURpcmVjdGlvbiggdHJhbnNmb3JtZWROb3JtYWwsIHZpZXdNYXRyaXggKTtcXG5cXHRcXHR2ZWM0IHNoYWRvd1dvcmxkUG9zaXRpb247XFxuXFx0I2VuZGlmXFxuXFx0I2lmIE5VTV9ESVJfTElHSFRfU0hBRE9XUyA+IDBcXG5cXHQjcHJhZ21hIHVucm9sbF9sb29wX3N0YXJ0XFxuXFx0Zm9yICggaW50IGkgPSAwOyBpIDwgTlVNX0RJUl9MSUdIVF9TSEFET1dTOyBpICsrICkge1xcblxcdFxcdHNoYWRvd1dvcmxkUG9zaXRpb24gPSB3b3JsZFBvc2l0aW9uICsgdmVjNCggc2hhZG93V29ybGROb3JtYWwgKiBkaXJlY3Rpb25hbExpZ2h0U2hhZG93c1sgaSBdLnNoYWRvd05vcm1hbEJpYXMsIDAgKTtcXG5cXHRcXHR2RGlyZWN0aW9uYWxTaGFkb3dDb29yZFsgaSBdID0gZGlyZWN0aW9uYWxTaGFkb3dNYXRyaXhbIGkgXSAqIHNoYWRvd1dvcmxkUG9zaXRpb247XFxuXFx0fVxcblxcdCNwcmFnbWEgdW5yb2xsX2xvb3BfZW5kXFxuXFx0I2VuZGlmXFxuXFx0I2lmIE5VTV9TUE9UX0xJR0hUX1NIQURPV1MgPiAwXFxuXFx0I3ByYWdtYSB1bnJvbGxfbG9vcF9zdGFydFxcblxcdGZvciAoIGludCBpID0gMDsgaSA8IE5VTV9TUE9UX0xJR0hUX1NIQURPV1M7IGkgKysgKSB7XFxuXFx0XFx0c2hhZG93V29ybGRQb3NpdGlvbiA9IHdvcmxkUG9zaXRpb24gKyB2ZWM0KCBzaGFkb3dXb3JsZE5vcm1hbCAqIHNwb3RMaWdodFNoYWRvd3NbIGkgXS5zaGFkb3dOb3JtYWxCaWFzLCAwICk7XFxuXFx0XFx0dlNwb3RTaGFkb3dDb29yZFsgaSBdID0gc3BvdFNoYWRvd01hdHJpeFsgaSBdICogc2hhZG93V29ybGRQb3NpdGlvbjtcXG5cXHR9XFxuXFx0I3ByYWdtYSB1bnJvbGxfbG9vcF9lbmRcXG5cXHQjZW5kaWZcXG5cXHQjaWYgTlVNX1BPSU5UX0xJR0hUX1NIQURPV1MgPiAwXFxuXFx0I3ByYWdtYSB1bnJvbGxfbG9vcF9zdGFydFxcblxcdGZvciAoIGludCBpID0gMDsgaSA8IE5VTV9QT0lOVF9MSUdIVF9TSEFET1dTOyBpICsrICkge1xcblxcdFxcdHNoYWRvd1dvcmxkUG9zaXRpb24gPSB3b3JsZFBvc2l0aW9uICsgdmVjNCggc2hhZG93V29ybGROb3JtYWwgKiBwb2ludExpZ2h0U2hhZG93c1sgaSBdLnNoYWRvd05vcm1hbEJpYXMsIDAgKTtcXG5cXHRcXHR2UG9pbnRTaGFkb3dDb29yZFsgaSBdID0gcG9pbnRTaGFkb3dNYXRyaXhbIGkgXSAqIHNoYWRvd1dvcmxkUG9zaXRpb247XFxuXFx0fVxcblxcdCNwcmFnbWEgdW5yb2xsX2xvb3BfZW5kXFxuXFx0I2VuZGlmXFxuI2VuZGlmXCIsc2hhZG93bWFza19wYXJzX2ZyYWdtZW50OlwiZmxvYXQgZ2V0U2hhZG93TWFzaygpIHtcXG5cXHRmbG9hdCBzaGFkb3cgPSAxLjA7XFxuXFx0I2lmZGVmIFVTRV9TSEFET1dNQVBcXG5cXHQjaWYgTlVNX0RJUl9MSUdIVF9TSEFET1dTID4gMFxcblxcdERpcmVjdGlvbmFsTGlnaHRTaGFkb3cgZGlyZWN0aW9uYWxMaWdodDtcXG5cXHQjcHJhZ21hIHVucm9sbF9sb29wX3N0YXJ0XFxuXFx0Zm9yICggaW50IGkgPSAwOyBpIDwgTlVNX0RJUl9MSUdIVF9TSEFET1dTOyBpICsrICkge1xcblxcdFxcdGRpcmVjdGlvbmFsTGlnaHQgPSBkaXJlY3Rpb25hbExpZ2h0U2hhZG93c1sgaSBdO1xcblxcdFxcdHNoYWRvdyAqPSByZWNlaXZlU2hhZG93ID8gZ2V0U2hhZG93KCBkaXJlY3Rpb25hbFNoYWRvd01hcFsgaSBdLCBkaXJlY3Rpb25hbExpZ2h0LnNoYWRvd01hcFNpemUsIGRpcmVjdGlvbmFsTGlnaHQuc2hhZG93QmlhcywgZGlyZWN0aW9uYWxMaWdodC5zaGFkb3dSYWRpdXMsIHZEaXJlY3Rpb25hbFNoYWRvd0Nvb3JkWyBpIF0gKSA6IDEuMDtcXG5cXHR9XFxuXFx0I3ByYWdtYSB1bnJvbGxfbG9vcF9lbmRcXG5cXHQjZW5kaWZcXG5cXHQjaWYgTlVNX1NQT1RfTElHSFRfU0hBRE9XUyA+IDBcXG5cXHRTcG90TGlnaHRTaGFkb3cgc3BvdExpZ2h0O1xcblxcdCNwcmFnbWEgdW5yb2xsX2xvb3Bfc3RhcnRcXG5cXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBOVU1fU1BPVF9MSUdIVF9TSEFET1dTOyBpICsrICkge1xcblxcdFxcdHNwb3RMaWdodCA9IHNwb3RMaWdodFNoYWRvd3NbIGkgXTtcXG5cXHRcXHRzaGFkb3cgKj0gcmVjZWl2ZVNoYWRvdyA/IGdldFNoYWRvdyggc3BvdFNoYWRvd01hcFsgaSBdLCBzcG90TGlnaHQuc2hhZG93TWFwU2l6ZSwgc3BvdExpZ2h0LnNoYWRvd0JpYXMsIHNwb3RMaWdodC5zaGFkb3dSYWRpdXMsIHZTcG90U2hhZG93Q29vcmRbIGkgXSApIDogMS4wO1xcblxcdH1cXG5cXHQjcHJhZ21hIHVucm9sbF9sb29wX2VuZFxcblxcdCNlbmRpZlxcblxcdCNpZiBOVU1fUE9JTlRfTElHSFRfU0hBRE9XUyA+IDBcXG5cXHRQb2ludExpZ2h0U2hhZG93IHBvaW50TGlnaHQ7XFxuXFx0I3ByYWdtYSB1bnJvbGxfbG9vcF9zdGFydFxcblxcdGZvciAoIGludCBpID0gMDsgaSA8IE5VTV9QT0lOVF9MSUdIVF9TSEFET1dTOyBpICsrICkge1xcblxcdFxcdHBvaW50TGlnaHQgPSBwb2ludExpZ2h0U2hhZG93c1sgaSBdO1xcblxcdFxcdHNoYWRvdyAqPSByZWNlaXZlU2hhZG93ID8gZ2V0UG9pbnRTaGFkb3coIHBvaW50U2hhZG93TWFwWyBpIF0sIHBvaW50TGlnaHQuc2hhZG93TWFwU2l6ZSwgcG9pbnRMaWdodC5zaGFkb3dCaWFzLCBwb2ludExpZ2h0LnNoYWRvd1JhZGl1cywgdlBvaW50U2hhZG93Q29vcmRbIGkgXSwgcG9pbnRMaWdodC5zaGFkb3dDYW1lcmFOZWFyLCBwb2ludExpZ2h0LnNoYWRvd0NhbWVyYUZhciApIDogMS4wO1xcblxcdH1cXG5cXHQjcHJhZ21hIHVucm9sbF9sb29wX2VuZFxcblxcdCNlbmRpZlxcblxcdCNlbmRpZlxcblxcdHJldHVybiBzaGFkb3c7XFxufVwiLHNraW5iYXNlX3ZlcnRleDpcIiNpZmRlZiBVU0VfU0tJTk5JTkdcXG5cXHRtYXQ0IGJvbmVNYXRYID0gZ2V0Qm9uZU1hdHJpeCggc2tpbkluZGV4LnggKTtcXG5cXHRtYXQ0IGJvbmVNYXRZID0gZ2V0Qm9uZU1hdHJpeCggc2tpbkluZGV4LnkgKTtcXG5cXHRtYXQ0IGJvbmVNYXRaID0gZ2V0Qm9uZU1hdHJpeCggc2tpbkluZGV4LnogKTtcXG5cXHRtYXQ0IGJvbmVNYXRXID0gZ2V0Qm9uZU1hdHJpeCggc2tpbkluZGV4LncgKTtcXG4jZW5kaWZcIixza2lubmluZ19wYXJzX3ZlcnRleDpcIiNpZmRlZiBVU0VfU0tJTk5JTkdcXG5cXHR1bmlmb3JtIG1hdDQgYmluZE1hdHJpeDtcXG5cXHR1bmlmb3JtIG1hdDQgYmluZE1hdHJpeEludmVyc2U7XFxuXFx0I2lmZGVmIEJPTkVfVEVYVFVSRVxcblxcdFxcdHVuaWZvcm0gaGlnaHAgc2FtcGxlcjJEIGJvbmVUZXh0dXJlO1xcblxcdFxcdHVuaWZvcm0gaW50IGJvbmVUZXh0dXJlU2l6ZTtcXG5cXHRcXHRtYXQ0IGdldEJvbmVNYXRyaXgoIGNvbnN0IGluIGZsb2F0IGkgKSB7XFxuXFx0XFx0XFx0ZmxvYXQgaiA9IGkgKiA0LjA7XFxuXFx0XFx0XFx0ZmxvYXQgeCA9IG1vZCggaiwgZmxvYXQoIGJvbmVUZXh0dXJlU2l6ZSApICk7XFxuXFx0XFx0XFx0ZmxvYXQgeSA9IGZsb29yKCBqIC8gZmxvYXQoIGJvbmVUZXh0dXJlU2l6ZSApICk7XFxuXFx0XFx0XFx0ZmxvYXQgZHggPSAxLjAgLyBmbG9hdCggYm9uZVRleHR1cmVTaXplICk7XFxuXFx0XFx0XFx0ZmxvYXQgZHkgPSAxLjAgLyBmbG9hdCggYm9uZVRleHR1cmVTaXplICk7XFxuXFx0XFx0XFx0eSA9IGR5ICogKCB5ICsgMC41ICk7XFxuXFx0XFx0XFx0dmVjNCB2MSA9IHRleHR1cmUyRCggYm9uZVRleHR1cmUsIHZlYzIoIGR4ICogKCB4ICsgMC41ICksIHkgKSApO1xcblxcdFxcdFxcdHZlYzQgdjIgPSB0ZXh0dXJlMkQoIGJvbmVUZXh0dXJlLCB2ZWMyKCBkeCAqICggeCArIDEuNSApLCB5ICkgKTtcXG5cXHRcXHRcXHR2ZWM0IHYzID0gdGV4dHVyZTJEKCBib25lVGV4dHVyZSwgdmVjMiggZHggKiAoIHggKyAyLjUgKSwgeSApICk7XFxuXFx0XFx0XFx0dmVjNCB2NCA9IHRleHR1cmUyRCggYm9uZVRleHR1cmUsIHZlYzIoIGR4ICogKCB4ICsgMy41ICksIHkgKSApO1xcblxcdFxcdFxcdG1hdDQgYm9uZSA9IG1hdDQoIHYxLCB2MiwgdjMsIHY0ICk7XFxuXFx0XFx0XFx0cmV0dXJuIGJvbmU7XFxuXFx0XFx0fVxcblxcdCNlbHNlXFxuXFx0XFx0dW5pZm9ybSBtYXQ0IGJvbmVNYXRyaWNlc1sgTUFYX0JPTkVTIF07XFxuXFx0XFx0bWF0NCBnZXRCb25lTWF0cml4KCBjb25zdCBpbiBmbG9hdCBpICkge1xcblxcdFxcdFxcdG1hdDQgYm9uZSA9IGJvbmVNYXRyaWNlc1sgaW50KGkpIF07XFxuXFx0XFx0XFx0cmV0dXJuIGJvbmU7XFxuXFx0XFx0fVxcblxcdCNlbmRpZlxcbiNlbmRpZlwiLHNraW5uaW5nX3ZlcnRleDpcIiNpZmRlZiBVU0VfU0tJTk5JTkdcXG5cXHR2ZWM0IHNraW5WZXJ0ZXggPSBiaW5kTWF0cml4ICogdmVjNCggdHJhbnNmb3JtZWQsIDEuMCApO1xcblxcdHZlYzQgc2tpbm5lZCA9IHZlYzQoIDAuMCApO1xcblxcdHNraW5uZWQgKz0gYm9uZU1hdFggKiBza2luVmVydGV4ICogc2tpbldlaWdodC54O1xcblxcdHNraW5uZWQgKz0gYm9uZU1hdFkgKiBza2luVmVydGV4ICogc2tpbldlaWdodC55O1xcblxcdHNraW5uZWQgKz0gYm9uZU1hdFogKiBza2luVmVydGV4ICogc2tpbldlaWdodC56O1xcblxcdHNraW5uZWQgKz0gYm9uZU1hdFcgKiBza2luVmVydGV4ICogc2tpbldlaWdodC53O1xcblxcdHRyYW5zZm9ybWVkID0gKCBiaW5kTWF0cml4SW52ZXJzZSAqIHNraW5uZWQgKS54eXo7XFxuI2VuZGlmXCIsc2tpbm5vcm1hbF92ZXJ0ZXg6XCIjaWZkZWYgVVNFX1NLSU5OSU5HXFxuXFx0bWF0NCBza2luTWF0cml4ID0gbWF0NCggMC4wICk7XFxuXFx0c2tpbk1hdHJpeCArPSBza2luV2VpZ2h0LnggKiBib25lTWF0WDtcXG5cXHRza2luTWF0cml4ICs9IHNraW5XZWlnaHQueSAqIGJvbmVNYXRZO1xcblxcdHNraW5NYXRyaXggKz0gc2tpbldlaWdodC56ICogYm9uZU1hdFo7XFxuXFx0c2tpbk1hdHJpeCArPSBza2luV2VpZ2h0LncgKiBib25lTWF0VztcXG5cXHRza2luTWF0cml4ID0gYmluZE1hdHJpeEludmVyc2UgKiBza2luTWF0cml4ICogYmluZE1hdHJpeDtcXG5cXHRvYmplY3ROb3JtYWwgPSB2ZWM0KCBza2luTWF0cml4ICogdmVjNCggb2JqZWN0Tm9ybWFsLCAwLjAgKSApLnh5ejtcXG5cXHQjaWZkZWYgVVNFX1RBTkdFTlRcXG5cXHRcXHRvYmplY3RUYW5nZW50ID0gdmVjNCggc2tpbk1hdHJpeCAqIHZlYzQoIG9iamVjdFRhbmdlbnQsIDAuMCApICkueHl6O1xcblxcdCNlbmRpZlxcbiNlbmRpZlwiLHNwZWN1bGFybWFwX2ZyYWdtZW50OlwiZmxvYXQgc3BlY3VsYXJTdHJlbmd0aDtcXG4jaWZkZWYgVVNFX1NQRUNVTEFSTUFQXFxuXFx0dmVjNCB0ZXhlbFNwZWN1bGFyID0gdGV4dHVyZTJEKCBzcGVjdWxhck1hcCwgdlV2ICk7XFxuXFx0c3BlY3VsYXJTdHJlbmd0aCA9IHRleGVsU3BlY3VsYXIucjtcXG4jZWxzZVxcblxcdHNwZWN1bGFyU3RyZW5ndGggPSAxLjA7XFxuI2VuZGlmXCIsc3BlY3VsYXJtYXBfcGFyc19mcmFnbWVudDpcIiNpZmRlZiBVU0VfU1BFQ1VMQVJNQVBcXG5cXHR1bmlmb3JtIHNhbXBsZXIyRCBzcGVjdWxhck1hcDtcXG4jZW5kaWZcIix0b25lbWFwcGluZ19mcmFnbWVudDpcIiNpZiBkZWZpbmVkKCBUT05FX01BUFBJTkcgKVxcblxcdGdsX0ZyYWdDb2xvci5yZ2IgPSB0b25lTWFwcGluZyggZ2xfRnJhZ0NvbG9yLnJnYiApO1xcbiNlbmRpZlwiLHRvbmVtYXBwaW5nX3BhcnNfZnJhZ21lbnQ6XCIjaWZuZGVmIHNhdHVyYXRlXFxuI2RlZmluZSBzYXR1cmF0ZShhKSBjbGFtcCggYSwgMC4wLCAxLjAgKVxcbiNlbmRpZlxcbnVuaWZvcm0gZmxvYXQgdG9uZU1hcHBpbmdFeHBvc3VyZTtcXG52ZWMzIExpbmVhclRvbmVNYXBwaW5nKCB2ZWMzIGNvbG9yICkge1xcblxcdHJldHVybiB0b25lTWFwcGluZ0V4cG9zdXJlICogY29sb3I7XFxufVxcbnZlYzMgUmVpbmhhcmRUb25lTWFwcGluZyggdmVjMyBjb2xvciApIHtcXG5cXHRjb2xvciAqPSB0b25lTWFwcGluZ0V4cG9zdXJlO1xcblxcdHJldHVybiBzYXR1cmF0ZSggY29sb3IgLyAoIHZlYzMoIDEuMCApICsgY29sb3IgKSApO1xcbn1cXG52ZWMzIE9wdGltaXplZENpbmVvblRvbmVNYXBwaW5nKCB2ZWMzIGNvbG9yICkge1xcblxcdGNvbG9yICo9IHRvbmVNYXBwaW5nRXhwb3N1cmU7XFxuXFx0Y29sb3IgPSBtYXgoIHZlYzMoIDAuMCApLCBjb2xvciAtIDAuMDA0ICk7XFxuXFx0cmV0dXJuIHBvdyggKCBjb2xvciAqICggNi4yICogY29sb3IgKyAwLjUgKSApIC8gKCBjb2xvciAqICggNi4yICogY29sb3IgKyAxLjcgKSArIDAuMDYgKSwgdmVjMyggMi4yICkgKTtcXG59XFxudmVjMyBSUlRBbmRPRFRGaXQoIHZlYzMgdiApIHtcXG5cXHR2ZWMzIGEgPSB2ICogKCB2ICsgMC4wMjQ1Nzg2ICkgLSAwLjAwMDA5MDUzNztcXG5cXHR2ZWMzIGIgPSB2ICogKCAwLjk4MzcyOSAqIHYgKyAwLjQzMjk1MTAgKSArIDAuMjM4MDgxO1xcblxcdHJldHVybiBhIC8gYjtcXG59XFxudmVjMyBBQ0VTRmlsbWljVG9uZU1hcHBpbmcoIHZlYzMgY29sb3IgKSB7XFxuXFx0Y29uc3QgbWF0MyBBQ0VTSW5wdXRNYXQgPSBtYXQzKFxcblxcdFxcdHZlYzMoIDAuNTk3MTksIDAuMDc2MDAsIDAuMDI4NDAgKSxcXHRcXHR2ZWMzKCAwLjM1NDU4LCAwLjkwODM0LCAwLjEzMzgzICksXFxuXFx0XFx0dmVjMyggMC4wNDgyMywgMC4wMTU2NiwgMC44Mzc3NyApXFxuXFx0KTtcXG5cXHRjb25zdCBtYXQzIEFDRVNPdXRwdXRNYXQgPSBtYXQzKFxcblxcdFxcdHZlYzMoICAxLjYwNDc1LCAtMC4xMDIwOCwgLTAuMDAzMjcgKSxcXHRcXHR2ZWMzKCAtMC41MzEwOCwgIDEuMTA4MTMsIC0wLjA3Mjc2ICksXFxuXFx0XFx0dmVjMyggLTAuMDczNjcsIC0wLjAwNjA1LCAgMS4wNzYwMiApXFxuXFx0KTtcXG5cXHRjb2xvciAqPSB0b25lTWFwcGluZ0V4cG9zdXJlIC8gMC42O1xcblxcdGNvbG9yID0gQUNFU0lucHV0TWF0ICogY29sb3I7XFxuXFx0Y29sb3IgPSBSUlRBbmRPRFRGaXQoIGNvbG9yICk7XFxuXFx0Y29sb3IgPSBBQ0VTT3V0cHV0TWF0ICogY29sb3I7XFxuXFx0cmV0dXJuIHNhdHVyYXRlKCBjb2xvciApO1xcbn1cXG52ZWMzIEN1c3RvbVRvbmVNYXBwaW5nKCB2ZWMzIGNvbG9yICkgeyByZXR1cm4gY29sb3I7IH1cIix0cmFuc21pc3Npb25tYXBfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX1RSQU5TTUlTU0lPTk1BUFxcblxcdHRvdGFsVHJhbnNtaXNzaW9uICo9IHRleHR1cmUyRCggdHJhbnNtaXNzaW9uTWFwLCB2VXYgKS5yO1xcbiNlbmRpZlwiLHRyYW5zbWlzc2lvbm1hcF9wYXJzX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9UUkFOU01JU1NJT05NQVBcXG5cXHR1bmlmb3JtIHNhbXBsZXIyRCB0cmFuc21pc3Npb25NYXA7XFxuI2VuZGlmXCIsdXZfcGFyc19mcmFnbWVudDpcIiNpZiAoIGRlZmluZWQoIFVTRV9VViApICYmICEgZGVmaW5lZCggVVZTX1ZFUlRFWF9PTkxZICkgKVxcblxcdHZhcnlpbmcgdmVjMiB2VXY7XFxuI2VuZGlmXCIsdXZfcGFyc192ZXJ0ZXg6XCIjaWZkZWYgVVNFX1VWXFxuXFx0I2lmZGVmIFVWU19WRVJURVhfT05MWVxcblxcdFxcdHZlYzIgdlV2O1xcblxcdCNlbHNlXFxuXFx0XFx0dmFyeWluZyB2ZWMyIHZVdjtcXG5cXHQjZW5kaWZcXG5cXHR1bmlmb3JtIG1hdDMgdXZUcmFuc2Zvcm07XFxuI2VuZGlmXCIsdXZfdmVydGV4OlwiI2lmZGVmIFVTRV9VVlxcblxcdHZVdiA9ICggdXZUcmFuc2Zvcm0gKiB2ZWMzKCB1diwgMSApICkueHk7XFxuI2VuZGlmXCIsdXYyX3BhcnNfZnJhZ21lbnQ6XCIjaWYgZGVmaW5lZCggVVNFX0xJR0hUTUFQICkgfHwgZGVmaW5lZCggVVNFX0FPTUFQIClcXG5cXHR2YXJ5aW5nIHZlYzIgdlV2MjtcXG4jZW5kaWZcIix1djJfcGFyc192ZXJ0ZXg6XCIjaWYgZGVmaW5lZCggVVNFX0xJR0hUTUFQICkgfHwgZGVmaW5lZCggVVNFX0FPTUFQIClcXG5cXHRhdHRyaWJ1dGUgdmVjMiB1djI7XFxuXFx0dmFyeWluZyB2ZWMyIHZVdjI7XFxuXFx0dW5pZm9ybSBtYXQzIHV2MlRyYW5zZm9ybTtcXG4jZW5kaWZcIix1djJfdmVydGV4OlwiI2lmIGRlZmluZWQoIFVTRV9MSUdIVE1BUCApIHx8IGRlZmluZWQoIFVTRV9BT01BUCApXFxuXFx0dlV2MiA9ICggdXYyVHJhbnNmb3JtICogdmVjMyggdXYyLCAxICkgKS54eTtcXG4jZW5kaWZcIix3b3JsZHBvc192ZXJ0ZXg6XCIjaWYgZGVmaW5lZCggVVNFX0VOVk1BUCApIHx8IGRlZmluZWQoIERJU1RBTkNFICkgfHwgZGVmaW5lZCAoIFVTRV9TSEFET1dNQVAgKVxcblxcdHZlYzQgd29ybGRQb3NpdGlvbiA9IHZlYzQoIHRyYW5zZm9ybWVkLCAxLjAgKTtcXG5cXHQjaWZkZWYgVVNFX0lOU1RBTkNJTkdcXG5cXHRcXHR3b3JsZFBvc2l0aW9uID0gaW5zdGFuY2VNYXRyaXggKiB3b3JsZFBvc2l0aW9uO1xcblxcdCNlbmRpZlxcblxcdHdvcmxkUG9zaXRpb24gPSBtb2RlbE1hdHJpeCAqIHdvcmxkUG9zaXRpb247XFxuI2VuZGlmXCIsYmFja2dyb3VuZF9mcmFnOlwidW5pZm9ybSBzYW1wbGVyMkQgdDJEO1xcbnZhcnlpbmcgdmVjMiB2VXY7XFxudm9pZCBtYWluKCkge1xcblxcdHZlYzQgdGV4Q29sb3IgPSB0ZXh0dXJlMkQoIHQyRCwgdlV2ICk7XFxuXFx0Z2xfRnJhZ0NvbG9yID0gbWFwVGV4ZWxUb0xpbmVhciggdGV4Q29sb3IgKTtcXG5cXHQjaW5jbHVkZSA8dG9uZW1hcHBpbmdfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGVuY29kaW5nc19mcmFnbWVudD5cXG59XCIsYmFja2dyb3VuZF92ZXJ0OlwidmFyeWluZyB2ZWMyIHZVdjtcXG51bmlmb3JtIG1hdDMgdXZUcmFuc2Zvcm07XFxudm9pZCBtYWluKCkge1xcblxcdHZVdiA9ICggdXZUcmFuc2Zvcm0gKiB2ZWMzKCB1diwgMSApICkueHk7XFxuXFx0Z2xfUG9zaXRpb24gPSB2ZWM0KCBwb3NpdGlvbi54eSwgMS4wLCAxLjAgKTtcXG59XCIsY3ViZV9mcmFnOlwiI2luY2x1ZGUgPGVudm1hcF9jb21tb25fcGFyc19mcmFnbWVudD5cXG51bmlmb3JtIGZsb2F0IG9wYWNpdHk7XFxudmFyeWluZyB2ZWMzIHZXb3JsZERpcmVjdGlvbjtcXG4jaW5jbHVkZSA8Y3ViZV91dl9yZWZsZWN0aW9uX2ZyYWdtZW50PlxcbnZvaWQgbWFpbigpIHtcXG5cXHR2ZWMzIHZSZWZsZWN0ID0gdldvcmxkRGlyZWN0aW9uO1xcblxcdCNpbmNsdWRlIDxlbnZtYXBfZnJhZ21lbnQ+XFxuXFx0Z2xfRnJhZ0NvbG9yID0gZW52Q29sb3I7XFxuXFx0Z2xfRnJhZ0NvbG9yLmEgKj0gb3BhY2l0eTtcXG5cXHQjaW5jbHVkZSA8dG9uZW1hcHBpbmdfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGVuY29kaW5nc19mcmFnbWVudD5cXG59XCIsY3ViZV92ZXJ0OlwidmFyeWluZyB2ZWMzIHZXb3JsZERpcmVjdGlvbjtcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbnZvaWQgbWFpbigpIHtcXG5cXHR2V29ybGREaXJlY3Rpb24gPSB0cmFuc2Zvcm1EaXJlY3Rpb24oIHBvc2l0aW9uLCBtb2RlbE1hdHJpeCApO1xcblxcdCNpbmNsdWRlIDxiZWdpbl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHByb2plY3RfdmVydGV4PlxcblxcdGdsX1Bvc2l0aW9uLnogPSBnbF9Qb3NpdGlvbi53O1xcbn1cIixkZXB0aF9mcmFnOlwiI2lmIERFUFRIX1BBQ0tJTkcgPT0gMzIwMFxcblxcdHVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcXG4jZW5kaWZcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDxwYWNraW5nPlxcbiNpbmNsdWRlIDx1dl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8YWxwaGFtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfZnJhZ21lbnQ+XFxudmFyeWluZyB2ZWMyIHZIaWdoUHJlY2lzaW9uWlc7XFxudm9pZCBtYWluKCkge1xcblxcdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfZnJhZ21lbnQ+XFxuXFx0dmVjNCBkaWZmdXNlQ29sb3IgPSB2ZWM0KCAxLjAgKTtcXG5cXHQjaWYgREVQVEhfUEFDS0lORyA9PSAzMjAwXFxuXFx0XFx0ZGlmZnVzZUNvbG9yLmEgPSBvcGFjaXR5O1xcblxcdCNlbmRpZlxcblxcdCNpbmNsdWRlIDxtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGFscGhhbWFwX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxhbHBoYXRlc3RfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX2ZyYWdtZW50PlxcblxcdGZsb2F0IGZyYWdDb29yZFogPSAwLjUgKiB2SGlnaFByZWNpc2lvblpXWzBdIC8gdkhpZ2hQcmVjaXNpb25aV1sxXSArIDAuNTtcXG5cXHQjaWYgREVQVEhfUEFDS0lORyA9PSAzMjAwXFxuXFx0XFx0Z2xfRnJhZ0NvbG9yID0gdmVjNCggdmVjMyggMS4wIC0gZnJhZ0Nvb3JkWiApLCBvcGFjaXR5ICk7XFxuXFx0I2VsaWYgREVQVEhfUEFDS0lORyA9PSAzMjAxXFxuXFx0XFx0Z2xfRnJhZ0NvbG9yID0gcGFja0RlcHRoVG9SR0JBKCBmcmFnQ29vcmRaICk7XFxuXFx0I2VuZGlmXFxufVwiLGRlcHRoX3ZlcnQ6XCIjaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDx1dl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8ZGlzcGxhY2VtZW50bWFwX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxtb3JwaHRhcmdldF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8c2tpbm5pbmdfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc192ZXJ0ZXg+XFxudmFyeWluZyB2ZWMyIHZIaWdoUHJlY2lzaW9uWlc7XFxudm9pZCBtYWluKCkge1xcblxcdCNpbmNsdWRlIDx1dl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5iYXNlX3ZlcnRleD5cXG5cXHQjaWZkZWYgVVNFX0RJU1BMQUNFTUVOVE1BUFxcblxcdFxcdCNpbmNsdWRlIDxiZWdpbm5vcm1hbF92ZXJ0ZXg+XFxuXFx0XFx0I2luY2x1ZGUgPG1vcnBobm9ybWFsX3ZlcnRleD5cXG5cXHRcXHQjaW5jbHVkZSA8c2tpbm5vcm1hbF92ZXJ0ZXg+XFxuXFx0I2VuZGlmXFxuXFx0I2luY2x1ZGUgPGJlZ2luX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bW9ycGh0YXJnZXRfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2lubmluZ192ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGRpc3BsYWNlbWVudG1hcF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHByb2plY3RfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc192ZXJ0ZXg+XFxuXFx0dkhpZ2hQcmVjaXNpb25aVyA9IGdsX1Bvc2l0aW9uLnp3O1xcbn1cIixkaXN0YW5jZVJHQkFfZnJhZzpcIiNkZWZpbmUgRElTVEFOQ0VcXG51bmlmb3JtIHZlYzMgcmVmZXJlbmNlUG9zaXRpb247XFxudW5pZm9ybSBmbG9hdCBuZWFyRGlzdGFuY2U7XFxudW5pZm9ybSBmbG9hdCBmYXJEaXN0YW5jZTtcXG52YXJ5aW5nIHZlYzMgdldvcmxkUG9zaXRpb247XFxuI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8cGFja2luZz5cXG4jaW5jbHVkZSA8dXZfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGFscGhhbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX2ZyYWdtZW50PlxcbnZvaWQgbWFpbiAoKSB7XFxuXFx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19mcmFnbWVudD5cXG5cXHR2ZWM0IGRpZmZ1c2VDb2xvciA9IHZlYzQoIDEuMCApO1xcblxcdCNpbmNsdWRlIDxtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGFscGhhbWFwX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxhbHBoYXRlc3RfZnJhZ21lbnQ+XFxuXFx0ZmxvYXQgZGlzdCA9IGxlbmd0aCggdldvcmxkUG9zaXRpb24gLSByZWZlcmVuY2VQb3NpdGlvbiApO1xcblxcdGRpc3QgPSAoIGRpc3QgLSBuZWFyRGlzdGFuY2UgKSAvICggZmFyRGlzdGFuY2UgLSBuZWFyRGlzdGFuY2UgKTtcXG5cXHRkaXN0ID0gc2F0dXJhdGUoIGRpc3QgKTtcXG5cXHRnbF9GcmFnQ29sb3IgPSBwYWNrRGVwdGhUb1JHQkEoIGRpc3QgKTtcXG59XCIsZGlzdGFuY2VSR0JBX3ZlcnQ6XCIjZGVmaW5lIERJU1RBTkNFXFxudmFyeWluZyB2ZWMzIHZXb3JsZFBvc2l0aW9uO1xcbiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPHV2X3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxkaXNwbGFjZW1lbnRtYXBfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPG1vcnBodGFyZ2V0X3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxza2lubmluZ19wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfdmVydGV4PlxcbnZvaWQgbWFpbigpIHtcXG5cXHQjaW5jbHVkZSA8dXZfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2luYmFzZV92ZXJ0ZXg+XFxuXFx0I2lmZGVmIFVTRV9ESVNQTEFDRU1FTlRNQVBcXG5cXHRcXHQjaW5jbHVkZSA8YmVnaW5ub3JtYWxfdmVydGV4PlxcblxcdFxcdCNpbmNsdWRlIDxtb3JwaG5vcm1hbF92ZXJ0ZXg+XFxuXFx0XFx0I2luY2x1ZGUgPHNraW5ub3JtYWxfdmVydGV4PlxcblxcdCNlbmRpZlxcblxcdCNpbmNsdWRlIDxiZWdpbl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPG1vcnBodGFyZ2V0X3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8c2tpbm5pbmdfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxkaXNwbGFjZW1lbnRtYXBfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxwcm9qZWN0X3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8d29ybGRwb3NfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfdmVydGV4PlxcblxcdHZXb3JsZFBvc2l0aW9uID0gd29ybGRQb3NpdGlvbi54eXo7XFxufVwiLGVxdWlyZWN0X2ZyYWc6XCJ1bmlmb3JtIHNhbXBsZXIyRCB0RXF1aXJlY3Q7XFxudmFyeWluZyB2ZWMzIHZXb3JsZERpcmVjdGlvbjtcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbnZvaWQgbWFpbigpIHtcXG5cXHR2ZWMzIGRpcmVjdGlvbiA9IG5vcm1hbGl6ZSggdldvcmxkRGlyZWN0aW9uICk7XFxuXFx0dmVjMiBzYW1wbGVVViA9IGVxdWlyZWN0VXYoIGRpcmVjdGlvbiApO1xcblxcdHZlYzQgdGV4Q29sb3IgPSB0ZXh0dXJlMkQoIHRFcXVpcmVjdCwgc2FtcGxlVVYgKTtcXG5cXHRnbF9GcmFnQ29sb3IgPSBtYXBUZXhlbFRvTGluZWFyKCB0ZXhDb2xvciApO1xcblxcdCNpbmNsdWRlIDx0b25lbWFwcGluZ19mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8ZW5jb2RpbmdzX2ZyYWdtZW50Plxcbn1cIixlcXVpcmVjdF92ZXJ0OlwidmFyeWluZyB2ZWMzIHZXb3JsZERpcmVjdGlvbjtcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbnZvaWQgbWFpbigpIHtcXG5cXHR2V29ybGREaXJlY3Rpb24gPSB0cmFuc2Zvcm1EaXJlY3Rpb24oIHBvc2l0aW9uLCBtb2RlbE1hdHJpeCApO1xcblxcdCNpbmNsdWRlIDxiZWdpbl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHByb2plY3RfdmVydGV4Plxcbn1cIixsaW5lZGFzaGVkX2ZyYWc6XCJ1bmlmb3JtIHZlYzMgZGlmZnVzZTtcXG51bmlmb3JtIGZsb2F0IG9wYWNpdHk7XFxudW5pZm9ybSBmbG9hdCBkYXNoU2l6ZTtcXG51bmlmb3JtIGZsb2F0IHRvdGFsU2l6ZTtcXG52YXJ5aW5nIGZsb2F0IHZMaW5lRGlzdGFuY2U7XFxuI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8Y29sb3JfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Zm9nX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX2ZyYWdtZW50PlxcbnZvaWQgbWFpbigpIHtcXG5cXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX2ZyYWdtZW50PlxcblxcdGlmICggbW9kKCB2TGluZURpc3RhbmNlLCB0b3RhbFNpemUgKSA+IGRhc2hTaXplICkge1xcblxcdFxcdGRpc2NhcmQ7XFxuXFx0fVxcblxcdHZlYzMgb3V0Z29pbmdMaWdodCA9IHZlYzMoIDAuMCApO1xcblxcdHZlYzQgZGlmZnVzZUNvbG9yID0gdmVjNCggZGlmZnVzZSwgb3BhY2l0eSApO1xcblxcdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8Y29sb3JfZnJhZ21lbnQ+XFxuXFx0b3V0Z29pbmdMaWdodCA9IGRpZmZ1c2VDb2xvci5yZ2I7XFxuXFx0Z2xfRnJhZ0NvbG9yID0gdmVjNCggb3V0Z29pbmdMaWdodCwgZGlmZnVzZUNvbG9yLmEgKTtcXG5cXHQjaW5jbHVkZSA8dG9uZW1hcHBpbmdfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGVuY29kaW5nc19mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8Zm9nX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxwcmVtdWx0aXBsaWVkX2FscGhhX2ZyYWdtZW50Plxcbn1cIixsaW5lZGFzaGVkX3ZlcnQ6XCJ1bmlmb3JtIGZsb2F0IHNjYWxlO1xcbmF0dHJpYnV0ZSBmbG9hdCBsaW5lRGlzdGFuY2U7XFxudmFyeWluZyBmbG9hdCB2TGluZURpc3RhbmNlO1xcbiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPGNvbG9yX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxmb2dfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPG1vcnBodGFyZ2V0X3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfdmVydGV4PlxcbnZvaWQgbWFpbigpIHtcXG5cXHR2TGluZURpc3RhbmNlID0gc2NhbGUgKiBsaW5lRGlzdGFuY2U7XFxuXFx0I2luY2x1ZGUgPGNvbG9yX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8YmVnaW5fdmVydGV4PlxcblxcdCNpbmNsdWRlIDxtb3JwaHRhcmdldF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHByb2plY3RfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc192ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGZvZ192ZXJ0ZXg+XFxufVwiLG1lc2hiYXNpY19mcmFnOlwidW5pZm9ybSB2ZWMzIGRpZmZ1c2U7XFxudW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xcbiNpZm5kZWYgRkxBVF9TSEFERURcXG5cXHR2YXJ5aW5nIHZlYzMgdk5vcm1hbDtcXG4jZW5kaWZcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDxkaXRoZXJpbmdfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Y29sb3JfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8dXZfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8dXYyX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPG1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxhbHBoYW1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxhb21hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxsaWdodG1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxlbnZtYXBfY29tbW9uX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGVudm1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxjdWJlX3V2X3JlZmxlY3Rpb25fZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGZvZ19wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxzcGVjdWxhcm1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc19mcmFnbWVudD5cXG52b2lkIG1haW4oKSB7XFxuXFx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19mcmFnbWVudD5cXG5cXHR2ZWM0IGRpZmZ1c2VDb2xvciA9IHZlYzQoIGRpZmZ1c2UsIG9wYWNpdHkgKTtcXG5cXHQjaW5jbHVkZSA8bG9nZGVwdGhidWZfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPG1hcF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8Y29sb3JfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGFscGhhbWFwX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxhbHBoYXRlc3RfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPHNwZWN1bGFybWFwX2ZyYWdtZW50PlxcblxcdFJlZmxlY3RlZExpZ2h0IHJlZmxlY3RlZExpZ2h0ID0gUmVmbGVjdGVkTGlnaHQoIHZlYzMoIDAuMCApLCB2ZWMzKCAwLjAgKSwgdmVjMyggMC4wICksIHZlYzMoIDAuMCApICk7XFxuXFx0I2lmZGVmIFVTRV9MSUdIVE1BUFxcblxcdFxcblxcdFxcdHZlYzQgbGlnaHRNYXBUZXhlbD0gdGV4dHVyZTJEKCBsaWdodE1hcCwgdlV2MiApO1xcblxcdFxcdHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0RGlmZnVzZSArPSBsaWdodE1hcFRleGVsVG9MaW5lYXIoIGxpZ2h0TWFwVGV4ZWwgKS5yZ2IgKiBsaWdodE1hcEludGVuc2l0eTtcXG5cXHQjZWxzZVxcblxcdFxcdHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0RGlmZnVzZSArPSB2ZWMzKCAxLjAgKTtcXG5cXHQjZW5kaWZcXG5cXHQjaW5jbHVkZSA8YW9tYXBfZnJhZ21lbnQ+XFxuXFx0cmVmbGVjdGVkTGlnaHQuaW5kaXJlY3REaWZmdXNlICo9IGRpZmZ1c2VDb2xvci5yZ2I7XFxuXFx0dmVjMyBvdXRnb2luZ0xpZ2h0ID0gcmVmbGVjdGVkTGlnaHQuaW5kaXJlY3REaWZmdXNlO1xcblxcdCNpbmNsdWRlIDxlbnZtYXBfZnJhZ21lbnQ+XFxuXFx0Z2xfRnJhZ0NvbG9yID0gdmVjNCggb3V0Z29pbmdMaWdodCwgZGlmZnVzZUNvbG9yLmEgKTtcXG5cXHQjaW5jbHVkZSA8dG9uZW1hcHBpbmdfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGVuY29kaW5nc19mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8Zm9nX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxwcmVtdWx0aXBsaWVkX2FscGhhX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxkaXRoZXJpbmdfZnJhZ21lbnQ+XFxufVwiLG1lc2hiYXNpY192ZXJ0OlwiI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8dXZfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPHV2Ml9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8ZW52bWFwX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxjb2xvcl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8Zm9nX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxtb3JwaHRhcmdldF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8c2tpbm5pbmdfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc192ZXJ0ZXg+XFxudm9pZCBtYWluKCkge1xcblxcdCNpbmNsdWRlIDx1dl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHV2Ml92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGNvbG9yX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8c2tpbmJhc2VfdmVydGV4PlxcblxcdCNpZmRlZiBVU0VfRU5WTUFQXFxuXFx0I2luY2x1ZGUgPGJlZ2lubm9ybWFsX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bW9ycGhub3JtYWxfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2lubm9ybWFsX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8ZGVmYXVsdG5vcm1hbF92ZXJ0ZXg+XFxuXFx0I2VuZGlmXFxuXFx0I2luY2x1ZGUgPGJlZ2luX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bW9ycGh0YXJnZXRfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2lubmluZ192ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHByb2plY3RfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHdvcmxkcG9zX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8ZW52bWFwX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8Zm9nX3ZlcnRleD5cXG59XCIsbWVzaGxhbWJlcnRfZnJhZzpcInVuaWZvcm0gdmVjMyBkaWZmdXNlO1xcbnVuaWZvcm0gdmVjMyBlbWlzc2l2ZTtcXG51bmlmb3JtIGZsb2F0IG9wYWNpdHk7XFxudmFyeWluZyB2ZWMzIHZMaWdodEZyb250O1xcbnZhcnlpbmcgdmVjMyB2SW5kaXJlY3RGcm9udDtcXG4jaWZkZWYgRE9VQkxFX1NJREVEXFxuXFx0dmFyeWluZyB2ZWMzIHZMaWdodEJhY2s7XFxuXFx0dmFyeWluZyB2ZWMzIHZJbmRpcmVjdEJhY2s7XFxuI2VuZGlmXFxuI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8cGFja2luZz5cXG4jaW5jbHVkZSA8ZGl0aGVyaW5nX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGNvbG9yX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPHV2X3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPHV2Ml9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8YWxwaGFtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8YW9tYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bGlnaHRtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8ZW1pc3NpdmVtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8ZW52bWFwX2NvbW1vbl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxlbnZtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Y3ViZV91dl9yZWZsZWN0aW9uX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxic2Rmcz5cXG4jaW5jbHVkZSA8bGlnaHRzX3BhcnNfYmVnaW4+XFxuI2luY2x1ZGUgPGZvZ19wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxzaGFkb3dtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8c2hhZG93bWFza19wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxzcGVjdWxhcm1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc19mcmFnbWVudD5cXG52b2lkIG1haW4oKSB7XFxuXFx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19mcmFnbWVudD5cXG5cXHR2ZWM0IGRpZmZ1c2VDb2xvciA9IHZlYzQoIGRpZmZ1c2UsIG9wYWNpdHkgKTtcXG5cXHRSZWZsZWN0ZWRMaWdodCByZWZsZWN0ZWRMaWdodCA9IFJlZmxlY3RlZExpZ2h0KCB2ZWMzKCAwLjAgKSwgdmVjMyggMC4wICksIHZlYzMoIDAuMCApLCB2ZWMzKCAwLjAgKSApO1xcblxcdHZlYzMgdG90YWxFbWlzc2l2ZVJhZGlhbmNlID0gZW1pc3NpdmU7XFxuXFx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGNvbG9yX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxhbHBoYW1hcF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8YWxwaGF0ZXN0X2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxzcGVjdWxhcm1hcF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8ZW1pc3NpdmVtYXBfZnJhZ21lbnQ+XFxuXFx0I2lmZGVmIERPVUJMRV9TSURFRFxcblxcdFxcdHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0RGlmZnVzZSArPSAoIGdsX0Zyb250RmFjaW5nICkgPyB2SW5kaXJlY3RGcm9udCA6IHZJbmRpcmVjdEJhY2s7XFxuXFx0I2Vsc2VcXG5cXHRcXHRyZWZsZWN0ZWRMaWdodC5pbmRpcmVjdERpZmZ1c2UgKz0gdkluZGlyZWN0RnJvbnQ7XFxuXFx0I2VuZGlmXFxuXFx0I2luY2x1ZGUgPGxpZ2h0bWFwX2ZyYWdtZW50PlxcblxcdHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0RGlmZnVzZSAqPSBCUkRGX0RpZmZ1c2VfTGFtYmVydCggZGlmZnVzZUNvbG9yLnJnYiApO1xcblxcdCNpZmRlZiBET1VCTEVfU0lERURcXG5cXHRcXHRyZWZsZWN0ZWRMaWdodC5kaXJlY3REaWZmdXNlID0gKCBnbF9Gcm9udEZhY2luZyApID8gdkxpZ2h0RnJvbnQgOiB2TGlnaHRCYWNrO1xcblxcdCNlbHNlXFxuXFx0XFx0cmVmbGVjdGVkTGlnaHQuZGlyZWN0RGlmZnVzZSA9IHZMaWdodEZyb250O1xcblxcdCNlbmRpZlxcblxcdHJlZmxlY3RlZExpZ2h0LmRpcmVjdERpZmZ1c2UgKj0gQlJERl9EaWZmdXNlX0xhbWJlcnQoIGRpZmZ1c2VDb2xvci5yZ2IgKSAqIGdldFNoYWRvd01hc2soKTtcXG5cXHQjaW5jbHVkZSA8YW9tYXBfZnJhZ21lbnQ+XFxuXFx0dmVjMyBvdXRnb2luZ0xpZ2h0ID0gcmVmbGVjdGVkTGlnaHQuZGlyZWN0RGlmZnVzZSArIHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0RGlmZnVzZSArIHRvdGFsRW1pc3NpdmVSYWRpYW5jZTtcXG5cXHQjaW5jbHVkZSA8ZW52bWFwX2ZyYWdtZW50PlxcblxcdGdsX0ZyYWdDb2xvciA9IHZlYzQoIG91dGdvaW5nTGlnaHQsIGRpZmZ1c2VDb2xvci5hICk7XFxuXFx0I2luY2x1ZGUgPHRvbmVtYXBwaW5nX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxlbmNvZGluZ3NfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGZvZ19mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8cHJlbXVsdGlwbGllZF9hbHBoYV9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8ZGl0aGVyaW5nX2ZyYWdtZW50Plxcbn1cIixtZXNobGFtYmVydF92ZXJ0OlwiI2RlZmluZSBMQU1CRVJUXFxudmFyeWluZyB2ZWMzIHZMaWdodEZyb250O1xcbnZhcnlpbmcgdmVjMyB2SW5kaXJlY3RGcm9udDtcXG4jaWZkZWYgRE9VQkxFX1NJREVEXFxuXFx0dmFyeWluZyB2ZWMzIHZMaWdodEJhY2s7XFxuXFx0dmFyeWluZyB2ZWMzIHZJbmRpcmVjdEJhY2s7XFxuI2VuZGlmXFxuI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8dXZfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPHV2Ml9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8ZW52bWFwX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxic2Rmcz5cXG4jaW5jbHVkZSA8bGlnaHRzX3BhcnNfYmVnaW4+XFxuI2luY2x1ZGUgPGNvbG9yX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxmb2dfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPG1vcnBodGFyZ2V0X3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxza2lubmluZ19wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8c2hhZG93bWFwX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfdmVydGV4PlxcbnZvaWQgbWFpbigpIHtcXG5cXHQjaW5jbHVkZSA8dXZfdmVydGV4PlxcblxcdCNpbmNsdWRlIDx1djJfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxjb2xvcl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGJlZ2lubm9ybWFsX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bW9ycGhub3JtYWxfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2luYmFzZV92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5ub3JtYWxfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxkZWZhdWx0bm9ybWFsX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8YmVnaW5fdmVydGV4PlxcblxcdCNpbmNsdWRlIDxtb3JwaHRhcmdldF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5uaW5nX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8cHJvamVjdF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8d29ybGRwb3NfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxlbnZtYXBfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxsaWdodHNfbGFtYmVydF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNoYWRvd21hcF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGZvZ192ZXJ0ZXg+XFxufVwiLG1lc2htYXRjYXBfZnJhZzpcIiNkZWZpbmUgTUFUQ0FQXFxudW5pZm9ybSB2ZWMzIGRpZmZ1c2U7XFxudW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xcbnVuaWZvcm0gc2FtcGxlcjJEIG1hdGNhcDtcXG52YXJ5aW5nIHZlYzMgdlZpZXdQb3NpdGlvbjtcXG4jaWZuZGVmIEZMQVRfU0hBREVEXFxuXFx0dmFyeWluZyB2ZWMzIHZOb3JtYWw7XFxuI2VuZGlmXFxuI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8ZGl0aGVyaW5nX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGNvbG9yX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPHV2X3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPG1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxhbHBoYW1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxmb2dfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8YnVtcG1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxub3JtYWxtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfZnJhZ21lbnQ+XFxudm9pZCBtYWluKCkge1xcblxcdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfZnJhZ21lbnQ+XFxuXFx0dmVjNCBkaWZmdXNlQ29sb3IgPSB2ZWM0KCBkaWZmdXNlLCBvcGFjaXR5ICk7XFxuXFx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGNvbG9yX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxhbHBoYW1hcF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8YWxwaGF0ZXN0X2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxub3JtYWxfZnJhZ21lbnRfYmVnaW4+XFxuXFx0I2luY2x1ZGUgPG5vcm1hbF9mcmFnbWVudF9tYXBzPlxcblxcdHZlYzMgdmlld0RpciA9IG5vcm1hbGl6ZSggdlZpZXdQb3NpdGlvbiApO1xcblxcdHZlYzMgeCA9IG5vcm1hbGl6ZSggdmVjMyggdmlld0Rpci56LCAwLjAsIC0gdmlld0Rpci54ICkgKTtcXG5cXHR2ZWMzIHkgPSBjcm9zcyggdmlld0RpciwgeCApO1xcblxcdHZlYzIgdXYgPSB2ZWMyKCBkb3QoIHgsIG5vcm1hbCApLCBkb3QoIHksIG5vcm1hbCApICkgKiAwLjQ5NSArIDAuNTtcXG5cXHQjaWZkZWYgVVNFX01BVENBUFxcblxcdFxcdHZlYzQgbWF0Y2FwQ29sb3IgPSB0ZXh0dXJlMkQoIG1hdGNhcCwgdXYgKTtcXG5cXHRcXHRtYXRjYXBDb2xvciA9IG1hdGNhcFRleGVsVG9MaW5lYXIoIG1hdGNhcENvbG9yICk7XFxuXFx0I2Vsc2VcXG5cXHRcXHR2ZWM0IG1hdGNhcENvbG9yID0gdmVjNCggMS4wICk7XFxuXFx0I2VuZGlmXFxuXFx0dmVjMyBvdXRnb2luZ0xpZ2h0ID0gZGlmZnVzZUNvbG9yLnJnYiAqIG1hdGNhcENvbG9yLnJnYjtcXG5cXHRnbF9GcmFnQ29sb3IgPSB2ZWM0KCBvdXRnb2luZ0xpZ2h0LCBkaWZmdXNlQ29sb3IuYSApO1xcblxcdCNpbmNsdWRlIDx0b25lbWFwcGluZ19mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8ZW5jb2RpbmdzX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxmb2dfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPHByZW11bHRpcGxpZWRfYWxwaGFfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGRpdGhlcmluZ19mcmFnbWVudD5cXG59XCIsbWVzaG1hdGNhcF92ZXJ0OlwiI2RlZmluZSBNQVRDQVBcXG52YXJ5aW5nIHZlYzMgdlZpZXdQb3NpdGlvbjtcXG4jaWZuZGVmIEZMQVRfU0hBREVEXFxuXFx0dmFyeWluZyB2ZWMzIHZOb3JtYWw7XFxuI2VuZGlmXFxuI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8dXZfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGNvbG9yX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxkaXNwbGFjZW1lbnRtYXBfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGZvZ19wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8bW9ycGh0YXJnZXRfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPHNraW5uaW5nX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfdmVydGV4PlxcbnZvaWQgbWFpbigpIHtcXG5cXHQjaW5jbHVkZSA8dXZfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxjb2xvcl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGJlZ2lubm9ybWFsX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bW9ycGhub3JtYWxfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2luYmFzZV92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5ub3JtYWxfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxkZWZhdWx0bm9ybWFsX3ZlcnRleD5cXG5cXHQjaWZuZGVmIEZMQVRfU0hBREVEXFxuXFx0XFx0dk5vcm1hbCA9IG5vcm1hbGl6ZSggdHJhbnNmb3JtZWROb3JtYWwgKTtcXG5cXHQjZW5kaWZcXG5cXHQjaW5jbHVkZSA8YmVnaW5fdmVydGV4PlxcblxcdCNpbmNsdWRlIDxtb3JwaHRhcmdldF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5uaW5nX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8ZGlzcGxhY2VtZW50bWFwX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8cHJvamVjdF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8Zm9nX3ZlcnRleD5cXG5cXHR2Vmlld1Bvc2l0aW9uID0gLSBtdlBvc2l0aW9uLnh5ejtcXG59XCIsbWVzaHRvb25fZnJhZzpcIiNkZWZpbmUgVE9PTlxcbnVuaWZvcm0gdmVjMyBkaWZmdXNlO1xcbnVuaWZvcm0gdmVjMyBlbWlzc2l2ZTtcXG51bmlmb3JtIGZsb2F0IG9wYWNpdHk7XFxuI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8cGFja2luZz5cXG4jaW5jbHVkZSA8ZGl0aGVyaW5nX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGNvbG9yX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPHV2X3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPHV2Ml9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8YWxwaGFtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8YW9tYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bGlnaHRtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8ZW1pc3NpdmVtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Z3JhZGllbnRtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Zm9nX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGJzZGZzPlxcbiNpbmNsdWRlIDxsaWdodHNfcGFyc19iZWdpbj5cXG4jaW5jbHVkZSA8bGlnaHRzX3Rvb25fcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8c2hhZG93bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGJ1bXBtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bm9ybWFsbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX2ZyYWdtZW50PlxcbnZvaWQgbWFpbigpIHtcXG5cXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX2ZyYWdtZW50PlxcblxcdHZlYzQgZGlmZnVzZUNvbG9yID0gdmVjNCggZGlmZnVzZSwgb3BhY2l0eSApO1xcblxcdFJlZmxlY3RlZExpZ2h0IHJlZmxlY3RlZExpZ2h0ID0gUmVmbGVjdGVkTGlnaHQoIHZlYzMoIDAuMCApLCB2ZWMzKCAwLjAgKSwgdmVjMyggMC4wICksIHZlYzMoIDAuMCApICk7XFxuXFx0dmVjMyB0b3RhbEVtaXNzaXZlUmFkaWFuY2UgPSBlbWlzc2l2ZTtcXG5cXHQjaW5jbHVkZSA8bG9nZGVwdGhidWZfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPG1hcF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8Y29sb3JfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGFscGhhbWFwX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxhbHBoYXRlc3RfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPG5vcm1hbF9mcmFnbWVudF9iZWdpbj5cXG5cXHQjaW5jbHVkZSA8bm9ybWFsX2ZyYWdtZW50X21hcHM+XFxuXFx0I2luY2x1ZGUgPGVtaXNzaXZlbWFwX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxsaWdodHNfdG9vbl9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8bGlnaHRzX2ZyYWdtZW50X2JlZ2luPlxcblxcdCNpbmNsdWRlIDxsaWdodHNfZnJhZ21lbnRfbWFwcz5cXG5cXHQjaW5jbHVkZSA8bGlnaHRzX2ZyYWdtZW50X2VuZD5cXG5cXHQjaW5jbHVkZSA8YW9tYXBfZnJhZ21lbnQ+XFxuXFx0dmVjMyBvdXRnb2luZ0xpZ2h0ID0gcmVmbGVjdGVkTGlnaHQuZGlyZWN0RGlmZnVzZSArIHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0RGlmZnVzZSArIHRvdGFsRW1pc3NpdmVSYWRpYW5jZTtcXG5cXHRnbF9GcmFnQ29sb3IgPSB2ZWM0KCBvdXRnb2luZ0xpZ2h0LCBkaWZmdXNlQ29sb3IuYSApO1xcblxcdCNpbmNsdWRlIDx0b25lbWFwcGluZ19mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8ZW5jb2RpbmdzX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxmb2dfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPHByZW11bHRpcGxpZWRfYWxwaGFfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGRpdGhlcmluZ19mcmFnbWVudD5cXG59XCIsbWVzaHRvb25fdmVydDpcIiNkZWZpbmUgVE9PTlxcbnZhcnlpbmcgdmVjMyB2Vmlld1Bvc2l0aW9uO1xcbiNpZm5kZWYgRkxBVF9TSEFERURcXG5cXHR2YXJ5aW5nIHZlYzMgdk5vcm1hbDtcXG4jZW5kaWZcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDx1dl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8dXYyX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxkaXNwbGFjZW1lbnRtYXBfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGNvbG9yX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxmb2dfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPG1vcnBodGFyZ2V0X3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxza2lubmluZ19wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8c2hhZG93bWFwX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfdmVydGV4PlxcbnZvaWQgbWFpbigpIHtcXG5cXHQjaW5jbHVkZSA8dXZfdmVydGV4PlxcblxcdCNpbmNsdWRlIDx1djJfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxjb2xvcl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGJlZ2lubm9ybWFsX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bW9ycGhub3JtYWxfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2luYmFzZV92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5ub3JtYWxfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxkZWZhdWx0bm9ybWFsX3ZlcnRleD5cXG4jaWZuZGVmIEZMQVRfU0hBREVEXFxuXFx0dk5vcm1hbCA9IG5vcm1hbGl6ZSggdHJhbnNmb3JtZWROb3JtYWwgKTtcXG4jZW5kaWZcXG5cXHQjaW5jbHVkZSA8YmVnaW5fdmVydGV4PlxcblxcdCNpbmNsdWRlIDxtb3JwaHRhcmdldF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5uaW5nX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8ZGlzcGxhY2VtZW50bWFwX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8cHJvamVjdF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3ZlcnRleD5cXG5cXHR2Vmlld1Bvc2l0aW9uID0gLSBtdlBvc2l0aW9uLnh5ejtcXG5cXHQjaW5jbHVkZSA8d29ybGRwb3NfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxzaGFkb3dtYXBfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxmb2dfdmVydGV4Plxcbn1cIixtZXNocGhvbmdfZnJhZzpcIiNkZWZpbmUgUEhPTkdcXG51bmlmb3JtIHZlYzMgZGlmZnVzZTtcXG51bmlmb3JtIHZlYzMgZW1pc3NpdmU7XFxudW5pZm9ybSB2ZWMzIHNwZWN1bGFyO1xcbnVuaWZvcm0gZmxvYXQgc2hpbmluZXNzO1xcbnVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDxwYWNraW5nPlxcbiNpbmNsdWRlIDxkaXRoZXJpbmdfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Y29sb3JfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8dXZfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8dXYyX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPG1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxhbHBoYW1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxhb21hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxsaWdodG1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxlbWlzc2l2ZW1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxlbnZtYXBfY29tbW9uX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGVudm1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxjdWJlX3V2X3JlZmxlY3Rpb25fZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGZvZ19wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxic2Rmcz5cXG4jaW5jbHVkZSA8bGlnaHRzX3BhcnNfYmVnaW4+XFxuI2luY2x1ZGUgPGxpZ2h0c19waG9uZ19wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxzaGFkb3dtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8YnVtcG1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxub3JtYWxtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8c3BlY3VsYXJtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfZnJhZ21lbnQ+XFxudm9pZCBtYWluKCkge1xcblxcdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfZnJhZ21lbnQ+XFxuXFx0dmVjNCBkaWZmdXNlQ29sb3IgPSB2ZWM0KCBkaWZmdXNlLCBvcGFjaXR5ICk7XFxuXFx0UmVmbGVjdGVkTGlnaHQgcmVmbGVjdGVkTGlnaHQgPSBSZWZsZWN0ZWRMaWdodCggdmVjMyggMC4wICksIHZlYzMoIDAuMCApLCB2ZWMzKCAwLjAgKSwgdmVjMyggMC4wICkgKTtcXG5cXHR2ZWMzIHRvdGFsRW1pc3NpdmVSYWRpYW5jZSA9IGVtaXNzaXZlO1xcblxcdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8bWFwX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxjb2xvcl9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8YWxwaGFtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGFscGhhdGVzdF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8c3BlY3VsYXJtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPG5vcm1hbF9mcmFnbWVudF9iZWdpbj5cXG5cXHQjaW5jbHVkZSA8bm9ybWFsX2ZyYWdtZW50X21hcHM+XFxuXFx0I2luY2x1ZGUgPGVtaXNzaXZlbWFwX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxsaWdodHNfcGhvbmdfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGxpZ2h0c19mcmFnbWVudF9iZWdpbj5cXG5cXHQjaW5jbHVkZSA8bGlnaHRzX2ZyYWdtZW50X21hcHM+XFxuXFx0I2luY2x1ZGUgPGxpZ2h0c19mcmFnbWVudF9lbmQ+XFxuXFx0I2luY2x1ZGUgPGFvbWFwX2ZyYWdtZW50PlxcblxcdHZlYzMgb3V0Z29pbmdMaWdodCA9IHJlZmxlY3RlZExpZ2h0LmRpcmVjdERpZmZ1c2UgKyByZWZsZWN0ZWRMaWdodC5pbmRpcmVjdERpZmZ1c2UgKyByZWZsZWN0ZWRMaWdodC5kaXJlY3RTcGVjdWxhciArIHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0U3BlY3VsYXIgKyB0b3RhbEVtaXNzaXZlUmFkaWFuY2U7XFxuXFx0I2luY2x1ZGUgPGVudm1hcF9mcmFnbWVudD5cXG5cXHRnbF9GcmFnQ29sb3IgPSB2ZWM0KCBvdXRnb2luZ0xpZ2h0LCBkaWZmdXNlQ29sb3IuYSApO1xcblxcdCNpbmNsdWRlIDx0b25lbWFwcGluZ19mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8ZW5jb2RpbmdzX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxmb2dfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPHByZW11bHRpcGxpZWRfYWxwaGFfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGRpdGhlcmluZ19mcmFnbWVudD5cXG59XCIsbWVzaHBob25nX3ZlcnQ6XCIjZGVmaW5lIFBIT05HXFxudmFyeWluZyB2ZWMzIHZWaWV3UG9zaXRpb247XFxuI2lmbmRlZiBGTEFUX1NIQURFRFxcblxcdHZhcnlpbmcgdmVjMyB2Tm9ybWFsO1xcbiNlbmRpZlxcbiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPHV2X3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDx1djJfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGRpc3BsYWNlbWVudG1hcF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8ZW52bWFwX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxjb2xvcl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8Zm9nX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxtb3JwaHRhcmdldF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8c2tpbm5pbmdfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPHNoYWRvd21hcF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX3ZlcnRleD5cXG52b2lkIG1haW4oKSB7XFxuXFx0I2luY2x1ZGUgPHV2X3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8dXYyX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8Y29sb3JfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxiZWdpbm5vcm1hbF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPG1vcnBobm9ybWFsX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8c2tpbmJhc2VfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2lubm9ybWFsX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8ZGVmYXVsdG5vcm1hbF92ZXJ0ZXg+XFxuI2lmbmRlZiBGTEFUX1NIQURFRFxcblxcdHZOb3JtYWwgPSBub3JtYWxpemUoIHRyYW5zZm9ybWVkTm9ybWFsICk7XFxuI2VuZGlmXFxuXFx0I2luY2x1ZGUgPGJlZ2luX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bW9ycGh0YXJnZXRfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2lubmluZ192ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGRpc3BsYWNlbWVudG1hcF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHByb2plY3RfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc192ZXJ0ZXg+XFxuXFx0dlZpZXdQb3NpdGlvbiA9IC0gbXZQb3NpdGlvbi54eXo7XFxuXFx0I2luY2x1ZGUgPHdvcmxkcG9zX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8ZW52bWFwX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8c2hhZG93bWFwX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8Zm9nX3ZlcnRleD5cXG59XCIsbWVzaHBoeXNpY2FsX2ZyYWc6XCIjZGVmaW5lIFNUQU5EQVJEXFxuI2lmZGVmIFBIWVNJQ0FMXFxuXFx0I2RlZmluZSBSRUZMRUNUSVZJVFlcXG5cXHQjZGVmaW5lIENMRUFSQ09BVFxcblxcdCNkZWZpbmUgVFJBTlNNSVNTSU9OXFxuI2VuZGlmXFxudW5pZm9ybSB2ZWMzIGRpZmZ1c2U7XFxudW5pZm9ybSB2ZWMzIGVtaXNzaXZlO1xcbnVuaWZvcm0gZmxvYXQgcm91Z2huZXNzO1xcbnVuaWZvcm0gZmxvYXQgbWV0YWxuZXNzO1xcbnVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcXG4jaWZkZWYgVFJBTlNNSVNTSU9OXFxuXFx0dW5pZm9ybSBmbG9hdCB0cmFuc21pc3Npb247XFxuI2VuZGlmXFxuI2lmZGVmIFJFRkxFQ1RJVklUWVxcblxcdHVuaWZvcm0gZmxvYXQgcmVmbGVjdGl2aXR5O1xcbiNlbmRpZlxcbiNpZmRlZiBDTEVBUkNPQVRcXG5cXHR1bmlmb3JtIGZsb2F0IGNsZWFyY29hdDtcXG5cXHR1bmlmb3JtIGZsb2F0IGNsZWFyY29hdFJvdWdobmVzcztcXG4jZW5kaWZcXG4jaWZkZWYgVVNFX1NIRUVOXFxuXFx0dW5pZm9ybSB2ZWMzIHNoZWVuO1xcbiNlbmRpZlxcbnZhcnlpbmcgdmVjMyB2Vmlld1Bvc2l0aW9uO1xcbiNpZm5kZWYgRkxBVF9TSEFERURcXG5cXHR2YXJ5aW5nIHZlYzMgdk5vcm1hbDtcXG5cXHQjaWZkZWYgVVNFX1RBTkdFTlRcXG5cXHRcXHR2YXJ5aW5nIHZlYzMgdlRhbmdlbnQ7XFxuXFx0XFx0dmFyeWluZyB2ZWMzIHZCaXRhbmdlbnQ7XFxuXFx0I2VuZGlmXFxuI2VuZGlmXFxuI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8cGFja2luZz5cXG4jaW5jbHVkZSA8ZGl0aGVyaW5nX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGNvbG9yX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPHV2X3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPHV2Ml9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8YWxwaGFtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8YW9tYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bGlnaHRtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8ZW1pc3NpdmVtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8dHJhbnNtaXNzaW9ubWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGJzZGZzPlxcbiNpbmNsdWRlIDxjdWJlX3V2X3JlZmxlY3Rpb25fZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGVudm1hcF9jb21tb25fcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8ZW52bWFwX3BoeXNpY2FsX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGZvZ19wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxsaWdodHNfcGFyc19iZWdpbj5cXG4jaW5jbHVkZSA8bGlnaHRzX3BoeXNpY2FsX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPHNoYWRvd21hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxidW1wbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPG5vcm1hbG1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxjbGVhcmNvYXRfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8cm91Z2huZXNzbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPG1ldGFsbmVzc21hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc19mcmFnbWVudD5cXG52b2lkIG1haW4oKSB7XFxuXFx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19mcmFnbWVudD5cXG5cXHR2ZWM0IGRpZmZ1c2VDb2xvciA9IHZlYzQoIGRpZmZ1c2UsIG9wYWNpdHkgKTtcXG5cXHRSZWZsZWN0ZWRMaWdodCByZWZsZWN0ZWRMaWdodCA9IFJlZmxlY3RlZExpZ2h0KCB2ZWMzKCAwLjAgKSwgdmVjMyggMC4wICksIHZlYzMoIDAuMCApLCB2ZWMzKCAwLjAgKSApO1xcblxcdHZlYzMgdG90YWxFbWlzc2l2ZVJhZGlhbmNlID0gZW1pc3NpdmU7XFxuXFx0I2lmZGVmIFRSQU5TTUlTU0lPTlxcblxcdFxcdGZsb2F0IHRvdGFsVHJhbnNtaXNzaW9uID0gdHJhbnNtaXNzaW9uO1xcblxcdCNlbmRpZlxcblxcdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8bWFwX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxjb2xvcl9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8YWxwaGFtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGFscGhhdGVzdF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8cm91Z2huZXNzbWFwX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxtZXRhbG5lc3NtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPG5vcm1hbF9mcmFnbWVudF9iZWdpbj5cXG5cXHQjaW5jbHVkZSA8bm9ybWFsX2ZyYWdtZW50X21hcHM+XFxuXFx0I2luY2x1ZGUgPGNsZWFyY29hdF9ub3JtYWxfZnJhZ21lbnRfYmVnaW4+XFxuXFx0I2luY2x1ZGUgPGNsZWFyY29hdF9ub3JtYWxfZnJhZ21lbnRfbWFwcz5cXG5cXHQjaW5jbHVkZSA8ZW1pc3NpdmVtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPHRyYW5zbWlzc2lvbm1hcF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8bGlnaHRzX3BoeXNpY2FsX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxsaWdodHNfZnJhZ21lbnRfYmVnaW4+XFxuXFx0I2luY2x1ZGUgPGxpZ2h0c19mcmFnbWVudF9tYXBzPlxcblxcdCNpbmNsdWRlIDxsaWdodHNfZnJhZ21lbnRfZW5kPlxcblxcdCNpbmNsdWRlIDxhb21hcF9mcmFnbWVudD5cXG5cXHR2ZWMzIG91dGdvaW5nTGlnaHQgPSByZWZsZWN0ZWRMaWdodC5kaXJlY3REaWZmdXNlICsgcmVmbGVjdGVkTGlnaHQuaW5kaXJlY3REaWZmdXNlICsgcmVmbGVjdGVkTGlnaHQuZGlyZWN0U3BlY3VsYXIgKyByZWZsZWN0ZWRMaWdodC5pbmRpcmVjdFNwZWN1bGFyICsgdG90YWxFbWlzc2l2ZVJhZGlhbmNlO1xcblxcdCNpZmRlZiBUUkFOU01JU1NJT05cXG5cXHRcXHRkaWZmdXNlQ29sb3IuYSAqPSBtaXgoIHNhdHVyYXRlKCAxLiAtIHRvdGFsVHJhbnNtaXNzaW9uICsgbGluZWFyVG9SZWxhdGl2ZUx1bWluYW5jZSggcmVmbGVjdGVkTGlnaHQuZGlyZWN0U3BlY3VsYXIgKyByZWZsZWN0ZWRMaWdodC5pbmRpcmVjdFNwZWN1bGFyICkgKSwgMS4wLCBtZXRhbG5lc3MgKTtcXG5cXHQjZW5kaWZcXG5cXHRnbF9GcmFnQ29sb3IgPSB2ZWM0KCBvdXRnb2luZ0xpZ2h0LCBkaWZmdXNlQ29sb3IuYSApO1xcblxcdCNpbmNsdWRlIDx0b25lbWFwcGluZ19mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8ZW5jb2RpbmdzX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxmb2dfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPHByZW11bHRpcGxpZWRfYWxwaGFfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGRpdGhlcmluZ19mcmFnbWVudD5cXG59XCIsbWVzaHBoeXNpY2FsX3ZlcnQ6XCIjZGVmaW5lIFNUQU5EQVJEXFxudmFyeWluZyB2ZWMzIHZWaWV3UG9zaXRpb247XFxuI2lmbmRlZiBGTEFUX1NIQURFRFxcblxcdHZhcnlpbmcgdmVjMyB2Tm9ybWFsO1xcblxcdCNpZmRlZiBVU0VfVEFOR0VOVFxcblxcdFxcdHZhcnlpbmcgdmVjMyB2VGFuZ2VudDtcXG5cXHRcXHR2YXJ5aW5nIHZlYzMgdkJpdGFuZ2VudDtcXG5cXHQjZW5kaWZcXG4jZW5kaWZcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDx1dl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8dXYyX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxkaXNwbGFjZW1lbnRtYXBfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGNvbG9yX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxmb2dfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPG1vcnBodGFyZ2V0X3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxza2lubmluZ19wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8c2hhZG93bWFwX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfdmVydGV4PlxcbnZvaWQgbWFpbigpIHtcXG5cXHQjaW5jbHVkZSA8dXZfdmVydGV4PlxcblxcdCNpbmNsdWRlIDx1djJfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxjb2xvcl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGJlZ2lubm9ybWFsX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bW9ycGhub3JtYWxfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2luYmFzZV92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5ub3JtYWxfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxkZWZhdWx0bm9ybWFsX3ZlcnRleD5cXG4jaWZuZGVmIEZMQVRfU0hBREVEXFxuXFx0dk5vcm1hbCA9IG5vcm1hbGl6ZSggdHJhbnNmb3JtZWROb3JtYWwgKTtcXG5cXHQjaWZkZWYgVVNFX1RBTkdFTlRcXG5cXHRcXHR2VGFuZ2VudCA9IG5vcm1hbGl6ZSggdHJhbnNmb3JtZWRUYW5nZW50ICk7XFxuXFx0XFx0dkJpdGFuZ2VudCA9IG5vcm1hbGl6ZSggY3Jvc3MoIHZOb3JtYWwsIHZUYW5nZW50ICkgKiB0YW5nZW50LncgKTtcXG5cXHQjZW5kaWZcXG4jZW5kaWZcXG5cXHQjaW5jbHVkZSA8YmVnaW5fdmVydGV4PlxcblxcdCNpbmNsdWRlIDxtb3JwaHRhcmdldF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5uaW5nX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8ZGlzcGxhY2VtZW50bWFwX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8cHJvamVjdF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3ZlcnRleD5cXG5cXHR2Vmlld1Bvc2l0aW9uID0gLSBtdlBvc2l0aW9uLnh5ejtcXG5cXHQjaW5jbHVkZSA8d29ybGRwb3NfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxzaGFkb3dtYXBfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxmb2dfdmVydGV4Plxcbn1cIixub3JtYWxfZnJhZzpcIiNkZWZpbmUgTk9STUFMXFxudW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xcbiNpZiBkZWZpbmVkKCBGTEFUX1NIQURFRCApIHx8IGRlZmluZWQoIFVTRV9CVU1QTUFQICkgfHwgZGVmaW5lZCggVEFOR0VOVFNQQUNFX05PUk1BTE1BUCApXFxuXFx0dmFyeWluZyB2ZWMzIHZWaWV3UG9zaXRpb247XFxuI2VuZGlmXFxuI2lmbmRlZiBGTEFUX1NIQURFRFxcblxcdHZhcnlpbmcgdmVjMyB2Tm9ybWFsO1xcblxcdCNpZmRlZiBVU0VfVEFOR0VOVFxcblxcdFxcdHZhcnlpbmcgdmVjMyB2VGFuZ2VudDtcXG5cXHRcXHR2YXJ5aW5nIHZlYzMgdkJpdGFuZ2VudDtcXG5cXHQjZW5kaWZcXG4jZW5kaWZcXG4jaW5jbHVkZSA8cGFja2luZz5cXG4jaW5jbHVkZSA8dXZfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8YnVtcG1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxub3JtYWxtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfZnJhZ21lbnQ+XFxudm9pZCBtYWluKCkge1xcblxcdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxub3JtYWxfZnJhZ21lbnRfYmVnaW4+XFxuXFx0I2luY2x1ZGUgPG5vcm1hbF9mcmFnbWVudF9tYXBzPlxcblxcdGdsX0ZyYWdDb2xvciA9IHZlYzQoIHBhY2tOb3JtYWxUb1JHQiggbm9ybWFsICksIG9wYWNpdHkgKTtcXG59XCIsbm9ybWFsX3ZlcnQ6XCIjZGVmaW5lIE5PUk1BTFxcbiNpZiBkZWZpbmVkKCBGTEFUX1NIQURFRCApIHx8IGRlZmluZWQoIFVTRV9CVU1QTUFQICkgfHwgZGVmaW5lZCggVEFOR0VOVFNQQUNFX05PUk1BTE1BUCApXFxuXFx0dmFyeWluZyB2ZWMzIHZWaWV3UG9zaXRpb247XFxuI2VuZGlmXFxuI2lmbmRlZiBGTEFUX1NIQURFRFxcblxcdHZhcnlpbmcgdmVjMyB2Tm9ybWFsO1xcblxcdCNpZmRlZiBVU0VfVEFOR0VOVFxcblxcdFxcdHZhcnlpbmcgdmVjMyB2VGFuZ2VudDtcXG5cXHRcXHR2YXJ5aW5nIHZlYzMgdkJpdGFuZ2VudDtcXG5cXHQjZW5kaWZcXG4jZW5kaWZcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDx1dl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8ZGlzcGxhY2VtZW50bWFwX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxtb3JwaHRhcmdldF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8c2tpbm5pbmdfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc192ZXJ0ZXg+XFxudm9pZCBtYWluKCkge1xcblxcdCNpbmNsdWRlIDx1dl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGJlZ2lubm9ybWFsX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bW9ycGhub3JtYWxfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2luYmFzZV92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5ub3JtYWxfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxkZWZhdWx0bm9ybWFsX3ZlcnRleD5cXG4jaWZuZGVmIEZMQVRfU0hBREVEXFxuXFx0dk5vcm1hbCA9IG5vcm1hbGl6ZSggdHJhbnNmb3JtZWROb3JtYWwgKTtcXG5cXHQjaWZkZWYgVVNFX1RBTkdFTlRcXG5cXHRcXHR2VGFuZ2VudCA9IG5vcm1hbGl6ZSggdHJhbnNmb3JtZWRUYW5nZW50ICk7XFxuXFx0XFx0dkJpdGFuZ2VudCA9IG5vcm1hbGl6ZSggY3Jvc3MoIHZOb3JtYWwsIHZUYW5nZW50ICkgKiB0YW5nZW50LncgKTtcXG5cXHQjZW5kaWZcXG4jZW5kaWZcXG5cXHQjaW5jbHVkZSA8YmVnaW5fdmVydGV4PlxcblxcdCNpbmNsdWRlIDxtb3JwaHRhcmdldF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5uaW5nX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8ZGlzcGxhY2VtZW50bWFwX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8cHJvamVjdF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3ZlcnRleD5cXG4jaWYgZGVmaW5lZCggRkxBVF9TSEFERUQgKSB8fCBkZWZpbmVkKCBVU0VfQlVNUE1BUCApIHx8IGRlZmluZWQoIFRBTkdFTlRTUEFDRV9OT1JNQUxNQVAgKVxcblxcdHZWaWV3UG9zaXRpb24gPSAtIG12UG9zaXRpb24ueHl6O1xcbiNlbmRpZlxcbn1cIixwb2ludHNfZnJhZzpcInVuaWZvcm0gdmVjMyBkaWZmdXNlO1xcbnVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDxjb2xvcl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxtYXBfcGFydGljbGVfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Zm9nX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX2ZyYWdtZW50PlxcbnZvaWQgbWFpbigpIHtcXG5cXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX2ZyYWdtZW50PlxcblxcdHZlYzMgb3V0Z29pbmdMaWdodCA9IHZlYzMoIDAuMCApO1xcblxcdHZlYzQgZGlmZnVzZUNvbG9yID0gdmVjNCggZGlmZnVzZSwgb3BhY2l0eSApO1xcblxcdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8bWFwX3BhcnRpY2xlX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxjb2xvcl9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8YWxwaGF0ZXN0X2ZyYWdtZW50PlxcblxcdG91dGdvaW5nTGlnaHQgPSBkaWZmdXNlQ29sb3IucmdiO1xcblxcdGdsX0ZyYWdDb2xvciA9IHZlYzQoIG91dGdvaW5nTGlnaHQsIGRpZmZ1c2VDb2xvci5hICk7XFxuXFx0I2luY2x1ZGUgPHRvbmVtYXBwaW5nX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxlbmNvZGluZ3NfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGZvZ19mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8cHJlbXVsdGlwbGllZF9hbHBoYV9mcmFnbWVudD5cXG59XCIscG9pbnRzX3ZlcnQ6XCJ1bmlmb3JtIGZsb2F0IHNpemU7XFxudW5pZm9ybSBmbG9hdCBzY2FsZTtcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDxjb2xvcl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8Zm9nX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxtb3JwaHRhcmdldF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX3ZlcnRleD5cXG52b2lkIG1haW4oKSB7XFxuXFx0I2luY2x1ZGUgPGNvbG9yX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8YmVnaW5fdmVydGV4PlxcblxcdCNpbmNsdWRlIDxtb3JwaHRhcmdldF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHByb2plY3RfdmVydGV4PlxcblxcdGdsX1BvaW50U2l6ZSA9IHNpemU7XFxuXFx0I2lmZGVmIFVTRV9TSVpFQVRURU5VQVRJT05cXG5cXHRcXHRib29sIGlzUGVyc3BlY3RpdmUgPSBpc1BlcnNwZWN0aXZlTWF0cml4KCBwcm9qZWN0aW9uTWF0cml4ICk7XFxuXFx0XFx0aWYgKCBpc1BlcnNwZWN0aXZlICkgZ2xfUG9pbnRTaXplICo9ICggc2NhbGUgLyAtIG12UG9zaXRpb24ueiApO1xcblxcdCNlbmRpZlxcblxcdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc192ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHdvcmxkcG9zX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8Zm9nX3ZlcnRleD5cXG59XCIsc2hhZG93X2ZyYWc6XCJ1bmlmb3JtIHZlYzMgY29sb3I7XFxudW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xcbiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPHBhY2tpbmc+XFxuI2luY2x1ZGUgPGZvZ19wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxic2Rmcz5cXG4jaW5jbHVkZSA8bGlnaHRzX3BhcnNfYmVnaW4+XFxuI2luY2x1ZGUgPHNoYWRvd21hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxzaGFkb3dtYXNrX3BhcnNfZnJhZ21lbnQ+XFxudm9pZCBtYWluKCkge1xcblxcdGdsX0ZyYWdDb2xvciA9IHZlYzQoIGNvbG9yLCBvcGFjaXR5ICogKCAxLjAgLSBnZXRTaGFkb3dNYXNrKCkgKSApO1xcblxcdCNpbmNsdWRlIDx0b25lbWFwcGluZ19mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8ZW5jb2RpbmdzX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxmb2dfZnJhZ21lbnQ+XFxufVwiLHNoYWRvd192ZXJ0OlwiI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8Zm9nX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxzaGFkb3dtYXBfcGFyc192ZXJ0ZXg+XFxudm9pZCBtYWluKCkge1xcblxcdCNpbmNsdWRlIDxiZWdpbl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHByb2plY3RfdmVydGV4PlxcblxcdCNpbmNsdWRlIDx3b3JsZHBvc192ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGJlZ2lubm9ybWFsX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bW9ycGhub3JtYWxfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2luYmFzZV92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5ub3JtYWxfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxkZWZhdWx0bm9ybWFsX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8c2hhZG93bWFwX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8Zm9nX3ZlcnRleD5cXG59XCIsc3ByaXRlX2ZyYWc6XCJ1bmlmb3JtIHZlYzMgZGlmZnVzZTtcXG51bmlmb3JtIGZsb2F0IG9wYWNpdHk7XFxuI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8dXZfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGFscGhhbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGZvZ19wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc19mcmFnbWVudD5cXG52b2lkIG1haW4oKSB7XFxuXFx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19mcmFnbWVudD5cXG5cXHR2ZWMzIG91dGdvaW5nTGlnaHQgPSB2ZWMzKCAwLjAgKTtcXG5cXHR2ZWM0IGRpZmZ1c2VDb2xvciA9IHZlYzQoIGRpZmZ1c2UsIG9wYWNpdHkgKTtcXG5cXHQjaW5jbHVkZSA8bG9nZGVwdGhidWZfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPG1hcF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8YWxwaGFtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGFscGhhdGVzdF9mcmFnbWVudD5cXG5cXHRvdXRnb2luZ0xpZ2h0ID0gZGlmZnVzZUNvbG9yLnJnYjtcXG5cXHRnbF9GcmFnQ29sb3IgPSB2ZWM0KCBvdXRnb2luZ0xpZ2h0LCBkaWZmdXNlQ29sb3IuYSApO1xcblxcdCNpbmNsdWRlIDx0b25lbWFwcGluZ19mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8ZW5jb2RpbmdzX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxmb2dfZnJhZ21lbnQ+XFxufVwiLHNwcml0ZV92ZXJ0OlwidW5pZm9ybSBmbG9hdCByb3RhdGlvbjtcXG51bmlmb3JtIHZlYzIgY2VudGVyO1xcbiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPHV2X3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxmb2dfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc192ZXJ0ZXg+XFxudm9pZCBtYWluKCkge1xcblxcdCNpbmNsdWRlIDx1dl92ZXJ0ZXg+XFxuXFx0dmVjNCBtdlBvc2l0aW9uID0gbW9kZWxWaWV3TWF0cml4ICogdmVjNCggMC4wLCAwLjAsIDAuMCwgMS4wICk7XFxuXFx0dmVjMiBzY2FsZTtcXG5cXHRzY2FsZS54ID0gbGVuZ3RoKCB2ZWMzKCBtb2RlbE1hdHJpeFsgMCBdLngsIG1vZGVsTWF0cml4WyAwIF0ueSwgbW9kZWxNYXRyaXhbIDAgXS56ICkgKTtcXG5cXHRzY2FsZS55ID0gbGVuZ3RoKCB2ZWMzKCBtb2RlbE1hdHJpeFsgMSBdLngsIG1vZGVsTWF0cml4WyAxIF0ueSwgbW9kZWxNYXRyaXhbIDEgXS56ICkgKTtcXG5cXHQjaWZuZGVmIFVTRV9TSVpFQVRURU5VQVRJT05cXG5cXHRcXHRib29sIGlzUGVyc3BlY3RpdmUgPSBpc1BlcnNwZWN0aXZlTWF0cml4KCBwcm9qZWN0aW9uTWF0cml4ICk7XFxuXFx0XFx0aWYgKCBpc1BlcnNwZWN0aXZlICkgc2NhbGUgKj0gLSBtdlBvc2l0aW9uLno7XFxuXFx0I2VuZGlmXFxuXFx0dmVjMiBhbGlnbmVkUG9zaXRpb24gPSAoIHBvc2l0aW9uLnh5IC0gKCBjZW50ZXIgLSB2ZWMyKCAwLjUgKSApICkgKiBzY2FsZTtcXG5cXHR2ZWMyIHJvdGF0ZWRQb3NpdGlvbjtcXG5cXHRyb3RhdGVkUG9zaXRpb24ueCA9IGNvcyggcm90YXRpb24gKSAqIGFsaWduZWRQb3NpdGlvbi54IC0gc2luKCByb3RhdGlvbiApICogYWxpZ25lZFBvc2l0aW9uLnk7XFxuXFx0cm90YXRlZFBvc2l0aW9uLnkgPSBzaW4oIHJvdGF0aW9uICkgKiBhbGlnbmVkUG9zaXRpb24ueCArIGNvcyggcm90YXRpb24gKSAqIGFsaWduZWRQb3NpdGlvbi55O1xcblxcdG12UG9zaXRpb24ueHkgKz0gcm90YXRlZFBvc2l0aW9uO1xcblxcdGdsX1Bvc2l0aW9uID0gcHJvamVjdGlvbk1hdHJpeCAqIG12UG9zaXRpb247XFxuXFx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8Zm9nX3ZlcnRleD5cXG59XCJ9LE9vPXtjb21tb246e2RpZmZ1c2U6e3ZhbHVlOm5ldyB5aSgxNTY1ODczNCl9LG9wYWNpdHk6e3ZhbHVlOjF9LG1hcDp7dmFsdWU6bnVsbH0sdXZUcmFuc2Zvcm06e3ZhbHVlOm5ldyBIbn0sdXYyVHJhbnNmb3JtOnt2YWx1ZTpuZXcgSG59LGFscGhhTWFwOnt2YWx1ZTpudWxsfX0sc3BlY3VsYXJtYXA6e3NwZWN1bGFyTWFwOnt2YWx1ZTpudWxsfX0sZW52bWFwOntlbnZNYXA6e3ZhbHVlOm51bGx9LGZsaXBFbnZNYXA6e3ZhbHVlOi0xfSxyZWZsZWN0aXZpdHk6e3ZhbHVlOjF9LHJlZnJhY3Rpb25SYXRpbzp7dmFsdWU6Ljk4fSxtYXhNaXBMZXZlbDp7dmFsdWU6MH19LGFvbWFwOnthb01hcDp7dmFsdWU6bnVsbH0sYW9NYXBJbnRlbnNpdHk6e3ZhbHVlOjF9fSxsaWdodG1hcDp7bGlnaHRNYXA6e3ZhbHVlOm51bGx9LGxpZ2h0TWFwSW50ZW5zaXR5Ont2YWx1ZToxfX0sZW1pc3NpdmVtYXA6e2VtaXNzaXZlTWFwOnt2YWx1ZTpudWxsfX0sYnVtcG1hcDp7YnVtcE1hcDp7dmFsdWU6bnVsbH0sYnVtcFNjYWxlOnt2YWx1ZToxfX0sbm9ybWFsbWFwOntub3JtYWxNYXA6e3ZhbHVlOm51bGx9LG5vcm1hbFNjYWxlOnt2YWx1ZTpuZXcgR24oMSwxKX19LGRpc3BsYWNlbWVudG1hcDp7ZGlzcGxhY2VtZW50TWFwOnt2YWx1ZTpudWxsfSxkaXNwbGFjZW1lbnRTY2FsZTp7dmFsdWU6MX0sZGlzcGxhY2VtZW50Qmlhczp7dmFsdWU6MH19LHJvdWdobmVzc21hcDp7cm91Z2huZXNzTWFwOnt2YWx1ZTpudWxsfX0sbWV0YWxuZXNzbWFwOnttZXRhbG5lc3NNYXA6e3ZhbHVlOm51bGx9fSxncmFkaWVudG1hcDp7Z3JhZGllbnRNYXA6e3ZhbHVlOm51bGx9fSxmb2c6e2ZvZ0RlbnNpdHk6e3ZhbHVlOjI1ZS01fSxmb2dOZWFyOnt2YWx1ZToxfSxmb2dGYXI6e3ZhbHVlOjJlM30sZm9nQ29sb3I6e3ZhbHVlOm5ldyB5aSgxNjc3NzIxNSl9fSxsaWdodHM6e2FtYmllbnRMaWdodENvbG9yOnt2YWx1ZTpbXX0sbGlnaHRQcm9iZTp7dmFsdWU6W119LGRpcmVjdGlvbmFsTGlnaHRzOnt2YWx1ZTpbXSxwcm9wZXJ0aWVzOntkaXJlY3Rpb246e30sY29sb3I6e319fSxkaXJlY3Rpb25hbExpZ2h0U2hhZG93czp7dmFsdWU6W10scHJvcGVydGllczp7c2hhZG93Qmlhczp7fSxzaGFkb3dOb3JtYWxCaWFzOnt9LHNoYWRvd1JhZGl1czp7fSxzaGFkb3dNYXBTaXplOnt9fX0sZGlyZWN0aW9uYWxTaGFkb3dNYXA6e3ZhbHVlOltdfSxkaXJlY3Rpb25hbFNoYWRvd01hdHJpeDp7dmFsdWU6W119LHNwb3RMaWdodHM6e3ZhbHVlOltdLHByb3BlcnRpZXM6e2NvbG9yOnt9LHBvc2l0aW9uOnt9LGRpcmVjdGlvbjp7fSxkaXN0YW5jZTp7fSxjb25lQ29zOnt9LHBlbnVtYnJhQ29zOnt9LGRlY2F5Ont9fX0sc3BvdExpZ2h0U2hhZG93czp7dmFsdWU6W10scHJvcGVydGllczp7c2hhZG93Qmlhczp7fSxzaGFkb3dOb3JtYWxCaWFzOnt9LHNoYWRvd1JhZGl1czp7fSxzaGFkb3dNYXBTaXplOnt9fX0sc3BvdFNoYWRvd01hcDp7dmFsdWU6W119LHNwb3RTaGFkb3dNYXRyaXg6e3ZhbHVlOltdfSxwb2ludExpZ2h0czp7dmFsdWU6W10scHJvcGVydGllczp7Y29sb3I6e30scG9zaXRpb246e30sZGVjYXk6e30sZGlzdGFuY2U6e319fSxwb2ludExpZ2h0U2hhZG93czp7dmFsdWU6W10scHJvcGVydGllczp7c2hhZG93Qmlhczp7fSxzaGFkb3dOb3JtYWxCaWFzOnt9LHNoYWRvd1JhZGl1czp7fSxzaGFkb3dNYXBTaXplOnt9LHNoYWRvd0NhbWVyYU5lYXI6e30sc2hhZG93Q2FtZXJhRmFyOnt9fX0scG9pbnRTaGFkb3dNYXA6e3ZhbHVlOltdfSxwb2ludFNoYWRvd01hdHJpeDp7dmFsdWU6W119LGhlbWlzcGhlcmVMaWdodHM6e3ZhbHVlOltdLHByb3BlcnRpZXM6e2RpcmVjdGlvbjp7fSxza3lDb2xvcjp7fSxncm91bmRDb2xvcjp7fX19LHJlY3RBcmVhTGlnaHRzOnt2YWx1ZTpbXSxwcm9wZXJ0aWVzOntjb2xvcjp7fSxwb3NpdGlvbjp7fSx3aWR0aDp7fSxoZWlnaHQ6e319fSxsdGNfMTp7dmFsdWU6bnVsbH0sbHRjXzI6e3ZhbHVlOm51bGx9fSxwb2ludHM6e2RpZmZ1c2U6e3ZhbHVlOm5ldyB5aSgxNTY1ODczNCl9LG9wYWNpdHk6e3ZhbHVlOjF9LHNpemU6e3ZhbHVlOjF9LHNjYWxlOnt2YWx1ZToxfSxtYXA6e3ZhbHVlOm51bGx9LGFscGhhTWFwOnt2YWx1ZTpudWxsfSx1dlRyYW5zZm9ybTp7dmFsdWU6bmV3IEhufX0sc3ByaXRlOntkaWZmdXNlOnt2YWx1ZTpuZXcgeWkoMTU2NTg3MzQpfSxvcGFjaXR5Ont2YWx1ZToxfSxjZW50ZXI6e3ZhbHVlOm5ldyBHbiguNSwuNSl9LHJvdGF0aW9uOnt2YWx1ZTowfSxtYXA6e3ZhbHVlOm51bGx9LGFscGhhTWFwOnt2YWx1ZTpudWxsfSx1dlRyYW5zZm9ybTp7dmFsdWU6bmV3IEhufX19LE5vPXtiYXNpYzp7dW5pZm9ybXM6dm8oW09vLmNvbW1vbixPby5zcGVjdWxhcm1hcCxPby5lbnZtYXAsT28uYW9tYXAsT28ubGlnaHRtYXAsT28uZm9nXSksdmVydGV4U2hhZGVyOklvLm1lc2hiYXNpY192ZXJ0LGZyYWdtZW50U2hhZGVyOklvLm1lc2hiYXNpY19mcmFnfSxsYW1iZXJ0Ont1bmlmb3Jtczp2byhbT28uY29tbW9uLE9vLnNwZWN1bGFybWFwLE9vLmVudm1hcCxPby5hb21hcCxPby5saWdodG1hcCxPby5lbWlzc2l2ZW1hcCxPby5mb2csT28ubGlnaHRzLHtlbWlzc2l2ZTp7dmFsdWU6bmV3IHlpKDApfX1dKSx2ZXJ0ZXhTaGFkZXI6SW8ubWVzaGxhbWJlcnRfdmVydCxmcmFnbWVudFNoYWRlcjpJby5tZXNobGFtYmVydF9mcmFnfSxwaG9uZzp7dW5pZm9ybXM6dm8oW09vLmNvbW1vbixPby5zcGVjdWxhcm1hcCxPby5lbnZtYXAsT28uYW9tYXAsT28ubGlnaHRtYXAsT28uZW1pc3NpdmVtYXAsT28uYnVtcG1hcCxPby5ub3JtYWxtYXAsT28uZGlzcGxhY2VtZW50bWFwLE9vLmZvZyxPby5saWdodHMse2VtaXNzaXZlOnt2YWx1ZTpuZXcgeWkoMCl9LHNwZWN1bGFyOnt2YWx1ZTpuZXcgeWkoMTExODQ4MSl9LHNoaW5pbmVzczp7dmFsdWU6MzB9fV0pLHZlcnRleFNoYWRlcjpJby5tZXNocGhvbmdfdmVydCxmcmFnbWVudFNoYWRlcjpJby5tZXNocGhvbmdfZnJhZ30sc3RhbmRhcmQ6e3VuaWZvcm1zOnZvKFtPby5jb21tb24sT28uZW52bWFwLE9vLmFvbWFwLE9vLmxpZ2h0bWFwLE9vLmVtaXNzaXZlbWFwLE9vLmJ1bXBtYXAsT28ubm9ybWFsbWFwLE9vLmRpc3BsYWNlbWVudG1hcCxPby5yb3VnaG5lc3NtYXAsT28ubWV0YWxuZXNzbWFwLE9vLmZvZyxPby5saWdodHMse2VtaXNzaXZlOnt2YWx1ZTpuZXcgeWkoMCl9LHJvdWdobmVzczp7dmFsdWU6MX0sbWV0YWxuZXNzOnt2YWx1ZTowfSxlbnZNYXBJbnRlbnNpdHk6e3ZhbHVlOjF9fV0pLHZlcnRleFNoYWRlcjpJby5tZXNocGh5c2ljYWxfdmVydCxmcmFnbWVudFNoYWRlcjpJby5tZXNocGh5c2ljYWxfZnJhZ30sdG9vbjp7dW5pZm9ybXM6dm8oW09vLmNvbW1vbixPby5hb21hcCxPby5saWdodG1hcCxPby5lbWlzc2l2ZW1hcCxPby5idW1wbWFwLE9vLm5vcm1hbG1hcCxPby5kaXNwbGFjZW1lbnRtYXAsT28uZ3JhZGllbnRtYXAsT28uZm9nLE9vLmxpZ2h0cyx7ZW1pc3NpdmU6e3ZhbHVlOm5ldyB5aSgwKX19XSksdmVydGV4U2hhZGVyOklvLm1lc2h0b29uX3ZlcnQsZnJhZ21lbnRTaGFkZXI6SW8ubWVzaHRvb25fZnJhZ30sbWF0Y2FwOnt1bmlmb3Jtczp2byhbT28uY29tbW9uLE9vLmJ1bXBtYXAsT28ubm9ybWFsbWFwLE9vLmRpc3BsYWNlbWVudG1hcCxPby5mb2cse21hdGNhcDp7dmFsdWU6bnVsbH19XSksdmVydGV4U2hhZGVyOklvLm1lc2htYXRjYXBfdmVydCxmcmFnbWVudFNoYWRlcjpJby5tZXNobWF0Y2FwX2ZyYWd9LHBvaW50czp7dW5pZm9ybXM6dm8oW09vLnBvaW50cyxPby5mb2ddKSx2ZXJ0ZXhTaGFkZXI6SW8ucG9pbnRzX3ZlcnQsZnJhZ21lbnRTaGFkZXI6SW8ucG9pbnRzX2ZyYWd9LGRhc2hlZDp7dW5pZm9ybXM6dm8oW09vLmNvbW1vbixPby5mb2cse3NjYWxlOnt2YWx1ZToxfSxkYXNoU2l6ZTp7dmFsdWU6MX0sdG90YWxTaXplOnt2YWx1ZToyfX1dKSx2ZXJ0ZXhTaGFkZXI6SW8ubGluZWRhc2hlZF92ZXJ0LGZyYWdtZW50U2hhZGVyOklvLmxpbmVkYXNoZWRfZnJhZ30sZGVwdGg6e3VuaWZvcm1zOnZvKFtPby5jb21tb24sT28uZGlzcGxhY2VtZW50bWFwXSksdmVydGV4U2hhZGVyOklvLmRlcHRoX3ZlcnQsZnJhZ21lbnRTaGFkZXI6SW8uZGVwdGhfZnJhZ30sbm9ybWFsOnt1bmlmb3Jtczp2byhbT28uY29tbW9uLE9vLmJ1bXBtYXAsT28ubm9ybWFsbWFwLE9vLmRpc3BsYWNlbWVudG1hcCx7b3BhY2l0eTp7dmFsdWU6MX19XSksdmVydGV4U2hhZGVyOklvLm5vcm1hbF92ZXJ0LGZyYWdtZW50U2hhZGVyOklvLm5vcm1hbF9mcmFnfSxzcHJpdGU6e3VuaWZvcm1zOnZvKFtPby5zcHJpdGUsT28uZm9nXSksdmVydGV4U2hhZGVyOklvLnNwcml0ZV92ZXJ0LGZyYWdtZW50U2hhZGVyOklvLnNwcml0ZV9mcmFnfSxiYWNrZ3JvdW5kOnt1bmlmb3Jtczp7dXZUcmFuc2Zvcm06e3ZhbHVlOm5ldyBIbn0sdDJEOnt2YWx1ZTpudWxsfX0sdmVydGV4U2hhZGVyOklvLmJhY2tncm91bmRfdmVydCxmcmFnbWVudFNoYWRlcjpJby5iYWNrZ3JvdW5kX2ZyYWd9LGN1YmU6e3VuaWZvcm1zOnZvKFtPby5lbnZtYXAse29wYWNpdHk6e3ZhbHVlOjF9fV0pLHZlcnRleFNoYWRlcjpJby5jdWJlX3ZlcnQsZnJhZ21lbnRTaGFkZXI6SW8uY3ViZV9mcmFnfSxlcXVpcmVjdDp7dW5pZm9ybXM6e3RFcXVpcmVjdDp7dmFsdWU6bnVsbH19LHZlcnRleFNoYWRlcjpJby5lcXVpcmVjdF92ZXJ0LGZyYWdtZW50U2hhZGVyOklvLmVxdWlyZWN0X2ZyYWd9LGRpc3RhbmNlUkdCQTp7dW5pZm9ybXM6dm8oW09vLmNvbW1vbixPby5kaXNwbGFjZW1lbnRtYXAse3JlZmVyZW5jZVBvc2l0aW9uOnt2YWx1ZTpuZXcgS259LG5lYXJEaXN0YW5jZTp7dmFsdWU6MX0sZmFyRGlzdGFuY2U6e3ZhbHVlOjFlM319XSksdmVydGV4U2hhZGVyOklvLmRpc3RhbmNlUkdCQV92ZXJ0LGZyYWdtZW50U2hhZGVyOklvLmRpc3RhbmNlUkdCQV9mcmFnfSxzaGFkb3c6e3VuaWZvcm1zOnZvKFtPby5saWdodHMsT28uZm9nLHtjb2xvcjp7dmFsdWU6bmV3IHlpKDApfSxvcGFjaXR5Ont2YWx1ZToxfX1dKSx2ZXJ0ZXhTaGFkZXI6SW8uc2hhZG93X3ZlcnQsZnJhZ21lbnRTaGFkZXI6SW8uc2hhZG93X2ZyYWd9fTtmdW5jdGlvbiBEbyh0LGUsbixyLGkpe2NvbnN0IG89bmV3IHlpKDApO2xldCBhLHMsYz0wLGw9bnVsbCx1PTAsaD1udWxsO2Z1bmN0aW9uIGQodCxlKXtuLmJ1ZmZlcnMuY29sb3Iuc2V0Q2xlYXIodC5yLHQuZyx0LmIsZSxpKX1yZXR1cm57Z2V0Q2xlYXJDb2xvcjpmdW5jdGlvbigpe3JldHVybiBvfSxzZXRDbGVhckNvbG9yOmZ1bmN0aW9uKHQsZT0xKXtvLnNldCh0KSxjPWUsZChvLGMpfSxnZXRDbGVhckFscGhhOmZ1bmN0aW9uKCl7cmV0dXJuIGN9LHNldENsZWFyQWxwaGE6ZnVuY3Rpb24odCl7Yz10LGQobyxjKX0scmVuZGVyOmZ1bmN0aW9uKG4saSxwLGcpe2xldCB2PSEwPT09aS5pc1NjZW5lP2kuYmFja2dyb3VuZDpudWxsO3YmJnYuaXNUZXh0dXJlJiYodj1lLmdldCh2KSk7Y29uc3QgeT10LnhyLHg9eS5nZXRTZXNzaW9uJiZ5LmdldFNlc3Npb24oKTt4JiZcImFkZGl0aXZlXCI9PT14LmVudmlyb25tZW50QmxlbmRNb2RlJiYodj1udWxsKSxudWxsPT09dj9kKG8sYyk6diYmdi5pc0NvbG9yJiYoZCh2LDEpLGc9ITApLCh0LmF1dG9DbGVhcnx8ZykmJnQuY2xlYXIodC5hdXRvQ2xlYXJDb2xvcix0LmF1dG9DbGVhckRlcHRoLHQuYXV0b0NsZWFyU3RlbmNpbCksdiYmKHYuaXNDdWJlVGV4dHVyZXx8di5pc1dlYkdMQ3ViZVJlbmRlclRhcmdldHx8di5tYXBwaW5nPT09bHQpPyh2b2lkIDA9PT1zJiYocz1uZXcgaG8obmV3IG1vKDEsMSwxKSxuZXcgeG8oe25hbWU6XCJCYWNrZ3JvdW5kQ3ViZU1hdGVyaWFsXCIsdW5pZm9ybXM6Z28oTm8uY3ViZS51bmlmb3JtcyksdmVydGV4U2hhZGVyOk5vLmN1YmUudmVydGV4U2hhZGVyLGZyYWdtZW50U2hhZGVyOk5vLmN1YmUuZnJhZ21lbnRTaGFkZXIsc2lkZTptLGRlcHRoVGVzdDohMSxkZXB0aFdyaXRlOiExLGZvZzohMX0pKSxzLmdlb21ldHJ5LmRlbGV0ZUF0dHJpYnV0ZShcIm5vcm1hbFwiKSxzLmdlb21ldHJ5LmRlbGV0ZUF0dHJpYnV0ZShcInV2XCIpLHMub25CZWZvcmVSZW5kZXI9ZnVuY3Rpb24odCxlLG4pe3RoaXMubWF0cml4V29ybGQuY29weVBvc2l0aW9uKG4ubWF0cml4V29ybGQpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5tYXRlcmlhbCxcImVudk1hcFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy51bmlmb3Jtcy5lbnZNYXAudmFsdWV9fSksci51cGRhdGUocykpLHYuaXNXZWJHTEN1YmVSZW5kZXJUYXJnZXQmJih2PXYudGV4dHVyZSkscy5tYXRlcmlhbC51bmlmb3Jtcy5lbnZNYXAudmFsdWU9dixzLm1hdGVyaWFsLnVuaWZvcm1zLmZsaXBFbnZNYXAudmFsdWU9di5pc0N1YmVUZXh0dXJlJiZ2Ll9uZWVkc0ZsaXBFbnZNYXA/LTE6MSxsPT09diYmdT09PXYudmVyc2lvbiYmaD09PXQudG9uZU1hcHBpbmd8fChzLm1hdGVyaWFsLm5lZWRzVXBkYXRlPSEwLGw9dix1PXYudmVyc2lvbixoPXQudG9uZU1hcHBpbmcpLG4udW5zaGlmdChzLHMuZ2VvbWV0cnkscy5tYXRlcmlhbCwwLDAsbnVsbCkpOnYmJnYuaXNUZXh0dXJlJiYodm9pZCAwPT09YSYmKGE9bmV3IGhvKG5ldyBDbygyLDIpLG5ldyB4byh7bmFtZTpcIkJhY2tncm91bmRNYXRlcmlhbFwiLHVuaWZvcm1zOmdvKE5vLmJhY2tncm91bmQudW5pZm9ybXMpLHZlcnRleFNoYWRlcjpOby5iYWNrZ3JvdW5kLnZlcnRleFNoYWRlcixmcmFnbWVudFNoYWRlcjpOby5iYWNrZ3JvdW5kLmZyYWdtZW50U2hhZGVyLHNpZGU6ZixkZXB0aFRlc3Q6ITEsZGVwdGhXcml0ZTohMSxmb2c6ITF9KSksYS5nZW9tZXRyeS5kZWxldGVBdHRyaWJ1dGUoXCJub3JtYWxcIiksT2JqZWN0LmRlZmluZVByb3BlcnR5KGEubWF0ZXJpYWwsXCJtYXBcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudW5pZm9ybXMudDJELnZhbHVlfX0pLHIudXBkYXRlKGEpKSxhLm1hdGVyaWFsLnVuaWZvcm1zLnQyRC52YWx1ZT12LCEwPT09di5tYXRyaXhBdXRvVXBkYXRlJiZ2LnVwZGF0ZU1hdHJpeCgpLGEubWF0ZXJpYWwudW5pZm9ybXMudXZUcmFuc2Zvcm0udmFsdWUuY29weSh2Lm1hdHJpeCksbD09PXYmJnU9PT12LnZlcnNpb24mJmg9PT10LnRvbmVNYXBwaW5nfHwoYS5tYXRlcmlhbC5uZWVkc1VwZGF0ZT0hMCxsPXYsdT12LnZlcnNpb24saD10LnRvbmVNYXBwaW5nKSxuLnVuc2hpZnQoYSxhLmdlb21ldHJ5LGEubWF0ZXJpYWwsMCwwLG51bGwpKX19fWZ1bmN0aW9uIEJvKHQsZSxuLHIpe2NvbnN0IGk9dC5nZXRQYXJhbWV0ZXIoMzQ5MjEpLG89ci5pc1dlYkdMMj9udWxsOmUuZ2V0KFwiT0VTX3ZlcnRleF9hcnJheV9vYmplY3RcIiksYT1yLmlzV2ViR0wyfHxudWxsIT09byxzPXt9LGM9ZChudWxsKTtsZXQgbD1jO2Z1bmN0aW9uIHUoZSl7cmV0dXJuIHIuaXNXZWJHTDI/dC5iaW5kVmVydGV4QXJyYXkoZSk6by5iaW5kVmVydGV4QXJyYXlPRVMoZSl9ZnVuY3Rpb24gaChlKXtyZXR1cm4gci5pc1dlYkdMMj90LmRlbGV0ZVZlcnRleEFycmF5KGUpOm8uZGVsZXRlVmVydGV4QXJyYXlPRVMoZSl9ZnVuY3Rpb24gZCh0KXtjb25zdCBlPVtdLG49W10scj1bXTtmb3IobGV0IHQ9MDt0PGk7dCsrKWVbdF09MCxuW3RdPTAsclt0XT0wO3JldHVybntnZW9tZXRyeTpudWxsLHByb2dyYW06bnVsbCx3aXJlZnJhbWU6ITEsbmV3QXR0cmlidXRlczplLGVuYWJsZWRBdHRyaWJ1dGVzOm4sYXR0cmlidXRlRGl2aXNvcnM6cixvYmplY3Q6dCxhdHRyaWJ1dGVzOnt9LGluZGV4Om51bGx9fWZ1bmN0aW9uIHAoKXtjb25zdCB0PWwubmV3QXR0cmlidXRlcztmb3IobGV0IGU9MCxuPXQubGVuZ3RoO2U8bjtlKyspdFtlXT0wfWZ1bmN0aW9uIGYodCl7bSh0LDApfWZ1bmN0aW9uIG0obixpKXtjb25zdCBvPWwubmV3QXR0cmlidXRlcyxhPWwuZW5hYmxlZEF0dHJpYnV0ZXMscz1sLmF0dHJpYnV0ZURpdmlzb3JzO2lmKG9bbl09MSwwPT09YVtuXSYmKHQuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkobiksYVtuXT0xKSxzW25dIT09aSl7KHIuaXNXZWJHTDI/dDplLmdldChcIkFOR0xFX2luc3RhbmNlZF9hcnJheXNcIikpW3IuaXNXZWJHTDI/XCJ2ZXJ0ZXhBdHRyaWJEaXZpc29yXCI6XCJ2ZXJ0ZXhBdHRyaWJEaXZpc29yQU5HTEVcIl0obixpKSxzW25dPWl9fWZ1bmN0aW9uIGcoKXtjb25zdCBlPWwubmV3QXR0cmlidXRlcyxuPWwuZW5hYmxlZEF0dHJpYnV0ZXM7Zm9yKGxldCByPTAsaT1uLmxlbmd0aDtyPGk7cisrKW5bcl0hPT1lW3JdJiYodC5kaXNhYmxlVmVydGV4QXR0cmliQXJyYXkociksbltyXT0wKX1mdW5jdGlvbiB2KGUsbixpLG8sYSxzKXshMCE9PXIuaXNXZWJHTDJ8fDUxMjQhPT1pJiY1MTI1IT09aT90LnZlcnRleEF0dHJpYlBvaW50ZXIoZSxuLGksbyxhLHMpOnQudmVydGV4QXR0cmliSVBvaW50ZXIoZSxuLGksYSxzKX1mdW5jdGlvbiB5KCl7eCgpLGwhPT1jJiYobD1jLHUobC5vYmplY3QpKX1mdW5jdGlvbiB4KCl7Yy5nZW9tZXRyeT1udWxsLGMucHJvZ3JhbT1udWxsLGMud2lyZWZyYW1lPSExfXJldHVybntzZXR1cDpmdW5jdGlvbihpLGMsaCx5LHgpe2xldCBiPSExO2lmKGEpe2NvbnN0IGU9ZnVuY3Rpb24oZSxuLGkpe2NvbnN0IGE9ITA9PT1pLndpcmVmcmFtZTtsZXQgYz1zW2UuaWRdO3ZvaWQgMD09PWMmJihjPXt9LHNbZS5pZF09Yyk7bGV0IGw9Y1tuLmlkXTt2b2lkIDA9PT1sJiYobD17fSxjW24uaWRdPWwpO2xldCB1PWxbYV07dm9pZCAwPT09dSYmKHU9ZChyLmlzV2ViR0wyP3QuY3JlYXRlVmVydGV4QXJyYXkoKTpvLmNyZWF0ZVZlcnRleEFycmF5T0VTKCkpLGxbYV09dSk7cmV0dXJuIHV9KHksaCxjKTtsIT09ZSYmKGw9ZSx1KGwub2JqZWN0KSksYj1mdW5jdGlvbih0LGUpe2NvbnN0IG49bC5hdHRyaWJ1dGVzLHI9dC5hdHRyaWJ1dGVzO2xldCBpPTA7Zm9yKGNvbnN0IHQgaW4gcil7Y29uc3QgZT1uW3RdLG89clt0XTtpZih2b2lkIDA9PT1lKXJldHVybiEwO2lmKGUuYXR0cmlidXRlIT09bylyZXR1cm4hMDtpZihlLmRhdGEhPT1vLmRhdGEpcmV0dXJuITA7aSsrfXJldHVybiBsLmF0dHJpYnV0ZXNOdW0hPT1pfHxsLmluZGV4IT09ZX0oeSx4KSxiJiZmdW5jdGlvbih0LGUpe2NvbnN0IG49e30scj10LmF0dHJpYnV0ZXM7bGV0IGk9MDtmb3IoY29uc3QgdCBpbiByKXtjb25zdCBlPXJbdF0sbz17fTtvLmF0dHJpYnV0ZT1lLGUuZGF0YSYmKG8uZGF0YT1lLmRhdGEpLG5bdF09byxpKyt9bC5hdHRyaWJ1dGVzPW4sbC5hdHRyaWJ1dGVzTnVtPWksbC5pbmRleD1lfSh5LHgpfWVsc2V7Y29uc3QgdD0hMD09PWMud2lyZWZyYW1lO2wuZ2VvbWV0cnk9PT15LmlkJiZsLnByb2dyYW09PT1oLmlkJiZsLndpcmVmcmFtZT09PXR8fChsLmdlb21ldHJ5PXkuaWQsbC5wcm9ncmFtPWguaWQsbC53aXJlZnJhbWU9dCxiPSEwKX0hMD09PWkuaXNJbnN0YW5jZWRNZXNoJiYoYj0hMCksbnVsbCE9PXgmJm4udXBkYXRlKHgsMzQ5NjMpLGImJighZnVuY3Rpb24oaSxvLGEscyl7aWYoITE9PT1yLmlzV2ViR0wyJiYoaS5pc0luc3RhbmNlZE1lc2h8fHMuaXNJbnN0YW5jZWRCdWZmZXJHZW9tZXRyeSkmJm51bGw9PT1lLmdldChcIkFOR0xFX2luc3RhbmNlZF9hcnJheXNcIikpcmV0dXJuO3AoKTtjb25zdCBjPXMuYXR0cmlidXRlcyxsPWEuZ2V0QXR0cmlidXRlcygpLHU9by5kZWZhdWx0QXR0cmlidXRlVmFsdWVzO2Zvcihjb25zdCBlIGluIGwpe2NvbnN0IHI9bFtlXTtpZihyPj0wKXtjb25zdCBvPWNbZV07aWYodm9pZCAwIT09byl7Y29uc3QgZT1vLm5vcm1hbGl6ZWQsaT1vLml0ZW1TaXplLGE9bi5nZXQobyk7aWYodm9pZCAwPT09YSljb250aW51ZTtjb25zdCBjPWEuYnVmZmVyLGw9YS50eXBlLHU9YS5ieXRlc1BlckVsZW1lbnQ7aWYoby5pc0ludGVybGVhdmVkQnVmZmVyQXR0cmlidXRlKXtjb25zdCBuPW8uZGF0YSxhPW4uc3RyaWRlLGg9by5vZmZzZXQ7biYmbi5pc0luc3RhbmNlZEludGVybGVhdmVkQnVmZmVyPyhtKHIsbi5tZXNoUGVyQXR0cmlidXRlKSx2b2lkIDA9PT1zLl9tYXhJbnN0YW5jZUNvdW50JiYocy5fbWF4SW5zdGFuY2VDb3VudD1uLm1lc2hQZXJBdHRyaWJ1dGUqbi5jb3VudCkpOmYociksdC5iaW5kQnVmZmVyKDM0OTYyLGMpLHYocixpLGwsZSxhKnUsaCp1KX1lbHNlIG8uaXNJbnN0YW5jZWRCdWZmZXJBdHRyaWJ1dGU/KG0ocixvLm1lc2hQZXJBdHRyaWJ1dGUpLHZvaWQgMD09PXMuX21heEluc3RhbmNlQ291bnQmJihzLl9tYXhJbnN0YW5jZUNvdW50PW8ubWVzaFBlckF0dHJpYnV0ZSpvLmNvdW50KSk6ZihyKSx0LmJpbmRCdWZmZXIoMzQ5NjIsYyksdihyLGksbCxlLDAsMCl9ZWxzZSBpZihcImluc3RhbmNlTWF0cml4XCI9PT1lKXtjb25zdCBlPW4uZ2V0KGkuaW5zdGFuY2VNYXRyaXgpO2lmKHZvaWQgMD09PWUpY29udGludWU7Y29uc3Qgbz1lLmJ1ZmZlcixhPWUudHlwZTttKHIrMCwxKSxtKHIrMSwxKSxtKHIrMiwxKSxtKHIrMywxKSx0LmJpbmRCdWZmZXIoMzQ5NjIsbyksdC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHIrMCw0LGEsITEsNjQsMCksdC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHIrMSw0LGEsITEsNjQsMTYpLHQudmVydGV4QXR0cmliUG9pbnRlcihyKzIsNCxhLCExLDY0LDMyKSx0LnZlcnRleEF0dHJpYlBvaW50ZXIociszLDQsYSwhMSw2NCw0OCl9ZWxzZSBpZihcImluc3RhbmNlQ29sb3JcIj09PWUpe2NvbnN0IGU9bi5nZXQoaS5pbnN0YW5jZUNvbG9yKTtpZih2b2lkIDA9PT1lKWNvbnRpbnVlO2NvbnN0IG89ZS5idWZmZXIsYT1lLnR5cGU7bShyLDEpLHQuYmluZEJ1ZmZlcigzNDk2MixvKSx0LnZlcnRleEF0dHJpYlBvaW50ZXIociwzLGEsITEsMTIsMCl9ZWxzZSBpZih2b2lkIDAhPT11KXtjb25zdCBuPXVbZV07aWYodm9pZCAwIT09bilzd2l0Y2gobi5sZW5ndGgpe2Nhc2UgMjp0LnZlcnRleEF0dHJpYjJmdihyLG4pO2JyZWFrO2Nhc2UgMzp0LnZlcnRleEF0dHJpYjNmdihyLG4pO2JyZWFrO2Nhc2UgNDp0LnZlcnRleEF0dHJpYjRmdihyLG4pO2JyZWFrO2RlZmF1bHQ6dC52ZXJ0ZXhBdHRyaWIxZnYocixuKX19fX1nKCl9KGksYyxoLHkpLG51bGwhPT14JiZ0LmJpbmRCdWZmZXIoMzQ5NjMsbi5nZXQoeCkuYnVmZmVyKSl9LHJlc2V0OnkscmVzZXREZWZhdWx0U3RhdGU6eCxkaXNwb3NlOmZ1bmN0aW9uKCl7eSgpO2Zvcihjb25zdCB0IGluIHMpe2NvbnN0IGU9c1t0XTtmb3IoY29uc3QgdCBpbiBlKXtjb25zdCBuPWVbdF07Zm9yKGNvbnN0IHQgaW4gbiloKG5bdF0ub2JqZWN0KSxkZWxldGUgblt0XTtkZWxldGUgZVt0XX1kZWxldGUgc1t0XX19LHJlbGVhc2VTdGF0ZXNPZkdlb21ldHJ5OmZ1bmN0aW9uKHQpe2lmKHZvaWQgMD09PXNbdC5pZF0pcmV0dXJuO2NvbnN0IGU9c1t0LmlkXTtmb3IoY29uc3QgdCBpbiBlKXtjb25zdCBuPWVbdF07Zm9yKGNvbnN0IHQgaW4gbiloKG5bdF0ub2JqZWN0KSxkZWxldGUgblt0XTtkZWxldGUgZVt0XX1kZWxldGUgc1t0LmlkXX0scmVsZWFzZVN0YXRlc09mUHJvZ3JhbTpmdW5jdGlvbih0KXtmb3IoY29uc3QgZSBpbiBzKXtjb25zdCBuPXNbZV07aWYodm9pZCAwPT09blt0LmlkXSljb250aW51ZTtjb25zdCByPW5bdC5pZF07Zm9yKGNvbnN0IHQgaW4gciloKHJbdF0ub2JqZWN0KSxkZWxldGUgclt0XTtkZWxldGUgblt0LmlkXX19LGluaXRBdHRyaWJ1dGVzOnAsZW5hYmxlQXR0cmlidXRlOmYsZGlzYWJsZVVudXNlZEF0dHJpYnV0ZXM6Z319ZnVuY3Rpb24gRm8odCxlLG4scil7Y29uc3QgaT1yLmlzV2ViR0wyO2xldCBvO3RoaXMuc2V0TW9kZT1mdW5jdGlvbih0KXtvPXR9LHRoaXMucmVuZGVyPWZ1bmN0aW9uKGUscil7dC5kcmF3QXJyYXlzKG8sZSxyKSxuLnVwZGF0ZShyLG8sMSl9LHRoaXMucmVuZGVySW5zdGFuY2VzPWZ1bmN0aW9uKHIsYSxzKXtpZigwPT09cylyZXR1cm47bGV0IGMsbDtpZihpKWM9dCxsPVwiZHJhd0FycmF5c0luc3RhbmNlZFwiO2Vsc2UgaWYoYz1lLmdldChcIkFOR0xFX2luc3RhbmNlZF9hcnJheXNcIiksbD1cImRyYXdBcnJheXNJbnN0YW5jZWRBTkdMRVwiLG51bGw9PT1jKXJldHVybiB2b2lkIGNvbnNvbGUuZXJyb3IoXCJUSFJFRS5XZWJHTEJ1ZmZlclJlbmRlcmVyOiB1c2luZyBUSFJFRS5JbnN0YW5jZWRCdWZmZXJHZW9tZXRyeSBidXQgaGFyZHdhcmUgZG9lcyBub3Qgc3VwcG9ydCBleHRlbnNpb24gQU5HTEVfaW5zdGFuY2VkX2FycmF5cy5cIik7Y1tsXShvLHIsYSxzKSxuLnVwZGF0ZShhLG8scyl9fWZ1bmN0aW9uIFVvKHQsZSxuKXtsZXQgcjtmdW5jdGlvbiBpKGUpe2lmKFwiaGlnaHBcIj09PWUpe2lmKHQuZ2V0U2hhZGVyUHJlY2lzaW9uRm9ybWF0KDM1NjMzLDM2MzM4KS5wcmVjaXNpb24+MCYmdC5nZXRTaGFkZXJQcmVjaXNpb25Gb3JtYXQoMzU2MzIsMzYzMzgpLnByZWNpc2lvbj4wKXJldHVyblwiaGlnaHBcIjtlPVwibWVkaXVtcFwifXJldHVyblwibWVkaXVtcFwiPT09ZSYmdC5nZXRTaGFkZXJQcmVjaXNpb25Gb3JtYXQoMzU2MzMsMzYzMzcpLnByZWNpc2lvbj4wJiZ0LmdldFNoYWRlclByZWNpc2lvbkZvcm1hdCgzNTYzMiwzNjMzNykucHJlY2lzaW9uPjA/XCJtZWRpdW1wXCI6XCJsb3dwXCJ9Y29uc3Qgbz1cInVuZGVmaW5lZFwiIT10eXBlb2YgV2ViR0wyUmVuZGVyaW5nQ29udGV4dCYmdCBpbnN0YW5jZW9mIFdlYkdMMlJlbmRlcmluZ0NvbnRleHR8fFwidW5kZWZpbmVkXCIhPXR5cGVvZiBXZWJHTDJDb21wdXRlUmVuZGVyaW5nQ29udGV4dCYmdCBpbnN0YW5jZW9mIFdlYkdMMkNvbXB1dGVSZW5kZXJpbmdDb250ZXh0O2xldCBhPXZvaWQgMCE9PW4ucHJlY2lzaW9uP24ucHJlY2lzaW9uOlwiaGlnaHBcIjtjb25zdCBzPWkoYSk7cyE9PWEmJihjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOlwiLGEsXCJub3Qgc3VwcG9ydGVkLCB1c2luZ1wiLHMsXCJpbnN0ZWFkLlwiKSxhPXMpO2NvbnN0IGM9ITA9PT1uLmxvZ2FyaXRobWljRGVwdGhCdWZmZXIsbD10LmdldFBhcmFtZXRlcigzNDkzMCksdT10LmdldFBhcmFtZXRlcigzNTY2MCksaD10LmdldFBhcmFtZXRlcigzMzc5KSxkPXQuZ2V0UGFyYW1ldGVyKDM0MDc2KSxwPXQuZ2V0UGFyYW1ldGVyKDM0OTIxKSxmPXQuZ2V0UGFyYW1ldGVyKDM2MzQ3KSxtPXQuZ2V0UGFyYW1ldGVyKDM2MzQ4KSxnPXQuZ2V0UGFyYW1ldGVyKDM2MzQ5KSx2PXU+MCx5PW98fCEhZS5nZXQoXCJPRVNfdGV4dHVyZV9mbG9hdFwiKTtyZXR1cm57aXNXZWJHTDI6byxnZXRNYXhBbmlzb3Ryb3B5OmZ1bmN0aW9uKCl7aWYodm9pZCAwIT09cilyZXR1cm4gcjtjb25zdCBuPWUuZ2V0KFwiRVhUX3RleHR1cmVfZmlsdGVyX2FuaXNvdHJvcGljXCIpO3JldHVybiByPW51bGwhPT1uP3QuZ2V0UGFyYW1ldGVyKG4uTUFYX1RFWFRVUkVfTUFYX0FOSVNPVFJPUFlfRVhUKTowLHJ9LGdldE1heFByZWNpc2lvbjppLHByZWNpc2lvbjphLGxvZ2FyaXRobWljRGVwdGhCdWZmZXI6YyxtYXhUZXh0dXJlczpsLG1heFZlcnRleFRleHR1cmVzOnUsbWF4VGV4dHVyZVNpemU6aCxtYXhDdWJlbWFwU2l6ZTpkLG1heEF0dHJpYnV0ZXM6cCxtYXhWZXJ0ZXhVbmlmb3JtczpmLG1heFZhcnlpbmdzOm0sbWF4RnJhZ21lbnRVbmlmb3JtczpnLHZlcnRleFRleHR1cmVzOnYsZmxvYXRGcmFnbWVudFRleHR1cmVzOnksZmxvYXRWZXJ0ZXhUZXh0dXJlczp2JiZ5LG1heFNhbXBsZXM6bz90LmdldFBhcmFtZXRlcigzNjE4Myk6MH19ZnVuY3Rpb24gem8odCl7Y29uc3QgZT10aGlzO2xldCBuPW51bGwscj0wLGk9ITEsbz0hMTtjb25zdCBhPW5ldyB0aSxzPW5ldyBIbixjPXt2YWx1ZTpudWxsLG5lZWRzVXBkYXRlOiExfTtmdW5jdGlvbiBsKCl7Yy52YWx1ZSE9PW4mJihjLnZhbHVlPW4sYy5uZWVkc1VwZGF0ZT1yPjApLGUubnVtUGxhbmVzPXIsZS5udW1JbnRlcnNlY3Rpb249MH1mdW5jdGlvbiB1KHQsbixyLGkpe2NvbnN0IG89bnVsbCE9PXQ/dC5sZW5ndGg6MDtsZXQgbD1udWxsO2lmKDAhPT1vKXtpZihsPWMudmFsdWUsITAhPT1pfHxudWxsPT09bCl7Y29uc3QgZT1yKzQqbyxpPW4ubWF0cml4V29ybGRJbnZlcnNlO3MuZ2V0Tm9ybWFsTWF0cml4KGkpLChudWxsPT09bHx8bC5sZW5ndGg8ZSkmJihsPW5ldyBGbG9hdDMyQXJyYXkoZSkpO2ZvcihsZXQgZT0wLG49cjtlIT09bzsrK2Usbis9NClhLmNvcHkodFtlXSkuYXBwbHlNYXRyaXg0KGkscyksYS5ub3JtYWwudG9BcnJheShsLG4pLGxbbiszXT1hLmNvbnN0YW50fWMudmFsdWU9bCxjLm5lZWRzVXBkYXRlPSEwfXJldHVybiBlLm51bVBsYW5lcz1vLGUubnVtSW50ZXJzZWN0aW9uPTAsbH10aGlzLnVuaWZvcm09Yyx0aGlzLm51bVBsYW5lcz0wLHRoaXMubnVtSW50ZXJzZWN0aW9uPTAsdGhpcy5pbml0PWZ1bmN0aW9uKHQsZSxvKXtjb25zdCBhPTAhPT10Lmxlbmd0aHx8ZXx8MCE9PXJ8fGk7cmV0dXJuIGk9ZSxuPXUodCxvLDApLHI9dC5sZW5ndGgsYX0sdGhpcy5iZWdpblNoYWRvd3M9ZnVuY3Rpb24oKXtvPSEwLHUobnVsbCl9LHRoaXMuZW5kU2hhZG93cz1mdW5jdGlvbigpe289ITEsbCgpfSx0aGlzLnNldFN0YXRlPWZ1bmN0aW9uKGUsYSxzKXtjb25zdCBoPWUuY2xpcHBpbmdQbGFuZXMsZD1lLmNsaXBJbnRlcnNlY3Rpb24scD1lLmNsaXBTaGFkb3dzLGY9dC5nZXQoZSk7aWYoIWl8fG51bGw9PT1ofHwwPT09aC5sZW5ndGh8fG8mJiFwKW8/dShudWxsKTpsKCk7ZWxzZXtjb25zdCB0PW8/MDpyLGU9NCp0O2xldCBpPWYuY2xpcHBpbmdTdGF0ZXx8bnVsbDtjLnZhbHVlPWksaT11KGgsYSxlLHMpO2ZvcihsZXQgdD0wO3QhPT1lOysrdClpW3RdPW5bdF07Zi5jbGlwcGluZ1N0YXRlPWksdGhpcy5udW1JbnRlcnNlY3Rpb249ZD90aGlzLm51bVBsYW5lczowLHRoaXMubnVtUGxhbmVzKz10fX19ZnVuY3Rpb24gR28odCl7bGV0IGU9bmV3IFdlYWtNYXA7ZnVuY3Rpb24gbih0LGUpe3JldHVybiBlPT09c3Q/dC5tYXBwaW5nPW90OmU9PT1jdCYmKHQubWFwcGluZz1hdCksdH1mdW5jdGlvbiByKHQpe2NvbnN0IG49dC50YXJnZXQ7bi5yZW1vdmVFdmVudExpc3RlbmVyKFwiZGlzcG9zZVwiLHIpO2NvbnN0IGk9ZS5nZXQobik7dm9pZCAwIT09aSYmKGUuZGVsZXRlKG4pLGkuZGlzcG9zZSgpKX1yZXR1cm57Z2V0OmZ1bmN0aW9uKGkpe2lmKGkmJmkuaXNUZXh0dXJlKXtjb25zdCBvPWkubWFwcGluZztpZihvPT09c3R8fG89PT1jdCl7aWYoZS5oYXMoaSkpe3JldHVybiBuKGUuZ2V0KGkpLnRleHR1cmUsaS5tYXBwaW5nKX17Y29uc3Qgbz1pLmltYWdlO2lmKG8mJm8uaGVpZ2h0PjApe2NvbnN0IGE9dC5nZXRSZW5kZXJMaXN0KCkscz10LmdldFJlbmRlclRhcmdldCgpLGM9dC5nZXRSZW5kZXJTdGF0ZSgpLGw9bmV3IFNvKG8uaGVpZ2h0LzIpO3JldHVybiBsLmZyb21FcXVpcmVjdGFuZ3VsYXJUZXh0dXJlKHQsaSksZS5zZXQoaSxsKSx0LnNldFJlbmRlclRhcmdldChzKSx0LnNldFJlbmRlckxpc3QoYSksdC5zZXRSZW5kZXJTdGF0ZShjKSxpLmFkZEV2ZW50TGlzdGVuZXIoXCJkaXNwb3NlXCIsciksbihsLnRleHR1cmUsaS5tYXBwaW5nKX1yZXR1cm4gbnVsbH19fXJldHVybiBpfSxkaXNwb3NlOmZ1bmN0aW9uKCl7ZT1uZXcgV2Vha01hcH19fWZ1bmN0aW9uIEhvKHQpe2NvbnN0IGU9e307cmV0dXJue2hhczpmdW5jdGlvbihuKXtpZih2b2lkIDAhPT1lW25dKXJldHVybiBudWxsIT09ZVtuXTtsZXQgcjtzd2l0Y2gobil7Y2FzZVwiV0VCR0xfZGVwdGhfdGV4dHVyZVwiOnI9dC5nZXRFeHRlbnNpb24oXCJXRUJHTF9kZXB0aF90ZXh0dXJlXCIpfHx0LmdldEV4dGVuc2lvbihcIk1PWl9XRUJHTF9kZXB0aF90ZXh0dXJlXCIpfHx0LmdldEV4dGVuc2lvbihcIldFQktJVF9XRUJHTF9kZXB0aF90ZXh0dXJlXCIpO2JyZWFrO2Nhc2VcIkVYVF90ZXh0dXJlX2ZpbHRlcl9hbmlzb3Ryb3BpY1wiOnI9dC5nZXRFeHRlbnNpb24oXCJFWFRfdGV4dHVyZV9maWx0ZXJfYW5pc290cm9waWNcIil8fHQuZ2V0RXh0ZW5zaW9uKFwiTU9aX0VYVF90ZXh0dXJlX2ZpbHRlcl9hbmlzb3Ryb3BpY1wiKXx8dC5nZXRFeHRlbnNpb24oXCJXRUJLSVRfRVhUX3RleHR1cmVfZmlsdGVyX2FuaXNvdHJvcGljXCIpO2JyZWFrO2Nhc2VcIldFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9zM3RjXCI6cj10LmdldEV4dGVuc2lvbihcIldFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9zM3RjXCIpfHx0LmdldEV4dGVuc2lvbihcIk1PWl9XRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfczN0Y1wiKXx8dC5nZXRFeHRlbnNpb24oXCJXRUJLSVRfV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3MzdGNcIik7YnJlYWs7Y2FzZVwiV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3B2cnRjXCI6cj10LmdldEV4dGVuc2lvbihcIldFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9wdnJ0Y1wiKXx8dC5nZXRFeHRlbnNpb24oXCJXRUJLSVRfV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3B2cnRjXCIpO2JyZWFrO2RlZmF1bHQ6cj10LmdldEV4dGVuc2lvbihuKX1yZXR1cm4gZVtuXT1yLG51bGwhPT1yfSxnZXQ6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuaGFzKHQpfHxjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiBcIit0K1wiIGV4dGVuc2lvbiBub3Qgc3VwcG9ydGVkLlwiKSxlW3RdfX19ZnVuY3Rpb24ga28odCxlLG4scil7Y29uc3QgaT1uZXcgV2Vha01hcCxvPW5ldyBXZWFrTWFwO2Z1bmN0aW9uIGEodCl7Y29uc3Qgcz10LnRhcmdldCxjPWkuZ2V0KHMpO251bGwhPT1jLmluZGV4JiZlLnJlbW92ZShjLmluZGV4KTtmb3IoY29uc3QgdCBpbiBjLmF0dHJpYnV0ZXMpZS5yZW1vdmUoYy5hdHRyaWJ1dGVzW3RdKTtzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJkaXNwb3NlXCIsYSksaS5kZWxldGUocyk7Y29uc3QgbD1vLmdldChjKTtsJiYoZS5yZW1vdmUobCksby5kZWxldGUoYykpLHIucmVsZWFzZVN0YXRlc09mR2VvbWV0cnkoYyksITA9PT1zLmlzSW5zdGFuY2VkQnVmZmVyR2VvbWV0cnkmJmRlbGV0ZSBzLl9tYXhJbnN0YW5jZUNvdW50LG4ubWVtb3J5Lmdlb21ldHJpZXMtLX1mdW5jdGlvbiBzKHQpe2NvbnN0IG49W10scj10LmluZGV4LGk9dC5hdHRyaWJ1dGVzLnBvc2l0aW9uO2xldCBhPTA7aWYobnVsbCE9PXIpe2NvbnN0IHQ9ci5hcnJheTthPXIudmVyc2lvbjtmb3IobGV0IGU9MCxyPXQubGVuZ3RoO2U8cjtlKz0zKXtjb25zdCByPXRbZSswXSxpPXRbZSsxXSxvPXRbZSsyXTtuLnB1c2gocixpLGksbyxvLHIpfX1lbHNle2NvbnN0IHQ9aS5hcnJheTthPWkudmVyc2lvbjtmb3IobGV0IGU9MCxyPXQubGVuZ3RoLzMtMTtlPHI7ZSs9Myl7Y29uc3QgdD1lKzAscj1lKzEsaT1lKzI7bi5wdXNoKHQscixyLGksaSx0KX19Y29uc3Qgcz1uZXcoRmkobik+NjU1MzU/SWk6UGkpKG4sMSk7cy52ZXJzaW9uPWE7Y29uc3QgYz1vLmdldCh0KTtjJiZlLnJlbW92ZShjKSxvLnNldCh0LHMpfXJldHVybntnZXQ6ZnVuY3Rpb24odCxlKXtsZXQgcj1pLmdldChlKTtyZXR1cm4gcnx8KGUuYWRkRXZlbnRMaXN0ZW5lcihcImRpc3Bvc2VcIixhKSxlLmlzQnVmZmVyR2VvbWV0cnk/cj1lOmUuaXNHZW9tZXRyeSYmKHZvaWQgMD09PWUuX2J1ZmZlckdlb21ldHJ5JiYoZS5fYnVmZmVyR2VvbWV0cnk9KG5ldyBxaSkuc2V0RnJvbU9iamVjdCh0KSkscj1lLl9idWZmZXJHZW9tZXRyeSksaS5zZXQoZSxyKSxuLm1lbW9yeS5nZW9tZXRyaWVzKysscil9LHVwZGF0ZTpmdW5jdGlvbih0KXtjb25zdCBuPXQuYXR0cmlidXRlcztmb3IoY29uc3QgdCBpbiBuKWUudXBkYXRlKG5bdF0sMzQ5NjIpO2NvbnN0IHI9dC5tb3JwaEF0dHJpYnV0ZXM7Zm9yKGNvbnN0IHQgaW4gcil7Y29uc3Qgbj1yW3RdO2ZvcihsZXQgdD0wLHI9bi5sZW5ndGg7dDxyO3QrKyllLnVwZGF0ZShuW3RdLDM0OTYyKX19LGdldFdpcmVmcmFtZUF0dHJpYnV0ZTpmdW5jdGlvbih0KXtjb25zdCBlPW8uZ2V0KHQpO2lmKGUpe2NvbnN0IG49dC5pbmRleDtudWxsIT09biYmZS52ZXJzaW9uPG4udmVyc2lvbiYmcyh0KX1lbHNlIHModCk7cmV0dXJuIG8uZ2V0KHQpfX19ZnVuY3Rpb24gVm8odCxlLG4scil7Y29uc3QgaT1yLmlzV2ViR0wyO2xldCBvLGEsczt0aGlzLnNldE1vZGU9ZnVuY3Rpb24odCl7bz10fSx0aGlzLnNldEluZGV4PWZ1bmN0aW9uKHQpe2E9dC50eXBlLHM9dC5ieXRlc1BlckVsZW1lbnR9LHRoaXMucmVuZGVyPWZ1bmN0aW9uKGUscil7dC5kcmF3RWxlbWVudHMobyxyLGEsZSpzKSxuLnVwZGF0ZShyLG8sMSl9LHRoaXMucmVuZGVySW5zdGFuY2VzPWZ1bmN0aW9uKHIsYyxsKXtpZigwPT09bClyZXR1cm47bGV0IHUsaDtpZihpKXU9dCxoPVwiZHJhd0VsZW1lbnRzSW5zdGFuY2VkXCI7ZWxzZSBpZih1PWUuZ2V0KFwiQU5HTEVfaW5zdGFuY2VkX2FycmF5c1wiKSxoPVwiZHJhd0VsZW1lbnRzSW5zdGFuY2VkQU5HTEVcIixudWxsPT09dSlyZXR1cm4gdm9pZCBjb25zb2xlLmVycm9yKFwiVEhSRUUuV2ViR0xJbmRleGVkQnVmZmVyUmVuZGVyZXI6IHVzaW5nIFRIUkVFLkluc3RhbmNlZEJ1ZmZlckdlb21ldHJ5IGJ1dCBoYXJkd2FyZSBkb2VzIG5vdCBzdXBwb3J0IGV4dGVuc2lvbiBBTkdMRV9pbnN0YW5jZWRfYXJyYXlzLlwiKTt1W2hdKG8sYyxhLHIqcyxsKSxuLnVwZGF0ZShjLG8sbCl9fWZ1bmN0aW9uIGpvKHQpe2NvbnN0IGU9e2ZyYW1lOjAsY2FsbHM6MCx0cmlhbmdsZXM6MCxwb2ludHM6MCxsaW5lczowfTtyZXR1cm57bWVtb3J5OntnZW9tZXRyaWVzOjAsdGV4dHVyZXM6MH0scmVuZGVyOmUscHJvZ3JhbXM6bnVsbCxhdXRvUmVzZXQ6ITAscmVzZXQ6ZnVuY3Rpb24oKXtlLmZyYW1lKyssZS5jYWxscz0wLGUudHJpYW5nbGVzPTAsZS5wb2ludHM9MCxlLmxpbmVzPTB9LHVwZGF0ZTpmdW5jdGlvbih0LG4scil7c3dpdGNoKGUuY2FsbHMrKyxuKXtjYXNlIDQ6ZS50cmlhbmdsZXMrPXIqKHQvMyk7YnJlYWs7Y2FzZSAxOmUubGluZXMrPXIqKHQvMik7YnJlYWs7Y2FzZSAzOmUubGluZXMrPXIqKHQtMSk7YnJlYWs7Y2FzZSAyOmUubGluZXMrPXIqdDticmVhaztjYXNlIDA6ZS5wb2ludHMrPXIqdDticmVhaztkZWZhdWx0OmNvbnNvbGUuZXJyb3IoXCJUSFJFRS5XZWJHTEluZm86IFVua25vd24gZHJhdyBtb2RlOlwiLG4pfX19fWZ1bmN0aW9uIFdvKHQsZSl7cmV0dXJuIHRbMF0tZVswXX1mdW5jdGlvbiBYbyh0LGUpe3JldHVybiBNYXRoLmFicyhlWzFdKS1NYXRoLmFicyh0WzFdKX1mdW5jdGlvbiBxbyh0KXtjb25zdCBlPXt9LG49bmV3IEZsb2F0MzJBcnJheSg4KSxyPVtdO2ZvcihsZXQgdD0wO3Q8ODt0Kyspclt0XT1bdCwwXTtyZXR1cm57dXBkYXRlOmZ1bmN0aW9uKGksbyxhLHMpe2NvbnN0IGM9aS5tb3JwaFRhcmdldEluZmx1ZW5jZXMsbD12b2lkIDA9PT1jPzA6Yy5sZW5ndGg7bGV0IHU9ZVtvLmlkXTtpZih2b2lkIDA9PT11KXt1PVtdO2ZvcihsZXQgdD0wO3Q8bDt0KyspdVt0XT1bdCwwXTtlW28uaWRdPXV9Zm9yKGxldCB0PTA7dDxsO3QrKyl7Y29uc3QgZT11W3RdO2VbMF09dCxlWzFdPWNbdF19dS5zb3J0KFhvKTtmb3IobGV0IHQ9MDt0PDg7dCsrKXQ8bCYmdVt0XVsxXT8oclt0XVswXT11W3RdWzBdLHJbdF1bMV09dVt0XVsxXSk6KHJbdF1bMF09TnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIsclt0XVsxXT0wKTtyLnNvcnQoV28pO2NvbnN0IGg9YS5tb3JwaFRhcmdldHMmJm8ubW9ycGhBdHRyaWJ1dGVzLnBvc2l0aW9uLGQ9YS5tb3JwaE5vcm1hbHMmJm8ubW9ycGhBdHRyaWJ1dGVzLm5vcm1hbDtsZXQgcD0wO2ZvcihsZXQgdD0wO3Q8ODt0Kyspe2NvbnN0IGU9clt0XSxpPWVbMF0sYT1lWzFdO2khPT1OdW1iZXIuTUFYX1NBRkVfSU5URUdFUiYmYT8oaCYmby5nZXRBdHRyaWJ1dGUoXCJtb3JwaFRhcmdldFwiK3QpIT09aFtpXSYmby5zZXRBdHRyaWJ1dGUoXCJtb3JwaFRhcmdldFwiK3QsaFtpXSksZCYmby5nZXRBdHRyaWJ1dGUoXCJtb3JwaE5vcm1hbFwiK3QpIT09ZFtpXSYmby5zZXRBdHRyaWJ1dGUoXCJtb3JwaE5vcm1hbFwiK3QsZFtpXSksblt0XT1hLHArPWEpOihoJiYhMD09PW8uaGFzQXR0cmlidXRlKFwibW9ycGhUYXJnZXRcIit0KSYmby5kZWxldGVBdHRyaWJ1dGUoXCJtb3JwaFRhcmdldFwiK3QpLGQmJiEwPT09by5oYXNBdHRyaWJ1dGUoXCJtb3JwaE5vcm1hbFwiK3QpJiZvLmRlbGV0ZUF0dHJpYnV0ZShcIm1vcnBoTm9ybWFsXCIrdCksblt0XT0wKX1jb25zdCBmPW8ubW9ycGhUYXJnZXRzUmVsYXRpdmU/MToxLXA7cy5nZXRVbmlmb3JtcygpLnNldFZhbHVlKHQsXCJtb3JwaFRhcmdldEJhc2VJbmZsdWVuY2VcIixmKSxzLmdldFVuaWZvcm1zKCkuc2V0VmFsdWUodCxcIm1vcnBoVGFyZ2V0SW5mbHVlbmNlc1wiLG4pfX19ZnVuY3Rpb24gWW8odCxlLG4scil7bGV0IGk9bmV3IFdlYWtNYXA7cmV0dXJue3VwZGF0ZTpmdW5jdGlvbih0KXtjb25zdCBvPXIucmVuZGVyLmZyYW1lLGE9dC5nZW9tZXRyeSxzPWUuZ2V0KHQsYSk7cmV0dXJuIGkuZ2V0KHMpIT09byYmKGEuaXNHZW9tZXRyeSYmcy51cGRhdGVGcm9tT2JqZWN0KHQpLGUudXBkYXRlKHMpLGkuc2V0KHMsbykpLHQuaXNJbnN0YW5jZWRNZXNoJiYobi51cGRhdGUodC5pbnN0YW5jZU1hdHJpeCwzNDk2MiksbnVsbCE9PXQuaW5zdGFuY2VDb2xvciYmbi51cGRhdGUodC5pbnN0YW5jZUNvbG9yLDM0OTYyKSksc30sZGlzcG9zZTpmdW5jdGlvbigpe2k9bmV3IFdlYWtNYXB9fX1mdW5jdGlvbiBabyh0PW51bGwsZT0xLG49MSxyPTEpe1duLmNhbGwodGhpcyxudWxsKSx0aGlzLmltYWdlPXtkYXRhOnQsd2lkdGg6ZSxoZWlnaHQ6bixkZXB0aDpyfSx0aGlzLm1hZ0ZpbHRlcj1mdCx0aGlzLm1pbkZpbHRlcj1mdCx0aGlzLndyYXBSPWR0LHRoaXMuZ2VuZXJhdGVNaXBtYXBzPSExLHRoaXMuZmxpcFk9ITEsdGhpcy5uZWVkc1VwZGF0ZT0hMH1mdW5jdGlvbiBKbyh0PW51bGwsZT0xLG49MSxyPTEpe1duLmNhbGwodGhpcyxudWxsKSx0aGlzLmltYWdlPXtkYXRhOnQsd2lkdGg6ZSxoZWlnaHQ6bixkZXB0aDpyfSx0aGlzLm1hZ0ZpbHRlcj1mdCx0aGlzLm1pbkZpbHRlcj1mdCx0aGlzLndyYXBSPWR0LHRoaXMuZ2VuZXJhdGVNaXBtYXBzPSExLHRoaXMuZmxpcFk9ITEsdGhpcy5uZWVkc1VwZGF0ZT0hMH1Oby5waHlzaWNhbD17dW5pZm9ybXM6dm8oW05vLnN0YW5kYXJkLnVuaWZvcm1zLHtjbGVhcmNvYXQ6e3ZhbHVlOjB9LGNsZWFyY29hdE1hcDp7dmFsdWU6bnVsbH0sY2xlYXJjb2F0Um91Z2huZXNzOnt2YWx1ZTowfSxjbGVhcmNvYXRSb3VnaG5lc3NNYXA6e3ZhbHVlOm51bGx9LGNsZWFyY29hdE5vcm1hbFNjYWxlOnt2YWx1ZTpuZXcgR24oMSwxKX0sY2xlYXJjb2F0Tm9ybWFsTWFwOnt2YWx1ZTpudWxsfSxzaGVlbjp7dmFsdWU6bmV3IHlpKDApfSx0cmFuc21pc3Npb246e3ZhbHVlOjB9LHRyYW5zbWlzc2lvbk1hcDp7dmFsdWU6bnVsbH19XSksdmVydGV4U2hhZGVyOklvLm1lc2hwaHlzaWNhbF92ZXJ0LGZyYWdtZW50U2hhZGVyOklvLm1lc2hwaHlzaWNhbF9mcmFnfSxaby5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShXbi5wcm90b3R5cGUpLFpvLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1abyxaby5wcm90b3R5cGUuaXNEYXRhVGV4dHVyZTJEQXJyYXk9ITAsSm8ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoV24ucHJvdG90eXBlKSxKby5wcm90b3R5cGUuY29uc3RydWN0b3I9Sm8sSm8ucHJvdG90eXBlLmlzRGF0YVRleHR1cmUzRD0hMDtjb25zdCBLbz1uZXcgV24sUW89bmV3IFpvLCRvPW5ldyBKbyx0YT1uZXcgTW8sZWE9W10sbmE9W10scmE9bmV3IEZsb2F0MzJBcnJheSgxNiksaWE9bmV3IEZsb2F0MzJBcnJheSg5KSxvYT1uZXcgRmxvYXQzMkFycmF5KDQpO2Z1bmN0aW9uIGFhKHQsZSxuKXtjb25zdCByPXRbMF07aWYocjw9MHx8cj4wKXJldHVybiB0O2NvbnN0IGk9ZSpuO2xldCBvPWVhW2ldO2lmKHZvaWQgMD09PW8mJihvPW5ldyBGbG9hdDMyQXJyYXkoaSksZWFbaV09byksMCE9PWUpe3IudG9BcnJheShvLDApO2ZvcihsZXQgcj0xLGk9MDtyIT09ZTsrK3IpaSs9bix0W3JdLnRvQXJyYXkobyxpKX1yZXR1cm4gb31mdW5jdGlvbiBzYSh0LGUpe2lmKHQubGVuZ3RoIT09ZS5sZW5ndGgpcmV0dXJuITE7Zm9yKGxldCBuPTAscj10Lmxlbmd0aDtuPHI7bisrKWlmKHRbbl0hPT1lW25dKXJldHVybiExO3JldHVybiEwfWZ1bmN0aW9uIGNhKHQsZSl7Zm9yKGxldCBuPTAscj1lLmxlbmd0aDtuPHI7bisrKXRbbl09ZVtuXX1mdW5jdGlvbiBsYSh0LGUpe2xldCBuPW5hW2VdO3ZvaWQgMD09PW4mJihuPW5ldyBJbnQzMkFycmF5KGUpLG5hW2VdPW4pO2ZvcihsZXQgcj0wO3IhPT1lOysrciluW3JdPXQuYWxsb2NhdGVUZXh0dXJlVW5pdCgpO3JldHVybiBufWZ1bmN0aW9uIHVhKHQsZSl7Y29uc3Qgbj10aGlzLmNhY2hlO25bMF0hPT1lJiYodC51bmlmb3JtMWYodGhpcy5hZGRyLGUpLG5bMF09ZSl9ZnVuY3Rpb24gaGEodCxlKXtjb25zdCBuPXRoaXMuY2FjaGU7aWYodm9pZCAwIT09ZS54KW5bMF09PT1lLngmJm5bMV09PT1lLnl8fCh0LnVuaWZvcm0yZih0aGlzLmFkZHIsZS54LGUueSksblswXT1lLngsblsxXT1lLnkpO2Vsc2V7aWYoc2EobixlKSlyZXR1cm47dC51bmlmb3JtMmZ2KHRoaXMuYWRkcixlKSxjYShuLGUpfX1mdW5jdGlvbiBkYSh0LGUpe2NvbnN0IG49dGhpcy5jYWNoZTtpZih2b2lkIDAhPT1lLngpblswXT09PWUueCYmblsxXT09PWUueSYmblsyXT09PWUuenx8KHQudW5pZm9ybTNmKHRoaXMuYWRkcixlLngsZS55LGUueiksblswXT1lLngsblsxXT1lLnksblsyXT1lLnopO2Vsc2UgaWYodm9pZCAwIT09ZS5yKW5bMF09PT1lLnImJm5bMV09PT1lLmcmJm5bMl09PT1lLmJ8fCh0LnVuaWZvcm0zZih0aGlzLmFkZHIsZS5yLGUuZyxlLmIpLG5bMF09ZS5yLG5bMV09ZS5nLG5bMl09ZS5iKTtlbHNle2lmKHNhKG4sZSkpcmV0dXJuO3QudW5pZm9ybTNmdih0aGlzLmFkZHIsZSksY2EobixlKX19ZnVuY3Rpb24gcGEodCxlKXtjb25zdCBuPXRoaXMuY2FjaGU7aWYodm9pZCAwIT09ZS54KW5bMF09PT1lLngmJm5bMV09PT1lLnkmJm5bMl09PT1lLnomJm5bM109PT1lLnd8fCh0LnVuaWZvcm00Zih0aGlzLmFkZHIsZS54LGUueSxlLnosZS53KSxuWzBdPWUueCxuWzFdPWUueSxuWzJdPWUueixuWzNdPWUudyk7ZWxzZXtpZihzYShuLGUpKXJldHVybjt0LnVuaWZvcm00ZnYodGhpcy5hZGRyLGUpLGNhKG4sZSl9fWZ1bmN0aW9uIGZhKHQsZSl7Y29uc3Qgbj10aGlzLmNhY2hlLHI9ZS5lbGVtZW50cztpZih2b2lkIDA9PT1yKXtpZihzYShuLGUpKXJldHVybjt0LnVuaWZvcm1NYXRyaXgyZnYodGhpcy5hZGRyLCExLGUpLGNhKG4sZSl9ZWxzZXtpZihzYShuLHIpKXJldHVybjtvYS5zZXQociksdC51bmlmb3JtTWF0cml4MmZ2KHRoaXMuYWRkciwhMSxvYSksY2EobixyKX19ZnVuY3Rpb24gbWEodCxlKXtjb25zdCBuPXRoaXMuY2FjaGUscj1lLmVsZW1lbnRzO2lmKHZvaWQgMD09PXIpe2lmKHNhKG4sZSkpcmV0dXJuO3QudW5pZm9ybU1hdHJpeDNmdih0aGlzLmFkZHIsITEsZSksY2EobixlKX1lbHNle2lmKHNhKG4scikpcmV0dXJuO2lhLnNldChyKSx0LnVuaWZvcm1NYXRyaXgzZnYodGhpcy5hZGRyLCExLGlhKSxjYShuLHIpfX1mdW5jdGlvbiBnYSh0LGUpe2NvbnN0IG49dGhpcy5jYWNoZSxyPWUuZWxlbWVudHM7aWYodm9pZCAwPT09cil7aWYoc2EobixlKSlyZXR1cm47dC51bmlmb3JtTWF0cml4NGZ2KHRoaXMuYWRkciwhMSxlKSxjYShuLGUpfWVsc2V7aWYoc2EobixyKSlyZXR1cm47cmEuc2V0KHIpLHQudW5pZm9ybU1hdHJpeDRmdih0aGlzLmFkZHIsITEscmEpLGNhKG4scil9fWZ1bmN0aW9uIHZhKHQsZSxuKXtjb25zdCByPXRoaXMuY2FjaGUsaT1uLmFsbG9jYXRlVGV4dHVyZVVuaXQoKTtyWzBdIT09aSYmKHQudW5pZm9ybTFpKHRoaXMuYWRkcixpKSxyWzBdPWkpLG4uc2FmZVNldFRleHR1cmUyRChlfHxLbyxpKX1mdW5jdGlvbiB5YSh0LGUsbil7Y29uc3Qgcj10aGlzLmNhY2hlLGk9bi5hbGxvY2F0ZVRleHR1cmVVbml0KCk7clswXSE9PWkmJih0LnVuaWZvcm0xaSh0aGlzLmFkZHIsaSksclswXT1pKSxuLnNldFRleHR1cmUyREFycmF5KGV8fFFvLGkpfWZ1bmN0aW9uIHhhKHQsZSxuKXtjb25zdCByPXRoaXMuY2FjaGUsaT1uLmFsbG9jYXRlVGV4dHVyZVVuaXQoKTtyWzBdIT09aSYmKHQudW5pZm9ybTFpKHRoaXMuYWRkcixpKSxyWzBdPWkpLG4uc2V0VGV4dHVyZTNEKGV8fCRvLGkpfWZ1bmN0aW9uIGJhKHQsZSxuKXtjb25zdCByPXRoaXMuY2FjaGUsaT1uLmFsbG9jYXRlVGV4dHVyZVVuaXQoKTtyWzBdIT09aSYmKHQudW5pZm9ybTFpKHRoaXMuYWRkcixpKSxyWzBdPWkpLG4uc2FmZVNldFRleHR1cmVDdWJlKGV8fHRhLGkpfWZ1bmN0aW9uIHdhKHQsZSl7Y29uc3Qgbj10aGlzLmNhY2hlO25bMF0hPT1lJiYodC51bmlmb3JtMWkodGhpcy5hZGRyLGUpLG5bMF09ZSl9ZnVuY3Rpb24gX2EodCxlKXtjb25zdCBuPXRoaXMuY2FjaGU7c2EobixlKXx8KHQudW5pZm9ybTJpdih0aGlzLmFkZHIsZSksY2EobixlKSl9ZnVuY3Rpb24gTWEodCxlKXtjb25zdCBuPXRoaXMuY2FjaGU7c2EobixlKXx8KHQudW5pZm9ybTNpdih0aGlzLmFkZHIsZSksY2EobixlKSl9ZnVuY3Rpb24gU2EodCxlKXtjb25zdCBuPXRoaXMuY2FjaGU7c2EobixlKXx8KHQudW5pZm9ybTRpdih0aGlzLmFkZHIsZSksY2EobixlKSl9ZnVuY3Rpb24gVGEodCxlKXtjb25zdCBuPXRoaXMuY2FjaGU7blswXSE9PWUmJih0LnVuaWZvcm0xdWkodGhpcy5hZGRyLGUpLG5bMF09ZSl9ZnVuY3Rpb24gRWEodCxlKXt0LnVuaWZvcm0xZnYodGhpcy5hZGRyLGUpfWZ1bmN0aW9uIEFhKHQsZSl7dC51bmlmb3JtMWl2KHRoaXMuYWRkcixlKX1mdW5jdGlvbiBMYSh0LGUpe3QudW5pZm9ybTJpdih0aGlzLmFkZHIsZSl9ZnVuY3Rpb24gUmEodCxlKXt0LnVuaWZvcm0zaXYodGhpcy5hZGRyLGUpfWZ1bmN0aW9uIFBhKHQsZSl7dC51bmlmb3JtNGl2KHRoaXMuYWRkcixlKX1mdW5jdGlvbiBDYSh0LGUpe2NvbnN0IG49YWEoZSx0aGlzLnNpemUsMik7dC51bmlmb3JtMmZ2KHRoaXMuYWRkcixuKX1mdW5jdGlvbiBJYSh0LGUpe2NvbnN0IG49YWEoZSx0aGlzLnNpemUsMyk7dC51bmlmb3JtM2Z2KHRoaXMuYWRkcixuKX1mdW5jdGlvbiBPYSh0LGUpe2NvbnN0IG49YWEoZSx0aGlzLnNpemUsNCk7dC51bmlmb3JtNGZ2KHRoaXMuYWRkcixuKX1mdW5jdGlvbiBOYSh0LGUpe2NvbnN0IG49YWEoZSx0aGlzLnNpemUsNCk7dC51bmlmb3JtTWF0cml4MmZ2KHRoaXMuYWRkciwhMSxuKX1mdW5jdGlvbiBEYSh0LGUpe2NvbnN0IG49YWEoZSx0aGlzLnNpemUsOSk7dC51bmlmb3JtTWF0cml4M2Z2KHRoaXMuYWRkciwhMSxuKX1mdW5jdGlvbiBCYSh0LGUpe2NvbnN0IG49YWEoZSx0aGlzLnNpemUsMTYpO3QudW5pZm9ybU1hdHJpeDRmdih0aGlzLmFkZHIsITEsbil9ZnVuY3Rpb24gRmEodCxlLG4pe2NvbnN0IHI9ZS5sZW5ndGgsaT1sYShuLHIpO3QudW5pZm9ybTFpdih0aGlzLmFkZHIsaSk7Zm9yKGxldCB0PTA7dCE9PXI7Kyt0KW4uc2FmZVNldFRleHR1cmUyRChlW3RdfHxLbyxpW3RdKX1mdW5jdGlvbiBVYSh0LGUsbil7Y29uc3Qgcj1lLmxlbmd0aCxpPWxhKG4scik7dC51bmlmb3JtMWl2KHRoaXMuYWRkcixpKTtmb3IobGV0IHQ9MDt0IT09cjsrK3Qpbi5zYWZlU2V0VGV4dHVyZUN1YmUoZVt0XXx8dGEsaVt0XSl9ZnVuY3Rpb24gemEodCxlLG4pe3RoaXMuaWQ9dCx0aGlzLmFkZHI9bix0aGlzLmNhY2hlPVtdLHRoaXMuc2V0VmFsdWU9ZnVuY3Rpb24odCl7c3dpdGNoKHQpe2Nhc2UgNTEyNjpyZXR1cm4gdWE7Y2FzZSAzNTY2NDpyZXR1cm4gaGE7Y2FzZSAzNTY2NTpyZXR1cm4gZGE7Y2FzZSAzNTY2NjpyZXR1cm4gcGE7Y2FzZSAzNTY3NDpyZXR1cm4gZmE7Y2FzZSAzNTY3NTpyZXR1cm4gbWE7Y2FzZSAzNTY3NjpyZXR1cm4gZ2E7Y2FzZSA1MTI0OmNhc2UgMzU2NzA6cmV0dXJuIHdhO2Nhc2UgMzU2Njc6Y2FzZSAzNTY3MTpyZXR1cm4gX2E7Y2FzZSAzNTY2ODpjYXNlIDM1NjcyOnJldHVybiBNYTtjYXNlIDM1NjY5OmNhc2UgMzU2NzM6cmV0dXJuIFNhO2Nhc2UgNTEyNTpyZXR1cm4gVGE7Y2FzZSAzNTY3ODpjYXNlIDM2MTk4OmNhc2UgMzYyOTg6Y2FzZSAzNjMwNjpjYXNlIDM1NjgyOnJldHVybiB2YTtjYXNlIDM1Njc5OmNhc2UgMzYyOTk6Y2FzZSAzNjMwNzpyZXR1cm4geGE7Y2FzZSAzNTY4MDpjYXNlIDM2MzAwOmNhc2UgMzYzMDg6Y2FzZSAzNjI5MzpyZXR1cm4gYmE7Y2FzZSAzNjI4OTpjYXNlIDM2MzAzOmNhc2UgMzYzMTE6Y2FzZSAzNjI5MjpyZXR1cm4geWF9fShlLnR5cGUpfWZ1bmN0aW9uIEdhKHQsZSxuKXt0aGlzLmlkPXQsdGhpcy5hZGRyPW4sdGhpcy5jYWNoZT1bXSx0aGlzLnNpemU9ZS5zaXplLHRoaXMuc2V0VmFsdWU9ZnVuY3Rpb24odCl7c3dpdGNoKHQpe2Nhc2UgNTEyNjpyZXR1cm4gRWE7Y2FzZSAzNTY2NDpyZXR1cm4gQ2E7Y2FzZSAzNTY2NTpyZXR1cm4gSWE7Y2FzZSAzNTY2NjpyZXR1cm4gT2E7Y2FzZSAzNTY3NDpyZXR1cm4gTmE7Y2FzZSAzNTY3NTpyZXR1cm4gRGE7Y2FzZSAzNTY3NjpyZXR1cm4gQmE7Y2FzZSA1MTI0OmNhc2UgMzU2NzA6cmV0dXJuIEFhO2Nhc2UgMzU2Njc6Y2FzZSAzNTY3MTpyZXR1cm4gTGE7Y2FzZSAzNTY2ODpjYXNlIDM1NjcyOnJldHVybiBSYTtjYXNlIDM1NjY5OmNhc2UgMzU2NzM6cmV0dXJuIFBhO2Nhc2UgMzU2Nzg6Y2FzZSAzNjE5ODpjYXNlIDM2Mjk4OmNhc2UgMzYzMDY6Y2FzZSAzNTY4MjpyZXR1cm4gRmE7Y2FzZSAzNTY4MDpjYXNlIDM2MzAwOmNhc2UgMzYzMDg6Y2FzZSAzNjI5MzpyZXR1cm4gVWF9fShlLnR5cGUpfWZ1bmN0aW9uIEhhKHQpe3RoaXMuaWQ9dCx0aGlzLnNlcT1bXSx0aGlzLm1hcD17fX1HYS5wcm90b3R5cGUudXBkYXRlQ2FjaGU9ZnVuY3Rpb24odCl7Y29uc3QgZT10aGlzLmNhY2hlO3QgaW5zdGFuY2VvZiBGbG9hdDMyQXJyYXkmJmUubGVuZ3RoIT09dC5sZW5ndGgmJih0aGlzLmNhY2hlPW5ldyBGbG9hdDMyQXJyYXkodC5sZW5ndGgpKSxjYShlLHQpfSxIYS5wcm90b3R5cGUuc2V0VmFsdWU9ZnVuY3Rpb24odCxlLG4pe2NvbnN0IHI9dGhpcy5zZXE7Zm9yKGxldCBpPTAsbz1yLmxlbmd0aDtpIT09bzsrK2kpe2NvbnN0IG89cltpXTtvLnNldFZhbHVlKHQsZVtvLmlkXSxuKX19O2NvbnN0IGthPS8oW1xcd1xcZF9dKykoXFxdKT8oXFxbfFxcLik/L2c7ZnVuY3Rpb24gVmEodCxlKXt0LnNlcS5wdXNoKGUpLHQubWFwW2UuaWRdPWV9ZnVuY3Rpb24gamEodCxlLG4pe2NvbnN0IHI9dC5uYW1lLGk9ci5sZW5ndGg7Zm9yKGthLmxhc3RJbmRleD0wOzspe2NvbnN0IG89a2EuZXhlYyhyKSxhPWthLmxhc3RJbmRleDtsZXQgcz1vWzFdO2NvbnN0IGM9XCJdXCI9PT1vWzJdLGw9b1szXTtpZihjJiYoc3w9MCksdm9pZCAwPT09bHx8XCJbXCI9PT1sJiZhKzI9PT1pKXtWYShuLHZvaWQgMD09PWw/bmV3IHphKHMsdCxlKTpuZXcgR2Eocyx0LGUpKTticmVha317bGV0IHQ9bi5tYXBbc107dm9pZCAwPT09dCYmKHQ9bmV3IEhhKHMpLFZhKG4sdCkpLG49dH19fWZ1bmN0aW9uIFdhKHQsZSl7dGhpcy5zZXE9W10sdGhpcy5tYXA9e307Y29uc3Qgbj10LmdldFByb2dyYW1QYXJhbWV0ZXIoZSwzNTcxOCk7Zm9yKGxldCByPTA7cjxuOysrcil7Y29uc3Qgbj10LmdldEFjdGl2ZVVuaWZvcm0oZSxyKTtqYShuLHQuZ2V0VW5pZm9ybUxvY2F0aW9uKGUsbi5uYW1lKSx0aGlzKX19ZnVuY3Rpb24gWGEodCxlLG4pe2NvbnN0IHI9dC5jcmVhdGVTaGFkZXIoZSk7cmV0dXJuIHQuc2hhZGVyU291cmNlKHIsbiksdC5jb21waWxlU2hhZGVyKHIpLHJ9V2EucHJvdG90eXBlLnNldFZhbHVlPWZ1bmN0aW9uKHQsZSxuLHIpe2NvbnN0IGk9dGhpcy5tYXBbZV07dm9pZCAwIT09aSYmaS5zZXRWYWx1ZSh0LG4scil9LFdhLnByb3RvdHlwZS5zZXRPcHRpb25hbD1mdW5jdGlvbih0LGUsbil7Y29uc3Qgcj1lW25dO3ZvaWQgMCE9PXImJnRoaXMuc2V0VmFsdWUodCxuLHIpfSxXYS51cGxvYWQ9ZnVuY3Rpb24odCxlLG4scil7Zm9yKGxldCBpPTAsbz1lLmxlbmd0aDtpIT09bzsrK2kpe2NvbnN0IG89ZVtpXSxhPW5bby5pZF07ITEhPT1hLm5lZWRzVXBkYXRlJiZvLnNldFZhbHVlKHQsYS52YWx1ZSxyKX19LFdhLnNlcVdpdGhWYWx1ZT1mdW5jdGlvbih0LGUpe2NvbnN0IG49W107Zm9yKGxldCByPTAsaT10Lmxlbmd0aDtyIT09aTsrK3Ipe2NvbnN0IGk9dFtyXTtpLmlkIGluIGUmJm4ucHVzaChpKX1yZXR1cm4gbn07bGV0IHFhPTA7ZnVuY3Rpb24gWWEodCl7c3dpdGNoKHQpe2Nhc2UgSmU6cmV0dXJuW1wiTGluZWFyXCIsXCIoIHZhbHVlIClcIl07Y2FzZSBLZTpyZXR1cm5bXCJzUkdCXCIsXCIoIHZhbHVlIClcIl07Y2FzZSAkZTpyZXR1cm5bXCJSR0JFXCIsXCIoIHZhbHVlIClcIl07Y2FzZSBlbjpyZXR1cm5bXCJSR0JNXCIsXCIoIHZhbHVlLCA3LjAgKVwiXTtjYXNlIG5uOnJldHVybltcIlJHQk1cIixcIiggdmFsdWUsIDE2LjAgKVwiXTtjYXNlIHJuOnJldHVybltcIlJHQkRcIixcIiggdmFsdWUsIDI1Ni4wIClcIl07Y2FzZSBRZTpyZXR1cm5bXCJHYW1tYVwiLFwiKCB2YWx1ZSwgZmxvYXQoIEdBTU1BX0ZBQ1RPUiApIClcIl07Y2FzZSB0bjpyZXR1cm5bXCJMb2dMdXZcIixcIiggdmFsdWUgKVwiXTtkZWZhdWx0OnJldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFByb2dyYW06IFVuc3VwcG9ydGVkIGVuY29kaW5nOlwiLHQpLFtcIkxpbmVhclwiLFwiKCB2YWx1ZSApXCJdfX1mdW5jdGlvbiBaYSh0LGUsbil7Y29uc3Qgcj10LmdldFNoYWRlclBhcmFtZXRlcihlLDM1NzEzKSxpPXQuZ2V0U2hhZGVySW5mb0xvZyhlKS50cmltKCk7aWYociYmXCJcIj09PWkpcmV0dXJuXCJcIjtyZXR1cm5cIlRIUkVFLldlYkdMU2hhZGVyOiBnbC5nZXRTaGFkZXJJbmZvTG9nKCkgXCIrbitcIlxcblwiK2krZnVuY3Rpb24odCl7Y29uc3QgZT10LnNwbGl0KFwiXFxuXCIpO2ZvcihsZXQgdD0wO3Q8ZS5sZW5ndGg7dCsrKWVbdF09dCsxK1wiOiBcIitlW3RdO3JldHVybiBlLmpvaW4oXCJcXG5cIil9KHQuZ2V0U2hhZGVyU291cmNlKGUpKX1mdW5jdGlvbiBKYSh0LGUpe2NvbnN0IG49WWEoZSk7cmV0dXJuXCJ2ZWM0IFwiK3QrXCIoIHZlYzQgdmFsdWUgKSB7IHJldHVybiBcIituWzBdK1wiVG9MaW5lYXJcIituWzFdK1wiOyB9XCJ9ZnVuY3Rpb24gS2EodCxlKXtjb25zdCBuPVlhKGUpO3JldHVyblwidmVjNCBcIit0K1wiKCB2ZWM0IHZhbHVlICkgeyByZXR1cm4gTGluZWFyVG9cIituWzBdK25bMV0rXCI7IH1cIn1mdW5jdGlvbiBRYSh0LGUpe2xldCBuO3N3aXRjaChlKXtjYXNlICQ6bj1cIkxpbmVhclwiO2JyZWFrO2Nhc2UgdHQ6bj1cIlJlaW5oYXJkXCI7YnJlYWs7Y2FzZSBldDpuPVwiT3B0aW1pemVkQ2luZW9uXCI7YnJlYWs7Y2FzZSBudDpuPVwiQUNFU0ZpbG1pY1wiO2JyZWFrO2Nhc2UgcnQ6bj1cIkN1c3RvbVwiO2JyZWFrO2RlZmF1bHQ6Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xQcm9ncmFtOiBVbnN1cHBvcnRlZCB0b25lTWFwcGluZzpcIixlKSxuPVwiTGluZWFyXCJ9cmV0dXJuXCJ2ZWMzIFwiK3QrXCIoIHZlYzMgY29sb3IgKSB7IHJldHVybiBcIituK1wiVG9uZU1hcHBpbmcoIGNvbG9yICk7IH1cIn1mdW5jdGlvbiAkYSh0KXtyZXR1cm5cIlwiIT09dH1mdW5jdGlvbiB0cyh0LGUpe3JldHVybiB0LnJlcGxhY2UoL05VTV9ESVJfTElHSFRTL2csZS5udW1EaXJMaWdodHMpLnJlcGxhY2UoL05VTV9TUE9UX0xJR0hUUy9nLGUubnVtU3BvdExpZ2h0cykucmVwbGFjZSgvTlVNX1JFQ1RfQVJFQV9MSUdIVFMvZyxlLm51bVJlY3RBcmVhTGlnaHRzKS5yZXBsYWNlKC9OVU1fUE9JTlRfTElHSFRTL2csZS5udW1Qb2ludExpZ2h0cykucmVwbGFjZSgvTlVNX0hFTUlfTElHSFRTL2csZS5udW1IZW1pTGlnaHRzKS5yZXBsYWNlKC9OVU1fRElSX0xJR0hUX1NIQURPV1MvZyxlLm51bURpckxpZ2h0U2hhZG93cykucmVwbGFjZSgvTlVNX1NQT1RfTElHSFRfU0hBRE9XUy9nLGUubnVtU3BvdExpZ2h0U2hhZG93cykucmVwbGFjZSgvTlVNX1BPSU5UX0xJR0hUX1NIQURPV1MvZyxlLm51bVBvaW50TGlnaHRTaGFkb3dzKX1mdW5jdGlvbiBlcyh0LGUpe3JldHVybiB0LnJlcGxhY2UoL05VTV9DTElQUElOR19QTEFORVMvZyxlLm51bUNsaXBwaW5nUGxhbmVzKS5yZXBsYWNlKC9VTklPTl9DTElQUElOR19QTEFORVMvZyxlLm51bUNsaXBwaW5nUGxhbmVzLWUubnVtQ2xpcEludGVyc2VjdGlvbil9Y29uc3QgbnM9L15bIFxcdF0qI2luY2x1ZGUgKzwoW1xcd1xcZC4vXSspPi9nbTtmdW5jdGlvbiBycyh0KXtyZXR1cm4gdC5yZXBsYWNlKG5zLGlzKX1mdW5jdGlvbiBpcyh0LGUpe2NvbnN0IG49SW9bZV07aWYodm9pZCAwPT09bil0aHJvdyBuZXcgRXJyb3IoXCJDYW4gbm90IHJlc29sdmUgI2luY2x1ZGUgPFwiK2UrXCI+XCIpO3JldHVybiBycyhuKX1jb25zdCBvcz0vI3ByYWdtYSB1bnJvbGxfbG9vcFtcXHNdKz9mb3IgXFwoIGludCBpIFxcPSAoXFxkKylcXDsgaSA8IChcXGQrKVxcOyBpIFxcK1xcKyBcXCkgXFx7KFtcXHNcXFNdKz8pKD89XFx9KVxcfS9nLGFzPS8jcHJhZ21hIHVucm9sbF9sb29wX3N0YXJ0XFxzK2ZvclxccypcXChcXHMqaW50XFxzK2lcXHMqPVxccyooXFxkKylcXHMqO1xccyppXFxzKjxcXHMqKFxcZCspXFxzKjtcXHMqaVxccypcXCtcXCtcXHMqXFwpXFxzKnsoW1xcc1xcU10rPyl9XFxzKyNwcmFnbWEgdW5yb2xsX2xvb3BfZW5kL2c7ZnVuY3Rpb24gc3ModCl7cmV0dXJuIHQucmVwbGFjZShhcyxscykucmVwbGFjZShvcyxjcyl9ZnVuY3Rpb24gY3ModCxlLG4scil7cmV0dXJuIGNvbnNvbGUud2FybihcIldlYkdMUHJvZ3JhbTogI3ByYWdtYSB1bnJvbGxfbG9vcCBzaGFkZXIgc3ludGF4IGlzIGRlcHJlY2F0ZWQuIFBsZWFzZSB1c2UgI3ByYWdtYSB1bnJvbGxfbG9vcF9zdGFydCBzeW50YXggaW5zdGVhZC5cIiksbHModCxlLG4scil9ZnVuY3Rpb24gbHModCxlLG4scil7bGV0IGk9XCJcIjtmb3IobGV0IHQ9cGFyc2VJbnQoZSk7dDxwYXJzZUludChuKTt0KyspaSs9ci5yZXBsYWNlKC9cXFtcXHMqaVxccypcXF0vZyxcIlsgXCIrdCtcIiBdXCIpLnJlcGxhY2UoL1VOUk9MTEVEX0xPT1BfSU5ERVgvZyx0KTtyZXR1cm4gaX1mdW5jdGlvbiB1cyh0KXtsZXQgZT1cInByZWNpc2lvbiBcIit0LnByZWNpc2lvbitcIiBmbG9hdDtcXG5wcmVjaXNpb24gXCIrdC5wcmVjaXNpb24rXCIgaW50O1wiO3JldHVyblwiaGlnaHBcIj09PXQucHJlY2lzaW9uP2UrPVwiXFxuI2RlZmluZSBISUdIX1BSRUNJU0lPTlwiOlwibWVkaXVtcFwiPT09dC5wcmVjaXNpb24/ZSs9XCJcXG4jZGVmaW5lIE1FRElVTV9QUkVDSVNJT05cIjpcImxvd3BcIj09PXQucHJlY2lzaW9uJiYoZSs9XCJcXG4jZGVmaW5lIExPV19QUkVDSVNJT05cIiksZX1mdW5jdGlvbiBocyh0LGUsbixyKXtjb25zdCBpPXQuZ2V0Q29udGV4dCgpLG89bi5kZWZpbmVzO2xldCBhPW4udmVydGV4U2hhZGVyLHM9bi5mcmFnbWVudFNoYWRlcjtjb25zdCBjPWZ1bmN0aW9uKHQpe2xldCBlPVwiU0hBRE9XTUFQX1RZUEVfQkFTSUNcIjtyZXR1cm4gdC5zaGFkb3dNYXBUeXBlPT09aD9lPVwiU0hBRE9XTUFQX1RZUEVfUENGXCI6dC5zaGFkb3dNYXBUeXBlPT09ZD9lPVwiU0hBRE9XTUFQX1RZUEVfUENGX1NPRlRcIjp0LnNoYWRvd01hcFR5cGU9PT1wJiYoZT1cIlNIQURPV01BUF9UWVBFX1ZTTVwiKSxlfShuKSxsPWZ1bmN0aW9uKHQpe2xldCBlPVwiRU5WTUFQX1RZUEVfQ1VCRVwiO2lmKHQuZW52TWFwKXN3aXRjaCh0LmVudk1hcE1vZGUpe2Nhc2Ugb3Q6Y2FzZSBhdDplPVwiRU5WTUFQX1RZUEVfQ1VCRVwiO2JyZWFrO2Nhc2UgbHQ6Y2FzZSB1dDplPVwiRU5WTUFQX1RZUEVfQ1VCRV9VVlwifXJldHVybiBlfShuKSx1PWZ1bmN0aW9uKHQpe2xldCBlPVwiRU5WTUFQX01PREVfUkVGTEVDVElPTlwiO2lmKHQuZW52TWFwKXN3aXRjaCh0LmVudk1hcE1vZGUpe2Nhc2UgYXQ6Y2FzZSB1dDplPVwiRU5WTUFQX01PREVfUkVGUkFDVElPTlwifXJldHVybiBlfShuKSxmPWZ1bmN0aW9uKHQpe2xldCBlPVwiRU5WTUFQX0JMRU5ESU5HX05PTkVcIjtpZih0LmVudk1hcClzd2l0Y2godC5jb21iaW5lKXtjYXNlIFo6ZT1cIkVOVk1BUF9CTEVORElOR19NVUxUSVBMWVwiO2JyZWFrO2Nhc2UgSjplPVwiRU5WTUFQX0JMRU5ESU5HX01JWFwiO2JyZWFrO2Nhc2UgSzplPVwiRU5WTUFQX0JMRU5ESU5HX0FERFwifXJldHVybiBlfShuKSxtPXQuZ2FtbWFGYWN0b3I+MD90LmdhbW1hRmFjdG9yOjEsZz1uLmlzV2ViR0wyP1wiXCI6ZnVuY3Rpb24odCl7cmV0dXJuW3QuZXh0ZW5zaW9uRGVyaXZhdGl2ZXN8fHQuZW52TWFwQ3ViZVVWfHx0LmJ1bXBNYXB8fHQudGFuZ2VudFNwYWNlTm9ybWFsTWFwfHx0LmNsZWFyY29hdE5vcm1hbE1hcHx8dC5mbGF0U2hhZGluZ3x8XCJwaHlzaWNhbFwiPT09dC5zaGFkZXJJRD9cIiNleHRlbnNpb24gR0xfT0VTX3N0YW5kYXJkX2Rlcml2YXRpdmVzIDogZW5hYmxlXCI6XCJcIiwodC5leHRlbnNpb25GcmFnRGVwdGh8fHQubG9nYXJpdGhtaWNEZXB0aEJ1ZmZlcikmJnQucmVuZGVyZXJFeHRlbnNpb25GcmFnRGVwdGg/XCIjZXh0ZW5zaW9uIEdMX0VYVF9mcmFnX2RlcHRoIDogZW5hYmxlXCI6XCJcIix0LmV4dGVuc2lvbkRyYXdCdWZmZXJzJiZ0LnJlbmRlcmVyRXh0ZW5zaW9uRHJhd0J1ZmZlcnM/XCIjZXh0ZW5zaW9uIEdMX0VYVF9kcmF3X2J1ZmZlcnMgOiByZXF1aXJlXCI6XCJcIiwodC5leHRlbnNpb25TaGFkZXJUZXh0dXJlTE9EfHx0LmVudk1hcCkmJnQucmVuZGVyZXJFeHRlbnNpb25TaGFkZXJUZXh0dXJlTG9kP1wiI2V4dGVuc2lvbiBHTF9FWFRfc2hhZGVyX3RleHR1cmVfbG9kIDogZW5hYmxlXCI6XCJcIl0uZmlsdGVyKCRhKS5qb2luKFwiXFxuXCIpfShuKSx2PWZ1bmN0aW9uKHQpe2NvbnN0IGU9W107Zm9yKGNvbnN0IG4gaW4gdCl7Y29uc3Qgcj10W25dOyExIT09ciYmZS5wdXNoKFwiI2RlZmluZSBcIituK1wiIFwiK3IpfXJldHVybiBlLmpvaW4oXCJcXG5cIil9KG8pLHk9aS5jcmVhdGVQcm9ncmFtKCk7bGV0IHgsYix3PW4uZ2xzbFZlcnNpb24/XCIjdmVyc2lvbiBcIituLmdsc2xWZXJzaW9uK1wiXFxuXCI6XCJcIjtuLmlzUmF3U2hhZGVyTWF0ZXJpYWw/KHg9W3ZdLmZpbHRlcigkYSkuam9pbihcIlxcblwiKSx4Lmxlbmd0aD4wJiYoeCs9XCJcXG5cIiksYj1bZyx2XS5maWx0ZXIoJGEpLmpvaW4oXCJcXG5cIiksYi5sZW5ndGg+MCYmKGIrPVwiXFxuXCIpKTooeD1bdXMobiksXCIjZGVmaW5lIFNIQURFUl9OQU1FIFwiK24uc2hhZGVyTmFtZSx2LG4uaW5zdGFuY2luZz9cIiNkZWZpbmUgVVNFX0lOU1RBTkNJTkdcIjpcIlwiLG4uaW5zdGFuY2luZ0NvbG9yP1wiI2RlZmluZSBVU0VfSU5TVEFOQ0lOR19DT0xPUlwiOlwiXCIsbi5zdXBwb3J0c1ZlcnRleFRleHR1cmVzP1wiI2RlZmluZSBWRVJURVhfVEVYVFVSRVNcIjpcIlwiLFwiI2RlZmluZSBHQU1NQV9GQUNUT1IgXCIrbSxcIiNkZWZpbmUgTUFYX0JPTkVTIFwiK24ubWF4Qm9uZXMsbi51c2VGb2cmJm4uZm9nP1wiI2RlZmluZSBVU0VfRk9HXCI6XCJcIixuLnVzZUZvZyYmbi5mb2dFeHAyP1wiI2RlZmluZSBGT0dfRVhQMlwiOlwiXCIsbi5tYXA/XCIjZGVmaW5lIFVTRV9NQVBcIjpcIlwiLG4uZW52TWFwP1wiI2RlZmluZSBVU0VfRU5WTUFQXCI6XCJcIixuLmVudk1hcD9cIiNkZWZpbmUgXCIrdTpcIlwiLG4ubGlnaHRNYXA/XCIjZGVmaW5lIFVTRV9MSUdIVE1BUFwiOlwiXCIsbi5hb01hcD9cIiNkZWZpbmUgVVNFX0FPTUFQXCI6XCJcIixuLmVtaXNzaXZlTWFwP1wiI2RlZmluZSBVU0VfRU1JU1NJVkVNQVBcIjpcIlwiLG4uYnVtcE1hcD9cIiNkZWZpbmUgVVNFX0JVTVBNQVBcIjpcIlwiLG4ubm9ybWFsTWFwP1wiI2RlZmluZSBVU0VfTk9STUFMTUFQXCI6XCJcIixuLm5vcm1hbE1hcCYmbi5vYmplY3RTcGFjZU5vcm1hbE1hcD9cIiNkZWZpbmUgT0JKRUNUU1BBQ0VfTk9STUFMTUFQXCI6XCJcIixuLm5vcm1hbE1hcCYmbi50YW5nZW50U3BhY2VOb3JtYWxNYXA/XCIjZGVmaW5lIFRBTkdFTlRTUEFDRV9OT1JNQUxNQVBcIjpcIlwiLG4uY2xlYXJjb2F0TWFwP1wiI2RlZmluZSBVU0VfQ0xFQVJDT0FUTUFQXCI6XCJcIixuLmNsZWFyY29hdFJvdWdobmVzc01hcD9cIiNkZWZpbmUgVVNFX0NMRUFSQ09BVF9ST1VHSE5FU1NNQVBcIjpcIlwiLG4uY2xlYXJjb2F0Tm9ybWFsTWFwP1wiI2RlZmluZSBVU0VfQ0xFQVJDT0FUX05PUk1BTE1BUFwiOlwiXCIsbi5kaXNwbGFjZW1lbnRNYXAmJm4uc3VwcG9ydHNWZXJ0ZXhUZXh0dXJlcz9cIiNkZWZpbmUgVVNFX0RJU1BMQUNFTUVOVE1BUFwiOlwiXCIsbi5zcGVjdWxhck1hcD9cIiNkZWZpbmUgVVNFX1NQRUNVTEFSTUFQXCI6XCJcIixuLnJvdWdobmVzc01hcD9cIiNkZWZpbmUgVVNFX1JPVUdITkVTU01BUFwiOlwiXCIsbi5tZXRhbG5lc3NNYXA/XCIjZGVmaW5lIFVTRV9NRVRBTE5FU1NNQVBcIjpcIlwiLG4uYWxwaGFNYXA/XCIjZGVmaW5lIFVTRV9BTFBIQU1BUFwiOlwiXCIsbi50cmFuc21pc3Npb25NYXA/XCIjZGVmaW5lIFVTRV9UUkFOU01JU1NJT05NQVBcIjpcIlwiLG4udmVydGV4VGFuZ2VudHM/XCIjZGVmaW5lIFVTRV9UQU5HRU5UXCI6XCJcIixuLnZlcnRleENvbG9ycz9cIiNkZWZpbmUgVVNFX0NPTE9SXCI6XCJcIixuLnZlcnRleFV2cz9cIiNkZWZpbmUgVVNFX1VWXCI6XCJcIixuLnV2c1ZlcnRleE9ubHk/XCIjZGVmaW5lIFVWU19WRVJURVhfT05MWVwiOlwiXCIsbi5mbGF0U2hhZGluZz9cIiNkZWZpbmUgRkxBVF9TSEFERURcIjpcIlwiLG4uc2tpbm5pbmc/XCIjZGVmaW5lIFVTRV9TS0lOTklOR1wiOlwiXCIsbi51c2VWZXJ0ZXhUZXh0dXJlP1wiI2RlZmluZSBCT05FX1RFWFRVUkVcIjpcIlwiLG4ubW9ycGhUYXJnZXRzP1wiI2RlZmluZSBVU0VfTU9SUEhUQVJHRVRTXCI6XCJcIixuLm1vcnBoTm9ybWFscyYmITE9PT1uLmZsYXRTaGFkaW5nP1wiI2RlZmluZSBVU0VfTU9SUEhOT1JNQUxTXCI6XCJcIixuLmRvdWJsZVNpZGVkP1wiI2RlZmluZSBET1VCTEVfU0lERURcIjpcIlwiLG4uZmxpcFNpZGVkP1wiI2RlZmluZSBGTElQX1NJREVEXCI6XCJcIixuLnNoYWRvd01hcEVuYWJsZWQ/XCIjZGVmaW5lIFVTRV9TSEFET1dNQVBcIjpcIlwiLG4uc2hhZG93TWFwRW5hYmxlZD9cIiNkZWZpbmUgXCIrYzpcIlwiLG4uc2l6ZUF0dGVudWF0aW9uP1wiI2RlZmluZSBVU0VfU0laRUFUVEVOVUFUSU9OXCI6XCJcIixuLmxvZ2FyaXRobWljRGVwdGhCdWZmZXI/XCIjZGVmaW5lIFVTRV9MT0dERVBUSEJVRlwiOlwiXCIsbi5sb2dhcml0aG1pY0RlcHRoQnVmZmVyJiZuLnJlbmRlcmVyRXh0ZW5zaW9uRnJhZ0RlcHRoP1wiI2RlZmluZSBVU0VfTE9HREVQVEhCVUZfRVhUXCI6XCJcIixcInVuaWZvcm0gbWF0NCBtb2RlbE1hdHJpeDtcIixcInVuaWZvcm0gbWF0NCBtb2RlbFZpZXdNYXRyaXg7XCIsXCJ1bmlmb3JtIG1hdDQgcHJvamVjdGlvbk1hdHJpeDtcIixcInVuaWZvcm0gbWF0NCB2aWV3TWF0cml4O1wiLFwidW5pZm9ybSBtYXQzIG5vcm1hbE1hdHJpeDtcIixcInVuaWZvcm0gdmVjMyBjYW1lcmFQb3NpdGlvbjtcIixcInVuaWZvcm0gYm9vbCBpc09ydGhvZ3JhcGhpYztcIixcIiNpZmRlZiBVU0VfSU5TVEFOQ0lOR1wiLFwiXFx0YXR0cmlidXRlIG1hdDQgaW5zdGFuY2VNYXRyaXg7XCIsXCIjZW5kaWZcIixcIiNpZmRlZiBVU0VfSU5TVEFOQ0lOR19DT0xPUlwiLFwiXFx0YXR0cmlidXRlIHZlYzMgaW5zdGFuY2VDb2xvcjtcIixcIiNlbmRpZlwiLFwiYXR0cmlidXRlIHZlYzMgcG9zaXRpb247XCIsXCJhdHRyaWJ1dGUgdmVjMyBub3JtYWw7XCIsXCJhdHRyaWJ1dGUgdmVjMiB1djtcIixcIiNpZmRlZiBVU0VfVEFOR0VOVFwiLFwiXFx0YXR0cmlidXRlIHZlYzQgdGFuZ2VudDtcIixcIiNlbmRpZlwiLFwiI2lmZGVmIFVTRV9DT0xPUlwiLFwiXFx0YXR0cmlidXRlIHZlYzMgY29sb3I7XCIsXCIjZW5kaWZcIixcIiNpZmRlZiBVU0VfTU9SUEhUQVJHRVRTXCIsXCJcXHRhdHRyaWJ1dGUgdmVjMyBtb3JwaFRhcmdldDA7XCIsXCJcXHRhdHRyaWJ1dGUgdmVjMyBtb3JwaFRhcmdldDE7XCIsXCJcXHRhdHRyaWJ1dGUgdmVjMyBtb3JwaFRhcmdldDI7XCIsXCJcXHRhdHRyaWJ1dGUgdmVjMyBtb3JwaFRhcmdldDM7XCIsXCJcXHQjaWZkZWYgVVNFX01PUlBITk9STUFMU1wiLFwiXFx0XFx0YXR0cmlidXRlIHZlYzMgbW9ycGhOb3JtYWwwO1wiLFwiXFx0XFx0YXR0cmlidXRlIHZlYzMgbW9ycGhOb3JtYWwxO1wiLFwiXFx0XFx0YXR0cmlidXRlIHZlYzMgbW9ycGhOb3JtYWwyO1wiLFwiXFx0XFx0YXR0cmlidXRlIHZlYzMgbW9ycGhOb3JtYWwzO1wiLFwiXFx0I2Vsc2VcIixcIlxcdFxcdGF0dHJpYnV0ZSB2ZWMzIG1vcnBoVGFyZ2V0NDtcIixcIlxcdFxcdGF0dHJpYnV0ZSB2ZWMzIG1vcnBoVGFyZ2V0NTtcIixcIlxcdFxcdGF0dHJpYnV0ZSB2ZWMzIG1vcnBoVGFyZ2V0NjtcIixcIlxcdFxcdGF0dHJpYnV0ZSB2ZWMzIG1vcnBoVGFyZ2V0NztcIixcIlxcdCNlbmRpZlwiLFwiI2VuZGlmXCIsXCIjaWZkZWYgVVNFX1NLSU5OSU5HXCIsXCJcXHRhdHRyaWJ1dGUgdmVjNCBza2luSW5kZXg7XCIsXCJcXHRhdHRyaWJ1dGUgdmVjNCBza2luV2VpZ2h0O1wiLFwiI2VuZGlmXCIsXCJcXG5cIl0uZmlsdGVyKCRhKS5qb2luKFwiXFxuXCIpLGI9W2csdXMobiksXCIjZGVmaW5lIFNIQURFUl9OQU1FIFwiK24uc2hhZGVyTmFtZSx2LG4uYWxwaGFUZXN0P1wiI2RlZmluZSBBTFBIQVRFU1QgXCIrbi5hbHBoYVRlc3QrKG4uYWxwaGFUZXN0JTE/XCJcIjpcIi4wXCIpOlwiXCIsXCIjZGVmaW5lIEdBTU1BX0ZBQ1RPUiBcIittLG4udXNlRm9nJiZuLmZvZz9cIiNkZWZpbmUgVVNFX0ZPR1wiOlwiXCIsbi51c2VGb2cmJm4uZm9nRXhwMj9cIiNkZWZpbmUgRk9HX0VYUDJcIjpcIlwiLG4ubWFwP1wiI2RlZmluZSBVU0VfTUFQXCI6XCJcIixuLm1hdGNhcD9cIiNkZWZpbmUgVVNFX01BVENBUFwiOlwiXCIsbi5lbnZNYXA/XCIjZGVmaW5lIFVTRV9FTlZNQVBcIjpcIlwiLG4uZW52TWFwP1wiI2RlZmluZSBcIitsOlwiXCIsbi5lbnZNYXA/XCIjZGVmaW5lIFwiK3U6XCJcIixuLmVudk1hcD9cIiNkZWZpbmUgXCIrZjpcIlwiLG4ubGlnaHRNYXA/XCIjZGVmaW5lIFVTRV9MSUdIVE1BUFwiOlwiXCIsbi5hb01hcD9cIiNkZWZpbmUgVVNFX0FPTUFQXCI6XCJcIixuLmVtaXNzaXZlTWFwP1wiI2RlZmluZSBVU0VfRU1JU1NJVkVNQVBcIjpcIlwiLG4uYnVtcE1hcD9cIiNkZWZpbmUgVVNFX0JVTVBNQVBcIjpcIlwiLG4ubm9ybWFsTWFwP1wiI2RlZmluZSBVU0VfTk9STUFMTUFQXCI6XCJcIixuLm5vcm1hbE1hcCYmbi5vYmplY3RTcGFjZU5vcm1hbE1hcD9cIiNkZWZpbmUgT0JKRUNUU1BBQ0VfTk9STUFMTUFQXCI6XCJcIixuLm5vcm1hbE1hcCYmbi50YW5nZW50U3BhY2VOb3JtYWxNYXA/XCIjZGVmaW5lIFRBTkdFTlRTUEFDRV9OT1JNQUxNQVBcIjpcIlwiLG4uY2xlYXJjb2F0TWFwP1wiI2RlZmluZSBVU0VfQ0xFQVJDT0FUTUFQXCI6XCJcIixuLmNsZWFyY29hdFJvdWdobmVzc01hcD9cIiNkZWZpbmUgVVNFX0NMRUFSQ09BVF9ST1VHSE5FU1NNQVBcIjpcIlwiLG4uY2xlYXJjb2F0Tm9ybWFsTWFwP1wiI2RlZmluZSBVU0VfQ0xFQVJDT0FUX05PUk1BTE1BUFwiOlwiXCIsbi5zcGVjdWxhck1hcD9cIiNkZWZpbmUgVVNFX1NQRUNVTEFSTUFQXCI6XCJcIixuLnJvdWdobmVzc01hcD9cIiNkZWZpbmUgVVNFX1JPVUdITkVTU01BUFwiOlwiXCIsbi5tZXRhbG5lc3NNYXA/XCIjZGVmaW5lIFVTRV9NRVRBTE5FU1NNQVBcIjpcIlwiLG4uYWxwaGFNYXA/XCIjZGVmaW5lIFVTRV9BTFBIQU1BUFwiOlwiXCIsbi5zaGVlbj9cIiNkZWZpbmUgVVNFX1NIRUVOXCI6XCJcIixuLnRyYW5zbWlzc2lvbk1hcD9cIiNkZWZpbmUgVVNFX1RSQU5TTUlTU0lPTk1BUFwiOlwiXCIsbi52ZXJ0ZXhUYW5nZW50cz9cIiNkZWZpbmUgVVNFX1RBTkdFTlRcIjpcIlwiLG4udmVydGV4Q29sb3JzfHxuLmluc3RhbmNpbmdDb2xvcj9cIiNkZWZpbmUgVVNFX0NPTE9SXCI6XCJcIixuLnZlcnRleFV2cz9cIiNkZWZpbmUgVVNFX1VWXCI6XCJcIixuLnV2c1ZlcnRleE9ubHk/XCIjZGVmaW5lIFVWU19WRVJURVhfT05MWVwiOlwiXCIsbi5ncmFkaWVudE1hcD9cIiNkZWZpbmUgVVNFX0dSQURJRU5UTUFQXCI6XCJcIixuLmZsYXRTaGFkaW5nP1wiI2RlZmluZSBGTEFUX1NIQURFRFwiOlwiXCIsbi5kb3VibGVTaWRlZD9cIiNkZWZpbmUgRE9VQkxFX1NJREVEXCI6XCJcIixuLmZsaXBTaWRlZD9cIiNkZWZpbmUgRkxJUF9TSURFRFwiOlwiXCIsbi5zaGFkb3dNYXBFbmFibGVkP1wiI2RlZmluZSBVU0VfU0hBRE9XTUFQXCI6XCJcIixuLnNoYWRvd01hcEVuYWJsZWQ/XCIjZGVmaW5lIFwiK2M6XCJcIixuLnByZW11bHRpcGxpZWRBbHBoYT9cIiNkZWZpbmUgUFJFTVVMVElQTElFRF9BTFBIQVwiOlwiXCIsbi5waHlzaWNhbGx5Q29ycmVjdExpZ2h0cz9cIiNkZWZpbmUgUEhZU0lDQUxMWV9DT1JSRUNUX0xJR0hUU1wiOlwiXCIsbi5sb2dhcml0aG1pY0RlcHRoQnVmZmVyP1wiI2RlZmluZSBVU0VfTE9HREVQVEhCVUZcIjpcIlwiLG4ubG9nYXJpdGhtaWNEZXB0aEJ1ZmZlciYmbi5yZW5kZXJlckV4dGVuc2lvbkZyYWdEZXB0aD9cIiNkZWZpbmUgVVNFX0xPR0RFUFRIQlVGX0VYVFwiOlwiXCIsKG4uZXh0ZW5zaW9uU2hhZGVyVGV4dHVyZUxPRHx8bi5lbnZNYXApJiZuLnJlbmRlcmVyRXh0ZW5zaW9uU2hhZGVyVGV4dHVyZUxvZD9cIiNkZWZpbmUgVEVYVFVSRV9MT0RfRVhUXCI6XCJcIixcInVuaWZvcm0gbWF0NCB2aWV3TWF0cml4O1wiLFwidW5pZm9ybSB2ZWMzIGNhbWVyYVBvc2l0aW9uO1wiLFwidW5pZm9ybSBib29sIGlzT3J0aG9ncmFwaGljO1wiLG4udG9uZU1hcHBpbmchPT1RP1wiI2RlZmluZSBUT05FX01BUFBJTkdcIjpcIlwiLG4udG9uZU1hcHBpbmchPT1RP0lvLnRvbmVtYXBwaW5nX3BhcnNfZnJhZ21lbnQ6XCJcIixuLnRvbmVNYXBwaW5nIT09UT9RYShcInRvbmVNYXBwaW5nXCIsbi50b25lTWFwcGluZyk6XCJcIixuLmRpdGhlcmluZz9cIiNkZWZpbmUgRElUSEVSSU5HXCI6XCJcIixJby5lbmNvZGluZ3NfcGFyc19mcmFnbWVudCxuLm1hcD9KYShcIm1hcFRleGVsVG9MaW5lYXJcIixuLm1hcEVuY29kaW5nKTpcIlwiLG4ubWF0Y2FwP0phKFwibWF0Y2FwVGV4ZWxUb0xpbmVhclwiLG4ubWF0Y2FwRW5jb2RpbmcpOlwiXCIsbi5lbnZNYXA/SmEoXCJlbnZNYXBUZXhlbFRvTGluZWFyXCIsbi5lbnZNYXBFbmNvZGluZyk6XCJcIixuLmVtaXNzaXZlTWFwP0phKFwiZW1pc3NpdmVNYXBUZXhlbFRvTGluZWFyXCIsbi5lbWlzc2l2ZU1hcEVuY29kaW5nKTpcIlwiLG4ubGlnaHRNYXA/SmEoXCJsaWdodE1hcFRleGVsVG9MaW5lYXJcIixuLmxpZ2h0TWFwRW5jb2RpbmcpOlwiXCIsS2EoXCJsaW5lYXJUb091dHB1dFRleGVsXCIsbi5vdXRwdXRFbmNvZGluZyksbi5kZXB0aFBhY2tpbmc/XCIjZGVmaW5lIERFUFRIX1BBQ0tJTkcgXCIrbi5kZXB0aFBhY2tpbmc6XCJcIixcIlxcblwiXS5maWx0ZXIoJGEpLmpvaW4oXCJcXG5cIikpLGE9cnMoYSksYT10cyhhLG4pLGE9ZXMoYSxuKSxzPXJzKHMpLHM9dHMocyxuKSxzPWVzKHMsbiksYT1zcyhhKSxzPXNzKHMpLG4uaXNXZWJHTDImJiEwIT09bi5pc1Jhd1NoYWRlck1hdGVyaWFsJiYodz1cIiN2ZXJzaW9uIDMwMCBlc1xcblwiLHg9W1wiI2RlZmluZSBhdHRyaWJ1dGUgaW5cIixcIiNkZWZpbmUgdmFyeWluZyBvdXRcIixcIiNkZWZpbmUgdGV4dHVyZTJEIHRleHR1cmVcIl0uam9pbihcIlxcblwiKStcIlxcblwiK3gsYj1bXCIjZGVmaW5lIHZhcnlpbmcgaW5cIixuLmdsc2xWZXJzaW9uPT09RG4/XCJcIjpcIm91dCBoaWdocCB2ZWM0IHBjX2ZyYWdDb2xvcjtcIixuLmdsc2xWZXJzaW9uPT09RG4/XCJcIjpcIiNkZWZpbmUgZ2xfRnJhZ0NvbG9yIHBjX2ZyYWdDb2xvclwiLFwiI2RlZmluZSBnbF9GcmFnRGVwdGhFWFQgZ2xfRnJhZ0RlcHRoXCIsXCIjZGVmaW5lIHRleHR1cmUyRCB0ZXh0dXJlXCIsXCIjZGVmaW5lIHRleHR1cmVDdWJlIHRleHR1cmVcIixcIiNkZWZpbmUgdGV4dHVyZTJEUHJvaiB0ZXh0dXJlUHJvalwiLFwiI2RlZmluZSB0ZXh0dXJlMkRMb2RFWFQgdGV4dHVyZUxvZFwiLFwiI2RlZmluZSB0ZXh0dXJlMkRQcm9qTG9kRVhUIHRleHR1cmVQcm9qTG9kXCIsXCIjZGVmaW5lIHRleHR1cmVDdWJlTG9kRVhUIHRleHR1cmVMb2RcIixcIiNkZWZpbmUgdGV4dHVyZTJER3JhZEVYVCB0ZXh0dXJlR3JhZFwiLFwiI2RlZmluZSB0ZXh0dXJlMkRQcm9qR3JhZEVYVCB0ZXh0dXJlUHJvakdyYWRcIixcIiNkZWZpbmUgdGV4dHVyZUN1YmVHcmFkRVhUIHRleHR1cmVHcmFkXCJdLmpvaW4oXCJcXG5cIikrXCJcXG5cIitiKTtjb25zdCBfPXcrYitzLE09WGEoaSwzNTYzMyx3K3grYSksUz1YYShpLDM1NjMyLF8pO2lmKGkuYXR0YWNoU2hhZGVyKHksTSksaS5hdHRhY2hTaGFkZXIoeSxTKSx2b2lkIDAhPT1uLmluZGV4MEF0dHJpYnV0ZU5hbWU/aS5iaW5kQXR0cmliTG9jYXRpb24oeSwwLG4uaW5kZXgwQXR0cmlidXRlTmFtZSk6ITA9PT1uLm1vcnBoVGFyZ2V0cyYmaS5iaW5kQXR0cmliTG9jYXRpb24oeSwwLFwicG9zaXRpb25cIiksaS5saW5rUHJvZ3JhbSh5KSx0LmRlYnVnLmNoZWNrU2hhZGVyRXJyb3JzKXtjb25zdCB0PWkuZ2V0UHJvZ3JhbUluZm9Mb2coeSkudHJpbSgpLGU9aS5nZXRTaGFkZXJJbmZvTG9nKE0pLnRyaW0oKSxuPWkuZ2V0U2hhZGVySW5mb0xvZyhTKS50cmltKCk7bGV0IHI9ITAsbz0hMDtpZighMT09PWkuZ2V0UHJvZ3JhbVBhcmFtZXRlcih5LDM1NzE0KSl7cj0hMTtjb25zdCBlPVphKGksTSxcInZlcnRleFwiKSxuPVphKGksUyxcImZyYWdtZW50XCIpO2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5XZWJHTFByb2dyYW06IHNoYWRlciBlcnJvcjogXCIsaS5nZXRFcnJvcigpLFwiMzU3MTVcIixpLmdldFByb2dyYW1QYXJhbWV0ZXIoeSwzNTcxNSksXCJnbC5nZXRQcm9ncmFtSW5mb0xvZ1wiLHQsZSxuKX1lbHNlXCJcIiE9PXQ/Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xQcm9ncmFtOiBnbC5nZXRQcm9ncmFtSW5mb0xvZygpXCIsdCk6XCJcIiE9PWUmJlwiXCIhPT1ufHwobz0hMSk7byYmKHRoaXMuZGlhZ25vc3RpY3M9e3J1bm5hYmxlOnIscHJvZ3JhbUxvZzp0LHZlcnRleFNoYWRlcjp7bG9nOmUscHJlZml4Onh9LGZyYWdtZW50U2hhZGVyOntsb2c6bixwcmVmaXg6Yn19KX1sZXQgVCxFO3JldHVybiBpLmRlbGV0ZVNoYWRlcihNKSxpLmRlbGV0ZVNoYWRlcihTKSx0aGlzLmdldFVuaWZvcm1zPWZ1bmN0aW9uKCl7cmV0dXJuIHZvaWQgMD09PVQmJihUPW5ldyBXYShpLHkpKSxUfSx0aGlzLmdldEF0dHJpYnV0ZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdm9pZCAwPT09RSYmKEU9ZnVuY3Rpb24odCxlKXtjb25zdCBuPXt9LHI9dC5nZXRQcm9ncmFtUGFyYW1ldGVyKGUsMzU3MjEpO2ZvcihsZXQgaT0wO2k8cjtpKyspe2NvbnN0IHI9dC5nZXRBY3RpdmVBdHRyaWIoZSxpKS5uYW1lO25bcl09dC5nZXRBdHRyaWJMb2NhdGlvbihlLHIpfXJldHVybiBufShpLHkpKSxFfSx0aGlzLmRlc3Ryb3k9ZnVuY3Rpb24oKXtyLnJlbGVhc2VTdGF0ZXNPZlByb2dyYW0odGhpcyksaS5kZWxldGVQcm9ncmFtKHkpLHRoaXMucHJvZ3JhbT12b2lkIDB9LHRoaXMubmFtZT1uLnNoYWRlck5hbWUsdGhpcy5pZD1xYSsrLHRoaXMuY2FjaGVLZXk9ZSx0aGlzLnVzZWRUaW1lcz0xLHRoaXMucHJvZ3JhbT15LHRoaXMudmVydGV4U2hhZGVyPU0sdGhpcy5mcmFnbWVudFNoYWRlcj1TLHRoaXN9ZnVuY3Rpb24gZHModCxlLG4scixpLG8pe2NvbnN0IGE9W10scz1yLmlzV2ViR0wyLGM9ci5sb2dhcml0aG1pY0RlcHRoQnVmZmVyLGw9ci5mbG9hdFZlcnRleFRleHR1cmVzLHU9ci5tYXhWZXJ0ZXhVbmlmb3JtcyxoPXIudmVydGV4VGV4dHVyZXM7bGV0IGQ9ci5wcmVjaXNpb247Y29uc3QgcD17TWVzaERlcHRoTWF0ZXJpYWw6XCJkZXB0aFwiLE1lc2hEaXN0YW5jZU1hdGVyaWFsOlwiZGlzdGFuY2VSR0JBXCIsTWVzaE5vcm1hbE1hdGVyaWFsOlwibm9ybWFsXCIsTWVzaEJhc2ljTWF0ZXJpYWw6XCJiYXNpY1wiLE1lc2hMYW1iZXJ0TWF0ZXJpYWw6XCJsYW1iZXJ0XCIsTWVzaFBob25nTWF0ZXJpYWw6XCJwaG9uZ1wiLE1lc2hUb29uTWF0ZXJpYWw6XCJ0b29uXCIsTWVzaFN0YW5kYXJkTWF0ZXJpYWw6XCJwaHlzaWNhbFwiLE1lc2hQaHlzaWNhbE1hdGVyaWFsOlwicGh5c2ljYWxcIixNZXNoTWF0Y2FwTWF0ZXJpYWw6XCJtYXRjYXBcIixMaW5lQmFzaWNNYXRlcmlhbDpcImJhc2ljXCIsTGluZURhc2hlZE1hdGVyaWFsOlwiZGFzaGVkXCIsUG9pbnRzTWF0ZXJpYWw6XCJwb2ludHNcIixTaGFkb3dNYXRlcmlhbDpcInNoYWRvd1wiLFNwcml0ZU1hdGVyaWFsOlwic3ByaXRlXCJ9LGY9W1wicHJlY2lzaW9uXCIsXCJpc1dlYkdMMlwiLFwic3VwcG9ydHNWZXJ0ZXhUZXh0dXJlc1wiLFwib3V0cHV0RW5jb2RpbmdcIixcImluc3RhbmNpbmdcIixcImluc3RhbmNpbmdDb2xvclwiLFwibWFwXCIsXCJtYXBFbmNvZGluZ1wiLFwibWF0Y2FwXCIsXCJtYXRjYXBFbmNvZGluZ1wiLFwiZW52TWFwXCIsXCJlbnZNYXBNb2RlXCIsXCJlbnZNYXBFbmNvZGluZ1wiLFwiZW52TWFwQ3ViZVVWXCIsXCJsaWdodE1hcFwiLFwibGlnaHRNYXBFbmNvZGluZ1wiLFwiYW9NYXBcIixcImVtaXNzaXZlTWFwXCIsXCJlbWlzc2l2ZU1hcEVuY29kaW5nXCIsXCJidW1wTWFwXCIsXCJub3JtYWxNYXBcIixcIm9iamVjdFNwYWNlTm9ybWFsTWFwXCIsXCJ0YW5nZW50U3BhY2VOb3JtYWxNYXBcIixcImNsZWFyY29hdE1hcFwiLFwiY2xlYXJjb2F0Um91Z2huZXNzTWFwXCIsXCJjbGVhcmNvYXROb3JtYWxNYXBcIixcImRpc3BsYWNlbWVudE1hcFwiLFwic3BlY3VsYXJNYXBcIixcInJvdWdobmVzc01hcFwiLFwibWV0YWxuZXNzTWFwXCIsXCJncmFkaWVudE1hcFwiLFwiYWxwaGFNYXBcIixcImNvbWJpbmVcIixcInZlcnRleENvbG9yc1wiLFwidmVydGV4VGFuZ2VudHNcIixcInZlcnRleFV2c1wiLFwidXZzVmVydGV4T25seVwiLFwiZm9nXCIsXCJ1c2VGb2dcIixcImZvZ0V4cDJcIixcImZsYXRTaGFkaW5nXCIsXCJzaXplQXR0ZW51YXRpb25cIixcImxvZ2FyaXRobWljRGVwdGhCdWZmZXJcIixcInNraW5uaW5nXCIsXCJtYXhCb25lc1wiLFwidXNlVmVydGV4VGV4dHVyZVwiLFwibW9ycGhUYXJnZXRzXCIsXCJtb3JwaE5vcm1hbHNcIixcIm1heE1vcnBoVGFyZ2V0c1wiLFwibWF4TW9ycGhOb3JtYWxzXCIsXCJwcmVtdWx0aXBsaWVkQWxwaGFcIixcIm51bURpckxpZ2h0c1wiLFwibnVtUG9pbnRMaWdodHNcIixcIm51bVNwb3RMaWdodHNcIixcIm51bUhlbWlMaWdodHNcIixcIm51bVJlY3RBcmVhTGlnaHRzXCIsXCJudW1EaXJMaWdodFNoYWRvd3NcIixcIm51bVBvaW50TGlnaHRTaGFkb3dzXCIsXCJudW1TcG90TGlnaHRTaGFkb3dzXCIsXCJzaGFkb3dNYXBFbmFibGVkXCIsXCJzaGFkb3dNYXBUeXBlXCIsXCJ0b25lTWFwcGluZ1wiLFwicGh5c2ljYWxseUNvcnJlY3RMaWdodHNcIixcImFscGhhVGVzdFwiLFwiZG91YmxlU2lkZWRcIixcImZsaXBTaWRlZFwiLFwibnVtQ2xpcHBpbmdQbGFuZXNcIixcIm51bUNsaXBJbnRlcnNlY3Rpb25cIixcImRlcHRoUGFja2luZ1wiLFwiZGl0aGVyaW5nXCIsXCJzaGVlblwiLFwidHJhbnNtaXNzaW9uTWFwXCJdO2Z1bmN0aW9uIHYodCl7bGV0IGU7cmV0dXJuIHQ/dC5pc1RleHR1cmU/ZT10LmVuY29kaW5nOnQuaXNXZWJHTFJlbmRlclRhcmdldCYmKGNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUHJvZ3JhbXMuZ2V0VGV4dHVyZUVuY29kaW5nRnJvbU1hcDogZG9uJ3QgdXNlIHJlbmRlciB0YXJnZXRzIGFzIHRleHR1cmVzLiBVc2UgdGhlaXIgLnRleHR1cmUgcHJvcGVydHkgaW5zdGVhZC5cIiksZT10LnRleHR1cmUuZW5jb2RpbmcpOmU9SmUsZX1yZXR1cm57Z2V0UGFyYW1ldGVyczpmdW5jdGlvbihpLGEsZix5LHgpe2NvbnN0IGI9eS5mb2csdz1pLmlzTWVzaFN0YW5kYXJkTWF0ZXJpYWw/eS5lbnZpcm9ubWVudDpudWxsLF89ZS5nZXQoaS5lbnZNYXB8fHcpLE09cFtpLnR5cGVdLFM9eC5pc1NraW5uZWRNZXNoP2Z1bmN0aW9uKHQpe2NvbnN0IGU9dC5za2VsZXRvbi5ib25lcztpZihsKXJldHVybiAxMDI0O3tjb25zdCB0PXUsbj1NYXRoLmZsb29yKCh0LTIwKS80KSxyPU1hdGgubWluKG4sZS5sZW5ndGgpO3JldHVybiByPGUubGVuZ3RoPyhjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiBTa2VsZXRvbiBoYXMgXCIrZS5sZW5ndGgrXCIgYm9uZXMuIFRoaXMgR1BVIHN1cHBvcnRzIFwiK3IrXCIuXCIpLDApOnJ9fSh4KTowO2xldCBULEU7aWYobnVsbCE9PWkucHJlY2lzaW9uJiYoZD1yLmdldE1heFByZWNpc2lvbihpLnByZWNpc2lvbiksZCE9PWkucHJlY2lzaW9uJiZjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFByb2dyYW0uZ2V0UGFyYW1ldGVyczpcIixpLnByZWNpc2lvbixcIm5vdCBzdXBwb3J0ZWQsIHVzaW5nXCIsZCxcImluc3RlYWQuXCIpKSxNKXtjb25zdCB0PU5vW01dO1Q9dC52ZXJ0ZXhTaGFkZXIsRT10LmZyYWdtZW50U2hhZGVyfWVsc2UgVD1pLnZlcnRleFNoYWRlcixFPWkuZnJhZ21lbnRTaGFkZXI7Y29uc3QgQT10LmdldFJlbmRlclRhcmdldCgpO3JldHVybntpc1dlYkdMMjpzLHNoYWRlcklEOk0sc2hhZGVyTmFtZTppLnR5cGUsdmVydGV4U2hhZGVyOlQsZnJhZ21lbnRTaGFkZXI6RSxkZWZpbmVzOmkuZGVmaW5lcyxpc1Jhd1NoYWRlck1hdGVyaWFsOiEwPT09aS5pc1Jhd1NoYWRlck1hdGVyaWFsLGdsc2xWZXJzaW9uOmkuZ2xzbFZlcnNpb24scHJlY2lzaW9uOmQsaW5zdGFuY2luZzohMD09PXguaXNJbnN0YW5jZWRNZXNoLGluc3RhbmNpbmdDb2xvcjohMD09PXguaXNJbnN0YW5jZWRNZXNoJiZudWxsIT09eC5pbnN0YW5jZUNvbG9yLHN1cHBvcnRzVmVydGV4VGV4dHVyZXM6aCxvdXRwdXRFbmNvZGluZzpudWxsIT09QT92KEEudGV4dHVyZSk6dC5vdXRwdXRFbmNvZGluZyxtYXA6ISFpLm1hcCxtYXBFbmNvZGluZzp2KGkubWFwKSxtYXRjYXA6ISFpLm1hdGNhcCxtYXRjYXBFbmNvZGluZzp2KGkubWF0Y2FwKSxlbnZNYXA6ISFfLGVudk1hcE1vZGU6XyYmXy5tYXBwaW5nLGVudk1hcEVuY29kaW5nOnYoXyksZW52TWFwQ3ViZVVWOiEhXyYmKF8ubWFwcGluZz09PWx0fHxfLm1hcHBpbmc9PT11dCksbGlnaHRNYXA6ISFpLmxpZ2h0TWFwLGxpZ2h0TWFwRW5jb2Rpbmc6dihpLmxpZ2h0TWFwKSxhb01hcDohIWkuYW9NYXAsZW1pc3NpdmVNYXA6ISFpLmVtaXNzaXZlTWFwLGVtaXNzaXZlTWFwRW5jb2Rpbmc6dihpLmVtaXNzaXZlTWFwKSxidW1wTWFwOiEhaS5idW1wTWFwLG5vcm1hbE1hcDohIWkubm9ybWFsTWFwLG9iamVjdFNwYWNlTm9ybWFsTWFwOmkubm9ybWFsTWFwVHlwZT09PWNuLHRhbmdlbnRTcGFjZU5vcm1hbE1hcDppLm5vcm1hbE1hcFR5cGU9PT1zbixjbGVhcmNvYXRNYXA6ISFpLmNsZWFyY29hdE1hcCxjbGVhcmNvYXRSb3VnaG5lc3NNYXA6ISFpLmNsZWFyY29hdFJvdWdobmVzc01hcCxjbGVhcmNvYXROb3JtYWxNYXA6ISFpLmNsZWFyY29hdE5vcm1hbE1hcCxkaXNwbGFjZW1lbnRNYXA6ISFpLmRpc3BsYWNlbWVudE1hcCxyb3VnaG5lc3NNYXA6ISFpLnJvdWdobmVzc01hcCxtZXRhbG5lc3NNYXA6ISFpLm1ldGFsbmVzc01hcCxzcGVjdWxhck1hcDohIWkuc3BlY3VsYXJNYXAsYWxwaGFNYXA6ISFpLmFscGhhTWFwLGdyYWRpZW50TWFwOiEhaS5ncmFkaWVudE1hcCxzaGVlbjohIWkuc2hlZW4sdHJhbnNtaXNzaW9uTWFwOiEhaS50cmFuc21pc3Npb25NYXAsY29tYmluZTppLmNvbWJpbmUsdmVydGV4VGFuZ2VudHM6aS5ub3JtYWxNYXAmJmkudmVydGV4VGFuZ2VudHMsdmVydGV4Q29sb3JzOmkudmVydGV4Q29sb3JzLHZlcnRleFV2czohIShpLm1hcHx8aS5idW1wTWFwfHxpLm5vcm1hbE1hcHx8aS5zcGVjdWxhck1hcHx8aS5hbHBoYU1hcHx8aS5lbWlzc2l2ZU1hcHx8aS5yb3VnaG5lc3NNYXB8fGkubWV0YWxuZXNzTWFwfHxpLmNsZWFyY29hdE1hcHx8aS5jbGVhcmNvYXRSb3VnaG5lc3NNYXB8fGkuY2xlYXJjb2F0Tm9ybWFsTWFwfHxpLmRpc3BsYWNlbWVudE1hcHx8aS50cmFuc21pc3Npb25NYXApLHV2c1ZlcnRleE9ubHk6IShpLm1hcHx8aS5idW1wTWFwfHxpLm5vcm1hbE1hcHx8aS5zcGVjdWxhck1hcHx8aS5hbHBoYU1hcHx8aS5lbWlzc2l2ZU1hcHx8aS5yb3VnaG5lc3NNYXB8fGkubWV0YWxuZXNzTWFwfHxpLmNsZWFyY29hdE5vcm1hbE1hcHx8aS50cmFuc21pc3Npb25NYXB8fCFpLmRpc3BsYWNlbWVudE1hcCksZm9nOiEhYix1c2VGb2c6aS5mb2csZm9nRXhwMjpiJiZiLmlzRm9nRXhwMixmbGF0U2hhZGluZzppLmZsYXRTaGFkaW5nLHNpemVBdHRlbnVhdGlvbjppLnNpemVBdHRlbnVhdGlvbixsb2dhcml0aG1pY0RlcHRoQnVmZmVyOmMsc2tpbm5pbmc6aS5za2lubmluZyYmUz4wLG1heEJvbmVzOlMsdXNlVmVydGV4VGV4dHVyZTpsLG1vcnBoVGFyZ2V0czppLm1vcnBoVGFyZ2V0cyxtb3JwaE5vcm1hbHM6aS5tb3JwaE5vcm1hbHMsbWF4TW9ycGhUYXJnZXRzOnQubWF4TW9ycGhUYXJnZXRzLG1heE1vcnBoTm9ybWFsczp0Lm1heE1vcnBoTm9ybWFscyxudW1EaXJMaWdodHM6YS5kaXJlY3Rpb25hbC5sZW5ndGgsbnVtUG9pbnRMaWdodHM6YS5wb2ludC5sZW5ndGgsbnVtU3BvdExpZ2h0czphLnNwb3QubGVuZ3RoLG51bVJlY3RBcmVhTGlnaHRzOmEucmVjdEFyZWEubGVuZ3RoLG51bUhlbWlMaWdodHM6YS5oZW1pLmxlbmd0aCxudW1EaXJMaWdodFNoYWRvd3M6YS5kaXJlY3Rpb25hbFNoYWRvd01hcC5sZW5ndGgsbnVtUG9pbnRMaWdodFNoYWRvd3M6YS5wb2ludFNoYWRvd01hcC5sZW5ndGgsbnVtU3BvdExpZ2h0U2hhZG93czphLnNwb3RTaGFkb3dNYXAubGVuZ3RoLG51bUNsaXBwaW5nUGxhbmVzOm8ubnVtUGxhbmVzLG51bUNsaXBJbnRlcnNlY3Rpb246by5udW1JbnRlcnNlY3Rpb24sZGl0aGVyaW5nOmkuZGl0aGVyaW5nLHNoYWRvd01hcEVuYWJsZWQ6dC5zaGFkb3dNYXAuZW5hYmxlZCYmZi5sZW5ndGg+MCxzaGFkb3dNYXBUeXBlOnQuc2hhZG93TWFwLnR5cGUsdG9uZU1hcHBpbmc6aS50b25lTWFwcGVkP3QudG9uZU1hcHBpbmc6USxwaHlzaWNhbGx5Q29ycmVjdExpZ2h0czp0LnBoeXNpY2FsbHlDb3JyZWN0TGlnaHRzLHByZW11bHRpcGxpZWRBbHBoYTppLnByZW11bHRpcGxpZWRBbHBoYSxhbHBoYVRlc3Q6aS5hbHBoYVRlc3QsZG91YmxlU2lkZWQ6aS5zaWRlPT09ZyxmbGlwU2lkZWQ6aS5zaWRlPT09bSxkZXB0aFBhY2tpbmc6dm9pZCAwIT09aS5kZXB0aFBhY2tpbmcmJmkuZGVwdGhQYWNraW5nLGluZGV4MEF0dHJpYnV0ZU5hbWU6aS5pbmRleDBBdHRyaWJ1dGVOYW1lLGV4dGVuc2lvbkRlcml2YXRpdmVzOmkuZXh0ZW5zaW9ucyYmaS5leHRlbnNpb25zLmRlcml2YXRpdmVzLGV4dGVuc2lvbkZyYWdEZXB0aDppLmV4dGVuc2lvbnMmJmkuZXh0ZW5zaW9ucy5mcmFnRGVwdGgsZXh0ZW5zaW9uRHJhd0J1ZmZlcnM6aS5leHRlbnNpb25zJiZpLmV4dGVuc2lvbnMuZHJhd0J1ZmZlcnMsZXh0ZW5zaW9uU2hhZGVyVGV4dHVyZUxPRDppLmV4dGVuc2lvbnMmJmkuZXh0ZW5zaW9ucy5zaGFkZXJUZXh0dXJlTE9ELHJlbmRlcmVyRXh0ZW5zaW9uRnJhZ0RlcHRoOnN8fG4uaGFzKFwiRVhUX2ZyYWdfZGVwdGhcIikscmVuZGVyZXJFeHRlbnNpb25EcmF3QnVmZmVyczpzfHxuLmhhcyhcIldFQkdMX2RyYXdfYnVmZmVyc1wiKSxyZW5kZXJlckV4dGVuc2lvblNoYWRlclRleHR1cmVMb2Q6c3x8bi5oYXMoXCJFWFRfc2hhZGVyX3RleHR1cmVfbG9kXCIpLGN1c3RvbVByb2dyYW1DYWNoZUtleTppLmN1c3RvbVByb2dyYW1DYWNoZUtleSgpfX0sZ2V0UHJvZ3JhbUNhY2hlS2V5OmZ1bmN0aW9uKGUpe2NvbnN0IG49W107aWYoZS5zaGFkZXJJRD9uLnB1c2goZS5zaGFkZXJJRCk6KG4ucHVzaChlLmZyYWdtZW50U2hhZGVyKSxuLnB1c2goZS52ZXJ0ZXhTaGFkZXIpKSx2b2lkIDAhPT1lLmRlZmluZXMpZm9yKGNvbnN0IHQgaW4gZS5kZWZpbmVzKW4ucHVzaCh0KSxuLnB1c2goZS5kZWZpbmVzW3RdKTtpZighMT09PWUuaXNSYXdTaGFkZXJNYXRlcmlhbCl7Zm9yKGxldCB0PTA7dDxmLmxlbmd0aDt0Kyspbi5wdXNoKGVbZlt0XV0pO24ucHVzaCh0Lm91dHB1dEVuY29kaW5nKSxuLnB1c2godC5nYW1tYUZhY3Rvcil9cmV0dXJuIG4ucHVzaChlLmN1c3RvbVByb2dyYW1DYWNoZUtleSksbi5qb2luKCl9LGdldFVuaWZvcm1zOmZ1bmN0aW9uKHQpe2NvbnN0IGU9cFt0LnR5cGVdO2xldCBuO2lmKGUpe2NvbnN0IHQ9Tm9bZV07bj15by5jbG9uZSh0LnVuaWZvcm1zKX1lbHNlIG49dC51bmlmb3JtcztyZXR1cm4gbn0sYWNxdWlyZVByb2dyYW06ZnVuY3Rpb24oZSxuKXtsZXQgcjtmb3IobGV0IHQ9MCxlPWEubGVuZ3RoO3Q8ZTt0Kyspe2NvbnN0IGU9YVt0XTtpZihlLmNhY2hlS2V5PT09bil7cj1lLCsrci51c2VkVGltZXM7YnJlYWt9fXJldHVybiB2b2lkIDA9PT1yJiYocj1uZXcgaHModCxuLGUsaSksYS5wdXNoKHIpKSxyfSxyZWxlYXNlUHJvZ3JhbTpmdW5jdGlvbih0KXtpZigwPT0tLXQudXNlZFRpbWVzKXtjb25zdCBlPWEuaW5kZXhPZih0KTthW2VdPWFbYS5sZW5ndGgtMV0sYS5wb3AoKSx0LmRlc3Ryb3koKX19LHByb2dyYW1zOmF9fWZ1bmN0aW9uIHBzKCl7bGV0IHQ9bmV3IFdlYWtNYXA7cmV0dXJue2dldDpmdW5jdGlvbihlKXtsZXQgbj10LmdldChlKTtyZXR1cm4gdm9pZCAwPT09biYmKG49e30sdC5zZXQoZSxuKSksbn0scmVtb3ZlOmZ1bmN0aW9uKGUpe3QuZGVsZXRlKGUpfSx1cGRhdGU6ZnVuY3Rpb24oZSxuLHIpe3QuZ2V0KGUpW25dPXJ9LGRpc3Bvc2U6ZnVuY3Rpb24oKXt0PW5ldyBXZWFrTWFwfX19ZnVuY3Rpb24gZnModCxlKXtyZXR1cm4gdC5ncm91cE9yZGVyIT09ZS5ncm91cE9yZGVyP3QuZ3JvdXBPcmRlci1lLmdyb3VwT3JkZXI6dC5yZW5kZXJPcmRlciE9PWUucmVuZGVyT3JkZXI/dC5yZW5kZXJPcmRlci1lLnJlbmRlck9yZGVyOnQucHJvZ3JhbSE9PWUucHJvZ3JhbT90LnByb2dyYW0uaWQtZS5wcm9ncmFtLmlkOnQubWF0ZXJpYWwuaWQhPT1lLm1hdGVyaWFsLmlkP3QubWF0ZXJpYWwuaWQtZS5tYXRlcmlhbC5pZDp0LnohPT1lLno/dC56LWUuejp0LmlkLWUuaWR9ZnVuY3Rpb24gbXModCxlKXtyZXR1cm4gdC5ncm91cE9yZGVyIT09ZS5ncm91cE9yZGVyP3QuZ3JvdXBPcmRlci1lLmdyb3VwT3JkZXI6dC5yZW5kZXJPcmRlciE9PWUucmVuZGVyT3JkZXI/dC5yZW5kZXJPcmRlci1lLnJlbmRlck9yZGVyOnQueiE9PWUuej9lLnotdC56OnQuaWQtZS5pZH1mdW5jdGlvbiBncyh0KXtjb25zdCBlPVtdO2xldCBuPTA7Y29uc3Qgcj1bXSxpPVtdLG89e2lkOi0xfTtmdW5jdGlvbiBhKHIsaSxhLHMsYyxsKXtsZXQgdT1lW25dO2NvbnN0IGg9dC5nZXQoYSk7cmV0dXJuIHZvaWQgMD09PXU/KHU9e2lkOnIuaWQsb2JqZWN0OnIsZ2VvbWV0cnk6aSxtYXRlcmlhbDphLHByb2dyYW06aC5wcm9ncmFtfHxvLGdyb3VwT3JkZXI6cyxyZW5kZXJPcmRlcjpyLnJlbmRlck9yZGVyLHo6Yyxncm91cDpsfSxlW25dPXUpOih1LmlkPXIuaWQsdS5vYmplY3Q9cix1Lmdlb21ldHJ5PWksdS5tYXRlcmlhbD1hLHUucHJvZ3JhbT1oLnByb2dyYW18fG8sdS5ncm91cE9yZGVyPXMsdS5yZW5kZXJPcmRlcj1yLnJlbmRlck9yZGVyLHUuej1jLHUuZ3JvdXA9bCksbisrLHV9cmV0dXJue29wYXF1ZTpyLHRyYW5zcGFyZW50OmksaW5pdDpmdW5jdGlvbigpe249MCxyLmxlbmd0aD0wLGkubGVuZ3RoPTB9LHB1c2g6ZnVuY3Rpb24odCxlLG4sbyxzLGMpe2NvbnN0IGw9YSh0LGUsbixvLHMsYyk7KCEwPT09bi50cmFuc3BhcmVudD9pOnIpLnB1c2gobCl9LHVuc2hpZnQ6ZnVuY3Rpb24odCxlLG4sbyxzLGMpe2NvbnN0IGw9YSh0LGUsbixvLHMsYyk7KCEwPT09bi50cmFuc3BhcmVudD9pOnIpLnVuc2hpZnQobCl9LGZpbmlzaDpmdW5jdGlvbigpe2ZvcihsZXQgdD1uLHI9ZS5sZW5ndGg7dDxyO3QrKyl7Y29uc3Qgbj1lW3RdO2lmKG51bGw9PT1uLmlkKWJyZWFrO24uaWQ9bnVsbCxuLm9iamVjdD1udWxsLG4uZ2VvbWV0cnk9bnVsbCxuLm1hdGVyaWFsPW51bGwsbi5wcm9ncmFtPW51bGwsbi5ncm91cD1udWxsfX0sc29ydDpmdW5jdGlvbih0LGUpe3IubGVuZ3RoPjEmJnIuc29ydCh0fHxmcyksaS5sZW5ndGg+MSYmaS5zb3J0KGV8fG1zKX19fWZ1bmN0aW9uIHZzKHQpe2xldCBlPW5ldyBXZWFrTWFwO3JldHVybntnZXQ6ZnVuY3Rpb24obixyKXtjb25zdCBpPWUuZ2V0KG4pO2xldCBvO3JldHVybiB2b2lkIDA9PT1pPyhvPW5ldyBncyh0KSxlLnNldChuLG5ldyBXZWFrTWFwKSxlLmdldChuKS5zZXQocixvKSk6KG89aS5nZXQociksdm9pZCAwPT09byYmKG89bmV3IGdzKHQpLGkuc2V0KHIsbykpKSxvfSxkaXNwb3NlOmZ1bmN0aW9uKCl7ZT1uZXcgV2Vha01hcH19fWZ1bmN0aW9uIHlzKCl7Y29uc3QgdD17fTtyZXR1cm57Z2V0OmZ1bmN0aW9uKGUpe2lmKHZvaWQgMCE9PXRbZS5pZF0pcmV0dXJuIHRbZS5pZF07bGV0IG47c3dpdGNoKGUudHlwZSl7Y2FzZVwiRGlyZWN0aW9uYWxMaWdodFwiOm49e2RpcmVjdGlvbjpuZXcgS24sY29sb3I6bmV3IHlpfTticmVhaztjYXNlXCJTcG90TGlnaHRcIjpuPXtwb3NpdGlvbjpuZXcgS24sZGlyZWN0aW9uOm5ldyBLbixjb2xvcjpuZXcgeWksZGlzdGFuY2U6MCxjb25lQ29zOjAscGVudW1icmFDb3M6MCxkZWNheTowfTticmVhaztjYXNlXCJQb2ludExpZ2h0XCI6bj17cG9zaXRpb246bmV3IEtuLGNvbG9yOm5ldyB5aSxkaXN0YW5jZTowLGRlY2F5OjB9O2JyZWFrO2Nhc2VcIkhlbWlzcGhlcmVMaWdodFwiOm49e2RpcmVjdGlvbjpuZXcgS24sc2t5Q29sb3I6bmV3IHlpLGdyb3VuZENvbG9yOm5ldyB5aX07YnJlYWs7Y2FzZVwiUmVjdEFyZWFMaWdodFwiOm49e2NvbG9yOm5ldyB5aSxwb3NpdGlvbjpuZXcgS24saGFsZldpZHRoOm5ldyBLbixoYWxmSGVpZ2h0Om5ldyBLbn19cmV0dXJuIHRbZS5pZF09bixufX19bGV0IHhzPTA7ZnVuY3Rpb24gYnModCxlKXtyZXR1cm4oZS5jYXN0U2hhZG93PzE6MCktKHQuY2FzdFNoYWRvdz8xOjApfWZ1bmN0aW9uIHdzKHQsZSl7Y29uc3Qgbj1uZXcgeXMscj1mdW5jdGlvbigpe2NvbnN0IHQ9e307cmV0dXJue2dldDpmdW5jdGlvbihlKXtpZih2b2lkIDAhPT10W2UuaWRdKXJldHVybiB0W2UuaWRdO2xldCBuO3N3aXRjaChlLnR5cGUpe2Nhc2VcIkRpcmVjdGlvbmFsTGlnaHRcIjpjYXNlXCJTcG90TGlnaHRcIjpuPXtzaGFkb3dCaWFzOjAsc2hhZG93Tm9ybWFsQmlhczowLHNoYWRvd1JhZGl1czoxLHNoYWRvd01hcFNpemU6bmV3IEdufTticmVhaztjYXNlXCJQb2ludExpZ2h0XCI6bj17c2hhZG93QmlhczowLHNoYWRvd05vcm1hbEJpYXM6MCxzaGFkb3dSYWRpdXM6MSxzaGFkb3dNYXBTaXplOm5ldyBHbixzaGFkb3dDYW1lcmFOZWFyOjEsc2hhZG93Q2FtZXJhRmFyOjFlM319cmV0dXJuIHRbZS5pZF09bixufX19KCksaT17dmVyc2lvbjowLGhhc2g6e2RpcmVjdGlvbmFsTGVuZ3RoOi0xLHBvaW50TGVuZ3RoOi0xLHNwb3RMZW5ndGg6LTEscmVjdEFyZWFMZW5ndGg6LTEsaGVtaUxlbmd0aDotMSxudW1EaXJlY3Rpb25hbFNoYWRvd3M6LTEsbnVtUG9pbnRTaGFkb3dzOi0xLG51bVNwb3RTaGFkb3dzOi0xfSxhbWJpZW50OlswLDAsMF0scHJvYmU6W10sZGlyZWN0aW9uYWw6W10sZGlyZWN0aW9uYWxTaGFkb3c6W10sZGlyZWN0aW9uYWxTaGFkb3dNYXA6W10sZGlyZWN0aW9uYWxTaGFkb3dNYXRyaXg6W10sc3BvdDpbXSxzcG90U2hhZG93OltdLHNwb3RTaGFkb3dNYXA6W10sc3BvdFNoYWRvd01hdHJpeDpbXSxyZWN0QXJlYTpbXSxyZWN0QXJlYUxUQzE6bnVsbCxyZWN0QXJlYUxUQzI6bnVsbCxwb2ludDpbXSxwb2ludFNoYWRvdzpbXSxwb2ludFNoYWRvd01hcDpbXSxwb2ludFNoYWRvd01hdHJpeDpbXSxoZW1pOltdfTtmb3IobGV0IHQ9MDt0PDk7dCsrKWkucHJvYmUucHVzaChuZXcgS24pO2NvbnN0IG89bmV3IEtuLGE9bmV3IFRyLHM9bmV3IFRyO3JldHVybntzZXR1cDpmdW5jdGlvbihjLGwsdSl7bGV0IGg9MCxkPTAscD0wO2ZvcihsZXQgdD0wO3Q8OTt0KyspaS5wcm9iZVt0XS5zZXQoMCwwLDApO2xldCBmPTAsbT0wLGc9MCx2PTAseT0wLHg9MCxiPTAsdz0wO2NvbnN0IF89dS5tYXRyaXhXb3JsZEludmVyc2U7Yy5zb3J0KGJzKTtmb3IobGV0IHQ9MCxlPWMubGVuZ3RoO3Q8ZTt0Kyspe2NvbnN0IGU9Y1t0XSxsPWUuY29sb3IsdT1lLmludGVuc2l0eSxNPWUuZGlzdGFuY2UsUz1lLnNoYWRvdyYmZS5zaGFkb3cubWFwP2Uuc2hhZG93Lm1hcC50ZXh0dXJlOm51bGw7aWYoZS5pc0FtYmllbnRMaWdodCloKz1sLnIqdSxkKz1sLmcqdSxwKz1sLmIqdTtlbHNlIGlmKGUuaXNMaWdodFByb2JlKWZvcihsZXQgdD0wO3Q8OTt0KyspaS5wcm9iZVt0XS5hZGRTY2FsZWRWZWN0b3IoZS5zaC5jb2VmZmljaWVudHNbdF0sdSk7ZWxzZSBpZihlLmlzRGlyZWN0aW9uYWxMaWdodCl7Y29uc3QgdD1uLmdldChlKTtpZih0LmNvbG9yLmNvcHkoZS5jb2xvcikubXVsdGlwbHlTY2FsYXIoZS5pbnRlbnNpdHkpLHQuZGlyZWN0aW9uLnNldEZyb21NYXRyaXhQb3NpdGlvbihlLm1hdHJpeFdvcmxkKSxvLnNldEZyb21NYXRyaXhQb3NpdGlvbihlLnRhcmdldC5tYXRyaXhXb3JsZCksdC5kaXJlY3Rpb24uc3ViKG8pLHQuZGlyZWN0aW9uLnRyYW5zZm9ybURpcmVjdGlvbihfKSxlLmNhc3RTaGFkb3cpe2NvbnN0IHQ9ZS5zaGFkb3csbj1yLmdldChlKTtuLnNoYWRvd0JpYXM9dC5iaWFzLG4uc2hhZG93Tm9ybWFsQmlhcz10Lm5vcm1hbEJpYXMsbi5zaGFkb3dSYWRpdXM9dC5yYWRpdXMsbi5zaGFkb3dNYXBTaXplPXQubWFwU2l6ZSxpLmRpcmVjdGlvbmFsU2hhZG93W2ZdPW4saS5kaXJlY3Rpb25hbFNoYWRvd01hcFtmXT1TLGkuZGlyZWN0aW9uYWxTaGFkb3dNYXRyaXhbZl09ZS5zaGFkb3cubWF0cml4LHgrK31pLmRpcmVjdGlvbmFsW2ZdPXQsZisrfWVsc2UgaWYoZS5pc1Nwb3RMaWdodCl7Y29uc3QgdD1uLmdldChlKTtpZih0LnBvc2l0aW9uLnNldEZyb21NYXRyaXhQb3NpdGlvbihlLm1hdHJpeFdvcmxkKSx0LnBvc2l0aW9uLmFwcGx5TWF0cml4NChfKSx0LmNvbG9yLmNvcHkobCkubXVsdGlwbHlTY2FsYXIodSksdC5kaXN0YW5jZT1NLHQuZGlyZWN0aW9uLnNldEZyb21NYXRyaXhQb3NpdGlvbihlLm1hdHJpeFdvcmxkKSxvLnNldEZyb21NYXRyaXhQb3NpdGlvbihlLnRhcmdldC5tYXRyaXhXb3JsZCksdC5kaXJlY3Rpb24uc3ViKG8pLHQuZGlyZWN0aW9uLnRyYW5zZm9ybURpcmVjdGlvbihfKSx0LmNvbmVDb3M9TWF0aC5jb3MoZS5hbmdsZSksdC5wZW51bWJyYUNvcz1NYXRoLmNvcyhlLmFuZ2xlKigxLWUucGVudW1icmEpKSx0LmRlY2F5PWUuZGVjYXksZS5jYXN0U2hhZG93KXtjb25zdCB0PWUuc2hhZG93LG49ci5nZXQoZSk7bi5zaGFkb3dCaWFzPXQuYmlhcyxuLnNoYWRvd05vcm1hbEJpYXM9dC5ub3JtYWxCaWFzLG4uc2hhZG93UmFkaXVzPXQucmFkaXVzLG4uc2hhZG93TWFwU2l6ZT10Lm1hcFNpemUsaS5zcG90U2hhZG93W2ddPW4saS5zcG90U2hhZG93TWFwW2ddPVMsaS5zcG90U2hhZG93TWF0cml4W2ddPWUuc2hhZG93Lm1hdHJpeCx3Kyt9aS5zcG90W2ddPXQsZysrfWVsc2UgaWYoZS5pc1JlY3RBcmVhTGlnaHQpe2NvbnN0IHQ9bi5nZXQoZSk7dC5jb2xvci5jb3B5KGwpLm11bHRpcGx5U2NhbGFyKHUpLHQucG9zaXRpb24uc2V0RnJvbU1hdHJpeFBvc2l0aW9uKGUubWF0cml4V29ybGQpLHQucG9zaXRpb24uYXBwbHlNYXRyaXg0KF8pLHMuaWRlbnRpdHkoKSxhLmNvcHkoZS5tYXRyaXhXb3JsZCksYS5wcmVtdWx0aXBseShfKSxzLmV4dHJhY3RSb3RhdGlvbihhKSx0LmhhbGZXaWR0aC5zZXQoLjUqZS53aWR0aCwwLDApLHQuaGFsZkhlaWdodC5zZXQoMCwuNSplLmhlaWdodCwwKSx0LmhhbGZXaWR0aC5hcHBseU1hdHJpeDQocyksdC5oYWxmSGVpZ2h0LmFwcGx5TWF0cml4NChzKSxpLnJlY3RBcmVhW3ZdPXQsdisrfWVsc2UgaWYoZS5pc1BvaW50TGlnaHQpe2NvbnN0IHQ9bi5nZXQoZSk7aWYodC5wb3NpdGlvbi5zZXRGcm9tTWF0cml4UG9zaXRpb24oZS5tYXRyaXhXb3JsZCksdC5wb3NpdGlvbi5hcHBseU1hdHJpeDQoXyksdC5jb2xvci5jb3B5KGUuY29sb3IpLm11bHRpcGx5U2NhbGFyKGUuaW50ZW5zaXR5KSx0LmRpc3RhbmNlPWUuZGlzdGFuY2UsdC5kZWNheT1lLmRlY2F5LGUuY2FzdFNoYWRvdyl7Y29uc3QgdD1lLnNoYWRvdyxuPXIuZ2V0KGUpO24uc2hhZG93Qmlhcz10LmJpYXMsbi5zaGFkb3dOb3JtYWxCaWFzPXQubm9ybWFsQmlhcyxuLnNoYWRvd1JhZGl1cz10LnJhZGl1cyxuLnNoYWRvd01hcFNpemU9dC5tYXBTaXplLG4uc2hhZG93Q2FtZXJhTmVhcj10LmNhbWVyYS5uZWFyLG4uc2hhZG93Q2FtZXJhRmFyPXQuY2FtZXJhLmZhcixpLnBvaW50U2hhZG93W21dPW4saS5wb2ludFNoYWRvd01hcFttXT1TLGkucG9pbnRTaGFkb3dNYXRyaXhbbV09ZS5zaGFkb3cubWF0cml4LGIrK31pLnBvaW50W21dPXQsbSsrfWVsc2UgaWYoZS5pc0hlbWlzcGhlcmVMaWdodCl7Y29uc3QgdD1uLmdldChlKTt0LmRpcmVjdGlvbi5zZXRGcm9tTWF0cml4UG9zaXRpb24oZS5tYXRyaXhXb3JsZCksdC5kaXJlY3Rpb24udHJhbnNmb3JtRGlyZWN0aW9uKF8pLHQuZGlyZWN0aW9uLm5vcm1hbGl6ZSgpLHQuc2t5Q29sb3IuY29weShlLmNvbG9yKS5tdWx0aXBseVNjYWxhcih1KSx0Lmdyb3VuZENvbG9yLmNvcHkoZS5ncm91bmRDb2xvcikubXVsdGlwbHlTY2FsYXIodSksaS5oZW1pW3ldPXQseSsrfX12PjAmJihlLmlzV2ViR0wyfHwhMD09PXQuaGFzKFwiT0VTX3RleHR1cmVfZmxvYXRfbGluZWFyXCIpPyhpLnJlY3RBcmVhTFRDMT1Pby5MVENfRkxPQVRfMSxpLnJlY3RBcmVhTFRDMj1Pby5MVENfRkxPQVRfMik6ITA9PT10LmhhcyhcIk9FU190ZXh0dXJlX2hhbGZfZmxvYXRfbGluZWFyXCIpPyhpLnJlY3RBcmVhTFRDMT1Pby5MVENfSEFMRl8xLGkucmVjdEFyZWFMVEMyPU9vLkxUQ19IQUxGXzIpOmNvbnNvbGUuZXJyb3IoXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiBVbmFibGUgdG8gdXNlIFJlY3RBcmVhTGlnaHQuIE1pc3NpbmcgV2ViR0wgZXh0ZW5zaW9ucy5cIikpLGkuYW1iaWVudFswXT1oLGkuYW1iaWVudFsxXT1kLGkuYW1iaWVudFsyXT1wO2NvbnN0IE09aS5oYXNoO00uZGlyZWN0aW9uYWxMZW5ndGg9PT1mJiZNLnBvaW50TGVuZ3RoPT09bSYmTS5zcG90TGVuZ3RoPT09ZyYmTS5yZWN0QXJlYUxlbmd0aD09PXYmJk0uaGVtaUxlbmd0aD09PXkmJk0ubnVtRGlyZWN0aW9uYWxTaGFkb3dzPT09eCYmTS5udW1Qb2ludFNoYWRvd3M9PT1iJiZNLm51bVNwb3RTaGFkb3dzPT09d3x8KGkuZGlyZWN0aW9uYWwubGVuZ3RoPWYsaS5zcG90Lmxlbmd0aD1nLGkucmVjdEFyZWEubGVuZ3RoPXYsaS5wb2ludC5sZW5ndGg9bSxpLmhlbWkubGVuZ3RoPXksaS5kaXJlY3Rpb25hbFNoYWRvdy5sZW5ndGg9eCxpLmRpcmVjdGlvbmFsU2hhZG93TWFwLmxlbmd0aD14LGkucG9pbnRTaGFkb3cubGVuZ3RoPWIsaS5wb2ludFNoYWRvd01hcC5sZW5ndGg9YixpLnNwb3RTaGFkb3cubGVuZ3RoPXcsaS5zcG90U2hhZG93TWFwLmxlbmd0aD13LGkuZGlyZWN0aW9uYWxTaGFkb3dNYXRyaXgubGVuZ3RoPXgsaS5wb2ludFNoYWRvd01hdHJpeC5sZW5ndGg9YixpLnNwb3RTaGFkb3dNYXRyaXgubGVuZ3RoPXcsTS5kaXJlY3Rpb25hbExlbmd0aD1mLE0ucG9pbnRMZW5ndGg9bSxNLnNwb3RMZW5ndGg9ZyxNLnJlY3RBcmVhTGVuZ3RoPXYsTS5oZW1pTGVuZ3RoPXksTS5udW1EaXJlY3Rpb25hbFNoYWRvd3M9eCxNLm51bVBvaW50U2hhZG93cz1iLE0ubnVtU3BvdFNoYWRvd3M9dyxpLnZlcnNpb249eHMrKyl9LHN0YXRlOml9fWZ1bmN0aW9uIF9zKHQsZSl7Y29uc3Qgbj1uZXcgd3ModCxlKSxyPVtdLGk9W107cmV0dXJue2luaXQ6ZnVuY3Rpb24oKXtyLmxlbmd0aD0wLGkubGVuZ3RoPTB9LHN0YXRlOntsaWdodHNBcnJheTpyLHNoYWRvd3NBcnJheTppLGxpZ2h0czpufSxzZXR1cExpZ2h0czpmdW5jdGlvbih0KXtuLnNldHVwKHIsaSx0KX0scHVzaExpZ2h0OmZ1bmN0aW9uKHQpe3IucHVzaCh0KX0scHVzaFNoYWRvdzpmdW5jdGlvbih0KXtpLnB1c2godCl9fX1mdW5jdGlvbiBNcyh0LGUpe2xldCBuPW5ldyBXZWFrTWFwO3JldHVybntnZXQ6ZnVuY3Rpb24ocixpKXtsZXQgbztyZXR1cm4hMT09PW4uaGFzKHIpPyhvPW5ldyBfcyh0LGUpLG4uc2V0KHIsbmV3IFdlYWtNYXApLG4uZ2V0KHIpLnNldChpLG8pKTohMT09PW4uZ2V0KHIpLmhhcyhpKT8obz1uZXcgX3ModCxlKSxuLmdldChyKS5zZXQoaSxvKSk6bz1uLmdldChyKS5nZXQoaSksb30sZGlzcG9zZTpmdW5jdGlvbigpe249bmV3IFdlYWtNYXB9fX1mdW5jdGlvbiBTcyh0KXt3aS5jYWxsKHRoaXMpLHRoaXMudHlwZT1cIk1lc2hEZXB0aE1hdGVyaWFsXCIsdGhpcy5kZXB0aFBhY2tpbmc9b24sdGhpcy5za2lubmluZz0hMSx0aGlzLm1vcnBoVGFyZ2V0cz0hMSx0aGlzLm1hcD1udWxsLHRoaXMuYWxwaGFNYXA9bnVsbCx0aGlzLmRpc3BsYWNlbWVudE1hcD1udWxsLHRoaXMuZGlzcGxhY2VtZW50U2NhbGU9MSx0aGlzLmRpc3BsYWNlbWVudEJpYXM9MCx0aGlzLndpcmVmcmFtZT0hMSx0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD0xLHRoaXMuZm9nPSExLHRoaXMuc2V0VmFsdWVzKHQpfWZ1bmN0aW9uIFRzKHQpe3dpLmNhbGwodGhpcyksdGhpcy50eXBlPVwiTWVzaERpc3RhbmNlTWF0ZXJpYWxcIix0aGlzLnJlZmVyZW5jZVBvc2l0aW9uPW5ldyBLbix0aGlzLm5lYXJEaXN0YW5jZT0xLHRoaXMuZmFyRGlzdGFuY2U9MWUzLHRoaXMuc2tpbm5pbmc9ITEsdGhpcy5tb3JwaFRhcmdldHM9ITEsdGhpcy5tYXA9bnVsbCx0aGlzLmFscGhhTWFwPW51bGwsdGhpcy5kaXNwbGFjZW1lbnRNYXA9bnVsbCx0aGlzLmRpc3BsYWNlbWVudFNjYWxlPTEsdGhpcy5kaXNwbGFjZW1lbnRCaWFzPTAsdGhpcy5mb2c9ITEsdGhpcy5zZXRWYWx1ZXModCl9U3MucHJvdG90eXBlPU9iamVjdC5jcmVhdGUod2kucHJvdG90eXBlKSxTcy5wcm90b3R5cGUuY29uc3RydWN0b3I9U3MsU3MucHJvdG90eXBlLmlzTWVzaERlcHRoTWF0ZXJpYWw9ITAsU3MucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24odCl7cmV0dXJuIHdpLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyx0KSx0aGlzLmRlcHRoUGFja2luZz10LmRlcHRoUGFja2luZyx0aGlzLnNraW5uaW5nPXQuc2tpbm5pbmcsdGhpcy5tb3JwaFRhcmdldHM9dC5tb3JwaFRhcmdldHMsdGhpcy5tYXA9dC5tYXAsdGhpcy5hbHBoYU1hcD10LmFscGhhTWFwLHRoaXMuZGlzcGxhY2VtZW50TWFwPXQuZGlzcGxhY2VtZW50TWFwLHRoaXMuZGlzcGxhY2VtZW50U2NhbGU9dC5kaXNwbGFjZW1lbnRTY2FsZSx0aGlzLmRpc3BsYWNlbWVudEJpYXM9dC5kaXNwbGFjZW1lbnRCaWFzLHRoaXMud2lyZWZyYW1lPXQud2lyZWZyYW1lLHRoaXMud2lyZWZyYW1lTGluZXdpZHRoPXQud2lyZWZyYW1lTGluZXdpZHRoLHRoaXN9LFRzLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHdpLnByb3RvdHlwZSksVHMucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRzLFRzLnByb3RvdHlwZS5pc01lc2hEaXN0YW5jZU1hdGVyaWFsPSEwLFRzLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKHQpe3JldHVybiB3aS5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsdCksdGhpcy5yZWZlcmVuY2VQb3NpdGlvbi5jb3B5KHQucmVmZXJlbmNlUG9zaXRpb24pLHRoaXMubmVhckRpc3RhbmNlPXQubmVhckRpc3RhbmNlLHRoaXMuZmFyRGlzdGFuY2U9dC5mYXJEaXN0YW5jZSx0aGlzLnNraW5uaW5nPXQuc2tpbm5pbmcsdGhpcy5tb3JwaFRhcmdldHM9dC5tb3JwaFRhcmdldHMsdGhpcy5tYXA9dC5tYXAsdGhpcy5hbHBoYU1hcD10LmFscGhhTWFwLHRoaXMuZGlzcGxhY2VtZW50TWFwPXQuZGlzcGxhY2VtZW50TWFwLHRoaXMuZGlzcGxhY2VtZW50U2NhbGU9dC5kaXNwbGFjZW1lbnRTY2FsZSx0aGlzLmRpc3BsYWNlbWVudEJpYXM9dC5kaXNwbGFjZW1lbnRCaWFzLHRoaXN9O2Z1bmN0aW9uIEVzKHQsZSxuKXtsZXQgcj1uZXcgTG87Y29uc3QgaT1uZXcgR24sbz1uZXcgR24sYT1uZXcgcW4scz1bXSxjPVtdLGw9e30sdT17MDptLDE6ZiwyOmd9LGQ9bmV3IHhvKHtkZWZpbmVzOntTQU1QTEVfUkFURToyLzgsSEFMRl9TQU1QTEVfUkFURToxLzh9LHVuaWZvcm1zOntzaGFkb3dfcGFzczp7dmFsdWU6bnVsbH0scmVzb2x1dGlvbjp7dmFsdWU6bmV3IEdufSxyYWRpdXM6e3ZhbHVlOjR9fSx2ZXJ0ZXhTaGFkZXI6XCJ2b2lkIG1haW4oKSB7XFxuXFx0Z2xfUG9zaXRpb24gPSB2ZWM0KCBwb3NpdGlvbiwgMS4wICk7XFxufVwiLGZyYWdtZW50U2hhZGVyOlwidW5pZm9ybSBzYW1wbGVyMkQgc2hhZG93X3Bhc3M7XFxudW5pZm9ybSB2ZWMyIHJlc29sdXRpb247XFxudW5pZm9ybSBmbG9hdCByYWRpdXM7XFxuI2luY2x1ZGUgPHBhY2tpbmc+XFxudm9pZCBtYWluKCkge1xcblxcdGZsb2F0IG1lYW4gPSAwLjA7XFxuXFx0ZmxvYXQgc3F1YXJlZF9tZWFuID0gMC4wO1xcblxcdGZsb2F0IGRlcHRoID0gdW5wYWNrUkdCQVRvRGVwdGgoIHRleHR1cmUyRCggc2hhZG93X3Bhc3MsICggZ2xfRnJhZ0Nvb3JkLnh5ICkgLyByZXNvbHV0aW9uICkgKTtcXG5cXHRmb3IgKCBmbG9hdCBpID0gLTEuMDsgaSA8IDEuMCA7IGkgKz0gU0FNUExFX1JBVEUpIHtcXG5cXHRcXHQjaWZkZWYgSE9SSVpPTkFMX1BBU1NcXG5cXHRcXHRcXHR2ZWMyIGRpc3RyaWJ1dGlvbiA9IHVucGFja1JHQkFUbzJIYWxmKCB0ZXh0dXJlMkQoIHNoYWRvd19wYXNzLCAoIGdsX0ZyYWdDb29yZC54eSArIHZlYzIoIGksIDAuMCApICogcmFkaXVzICkgLyByZXNvbHV0aW9uICkgKTtcXG5cXHRcXHRcXHRtZWFuICs9IGRpc3RyaWJ1dGlvbi54O1xcblxcdFxcdFxcdHNxdWFyZWRfbWVhbiArPSBkaXN0cmlidXRpb24ueSAqIGRpc3RyaWJ1dGlvbi55ICsgZGlzdHJpYnV0aW9uLnggKiBkaXN0cmlidXRpb24ueDtcXG5cXHRcXHQjZWxzZVxcblxcdFxcdFxcdGZsb2F0IGRlcHRoID0gdW5wYWNrUkdCQVRvRGVwdGgoIHRleHR1cmUyRCggc2hhZG93X3Bhc3MsICggZ2xfRnJhZ0Nvb3JkLnh5ICsgdmVjMiggMC4wLCBpICkgKiByYWRpdXMgKSAvIHJlc29sdXRpb24gKSApO1xcblxcdFxcdFxcdG1lYW4gKz0gZGVwdGg7XFxuXFx0XFx0XFx0c3F1YXJlZF9tZWFuICs9IGRlcHRoICogZGVwdGg7XFxuXFx0XFx0I2VuZGlmXFxuXFx0fVxcblxcdG1lYW4gPSBtZWFuICogSEFMRl9TQU1QTEVfUkFURTtcXG5cXHRzcXVhcmVkX21lYW4gPSBzcXVhcmVkX21lYW4gKiBIQUxGX1NBTVBMRV9SQVRFO1xcblxcdGZsb2F0IHN0ZF9kZXYgPSBzcXJ0KCBzcXVhcmVkX21lYW4gLSBtZWFuICogbWVhbiApO1xcblxcdGdsX0ZyYWdDb2xvciA9IHBhY2sySGFsZlRvUkdCQSggdmVjMiggbWVhbiwgc3RkX2RldiApICk7XFxufVwifSksdj1kLmNsb25lKCk7di5kZWZpbmVzLkhPUklaT05BTF9QQVNTPTE7Y29uc3QgeT1uZXcgcWk7eS5zZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBUaShuZXcgRmxvYXQzMkFycmF5KFstMSwtMSwuNSwzLC0xLC41LC0xLDMsLjVdKSwzKSk7Y29uc3QgYj1uZXcgaG8oeSxkKSx3PXRoaXM7ZnVuY3Rpb24gXyhuLHIpe2NvbnN0IGk9ZS51cGRhdGUoYik7ZC51bmlmb3Jtcy5zaGFkb3dfcGFzcy52YWx1ZT1uLm1hcC50ZXh0dXJlLGQudW5pZm9ybXMucmVzb2x1dGlvbi52YWx1ZT1uLm1hcFNpemUsZC51bmlmb3Jtcy5yYWRpdXMudmFsdWU9bi5yYWRpdXMsdC5zZXRSZW5kZXJUYXJnZXQobi5tYXBQYXNzKSx0LmNsZWFyKCksdC5yZW5kZXJCdWZmZXJEaXJlY3QocixudWxsLGksZCxiLG51bGwpLHYudW5pZm9ybXMuc2hhZG93X3Bhc3MudmFsdWU9bi5tYXBQYXNzLnRleHR1cmUsdi51bmlmb3Jtcy5yZXNvbHV0aW9uLnZhbHVlPW4ubWFwU2l6ZSx2LnVuaWZvcm1zLnJhZGl1cy52YWx1ZT1uLnJhZGl1cyx0LnNldFJlbmRlclRhcmdldChuLm1hcCksdC5jbGVhcigpLHQucmVuZGVyQnVmZmVyRGlyZWN0KHIsbnVsbCxpLHYsYixudWxsKX1mdW5jdGlvbiBNKHQsZSxuKXtjb25zdCByPXQ8PDB8ZTw8MXxuPDwyO2xldCBpPXNbcl07cmV0dXJuIHZvaWQgMD09PWkmJihpPW5ldyBTcyh7ZGVwdGhQYWNraW5nOmFuLG1vcnBoVGFyZ2V0czp0LHNraW5uaW5nOmV9KSxzW3JdPWkpLGl9ZnVuY3Rpb24gUyh0LGUsbil7Y29uc3Qgcj10PDwwfGU8PDF8bjw8MjtsZXQgaT1jW3JdO3JldHVybiB2b2lkIDA9PT1pJiYoaT1uZXcgVHMoe21vcnBoVGFyZ2V0czp0LHNraW5uaW5nOmV9KSxjW3JdPWkpLGl9ZnVuY3Rpb24gVChlLG4scixpLG8sYSxzKXtsZXQgYz1udWxsLGg9TSxkPWUuY3VzdG9tRGVwdGhNYXRlcmlhbDtpZighMD09PWkuaXNQb2ludExpZ2h0JiYoaD1TLGQ9ZS5jdXN0b21EaXN0YW5jZU1hdGVyaWFsKSx2b2lkIDA9PT1kKXtsZXQgdD0hMTshMD09PXIubW9ycGhUYXJnZXRzJiYodD1uLm1vcnBoQXR0cmlidXRlcyYmbi5tb3JwaEF0dHJpYnV0ZXMucG9zaXRpb24mJm4ubW9ycGhBdHRyaWJ1dGVzLnBvc2l0aW9uLmxlbmd0aD4wKTtsZXQgaT0hMTshMD09PWUuaXNTa2lubmVkTWVzaCYmKCEwPT09ci5za2lubmluZz9pPSEwOmNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMU2hhZG93TWFwOiBUSFJFRS5Ta2lubmVkTWVzaCB3aXRoIG1hdGVyaWFsLnNraW5uaW5nIHNldCB0byBmYWxzZTpcIixlKSk7Yz1oKHQsaSwhMD09PWUuaXNJbnN0YW5jZWRNZXNoKX1lbHNlIGM9ZDtpZih0LmxvY2FsQ2xpcHBpbmdFbmFibGVkJiYhMD09PXIuY2xpcFNoYWRvd3MmJjAhPT1yLmNsaXBwaW5nUGxhbmVzLmxlbmd0aCl7Y29uc3QgdD1jLnV1aWQsZT1yLnV1aWQ7bGV0IG49bFt0XTt2b2lkIDA9PT1uJiYobj17fSxsW3RdPW4pO2xldCBpPW5bZV07dm9pZCAwPT09aSYmKGk9Yy5jbG9uZSgpLG5bZV09aSksYz1pfXJldHVybiBjLnZpc2libGU9ci52aXNpYmxlLGMud2lyZWZyYW1lPXIud2lyZWZyYW1lLGMuc2lkZT1zPT09cD9udWxsIT09ci5zaGFkb3dTaWRlP3Iuc2hhZG93U2lkZTpyLnNpZGU6bnVsbCE9PXIuc2hhZG93U2lkZT9yLnNoYWRvd1NpZGU6dVtyLnNpZGVdLGMuY2xpcFNoYWRvd3M9ci5jbGlwU2hhZG93cyxjLmNsaXBwaW5nUGxhbmVzPXIuY2xpcHBpbmdQbGFuZXMsYy5jbGlwSW50ZXJzZWN0aW9uPXIuY2xpcEludGVyc2VjdGlvbixjLndpcmVmcmFtZUxpbmV3aWR0aD1yLndpcmVmcmFtZUxpbmV3aWR0aCxjLmxpbmV3aWR0aD1yLmxpbmV3aWR0aCwhMD09PWkuaXNQb2ludExpZ2h0JiYhMD09PWMuaXNNZXNoRGlzdGFuY2VNYXRlcmlhbCYmKGMucmVmZXJlbmNlUG9zaXRpb24uc2V0RnJvbU1hdHJpeFBvc2l0aW9uKGkubWF0cml4V29ybGQpLGMubmVhckRpc3RhbmNlPW8sYy5mYXJEaXN0YW5jZT1hKSxjfWZ1bmN0aW9uIEUobixpLG8sYSxzKXtpZighMT09PW4udmlzaWJsZSlyZXR1cm47aWYobi5sYXllcnMudGVzdChpLmxheWVycykmJihuLmlzTWVzaHx8bi5pc0xpbmV8fG4uaXNQb2ludHMpJiYobi5jYXN0U2hhZG93fHxuLnJlY2VpdmVTaGFkb3cmJnM9PT1wKSYmKCFuLmZydXN0dW1DdWxsZWR8fHIuaW50ZXJzZWN0c09iamVjdChuKSkpe24ubW9kZWxWaWV3TWF0cml4Lm11bHRpcGx5TWF0cmljZXMoby5tYXRyaXhXb3JsZEludmVyc2Usbi5tYXRyaXhXb3JsZCk7Y29uc3Qgcj1lLnVwZGF0ZShuKSxpPW4ubWF0ZXJpYWw7aWYoQXJyYXkuaXNBcnJheShpKSl7Y29uc3QgZT1yLmdyb3Vwcztmb3IobGV0IGM9MCxsPWUubGVuZ3RoO2M8bDtjKyspe2NvbnN0IGw9ZVtjXSx1PWlbbC5tYXRlcmlhbEluZGV4XTtpZih1JiZ1LnZpc2libGUpe2NvbnN0IGU9VChuLHIsdSxhLG8ubmVhcixvLmZhcixzKTt0LnJlbmRlckJ1ZmZlckRpcmVjdChvLG51bGwscixlLG4sbCl9fX1lbHNlIGlmKGkudmlzaWJsZSl7Y29uc3QgZT1UKG4scixpLGEsby5uZWFyLG8uZmFyLHMpO3QucmVuZGVyQnVmZmVyRGlyZWN0KG8sbnVsbCxyLGUsbixudWxsKX19Y29uc3QgYz1uLmNoaWxkcmVuO2ZvcihsZXQgdD0wLGU9Yy5sZW5ndGg7dDxlO3QrKylFKGNbdF0saSxvLGEscyl9dGhpcy5lbmFibGVkPSExLHRoaXMuYXV0b1VwZGF0ZT0hMCx0aGlzLm5lZWRzVXBkYXRlPSExLHRoaXMudHlwZT1oLHRoaXMucmVuZGVyPWZ1bmN0aW9uKGUscyxjKXtpZighMT09PXcuZW5hYmxlZClyZXR1cm47aWYoITE9PT13LmF1dG9VcGRhdGUmJiExPT09dy5uZWVkc1VwZGF0ZSlyZXR1cm47aWYoMD09PWUubGVuZ3RoKXJldHVybjtjb25zdCBsPXQuZ2V0UmVuZGVyVGFyZ2V0KCksdT10LmdldEFjdGl2ZUN1YmVGYWNlKCksaD10LmdldEFjdGl2ZU1pcG1hcExldmVsKCksZD10LnN0YXRlO2Quc2V0QmxlbmRpbmcoeCksZC5idWZmZXJzLmNvbG9yLnNldENsZWFyKDEsMSwxLDEpLGQuYnVmZmVycy5kZXB0aC5zZXRUZXN0KCEwKSxkLnNldFNjaXNzb3JUZXN0KCExKTtmb3IobGV0IGw9MCx1PWUubGVuZ3RoO2w8dTtsKyspe2NvbnN0IHU9ZVtsXSxoPXUuc2hhZG93O2lmKHZvaWQgMD09PWgpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMU2hhZG93TWFwOlwiLHUsXCJoYXMgbm8gc2hhZG93LlwiKTtjb250aW51ZX1pZighMT09PWguYXV0b1VwZGF0ZSYmITE9PT1oLm5lZWRzVXBkYXRlKWNvbnRpbnVlO2kuY29weShoLm1hcFNpemUpO2NvbnN0IGY9aC5nZXRGcmFtZUV4dGVudHMoKTtpZihpLm11bHRpcGx5KGYpLG8uY29weShoLm1hcFNpemUpLChpLng+bnx8aS55Pm4pJiYoaS54Pm4mJihvLng9TWF0aC5mbG9vcihuL2YueCksaS54PW8ueCpmLngsaC5tYXBTaXplLng9by54KSxpLnk+biYmKG8ueT1NYXRoLmZsb29yKG4vZi55KSxpLnk9by55KmYueSxoLm1hcFNpemUueT1vLnkpKSxudWxsPT09aC5tYXAmJiFoLmlzUG9pbnRMaWdodFNoYWRvdyYmdGhpcy50eXBlPT09cCl7Y29uc3QgdD17bWluRmlsdGVyOnh0LG1hZ0ZpbHRlcjp4dCxmb3JtYXQ6VXR9O2gubWFwPW5ldyBZbihpLngsaS55LHQpLGgubWFwLnRleHR1cmUubmFtZT11Lm5hbWUrXCIuc2hhZG93TWFwXCIsaC5tYXBQYXNzPW5ldyBZbihpLngsaS55LHQpLGguY2FtZXJhLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKX1pZihudWxsPT09aC5tYXApe2NvbnN0IHQ9e21pbkZpbHRlcjpmdCxtYWdGaWx0ZXI6ZnQsZm9ybWF0OlV0fTtoLm1hcD1uZXcgWW4oaS54LGkueSx0KSxoLm1hcC50ZXh0dXJlLm5hbWU9dS5uYW1lK1wiLnNoYWRvd01hcFwiLGguY2FtZXJhLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKX10LnNldFJlbmRlclRhcmdldChoLm1hcCksdC5jbGVhcigpO2NvbnN0IG09aC5nZXRWaWV3cG9ydENvdW50KCk7Zm9yKGxldCB0PTA7dDxtO3QrKyl7Y29uc3QgZT1oLmdldFZpZXdwb3J0KHQpO2Euc2V0KG8ueCplLngsby55KmUueSxvLngqZS56LG8ueSplLncpLGQudmlld3BvcnQoYSksaC51cGRhdGVNYXRyaWNlcyh1LHQpLHI9aC5nZXRGcnVzdHVtKCksRShzLGMsaC5jYW1lcmEsdSx0aGlzLnR5cGUpfWguaXNQb2ludExpZ2h0U2hhZG93fHx0aGlzLnR5cGUhPT1wfHxfKGgsYyksaC5uZWVkc1VwZGF0ZT0hMX13Lm5lZWRzVXBkYXRlPSExLHQuc2V0UmVuZGVyVGFyZ2V0KGwsdSxoKX19ZnVuY3Rpb24gQXModCxlLG4pe2NvbnN0IHI9bi5pc1dlYkdMMjtjb25zdCBpPW5ldyBmdW5jdGlvbigpe2xldCBlPSExO2NvbnN0IG49bmV3IHFuO2xldCByPW51bGw7Y29uc3QgaT1uZXcgcW4oMCwwLDAsMCk7cmV0dXJue3NldE1hc2s6ZnVuY3Rpb24obil7cj09PW58fGV8fCh0LmNvbG9yTWFzayhuLG4sbixuKSxyPW4pfSxzZXRMb2NrZWQ6ZnVuY3Rpb24odCl7ZT10fSxzZXRDbGVhcjpmdW5jdGlvbihlLHIsbyxhLHMpeyEwPT09cyYmKGUqPWEscio9YSxvKj1hKSxuLnNldChlLHIsbyxhKSwhMT09PWkuZXF1YWxzKG4pJiYodC5jbGVhckNvbG9yKGUscixvLGEpLGkuY29weShuKSl9LHJlc2V0OmZ1bmN0aW9uKCl7ZT0hMSxyPW51bGwsaS5zZXQoLTEsMCwwLDApfX19LG89bmV3IGZ1bmN0aW9uKCl7bGV0IGU9ITEsbj1udWxsLHI9bnVsbCxpPW51bGw7cmV0dXJue3NldFRlc3Q6ZnVuY3Rpb24odCl7dD9mdCgyOTI5KTptdCgyOTI5KX0sc2V0TWFzazpmdW5jdGlvbihyKXtuPT09cnx8ZXx8KHQuZGVwdGhNYXNrKHIpLG49cil9LHNldEZ1bmM6ZnVuY3Rpb24oZSl7aWYociE9PWUpe2lmKGUpc3dpdGNoKGUpe2Nhc2UgSDp0LmRlcHRoRnVuYyg1MTIpO2JyZWFrO2Nhc2Ugazp0LmRlcHRoRnVuYyg1MTkpO2JyZWFrO2Nhc2UgVjp0LmRlcHRoRnVuYyg1MTMpO2JyZWFrO2Nhc2Ugajp0LmRlcHRoRnVuYyg1MTUpO2JyZWFrO2Nhc2UgVzp0LmRlcHRoRnVuYyg1MTQpO2JyZWFrO2Nhc2UgWDp0LmRlcHRoRnVuYyg1MTgpO2JyZWFrO2Nhc2UgcTp0LmRlcHRoRnVuYyg1MTYpO2JyZWFrO2Nhc2UgWTp0LmRlcHRoRnVuYyg1MTcpO2JyZWFrO2RlZmF1bHQ6dC5kZXB0aEZ1bmMoNTE1KX1lbHNlIHQuZGVwdGhGdW5jKDUxNSk7cj1lfX0sc2V0TG9ja2VkOmZ1bmN0aW9uKHQpe2U9dH0sc2V0Q2xlYXI6ZnVuY3Rpb24oZSl7aSE9PWUmJih0LmNsZWFyRGVwdGgoZSksaT1lKX0scmVzZXQ6ZnVuY3Rpb24oKXtlPSExLG49bnVsbCxyPW51bGwsaT1udWxsfX19LGw9bmV3IGZ1bmN0aW9uKCl7bGV0IGU9ITEsbj1udWxsLHI9bnVsbCxpPW51bGwsbz1udWxsLGE9bnVsbCxzPW51bGwsYz1udWxsLGw9bnVsbDtyZXR1cm57c2V0VGVzdDpmdW5jdGlvbih0KXtlfHwodD9mdCgyOTYwKTptdCgyOTYwKSl9LHNldE1hc2s6ZnVuY3Rpb24ocil7bj09PXJ8fGV8fCh0LnN0ZW5jaWxNYXNrKHIpLG49cil9LHNldEZ1bmM6ZnVuY3Rpb24oZSxuLGEpe3I9PT1lJiZpPT09biYmbz09PWF8fCh0LnN0ZW5jaWxGdW5jKGUsbixhKSxyPWUsaT1uLG89YSl9LHNldE9wOmZ1bmN0aW9uKGUsbixyKXthPT09ZSYmcz09PW4mJmM9PT1yfHwodC5zdGVuY2lsT3AoZSxuLHIpLGE9ZSxzPW4sYz1yKX0sc2V0TG9ja2VkOmZ1bmN0aW9uKHQpe2U9dH0sc2V0Q2xlYXI6ZnVuY3Rpb24oZSl7bCE9PWUmJih0LmNsZWFyU3RlbmNpbChlKSxsPWUpfSxyZXNldDpmdW5jdGlvbigpe2U9ITEsbj1udWxsLHI9bnVsbCxpPW51bGwsbz1udWxsLGE9bnVsbCxzPW51bGwsYz1udWxsLGw9bnVsbH19fTtsZXQgdT17fSxoPW51bGwsZD1udWxsLHA9bnVsbCxmPW51bGwsdj1udWxsLHk9bnVsbCxaPW51bGwsSj1udWxsLEs9bnVsbCxRPSExLCQ9bnVsbCx0dD1udWxsLGV0PW51bGwsbnQ9bnVsbCxydD1udWxsO2NvbnN0IGl0PXQuZ2V0UGFyYW1ldGVyKDM1NjYxKTtsZXQgb3Q9ITEsYXQ9MDtjb25zdCBzdD10LmdldFBhcmFtZXRlcig3OTM4KTstMSE9PXN0LmluZGV4T2YoXCJXZWJHTFwiKT8oYXQ9cGFyc2VGbG9hdCgvXldlYkdMXFwgKFswLTldKS8uZXhlYyhzdClbMV0pLG90PWF0Pj0xKTotMSE9PXN0LmluZGV4T2YoXCJPcGVuR0wgRVNcIikmJihhdD1wYXJzZUZsb2F0KC9eT3BlbkdMXFwgRVNcXCAoWzAtOV0pLy5leGVjKHN0KVsxXSksb3Q9YXQ+PTIpO2xldCBjdD1udWxsLGx0PXt9O2NvbnN0IHV0PW5ldyBxbixodD1uZXcgcW47ZnVuY3Rpb24gZHQoZSxuLHIpe2NvbnN0IGk9bmV3IFVpbnQ4QXJyYXkoNCksbz10LmNyZWF0ZVRleHR1cmUoKTt0LmJpbmRUZXh0dXJlKGUsbyksdC50ZXhQYXJhbWV0ZXJpKGUsMTAyNDEsOTcyOCksdC50ZXhQYXJhbWV0ZXJpKGUsMTAyNDAsOTcyOCk7Zm9yKGxldCBlPTA7ZTxyO2UrKyl0LnRleEltYWdlMkQobitlLDAsNjQwOCwxLDEsMCw2NDA4LDUxMjEsaSk7cmV0dXJuIG99Y29uc3QgcHQ9e307ZnVuY3Rpb24gZnQoZSl7ITAhPT11W2VdJiYodC5lbmFibGUoZSksdVtlXT0hMCl9ZnVuY3Rpb24gbXQoZSl7ITEhPT11W2VdJiYodC5kaXNhYmxlKGUpLHVbZV09ITEpfXB0WzM1NTNdPWR0KDM1NTMsMzU1MywxKSxwdFszNDA2N109ZHQoMzQwNjcsMzQwNjksNiksaS5zZXRDbGVhcigwLDAsMCwxKSxvLnNldENsZWFyKDEpLGwuc2V0Q2xlYXIoMCksZnQoMjkyOSksby5zZXRGdW5jKGopLHh0KCExKSxidChzKSxmdCgyODg0KSx5dCh4KTtjb25zdCBndD17W1RdOjMyNzc0LFtFXTozMjc3OCxbQV06MzI3Nzl9O2lmKHIpZ3RbTF09MzI3NzUsZ3RbUl09MzI3NzY7ZWxzZXtjb25zdCB0PWUuZ2V0KFwiRVhUX2JsZW5kX21pbm1heFwiKTtudWxsIT09dCYmKGd0W0xdPXQuTUlOX0VYVCxndFtSXT10Lk1BWF9FWFQpfWNvbnN0IHZ0PXtbUF06MCxbQ106MSxbSV06NzY4LFtOXTo3NzAsW0ddOjc3NixbVV06Nzc0LFtCXTo3NzIsW09dOjc2OSxbRF06NzcxLFt6XTo3NzUsW0ZdOjc3M307ZnVuY3Rpb24geXQoZSxuLHIsaSxvLGEscyxjKXtpZihlIT09eCl7aWYoZHx8KGZ0KDMwNDIpLGQ9ITApLGU9PT1TKW89b3x8bixhPWF8fHIscz1zfHxpLG49PT1mJiZvPT09Wnx8KHQuYmxlbmRFcXVhdGlvblNlcGFyYXRlKGd0W25dLGd0W29dKSxmPW4sWj1vKSxyPT09diYmaT09PXkmJmE9PT1KJiZzPT09S3x8KHQuYmxlbmRGdW5jU2VwYXJhdGUodnRbcl0sdnRbaV0sdnRbYV0sdnRbc10pLHY9cix5PWksSj1hLEs9cykscD1lLFE9bnVsbDtlbHNlIGlmKGUhPT1wfHxjIT09USl7aWYoZj09PVQmJlo9PT1UfHwodC5ibGVuZEVxdWF0aW9uKDMyNzc0KSxmPVQsWj1UKSxjKXN3aXRjaChlKXtjYXNlIGI6dC5ibGVuZEZ1bmNTZXBhcmF0ZSgxLDc3MSwxLDc3MSk7YnJlYWs7Y2FzZSB3OnQuYmxlbmRGdW5jKDEsMSk7YnJlYWs7Y2FzZSBfOnQuYmxlbmRGdW5jU2VwYXJhdGUoMCwwLDc2OSw3NzEpO2JyZWFrO2Nhc2UgTTp0LmJsZW5kRnVuY1NlcGFyYXRlKDAsNzY4LDAsNzcwKTticmVhaztkZWZhdWx0OmNvbnNvbGUuZXJyb3IoXCJUSFJFRS5XZWJHTFN0YXRlOiBJbnZhbGlkIGJsZW5kaW5nOiBcIixlKX1lbHNlIHN3aXRjaChlKXtjYXNlIGI6dC5ibGVuZEZ1bmNTZXBhcmF0ZSg3NzAsNzcxLDEsNzcxKTticmVhaztjYXNlIHc6dC5ibGVuZEZ1bmMoNzcwLDEpO2JyZWFrO2Nhc2UgXzp0LmJsZW5kRnVuYygwLDc2OSk7YnJlYWs7Y2FzZSBNOnQuYmxlbmRGdW5jKDAsNzY4KTticmVhaztkZWZhdWx0OmNvbnNvbGUuZXJyb3IoXCJUSFJFRS5XZWJHTFN0YXRlOiBJbnZhbGlkIGJsZW5kaW5nOiBcIixlKX12PW51bGwseT1udWxsLEo9bnVsbCxLPW51bGwscD1lLFE9Y319ZWxzZSBkJiYobXQoMzA0MiksZD0hMSl9ZnVuY3Rpb24geHQoZSl7JCE9PWUmJihlP3QuZnJvbnRGYWNlKDIzMDQpOnQuZnJvbnRGYWNlKDIzMDUpLCQ9ZSl9ZnVuY3Rpb24gYnQoZSl7ZSE9PWE/KGZ0KDI4ODQpLGUhPT10dCYmKGU9PT1zP3QuY3VsbEZhY2UoMTAyOSk6ZT09PWM/dC5jdWxsRmFjZSgxMDI4KTp0LmN1bGxGYWNlKDEwMzIpKSk6bXQoMjg4NCksdHQ9ZX1mdW5jdGlvbiB3dChlLG4scil7ZT8oZnQoMzI4MjMpLG50PT09biYmcnQ9PT1yfHwodC5wb2x5Z29uT2Zmc2V0KG4sciksbnQ9bixydD1yKSk6bXQoMzI4MjMpfWZ1bmN0aW9uIF90KGUpe3ZvaWQgMD09PWUmJihlPTMzOTg0K2l0LTEpLGN0IT09ZSYmKHQuYWN0aXZlVGV4dHVyZShlKSxjdD1lKX1yZXR1cm57YnVmZmVyczp7Y29sb3I6aSxkZXB0aDpvLHN0ZW5jaWw6bH0sZW5hYmxlOmZ0LGRpc2FibGU6bXQsdXNlUHJvZ3JhbTpmdW5jdGlvbihlKXtyZXR1cm4gaCE9PWUmJih0LnVzZVByb2dyYW0oZSksaD1lLCEwKX0sc2V0QmxlbmRpbmc6eXQsc2V0TWF0ZXJpYWw6ZnVuY3Rpb24odCxlKXt0LnNpZGU9PT1nP210KDI4ODQpOmZ0KDI4ODQpO2xldCBuPXQuc2lkZT09PW07ZSYmKG49IW4pLHh0KG4pLHQuYmxlbmRpbmc9PT1iJiYhMT09PXQudHJhbnNwYXJlbnQ/eXQoeCk6eXQodC5ibGVuZGluZyx0LmJsZW5kRXF1YXRpb24sdC5ibGVuZFNyYyx0LmJsZW5kRHN0LHQuYmxlbmRFcXVhdGlvbkFscGhhLHQuYmxlbmRTcmNBbHBoYSx0LmJsZW5kRHN0QWxwaGEsdC5wcmVtdWx0aXBsaWVkQWxwaGEpLG8uc2V0RnVuYyh0LmRlcHRoRnVuYyksby5zZXRUZXN0KHQuZGVwdGhUZXN0KSxvLnNldE1hc2sodC5kZXB0aFdyaXRlKSxpLnNldE1hc2sodC5jb2xvcldyaXRlKTtjb25zdCByPXQuc3RlbmNpbFdyaXRlO2wuc2V0VGVzdChyKSxyJiYobC5zZXRNYXNrKHQuc3RlbmNpbFdyaXRlTWFzayksbC5zZXRGdW5jKHQuc3RlbmNpbEZ1bmMsdC5zdGVuY2lsUmVmLHQuc3RlbmNpbEZ1bmNNYXNrKSxsLnNldE9wKHQuc3RlbmNpbEZhaWwsdC5zdGVuY2lsWkZhaWwsdC5zdGVuY2lsWlBhc3MpKSx3dCh0LnBvbHlnb25PZmZzZXQsdC5wb2x5Z29uT2Zmc2V0RmFjdG9yLHQucG9seWdvbk9mZnNldFVuaXRzKX0sc2V0RmxpcFNpZGVkOnh0LHNldEN1bGxGYWNlOmJ0LHNldExpbmVXaWR0aDpmdW5jdGlvbihlKXtlIT09ZXQmJihvdCYmdC5saW5lV2lkdGgoZSksZXQ9ZSl9LHNldFBvbHlnb25PZmZzZXQ6d3Qsc2V0U2Npc3NvclRlc3Q6ZnVuY3Rpb24odCl7dD9mdCgzMDg5KTptdCgzMDg5KX0sYWN0aXZlVGV4dHVyZTpfdCxiaW5kVGV4dHVyZTpmdW5jdGlvbihlLG4pe251bGw9PT1jdCYmX3QoKTtsZXQgcj1sdFtjdF07dm9pZCAwPT09ciYmKHI9e3R5cGU6dm9pZCAwLHRleHR1cmU6dm9pZCAwfSxsdFtjdF09ciksci50eXBlPT09ZSYmci50ZXh0dXJlPT09bnx8KHQuYmluZFRleHR1cmUoZSxufHxwdFtlXSksci50eXBlPWUsci50ZXh0dXJlPW4pfSx1bmJpbmRUZXh0dXJlOmZ1bmN0aW9uKCl7Y29uc3QgZT1sdFtjdF07dm9pZCAwIT09ZSYmdm9pZCAwIT09ZS50eXBlJiYodC5iaW5kVGV4dHVyZShlLnR5cGUsbnVsbCksZS50eXBlPXZvaWQgMCxlLnRleHR1cmU9dm9pZCAwKX0sY29tcHJlc3NlZFRleEltYWdlMkQ6ZnVuY3Rpb24oKXt0cnl7dC5jb21wcmVzc2VkVGV4SW1hZ2UyRC5hcHBseSh0LGFyZ3VtZW50cyl9Y2F0Y2godCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLldlYkdMU3RhdGU6XCIsdCl9fSx0ZXhJbWFnZTJEOmZ1bmN0aW9uKCl7dHJ5e3QudGV4SW1hZ2UyRC5hcHBseSh0LGFyZ3VtZW50cyl9Y2F0Y2godCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLldlYkdMU3RhdGU6XCIsdCl9fSx0ZXhJbWFnZTNEOmZ1bmN0aW9uKCl7dHJ5e3QudGV4SW1hZ2UzRC5hcHBseSh0LGFyZ3VtZW50cyl9Y2F0Y2godCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLldlYkdMU3RhdGU6XCIsdCl9fSxzY2lzc29yOmZ1bmN0aW9uKGUpeyExPT09dXQuZXF1YWxzKGUpJiYodC5zY2lzc29yKGUueCxlLnksZS56LGUudyksdXQuY29weShlKSl9LHZpZXdwb3J0OmZ1bmN0aW9uKGUpeyExPT09aHQuZXF1YWxzKGUpJiYodC52aWV3cG9ydChlLngsZS55LGUueixlLncpLGh0LmNvcHkoZSkpfSxyZXNldDpmdW5jdGlvbigpe3U9e30sY3Q9bnVsbCxsdD17fSxoPW51bGwsZD1udWxsLHA9bnVsbCxmPW51bGwsdj1udWxsLHk9bnVsbCxaPW51bGwsSj1udWxsLEs9bnVsbCxRPSExLCQ9bnVsbCx0dD1udWxsLGV0PW51bGwsbnQ9bnVsbCxydD1udWxsLGkucmVzZXQoKSxvLnJlc2V0KCksbC5yZXNldCgpfX19ZnVuY3Rpb24gTHModCxlLG4scixpLG8sYSl7Y29uc3Qgcz1pLmlzV2ViR0wyLGM9aS5tYXhUZXh0dXJlcyxsPWkubWF4Q3ViZW1hcFNpemUsdT1pLm1heFRleHR1cmVTaXplLGg9aS5tYXhTYW1wbGVzLGQ9bmV3IFdlYWtNYXA7bGV0IHAsZj0hMTt0cnl7Zj1cInVuZGVmaW5lZFwiIT10eXBlb2YgT2Zmc2NyZWVuQ2FudmFzJiZudWxsIT09bmV3IE9mZnNjcmVlbkNhbnZhcygxLDEpLmdldENvbnRleHQoXCIyZFwiKX1jYXRjaCh0KXt9ZnVuY3Rpb24gbSh0LGUpe3JldHVybiBmP25ldyBPZmZzY3JlZW5DYW52YXModCxlKTpkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sXCIsXCJjYW52YXNcIil9ZnVuY3Rpb24gZyh0LGUsbixyKXtsZXQgaT0xO2lmKCh0LndpZHRoPnJ8fHQuaGVpZ2h0PnIpJiYoaT1yL01hdGgubWF4KHQud2lkdGgsdC5oZWlnaHQpKSxpPDF8fCEwPT09ZSl7aWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIEhUTUxJbWFnZUVsZW1lbnQmJnQgaW5zdGFuY2VvZiBIVE1MSW1hZ2VFbGVtZW50fHxcInVuZGVmaW5lZFwiIT10eXBlb2YgSFRNTENhbnZhc0VsZW1lbnQmJnQgaW5zdGFuY2VvZiBIVE1MQ2FudmFzRWxlbWVudHx8XCJ1bmRlZmluZWRcIiE9dHlwZW9mIEltYWdlQml0bWFwJiZ0IGluc3RhbmNlb2YgSW1hZ2VCaXRtYXApe2NvbnN0IHI9ZT96bi5mbG9vclBvd2VyT2ZUd286TWF0aC5mbG9vcixvPXIoaSp0LndpZHRoKSxhPXIoaSp0LmhlaWdodCk7dm9pZCAwPT09cCYmKHA9bShvLGEpKTtjb25zdCBzPW4/bShvLGEpOnA7cy53aWR0aD1vLHMuaGVpZ2h0PWE7cmV0dXJuIHMuZ2V0Q29udGV4dChcIjJkXCIpLmRyYXdJbWFnZSh0LDAsMCxvLGEpLGNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IFRleHR1cmUgaGFzIGJlZW4gcmVzaXplZCBmcm9tIChcIit0LndpZHRoK1wieFwiK3QuaGVpZ2h0K1wiKSB0byAoXCIrbytcInhcIithK1wiKS5cIiksc31yZXR1cm5cImRhdGFcImluIHQmJmNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IEltYWdlIGluIERhdGFUZXh0dXJlIGlzIHRvbyBiaWcgKFwiK3Qud2lkdGgrXCJ4XCIrdC5oZWlnaHQrXCIpLlwiKSx0fXJldHVybiB0fWZ1bmN0aW9uIHYodCl7cmV0dXJuIHpuLmlzUG93ZXJPZlR3byh0LndpZHRoKSYmem4uaXNQb3dlck9mVHdvKHQuaGVpZ2h0KX1mdW5jdGlvbiB5KHQsZSl7cmV0dXJuIHQuZ2VuZXJhdGVNaXBtYXBzJiZlJiZ0Lm1pbkZpbHRlciE9PWZ0JiZ0Lm1pbkZpbHRlciE9PXh0fWZ1bmN0aW9uIHgoZSxuLGksbyl7dC5nZW5lcmF0ZU1pcG1hcChlKTtyLmdldChuKS5fX21heE1pcExldmVsPU1hdGgubG9nKE1hdGgubWF4KGksbykpKk1hdGguTE9HMkV9ZnVuY3Rpb24gYihuLHIsaSl7aWYoITE9PT1zKXJldHVybiByO2lmKG51bGwhPT1uKXtpZih2b2lkIDAhPT10W25dKXJldHVybiB0W25dO2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IEF0dGVtcHQgdG8gdXNlIG5vbi1leGlzdGluZyBXZWJHTCBpbnRlcm5hbCBmb3JtYXQgJ1wiK24rXCInXCIpfWxldCBvPXI7cmV0dXJuIDY0MDM9PT1yJiYoNTEyNj09PWkmJihvPTMzMzI2KSw1MTMxPT09aSYmKG89MzMzMjUpLDUxMjE9PT1pJiYobz0zMzMyMSkpLDY0MDc9PT1yJiYoNTEyNj09PWkmJihvPTM0ODM3KSw1MTMxPT09aSYmKG89MzQ4NDMpLDUxMjE9PT1pJiYobz0zMjg0OSkpLDY0MDg9PT1yJiYoNTEyNj09PWkmJihvPTM0ODM2KSw1MTMxPT09aSYmKG89MzQ4NDIpLDUxMjE9PT1pJiYobz0zMjg1NikpLDMzMzI1IT09byYmMzMzMjYhPT1vJiYzNDg0MiE9PW8mJjM0ODM2IT09b3x8ZS5nZXQoXCJFWFRfY29sb3JfYnVmZmVyX2Zsb2F0XCIpLG99ZnVuY3Rpb24gdyh0KXtyZXR1cm4gdD09PWZ0fHx0PT09bXR8fHQ9PT12dD85NzI4Ojk3Mjl9ZnVuY3Rpb24gXyhlKXtjb25zdCBuPWUudGFyZ2V0O24ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImRpc3Bvc2VcIixfKSxmdW5jdGlvbihlKXtjb25zdCBuPXIuZ2V0KGUpO2lmKHZvaWQgMD09PW4uX193ZWJnbEluaXQpcmV0dXJuO3QuZGVsZXRlVGV4dHVyZShuLl9fd2ViZ2xUZXh0dXJlKSxyLnJlbW92ZShlKX0obiksbi5pc1ZpZGVvVGV4dHVyZSYmZC5kZWxldGUobiksYS5tZW1vcnkudGV4dHVyZXMtLX1mdW5jdGlvbiBNKGUpe2NvbnN0IG49ZS50YXJnZXQ7bi5yZW1vdmVFdmVudExpc3RlbmVyKFwiZGlzcG9zZVwiLE0pLGZ1bmN0aW9uKGUpe2NvbnN0IG49ci5nZXQoZSksaT1yLmdldChlLnRleHR1cmUpO2lmKCFlKXJldHVybjt2b2lkIDAhPT1pLl9fd2ViZ2xUZXh0dXJlJiZ0LmRlbGV0ZVRleHR1cmUoaS5fX3dlYmdsVGV4dHVyZSk7ZS5kZXB0aFRleHR1cmUmJmUuZGVwdGhUZXh0dXJlLmRpc3Bvc2UoKTtpZihlLmlzV2ViR0xDdWJlUmVuZGVyVGFyZ2V0KWZvcihsZXQgZT0wO2U8NjtlKyspdC5kZWxldGVGcmFtZWJ1ZmZlcihuLl9fd2ViZ2xGcmFtZWJ1ZmZlcltlXSksbi5fX3dlYmdsRGVwdGhidWZmZXImJnQuZGVsZXRlUmVuZGVyYnVmZmVyKG4uX193ZWJnbERlcHRoYnVmZmVyW2VdKTtlbHNlIHQuZGVsZXRlRnJhbWVidWZmZXIobi5fX3dlYmdsRnJhbWVidWZmZXIpLG4uX193ZWJnbERlcHRoYnVmZmVyJiZ0LmRlbGV0ZVJlbmRlcmJ1ZmZlcihuLl9fd2ViZ2xEZXB0aGJ1ZmZlciksbi5fX3dlYmdsTXVsdGlzYW1wbGVkRnJhbWVidWZmZXImJnQuZGVsZXRlRnJhbWVidWZmZXIobi5fX3dlYmdsTXVsdGlzYW1wbGVkRnJhbWVidWZmZXIpLG4uX193ZWJnbENvbG9yUmVuZGVyYnVmZmVyJiZ0LmRlbGV0ZVJlbmRlcmJ1ZmZlcihuLl9fd2ViZ2xDb2xvclJlbmRlcmJ1ZmZlciksbi5fX3dlYmdsRGVwdGhSZW5kZXJidWZmZXImJnQuZGVsZXRlUmVuZGVyYnVmZmVyKG4uX193ZWJnbERlcHRoUmVuZGVyYnVmZmVyKTtyLnJlbW92ZShlLnRleHR1cmUpLHIucmVtb3ZlKGUpfShuKSxhLm1lbW9yeS50ZXh0dXJlcy0tfWxldCBTPTA7ZnVuY3Rpb24gVCh0LGUpe2NvbnN0IGk9ci5nZXQodCk7aWYodC5pc1ZpZGVvVGV4dHVyZSYmZnVuY3Rpb24odCl7Y29uc3QgZT1hLnJlbmRlci5mcmFtZTtkLmdldCh0KSE9PWUmJihkLnNldCh0LGUpLHQudXBkYXRlKCkpfSh0KSx0LnZlcnNpb24+MCYmaS5fX3ZlcnNpb24hPT10LnZlcnNpb24pe2NvbnN0IG49dC5pbWFnZTtpZih2b2lkIDA9PT1uKWNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IFRleHR1cmUgbWFya2VkIGZvciB1cGRhdGUgYnV0IGltYWdlIGlzIHVuZGVmaW5lZFwiKTtlbHNle2lmKCExIT09bi5jb21wbGV0ZSlyZXR1cm4gdm9pZCBDKGksdCxlKTtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiBUZXh0dXJlIG1hcmtlZCBmb3IgdXBkYXRlIGJ1dCBpbWFnZSBpcyBpbmNvbXBsZXRlXCIpfX1uLmFjdGl2ZVRleHR1cmUoMzM5ODQrZSksbi5iaW5kVGV4dHVyZSgzNTUzLGkuX193ZWJnbFRleHR1cmUpfWZ1bmN0aW9uIEUoZSxpKXtjb25zdCBhPXIuZ2V0KGUpO2UudmVyc2lvbj4wJiZhLl9fdmVyc2lvbiE9PWUudmVyc2lvbj9mdW5jdGlvbihlLHIsaSl7aWYoNiE9PXIuaW1hZ2UubGVuZ3RoKXJldHVybjtQKGUsciksbi5hY3RpdmVUZXh0dXJlKDMzOTg0K2kpLG4uYmluZFRleHR1cmUoMzQwNjcsZS5fX3dlYmdsVGV4dHVyZSksdC5waXhlbFN0b3JlaSgzNzQ0MCxyLmZsaXBZKTtjb25zdCBhPXImJihyLmlzQ29tcHJlc3NlZFRleHR1cmV8fHIuaW1hZ2VbMF0uaXNDb21wcmVzc2VkVGV4dHVyZSksYz1yLmltYWdlWzBdJiZyLmltYWdlWzBdLmlzRGF0YVRleHR1cmUsdT1bXTtmb3IobGV0IHQ9MDt0PDY7dCsrKXVbdF09YXx8Yz9jP3IuaW1hZ2VbdF0uaW1hZ2U6ci5pbWFnZVt0XTpnKHIuaW1hZ2VbdF0sITEsITAsbCk7Y29uc3QgaD11WzBdLGQ9dihoKXx8cyxwPW8uY29udmVydChyLmZvcm1hdCksZj1vLmNvbnZlcnQoci50eXBlKSxtPWIoci5pbnRlcm5hbEZvcm1hdCxwLGYpO2xldCB3O2lmKFIoMzQwNjcscixkKSxhKXtmb3IobGV0IHQ9MDt0PDY7dCsrKXt3PXVbdF0ubWlwbWFwcztmb3IobGV0IGU9MDtlPHcubGVuZ3RoO2UrKyl7Y29uc3QgaT13W2VdO3IuZm9ybWF0IT09VXQmJnIuZm9ybWF0IT09RnQ/bnVsbCE9PXA/bi5jb21wcmVzc2VkVGV4SW1hZ2UyRCgzNDA2OSt0LGUsbSxpLndpZHRoLGkuaGVpZ2h0LDAsaS5kYXRhKTpjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiBBdHRlbXB0IHRvIGxvYWQgdW5zdXBwb3J0ZWQgY29tcHJlc3NlZCB0ZXh0dXJlIGZvcm1hdCBpbiAuc2V0VGV4dHVyZUN1YmUoKVwiKTpuLnRleEltYWdlMkQoMzQwNjkrdCxlLG0saS53aWR0aCxpLmhlaWdodCwwLHAsZixpLmRhdGEpfX1lLl9fbWF4TWlwTGV2ZWw9dy5sZW5ndGgtMX1lbHNle3c9ci5taXBtYXBzO2ZvcihsZXQgdD0wO3Q8Njt0KyspaWYoYyl7bi50ZXhJbWFnZTJEKDM0MDY5K3QsMCxtLHVbdF0ud2lkdGgsdVt0XS5oZWlnaHQsMCxwLGYsdVt0XS5kYXRhKTtmb3IobGV0IGU9MDtlPHcubGVuZ3RoO2UrKyl7Y29uc3Qgcj13W2VdLmltYWdlW3RdLmltYWdlO24udGV4SW1hZ2UyRCgzNDA2OSt0LGUrMSxtLHIud2lkdGgsci5oZWlnaHQsMCxwLGYsci5kYXRhKX19ZWxzZXtuLnRleEltYWdlMkQoMzQwNjkrdCwwLG0scCxmLHVbdF0pO2ZvcihsZXQgZT0wO2U8dy5sZW5ndGg7ZSsrKXtjb25zdCByPXdbZV07bi50ZXhJbWFnZTJEKDM0MDY5K3QsZSsxLG0scCxmLHIuaW1hZ2VbdF0pfX1lLl9fbWF4TWlwTGV2ZWw9dy5sZW5ndGh9eShyLGQpJiZ4KDM0MDY3LHIsaC53aWR0aCxoLmhlaWdodCk7ZS5fX3ZlcnNpb249ci52ZXJzaW9uLHIub25VcGRhdGUmJnIub25VcGRhdGUocil9KGEsZSxpKToobi5hY3RpdmVUZXh0dXJlKDMzOTg0K2kpLG4uYmluZFRleHR1cmUoMzQwNjcsYS5fX3dlYmdsVGV4dHVyZSkpfWNvbnN0IEE9e1todF06MTA0OTcsW2R0XTozMzA3MSxbcHRdOjMzNjQ4fSxMPXtbZnRdOjk3MjgsW210XTo5OTg0LFt2dF06OTk4NixbeHRdOjk3MjksW2J0XTo5OTg1LFtfdF06OTk4N307ZnVuY3Rpb24gUihuLG8sYSl7YT8odC50ZXhQYXJhbWV0ZXJpKG4sMTAyNDIsQVtvLndyYXBTXSksdC50ZXhQYXJhbWV0ZXJpKG4sMTAyNDMsQVtvLndyYXBUXSksMzI4NzkhPT1uJiYzNTg2NiE9PW58fHQudGV4UGFyYW1ldGVyaShuLDMyODgyLEFbby53cmFwUl0pLHQudGV4UGFyYW1ldGVyaShuLDEwMjQwLExbby5tYWdGaWx0ZXJdKSx0LnRleFBhcmFtZXRlcmkobiwxMDI0MSxMW28ubWluRmlsdGVyXSkpOih0LnRleFBhcmFtZXRlcmkobiwxMDI0MiwzMzA3MSksdC50ZXhQYXJhbWV0ZXJpKG4sMTAyNDMsMzMwNzEpLDMyODc5IT09biYmMzU4NjYhPT1ufHx0LnRleFBhcmFtZXRlcmkobiwzMjg4MiwzMzA3MSksby53cmFwUz09PWR0JiZvLndyYXBUPT09ZHR8fGNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IFRleHR1cmUgaXMgbm90IHBvd2VyIG9mIHR3by4gVGV4dHVyZS53cmFwUyBhbmQgVGV4dHVyZS53cmFwVCBzaG91bGQgYmUgc2V0IHRvIFRIUkVFLkNsYW1wVG9FZGdlV3JhcHBpbmcuXCIpLHQudGV4UGFyYW1ldGVyaShuLDEwMjQwLHcoby5tYWdGaWx0ZXIpKSx0LnRleFBhcmFtZXRlcmkobiwxMDI0MSx3KG8ubWluRmlsdGVyKSksby5taW5GaWx0ZXIhPT1mdCYmby5taW5GaWx0ZXIhPT14dCYmY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogVGV4dHVyZSBpcyBub3QgcG93ZXIgb2YgdHdvLiBUZXh0dXJlLm1pbkZpbHRlciBzaG91bGQgYmUgc2V0IHRvIFRIUkVFLk5lYXJlc3RGaWx0ZXIgb3IgVEhSRUUuTGluZWFyRmlsdGVyLlwiKSk7Y29uc3QgYz1lLmdldChcIkVYVF90ZXh0dXJlX2ZpbHRlcl9hbmlzb3Ryb3BpY1wiKTtpZihjKXtpZihvLnR5cGU9PT1QdCYmbnVsbD09PWUuZ2V0KFwiT0VTX3RleHR1cmVfZmxvYXRfbGluZWFyXCIpKXJldHVybjtpZihvLnR5cGU9PT1DdCYmbnVsbD09PShzfHxlLmdldChcIk9FU190ZXh0dXJlX2hhbGZfZmxvYXRfbGluZWFyXCIpKSlyZXR1cm47KG8uYW5pc290cm9weT4xfHxyLmdldChvKS5fX2N1cnJlbnRBbmlzb3Ryb3B5KSYmKHQudGV4UGFyYW1ldGVyZihuLGMuVEVYVFVSRV9NQVhfQU5JU09UUk9QWV9FWFQsTWF0aC5taW4oby5hbmlzb3Ryb3B5LGkuZ2V0TWF4QW5pc290cm9weSgpKSksci5nZXQobykuX19jdXJyZW50QW5pc290cm9weT1vLmFuaXNvdHJvcHkpfX1mdW5jdGlvbiBQKGUsbil7dm9pZCAwPT09ZS5fX3dlYmdsSW5pdCYmKGUuX193ZWJnbEluaXQ9ITAsbi5hZGRFdmVudExpc3RlbmVyKFwiZGlzcG9zZVwiLF8pLGUuX193ZWJnbFRleHR1cmU9dC5jcmVhdGVUZXh0dXJlKCksYS5tZW1vcnkudGV4dHVyZXMrKyl9ZnVuY3Rpb24gQyhlLHIsaSl7bGV0IGE9MzU1MztyLmlzRGF0YVRleHR1cmUyREFycmF5JiYoYT0zNTg2Niksci5pc0RhdGFUZXh0dXJlM0QmJihhPTMyODc5KSxQKGUsciksbi5hY3RpdmVUZXh0dXJlKDMzOTg0K2kpLG4uYmluZFRleHR1cmUoYSxlLl9fd2ViZ2xUZXh0dXJlKSx0LnBpeGVsU3RvcmVpKDM3NDQwLHIuZmxpcFkpLHQucGl4ZWxTdG9yZWkoMzc0NDEsci5wcmVtdWx0aXBseUFscGhhKSx0LnBpeGVsU3RvcmVpKDMzMTcsci51bnBhY2tBbGlnbm1lbnQpO2NvbnN0IGM9ZnVuY3Rpb24odCl7cmV0dXJuIXMmJih0LndyYXBTIT09ZHR8fHQud3JhcFQhPT1kdHx8dC5taW5GaWx0ZXIhPT1mdCYmdC5taW5GaWx0ZXIhPT14dCl9KHIpJiYhMT09PXYoci5pbWFnZSksbD1nKHIuaW1hZ2UsYywhMSx1KSxoPXYobCl8fHMsZD1vLmNvbnZlcnQoci5mb3JtYXQpO2xldCBwLGY9by5jb252ZXJ0KHIudHlwZSksbT1iKHIuaW50ZXJuYWxGb3JtYXQsZCxmKTtSKGEscixoKTtjb25zdCB3PXIubWlwbWFwcztpZihyLmlzRGVwdGhUZXh0dXJlKW09NjQwMixzP209ci50eXBlPT09UHQ/MzYwMTI6ci50eXBlPT09UnQ/MzMxOTA6ci50eXBlPT09RHQ/MzUwNTY6MzMxODk6ci50eXBlPT09UHQmJmNvbnNvbGUuZXJyb3IoXCJXZWJHTFJlbmRlcmVyOiBGbG9hdGluZyBwb2ludCBkZXB0aCB0ZXh0dXJlIHJlcXVpcmVzIFdlYkdMMi5cIiksci5mb3JtYXQ9PT1rdCYmNjQwMj09PW0mJnIudHlwZSE9PUF0JiZyLnR5cGUhPT1SdCYmKGNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IFVzZSBVbnNpZ25lZFNob3J0VHlwZSBvciBVbnNpZ25lZEludFR5cGUgZm9yIERlcHRoRm9ybWF0IERlcHRoVGV4dHVyZS5cIiksci50eXBlPUF0LGY9by5jb252ZXJ0KHIudHlwZSkpLHIuZm9ybWF0PT09VnQmJjY0MDI9PT1tJiYobT0zNDA0MSxyLnR5cGUhPT1EdCYmKGNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IFVzZSBVbnNpZ25lZEludDI0OFR5cGUgZm9yIERlcHRoU3RlbmNpbEZvcm1hdCBEZXB0aFRleHR1cmUuXCIpLHIudHlwZT1EdCxmPW8uY29udmVydChyLnR5cGUpKSksbi50ZXhJbWFnZTJEKDM1NTMsMCxtLGwud2lkdGgsbC5oZWlnaHQsMCxkLGYsbnVsbCk7ZWxzZSBpZihyLmlzRGF0YVRleHR1cmUpaWYody5sZW5ndGg+MCYmaCl7Zm9yKGxldCB0PTAsZT13Lmxlbmd0aDt0PGU7dCsrKXA9d1t0XSxuLnRleEltYWdlMkQoMzU1Myx0LG0scC53aWR0aCxwLmhlaWdodCwwLGQsZixwLmRhdGEpO3IuZ2VuZXJhdGVNaXBtYXBzPSExLGUuX19tYXhNaXBMZXZlbD13Lmxlbmd0aC0xfWVsc2Ugbi50ZXhJbWFnZTJEKDM1NTMsMCxtLGwud2lkdGgsbC5oZWlnaHQsMCxkLGYsbC5kYXRhKSxlLl9fbWF4TWlwTGV2ZWw9MDtlbHNlIGlmKHIuaXNDb21wcmVzc2VkVGV4dHVyZSl7Zm9yKGxldCB0PTAsZT13Lmxlbmd0aDt0PGU7dCsrKXA9d1t0XSxyLmZvcm1hdCE9PVV0JiZyLmZvcm1hdCE9PUZ0P251bGwhPT1kP24uY29tcHJlc3NlZFRleEltYWdlMkQoMzU1Myx0LG0scC53aWR0aCxwLmhlaWdodCwwLHAuZGF0YSk6Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogQXR0ZW1wdCB0byBsb2FkIHVuc3VwcG9ydGVkIGNvbXByZXNzZWQgdGV4dHVyZSBmb3JtYXQgaW4gLnVwbG9hZFRleHR1cmUoKVwiKTpuLnRleEltYWdlMkQoMzU1Myx0LG0scC53aWR0aCxwLmhlaWdodCwwLGQsZixwLmRhdGEpO2UuX19tYXhNaXBMZXZlbD13Lmxlbmd0aC0xfWVsc2UgaWYoci5pc0RhdGFUZXh0dXJlMkRBcnJheSluLnRleEltYWdlM0QoMzU4NjYsMCxtLGwud2lkdGgsbC5oZWlnaHQsbC5kZXB0aCwwLGQsZixsLmRhdGEpLGUuX19tYXhNaXBMZXZlbD0wO2Vsc2UgaWYoci5pc0RhdGFUZXh0dXJlM0Qpbi50ZXhJbWFnZTNEKDMyODc5LDAsbSxsLndpZHRoLGwuaGVpZ2h0LGwuZGVwdGgsMCxkLGYsbC5kYXRhKSxlLl9fbWF4TWlwTGV2ZWw9MDtlbHNlIGlmKHcubGVuZ3RoPjAmJmgpe2ZvcihsZXQgdD0wLGU9dy5sZW5ndGg7dDxlO3QrKylwPXdbdF0sbi50ZXhJbWFnZTJEKDM1NTMsdCxtLGQsZixwKTtyLmdlbmVyYXRlTWlwbWFwcz0hMSxlLl9fbWF4TWlwTGV2ZWw9dy5sZW5ndGgtMX1lbHNlIG4udGV4SW1hZ2UyRCgzNTUzLDAsbSxkLGYsbCksZS5fX21heE1pcExldmVsPTA7eShyLGgpJiZ4KGEscixsLndpZHRoLGwuaGVpZ2h0KSxlLl9fdmVyc2lvbj1yLnZlcnNpb24sci5vblVwZGF0ZSYmci5vblVwZGF0ZShyKX1mdW5jdGlvbiBJKGUsaSxhLHMpe2NvbnN0IGM9by5jb252ZXJ0KGkudGV4dHVyZS5mb3JtYXQpLGw9by5jb252ZXJ0KGkudGV4dHVyZS50eXBlKSx1PWIoaS50ZXh0dXJlLmludGVybmFsRm9ybWF0LGMsbCk7bi50ZXhJbWFnZTJEKHMsMCx1LGkud2lkdGgsaS5oZWlnaHQsMCxjLGwsbnVsbCksdC5iaW5kRnJhbWVidWZmZXIoMzYxNjAsZSksdC5mcmFtZWJ1ZmZlclRleHR1cmUyRCgzNjE2MCxhLHMsci5nZXQoaS50ZXh0dXJlKS5fX3dlYmdsVGV4dHVyZSwwKSx0LmJpbmRGcmFtZWJ1ZmZlcigzNjE2MCxudWxsKX1mdW5jdGlvbiBPKGUsbixyKXtpZih0LmJpbmRSZW5kZXJidWZmZXIoMzYxNjEsZSksbi5kZXB0aEJ1ZmZlciYmIW4uc3RlbmNpbEJ1ZmZlcil7bGV0IGk9MzMxODk7aWYocil7Y29uc3QgZT1uLmRlcHRoVGV4dHVyZTtlJiZlLmlzRGVwdGhUZXh0dXJlJiYoZS50eXBlPT09UHQ/aT0zNjAxMjplLnR5cGU9PT1SdCYmKGk9MzMxOTApKTtjb25zdCByPUQobik7dC5yZW5kZXJidWZmZXJTdG9yYWdlTXVsdGlzYW1wbGUoMzYxNjEscixpLG4ud2lkdGgsbi5oZWlnaHQpfWVsc2UgdC5yZW5kZXJidWZmZXJTdG9yYWdlKDM2MTYxLGksbi53aWR0aCxuLmhlaWdodCk7dC5mcmFtZWJ1ZmZlclJlbmRlcmJ1ZmZlcigzNjE2MCwzNjA5NiwzNjE2MSxlKX1lbHNlIGlmKG4uZGVwdGhCdWZmZXImJm4uc3RlbmNpbEJ1ZmZlcil7aWYocil7Y29uc3QgZT1EKG4pO3QucmVuZGVyYnVmZmVyU3RvcmFnZU11bHRpc2FtcGxlKDM2MTYxLGUsMzUwNTYsbi53aWR0aCxuLmhlaWdodCl9ZWxzZSB0LnJlbmRlcmJ1ZmZlclN0b3JhZ2UoMzYxNjEsMzQwNDEsbi53aWR0aCxuLmhlaWdodCk7dC5mcmFtZWJ1ZmZlclJlbmRlcmJ1ZmZlcigzNjE2MCwzMzMwNiwzNjE2MSxlKX1lbHNle2NvbnN0IGU9by5jb252ZXJ0KG4udGV4dHVyZS5mb3JtYXQpLGk9by5jb252ZXJ0KG4udGV4dHVyZS50eXBlKSxhPWIobi50ZXh0dXJlLmludGVybmFsRm9ybWF0LGUsaSk7aWYocil7Y29uc3QgZT1EKG4pO3QucmVuZGVyYnVmZmVyU3RvcmFnZU11bHRpc2FtcGxlKDM2MTYxLGUsYSxuLndpZHRoLG4uaGVpZ2h0KX1lbHNlIHQucmVuZGVyYnVmZmVyU3RvcmFnZSgzNjE2MSxhLG4ud2lkdGgsbi5oZWlnaHQpfXQuYmluZFJlbmRlcmJ1ZmZlcigzNjE2MSxudWxsKX1mdW5jdGlvbiBOKGUpe2NvbnN0IG49ci5nZXQoZSksaT0hMD09PWUuaXNXZWJHTEN1YmVSZW5kZXJUYXJnZXQ7aWYoZS5kZXB0aFRleHR1cmUpe2lmKGkpdGhyb3cgbmV3IEVycm9yKFwidGFyZ2V0LmRlcHRoVGV4dHVyZSBub3Qgc3VwcG9ydGVkIGluIEN1YmUgcmVuZGVyIHRhcmdldHNcIik7IWZ1bmN0aW9uKGUsbil7aWYobiYmbi5pc1dlYkdMQ3ViZVJlbmRlclRhcmdldCl0aHJvdyBuZXcgRXJyb3IoXCJEZXB0aCBUZXh0dXJlIHdpdGggY3ViZSByZW5kZXIgdGFyZ2V0cyBpcyBub3Qgc3VwcG9ydGVkXCIpO2lmKHQuYmluZEZyYW1lYnVmZmVyKDM2MTYwLGUpLCFuLmRlcHRoVGV4dHVyZXx8IW4uZGVwdGhUZXh0dXJlLmlzRGVwdGhUZXh0dXJlKXRocm93IG5ldyBFcnJvcihcInJlbmRlclRhcmdldC5kZXB0aFRleHR1cmUgbXVzdCBiZSBhbiBpbnN0YW5jZSBvZiBUSFJFRS5EZXB0aFRleHR1cmVcIik7ci5nZXQobi5kZXB0aFRleHR1cmUpLl9fd2ViZ2xUZXh0dXJlJiZuLmRlcHRoVGV4dHVyZS5pbWFnZS53aWR0aD09PW4ud2lkdGgmJm4uZGVwdGhUZXh0dXJlLmltYWdlLmhlaWdodD09PW4uaGVpZ2h0fHwobi5kZXB0aFRleHR1cmUuaW1hZ2Uud2lkdGg9bi53aWR0aCxuLmRlcHRoVGV4dHVyZS5pbWFnZS5oZWlnaHQ9bi5oZWlnaHQsbi5kZXB0aFRleHR1cmUubmVlZHNVcGRhdGU9ITApLFQobi5kZXB0aFRleHR1cmUsMCk7Y29uc3QgaT1yLmdldChuLmRlcHRoVGV4dHVyZSkuX193ZWJnbFRleHR1cmU7aWYobi5kZXB0aFRleHR1cmUuZm9ybWF0PT09a3QpdC5mcmFtZWJ1ZmZlclRleHR1cmUyRCgzNjE2MCwzNjA5NiwzNTUzLGksMCk7ZWxzZXtpZihuLmRlcHRoVGV4dHVyZS5mb3JtYXQhPT1WdCl0aHJvdyBuZXcgRXJyb3IoXCJVbmtub3duIGRlcHRoVGV4dHVyZSBmb3JtYXRcIik7dC5mcmFtZWJ1ZmZlclRleHR1cmUyRCgzNjE2MCwzMzMwNiwzNTUzLGksMCl9fShuLl9fd2ViZ2xGcmFtZWJ1ZmZlcixlKX1lbHNlIGlmKGkpe24uX193ZWJnbERlcHRoYnVmZmVyPVtdO2ZvcihsZXQgcj0wO3I8NjtyKyspdC5iaW5kRnJhbWVidWZmZXIoMzYxNjAsbi5fX3dlYmdsRnJhbWVidWZmZXJbcl0pLG4uX193ZWJnbERlcHRoYnVmZmVyW3JdPXQuY3JlYXRlUmVuZGVyYnVmZmVyKCksTyhuLl9fd2ViZ2xEZXB0aGJ1ZmZlcltyXSxlLCExKX1lbHNlIHQuYmluZEZyYW1lYnVmZmVyKDM2MTYwLG4uX193ZWJnbEZyYW1lYnVmZmVyKSxuLl9fd2ViZ2xEZXB0aGJ1ZmZlcj10LmNyZWF0ZVJlbmRlcmJ1ZmZlcigpLE8obi5fX3dlYmdsRGVwdGhidWZmZXIsZSwhMSk7dC5iaW5kRnJhbWVidWZmZXIoMzYxNjAsbnVsbCl9ZnVuY3Rpb24gRCh0KXtyZXR1cm4gcyYmdC5pc1dlYkdMTXVsdGlzYW1wbGVSZW5kZXJUYXJnZXQ/TWF0aC5taW4oaCx0LnNhbXBsZXMpOjB9bGV0IEI9ITEsRj0hMTt0aGlzLmFsbG9jYXRlVGV4dHVyZVVuaXQ9ZnVuY3Rpb24oKXtjb25zdCB0PVM7cmV0dXJuIHQ+PWMmJmNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMVGV4dHVyZXM6IFRyeWluZyB0byB1c2UgXCIrdCtcIiB0ZXh0dXJlIHVuaXRzIHdoaWxlIHRoaXMgR1BVIHN1cHBvcnRzIG9ubHkgXCIrYyksUys9MSx0fSx0aGlzLnJlc2V0VGV4dHVyZVVuaXRzPWZ1bmN0aW9uKCl7Uz0wfSx0aGlzLnNldFRleHR1cmUyRD1ULHRoaXMuc2V0VGV4dHVyZTJEQXJyYXk9ZnVuY3Rpb24odCxlKXtjb25zdCBpPXIuZ2V0KHQpO3QudmVyc2lvbj4wJiZpLl9fdmVyc2lvbiE9PXQudmVyc2lvbj9DKGksdCxlKToobi5hY3RpdmVUZXh0dXJlKDMzOTg0K2UpLG4uYmluZFRleHR1cmUoMzU4NjYsaS5fX3dlYmdsVGV4dHVyZSkpfSx0aGlzLnNldFRleHR1cmUzRD1mdW5jdGlvbih0LGUpe2NvbnN0IGk9ci5nZXQodCk7dC52ZXJzaW9uPjAmJmkuX192ZXJzaW9uIT09dC52ZXJzaW9uP0MoaSx0LGUpOihuLmFjdGl2ZVRleHR1cmUoMzM5ODQrZSksbi5iaW5kVGV4dHVyZSgzMjg3OSxpLl9fd2ViZ2xUZXh0dXJlKSl9LHRoaXMuc2V0VGV4dHVyZUN1YmU9RSx0aGlzLnNldHVwUmVuZGVyVGFyZ2V0PWZ1bmN0aW9uKGUpe2NvbnN0IGk9ci5nZXQoZSksYz1yLmdldChlLnRleHR1cmUpO2UuYWRkRXZlbnRMaXN0ZW5lcihcImRpc3Bvc2VcIixNKSxjLl9fd2ViZ2xUZXh0dXJlPXQuY3JlYXRlVGV4dHVyZSgpLGEubWVtb3J5LnRleHR1cmVzKys7Y29uc3QgbD0hMD09PWUuaXNXZWJHTEN1YmVSZW5kZXJUYXJnZXQsdT0hMD09PWUuaXNXZWJHTE11bHRpc2FtcGxlUmVuZGVyVGFyZ2V0LGg9dihlKXx8cztpZighc3x8ZS50ZXh0dXJlLmZvcm1hdCE9PUZ0fHxlLnRleHR1cmUudHlwZSE9PVB0JiZlLnRleHR1cmUudHlwZSE9PUN0fHwoZS50ZXh0dXJlLmZvcm1hdD1VdCxjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiBSZW5kZXJpbmcgdG8gdGV4dHVyZXMgd2l0aCBSR0IgZm9ybWF0IGlzIG5vdCBzdXBwb3J0ZWQuIFVzaW5nIFJHQkEgZm9ybWF0IGluc3RlYWQuXCIpKSxsKXtpLl9fd2ViZ2xGcmFtZWJ1ZmZlcj1bXTtmb3IobGV0IGU9MDtlPDY7ZSsrKWkuX193ZWJnbEZyYW1lYnVmZmVyW2VdPXQuY3JlYXRlRnJhbWVidWZmZXIoKX1lbHNlIGlmKGkuX193ZWJnbEZyYW1lYnVmZmVyPXQuY3JlYXRlRnJhbWVidWZmZXIoKSx1KWlmKHMpe2kuX193ZWJnbE11bHRpc2FtcGxlZEZyYW1lYnVmZmVyPXQuY3JlYXRlRnJhbWVidWZmZXIoKSxpLl9fd2ViZ2xDb2xvclJlbmRlcmJ1ZmZlcj10LmNyZWF0ZVJlbmRlcmJ1ZmZlcigpLHQuYmluZFJlbmRlcmJ1ZmZlcigzNjE2MSxpLl9fd2ViZ2xDb2xvclJlbmRlcmJ1ZmZlcik7Y29uc3Qgbj1vLmNvbnZlcnQoZS50ZXh0dXJlLmZvcm1hdCkscj1vLmNvbnZlcnQoZS50ZXh0dXJlLnR5cGUpLGE9YihlLnRleHR1cmUuaW50ZXJuYWxGb3JtYXQsbixyKSxzPUQoZSk7dC5yZW5kZXJidWZmZXJTdG9yYWdlTXVsdGlzYW1wbGUoMzYxNjEscyxhLGUud2lkdGgsZS5oZWlnaHQpLHQuYmluZEZyYW1lYnVmZmVyKDM2MTYwLGkuX193ZWJnbE11bHRpc2FtcGxlZEZyYW1lYnVmZmVyKSx0LmZyYW1lYnVmZmVyUmVuZGVyYnVmZmVyKDM2MTYwLDM2MDY0LDM2MTYxLGkuX193ZWJnbENvbG9yUmVuZGVyYnVmZmVyKSx0LmJpbmRSZW5kZXJidWZmZXIoMzYxNjEsbnVsbCksZS5kZXB0aEJ1ZmZlciYmKGkuX193ZWJnbERlcHRoUmVuZGVyYnVmZmVyPXQuY3JlYXRlUmVuZGVyYnVmZmVyKCksTyhpLl9fd2ViZ2xEZXB0aFJlbmRlcmJ1ZmZlcixlLCEwKSksdC5iaW5kRnJhbWVidWZmZXIoMzYxNjAsbnVsbCl9ZWxzZSBjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiBXZWJHTE11bHRpc2FtcGxlUmVuZGVyVGFyZ2V0IGNhbiBvbmx5IGJlIHVzZWQgd2l0aCBXZWJHTDIuXCIpO2lmKGwpe24uYmluZFRleHR1cmUoMzQwNjcsYy5fX3dlYmdsVGV4dHVyZSksUigzNDA2NyxlLnRleHR1cmUsaCk7Zm9yKGxldCB0PTA7dDw2O3QrKylJKGkuX193ZWJnbEZyYW1lYnVmZmVyW3RdLGUsMzYwNjQsMzQwNjkrdCk7eShlLnRleHR1cmUsaCkmJngoMzQwNjcsZS50ZXh0dXJlLGUud2lkdGgsZS5oZWlnaHQpLG4uYmluZFRleHR1cmUoMzQwNjcsbnVsbCl9ZWxzZSBuLmJpbmRUZXh0dXJlKDM1NTMsYy5fX3dlYmdsVGV4dHVyZSksUigzNTUzLGUudGV4dHVyZSxoKSxJKGkuX193ZWJnbEZyYW1lYnVmZmVyLGUsMzYwNjQsMzU1MykseShlLnRleHR1cmUsaCkmJngoMzU1MyxlLnRleHR1cmUsZS53aWR0aCxlLmhlaWdodCksbi5iaW5kVGV4dHVyZSgzNTUzLG51bGwpO2UuZGVwdGhCdWZmZXImJk4oZSl9LHRoaXMudXBkYXRlUmVuZGVyVGFyZ2V0TWlwbWFwPWZ1bmN0aW9uKHQpe2NvbnN0IGU9dC50ZXh0dXJlO2lmKHkoZSx2KHQpfHxzKSl7Y29uc3QgaT10LmlzV2ViR0xDdWJlUmVuZGVyVGFyZ2V0PzM0MDY3OjM1NTMsbz1yLmdldChlKS5fX3dlYmdsVGV4dHVyZTtuLmJpbmRUZXh0dXJlKGksbykseChpLGUsdC53aWR0aCx0LmhlaWdodCksbi5iaW5kVGV4dHVyZShpLG51bGwpfX0sdGhpcy51cGRhdGVNdWx0aXNhbXBsZVJlbmRlclRhcmdldD1mdW5jdGlvbihlKXtpZihlLmlzV2ViR0xNdWx0aXNhbXBsZVJlbmRlclRhcmdldClpZihzKXtjb25zdCBuPXIuZ2V0KGUpO3QuYmluZEZyYW1lYnVmZmVyKDM2MDA4LG4uX193ZWJnbE11bHRpc2FtcGxlZEZyYW1lYnVmZmVyKSx0LmJpbmRGcmFtZWJ1ZmZlcigzNjAwOSxuLl9fd2ViZ2xGcmFtZWJ1ZmZlcik7Y29uc3QgaT1lLndpZHRoLG89ZS5oZWlnaHQ7bGV0IGE9MTYzODQ7ZS5kZXB0aEJ1ZmZlciYmKGF8PTI1NiksZS5zdGVuY2lsQnVmZmVyJiYoYXw9MTAyNCksdC5ibGl0RnJhbWVidWZmZXIoMCwwLGksbywwLDAsaSxvLGEsOTcyOCksdC5iaW5kRnJhbWVidWZmZXIoMzYxNjAsbi5fX3dlYmdsTXVsdGlzYW1wbGVkRnJhbWVidWZmZXIpfWVsc2UgY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogV2ViR0xNdWx0aXNhbXBsZVJlbmRlclRhcmdldCBjYW4gb25seSBiZSB1c2VkIHdpdGggV2ViR0wyLlwiKX0sdGhpcy5zYWZlU2V0VGV4dHVyZTJEPWZ1bmN0aW9uKHQsZSl7dCYmdC5pc1dlYkdMUmVuZGVyVGFyZ2V0JiYoITE9PT1CJiYoY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xUZXh0dXJlcy5zYWZlU2V0VGV4dHVyZTJEOiBkb24ndCB1c2UgcmVuZGVyIHRhcmdldHMgYXMgdGV4dHVyZXMuIFVzZSB0aGVpciAudGV4dHVyZSBwcm9wZXJ0eSBpbnN0ZWFkLlwiKSxCPSEwKSx0PXQudGV4dHVyZSksVCh0LGUpfSx0aGlzLnNhZmVTZXRUZXh0dXJlQ3ViZT1mdW5jdGlvbih0LGUpe3QmJnQuaXNXZWJHTEN1YmVSZW5kZXJUYXJnZXQmJighMT09PUYmJihjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFRleHR1cmVzLnNhZmVTZXRUZXh0dXJlQ3ViZTogZG9uJ3QgdXNlIGN1YmUgcmVuZGVyIHRhcmdldHMgYXMgdGV4dHVyZXMuIFVzZSB0aGVpciAudGV4dHVyZSBwcm9wZXJ0eSBpbnN0ZWFkLlwiKSxGPSEwKSx0PXQudGV4dHVyZSksRSh0LGUpfX1mdW5jdGlvbiBScyh0LGUsbil7Y29uc3Qgcj1uLmlzV2ViR0wyO3JldHVybntjb252ZXJ0OmZ1bmN0aW9uKHQpe2xldCBuO2lmKHQ9PT1TdClyZXR1cm4gNTEyMTtpZih0PT09SXQpcmV0dXJuIDMyODE5O2lmKHQ9PT1PdClyZXR1cm4gMzI4MjA7aWYodD09PU50KXJldHVybiAzMzYzNTtpZih0PT09VHQpcmV0dXJuIDUxMjA7aWYodD09PUV0KXJldHVybiA1MTIyO2lmKHQ9PT1BdClyZXR1cm4gNTEyMztpZih0PT09THQpcmV0dXJuIDUxMjQ7aWYodD09PVJ0KXJldHVybiA1MTI1O2lmKHQ9PT1QdClyZXR1cm4gNTEyNjtpZih0PT09Q3QpcmV0dXJuIHI/NTEzMToobj1lLmdldChcIk9FU190ZXh0dXJlX2hhbGZfZmxvYXRcIiksbnVsbCE9PW4/bi5IQUxGX0ZMT0FUX09FUzpudWxsKTtpZih0PT09QnQpcmV0dXJuIDY0MDY7aWYodD09PUZ0KXJldHVybiA2NDA3O2lmKHQ9PT1VdClyZXR1cm4gNjQwODtpZih0PT09enQpcmV0dXJuIDY0MDk7aWYodD09PUd0KXJldHVybiA2NDEwO2lmKHQ9PT1rdClyZXR1cm4gNjQwMjtpZih0PT09VnQpcmV0dXJuIDM0MDQxO2lmKHQ9PT1qdClyZXR1cm4gNjQwMztpZih0PT09V3QpcmV0dXJuIDM2MjQ0O2lmKHQ9PT1YdClyZXR1cm4gMzMzMTk7aWYodD09PXF0KXJldHVybiAzMzMyMDtpZih0PT09WXQpcmV0dXJuIDM2MjQ4O2lmKHQ9PT1adClyZXR1cm4gMzYyNDk7aWYodD09PUp0fHx0PT09S3R8fHQ9PT1RdHx8dD09PSR0KXtpZihuPWUuZ2V0KFwiV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3MzdGNcIiksbnVsbD09PW4pcmV0dXJuIG51bGw7aWYodD09PUp0KXJldHVybiBuLkNPTVBSRVNTRURfUkdCX1MzVENfRFhUMV9FWFQ7aWYodD09PUt0KXJldHVybiBuLkNPTVBSRVNTRURfUkdCQV9TM1RDX0RYVDFfRVhUO2lmKHQ9PT1RdClyZXR1cm4gbi5DT01QUkVTU0VEX1JHQkFfUzNUQ19EWFQzX0VYVDtpZih0PT09JHQpcmV0dXJuIG4uQ09NUFJFU1NFRF9SR0JBX1MzVENfRFhUNV9FWFR9aWYodD09PXRlfHx0PT09ZWV8fHQ9PT1uZXx8dD09PXJlKXtpZihuPWUuZ2V0KFwiV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3B2cnRjXCIpLG51bGw9PT1uKXJldHVybiBudWxsO2lmKHQ9PT10ZSlyZXR1cm4gbi5DT01QUkVTU0VEX1JHQl9QVlJUQ180QlBQVjFfSU1HO2lmKHQ9PT1lZSlyZXR1cm4gbi5DT01QUkVTU0VEX1JHQl9QVlJUQ18yQlBQVjFfSU1HO2lmKHQ9PT1uZSlyZXR1cm4gbi5DT01QUkVTU0VEX1JHQkFfUFZSVENfNEJQUFYxX0lNRztpZih0PT09cmUpcmV0dXJuIG4uQ09NUFJFU1NFRF9SR0JBX1BWUlRDXzJCUFBWMV9JTUd9aWYodD09PWllKXJldHVybiBuPWUuZ2V0KFwiV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX2V0YzFcIiksbnVsbCE9PW4/bi5DT01QUkVTU0VEX1JHQl9FVEMxX1dFQkdMOm51bGw7aWYoKHQ9PT1vZXx8dD09PWFlKSYmKG49ZS5nZXQoXCJXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfZXRjXCIpLG51bGwhPT1uKSl7aWYodD09PW9lKXJldHVybiBuLkNPTVBSRVNTRURfUkdCOF9FVEMyO2lmKHQ9PT1hZSlyZXR1cm4gbi5DT01QUkVTU0VEX1JHQkE4X0VUQzJfRUFDfXJldHVybiB0PT09c2V8fHQ9PT1jZXx8dD09PWxlfHx0PT09dWV8fHQ9PT1oZXx8dD09PWRlfHx0PT09cGV8fHQ9PT1mZXx8dD09PW1lfHx0PT09Z2V8fHQ9PT12ZXx8dD09PXllfHx0PT09eGV8fHQ9PT1iZXx8dD09PV9lfHx0PT09TWV8fHQ9PT1TZXx8dD09PVRlfHx0PT09RWV8fHQ9PT1BZXx8dD09PUxlfHx0PT09UmV8fHQ9PT1QZXx8dD09PUNlfHx0PT09SWV8fHQ9PT1PZXx8dD09PU5lfHx0PT09RGU/KG49ZS5nZXQoXCJXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfYXN0Y1wiKSxudWxsIT09bj90Om51bGwpOnQ9PT13ZT8obj1lLmdldChcIkVYVF90ZXh0dXJlX2NvbXByZXNzaW9uX2JwdGNcIiksbnVsbCE9PW4/dDpudWxsKTp0PT09RHQ/cj8zNDA0Mjoobj1lLmdldChcIldFQkdMX2RlcHRoX3RleHR1cmVcIiksbnVsbCE9PW4/bi5VTlNJR05FRF9JTlRfMjRfOF9XRUJHTDpudWxsKTp2b2lkIDB9fX1mdW5jdGlvbiBQcyh0PVtdKXt3by5jYWxsKHRoaXMpLHRoaXMuY2FtZXJhcz10fWZ1bmN0aW9uIENzKCl7SnIuY2FsbCh0aGlzKSx0aGlzLnR5cGU9XCJHcm91cFwifWZ1bmN0aW9uIElzKCl7dGhpcy5fdGFyZ2V0UmF5PW51bGwsdGhpcy5fZ3JpcD1udWxsLHRoaXMuX2hhbmQ9bnVsbH1mdW5jdGlvbiBPcyh0LGUpe2NvbnN0IG49dGhpcztsZXQgcj1udWxsLGk9MSxvPW51bGwsYT1cImxvY2FsLWZsb29yXCIscz1udWxsO2NvbnN0IGM9W10sbD1uZXcgTWFwLHU9bmV3IHdvO3UubGF5ZXJzLmVuYWJsZSgxKSx1LnZpZXdwb3J0PW5ldyBxbjtjb25zdCBoPW5ldyB3bztoLmxheWVycy5lbmFibGUoMiksaC52aWV3cG9ydD1uZXcgcW47Y29uc3QgZD1bdSxoXSxwPW5ldyBQcztwLmxheWVycy5lbmFibGUoMSkscC5sYXllcnMuZW5hYmxlKDIpO2xldCBmPW51bGwsbT1udWxsO2Z1bmN0aW9uIGcodCl7Y29uc3QgZT1sLmdldCh0LmlucHV0U291cmNlKTtlJiZlLmRpc3BhdGNoRXZlbnQoe3R5cGU6dC50eXBlLGRhdGE6dC5pbnB1dFNvdXJjZX0pfWZ1bmN0aW9uIHYoKXtsLmZvckVhY2goKGZ1bmN0aW9uKHQsZSl7dC5kaXNjb25uZWN0KGUpfSkpLGwuY2xlYXIoKSx0LnNldEZyYW1lYnVmZmVyKG51bGwpLHQuc2V0UmVuZGVyVGFyZ2V0KHQuZ2V0UmVuZGVyVGFyZ2V0KCkpLFMuc3RvcCgpLG4uaXNQcmVzZW50aW5nPSExLG4uZGlzcGF0Y2hFdmVudCh7dHlwZTpcInNlc3Npb25lbmRcIn0pfWZ1bmN0aW9uIHkodCl7bz10LFMuc2V0Q29udGV4dChyKSxTLnN0YXJ0KCksbi5pc1ByZXNlbnRpbmc9ITAsbi5kaXNwYXRjaEV2ZW50KHt0eXBlOlwic2Vzc2lvbnN0YXJ0XCJ9KX1mdW5jdGlvbiB4KHQpe2NvbnN0IGU9ci5pbnB1dFNvdXJjZXM7Zm9yKGxldCB0PTA7dDxjLmxlbmd0aDt0KyspbC5zZXQoZVt0XSxjW3RdKTtmb3IobGV0IGU9MDtlPHQucmVtb3ZlZC5sZW5ndGg7ZSsrKXtjb25zdCBuPXQucmVtb3ZlZFtlXSxyPWwuZ2V0KG4pO3ImJihyLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJkaXNjb25uZWN0ZWRcIixkYXRhOm59KSxsLmRlbGV0ZShuKSl9Zm9yKGxldCBlPTA7ZTx0LmFkZGVkLmxlbmd0aDtlKyspe2NvbnN0IG49dC5hZGRlZFtlXSxyPWwuZ2V0KG4pO3ImJnIuZGlzcGF0Y2hFdmVudCh7dHlwZTpcImNvbm5lY3RlZFwiLGRhdGE6bn0pfX10aGlzLmVuYWJsZWQ9ITEsdGhpcy5pc1ByZXNlbnRpbmc9ITEsdGhpcy5nZXRDb250cm9sbGVyPWZ1bmN0aW9uKHQpe2xldCBlPWNbdF07cmV0dXJuIHZvaWQgMD09PWUmJihlPW5ldyBJcyxjW3RdPWUpLGUuZ2V0VGFyZ2V0UmF5U3BhY2UoKX0sdGhpcy5nZXRDb250cm9sbGVyR3JpcD1mdW5jdGlvbih0KXtsZXQgZT1jW3RdO3JldHVybiB2b2lkIDA9PT1lJiYoZT1uZXcgSXMsY1t0XT1lKSxlLmdldEdyaXBTcGFjZSgpfSx0aGlzLmdldEhhbmQ9ZnVuY3Rpb24odCl7bGV0IGU9Y1t0XTtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9bmV3IElzLGNbdF09ZSksZS5nZXRIYW5kU3BhY2UoKX0sdGhpcy5zZXRGcmFtZWJ1ZmZlclNjYWxlRmFjdG9yPWZ1bmN0aW9uKHQpe2k9dCwhMD09PW4uaXNQcmVzZW50aW5nJiZjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJYUk1hbmFnZXI6IENhbm5vdCBjaGFuZ2UgZnJhbWVidWZmZXIgc2NhbGUgd2hpbGUgcHJlc2VudGluZy5cIil9LHRoaXMuc2V0UmVmZXJlbmNlU3BhY2VUeXBlPWZ1bmN0aW9uKHQpe2E9dCwhMD09PW4uaXNQcmVzZW50aW5nJiZjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJYUk1hbmFnZXI6IENhbm5vdCBjaGFuZ2UgcmVmZXJlbmNlIHNwYWNlIHR5cGUgd2hpbGUgcHJlc2VudGluZy5cIil9LHRoaXMuZ2V0UmVmZXJlbmNlU3BhY2U9ZnVuY3Rpb24oKXtyZXR1cm4gb30sdGhpcy5nZXRTZXNzaW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHJ9LHRoaXMuc2V0U2Vzc2lvbj1mdW5jdGlvbih0KXtpZihyPXQsbnVsbCE9PXIpe3IuYWRkRXZlbnRMaXN0ZW5lcihcInNlbGVjdFwiLGcpLHIuYWRkRXZlbnRMaXN0ZW5lcihcInNlbGVjdHN0YXJ0XCIsZyksci5hZGRFdmVudExpc3RlbmVyKFwic2VsZWN0ZW5kXCIsZyksci5hZGRFdmVudExpc3RlbmVyKFwic3F1ZWV6ZVwiLGcpLHIuYWRkRXZlbnRMaXN0ZW5lcihcInNxdWVlemVzdGFydFwiLGcpLHIuYWRkRXZlbnRMaXN0ZW5lcihcInNxdWVlemVlbmRcIixnKSxyLmFkZEV2ZW50TGlzdGVuZXIoXCJlbmRcIix2KTtjb25zdCB0PWUuZ2V0Q29udGV4dEF0dHJpYnV0ZXMoKTshMCE9PXQueHJDb21wYXRpYmxlJiZlLm1ha2VYUkNvbXBhdGlibGUoKTtjb25zdCBuPXthbnRpYWxpYXM6dC5hbnRpYWxpYXMsYWxwaGE6dC5hbHBoYSxkZXB0aDp0LmRlcHRoLHN0ZW5jaWw6dC5zdGVuY2lsLGZyYW1lYnVmZmVyU2NhbGVGYWN0b3I6aX0sbz1uZXcgWFJXZWJHTExheWVyKHIsZSxuKTtyLnVwZGF0ZVJlbmRlclN0YXRlKHtiYXNlTGF5ZXI6b30pLHIucmVxdWVzdFJlZmVyZW5jZVNwYWNlKGEpLnRoZW4oeSksci5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRzb3VyY2VzY2hhbmdlXCIseCl9fTtjb25zdCBiPW5ldyBLbix3PW5ldyBLbjtmdW5jdGlvbiBfKHQsZSl7bnVsbD09PWU/dC5tYXRyaXhXb3JsZC5jb3B5KHQubWF0cml4KTp0Lm1hdHJpeFdvcmxkLm11bHRpcGx5TWF0cmljZXMoZS5tYXRyaXhXb3JsZCx0Lm1hdHJpeCksdC5tYXRyaXhXb3JsZEludmVyc2UuY29weSh0Lm1hdHJpeFdvcmxkKS5pbnZlcnQoKX10aGlzLmdldENhbWVyYT1mdW5jdGlvbih0KXtwLm5lYXI9aC5uZWFyPXUubmVhcj10Lm5lYXIscC5mYXI9aC5mYXI9dS5mYXI9dC5mYXIsZj09PXAubmVhciYmbT09PXAuZmFyfHwoci51cGRhdGVSZW5kZXJTdGF0ZSh7ZGVwdGhOZWFyOnAubmVhcixkZXB0aEZhcjpwLmZhcn0pLGY9cC5uZWFyLG09cC5mYXIpO2NvbnN0IGU9dC5wYXJlbnQsbj1wLmNhbWVyYXM7XyhwLGUpO2ZvcihsZXQgdD0wO3Q8bi5sZW5ndGg7dCsrKV8oblt0XSxlKTt0Lm1hdHJpeFdvcmxkLmNvcHkocC5tYXRyaXhXb3JsZCk7Y29uc3QgaT10LmNoaWxkcmVuO2ZvcihsZXQgdD0wLGU9aS5sZW5ndGg7dDxlO3QrKylpW3RdLnVwZGF0ZU1hdHJpeFdvcmxkKCEwKTtyZXR1cm4gMj09PW4ubGVuZ3RoP2Z1bmN0aW9uKHQsZSxuKXtiLnNldEZyb21NYXRyaXhQb3NpdGlvbihlLm1hdHJpeFdvcmxkKSx3LnNldEZyb21NYXRyaXhQb3NpdGlvbihuLm1hdHJpeFdvcmxkKTtjb25zdCByPWIuZGlzdGFuY2VUbyh3KSxpPWUucHJvamVjdGlvbk1hdHJpeC5lbGVtZW50cyxvPW4ucHJvamVjdGlvbk1hdHJpeC5lbGVtZW50cyxhPWlbMTRdLyhpWzEwXS0xKSxzPWlbMTRdLyhpWzEwXSsxKSxjPShpWzldKzEpL2lbNV0sbD0oaVs5XS0xKS9pWzVdLHU9KGlbOF0tMSkvaVswXSxoPShvWzhdKzEpL29bMF0sZD1hKnUscD1hKmgsZj1yLygtdStoKSxtPWYqLXU7ZS5tYXRyaXhXb3JsZC5kZWNvbXBvc2UodC5wb3NpdGlvbix0LnF1YXRlcm5pb24sdC5zY2FsZSksdC50cmFuc2xhdGVYKG0pLHQudHJhbnNsYXRlWihmKSx0Lm1hdHJpeFdvcmxkLmNvbXBvc2UodC5wb3NpdGlvbix0LnF1YXRlcm5pb24sdC5zY2FsZSksdC5tYXRyaXhXb3JsZEludmVyc2UuY29weSh0Lm1hdHJpeFdvcmxkKS5pbnZlcnQoKTtjb25zdCBnPWErZix2PXMrZix5PWQtbSx4PXArKHItbSksXz1jKnMvdipnLE09bCpzL3YqZzt0LnByb2plY3Rpb25NYXRyaXgubWFrZVBlcnNwZWN0aXZlKHkseCxfLE0sZyx2KX0ocCx1LGgpOnAucHJvamVjdGlvbk1hdHJpeC5jb3B5KHUucHJvamVjdGlvbk1hdHJpeCkscH07bGV0IE09bnVsbDtjb25zdCBTPW5ldyBSbztTLnNldEFuaW1hdGlvbkxvb3AoKGZ1bmN0aW9uKGUsbil7aWYocz1uLmdldFZpZXdlclBvc2UobyksbnVsbCE9PXMpe2NvbnN0IGU9cy52aWV3cyxuPXIucmVuZGVyU3RhdGUuYmFzZUxheWVyO3Quc2V0RnJhbWVidWZmZXIobi5mcmFtZWJ1ZmZlcik7bGV0IGk9ITE7ZS5sZW5ndGghPT1wLmNhbWVyYXMubGVuZ3RoJiYocC5jYW1lcmFzLmxlbmd0aD0wLGk9ITApO2ZvcihsZXQgdD0wO3Q8ZS5sZW5ndGg7dCsrKXtjb25zdCByPWVbdF0sbz1uLmdldFZpZXdwb3J0KHIpLGE9ZFt0XTthLm1hdHJpeC5mcm9tQXJyYXkoci50cmFuc2Zvcm0ubWF0cml4KSxhLnByb2plY3Rpb25NYXRyaXguZnJvbUFycmF5KHIucHJvamVjdGlvbk1hdHJpeCksYS52aWV3cG9ydC5zZXQoby54LG8ueSxvLndpZHRoLG8uaGVpZ2h0KSwwPT09dCYmcC5tYXRyaXguY29weShhLm1hdHJpeCksITA9PT1pJiZwLmNhbWVyYXMucHVzaChhKX19Y29uc3QgaT1yLmlucHV0U291cmNlcztmb3IobGV0IHQ9MDt0PGMubGVuZ3RoO3QrKyl7Y29uc3QgZT1jW3RdLHI9aVt0XTtlLnVwZGF0ZShyLG4sbyl9TSYmTShlLG4pfSkpLHRoaXMuc2V0QW5pbWF0aW9uTG9vcD1mdW5jdGlvbih0KXtNPXR9LHRoaXMuZGlzcG9zZT1mdW5jdGlvbigpe319ZnVuY3Rpb24gTnModCl7ZnVuY3Rpb24gZShlLG4pe2Uub3BhY2l0eS52YWx1ZT1uLm9wYWNpdHksbi5jb2xvciYmZS5kaWZmdXNlLnZhbHVlLmNvcHkobi5jb2xvciksbi5lbWlzc2l2ZSYmZS5lbWlzc2l2ZS52YWx1ZS5jb3B5KG4uZW1pc3NpdmUpLm11bHRpcGx5U2NhbGFyKG4uZW1pc3NpdmVJbnRlbnNpdHkpLG4ubWFwJiYoZS5tYXAudmFsdWU9bi5tYXApLG4uYWxwaGFNYXAmJihlLmFscGhhTWFwLnZhbHVlPW4uYWxwaGFNYXApLG4uc3BlY3VsYXJNYXAmJihlLnNwZWN1bGFyTWFwLnZhbHVlPW4uc3BlY3VsYXJNYXApO2NvbnN0IHI9dC5nZXQobikuZW52TWFwO2lmKHIpe2UuZW52TWFwLnZhbHVlPXIsZS5mbGlwRW52TWFwLnZhbHVlPXIuaXNDdWJlVGV4dHVyZSYmci5fbmVlZHNGbGlwRW52TWFwPy0xOjEsZS5yZWZsZWN0aXZpdHkudmFsdWU9bi5yZWZsZWN0aXZpdHksZS5yZWZyYWN0aW9uUmF0aW8udmFsdWU9bi5yZWZyYWN0aW9uUmF0aW87Y29uc3QgaT10LmdldChyKS5fX21heE1pcExldmVsO3ZvaWQgMCE9PWkmJihlLm1heE1pcExldmVsLnZhbHVlPWkpfWxldCBpLG87bi5saWdodE1hcCYmKGUubGlnaHRNYXAudmFsdWU9bi5saWdodE1hcCxlLmxpZ2h0TWFwSW50ZW5zaXR5LnZhbHVlPW4ubGlnaHRNYXBJbnRlbnNpdHkpLG4uYW9NYXAmJihlLmFvTWFwLnZhbHVlPW4uYW9NYXAsZS5hb01hcEludGVuc2l0eS52YWx1ZT1uLmFvTWFwSW50ZW5zaXR5KSxuLm1hcD9pPW4ubWFwOm4uc3BlY3VsYXJNYXA/aT1uLnNwZWN1bGFyTWFwOm4uZGlzcGxhY2VtZW50TWFwP2k9bi5kaXNwbGFjZW1lbnRNYXA6bi5ub3JtYWxNYXA/aT1uLm5vcm1hbE1hcDpuLmJ1bXBNYXA/aT1uLmJ1bXBNYXA6bi5yb3VnaG5lc3NNYXA/aT1uLnJvdWdobmVzc01hcDpuLm1ldGFsbmVzc01hcD9pPW4ubWV0YWxuZXNzTWFwOm4uYWxwaGFNYXA/aT1uLmFscGhhTWFwOm4uZW1pc3NpdmVNYXA/aT1uLmVtaXNzaXZlTWFwOm4uY2xlYXJjb2F0TWFwP2k9bi5jbGVhcmNvYXRNYXA6bi5jbGVhcmNvYXROb3JtYWxNYXA/aT1uLmNsZWFyY29hdE5vcm1hbE1hcDpuLmNsZWFyY29hdFJvdWdobmVzc01hcCYmKGk9bi5jbGVhcmNvYXRSb3VnaG5lc3NNYXApLHZvaWQgMCE9PWkmJihpLmlzV2ViR0xSZW5kZXJUYXJnZXQmJihpPWkudGV4dHVyZSksITA9PT1pLm1hdHJpeEF1dG9VcGRhdGUmJmkudXBkYXRlTWF0cml4KCksZS51dlRyYW5zZm9ybS52YWx1ZS5jb3B5KGkubWF0cml4KSksbi5hb01hcD9vPW4uYW9NYXA6bi5saWdodE1hcCYmKG89bi5saWdodE1hcCksdm9pZCAwIT09byYmKG8uaXNXZWJHTFJlbmRlclRhcmdldCYmKG89by50ZXh0dXJlKSwhMD09PW8ubWF0cml4QXV0b1VwZGF0ZSYmby51cGRhdGVNYXRyaXgoKSxlLnV2MlRyYW5zZm9ybS52YWx1ZS5jb3B5KG8ubWF0cml4KSl9ZnVuY3Rpb24gbihlLG4pe2Uucm91Z2huZXNzLnZhbHVlPW4ucm91Z2huZXNzLGUubWV0YWxuZXNzLnZhbHVlPW4ubWV0YWxuZXNzLG4ucm91Z2huZXNzTWFwJiYoZS5yb3VnaG5lc3NNYXAudmFsdWU9bi5yb3VnaG5lc3NNYXApLG4ubWV0YWxuZXNzTWFwJiYoZS5tZXRhbG5lc3NNYXAudmFsdWU9bi5tZXRhbG5lc3NNYXApLG4uZW1pc3NpdmVNYXAmJihlLmVtaXNzaXZlTWFwLnZhbHVlPW4uZW1pc3NpdmVNYXApLG4uYnVtcE1hcCYmKGUuYnVtcE1hcC52YWx1ZT1uLmJ1bXBNYXAsZS5idW1wU2NhbGUudmFsdWU9bi5idW1wU2NhbGUsbi5zaWRlPT09bSYmKGUuYnVtcFNjYWxlLnZhbHVlKj0tMSkpLG4ubm9ybWFsTWFwJiYoZS5ub3JtYWxNYXAudmFsdWU9bi5ub3JtYWxNYXAsZS5ub3JtYWxTY2FsZS52YWx1ZS5jb3B5KG4ubm9ybWFsU2NhbGUpLG4uc2lkZT09PW0mJmUubm9ybWFsU2NhbGUudmFsdWUubmVnYXRlKCkpLG4uZGlzcGxhY2VtZW50TWFwJiYoZS5kaXNwbGFjZW1lbnRNYXAudmFsdWU9bi5kaXNwbGFjZW1lbnRNYXAsZS5kaXNwbGFjZW1lbnRTY2FsZS52YWx1ZT1uLmRpc3BsYWNlbWVudFNjYWxlLGUuZGlzcGxhY2VtZW50Qmlhcy52YWx1ZT1uLmRpc3BsYWNlbWVudEJpYXMpO3QuZ2V0KG4pLmVudk1hcCYmKGUuZW52TWFwSW50ZW5zaXR5LnZhbHVlPW4uZW52TWFwSW50ZW5zaXR5KX1yZXR1cm57cmVmcmVzaEZvZ1VuaWZvcm1zOmZ1bmN0aW9uKHQsZSl7dC5mb2dDb2xvci52YWx1ZS5jb3B5KGUuY29sb3IpLGUuaXNGb2c/KHQuZm9nTmVhci52YWx1ZT1lLm5lYXIsdC5mb2dGYXIudmFsdWU9ZS5mYXIpOmUuaXNGb2dFeHAyJiYodC5mb2dEZW5zaXR5LnZhbHVlPWUuZGVuc2l0eSl9LHJlZnJlc2hNYXRlcmlhbFVuaWZvcm1zOmZ1bmN0aW9uKHQscixpLG8pe3IuaXNNZXNoQmFzaWNNYXRlcmlhbD9lKHQscik6ci5pc01lc2hMYW1iZXJ0TWF0ZXJpYWw/KGUodCxyKSxmdW5jdGlvbih0LGUpe2UuZW1pc3NpdmVNYXAmJih0LmVtaXNzaXZlTWFwLnZhbHVlPWUuZW1pc3NpdmVNYXApfSh0LHIpKTpyLmlzTWVzaFRvb25NYXRlcmlhbD8oZSh0LHIpLGZ1bmN0aW9uKHQsZSl7ZS5ncmFkaWVudE1hcCYmKHQuZ3JhZGllbnRNYXAudmFsdWU9ZS5ncmFkaWVudE1hcCk7ZS5lbWlzc2l2ZU1hcCYmKHQuZW1pc3NpdmVNYXAudmFsdWU9ZS5lbWlzc2l2ZU1hcCk7ZS5idW1wTWFwJiYodC5idW1wTWFwLnZhbHVlPWUuYnVtcE1hcCx0LmJ1bXBTY2FsZS52YWx1ZT1lLmJ1bXBTY2FsZSxlLnNpZGU9PT1tJiYodC5idW1wU2NhbGUudmFsdWUqPS0xKSk7ZS5ub3JtYWxNYXAmJih0Lm5vcm1hbE1hcC52YWx1ZT1lLm5vcm1hbE1hcCx0Lm5vcm1hbFNjYWxlLnZhbHVlLmNvcHkoZS5ub3JtYWxTY2FsZSksZS5zaWRlPT09bSYmdC5ub3JtYWxTY2FsZS52YWx1ZS5uZWdhdGUoKSk7ZS5kaXNwbGFjZW1lbnRNYXAmJih0LmRpc3BsYWNlbWVudE1hcC52YWx1ZT1lLmRpc3BsYWNlbWVudE1hcCx0LmRpc3BsYWNlbWVudFNjYWxlLnZhbHVlPWUuZGlzcGxhY2VtZW50U2NhbGUsdC5kaXNwbGFjZW1lbnRCaWFzLnZhbHVlPWUuZGlzcGxhY2VtZW50Qmlhcyl9KHQscikpOnIuaXNNZXNoUGhvbmdNYXRlcmlhbD8oZSh0LHIpLGZ1bmN0aW9uKHQsZSl7dC5zcGVjdWxhci52YWx1ZS5jb3B5KGUuc3BlY3VsYXIpLHQuc2hpbmluZXNzLnZhbHVlPU1hdGgubWF4KGUuc2hpbmluZXNzLDFlLTQpLGUuZW1pc3NpdmVNYXAmJih0LmVtaXNzaXZlTWFwLnZhbHVlPWUuZW1pc3NpdmVNYXApO2UuYnVtcE1hcCYmKHQuYnVtcE1hcC52YWx1ZT1lLmJ1bXBNYXAsdC5idW1wU2NhbGUudmFsdWU9ZS5idW1wU2NhbGUsZS5zaWRlPT09bSYmKHQuYnVtcFNjYWxlLnZhbHVlKj0tMSkpO2Uubm9ybWFsTWFwJiYodC5ub3JtYWxNYXAudmFsdWU9ZS5ub3JtYWxNYXAsdC5ub3JtYWxTY2FsZS52YWx1ZS5jb3B5KGUubm9ybWFsU2NhbGUpLGUuc2lkZT09PW0mJnQubm9ybWFsU2NhbGUudmFsdWUubmVnYXRlKCkpO2UuZGlzcGxhY2VtZW50TWFwJiYodC5kaXNwbGFjZW1lbnRNYXAudmFsdWU9ZS5kaXNwbGFjZW1lbnRNYXAsdC5kaXNwbGFjZW1lbnRTY2FsZS52YWx1ZT1lLmRpc3BsYWNlbWVudFNjYWxlLHQuZGlzcGxhY2VtZW50Qmlhcy52YWx1ZT1lLmRpc3BsYWNlbWVudEJpYXMpfSh0LHIpKTpyLmlzTWVzaFN0YW5kYXJkTWF0ZXJpYWw/KGUodCxyKSxyLmlzTWVzaFBoeXNpY2FsTWF0ZXJpYWw/ZnVuY3Rpb24odCxlKXtuKHQsZSksdC5yZWZsZWN0aXZpdHkudmFsdWU9ZS5yZWZsZWN0aXZpdHksdC5jbGVhcmNvYXQudmFsdWU9ZS5jbGVhcmNvYXQsdC5jbGVhcmNvYXRSb3VnaG5lc3MudmFsdWU9ZS5jbGVhcmNvYXRSb3VnaG5lc3MsZS5zaGVlbiYmdC5zaGVlbi52YWx1ZS5jb3B5KGUuc2hlZW4pO2UuY2xlYXJjb2F0TWFwJiYodC5jbGVhcmNvYXRNYXAudmFsdWU9ZS5jbGVhcmNvYXRNYXApO2UuY2xlYXJjb2F0Um91Z2huZXNzTWFwJiYodC5jbGVhcmNvYXRSb3VnaG5lc3NNYXAudmFsdWU9ZS5jbGVhcmNvYXRSb3VnaG5lc3NNYXApO2UuY2xlYXJjb2F0Tm9ybWFsTWFwJiYodC5jbGVhcmNvYXROb3JtYWxTY2FsZS52YWx1ZS5jb3B5KGUuY2xlYXJjb2F0Tm9ybWFsU2NhbGUpLHQuY2xlYXJjb2F0Tm9ybWFsTWFwLnZhbHVlPWUuY2xlYXJjb2F0Tm9ybWFsTWFwLGUuc2lkZT09PW0mJnQuY2xlYXJjb2F0Tm9ybWFsU2NhbGUudmFsdWUubmVnYXRlKCkpO3QudHJhbnNtaXNzaW9uLnZhbHVlPWUudHJhbnNtaXNzaW9uLGUudHJhbnNtaXNzaW9uTWFwJiYodC50cmFuc21pc3Npb25NYXAudmFsdWU9ZS50cmFuc21pc3Npb25NYXApfSh0LHIpOm4odCxyKSk6ci5pc01lc2hNYXRjYXBNYXRlcmlhbD8oZSh0LHIpLGZ1bmN0aW9uKHQsZSl7ZS5tYXRjYXAmJih0Lm1hdGNhcC52YWx1ZT1lLm1hdGNhcCk7ZS5idW1wTWFwJiYodC5idW1wTWFwLnZhbHVlPWUuYnVtcE1hcCx0LmJ1bXBTY2FsZS52YWx1ZT1lLmJ1bXBTY2FsZSxlLnNpZGU9PT1tJiYodC5idW1wU2NhbGUudmFsdWUqPS0xKSk7ZS5ub3JtYWxNYXAmJih0Lm5vcm1hbE1hcC52YWx1ZT1lLm5vcm1hbE1hcCx0Lm5vcm1hbFNjYWxlLnZhbHVlLmNvcHkoZS5ub3JtYWxTY2FsZSksZS5zaWRlPT09bSYmdC5ub3JtYWxTY2FsZS52YWx1ZS5uZWdhdGUoKSk7ZS5kaXNwbGFjZW1lbnRNYXAmJih0LmRpc3BsYWNlbWVudE1hcC52YWx1ZT1lLmRpc3BsYWNlbWVudE1hcCx0LmRpc3BsYWNlbWVudFNjYWxlLnZhbHVlPWUuZGlzcGxhY2VtZW50U2NhbGUsdC5kaXNwbGFjZW1lbnRCaWFzLnZhbHVlPWUuZGlzcGxhY2VtZW50Qmlhcyl9KHQscikpOnIuaXNNZXNoRGVwdGhNYXRlcmlhbD8oZSh0LHIpLGZ1bmN0aW9uKHQsZSl7ZS5kaXNwbGFjZW1lbnRNYXAmJih0LmRpc3BsYWNlbWVudE1hcC52YWx1ZT1lLmRpc3BsYWNlbWVudE1hcCx0LmRpc3BsYWNlbWVudFNjYWxlLnZhbHVlPWUuZGlzcGxhY2VtZW50U2NhbGUsdC5kaXNwbGFjZW1lbnRCaWFzLnZhbHVlPWUuZGlzcGxhY2VtZW50Qmlhcyl9KHQscikpOnIuaXNNZXNoRGlzdGFuY2VNYXRlcmlhbD8oZSh0LHIpLGZ1bmN0aW9uKHQsZSl7ZS5kaXNwbGFjZW1lbnRNYXAmJih0LmRpc3BsYWNlbWVudE1hcC52YWx1ZT1lLmRpc3BsYWNlbWVudE1hcCx0LmRpc3BsYWNlbWVudFNjYWxlLnZhbHVlPWUuZGlzcGxhY2VtZW50U2NhbGUsdC5kaXNwbGFjZW1lbnRCaWFzLnZhbHVlPWUuZGlzcGxhY2VtZW50Qmlhcyk7dC5yZWZlcmVuY2VQb3NpdGlvbi52YWx1ZS5jb3B5KGUucmVmZXJlbmNlUG9zaXRpb24pLHQubmVhckRpc3RhbmNlLnZhbHVlPWUubmVhckRpc3RhbmNlLHQuZmFyRGlzdGFuY2UudmFsdWU9ZS5mYXJEaXN0YW5jZX0odCxyKSk6ci5pc01lc2hOb3JtYWxNYXRlcmlhbD8oZSh0LHIpLGZ1bmN0aW9uKHQsZSl7ZS5idW1wTWFwJiYodC5idW1wTWFwLnZhbHVlPWUuYnVtcE1hcCx0LmJ1bXBTY2FsZS52YWx1ZT1lLmJ1bXBTY2FsZSxlLnNpZGU9PT1tJiYodC5idW1wU2NhbGUudmFsdWUqPS0xKSk7ZS5ub3JtYWxNYXAmJih0Lm5vcm1hbE1hcC52YWx1ZT1lLm5vcm1hbE1hcCx0Lm5vcm1hbFNjYWxlLnZhbHVlLmNvcHkoZS5ub3JtYWxTY2FsZSksZS5zaWRlPT09bSYmdC5ub3JtYWxTY2FsZS52YWx1ZS5uZWdhdGUoKSk7ZS5kaXNwbGFjZW1lbnRNYXAmJih0LmRpc3BsYWNlbWVudE1hcC52YWx1ZT1lLmRpc3BsYWNlbWVudE1hcCx0LmRpc3BsYWNlbWVudFNjYWxlLnZhbHVlPWUuZGlzcGxhY2VtZW50U2NhbGUsdC5kaXNwbGFjZW1lbnRCaWFzLnZhbHVlPWUuZGlzcGxhY2VtZW50Qmlhcyl9KHQscikpOnIuaXNMaW5lQmFzaWNNYXRlcmlhbD8oZnVuY3Rpb24odCxlKXt0LmRpZmZ1c2UudmFsdWUuY29weShlLmNvbG9yKSx0Lm9wYWNpdHkudmFsdWU9ZS5vcGFjaXR5fSh0LHIpLHIuaXNMaW5lRGFzaGVkTWF0ZXJpYWwmJmZ1bmN0aW9uKHQsZSl7dC5kYXNoU2l6ZS52YWx1ZT1lLmRhc2hTaXplLHQudG90YWxTaXplLnZhbHVlPWUuZGFzaFNpemUrZS5nYXBTaXplLHQuc2NhbGUudmFsdWU9ZS5zY2FsZX0odCxyKSk6ci5pc1BvaW50c01hdGVyaWFsP2Z1bmN0aW9uKHQsZSxuLHIpe3QuZGlmZnVzZS52YWx1ZS5jb3B5KGUuY29sb3IpLHQub3BhY2l0eS52YWx1ZT1lLm9wYWNpdHksdC5zaXplLnZhbHVlPWUuc2l6ZSpuLHQuc2NhbGUudmFsdWU9LjUqcixlLm1hcCYmKHQubWFwLnZhbHVlPWUubWFwKTtlLmFscGhhTWFwJiYodC5hbHBoYU1hcC52YWx1ZT1lLmFscGhhTWFwKTtsZXQgaTtlLm1hcD9pPWUubWFwOmUuYWxwaGFNYXAmJihpPWUuYWxwaGFNYXApO3ZvaWQgMCE9PWkmJighMD09PWkubWF0cml4QXV0b1VwZGF0ZSYmaS51cGRhdGVNYXRyaXgoKSx0LnV2VHJhbnNmb3JtLnZhbHVlLmNvcHkoaS5tYXRyaXgpKX0odCxyLGksbyk6ci5pc1Nwcml0ZU1hdGVyaWFsP2Z1bmN0aW9uKHQsZSl7dC5kaWZmdXNlLnZhbHVlLmNvcHkoZS5jb2xvciksdC5vcGFjaXR5LnZhbHVlPWUub3BhY2l0eSx0LnJvdGF0aW9uLnZhbHVlPWUucm90YXRpb24sZS5tYXAmJih0Lm1hcC52YWx1ZT1lLm1hcCk7ZS5hbHBoYU1hcCYmKHQuYWxwaGFNYXAudmFsdWU9ZS5hbHBoYU1hcCk7bGV0IG47ZS5tYXA/bj1lLm1hcDplLmFscGhhTWFwJiYobj1lLmFscGhhTWFwKTt2b2lkIDAhPT1uJiYoITA9PT1uLm1hdHJpeEF1dG9VcGRhdGUmJm4udXBkYXRlTWF0cml4KCksdC51dlRyYW5zZm9ybS52YWx1ZS5jb3B5KG4ubWF0cml4KSl9KHQscik6ci5pc1NoYWRvd01hdGVyaWFsPyh0LmNvbG9yLnZhbHVlLmNvcHkoci5jb2xvciksdC5vcGFjaXR5LnZhbHVlPXIub3BhY2l0eSk6ci5pc1NoYWRlck1hdGVyaWFsJiYoci51bmlmb3Jtc05lZWRVcGRhdGU9ITEpfX19ZnVuY3Rpb24gRHModCl7Y29uc3QgZT12b2lkIDAhPT0odD10fHx7fSkuY2FudmFzP3QuY2FudmFzOmZ1bmN0aW9uKCl7Y29uc3QgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sXCIsXCJjYW52YXNcIik7cmV0dXJuIHQuc3R5bGUuZGlzcGxheT1cImJsb2NrXCIsdH0oKSxuPXZvaWQgMCE9PXQuY29udGV4dD90LmNvbnRleHQ6bnVsbCxyPXZvaWQgMCE9PXQuYWxwaGEmJnQuYWxwaGEsaT12b2lkIDA9PT10LmRlcHRofHx0LmRlcHRoLG89dm9pZCAwPT09dC5zdGVuY2lsfHx0LnN0ZW5jaWwsYT12b2lkIDAhPT10LmFudGlhbGlhcyYmdC5hbnRpYWxpYXMscz12b2lkIDA9PT10LnByZW11bHRpcGxpZWRBbHBoYXx8dC5wcmVtdWx0aXBsaWVkQWxwaGEsYz12b2lkIDAhPT10LnByZXNlcnZlRHJhd2luZ0J1ZmZlciYmdC5wcmVzZXJ2ZURyYXdpbmdCdWZmZXIsbD12b2lkIDAhPT10LnBvd2VyUHJlZmVyZW5jZT90LnBvd2VyUHJlZmVyZW5jZTpcImRlZmF1bHRcIix1PXZvaWQgMCE9PXQuZmFpbElmTWFqb3JQZXJmb3JtYW5jZUNhdmVhdCYmdC5mYWlsSWZNYWpvclBlcmZvcm1hbmNlQ2F2ZWF0O2xldCBoPW51bGwsZD1udWxsO3RoaXMuZG9tRWxlbWVudD1lLHRoaXMuZGVidWc9e2NoZWNrU2hhZGVyRXJyb3JzOiEwfSx0aGlzLmF1dG9DbGVhcj0hMCx0aGlzLmF1dG9DbGVhckNvbG9yPSEwLHRoaXMuYXV0b0NsZWFyRGVwdGg9ITAsdGhpcy5hdXRvQ2xlYXJTdGVuY2lsPSEwLHRoaXMuc29ydE9iamVjdHM9ITAsdGhpcy5jbGlwcGluZ1BsYW5lcz1bXSx0aGlzLmxvY2FsQ2xpcHBpbmdFbmFibGVkPSExLHRoaXMuZ2FtbWFGYWN0b3I9Mix0aGlzLm91dHB1dEVuY29kaW5nPUplLHRoaXMucGh5c2ljYWxseUNvcnJlY3RMaWdodHM9ITEsdGhpcy50b25lTWFwcGluZz1RLHRoaXMudG9uZU1hcHBpbmdFeHBvc3VyZT0xLHRoaXMubWF4TW9ycGhUYXJnZXRzPTgsdGhpcy5tYXhNb3JwaE5vcm1hbHM9NDtjb25zdCBwPXRoaXM7bGV0IGY9ITEsbT1udWxsLGc9MCx2PTAseT1udWxsLHg9bnVsbCxiPS0xLHc9bnVsbCxfPW51bGw7Y29uc3QgTT1uZXcgcW4sUz1uZXcgcW47bGV0IFQ9bnVsbCxFPWUud2lkdGgsQT1lLmhlaWdodCxMPTEsUj1udWxsLFA9bnVsbDtjb25zdCBDPW5ldyBxbigwLDAsRSxBKSxJPW5ldyBxbigwLDAsRSxBKTtsZXQgTz0hMTtjb25zdCBOPW5ldyBMbztsZXQgRD0hMSxCPSExO2NvbnN0IEY9bmV3IFRyLFU9bmV3IEtuLHo9e2JhY2tncm91bmQ6bnVsbCxmb2c6bnVsbCxlbnZpcm9ubWVudDpudWxsLG92ZXJyaWRlTWF0ZXJpYWw6bnVsbCxpc1NjZW5lOiEwfTtmdW5jdGlvbiBHKCl7cmV0dXJuIG51bGw9PT15P0w6MX1sZXQgSCxrLFYsaixXLFgscSxZLFosSixLLCQsdHQsZXQsbnQscnQsaXQsb3QsYXQsc3QsY3QsbHQ9bjtmdW5jdGlvbiB1dCh0LG4pe2ZvcihsZXQgcj0wO3I8dC5sZW5ndGg7cisrKXtjb25zdCBpPXRbcl0sbz1lLmdldENvbnRleHQoaSxuKTtpZihudWxsIT09bylyZXR1cm4gb31yZXR1cm4gbnVsbH10cnl7Y29uc3QgdD17YWxwaGE6cixkZXB0aDppLHN0ZW5jaWw6byxhbnRpYWxpYXM6YSxwcmVtdWx0aXBsaWVkQWxwaGE6cyxwcmVzZXJ2ZURyYXdpbmdCdWZmZXI6Yyxwb3dlclByZWZlcmVuY2U6bCxmYWlsSWZNYWpvclBlcmZvcm1hbmNlQ2F2ZWF0OnV9O2lmKGUuYWRkRXZlbnRMaXN0ZW5lcihcIndlYmdsY29udGV4dGxvc3RcIixmdCwhMSksZS5hZGRFdmVudExpc3RlbmVyKFwid2ViZ2xjb250ZXh0cmVzdG9yZWRcIixtdCwhMSksbnVsbD09PWx0KXtjb25zdCBlPVtcIndlYmdsMlwiLFwid2ViZ2xcIixcImV4cGVyaW1lbnRhbC13ZWJnbFwiXTtpZighMD09PXAuaXNXZWJHTDFSZW5kZXJlciYmZS5zaGlmdCgpLGx0PXV0KGUsdCksbnVsbD09PWx0KXRocm93IHV0KGUpP25ldyBFcnJvcihcIkVycm9yIGNyZWF0aW5nIFdlYkdMIGNvbnRleHQgd2l0aCB5b3VyIHNlbGVjdGVkIGF0dHJpYnV0ZXMuXCIpOm5ldyBFcnJvcihcIkVycm9yIGNyZWF0aW5nIFdlYkdMIGNvbnRleHQuXCIpfXZvaWQgMD09PWx0LmdldFNoYWRlclByZWNpc2lvbkZvcm1hdCYmKGx0LmdldFNoYWRlclByZWNpc2lvbkZvcm1hdD1mdW5jdGlvbigpe3JldHVybntyYW5nZU1pbjoxLHJhbmdlTWF4OjEscHJlY2lzaW9uOjF9fSl9Y2F0Y2godCl7dGhyb3cgY29uc29sZS5lcnJvcihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IFwiK3QubWVzc2FnZSksdH1mdW5jdGlvbiBodCgpe0g9bmV3IEhvKGx0KSxrPW5ldyBVbyhsdCxILHQpLCExPT09ay5pc1dlYkdMMiYmKEguZ2V0KFwiV0VCR0xfZGVwdGhfdGV4dHVyZVwiKSxILmdldChcIk9FU190ZXh0dXJlX2Zsb2F0XCIpLEguZ2V0KFwiT0VTX3RleHR1cmVfaGFsZl9mbG9hdFwiKSxILmdldChcIk9FU190ZXh0dXJlX2hhbGZfZmxvYXRfbGluZWFyXCIpLEguZ2V0KFwiT0VTX3N0YW5kYXJkX2Rlcml2YXRpdmVzXCIpLEguZ2V0KFwiT0VTX2VsZW1lbnRfaW5kZXhfdWludFwiKSxILmdldChcIk9FU192ZXJ0ZXhfYXJyYXlfb2JqZWN0XCIpLEguZ2V0KFwiQU5HTEVfaW5zdGFuY2VkX2FycmF5c1wiKSksSC5nZXQoXCJPRVNfdGV4dHVyZV9mbG9hdF9saW5lYXJcIiksc3Q9bmV3IFJzKGx0LEgsayksVj1uZXcgQXMobHQsSCxrKSxWLnNjaXNzb3IoUy5jb3B5KEkpLm11bHRpcGx5U2NhbGFyKEwpLmZsb29yKCkpLFYudmlld3BvcnQoTS5jb3B5KEMpLm11bHRpcGx5U2NhbGFyKEwpLmZsb29yKCkpLGo9bmV3IGpvKGx0KSxXPW5ldyBwcyxYPW5ldyBMcyhsdCxILFYsVyxrLHN0LGopLHE9bmV3IEdvKHApLFk9bmV3IFBvKGx0LGspLGN0PW5ldyBCbyhsdCxILFksayksWj1uZXcga28obHQsWSxqLGN0KSxKPW5ldyBZbyhsdCxaLFksaiksaXQ9bmV3IHFvKGx0KSxudD1uZXcgem8oVyksSz1uZXcgZHMocCxxLEgsayxjdCxudCksJD1uZXcgTnMoVyksdHQ9bmV3IHZzKFcpLGV0PW5ldyBNcyhILGspLHJ0PW5ldyBEbyhwLHEsVixKLHMpLG90PW5ldyBGbyhsdCxILGosayksYXQ9bmV3IFZvKGx0LEgsaixrKSxqLnByb2dyYW1zPUsucHJvZ3JhbXMscC5jYXBhYmlsaXRpZXM9ayxwLmV4dGVuc2lvbnM9SCxwLnByb3BlcnRpZXM9VyxwLnJlbmRlckxpc3RzPXR0LHAuc3RhdGU9VixwLmluZm89an1odCgpO2NvbnN0IGR0PW5ldyBPcyhwLGx0KTt0aGlzLnhyPWR0O2NvbnN0IHB0PW5ldyBFcyhwLEosay5tYXhUZXh0dXJlU2l6ZSk7ZnVuY3Rpb24gZnQodCl7dC5wcmV2ZW50RGVmYXVsdCgpLGNvbnNvbGUubG9nKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogQ29udGV4dCBMb3N0LlwiKSxmPSEwfWZ1bmN0aW9uIG10KCl7Y29uc29sZS5sb2coXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiBDb250ZXh0IFJlc3RvcmVkLlwiKSxmPSExLGh0KCl9ZnVuY3Rpb24gZ3QodCl7Y29uc3QgZT10LnRhcmdldDtlLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJkaXNwb3NlXCIsZ3QpLGZ1bmN0aW9uKHQpe3Z0KHQpLFcucmVtb3ZlKHQpfShlKX1mdW5jdGlvbiB2dCh0KXtjb25zdCBlPVcuZ2V0KHQpLnByb2dyYW07dm9pZCAwIT09ZSYmSy5yZWxlYXNlUHJvZ3JhbShlKX10aGlzLnNoYWRvd01hcD1wdCx0aGlzLmdldENvbnRleHQ9ZnVuY3Rpb24oKXtyZXR1cm4gbHR9LHRoaXMuZ2V0Q29udGV4dEF0dHJpYnV0ZXM9ZnVuY3Rpb24oKXtyZXR1cm4gbHQuZ2V0Q29udGV4dEF0dHJpYnV0ZXMoKX0sdGhpcy5mb3JjZUNvbnRleHRMb3NzPWZ1bmN0aW9uKCl7Y29uc3QgdD1ILmdldChcIldFQkdMX2xvc2VfY29udGV4dFwiKTt0JiZ0Lmxvc2VDb250ZXh0KCl9LHRoaXMuZm9yY2VDb250ZXh0UmVzdG9yZT1mdW5jdGlvbigpe2NvbnN0IHQ9SC5nZXQoXCJXRUJHTF9sb3NlX2NvbnRleHRcIik7dCYmdC5yZXN0b3JlQ29udGV4dCgpfSx0aGlzLmdldFBpeGVsUmF0aW89ZnVuY3Rpb24oKXtyZXR1cm4gTH0sdGhpcy5zZXRQaXhlbFJhdGlvPWZ1bmN0aW9uKHQpe3ZvaWQgMCE9PXQmJihMPXQsdGhpcy5zZXRTaXplKEUsQSwhMSkpfSx0aGlzLmdldFNpemU9ZnVuY3Rpb24odCl7cmV0dXJuIHZvaWQgMD09PXQmJihjb25zb2xlLndhcm4oXCJXZWJHTFJlbmRlcmVyOiAuZ2V0c2l6ZSgpIG5vdyByZXF1aXJlcyBhIFZlY3RvcjIgYXMgYW4gYXJndW1lbnRcIiksdD1uZXcgR24pLHQuc2V0KEUsQSl9LHRoaXMuc2V0U2l6ZT1mdW5jdGlvbih0LG4scil7ZHQuaXNQcmVzZW50aW5nP2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IENhbid0IGNoYW5nZSBzaXplIHdoaWxlIFZSIGRldmljZSBpcyBwcmVzZW50aW5nLlwiKTooRT10LEE9bixlLndpZHRoPU1hdGguZmxvb3IodCpMKSxlLmhlaWdodD1NYXRoLmZsb29yKG4qTCksITEhPT1yJiYoZS5zdHlsZS53aWR0aD10K1wicHhcIixlLnN0eWxlLmhlaWdodD1uK1wicHhcIiksdGhpcy5zZXRWaWV3cG9ydCgwLDAsdCxuKSl9LHRoaXMuZ2V0RHJhd2luZ0J1ZmZlclNpemU9ZnVuY3Rpb24odCl7cmV0dXJuIHZvaWQgMD09PXQmJihjb25zb2xlLndhcm4oXCJXZWJHTFJlbmRlcmVyOiAuZ2V0ZHJhd2luZ0J1ZmZlclNpemUoKSBub3cgcmVxdWlyZXMgYSBWZWN0b3IyIGFzIGFuIGFyZ3VtZW50XCIpLHQ9bmV3IEduKSx0LnNldChFKkwsQSpMKS5mbG9vcigpfSx0aGlzLnNldERyYXdpbmdCdWZmZXJTaXplPWZ1bmN0aW9uKHQsbixyKXtFPXQsQT1uLEw9cixlLndpZHRoPU1hdGguZmxvb3IodCpyKSxlLmhlaWdodD1NYXRoLmZsb29yKG4qciksdGhpcy5zZXRWaWV3cG9ydCgwLDAsdCxuKX0sdGhpcy5nZXRDdXJyZW50Vmlld3BvcnQ9ZnVuY3Rpb24odCl7cmV0dXJuIHZvaWQgMD09PXQmJihjb25zb2xlLndhcm4oXCJXZWJHTFJlbmRlcmVyOiAuZ2V0Q3VycmVudFZpZXdwb3J0KCkgbm93IHJlcXVpcmVzIGEgVmVjdG9yNCBhcyBhbiBhcmd1bWVudFwiKSx0PW5ldyBxbiksdC5jb3B5KE0pfSx0aGlzLmdldFZpZXdwb3J0PWZ1bmN0aW9uKHQpe3JldHVybiB0LmNvcHkoQyl9LHRoaXMuc2V0Vmlld3BvcnQ9ZnVuY3Rpb24odCxlLG4scil7dC5pc1ZlY3RvcjQ/Qy5zZXQodC54LHQueSx0LnosdC53KTpDLnNldCh0LGUsbixyKSxWLnZpZXdwb3J0KE0uY29weShDKS5tdWx0aXBseVNjYWxhcihMKS5mbG9vcigpKX0sdGhpcy5nZXRTY2lzc29yPWZ1bmN0aW9uKHQpe3JldHVybiB0LmNvcHkoSSl9LHRoaXMuc2V0U2Npc3Nvcj1mdW5jdGlvbih0LGUsbixyKXt0LmlzVmVjdG9yND9JLnNldCh0LngsdC55LHQueix0LncpOkkuc2V0KHQsZSxuLHIpLFYuc2Npc3NvcihTLmNvcHkoSSkubXVsdGlwbHlTY2FsYXIoTCkuZmxvb3IoKSl9LHRoaXMuZ2V0U2Npc3NvclRlc3Q9ZnVuY3Rpb24oKXtyZXR1cm4gT30sdGhpcy5zZXRTY2lzc29yVGVzdD1mdW5jdGlvbih0KXtWLnNldFNjaXNzb3JUZXN0KE89dCl9LHRoaXMuc2V0T3BhcXVlU29ydD1mdW5jdGlvbih0KXtSPXR9LHRoaXMuc2V0VHJhbnNwYXJlbnRTb3J0PWZ1bmN0aW9uKHQpe1A9dH0sdGhpcy5nZXRDbGVhckNvbG9yPWZ1bmN0aW9uKCl7cmV0dXJuIHJ0LmdldENsZWFyQ29sb3IoKX0sdGhpcy5zZXRDbGVhckNvbG9yPWZ1bmN0aW9uKCl7cnQuc2V0Q2xlYXJDb2xvci5hcHBseShydCxhcmd1bWVudHMpfSx0aGlzLmdldENsZWFyQWxwaGE9ZnVuY3Rpb24oKXtyZXR1cm4gcnQuZ2V0Q2xlYXJBbHBoYSgpfSx0aGlzLnNldENsZWFyQWxwaGE9ZnVuY3Rpb24oKXtydC5zZXRDbGVhckFscGhhLmFwcGx5KHJ0LGFyZ3VtZW50cyl9LHRoaXMuY2xlYXI9ZnVuY3Rpb24odCxlLG4pe2xldCByPTA7KHZvaWQgMD09PXR8fHQpJiYocnw9MTYzODQpLCh2b2lkIDA9PT1lfHxlKSYmKHJ8PTI1NiksKHZvaWQgMD09PW58fG4pJiYocnw9MTAyNCksbHQuY2xlYXIocil9LHRoaXMuY2xlYXJDb2xvcj1mdW5jdGlvbigpe3RoaXMuY2xlYXIoITAsITEsITEpfSx0aGlzLmNsZWFyRGVwdGg9ZnVuY3Rpb24oKXt0aGlzLmNsZWFyKCExLCEwLCExKX0sdGhpcy5jbGVhclN0ZW5jaWw9ZnVuY3Rpb24oKXt0aGlzLmNsZWFyKCExLCExLCEwKX0sdGhpcy5kaXNwb3NlPWZ1bmN0aW9uKCl7ZS5yZW1vdmVFdmVudExpc3RlbmVyKFwid2ViZ2xjb250ZXh0bG9zdFwiLGZ0LCExKSxlLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ3ZWJnbGNvbnRleHRyZXN0b3JlZFwiLG10LCExKSx0dC5kaXNwb3NlKCksZXQuZGlzcG9zZSgpLFcuZGlzcG9zZSgpLHEuZGlzcG9zZSgpLEouZGlzcG9zZSgpLGN0LmRpc3Bvc2UoKSxkdC5kaXNwb3NlKCkseHQuc3RvcCgpfSx0aGlzLnJlbmRlckJ1ZmZlckltbWVkaWF0ZT1mdW5jdGlvbih0LGUpe2N0LmluaXRBdHRyaWJ1dGVzKCk7Y29uc3Qgbj1XLmdldCh0KTt0Lmhhc1Bvc2l0aW9ucyYmIW4ucG9zaXRpb24mJihuLnBvc2l0aW9uPWx0LmNyZWF0ZUJ1ZmZlcigpKSx0Lmhhc05vcm1hbHMmJiFuLm5vcm1hbCYmKG4ubm9ybWFsPWx0LmNyZWF0ZUJ1ZmZlcigpKSx0Lmhhc1V2cyYmIW4udXYmJihuLnV2PWx0LmNyZWF0ZUJ1ZmZlcigpKSx0Lmhhc0NvbG9ycyYmIW4uY29sb3ImJihuLmNvbG9yPWx0LmNyZWF0ZUJ1ZmZlcigpKTtjb25zdCByPWUuZ2V0QXR0cmlidXRlcygpO3QuaGFzUG9zaXRpb25zJiYobHQuYmluZEJ1ZmZlcigzNDk2MixuLnBvc2l0aW9uKSxsdC5idWZmZXJEYXRhKDM0OTYyLHQucG9zaXRpb25BcnJheSwzNTA0OCksY3QuZW5hYmxlQXR0cmlidXRlKHIucG9zaXRpb24pLGx0LnZlcnRleEF0dHJpYlBvaW50ZXIoci5wb3NpdGlvbiwzLDUxMjYsITEsMCwwKSksdC5oYXNOb3JtYWxzJiYobHQuYmluZEJ1ZmZlcigzNDk2MixuLm5vcm1hbCksbHQuYnVmZmVyRGF0YSgzNDk2Mix0Lm5vcm1hbEFycmF5LDM1MDQ4KSxjdC5lbmFibGVBdHRyaWJ1dGUoci5ub3JtYWwpLGx0LnZlcnRleEF0dHJpYlBvaW50ZXIoci5ub3JtYWwsMyw1MTI2LCExLDAsMCkpLHQuaGFzVXZzJiYobHQuYmluZEJ1ZmZlcigzNDk2MixuLnV2KSxsdC5idWZmZXJEYXRhKDM0OTYyLHQudXZBcnJheSwzNTA0OCksY3QuZW5hYmxlQXR0cmlidXRlKHIudXYpLGx0LnZlcnRleEF0dHJpYlBvaW50ZXIoci51diwyLDUxMjYsITEsMCwwKSksdC5oYXNDb2xvcnMmJihsdC5iaW5kQnVmZmVyKDM0OTYyLG4uY29sb3IpLGx0LmJ1ZmZlckRhdGEoMzQ5NjIsdC5jb2xvckFycmF5LDM1MDQ4KSxjdC5lbmFibGVBdHRyaWJ1dGUoci5jb2xvciksbHQudmVydGV4QXR0cmliUG9pbnRlcihyLmNvbG9yLDMsNTEyNiwhMSwwLDApKSxjdC5kaXNhYmxlVW51c2VkQXR0cmlidXRlcygpLGx0LmRyYXdBcnJheXMoNCwwLHQuY291bnQpLHQuY291bnQ9MH0sdGhpcy5yZW5kZXJCdWZmZXJEaXJlY3Q9ZnVuY3Rpb24odCxlLG4scixpLG8pe251bGw9PT1lJiYoZT16KTtjb25zdCBhPWkuaXNNZXNoJiZpLm1hdHJpeFdvcmxkLmRldGVybWluYW50KCk8MCxzPVR0KHQsZSxyLGkpO1Yuc2V0TWF0ZXJpYWwocixhKTtsZXQgYz1uLmluZGV4O2NvbnN0IGw9bi5hdHRyaWJ1dGVzLnBvc2l0aW9uO2lmKG51bGw9PT1jKXtpZih2b2lkIDA9PT1sfHwwPT09bC5jb3VudClyZXR1cm59ZWxzZSBpZigwPT09Yy5jb3VudClyZXR1cm47bGV0IHUsaD0xOyEwPT09ci53aXJlZnJhbWUmJihjPVouZ2V0V2lyZWZyYW1lQXR0cmlidXRlKG4pLGg9MiksKHIubW9ycGhUYXJnZXRzfHxyLm1vcnBoTm9ybWFscykmJml0LnVwZGF0ZShpLG4scixzKSxjdC5zZXR1cChpLHIscyxuLGMpO2xldCBkPW90O251bGwhPT1jJiYodT1ZLmdldChjKSxkPWF0LGQuc2V0SW5kZXgodSkpO2NvbnN0IHA9bnVsbCE9PWM/Yy5jb3VudDpsLmNvdW50LGY9bi5kcmF3UmFuZ2Uuc3RhcnQqaCxtPW4uZHJhd1JhbmdlLmNvdW50KmgsZz1udWxsIT09bz9vLnN0YXJ0Kmg6MCx2PW51bGwhPT1vP28uY291bnQqaDoxLzAseT1NYXRoLm1heChmLGcpLHg9TWF0aC5taW4ocCxmK20sZyt2KS0xLGI9TWF0aC5tYXgoMCx4LXkrMSk7aWYoMCE9PWIpe2lmKGkuaXNNZXNoKSEwPT09ci53aXJlZnJhbWU/KFYuc2V0TGluZVdpZHRoKHIud2lyZWZyYW1lTGluZXdpZHRoKkcoKSksZC5zZXRNb2RlKDEpKTpkLnNldE1vZGUoNCk7ZWxzZSBpZihpLmlzTGluZSl7bGV0IHQ9ci5saW5ld2lkdGg7dm9pZCAwPT09dCYmKHQ9MSksVi5zZXRMaW5lV2lkdGgodCpHKCkpLGkuaXNMaW5lU2VnbWVudHM/ZC5zZXRNb2RlKDEpOmkuaXNMaW5lTG9vcD9kLnNldE1vZGUoMik6ZC5zZXRNb2RlKDMpfWVsc2UgaS5pc1BvaW50cz9kLnNldE1vZGUoMCk6aS5pc1Nwcml0ZSYmZC5zZXRNb2RlKDQpO2lmKGkuaXNJbnN0YW5jZWRNZXNoKWQucmVuZGVySW5zdGFuY2VzKHksYixpLmNvdW50KTtlbHNlIGlmKG4uaXNJbnN0YW5jZWRCdWZmZXJHZW9tZXRyeSl7Y29uc3QgdD1NYXRoLm1pbihuLmluc3RhbmNlQ291bnQsbi5fbWF4SW5zdGFuY2VDb3VudCk7ZC5yZW5kZXJJbnN0YW5jZXMoeSxiLHQpfWVsc2UgZC5yZW5kZXIoeSxiKX19LHRoaXMuY29tcGlsZT1mdW5jdGlvbih0LGUpe2Q9ZXQuZ2V0KHQsZSksZC5pbml0KCksdC50cmF2ZXJzZVZpc2libGUoKGZ1bmN0aW9uKHQpe3QuaXNMaWdodCYmdC5sYXllcnMudGVzdChlLmxheWVycykmJihkLnB1c2hMaWdodCh0KSx0LmNhc3RTaGFkb3cmJmQucHVzaFNoYWRvdyh0KSl9KSksZC5zZXR1cExpZ2h0cyhlKTtjb25zdCBuPW5ldyBXZWFrTWFwO3QudHJhdmVyc2UoKGZ1bmN0aW9uKGUpe2NvbnN0IHI9ZS5tYXRlcmlhbDtpZihyKWlmKEFycmF5LmlzQXJyYXkocikpZm9yKGxldCBpPTA7aTxyLmxlbmd0aDtpKyspe2NvbnN0IG89cltpXTshMT09PW4uaGFzKG8pJiYoTXQobyx0LGUpLG4uc2V0KG8pKX1lbHNlITE9PT1uLmhhcyhyKSYmKE10KHIsdCxlKSxuLnNldChyKSl9KSl9O2xldCB5dD1udWxsO2NvbnN0IHh0PW5ldyBSbztmdW5jdGlvbiBidCh0LGUsbixyKXtpZighMT09PXQudmlzaWJsZSlyZXR1cm47aWYodC5sYXllcnMudGVzdChlLmxheWVycykpaWYodC5pc0dyb3VwKW49dC5yZW5kZXJPcmRlcjtlbHNlIGlmKHQuaXNMT0QpITA9PT10LmF1dG9VcGRhdGUmJnQudXBkYXRlKGUpO2Vsc2UgaWYodC5pc0xpZ2h0KWQucHVzaExpZ2h0KHQpLHQuY2FzdFNoYWRvdyYmZC5wdXNoU2hhZG93KHQpO2Vsc2UgaWYodC5pc1Nwcml0ZSl7aWYoIXQuZnJ1c3R1bUN1bGxlZHx8Ti5pbnRlcnNlY3RzU3ByaXRlKHQpKXtyJiZVLnNldEZyb21NYXRyaXhQb3NpdGlvbih0Lm1hdHJpeFdvcmxkKS5hcHBseU1hdHJpeDQoRik7Y29uc3QgZT1KLnVwZGF0ZSh0KSxpPXQubWF0ZXJpYWw7aS52aXNpYmxlJiZoLnB1c2godCxlLGksbixVLnosbnVsbCl9fWVsc2UgaWYodC5pc0ltbWVkaWF0ZVJlbmRlck9iamVjdClyJiZVLnNldEZyb21NYXRyaXhQb3NpdGlvbih0Lm1hdHJpeFdvcmxkKS5hcHBseU1hdHJpeDQoRiksaC5wdXNoKHQsbnVsbCx0Lm1hdGVyaWFsLG4sVS56LG51bGwpO2Vsc2UgaWYoKHQuaXNNZXNofHx0LmlzTGluZXx8dC5pc1BvaW50cykmJih0LmlzU2tpbm5lZE1lc2gmJnQuc2tlbGV0b24uZnJhbWUhPT1qLnJlbmRlci5mcmFtZSYmKHQuc2tlbGV0b24udXBkYXRlKCksdC5za2VsZXRvbi5mcmFtZT1qLnJlbmRlci5mcmFtZSksIXQuZnJ1c3R1bUN1bGxlZHx8Ti5pbnRlcnNlY3RzT2JqZWN0KHQpKSl7ciYmVS5zZXRGcm9tTWF0cml4UG9zaXRpb24odC5tYXRyaXhXb3JsZCkuYXBwbHlNYXRyaXg0KEYpO2NvbnN0IGU9Si51cGRhdGUodCksaT10Lm1hdGVyaWFsO2lmKEFycmF5LmlzQXJyYXkoaSkpe2NvbnN0IHI9ZS5ncm91cHM7Zm9yKGxldCBvPTAsYT1yLmxlbmd0aDtvPGE7bysrKXtjb25zdCBhPXJbb10scz1pW2EubWF0ZXJpYWxJbmRleF07cyYmcy52aXNpYmxlJiZoLnB1c2godCxlLHMsbixVLnosYSl9fWVsc2UgaS52aXNpYmxlJiZoLnB1c2godCxlLGksbixVLnosbnVsbCl9Y29uc3QgaT10LmNoaWxkcmVuO2ZvcihsZXQgdD0wLG89aS5sZW5ndGg7dDxvO3QrKylidChpW3RdLGUsbixyKX1mdW5jdGlvbiB3dCh0LGUsbil7Y29uc3Qgcj0hMD09PWUuaXNTY2VuZT9lLm92ZXJyaWRlTWF0ZXJpYWw6bnVsbDtmb3IobGV0IGk9MCxvPXQubGVuZ3RoO2k8bztpKyspe2NvbnN0IG89dFtpXSxhPW8ub2JqZWN0LHM9by5nZW9tZXRyeSxjPW51bGw9PT1yP28ubWF0ZXJpYWw6cixsPW8uZ3JvdXA7aWYobi5pc0FycmF5Q2FtZXJhKXtfPW47Y29uc3QgdD1uLmNhbWVyYXM7Zm9yKGxldCBuPTAscj10Lmxlbmd0aDtuPHI7bisrKXtjb25zdCByPXRbbl07YS5sYXllcnMudGVzdChyLmxheWVycykmJihWLnZpZXdwb3J0KE0uY29weShyLnZpZXdwb3J0KSksZC5zZXR1cExpZ2h0cyhyKSxfdChhLGUscixzLGMsbCkpfX1lbHNlIF89bnVsbCxfdChhLGUsbixzLGMsbCl9fWZ1bmN0aW9uIF90KHQsZSxuLHIsaSxvKXtpZih0Lm9uQmVmb3JlUmVuZGVyKHAsZSxuLHIsaSxvKSxkPWV0LmdldChlLF98fG4pLHQubW9kZWxWaWV3TWF0cml4Lm11bHRpcGx5TWF0cmljZXMobi5tYXRyaXhXb3JsZEludmVyc2UsdC5tYXRyaXhXb3JsZCksdC5ub3JtYWxNYXRyaXguZ2V0Tm9ybWFsTWF0cml4KHQubW9kZWxWaWV3TWF0cml4KSx0LmlzSW1tZWRpYXRlUmVuZGVyT2JqZWN0KXtjb25zdCByPVR0KG4sZSxpLHQpO1Yuc2V0TWF0ZXJpYWwoaSksY3QucmVzZXQoKSxmdW5jdGlvbih0LGUpe3QucmVuZGVyKChmdW5jdGlvbih0KXtwLnJlbmRlckJ1ZmZlckltbWVkaWF0ZSh0LGUpfSkpfSh0LHIpfWVsc2UgcC5yZW5kZXJCdWZmZXJEaXJlY3QobixlLHIsaSx0LG8pO3Qub25BZnRlclJlbmRlcihwLGUsbixyLGksbyksZD1ldC5nZXQoZSxffHxuKX1mdW5jdGlvbiBNdCh0LGUsbil7ITAhPT1lLmlzU2NlbmUmJihlPXopO2NvbnN0IHI9Vy5nZXQodCksaT1kLnN0YXRlLmxpZ2h0cyxvPWQuc3RhdGUuc2hhZG93c0FycmF5LGE9aS5zdGF0ZS52ZXJzaW9uLHM9Sy5nZXRQYXJhbWV0ZXJzKHQsaS5zdGF0ZSxvLGUsbiksYz1LLmdldFByb2dyYW1DYWNoZUtleShzKTtsZXQgbD1yLnByb2dyYW0sdT0hMDtpZih2b2lkIDA9PT1sKXQuYWRkRXZlbnRMaXN0ZW5lcihcImRpc3Bvc2VcIixndCk7ZWxzZSBpZihsLmNhY2hlS2V5IT09Yyl2dCh0KTtlbHNlIGlmKHIubGlnaHRzU3RhdGVWZXJzaW9uIT09YSl1PSExO2Vsc2V7aWYodm9pZCAwIT09cy5zaGFkZXJJRCl7Y29uc3Qgbj10LmlzTWVzaFN0YW5kYXJkTWF0ZXJpYWw/ZS5lbnZpcm9ubWVudDpudWxsO3JldHVybiB2b2lkKHIuZW52TWFwPXEuZ2V0KHQuZW52TWFwfHxuKSl9dT0hMX11JiYocy51bmlmb3Jtcz1LLmdldFVuaWZvcm1zKHQpLHQub25CZWZvcmVDb21waWxlKHMscCksbD1LLmFjcXVpcmVQcm9ncmFtKHMsYyksci5wcm9ncmFtPWwsci51bmlmb3Jtcz1zLnVuaWZvcm1zLHIub3V0cHV0RW5jb2Rpbmc9cy5vdXRwdXRFbmNvZGluZyk7Y29uc3QgaD1yLnVuaWZvcm1zOyh0LmlzU2hhZGVyTWF0ZXJpYWx8fHQuaXNSYXdTaGFkZXJNYXRlcmlhbCkmJiEwIT09dC5jbGlwcGluZ3x8KHIubnVtQ2xpcHBpbmdQbGFuZXM9bnQubnVtUGxhbmVzLHIubnVtSW50ZXJzZWN0aW9uPW50Lm51bUludGVyc2VjdGlvbixoLmNsaXBwaW5nUGxhbmVzPW50LnVuaWZvcm0pLHIuZW52aXJvbm1lbnQ9dC5pc01lc2hTdGFuZGFyZE1hdGVyaWFsP2UuZW52aXJvbm1lbnQ6bnVsbCxyLmZvZz1lLmZvZyxyLmVudk1hcD1xLmdldCh0LmVudk1hcHx8ci5lbnZpcm9ubWVudCksci5uZWVkc0xpZ2h0cz1mdW5jdGlvbih0KXtyZXR1cm4gdC5pc01lc2hMYW1iZXJ0TWF0ZXJpYWx8fHQuaXNNZXNoVG9vbk1hdGVyaWFsfHx0LmlzTWVzaFBob25nTWF0ZXJpYWx8fHQuaXNNZXNoU3RhbmRhcmRNYXRlcmlhbHx8dC5pc1NoYWRvd01hdGVyaWFsfHx0LmlzU2hhZGVyTWF0ZXJpYWwmJiEwPT09dC5saWdodHN9KHQpLHIubGlnaHRzU3RhdGVWZXJzaW9uPWEsci5uZWVkc0xpZ2h0cyYmKGguYW1iaWVudExpZ2h0Q29sb3IudmFsdWU9aS5zdGF0ZS5hbWJpZW50LGgubGlnaHRQcm9iZS52YWx1ZT1pLnN0YXRlLnByb2JlLGguZGlyZWN0aW9uYWxMaWdodHMudmFsdWU9aS5zdGF0ZS5kaXJlY3Rpb25hbCxoLmRpcmVjdGlvbmFsTGlnaHRTaGFkb3dzLnZhbHVlPWkuc3RhdGUuZGlyZWN0aW9uYWxTaGFkb3csaC5zcG90TGlnaHRzLnZhbHVlPWkuc3RhdGUuc3BvdCxoLnNwb3RMaWdodFNoYWRvd3MudmFsdWU9aS5zdGF0ZS5zcG90U2hhZG93LGgucmVjdEFyZWFMaWdodHMudmFsdWU9aS5zdGF0ZS5yZWN0QXJlYSxoLmx0Y18xLnZhbHVlPWkuc3RhdGUucmVjdEFyZWFMVEMxLGgubHRjXzIudmFsdWU9aS5zdGF0ZS5yZWN0QXJlYUxUQzIsaC5wb2ludExpZ2h0cy52YWx1ZT1pLnN0YXRlLnBvaW50LGgucG9pbnRMaWdodFNoYWRvd3MudmFsdWU9aS5zdGF0ZS5wb2ludFNoYWRvdyxoLmhlbWlzcGhlcmVMaWdodHMudmFsdWU9aS5zdGF0ZS5oZW1pLGguZGlyZWN0aW9uYWxTaGFkb3dNYXAudmFsdWU9aS5zdGF0ZS5kaXJlY3Rpb25hbFNoYWRvd01hcCxoLmRpcmVjdGlvbmFsU2hhZG93TWF0cml4LnZhbHVlPWkuc3RhdGUuZGlyZWN0aW9uYWxTaGFkb3dNYXRyaXgsaC5zcG90U2hhZG93TWFwLnZhbHVlPWkuc3RhdGUuc3BvdFNoYWRvd01hcCxoLnNwb3RTaGFkb3dNYXRyaXgudmFsdWU9aS5zdGF0ZS5zcG90U2hhZG93TWF0cml4LGgucG9pbnRTaGFkb3dNYXAudmFsdWU9aS5zdGF0ZS5wb2ludFNoYWRvd01hcCxoLnBvaW50U2hhZG93TWF0cml4LnZhbHVlPWkuc3RhdGUucG9pbnRTaGFkb3dNYXRyaXgpO2NvbnN0IGY9ci5wcm9ncmFtLmdldFVuaWZvcm1zKCksbT1XYS5zZXFXaXRoVmFsdWUoZi5zZXEsaCk7ci51bmlmb3Jtc0xpc3Q9bX1mdW5jdGlvbiBUdCh0LGUsbixyKXshMCE9PWUuaXNTY2VuZSYmKGU9eiksWC5yZXNldFRleHR1cmVVbml0cygpO2NvbnN0IGk9ZS5mb2csbz1uLmlzTWVzaFN0YW5kYXJkTWF0ZXJpYWw/ZS5lbnZpcm9ubWVudDpudWxsLGE9bnVsbD09PXk/cC5vdXRwdXRFbmNvZGluZzp5LnRleHR1cmUuZW5jb2Rpbmcscz1xLmdldChuLmVudk1hcHx8byksYz1XLmdldChuKSxsPWQuc3RhdGUubGlnaHRzO2lmKCEwPT09RCYmKCEwPT09Qnx8dCE9PXcpKXtjb25zdCBlPXQ9PT13JiZuLmlkPT09YjtudC5zZXRTdGF0ZShuLHQsZSl9bi52ZXJzaW9uPT09Yy5fX3ZlcnNpb24/bi5mb2cmJmMuZm9nIT09aXx8Yy5lbnZpcm9ubWVudCE9PW98fGMubmVlZHNMaWdodHMmJmMubGlnaHRzU3RhdGVWZXJzaW9uIT09bC5zdGF0ZS52ZXJzaW9uP010KG4sZSxyKTp2b2lkIDA9PT1jLm51bUNsaXBwaW5nUGxhbmVzfHxjLm51bUNsaXBwaW5nUGxhbmVzPT09bnQubnVtUGxhbmVzJiZjLm51bUludGVyc2VjdGlvbj09PW50Lm51bUludGVyc2VjdGlvbj8oYy5vdXRwdXRFbmNvZGluZyE9PWF8fGMuZW52TWFwIT09cykmJk10KG4sZSxyKTpNdChuLGUscik6KE10KG4sZSxyKSxjLl9fdmVyc2lvbj1uLnZlcnNpb24pO2xldCB1PSExLGg9ITEsZj0hMTtjb25zdCBtPWMucHJvZ3JhbSxnPW0uZ2V0VW5pZm9ybXMoKSx2PWMudW5pZm9ybXM7aWYoVi51c2VQcm9ncmFtKG0ucHJvZ3JhbSkmJih1PSEwLGg9ITAsZj0hMCksbi5pZCE9PWImJihiPW4uaWQsaD0hMCksdXx8dyE9PXQpe2lmKGcuc2V0VmFsdWUobHQsXCJwcm9qZWN0aW9uTWF0cml4XCIsdC5wcm9qZWN0aW9uTWF0cml4KSxrLmxvZ2FyaXRobWljRGVwdGhCdWZmZXImJmcuc2V0VmFsdWUobHQsXCJsb2dEZXB0aEJ1ZkZDXCIsMi8oTWF0aC5sb2codC5mYXIrMSkvTWF0aC5MTjIpKSx3IT09dCYmKHc9dCxoPSEwLGY9ITApLG4uaXNTaGFkZXJNYXRlcmlhbHx8bi5pc01lc2hQaG9uZ01hdGVyaWFsfHxuLmlzTWVzaFRvb25NYXRlcmlhbHx8bi5pc01lc2hTdGFuZGFyZE1hdGVyaWFsfHxuLmVudk1hcCl7Y29uc3QgZT1nLm1hcC5jYW1lcmFQb3NpdGlvbjt2b2lkIDAhPT1lJiZlLnNldFZhbHVlKGx0LFUuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKHQubWF0cml4V29ybGQpKX0obi5pc01lc2hQaG9uZ01hdGVyaWFsfHxuLmlzTWVzaFRvb25NYXRlcmlhbHx8bi5pc01lc2hMYW1iZXJ0TWF0ZXJpYWx8fG4uaXNNZXNoQmFzaWNNYXRlcmlhbHx8bi5pc01lc2hTdGFuZGFyZE1hdGVyaWFsfHxuLmlzU2hhZGVyTWF0ZXJpYWwpJiZnLnNldFZhbHVlKGx0LFwiaXNPcnRob2dyYXBoaWNcIiwhMD09PXQuaXNPcnRob2dyYXBoaWNDYW1lcmEpLChuLmlzTWVzaFBob25nTWF0ZXJpYWx8fG4uaXNNZXNoVG9vbk1hdGVyaWFsfHxuLmlzTWVzaExhbWJlcnRNYXRlcmlhbHx8bi5pc01lc2hCYXNpY01hdGVyaWFsfHxuLmlzTWVzaFN0YW5kYXJkTWF0ZXJpYWx8fG4uaXNTaGFkZXJNYXRlcmlhbHx8bi5pc1NoYWRvd01hdGVyaWFsfHxuLnNraW5uaW5nKSYmZy5zZXRWYWx1ZShsdCxcInZpZXdNYXRyaXhcIix0Lm1hdHJpeFdvcmxkSW52ZXJzZSl9aWYobi5za2lubmluZyl7Zy5zZXRPcHRpb25hbChsdCxyLFwiYmluZE1hdHJpeFwiKSxnLnNldE9wdGlvbmFsKGx0LHIsXCJiaW5kTWF0cml4SW52ZXJzZVwiKTtjb25zdCB0PXIuc2tlbGV0b247aWYodCl7Y29uc3QgZT10LmJvbmVzO2lmKGsuZmxvYXRWZXJ0ZXhUZXh0dXJlcyl7aWYobnVsbD09PXQuYm9uZVRleHR1cmUpe2xldCBuPU1hdGguc3FydCg0KmUubGVuZ3RoKTtuPXpuLmNlaWxQb3dlck9mVHdvKG4pLG49TWF0aC5tYXgobiw0KTtjb25zdCByPW5ldyBGbG9hdDMyQXJyYXkobipuKjQpO3Iuc2V0KHQuYm9uZU1hdHJpY2VzKTtjb25zdCBpPW5ldyBUbyhyLG4sbixVdCxQdCk7dC5ib25lTWF0cmljZXM9cix0LmJvbmVUZXh0dXJlPWksdC5ib25lVGV4dHVyZVNpemU9bn1nLnNldFZhbHVlKGx0LFwiYm9uZVRleHR1cmVcIix0LmJvbmVUZXh0dXJlLFgpLGcuc2V0VmFsdWUobHQsXCJib25lVGV4dHVyZVNpemVcIix0LmJvbmVUZXh0dXJlU2l6ZSl9ZWxzZSBnLnNldE9wdGlvbmFsKGx0LHQsXCJib25lTWF0cmljZXNcIil9fXZhciB4LF87cmV0dXJuKGh8fGMucmVjZWl2ZVNoYWRvdyE9PXIucmVjZWl2ZVNoYWRvdykmJihjLnJlY2VpdmVTaGFkb3c9ci5yZWNlaXZlU2hhZG93LGcuc2V0VmFsdWUobHQsXCJyZWNlaXZlU2hhZG93XCIsci5yZWNlaXZlU2hhZG93KSksaCYmKGcuc2V0VmFsdWUobHQsXCJ0b25lTWFwcGluZ0V4cG9zdXJlXCIscC50b25lTWFwcGluZ0V4cG9zdXJlKSxjLm5lZWRzTGlnaHRzJiYoXz1mLCh4PXYpLmFtYmllbnRMaWdodENvbG9yLm5lZWRzVXBkYXRlPV8seC5saWdodFByb2JlLm5lZWRzVXBkYXRlPV8seC5kaXJlY3Rpb25hbExpZ2h0cy5uZWVkc1VwZGF0ZT1fLHguZGlyZWN0aW9uYWxMaWdodFNoYWRvd3MubmVlZHNVcGRhdGU9Xyx4LnBvaW50TGlnaHRzLm5lZWRzVXBkYXRlPV8seC5wb2ludExpZ2h0U2hhZG93cy5uZWVkc1VwZGF0ZT1fLHguc3BvdExpZ2h0cy5uZWVkc1VwZGF0ZT1fLHguc3BvdExpZ2h0U2hhZG93cy5uZWVkc1VwZGF0ZT1fLHgucmVjdEFyZWFMaWdodHMubmVlZHNVcGRhdGU9Xyx4LmhlbWlzcGhlcmVMaWdodHMubmVlZHNVcGRhdGU9XyksaSYmbi5mb2cmJiQucmVmcmVzaEZvZ1VuaWZvcm1zKHYsaSksJC5yZWZyZXNoTWF0ZXJpYWxVbmlmb3Jtcyh2LG4sTCxBKSxXYS51cGxvYWQobHQsYy51bmlmb3Jtc0xpc3QsdixYKSksbi5pc1NoYWRlck1hdGVyaWFsJiYhMD09PW4udW5pZm9ybXNOZWVkVXBkYXRlJiYoV2EudXBsb2FkKGx0LGMudW5pZm9ybXNMaXN0LHYsWCksbi51bmlmb3Jtc05lZWRVcGRhdGU9ITEpLG4uaXNTcHJpdGVNYXRlcmlhbCYmZy5zZXRWYWx1ZShsdCxcImNlbnRlclwiLHIuY2VudGVyKSxnLnNldFZhbHVlKGx0LFwibW9kZWxWaWV3TWF0cml4XCIsci5tb2RlbFZpZXdNYXRyaXgpLGcuc2V0VmFsdWUobHQsXCJub3JtYWxNYXRyaXhcIixyLm5vcm1hbE1hdHJpeCksZy5zZXRWYWx1ZShsdCxcIm1vZGVsTWF0cml4XCIsci5tYXRyaXhXb3JsZCksbX14dC5zZXRBbmltYXRpb25Mb29wKChmdW5jdGlvbih0KXtkdC5pc1ByZXNlbnRpbmd8fHl0JiZ5dCh0KX0pKSxcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93JiZ4dC5zZXRDb250ZXh0KHdpbmRvdyksdGhpcy5zZXRBbmltYXRpb25Mb29wPWZ1bmN0aW9uKHQpe3l0PXQsZHQuc2V0QW5pbWF0aW9uTG9vcCh0KSxudWxsPT09dD94dC5zdG9wKCk6eHQuc3RhcnQoKX0sdGhpcy5yZW5kZXI9ZnVuY3Rpb24odCxlKXtsZXQgbixyO2lmKHZvaWQgMCE9PWFyZ3VtZW50c1syXSYmKGNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXIucmVuZGVyKCk6IHRoZSByZW5kZXJUYXJnZXQgYXJndW1lbnQgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIC5zZXRSZW5kZXJUYXJnZXQoKSBpbnN0ZWFkLlwiKSxuPWFyZ3VtZW50c1syXSksdm9pZCAwIT09YXJndW1lbnRzWzNdJiYoY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlci5yZW5kZXIoKTogdGhlIGZvcmNlQ2xlYXIgYXJndW1lbnQgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIC5jbGVhcigpIGluc3RlYWQuXCIpLHI9YXJndW1lbnRzWzNdKSx2b2lkIDAhPT1lJiYhMCE9PWUuaXNDYW1lcmEpcmV0dXJuIHZvaWQgY29uc29sZS5lcnJvcihcIlRIUkVFLldlYkdMUmVuZGVyZXIucmVuZGVyOiBjYW1lcmEgaXMgbm90IGFuIGluc3RhbmNlIG9mIFRIUkVFLkNhbWVyYS5cIik7aWYoITA9PT1mKXJldHVybjtjdC5yZXNldERlZmF1bHRTdGF0ZSgpLGI9LTEsdz1udWxsLCEwPT09dC5hdXRvVXBkYXRlJiZ0LnVwZGF0ZU1hdHJpeFdvcmxkKCksbnVsbD09PWUucGFyZW50JiZlLnVwZGF0ZU1hdHJpeFdvcmxkKCksITA9PT1kdC5lbmFibGVkJiYhMD09PWR0LmlzUHJlc2VudGluZyYmKGU9ZHQuZ2V0Q2FtZXJhKGUpKSwhMD09PXQuaXNTY2VuZSYmdC5vbkJlZm9yZVJlbmRlcihwLHQsZSxufHx5KSxkPWV0LmdldCh0LGUpLGQuaW5pdCgpLEYubXVsdGlwbHlNYXRyaWNlcyhlLnByb2plY3Rpb25NYXRyaXgsZS5tYXRyaXhXb3JsZEludmVyc2UpLE4uc2V0RnJvbVByb2plY3Rpb25NYXRyaXgoRiksQj10aGlzLmxvY2FsQ2xpcHBpbmdFbmFibGVkLEQ9bnQuaW5pdCh0aGlzLmNsaXBwaW5nUGxhbmVzLEIsZSksaD10dC5nZXQodCxlKSxoLmluaXQoKSxidCh0LGUsMCxwLnNvcnRPYmplY3RzKSxoLmZpbmlzaCgpLCEwPT09cC5zb3J0T2JqZWN0cyYmaC5zb3J0KFIsUCksITA9PT1EJiZudC5iZWdpblNoYWRvd3MoKTtjb25zdCBpPWQuc3RhdGUuc2hhZG93c0FycmF5O3B0LnJlbmRlcihpLHQsZSksZC5zZXR1cExpZ2h0cyhlKSwhMD09PUQmJm50LmVuZFNoYWRvd3MoKSwhMD09PXRoaXMuaW5mby5hdXRvUmVzZXQmJnRoaXMuaW5mby5yZXNldCgpLHZvaWQgMCE9PW4mJnRoaXMuc2V0UmVuZGVyVGFyZ2V0KG4pLHJ0LnJlbmRlcihoLHQsZSxyKTtjb25zdCBvPWgub3BhcXVlLGE9aC50cmFuc3BhcmVudDtvLmxlbmd0aD4wJiZ3dChvLHQsZSksYS5sZW5ndGg+MCYmd3QoYSx0LGUpLCEwPT09dC5pc1NjZW5lJiZ0Lm9uQWZ0ZXJSZW5kZXIocCx0LGUpLG51bGwhPT15JiYoWC51cGRhdGVSZW5kZXJUYXJnZXRNaXBtYXAoeSksWC51cGRhdGVNdWx0aXNhbXBsZVJlbmRlclRhcmdldCh5KSksVi5idWZmZXJzLmRlcHRoLnNldFRlc3QoITApLFYuYnVmZmVycy5kZXB0aC5zZXRNYXNrKCEwKSxWLmJ1ZmZlcnMuY29sb3Iuc2V0TWFzayghMCksVi5zZXRQb2x5Z29uT2Zmc2V0KCExKSxoPW51bGwsZD1udWxsfSx0aGlzLnNldEZyYW1lYnVmZmVyPWZ1bmN0aW9uKHQpe20hPT10JiZudWxsPT09eSYmbHQuYmluZEZyYW1lYnVmZmVyKDM2MTYwLHQpLG09dH0sdGhpcy5nZXRBY3RpdmVDdWJlRmFjZT1mdW5jdGlvbigpe3JldHVybiBnfSx0aGlzLmdldEFjdGl2ZU1pcG1hcExldmVsPWZ1bmN0aW9uKCl7cmV0dXJuIHZ9LHRoaXMuZ2V0UmVuZGVyTGlzdD1mdW5jdGlvbigpe3JldHVybiBofSx0aGlzLnNldFJlbmRlckxpc3Q9ZnVuY3Rpb24odCl7aD10fSx0aGlzLmdldFJlbmRlclN0YXRlPWZ1bmN0aW9uKCl7cmV0dXJuIGR9LHRoaXMuc2V0UmVuZGVyU3RhdGU9ZnVuY3Rpb24odCl7ZD10fSx0aGlzLmdldFJlbmRlclRhcmdldD1mdW5jdGlvbigpe3JldHVybiB5fSx0aGlzLnNldFJlbmRlclRhcmdldD1mdW5jdGlvbih0LGU9MCxuPTApe3k9dCxnPWUsdj1uLHQmJnZvaWQgMD09PVcuZ2V0KHQpLl9fd2ViZ2xGcmFtZWJ1ZmZlciYmWC5zZXR1cFJlbmRlclRhcmdldCh0KTtsZXQgcj1tLGk9ITE7aWYodCl7Y29uc3Qgbj1XLmdldCh0KS5fX3dlYmdsRnJhbWVidWZmZXI7dC5pc1dlYkdMQ3ViZVJlbmRlclRhcmdldD8ocj1uW2VdLGk9ITApOnI9dC5pc1dlYkdMTXVsdGlzYW1wbGVSZW5kZXJUYXJnZXQ/Vy5nZXQodCkuX193ZWJnbE11bHRpc2FtcGxlZEZyYW1lYnVmZmVyOm4sTS5jb3B5KHQudmlld3BvcnQpLFMuY29weSh0LnNjaXNzb3IpLFQ9dC5zY2lzc29yVGVzdH1lbHNlIE0uY29weShDKS5tdWx0aXBseVNjYWxhcihMKS5mbG9vcigpLFMuY29weShJKS5tdWx0aXBseVNjYWxhcihMKS5mbG9vcigpLFQ9TztpZih4IT09ciYmKGx0LmJpbmRGcmFtZWJ1ZmZlcigzNjE2MCxyKSx4PXIpLFYudmlld3BvcnQoTSksVi5zY2lzc29yKFMpLFYuc2V0U2Npc3NvclRlc3QoVCksaSl7Y29uc3Qgcj1XLmdldCh0LnRleHR1cmUpO2x0LmZyYW1lYnVmZmVyVGV4dHVyZTJEKDM2MTYwLDM2MDY0LDM0MDY5K2Usci5fX3dlYmdsVGV4dHVyZSxuKX19LHRoaXMucmVhZFJlbmRlclRhcmdldFBpeGVscz1mdW5jdGlvbih0LGUsbixyLGksbyxhKXtpZighdHx8IXQuaXNXZWJHTFJlbmRlclRhcmdldClyZXR1cm4gdm9pZCBjb25zb2xlLmVycm9yKFwiVEhSRUUuV2ViR0xSZW5kZXJlci5yZWFkUmVuZGVyVGFyZ2V0UGl4ZWxzOiByZW5kZXJUYXJnZXQgaXMgbm90IFRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0LlwiKTtsZXQgcz1XLmdldCh0KS5fX3dlYmdsRnJhbWVidWZmZXI7aWYodC5pc1dlYkdMQ3ViZVJlbmRlclRhcmdldCYmdm9pZCAwIT09YSYmKHM9c1thXSkscyl7bGV0IGE9ITE7cyE9PXgmJihsdC5iaW5kRnJhbWVidWZmZXIoMzYxNjAscyksYT0hMCk7dHJ5e2NvbnN0IHM9dC50ZXh0dXJlLGM9cy5mb3JtYXQsbD1zLnR5cGU7aWYoYyE9PVV0JiZzdC5jb252ZXJ0KGMpIT09bHQuZ2V0UGFyYW1ldGVyKDM1NzM5KSlyZXR1cm4gdm9pZCBjb25zb2xlLmVycm9yKFwiVEhSRUUuV2ViR0xSZW5kZXJlci5yZWFkUmVuZGVyVGFyZ2V0UGl4ZWxzOiByZW5kZXJUYXJnZXQgaXMgbm90IGluIFJHQkEgb3IgaW1wbGVtZW50YXRpb24gZGVmaW5lZCBmb3JtYXQuXCIpO2lmKCEobD09PVN0fHxzdC5jb252ZXJ0KGwpPT09bHQuZ2V0UGFyYW1ldGVyKDM1NzM4KXx8bD09PVB0JiYoay5pc1dlYkdMMnx8SC5nZXQoXCJPRVNfdGV4dHVyZV9mbG9hdFwiKXx8SC5nZXQoXCJXRUJHTF9jb2xvcl9idWZmZXJfZmxvYXRcIikpfHxsPT09Q3QmJihrLmlzV2ViR0wyP0guZ2V0KFwiRVhUX2NvbG9yX2J1ZmZlcl9mbG9hdFwiKTpILmdldChcIkVYVF9jb2xvcl9idWZmZXJfaGFsZl9mbG9hdFwiKSkpKXJldHVybiB2b2lkIGNvbnNvbGUuZXJyb3IoXCJUSFJFRS5XZWJHTFJlbmRlcmVyLnJlYWRSZW5kZXJUYXJnZXRQaXhlbHM6IHJlbmRlclRhcmdldCBpcyBub3QgaW4gVW5zaWduZWRCeXRlVHlwZSBvciBpbXBsZW1lbnRhdGlvbiBkZWZpbmVkIHR5cGUuXCIpOzM2MDUzPT09bHQuY2hlY2tGcmFtZWJ1ZmZlclN0YXR1cygzNjE2MCk/ZT49MCYmZTw9dC53aWR0aC1yJiZuPj0wJiZuPD10LmhlaWdodC1pJiZsdC5yZWFkUGl4ZWxzKGUsbixyLGksc3QuY29udmVydChjKSxzdC5jb252ZXJ0KGwpLG8pOmNvbnNvbGUuZXJyb3IoXCJUSFJFRS5XZWJHTFJlbmRlcmVyLnJlYWRSZW5kZXJUYXJnZXRQaXhlbHM6IHJlYWRQaXhlbHMgZnJvbSByZW5kZXJUYXJnZXQgZmFpbGVkLiBGcmFtZWJ1ZmZlciBub3QgY29tcGxldGUuXCIpfWZpbmFsbHl7YSYmbHQuYmluZEZyYW1lYnVmZmVyKDM2MTYwLHgpfX19LHRoaXMuY29weUZyYW1lYnVmZmVyVG9UZXh0dXJlPWZ1bmN0aW9uKHQsZSxuPTApe2NvbnN0IHI9TWF0aC5wb3coMiwtbiksaT1NYXRoLmZsb29yKGUuaW1hZ2Uud2lkdGgqciksbz1NYXRoLmZsb29yKGUuaW1hZ2UuaGVpZ2h0KnIpLGE9c3QuY29udmVydChlLmZvcm1hdCk7WC5zZXRUZXh0dXJlMkQoZSwwKSxsdC5jb3B5VGV4SW1hZ2UyRCgzNTUzLG4sYSx0LngsdC55LGksbywwKSxWLnVuYmluZFRleHR1cmUoKX0sdGhpcy5jb3B5VGV4dHVyZVRvVGV4dHVyZT1mdW5jdGlvbih0LGUsbixyPTApe2NvbnN0IGk9ZS5pbWFnZS53aWR0aCxvPWUuaW1hZ2UuaGVpZ2h0LGE9c3QuY29udmVydChuLmZvcm1hdCkscz1zdC5jb252ZXJ0KG4udHlwZSk7WC5zZXRUZXh0dXJlMkQobiwwKSxsdC5waXhlbFN0b3JlaSgzNzQ0MCxuLmZsaXBZKSxsdC5waXhlbFN0b3JlaSgzNzQ0MSxuLnByZW11bHRpcGx5QWxwaGEpLGx0LnBpeGVsU3RvcmVpKDMzMTcsbi51bnBhY2tBbGlnbm1lbnQpLGUuaXNEYXRhVGV4dHVyZT9sdC50ZXhTdWJJbWFnZTJEKDM1NTMscix0LngsdC55LGksbyxhLHMsZS5pbWFnZS5kYXRhKTplLmlzQ29tcHJlc3NlZFRleHR1cmU/bHQuY29tcHJlc3NlZFRleFN1YkltYWdlMkQoMzU1MyxyLHQueCx0LnksZS5taXBtYXBzWzBdLndpZHRoLGUubWlwbWFwc1swXS5oZWlnaHQsYSxlLm1pcG1hcHNbMF0uZGF0YSk6bHQudGV4U3ViSW1hZ2UyRCgzNTUzLHIsdC54LHQueSxhLHMsZS5pbWFnZSksMD09PXImJm4uZ2VuZXJhdGVNaXBtYXBzJiZsdC5nZW5lcmF0ZU1pcG1hcCgzNTUzKSxWLnVuYmluZFRleHR1cmUoKX0sdGhpcy5pbml0VGV4dHVyZT1mdW5jdGlvbih0KXtYLnNldFRleHR1cmUyRCh0LDApLFYudW5iaW5kVGV4dHVyZSgpfSxcInVuZGVmaW5lZFwiIT10eXBlb2YgX19USFJFRV9ERVZUT09MU19fJiZfX1RIUkVFX0RFVlRPT0xTX18uZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoXCJvYnNlcnZlXCIse2RldGFpbDp0aGlzfSkpfWZ1bmN0aW9uIEJzKHQpe0RzLmNhbGwodGhpcyx0KX1Qcy5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKHdvLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlBzLGlzQXJyYXlDYW1lcmE6ITB9KSxDcy5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKEpyLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOkNzLGlzR3JvdXA6ITB9KSxPYmplY3QuYXNzaWduKElzLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6SXMsZ2V0SGFuZFNwYWNlOmZ1bmN0aW9uKCl7aWYobnVsbD09PXRoaXMuX2hhbmQmJih0aGlzLl9oYW5kPW5ldyBDcyx0aGlzLl9oYW5kLm1hdHJpeEF1dG9VcGRhdGU9ITEsdGhpcy5faGFuZC52aXNpYmxlPSExLHRoaXMuX2hhbmQuam9pbnRzPVtdLHRoaXMuX2hhbmQuaW5wdXRTdGF0ZT17cGluY2hpbmc6ITF9LHdpbmRvdy5YUkhhbmQpKWZvcihsZXQgdD0wO3Q8PXdpbmRvdy5YUkhhbmQuTElUVExFX1BIQUxBTlhfVElQO3QrKyl7Y29uc3QgdD1uZXcgQ3M7dC5tYXRyaXhBdXRvVXBkYXRlPSExLHQudmlzaWJsZT0hMSx0aGlzLl9oYW5kLmpvaW50cy5wdXNoKHQpLHRoaXMuX2hhbmQuYWRkKHQpfXJldHVybiB0aGlzLl9oYW5kfSxnZXRUYXJnZXRSYXlTcGFjZTpmdW5jdGlvbigpe3JldHVybiBudWxsPT09dGhpcy5fdGFyZ2V0UmF5JiYodGhpcy5fdGFyZ2V0UmF5PW5ldyBDcyx0aGlzLl90YXJnZXRSYXkubWF0cml4QXV0b1VwZGF0ZT0hMSx0aGlzLl90YXJnZXRSYXkudmlzaWJsZT0hMSksdGhpcy5fdGFyZ2V0UmF5fSxnZXRHcmlwU3BhY2U6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbD09PXRoaXMuX2dyaXAmJih0aGlzLl9ncmlwPW5ldyBDcyx0aGlzLl9ncmlwLm1hdHJpeEF1dG9VcGRhdGU9ITEsdGhpcy5fZ3JpcC52aXNpYmxlPSExKSx0aGlzLl9ncmlwfSxkaXNwYXRjaEV2ZW50OmZ1bmN0aW9uKHQpe3JldHVybiBudWxsIT09dGhpcy5fdGFyZ2V0UmF5JiZ0aGlzLl90YXJnZXRSYXkuZGlzcGF0Y2hFdmVudCh0KSxudWxsIT09dGhpcy5fZ3JpcCYmdGhpcy5fZ3JpcC5kaXNwYXRjaEV2ZW50KHQpLG51bGwhPT10aGlzLl9oYW5kJiZ0aGlzLl9oYW5kLmRpc3BhdGNoRXZlbnQodCksdGhpc30sZGlzY29ubmVjdDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5kaXNwYXRjaEV2ZW50KHt0eXBlOlwiZGlzY29ubmVjdGVkXCIsZGF0YTp0fSksbnVsbCE9PXRoaXMuX3RhcmdldFJheSYmKHRoaXMuX3RhcmdldFJheS52aXNpYmxlPSExKSxudWxsIT09dGhpcy5fZ3JpcCYmKHRoaXMuX2dyaXAudmlzaWJsZT0hMSksbnVsbCE9PXRoaXMuX2hhbmQmJih0aGlzLl9oYW5kLnZpc2libGU9ITEpLHRoaXN9LHVwZGF0ZTpmdW5jdGlvbih0LGUsbil7bGV0IHI9bnVsbCxpPW51bGwsbz1udWxsO2NvbnN0IGE9dGhpcy5fdGFyZ2V0UmF5LHM9dGhpcy5fZ3JpcCxjPXRoaXMuX2hhbmQ7aWYodCYmXCJ2aXNpYmxlLWJsdXJyZWRcIiE9PWUuc2Vzc2lvbi52aXNpYmlsaXR5U3RhdGUpaWYoYyYmdC5oYW5kKXtvPSEwO2ZvcihsZXQgcj0wO3I8PXdpbmRvdy5YUkhhbmQuTElUVExFX1BIQUxBTlhfVElQO3IrKylpZih0LmhhbmRbcl0pe2NvbnN0IGk9ZS5nZXRKb2ludFBvc2UodC5oYW5kW3JdLG4pLG89Yy5qb2ludHNbcl07bnVsbCE9PWkmJihvLm1hdHJpeC5mcm9tQXJyYXkoaS50cmFuc2Zvcm0ubWF0cml4KSxvLm1hdHJpeC5kZWNvbXBvc2Uoby5wb3NpdGlvbixvLnJvdGF0aW9uLG8uc2NhbGUpLG8uam9pbnRSYWRpdXM9aS5yYWRpdXMpLG8udmlzaWJsZT1udWxsIT09aTtjb25zdCBhPWMuam9pbnRzW3dpbmRvdy5YUkhhbmQuSU5ERVhfUEhBTEFOWF9USVBdLHM9Yy5qb2ludHNbd2luZG93LlhSSGFuZC5USFVNQl9QSEFMQU5YX1RJUF0sbD1hLnBvc2l0aW9uLmRpc3RhbmNlVG8ocy5wb3NpdGlvbiksdT0uMDIsaD0uMDA1O2MuaW5wdXRTdGF0ZS5waW5jaGluZyYmbD51K2g/KGMuaW5wdXRTdGF0ZS5waW5jaGluZz0hMSx0aGlzLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJwaW5jaGVuZFwiLGhhbmRlZG5lc3M6dC5oYW5kZWRuZXNzLHRhcmdldDp0aGlzfSkpOiFjLmlucHV0U3RhdGUucGluY2hpbmcmJmw8PXUtaCYmKGMuaW5wdXRTdGF0ZS5waW5jaGluZz0hMCx0aGlzLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJwaW5jaHN0YXJ0XCIsaGFuZGVkbmVzczp0LmhhbmRlZG5lc3MsdGFyZ2V0OnRoaXN9KSl9fWVsc2UgbnVsbCE9PWEmJihyPWUuZ2V0UG9zZSh0LnRhcmdldFJheVNwYWNlLG4pLG51bGwhPT1yJiYoYS5tYXRyaXguZnJvbUFycmF5KHIudHJhbnNmb3JtLm1hdHJpeCksYS5tYXRyaXguZGVjb21wb3NlKGEucG9zaXRpb24sYS5yb3RhdGlvbixhLnNjYWxlKSkpLG51bGwhPT1zJiZ0LmdyaXBTcGFjZSYmKGk9ZS5nZXRQb3NlKHQuZ3JpcFNwYWNlLG4pLG51bGwhPT1pJiYocy5tYXRyaXguZnJvbUFycmF5KGkudHJhbnNmb3JtLm1hdHJpeCkscy5tYXRyaXguZGVjb21wb3NlKHMucG9zaXRpb24scy5yb3RhdGlvbixzLnNjYWxlKSkpO3JldHVybiBudWxsIT09YSYmKGEudmlzaWJsZT1udWxsIT09ciksbnVsbCE9PXMmJihzLnZpc2libGU9bnVsbCE9PWkpLG51bGwhPT1jJiYoYy52aXNpYmxlPW51bGwhPT1vKSx0aGlzfX0pLE9iamVjdC5hc3NpZ24oT3MucHJvdG90eXBlLEJuLnByb3RvdHlwZSksQnMucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShEcy5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpCcyxpc1dlYkdMMVJlbmRlcmVyOiEwfSk7Y2xhc3MgRnN7Y29uc3RydWN0b3IodCxlKXtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImlzRm9nRXhwMlwiLHt2YWx1ZTohMH0pLHRoaXMubmFtZT1cIlwiLHRoaXMuY29sb3I9bmV3IHlpKHQpLHRoaXMuZGVuc2l0eT12b2lkIDAhPT1lP2U6MjVlLTV9Y2xvbmUoKXtyZXR1cm4gbmV3IEZzKHRoaXMuY29sb3IsdGhpcy5kZW5zaXR5KX10b0pTT04oKXtyZXR1cm57dHlwZTpcIkZvZ0V4cDJcIixjb2xvcjp0aGlzLmNvbG9yLmdldEhleCgpLGRlbnNpdHk6dGhpcy5kZW5zaXR5fX19Y2xhc3MgVXN7Y29uc3RydWN0b3IodCxlLG4pe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiaXNGb2dcIix7dmFsdWU6ITB9KSx0aGlzLm5hbWU9XCJcIix0aGlzLmNvbG9yPW5ldyB5aSh0KSx0aGlzLm5lYXI9dm9pZCAwIT09ZT9lOjEsdGhpcy5mYXI9dm9pZCAwIT09bj9uOjFlM31jbG9uZSgpe3JldHVybiBuZXcgVXModGhpcy5jb2xvcix0aGlzLm5lYXIsdGhpcy5mYXIpfXRvSlNPTigpe3JldHVybnt0eXBlOlwiRm9nXCIsY29sb3I6dGhpcy5jb2xvci5nZXRIZXgoKSxuZWFyOnRoaXMubmVhcixmYXI6dGhpcy5mYXJ9fX1jbGFzcyB6cyBleHRlbmRzIEpye2NvbnN0cnVjdG9yKCl7c3VwZXIoKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImlzU2NlbmVcIix7dmFsdWU6ITB9KSx0aGlzLnR5cGU9XCJTY2VuZVwiLHRoaXMuYmFja2dyb3VuZD1udWxsLHRoaXMuZW52aXJvbm1lbnQ9bnVsbCx0aGlzLmZvZz1udWxsLHRoaXMub3ZlcnJpZGVNYXRlcmlhbD1udWxsLHRoaXMuYXV0b1VwZGF0ZT0hMCxcInVuZGVmaW5lZFwiIT10eXBlb2YgX19USFJFRV9ERVZUT09MU19fJiZfX1RIUkVFX0RFVlRPT0xTX18uZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoXCJvYnNlcnZlXCIse2RldGFpbDp0aGlzfSkpfWNvcHkodCxlKXtyZXR1cm4gc3VwZXIuY29weSh0LGUpLG51bGwhPT10LmJhY2tncm91bmQmJih0aGlzLmJhY2tncm91bmQ9dC5iYWNrZ3JvdW5kLmNsb25lKCkpLG51bGwhPT10LmVudmlyb25tZW50JiYodGhpcy5lbnZpcm9ubWVudD10LmVudmlyb25tZW50LmNsb25lKCkpLG51bGwhPT10LmZvZyYmKHRoaXMuZm9nPXQuZm9nLmNsb25lKCkpLG51bGwhPT10Lm92ZXJyaWRlTWF0ZXJpYWwmJih0aGlzLm92ZXJyaWRlTWF0ZXJpYWw9dC5vdmVycmlkZU1hdGVyaWFsLmNsb25lKCkpLHRoaXMuYXV0b1VwZGF0ZT10LmF1dG9VcGRhdGUsdGhpcy5tYXRyaXhBdXRvVXBkYXRlPXQubWF0cml4QXV0b1VwZGF0ZSx0aGlzfXRvSlNPTih0KXtjb25zdCBlPXN1cGVyLnRvSlNPTih0KTtyZXR1cm4gbnVsbCE9PXRoaXMuYmFja2dyb3VuZCYmKGUub2JqZWN0LmJhY2tncm91bmQ9dGhpcy5iYWNrZ3JvdW5kLnRvSlNPTih0KSksbnVsbCE9PXRoaXMuZW52aXJvbm1lbnQmJihlLm9iamVjdC5lbnZpcm9ubWVudD10aGlzLmVudmlyb25tZW50LnRvSlNPTih0KSksbnVsbCE9PXRoaXMuZm9nJiYoZS5vYmplY3QuZm9nPXRoaXMuZm9nLnRvSlNPTigpKSxlfX1mdW5jdGlvbiBHcyh0LGUpe3RoaXMuYXJyYXk9dCx0aGlzLnN0cmlkZT1lLHRoaXMuY291bnQ9dm9pZCAwIT09dD90Lmxlbmd0aC9lOjAsdGhpcy51c2FnZT1Ubix0aGlzLnVwZGF0ZVJhbmdlPXtvZmZzZXQ6MCxjb3VudDotMX0sdGhpcy52ZXJzaW9uPTAsdGhpcy51dWlkPXpuLmdlbmVyYXRlVVVJRCgpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShHcy5wcm90b3R5cGUsXCJuZWVkc1VwZGF0ZVwiLHtzZXQ6ZnVuY3Rpb24odCl7ITA9PT10JiZ0aGlzLnZlcnNpb24rK319KSxPYmplY3QuYXNzaWduKEdzLnByb3RvdHlwZSx7aXNJbnRlcmxlYXZlZEJ1ZmZlcjohMCxvblVwbG9hZENhbGxiYWNrOmZ1bmN0aW9uKCl7fSxzZXRVc2FnZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy51c2FnZT10LHRoaXN9LGNvcHk6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuYXJyYXk9bmV3IHQuYXJyYXkuY29uc3RydWN0b3IodC5hcnJheSksdGhpcy5jb3VudD10LmNvdW50LHRoaXMuc3RyaWRlPXQuc3RyaWRlLHRoaXMudXNhZ2U9dC51c2FnZSx0aGlzfSxjb3B5QXQ6ZnVuY3Rpb24odCxlLG4pe3QqPXRoaXMuc3RyaWRlLG4qPWUuc3RyaWRlO2ZvcihsZXQgcj0wLGk9dGhpcy5zdHJpZGU7cjxpO3IrKyl0aGlzLmFycmF5W3Qrcl09ZS5hcnJheVtuK3JdO3JldHVybiB0aGlzfSxzZXQ6ZnVuY3Rpb24odCxlPTApe3JldHVybiB0aGlzLmFycmF5LnNldCh0LGUpLHRoaXN9LGNsb25lOmZ1bmN0aW9uKHQpe3ZvaWQgMD09PXQuYXJyYXlCdWZmZXJzJiYodC5hcnJheUJ1ZmZlcnM9e30pLHZvaWQgMD09PXRoaXMuYXJyYXkuYnVmZmVyLl91dWlkJiYodGhpcy5hcnJheS5idWZmZXIuX3V1aWQ9em4uZ2VuZXJhdGVVVUlEKCkpLHZvaWQgMD09PXQuYXJyYXlCdWZmZXJzW3RoaXMuYXJyYXkuYnVmZmVyLl91dWlkXSYmKHQuYXJyYXlCdWZmZXJzW3RoaXMuYXJyYXkuYnVmZmVyLl91dWlkXT10aGlzLmFycmF5LnNsaWNlKDApLmJ1ZmZlcik7Y29uc3QgZT1uZXcgR3MobmV3IHRoaXMuYXJyYXkuY29uc3RydWN0b3IodC5hcnJheUJ1ZmZlcnNbdGhpcy5hcnJheS5idWZmZXIuX3V1aWRdKSx0aGlzLnN0cmlkZSk7cmV0dXJuIGUuc2V0VXNhZ2UodGhpcy51c2FnZSksZX0sb25VcGxvYWQ6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMub25VcGxvYWRDYWxsYmFjaz10LHRoaXN9LHRvSlNPTjpmdW5jdGlvbih0KXtyZXR1cm4gdm9pZCAwPT09dC5hcnJheUJ1ZmZlcnMmJih0LmFycmF5QnVmZmVycz17fSksdm9pZCAwPT09dGhpcy5hcnJheS5idWZmZXIuX3V1aWQmJih0aGlzLmFycmF5LmJ1ZmZlci5fdXVpZD16bi5nZW5lcmF0ZVVVSUQoKSksdm9pZCAwPT09dC5hcnJheUJ1ZmZlcnNbdGhpcy5hcnJheS5idWZmZXIuX3V1aWRdJiYodC5hcnJheUJ1ZmZlcnNbdGhpcy5hcnJheS5idWZmZXIuX3V1aWRdPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKG5ldyBVaW50MzJBcnJheSh0aGlzLmFycmF5LmJ1ZmZlcikpKSx7dXVpZDp0aGlzLnV1aWQsYnVmZmVyOnRoaXMuYXJyYXkuYnVmZmVyLl91dWlkLHR5cGU6dGhpcy5hcnJheS5jb25zdHJ1Y3Rvci5uYW1lLHN0cmlkZTp0aGlzLnN0cmlkZX19fSk7Y29uc3QgSHM9bmV3IEtuO2Z1bmN0aW9uIGtzKHQsZSxuLHIpe3RoaXMubmFtZT1cIlwiLHRoaXMuZGF0YT10LHRoaXMuaXRlbVNpemU9ZSx0aGlzLm9mZnNldD1uLHRoaXMubm9ybWFsaXplZD0hMD09PXJ9ZnVuY3Rpb24gVnModCl7d2kuY2FsbCh0aGlzKSx0aGlzLnR5cGU9XCJTcHJpdGVNYXRlcmlhbFwiLHRoaXMuY29sb3I9bmV3IHlpKDE2Nzc3MjE1KSx0aGlzLm1hcD1udWxsLHRoaXMuYWxwaGFNYXA9bnVsbCx0aGlzLnJvdGF0aW9uPTAsdGhpcy5zaXplQXR0ZW51YXRpb249ITAsdGhpcy50cmFuc3BhcmVudD0hMCx0aGlzLnNldFZhbHVlcyh0KX1sZXQganM7T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoa3MucHJvdG90eXBlLHtjb3VudDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGF0YS5jb3VudH19LGFycmF5OntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kYXRhLmFycmF5fX0sbmVlZHNVcGRhdGU6e3NldDpmdW5jdGlvbih0KXt0aGlzLmRhdGEubmVlZHNVcGRhdGU9dH19fSksT2JqZWN0LmFzc2lnbihrcy5wcm90b3R5cGUse2lzSW50ZXJsZWF2ZWRCdWZmZXJBdHRyaWJ1dGU6ITAsYXBwbHlNYXRyaXg0OmZ1bmN0aW9uKHQpe2ZvcihsZXQgZT0wLG49dGhpcy5kYXRhLmNvdW50O2U8bjtlKyspSHMueD10aGlzLmdldFgoZSksSHMueT10aGlzLmdldFkoZSksSHMuej10aGlzLmdldFooZSksSHMuYXBwbHlNYXRyaXg0KHQpLHRoaXMuc2V0WFlaKGUsSHMueCxIcy55LEhzLnopO3JldHVybiB0aGlzfSxzZXRYOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuZGF0YS5hcnJheVt0KnRoaXMuZGF0YS5zdHJpZGUrdGhpcy5vZmZzZXRdPWUsdGhpc30sc2V0WTpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmRhdGEuYXJyYXlbdCp0aGlzLmRhdGEuc3RyaWRlK3RoaXMub2Zmc2V0KzFdPWUsdGhpc30sc2V0WjpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmRhdGEuYXJyYXlbdCp0aGlzLmRhdGEuc3RyaWRlK3RoaXMub2Zmc2V0KzJdPWUsdGhpc30sc2V0VzpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmRhdGEuYXJyYXlbdCp0aGlzLmRhdGEuc3RyaWRlK3RoaXMub2Zmc2V0KzNdPWUsdGhpc30sZ2V0WDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5kYXRhLmFycmF5W3QqdGhpcy5kYXRhLnN0cmlkZSt0aGlzLm9mZnNldF19LGdldFk6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZGF0YS5hcnJheVt0KnRoaXMuZGF0YS5zdHJpZGUrdGhpcy5vZmZzZXQrMV19LGdldFo6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZGF0YS5hcnJheVt0KnRoaXMuZGF0YS5zdHJpZGUrdGhpcy5vZmZzZXQrMl19LGdldFc6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZGF0YS5hcnJheVt0KnRoaXMuZGF0YS5zdHJpZGUrdGhpcy5vZmZzZXQrM119LHNldFhZOmZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdD10KnRoaXMuZGF0YS5zdHJpZGUrdGhpcy5vZmZzZXQsdGhpcy5kYXRhLmFycmF5W3QrMF09ZSx0aGlzLmRhdGEuYXJyYXlbdCsxXT1uLHRoaXN9LHNldFhZWjpmdW5jdGlvbih0LGUsbixyKXtyZXR1cm4gdD10KnRoaXMuZGF0YS5zdHJpZGUrdGhpcy5vZmZzZXQsdGhpcy5kYXRhLmFycmF5W3QrMF09ZSx0aGlzLmRhdGEuYXJyYXlbdCsxXT1uLHRoaXMuZGF0YS5hcnJheVt0KzJdPXIsdGhpc30sc2V0WFlaVzpmdW5jdGlvbih0LGUsbixyLGkpe3JldHVybiB0PXQqdGhpcy5kYXRhLnN0cmlkZSt0aGlzLm9mZnNldCx0aGlzLmRhdGEuYXJyYXlbdCswXT1lLHRoaXMuZGF0YS5hcnJheVt0KzFdPW4sdGhpcy5kYXRhLmFycmF5W3QrMl09cix0aGlzLmRhdGEuYXJyYXlbdCszXT1pLHRoaXN9LGNsb25lOmZ1bmN0aW9uKHQpe2lmKHZvaWQgMD09PXQpe2NvbnNvbGUubG9nKFwiVEhSRUUuSW50ZXJsZWF2ZWRCdWZmZXJBdHRyaWJ1dGUuY2xvbmUoKTogQ2xvbmluZyBhbiBpbnRlcmxhdmVkIGJ1ZmZlciBhdHRyaWJ1dGUgd2lsbCBkZWludGVybGVhdmUgYnVmZmVyIGRhdGEuXCIpO2NvbnN0IHQ9W107Zm9yKGxldCBlPTA7ZTx0aGlzLmNvdW50O2UrKyl7Y29uc3Qgbj1lKnRoaXMuZGF0YS5zdHJpZGUrdGhpcy5vZmZzZXQ7Zm9yKGxldCBlPTA7ZTx0aGlzLml0ZW1TaXplO2UrKyl0LnB1c2godGhpcy5kYXRhLmFycmF5W24rZV0pfXJldHVybiBuZXcgVGkobmV3IHRoaXMuYXJyYXkuY29uc3RydWN0b3IodCksdGhpcy5pdGVtU2l6ZSx0aGlzLm5vcm1hbGl6ZWQpfXJldHVybiB2b2lkIDA9PT10LmludGVybGVhdmVkQnVmZmVycyYmKHQuaW50ZXJsZWF2ZWRCdWZmZXJzPXt9KSx2b2lkIDA9PT10LmludGVybGVhdmVkQnVmZmVyc1t0aGlzLmRhdGEudXVpZF0mJih0LmludGVybGVhdmVkQnVmZmVyc1t0aGlzLmRhdGEudXVpZF09dGhpcy5kYXRhLmNsb25lKHQpKSxuZXcga3ModC5pbnRlcmxlYXZlZEJ1ZmZlcnNbdGhpcy5kYXRhLnV1aWRdLHRoaXMuaXRlbVNpemUsdGhpcy5vZmZzZXQsdGhpcy5ub3JtYWxpemVkKX0sdG9KU09OOmZ1bmN0aW9uKHQpe2lmKHZvaWQgMD09PXQpe2NvbnNvbGUubG9nKFwiVEhSRUUuSW50ZXJsZWF2ZWRCdWZmZXJBdHRyaWJ1dGUudG9KU09OKCk6IFNlcmlhbGl6aW5nIGFuIGludGVybGF2ZWQgYnVmZmVyIGF0dHJpYnV0ZSB3aWxsIGRlaW50ZXJsZWF2ZSBidWZmZXIgZGF0YS5cIik7Y29uc3QgdD1bXTtmb3IobGV0IGU9MDtlPHRoaXMuY291bnQ7ZSsrKXtjb25zdCBuPWUqdGhpcy5kYXRhLnN0cmlkZSt0aGlzLm9mZnNldDtmb3IobGV0IGU9MDtlPHRoaXMuaXRlbVNpemU7ZSsrKXQucHVzaCh0aGlzLmRhdGEuYXJyYXlbbitlXSl9cmV0dXJue2l0ZW1TaXplOnRoaXMuaXRlbVNpemUsdHlwZTp0aGlzLmFycmF5LmNvbnN0cnVjdG9yLm5hbWUsYXJyYXk6dCxub3JtYWxpemVkOnRoaXMubm9ybWFsaXplZH19cmV0dXJuIHZvaWQgMD09PXQuaW50ZXJsZWF2ZWRCdWZmZXJzJiYodC5pbnRlcmxlYXZlZEJ1ZmZlcnM9e30pLHZvaWQgMD09PXQuaW50ZXJsZWF2ZWRCdWZmZXJzW3RoaXMuZGF0YS51dWlkXSYmKHQuaW50ZXJsZWF2ZWRCdWZmZXJzW3RoaXMuZGF0YS51dWlkXT10aGlzLmRhdGEudG9KU09OKHQpKSx7aXNJbnRlcmxlYXZlZEJ1ZmZlckF0dHJpYnV0ZTohMCxpdGVtU2l6ZTp0aGlzLml0ZW1TaXplLGRhdGE6dGhpcy5kYXRhLnV1aWQsb2Zmc2V0OnRoaXMub2Zmc2V0LG5vcm1hbGl6ZWQ6dGhpcy5ub3JtYWxpemVkfX19KSxWcy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh3aS5wcm90b3R5cGUpLFZzLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1WcyxWcy5wcm90b3R5cGUuaXNTcHJpdGVNYXRlcmlhbD0hMCxWcy5wcm90b3R5cGUuY29weT1mdW5jdGlvbih0KXtyZXR1cm4gd2kucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLHQpLHRoaXMuY29sb3IuY29weSh0LmNvbG9yKSx0aGlzLm1hcD10Lm1hcCx0aGlzLmFscGhhTWFwPXQuYWxwaGFNYXAsdGhpcy5yb3RhdGlvbj10LnJvdGF0aW9uLHRoaXMuc2l6ZUF0dGVudWF0aW9uPXQuc2l6ZUF0dGVudWF0aW9uLHRoaXN9O2NvbnN0IFdzPW5ldyBLbixYcz1uZXcgS24scXM9bmV3IEtuLFlzPW5ldyBHbixacz1uZXcgR24sSnM9bmV3IFRyLEtzPW5ldyBLbixRcz1uZXcgS24sJHM9bmV3IEtuLHRjPW5ldyBHbixlYz1uZXcgR24sbmM9bmV3IEduO2Z1bmN0aW9uIHJjKHQpe2lmKEpyLmNhbGwodGhpcyksdGhpcy50eXBlPVwiU3ByaXRlXCIsdm9pZCAwPT09anMpe2pzPW5ldyBxaTtjb25zdCB0PW5ldyBHcyhuZXcgRmxvYXQzMkFycmF5KFstLjUsLS41LDAsMCwwLC41LC0uNSwwLDEsMCwuNSwuNSwwLDEsMSwtLjUsLjUsMCwwLDFdKSw1KTtqcy5zZXRJbmRleChbMCwxLDIsMCwyLDNdKSxqcy5zZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBrcyh0LDMsMCwhMSkpLGpzLnNldEF0dHJpYnV0ZShcInV2XCIsbmV3IGtzKHQsMiwzLCExKSl9dGhpcy5nZW9tZXRyeT1qcyx0aGlzLm1hdGVyaWFsPXZvaWQgMCE9PXQ/dDpuZXcgVnMsdGhpcy5jZW50ZXI9bmV3IEduKC41LC41KX1mdW5jdGlvbiBpYyh0LGUsbixyLGksbyl7WXMuc3ViVmVjdG9ycyh0LG4pLmFkZFNjYWxhciguNSkubXVsdGlwbHkociksdm9pZCAwIT09aT8oWnMueD1vKllzLngtaSpZcy55LFpzLnk9aSpZcy54K28qWXMueSk6WnMuY29weShZcyksdC5jb3B5KGUpLHQueCs9WnMueCx0LnkrPVpzLnksdC5hcHBseU1hdHJpeDQoSnMpfXJjLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoSnIucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6cmMsaXNTcHJpdGU6ITAscmF5Y2FzdDpmdW5jdGlvbih0LGUpe251bGw9PT10LmNhbWVyYSYmY29uc29sZS5lcnJvcignVEhSRUUuU3ByaXRlOiBcIlJheWNhc3Rlci5jYW1lcmFcIiBuZWVkcyB0byBiZSBzZXQgaW4gb3JkZXIgdG8gcmF5Y2FzdCBhZ2FpbnN0IHNwcml0ZXMuJyksWHMuc2V0RnJvbU1hdHJpeFNjYWxlKHRoaXMubWF0cml4V29ybGQpLEpzLmNvcHkodC5jYW1lcmEubWF0cml4V29ybGQpLHRoaXMubW9kZWxWaWV3TWF0cml4Lm11bHRpcGx5TWF0cmljZXModC5jYW1lcmEubWF0cml4V29ybGRJbnZlcnNlLHRoaXMubWF0cml4V29ybGQpLHFzLnNldEZyb21NYXRyaXhQb3NpdGlvbih0aGlzLm1vZGVsVmlld01hdHJpeCksdC5jYW1lcmEuaXNQZXJzcGVjdGl2ZUNhbWVyYSYmITE9PT10aGlzLm1hdGVyaWFsLnNpemVBdHRlbnVhdGlvbiYmWHMubXVsdGlwbHlTY2FsYXIoLXFzLnopO2NvbnN0IG49dGhpcy5tYXRlcmlhbC5yb3RhdGlvbjtsZXQgcixpOzAhPT1uJiYoaT1NYXRoLmNvcyhuKSxyPU1hdGguc2luKG4pKTtjb25zdCBvPXRoaXMuY2VudGVyO2ljKEtzLnNldCgtLjUsLS41LDApLHFzLG8sWHMscixpKSxpYyhRcy5zZXQoLjUsLS41LDApLHFzLG8sWHMscixpKSxpYygkcy5zZXQoLjUsLjUsMCkscXMsbyxYcyxyLGkpLHRjLnNldCgwLDApLGVjLnNldCgxLDApLG5jLnNldCgxLDEpO2xldCBhPXQucmF5LmludGVyc2VjdFRyaWFuZ2xlKEtzLFFzLCRzLCExLFdzKTtpZihudWxsPT09YSYmKGljKFFzLnNldCgtLjUsLjUsMCkscXMsbyxYcyxyLGkpLGVjLnNldCgwLDEpLGE9dC5yYXkuaW50ZXJzZWN0VHJpYW5nbGUoS3MsJHMsUXMsITEsV3MpLG51bGw9PT1hKSlyZXR1cm47Y29uc3Qgcz10LnJheS5vcmlnaW4uZGlzdGFuY2VUbyhXcyk7czx0Lm5lYXJ8fHM+dC5mYXJ8fGUucHVzaCh7ZGlzdGFuY2U6cyxwb2ludDpXcy5jbG9uZSgpLHV2OmhpLmdldFVWKFdzLEtzLFFzLCRzLHRjLGVjLG5jLG5ldyBHbiksZmFjZTpudWxsLG9iamVjdDp0aGlzfSl9LGNvcHk6ZnVuY3Rpb24odCl7cmV0dXJuIEpyLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyx0KSx2b2lkIDAhPT10LmNlbnRlciYmdGhpcy5jZW50ZXIuY29weSh0LmNlbnRlciksdGhpcy5tYXRlcmlhbD10Lm1hdGVyaWFsLHRoaXN9fSk7Y29uc3Qgb2M9bmV3IEtuLGFjPW5ldyBLbjtmdW5jdGlvbiBzYygpe0pyLmNhbGwodGhpcyksdGhpcy5fY3VycmVudExldmVsPTAsdGhpcy50eXBlPVwiTE9EXCIsT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcyx7bGV2ZWxzOntlbnVtZXJhYmxlOiEwLHZhbHVlOltdfX0pLHRoaXMuYXV0b1VwZGF0ZT0hMH1mdW5jdGlvbiBjYyh0LGUpe3QmJnQuaXNHZW9tZXRyeSYmY29uc29sZS5lcnJvcihcIlRIUkVFLlNraW5uZWRNZXNoIG5vIGxvbmdlciBzdXBwb3J0cyBUSFJFRS5HZW9tZXRyeS4gVXNlIFRIUkVFLkJ1ZmZlckdlb21ldHJ5IGluc3RlYWQuXCIpLGhvLmNhbGwodGhpcyx0LGUpLHRoaXMudHlwZT1cIlNraW5uZWRNZXNoXCIsdGhpcy5iaW5kTW9kZT1cImF0dGFjaGVkXCIsdGhpcy5iaW5kTWF0cml4PW5ldyBUcix0aGlzLmJpbmRNYXRyaXhJbnZlcnNlPW5ldyBUcn1mdW5jdGlvbiBsYygpe0pyLmNhbGwodGhpcyksdGhpcy50eXBlPVwiQm9uZVwifXNjLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoSnIucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6c2MsaXNMT0Q6ITAsY29weTpmdW5jdGlvbih0KXtKci5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsdCwhMSk7Y29uc3QgZT10LmxldmVscztmb3IobGV0IHQ9MCxuPWUubGVuZ3RoO3Q8bjt0Kyspe2NvbnN0IG49ZVt0XTt0aGlzLmFkZExldmVsKG4ub2JqZWN0LmNsb25lKCksbi5kaXN0YW5jZSl9cmV0dXJuIHRoaXMuYXV0b1VwZGF0ZT10LmF1dG9VcGRhdGUsdGhpc30sYWRkTGV2ZWw6ZnVuY3Rpb24odCxlPTApe2U9TWF0aC5hYnMoZSk7Y29uc3Qgbj10aGlzLmxldmVscztsZXQgcjtmb3Iocj0wO3I8bi5sZW5ndGgmJiEoZTxuW3JdLmRpc3RhbmNlKTtyKyspO3JldHVybiBuLnNwbGljZShyLDAse2Rpc3RhbmNlOmUsb2JqZWN0OnR9KSx0aGlzLmFkZCh0KSx0aGlzfSxnZXRDdXJyZW50TGV2ZWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY3VycmVudExldmVsfSxnZXRPYmplY3RGb3JEaXN0YW5jZTpmdW5jdGlvbih0KXtjb25zdCBlPXRoaXMubGV2ZWxzO2lmKGUubGVuZ3RoPjApe2xldCBuLHI7Zm9yKG49MSxyPWUubGVuZ3RoO248ciYmISh0PGVbbl0uZGlzdGFuY2UpO24rKyk7cmV0dXJuIGVbbi0xXS5vYmplY3R9cmV0dXJuIG51bGx9LHJheWNhc3Q6ZnVuY3Rpb24odCxlKXtpZih0aGlzLmxldmVscy5sZW5ndGg+MCl7b2Muc2V0RnJvbU1hdHJpeFBvc2l0aW9uKHRoaXMubWF0cml4V29ybGQpO2NvbnN0IG49dC5yYXkub3JpZ2luLmRpc3RhbmNlVG8ob2MpO3RoaXMuZ2V0T2JqZWN0Rm9yRGlzdGFuY2UobikucmF5Y2FzdCh0LGUpfX0sdXBkYXRlOmZ1bmN0aW9uKHQpe2NvbnN0IGU9dGhpcy5sZXZlbHM7aWYoZS5sZW5ndGg+MSl7b2Muc2V0RnJvbU1hdHJpeFBvc2l0aW9uKHQubWF0cml4V29ybGQpLGFjLnNldEZyb21NYXRyaXhQb3NpdGlvbih0aGlzLm1hdHJpeFdvcmxkKTtjb25zdCBuPW9jLmRpc3RhbmNlVG8oYWMpL3Quem9vbTtsZXQgcixpO2ZvcihlWzBdLm9iamVjdC52aXNpYmxlPSEwLHI9MSxpPWUubGVuZ3RoO3I8aSYmbj49ZVtyXS5kaXN0YW5jZTtyKyspZVtyLTFdLm9iamVjdC52aXNpYmxlPSExLGVbcl0ub2JqZWN0LnZpc2libGU9ITA7Zm9yKHRoaXMuX2N1cnJlbnRMZXZlbD1yLTE7cjxpO3IrKyllW3JdLm9iamVjdC52aXNpYmxlPSExfX0sdG9KU09OOmZ1bmN0aW9uKHQpe2NvbnN0IGU9SnIucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMsdCk7ITE9PT10aGlzLmF1dG9VcGRhdGUmJihlLm9iamVjdC5hdXRvVXBkYXRlPSExKSxlLm9iamVjdC5sZXZlbHM9W107Y29uc3Qgbj10aGlzLmxldmVscztmb3IobGV0IHQ9MCxyPW4ubGVuZ3RoO3Q8cjt0Kyspe2NvbnN0IHI9blt0XTtlLm9iamVjdC5sZXZlbHMucHVzaCh7b2JqZWN0OnIub2JqZWN0LnV1aWQsZGlzdGFuY2U6ci5kaXN0YW5jZX0pfXJldHVybiBlfX0pLGNjLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoaG8ucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6Y2MsaXNTa2lubmVkTWVzaDohMCxjb3B5OmZ1bmN0aW9uKHQpe3JldHVybiBoby5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsdCksdGhpcy5iaW5kTW9kZT10LmJpbmRNb2RlLHRoaXMuYmluZE1hdHJpeC5jb3B5KHQuYmluZE1hdHJpeCksdGhpcy5iaW5kTWF0cml4SW52ZXJzZS5jb3B5KHQuYmluZE1hdHJpeEludmVyc2UpLHRoaXMuc2tlbGV0b249dC5za2VsZXRvbix0aGlzfSxiaW5kOmZ1bmN0aW9uKHQsZSl7dGhpcy5za2VsZXRvbj10LHZvaWQgMD09PWUmJih0aGlzLnVwZGF0ZU1hdHJpeFdvcmxkKCEwKSx0aGlzLnNrZWxldG9uLmNhbGN1bGF0ZUludmVyc2VzKCksZT10aGlzLm1hdHJpeFdvcmxkKSx0aGlzLmJpbmRNYXRyaXguY29weShlKSx0aGlzLmJpbmRNYXRyaXhJbnZlcnNlLmNvcHkoZSkuaW52ZXJ0KCl9LHBvc2U6ZnVuY3Rpb24oKXt0aGlzLnNrZWxldG9uLnBvc2UoKX0sbm9ybWFsaXplU2tpbldlaWdodHM6ZnVuY3Rpb24oKXtjb25zdCB0PW5ldyBxbixlPXRoaXMuZ2VvbWV0cnkuYXR0cmlidXRlcy5za2luV2VpZ2h0O2ZvcihsZXQgbj0wLHI9ZS5jb3VudDtuPHI7bisrKXt0Lng9ZS5nZXRYKG4pLHQueT1lLmdldFkobiksdC56PWUuZ2V0WihuKSx0Lnc9ZS5nZXRXKG4pO2NvbnN0IHI9MS90Lm1hbmhhdHRhbkxlbmd0aCgpO3IhPT0xLzA/dC5tdWx0aXBseVNjYWxhcihyKTp0LnNldCgxLDAsMCwwKSxlLnNldFhZWlcobix0LngsdC55LHQueix0LncpfX0sdXBkYXRlTWF0cml4V29ybGQ6ZnVuY3Rpb24odCl7aG8ucHJvdG90eXBlLnVwZGF0ZU1hdHJpeFdvcmxkLmNhbGwodGhpcyx0KSxcImF0dGFjaGVkXCI9PT10aGlzLmJpbmRNb2RlP3RoaXMuYmluZE1hdHJpeEludmVyc2UuY29weSh0aGlzLm1hdHJpeFdvcmxkKS5pbnZlcnQoKTpcImRldGFjaGVkXCI9PT10aGlzLmJpbmRNb2RlP3RoaXMuYmluZE1hdHJpeEludmVyc2UuY29weSh0aGlzLmJpbmRNYXRyaXgpLmludmVydCgpOmNvbnNvbGUud2FybihcIlRIUkVFLlNraW5uZWRNZXNoOiBVbnJlY29nbml6ZWQgYmluZE1vZGU6IFwiK3RoaXMuYmluZE1vZGUpfSxib25lVHJhbnNmb3JtOmZ1bmN0aW9uKCl7Y29uc3QgdD1uZXcgS24sZT1uZXcgcW4sbj1uZXcgcW4scj1uZXcgS24saT1uZXcgVHI7cmV0dXJuIGZ1bmN0aW9uKG8sYSl7Y29uc3Qgcz10aGlzLnNrZWxldG9uLGM9dGhpcy5nZW9tZXRyeTtlLmZyb21CdWZmZXJBdHRyaWJ1dGUoYy5hdHRyaWJ1dGVzLnNraW5JbmRleCxvKSxuLmZyb21CdWZmZXJBdHRyaWJ1dGUoYy5hdHRyaWJ1dGVzLnNraW5XZWlnaHQsbyksdC5mcm9tQnVmZmVyQXR0cmlidXRlKGMuYXR0cmlidXRlcy5wb3NpdGlvbixvKS5hcHBseU1hdHJpeDQodGhpcy5iaW5kTWF0cml4KSxhLnNldCgwLDAsMCk7Zm9yKGxldCBvPTA7bzw0O28rKyl7Y29uc3QgYz1uLmdldENvbXBvbmVudChvKTtpZigwIT09Yyl7Y29uc3Qgbj1lLmdldENvbXBvbmVudChvKTtpLm11bHRpcGx5TWF0cmljZXMocy5ib25lc1tuXS5tYXRyaXhXb3JsZCxzLmJvbmVJbnZlcnNlc1tuXSksYS5hZGRTY2FsZWRWZWN0b3Ioci5jb3B5KHQpLmFwcGx5TWF0cml4NChpKSxjKX19cmV0dXJuIGEuYXBwbHlNYXRyaXg0KHRoaXMuYmluZE1hdHJpeEludmVyc2UpfX0oKX0pLGxjLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoSnIucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6bGMsaXNCb25lOiEwfSk7Y29uc3QgdWM9bmV3IFRyLGhjPW5ldyBUcjtmdW5jdGlvbiBkYyh0PVtdLGU9W10pe3RoaXMudXVpZD16bi5nZW5lcmF0ZVVVSUQoKSx0aGlzLmJvbmVzPXQuc2xpY2UoMCksdGhpcy5ib25lSW52ZXJzZXM9ZSx0aGlzLmJvbmVNYXRyaWNlcz1udWxsLHRoaXMuYm9uZVRleHR1cmU9bnVsbCx0aGlzLmJvbmVUZXh0dXJlU2l6ZT0wLHRoaXMuZnJhbWU9LTEsdGhpcy5pbml0KCl9T2JqZWN0LmFzc2lnbihkYy5wcm90b3R5cGUse2luaXQ6ZnVuY3Rpb24oKXtjb25zdCB0PXRoaXMuYm9uZXMsZT10aGlzLmJvbmVJbnZlcnNlcztpZih0aGlzLmJvbmVNYXRyaWNlcz1uZXcgRmxvYXQzMkFycmF5KDE2KnQubGVuZ3RoKSwwPT09ZS5sZW5ndGgpdGhpcy5jYWxjdWxhdGVJbnZlcnNlcygpO2Vsc2UgaWYodC5sZW5ndGghPT1lLmxlbmd0aCl7Y29uc29sZS53YXJuKFwiVEhSRUUuU2tlbGV0b246IE51bWJlciBvZiBpbnZlcnNlIGJvbmUgbWF0cmljZXMgZG9lcyBub3QgbWF0Y2ggYW1vdW50IG9mIGJvbmVzLlwiKSx0aGlzLmJvbmVJbnZlcnNlcz1bXTtmb3IobGV0IHQ9MCxlPXRoaXMuYm9uZXMubGVuZ3RoO3Q8ZTt0KyspdGhpcy5ib25lSW52ZXJzZXMucHVzaChuZXcgVHIpfX0sY2FsY3VsYXRlSW52ZXJzZXM6ZnVuY3Rpb24oKXt0aGlzLmJvbmVJbnZlcnNlcy5sZW5ndGg9MDtmb3IobGV0IHQ9MCxlPXRoaXMuYm9uZXMubGVuZ3RoO3Q8ZTt0Kyspe2NvbnN0IGU9bmV3IFRyO3RoaXMuYm9uZXNbdF0mJmUuY29weSh0aGlzLmJvbmVzW3RdLm1hdHJpeFdvcmxkKS5pbnZlcnQoKSx0aGlzLmJvbmVJbnZlcnNlcy5wdXNoKGUpfX0scG9zZTpmdW5jdGlvbigpe2ZvcihsZXQgdD0wLGU9dGhpcy5ib25lcy5sZW5ndGg7dDxlO3QrKyl7Y29uc3QgZT10aGlzLmJvbmVzW3RdO2UmJmUubWF0cml4V29ybGQuY29weSh0aGlzLmJvbmVJbnZlcnNlc1t0XSkuaW52ZXJ0KCl9Zm9yKGxldCB0PTAsZT10aGlzLmJvbmVzLmxlbmd0aDt0PGU7dCsrKXtjb25zdCBlPXRoaXMuYm9uZXNbdF07ZSYmKGUucGFyZW50JiZlLnBhcmVudC5pc0JvbmU/KGUubWF0cml4LmNvcHkoZS5wYXJlbnQubWF0cml4V29ybGQpLmludmVydCgpLGUubWF0cml4Lm11bHRpcGx5KGUubWF0cml4V29ybGQpKTplLm1hdHJpeC5jb3B5KGUubWF0cml4V29ybGQpLGUubWF0cml4LmRlY29tcG9zZShlLnBvc2l0aW9uLGUucXVhdGVybmlvbixlLnNjYWxlKSl9fSx1cGRhdGU6ZnVuY3Rpb24oKXtjb25zdCB0PXRoaXMuYm9uZXMsZT10aGlzLmJvbmVJbnZlcnNlcyxuPXRoaXMuYm9uZU1hdHJpY2VzLHI9dGhpcy5ib25lVGV4dHVyZTtmb3IobGV0IHI9MCxpPXQubGVuZ3RoO3I8aTtyKyspe2NvbnN0IGk9dFtyXT90W3JdLm1hdHJpeFdvcmxkOmhjO3VjLm11bHRpcGx5TWF0cmljZXMoaSxlW3JdKSx1Yy50b0FycmF5KG4sMTYqcil9bnVsbCE9PXImJihyLm5lZWRzVXBkYXRlPSEwKX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGRjKHRoaXMuYm9uZXMsdGhpcy5ib25lSW52ZXJzZXMpfSxnZXRCb25lQnlOYW1lOmZ1bmN0aW9uKHQpe2ZvcihsZXQgZT0wLG49dGhpcy5ib25lcy5sZW5ndGg7ZTxuO2UrKyl7Y29uc3Qgbj10aGlzLmJvbmVzW2VdO2lmKG4ubmFtZT09PXQpcmV0dXJuIG59fSxkaXNwb3NlOmZ1bmN0aW9uKCl7bnVsbCE9PXRoaXMuYm9uZVRleHR1cmUmJih0aGlzLmJvbmVUZXh0dXJlLmRpc3Bvc2UoKSx0aGlzLmJvbmVUZXh0dXJlPW51bGwpfSxmcm9tSlNPTjpmdW5jdGlvbih0LGUpe3RoaXMudXVpZD10LnV1aWQ7Zm9yKGxldCBuPTAscj10LmJvbmVzLmxlbmd0aDtuPHI7bisrKXtjb25zdCByPXQuYm9uZXNbbl07bGV0IGk9ZVtyXTt2b2lkIDA9PT1pJiYoY29uc29sZS53YXJuKFwiVEhSRUUuU2tlbGV0b246IE5vIGJvbmUgZm91bmQgd2l0aCBVVUlEOlwiLHIpLGk9bmV3IGxjKSx0aGlzLmJvbmVzLnB1c2goaSksdGhpcy5ib25lSW52ZXJzZXMucHVzaCgobmV3IFRyKS5mcm9tQXJyYXkodC5ib25lSW52ZXJzZXNbbl0pKX1yZXR1cm4gdGhpcy5pbml0KCksdGhpc30sdG9KU09OOmZ1bmN0aW9uKCl7Y29uc3QgdD17bWV0YWRhdGE6e3ZlcnNpb246NC41LHR5cGU6XCJTa2VsZXRvblwiLGdlbmVyYXRvcjpcIlNrZWxldG9uLnRvSlNPTlwifSxib25lczpbXSxib25lSW52ZXJzZXM6W119O3QudXVpZD10aGlzLnV1aWQ7Y29uc3QgZT10aGlzLmJvbmVzLG49dGhpcy5ib25lSW52ZXJzZXM7Zm9yKGxldCByPTAsaT1lLmxlbmd0aDtyPGk7cisrKXtjb25zdCBpPWVbcl07dC5ib25lcy5wdXNoKGkudXVpZCk7Y29uc3Qgbz1uW3JdO3QuYm9uZUludmVyc2VzLnB1c2goby50b0FycmF5KCkpfXJldHVybiB0fX0pO2NvbnN0IHBjPW5ldyBUcixmYz1uZXcgVHIsbWM9W10sZ2M9bmV3IGhvO2Z1bmN0aW9uIHZjKHQsZSxuKXtoby5jYWxsKHRoaXMsdCxlKSx0aGlzLmluc3RhbmNlTWF0cml4PW5ldyBUaShuZXcgRmxvYXQzMkFycmF5KDE2Km4pLDE2KSx0aGlzLmluc3RhbmNlQ29sb3I9bnVsbCx0aGlzLmNvdW50PW4sdGhpcy5mcnVzdHVtQ3VsbGVkPSExfWZ1bmN0aW9uIHljKHQpe3dpLmNhbGwodGhpcyksdGhpcy50eXBlPVwiTGluZUJhc2ljTWF0ZXJpYWxcIix0aGlzLmNvbG9yPW5ldyB5aSgxNjc3NzIxNSksdGhpcy5saW5ld2lkdGg9MSx0aGlzLmxpbmVjYXA9XCJyb3VuZFwiLHRoaXMubGluZWpvaW49XCJyb3VuZFwiLHRoaXMubW9ycGhUYXJnZXRzPSExLHRoaXMuc2V0VmFsdWVzKHQpfXZjLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoaG8ucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6dmMsaXNJbnN0YW5jZWRNZXNoOiEwLGNvcHk6ZnVuY3Rpb24odCl7cmV0dXJuIGhvLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyx0KSx0aGlzLmluc3RhbmNlTWF0cml4LmNvcHkodC5pbnN0YW5jZU1hdHJpeCksdGhpcy5jb3VudD10LmNvdW50LHRoaXN9LGdldENvbG9yQXQ6ZnVuY3Rpb24odCxlKXtlLmZyb21BcnJheSh0aGlzLmluc3RhbmNlQ29sb3IuYXJyYXksMyp0KX0sZ2V0TWF0cml4QXQ6ZnVuY3Rpb24odCxlKXtlLmZyb21BcnJheSh0aGlzLmluc3RhbmNlTWF0cml4LmFycmF5LDE2KnQpfSxyYXljYXN0OmZ1bmN0aW9uKHQsZSl7Y29uc3Qgbj10aGlzLm1hdHJpeFdvcmxkLHI9dGhpcy5jb3VudDtpZihnYy5nZW9tZXRyeT10aGlzLmdlb21ldHJ5LGdjLm1hdGVyaWFsPXRoaXMubWF0ZXJpYWwsdm9pZCAwIT09Z2MubWF0ZXJpYWwpZm9yKGxldCBpPTA7aTxyO2krKyl7dGhpcy5nZXRNYXRyaXhBdChpLHBjKSxmYy5tdWx0aXBseU1hdHJpY2VzKG4scGMpLGdjLm1hdHJpeFdvcmxkPWZjLGdjLnJheWNhc3QodCxtYyk7Zm9yKGxldCB0PTAsbj1tYy5sZW5ndGg7dDxuO3QrKyl7Y29uc3Qgbj1tY1t0XTtuLmluc3RhbmNlSWQ9aSxuLm9iamVjdD10aGlzLGUucHVzaChuKX1tYy5sZW5ndGg9MH19LHNldENvbG9yQXQ6ZnVuY3Rpb24odCxlKXtudWxsPT09dGhpcy5pbnN0YW5jZUNvbG9yJiYodGhpcy5pbnN0YW5jZUNvbG9yPW5ldyBUaShuZXcgRmxvYXQzMkFycmF5KDMqdGhpcy5jb3VudCksMykpLGUudG9BcnJheSh0aGlzLmluc3RhbmNlQ29sb3IuYXJyYXksMyp0KX0sc2V0TWF0cml4QXQ6ZnVuY3Rpb24odCxlKXtlLnRvQXJyYXkodGhpcy5pbnN0YW5jZU1hdHJpeC5hcnJheSwxNip0KX0sdXBkYXRlTW9ycGhUYXJnZXRzOmZ1bmN0aW9uKCl7fX0pLHljLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHdpLnByb3RvdHlwZSkseWMucHJvdG90eXBlLmNvbnN0cnVjdG9yPXljLHljLnByb3RvdHlwZS5pc0xpbmVCYXNpY01hdGVyaWFsPSEwLHljLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKHQpe3JldHVybiB3aS5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsdCksdGhpcy5jb2xvci5jb3B5KHQuY29sb3IpLHRoaXMubGluZXdpZHRoPXQubGluZXdpZHRoLHRoaXMubGluZWNhcD10LmxpbmVjYXAsdGhpcy5saW5lam9pbj10LmxpbmVqb2luLHRoaXMubW9ycGhUYXJnZXRzPXQubW9ycGhUYXJnZXRzLHRoaXN9O2NvbnN0IHhjPW5ldyBLbixiYz1uZXcgS24sd2M9bmV3IFRyLF9jPW5ldyBTcixNYz1uZXcgZ3I7ZnVuY3Rpb24gU2ModCxlLG4pezE9PT1uJiZjb25zb2xlLmVycm9yKFwiVEhSRUUuTGluZTogcGFyYW1ldGVyIFRIUkVFLkxpbmVQaWVjZXMgbm8gbG9uZ2VyIHN1cHBvcnRlZC4gVXNlIFRIUkVFLkxpbmVTZWdtZW50cyBpbnN0ZWFkLlwiKSxKci5jYWxsKHRoaXMpLHRoaXMudHlwZT1cIkxpbmVcIix0aGlzLmdlb21ldHJ5PXZvaWQgMCE9PXQ/dDpuZXcgcWksdGhpcy5tYXRlcmlhbD12b2lkIDAhPT1lP2U6bmV3IHljLHRoaXMudXBkYXRlTW9ycGhUYXJnZXRzKCl9U2MucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShKci5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpTYyxpc0xpbmU6ITAsY29weTpmdW5jdGlvbih0KXtyZXR1cm4gSnIucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLHQpLHRoaXMubWF0ZXJpYWw9dC5tYXRlcmlhbCx0aGlzLmdlb21ldHJ5PXQuZ2VvbWV0cnksdGhpc30sY29tcHV0ZUxpbmVEaXN0YW5jZXM6ZnVuY3Rpb24oKXtjb25zdCB0PXRoaXMuZ2VvbWV0cnk7aWYodC5pc0J1ZmZlckdlb21ldHJ5KWlmKG51bGw9PT10LmluZGV4KXtjb25zdCBlPXQuYXR0cmlidXRlcy5wb3NpdGlvbixuPVswXTtmb3IobGV0IHQ9MSxyPWUuY291bnQ7dDxyO3QrKyl4Yy5mcm9tQnVmZmVyQXR0cmlidXRlKGUsdC0xKSxiYy5mcm9tQnVmZmVyQXR0cmlidXRlKGUsdCksblt0XT1uW3QtMV0sblt0XSs9eGMuZGlzdGFuY2VUbyhiYyk7dC5zZXRBdHRyaWJ1dGUoXCJsaW5lRGlzdGFuY2VcIixuZXcgTmkobiwxKSl9ZWxzZSBjb25zb2xlLndhcm4oXCJUSFJFRS5MaW5lLmNvbXB1dGVMaW5lRGlzdGFuY2VzKCk6IENvbXB1dGF0aW9uIG9ubHkgcG9zc2libGUgd2l0aCBub24taW5kZXhlZCBCdWZmZXJHZW9tZXRyeS5cIik7ZWxzZSBpZih0LmlzR2VvbWV0cnkpe2NvbnN0IGU9dC52ZXJ0aWNlcyxuPXQubGluZURpc3RhbmNlcztuWzBdPTA7Zm9yKGxldCB0PTEscj1lLmxlbmd0aDt0PHI7dCsrKW5bdF09blt0LTFdLG5bdF0rPWVbdC0xXS5kaXN0YW5jZVRvKGVbdF0pfXJldHVybiB0aGlzfSxyYXljYXN0OmZ1bmN0aW9uKHQsZSl7Y29uc3Qgbj10aGlzLmdlb21ldHJ5LHI9dGhpcy5tYXRyaXhXb3JsZCxpPXQucGFyYW1zLkxpbmUudGhyZXNob2xkO2lmKG51bGw9PT1uLmJvdW5kaW5nU3BoZXJlJiZuLmNvbXB1dGVCb3VuZGluZ1NwaGVyZSgpLE1jLmNvcHkobi5ib3VuZGluZ1NwaGVyZSksTWMuYXBwbHlNYXRyaXg0KHIpLE1jLnJhZGl1cys9aSwhMT09PXQucmF5LmludGVyc2VjdHNTcGhlcmUoTWMpKXJldHVybjt3Yy5jb3B5KHIpLmludmVydCgpLF9jLmNvcHkodC5yYXkpLmFwcGx5TWF0cml4NCh3Yyk7Y29uc3Qgbz1pLygodGhpcy5zY2FsZS54K3RoaXMuc2NhbGUueSt0aGlzLnNjYWxlLnopLzMpLGE9bypvLHM9bmV3IEtuLGM9bmV3IEtuLGw9bmV3IEtuLHU9bmV3IEtuLGg9dGhpcy5pc0xpbmVTZWdtZW50cz8yOjE7aWYobi5pc0J1ZmZlckdlb21ldHJ5KXtjb25zdCByPW4uaW5kZXgsaT1uLmF0dHJpYnV0ZXMucG9zaXRpb247aWYobnVsbCE9PXIpe2NvbnN0IG49ci5hcnJheTtmb3IobGV0IHI9MCxvPW4ubGVuZ3RoLTE7cjxvO3IrPWgpe2NvbnN0IG89bltyXSxoPW5bcisxXTtzLmZyb21CdWZmZXJBdHRyaWJ1dGUoaSxvKSxjLmZyb21CdWZmZXJBdHRyaWJ1dGUoaSxoKTtpZihfYy5kaXN0YW5jZVNxVG9TZWdtZW50KHMsYyx1LGwpPmEpY29udGludWU7dS5hcHBseU1hdHJpeDQodGhpcy5tYXRyaXhXb3JsZCk7Y29uc3QgZD10LnJheS5vcmlnaW4uZGlzdGFuY2VUbyh1KTtkPHQubmVhcnx8ZD50LmZhcnx8ZS5wdXNoKHtkaXN0YW5jZTpkLHBvaW50OmwuY2xvbmUoKS5hcHBseU1hdHJpeDQodGhpcy5tYXRyaXhXb3JsZCksaW5kZXg6cixmYWNlOm51bGwsZmFjZUluZGV4Om51bGwsb2JqZWN0OnRoaXN9KX19ZWxzZSBmb3IobGV0IG49MCxyPWkuY291bnQtMTtuPHI7bis9aCl7cy5mcm9tQnVmZmVyQXR0cmlidXRlKGksbiksYy5mcm9tQnVmZmVyQXR0cmlidXRlKGksbisxKTtpZihfYy5kaXN0YW5jZVNxVG9TZWdtZW50KHMsYyx1LGwpPmEpY29udGludWU7dS5hcHBseU1hdHJpeDQodGhpcy5tYXRyaXhXb3JsZCk7Y29uc3Qgcj10LnJheS5vcmlnaW4uZGlzdGFuY2VUbyh1KTtyPHQubmVhcnx8cj50LmZhcnx8ZS5wdXNoKHtkaXN0YW5jZTpyLHBvaW50OmwuY2xvbmUoKS5hcHBseU1hdHJpeDQodGhpcy5tYXRyaXhXb3JsZCksaW5kZXg6bixmYWNlOm51bGwsZmFjZUluZGV4Om51bGwsb2JqZWN0OnRoaXN9KX19ZWxzZSBpZihuLmlzR2VvbWV0cnkpe2NvbnN0IHI9bi52ZXJ0aWNlcyxpPXIubGVuZ3RoO2ZvcihsZXQgbj0wO248aS0xO24rPWgpe2lmKF9jLmRpc3RhbmNlU3FUb1NlZ21lbnQocltuXSxyW24rMV0sdSxsKT5hKWNvbnRpbnVlO3UuYXBwbHlNYXRyaXg0KHRoaXMubWF0cml4V29ybGQpO2NvbnN0IGk9dC5yYXkub3JpZ2luLmRpc3RhbmNlVG8odSk7aTx0Lm5lYXJ8fGk+dC5mYXJ8fGUucHVzaCh7ZGlzdGFuY2U6aSxwb2ludDpsLmNsb25lKCkuYXBwbHlNYXRyaXg0KHRoaXMubWF0cml4V29ybGQpLGluZGV4Om4sZmFjZTpudWxsLGZhY2VJbmRleDpudWxsLG9iamVjdDp0aGlzfSl9fX0sdXBkYXRlTW9ycGhUYXJnZXRzOmZ1bmN0aW9uKCl7Y29uc3QgdD10aGlzLmdlb21ldHJ5O2lmKHQuaXNCdWZmZXJHZW9tZXRyeSl7Y29uc3QgZT10Lm1vcnBoQXR0cmlidXRlcyxuPU9iamVjdC5rZXlzKGUpO2lmKG4ubGVuZ3RoPjApe2NvbnN0IHQ9ZVtuWzBdXTtpZih2b2lkIDAhPT10KXt0aGlzLm1vcnBoVGFyZ2V0SW5mbHVlbmNlcz1bXSx0aGlzLm1vcnBoVGFyZ2V0RGljdGlvbmFyeT17fTtmb3IobGV0IGU9MCxuPXQubGVuZ3RoO2U8bjtlKyspe2NvbnN0IG49dFtlXS5uYW1lfHxTdHJpbmcoZSk7dGhpcy5tb3JwaFRhcmdldEluZmx1ZW5jZXMucHVzaCgwKSx0aGlzLm1vcnBoVGFyZ2V0RGljdGlvbmFyeVtuXT1lfX19fWVsc2V7Y29uc3QgZT10Lm1vcnBoVGFyZ2V0czt2b2lkIDAhPT1lJiZlLmxlbmd0aD4wJiZjb25zb2xlLmVycm9yKFwiVEhSRUUuTGluZS51cGRhdGVNb3JwaFRhcmdldHMoKSBkb2VzIG5vdCBzdXBwb3J0IFRIUkVFLkdlb21ldHJ5LiBVc2UgVEhSRUUuQnVmZmVyR2VvbWV0cnkgaW5zdGVhZC5cIil9fX0pO2NvbnN0IFRjPW5ldyBLbixFYz1uZXcgS247ZnVuY3Rpb24gQWModCxlKXtTYy5jYWxsKHRoaXMsdCxlKSx0aGlzLnR5cGU9XCJMaW5lU2VnbWVudHNcIn1mdW5jdGlvbiBMYyh0LGUpe1NjLmNhbGwodGhpcyx0LGUpLHRoaXMudHlwZT1cIkxpbmVMb29wXCJ9ZnVuY3Rpb24gUmModCl7d2kuY2FsbCh0aGlzKSx0aGlzLnR5cGU9XCJQb2ludHNNYXRlcmlhbFwiLHRoaXMuY29sb3I9bmV3IHlpKDE2Nzc3MjE1KSx0aGlzLm1hcD1udWxsLHRoaXMuYWxwaGFNYXA9bnVsbCx0aGlzLnNpemU9MSx0aGlzLnNpemVBdHRlbnVhdGlvbj0hMCx0aGlzLm1vcnBoVGFyZ2V0cz0hMSx0aGlzLnNldFZhbHVlcyh0KX1BYy5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKFNjLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOkFjLGlzTGluZVNlZ21lbnRzOiEwLGNvbXB1dGVMaW5lRGlzdGFuY2VzOmZ1bmN0aW9uKCl7Y29uc3QgdD10aGlzLmdlb21ldHJ5O2lmKHQuaXNCdWZmZXJHZW9tZXRyeSlpZihudWxsPT09dC5pbmRleCl7Y29uc3QgZT10LmF0dHJpYnV0ZXMucG9zaXRpb24sbj1bXTtmb3IobGV0IHQ9MCxyPWUuY291bnQ7dDxyO3QrPTIpVGMuZnJvbUJ1ZmZlckF0dHJpYnV0ZShlLHQpLEVjLmZyb21CdWZmZXJBdHRyaWJ1dGUoZSx0KzEpLG5bdF09MD09PXQ/MDpuW3QtMV0sblt0KzFdPW5bdF0rVGMuZGlzdGFuY2VUbyhFYyk7dC5zZXRBdHRyaWJ1dGUoXCJsaW5lRGlzdGFuY2VcIixuZXcgTmkobiwxKSl9ZWxzZSBjb25zb2xlLndhcm4oXCJUSFJFRS5MaW5lU2VnbWVudHMuY29tcHV0ZUxpbmVEaXN0YW5jZXMoKTogQ29tcHV0YXRpb24gb25seSBwb3NzaWJsZSB3aXRoIG5vbi1pbmRleGVkIEJ1ZmZlckdlb21ldHJ5LlwiKTtlbHNlIGlmKHQuaXNHZW9tZXRyeSl7Y29uc3QgZT10LnZlcnRpY2VzLG49dC5saW5lRGlzdGFuY2VzO2ZvcihsZXQgdD0wLHI9ZS5sZW5ndGg7dDxyO3QrPTIpVGMuY29weShlW3RdKSxFYy5jb3B5KGVbdCsxXSksblt0XT0wPT09dD8wOm5bdC0xXSxuW3QrMV09blt0XStUYy5kaXN0YW5jZVRvKEVjKX1yZXR1cm4gdGhpc319KSxMYy5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKFNjLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOkxjLGlzTGluZUxvb3A6ITB9KSxSYy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh3aS5wcm90b3R5cGUpLFJjLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1SYyxSYy5wcm90b3R5cGUuaXNQb2ludHNNYXRlcmlhbD0hMCxSYy5wcm90b3R5cGUuY29weT1mdW5jdGlvbih0KXtyZXR1cm4gd2kucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLHQpLHRoaXMuY29sb3IuY29weSh0LmNvbG9yKSx0aGlzLm1hcD10Lm1hcCx0aGlzLmFscGhhTWFwPXQuYWxwaGFNYXAsdGhpcy5zaXplPXQuc2l6ZSx0aGlzLnNpemVBdHRlbnVhdGlvbj10LnNpemVBdHRlbnVhdGlvbix0aGlzLm1vcnBoVGFyZ2V0cz10Lm1vcnBoVGFyZ2V0cyx0aGlzfTtjb25zdCBQYz1uZXcgVHIsQ2M9bmV3IFNyLEljPW5ldyBncixPYz1uZXcgS247ZnVuY3Rpb24gTmModCxlKXtKci5jYWxsKHRoaXMpLHRoaXMudHlwZT1cIlBvaW50c1wiLHRoaXMuZ2VvbWV0cnk9dm9pZCAwIT09dD90Om5ldyBxaSx0aGlzLm1hdGVyaWFsPXZvaWQgMCE9PWU/ZTpuZXcgUmMsdGhpcy51cGRhdGVNb3JwaFRhcmdldHMoKX1mdW5jdGlvbiBEYyh0LGUsbixyLGksbyxhKXtjb25zdCBzPUNjLmRpc3RhbmNlU3FUb1BvaW50KHQpO2lmKHM8bil7Y29uc3Qgbj1uZXcgS247Q2MuY2xvc2VzdFBvaW50VG9Qb2ludCh0LG4pLG4uYXBwbHlNYXRyaXg0KHIpO2NvbnN0IGM9aS5yYXkub3JpZ2luLmRpc3RhbmNlVG8obik7aWYoYzxpLm5lYXJ8fGM+aS5mYXIpcmV0dXJuO28ucHVzaCh7ZGlzdGFuY2U6YyxkaXN0YW5jZVRvUmF5Ok1hdGguc3FydChzKSxwb2ludDpuLGluZGV4OmUsZmFjZTpudWxsLG9iamVjdDphfSl9fWZ1bmN0aW9uIEJjKHQsZSxuLHIsaSxvLGEscyxjKXtXbi5jYWxsKHRoaXMsdCxlLG4scixpLG8sYSxzLGMpLHRoaXMuZm9ybWF0PXZvaWQgMCE9PWE/YTpGdCx0aGlzLm1pbkZpbHRlcj12b2lkIDAhPT1vP286eHQsdGhpcy5tYWdGaWx0ZXI9dm9pZCAwIT09aT9pOnh0LHRoaXMuZ2VuZXJhdGVNaXBtYXBzPSExO2NvbnN0IGw9dGhpcztcInJlcXVlc3RWaWRlb0ZyYW1lQ2FsbGJhY2tcImluIHQmJnQucmVxdWVzdFZpZGVvRnJhbWVDYWxsYmFjaygoZnVuY3Rpb24gZSgpe2wubmVlZHNVcGRhdGU9ITAsdC5yZXF1ZXN0VmlkZW9GcmFtZUNhbGxiYWNrKGUpfSkpfWZ1bmN0aW9uIEZjKHQsZSxuLHIsaSxvLGEscyxjLGwsdSxoKXtXbi5jYWxsKHRoaXMsbnVsbCxvLGEscyxjLGwscixpLHUsaCksdGhpcy5pbWFnZT17d2lkdGg6ZSxoZWlnaHQ6bn0sdGhpcy5taXBtYXBzPXQsdGhpcy5mbGlwWT0hMSx0aGlzLmdlbmVyYXRlTWlwbWFwcz0hMX1mdW5jdGlvbiBVYyh0LGUsbixyLGksbyxhLHMsYyl7V24uY2FsbCh0aGlzLHQsZSxuLHIsaSxvLGEscyxjKSx0aGlzLm5lZWRzVXBkYXRlPSEwfWZ1bmN0aW9uIHpjKHQsZSxuLHIsaSxvLGEscyxjLGwpe2lmKChsPXZvaWQgMCE9PWw/bDprdCkhPT1rdCYmbCE9PVZ0KXRocm93IG5ldyBFcnJvcihcIkRlcHRoVGV4dHVyZSBmb3JtYXQgbXVzdCBiZSBlaXRoZXIgVEhSRUUuRGVwdGhGb3JtYXQgb3IgVEhSRUUuRGVwdGhTdGVuY2lsRm9ybWF0XCIpO3ZvaWQgMD09PW4mJmw9PT1rdCYmKG49QXQpLHZvaWQgMD09PW4mJmw9PT1WdCYmKG49RHQpLFduLmNhbGwodGhpcyxudWxsLHIsaSxvLGEscyxsLG4sYyksdGhpcy5pbWFnZT17d2lkdGg6dCxoZWlnaHQ6ZX0sdGhpcy5tYWdGaWx0ZXI9dm9pZCAwIT09YT9hOmZ0LHRoaXMubWluRmlsdGVyPXZvaWQgMCE9PXM/czpmdCx0aGlzLmZsaXBZPSExLHRoaXMuZ2VuZXJhdGVNaXBtYXBzPSExfU5jLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoSnIucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6TmMsaXNQb2ludHM6ITAsY29weTpmdW5jdGlvbih0KXtyZXR1cm4gSnIucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLHQpLHRoaXMubWF0ZXJpYWw9dC5tYXRlcmlhbCx0aGlzLmdlb21ldHJ5PXQuZ2VvbWV0cnksdGhpc30scmF5Y2FzdDpmdW5jdGlvbih0LGUpe2NvbnN0IG49dGhpcy5nZW9tZXRyeSxyPXRoaXMubWF0cml4V29ybGQsaT10LnBhcmFtcy5Qb2ludHMudGhyZXNob2xkO2lmKG51bGw9PT1uLmJvdW5kaW5nU3BoZXJlJiZuLmNvbXB1dGVCb3VuZGluZ1NwaGVyZSgpLEljLmNvcHkobi5ib3VuZGluZ1NwaGVyZSksSWMuYXBwbHlNYXRyaXg0KHIpLEljLnJhZGl1cys9aSwhMT09PXQucmF5LmludGVyc2VjdHNTcGhlcmUoSWMpKXJldHVybjtQYy5jb3B5KHIpLmludmVydCgpLENjLmNvcHkodC5yYXkpLmFwcGx5TWF0cml4NChQYyk7Y29uc3Qgbz1pLygodGhpcy5zY2FsZS54K3RoaXMuc2NhbGUueSt0aGlzLnNjYWxlLnopLzMpLGE9bypvO2lmKG4uaXNCdWZmZXJHZW9tZXRyeSl7Y29uc3QgaT1uLmluZGV4LG89bi5hdHRyaWJ1dGVzLnBvc2l0aW9uO2lmKG51bGwhPT1pKXtjb25zdCBuPWkuYXJyYXk7Zm9yKGxldCBpPTAscz1uLmxlbmd0aDtpPHM7aSsrKXtjb25zdCBzPW5baV07T2MuZnJvbUJ1ZmZlckF0dHJpYnV0ZShvLHMpLERjKE9jLHMsYSxyLHQsZSx0aGlzKX19ZWxzZSBmb3IobGV0IG49MCxpPW8uY291bnQ7bjxpO24rKylPYy5mcm9tQnVmZmVyQXR0cmlidXRlKG8sbiksRGMoT2MsbixhLHIsdCxlLHRoaXMpfWVsc2V7Y29uc3QgaT1uLnZlcnRpY2VzO2ZvcihsZXQgbj0wLG89aS5sZW5ndGg7bjxvO24rKylEYyhpW25dLG4sYSxyLHQsZSx0aGlzKX19LHVwZGF0ZU1vcnBoVGFyZ2V0czpmdW5jdGlvbigpe2NvbnN0IHQ9dGhpcy5nZW9tZXRyeTtpZih0LmlzQnVmZmVyR2VvbWV0cnkpe2NvbnN0IGU9dC5tb3JwaEF0dHJpYnV0ZXMsbj1PYmplY3Qua2V5cyhlKTtpZihuLmxlbmd0aD4wKXtjb25zdCB0PWVbblswXV07aWYodm9pZCAwIT09dCl7dGhpcy5tb3JwaFRhcmdldEluZmx1ZW5jZXM9W10sdGhpcy5tb3JwaFRhcmdldERpY3Rpb25hcnk9e307Zm9yKGxldCBlPTAsbj10Lmxlbmd0aDtlPG47ZSsrKXtjb25zdCBuPXRbZV0ubmFtZXx8U3RyaW5nKGUpO3RoaXMubW9ycGhUYXJnZXRJbmZsdWVuY2VzLnB1c2goMCksdGhpcy5tb3JwaFRhcmdldERpY3Rpb25hcnlbbl09ZX19fX1lbHNle2NvbnN0IGU9dC5tb3JwaFRhcmdldHM7dm9pZCAwIT09ZSYmZS5sZW5ndGg+MCYmY29uc29sZS5lcnJvcihcIlRIUkVFLlBvaW50cy51cGRhdGVNb3JwaFRhcmdldHMoKSBkb2VzIG5vdCBzdXBwb3J0IFRIUkVFLkdlb21ldHJ5LiBVc2UgVEhSRUUuQnVmZmVyR2VvbWV0cnkgaW5zdGVhZC5cIil9fX0pLEJjLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoV24ucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6QmMsY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy5pbWFnZSkuY29weSh0aGlzKX0saXNWaWRlb1RleHR1cmU6ITAsdXBkYXRlOmZ1bmN0aW9uKCl7Y29uc3QgdD10aGlzLmltYWdlOyExPT09XCJyZXF1ZXN0VmlkZW9GcmFtZUNhbGxiYWNrXCJpbiB0JiZ0LnJlYWR5U3RhdGU+PXQuSEFWRV9DVVJSRU5UX0RBVEEmJih0aGlzLm5lZWRzVXBkYXRlPSEwKX19KSxGYy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShXbi5wcm90b3R5cGUpLEZjLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1GYyxGYy5wcm90b3R5cGUuaXNDb21wcmVzc2VkVGV4dHVyZT0hMCxVYy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShXbi5wcm90b3R5cGUpLFVjLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1VYyxVYy5wcm90b3R5cGUuaXNDYW52YXNUZXh0dXJlPSEwLHpjLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFduLnByb3RvdHlwZSksemMucHJvdG90eXBlLmNvbnN0cnVjdG9yPXpjLHpjLnByb3RvdHlwZS5pc0RlcHRoVGV4dHVyZT0hMDtsZXQgR2M9MDtjb25zdCBIYz1uZXcgVHIsa2M9bmV3IEpyLFZjPW5ldyBLbjtmdW5jdGlvbiBqYygpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiaWRcIix7dmFsdWU6R2MrPTJ9KSx0aGlzLnV1aWQ9em4uZ2VuZXJhdGVVVUlEKCksdGhpcy5uYW1lPVwiXCIsdGhpcy50eXBlPVwiR2VvbWV0cnlcIix0aGlzLnZlcnRpY2VzPVtdLHRoaXMuY29sb3JzPVtdLHRoaXMuZmFjZXM9W10sdGhpcy5mYWNlVmVydGV4VXZzPVtbXV0sdGhpcy5tb3JwaFRhcmdldHM9W10sdGhpcy5tb3JwaE5vcm1hbHM9W10sdGhpcy5za2luV2VpZ2h0cz1bXSx0aGlzLnNraW5JbmRpY2VzPVtdLHRoaXMubGluZURpc3RhbmNlcz1bXSx0aGlzLmJvdW5kaW5nQm94PW51bGwsdGhpcy5ib3VuZGluZ1NwaGVyZT1udWxsLHRoaXMuZWxlbWVudHNOZWVkVXBkYXRlPSExLHRoaXMudmVydGljZXNOZWVkVXBkYXRlPSExLHRoaXMudXZzTmVlZFVwZGF0ZT0hMSx0aGlzLm5vcm1hbHNOZWVkVXBkYXRlPSExLHRoaXMuY29sb3JzTmVlZFVwZGF0ZT0hMSx0aGlzLmxpbmVEaXN0YW5jZXNOZWVkVXBkYXRlPSExLHRoaXMuZ3JvdXBzTmVlZFVwZGF0ZT0hMX1qYy5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKEJuLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOmpjLGlzR2VvbWV0cnk6ITAsYXBwbHlNYXRyaXg0OmZ1bmN0aW9uKHQpe2NvbnN0IGU9KG5ldyBIbikuZ2V0Tm9ybWFsTWF0cml4KHQpO2ZvcihsZXQgZT0wLG49dGhpcy52ZXJ0aWNlcy5sZW5ndGg7ZTxuO2UrKyl7dGhpcy52ZXJ0aWNlc1tlXS5hcHBseU1hdHJpeDQodCl9Zm9yKGxldCB0PTAsbj10aGlzLmZhY2VzLmxlbmd0aDt0PG47dCsrKXtjb25zdCBuPXRoaXMuZmFjZXNbdF07bi5ub3JtYWwuYXBwbHlNYXRyaXgzKGUpLm5vcm1hbGl6ZSgpO2ZvcihsZXQgdD0wLHI9bi52ZXJ0ZXhOb3JtYWxzLmxlbmd0aDt0PHI7dCsrKW4udmVydGV4Tm9ybWFsc1t0XS5hcHBseU1hdHJpeDMoZSkubm9ybWFsaXplKCl9cmV0dXJuIG51bGwhPT10aGlzLmJvdW5kaW5nQm94JiZ0aGlzLmNvbXB1dGVCb3VuZGluZ0JveCgpLG51bGwhPT10aGlzLmJvdW5kaW5nU3BoZXJlJiZ0aGlzLmNvbXB1dGVCb3VuZGluZ1NwaGVyZSgpLHRoaXMudmVydGljZXNOZWVkVXBkYXRlPSEwLHRoaXMubm9ybWFsc05lZWRVcGRhdGU9ITAsdGhpc30scm90YXRlWDpmdW5jdGlvbih0KXtyZXR1cm4gSGMubWFrZVJvdGF0aW9uWCh0KSx0aGlzLmFwcGx5TWF0cml4NChIYyksdGhpc30scm90YXRlWTpmdW5jdGlvbih0KXtyZXR1cm4gSGMubWFrZVJvdGF0aW9uWSh0KSx0aGlzLmFwcGx5TWF0cml4NChIYyksdGhpc30scm90YXRlWjpmdW5jdGlvbih0KXtyZXR1cm4gSGMubWFrZVJvdGF0aW9uWih0KSx0aGlzLmFwcGx5TWF0cml4NChIYyksdGhpc30sdHJhbnNsYXRlOmZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gSGMubWFrZVRyYW5zbGF0aW9uKHQsZSxuKSx0aGlzLmFwcGx5TWF0cml4NChIYyksdGhpc30sc2NhbGU6ZnVuY3Rpb24odCxlLG4pe3JldHVybiBIYy5tYWtlU2NhbGUodCxlLG4pLHRoaXMuYXBwbHlNYXRyaXg0KEhjKSx0aGlzfSxsb29rQXQ6ZnVuY3Rpb24odCl7cmV0dXJuIGtjLmxvb2tBdCh0KSxrYy51cGRhdGVNYXRyaXgoKSx0aGlzLmFwcGx5TWF0cml4NChrYy5tYXRyaXgpLHRoaXN9LGZyb21CdWZmZXJHZW9tZXRyeTpmdW5jdGlvbih0KXtjb25zdCBlPXRoaXMsbj1udWxsIT09dC5pbmRleD90LmluZGV4OnZvaWQgMCxyPXQuYXR0cmlidXRlcztpZih2b2lkIDA9PT1yLnBvc2l0aW9uKXJldHVybiBjb25zb2xlLmVycm9yKFwiVEhSRUUuR2VvbWV0cnkuZnJvbUJ1ZmZlckdlb21ldHJ5KCk6IFBvc2l0aW9uIGF0dHJpYnV0ZSByZXF1aXJlZCBmb3IgY29udmVyc2lvbi5cIiksdGhpcztjb25zdCBpPXIucG9zaXRpb24sbz1yLm5vcm1hbCxhPXIuY29sb3Iscz1yLnV2LGM9ci51djI7dm9pZCAwIT09YyYmKHRoaXMuZmFjZVZlcnRleFV2c1sxXT1bXSk7Zm9yKGxldCB0PTA7dDxpLmNvdW50O3QrKyllLnZlcnRpY2VzLnB1c2goKG5ldyBLbikuZnJvbUJ1ZmZlckF0dHJpYnV0ZShpLHQpKSx2b2lkIDAhPT1hJiZlLmNvbG9ycy5wdXNoKChuZXcgeWkpLmZyb21CdWZmZXJBdHRyaWJ1dGUoYSx0KSk7ZnVuY3Rpb24gbCh0LG4scixpKXtjb25zdCBsPXZvaWQgMD09PWE/W106W2UuY29sb3JzW3RdLmNsb25lKCksZS5jb2xvcnNbbl0uY2xvbmUoKSxlLmNvbG9yc1tyXS5jbG9uZSgpXSx1PXZvaWQgMD09PW8/W106WyhuZXcgS24pLmZyb21CdWZmZXJBdHRyaWJ1dGUobyx0KSwobmV3IEtuKS5mcm9tQnVmZmVyQXR0cmlidXRlKG8sbiksKG5ldyBLbikuZnJvbUJ1ZmZlckF0dHJpYnV0ZShvLHIpXSxoPW5ldyB4aSh0LG4scix1LGwsaSk7ZS5mYWNlcy5wdXNoKGgpLHZvaWQgMCE9PXMmJmUuZmFjZVZlcnRleFV2c1swXS5wdXNoKFsobmV3IEduKS5mcm9tQnVmZmVyQXR0cmlidXRlKHMsdCksKG5ldyBHbikuZnJvbUJ1ZmZlckF0dHJpYnV0ZShzLG4pLChuZXcgR24pLmZyb21CdWZmZXJBdHRyaWJ1dGUocyxyKV0pLHZvaWQgMCE9PWMmJmUuZmFjZVZlcnRleFV2c1sxXS5wdXNoKFsobmV3IEduKS5mcm9tQnVmZmVyQXR0cmlidXRlKGMsdCksKG5ldyBHbikuZnJvbUJ1ZmZlckF0dHJpYnV0ZShjLG4pLChuZXcgR24pLmZyb21CdWZmZXJBdHRyaWJ1dGUoYyxyKV0pfWNvbnN0IHU9dC5ncm91cHM7aWYodS5sZW5ndGg+MClmb3IobGV0IHQ9MDt0PHUubGVuZ3RoO3QrKyl7Y29uc3QgZT11W3RdLHI9ZS5zdGFydDtmb3IobGV0IHQ9cixpPXIrZS5jb3VudDt0PGk7dCs9Myl2b2lkIDAhPT1uP2wobi5nZXRYKHQpLG4uZ2V0WCh0KzEpLG4uZ2V0WCh0KzIpLGUubWF0ZXJpYWxJbmRleCk6bCh0LHQrMSx0KzIsZS5tYXRlcmlhbEluZGV4KX1lbHNlIGlmKHZvaWQgMCE9PW4pZm9yKGxldCB0PTA7dDxuLmNvdW50O3QrPTMpbChuLmdldFgodCksbi5nZXRYKHQrMSksbi5nZXRYKHQrMikpO2Vsc2UgZm9yKGxldCB0PTA7dDxpLmNvdW50O3QrPTMpbCh0LHQrMSx0KzIpO3JldHVybiB0aGlzLmNvbXB1dGVGYWNlTm9ybWFscygpLG51bGwhPT10LmJvdW5kaW5nQm94JiYodGhpcy5ib3VuZGluZ0JveD10LmJvdW5kaW5nQm94LmNsb25lKCkpLG51bGwhPT10LmJvdW5kaW5nU3BoZXJlJiYodGhpcy5ib3VuZGluZ1NwaGVyZT10LmJvdW5kaW5nU3BoZXJlLmNsb25lKCkpLHRoaXN9LGNlbnRlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbXB1dGVCb3VuZGluZ0JveCgpLHRoaXMuYm91bmRpbmdCb3guZ2V0Q2VudGVyKFZjKS5uZWdhdGUoKSx0aGlzLnRyYW5zbGF0ZShWYy54LFZjLnksVmMueiksdGhpc30sbm9ybWFsaXplOmZ1bmN0aW9uKCl7dGhpcy5jb21wdXRlQm91bmRpbmdTcGhlcmUoKTtjb25zdCB0PXRoaXMuYm91bmRpbmdTcGhlcmUuY2VudGVyLGU9dGhpcy5ib3VuZGluZ1NwaGVyZS5yYWRpdXMsbj0wPT09ZT8xOjEvZSxyPW5ldyBUcjtyZXR1cm4gci5zZXQobiwwLDAsLW4qdC54LDAsbiwwLC1uKnQueSwwLDAsbiwtbip0LnosMCwwLDAsMSksdGhpcy5hcHBseU1hdHJpeDQociksdGhpc30sY29tcHV0ZUZhY2VOb3JtYWxzOmZ1bmN0aW9uKCl7Y29uc3QgdD1uZXcgS24sZT1uZXcgS247Zm9yKGxldCBuPTAscj10aGlzLmZhY2VzLmxlbmd0aDtuPHI7bisrKXtjb25zdCByPXRoaXMuZmFjZXNbbl0saT10aGlzLnZlcnRpY2VzW3IuYV0sbz10aGlzLnZlcnRpY2VzW3IuYl0sYT10aGlzLnZlcnRpY2VzW3IuY107dC5zdWJWZWN0b3JzKGEsbyksZS5zdWJWZWN0b3JzKGksbyksdC5jcm9zcyhlKSx0Lm5vcm1hbGl6ZSgpLHIubm9ybWFsLmNvcHkodCl9fSxjb21wdXRlVmVydGV4Tm9ybWFsczpmdW5jdGlvbih0PSEwKXtjb25zdCBlPW5ldyBBcnJheSh0aGlzLnZlcnRpY2VzLmxlbmd0aCk7Zm9yKGxldCB0PTAsbj10aGlzLnZlcnRpY2VzLmxlbmd0aDt0PG47dCsrKWVbdF09bmV3IEtuO2lmKHQpe2NvbnN0IHQ9bmV3IEtuLG49bmV3IEtuO2ZvcihsZXQgcj0wLGk9dGhpcy5mYWNlcy5sZW5ndGg7cjxpO3IrKyl7Y29uc3QgaT10aGlzLmZhY2VzW3JdLG89dGhpcy52ZXJ0aWNlc1tpLmFdLGE9dGhpcy52ZXJ0aWNlc1tpLmJdLHM9dGhpcy52ZXJ0aWNlc1tpLmNdO3Quc3ViVmVjdG9ycyhzLGEpLG4uc3ViVmVjdG9ycyhvLGEpLHQuY3Jvc3MobiksZVtpLmFdLmFkZCh0KSxlW2kuYl0uYWRkKHQpLGVbaS5jXS5hZGQodCl9fWVsc2V7dGhpcy5jb21wdXRlRmFjZU5vcm1hbHMoKTtmb3IobGV0IHQ9MCxuPXRoaXMuZmFjZXMubGVuZ3RoO3Q8bjt0Kyspe2NvbnN0IG49dGhpcy5mYWNlc1t0XTtlW24uYV0uYWRkKG4ubm9ybWFsKSxlW24uYl0uYWRkKG4ubm9ybWFsKSxlW24uY10uYWRkKG4ubm9ybWFsKX19Zm9yKGxldCB0PTAsbj10aGlzLnZlcnRpY2VzLmxlbmd0aDt0PG47dCsrKWVbdF0ubm9ybWFsaXplKCk7Zm9yKGxldCB0PTAsbj10aGlzLmZhY2VzLmxlbmd0aDt0PG47dCsrKXtjb25zdCBuPXRoaXMuZmFjZXNbdF0scj1uLnZlcnRleE5vcm1hbHM7Mz09PXIubGVuZ3RoPyhyWzBdLmNvcHkoZVtuLmFdKSxyWzFdLmNvcHkoZVtuLmJdKSxyWzJdLmNvcHkoZVtuLmNdKSk6KHJbMF09ZVtuLmFdLmNsb25lKCksclsxXT1lW24uYl0uY2xvbmUoKSxyWzJdPWVbbi5jXS5jbG9uZSgpKX10aGlzLmZhY2VzLmxlbmd0aD4wJiYodGhpcy5ub3JtYWxzTmVlZFVwZGF0ZT0hMCl9LGNvbXB1dGVGbGF0VmVydGV4Tm9ybWFsczpmdW5jdGlvbigpe3RoaXMuY29tcHV0ZUZhY2VOb3JtYWxzKCk7Zm9yKGxldCB0PTAsZT10aGlzLmZhY2VzLmxlbmd0aDt0PGU7dCsrKXtjb25zdCBlPXRoaXMuZmFjZXNbdF0sbj1lLnZlcnRleE5vcm1hbHM7Mz09PW4ubGVuZ3RoPyhuWzBdLmNvcHkoZS5ub3JtYWwpLG5bMV0uY29weShlLm5vcm1hbCksblsyXS5jb3B5KGUubm9ybWFsKSk6KG5bMF09ZS5ub3JtYWwuY2xvbmUoKSxuWzFdPWUubm9ybWFsLmNsb25lKCksblsyXT1lLm5vcm1hbC5jbG9uZSgpKX10aGlzLmZhY2VzLmxlbmd0aD4wJiYodGhpcy5ub3JtYWxzTmVlZFVwZGF0ZT0hMCl9LGNvbXB1dGVNb3JwaE5vcm1hbHM6ZnVuY3Rpb24oKXtmb3IobGV0IHQ9MCxlPXRoaXMuZmFjZXMubGVuZ3RoO3Q8ZTt0Kyspe2NvbnN0IGU9dGhpcy5mYWNlc1t0XTtlLl9fb3JpZ2luYWxGYWNlTm9ybWFsP2UuX19vcmlnaW5hbEZhY2VOb3JtYWwuY29weShlLm5vcm1hbCk6ZS5fX29yaWdpbmFsRmFjZU5vcm1hbD1lLm5vcm1hbC5jbG9uZSgpLGUuX19vcmlnaW5hbFZlcnRleE5vcm1hbHN8fChlLl9fb3JpZ2luYWxWZXJ0ZXhOb3JtYWxzPVtdKTtmb3IobGV0IHQ9MCxuPWUudmVydGV4Tm9ybWFscy5sZW5ndGg7dDxuO3QrKyllLl9fb3JpZ2luYWxWZXJ0ZXhOb3JtYWxzW3RdP2UuX19vcmlnaW5hbFZlcnRleE5vcm1hbHNbdF0uY29weShlLnZlcnRleE5vcm1hbHNbdF0pOmUuX19vcmlnaW5hbFZlcnRleE5vcm1hbHNbdF09ZS52ZXJ0ZXhOb3JtYWxzW3RdLmNsb25lKCl9Y29uc3QgdD1uZXcgamM7dC5mYWNlcz10aGlzLmZhY2VzO2ZvcihsZXQgZT0wLG49dGhpcy5tb3JwaFRhcmdldHMubGVuZ3RoO2U8bjtlKyspe2lmKCF0aGlzLm1vcnBoTm9ybWFsc1tlXSl7dGhpcy5tb3JwaE5vcm1hbHNbZV09e30sdGhpcy5tb3JwaE5vcm1hbHNbZV0uZmFjZU5vcm1hbHM9W10sdGhpcy5tb3JwaE5vcm1hbHNbZV0udmVydGV4Tm9ybWFscz1bXTtjb25zdCB0PXRoaXMubW9ycGhOb3JtYWxzW2VdLmZhY2VOb3JtYWxzLG49dGhpcy5tb3JwaE5vcm1hbHNbZV0udmVydGV4Tm9ybWFscztmb3IobGV0IGU9MCxyPXRoaXMuZmFjZXMubGVuZ3RoO2U8cjtlKyspe2NvbnN0IGU9bmV3IEtuLHI9e2E6bmV3IEtuLGI6bmV3IEtuLGM6bmV3IEtufTt0LnB1c2goZSksbi5wdXNoKHIpfX1jb25zdCBuPXRoaXMubW9ycGhOb3JtYWxzW2VdO3QudmVydGljZXM9dGhpcy5tb3JwaFRhcmdldHNbZV0udmVydGljZXMsdC5jb21wdXRlRmFjZU5vcm1hbHMoKSx0LmNvbXB1dGVWZXJ0ZXhOb3JtYWxzKCk7Zm9yKGxldCB0PTAsZT10aGlzLmZhY2VzLmxlbmd0aDt0PGU7dCsrKXtjb25zdCBlPXRoaXMuZmFjZXNbdF0scj1uLmZhY2VOb3JtYWxzW3RdLGk9bi52ZXJ0ZXhOb3JtYWxzW3RdO3IuY29weShlLm5vcm1hbCksaS5hLmNvcHkoZS52ZXJ0ZXhOb3JtYWxzWzBdKSxpLmIuY29weShlLnZlcnRleE5vcm1hbHNbMV0pLGkuYy5jb3B5KGUudmVydGV4Tm9ybWFsc1syXSl9fWZvcihsZXQgdD0wLGU9dGhpcy5mYWNlcy5sZW5ndGg7dDxlO3QrKyl7Y29uc3QgZT10aGlzLmZhY2VzW3RdO2Uubm9ybWFsPWUuX19vcmlnaW5hbEZhY2VOb3JtYWwsZS52ZXJ0ZXhOb3JtYWxzPWUuX19vcmlnaW5hbFZlcnRleE5vcm1hbHN9fSxjb21wdXRlQm91bmRpbmdCb3g6ZnVuY3Rpb24oKXtudWxsPT09dGhpcy5ib3VuZGluZ0JveCYmKHRoaXMuYm91bmRpbmdCb3g9bmV3IHRyKSx0aGlzLmJvdW5kaW5nQm94LnNldEZyb21Qb2ludHModGhpcy52ZXJ0aWNlcyl9LGNvbXB1dGVCb3VuZGluZ1NwaGVyZTpmdW5jdGlvbigpe251bGw9PT10aGlzLmJvdW5kaW5nU3BoZXJlJiYodGhpcy5ib3VuZGluZ1NwaGVyZT1uZXcgZ3IpLHRoaXMuYm91bmRpbmdTcGhlcmUuc2V0RnJvbVBvaW50cyh0aGlzLnZlcnRpY2VzKX0sbWVyZ2U6ZnVuY3Rpb24odCxlLG49MCl7aWYoIXR8fCF0LmlzR2VvbWV0cnkpcmV0dXJuIHZvaWQgY29uc29sZS5lcnJvcihcIlRIUkVFLkdlb21ldHJ5Lm1lcmdlKCk6IGdlb21ldHJ5IG5vdCBhbiBpbnN0YW5jZSBvZiBUSFJFRS5HZW9tZXRyeS5cIix0KTtsZXQgcjtjb25zdCBpPXRoaXMudmVydGljZXMubGVuZ3RoLG89dGhpcy52ZXJ0aWNlcyxhPXQudmVydGljZXMscz10aGlzLmZhY2VzLGM9dC5mYWNlcyxsPXRoaXMuY29sb3JzLHU9dC5jb2xvcnM7dm9pZCAwIT09ZSYmKHI9KG5ldyBIbikuZ2V0Tm9ybWFsTWF0cml4KGUpKTtmb3IobGV0IHQ9MCxuPWEubGVuZ3RoO3Q8bjt0Kyspe2NvbnN0IG49YVt0XS5jbG9uZSgpO3ZvaWQgMCE9PWUmJm4uYXBwbHlNYXRyaXg0KGUpLG8ucHVzaChuKX1mb3IobGV0IHQ9MCxlPXUubGVuZ3RoO3Q8ZTt0KyspbC5wdXNoKHVbdF0uY2xvbmUoKSk7Zm9yKGxldCB0PTAsZT1jLmxlbmd0aDt0PGU7dCsrKXtjb25zdCBlPWNbdF07bGV0IG8sYTtjb25zdCBsPWUudmVydGV4Tm9ybWFscyx1PWUudmVydGV4Q29sb3JzLGg9bmV3IHhpKGUuYStpLGUuYitpLGUuYytpKTtoLm5vcm1hbC5jb3B5KGUubm9ybWFsKSx2b2lkIDAhPT1yJiZoLm5vcm1hbC5hcHBseU1hdHJpeDMocikubm9ybWFsaXplKCk7Zm9yKGxldCB0PTAsZT1sLmxlbmd0aDt0PGU7dCsrKW89bFt0XS5jbG9uZSgpLHZvaWQgMCE9PXImJm8uYXBwbHlNYXRyaXgzKHIpLm5vcm1hbGl6ZSgpLGgudmVydGV4Tm9ybWFscy5wdXNoKG8pO2guY29sb3IuY29weShlLmNvbG9yKTtmb3IobGV0IHQ9MCxlPXUubGVuZ3RoO3Q8ZTt0KyspYT11W3RdLGgudmVydGV4Q29sb3JzLnB1c2goYS5jbG9uZSgpKTtoLm1hdGVyaWFsSW5kZXg9ZS5tYXRlcmlhbEluZGV4K24scy5wdXNoKGgpfWZvcihsZXQgZT0wLG49dC5mYWNlVmVydGV4VXZzLmxlbmd0aDtlPG47ZSsrKXtjb25zdCBuPXQuZmFjZVZlcnRleFV2c1tlXTt2b2lkIDA9PT10aGlzLmZhY2VWZXJ0ZXhVdnNbZV0mJih0aGlzLmZhY2VWZXJ0ZXhVdnNbZV09W10pO2ZvcihsZXQgdD0wLHI9bi5sZW5ndGg7dDxyO3QrKyl7Y29uc3Qgcj1uW3RdLGk9W107Zm9yKGxldCB0PTAsZT1yLmxlbmd0aDt0PGU7dCsrKWkucHVzaChyW3RdLmNsb25lKCkpO3RoaXMuZmFjZVZlcnRleFV2c1tlXS5wdXNoKGkpfX19LG1lcmdlTWVzaDpmdW5jdGlvbih0KXt0JiZ0LmlzTWVzaD8odC5tYXRyaXhBdXRvVXBkYXRlJiZ0LnVwZGF0ZU1hdHJpeCgpLHRoaXMubWVyZ2UodC5nZW9tZXRyeSx0Lm1hdHJpeCkpOmNvbnNvbGUuZXJyb3IoXCJUSFJFRS5HZW9tZXRyeS5tZXJnZU1lc2goKTogbWVzaCBub3QgYW4gaW5zdGFuY2Ugb2YgVEhSRUUuTWVzaC5cIix0KX0sbWVyZ2VWZXJ0aWNlczpmdW5jdGlvbih0PTQpe2NvbnN0IGU9e30sbj1bXSxyPVtdLGk9TWF0aC5wb3coMTAsdCk7Zm9yKGxldCB0PTAsbz10aGlzLnZlcnRpY2VzLmxlbmd0aDt0PG87dCsrKXtjb25zdCBvPXRoaXMudmVydGljZXNbdF0sYT1NYXRoLnJvdW5kKG8ueCppKStcIl9cIitNYXRoLnJvdW5kKG8ueSppKStcIl9cIitNYXRoLnJvdW5kKG8ueippKTt2b2lkIDA9PT1lW2FdPyhlW2FdPXQsbi5wdXNoKHRoaXMudmVydGljZXNbdF0pLHJbdF09bi5sZW5ndGgtMSk6clt0XT1yW2VbYV1dfWNvbnN0IG89W107Zm9yKGxldCB0PTAsZT10aGlzLmZhY2VzLmxlbmd0aDt0PGU7dCsrKXtjb25zdCBlPXRoaXMuZmFjZXNbdF07ZS5hPXJbZS5hXSxlLmI9cltlLmJdLGUuYz1yW2UuY107Y29uc3Qgbj1bZS5hLGUuYixlLmNdO2ZvcihsZXQgZT0wO2U8MztlKyspaWYobltlXT09PW5bKGUrMSklM10pe28ucHVzaCh0KTticmVha319Zm9yKGxldCB0PW8ubGVuZ3RoLTE7dD49MDt0LS0pe2NvbnN0IGU9b1t0XTt0aGlzLmZhY2VzLnNwbGljZShlLDEpO2ZvcihsZXQgdD0wLG49dGhpcy5mYWNlVmVydGV4VXZzLmxlbmd0aDt0PG47dCsrKXRoaXMuZmFjZVZlcnRleFV2c1t0XS5zcGxpY2UoZSwxKX1jb25zdCBhPXRoaXMudmVydGljZXMubGVuZ3RoLW4ubGVuZ3RoO3JldHVybiB0aGlzLnZlcnRpY2VzPW4sYX0sc2V0RnJvbVBvaW50czpmdW5jdGlvbih0KXt0aGlzLnZlcnRpY2VzPVtdO2ZvcihsZXQgZT0wLG49dC5sZW5ndGg7ZTxuO2UrKyl7Y29uc3Qgbj10W2VdO3RoaXMudmVydGljZXMucHVzaChuZXcgS24obi54LG4ueSxuLnp8fDApKX1yZXR1cm4gdGhpc30sc29ydEZhY2VzQnlNYXRlcmlhbEluZGV4OmZ1bmN0aW9uKCl7Y29uc3QgdD10aGlzLmZhY2VzLGU9dC5sZW5ndGg7Zm9yKGxldCBuPTA7bjxlO24rKyl0W25dLl9pZD1uO3Quc29ydCgoZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5tYXRlcmlhbEluZGV4LWUubWF0ZXJpYWxJbmRleH0pKTtjb25zdCBuPXRoaXMuZmFjZVZlcnRleFV2c1swXSxyPXRoaXMuZmFjZVZlcnRleFV2c1sxXTtsZXQgaSxvO24mJm4ubGVuZ3RoPT09ZSYmKGk9W10pLHImJnIubGVuZ3RoPT09ZSYmKG89W10pO2ZvcihsZXQgYT0wO2E8ZTthKyspe2NvbnN0IGU9dFthXS5faWQ7aSYmaS5wdXNoKG5bZV0pLG8mJm8ucHVzaChyW2VdKX1pJiYodGhpcy5mYWNlVmVydGV4VXZzWzBdPWkpLG8mJih0aGlzLmZhY2VWZXJ0ZXhVdnNbMV09byl9LHRvSlNPTjpmdW5jdGlvbigpe2NvbnN0IHQ9e21ldGFkYXRhOnt2ZXJzaW9uOjQuNSx0eXBlOlwiR2VvbWV0cnlcIixnZW5lcmF0b3I6XCJHZW9tZXRyeS50b0pTT05cIn19O2lmKHQudXVpZD10aGlzLnV1aWQsdC50eXBlPXRoaXMudHlwZSxcIlwiIT09dGhpcy5uYW1lJiYodC5uYW1lPXRoaXMubmFtZSksdm9pZCAwIT09dGhpcy5wYXJhbWV0ZXJzKXtjb25zdCBlPXRoaXMucGFyYW1ldGVycztmb3IoY29uc3QgbiBpbiBlKXZvaWQgMCE9PWVbbl0mJih0W25dPWVbbl0pO3JldHVybiB0fWNvbnN0IGU9W107Zm9yKGxldCB0PTA7dDx0aGlzLnZlcnRpY2VzLmxlbmd0aDt0Kyspe2NvbnN0IG49dGhpcy52ZXJ0aWNlc1t0XTtlLnB1c2gobi54LG4ueSxuLnopfWNvbnN0IG49W10scj1bXSxpPXt9LG89W10sYT17fSxzPVtdLGM9e307Zm9yKGxldCB0PTA7dDx0aGlzLmZhY2VzLmxlbmd0aDt0Kyspe2NvbnN0IGU9dGhpcy5mYWNlc1t0XSxyPSEwLGk9ITEsbz12b2lkIDAhPT10aGlzLmZhY2VWZXJ0ZXhVdnNbMF1bdF0sYT1lLm5vcm1hbC5sZW5ndGgoKT4wLHM9ZS52ZXJ0ZXhOb3JtYWxzLmxlbmd0aD4wLGM9MSE9PWUuY29sb3Iucnx8MSE9PWUuY29sb3IuZ3x8MSE9PWUuY29sb3IuYixwPWUudmVydGV4Q29sb3JzLmxlbmd0aD4wO2xldCBmPTA7aWYoZj1sKGYsMCwwKSxmPWwoZiwxLHIpLGY9bChmLDIsaSksZj1sKGYsMyxvKSxmPWwoZiw0LGEpLGY9bChmLDUscyksZj1sKGYsNixjKSxmPWwoZiw3LHApLG4ucHVzaChmKSxuLnB1c2goZS5hLGUuYixlLmMpLG4ucHVzaChlLm1hdGVyaWFsSW5kZXgpLG8pe2NvbnN0IGU9dGhpcy5mYWNlVmVydGV4VXZzWzBdW3RdO24ucHVzaChkKGVbMF0pLGQoZVsxXSksZChlWzJdKSl9aWYoYSYmbi5wdXNoKHUoZS5ub3JtYWwpKSxzKXtjb25zdCB0PWUudmVydGV4Tm9ybWFscztuLnB1c2godSh0WzBdKSx1KHRbMV0pLHUodFsyXSkpfWlmKGMmJm4ucHVzaChoKGUuY29sb3IpKSxwKXtjb25zdCB0PWUudmVydGV4Q29sb3JzO24ucHVzaChoKHRbMF0pLGgodFsxXSksaCh0WzJdKSl9fWZ1bmN0aW9uIGwodCxlLG4pe3JldHVybiBuP3R8MTw8ZTp0Jn4oMTw8ZSl9ZnVuY3Rpb24gdSh0KXtjb25zdCBlPXQueC50b1N0cmluZygpK3QueS50b1N0cmluZygpK3Quei50b1N0cmluZygpO3JldHVybiB2b2lkIDAhPT1pW2VdfHwoaVtlXT1yLmxlbmd0aC8zLHIucHVzaCh0LngsdC55LHQueikpLGlbZV19ZnVuY3Rpb24gaCh0KXtjb25zdCBlPXQuci50b1N0cmluZygpK3QuZy50b1N0cmluZygpK3QuYi50b1N0cmluZygpO3JldHVybiB2b2lkIDAhPT1hW2VdfHwoYVtlXT1vLmxlbmd0aCxvLnB1c2godC5nZXRIZXgoKSkpLGFbZV19ZnVuY3Rpb24gZCh0KXtjb25zdCBlPXQueC50b1N0cmluZygpK3QueS50b1N0cmluZygpO3JldHVybiB2b2lkIDAhPT1jW2VdfHwoY1tlXT1zLmxlbmd0aC8yLHMucHVzaCh0LngsdC55KSksY1tlXX1yZXR1cm4gdC5kYXRhPXt9LHQuZGF0YS52ZXJ0aWNlcz1lLHQuZGF0YS5ub3JtYWxzPXIsby5sZW5ndGg+MCYmKHQuZGF0YS5jb2xvcnM9bykscy5sZW5ndGg+MCYmKHQuZGF0YS51dnM9W3NdKSx0LmRhdGEuZmFjZXM9bix0fSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgamMpLmNvcHkodGhpcyl9LGNvcHk6ZnVuY3Rpb24odCl7dGhpcy52ZXJ0aWNlcz1bXSx0aGlzLmNvbG9ycz1bXSx0aGlzLmZhY2VzPVtdLHRoaXMuZmFjZVZlcnRleFV2cz1bW11dLHRoaXMubW9ycGhUYXJnZXRzPVtdLHRoaXMubW9ycGhOb3JtYWxzPVtdLHRoaXMuc2tpbldlaWdodHM9W10sdGhpcy5za2luSW5kaWNlcz1bXSx0aGlzLmxpbmVEaXN0YW5jZXM9W10sdGhpcy5ib3VuZGluZ0JveD1udWxsLHRoaXMuYm91bmRpbmdTcGhlcmU9bnVsbCx0aGlzLm5hbWU9dC5uYW1lO2NvbnN0IGU9dC52ZXJ0aWNlcztmb3IobGV0IHQ9MCxuPWUubGVuZ3RoO3Q8bjt0KyspdGhpcy52ZXJ0aWNlcy5wdXNoKGVbdF0uY2xvbmUoKSk7Y29uc3Qgbj10LmNvbG9ycztmb3IobGV0IHQ9MCxlPW4ubGVuZ3RoO3Q8ZTt0KyspdGhpcy5jb2xvcnMucHVzaChuW3RdLmNsb25lKCkpO2NvbnN0IHI9dC5mYWNlcztmb3IobGV0IHQ9MCxlPXIubGVuZ3RoO3Q8ZTt0KyspdGhpcy5mYWNlcy5wdXNoKHJbdF0uY2xvbmUoKSk7Zm9yKGxldCBlPTAsbj10LmZhY2VWZXJ0ZXhVdnMubGVuZ3RoO2U8bjtlKyspe2NvbnN0IG49dC5mYWNlVmVydGV4VXZzW2VdO3ZvaWQgMD09PXRoaXMuZmFjZVZlcnRleFV2c1tlXSYmKHRoaXMuZmFjZVZlcnRleFV2c1tlXT1bXSk7Zm9yKGxldCB0PTAscj1uLmxlbmd0aDt0PHI7dCsrKXtjb25zdCByPW5bdF0saT1bXTtmb3IobGV0IHQ9MCxlPXIubGVuZ3RoO3Q8ZTt0Kyspe2NvbnN0IGU9clt0XTtpLnB1c2goZS5jbG9uZSgpKX10aGlzLmZhY2VWZXJ0ZXhVdnNbZV0ucHVzaChpKX19Y29uc3QgaT10Lm1vcnBoVGFyZ2V0cztmb3IobGV0IHQ9MCxlPWkubGVuZ3RoO3Q8ZTt0Kyspe2NvbnN0IGU9e307aWYoZS5uYW1lPWlbdF0ubmFtZSx2b2lkIDAhPT1pW3RdLnZlcnRpY2VzKXtlLnZlcnRpY2VzPVtdO2ZvcihsZXQgbj0wLHI9aVt0XS52ZXJ0aWNlcy5sZW5ndGg7bjxyO24rKyllLnZlcnRpY2VzLnB1c2goaVt0XS52ZXJ0aWNlc1tuXS5jbG9uZSgpKX1pZih2b2lkIDAhPT1pW3RdLm5vcm1hbHMpe2Uubm9ybWFscz1bXTtmb3IobGV0IG49MCxyPWlbdF0ubm9ybWFscy5sZW5ndGg7bjxyO24rKyllLm5vcm1hbHMucHVzaChpW3RdLm5vcm1hbHNbbl0uY2xvbmUoKSl9dGhpcy5tb3JwaFRhcmdldHMucHVzaChlKX1jb25zdCBvPXQubW9ycGhOb3JtYWxzO2ZvcihsZXQgdD0wLGU9by5sZW5ndGg7dDxlO3QrKyl7Y29uc3QgZT17fTtpZih2b2lkIDAhPT1vW3RdLnZlcnRleE5vcm1hbHMpe2UudmVydGV4Tm9ybWFscz1bXTtmb3IobGV0IG49MCxyPW9bdF0udmVydGV4Tm9ybWFscy5sZW5ndGg7bjxyO24rKyl7Y29uc3Qgcj1vW3RdLnZlcnRleE5vcm1hbHNbbl0saT17fTtpLmE9ci5hLmNsb25lKCksaS5iPXIuYi5jbG9uZSgpLGkuYz1yLmMuY2xvbmUoKSxlLnZlcnRleE5vcm1hbHMucHVzaChpKX19aWYodm9pZCAwIT09b1t0XS5mYWNlTm9ybWFscyl7ZS5mYWNlTm9ybWFscz1bXTtmb3IobGV0IG49MCxyPW9bdF0uZmFjZU5vcm1hbHMubGVuZ3RoO248cjtuKyspZS5mYWNlTm9ybWFscy5wdXNoKG9bdF0uZmFjZU5vcm1hbHNbbl0uY2xvbmUoKSl9dGhpcy5tb3JwaE5vcm1hbHMucHVzaChlKX1jb25zdCBhPXQuc2tpbldlaWdodHM7Zm9yKGxldCB0PTAsZT1hLmxlbmd0aDt0PGU7dCsrKXRoaXMuc2tpbldlaWdodHMucHVzaChhW3RdLmNsb25lKCkpO2NvbnN0IHM9dC5za2luSW5kaWNlcztmb3IobGV0IHQ9MCxlPXMubGVuZ3RoO3Q8ZTt0KyspdGhpcy5za2luSW5kaWNlcy5wdXNoKHNbdF0uY2xvbmUoKSk7Y29uc3QgYz10LmxpbmVEaXN0YW5jZXM7Zm9yKGxldCB0PTAsZT1jLmxlbmd0aDt0PGU7dCsrKXRoaXMubGluZURpc3RhbmNlcy5wdXNoKGNbdF0pO2NvbnN0IGw9dC5ib3VuZGluZ0JveDtudWxsIT09bCYmKHRoaXMuYm91bmRpbmdCb3g9bC5jbG9uZSgpKTtjb25zdCB1PXQuYm91bmRpbmdTcGhlcmU7cmV0dXJuIG51bGwhPT11JiYodGhpcy5ib3VuZGluZ1NwaGVyZT11LmNsb25lKCkpLHRoaXMuZWxlbWVudHNOZWVkVXBkYXRlPXQuZWxlbWVudHNOZWVkVXBkYXRlLHRoaXMudmVydGljZXNOZWVkVXBkYXRlPXQudmVydGljZXNOZWVkVXBkYXRlLHRoaXMudXZzTmVlZFVwZGF0ZT10LnV2c05lZWRVcGRhdGUsdGhpcy5ub3JtYWxzTmVlZFVwZGF0ZT10Lm5vcm1hbHNOZWVkVXBkYXRlLHRoaXMuY29sb3JzTmVlZFVwZGF0ZT10LmNvbG9yc05lZWRVcGRhdGUsdGhpcy5saW5lRGlzdGFuY2VzTmVlZFVwZGF0ZT10LmxpbmVEaXN0YW5jZXNOZWVkVXBkYXRlLHRoaXMuZ3JvdXBzTmVlZFVwZGF0ZT10Lmdyb3Vwc05lZWRVcGRhdGUsdGhpc30sZGlzcG9zZTpmdW5jdGlvbigpe3RoaXMuZGlzcGF0Y2hFdmVudCh7dHlwZTpcImRpc3Bvc2VcIn0pfX0pO2NsYXNzIFdjIGV4dGVuZHMgamN7Y29uc3RydWN0b3IodCxlLG4scixpLG8pe3N1cGVyKCksdGhpcy50eXBlPVwiQm94R2VvbWV0cnlcIix0aGlzLnBhcmFtZXRlcnM9e3dpZHRoOnQsaGVpZ2h0OmUsZGVwdGg6bix3aWR0aFNlZ21lbnRzOnIsaGVpZ2h0U2VnbWVudHM6aSxkZXB0aFNlZ21lbnRzOm99LHRoaXMuZnJvbUJ1ZmZlckdlb21ldHJ5KG5ldyBtbyh0LGUsbixyLGksbykpLHRoaXMubWVyZ2VWZXJ0aWNlcygpfX1jbGFzcyBYYyBleHRlbmRzIHFpe2NvbnN0cnVjdG9yKHQ9MSxlPTgsbj0wLHI9MipNYXRoLlBJKXtzdXBlcigpLHRoaXMudHlwZT1cIkNpcmNsZUJ1ZmZlckdlb21ldHJ5XCIsdGhpcy5wYXJhbWV0ZXJzPXtyYWRpdXM6dCxzZWdtZW50czplLHRoZXRhU3RhcnQ6bix0aGV0YUxlbmd0aDpyfSxlPU1hdGgubWF4KDMsZSk7Y29uc3QgaT1bXSxvPVtdLGE9W10scz1bXSxjPW5ldyBLbixsPW5ldyBHbjtvLnB1c2goMCwwLDApLGEucHVzaCgwLDAsMSkscy5wdXNoKC41LC41KTtmb3IobGV0IGk9MCx1PTM7aTw9ZTtpKyssdSs9Myl7Y29uc3QgaD1uK2kvZSpyO2MueD10Kk1hdGguY29zKGgpLGMueT10Kk1hdGguc2luKGgpLG8ucHVzaChjLngsYy55LGMueiksYS5wdXNoKDAsMCwxKSxsLng9KG9bdV0vdCsxKS8yLGwueT0ob1t1KzFdL3QrMSkvMixzLnB1c2gobC54LGwueSl9Zm9yKGxldCB0PTE7dDw9ZTt0KyspaS5wdXNoKHQsdCsxLDApO3RoaXMuc2V0SW5kZXgoaSksdGhpcy5zZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBOaShvLDMpKSx0aGlzLnNldEF0dHJpYnV0ZShcIm5vcm1hbFwiLG5ldyBOaShhLDMpKSx0aGlzLnNldEF0dHJpYnV0ZShcInV2XCIsbmV3IE5pKHMsMikpfX1jbGFzcyBxYyBleHRlbmRzIGpje2NvbnN0cnVjdG9yKHQsZSxuLHIpe3N1cGVyKCksdGhpcy50eXBlPVwiQ2lyY2xlR2VvbWV0cnlcIix0aGlzLnBhcmFtZXRlcnM9e3JhZGl1czp0LHNlZ21lbnRzOmUsdGhldGFTdGFydDpuLHRoZXRhTGVuZ3RoOnJ9LHRoaXMuZnJvbUJ1ZmZlckdlb21ldHJ5KG5ldyBYYyh0LGUsbixyKSksdGhpcy5tZXJnZVZlcnRpY2VzKCl9fWNsYXNzIFljIGV4dGVuZHMgcWl7Y29uc3RydWN0b3IodD0xLGU9MSxuPTEscj04LGk9MSxvPSExLGE9MCxzPTIqTWF0aC5QSSl7c3VwZXIoKSx0aGlzLnR5cGU9XCJDeWxpbmRlckJ1ZmZlckdlb21ldHJ5XCIsdGhpcy5wYXJhbWV0ZXJzPXtyYWRpdXNUb3A6dCxyYWRpdXNCb3R0b206ZSxoZWlnaHQ6bixyYWRpYWxTZWdtZW50czpyLGhlaWdodFNlZ21lbnRzOmksb3BlbkVuZGVkOm8sdGhldGFTdGFydDphLHRoZXRhTGVuZ3RoOnN9O2NvbnN0IGM9dGhpcztyPU1hdGguZmxvb3IociksaT1NYXRoLmZsb29yKGkpO2NvbnN0IGw9W10sdT1bXSxoPVtdLGQ9W107bGV0IHA9MDtjb25zdCBmPVtdLG09bi8yO2xldCBnPTA7ZnVuY3Rpb24gdihuKXtjb25zdCBpPXAsbz1uZXcgR24sZj1uZXcgS247bGV0IHY9MDtjb25zdCB5PSEwPT09bj90OmUseD0hMD09PW4/MTotMTtmb3IobGV0IHQ9MTt0PD1yO3QrKyl1LnB1c2goMCxtKngsMCksaC5wdXNoKDAseCwwKSxkLnB1c2goLjUsLjUpLHArKztjb25zdCBiPXA7Zm9yKGxldCB0PTA7dDw9cjt0Kyspe2NvbnN0IGU9dC9yKnMrYSxuPU1hdGguY29zKGUpLGk9TWF0aC5zaW4oZSk7Zi54PXkqaSxmLnk9bSp4LGYuej15Km4sdS5wdXNoKGYueCxmLnksZi56KSxoLnB1c2goMCx4LDApLG8ueD0uNSpuKy41LG8ueT0uNSppKngrLjUsZC5wdXNoKG8ueCxvLnkpLHArK31mb3IobGV0IHQ9MDt0PHI7dCsrKXtjb25zdCBlPWkrdCxyPWIrdDshMD09PW4/bC5wdXNoKHIscisxLGUpOmwucHVzaChyKzEscixlKSx2Kz0zfWMuYWRkR3JvdXAoZyx2LCEwPT09bj8xOjIpLGcrPXZ9IWZ1bmN0aW9uKCl7Y29uc3Qgbz1uZXcgS24sdj1uZXcgS247bGV0IHk9MDtjb25zdCB4PShlLXQpL247Zm9yKGxldCBjPTA7Yzw9aTtjKyspe2NvbnN0IGw9W10sZz1jL2kseT1nKihlLXQpK3Q7Zm9yKGxldCB0PTA7dDw9cjt0Kyspe2NvbnN0IGU9dC9yLGk9ZSpzK2EsYz1NYXRoLnNpbihpKSxmPU1hdGguY29zKGkpO3YueD15KmMsdi55PS1nKm4rbSx2Lno9eSpmLHUucHVzaCh2Lngsdi55LHYueiksby5zZXQoYyx4LGYpLm5vcm1hbGl6ZSgpLGgucHVzaChvLngsby55LG8ueiksZC5wdXNoKGUsMS1nKSxsLnB1c2gocCsrKX1mLnB1c2gobCl9Zm9yKGxldCB0PTA7dDxyO3QrKylmb3IobGV0IGU9MDtlPGk7ZSsrKXtjb25zdCBuPWZbZV1bdF0scj1mW2UrMV1bdF0saT1mW2UrMV1bdCsxXSxvPWZbZV1bdCsxXTtsLnB1c2gobixyLG8pLGwucHVzaChyLGksbykseSs9Nn1jLmFkZEdyb3VwKGcseSwwKSxnKz15fSgpLCExPT09byYmKHQ+MCYmdighMCksZT4wJiZ2KCExKSksdGhpcy5zZXRJbmRleChsKSx0aGlzLnNldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IE5pKHUsMykpLHRoaXMuc2V0QXR0cmlidXRlKFwibm9ybWFsXCIsbmV3IE5pKGgsMykpLHRoaXMuc2V0QXR0cmlidXRlKFwidXZcIixuZXcgTmkoZCwyKSl9fWNsYXNzIFpjIGV4dGVuZHMgamN7Y29uc3RydWN0b3IodCxlLG4scixpLG8sYSxzKXtzdXBlcigpLHRoaXMudHlwZT1cIkN5bGluZGVyR2VvbWV0cnlcIix0aGlzLnBhcmFtZXRlcnM9e3JhZGl1c1RvcDp0LHJhZGl1c0JvdHRvbTplLGhlaWdodDpuLHJhZGlhbFNlZ21lbnRzOnIsaGVpZ2h0U2VnbWVudHM6aSxvcGVuRW5kZWQ6byx0aGV0YVN0YXJ0OmEsdGhldGFMZW5ndGg6c30sdGhpcy5mcm9tQnVmZmVyR2VvbWV0cnkobmV3IFljKHQsZSxuLHIsaSxvLGEscykpLHRoaXMubWVyZ2VWZXJ0aWNlcygpfX1jbGFzcyBKYyBleHRlbmRzIFpje2NvbnN0cnVjdG9yKHQsZSxuLHIsaSxvLGEpe3N1cGVyKDAsdCxlLG4scixpLG8sYSksdGhpcy50eXBlPVwiQ29uZUdlb21ldHJ5XCIsdGhpcy5wYXJhbWV0ZXJzPXtyYWRpdXM6dCxoZWlnaHQ6ZSxyYWRpYWxTZWdtZW50czpuLGhlaWdodFNlZ21lbnRzOnIsb3BlbkVuZGVkOmksdGhldGFTdGFydDpvLHRoZXRhTGVuZ3RoOmF9fX1jbGFzcyBLYyBleHRlbmRzIFlje2NvbnN0cnVjdG9yKHQ9MSxlPTEsbj04LHI9MSxpPSExLG89MCxhPTIqTWF0aC5QSSl7c3VwZXIoMCx0LGUsbixyLGksbyxhKSx0aGlzLnR5cGU9XCJDb25lQnVmZmVyR2VvbWV0cnlcIix0aGlzLnBhcmFtZXRlcnM9e3JhZGl1czp0LGhlaWdodDplLHJhZGlhbFNlZ21lbnRzOm4saGVpZ2h0U2VnbWVudHM6cixvcGVuRW5kZWQ6aSx0aGV0YVN0YXJ0Om8sdGhldGFMZW5ndGg6YX19fWNsYXNzIFFjIGV4dGVuZHMgcWl7Y29uc3RydWN0b3IodCxlLG49MSxyPTApe3N1cGVyKCksdGhpcy50eXBlPVwiUG9seWhlZHJvbkJ1ZmZlckdlb21ldHJ5XCIsdGhpcy5wYXJhbWV0ZXJzPXt2ZXJ0aWNlczp0LGluZGljZXM6ZSxyYWRpdXM6bixkZXRhaWw6cn07Y29uc3QgaT1bXSxvPVtdO2Z1bmN0aW9uIGEodCxlLG4scil7Y29uc3QgaT1yKzEsbz1bXTtmb3IobGV0IHI9MDtyPD1pO3IrKyl7b1tyXT1bXTtjb25zdCBhPXQuY2xvbmUoKS5sZXJwKG4sci9pKSxzPWUuY2xvbmUoKS5sZXJwKG4sci9pKSxjPWktcjtmb3IobGV0IHQ9MDt0PD1jO3QrKylvW3JdW3RdPTA9PT10JiZyPT09aT9hOmEuY2xvbmUoKS5sZXJwKHMsdC9jKX1mb3IobGV0IHQ9MDt0PGk7dCsrKWZvcihsZXQgZT0wO2U8MiooaS10KS0xO2UrKyl7Y29uc3Qgbj1NYXRoLmZsb29yKGUvMik7ZSUyPT0wPyhzKG9bdF1bbisxXSkscyhvW3QrMV1bbl0pLHMob1t0XVtuXSkpOihzKG9bdF1bbisxXSkscyhvW3QrMV1bbisxXSkscyhvW3QrMV1bbl0pKX19ZnVuY3Rpb24gcyh0KXtpLnB1c2godC54LHQueSx0LnopfWZ1bmN0aW9uIGMoZSxuKXtjb25zdCByPTMqZTtuLng9dFtyKzBdLG4ueT10W3IrMV0sbi56PXRbcisyXX1mdW5jdGlvbiBsKHQsZSxuLHIpe3I8MCYmMT09PXQueCYmKG9bZV09dC54LTEpLDA9PT1uLngmJjA9PT1uLnomJihvW2VdPXIvMi9NYXRoLlBJKy41KX1mdW5jdGlvbiB1KHQpe3JldHVybiBNYXRoLmF0YW4yKHQueiwtdC54KX0hZnVuY3Rpb24odCl7Y29uc3Qgbj1uZXcgS24scj1uZXcgS24saT1uZXcgS247Zm9yKGxldCBvPTA7bzxlLmxlbmd0aDtvKz0zKWMoZVtvKzBdLG4pLGMoZVtvKzFdLHIpLGMoZVtvKzJdLGkpLGEobixyLGksdCl9KHIpLGZ1bmN0aW9uKHQpe2NvbnN0IGU9bmV3IEtuO2ZvcihsZXQgbj0wO248aS5sZW5ndGg7bis9MyllLng9aVtuKzBdLGUueT1pW24rMV0sZS56PWlbbisyXSxlLm5vcm1hbGl6ZSgpLm11bHRpcGx5U2NhbGFyKHQpLGlbbiswXT1lLngsaVtuKzFdPWUueSxpW24rMl09ZS56fShuKSxmdW5jdGlvbigpe2NvbnN0IHQ9bmV3IEtuO2ZvcihsZXQgbj0wO248aS5sZW5ndGg7bis9Myl7dC54PWlbbiswXSx0Lnk9aVtuKzFdLHQuej1pW24rMl07Y29uc3Qgcj11KHQpLzIvTWF0aC5QSSsuNSxhPShlPXQsTWF0aC5hdGFuMigtZS55LE1hdGguc3FydChlLngqZS54K2UueiplLnopKS9NYXRoLlBJKy41KTtvLnB1c2gociwxLWEpfXZhciBlOyhmdW5jdGlvbigpe2NvbnN0IHQ9bmV3IEtuLGU9bmV3IEtuLG49bmV3IEtuLHI9bmV3IEtuLGE9bmV3IEduLHM9bmV3IEduLGM9bmV3IEduO2ZvcihsZXQgaD0wLGQ9MDtoPGkubGVuZ3RoO2grPTksZCs9Nil7dC5zZXQoaVtoKzBdLGlbaCsxXSxpW2grMl0pLGUuc2V0KGlbaCszXSxpW2grNF0saVtoKzVdKSxuLnNldChpW2grNl0saVtoKzddLGlbaCs4XSksYS5zZXQob1tkKzBdLG9bZCsxXSkscy5zZXQob1tkKzJdLG9bZCszXSksYy5zZXQob1tkKzRdLG9bZCs1XSksci5jb3B5KHQpLmFkZChlKS5hZGQobikuZGl2aWRlU2NhbGFyKDMpO2NvbnN0IHA9dShyKTtsKGEsZCswLHQscCksbChzLGQrMixlLHApLGwoYyxkKzQsbixwKX19KSgpLGZ1bmN0aW9uKCl7Zm9yKGxldCB0PTA7dDxvLmxlbmd0aDt0Kz02KXtjb25zdCBlPW9bdCswXSxuPW9bdCsyXSxyPW9bdCs0XSxpPU1hdGgubWF4KGUsbixyKSxhPU1hdGgubWluKGUsbixyKTtpPi45JiZhPC4xJiYoZTwuMiYmKG9bdCswXSs9MSksbjwuMiYmKG9bdCsyXSs9MSkscjwuMiYmKG9bdCs0XSs9MSkpfX0oKX0oKSx0aGlzLnNldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IE5pKGksMykpLHRoaXMuc2V0QXR0cmlidXRlKFwibm9ybWFsXCIsbmV3IE5pKGkuc2xpY2UoKSwzKSksdGhpcy5zZXRBdHRyaWJ1dGUoXCJ1dlwiLG5ldyBOaShvLDIpKSwwPT09cj90aGlzLmNvbXB1dGVWZXJ0ZXhOb3JtYWxzKCk6dGhpcy5ub3JtYWxpemVOb3JtYWxzKCl9fWNsYXNzICRjIGV4dGVuZHMgUWN7Y29uc3RydWN0b3IodD0xLGU9MCl7Y29uc3Qgbj0oMStNYXRoLnNxcnQoNSkpLzIscj0xL247c3VwZXIoWy0xLC0xLC0xLC0xLC0xLDEsLTEsMSwtMSwtMSwxLDEsMSwtMSwtMSwxLC0xLDEsMSwxLC0xLDEsMSwxLDAsLXIsLW4sMCwtcixuLDAsciwtbiwwLHIsbiwtciwtbiwwLC1yLG4sMCxyLC1uLDAscixuLDAsLW4sMCwtcixuLDAsLXIsLW4sMCxyLG4sMCxyXSxbMywxMSw3LDMsNywxNSwzLDE1LDEzLDcsMTksMTcsNywxNyw2LDcsNiwxNSwxNyw0LDgsMTcsOCwxMCwxNywxMCw2LDgsMCwxNiw4LDE2LDIsOCwyLDEwLDAsMTIsMSwwLDEsMTgsMCwxOCwxNiw2LDEwLDIsNiwyLDEzLDYsMTMsMTUsMiwxNiwxOCwyLDE4LDMsMiwzLDEzLDE4LDEsOSwxOCw5LDExLDE4LDExLDMsNCwxNCwxMiw0LDEyLDAsNCwwLDgsMTEsOSw1LDExLDUsMTksMTEsMTksNywxOSw1LDE0LDE5LDE0LDQsMTksNCwxNywxLDEyLDE0LDEsMTQsNSwxLDUsOV0sdCxlKSx0aGlzLnR5cGU9XCJEb2RlY2FoZWRyb25CdWZmZXJHZW9tZXRyeVwiLHRoaXMucGFyYW1ldGVycz17cmFkaXVzOnQsZGV0YWlsOmV9fX1jbGFzcyB0bCBleHRlbmRzIGpje2NvbnN0cnVjdG9yKHQsZSl7c3VwZXIoKSx0aGlzLnR5cGU9XCJEb2RlY2FoZWRyb25HZW9tZXRyeVwiLHRoaXMucGFyYW1ldGVycz17cmFkaXVzOnQsZGV0YWlsOmV9LHRoaXMuZnJvbUJ1ZmZlckdlb21ldHJ5KG5ldyAkYyh0LGUpKSx0aGlzLm1lcmdlVmVydGljZXMoKX19Y29uc3QgZWw9bmV3IEtuLG5sPW5ldyBLbixybD1uZXcgS24saWw9bmV3IGhpO2NsYXNzIG9sIGV4dGVuZHMgcWl7Y29uc3RydWN0b3IodCxlKXtzdXBlcigpLHRoaXMudHlwZT1cIkVkZ2VzR2VvbWV0cnlcIix0aGlzLnBhcmFtZXRlcnM9e3RocmVzaG9sZEFuZ2xlOmV9LGU9dm9pZCAwIT09ZT9lOjEsdC5pc0dlb21ldHJ5JiYodD0obmV3IHFpKS5mcm9tR2VvbWV0cnkodCkpO2NvbnN0IG49TWF0aC5wb3coMTAsNCkscj1NYXRoLmNvcyh6bi5ERUcyUkFEKmUpLGk9dC5nZXRJbmRleCgpLG89dC5nZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiKSxhPWk/aS5jb3VudDpvLmNvdW50LHM9WzAsMCwwXSxjPVtcImFcIixcImJcIixcImNcIl0sbD1uZXcgQXJyYXkoMyksdT17fSxoPVtdO2ZvcihsZXQgdD0wO3Q8YTt0Kz0zKXtpPyhzWzBdPWkuZ2V0WCh0KSxzWzFdPWkuZ2V0WCh0KzEpLHNbMl09aS5nZXRYKHQrMikpOihzWzBdPXQsc1sxXT10KzEsc1syXT10KzIpO2NvbnN0e2E6ZSxiOmEsYzpkfT1pbDtpZihlLmZyb21CdWZmZXJBdHRyaWJ1dGUobyxzWzBdKSxhLmZyb21CdWZmZXJBdHRyaWJ1dGUobyxzWzFdKSxkLmZyb21CdWZmZXJBdHRyaWJ1dGUobyxzWzJdKSxpbC5nZXROb3JtYWwocmwpLGxbMF09YCR7TWF0aC5yb3VuZChlLngqbil9LCR7TWF0aC5yb3VuZChlLnkqbil9LCR7TWF0aC5yb3VuZChlLnoqbil9YCxsWzFdPWAke01hdGgucm91bmQoYS54Km4pfSwke01hdGgucm91bmQoYS55Km4pfSwke01hdGgucm91bmQoYS56Km4pfWAsbFsyXT1gJHtNYXRoLnJvdW5kKGQueCpuKX0sJHtNYXRoLnJvdW5kKGQueSpuKX0sJHtNYXRoLnJvdW5kKGQueipuKX1gLGxbMF0hPT1sWzFdJiZsWzFdIT09bFsyXSYmbFsyXSE9PWxbMF0pZm9yKGxldCB0PTA7dDwzO3QrKyl7Y29uc3QgZT0odCsxKSUzLG49bFt0XSxpPWxbZV0sbz1pbFtjW3RdXSxhPWlsW2NbZV1dLGQ9YCR7bn1fJHtpfWAscD1gJHtpfV8ke259YDtwIGluIHUmJnVbcF0/KHJsLmRvdCh1W3BdLm5vcm1hbCk8PXImJihoLnB1c2goby54LG8ueSxvLnopLGgucHVzaChhLngsYS55LGEueikpLHVbcF09bnVsbCk6ZCBpbiB1fHwodVtkXT17aW5kZXgwOnNbdF0saW5kZXgxOnNbZV0sbm9ybWFsOnJsLmNsb25lKCl9KX19Zm9yKGNvbnN0IHQgaW4gdSlpZih1W3RdKXtjb25zdHtpbmRleDA6ZSxpbmRleDE6bn09dVt0XTtlbC5mcm9tQnVmZmVyQXR0cmlidXRlKG8sZSksbmwuZnJvbUJ1ZmZlckF0dHJpYnV0ZShvLG4pLGgucHVzaChlbC54LGVsLnksZWwueiksaC5wdXNoKG5sLngsbmwueSxubC56KX10aGlzLnNldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IE5pKGgsMykpfX1jb25zdCBhbD1mdW5jdGlvbih0LGUsbil7bj1ufHwyO2NvbnN0IHI9ZSYmZS5sZW5ndGgsaT1yP2VbMF0qbjp0Lmxlbmd0aDtsZXQgbz1zbCh0LDAsaSxuLCEwKTtjb25zdCBhPVtdO2lmKCFvfHxvLm5leHQ9PT1vLnByZXYpcmV0dXJuIGE7bGV0IHMsYyxsLHUsaCxkLHA7aWYociYmKG89ZnVuY3Rpb24odCxlLG4scil7Y29uc3QgaT1bXTtsZXQgbyxhLHMsYyxsO2ZvcihvPTAsYT1lLmxlbmd0aDtvPGE7bysrKXM9ZVtvXSpyLGM9bzxhLTE/ZVtvKzFdKnI6dC5sZW5ndGgsbD1zbCh0LHMsYyxyLCExKSxsPT09bC5uZXh0JiYobC5zdGVpbmVyPSEwKSxpLnB1c2goeWwobCkpO2ZvcihpLnNvcnQoZmwpLG89MDtvPGkubGVuZ3RoO28rKyltbChpW29dLG4pLG49Y2wobixuLm5leHQpO3JldHVybiBufSh0LGUsbyxuKSksdC5sZW5ndGg+ODAqbil7cz1sPXRbMF0sYz11PXRbMV07Zm9yKGxldCBlPW47ZTxpO2UrPW4paD10W2VdLGQ9dFtlKzFdLGg8cyYmKHM9aCksZDxjJiYoYz1kKSxoPmwmJihsPWgpLGQ+dSYmKHU9ZCk7cD1NYXRoLm1heChsLXMsdS1jKSxwPTAhPT1wPzEvcDowfXJldHVybiBsbChvLGEsbixzLGMscCksYX07ZnVuY3Rpb24gc2wodCxlLG4scixpKXtsZXQgbyxhO2lmKGk9PT1mdW5jdGlvbih0LGUsbixyKXtsZXQgaT0wO2ZvcihsZXQgbz1lLGE9bi1yO288bjtvKz1yKWkrPSh0W2FdLXRbb10pKih0W28rMV0rdFthKzFdKSxhPW87cmV0dXJuIGl9KHQsZSxuLHIpPjApZm9yKG89ZTtvPG47bys9cilhPUxsKG8sdFtvXSx0W28rMV0sYSk7ZWxzZSBmb3Iobz1uLXI7bz49ZTtvLT1yKWE9TGwobyx0W29dLHRbbysxXSxhKTtyZXR1cm4gYSYmX2woYSxhLm5leHQpJiYoUmwoYSksYT1hLm5leHQpLGF9ZnVuY3Rpb24gY2wodCxlKXtpZighdClyZXR1cm4gdDtlfHwoZT10KTtsZXQgbixyPXQ7ZG97aWYobj0hMSxyLnN0ZWluZXJ8fCFfbChyLHIubmV4dCkmJjAhPT13bChyLnByZXYscixyLm5leHQpKXI9ci5uZXh0O2Vsc2V7aWYoUmwocikscj1lPXIucHJldixyPT09ci5uZXh0KWJyZWFrO249ITB9fXdoaWxlKG58fHIhPT1lKTtyZXR1cm4gZX1mdW5jdGlvbiBsbCh0LGUsbixyLGksbyxhKXtpZighdClyZXR1cm47IWEmJm8mJmZ1bmN0aW9uKHQsZSxuLHIpe2xldCBpPXQ7ZG97bnVsbD09PWkueiYmKGkuej12bChpLngsaS55LGUsbixyKSksaS5wcmV2Wj1pLnByZXYsaS5uZXh0Wj1pLm5leHQsaT1pLm5leHR9d2hpbGUoaSE9PXQpO2kucHJldloubmV4dFo9bnVsbCxpLnByZXZaPW51bGwsZnVuY3Rpb24odCl7bGV0IGUsbixyLGksbyxhLHMsYyxsPTE7ZG97Zm9yKG49dCx0PW51bGwsbz1udWxsLGE9MDtuOyl7Zm9yKGErKyxyPW4scz0wLGU9MDtlPGwmJihzKysscj1yLm5leHRaLHIpO2UrKyk7Zm9yKGM9bDtzPjB8fGM+MCYmcjspMCE9PXMmJigwPT09Y3x8IXJ8fG4uejw9ci56KT8oaT1uLG49bi5uZXh0WixzLS0pOihpPXIscj1yLm5leHRaLGMtLSksbz9vLm5leHRaPWk6dD1pLGkucHJldlo9byxvPWk7bj1yfW8ubmV4dFo9bnVsbCxsKj0yfXdoaWxlKGE+MSl9KGkpfSh0LHIsaSxvKTtsZXQgcyxjLGw9dDtmb3IoO3QucHJldiE9PXQubmV4dDspaWYocz10LnByZXYsYz10Lm5leHQsbz9obCh0LHIsaSxvKTp1bCh0KSllLnB1c2gocy5pL24pLGUucHVzaCh0LmkvbiksZS5wdXNoKGMuaS9uKSxSbCh0KSx0PWMubmV4dCxsPWMubmV4dDtlbHNlIGlmKCh0PWMpPT09bCl7YT8xPT09YT9sbCh0PWRsKGNsKHQpLGUsbiksZSxuLHIsaSxvLDIpOjI9PT1hJiZwbCh0LGUsbixyLGksbyk6bGwoY2wodCksZSxuLHIsaSxvLDEpO2JyZWFrfX1mdW5jdGlvbiB1bCh0KXtjb25zdCBlPXQucHJldixuPXQscj10Lm5leHQ7aWYod2woZSxuLHIpPj0wKXJldHVybiExO2xldCBpPXQubmV4dC5uZXh0O2Zvcig7aSE9PXQucHJldjspe2lmKHhsKGUueCxlLnksbi54LG4ueSxyLngsci55LGkueCxpLnkpJiZ3bChpLnByZXYsaSxpLm5leHQpPj0wKXJldHVybiExO2k9aS5uZXh0fXJldHVybiEwfWZ1bmN0aW9uIGhsKHQsZSxuLHIpe2NvbnN0IGk9dC5wcmV2LG89dCxhPXQubmV4dDtpZih3bChpLG8sYSk+PTApcmV0dXJuITE7Y29uc3Qgcz1pLng8by54P2kueDxhLng/aS54OmEueDpvLng8YS54P28ueDphLngsYz1pLnk8by55P2kueTxhLnk/aS55OmEueTpvLnk8YS55P28ueTphLnksbD1pLng+by54P2kueD5hLng/aS54OmEueDpvLng+YS54P28ueDphLngsdT1pLnk+by55P2kueT5hLnk/aS55OmEueTpvLnk+YS55P28ueTphLnksaD12bChzLGMsZSxuLHIpLGQ9dmwobCx1LGUsbixyKTtsZXQgcD10LnByZXZaLGY9dC5uZXh0Wjtmb3IoO3AmJnAuej49aCYmZiYmZi56PD1kOyl7aWYocCE9PXQucHJldiYmcCE9PXQubmV4dCYmeGwoaS54LGkueSxvLngsby55LGEueCxhLnkscC54LHAueSkmJndsKHAucHJldixwLHAubmV4dCk+PTApcmV0dXJuITE7aWYocD1wLnByZXZaLGYhPT10LnByZXYmJmYhPT10Lm5leHQmJnhsKGkueCxpLnksby54LG8ueSxhLngsYS55LGYueCxmLnkpJiZ3bChmLnByZXYsZixmLm5leHQpPj0wKXJldHVybiExO2Y9Zi5uZXh0Wn1mb3IoO3AmJnAuej49aDspe2lmKHAhPT10LnByZXYmJnAhPT10Lm5leHQmJnhsKGkueCxpLnksby54LG8ueSxhLngsYS55LHAueCxwLnkpJiZ3bChwLnByZXYscCxwLm5leHQpPj0wKXJldHVybiExO3A9cC5wcmV2Wn1mb3IoO2YmJmYuejw9ZDspe2lmKGYhPT10LnByZXYmJmYhPT10Lm5leHQmJnhsKGkueCxpLnksby54LG8ueSxhLngsYS55LGYueCxmLnkpJiZ3bChmLnByZXYsZixmLm5leHQpPj0wKXJldHVybiExO2Y9Zi5uZXh0Wn1yZXR1cm4hMH1mdW5jdGlvbiBkbCh0LGUsbil7bGV0IHI9dDtkb3tjb25zdCBpPXIucHJldixvPXIubmV4dC5uZXh0OyFfbChpLG8pJiZNbChpLHIsci5uZXh0LG8pJiZFbChpLG8pJiZFbChvLGkpJiYoZS5wdXNoKGkuaS9uKSxlLnB1c2goci5pL24pLGUucHVzaChvLmkvbiksUmwociksUmwoci5uZXh0KSxyPXQ9bykscj1yLm5leHR9d2hpbGUociE9PXQpO3JldHVybiBjbChyKX1mdW5jdGlvbiBwbCh0LGUsbixyLGksbyl7bGV0IGE9dDtkb3tsZXQgdD1hLm5leHQubmV4dDtmb3IoO3QhPT1hLnByZXY7KXtpZihhLmkhPT10LmkmJmJsKGEsdCkpe2xldCBzPUFsKGEsdCk7cmV0dXJuIGE9Y2woYSxhLm5leHQpLHM9Y2wocyxzLm5leHQpLGxsKGEsZSxuLHIsaSxvKSx2b2lkIGxsKHMsZSxuLHIsaSxvKX10PXQubmV4dH1hPWEubmV4dH13aGlsZShhIT09dCl9ZnVuY3Rpb24gZmwodCxlKXtyZXR1cm4gdC54LWUueH1mdW5jdGlvbiBtbCh0LGUpe2lmKGU9ZnVuY3Rpb24odCxlKXtsZXQgbj1lO2NvbnN0IHI9dC54LGk9dC55O2xldCBvLGE9LTEvMDtkb3tpZihpPD1uLnkmJmk+PW4ubmV4dC55JiZuLm5leHQueSE9PW4ueSl7Y29uc3QgdD1uLngrKGktbi55KSoobi5uZXh0Lngtbi54KS8obi5uZXh0Lnktbi55KTtpZih0PD1yJiZ0PmEpe2lmKGE9dCx0PT09cil7aWYoaT09PW4ueSlyZXR1cm4gbjtpZihpPT09bi5uZXh0LnkpcmV0dXJuIG4ubmV4dH1vPW4ueDxuLm5leHQueD9uOm4ubmV4dH19bj1uLm5leHR9d2hpbGUobiE9PWUpO2lmKCFvKXJldHVybiBudWxsO2lmKHI9PT1hKXJldHVybiBvO2NvbnN0IHM9byxjPW8ueCxsPW8ueTtsZXQgdSxoPTEvMDtuPW87ZG97cj49bi54JiZuLng+PWMmJnIhPT1uLngmJnhsKGk8bD9yOmEsaSxjLGwsaTxsP2E6cixpLG4ueCxuLnkpJiYodT1NYXRoLmFicyhpLW4ueSkvKHItbi54KSxFbChuLHQpJiYodTxofHx1PT09aCYmKG4ueD5vLnh8fG4ueD09PW8ueCYmZ2wobyxuKSkpJiYobz1uLGg9dSkpLG49bi5uZXh0fXdoaWxlKG4hPT1zKTtyZXR1cm4gb30odCxlKSl7Y29uc3Qgbj1BbChlLHQpO2NsKGUsZS5uZXh0KSxjbChuLG4ubmV4dCl9fWZ1bmN0aW9uIGdsKHQsZSl7cmV0dXJuIHdsKHQucHJldix0LGUucHJldik8MCYmd2woZS5uZXh0LHQsdC5uZXh0KTwwfWZ1bmN0aW9uIHZsKHQsZSxuLHIsaSl7cmV0dXJuKHQ9MTQzMTY1NTc2NSYoKHQ9ODU4OTkzNDU5JigodD0yNTI2NDUxMzUmKCh0PTE2NzExOTM1JigodD0zMjc2NyoodC1uKSppKXx0PDw4KSl8dDw8NCkpfHQ8PDIpKXx0PDwxKSl8KGU9MTQzMTY1NTc2NSYoKGU9ODU4OTkzNDU5JigoZT0yNTI2NDUxMzUmKChlPTE2NzExOTM1JigoZT0zMjc2NyooZS1yKSppKXxlPDw4KSl8ZTw8NCkpfGU8PDIpKXxlPDwxKSk8PDF9ZnVuY3Rpb24geWwodCl7bGV0IGU9dCxuPXQ7ZG97KGUueDxuLnh8fGUueD09PW4ueCYmZS55PG4ueSkmJihuPWUpLGU9ZS5uZXh0fXdoaWxlKGUhPT10KTtyZXR1cm4gbn1mdW5jdGlvbiB4bCh0LGUsbixyLGksbyxhLHMpe3JldHVybihpLWEpKihlLXMpLSh0LWEpKihvLXMpPj0wJiYodC1hKSooci1zKS0obi1hKSooZS1zKT49MCYmKG4tYSkqKG8tcyktKGktYSkqKHItcyk+PTB9ZnVuY3Rpb24gYmwodCxlKXtyZXR1cm4gdC5uZXh0LmkhPT1lLmkmJnQucHJldi5pIT09ZS5pJiYhZnVuY3Rpb24odCxlKXtsZXQgbj10O2Rve2lmKG4uaSE9PXQuaSYmbi5uZXh0LmkhPT10LmkmJm4uaSE9PWUuaSYmbi5uZXh0LmkhPT1lLmkmJk1sKG4sbi5uZXh0LHQsZSkpcmV0dXJuITA7bj1uLm5leHR9d2hpbGUobiE9PXQpO3JldHVybiExfSh0LGUpJiYoRWwodCxlKSYmRWwoZSx0KSYmZnVuY3Rpb24odCxlKXtsZXQgbj10LHI9ITE7Y29uc3QgaT0odC54K2UueCkvMixvPSh0LnkrZS55KS8yO2Rve24ueT5vIT1uLm5leHQueT5vJiZuLm5leHQueSE9PW4ueSYmaTwobi5uZXh0Lngtbi54KSooby1uLnkpLyhuLm5leHQueS1uLnkpK24ueCYmKHI9IXIpLG49bi5uZXh0fXdoaWxlKG4hPT10KTtyZXR1cm4gcn0odCxlKSYmKHdsKHQucHJldix0LGUucHJldil8fHdsKHQsZS5wcmV2LGUpKXx8X2wodCxlKSYmd2wodC5wcmV2LHQsdC5uZXh0KT4wJiZ3bChlLnByZXYsZSxlLm5leHQpPjApfWZ1bmN0aW9uIHdsKHQsZSxuKXtyZXR1cm4oZS55LXQueSkqKG4ueC1lLngpLShlLngtdC54KSoobi55LWUueSl9ZnVuY3Rpb24gX2wodCxlKXtyZXR1cm4gdC54PT09ZS54JiZ0Lnk9PT1lLnl9ZnVuY3Rpb24gTWwodCxlLG4scil7Y29uc3QgaT1UbCh3bCh0LGUsbikpLG89VGwod2wodCxlLHIpKSxhPVRsKHdsKG4scix0KSkscz1UbCh3bChuLHIsZSkpO3JldHVybiBpIT09byYmYSE9PXN8fCghKDAhPT1pfHwhU2wodCxuLGUpKXx8KCEoMCE9PW98fCFTbCh0LHIsZSkpfHwoISgwIT09YXx8IVNsKG4sdCxyKSl8fCEoMCE9PXN8fCFTbChuLGUscikpKSkpfWZ1bmN0aW9uIFNsKHQsZSxuKXtyZXR1cm4gZS54PD1NYXRoLm1heCh0Lngsbi54KSYmZS54Pj1NYXRoLm1pbih0Lngsbi54KSYmZS55PD1NYXRoLm1heCh0Lnksbi55KSYmZS55Pj1NYXRoLm1pbih0Lnksbi55KX1mdW5jdGlvbiBUbCh0KXtyZXR1cm4gdD4wPzE6dDwwPy0xOjB9ZnVuY3Rpb24gRWwodCxlKXtyZXR1cm4gd2wodC5wcmV2LHQsdC5uZXh0KTwwP3dsKHQsZSx0Lm5leHQpPj0wJiZ3bCh0LHQucHJldixlKT49MDp3bCh0LGUsdC5wcmV2KTwwfHx3bCh0LHQubmV4dCxlKTwwfWZ1bmN0aW9uIEFsKHQsZSl7Y29uc3Qgbj1uZXcgUGwodC5pLHQueCx0LnkpLHI9bmV3IFBsKGUuaSxlLngsZS55KSxpPXQubmV4dCxvPWUucHJldjtyZXR1cm4gdC5uZXh0PWUsZS5wcmV2PXQsbi5uZXh0PWksaS5wcmV2PW4sci5uZXh0PW4sbi5wcmV2PXIsby5uZXh0PXIsci5wcmV2PW8scn1mdW5jdGlvbiBMbCh0LGUsbixyKXtjb25zdCBpPW5ldyBQbCh0LGUsbik7cmV0dXJuIHI/KGkubmV4dD1yLm5leHQsaS5wcmV2PXIsci5uZXh0LnByZXY9aSxyLm5leHQ9aSk6KGkucHJldj1pLGkubmV4dD1pKSxpfWZ1bmN0aW9uIFJsKHQpe3QubmV4dC5wcmV2PXQucHJldix0LnByZXYubmV4dD10Lm5leHQsdC5wcmV2WiYmKHQucHJldloubmV4dFo9dC5uZXh0WiksdC5uZXh0WiYmKHQubmV4dFoucHJldlo9dC5wcmV2Wil9ZnVuY3Rpb24gUGwodCxlLG4pe3RoaXMuaT10LHRoaXMueD1lLHRoaXMueT1uLHRoaXMucHJldj1udWxsLHRoaXMubmV4dD1udWxsLHRoaXMuej1udWxsLHRoaXMucHJldlo9bnVsbCx0aGlzLm5leHRaPW51bGwsdGhpcy5zdGVpbmVyPSExfWNvbnN0IENsPXthcmVhOmZ1bmN0aW9uKHQpe2NvbnN0IGU9dC5sZW5ndGg7bGV0IG49MDtmb3IobGV0IHI9ZS0xLGk9MDtpPGU7cj1pKyspbis9dFtyXS54KnRbaV0ueS10W2ldLngqdFtyXS55O3JldHVybi41Km59LGlzQ2xvY2tXaXNlOmZ1bmN0aW9uKHQpe3JldHVybiBDbC5hcmVhKHQpPDB9LHRyaWFuZ3VsYXRlU2hhcGU6ZnVuY3Rpb24odCxlKXtjb25zdCBuPVtdLHI9W10saT1bXTtJbCh0KSxPbChuLHQpO2xldCBvPXQubGVuZ3RoO2UuZm9yRWFjaChJbCk7Zm9yKGxldCB0PTA7dDxlLmxlbmd0aDt0Kyspci5wdXNoKG8pLG8rPWVbdF0ubGVuZ3RoLE9sKG4sZVt0XSk7Y29uc3QgYT1hbChuLHIpO2ZvcihsZXQgdD0wO3Q8YS5sZW5ndGg7dCs9MylpLnB1c2goYS5zbGljZSh0LHQrMykpO3JldHVybiBpfX07ZnVuY3Rpb24gSWwodCl7Y29uc3QgZT10Lmxlbmd0aDtlPjImJnRbZS0xXS5lcXVhbHModFswXSkmJnQucG9wKCl9ZnVuY3Rpb24gT2wodCxlKXtmb3IobGV0IG49MDtuPGUubGVuZ3RoO24rKyl0LnB1c2goZVtuXS54KSx0LnB1c2goZVtuXS55KX1jbGFzcyBObCBleHRlbmRzIHFpe2NvbnN0cnVjdG9yKHQsZSl7c3VwZXIoKSx0aGlzLnR5cGU9XCJFeHRydWRlQnVmZmVyR2VvbWV0cnlcIix0aGlzLnBhcmFtZXRlcnM9e3NoYXBlczp0LG9wdGlvbnM6ZX0sdD1BcnJheS5pc0FycmF5KHQpP3Q6W3RdO2NvbnN0IG49dGhpcyxyPVtdLGk9W107Zm9yKGxldCBlPTAsbj10Lmxlbmd0aDtlPG47ZSsrKXtvKHRbZV0pfWZ1bmN0aW9uIG8odCl7Y29uc3Qgbz1bXSxhPXZvaWQgMCE9PWUuY3VydmVTZWdtZW50cz9lLmN1cnZlU2VnbWVudHM6MTIscz12b2lkIDAhPT1lLnN0ZXBzP2Uuc3RlcHM6MTtsZXQgYz12b2lkIDAhPT1lLmRlcHRoP2UuZGVwdGg6MTAwLGw9dm9pZCAwPT09ZS5iZXZlbEVuYWJsZWR8fGUuYmV2ZWxFbmFibGVkLHU9dm9pZCAwIT09ZS5iZXZlbFRoaWNrbmVzcz9lLmJldmVsVGhpY2tuZXNzOjYsaD12b2lkIDAhPT1lLmJldmVsU2l6ZT9lLmJldmVsU2l6ZTp1LTIsZD12b2lkIDAhPT1lLmJldmVsT2Zmc2V0P2UuYmV2ZWxPZmZzZXQ6MCxwPXZvaWQgMCE9PWUuYmV2ZWxTZWdtZW50cz9lLmJldmVsU2VnbWVudHM6Mztjb25zdCBmPWUuZXh0cnVkZVBhdGgsbT12b2lkIDAhPT1lLlVWR2VuZXJhdG9yP2UuVVZHZW5lcmF0b3I6RGw7dm9pZCAwIT09ZS5hbW91bnQmJihjb25zb2xlLndhcm4oXCJUSFJFRS5FeHRydWRlQnVmZmVyR2VvbWV0cnk6IGFtb3VudCBoYXMgYmVlbiByZW5hbWVkIHRvIGRlcHRoLlwiKSxjPWUuYW1vdW50KTtsZXQgZyx2LHkseCxiLHc9ITE7ZiYmKGc9Zi5nZXRTcGFjZWRQb2ludHMocyksdz0hMCxsPSExLHY9Zi5jb21wdXRlRnJlbmV0RnJhbWVzKHMsITEpLHk9bmV3IEtuLHg9bmV3IEtuLGI9bmV3IEtuKSxsfHwocD0wLHU9MCxoPTAsZD0wKTtjb25zdCBfPXQuZXh0cmFjdFBvaW50cyhhKTtsZXQgTT1fLnNoYXBlO2NvbnN0IFM9Xy5ob2xlcztpZighQ2wuaXNDbG9ja1dpc2UoTSkpe009TS5yZXZlcnNlKCk7Zm9yKGxldCB0PTAsZT1TLmxlbmd0aDt0PGU7dCsrKXtjb25zdCBlPVNbdF07Q2wuaXNDbG9ja1dpc2UoZSkmJihTW3RdPWUucmV2ZXJzZSgpKX19Y29uc3QgVD1DbC50cmlhbmd1bGF0ZVNoYXBlKE0sUyksRT1NO2ZvcihsZXQgdD0wLGU9Uy5sZW5ndGg7dDxlO3QrKyl7Y29uc3QgZT1TW3RdO009TS5jb25jYXQoZSl9ZnVuY3Rpb24gQSh0LGUsbil7cmV0dXJuIGV8fGNvbnNvbGUuZXJyb3IoXCJUSFJFRS5FeHRydWRlR2VvbWV0cnk6IHZlYyBkb2VzIG5vdCBleGlzdFwiKSxlLmNsb25lKCkubXVsdGlwbHlTY2FsYXIobikuYWRkKHQpfWNvbnN0IEw9TS5sZW5ndGgsUj1ULmxlbmd0aDtmdW5jdGlvbiBQKHQsZSxuKXtsZXQgcixpLG87Y29uc3QgYT10LngtZS54LHM9dC55LWUueSxjPW4ueC10LngsbD1uLnktdC55LHU9YSphK3MqcyxoPWEqbC1zKmM7aWYoTWF0aC5hYnMoaCk+TnVtYmVyLkVQU0lMT04pe2NvbnN0IGg9TWF0aC5zcXJ0KHUpLGQ9TWF0aC5zcXJ0KGMqYytsKmwpLHA9ZS54LXMvaCxmPWUueSthL2gsbT0oKG4ueC1sL2QtcCkqbC0obi55K2MvZC1mKSpjKS8oYSpsLXMqYyk7cj1wK2EqbS10LngsaT1mK3MqbS10Lnk7Y29uc3QgZz1yKnIraSppO2lmKGc8PTIpcmV0dXJuIG5ldyBHbihyLGkpO289TWF0aC5zcXJ0KGcvMil9ZWxzZXtsZXQgdD0hMTthPk51bWJlci5FUFNJTE9OP2M+TnVtYmVyLkVQU0lMT04mJih0PSEwKTphPC1OdW1iZXIuRVBTSUxPTj9jPC1OdW1iZXIuRVBTSUxPTiYmKHQ9ITApOk1hdGguc2lnbihzKT09PU1hdGguc2lnbihsKSYmKHQ9ITApLHQ/KHI9LXMsaT1hLG89TWF0aC5zcXJ0KHUpKToocj1hLGk9cyxvPU1hdGguc3FydCh1LzIpKX1yZXR1cm4gbmV3IEduKHIvbyxpL28pfWNvbnN0IEM9W107Zm9yKGxldCB0PTAsZT1FLmxlbmd0aCxuPWUtMSxyPXQrMTt0PGU7dCsrLG4rKyxyKyspbj09PWUmJihuPTApLHI9PT1lJiYocj0wKSxDW3RdPVAoRVt0XSxFW25dLEVbcl0pO2NvbnN0IEk9W107bGV0IE8sTj1DLmNvbmNhdCgpO2ZvcihsZXQgdD0wLGU9Uy5sZW5ndGg7dDxlO3QrKyl7Y29uc3QgZT1TW3RdO089W107Zm9yKGxldCB0PTAsbj1lLmxlbmd0aCxyPW4tMSxpPXQrMTt0PG47dCsrLHIrKyxpKyspcj09PW4mJihyPTApLGk9PT1uJiYoaT0wKSxPW3RdPVAoZVt0XSxlW3JdLGVbaV0pO0kucHVzaChPKSxOPU4uY29uY2F0KE8pfWZvcihsZXQgdD0wO3Q8cDt0Kyspe2NvbnN0IGU9dC9wLG49dSpNYXRoLmNvcyhlKk1hdGguUEkvMikscj1oKk1hdGguc2luKGUqTWF0aC5QSS8yKStkO2ZvcihsZXQgdD0wLGU9RS5sZW5ndGg7dDxlO3QrKyl7Y29uc3QgZT1BKEVbdF0sQ1t0XSxyKTtGKGUueCxlLnksLW4pfWZvcihsZXQgdD0wLGU9Uy5sZW5ndGg7dDxlO3QrKyl7Y29uc3QgZT1TW3RdO089SVt0XTtmb3IobGV0IHQ9MCxpPWUubGVuZ3RoO3Q8aTt0Kyspe2NvbnN0IGk9QShlW3RdLE9bdF0scik7RihpLngsaS55LC1uKX19fWNvbnN0IEQ9aCtkO2ZvcihsZXQgdD0wO3Q8TDt0Kyspe2NvbnN0IGU9bD9BKE1bdF0sTlt0XSxEKTpNW3RdO3c/KHguY29weSh2Lm5vcm1hbHNbMF0pLm11bHRpcGx5U2NhbGFyKGUueCkseS5jb3B5KHYuYmlub3JtYWxzWzBdKS5tdWx0aXBseVNjYWxhcihlLnkpLGIuY29weShnWzBdKS5hZGQoeCkuYWRkKHkpLEYoYi54LGIueSxiLnopKTpGKGUueCxlLnksMCl9Zm9yKGxldCB0PTE7dDw9czt0KyspZm9yKGxldCBlPTA7ZTxMO2UrKyl7Y29uc3Qgbj1sP0EoTVtlXSxOW2VdLEQpOk1bZV07dz8oeC5jb3B5KHYubm9ybWFsc1t0XSkubXVsdGlwbHlTY2FsYXIobi54KSx5LmNvcHkodi5iaW5vcm1hbHNbdF0pLm11bHRpcGx5U2NhbGFyKG4ueSksYi5jb3B5KGdbdF0pLmFkZCh4KS5hZGQoeSksRihiLngsYi55LGIueikpOkYobi54LG4ueSxjL3MqdCl9Zm9yKGxldCB0PXAtMTt0Pj0wO3QtLSl7Y29uc3QgZT10L3Asbj11Kk1hdGguY29zKGUqTWF0aC5QSS8yKSxyPWgqTWF0aC5zaW4oZSpNYXRoLlBJLzIpK2Q7Zm9yKGxldCB0PTAsZT1FLmxlbmd0aDt0PGU7dCsrKXtjb25zdCBlPUEoRVt0XSxDW3RdLHIpO0YoZS54LGUueSxjK24pfWZvcihsZXQgdD0wLGU9Uy5sZW5ndGg7dDxlO3QrKyl7Y29uc3QgZT1TW3RdO089SVt0XTtmb3IobGV0IHQ9MCxpPWUubGVuZ3RoO3Q8aTt0Kyspe2NvbnN0IGk9QShlW3RdLE9bdF0scik7dz9GKGkueCxpLnkrZ1tzLTFdLnksZ1tzLTFdLngrbik6RihpLngsaS55LGMrbil9fX1mdW5jdGlvbiBCKHQsZSl7bGV0IG49dC5sZW5ndGg7Zm9yKDstLW4+PTA7KXtjb25zdCByPW47bGV0IGk9bi0xO2k8MCYmKGk9dC5sZW5ndGgtMSk7Zm9yKGxldCB0PTAsbj1zKzIqcDt0PG47dCsrKXtjb25zdCBuPUwqdCxvPUwqKHQrMSk7eihlK3IrbixlK2krbixlK2krbyxlK3Irbyl9fX1mdW5jdGlvbiBGKHQsZSxuKXtvLnB1c2godCksby5wdXNoKGUpLG8ucHVzaChuKX1mdW5jdGlvbiBVKHQsZSxpKXtHKHQpLEcoZSksRyhpKTtjb25zdCBvPXIubGVuZ3RoLzMsYT1tLmdlbmVyYXRlVG9wVVYobixyLG8tMyxvLTIsby0xKTtIKGFbMF0pLEgoYVsxXSksSChhWzJdKX1mdW5jdGlvbiB6KHQsZSxpLG8pe0codCksRyhlKSxHKG8pLEcoZSksRyhpKSxHKG8pO2NvbnN0IGE9ci5sZW5ndGgvMyxzPW0uZ2VuZXJhdGVTaWRlV2FsbFVWKG4scixhLTYsYS0zLGEtMixhLTEpO0goc1swXSksSChzWzFdKSxIKHNbM10pLEgoc1sxXSksSChzWzJdKSxIKHNbM10pfWZ1bmN0aW9uIEcodCl7ci5wdXNoKG9bMyp0KzBdKSxyLnB1c2gob1szKnQrMV0pLHIucHVzaChvWzMqdCsyXSl9ZnVuY3Rpb24gSCh0KXtpLnB1c2godC54KSxpLnB1c2godC55KX0hZnVuY3Rpb24oKXtjb25zdCB0PXIubGVuZ3RoLzM7aWYobCl7bGV0IHQ9MCxlPUwqdDtmb3IobGV0IHQ9MDt0PFI7dCsrKXtjb25zdCBuPVRbdF07VShuWzJdK2UsblsxXStlLG5bMF0rZSl9dD1zKzIqcCxlPUwqdDtmb3IobGV0IHQ9MDt0PFI7dCsrKXtjb25zdCBuPVRbdF07VShuWzBdK2UsblsxXStlLG5bMl0rZSl9fWVsc2V7Zm9yKGxldCB0PTA7dDxSO3QrKyl7Y29uc3QgZT1UW3RdO1UoZVsyXSxlWzFdLGVbMF0pfWZvcihsZXQgdD0wO3Q8Ujt0Kyspe2NvbnN0IGU9VFt0XTtVKGVbMF0rTCpzLGVbMV0rTCpzLGVbMl0rTCpzKX19bi5hZGRHcm91cCh0LHIubGVuZ3RoLzMtdCwwKX0oKSxmdW5jdGlvbigpe2NvbnN0IHQ9ci5sZW5ndGgvMztsZXQgZT0wO0IoRSxlKSxlKz1FLmxlbmd0aDtmb3IobGV0IHQ9MCxuPVMubGVuZ3RoO3Q8bjt0Kyspe2NvbnN0IG49U1t0XTtCKG4sZSksZSs9bi5sZW5ndGh9bi5hZGRHcm91cCh0LHIubGVuZ3RoLzMtdCwxKX0oKX10aGlzLnNldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IE5pKHIsMykpLHRoaXMuc2V0QXR0cmlidXRlKFwidXZcIixuZXcgTmkoaSwyKSksdGhpcy5jb21wdXRlVmVydGV4Tm9ybWFscygpfXRvSlNPTigpe2NvbnN0IHQ9cWkucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMpO3JldHVybiBmdW5jdGlvbih0LGUsbil7aWYobi5zaGFwZXM9W10sQXJyYXkuaXNBcnJheSh0KSlmb3IobGV0IGU9MCxyPXQubGVuZ3RoO2U8cjtlKyspe2NvbnN0IHI9dFtlXTtuLnNoYXBlcy5wdXNoKHIudXVpZCl9ZWxzZSBuLnNoYXBlcy5wdXNoKHQudXVpZCk7dm9pZCAwIT09ZS5leHRydWRlUGF0aCYmKG4ub3B0aW9ucy5leHRydWRlUGF0aD1lLmV4dHJ1ZGVQYXRoLnRvSlNPTigpKTtyZXR1cm4gbn0odGhpcy5wYXJhbWV0ZXJzLnNoYXBlcyx0aGlzLnBhcmFtZXRlcnMub3B0aW9ucyx0KX19Y29uc3QgRGw9e2dlbmVyYXRlVG9wVVY6ZnVuY3Rpb24odCxlLG4scixpKXtjb25zdCBvPWVbMypuXSxhPWVbMypuKzFdLHM9ZVszKnJdLGM9ZVszKnIrMV0sbD1lWzMqaV0sdT1lWzMqaSsxXTtyZXR1cm5bbmV3IEduKG8sYSksbmV3IEduKHMsYyksbmV3IEduKGwsdSldfSxnZW5lcmF0ZVNpZGVXYWxsVVY6ZnVuY3Rpb24odCxlLG4scixpLG8pe2NvbnN0IGE9ZVszKm5dLHM9ZVszKm4rMV0sYz1lWzMqbisyXSxsPWVbMypyXSx1PWVbMypyKzFdLGg9ZVszKnIrMl0sZD1lWzMqaV0scD1lWzMqaSsxXSxmPWVbMyppKzJdLG09ZVszKm9dLGc9ZVszKm8rMV0sdj1lWzMqbysyXTtyZXR1cm4gTWF0aC5hYnMocy11KTwuMDE/W25ldyBHbihhLDEtYyksbmV3IEduKGwsMS1oKSxuZXcgR24oZCwxLWYpLG5ldyBHbihtLDEtdildOltuZXcgR24ocywxLWMpLG5ldyBHbih1LDEtaCksbmV3IEduKHAsMS1mKSxuZXcgR24oZywxLXYpXX19O2NsYXNzIEJsIGV4dGVuZHMgamN7Y29uc3RydWN0b3IodCxlKXtzdXBlcigpLHRoaXMudHlwZT1cIkV4dHJ1ZGVHZW9tZXRyeVwiLHRoaXMucGFyYW1ldGVycz17c2hhcGVzOnQsb3B0aW9uczplfSx0aGlzLmZyb21CdWZmZXJHZW9tZXRyeShuZXcgTmwodCxlKSksdGhpcy5tZXJnZVZlcnRpY2VzKCl9dG9KU09OKCl7Y29uc3QgdD1zdXBlci50b0pTT04oKTtyZXR1cm4gZnVuY3Rpb24odCxlLG4pe2lmKG4uc2hhcGVzPVtdLEFycmF5LmlzQXJyYXkodCkpZm9yKGxldCBlPTAscj10Lmxlbmd0aDtlPHI7ZSsrKXtjb25zdCByPXRbZV07bi5zaGFwZXMucHVzaChyLnV1aWQpfWVsc2Ugbi5zaGFwZXMucHVzaCh0LnV1aWQpO3ZvaWQgMCE9PWUuZXh0cnVkZVBhdGgmJihuLm9wdGlvbnMuZXh0cnVkZVBhdGg9ZS5leHRydWRlUGF0aC50b0pTT04oKSk7cmV0dXJuIG59KHRoaXMucGFyYW1ldGVycy5zaGFwZXMsdGhpcy5wYXJhbWV0ZXJzLm9wdGlvbnMsdCl9fWNsYXNzIEZsIGV4dGVuZHMgUWN7Y29uc3RydWN0b3IodD0xLGU9MCl7Y29uc3Qgbj0oMStNYXRoLnNxcnQoNSkpLzI7c3VwZXIoWy0xLG4sMCwxLG4sMCwtMSwtbiwwLDEsLW4sMCwwLC0xLG4sMCwxLG4sMCwtMSwtbiwwLDEsLW4sbiwwLC0xLG4sMCwxLC1uLDAsLTEsLW4sMCwxXSxbMCwxMSw1LDAsNSwxLDAsMSw3LDAsNywxMCwwLDEwLDExLDEsNSw5LDUsMTEsNCwxMSwxMCwyLDEwLDcsNiw3LDEsOCwzLDksNCwzLDQsMiwzLDIsNiwzLDYsOCwzLDgsOSw0LDksNSwyLDQsMTEsNiwyLDEwLDgsNiw3LDksOCwxXSx0LGUpLHRoaXMudHlwZT1cIkljb3NhaGVkcm9uQnVmZmVyR2VvbWV0cnlcIix0aGlzLnBhcmFtZXRlcnM9e3JhZGl1czp0LGRldGFpbDplfX19Y2xhc3MgVWwgZXh0ZW5kcyBqY3tjb25zdHJ1Y3Rvcih0LGUpe3N1cGVyKCksdGhpcy50eXBlPVwiSWNvc2FoZWRyb25HZW9tZXRyeVwiLHRoaXMucGFyYW1ldGVycz17cmFkaXVzOnQsZGV0YWlsOmV9LHRoaXMuZnJvbUJ1ZmZlckdlb21ldHJ5KG5ldyBGbCh0LGUpKSx0aGlzLm1lcmdlVmVydGljZXMoKX19Y2xhc3MgemwgZXh0ZW5kcyBxaXtjb25zdHJ1Y3Rvcih0LGU9MTIsbj0wLHI9MipNYXRoLlBJKXtzdXBlcigpLHRoaXMudHlwZT1cIkxhdGhlQnVmZmVyR2VvbWV0cnlcIix0aGlzLnBhcmFtZXRlcnM9e3BvaW50czp0LHNlZ21lbnRzOmUscGhpU3RhcnQ6bixwaGlMZW5ndGg6cn0sZT1NYXRoLmZsb29yKGUpLHI9em4uY2xhbXAociwwLDIqTWF0aC5QSSk7Y29uc3QgaT1bXSxvPVtdLGE9W10scz0xL2UsYz1uZXcgS24sbD1uZXcgR247Zm9yKGxldCBpPTA7aTw9ZTtpKyspe2NvbnN0IHU9bitpKnMqcixoPU1hdGguc2luKHUpLGQ9TWF0aC5jb3ModSk7Zm9yKGxldCBuPTA7bjw9dC5sZW5ndGgtMTtuKyspYy54PXRbbl0ueCpoLGMueT10W25dLnksYy56PXRbbl0ueCpkLG8ucHVzaChjLngsYy55LGMueiksbC54PWkvZSxsLnk9bi8odC5sZW5ndGgtMSksYS5wdXNoKGwueCxsLnkpfWZvcihsZXQgbj0wO248ZTtuKyspZm9yKGxldCBlPTA7ZTx0Lmxlbmd0aC0xO2UrKyl7Y29uc3Qgcj1lK24qdC5sZW5ndGgsbz1yLGE9cit0Lmxlbmd0aCxzPXIrdC5sZW5ndGgrMSxjPXIrMTtpLnB1c2gobyxhLGMpLGkucHVzaChhLHMsYyl9aWYodGhpcy5zZXRJbmRleChpKSx0aGlzLnNldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IE5pKG8sMykpLHRoaXMuc2V0QXR0cmlidXRlKFwidXZcIixuZXcgTmkoYSwyKSksdGhpcy5jb21wdXRlVmVydGV4Tm9ybWFscygpLHI9PT0yKk1hdGguUEkpe2NvbnN0IG49dGhpcy5hdHRyaWJ1dGVzLm5vcm1hbC5hcnJheSxyPW5ldyBLbixpPW5ldyBLbixvPW5ldyBLbixhPWUqdC5sZW5ndGgqMztmb3IobGV0IGU9MCxzPTA7ZTx0Lmxlbmd0aDtlKysscys9MylyLng9bltzKzBdLHIueT1uW3MrMV0sci56PW5bcysyXSxpLng9blthK3MrMF0saS55PW5bYStzKzFdLGkuej1uW2ErcysyXSxvLmFkZFZlY3RvcnMocixpKS5ub3JtYWxpemUoKSxuW3MrMF09blthK3MrMF09by54LG5bcysxXT1uW2ErcysxXT1vLnksbltzKzJdPW5bYStzKzJdPW8uen19fWNsYXNzIEdsIGV4dGVuZHMgamN7Y29uc3RydWN0b3IodCxlLG4scil7c3VwZXIoKSx0aGlzLnR5cGU9XCJMYXRoZUdlb21ldHJ5XCIsdGhpcy5wYXJhbWV0ZXJzPXtwb2ludHM6dCxzZWdtZW50czplLHBoaVN0YXJ0Om4scGhpTGVuZ3RoOnJ9LHRoaXMuZnJvbUJ1ZmZlckdlb21ldHJ5KG5ldyB6bCh0LGUsbixyKSksdGhpcy5tZXJnZVZlcnRpY2VzKCl9fWNsYXNzIEhsIGV4dGVuZHMgUWN7Y29uc3RydWN0b3IodD0xLGU9MCl7c3VwZXIoWzEsMCwwLC0xLDAsMCwwLDEsMCwwLC0xLDAsMCwwLDEsMCwwLC0xXSxbMCwyLDQsMCw0LDMsMCwzLDUsMCw1LDIsMSwyLDUsMSw1LDMsMSwzLDQsMSw0LDJdLHQsZSksdGhpcy50eXBlPVwiT2N0YWhlZHJvbkJ1ZmZlckdlb21ldHJ5XCIsdGhpcy5wYXJhbWV0ZXJzPXtyYWRpdXM6dCxkZXRhaWw6ZX19fWNsYXNzIGtsIGV4dGVuZHMgamN7Y29uc3RydWN0b3IodCxlKXtzdXBlcigpLHRoaXMudHlwZT1cIk9jdGFoZWRyb25HZW9tZXRyeVwiLHRoaXMucGFyYW1ldGVycz17cmFkaXVzOnQsZGV0YWlsOmV9LHRoaXMuZnJvbUJ1ZmZlckdlb21ldHJ5KG5ldyBIbCh0LGUpKSx0aGlzLm1lcmdlVmVydGljZXMoKX19ZnVuY3Rpb24gVmwodCxlLG4pe3FpLmNhbGwodGhpcyksdGhpcy50eXBlPVwiUGFyYW1ldHJpY0J1ZmZlckdlb21ldHJ5XCIsdGhpcy5wYXJhbWV0ZXJzPXtmdW5jOnQsc2xpY2VzOmUsc3RhY2tzOm59O2NvbnN0IHI9W10saT1bXSxvPVtdLGE9W10scz0xZS01LGM9bmV3IEtuLGw9bmV3IEtuLHU9bmV3IEtuLGg9bmV3IEtuLGQ9bmV3IEtuO3QubGVuZ3RoPDMmJmNvbnNvbGUuZXJyb3IoXCJUSFJFRS5QYXJhbWV0cmljR2VvbWV0cnk6IEZ1bmN0aW9uIG11c3Qgbm93IG1vZGlmeSBhIFZlY3RvcjMgYXMgdGhpcmQgcGFyYW1ldGVyLlwiKTtjb25zdCBwPWUrMTtmb3IobGV0IHI9MDtyPD1uO3IrKyl7Y29uc3QgcD1yL247Zm9yKGxldCBuPTA7bjw9ZTtuKyspe2NvbnN0IHI9bi9lO3QocixwLGwpLGkucHVzaChsLngsbC55LGwueiksci1zPj0wPyh0KHItcyxwLHUpLGguc3ViVmVjdG9ycyhsLHUpKToodChyK3MscCx1KSxoLnN1YlZlY3RvcnModSxsKSkscC1zPj0wPyh0KHIscC1zLHUpLGQuc3ViVmVjdG9ycyhsLHUpKToodChyLHArcyx1KSxkLnN1YlZlY3RvcnModSxsKSksYy5jcm9zc1ZlY3RvcnMoaCxkKS5ub3JtYWxpemUoKSxvLnB1c2goYy54LGMueSxjLnopLGEucHVzaChyLHApfX1mb3IobGV0IHQ9MDt0PG47dCsrKWZvcihsZXQgbj0wO248ZTtuKyspe2NvbnN0IGU9dCpwK24saT10KnArbisxLG89KHQrMSkqcCtuKzEsYT0odCsxKSpwK247ci5wdXNoKGUsaSxhKSxyLnB1c2goaSxvLGEpfXRoaXMuc2V0SW5kZXgociksdGhpcy5zZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBOaShpLDMpKSx0aGlzLnNldEF0dHJpYnV0ZShcIm5vcm1hbFwiLG5ldyBOaShvLDMpKSx0aGlzLnNldEF0dHJpYnV0ZShcInV2XCIsbmV3IE5pKGEsMikpfWZ1bmN0aW9uIGpsKHQsZSxuKXtqYy5jYWxsKHRoaXMpLHRoaXMudHlwZT1cIlBhcmFtZXRyaWNHZW9tZXRyeVwiLHRoaXMucGFyYW1ldGVycz17ZnVuYzp0LHNsaWNlczplLHN0YWNrczpufSx0aGlzLmZyb21CdWZmZXJHZW9tZXRyeShuZXcgVmwodCxlLG4pKSx0aGlzLm1lcmdlVmVydGljZXMoKX1WbC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShxaS5wcm90b3R5cGUpLFZsLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1WbCxqbC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShqYy5wcm90b3R5cGUpLGpsLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1qbDtjbGFzcyBXbCBleHRlbmRzIGpje2NvbnN0cnVjdG9yKHQsZSxuLHIpe3N1cGVyKCksdGhpcy50eXBlPVwiUGxhbmVHZW9tZXRyeVwiLHRoaXMucGFyYW1ldGVycz17d2lkdGg6dCxoZWlnaHQ6ZSx3aWR0aFNlZ21lbnRzOm4saGVpZ2h0U2VnbWVudHM6cn0sdGhpcy5mcm9tQnVmZmVyR2VvbWV0cnkobmV3IENvKHQsZSxuLHIpKSx0aGlzLm1lcmdlVmVydGljZXMoKX19Y2xhc3MgWGwgZXh0ZW5kcyBqY3tjb25zdHJ1Y3Rvcih0LGUsbixyKXtzdXBlcigpLHRoaXMudHlwZT1cIlBvbHloZWRyb25HZW9tZXRyeVwiLHRoaXMucGFyYW1ldGVycz17dmVydGljZXM6dCxpbmRpY2VzOmUscmFkaXVzOm4sZGV0YWlsOnJ9LHRoaXMuZnJvbUJ1ZmZlckdlb21ldHJ5KG5ldyBRYyh0LGUsbixyKSksdGhpcy5tZXJnZVZlcnRpY2VzKCl9fWNsYXNzIHFsIGV4dGVuZHMgcWl7Y29uc3RydWN0b3IodD0uNSxlPTEsbj04LHI9MSxpPTAsbz0yKk1hdGguUEkpe3N1cGVyKCksdGhpcy50eXBlPVwiUmluZ0J1ZmZlckdlb21ldHJ5XCIsdGhpcy5wYXJhbWV0ZXJzPXtpbm5lclJhZGl1czp0LG91dGVyUmFkaXVzOmUsdGhldGFTZWdtZW50czpuLHBoaVNlZ21lbnRzOnIsdGhldGFTdGFydDppLHRoZXRhTGVuZ3RoOm99LG49TWF0aC5tYXgoMyxuKTtjb25zdCBhPVtdLHM9W10sYz1bXSxsPVtdO2xldCB1PXQ7Y29uc3QgaD0oZS10KS8ocj1NYXRoLm1heCgxLHIpKSxkPW5ldyBLbixwPW5ldyBHbjtmb3IobGV0IHQ9MDt0PD1yO3QrKyl7Zm9yKGxldCB0PTA7dDw9bjt0Kyspe2NvbnN0IHI9aSt0L24qbztkLng9dSpNYXRoLmNvcyhyKSxkLnk9dSpNYXRoLnNpbihyKSxzLnB1c2goZC54LGQueSxkLnopLGMucHVzaCgwLDAsMSkscC54PShkLngvZSsxKS8yLHAueT0oZC55L2UrMSkvMixsLnB1c2gocC54LHAueSl9dSs9aH1mb3IobGV0IHQ9MDt0PHI7dCsrKXtjb25zdCBlPXQqKG4rMSk7Zm9yKGxldCB0PTA7dDxuO3QrKyl7Y29uc3Qgcj10K2UsaT1yLG89cituKzEscz1yK24rMixjPXIrMTthLnB1c2goaSxvLGMpLGEucHVzaChvLHMsYyl9fXRoaXMuc2V0SW5kZXgoYSksdGhpcy5zZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBOaShzLDMpKSx0aGlzLnNldEF0dHJpYnV0ZShcIm5vcm1hbFwiLG5ldyBOaShjLDMpKSx0aGlzLnNldEF0dHJpYnV0ZShcInV2XCIsbmV3IE5pKGwsMikpfX1jbGFzcyBZbCBleHRlbmRzIGpje2NvbnN0cnVjdG9yKHQsZSxuLHIsaSxvKXtzdXBlcigpLHRoaXMudHlwZT1cIlJpbmdHZW9tZXRyeVwiLHRoaXMucGFyYW1ldGVycz17aW5uZXJSYWRpdXM6dCxvdXRlclJhZGl1czplLHRoZXRhU2VnbWVudHM6bixwaGlTZWdtZW50czpyLHRoZXRhU3RhcnQ6aSx0aGV0YUxlbmd0aDpvfSx0aGlzLmZyb21CdWZmZXJHZW9tZXRyeShuZXcgcWwodCxlLG4scixpLG8pKSx0aGlzLm1lcmdlVmVydGljZXMoKX19Y2xhc3MgWmwgZXh0ZW5kcyBxaXtjb25zdHJ1Y3Rvcih0LGU9MTIpe3N1cGVyKCksdGhpcy50eXBlPVwiU2hhcGVCdWZmZXJHZW9tZXRyeVwiLHRoaXMucGFyYW1ldGVycz17c2hhcGVzOnQsY3VydmVTZWdtZW50czplfTtjb25zdCBuPVtdLHI9W10saT1bXSxvPVtdO2xldCBhPTAscz0wO2lmKCExPT09QXJyYXkuaXNBcnJheSh0KSljKHQpO2Vsc2UgZm9yKGxldCBlPTA7ZTx0Lmxlbmd0aDtlKyspYyh0W2VdKSx0aGlzLmFkZEdyb3VwKGEscyxlKSxhKz1zLHM9MDtmdW5jdGlvbiBjKHQpe2NvbnN0IGE9ci5sZW5ndGgvMyxjPXQuZXh0cmFjdFBvaW50cyhlKTtsZXQgbD1jLnNoYXBlO2NvbnN0IHU9Yy5ob2xlczshMT09PUNsLmlzQ2xvY2tXaXNlKGwpJiYobD1sLnJldmVyc2UoKSk7Zm9yKGxldCB0PTAsZT11Lmxlbmd0aDt0PGU7dCsrKXtjb25zdCBlPXVbdF07ITA9PT1DbC5pc0Nsb2NrV2lzZShlKSYmKHVbdF09ZS5yZXZlcnNlKCkpfWNvbnN0IGg9Q2wudHJpYW5ndWxhdGVTaGFwZShsLHUpO2ZvcihsZXQgdD0wLGU9dS5sZW5ndGg7dDxlO3QrKyl7Y29uc3QgZT11W3RdO2w9bC5jb25jYXQoZSl9Zm9yKGxldCB0PTAsZT1sLmxlbmd0aDt0PGU7dCsrKXtjb25zdCBlPWxbdF07ci5wdXNoKGUueCxlLnksMCksaS5wdXNoKDAsMCwxKSxvLnB1c2goZS54LGUueSl9Zm9yKGxldCB0PTAsZT1oLmxlbmd0aDt0PGU7dCsrKXtjb25zdCBlPWhbdF0scj1lWzBdK2EsaT1lWzFdK2Esbz1lWzJdK2E7bi5wdXNoKHIsaSxvKSxzKz0zfX10aGlzLnNldEluZGV4KG4pLHRoaXMuc2V0QXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgTmkociwzKSksdGhpcy5zZXRBdHRyaWJ1dGUoXCJub3JtYWxcIixuZXcgTmkoaSwzKSksdGhpcy5zZXRBdHRyaWJ1dGUoXCJ1dlwiLG5ldyBOaShvLDIpKX10b0pTT04oKXtjb25zdCB0PXFpLnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzKTtyZXR1cm4gZnVuY3Rpb24odCxlKXtpZihlLnNoYXBlcz1bXSxBcnJheS5pc0FycmF5KHQpKWZvcihsZXQgbj0wLHI9dC5sZW5ndGg7bjxyO24rKyl7Y29uc3Qgcj10W25dO2Uuc2hhcGVzLnB1c2goci51dWlkKX1lbHNlIGUuc2hhcGVzLnB1c2godC51dWlkKTtyZXR1cm4gZX0odGhpcy5wYXJhbWV0ZXJzLnNoYXBlcyx0KX19Y2xhc3MgSmwgZXh0ZW5kcyBqY3tjb25zdHJ1Y3Rvcih0LGUpe3N1cGVyKCksdGhpcy50eXBlPVwiU2hhcGVHZW9tZXRyeVwiLFwib2JqZWN0XCI9PXR5cGVvZiBlJiYoY29uc29sZS53YXJuKFwiVEhSRUUuU2hhcGVHZW9tZXRyeTogT3B0aW9ucyBwYXJhbWV0ZXIgaGFzIGJlZW4gcmVtb3ZlZC5cIiksZT1lLmN1cnZlU2VnbWVudHMpLHRoaXMucGFyYW1ldGVycz17c2hhcGVzOnQsY3VydmVTZWdtZW50czplfSx0aGlzLmZyb21CdWZmZXJHZW9tZXRyeShuZXcgWmwodCxlKSksdGhpcy5tZXJnZVZlcnRpY2VzKCl9dG9KU09OKCl7Y29uc3QgdD1qYy5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7cmV0dXJuIGZ1bmN0aW9uKHQsZSl7aWYoZS5zaGFwZXM9W10sQXJyYXkuaXNBcnJheSh0KSlmb3IobGV0IG49MCxyPXQubGVuZ3RoO248cjtuKyspe2NvbnN0IHI9dFtuXTtlLnNoYXBlcy5wdXNoKHIudXVpZCl9ZWxzZSBlLnNoYXBlcy5wdXNoKHQudXVpZCk7cmV0dXJuIGV9KHRoaXMucGFyYW1ldGVycy5zaGFwZXMsdCl9fWNsYXNzIEtsIGV4dGVuZHMgcWl7Y29uc3RydWN0b3IodD0xLGU9OCxuPTYscj0wLGk9MipNYXRoLlBJLG89MCxhPU1hdGguUEkpe3N1cGVyKCksdGhpcy50eXBlPVwiU3BoZXJlQnVmZmVyR2VvbWV0cnlcIix0aGlzLnBhcmFtZXRlcnM9e3JhZGl1czp0LHdpZHRoU2VnbWVudHM6ZSxoZWlnaHRTZWdtZW50czpuLHBoaVN0YXJ0OnIscGhpTGVuZ3RoOmksdGhldGFTdGFydDpvLHRoZXRhTGVuZ3RoOmF9LGU9TWF0aC5tYXgoMyxNYXRoLmZsb29yKGUpKSxuPU1hdGgubWF4KDIsTWF0aC5mbG9vcihuKSk7Y29uc3Qgcz1NYXRoLm1pbihvK2EsTWF0aC5QSSk7bGV0IGM9MDtjb25zdCBsPVtdLHU9bmV3IEtuLGg9bmV3IEtuLGQ9W10scD1bXSxmPVtdLG09W107Zm9yKGxldCBkPTA7ZDw9bjtkKyspe2NvbnN0IGc9W10sdj1kL247bGV0IHk9MDswPT1kJiYwPT1vP3k9LjUvZTpkPT1uJiZzPT1NYXRoLlBJJiYoeT0tLjUvZSk7Zm9yKGxldCBuPTA7bjw9ZTtuKyspe2NvbnN0IHM9bi9lO3UueD0tdCpNYXRoLmNvcyhyK3MqaSkqTWF0aC5zaW4obyt2KmEpLHUueT10Kk1hdGguY29zKG8rdiphKSx1Lno9dCpNYXRoLnNpbihyK3MqaSkqTWF0aC5zaW4obyt2KmEpLHAucHVzaCh1LngsdS55LHUueiksaC5jb3B5KHUpLm5vcm1hbGl6ZSgpLGYucHVzaChoLngsaC55LGgueiksbS5wdXNoKHMreSwxLXYpLGcucHVzaChjKyspfWwucHVzaChnKX1mb3IobGV0IHQ9MDt0PG47dCsrKWZvcihsZXQgcj0wO3I8ZTtyKyspe2NvbnN0IGU9bFt0XVtyKzFdLGk9bFt0XVtyXSxhPWxbdCsxXVtyXSxjPWxbdCsxXVtyKzFdOygwIT09dHx8bz4wKSYmZC5wdXNoKGUsaSxjKSwodCE9PW4tMXx8czxNYXRoLlBJKSYmZC5wdXNoKGksYSxjKX10aGlzLnNldEluZGV4KGQpLHRoaXMuc2V0QXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgTmkocCwzKSksdGhpcy5zZXRBdHRyaWJ1dGUoXCJub3JtYWxcIixuZXcgTmkoZiwzKSksdGhpcy5zZXRBdHRyaWJ1dGUoXCJ1dlwiLG5ldyBOaShtLDIpKX19Y2xhc3MgUWwgZXh0ZW5kcyBqY3tjb25zdHJ1Y3Rvcih0LGUsbixyLGksbyxhKXtzdXBlcigpLHRoaXMudHlwZT1cIlNwaGVyZUdlb21ldHJ5XCIsdGhpcy5wYXJhbWV0ZXJzPXtyYWRpdXM6dCx3aWR0aFNlZ21lbnRzOmUsaGVpZ2h0U2VnbWVudHM6bixwaGlTdGFydDpyLHBoaUxlbmd0aDppLHRoZXRhU3RhcnQ6byx0aGV0YUxlbmd0aDphfSx0aGlzLmZyb21CdWZmZXJHZW9tZXRyeShuZXcgS2wodCxlLG4scixpLG8sYSkpLHRoaXMubWVyZ2VWZXJ0aWNlcygpfX1jbGFzcyAkbCBleHRlbmRzIFFje2NvbnN0cnVjdG9yKHQ9MSxlPTApe3N1cGVyKFsxLDEsMSwtMSwtMSwxLC0xLDEsLTEsMSwtMSwtMV0sWzIsMSwwLDAsMywyLDEsMywwLDIsMywxXSx0LGUpLHRoaXMudHlwZT1cIlRldHJhaGVkcm9uQnVmZmVyR2VvbWV0cnlcIix0aGlzLnBhcmFtZXRlcnM9e3JhZGl1czp0LGRldGFpbDplfX19Y2xhc3MgdHUgZXh0ZW5kcyBqY3tjb25zdHJ1Y3Rvcih0LGUpe3N1cGVyKCksdGhpcy50eXBlPVwiVGV0cmFoZWRyb25HZW9tZXRyeVwiLHRoaXMucGFyYW1ldGVycz17cmFkaXVzOnQsZGV0YWlsOmV9LHRoaXMuZnJvbUJ1ZmZlckdlb21ldHJ5KG5ldyAkbCh0LGUpKSx0aGlzLm1lcmdlVmVydGljZXMoKX19Y2xhc3MgZXUgZXh0ZW5kcyBObHtjb25zdHJ1Y3Rvcih0LGU9e30pe2NvbnN0IG49ZS5mb250O2lmKCFufHwhbi5pc0ZvbnQpcmV0dXJuIGNvbnNvbGUuZXJyb3IoXCJUSFJFRS5UZXh0R2VvbWV0cnk6IGZvbnQgcGFyYW1ldGVyIGlzIG5vdCBhbiBpbnN0YW5jZSBvZiBUSFJFRS5Gb250LlwiKSxuZXcgcWk7Y29uc3Qgcj1uLmdlbmVyYXRlU2hhcGVzKHQsZS5zaXplKTtlLmRlcHRoPXZvaWQgMCE9PWUuaGVpZ2h0P2UuaGVpZ2h0OjUwLHZvaWQgMD09PWUuYmV2ZWxUaGlja25lc3MmJihlLmJldmVsVGhpY2tuZXNzPTEwKSx2b2lkIDA9PT1lLmJldmVsU2l6ZSYmKGUuYmV2ZWxTaXplPTgpLHZvaWQgMD09PWUuYmV2ZWxFbmFibGVkJiYoZS5iZXZlbEVuYWJsZWQ9ITEpLHN1cGVyKHIsZSksdGhpcy50eXBlPVwiVGV4dEJ1ZmZlckdlb21ldHJ5XCJ9fWNsYXNzIG51IGV4dGVuZHMgamN7Y29uc3RydWN0b3IodCxlKXtzdXBlcigpLHRoaXMudHlwZT1cIlRleHRHZW9tZXRyeVwiLHRoaXMucGFyYW1ldGVycz17dGV4dDp0LHBhcmFtZXRlcnM6ZX0sdGhpcy5mcm9tQnVmZmVyR2VvbWV0cnkobmV3IGV1KHQsZSkpLHRoaXMubWVyZ2VWZXJ0aWNlcygpfX1jbGFzcyBydSBleHRlbmRzIHFpe2NvbnN0cnVjdG9yKHQ9MSxlPS40LG49OCxyPTYsaT0yKk1hdGguUEkpe3N1cGVyKCksdGhpcy50eXBlPVwiVG9ydXNCdWZmZXJHZW9tZXRyeVwiLHRoaXMucGFyYW1ldGVycz17cmFkaXVzOnQsdHViZTplLHJhZGlhbFNlZ21lbnRzOm4sdHVidWxhclNlZ21lbnRzOnIsYXJjOml9LG49TWF0aC5mbG9vcihuKSxyPU1hdGguZmxvb3Iocik7Y29uc3Qgbz1bXSxhPVtdLHM9W10sYz1bXSxsPW5ldyBLbix1PW5ldyBLbixoPW5ldyBLbjtmb3IobGV0IG89MDtvPD1uO28rKylmb3IobGV0IGQ9MDtkPD1yO2QrKyl7Y29uc3QgcD1kL3IqaSxmPW8vbipNYXRoLlBJKjI7dS54PSh0K2UqTWF0aC5jb3MoZikpKk1hdGguY29zKHApLHUueT0odCtlKk1hdGguY29zKGYpKSpNYXRoLnNpbihwKSx1Lno9ZSpNYXRoLnNpbihmKSxhLnB1c2godS54LHUueSx1LnopLGwueD10Kk1hdGguY29zKHApLGwueT10Kk1hdGguc2luKHApLGguc3ViVmVjdG9ycyh1LGwpLm5vcm1hbGl6ZSgpLHMucHVzaChoLngsaC55LGgueiksYy5wdXNoKGQvciksYy5wdXNoKG8vbil9Zm9yKGxldCB0PTE7dDw9bjt0KyspZm9yKGxldCBlPTE7ZTw9cjtlKyspe2NvbnN0IG49KHIrMSkqdCtlLTEsaT0ocisxKSoodC0xKStlLTEsYT0ocisxKSoodC0xKStlLHM9KHIrMSkqdCtlO28ucHVzaChuLGkscyksby5wdXNoKGksYSxzKX10aGlzLnNldEluZGV4KG8pLHRoaXMuc2V0QXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgTmkoYSwzKSksdGhpcy5zZXRBdHRyaWJ1dGUoXCJub3JtYWxcIixuZXcgTmkocywzKSksdGhpcy5zZXRBdHRyaWJ1dGUoXCJ1dlwiLG5ldyBOaShjLDIpKX19Y2xhc3MgaXUgZXh0ZW5kcyBqY3tjb25zdHJ1Y3Rvcih0LGUsbixyLGkpe3N1cGVyKCksdGhpcy50eXBlPVwiVG9ydXNHZW9tZXRyeVwiLHRoaXMucGFyYW1ldGVycz17cmFkaXVzOnQsdHViZTplLHJhZGlhbFNlZ21lbnRzOm4sdHVidWxhclNlZ21lbnRzOnIsYXJjOml9LHRoaXMuZnJvbUJ1ZmZlckdlb21ldHJ5KG5ldyBydSh0LGUsbixyLGkpKSx0aGlzLm1lcmdlVmVydGljZXMoKX19Y2xhc3Mgb3UgZXh0ZW5kcyBxaXtjb25zdHJ1Y3Rvcih0PTEsZT0uNCxuPTY0LHI9OCxpPTIsbz0zKXtzdXBlcigpLHRoaXMudHlwZT1cIlRvcnVzS25vdEJ1ZmZlckdlb21ldHJ5XCIsdGhpcy5wYXJhbWV0ZXJzPXtyYWRpdXM6dCx0dWJlOmUsdHVidWxhclNlZ21lbnRzOm4scmFkaWFsU2VnbWVudHM6cixwOmkscTpvfSxuPU1hdGguZmxvb3Iobikscj1NYXRoLmZsb29yKHIpO2NvbnN0IGE9W10scz1bXSxjPVtdLGw9W10sdT1uZXcgS24saD1uZXcgS24sZD1uZXcgS24scD1uZXcgS24sZj1uZXcgS24sbT1uZXcgS24sZz1uZXcgS247Zm9yKGxldCBhPTA7YTw9bjsrK2Epe2NvbnN0IHk9YS9uKmkqTWF0aC5QSSoyO3YoeSxpLG8sdCxkKSx2KHkrLjAxLGksbyx0LHApLG0uc3ViVmVjdG9ycyhwLGQpLGcuYWRkVmVjdG9ycyhwLGQpLGYuY3Jvc3NWZWN0b3JzKG0sZyksZy5jcm9zc1ZlY3RvcnMoZixtKSxmLm5vcm1hbGl6ZSgpLGcubm9ybWFsaXplKCk7Zm9yKGxldCB0PTA7dDw9cjsrK3Qpe2NvbnN0IGk9dC9yKk1hdGguUEkqMixvPS1lKk1hdGguY29zKGkpLHA9ZSpNYXRoLnNpbihpKTt1Lng9ZC54KyhvKmcueCtwKmYueCksdS55PWQueSsobypnLnkrcCpmLnkpLHUuej1kLnorKG8qZy56K3AqZi56KSxzLnB1c2godS54LHUueSx1LnopLGguc3ViVmVjdG9ycyh1LGQpLm5vcm1hbGl6ZSgpLGMucHVzaChoLngsaC55LGgueiksbC5wdXNoKGEvbiksbC5wdXNoKHQvcil9fWZvcihsZXQgdD0xO3Q8PW47dCsrKWZvcihsZXQgZT0xO2U8PXI7ZSsrKXtjb25zdCBuPShyKzEpKih0LTEpKyhlLTEpLGk9KHIrMSkqdCsoZS0xKSxvPShyKzEpKnQrZSxzPShyKzEpKih0LTEpK2U7YS5wdXNoKG4saSxzKSxhLnB1c2goaSxvLHMpfWZ1bmN0aW9uIHYodCxlLG4scixpKXtjb25zdCBvPU1hdGguY29zKHQpLGE9TWF0aC5zaW4odCkscz1uL2UqdCxjPU1hdGguY29zKHMpO2kueD1yKigyK2MpKi41Km8saS55PXIqKDIrYykqYSouNSxpLno9cipNYXRoLnNpbihzKSouNX10aGlzLnNldEluZGV4KGEpLHRoaXMuc2V0QXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgTmkocywzKSksdGhpcy5zZXRBdHRyaWJ1dGUoXCJub3JtYWxcIixuZXcgTmkoYywzKSksdGhpcy5zZXRBdHRyaWJ1dGUoXCJ1dlwiLG5ldyBOaShsLDIpKX19Y2xhc3MgYXUgZXh0ZW5kcyBqY3tjb25zdHJ1Y3Rvcih0LGUsbixyLGksbyxhKXtzdXBlcigpLHRoaXMudHlwZT1cIlRvcnVzS25vdEdlb21ldHJ5XCIsdGhpcy5wYXJhbWV0ZXJzPXtyYWRpdXM6dCx0dWJlOmUsdHVidWxhclNlZ21lbnRzOm4scmFkaWFsU2VnbWVudHM6cixwOmkscTpvfSx2b2lkIDAhPT1hJiZjb25zb2xlLndhcm4oXCJUSFJFRS5Ub3J1c0tub3RHZW9tZXRyeTogaGVpZ2h0U2NhbGUgaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlIC5zY2FsZSggeCwgeSwgeiApIGluc3RlYWQuXCIpLHRoaXMuZnJvbUJ1ZmZlckdlb21ldHJ5KG5ldyBvdSh0LGUsbixyLGksbykpLHRoaXMubWVyZ2VWZXJ0aWNlcygpfX1jbGFzcyBzdSBleHRlbmRzIHFpe2NvbnN0cnVjdG9yKHQsZT02NCxuPTEscj04LGk9ITEpe3N1cGVyKCksdGhpcy50eXBlPVwiVHViZUJ1ZmZlckdlb21ldHJ5XCIsdGhpcy5wYXJhbWV0ZXJzPXtwYXRoOnQsdHVidWxhclNlZ21lbnRzOmUscmFkaXVzOm4scmFkaWFsU2VnbWVudHM6cixjbG9zZWQ6aX07Y29uc3Qgbz10LmNvbXB1dGVGcmVuZXRGcmFtZXMoZSxpKTt0aGlzLnRhbmdlbnRzPW8udGFuZ2VudHMsdGhpcy5ub3JtYWxzPW8ubm9ybWFscyx0aGlzLmJpbm9ybWFscz1vLmJpbm9ybWFscztjb25zdCBhPW5ldyBLbixzPW5ldyBLbixjPW5ldyBHbjtsZXQgbD1uZXcgS247Y29uc3QgdT1bXSxoPVtdLGQ9W10scD1bXTtmdW5jdGlvbiBmKGkpe2w9dC5nZXRQb2ludEF0KGkvZSxsKTtjb25zdCBjPW8ubm9ybWFsc1tpXSxkPW8uYmlub3JtYWxzW2ldO2ZvcihsZXQgdD0wO3Q8PXI7dCsrKXtjb25zdCBlPXQvcipNYXRoLlBJKjIsaT1NYXRoLnNpbihlKSxvPS1NYXRoLmNvcyhlKTtzLng9bypjLngraSpkLngscy55PW8qYy55K2kqZC55LHMuej1vKmMueitpKmQueixzLm5vcm1hbGl6ZSgpLGgucHVzaChzLngscy55LHMueiksYS54PWwueCtuKnMueCxhLnk9bC55K24qcy55LGEuej1sLnorbipzLnosdS5wdXNoKGEueCxhLnksYS56KX19IWZ1bmN0aW9uKCl7Zm9yKGxldCB0PTA7dDxlO3QrKylmKHQpO2YoITE9PT1pP2U6MCksZnVuY3Rpb24oKXtmb3IobGV0IHQ9MDt0PD1lO3QrKylmb3IobGV0IG49MDtuPD1yO24rKyljLng9dC9lLGMueT1uL3IsZC5wdXNoKGMueCxjLnkpfSgpLGZ1bmN0aW9uKCl7Zm9yKGxldCB0PTE7dDw9ZTt0KyspZm9yKGxldCBlPTE7ZTw9cjtlKyspe2NvbnN0IG49KHIrMSkqKHQtMSkrKGUtMSksaT0ocisxKSp0KyhlLTEpLG89KHIrMSkqdCtlLGE9KHIrMSkqKHQtMSkrZTtwLnB1c2gobixpLGEpLHAucHVzaChpLG8sYSl9fSgpfSgpLHRoaXMuc2V0SW5kZXgocCksdGhpcy5zZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBOaSh1LDMpKSx0aGlzLnNldEF0dHJpYnV0ZShcIm5vcm1hbFwiLG5ldyBOaShoLDMpKSx0aGlzLnNldEF0dHJpYnV0ZShcInV2XCIsbmV3IE5pKGQsMikpfXRvSlNPTigpe2NvbnN0IHQ9cWkucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMpO3JldHVybiB0LnBhdGg9dGhpcy5wYXJhbWV0ZXJzLnBhdGgudG9KU09OKCksdH19Y2xhc3MgY3UgZXh0ZW5kcyBqY3tjb25zdHJ1Y3Rvcih0LGUsbixyLGksbyl7c3VwZXIoKSx0aGlzLnR5cGU9XCJUdWJlR2VvbWV0cnlcIix0aGlzLnBhcmFtZXRlcnM9e3BhdGg6dCx0dWJ1bGFyU2VnbWVudHM6ZSxyYWRpdXM6bixyYWRpYWxTZWdtZW50czpyLGNsb3NlZDppfSx2b2lkIDAhPT1vJiZjb25zb2xlLndhcm4oXCJUSFJFRS5UdWJlR2VvbWV0cnk6IHRhcGVyIGhhcyBiZWVuIHJlbW92ZWQuXCIpO2NvbnN0IGE9bmV3IHN1KHQsZSxuLHIsaSk7dGhpcy50YW5nZW50cz1hLnRhbmdlbnRzLHRoaXMubm9ybWFscz1hLm5vcm1hbHMsdGhpcy5iaW5vcm1hbHM9YS5iaW5vcm1hbHMsdGhpcy5mcm9tQnVmZmVyR2VvbWV0cnkoYSksdGhpcy5tZXJnZVZlcnRpY2VzKCl9fWNsYXNzIGx1IGV4dGVuZHMgcWl7Y29uc3RydWN0b3IodCl7c3VwZXIoKSx0aGlzLnR5cGU9XCJXaXJlZnJhbWVHZW9tZXRyeVwiO2NvbnN0IGU9W10sbj1bMCwwXSxyPXt9LGk9W1wiYVwiLFwiYlwiLFwiY1wiXTtpZih0JiZ0LmlzR2VvbWV0cnkpe2NvbnN0IG89dC5mYWNlcztmb3IobGV0IHQ9MCxlPW8ubGVuZ3RoO3Q8ZTt0Kyspe2NvbnN0IGU9b1t0XTtmb3IobGV0IHQ9MDt0PDM7dCsrKXtjb25zdCBvPWVbaVt0XV0sYT1lW2lbKHQrMSklM11dO25bMF09TWF0aC5taW4obyxhKSxuWzFdPU1hdGgubWF4KG8sYSk7Y29uc3Qgcz1uWzBdK1wiLFwiK25bMV07dm9pZCAwPT09cltzXSYmKHJbc109e2luZGV4MTpuWzBdLGluZGV4MjpuWzFdfSl9fWZvcihjb25zdCBuIGluIHIpe2NvbnN0IGk9cltuXTtsZXQgbz10LnZlcnRpY2VzW2kuaW5kZXgxXTtlLnB1c2goby54LG8ueSxvLnopLG89dC52ZXJ0aWNlc1tpLmluZGV4Ml0sZS5wdXNoKG8ueCxvLnksby56KX19ZWxzZSBpZih0JiZ0LmlzQnVmZmVyR2VvbWV0cnkpe2NvbnN0IGk9bmV3IEtuO2lmKG51bGwhPT10LmluZGV4KXtjb25zdCBvPXQuYXR0cmlidXRlcy5wb3NpdGlvbixhPXQuaW5kZXg7bGV0IHM9dC5ncm91cHM7MD09PXMubGVuZ3RoJiYocz1be3N0YXJ0OjAsY291bnQ6YS5jb3VudCxtYXRlcmlhbEluZGV4OjB9XSk7Zm9yKGxldCB0PTAsZT1zLmxlbmd0aDt0PGU7Kyt0KXtjb25zdCBlPXNbdF0saT1lLnN0YXJ0O2ZvcihsZXQgdD1pLG89aStlLmNvdW50O3Q8bzt0Kz0zKWZvcihsZXQgZT0wO2U8MztlKyspe2NvbnN0IGk9YS5nZXRYKHQrZSksbz1hLmdldFgodCsoZSsxKSUzKTtuWzBdPU1hdGgubWluKGksbyksblsxXT1NYXRoLm1heChpLG8pO2NvbnN0IHM9blswXStcIixcIituWzFdO3ZvaWQgMD09PXJbc10mJihyW3NdPXtpbmRleDE6blswXSxpbmRleDI6blsxXX0pfX1mb3IoY29uc3QgdCBpbiByKXtjb25zdCBuPXJbdF07aS5mcm9tQnVmZmVyQXR0cmlidXRlKG8sbi5pbmRleDEpLGUucHVzaChpLngsaS55LGkueiksaS5mcm9tQnVmZmVyQXR0cmlidXRlKG8sbi5pbmRleDIpLGUucHVzaChpLngsaS55LGkueil9fWVsc2V7Y29uc3Qgbj10LmF0dHJpYnV0ZXMucG9zaXRpb247Zm9yKGxldCB0PTAscj1uLmNvdW50LzM7dDxyO3QrKylmb3IobGV0IHI9MDtyPDM7cisrKXtjb25zdCBvPTMqdCtyO2kuZnJvbUJ1ZmZlckF0dHJpYnV0ZShuLG8pLGUucHVzaChpLngsaS55LGkueik7Y29uc3QgYT0zKnQrKHIrMSklMztpLmZyb21CdWZmZXJBdHRyaWJ1dGUobixhKSxlLnB1c2goaS54LGkueSxpLnopfX19dGhpcy5zZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBOaShlLDMpKX19dmFyIHV1PU9iamVjdC5mcmVlemUoe19fcHJvdG9fXzpudWxsLEJveEdlb21ldHJ5OldjLEJveEJ1ZmZlckdlb21ldHJ5Om1vLENpcmNsZUdlb21ldHJ5OnFjLENpcmNsZUJ1ZmZlckdlb21ldHJ5OlhjLENvbmVHZW9tZXRyeTpKYyxDb25lQnVmZmVyR2VvbWV0cnk6S2MsQ3lsaW5kZXJHZW9tZXRyeTpaYyxDeWxpbmRlckJ1ZmZlckdlb21ldHJ5OlljLERvZGVjYWhlZHJvbkdlb21ldHJ5OnRsLERvZGVjYWhlZHJvbkJ1ZmZlckdlb21ldHJ5OiRjLEVkZ2VzR2VvbWV0cnk6b2wsRXh0cnVkZUdlb21ldHJ5OkJsLEV4dHJ1ZGVCdWZmZXJHZW9tZXRyeTpObCxJY29zYWhlZHJvbkdlb21ldHJ5OlVsLEljb3NhaGVkcm9uQnVmZmVyR2VvbWV0cnk6RmwsTGF0aGVHZW9tZXRyeTpHbCxMYXRoZUJ1ZmZlckdlb21ldHJ5OnpsLE9jdGFoZWRyb25HZW9tZXRyeTprbCxPY3RhaGVkcm9uQnVmZmVyR2VvbWV0cnk6SGwsUGFyYW1ldHJpY0dlb21ldHJ5OmpsLFBhcmFtZXRyaWNCdWZmZXJHZW9tZXRyeTpWbCxQbGFuZUdlb21ldHJ5OldsLFBsYW5lQnVmZmVyR2VvbWV0cnk6Q28sUG9seWhlZHJvbkdlb21ldHJ5OlhsLFBvbHloZWRyb25CdWZmZXJHZW9tZXRyeTpRYyxSaW5nR2VvbWV0cnk6WWwsUmluZ0J1ZmZlckdlb21ldHJ5OnFsLFNoYXBlR2VvbWV0cnk6SmwsU2hhcGVCdWZmZXJHZW9tZXRyeTpabCxTcGhlcmVHZW9tZXRyeTpRbCxTcGhlcmVCdWZmZXJHZW9tZXRyeTpLbCxUZXRyYWhlZHJvbkdlb21ldHJ5OnR1LFRldHJhaGVkcm9uQnVmZmVyR2VvbWV0cnk6JGwsVGV4dEdlb21ldHJ5Om51LFRleHRCdWZmZXJHZW9tZXRyeTpldSxUb3J1c0dlb21ldHJ5Oml1LFRvcnVzQnVmZmVyR2VvbWV0cnk6cnUsVG9ydXNLbm90R2VvbWV0cnk6YXUsVG9ydXNLbm90QnVmZmVyR2VvbWV0cnk6b3UsVHViZUdlb21ldHJ5OmN1LFR1YmVCdWZmZXJHZW9tZXRyeTpzdSxXaXJlZnJhbWVHZW9tZXRyeTpsdX0pO2Z1bmN0aW9uIGh1KHQpe3dpLmNhbGwodGhpcyksdGhpcy50eXBlPVwiU2hhZG93TWF0ZXJpYWxcIix0aGlzLmNvbG9yPW5ldyB5aSgwKSx0aGlzLnRyYW5zcGFyZW50PSEwLHRoaXMuc2V0VmFsdWVzKHQpfWZ1bmN0aW9uIGR1KHQpe3hvLmNhbGwodGhpcyx0KSx0aGlzLnR5cGU9XCJSYXdTaGFkZXJNYXRlcmlhbFwifWZ1bmN0aW9uIHB1KHQpe3dpLmNhbGwodGhpcyksdGhpcy5kZWZpbmVzPXtTVEFOREFSRDpcIlwifSx0aGlzLnR5cGU9XCJNZXNoU3RhbmRhcmRNYXRlcmlhbFwiLHRoaXMuY29sb3I9bmV3IHlpKDE2Nzc3MjE1KSx0aGlzLnJvdWdobmVzcz0xLHRoaXMubWV0YWxuZXNzPTAsdGhpcy5tYXA9bnVsbCx0aGlzLmxpZ2h0TWFwPW51bGwsdGhpcy5saWdodE1hcEludGVuc2l0eT0xLHRoaXMuYW9NYXA9bnVsbCx0aGlzLmFvTWFwSW50ZW5zaXR5PTEsdGhpcy5lbWlzc2l2ZT1uZXcgeWkoMCksdGhpcy5lbWlzc2l2ZUludGVuc2l0eT0xLHRoaXMuZW1pc3NpdmVNYXA9bnVsbCx0aGlzLmJ1bXBNYXA9bnVsbCx0aGlzLmJ1bXBTY2FsZT0xLHRoaXMubm9ybWFsTWFwPW51bGwsdGhpcy5ub3JtYWxNYXBUeXBlPXNuLHRoaXMubm9ybWFsU2NhbGU9bmV3IEduKDEsMSksdGhpcy5kaXNwbGFjZW1lbnRNYXA9bnVsbCx0aGlzLmRpc3BsYWNlbWVudFNjYWxlPTEsdGhpcy5kaXNwbGFjZW1lbnRCaWFzPTAsdGhpcy5yb3VnaG5lc3NNYXA9bnVsbCx0aGlzLm1ldGFsbmVzc01hcD1udWxsLHRoaXMuYWxwaGFNYXA9bnVsbCx0aGlzLmVudk1hcD1udWxsLHRoaXMuZW52TWFwSW50ZW5zaXR5PTEsdGhpcy5yZWZyYWN0aW9uUmF0aW89Ljk4LHRoaXMud2lyZWZyYW1lPSExLHRoaXMud2lyZWZyYW1lTGluZXdpZHRoPTEsdGhpcy53aXJlZnJhbWVMaW5lY2FwPVwicm91bmRcIix0aGlzLndpcmVmcmFtZUxpbmVqb2luPVwicm91bmRcIix0aGlzLnNraW5uaW5nPSExLHRoaXMubW9ycGhUYXJnZXRzPSExLHRoaXMubW9ycGhOb3JtYWxzPSExLHRoaXMudmVydGV4VGFuZ2VudHM9ITEsdGhpcy5zZXRWYWx1ZXModCl9ZnVuY3Rpb24gZnUodCl7cHUuY2FsbCh0aGlzKSx0aGlzLmRlZmluZXM9e1NUQU5EQVJEOlwiXCIsUEhZU0lDQUw6XCJcIn0sdGhpcy50eXBlPVwiTWVzaFBoeXNpY2FsTWF0ZXJpYWxcIix0aGlzLmNsZWFyY29hdD0wLHRoaXMuY2xlYXJjb2F0TWFwPW51bGwsdGhpcy5jbGVhcmNvYXRSb3VnaG5lc3M9MCx0aGlzLmNsZWFyY29hdFJvdWdobmVzc01hcD1udWxsLHRoaXMuY2xlYXJjb2F0Tm9ybWFsU2NhbGU9bmV3IEduKDEsMSksdGhpcy5jbGVhcmNvYXROb3JtYWxNYXA9bnVsbCx0aGlzLnJlZmxlY3Rpdml0eT0uNSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImlvclwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4oMSsuNCp0aGlzLnJlZmxlY3Rpdml0eSkvKDEtLjQqdGhpcy5yZWZsZWN0aXZpdHkpfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5yZWZsZWN0aXZpdHk9em4uY2xhbXAoMi41Kih0LTEpLyh0KzEpLDAsMSl9fSksdGhpcy5zaGVlbj1udWxsLHRoaXMudHJhbnNtaXNzaW9uPTAsdGhpcy50cmFuc21pc3Npb25NYXA9bnVsbCx0aGlzLnNldFZhbHVlcyh0KX1mdW5jdGlvbiBtdSh0KXt3aS5jYWxsKHRoaXMpLHRoaXMudHlwZT1cIk1lc2hQaG9uZ01hdGVyaWFsXCIsdGhpcy5jb2xvcj1uZXcgeWkoMTY3NzcyMTUpLHRoaXMuc3BlY3VsYXI9bmV3IHlpKDExMTg0ODEpLHRoaXMuc2hpbmluZXNzPTMwLHRoaXMubWFwPW51bGwsdGhpcy5saWdodE1hcD1udWxsLHRoaXMubGlnaHRNYXBJbnRlbnNpdHk9MSx0aGlzLmFvTWFwPW51bGwsdGhpcy5hb01hcEludGVuc2l0eT0xLHRoaXMuZW1pc3NpdmU9bmV3IHlpKDApLHRoaXMuZW1pc3NpdmVJbnRlbnNpdHk9MSx0aGlzLmVtaXNzaXZlTWFwPW51bGwsdGhpcy5idW1wTWFwPW51bGwsdGhpcy5idW1wU2NhbGU9MSx0aGlzLm5vcm1hbE1hcD1udWxsLHRoaXMubm9ybWFsTWFwVHlwZT1zbix0aGlzLm5vcm1hbFNjYWxlPW5ldyBHbigxLDEpLHRoaXMuZGlzcGxhY2VtZW50TWFwPW51bGwsdGhpcy5kaXNwbGFjZW1lbnRTY2FsZT0xLHRoaXMuZGlzcGxhY2VtZW50Qmlhcz0wLHRoaXMuc3BlY3VsYXJNYXA9bnVsbCx0aGlzLmFscGhhTWFwPW51bGwsdGhpcy5lbnZNYXA9bnVsbCx0aGlzLmNvbWJpbmU9Wix0aGlzLnJlZmxlY3Rpdml0eT0xLHRoaXMucmVmcmFjdGlvblJhdGlvPS45OCx0aGlzLndpcmVmcmFtZT0hMSx0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD0xLHRoaXMud2lyZWZyYW1lTGluZWNhcD1cInJvdW5kXCIsdGhpcy53aXJlZnJhbWVMaW5lam9pbj1cInJvdW5kXCIsdGhpcy5za2lubmluZz0hMSx0aGlzLm1vcnBoVGFyZ2V0cz0hMSx0aGlzLm1vcnBoTm9ybWFscz0hMSx0aGlzLnNldFZhbHVlcyh0KX1mdW5jdGlvbiBndSh0KXt3aS5jYWxsKHRoaXMpLHRoaXMuZGVmaW5lcz17VE9PTjpcIlwifSx0aGlzLnR5cGU9XCJNZXNoVG9vbk1hdGVyaWFsXCIsdGhpcy5jb2xvcj1uZXcgeWkoMTY3NzcyMTUpLHRoaXMubWFwPW51bGwsdGhpcy5ncmFkaWVudE1hcD1udWxsLHRoaXMubGlnaHRNYXA9bnVsbCx0aGlzLmxpZ2h0TWFwSW50ZW5zaXR5PTEsdGhpcy5hb01hcD1udWxsLHRoaXMuYW9NYXBJbnRlbnNpdHk9MSx0aGlzLmVtaXNzaXZlPW5ldyB5aSgwKSx0aGlzLmVtaXNzaXZlSW50ZW5zaXR5PTEsdGhpcy5lbWlzc2l2ZU1hcD1udWxsLHRoaXMuYnVtcE1hcD1udWxsLHRoaXMuYnVtcFNjYWxlPTEsdGhpcy5ub3JtYWxNYXA9bnVsbCx0aGlzLm5vcm1hbE1hcFR5cGU9c24sdGhpcy5ub3JtYWxTY2FsZT1uZXcgR24oMSwxKSx0aGlzLmRpc3BsYWNlbWVudE1hcD1udWxsLHRoaXMuZGlzcGxhY2VtZW50U2NhbGU9MSx0aGlzLmRpc3BsYWNlbWVudEJpYXM9MCx0aGlzLmFscGhhTWFwPW51bGwsdGhpcy53aXJlZnJhbWU9ITEsdGhpcy53aXJlZnJhbWVMaW5ld2lkdGg9MSx0aGlzLndpcmVmcmFtZUxpbmVjYXA9XCJyb3VuZFwiLHRoaXMud2lyZWZyYW1lTGluZWpvaW49XCJyb3VuZFwiLHRoaXMuc2tpbm5pbmc9ITEsdGhpcy5tb3JwaFRhcmdldHM9ITEsdGhpcy5tb3JwaE5vcm1hbHM9ITEsdGhpcy5zZXRWYWx1ZXModCl9ZnVuY3Rpb24gdnUodCl7d2kuY2FsbCh0aGlzKSx0aGlzLnR5cGU9XCJNZXNoTm9ybWFsTWF0ZXJpYWxcIix0aGlzLmJ1bXBNYXA9bnVsbCx0aGlzLmJ1bXBTY2FsZT0xLHRoaXMubm9ybWFsTWFwPW51bGwsdGhpcy5ub3JtYWxNYXBUeXBlPXNuLHRoaXMubm9ybWFsU2NhbGU9bmV3IEduKDEsMSksdGhpcy5kaXNwbGFjZW1lbnRNYXA9bnVsbCx0aGlzLmRpc3BsYWNlbWVudFNjYWxlPTEsdGhpcy5kaXNwbGFjZW1lbnRCaWFzPTAsdGhpcy53aXJlZnJhbWU9ITEsdGhpcy53aXJlZnJhbWVMaW5ld2lkdGg9MSx0aGlzLmZvZz0hMSx0aGlzLnNraW5uaW5nPSExLHRoaXMubW9ycGhUYXJnZXRzPSExLHRoaXMubW9ycGhOb3JtYWxzPSExLHRoaXMuc2V0VmFsdWVzKHQpfWZ1bmN0aW9uIHl1KHQpe3dpLmNhbGwodGhpcyksdGhpcy50eXBlPVwiTWVzaExhbWJlcnRNYXRlcmlhbFwiLHRoaXMuY29sb3I9bmV3IHlpKDE2Nzc3MjE1KSx0aGlzLm1hcD1udWxsLHRoaXMubGlnaHRNYXA9bnVsbCx0aGlzLmxpZ2h0TWFwSW50ZW5zaXR5PTEsdGhpcy5hb01hcD1udWxsLHRoaXMuYW9NYXBJbnRlbnNpdHk9MSx0aGlzLmVtaXNzaXZlPW5ldyB5aSgwKSx0aGlzLmVtaXNzaXZlSW50ZW5zaXR5PTEsdGhpcy5lbWlzc2l2ZU1hcD1udWxsLHRoaXMuc3BlY3VsYXJNYXA9bnVsbCx0aGlzLmFscGhhTWFwPW51bGwsdGhpcy5lbnZNYXA9bnVsbCx0aGlzLmNvbWJpbmU9Wix0aGlzLnJlZmxlY3Rpdml0eT0xLHRoaXMucmVmcmFjdGlvblJhdGlvPS45OCx0aGlzLndpcmVmcmFtZT0hMSx0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD0xLHRoaXMud2lyZWZyYW1lTGluZWNhcD1cInJvdW5kXCIsdGhpcy53aXJlZnJhbWVMaW5lam9pbj1cInJvdW5kXCIsdGhpcy5za2lubmluZz0hMSx0aGlzLm1vcnBoVGFyZ2V0cz0hMSx0aGlzLm1vcnBoTm9ybWFscz0hMSx0aGlzLnNldFZhbHVlcyh0KX1mdW5jdGlvbiB4dSh0KXt3aS5jYWxsKHRoaXMpLHRoaXMuZGVmaW5lcz17TUFUQ0FQOlwiXCJ9LHRoaXMudHlwZT1cIk1lc2hNYXRjYXBNYXRlcmlhbFwiLHRoaXMuY29sb3I9bmV3IHlpKDE2Nzc3MjE1KSx0aGlzLm1hdGNhcD1udWxsLHRoaXMubWFwPW51bGwsdGhpcy5idW1wTWFwPW51bGwsdGhpcy5idW1wU2NhbGU9MSx0aGlzLm5vcm1hbE1hcD1udWxsLHRoaXMubm9ybWFsTWFwVHlwZT1zbix0aGlzLm5vcm1hbFNjYWxlPW5ldyBHbigxLDEpLHRoaXMuZGlzcGxhY2VtZW50TWFwPW51bGwsdGhpcy5kaXNwbGFjZW1lbnRTY2FsZT0xLHRoaXMuZGlzcGxhY2VtZW50Qmlhcz0wLHRoaXMuYWxwaGFNYXA9bnVsbCx0aGlzLnNraW5uaW5nPSExLHRoaXMubW9ycGhUYXJnZXRzPSExLHRoaXMubW9ycGhOb3JtYWxzPSExLHRoaXMuc2V0VmFsdWVzKHQpfWZ1bmN0aW9uIGJ1KHQpe3ljLmNhbGwodGhpcyksdGhpcy50eXBlPVwiTGluZURhc2hlZE1hdGVyaWFsXCIsdGhpcy5zY2FsZT0xLHRoaXMuZGFzaFNpemU9Myx0aGlzLmdhcFNpemU9MSx0aGlzLnNldFZhbHVlcyh0KX1odS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh3aS5wcm90b3R5cGUpLGh1LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1odSxodS5wcm90b3R5cGUuaXNTaGFkb3dNYXRlcmlhbD0hMCxodS5wcm90b3R5cGUuY29weT1mdW5jdGlvbih0KXtyZXR1cm4gd2kucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLHQpLHRoaXMuY29sb3IuY29weSh0LmNvbG9yKSx0aGlzfSxkdS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh4by5wcm90b3R5cGUpLGR1LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1kdSxkdS5wcm90b3R5cGUuaXNSYXdTaGFkZXJNYXRlcmlhbD0hMCxwdS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh3aS5wcm90b3R5cGUpLHB1LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1wdSxwdS5wcm90b3R5cGUuaXNNZXNoU3RhbmRhcmRNYXRlcmlhbD0hMCxwdS5wcm90b3R5cGUuY29weT1mdW5jdGlvbih0KXtyZXR1cm4gd2kucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLHQpLHRoaXMuZGVmaW5lcz17U1RBTkRBUkQ6XCJcIn0sdGhpcy5jb2xvci5jb3B5KHQuY29sb3IpLHRoaXMucm91Z2huZXNzPXQucm91Z2huZXNzLHRoaXMubWV0YWxuZXNzPXQubWV0YWxuZXNzLHRoaXMubWFwPXQubWFwLHRoaXMubGlnaHRNYXA9dC5saWdodE1hcCx0aGlzLmxpZ2h0TWFwSW50ZW5zaXR5PXQubGlnaHRNYXBJbnRlbnNpdHksdGhpcy5hb01hcD10LmFvTWFwLHRoaXMuYW9NYXBJbnRlbnNpdHk9dC5hb01hcEludGVuc2l0eSx0aGlzLmVtaXNzaXZlLmNvcHkodC5lbWlzc2l2ZSksdGhpcy5lbWlzc2l2ZU1hcD10LmVtaXNzaXZlTWFwLHRoaXMuZW1pc3NpdmVJbnRlbnNpdHk9dC5lbWlzc2l2ZUludGVuc2l0eSx0aGlzLmJ1bXBNYXA9dC5idW1wTWFwLHRoaXMuYnVtcFNjYWxlPXQuYnVtcFNjYWxlLHRoaXMubm9ybWFsTWFwPXQubm9ybWFsTWFwLHRoaXMubm9ybWFsTWFwVHlwZT10Lm5vcm1hbE1hcFR5cGUsdGhpcy5ub3JtYWxTY2FsZS5jb3B5KHQubm9ybWFsU2NhbGUpLHRoaXMuZGlzcGxhY2VtZW50TWFwPXQuZGlzcGxhY2VtZW50TWFwLHRoaXMuZGlzcGxhY2VtZW50U2NhbGU9dC5kaXNwbGFjZW1lbnRTY2FsZSx0aGlzLmRpc3BsYWNlbWVudEJpYXM9dC5kaXNwbGFjZW1lbnRCaWFzLHRoaXMucm91Z2huZXNzTWFwPXQucm91Z2huZXNzTWFwLHRoaXMubWV0YWxuZXNzTWFwPXQubWV0YWxuZXNzTWFwLHRoaXMuYWxwaGFNYXA9dC5hbHBoYU1hcCx0aGlzLmVudk1hcD10LmVudk1hcCx0aGlzLmVudk1hcEludGVuc2l0eT10LmVudk1hcEludGVuc2l0eSx0aGlzLnJlZnJhY3Rpb25SYXRpbz10LnJlZnJhY3Rpb25SYXRpbyx0aGlzLndpcmVmcmFtZT10LndpcmVmcmFtZSx0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD10LndpcmVmcmFtZUxpbmV3aWR0aCx0aGlzLndpcmVmcmFtZUxpbmVjYXA9dC53aXJlZnJhbWVMaW5lY2FwLHRoaXMud2lyZWZyYW1lTGluZWpvaW49dC53aXJlZnJhbWVMaW5lam9pbix0aGlzLnNraW5uaW5nPXQuc2tpbm5pbmcsdGhpcy5tb3JwaFRhcmdldHM9dC5tb3JwaFRhcmdldHMsdGhpcy5tb3JwaE5vcm1hbHM9dC5tb3JwaE5vcm1hbHMsdGhpcy52ZXJ0ZXhUYW5nZW50cz10LnZlcnRleFRhbmdlbnRzLHRoaXN9LGZ1LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHB1LnByb3RvdHlwZSksZnUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWZ1LGZ1LnByb3RvdHlwZS5pc01lc2hQaHlzaWNhbE1hdGVyaWFsPSEwLGZ1LnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKHQpe3JldHVybiBwdS5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsdCksdGhpcy5kZWZpbmVzPXtTVEFOREFSRDpcIlwiLFBIWVNJQ0FMOlwiXCJ9LHRoaXMuY2xlYXJjb2F0PXQuY2xlYXJjb2F0LHRoaXMuY2xlYXJjb2F0TWFwPXQuY2xlYXJjb2F0TWFwLHRoaXMuY2xlYXJjb2F0Um91Z2huZXNzPXQuY2xlYXJjb2F0Um91Z2huZXNzLHRoaXMuY2xlYXJjb2F0Um91Z2huZXNzTWFwPXQuY2xlYXJjb2F0Um91Z2huZXNzTWFwLHRoaXMuY2xlYXJjb2F0Tm9ybWFsTWFwPXQuY2xlYXJjb2F0Tm9ybWFsTWFwLHRoaXMuY2xlYXJjb2F0Tm9ybWFsU2NhbGUuY29weSh0LmNsZWFyY29hdE5vcm1hbFNjYWxlKSx0aGlzLnJlZmxlY3Rpdml0eT10LnJlZmxlY3Rpdml0eSx0LnNoZWVuP3RoaXMuc2hlZW49KHRoaXMuc2hlZW58fG5ldyB5aSkuY29weSh0LnNoZWVuKTp0aGlzLnNoZWVuPW51bGwsdGhpcy50cmFuc21pc3Npb249dC50cmFuc21pc3Npb24sdGhpcy50cmFuc21pc3Npb25NYXA9dC50cmFuc21pc3Npb25NYXAsdGhpc30sbXUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUod2kucHJvdG90eXBlKSxtdS5wcm90b3R5cGUuY29uc3RydWN0b3I9bXUsbXUucHJvdG90eXBlLmlzTWVzaFBob25nTWF0ZXJpYWw9ITAsbXUucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24odCl7cmV0dXJuIHdpLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyx0KSx0aGlzLmNvbG9yLmNvcHkodC5jb2xvciksdGhpcy5zcGVjdWxhci5jb3B5KHQuc3BlY3VsYXIpLHRoaXMuc2hpbmluZXNzPXQuc2hpbmluZXNzLHRoaXMubWFwPXQubWFwLHRoaXMubGlnaHRNYXA9dC5saWdodE1hcCx0aGlzLmxpZ2h0TWFwSW50ZW5zaXR5PXQubGlnaHRNYXBJbnRlbnNpdHksdGhpcy5hb01hcD10LmFvTWFwLHRoaXMuYW9NYXBJbnRlbnNpdHk9dC5hb01hcEludGVuc2l0eSx0aGlzLmVtaXNzaXZlLmNvcHkodC5lbWlzc2l2ZSksdGhpcy5lbWlzc2l2ZU1hcD10LmVtaXNzaXZlTWFwLHRoaXMuZW1pc3NpdmVJbnRlbnNpdHk9dC5lbWlzc2l2ZUludGVuc2l0eSx0aGlzLmJ1bXBNYXA9dC5idW1wTWFwLHRoaXMuYnVtcFNjYWxlPXQuYnVtcFNjYWxlLHRoaXMubm9ybWFsTWFwPXQubm9ybWFsTWFwLHRoaXMubm9ybWFsTWFwVHlwZT10Lm5vcm1hbE1hcFR5cGUsdGhpcy5ub3JtYWxTY2FsZS5jb3B5KHQubm9ybWFsU2NhbGUpLHRoaXMuZGlzcGxhY2VtZW50TWFwPXQuZGlzcGxhY2VtZW50TWFwLHRoaXMuZGlzcGxhY2VtZW50U2NhbGU9dC5kaXNwbGFjZW1lbnRTY2FsZSx0aGlzLmRpc3BsYWNlbWVudEJpYXM9dC5kaXNwbGFjZW1lbnRCaWFzLHRoaXMuc3BlY3VsYXJNYXA9dC5zcGVjdWxhck1hcCx0aGlzLmFscGhhTWFwPXQuYWxwaGFNYXAsdGhpcy5lbnZNYXA9dC5lbnZNYXAsdGhpcy5jb21iaW5lPXQuY29tYmluZSx0aGlzLnJlZmxlY3Rpdml0eT10LnJlZmxlY3Rpdml0eSx0aGlzLnJlZnJhY3Rpb25SYXRpbz10LnJlZnJhY3Rpb25SYXRpbyx0aGlzLndpcmVmcmFtZT10LndpcmVmcmFtZSx0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD10LndpcmVmcmFtZUxpbmV3aWR0aCx0aGlzLndpcmVmcmFtZUxpbmVjYXA9dC53aXJlZnJhbWVMaW5lY2FwLHRoaXMud2lyZWZyYW1lTGluZWpvaW49dC53aXJlZnJhbWVMaW5lam9pbix0aGlzLnNraW5uaW5nPXQuc2tpbm5pbmcsdGhpcy5tb3JwaFRhcmdldHM9dC5tb3JwaFRhcmdldHMsdGhpcy5tb3JwaE5vcm1hbHM9dC5tb3JwaE5vcm1hbHMsdGhpc30sZ3UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUod2kucHJvdG90eXBlKSxndS5wcm90b3R5cGUuY29uc3RydWN0b3I9Z3UsZ3UucHJvdG90eXBlLmlzTWVzaFRvb25NYXRlcmlhbD0hMCxndS5wcm90b3R5cGUuY29weT1mdW5jdGlvbih0KXtyZXR1cm4gd2kucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLHQpLHRoaXMuY29sb3IuY29weSh0LmNvbG9yKSx0aGlzLm1hcD10Lm1hcCx0aGlzLmdyYWRpZW50TWFwPXQuZ3JhZGllbnRNYXAsdGhpcy5saWdodE1hcD10LmxpZ2h0TWFwLHRoaXMubGlnaHRNYXBJbnRlbnNpdHk9dC5saWdodE1hcEludGVuc2l0eSx0aGlzLmFvTWFwPXQuYW9NYXAsdGhpcy5hb01hcEludGVuc2l0eT10LmFvTWFwSW50ZW5zaXR5LHRoaXMuZW1pc3NpdmUuY29weSh0LmVtaXNzaXZlKSx0aGlzLmVtaXNzaXZlTWFwPXQuZW1pc3NpdmVNYXAsdGhpcy5lbWlzc2l2ZUludGVuc2l0eT10LmVtaXNzaXZlSW50ZW5zaXR5LHRoaXMuYnVtcE1hcD10LmJ1bXBNYXAsdGhpcy5idW1wU2NhbGU9dC5idW1wU2NhbGUsdGhpcy5ub3JtYWxNYXA9dC5ub3JtYWxNYXAsdGhpcy5ub3JtYWxNYXBUeXBlPXQubm9ybWFsTWFwVHlwZSx0aGlzLm5vcm1hbFNjYWxlLmNvcHkodC5ub3JtYWxTY2FsZSksdGhpcy5kaXNwbGFjZW1lbnRNYXA9dC5kaXNwbGFjZW1lbnRNYXAsdGhpcy5kaXNwbGFjZW1lbnRTY2FsZT10LmRpc3BsYWNlbWVudFNjYWxlLHRoaXMuZGlzcGxhY2VtZW50Qmlhcz10LmRpc3BsYWNlbWVudEJpYXMsdGhpcy5hbHBoYU1hcD10LmFscGhhTWFwLHRoaXMud2lyZWZyYW1lPXQud2lyZWZyYW1lLHRoaXMud2lyZWZyYW1lTGluZXdpZHRoPXQud2lyZWZyYW1lTGluZXdpZHRoLHRoaXMud2lyZWZyYW1lTGluZWNhcD10LndpcmVmcmFtZUxpbmVjYXAsdGhpcy53aXJlZnJhbWVMaW5lam9pbj10LndpcmVmcmFtZUxpbmVqb2luLHRoaXMuc2tpbm5pbmc9dC5za2lubmluZyx0aGlzLm1vcnBoVGFyZ2V0cz10Lm1vcnBoVGFyZ2V0cyx0aGlzLm1vcnBoTm9ybWFscz10Lm1vcnBoTm9ybWFscyx0aGlzfSx2dS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh3aS5wcm90b3R5cGUpLHZ1LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj12dSx2dS5wcm90b3R5cGUuaXNNZXNoTm9ybWFsTWF0ZXJpYWw9ITAsdnUucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24odCl7cmV0dXJuIHdpLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyx0KSx0aGlzLmJ1bXBNYXA9dC5idW1wTWFwLHRoaXMuYnVtcFNjYWxlPXQuYnVtcFNjYWxlLHRoaXMubm9ybWFsTWFwPXQubm9ybWFsTWFwLHRoaXMubm9ybWFsTWFwVHlwZT10Lm5vcm1hbE1hcFR5cGUsdGhpcy5ub3JtYWxTY2FsZS5jb3B5KHQubm9ybWFsU2NhbGUpLHRoaXMuZGlzcGxhY2VtZW50TWFwPXQuZGlzcGxhY2VtZW50TWFwLHRoaXMuZGlzcGxhY2VtZW50U2NhbGU9dC5kaXNwbGFjZW1lbnRTY2FsZSx0aGlzLmRpc3BsYWNlbWVudEJpYXM9dC5kaXNwbGFjZW1lbnRCaWFzLHRoaXMud2lyZWZyYW1lPXQud2lyZWZyYW1lLHRoaXMud2lyZWZyYW1lTGluZXdpZHRoPXQud2lyZWZyYW1lTGluZXdpZHRoLHRoaXMuc2tpbm5pbmc9dC5za2lubmluZyx0aGlzLm1vcnBoVGFyZ2V0cz10Lm1vcnBoVGFyZ2V0cyx0aGlzLm1vcnBoTm9ybWFscz10Lm1vcnBoTm9ybWFscyx0aGlzfSx5dS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh3aS5wcm90b3R5cGUpLHl1LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj15dSx5dS5wcm90b3R5cGUuaXNNZXNoTGFtYmVydE1hdGVyaWFsPSEwLHl1LnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKHQpe3JldHVybiB3aS5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsdCksdGhpcy5jb2xvci5jb3B5KHQuY29sb3IpLHRoaXMubWFwPXQubWFwLHRoaXMubGlnaHRNYXA9dC5saWdodE1hcCx0aGlzLmxpZ2h0TWFwSW50ZW5zaXR5PXQubGlnaHRNYXBJbnRlbnNpdHksdGhpcy5hb01hcD10LmFvTWFwLHRoaXMuYW9NYXBJbnRlbnNpdHk9dC5hb01hcEludGVuc2l0eSx0aGlzLmVtaXNzaXZlLmNvcHkodC5lbWlzc2l2ZSksdGhpcy5lbWlzc2l2ZU1hcD10LmVtaXNzaXZlTWFwLHRoaXMuZW1pc3NpdmVJbnRlbnNpdHk9dC5lbWlzc2l2ZUludGVuc2l0eSx0aGlzLnNwZWN1bGFyTWFwPXQuc3BlY3VsYXJNYXAsdGhpcy5hbHBoYU1hcD10LmFscGhhTWFwLHRoaXMuZW52TWFwPXQuZW52TWFwLHRoaXMuY29tYmluZT10LmNvbWJpbmUsdGhpcy5yZWZsZWN0aXZpdHk9dC5yZWZsZWN0aXZpdHksdGhpcy5yZWZyYWN0aW9uUmF0aW89dC5yZWZyYWN0aW9uUmF0aW8sdGhpcy53aXJlZnJhbWU9dC53aXJlZnJhbWUsdGhpcy53aXJlZnJhbWVMaW5ld2lkdGg9dC53aXJlZnJhbWVMaW5ld2lkdGgsdGhpcy53aXJlZnJhbWVMaW5lY2FwPXQud2lyZWZyYW1lTGluZWNhcCx0aGlzLndpcmVmcmFtZUxpbmVqb2luPXQud2lyZWZyYW1lTGluZWpvaW4sdGhpcy5za2lubmluZz10LnNraW5uaW5nLHRoaXMubW9ycGhUYXJnZXRzPXQubW9ycGhUYXJnZXRzLHRoaXMubW9ycGhOb3JtYWxzPXQubW9ycGhOb3JtYWxzLHRoaXN9LHh1LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHdpLnByb3RvdHlwZSkseHUucHJvdG90eXBlLmNvbnN0cnVjdG9yPXh1LHh1LnByb3RvdHlwZS5pc01lc2hNYXRjYXBNYXRlcmlhbD0hMCx4dS5wcm90b3R5cGUuY29weT1mdW5jdGlvbih0KXtyZXR1cm4gd2kucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLHQpLHRoaXMuZGVmaW5lcz17TUFUQ0FQOlwiXCJ9LHRoaXMuY29sb3IuY29weSh0LmNvbG9yKSx0aGlzLm1hdGNhcD10Lm1hdGNhcCx0aGlzLm1hcD10Lm1hcCx0aGlzLmJ1bXBNYXA9dC5idW1wTWFwLHRoaXMuYnVtcFNjYWxlPXQuYnVtcFNjYWxlLHRoaXMubm9ybWFsTWFwPXQubm9ybWFsTWFwLHRoaXMubm9ybWFsTWFwVHlwZT10Lm5vcm1hbE1hcFR5cGUsdGhpcy5ub3JtYWxTY2FsZS5jb3B5KHQubm9ybWFsU2NhbGUpLHRoaXMuZGlzcGxhY2VtZW50TWFwPXQuZGlzcGxhY2VtZW50TWFwLHRoaXMuZGlzcGxhY2VtZW50U2NhbGU9dC5kaXNwbGFjZW1lbnRTY2FsZSx0aGlzLmRpc3BsYWNlbWVudEJpYXM9dC5kaXNwbGFjZW1lbnRCaWFzLHRoaXMuYWxwaGFNYXA9dC5hbHBoYU1hcCx0aGlzLnNraW5uaW5nPXQuc2tpbm5pbmcsdGhpcy5tb3JwaFRhcmdldHM9dC5tb3JwaFRhcmdldHMsdGhpcy5tb3JwaE5vcm1hbHM9dC5tb3JwaE5vcm1hbHMsdGhpc30sYnUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoeWMucHJvdG90eXBlKSxidS5wcm90b3R5cGUuY29uc3RydWN0b3I9YnUsYnUucHJvdG90eXBlLmlzTGluZURhc2hlZE1hdGVyaWFsPSEwLGJ1LnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKHQpe3JldHVybiB5Yy5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsdCksdGhpcy5zY2FsZT10LnNjYWxlLHRoaXMuZGFzaFNpemU9dC5kYXNoU2l6ZSx0aGlzLmdhcFNpemU9dC5nYXBTaXplLHRoaXN9O3ZhciB3dT1PYmplY3QuZnJlZXplKHtfX3Byb3RvX186bnVsbCxTaGFkb3dNYXRlcmlhbDpodSxTcHJpdGVNYXRlcmlhbDpWcyxSYXdTaGFkZXJNYXRlcmlhbDpkdSxTaGFkZXJNYXRlcmlhbDp4byxQb2ludHNNYXRlcmlhbDpSYyxNZXNoUGh5c2ljYWxNYXRlcmlhbDpmdSxNZXNoU3RhbmRhcmRNYXRlcmlhbDpwdSxNZXNoUGhvbmdNYXRlcmlhbDptdSxNZXNoVG9vbk1hdGVyaWFsOmd1LE1lc2hOb3JtYWxNYXRlcmlhbDp2dSxNZXNoTGFtYmVydE1hdGVyaWFsOnl1LE1lc2hEZXB0aE1hdGVyaWFsOlNzLE1lc2hEaXN0YW5jZU1hdGVyaWFsOlRzLE1lc2hCYXNpY01hdGVyaWFsOl9pLE1lc2hNYXRjYXBNYXRlcmlhbDp4dSxMaW5lRGFzaGVkTWF0ZXJpYWw6YnUsTGluZUJhc2ljTWF0ZXJpYWw6eWMsTWF0ZXJpYWw6d2l9KTtjb25zdCBfdT17YXJyYXlTbGljZTpmdW5jdGlvbih0LGUsbil7cmV0dXJuIF91LmlzVHlwZWRBcnJheSh0KT9uZXcgdC5jb25zdHJ1Y3Rvcih0LnN1YmFycmF5KGUsdm9pZCAwIT09bj9uOnQubGVuZ3RoKSk6dC5zbGljZShlLG4pfSxjb252ZXJ0QXJyYXk6ZnVuY3Rpb24odCxlLG4pe3JldHVybiF0fHwhbiYmdC5jb25zdHJ1Y3Rvcj09PWU/dDpcIm51bWJlclwiPT10eXBlb2YgZS5CWVRFU19QRVJfRUxFTUVOVD9uZXcgZSh0KTpBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0KX0saXNUeXBlZEFycmF5OmZ1bmN0aW9uKHQpe3JldHVybiBBcnJheUJ1ZmZlci5pc1ZpZXcodCkmJiEodCBpbnN0YW5jZW9mIERhdGFWaWV3KX0sZ2V0S2V5ZnJhbWVPcmRlcjpmdW5jdGlvbih0KXtjb25zdCBlPXQubGVuZ3RoLG49bmV3IEFycmF5KGUpO2ZvcihsZXQgdD0wO3QhPT1lOysrdCluW3RdPXQ7cmV0dXJuIG4uc29ydCgoZnVuY3Rpb24oZSxuKXtyZXR1cm4gdFtlXS10W25dfSkpLG59LHNvcnRlZEFycmF5OmZ1bmN0aW9uKHQsZSxuKXtjb25zdCByPXQubGVuZ3RoLGk9bmV3IHQuY29uc3RydWN0b3Iocik7Zm9yKGxldCBvPTAsYT0wO2EhPT1yOysrbyl7Y29uc3Qgcj1uW29dKmU7Zm9yKGxldCBuPTA7biE9PWU7KytuKWlbYSsrXT10W3Irbl19cmV0dXJuIGl9LGZsYXR0ZW5KU09OOmZ1bmN0aW9uKHQsZSxuLHIpe2xldCBpPTEsbz10WzBdO2Zvcig7dm9pZCAwIT09byYmdm9pZCAwPT09b1tyXTspbz10W2krK107aWYodm9pZCAwPT09bylyZXR1cm47bGV0IGE9b1tyXTtpZih2b2lkIDAhPT1hKWlmKEFycmF5LmlzQXJyYXkoYSkpZG97YT1vW3JdLHZvaWQgMCE9PWEmJihlLnB1c2goby50aW1lKSxuLnB1c2guYXBwbHkobixhKSksbz10W2krK119d2hpbGUodm9pZCAwIT09byk7ZWxzZSBpZih2b2lkIDAhPT1hLnRvQXJyYXkpZG97YT1vW3JdLHZvaWQgMCE9PWEmJihlLnB1c2goby50aW1lKSxhLnRvQXJyYXkobixuLmxlbmd0aCkpLG89dFtpKytdfXdoaWxlKHZvaWQgMCE9PW8pO2Vsc2UgZG97YT1vW3JdLHZvaWQgMCE9PWEmJihlLnB1c2goby50aW1lKSxuLnB1c2goYSkpLG89dFtpKytdfXdoaWxlKHZvaWQgMCE9PW8pfSxzdWJjbGlwOmZ1bmN0aW9uKHQsZSxuLHIsaT0zMCl7Y29uc3Qgbz10LmNsb25lKCk7by5uYW1lPWU7Y29uc3QgYT1bXTtmb3IobGV0IHQ9MDt0PG8udHJhY2tzLmxlbmd0aDsrK3Qpe2NvbnN0IGU9by50cmFja3NbdF0scz1lLmdldFZhbHVlU2l6ZSgpLGM9W10sbD1bXTtmb3IobGV0IHQ9MDt0PGUudGltZXMubGVuZ3RoOysrdCl7Y29uc3Qgbz1lLnRpbWVzW3RdKmk7aWYoIShvPG58fG8+PXIpKXtjLnB1c2goZS50aW1lc1t0XSk7Zm9yKGxldCBuPTA7bjxzOysrbilsLnB1c2goZS52YWx1ZXNbdCpzK25dKX19MCE9PWMubGVuZ3RoJiYoZS50aW1lcz1fdS5jb252ZXJ0QXJyYXkoYyxlLnRpbWVzLmNvbnN0cnVjdG9yKSxlLnZhbHVlcz1fdS5jb252ZXJ0QXJyYXkobCxlLnZhbHVlcy5jb25zdHJ1Y3RvciksYS5wdXNoKGUpKX1vLnRyYWNrcz1hO2xldCBzPTEvMDtmb3IobGV0IHQ9MDt0PG8udHJhY2tzLmxlbmd0aDsrK3Qpcz5vLnRyYWNrc1t0XS50aW1lc1swXSYmKHM9by50cmFja3NbdF0udGltZXNbMF0pO2ZvcihsZXQgdD0wO3Q8by50cmFja3MubGVuZ3RoOysrdClvLnRyYWNrc1t0XS5zaGlmdCgtMSpzKTtyZXR1cm4gby5yZXNldER1cmF0aW9uKCksb30sbWFrZUNsaXBBZGRpdGl2ZTpmdW5jdGlvbih0LGU9MCxuPXQscj0zMCl7cjw9MCYmKHI9MzApO2NvbnN0IGk9bi50cmFja3MubGVuZ3RoLG89ZS9yO2ZvcihsZXQgZT0wO2U8aTsrK2Upe2NvbnN0IHI9bi50cmFja3NbZV0saT1yLlZhbHVlVHlwZU5hbWU7aWYoXCJib29sXCI9PT1pfHxcInN0cmluZ1wiPT09aSljb250aW51ZTtjb25zdCBhPXQudHJhY2tzLmZpbmQoKGZ1bmN0aW9uKHQpe3JldHVybiB0Lm5hbWU9PT1yLm5hbWUmJnQuVmFsdWVUeXBlTmFtZT09PWl9KSk7aWYodm9pZCAwPT09YSljb250aW51ZTtsZXQgcz0wO2NvbnN0IGM9ci5nZXRWYWx1ZVNpemUoKTtyLmNyZWF0ZUludGVycG9sYW50LmlzSW50ZXJwb2xhbnRGYWN0b3J5TWV0aG9kR0xURkN1YmljU3BsaW5lJiYocz1jLzMpO2xldCBsPTA7Y29uc3QgdT1hLmdldFZhbHVlU2l6ZSgpO2EuY3JlYXRlSW50ZXJwb2xhbnQuaXNJbnRlcnBvbGFudEZhY3RvcnlNZXRob2RHTFRGQ3ViaWNTcGxpbmUmJihsPXUvMyk7Y29uc3QgaD1yLnRpbWVzLmxlbmd0aC0xO2xldCBkO2lmKG88PXIudGltZXNbMF0pe2NvbnN0IHQ9cyxlPWMtcztkPV91LmFycmF5U2xpY2Uoci52YWx1ZXMsdCxlKX1lbHNlIGlmKG8+PXIudGltZXNbaF0pe2NvbnN0IHQ9aCpjK3MsZT10K2MtcztkPV91LmFycmF5U2xpY2Uoci52YWx1ZXMsdCxlKX1lbHNle2NvbnN0IHQ9ci5jcmVhdGVJbnRlcnBvbGFudCgpLGU9cyxuPWMtczt0LmV2YWx1YXRlKG8pLGQ9X3UuYXJyYXlTbGljZSh0LnJlc3VsdEJ1ZmZlcixlLG4pfWlmKFwicXVhdGVybmlvblwiPT09aSl7KG5ldyBKbikuZnJvbUFycmF5KGQpLm5vcm1hbGl6ZSgpLmNvbmp1Z2F0ZSgpLnRvQXJyYXkoZCl9Y29uc3QgcD1hLnRpbWVzLmxlbmd0aDtmb3IobGV0IHQ9MDt0PHA7Kyt0KXtjb25zdCBlPXQqdStsO2lmKFwicXVhdGVybmlvblwiPT09aSlKbi5tdWx0aXBseVF1YXRlcm5pb25zRmxhdChhLnZhbHVlcyxlLGQsMCxhLnZhbHVlcyxlKTtlbHNle2NvbnN0IHQ9dS0yKmw7Zm9yKGxldCBuPTA7bjx0OysrbilhLnZhbHVlc1tlK25dLT1kW25dfX19cmV0dXJuIHQuYmxlbmRNb2RlPVhlLHR9fTtmdW5jdGlvbiBNdSh0LGUsbixyKXt0aGlzLnBhcmFtZXRlclBvc2l0aW9ucz10LHRoaXMuX2NhY2hlZEluZGV4PTAsdGhpcy5yZXN1bHRCdWZmZXI9dm9pZCAwIT09cj9yOm5ldyBlLmNvbnN0cnVjdG9yKG4pLHRoaXMuc2FtcGxlVmFsdWVzPWUsdGhpcy52YWx1ZVNpemU9bn1mdW5jdGlvbiBTdSh0LGUsbixyKXtNdS5jYWxsKHRoaXMsdCxlLG4sciksdGhpcy5fd2VpZ2h0UHJldj0tMCx0aGlzLl9vZmZzZXRQcmV2PS0wLHRoaXMuX3dlaWdodE5leHQ9LTAsdGhpcy5fb2Zmc2V0TmV4dD0tMH1mdW5jdGlvbiBUdSh0LGUsbixyKXtNdS5jYWxsKHRoaXMsdCxlLG4scil9ZnVuY3Rpb24gRXUodCxlLG4scil7TXUuY2FsbCh0aGlzLHQsZSxuLHIpfWZ1bmN0aW9uIEF1KHQsZSxuLHIpe2lmKHZvaWQgMD09PXQpdGhyb3cgbmV3IEVycm9yKFwiVEhSRUUuS2V5ZnJhbWVUcmFjazogdHJhY2sgbmFtZSBpcyB1bmRlZmluZWRcIik7aWYodm9pZCAwPT09ZXx8MD09PWUubGVuZ3RoKXRocm93IG5ldyBFcnJvcihcIlRIUkVFLktleWZyYW1lVHJhY2s6IG5vIGtleWZyYW1lcyBpbiB0cmFjayBuYW1lZCBcIit0KTt0aGlzLm5hbWU9dCx0aGlzLnRpbWVzPV91LmNvbnZlcnRBcnJheShlLHRoaXMuVGltZUJ1ZmZlclR5cGUpLHRoaXMudmFsdWVzPV91LmNvbnZlcnRBcnJheShuLHRoaXMuVmFsdWVCdWZmZXJUeXBlKSx0aGlzLnNldEludGVycG9sYXRpb24ocnx8dGhpcy5EZWZhdWx0SW50ZXJwb2xhdGlvbil9ZnVuY3Rpb24gTHUodCxlLG4pe0F1LmNhbGwodGhpcyx0LGUsbil9ZnVuY3Rpb24gUnUodCxlLG4scil7QXUuY2FsbCh0aGlzLHQsZSxuLHIpfWZ1bmN0aW9uIFB1KHQsZSxuLHIpe0F1LmNhbGwodGhpcyx0LGUsbixyKX1mdW5jdGlvbiBDdSh0LGUsbixyKXtNdS5jYWxsKHRoaXMsdCxlLG4scil9ZnVuY3Rpb24gSXUodCxlLG4scil7QXUuY2FsbCh0aGlzLHQsZSxuLHIpfWZ1bmN0aW9uIE91KHQsZSxuLHIpe0F1LmNhbGwodGhpcyx0LGUsbixyKX1mdW5jdGlvbiBOdSh0LGUsbixyKXtBdS5jYWxsKHRoaXMsdCxlLG4scil9ZnVuY3Rpb24gRHUodCxlLG4scil7dGhpcy5uYW1lPXQsdGhpcy50cmFja3M9bix0aGlzLmR1cmF0aW9uPXZvaWQgMCE9PWU/ZTotMSx0aGlzLmJsZW5kTW9kZT12b2lkIDAhPT1yP3I6V2UsdGhpcy51dWlkPXpuLmdlbmVyYXRlVVVJRCgpLHRoaXMuZHVyYXRpb248MCYmdGhpcy5yZXNldER1cmF0aW9uKCl9ZnVuY3Rpb24gQnUodCl7aWYodm9pZCAwPT09dC50eXBlKXRocm93IG5ldyBFcnJvcihcIlRIUkVFLktleWZyYW1lVHJhY2s6IHRyYWNrIHR5cGUgdW5kZWZpbmVkLCBjYW4gbm90IHBhcnNlXCIpO2NvbnN0IGU9ZnVuY3Rpb24odCl7c3dpdGNoKHQudG9Mb3dlckNhc2UoKSl7Y2FzZVwic2NhbGFyXCI6Y2FzZVwiZG91YmxlXCI6Y2FzZVwiZmxvYXRcIjpjYXNlXCJudW1iZXJcIjpjYXNlXCJpbnRlZ2VyXCI6cmV0dXJuIFB1O2Nhc2VcInZlY3RvclwiOmNhc2VcInZlY3RvcjJcIjpjYXNlXCJ2ZWN0b3IzXCI6Y2FzZVwidmVjdG9yNFwiOnJldHVybiBOdTtjYXNlXCJjb2xvclwiOnJldHVybiBSdTtjYXNlXCJxdWF0ZXJuaW9uXCI6cmV0dXJuIEl1O2Nhc2VcImJvb2xcIjpjYXNlXCJib29sZWFuXCI6cmV0dXJuIEx1O2Nhc2VcInN0cmluZ1wiOnJldHVybiBPdX10aHJvdyBuZXcgRXJyb3IoXCJUSFJFRS5LZXlmcmFtZVRyYWNrOiBVbnN1cHBvcnRlZCB0eXBlTmFtZTogXCIrdCl9KHQudHlwZSk7aWYodm9pZCAwPT09dC50aW1lcyl7Y29uc3QgZT1bXSxuPVtdO191LmZsYXR0ZW5KU09OKHQua2V5cyxlLG4sXCJ2YWx1ZVwiKSx0LnRpbWVzPWUsdC52YWx1ZXM9bn1yZXR1cm4gdm9pZCAwIT09ZS5wYXJzZT9lLnBhcnNlKHQpOm5ldyBlKHQubmFtZSx0LnRpbWVzLHQudmFsdWVzLHQuaW50ZXJwb2xhdGlvbil9T2JqZWN0LmFzc2lnbihNdS5wcm90b3R5cGUse2V2YWx1YXRlOmZ1bmN0aW9uKHQpe2NvbnN0IGU9dGhpcy5wYXJhbWV0ZXJQb3NpdGlvbnM7bGV0IG49dGhpcy5fY2FjaGVkSW5kZXgscj1lW25dLGk9ZVtuLTFdO3Q6e2U6e2xldCBvO246e3I6aWYoISh0PHIpKXtmb3IobGV0IG89bisyOzspe2lmKHZvaWQgMD09PXIpe2lmKHQ8aSlicmVhayByO3JldHVybiBuPWUubGVuZ3RoLHRoaXMuX2NhY2hlZEluZGV4PW4sdGhpcy5hZnRlckVuZF8obi0xLHQsaSl9aWYobj09PW8pYnJlYWs7aWYoaT1yLHI9ZVsrK25dLHQ8cilicmVhayBlfW89ZS5sZW5ndGg7YnJlYWsgbn1pZih0Pj1pKWJyZWFrIHQ7e2NvbnN0IGE9ZVsxXTt0PGEmJihuPTIsaT1hKTtmb3IobGV0IG89bi0yOzspe2lmKHZvaWQgMD09PWkpcmV0dXJuIHRoaXMuX2NhY2hlZEluZGV4PTAsdGhpcy5iZWZvcmVTdGFydF8oMCx0LHIpO2lmKG49PT1vKWJyZWFrO2lmKHI9aSxpPWVbLS1uLTFdLHQ+PWkpYnJlYWsgZX1vPW4sbj0wfX1mb3IoO248bzspe2NvbnN0IHI9bitvPj4+MTt0PGVbcl0/bz1yOm49cisxfWlmKHI9ZVtuXSxpPWVbbi0xXSx2b2lkIDA9PT1pKXJldHVybiB0aGlzLl9jYWNoZWRJbmRleD0wLHRoaXMuYmVmb3JlU3RhcnRfKDAsdCxyKTtpZih2b2lkIDA9PT1yKXJldHVybiBuPWUubGVuZ3RoLHRoaXMuX2NhY2hlZEluZGV4PW4sdGhpcy5hZnRlckVuZF8obi0xLGksdCl9dGhpcy5fY2FjaGVkSW5kZXg9bix0aGlzLmludGVydmFsQ2hhbmdlZF8obixpLHIpfXJldHVybiB0aGlzLmludGVycG9sYXRlXyhuLGksdCxyKX0sc2V0dGluZ3M6bnVsbCxEZWZhdWx0U2V0dGluZ3NfOnt9LGdldFNldHRpbmdzXzpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNldHRpbmdzfHx0aGlzLkRlZmF1bHRTZXR0aW5nc199LGNvcHlTYW1wbGVWYWx1ZV86ZnVuY3Rpb24odCl7Y29uc3QgZT10aGlzLnJlc3VsdEJ1ZmZlcixuPXRoaXMuc2FtcGxlVmFsdWVzLHI9dGhpcy52YWx1ZVNpemUsaT10KnI7Zm9yKGxldCB0PTA7dCE9PXI7Kyt0KWVbdF09bltpK3RdO3JldHVybiBlfSxpbnRlcnBvbGF0ZV86ZnVuY3Rpb24oKXt0aHJvdyBuZXcgRXJyb3IoXCJjYWxsIHRvIGFic3RyYWN0IG1ldGhvZFwiKX0saW50ZXJ2YWxDaGFuZ2VkXzpmdW5jdGlvbigpe319KSxPYmplY3QuYXNzaWduKE11LnByb3RvdHlwZSx7YmVmb3JlU3RhcnRfOk11LnByb3RvdHlwZS5jb3B5U2FtcGxlVmFsdWVfLGFmdGVyRW5kXzpNdS5wcm90b3R5cGUuY29weVNhbXBsZVZhbHVlX30pLFN1LnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoTXUucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6U3UsRGVmYXVsdFNldHRpbmdzXzp7ZW5kaW5nU3RhcnQ6a2UsZW5kaW5nRW5kOmtlfSxpbnRlcnZhbENoYW5nZWRfOmZ1bmN0aW9uKHQsZSxuKXtjb25zdCByPXRoaXMucGFyYW1ldGVyUG9zaXRpb25zO2xldCBpPXQtMixvPXQrMSxhPXJbaV0scz1yW29dO2lmKHZvaWQgMD09PWEpc3dpdGNoKHRoaXMuZ2V0U2V0dGluZ3NfKCkuZW5kaW5nU3RhcnQpe2Nhc2UgVmU6aT10LGE9MiplLW47YnJlYWs7Y2FzZSBqZTppPXIubGVuZ3RoLTIsYT1lK3JbaV0tcltpKzFdO2JyZWFrO2RlZmF1bHQ6aT10LGE9bn1pZih2b2lkIDA9PT1zKXN3aXRjaCh0aGlzLmdldFNldHRpbmdzXygpLmVuZGluZ0VuZCl7Y2FzZSBWZTpvPXQscz0yKm4tZTticmVhaztjYXNlIGplOm89MSxzPW4rclsxXS1yWzBdO2JyZWFrO2RlZmF1bHQ6bz10LTEscz1lfWNvbnN0IGM9LjUqKG4tZSksbD10aGlzLnZhbHVlU2l6ZTt0aGlzLl93ZWlnaHRQcmV2PWMvKGUtYSksdGhpcy5fd2VpZ2h0TmV4dD1jLyhzLW4pLHRoaXMuX29mZnNldFByZXY9aSpsLHRoaXMuX29mZnNldE5leHQ9bypsfSxpbnRlcnBvbGF0ZV86ZnVuY3Rpb24odCxlLG4scil7Y29uc3QgaT10aGlzLnJlc3VsdEJ1ZmZlcixvPXRoaXMuc2FtcGxlVmFsdWVzLGE9dGhpcy52YWx1ZVNpemUscz10KmEsYz1zLWEsbD10aGlzLl9vZmZzZXRQcmV2LHU9dGhpcy5fb2Zmc2V0TmV4dCxoPXRoaXMuX3dlaWdodFByZXYsZD10aGlzLl93ZWlnaHROZXh0LHA9KG4tZSkvKHItZSksZj1wKnAsbT1mKnAsZz0taCptKzIqaCpmLWgqcCx2PSgxK2gpKm0rKC0xLjUtMipoKSpmKygtLjUraCkqcCsxLHk9KC0xLWQpKm0rKDEuNStkKSpmKy41KnAseD1kKm0tZCpmO2ZvcihsZXQgdD0wO3QhPT1hOysrdClpW3RdPWcqb1tsK3RdK3Yqb1tjK3RdK3kqb1tzK3RdK3gqb1t1K3RdO3JldHVybiBpfX0pLFR1LnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoTXUucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6VHUsaW50ZXJwb2xhdGVfOmZ1bmN0aW9uKHQsZSxuLHIpe2NvbnN0IGk9dGhpcy5yZXN1bHRCdWZmZXIsbz10aGlzLnNhbXBsZVZhbHVlcyxhPXRoaXMudmFsdWVTaXplLHM9dCphLGM9cy1hLGw9KG4tZSkvKHItZSksdT0xLWw7Zm9yKGxldCB0PTA7dCE9PWE7Kyt0KWlbdF09b1tjK3RdKnUrb1tzK3RdKmw7cmV0dXJuIGl9fSksRXUucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShNdS5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpFdSxpbnRlcnBvbGF0ZV86ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY29weVNhbXBsZVZhbHVlXyh0LTEpfX0pLE9iamVjdC5hc3NpZ24oQXUse3RvSlNPTjpmdW5jdGlvbih0KXtjb25zdCBlPXQuY29uc3RydWN0b3I7bGV0IG47aWYodm9pZCAwIT09ZS50b0pTT04pbj1lLnRvSlNPTih0KTtlbHNle249e25hbWU6dC5uYW1lLHRpbWVzOl91LmNvbnZlcnRBcnJheSh0LnRpbWVzLEFycmF5KSx2YWx1ZXM6X3UuY29udmVydEFycmF5KHQudmFsdWVzLEFycmF5KX07Y29uc3QgZT10LmdldEludGVycG9sYXRpb24oKTtlIT09dC5EZWZhdWx0SW50ZXJwb2xhdGlvbiYmKG4uaW50ZXJwb2xhdGlvbj1lKX1yZXR1cm4gbi50eXBlPXQuVmFsdWVUeXBlTmFtZSxufX0pLE9iamVjdC5hc3NpZ24oQXUucHJvdG90eXBlLHtjb25zdHJ1Y3RvcjpBdSxUaW1lQnVmZmVyVHlwZTpGbG9hdDMyQXJyYXksVmFsdWVCdWZmZXJUeXBlOkZsb2F0MzJBcnJheSxEZWZhdWx0SW50ZXJwb2xhdGlvbjpHZSxJbnRlcnBvbGFudEZhY3RvcnlNZXRob2REaXNjcmV0ZTpmdW5jdGlvbih0KXtyZXR1cm4gbmV3IEV1KHRoaXMudGltZXMsdGhpcy52YWx1ZXMsdGhpcy5nZXRWYWx1ZVNpemUoKSx0KX0sSW50ZXJwb2xhbnRGYWN0b3J5TWV0aG9kTGluZWFyOmZ1bmN0aW9uKHQpe3JldHVybiBuZXcgVHUodGhpcy50aW1lcyx0aGlzLnZhbHVlcyx0aGlzLmdldFZhbHVlU2l6ZSgpLHQpfSxJbnRlcnBvbGFudEZhY3RvcnlNZXRob2RTbW9vdGg6ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBTdSh0aGlzLnRpbWVzLHRoaXMudmFsdWVzLHRoaXMuZ2V0VmFsdWVTaXplKCksdCl9LHNldEludGVycG9sYXRpb246ZnVuY3Rpb24odCl7bGV0IGU7c3dpdGNoKHQpe2Nhc2UgemU6ZT10aGlzLkludGVycG9sYW50RmFjdG9yeU1ldGhvZERpc2NyZXRlO2JyZWFrO2Nhc2UgR2U6ZT10aGlzLkludGVycG9sYW50RmFjdG9yeU1ldGhvZExpbmVhcjticmVhaztjYXNlIEhlOmU9dGhpcy5JbnRlcnBvbGFudEZhY3RvcnlNZXRob2RTbW9vdGh9aWYodm9pZCAwPT09ZSl7Y29uc3QgZT1cInVuc3VwcG9ydGVkIGludGVycG9sYXRpb24gZm9yIFwiK3RoaXMuVmFsdWVUeXBlTmFtZStcIiBrZXlmcmFtZSB0cmFjayBuYW1lZCBcIit0aGlzLm5hbWU7aWYodm9pZCAwPT09dGhpcy5jcmVhdGVJbnRlcnBvbGFudCl7aWYodD09PXRoaXMuRGVmYXVsdEludGVycG9sYXRpb24pdGhyb3cgbmV3IEVycm9yKGUpO3RoaXMuc2V0SW50ZXJwb2xhdGlvbih0aGlzLkRlZmF1bHRJbnRlcnBvbGF0aW9uKX1yZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuS2V5ZnJhbWVUcmFjazpcIixlKSx0aGlzfXJldHVybiB0aGlzLmNyZWF0ZUludGVycG9sYW50PWUsdGhpc30sZ2V0SW50ZXJwb2xhdGlvbjpmdW5jdGlvbigpe3N3aXRjaCh0aGlzLmNyZWF0ZUludGVycG9sYW50KXtjYXNlIHRoaXMuSW50ZXJwb2xhbnRGYWN0b3J5TWV0aG9kRGlzY3JldGU6cmV0dXJuIHplO2Nhc2UgdGhpcy5JbnRlcnBvbGFudEZhY3RvcnlNZXRob2RMaW5lYXI6cmV0dXJuIEdlO2Nhc2UgdGhpcy5JbnRlcnBvbGFudEZhY3RvcnlNZXRob2RTbW9vdGg6cmV0dXJuIEhlfX0sZ2V0VmFsdWVTaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFsdWVzLmxlbmd0aC90aGlzLnRpbWVzLmxlbmd0aH0sc2hpZnQ6ZnVuY3Rpb24odCl7aWYoMCE9PXQpe2NvbnN0IGU9dGhpcy50aW1lcztmb3IobGV0IG49MCxyPWUubGVuZ3RoO24hPT1yOysrbillW25dKz10fXJldHVybiB0aGlzfSxzY2FsZTpmdW5jdGlvbih0KXtpZigxIT09dCl7Y29uc3QgZT10aGlzLnRpbWVzO2ZvcihsZXQgbj0wLHI9ZS5sZW5ndGg7biE9PXI7KytuKWVbbl0qPXR9cmV0dXJuIHRoaXN9LHRyaW06ZnVuY3Rpb24odCxlKXtjb25zdCBuPXRoaXMudGltZXMscj1uLmxlbmd0aDtsZXQgaT0wLG89ci0xO2Zvcig7aSE9PXImJm5baV08dDspKytpO2Zvcig7LTEhPT1vJiZuW29dPmU7KS0tbztpZigrK28sMCE9PWl8fG8hPT1yKXtpPj1vJiYobz1NYXRoLm1heChvLDEpLGk9by0xKTtjb25zdCB0PXRoaXMuZ2V0VmFsdWVTaXplKCk7dGhpcy50aW1lcz1fdS5hcnJheVNsaWNlKG4saSxvKSx0aGlzLnZhbHVlcz1fdS5hcnJheVNsaWNlKHRoaXMudmFsdWVzLGkqdCxvKnQpfXJldHVybiB0aGlzfSx2YWxpZGF0ZTpmdW5jdGlvbigpe2xldCB0PSEwO2NvbnN0IGU9dGhpcy5nZXRWYWx1ZVNpemUoKTtlLU1hdGguZmxvb3IoZSkhPTAmJihjb25zb2xlLmVycm9yKFwiVEhSRUUuS2V5ZnJhbWVUcmFjazogSW52YWxpZCB2YWx1ZSBzaXplIGluIHRyYWNrLlwiLHRoaXMpLHQ9ITEpO2NvbnN0IG49dGhpcy50aW1lcyxyPXRoaXMudmFsdWVzLGk9bi5sZW5ndGg7MD09PWkmJihjb25zb2xlLmVycm9yKFwiVEhSRUUuS2V5ZnJhbWVUcmFjazogVHJhY2sgaXMgZW1wdHkuXCIsdGhpcyksdD0hMSk7bGV0IG89bnVsbDtmb3IobGV0IGU9MDtlIT09aTtlKyspe2NvbnN0IHI9bltlXTtpZihcIm51bWJlclwiPT10eXBlb2YgciYmaXNOYU4ocikpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5LZXlmcmFtZVRyYWNrOiBUaW1lIGlzIG5vdCBhIHZhbGlkIG51bWJlci5cIix0aGlzLGUsciksdD0hMTticmVha31pZihudWxsIT09byYmbz5yKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuS2V5ZnJhbWVUcmFjazogT3V0IG9mIG9yZGVyIGtleXMuXCIsdGhpcyxlLHIsbyksdD0hMTticmVha31vPXJ9aWYodm9pZCAwIT09ciYmX3UuaXNUeXBlZEFycmF5KHIpKWZvcihsZXQgZT0wLG49ci5sZW5ndGg7ZSE9PW47KytlKXtjb25zdCBuPXJbZV07aWYoaXNOYU4obikpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5LZXlmcmFtZVRyYWNrOiBWYWx1ZSBpcyBub3QgYSB2YWxpZCBudW1iZXIuXCIsdGhpcyxlLG4pLHQ9ITE7YnJlYWt9fXJldHVybiB0fSxvcHRpbWl6ZTpmdW5jdGlvbigpe2NvbnN0IHQ9X3UuYXJyYXlTbGljZSh0aGlzLnRpbWVzKSxlPV91LmFycmF5U2xpY2UodGhpcy52YWx1ZXMpLG49dGhpcy5nZXRWYWx1ZVNpemUoKSxyPXRoaXMuZ2V0SW50ZXJwb2xhdGlvbigpPT09SGUsaT10Lmxlbmd0aC0xO2xldCBvPTE7Zm9yKGxldCBhPTE7YTxpOysrYSl7bGV0IGk9ITE7Y29uc3Qgcz10W2FdO2lmKHMhPT10W2ErMV0mJigxIT09YXx8cyE9PXNbMF0pKWlmKHIpaT0hMDtlbHNle2NvbnN0IHQ9YSpuLHI9dC1uLG89dCtuO2ZvcihsZXQgYT0wO2EhPT1uOysrYSl7Y29uc3Qgbj1lW3QrYV07aWYobiE9PWVbcithXXx8biE9PWVbbythXSl7aT0hMDticmVha319fWlmKGkpe2lmKGEhPT1vKXt0W29dPXRbYV07Y29uc3Qgcj1hKm4saT1vKm47Zm9yKGxldCB0PTA7dCE9PW47Kyt0KWVbaSt0XT1lW3IrdF19KytvfX1pZihpPjApe3Rbb109dFtpXTtmb3IobGV0IHQ9aSpuLHI9bypuLGE9MDthIT09bjsrK2EpZVtyK2FdPWVbdCthXTsrK299cmV0dXJuIG8hPT10Lmxlbmd0aD8odGhpcy50aW1lcz1fdS5hcnJheVNsaWNlKHQsMCxvKSx0aGlzLnZhbHVlcz1fdS5hcnJheVNsaWNlKGUsMCxvKm4pKToodGhpcy50aW1lcz10LHRoaXMudmFsdWVzPWUpLHRoaXN9LGNsb25lOmZ1bmN0aW9uKCl7Y29uc3QgdD1fdS5hcnJheVNsaWNlKHRoaXMudGltZXMsMCksZT1fdS5hcnJheVNsaWNlKHRoaXMudmFsdWVzLDApLG49bmV3KDAsdGhpcy5jb25zdHJ1Y3RvcikodGhpcy5uYW1lLHQsZSk7cmV0dXJuIG4uY3JlYXRlSW50ZXJwb2xhbnQ9dGhpcy5jcmVhdGVJbnRlcnBvbGFudCxufX0pLEx1LnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoQXUucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6THUsVmFsdWVUeXBlTmFtZTpcImJvb2xcIixWYWx1ZUJ1ZmZlclR5cGU6QXJyYXksRGVmYXVsdEludGVycG9sYXRpb246emUsSW50ZXJwb2xhbnRGYWN0b3J5TWV0aG9kTGluZWFyOnZvaWQgMCxJbnRlcnBvbGFudEZhY3RvcnlNZXRob2RTbW9vdGg6dm9pZCAwfSksUnUucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShBdS5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpSdSxWYWx1ZVR5cGVOYW1lOlwiY29sb3JcIn0pLFB1LnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoQXUucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6UHUsVmFsdWVUeXBlTmFtZTpcIm51bWJlclwifSksQ3UucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShNdS5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpDdSxpbnRlcnBvbGF0ZV86ZnVuY3Rpb24odCxlLG4scil7Y29uc3QgaT10aGlzLnJlc3VsdEJ1ZmZlcixvPXRoaXMuc2FtcGxlVmFsdWVzLGE9dGhpcy52YWx1ZVNpemUscz0obi1lKS8oci1lKTtsZXQgYz10KmE7Zm9yKGxldCB0PWMrYTtjIT09dDtjKz00KUpuLnNsZXJwRmxhdChpLDAsbyxjLWEsbyxjLHMpO3JldHVybiBpfX0pLEl1LnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoQXUucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6SXUsVmFsdWVUeXBlTmFtZTpcInF1YXRlcm5pb25cIixEZWZhdWx0SW50ZXJwb2xhdGlvbjpHZSxJbnRlcnBvbGFudEZhY3RvcnlNZXRob2RMaW5lYXI6ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBDdSh0aGlzLnRpbWVzLHRoaXMudmFsdWVzLHRoaXMuZ2V0VmFsdWVTaXplKCksdCl9LEludGVycG9sYW50RmFjdG9yeU1ldGhvZFNtb290aDp2b2lkIDB9KSxPdS5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKEF1LnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOk91LFZhbHVlVHlwZU5hbWU6XCJzdHJpbmdcIixWYWx1ZUJ1ZmZlclR5cGU6QXJyYXksRGVmYXVsdEludGVycG9sYXRpb246emUsSW50ZXJwb2xhbnRGYWN0b3J5TWV0aG9kTGluZWFyOnZvaWQgMCxJbnRlcnBvbGFudEZhY3RvcnlNZXRob2RTbW9vdGg6dm9pZCAwfSksTnUucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShBdS5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpOdSxWYWx1ZVR5cGVOYW1lOlwidmVjdG9yXCJ9KSxPYmplY3QuYXNzaWduKER1LHtwYXJzZTpmdW5jdGlvbih0KXtjb25zdCBlPVtdLG49dC50cmFja3Mscj0xLyh0LmZwc3x8MSk7Zm9yKGxldCB0PTAsaT1uLmxlbmd0aDt0IT09aTsrK3QpZS5wdXNoKEJ1KG5bdF0pLnNjYWxlKHIpKTtjb25zdCBpPW5ldyBEdSh0Lm5hbWUsdC5kdXJhdGlvbixlLHQuYmxlbmRNb2RlKTtyZXR1cm4gaS51dWlkPXQudXVpZCxpfSx0b0pTT046ZnVuY3Rpb24odCl7Y29uc3QgZT1bXSxuPXQudHJhY2tzLHI9e25hbWU6dC5uYW1lLGR1cmF0aW9uOnQuZHVyYXRpb24sdHJhY2tzOmUsdXVpZDp0LnV1aWQsYmxlbmRNb2RlOnQuYmxlbmRNb2RlfTtmb3IobGV0IHQ9MCxyPW4ubGVuZ3RoO3QhPT1yOysrdCllLnB1c2goQXUudG9KU09OKG5bdF0pKTtyZXR1cm4gcn0sQ3JlYXRlRnJvbU1vcnBoVGFyZ2V0U2VxdWVuY2U6ZnVuY3Rpb24odCxlLG4scil7Y29uc3QgaT1lLmxlbmd0aCxvPVtdO2ZvcihsZXQgdD0wO3Q8aTt0Kyspe2xldCBhPVtdLHM9W107YS5wdXNoKCh0K2ktMSklaSx0LCh0KzEpJWkpLHMucHVzaCgwLDEsMCk7Y29uc3QgYz1fdS5nZXRLZXlmcmFtZU9yZGVyKGEpO2E9X3Uuc29ydGVkQXJyYXkoYSwxLGMpLHM9X3Uuc29ydGVkQXJyYXkocywxLGMpLHJ8fDAhPT1hWzBdfHwoYS5wdXNoKGkpLHMucHVzaChzWzBdKSksby5wdXNoKG5ldyBQdShcIi5tb3JwaFRhcmdldEluZmx1ZW5jZXNbXCIrZVt0XS5uYW1lK1wiXVwiLGEscykuc2NhbGUoMS9uKSl9cmV0dXJuIG5ldyBEdSh0LC0xLG8pfSxmaW5kQnlOYW1lOmZ1bmN0aW9uKHQsZSl7bGV0IG49dDtpZighQXJyYXkuaXNBcnJheSh0KSl7Y29uc3QgZT10O249ZS5nZW9tZXRyeSYmZS5nZW9tZXRyeS5hbmltYXRpb25zfHxlLmFuaW1hdGlvbnN9Zm9yKGxldCB0PTA7dDxuLmxlbmd0aDt0KyspaWYoblt0XS5uYW1lPT09ZSlyZXR1cm4gblt0XTtyZXR1cm4gbnVsbH0sQ3JlYXRlQ2xpcHNGcm9tTW9ycGhUYXJnZXRTZXF1ZW5jZXM6ZnVuY3Rpb24odCxlLG4pe2NvbnN0IHI9e30saT0vXihbXFx3LV0qPykoW1xcZF0rKSQvO2ZvcihsZXQgZT0wLG49dC5sZW5ndGg7ZTxuO2UrKyl7Y29uc3Qgbj10W2VdLG89bi5uYW1lLm1hdGNoKGkpO2lmKG8mJm8ubGVuZ3RoPjEpe2NvbnN0IHQ9b1sxXTtsZXQgZT1yW3RdO2V8fChyW3RdPWU9W10pLGUucHVzaChuKX19Y29uc3Qgbz1bXTtmb3IoY29uc3QgdCBpbiByKW8ucHVzaChEdS5DcmVhdGVGcm9tTW9ycGhUYXJnZXRTZXF1ZW5jZSh0LHJbdF0sZSxuKSk7cmV0dXJuIG99LHBhcnNlQW5pbWF0aW9uOmZ1bmN0aW9uKHQsZSl7aWYoIXQpcmV0dXJuIGNvbnNvbGUuZXJyb3IoXCJUSFJFRS5BbmltYXRpb25DbGlwOiBObyBhbmltYXRpb24gaW4gSlNPTkxvYWRlciBkYXRhLlwiKSxudWxsO2NvbnN0IG49ZnVuY3Rpb24odCxlLG4scixpKXtpZigwIT09bi5sZW5ndGgpe2NvbnN0IG89W10sYT1bXTtfdS5mbGF0dGVuSlNPTihuLG8sYSxyKSwwIT09by5sZW5ndGgmJmkucHVzaChuZXcgdChlLG8sYSkpfX0scj1bXSxpPXQubmFtZXx8XCJkZWZhdWx0XCIsbz10LmZwc3x8MzAsYT10LmJsZW5kTW9kZTtsZXQgcz10Lmxlbmd0aHx8LTE7Y29uc3QgYz10LmhpZXJhcmNoeXx8W107Zm9yKGxldCB0PTA7dDxjLmxlbmd0aDt0Kyspe2NvbnN0IGk9Y1t0XS5rZXlzO2lmKGkmJjAhPT1pLmxlbmd0aClpZihpWzBdLm1vcnBoVGFyZ2V0cyl7Y29uc3QgdD17fTtsZXQgZTtmb3IoZT0wO2U8aS5sZW5ndGg7ZSsrKWlmKGlbZV0ubW9ycGhUYXJnZXRzKWZvcihsZXQgbj0wO248aVtlXS5tb3JwaFRhcmdldHMubGVuZ3RoO24rKyl0W2lbZV0ubW9ycGhUYXJnZXRzW25dXT0tMTtmb3IoY29uc3QgbiBpbiB0KXtjb25zdCB0PVtdLG89W107Zm9yKGxldCByPTA7ciE9PWlbZV0ubW9ycGhUYXJnZXRzLmxlbmd0aDsrK3Ipe2NvbnN0IHI9aVtlXTt0LnB1c2goci50aW1lKSxvLnB1c2goci5tb3JwaFRhcmdldD09PW4/MTowKX1yLnB1c2gobmV3IFB1KFwiLm1vcnBoVGFyZ2V0SW5mbHVlbmNlW1wiK24rXCJdXCIsdCxvKSl9cz10Lmxlbmd0aCoob3x8MSl9ZWxzZXtjb25zdCBvPVwiLmJvbmVzW1wiK2VbdF0ubmFtZStcIl1cIjtuKE51LG8rXCIucG9zaXRpb25cIixpLFwicG9zXCIsciksbihJdSxvK1wiLnF1YXRlcm5pb25cIixpLFwicm90XCIsciksbihOdSxvK1wiLnNjYWxlXCIsaSxcInNjbFwiLHIpfX1pZigwPT09ci5sZW5ndGgpcmV0dXJuIG51bGw7cmV0dXJuIG5ldyBEdShpLHMscixhKX19KSxPYmplY3QuYXNzaWduKER1LnByb3RvdHlwZSx7cmVzZXREdXJhdGlvbjpmdW5jdGlvbigpe2xldCB0PTA7Zm9yKGxldCBlPTAsbj10aGlzLnRyYWNrcy5sZW5ndGg7ZSE9PW47KytlKXtjb25zdCBuPXRoaXMudHJhY2tzW2VdO3Q9TWF0aC5tYXgodCxuLnRpbWVzW24udGltZXMubGVuZ3RoLTFdKX1yZXR1cm4gdGhpcy5kdXJhdGlvbj10LHRoaXN9LHRyaW06ZnVuY3Rpb24oKXtmb3IobGV0IHQ9MDt0PHRoaXMudHJhY2tzLmxlbmd0aDt0KyspdGhpcy50cmFja3NbdF0udHJpbSgwLHRoaXMuZHVyYXRpb24pO3JldHVybiB0aGlzfSx2YWxpZGF0ZTpmdW5jdGlvbigpe2xldCB0PSEwO2ZvcihsZXQgZT0wO2U8dGhpcy50cmFja3MubGVuZ3RoO2UrKyl0PXQmJnRoaXMudHJhY2tzW2VdLnZhbGlkYXRlKCk7cmV0dXJuIHR9LG9wdGltaXplOmZ1bmN0aW9uKCl7Zm9yKGxldCB0PTA7dDx0aGlzLnRyYWNrcy5sZW5ndGg7dCsrKXRoaXMudHJhY2tzW3RdLm9wdGltaXplKCk7cmV0dXJuIHRoaXN9LGNsb25lOmZ1bmN0aW9uKCl7Y29uc3QgdD1bXTtmb3IobGV0IGU9MDtlPHRoaXMudHJhY2tzLmxlbmd0aDtlKyspdC5wdXNoKHRoaXMudHJhY2tzW2VdLmNsb25lKCkpO3JldHVybiBuZXcgRHUodGhpcy5uYW1lLHRoaXMuZHVyYXRpb24sdCx0aGlzLmJsZW5kTW9kZSl9LHRvSlNPTjpmdW5jdGlvbigpe3JldHVybiBEdS50b0pTT04odGhpcyl9fSk7Y29uc3QgRnU9e2VuYWJsZWQ6ITEsZmlsZXM6e30sYWRkOmZ1bmN0aW9uKHQsZSl7ITEhPT10aGlzLmVuYWJsZWQmJih0aGlzLmZpbGVzW3RdPWUpfSxnZXQ6ZnVuY3Rpb24odCl7aWYoITEhPT10aGlzLmVuYWJsZWQpcmV0dXJuIHRoaXMuZmlsZXNbdF19LHJlbW92ZTpmdW5jdGlvbih0KXtkZWxldGUgdGhpcy5maWxlc1t0XX0sY2xlYXI6ZnVuY3Rpb24oKXt0aGlzLmZpbGVzPXt9fX07ZnVuY3Rpb24gVXUodCxlLG4pe2NvbnN0IHI9dGhpcztsZXQgaT0hMSxvPTAsYT0wLHM9dm9pZCAwO2NvbnN0IGM9W107dGhpcy5vblN0YXJ0PXZvaWQgMCx0aGlzLm9uTG9hZD10LHRoaXMub25Qcm9ncmVzcz1lLHRoaXMub25FcnJvcj1uLHRoaXMuaXRlbVN0YXJ0PWZ1bmN0aW9uKHQpe2ErKywhMT09PWkmJnZvaWQgMCE9PXIub25TdGFydCYmci5vblN0YXJ0KHQsbyxhKSxpPSEwfSx0aGlzLml0ZW1FbmQ9ZnVuY3Rpb24odCl7bysrLHZvaWQgMCE9PXIub25Qcm9ncmVzcyYmci5vblByb2dyZXNzKHQsbyxhKSxvPT09YSYmKGk9ITEsdm9pZCAwIT09ci5vbkxvYWQmJnIub25Mb2FkKCkpfSx0aGlzLml0ZW1FcnJvcj1mdW5jdGlvbih0KXt2b2lkIDAhPT1yLm9uRXJyb3ImJnIub25FcnJvcih0KX0sdGhpcy5yZXNvbHZlVVJMPWZ1bmN0aW9uKHQpe3JldHVybiBzP3ModCk6dH0sdGhpcy5zZXRVUkxNb2RpZmllcj1mdW5jdGlvbih0KXtyZXR1cm4gcz10LHRoaXN9LHRoaXMuYWRkSGFuZGxlcj1mdW5jdGlvbih0LGUpe3JldHVybiBjLnB1c2godCxlKSx0aGlzfSx0aGlzLnJlbW92ZUhhbmRsZXI9ZnVuY3Rpb24odCl7Y29uc3QgZT1jLmluZGV4T2YodCk7cmV0dXJuLTEhPT1lJiZjLnNwbGljZShlLDIpLHRoaXN9LHRoaXMuZ2V0SGFuZGxlcj1mdW5jdGlvbih0KXtmb3IobGV0IGU9MCxuPWMubGVuZ3RoO2U8bjtlKz0yKXtjb25zdCBuPWNbZV0scj1jW2UrMV07aWYobi5nbG9iYWwmJihuLmxhc3RJbmRleD0wKSxuLnRlc3QodCkpcmV0dXJuIHJ9cmV0dXJuIG51bGx9fWNvbnN0IHp1PW5ldyBVdTtmdW5jdGlvbiBHdSh0KXt0aGlzLm1hbmFnZXI9dm9pZCAwIT09dD90Onp1LHRoaXMuY3Jvc3NPcmlnaW49XCJhbm9ueW1vdXNcIix0aGlzLndpdGhDcmVkZW50aWFscz0hMSx0aGlzLnBhdGg9XCJcIix0aGlzLnJlc291cmNlUGF0aD1cIlwiLHRoaXMucmVxdWVzdEhlYWRlcj17fX1PYmplY3QuYXNzaWduKEd1LnByb3RvdHlwZSx7bG9hZDpmdW5jdGlvbigpe30sbG9hZEFzeW5jOmZ1bmN0aW9uKHQsZSl7Y29uc3Qgbj10aGlzO3JldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24ocixpKXtuLmxvYWQodCxyLGUsaSl9KSl9LHBhcnNlOmZ1bmN0aW9uKCl7fSxzZXRDcm9zc09yaWdpbjpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jcm9zc09yaWdpbj10LHRoaXN9LHNldFdpdGhDcmVkZW50aWFsczpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy53aXRoQ3JlZGVudGlhbHM9dCx0aGlzfSxzZXRQYXRoOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnBhdGg9dCx0aGlzfSxzZXRSZXNvdXJjZVBhdGg6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucmVzb3VyY2VQYXRoPXQsdGhpc30sc2V0UmVxdWVzdEhlYWRlcjpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5yZXF1ZXN0SGVhZGVyPXQsdGhpc319KTtjb25zdCBIdT17fTtmdW5jdGlvbiBrdSh0KXtHdS5jYWxsKHRoaXMsdCl9ZnVuY3Rpb24gVnUodCl7R3UuY2FsbCh0aGlzLHQpfWZ1bmN0aW9uIGp1KHQpe0d1LmNhbGwodGhpcyx0KX1mdW5jdGlvbiBXdSh0KXtHdS5jYWxsKHRoaXMsdCl9ZnVuY3Rpb24gWHUodCl7R3UuY2FsbCh0aGlzLHQpfWZ1bmN0aW9uIHF1KHQpe0d1LmNhbGwodGhpcyx0KX1mdW5jdGlvbiBZdSh0KXtHdS5jYWxsKHRoaXMsdCl9ZnVuY3Rpb24gWnUoKXt0aGlzLnR5cGU9XCJDdXJ2ZVwiLHRoaXMuYXJjTGVuZ3RoRGl2aXNpb25zPTIwMH1mdW5jdGlvbiBKdSh0LGUsbixyLGksbyxhLHMpe1p1LmNhbGwodGhpcyksdGhpcy50eXBlPVwiRWxsaXBzZUN1cnZlXCIsdGhpcy5hWD10fHwwLHRoaXMuYVk9ZXx8MCx0aGlzLnhSYWRpdXM9bnx8MSx0aGlzLnlSYWRpdXM9cnx8MSx0aGlzLmFTdGFydEFuZ2xlPWl8fDAsdGhpcy5hRW5kQW5nbGU9b3x8MipNYXRoLlBJLHRoaXMuYUNsb2Nrd2lzZT1hfHwhMSx0aGlzLmFSb3RhdGlvbj1zfHwwfWZ1bmN0aW9uIEt1KHQsZSxuLHIsaSxvKXtKdS5jYWxsKHRoaXMsdCxlLG4sbixyLGksbyksdGhpcy50eXBlPVwiQXJjQ3VydmVcIn1mdW5jdGlvbiBRdSgpe2xldCB0PTAsZT0wLG49MCxyPTA7ZnVuY3Rpb24gaShpLG8sYSxzKXt0PWksZT1hLG49LTMqaSszKm8tMiphLXMscj0yKmktMipvK2Erc31yZXR1cm57aW5pdENhdG11bGxSb206ZnVuY3Rpb24odCxlLG4scixvKXtpKGUsbixvKihuLXQpLG8qKHItZSkpfSxpbml0Tm9udW5pZm9ybUNhdG11bGxSb206ZnVuY3Rpb24odCxlLG4scixvLGEscyl7bGV0IGM9KGUtdCkvby0obi10KS8obythKSsobi1lKS9hLGw9KG4tZSkvYS0oci1lKS8oYStzKSsoci1uKS9zO2MqPWEsbCo9YSxpKGUsbixjLGwpfSxjYWxjOmZ1bmN0aW9uKGkpe2NvbnN0IG89aSppO3JldHVybiB0K2UqaStuKm8rcioobyppKX19fWt1LnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoR3UucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6a3UsbG9hZDpmdW5jdGlvbih0LGUsbixyKXt2b2lkIDA9PT10JiYodD1cIlwiKSx2b2lkIDAhPT10aGlzLnBhdGgmJih0PXRoaXMucGF0aCt0KSx0PXRoaXMubWFuYWdlci5yZXNvbHZlVVJMKHQpO2NvbnN0IGk9dGhpcyxvPUZ1LmdldCh0KTtpZih2b2lkIDAhPT1vKXJldHVybiBpLm1hbmFnZXIuaXRlbVN0YXJ0KHQpLHNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7ZSYmZShvKSxpLm1hbmFnZXIuaXRlbUVuZCh0KX0pLDApLG87aWYodm9pZCAwIT09SHVbdF0pcmV0dXJuIHZvaWQgSHVbdF0ucHVzaCh7b25Mb2FkOmUsb25Qcm9ncmVzczpuLG9uRXJyb3I6cn0pO2NvbnN0IGE9dC5tYXRjaCgvXmRhdGE6KC4qPykoO2Jhc2U2NCk/LCguKikkLyk7bGV0IHM7aWYoYSl7Y29uc3Qgbj1hWzFdLG89ISFhWzJdO2xldCBzPWFbM107cz1kZWNvZGVVUklDb21wb25lbnQocyksbyYmKHM9YXRvYihzKSk7dHJ5e2xldCByO2NvbnN0IG89KHRoaXMucmVzcG9uc2VUeXBlfHxcIlwiKS50b0xvd2VyQ2FzZSgpO3N3aXRjaChvKXtjYXNlXCJhcnJheWJ1ZmZlclwiOmNhc2VcImJsb2JcIjpjb25zdCB0PW5ldyBVaW50OEFycmF5KHMubGVuZ3RoKTtmb3IobGV0IGU9MDtlPHMubGVuZ3RoO2UrKyl0W2VdPXMuY2hhckNvZGVBdChlKTtyPVwiYmxvYlwiPT09bz9uZXcgQmxvYihbdC5idWZmZXJdLHt0eXBlOm59KTp0LmJ1ZmZlcjticmVhaztjYXNlXCJkb2N1bWVudFwiOmNvbnN0IGU9bmV3IERPTVBhcnNlcjtyPWUucGFyc2VGcm9tU3RyaW5nKHMsbik7YnJlYWs7Y2FzZVwianNvblwiOnI9SlNPTi5wYXJzZShzKTticmVhaztkZWZhdWx0OnI9c31zZXRUaW1lb3V0KChmdW5jdGlvbigpe2UmJmUociksaS5tYW5hZ2VyLml0ZW1FbmQodCl9KSwwKX1jYXRjaChlKXtzZXRUaW1lb3V0KChmdW5jdGlvbigpe3ImJnIoZSksaS5tYW5hZ2VyLml0ZW1FcnJvcih0KSxpLm1hbmFnZXIuaXRlbUVuZCh0KX0pLDApfX1lbHNle0h1W3RdPVtdLEh1W3RdLnB1c2goe29uTG9hZDplLG9uUHJvZ3Jlc3M6bixvbkVycm9yOnJ9KSxzPW5ldyBYTUxIdHRwUmVxdWVzdCxzLm9wZW4oXCJHRVRcIix0LCEwKSxzLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsKGZ1bmN0aW9uKGUpe2NvbnN0IG49dGhpcy5yZXNwb25zZSxyPUh1W3RdO2lmKGRlbGV0ZSBIdVt0XSwyMDA9PT10aGlzLnN0YXR1c3x8MD09PXRoaXMuc3RhdHVzKXswPT09dGhpcy5zdGF0dXMmJmNvbnNvbGUud2FybihcIlRIUkVFLkZpbGVMb2FkZXI6IEhUVFAgU3RhdHVzIDAgcmVjZWl2ZWQuXCIpLEZ1LmFkZCh0LG4pO2ZvcihsZXQgdD0wLGU9ci5sZW5ndGg7dDxlO3QrKyl7Y29uc3QgZT1yW3RdO2Uub25Mb2FkJiZlLm9uTG9hZChuKX1pLm1hbmFnZXIuaXRlbUVuZCh0KX1lbHNle2ZvcihsZXQgdD0wLG49ci5sZW5ndGg7dDxuO3QrKyl7Y29uc3Qgbj1yW3RdO24ub25FcnJvciYmbi5vbkVycm9yKGUpfWkubWFuYWdlci5pdGVtRXJyb3IodCksaS5tYW5hZ2VyLml0ZW1FbmQodCl9fSksITEpLHMuYWRkRXZlbnRMaXN0ZW5lcihcInByb2dyZXNzXCIsKGZ1bmN0aW9uKGUpe2NvbnN0IG49SHVbdF07Zm9yKGxldCB0PTAscj1uLmxlbmd0aDt0PHI7dCsrKXtjb25zdCByPW5bdF07ci5vblByb2dyZXNzJiZyLm9uUHJvZ3Jlc3MoZSl9fSksITEpLHMuYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsKGZ1bmN0aW9uKGUpe2NvbnN0IG49SHVbdF07ZGVsZXRlIEh1W3RdO2ZvcihsZXQgdD0wLHI9bi5sZW5ndGg7dDxyO3QrKyl7Y29uc3Qgcj1uW3RdO3Iub25FcnJvciYmci5vbkVycm9yKGUpfWkubWFuYWdlci5pdGVtRXJyb3IodCksaS5tYW5hZ2VyLml0ZW1FbmQodCl9KSwhMSkscy5hZGRFdmVudExpc3RlbmVyKFwiYWJvcnRcIiwoZnVuY3Rpb24oZSl7Y29uc3Qgbj1IdVt0XTtkZWxldGUgSHVbdF07Zm9yKGxldCB0PTAscj1uLmxlbmd0aDt0PHI7dCsrKXtjb25zdCByPW5bdF07ci5vbkVycm9yJiZyLm9uRXJyb3IoZSl9aS5tYW5hZ2VyLml0ZW1FcnJvcih0KSxpLm1hbmFnZXIuaXRlbUVuZCh0KX0pLCExKSx2b2lkIDAhPT10aGlzLnJlc3BvbnNlVHlwZSYmKHMucmVzcG9uc2VUeXBlPXRoaXMucmVzcG9uc2VUeXBlKSx2b2lkIDAhPT10aGlzLndpdGhDcmVkZW50aWFscyYmKHMud2l0aENyZWRlbnRpYWxzPXRoaXMud2l0aENyZWRlbnRpYWxzKSxzLm92ZXJyaWRlTWltZVR5cGUmJnMub3ZlcnJpZGVNaW1lVHlwZSh2b2lkIDAhPT10aGlzLm1pbWVUeXBlP3RoaXMubWltZVR5cGU6XCJ0ZXh0L3BsYWluXCIpO2Zvcihjb25zdCB0IGluIHRoaXMucmVxdWVzdEhlYWRlcilzLnNldFJlcXVlc3RIZWFkZXIodCx0aGlzLnJlcXVlc3RIZWFkZXJbdF0pO3Muc2VuZChudWxsKX1yZXR1cm4gaS5tYW5hZ2VyLml0ZW1TdGFydCh0KSxzfSxzZXRSZXNwb25zZVR5cGU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucmVzcG9uc2VUeXBlPXQsdGhpc30sc2V0TWltZVR5cGU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMubWltZVR5cGU9dCx0aGlzfX0pLFZ1LnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoR3UucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6VnUsbG9hZDpmdW5jdGlvbih0LGUsbixyKXtjb25zdCBpPXRoaXMsbz1uZXcga3UoaS5tYW5hZ2VyKTtvLnNldFBhdGgoaS5wYXRoKSxvLnNldFJlcXVlc3RIZWFkZXIoaS5yZXF1ZXN0SGVhZGVyKSxvLnNldFdpdGhDcmVkZW50aWFscyhpLndpdGhDcmVkZW50aWFscyksby5sb2FkKHQsKGZ1bmN0aW9uKG4pe3RyeXtlKGkucGFyc2UoSlNPTi5wYXJzZShuKSkpfWNhdGNoKGUpe3I/cihlKTpjb25zb2xlLmVycm9yKGUpLGkubWFuYWdlci5pdGVtRXJyb3IodCl9fSksbixyKX0scGFyc2U6ZnVuY3Rpb24odCl7Y29uc3QgZT1bXTtmb3IobGV0IG49MDtuPHQubGVuZ3RoO24rKyl7Y29uc3Qgcj1EdS5wYXJzZSh0W25dKTtlLnB1c2gocil9cmV0dXJuIGV9fSksanUucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShHdS5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpqdSxsb2FkOmZ1bmN0aW9uKHQsZSxuLHIpe2NvbnN0IGk9dGhpcyxvPVtdLGE9bmV3IEZjO2EuaW1hZ2U9bztjb25zdCBzPW5ldyBrdSh0aGlzLm1hbmFnZXIpO3Muc2V0UGF0aCh0aGlzLnBhdGgpLHMuc2V0UmVzcG9uc2VUeXBlKFwiYXJyYXlidWZmZXJcIikscy5zZXRSZXF1ZXN0SGVhZGVyKHRoaXMucmVxdWVzdEhlYWRlcikscy5zZXRXaXRoQ3JlZGVudGlhbHMoaS53aXRoQ3JlZGVudGlhbHMpO2xldCBjPTA7ZnVuY3Rpb24gbChsKXtzLmxvYWQodFtsXSwoZnVuY3Rpb24odCl7Y29uc3Qgbj1pLnBhcnNlKHQsITApO29bbF09e3dpZHRoOm4ud2lkdGgsaGVpZ2h0Om4uaGVpZ2h0LGZvcm1hdDpuLmZvcm1hdCxtaXBtYXBzOm4ubWlwbWFwc30sYys9MSw2PT09YyYmKDE9PT1uLm1pcG1hcENvdW50JiYoYS5taW5GaWx0ZXI9eHQpLGEuZm9ybWF0PW4uZm9ybWF0LGEubmVlZHNVcGRhdGU9ITAsZSYmZShhKSl9KSxuLHIpfWlmKEFycmF5LmlzQXJyYXkodCkpZm9yKGxldCBlPTAsbj10Lmxlbmd0aDtlPG47KytlKWwoZSk7ZWxzZSBzLmxvYWQodCwoZnVuY3Rpb24odCl7Y29uc3Qgbj1pLnBhcnNlKHQsITApO2lmKG4uaXNDdWJlbWFwKXtjb25zdCB0PW4ubWlwbWFwcy5sZW5ndGgvbi5taXBtYXBDb3VudDtmb3IobGV0IGU9MDtlPHQ7ZSsrKXtvW2VdPXttaXBtYXBzOltdfTtmb3IobGV0IHQ9MDt0PG4ubWlwbWFwQ291bnQ7dCsrKW9bZV0ubWlwbWFwcy5wdXNoKG4ubWlwbWFwc1tlKm4ubWlwbWFwQ291bnQrdF0pLG9bZV0uZm9ybWF0PW4uZm9ybWF0LG9bZV0ud2lkdGg9bi53aWR0aCxvW2VdLmhlaWdodD1uLmhlaWdodH19ZWxzZSBhLmltYWdlLndpZHRoPW4ud2lkdGgsYS5pbWFnZS5oZWlnaHQ9bi5oZWlnaHQsYS5taXBtYXBzPW4ubWlwbWFwczsxPT09bi5taXBtYXBDb3VudCYmKGEubWluRmlsdGVyPXh0KSxhLmZvcm1hdD1uLmZvcm1hdCxhLm5lZWRzVXBkYXRlPSEwLGUmJmUoYSl9KSxuLHIpO3JldHVybiBhfX0pLFd1LnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoR3UucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6V3UsbG9hZDpmdW5jdGlvbih0LGUsbixyKXt2b2lkIDAhPT10aGlzLnBhdGgmJih0PXRoaXMucGF0aCt0KSx0PXRoaXMubWFuYWdlci5yZXNvbHZlVVJMKHQpO2NvbnN0IGk9dGhpcyxvPUZ1LmdldCh0KTtpZih2b2lkIDAhPT1vKXJldHVybiBpLm1hbmFnZXIuaXRlbVN0YXJ0KHQpLHNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7ZSYmZShvKSxpLm1hbmFnZXIuaXRlbUVuZCh0KX0pLDApLG87Y29uc3QgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sXCIsXCJpbWdcIik7ZnVuY3Rpb24gcygpe2EucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImxvYWRcIixzLCExKSxhLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLGMsITEpLEZ1LmFkZCh0LHRoaXMpLGUmJmUodGhpcyksaS5tYW5hZ2VyLml0ZW1FbmQodCl9ZnVuY3Rpb24gYyhlKXthLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJsb2FkXCIscywhMSksYS5yZW1vdmVFdmVudExpc3RlbmVyKFwiZXJyb3JcIixjLCExKSxyJiZyKGUpLGkubWFuYWdlci5pdGVtRXJyb3IodCksaS5tYW5hZ2VyLml0ZW1FbmQodCl9cmV0dXJuIGEuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIixzLCExKSxhLmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLGMsITEpLFwiZGF0YTpcIiE9PXQuc3Vic3RyKDAsNSkmJnZvaWQgMCE9PXRoaXMuY3Jvc3NPcmlnaW4mJihhLmNyb3NzT3JpZ2luPXRoaXMuY3Jvc3NPcmlnaW4pLGkubWFuYWdlci5pdGVtU3RhcnQodCksYS5zcmM9dCxhfX0pLFh1LnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoR3UucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6WHUsbG9hZDpmdW5jdGlvbih0LGUsbixyKXtjb25zdCBpPW5ldyBNbyxvPW5ldyBXdSh0aGlzLm1hbmFnZXIpO28uc2V0Q3Jvc3NPcmlnaW4odGhpcy5jcm9zc09yaWdpbiksby5zZXRQYXRoKHRoaXMucGF0aCk7bGV0IGE9MDtmdW5jdGlvbiBzKG4pe28ubG9hZCh0W25dLChmdW5jdGlvbih0KXtpLmltYWdlc1tuXT10LGErKyw2PT09YSYmKGkubmVlZHNVcGRhdGU9ITAsZSYmZShpKSl9KSx2b2lkIDAscil9Zm9yKGxldCBlPTA7ZTx0Lmxlbmd0aDsrK2UpcyhlKTtyZXR1cm4gaX19KSxxdS5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKEd1LnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOnF1LGxvYWQ6ZnVuY3Rpb24odCxlLG4scil7Y29uc3QgaT10aGlzLG89bmV3IFRvLGE9bmV3IGt1KHRoaXMubWFuYWdlcik7cmV0dXJuIGEuc2V0UmVzcG9uc2VUeXBlKFwiYXJyYXlidWZmZXJcIiksYS5zZXRSZXF1ZXN0SGVhZGVyKHRoaXMucmVxdWVzdEhlYWRlciksYS5zZXRQYXRoKHRoaXMucGF0aCksYS5zZXRXaXRoQ3JlZGVudGlhbHMoaS53aXRoQ3JlZGVudGlhbHMpLGEubG9hZCh0LChmdW5jdGlvbih0KXtjb25zdCBuPWkucGFyc2UodCk7biYmKHZvaWQgMCE9PW4uaW1hZ2U/by5pbWFnZT1uLmltYWdlOnZvaWQgMCE9PW4uZGF0YSYmKG8uaW1hZ2Uud2lkdGg9bi53aWR0aCxvLmltYWdlLmhlaWdodD1uLmhlaWdodCxvLmltYWdlLmRhdGE9bi5kYXRhKSxvLndyYXBTPXZvaWQgMCE9PW4ud3JhcFM/bi53cmFwUzpkdCxvLndyYXBUPXZvaWQgMCE9PW4ud3JhcFQ/bi53cmFwVDpkdCxvLm1hZ0ZpbHRlcj12b2lkIDAhPT1uLm1hZ0ZpbHRlcj9uLm1hZ0ZpbHRlcjp4dCxvLm1pbkZpbHRlcj12b2lkIDAhPT1uLm1pbkZpbHRlcj9uLm1pbkZpbHRlcjp4dCxvLmFuaXNvdHJvcHk9dm9pZCAwIT09bi5hbmlzb3Ryb3B5P24uYW5pc290cm9weToxLHZvaWQgMCE9PW4uZm9ybWF0JiYoby5mb3JtYXQ9bi5mb3JtYXQpLHZvaWQgMCE9PW4udHlwZSYmKG8udHlwZT1uLnR5cGUpLHZvaWQgMCE9PW4ubWlwbWFwcyYmKG8ubWlwbWFwcz1uLm1pcG1hcHMsby5taW5GaWx0ZXI9X3QpLDE9PT1uLm1pcG1hcENvdW50JiYoby5taW5GaWx0ZXI9eHQpLG8ubmVlZHNVcGRhdGU9ITAsZSYmZShvLG4pKX0pLG4sciksb319KSxZdS5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKEd1LnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOll1LGxvYWQ6ZnVuY3Rpb24odCxlLG4scil7Y29uc3QgaT1uZXcgV24sbz1uZXcgV3UodGhpcy5tYW5hZ2VyKTtyZXR1cm4gby5zZXRDcm9zc09yaWdpbih0aGlzLmNyb3NzT3JpZ2luKSxvLnNldFBhdGgodGhpcy5wYXRoKSxvLmxvYWQodCwoZnVuY3Rpb24obil7aS5pbWFnZT1uO2NvbnN0IHI9dC5zZWFyY2goL1xcLmpwZT9nKCR8XFw/KS9pKT4wfHwwPT09dC5zZWFyY2goL15kYXRhXFw6aW1hZ2VcXC9qcGVnLyk7aS5mb3JtYXQ9cj9GdDpVdCxpLm5lZWRzVXBkYXRlPSEwLHZvaWQgMCE9PWUmJmUoaSl9KSxuLHIpLGl9fSksT2JqZWN0LmFzc2lnbihadS5wcm90b3R5cGUse2dldFBvaW50OmZ1bmN0aW9uKCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLkN1cnZlOiAuZ2V0UG9pbnQoKSBub3QgaW1wbGVtZW50ZWQuXCIpLG51bGx9LGdldFBvaW50QXQ6ZnVuY3Rpb24odCxlKXtjb25zdCBuPXRoaXMuZ2V0VXRvVG1hcHBpbmcodCk7cmV0dXJuIHRoaXMuZ2V0UG9pbnQobixlKX0sZ2V0UG9pbnRzOmZ1bmN0aW9uKHQ9NSl7Y29uc3QgZT1bXTtmb3IobGV0IG49MDtuPD10O24rKyllLnB1c2godGhpcy5nZXRQb2ludChuL3QpKTtyZXR1cm4gZX0sZ2V0U3BhY2VkUG9pbnRzOmZ1bmN0aW9uKHQ9NSl7Y29uc3QgZT1bXTtmb3IobGV0IG49MDtuPD10O24rKyllLnB1c2godGhpcy5nZXRQb2ludEF0KG4vdCkpO3JldHVybiBlfSxnZXRMZW5ndGg6ZnVuY3Rpb24oKXtjb25zdCB0PXRoaXMuZ2V0TGVuZ3RocygpO3JldHVybiB0W3QubGVuZ3RoLTFdfSxnZXRMZW5ndGhzOmZ1bmN0aW9uKHQpe2lmKHZvaWQgMD09PXQmJih0PXRoaXMuYXJjTGVuZ3RoRGl2aXNpb25zKSx0aGlzLmNhY2hlQXJjTGVuZ3RocyYmdGhpcy5jYWNoZUFyY0xlbmd0aHMubGVuZ3RoPT09dCsxJiYhdGhpcy5uZWVkc1VwZGF0ZSlyZXR1cm4gdGhpcy5jYWNoZUFyY0xlbmd0aHM7dGhpcy5uZWVkc1VwZGF0ZT0hMTtjb25zdCBlPVtdO2xldCBuLHI9dGhpcy5nZXRQb2ludCgwKSxpPTA7ZS5wdXNoKDApO2ZvcihsZXQgbz0xO288PXQ7bysrKW49dGhpcy5nZXRQb2ludChvL3QpLGkrPW4uZGlzdGFuY2VUbyhyKSxlLnB1c2goaSkscj1uO3JldHVybiB0aGlzLmNhY2hlQXJjTGVuZ3Rocz1lLGV9LHVwZGF0ZUFyY0xlbmd0aHM6ZnVuY3Rpb24oKXt0aGlzLm5lZWRzVXBkYXRlPSEwLHRoaXMuZ2V0TGVuZ3RocygpfSxnZXRVdG9UbWFwcGluZzpmdW5jdGlvbih0LGUpe2NvbnN0IG49dGhpcy5nZXRMZW5ndGhzKCk7bGV0IHI9MDtjb25zdCBpPW4ubGVuZ3RoO2xldCBvO289ZXx8dCpuW2ktMV07bGV0IGEscz0wLGM9aS0xO2Zvcig7czw9YzspaWYocj1NYXRoLmZsb29yKHMrKGMtcykvMiksYT1uW3JdLW8sYTwwKXM9cisxO2Vsc2V7aWYoIShhPjApKXtjPXI7YnJlYWt9Yz1yLTF9aWYocj1jLG5bcl09PT1vKXJldHVybiByLyhpLTEpO2NvbnN0IGw9bltyXTtyZXR1cm4ocisoby1sKS8obltyKzFdLWwpKS8oaS0xKX0sZ2V0VGFuZ2VudDpmdW5jdGlvbih0LGUpe2xldCBuPXQtMWUtNCxyPXQrMWUtNDtuPDAmJihuPTApLHI+MSYmKHI9MSk7Y29uc3QgaT10aGlzLmdldFBvaW50KG4pLG89dGhpcy5nZXRQb2ludChyKSxhPWV8fChpLmlzVmVjdG9yMj9uZXcgR246bmV3IEtuKTtyZXR1cm4gYS5jb3B5KG8pLnN1YihpKS5ub3JtYWxpemUoKSxhfSxnZXRUYW5nZW50QXQ6ZnVuY3Rpb24odCxlKXtjb25zdCBuPXRoaXMuZ2V0VXRvVG1hcHBpbmcodCk7cmV0dXJuIHRoaXMuZ2V0VGFuZ2VudChuLGUpfSxjb21wdXRlRnJlbmV0RnJhbWVzOmZ1bmN0aW9uKHQsZSl7Y29uc3Qgbj1uZXcgS24scj1bXSxpPVtdLG89W10sYT1uZXcgS24scz1uZXcgVHI7Zm9yKGxldCBlPTA7ZTw9dDtlKyspe2NvbnN0IG49ZS90O3JbZV09dGhpcy5nZXRUYW5nZW50QXQobixuZXcgS24pLHJbZV0ubm9ybWFsaXplKCl9aVswXT1uZXcgS24sb1swXT1uZXcgS247bGV0IGM9TnVtYmVyLk1BWF9WQUxVRTtjb25zdCBsPU1hdGguYWJzKHJbMF0ueCksdT1NYXRoLmFicyhyWzBdLnkpLGg9TWF0aC5hYnMoclswXS56KTtsPD1jJiYoYz1sLG4uc2V0KDEsMCwwKSksdTw9YyYmKGM9dSxuLnNldCgwLDEsMCkpLGg8PWMmJm4uc2V0KDAsMCwxKSxhLmNyb3NzVmVjdG9ycyhyWzBdLG4pLm5vcm1hbGl6ZSgpLGlbMF0uY3Jvc3NWZWN0b3JzKHJbMF0sYSksb1swXS5jcm9zc1ZlY3RvcnMoclswXSxpWzBdKTtmb3IobGV0IGU9MTtlPD10O2UrKyl7aWYoaVtlXT1pW2UtMV0uY2xvbmUoKSxvW2VdPW9bZS0xXS5jbG9uZSgpLGEuY3Jvc3NWZWN0b3JzKHJbZS0xXSxyW2VdKSxhLmxlbmd0aCgpPk51bWJlci5FUFNJTE9OKXthLm5vcm1hbGl6ZSgpO2NvbnN0IHQ9TWF0aC5hY29zKHpuLmNsYW1wKHJbZS0xXS5kb3QocltlXSksLTEsMSkpO2lbZV0uYXBwbHlNYXRyaXg0KHMubWFrZVJvdGF0aW9uQXhpcyhhLHQpKX1vW2VdLmNyb3NzVmVjdG9ycyhyW2VdLGlbZV0pfWlmKCEwPT09ZSl7bGV0IGU9TWF0aC5hY29zKHpuLmNsYW1wKGlbMF0uZG90KGlbdF0pLC0xLDEpKTtlLz10LHJbMF0uZG90KGEuY3Jvc3NWZWN0b3JzKGlbMF0saVt0XSkpPjAmJihlPS1lKTtmb3IobGV0IG49MTtuPD10O24rKylpW25dLmFwcGx5TWF0cml4NChzLm1ha2VSb3RhdGlvbkF4aXMocltuXSxlKm4pKSxvW25dLmNyb3NzVmVjdG9ycyhyW25dLGlbbl0pfXJldHVybnt0YW5nZW50czpyLG5vcm1hbHM6aSxiaW5vcm1hbHM6b319LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKS5jb3B5KHRoaXMpfSxjb3B5OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmFyY0xlbmd0aERpdmlzaW9ucz10LmFyY0xlbmd0aERpdmlzaW9ucyx0aGlzfSx0b0pTT046ZnVuY3Rpb24oKXtjb25zdCB0PXttZXRhZGF0YTp7dmVyc2lvbjo0LjUsdHlwZTpcIkN1cnZlXCIsZ2VuZXJhdG9yOlwiQ3VydmUudG9KU09OXCJ9fTtyZXR1cm4gdC5hcmNMZW5ndGhEaXZpc2lvbnM9dGhpcy5hcmNMZW5ndGhEaXZpc2lvbnMsdC50eXBlPXRoaXMudHlwZSx0fSxmcm9tSlNPTjpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5hcmNMZW5ndGhEaXZpc2lvbnM9dC5hcmNMZW5ndGhEaXZpc2lvbnMsdGhpc319KSxKdS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShadS5wcm90b3R5cGUpLEp1LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1KdSxKdS5wcm90b3R5cGUuaXNFbGxpcHNlQ3VydmU9ITAsSnUucHJvdG90eXBlLmdldFBvaW50PWZ1bmN0aW9uKHQsZSl7Y29uc3Qgbj1lfHxuZXcgR24scj0yKk1hdGguUEk7bGV0IGk9dGhpcy5hRW5kQW5nbGUtdGhpcy5hU3RhcnRBbmdsZTtjb25zdCBvPU1hdGguYWJzKGkpPE51bWJlci5FUFNJTE9OO2Zvcig7aTwwOylpKz1yO2Zvcig7aT5yOylpLT1yO2k8TnVtYmVyLkVQU0lMT04mJihpPW8/MDpyKSwhMCE9PXRoaXMuYUNsb2Nrd2lzZXx8b3x8KGk9PT1yP2k9LXI6aS09cik7Y29uc3QgYT10aGlzLmFTdGFydEFuZ2xlK3QqaTtsZXQgcz10aGlzLmFYK3RoaXMueFJhZGl1cypNYXRoLmNvcyhhKSxjPXRoaXMuYVkrdGhpcy55UmFkaXVzKk1hdGguc2luKGEpO2lmKDAhPT10aGlzLmFSb3RhdGlvbil7Y29uc3QgdD1NYXRoLmNvcyh0aGlzLmFSb3RhdGlvbiksZT1NYXRoLnNpbih0aGlzLmFSb3RhdGlvbiksbj1zLXRoaXMuYVgscj1jLXRoaXMuYVk7cz1uKnQtciplK3RoaXMuYVgsYz1uKmUrcip0K3RoaXMuYVl9cmV0dXJuIG4uc2V0KHMsYyl9LEp1LnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKHQpe3JldHVybiBadS5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsdCksdGhpcy5hWD10LmFYLHRoaXMuYVk9dC5hWSx0aGlzLnhSYWRpdXM9dC54UmFkaXVzLHRoaXMueVJhZGl1cz10LnlSYWRpdXMsdGhpcy5hU3RhcnRBbmdsZT10LmFTdGFydEFuZ2xlLHRoaXMuYUVuZEFuZ2xlPXQuYUVuZEFuZ2xlLHRoaXMuYUNsb2Nrd2lzZT10LmFDbG9ja3dpc2UsdGhpcy5hUm90YXRpb249dC5hUm90YXRpb24sdGhpc30sSnUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe2NvbnN0IHQ9WnUucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMpO3JldHVybiB0LmFYPXRoaXMuYVgsdC5hWT10aGlzLmFZLHQueFJhZGl1cz10aGlzLnhSYWRpdXMsdC55UmFkaXVzPXRoaXMueVJhZGl1cyx0LmFTdGFydEFuZ2xlPXRoaXMuYVN0YXJ0QW5nbGUsdC5hRW5kQW5nbGU9dGhpcy5hRW5kQW5nbGUsdC5hQ2xvY2t3aXNlPXRoaXMuYUNsb2Nrd2lzZSx0LmFSb3RhdGlvbj10aGlzLmFSb3RhdGlvbix0fSxKdS5wcm90b3R5cGUuZnJvbUpTT049ZnVuY3Rpb24odCl7cmV0dXJuIFp1LnByb3RvdHlwZS5mcm9tSlNPTi5jYWxsKHRoaXMsdCksdGhpcy5hWD10LmFYLHRoaXMuYVk9dC5hWSx0aGlzLnhSYWRpdXM9dC54UmFkaXVzLHRoaXMueVJhZGl1cz10LnlSYWRpdXMsdGhpcy5hU3RhcnRBbmdsZT10LmFTdGFydEFuZ2xlLHRoaXMuYUVuZEFuZ2xlPXQuYUVuZEFuZ2xlLHRoaXMuYUNsb2Nrd2lzZT10LmFDbG9ja3dpc2UsdGhpcy5hUm90YXRpb249dC5hUm90YXRpb24sdGhpc30sS3UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoSnUucHJvdG90eXBlKSxLdS5wcm90b3R5cGUuY29uc3RydWN0b3I9S3UsS3UucHJvdG90eXBlLmlzQXJjQ3VydmU9ITA7Y29uc3QgJHU9bmV3IEtuLHRoPW5ldyBRdSxlaD1uZXcgUXUsbmg9bmV3IFF1O2Z1bmN0aW9uIHJoKHQ9W10sZT0hMSxuPVwiY2VudHJpcGV0YWxcIixyPS41KXtadS5jYWxsKHRoaXMpLHRoaXMudHlwZT1cIkNhdG11bGxSb21DdXJ2ZTNcIix0aGlzLnBvaW50cz10LHRoaXMuY2xvc2VkPWUsdGhpcy5jdXJ2ZVR5cGU9bix0aGlzLnRlbnNpb249cn1mdW5jdGlvbiBpaCh0LGUsbixyLGkpe2NvbnN0IG89LjUqKHItZSksYT0uNSooaS1uKSxzPXQqdDtyZXR1cm4oMipuLTIqcitvK2EpKih0KnMpKygtMypuKzMqci0yKm8tYSkqcytvKnQrbn1mdW5jdGlvbiBvaCh0LGUsbixyKXtyZXR1cm4gZnVuY3Rpb24odCxlKXtjb25zdCBuPTEtdDtyZXR1cm4gbipuKmV9KHQsZSkrZnVuY3Rpb24odCxlKXtyZXR1cm4gMiooMS10KSp0KmV9KHQsbikrZnVuY3Rpb24odCxlKXtyZXR1cm4gdCp0KmV9KHQscil9ZnVuY3Rpb24gYWgodCxlLG4scixpKXtyZXR1cm4gZnVuY3Rpb24odCxlKXtjb25zdCBuPTEtdDtyZXR1cm4gbipuKm4qZX0odCxlKStmdW5jdGlvbih0LGUpe2NvbnN0IG49MS10O3JldHVybiAzKm4qbip0KmV9KHQsbikrZnVuY3Rpb24odCxlKXtyZXR1cm4gMyooMS10KSp0KnQqZX0odCxyKStmdW5jdGlvbih0LGUpe3JldHVybiB0KnQqdCplfSh0LGkpfWZ1bmN0aW9uIHNoKHQ9bmV3IEduLGU9bmV3IEduLG49bmV3IEduLHI9bmV3IEduKXtadS5jYWxsKHRoaXMpLHRoaXMudHlwZT1cIkN1YmljQmV6aWVyQ3VydmVcIix0aGlzLnYwPXQsdGhpcy52MT1lLHRoaXMudjI9bix0aGlzLnYzPXJ9ZnVuY3Rpb24gY2godD1uZXcgS24sZT1uZXcgS24sbj1uZXcgS24scj1uZXcgS24pe1p1LmNhbGwodGhpcyksdGhpcy50eXBlPVwiQ3ViaWNCZXppZXJDdXJ2ZTNcIix0aGlzLnYwPXQsdGhpcy52MT1lLHRoaXMudjI9bix0aGlzLnYzPXJ9ZnVuY3Rpb24gbGgodD1uZXcgR24sZT1uZXcgR24pe1p1LmNhbGwodGhpcyksdGhpcy50eXBlPVwiTGluZUN1cnZlXCIsdGhpcy52MT10LHRoaXMudjI9ZX1mdW5jdGlvbiB1aCh0PW5ldyBLbixlPW5ldyBLbil7WnUuY2FsbCh0aGlzKSx0aGlzLnR5cGU9XCJMaW5lQ3VydmUzXCIsdGhpcy52MT10LHRoaXMudjI9ZX1mdW5jdGlvbiBoaCh0PW5ldyBHbixlPW5ldyBHbixuPW5ldyBHbil7WnUuY2FsbCh0aGlzKSx0aGlzLnR5cGU9XCJRdWFkcmF0aWNCZXppZXJDdXJ2ZVwiLHRoaXMudjA9dCx0aGlzLnYxPWUsdGhpcy52Mj1ufWZ1bmN0aW9uIGRoKHQ9bmV3IEtuLGU9bmV3IEtuLG49bmV3IEtuKXtadS5jYWxsKHRoaXMpLHRoaXMudHlwZT1cIlF1YWRyYXRpY0JlemllckN1cnZlM1wiLHRoaXMudjA9dCx0aGlzLnYxPWUsdGhpcy52Mj1ufWZ1bmN0aW9uIHBoKHQ9W10pe1p1LmNhbGwodGhpcyksdGhpcy50eXBlPVwiU3BsaW5lQ3VydmVcIix0aGlzLnBvaW50cz10fXJoLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFp1LnByb3RvdHlwZSkscmgucHJvdG90eXBlLmNvbnN0cnVjdG9yPXJoLHJoLnByb3RvdHlwZS5pc0NhdG11bGxSb21DdXJ2ZTM9ITAscmgucHJvdG90eXBlLmdldFBvaW50PWZ1bmN0aW9uKHQsZT1uZXcgS24pe2NvbnN0IG49ZSxyPXRoaXMucG9pbnRzLGk9ci5sZW5ndGgsbz0oaS0odGhpcy5jbG9zZWQ/MDoxKSkqdDtsZXQgYSxzLGM9TWF0aC5mbG9vcihvKSxsPW8tYzt0aGlzLmNsb3NlZD9jKz1jPjA/MDooTWF0aC5mbG9vcihNYXRoLmFicyhjKS9pKSsxKSppOjA9PT1sJiZjPT09aS0xJiYoYz1pLTIsbD0xKSx0aGlzLmNsb3NlZHx8Yz4wP2E9clsoYy0xKSVpXTooJHUuc3ViVmVjdG9ycyhyWzBdLHJbMV0pLmFkZChyWzBdKSxhPSR1KTtjb25zdCB1PXJbYyVpXSxoPXJbKGMrMSklaV07aWYodGhpcy5jbG9zZWR8fGMrMjxpP3M9clsoYysyKSVpXTooJHUuc3ViVmVjdG9ycyhyW2ktMV0scltpLTJdKS5hZGQocltpLTFdKSxzPSR1KSxcImNlbnRyaXBldGFsXCI9PT10aGlzLmN1cnZlVHlwZXx8XCJjaG9yZGFsXCI9PT10aGlzLmN1cnZlVHlwZSl7Y29uc3QgdD1cImNob3JkYWxcIj09PXRoaXMuY3VydmVUeXBlPy41Oi4yNTtsZXQgZT1NYXRoLnBvdyhhLmRpc3RhbmNlVG9TcXVhcmVkKHUpLHQpLG49TWF0aC5wb3codS5kaXN0YW5jZVRvU3F1YXJlZChoKSx0KSxyPU1hdGgucG93KGguZGlzdGFuY2VUb1NxdWFyZWQocyksdCk7bjwxZS00JiYobj0xKSxlPDFlLTQmJihlPW4pLHI8MWUtNCYmKHI9biksdGguaW5pdE5vbnVuaWZvcm1DYXRtdWxsUm9tKGEueCx1LngsaC54LHMueCxlLG4sciksZWguaW5pdE5vbnVuaWZvcm1DYXRtdWxsUm9tKGEueSx1LnksaC55LHMueSxlLG4sciksbmguaW5pdE5vbnVuaWZvcm1DYXRtdWxsUm9tKGEueix1LnosaC56LHMueixlLG4scil9ZWxzZVwiY2F0bXVsbHJvbVwiPT09dGhpcy5jdXJ2ZVR5cGUmJih0aC5pbml0Q2F0bXVsbFJvbShhLngsdS54LGgueCxzLngsdGhpcy50ZW5zaW9uKSxlaC5pbml0Q2F0bXVsbFJvbShhLnksdS55LGgueSxzLnksdGhpcy50ZW5zaW9uKSxuaC5pbml0Q2F0bXVsbFJvbShhLnosdS56LGgueixzLnosdGhpcy50ZW5zaW9uKSk7cmV0dXJuIG4uc2V0KHRoLmNhbGMobCksZWguY2FsYyhsKSxuaC5jYWxjKGwpKSxufSxyaC5wcm90b3R5cGUuY29weT1mdW5jdGlvbih0KXtadS5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsdCksdGhpcy5wb2ludHM9W107Zm9yKGxldCBlPTAsbj10LnBvaW50cy5sZW5ndGg7ZTxuO2UrKyl7Y29uc3Qgbj10LnBvaW50c1tlXTt0aGlzLnBvaW50cy5wdXNoKG4uY2xvbmUoKSl9cmV0dXJuIHRoaXMuY2xvc2VkPXQuY2xvc2VkLHRoaXMuY3VydmVUeXBlPXQuY3VydmVUeXBlLHRoaXMudGVuc2lvbj10LnRlbnNpb24sdGhpc30scmgucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe2NvbnN0IHQ9WnUucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMpO3QucG9pbnRzPVtdO2ZvcihsZXQgZT0wLG49dGhpcy5wb2ludHMubGVuZ3RoO2U8bjtlKyspe2NvbnN0IG49dGhpcy5wb2ludHNbZV07dC5wb2ludHMucHVzaChuLnRvQXJyYXkoKSl9cmV0dXJuIHQuY2xvc2VkPXRoaXMuY2xvc2VkLHQuY3VydmVUeXBlPXRoaXMuY3VydmVUeXBlLHQudGVuc2lvbj10aGlzLnRlbnNpb24sdH0scmgucHJvdG90eXBlLmZyb21KU09OPWZ1bmN0aW9uKHQpe1p1LnByb3RvdHlwZS5mcm9tSlNPTi5jYWxsKHRoaXMsdCksdGhpcy5wb2ludHM9W107Zm9yKGxldCBlPTAsbj10LnBvaW50cy5sZW5ndGg7ZTxuO2UrKyl7Y29uc3Qgbj10LnBvaW50c1tlXTt0aGlzLnBvaW50cy5wdXNoKChuZXcgS24pLmZyb21BcnJheShuKSl9cmV0dXJuIHRoaXMuY2xvc2VkPXQuY2xvc2VkLHRoaXMuY3VydmVUeXBlPXQuY3VydmVUeXBlLHRoaXMudGVuc2lvbj10LnRlbnNpb24sdGhpc30sc2gucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoWnUucHJvdG90eXBlKSxzaC5wcm90b3R5cGUuY29uc3RydWN0b3I9c2gsc2gucHJvdG90eXBlLmlzQ3ViaWNCZXppZXJDdXJ2ZT0hMCxzaC5wcm90b3R5cGUuZ2V0UG9pbnQ9ZnVuY3Rpb24odCxlPW5ldyBHbil7Y29uc3Qgbj1lLHI9dGhpcy52MCxpPXRoaXMudjEsbz10aGlzLnYyLGE9dGhpcy52MztyZXR1cm4gbi5zZXQoYWgodCxyLngsaS54LG8ueCxhLngpLGFoKHQsci55LGkueSxvLnksYS55KSksbn0sc2gucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24odCl7cmV0dXJuIFp1LnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyx0KSx0aGlzLnYwLmNvcHkodC52MCksdGhpcy52MS5jb3B5KHQudjEpLHRoaXMudjIuY29weSh0LnYyKSx0aGlzLnYzLmNvcHkodC52MyksdGhpc30sc2gucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe2NvbnN0IHQ9WnUucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMpO3JldHVybiB0LnYwPXRoaXMudjAudG9BcnJheSgpLHQudjE9dGhpcy52MS50b0FycmF5KCksdC52Mj10aGlzLnYyLnRvQXJyYXkoKSx0LnYzPXRoaXMudjMudG9BcnJheSgpLHR9LHNoLnByb3RvdHlwZS5mcm9tSlNPTj1mdW5jdGlvbih0KXtyZXR1cm4gWnUucHJvdG90eXBlLmZyb21KU09OLmNhbGwodGhpcyx0KSx0aGlzLnYwLmZyb21BcnJheSh0LnYwKSx0aGlzLnYxLmZyb21BcnJheSh0LnYxKSx0aGlzLnYyLmZyb21BcnJheSh0LnYyKSx0aGlzLnYzLmZyb21BcnJheSh0LnYzKSx0aGlzfSxjaC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShadS5wcm90b3R5cGUpLGNoLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1jaCxjaC5wcm90b3R5cGUuaXNDdWJpY0JlemllckN1cnZlMz0hMCxjaC5wcm90b3R5cGUuZ2V0UG9pbnQ9ZnVuY3Rpb24odCxlPW5ldyBLbil7Y29uc3Qgbj1lLHI9dGhpcy52MCxpPXRoaXMudjEsbz10aGlzLnYyLGE9dGhpcy52MztyZXR1cm4gbi5zZXQoYWgodCxyLngsaS54LG8ueCxhLngpLGFoKHQsci55LGkueSxvLnksYS55KSxhaCh0LHIueixpLnosby56LGEueikpLG59LGNoLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKHQpe3JldHVybiBadS5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsdCksdGhpcy52MC5jb3B5KHQudjApLHRoaXMudjEuY29weSh0LnYxKSx0aGlzLnYyLmNvcHkodC52MiksdGhpcy52My5jb3B5KHQudjMpLHRoaXN9LGNoLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtjb25zdCB0PVp1LnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzKTtyZXR1cm4gdC52MD10aGlzLnYwLnRvQXJyYXkoKSx0LnYxPXRoaXMudjEudG9BcnJheSgpLHQudjI9dGhpcy52Mi50b0FycmF5KCksdC52Mz10aGlzLnYzLnRvQXJyYXkoKSx0fSxjaC5wcm90b3R5cGUuZnJvbUpTT049ZnVuY3Rpb24odCl7cmV0dXJuIFp1LnByb3RvdHlwZS5mcm9tSlNPTi5jYWxsKHRoaXMsdCksdGhpcy52MC5mcm9tQXJyYXkodC52MCksdGhpcy52MS5mcm9tQXJyYXkodC52MSksdGhpcy52Mi5mcm9tQXJyYXkodC52MiksdGhpcy52My5mcm9tQXJyYXkodC52MyksdGhpc30sbGgucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoWnUucHJvdG90eXBlKSxsaC5wcm90b3R5cGUuY29uc3RydWN0b3I9bGgsbGgucHJvdG90eXBlLmlzTGluZUN1cnZlPSEwLGxoLnByb3RvdHlwZS5nZXRQb2ludD1mdW5jdGlvbih0LGU9bmV3IEduKXtjb25zdCBuPWU7cmV0dXJuIDE9PT10P24uY29weSh0aGlzLnYyKToobi5jb3B5KHRoaXMudjIpLnN1Yih0aGlzLnYxKSxuLm11bHRpcGx5U2NhbGFyKHQpLmFkZCh0aGlzLnYxKSksbn0sbGgucHJvdG90eXBlLmdldFBvaW50QXQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5nZXRQb2ludCh0LGUpfSxsaC5wcm90b3R5cGUuZ2V0VGFuZ2VudD1mdW5jdGlvbih0LGUpe2NvbnN0IG49ZXx8bmV3IEduO3JldHVybiBuLmNvcHkodGhpcy52Mikuc3ViKHRoaXMudjEpLm5vcm1hbGl6ZSgpLG59LGxoLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKHQpe3JldHVybiBadS5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsdCksdGhpcy52MS5jb3B5KHQudjEpLHRoaXMudjIuY29weSh0LnYyKSx0aGlzfSxsaC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7Y29uc3QgdD1adS5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7cmV0dXJuIHQudjE9dGhpcy52MS50b0FycmF5KCksdC52Mj10aGlzLnYyLnRvQXJyYXkoKSx0fSxsaC5wcm90b3R5cGUuZnJvbUpTT049ZnVuY3Rpb24odCl7cmV0dXJuIFp1LnByb3RvdHlwZS5mcm9tSlNPTi5jYWxsKHRoaXMsdCksdGhpcy52MS5mcm9tQXJyYXkodC52MSksdGhpcy52Mi5mcm9tQXJyYXkodC52MiksdGhpc30sdWgucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoWnUucHJvdG90eXBlKSx1aC5wcm90b3R5cGUuY29uc3RydWN0b3I9dWgsdWgucHJvdG90eXBlLmlzTGluZUN1cnZlMz0hMCx1aC5wcm90b3R5cGUuZ2V0UG9pbnQ9ZnVuY3Rpb24odCxlPW5ldyBLbil7Y29uc3Qgbj1lO3JldHVybiAxPT09dD9uLmNvcHkodGhpcy52Mik6KG4uY29weSh0aGlzLnYyKS5zdWIodGhpcy52MSksbi5tdWx0aXBseVNjYWxhcih0KS5hZGQodGhpcy52MSkpLG59LHVoLnByb3RvdHlwZS5nZXRQb2ludEF0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuZ2V0UG9pbnQodCxlKX0sdWgucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24odCl7cmV0dXJuIFp1LnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyx0KSx0aGlzLnYxLmNvcHkodC52MSksdGhpcy52Mi5jb3B5KHQudjIpLHRoaXN9LHVoLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtjb25zdCB0PVp1LnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzKTtyZXR1cm4gdC52MT10aGlzLnYxLnRvQXJyYXkoKSx0LnYyPXRoaXMudjIudG9BcnJheSgpLHR9LHVoLnByb3RvdHlwZS5mcm9tSlNPTj1mdW5jdGlvbih0KXtyZXR1cm4gWnUucHJvdG90eXBlLmZyb21KU09OLmNhbGwodGhpcyx0KSx0aGlzLnYxLmZyb21BcnJheSh0LnYxKSx0aGlzLnYyLmZyb21BcnJheSh0LnYyKSx0aGlzfSxoaC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShadS5wcm90b3R5cGUpLGhoLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1oaCxoaC5wcm90b3R5cGUuaXNRdWFkcmF0aWNCZXppZXJDdXJ2ZT0hMCxoaC5wcm90b3R5cGUuZ2V0UG9pbnQ9ZnVuY3Rpb24odCxlPW5ldyBHbil7Y29uc3Qgbj1lLHI9dGhpcy52MCxpPXRoaXMudjEsbz10aGlzLnYyO3JldHVybiBuLnNldChvaCh0LHIueCxpLngsby54KSxvaCh0LHIueSxpLnksby55KSksbn0saGgucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24odCl7cmV0dXJuIFp1LnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyx0KSx0aGlzLnYwLmNvcHkodC52MCksdGhpcy52MS5jb3B5KHQudjEpLHRoaXMudjIuY29weSh0LnYyKSx0aGlzfSxoaC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7Y29uc3QgdD1adS5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7cmV0dXJuIHQudjA9dGhpcy52MC50b0FycmF5KCksdC52MT10aGlzLnYxLnRvQXJyYXkoKSx0LnYyPXRoaXMudjIudG9BcnJheSgpLHR9LGhoLnByb3RvdHlwZS5mcm9tSlNPTj1mdW5jdGlvbih0KXtyZXR1cm4gWnUucHJvdG90eXBlLmZyb21KU09OLmNhbGwodGhpcyx0KSx0aGlzLnYwLmZyb21BcnJheSh0LnYwKSx0aGlzLnYxLmZyb21BcnJheSh0LnYxKSx0aGlzLnYyLmZyb21BcnJheSh0LnYyKSx0aGlzfSxkaC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShadS5wcm90b3R5cGUpLGRoLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1kaCxkaC5wcm90b3R5cGUuaXNRdWFkcmF0aWNCZXppZXJDdXJ2ZTM9ITAsZGgucHJvdG90eXBlLmdldFBvaW50PWZ1bmN0aW9uKHQsZT1uZXcgS24pe2NvbnN0IG49ZSxyPXRoaXMudjAsaT10aGlzLnYxLG89dGhpcy52MjtyZXR1cm4gbi5zZXQob2godCxyLngsaS54LG8ueCksb2godCxyLnksaS55LG8ueSksb2godCxyLnosaS56LG8ueikpLG59LGRoLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKHQpe3JldHVybiBadS5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsdCksdGhpcy52MC5jb3B5KHQudjApLHRoaXMudjEuY29weSh0LnYxKSx0aGlzLnYyLmNvcHkodC52MiksdGhpc30sZGgucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe2NvbnN0IHQ9WnUucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMpO3JldHVybiB0LnYwPXRoaXMudjAudG9BcnJheSgpLHQudjE9dGhpcy52MS50b0FycmF5KCksdC52Mj10aGlzLnYyLnRvQXJyYXkoKSx0fSxkaC5wcm90b3R5cGUuZnJvbUpTT049ZnVuY3Rpb24odCl7cmV0dXJuIFp1LnByb3RvdHlwZS5mcm9tSlNPTi5jYWxsKHRoaXMsdCksdGhpcy52MC5mcm9tQXJyYXkodC52MCksdGhpcy52MS5mcm9tQXJyYXkodC52MSksdGhpcy52Mi5mcm9tQXJyYXkodC52MiksdGhpc30scGgucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoWnUucHJvdG90eXBlKSxwaC5wcm90b3R5cGUuY29uc3RydWN0b3I9cGgscGgucHJvdG90eXBlLmlzU3BsaW5lQ3VydmU9ITAscGgucHJvdG90eXBlLmdldFBvaW50PWZ1bmN0aW9uKHQsZT1uZXcgR24pe2NvbnN0IG49ZSxyPXRoaXMucG9pbnRzLGk9KHIubGVuZ3RoLTEpKnQsbz1NYXRoLmZsb29yKGkpLGE9aS1vLHM9clswPT09bz9vOm8tMV0sYz1yW29dLGw9cltvPnIubGVuZ3RoLTI/ci5sZW5ndGgtMTpvKzFdLHU9cltvPnIubGVuZ3RoLTM/ci5sZW5ndGgtMTpvKzJdO3JldHVybiBuLnNldChpaChhLHMueCxjLngsbC54LHUueCksaWgoYSxzLnksYy55LGwueSx1LnkpKSxufSxwaC5wcm90b3R5cGUuY29weT1mdW5jdGlvbih0KXtadS5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsdCksdGhpcy5wb2ludHM9W107Zm9yKGxldCBlPTAsbj10LnBvaW50cy5sZW5ndGg7ZTxuO2UrKyl7Y29uc3Qgbj10LnBvaW50c1tlXTt0aGlzLnBvaW50cy5wdXNoKG4uY2xvbmUoKSl9cmV0dXJuIHRoaXN9LHBoLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtjb25zdCB0PVp1LnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzKTt0LnBvaW50cz1bXTtmb3IobGV0IGU9MCxuPXRoaXMucG9pbnRzLmxlbmd0aDtlPG47ZSsrKXtjb25zdCBuPXRoaXMucG9pbnRzW2VdO3QucG9pbnRzLnB1c2gobi50b0FycmF5KCkpfXJldHVybiB0fSxwaC5wcm90b3R5cGUuZnJvbUpTT049ZnVuY3Rpb24odCl7WnUucHJvdG90eXBlLmZyb21KU09OLmNhbGwodGhpcyx0KSx0aGlzLnBvaW50cz1bXTtmb3IobGV0IGU9MCxuPXQucG9pbnRzLmxlbmd0aDtlPG47ZSsrKXtjb25zdCBuPXQucG9pbnRzW2VdO3RoaXMucG9pbnRzLnB1c2goKG5ldyBHbikuZnJvbUFycmF5KG4pKX1yZXR1cm4gdGhpc307dmFyIGZoPU9iamVjdC5mcmVlemUoe19fcHJvdG9fXzpudWxsLEFyY0N1cnZlOkt1LENhdG11bGxSb21DdXJ2ZTM6cmgsQ3ViaWNCZXppZXJDdXJ2ZTpzaCxDdWJpY0JlemllckN1cnZlMzpjaCxFbGxpcHNlQ3VydmU6SnUsTGluZUN1cnZlOmxoLExpbmVDdXJ2ZTM6dWgsUXVhZHJhdGljQmV6aWVyQ3VydmU6aGgsUXVhZHJhdGljQmV6aWVyQ3VydmUzOmRoLFNwbGluZUN1cnZlOnBofSk7ZnVuY3Rpb24gbWgoKXtadS5jYWxsKHRoaXMpLHRoaXMudHlwZT1cIkN1cnZlUGF0aFwiLHRoaXMuY3VydmVzPVtdLHRoaXMuYXV0b0Nsb3NlPSExfWZ1bmN0aW9uIGdoKHQpe21oLmNhbGwodGhpcyksdGhpcy50eXBlPVwiUGF0aFwiLHRoaXMuY3VycmVudFBvaW50PW5ldyBHbix0JiZ0aGlzLnNldEZyb21Qb2ludHModCl9ZnVuY3Rpb24gdmgodCl7Z2guY2FsbCh0aGlzLHQpLHRoaXMudXVpZD16bi5nZW5lcmF0ZVVVSUQoKSx0aGlzLnR5cGU9XCJTaGFwZVwiLHRoaXMuaG9sZXM9W119ZnVuY3Rpb24geWgodCxlPTEpe0pyLmNhbGwodGhpcyksdGhpcy50eXBlPVwiTGlnaHRcIix0aGlzLmNvbG9yPW5ldyB5aSh0KSx0aGlzLmludGVuc2l0eT1lfWZ1bmN0aW9uIHhoKHQsZSxuKXt5aC5jYWxsKHRoaXMsdCxuKSx0aGlzLnR5cGU9XCJIZW1pc3BoZXJlTGlnaHRcIix0aGlzLnBvc2l0aW9uLmNvcHkoSnIuRGVmYXVsdFVwKSx0aGlzLnVwZGF0ZU1hdHJpeCgpLHRoaXMuZ3JvdW5kQ29sb3I9bmV3IHlpKGUpfWZ1bmN0aW9uIGJoKHQpe3RoaXMuY2FtZXJhPXQsdGhpcy5iaWFzPTAsdGhpcy5ub3JtYWxCaWFzPTAsdGhpcy5yYWRpdXM9MSx0aGlzLm1hcFNpemU9bmV3IEduKDUxMiw1MTIpLHRoaXMubWFwPW51bGwsdGhpcy5tYXBQYXNzPW51bGwsdGhpcy5tYXRyaXg9bmV3IFRyLHRoaXMuYXV0b1VwZGF0ZT0hMCx0aGlzLm5lZWRzVXBkYXRlPSExLHRoaXMuX2ZydXN0dW09bmV3IExvLHRoaXMuX2ZyYW1lRXh0ZW50cz1uZXcgR24oMSwxKSx0aGlzLl92aWV3cG9ydENvdW50PTEsdGhpcy5fdmlld3BvcnRzPVtuZXcgcW4oMCwwLDEsMSldfWZ1bmN0aW9uIHdoKCl7YmguY2FsbCh0aGlzLG5ldyB3byg1MCwxLC41LDUwMCkpLHRoaXMuZm9jdXM9MX1mdW5jdGlvbiBfaCh0LGUsbixyLGksbyl7eWguY2FsbCh0aGlzLHQsZSksdGhpcy50eXBlPVwiU3BvdExpZ2h0XCIsdGhpcy5wb3NpdGlvbi5jb3B5KEpyLkRlZmF1bHRVcCksdGhpcy51cGRhdGVNYXRyaXgoKSx0aGlzLnRhcmdldD1uZXcgSnIsT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJwb3dlclwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbnRlbnNpdHkqTWF0aC5QSX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuaW50ZW5zaXR5PXQvTWF0aC5QSX19KSx0aGlzLmRpc3RhbmNlPXZvaWQgMCE9PW4/bjowLHRoaXMuYW5nbGU9dm9pZCAwIT09cj9yOk1hdGguUEkvMyx0aGlzLnBlbnVtYnJhPXZvaWQgMCE9PWk/aTowLHRoaXMuZGVjYXk9dm9pZCAwIT09bz9vOjEsdGhpcy5zaGFkb3c9bmV3IHdofWZ1bmN0aW9uIE1oKCl7YmguY2FsbCh0aGlzLG5ldyB3byg5MCwxLC41LDUwMCkpLHRoaXMuX2ZyYW1lRXh0ZW50cz1uZXcgR24oNCwyKSx0aGlzLl92aWV3cG9ydENvdW50PTYsdGhpcy5fdmlld3BvcnRzPVtuZXcgcW4oMiwxLDEsMSksbmV3IHFuKDAsMSwxLDEpLG5ldyBxbigzLDEsMSwxKSxuZXcgcW4oMSwxLDEsMSksbmV3IHFuKDMsMCwxLDEpLG5ldyBxbigxLDAsMSwxKV0sdGhpcy5fY3ViZURpcmVjdGlvbnM9W25ldyBLbigxLDAsMCksbmV3IEtuKC0xLDAsMCksbmV3IEtuKDAsMCwxKSxuZXcgS24oMCwwLC0xKSxuZXcgS24oMCwxLDApLG5ldyBLbigwLC0xLDApXSx0aGlzLl9jdWJlVXBzPVtuZXcgS24oMCwxLDApLG5ldyBLbigwLDEsMCksbmV3IEtuKDAsMSwwKSxuZXcgS24oMCwxLDApLG5ldyBLbigwLDAsMSksbmV3IEtuKDAsMCwtMSldfWZ1bmN0aW9uIFNoKHQsZSxuLHIpe3loLmNhbGwodGhpcyx0LGUpLHRoaXMudHlwZT1cIlBvaW50TGlnaHRcIixPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcInBvd2VyXCIse2dldDpmdW5jdGlvbigpe3JldHVybiA0KnRoaXMuaW50ZW5zaXR5Kk1hdGguUEl9LHNldDpmdW5jdGlvbih0KXt0aGlzLmludGVuc2l0eT10Lyg0Kk1hdGguUEkpfX0pLHRoaXMuZGlzdGFuY2U9dm9pZCAwIT09bj9uOjAsdGhpcy5kZWNheT12b2lkIDAhPT1yP3I6MSx0aGlzLnNoYWRvdz1uZXcgTWh9ZnVuY3Rpb24gVGgodCxlLG4scixpLG8pe2JvLmNhbGwodGhpcyksdGhpcy50eXBlPVwiT3J0aG9ncmFwaGljQ2FtZXJhXCIsdGhpcy56b29tPTEsdGhpcy52aWV3PW51bGwsdGhpcy5sZWZ0PXZvaWQgMCE9PXQ/dDotMSx0aGlzLnJpZ2h0PXZvaWQgMCE9PWU/ZToxLHRoaXMudG9wPXZvaWQgMCE9PW4/bjoxLHRoaXMuYm90dG9tPXZvaWQgMCE9PXI/cjotMSx0aGlzLm5lYXI9dm9pZCAwIT09aT9pOi4xLHRoaXMuZmFyPXZvaWQgMCE9PW8/bzoyZTMsdGhpcy51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCl9ZnVuY3Rpb24gRWgoKXtiaC5jYWxsKHRoaXMsbmV3IFRoKC01LDUsNSwtNSwuNSw1MDApKX1mdW5jdGlvbiBBaCh0LGUpe3loLmNhbGwodGhpcyx0LGUpLHRoaXMudHlwZT1cIkRpcmVjdGlvbmFsTGlnaHRcIix0aGlzLnBvc2l0aW9uLmNvcHkoSnIuRGVmYXVsdFVwKSx0aGlzLnVwZGF0ZU1hdHJpeCgpLHRoaXMudGFyZ2V0PW5ldyBKcix0aGlzLnNoYWRvdz1uZXcgRWh9ZnVuY3Rpb24gTGgodCxlKXt5aC5jYWxsKHRoaXMsdCxlKSx0aGlzLnR5cGU9XCJBbWJpZW50TGlnaHRcIn1mdW5jdGlvbiBSaCh0LGUsbixyKXt5aC5jYWxsKHRoaXMsdCxlKSx0aGlzLnR5cGU9XCJSZWN0QXJlYUxpZ2h0XCIsdGhpcy53aWR0aD12b2lkIDAhPT1uP246MTAsdGhpcy5oZWlnaHQ9dm9pZCAwIT09cj9yOjEwfW1oLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoWnUucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6bWgsYWRkOmZ1bmN0aW9uKHQpe3RoaXMuY3VydmVzLnB1c2godCl9LGNsb3NlUGF0aDpmdW5jdGlvbigpe2NvbnN0IHQ9dGhpcy5jdXJ2ZXNbMF0uZ2V0UG9pbnQoMCksZT10aGlzLmN1cnZlc1t0aGlzLmN1cnZlcy5sZW5ndGgtMV0uZ2V0UG9pbnQoMSk7dC5lcXVhbHMoZSl8fHRoaXMuY3VydmVzLnB1c2gobmV3IGxoKGUsdCkpfSxnZXRQb2ludDpmdW5jdGlvbih0KXtjb25zdCBlPXQqdGhpcy5nZXRMZW5ndGgoKSxuPXRoaXMuZ2V0Q3VydmVMZW5ndGhzKCk7bGV0IHI9MDtmb3IoO3I8bi5sZW5ndGg7KXtpZihuW3JdPj1lKXtjb25zdCB0PW5bcl0tZSxpPXRoaXMuY3VydmVzW3JdLG89aS5nZXRMZW5ndGgoKSxhPTA9PT1vPzA6MS10L287cmV0dXJuIGkuZ2V0UG9pbnRBdChhKX1yKyt9cmV0dXJuIG51bGx9LGdldExlbmd0aDpmdW5jdGlvbigpe2NvbnN0IHQ9dGhpcy5nZXRDdXJ2ZUxlbmd0aHMoKTtyZXR1cm4gdFt0Lmxlbmd0aC0xXX0sdXBkYXRlQXJjTGVuZ3RoczpmdW5jdGlvbigpe3RoaXMubmVlZHNVcGRhdGU9ITAsdGhpcy5jYWNoZUxlbmd0aHM9bnVsbCx0aGlzLmdldEN1cnZlTGVuZ3RocygpfSxnZXRDdXJ2ZUxlbmd0aHM6ZnVuY3Rpb24oKXtpZih0aGlzLmNhY2hlTGVuZ3RocyYmdGhpcy5jYWNoZUxlbmd0aHMubGVuZ3RoPT09dGhpcy5jdXJ2ZXMubGVuZ3RoKXJldHVybiB0aGlzLmNhY2hlTGVuZ3Rocztjb25zdCB0PVtdO2xldCBlPTA7Zm9yKGxldCBuPTAscj10aGlzLmN1cnZlcy5sZW5ndGg7bjxyO24rKyllKz10aGlzLmN1cnZlc1tuXS5nZXRMZW5ndGgoKSx0LnB1c2goZSk7cmV0dXJuIHRoaXMuY2FjaGVMZW5ndGhzPXQsdH0sZ2V0U3BhY2VkUG9pbnRzOmZ1bmN0aW9uKHQ9NDApe2NvbnN0IGU9W107Zm9yKGxldCBuPTA7bjw9dDtuKyspZS5wdXNoKHRoaXMuZ2V0UG9pbnQobi90KSk7cmV0dXJuIHRoaXMuYXV0b0Nsb3NlJiZlLnB1c2goZVswXSksZX0sZ2V0UG9pbnRzOmZ1bmN0aW9uKHQ9MTIpe2NvbnN0IGU9W107bGV0IG47Zm9yKGxldCByPTAsaT10aGlzLmN1cnZlcztyPGkubGVuZ3RoO3IrKyl7Y29uc3Qgbz1pW3JdLGE9byYmby5pc0VsbGlwc2VDdXJ2ZT8yKnQ6byYmKG8uaXNMaW5lQ3VydmV8fG8uaXNMaW5lQ3VydmUzKT8xOm8mJm8uaXNTcGxpbmVDdXJ2ZT90Km8ucG9pbnRzLmxlbmd0aDp0LHM9by5nZXRQb2ludHMoYSk7Zm9yKGxldCB0PTA7dDxzLmxlbmd0aDt0Kyspe2NvbnN0IHI9c1t0XTtuJiZuLmVxdWFscyhyKXx8KGUucHVzaChyKSxuPXIpfX1yZXR1cm4gdGhpcy5hdXRvQ2xvc2UmJmUubGVuZ3RoPjEmJiFlW2UubGVuZ3RoLTFdLmVxdWFscyhlWzBdKSYmZS5wdXNoKGVbMF0pLGV9LGNvcHk6ZnVuY3Rpb24odCl7WnUucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLHQpLHRoaXMuY3VydmVzPVtdO2ZvcihsZXQgZT0wLG49dC5jdXJ2ZXMubGVuZ3RoO2U8bjtlKyspe2NvbnN0IG49dC5jdXJ2ZXNbZV07dGhpcy5jdXJ2ZXMucHVzaChuLmNsb25lKCkpfXJldHVybiB0aGlzLmF1dG9DbG9zZT10LmF1dG9DbG9zZSx0aGlzfSx0b0pTT046ZnVuY3Rpb24oKXtjb25zdCB0PVp1LnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzKTt0LmF1dG9DbG9zZT10aGlzLmF1dG9DbG9zZSx0LmN1cnZlcz1bXTtmb3IobGV0IGU9MCxuPXRoaXMuY3VydmVzLmxlbmd0aDtlPG47ZSsrKXtjb25zdCBuPXRoaXMuY3VydmVzW2VdO3QuY3VydmVzLnB1c2gobi50b0pTT04oKSl9cmV0dXJuIHR9LGZyb21KU09OOmZ1bmN0aW9uKHQpe1p1LnByb3RvdHlwZS5mcm9tSlNPTi5jYWxsKHRoaXMsdCksdGhpcy5hdXRvQ2xvc2U9dC5hdXRvQ2xvc2UsdGhpcy5jdXJ2ZXM9W107Zm9yKGxldCBlPTAsbj10LmN1cnZlcy5sZW5ndGg7ZTxuO2UrKyl7Y29uc3Qgbj10LmN1cnZlc1tlXTt0aGlzLmN1cnZlcy5wdXNoKChuZXcgZmhbbi50eXBlXSkuZnJvbUpTT04obikpfXJldHVybiB0aGlzfX0pLGdoLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUobWgucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6Z2gsc2V0RnJvbVBvaW50czpmdW5jdGlvbih0KXt0aGlzLm1vdmVUbyh0WzBdLngsdFswXS55KTtmb3IobGV0IGU9MSxuPXQubGVuZ3RoO2U8bjtlKyspdGhpcy5saW5lVG8odFtlXS54LHRbZV0ueSk7cmV0dXJuIHRoaXN9LG1vdmVUbzpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmN1cnJlbnRQb2ludC5zZXQodCxlKSx0aGlzfSxsaW5lVG86ZnVuY3Rpb24odCxlKXtjb25zdCBuPW5ldyBsaCh0aGlzLmN1cnJlbnRQb2ludC5jbG9uZSgpLG5ldyBHbih0LGUpKTtyZXR1cm4gdGhpcy5jdXJ2ZXMucHVzaChuKSx0aGlzLmN1cnJlbnRQb2ludC5zZXQodCxlKSx0aGlzfSxxdWFkcmF0aWNDdXJ2ZVRvOmZ1bmN0aW9uKHQsZSxuLHIpe2NvbnN0IGk9bmV3IGhoKHRoaXMuY3VycmVudFBvaW50LmNsb25lKCksbmV3IEduKHQsZSksbmV3IEduKG4scikpO3JldHVybiB0aGlzLmN1cnZlcy5wdXNoKGkpLHRoaXMuY3VycmVudFBvaW50LnNldChuLHIpLHRoaXN9LGJlemllckN1cnZlVG86ZnVuY3Rpb24odCxlLG4scixpLG8pe2NvbnN0IGE9bmV3IHNoKHRoaXMuY3VycmVudFBvaW50LmNsb25lKCksbmV3IEduKHQsZSksbmV3IEduKG4sciksbmV3IEduKGksbykpO3JldHVybiB0aGlzLmN1cnZlcy5wdXNoKGEpLHRoaXMuY3VycmVudFBvaW50LnNldChpLG8pLHRoaXN9LHNwbGluZVRocnU6ZnVuY3Rpb24odCl7Y29uc3QgZT1uZXcgcGgoW3RoaXMuY3VycmVudFBvaW50LmNsb25lKCldLmNvbmNhdCh0KSk7cmV0dXJuIHRoaXMuY3VydmVzLnB1c2goZSksdGhpcy5jdXJyZW50UG9pbnQuY29weSh0W3QubGVuZ3RoLTFdKSx0aGlzfSxhcmM6ZnVuY3Rpb24odCxlLG4scixpLG8pe2NvbnN0IGE9dGhpcy5jdXJyZW50UG9pbnQueCxzPXRoaXMuY3VycmVudFBvaW50Lnk7cmV0dXJuIHRoaXMuYWJzYXJjKHQrYSxlK3MsbixyLGksbyksdGhpc30sYWJzYXJjOmZ1bmN0aW9uKHQsZSxuLHIsaSxvKXtyZXR1cm4gdGhpcy5hYnNlbGxpcHNlKHQsZSxuLG4scixpLG8pLHRoaXN9LGVsbGlwc2U6ZnVuY3Rpb24odCxlLG4scixpLG8sYSxzKXtjb25zdCBjPXRoaXMuY3VycmVudFBvaW50LngsbD10aGlzLmN1cnJlbnRQb2ludC55O3JldHVybiB0aGlzLmFic2VsbGlwc2UodCtjLGUrbCxuLHIsaSxvLGEscyksdGhpc30sYWJzZWxsaXBzZTpmdW5jdGlvbih0LGUsbixyLGksbyxhLHMpe2NvbnN0IGM9bmV3IEp1KHQsZSxuLHIsaSxvLGEscyk7aWYodGhpcy5jdXJ2ZXMubGVuZ3RoPjApe2NvbnN0IHQ9Yy5nZXRQb2ludCgwKTt0LmVxdWFscyh0aGlzLmN1cnJlbnRQb2ludCl8fHRoaXMubGluZVRvKHQueCx0LnkpfXRoaXMuY3VydmVzLnB1c2goYyk7Y29uc3QgbD1jLmdldFBvaW50KDEpO3JldHVybiB0aGlzLmN1cnJlbnRQb2ludC5jb3B5KGwpLHRoaXN9LGNvcHk6ZnVuY3Rpb24odCl7cmV0dXJuIG1oLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyx0KSx0aGlzLmN1cnJlbnRQb2ludC5jb3B5KHQuY3VycmVudFBvaW50KSx0aGlzfSx0b0pTT046ZnVuY3Rpb24oKXtjb25zdCB0PW1oLnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzKTtyZXR1cm4gdC5jdXJyZW50UG9pbnQ9dGhpcy5jdXJyZW50UG9pbnQudG9BcnJheSgpLHR9LGZyb21KU09OOmZ1bmN0aW9uKHQpe3JldHVybiBtaC5wcm90b3R5cGUuZnJvbUpTT04uY2FsbCh0aGlzLHQpLHRoaXMuY3VycmVudFBvaW50LmZyb21BcnJheSh0LmN1cnJlbnRQb2ludCksdGhpc319KSx2aC5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKGdoLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOnZoLGdldFBvaW50c0hvbGVzOmZ1bmN0aW9uKHQpe2NvbnN0IGU9W107Zm9yKGxldCBuPTAscj10aGlzLmhvbGVzLmxlbmd0aDtuPHI7bisrKWVbbl09dGhpcy5ob2xlc1tuXS5nZXRQb2ludHModCk7cmV0dXJuIGV9LGV4dHJhY3RQb2ludHM6ZnVuY3Rpb24odCl7cmV0dXJue3NoYXBlOnRoaXMuZ2V0UG9pbnRzKHQpLGhvbGVzOnRoaXMuZ2V0UG9pbnRzSG9sZXModCl9fSxjb3B5OmZ1bmN0aW9uKHQpe2doLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyx0KSx0aGlzLmhvbGVzPVtdO2ZvcihsZXQgZT0wLG49dC5ob2xlcy5sZW5ndGg7ZTxuO2UrKyl7Y29uc3Qgbj10LmhvbGVzW2VdO3RoaXMuaG9sZXMucHVzaChuLmNsb25lKCkpfXJldHVybiB0aGlzfSx0b0pTT046ZnVuY3Rpb24oKXtjb25zdCB0PWdoLnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzKTt0LnV1aWQ9dGhpcy51dWlkLHQuaG9sZXM9W107Zm9yKGxldCBlPTAsbj10aGlzLmhvbGVzLmxlbmd0aDtlPG47ZSsrKXtjb25zdCBuPXRoaXMuaG9sZXNbZV07dC5ob2xlcy5wdXNoKG4udG9KU09OKCkpfXJldHVybiB0fSxmcm9tSlNPTjpmdW5jdGlvbih0KXtnaC5wcm90b3R5cGUuZnJvbUpTT04uY2FsbCh0aGlzLHQpLHRoaXMudXVpZD10LnV1aWQsdGhpcy5ob2xlcz1bXTtmb3IobGV0IGU9MCxuPXQuaG9sZXMubGVuZ3RoO2U8bjtlKyspe2NvbnN0IG49dC5ob2xlc1tlXTt0aGlzLmhvbGVzLnB1c2goKG5ldyBnaCkuZnJvbUpTT04obikpfXJldHVybiB0aGlzfX0pLHloLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoSnIucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6eWgsaXNMaWdodDohMCxjb3B5OmZ1bmN0aW9uKHQpe3JldHVybiBKci5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsdCksdGhpcy5jb2xvci5jb3B5KHQuY29sb3IpLHRoaXMuaW50ZW5zaXR5PXQuaW50ZW5zaXR5LHRoaXN9LHRvSlNPTjpmdW5jdGlvbih0KXtjb25zdCBlPUpyLnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzLHQpO3JldHVybiBlLm9iamVjdC5jb2xvcj10aGlzLmNvbG9yLmdldEhleCgpLGUub2JqZWN0LmludGVuc2l0eT10aGlzLmludGVuc2l0eSx2b2lkIDAhPT10aGlzLmdyb3VuZENvbG9yJiYoZS5vYmplY3QuZ3JvdW5kQ29sb3I9dGhpcy5ncm91bmRDb2xvci5nZXRIZXgoKSksdm9pZCAwIT09dGhpcy5kaXN0YW5jZSYmKGUub2JqZWN0LmRpc3RhbmNlPXRoaXMuZGlzdGFuY2UpLHZvaWQgMCE9PXRoaXMuYW5nbGUmJihlLm9iamVjdC5hbmdsZT10aGlzLmFuZ2xlKSx2b2lkIDAhPT10aGlzLmRlY2F5JiYoZS5vYmplY3QuZGVjYXk9dGhpcy5kZWNheSksdm9pZCAwIT09dGhpcy5wZW51bWJyYSYmKGUub2JqZWN0LnBlbnVtYnJhPXRoaXMucGVudW1icmEpLHZvaWQgMCE9PXRoaXMuc2hhZG93JiYoZS5vYmplY3Quc2hhZG93PXRoaXMuc2hhZG93LnRvSlNPTigpKSxlfX0pLHhoLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoeWgucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6eGgsaXNIZW1pc3BoZXJlTGlnaHQ6ITAsY29weTpmdW5jdGlvbih0KXtyZXR1cm4geWgucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLHQpLHRoaXMuZ3JvdW5kQ29sb3IuY29weSh0Lmdyb3VuZENvbG9yKSx0aGlzfX0pLE9iamVjdC5hc3NpZ24oYmgucHJvdG90eXBlLHtfcHJvalNjcmVlbk1hdHJpeDpuZXcgVHIsX2xpZ2h0UG9zaXRpb25Xb3JsZDpuZXcgS24sX2xvb2tUYXJnZXQ6bmV3IEtuLGdldFZpZXdwb3J0Q291bnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdmlld3BvcnRDb3VudH0sZ2V0RnJ1c3R1bTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9mcnVzdHVtfSx1cGRhdGVNYXRyaWNlczpmdW5jdGlvbih0KXtjb25zdCBlPXRoaXMuY2FtZXJhLG49dGhpcy5tYXRyaXgscj10aGlzLl9wcm9qU2NyZWVuTWF0cml4LGk9dGhpcy5fbG9va1RhcmdldCxvPXRoaXMuX2xpZ2h0UG9zaXRpb25Xb3JsZDtvLnNldEZyb21NYXRyaXhQb3NpdGlvbih0Lm1hdHJpeFdvcmxkKSxlLnBvc2l0aW9uLmNvcHkobyksaS5zZXRGcm9tTWF0cml4UG9zaXRpb24odC50YXJnZXQubWF0cml4V29ybGQpLGUubG9va0F0KGkpLGUudXBkYXRlTWF0cml4V29ybGQoKSxyLm11bHRpcGx5TWF0cmljZXMoZS5wcm9qZWN0aW9uTWF0cml4LGUubWF0cml4V29ybGRJbnZlcnNlKSx0aGlzLl9mcnVzdHVtLnNldEZyb21Qcm9qZWN0aW9uTWF0cml4KHIpLG4uc2V0KC41LDAsMCwuNSwwLC41LDAsLjUsMCwwLC41LC41LDAsMCwwLDEpLG4ubXVsdGlwbHkoZS5wcm9qZWN0aW9uTWF0cml4KSxuLm11bHRpcGx5KGUubWF0cml4V29ybGRJbnZlcnNlKX0sZ2V0Vmlld3BvcnQ6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3ZpZXdwb3J0c1t0XX0sZ2V0RnJhbWVFeHRlbnRzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ZyYW1lRXh0ZW50c30sY29weTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jYW1lcmE9dC5jYW1lcmEuY2xvbmUoKSx0aGlzLmJpYXM9dC5iaWFzLHRoaXMucmFkaXVzPXQucmFkaXVzLHRoaXMubWFwU2l6ZS5jb3B5KHQubWFwU2l6ZSksdGhpc30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyl9LHRvSlNPTjpmdW5jdGlvbigpe2NvbnN0IHQ9e307cmV0dXJuIDAhPT10aGlzLmJpYXMmJih0LmJpYXM9dGhpcy5iaWFzKSwwIT09dGhpcy5ub3JtYWxCaWFzJiYodC5ub3JtYWxCaWFzPXRoaXMubm9ybWFsQmlhcyksMSE9PXRoaXMucmFkaXVzJiYodC5yYWRpdXM9dGhpcy5yYWRpdXMpLDUxMj09PXRoaXMubWFwU2l6ZS54JiY1MTI9PT10aGlzLm1hcFNpemUueXx8KHQubWFwU2l6ZT10aGlzLm1hcFNpemUudG9BcnJheSgpKSx0LmNhbWVyYT10aGlzLmNhbWVyYS50b0pTT04oITEpLm9iamVjdCxkZWxldGUgdC5jYW1lcmEubWF0cml4LHR9fSksd2gucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShiaC5wcm90b3R5cGUpLHtjb25zdHJ1Y3Rvcjp3aCxpc1Nwb3RMaWdodFNoYWRvdzohMCx1cGRhdGVNYXRyaWNlczpmdW5jdGlvbih0KXtjb25zdCBlPXRoaXMuY2FtZXJhLG49Mip6bi5SQUQyREVHKnQuYW5nbGUqdGhpcy5mb2N1cyxyPXRoaXMubWFwU2l6ZS53aWR0aC90aGlzLm1hcFNpemUuaGVpZ2h0LGk9dC5kaXN0YW5jZXx8ZS5mYXI7bj09PWUuZm92JiZyPT09ZS5hc3BlY3QmJmk9PT1lLmZhcnx8KGUuZm92PW4sZS5hc3BlY3Q9cixlLmZhcj1pLGUudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpKSxiaC5wcm90b3R5cGUudXBkYXRlTWF0cmljZXMuY2FsbCh0aGlzLHQpfX0pLF9oLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoeWgucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6X2gsaXNTcG90TGlnaHQ6ITAsY29weTpmdW5jdGlvbih0KXtyZXR1cm4geWgucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLHQpLHRoaXMuZGlzdGFuY2U9dC5kaXN0YW5jZSx0aGlzLmFuZ2xlPXQuYW5nbGUsdGhpcy5wZW51bWJyYT10LnBlbnVtYnJhLHRoaXMuZGVjYXk9dC5kZWNheSx0aGlzLnRhcmdldD10LnRhcmdldC5jbG9uZSgpLHRoaXMuc2hhZG93PXQuc2hhZG93LmNsb25lKCksdGhpc319KSxNaC5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKGJoLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOk1oLGlzUG9pbnRMaWdodFNoYWRvdzohMCx1cGRhdGVNYXRyaWNlczpmdW5jdGlvbih0LGU9MCl7Y29uc3Qgbj10aGlzLmNhbWVyYSxyPXRoaXMubWF0cml4LGk9dGhpcy5fbGlnaHRQb3NpdGlvbldvcmxkLG89dGhpcy5fbG9va1RhcmdldCxhPXRoaXMuX3Byb2pTY3JlZW5NYXRyaXg7aS5zZXRGcm9tTWF0cml4UG9zaXRpb24odC5tYXRyaXhXb3JsZCksbi5wb3NpdGlvbi5jb3B5KGkpLG8uY29weShuLnBvc2l0aW9uKSxvLmFkZCh0aGlzLl9jdWJlRGlyZWN0aW9uc1tlXSksbi51cC5jb3B5KHRoaXMuX2N1YmVVcHNbZV0pLG4ubG9va0F0KG8pLG4udXBkYXRlTWF0cml4V29ybGQoKSxyLm1ha2VUcmFuc2xhdGlvbigtaS54LC1pLnksLWkueiksYS5tdWx0aXBseU1hdHJpY2VzKG4ucHJvamVjdGlvbk1hdHJpeCxuLm1hdHJpeFdvcmxkSW52ZXJzZSksdGhpcy5fZnJ1c3R1bS5zZXRGcm9tUHJvamVjdGlvbk1hdHJpeChhKX19KSxTaC5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKHloLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlNoLGlzUG9pbnRMaWdodDohMCxjb3B5OmZ1bmN0aW9uKHQpe3JldHVybiB5aC5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsdCksdGhpcy5kaXN0YW5jZT10LmRpc3RhbmNlLHRoaXMuZGVjYXk9dC5kZWNheSx0aGlzLnNoYWRvdz10LnNoYWRvdy5jbG9uZSgpLHRoaXN9fSksVGgucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShiby5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpUaCxpc09ydGhvZ3JhcGhpY0NhbWVyYTohMCxjb3B5OmZ1bmN0aW9uKHQsZSl7cmV0dXJuIGJvLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyx0LGUpLHRoaXMubGVmdD10LmxlZnQsdGhpcy5yaWdodD10LnJpZ2h0LHRoaXMudG9wPXQudG9wLHRoaXMuYm90dG9tPXQuYm90dG9tLHRoaXMubmVhcj10Lm5lYXIsdGhpcy5mYXI9dC5mYXIsdGhpcy56b29tPXQuem9vbSx0aGlzLnZpZXc9bnVsbD09PXQudmlldz9udWxsOk9iamVjdC5hc3NpZ24oe30sdC52aWV3KSx0aGlzfSxzZXRWaWV3T2Zmc2V0OmZ1bmN0aW9uKHQsZSxuLHIsaSxvKXtudWxsPT09dGhpcy52aWV3JiYodGhpcy52aWV3PXtlbmFibGVkOiEwLGZ1bGxXaWR0aDoxLGZ1bGxIZWlnaHQ6MSxvZmZzZXRYOjAsb2Zmc2V0WTowLHdpZHRoOjEsaGVpZ2h0OjF9KSx0aGlzLnZpZXcuZW5hYmxlZD0hMCx0aGlzLnZpZXcuZnVsbFdpZHRoPXQsdGhpcy52aWV3LmZ1bGxIZWlnaHQ9ZSx0aGlzLnZpZXcub2Zmc2V0WD1uLHRoaXMudmlldy5vZmZzZXRZPXIsdGhpcy52aWV3LndpZHRoPWksdGhpcy52aWV3LmhlaWdodD1vLHRoaXMudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpfSxjbGVhclZpZXdPZmZzZXQ6ZnVuY3Rpb24oKXtudWxsIT09dGhpcy52aWV3JiYodGhpcy52aWV3LmVuYWJsZWQ9ITEpLHRoaXMudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpfSx1cGRhdGVQcm9qZWN0aW9uTWF0cml4OmZ1bmN0aW9uKCl7Y29uc3QgdD0odGhpcy5yaWdodC10aGlzLmxlZnQpLygyKnRoaXMuem9vbSksZT0odGhpcy50b3AtdGhpcy5ib3R0b20pLygyKnRoaXMuem9vbSksbj0odGhpcy5yaWdodCt0aGlzLmxlZnQpLzIscj0odGhpcy50b3ArdGhpcy5ib3R0b20pLzI7bGV0IGk9bi10LG89bit0LGE9citlLHM9ci1lO2lmKG51bGwhPT10aGlzLnZpZXcmJnRoaXMudmlldy5lbmFibGVkKXtjb25zdCB0PSh0aGlzLnJpZ2h0LXRoaXMubGVmdCkvdGhpcy52aWV3LmZ1bGxXaWR0aC90aGlzLnpvb20sZT0odGhpcy50b3AtdGhpcy5ib3R0b20pL3RoaXMudmlldy5mdWxsSGVpZ2h0L3RoaXMuem9vbTtpKz10KnRoaXMudmlldy5vZmZzZXRYLG89aSt0KnRoaXMudmlldy53aWR0aCxhLT1lKnRoaXMudmlldy5vZmZzZXRZLHM9YS1lKnRoaXMudmlldy5oZWlnaHR9dGhpcy5wcm9qZWN0aW9uTWF0cml4Lm1ha2VPcnRob2dyYXBoaWMoaSxvLGEscyx0aGlzLm5lYXIsdGhpcy5mYXIpLHRoaXMucHJvamVjdGlvbk1hdHJpeEludmVyc2UuY29weSh0aGlzLnByb2plY3Rpb25NYXRyaXgpLmludmVydCgpfSx0b0pTT046ZnVuY3Rpb24odCl7Y29uc3QgZT1Kci5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyx0KTtyZXR1cm4gZS5vYmplY3Quem9vbT10aGlzLnpvb20sZS5vYmplY3QubGVmdD10aGlzLmxlZnQsZS5vYmplY3QucmlnaHQ9dGhpcy5yaWdodCxlLm9iamVjdC50b3A9dGhpcy50b3AsZS5vYmplY3QuYm90dG9tPXRoaXMuYm90dG9tLGUub2JqZWN0Lm5lYXI9dGhpcy5uZWFyLGUub2JqZWN0LmZhcj10aGlzLmZhcixudWxsIT09dGhpcy52aWV3JiYoZS5vYmplY3Qudmlldz1PYmplY3QuYXNzaWduKHt9LHRoaXMudmlldykpLGV9fSksRWgucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShiaC5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpFaCxpc0RpcmVjdGlvbmFsTGlnaHRTaGFkb3c6ITAsdXBkYXRlTWF0cmljZXM6ZnVuY3Rpb24odCl7YmgucHJvdG90eXBlLnVwZGF0ZU1hdHJpY2VzLmNhbGwodGhpcyx0KX19KSxBaC5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKHloLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOkFoLGlzRGlyZWN0aW9uYWxMaWdodDohMCxjb3B5OmZ1bmN0aW9uKHQpe3JldHVybiB5aC5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsdCksdGhpcy50YXJnZXQ9dC50YXJnZXQuY2xvbmUoKSx0aGlzLnNoYWRvdz10LnNoYWRvdy5jbG9uZSgpLHRoaXN9fSksTGgucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZSh5aC5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpMaCxpc0FtYmllbnRMaWdodDohMH0pLFJoLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoeWgucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6UmgsaXNSZWN0QXJlYUxpZ2h0OiEwLGNvcHk6ZnVuY3Rpb24odCl7cmV0dXJuIHloLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyx0KSx0aGlzLndpZHRoPXQud2lkdGgsdGhpcy5oZWlnaHQ9dC5oZWlnaHQsdGhpc30sdG9KU09OOmZ1bmN0aW9uKHQpe2NvbnN0IGU9eWgucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMsdCk7cmV0dXJuIGUub2JqZWN0LndpZHRoPXRoaXMud2lkdGgsZS5vYmplY3QuaGVpZ2h0PXRoaXMuaGVpZ2h0LGV9fSk7Y2xhc3MgUGh7Y29uc3RydWN0b3IoKXtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImlzU3BoZXJpY2FsSGFybW9uaWNzM1wiLHt2YWx1ZTohMH0pLHRoaXMuY29lZmZpY2llbnRzPVtdO2ZvcihsZXQgdD0wO3Q8OTt0KyspdGhpcy5jb2VmZmljaWVudHMucHVzaChuZXcgS24pfXNldCh0KXtmb3IobGV0IGU9MDtlPDk7ZSsrKXRoaXMuY29lZmZpY2llbnRzW2VdLmNvcHkodFtlXSk7cmV0dXJuIHRoaXN9emVybygpe2ZvcihsZXQgdD0wO3Q8OTt0KyspdGhpcy5jb2VmZmljaWVudHNbdF0uc2V0KDAsMCwwKTtyZXR1cm4gdGhpc31nZXRBdCh0LGUpe2NvbnN0IG49dC54LHI9dC55LGk9dC56LG89dGhpcy5jb2VmZmljaWVudHM7cmV0dXJuIGUuY29weShvWzBdKS5tdWx0aXBseVNjYWxhciguMjgyMDk1KSxlLmFkZFNjYWxlZFZlY3RvcihvWzFdLC40ODg2MDMqciksZS5hZGRTY2FsZWRWZWN0b3Iob1syXSwuNDg4NjAzKmkpLGUuYWRkU2NhbGVkVmVjdG9yKG9bM10sLjQ4ODYwMypuKSxlLmFkZFNjYWxlZFZlY3RvcihvWzRdLG4qcioxLjA5MjU0OCksZS5hZGRTY2FsZWRWZWN0b3Iob1s1XSxyKmkqMS4wOTI1NDgpLGUuYWRkU2NhbGVkVmVjdG9yKG9bNl0sLjMxNTM5MiooMyppKmktMSkpLGUuYWRkU2NhbGVkVmVjdG9yKG9bN10sbippKjEuMDkyNTQ4KSxlLmFkZFNjYWxlZFZlY3RvcihvWzhdLC41NDYyNzQqKG4qbi1yKnIpKSxlfWdldElycmFkaWFuY2VBdCh0LGUpe2NvbnN0IG49dC54LHI9dC55LGk9dC56LG89dGhpcy5jb2VmZmljaWVudHM7cmV0dXJuIGUuY29weShvWzBdKS5tdWx0aXBseVNjYWxhciguODg2MjI3KSxlLmFkZFNjYWxlZFZlY3RvcihvWzFdLDEuMDIzMzI4KnIpLGUuYWRkU2NhbGVkVmVjdG9yKG9bMl0sMS4wMjMzMjgqaSksZS5hZGRTY2FsZWRWZWN0b3Iob1szXSwxLjAyMzMyOCpuKSxlLmFkZFNjYWxlZFZlY3RvcihvWzRdLC44NTgwODYqbipyKSxlLmFkZFNjYWxlZFZlY3RvcihvWzVdLC44NTgwODYqcippKSxlLmFkZFNjYWxlZFZlY3RvcihvWzZdLC43NDMxMjUqaSppLS4yNDc3MDgpLGUuYWRkU2NhbGVkVmVjdG9yKG9bN10sLjg1ODA4NipuKmkpLGUuYWRkU2NhbGVkVmVjdG9yKG9bOF0sLjQyOTA0MyoobipuLXIqcikpLGV9YWRkKHQpe2ZvcihsZXQgZT0wO2U8OTtlKyspdGhpcy5jb2VmZmljaWVudHNbZV0uYWRkKHQuY29lZmZpY2llbnRzW2VdKTtyZXR1cm4gdGhpc31hZGRTY2FsZWRTSCh0LGUpe2ZvcihsZXQgbj0wO248OTtuKyspdGhpcy5jb2VmZmljaWVudHNbbl0uYWRkU2NhbGVkVmVjdG9yKHQuY29lZmZpY2llbnRzW25dLGUpO3JldHVybiB0aGlzfXNjYWxlKHQpe2ZvcihsZXQgZT0wO2U8OTtlKyspdGhpcy5jb2VmZmljaWVudHNbZV0ubXVsdGlwbHlTY2FsYXIodCk7cmV0dXJuIHRoaXN9bGVycCh0LGUpe2ZvcihsZXQgbj0wO248OTtuKyspdGhpcy5jb2VmZmljaWVudHNbbl0ubGVycCh0LmNvZWZmaWNpZW50c1tuXSxlKTtyZXR1cm4gdGhpc31lcXVhbHModCl7Zm9yKGxldCBlPTA7ZTw5O2UrKylpZighdGhpcy5jb2VmZmljaWVudHNbZV0uZXF1YWxzKHQuY29lZmZpY2llbnRzW2VdKSlyZXR1cm4hMTtyZXR1cm4hMH1jb3B5KHQpe3JldHVybiB0aGlzLnNldCh0LmNvZWZmaWNpZW50cyl9Y2xvbmUoKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyl9ZnJvbUFycmF5KHQsZT0wKXtjb25zdCBuPXRoaXMuY29lZmZpY2llbnRzO2ZvcihsZXQgcj0wO3I8OTtyKyspbltyXS5mcm9tQXJyYXkodCxlKzMqcik7cmV0dXJuIHRoaXN9dG9BcnJheSh0PVtdLGU9MCl7Y29uc3Qgbj10aGlzLmNvZWZmaWNpZW50cztmb3IobGV0IHI9MDtyPDk7cisrKW5bcl0udG9BcnJheSh0LGUrMypyKTtyZXR1cm4gdH1zdGF0aWMgZ2V0QmFzaXNBdCh0LGUpe2NvbnN0IG49dC54LHI9dC55LGk9dC56O2VbMF09LjI4MjA5NSxlWzFdPS40ODg2MDMqcixlWzJdPS40ODg2MDMqaSxlWzNdPS40ODg2MDMqbixlWzRdPTEuMDkyNTQ4Km4qcixlWzVdPTEuMDkyNTQ4KnIqaSxlWzZdPS4zMTUzOTIqKDMqaSppLTEpLGVbN109MS4wOTI1NDgqbippLGVbOF09LjU0NjI3NCoobipuLXIqcil9fWZ1bmN0aW9uIENoKHQsZSl7eWguY2FsbCh0aGlzLHZvaWQgMCxlKSx0aGlzLnR5cGU9XCJMaWdodFByb2JlXCIsdGhpcy5zaD12b2lkIDAhPT10P3Q6bmV3IFBofWZ1bmN0aW9uIEloKHQpe0d1LmNhbGwodGhpcyx0KSx0aGlzLnRleHR1cmVzPXt9fUNoLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoeWgucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6Q2gsaXNMaWdodFByb2JlOiEwLGNvcHk6ZnVuY3Rpb24odCl7cmV0dXJuIHloLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyx0KSx0aGlzLnNoLmNvcHkodC5zaCksdGhpc30sZnJvbUpTT046ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuaW50ZW5zaXR5PXQuaW50ZW5zaXR5LHRoaXMuc2guZnJvbUFycmF5KHQuc2gpLHRoaXN9LHRvSlNPTjpmdW5jdGlvbih0KXtjb25zdCBlPXloLnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzLHQpO3JldHVybiBlLm9iamVjdC5zaD10aGlzLnNoLnRvQXJyYXkoKSxlfX0pLEloLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoR3UucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6SWgsbG9hZDpmdW5jdGlvbih0LGUsbixyKXtjb25zdCBpPXRoaXMsbz1uZXcga3UoaS5tYW5hZ2VyKTtvLnNldFBhdGgoaS5wYXRoKSxvLnNldFJlcXVlc3RIZWFkZXIoaS5yZXF1ZXN0SGVhZGVyKSxvLnNldFdpdGhDcmVkZW50aWFscyhpLndpdGhDcmVkZW50aWFscyksby5sb2FkKHQsKGZ1bmN0aW9uKG4pe3RyeXtlKGkucGFyc2UoSlNPTi5wYXJzZShuKSkpfWNhdGNoKGUpe3I/cihlKTpjb25zb2xlLmVycm9yKGUpLGkubWFuYWdlci5pdGVtRXJyb3IodCl9fSksbixyKX0scGFyc2U6ZnVuY3Rpb24odCl7Y29uc3QgZT10aGlzLnRleHR1cmVzO2Z1bmN0aW9uIG4odCl7cmV0dXJuIHZvaWQgMD09PWVbdF0mJmNvbnNvbGUud2FybihcIlRIUkVFLk1hdGVyaWFsTG9hZGVyOiBVbmRlZmluZWQgdGV4dHVyZVwiLHQpLGVbdF19Y29uc3Qgcj1uZXcgd3VbdC50eXBlXTtpZih2b2lkIDAhPT10LnV1aWQmJihyLnV1aWQ9dC51dWlkKSx2b2lkIDAhPT10Lm5hbWUmJihyLm5hbWU9dC5uYW1lKSx2b2lkIDAhPT10LmNvbG9yJiZ2b2lkIDAhPT1yLmNvbG9yJiZyLmNvbG9yLnNldEhleCh0LmNvbG9yKSx2b2lkIDAhPT10LnJvdWdobmVzcyYmKHIucm91Z2huZXNzPXQucm91Z2huZXNzKSx2b2lkIDAhPT10Lm1ldGFsbmVzcyYmKHIubWV0YWxuZXNzPXQubWV0YWxuZXNzKSx2b2lkIDAhPT10LnNoZWVuJiYoci5zaGVlbj0obmV3IHlpKS5zZXRIZXgodC5zaGVlbikpLHZvaWQgMCE9PXQuZW1pc3NpdmUmJnZvaWQgMCE9PXIuZW1pc3NpdmUmJnIuZW1pc3NpdmUuc2V0SGV4KHQuZW1pc3NpdmUpLHZvaWQgMCE9PXQuc3BlY3VsYXImJnZvaWQgMCE9PXIuc3BlY3VsYXImJnIuc3BlY3VsYXIuc2V0SGV4KHQuc3BlY3VsYXIpLHZvaWQgMCE9PXQuc2hpbmluZXNzJiYoci5zaGluaW5lc3M9dC5zaGluaW5lc3MpLHZvaWQgMCE9PXQuY2xlYXJjb2F0JiYoci5jbGVhcmNvYXQ9dC5jbGVhcmNvYXQpLHZvaWQgMCE9PXQuY2xlYXJjb2F0Um91Z2huZXNzJiYoci5jbGVhcmNvYXRSb3VnaG5lc3M9dC5jbGVhcmNvYXRSb3VnaG5lc3MpLHZvaWQgMCE9PXQuZm9nJiYoci5mb2c9dC5mb2cpLHZvaWQgMCE9PXQuZmxhdFNoYWRpbmcmJihyLmZsYXRTaGFkaW5nPXQuZmxhdFNoYWRpbmcpLHZvaWQgMCE9PXQuYmxlbmRpbmcmJihyLmJsZW5kaW5nPXQuYmxlbmRpbmcpLHZvaWQgMCE9PXQuY29tYmluZSYmKHIuY29tYmluZT10LmNvbWJpbmUpLHZvaWQgMCE9PXQuc2lkZSYmKHIuc2lkZT10LnNpZGUpLHZvaWQgMCE9PXQub3BhY2l0eSYmKHIub3BhY2l0eT10Lm9wYWNpdHkpLHZvaWQgMCE9PXQudHJhbnNwYXJlbnQmJihyLnRyYW5zcGFyZW50PXQudHJhbnNwYXJlbnQpLHZvaWQgMCE9PXQuYWxwaGFUZXN0JiYoci5hbHBoYVRlc3Q9dC5hbHBoYVRlc3QpLHZvaWQgMCE9PXQuZGVwdGhUZXN0JiYoci5kZXB0aFRlc3Q9dC5kZXB0aFRlc3QpLHZvaWQgMCE9PXQuZGVwdGhXcml0ZSYmKHIuZGVwdGhXcml0ZT10LmRlcHRoV3JpdGUpLHZvaWQgMCE9PXQuY29sb3JXcml0ZSYmKHIuY29sb3JXcml0ZT10LmNvbG9yV3JpdGUpLHZvaWQgMCE9PXQuc3RlbmNpbFdyaXRlJiYoci5zdGVuY2lsV3JpdGU9dC5zdGVuY2lsV3JpdGUpLHZvaWQgMCE9PXQuc3RlbmNpbFdyaXRlTWFzayYmKHIuc3RlbmNpbFdyaXRlTWFzaz10LnN0ZW5jaWxXcml0ZU1hc2spLHZvaWQgMCE9PXQuc3RlbmNpbEZ1bmMmJihyLnN0ZW5jaWxGdW5jPXQuc3RlbmNpbEZ1bmMpLHZvaWQgMCE9PXQuc3RlbmNpbFJlZiYmKHIuc3RlbmNpbFJlZj10LnN0ZW5jaWxSZWYpLHZvaWQgMCE9PXQuc3RlbmNpbEZ1bmNNYXNrJiYoci5zdGVuY2lsRnVuY01hc2s9dC5zdGVuY2lsRnVuY01hc2spLHZvaWQgMCE9PXQuc3RlbmNpbEZhaWwmJihyLnN0ZW5jaWxGYWlsPXQuc3RlbmNpbEZhaWwpLHZvaWQgMCE9PXQuc3RlbmNpbFpGYWlsJiYoci5zdGVuY2lsWkZhaWw9dC5zdGVuY2lsWkZhaWwpLHZvaWQgMCE9PXQuc3RlbmNpbFpQYXNzJiYoci5zdGVuY2lsWlBhc3M9dC5zdGVuY2lsWlBhc3MpLHZvaWQgMCE9PXQud2lyZWZyYW1lJiYoci53aXJlZnJhbWU9dC53aXJlZnJhbWUpLHZvaWQgMCE9PXQud2lyZWZyYW1lTGluZXdpZHRoJiYoci53aXJlZnJhbWVMaW5ld2lkdGg9dC53aXJlZnJhbWVMaW5ld2lkdGgpLHZvaWQgMCE9PXQud2lyZWZyYW1lTGluZWNhcCYmKHIud2lyZWZyYW1lTGluZWNhcD10LndpcmVmcmFtZUxpbmVjYXApLHZvaWQgMCE9PXQud2lyZWZyYW1lTGluZWpvaW4mJihyLndpcmVmcmFtZUxpbmVqb2luPXQud2lyZWZyYW1lTGluZWpvaW4pLHZvaWQgMCE9PXQucm90YXRpb24mJihyLnJvdGF0aW9uPXQucm90YXRpb24pLDEhPT10LmxpbmV3aWR0aCYmKHIubGluZXdpZHRoPXQubGluZXdpZHRoKSx2b2lkIDAhPT10LmRhc2hTaXplJiYoci5kYXNoU2l6ZT10LmRhc2hTaXplKSx2b2lkIDAhPT10LmdhcFNpemUmJihyLmdhcFNpemU9dC5nYXBTaXplKSx2b2lkIDAhPT10LnNjYWxlJiYoci5zY2FsZT10LnNjYWxlKSx2b2lkIDAhPT10LnBvbHlnb25PZmZzZXQmJihyLnBvbHlnb25PZmZzZXQ9dC5wb2x5Z29uT2Zmc2V0KSx2b2lkIDAhPT10LnBvbHlnb25PZmZzZXRGYWN0b3ImJihyLnBvbHlnb25PZmZzZXRGYWN0b3I9dC5wb2x5Z29uT2Zmc2V0RmFjdG9yKSx2b2lkIDAhPT10LnBvbHlnb25PZmZzZXRVbml0cyYmKHIucG9seWdvbk9mZnNldFVuaXRzPXQucG9seWdvbk9mZnNldFVuaXRzKSx2b2lkIDAhPT10LnNraW5uaW5nJiYoci5za2lubmluZz10LnNraW5uaW5nKSx2b2lkIDAhPT10Lm1vcnBoVGFyZ2V0cyYmKHIubW9ycGhUYXJnZXRzPXQubW9ycGhUYXJnZXRzKSx2b2lkIDAhPT10Lm1vcnBoTm9ybWFscyYmKHIubW9ycGhOb3JtYWxzPXQubW9ycGhOb3JtYWxzKSx2b2lkIDAhPT10LmRpdGhlcmluZyYmKHIuZGl0aGVyaW5nPXQuZGl0aGVyaW5nKSx2b2lkIDAhPT10LnZlcnRleFRhbmdlbnRzJiYoci52ZXJ0ZXhUYW5nZW50cz10LnZlcnRleFRhbmdlbnRzKSx2b2lkIDAhPT10LnZpc2libGUmJihyLnZpc2libGU9dC52aXNpYmxlKSx2b2lkIDAhPT10LnRvbmVNYXBwZWQmJihyLnRvbmVNYXBwZWQ9dC50b25lTWFwcGVkKSx2b2lkIDAhPT10LnVzZXJEYXRhJiYoci51c2VyRGF0YT10LnVzZXJEYXRhKSx2b2lkIDAhPT10LnZlcnRleENvbG9ycyYmKFwibnVtYmVyXCI9PXR5cGVvZiB0LnZlcnRleENvbG9ycz9yLnZlcnRleENvbG9ycz10LnZlcnRleENvbG9ycz4wOnIudmVydGV4Q29sb3JzPXQudmVydGV4Q29sb3JzKSx2b2lkIDAhPT10LnVuaWZvcm1zKWZvcihjb25zdCBlIGluIHQudW5pZm9ybXMpe2NvbnN0IGk9dC51bmlmb3Jtc1tlXTtzd2l0Y2goci51bmlmb3Jtc1tlXT17fSxpLnR5cGUpe2Nhc2VcInRcIjpyLnVuaWZvcm1zW2VdLnZhbHVlPW4oaS52YWx1ZSk7YnJlYWs7Y2FzZVwiY1wiOnIudW5pZm9ybXNbZV0udmFsdWU9KG5ldyB5aSkuc2V0SGV4KGkudmFsdWUpO2JyZWFrO2Nhc2VcInYyXCI6ci51bmlmb3Jtc1tlXS52YWx1ZT0obmV3IEduKS5mcm9tQXJyYXkoaS52YWx1ZSk7YnJlYWs7Y2FzZVwidjNcIjpyLnVuaWZvcm1zW2VdLnZhbHVlPShuZXcgS24pLmZyb21BcnJheShpLnZhbHVlKTticmVhaztjYXNlXCJ2NFwiOnIudW5pZm9ybXNbZV0udmFsdWU9KG5ldyBxbikuZnJvbUFycmF5KGkudmFsdWUpO2JyZWFrO2Nhc2VcIm0zXCI6ci51bmlmb3Jtc1tlXS52YWx1ZT0obmV3IEhuKS5mcm9tQXJyYXkoaS52YWx1ZSk7YnJlYWs7Y2FzZVwibTRcIjpyLnVuaWZvcm1zW2VdLnZhbHVlPShuZXcgVHIpLmZyb21BcnJheShpLnZhbHVlKTticmVhaztkZWZhdWx0OnIudW5pZm9ybXNbZV0udmFsdWU9aS52YWx1ZX19aWYodm9pZCAwIT09dC5kZWZpbmVzJiYoci5kZWZpbmVzPXQuZGVmaW5lcyksdm9pZCAwIT09dC52ZXJ0ZXhTaGFkZXImJihyLnZlcnRleFNoYWRlcj10LnZlcnRleFNoYWRlciksdm9pZCAwIT09dC5mcmFnbWVudFNoYWRlciYmKHIuZnJhZ21lbnRTaGFkZXI9dC5mcmFnbWVudFNoYWRlciksdm9pZCAwIT09dC5leHRlbnNpb25zKWZvcihjb25zdCBlIGluIHQuZXh0ZW5zaW9ucylyLmV4dGVuc2lvbnNbZV09dC5leHRlbnNpb25zW2VdO2lmKHZvaWQgMCE9PXQuc2hhZGluZyYmKHIuZmxhdFNoYWRpbmc9MT09PXQuc2hhZGluZyksdm9pZCAwIT09dC5zaXplJiYoci5zaXplPXQuc2l6ZSksdm9pZCAwIT09dC5zaXplQXR0ZW51YXRpb24mJihyLnNpemVBdHRlbnVhdGlvbj10LnNpemVBdHRlbnVhdGlvbiksdm9pZCAwIT09dC5tYXAmJihyLm1hcD1uKHQubWFwKSksdm9pZCAwIT09dC5tYXRjYXAmJihyLm1hdGNhcD1uKHQubWF0Y2FwKSksdm9pZCAwIT09dC5hbHBoYU1hcCYmKHIuYWxwaGFNYXA9bih0LmFscGhhTWFwKSksdm9pZCAwIT09dC5idW1wTWFwJiYoci5idW1wTWFwPW4odC5idW1wTWFwKSksdm9pZCAwIT09dC5idW1wU2NhbGUmJihyLmJ1bXBTY2FsZT10LmJ1bXBTY2FsZSksdm9pZCAwIT09dC5ub3JtYWxNYXAmJihyLm5vcm1hbE1hcD1uKHQubm9ybWFsTWFwKSksdm9pZCAwIT09dC5ub3JtYWxNYXBUeXBlJiYoci5ub3JtYWxNYXBUeXBlPXQubm9ybWFsTWFwVHlwZSksdm9pZCAwIT09dC5ub3JtYWxTY2FsZSl7bGV0IGU9dC5ub3JtYWxTY2FsZTshMT09PUFycmF5LmlzQXJyYXkoZSkmJihlPVtlLGVdKSxyLm5vcm1hbFNjYWxlPShuZXcgR24pLmZyb21BcnJheShlKX1yZXR1cm4gdm9pZCAwIT09dC5kaXNwbGFjZW1lbnRNYXAmJihyLmRpc3BsYWNlbWVudE1hcD1uKHQuZGlzcGxhY2VtZW50TWFwKSksdm9pZCAwIT09dC5kaXNwbGFjZW1lbnRTY2FsZSYmKHIuZGlzcGxhY2VtZW50U2NhbGU9dC5kaXNwbGFjZW1lbnRTY2FsZSksdm9pZCAwIT09dC5kaXNwbGFjZW1lbnRCaWFzJiYoci5kaXNwbGFjZW1lbnRCaWFzPXQuZGlzcGxhY2VtZW50Qmlhcyksdm9pZCAwIT09dC5yb3VnaG5lc3NNYXAmJihyLnJvdWdobmVzc01hcD1uKHQucm91Z2huZXNzTWFwKSksdm9pZCAwIT09dC5tZXRhbG5lc3NNYXAmJihyLm1ldGFsbmVzc01hcD1uKHQubWV0YWxuZXNzTWFwKSksdm9pZCAwIT09dC5lbWlzc2l2ZU1hcCYmKHIuZW1pc3NpdmVNYXA9bih0LmVtaXNzaXZlTWFwKSksdm9pZCAwIT09dC5lbWlzc2l2ZUludGVuc2l0eSYmKHIuZW1pc3NpdmVJbnRlbnNpdHk9dC5lbWlzc2l2ZUludGVuc2l0eSksdm9pZCAwIT09dC5zcGVjdWxhck1hcCYmKHIuc3BlY3VsYXJNYXA9bih0LnNwZWN1bGFyTWFwKSksdm9pZCAwIT09dC5lbnZNYXAmJihyLmVudk1hcD1uKHQuZW52TWFwKSksdm9pZCAwIT09dC5lbnZNYXBJbnRlbnNpdHkmJihyLmVudk1hcEludGVuc2l0eT10LmVudk1hcEludGVuc2l0eSksdm9pZCAwIT09dC5yZWZsZWN0aXZpdHkmJihyLnJlZmxlY3Rpdml0eT10LnJlZmxlY3Rpdml0eSksdm9pZCAwIT09dC5yZWZyYWN0aW9uUmF0aW8mJihyLnJlZnJhY3Rpb25SYXRpbz10LnJlZnJhY3Rpb25SYXRpbyksdm9pZCAwIT09dC5saWdodE1hcCYmKHIubGlnaHRNYXA9bih0LmxpZ2h0TWFwKSksdm9pZCAwIT09dC5saWdodE1hcEludGVuc2l0eSYmKHIubGlnaHRNYXBJbnRlbnNpdHk9dC5saWdodE1hcEludGVuc2l0eSksdm9pZCAwIT09dC5hb01hcCYmKHIuYW9NYXA9bih0LmFvTWFwKSksdm9pZCAwIT09dC5hb01hcEludGVuc2l0eSYmKHIuYW9NYXBJbnRlbnNpdHk9dC5hb01hcEludGVuc2l0eSksdm9pZCAwIT09dC5ncmFkaWVudE1hcCYmKHIuZ3JhZGllbnRNYXA9bih0LmdyYWRpZW50TWFwKSksdm9pZCAwIT09dC5jbGVhcmNvYXRNYXAmJihyLmNsZWFyY29hdE1hcD1uKHQuY2xlYXJjb2F0TWFwKSksdm9pZCAwIT09dC5jbGVhcmNvYXRSb3VnaG5lc3NNYXAmJihyLmNsZWFyY29hdFJvdWdobmVzc01hcD1uKHQuY2xlYXJjb2F0Um91Z2huZXNzTWFwKSksdm9pZCAwIT09dC5jbGVhcmNvYXROb3JtYWxNYXAmJihyLmNsZWFyY29hdE5vcm1hbE1hcD1uKHQuY2xlYXJjb2F0Tm9ybWFsTWFwKSksdm9pZCAwIT09dC5jbGVhcmNvYXROb3JtYWxTY2FsZSYmKHIuY2xlYXJjb2F0Tm9ybWFsU2NhbGU9KG5ldyBHbikuZnJvbUFycmF5KHQuY2xlYXJjb2F0Tm9ybWFsU2NhbGUpKSx2b2lkIDAhPT10LnRyYW5zbWlzc2lvbiYmKHIudHJhbnNtaXNzaW9uPXQudHJhbnNtaXNzaW9uKSx2b2lkIDAhPT10LnRyYW5zbWlzc2lvbk1hcCYmKHIudHJhbnNtaXNzaW9uTWFwPW4odC50cmFuc21pc3Npb25NYXApKSxyfSxzZXRUZXh0dXJlczpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy50ZXh0dXJlcz10LHRoaXN9fSk7Y29uc3QgT2g9e2RlY29kZVRleHQ6ZnVuY3Rpb24odCl7aWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIFRleHREZWNvZGVyKXJldHVybihuZXcgVGV4dERlY29kZXIpLmRlY29kZSh0KTtsZXQgZT1cIlwiO2ZvcihsZXQgbj0wLHI9dC5sZW5ndGg7bjxyO24rKyllKz1TdHJpbmcuZnJvbUNoYXJDb2RlKHRbbl0pO3RyeXtyZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGVzY2FwZShlKSl9Y2F0Y2godCl7cmV0dXJuIGV9fSxleHRyYWN0VXJsQmFzZTpmdW5jdGlvbih0KXtjb25zdCBlPXQubGFzdEluZGV4T2YoXCIvXCIpO3JldHVybi0xPT09ZT9cIi4vXCI6dC5zdWJzdHIoMCxlKzEpfX07ZnVuY3Rpb24gTmgoKXtxaS5jYWxsKHRoaXMpLHRoaXMudHlwZT1cIkluc3RhbmNlZEJ1ZmZlckdlb21ldHJ5XCIsdGhpcy5pbnN0YW5jZUNvdW50PTEvMH1mdW5jdGlvbiBEaCh0LGUsbixyKXtcIm51bWJlclwiPT10eXBlb2YgbiYmKHI9bixuPSExLGNvbnNvbGUuZXJyb3IoXCJUSFJFRS5JbnN0YW5jZWRCdWZmZXJBdHRyaWJ1dGU6IFRoZSBjb25zdHJ1Y3RvciBub3cgZXhwZWN0cyBub3JtYWxpemVkIGFzIHRoZSB0aGlyZCBhcmd1bWVudC5cIikpLFRpLmNhbGwodGhpcyx0LGUsbiksdGhpcy5tZXNoUGVyQXR0cmlidXRlPXJ8fDF9ZnVuY3Rpb24gQmgodCl7R3UuY2FsbCh0aGlzLHQpfU5oLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUocWkucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6TmgsaXNJbnN0YW5jZWRCdWZmZXJHZW9tZXRyeTohMCxjb3B5OmZ1bmN0aW9uKHQpe3JldHVybiBxaS5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsdCksdGhpcy5pbnN0YW5jZUNvdW50PXQuaW5zdGFuY2VDb3VudCx0aGlzfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3RvcikuY29weSh0aGlzKX0sdG9KU09OOmZ1bmN0aW9uKCl7Y29uc3QgdD1xaS5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7cmV0dXJuIHQuaW5zdGFuY2VDb3VudD10aGlzLmluc3RhbmNlQ291bnQsdC5pc0luc3RhbmNlZEJ1ZmZlckdlb21ldHJ5PSEwLHR9fSksRGgucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShUaS5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpEaCxpc0luc3RhbmNlZEJ1ZmZlckF0dHJpYnV0ZTohMCxjb3B5OmZ1bmN0aW9uKHQpe3JldHVybiBUaS5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsdCksdGhpcy5tZXNoUGVyQXR0cmlidXRlPXQubWVzaFBlckF0dHJpYnV0ZSx0aGlzfSx0b0pTT046ZnVuY3Rpb24oKXtjb25zdCB0PVRpLnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzKTtyZXR1cm4gdC5tZXNoUGVyQXR0cmlidXRlPXRoaXMubWVzaFBlckF0dHJpYnV0ZSx0LmlzSW5zdGFuY2VkQnVmZmVyQXR0cmlidXRlPSEwLHR9fSksQmgucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShHdS5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpCaCxsb2FkOmZ1bmN0aW9uKHQsZSxuLHIpe2NvbnN0IGk9dGhpcyxvPW5ldyBrdShpLm1hbmFnZXIpO28uc2V0UGF0aChpLnBhdGgpLG8uc2V0UmVxdWVzdEhlYWRlcihpLnJlcXVlc3RIZWFkZXIpLG8uc2V0V2l0aENyZWRlbnRpYWxzKGkud2l0aENyZWRlbnRpYWxzKSxvLmxvYWQodCwoZnVuY3Rpb24obil7dHJ5e2UoaS5wYXJzZShKU09OLnBhcnNlKG4pKSl9Y2F0Y2goZSl7cj9yKGUpOmNvbnNvbGUuZXJyb3IoZSksaS5tYW5hZ2VyLml0ZW1FcnJvcih0KX19KSxuLHIpfSxwYXJzZTpmdW5jdGlvbih0KXtjb25zdCBlPXt9LG49e307ZnVuY3Rpb24gcih0LHIpe2lmKHZvaWQgMCE9PWVbcl0pcmV0dXJuIGVbcl07Y29uc3QgaT10LmludGVybGVhdmVkQnVmZmVyc1tyXSxvPWZ1bmN0aW9uKHQsZSl7aWYodm9pZCAwIT09bltlXSlyZXR1cm4gbltlXTtjb25zdCByPXQuYXJyYXlCdWZmZXJzW2VdLGk9bmV3IFVpbnQzMkFycmF5KHIpLmJ1ZmZlcjtyZXR1cm4gbltlXT1pLGl9KHQsaS5idWZmZXIpLGE9bmV3IEdzKHppKGkudHlwZSxvKSxpLnN0cmlkZSk7cmV0dXJuIGEudXVpZD1pLnV1aWQsZVtyXT1hLGF9Y29uc3QgaT10LmlzSW5zdGFuY2VkQnVmZmVyR2VvbWV0cnk/bmV3IE5oOm5ldyBxaSxvPXQuZGF0YS5pbmRleDtpZih2b2lkIDAhPT1vKXtjb25zdCB0PXppKG8udHlwZSxvLmFycmF5KTtpLnNldEluZGV4KG5ldyBUaSh0LDEpKX1jb25zdCBhPXQuZGF0YS5hdHRyaWJ1dGVzO2Zvcihjb25zdCBlIGluIGEpe2NvbnN0IG49YVtlXTtsZXQgbztpZihuLmlzSW50ZXJsZWF2ZWRCdWZmZXJBdHRyaWJ1dGUpe289bmV3IGtzKHIodC5kYXRhLG4uZGF0YSksbi5pdGVtU2l6ZSxuLm9mZnNldCxuLm5vcm1hbGl6ZWQpfWVsc2V7Y29uc3QgdD16aShuLnR5cGUsbi5hcnJheSk7bz1uZXcobi5pc0luc3RhbmNlZEJ1ZmZlckF0dHJpYnV0ZT9EaDpUaSkodCxuLml0ZW1TaXplLG4ubm9ybWFsaXplZCl9dm9pZCAwIT09bi5uYW1lJiYoby5uYW1lPW4ubmFtZSksaS5zZXRBdHRyaWJ1dGUoZSxvKX1jb25zdCBzPXQuZGF0YS5tb3JwaEF0dHJpYnV0ZXM7aWYocylmb3IoY29uc3QgZSBpbiBzKXtjb25zdCBuPXNbZV0sbz1bXTtmb3IobGV0IGU9MCxpPW4ubGVuZ3RoO2U8aTtlKyspe2NvbnN0IGk9bltlXTtsZXQgYTtpZihpLmlzSW50ZXJsZWF2ZWRCdWZmZXJBdHRyaWJ1dGUpe2E9bmV3IGtzKHIodC5kYXRhLGkuZGF0YSksaS5pdGVtU2l6ZSxpLm9mZnNldCxpLm5vcm1hbGl6ZWQpfWVsc2V7YT1uZXcgVGkoemkoaS50eXBlLGkuYXJyYXkpLGkuaXRlbVNpemUsaS5ub3JtYWxpemVkKX12b2lkIDAhPT1pLm5hbWUmJihhLm5hbWU9aS5uYW1lKSxvLnB1c2goYSl9aS5tb3JwaEF0dHJpYnV0ZXNbZV09b310LmRhdGEubW9ycGhUYXJnZXRzUmVsYXRpdmUmJihpLm1vcnBoVGFyZ2V0c1JlbGF0aXZlPSEwKTtjb25zdCBjPXQuZGF0YS5ncm91cHN8fHQuZGF0YS5kcmF3Y2FsbHN8fHQuZGF0YS5vZmZzZXRzO2lmKHZvaWQgMCE9PWMpZm9yKGxldCB0PTAsZT1jLmxlbmd0aDt0IT09ZTsrK3Qpe2NvbnN0IGU9Y1t0XTtpLmFkZEdyb3VwKGUuc3RhcnQsZS5jb3VudCxlLm1hdGVyaWFsSW5kZXgpfWNvbnN0IGw9dC5kYXRhLmJvdW5kaW5nU3BoZXJlO2lmKHZvaWQgMCE9PWwpe2NvbnN0IHQ9bmV3IEtuO3ZvaWQgMCE9PWwuY2VudGVyJiZ0LmZyb21BcnJheShsLmNlbnRlciksaS5ib3VuZGluZ1NwaGVyZT1uZXcgZ3IodCxsLnJhZGl1cyl9cmV0dXJuIHQubmFtZSYmKGkubmFtZT10Lm5hbWUpLHQudXNlckRhdGEmJihpLnVzZXJEYXRhPXQudXNlckRhdGEpLGl9fSk7Y2xhc3MgRmggZXh0ZW5kcyBHdXtjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KX1sb2FkKHQsZSxuLHIpe2NvbnN0IGk9dGhpcyxvPVwiXCI9PT10aGlzLnBhdGg/T2guZXh0cmFjdFVybEJhc2UodCk6dGhpcy5wYXRoO3RoaXMucmVzb3VyY2VQYXRoPXRoaXMucmVzb3VyY2VQYXRofHxvO2NvbnN0IGE9bmV3IGt1KHRoaXMubWFuYWdlcik7YS5zZXRQYXRoKHRoaXMucGF0aCksYS5zZXRSZXF1ZXN0SGVhZGVyKHRoaXMucmVxdWVzdEhlYWRlciksYS5zZXRXaXRoQ3JlZGVudGlhbHModGhpcy53aXRoQ3JlZGVudGlhbHMpLGEubG9hZCh0LChmdW5jdGlvbihuKXtsZXQgbz1udWxsO3RyeXtvPUpTT04ucGFyc2Uobil9Y2F0Y2goZSl7cmV0dXJuIHZvaWQgMCE9PXImJnIoZSksdm9pZCBjb25zb2xlLmVycm9yKFwiVEhSRUU6T2JqZWN0TG9hZGVyOiBDYW4ndCBwYXJzZSBcIit0K1wiLlwiLGUubWVzc2FnZSl9Y29uc3QgYT1vLm1ldGFkYXRhO3ZvaWQgMCE9PWEmJnZvaWQgMCE9PWEudHlwZSYmXCJnZW9tZXRyeVwiIT09YS50eXBlLnRvTG93ZXJDYXNlKCk/aS5wYXJzZShvLGUpOmNvbnNvbGUuZXJyb3IoXCJUSFJFRS5PYmplY3RMb2FkZXI6IENhbid0IGxvYWQgXCIrdCl9KSxuLHIpfXBhcnNlKHQsZSl7Y29uc3Qgbj10aGlzLnBhcnNlQW5pbWF0aW9ucyh0LmFuaW1hdGlvbnMpLHI9dGhpcy5wYXJzZVNoYXBlcyh0LnNoYXBlcyksaT10aGlzLnBhcnNlR2VvbWV0cmllcyh0Lmdlb21ldHJpZXMsciksbz10aGlzLnBhcnNlSW1hZ2VzKHQuaW1hZ2VzLChmdW5jdGlvbigpe3ZvaWQgMCE9PWUmJmUoYyl9KSksYT10aGlzLnBhcnNlVGV4dHVyZXModC50ZXh0dXJlcyxvKSxzPXRoaXMucGFyc2VNYXRlcmlhbHModC5tYXRlcmlhbHMsYSksYz10aGlzLnBhcnNlT2JqZWN0KHQub2JqZWN0LGkscyxuKSxsPXRoaXMucGFyc2VTa2VsZXRvbnModC5za2VsZXRvbnMsYyk7aWYodGhpcy5iaW5kU2tlbGV0b25zKGMsbCksdm9pZCAwIT09ZSl7bGV0IHQ9ITE7Zm9yKGNvbnN0IGUgaW4gbylpZihvW2VdaW5zdGFuY2VvZiBIVE1MSW1hZ2VFbGVtZW50KXt0PSEwO2JyZWFrfSExPT09dCYmZShjKX1yZXR1cm4gY31wYXJzZVNoYXBlcyh0KXtjb25zdCBlPXt9O2lmKHZvaWQgMCE9PXQpZm9yKGxldCBuPTAscj10Lmxlbmd0aDtuPHI7bisrKXtjb25zdCByPShuZXcgdmgpLmZyb21KU09OKHRbbl0pO2Vbci51dWlkXT1yfXJldHVybiBlfXBhcnNlU2tlbGV0b25zKHQsZSl7Y29uc3Qgbj17fSxyPXt9O2lmKGUudHJhdmVyc2UoKGZ1bmN0aW9uKHQpe3QuaXNCb25lJiYoclt0LnV1aWRdPXQpfSkpLHZvaWQgMCE9PXQpZm9yKGxldCBlPTAsaT10Lmxlbmd0aDtlPGk7ZSsrKXtjb25zdCBpPShuZXcgZGMpLmZyb21KU09OKHRbZV0scik7bltpLnV1aWRdPWl9cmV0dXJuIG59cGFyc2VHZW9tZXRyaWVzKHQsZSl7Y29uc3Qgbj17fTtsZXQgcjtpZih2b2lkIDAhPT10KXtjb25zdCBpPW5ldyBCaDtmb3IobGV0IG89MCxhPXQubGVuZ3RoO288YTtvKyspe2xldCBhO2NvbnN0IHM9dFtvXTtzd2l0Y2gocy50eXBlKXtjYXNlXCJQbGFuZUdlb21ldHJ5XCI6Y2FzZVwiUGxhbmVCdWZmZXJHZW9tZXRyeVwiOmE9bmV3IHV1W3MudHlwZV0ocy53aWR0aCxzLmhlaWdodCxzLndpZHRoU2VnbWVudHMscy5oZWlnaHRTZWdtZW50cyk7YnJlYWs7Y2FzZVwiQm94R2VvbWV0cnlcIjpjYXNlXCJCb3hCdWZmZXJHZW9tZXRyeVwiOmNhc2VcIkN1YmVHZW9tZXRyeVwiOmE9bmV3IHV1W3MudHlwZV0ocy53aWR0aCxzLmhlaWdodCxzLmRlcHRoLHMud2lkdGhTZWdtZW50cyxzLmhlaWdodFNlZ21lbnRzLHMuZGVwdGhTZWdtZW50cyk7YnJlYWs7Y2FzZVwiQ2lyY2xlR2VvbWV0cnlcIjpjYXNlXCJDaXJjbGVCdWZmZXJHZW9tZXRyeVwiOmE9bmV3IHV1W3MudHlwZV0ocy5yYWRpdXMscy5zZWdtZW50cyxzLnRoZXRhU3RhcnQscy50aGV0YUxlbmd0aCk7YnJlYWs7Y2FzZVwiQ3lsaW5kZXJHZW9tZXRyeVwiOmNhc2VcIkN5bGluZGVyQnVmZmVyR2VvbWV0cnlcIjphPW5ldyB1dVtzLnR5cGVdKHMucmFkaXVzVG9wLHMucmFkaXVzQm90dG9tLHMuaGVpZ2h0LHMucmFkaWFsU2VnbWVudHMscy5oZWlnaHRTZWdtZW50cyxzLm9wZW5FbmRlZCxzLnRoZXRhU3RhcnQscy50aGV0YUxlbmd0aCk7YnJlYWs7Y2FzZVwiQ29uZUdlb21ldHJ5XCI6Y2FzZVwiQ29uZUJ1ZmZlckdlb21ldHJ5XCI6YT1uZXcgdXVbcy50eXBlXShzLnJhZGl1cyxzLmhlaWdodCxzLnJhZGlhbFNlZ21lbnRzLHMuaGVpZ2h0U2VnbWVudHMscy5vcGVuRW5kZWQscy50aGV0YVN0YXJ0LHMudGhldGFMZW5ndGgpO2JyZWFrO2Nhc2VcIlNwaGVyZUdlb21ldHJ5XCI6Y2FzZVwiU3BoZXJlQnVmZmVyR2VvbWV0cnlcIjphPW5ldyB1dVtzLnR5cGVdKHMucmFkaXVzLHMud2lkdGhTZWdtZW50cyxzLmhlaWdodFNlZ21lbnRzLHMucGhpU3RhcnQscy5waGlMZW5ndGgscy50aGV0YVN0YXJ0LHMudGhldGFMZW5ndGgpO2JyZWFrO2Nhc2VcIkRvZGVjYWhlZHJvbkdlb21ldHJ5XCI6Y2FzZVwiRG9kZWNhaGVkcm9uQnVmZmVyR2VvbWV0cnlcIjpjYXNlXCJJY29zYWhlZHJvbkdlb21ldHJ5XCI6Y2FzZVwiSWNvc2FoZWRyb25CdWZmZXJHZW9tZXRyeVwiOmNhc2VcIk9jdGFoZWRyb25HZW9tZXRyeVwiOmNhc2VcIk9jdGFoZWRyb25CdWZmZXJHZW9tZXRyeVwiOmNhc2VcIlRldHJhaGVkcm9uR2VvbWV0cnlcIjpjYXNlXCJUZXRyYWhlZHJvbkJ1ZmZlckdlb21ldHJ5XCI6YT1uZXcgdXVbcy50eXBlXShzLnJhZGl1cyxzLmRldGFpbCk7YnJlYWs7Y2FzZVwiUmluZ0dlb21ldHJ5XCI6Y2FzZVwiUmluZ0J1ZmZlckdlb21ldHJ5XCI6YT1uZXcgdXVbcy50eXBlXShzLmlubmVyUmFkaXVzLHMub3V0ZXJSYWRpdXMscy50aGV0YVNlZ21lbnRzLHMucGhpU2VnbWVudHMscy50aGV0YVN0YXJ0LHMudGhldGFMZW5ndGgpO2JyZWFrO2Nhc2VcIlRvcnVzR2VvbWV0cnlcIjpjYXNlXCJUb3J1c0J1ZmZlckdlb21ldHJ5XCI6YT1uZXcgdXVbcy50eXBlXShzLnJhZGl1cyxzLnR1YmUscy5yYWRpYWxTZWdtZW50cyxzLnR1YnVsYXJTZWdtZW50cyxzLmFyYyk7YnJlYWs7Y2FzZVwiVG9ydXNLbm90R2VvbWV0cnlcIjpjYXNlXCJUb3J1c0tub3RCdWZmZXJHZW9tZXRyeVwiOmE9bmV3IHV1W3MudHlwZV0ocy5yYWRpdXMscy50dWJlLHMudHVidWxhclNlZ21lbnRzLHMucmFkaWFsU2VnbWVudHMscy5wLHMucSk7YnJlYWs7Y2FzZVwiVHViZUdlb21ldHJ5XCI6Y2FzZVwiVHViZUJ1ZmZlckdlb21ldHJ5XCI6YT1uZXcgdXVbcy50eXBlXSgobmV3IGZoW3MucGF0aC50eXBlXSkuZnJvbUpTT04ocy5wYXRoKSxzLnR1YnVsYXJTZWdtZW50cyxzLnJhZGl1cyxzLnJhZGlhbFNlZ21lbnRzLHMuY2xvc2VkKTticmVhaztjYXNlXCJMYXRoZUdlb21ldHJ5XCI6Y2FzZVwiTGF0aGVCdWZmZXJHZW9tZXRyeVwiOmE9bmV3IHV1W3MudHlwZV0ocy5wb2ludHMscy5zZWdtZW50cyxzLnBoaVN0YXJ0LHMucGhpTGVuZ3RoKTticmVhaztjYXNlXCJQb2x5aGVkcm9uR2VvbWV0cnlcIjpjYXNlXCJQb2x5aGVkcm9uQnVmZmVyR2VvbWV0cnlcIjphPW5ldyB1dVtzLnR5cGVdKHMudmVydGljZXMscy5pbmRpY2VzLHMucmFkaXVzLHMuZGV0YWlscyk7YnJlYWs7Y2FzZVwiU2hhcGVHZW9tZXRyeVwiOmNhc2VcIlNoYXBlQnVmZmVyR2VvbWV0cnlcIjpyPVtdO2ZvcihsZXQgdD0wLG49cy5zaGFwZXMubGVuZ3RoO3Q8bjt0Kyspe2NvbnN0IG49ZVtzLnNoYXBlc1t0XV07ci5wdXNoKG4pfWE9bmV3IHV1W3MudHlwZV0ocixzLmN1cnZlU2VnbWVudHMpO2JyZWFrO2Nhc2VcIkV4dHJ1ZGVHZW9tZXRyeVwiOmNhc2VcIkV4dHJ1ZGVCdWZmZXJHZW9tZXRyeVwiOnI9W107Zm9yKGxldCB0PTAsbj1zLnNoYXBlcy5sZW5ndGg7dDxuO3QrKyl7Y29uc3Qgbj1lW3Muc2hhcGVzW3RdXTtyLnB1c2gobil9Y29uc3QgdD1zLm9wdGlvbnMuZXh0cnVkZVBhdGg7dm9pZCAwIT09dCYmKHMub3B0aW9ucy5leHRydWRlUGF0aD0obmV3IGZoW3QudHlwZV0pLmZyb21KU09OKHQpKSxhPW5ldyB1dVtzLnR5cGVdKHIscy5vcHRpb25zKTticmVhaztjYXNlXCJCdWZmZXJHZW9tZXRyeVwiOmNhc2VcIkluc3RhbmNlZEJ1ZmZlckdlb21ldHJ5XCI6YT1pLnBhcnNlKHMpO2JyZWFrO2Nhc2VcIkdlb21ldHJ5XCI6Y29uc29sZS5lcnJvcignVEhSRUUuT2JqZWN0TG9hZGVyOiBMb2FkaW5nIFwiR2VvbWV0cnlcIiBpcyBub3Qgc3VwcG9ydGVkIGFueW1vcmUuJyk7YnJlYWs7ZGVmYXVsdDpjb25zb2xlLndhcm4oJ1RIUkVFLk9iamVjdExvYWRlcjogVW5zdXBwb3J0ZWQgZ2VvbWV0cnkgdHlwZSBcIicrcy50eXBlKydcIicpO2NvbnRpbnVlfWEudXVpZD1zLnV1aWQsdm9pZCAwIT09cy5uYW1lJiYoYS5uYW1lPXMubmFtZSksITA9PT1hLmlzQnVmZmVyR2VvbWV0cnkmJnZvaWQgMCE9PXMudXNlckRhdGEmJihhLnVzZXJEYXRhPXMudXNlckRhdGEpLG5bcy51dWlkXT1hfX1yZXR1cm4gbn1wYXJzZU1hdGVyaWFscyh0LGUpe2NvbnN0IG49e30scj17fTtpZih2b2lkIDAhPT10KXtjb25zdCBpPW5ldyBJaDtpLnNldFRleHR1cmVzKGUpO2ZvcihsZXQgZT0wLG89dC5sZW5ndGg7ZTxvO2UrKyl7Y29uc3Qgbz10W2VdO2lmKFwiTXVsdGlNYXRlcmlhbFwiPT09by50eXBlKXtjb25zdCB0PVtdO2ZvcihsZXQgZT0wO2U8by5tYXRlcmlhbHMubGVuZ3RoO2UrKyl7Y29uc3Qgcj1vLm1hdGVyaWFsc1tlXTt2b2lkIDA9PT1uW3IudXVpZF0mJihuW3IudXVpZF09aS5wYXJzZShyKSksdC5wdXNoKG5bci51dWlkXSl9cltvLnV1aWRdPXR9ZWxzZSB2b2lkIDA9PT1uW28udXVpZF0mJihuW28udXVpZF09aS5wYXJzZShvKSkscltvLnV1aWRdPW5bby51dWlkXX19cmV0dXJuIHJ9cGFyc2VBbmltYXRpb25zKHQpe2NvbnN0IGU9e307aWYodm9pZCAwIT09dClmb3IobGV0IG49MDtuPHQubGVuZ3RoO24rKyl7Y29uc3Qgcj10W25dLGk9RHUucGFyc2Uocik7ZVtpLnV1aWRdPWl9cmV0dXJuIGV9cGFyc2VJbWFnZXModCxlKXtjb25zdCBuPXRoaXMscj17fTtsZXQgaTtmdW5jdGlvbiBvKHQpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiB0KXtjb25zdCBlPXQ7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBuLm1hbmFnZXIuaXRlbVN0YXJ0KHQpLGkubG9hZCh0LChmdW5jdGlvbigpe24ubWFuYWdlci5pdGVtRW5kKHQpfSksdm9pZCAwLChmdW5jdGlvbigpe24ubWFuYWdlci5pdGVtRXJyb3IodCksbi5tYW5hZ2VyLml0ZW1FbmQodCl9KSl9KC9eKFxcL1xcLyl8KFthLXpdKzooXFwvXFwvKT8pL2kudGVzdChlKT9lOm4ucmVzb3VyY2VQYXRoK2UpfXJldHVybiB0LmRhdGE/e2RhdGE6emkodC50eXBlLHQuZGF0YSksd2lkdGg6dC53aWR0aCxoZWlnaHQ6dC5oZWlnaHR9Om51bGx9aWYodm9pZCAwIT09dCYmdC5sZW5ndGg+MCl7Y29uc3Qgbj1uZXcgVXUoZSk7aT1uZXcgV3UobiksaS5zZXRDcm9zc09yaWdpbih0aGlzLmNyb3NzT3JpZ2luKTtmb3IobGV0IGU9MCxuPXQubGVuZ3RoO2U8bjtlKyspe2NvbnN0IG49dFtlXSxpPW4udXJsO2lmKEFycmF5LmlzQXJyYXkoaSkpe3Jbbi51dWlkXT1bXTtmb3IobGV0IHQ9MCxlPWkubGVuZ3RoO3Q8ZTt0Kyspe2NvbnN0IGU9byhpW3RdKTtudWxsIT09ZSYmKGUgaW5zdGFuY2VvZiBIVE1MSW1hZ2VFbGVtZW50P3Jbbi51dWlkXS5wdXNoKGUpOnJbbi51dWlkXS5wdXNoKG5ldyBUbyhlLmRhdGEsZS53aWR0aCxlLmhlaWdodCkpKX19ZWxzZXtjb25zdCB0PW8obi51cmwpO251bGwhPT10JiYocltuLnV1aWRdPXQpfX19cmV0dXJuIHJ9cGFyc2VUZXh0dXJlcyh0LGUpe2Z1bmN0aW9uIG4odCxlKXtyZXR1cm5cIm51bWJlclwiPT10eXBlb2YgdD90Oihjb25zb2xlLndhcm4oXCJUSFJFRS5PYmplY3RMb2FkZXIucGFyc2VUZXh0dXJlOiBDb25zdGFudCBzaG91bGQgYmUgaW4gbnVtZXJpYyBmb3JtLlwiLHQpLGVbdF0pfWNvbnN0IHI9e307aWYodm9pZCAwIT09dClmb3IobGV0IGk9MCxvPXQubGVuZ3RoO2k8bztpKyspe2NvbnN0IG89dFtpXTtsZXQgYTt2b2lkIDA9PT1vLmltYWdlJiZjb25zb2xlLndhcm4oJ1RIUkVFLk9iamVjdExvYWRlcjogTm8gXCJpbWFnZVwiIHNwZWNpZmllZCBmb3InLG8udXVpZCksdm9pZCAwPT09ZVtvLmltYWdlXSYmY29uc29sZS53YXJuKFwiVEhSRUUuT2JqZWN0TG9hZGVyOiBVbmRlZmluZWQgaW1hZ2VcIixvLmltYWdlKTtjb25zdCBzPWVbby5pbWFnZV07QXJyYXkuaXNBcnJheShzKT8oYT1uZXcgTW8ocyksNj09PXMubGVuZ3RoJiYoYS5uZWVkc1VwZGF0ZT0hMCkpOihhPXMmJnMuZGF0YT9uZXcgVG8ocy5kYXRhLHMud2lkdGgscy5oZWlnaHQpOm5ldyBXbihzKSxzJiYoYS5uZWVkc1VwZGF0ZT0hMCkpLGEudXVpZD1vLnV1aWQsdm9pZCAwIT09by5uYW1lJiYoYS5uYW1lPW8ubmFtZSksdm9pZCAwIT09by5tYXBwaW5nJiYoYS5tYXBwaW5nPW4oby5tYXBwaW5nLFVoKSksdm9pZCAwIT09by5vZmZzZXQmJmEub2Zmc2V0LmZyb21BcnJheShvLm9mZnNldCksdm9pZCAwIT09by5yZXBlYXQmJmEucmVwZWF0LmZyb21BcnJheShvLnJlcGVhdCksdm9pZCAwIT09by5jZW50ZXImJmEuY2VudGVyLmZyb21BcnJheShvLmNlbnRlciksdm9pZCAwIT09by5yb3RhdGlvbiYmKGEucm90YXRpb249by5yb3RhdGlvbiksdm9pZCAwIT09by53cmFwJiYoYS53cmFwUz1uKG8ud3JhcFswXSx6aCksYS53cmFwVD1uKG8ud3JhcFsxXSx6aCkpLHZvaWQgMCE9PW8uZm9ybWF0JiYoYS5mb3JtYXQ9by5mb3JtYXQpLHZvaWQgMCE9PW8udHlwZSYmKGEudHlwZT1vLnR5cGUpLHZvaWQgMCE9PW8uZW5jb2RpbmcmJihhLmVuY29kaW5nPW8uZW5jb2RpbmcpLHZvaWQgMCE9PW8ubWluRmlsdGVyJiYoYS5taW5GaWx0ZXI9bihvLm1pbkZpbHRlcixHaCkpLHZvaWQgMCE9PW8ubWFnRmlsdGVyJiYoYS5tYWdGaWx0ZXI9bihvLm1hZ0ZpbHRlcixHaCkpLHZvaWQgMCE9PW8uYW5pc290cm9weSYmKGEuYW5pc290cm9weT1vLmFuaXNvdHJvcHkpLHZvaWQgMCE9PW8uZmxpcFkmJihhLmZsaXBZPW8uZmxpcFkpLHZvaWQgMCE9PW8ucHJlbXVsdGlwbHlBbHBoYSYmKGEucHJlbXVsdGlwbHlBbHBoYT1vLnByZW11bHRpcGx5QWxwaGEpLHZvaWQgMCE9PW8udW5wYWNrQWxpZ25tZW50JiYoYS51bnBhY2tBbGlnbm1lbnQ9by51bnBhY2tBbGlnbm1lbnQpLHJbby51dWlkXT1hfXJldHVybiByfXBhcnNlT2JqZWN0KHQsZSxuLHIpe2xldCBpLG8sYTtmdW5jdGlvbiBzKHQpe3JldHVybiB2b2lkIDA9PT1lW3RdJiZjb25zb2xlLndhcm4oXCJUSFJFRS5PYmplY3RMb2FkZXI6IFVuZGVmaW5lZCBnZW9tZXRyeVwiLHQpLGVbdF19ZnVuY3Rpb24gYyh0KXtpZih2b2lkIDAhPT10KXtpZihBcnJheS5pc0FycmF5KHQpKXtjb25zdCBlPVtdO2ZvcihsZXQgcj0wLGk9dC5sZW5ndGg7cjxpO3IrKyl7Y29uc3QgaT10W3JdO3ZvaWQgMD09PW5baV0mJmNvbnNvbGUud2FybihcIlRIUkVFLk9iamVjdExvYWRlcjogVW5kZWZpbmVkIG1hdGVyaWFsXCIsaSksZS5wdXNoKG5baV0pfXJldHVybiBlfXJldHVybiB2b2lkIDA9PT1uW3RdJiZjb25zb2xlLndhcm4oXCJUSFJFRS5PYmplY3RMb2FkZXI6IFVuZGVmaW5lZCBtYXRlcmlhbFwiLHQpLG5bdF19fXN3aXRjaCh0LnR5cGUpe2Nhc2VcIlNjZW5lXCI6aT1uZXcgenMsdm9pZCAwIT09dC5iYWNrZ3JvdW5kJiZOdW1iZXIuaXNJbnRlZ2VyKHQuYmFja2dyb3VuZCkmJihpLmJhY2tncm91bmQ9bmV3IHlpKHQuYmFja2dyb3VuZCkpLHZvaWQgMCE9PXQuZm9nJiYoXCJGb2dcIj09PXQuZm9nLnR5cGU/aS5mb2c9bmV3IFVzKHQuZm9nLmNvbG9yLHQuZm9nLm5lYXIsdC5mb2cuZmFyKTpcIkZvZ0V4cDJcIj09PXQuZm9nLnR5cGUmJihpLmZvZz1uZXcgRnModC5mb2cuY29sb3IsdC5mb2cuZGVuc2l0eSkpKTticmVhaztjYXNlXCJQZXJzcGVjdGl2ZUNhbWVyYVwiOmk9bmV3IHdvKHQuZm92LHQuYXNwZWN0LHQubmVhcix0LmZhciksdm9pZCAwIT09dC5mb2N1cyYmKGkuZm9jdXM9dC5mb2N1cyksdm9pZCAwIT09dC56b29tJiYoaS56b29tPXQuem9vbSksdm9pZCAwIT09dC5maWxtR2F1Z2UmJihpLmZpbG1HYXVnZT10LmZpbG1HYXVnZSksdm9pZCAwIT09dC5maWxtT2Zmc2V0JiYoaS5maWxtT2Zmc2V0PXQuZmlsbU9mZnNldCksdm9pZCAwIT09dC52aWV3JiYoaS52aWV3PU9iamVjdC5hc3NpZ24oe30sdC52aWV3KSk7YnJlYWs7Y2FzZVwiT3J0aG9ncmFwaGljQ2FtZXJhXCI6aT1uZXcgVGgodC5sZWZ0LHQucmlnaHQsdC50b3AsdC5ib3R0b20sdC5uZWFyLHQuZmFyKSx2b2lkIDAhPT10Lnpvb20mJihpLnpvb209dC56b29tKSx2b2lkIDAhPT10LnZpZXcmJihpLnZpZXc9T2JqZWN0LmFzc2lnbih7fSx0LnZpZXcpKTticmVhaztjYXNlXCJBbWJpZW50TGlnaHRcIjppPW5ldyBMaCh0LmNvbG9yLHQuaW50ZW5zaXR5KTticmVhaztjYXNlXCJEaXJlY3Rpb25hbExpZ2h0XCI6aT1uZXcgQWgodC5jb2xvcix0LmludGVuc2l0eSk7YnJlYWs7Y2FzZVwiUG9pbnRMaWdodFwiOmk9bmV3IFNoKHQuY29sb3IsdC5pbnRlbnNpdHksdC5kaXN0YW5jZSx0LmRlY2F5KTticmVhaztjYXNlXCJSZWN0QXJlYUxpZ2h0XCI6aT1uZXcgUmgodC5jb2xvcix0LmludGVuc2l0eSx0LndpZHRoLHQuaGVpZ2h0KTticmVhaztjYXNlXCJTcG90TGlnaHRcIjppPW5ldyBfaCh0LmNvbG9yLHQuaW50ZW5zaXR5LHQuZGlzdGFuY2UsdC5hbmdsZSx0LnBlbnVtYnJhLHQuZGVjYXkpO2JyZWFrO2Nhc2VcIkhlbWlzcGhlcmVMaWdodFwiOmk9bmV3IHhoKHQuY29sb3IsdC5ncm91bmRDb2xvcix0LmludGVuc2l0eSk7YnJlYWs7Y2FzZVwiTGlnaHRQcm9iZVwiOmk9KG5ldyBDaCkuZnJvbUpTT04odCk7YnJlYWs7Y2FzZVwiU2tpbm5lZE1lc2hcIjpvPXModC5nZW9tZXRyeSksYT1jKHQubWF0ZXJpYWwpLGk9bmV3IGNjKG8sYSksdm9pZCAwIT09dC5iaW5kTW9kZSYmKGkuYmluZE1vZGU9dC5iaW5kTW9kZSksdm9pZCAwIT09dC5iaW5kTWF0cml4JiZpLmJpbmRNYXRyaXguZnJvbUFycmF5KHQuYmluZE1hdHJpeCksdm9pZCAwIT09dC5za2VsZXRvbiYmKGkuc2tlbGV0b249dC5za2VsZXRvbik7YnJlYWs7Y2FzZVwiTWVzaFwiOm89cyh0Lmdlb21ldHJ5KSxhPWModC5tYXRlcmlhbCksaT1uZXcgaG8obyxhKTticmVhaztjYXNlXCJJbnN0YW5jZWRNZXNoXCI6bz1zKHQuZ2VvbWV0cnkpLGE9Yyh0Lm1hdGVyaWFsKTtjb25zdCBlPXQuY291bnQsbj10Lmluc3RhbmNlTWF0cml4O2k9bmV3IHZjKG8sYSxlKSxpLmluc3RhbmNlTWF0cml4PW5ldyBUaShuZXcgRmxvYXQzMkFycmF5KG4uYXJyYXkpLDE2KTticmVhaztjYXNlXCJMT0RcIjppPW5ldyBzYzticmVhaztjYXNlXCJMaW5lXCI6aT1uZXcgU2Mocyh0Lmdlb21ldHJ5KSxjKHQubWF0ZXJpYWwpLHQubW9kZSk7YnJlYWs7Y2FzZVwiTGluZUxvb3BcIjppPW5ldyBMYyhzKHQuZ2VvbWV0cnkpLGModC5tYXRlcmlhbCkpO2JyZWFrO2Nhc2VcIkxpbmVTZWdtZW50c1wiOmk9bmV3IEFjKHModC5nZW9tZXRyeSksYyh0Lm1hdGVyaWFsKSk7YnJlYWs7Y2FzZVwiUG9pbnRDbG91ZFwiOmNhc2VcIlBvaW50c1wiOmk9bmV3IE5jKHModC5nZW9tZXRyeSksYyh0Lm1hdGVyaWFsKSk7YnJlYWs7Y2FzZVwiU3ByaXRlXCI6aT1uZXcgcmMoYyh0Lm1hdGVyaWFsKSk7YnJlYWs7Y2FzZVwiR3JvdXBcIjppPW5ldyBDczticmVhaztjYXNlXCJCb25lXCI6aT1uZXcgbGM7YnJlYWs7ZGVmYXVsdDppPW5ldyBKcn1pZihpLnV1aWQ9dC51dWlkLHZvaWQgMCE9PXQubmFtZSYmKGkubmFtZT10Lm5hbWUpLHZvaWQgMCE9PXQubWF0cml4PyhpLm1hdHJpeC5mcm9tQXJyYXkodC5tYXRyaXgpLHZvaWQgMCE9PXQubWF0cml4QXV0b1VwZGF0ZSYmKGkubWF0cml4QXV0b1VwZGF0ZT10Lm1hdHJpeEF1dG9VcGRhdGUpLGkubWF0cml4QXV0b1VwZGF0ZSYmaS5tYXRyaXguZGVjb21wb3NlKGkucG9zaXRpb24saS5xdWF0ZXJuaW9uLGkuc2NhbGUpKToodm9pZCAwIT09dC5wb3NpdGlvbiYmaS5wb3NpdGlvbi5mcm9tQXJyYXkodC5wb3NpdGlvbiksdm9pZCAwIT09dC5yb3RhdGlvbiYmaS5yb3RhdGlvbi5mcm9tQXJyYXkodC5yb3RhdGlvbiksdm9pZCAwIT09dC5xdWF0ZXJuaW9uJiZpLnF1YXRlcm5pb24uZnJvbUFycmF5KHQucXVhdGVybmlvbiksdm9pZCAwIT09dC5zY2FsZSYmaS5zY2FsZS5mcm9tQXJyYXkodC5zY2FsZSkpLHZvaWQgMCE9PXQuY2FzdFNoYWRvdyYmKGkuY2FzdFNoYWRvdz10LmNhc3RTaGFkb3cpLHZvaWQgMCE9PXQucmVjZWl2ZVNoYWRvdyYmKGkucmVjZWl2ZVNoYWRvdz10LnJlY2VpdmVTaGFkb3cpLHQuc2hhZG93JiYodm9pZCAwIT09dC5zaGFkb3cuYmlhcyYmKGkuc2hhZG93LmJpYXM9dC5zaGFkb3cuYmlhcyksdm9pZCAwIT09dC5zaGFkb3cubm9ybWFsQmlhcyYmKGkuc2hhZG93Lm5vcm1hbEJpYXM9dC5zaGFkb3cubm9ybWFsQmlhcyksdm9pZCAwIT09dC5zaGFkb3cucmFkaXVzJiYoaS5zaGFkb3cucmFkaXVzPXQuc2hhZG93LnJhZGl1cyksdm9pZCAwIT09dC5zaGFkb3cubWFwU2l6ZSYmaS5zaGFkb3cubWFwU2l6ZS5mcm9tQXJyYXkodC5zaGFkb3cubWFwU2l6ZSksdm9pZCAwIT09dC5zaGFkb3cuY2FtZXJhJiYoaS5zaGFkb3cuY2FtZXJhPXRoaXMucGFyc2VPYmplY3QodC5zaGFkb3cuY2FtZXJhKSkpLHZvaWQgMCE9PXQudmlzaWJsZSYmKGkudmlzaWJsZT10LnZpc2libGUpLHZvaWQgMCE9PXQuZnJ1c3R1bUN1bGxlZCYmKGkuZnJ1c3R1bUN1bGxlZD10LmZydXN0dW1DdWxsZWQpLHZvaWQgMCE9PXQucmVuZGVyT3JkZXImJihpLnJlbmRlck9yZGVyPXQucmVuZGVyT3JkZXIpLHZvaWQgMCE9PXQudXNlckRhdGEmJihpLnVzZXJEYXRhPXQudXNlckRhdGEpLHZvaWQgMCE9PXQubGF5ZXJzJiYoaS5sYXllcnMubWFzaz10LmxheWVycyksdm9pZCAwIT09dC5jaGlsZHJlbil7Y29uc3Qgbz10LmNoaWxkcmVuO2ZvcihsZXQgdD0wO3Q8by5sZW5ndGg7dCsrKWkuYWRkKHRoaXMucGFyc2VPYmplY3Qob1t0XSxlLG4scikpfWlmKHZvaWQgMCE9PXQuYW5pbWF0aW9ucyl7Y29uc3QgZT10LmFuaW1hdGlvbnM7Zm9yKGxldCB0PTA7dDxlLmxlbmd0aDt0Kyspe2NvbnN0IG49ZVt0XTtpLmFuaW1hdGlvbnMucHVzaChyW25dKX19aWYoXCJMT0RcIj09PXQudHlwZSl7dm9pZCAwIT09dC5hdXRvVXBkYXRlJiYoaS5hdXRvVXBkYXRlPXQuYXV0b1VwZGF0ZSk7Y29uc3QgZT10LmxldmVscztmb3IobGV0IHQ9MDt0PGUubGVuZ3RoO3QrKyl7Y29uc3Qgbj1lW3RdLHI9aS5nZXRPYmplY3RCeVByb3BlcnR5KFwidXVpZFwiLG4ub2JqZWN0KTt2b2lkIDAhPT1yJiZpLmFkZExldmVsKHIsbi5kaXN0YW5jZSl9fXJldHVybiBpfWJpbmRTa2VsZXRvbnModCxlKXswIT09T2JqZWN0LmtleXMoZSkubGVuZ3RoJiZ0LnRyYXZlcnNlKChmdW5jdGlvbih0KXtpZighMD09PXQuaXNTa2lubmVkTWVzaCYmdm9pZCAwIT09dC5za2VsZXRvbil7Y29uc3Qgbj1lW3Quc2tlbGV0b25dO3ZvaWQgMD09PW4/Y29uc29sZS53YXJuKFwiVEhSRUUuT2JqZWN0TG9hZGVyOiBObyBza2VsZXRvbiBmb3VuZCB3aXRoIFVVSUQ6XCIsdC5za2VsZXRvbik6dC5iaW5kKG4sdC5iaW5kTWF0cml4KX19KSl9c2V0VGV4dHVyZVBhdGgodCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLk9iamVjdExvYWRlcjogLnNldFRleHR1cmVQYXRoKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuc2V0UmVzb3VyY2VQYXRoKCkuXCIpLHRoaXMuc2V0UmVzb3VyY2VQYXRoKHQpfX1jb25zdCBVaD17VVZNYXBwaW5nOml0LEN1YmVSZWZsZWN0aW9uTWFwcGluZzpvdCxDdWJlUmVmcmFjdGlvbk1hcHBpbmc6YXQsRXF1aXJlY3Rhbmd1bGFyUmVmbGVjdGlvbk1hcHBpbmc6c3QsRXF1aXJlY3Rhbmd1bGFyUmVmcmFjdGlvbk1hcHBpbmc6Y3QsQ3ViZVVWUmVmbGVjdGlvbk1hcHBpbmc6bHQsQ3ViZVVWUmVmcmFjdGlvbk1hcHBpbmc6dXR9LHpoPXtSZXBlYXRXcmFwcGluZzpodCxDbGFtcFRvRWRnZVdyYXBwaW5nOmR0LE1pcnJvcmVkUmVwZWF0V3JhcHBpbmc6cHR9LEdoPXtOZWFyZXN0RmlsdGVyOmZ0LE5lYXJlc3RNaXBtYXBOZWFyZXN0RmlsdGVyOm10LE5lYXJlc3RNaXBtYXBMaW5lYXJGaWx0ZXI6dnQsTGluZWFyRmlsdGVyOnh0LExpbmVhck1pcG1hcE5lYXJlc3RGaWx0ZXI6YnQsTGluZWFyTWlwbWFwTGluZWFyRmlsdGVyOl90fTtmdW5jdGlvbiBIaCh0KXtcInVuZGVmaW5lZFwiPT10eXBlb2YgY3JlYXRlSW1hZ2VCaXRtYXAmJmNvbnNvbGUud2FybihcIlRIUkVFLkltYWdlQml0bWFwTG9hZGVyOiBjcmVhdGVJbWFnZUJpdG1hcCgpIG5vdCBzdXBwb3J0ZWQuXCIpLFwidW5kZWZpbmVkXCI9PXR5cGVvZiBmZXRjaCYmY29uc29sZS53YXJuKFwiVEhSRUUuSW1hZ2VCaXRtYXBMb2FkZXI6IGZldGNoKCkgbm90IHN1cHBvcnRlZC5cIiksR3UuY2FsbCh0aGlzLHQpLHRoaXMub3B0aW9ucz17cHJlbXVsdGlwbHlBbHBoYTpcIm5vbmVcIn19ZnVuY3Rpb24ga2goKXt0aGlzLnR5cGU9XCJTaGFwZVBhdGhcIix0aGlzLmNvbG9yPW5ldyB5aSx0aGlzLnN1YlBhdGhzPVtdLHRoaXMuY3VycmVudFBhdGg9bnVsbH1mdW5jdGlvbiBWaCh0KXt0aGlzLnR5cGU9XCJGb250XCIsdGhpcy5kYXRhPXR9ZnVuY3Rpb24gamgodCxlLG4scixpKXtjb25zdCBvPWkuZ2x5cGhzW3RdfHxpLmdseXBoc1tcIj9cIl07aWYoIW8pcmV0dXJuIHZvaWQgY29uc29sZS5lcnJvcignVEhSRUUuRm9udDogY2hhcmFjdGVyIFwiJyt0KydcIiBkb2VzIG5vdCBleGlzdHMgaW4gZm9udCBmYW1pbHkgJytpLmZhbWlseU5hbWUrXCIuXCIpO2NvbnN0IGE9bmV3IGtoO2xldCBzLGMsbCx1LGgsZCxwLGY7aWYoby5vKXtjb25zdCB0PW8uX2NhY2hlZE91dGxpbmV8fChvLl9jYWNoZWRPdXRsaW5lPW8uby5zcGxpdChcIiBcIikpO2ZvcihsZXQgaT0wLG89dC5sZW5ndGg7aTxvOyl7c3dpdGNoKHRbaSsrXSl7Y2FzZVwibVwiOnM9dFtpKytdKmUrbixjPXRbaSsrXSplK3IsYS5tb3ZlVG8ocyxjKTticmVhaztjYXNlXCJsXCI6cz10W2krK10qZStuLGM9dFtpKytdKmUrcixhLmxpbmVUbyhzLGMpO2JyZWFrO2Nhc2VcInFcIjpsPXRbaSsrXSplK24sdT10W2krK10qZStyLGg9dFtpKytdKmUrbixkPXRbaSsrXSplK3IsYS5xdWFkcmF0aWNDdXJ2ZVRvKGgsZCxsLHUpO2JyZWFrO2Nhc2VcImJcIjpsPXRbaSsrXSplK24sdT10W2krK10qZStyLGg9dFtpKytdKmUrbixkPXRbaSsrXSplK3IscD10W2krK10qZStuLGY9dFtpKytdKmUrcixhLmJlemllckN1cnZlVG8oaCxkLHAsZixsLHUpfX19cmV0dXJue29mZnNldFg6by5oYSplLHBhdGg6YX19ZnVuY3Rpb24gV2godCl7R3UuY2FsbCh0aGlzLHQpfWxldCBYaDtIaC5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKEd1LnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOkhoLGlzSW1hZ2VCaXRtYXBMb2FkZXI6ITAsc2V0T3B0aW9uczpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5vcHRpb25zPXQsdGhpc30sbG9hZDpmdW5jdGlvbih0LGUsbixyKXt2b2lkIDA9PT10JiYodD1cIlwiKSx2b2lkIDAhPT10aGlzLnBhdGgmJih0PXRoaXMucGF0aCt0KSx0PXRoaXMubWFuYWdlci5yZXNvbHZlVVJMKHQpO2NvbnN0IGk9dGhpcyxvPUZ1LmdldCh0KTtpZih2b2lkIDAhPT1vKXJldHVybiBpLm1hbmFnZXIuaXRlbVN0YXJ0KHQpLHNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7ZSYmZShvKSxpLm1hbmFnZXIuaXRlbUVuZCh0KX0pLDApLG87Y29uc3QgYT17fTthLmNyZWRlbnRpYWxzPVwiYW5vbnltb3VzXCI9PT10aGlzLmNyb3NzT3JpZ2luP1wic2FtZS1vcmlnaW5cIjpcImluY2x1ZGVcIixmZXRjaCh0LGEpLnRoZW4oKGZ1bmN0aW9uKHQpe3JldHVybiB0LmJsb2IoKX0pKS50aGVuKChmdW5jdGlvbih0KXtyZXR1cm4gY3JlYXRlSW1hZ2VCaXRtYXAodCxpLm9wdGlvbnMpfSkpLnRoZW4oKGZ1bmN0aW9uKG4pe0Z1LmFkZCh0LG4pLGUmJmUobiksaS5tYW5hZ2VyLml0ZW1FbmQodCl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3ImJnIoZSksaS5tYW5hZ2VyLml0ZW1FcnJvcih0KSxpLm1hbmFnZXIuaXRlbUVuZCh0KX0pKSxpLm1hbmFnZXIuaXRlbVN0YXJ0KHQpfX0pLE9iamVjdC5hc3NpZ24oa2gucHJvdG90eXBlLHttb3ZlVG86ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5jdXJyZW50UGF0aD1uZXcgZ2gsdGhpcy5zdWJQYXRocy5wdXNoKHRoaXMuY3VycmVudFBhdGgpLHRoaXMuY3VycmVudFBhdGgubW92ZVRvKHQsZSksdGhpc30sbGluZVRvOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuY3VycmVudFBhdGgubGluZVRvKHQsZSksdGhpc30scXVhZHJhdGljQ3VydmVUbzpmdW5jdGlvbih0LGUsbixyKXtyZXR1cm4gdGhpcy5jdXJyZW50UGF0aC5xdWFkcmF0aWNDdXJ2ZVRvKHQsZSxuLHIpLHRoaXN9LGJlemllckN1cnZlVG86ZnVuY3Rpb24odCxlLG4scixpLG8pe3JldHVybiB0aGlzLmN1cnJlbnRQYXRoLmJlemllckN1cnZlVG8odCxlLG4scixpLG8pLHRoaXN9LHNwbGluZVRocnU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY3VycmVudFBhdGguc3BsaW5lVGhydSh0KSx0aGlzfSx0b1NoYXBlczpmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIG4odCl7Y29uc3QgZT1bXTtmb3IobGV0IG49MCxyPXQubGVuZ3RoO248cjtuKyspe2NvbnN0IHI9dFtuXSxpPW5ldyB2aDtpLmN1cnZlcz1yLmN1cnZlcyxlLnB1c2goaSl9cmV0dXJuIGV9ZnVuY3Rpb24gcih0LGUpe2NvbnN0IG49ZS5sZW5ndGg7bGV0IHI9ITE7Zm9yKGxldCBpPW4tMSxvPTA7bzxuO2k9bysrKXtsZXQgbj1lW2ldLGE9ZVtvXSxzPWEueC1uLngsYz1hLnktbi55O2lmKE1hdGguYWJzKGMpPk51bWJlci5FUFNJTE9OKXtpZihjPDAmJihuPWVbb10scz0tcyxhPWVbaV0sYz0tYyksdC55PG4ueXx8dC55PmEueSljb250aW51ZTtpZih0Lnk9PT1uLnkpe2lmKHQueD09PW4ueClyZXR1cm4hMH1lbHNle2NvbnN0IGU9YyoodC54LW4ueCktcyoodC55LW4ueSk7aWYoMD09PWUpcmV0dXJuITA7aWYoZTwwKWNvbnRpbnVlO3I9IXJ9fWVsc2V7aWYodC55IT09bi55KWNvbnRpbnVlO2lmKGEueDw9dC54JiZ0Lng8PW4ueHx8bi54PD10LngmJnQueDw9YS54KXJldHVybiEwfX1yZXR1cm4gcn1jb25zdCBpPUNsLmlzQ2xvY2tXaXNlLG89dGhpcy5zdWJQYXRocztpZigwPT09by5sZW5ndGgpcmV0dXJuW107aWYoITA9PT1lKXJldHVybiBuKG8pO2xldCBhLHMsYztjb25zdCBsPVtdO2lmKDE9PT1vLmxlbmd0aClyZXR1cm4gcz1vWzBdLGM9bmV3IHZoLGMuY3VydmVzPXMuY3VydmVzLGwucHVzaChjKSxsO2xldCB1PSFpKG9bMF0uZ2V0UG9pbnRzKCkpO3U9dD8hdTp1O2NvbnN0IGg9W10sZD1bXTtsZXQgcCxmLG09W10sZz0wO2RbZ109dm9pZCAwLG1bZ109W107Zm9yKGxldCBlPTAsbj1vLmxlbmd0aDtlPG47ZSsrKXM9b1tlXSxwPXMuZ2V0UG9pbnRzKCksYT1pKHApLGE9dD8hYTphLGE/KCF1JiZkW2ddJiZnKyssZFtnXT17czpuZXcgdmgscDpwfSxkW2ddLnMuY3VydmVzPXMuY3VydmVzLHUmJmcrKyxtW2ddPVtdKTptW2ddLnB1c2goe2g6cyxwOnBbMF19KTtpZighZFswXSlyZXR1cm4gbihvKTtpZihkLmxlbmd0aD4xKXtsZXQgdD0hMTtjb25zdCBlPVtdO2ZvcihsZXQgdD0wLGU9ZC5sZW5ndGg7dDxlO3QrKyloW3RdPVtdO2ZvcihsZXQgbj0wLGk9ZC5sZW5ndGg7bjxpO24rKyl7Y29uc3QgaT1tW25dO2ZvcihsZXQgbz0wO288aS5sZW5ndGg7bysrKXtjb25zdCBhPWlbb107bGV0IHM9ITA7Zm9yKGxldCBpPTA7aTxkLmxlbmd0aDtpKyspcihhLnAsZFtpXS5wKSYmKG4hPT1pJiZlLnB1c2goe2Zyb21zOm4sdG9zOmksaG9sZTpvfSkscz8ocz0hMSxoW2ldLnB1c2goYSkpOnQ9ITApO3MmJmhbbl0ucHVzaChhKX19ZS5sZW5ndGg+MCYmKHR8fChtPWgpKX1mb3IobGV0IHQ9MCxlPWQubGVuZ3RoO3Q8ZTt0Kyspe2M9ZFt0XS5zLGwucHVzaChjKSxmPW1bdF07Zm9yKGxldCB0PTAsZT1mLmxlbmd0aDt0PGU7dCsrKWMuaG9sZXMucHVzaChmW3RdLmgpfXJldHVybiBsfX0pLE9iamVjdC5hc3NpZ24oVmgucHJvdG90eXBlLHtpc0ZvbnQ6ITAsZ2VuZXJhdGVTaGFwZXM6ZnVuY3Rpb24odCxlPTEwMCl7Y29uc3Qgbj1bXSxyPWZ1bmN0aW9uKHQsZSxuKXtjb25zdCByPUFycmF5LmZyb20/QXJyYXkuZnJvbSh0KTpTdHJpbmcodCkuc3BsaXQoXCJcIiksaT1lL24ucmVzb2x1dGlvbixvPShuLmJvdW5kaW5nQm94LnlNYXgtbi5ib3VuZGluZ0JveC55TWluK24udW5kZXJsaW5lVGhpY2tuZXNzKSppLGE9W107bGV0IHM9MCxjPTA7Zm9yKGxldCB0PTA7dDxyLmxlbmd0aDt0Kyspe2NvbnN0IGU9clt0XTtpZihcIlxcblwiPT09ZSlzPTAsYy09bztlbHNle2NvbnN0IHQ9amgoZSxpLHMsYyxuKTtzKz10Lm9mZnNldFgsYS5wdXNoKHQucGF0aCl9fXJldHVybiBhfSh0LGUsdGhpcy5kYXRhKTtmb3IobGV0IHQ9MCxlPXIubGVuZ3RoO3Q8ZTt0KyspQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkobixyW3RdLnRvU2hhcGVzKCkpO3JldHVybiBufX0pLFdoLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoR3UucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6V2gsbG9hZDpmdW5jdGlvbih0LGUsbixyKXtjb25zdCBpPXRoaXMsbz1uZXcga3UodGhpcy5tYW5hZ2VyKTtvLnNldFBhdGgodGhpcy5wYXRoKSxvLnNldFJlcXVlc3RIZWFkZXIodGhpcy5yZXF1ZXN0SGVhZGVyKSxvLnNldFdpdGhDcmVkZW50aWFscyhpLndpdGhDcmVkZW50aWFscyksby5sb2FkKHQsKGZ1bmN0aW9uKHQpe2xldCBuO3RyeXtuPUpTT04ucGFyc2UodCl9Y2F0Y2goZSl7Y29uc29sZS53YXJuKFwiVEhSRUUuRm9udExvYWRlcjogdHlwZWZhY2UuanMgc3VwcG9ydCBpcyBiZWluZyBkZXByZWNhdGVkLiBVc2UgdHlwZWZhY2UuanNvbiBpbnN0ZWFkLlwiKSxuPUpTT04ucGFyc2UodC5zdWJzdHJpbmcoNjUsdC5sZW5ndGgtMikpfWNvbnN0IHI9aS5wYXJzZShuKTtlJiZlKHIpfSksbixyKX0scGFyc2U6ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBWaCh0KX19KTtjb25zdCBxaD17Z2V0Q29udGV4dDpmdW5jdGlvbigpe3JldHVybiB2b2lkIDA9PT1YaCYmKFhoPW5ldyh3aW5kb3cuQXVkaW9Db250ZXh0fHx3aW5kb3cud2Via2l0QXVkaW9Db250ZXh0KSksWGh9LHNldENvbnRleHQ6ZnVuY3Rpb24odCl7WGg9dH19O2Z1bmN0aW9uIFloKHQpe0d1LmNhbGwodGhpcyx0KX1mdW5jdGlvbiBaaCh0LGUsbil7Q2guY2FsbCh0aGlzLHZvaWQgMCxuKTtjb25zdCByPShuZXcgeWkpLnNldCh0KSxpPShuZXcgeWkpLnNldChlKSxvPW5ldyBLbihyLnIsci5nLHIuYiksYT1uZXcgS24oaS5yLGkuZyxpLmIpLHM9TWF0aC5zcXJ0KE1hdGguUEkpLGM9cypNYXRoLnNxcnQoLjc1KTt0aGlzLnNoLmNvZWZmaWNpZW50c1swXS5jb3B5KG8pLmFkZChhKS5tdWx0aXBseVNjYWxhcihzKSx0aGlzLnNoLmNvZWZmaWNpZW50c1sxXS5jb3B5KG8pLnN1YihhKS5tdWx0aXBseVNjYWxhcihjKX1mdW5jdGlvbiBKaCh0LGUpe0NoLmNhbGwodGhpcyx2b2lkIDAsZSk7Y29uc3Qgbj0obmV3IHlpKS5zZXQodCk7dGhpcy5zaC5jb2VmZmljaWVudHNbMF0uc2V0KG4ucixuLmcsbi5iKS5tdWx0aXBseVNjYWxhcigyKk1hdGguc3FydChNYXRoLlBJKSl9WWgucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShHdS5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpZaCxsb2FkOmZ1bmN0aW9uKHQsZSxuLHIpe2NvbnN0IGk9dGhpcyxvPW5ldyBrdShpLm1hbmFnZXIpO28uc2V0UmVzcG9uc2VUeXBlKFwiYXJyYXlidWZmZXJcIiksby5zZXRQYXRoKGkucGF0aCksby5zZXRSZXF1ZXN0SGVhZGVyKGkucmVxdWVzdEhlYWRlciksby5zZXRXaXRoQ3JlZGVudGlhbHMoaS53aXRoQ3JlZGVudGlhbHMpLG8ubG9hZCh0LChmdW5jdGlvbihuKXt0cnl7Y29uc3QgdD1uLnNsaWNlKDApO3FoLmdldENvbnRleHQoKS5kZWNvZGVBdWRpb0RhdGEodCwoZnVuY3Rpb24odCl7ZSh0KX0pKX1jYXRjaChlKXtyP3IoZSk6Y29uc29sZS5lcnJvcihlKSxpLm1hbmFnZXIuaXRlbUVycm9yKHQpfX0pLG4scil9fSksWmgucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShDaC5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpaaCxpc0hlbWlzcGhlcmVMaWdodFByb2JlOiEwLGNvcHk6ZnVuY3Rpb24odCl7cmV0dXJuIENoLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyx0KSx0aGlzfSx0b0pTT046ZnVuY3Rpb24odCl7cmV0dXJuIENoLnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzLHQpfX0pLEpoLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoQ2gucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6SmgsaXNBbWJpZW50TGlnaHRQcm9iZTohMCxjb3B5OmZ1bmN0aW9uKHQpe3JldHVybiBDaC5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsdCksdGhpc30sdG9KU09OOmZ1bmN0aW9uKHQpe3JldHVybiBDaC5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyx0KX19KTtjb25zdCBLaD1uZXcgVHIsUWg9bmV3IFRyO2Z1bmN0aW9uICRoKCl7dGhpcy50eXBlPVwiU3RlcmVvQ2FtZXJhXCIsdGhpcy5hc3BlY3Q9MSx0aGlzLmV5ZVNlcD0uMDY0LHRoaXMuY2FtZXJhTD1uZXcgd28sdGhpcy5jYW1lcmFMLmxheWVycy5lbmFibGUoMSksdGhpcy5jYW1lcmFMLm1hdHJpeEF1dG9VcGRhdGU9ITEsdGhpcy5jYW1lcmFSPW5ldyB3byx0aGlzLmNhbWVyYVIubGF5ZXJzLmVuYWJsZSgyKSx0aGlzLmNhbWVyYVIubWF0cml4QXV0b1VwZGF0ZT0hMSx0aGlzLl9jYWNoZT17Zm9jdXM6bnVsbCxmb3Y6bnVsbCxhc3BlY3Q6bnVsbCxuZWFyOm51bGwsZmFyOm51bGwsem9vbTpudWxsLGV5ZVNlcDpudWxsfX1PYmplY3QuYXNzaWduKCRoLnByb3RvdHlwZSx7dXBkYXRlOmZ1bmN0aW9uKHQpe2NvbnN0IGU9dGhpcy5fY2FjaGU7aWYoZS5mb2N1cyE9PXQuZm9jdXN8fGUuZm92IT09dC5mb3Z8fGUuYXNwZWN0IT09dC5hc3BlY3QqdGhpcy5hc3BlY3R8fGUubmVhciE9PXQubmVhcnx8ZS5mYXIhPT10LmZhcnx8ZS56b29tIT09dC56b29tfHxlLmV5ZVNlcCE9PXRoaXMuZXllU2VwKXtlLmZvY3VzPXQuZm9jdXMsZS5mb3Y9dC5mb3YsZS5hc3BlY3Q9dC5hc3BlY3QqdGhpcy5hc3BlY3QsZS5uZWFyPXQubmVhcixlLmZhcj10LmZhcixlLnpvb209dC56b29tLGUuZXllU2VwPXRoaXMuZXllU2VwO2NvbnN0IG49dC5wcm9qZWN0aW9uTWF0cml4LmNsb25lKCkscj1lLmV5ZVNlcC8yLGk9ciplLm5lYXIvZS5mb2N1cyxvPWUubmVhcipNYXRoLnRhbih6bi5ERUcyUkFEKmUuZm92Ki41KS9lLnpvb207bGV0IGEscztRaC5lbGVtZW50c1sxMl09LXIsS2guZWxlbWVudHNbMTJdPXIsYT0tbyplLmFzcGVjdCtpLHM9byplLmFzcGVjdCtpLG4uZWxlbWVudHNbMF09MiplLm5lYXIvKHMtYSksbi5lbGVtZW50c1s4XT0ocythKS8ocy1hKSx0aGlzLmNhbWVyYUwucHJvamVjdGlvbk1hdHJpeC5jb3B5KG4pLGE9LW8qZS5hc3BlY3QtaSxzPW8qZS5hc3BlY3QtaSxuLmVsZW1lbnRzWzBdPTIqZS5uZWFyLyhzLWEpLG4uZWxlbWVudHNbOF09KHMrYSkvKHMtYSksdGhpcy5jYW1lcmFSLnByb2plY3Rpb25NYXRyaXguY29weShuKX10aGlzLmNhbWVyYUwubWF0cml4V29ybGQuY29weSh0Lm1hdHJpeFdvcmxkKS5tdWx0aXBseShRaCksdGhpcy5jYW1lcmFSLm1hdHJpeFdvcmxkLmNvcHkodC5tYXRyaXhXb3JsZCkubXVsdGlwbHkoS2gpfX0pO2NsYXNzIHRke2NvbnN0cnVjdG9yKHQpe3RoaXMuYXV0b1N0YXJ0PXZvaWQgMD09PXR8fHQsdGhpcy5zdGFydFRpbWU9MCx0aGlzLm9sZFRpbWU9MCx0aGlzLmVsYXBzZWRUaW1lPTAsdGhpcy5ydW5uaW5nPSExfXN0YXJ0KCl7dGhpcy5zdGFydFRpbWU9ZWQoKSx0aGlzLm9sZFRpbWU9dGhpcy5zdGFydFRpbWUsdGhpcy5lbGFwc2VkVGltZT0wLHRoaXMucnVubmluZz0hMH1zdG9wKCl7dGhpcy5nZXRFbGFwc2VkVGltZSgpLHRoaXMucnVubmluZz0hMSx0aGlzLmF1dG9TdGFydD0hMX1nZXRFbGFwc2VkVGltZSgpe3JldHVybiB0aGlzLmdldERlbHRhKCksdGhpcy5lbGFwc2VkVGltZX1nZXREZWx0YSgpe2xldCB0PTA7aWYodGhpcy5hdXRvU3RhcnQmJiF0aGlzLnJ1bm5pbmcpcmV0dXJuIHRoaXMuc3RhcnQoKSwwO2lmKHRoaXMucnVubmluZyl7Y29uc3QgZT1lZCgpO3Q9KGUtdGhpcy5vbGRUaW1lKS8xZTMsdGhpcy5vbGRUaW1lPWUsdGhpcy5lbGFwc2VkVGltZSs9dH1yZXR1cm4gdH19ZnVuY3Rpb24gZWQoKXtyZXR1cm4oXCJ1bmRlZmluZWRcIj09dHlwZW9mIHBlcmZvcm1hbmNlP0RhdGU6cGVyZm9ybWFuY2UpLm5vdygpfWNvbnN0IG5kPW5ldyBLbixyZD1uZXcgSm4saWQ9bmV3IEtuLG9kPW5ldyBLbjtjbGFzcyBhZCBleHRlbmRzIEpye2NvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLnR5cGU9XCJBdWRpb0xpc3RlbmVyXCIsdGhpcy5jb250ZXh0PXFoLmdldENvbnRleHQoKSx0aGlzLmdhaW49dGhpcy5jb250ZXh0LmNyZWF0ZUdhaW4oKSx0aGlzLmdhaW4uY29ubmVjdCh0aGlzLmNvbnRleHQuZGVzdGluYXRpb24pLHRoaXMuZmlsdGVyPW51bGwsdGhpcy50aW1lRGVsdGE9MCx0aGlzLl9jbG9jaz1uZXcgdGR9Z2V0SW5wdXQoKXtyZXR1cm4gdGhpcy5nYWlufXJlbW92ZUZpbHRlcigpe3JldHVybiBudWxsIT09dGhpcy5maWx0ZXImJih0aGlzLmdhaW4uZGlzY29ubmVjdCh0aGlzLmZpbHRlciksdGhpcy5maWx0ZXIuZGlzY29ubmVjdCh0aGlzLmNvbnRleHQuZGVzdGluYXRpb24pLHRoaXMuZ2Fpbi5jb25uZWN0KHRoaXMuY29udGV4dC5kZXN0aW5hdGlvbiksdGhpcy5maWx0ZXI9bnVsbCksdGhpc31nZXRGaWx0ZXIoKXtyZXR1cm4gdGhpcy5maWx0ZXJ9c2V0RmlsdGVyKHQpe3JldHVybiBudWxsIT09dGhpcy5maWx0ZXI/KHRoaXMuZ2Fpbi5kaXNjb25uZWN0KHRoaXMuZmlsdGVyKSx0aGlzLmZpbHRlci5kaXNjb25uZWN0KHRoaXMuY29udGV4dC5kZXN0aW5hdGlvbikpOnRoaXMuZ2Fpbi5kaXNjb25uZWN0KHRoaXMuY29udGV4dC5kZXN0aW5hdGlvbiksdGhpcy5maWx0ZXI9dCx0aGlzLmdhaW4uY29ubmVjdCh0aGlzLmZpbHRlciksdGhpcy5maWx0ZXIuY29ubmVjdCh0aGlzLmNvbnRleHQuZGVzdGluYXRpb24pLHRoaXN9Z2V0TWFzdGVyVm9sdW1lKCl7cmV0dXJuIHRoaXMuZ2Fpbi5nYWluLnZhbHVlfXNldE1hc3RlclZvbHVtZSh0KXtyZXR1cm4gdGhpcy5nYWluLmdhaW4uc2V0VGFyZ2V0QXRUaW1lKHQsdGhpcy5jb250ZXh0LmN1cnJlbnRUaW1lLC4wMSksdGhpc311cGRhdGVNYXRyaXhXb3JsZCh0KXtzdXBlci51cGRhdGVNYXRyaXhXb3JsZCh0KTtjb25zdCBlPXRoaXMuY29udGV4dC5saXN0ZW5lcixuPXRoaXMudXA7aWYodGhpcy50aW1lRGVsdGE9dGhpcy5fY2xvY2suZ2V0RGVsdGEoKSx0aGlzLm1hdHJpeFdvcmxkLmRlY29tcG9zZShuZCxyZCxpZCksb2Quc2V0KDAsMCwtMSkuYXBwbHlRdWF0ZXJuaW9uKHJkKSxlLnBvc2l0aW9uWCl7Y29uc3QgdD10aGlzLmNvbnRleHQuY3VycmVudFRpbWUrdGhpcy50aW1lRGVsdGE7ZS5wb3NpdGlvblgubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUobmQueCx0KSxlLnBvc2l0aW9uWS5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZShuZC55LHQpLGUucG9zaXRpb25aLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKG5kLnosdCksZS5mb3J3YXJkWC5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZShvZC54LHQpLGUuZm9yd2FyZFkubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUob2QueSx0KSxlLmZvcndhcmRaLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKG9kLnosdCksZS51cFgubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUobi54LHQpLGUudXBZLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKG4ueSx0KSxlLnVwWi5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZShuLnosdCl9ZWxzZSBlLnNldFBvc2l0aW9uKG5kLngsbmQueSxuZC56KSxlLnNldE9yaWVudGF0aW9uKG9kLngsb2QueSxvZC56LG4ueCxuLnksbi56KX19Y2xhc3Mgc2QgZXh0ZW5kcyBKcntjb25zdHJ1Y3Rvcih0KXtzdXBlcigpLHRoaXMudHlwZT1cIkF1ZGlvXCIsdGhpcy5saXN0ZW5lcj10LHRoaXMuY29udGV4dD10LmNvbnRleHQsdGhpcy5nYWluPXRoaXMuY29udGV4dC5jcmVhdGVHYWluKCksdGhpcy5nYWluLmNvbm5lY3QodC5nZXRJbnB1dCgpKSx0aGlzLmF1dG9wbGF5PSExLHRoaXMuYnVmZmVyPW51bGwsdGhpcy5kZXR1bmU9MCx0aGlzLmxvb3A9ITEsdGhpcy5sb29wU3RhcnQ9MCx0aGlzLmxvb3BFbmQ9MCx0aGlzLm9mZnNldD0wLHRoaXMuZHVyYXRpb249dm9pZCAwLHRoaXMucGxheWJhY2tSYXRlPTEsdGhpcy5pc1BsYXlpbmc9ITEsdGhpcy5oYXNQbGF5YmFja0NvbnRyb2w9ITAsdGhpcy5zb3VyY2U9bnVsbCx0aGlzLnNvdXJjZVR5cGU9XCJlbXB0eVwiLHRoaXMuX3N0YXJ0ZWRBdD0wLHRoaXMuX3Byb2dyZXNzPTAsdGhpcy5fY29ubmVjdGVkPSExLHRoaXMuZmlsdGVycz1bXX1nZXRPdXRwdXQoKXtyZXR1cm4gdGhpcy5nYWlufXNldE5vZGVTb3VyY2UodCl7cmV0dXJuIHRoaXMuaGFzUGxheWJhY2tDb250cm9sPSExLHRoaXMuc291cmNlVHlwZT1cImF1ZGlvTm9kZVwiLHRoaXMuc291cmNlPXQsdGhpcy5jb25uZWN0KCksdGhpc31zZXRNZWRpYUVsZW1lbnRTb3VyY2UodCl7cmV0dXJuIHRoaXMuaGFzUGxheWJhY2tDb250cm9sPSExLHRoaXMuc291cmNlVHlwZT1cIm1lZGlhTm9kZVwiLHRoaXMuc291cmNlPXRoaXMuY29udGV4dC5jcmVhdGVNZWRpYUVsZW1lbnRTb3VyY2UodCksdGhpcy5jb25uZWN0KCksdGhpc31zZXRNZWRpYVN0cmVhbVNvdXJjZSh0KXtyZXR1cm4gdGhpcy5oYXNQbGF5YmFja0NvbnRyb2w9ITEsdGhpcy5zb3VyY2VUeXBlPVwibWVkaWFTdHJlYW1Ob2RlXCIsdGhpcy5zb3VyY2U9dGhpcy5jb250ZXh0LmNyZWF0ZU1lZGlhU3RyZWFtU291cmNlKHQpLHRoaXMuY29ubmVjdCgpLHRoaXN9c2V0QnVmZmVyKHQpe3JldHVybiB0aGlzLmJ1ZmZlcj10LHRoaXMuc291cmNlVHlwZT1cImJ1ZmZlclwiLHRoaXMuYXV0b3BsYXkmJnRoaXMucGxheSgpLHRoaXN9cGxheSh0PTApe2lmKCEwPT09dGhpcy5pc1BsYXlpbmcpcmV0dXJuIHZvaWQgY29uc29sZS53YXJuKFwiVEhSRUUuQXVkaW86IEF1ZGlvIGlzIGFscmVhZHkgcGxheWluZy5cIik7aWYoITE9PT10aGlzLmhhc1BsYXliYWNrQ29udHJvbClyZXR1cm4gdm9pZCBjb25zb2xlLndhcm4oXCJUSFJFRS5BdWRpbzogdGhpcyBBdWRpbyBoYXMgbm8gcGxheWJhY2sgY29udHJvbC5cIik7dGhpcy5fc3RhcnRlZEF0PXRoaXMuY29udGV4dC5jdXJyZW50VGltZSt0O2NvbnN0IGU9dGhpcy5jb250ZXh0LmNyZWF0ZUJ1ZmZlclNvdXJjZSgpO3JldHVybiBlLmJ1ZmZlcj10aGlzLmJ1ZmZlcixlLmxvb3A9dGhpcy5sb29wLGUubG9vcFN0YXJ0PXRoaXMubG9vcFN0YXJ0LGUubG9vcEVuZD10aGlzLmxvb3BFbmQsZS5vbmVuZGVkPXRoaXMub25FbmRlZC5iaW5kKHRoaXMpLGUuc3RhcnQodGhpcy5fc3RhcnRlZEF0LHRoaXMuX3Byb2dyZXNzK3RoaXMub2Zmc2V0LHRoaXMuZHVyYXRpb24pLHRoaXMuaXNQbGF5aW5nPSEwLHRoaXMuc291cmNlPWUsdGhpcy5zZXREZXR1bmUodGhpcy5kZXR1bmUpLHRoaXMuc2V0UGxheWJhY2tSYXRlKHRoaXMucGxheWJhY2tSYXRlKSx0aGlzLmNvbm5lY3QoKX1wYXVzZSgpe2lmKCExIT09dGhpcy5oYXNQbGF5YmFja0NvbnRyb2wpcmV0dXJuITA9PT10aGlzLmlzUGxheWluZyYmKHRoaXMuX3Byb2dyZXNzKz1NYXRoLm1heCh0aGlzLmNvbnRleHQuY3VycmVudFRpbWUtdGhpcy5fc3RhcnRlZEF0LDApKnRoaXMucGxheWJhY2tSYXRlLCEwPT09dGhpcy5sb29wJiYodGhpcy5fcHJvZ3Jlc3M9dGhpcy5fcHJvZ3Jlc3MlKHRoaXMuZHVyYXRpb258fHRoaXMuYnVmZmVyLmR1cmF0aW9uKSksdGhpcy5zb3VyY2Uuc3RvcCgpLHRoaXMuc291cmNlLm9uZW5kZWQ9bnVsbCx0aGlzLmlzUGxheWluZz0hMSksdGhpcztjb25zb2xlLndhcm4oXCJUSFJFRS5BdWRpbzogdGhpcyBBdWRpbyBoYXMgbm8gcGxheWJhY2sgY29udHJvbC5cIil9c3RvcCgpe2lmKCExIT09dGhpcy5oYXNQbGF5YmFja0NvbnRyb2wpcmV0dXJuIHRoaXMuX3Byb2dyZXNzPTAsdGhpcy5zb3VyY2Uuc3RvcCgpLHRoaXMuc291cmNlLm9uZW5kZWQ9bnVsbCx0aGlzLmlzUGxheWluZz0hMSx0aGlzO2NvbnNvbGUud2FybihcIlRIUkVFLkF1ZGlvOiB0aGlzIEF1ZGlvIGhhcyBubyBwbGF5YmFjayBjb250cm9sLlwiKX1jb25uZWN0KCl7aWYodGhpcy5maWx0ZXJzLmxlbmd0aD4wKXt0aGlzLnNvdXJjZS5jb25uZWN0KHRoaXMuZmlsdGVyc1swXSk7Zm9yKGxldCB0PTEsZT10aGlzLmZpbHRlcnMubGVuZ3RoO3Q8ZTt0KyspdGhpcy5maWx0ZXJzW3QtMV0uY29ubmVjdCh0aGlzLmZpbHRlcnNbdF0pO3RoaXMuZmlsdGVyc1t0aGlzLmZpbHRlcnMubGVuZ3RoLTFdLmNvbm5lY3QodGhpcy5nZXRPdXRwdXQoKSl9ZWxzZSB0aGlzLnNvdXJjZS5jb25uZWN0KHRoaXMuZ2V0T3V0cHV0KCkpO3JldHVybiB0aGlzLl9jb25uZWN0ZWQ9ITAsdGhpc31kaXNjb25uZWN0KCl7aWYodGhpcy5maWx0ZXJzLmxlbmd0aD4wKXt0aGlzLnNvdXJjZS5kaXNjb25uZWN0KHRoaXMuZmlsdGVyc1swXSk7Zm9yKGxldCB0PTEsZT10aGlzLmZpbHRlcnMubGVuZ3RoO3Q8ZTt0KyspdGhpcy5maWx0ZXJzW3QtMV0uZGlzY29ubmVjdCh0aGlzLmZpbHRlcnNbdF0pO3RoaXMuZmlsdGVyc1t0aGlzLmZpbHRlcnMubGVuZ3RoLTFdLmRpc2Nvbm5lY3QodGhpcy5nZXRPdXRwdXQoKSl9ZWxzZSB0aGlzLnNvdXJjZS5kaXNjb25uZWN0KHRoaXMuZ2V0T3V0cHV0KCkpO3JldHVybiB0aGlzLl9jb25uZWN0ZWQ9ITEsdGhpc31nZXRGaWx0ZXJzKCl7cmV0dXJuIHRoaXMuZmlsdGVyc31zZXRGaWx0ZXJzKHQpe3JldHVybiB0fHwodD1bXSksITA9PT10aGlzLl9jb25uZWN0ZWQ/KHRoaXMuZGlzY29ubmVjdCgpLHRoaXMuZmlsdGVycz10LnNsaWNlKCksdGhpcy5jb25uZWN0KCkpOnRoaXMuZmlsdGVycz10LnNsaWNlKCksdGhpc31zZXREZXR1bmUodCl7aWYodGhpcy5kZXR1bmU9dCx2b2lkIDAhPT10aGlzLnNvdXJjZS5kZXR1bmUpcmV0dXJuITA9PT10aGlzLmlzUGxheWluZyYmdGhpcy5zb3VyY2UuZGV0dW5lLnNldFRhcmdldEF0VGltZSh0aGlzLmRldHVuZSx0aGlzLmNvbnRleHQuY3VycmVudFRpbWUsLjAxKSx0aGlzfWdldERldHVuZSgpe3JldHVybiB0aGlzLmRldHVuZX1nZXRGaWx0ZXIoKXtyZXR1cm4gdGhpcy5nZXRGaWx0ZXJzKClbMF19c2V0RmlsdGVyKHQpe3JldHVybiB0aGlzLnNldEZpbHRlcnModD9bdF06W10pfXNldFBsYXliYWNrUmF0ZSh0KXtpZighMSE9PXRoaXMuaGFzUGxheWJhY2tDb250cm9sKXJldHVybiB0aGlzLnBsYXliYWNrUmF0ZT10LCEwPT09dGhpcy5pc1BsYXlpbmcmJnRoaXMuc291cmNlLnBsYXliYWNrUmF0ZS5zZXRUYXJnZXRBdFRpbWUodGhpcy5wbGF5YmFja1JhdGUsdGhpcy5jb250ZXh0LmN1cnJlbnRUaW1lLC4wMSksdGhpcztjb25zb2xlLndhcm4oXCJUSFJFRS5BdWRpbzogdGhpcyBBdWRpbyBoYXMgbm8gcGxheWJhY2sgY29udHJvbC5cIil9Z2V0UGxheWJhY2tSYXRlKCl7cmV0dXJuIHRoaXMucGxheWJhY2tSYXRlfW9uRW5kZWQoKXt0aGlzLmlzUGxheWluZz0hMX1nZXRMb29wKCl7cmV0dXJuITE9PT10aGlzLmhhc1BsYXliYWNrQ29udHJvbD8oY29uc29sZS53YXJuKFwiVEhSRUUuQXVkaW86IHRoaXMgQXVkaW8gaGFzIG5vIHBsYXliYWNrIGNvbnRyb2wuXCIpLCExKTp0aGlzLmxvb3B9c2V0TG9vcCh0KXtpZighMSE9PXRoaXMuaGFzUGxheWJhY2tDb250cm9sKXJldHVybiB0aGlzLmxvb3A9dCwhMD09PXRoaXMuaXNQbGF5aW5nJiYodGhpcy5zb3VyY2UubG9vcD10aGlzLmxvb3ApLHRoaXM7Y29uc29sZS53YXJuKFwiVEhSRUUuQXVkaW86IHRoaXMgQXVkaW8gaGFzIG5vIHBsYXliYWNrIGNvbnRyb2wuXCIpfXNldExvb3BTdGFydCh0KXtyZXR1cm4gdGhpcy5sb29wU3RhcnQ9dCx0aGlzfXNldExvb3BFbmQodCl7cmV0dXJuIHRoaXMubG9vcEVuZD10LHRoaXN9Z2V0Vm9sdW1lKCl7cmV0dXJuIHRoaXMuZ2Fpbi5nYWluLnZhbHVlfXNldFZvbHVtZSh0KXtyZXR1cm4gdGhpcy5nYWluLmdhaW4uc2V0VGFyZ2V0QXRUaW1lKHQsdGhpcy5jb250ZXh0LmN1cnJlbnRUaW1lLC4wMSksdGhpc319Y29uc3QgY2Q9bmV3IEtuLGxkPW5ldyBKbix1ZD1uZXcgS24saGQ9bmV3IEtuO2NsYXNzIGRkIGV4dGVuZHMgc2R7Y29uc3RydWN0b3IodCl7c3VwZXIodCksdGhpcy5wYW5uZXI9dGhpcy5jb250ZXh0LmNyZWF0ZVBhbm5lcigpLHRoaXMucGFubmVyLnBhbm5pbmdNb2RlbD1cIkhSVEZcIix0aGlzLnBhbm5lci5jb25uZWN0KHRoaXMuZ2Fpbil9Z2V0T3V0cHV0KCl7cmV0dXJuIHRoaXMucGFubmVyfWdldFJlZkRpc3RhbmNlKCl7cmV0dXJuIHRoaXMucGFubmVyLnJlZkRpc3RhbmNlfXNldFJlZkRpc3RhbmNlKHQpe3JldHVybiB0aGlzLnBhbm5lci5yZWZEaXN0YW5jZT10LHRoaXN9Z2V0Um9sbG9mZkZhY3Rvcigpe3JldHVybiB0aGlzLnBhbm5lci5yb2xsb2ZmRmFjdG9yfXNldFJvbGxvZmZGYWN0b3IodCl7cmV0dXJuIHRoaXMucGFubmVyLnJvbGxvZmZGYWN0b3I9dCx0aGlzfWdldERpc3RhbmNlTW9kZWwoKXtyZXR1cm4gdGhpcy5wYW5uZXIuZGlzdGFuY2VNb2RlbH1zZXREaXN0YW5jZU1vZGVsKHQpe3JldHVybiB0aGlzLnBhbm5lci5kaXN0YW5jZU1vZGVsPXQsdGhpc31nZXRNYXhEaXN0YW5jZSgpe3JldHVybiB0aGlzLnBhbm5lci5tYXhEaXN0YW5jZX1zZXRNYXhEaXN0YW5jZSh0KXtyZXR1cm4gdGhpcy5wYW5uZXIubWF4RGlzdGFuY2U9dCx0aGlzfXNldERpcmVjdGlvbmFsQ29uZSh0LGUsbil7cmV0dXJuIHRoaXMucGFubmVyLmNvbmVJbm5lckFuZ2xlPXQsdGhpcy5wYW5uZXIuY29uZU91dGVyQW5nbGU9ZSx0aGlzLnBhbm5lci5jb25lT3V0ZXJHYWluPW4sdGhpc311cGRhdGVNYXRyaXhXb3JsZCh0KXtpZihzdXBlci51cGRhdGVNYXRyaXhXb3JsZCh0KSwhMD09PXRoaXMuaGFzUGxheWJhY2tDb250cm9sJiYhMT09PXRoaXMuaXNQbGF5aW5nKXJldHVybjt0aGlzLm1hdHJpeFdvcmxkLmRlY29tcG9zZShjZCxsZCx1ZCksaGQuc2V0KDAsMCwxKS5hcHBseVF1YXRlcm5pb24obGQpO2NvbnN0IGU9dGhpcy5wYW5uZXI7aWYoZS5wb3NpdGlvblgpe2NvbnN0IHQ9dGhpcy5jb250ZXh0LmN1cnJlbnRUaW1lK3RoaXMubGlzdGVuZXIudGltZURlbHRhO2UucG9zaXRpb25YLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKGNkLngsdCksZS5wb3NpdGlvblkubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUoY2QueSx0KSxlLnBvc2l0aW9uWi5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZShjZC56LHQpLGUub3JpZW50YXRpb25YLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKGhkLngsdCksZS5vcmllbnRhdGlvblkubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUoaGQueSx0KSxlLm9yaWVudGF0aW9uWi5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZShoZC56LHQpfWVsc2UgZS5zZXRQb3NpdGlvbihjZC54LGNkLnksY2QueiksZS5zZXRPcmllbnRhdGlvbihoZC54LGhkLnksaGQueil9fWNsYXNzIHBke2NvbnN0cnVjdG9yKHQsZT0yMDQ4KXt0aGlzLmFuYWx5c2VyPXQuY29udGV4dC5jcmVhdGVBbmFseXNlcigpLHRoaXMuYW5hbHlzZXIuZmZ0U2l6ZT1lLHRoaXMuZGF0YT1uZXcgVWludDhBcnJheSh0aGlzLmFuYWx5c2VyLmZyZXF1ZW5jeUJpbkNvdW50KSx0LmdldE91dHB1dCgpLmNvbm5lY3QodGhpcy5hbmFseXNlcil9Z2V0RnJlcXVlbmN5RGF0YSgpe3JldHVybiB0aGlzLmFuYWx5c2VyLmdldEJ5dGVGcmVxdWVuY3lEYXRhKHRoaXMuZGF0YSksdGhpcy5kYXRhfWdldEF2ZXJhZ2VGcmVxdWVuY3koKXtsZXQgdD0wO2NvbnN0IGU9dGhpcy5nZXRGcmVxdWVuY3lEYXRhKCk7Zm9yKGxldCBuPTA7bjxlLmxlbmd0aDtuKyspdCs9ZVtuXTtyZXR1cm4gdC9lLmxlbmd0aH19ZnVuY3Rpb24gZmQodCxlLG4pe2xldCByLGksbztzd2l0Y2godGhpcy5iaW5kaW5nPXQsdGhpcy52YWx1ZVNpemU9bixlKXtjYXNlXCJxdWF0ZXJuaW9uXCI6cj10aGlzLl9zbGVycCxpPXRoaXMuX3NsZXJwQWRkaXRpdmUsbz10aGlzLl9zZXRBZGRpdGl2ZUlkZW50aXR5UXVhdGVybmlvbix0aGlzLmJ1ZmZlcj1uZXcgRmxvYXQ2NEFycmF5KDYqbiksdGhpcy5fd29ya0luZGV4PTU7YnJlYWs7Y2FzZVwic3RyaW5nXCI6Y2FzZVwiYm9vbFwiOnI9dGhpcy5fc2VsZWN0LGk9dGhpcy5fc2VsZWN0LG89dGhpcy5fc2V0QWRkaXRpdmVJZGVudGl0eU90aGVyLHRoaXMuYnVmZmVyPW5ldyBBcnJheSg1Km4pO2JyZWFrO2RlZmF1bHQ6cj10aGlzLl9sZXJwLGk9dGhpcy5fbGVycEFkZGl0aXZlLG89dGhpcy5fc2V0QWRkaXRpdmVJZGVudGl0eU51bWVyaWMsdGhpcy5idWZmZXI9bmV3IEZsb2F0NjRBcnJheSg1Km4pfXRoaXMuX21peEJ1ZmZlclJlZ2lvbj1yLHRoaXMuX21peEJ1ZmZlclJlZ2lvbkFkZGl0aXZlPWksdGhpcy5fc2V0SWRlbnRpdHk9byx0aGlzLl9vcmlnSW5kZXg9Myx0aGlzLl9hZGRJbmRleD00LHRoaXMuY3VtdWxhdGl2ZVdlaWdodD0wLHRoaXMuY3VtdWxhdGl2ZVdlaWdodEFkZGl0aXZlPTAsdGhpcy51c2VDb3VudD0wLHRoaXMucmVmZXJlbmNlQ291bnQ9MH1PYmplY3QuYXNzaWduKGZkLnByb3RvdHlwZSx7YWNjdW11bGF0ZTpmdW5jdGlvbih0LGUpe2NvbnN0IG49dGhpcy5idWZmZXIscj10aGlzLnZhbHVlU2l6ZSxpPXQqcityO2xldCBvPXRoaXMuY3VtdWxhdGl2ZVdlaWdodDtpZigwPT09byl7Zm9yKGxldCB0PTA7dCE9PXI7Kyt0KW5baSt0XT1uW3RdO289ZX1lbHNle28rPWU7Y29uc3QgdD1lL287dGhpcy5fbWl4QnVmZmVyUmVnaW9uKG4saSwwLHQscil9dGhpcy5jdW11bGF0aXZlV2VpZ2h0PW99LGFjY3VtdWxhdGVBZGRpdGl2ZTpmdW5jdGlvbih0KXtjb25zdCBlPXRoaXMuYnVmZmVyLG49dGhpcy52YWx1ZVNpemUscj1uKnRoaXMuX2FkZEluZGV4OzA9PT10aGlzLmN1bXVsYXRpdmVXZWlnaHRBZGRpdGl2ZSYmdGhpcy5fc2V0SWRlbnRpdHkoKSx0aGlzLl9taXhCdWZmZXJSZWdpb25BZGRpdGl2ZShlLHIsMCx0LG4pLHRoaXMuY3VtdWxhdGl2ZVdlaWdodEFkZGl0aXZlKz10fSxhcHBseTpmdW5jdGlvbih0KXtjb25zdCBlPXRoaXMudmFsdWVTaXplLG49dGhpcy5idWZmZXIscj10KmUrZSxpPXRoaXMuY3VtdWxhdGl2ZVdlaWdodCxvPXRoaXMuY3VtdWxhdGl2ZVdlaWdodEFkZGl0aXZlLGE9dGhpcy5iaW5kaW5nO2lmKHRoaXMuY3VtdWxhdGl2ZVdlaWdodD0wLHRoaXMuY3VtdWxhdGl2ZVdlaWdodEFkZGl0aXZlPTAsaTwxKXtjb25zdCB0PWUqdGhpcy5fb3JpZ0luZGV4O3RoaXMuX21peEJ1ZmZlclJlZ2lvbihuLHIsdCwxLWksZSl9bz4wJiZ0aGlzLl9taXhCdWZmZXJSZWdpb25BZGRpdGl2ZShuLHIsdGhpcy5fYWRkSW5kZXgqZSwxLGUpO2ZvcihsZXQgdD1lLGk9ZStlO3QhPT1pOysrdClpZihuW3RdIT09blt0K2VdKXthLnNldFZhbHVlKG4scik7YnJlYWt9fSxzYXZlT3JpZ2luYWxTdGF0ZTpmdW5jdGlvbigpe2NvbnN0IHQ9dGhpcy5iaW5kaW5nLGU9dGhpcy5idWZmZXIsbj10aGlzLnZhbHVlU2l6ZSxyPW4qdGhpcy5fb3JpZ0luZGV4O3QuZ2V0VmFsdWUoZSxyKTtmb3IobGV0IHQ9bixpPXI7dCE9PWk7Kyt0KWVbdF09ZVtyK3Qlbl07dGhpcy5fc2V0SWRlbnRpdHkoKSx0aGlzLmN1bXVsYXRpdmVXZWlnaHQ9MCx0aGlzLmN1bXVsYXRpdmVXZWlnaHRBZGRpdGl2ZT0wfSxyZXN0b3JlT3JpZ2luYWxTdGF0ZTpmdW5jdGlvbigpe2NvbnN0IHQ9Myp0aGlzLnZhbHVlU2l6ZTt0aGlzLmJpbmRpbmcuc2V0VmFsdWUodGhpcy5idWZmZXIsdCl9LF9zZXRBZGRpdGl2ZUlkZW50aXR5TnVtZXJpYzpmdW5jdGlvbigpe2NvbnN0IHQ9dGhpcy5fYWRkSW5kZXgqdGhpcy52YWx1ZVNpemUsZT10K3RoaXMudmFsdWVTaXplO2ZvcihsZXQgbj10O248ZTtuKyspdGhpcy5idWZmZXJbbl09MH0sX3NldEFkZGl0aXZlSWRlbnRpdHlRdWF0ZXJuaW9uOmZ1bmN0aW9uKCl7dGhpcy5fc2V0QWRkaXRpdmVJZGVudGl0eU51bWVyaWMoKSx0aGlzLmJ1ZmZlclt0aGlzLl9hZGRJbmRleCp0aGlzLnZhbHVlU2l6ZSszXT0xfSxfc2V0QWRkaXRpdmVJZGVudGl0eU90aGVyOmZ1bmN0aW9uKCl7Y29uc3QgdD10aGlzLl9vcmlnSW5kZXgqdGhpcy52YWx1ZVNpemUsZT10aGlzLl9hZGRJbmRleCp0aGlzLnZhbHVlU2l6ZTtmb3IobGV0IG49MDtuPHRoaXMudmFsdWVTaXplO24rKyl0aGlzLmJ1ZmZlcltlK25dPXRoaXMuYnVmZmVyW3Qrbl19LF9zZWxlY3Q6ZnVuY3Rpb24odCxlLG4scixpKXtpZihyPj0uNSlmb3IobGV0IHI9MDtyIT09aTsrK3IpdFtlK3JdPXRbbityXX0sX3NsZXJwOmZ1bmN0aW9uKHQsZSxuLHIpe0puLnNsZXJwRmxhdCh0LGUsdCxlLHQsbixyKX0sX3NsZXJwQWRkaXRpdmU6ZnVuY3Rpb24odCxlLG4scixpKXtjb25zdCBvPXRoaXMuX3dvcmtJbmRleCppO0puLm11bHRpcGx5UXVhdGVybmlvbnNGbGF0KHQsbyx0LGUsdCxuKSxKbi5zbGVycEZsYXQodCxlLHQsZSx0LG8scil9LF9sZXJwOmZ1bmN0aW9uKHQsZSxuLHIsaSl7Y29uc3Qgbz0xLXI7Zm9yKGxldCBhPTA7YSE9PWk7KythKXtjb25zdCBpPWUrYTt0W2ldPXRbaV0qbyt0W24rYV0qcn19LF9sZXJwQWRkaXRpdmU6ZnVuY3Rpb24odCxlLG4scixpKXtmb3IobGV0IG89MDtvIT09aTsrK28pe2NvbnN0IGk9ZStvO3RbaV09dFtpXSt0W24rb10qcn19fSk7Y29uc3QgbWQ9bmV3IFJlZ0V4cChcIltcXFxcW1xcXFxdXFxcXC46XFxcXC9dXCIsXCJnXCIpLGdkPVwiW15cIitcIlxcXFxbXFxcXF1cXFxcLjpcXFxcL1wiLnJlcGxhY2UoXCJcXFxcLlwiLFwiXCIpK1wiXVwiLHZkPS8oKD86V0MrW1xcLzpdKSopLy5zb3VyY2UucmVwbGFjZShcIldDXCIsXCJbXlxcXFxbXFxcXF1cXFxcLjpcXFxcL11cIikseWQ9LyhXQ09EKyk/Ly5zb3VyY2UucmVwbGFjZShcIldDT0RcIixnZCkseGQ9Lyg/OlxcLihXQyspKD86XFxbKC4rKVxcXSk/KT8vLnNvdXJjZS5yZXBsYWNlKFwiV0NcIixcIlteXFxcXFtcXFxcXVxcXFwuOlxcXFwvXVwiKSxiZD0vXFwuKFdDKykoPzpcXFsoLispXFxdKT8vLnNvdXJjZS5yZXBsYWNlKFwiV0NcIixcIlteXFxcXFtcXFxcXVxcXFwuOlxcXFwvXVwiKSx3ZD1uZXcgUmVnRXhwKFwiXlwiK3ZkK3lkK3hkK2JkK1wiJFwiKSxfZD1bXCJtYXRlcmlhbFwiLFwibWF0ZXJpYWxzXCIsXCJib25lc1wiXTtmdW5jdGlvbiBNZCh0LGUsbil7Y29uc3Qgcj1ufHxTZC5wYXJzZVRyYWNrTmFtZShlKTt0aGlzLl90YXJnZXRHcm91cD10LHRoaXMuX2JpbmRpbmdzPXQuc3Vic2NyaWJlXyhlLHIpfWZ1bmN0aW9uIFNkKHQsZSxuKXt0aGlzLnBhdGg9ZSx0aGlzLnBhcnNlZFBhdGg9bnx8U2QucGFyc2VUcmFja05hbWUoZSksdGhpcy5ub2RlPVNkLmZpbmROb2RlKHQsdGhpcy5wYXJzZWRQYXRoLm5vZGVOYW1lKXx8dCx0aGlzLnJvb3ROb2RlPXR9ZnVuY3Rpb24gVGQoKXt0aGlzLnV1aWQ9em4uZ2VuZXJhdGVVVUlEKCksdGhpcy5fb2JqZWN0cz1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpLHRoaXMubkNhY2hlZE9iamVjdHNfPTA7Y29uc3QgdD17fTt0aGlzLl9pbmRpY2VzQnlVVUlEPXQ7Zm9yKGxldCBlPTAsbj1hcmd1bWVudHMubGVuZ3RoO2UhPT1uOysrZSl0W2FyZ3VtZW50c1tlXS51dWlkXT1lO3RoaXMuX3BhdGhzPVtdLHRoaXMuX3BhcnNlZFBhdGhzPVtdLHRoaXMuX2JpbmRpbmdzPVtdLHRoaXMuX2JpbmRpbmdzSW5kaWNlc0J5UGF0aD17fTtjb25zdCBlPXRoaXM7dGhpcy5zdGF0cz17b2JqZWN0czp7Z2V0IHRvdGFsKCl7cmV0dXJuIGUuX29iamVjdHMubGVuZ3RofSxnZXQgaW5Vc2UoKXtyZXR1cm4gdGhpcy50b3RhbC1lLm5DYWNoZWRPYmplY3RzX319LGdldCBiaW5kaW5nc1Blck9iamVjdCgpe3JldHVybiBlLl9iaW5kaW5ncy5sZW5ndGh9fX1PYmplY3QuYXNzaWduKE1kLnByb3RvdHlwZSx7Z2V0VmFsdWU6ZnVuY3Rpb24odCxlKXt0aGlzLmJpbmQoKTtjb25zdCBuPXRoaXMuX3RhcmdldEdyb3VwLm5DYWNoZWRPYmplY3RzXyxyPXRoaXMuX2JpbmRpbmdzW25dO3ZvaWQgMCE9PXImJnIuZ2V0VmFsdWUodCxlKX0sc2V0VmFsdWU6ZnVuY3Rpb24odCxlKXtjb25zdCBuPXRoaXMuX2JpbmRpbmdzO2ZvcihsZXQgcj10aGlzLl90YXJnZXRHcm91cC5uQ2FjaGVkT2JqZWN0c18saT1uLmxlbmd0aDtyIT09aTsrK3IpbltyXS5zZXRWYWx1ZSh0LGUpfSxiaW5kOmZ1bmN0aW9uKCl7Y29uc3QgdD10aGlzLl9iaW5kaW5ncztmb3IobGV0IGU9dGhpcy5fdGFyZ2V0R3JvdXAubkNhY2hlZE9iamVjdHNfLG49dC5sZW5ndGg7ZSE9PW47KytlKXRbZV0uYmluZCgpfSx1bmJpbmQ6ZnVuY3Rpb24oKXtjb25zdCB0PXRoaXMuX2JpbmRpbmdzO2ZvcihsZXQgZT10aGlzLl90YXJnZXRHcm91cC5uQ2FjaGVkT2JqZWN0c18sbj10Lmxlbmd0aDtlIT09bjsrK2UpdFtlXS51bmJpbmQoKX19KSxPYmplY3QuYXNzaWduKFNkLHtDb21wb3NpdGU6TWQsY3JlYXRlOmZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdCYmdC5pc0FuaW1hdGlvbk9iamVjdEdyb3VwP25ldyBTZC5Db21wb3NpdGUodCxlLG4pOm5ldyBTZCh0LGUsbil9LHNhbml0aXplTm9kZU5hbWU6ZnVuY3Rpb24odCl7cmV0dXJuIHQucmVwbGFjZSgvXFxzL2csXCJfXCIpLnJlcGxhY2UobWQsXCJcIil9LHBhcnNlVHJhY2tOYW1lOmZ1bmN0aW9uKHQpe2NvbnN0IGU9d2QuZXhlYyh0KTtpZighZSl0aHJvdyBuZXcgRXJyb3IoXCJQcm9wZXJ0eUJpbmRpbmc6IENhbm5vdCBwYXJzZSB0cmFja05hbWU6IFwiK3QpO2NvbnN0IG49e25vZGVOYW1lOmVbMl0sb2JqZWN0TmFtZTplWzNdLG9iamVjdEluZGV4OmVbNF0scHJvcGVydHlOYW1lOmVbNV0scHJvcGVydHlJbmRleDplWzZdfSxyPW4ubm9kZU5hbWUmJm4ubm9kZU5hbWUubGFzdEluZGV4T2YoXCIuXCIpO2lmKHZvaWQgMCE9PXImJi0xIT09cil7Y29uc3QgdD1uLm5vZGVOYW1lLnN1YnN0cmluZyhyKzEpOy0xIT09X2QuaW5kZXhPZih0KSYmKG4ubm9kZU5hbWU9bi5ub2RlTmFtZS5zdWJzdHJpbmcoMCxyKSxuLm9iamVjdE5hbWU9dCl9aWYobnVsbD09PW4ucHJvcGVydHlOYW1lfHwwPT09bi5wcm9wZXJ0eU5hbWUubGVuZ3RoKXRocm93IG5ldyBFcnJvcihcIlByb3BlcnR5QmluZGluZzogY2FuIG5vdCBwYXJzZSBwcm9wZXJ0eU5hbWUgZnJvbSB0cmFja05hbWU6IFwiK3QpO3JldHVybiBufSxmaW5kTm9kZTpmdW5jdGlvbih0LGUpe2lmKCFlfHxcIlwiPT09ZXx8XCIuXCI9PT1lfHwtMT09PWV8fGU9PT10Lm5hbWV8fGU9PT10LnV1aWQpcmV0dXJuIHQ7aWYodC5za2VsZXRvbil7Y29uc3Qgbj10LnNrZWxldG9uLmdldEJvbmVCeU5hbWUoZSk7aWYodm9pZCAwIT09bilyZXR1cm4gbn1pZih0LmNoaWxkcmVuKXtjb25zdCBuPWZ1bmN0aW9uKHQpe2ZvcihsZXQgcj0wO3I8dC5sZW5ndGg7cisrKXtjb25zdCBpPXRbcl07aWYoaS5uYW1lPT09ZXx8aS51dWlkPT09ZSlyZXR1cm4gaTtjb25zdCBvPW4oaS5jaGlsZHJlbik7aWYobylyZXR1cm4gb31yZXR1cm4gbnVsbH0scj1uKHQuY2hpbGRyZW4pO2lmKHIpcmV0dXJuIHJ9cmV0dXJuIG51bGx9fSksT2JqZWN0LmFzc2lnbihTZC5wcm90b3R5cGUse19nZXRWYWx1ZV91bmF2YWlsYWJsZTpmdW5jdGlvbigpe30sX3NldFZhbHVlX3VuYXZhaWxhYmxlOmZ1bmN0aW9uKCl7fSxCaW5kaW5nVHlwZTp7RGlyZWN0OjAsRW50aXJlQXJyYXk6MSxBcnJheUVsZW1lbnQ6MixIYXNGcm9tVG9BcnJheTozfSxWZXJzaW9uaW5nOntOb25lOjAsTmVlZHNVcGRhdGU6MSxNYXRyaXhXb3JsZE5lZWRzVXBkYXRlOjJ9LEdldHRlckJ5QmluZGluZ1R5cGU6W2Z1bmN0aW9uKHQsZSl7dFtlXT10aGlzLm5vZGVbdGhpcy5wcm9wZXJ0eU5hbWVdfSxmdW5jdGlvbih0LGUpe2NvbnN0IG49dGhpcy5yZXNvbHZlZFByb3BlcnR5O2ZvcihsZXQgcj0wLGk9bi5sZW5ndGg7ciE9PWk7KytyKXRbZSsrXT1uW3JdfSxmdW5jdGlvbih0LGUpe3RbZV09dGhpcy5yZXNvbHZlZFByb3BlcnR5W3RoaXMucHJvcGVydHlJbmRleF19LGZ1bmN0aW9uKHQsZSl7dGhpcy5yZXNvbHZlZFByb3BlcnR5LnRvQXJyYXkodCxlKX1dLFNldHRlckJ5QmluZGluZ1R5cGVBbmRWZXJzaW9uaW5nOltbZnVuY3Rpb24odCxlKXt0aGlzLnRhcmdldE9iamVjdFt0aGlzLnByb3BlcnR5TmFtZV09dFtlXX0sZnVuY3Rpb24odCxlKXt0aGlzLnRhcmdldE9iamVjdFt0aGlzLnByb3BlcnR5TmFtZV09dFtlXSx0aGlzLnRhcmdldE9iamVjdC5uZWVkc1VwZGF0ZT0hMH0sZnVuY3Rpb24odCxlKXt0aGlzLnRhcmdldE9iamVjdFt0aGlzLnByb3BlcnR5TmFtZV09dFtlXSx0aGlzLnRhcmdldE9iamVjdC5tYXRyaXhXb3JsZE5lZWRzVXBkYXRlPSEwfV0sW2Z1bmN0aW9uKHQsZSl7Y29uc3Qgbj10aGlzLnJlc29sdmVkUHJvcGVydHk7Zm9yKGxldCByPTAsaT1uLmxlbmd0aDtyIT09aTsrK3IpbltyXT10W2UrK119LGZ1bmN0aW9uKHQsZSl7Y29uc3Qgbj10aGlzLnJlc29sdmVkUHJvcGVydHk7Zm9yKGxldCByPTAsaT1uLmxlbmd0aDtyIT09aTsrK3IpbltyXT10W2UrK107dGhpcy50YXJnZXRPYmplY3QubmVlZHNVcGRhdGU9ITB9LGZ1bmN0aW9uKHQsZSl7Y29uc3Qgbj10aGlzLnJlc29sdmVkUHJvcGVydHk7Zm9yKGxldCByPTAsaT1uLmxlbmd0aDtyIT09aTsrK3IpbltyXT10W2UrK107dGhpcy50YXJnZXRPYmplY3QubWF0cml4V29ybGROZWVkc1VwZGF0ZT0hMH1dLFtmdW5jdGlvbih0LGUpe3RoaXMucmVzb2x2ZWRQcm9wZXJ0eVt0aGlzLnByb3BlcnR5SW5kZXhdPXRbZV19LGZ1bmN0aW9uKHQsZSl7dGhpcy5yZXNvbHZlZFByb3BlcnR5W3RoaXMucHJvcGVydHlJbmRleF09dFtlXSx0aGlzLnRhcmdldE9iamVjdC5uZWVkc1VwZGF0ZT0hMH0sZnVuY3Rpb24odCxlKXt0aGlzLnJlc29sdmVkUHJvcGVydHlbdGhpcy5wcm9wZXJ0eUluZGV4XT10W2VdLHRoaXMudGFyZ2V0T2JqZWN0Lm1hdHJpeFdvcmxkTmVlZHNVcGRhdGU9ITB9XSxbZnVuY3Rpb24odCxlKXt0aGlzLnJlc29sdmVkUHJvcGVydHkuZnJvbUFycmF5KHQsZSl9LGZ1bmN0aW9uKHQsZSl7dGhpcy5yZXNvbHZlZFByb3BlcnR5LmZyb21BcnJheSh0LGUpLHRoaXMudGFyZ2V0T2JqZWN0Lm5lZWRzVXBkYXRlPSEwfSxmdW5jdGlvbih0LGUpe3RoaXMucmVzb2x2ZWRQcm9wZXJ0eS5mcm9tQXJyYXkodCxlKSx0aGlzLnRhcmdldE9iamVjdC5tYXRyaXhXb3JsZE5lZWRzVXBkYXRlPSEwfV1dLGdldFZhbHVlOmZ1bmN0aW9uKHQsZSl7dGhpcy5iaW5kKCksdGhpcy5nZXRWYWx1ZSh0LGUpfSxzZXRWYWx1ZTpmdW5jdGlvbih0LGUpe3RoaXMuYmluZCgpLHRoaXMuc2V0VmFsdWUodCxlKX0sYmluZDpmdW5jdGlvbigpe2xldCB0PXRoaXMubm9kZTtjb25zdCBlPXRoaXMucGFyc2VkUGF0aCxuPWUub2JqZWN0TmFtZSxyPWUucHJvcGVydHlOYW1lO2xldCBpPWUucHJvcGVydHlJbmRleDtpZih0fHwodD1TZC5maW5kTm9kZSh0aGlzLnJvb3ROb2RlLGUubm9kZU5hbWUpfHx0aGlzLnJvb3ROb2RlLHRoaXMubm9kZT10KSx0aGlzLmdldFZhbHVlPXRoaXMuX2dldFZhbHVlX3VuYXZhaWxhYmxlLHRoaXMuc2V0VmFsdWU9dGhpcy5fc2V0VmFsdWVfdW5hdmFpbGFibGUsIXQpcmV0dXJuIHZvaWQgY29uc29sZS5lcnJvcihcIlRIUkVFLlByb3BlcnR5QmluZGluZzogVHJ5aW5nIHRvIHVwZGF0ZSBub2RlIGZvciB0cmFjazogXCIrdGhpcy5wYXRoK1wiIGJ1dCBpdCB3YXNuJ3QgZm91bmQuXCIpO2lmKG4pe2xldCByPWUub2JqZWN0SW5kZXg7c3dpdGNoKG4pe2Nhc2VcIm1hdGVyaWFsc1wiOmlmKCF0Lm1hdGVyaWFsKXJldHVybiB2b2lkIGNvbnNvbGUuZXJyb3IoXCJUSFJFRS5Qcm9wZXJ0eUJpbmRpbmc6IENhbiBub3QgYmluZCB0byBtYXRlcmlhbCBhcyBub2RlIGRvZXMgbm90IGhhdmUgYSBtYXRlcmlhbC5cIix0aGlzKTtpZighdC5tYXRlcmlhbC5tYXRlcmlhbHMpcmV0dXJuIHZvaWQgY29uc29sZS5lcnJvcihcIlRIUkVFLlByb3BlcnR5QmluZGluZzogQ2FuIG5vdCBiaW5kIHRvIG1hdGVyaWFsLm1hdGVyaWFscyBhcyBub2RlLm1hdGVyaWFsIGRvZXMgbm90IGhhdmUgYSBtYXRlcmlhbHMgYXJyYXkuXCIsdGhpcyk7dD10Lm1hdGVyaWFsLm1hdGVyaWFsczticmVhaztjYXNlXCJib25lc1wiOmlmKCF0LnNrZWxldG9uKXJldHVybiB2b2lkIGNvbnNvbGUuZXJyb3IoXCJUSFJFRS5Qcm9wZXJ0eUJpbmRpbmc6IENhbiBub3QgYmluZCB0byBib25lcyBhcyBub2RlIGRvZXMgbm90IGhhdmUgYSBza2VsZXRvbi5cIix0aGlzKTt0PXQuc2tlbGV0b24uYm9uZXM7Zm9yKGxldCBlPTA7ZTx0Lmxlbmd0aDtlKyspaWYodFtlXS5uYW1lPT09cil7cj1lO2JyZWFrfWJyZWFrO2RlZmF1bHQ6aWYodm9pZCAwPT09dFtuXSlyZXR1cm4gdm9pZCBjb25zb2xlLmVycm9yKFwiVEhSRUUuUHJvcGVydHlCaW5kaW5nOiBDYW4gbm90IGJpbmQgdG8gb2JqZWN0TmFtZSBvZiBub2RlIHVuZGVmaW5lZC5cIix0aGlzKTt0PXRbbl19aWYodm9pZCAwIT09cil7aWYodm9pZCAwPT09dFtyXSlyZXR1cm4gdm9pZCBjb25zb2xlLmVycm9yKFwiVEhSRUUuUHJvcGVydHlCaW5kaW5nOiBUcnlpbmcgdG8gYmluZCB0byBvYmplY3RJbmRleCBvZiBvYmplY3ROYW1lLCBidXQgaXMgdW5kZWZpbmVkLlwiLHRoaXMsdCk7dD10W3JdfX1jb25zdCBvPXRbcl07aWYodm9pZCAwPT09byl7Y29uc3Qgbj1lLm5vZGVOYW1lO3JldHVybiB2b2lkIGNvbnNvbGUuZXJyb3IoXCJUSFJFRS5Qcm9wZXJ0eUJpbmRpbmc6IFRyeWluZyB0byB1cGRhdGUgcHJvcGVydHkgZm9yIHRyYWNrOiBcIituK1wiLlwiK3IrXCIgYnV0IGl0IHdhc24ndCBmb3VuZC5cIix0KX1sZXQgYT10aGlzLlZlcnNpb25pbmcuTm9uZTt0aGlzLnRhcmdldE9iamVjdD10LHZvaWQgMCE9PXQubmVlZHNVcGRhdGU/YT10aGlzLlZlcnNpb25pbmcuTmVlZHNVcGRhdGU6dm9pZCAwIT09dC5tYXRyaXhXb3JsZE5lZWRzVXBkYXRlJiYoYT10aGlzLlZlcnNpb25pbmcuTWF0cml4V29ybGROZWVkc1VwZGF0ZSk7bGV0IHM9dGhpcy5CaW5kaW5nVHlwZS5EaXJlY3Q7aWYodm9pZCAwIT09aSl7aWYoXCJtb3JwaFRhcmdldEluZmx1ZW5jZXNcIj09PXIpe2lmKCF0Lmdlb21ldHJ5KXJldHVybiB2b2lkIGNvbnNvbGUuZXJyb3IoXCJUSFJFRS5Qcm9wZXJ0eUJpbmRpbmc6IENhbiBub3QgYmluZCB0byBtb3JwaFRhcmdldEluZmx1ZW5jZXMgYmVjYXVzZSBub2RlIGRvZXMgbm90IGhhdmUgYSBnZW9tZXRyeS5cIix0aGlzKTtpZighdC5nZW9tZXRyeS5pc0J1ZmZlckdlb21ldHJ5KXJldHVybiB2b2lkIGNvbnNvbGUuZXJyb3IoXCJUSFJFRS5Qcm9wZXJ0eUJpbmRpbmc6IENhbiBub3QgYmluZCB0byBtb3JwaFRhcmdldEluZmx1ZW5jZXMgb24gVEhSRUUuR2VvbWV0cnkuIFVzZSBUSFJFRS5CdWZmZXJHZW9tZXRyeSBpbnN0ZWFkLlwiLHRoaXMpO2lmKCF0Lmdlb21ldHJ5Lm1vcnBoQXR0cmlidXRlcylyZXR1cm4gdm9pZCBjb25zb2xlLmVycm9yKFwiVEhSRUUuUHJvcGVydHlCaW5kaW5nOiBDYW4gbm90IGJpbmQgdG8gbW9ycGhUYXJnZXRJbmZsdWVuY2VzIGJlY2F1c2Ugbm9kZSBkb2VzIG5vdCBoYXZlIGEgZ2VvbWV0cnkubW9ycGhBdHRyaWJ1dGVzLlwiLHRoaXMpO3ZvaWQgMCE9PXQubW9ycGhUYXJnZXREaWN0aW9uYXJ5W2ldJiYoaT10Lm1vcnBoVGFyZ2V0RGljdGlvbmFyeVtpXSl9cz10aGlzLkJpbmRpbmdUeXBlLkFycmF5RWxlbWVudCx0aGlzLnJlc29sdmVkUHJvcGVydHk9byx0aGlzLnByb3BlcnR5SW5kZXg9aX1lbHNlIHZvaWQgMCE9PW8uZnJvbUFycmF5JiZ2b2lkIDAhPT1vLnRvQXJyYXk/KHM9dGhpcy5CaW5kaW5nVHlwZS5IYXNGcm9tVG9BcnJheSx0aGlzLnJlc29sdmVkUHJvcGVydHk9byk6QXJyYXkuaXNBcnJheShvKT8ocz10aGlzLkJpbmRpbmdUeXBlLkVudGlyZUFycmF5LHRoaXMucmVzb2x2ZWRQcm9wZXJ0eT1vKTp0aGlzLnByb3BlcnR5TmFtZT1yO3RoaXMuZ2V0VmFsdWU9dGhpcy5HZXR0ZXJCeUJpbmRpbmdUeXBlW3NdLHRoaXMuc2V0VmFsdWU9dGhpcy5TZXR0ZXJCeUJpbmRpbmdUeXBlQW5kVmVyc2lvbmluZ1tzXVthXX0sdW5iaW5kOmZ1bmN0aW9uKCl7dGhpcy5ub2RlPW51bGwsdGhpcy5nZXRWYWx1ZT10aGlzLl9nZXRWYWx1ZV91bmJvdW5kLHRoaXMuc2V0VmFsdWU9dGhpcy5fc2V0VmFsdWVfdW5ib3VuZH19KSxPYmplY3QuYXNzaWduKFNkLnByb3RvdHlwZSx7X2dldFZhbHVlX3VuYm91bmQ6U2QucHJvdG90eXBlLmdldFZhbHVlLF9zZXRWYWx1ZV91bmJvdW5kOlNkLnByb3RvdHlwZS5zZXRWYWx1ZX0pLE9iamVjdC5hc3NpZ24oVGQucHJvdG90eXBlLHtpc0FuaW1hdGlvbk9iamVjdEdyb3VwOiEwLGFkZDpmdW5jdGlvbigpe2NvbnN0IHQ9dGhpcy5fb2JqZWN0cyxlPXRoaXMuX2luZGljZXNCeVVVSUQsbj10aGlzLl9wYXRocyxyPXRoaXMuX3BhcnNlZFBhdGhzLGk9dGhpcy5fYmluZGluZ3Msbz1pLmxlbmd0aDtsZXQgYT12b2lkIDAscz10Lmxlbmd0aCxjPXRoaXMubkNhY2hlZE9iamVjdHNfO2ZvcihsZXQgbD0wLHU9YXJndW1lbnRzLmxlbmd0aDtsIT09dTsrK2wpe2NvbnN0IHU9YXJndW1lbnRzW2xdLGg9dS51dWlkO2xldCBkPWVbaF07aWYodm9pZCAwPT09ZCl7ZD1zKyssZVtoXT1kLHQucHVzaCh1KTtmb3IobGV0IHQ9MCxlPW87dCE9PWU7Kyt0KWlbdF0ucHVzaChuZXcgU2QodSxuW3RdLHJbdF0pKX1lbHNlIGlmKGQ8Yyl7YT10W2RdO2NvbnN0IHM9LS1jLGw9dFtzXTtlW2wudXVpZF09ZCx0W2RdPWwsZVtoXT1zLHRbc109dTtmb3IobGV0IHQ9MCxlPW87dCE9PWU7Kyt0KXtjb25zdCBlPWlbdF0sbz1lW3NdO2xldCBhPWVbZF07ZVtkXT1vLHZvaWQgMD09PWEmJihhPW5ldyBTZCh1LG5bdF0sclt0XSkpLGVbc109YX19ZWxzZSB0W2RdIT09YSYmY29uc29sZS5lcnJvcihcIlRIUkVFLkFuaW1hdGlvbk9iamVjdEdyb3VwOiBEaWZmZXJlbnQgb2JqZWN0cyB3aXRoIHRoZSBzYW1lIFVVSUQgZGV0ZWN0ZWQuIENsZWFuIHRoZSBjYWNoZXMgb3IgcmVjcmVhdGUgeW91ciBpbmZyYXN0cnVjdHVyZSB3aGVuIHJlbG9hZGluZyBzY2VuZXMuXCIpfXRoaXMubkNhY2hlZE9iamVjdHNfPWN9LHJlbW92ZTpmdW5jdGlvbigpe2NvbnN0IHQ9dGhpcy5fb2JqZWN0cyxlPXRoaXMuX2luZGljZXNCeVVVSUQsbj10aGlzLl9iaW5kaW5ncyxyPW4ubGVuZ3RoO2xldCBpPXRoaXMubkNhY2hlZE9iamVjdHNfO2ZvcihsZXQgbz0wLGE9YXJndW1lbnRzLmxlbmd0aDtvIT09YTsrK28pe2NvbnN0IGE9YXJndW1lbnRzW29dLHM9YS51dWlkLGM9ZVtzXTtpZih2b2lkIDAhPT1jJiZjPj1pKXtjb25zdCBvPWkrKyxsPXRbb107ZVtsLnV1aWRdPWMsdFtjXT1sLGVbc109byx0W29dPWE7Zm9yKGxldCB0PTAsZT1yO3QhPT1lOysrdCl7Y29uc3QgZT1uW3RdLHI9ZVtvXSxpPWVbY107ZVtjXT1yLGVbb109aX19fXRoaXMubkNhY2hlZE9iamVjdHNfPWl9LHVuY2FjaGU6ZnVuY3Rpb24oKXtjb25zdCB0PXRoaXMuX29iamVjdHMsZT10aGlzLl9pbmRpY2VzQnlVVUlELG49dGhpcy5fYmluZGluZ3Mscj1uLmxlbmd0aDtsZXQgaT10aGlzLm5DYWNoZWRPYmplY3RzXyxvPXQubGVuZ3RoO2ZvcihsZXQgYT0wLHM9YXJndW1lbnRzLmxlbmd0aDthIT09czsrK2Epe2NvbnN0IHM9YXJndW1lbnRzW2FdLnV1aWQsYz1lW3NdO2lmKHZvaWQgMCE9PWMpaWYoZGVsZXRlIGVbc10sYzxpKXtjb25zdCBhPS0taSxzPXRbYV0sbD0tLW8sdT10W2xdO2Vbcy51dWlkXT1jLHRbY109cyxlW3UudXVpZF09YSx0W2FdPXUsdC5wb3AoKTtmb3IobGV0IHQ9MCxlPXI7dCE9PWU7Kyt0KXtjb25zdCBlPW5bdF0scj1lW2FdLGk9ZVtsXTtlW2NdPXIsZVthXT1pLGUucG9wKCl9fWVsc2V7Y29uc3QgaT0tLW8sYT10W2ldO2k+MCYmKGVbYS51dWlkXT1jKSx0W2NdPWEsdC5wb3AoKTtmb3IobGV0IHQ9MCxlPXI7dCE9PWU7Kyt0KXtjb25zdCBlPW5bdF07ZVtjXT1lW2ldLGUucG9wKCl9fX10aGlzLm5DYWNoZWRPYmplY3RzXz1pfSxzdWJzY3JpYmVfOmZ1bmN0aW9uKHQsZSl7Y29uc3Qgbj10aGlzLl9iaW5kaW5nc0luZGljZXNCeVBhdGg7bGV0IHI9blt0XTtjb25zdCBpPXRoaXMuX2JpbmRpbmdzO2lmKHZvaWQgMCE9PXIpcmV0dXJuIGlbcl07Y29uc3Qgbz10aGlzLl9wYXRocyxhPXRoaXMuX3BhcnNlZFBhdGhzLHM9dGhpcy5fb2JqZWN0cyxjPXMubGVuZ3RoLGw9dGhpcy5uQ2FjaGVkT2JqZWN0c18sdT1uZXcgQXJyYXkoYyk7cj1pLmxlbmd0aCxuW3RdPXIsby5wdXNoKHQpLGEucHVzaChlKSxpLnB1c2godSk7Zm9yKGxldCBuPWwscj1zLmxlbmd0aDtuIT09cjsrK24pe2NvbnN0IHI9c1tuXTt1W25dPW5ldyBTZChyLHQsZSl9cmV0dXJuIHV9LHVuc3Vic2NyaWJlXzpmdW5jdGlvbih0KXtjb25zdCBlPXRoaXMuX2JpbmRpbmdzSW5kaWNlc0J5UGF0aCxuPWVbdF07aWYodm9pZCAwIT09bil7Y29uc3Qgcj10aGlzLl9wYXRocyxpPXRoaXMuX3BhcnNlZFBhdGhzLG89dGhpcy5fYmluZGluZ3MsYT1vLmxlbmd0aC0xLHM9b1thXTtlW3RbYV1dPW4sb1tuXT1zLG8ucG9wKCksaVtuXT1pW2FdLGkucG9wKCkscltuXT1yW2FdLHIucG9wKCl9fX0pO2NsYXNzIEVke2NvbnN0cnVjdG9yKHQsZSxuPW51bGwscj1lLmJsZW5kTW9kZSl7dGhpcy5fbWl4ZXI9dCx0aGlzLl9jbGlwPWUsdGhpcy5fbG9jYWxSb290PW4sdGhpcy5ibGVuZE1vZGU9cjtjb25zdCBpPWUudHJhY2tzLG89aS5sZW5ndGgsYT1uZXcgQXJyYXkobykscz17ZW5kaW5nU3RhcnQ6a2UsZW5kaW5nRW5kOmtlfTtmb3IobGV0IHQ9MDt0IT09bzsrK3Qpe2NvbnN0IGU9aVt0XS5jcmVhdGVJbnRlcnBvbGFudChudWxsKTthW3RdPWUsZS5zZXR0aW5ncz1zfXRoaXMuX2ludGVycG9sYW50U2V0dGluZ3M9cyx0aGlzLl9pbnRlcnBvbGFudHM9YSx0aGlzLl9wcm9wZXJ0eUJpbmRpbmdzPW5ldyBBcnJheShvKSx0aGlzLl9jYWNoZUluZGV4PW51bGwsdGhpcy5fYnlDbGlwQ2FjaGVJbmRleD1udWxsLHRoaXMuX3RpbWVTY2FsZUludGVycG9sYW50PW51bGwsdGhpcy5fd2VpZ2h0SW50ZXJwb2xhbnQ9bnVsbCx0aGlzLmxvb3A9RmUsdGhpcy5fbG9vcENvdW50PS0xLHRoaXMuX3N0YXJ0VGltZT1udWxsLHRoaXMudGltZT0wLHRoaXMudGltZVNjYWxlPTEsdGhpcy5fZWZmZWN0aXZlVGltZVNjYWxlPTEsdGhpcy53ZWlnaHQ9MSx0aGlzLl9lZmZlY3RpdmVXZWlnaHQ9MSx0aGlzLnJlcGV0aXRpb25zPTEvMCx0aGlzLnBhdXNlZD0hMSx0aGlzLmVuYWJsZWQ9ITAsdGhpcy5jbGFtcFdoZW5GaW5pc2hlZD0hMSx0aGlzLnplcm9TbG9wZUF0U3RhcnQ9ITAsdGhpcy56ZXJvU2xvcGVBdEVuZD0hMH1wbGF5KCl7cmV0dXJuIHRoaXMuX21peGVyLl9hY3RpdmF0ZUFjdGlvbih0aGlzKSx0aGlzfXN0b3AoKXtyZXR1cm4gdGhpcy5fbWl4ZXIuX2RlYWN0aXZhdGVBY3Rpb24odGhpcyksdGhpcy5yZXNldCgpfXJlc2V0KCl7cmV0dXJuIHRoaXMucGF1c2VkPSExLHRoaXMuZW5hYmxlZD0hMCx0aGlzLnRpbWU9MCx0aGlzLl9sb29wQ291bnQ9LTEsdGhpcy5fc3RhcnRUaW1lPW51bGwsdGhpcy5zdG9wRmFkaW5nKCkuc3RvcFdhcnBpbmcoKX1pc1J1bm5pbmcoKXtyZXR1cm4gdGhpcy5lbmFibGVkJiYhdGhpcy5wYXVzZWQmJjAhPT10aGlzLnRpbWVTY2FsZSYmbnVsbD09PXRoaXMuX3N0YXJ0VGltZSYmdGhpcy5fbWl4ZXIuX2lzQWN0aXZlQWN0aW9uKHRoaXMpfWlzU2NoZWR1bGVkKCl7cmV0dXJuIHRoaXMuX21peGVyLl9pc0FjdGl2ZUFjdGlvbih0aGlzKX1zdGFydEF0KHQpe3JldHVybiB0aGlzLl9zdGFydFRpbWU9dCx0aGlzfXNldExvb3AodCxlKXtyZXR1cm4gdGhpcy5sb29wPXQsdGhpcy5yZXBldGl0aW9ucz1lLHRoaXN9c2V0RWZmZWN0aXZlV2VpZ2h0KHQpe3JldHVybiB0aGlzLndlaWdodD10LHRoaXMuX2VmZmVjdGl2ZVdlaWdodD10aGlzLmVuYWJsZWQ/dDowLHRoaXMuc3RvcEZhZGluZygpfWdldEVmZmVjdGl2ZVdlaWdodCgpe3JldHVybiB0aGlzLl9lZmZlY3RpdmVXZWlnaHR9ZmFkZUluKHQpe3JldHVybiB0aGlzLl9zY2hlZHVsZUZhZGluZyh0LDAsMSl9ZmFkZU91dCh0KXtyZXR1cm4gdGhpcy5fc2NoZWR1bGVGYWRpbmcodCwxLDApfWNyb3NzRmFkZUZyb20odCxlLG4pe2lmKHQuZmFkZU91dChlKSx0aGlzLmZhZGVJbihlKSxuKXtjb25zdCBuPXRoaXMuX2NsaXAuZHVyYXRpb24scj10Ll9jbGlwLmR1cmF0aW9uLGk9ci9uLG89bi9yO3Qud2FycCgxLGksZSksdGhpcy53YXJwKG8sMSxlKX1yZXR1cm4gdGhpc31jcm9zc0ZhZGVUbyh0LGUsbil7cmV0dXJuIHQuY3Jvc3NGYWRlRnJvbSh0aGlzLGUsbil9c3RvcEZhZGluZygpe2NvbnN0IHQ9dGhpcy5fd2VpZ2h0SW50ZXJwb2xhbnQ7cmV0dXJuIG51bGwhPT10JiYodGhpcy5fd2VpZ2h0SW50ZXJwb2xhbnQ9bnVsbCx0aGlzLl9taXhlci5fdGFrZUJhY2tDb250cm9sSW50ZXJwb2xhbnQodCkpLHRoaXN9c2V0RWZmZWN0aXZlVGltZVNjYWxlKHQpe3JldHVybiB0aGlzLnRpbWVTY2FsZT10LHRoaXMuX2VmZmVjdGl2ZVRpbWVTY2FsZT10aGlzLnBhdXNlZD8wOnQsdGhpcy5zdG9wV2FycGluZygpfWdldEVmZmVjdGl2ZVRpbWVTY2FsZSgpe3JldHVybiB0aGlzLl9lZmZlY3RpdmVUaW1lU2NhbGV9c2V0RHVyYXRpb24odCl7cmV0dXJuIHRoaXMudGltZVNjYWxlPXRoaXMuX2NsaXAuZHVyYXRpb24vdCx0aGlzLnN0b3BXYXJwaW5nKCl9c3luY1dpdGgodCl7cmV0dXJuIHRoaXMudGltZT10LnRpbWUsdGhpcy50aW1lU2NhbGU9dC50aW1lU2NhbGUsdGhpcy5zdG9wV2FycGluZygpfWhhbHQodCl7cmV0dXJuIHRoaXMud2FycCh0aGlzLl9lZmZlY3RpdmVUaW1lU2NhbGUsMCx0KX13YXJwKHQsZSxuKXtjb25zdCByPXRoaXMuX21peGVyLGk9ci50aW1lLG89dGhpcy50aW1lU2NhbGU7bGV0IGE9dGhpcy5fdGltZVNjYWxlSW50ZXJwb2xhbnQ7bnVsbD09PWEmJihhPXIuX2xlbmRDb250cm9sSW50ZXJwb2xhbnQoKSx0aGlzLl90aW1lU2NhbGVJbnRlcnBvbGFudD1hKTtjb25zdCBzPWEucGFyYW1ldGVyUG9zaXRpb25zLGM9YS5zYW1wbGVWYWx1ZXM7cmV0dXJuIHNbMF09aSxzWzFdPWkrbixjWzBdPXQvbyxjWzFdPWUvbyx0aGlzfXN0b3BXYXJwaW5nKCl7Y29uc3QgdD10aGlzLl90aW1lU2NhbGVJbnRlcnBvbGFudDtyZXR1cm4gbnVsbCE9PXQmJih0aGlzLl90aW1lU2NhbGVJbnRlcnBvbGFudD1udWxsLHRoaXMuX21peGVyLl90YWtlQmFja0NvbnRyb2xJbnRlcnBvbGFudCh0KSksdGhpc31nZXRNaXhlcigpe3JldHVybiB0aGlzLl9taXhlcn1nZXRDbGlwKCl7cmV0dXJuIHRoaXMuX2NsaXB9Z2V0Um9vdCgpe3JldHVybiB0aGlzLl9sb2NhbFJvb3R8fHRoaXMuX21peGVyLl9yb290fV91cGRhdGUodCxlLG4scil7aWYoIXRoaXMuZW5hYmxlZClyZXR1cm4gdm9pZCB0aGlzLl91cGRhdGVXZWlnaHQodCk7Y29uc3QgaT10aGlzLl9zdGFydFRpbWU7aWYobnVsbCE9PWkpe2NvbnN0IHI9KHQtaSkqbjtpZihyPDB8fDA9PT1uKXJldHVybjt0aGlzLl9zdGFydFRpbWU9bnVsbCxlPW4qcn1lKj10aGlzLl91cGRhdGVUaW1lU2NhbGUodCk7Y29uc3Qgbz10aGlzLl91cGRhdGVUaW1lKGUpLGE9dGhpcy5fdXBkYXRlV2VpZ2h0KHQpO2lmKGE+MCl7Y29uc3QgdD10aGlzLl9pbnRlcnBvbGFudHMsZT10aGlzLl9wcm9wZXJ0eUJpbmRpbmdzO3N3aXRjaCh0aGlzLmJsZW5kTW9kZSl7Y2FzZSBYZTpmb3IobGV0IG49MCxyPXQubGVuZ3RoO24hPT1yOysrbil0W25dLmV2YWx1YXRlKG8pLGVbbl0uYWNjdW11bGF0ZUFkZGl0aXZlKGEpO2JyZWFrO2Nhc2UgV2U6ZGVmYXVsdDpmb3IobGV0IG49MCxpPXQubGVuZ3RoO24hPT1pOysrbil0W25dLmV2YWx1YXRlKG8pLGVbbl0uYWNjdW11bGF0ZShyLGEpfX19X3VwZGF0ZVdlaWdodCh0KXtsZXQgZT0wO2lmKHRoaXMuZW5hYmxlZCl7ZT10aGlzLndlaWdodDtjb25zdCBuPXRoaXMuX3dlaWdodEludGVycG9sYW50O2lmKG51bGwhPT1uKXtjb25zdCByPW4uZXZhbHVhdGUodClbMF07ZSo9cix0Pm4ucGFyYW1ldGVyUG9zaXRpb25zWzFdJiYodGhpcy5zdG9wRmFkaW5nKCksMD09PXImJih0aGlzLmVuYWJsZWQ9ITEpKX19cmV0dXJuIHRoaXMuX2VmZmVjdGl2ZVdlaWdodD1lLGV9X3VwZGF0ZVRpbWVTY2FsZSh0KXtsZXQgZT0wO2lmKCF0aGlzLnBhdXNlZCl7ZT10aGlzLnRpbWVTY2FsZTtjb25zdCBuPXRoaXMuX3RpbWVTY2FsZUludGVycG9sYW50O2lmKG51bGwhPT1uKXtlKj1uLmV2YWx1YXRlKHQpWzBdLHQ+bi5wYXJhbWV0ZXJQb3NpdGlvbnNbMV0mJih0aGlzLnN0b3BXYXJwaW5nKCksMD09PWU/dGhpcy5wYXVzZWQ9ITA6dGhpcy50aW1lU2NhbGU9ZSl9fXJldHVybiB0aGlzLl9lZmZlY3RpdmVUaW1lU2NhbGU9ZSxlfV91cGRhdGVUaW1lKHQpe2NvbnN0IGU9dGhpcy5fY2xpcC5kdXJhdGlvbixuPXRoaXMubG9vcDtsZXQgcj10aGlzLnRpbWUrdCxpPXRoaXMuX2xvb3BDb3VudDtjb25zdCBvPW49PT1VZTtpZigwPT09dClyZXR1cm4tMT09PWk/cjpvJiYxPT0oMSZpKT9lLXI6cjtpZihuPT09QmUpey0xPT09aSYmKHRoaXMuX2xvb3BDb3VudD0wLHRoaXMuX3NldEVuZGluZ3MoITAsITAsITEpKTt0OntpZihyPj1lKXI9ZTtlbHNle2lmKCEocjwwKSl7dGhpcy50aW1lPXI7YnJlYWsgdH1yPTB9dGhpcy5jbGFtcFdoZW5GaW5pc2hlZD90aGlzLnBhdXNlZD0hMDp0aGlzLmVuYWJsZWQ9ITEsdGhpcy50aW1lPXIsdGhpcy5fbWl4ZXIuZGlzcGF0Y2hFdmVudCh7dHlwZTpcImZpbmlzaGVkXCIsYWN0aW9uOnRoaXMsZGlyZWN0aW9uOnQ8MD8tMToxfSl9fWVsc2V7aWYoLTE9PT1pJiYodD49MD8oaT0wLHRoaXMuX3NldEVuZGluZ3MoITAsMD09PXRoaXMucmVwZXRpdGlvbnMsbykpOnRoaXMuX3NldEVuZGluZ3MoMD09PXRoaXMucmVwZXRpdGlvbnMsITAsbykpLHI+PWV8fHI8MCl7Y29uc3Qgbj1NYXRoLmZsb29yKHIvZSk7ci09ZSpuLGkrPU1hdGguYWJzKG4pO2NvbnN0IGE9dGhpcy5yZXBldGl0aW9ucy1pO2lmKGE8PTApdGhpcy5jbGFtcFdoZW5GaW5pc2hlZD90aGlzLnBhdXNlZD0hMDp0aGlzLmVuYWJsZWQ9ITEscj10PjA/ZTowLHRoaXMudGltZT1yLHRoaXMuX21peGVyLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJmaW5pc2hlZFwiLGFjdGlvbjp0aGlzLGRpcmVjdGlvbjp0PjA/MTotMX0pO2Vsc2V7aWYoMT09PWEpe2NvbnN0IGU9dDwwO3RoaXMuX3NldEVuZGluZ3MoZSwhZSxvKX1lbHNlIHRoaXMuX3NldEVuZGluZ3MoITEsITEsbyk7dGhpcy5fbG9vcENvdW50PWksdGhpcy50aW1lPXIsdGhpcy5fbWl4ZXIuZGlzcGF0Y2hFdmVudCh7dHlwZTpcImxvb3BcIixhY3Rpb246dGhpcyxsb29wRGVsdGE6bn0pfX1lbHNlIHRoaXMudGltZT1yO2lmKG8mJjE9PSgxJmkpKXJldHVybiBlLXJ9cmV0dXJuIHJ9X3NldEVuZGluZ3ModCxlLG4pe2NvbnN0IHI9dGhpcy5faW50ZXJwb2xhbnRTZXR0aW5ncztuPyhyLmVuZGluZ1N0YXJ0PVZlLHIuZW5kaW5nRW5kPVZlKTooci5lbmRpbmdTdGFydD10P3RoaXMuemVyb1Nsb3BlQXRTdGFydD9WZTprZTpqZSxyLmVuZGluZ0VuZD1lP3RoaXMuemVyb1Nsb3BlQXRFbmQ/VmU6a2U6amUpfV9zY2hlZHVsZUZhZGluZyh0LGUsbil7Y29uc3Qgcj10aGlzLl9taXhlcixpPXIudGltZTtsZXQgbz10aGlzLl93ZWlnaHRJbnRlcnBvbGFudDtudWxsPT09byYmKG89ci5fbGVuZENvbnRyb2xJbnRlcnBvbGFudCgpLHRoaXMuX3dlaWdodEludGVycG9sYW50PW8pO2NvbnN0IGE9by5wYXJhbWV0ZXJQb3NpdGlvbnMscz1vLnNhbXBsZVZhbHVlcztyZXR1cm4gYVswXT1pLHNbMF09ZSxhWzFdPWkrdCxzWzFdPW4sdGhpc319ZnVuY3Rpb24gQWQodCl7dGhpcy5fcm9vdD10LHRoaXMuX2luaXRNZW1vcnlNYW5hZ2VyKCksdGhpcy5fYWNjdUluZGV4PTAsdGhpcy50aW1lPTAsdGhpcy50aW1lU2NhbGU9MX1BZC5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKEJuLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOkFkLF9iaW5kQWN0aW9uOmZ1bmN0aW9uKHQsZSl7Y29uc3Qgbj10Ll9sb2NhbFJvb3R8fHRoaXMuX3Jvb3Qscj10Ll9jbGlwLnRyYWNrcyxpPXIubGVuZ3RoLG89dC5fcHJvcGVydHlCaW5kaW5ncyxhPXQuX2ludGVycG9sYW50cyxzPW4udXVpZCxjPXRoaXMuX2JpbmRpbmdzQnlSb290QW5kTmFtZTtsZXQgbD1jW3NdO3ZvaWQgMD09PWwmJihsPXt9LGNbc109bCk7Zm9yKGxldCB0PTA7dCE9PWk7Kyt0KXtjb25zdCBpPXJbdF0sYz1pLm5hbWU7bGV0IHU9bFtjXTtpZih2b2lkIDAhPT11KW9bdF09dTtlbHNle2lmKHU9b1t0XSx2b2lkIDAhPT11KXtudWxsPT09dS5fY2FjaGVJbmRleCYmKCsrdS5yZWZlcmVuY2VDb3VudCx0aGlzLl9hZGRJbmFjdGl2ZUJpbmRpbmcodSxzLGMpKTtjb250aW51ZX1jb25zdCByPWUmJmUuX3Byb3BlcnR5QmluZGluZ3NbdF0uYmluZGluZy5wYXJzZWRQYXRoO3U9bmV3IGZkKFNkLmNyZWF0ZShuLGMsciksaS5WYWx1ZVR5cGVOYW1lLGkuZ2V0VmFsdWVTaXplKCkpLCsrdS5yZWZlcmVuY2VDb3VudCx0aGlzLl9hZGRJbmFjdGl2ZUJpbmRpbmcodSxzLGMpLG9bdF09dX1hW3RdLnJlc3VsdEJ1ZmZlcj11LmJ1ZmZlcn19LF9hY3RpdmF0ZUFjdGlvbjpmdW5jdGlvbih0KXtpZighdGhpcy5faXNBY3RpdmVBY3Rpb24odCkpe2lmKG51bGw9PT10Ll9jYWNoZUluZGV4KXtjb25zdCBlPSh0Ll9sb2NhbFJvb3R8fHRoaXMuX3Jvb3QpLnV1aWQsbj10Ll9jbGlwLnV1aWQscj10aGlzLl9hY3Rpb25zQnlDbGlwW25dO3RoaXMuX2JpbmRBY3Rpb24odCxyJiZyLmtub3duQWN0aW9uc1swXSksdGhpcy5fYWRkSW5hY3RpdmVBY3Rpb24odCxuLGUpfWNvbnN0IGU9dC5fcHJvcGVydHlCaW5kaW5ncztmb3IobGV0IHQ9MCxuPWUubGVuZ3RoO3QhPT1uOysrdCl7Y29uc3Qgbj1lW3RdOzA9PW4udXNlQ291bnQrKyYmKHRoaXMuX2xlbmRCaW5kaW5nKG4pLG4uc2F2ZU9yaWdpbmFsU3RhdGUoKSl9dGhpcy5fbGVuZEFjdGlvbih0KX19LF9kZWFjdGl2YXRlQWN0aW9uOmZ1bmN0aW9uKHQpe2lmKHRoaXMuX2lzQWN0aXZlQWN0aW9uKHQpKXtjb25zdCBlPXQuX3Byb3BlcnR5QmluZGluZ3M7Zm9yKGxldCB0PTAsbj1lLmxlbmd0aDt0IT09bjsrK3Qpe2NvbnN0IG49ZVt0XTswPT0tLW4udXNlQ291bnQmJihuLnJlc3RvcmVPcmlnaW5hbFN0YXRlKCksdGhpcy5fdGFrZUJhY2tCaW5kaW5nKG4pKX10aGlzLl90YWtlQmFja0FjdGlvbih0KX19LF9pbml0TWVtb3J5TWFuYWdlcjpmdW5jdGlvbigpe3RoaXMuX2FjdGlvbnM9W10sdGhpcy5fbkFjdGl2ZUFjdGlvbnM9MCx0aGlzLl9hY3Rpb25zQnlDbGlwPXt9LHRoaXMuX2JpbmRpbmdzPVtdLHRoaXMuX25BY3RpdmVCaW5kaW5ncz0wLHRoaXMuX2JpbmRpbmdzQnlSb290QW5kTmFtZT17fSx0aGlzLl9jb250cm9sSW50ZXJwb2xhbnRzPVtdLHRoaXMuX25BY3RpdmVDb250cm9sSW50ZXJwb2xhbnRzPTA7Y29uc3QgdD10aGlzO3RoaXMuc3RhdHM9e2FjdGlvbnM6e2dldCB0b3RhbCgpe3JldHVybiB0Ll9hY3Rpb25zLmxlbmd0aH0sZ2V0IGluVXNlKCl7cmV0dXJuIHQuX25BY3RpdmVBY3Rpb25zfX0sYmluZGluZ3M6e2dldCB0b3RhbCgpe3JldHVybiB0Ll9iaW5kaW5ncy5sZW5ndGh9LGdldCBpblVzZSgpe3JldHVybiB0Ll9uQWN0aXZlQmluZGluZ3N9fSxjb250cm9sSW50ZXJwb2xhbnRzOntnZXQgdG90YWwoKXtyZXR1cm4gdC5fY29udHJvbEludGVycG9sYW50cy5sZW5ndGh9LGdldCBpblVzZSgpe3JldHVybiB0Ll9uQWN0aXZlQ29udHJvbEludGVycG9sYW50c319fX0sX2lzQWN0aXZlQWN0aW9uOmZ1bmN0aW9uKHQpe2NvbnN0IGU9dC5fY2FjaGVJbmRleDtyZXR1cm4gbnVsbCE9PWUmJmU8dGhpcy5fbkFjdGl2ZUFjdGlvbnN9LF9hZGRJbmFjdGl2ZUFjdGlvbjpmdW5jdGlvbih0LGUsbil7Y29uc3Qgcj10aGlzLl9hY3Rpb25zLGk9dGhpcy5fYWN0aW9uc0J5Q2xpcDtsZXQgbz1pW2VdO2lmKHZvaWQgMD09PW8pbz17a25vd25BY3Rpb25zOlt0XSxhY3Rpb25CeVJvb3Q6e319LHQuX2J5Q2xpcENhY2hlSW5kZXg9MCxpW2VdPW87ZWxzZXtjb25zdCBlPW8ua25vd25BY3Rpb25zO3QuX2J5Q2xpcENhY2hlSW5kZXg9ZS5sZW5ndGgsZS5wdXNoKHQpfXQuX2NhY2hlSW5kZXg9ci5sZW5ndGgsci5wdXNoKHQpLG8uYWN0aW9uQnlSb290W25dPXR9LF9yZW1vdmVJbmFjdGl2ZUFjdGlvbjpmdW5jdGlvbih0KXtjb25zdCBlPXRoaXMuX2FjdGlvbnMsbj1lW2UubGVuZ3RoLTFdLHI9dC5fY2FjaGVJbmRleDtuLl9jYWNoZUluZGV4PXIsZVtyXT1uLGUucG9wKCksdC5fY2FjaGVJbmRleD1udWxsO2NvbnN0IGk9dC5fY2xpcC51dWlkLG89dGhpcy5fYWN0aW9uc0J5Q2xpcCxhPW9baV0scz1hLmtub3duQWN0aW9ucyxjPXNbcy5sZW5ndGgtMV0sbD10Ll9ieUNsaXBDYWNoZUluZGV4O2MuX2J5Q2xpcENhY2hlSW5kZXg9bCxzW2xdPWMscy5wb3AoKSx0Ll9ieUNsaXBDYWNoZUluZGV4PW51bGw7ZGVsZXRlIGEuYWN0aW9uQnlSb290Wyh0Ll9sb2NhbFJvb3R8fHRoaXMuX3Jvb3QpLnV1aWRdLDA9PT1zLmxlbmd0aCYmZGVsZXRlIG9baV0sdGhpcy5fcmVtb3ZlSW5hY3RpdmVCaW5kaW5nc0ZvckFjdGlvbih0KX0sX3JlbW92ZUluYWN0aXZlQmluZGluZ3NGb3JBY3Rpb246ZnVuY3Rpb24odCl7Y29uc3QgZT10Ll9wcm9wZXJ0eUJpbmRpbmdzO2ZvcihsZXQgdD0wLG49ZS5sZW5ndGg7dCE9PW47Kyt0KXtjb25zdCBuPWVbdF07MD09LS1uLnJlZmVyZW5jZUNvdW50JiZ0aGlzLl9yZW1vdmVJbmFjdGl2ZUJpbmRpbmcobil9fSxfbGVuZEFjdGlvbjpmdW5jdGlvbih0KXtjb25zdCBlPXRoaXMuX2FjdGlvbnMsbj10Ll9jYWNoZUluZGV4LHI9dGhpcy5fbkFjdGl2ZUFjdGlvbnMrKyxpPWVbcl07dC5fY2FjaGVJbmRleD1yLGVbcl09dCxpLl9jYWNoZUluZGV4PW4sZVtuXT1pfSxfdGFrZUJhY2tBY3Rpb246ZnVuY3Rpb24odCl7Y29uc3QgZT10aGlzLl9hY3Rpb25zLG49dC5fY2FjaGVJbmRleCxyPS0tdGhpcy5fbkFjdGl2ZUFjdGlvbnMsaT1lW3JdO3QuX2NhY2hlSW5kZXg9cixlW3JdPXQsaS5fY2FjaGVJbmRleD1uLGVbbl09aX0sX2FkZEluYWN0aXZlQmluZGluZzpmdW5jdGlvbih0LGUsbil7Y29uc3Qgcj10aGlzLl9iaW5kaW5nc0J5Um9vdEFuZE5hbWUsaT10aGlzLl9iaW5kaW5ncztsZXQgbz1yW2VdO3ZvaWQgMD09PW8mJihvPXt9LHJbZV09byksb1tuXT10LHQuX2NhY2hlSW5kZXg9aS5sZW5ndGgsaS5wdXNoKHQpfSxfcmVtb3ZlSW5hY3RpdmVCaW5kaW5nOmZ1bmN0aW9uKHQpe2NvbnN0IGU9dGhpcy5fYmluZGluZ3Msbj10LmJpbmRpbmcscj1uLnJvb3ROb2RlLnV1aWQsaT1uLnBhdGgsbz10aGlzLl9iaW5kaW5nc0J5Um9vdEFuZE5hbWUsYT1vW3JdLHM9ZVtlLmxlbmd0aC0xXSxjPXQuX2NhY2hlSW5kZXg7cy5fY2FjaGVJbmRleD1jLGVbY109cyxlLnBvcCgpLGRlbGV0ZSBhW2ldLDA9PT1PYmplY3Qua2V5cyhhKS5sZW5ndGgmJmRlbGV0ZSBvW3JdfSxfbGVuZEJpbmRpbmc6ZnVuY3Rpb24odCl7Y29uc3QgZT10aGlzLl9iaW5kaW5ncyxuPXQuX2NhY2hlSW5kZXgscj10aGlzLl9uQWN0aXZlQmluZGluZ3MrKyxpPWVbcl07dC5fY2FjaGVJbmRleD1yLGVbcl09dCxpLl9jYWNoZUluZGV4PW4sZVtuXT1pfSxfdGFrZUJhY2tCaW5kaW5nOmZ1bmN0aW9uKHQpe2NvbnN0IGU9dGhpcy5fYmluZGluZ3Msbj10Ll9jYWNoZUluZGV4LHI9LS10aGlzLl9uQWN0aXZlQmluZGluZ3MsaT1lW3JdO3QuX2NhY2hlSW5kZXg9cixlW3JdPXQsaS5fY2FjaGVJbmRleD1uLGVbbl09aX0sX2xlbmRDb250cm9sSW50ZXJwb2xhbnQ6ZnVuY3Rpb24oKXtjb25zdCB0PXRoaXMuX2NvbnRyb2xJbnRlcnBvbGFudHMsZT10aGlzLl9uQWN0aXZlQ29udHJvbEludGVycG9sYW50cysrO2xldCBuPXRbZV07cmV0dXJuIHZvaWQgMD09PW4mJihuPW5ldyBUdShuZXcgRmxvYXQzMkFycmF5KDIpLG5ldyBGbG9hdDMyQXJyYXkoMiksMSx0aGlzLl9jb250cm9sSW50ZXJwb2xhbnRzUmVzdWx0QnVmZmVyKSxuLl9fY2FjaGVJbmRleD1lLHRbZV09biksbn0sX3Rha2VCYWNrQ29udHJvbEludGVycG9sYW50OmZ1bmN0aW9uKHQpe2NvbnN0IGU9dGhpcy5fY29udHJvbEludGVycG9sYW50cyxuPXQuX19jYWNoZUluZGV4LHI9LS10aGlzLl9uQWN0aXZlQ29udHJvbEludGVycG9sYW50cyxpPWVbcl07dC5fX2NhY2hlSW5kZXg9cixlW3JdPXQsaS5fX2NhY2hlSW5kZXg9bixlW25dPWl9LF9jb250cm9sSW50ZXJwb2xhbnRzUmVzdWx0QnVmZmVyOm5ldyBGbG9hdDMyQXJyYXkoMSksY2xpcEFjdGlvbjpmdW5jdGlvbih0LGUsbil7Y29uc3Qgcj1lfHx0aGlzLl9yb290LGk9ci51dWlkO2xldCBvPVwic3RyaW5nXCI9PXR5cGVvZiB0P0R1LmZpbmRCeU5hbWUocix0KTp0O2NvbnN0IGE9bnVsbCE9PW8/by51dWlkOnQscz10aGlzLl9hY3Rpb25zQnlDbGlwW2FdO2xldCBjPW51bGw7aWYodm9pZCAwPT09biYmKG49bnVsbCE9PW8/by5ibGVuZE1vZGU6V2UpLHZvaWQgMCE9PXMpe2NvbnN0IHQ9cy5hY3Rpb25CeVJvb3RbaV07aWYodm9pZCAwIT09dCYmdC5ibGVuZE1vZGU9PT1uKXJldHVybiB0O2M9cy5rbm93bkFjdGlvbnNbMF0sbnVsbD09PW8mJihvPWMuX2NsaXApfWlmKG51bGw9PT1vKXJldHVybiBudWxsO2NvbnN0IGw9bmV3IEVkKHRoaXMsbyxlLG4pO3JldHVybiB0aGlzLl9iaW5kQWN0aW9uKGwsYyksdGhpcy5fYWRkSW5hY3RpdmVBY3Rpb24obCxhLGkpLGx9LGV4aXN0aW5nQWN0aW9uOmZ1bmN0aW9uKHQsZSl7Y29uc3Qgbj1lfHx0aGlzLl9yb290LHI9bi51dWlkLGk9XCJzdHJpbmdcIj09dHlwZW9mIHQ/RHUuZmluZEJ5TmFtZShuLHQpOnQsbz1pP2kudXVpZDp0LGE9dGhpcy5fYWN0aW9uc0J5Q2xpcFtvXTtyZXR1cm4gdm9pZCAwIT09YSYmYS5hY3Rpb25CeVJvb3Rbcl18fG51bGx9LHN0b3BBbGxBY3Rpb246ZnVuY3Rpb24oKXtjb25zdCB0PXRoaXMuX2FjdGlvbnM7Zm9yKGxldCBlPXRoaXMuX25BY3RpdmVBY3Rpb25zLTE7ZT49MDstLWUpdFtlXS5zdG9wKCk7cmV0dXJuIHRoaXN9LHVwZGF0ZTpmdW5jdGlvbih0KXt0Kj10aGlzLnRpbWVTY2FsZTtjb25zdCBlPXRoaXMuX2FjdGlvbnMsbj10aGlzLl9uQWN0aXZlQWN0aW9ucyxyPXRoaXMudGltZSs9dCxpPU1hdGguc2lnbih0KSxvPXRoaXMuX2FjY3VJbmRleF49MTtmb3IobGV0IGE9MDthIT09bjsrK2Epe2VbYV0uX3VwZGF0ZShyLHQsaSxvKX1jb25zdCBhPXRoaXMuX2JpbmRpbmdzLHM9dGhpcy5fbkFjdGl2ZUJpbmRpbmdzO2ZvcihsZXQgdD0wO3QhPT1zOysrdClhW3RdLmFwcGx5KG8pO3JldHVybiB0aGlzfSxzZXRUaW1lOmZ1bmN0aW9uKHQpe3RoaXMudGltZT0wO2ZvcihsZXQgdD0wO3Q8dGhpcy5fYWN0aW9ucy5sZW5ndGg7dCsrKXRoaXMuX2FjdGlvbnNbdF0udGltZT0wO3JldHVybiB0aGlzLnVwZGF0ZSh0KX0sZ2V0Um9vdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yb290fSx1bmNhY2hlQ2xpcDpmdW5jdGlvbih0KXtjb25zdCBlPXRoaXMuX2FjdGlvbnMsbj10LnV1aWQscj10aGlzLl9hY3Rpb25zQnlDbGlwLGk9cltuXTtpZih2b2lkIDAhPT1pKXtjb25zdCB0PWkua25vd25BY3Rpb25zO2ZvcihsZXQgbj0wLHI9dC5sZW5ndGg7biE9PXI7KytuKXtjb25zdCByPXRbbl07dGhpcy5fZGVhY3RpdmF0ZUFjdGlvbihyKTtjb25zdCBpPXIuX2NhY2hlSW5kZXgsbz1lW2UubGVuZ3RoLTFdO3IuX2NhY2hlSW5kZXg9bnVsbCxyLl9ieUNsaXBDYWNoZUluZGV4PW51bGwsby5fY2FjaGVJbmRleD1pLGVbaV09byxlLnBvcCgpLHRoaXMuX3JlbW92ZUluYWN0aXZlQmluZGluZ3NGb3JBY3Rpb24ocil9ZGVsZXRlIHJbbl19fSx1bmNhY2hlUm9vdDpmdW5jdGlvbih0KXtjb25zdCBlPXQudXVpZCxuPXRoaXMuX2FjdGlvbnNCeUNsaXA7Zm9yKGNvbnN0IHQgaW4gbil7Y29uc3Qgcj1uW3RdLmFjdGlvbkJ5Um9vdFtlXTt2b2lkIDAhPT1yJiYodGhpcy5fZGVhY3RpdmF0ZUFjdGlvbihyKSx0aGlzLl9yZW1vdmVJbmFjdGl2ZUFjdGlvbihyKSl9Y29uc3Qgcj10aGlzLl9iaW5kaW5nc0J5Um9vdEFuZE5hbWVbZV07aWYodm9pZCAwIT09cilmb3IoY29uc3QgdCBpbiByKXtjb25zdCBlPXJbdF07ZS5yZXN0b3JlT3JpZ2luYWxTdGF0ZSgpLHRoaXMuX3JlbW92ZUluYWN0aXZlQmluZGluZyhlKX19LHVuY2FjaGVBY3Rpb246ZnVuY3Rpb24odCxlKXtjb25zdCBuPXRoaXMuZXhpc3RpbmdBY3Rpb24odCxlKTtudWxsIT09biYmKHRoaXMuX2RlYWN0aXZhdGVBY3Rpb24obiksdGhpcy5fcmVtb3ZlSW5hY3RpdmVBY3Rpb24obikpfX0pO2NsYXNzIExke2NvbnN0cnVjdG9yKHQpe1wic3RyaW5nXCI9PXR5cGVvZiB0JiYoY29uc29sZS53YXJuKFwiVEhSRUUuVW5pZm9ybTogVHlwZSBwYXJhbWV0ZXIgaXMgbm8gbG9uZ2VyIG5lZWRlZC5cIiksdD1hcmd1bWVudHNbMV0pLHRoaXMudmFsdWU9dH1jbG9uZSgpe3JldHVybiBuZXcgTGQodm9pZCAwPT09dGhpcy52YWx1ZS5jbG9uZT90aGlzLnZhbHVlOnRoaXMudmFsdWUuY2xvbmUoKSl9fWZ1bmN0aW9uIFJkKHQsZSxuKXtHcy5jYWxsKHRoaXMsdCxlKSx0aGlzLm1lc2hQZXJBdHRyaWJ1dGU9bnx8MX1mdW5jdGlvbiBQZCh0LGUsbixyLGkpe3RoaXMuYnVmZmVyPXQsdGhpcy50eXBlPWUsdGhpcy5pdGVtU2l6ZT1uLHRoaXMuZWxlbWVudFNpemU9cix0aGlzLmNvdW50PWksdGhpcy52ZXJzaW9uPTB9ZnVuY3Rpb24gQ2QodCxlLG4scil7dGhpcy5yYXk9bmV3IFNyKHQsZSksdGhpcy5uZWFyPW58fDAsdGhpcy5mYXI9cnx8MS8wLHRoaXMuY2FtZXJhPW51bGwsdGhpcy5sYXllcnM9bmV3IEJyLHRoaXMucGFyYW1zPXtNZXNoOnt9LExpbmU6e3RocmVzaG9sZDoxfSxMT0Q6e30sUG9pbnRzOnt0aHJlc2hvbGQ6MX0sU3ByaXRlOnt9fSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLnBhcmFtcyx7UG9pbnRDbG91ZDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLlJheWNhc3RlcjogcGFyYW1zLlBvaW50Q2xvdWQgaGFzIGJlZW4gcmVuYW1lZCB0byBwYXJhbXMuUG9pbnRzLlwiKSx0aGlzLlBvaW50c319fSl9ZnVuY3Rpb24gSWQodCxlKXtyZXR1cm4gdC5kaXN0YW5jZS1lLmRpc3RhbmNlfWZ1bmN0aW9uIE9kKHQsZSxuLHIpe2lmKHQubGF5ZXJzLnRlc3QoZS5sYXllcnMpJiZ0LnJheWNhc3QoZSxuKSwhMD09PXIpe2NvbnN0IHI9dC5jaGlsZHJlbjtmb3IobGV0IHQ9MCxpPXIubGVuZ3RoO3Q8aTt0KyspT2Qoclt0XSxlLG4sITApfX1SZC5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKEdzLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlJkLGlzSW5zdGFuY2VkSW50ZXJsZWF2ZWRCdWZmZXI6ITAsY29weTpmdW5jdGlvbih0KXtyZXR1cm4gR3MucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLHQpLHRoaXMubWVzaFBlckF0dHJpYnV0ZT10Lm1lc2hQZXJBdHRyaWJ1dGUsdGhpc30sY2xvbmU6ZnVuY3Rpb24odCl7Y29uc3QgZT1Hcy5wcm90b3R5cGUuY2xvbmUuY2FsbCh0aGlzLHQpO3JldHVybiBlLm1lc2hQZXJBdHRyaWJ1dGU9dGhpcy5tZXNoUGVyQXR0cmlidXRlLGV9LHRvSlNPTjpmdW5jdGlvbih0KXtjb25zdCBlPUdzLnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzLHQpO3JldHVybiBlLmlzSW5zdGFuY2VkSW50ZXJsZWF2ZWRCdWZmZXI9ITAsZS5tZXNoUGVyQXR0cmlidXRlPXRoaXMubWVzaFBlckF0dHJpYnV0ZSxlfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShQZC5wcm90b3R5cGUsXCJuZWVkc1VwZGF0ZVwiLHtzZXQ6ZnVuY3Rpb24odCl7ITA9PT10JiZ0aGlzLnZlcnNpb24rK319KSxPYmplY3QuYXNzaWduKFBkLnByb3RvdHlwZSx7aXNHTEJ1ZmZlckF0dHJpYnV0ZTohMCxzZXRCdWZmZXI6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuYnVmZmVyPXQsdGhpc30sc2V0VHlwZTpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLnR5cGU9dCx0aGlzLmVsZW1lbnRTaXplPWUsdGhpc30sc2V0SXRlbVNpemU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuaXRlbVNpemU9dCx0aGlzfSxzZXRDb3VudDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb3VudD10LHRoaXN9fSksT2JqZWN0LmFzc2lnbihDZC5wcm90b3R5cGUse3NldDpmdW5jdGlvbih0LGUpe3RoaXMucmF5LnNldCh0LGUpfSxzZXRGcm9tQ2FtZXJhOmZ1bmN0aW9uKHQsZSl7ZSYmZS5pc1BlcnNwZWN0aXZlQ2FtZXJhPyh0aGlzLnJheS5vcmlnaW4uc2V0RnJvbU1hdHJpeFBvc2l0aW9uKGUubWF0cml4V29ybGQpLHRoaXMucmF5LmRpcmVjdGlvbi5zZXQodC54LHQueSwuNSkudW5wcm9qZWN0KGUpLnN1Yih0aGlzLnJheS5vcmlnaW4pLm5vcm1hbGl6ZSgpLHRoaXMuY2FtZXJhPWUpOmUmJmUuaXNPcnRob2dyYXBoaWNDYW1lcmE/KHRoaXMucmF5Lm9yaWdpbi5zZXQodC54LHQueSwoZS5uZWFyK2UuZmFyKS8oZS5uZWFyLWUuZmFyKSkudW5wcm9qZWN0KGUpLHRoaXMucmF5LmRpcmVjdGlvbi5zZXQoMCwwLC0xKS50cmFuc2Zvcm1EaXJlY3Rpb24oZS5tYXRyaXhXb3JsZCksdGhpcy5jYW1lcmE9ZSk6Y29uc29sZS5lcnJvcihcIlRIUkVFLlJheWNhc3RlcjogVW5zdXBwb3J0ZWQgY2FtZXJhIHR5cGUuXCIpfSxpbnRlcnNlY3RPYmplY3Q6ZnVuY3Rpb24odCxlLG4pe2NvbnN0IHI9bnx8W107cmV0dXJuIE9kKHQsdGhpcyxyLGUpLHIuc29ydChJZCkscn0saW50ZXJzZWN0T2JqZWN0czpmdW5jdGlvbih0LGUsbil7Y29uc3Qgcj1ufHxbXTtpZighMT09PUFycmF5LmlzQXJyYXkodCkpcmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLlJheWNhc3Rlci5pbnRlcnNlY3RPYmplY3RzOiBvYmplY3RzIGlzIG5vdCBhbiBBcnJheS5cIikscjtmb3IobGV0IG49MCxpPXQubGVuZ3RoO248aTtuKyspT2QodFtuXSx0aGlzLHIsZSk7cmV0dXJuIHIuc29ydChJZCkscn19KTtjbGFzcyBOZHtjb25zdHJ1Y3Rvcih0PTEsZT0wLG49MCl7cmV0dXJuIHRoaXMucmFkaXVzPXQsdGhpcy5waGk9ZSx0aGlzLnRoZXRhPW4sdGhpc31zZXQodCxlLG4pe3JldHVybiB0aGlzLnJhZGl1cz10LHRoaXMucGhpPWUsdGhpcy50aGV0YT1uLHRoaXN9Y2xvbmUoKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyl9Y29weSh0KXtyZXR1cm4gdGhpcy5yYWRpdXM9dC5yYWRpdXMsdGhpcy5waGk9dC5waGksdGhpcy50aGV0YT10LnRoZXRhLHRoaXN9bWFrZVNhZmUoKXtyZXR1cm4gdGhpcy5waGk9TWF0aC5tYXgoMWUtNixNYXRoLm1pbihNYXRoLlBJLTFlLTYsdGhpcy5waGkpKSx0aGlzfXNldEZyb21WZWN0b3IzKHQpe3JldHVybiB0aGlzLnNldEZyb21DYXJ0ZXNpYW5Db29yZHModC54LHQueSx0LnopfXNldEZyb21DYXJ0ZXNpYW5Db29yZHModCxlLG4pe3JldHVybiB0aGlzLnJhZGl1cz1NYXRoLnNxcnQodCp0K2UqZStuKm4pLDA9PT10aGlzLnJhZGl1cz8odGhpcy50aGV0YT0wLHRoaXMucGhpPTApOih0aGlzLnRoZXRhPU1hdGguYXRhbjIodCxuKSx0aGlzLnBoaT1NYXRoLmFjb3Moem4uY2xhbXAoZS90aGlzLnJhZGl1cywtMSwxKSkpLHRoaXN9fWNsYXNzIERke2NvbnN0cnVjdG9yKHQsZSxuKXtyZXR1cm4gdGhpcy5yYWRpdXM9dm9pZCAwIT09dD90OjEsdGhpcy50aGV0YT12b2lkIDAhPT1lP2U6MCx0aGlzLnk9dm9pZCAwIT09bj9uOjAsdGhpc31zZXQodCxlLG4pe3JldHVybiB0aGlzLnJhZGl1cz10LHRoaXMudGhldGE9ZSx0aGlzLnk9bix0aGlzfWNsb25lKCl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKS5jb3B5KHRoaXMpfWNvcHkodCl7cmV0dXJuIHRoaXMucmFkaXVzPXQucmFkaXVzLHRoaXMudGhldGE9dC50aGV0YSx0aGlzLnk9dC55LHRoaXN9c2V0RnJvbVZlY3RvcjModCl7cmV0dXJuIHRoaXMuc2V0RnJvbUNhcnRlc2lhbkNvb3Jkcyh0LngsdC55LHQueil9c2V0RnJvbUNhcnRlc2lhbkNvb3Jkcyh0LGUsbil7cmV0dXJuIHRoaXMucmFkaXVzPU1hdGguc3FydCh0KnQrbipuKSx0aGlzLnRoZXRhPU1hdGguYXRhbjIodCxuKSx0aGlzLnk9ZSx0aGlzfX1jb25zdCBCZD1uZXcgR247Y2xhc3MgRmR7Y29uc3RydWN0b3IodCxlKXtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImlzQm94MlwiLHt2YWx1ZTohMH0pLHRoaXMubWluPXZvaWQgMCE9PXQ/dDpuZXcgR24oMS8wLDEvMCksdGhpcy5tYXg9dm9pZCAwIT09ZT9lOm5ldyBHbigtMS8wLC0xLzApfXNldCh0LGUpe3JldHVybiB0aGlzLm1pbi5jb3B5KHQpLHRoaXMubWF4LmNvcHkoZSksdGhpc31zZXRGcm9tUG9pbnRzKHQpe3RoaXMubWFrZUVtcHR5KCk7Zm9yKGxldCBlPTAsbj10Lmxlbmd0aDtlPG47ZSsrKXRoaXMuZXhwYW5kQnlQb2ludCh0W2VdKTtyZXR1cm4gdGhpc31zZXRGcm9tQ2VudGVyQW5kU2l6ZSh0LGUpe2NvbnN0IG49QmQuY29weShlKS5tdWx0aXBseVNjYWxhciguNSk7cmV0dXJuIHRoaXMubWluLmNvcHkodCkuc3ViKG4pLHRoaXMubWF4LmNvcHkodCkuYWRkKG4pLHRoaXN9Y2xvbmUoKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyl9Y29weSh0KXtyZXR1cm4gdGhpcy5taW4uY29weSh0Lm1pbiksdGhpcy5tYXguY29weSh0Lm1heCksdGhpc31tYWtlRW1wdHkoKXtyZXR1cm4gdGhpcy5taW4ueD10aGlzLm1pbi55PTEvMCx0aGlzLm1heC54PXRoaXMubWF4Lnk9LTEvMCx0aGlzfWlzRW1wdHkoKXtyZXR1cm4gdGhpcy5tYXgueDx0aGlzLm1pbi54fHx0aGlzLm1heC55PHRoaXMubWluLnl9Z2V0Q2VudGVyKHQpe3JldHVybiB2b2lkIDA9PT10JiYoY29uc29sZS53YXJuKFwiVEhSRUUuQm94MjogLmdldENlbnRlcigpIHRhcmdldCBpcyBub3cgcmVxdWlyZWRcIiksdD1uZXcgR24pLHRoaXMuaXNFbXB0eSgpP3Quc2V0KDAsMCk6dC5hZGRWZWN0b3JzKHRoaXMubWluLHRoaXMubWF4KS5tdWx0aXBseVNjYWxhciguNSl9Z2V0U2l6ZSh0KXtyZXR1cm4gdm9pZCAwPT09dCYmKGNvbnNvbGUud2FybihcIlRIUkVFLkJveDI6IC5nZXRTaXplKCkgdGFyZ2V0IGlzIG5vdyByZXF1aXJlZFwiKSx0PW5ldyBHbiksdGhpcy5pc0VtcHR5KCk/dC5zZXQoMCwwKTp0LnN1YlZlY3RvcnModGhpcy5tYXgsdGhpcy5taW4pfWV4cGFuZEJ5UG9pbnQodCl7cmV0dXJuIHRoaXMubWluLm1pbih0KSx0aGlzLm1heC5tYXgodCksdGhpc31leHBhbmRCeVZlY3Rvcih0KXtyZXR1cm4gdGhpcy5taW4uc3ViKHQpLHRoaXMubWF4LmFkZCh0KSx0aGlzfWV4cGFuZEJ5U2NhbGFyKHQpe3JldHVybiB0aGlzLm1pbi5hZGRTY2FsYXIoLXQpLHRoaXMubWF4LmFkZFNjYWxhcih0KSx0aGlzfWNvbnRhaW5zUG9pbnQodCl7cmV0dXJuISh0Lng8dGhpcy5taW4ueHx8dC54PnRoaXMubWF4Lnh8fHQueTx0aGlzLm1pbi55fHx0Lnk+dGhpcy5tYXgueSl9Y29udGFpbnNCb3godCl7cmV0dXJuIHRoaXMubWluLng8PXQubWluLngmJnQubWF4Lng8PXRoaXMubWF4LngmJnRoaXMubWluLnk8PXQubWluLnkmJnQubWF4Lnk8PXRoaXMubWF4Lnl9Z2V0UGFyYW1ldGVyKHQsZSl7cmV0dXJuIHZvaWQgMD09PWUmJihjb25zb2xlLndhcm4oXCJUSFJFRS5Cb3gyOiAuZ2V0UGFyYW1ldGVyKCkgdGFyZ2V0IGlzIG5vdyByZXF1aXJlZFwiKSxlPW5ldyBHbiksZS5zZXQoKHQueC10aGlzLm1pbi54KS8odGhpcy5tYXgueC10aGlzLm1pbi54KSwodC55LXRoaXMubWluLnkpLyh0aGlzLm1heC55LXRoaXMubWluLnkpKX1pbnRlcnNlY3RzQm94KHQpe3JldHVybiEodC5tYXgueDx0aGlzLm1pbi54fHx0Lm1pbi54PnRoaXMubWF4Lnh8fHQubWF4Lnk8dGhpcy5taW4ueXx8dC5taW4ueT50aGlzLm1heC55KX1jbGFtcFBvaW50KHQsZSl7cmV0dXJuIHZvaWQgMD09PWUmJihjb25zb2xlLndhcm4oXCJUSFJFRS5Cb3gyOiAuY2xhbXBQb2ludCgpIHRhcmdldCBpcyBub3cgcmVxdWlyZWRcIiksZT1uZXcgR24pLGUuY29weSh0KS5jbGFtcCh0aGlzLm1pbix0aGlzLm1heCl9ZGlzdGFuY2VUb1BvaW50KHQpe3JldHVybiBCZC5jb3B5KHQpLmNsYW1wKHRoaXMubWluLHRoaXMubWF4KS5zdWIodCkubGVuZ3RoKCl9aW50ZXJzZWN0KHQpe3JldHVybiB0aGlzLm1pbi5tYXgodC5taW4pLHRoaXMubWF4Lm1pbih0Lm1heCksdGhpc311bmlvbih0KXtyZXR1cm4gdGhpcy5taW4ubWluKHQubWluKSx0aGlzLm1heC5tYXgodC5tYXgpLHRoaXN9dHJhbnNsYXRlKHQpe3JldHVybiB0aGlzLm1pbi5hZGQodCksdGhpcy5tYXguYWRkKHQpLHRoaXN9ZXF1YWxzKHQpe3JldHVybiB0Lm1pbi5lcXVhbHModGhpcy5taW4pJiZ0Lm1heC5lcXVhbHModGhpcy5tYXgpfX1jb25zdCBVZD1uZXcgS24semQ9bmV3IEtuO2NsYXNzIEdke2NvbnN0cnVjdG9yKHQsZSl7dGhpcy5zdGFydD12b2lkIDAhPT10P3Q6bmV3IEtuLHRoaXMuZW5kPXZvaWQgMCE9PWU/ZTpuZXcgS259c2V0KHQsZSl7cmV0dXJuIHRoaXMuc3RhcnQuY29weSh0KSx0aGlzLmVuZC5jb3B5KGUpLHRoaXN9Y2xvbmUoKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyl9Y29weSh0KXtyZXR1cm4gdGhpcy5zdGFydC5jb3B5KHQuc3RhcnQpLHRoaXMuZW5kLmNvcHkodC5lbmQpLHRoaXN9Z2V0Q2VudGVyKHQpe3JldHVybiB2b2lkIDA9PT10JiYoY29uc29sZS53YXJuKFwiVEhSRUUuTGluZTM6IC5nZXRDZW50ZXIoKSB0YXJnZXQgaXMgbm93IHJlcXVpcmVkXCIpLHQ9bmV3IEtuKSx0LmFkZFZlY3RvcnModGhpcy5zdGFydCx0aGlzLmVuZCkubXVsdGlwbHlTY2FsYXIoLjUpfWRlbHRhKHQpe3JldHVybiB2b2lkIDA9PT10JiYoY29uc29sZS53YXJuKFwiVEhSRUUuTGluZTM6IC5kZWx0YSgpIHRhcmdldCBpcyBub3cgcmVxdWlyZWRcIiksdD1uZXcgS24pLHQuc3ViVmVjdG9ycyh0aGlzLmVuZCx0aGlzLnN0YXJ0KX1kaXN0YW5jZVNxKCl7cmV0dXJuIHRoaXMuc3RhcnQuZGlzdGFuY2VUb1NxdWFyZWQodGhpcy5lbmQpfWRpc3RhbmNlKCl7cmV0dXJuIHRoaXMuc3RhcnQuZGlzdGFuY2VUbyh0aGlzLmVuZCl9YXQodCxlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGNvbnNvbGUud2FybihcIlRIUkVFLkxpbmUzOiAuYXQoKSB0YXJnZXQgaXMgbm93IHJlcXVpcmVkXCIpLGU9bmV3IEtuKSx0aGlzLmRlbHRhKGUpLm11bHRpcGx5U2NhbGFyKHQpLmFkZCh0aGlzLnN0YXJ0KX1jbG9zZXN0UG9pbnRUb1BvaW50UGFyYW1ldGVyKHQsZSl7VWQuc3ViVmVjdG9ycyh0LHRoaXMuc3RhcnQpLHpkLnN1YlZlY3RvcnModGhpcy5lbmQsdGhpcy5zdGFydCk7Y29uc3Qgbj16ZC5kb3QoemQpO2xldCByPXpkLmRvdChVZCkvbjtyZXR1cm4gZSYmKHI9em4uY2xhbXAociwwLDEpKSxyfWNsb3Nlc3RQb2ludFRvUG9pbnQodCxlLG4pe2NvbnN0IHI9dGhpcy5jbG9zZXN0UG9pbnRUb1BvaW50UGFyYW1ldGVyKHQsZSk7cmV0dXJuIHZvaWQgMD09PW4mJihjb25zb2xlLndhcm4oXCJUSFJFRS5MaW5lMzogLmNsb3Nlc3RQb2ludFRvUG9pbnQoKSB0YXJnZXQgaXMgbm93IHJlcXVpcmVkXCIpLG49bmV3IEtuKSx0aGlzLmRlbHRhKG4pLm11bHRpcGx5U2NhbGFyKHIpLmFkZCh0aGlzLnN0YXJ0KX1hcHBseU1hdHJpeDQodCl7cmV0dXJuIHRoaXMuc3RhcnQuYXBwbHlNYXRyaXg0KHQpLHRoaXMuZW5kLmFwcGx5TWF0cml4NCh0KSx0aGlzfWVxdWFscyh0KXtyZXR1cm4gdC5zdGFydC5lcXVhbHModGhpcy5zdGFydCkmJnQuZW5kLmVxdWFscyh0aGlzLmVuZCl9fWZ1bmN0aW9uIEhkKHQpe0pyLmNhbGwodGhpcyksdGhpcy5tYXRlcmlhbD10LHRoaXMucmVuZGVyPWZ1bmN0aW9uKCl7fSx0aGlzLmhhc1Bvc2l0aW9ucz0hMSx0aGlzLmhhc05vcm1hbHM9ITEsdGhpcy5oYXNDb2xvcnM9ITEsdGhpcy5oYXNVdnM9ITEsdGhpcy5wb3NpdGlvbkFycmF5PW51bGwsdGhpcy5ub3JtYWxBcnJheT1udWxsLHRoaXMuY29sb3JBcnJheT1udWxsLHRoaXMudXZBcnJheT1udWxsLHRoaXMuY291bnQ9MH1IZC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShKci5wcm90b3R5cGUpLEhkLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1IZCxIZC5wcm90b3R5cGUuaXNJbW1lZGlhdGVSZW5kZXJPYmplY3Q9ITA7Y29uc3Qga2Q9bmV3IEtuO2NsYXNzIFZkIGV4dGVuZHMgSnJ7Y29uc3RydWN0b3IodCxlKXtzdXBlcigpLHRoaXMubGlnaHQ9dCx0aGlzLmxpZ2h0LnVwZGF0ZU1hdHJpeFdvcmxkKCksdGhpcy5tYXRyaXg9dC5tYXRyaXhXb3JsZCx0aGlzLm1hdHJpeEF1dG9VcGRhdGU9ITEsdGhpcy5jb2xvcj1lO2NvbnN0IG49bmV3IHFpLHI9WzAsMCwwLDAsMCwxLDAsMCwwLDEsMCwxLDAsMCwwLC0xLDAsMSwwLDAsMCwwLDEsMSwwLDAsMCwwLC0xLDFdO2ZvcihsZXQgdD0wLGU9MSxuPTMyO3Q8bjt0KyssZSsrKXtjb25zdCBpPXQvbipNYXRoLlBJKjIsbz1lL24qTWF0aC5QSSoyO3IucHVzaChNYXRoLmNvcyhpKSxNYXRoLnNpbihpKSwxLE1hdGguY29zKG8pLE1hdGguc2luKG8pLDEpfW4uc2V0QXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgTmkociwzKSk7Y29uc3QgaT1uZXcgeWMoe2ZvZzohMSx0b25lTWFwcGVkOiExfSk7dGhpcy5jb25lPW5ldyBBYyhuLGkpLHRoaXMuYWRkKHRoaXMuY29uZSksdGhpcy51cGRhdGUoKX1kaXNwb3NlKCl7dGhpcy5jb25lLmdlb21ldHJ5LmRpc3Bvc2UoKSx0aGlzLmNvbmUubWF0ZXJpYWwuZGlzcG9zZSgpfXVwZGF0ZSgpe3RoaXMubGlnaHQudXBkYXRlTWF0cml4V29ybGQoKTtjb25zdCB0PXRoaXMubGlnaHQuZGlzdGFuY2U/dGhpcy5saWdodC5kaXN0YW5jZToxZTMsZT10Kk1hdGgudGFuKHRoaXMubGlnaHQuYW5nbGUpO3RoaXMuY29uZS5zY2FsZS5zZXQoZSxlLHQpLGtkLnNldEZyb21NYXRyaXhQb3NpdGlvbih0aGlzLmxpZ2h0LnRhcmdldC5tYXRyaXhXb3JsZCksdGhpcy5jb25lLmxvb2tBdChrZCksdm9pZCAwIT09dGhpcy5jb2xvcj90aGlzLmNvbmUubWF0ZXJpYWwuY29sb3Iuc2V0KHRoaXMuY29sb3IpOnRoaXMuY29uZS5tYXRlcmlhbC5jb2xvci5jb3B5KHRoaXMubGlnaHQuY29sb3IpfX1jb25zdCBqZD1uZXcgS24sV2Q9bmV3IFRyLFhkPW5ldyBUcjtjbGFzcyBxZCBleHRlbmRzIEFje2NvbnN0cnVjdG9yKHQpe2NvbnN0IGU9ZnVuY3Rpb24gdChlKXtjb25zdCBuPVtdO2UmJmUuaXNCb25lJiZuLnB1c2goZSk7Zm9yKGxldCByPTA7cjxlLmNoaWxkcmVuLmxlbmd0aDtyKyspbi5wdXNoLmFwcGx5KG4sdChlLmNoaWxkcmVuW3JdKSk7cmV0dXJuIG59KHQpLG49bmV3IHFpLHI9W10saT1bXSxvPW5ldyB5aSgwLDAsMSksYT1uZXcgeWkoMCwxLDApO2ZvcihsZXQgdD0wO3Q8ZS5sZW5ndGg7dCsrKXtjb25zdCBuPWVbdF07bi5wYXJlbnQmJm4ucGFyZW50LmlzQm9uZSYmKHIucHVzaCgwLDAsMCksci5wdXNoKDAsMCwwKSxpLnB1c2goby5yLG8uZyxvLmIpLGkucHVzaChhLnIsYS5nLGEuYikpfW4uc2V0QXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgTmkociwzKSksbi5zZXRBdHRyaWJ1dGUoXCJjb2xvclwiLG5ldyBOaShpLDMpKTtzdXBlcihuLG5ldyB5Yyh7dmVydGV4Q29sb3JzOiEwLGRlcHRoVGVzdDohMSxkZXB0aFdyaXRlOiExLHRvbmVNYXBwZWQ6ITEsdHJhbnNwYXJlbnQ6ITB9KSksdGhpcy50eXBlPVwiU2tlbGV0b25IZWxwZXJcIix0aGlzLmlzU2tlbGV0b25IZWxwZXI9ITAsdGhpcy5yb290PXQsdGhpcy5ib25lcz1lLHRoaXMubWF0cml4PXQubWF0cml4V29ybGQsdGhpcy5tYXRyaXhBdXRvVXBkYXRlPSExfXVwZGF0ZU1hdHJpeFdvcmxkKHQpe2NvbnN0IGU9dGhpcy5ib25lcyxuPXRoaXMuZ2VvbWV0cnkscj1uLmdldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIpO1hkLmNvcHkodGhpcy5yb290Lm1hdHJpeFdvcmxkKS5pbnZlcnQoKTtmb3IobGV0IHQ9MCxuPTA7dDxlLmxlbmd0aDt0Kyspe2NvbnN0IGk9ZVt0XTtpLnBhcmVudCYmaS5wYXJlbnQuaXNCb25lJiYoV2QubXVsdGlwbHlNYXRyaWNlcyhYZCxpLm1hdHJpeFdvcmxkKSxqZC5zZXRGcm9tTWF0cml4UG9zaXRpb24oV2QpLHIuc2V0WFlaKG4samQueCxqZC55LGpkLnopLFdkLm11bHRpcGx5TWF0cmljZXMoWGQsaS5wYXJlbnQubWF0cml4V29ybGQpLGpkLnNldEZyb21NYXRyaXhQb3NpdGlvbihXZCksci5zZXRYWVoobisxLGpkLngsamQueSxqZC56KSxuKz0yKX1uLmdldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIpLm5lZWRzVXBkYXRlPSEwLHN1cGVyLnVwZGF0ZU1hdHJpeFdvcmxkKHQpfX1jbGFzcyBZZCBleHRlbmRzIGhve2NvbnN0cnVjdG9yKHQsZSxuKXtzdXBlcihuZXcgS2woZSw0LDIpLG5ldyBfaSh7d2lyZWZyYW1lOiEwLGZvZzohMSx0b25lTWFwcGVkOiExfSkpLHRoaXMubGlnaHQ9dCx0aGlzLmxpZ2h0LnVwZGF0ZU1hdHJpeFdvcmxkKCksdGhpcy5jb2xvcj1uLHRoaXMudHlwZT1cIlBvaW50TGlnaHRIZWxwZXJcIix0aGlzLm1hdHJpeD10aGlzLmxpZ2h0Lm1hdHJpeFdvcmxkLHRoaXMubWF0cml4QXV0b1VwZGF0ZT0hMSx0aGlzLnVwZGF0ZSgpfWRpc3Bvc2UoKXt0aGlzLmdlb21ldHJ5LmRpc3Bvc2UoKSx0aGlzLm1hdGVyaWFsLmRpc3Bvc2UoKX11cGRhdGUoKXt2b2lkIDAhPT10aGlzLmNvbG9yP3RoaXMubWF0ZXJpYWwuY29sb3Iuc2V0KHRoaXMuY29sb3IpOnRoaXMubWF0ZXJpYWwuY29sb3IuY29weSh0aGlzLmxpZ2h0LmNvbG9yKX19Y29uc3QgWmQ9bmV3IEtuLEpkPW5ldyB5aSxLZD1uZXcgeWk7Y2xhc3MgUWQgZXh0ZW5kcyBKcntjb25zdHJ1Y3Rvcih0LGUsbil7c3VwZXIoKSx0aGlzLmxpZ2h0PXQsdGhpcy5saWdodC51cGRhdGVNYXRyaXhXb3JsZCgpLHRoaXMubWF0cml4PXQubWF0cml4V29ybGQsdGhpcy5tYXRyaXhBdXRvVXBkYXRlPSExLHRoaXMuY29sb3I9bjtjb25zdCByPW5ldyBIbChlKTtyLnJvdGF0ZVkoLjUqTWF0aC5QSSksdGhpcy5tYXRlcmlhbD1uZXcgX2koe3dpcmVmcmFtZTohMCxmb2c6ITEsdG9uZU1hcHBlZDohMX0pLHZvaWQgMD09PXRoaXMuY29sb3ImJih0aGlzLm1hdGVyaWFsLnZlcnRleENvbG9ycz0hMCk7Y29uc3QgaT1yLmdldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIpLG89bmV3IEZsb2F0MzJBcnJheSgzKmkuY291bnQpO3Iuc2V0QXR0cmlidXRlKFwiY29sb3JcIixuZXcgVGkobywzKSksdGhpcy5hZGQobmV3IGhvKHIsdGhpcy5tYXRlcmlhbCkpLHRoaXMudXBkYXRlKCl9ZGlzcG9zZSgpe3RoaXMuY2hpbGRyZW5bMF0uZ2VvbWV0cnkuZGlzcG9zZSgpLHRoaXMuY2hpbGRyZW5bMF0ubWF0ZXJpYWwuZGlzcG9zZSgpfXVwZGF0ZSgpe2NvbnN0IHQ9dGhpcy5jaGlsZHJlblswXTtpZih2b2lkIDAhPT10aGlzLmNvbG9yKXRoaXMubWF0ZXJpYWwuY29sb3Iuc2V0KHRoaXMuY29sb3IpO2Vsc2V7Y29uc3QgZT10Lmdlb21ldHJ5LmdldEF0dHJpYnV0ZShcImNvbG9yXCIpO0pkLmNvcHkodGhpcy5saWdodC5jb2xvciksS2QuY29weSh0aGlzLmxpZ2h0Lmdyb3VuZENvbG9yKTtmb3IobGV0IHQ9MCxuPWUuY291bnQ7dDxuO3QrKyl7Y29uc3Qgcj10PG4vMj9KZDpLZDtlLnNldFhZWih0LHIucixyLmcsci5iKX1lLm5lZWRzVXBkYXRlPSEwfXQubG9va0F0KFpkLnNldEZyb21NYXRyaXhQb3NpdGlvbih0aGlzLmxpZ2h0Lm1hdHJpeFdvcmxkKS5uZWdhdGUoKSl9fWNsYXNzICRkIGV4dGVuZHMgQWN7Y29uc3RydWN0b3IodD0xMCxlPTEwLG49NDQ3MzkyNCxyPTg5NDc4NDgpe249bmV3IHlpKG4pLHI9bmV3IHlpKHIpO2NvbnN0IGk9ZS8yLG89dC9lLGE9dC8yLHM9W10sYz1bXTtmb3IobGV0IHQ9MCxsPTAsdT0tYTt0PD1lO3QrKyx1Kz1vKXtzLnB1c2goLWEsMCx1LGEsMCx1KSxzLnB1c2godSwwLC1hLHUsMCxhKTtjb25zdCBlPXQ9PT1pP246cjtlLnRvQXJyYXkoYyxsKSxsKz0zLGUudG9BcnJheShjLGwpLGwrPTMsZS50b0FycmF5KGMsbCksbCs9MyxlLnRvQXJyYXkoYyxsKSxsKz0zfWNvbnN0IGw9bmV3IHFpO2wuc2V0QXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgTmkocywzKSksbC5zZXRBdHRyaWJ1dGUoXCJjb2xvclwiLG5ldyBOaShjLDMpKTtzdXBlcihsLG5ldyB5Yyh7dmVydGV4Q29sb3JzOiEwLHRvbmVNYXBwZWQ6ITF9KSksdGhpcy50eXBlPVwiR3JpZEhlbHBlclwifX1jbGFzcyB0cCBleHRlbmRzIEFje2NvbnN0cnVjdG9yKHQ9MTAsZT0xNixuPTgscj02NCxpPTQ0NzM5MjQsbz04OTQ3ODQ4KXtpPW5ldyB5aShpKSxvPW5ldyB5aShvKTtjb25zdCBhPVtdLHM9W107Zm9yKGxldCBuPTA7bjw9ZTtuKyspe2NvbnN0IHI9bi9lKigyKk1hdGguUEkpLGM9TWF0aC5zaW4ocikqdCxsPU1hdGguY29zKHIpKnQ7YS5wdXNoKDAsMCwwKSxhLnB1c2goYywwLGwpO2NvbnN0IHU9MSZuP2k6bztzLnB1c2godS5yLHUuZyx1LmIpLHMucHVzaCh1LnIsdS5nLHUuYil9Zm9yKGxldCBlPTA7ZTw9bjtlKyspe2NvbnN0IGM9MSZlP2k6byxsPXQtdC9uKmU7Zm9yKGxldCB0PTA7dDxyO3QrKyl7bGV0IGU9dC9yKigyKk1hdGguUEkpLG49TWF0aC5zaW4oZSkqbCxpPU1hdGguY29zKGUpKmw7YS5wdXNoKG4sMCxpKSxzLnB1c2goYy5yLGMuZyxjLmIpLGU9KHQrMSkvciooMipNYXRoLlBJKSxuPU1hdGguc2luKGUpKmwsaT1NYXRoLmNvcyhlKSpsLGEucHVzaChuLDAsaSkscy5wdXNoKGMucixjLmcsYy5iKX19Y29uc3QgYz1uZXcgcWk7Yy5zZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBOaShhLDMpKSxjLnNldEF0dHJpYnV0ZShcImNvbG9yXCIsbmV3IE5pKHMsMykpO3N1cGVyKGMsbmV3IHljKHt2ZXJ0ZXhDb2xvcnM6ITAsdG9uZU1hcHBlZDohMX0pKSx0aGlzLnR5cGU9XCJQb2xhckdyaWRIZWxwZXJcIn19Y29uc3QgZXA9bmV3IEtuLG5wPW5ldyBLbixycD1uZXcgS247Y2xhc3MgaXAgZXh0ZW5kcyBKcntjb25zdHJ1Y3Rvcih0LGUsbil7c3VwZXIoKSx0aGlzLmxpZ2h0PXQsdGhpcy5saWdodC51cGRhdGVNYXRyaXhXb3JsZCgpLHRoaXMubWF0cml4PXQubWF0cml4V29ybGQsdGhpcy5tYXRyaXhBdXRvVXBkYXRlPSExLHRoaXMuY29sb3I9bix2b2lkIDA9PT1lJiYoZT0xKTtsZXQgcj1uZXcgcWk7ci5zZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBOaShbLWUsZSwwLGUsZSwwLGUsLWUsMCwtZSwtZSwwLC1lLGUsMF0sMykpO2NvbnN0IGk9bmV3IHljKHtmb2c6ITEsdG9uZU1hcHBlZDohMX0pO3RoaXMubGlnaHRQbGFuZT1uZXcgU2MocixpKSx0aGlzLmFkZCh0aGlzLmxpZ2h0UGxhbmUpLHI9bmV3IHFpLHIuc2V0QXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgTmkoWzAsMCwwLDAsMCwxXSwzKSksdGhpcy50YXJnZXRMaW5lPW5ldyBTYyhyLGkpLHRoaXMuYWRkKHRoaXMudGFyZ2V0TGluZSksdGhpcy51cGRhdGUoKX1kaXNwb3NlKCl7dGhpcy5saWdodFBsYW5lLmdlb21ldHJ5LmRpc3Bvc2UoKSx0aGlzLmxpZ2h0UGxhbmUubWF0ZXJpYWwuZGlzcG9zZSgpLHRoaXMudGFyZ2V0TGluZS5nZW9tZXRyeS5kaXNwb3NlKCksdGhpcy50YXJnZXRMaW5lLm1hdGVyaWFsLmRpc3Bvc2UoKX11cGRhdGUoKXtlcC5zZXRGcm9tTWF0cml4UG9zaXRpb24odGhpcy5saWdodC5tYXRyaXhXb3JsZCksbnAuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKHRoaXMubGlnaHQudGFyZ2V0Lm1hdHJpeFdvcmxkKSxycC5zdWJWZWN0b3JzKG5wLGVwKSx0aGlzLmxpZ2h0UGxhbmUubG9va0F0KG5wKSx2b2lkIDAhPT10aGlzLmNvbG9yPyh0aGlzLmxpZ2h0UGxhbmUubWF0ZXJpYWwuY29sb3Iuc2V0KHRoaXMuY29sb3IpLHRoaXMudGFyZ2V0TGluZS5tYXRlcmlhbC5jb2xvci5zZXQodGhpcy5jb2xvcikpOih0aGlzLmxpZ2h0UGxhbmUubWF0ZXJpYWwuY29sb3IuY29weSh0aGlzLmxpZ2h0LmNvbG9yKSx0aGlzLnRhcmdldExpbmUubWF0ZXJpYWwuY29sb3IuY29weSh0aGlzLmxpZ2h0LmNvbG9yKSksdGhpcy50YXJnZXRMaW5lLmxvb2tBdChucCksdGhpcy50YXJnZXRMaW5lLnNjYWxlLno9cnAubGVuZ3RoKCl9fWNvbnN0IG9wPW5ldyBLbixhcD1uZXcgYm87Y2xhc3Mgc3AgZXh0ZW5kcyBBY3tjb25zdHJ1Y3Rvcih0KXtjb25zdCBlPW5ldyBxaSxuPW5ldyB5Yyh7Y29sb3I6MTY3NzcyMTUsdmVydGV4Q29sb3JzOiEwLHRvbmVNYXBwZWQ6ITF9KSxyPVtdLGk9W10sbz17fSxhPW5ldyB5aSgxNjc1NTIwMCkscz1uZXcgeWkoMTY3MTE2ODApLGM9bmV3IHlpKDQzNzc1KSxsPW5ldyB5aSgxNjc3NzIxNSksdT1uZXcgeWkoMzM1NTQ0Myk7ZnVuY3Rpb24gaCh0LGUsbil7ZCh0LG4pLGQoZSxuKX1mdW5jdGlvbiBkKHQsZSl7ci5wdXNoKDAsMCwwKSxpLnB1c2goZS5yLGUuZyxlLmIpLHZvaWQgMD09PW9bdF0mJihvW3RdPVtdKSxvW3RdLnB1c2goci5sZW5ndGgvMy0xKX1oKFwibjFcIixcIm4yXCIsYSksaChcIm4yXCIsXCJuNFwiLGEpLGgoXCJuNFwiLFwibjNcIixhKSxoKFwibjNcIixcIm4xXCIsYSksaChcImYxXCIsXCJmMlwiLGEpLGgoXCJmMlwiLFwiZjRcIixhKSxoKFwiZjRcIixcImYzXCIsYSksaChcImYzXCIsXCJmMVwiLGEpLGgoXCJuMVwiLFwiZjFcIixhKSxoKFwibjJcIixcImYyXCIsYSksaChcIm4zXCIsXCJmM1wiLGEpLGgoXCJuNFwiLFwiZjRcIixhKSxoKFwicFwiLFwibjFcIixzKSxoKFwicFwiLFwibjJcIixzKSxoKFwicFwiLFwibjNcIixzKSxoKFwicFwiLFwibjRcIixzKSxoKFwidTFcIixcInUyXCIsYyksaChcInUyXCIsXCJ1M1wiLGMpLGgoXCJ1M1wiLFwidTFcIixjKSxoKFwiY1wiLFwidFwiLGwpLGgoXCJwXCIsXCJjXCIsdSksaChcImNuMVwiLFwiY24yXCIsdSksaChcImNuM1wiLFwiY240XCIsdSksaChcImNmMVwiLFwiY2YyXCIsdSksaChcImNmM1wiLFwiY2Y0XCIsdSksZS5zZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBOaShyLDMpKSxlLnNldEF0dHJpYnV0ZShcImNvbG9yXCIsbmV3IE5pKGksMykpLHN1cGVyKGUsbiksdGhpcy50eXBlPVwiQ2FtZXJhSGVscGVyXCIsdGhpcy5jYW1lcmE9dCx0aGlzLmNhbWVyYS51cGRhdGVQcm9qZWN0aW9uTWF0cml4JiZ0aGlzLmNhbWVyYS51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCksdGhpcy5tYXRyaXg9dC5tYXRyaXhXb3JsZCx0aGlzLm1hdHJpeEF1dG9VcGRhdGU9ITEsdGhpcy5wb2ludE1hcD1vLHRoaXMudXBkYXRlKCl9dXBkYXRlKCl7Y29uc3QgdD10aGlzLmdlb21ldHJ5LGU9dGhpcy5wb2ludE1hcDthcC5wcm9qZWN0aW9uTWF0cml4SW52ZXJzZS5jb3B5KHRoaXMuY2FtZXJhLnByb2plY3Rpb25NYXRyaXhJbnZlcnNlKSxjcChcImNcIixlLHQsYXAsMCwwLC0xKSxjcChcInRcIixlLHQsYXAsMCwwLDEpLGNwKFwibjFcIixlLHQsYXAsLTEsLTEsLTEpLGNwKFwibjJcIixlLHQsYXAsMSwtMSwtMSksY3AoXCJuM1wiLGUsdCxhcCwtMSwxLC0xKSxjcChcIm40XCIsZSx0LGFwLDEsMSwtMSksY3AoXCJmMVwiLGUsdCxhcCwtMSwtMSwxKSxjcChcImYyXCIsZSx0LGFwLDEsLTEsMSksY3AoXCJmM1wiLGUsdCxhcCwtMSwxLDEpLGNwKFwiZjRcIixlLHQsYXAsMSwxLDEpLGNwKFwidTFcIixlLHQsYXAsLjcsMS4xLC0xKSxjcChcInUyXCIsZSx0LGFwLC0uNywxLjEsLTEpLGNwKFwidTNcIixlLHQsYXAsMCwyLC0xKSxjcChcImNmMVwiLGUsdCxhcCwtMSwwLDEpLGNwKFwiY2YyXCIsZSx0LGFwLDEsMCwxKSxjcChcImNmM1wiLGUsdCxhcCwwLC0xLDEpLGNwKFwiY2Y0XCIsZSx0LGFwLDAsMSwxKSxjcChcImNuMVwiLGUsdCxhcCwtMSwwLC0xKSxjcChcImNuMlwiLGUsdCxhcCwxLDAsLTEpLGNwKFwiY24zXCIsZSx0LGFwLDAsLTEsLTEpLGNwKFwiY240XCIsZSx0LGFwLDAsMSwtMSksdC5nZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiKS5uZWVkc1VwZGF0ZT0hMH19ZnVuY3Rpb24gY3AodCxlLG4scixpLG8sYSl7b3Auc2V0KGksbyxhKS51bnByb2plY3Qocik7Y29uc3Qgcz1lW3RdO2lmKHZvaWQgMCE9PXMpe2NvbnN0IHQ9bi5nZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiKTtmb3IobGV0IGU9MCxuPXMubGVuZ3RoO2U8bjtlKyspdC5zZXRYWVooc1tlXSxvcC54LG9wLnksb3Aueil9fWNvbnN0IGxwPW5ldyB0cjtjbGFzcyB1cCBleHRlbmRzIEFje2NvbnN0cnVjdG9yKHQsZT0xNjc3Njk2MCl7Y29uc3Qgbj1uZXcgVWludDE2QXJyYXkoWzAsMSwxLDIsMiwzLDMsMCw0LDUsNSw2LDYsNyw3LDQsMCw0LDEsNSwyLDYsMyw3XSkscj1uZXcgRmxvYXQzMkFycmF5KDI0KSxpPW5ldyBxaTtpLnNldEluZGV4KG5ldyBUaShuLDEpKSxpLnNldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IFRpKHIsMykpLHN1cGVyKGksbmV3IHljKHtjb2xvcjplLHRvbmVNYXBwZWQ6ITF9KSksdGhpcy5vYmplY3Q9dCx0aGlzLnR5cGU9XCJCb3hIZWxwZXJcIix0aGlzLm1hdHJpeEF1dG9VcGRhdGU9ITEsdGhpcy51cGRhdGUoKX11cGRhdGUodCl7aWYodm9pZCAwIT09dCYmY29uc29sZS53YXJuKFwiVEhSRUUuQm94SGVscGVyOiAudXBkYXRlKCkgaGFzIG5vIGxvbmdlciBhcmd1bWVudHMuXCIpLHZvaWQgMCE9PXRoaXMub2JqZWN0JiZscC5zZXRGcm9tT2JqZWN0KHRoaXMub2JqZWN0KSxscC5pc0VtcHR5KCkpcmV0dXJuO2NvbnN0IGU9bHAubWluLG49bHAubWF4LHI9dGhpcy5nZW9tZXRyeS5hdHRyaWJ1dGVzLnBvc2l0aW9uLGk9ci5hcnJheTtpWzBdPW4ueCxpWzFdPW4ueSxpWzJdPW4ueixpWzNdPWUueCxpWzRdPW4ueSxpWzVdPW4ueixpWzZdPWUueCxpWzddPWUueSxpWzhdPW4ueixpWzldPW4ueCxpWzEwXT1lLnksaVsxMV09bi56LGlbMTJdPW4ueCxpWzEzXT1uLnksaVsxNF09ZS56LGlbMTVdPWUueCxpWzE2XT1uLnksaVsxN109ZS56LGlbMThdPWUueCxpWzE5XT1lLnksaVsyMF09ZS56LGlbMjFdPW4ueCxpWzIyXT1lLnksaVsyM109ZS56LHIubmVlZHNVcGRhdGU9ITAsdGhpcy5nZW9tZXRyeS5jb21wdXRlQm91bmRpbmdTcGhlcmUoKX1zZXRGcm9tT2JqZWN0KHQpe3JldHVybiB0aGlzLm9iamVjdD10LHRoaXMudXBkYXRlKCksdGhpc31jb3B5KHQpe3JldHVybiBBYy5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsdCksdGhpcy5vYmplY3Q9dC5vYmplY3QsdGhpc319Y2xhc3MgaHAgZXh0ZW5kcyBBY3tjb25zdHJ1Y3Rvcih0LGU9MTY3NzY5NjApe2NvbnN0IG49bmV3IFVpbnQxNkFycmF5KFswLDEsMSwyLDIsMywzLDAsNCw1LDUsNiw2LDcsNyw0LDAsNCwxLDUsMiw2LDMsN10pLHI9bmV3IHFpO3Iuc2V0SW5kZXgobmV3IFRpKG4sMSkpLHIuc2V0QXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgTmkoWzEsMSwxLC0xLDEsMSwtMSwtMSwxLDEsLTEsMSwxLDEsLTEsLTEsMSwtMSwtMSwtMSwtMSwxLC0xLC0xXSwzKSksc3VwZXIocixuZXcgeWMoe2NvbG9yOmUsdG9uZU1hcHBlZDohMX0pKSx0aGlzLmJveD10LHRoaXMudHlwZT1cIkJveDNIZWxwZXJcIix0aGlzLmdlb21ldHJ5LmNvbXB1dGVCb3VuZGluZ1NwaGVyZSgpfXVwZGF0ZU1hdHJpeFdvcmxkKHQpe2NvbnN0IGU9dGhpcy5ib3g7ZS5pc0VtcHR5KCl8fChlLmdldENlbnRlcih0aGlzLnBvc2l0aW9uKSxlLmdldFNpemUodGhpcy5zY2FsZSksdGhpcy5zY2FsZS5tdWx0aXBseVNjYWxhciguNSksc3VwZXIudXBkYXRlTWF0cml4V29ybGQodCkpfX1jbGFzcyBkcCBleHRlbmRzIFNje2NvbnN0cnVjdG9yKHQsZT0xLG49MTY3NzY5NjApe2NvbnN0IHI9bixpPW5ldyBxaTtpLnNldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IE5pKFsxLC0xLDEsLTEsMSwxLC0xLC0xLDEsMSwxLDEsLTEsMSwxLC0xLC0xLDEsMSwtMSwxLDEsMSwxLDAsMCwxLDAsMCwwXSwzKSksaS5jb21wdXRlQm91bmRpbmdTcGhlcmUoKSxzdXBlcihpLG5ldyB5Yyh7Y29sb3I6cix0b25lTWFwcGVkOiExfSkpLHRoaXMudHlwZT1cIlBsYW5lSGVscGVyXCIsdGhpcy5wbGFuZT10LHRoaXMuc2l6ZT1lO2NvbnN0IG89bmV3IHFpO28uc2V0QXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgTmkoWzEsMSwxLC0xLDEsMSwtMSwtMSwxLDEsMSwxLC0xLC0xLDEsMSwtMSwxXSwzKSksby5jb21wdXRlQm91bmRpbmdTcGhlcmUoKSx0aGlzLmFkZChuZXcgaG8obyxuZXcgX2koe2NvbG9yOnIsb3BhY2l0eTouMix0cmFuc3BhcmVudDohMCxkZXB0aFdyaXRlOiExLHRvbmVNYXBwZWQ6ITF9KSkpfXVwZGF0ZU1hdHJpeFdvcmxkKHQpe2xldCBlPS10aGlzLnBsYW5lLmNvbnN0YW50O01hdGguYWJzKGUpPDFlLTgmJihlPTFlLTgpLHRoaXMuc2NhbGUuc2V0KC41KnRoaXMuc2l6ZSwuNSp0aGlzLnNpemUsZSksdGhpcy5jaGlsZHJlblswXS5tYXRlcmlhbC5zaWRlPWU8MD9tOmYsdGhpcy5sb29rQXQodGhpcy5wbGFuZS5ub3JtYWwpLHN1cGVyLnVwZGF0ZU1hdHJpeFdvcmxkKHQpfX1jb25zdCBwcD1uZXcgS247bGV0IGZwLG1wO2NsYXNzIGdwIGV4dGVuZHMgSnJ7Y29uc3RydWN0b3IodCxlLG4scixpLG8pe3N1cGVyKCksdGhpcy50eXBlPVwiQXJyb3dIZWxwZXJcIix2b2lkIDA9PT10JiYodD1uZXcgS24oMCwwLDEpKSx2b2lkIDA9PT1lJiYoZT1uZXcgS24oMCwwLDApKSx2b2lkIDA9PT1uJiYobj0xKSx2b2lkIDA9PT1yJiYocj0xNjc3Njk2MCksdm9pZCAwPT09aSYmKGk9LjIqbiksdm9pZCAwPT09byYmKG89LjIqaSksdm9pZCAwPT09ZnAmJihmcD1uZXcgcWksZnAuc2V0QXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgTmkoWzAsMCwwLDAsMSwwXSwzKSksbXA9bmV3IFljKDAsLjUsMSw1LDEpLG1wLnRyYW5zbGF0ZSgwLC0uNSwwKSksdGhpcy5wb3NpdGlvbi5jb3B5KGUpLHRoaXMubGluZT1uZXcgU2MoZnAsbmV3IHljKHtjb2xvcjpyLHRvbmVNYXBwZWQ6ITF9KSksdGhpcy5saW5lLm1hdHJpeEF1dG9VcGRhdGU9ITEsdGhpcy5hZGQodGhpcy5saW5lKSx0aGlzLmNvbmU9bmV3IGhvKG1wLG5ldyBfaSh7Y29sb3I6cix0b25lTWFwcGVkOiExfSkpLHRoaXMuY29uZS5tYXRyaXhBdXRvVXBkYXRlPSExLHRoaXMuYWRkKHRoaXMuY29uZSksdGhpcy5zZXREaXJlY3Rpb24odCksdGhpcy5zZXRMZW5ndGgobixpLG8pfXNldERpcmVjdGlvbih0KXtpZih0Lnk+Ljk5OTk5KXRoaXMucXVhdGVybmlvbi5zZXQoMCwwLDAsMSk7ZWxzZSBpZih0Lnk8LS45OTk5OSl0aGlzLnF1YXRlcm5pb24uc2V0KDEsMCwwLDApO2Vsc2V7cHAuc2V0KHQueiwwLC10LngpLm5vcm1hbGl6ZSgpO2NvbnN0IGU9TWF0aC5hY29zKHQueSk7dGhpcy5xdWF0ZXJuaW9uLnNldEZyb21BeGlzQW5nbGUocHAsZSl9fXNldExlbmd0aCh0LGUsbil7dm9pZCAwPT09ZSYmKGU9LjIqdCksdm9pZCAwPT09biYmKG49LjIqZSksdGhpcy5saW5lLnNjYWxlLnNldCgxLE1hdGgubWF4KDFlLTQsdC1lKSwxKSx0aGlzLmxpbmUudXBkYXRlTWF0cml4KCksdGhpcy5jb25lLnNjYWxlLnNldChuLGUsbiksdGhpcy5jb25lLnBvc2l0aW9uLnk9dCx0aGlzLmNvbmUudXBkYXRlTWF0cml4KCl9c2V0Q29sb3IodCl7dGhpcy5saW5lLm1hdGVyaWFsLmNvbG9yLnNldCh0KSx0aGlzLmNvbmUubWF0ZXJpYWwuY29sb3Iuc2V0KHQpfWNvcHkodCl7cmV0dXJuIHN1cGVyLmNvcHkodCwhMSksdGhpcy5saW5lLmNvcHkodC5saW5lKSx0aGlzLmNvbmUuY29weSh0LmNvbmUpLHRoaXN9fWNsYXNzIHZwIGV4dGVuZHMgQWN7Y29uc3RydWN0b3IodD0xKXtjb25zdCBlPVswLDAsMCx0LDAsMCwwLDAsMCwwLHQsMCwwLDAsMCwwLDAsdF0sbj1uZXcgcWk7bi5zZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBOaShlLDMpKSxuLnNldEF0dHJpYnV0ZShcImNvbG9yXCIsbmV3IE5pKFsxLDAsMCwxLC42LDAsMCwxLDAsLjYsMSwwLDAsMCwxLDAsLjYsMV0sMykpO3N1cGVyKG4sbmV3IHljKHt2ZXJ0ZXhDb2xvcnM6ITAsdG9uZU1hcHBlZDohMX0pKSx0aGlzLnR5cGU9XCJBeGVzSGVscGVyXCJ9fWNvbnN0IHlwPW5ldyBGbG9hdDMyQXJyYXkoMSkseHA9bmV3IEludDMyQXJyYXkoeXAuYnVmZmVyKSxicD17dG9IYWxmRmxvYXQ6ZnVuY3Rpb24odCl7eXBbMF09dDtjb25zdCBlPXhwWzBdO2xldCBuPWU+PjE2JjMyNzY4LHI9ZT4+MTImMjA0Nztjb25zdCBpPWU+PjIzJjI1NTtyZXR1cm4gaTwxMDM/bjppPjE0Mj8obnw9MzE3NDQsbnw9KDI1NT09aT8wOjEpJiY4Mzg4NjA3JmUsbik6aTwxMTM/KHJ8PTIwNDgsbnw9KHI+PjExNC1pKSsocj4+MTEzLWkmMSksbik6KG58PWktMTEyPDwxMHxyPj4xLG4rPTEmcixuKX19LHdwPU1hdGgucG93KDIsOCksX3A9Wy4xMjUsLjIxNSwuMzUsLjQ0NiwuNTI2LC41ODJdLE1wPTUrX3AubGVuZ3RoLFNwPXtbSmVdOjAsW0tlXToxLFskZV06MixbZW5dOjMsW25uXTo0LFtybl06NSxbUWVdOjZ9LFRwPW5ldyBUaCx7X2xvZFBsYW5lczpFcCxfc2l6ZUxvZHM6QXAsX3NpZ21hczpMcH09RHAoKTtsZXQgUnA9bnVsbDtjb25zdCBQcD0oMStNYXRoLnNxcnQoNSkpLzIsQ3A9MS9QcCxJcD1bbmV3IEtuKDEsMSwxKSxuZXcgS24oLTEsMSwxKSxuZXcgS24oMSwxLC0xKSxuZXcgS24oLTEsMSwtMSksbmV3IEtuKDAsUHAsQ3ApLG5ldyBLbigwLFBwLC1DcCksbmV3IEtuKENwLDAsUHApLG5ldyBLbigtQ3AsMCxQcCksbmV3IEtuKFBwLENwLDApLG5ldyBLbigtUHAsQ3AsMCldO2NsYXNzIE9we2NvbnN0cnVjdG9yKHQpe3RoaXMuX3JlbmRlcmVyPXQsdGhpcy5fcGluZ1BvbmdSZW5kZXJUYXJnZXQ9bnVsbCx0aGlzLl9ibHVyTWF0ZXJpYWw9ZnVuY3Rpb24odCl7Y29uc3QgZT1uZXcgRmxvYXQzMkFycmF5KHQpLG49bmV3IEtuKDAsMSwwKTtyZXR1cm4gbmV3IGR1KHtuYW1lOlwiU3BoZXJpY2FsR2F1c3NpYW5CbHVyXCIsZGVmaW5lczp7bjp0fSx1bmlmb3Jtczp7ZW52TWFwOnt2YWx1ZTpudWxsfSxzYW1wbGVzOnt2YWx1ZToxfSx3ZWlnaHRzOnt2YWx1ZTplfSxsYXRpdHVkaW5hbDp7dmFsdWU6ITF9LGRUaGV0YTp7dmFsdWU6MH0sbWlwSW50Ont2YWx1ZTowfSxwb2xlQXhpczp7dmFsdWU6bn0saW5wdXRFbmNvZGluZzp7dmFsdWU6U3BbSmVdfSxvdXRwdXRFbmNvZGluZzp7dmFsdWU6U3BbSmVdfX0sdmVydGV4U2hhZGVyOkdwKCksZnJhZ21lbnRTaGFkZXI6YFxcblxcblxcdFxcdFxcdHByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1xcblxcdFxcdFxcdHByZWNpc2lvbiBtZWRpdW1wIGludDtcXG5cXG5cXHRcXHRcXHR2YXJ5aW5nIHZlYzMgdk91dHB1dERpcmVjdGlvbjtcXG5cXG5cXHRcXHRcXHR1bmlmb3JtIHNhbXBsZXIyRCBlbnZNYXA7XFxuXFx0XFx0XFx0dW5pZm9ybSBpbnQgc2FtcGxlcztcXG5cXHRcXHRcXHR1bmlmb3JtIGZsb2F0IHdlaWdodHNbIG4gXTtcXG5cXHRcXHRcXHR1bmlmb3JtIGJvb2wgbGF0aXR1ZGluYWw7XFxuXFx0XFx0XFx0dW5pZm9ybSBmbG9hdCBkVGhldGE7XFxuXFx0XFx0XFx0dW5pZm9ybSBmbG9hdCBtaXBJbnQ7XFxuXFx0XFx0XFx0dW5pZm9ybSB2ZWMzIHBvbGVBeGlzO1xcblxcblxcdFxcdFxcdCR7SHAoKX1cXG5cXG5cXHRcXHRcXHQjZGVmaW5lIEVOVk1BUF9UWVBFX0NVQkVfVVZcXG5cXHRcXHRcXHQjaW5jbHVkZSA8Y3ViZV91dl9yZWZsZWN0aW9uX2ZyYWdtZW50PlxcblxcblxcdFxcdFxcdHZlYzMgZ2V0U2FtcGxlKCBmbG9hdCB0aGV0YSwgdmVjMyBheGlzICkge1xcblxcblxcdFxcdFxcdFxcdGZsb2F0IGNvc1RoZXRhID0gY29zKCB0aGV0YSApO1xcblxcdFxcdFxcdFxcdC8vIFJvZHJpZ3VlcycgYXhpcy1hbmdsZSByb3RhdGlvblxcblxcdFxcdFxcdFxcdHZlYzMgc2FtcGxlRGlyZWN0aW9uID0gdk91dHB1dERpcmVjdGlvbiAqIGNvc1RoZXRhXFxuXFx0XFx0XFx0XFx0XFx0KyBjcm9zcyggYXhpcywgdk91dHB1dERpcmVjdGlvbiApICogc2luKCB0aGV0YSApXFxuXFx0XFx0XFx0XFx0XFx0KyBheGlzICogZG90KCBheGlzLCB2T3V0cHV0RGlyZWN0aW9uICkgKiAoIDEuMCAtIGNvc1RoZXRhICk7XFxuXFxuXFx0XFx0XFx0XFx0cmV0dXJuIGJpbGluZWFyQ3ViZVVWKCBlbnZNYXAsIHNhbXBsZURpcmVjdGlvbiwgbWlwSW50ICk7XFxuXFxuXFx0XFx0XFx0fVxcblxcblxcdFxcdFxcdHZvaWQgbWFpbigpIHtcXG5cXG5cXHRcXHRcXHRcXHR2ZWMzIGF4aXMgPSBsYXRpdHVkaW5hbCA/IHBvbGVBeGlzIDogY3Jvc3MoIHBvbGVBeGlzLCB2T3V0cHV0RGlyZWN0aW9uICk7XFxuXFxuXFx0XFx0XFx0XFx0aWYgKCBhbGwoIGVxdWFsKCBheGlzLCB2ZWMzKCAwLjAgKSApICkgKSB7XFxuXFxuXFx0XFx0XFx0XFx0XFx0YXhpcyA9IHZlYzMoIHZPdXRwdXREaXJlY3Rpb24ueiwgMC4wLCAtIHZPdXRwdXREaXJlY3Rpb24ueCApO1xcblxcblxcdFxcdFxcdFxcdH1cXG5cXG5cXHRcXHRcXHRcXHRheGlzID0gbm9ybWFsaXplKCBheGlzICk7XFxuXFxuXFx0XFx0XFx0XFx0Z2xfRnJhZ0NvbG9yID0gdmVjNCggMC4wLCAwLjAsIDAuMCwgMS4wICk7XFxuXFx0XFx0XFx0XFx0Z2xfRnJhZ0NvbG9yLnJnYiArPSB3ZWlnaHRzWyAwIF0gKiBnZXRTYW1wbGUoIDAuMCwgYXhpcyApO1xcblxcblxcdFxcdFxcdFxcdGZvciAoIGludCBpID0gMTsgaSA8IG47IGkrKyApIHtcXG5cXG5cXHRcXHRcXHRcXHRcXHRpZiAoIGkgPj0gc2FtcGxlcyApIHtcXG5cXG5cXHRcXHRcXHRcXHRcXHRcXHRicmVhaztcXG5cXG5cXHRcXHRcXHRcXHRcXHR9XFxuXFxuXFx0XFx0XFx0XFx0XFx0ZmxvYXQgdGhldGEgPSBkVGhldGEgKiBmbG9hdCggaSApO1xcblxcdFxcdFxcdFxcdFxcdGdsX0ZyYWdDb2xvci5yZ2IgKz0gd2VpZ2h0c1sgaSBdICogZ2V0U2FtcGxlKCAtMS4wICogdGhldGEsIGF4aXMgKTtcXG5cXHRcXHRcXHRcXHRcXHRnbF9GcmFnQ29sb3IucmdiICs9IHdlaWdodHNbIGkgXSAqIGdldFNhbXBsZSggdGhldGEsIGF4aXMgKTtcXG5cXG5cXHRcXHRcXHRcXHR9XFxuXFxuXFx0XFx0XFx0XFx0Z2xfRnJhZ0NvbG9yID0gbGluZWFyVG9PdXRwdXRUZXhlbCggZ2xfRnJhZ0NvbG9yICk7XFxuXFxuXFx0XFx0XFx0fVxcblxcdFxcdGAsYmxlbmRpbmc6eCxkZXB0aFRlc3Q6ITEsZGVwdGhXcml0ZTohMX0pfSgyMCksdGhpcy5fZXF1aXJlY3RTaGFkZXI9bnVsbCx0aGlzLl9jdWJlbWFwU2hhZGVyPW51bGwsdGhpcy5fY29tcGlsZU1hdGVyaWFsKHRoaXMuX2JsdXJNYXRlcmlhbCl9ZnJvbVNjZW5lKHQsZT0wLG49LjEscj0xMDApe1JwPXRoaXMuX3JlbmRlcmVyLmdldFJlbmRlclRhcmdldCgpO2NvbnN0IGk9dGhpcy5fYWxsb2NhdGVUYXJnZXRzKCk7cmV0dXJuIHRoaXMuX3NjZW5lVG9DdWJlVVYodCxuLHIsaSksZT4wJiZ0aGlzLl9ibHVyKGksMCwwLGUpLHRoaXMuX2FwcGx5UE1SRU0oaSksdGhpcy5fY2xlYW51cChpKSxpfWZyb21FcXVpcmVjdGFuZ3VsYXIodCl7cmV0dXJuIHRoaXMuX2Zyb21UZXh0dXJlKHQpfWZyb21DdWJlbWFwKHQpe3JldHVybiB0aGlzLl9mcm9tVGV4dHVyZSh0KX1jb21waWxlQ3ViZW1hcFNoYWRlcigpe251bGw9PT10aGlzLl9jdWJlbWFwU2hhZGVyJiYodGhpcy5fY3ViZW1hcFNoYWRlcj16cCgpLHRoaXMuX2NvbXBpbGVNYXRlcmlhbCh0aGlzLl9jdWJlbWFwU2hhZGVyKSl9Y29tcGlsZUVxdWlyZWN0YW5ndWxhclNoYWRlcigpe251bGw9PT10aGlzLl9lcXVpcmVjdFNoYWRlciYmKHRoaXMuX2VxdWlyZWN0U2hhZGVyPVVwKCksdGhpcy5fY29tcGlsZU1hdGVyaWFsKHRoaXMuX2VxdWlyZWN0U2hhZGVyKSl9ZGlzcG9zZSgpe3RoaXMuX2JsdXJNYXRlcmlhbC5kaXNwb3NlKCksbnVsbCE9PXRoaXMuX2N1YmVtYXBTaGFkZXImJnRoaXMuX2N1YmVtYXBTaGFkZXIuZGlzcG9zZSgpLG51bGwhPT10aGlzLl9lcXVpcmVjdFNoYWRlciYmdGhpcy5fZXF1aXJlY3RTaGFkZXIuZGlzcG9zZSgpO2ZvcihsZXQgdD0wO3Q8RXAubGVuZ3RoO3QrKylFcFt0XS5kaXNwb3NlKCl9X2NsZWFudXAodCl7dGhpcy5fcGluZ1BvbmdSZW5kZXJUYXJnZXQuZGlzcG9zZSgpLHRoaXMuX3JlbmRlcmVyLnNldFJlbmRlclRhcmdldChScCksdC5zY2lzc29yVGVzdD0hMSxGcCh0LDAsMCx0LndpZHRoLHQuaGVpZ2h0KX1fZnJvbVRleHR1cmUodCl7UnA9dGhpcy5fcmVuZGVyZXIuZ2V0UmVuZGVyVGFyZ2V0KCk7Y29uc3QgZT10aGlzLl9hbGxvY2F0ZVRhcmdldHModCk7cmV0dXJuIHRoaXMuX3RleHR1cmVUb0N1YmVVVih0LGUpLHRoaXMuX2FwcGx5UE1SRU0oZSksdGhpcy5fY2xlYW51cChlKSxlfV9hbGxvY2F0ZVRhcmdldHModCl7Y29uc3QgZT17bWFnRmlsdGVyOmZ0LG1pbkZpbHRlcjpmdCxnZW5lcmF0ZU1pcG1hcHM6ITEsdHlwZTpTdCxmb3JtYXQ6SHQsZW5jb2Rpbmc6TnAodCk/dC5lbmNvZGluZzokZSxkZXB0aEJ1ZmZlcjohMX0sbj1CcChlKTtyZXR1cm4gbi5kZXB0aEJ1ZmZlcj0hdCx0aGlzLl9waW5nUG9uZ1JlbmRlclRhcmdldD1CcChlKSxufV9jb21waWxlTWF0ZXJpYWwodCl7Y29uc3QgZT1uZXcgaG8oRXBbMF0sdCk7dGhpcy5fcmVuZGVyZXIuY29tcGlsZShlLFRwKX1fc2NlbmVUb0N1YmVVVih0LGUsbixyKXtjb25zdCBpPW5ldyB3byg5MCwxLGUsbiksbz1bMSwtMSwxLDEsMSwxXSxhPVsxLDEsMSwtMSwtMSwtMV0scz10aGlzLl9yZW5kZXJlcixjPXMub3V0cHV0RW5jb2RpbmcsbD1zLnRvbmVNYXBwaW5nLHU9cy5nZXRDbGVhckNvbG9yKCksaD1zLmdldENsZWFyQWxwaGEoKTtzLnRvbmVNYXBwaW5nPVEscy5vdXRwdXRFbmNvZGluZz1KZTtsZXQgZD10LmJhY2tncm91bmQ7aWYoZCYmZC5pc0NvbG9yKXtkLmNvbnZlcnRTUkdCVG9MaW5lYXIoKTtjb25zdCBlPU1hdGgubWF4KGQucixkLmcsZC5iKSxuPU1hdGgubWluKE1hdGgubWF4KE1hdGguY2VpbChNYXRoLmxvZzIoZSkpLC0xMjgpLDEyNyk7ZD1kLm11bHRpcGx5U2NhbGFyKE1hdGgucG93KDIsLW4pKTtjb25zdCByPShuKzEyOCkvMjU1O3Muc2V0Q2xlYXJDb2xvcihkLHIpLHQuYmFja2dyb3VuZD1udWxsfWZvcihsZXQgZT0wO2U8NjtlKyspe2NvbnN0IG49ZSUzOzA9PW4/KGkudXAuc2V0KDAsb1tlXSwwKSxpLmxvb2tBdChhW2VdLDAsMCkpOjE9PW4/KGkudXAuc2V0KDAsMCxvW2VdKSxpLmxvb2tBdCgwLGFbZV0sMCkpOihpLnVwLnNldCgwLG9bZV0sMCksaS5sb29rQXQoMCwwLGFbZV0pKSxGcChyLG4qd3AsZT4yP3dwOjAsd3Asd3ApLHMuc2V0UmVuZGVyVGFyZ2V0KHIpLHMucmVuZGVyKHQsaSl9cy50b25lTWFwcGluZz1sLHMub3V0cHV0RW5jb2Rpbmc9YyxzLnNldENsZWFyQ29sb3IodSxoKX1fdGV4dHVyZVRvQ3ViZVVWKHQsZSl7Y29uc3Qgbj10aGlzLl9yZW5kZXJlcjt0LmlzQ3ViZVRleHR1cmU/bnVsbD09dGhpcy5fY3ViZW1hcFNoYWRlciYmKHRoaXMuX2N1YmVtYXBTaGFkZXI9enAoKSk6bnVsbD09dGhpcy5fZXF1aXJlY3RTaGFkZXImJih0aGlzLl9lcXVpcmVjdFNoYWRlcj1VcCgpKTtjb25zdCByPXQuaXNDdWJlVGV4dHVyZT90aGlzLl9jdWJlbWFwU2hhZGVyOnRoaXMuX2VxdWlyZWN0U2hhZGVyLGk9bmV3IGhvKEVwWzBdLHIpLG89ci51bmlmb3JtcztvLmVudk1hcC52YWx1ZT10LHQuaXNDdWJlVGV4dHVyZXx8by50ZXhlbFNpemUudmFsdWUuc2V0KDEvdC5pbWFnZS53aWR0aCwxL3QuaW1hZ2UuaGVpZ2h0KSxvLmlucHV0RW5jb2RpbmcudmFsdWU9U3BbdC5lbmNvZGluZ10sby5vdXRwdXRFbmNvZGluZy52YWx1ZT1TcFtlLnRleHR1cmUuZW5jb2RpbmddLEZwKGUsMCwwLDMqd3AsMip3cCksbi5zZXRSZW5kZXJUYXJnZXQoZSksbi5yZW5kZXIoaSxUcCl9X2FwcGx5UE1SRU0odCl7Y29uc3QgZT10aGlzLl9yZW5kZXJlcixuPWUuYXV0b0NsZWFyO2UuYXV0b0NsZWFyPSExO2ZvcihsZXQgZT0xO2U8TXA7ZSsrKXtjb25zdCBuPU1hdGguc3FydChMcFtlXSpMcFtlXS1McFtlLTFdKkxwW2UtMV0pLHI9SXBbKGUtMSklSXAubGVuZ3RoXTt0aGlzLl9ibHVyKHQsZS0xLGUsbixyKX1lLmF1dG9DbGVhcj1ufV9ibHVyKHQsZSxuLHIsaSl7Y29uc3Qgbz10aGlzLl9waW5nUG9uZ1JlbmRlclRhcmdldDt0aGlzLl9oYWxmQmx1cih0LG8sZSxuLHIsXCJsYXRpdHVkaW5hbFwiLGkpLHRoaXMuX2hhbGZCbHVyKG8sdCxuLG4scixcImxvbmdpdHVkaW5hbFwiLGkpfV9oYWxmQmx1cih0LGUsbixyLGksbyxhKXtjb25zdCBzPXRoaXMuX3JlbmRlcmVyLGM9dGhpcy5fYmx1ck1hdGVyaWFsO1wibGF0aXR1ZGluYWxcIiE9PW8mJlwibG9uZ2l0dWRpbmFsXCIhPT1vJiZjb25zb2xlLmVycm9yKFwiYmx1ciBkaXJlY3Rpb24gbXVzdCBiZSBlaXRoZXIgbGF0aXR1ZGluYWwgb3IgbG9uZ2l0dWRpbmFsIVwiKTtjb25zdCBsPW5ldyBobyhFcFtyXSxjKSx1PWMudW5pZm9ybXMsaD1BcFtuXS0xLGQ9aXNGaW5pdGUoaSk/TWF0aC5QSS8oMipoKToyKk1hdGguUEkvMzkscD1pL2QsZj1pc0Zpbml0ZShpKT8xK01hdGguZmxvb3IoMypwKToyMDtmPjIwJiZjb25zb2xlLndhcm4oYHNpZ21hUmFkaWFucywgJHtpfSwgaXMgdG9vIGxhcmdlIGFuZCB3aWxsIGNsaXAsIGFzIGl0IHJlcXVlc3RlZCAke2Z9IHNhbXBsZXMgd2hlbiB0aGUgbWF4aW11bSBpcyBzZXQgdG8gMjBgKTtjb25zdCBtPVtdO2xldCBnPTA7Zm9yKGxldCB0PTA7dDwyMDsrK3Qpe2NvbnN0IGU9dC9wLG49TWF0aC5leHAoLWUqZS8yKTttLnB1c2gobiksMD09dD9nKz1uOnQ8ZiYmKGcrPTIqbil9Zm9yKGxldCB0PTA7dDxtLmxlbmd0aDt0KyspbVt0XT1tW3RdL2c7dS5lbnZNYXAudmFsdWU9dC50ZXh0dXJlLHUuc2FtcGxlcy52YWx1ZT1mLHUud2VpZ2h0cy52YWx1ZT1tLHUubGF0aXR1ZGluYWwudmFsdWU9XCJsYXRpdHVkaW5hbFwiPT09byxhJiYodS5wb2xlQXhpcy52YWx1ZT1hKSx1LmRUaGV0YS52YWx1ZT1kLHUubWlwSW50LnZhbHVlPTgtbix1LmlucHV0RW5jb2RpbmcudmFsdWU9U3BbdC50ZXh0dXJlLmVuY29kaW5nXSx1Lm91dHB1dEVuY29kaW5nLnZhbHVlPVNwW3QudGV4dHVyZS5lbmNvZGluZ107Y29uc3Qgdj1BcFtyXTtGcChlLDMqTWF0aC5tYXgoMCx3cC0yKnYpLCgwPT09cj8wOjIqd3ApKzIqdioocj40P3ItOCs0OjApLDMqdiwyKnYpLHMuc2V0UmVuZGVyVGFyZ2V0KGUpLHMucmVuZGVyKGwsVHApfX1mdW5jdGlvbiBOcCh0KXtyZXR1cm4gdm9pZCAwIT09dCYmdC50eXBlPT09U3QmJih0LmVuY29kaW5nPT09SmV8fHQuZW5jb2Rpbmc9PT1LZXx8dC5lbmNvZGluZz09PVFlKX1mdW5jdGlvbiBEcCgpe2NvbnN0IHQ9W10sZT1bXSxuPVtdO2xldCByPTg7Zm9yKGxldCBpPTA7aTxNcDtpKyspe2NvbnN0IG89TWF0aC5wb3coMixyKTtlLnB1c2gobyk7bGV0IGE9MS9vO2k+ND9hPV9wW2ktOCs0LTFdOjA9PWkmJihhPTApLG4ucHVzaChhKTtjb25zdCBzPTEvKG8tMSksYz0tcy8yLGw9MStzLzIsdT1bYyxjLGwsYyxsLGwsYyxjLGwsbCxjLGxdLGg9NixkPTYscD0zLGY9MixtPTEsZz1uZXcgRmxvYXQzMkFycmF5KHAqZCpoKSx2PW5ldyBGbG9hdDMyQXJyYXkoZipkKmgpLHk9bmV3IEZsb2F0MzJBcnJheShtKmQqaCk7Zm9yKGxldCB0PTA7dDxoO3QrKyl7Y29uc3QgZT10JTMqMi8zLTEsbj10PjI/MDotMSxyPVtlLG4sMCxlKzIvMyxuLDAsZSsyLzMsbisxLDAsZSxuLDAsZSsyLzMsbisxLDAsZSxuKzEsMF07Zy5zZXQocixwKmQqdCksdi5zZXQodSxmKmQqdCk7Y29uc3QgaT1bdCx0LHQsdCx0LHRdO3kuc2V0KGksbSpkKnQpfWNvbnN0IHg9bmV3IHFpO3guc2V0QXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgVGkoZyxwKSkseC5zZXRBdHRyaWJ1dGUoXCJ1dlwiLG5ldyBUaSh2LGYpKSx4LnNldEF0dHJpYnV0ZShcImZhY2VJbmRleFwiLG5ldyBUaSh5LG0pKSx0LnB1c2goeCkscj40JiZyLS19cmV0dXJue19sb2RQbGFuZXM6dCxfc2l6ZUxvZHM6ZSxfc2lnbWFzOm59fWZ1bmN0aW9uIEJwKHQpe2NvbnN0IGU9bmV3IFluKDMqd3AsMyp3cCx0KTtyZXR1cm4gZS50ZXh0dXJlLm1hcHBpbmc9bHQsZS50ZXh0dXJlLm5hbWU9XCJQTVJFTS5jdWJlVXZcIixlLnNjaXNzb3JUZXN0PSEwLGV9ZnVuY3Rpb24gRnAodCxlLG4scixpKXt0LnZpZXdwb3J0LnNldChlLG4scixpKSx0LnNjaXNzb3Iuc2V0KGUsbixyLGkpfWZ1bmN0aW9uIFVwKCl7cmV0dXJuIG5ldyBkdSh7bmFtZTpcIkVxdWlyZWN0YW5ndWxhclRvQ3ViZVVWXCIsdW5pZm9ybXM6e2Vudk1hcDp7dmFsdWU6bnVsbH0sdGV4ZWxTaXplOnt2YWx1ZTpuZXcgR24oMSwxKX0saW5wdXRFbmNvZGluZzp7dmFsdWU6U3BbSmVdfSxvdXRwdXRFbmNvZGluZzp7dmFsdWU6U3BbSmVdfX0sdmVydGV4U2hhZGVyOkdwKCksZnJhZ21lbnRTaGFkZXI6YFxcblxcblxcdFxcdFxcdHByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1xcblxcdFxcdFxcdHByZWNpc2lvbiBtZWRpdW1wIGludDtcXG5cXG5cXHRcXHRcXHR2YXJ5aW5nIHZlYzMgdk91dHB1dERpcmVjdGlvbjtcXG5cXG5cXHRcXHRcXHR1bmlmb3JtIHNhbXBsZXIyRCBlbnZNYXA7XFxuXFx0XFx0XFx0dW5pZm9ybSB2ZWMyIHRleGVsU2l6ZTtcXG5cXG5cXHRcXHRcXHQke0hwKCl9XFxuXFxuXFx0XFx0XFx0I2luY2x1ZGUgPGNvbW1vbj5cXG5cXG5cXHRcXHRcXHR2b2lkIG1haW4oKSB7XFxuXFxuXFx0XFx0XFx0XFx0Z2xfRnJhZ0NvbG9yID0gdmVjNCggMC4wLCAwLjAsIDAuMCwgMS4wICk7XFxuXFxuXFx0XFx0XFx0XFx0dmVjMyBvdXRwdXREaXJlY3Rpb24gPSBub3JtYWxpemUoIHZPdXRwdXREaXJlY3Rpb24gKTtcXG5cXHRcXHRcXHRcXHR2ZWMyIHV2ID0gZXF1aXJlY3RVdiggb3V0cHV0RGlyZWN0aW9uICk7XFxuXFxuXFx0XFx0XFx0XFx0dmVjMiBmID0gZnJhY3QoIHV2IC8gdGV4ZWxTaXplIC0gMC41ICk7XFxuXFx0XFx0XFx0XFx0dXYgLT0gZiAqIHRleGVsU2l6ZTtcXG5cXHRcXHRcXHRcXHR2ZWMzIHRsID0gZW52TWFwVGV4ZWxUb0xpbmVhciggdGV4dHVyZTJEICggZW52TWFwLCB1diApICkucmdiO1xcblxcdFxcdFxcdFxcdHV2LnggKz0gdGV4ZWxTaXplLng7XFxuXFx0XFx0XFx0XFx0dmVjMyB0ciA9IGVudk1hcFRleGVsVG9MaW5lYXIoIHRleHR1cmUyRCAoIGVudk1hcCwgdXYgKSApLnJnYjtcXG5cXHRcXHRcXHRcXHR1di55ICs9IHRleGVsU2l6ZS55O1xcblxcdFxcdFxcdFxcdHZlYzMgYnIgPSBlbnZNYXBUZXhlbFRvTGluZWFyKCB0ZXh0dXJlMkQgKCBlbnZNYXAsIHV2ICkgKS5yZ2I7XFxuXFx0XFx0XFx0XFx0dXYueCAtPSB0ZXhlbFNpemUueDtcXG5cXHRcXHRcXHRcXHR2ZWMzIGJsID0gZW52TWFwVGV4ZWxUb0xpbmVhciggdGV4dHVyZTJEICggZW52TWFwLCB1diApICkucmdiO1xcblxcblxcdFxcdFxcdFxcdHZlYzMgdG0gPSBtaXgoIHRsLCB0ciwgZi54ICk7XFxuXFx0XFx0XFx0XFx0dmVjMyBibSA9IG1peCggYmwsIGJyLCBmLnggKTtcXG5cXHRcXHRcXHRcXHRnbF9GcmFnQ29sb3IucmdiID0gbWl4KCB0bSwgYm0sIGYueSApO1xcblxcblxcdFxcdFxcdFxcdGdsX0ZyYWdDb2xvciA9IGxpbmVhclRvT3V0cHV0VGV4ZWwoIGdsX0ZyYWdDb2xvciApO1xcblxcblxcdFxcdFxcdH1cXG5cXHRcXHRgLGJsZW5kaW5nOngsZGVwdGhUZXN0OiExLGRlcHRoV3JpdGU6ITF9KX1mdW5jdGlvbiB6cCgpe3JldHVybiBuZXcgZHUoe25hbWU6XCJDdWJlbWFwVG9DdWJlVVZcIix1bmlmb3Jtczp7ZW52TWFwOnt2YWx1ZTpudWxsfSxpbnB1dEVuY29kaW5nOnt2YWx1ZTpTcFtKZV19LG91dHB1dEVuY29kaW5nOnt2YWx1ZTpTcFtKZV19fSx2ZXJ0ZXhTaGFkZXI6R3AoKSxmcmFnbWVudFNoYWRlcjpgXFxuXFxuXFx0XFx0XFx0cHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7XFxuXFx0XFx0XFx0cHJlY2lzaW9uIG1lZGl1bXAgaW50O1xcblxcblxcdFxcdFxcdHZhcnlpbmcgdmVjMyB2T3V0cHV0RGlyZWN0aW9uO1xcblxcblxcdFxcdFxcdHVuaWZvcm0gc2FtcGxlckN1YmUgZW52TWFwO1xcblxcblxcdFxcdFxcdCR7SHAoKX1cXG5cXG5cXHRcXHRcXHR2b2lkIG1haW4oKSB7XFxuXFxuXFx0XFx0XFx0XFx0Z2xfRnJhZ0NvbG9yID0gdmVjNCggMC4wLCAwLjAsIDAuMCwgMS4wICk7XFxuXFx0XFx0XFx0XFx0Z2xfRnJhZ0NvbG9yLnJnYiA9IGVudk1hcFRleGVsVG9MaW5lYXIoIHRleHR1cmVDdWJlKCBlbnZNYXAsIHZlYzMoIC0gdk91dHB1dERpcmVjdGlvbi54LCB2T3V0cHV0RGlyZWN0aW9uLnl6ICkgKSApLnJnYjtcXG5cXHRcXHRcXHRcXHRnbF9GcmFnQ29sb3IgPSBsaW5lYXJUb091dHB1dFRleGVsKCBnbF9GcmFnQ29sb3IgKTtcXG5cXG5cXHRcXHRcXHR9XFxuXFx0XFx0YCxibGVuZGluZzp4LGRlcHRoVGVzdDohMSxkZXB0aFdyaXRlOiExfSl9ZnVuY3Rpb24gR3AoKXtyZXR1cm5cIlxcblxcblxcdFxcdHByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1xcblxcdFxcdHByZWNpc2lvbiBtZWRpdW1wIGludDtcXG5cXG5cXHRcXHRhdHRyaWJ1dGUgdmVjMyBwb3NpdGlvbjtcXG5cXHRcXHRhdHRyaWJ1dGUgdmVjMiB1djtcXG5cXHRcXHRhdHRyaWJ1dGUgZmxvYXQgZmFjZUluZGV4O1xcblxcblxcdFxcdHZhcnlpbmcgdmVjMyB2T3V0cHV0RGlyZWN0aW9uO1xcblxcblxcdFxcdC8vIFJIIGNvb3JkaW5hdGUgc3lzdGVtOyBQTVJFTSBmYWNlLWluZGV4aW5nIGNvbnZlbnRpb25cXG5cXHRcXHR2ZWMzIGdldERpcmVjdGlvbiggdmVjMiB1diwgZmxvYXQgZmFjZSApIHtcXG5cXG5cXHRcXHRcXHR1diA9IDIuMCAqIHV2IC0gMS4wO1xcblxcblxcdFxcdFxcdHZlYzMgZGlyZWN0aW9uID0gdmVjMyggdXYsIDEuMCApO1xcblxcblxcdFxcdFxcdGlmICggZmFjZSA9PSAwLjAgKSB7XFxuXFxuXFx0XFx0XFx0XFx0ZGlyZWN0aW9uID0gZGlyZWN0aW9uLnp5eDsgLy8gKCAxLCB2LCB1ICkgcG9zIHhcXG5cXG5cXHRcXHRcXHR9IGVsc2UgaWYgKCBmYWNlID09IDEuMCApIHtcXG5cXG5cXHRcXHRcXHRcXHRkaXJlY3Rpb24gPSBkaXJlY3Rpb24ueHp5O1xcblxcdFxcdFxcdFxcdGRpcmVjdGlvbi54eiAqPSAtMS4wOyAvLyAoIC11LCAxLCAtdiApIHBvcyB5XFxuXFxuXFx0XFx0XFx0fSBlbHNlIGlmICggZmFjZSA9PSAyLjAgKSB7XFxuXFxuXFx0XFx0XFx0XFx0ZGlyZWN0aW9uLnggKj0gLTEuMDsgLy8gKCAtdSwgdiwgMSApIHBvcyB6XFxuXFxuXFx0XFx0XFx0fSBlbHNlIGlmICggZmFjZSA9PSAzLjAgKSB7XFxuXFxuXFx0XFx0XFx0XFx0ZGlyZWN0aW9uID0gZGlyZWN0aW9uLnp5eDtcXG5cXHRcXHRcXHRcXHRkaXJlY3Rpb24ueHogKj0gLTEuMDsgLy8gKCAtMSwgdiwgLXUgKSBuZWcgeFxcblxcblxcdFxcdFxcdH0gZWxzZSBpZiAoIGZhY2UgPT0gNC4wICkge1xcblxcblxcdFxcdFxcdFxcdGRpcmVjdGlvbiA9IGRpcmVjdGlvbi54enk7XFxuXFx0XFx0XFx0XFx0ZGlyZWN0aW9uLnh5ICo9IC0xLjA7IC8vICggLXUsIC0xLCB2ICkgbmVnIHlcXG5cXG5cXHRcXHRcXHR9IGVsc2UgaWYgKCBmYWNlID09IDUuMCApIHtcXG5cXG5cXHRcXHRcXHRcXHRkaXJlY3Rpb24ueiAqPSAtMS4wOyAvLyAoIHUsIHYsIC0xICkgbmVnIHpcXG5cXG5cXHRcXHRcXHR9XFxuXFxuXFx0XFx0XFx0cmV0dXJuIGRpcmVjdGlvbjtcXG5cXG5cXHRcXHR9XFxuXFxuXFx0XFx0dm9pZCBtYWluKCkge1xcblxcblxcdFxcdFxcdHZPdXRwdXREaXJlY3Rpb24gPSBnZXREaXJlY3Rpb24oIHV2LCBmYWNlSW5kZXggKTtcXG5cXHRcXHRcXHRnbF9Qb3NpdGlvbiA9IHZlYzQoIHBvc2l0aW9uLCAxLjAgKTtcXG5cXG5cXHRcXHR9XFxuXFx0XCJ9ZnVuY3Rpb24gSHAoKXtyZXR1cm5cIlxcblxcblxcdFxcdHVuaWZvcm0gaW50IGlucHV0RW5jb2Rpbmc7XFxuXFx0XFx0dW5pZm9ybSBpbnQgb3V0cHV0RW5jb2Rpbmc7XFxuXFxuXFx0XFx0I2luY2x1ZGUgPGVuY29kaW5nc19wYXJzX2ZyYWdtZW50PlxcblxcblxcdFxcdHZlYzQgaW5wdXRUZXhlbFRvTGluZWFyKCB2ZWM0IHZhbHVlICkge1xcblxcblxcdFxcdFxcdGlmICggaW5wdXRFbmNvZGluZyA9PSAwICkge1xcblxcblxcdFxcdFxcdFxcdHJldHVybiB2YWx1ZTtcXG5cXG5cXHRcXHRcXHR9IGVsc2UgaWYgKCBpbnB1dEVuY29kaW5nID09IDEgKSB7XFxuXFxuXFx0XFx0XFx0XFx0cmV0dXJuIHNSR0JUb0xpbmVhciggdmFsdWUgKTtcXG5cXG5cXHRcXHRcXHR9IGVsc2UgaWYgKCBpbnB1dEVuY29kaW5nID09IDIgKSB7XFxuXFxuXFx0XFx0XFx0XFx0cmV0dXJuIFJHQkVUb0xpbmVhciggdmFsdWUgKTtcXG5cXG5cXHRcXHRcXHR9IGVsc2UgaWYgKCBpbnB1dEVuY29kaW5nID09IDMgKSB7XFxuXFxuXFx0XFx0XFx0XFx0cmV0dXJuIFJHQk1Ub0xpbmVhciggdmFsdWUsIDcuMCApO1xcblxcblxcdFxcdFxcdH0gZWxzZSBpZiAoIGlucHV0RW5jb2RpbmcgPT0gNCApIHtcXG5cXG5cXHRcXHRcXHRcXHRyZXR1cm4gUkdCTVRvTGluZWFyKCB2YWx1ZSwgMTYuMCApO1xcblxcblxcdFxcdFxcdH0gZWxzZSBpZiAoIGlucHV0RW5jb2RpbmcgPT0gNSApIHtcXG5cXG5cXHRcXHRcXHRcXHRyZXR1cm4gUkdCRFRvTGluZWFyKCB2YWx1ZSwgMjU2LjAgKTtcXG5cXG5cXHRcXHRcXHR9IGVsc2Uge1xcblxcblxcdFxcdFxcdFxcdHJldHVybiBHYW1tYVRvTGluZWFyKCB2YWx1ZSwgMi4yICk7XFxuXFxuXFx0XFx0XFx0fVxcblxcblxcdFxcdH1cXG5cXG5cXHRcXHR2ZWM0IGxpbmVhclRvT3V0cHV0VGV4ZWwoIHZlYzQgdmFsdWUgKSB7XFxuXFxuXFx0XFx0XFx0aWYgKCBvdXRwdXRFbmNvZGluZyA9PSAwICkge1xcblxcblxcdFxcdFxcdFxcdHJldHVybiB2YWx1ZTtcXG5cXG5cXHRcXHRcXHR9IGVsc2UgaWYgKCBvdXRwdXRFbmNvZGluZyA9PSAxICkge1xcblxcblxcdFxcdFxcdFxcdHJldHVybiBMaW5lYXJUb3NSR0IoIHZhbHVlICk7XFxuXFxuXFx0XFx0XFx0fSBlbHNlIGlmICggb3V0cHV0RW5jb2RpbmcgPT0gMiApIHtcXG5cXG5cXHRcXHRcXHRcXHRyZXR1cm4gTGluZWFyVG9SR0JFKCB2YWx1ZSApO1xcblxcblxcdFxcdFxcdH0gZWxzZSBpZiAoIG91dHB1dEVuY29kaW5nID09IDMgKSB7XFxuXFxuXFx0XFx0XFx0XFx0cmV0dXJuIExpbmVhclRvUkdCTSggdmFsdWUsIDcuMCApO1xcblxcblxcdFxcdFxcdH0gZWxzZSBpZiAoIG91dHB1dEVuY29kaW5nID09IDQgKSB7XFxuXFxuXFx0XFx0XFx0XFx0cmV0dXJuIExpbmVhclRvUkdCTSggdmFsdWUsIDE2LjAgKTtcXG5cXG5cXHRcXHRcXHR9IGVsc2UgaWYgKCBvdXRwdXRFbmNvZGluZyA9PSA1ICkge1xcblxcblxcdFxcdFxcdFxcdHJldHVybiBMaW5lYXJUb1JHQkQoIHZhbHVlLCAyNTYuMCApO1xcblxcblxcdFxcdFxcdH0gZWxzZSB7XFxuXFxuXFx0XFx0XFx0XFx0cmV0dXJuIExpbmVhclRvR2FtbWEoIHZhbHVlLCAyLjIgKTtcXG5cXG5cXHRcXHRcXHR9XFxuXFxuXFx0XFx0fVxcblxcblxcdFxcdHZlYzQgZW52TWFwVGV4ZWxUb0xpbmVhciggdmVjNCBjb2xvciApIHtcXG5cXG5cXHRcXHRcXHRyZXR1cm4gaW5wdXRUZXhlbFRvTGluZWFyKCBjb2xvciApO1xcblxcblxcdFxcdH1cXG5cXHRcIn1mdW5jdGlvbiBrcCh0LGUsbixyLGksbyxhKXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuRmFjZTQgaGFzIGJlZW4gcmVtb3ZlZC4gQSBUSFJFRS5GYWNlMyB3aWxsIGJlIGNyZWF0ZWQgaW5zdGVhZC5cIiksbmV3IHhpKHQsZSxuLGksbyxhKX1jb25zdCBWcD0wLGpwPTEsV3A9MCxYcD0xLHFwPTI7ZnVuY3Rpb24gWXAodCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLk1lc2hGYWNlTWF0ZXJpYWwgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIGFuIEFycmF5IGluc3RlYWQuXCIpLHR9ZnVuY3Rpb24gWnAodD1bXSl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLk11bHRpTWF0ZXJpYWwgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIGFuIEFycmF5IGluc3RlYWQuXCIpLHQuaXNNdWx0aU1hdGVyaWFsPSEwLHQubWF0ZXJpYWxzPXQsdC5jbG9uZT1mdW5jdGlvbigpe3JldHVybiB0LnNsaWNlKCl9LHR9ZnVuY3Rpb24gSnAodCxlKXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuUG9pbnRDbG91ZCBoYXMgYmVlbiByZW5hbWVkIHRvIFRIUkVFLlBvaW50cy5cIiksbmV3IE5jKHQsZSl9ZnVuY3Rpb24gS3AodCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLlBhcnRpY2xlIGhhcyBiZWVuIHJlbmFtZWQgdG8gVEhSRUUuU3ByaXRlLlwiKSxuZXcgcmModCl9ZnVuY3Rpb24gUXAodCxlKXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuUGFydGljbGVTeXN0ZW0gaGFzIGJlZW4gcmVuYW1lZCB0byBUSFJFRS5Qb2ludHMuXCIpLG5ldyBOYyh0LGUpfWZ1bmN0aW9uICRwKHQpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5Qb2ludENsb3VkTWF0ZXJpYWwgaGFzIGJlZW4gcmVuYW1lZCB0byBUSFJFRS5Qb2ludHNNYXRlcmlhbC5cIiksbmV3IFJjKHQpfWZ1bmN0aW9uIHRmKHQpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5QYXJ0aWNsZUJhc2ljTWF0ZXJpYWwgaGFzIGJlZW4gcmVuYW1lZCB0byBUSFJFRS5Qb2ludHNNYXRlcmlhbC5cIiksbmV3IFJjKHQpfWZ1bmN0aW9uIGVmKHQpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5QYXJ0aWNsZVN5c3RlbU1hdGVyaWFsIGhhcyBiZWVuIHJlbmFtZWQgdG8gVEhSRUUuUG9pbnRzTWF0ZXJpYWwuXCIpLG5ldyBSYyh0KX1mdW5jdGlvbiBuZih0LGUsbil7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLlZlcnRleCBoYXMgYmVlbiByZW1vdmVkLiBVc2UgVEhSRUUuVmVjdG9yMyBpbnN0ZWFkLlwiKSxuZXcgS24odCxlLG4pfWZ1bmN0aW9uIHJmKHQsZSl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLkR5bmFtaWNCdWZmZXJBdHRyaWJ1dGUgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUoKS5zZXRVc2FnZSggVEhSRUUuRHluYW1pY0RyYXdVc2FnZSApIGluc3RlYWQuXCIpLG5ldyBUaSh0LGUpLnNldFVzYWdlKEVuKX1mdW5jdGlvbiBvZih0LGUpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5JbnQ4QXR0cmlidXRlIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBuZXcgVEhSRUUuSW50OEJ1ZmZlckF0dHJpYnV0ZSgpIGluc3RlYWQuXCIpLG5ldyBFaSh0LGUpfWZ1bmN0aW9uIGFmKHQsZSl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLlVpbnQ4QXR0cmlidXRlIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBuZXcgVEhSRUUuVWludDhCdWZmZXJBdHRyaWJ1dGUoKSBpbnN0ZWFkLlwiKSxuZXcgQWkodCxlKX1mdW5jdGlvbiBzZih0LGUpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5VaW50OENsYW1wZWRBdHRyaWJ1dGUgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIG5ldyBUSFJFRS5VaW50OENsYW1wZWRCdWZmZXJBdHRyaWJ1dGUoKSBpbnN0ZWFkLlwiKSxuZXcgTGkodCxlKX1mdW5jdGlvbiBjZih0LGUpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5JbnQxNkF0dHJpYnV0ZSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgbmV3IFRIUkVFLkludDE2QnVmZmVyQXR0cmlidXRlKCkgaW5zdGVhZC5cIiksbmV3IFJpKHQsZSl9ZnVuY3Rpb24gbGYodCxlKXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuVWludDE2QXR0cmlidXRlIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBuZXcgVEhSRUUuVWludDE2QnVmZmVyQXR0cmlidXRlKCkgaW5zdGVhZC5cIiksbmV3IFBpKHQsZSl9ZnVuY3Rpb24gdWYodCxlKXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuSW50MzJBdHRyaWJ1dGUgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIG5ldyBUSFJFRS5JbnQzMkJ1ZmZlckF0dHJpYnV0ZSgpIGluc3RlYWQuXCIpLG5ldyBDaSh0LGUpfWZ1bmN0aW9uIGhmKHQsZSl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLlVpbnQzMkF0dHJpYnV0ZSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgbmV3IFRIUkVFLlVpbnQzMkJ1ZmZlckF0dHJpYnV0ZSgpIGluc3RlYWQuXCIpLG5ldyBJaSh0LGUpfWZ1bmN0aW9uIGRmKHQsZSl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLkZsb2F0MzJBdHRyaWJ1dGUgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIG5ldyBUSFJFRS5GbG9hdDMyQnVmZmVyQXR0cmlidXRlKCkgaW5zdGVhZC5cIiksbmV3IE5pKHQsZSl9ZnVuY3Rpb24gcGYodCxlKXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuRmxvYXQ2NEF0dHJpYnV0ZSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgbmV3IFRIUkVFLkZsb2F0NjRCdWZmZXJBdHRyaWJ1dGUoKSBpbnN0ZWFkLlwiKSxuZXcgRGkodCxlKX1mdW5jdGlvbiBmZih0KXtjb25zb2xlLndhcm4oXCJUSFJFRS5DbG9zZWRTcGxpbmVDdXJ2ZTMgaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlIFRIUkVFLkNhdG11bGxSb21DdXJ2ZTMgaW5zdGVhZC5cIikscmguY2FsbCh0aGlzLHQpLHRoaXMudHlwZT1cImNhdG11bGxyb21cIix0aGlzLmNsb3NlZD0hMH1mdW5jdGlvbiBtZih0KXtjb25zb2xlLndhcm4oXCJUSFJFRS5TcGxpbmVDdXJ2ZTMgaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlIFRIUkVFLkNhdG11bGxSb21DdXJ2ZTMgaW5zdGVhZC5cIikscmguY2FsbCh0aGlzLHQpLHRoaXMudHlwZT1cImNhdG11bGxyb21cIn1mdW5jdGlvbiBnZih0KXtjb25zb2xlLndhcm4oXCJUSFJFRS5TcGxpbmUgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIFRIUkVFLkNhdG11bGxSb21DdXJ2ZTMgaW5zdGVhZC5cIikscmguY2FsbCh0aGlzLHQpLHRoaXMudHlwZT1cImNhdG11bGxyb21cIn1mdW5jdGlvbiB2Zih0KXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuQXhpc0hlbHBlciBoYXMgYmVlbiByZW5hbWVkIHRvIFRIUkVFLkF4ZXNIZWxwZXIuXCIpLG5ldyB2cCh0KX1mdW5jdGlvbiB5Zih0LGUpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5Cb3VuZGluZ0JveEhlbHBlciBoYXMgYmVlbiBkZXByZWNhdGVkLiBDcmVhdGluZyBhIFRIUkVFLkJveEhlbHBlciBpbnN0ZWFkLlwiKSxuZXcgdXAodCxlKX1mdW5jdGlvbiB4Zih0LGUpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5FZGdlc0hlbHBlciBoYXMgYmVlbiByZW1vdmVkLiBVc2UgVEhSRUUuRWRnZXNHZW9tZXRyeSBpbnN0ZWFkLlwiKSxuZXcgQWMobmV3IG9sKHQuZ2VvbWV0cnkpLG5ldyB5Yyh7Y29sb3I6dm9pZCAwIT09ZT9lOjE2Nzc3MjE1fSkpfWZ1bmN0aW9uIGJmKHQsZSl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLldpcmVmcmFtZUhlbHBlciBoYXMgYmVlbiByZW1vdmVkLiBVc2UgVEhSRUUuV2lyZWZyYW1lR2VvbWV0cnkgaW5zdGVhZC5cIiksbmV3IEFjKG5ldyBsdSh0Lmdlb21ldHJ5KSxuZXcgeWMoe2NvbG9yOnZvaWQgMCE9PWU/ZToxNjc3NzIxNX0pKX1mdW5jdGlvbiB3Zih0KXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuWEhSTG9hZGVyIGhhcyBiZWVuIHJlbmFtZWQgdG8gVEhSRUUuRmlsZUxvYWRlci5cIiksbmV3IGt1KHQpfWZ1bmN0aW9uIF9mKHQpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5CaW5hcnlUZXh0dXJlTG9hZGVyIGhhcyBiZWVuIHJlbmFtZWQgdG8gVEhSRUUuRGF0YVRleHR1cmVMb2FkZXIuXCIpLG5ldyBxdSh0KX1mdW5jdGlvbiBNZih0LGUsbil7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0Q3ViZSggd2lkdGgsIGhlaWdodCwgb3B0aW9ucyApIGlzIG5vdyBXZWJHTEN1YmVSZW5kZXJUYXJnZXQoIHNpemUsIG9wdGlvbnMgKS5cIiksbmV3IFNvKHQsbil9WnUuY3JlYXRlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGNvbnNvbGUubG9nKFwiVEhSRUUuQ3VydmUuY3JlYXRlKCkgaGFzIGJlZW4gZGVwcmVjYXRlZFwiKSx0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFp1LnByb3RvdHlwZSksdC5wcm90b3R5cGUuY29uc3RydWN0b3I9dCx0LnByb3RvdHlwZS5nZXRQb2ludD1lLHR9LE9iamVjdC5hc3NpZ24obWgucHJvdG90eXBlLHtjcmVhdGVQb2ludHNHZW9tZXRyeTpmdW5jdGlvbih0KXtjb25zb2xlLndhcm4oXCJUSFJFRS5DdXJ2ZVBhdGg6IC5jcmVhdGVQb2ludHNHZW9tZXRyeSgpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBuZXcgVEhSRUUuR2VvbWV0cnkoKS5zZXRGcm9tUG9pbnRzKCBwb2ludHMgKSBpbnN0ZWFkLlwiKTtjb25zdCBlPXRoaXMuZ2V0UG9pbnRzKHQpO3JldHVybiB0aGlzLmNyZWF0ZUdlb21ldHJ5KGUpfSxjcmVhdGVTcGFjZWRQb2ludHNHZW9tZXRyeTpmdW5jdGlvbih0KXtjb25zb2xlLndhcm4oXCJUSFJFRS5DdXJ2ZVBhdGg6IC5jcmVhdGVTcGFjZWRQb2ludHNHZW9tZXRyeSgpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBuZXcgVEhSRUUuR2VvbWV0cnkoKS5zZXRGcm9tUG9pbnRzKCBwb2ludHMgKSBpbnN0ZWFkLlwiKTtjb25zdCBlPXRoaXMuZ2V0U3BhY2VkUG9pbnRzKHQpO3JldHVybiB0aGlzLmNyZWF0ZUdlb21ldHJ5KGUpfSxjcmVhdGVHZW9tZXRyeTpmdW5jdGlvbih0KXtjb25zb2xlLndhcm4oXCJUSFJFRS5DdXJ2ZVBhdGg6IC5jcmVhdGVHZW9tZXRyeSgpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBuZXcgVEhSRUUuR2VvbWV0cnkoKS5zZXRGcm9tUG9pbnRzKCBwb2ludHMgKSBpbnN0ZWFkLlwiKTtjb25zdCBlPW5ldyBqYztmb3IobGV0IG49MCxyPXQubGVuZ3RoO248cjtuKyspe2NvbnN0IHI9dFtuXTtlLnZlcnRpY2VzLnB1c2gobmV3IEtuKHIueCxyLnksci56fHwwKSl9cmV0dXJuIGV9fSksT2JqZWN0LmFzc2lnbihnaC5wcm90b3R5cGUse2Zyb21Qb2ludHM6ZnVuY3Rpb24odCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLlBhdGg6IC5mcm9tUG9pbnRzKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuc2V0RnJvbVBvaW50cygpLlwiKSx0aGlzLnNldEZyb21Qb2ludHModCl9fSksZmYucHJvdG90eXBlPU9iamVjdC5jcmVhdGUocmgucHJvdG90eXBlKSxtZi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShyaC5wcm90b3R5cGUpLGdmLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHJoLnByb3RvdHlwZSksT2JqZWN0LmFzc2lnbihnZi5wcm90b3R5cGUse2luaXRGcm9tQXJyYXk6ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuU3BsaW5lOiAuaW5pdEZyb21BcnJheSgpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfSxnZXRDb250cm9sUG9pbnRzQXJyYXk6ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuU3BsaW5lOiAuZ2V0Q29udHJvbFBvaW50c0FycmF5KCkgaGFzIGJlZW4gcmVtb3ZlZC5cIil9LHJlcGFyYW1ldHJpemVCeUFyY0xlbmd0aDpmdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5TcGxpbmU6IC5yZXBhcmFtZXRyaXplQnlBcmNMZW5ndGgoKSBoYXMgYmVlbiByZW1vdmVkLlwiKX19KSwkZC5wcm90b3R5cGUuc2V0Q29sb3JzPWZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLkdyaWRIZWxwZXI6IHNldENvbG9ycygpIGhhcyBiZWVuIGRlcHJlY2F0ZWQsIHBhc3MgdGhlbSBpbiB0aGUgY29uc3RydWN0b3IgaW5zdGVhZC5cIil9LHFkLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuU2tlbGV0b25IZWxwZXI6IHVwZGF0ZSgpIG5vIGxvbmdlciBuZWVkcyB0byBiZSBjYWxsZWQuXCIpfSxPYmplY3QuYXNzaWduKEd1LnByb3RvdHlwZSx7ZXh0cmFjdFVybEJhc2U6ZnVuY3Rpb24odCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLkxvYWRlcjogLmV4dHJhY3RVcmxCYXNlKCkgaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlIFRIUkVFLkxvYWRlclV0aWxzLmV4dHJhY3RVcmxCYXNlKCkgaW5zdGVhZC5cIiksT2guZXh0cmFjdFVybEJhc2UodCl9fSksR3UuSGFuZGxlcnM9e2FkZDpmdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5Mb2FkZXI6IEhhbmRsZXJzLmFkZCgpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBMb2FkaW5nTWFuYWdlci5hZGRIYW5kbGVyKCkgaW5zdGVhZC5cIil9LGdldDpmdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5Mb2FkZXI6IEhhbmRsZXJzLmdldCgpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBMb2FkaW5nTWFuYWdlci5nZXRIYW5kbGVyKCkgaW5zdGVhZC5cIil9fSxPYmplY3QuYXNzaWduKEZkLnByb3RvdHlwZSx7Y2VudGVyOmZ1bmN0aW9uKHQpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5Cb3gyOiAuY2VudGVyKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuZ2V0Q2VudGVyKCkuXCIpLHRoaXMuZ2V0Q2VudGVyKHQpfSxlbXB0eTpmdW5jdGlvbigpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5Cb3gyOiAuZW1wdHkoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5pc0VtcHR5KCkuXCIpLHRoaXMuaXNFbXB0eSgpfSxpc0ludGVyc2VjdGlvbkJveDpmdW5jdGlvbih0KXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuQm94MjogLmlzSW50ZXJzZWN0aW9uQm94KCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuaW50ZXJzZWN0c0JveCgpLlwiKSx0aGlzLmludGVyc2VjdHNCb3godCl9LHNpemU6ZnVuY3Rpb24odCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLkJveDI6IC5zaXplKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuZ2V0U2l6ZSgpLlwiKSx0aGlzLmdldFNpemUodCl9fSksT2JqZWN0LmFzc2lnbih0ci5wcm90b3R5cGUse2NlbnRlcjpmdW5jdGlvbih0KXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuQm94MzogLmNlbnRlcigpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmdldENlbnRlcigpLlwiKSx0aGlzLmdldENlbnRlcih0KX0sZW1wdHk6ZnVuY3Rpb24oKXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuQm94MzogLmVtcHR5KCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuaXNFbXB0eSgpLlwiKSx0aGlzLmlzRW1wdHkoKX0saXNJbnRlcnNlY3Rpb25Cb3g6ZnVuY3Rpb24odCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLkJveDM6IC5pc0ludGVyc2VjdGlvbkJveCgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmludGVyc2VjdHNCb3goKS5cIiksdGhpcy5pbnRlcnNlY3RzQm94KHQpfSxpc0ludGVyc2VjdGlvblNwaGVyZTpmdW5jdGlvbih0KXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuQm94MzogLmlzSW50ZXJzZWN0aW9uU3BoZXJlKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuaW50ZXJzZWN0c1NwaGVyZSgpLlwiKSx0aGlzLmludGVyc2VjdHNTcGhlcmUodCl9LHNpemU6ZnVuY3Rpb24odCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLkJveDM6IC5zaXplKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuZ2V0U2l6ZSgpLlwiKSx0aGlzLmdldFNpemUodCl9fSksT2JqZWN0LmFzc2lnbihnci5wcm90b3R5cGUse2VtcHR5OmZ1bmN0aW9uKCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLlNwaGVyZTogLmVtcHR5KCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuaXNFbXB0eSgpLlwiKSx0aGlzLmlzRW1wdHkoKX19KSxMby5wcm90b3R5cGUuc2V0RnJvbU1hdHJpeD1mdW5jdGlvbih0KXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuRnJ1c3R1bTogLnNldEZyb21NYXRyaXgoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5zZXRGcm9tUHJvamVjdGlvbk1hdHJpeCgpLlwiKSx0aGlzLnNldEZyb21Qcm9qZWN0aW9uTWF0cml4KHQpfSxHZC5wcm90b3R5cGUuY2VudGVyPWZ1bmN0aW9uKHQpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5MaW5lMzogLmNlbnRlcigpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmdldENlbnRlcigpLlwiKSx0aGlzLmdldENlbnRlcih0KX0sT2JqZWN0LmFzc2lnbih6bix7cmFuZG9tMTY6ZnVuY3Rpb24oKXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuTWF0aDogLnJhbmRvbTE2KCkgaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlIE1hdGgucmFuZG9tKCkgaW5zdGVhZC5cIiksTWF0aC5yYW5kb20oKX0sbmVhcmVzdFBvd2VyT2ZUd286ZnVuY3Rpb24odCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLk1hdGg6IC5uZWFyZXN0UG93ZXJPZlR3bygpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmZsb29yUG93ZXJPZlR3bygpLlwiKSx6bi5mbG9vclBvd2VyT2ZUd28odCl9LG5leHRQb3dlck9mVHdvOmZ1bmN0aW9uKHQpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5NYXRoOiAubmV4dFBvd2VyT2ZUd28oKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5jZWlsUG93ZXJPZlR3bygpLlwiKSx6bi5jZWlsUG93ZXJPZlR3byh0KX19KSxPYmplY3QuYXNzaWduKEhuLnByb3RvdHlwZSx7ZmxhdHRlblRvQXJyYXlPZmZzZXQ6ZnVuY3Rpb24odCxlKXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuTWF0cml4MzogLmZsYXR0ZW5Ub0FycmF5T2Zmc2V0KCkgaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlIC50b0FycmF5KCkgaW5zdGVhZC5cIiksdGhpcy50b0FycmF5KHQsZSl9LG11bHRpcGx5VmVjdG9yMzpmdW5jdGlvbih0KXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuTWF0cml4MzogLm11bHRpcGx5VmVjdG9yMygpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSB2ZWN0b3IuYXBwbHlNYXRyaXgzKCBtYXRyaXggKSBpbnN0ZWFkLlwiKSx0LmFwcGx5TWF0cml4Myh0aGlzKX0sbXVsdGlwbHlWZWN0b3IzQXJyYXk6ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuTWF0cml4MzogLm11bHRpcGx5VmVjdG9yM0FycmF5KCkgaGFzIGJlZW4gcmVtb3ZlZC5cIil9LGFwcGx5VG9CdWZmZXJBdHRyaWJ1dGU6ZnVuY3Rpb24odCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLk1hdHJpeDM6IC5hcHBseVRvQnVmZmVyQXR0cmlidXRlKCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIGF0dHJpYnV0ZS5hcHBseU1hdHJpeDMoIG1hdHJpeCApIGluc3RlYWQuXCIpLHQuYXBwbHlNYXRyaXgzKHRoaXMpfSxhcHBseVRvVmVjdG9yM0FycmF5OmZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLk1hdHJpeDM6IC5hcHBseVRvVmVjdG9yM0FycmF5KCkgaGFzIGJlZW4gcmVtb3ZlZC5cIil9LGdldEludmVyc2U6ZnVuY3Rpb24odCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLk1hdHJpeDM6IC5nZXRJbnZlcnNlKCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIG1hdHJpeEludi5jb3B5KCBtYXRyaXggKS5pbnZlcnQoKTsgaW5zdGVhZC5cIiksdGhpcy5jb3B5KHQpLmludmVydCgpfX0pLE9iamVjdC5hc3NpZ24oVHIucHJvdG90eXBlLHtleHRyYWN0UG9zaXRpb246ZnVuY3Rpb24odCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLk1hdHJpeDQ6IC5leHRyYWN0UG9zaXRpb24oKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5jb3B5UG9zaXRpb24oKS5cIiksdGhpcy5jb3B5UG9zaXRpb24odCl9LGZsYXR0ZW5Ub0FycmF5T2Zmc2V0OmZ1bmN0aW9uKHQsZSl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLk1hdHJpeDQ6IC5mbGF0dGVuVG9BcnJheU9mZnNldCgpIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFVzZSAudG9BcnJheSgpIGluc3RlYWQuXCIpLHRoaXMudG9BcnJheSh0LGUpfSxnZXRQb3NpdGlvbjpmdW5jdGlvbigpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5NYXRyaXg0OiAuZ2V0UG9zaXRpb24oKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgVmVjdG9yMy5zZXRGcm9tTWF0cml4UG9zaXRpb24oIG1hdHJpeCApIGluc3RlYWQuXCIpLChuZXcgS24pLnNldEZyb21NYXRyaXhDb2x1bW4odGhpcywzKX0sc2V0Um90YXRpb25Gcm9tUXVhdGVybmlvbjpmdW5jdGlvbih0KXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuTWF0cml4NDogLnNldFJvdGF0aW9uRnJvbVF1YXRlcm5pb24oKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5tYWtlUm90YXRpb25Gcm9tUXVhdGVybmlvbigpLlwiKSx0aGlzLm1ha2VSb3RhdGlvbkZyb21RdWF0ZXJuaW9uKHQpfSxtdWx0aXBseVRvQXJyYXk6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5NYXRyaXg0OiAubXVsdGlwbHlUb0FycmF5KCkgaGFzIGJlZW4gcmVtb3ZlZC5cIil9LG11bHRpcGx5VmVjdG9yMzpmdW5jdGlvbih0KXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuTWF0cml4NDogLm11bHRpcGx5VmVjdG9yMygpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSB2ZWN0b3IuYXBwbHlNYXRyaXg0KCBtYXRyaXggKSBpbnN0ZWFkLlwiKSx0LmFwcGx5TWF0cml4NCh0aGlzKX0sbXVsdGlwbHlWZWN0b3I0OmZ1bmN0aW9uKHQpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5NYXRyaXg0OiAubXVsdGlwbHlWZWN0b3I0KCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIHZlY3Rvci5hcHBseU1hdHJpeDQoIG1hdHJpeCApIGluc3RlYWQuXCIpLHQuYXBwbHlNYXRyaXg0KHRoaXMpfSxtdWx0aXBseVZlY3RvcjNBcnJheTpmdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5NYXRyaXg0OiAubXVsdGlwbHlWZWN0b3IzQXJyYXkoKSBoYXMgYmVlbiByZW1vdmVkLlwiKX0scm90YXRlQXhpczpmdW5jdGlvbih0KXtjb25zb2xlLndhcm4oXCJUSFJFRS5NYXRyaXg0OiAucm90YXRlQXhpcygpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBWZWN0b3IzLnRyYW5zZm9ybURpcmVjdGlvbiggbWF0cml4ICkgaW5zdGVhZC5cIiksdC50cmFuc2Zvcm1EaXJlY3Rpb24odGhpcyl9LGNyb3NzVmVjdG9yOmZ1bmN0aW9uKHQpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5NYXRyaXg0OiAuY3Jvc3NWZWN0b3IoKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgdmVjdG9yLmFwcGx5TWF0cml4NCggbWF0cml4ICkgaW5zdGVhZC5cIiksdC5hcHBseU1hdHJpeDQodGhpcyl9LHRyYW5zbGF0ZTpmdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5NYXRyaXg0OiAudHJhbnNsYXRlKCkgaGFzIGJlZW4gcmVtb3ZlZC5cIil9LHJvdGF0ZVg6ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuTWF0cml4NDogLnJvdGF0ZVgoKSBoYXMgYmVlbiByZW1vdmVkLlwiKX0scm90YXRlWTpmdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5NYXRyaXg0OiAucm90YXRlWSgpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfSxyb3RhdGVaOmZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLk1hdHJpeDQ6IC5yb3RhdGVaKCkgaGFzIGJlZW4gcmVtb3ZlZC5cIil9LHJvdGF0ZUJ5QXhpczpmdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5NYXRyaXg0OiAucm90YXRlQnlBeGlzKCkgaGFzIGJlZW4gcmVtb3ZlZC5cIil9LGFwcGx5VG9CdWZmZXJBdHRyaWJ1dGU6ZnVuY3Rpb24odCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLk1hdHJpeDQ6IC5hcHBseVRvQnVmZmVyQXR0cmlidXRlKCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIGF0dHJpYnV0ZS5hcHBseU1hdHJpeDQoIG1hdHJpeCApIGluc3RlYWQuXCIpLHQuYXBwbHlNYXRyaXg0KHRoaXMpfSxhcHBseVRvVmVjdG9yM0FycmF5OmZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLk1hdHJpeDQ6IC5hcHBseVRvVmVjdG9yM0FycmF5KCkgaGFzIGJlZW4gcmVtb3ZlZC5cIil9LG1ha2VGcnVzdHVtOmZ1bmN0aW9uKHQsZSxuLHIsaSxvKXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuTWF0cml4NDogLm1ha2VGcnVzdHVtKCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIC5tYWtlUGVyc3BlY3RpdmUoIGxlZnQsIHJpZ2h0LCB0b3AsIGJvdHRvbSwgbmVhciwgZmFyICkgaW5zdGVhZC5cIiksdGhpcy5tYWtlUGVyc3BlY3RpdmUodCxlLHIsbixpLG8pfSxnZXRJbnZlcnNlOmZ1bmN0aW9uKHQpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5NYXRyaXg0OiAuZ2V0SW52ZXJzZSgpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBtYXRyaXhJbnYuY29weSggbWF0cml4ICkuaW52ZXJ0KCk7IGluc3RlYWQuXCIpLHRoaXMuY29weSh0KS5pbnZlcnQoKX19KSx0aS5wcm90b3R5cGUuaXNJbnRlcnNlY3Rpb25MaW5lPWZ1bmN0aW9uKHQpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5QbGFuZTogLmlzSW50ZXJzZWN0aW9uTGluZSgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmludGVyc2VjdHNMaW5lKCkuXCIpLHRoaXMuaW50ZXJzZWN0c0xpbmUodCl9LE9iamVjdC5hc3NpZ24oSm4ucHJvdG90eXBlLHttdWx0aXBseVZlY3RvcjM6ZnVuY3Rpb24odCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLlF1YXRlcm5pb246IC5tdWx0aXBseVZlY3RvcjMoKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgaXMgbm93IHZlY3Rvci5hcHBseVF1YXRlcm5pb24oIHF1YXRlcm5pb24gKSBpbnN0ZWFkLlwiKSx0LmFwcGx5UXVhdGVybmlvbih0aGlzKX0saW52ZXJzZTpmdW5jdGlvbigpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5RdWF0ZXJuaW9uOiAuaW52ZXJzZSgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gaW52ZXJ0KCkuXCIpLHRoaXMuaW52ZXJ0KCl9fSksT2JqZWN0LmFzc2lnbihTci5wcm90b3R5cGUse2lzSW50ZXJzZWN0aW9uQm94OmZ1bmN0aW9uKHQpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5SYXk6IC5pc0ludGVyc2VjdGlvbkJveCgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmludGVyc2VjdHNCb3goKS5cIiksdGhpcy5pbnRlcnNlY3RzQm94KHQpfSxpc0ludGVyc2VjdGlvblBsYW5lOmZ1bmN0aW9uKHQpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5SYXk6IC5pc0ludGVyc2VjdGlvblBsYW5lKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuaW50ZXJzZWN0c1BsYW5lKCkuXCIpLHRoaXMuaW50ZXJzZWN0c1BsYW5lKHQpfSxpc0ludGVyc2VjdGlvblNwaGVyZTpmdW5jdGlvbih0KXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuUmF5OiAuaXNJbnRlcnNlY3Rpb25TcGhlcmUoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5pbnRlcnNlY3RzU3BoZXJlKCkuXCIpLHRoaXMuaW50ZXJzZWN0c1NwaGVyZSh0KX19KSxPYmplY3QuYXNzaWduKGhpLnByb3RvdHlwZSx7YXJlYTpmdW5jdGlvbigpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5UcmlhbmdsZTogLmFyZWEoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5nZXRBcmVhKCkuXCIpLHRoaXMuZ2V0QXJlYSgpfSxiYXJ5Y29vcmRGcm9tUG9pbnQ6ZnVuY3Rpb24odCxlKXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuVHJpYW5nbGU6IC5iYXJ5Y29vcmRGcm9tUG9pbnQoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5nZXRCYXJ5Y29vcmQoKS5cIiksdGhpcy5nZXRCYXJ5Y29vcmQodCxlKX0sbWlkcG9pbnQ6ZnVuY3Rpb24odCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLlRyaWFuZ2xlOiAubWlkcG9pbnQoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5nZXRNaWRwb2ludCgpLlwiKSx0aGlzLmdldE1pZHBvaW50KHQpfSxub3JtYWw6ZnVuY3Rpb24odCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLlRyaWFuZ2xlOiAubm9ybWFsKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuZ2V0Tm9ybWFsKCkuXCIpLHRoaXMuZ2V0Tm9ybWFsKHQpfSxwbGFuZTpmdW5jdGlvbih0KXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuVHJpYW5nbGU6IC5wbGFuZSgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmdldFBsYW5lKCkuXCIpLHRoaXMuZ2V0UGxhbmUodCl9fSksT2JqZWN0LmFzc2lnbihoaSx7YmFyeWNvb3JkRnJvbVBvaW50OmZ1bmN0aW9uKHQsZSxuLHIsaSl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLlRyaWFuZ2xlOiAuYmFyeWNvb3JkRnJvbVBvaW50KCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuZ2V0QmFyeWNvb3JkKCkuXCIpLGhpLmdldEJhcnljb29yZCh0LGUsbixyLGkpfSxub3JtYWw6ZnVuY3Rpb24odCxlLG4scil7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLlRyaWFuZ2xlOiAubm9ybWFsKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuZ2V0Tm9ybWFsKCkuXCIpLGhpLmdldE5vcm1hbCh0LGUsbixyKX19KSxPYmplY3QuYXNzaWduKHZoLnByb3RvdHlwZSx7ZXh0cmFjdEFsbFBvaW50czpmdW5jdGlvbih0KXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuU2hhcGU6IC5leHRyYWN0QWxsUG9pbnRzKCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIC5leHRyYWN0UG9pbnRzKCkgaW5zdGVhZC5cIiksdGhpcy5leHRyYWN0UG9pbnRzKHQpfSxleHRydWRlOmZ1bmN0aW9uKHQpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5TaGFwZTogLmV4dHJ1ZGUoKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgRXh0cnVkZUdlb21ldHJ5KCkgaW5zdGVhZC5cIiksbmV3IEJsKHRoaXMsdCl9LG1ha2VHZW9tZXRyeTpmdW5jdGlvbih0KXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuU2hhcGU6IC5tYWtlR2VvbWV0cnkoKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgU2hhcGVHZW9tZXRyeSgpIGluc3RlYWQuXCIpLG5ldyBKbCh0aGlzLHQpfX0pLE9iamVjdC5hc3NpZ24oR24ucHJvdG90eXBlLHtmcm9tQXR0cmlidXRlOmZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuVmVjdG9yMjogLmZyb21BdHRyaWJ1dGUoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5mcm9tQnVmZmVyQXR0cmlidXRlKCkuXCIpLHRoaXMuZnJvbUJ1ZmZlckF0dHJpYnV0ZSh0LGUsbil9LGRpc3RhbmNlVG9NYW5oYXR0YW46ZnVuY3Rpb24odCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLlZlY3RvcjI6IC5kaXN0YW5jZVRvTWFuaGF0dGFuKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAubWFuaGF0dGFuRGlzdGFuY2VUbygpLlwiKSx0aGlzLm1hbmhhdHRhbkRpc3RhbmNlVG8odCl9LGxlbmd0aE1hbmhhdHRhbjpmdW5jdGlvbigpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3IyOiAubGVuZ3RoTWFuaGF0dGFuKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAubWFuaGF0dGFuTGVuZ3RoKCkuXCIpLHRoaXMubWFuaGF0dGFuTGVuZ3RoKCl9fSksT2JqZWN0LmFzc2lnbihLbi5wcm90b3R5cGUse3NldEV1bGVyRnJvbVJvdGF0aW9uTWF0cml4OmZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLlZlY3RvcjM6IC5zZXRFdWxlckZyb21Sb3RhdGlvbk1hdHJpeCgpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBFdWxlci5zZXRGcm9tUm90YXRpb25NYXRyaXgoKSBpbnN0ZWFkLlwiKX0sc2V0RXVsZXJGcm9tUXVhdGVybmlvbjpmdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5WZWN0b3IzOiAuc2V0RXVsZXJGcm9tUXVhdGVybmlvbigpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBFdWxlci5zZXRGcm9tUXVhdGVybmlvbigpIGluc3RlYWQuXCIpfSxnZXRQb3NpdGlvbkZyb21NYXRyaXg6ZnVuY3Rpb24odCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLlZlY3RvcjM6IC5nZXRQb3NpdGlvbkZyb21NYXRyaXgoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5zZXRGcm9tTWF0cml4UG9zaXRpb24oKS5cIiksdGhpcy5zZXRGcm9tTWF0cml4UG9zaXRpb24odCl9LGdldFNjYWxlRnJvbU1hdHJpeDpmdW5jdGlvbih0KXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuVmVjdG9yMzogLmdldFNjYWxlRnJvbU1hdHJpeCgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLnNldEZyb21NYXRyaXhTY2FsZSgpLlwiKSx0aGlzLnNldEZyb21NYXRyaXhTY2FsZSh0KX0sZ2V0Q29sdW1uRnJvbU1hdHJpeDpmdW5jdGlvbih0LGUpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3IzOiAuZ2V0Q29sdW1uRnJvbU1hdHJpeCgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLnNldEZyb21NYXRyaXhDb2x1bW4oKS5cIiksdGhpcy5zZXRGcm9tTWF0cml4Q29sdW1uKGUsdCl9LGFwcGx5UHJvamVjdGlvbjpmdW5jdGlvbih0KXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuVmVjdG9yMzogLmFwcGx5UHJvamVjdGlvbigpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSAuYXBwbHlNYXRyaXg0KCBtICkgaW5zdGVhZC5cIiksdGhpcy5hcHBseU1hdHJpeDQodCl9LGZyb21BdHRyaWJ1dGU6ZnVuY3Rpb24odCxlLG4pe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3IzOiAuZnJvbUF0dHJpYnV0ZSgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmZyb21CdWZmZXJBdHRyaWJ1dGUoKS5cIiksdGhpcy5mcm9tQnVmZmVyQXR0cmlidXRlKHQsZSxuKX0sZGlzdGFuY2VUb01hbmhhdHRhbjpmdW5jdGlvbih0KXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuVmVjdG9yMzogLmRpc3RhbmNlVG9NYW5oYXR0YW4oKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5tYW5oYXR0YW5EaXN0YW5jZVRvKCkuXCIpLHRoaXMubWFuaGF0dGFuRGlzdGFuY2VUbyh0KX0sbGVuZ3RoTWFuaGF0dGFuOmZ1bmN0aW9uKCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLlZlY3RvcjM6IC5sZW5ndGhNYW5oYXR0YW4oKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5tYW5oYXR0YW5MZW5ndGgoKS5cIiksdGhpcy5tYW5oYXR0YW5MZW5ndGgoKX19KSxPYmplY3QuYXNzaWduKHFuLnByb3RvdHlwZSx7ZnJvbUF0dHJpYnV0ZTpmdW5jdGlvbih0LGUsbil7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLlZlY3RvcjQ6IC5mcm9tQXR0cmlidXRlKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuZnJvbUJ1ZmZlckF0dHJpYnV0ZSgpLlwiKSx0aGlzLmZyb21CdWZmZXJBdHRyaWJ1dGUodCxlLG4pfSxsZW5ndGhNYW5oYXR0YW46ZnVuY3Rpb24oKXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuVmVjdG9yNDogLmxlbmd0aE1hbmhhdHRhbigpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLm1hbmhhdHRhbkxlbmd0aCgpLlwiKSx0aGlzLm1hbmhhdHRhbkxlbmd0aCgpfX0pLE9iamVjdC5hc3NpZ24oamMucHJvdG90eXBlLHtjb21wdXRlVGFuZ2VudHM6ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuR2VvbWV0cnk6IC5jb21wdXRlVGFuZ2VudHMoKSBoYXMgYmVlbiByZW1vdmVkLlwiKX0sY29tcHV0ZUxpbmVEaXN0YW5jZXM6ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuR2VvbWV0cnk6IC5jb21wdXRlTGluZURpc3RhbmNlcygpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBUSFJFRS5MaW5lLmNvbXB1dGVMaW5lRGlzdGFuY2VzKCkgaW5zdGVhZC5cIil9LGFwcGx5TWF0cml4OmZ1bmN0aW9uKHQpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5HZW9tZXRyeTogLmFwcGx5TWF0cml4KCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuYXBwbHlNYXRyaXg0KCkuXCIpLHRoaXMuYXBwbHlNYXRyaXg0KHQpfX0pLE9iamVjdC5hc3NpZ24oSnIucHJvdG90eXBlLHtnZXRDaGlsZEJ5TmFtZTpmdW5jdGlvbih0KXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuT2JqZWN0M0Q6IC5nZXRDaGlsZEJ5TmFtZSgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmdldE9iamVjdEJ5TmFtZSgpLlwiKSx0aGlzLmdldE9iamVjdEJ5TmFtZSh0KX0scmVuZGVyRGVwdGg6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5PYmplY3QzRDogLnJlbmRlckRlcHRoIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSAucmVuZGVyT3JkZXIsIGluc3RlYWQuXCIpfSx0cmFuc2xhdGU6ZnVuY3Rpb24odCxlKXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuT2JqZWN0M0Q6IC50cmFuc2xhdGUoKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgLnRyYW5zbGF0ZU9uQXhpcyggYXhpcywgZGlzdGFuY2UgKSBpbnN0ZWFkLlwiKSx0aGlzLnRyYW5zbGF0ZU9uQXhpcyhlLHQpfSxnZXRXb3JsZFJvdGF0aW9uOmZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLk9iamVjdDNEOiAuZ2V0V29ybGRSb3RhdGlvbigpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBUSFJFRS5PYmplY3QzRC5nZXRXb3JsZFF1YXRlcm5pb24oIHRhcmdldCApIGluc3RlYWQuXCIpfSxhcHBseU1hdHJpeDpmdW5jdGlvbih0KXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuT2JqZWN0M0Q6IC5hcHBseU1hdHJpeCgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmFwcGx5TWF0cml4NCgpLlwiKSx0aGlzLmFwcGx5TWF0cml4NCh0KX19KSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhKci5wcm90b3R5cGUse2V1bGVyT3JkZXI6e2dldDpmdW5jdGlvbigpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5PYmplY3QzRDogLmV1bGVyT3JkZXIgaXMgbm93IC5yb3RhdGlvbi5vcmRlci5cIiksdGhpcy5yb3RhdGlvbi5vcmRlcn0sc2V0OmZ1bmN0aW9uKHQpe2NvbnNvbGUud2FybihcIlRIUkVFLk9iamVjdDNEOiAuZXVsZXJPcmRlciBpcyBub3cgLnJvdGF0aW9uLm9yZGVyLlwiKSx0aGlzLnJvdGF0aW9uLm9yZGVyPXR9fSx1c2VRdWF0ZXJuaW9uOntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5PYmplY3QzRDogLnVzZVF1YXRlcm5pb24gaGFzIGJlZW4gcmVtb3ZlZC4gVGhlIGxpYnJhcnkgbm93IHVzZXMgcXVhdGVybmlvbnMgYnkgZGVmYXVsdC5cIil9LHNldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLk9iamVjdDNEOiAudXNlUXVhdGVybmlvbiBoYXMgYmVlbiByZW1vdmVkLiBUaGUgbGlicmFyeSBub3cgdXNlcyBxdWF0ZXJuaW9ucyBieSBkZWZhdWx0LlwiKX19fSksT2JqZWN0LmFzc2lnbihoby5wcm90b3R5cGUse3NldERyYXdNb2RlOmZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLk1lc2g6IC5zZXREcmF3TW9kZSgpIGhhcyBiZWVuIHJlbW92ZWQuIFRoZSByZW5kZXJlciBub3cgYWx3YXlzIGFzc3VtZXMgVEhSRUUuVHJpYW5nbGVzRHJhd01vZGUuIFRyYW5zZm9ybSB5b3VyIGdlb21ldHJ5IHZpYSBCdWZmZXJHZW9tZXRyeVV0aWxzLnRvVHJpYW5nbGVzRHJhd01vZGUoKSBpZiBuZWNlc3NhcnkuXCIpfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGhvLnByb3RvdHlwZSx7ZHJhd01vZGU6e2dldDpmdW5jdGlvbigpe3JldHVybiBjb25zb2xlLmVycm9yKFwiVEhSRUUuTWVzaDogLmRyYXdNb2RlIGhhcyBiZWVuIHJlbW92ZWQuIFRoZSByZW5kZXJlciBub3cgYWx3YXlzIGFzc3VtZXMgVEhSRUUuVHJpYW5nbGVzRHJhd01vZGUuXCIpLHFlfSxzZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuTWVzaDogLmRyYXdNb2RlIGhhcyBiZWVuIHJlbW92ZWQuIFRoZSByZW5kZXJlciBub3cgYWx3YXlzIGFzc3VtZXMgVEhSRUUuVHJpYW5nbGVzRHJhd01vZGUuIFRyYW5zZm9ybSB5b3VyIGdlb21ldHJ5IHZpYSBCdWZmZXJHZW9tZXRyeVV0aWxzLnRvVHJpYW5nbGVzRHJhd01vZGUoKSBpZiBuZWNlc3NhcnkuXCIpfX19KSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhzYy5wcm90b3R5cGUse29iamVjdHM6e2dldDpmdW5jdGlvbigpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5MT0Q6IC5vYmplY3RzIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmxldmVscy5cIiksdGhpcy5sZXZlbHN9fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShkYy5wcm90b3R5cGUsXCJ1c2VWZXJ0ZXhUZXh0dXJlXCIse2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLlNrZWxldG9uOiB1c2VWZXJ0ZXhUZXh0dXJlIGhhcyBiZWVuIHJlbW92ZWQuXCIpfSxzZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5Ta2VsZXRvbjogdXNlVmVydGV4VGV4dHVyZSBoYXMgYmVlbiByZW1vdmVkLlwiKX19KSxjYy5wcm90b3R5cGUuaW5pdEJvbmVzPWZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLlNraW5uZWRNZXNoOiBpbml0Qm9uZXMoKSBoYXMgYmVlbiByZW1vdmVkLlwiKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KFp1LnByb3RvdHlwZSxcIl9fYXJjTGVuZ3RoRGl2aXNpb25zXCIse2dldDpmdW5jdGlvbigpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5DdXJ2ZTogLl9fYXJjTGVuZ3RoRGl2aXNpb25zIGlzIG5vdyAuYXJjTGVuZ3RoRGl2aXNpb25zLlwiKSx0aGlzLmFyY0xlbmd0aERpdmlzaW9uc30sc2V0OmZ1bmN0aW9uKHQpe2NvbnNvbGUud2FybihcIlRIUkVFLkN1cnZlOiAuX19hcmNMZW5ndGhEaXZpc2lvbnMgaXMgbm93IC5hcmNMZW5ndGhEaXZpc2lvbnMuXCIpLHRoaXMuYXJjTGVuZ3RoRGl2aXNpb25zPXR9fSksd28ucHJvdG90eXBlLnNldExlbnM9ZnVuY3Rpb24odCxlKXtjb25zb2xlLndhcm4oXCJUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYS5zZXRMZW5zIGlzIGRlcHJlY2F0ZWQuIFVzZSAuc2V0Rm9jYWxMZW5ndGggYW5kIC5maWxtR2F1Z2UgZm9yIGEgcGhvdG9ncmFwaGljIHNldHVwLlwiKSx2b2lkIDAhPT1lJiYodGhpcy5maWxtR2F1Z2U9ZSksdGhpcy5zZXRGb2NhbExlbmd0aCh0KX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoeWgucHJvdG90eXBlLHtvbmx5U2hhZG93OntzZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5MaWdodDogLm9ubHlTaGFkb3cgaGFzIGJlZW4gcmVtb3ZlZC5cIil9fSxzaGFkb3dDYW1lcmFGb3Y6e3NldDpmdW5jdGlvbih0KXtjb25zb2xlLndhcm4oXCJUSFJFRS5MaWdodDogLnNoYWRvd0NhbWVyYUZvdiBpcyBub3cgLnNoYWRvdy5jYW1lcmEuZm92LlwiKSx0aGlzLnNoYWRvdy5jYW1lcmEuZm92PXR9fSxzaGFkb3dDYW1lcmFMZWZ0OntzZXQ6ZnVuY3Rpb24odCl7Y29uc29sZS53YXJuKFwiVEhSRUUuTGlnaHQ6IC5zaGFkb3dDYW1lcmFMZWZ0IGlzIG5vdyAuc2hhZG93LmNhbWVyYS5sZWZ0LlwiKSx0aGlzLnNoYWRvdy5jYW1lcmEubGVmdD10fX0sc2hhZG93Q2FtZXJhUmlnaHQ6e3NldDpmdW5jdGlvbih0KXtjb25zb2xlLndhcm4oXCJUSFJFRS5MaWdodDogLnNoYWRvd0NhbWVyYVJpZ2h0IGlzIG5vdyAuc2hhZG93LmNhbWVyYS5yaWdodC5cIiksdGhpcy5zaGFkb3cuY2FtZXJhLnJpZ2h0PXR9fSxzaGFkb3dDYW1lcmFUb3A6e3NldDpmdW5jdGlvbih0KXtjb25zb2xlLndhcm4oXCJUSFJFRS5MaWdodDogLnNoYWRvd0NhbWVyYVRvcCBpcyBub3cgLnNoYWRvdy5jYW1lcmEudG9wLlwiKSx0aGlzLnNoYWRvdy5jYW1lcmEudG9wPXR9fSxzaGFkb3dDYW1lcmFCb3R0b206e3NldDpmdW5jdGlvbih0KXtjb25zb2xlLndhcm4oXCJUSFJFRS5MaWdodDogLnNoYWRvd0NhbWVyYUJvdHRvbSBpcyBub3cgLnNoYWRvdy5jYW1lcmEuYm90dG9tLlwiKSx0aGlzLnNoYWRvdy5jYW1lcmEuYm90dG9tPXR9fSxzaGFkb3dDYW1lcmFOZWFyOntzZXQ6ZnVuY3Rpb24odCl7Y29uc29sZS53YXJuKFwiVEhSRUUuTGlnaHQ6IC5zaGFkb3dDYW1lcmFOZWFyIGlzIG5vdyAuc2hhZG93LmNhbWVyYS5uZWFyLlwiKSx0aGlzLnNoYWRvdy5jYW1lcmEubmVhcj10fX0sc2hhZG93Q2FtZXJhRmFyOntzZXQ6ZnVuY3Rpb24odCl7Y29uc29sZS53YXJuKFwiVEhSRUUuTGlnaHQ6IC5zaGFkb3dDYW1lcmFGYXIgaXMgbm93IC5zaGFkb3cuY2FtZXJhLmZhci5cIiksdGhpcy5zaGFkb3cuY2FtZXJhLmZhcj10fX0sc2hhZG93Q2FtZXJhVmlzaWJsZTp7c2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuTGlnaHQ6IC5zaGFkb3dDYW1lcmFWaXNpYmxlIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBuZXcgVEhSRUUuQ2FtZXJhSGVscGVyKCBsaWdodC5zaGFkb3cuY2FtZXJhICkgaW5zdGVhZC5cIil9fSxzaGFkb3dCaWFzOntzZXQ6ZnVuY3Rpb24odCl7Y29uc29sZS53YXJuKFwiVEhSRUUuTGlnaHQ6IC5zaGFkb3dCaWFzIGlzIG5vdyAuc2hhZG93LmJpYXMuXCIpLHRoaXMuc2hhZG93LmJpYXM9dH19LHNoYWRvd0RhcmtuZXNzOntzZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5MaWdodDogLnNoYWRvd0RhcmtuZXNzIGhhcyBiZWVuIHJlbW92ZWQuXCIpfX0sc2hhZG93TWFwV2lkdGg6e3NldDpmdW5jdGlvbih0KXtjb25zb2xlLndhcm4oXCJUSFJFRS5MaWdodDogLnNoYWRvd01hcFdpZHRoIGlzIG5vdyAuc2hhZG93Lm1hcFNpemUud2lkdGguXCIpLHRoaXMuc2hhZG93Lm1hcFNpemUud2lkdGg9dH19LHNoYWRvd01hcEhlaWdodDp7c2V0OmZ1bmN0aW9uKHQpe2NvbnNvbGUud2FybihcIlRIUkVFLkxpZ2h0OiAuc2hhZG93TWFwSGVpZ2h0IGlzIG5vdyAuc2hhZG93Lm1hcFNpemUuaGVpZ2h0LlwiKSx0aGlzLnNoYWRvdy5tYXBTaXplLmhlaWdodD10fX19KSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhUaS5wcm90b3R5cGUse2xlbmd0aDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLkJ1ZmZlckF0dHJpYnV0ZTogLmxlbmd0aCBoYXMgYmVlbiBkZXByZWNhdGVkLiBVc2UgLmNvdW50IGluc3RlYWQuXCIpLHRoaXMuYXJyYXkubGVuZ3RofX0sZHluYW1pYzp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLkJ1ZmZlckF0dHJpYnV0ZTogLmR5bmFtaWMgaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlIC51c2FnZSBpbnN0ZWFkLlwiKSx0aGlzLnVzYWdlPT09RW59LHNldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLkJ1ZmZlckF0dHJpYnV0ZTogLmR5bmFtaWMgaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlIC51c2FnZSBpbnN0ZWFkLlwiKSx0aGlzLnNldFVzYWdlKEVuKX19fSksT2JqZWN0LmFzc2lnbihUaS5wcm90b3R5cGUse3NldER5bmFtaWM6ZnVuY3Rpb24odCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLkJ1ZmZlckF0dHJpYnV0ZTogLnNldER5bmFtaWMoKSBoYXMgYmVlbiBkZXByZWNhdGVkLiBVc2UgLnNldFVzYWdlKCkgaW5zdGVhZC5cIiksdGhpcy5zZXRVc2FnZSghMD09PXQ/RW46VG4pLHRoaXN9LGNvcHlJbmRpY2VzQXJyYXk6ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuQnVmZmVyQXR0cmlidXRlOiAuY29weUluZGljZXNBcnJheSgpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfSxzZXRBcnJheTpmdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5CdWZmZXJBdHRyaWJ1dGU6IC5zZXRBcnJheSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgQnVmZmVyR2VvbWV0cnkgLnNldEF0dHJpYnV0ZSB0byByZXBsYWNlL3Jlc2l6ZSBhdHRyaWJ1dGUgYnVmZmVyc1wiKX19KSxPYmplY3QuYXNzaWduKHFpLnByb3RvdHlwZSx7YWRkSW5kZXg6ZnVuY3Rpb24odCl7Y29uc29sZS53YXJuKFwiVEhSRUUuQnVmZmVyR2VvbWV0cnk6IC5hZGRJbmRleCgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLnNldEluZGV4KCkuXCIpLHRoaXMuc2V0SW5kZXgodCl9LGFkZEF0dHJpYnV0ZTpmdW5jdGlvbih0LGUpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5CdWZmZXJHZW9tZXRyeTogLmFkZEF0dHJpYnV0ZSgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLnNldEF0dHJpYnV0ZSgpLlwiKSxlJiZlLmlzQnVmZmVyQXR0cmlidXRlfHxlJiZlLmlzSW50ZXJsZWF2ZWRCdWZmZXJBdHRyaWJ1dGU/XCJpbmRleFwiPT09dD8oY29uc29sZS53YXJuKFwiVEhSRUUuQnVmZmVyR2VvbWV0cnkuYWRkQXR0cmlidXRlOiBVc2UgLnNldEluZGV4KCkgZm9yIGluZGV4IGF0dHJpYnV0ZS5cIiksdGhpcy5zZXRJbmRleChlKSx0aGlzKTp0aGlzLnNldEF0dHJpYnV0ZSh0LGUpOihjb25zb2xlLndhcm4oXCJUSFJFRS5CdWZmZXJHZW9tZXRyeTogLmFkZEF0dHJpYnV0ZSgpIG5vdyBleHBlY3RzICggbmFtZSwgYXR0cmlidXRlICkuXCIpLHRoaXMuc2V0QXR0cmlidXRlKHQsbmV3IFRpKGFyZ3VtZW50c1sxXSxhcmd1bWVudHNbMl0pKSl9LGFkZERyYXdDYWxsOmZ1bmN0aW9uKHQsZSxuKXt2b2lkIDAhPT1uJiZjb25zb2xlLndhcm4oXCJUSFJFRS5CdWZmZXJHZW9tZXRyeTogLmFkZERyYXdDYWxsKCkgbm8gbG9uZ2VyIHN1cHBvcnRzIGluZGV4T2Zmc2V0LlwiKSxjb25zb2xlLndhcm4oXCJUSFJFRS5CdWZmZXJHZW9tZXRyeTogLmFkZERyYXdDYWxsKCkgaXMgbm93IC5hZGRHcm91cCgpLlwiKSx0aGlzLmFkZEdyb3VwKHQsZSl9LGNsZWFyRHJhd0NhbGxzOmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuQnVmZmVyR2VvbWV0cnk6IC5jbGVhckRyYXdDYWxscygpIGlzIG5vdyAuY2xlYXJHcm91cHMoKS5cIiksdGhpcy5jbGVhckdyb3VwcygpfSxjb21wdXRlVGFuZ2VudHM6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5CdWZmZXJHZW9tZXRyeTogLmNvbXB1dGVUYW5nZW50cygpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfSxjb21wdXRlT2Zmc2V0czpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLkJ1ZmZlckdlb21ldHJ5OiAuY29tcHV0ZU9mZnNldHMoKSBoYXMgYmVlbiByZW1vdmVkLlwiKX0scmVtb3ZlQXR0cmlidXRlOmZ1bmN0aW9uKHQpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5CdWZmZXJHZW9tZXRyeTogLnJlbW92ZUF0dHJpYnV0ZSgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmRlbGV0ZUF0dHJpYnV0ZSgpLlwiKSx0aGlzLmRlbGV0ZUF0dHJpYnV0ZSh0KX0sYXBwbHlNYXRyaXg6ZnVuY3Rpb24odCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLkJ1ZmZlckdlb21ldHJ5OiAuYXBwbHlNYXRyaXgoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5hcHBseU1hdHJpeDQoKS5cIiksdGhpcy5hcHBseU1hdHJpeDQodCl9fSksT2JqZWN0LmRlZmluZVByb3BlcnRpZXMocWkucHJvdG90eXBlLHtkcmF3Y2FsbHM6e2dldDpmdW5jdGlvbigpe3JldHVybiBjb25zb2xlLmVycm9yKFwiVEhSRUUuQnVmZmVyR2VvbWV0cnk6IC5kcmF3Y2FsbHMgaGFzIGJlZW4gcmVuYW1lZCB0byAuZ3JvdXBzLlwiKSx0aGlzLmdyb3Vwc319LG9mZnNldHM6e2dldDpmdW5jdGlvbigpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5CdWZmZXJHZW9tZXRyeTogLm9mZnNldHMgaGFzIGJlZW4gcmVuYW1lZCB0byAuZ3JvdXBzLlwiKSx0aGlzLmdyb3Vwc319fSksT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoTmgucHJvdG90eXBlLHttYXhJbnN0YW5jZWRDb3VudDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLkluc3RhbmNlZEJ1ZmZlckdlb21ldHJ5OiAubWF4SW5zdGFuY2VkQ291bnQgaGFzIGJlZW4gcmVuYW1lZCB0byAuaW5zdGFuY2VDb3VudC5cIiksdGhpcy5pbnN0YW5jZUNvdW50fSxzZXQ6ZnVuY3Rpb24odCl7Y29uc29sZS53YXJuKFwiVEhSRUUuSW5zdGFuY2VkQnVmZmVyR2VvbWV0cnk6IC5tYXhJbnN0YW5jZWRDb3VudCBoYXMgYmVlbiByZW5hbWVkIHRvIC5pbnN0YW5jZUNvdW50LlwiKSx0aGlzLmluc3RhbmNlQ291bnQ9dH19fSksT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoQ2QucHJvdG90eXBlLHtsaW5lUHJlY2lzaW9uOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuUmF5Y2FzdGVyOiAubGluZVByZWNpc2lvbiBoYXMgYmVlbiBkZXByZWNhdGVkLiBVc2UgLnBhcmFtcy5MaW5lLnRocmVzaG9sZCBpbnN0ZWFkLlwiKSx0aGlzLnBhcmFtcy5MaW5lLnRocmVzaG9sZH0sc2V0OmZ1bmN0aW9uKHQpe2NvbnNvbGUud2FybihcIlRIUkVFLlJheWNhc3RlcjogLmxpbmVQcmVjaXNpb24gaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlIC5wYXJhbXMuTGluZS50aHJlc2hvbGQgaW5zdGVhZC5cIiksdGhpcy5wYXJhbXMuTGluZS50aHJlc2hvbGQ9dH19fSksT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoR3MucHJvdG90eXBlLHtkeW5hbWljOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuSW50ZXJsZWF2ZWRCdWZmZXI6IC5sZW5ndGggaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlIC51c2FnZSBpbnN0ZWFkLlwiKSx0aGlzLnVzYWdlPT09RW59LHNldDpmdW5jdGlvbih0KXtjb25zb2xlLndhcm4oXCJUSFJFRS5JbnRlcmxlYXZlZEJ1ZmZlcjogLmxlbmd0aCBoYXMgYmVlbiBkZXByZWNhdGVkLiBVc2UgLnVzYWdlIGluc3RlYWQuXCIpLHRoaXMuc2V0VXNhZ2UodCl9fX0pLE9iamVjdC5hc3NpZ24oR3MucHJvdG90eXBlLHtzZXREeW5hbWljOmZ1bmN0aW9uKHQpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5JbnRlcmxlYXZlZEJ1ZmZlcjogLnNldER5bmFtaWMoKSBoYXMgYmVlbiBkZXByZWNhdGVkLiBVc2UgLnNldFVzYWdlKCkgaW5zdGVhZC5cIiksdGhpcy5zZXRVc2FnZSghMD09PXQ/RW46VG4pLHRoaXN9LHNldEFycmF5OmZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLkludGVybGVhdmVkQnVmZmVyOiAuc2V0QXJyYXkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIEJ1ZmZlckdlb21ldHJ5IC5zZXRBdHRyaWJ1dGUgdG8gcmVwbGFjZS9yZXNpemUgYXR0cmlidXRlIGJ1ZmZlcnNcIil9fSksT2JqZWN0LmFzc2lnbihObC5wcm90b3R5cGUse2dldEFycmF5czpmdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5FeHRydWRlQnVmZmVyR2VvbWV0cnk6IC5nZXRBcnJheXMoKSBoYXMgYmVlbiByZW1vdmVkLlwiKX0sYWRkU2hhcGVMaXN0OmZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLkV4dHJ1ZGVCdWZmZXJHZW9tZXRyeTogLmFkZFNoYXBlTGlzdCgpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfSxhZGRTaGFwZTpmdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5FeHRydWRlQnVmZmVyR2VvbWV0cnk6IC5hZGRTaGFwZSgpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfX0pLE9iamVjdC5hc3NpZ24oenMucHJvdG90eXBlLHtkaXNwb3NlOmZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLlNjZW5lOiAuZGlzcG9zZSgpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKExkLnByb3RvdHlwZSx7ZHluYW1pYzp7c2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuVW5pZm9ybTogLmR5bmFtaWMgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIG9iamVjdC5vbkJlZm9yZVJlbmRlcigpIGluc3RlYWQuXCIpfX0sb25VcGRhdGU6e3ZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLlVuaWZvcm06IC5vblVwZGF0ZSgpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBvYmplY3Qub25CZWZvcmVSZW5kZXIoKSBpbnN0ZWFkLlwiKSx0aGlzfX19KSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyh3aS5wcm90b3R5cGUse3dyYXBBcm91bmQ6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLk1hdGVyaWFsOiAud3JhcEFyb3VuZCBoYXMgYmVlbiByZW1vdmVkLlwiKX0sc2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuTWF0ZXJpYWw6IC53cmFwQXJvdW5kIGhhcyBiZWVuIHJlbW92ZWQuXCIpfX0sb3ZlcmRyYXc6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLk1hdGVyaWFsOiAub3ZlcmRyYXcgaGFzIGJlZW4gcmVtb3ZlZC5cIil9LHNldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLk1hdGVyaWFsOiAub3ZlcmRyYXcgaGFzIGJlZW4gcmVtb3ZlZC5cIil9fSx3cmFwUkdCOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuTWF0ZXJpYWw6IC53cmFwUkdCIGhhcyBiZWVuIHJlbW92ZWQuXCIpLG5ldyB5aX19LHNoYWRpbmc6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5cIit0aGlzLnR5cGUrXCI6IC5zaGFkaW5nIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSB0aGUgYm9vbGVhbiAuZmxhdFNoYWRpbmcgaW5zdGVhZC5cIil9LHNldDpmdW5jdGlvbih0KXtjb25zb2xlLndhcm4oXCJUSFJFRS5cIit0aGlzLnR5cGUrXCI6IC5zaGFkaW5nIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSB0aGUgYm9vbGVhbiAuZmxhdFNoYWRpbmcgaW5zdGVhZC5cIiksdGhpcy5mbGF0U2hhZGluZz10PT09dn19LHN0ZW5jaWxNYXNrOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuXCIrdGhpcy50eXBlK1wiOiAuc3RlbmNpbE1hc2sgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIC5zdGVuY2lsRnVuY01hc2sgaW5zdGVhZC5cIiksdGhpcy5zdGVuY2lsRnVuY01hc2t9LHNldDpmdW5jdGlvbih0KXtjb25zb2xlLndhcm4oXCJUSFJFRS5cIit0aGlzLnR5cGUrXCI6IC5zdGVuY2lsTWFzayBoYXMgYmVlbiByZW1vdmVkLiBVc2UgLnN0ZW5jaWxGdW5jTWFzayBpbnN0ZWFkLlwiKSx0aGlzLnN0ZW5jaWxGdW5jTWFzaz10fX19KSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhtdS5wcm90b3R5cGUse21ldGFsOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuTWVzaFBob25nTWF0ZXJpYWw6IC5tZXRhbCBoYXMgYmVlbiByZW1vdmVkLiBVc2UgVEhSRUUuTWVzaFN0YW5kYXJkTWF0ZXJpYWwgaW5zdGVhZC5cIiksITF9LHNldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsOiAubWV0YWwgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIFRIUkVFLk1lc2hTdGFuZGFyZE1hdGVyaWFsIGluc3RlYWRcIil9fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGZ1LnByb3RvdHlwZSx7dHJhbnNwYXJlbmN5OntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuTWVzaFBoeXNpY2FsTWF0ZXJpYWw6IC50cmFuc3BhcmVuY3kgaGFzIGJlZW4gcmVuYW1lZCB0byAudHJhbnNtaXNzaW9uLlwiKSx0aGlzLnRyYW5zbWlzc2lvbn0sc2V0OmZ1bmN0aW9uKHQpe2NvbnNvbGUud2FybihcIlRIUkVFLk1lc2hQaHlzaWNhbE1hdGVyaWFsOiAudHJhbnNwYXJlbmN5IGhhcyBiZWVuIHJlbmFtZWQgdG8gLnRyYW5zbWlzc2lvbi5cIiksdGhpcy50cmFuc21pc3Npb249dH19fSksT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoeG8ucHJvdG90eXBlLHtkZXJpdmF0aXZlczp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLlNoYWRlck1hdGVyaWFsOiAuZGVyaXZhdGl2ZXMgaGFzIGJlZW4gbW92ZWQgdG8gLmV4dGVuc2lvbnMuZGVyaXZhdGl2ZXMuXCIpLHRoaXMuZXh0ZW5zaW9ucy5kZXJpdmF0aXZlc30sc2V0OmZ1bmN0aW9uKHQpe2NvbnNvbGUud2FybihcIlRIUkVFLiBTaGFkZXJNYXRlcmlhbDogLmRlcml2YXRpdmVzIGhhcyBiZWVuIG1vdmVkIHRvIC5leHRlbnNpb25zLmRlcml2YXRpdmVzLlwiKSx0aGlzLmV4dGVuc2lvbnMuZGVyaXZhdGl2ZXM9dH19fSksT2JqZWN0LmFzc2lnbihEcy5wcm90b3R5cGUse2NsZWFyVGFyZ2V0OmZ1bmN0aW9uKHQsZSxuLHIpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5jbGVhclRhcmdldCgpIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFVzZSAuc2V0UmVuZGVyVGFyZ2V0KCkgYW5kIC5jbGVhcigpIGluc3RlYWQuXCIpLHRoaXMuc2V0UmVuZGVyVGFyZ2V0KHQpLHRoaXMuY2xlYXIoZSxuLHIpfSxhbmltYXRlOmZ1bmN0aW9uKHQpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5hbmltYXRlKCkgaXMgbm93IC5zZXRBbmltYXRpb25Mb29wKCkuXCIpLHRoaXMuc2V0QW5pbWF0aW9uTG9vcCh0KX0sZ2V0Q3VycmVudFJlbmRlclRhcmdldDpmdW5jdGlvbigpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuZ2V0Q3VycmVudFJlbmRlclRhcmdldCgpIGlzIG5vdyAuZ2V0UmVuZGVyVGFyZ2V0KCkuXCIpLHRoaXMuZ2V0UmVuZGVyVGFyZ2V0KCl9LGdldE1heEFuaXNvdHJvcHk6ZnVuY3Rpb24oKXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLmdldE1heEFuaXNvdHJvcHkoKSBpcyBub3cgLmNhcGFiaWxpdGllcy5nZXRNYXhBbmlzb3Ryb3B5KCkuXCIpLHRoaXMuY2FwYWJpbGl0aWVzLmdldE1heEFuaXNvdHJvcHkoKX0sZ2V0UHJlY2lzaW9uOmZ1bmN0aW9uKCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5nZXRQcmVjaXNpb24oKSBpcyBub3cgLmNhcGFiaWxpdGllcy5wcmVjaXNpb24uXCIpLHRoaXMuY2FwYWJpbGl0aWVzLnByZWNpc2lvbn0scmVzZXRHTFN0YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5yZXNldEdMU3RhdGUoKSBpcyBub3cgLnN0YXRlLnJlc2V0KCkuXCIpLHRoaXMuc3RhdGUucmVzZXQoKX0sc3VwcG9ydHNGbG9hdFRleHR1cmVzOmZ1bmN0aW9uKCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5zdXBwb3J0c0Zsb2F0VGV4dHVyZXMoKSBpcyBub3cgLmV4dGVuc2lvbnMuZ2V0KCAnT0VTX3RleHR1cmVfZmxvYXQnICkuXCIpLHRoaXMuZXh0ZW5zaW9ucy5nZXQoXCJPRVNfdGV4dHVyZV9mbG9hdFwiKX0sc3VwcG9ydHNIYWxmRmxvYXRUZXh0dXJlczpmdW5jdGlvbigpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuc3VwcG9ydHNIYWxmRmxvYXRUZXh0dXJlcygpIGlzIG5vdyAuZXh0ZW5zaW9ucy5nZXQoICdPRVNfdGV4dHVyZV9oYWxmX2Zsb2F0JyApLlwiKSx0aGlzLmV4dGVuc2lvbnMuZ2V0KFwiT0VTX3RleHR1cmVfaGFsZl9mbG9hdFwiKX0sc3VwcG9ydHNTdGFuZGFyZERlcml2YXRpdmVzOmZ1bmN0aW9uKCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5zdXBwb3J0c1N0YW5kYXJkRGVyaXZhdGl2ZXMoKSBpcyBub3cgLmV4dGVuc2lvbnMuZ2V0KCAnT0VTX3N0YW5kYXJkX2Rlcml2YXRpdmVzJyApLlwiKSx0aGlzLmV4dGVuc2lvbnMuZ2V0KFwiT0VTX3N0YW5kYXJkX2Rlcml2YXRpdmVzXCIpfSxzdXBwb3J0c0NvbXByZXNzZWRUZXh0dXJlUzNUQzpmdW5jdGlvbigpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuc3VwcG9ydHNDb21wcmVzc2VkVGV4dHVyZVMzVEMoKSBpcyBub3cgLmV4dGVuc2lvbnMuZ2V0KCAnV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3MzdGMnICkuXCIpLHRoaXMuZXh0ZW5zaW9ucy5nZXQoXCJXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfczN0Y1wiKX0sc3VwcG9ydHNDb21wcmVzc2VkVGV4dHVyZVBWUlRDOmZ1bmN0aW9uKCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5zdXBwb3J0c0NvbXByZXNzZWRUZXh0dXJlUFZSVEMoKSBpcyBub3cgLmV4dGVuc2lvbnMuZ2V0KCAnV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3B2cnRjJyApLlwiKSx0aGlzLmV4dGVuc2lvbnMuZ2V0KFwiV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3B2cnRjXCIpfSxzdXBwb3J0c0JsZW5kTWluTWF4OmZ1bmN0aW9uKCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5zdXBwb3J0c0JsZW5kTWluTWF4KCkgaXMgbm93IC5leHRlbnNpb25zLmdldCggJ0VYVF9ibGVuZF9taW5tYXgnICkuXCIpLHRoaXMuZXh0ZW5zaW9ucy5nZXQoXCJFWFRfYmxlbmRfbWlubWF4XCIpfSxzdXBwb3J0c1ZlcnRleFRleHR1cmVzOmZ1bmN0aW9uKCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5zdXBwb3J0c1ZlcnRleFRleHR1cmVzKCkgaXMgbm93IC5jYXBhYmlsaXRpZXMudmVydGV4VGV4dHVyZXMuXCIpLHRoaXMuY2FwYWJpbGl0aWVzLnZlcnRleFRleHR1cmVzfSxzdXBwb3J0c0luc3RhbmNlZEFycmF5czpmdW5jdGlvbigpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuc3VwcG9ydHNJbnN0YW5jZWRBcnJheXMoKSBpcyBub3cgLmV4dGVuc2lvbnMuZ2V0KCAnQU5HTEVfaW5zdGFuY2VkX2FycmF5cycgKS5cIiksdGhpcy5leHRlbnNpb25zLmdldChcIkFOR0xFX2luc3RhbmNlZF9hcnJheXNcIil9LGVuYWJsZVNjaXNzb3JUZXN0OmZ1bmN0aW9uKHQpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5lbmFibGVTY2lzc29yVGVzdCgpIGlzIG5vdyAuc2V0U2Npc3NvclRlc3QoKS5cIiksdGhpcy5zZXRTY2lzc29yVGVzdCh0KX0saW5pdE1hdGVyaWFsOmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLmluaXRNYXRlcmlhbCgpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfSxhZGRQcmVQbHVnaW46ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuYWRkUHJlUGx1Z2luKCkgaGFzIGJlZW4gcmVtb3ZlZC5cIil9LGFkZFBvc3RQbHVnaW46ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuYWRkUG9zdFBsdWdpbigpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfSx1cGRhdGVTaGFkb3dNYXA6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAudXBkYXRlU2hhZG93TWFwKCkgaGFzIGJlZW4gcmVtb3ZlZC5cIil9LHNldEZhY2VDdWxsaW5nOmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLnNldEZhY2VDdWxsaW5nKCkgaGFzIGJlZW4gcmVtb3ZlZC5cIil9LGFsbG9jVGV4dHVyZVVuaXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuYWxsb2NUZXh0dXJlVW5pdCgpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfSxzZXRUZXh0dXJlOmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLnNldFRleHR1cmUoKSBoYXMgYmVlbiByZW1vdmVkLlwiKX0sc2V0VGV4dHVyZTJEOmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLnNldFRleHR1cmUyRCgpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfSxzZXRUZXh0dXJlQ3ViZTpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5zZXRUZXh0dXJlQ3ViZSgpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfSxnZXRBY3RpdmVNaXBNYXBMZXZlbDpmdW5jdGlvbigpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuZ2V0QWN0aXZlTWlwTWFwTGV2ZWwoKSBpcyBub3cgLmdldEFjdGl2ZU1pcG1hcExldmVsKCkuXCIpLHRoaXMuZ2V0QWN0aXZlTWlwbWFwTGV2ZWwoKX19KSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhEcy5wcm90b3R5cGUse3NoYWRvd01hcEVuYWJsZWQ6e2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNoYWRvd01hcC5lbmFibGVkfSxzZXQ6ZnVuY3Rpb24odCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLnNoYWRvd01hcEVuYWJsZWQgaXMgbm93IC5zaGFkb3dNYXAuZW5hYmxlZC5cIiksdGhpcy5zaGFkb3dNYXAuZW5hYmxlZD10fX0sc2hhZG93TWFwVHlwZTp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2hhZG93TWFwLnR5cGV9LHNldDpmdW5jdGlvbih0KXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuc2hhZG93TWFwVHlwZSBpcyBub3cgLnNoYWRvd01hcC50eXBlLlwiKSx0aGlzLnNoYWRvd01hcC50eXBlPXR9fSxzaGFkb3dNYXBDdWxsRmFjZTp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLnNoYWRvd01hcEN1bGxGYWNlIGhhcyBiZWVuIHJlbW92ZWQuIFNldCBNYXRlcmlhbC5zaGFkb3dTaWRlIGluc3RlYWQuXCIpfSxzZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuc2hhZG93TWFwQ3VsbEZhY2UgaGFzIGJlZW4gcmVtb3ZlZC4gU2V0IE1hdGVyaWFsLnNoYWRvd1NpZGUgaW5zdGVhZC5cIil9fSxjb250ZXh0OntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLmNvbnRleHQgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIC5nZXRDb250ZXh0KCkgaW5zdGVhZC5cIiksdGhpcy5nZXRDb250ZXh0KCl9fSx2cjp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC52ciBoYXMgYmVlbiByZW5hbWVkIHRvIC54clwiKSx0aGlzLnhyfX0sZ2FtbWFJbnB1dDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5nYW1tYUlucHV0IGhhcyBiZWVuIHJlbW92ZWQuIFNldCB0aGUgZW5jb2RpbmcgZm9yIHRleHR1cmVzIHZpYSBUZXh0dXJlLmVuY29kaW5nIGluc3RlYWQuXCIpLCExfSxzZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuZ2FtbWFJbnB1dCBoYXMgYmVlbiByZW1vdmVkLiBTZXQgdGhlIGVuY29kaW5nIGZvciB0ZXh0dXJlcyB2aWEgVGV4dHVyZS5lbmNvZGluZyBpbnN0ZWFkLlwiKX19LGdhbW1hT3V0cHV0OntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLmdhbW1hT3V0cHV0IGhhcyBiZWVuIHJlbW92ZWQuIFNldCBXZWJHTFJlbmRlcmVyLm91dHB1dEVuY29kaW5nIGluc3RlYWQuXCIpLCExfSxzZXQ6ZnVuY3Rpb24odCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLmdhbW1hT3V0cHV0IGhhcyBiZWVuIHJlbW92ZWQuIFNldCBXZWJHTFJlbmRlcmVyLm91dHB1dEVuY29kaW5nIGluc3RlYWQuXCIpLHRoaXMub3V0cHV0RW5jb2Rpbmc9ITA9PT10P0tlOkplfX0sdG9uZU1hcHBpbmdXaGl0ZVBvaW50OntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLnRvbmVNYXBwaW5nV2hpdGVQb2ludCBoYXMgYmVlbiByZW1vdmVkLlwiKSwxfSxzZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAudG9uZU1hcHBpbmdXaGl0ZVBvaW50IGhhcyBiZWVuIHJlbW92ZWQuXCIpfX19KSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhFcy5wcm90b3R5cGUse2N1bGxGYWNlOntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuc2hhZG93TWFwLmN1bGxGYWNlIGhhcyBiZWVuIHJlbW92ZWQuIFNldCBNYXRlcmlhbC5zaGFkb3dTaWRlIGluc3RlYWQuXCIpfSxzZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuc2hhZG93TWFwLmN1bGxGYWNlIGhhcyBiZWVuIHJlbW92ZWQuIFNldCBNYXRlcmlhbC5zaGFkb3dTaWRlIGluc3RlYWQuXCIpfX0scmVuZGVyUmV2ZXJzZVNpZGVkOntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuc2hhZG93TWFwLnJlbmRlclJldmVyc2VTaWRlZCBoYXMgYmVlbiByZW1vdmVkLiBTZXQgTWF0ZXJpYWwuc2hhZG93U2lkZSBpbnN0ZWFkLlwiKX0sc2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLnNoYWRvd01hcC5yZW5kZXJSZXZlcnNlU2lkZWQgaGFzIGJlZW4gcmVtb3ZlZC4gU2V0IE1hdGVyaWFsLnNoYWRvd1NpZGUgaW5zdGVhZC5cIil9fSxyZW5kZXJTaW5nbGVTaWRlZDp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLnNoYWRvd01hcC5yZW5kZXJTaW5nbGVTaWRlZCBoYXMgYmVlbiByZW1vdmVkLiBTZXQgTWF0ZXJpYWwuc2hhZG93U2lkZSBpbnN0ZWFkLlwiKX0sc2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLnNoYWRvd01hcC5yZW5kZXJTaW5nbGVTaWRlZCBoYXMgYmVlbiByZW1vdmVkLiBTZXQgTWF0ZXJpYWwuc2hhZG93U2lkZSBpbnN0ZWFkLlwiKX19fSksT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoWW4ucHJvdG90eXBlLHt3cmFwUzp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAud3JhcFMgaXMgbm93IC50ZXh0dXJlLndyYXBTLlwiKSx0aGlzLnRleHR1cmUud3JhcFN9LHNldDpmdW5jdGlvbih0KXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLndyYXBTIGlzIG5vdyAudGV4dHVyZS53cmFwUy5cIiksdGhpcy50ZXh0dXJlLndyYXBTPXR9fSx3cmFwVDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAud3JhcFQgaXMgbm93IC50ZXh0dXJlLndyYXBULlwiKSx0aGlzLnRleHR1cmUud3JhcFR9LHNldDpmdW5jdGlvbih0KXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLndyYXBUIGlzIG5vdyAudGV4dHVyZS53cmFwVC5cIiksdGhpcy50ZXh0dXJlLndyYXBUPXR9fSxtYWdGaWx0ZXI6e2dldDpmdW5jdGlvbigpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLm1hZ0ZpbHRlciBpcyBub3cgLnRleHR1cmUubWFnRmlsdGVyLlwiKSx0aGlzLnRleHR1cmUubWFnRmlsdGVyfSxzZXQ6ZnVuY3Rpb24odCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC5tYWdGaWx0ZXIgaXMgbm93IC50ZXh0dXJlLm1hZ0ZpbHRlci5cIiksdGhpcy50ZXh0dXJlLm1hZ0ZpbHRlcj10fX0sbWluRmlsdGVyOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC5taW5GaWx0ZXIgaXMgbm93IC50ZXh0dXJlLm1pbkZpbHRlci5cIiksdGhpcy50ZXh0dXJlLm1pbkZpbHRlcn0sc2V0OmZ1bmN0aW9uKHQpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAubWluRmlsdGVyIGlzIG5vdyAudGV4dHVyZS5taW5GaWx0ZXIuXCIpLHRoaXMudGV4dHVyZS5taW5GaWx0ZXI9dH19LGFuaXNvdHJvcHk6e2dldDpmdW5jdGlvbigpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLmFuaXNvdHJvcHkgaXMgbm93IC50ZXh0dXJlLmFuaXNvdHJvcHkuXCIpLHRoaXMudGV4dHVyZS5hbmlzb3Ryb3B5fSxzZXQ6ZnVuY3Rpb24odCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC5hbmlzb3Ryb3B5IGlzIG5vdyAudGV4dHVyZS5hbmlzb3Ryb3B5LlwiKSx0aGlzLnRleHR1cmUuYW5pc290cm9weT10fX0sb2Zmc2V0OntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC5vZmZzZXQgaXMgbm93IC50ZXh0dXJlLm9mZnNldC5cIiksdGhpcy50ZXh0dXJlLm9mZnNldH0sc2V0OmZ1bmN0aW9uKHQpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAub2Zmc2V0IGlzIG5vdyAudGV4dHVyZS5vZmZzZXQuXCIpLHRoaXMudGV4dHVyZS5vZmZzZXQ9dH19LHJlcGVhdDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAucmVwZWF0IGlzIG5vdyAudGV4dHVyZS5yZXBlYXQuXCIpLHRoaXMudGV4dHVyZS5yZXBlYXR9LHNldDpmdW5jdGlvbih0KXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLnJlcGVhdCBpcyBub3cgLnRleHR1cmUucmVwZWF0LlwiKSx0aGlzLnRleHR1cmUucmVwZWF0PXR9fSxmb3JtYXQ6e2dldDpmdW5jdGlvbigpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLmZvcm1hdCBpcyBub3cgLnRleHR1cmUuZm9ybWF0LlwiKSx0aGlzLnRleHR1cmUuZm9ybWF0fSxzZXQ6ZnVuY3Rpb24odCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC5mb3JtYXQgaXMgbm93IC50ZXh0dXJlLmZvcm1hdC5cIiksdGhpcy50ZXh0dXJlLmZvcm1hdD10fX0sdHlwZTp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAudHlwZSBpcyBub3cgLnRleHR1cmUudHlwZS5cIiksdGhpcy50ZXh0dXJlLnR5cGV9LHNldDpmdW5jdGlvbih0KXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLnR5cGUgaXMgbm93IC50ZXh0dXJlLnR5cGUuXCIpLHRoaXMudGV4dHVyZS50eXBlPXR9fSxnZW5lcmF0ZU1pcG1hcHM6e2dldDpmdW5jdGlvbigpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLmdlbmVyYXRlTWlwbWFwcyBpcyBub3cgLnRleHR1cmUuZ2VuZXJhdGVNaXBtYXBzLlwiKSx0aGlzLnRleHR1cmUuZ2VuZXJhdGVNaXBtYXBzfSxzZXQ6ZnVuY3Rpb24odCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC5nZW5lcmF0ZU1pcG1hcHMgaXMgbm93IC50ZXh0dXJlLmdlbmVyYXRlTWlwbWFwcy5cIiksdGhpcy50ZXh0dXJlLmdlbmVyYXRlTWlwbWFwcz10fX19KSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhzZC5wcm90b3R5cGUse2xvYWQ6e3ZhbHVlOmZ1bmN0aW9uKHQpe2NvbnNvbGUud2FybihcIlRIUkVFLkF1ZGlvOiAubG9hZCBoYXMgYmVlbiBkZXByZWNhdGVkLiBVc2UgVEhSRUUuQXVkaW9Mb2FkZXIgaW5zdGVhZC5cIik7Y29uc3QgZT10aGlzO3JldHVybihuZXcgWWgpLmxvYWQodCwoZnVuY3Rpb24odCl7ZS5zZXRCdWZmZXIodCl9KSksdGhpc319LHN0YXJ0VGltZTp7c2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuQXVkaW86IC5zdGFydFRpbWUgaXMgbm93IC5wbGF5KCBkZWxheSApLlwiKX19fSkscGQucHJvdG90eXBlLmdldERhdGE9ZnVuY3Rpb24oKXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuQXVkaW9BbmFseXNlcjogLmdldERhdGEoKSBpcyBub3cgLmdldEZyZXF1ZW5jeURhdGEoKS5cIiksdGhpcy5nZXRGcmVxdWVuY3lEYXRhKCl9LF9vLnByb3RvdHlwZS51cGRhdGVDdWJlTWFwPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLkN1YmVDYW1lcmE6IC51cGRhdGVDdWJlTWFwKCkgaXMgbm93IC51cGRhdGUoKS5cIiksdGhpcy51cGRhdGUodCxlKX0sX28ucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKHQsZSxuLHIpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5DdWJlQ2FtZXJhOiAuY2xlYXIoKSBpcyBub3cgLnJlbmRlclRhcmdldC5jbGVhcigpLlwiKSx0aGlzLnJlbmRlclRhcmdldC5jbGVhcih0LGUsbixyKX07Y29uc3QgU2Y9e21lcmdlOmZ1bmN0aW9uKHQsZSxuKXtsZXQgcjtjb25zb2xlLndhcm4oXCJUSFJFRS5HZW9tZXRyeVV0aWxzOiAubWVyZ2UoKSBoYXMgYmVlbiBtb3ZlZCB0byBHZW9tZXRyeS4gVXNlIGdlb21ldHJ5Lm1lcmdlKCBnZW9tZXRyeTIsIG1hdHJpeCwgbWF0ZXJpYWxJbmRleE9mZnNldCApIGluc3RlYWQuXCIpLGUuaXNNZXNoJiYoZS5tYXRyaXhBdXRvVXBkYXRlJiZlLnVwZGF0ZU1hdHJpeCgpLHI9ZS5tYXRyaXgsZT1lLmdlb21ldHJ5KSx0Lm1lcmdlKGUscixuKX0sY2VudGVyOmZ1bmN0aW9uKHQpe3JldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5HZW9tZXRyeVV0aWxzOiAuY2VudGVyKCkgaGFzIGJlZW4gbW92ZWQgdG8gR2VvbWV0cnkuIFVzZSBnZW9tZXRyeS5jZW50ZXIoKSBpbnN0ZWFkLlwiKSx0LmNlbnRlcigpfX07ZnVuY3Rpb24gVGYoKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuQ2FudmFzUmVuZGVyZXIgaGFzIGJlZW4gcmVtb3ZlZFwiKX1mdW5jdGlvbiBFZigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5KU09OTG9hZGVyIGhhcyBiZWVuIHJlbW92ZWQuXCIpfVZuLmNyb3NzT3JpZ2luPXZvaWQgMCxWbi5sb2FkVGV4dHVyZT1mdW5jdGlvbih0LGUsbixyKXtjb25zb2xlLndhcm4oXCJUSFJFRS5JbWFnZVV0aWxzLmxvYWRUZXh0dXJlIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFVzZSBUSFJFRS5UZXh0dXJlTG9hZGVyKCkgaW5zdGVhZC5cIik7Y29uc3QgaT1uZXcgWXU7aS5zZXRDcm9zc09yaWdpbih0aGlzLmNyb3NzT3JpZ2luKTtjb25zdCBvPWkubG9hZCh0LG4sdm9pZCAwLHIpO3JldHVybiBlJiYoby5tYXBwaW5nPWUpLG99LFZuLmxvYWRUZXh0dXJlQ3ViZT1mdW5jdGlvbih0LGUsbixyKXtjb25zb2xlLndhcm4oXCJUSFJFRS5JbWFnZVV0aWxzLmxvYWRUZXh0dXJlQ3ViZSBoYXMgYmVlbiBkZXByZWNhdGVkLiBVc2UgVEhSRUUuQ3ViZVRleHR1cmVMb2FkZXIoKSBpbnN0ZWFkLlwiKTtjb25zdCBpPW5ldyBYdTtpLnNldENyb3NzT3JpZ2luKHRoaXMuY3Jvc3NPcmlnaW4pO2NvbnN0IG89aS5sb2FkKHQsbix2b2lkIDAscik7cmV0dXJuIGUmJihvLm1hcHBpbmc9ZSksb30sVm4ubG9hZENvbXByZXNzZWRUZXh0dXJlPWZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLkltYWdlVXRpbHMubG9hZENvbXByZXNzZWRUZXh0dXJlIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBUSFJFRS5ERFNMb2FkZXIgaW5zdGVhZC5cIil9LFZuLmxvYWRDb21wcmVzc2VkVGV4dHVyZUN1YmU9ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuSW1hZ2VVdGlscy5sb2FkQ29tcHJlc3NlZFRleHR1cmVDdWJlIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBUSFJFRS5ERFNMb2FkZXIgaW5zdGVhZC5cIil9O2NvbnN0IEFmPXtjcmVhdGVNdWx0aU1hdGVyaWFsT2JqZWN0OmZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLlNjZW5lVXRpbHMgaGFzIGJlZW4gbW92ZWQgdG8gL2V4YW1wbGVzL2pzbS91dGlscy9TY2VuZVV0aWxzLmpzXCIpfSxkZXRhY2g6ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuU2NlbmVVdGlscyBoYXMgYmVlbiBtb3ZlZCB0byAvZXhhbXBsZXMvanNtL3V0aWxzL1NjZW5lVXRpbHMuanNcIil9LGF0dGFjaDpmdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5TY2VuZVV0aWxzIGhhcyBiZWVuIG1vdmVkIHRvIC9leGFtcGxlcy9qc20vdXRpbHMvU2NlbmVVdGlscy5qc1wiKX19O2Z1bmN0aW9uIExmKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLkxlbnNGbGFyZSBoYXMgYmVlbiBtb3ZlZCB0byAvZXhhbXBsZXMvanNtL29iamVjdHMvTGVuc2ZsYXJlLmpzXCIpfVwidW5kZWZpbmVkXCIhPXR5cGVvZiBfX1RIUkVFX0RFVlRPT0xTX18mJl9fVEhSRUVfREVWVE9PTFNfXy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChcInJlZ2lzdGVyXCIse2RldGFpbDp7cmV2aXNpb246cn19KSl9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtuLmQoZSxcImFcIiwoZnVuY3Rpb24oKXtyZXR1cm4gc30pKTt2YXIgcixpLG8sYT1uKDApO2Z1bmN0aW9uIHMoKXt0aGlzLmVuYWJsZWQ9ITAsdGhpcy5uZWVkc1N3YXA9ITAsdGhpcy5jbGVhcj0hMSx0aGlzLnJlbmRlclRvU2NyZWVuPSExfU9iamVjdC5hc3NpZ24ocy5wcm90b3R5cGUse3NldFNpemU6ZnVuY3Rpb24oKXt9LHJlbmRlcjpmdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5QYXNzOiAucmVuZGVyKCkgbXVzdCBiZSBpbXBsZW1lbnRlZCBpbiBkZXJpdmVkIHBhc3MuXCIpfX0pLHMuRnVsbFNjcmVlblF1YWQ9KHI9bmV3IGEuT3J0aG9ncmFwaGljQ2FtZXJhKC0xLDEsMSwtMSwwLDEpLGk9bmV3IGEuUGxhbmVCdWZmZXJHZW9tZXRyeSgyLDIpLG89ZnVuY3Rpb24odCl7dGhpcy5fbWVzaD1uZXcgYS5NZXNoKGksdCl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLnByb3RvdHlwZSxcIm1hdGVyaWFsXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tZXNoLm1hdGVyaWFsfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbWVzaC5tYXRlcmlhbD10fX0pLE9iamVjdC5hc3NpZ24oby5wcm90b3R5cGUse2Rpc3Bvc2U6ZnVuY3Rpb24oKXt0aGlzLl9tZXNoLmdlb21ldHJ5LmRpc3Bvc2UoKX0scmVuZGVyOmZ1bmN0aW9uKHQpe3QucmVuZGVyKHRoaXMuX21lc2gscil9fSksbyl9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtuLnIoZSksbi5kKGUsXCJTaGFkZXJQYXNzXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIG99KSk7dmFyIHI9bigwKSxpPW4oMSksbz1mdW5jdGlvbih0LGUpe2kuYS5jYWxsKHRoaXMpLHRoaXMudGV4dHVyZUlEPXZvaWQgMCE9PWU/ZTpcInREaWZmdXNlXCIsdCBpbnN0YW5jZW9mIHIuU2hhZGVyTWF0ZXJpYWw/KHRoaXMudW5pZm9ybXM9dC51bmlmb3Jtcyx0aGlzLm1hdGVyaWFsPXQpOnQmJih0aGlzLnVuaWZvcm1zPXIuVW5pZm9ybXNVdGlscy5jbG9uZSh0LnVuaWZvcm1zKSx0aGlzLm1hdGVyaWFsPW5ldyByLlNoYWRlck1hdGVyaWFsKHtkZWZpbmVzOk9iamVjdC5hc3NpZ24oe30sdC5kZWZpbmVzKSx1bmlmb3Jtczp0aGlzLnVuaWZvcm1zLHZlcnRleFNoYWRlcjp0LnZlcnRleFNoYWRlcixmcmFnbWVudFNoYWRlcjp0LmZyYWdtZW50U2hhZGVyfSkpLHRoaXMuZnNRdWFkPW5ldyBpLmEuRnVsbFNjcmVlblF1YWQodGhpcy5tYXRlcmlhbCl9O28ucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShpLmEucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6byxyZW5kZXI6ZnVuY3Rpb24odCxlLG4pe3RoaXMudW5pZm9ybXNbdGhpcy50ZXh0dXJlSURdJiYodGhpcy51bmlmb3Jtc1t0aGlzLnRleHR1cmVJRF0udmFsdWU9bi50ZXh0dXJlKSx0aGlzLmZzUXVhZC5tYXRlcmlhbD10aGlzLm1hdGVyaWFsLHRoaXMucmVuZGVyVG9TY3JlZW4/KHQuc2V0UmVuZGVyVGFyZ2V0KG51bGwpLHRoaXMuZnNRdWFkLnJlbmRlcih0KSk6KHQuc2V0UmVuZGVyVGFyZ2V0KGUpLHRoaXMuY2xlYXImJnQuY2xlYXIodC5hdXRvQ2xlYXJDb2xvcix0LmF1dG9DbGVhckRlcHRoLHQuYXV0b0NsZWFyU3RlbmNpbCksdGhpcy5mc1F1YWQucmVuZGVyKHQpKX19KX0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO24ucihlKSxuLmQoZSxcIkdMVEZMb2FkZXJcIiwoZnVuY3Rpb24oKXtyZXR1cm4gaX0pKTt2YXIgcj1uKDApLGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3IuTG9hZGVyLmNhbGwodGhpcyx0KSx0aGlzLmRyYWNvTG9hZGVyPW51bGwsdGhpcy5kZHNMb2FkZXI9bnVsbCx0aGlzLmt0eDJMb2FkZXI9bnVsbCx0aGlzLm1lc2hvcHREZWNvZGVyPW51bGwsdGhpcy5wbHVnaW5DYWxsYmFja3M9W10sdGhpcy5yZWdpc3RlcigoZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBzKHQpfSkpLHRoaXMucmVnaXN0ZXIoKGZ1bmN0aW9uKHQpe3JldHVybiBuZXcgbCh0KX0pKSx0aGlzLnJlZ2lzdGVyKChmdW5jdGlvbih0KXtyZXR1cm4gbmV3IHUodCl9KSksdGhpcy5yZWdpc3RlcigoZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBjKHQpfSkpLHRoaXMucmVnaXN0ZXIoKGZ1bmN0aW9uKHQpe3JldHVybiBuZXcgbyh0KX0pKSx0aGlzLnJlZ2lzdGVyKChmdW5jdGlvbih0KXtyZXR1cm4gbmV3IGgodCl9KSl9ZnVuY3Rpb24gZSgpe3ZhciB0PXt9O3JldHVybntnZXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHRbZV19LGFkZDpmdW5jdGlvbihlLG4pe3RbZV09bn0scmVtb3ZlOmZ1bmN0aW9uKGUpe2RlbGV0ZSB0W2VdfSxyZW1vdmVBbGw6ZnVuY3Rpb24oKXt0PXt9fX19dC5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKHIuTG9hZGVyLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOnQsbG9hZDpmdW5jdGlvbih0LGUsbixpKXt2YXIgbyxhPXRoaXM7bz1cIlwiIT09dGhpcy5yZXNvdXJjZVBhdGg/dGhpcy5yZXNvdXJjZVBhdGg6XCJcIiE9PXRoaXMucGF0aD90aGlzLnBhdGg6ci5Mb2FkZXJVdGlscy5leHRyYWN0VXJsQmFzZSh0KSx0aGlzLm1hbmFnZXIuaXRlbVN0YXJ0KHQpO3ZhciBzPWZ1bmN0aW9uKGUpe2k/aShlKTpjb25zb2xlLmVycm9yKGUpLGEubWFuYWdlci5pdGVtRXJyb3IodCksYS5tYW5hZ2VyLml0ZW1FbmQodCl9LGM9bmV3IHIuRmlsZUxvYWRlcih0aGlzLm1hbmFnZXIpO2Muc2V0UGF0aCh0aGlzLnBhdGgpLGMuc2V0UmVzcG9uc2VUeXBlKFwiYXJyYXlidWZmZXJcIiksYy5zZXRSZXF1ZXN0SGVhZGVyKHRoaXMucmVxdWVzdEhlYWRlciksYy5zZXRXaXRoQ3JlZGVudGlhbHModGhpcy53aXRoQ3JlZGVudGlhbHMpLGMubG9hZCh0LChmdW5jdGlvbihuKXt0cnl7YS5wYXJzZShuLG8sKGZ1bmN0aW9uKG4pe2UobiksYS5tYW5hZ2VyLml0ZW1FbmQodCl9KSxzKX1jYXRjaCh0KXtzKHQpfX0pLG4scyl9LHNldERSQUNPTG9hZGVyOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmRyYWNvTG9hZGVyPXQsdGhpc30sc2V0RERTTG9hZGVyOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmRkc0xvYWRlcj10LHRoaXN9LHNldEtUWDJMb2FkZXI6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMua3R4MkxvYWRlcj10LHRoaXN9LHNldE1lc2hvcHREZWNvZGVyOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm1lc2hvcHREZWNvZGVyPXQsdGhpc30scmVnaXN0ZXI6ZnVuY3Rpb24odCl7cmV0dXJuLTE9PT10aGlzLnBsdWdpbkNhbGxiYWNrcy5pbmRleE9mKHQpJiZ0aGlzLnBsdWdpbkNhbGxiYWNrcy5wdXNoKHQpLHRoaXN9LHVucmVnaXN0ZXI6ZnVuY3Rpb24odCl7cmV0dXJuLTEhPT10aGlzLnBsdWdpbkNhbGxiYWNrcy5pbmRleE9mKHQpJiZ0aGlzLnBsdWdpbkNhbGxiYWNrcy5zcGxpY2UodGhpcy5wbHVnaW5DYWxsYmFja3MuaW5kZXhPZih0KSwxKSx0aGlzfSxwYXJzZTpmdW5jdGlvbih0LGUsbyxzKXt2YXIgYyxsPXt9LHU9e307aWYoXCJzdHJpbmdcIj09dHlwZW9mIHQpYz10O2Vsc2UgaWYoci5Mb2FkZXJVdGlscy5kZWNvZGVUZXh0KG5ldyBVaW50OEFycmF5KHQsMCw0KSk9PT1kKXt0cnl7bFtuLktIUl9CSU5BUllfR0xURl09bmV3IG0odCl9Y2F0Y2godCl7cmV0dXJuIHZvaWQocyYmcyh0KSl9Yz1sW24uS0hSX0JJTkFSWV9HTFRGXS5jb250ZW50fWVsc2UgYz1yLkxvYWRlclV0aWxzLmRlY29kZVRleHQobmV3IFVpbnQ4QXJyYXkodCkpO3ZhciBoPUpTT04ucGFyc2UoYyk7aWYodm9pZCAwPT09aC5hc3NldHx8aC5hc3NldC52ZXJzaW9uWzBdPDIpcyYmcyhuZXcgRXJyb3IoXCJUSFJFRS5HTFRGTG9hZGVyOiBVbnN1cHBvcnRlZCBhc3NldC4gZ2xURiB2ZXJzaW9ucyA+PTIuMCBhcmUgc3VwcG9ydGVkLlwiKSk7ZWxzZXt2YXIgcD1uZXcgaihoLHtwYXRoOmV8fHRoaXMucmVzb3VyY2VQYXRofHxcIlwiLGNyb3NzT3JpZ2luOnRoaXMuY3Jvc3NPcmlnaW4sbWFuYWdlcjp0aGlzLm1hbmFnZXIsa3R4MkxvYWRlcjp0aGlzLmt0eDJMb2FkZXIsbWVzaG9wdERlY29kZXI6dGhpcy5tZXNob3B0RGVjb2Rlcn0pO3AuZmlsZUxvYWRlci5zZXRSZXF1ZXN0SGVhZGVyKHRoaXMucmVxdWVzdEhlYWRlcik7Zm9yKHZhciBmPTA7Zjx0aGlzLnBsdWdpbkNhbGxiYWNrcy5sZW5ndGg7ZisrKXt2YXIgeT10aGlzLnBsdWdpbkNhbGxiYWNrc1tmXShwKTt1W3kubmFtZV09eSxsW3kubmFtZV09ITB9aWYoaC5leHRlbnNpb25zVXNlZClmb3IoZj0wO2Y8aC5leHRlbnNpb25zVXNlZC5sZW5ndGg7KytmKXt2YXIgdz1oLmV4dGVuc2lvbnNVc2VkW2ZdLF89aC5leHRlbnNpb25zUmVxdWlyZWR8fFtdO3N3aXRjaCh3KXtjYXNlIG4uS0hSX01BVEVSSUFMU19VTkxJVDpsW3ddPW5ldyBhO2JyZWFrO2Nhc2Ugbi5LSFJfTUFURVJJQUxTX1BCUl9TUEVDVUxBUl9HTE9TU0lORVNTOmxbd109bmV3IHg7YnJlYWs7Y2FzZSBuLktIUl9EUkFDT19NRVNIX0NPTVBSRVNTSU9OOmxbd109bmV3IGcoaCx0aGlzLmRyYWNvTG9hZGVyKTticmVhaztjYXNlIG4uTVNGVF9URVhUVVJFX0REUzpsW3ddPW5ldyBpKHRoaXMuZGRzTG9hZGVyKTticmVhaztjYXNlIG4uS0hSX1RFWFRVUkVfVFJBTlNGT1JNOmxbd109bmV3IHY7YnJlYWs7Y2FzZSBuLktIUl9NRVNIX1FVQU5USVpBVElPTjpsW3ddPW5ldyBiO2JyZWFrO2RlZmF1bHQ6Xy5pbmRleE9mKHcpPj0wJiZ2b2lkIDA9PT11W3ddJiZjb25zb2xlLndhcm4oJ1RIUkVFLkdMVEZMb2FkZXI6IFVua25vd24gZXh0ZW5zaW9uIFwiJyt3KydcIi4nKX19cC5zZXRFeHRlbnNpb25zKGwpLHAuc2V0UGx1Z2lucyh1KSxwLnBhcnNlKG8scyl9fX0pO3ZhciBuPXtLSFJfQklOQVJZX0dMVEY6XCJLSFJfYmluYXJ5X2dsVEZcIixLSFJfRFJBQ09fTUVTSF9DT01QUkVTU0lPTjpcIktIUl9kcmFjb19tZXNoX2NvbXByZXNzaW9uXCIsS0hSX0xJR0hUU19QVU5DVFVBTDpcIktIUl9saWdodHNfcHVuY3R1YWxcIixLSFJfTUFURVJJQUxTX0NMRUFSQ09BVDpcIktIUl9tYXRlcmlhbHNfY2xlYXJjb2F0XCIsS0hSX01BVEVSSUFMU19QQlJfU1BFQ1VMQVJfR0xPU1NJTkVTUzpcIktIUl9tYXRlcmlhbHNfcGJyU3BlY3VsYXJHbG9zc2luZXNzXCIsS0hSX01BVEVSSUFMU19UUkFOU01JU1NJT046XCJLSFJfbWF0ZXJpYWxzX3RyYW5zbWlzc2lvblwiLEtIUl9NQVRFUklBTFNfVU5MSVQ6XCJLSFJfbWF0ZXJpYWxzX3VubGl0XCIsS0hSX1RFWFRVUkVfQkFTSVNVOlwiS0hSX3RleHR1cmVfYmFzaXN1XCIsS0hSX1RFWFRVUkVfVFJBTlNGT1JNOlwiS0hSX3RleHR1cmVfdHJhbnNmb3JtXCIsS0hSX01FU0hfUVVBTlRJWkFUSU9OOlwiS0hSX21lc2hfcXVhbnRpemF0aW9uXCIsRVhUX1RFWFRVUkVfV0VCUDpcIkVYVF90ZXh0dXJlX3dlYnBcIixFWFRfTUVTSE9QVF9DT01QUkVTU0lPTjpcIkVYVF9tZXNob3B0X2NvbXByZXNzaW9uXCIsTVNGVF9URVhUVVJFX0REUzpcIk1TRlRfdGV4dHVyZV9kZHNcIn07ZnVuY3Rpb24gaSh0KXtpZighdCl0aHJvdyBuZXcgRXJyb3IoXCJUSFJFRS5HTFRGTG9hZGVyOiBBdHRlbXB0aW5nIHRvIGxvYWQgLmRkcyB0ZXh0dXJlIHdpdGhvdXQgaW1wb3J0aW5nIEREU0xvYWRlclwiKTt0aGlzLm5hbWU9bi5NU0ZUX1RFWFRVUkVfRERTLHRoaXMuZGRzTG9hZGVyPXR9ZnVuY3Rpb24gbyh0KXt0aGlzLnBhcnNlcj10LHRoaXMubmFtZT1uLktIUl9MSUdIVFNfUFVOQ1RVQUwsdGhpcy5jYWNoZT17cmVmczp7fSx1c2VzOnt9fX1mdW5jdGlvbiBhKCl7dGhpcy5uYW1lPW4uS0hSX01BVEVSSUFMU19VTkxJVH1mdW5jdGlvbiBzKHQpe3RoaXMucGFyc2VyPXQsdGhpcy5uYW1lPW4uS0hSX01BVEVSSUFMU19DTEVBUkNPQVR9ZnVuY3Rpb24gYyh0KXt0aGlzLnBhcnNlcj10LHRoaXMubmFtZT1uLktIUl9NQVRFUklBTFNfVFJBTlNNSVNTSU9OfWZ1bmN0aW9uIGwodCl7dGhpcy5wYXJzZXI9dCx0aGlzLm5hbWU9bi5LSFJfVEVYVFVSRV9CQVNJU1V9ZnVuY3Rpb24gdSh0KXt0aGlzLnBhcnNlcj10LHRoaXMubmFtZT1uLkVYVF9URVhUVVJFX1dFQlAsdGhpcy5pc1N1cHBvcnRlZD1udWxsfWZ1bmN0aW9uIGgodCl7dGhpcy5uYW1lPW4uRVhUX01FU0hPUFRfQ09NUFJFU1NJT04sdGhpcy5wYXJzZXI9dH1vLnByb3RvdHlwZS5fbWFya0RlZnM9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy5wYXJzZXIsZT10aGlzLnBhcnNlci5qc29uLm5vZGVzfHxbXSxuPTAscj1lLmxlbmd0aDtuPHI7bisrKXt2YXIgaT1lW25dO2kuZXh0ZW5zaW9ucyYmaS5leHRlbnNpb25zW3RoaXMubmFtZV0mJnZvaWQgMCE9PWkuZXh0ZW5zaW9uc1t0aGlzLm5hbWVdLmxpZ2h0JiZ0Ll9hZGROb2RlUmVmKHRoaXMuY2FjaGUsaS5leHRlbnNpb25zW3RoaXMubmFtZV0ubGlnaHQpfX0sby5wcm90b3R5cGUuX2xvYWRMaWdodD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLnBhcnNlcixuPVwibGlnaHQ6XCIrdCxpPWUuY2FjaGUuZ2V0KG4pO2lmKGkpcmV0dXJuIGk7dmFyIG8sYT1lLmpzb24scz0oKGEuZXh0ZW5zaW9ucyYmYS5leHRlbnNpb25zW3RoaXMubmFtZV18fHt9KS5saWdodHN8fFtdKVt0XSxjPW5ldyByLkNvbG9yKDE2Nzc3MjE1KTt2b2lkIDAhPT1zLmNvbG9yJiZjLmZyb21BcnJheShzLmNvbG9yKTt2YXIgbD12b2lkIDAhPT1zLnJhbmdlP3MucmFuZ2U6MDtzd2l0Y2gocy50eXBlKXtjYXNlXCJkaXJlY3Rpb25hbFwiOihvPW5ldyByLkRpcmVjdGlvbmFsTGlnaHQoYykpLnRhcmdldC5wb3NpdGlvbi5zZXQoMCwwLC0xKSxvLmFkZChvLnRhcmdldCk7YnJlYWs7Y2FzZVwicG9pbnRcIjoobz1uZXcgci5Qb2ludExpZ2h0KGMpKS5kaXN0YW5jZT1sO2JyZWFrO2Nhc2VcInNwb3RcIjoobz1uZXcgci5TcG90TGlnaHQoYykpLmRpc3RhbmNlPWwscy5zcG90PXMuc3BvdHx8e30scy5zcG90LmlubmVyQ29uZUFuZ2xlPXZvaWQgMCE9PXMuc3BvdC5pbm5lckNvbmVBbmdsZT9zLnNwb3QuaW5uZXJDb25lQW5nbGU6MCxzLnNwb3Qub3V0ZXJDb25lQW5nbGU9dm9pZCAwIT09cy5zcG90Lm91dGVyQ29uZUFuZ2xlP3Muc3BvdC5vdXRlckNvbmVBbmdsZTpNYXRoLlBJLzQsby5hbmdsZT1zLnNwb3Qub3V0ZXJDb25lQW5nbGUsby5wZW51bWJyYT0xLXMuc3BvdC5pbm5lckNvbmVBbmdsZS9zLnNwb3Qub3V0ZXJDb25lQW5nbGUsby50YXJnZXQucG9zaXRpb24uc2V0KDAsMCwtMSksby5hZGQoby50YXJnZXQpO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKCdUSFJFRS5HTFRGTG9hZGVyOiBVbmV4cGVjdGVkIGxpZ2h0IHR5cGUsIFwiJytzLnR5cGUrJ1wiLicpfXJldHVybiBvLnBvc2l0aW9uLnNldCgwLDAsMCksby5kZWNheT0yLHZvaWQgMCE9PXMuaW50ZW5zaXR5JiYoby5pbnRlbnNpdHk9cy5pbnRlbnNpdHkpLG8ubmFtZT1lLmNyZWF0ZVVuaXF1ZU5hbWUocy5uYW1lfHxcImxpZ2h0X1wiK3QpLGk9UHJvbWlzZS5yZXNvbHZlKG8pLGUuY2FjaGUuYWRkKG4saSksaX0sby5wcm90b3R5cGUuY3JlYXRlTm9kZUF0dGFjaG1lbnQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxuPXRoaXMucGFyc2VyLHI9bi5qc29uLm5vZGVzW3RdLGk9KHIuZXh0ZW5zaW9ucyYmci5leHRlbnNpb25zW3RoaXMubmFtZV18fHt9KS5saWdodDtyZXR1cm4gdm9pZCAwPT09aT9udWxsOnRoaXMuX2xvYWRMaWdodChpKS50aGVuKChmdW5jdGlvbih0KXtyZXR1cm4gbi5fZ2V0Tm9kZVJlZihlLmNhY2hlLGksdCl9KSl9LGEucHJvdG90eXBlLmdldE1hdGVyaWFsVHlwZT1mdW5jdGlvbigpe3JldHVybiByLk1lc2hCYXNpY01hdGVyaWFsfSxhLnByb3RvdHlwZS5leHRlbmRQYXJhbXM9ZnVuY3Rpb24odCxlLG4pe3ZhciBpPVtdO3QuY29sb3I9bmV3IHIuQ29sb3IoMSwxLDEpLHQub3BhY2l0eT0xO3ZhciBvPWUucGJyTWV0YWxsaWNSb3VnaG5lc3M7aWYobyl7aWYoQXJyYXkuaXNBcnJheShvLmJhc2VDb2xvckZhY3Rvcikpe3ZhciBhPW8uYmFzZUNvbG9yRmFjdG9yO3QuY29sb3IuZnJvbUFycmF5KGEpLHQub3BhY2l0eT1hWzNdfXZvaWQgMCE9PW8uYmFzZUNvbG9yVGV4dHVyZSYmaS5wdXNoKG4uYXNzaWduVGV4dHVyZSh0LFwibWFwXCIsby5iYXNlQ29sb3JUZXh0dXJlKSl9cmV0dXJuIFByb21pc2UuYWxsKGkpfSxzLnByb3RvdHlwZS5nZXRNYXRlcmlhbFR5cGU9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5wYXJzZXIuanNvbi5tYXRlcmlhbHNbdF07cmV0dXJuIGUuZXh0ZW5zaW9ucyYmZS5leHRlbnNpb25zW3RoaXMubmFtZV0/ci5NZXNoUGh5c2ljYWxNYXRlcmlhbDpudWxsfSxzLnByb3RvdHlwZS5leHRlbmRNYXRlcmlhbFBhcmFtcz1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMucGFyc2VyLGk9bi5qc29uLm1hdGVyaWFsc1t0XTtpZighaS5leHRlbnNpb25zfHwhaS5leHRlbnNpb25zW3RoaXMubmFtZV0pcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO3ZhciBvPVtdLGE9aS5leHRlbnNpb25zW3RoaXMubmFtZV07aWYodm9pZCAwIT09YS5jbGVhcmNvYXRGYWN0b3ImJihlLmNsZWFyY29hdD1hLmNsZWFyY29hdEZhY3Rvciksdm9pZCAwIT09YS5jbGVhcmNvYXRUZXh0dXJlJiZvLnB1c2gobi5hc3NpZ25UZXh0dXJlKGUsXCJjbGVhcmNvYXRNYXBcIixhLmNsZWFyY29hdFRleHR1cmUpKSx2b2lkIDAhPT1hLmNsZWFyY29hdFJvdWdobmVzc0ZhY3RvciYmKGUuY2xlYXJjb2F0Um91Z2huZXNzPWEuY2xlYXJjb2F0Um91Z2huZXNzRmFjdG9yKSx2b2lkIDAhPT1hLmNsZWFyY29hdFJvdWdobmVzc1RleHR1cmUmJm8ucHVzaChuLmFzc2lnblRleHR1cmUoZSxcImNsZWFyY29hdFJvdWdobmVzc01hcFwiLGEuY2xlYXJjb2F0Um91Z2huZXNzVGV4dHVyZSkpLHZvaWQgMCE9PWEuY2xlYXJjb2F0Tm9ybWFsVGV4dHVyZSYmKG8ucHVzaChuLmFzc2lnblRleHR1cmUoZSxcImNsZWFyY29hdE5vcm1hbE1hcFwiLGEuY2xlYXJjb2F0Tm9ybWFsVGV4dHVyZSkpLHZvaWQgMCE9PWEuY2xlYXJjb2F0Tm9ybWFsVGV4dHVyZS5zY2FsZSkpe3ZhciBzPWEuY2xlYXJjb2F0Tm9ybWFsVGV4dHVyZS5zY2FsZTtlLmNsZWFyY29hdE5vcm1hbFNjYWxlPW5ldyByLlZlY3RvcjIocyxzKX1yZXR1cm4gUHJvbWlzZS5hbGwobyl9LGMucHJvdG90eXBlLmdldE1hdGVyaWFsVHlwZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLnBhcnNlci5qc29uLm1hdGVyaWFsc1t0XTtyZXR1cm4gZS5leHRlbnNpb25zJiZlLmV4dGVuc2lvbnNbdGhpcy5uYW1lXT9yLk1lc2hQaHlzaWNhbE1hdGVyaWFsOm51bGx9LGMucHJvdG90eXBlLmV4dGVuZE1hdGVyaWFsUGFyYW1zPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5wYXJzZXIscj1uLmpzb24ubWF0ZXJpYWxzW3RdO2lmKCFyLmV4dGVuc2lvbnN8fCFyLmV4dGVuc2lvbnNbdGhpcy5uYW1lXSlyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7dmFyIGk9W10sbz1yLmV4dGVuc2lvbnNbdGhpcy5uYW1lXTtyZXR1cm4gdm9pZCAwIT09by50cmFuc21pc3Npb25GYWN0b3ImJihlLnRyYW5zbWlzc2lvbj1vLnRyYW5zbWlzc2lvbkZhY3Rvciksdm9pZCAwIT09by50cmFuc21pc3Npb25UZXh0dXJlJiZpLnB1c2gobi5hc3NpZ25UZXh0dXJlKGUsXCJ0cmFuc21pc3Npb25NYXBcIixvLnRyYW5zbWlzc2lvblRleHR1cmUpKSxQcm9taXNlLmFsbChpKX0sbC5wcm90b3R5cGUubG9hZFRleHR1cmU9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5wYXJzZXIsbj1lLmpzb24scj1uLnRleHR1cmVzW3RdO2lmKCFyLmV4dGVuc2lvbnN8fCFyLmV4dGVuc2lvbnNbdGhpcy5uYW1lXSlyZXR1cm4gbnVsbDt2YXIgaT1yLmV4dGVuc2lvbnNbdGhpcy5uYW1lXSxvPW4uaW1hZ2VzW2kuc291cmNlXSxhPWUub3B0aW9ucy5rdHgyTG9hZGVyO2lmKCFhKXtpZihuLmV4dGVuc2lvbnNSZXF1aXJlZCYmbi5leHRlbnNpb25zUmVxdWlyZWQuaW5kZXhPZih0aGlzLm5hbWUpPj0wKXRocm93IG5ldyBFcnJvcihcIlRIUkVFLkdMVEZMb2FkZXI6IHNldEtUWDJMb2FkZXIgbXVzdCBiZSBjYWxsZWQgYmVmb3JlIGxvYWRpbmcgS1RYMiB0ZXh0dXJlc1wiKTtyZXR1cm4gbnVsbH1yZXR1cm4gZS5sb2FkVGV4dHVyZUltYWdlKHQsbyxhKX0sdS5wcm90b3R5cGUubG9hZFRleHR1cmU9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5uYW1lLG49dGhpcy5wYXJzZXIscj1uLmpzb24saT1yLnRleHR1cmVzW3RdO2lmKCFpLmV4dGVuc2lvbnN8fCFpLmV4dGVuc2lvbnNbZV0pcmV0dXJuIG51bGw7dmFyIG89aS5leHRlbnNpb25zW2VdLGE9ci5pbWFnZXNbby5zb3VyY2VdLHM9YS51cmk/bi5vcHRpb25zLm1hbmFnZXIuZ2V0SGFuZGxlcihhLnVyaSk6bi50ZXh0dXJlTG9hZGVyO3JldHVybiB0aGlzLmRldGVjdFN1cHBvcnQoKS50aGVuKChmdW5jdGlvbihpKXtpZihpKXJldHVybiBuLmxvYWRUZXh0dXJlSW1hZ2UodCxhLHMpO2lmKHIuZXh0ZW5zaW9uc1JlcXVpcmVkJiZyLmV4dGVuc2lvbnNSZXF1aXJlZC5pbmRleE9mKGUpPj0wKXRocm93IG5ldyBFcnJvcihcIlRIUkVFLkdMVEZMb2FkZXI6IFdlYlAgcmVxdWlyZWQgYnkgYXNzZXQgYnV0IHVuc3VwcG9ydGVkLlwiKTtyZXR1cm4gbi5sb2FkVGV4dHVyZSh0KX0pKX0sdS5wcm90b3R5cGUuZGV0ZWN0U3VwcG9ydD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlzU3VwcG9ydGVkfHwodGhpcy5pc1N1cHBvcnRlZD1uZXcgUHJvbWlzZSgoZnVuY3Rpb24odCl7dmFyIGU9bmV3IEltYWdlO2Uuc3JjPVwiZGF0YTppbWFnZS93ZWJwO2Jhc2U2NCxVa2xHUmlJQUFBQlhSVUpRVmxBNElCWUFBQUF3QVFDZEFTb0JBQUVBRHNEK0phUUFBM0FBQUFBQVwiLGUub25sb2FkPWUub25lcnJvcj1mdW5jdGlvbigpe3QoMT09PWUuaGVpZ2h0KX19KSkpLHRoaXMuaXNTdXBwb3J0ZWR9LGgucHJvdG90eXBlLmxvYWRCdWZmZXJWaWV3PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMucGFyc2VyLmpzb24sbj1lLmJ1ZmZlclZpZXdzW3RdO2lmKG4uZXh0ZW5zaW9ucyYmbi5leHRlbnNpb25zW3RoaXMubmFtZV0pe3ZhciByPW4uZXh0ZW5zaW9uc1t0aGlzLm5hbWVdLGk9dGhpcy5wYXJzZXIuZ2V0RGVwZW5kZW5jeShcImJ1ZmZlclwiLHIuYnVmZmVyKSxvPXRoaXMucGFyc2VyLm9wdGlvbnMubWVzaG9wdERlY29kZXI7aWYoIW98fCFvLnN1cHBvcnRlZCl7aWYoZS5leHRlbnNpb25zUmVxdWlyZWQmJmUuZXh0ZW5zaW9uc1JlcXVpcmVkLmluZGV4T2YodGhpcy5uYW1lKT49MCl0aHJvdyBuZXcgRXJyb3IoXCJUSFJFRS5HTFRGTG9hZGVyOiBzZXRNZXNob3B0RGVjb2RlciBtdXN0IGJlIGNhbGxlZCBiZWZvcmUgbG9hZGluZyBjb21wcmVzc2VkIGZpbGVzXCIpO3JldHVybiBudWxsfXJldHVybiBQcm9taXNlLmFsbChbaSxvLnJlYWR5XSkudGhlbigoZnVuY3Rpb24odCl7dmFyIGU9ci5ieXRlT2Zmc2V0fHwwLG49ci5ieXRlTGVuZ3RofHwwLGk9ci5jb3VudCxhPXIuYnl0ZVN0cmlkZSxzPW5ldyBBcnJheUJ1ZmZlcihpKmEpLGM9bmV3IFVpbnQ4QXJyYXkodFswXSxlLG4pO3JldHVybiBvLmRlY29kZUdsdGZCdWZmZXIobmV3IFVpbnQ4QXJyYXkocyksaSxhLGMsci5tb2RlLHIuZmlsdGVyKSxzfSkpfXJldHVybiBudWxsfTt2YXIgZD1cImdsVEZcIixwPTEzMTM4MjE1MTQsZj01MTMwNTYyO2Z1bmN0aW9uIG0odCl7dGhpcy5uYW1lPW4uS0hSX0JJTkFSWV9HTFRGLHRoaXMuY29udGVudD1udWxsLHRoaXMuYm9keT1udWxsO3ZhciBlPW5ldyBEYXRhVmlldyh0LDAsMTIpO2lmKHRoaXMuaGVhZGVyPXttYWdpYzpyLkxvYWRlclV0aWxzLmRlY29kZVRleHQobmV3IFVpbnQ4QXJyYXkodC5zbGljZSgwLDQpKSksdmVyc2lvbjplLmdldFVpbnQzMig0LCEwKSxsZW5ndGg6ZS5nZXRVaW50MzIoOCwhMCl9LHRoaXMuaGVhZGVyLm1hZ2ljIT09ZCl0aHJvdyBuZXcgRXJyb3IoXCJUSFJFRS5HTFRGTG9hZGVyOiBVbnN1cHBvcnRlZCBnbFRGLUJpbmFyeSBoZWFkZXIuXCIpO2lmKHRoaXMuaGVhZGVyLnZlcnNpb248Mil0aHJvdyBuZXcgRXJyb3IoXCJUSFJFRS5HTFRGTG9hZGVyOiBMZWdhY3kgYmluYXJ5IGZpbGUgZGV0ZWN0ZWQuXCIpO2Zvcih2YXIgaT1uZXcgRGF0YVZpZXcodCwxMiksbz0wO288aS5ieXRlTGVuZ3RoOyl7dmFyIGE9aS5nZXRVaW50MzIobywhMCk7bys9NDt2YXIgcz1pLmdldFVpbnQzMihvLCEwKTtpZihvKz00LHM9PT1wKXt2YXIgYz1uZXcgVWludDhBcnJheSh0LDEyK28sYSk7dGhpcy5jb250ZW50PXIuTG9hZGVyVXRpbHMuZGVjb2RlVGV4dChjKX1lbHNlIGlmKHM9PT1mKXt2YXIgbD0xMitvO3RoaXMuYm9keT10LnNsaWNlKGwsbCthKX1vKz1hfWlmKG51bGw9PT10aGlzLmNvbnRlbnQpdGhyb3cgbmV3IEVycm9yKFwiVEhSRUUuR0xURkxvYWRlcjogSlNPTiBjb250ZW50IG5vdCBmb3VuZC5cIil9ZnVuY3Rpb24gZyh0LGUpe2lmKCFlKXRocm93IG5ldyBFcnJvcihcIlRIUkVFLkdMVEZMb2FkZXI6IE5vIERSQUNPTG9hZGVyIGluc3RhbmNlIHByb3ZpZGVkLlwiKTt0aGlzLm5hbWU9bi5LSFJfRFJBQ09fTUVTSF9DT01QUkVTU0lPTix0aGlzLmpzb249dCx0aGlzLmRyYWNvTG9hZGVyPWUsdGhpcy5kcmFjb0xvYWRlci5wcmVsb2FkKCl9ZnVuY3Rpb24gdigpe3RoaXMubmFtZT1uLktIUl9URVhUVVJFX1RSQU5TRk9STX1mdW5jdGlvbiB5KHQpe3IuTWVzaFN0YW5kYXJkTWF0ZXJpYWwuY2FsbCh0aGlzKSx0aGlzLmlzR0xURlNwZWN1bGFyR2xvc3NpbmVzc01hdGVyaWFsPSEwO3ZhciBlPVtcIiNpZmRlZiBVU0VfU1BFQ1VMQVJNQVBcIixcIlxcdHVuaWZvcm0gc2FtcGxlcjJEIHNwZWN1bGFyTWFwO1wiLFwiI2VuZGlmXCJdLmpvaW4oXCJcXG5cIiksbj1bXCIjaWZkZWYgVVNFX0dMT1NTSU5FU1NNQVBcIixcIlxcdHVuaWZvcm0gc2FtcGxlcjJEIGdsb3NzaW5lc3NNYXA7XCIsXCIjZW5kaWZcIl0uam9pbihcIlxcblwiKSxpPVtcInZlYzMgc3BlY3VsYXJGYWN0b3IgPSBzcGVjdWxhcjtcIixcIiNpZmRlZiBVU0VfU1BFQ1VMQVJNQVBcIixcIlxcdHZlYzQgdGV4ZWxTcGVjdWxhciA9IHRleHR1cmUyRCggc3BlY3VsYXJNYXAsIHZVdiApO1wiLFwiXFx0dGV4ZWxTcGVjdWxhciA9IHNSR0JUb0xpbmVhciggdGV4ZWxTcGVjdWxhciApO1wiLFwiXFx0Ly8gcmVhZHMgY2hhbm5lbCBSR0IsIGNvbXBhdGlibGUgd2l0aCBhIGdsVEYgU3BlY3VsYXItR2xvc3NpbmVzcyAoUkdCQSkgdGV4dHVyZVwiLFwiXFx0c3BlY3VsYXJGYWN0b3IgKj0gdGV4ZWxTcGVjdWxhci5yZ2I7XCIsXCIjZW5kaWZcIl0uam9pbihcIlxcblwiKSxvPVtcImZsb2F0IGdsb3NzaW5lc3NGYWN0b3IgPSBnbG9zc2luZXNzO1wiLFwiI2lmZGVmIFVTRV9HTE9TU0lORVNTTUFQXCIsXCJcXHR2ZWM0IHRleGVsR2xvc3NpbmVzcyA9IHRleHR1cmUyRCggZ2xvc3NpbmVzc01hcCwgdlV2ICk7XCIsXCJcXHQvLyByZWFkcyBjaGFubmVsIEEsIGNvbXBhdGlibGUgd2l0aCBhIGdsVEYgU3BlY3VsYXItR2xvc3NpbmVzcyAoUkdCQSkgdGV4dHVyZVwiLFwiXFx0Z2xvc3NpbmVzc0ZhY3RvciAqPSB0ZXhlbEdsb3NzaW5lc3MuYTtcIixcIiNlbmRpZlwiXS5qb2luKFwiXFxuXCIpLGE9W1wiUGh5c2ljYWxNYXRlcmlhbCBtYXRlcmlhbDtcIixcIm1hdGVyaWFsLmRpZmZ1c2VDb2xvciA9IGRpZmZ1c2VDb2xvci5yZ2IgKiAoIDEuIC0gbWF4KCBzcGVjdWxhckZhY3Rvci5yLCBtYXgoIHNwZWN1bGFyRmFjdG9yLmcsIHNwZWN1bGFyRmFjdG9yLmIgKSApICk7XCIsXCJ2ZWMzIGR4eSA9IG1heCggYWJzKCBkRmR4KCBnZW9tZXRyeU5vcm1hbCApICksIGFicyggZEZkeSggZ2VvbWV0cnlOb3JtYWwgKSApICk7XCIsXCJmbG9hdCBnZW9tZXRyeVJvdWdobmVzcyA9IG1heCggbWF4KCBkeHkueCwgZHh5LnkgKSwgZHh5LnogKTtcIixcIm1hdGVyaWFsLnNwZWN1bGFyUm91Z2huZXNzID0gbWF4KCAxLjAgLSBnbG9zc2luZXNzRmFjdG9yLCAwLjA1MjUgKTsgLy8gMC4wNTI1IGNvcnJlc3BvbmRzIHRvIHRoZSBiYXNlIG1pcCBvZiBhIDI1NiBjdWJlbWFwLlwiLFwibWF0ZXJpYWwuc3BlY3VsYXJSb3VnaG5lc3MgKz0gZ2VvbWV0cnlSb3VnaG5lc3M7XCIsXCJtYXRlcmlhbC5zcGVjdWxhclJvdWdobmVzcyA9IG1pbiggbWF0ZXJpYWwuc3BlY3VsYXJSb3VnaG5lc3MsIDEuMCApO1wiLFwibWF0ZXJpYWwuc3BlY3VsYXJDb2xvciA9IHNwZWN1bGFyRmFjdG9yO1wiXS5qb2luKFwiXFxuXCIpLHM9e3NwZWN1bGFyOnt2YWx1ZToobmV3IHIuQ29sb3IpLnNldEhleCgxNjc3NzIxNSl9LGdsb3NzaW5lc3M6e3ZhbHVlOjF9LHNwZWN1bGFyTWFwOnt2YWx1ZTpudWxsfSxnbG9zc2luZXNzTWFwOnt2YWx1ZTpudWxsfX07dGhpcy5fZXh0cmFVbmlmb3Jtcz1zLHRoaXMub25CZWZvcmVDb21waWxlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgciBpbiBzKXQudW5pZm9ybXNbcl09c1tyXTt0LmZyYWdtZW50U2hhZGVyPXQuZnJhZ21lbnRTaGFkZXIucmVwbGFjZShcInVuaWZvcm0gZmxvYXQgcm91Z2huZXNzO1wiLFwidW5pZm9ybSB2ZWMzIHNwZWN1bGFyO1wiKS5yZXBsYWNlKFwidW5pZm9ybSBmbG9hdCBtZXRhbG5lc3M7XCIsXCJ1bmlmb3JtIGZsb2F0IGdsb3NzaW5lc3M7XCIpLnJlcGxhY2UoXCIjaW5jbHVkZSA8cm91Z2huZXNzbWFwX3BhcnNfZnJhZ21lbnQ+XCIsZSkucmVwbGFjZShcIiNpbmNsdWRlIDxtZXRhbG5lc3NtYXBfcGFyc19mcmFnbWVudD5cIixuKS5yZXBsYWNlKFwiI2luY2x1ZGUgPHJvdWdobmVzc21hcF9mcmFnbWVudD5cIixpKS5yZXBsYWNlKFwiI2luY2x1ZGUgPG1ldGFsbmVzc21hcF9mcmFnbWVudD5cIixvKS5yZXBsYWNlKFwiI2luY2x1ZGUgPGxpZ2h0c19waHlzaWNhbF9mcmFnbWVudD5cIixhKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcyx7c3BlY3VsYXI6e2dldDpmdW5jdGlvbigpe3JldHVybiBzLnNwZWN1bGFyLnZhbHVlfSxzZXQ6ZnVuY3Rpb24odCl7cy5zcGVjdWxhci52YWx1ZT10fX0sc3BlY3VsYXJNYXA6e2dldDpmdW5jdGlvbigpe3JldHVybiBzLnNwZWN1bGFyTWFwLnZhbHVlfSxzZXQ6ZnVuY3Rpb24odCl7cy5zcGVjdWxhck1hcC52YWx1ZT10LHQ/dGhpcy5kZWZpbmVzLlVTRV9TUEVDVUxBUk1BUD1cIlwiOmRlbGV0ZSB0aGlzLmRlZmluZXMuVVNFX1NQRUNVTEFSTUFQfX0sZ2xvc3NpbmVzczp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHMuZ2xvc3NpbmVzcy52YWx1ZX0sc2V0OmZ1bmN0aW9uKHQpe3MuZ2xvc3NpbmVzcy52YWx1ZT10fX0sZ2xvc3NpbmVzc01hcDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHMuZ2xvc3NpbmVzc01hcC52YWx1ZX0sc2V0OmZ1bmN0aW9uKHQpe3MuZ2xvc3NpbmVzc01hcC52YWx1ZT10LHQ/KHRoaXMuZGVmaW5lcy5VU0VfR0xPU1NJTkVTU01BUD1cIlwiLHRoaXMuZGVmaW5lcy5VU0VfVVY9XCJcIik6KGRlbGV0ZSB0aGlzLmRlZmluZXMuVVNFX0dMT1NTSU5FU1NNQVAsZGVsZXRlIHRoaXMuZGVmaW5lcy5VU0VfVVYpfX19KSxkZWxldGUgdGhpcy5tZXRhbG5lc3MsZGVsZXRlIHRoaXMucm91Z2huZXNzLGRlbGV0ZSB0aGlzLm1ldGFsbmVzc01hcCxkZWxldGUgdGhpcy5yb3VnaG5lc3NNYXAsdGhpcy5zZXRWYWx1ZXModCl9ZnVuY3Rpb24geCgpe3JldHVybntuYW1lOm4uS0hSX01BVEVSSUFMU19QQlJfU1BFQ1VMQVJfR0xPU1NJTkVTUyxzcGVjdWxhckdsb3NzaW5lc3NQYXJhbXM6W1wiY29sb3JcIixcIm1hcFwiLFwibGlnaHRNYXBcIixcImxpZ2h0TWFwSW50ZW5zaXR5XCIsXCJhb01hcFwiLFwiYW9NYXBJbnRlbnNpdHlcIixcImVtaXNzaXZlXCIsXCJlbWlzc2l2ZUludGVuc2l0eVwiLFwiZW1pc3NpdmVNYXBcIixcImJ1bXBNYXBcIixcImJ1bXBTY2FsZVwiLFwibm9ybWFsTWFwXCIsXCJub3JtYWxNYXBUeXBlXCIsXCJkaXNwbGFjZW1lbnRNYXBcIixcImRpc3BsYWNlbWVudFNjYWxlXCIsXCJkaXNwbGFjZW1lbnRCaWFzXCIsXCJzcGVjdWxhck1hcFwiLFwic3BlY3VsYXJcIixcImdsb3NzaW5lc3NNYXBcIixcImdsb3NzaW5lc3NcIixcImFscGhhTWFwXCIsXCJlbnZNYXBcIixcImVudk1hcEludGVuc2l0eVwiLFwicmVmcmFjdGlvblJhdGlvXCJdLGdldE1hdGVyaWFsVHlwZTpmdW5jdGlvbigpe3JldHVybiB5fSxleHRlbmRQYXJhbXM6ZnVuY3Rpb24odCxlLG4pe3ZhciBpPWUuZXh0ZW5zaW9uc1t0aGlzLm5hbWVdO3QuY29sb3I9bmV3IHIuQ29sb3IoMSwxLDEpLHQub3BhY2l0eT0xO3ZhciBvPVtdO2lmKEFycmF5LmlzQXJyYXkoaS5kaWZmdXNlRmFjdG9yKSl7dmFyIGE9aS5kaWZmdXNlRmFjdG9yO3QuY29sb3IuZnJvbUFycmF5KGEpLHQub3BhY2l0eT1hWzNdfWlmKHZvaWQgMCE9PWkuZGlmZnVzZVRleHR1cmUmJm8ucHVzaChuLmFzc2lnblRleHR1cmUodCxcIm1hcFwiLGkuZGlmZnVzZVRleHR1cmUpKSx0LmVtaXNzaXZlPW5ldyByLkNvbG9yKDAsMCwwKSx0Lmdsb3NzaW5lc3M9dm9pZCAwIT09aS5nbG9zc2luZXNzRmFjdG9yP2kuZ2xvc3NpbmVzc0ZhY3RvcjoxLHQuc3BlY3VsYXI9bmV3IHIuQ29sb3IoMSwxLDEpLEFycmF5LmlzQXJyYXkoaS5zcGVjdWxhckZhY3RvcikmJnQuc3BlY3VsYXIuZnJvbUFycmF5KGkuc3BlY3VsYXJGYWN0b3IpLHZvaWQgMCE9PWkuc3BlY3VsYXJHbG9zc2luZXNzVGV4dHVyZSl7dmFyIHM9aS5zcGVjdWxhckdsb3NzaW5lc3NUZXh0dXJlO28ucHVzaChuLmFzc2lnblRleHR1cmUodCxcImdsb3NzaW5lc3NNYXBcIixzKSksby5wdXNoKG4uYXNzaWduVGV4dHVyZSh0LFwic3BlY3VsYXJNYXBcIixzKSl9cmV0dXJuIFByb21pc2UuYWxsKG8pfSxjcmVhdGVNYXRlcmlhbDpmdW5jdGlvbih0KXt2YXIgZT1uZXcgeSh0KTtyZXR1cm4gZS5mb2c9ITAsZS5jb2xvcj10LmNvbG9yLGUubWFwPXZvaWQgMD09PXQubWFwP251bGw6dC5tYXAsZS5saWdodE1hcD1udWxsLGUubGlnaHRNYXBJbnRlbnNpdHk9MSxlLmFvTWFwPXZvaWQgMD09PXQuYW9NYXA/bnVsbDp0LmFvTWFwLGUuYW9NYXBJbnRlbnNpdHk9MSxlLmVtaXNzaXZlPXQuZW1pc3NpdmUsZS5lbWlzc2l2ZUludGVuc2l0eT0xLGUuZW1pc3NpdmVNYXA9dm9pZCAwPT09dC5lbWlzc2l2ZU1hcD9udWxsOnQuZW1pc3NpdmVNYXAsZS5idW1wTWFwPXZvaWQgMD09PXQuYnVtcE1hcD9udWxsOnQuYnVtcE1hcCxlLmJ1bXBTY2FsZT0xLGUubm9ybWFsTWFwPXZvaWQgMD09PXQubm9ybWFsTWFwP251bGw6dC5ub3JtYWxNYXAsZS5ub3JtYWxNYXBUeXBlPXIuVGFuZ2VudFNwYWNlTm9ybWFsTWFwLHQubm9ybWFsU2NhbGUmJihlLm5vcm1hbFNjYWxlPXQubm9ybWFsU2NhbGUpLGUuZGlzcGxhY2VtZW50TWFwPW51bGwsZS5kaXNwbGFjZW1lbnRTY2FsZT0xLGUuZGlzcGxhY2VtZW50Qmlhcz0wLGUuc3BlY3VsYXJNYXA9dm9pZCAwPT09dC5zcGVjdWxhck1hcD9udWxsOnQuc3BlY3VsYXJNYXAsZS5zcGVjdWxhcj10LnNwZWN1bGFyLGUuZ2xvc3NpbmVzc01hcD12b2lkIDA9PT10Lmdsb3NzaW5lc3NNYXA/bnVsbDp0Lmdsb3NzaW5lc3NNYXAsZS5nbG9zc2luZXNzPXQuZ2xvc3NpbmVzcyxlLmFscGhhTWFwPW51bGwsZS5lbnZNYXA9dm9pZCAwPT09dC5lbnZNYXA/bnVsbDp0LmVudk1hcCxlLmVudk1hcEludGVuc2l0eT0xLGUucmVmcmFjdGlvblJhdGlvPS45OCxlfX19ZnVuY3Rpb24gYigpe3RoaXMubmFtZT1uLktIUl9NRVNIX1FVQU5USVpBVElPTn1mdW5jdGlvbiB3KHQsZSxuLGkpe3IuSW50ZXJwb2xhbnQuY2FsbCh0aGlzLHQsZSxuLGkpfWcucHJvdG90eXBlLmRlY29kZVByaW1pdGl2ZT1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuanNvbixyPXRoaXMuZHJhY29Mb2FkZXIsaT10LmV4dGVuc2lvbnNbdGhpcy5uYW1lXS5idWZmZXJWaWV3LG89dC5leHRlbnNpb25zW3RoaXMubmFtZV0uYXR0cmlidXRlcyxhPXt9LHM9e30sYz17fTtmb3IodmFyIGwgaW4gbyl7dmFyIHU9T1tsXXx8bC50b0xvd2VyQ2FzZSgpO2FbdV09b1tsXX1mb3IobCBpbiB0LmF0dHJpYnV0ZXMpe3U9T1tsXXx8bC50b0xvd2VyQ2FzZSgpO2lmKHZvaWQgMCE9PW9bbF0pe3ZhciBoPW4uYWNjZXNzb3JzW3QuYXR0cmlidXRlc1tsXV0sZD1SW2guY29tcG9uZW50VHlwZV07Y1t1XT1kLHNbdV09ITA9PT1oLm5vcm1hbGl6ZWR9fXJldHVybiBlLmdldERlcGVuZGVuY3koXCJidWZmZXJWaWV3XCIsaSkudGhlbigoZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbihlKXtyLmRlY29kZURyYWNvRmlsZSh0LChmdW5jdGlvbih0KXtmb3IodmFyIG4gaW4gdC5hdHRyaWJ1dGVzKXt2YXIgcj10LmF0dHJpYnV0ZXNbbl0saT1zW25dO3ZvaWQgMCE9PWkmJihyLm5vcm1hbGl6ZWQ9aSl9ZSh0KX0pLGEsYyl9KSl9KSl9LHYucHJvdG90eXBlLmV4dGVuZFRleHR1cmU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdD10LmNsb25lKCksdm9pZCAwIT09ZS5vZmZzZXQmJnQub2Zmc2V0LmZyb21BcnJheShlLm9mZnNldCksdm9pZCAwIT09ZS5yb3RhdGlvbiYmKHQucm90YXRpb249ZS5yb3RhdGlvbiksdm9pZCAwIT09ZS5zY2FsZSYmdC5yZXBlYXQuZnJvbUFycmF5KGUuc2NhbGUpLHZvaWQgMCE9PWUudGV4Q29vcmQmJmNvbnNvbGUud2FybignVEhSRUUuR0xURkxvYWRlcjogQ3VzdG9tIFVWIHNldHMgaW4gXCInK3RoaXMubmFtZSsnXCIgZXh0ZW5zaW9uIG5vdCB5ZXQgc3VwcG9ydGVkLicpLHQubmVlZHNVcGRhdGU9ITAsdH0seS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShyLk1lc2hTdGFuZGFyZE1hdGVyaWFsLnByb3RvdHlwZSkseS5wcm90b3R5cGUuY29uc3RydWN0b3I9eSx5LnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKHQpe3JldHVybiByLk1lc2hTdGFuZGFyZE1hdGVyaWFsLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyx0KSx0aGlzLnNwZWN1bGFyTWFwPXQuc3BlY3VsYXJNYXAsdGhpcy5zcGVjdWxhci5jb3B5KHQuc3BlY3VsYXIpLHRoaXMuZ2xvc3NpbmVzc01hcD10Lmdsb3NzaW5lc3NNYXAsdGhpcy5nbG9zc2luZXNzPXQuZ2xvc3NpbmVzcyxkZWxldGUgdGhpcy5tZXRhbG5lc3MsZGVsZXRlIHRoaXMucm91Z2huZXNzLGRlbGV0ZSB0aGlzLm1ldGFsbmVzc01hcCxkZWxldGUgdGhpcy5yb3VnaG5lc3NNYXAsdGhpc30sdy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShyLkludGVycG9sYW50LnByb3RvdHlwZSksdy5wcm90b3R5cGUuY29uc3RydWN0b3I9dyx3LnByb3RvdHlwZS5jb3B5U2FtcGxlVmFsdWVfPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLnJlc3VsdEJ1ZmZlcixuPXRoaXMuc2FtcGxlVmFsdWVzLHI9dGhpcy52YWx1ZVNpemUsaT10KnIqMytyLG89MDtvIT09cjtvKyspZVtvXT1uW2krb107cmV0dXJuIGV9LHcucHJvdG90eXBlLmJlZm9yZVN0YXJ0Xz13LnByb3RvdHlwZS5jb3B5U2FtcGxlVmFsdWVfLHcucHJvdG90eXBlLmFmdGVyRW5kXz13LnByb3RvdHlwZS5jb3B5U2FtcGxlVmFsdWVfLHcucHJvdG90eXBlLmludGVycG9sYXRlXz1mdW5jdGlvbih0LGUsbixyKXtmb3IodmFyIGk9dGhpcy5yZXN1bHRCdWZmZXIsbz10aGlzLnNhbXBsZVZhbHVlcyxhPXRoaXMudmFsdWVTaXplLHM9MiphLGM9MyphLGw9ci1lLHU9KG4tZSkvbCxoPXUqdSxkPWgqdSxwPXQqYyxmPXAtYyxtPS0yKmQrMypoLGc9ZC1oLHY9MS1tLHk9Zy1oK3UseD0wO3ghPT1hO3grKyl7dmFyIGI9b1tmK3grYV0sdz1vW2YreCtzXSpsLF89b1twK3grYV0sTT1vW3AreF0qbDtpW3hdPXYqYit5KncrbSpfK2cqTX1yZXR1cm4gaX07dmFyIF89MCxNPTEsUz0yLFQ9MyxFPTQsQT01LEw9NixSPXs1MTIwOkludDhBcnJheSw1MTIxOlVpbnQ4QXJyYXksNTEyMjpJbnQxNkFycmF5LDUxMjM6VWludDE2QXJyYXksNTEyNTpVaW50MzJBcnJheSw1MTI2OkZsb2F0MzJBcnJheX0sUD17OTcyODpyLk5lYXJlc3RGaWx0ZXIsOTcyOTpyLkxpbmVhckZpbHRlciw5OTg0OnIuTmVhcmVzdE1pcG1hcE5lYXJlc3RGaWx0ZXIsOTk4NTpyLkxpbmVhck1pcG1hcE5lYXJlc3RGaWx0ZXIsOTk4NjpyLk5lYXJlc3RNaXBtYXBMaW5lYXJGaWx0ZXIsOTk4NzpyLkxpbmVhck1pcG1hcExpbmVhckZpbHRlcn0sQz17MzMwNzE6ci5DbGFtcFRvRWRnZVdyYXBwaW5nLDMzNjQ4OnIuTWlycm9yZWRSZXBlYXRXcmFwcGluZywxMDQ5NzpyLlJlcGVhdFdyYXBwaW5nfSxJPXtTQ0FMQVI6MSxWRUMyOjIsVkVDMzozLFZFQzQ6NCxNQVQyOjQsTUFUMzo5LE1BVDQ6MTZ9LE89e1BPU0lUSU9OOlwicG9zaXRpb25cIixOT1JNQUw6XCJub3JtYWxcIixUQU5HRU5UOlwidGFuZ2VudFwiLFRFWENPT1JEXzA6XCJ1dlwiLFRFWENPT1JEXzE6XCJ1djJcIixDT0xPUl8wOlwiY29sb3JcIixXRUlHSFRTXzA6XCJza2luV2VpZ2h0XCIsSk9JTlRTXzA6XCJza2luSW5kZXhcIn0sTj17c2NhbGU6XCJzY2FsZVwiLHRyYW5zbGF0aW9uOlwicG9zaXRpb25cIixyb3RhdGlvbjpcInF1YXRlcm5pb25cIix3ZWlnaHRzOlwibW9ycGhUYXJnZXRJbmZsdWVuY2VzXCJ9LEQ9e0NVQklDU1BMSU5FOnZvaWQgMCxMSU5FQVI6ci5JbnRlcnBvbGF0ZUxpbmVhcixTVEVQOnIuSW50ZXJwb2xhdGVEaXNjcmV0ZX0sQj1cIk9QQVFVRVwiLEY9XCJNQVNLXCIsVT1cIkJMRU5EXCI7ZnVuY3Rpb24geih0LGUpe3JldHVyblwic3RyaW5nXCIhPXR5cGVvZiB0fHxcIlwiPT09dD9cIlwiOigvXmh0dHBzPzpcXC9cXC8vaS50ZXN0KGUpJiYvXlxcLy8udGVzdCh0KSYmKGU9ZS5yZXBsYWNlKC8oXmh0dHBzPzpcXC9cXC9bXlxcL10rKS4qL2ksXCIkMVwiKSksL14oaHR0cHM/Oik/XFwvXFwvL2kudGVzdCh0KXx8L15kYXRhOi4qLC4qJC9pLnRlc3QodCl8fC9eYmxvYjouKiQvaS50ZXN0KHQpP3Q6ZSt0KX1mdW5jdGlvbiBHKHQsZSxuKXtmb3IodmFyIHIgaW4gbi5leHRlbnNpb25zKXZvaWQgMD09PXRbcl0mJihlLnVzZXJEYXRhLmdsdGZFeHRlbnNpb25zPWUudXNlckRhdGEuZ2x0ZkV4dGVuc2lvbnN8fHt9LGUudXNlckRhdGEuZ2x0ZkV4dGVuc2lvbnNbcl09bi5leHRlbnNpb25zW3JdKX1mdW5jdGlvbiBIKHQsZSl7dm9pZCAwIT09ZS5leHRyYXMmJihcIm9iamVjdFwiPT10eXBlb2YgZS5leHRyYXM/T2JqZWN0LmFzc2lnbih0LnVzZXJEYXRhLGUuZXh0cmFzKTpjb25zb2xlLndhcm4oXCJUSFJFRS5HTFRGTG9hZGVyOiBJZ25vcmluZyBwcmltaXRpdmUgdHlwZSAuZXh0cmFzLCBcIitlLmV4dHJhcykpfWZ1bmN0aW9uIGsodCxlKXtpZih0LnVwZGF0ZU1vcnBoVGFyZ2V0cygpLHZvaWQgMCE9PWUud2VpZ2h0cylmb3IodmFyIG49MCxyPWUud2VpZ2h0cy5sZW5ndGg7bjxyO24rKyl0Lm1vcnBoVGFyZ2V0SW5mbHVlbmNlc1tuXT1lLndlaWdodHNbbl07aWYoZS5leHRyYXMmJkFycmF5LmlzQXJyYXkoZS5leHRyYXMudGFyZ2V0TmFtZXMpKXt2YXIgaT1lLmV4dHJhcy50YXJnZXROYW1lcztpZih0Lm1vcnBoVGFyZ2V0SW5mbHVlbmNlcy5sZW5ndGg9PT1pLmxlbmd0aCl7dC5tb3JwaFRhcmdldERpY3Rpb25hcnk9e307Zm9yKG49MCxyPWkubGVuZ3RoO248cjtuKyspdC5tb3JwaFRhcmdldERpY3Rpb25hcnlbaVtuXV09bn1lbHNlIGNvbnNvbGUud2FybihcIlRIUkVFLkdMVEZMb2FkZXI6IEludmFsaWQgZXh0cmFzLnRhcmdldE5hbWVzIGxlbmd0aC4gSWdub3JpbmcgbmFtZXMuXCIpfX1mdW5jdGlvbiBWKHQpe2Zvcih2YXIgZT1cIlwiLG49T2JqZWN0LmtleXModCkuc29ydCgpLHI9MCxpPW4ubGVuZ3RoO3I8aTtyKyspZSs9bltyXStcIjpcIit0W25bcl1dK1wiO1wiO3JldHVybiBlfWZ1bmN0aW9uIGoodCxuKXt0aGlzLmpzb249dHx8e30sdGhpcy5leHRlbnNpb25zPXt9LHRoaXMucGx1Z2lucz17fSx0aGlzLm9wdGlvbnM9bnx8e30sdGhpcy5jYWNoZT1uZXcgZSx0aGlzLmFzc29jaWF0aW9ucz1uZXcgTWFwLHRoaXMucHJpbWl0aXZlQ2FjaGU9e30sdGhpcy5tZXNoQ2FjaGU9e3JlZnM6e30sdXNlczp7fX0sdGhpcy5jYW1lcmFDYWNoZT17cmVmczp7fSx1c2VzOnt9fSx0aGlzLmxpZ2h0Q2FjaGU9e3JlZnM6e30sdXNlczp7fX0sdGhpcy5ub2RlTmFtZXNVc2VkPXt9LFwidW5kZWZpbmVkXCIhPXR5cGVvZiBjcmVhdGVJbWFnZUJpdG1hcCYmITE9PT0vRmlyZWZveC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KT90aGlzLnRleHR1cmVMb2FkZXI9bmV3IHIuSW1hZ2VCaXRtYXBMb2FkZXIodGhpcy5vcHRpb25zLm1hbmFnZXIpOnRoaXMudGV4dHVyZUxvYWRlcj1uZXcgci5UZXh0dXJlTG9hZGVyKHRoaXMub3B0aW9ucy5tYW5hZ2VyKSx0aGlzLnRleHR1cmVMb2FkZXIuc2V0Q3Jvc3NPcmlnaW4odGhpcy5vcHRpb25zLmNyb3NzT3JpZ2luKSx0aGlzLmZpbGVMb2FkZXI9bmV3IHIuRmlsZUxvYWRlcih0aGlzLm9wdGlvbnMubWFuYWdlciksdGhpcy5maWxlTG9hZGVyLnNldFJlc3BvbnNlVHlwZShcImFycmF5YnVmZmVyXCIpLFwidXNlLWNyZWRlbnRpYWxzXCI9PT10aGlzLm9wdGlvbnMuY3Jvc3NPcmlnaW4mJnRoaXMuZmlsZUxvYWRlci5zZXRXaXRoQ3JlZGVudGlhbHMoITApfWZ1bmN0aW9uIFcodCxlLG4pe3ZhciBpPWUuYXR0cmlidXRlcyxvPVtdO2Z1bmN0aW9uIGEoZSxyKXtyZXR1cm4gbi5nZXREZXBlbmRlbmN5KFwiYWNjZXNzb3JcIixlKS50aGVuKChmdW5jdGlvbihlKXt0LnNldEF0dHJpYnV0ZShyLGUpfSkpfWZvcih2YXIgcyBpbiBpKXt2YXIgYz1PW3NdfHxzLnRvTG93ZXJDYXNlKCk7YyBpbiB0LmF0dHJpYnV0ZXN8fG8ucHVzaChhKGlbc10sYykpfWlmKHZvaWQgMCE9PWUuaW5kaWNlcyYmIXQuaW5kZXgpe3ZhciBsPW4uZ2V0RGVwZW5kZW5jeShcImFjY2Vzc29yXCIsZS5pbmRpY2VzKS50aGVuKChmdW5jdGlvbihlKXt0LnNldEluZGV4KGUpfSkpO28ucHVzaChsKX1yZXR1cm4gSCh0LGUpLGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1lLmF0dHJpYnV0ZXMsbz1uZXcgci5Cb3gzO2lmKHZvaWQgMCE9PWkuUE9TSVRJT04pe3ZhciBhPShmPW4uanNvbi5hY2Nlc3NvcnNbaS5QT1NJVElPTl0pLm1pbixzPWYubWF4O2lmKHZvaWQgMCE9PWEmJnZvaWQgMCE9PXMpe28uc2V0KG5ldyByLlZlY3RvcjMoYVswXSxhWzFdLGFbMl0pLG5ldyByLlZlY3RvcjMoc1swXSxzWzFdLHNbMl0pKTt2YXIgYz1lLnRhcmdldHM7aWYodm9pZCAwIT09Yyl7Zm9yKHZhciBsPW5ldyByLlZlY3RvcjMsdT1uZXcgci5WZWN0b3IzLGg9MCxkPWMubGVuZ3RoO2g8ZDtoKyspe3ZhciBwPWNbaF07aWYodm9pZCAwIT09cC5QT1NJVElPTil7dmFyIGY7YT0oZj1uLmpzb24uYWNjZXNzb3JzW3AuUE9TSVRJT05dKS5taW4scz1mLm1heDt2b2lkIDAhPT1hJiZ2b2lkIDAhPT1zPyh1LnNldFgoTWF0aC5tYXgoTWF0aC5hYnMoYVswXSksTWF0aC5hYnMoc1swXSkpKSx1LnNldFkoTWF0aC5tYXgoTWF0aC5hYnMoYVsxXSksTWF0aC5hYnMoc1sxXSkpKSx1LnNldFooTWF0aC5tYXgoTWF0aC5hYnMoYVsyXSksTWF0aC5hYnMoc1syXSkpKSxsLm1heCh1KSk6Y29uc29sZS53YXJuKFwiVEhSRUUuR0xURkxvYWRlcjogTWlzc2luZyBtaW4vbWF4IHByb3BlcnRpZXMgZm9yIGFjY2Vzc29yIFBPU0lUSU9OLlwiKX19by5leHBhbmRCeVZlY3RvcihsKX10LmJvdW5kaW5nQm94PW87dmFyIG09bmV3IHIuU3BoZXJlO28uZ2V0Q2VudGVyKG0uY2VudGVyKSxtLnJhZGl1cz1vLm1pbi5kaXN0YW5jZVRvKG8ubWF4KS8yLHQuYm91bmRpbmdTcGhlcmU9bX1lbHNlIGNvbnNvbGUud2FybihcIlRIUkVFLkdMVEZMb2FkZXI6IE1pc3NpbmcgbWluL21heCBwcm9wZXJ0aWVzIGZvciBhY2Nlc3NvciBQT1NJVElPTi5cIil9fSh0LGUsbiksUHJvbWlzZS5hbGwobykudGhlbigoZnVuY3Rpb24oKXtyZXR1cm4gdm9pZCAwIT09ZS50YXJnZXRzP2Z1bmN0aW9uKHQsZSxuKXtmb3IodmFyIHI9ITEsaT0hMSxvPTAsYT1lLmxlbmd0aDtvPGE7bysrKXtpZih2b2lkIDAhPT0obD1lW29dKS5QT1NJVElPTiYmKHI9ITApLHZvaWQgMCE9PWwuTk9STUFMJiYoaT0hMCksciYmaSlicmVha31pZighciYmIWkpcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0KTt2YXIgcz1bXSxjPVtdO2ZvcihvPTAsYT1lLmxlbmd0aDtvPGE7bysrKXt2YXIgbD1lW29dO2lmKHIpe3ZhciB1PXZvaWQgMCE9PWwuUE9TSVRJT04/bi5nZXREZXBlbmRlbmN5KFwiYWNjZXNzb3JcIixsLlBPU0lUSU9OKTp0LmF0dHJpYnV0ZXMucG9zaXRpb247cy5wdXNoKHUpfWlmKGkpe3U9dm9pZCAwIT09bC5OT1JNQUw/bi5nZXREZXBlbmRlbmN5KFwiYWNjZXNzb3JcIixsLk5PUk1BTCk6dC5hdHRyaWJ1dGVzLm5vcm1hbDtjLnB1c2godSl9fXJldHVybiBQcm9taXNlLmFsbChbUHJvbWlzZS5hbGwocyksUHJvbWlzZS5hbGwoYyldKS50aGVuKChmdW5jdGlvbihlKXt2YXIgbj1lWzBdLG89ZVsxXTtyZXR1cm4gciYmKHQubW9ycGhBdHRyaWJ1dGVzLnBvc2l0aW9uPW4pLGkmJih0Lm1vcnBoQXR0cmlidXRlcy5ub3JtYWw9byksdC5tb3JwaFRhcmdldHNSZWxhdGl2ZT0hMCx0fSkpfSh0LGUudGFyZ2V0cyxuKTp0fSkpfWZ1bmN0aW9uIFgodCxlKXt2YXIgbj10LmdldEluZGV4KCk7aWYobnVsbD09PW4pe3ZhciBpPVtdLG89dC5nZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiKTtpZih2b2lkIDA9PT1vKXJldHVybiBjb25zb2xlLmVycm9yKFwiVEhSRUUuR0xURkxvYWRlci50b1RyaWFuZ2xlc0RyYXdNb2RlKCk6IFVuZGVmaW5lZCBwb3NpdGlvbiBhdHRyaWJ1dGUuIFByb2Nlc3Npbmcgbm90IHBvc3NpYmxlLlwiKSx0O2Zvcih2YXIgYT0wO2E8by5jb3VudDthKyspaS5wdXNoKGEpO3Quc2V0SW5kZXgoaSksbj10LmdldEluZGV4KCl9dmFyIHM9bi5jb3VudC0yLGM9W107aWYoZT09PXIuVHJpYW5nbGVGYW5EcmF3TW9kZSlmb3IoYT0xO2E8PXM7YSsrKWMucHVzaChuLmdldFgoMCkpLGMucHVzaChuLmdldFgoYSkpLGMucHVzaChuLmdldFgoYSsxKSk7ZWxzZSBmb3IoYT0wO2E8czthKyspYSUyPT0wPyhjLnB1c2gobi5nZXRYKGEpKSxjLnB1c2gobi5nZXRYKGErMSkpLGMucHVzaChuLmdldFgoYSsyKSkpOihjLnB1c2gobi5nZXRYKGErMikpLGMucHVzaChuLmdldFgoYSsxKSksYy5wdXNoKG4uZ2V0WChhKSkpO2MubGVuZ3RoLzMhPT1zJiZjb25zb2xlLmVycm9yKFwiVEhSRUUuR0xURkxvYWRlci50b1RyaWFuZ2xlc0RyYXdNb2RlKCk6IFVuYWJsZSB0byBnZW5lcmF0ZSBjb3JyZWN0IGFtb3VudCBvZiB0cmlhbmdsZXMuXCIpO3ZhciBsPXQuY2xvbmUoKTtyZXR1cm4gbC5zZXRJbmRleChjKSxsfXJldHVybiBqLnByb3RvdHlwZS5zZXRFeHRlbnNpb25zPWZ1bmN0aW9uKHQpe3RoaXMuZXh0ZW5zaW9ucz10fSxqLnByb3RvdHlwZS5zZXRQbHVnaW5zPWZ1bmN0aW9uKHQpe3RoaXMucGx1Z2lucz10fSxqLnByb3RvdHlwZS5wYXJzZT1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMscj10aGlzLmpzb24saT10aGlzLmV4dGVuc2lvbnM7dGhpcy5jYWNoZS5yZW1vdmVBbGwoKSx0aGlzLl9pbnZva2VBbGwoKGZ1bmN0aW9uKHQpe3JldHVybiB0Ll9tYXJrRGVmcyYmdC5fbWFya0RlZnMoKX0pKSxQcm9taXNlLmFsbChbdGhpcy5nZXREZXBlbmRlbmNpZXMoXCJzY2VuZVwiKSx0aGlzLmdldERlcGVuZGVuY2llcyhcImFuaW1hdGlvblwiKSx0aGlzLmdldERlcGVuZGVuY2llcyhcImNhbWVyYVwiKV0pLnRoZW4oKGZ1bmN0aW9uKGUpe3ZhciBvPXtzY2VuZTplWzBdW3Iuc2NlbmV8fDBdLHNjZW5lczplWzBdLGFuaW1hdGlvbnM6ZVsxXSxjYW1lcmFzOmVbMl0sYXNzZXQ6ci5hc3NldCxwYXJzZXI6bix1c2VyRGF0YTp7fX07RyhpLG8sciksSChvLHIpLHQobyl9KSkuY2F0Y2goZSl9LGoucHJvdG90eXBlLl9tYXJrRGVmcz1mdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLmpzb24ubm9kZXN8fFtdLGU9dGhpcy5qc29uLnNraW5zfHxbXSxuPXRoaXMuanNvbi5tZXNoZXN8fFtdLHI9MCxpPWUubGVuZ3RoO3I8aTtyKyspZm9yKHZhciBvPWVbcl0uam9pbnRzLGE9MCxzPW8ubGVuZ3RoO2E8czthKyspdFtvW2FdXS5pc0JvbmU9ITA7Zm9yKHZhciBjPTAsbD10Lmxlbmd0aDtjPGw7YysrKXt2YXIgdT10W2NdO3ZvaWQgMCE9PXUubWVzaCYmKHRoaXMuX2FkZE5vZGVSZWYodGhpcy5tZXNoQ2FjaGUsdS5tZXNoKSx2b2lkIDAhPT11LnNraW4mJihuW3UubWVzaF0uaXNTa2lubmVkTWVzaD0hMCkpLHZvaWQgMCE9PXUuY2FtZXJhJiZ0aGlzLl9hZGROb2RlUmVmKHRoaXMuY2FtZXJhQ2FjaGUsdS5jYW1lcmEpfX0sai5wcm90b3R5cGUuX2FkZE5vZGVSZWY9ZnVuY3Rpb24odCxlKXt2b2lkIDAhPT1lJiYodm9pZCAwPT09dC5yZWZzW2VdJiYodC5yZWZzW2VdPXQudXNlc1tlXT0wKSx0LnJlZnNbZV0rKyl9LGoucHJvdG90eXBlLl9nZXROb2RlUmVmPWZ1bmN0aW9uKHQsZSxuKXtpZih0LnJlZnNbZV08PTEpcmV0dXJuIG47dmFyIHI9bi5jbG9uZSgpO3JldHVybiByLm5hbWUrPVwiX2luc3RhbmNlX1wiK3QudXNlc1tlXSsrLHJ9LGoucHJvdG90eXBlLl9pbnZva2VPbmU9ZnVuY3Rpb24odCl7dmFyIGU9T2JqZWN0LnZhbHVlcyh0aGlzLnBsdWdpbnMpO2UucHVzaCh0aGlzKTtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIHI9dChlW25dKTtpZihyKXJldHVybiByfX0sai5wcm90b3R5cGUuX2ludm9rZUFsbD1mdW5jdGlvbih0KXt2YXIgZT1PYmplY3QudmFsdWVzKHRoaXMucGx1Z2lucyk7ZS51bnNoaWZ0KHRoaXMpO2Zvcih2YXIgbj1bXSxyPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBpPXQoZVtyXSk7aSYmbi5wdXNoKGkpfXJldHVybiBufSxqLnByb3RvdHlwZS5nZXREZXBlbmRlbmN5PWZ1bmN0aW9uKHQsZSl7dmFyIG49dCtcIjpcIitlLHI9dGhpcy5jYWNoZS5nZXQobik7aWYoIXIpe3N3aXRjaCh0KXtjYXNlXCJzY2VuZVwiOnI9dGhpcy5sb2FkU2NlbmUoZSk7YnJlYWs7Y2FzZVwibm9kZVwiOnI9dGhpcy5sb2FkTm9kZShlKTticmVhaztjYXNlXCJtZXNoXCI6cj10aGlzLl9pbnZva2VPbmUoKGZ1bmN0aW9uKHQpe3JldHVybiB0LmxvYWRNZXNoJiZ0LmxvYWRNZXNoKGUpfSkpO2JyZWFrO2Nhc2VcImFjY2Vzc29yXCI6cj10aGlzLmxvYWRBY2Nlc3NvcihlKTticmVhaztjYXNlXCJidWZmZXJWaWV3XCI6cj10aGlzLl9pbnZva2VPbmUoKGZ1bmN0aW9uKHQpe3JldHVybiB0LmxvYWRCdWZmZXJWaWV3JiZ0LmxvYWRCdWZmZXJWaWV3KGUpfSkpO2JyZWFrO2Nhc2VcImJ1ZmZlclwiOnI9dGhpcy5sb2FkQnVmZmVyKGUpO2JyZWFrO2Nhc2VcIm1hdGVyaWFsXCI6cj10aGlzLl9pbnZva2VPbmUoKGZ1bmN0aW9uKHQpe3JldHVybiB0LmxvYWRNYXRlcmlhbCYmdC5sb2FkTWF0ZXJpYWwoZSl9KSk7YnJlYWs7Y2FzZVwidGV4dHVyZVwiOnI9dGhpcy5faW52b2tlT25lKChmdW5jdGlvbih0KXtyZXR1cm4gdC5sb2FkVGV4dHVyZSYmdC5sb2FkVGV4dHVyZShlKX0pKTticmVhaztjYXNlXCJza2luXCI6cj10aGlzLmxvYWRTa2luKGUpO2JyZWFrO2Nhc2VcImFuaW1hdGlvblwiOnI9dGhpcy5sb2FkQW5pbWF0aW9uKGUpO2JyZWFrO2Nhc2VcImNhbWVyYVwiOnI9dGhpcy5sb2FkQ2FtZXJhKGUpO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKFwiVW5rbm93biB0eXBlOiBcIit0KX10aGlzLmNhY2hlLmFkZChuLHIpfXJldHVybiByfSxqLnByb3RvdHlwZS5nZXREZXBlbmRlbmNpZXM9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5jYWNoZS5nZXQodCk7aWYoIWUpe3ZhciBuPXRoaXMscj10aGlzLmpzb25bdCsoXCJtZXNoXCI9PT10P1wiZXNcIjpcInNcIildfHxbXTtlPVByb21pc2UuYWxsKHIubWFwKChmdW5jdGlvbihlLHIpe3JldHVybiBuLmdldERlcGVuZGVuY3kodCxyKX0pKSksdGhpcy5jYWNoZS5hZGQodCxlKX1yZXR1cm4gZX0sai5wcm90b3R5cGUubG9hZEJ1ZmZlcj1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmpzb24uYnVmZmVyc1t0XSxyPXRoaXMuZmlsZUxvYWRlcjtpZihlLnR5cGUmJlwiYXJyYXlidWZmZXJcIiE9PWUudHlwZSl0aHJvdyBuZXcgRXJyb3IoXCJUSFJFRS5HTFRGTG9hZGVyOiBcIitlLnR5cGUrXCIgYnVmZmVyIHR5cGUgaXMgbm90IHN1cHBvcnRlZC5cIik7aWYodm9pZCAwPT09ZS51cmkmJjA9PT10KXJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5leHRlbnNpb25zW24uS0hSX0JJTkFSWV9HTFRGXS5ib2R5KTt2YXIgaT10aGlzLm9wdGlvbnM7cmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbih0LG4pe3IubG9hZCh6KGUudXJpLGkucGF0aCksdCx2b2lkIDAsKGZ1bmN0aW9uKCl7bihuZXcgRXJyb3IoJ1RIUkVFLkdMVEZMb2FkZXI6IEZhaWxlZCB0byBsb2FkIGJ1ZmZlciBcIicrZS51cmkrJ1wiLicpKX0pKX0pKX0sai5wcm90b3R5cGUubG9hZEJ1ZmZlclZpZXc9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5qc29uLmJ1ZmZlclZpZXdzW3RdO3JldHVybiB0aGlzLmdldERlcGVuZGVuY3koXCJidWZmZXJcIixlLmJ1ZmZlcikudGhlbigoZnVuY3Rpb24odCl7dmFyIG49ZS5ieXRlTGVuZ3RofHwwLHI9ZS5ieXRlT2Zmc2V0fHwwO3JldHVybiB0LnNsaWNlKHIscituKX0pKX0sai5wcm90b3R5cGUubG9hZEFjY2Vzc29yPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj10aGlzLmpzb24saT10aGlzLmpzb24uYWNjZXNzb3JzW3RdO2lmKHZvaWQgMD09PWkuYnVmZmVyVmlldyYmdm9pZCAwPT09aS5zcGFyc2UpcmV0dXJuIFByb21pc2UucmVzb2x2ZShudWxsKTt2YXIgbz1bXTtyZXR1cm4gdm9pZCAwIT09aS5idWZmZXJWaWV3P28ucHVzaCh0aGlzLmdldERlcGVuZGVuY3koXCJidWZmZXJWaWV3XCIsaS5idWZmZXJWaWV3KSk6by5wdXNoKG51bGwpLHZvaWQgMCE9PWkuc3BhcnNlJiYoby5wdXNoKHRoaXMuZ2V0RGVwZW5kZW5jeShcImJ1ZmZlclZpZXdcIixpLnNwYXJzZS5pbmRpY2VzLmJ1ZmZlclZpZXcpKSxvLnB1c2godGhpcy5nZXREZXBlbmRlbmN5KFwiYnVmZmVyVmlld1wiLGkuc3BhcnNlLnZhbHVlcy5idWZmZXJWaWV3KSkpLFByb21pc2UuYWxsKG8pLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBvLGEscz10WzBdLGM9SVtpLnR5cGVdLGw9UltpLmNvbXBvbmVudFR5cGVdLHU9bC5CWVRFU19QRVJfRUxFTUVOVCxoPXUqYyxkPWkuYnl0ZU9mZnNldHx8MCxwPXZvaWQgMCE9PWkuYnVmZmVyVmlldz9uLmJ1ZmZlclZpZXdzW2kuYnVmZmVyVmlld10uYnl0ZVN0cmlkZTp2b2lkIDAsZj0hMD09PWkubm9ybWFsaXplZDtpZihwJiZwIT09aCl7dmFyIG09TWF0aC5mbG9vcihkL3ApLGc9XCJJbnRlcmxlYXZlZEJ1ZmZlcjpcIitpLmJ1ZmZlclZpZXcrXCI6XCIraS5jb21wb25lbnRUeXBlK1wiOlwiK20rXCI6XCIraS5jb3VudCx2PWUuY2FjaGUuZ2V0KGcpO3Z8fChvPW5ldyBsKHMsbSpwLGkuY291bnQqcC91KSx2PW5ldyByLkludGVybGVhdmVkQnVmZmVyKG8scC91KSxlLmNhY2hlLmFkZChnLHYpKSxhPW5ldyByLkludGVybGVhdmVkQnVmZmVyQXR0cmlidXRlKHYsYyxkJXAvdSxmKX1lbHNlIG89bnVsbD09PXM/bmV3IGwoaS5jb3VudCpjKTpuZXcgbChzLGQsaS5jb3VudCpjKSxhPW5ldyByLkJ1ZmZlckF0dHJpYnV0ZShvLGMsZik7aWYodm9pZCAwIT09aS5zcGFyc2Upe3ZhciB5PUkuU0NBTEFSLHg9UltpLnNwYXJzZS5pbmRpY2VzLmNvbXBvbmVudFR5cGVdLGI9aS5zcGFyc2UuaW5kaWNlcy5ieXRlT2Zmc2V0fHwwLHc9aS5zcGFyc2UudmFsdWVzLmJ5dGVPZmZzZXR8fDAsXz1uZXcgeCh0WzFdLGIsaS5zcGFyc2UuY291bnQqeSksTT1uZXcgbCh0WzJdLHcsaS5zcGFyc2UuY291bnQqYyk7bnVsbCE9PXMmJihhPW5ldyByLkJ1ZmZlckF0dHJpYnV0ZShhLmFycmF5LnNsaWNlKCksYS5pdGVtU2l6ZSxhLm5vcm1hbGl6ZWQpKTtmb3IodmFyIFM9MCxUPV8ubGVuZ3RoO1M8VDtTKyspe3ZhciBFPV9bU107aWYoYS5zZXRYKEUsTVtTKmNdKSxjPj0yJiZhLnNldFkoRSxNW1MqYysxXSksYz49MyYmYS5zZXRaKEUsTVtTKmMrMl0pLGM+PTQmJmEuc2V0VyhFLE1bUypjKzNdKSxjPj01KXRocm93IG5ldyBFcnJvcihcIlRIUkVFLkdMVEZMb2FkZXI6IFVuc3VwcG9ydGVkIGl0ZW1TaXplIGluIHNwYXJzZSBCdWZmZXJBdHRyaWJ1dGUuXCIpfX1yZXR1cm4gYX0pKX0sai5wcm90b3R5cGUubG9hZFRleHR1cmU9ZnVuY3Rpb24odCl7dmFyIGUscixpPXRoaXMuanNvbixvPXRoaXMub3B0aW9ucyxhPWkudGV4dHVyZXNbdF0scz1hLmV4dGVuc2lvbnN8fHt9O3JldHVybihlPXNbbi5NU0ZUX1RFWFRVUkVfRERTXT9pLmltYWdlc1tzW24uTVNGVF9URVhUVVJFX0REU10uc291cmNlXTppLmltYWdlc1thLnNvdXJjZV0pLnVyaSYmKHI9by5tYW5hZ2VyLmdldEhhbmRsZXIoZS51cmkpKSxyfHwocj1zW24uTVNGVF9URVhUVVJFX0REU10/dGhpcy5leHRlbnNpb25zW24uTVNGVF9URVhUVVJFX0REU10uZGRzTG9hZGVyOnRoaXMudGV4dHVyZUxvYWRlciksdGhpcy5sb2FkVGV4dHVyZUltYWdlKHQsZSxyKX0sai5wcm90b3R5cGUubG9hZFRleHR1cmVJbWFnZT1mdW5jdGlvbih0LGUsbil7dmFyIGk9dGhpcyxvPXRoaXMuanNvbixhPXRoaXMub3B0aW9ucyxzPW8udGV4dHVyZXNbdF0sYz1zZWxmLlVSTHx8c2VsZi53ZWJraXRVUkwsbD1lLnVyaSx1PSExLGg9ITA7cmV0dXJuXCJpbWFnZS9qcGVnXCI9PT1lLm1pbWVUeXBlJiYoaD0hMSksdm9pZCAwIT09ZS5idWZmZXJWaWV3JiYobD1pLmdldERlcGVuZGVuY3koXCJidWZmZXJWaWV3XCIsZS5idWZmZXJWaWV3KS50aGVuKChmdW5jdGlvbih0KXtpZihcImltYWdlL3BuZ1wiPT09ZS5taW1lVHlwZSl7dmFyIG49bmV3IERhdGFWaWV3KHQsMjUsMSkuZ2V0VWludDgoMCwhMSk7aD02PT09bnx8ND09PW58fDM9PT1ufXU9ITA7dmFyIHI9bmV3IEJsb2IoW3RdLHt0eXBlOmUubWltZVR5cGV9KTtyZXR1cm4gbD1jLmNyZWF0ZU9iamVjdFVSTChyKX0pKSksUHJvbWlzZS5yZXNvbHZlKGwpLnRoZW4oKGZ1bmN0aW9uKHQpe3JldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24oZSxpKXt2YXIgbz1lOyEwPT09bi5pc0ltYWdlQml0bWFwTG9hZGVyJiYobz1mdW5jdGlvbih0KXtlKG5ldyByLkNhbnZhc1RleHR1cmUodCkpfSksbi5sb2FkKHoodCxhLnBhdGgpLG8sdm9pZCAwLGkpfSkpfSkpLnRoZW4oKGZ1bmN0aW9uKGUpeyEwPT09dSYmYy5yZXZva2VPYmplY3RVUkwobCksZS5mbGlwWT0hMSxzLm5hbWUmJihlLm5hbWU9cy5uYW1lKSxofHwoZS5mb3JtYXQ9ci5SR0JGb3JtYXQpO3ZhciBuPShvLnNhbXBsZXJzfHx7fSlbcy5zYW1wbGVyXXx8e307cmV0dXJuIGUubWFnRmlsdGVyPVBbbi5tYWdGaWx0ZXJdfHxyLkxpbmVhckZpbHRlcixlLm1pbkZpbHRlcj1QW24ubWluRmlsdGVyXXx8ci5MaW5lYXJNaXBtYXBMaW5lYXJGaWx0ZXIsZS53cmFwUz1DW24ud3JhcFNdfHxyLlJlcGVhdFdyYXBwaW5nLGUud3JhcFQ9Q1tuLndyYXBUXXx8ci5SZXBlYXRXcmFwcGluZyxpLmFzc29jaWF0aW9ucy5zZXQoZSx7dHlwZTpcInRleHR1cmVzXCIsaW5kZXg6dH0pLGV9KSl9LGoucHJvdG90eXBlLmFzc2lnblRleHR1cmU9ZnVuY3Rpb24odCxlLHIpe3ZhciBpPXRoaXM7cmV0dXJuIHRoaXMuZ2V0RGVwZW5kZW5jeShcInRleHR1cmVcIixyLmluZGV4KS50aGVuKChmdW5jdGlvbihvKXtpZih2b2lkIDA9PT1yLnRleENvb3JkfHwwPT1yLnRleENvb3JkfHxcImFvTWFwXCI9PT1lJiYxPT1yLnRleENvb3JkfHxjb25zb2xlLndhcm4oXCJUSFJFRS5HTFRGTG9hZGVyOiBDdXN0b20gVVYgc2V0IFwiK3IudGV4Q29vcmQrXCIgZm9yIHRleHR1cmUgXCIrZStcIiBub3QgeWV0IHN1cHBvcnRlZC5cIiksaS5leHRlbnNpb25zW24uS0hSX1RFWFRVUkVfVFJBTlNGT1JNXSl7dmFyIGE9dm9pZCAwIT09ci5leHRlbnNpb25zP3IuZXh0ZW5zaW9uc1tuLktIUl9URVhUVVJFX1RSQU5TRk9STV06dm9pZCAwO2lmKGEpe3ZhciBzPWkuYXNzb2NpYXRpb25zLmdldChvKTtvPWkuZXh0ZW5zaW9uc1tuLktIUl9URVhUVVJFX1RSQU5TRk9STV0uZXh0ZW5kVGV4dHVyZShvLGEpLGkuYXNzb2NpYXRpb25zLnNldChvLHMpfX10W2VdPW99KSl9LGoucHJvdG90eXBlLmFzc2lnbkZpbmFsTWF0ZXJpYWw9ZnVuY3Rpb24odCl7dmFyIGU9dC5nZW9tZXRyeSxuPXQubWF0ZXJpYWwsaT12b2lkIDAhPT1lLmF0dHJpYnV0ZXMudGFuZ2VudCxvPXZvaWQgMCE9PWUuYXR0cmlidXRlcy5jb2xvcixhPXZvaWQgMD09PWUuYXR0cmlidXRlcy5ub3JtYWwscz0hMD09PXQuaXNTa2lubmVkTWVzaCxjPU9iamVjdC5rZXlzKGUubW9ycGhBdHRyaWJ1dGVzKS5sZW5ndGg+MCxsPWMmJnZvaWQgMCE9PWUubW9ycGhBdHRyaWJ1dGVzLm5vcm1hbDtpZih0LmlzUG9pbnRzKXt2YXIgdT1cIlBvaW50c01hdGVyaWFsOlwiK24udXVpZCxoPXRoaXMuY2FjaGUuZ2V0KHUpO2h8fChoPW5ldyByLlBvaW50c01hdGVyaWFsLHIuTWF0ZXJpYWwucHJvdG90eXBlLmNvcHkuY2FsbChoLG4pLGguY29sb3IuY29weShuLmNvbG9yKSxoLm1hcD1uLm1hcCxoLnNpemVBdHRlbnVhdGlvbj0hMSx0aGlzLmNhY2hlLmFkZCh1LGgpKSxuPWh9ZWxzZSBpZih0LmlzTGluZSl7dT1cIkxpbmVCYXNpY01hdGVyaWFsOlwiK24udXVpZDt2YXIgZD10aGlzLmNhY2hlLmdldCh1KTtkfHwoZD1uZXcgci5MaW5lQmFzaWNNYXRlcmlhbCxyLk1hdGVyaWFsLnByb3RvdHlwZS5jb3B5LmNhbGwoZCxuKSxkLmNvbG9yLmNvcHkobi5jb2xvciksdGhpcy5jYWNoZS5hZGQodSxkKSksbj1kfWlmKGl8fG98fGF8fHN8fGMpe3U9XCJDbG9uZWRNYXRlcmlhbDpcIituLnV1aWQrXCI6XCI7bi5pc0dMVEZTcGVjdWxhckdsb3NzaW5lc3NNYXRlcmlhbCYmKHUrPVwic3BlY3VsYXItZ2xvc3NpbmVzczpcIikscyYmKHUrPVwic2tpbm5pbmc6XCIpLGkmJih1Kz1cInZlcnRleC10YW5nZW50czpcIiksbyYmKHUrPVwidmVydGV4LWNvbG9yczpcIiksYSYmKHUrPVwiZmxhdC1zaGFkaW5nOlwiKSxjJiYodSs9XCJtb3JwaC10YXJnZXRzOlwiKSxsJiYodSs9XCJtb3JwaC1ub3JtYWxzOlwiKTt2YXIgcD10aGlzLmNhY2hlLmdldCh1KTtwfHwocD1uLmNsb25lKCkscyYmKHAuc2tpbm5pbmc9ITApLGkmJihwLnZlcnRleFRhbmdlbnRzPSEwKSxvJiYocC52ZXJ0ZXhDb2xvcnM9ITApLGEmJihwLmZsYXRTaGFkaW5nPSEwKSxjJiYocC5tb3JwaFRhcmdldHM9ITApLGwmJihwLm1vcnBoTm9ybWFscz0hMCksdGhpcy5jYWNoZS5hZGQodSxwKSx0aGlzLmFzc29jaWF0aW9ucy5zZXQocCx0aGlzLmFzc29jaWF0aW9ucy5nZXQobikpKSxuPXB9bi5hb01hcCYmdm9pZCAwPT09ZS5hdHRyaWJ1dGVzLnV2MiYmdm9pZCAwIT09ZS5hdHRyaWJ1dGVzLnV2JiZlLnNldEF0dHJpYnV0ZShcInV2MlwiLGUuYXR0cmlidXRlcy51diksbi5ub3JtYWxTY2FsZSYmIWkmJihuLm5vcm1hbFNjYWxlLnk9LW4ubm9ybWFsU2NhbGUueSksbi5jbGVhcmNvYXROb3JtYWxTY2FsZSYmIWkmJihuLmNsZWFyY29hdE5vcm1hbFNjYWxlLnk9LW4uY2xlYXJjb2F0Tm9ybWFsU2NhbGUueSksdC5tYXRlcmlhbD1ufSxqLnByb3RvdHlwZS5nZXRNYXRlcmlhbFR5cGU9ZnVuY3Rpb24oKXtyZXR1cm4gci5NZXNoU3RhbmRhcmRNYXRlcmlhbH0sai5wcm90b3R5cGUubG9hZE1hdGVyaWFsPWZ1bmN0aW9uKHQpe3ZhciBlLGk9dGhpcyxvPXRoaXMuanNvbixhPXRoaXMuZXh0ZW5zaW9ucyxzPW8ubWF0ZXJpYWxzW3RdLGM9e30sbD1zLmV4dGVuc2lvbnN8fHt9LHU9W107aWYobFtuLktIUl9NQVRFUklBTFNfUEJSX1NQRUNVTEFSX0dMT1NTSU5FU1NdKXt2YXIgaD1hW24uS0hSX01BVEVSSUFMU19QQlJfU1BFQ1VMQVJfR0xPU1NJTkVTU107ZT1oLmdldE1hdGVyaWFsVHlwZSgpLHUucHVzaChoLmV4dGVuZFBhcmFtcyhjLHMsaSkpfWVsc2UgaWYobFtuLktIUl9NQVRFUklBTFNfVU5MSVRdKXt2YXIgZD1hW24uS0hSX01BVEVSSUFMU19VTkxJVF07ZT1kLmdldE1hdGVyaWFsVHlwZSgpLHUucHVzaChkLmV4dGVuZFBhcmFtcyhjLHMsaSkpfWVsc2V7dmFyIHA9cy5wYnJNZXRhbGxpY1JvdWdobmVzc3x8e307aWYoYy5jb2xvcj1uZXcgci5Db2xvcigxLDEsMSksYy5vcGFjaXR5PTEsQXJyYXkuaXNBcnJheShwLmJhc2VDb2xvckZhY3Rvcikpe3ZhciBmPXAuYmFzZUNvbG9yRmFjdG9yO2MuY29sb3IuZnJvbUFycmF5KGYpLGMub3BhY2l0eT1mWzNdfXZvaWQgMCE9PXAuYmFzZUNvbG9yVGV4dHVyZSYmdS5wdXNoKGkuYXNzaWduVGV4dHVyZShjLFwibWFwXCIscC5iYXNlQ29sb3JUZXh0dXJlKSksYy5tZXRhbG5lc3M9dm9pZCAwIT09cC5tZXRhbGxpY0ZhY3Rvcj9wLm1ldGFsbGljRmFjdG9yOjEsYy5yb3VnaG5lc3M9dm9pZCAwIT09cC5yb3VnaG5lc3NGYWN0b3I/cC5yb3VnaG5lc3NGYWN0b3I6MSx2b2lkIDAhPT1wLm1ldGFsbGljUm91Z2huZXNzVGV4dHVyZSYmKHUucHVzaChpLmFzc2lnblRleHR1cmUoYyxcIm1ldGFsbmVzc01hcFwiLHAubWV0YWxsaWNSb3VnaG5lc3NUZXh0dXJlKSksdS5wdXNoKGkuYXNzaWduVGV4dHVyZShjLFwicm91Z2huZXNzTWFwXCIscC5tZXRhbGxpY1JvdWdobmVzc1RleHR1cmUpKSksZT10aGlzLl9pbnZva2VPbmUoKGZ1bmN0aW9uKGUpe3JldHVybiBlLmdldE1hdGVyaWFsVHlwZSYmZS5nZXRNYXRlcmlhbFR5cGUodCl9KSksdS5wdXNoKFByb21pc2UuYWxsKHRoaXMuX2ludm9rZUFsbCgoZnVuY3Rpb24oZSl7cmV0dXJuIGUuZXh0ZW5kTWF0ZXJpYWxQYXJhbXMmJmUuZXh0ZW5kTWF0ZXJpYWxQYXJhbXModCxjKX0pKSkpfSEwPT09cy5kb3VibGVTaWRlZCYmKGMuc2lkZT1yLkRvdWJsZVNpZGUpO3ZhciBtPXMuYWxwaGFNb2RlfHxCO3JldHVybiBtPT09VT8oYy50cmFuc3BhcmVudD0hMCxjLmRlcHRoV3JpdGU9ITEpOihjLnRyYW5zcGFyZW50PSExLG09PT1GJiYoYy5hbHBoYVRlc3Q9dm9pZCAwIT09cy5hbHBoYUN1dG9mZj9zLmFscGhhQ3V0b2ZmOi41KSksdm9pZCAwIT09cy5ub3JtYWxUZXh0dXJlJiZlIT09ci5NZXNoQmFzaWNNYXRlcmlhbCYmKHUucHVzaChpLmFzc2lnblRleHR1cmUoYyxcIm5vcm1hbE1hcFwiLHMubm9ybWFsVGV4dHVyZSkpLGMubm9ybWFsU2NhbGU9bmV3IHIuVmVjdG9yMigxLDEpLHZvaWQgMCE9PXMubm9ybWFsVGV4dHVyZS5zY2FsZSYmYy5ub3JtYWxTY2FsZS5zZXQocy5ub3JtYWxUZXh0dXJlLnNjYWxlLHMubm9ybWFsVGV4dHVyZS5zY2FsZSkpLHZvaWQgMCE9PXMub2NjbHVzaW9uVGV4dHVyZSYmZSE9PXIuTWVzaEJhc2ljTWF0ZXJpYWwmJih1LnB1c2goaS5hc3NpZ25UZXh0dXJlKGMsXCJhb01hcFwiLHMub2NjbHVzaW9uVGV4dHVyZSkpLHZvaWQgMCE9PXMub2NjbHVzaW9uVGV4dHVyZS5zdHJlbmd0aCYmKGMuYW9NYXBJbnRlbnNpdHk9cy5vY2NsdXNpb25UZXh0dXJlLnN0cmVuZ3RoKSksdm9pZCAwIT09cy5lbWlzc2l2ZUZhY3RvciYmZSE9PXIuTWVzaEJhc2ljTWF0ZXJpYWwmJihjLmVtaXNzaXZlPShuZXcgci5Db2xvcikuZnJvbUFycmF5KHMuZW1pc3NpdmVGYWN0b3IpKSx2b2lkIDAhPT1zLmVtaXNzaXZlVGV4dHVyZSYmZSE9PXIuTWVzaEJhc2ljTWF0ZXJpYWwmJnUucHVzaChpLmFzc2lnblRleHR1cmUoYyxcImVtaXNzaXZlTWFwXCIscy5lbWlzc2l2ZVRleHR1cmUpKSxQcm9taXNlLmFsbCh1KS50aGVuKChmdW5jdGlvbigpe3ZhciBvO3JldHVybiBvPWU9PT15P2Fbbi5LSFJfTUFURVJJQUxTX1BCUl9TUEVDVUxBUl9HTE9TU0lORVNTXS5jcmVhdGVNYXRlcmlhbChjKTpuZXcgZShjKSxzLm5hbWUmJihvLm5hbWU9cy5uYW1lKSxvLm1hcCYmKG8ubWFwLmVuY29kaW5nPXIuc1JHQkVuY29kaW5nKSxvLmVtaXNzaXZlTWFwJiYoby5lbWlzc2l2ZU1hcC5lbmNvZGluZz1yLnNSR0JFbmNvZGluZyksSChvLHMpLGkuYXNzb2NpYXRpb25zLnNldChvLHt0eXBlOlwibWF0ZXJpYWxzXCIsaW5kZXg6dH0pLHMuZXh0ZW5zaW9ucyYmRyhhLG8scyksb30pKX0sai5wcm90b3R5cGUuY3JlYXRlVW5pcXVlTmFtZT1mdW5jdGlvbih0KXtmb3IodmFyIGU9ci5Qcm9wZXJ0eUJpbmRpbmcuc2FuaXRpemVOb2RlTmFtZSh0fHxcIlwiKSxuPTE7dGhpcy5ub2RlTmFtZXNVc2VkW2VdOysrbillPXQrXCJfXCIrbjtyZXR1cm4gdGhpcy5ub2RlTmFtZXNVc2VkW2VdPSEwLGV9LGoucHJvdG90eXBlLmxvYWRHZW9tZXRyaWVzPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsaT10aGlzLmV4dGVuc2lvbnMsbz10aGlzLnByaW1pdGl2ZUNhY2hlO2Z1bmN0aW9uIGEodCl7cmV0dXJuIGlbbi5LSFJfRFJBQ09fTUVTSF9DT01QUkVTU0lPTl0uZGVjb2RlUHJpbWl0aXZlKHQsZSkudGhlbigoZnVuY3Rpb24obil7cmV0dXJuIFcobix0LGUpfSkpfWZvcih2YXIgcyxjLGw9W10sdT0wLGg9dC5sZW5ndGg7dTxoO3UrKyl7dmFyIGQscD10W3VdLGY9KGM9dm9pZCAwLChjPShzPXApLmV4dGVuc2lvbnMmJnMuZXh0ZW5zaW9uc1tuLktIUl9EUkFDT19NRVNIX0NPTVBSRVNTSU9OXSk/XCJkcmFjbzpcIitjLmJ1ZmZlclZpZXcrXCI6XCIrYy5pbmRpY2VzK1wiOlwiK1YoYy5hdHRyaWJ1dGVzKTpzLmluZGljZXMrXCI6XCIrVihzLmF0dHJpYnV0ZXMpK1wiOlwiK3MubW9kZSksbT1vW2ZdO2lmKG0pbC5wdXNoKG0ucHJvbWlzZSk7ZWxzZSBkPXAuZXh0ZW5zaW9ucyYmcC5leHRlbnNpb25zW24uS0hSX0RSQUNPX01FU0hfQ09NUFJFU1NJT05dP2EocCk6VyhuZXcgci5CdWZmZXJHZW9tZXRyeSxwLGUpLG9bZl09e3ByaW1pdGl2ZTpwLHByb21pc2U6ZH0sbC5wdXNoKGQpfXJldHVybiBQcm9taXNlLmFsbChsKX0sai5wcm90b3R5cGUubG9hZE1lc2g9ZnVuY3Rpb24odCl7Zm9yKHZhciBlLG49dGhpcyxpPXRoaXMuanNvbixvPXRoaXMuZXh0ZW5zaW9ucyxhPWkubWVzaGVzW3RdLHM9YS5wcmltaXRpdmVzLGM9W10sbD0wLHU9cy5sZW5ndGg7bDx1O2wrKyl7dmFyIGg9dm9pZCAwPT09c1tsXS5tYXRlcmlhbD8odm9pZCAwPT09KGU9dGhpcy5jYWNoZSkuRGVmYXVsdE1hdGVyaWFsJiYoZS5EZWZhdWx0TWF0ZXJpYWw9bmV3IHIuTWVzaFN0YW5kYXJkTWF0ZXJpYWwoe2NvbG9yOjE2Nzc3MjE1LGVtaXNzaXZlOjAsbWV0YWxuZXNzOjEscm91Z2huZXNzOjEsdHJhbnNwYXJlbnQ6ITEsZGVwdGhUZXN0OiEwLHNpZGU6ci5Gcm9udFNpZGV9KSksZS5EZWZhdWx0TWF0ZXJpYWwpOnRoaXMuZ2V0RGVwZW5kZW5jeShcIm1hdGVyaWFsXCIsc1tsXS5tYXRlcmlhbCk7Yy5wdXNoKGgpfXJldHVybiBjLnB1c2gobi5sb2FkR2VvbWV0cmllcyhzKSksUHJvbWlzZS5hbGwoYykudGhlbigoZnVuY3Rpb24oZSl7Zm9yKHZhciBpPWUuc2xpY2UoMCxlLmxlbmd0aC0xKSxjPWVbZS5sZW5ndGgtMV0sbD1bXSx1PTAsaD1jLmxlbmd0aDt1PGg7dSsrKXt2YXIgZCxwPWNbdV0sZj1zW3VdLG09aVt1XTtpZihmLm1vZGU9PT1FfHxmLm1vZGU9PT1BfHxmLm1vZGU9PT1MfHx2b2lkIDA9PT1mLm1vZGUpITAhPT0oZD0hMD09PWEuaXNTa2lubmVkTWVzaD9uZXcgci5Ta2lubmVkTWVzaChwLG0pOm5ldyByLk1lc2gocCxtKSkuaXNTa2lubmVkTWVzaHx8ZC5nZW9tZXRyeS5hdHRyaWJ1dGVzLnNraW5XZWlnaHQubm9ybWFsaXplZHx8ZC5ub3JtYWxpemVTa2luV2VpZ2h0cygpLGYubW9kZT09PUE/ZC5nZW9tZXRyeT1YKGQuZ2VvbWV0cnksci5UcmlhbmdsZVN0cmlwRHJhd01vZGUpOmYubW9kZT09PUwmJihkLmdlb21ldHJ5PVgoZC5nZW9tZXRyeSxyLlRyaWFuZ2xlRmFuRHJhd01vZGUpKTtlbHNlIGlmKGYubW9kZT09PU0pZD1uZXcgci5MaW5lU2VnbWVudHMocCxtKTtlbHNlIGlmKGYubW9kZT09PVQpZD1uZXcgci5MaW5lKHAsbSk7ZWxzZSBpZihmLm1vZGU9PT1TKWQ9bmV3IHIuTGluZUxvb3AocCxtKTtlbHNle2lmKGYubW9kZSE9PV8pdGhyb3cgbmV3IEVycm9yKFwiVEhSRUUuR0xURkxvYWRlcjogUHJpbWl0aXZlIG1vZGUgdW5zdXBwb3J0ZWQ6IFwiK2YubW9kZSk7ZD1uZXcgci5Qb2ludHMocCxtKX1PYmplY3Qua2V5cyhkLmdlb21ldHJ5Lm1vcnBoQXR0cmlidXRlcykubGVuZ3RoPjAmJmsoZCxhKSxkLm5hbWU9bi5jcmVhdGVVbmlxdWVOYW1lKGEubmFtZXx8XCJtZXNoX1wiK3QpLEgoZCxhKSxmLmV4dGVuc2lvbnMmJkcobyxkLGYpLG4uYXNzaWduRmluYWxNYXRlcmlhbChkKSxsLnB1c2goZCl9aWYoMT09PWwubGVuZ3RoKXJldHVybiBsWzBdO3ZhciBnPW5ldyByLkdyb3VwO2Zvcih1PTAsaD1sLmxlbmd0aDt1PGg7dSsrKWcuYWRkKGxbdV0pO3JldHVybiBnfSkpfSxqLnByb3RvdHlwZS5sb2FkQ2FtZXJhPWZ1bmN0aW9uKHQpe3ZhciBlLG49dGhpcy5qc29uLmNhbWVyYXNbdF0saT1uW24udHlwZV07aWYoaSlyZXR1cm5cInBlcnNwZWN0aXZlXCI9PT1uLnR5cGU/ZT1uZXcgci5QZXJzcGVjdGl2ZUNhbWVyYShyLk1hdGhVdGlscy5yYWRUb0RlZyhpLnlmb3YpLGkuYXNwZWN0UmF0aW98fDEsaS56bmVhcnx8MSxpLnpmYXJ8fDJlNik6XCJvcnRob2dyYXBoaWNcIj09PW4udHlwZSYmKGU9bmV3IHIuT3J0aG9ncmFwaGljQ2FtZXJhKC1pLnhtYWcsaS54bWFnLGkueW1hZywtaS55bWFnLGkuem5lYXIsaS56ZmFyKSksbi5uYW1lJiYoZS5uYW1lPXRoaXMuY3JlYXRlVW5pcXVlTmFtZShuLm5hbWUpKSxIKGUsbiksUHJvbWlzZS5yZXNvbHZlKGUpO2NvbnNvbGUud2FybihcIlRIUkVFLkdMVEZMb2FkZXI6IE1pc3NpbmcgY2FtZXJhIHBhcmFtZXRlcnMuXCIpfSxqLnByb3RvdHlwZS5sb2FkU2tpbj1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmpzb24uc2tpbnNbdF0sbj17am9pbnRzOmUuam9pbnRzfTtyZXR1cm4gdm9pZCAwPT09ZS5pbnZlcnNlQmluZE1hdHJpY2VzP1Byb21pc2UucmVzb2x2ZShuKTp0aGlzLmdldERlcGVuZGVuY3koXCJhY2Nlc3NvclwiLGUuaW52ZXJzZUJpbmRNYXRyaWNlcykudGhlbigoZnVuY3Rpb24odCl7cmV0dXJuIG4uaW52ZXJzZUJpbmRNYXRyaWNlcz10LG59KSl9LGoucHJvdG90eXBlLmxvYWRBbmltYXRpb249ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMuanNvbi5hbmltYXRpb25zW3RdLG49W10saT1bXSxvPVtdLGE9W10scz1bXSxjPTAsbD1lLmNoYW5uZWxzLmxlbmd0aDtjPGw7YysrKXt2YXIgdT1lLmNoYW5uZWxzW2NdLGg9ZS5zYW1wbGVyc1t1LnNhbXBsZXJdLGQ9dS50YXJnZXQscD12b2lkIDAhPT1kLm5vZGU/ZC5ub2RlOmQuaWQsZj12b2lkIDAhPT1lLnBhcmFtZXRlcnM/ZS5wYXJhbWV0ZXJzW2guaW5wdXRdOmguaW5wdXQsbT12b2lkIDAhPT1lLnBhcmFtZXRlcnM/ZS5wYXJhbWV0ZXJzW2gub3V0cHV0XTpoLm91dHB1dDtuLnB1c2godGhpcy5nZXREZXBlbmRlbmN5KFwibm9kZVwiLHApKSxpLnB1c2godGhpcy5nZXREZXBlbmRlbmN5KFwiYWNjZXNzb3JcIixmKSksby5wdXNoKHRoaXMuZ2V0RGVwZW5kZW5jeShcImFjY2Vzc29yXCIsbSkpLGEucHVzaChoKSxzLnB1c2goZCl9cmV0dXJuIFByb21pc2UuYWxsKFtQcm9taXNlLmFsbChuKSxQcm9taXNlLmFsbChpKSxQcm9taXNlLmFsbChvKSxQcm9taXNlLmFsbChhKSxQcm9taXNlLmFsbChzKV0pLnRoZW4oKGZ1bmN0aW9uKG4pe2Zvcih2YXIgaT1uWzBdLG89blsxXSxhPW5bMl0scz1uWzNdLGM9bls0XSxsPVtdLHU9MCxoPWkubGVuZ3RoO3U8aDt1Kyspe3ZhciBkPWlbdV0scD1vW3VdLGY9YVt1XSxtPXNbdV0sZz1jW3VdO2lmKHZvaWQgMCE9PWQpe3ZhciB2O3N3aXRjaChkLnVwZGF0ZU1hdHJpeCgpLGQubWF0cml4QXV0b1VwZGF0ZT0hMCxOW2cucGF0aF0pe2Nhc2UgTi53ZWlnaHRzOnY9ci5OdW1iZXJLZXlmcmFtZVRyYWNrO2JyZWFrO2Nhc2UgTi5yb3RhdGlvbjp2PXIuUXVhdGVybmlvbktleWZyYW1lVHJhY2s7YnJlYWs7Y2FzZSBOLnBvc2l0aW9uOmNhc2UgTi5zY2FsZTpkZWZhdWx0OnY9ci5WZWN0b3JLZXlmcmFtZVRyYWNrfXZhciB5PWQubmFtZT9kLm5hbWU6ZC51dWlkLHg9dm9pZCAwIT09bS5pbnRlcnBvbGF0aW9uP0RbbS5pbnRlcnBvbGF0aW9uXTpyLkludGVycG9sYXRlTGluZWFyLGI9W107TltnLnBhdGhdPT09Ti53ZWlnaHRzP2QudHJhdmVyc2UoKGZ1bmN0aW9uKHQpeyEwPT09dC5pc01lc2gmJnQubW9ycGhUYXJnZXRJbmZsdWVuY2VzJiZiLnB1c2godC5uYW1lP3QubmFtZTp0LnV1aWQpfSkpOmIucHVzaCh5KTt2YXIgXz1mLmFycmF5O2lmKGYubm9ybWFsaXplZCl7dmFyIE07aWYoXy5jb25zdHJ1Y3Rvcj09PUludDhBcnJheSlNPTEvMTI3O2Vsc2UgaWYoXy5jb25zdHJ1Y3Rvcj09PVVpbnQ4QXJyYXkpTT0xLzI1NTtlbHNlIGlmKF8uY29uc3RydWN0b3I9PUludDE2QXJyYXkpTT0xLzMyNzY3O2Vsc2V7aWYoXy5jb25zdHJ1Y3RvciE9PVVpbnQxNkFycmF5KXRocm93IG5ldyBFcnJvcihcIlRIUkVFLkdMVEZMb2FkZXI6IFVuc3VwcG9ydGVkIG91dHB1dCBhY2Nlc3NvciBjb21wb25lbnQgdHlwZS5cIik7TT0xLzY1NTM1fWZvcih2YXIgUz1uZXcgRmxvYXQzMkFycmF5KF8ubGVuZ3RoKSxUPTAsRT1fLmxlbmd0aDtUPEU7VCsrKVNbVF09X1tUXSpNO189U31mb3IoVD0wLEU9Yi5sZW5ndGg7VDxFO1QrKyl7dmFyIEE9bmV3IHYoYltUXStcIi5cIitOW2cucGF0aF0scC5hcnJheSxfLHgpO1wiQ1VCSUNTUExJTkVcIj09PW0uaW50ZXJwb2xhdGlvbiYmKEEuY3JlYXRlSW50ZXJwb2xhbnQ9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyB3KHRoaXMudGltZXMsdGhpcy52YWx1ZXMsdGhpcy5nZXRWYWx1ZVNpemUoKS8zLHQpfSxBLmNyZWF0ZUludGVycG9sYW50LmlzSW50ZXJwb2xhbnRGYWN0b3J5TWV0aG9kR0xURkN1YmljU3BsaW5lPSEwKSxsLnB1c2goQSl9fX12YXIgTD1lLm5hbWU/ZS5uYW1lOlwiYW5pbWF0aW9uX1wiK3Q7cmV0dXJuIG5ldyByLkFuaW1hdGlvbkNsaXAoTCx2b2lkIDAsbCl9KSl9LGoucHJvdG90eXBlLmxvYWROb2RlPWZ1bmN0aW9uKHQpe3ZhciBlLG49dGhpcy5qc29uLGk9dGhpcy5leHRlbnNpb25zLG89dGhpcyxhPW4ubm9kZXNbdF0scz1hLm5hbWU/by5jcmVhdGVVbmlxdWVOYW1lKGEubmFtZSk6XCJcIjtyZXR1cm4oZT1bXSx2b2lkIDAhPT1hLm1lc2gmJmUucHVzaChvLmdldERlcGVuZGVuY3koXCJtZXNoXCIsYS5tZXNoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgZT1vLl9nZXROb2RlUmVmKG8ubWVzaENhY2hlLGEubWVzaCx0KTtyZXR1cm4gdm9pZCAwIT09YS53ZWlnaHRzJiZlLnRyYXZlcnNlKChmdW5jdGlvbih0KXtpZih0LmlzTWVzaClmb3IodmFyIGU9MCxuPWEud2VpZ2h0cy5sZW5ndGg7ZTxuO2UrKyl0Lm1vcnBoVGFyZ2V0SW5mbHVlbmNlc1tlXT1hLndlaWdodHNbZV19KSksZX0pKSksdm9pZCAwIT09YS5jYW1lcmEmJmUucHVzaChvLmdldERlcGVuZGVuY3koXCJjYW1lcmFcIixhLmNhbWVyYSkudGhlbigoZnVuY3Rpb24odCl7cmV0dXJuIG8uX2dldE5vZGVSZWYoby5jYW1lcmFDYWNoZSxhLmNhbWVyYSx0KX0pKSksby5faW52b2tlQWxsKChmdW5jdGlvbihlKXtyZXR1cm4gZS5jcmVhdGVOb2RlQXR0YWNobWVudCYmZS5jcmVhdGVOb2RlQXR0YWNobWVudCh0KX0pKS5mb3JFYWNoKChmdW5jdGlvbih0KXtlLnB1c2godCl9KSksUHJvbWlzZS5hbGwoZSkpLnRoZW4oKGZ1bmN0aW9uKGUpe3ZhciBuO2lmKChuPSEwPT09YS5pc0JvbmU/bmV3IHIuQm9uZTplLmxlbmd0aD4xP25ldyByLkdyb3VwOjE9PT1lLmxlbmd0aD9lWzBdOm5ldyByLk9iamVjdDNEKSE9PWVbMF0pZm9yKHZhciBjPTAsbD1lLmxlbmd0aDtjPGw7YysrKW4uYWRkKGVbY10pO2lmKGEubmFtZSYmKG4udXNlckRhdGEubmFtZT1hLm5hbWUsbi5uYW1lPXMpLEgobixhKSxhLmV4dGVuc2lvbnMmJkcoaSxuLGEpLHZvaWQgMCE9PWEubWF0cml4KXt2YXIgdT1uZXcgci5NYXRyaXg0O3UuZnJvbUFycmF5KGEubWF0cml4KSxuLmFwcGx5TWF0cml4NCh1KX1lbHNlIHZvaWQgMCE9PWEudHJhbnNsYXRpb24mJm4ucG9zaXRpb24uZnJvbUFycmF5KGEudHJhbnNsYXRpb24pLHZvaWQgMCE9PWEucm90YXRpb24mJm4ucXVhdGVybmlvbi5mcm9tQXJyYXkoYS5yb3RhdGlvbiksdm9pZCAwIT09YS5zY2FsZSYmbi5zY2FsZS5mcm9tQXJyYXkoYS5zY2FsZSk7cmV0dXJuIG8uYXNzb2NpYXRpb25zLnNldChuLHt0eXBlOlwibm9kZXNcIixpbmRleDp0fSksbn0pKX0sai5wcm90b3R5cGUubG9hZFNjZW5lPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlLG4saSxvKXt2YXIgYT1pLm5vZGVzW2VdO3JldHVybiBvLmdldERlcGVuZGVuY3koXCJub2RlXCIsZSkudGhlbigoZnVuY3Rpb24odCl7cmV0dXJuIHZvaWQgMD09PWEuc2tpbj90Om8uZ2V0RGVwZW5kZW5jeShcInNraW5cIixhLnNraW4pLnRoZW4oKGZ1bmN0aW9uKHQpe2Zvcih2YXIgbj1bXSxyPTAsaT0oZT10KS5qb2ludHMubGVuZ3RoO3I8aTtyKyspbi5wdXNoKG8uZ2V0RGVwZW5kZW5jeShcIm5vZGVcIixlLmpvaW50c1tyXSkpO3JldHVybiBQcm9taXNlLmFsbChuKX0pKS50aGVuKChmdW5jdGlvbihuKXtyZXR1cm4gdC50cmF2ZXJzZSgoZnVuY3Rpb24odCl7aWYodC5pc01lc2gpe2Zvcih2YXIgaT1bXSxvPVtdLGE9MCxzPW4ubGVuZ3RoO2E8czthKyspe3ZhciBjPW5bYV07aWYoYyl7aS5wdXNoKGMpO3ZhciBsPW5ldyByLk1hdHJpeDQ7dm9pZCAwIT09ZS5pbnZlcnNlQmluZE1hdHJpY2VzJiZsLmZyb21BcnJheShlLmludmVyc2VCaW5kTWF0cmljZXMuYXJyYXksMTYqYSksby5wdXNoKGwpfWVsc2UgY29uc29sZS53YXJuKCdUSFJFRS5HTFRGTG9hZGVyOiBKb2ludCBcIiVzXCIgY291bGQgbm90IGJlIGZvdW5kLicsZS5qb2ludHNbYV0pfXQuYmluZChuZXcgci5Ta2VsZXRvbihpLG8pLHQubWF0cml4V29ybGQpfX0pKSx0fSkpO3ZhciBlfSkpLnRoZW4oKGZ1bmN0aW9uKGUpe24uYWRkKGUpO3ZhciByPVtdO2lmKGEuY2hpbGRyZW4pZm9yKHZhciBzPWEuY2hpbGRyZW4sYz0wLGw9cy5sZW5ndGg7YzxsO2MrKyl7dmFyIHU9c1tjXTtyLnB1c2godCh1LGUsaSxvKSl9cmV0dXJuIFByb21pc2UuYWxsKHIpfSkpfXJldHVybiBmdW5jdGlvbihlKXt2YXIgbj10aGlzLmpzb24saT10aGlzLmV4dGVuc2lvbnMsbz10aGlzLmpzb24uc2NlbmVzW2VdLGE9bmV3IHIuR3JvdXA7by5uYW1lJiYoYS5uYW1lPXRoaXMuY3JlYXRlVW5pcXVlTmFtZShvLm5hbWUpKSxIKGEsbyksby5leHRlbnNpb25zJiZHKGksYSxvKTtmb3IodmFyIHM9by5ub2Rlc3x8W10sYz1bXSxsPTAsdT1zLmxlbmd0aDtsPHU7bCsrKWMucHVzaCh0KHNbbF0sYSxuLHRoaXMpKTtyZXR1cm4gUHJvbWlzZS5hbGwoYykudGhlbigoZnVuY3Rpb24oKXtyZXR1cm4gYX0pKX19KCksdH0oKX0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO3ZhciByPXRoaXMmJnRoaXMuX19jcmVhdGVCaW5kaW5nfHwoT2JqZWN0LmNyZWF0ZT9mdW5jdGlvbih0LGUsbixyKXt2b2lkIDA9PT1yJiYocj1uKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxyLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBlW25dfX0pfTpmdW5jdGlvbih0LGUsbixyKXt2b2lkIDA9PT1yJiYocj1uKSx0W3JdPWVbbl19KSxpPXRoaXMmJnRoaXMuX19leHBvcnRTdGFyfHxmdW5jdGlvbih0LGUpe2Zvcih2YXIgbiBpbiB0KVwiZGVmYXVsdFwiPT09bnx8T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsbil8fHIoZSx0LG4pfTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxlLkRvdFNjcmVlblNoYWRlcj1lLkdsaXRjaFBhc3M9ZS5TaGFkZXJQYXNzPWUuUmVuZGVyUGFzcz1lLkVmZmVjdENvbXBvc2VyPWUuV0VCR0w9ZS5PcmJpdENvbnRyb2xzPWUuV2F0ZXI9ZS5Ta3k9ZS5BbmltYXRpb25BY3Rpb249ZS5WUkJ1dHRvbj1lLlNWR0xvYWRlcj1lLlhSQ29udHJvbGxlck1vZGVsRmFjdG9yeT1lLkdMVEZMb2FkZXI9ZS5GQlhMb2FkZXI9ZS5Db252ZXhCdWZmZXJHZW9tZXRyeT12b2lkIDAsaShuKDApLGUpO2NvbnN0IG89bigxNSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJDb252ZXhCdWZmZXJHZW9tZXRyeVwiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBvLkNvbnZleEJ1ZmZlckdlb21ldHJ5fX0pO2NvbnN0IGE9bigxMik7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJGQlhMb2FkZXJcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gYS5GQlhMb2FkZXJ9fSk7Y29uc3Qgcz1uKDMpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiR0xURkxvYWRlclwiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBzLkdMVEZMb2FkZXJ9fSk7Y29uc3QgYz1uKDE2KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIlhSQ29udHJvbGxlck1vZGVsRmFjdG9yeVwiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBjLlhSQ29udHJvbGxlck1vZGVsRmFjdG9yeX19KTtjb25zdCBsPW4oNSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJTVkdMb2FkZXJcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbC5TVkdMb2FkZXJ9fSk7Y29uc3QgdT1uKDYpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiVlJCdXR0b25cIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdS5WUkJ1dHRvbn19KTtjb25zdCBoPW4oMTcpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiQW5pbWF0aW9uQWN0aW9uXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGguQW5pbWF0aW9uQWN0aW9ufX0pO2NvbnN0IGQ9big3KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIlNreVwiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBkLlNreX19KTtjb25zdCBwPW4oMTMpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiV2F0ZXJcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gcC5XYXRlcn19KTtjb25zdCBmPW4oOCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJPcmJpdENvbnRyb2xzXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGYuT3JiaXRDb250cm9sc319KTtjb25zdCBtPW4oOSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJXRUJHTFwiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBtLldFQkdMfX0pO3ZhciBnPW4oMTQpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiRWZmZWN0Q29tcG9zZXJcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZy5FZmZlY3RDb21wb3Nlcn19KTt2YXIgdj1uKDEwKTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIlJlbmRlclBhc3NcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdi5SZW5kZXJQYXNzfX0pO3ZhciB5PW4oMik7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJTaGFkZXJQYXNzXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHkuU2hhZGVyUGFzc319KTt2YXIgeD1uKDE4KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIkdsaXRjaFBhc3NcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4geC5HbGl0Y2hQYXNzfX0pO3ZhciBiPW4oMTEpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiRG90U2NyZWVuU2hhZGVyXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGIuRG90U2NyZWVuU2hhZGVyfX0pO2NvbnN0IHc9XCJUaHJlZS5qcyByXCIrbigwKS5SRVZJU0lPTjtjb25zb2xlLmxvZyhgJWMgJWMgJWMgJWMgJWMgJHt3fSAlYyBodHRwczovL3RocmVlanMub3JnL2AsXCJiYWNrZ3JvdW5kOiAjZmYwMDAwXCIsXCJiYWNrZ3JvdW5kOiAjZmZmZjAwXCIsXCJiYWNrZ3JvdW5kOiAjMDBmZjAwXCIsXCJiYWNrZ3JvdW5kOiAjMDBmZmZmXCIsXCJjb2xvcjogI2ZmZjsgYmFja2dyb3VuZDogIzAwMDAwMDtcIixcImJhY2tncm91bmQ6IG5vbmVcIil9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtuLnIoZSksbi5kKGUsXCJTVkdMb2FkZXJcIiwoZnVuY3Rpb24oKXtyZXR1cm4gd30pKTt2YXIgcixpLG8sYSxzLGMsbCx1LGgsZCxwLGYsbSxnLHYseSx4LGI9bigwKSx3PWZ1bmN0aW9uKHQpe2IuTG9hZGVyLmNhbGwodGhpcyx0KSx0aGlzLmRlZmF1bHREUEk9OTAsdGhpcy5kZWZhdWx0VW5pdD1cInB4XCJ9O3cucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShiLkxvYWRlci5wcm90b3R5cGUpLHtjb25zdHJ1Y3Rvcjp3LGxvYWQ6ZnVuY3Rpb24odCxlLG4scil7dmFyIGk9dGhpcyxvPW5ldyBiLkZpbGVMb2FkZXIoaS5tYW5hZ2VyKTtvLnNldFBhdGgoaS5wYXRoKSxvLnNldFJlcXVlc3RIZWFkZXIoaS5yZXF1ZXN0SGVhZGVyKSxvLnNldFdpdGhDcmVkZW50aWFscyhpLndpdGhDcmVkZW50aWFscyksby5sb2FkKHQsKGZ1bmN0aW9uKG4pe3RyeXtlKGkucGFyc2UobikpfWNhdGNoKGUpe3I/cihlKTpjb25zb2xlLmVycm9yKGUpLGkubWFuYWdlci5pdGVtRXJyb3IodCl9fSksbixyKX0scGFyc2U6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztmdW5jdGlvbiBuKHQsZSxuLGksbyxhLHMsYyl7aWYoMCE9ZSYmMCE9bil7aT1pKk1hdGguUEkvMTgwLGU9TWF0aC5hYnMoZSksbj1NYXRoLmFicyhuKTt2YXIgbD0ocy54LWMueCkvMix1PShzLnktYy55KS8yLGg9TWF0aC5jb3MoaSkqbCtNYXRoLnNpbihpKSp1LGQ9LU1hdGguc2luKGkpKmwrTWF0aC5jb3MoaSkqdSxwPWUqZSxmPW4qbixtPWgqaCxnPWQqZCx2PW0vcCtnL2Y7aWYodj4xKXt2YXIgeT1NYXRoLnNxcnQodik7cD0oZSo9eSkqZSxmPShuKj15KSpufXZhciB4PXAqZytmKm0sYj0ocCpmLXgpL3gsdz1NYXRoLnNxcnQoTWF0aC5tYXgoMCxiKSk7bz09PWEmJih3PS13KTt2YXIgXz13KmUqZC9uLE09LXcqbipoL2UsUz1NYXRoLmNvcyhpKSpfLU1hdGguc2luKGkpKk0rKHMueCtjLngpLzIsVD1NYXRoLnNpbihpKSpfK01hdGguY29zKGkpKk0rKHMueStjLnkpLzIsRT1yKDEsMCwoaC1fKS9lLChkLU0pL24pLEE9cigoaC1fKS9lLChkLU0pL24sKC1oLV8pL2UsKC1kLU0pL24pJSgyKk1hdGguUEkpO3QuY3VycmVudFBhdGguYWJzZWxsaXBzZShTLFQsZSxuLEUsRStBLDA9PT1hLGkpfWVsc2UgdC5saW5lVG8oYy54LGMueSl9ZnVuY3Rpb24gcih0LGUsbixyKXt2YXIgaT10Km4rZSpyLG89TWF0aC5zcXJ0KHQqdCtlKmUpKk1hdGguc3FydChuKm4rcipyKSxhPU1hdGguYWNvcyhNYXRoLm1heCgtMSxNYXRoLm1pbigxLGkvbykpKTtyZXR1cm4gdCpyLWUqbjwwJiYoYT0tYSksYX1mdW5jdGlvbiBpKHQsZSl7ZT1PYmplY3QuYXNzaWduKHt9LGUpO3ZhciBuPXt9O2lmKHQuaGFzQXR0cmlidXRlKFwiY2xhc3NcIikpZm9yKHZhciByPXQuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIikuc3BsaXQoL1xccy8pLmZpbHRlcihCb29sZWFuKS5tYXAodD0+dC50cmltKCkpLGk9MDtpPHIubGVuZ3RoO2krKyluPU9iamVjdC5hc3NpZ24obixwW1wiLlwiK3JbaV1dKTtmdW5jdGlvbiBvKHIsaSxvKXt2b2lkIDA9PT1vJiYobz1mdW5jdGlvbih0KXtyZXR1cm4gdC5zdGFydHNXaXRoKFwidXJsXCIpJiZjb25zb2xlLndhcm4oXCJTVkdMb2FkZXI6IHVybCBhY2Nlc3MgaW4gYXR0cmlidXRlcyBpcyBub3QgaW1wbGVtZW50ZWQuXCIpLHR9KSx0Lmhhc0F0dHJpYnV0ZShyKSYmKGVbaV09byh0LmdldEF0dHJpYnV0ZShyKSkpLG5bcl0mJihlW2ldPW8obltyXSkpLHQuc3R5bGUmJlwiXCIhPT10LnN0eWxlW3JdJiYoZVtpXT1vKHQuc3R5bGVbcl0pKX1mdW5jdGlvbiBhKHQpe3JldHVybiBNYXRoLm1heCgwLE1hdGgubWluKDEsbCh0KSkpfWZ1bmN0aW9uIHModCl7cmV0dXJuIE1hdGgubWF4KDAsbCh0KSl9cmV0dXJuIHQuaGFzQXR0cmlidXRlKFwiaWRcIikmJihuPU9iamVjdC5hc3NpZ24obixwW1wiI1wiK3QuZ2V0QXR0cmlidXRlKFwiaWRcIildKSksbyhcImZpbGxcIixcImZpbGxcIiksbyhcImZpbGwtb3BhY2l0eVwiLFwiZmlsbE9wYWNpdHlcIixhKSxvKFwib3BhY2l0eVwiLFwib3BhY2l0eVwiLGEpLG8oXCJzdHJva2VcIixcInN0cm9rZVwiKSxvKFwic3Ryb2tlLW9wYWNpdHlcIixcInN0cm9rZU9wYWNpdHlcIixhKSxvKFwic3Ryb2tlLXdpZHRoXCIsXCJzdHJva2VXaWR0aFwiLHMpLG8oXCJzdHJva2UtbGluZWpvaW5cIixcInN0cm9rZUxpbmVKb2luXCIpLG8oXCJzdHJva2UtbGluZWNhcFwiLFwic3Ryb2tlTGluZUNhcFwiKSxvKFwic3Ryb2tlLW1pdGVybGltaXRcIixcInN0cm9rZU1pdGVyTGltaXRcIixzKSxvKFwidmlzaWJpbGl0eVwiLFwidmlzaWJpbGl0eVwiKSxlfWZ1bmN0aW9uIG8odCxlKXtyZXR1cm4gdC0oZS10KX1mdW5jdGlvbiBhKHQpe2Zvcih2YXIgZT10LnNwbGl0KC9bXFxzLF0rfCg/PVxccz9bK1xcLV0pLyksbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgcj1lW25dO2lmKHIuaW5kZXhPZihcIi5cIikhPT1yLmxhc3RJbmRleE9mKFwiLlwiKSlmb3IodmFyIGk9ci5zcGxpdChcIi5cIiksbz0yO288aS5sZW5ndGg7bysrKWUuc3BsaWNlKG4rby0xLDAsXCIwLlwiK2lbb10pO2Vbbl09bChyKX1yZXR1cm4gZX12YXIgcz1bXCJtbVwiLFwiY21cIixcImluXCIsXCJwdFwiLFwicGNcIixcInB4XCJdLGM9e21tOnttbToxLGNtOi4xLGluOjEvMjUuNCxwdDo3Mi8yNS40LHBjOjYvMjUuNCxweDotMX0sY206e21tOjEwLGNtOjEsaW46MS8yLjU0LHB0OjcyLzIuNTQscGM6Ni8yLjU0LHB4Oi0xfSxpbjp7bW06MjUuNCxjbToyLjU0LGluOjEscHQ6NzIscGM6NixweDotMX0scHQ6e21tOjI1LjQvNzIsY206Mi41NC83MixpbjoxLzcyLHB0OjEscGM6Ni83MixweDotMX0scGM6e21tOjI1LjQvNixjbToyLjU0LzYsaW46MS82LHB0OjEyLHBjOjEscHg6LTF9LHB4OntweDoxfX07ZnVuY3Rpb24gbCh0KXt2YXIgbj1cInB4XCI7aWYoXCJzdHJpbmdcIj09dHlwZW9mIHR8fHQgaW5zdGFuY2VvZiBTdHJpbmcpZm9yKHZhciByPTAsaT1zLmxlbmd0aDtyPGk7cisrKXt2YXIgbz1zW3JdO2lmKHQuZW5kc1dpdGgobykpe249byx0PXQuc3Vic3RyaW5nKDAsdC5sZW5ndGgtby5sZW5ndGgpO2JyZWFrfX12YXIgYT12b2lkIDA7cmV0dXJuXCJweFwiPT09biYmXCJweFwiIT09ZS5kZWZhdWx0VW5pdD9hPWMuaW5bZS5kZWZhdWx0VW5pdF0vZS5kZWZhdWx0RFBJOihhPWNbbl1bZS5kZWZhdWx0VW5pdF0pPDAmJihhPWNbbl0uaW4qZS5kZWZhdWx0RFBJKSxhKnBhcnNlRmxvYXQodCl9ZnVuY3Rpb24gdSh0KXt2YXIgZT10LmVsZW1lbnRzO3JldHVybiBNYXRoLnNxcnQoZVswXSplWzBdK2VbMV0qZVsxXSl9ZnVuY3Rpb24gaCh0KXt2YXIgZT10LmVsZW1lbnRzO3JldHVybiBNYXRoLnNxcnQoZVszXSplWzNdK2VbNF0qZVs0XSl9dmFyIGQ9W10scD17fSxmPVtdLG09bmV3IGIuTWF0cml4MyxnPW5ldyBiLk1hdHJpeDMsdj1uZXcgYi5NYXRyaXgzLHk9bmV3IGIuTWF0cml4Myx4PW5ldyBiLlZlY3RvcjIsdz1uZXcgYi5WZWN0b3IzLF89bmV3IGIuTWF0cml4MyxNPShuZXcgRE9NUGFyc2VyKS5wYXJzZUZyb21TdHJpbmcodCxcImltYWdlL3N2Zyt4bWxcIik7cmV0dXJuIGZ1bmN0aW9uIHQoZSxyKXtpZigxPT09ZS5ub2RlVHlwZSl7dmFyIHM9ZnVuY3Rpb24odCl7aWYoISh0Lmhhc0F0dHJpYnV0ZShcInRyYW5zZm9ybVwiKXx8XCJ1c2VcIj09PXQubm9kZU5hbWUmJih0Lmhhc0F0dHJpYnV0ZShcInhcIil8fHQuaGFzQXR0cmlidXRlKFwieVwiKSkpKXJldHVybiBudWxsO3ZhciBlPWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBiLk1hdHJpeDMsbj1tO2lmKFwidXNlXCI9PT10Lm5vZGVOYW1lJiYodC5oYXNBdHRyaWJ1dGUoXCJ4XCIpfHx0Lmhhc0F0dHJpYnV0ZShcInlcIikpKXt2YXIgcj1sKHQuZ2V0QXR0cmlidXRlKFwieFwiKSksaT1sKHQuZ2V0QXR0cmlidXRlKFwieVwiKSk7ZS50cmFuc2xhdGUocixpKX1pZih0Lmhhc0F0dHJpYnV0ZShcInRyYW5zZm9ybVwiKSlmb3IodmFyIG89dC5nZXRBdHRyaWJ1dGUoXCJ0cmFuc2Zvcm1cIikuc3BsaXQoXCIpXCIpLHM9by5sZW5ndGgtMTtzPj0wO3MtLSl7dmFyIGM9b1tzXS50cmltKCk7aWYoXCJcIiE9PWMpe3ZhciB1PWMuaW5kZXhPZihcIihcIiksaD1jLmxlbmd0aDtpZih1PjAmJnU8aCl7dmFyIGQ9Yy5zdWJzdHIoMCx1KSxwPWEoYy5zdWJzdHIodSsxLGgtdS0xKSk7c3dpdGNoKG4uaWRlbnRpdHkoKSxkKXtjYXNlXCJ0cmFuc2xhdGVcIjppZihwLmxlbmd0aD49MSl7aT1yPXBbMF07cC5sZW5ndGg+PTImJihpPXBbMV0pLG4udHJhbnNsYXRlKHIsaSl9YnJlYWs7Y2FzZVwicm90YXRlXCI6aWYocC5sZW5ndGg+PTEpe3ZhciBmLHg9MCx3PTA7Zj0tcFswXSpNYXRoLlBJLzE4MCxwLmxlbmd0aD49MyYmKHg9cFsxXSx3PXBbMl0pLGcuaWRlbnRpdHkoKS50cmFuc2xhdGUoLXgsLXcpLHYuaWRlbnRpdHkoKS5yb3RhdGUoZikseS5tdWx0aXBseU1hdHJpY2VzKHYsZyksZy5pZGVudGl0eSgpLnRyYW5zbGF0ZSh4LHcpLG4ubXVsdGlwbHlNYXRyaWNlcyhnLHkpfWJyZWFrO2Nhc2VcInNjYWxlXCI6aWYocC5sZW5ndGg+PTEpe3ZhciBfPXBbMF0sTT1fO3AubGVuZ3RoPj0yJiYoTT1wWzFdKSxuLnNjYWxlKF8sTSl9YnJlYWs7Y2FzZVwic2tld1hcIjoxPT09cC5sZW5ndGgmJm4uc2V0KDEsTWF0aC50YW4ocFswXSpNYXRoLlBJLzE4MCksMCwwLDEsMCwwLDAsMSk7YnJlYWs7Y2FzZVwic2tld1lcIjoxPT09cC5sZW5ndGgmJm4uc2V0KDEsMCwwLE1hdGgudGFuKHBbMF0qTWF0aC5QSS8xODApLDEsMCwwLDAsMSk7YnJlYWs7Y2FzZVwibWF0cml4XCI6Nj09PXAubGVuZ3RoJiZuLnNldChwWzBdLHBbMl0scFs0XSxwWzFdLHBbM10scFs1XSwwLDAsMSl9fWUucHJlbXVsdGlwbHkobil9fXJldHVybiBlfSh0KTtmLmxlbmd0aD4wJiZlLnByZW11bHRpcGx5KGZbZi5sZW5ndGgtMV0pO3JldHVybiBfLmNvcHkoZSksZi5wdXNoKGUpLGV9KGUpLGM9ITAsTT1udWxsO3N3aXRjaChlLm5vZGVOYW1lKXtjYXNlXCJzdmdcIjpicmVhaztjYXNlXCJzdHlsZVwiOiFmdW5jdGlvbih0KXtpZighdC5zaGVldHx8IXQuc2hlZXQuY3NzUnVsZXN8fCF0LnNoZWV0LmNzc1J1bGVzLmxlbmd0aClyZXR1cm47Zm9yKHZhciBlPTA7ZTx0LnNoZWV0LmNzc1J1bGVzLmxlbmd0aDtlKyspe3ZhciBuPXQuc2hlZXQuY3NzUnVsZXNbZV07aWYoMT09PW4udHlwZSlmb3IodmFyIHI9bi5zZWxlY3RvclRleHQuc3BsaXQoLywvZ20pLmZpbHRlcihCb29sZWFuKS5tYXAodD0+dC50cmltKCkpLGk9MDtpPHIubGVuZ3RoO2krKylwW3JbaV1dPU9iamVjdC5hc3NpZ24ocFtyW2ldXXx8e30sbi5zdHlsZSl9fShlKTticmVhaztjYXNlXCJnXCI6cj1pKGUscik7YnJlYWs7Y2FzZVwicGF0aFwiOnI9aShlLHIpLGUuaGFzQXR0cmlidXRlKFwiZFwiKSYmKE09ZnVuY3Rpb24odCl7Zm9yKHZhciBlPW5ldyBiLlNoYXBlUGF0aCxyPW5ldyBiLlZlY3RvcjIsaT1uZXcgYi5WZWN0b3IyLHM9bmV3IGIuVmVjdG9yMixjPSEwLGw9ITEsdT10LmdldEF0dHJpYnV0ZShcImRcIikubWF0Y2goL1thLWRmLXpdW15hLWRmLXpdKi9naSksaD0wLGQ9dS5sZW5ndGg7aDxkO2grKyl7dmFyIHA9dVtoXSxmPXAuY2hhckF0KDApLG09cC5zdWJzdHIoMSkudHJpbSgpO3N3aXRjaCghMD09PWMmJihsPSEwLGM9ITEpLGYpe2Nhc2VcIk1cIjpmb3IodmFyIGc9YShtKSx2PTAseT1nLmxlbmd0aDt2PHk7dis9MilyLng9Z1t2KzBdLHIueT1nW3YrMV0saS54PXIueCxpLnk9ci55LDA9PT12P2UubW92ZVRvKHIueCxyLnkpOmUubGluZVRvKHIueCxyLnkpLDA9PT12JiYhMD09PWwmJnMuY29weShyKTticmVhaztjYXNlXCJIXCI6Zm9yKGc9YShtKSx2PTAseT1nLmxlbmd0aDt2PHk7disrKXIueD1nW3ZdLGkueD1yLngsaS55PXIueSxlLmxpbmVUbyhyLngsci55KSwwPT09diYmITA9PT1sJiZzLmNvcHkocik7YnJlYWs7Y2FzZVwiVlwiOmZvcihnPWEobSksdj0wLHk9Zy5sZW5ndGg7djx5O3YrKylyLnk9Z1t2XSxpLng9ci54LGkueT1yLnksZS5saW5lVG8oci54LHIueSksMD09PXYmJiEwPT09bCYmcy5jb3B5KHIpO2JyZWFrO2Nhc2VcIkxcIjpmb3IoZz1hKG0pLHY9MCx5PWcubGVuZ3RoO3Y8eTt2Kz0yKXIueD1nW3YrMF0sci55PWdbdisxXSxpLng9ci54LGkueT1yLnksZS5saW5lVG8oci54LHIueSksMD09PXYmJiEwPT09bCYmcy5jb3B5KHIpO2JyZWFrO2Nhc2VcIkNcIjpmb3IoZz1hKG0pLHY9MCx5PWcubGVuZ3RoO3Y8eTt2Kz02KWUuYmV6aWVyQ3VydmVUbyhnW3YrMF0sZ1t2KzFdLGdbdisyXSxnW3YrM10sZ1t2KzRdLGdbdis1XSksaS54PWdbdisyXSxpLnk9Z1t2KzNdLHIueD1nW3YrNF0sci55PWdbdis1XSwwPT09diYmITA9PT1sJiZzLmNvcHkocik7YnJlYWs7Y2FzZVwiU1wiOmZvcihnPWEobSksdj0wLHk9Zy5sZW5ndGg7djx5O3YrPTQpZS5iZXppZXJDdXJ2ZVRvKG8oci54LGkueCksbyhyLnksaS55KSxnW3YrMF0sZ1t2KzFdLGdbdisyXSxnW3YrM10pLGkueD1nW3YrMF0saS55PWdbdisxXSxyLng9Z1t2KzJdLHIueT1nW3YrM10sMD09PXYmJiEwPT09bCYmcy5jb3B5KHIpO2JyZWFrO2Nhc2VcIlFcIjpmb3IoZz1hKG0pLHY9MCx5PWcubGVuZ3RoO3Y8eTt2Kz00KWUucXVhZHJhdGljQ3VydmVUbyhnW3YrMF0sZ1t2KzFdLGdbdisyXSxnW3YrM10pLGkueD1nW3YrMF0saS55PWdbdisxXSxyLng9Z1t2KzJdLHIueT1nW3YrM10sMD09PXYmJiEwPT09bCYmcy5jb3B5KHIpO2JyZWFrO2Nhc2VcIlRcIjpmb3IoZz1hKG0pLHY9MCx5PWcubGVuZ3RoO3Y8eTt2Kz0yKXt2YXIgeD1vKHIueCxpLngpLHc9byhyLnksaS55KTtlLnF1YWRyYXRpY0N1cnZlVG8oeCx3LGdbdiswXSxnW3YrMV0pLGkueD14LGkueT13LHIueD1nW3YrMF0sci55PWdbdisxXSwwPT09diYmITA9PT1sJiZzLmNvcHkocil9YnJlYWs7Y2FzZVwiQVwiOmZvcihnPWEobSksdj0wLHk9Zy5sZW5ndGg7djx5O3YrPTcpaWYoZ1t2KzVdIT1yLnh8fGdbdis2XSE9ci55KXt2YXIgXz1yLmNsb25lKCk7ci54PWdbdis1XSxyLnk9Z1t2KzZdLGkueD1yLngsaS55PXIueSxuKGUsZ1t2XSxnW3YrMV0sZ1t2KzJdLGdbdiszXSxnW3YrNF0sXyxyKSwwPT09diYmITA9PT1sJiZzLmNvcHkocil9YnJlYWs7Y2FzZVwibVwiOmZvcihnPWEobSksdj0wLHk9Zy5sZW5ndGg7djx5O3YrPTIpci54Kz1nW3YrMF0sci55Kz1nW3YrMV0saS54PXIueCxpLnk9ci55LDA9PT12P2UubW92ZVRvKHIueCxyLnkpOmUubGluZVRvKHIueCxyLnkpLDA9PT12JiYhMD09PWwmJnMuY29weShyKTticmVhaztjYXNlXCJoXCI6Zm9yKGc9YShtKSx2PTAseT1nLmxlbmd0aDt2PHk7disrKXIueCs9Z1t2XSxpLng9ci54LGkueT1yLnksZS5saW5lVG8oci54LHIueSksMD09PXYmJiEwPT09bCYmcy5jb3B5KHIpO2JyZWFrO2Nhc2VcInZcIjpmb3IoZz1hKG0pLHY9MCx5PWcubGVuZ3RoO3Y8eTt2Kyspci55Kz1nW3ZdLGkueD1yLngsaS55PXIueSxlLmxpbmVUbyhyLngsci55KSwwPT09diYmITA9PT1sJiZzLmNvcHkocik7YnJlYWs7Y2FzZVwibFwiOmZvcihnPWEobSksdj0wLHk9Zy5sZW5ndGg7djx5O3YrPTIpci54Kz1nW3YrMF0sci55Kz1nW3YrMV0saS54PXIueCxpLnk9ci55LGUubGluZVRvKHIueCxyLnkpLDA9PT12JiYhMD09PWwmJnMuY29weShyKTticmVhaztjYXNlXCJjXCI6Zm9yKGc9YShtKSx2PTAseT1nLmxlbmd0aDt2PHk7dis9NillLmJlemllckN1cnZlVG8oci54K2dbdiswXSxyLnkrZ1t2KzFdLHIueCtnW3YrMl0sci55K2dbdiszXSxyLngrZ1t2KzRdLHIueStnW3YrNV0pLGkueD1yLngrZ1t2KzJdLGkueT1yLnkrZ1t2KzNdLHIueCs9Z1t2KzRdLHIueSs9Z1t2KzVdLDA9PT12JiYhMD09PWwmJnMuY29weShyKTticmVhaztjYXNlXCJzXCI6Zm9yKGc9YShtKSx2PTAseT1nLmxlbmd0aDt2PHk7dis9NCllLmJlemllckN1cnZlVG8obyhyLngsaS54KSxvKHIueSxpLnkpLHIueCtnW3YrMF0sci55K2dbdisxXSxyLngrZ1t2KzJdLHIueStnW3YrM10pLGkueD1yLngrZ1t2KzBdLGkueT1yLnkrZ1t2KzFdLHIueCs9Z1t2KzJdLHIueSs9Z1t2KzNdLDA9PT12JiYhMD09PWwmJnMuY29weShyKTticmVhaztjYXNlXCJxXCI6Zm9yKGc9YShtKSx2PTAseT1nLmxlbmd0aDt2PHk7dis9NCllLnF1YWRyYXRpY0N1cnZlVG8oci54K2dbdiswXSxyLnkrZ1t2KzFdLHIueCtnW3YrMl0sci55K2dbdiszXSksaS54PXIueCtnW3YrMF0saS55PXIueStnW3YrMV0sci54Kz1nW3YrMl0sci55Kz1nW3YrM10sMD09PXYmJiEwPT09bCYmcy5jb3B5KHIpO2JyZWFrO2Nhc2VcInRcIjpmb3IoZz1hKG0pLHY9MCx5PWcubGVuZ3RoO3Y8eTt2Kz0yKXt4PW8oci54LGkueCksdz1vKHIueSxpLnkpO2UucXVhZHJhdGljQ3VydmVUbyh4LHcsci54K2dbdiswXSxyLnkrZ1t2KzFdKSxpLng9eCxpLnk9dyxyLng9ci54K2dbdiswXSxyLnk9ci55K2dbdisxXSwwPT09diYmITA9PT1sJiZzLmNvcHkocil9YnJlYWs7Y2FzZVwiYVwiOmZvcihnPWEobSksdj0wLHk9Zy5sZW5ndGg7djx5O3YrPTcpaWYoMCE9Z1t2KzVdfHwwIT1nW3YrNl0pe189ci5jbG9uZSgpO3IueCs9Z1t2KzVdLHIueSs9Z1t2KzZdLGkueD1yLngsaS55PXIueSxuKGUsZ1t2XSxnW3YrMV0sZ1t2KzJdLGdbdiszXSxnW3YrNF0sXyxyKSwwPT09diYmITA9PT1sJiZzLmNvcHkocil9YnJlYWs7Y2FzZVwiWlwiOmNhc2VcInpcIjplLmN1cnJlbnRQYXRoLmF1dG9DbG9zZT0hMCxlLmN1cnJlbnRQYXRoLmN1cnZlcy5sZW5ndGg+MCYmKHIuY29weShzKSxlLmN1cnJlbnRQYXRoLmN1cnJlbnRQb2ludC5jb3B5KHIpLGM9ITApO2JyZWFrO2RlZmF1bHQ6Y29uc29sZS53YXJuKHApfWw9ITF9cmV0dXJuIGV9KGUpKTticmVhaztjYXNlXCJyZWN0XCI6cj1pKGUsciksTT1mdW5jdGlvbih0KXt2YXIgZT1sKHQuZ2V0QXR0cmlidXRlKFwieFwiKXx8MCksbj1sKHQuZ2V0QXR0cmlidXRlKFwieVwiKXx8MCkscj1sKHQuZ2V0QXR0cmlidXRlKFwicnhcIil8fDApLGk9bCh0LmdldEF0dHJpYnV0ZShcInJ5XCIpfHwwKSxvPWwodC5nZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiKSksYT1sKHQuZ2V0QXR0cmlidXRlKFwiaGVpZ2h0XCIpKSxzPW5ldyBiLlNoYXBlUGF0aDtzLm1vdmVUbyhlKzIqcixuKSxzLmxpbmVUbyhlK28tMipyLG4pLCgwIT09cnx8MCE9PWkpJiZzLmJlemllckN1cnZlVG8oZStvLG4sZStvLG4sZStvLG4rMippKTtzLmxpbmVUbyhlK28sbithLTIqaSksKDAhPT1yfHwwIT09aSkmJnMuYmV6aWVyQ3VydmVUbyhlK28sbithLGUrbyxuK2EsZStvLTIqcixuK2EpO3MubGluZVRvKGUrMipyLG4rYSksKDAhPT1yfHwwIT09aSkmJnMuYmV6aWVyQ3VydmVUbyhlLG4rYSxlLG4rYSxlLG4rYS0yKmkpO3MubGluZVRvKGUsbisyKmkpLCgwIT09cnx8MCE9PWkpJiZzLmJlemllckN1cnZlVG8oZSxuLGUsbixlKzIqcixuKTtyZXR1cm4gc30oZSk7YnJlYWs7Y2FzZVwicG9seWdvblwiOnI9aShlLHIpLE09ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSh0LGUsaSl7dmFyIG89bChlKSxhPWwoaSk7MD09PXI/bi5tb3ZlVG8obyxhKTpuLmxpbmVUbyhvLGEpLHIrK312YXIgbj1uZXcgYi5TaGFwZVBhdGgscj0wO3JldHVybiB0LmdldEF0dHJpYnV0ZShcInBvaW50c1wiKS5yZXBsYWNlKC8oLT9bXFxkXFwuP10rKVssfFxcc10oLT9bXFxkXFwuP10rKS9nLGUpLG4uY3VycmVudFBhdGguYXV0b0Nsb3NlPSEwLG59KGUpO2JyZWFrO2Nhc2VcInBvbHlsaW5lXCI6cj1pKGUsciksTT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKHQsZSxpKXt2YXIgbz1sKGUpLGE9bChpKTswPT09cj9uLm1vdmVUbyhvLGEpOm4ubGluZVRvKG8sYSkscisrfXZhciBuPW5ldyBiLlNoYXBlUGF0aCxyPTA7cmV0dXJuIHQuZ2V0QXR0cmlidXRlKFwicG9pbnRzXCIpLnJlcGxhY2UoLygtP1tcXGRcXC4/XSspWyx8XFxzXSgtP1tcXGRcXC4/XSspL2csZSksbi5jdXJyZW50UGF0aC5hdXRvQ2xvc2U9ITEsbn0oZSk7YnJlYWs7Y2FzZVwiY2lyY2xlXCI6cj1pKGUsciksTT1mdW5jdGlvbih0KXt2YXIgZT1sKHQuZ2V0QXR0cmlidXRlKFwiY3hcIikpLG49bCh0LmdldEF0dHJpYnV0ZShcImN5XCIpKSxyPWwodC5nZXRBdHRyaWJ1dGUoXCJyXCIpKSxpPW5ldyBiLlBhdGg7aS5hYnNhcmMoZSxuLHIsMCwyKk1hdGguUEkpO3ZhciBvPW5ldyBiLlNoYXBlUGF0aDtyZXR1cm4gby5zdWJQYXRocy5wdXNoKGkpLG99KGUpO2JyZWFrO2Nhc2VcImVsbGlwc2VcIjpyPWkoZSxyKSxNPWZ1bmN0aW9uKHQpe3ZhciBlPWwodC5nZXRBdHRyaWJ1dGUoXCJjeFwiKSksbj1sKHQuZ2V0QXR0cmlidXRlKFwiY3lcIikpLHI9bCh0LmdldEF0dHJpYnV0ZShcInJ4XCIpKSxpPWwodC5nZXRBdHRyaWJ1dGUoXCJyeVwiKSksbz1uZXcgYi5QYXRoO28uYWJzZWxsaXBzZShlLG4scixpLDAsMipNYXRoLlBJKTt2YXIgYT1uZXcgYi5TaGFwZVBhdGg7cmV0dXJuIGEuc3ViUGF0aHMucHVzaChvKSxhfShlKTticmVhaztjYXNlXCJsaW5lXCI6cj1pKGUsciksTT1mdW5jdGlvbih0KXt2YXIgZT1sKHQuZ2V0QXR0cmlidXRlKFwieDFcIikpLG49bCh0LmdldEF0dHJpYnV0ZShcInkxXCIpKSxyPWwodC5nZXRBdHRyaWJ1dGUoXCJ4MlwiKSksaT1sKHQuZ2V0QXR0cmlidXRlKFwieTJcIikpLG89bmV3IGIuU2hhcGVQYXRoO3JldHVybiBvLm1vdmVUbyhlLG4pLG8ubGluZVRvKHIsaSksby5jdXJyZW50UGF0aC5hdXRvQ2xvc2U9ITEsb30oZSk7YnJlYWs7Y2FzZVwiZGVmc1wiOmM9ITE7YnJlYWs7Y2FzZVwidXNlXCI6cj1pKGUscik7dmFyIFM9ZS5ocmVmLmJhc2VWYWwuc3Vic3RyaW5nKDEpLFQ9ZS52aWV3cG9ydEVsZW1lbnQuZ2V0RWxlbWVudEJ5SWQoUyk7VD90KFQscik6Y29uc29sZS53YXJuKFwiU1ZHTG9hZGVyOiAndXNlIG5vZGUnIHJlZmVyZW5jZXMgbm9uLWV4aXN0ZW50IG5vZGUgaWQ6IFwiK1MpfWlmKE0mJih2b2lkIDAhPT1yLmZpbGwmJlwibm9uZVwiIT09ci5maWxsJiZNLmNvbG9yLnNldFN0eWxlKHIuZmlsbCksZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKHQpe3cuc2V0KHQueCx0LnksMSkuYXBwbHlNYXRyaXgzKGUpLHQuc2V0KHcueCx3LnkpfWZvcih2YXIgcj1mdW5jdGlvbih0KXtyZXR1cm4gMCE9PXQuZWxlbWVudHNbMV18fDAhPT10LmVsZW1lbnRzWzNdfShlKSxpPXQuc3ViUGF0aHMsbz0wLGE9aS5sZW5ndGg7bzxhO28rKylmb3IodmFyIHM9aVtvXS5jdXJ2ZXMsYz0wO2M8cy5sZW5ndGg7YysrKXt2YXIgbD1zW2NdO2wuaXNMaW5lQ3VydmU/KG4obC52MSksbihsLnYyKSk6bC5pc0N1YmljQmV6aWVyQ3VydmU/KG4obC52MCksbihsLnYxKSxuKGwudjIpLG4obC52MykpOmwuaXNRdWFkcmF0aWNCZXppZXJDdXJ2ZT8obihsLnYwKSxuKGwudjEpLG4obC52MikpOmwuaXNFbGxpcHNlQ3VydmUmJihyJiZjb25zb2xlLndhcm4oXCJTVkdMb2FkZXI6IEVsbGlwdGljIGFyYyBvciBlbGxpcHNlIHJvdGF0aW9uIG9yIHNrZXdpbmcgaXMgbm90IGltcGxlbWVudGVkLlwiKSx4LnNldChsLmFYLGwuYVkpLG4oeCksbC5hWD14LngsbC5hWT14LnksbC54UmFkaXVzKj11KGUpLGwueVJhZGl1cyo9aChlKSl9fShNLF8pLGQucHVzaChNKSxNLnVzZXJEYXRhPXtub2RlOmUsc3R5bGU6cn0pLGMpZm9yKHZhciBFPWUuY2hpbGROb2RlcyxBPTA7QTxFLmxlbmd0aDtBKyspdChFW0FdLHIpO3MmJihmLnBvcCgpLGYubGVuZ3RoPjA/Xy5jb3B5KGZbZi5sZW5ndGgtMV0pOl8uaWRlbnRpdHkoKSl9fShNLmRvY3VtZW50RWxlbWVudCx7ZmlsbDpcIiMwMDBcIixmaWxsT3BhY2l0eToxLHN0cm9rZU9wYWNpdHk6MSxzdHJva2VXaWR0aDoxLHN0cm9rZUxpbmVKb2luOlwibWl0ZXJcIixzdHJva2VMaW5lQ2FwOlwiYnV0dFwiLHN0cm9rZU1pdGVyTGltaXQ6NH0pLHtwYXRoczpkLHhtbDpNLmRvY3VtZW50RWxlbWVudH19fSksdy5nZXRTdHJva2VTdHlsZT1mdW5jdGlvbih0LGUsbixyLGkpe3JldHVybntzdHJva2VDb2xvcjplPXZvaWQgMCE9PWU/ZTpcIiMwMDBcIixzdHJva2VXaWR0aDp0PXZvaWQgMCE9PXQ/dDoxLHN0cm9rZUxpbmVKb2luOm49dm9pZCAwIT09bj9uOlwibWl0ZXJcIixzdHJva2VMaW5lQ2FwOnI9dm9pZCAwIT09cj9yOlwiYnV0dFwiLHN0cm9rZU1pdGVyTGltaXQ6aT12b2lkIDAhPT1pP2k6NH19LHcucG9pbnRzVG9TdHJva2U9ZnVuY3Rpb24odCxlLG4scil7dmFyIGk9W10sbz1bXSxhPVtdO2lmKDA9PT13LnBvaW50c1RvU3Ryb2tlV2l0aEJ1ZmZlcnModCxlLG4scixpLG8sYSkpcmV0dXJuIG51bGw7dmFyIHM9bmV3IGIuQnVmZmVyR2VvbWV0cnk7cmV0dXJuIHMuc2V0QXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgYi5GbG9hdDMyQnVmZmVyQXR0cmlidXRlKGksMykpLHMuc2V0QXR0cmlidXRlKFwibm9ybWFsXCIsbmV3IGIuRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZShvLDMpKSxzLnNldEF0dHJpYnV0ZShcInV2XCIsbmV3IGIuRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZShhLDIpKSxzfSx3LnBvaW50c1RvU3Ryb2tlV2l0aEJ1ZmZlcnM9KHI9bmV3IGIuVmVjdG9yMixpPW5ldyBiLlZlY3RvcjIsbz1uZXcgYi5WZWN0b3IyLGE9bmV3IGIuVmVjdG9yMixzPW5ldyBiLlZlY3RvcjIsYz1uZXcgYi5WZWN0b3IyLGw9bmV3IGIuVmVjdG9yMix1PW5ldyBiLlZlY3RvcjIsaD1uZXcgYi5WZWN0b3IyLGQ9bmV3IGIuVmVjdG9yMixwPW5ldyBiLlZlY3RvcjIsZj1uZXcgYi5WZWN0b3IyLG09bmV3IGIuVmVjdG9yMixnPW5ldyBiLlZlY3RvcjIsdj1uZXcgYi5WZWN0b3IyLHk9bmV3IGIuVmVjdG9yMix4PW5ldyBiLlZlY3RvcjIsZnVuY3Rpb24odCxlLG4sYix3LF8sTSxTKXtuPXZvaWQgMCE9PW4/bjoxMixiPXZvaWQgMCE9PWI/YjouMDAxLFM9dm9pZCAwIT09Uz9TOjA7dmFyIFQ9KHQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPSExLG49MSxyPXQubGVuZ3RoLTE7bjxyO24rKylpZih0W25dLmRpc3RhbmNlVG8odFtuKzFdKTxiKXtlPSEwO2JyZWFrfWlmKCFlKXJldHVybiB0O3ZhciBpPVtdO2ZvcihpLnB1c2godFswXSksbj0xLHI9dC5sZW5ndGgtMTtuPHI7bisrKXRbbl0uZGlzdGFuY2VUbyh0W24rMV0pPj1iJiZpLnB1c2godFtuXSk7cmV0dXJuIGkucHVzaCh0W3QubGVuZ3RoLTFdKSxpfSh0KSkubGVuZ3RoO2lmKFQ8MilyZXR1cm4gMDt2YXIgRSxBLEwsUixQLEM9dFswXS5lcXVhbHModFtULTFdKSxJPXRbMF0sTz1lLnN0cm9rZVdpZHRoLzIsTj0xLyhULTEpLEQ9MCxCPSExLEY9MCxVPTMqUyx6PTIqUztLKHRbMF0sdFsxXSxyKS5tdWx0aXBseVNjYWxhcihPKSx1LmNvcHkodFswXSkuc3ViKHIpLGguY29weSh0WzBdKS5hZGQociksZC5jb3B5KHUpLHAuY29weShoKTtmb3IodmFyIEc9MTtHPFQ7RysrKXtFPXRbR10sQT1HPT09VC0xP0M/dFsxXTp2b2lkIDA6dFtHKzFdO3ZhciBIPXI7SyhJLEUsSCksby5jb3B5KEgpLm11bHRpcGx5U2NhbGFyKE8pLGYuY29weShFKS5zdWIobyksbS5jb3B5KEUpLmFkZChvKTt2YXIgaz1EK047aWYoTD0hMSx2b2lkIDAhPT1BKXtLKEUsQSxpKSxvLmNvcHkoaSkubXVsdGlwbHlTY2FsYXIoTyksZy5jb3B5KEUpLnN1YihvKSx2LmNvcHkoRSkuYWRkKG8pLFI9ITAsby5zdWJWZWN0b3JzKEEsSSksSC5kb3Qobyk8MCYmKFI9ITEpLDE9PT1HJiYoQj1SKSxvLnN1YlZlY3RvcnMoQSxFKSxvLm5vcm1hbGl6ZSgpO3ZhciBWPU1hdGguYWJzKEguZG90KG8pKTtpZigwIT09Vil7dmFyIGo9Ty9WO28ubXVsdGlwbHlTY2FsYXIoLWopLGEuc3ViVmVjdG9ycyhFLEkpLHMuY29weShhKS5zZXRMZW5ndGgoaikuYWRkKG8pLHkuY29weShzKS5uZWdhdGUoKTt2YXIgVz1zLmxlbmd0aCgpLFg9YS5sZW5ndGgoKTthLmRpdmlkZVNjYWxhcihYKSxjLnN1YlZlY3RvcnMoQSxFKTt2YXIgcT1jLmxlbmd0aCgpO3N3aXRjaChjLmRpdmlkZVNjYWxhcihxKSxhLmRvdCh5KTxYJiZjLmRvdCh5KTxxJiYoTD0hMCkseC5jb3B5KHMpLmFkZChFKSx5LmFkZChFKSxQPSExLEw/Uj8odi5jb3B5KHkpLG0uY29weSh5KSk6KGcuY29weSh5KSxmLmNvcHkoeSkpOnR0KCksZS5zdHJva2VMaW5lSm9pbil7Y2FzZVwiYmV2ZWxcIjpldChSLEwsayk7YnJlYWs7Y2FzZVwicm91bmRcIjpudChSLEwpLFI/JChFLGYsZyxrLDApOiQoRSx2LG0saywxKTticmVhaztjYXNlXCJtaXRlclwiOmNhc2VcIm1pdGVyLWNsaXBcIjpkZWZhdWx0OnZhciBZPU8qZS5zdHJva2VNaXRlckxpbWl0L1c7aWYoWTwxKXtpZihcIm1pdGVyLWNsaXBcIiE9PWUuc3Ryb2tlTGluZUpvaW4pe2V0KFIsTCxrKTticmVha31udChSLEwpLFI/KGMuc3ViVmVjdG9ycyh4LGYpLm11bHRpcGx5U2NhbGFyKFkpLmFkZChmKSxsLnN1YlZlY3RvcnMoeCxnKS5tdWx0aXBseVNjYWxhcihZKS5hZGQoZyksUShmLGssMCksUShjLGssMCksUShFLGssLjUpLFEoRSxrLC41KSxRKGMsaywwKSxRKGwsaywwKSxRKEUsaywuNSksUShsLGssMCksUShnLGssMCkpOihjLnN1YlZlY3RvcnMoeCxtKS5tdWx0aXBseVNjYWxhcihZKS5hZGQobSksbC5zdWJWZWN0b3JzKHgsdikubXVsdGlwbHlTY2FsYXIoWSkuYWRkKHYpLFEobSxrLDEpLFEoYyxrLDEpLFEoRSxrLC41KSxRKEUsaywuNSksUShjLGssMSksUShsLGssMSksUShFLGssLjUpLFEobCxrLDEpLFEodixrLDEpKX1lbHNlIEw/KFI/KFEoaCxELDEpLFEodSxELDApLFEoeCxrLDApLFEoaCxELDEpLFEoeCxrLDApLFEoeSxrLDEpKTooUShoLEQsMSksUSh1LEQsMCksUSh4LGssMSksUSh1LEQsMCksUSh5LGssMCksUSh4LGssMSkpLFI/Zy5jb3B5KHgpOnYuY29weSh4KSk6Uj8oUShmLGssMCksUSh4LGssMCksUShFLGssLjUpLFEoRSxrLC41KSxRKHgsaywwKSxRKGcsaywwKSk6KFEobSxrLDEpLFEoeCxrLDEpLFEoRSxrLC41KSxRKEUsaywuNSksUSh4LGssMSksUSh2LGssMSkpLFA9ITB9fWVsc2UgdHQoKX1lbHNlIHR0KCk7Q3x8RyE9PVQtMXx8cnQodFswXSxkLHAsUiwhMCxEKSxEPWssST1FLHUuY29weShnKSxoLmNvcHkodil9aWYoQyl7aWYoTCYmdyl7dmFyIFo9eCxKPXk7QiE9PVImJihaPXksSj14KSxSPyhQfHxCKSYmKEoudG9BcnJheSh3LDApLEoudG9BcnJheSh3LDkpLFAmJloudG9BcnJheSh3LDMpKTohUCYmQnx8KEoudG9BcnJheSh3LDMpLEoudG9BcnJheSh3LDkpLFAmJloudG9BcnJheSh3LDApKX19ZWxzZSBydChFLGYsbSxSLCExLGspO3JldHVybiBGO2Z1bmN0aW9uIEsodCxlLG4pe3JldHVybiBuLnN1YlZlY3RvcnMoZSx0KSxuLnNldCgtbi55LG4ueCkubm9ybWFsaXplKCl9ZnVuY3Rpb24gUSh0LGUsbil7dyYmKHdbVV09dC54LHdbVSsxXT10Lnksd1tVKzJdPTAsXyYmKF9bVV09MCxfW1UrMV09MCxfW1UrMl09MSksVSs9MyxNJiYoTVt6XT1lLE1beisxXT1uLHorPTIpKSxGKz0zfWZ1bmN0aW9uICQodCxlLHMsYyxsKXtyLmNvcHkoZSkuc3ViKHQpLm5vcm1hbGl6ZSgpLGkuY29weShzKS5zdWIodCkubm9ybWFsaXplKCk7dmFyIHU9TWF0aC5QSSxoPXIuZG90KGkpO01hdGguYWJzKGgpPDEmJih1PU1hdGguYWJzKE1hdGguYWNvcyhoKSkpLHUvPW4sby5jb3B5KGUpO2Zvcih2YXIgZD0wLHA9bi0xO2Q8cDtkKyspYS5jb3B5KG8pLnJvdGF0ZUFyb3VuZCh0LHUpLFEobyxjLGwpLFEoYSxjLGwpLFEodCxjLC41KSxvLmNvcHkoYSk7UShhLGMsbCksUShzLGMsbCksUSh0LGMsLjUpfWZ1bmN0aW9uIHR0KCl7UShoLEQsMSksUSh1LEQsMCksUShmLGssMCksUShoLEQsMSksUShmLGssMSksUShtLGssMCl9ZnVuY3Rpb24gZXQodCxlLG4pe2U/dD8oUShoLEQsMSksUSh1LEQsMCksUShmLGssMCksUShoLEQsMSksUShmLGssMCksUSh5LGssMSksUShmLG4sMCksUShnLG4sMCksUSh5LG4sLjUpKTooUShoLEQsMSksUSh1LEQsMCksUShtLGssMSksUSh1LEQsMCksUSh5LGssMCksUShtLGssMSksUShtLG4sMSksUSh2LG4sMCksUSh5LG4sLjUpKTp0PyhRKGYsbiwwKSxRKGcsbiwwKSxRKEUsbiwuNSkpOihRKG0sbiwxKSxRKHYsbiwwKSxRKEUsbiwuNSkpfWZ1bmN0aW9uIG50KHQsZSl7ZSYmKHQ/KFEoaCxELDEpLFEodSxELDApLFEoZixrLDApLFEoaCxELDEpLFEoZixrLDApLFEoeSxrLDEpLFEoZixELDApLFEoRSxrLC41KSxRKHksaywxKSxRKEUsaywuNSksUShnLEQsMCksUSh5LGssMSkpOihRKGgsRCwxKSxRKHUsRCwwKSxRKG0saywxKSxRKHUsRCwwKSxRKHksaywwKSxRKG0saywxKSxRKG0sRCwxKSxRKHksaywwKSxRKEUsaywuNSksUShFLGssLjUpLFEoeSxrLDApLFEodixELDEpKSl9ZnVuY3Rpb24gcnQodCxuLHMsYyxsLHUpe3N3aXRjaChlLnN0cm9rZUxpbmVDYXApe2Nhc2VcInJvdW5kXCI6bD8kKHQscyxuLHUsLjUpOiQodCxuLHMsdSwuNSk7YnJlYWs7Y2FzZVwic3F1YXJlXCI6aWYobClyLnN1YlZlY3RvcnMobix0KSxpLnNldChyLnksLXIueCksby5hZGRWZWN0b3JzKHIsaSkuYWRkKHQpLGEuc3ViVmVjdG9ycyhpLHIpLmFkZCh0KSxjPyhvLnRvQXJyYXkodywzKSxhLnRvQXJyYXkodywwKSxhLnRvQXJyYXkodyw5KSk6KG8udG9BcnJheSh3LDMpLG8udG9BcnJheSh3LDkpLGEudG9BcnJheSh3LDApKTtlbHNle3Iuc3ViVmVjdG9ycyhzLHQpLGkuc2V0KHIueSwtci54KSxvLmFkZFZlY3RvcnMocixpKS5hZGQodCksYS5zdWJWZWN0b3JzKGkscikuYWRkKHQpO3ZhciBoPXcubGVuZ3RoO2M/KG8udG9BcnJheSh3LGgtMyksYS50b0FycmF5KHcsaC02KSxhLnRvQXJyYXkodyxoLTEyKSk6KG8udG9BcnJheSh3LGgtNiksYS50b0FycmF5KHcsaC0zKSxhLnRvQXJyYXkodyxoLTEyKSl9fX19KX0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO24ucihlKSxuLmQoZSxcIlZSQnV0dG9uXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHJ9KSk7Y2xhc3MgcntzdGF0aWMgY3JlYXRlQnV0dG9uKHQsZSl7ZSYmY29uc29sZS5lcnJvcignVEhSRUUuVlJCdXR0b246IFRoZSBcIm9wdGlvbnNcIiBwYXJhbWV0ZXIgaGFzIGJlZW4gcmVtb3ZlZC4gUGxlYXNlIHNldCB0aGUgcmVmZXJlbmNlIHNwYWNlIHR5cGUgdmlhIHJlbmRlcmVyLnhyLnNldFJlZmVyZW5jZVNwYWNlVHlwZSgpIGluc3RlYWQuJyk7Y29uc3Qgbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO2Z1bmN0aW9uIHIoKXtuLnN0eWxlLmRpc3BsYXk9XCJcIixuLnN0eWxlLmN1cnNvcj1cImF1dG9cIixuLnN0eWxlLmxlZnQ9XCJjYWxjKDUwJSAtIDc1cHgpXCIsbi5zdHlsZS53aWR0aD1cIjE1MHB4XCIsbi5vbm1vdXNlZW50ZXI9bnVsbCxuLm9ubW91c2VsZWF2ZT1udWxsLG4ub25jbGljaz1udWxsLG4udGV4dENvbnRlbnQ9XCJWUiBOT1QgU1VQUE9SVEVEXCJ9ZnVuY3Rpb24gaSh0KXt0LnN0eWxlLnBvc2l0aW9uPVwiYWJzb2x1dGVcIix0LnN0eWxlLmJvdHRvbT1cIjIwcHhcIix0LnN0eWxlLnBhZGRpbmc9XCIxMnB4IDZweFwiLHQuc3R5bGUuYm9yZGVyPVwiMXB4IHNvbGlkICNmZmZcIix0LnN0eWxlLmJvcmRlclJhZGl1cz1cIjRweFwiLHQuc3R5bGUuYmFja2dyb3VuZD1cInJnYmEoMCwwLDAsMC4xKVwiLHQuc3R5bGUuY29sb3I9XCIjZmZmXCIsdC5zdHlsZS5mb250PVwibm9ybWFsIDEzcHggc2Fucy1zZXJpZlwiLHQuc3R5bGUudGV4dEFsaWduPVwiY2VudGVyXCIsdC5zdHlsZS5vcGFjaXR5PVwiMC41XCIsdC5zdHlsZS5vdXRsaW5lPVwibm9uZVwiLHQuc3R5bGUuekluZGV4PVwiOTk5XCJ9aWYoXCJ4clwiaW4gbmF2aWdhdG9yKXJldHVybiBuLmlkPVwiVlJCdXR0b25cIixuLnN0eWxlLmRpc3BsYXk9XCJub25lXCIsaShuKSxuYXZpZ2F0b3IueHIuaXNTZXNzaW9uU3VwcG9ydGVkKFwiaW1tZXJzaXZlLXZyXCIpLnRoZW4oKGZ1bmN0aW9uKGUpe2U/ZnVuY3Rpb24oKXtsZXQgZT1udWxsO2Z1bmN0aW9uIHIocil7ci5hZGRFdmVudExpc3RlbmVyKFwiZW5kXCIsaSksdC54ci5zZXRTZXNzaW9uKHIpLG4udGV4dENvbnRlbnQ9XCJFWElUIFZSXCIsZT1yfWZ1bmN0aW9uIGkoKXtlLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJlbmRcIixpKSxuLnRleHRDb250ZW50PVwiRU5URVIgVlJcIixlPW51bGx9bi5zdHlsZS5kaXNwbGF5PVwiXCIsbi5zdHlsZS5jdXJzb3I9XCJwb2ludGVyXCIsbi5zdHlsZS5sZWZ0PVwiY2FsYyg1MCUgLSA1MHB4KVwiLG4uc3R5bGUud2lkdGg9XCIxMDBweFwiLG4udGV4dENvbnRlbnQ9XCJFTlRFUiBWUlwiLG4ub25tb3VzZWVudGVyPWZ1bmN0aW9uKCl7bi5zdHlsZS5vcGFjaXR5PVwiMS4wXCJ9LG4ub25tb3VzZWxlYXZlPWZ1bmN0aW9uKCl7bi5zdHlsZS5vcGFjaXR5PVwiMC41XCJ9LG4ub25jbGljaz1mdW5jdGlvbigpe2lmKG51bGw9PT1lKXtjb25zdCB0PXtvcHRpb25hbEZlYXR1cmVzOltcImxvY2FsLWZsb29yXCIsXCJib3VuZGVkLWZsb29yXCIsXCJoYW5kLXRyYWNraW5nXCJdfTtuYXZpZ2F0b3IueHIucmVxdWVzdFNlc3Npb24oXCJpbW1lcnNpdmUtdnJcIix0KS50aGVuKHIpfWVsc2UgZS5lbmQoKX19KCk6cigpfSkpLG47e2NvbnN0IHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7cmV0dXJuITE9PT13aW5kb3cuaXNTZWN1cmVDb250ZXh0Pyh0LmhyZWY9ZG9jdW1lbnQubG9jYXRpb24uaHJlZi5yZXBsYWNlKC9eaHR0cDovLFwiaHR0cHM6XCIpLHQuaW5uZXJIVE1MPVwiV0VCWFIgTkVFRFMgSFRUUFNcIik6KHQuaHJlZj1cImh0dHBzOi8vaW1tZXJzaXZld2ViLmRldi9cIix0LmlubmVySFRNTD1cIldFQlhSIE5PVCBBVkFJTEFCTEVcIiksdC5zdHlsZS5sZWZ0PVwiY2FsYyg1MCUgLSA5MHB4KVwiLHQuc3R5bGUud2lkdGg9XCIxODBweFwiLHQuc3R5bGUudGV4dERlY29yYXRpb249XCJub25lXCIsaSh0KSx0fX19fSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7bi5yKGUpLG4uZChlLFwiU2t5XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGl9KSk7dmFyIHI9bigwKSxpPWZ1bmN0aW9uKCl7dmFyIHQ9aS5Ta3lTaGFkZXIsZT1uZXcgci5TaGFkZXJNYXRlcmlhbCh7bmFtZTpcIlNreVNoYWRlclwiLGZyYWdtZW50U2hhZGVyOnQuZnJhZ21lbnRTaGFkZXIsdmVydGV4U2hhZGVyOnQudmVydGV4U2hhZGVyLHVuaWZvcm1zOnIuVW5pZm9ybXNVdGlscy5jbG9uZSh0LnVuaWZvcm1zKSxzaWRlOnIuQmFja1NpZGUsZGVwdGhXcml0ZTohMX0pO3IuTWVzaC5jYWxsKHRoaXMsbmV3IHIuQm94QnVmZmVyR2VvbWV0cnkoMSwxLDEpLGUpfTtpLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHIuTWVzaC5wcm90b3R5cGUpLGkuU2t5U2hhZGVyPXt1bmlmb3Jtczp7dHVyYmlkaXR5Ont2YWx1ZToyfSxyYXlsZWlnaDp7dmFsdWU6MX0sbWllQ29lZmZpY2llbnQ6e3ZhbHVlOi4wMDV9LG1pZURpcmVjdGlvbmFsRzp7dmFsdWU6Ljh9LHN1blBvc2l0aW9uOnt2YWx1ZTpuZXcgci5WZWN0b3IzfSx1cDp7dmFsdWU6bmV3IHIuVmVjdG9yMygwLDEsMCl9fSx2ZXJ0ZXhTaGFkZXI6W1widW5pZm9ybSB2ZWMzIHN1blBvc2l0aW9uO1wiLFwidW5pZm9ybSBmbG9hdCByYXlsZWlnaDtcIixcInVuaWZvcm0gZmxvYXQgdHVyYmlkaXR5O1wiLFwidW5pZm9ybSBmbG9hdCBtaWVDb2VmZmljaWVudDtcIixcInVuaWZvcm0gdmVjMyB1cDtcIixcInZhcnlpbmcgdmVjMyB2V29ybGRQb3NpdGlvbjtcIixcInZhcnlpbmcgdmVjMyB2U3VuRGlyZWN0aW9uO1wiLFwidmFyeWluZyBmbG9hdCB2U3VuZmFkZTtcIixcInZhcnlpbmcgdmVjMyB2QmV0YVI7XCIsXCJ2YXJ5aW5nIHZlYzMgdkJldGFNO1wiLFwidmFyeWluZyBmbG9hdCB2U3VuRTtcIixcImNvbnN0IGZsb2F0IGUgPSAyLjcxODI4MTgyODQ1OTA0NTIzNTM2MDI4NzQ3MTM1MjY2MjQ5Nzc1NzI0NzA5MzY5OTk1OTU3O1wiLFwiY29uc3QgZmxvYXQgcGkgPSAzLjE0MTU5MjY1MzU4OTc5MzIzODQ2MjY0MzM4MzI3OTUwMjg4NDE5NzE2OTtcIixcImNvbnN0IHZlYzMgbGFtYmRhID0gdmVjMyggNjgwRS05LCA1NTBFLTksIDQ1MEUtOSApO1wiLFwiY29uc3QgdmVjMyB0b3RhbFJheWxlaWdoID0gdmVjMyggNS44MDQ1NDI5OTYyNjEwOTNFLTYsIDEuMzU2MjkxMTQxOTg0NTYzNUUtNSwgMy4wMjY1OTAyNDY4ODI0ODc2RS01ICk7XCIsXCJjb25zdCBmbG9hdCB2ID0gNC4wO1wiLFwiY29uc3QgdmVjMyBLID0gdmVjMyggMC42ODYsIDAuNjc4LCAwLjY2NiApO1wiLFwiY29uc3QgdmVjMyBNaWVDb25zdCA9IHZlYzMoIDEuODM5OTkxODUxNDQzMzk3OEUxNCwgMi43Nzk4MDIzOTE5NjYwNTI4RTE0LCA0LjA3OTA0Nzk1NDM4NjEwOTRFMTQgKTtcIixcImNvbnN0IGZsb2F0IGN1dG9mZkFuZ2xlID0gMS42MTEwNzMxNTU2ODcwNzM0O1wiLFwiY29uc3QgZmxvYXQgc3RlZXBuZXNzID0gMS41O1wiLFwiY29uc3QgZmxvYXQgRUUgPSAxMDAwLjA7XCIsXCJmbG9hdCBzdW5JbnRlbnNpdHkoIGZsb2F0IHplbml0aEFuZ2xlQ29zICkge1wiLFwiXFx0emVuaXRoQW5nbGVDb3MgPSBjbGFtcCggemVuaXRoQW5nbGVDb3MsIC0xLjAsIDEuMCApO1wiLFwiXFx0cmV0dXJuIEVFICogbWF4KCAwLjAsIDEuMCAtIHBvdyggZSwgLSggKCBjdXRvZmZBbmdsZSAtIGFjb3MoIHplbml0aEFuZ2xlQ29zICkgKSAvIHN0ZWVwbmVzcyApICkgKTtcIixcIn1cIixcInZlYzMgdG90YWxNaWUoIGZsb2F0IFQgKSB7XCIsXCJcXHRmbG9hdCBjID0gKCAwLjIgKiBUICkgKiAxMEUtMTg7XCIsXCJcXHRyZXR1cm4gMC40MzQgKiBjICogTWllQ29uc3Q7XCIsXCJ9XCIsXCJ2b2lkIG1haW4oKSB7XCIsXCJcXHR2ZWM0IHdvcmxkUG9zaXRpb24gPSBtb2RlbE1hdHJpeCAqIHZlYzQoIHBvc2l0aW9uLCAxLjAgKTtcIixcIlxcdHZXb3JsZFBvc2l0aW9uID0gd29ybGRQb3NpdGlvbi54eXo7XCIsXCJcXHRnbF9Qb3NpdGlvbiA9IHByb2plY3Rpb25NYXRyaXggKiBtb2RlbFZpZXdNYXRyaXggKiB2ZWM0KCBwb3NpdGlvbiwgMS4wICk7XCIsXCJcXHRnbF9Qb3NpdGlvbi56ID0gZ2xfUG9zaXRpb24udztcIixcIlxcdHZTdW5EaXJlY3Rpb24gPSBub3JtYWxpemUoIHN1blBvc2l0aW9uICk7XCIsXCJcXHR2U3VuRSA9IHN1bkludGVuc2l0eSggZG90KCB2U3VuRGlyZWN0aW9uLCB1cCApICk7XCIsXCJcXHR2U3VuZmFkZSA9IDEuMCAtIGNsYW1wKCAxLjAgLSBleHAoICggc3VuUG9zaXRpb24ueSAvIDQ1MDAwMC4wICkgKSwgMC4wLCAxLjAgKTtcIixcIlxcdGZsb2F0IHJheWxlaWdoQ29lZmZpY2llbnQgPSByYXlsZWlnaCAtICggMS4wICogKCAxLjAgLSB2U3VuZmFkZSApICk7XCIsXCJcXHR2QmV0YVIgPSB0b3RhbFJheWxlaWdoICogcmF5bGVpZ2hDb2VmZmljaWVudDtcIixcIlxcdHZCZXRhTSA9IHRvdGFsTWllKCB0dXJiaWRpdHkgKSAqIG1pZUNvZWZmaWNpZW50O1wiLFwifVwiXS5qb2luKFwiXFxuXCIpLGZyYWdtZW50U2hhZGVyOltcInZhcnlpbmcgdmVjMyB2V29ybGRQb3NpdGlvbjtcIixcInZhcnlpbmcgdmVjMyB2U3VuRGlyZWN0aW9uO1wiLFwidmFyeWluZyBmbG9hdCB2U3VuZmFkZTtcIixcInZhcnlpbmcgdmVjMyB2QmV0YVI7XCIsXCJ2YXJ5aW5nIHZlYzMgdkJldGFNO1wiLFwidmFyeWluZyBmbG9hdCB2U3VuRTtcIixcInVuaWZvcm0gZmxvYXQgbWllRGlyZWN0aW9uYWxHO1wiLFwidW5pZm9ybSB2ZWMzIHVwO1wiLFwiY29uc3QgdmVjMyBjYW1lcmFQb3MgPSB2ZWMzKCAwLjAsIDAuMCwgMC4wICk7XCIsXCJjb25zdCBmbG9hdCBwaSA9IDMuMTQxNTkyNjUzNTg5NzkzMjM4NDYyNjQzMzgzMjc5NTAyODg0MTk3MTY5O1wiLFwiY29uc3QgZmxvYXQgbiA9IDEuMDAwMztcIixcImNvbnN0IGZsb2F0IE4gPSAyLjU0NUUyNTtcIixcImNvbnN0IGZsb2F0IHJheWxlaWdoWmVuaXRoTGVuZ3RoID0gOC40RTM7XCIsXCJjb25zdCBmbG9hdCBtaWVaZW5pdGhMZW5ndGggPSAxLjI1RTM7XCIsXCJjb25zdCBmbG9hdCBzdW5Bbmd1bGFyRGlhbWV0ZXJDb3MgPSAwLjk5OTk1NjY3Njk0NjQ0ODQ0MzU1MzU3NDYxOTkwNjk3NjQ3ODkyNjg0ODY5Mjg3MzkwMDg1OTMyNDtcIixcImNvbnN0IGZsb2F0IFRIUkVFX09WRVJfU0lYVEVFTlBJID0gMC4wNTk2ODMxMDM2NTk0NjA3NTtcIixcImNvbnN0IGZsb2F0IE9ORV9PVkVSX0ZPVVJQSSA9IDAuMDc5NTc3NDcxNTQ1OTQ3Njc7XCIsXCJmbG9hdCByYXlsZWlnaFBoYXNlKCBmbG9hdCBjb3NUaGV0YSApIHtcIixcIlxcdHJldHVybiBUSFJFRV9PVkVSX1NJWFRFRU5QSSAqICggMS4wICsgcG93KCBjb3NUaGV0YSwgMi4wICkgKTtcIixcIn1cIixcImZsb2F0IGhnUGhhc2UoIGZsb2F0IGNvc1RoZXRhLCBmbG9hdCBnICkge1wiLFwiXFx0ZmxvYXQgZzIgPSBwb3coIGcsIDIuMCApO1wiLFwiXFx0ZmxvYXQgaW52ZXJzZSA9IDEuMCAvIHBvdyggMS4wIC0gMi4wICogZyAqIGNvc1RoZXRhICsgZzIsIDEuNSApO1wiLFwiXFx0cmV0dXJuIE9ORV9PVkVSX0ZPVVJQSSAqICggKCAxLjAgLSBnMiApICogaW52ZXJzZSApO1wiLFwifVwiLFwidm9pZCBtYWluKCkge1wiLFwiXFx0dmVjMyBkaXJlY3Rpb24gPSBub3JtYWxpemUoIHZXb3JsZFBvc2l0aW9uIC0gY2FtZXJhUG9zICk7XCIsXCJcXHRmbG9hdCB6ZW5pdGhBbmdsZSA9IGFjb3MoIG1heCggMC4wLCBkb3QoIHVwLCBkaXJlY3Rpb24gKSApICk7XCIsXCJcXHRmbG9hdCBpbnZlcnNlID0gMS4wIC8gKCBjb3MoIHplbml0aEFuZ2xlICkgKyAwLjE1ICogcG93KCA5My44ODUgLSAoICggemVuaXRoQW5nbGUgKiAxODAuMCApIC8gcGkgKSwgLTEuMjUzICkgKTtcIixcIlxcdGZsb2F0IHNSID0gcmF5bGVpZ2haZW5pdGhMZW5ndGggKiBpbnZlcnNlO1wiLFwiXFx0ZmxvYXQgc00gPSBtaWVaZW5pdGhMZW5ndGggKiBpbnZlcnNlO1wiLFwiXFx0dmVjMyBGZXggPSBleHAoIC0oIHZCZXRhUiAqIHNSICsgdkJldGFNICogc00gKSApO1wiLFwiXFx0ZmxvYXQgY29zVGhldGEgPSBkb3QoIGRpcmVjdGlvbiwgdlN1bkRpcmVjdGlvbiApO1wiLFwiXFx0ZmxvYXQgclBoYXNlID0gcmF5bGVpZ2hQaGFzZSggY29zVGhldGEgKiAwLjUgKyAwLjUgKTtcIixcIlxcdHZlYzMgYmV0YVJUaGV0YSA9IHZCZXRhUiAqIHJQaGFzZTtcIixcIlxcdGZsb2F0IG1QaGFzZSA9IGhnUGhhc2UoIGNvc1RoZXRhLCBtaWVEaXJlY3Rpb25hbEcgKTtcIixcIlxcdHZlYzMgYmV0YU1UaGV0YSA9IHZCZXRhTSAqIG1QaGFzZTtcIixcIlxcdHZlYzMgTGluID0gcG93KCB2U3VuRSAqICggKCBiZXRhUlRoZXRhICsgYmV0YU1UaGV0YSApIC8gKCB2QmV0YVIgKyB2QmV0YU0gKSApICogKCAxLjAgLSBGZXggKSwgdmVjMyggMS41ICkgKTtcIixcIlxcdExpbiAqPSBtaXgoIHZlYzMoIDEuMCApLCBwb3coIHZTdW5FICogKCAoIGJldGFSVGhldGEgKyBiZXRhTVRoZXRhICkgLyAoIHZCZXRhUiArIHZCZXRhTSApICkgKiBGZXgsIHZlYzMoIDEuMCAvIDIuMCApICksIGNsYW1wKCBwb3coIDEuMCAtIGRvdCggdXAsIHZTdW5EaXJlY3Rpb24gKSwgNS4wICksIDAuMCwgMS4wICkgKTtcIixcIlxcdGZsb2F0IHRoZXRhID0gYWNvcyggZGlyZWN0aW9uLnkgKTsgLy8gZWxldmF0aW9uIC0tXFx4M2UgeS1heGlzLCBbLXBpLzIsIHBpLzJdXCIsXCJcXHRmbG9hdCBwaGkgPSBhdGFuKCBkaXJlY3Rpb24ueiwgZGlyZWN0aW9uLnggKTsgLy8gYXppbXV0aCAtLVxceDNlIHgtYXhpcyBbLXBpLzIsIHBpLzJdXCIsXCJcXHR2ZWMyIHV2ID0gdmVjMiggcGhpLCB0aGV0YSApIC8gdmVjMiggMi4wICogcGksIHBpICkgKyB2ZWMyKCAwLjUsIDAuMCApO1wiLFwiXFx0dmVjMyBMMCA9IHZlYzMoIDAuMSApICogRmV4O1wiLFwiXFx0ZmxvYXQgc3VuZGlzayA9IHNtb290aHN0ZXAoIHN1bkFuZ3VsYXJEaWFtZXRlckNvcywgc3VuQW5ndWxhckRpYW1ldGVyQ29zICsgMC4wMDAwMiwgY29zVGhldGEgKTtcIixcIlxcdEwwICs9ICggdlN1bkUgKiAxOTAwMC4wICogRmV4ICkgKiBzdW5kaXNrO1wiLFwiXFx0dmVjMyB0ZXhDb2xvciA9ICggTGluICsgTDAgKSAqIDAuMDQgKyB2ZWMzKCAwLjAsIDAuMDAwMywgMC4wMDA3NSApO1wiLFwiXFx0dmVjMyByZXRDb2xvciA9IHBvdyggdGV4Q29sb3IsIHZlYzMoIDEuMCAvICggMS4yICsgKCAxLjIgKiB2U3VuZmFkZSApICkgKSApO1wiLFwiXFx0Z2xfRnJhZ0NvbG9yID0gdmVjNCggcmV0Q29sb3IsIDEuMCApO1wiLFwiI2luY2x1ZGUgPHRvbmVtYXBwaW5nX2ZyYWdtZW50PlwiLFwiI2luY2x1ZGUgPGVuY29kaW5nc19mcmFnbWVudD5cIixcIn1cIl0uam9pbihcIlxcblwiKX19LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtuLnIoZSksbi5kKGUsXCJPcmJpdENvbnRyb2xzXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGl9KSksbi5kKGUsXCJNYXBDb250cm9sc1wiLChmdW5jdGlvbigpe3JldHVybiBvfSkpO3ZhciByPW4oMCksaT1mdW5jdGlvbih0LGUpe3ZhciBuLGksbyxhLHMsYzt2b2lkIDA9PT1lJiZjb25zb2xlLndhcm4oJ1RIUkVFLk9yYml0Q29udHJvbHM6IFRoZSBzZWNvbmQgcGFyYW1ldGVyIFwiZG9tRWxlbWVudFwiIGlzIG5vdyBtYW5kYXRvcnkuJyksZT09PWRvY3VtZW50JiZjb25zb2xlLmVycm9yKCdUSFJFRS5PcmJpdENvbnRyb2xzOiBcImRvY3VtZW50XCIgc2hvdWxkIG5vdCBiZSB1c2VkIGFzIHRoZSB0YXJnZXQgXCJkb21FbGVtZW50XCIuIFBsZWFzZSB1c2UgXCJyZW5kZXJlci5kb21FbGVtZW50XCIgaW5zdGVhZC4nKSx0aGlzLm9iamVjdD10LHRoaXMuZG9tRWxlbWVudD1lLHRoaXMuZW5hYmxlZD0hMCx0aGlzLnRhcmdldD1uZXcgci5WZWN0b3IzLHRoaXMubWluRGlzdGFuY2U9MCx0aGlzLm1heERpc3RhbmNlPTEvMCx0aGlzLm1pblpvb209MCx0aGlzLm1heFpvb209MS8wLHRoaXMubWluUG9sYXJBbmdsZT0wLHRoaXMubWF4UG9sYXJBbmdsZT1NYXRoLlBJLHRoaXMubWluQXppbXV0aEFuZ2xlPS0xLzAsdGhpcy5tYXhBemltdXRoQW5nbGU9MS8wLHRoaXMuZW5hYmxlRGFtcGluZz0hMSx0aGlzLmRhbXBpbmdGYWN0b3I9LjA1LHRoaXMuZW5hYmxlWm9vbT0hMCx0aGlzLnpvb21TcGVlZD0xLHRoaXMuZW5hYmxlUm90YXRlPSEwLHRoaXMucm90YXRlU3BlZWQ9MSx0aGlzLmVuYWJsZVBhbj0hMCx0aGlzLnBhblNwZWVkPTEsdGhpcy5zY3JlZW5TcGFjZVBhbm5pbmc9ITAsdGhpcy5rZXlQYW5TcGVlZD03LHRoaXMuYXV0b1JvdGF0ZT0hMSx0aGlzLmF1dG9Sb3RhdGVTcGVlZD0yLHRoaXMuZW5hYmxlS2V5cz0hMCx0aGlzLmtleXM9e0xFRlQ6MzcsVVA6MzgsUklHSFQ6MzksQk9UVE9NOjQwfSx0aGlzLm1vdXNlQnV0dG9ucz17TEVGVDpyLk1PVVNFLlJPVEFURSxNSURETEU6ci5NT1VTRS5ET0xMWSxSSUdIVDpyLk1PVVNFLlBBTn0sdGhpcy50b3VjaGVzPXtPTkU6ci5UT1VDSC5ST1RBVEUsVFdPOnIuVE9VQ0guRE9MTFlfUEFOfSx0aGlzLnRhcmdldDA9dGhpcy50YXJnZXQuY2xvbmUoKSx0aGlzLnBvc2l0aW9uMD10aGlzLm9iamVjdC5wb3NpdGlvbi5jbG9uZSgpLHRoaXMuem9vbTA9dGhpcy5vYmplY3Quem9vbSx0aGlzLmdldFBvbGFyQW5nbGU9ZnVuY3Rpb24oKXtyZXR1cm4gZy5waGl9LHRoaXMuZ2V0QXppbXV0aGFsQW5nbGU9ZnVuY3Rpb24oKXtyZXR1cm4gZy50aGV0YX0sdGhpcy5zYXZlU3RhdGU9ZnVuY3Rpb24oKXtsLnRhcmdldDAuY29weShsLnRhcmdldCksbC5wb3NpdGlvbjAuY29weShsLm9iamVjdC5wb3NpdGlvbiksbC56b29tMD1sLm9iamVjdC56b29tfSx0aGlzLnJlc2V0PWZ1bmN0aW9uKCl7bC50YXJnZXQuY29weShsLnRhcmdldDApLGwub2JqZWN0LnBvc2l0aW9uLmNvcHkobC5wb3NpdGlvbjApLGwub2JqZWN0Lnpvb209bC56b29tMCxsLm9iamVjdC51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCksbC5kaXNwYXRjaEV2ZW50KHUpLGwudXBkYXRlKCksZj1wLk5PTkV9LHRoaXMudXBkYXRlPShuPW5ldyByLlZlY3RvcjMsaT0obmV3IHIuUXVhdGVybmlvbikuc2V0RnJvbVVuaXRWZWN0b3JzKHQudXAsbmV3IHIuVmVjdG9yMygwLDEsMCkpLG89aS5jbG9uZSgpLmludmVydCgpLGE9bmV3IHIuVmVjdG9yMyxzPW5ldyByLlF1YXRlcm5pb24sYz0yKk1hdGguUEksZnVuY3Rpb24oKXt2YXIgdD1sLm9iamVjdC5wb3NpdGlvbjtuLmNvcHkodCkuc3ViKGwudGFyZ2V0KSxuLmFwcGx5UXVhdGVybmlvbihpKSxnLnNldEZyb21WZWN0b3IzKG4pLGwuYXV0b1JvdGF0ZSYmZj09PXAuTk9ORSYmQygyKk1hdGguUEkvNjAvNjAqbC5hdXRvUm90YXRlU3BlZWQpLGwuZW5hYmxlRGFtcGluZz8oZy50aGV0YSs9di50aGV0YSpsLmRhbXBpbmdGYWN0b3IsZy5waGkrPXYucGhpKmwuZGFtcGluZ0ZhY3Rvcik6KGcudGhldGErPXYudGhldGEsZy5waGkrPXYucGhpKTt2YXIgZT1sLm1pbkF6aW11dGhBbmdsZSxyPWwubWF4QXppbXV0aEFuZ2xlO3JldHVybiBpc0Zpbml0ZShlKSYmaXNGaW5pdGUocikmJihlPC1NYXRoLlBJP2UrPWM6ZT5NYXRoLlBJJiYoZS09YykscjwtTWF0aC5QST9yKz1jOnI+TWF0aC5QSSYmKHItPWMpLGcudGhldGE9ZTw9cj9NYXRoLm1heChlLE1hdGgubWluKHIsZy50aGV0YSkpOmcudGhldGE+KGUrcikvMj9NYXRoLm1heChlLGcudGhldGEpOk1hdGgubWluKHIsZy50aGV0YSkpLGcucGhpPU1hdGgubWF4KGwubWluUG9sYXJBbmdsZSxNYXRoLm1pbihsLm1heFBvbGFyQW5nbGUsZy5waGkpKSxnLm1ha2VTYWZlKCksZy5yYWRpdXMqPXksZy5yYWRpdXM9TWF0aC5tYXgobC5taW5EaXN0YW5jZSxNYXRoLm1pbihsLm1heERpc3RhbmNlLGcucmFkaXVzKSksITA9PT1sLmVuYWJsZURhbXBpbmc/bC50YXJnZXQuYWRkU2NhbGVkVmVjdG9yKHgsbC5kYW1waW5nRmFjdG9yKTpsLnRhcmdldC5hZGQoeCksbi5zZXRGcm9tU3BoZXJpY2FsKGcpLG4uYXBwbHlRdWF0ZXJuaW9uKG8pLHQuY29weShsLnRhcmdldCkuYWRkKG4pLGwub2JqZWN0Lmxvb2tBdChsLnRhcmdldCksITA9PT1sLmVuYWJsZURhbXBpbmc/KHYudGhldGEqPTEtbC5kYW1waW5nRmFjdG9yLHYucGhpKj0xLWwuZGFtcGluZ0ZhY3Rvcix4Lm11bHRpcGx5U2NhbGFyKDEtbC5kYW1waW5nRmFjdG9yKSk6KHYuc2V0KDAsMCwwKSx4LnNldCgwLDAsMCkpLHk9MSwhIShifHxhLmRpc3RhbmNlVG9TcXVhcmVkKGwub2JqZWN0LnBvc2l0aW9uKT5tfHw4KigxLXMuZG90KGwub2JqZWN0LnF1YXRlcm5pb24pKT5tKSYmKGwuZGlzcGF0Y2hFdmVudCh1KSxhLmNvcHkobC5vYmplY3QucG9zaXRpb24pLHMuY29weShsLm9iamVjdC5xdWF0ZXJuaW9uKSxiPSExLCEwKX0pLHRoaXMuZGlzcG9zZT1mdW5jdGlvbigpe2wuZG9tRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY29udGV4dG1lbnVcIixldCwhMSksbC5kb21FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwb2ludGVyZG93blwiLHEsITEpLGwuZG9tRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwid2hlZWxcIixKLCExKSxsLmRvbUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIixRLCExKSxsLmRvbUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsdHQsITEpLGwuZG9tRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsJCwhMSksbC5kb21FbGVtZW50Lm93bmVyRG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJtb3ZlXCIsWSwhMSksbC5kb21FbGVtZW50Lm93bmVyRG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJ1cFwiLFosITEpLGwuZG9tRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLEssITEpfTt2YXIgbD10aGlzLHU9e3R5cGU6XCJjaGFuZ2VcIn0saD17dHlwZTpcInN0YXJ0XCJ9LGQ9e3R5cGU6XCJlbmRcIn0scD17Tk9ORTotMSxST1RBVEU6MCxET0xMWToxLFBBTjoyLFRPVUNIX1JPVEFURTozLFRPVUNIX1BBTjo0LFRPVUNIX0RPTExZX1BBTjo1LFRPVUNIX0RPTExZX1JPVEFURTo2fSxmPXAuTk9ORSxtPTFlLTYsZz1uZXcgci5TcGhlcmljYWwsdj1uZXcgci5TcGhlcmljYWwseT0xLHg9bmV3IHIuVmVjdG9yMyxiPSExLHc9bmV3IHIuVmVjdG9yMixfPW5ldyByLlZlY3RvcjIsTT1uZXcgci5WZWN0b3IyLFM9bmV3IHIuVmVjdG9yMixUPW5ldyByLlZlY3RvcjIsRT1uZXcgci5WZWN0b3IyLEE9bmV3IHIuVmVjdG9yMixMPW5ldyByLlZlY3RvcjIsUj1uZXcgci5WZWN0b3IyO2Z1bmN0aW9uIFAoKXtyZXR1cm4gTWF0aC5wb3coLjk1LGwuem9vbVNwZWVkKX1mdW5jdGlvbiBDKHQpe3YudGhldGEtPXR9ZnVuY3Rpb24gSSh0KXt2LnBoaS09dH12YXIgTyxOPShPPW5ldyByLlZlY3RvcjMsZnVuY3Rpb24odCxlKXtPLnNldEZyb21NYXRyaXhDb2x1bW4oZSwwKSxPLm11bHRpcGx5U2NhbGFyKC10KSx4LmFkZChPKX0pLEQ9ZnVuY3Rpb24oKXt2YXIgdD1uZXcgci5WZWN0b3IzO3JldHVybiBmdW5jdGlvbihlLG4peyEwPT09bC5zY3JlZW5TcGFjZVBhbm5pbmc/dC5zZXRGcm9tTWF0cml4Q29sdW1uKG4sMSk6KHQuc2V0RnJvbU1hdHJpeENvbHVtbihuLDApLHQuY3Jvc3NWZWN0b3JzKGwub2JqZWN0LnVwLHQpKSx0Lm11bHRpcGx5U2NhbGFyKGUpLHguYWRkKHQpfX0oKSxCPWZ1bmN0aW9uKCl7dmFyIHQ9bmV3IHIuVmVjdG9yMztyZXR1cm4gZnVuY3Rpb24oZSxuKXt2YXIgcj1sLmRvbUVsZW1lbnQ7aWYobC5vYmplY3QuaXNQZXJzcGVjdGl2ZUNhbWVyYSl7dmFyIGk9bC5vYmplY3QucG9zaXRpb247dC5jb3B5KGkpLnN1YihsLnRhcmdldCk7dmFyIG89dC5sZW5ndGgoKTtvKj1NYXRoLnRhbihsLm9iamVjdC5mb3YvMipNYXRoLlBJLzE4MCksTigyKmUqby9yLmNsaWVudEhlaWdodCxsLm9iamVjdC5tYXRyaXgpLEQoMipuKm8vci5jbGllbnRIZWlnaHQsbC5vYmplY3QubWF0cml4KX1lbHNlIGwub2JqZWN0LmlzT3J0aG9ncmFwaGljQ2FtZXJhPyhOKGUqKGwub2JqZWN0LnJpZ2h0LWwub2JqZWN0LmxlZnQpL2wub2JqZWN0Lnpvb20vci5jbGllbnRXaWR0aCxsLm9iamVjdC5tYXRyaXgpLEQobioobC5vYmplY3QudG9wLWwub2JqZWN0LmJvdHRvbSkvbC5vYmplY3Quem9vbS9yLmNsaWVudEhlaWdodCxsLm9iamVjdC5tYXRyaXgpKTooY29uc29sZS53YXJuKFwiV0FSTklORzogT3JiaXRDb250cm9scy5qcyBlbmNvdW50ZXJlZCBhbiB1bmtub3duIGNhbWVyYSB0eXBlIC0gcGFuIGRpc2FibGVkLlwiKSxsLmVuYWJsZVBhbj0hMSl9fSgpO2Z1bmN0aW9uIEYodCl7bC5vYmplY3QuaXNQZXJzcGVjdGl2ZUNhbWVyYT95Lz10Omwub2JqZWN0LmlzT3J0aG9ncmFwaGljQ2FtZXJhPyhsLm9iamVjdC56b29tPU1hdGgubWF4KGwubWluWm9vbSxNYXRoLm1pbihsLm1heFpvb20sbC5vYmplY3Quem9vbSp0KSksbC5vYmplY3QudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpLGI9ITApOihjb25zb2xlLndhcm4oXCJXQVJOSU5HOiBPcmJpdENvbnRyb2xzLmpzIGVuY291bnRlcmVkIGFuIHVua25vd24gY2FtZXJhIHR5cGUgLSBkb2xseS96b29tIGRpc2FibGVkLlwiKSxsLmVuYWJsZVpvb209ITEpfWZ1bmN0aW9uIFUodCl7bC5vYmplY3QuaXNQZXJzcGVjdGl2ZUNhbWVyYT95Kj10Omwub2JqZWN0LmlzT3J0aG9ncmFwaGljQ2FtZXJhPyhsLm9iamVjdC56b29tPU1hdGgubWF4KGwubWluWm9vbSxNYXRoLm1pbihsLm1heFpvb20sbC5vYmplY3Quem9vbS90KSksbC5vYmplY3QudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpLGI9ITApOihjb25zb2xlLndhcm4oXCJXQVJOSU5HOiBPcmJpdENvbnRyb2xzLmpzIGVuY291bnRlcmVkIGFuIHVua25vd24gY2FtZXJhIHR5cGUgLSBkb2xseS96b29tIGRpc2FibGVkLlwiKSxsLmVuYWJsZVpvb209ITEpfWZ1bmN0aW9uIHoodCl7dy5zZXQodC5jbGllbnRYLHQuY2xpZW50WSl9ZnVuY3Rpb24gRyh0KXtTLnNldCh0LmNsaWVudFgsdC5jbGllbnRZKX1mdW5jdGlvbiBIKHQpe2lmKDE9PXQudG91Y2hlcy5sZW5ndGgpdy5zZXQodC50b3VjaGVzWzBdLnBhZ2VYLHQudG91Y2hlc1swXS5wYWdlWSk7ZWxzZXt2YXIgZT0uNSoodC50b3VjaGVzWzBdLnBhZ2VYK3QudG91Y2hlc1sxXS5wYWdlWCksbj0uNSoodC50b3VjaGVzWzBdLnBhZ2VZK3QudG91Y2hlc1sxXS5wYWdlWSk7dy5zZXQoZSxuKX19ZnVuY3Rpb24gayh0KXtpZigxPT10LnRvdWNoZXMubGVuZ3RoKVMuc2V0KHQudG91Y2hlc1swXS5wYWdlWCx0LnRvdWNoZXNbMF0ucGFnZVkpO2Vsc2V7dmFyIGU9LjUqKHQudG91Y2hlc1swXS5wYWdlWCt0LnRvdWNoZXNbMV0ucGFnZVgpLG49LjUqKHQudG91Y2hlc1swXS5wYWdlWSt0LnRvdWNoZXNbMV0ucGFnZVkpO1Muc2V0KGUsbil9fWZ1bmN0aW9uIFYodCl7dmFyIGU9dC50b3VjaGVzWzBdLnBhZ2VYLXQudG91Y2hlc1sxXS5wYWdlWCxuPXQudG91Y2hlc1swXS5wYWdlWS10LnRvdWNoZXNbMV0ucGFnZVkscj1NYXRoLnNxcnQoZSplK24qbik7QS5zZXQoMCxyKX1mdW5jdGlvbiBqKHQpe2lmKDE9PXQudG91Y2hlcy5sZW5ndGgpXy5zZXQodC50b3VjaGVzWzBdLnBhZ2VYLHQudG91Y2hlc1swXS5wYWdlWSk7ZWxzZXt2YXIgZT0uNSoodC50b3VjaGVzWzBdLnBhZ2VYK3QudG91Y2hlc1sxXS5wYWdlWCksbj0uNSoodC50b3VjaGVzWzBdLnBhZ2VZK3QudG91Y2hlc1sxXS5wYWdlWSk7Xy5zZXQoZSxuKX1NLnN1YlZlY3RvcnMoXyx3KS5tdWx0aXBseVNjYWxhcihsLnJvdGF0ZVNwZWVkKTt2YXIgcj1sLmRvbUVsZW1lbnQ7QygyKk1hdGguUEkqTS54L3IuY2xpZW50SGVpZ2h0KSxJKDIqTWF0aC5QSSpNLnkvci5jbGllbnRIZWlnaHQpLHcuY29weShfKX1mdW5jdGlvbiBXKHQpe2lmKDE9PXQudG91Y2hlcy5sZW5ndGgpVC5zZXQodC50b3VjaGVzWzBdLnBhZ2VYLHQudG91Y2hlc1swXS5wYWdlWSk7ZWxzZXt2YXIgZT0uNSoodC50b3VjaGVzWzBdLnBhZ2VYK3QudG91Y2hlc1sxXS5wYWdlWCksbj0uNSoodC50b3VjaGVzWzBdLnBhZ2VZK3QudG91Y2hlc1sxXS5wYWdlWSk7VC5zZXQoZSxuKX1FLnN1YlZlY3RvcnMoVCxTKS5tdWx0aXBseVNjYWxhcihsLnBhblNwZWVkKSxCKEUueCxFLnkpLFMuY29weShUKX1mdW5jdGlvbiBYKHQpe3ZhciBlPXQudG91Y2hlc1swXS5wYWdlWC10LnRvdWNoZXNbMV0ucGFnZVgsbj10LnRvdWNoZXNbMF0ucGFnZVktdC50b3VjaGVzWzFdLnBhZ2VZLHI9TWF0aC5zcXJ0KGUqZStuKm4pO0wuc2V0KDAsciksUi5zZXQoMCxNYXRoLnBvdyhMLnkvQS55LGwuem9vbVNwZWVkKSksRihSLnkpLEEuY29weShMKX1mdW5jdGlvbiBxKHQpe2lmKCExIT09bC5lbmFibGVkKXN3aXRjaCh0LnBvaW50ZXJUeXBlKXtjYXNlXCJtb3VzZVwiOmNhc2VcInBlblwiOiFmdW5jdGlvbih0KXt2YXIgZTtzd2l0Y2godC5wcmV2ZW50RGVmYXVsdCgpLGwuZG9tRWxlbWVudC5mb2N1cz9sLmRvbUVsZW1lbnQuZm9jdXMoKTp3aW5kb3cuZm9jdXMoKSx0LmJ1dHRvbil7Y2FzZSAwOmU9bC5tb3VzZUJ1dHRvbnMuTEVGVDticmVhaztjYXNlIDE6ZT1sLm1vdXNlQnV0dG9ucy5NSURETEU7YnJlYWs7Y2FzZSAyOmU9bC5tb3VzZUJ1dHRvbnMuUklHSFQ7YnJlYWs7ZGVmYXVsdDplPS0xfXN3aXRjaChlKXtjYXNlIHIuTU9VU0UuRE9MTFk6aWYoITE9PT1sLmVuYWJsZVpvb20pcmV0dXJuOyFmdW5jdGlvbih0KXtBLnNldCh0LmNsaWVudFgsdC5jbGllbnRZKX0odCksZj1wLkRPTExZO2JyZWFrO2Nhc2Ugci5NT1VTRS5ST1RBVEU6aWYodC5jdHJsS2V5fHx0Lm1ldGFLZXl8fHQuc2hpZnRLZXkpe2lmKCExPT09bC5lbmFibGVQYW4pcmV0dXJuO0codCksZj1wLlBBTn1lbHNle2lmKCExPT09bC5lbmFibGVSb3RhdGUpcmV0dXJuO3oodCksZj1wLlJPVEFURX1icmVhaztjYXNlIHIuTU9VU0UuUEFOOmlmKHQuY3RybEtleXx8dC5tZXRhS2V5fHx0LnNoaWZ0S2V5KXtpZighMT09PWwuZW5hYmxlUm90YXRlKXJldHVybjt6KHQpLGY9cC5ST1RBVEV9ZWxzZXtpZighMT09PWwuZW5hYmxlUGFuKXJldHVybjtHKHQpLGY9cC5QQU59YnJlYWs7ZGVmYXVsdDpmPXAuTk9ORX1mIT09cC5OT05FJiYobC5kb21FbGVtZW50Lm93bmVyRG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJtb3ZlXCIsWSwhMSksbC5kb21FbGVtZW50Lm93bmVyRG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJ1cFwiLFosITEpLGwuZGlzcGF0Y2hFdmVudChoKSl9KHQpfX1mdW5jdGlvbiBZKHQpe2lmKCExIT09bC5lbmFibGVkKXN3aXRjaCh0LnBvaW50ZXJUeXBlKXtjYXNlXCJtb3VzZVwiOmNhc2VcInBlblwiOiFmdW5jdGlvbih0KXtpZighMT09PWwuZW5hYmxlZClyZXR1cm47c3dpdGNoKHQucHJldmVudERlZmF1bHQoKSxmKXtjYXNlIHAuUk9UQVRFOmlmKCExPT09bC5lbmFibGVSb3RhdGUpcmV0dXJuOyFmdW5jdGlvbih0KXtfLnNldCh0LmNsaWVudFgsdC5jbGllbnRZKSxNLnN1YlZlY3RvcnMoXyx3KS5tdWx0aXBseVNjYWxhcihsLnJvdGF0ZVNwZWVkKTt2YXIgZT1sLmRvbUVsZW1lbnQ7QygyKk1hdGguUEkqTS54L2UuY2xpZW50SGVpZ2h0KSxJKDIqTWF0aC5QSSpNLnkvZS5jbGllbnRIZWlnaHQpLHcuY29weShfKSxsLnVwZGF0ZSgpfSh0KTticmVhaztjYXNlIHAuRE9MTFk6aWYoITE9PT1sLmVuYWJsZVpvb20pcmV0dXJuOyFmdW5jdGlvbih0KXtMLnNldCh0LmNsaWVudFgsdC5jbGllbnRZKSxSLnN1YlZlY3RvcnMoTCxBKSxSLnk+MD9GKFAoKSk6Ui55PDAmJlUoUCgpKSxBLmNvcHkoTCksbC51cGRhdGUoKX0odCk7YnJlYWs7Y2FzZSBwLlBBTjppZighMT09PWwuZW5hYmxlUGFuKXJldHVybjshZnVuY3Rpb24odCl7VC5zZXQodC5jbGllbnRYLHQuY2xpZW50WSksRS5zdWJWZWN0b3JzKFQsUykubXVsdGlwbHlTY2FsYXIobC5wYW5TcGVlZCksQihFLngsRS55KSxTLmNvcHkoVCksbC51cGRhdGUoKX0odCl9fSh0KX19ZnVuY3Rpb24gWih0KXtzd2l0Y2godC5wb2ludGVyVHlwZSl7Y2FzZVwibW91c2VcIjpjYXNlXCJwZW5cIjohZnVuY3Rpb24odCl7aWYobC5kb21FbGVtZW50Lm93bmVyRG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJtb3ZlXCIsWSwhMSksbC5kb21FbGVtZW50Lm93bmVyRG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJ1cFwiLFosITEpLCExPT09bC5lbmFibGVkKXJldHVybjtsLmRpc3BhdGNoRXZlbnQoZCksZj1wLk5PTkV9KCl9fWZ1bmN0aW9uIEoodCl7ITE9PT1sLmVuYWJsZWR8fCExPT09bC5lbmFibGVab29tfHxmIT09cC5OT05FJiZmIT09cC5ST1RBVEV8fCh0LnByZXZlbnREZWZhdWx0KCksdC5zdG9wUHJvcGFnYXRpb24oKSxsLmRpc3BhdGNoRXZlbnQoaCksZnVuY3Rpb24odCl7dC5kZWx0YVk8MD9VKFAoKSk6dC5kZWx0YVk+MCYmRihQKCkpLGwudXBkYXRlKCl9KHQpLGwuZGlzcGF0Y2hFdmVudChkKSl9ZnVuY3Rpb24gSyh0KXshMSE9PWwuZW5hYmxlZCYmITEhPT1sLmVuYWJsZUtleXMmJiExIT09bC5lbmFibGVQYW4mJmZ1bmN0aW9uKHQpe3ZhciBlPSExO3N3aXRjaCh0LmtleUNvZGUpe2Nhc2UgbC5rZXlzLlVQOkIoMCxsLmtleVBhblNwZWVkKSxlPSEwO2JyZWFrO2Nhc2UgbC5rZXlzLkJPVFRPTTpCKDAsLWwua2V5UGFuU3BlZWQpLGU9ITA7YnJlYWs7Y2FzZSBsLmtleXMuTEVGVDpCKGwua2V5UGFuU3BlZWQsMCksZT0hMDticmVhaztjYXNlIGwua2V5cy5SSUdIVDpCKC1sLmtleVBhblNwZWVkLDApLGU9ITB9ZSYmKHQucHJldmVudERlZmF1bHQoKSxsLnVwZGF0ZSgpKX0odCl9ZnVuY3Rpb24gUSh0KXtpZighMSE9PWwuZW5hYmxlZCl7c3dpdGNoKHQucHJldmVudERlZmF1bHQoKSx0LnRvdWNoZXMubGVuZ3RoKXtjYXNlIDE6c3dpdGNoKGwudG91Y2hlcy5PTkUpe2Nhc2Ugci5UT1VDSC5ST1RBVEU6aWYoITE9PT1sLmVuYWJsZVJvdGF0ZSlyZXR1cm47SCh0KSxmPXAuVE9VQ0hfUk9UQVRFO2JyZWFrO2Nhc2Ugci5UT1VDSC5QQU46aWYoITE9PT1sLmVuYWJsZVBhbilyZXR1cm47ayh0KSxmPXAuVE9VQ0hfUEFOO2JyZWFrO2RlZmF1bHQ6Zj1wLk5PTkV9YnJlYWs7Y2FzZSAyOnN3aXRjaChsLnRvdWNoZXMuVFdPKXtjYXNlIHIuVE9VQ0guRE9MTFlfUEFOOmlmKCExPT09bC5lbmFibGVab29tJiYhMT09PWwuZW5hYmxlUGFuKXJldHVybjshZnVuY3Rpb24odCl7bC5lbmFibGVab29tJiZWKHQpLGwuZW5hYmxlUGFuJiZrKHQpfSh0KSxmPXAuVE9VQ0hfRE9MTFlfUEFOO2JyZWFrO2Nhc2Ugci5UT1VDSC5ET0xMWV9ST1RBVEU6aWYoITE9PT1sLmVuYWJsZVpvb20mJiExPT09bC5lbmFibGVSb3RhdGUpcmV0dXJuOyFmdW5jdGlvbih0KXtsLmVuYWJsZVpvb20mJlYodCksbC5lbmFibGVSb3RhdGUmJkgodCl9KHQpLGY9cC5UT1VDSF9ET0xMWV9ST1RBVEU7YnJlYWs7ZGVmYXVsdDpmPXAuTk9ORX1icmVhaztkZWZhdWx0OmY9cC5OT05FfWYhPT1wLk5PTkUmJmwuZGlzcGF0Y2hFdmVudChoKX19ZnVuY3Rpb24gJCh0KXtpZighMSE9PWwuZW5hYmxlZClzd2l0Y2godC5wcmV2ZW50RGVmYXVsdCgpLHQuc3RvcFByb3BhZ2F0aW9uKCksZil7Y2FzZSBwLlRPVUNIX1JPVEFURTppZighMT09PWwuZW5hYmxlUm90YXRlKXJldHVybjtqKHQpLGwudXBkYXRlKCk7YnJlYWs7Y2FzZSBwLlRPVUNIX1BBTjppZighMT09PWwuZW5hYmxlUGFuKXJldHVybjtXKHQpLGwudXBkYXRlKCk7YnJlYWs7Y2FzZSBwLlRPVUNIX0RPTExZX1BBTjppZighMT09PWwuZW5hYmxlWm9vbSYmITE9PT1sLmVuYWJsZVBhbilyZXR1cm47IWZ1bmN0aW9uKHQpe2wuZW5hYmxlWm9vbSYmWCh0KSxsLmVuYWJsZVBhbiYmVyh0KX0odCksbC51cGRhdGUoKTticmVhaztjYXNlIHAuVE9VQ0hfRE9MTFlfUk9UQVRFOmlmKCExPT09bC5lbmFibGVab29tJiYhMT09PWwuZW5hYmxlUm90YXRlKXJldHVybjshZnVuY3Rpb24odCl7bC5lbmFibGVab29tJiZYKHQpLGwuZW5hYmxlUm90YXRlJiZqKHQpfSh0KSxsLnVwZGF0ZSgpO2JyZWFrO2RlZmF1bHQ6Zj1wLk5PTkV9fWZ1bmN0aW9uIHR0KHQpeyExIT09bC5lbmFibGVkJiYobC5kaXNwYXRjaEV2ZW50KGQpLGY9cC5OT05FKX1mdW5jdGlvbiBldCh0KXshMSE9PWwuZW5hYmxlZCYmdC5wcmV2ZW50RGVmYXVsdCgpfWwuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY29udGV4dG1lbnVcIixldCwhMSksbC5kb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVyZG93blwiLHEsITEpLGwuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwid2hlZWxcIixKLCExKSxsLmRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIixRLCExKSxsLmRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsdHQsITEpLGwuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsJCwhMSksbC5kb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsSywhMSksdGhpcy51cGRhdGUoKX07aS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShyLkV2ZW50RGlzcGF0Y2hlci5wcm90b3R5cGUpLGkucHJvdG90eXBlLmNvbnN0cnVjdG9yPWk7dmFyIG89ZnVuY3Rpb24odCxlKXtpLmNhbGwodGhpcyx0LGUpLHRoaXMuc2NyZWVuU3BhY2VQYW5uaW5nPSExLHRoaXMubW91c2VCdXR0b25zLkxFRlQ9ci5NT1VTRS5QQU4sdGhpcy5tb3VzZUJ1dHRvbnMuUklHSFQ9ci5NT1VTRS5ST1RBVEUsdGhpcy50b3VjaGVzLk9ORT1yLlRPVUNILlBBTix0aGlzLnRvdWNoZXMuVFdPPXIuVE9VQ0guRE9MTFlfUk9UQVRFfTtvLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHIuRXZlbnREaXNwYXRjaGVyLnByb3RvdHlwZSksby5wcm90b3R5cGUuY29uc3RydWN0b3I9b30sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO24ucihlKSxuLmQoZSxcIldFQkdMXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHJ9KSk7dmFyIHI9e2lzV2ViR0xBdmFpbGFibGU6ZnVuY3Rpb24oKXt0cnl7dmFyIHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtyZXR1cm4hKCF3aW5kb3cuV2ViR0xSZW5kZXJpbmdDb250ZXh0fHwhdC5nZXRDb250ZXh0KFwid2ViZ2xcIikmJiF0LmdldENvbnRleHQoXCJleHBlcmltZW50YWwtd2ViZ2xcIikpfWNhdGNoKHQpe3JldHVybiExfX0saXNXZWJHTDJBdmFpbGFibGU6ZnVuY3Rpb24oKXt0cnl7dmFyIHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtyZXR1cm4hKCF3aW5kb3cuV2ViR0wyUmVuZGVyaW5nQ29udGV4dHx8IXQuZ2V0Q29udGV4dChcIndlYmdsMlwiKSl9Y2F0Y2godCl7cmV0dXJuITF9fSxnZXRXZWJHTEVycm9yTWVzc2FnZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldEVycm9yTWVzc2FnZSgxKX0sZ2V0V2ViR0wyRXJyb3JNZXNzYWdlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0RXJyb3JNZXNzYWdlKDIpfSxnZXRFcnJvck1lc3NhZ2U6ZnVuY3Rpb24odCl7dmFyIGU9ezE6d2luZG93LldlYkdMUmVuZGVyaW5nQ29udGV4dCwyOndpbmRvdy5XZWJHTDJSZW5kZXJpbmdDb250ZXh0fSxuPSdZb3VyICQwIGRvZXMgbm90IHNlZW0gdG8gc3VwcG9ydCA8YSBocmVmPVwiaHR0cDovL2tocm9ub3Mub3JnL3dlYmdsL3dpa2kvR2V0dGluZ19hX1dlYkdMX0ltcGxlbWVudGF0aW9uXCIgc3R5bGU9XCJjb2xvcjojMDAwXCI+JDE8L2E+JyxyPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7cmV0dXJuIHIuaWQ9XCJ3ZWJnbG1lc3NhZ2VcIixyLnN0eWxlLmZvbnRGYW1pbHk9XCJtb25vc3BhY2VcIixyLnN0eWxlLmZvbnRTaXplPVwiMTNweFwiLHIuc3R5bGUuZm9udFdlaWdodD1cIm5vcm1hbFwiLHIuc3R5bGUudGV4dEFsaWduPVwiY2VudGVyXCIsci5zdHlsZS5iYWNrZ3JvdW5kPVwiI2ZmZlwiLHIuc3R5bGUuY29sb3I9XCIjMDAwXCIsci5zdHlsZS5wYWRkaW5nPVwiMS41ZW1cIixyLnN0eWxlLndpZHRoPVwiNDAwcHhcIixyLnN0eWxlLm1hcmdpbj1cIjVlbSBhdXRvIDBcIixuPShuPWVbdF0/bi5yZXBsYWNlKFwiJDBcIixcImdyYXBoaWNzIGNhcmRcIik6bi5yZXBsYWNlKFwiJDBcIixcImJyb3dzZXJcIikpLnJlcGxhY2UoXCIkMVwiLHsxOlwiV2ViR0xcIiwyOlwiV2ViR0wgMlwifVt0XSksci5pbm5lckhUTUw9bixyfX19LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtuLnIoZSksbi5kKGUsXCJSZW5kZXJQYXNzXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGl9KSk7dmFyIHI9bigxKSxpPWZ1bmN0aW9uKHQsZSxuLGksbyl7ci5hLmNhbGwodGhpcyksdGhpcy5zY2VuZT10LHRoaXMuY2FtZXJhPWUsdGhpcy5vdmVycmlkZU1hdGVyaWFsPW4sdGhpcy5jbGVhckNvbG9yPWksdGhpcy5jbGVhckFscGhhPXZvaWQgMCE9PW8/bzowLHRoaXMuY2xlYXI9ITAsdGhpcy5jbGVhckRlcHRoPSExLHRoaXMubmVlZHNTd2FwPSExfTtpLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoci5hLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOmkscmVuZGVyOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcixpLG8sYT10LmF1dG9DbGVhcjt0LmF1dG9DbGVhcj0hMSx2b2lkIDAhPT10aGlzLm92ZXJyaWRlTWF0ZXJpYWwmJihvPXRoaXMuc2NlbmUub3ZlcnJpZGVNYXRlcmlhbCx0aGlzLnNjZW5lLm92ZXJyaWRlTWF0ZXJpYWw9dGhpcy5vdmVycmlkZU1hdGVyaWFsKSx0aGlzLmNsZWFyQ29sb3ImJihyPXQuZ2V0Q2xlYXJDb2xvcigpLmdldEhleCgpLGk9dC5nZXRDbGVhckFscGhhKCksdC5zZXRDbGVhckNvbG9yKHRoaXMuY2xlYXJDb2xvcix0aGlzLmNsZWFyQWxwaGEpKSx0aGlzLmNsZWFyRGVwdGgmJnQuY2xlYXJEZXB0aCgpLHQuc2V0UmVuZGVyVGFyZ2V0KHRoaXMucmVuZGVyVG9TY3JlZW4/bnVsbDpuKSx0aGlzLmNsZWFyJiZ0LmNsZWFyKHQuYXV0b0NsZWFyQ29sb3IsdC5hdXRvQ2xlYXJEZXB0aCx0LmF1dG9DbGVhclN0ZW5jaWwpLHQucmVuZGVyKHRoaXMuc2NlbmUsdGhpcy5jYW1lcmEpLHRoaXMuY2xlYXJDb2xvciYmdC5zZXRDbGVhckNvbG9yKHIsaSksdm9pZCAwIT09dGhpcy5vdmVycmlkZU1hdGVyaWFsJiYodGhpcy5zY2VuZS5vdmVycmlkZU1hdGVyaWFsPW8pLHQuYXV0b0NsZWFyPWF9fSl9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtuLnIoZSksbi5kKGUsXCJEb3RTY3JlZW5TaGFkZXJcIiwoZnVuY3Rpb24oKXtyZXR1cm4gaX0pKTt2YXIgcj1uKDApLGk9e3VuaWZvcm1zOnt0RGlmZnVzZTp7dmFsdWU6bnVsbH0sdFNpemU6e3ZhbHVlOm5ldyByLlZlY3RvcjIoMjU2LDI1Nil9LGNlbnRlcjp7dmFsdWU6bmV3IHIuVmVjdG9yMiguNSwuNSl9LGFuZ2xlOnt2YWx1ZToxLjU3fSxzY2FsZTp7dmFsdWU6MX19LHZlcnRleFNoYWRlcjpbXCJ2YXJ5aW5nIHZlYzIgdlV2O1wiLFwidm9pZCBtYWluKCkge1wiLFwiXFx0dlV2ID0gdXY7XCIsXCJcXHRnbF9Qb3NpdGlvbiA9IHByb2plY3Rpb25NYXRyaXggKiBtb2RlbFZpZXdNYXRyaXggKiB2ZWM0KCBwb3NpdGlvbiwgMS4wICk7XCIsXCJ9XCJdLmpvaW4oXCJcXG5cIiksZnJhZ21lbnRTaGFkZXI6W1widW5pZm9ybSB2ZWMyIGNlbnRlcjtcIixcInVuaWZvcm0gZmxvYXQgYW5nbGU7XCIsXCJ1bmlmb3JtIGZsb2F0IHNjYWxlO1wiLFwidW5pZm9ybSB2ZWMyIHRTaXplO1wiLFwidW5pZm9ybSBzYW1wbGVyMkQgdERpZmZ1c2U7XCIsXCJ2YXJ5aW5nIHZlYzIgdlV2O1wiLFwiZmxvYXQgcGF0dGVybigpIHtcIixcIlxcdGZsb2F0IHMgPSBzaW4oIGFuZ2xlICksIGMgPSBjb3MoIGFuZ2xlICk7XCIsXCJcXHR2ZWMyIHRleCA9IHZVdiAqIHRTaXplIC0gY2VudGVyO1wiLFwiXFx0dmVjMiBwb2ludCA9IHZlYzIoIGMgKiB0ZXgueCAtIHMgKiB0ZXgueSwgcyAqIHRleC54ICsgYyAqIHRleC55ICkgKiBzY2FsZTtcIixcIlxcdHJldHVybiAoIHNpbiggcG9pbnQueCApICogc2luKCBwb2ludC55ICkgKSAqIDQuMDtcIixcIn1cIixcInZvaWQgbWFpbigpIHtcIixcIlxcdHZlYzQgY29sb3IgPSB0ZXh0dXJlMkQoIHREaWZmdXNlLCB2VXYgKTtcIixcIlxcdGZsb2F0IGF2ZXJhZ2UgPSAoIGNvbG9yLnIgKyBjb2xvci5nICsgY29sb3IuYiApIC8gMy4wO1wiLFwiXFx0Z2xfRnJhZ0NvbG9yID0gdmVjNCggdmVjMyggYXZlcmFnZSAqIDEwLjAgLSA1LjAgKyBwYXR0ZXJuKCkgKSwgY29sb3IuYSApO1wiLFwifVwiXS5qb2luKFwiXFxuXCIpfX0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO24ucihlKSxuLmQoZSxcIkZCWExvYWRlclwiLChmdW5jdGlvbigpe3JldHVybiBWfSkpO3ZhciByPW4oMCksaT17fSxvPWk7XG4vKiogQGxpY2Vuc2UgemxpYi5qcyAyMDEyIC0gaW1heWEgWyBodHRwczovL2dpdGh1Yi5jb20vaW1heWEvemxpYi5qcyBdIFRoZSBNSVQgTGljZW5zZSAqL2Z1bmN0aW9uIGEodCxlKXt2YXIgbixyPXQuc3BsaXQoXCIuXCIpLGk9bzshKHJbMF1pbiBpKSYmaS5leGVjU2NyaXB0JiZpLmV4ZWNTY3JpcHQoXCJ2YXIgXCIrclswXSk7Zm9yKDtyLmxlbmd0aCYmKG49ci5zaGlmdCgpKTspci5sZW5ndGh8fHZvaWQgMD09PWU/aT1pW25dP2lbbl06aVtuXT17fTppW25dPWV9dmFyIHM9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFVpbnQ4QXJyYXkmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBVaW50MTZBcnJheSYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIFVpbnQzMkFycmF5JiZcInVuZGVmaW5lZFwiIT10eXBlb2YgRGF0YVZpZXc7ZnVuY3Rpb24gYyh0KXt2YXIgZSxuLHIsaSxvLGEsYyxsLHUsaCxkPXQubGVuZ3RoLHA9MCxmPU51bWJlci5QT1NJVElWRV9JTkZJTklUWTtmb3IobD0wO2w8ZDsrK2wpdFtsXT5wJiYocD10W2xdKSx0W2xdPGYmJihmPXRbbF0pO2ZvcihlPTE8PHAsbj1uZXcocz9VaW50MzJBcnJheTpBcnJheSkoZSkscj0xLGk9MCxvPTI7cjw9cDspe2ZvcihsPTA7bDxkOysrbClpZih0W2xdPT09cil7Zm9yKGE9MCxjPWksdT0wO3U8cjsrK3UpYT1hPDwxfDEmYyxjPj49MTtmb3IoaD1yPDwxNnxsLHU9YTt1PGU7dSs9byluW3VdPWg7KytpfSsrcixpPDw9MSxvPDw9MX1yZXR1cm5bbixwLGZdfWZ1bmN0aW9uIGwodCxlKXtzd2l0Y2godGhpcy5nPVtdLHRoaXMuaD0zMjc2OCx0aGlzLmQ9dGhpcy5mPXRoaXMuYT10aGlzLmw9MCx0aGlzLmlucHV0PXM/bmV3IFVpbnQ4QXJyYXkodCk6dCx0aGlzLm09ITEsdGhpcy5pPWgsdGhpcy5yPSExLCFlJiYoZT17fSl8fChlLmluZGV4JiYodGhpcy5hPWUuaW5kZXgpLGUuYnVmZmVyU2l6ZSYmKHRoaXMuaD1lLmJ1ZmZlclNpemUpLGUuYnVmZmVyVHlwZSYmKHRoaXMuaT1lLmJ1ZmZlclR5cGUpLGUucmVzaXplJiYodGhpcy5yPWUucmVzaXplKSksdGhpcy5pKXtjYXNlIHU6dGhpcy5iPTMyNzY4LHRoaXMuYz1uZXcocz9VaW50OEFycmF5OkFycmF5KSgzMjc2OCt0aGlzLmgrMjU4KTticmVhaztjYXNlIGg6dGhpcy5iPTAsdGhpcy5jPW5ldyhzP1VpbnQ4QXJyYXk6QXJyYXkpKHRoaXMuaCksdGhpcy5lPXRoaXMueix0aGlzLm49dGhpcy52LHRoaXMuaj10aGlzLnc7YnJlYWs7ZGVmYXVsdDp0aHJvdyBFcnJvcihcImludmFsaWQgaW5mbGF0ZSBtb2RlXCIpfX12YXIgdT0wLGg9MSxkPXt0OnUsczpofTtsLnByb3RvdHlwZS5rPWZ1bmN0aW9uKCl7Zm9yKDshdGhpcy5tOyl7dmFyIHQ9Qyh0aGlzLDMpO3N3aXRjaCgxJnQmJih0aGlzLm09ITApLHQ+Pj49MSl7Y2FzZSAwOnZhciBlPXRoaXMuaW5wdXQsbj10aGlzLmEscj10aGlzLmMsaT10aGlzLmIsbz1lLmxlbmd0aCxhPXZvaWQgMCxsPXIubGVuZ3RoLGQ9dm9pZCAwO2lmKHRoaXMuZD10aGlzLmY9MCxuKzE+PW8pdGhyb3cgRXJyb3IoXCJpbnZhbGlkIHVuY29tcHJlc3NlZCBibG9jayBoZWFkZXI6IExFTlwiKTtpZihhPWVbbisrXXxlW24rK108PDgsbisxPj1vKXRocm93IEVycm9yKFwiaW52YWxpZCB1bmNvbXByZXNzZWQgYmxvY2sgaGVhZGVyOiBOTEVOXCIpO2lmKGE9PT1+KGVbbisrXXxlW24rK108PDgpKXRocm93IEVycm9yKFwiaW52YWxpZCB1bmNvbXByZXNzZWQgYmxvY2sgaGVhZGVyOiBsZW5ndGggdmVyaWZ5XCIpO2lmKG4rYT5lLmxlbmd0aCl0aHJvdyBFcnJvcihcImlucHV0IGJ1ZmZlciBpcyBicm9rZW5cIik7c3dpdGNoKHRoaXMuaSl7Y2FzZSB1OmZvcig7aSthPnIubGVuZ3RoOyl7aWYoYS09ZD1sLWkscylyLnNldChlLnN1YmFycmF5KG4sbitkKSxpKSxpKz1kLG4rPWQ7ZWxzZSBmb3IoO2QtLTspcltpKytdPWVbbisrXTt0aGlzLmI9aSxyPXRoaXMuZSgpLGk9dGhpcy5ifWJyZWFrO2Nhc2UgaDpmb3IoO2krYT5yLmxlbmd0aDspcj10aGlzLmUoe3A6Mn0pO2JyZWFrO2RlZmF1bHQ6dGhyb3cgRXJyb3IoXCJpbnZhbGlkIGluZmxhdGUgbW9kZVwiKX1pZihzKXIuc2V0KGUuc3ViYXJyYXkobixuK2EpLGkpLGkrPWEsbis9YTtlbHNlIGZvcig7YS0tOylyW2krK109ZVtuKytdO3RoaXMuYT1uLHRoaXMuYj1pLHRoaXMuYz1yO2JyZWFrO2Nhc2UgMTp0aGlzLmooTCxQKTticmVhaztjYXNlIDI6dmFyIHAsZixtLHYseT1DKHRoaXMsNSkrMjU3LHg9Qyh0aGlzLDUpKzEsYj1DKHRoaXMsNCkrNCx3PW5ldyhzP1VpbnQ4QXJyYXk6QXJyYXkpKGcubGVuZ3RoKSxfPXZvaWQgMCxNPXZvaWQgMCxTPXZvaWQgMCxUPXZvaWQgMCxFPXZvaWQgMDtmb3IoRT0wO0U8YjsrK0Upd1tnW0VdXT1DKHRoaXMsMyk7aWYoIXMpZm9yKEU9YixiPXcubGVuZ3RoO0U8YjsrK0Upd1tnW0VdXT0wO2ZvcihwPWModyksXz1uZXcocz9VaW50OEFycmF5OkFycmF5KSh5K3gpLEU9MCx2PXkreDtFPHY7KXN3aXRjaChNPUkodGhpcyxwKSxNKXtjYXNlIDE2OmZvcihUPTMrQyh0aGlzLDIpO1QtLTspX1tFKytdPVM7YnJlYWs7Y2FzZSAxNzpmb3IoVD0zK0ModGhpcywzKTtULS07KV9bRSsrXT0wO1M9MDticmVhaztjYXNlIDE4OmZvcihUPTExK0ModGhpcyw3KTtULS07KV9bRSsrXT0wO1M9MDticmVhaztkZWZhdWx0OlM9X1tFKytdPU19Zj1jKHM/Xy5zdWJhcnJheSgwLHkpOl8uc2xpY2UoMCx5KSksbT1jKHM/Xy5zdWJhcnJheSh5KTpfLnNsaWNlKHkpKSx0aGlzLmooZixtKTticmVhaztkZWZhdWx0OnRocm93IEVycm9yKFwidW5rbm93biBCVFlQRTogXCIrdCl9fXJldHVybiB0aGlzLm4oKX07dmFyIHAsZixtPVsxNiwxNywxOCwwLDgsNyw5LDYsMTAsNSwxMSw0LDEyLDMsMTMsMiwxNCwxLDE1XSxnPXM/bmV3IFVpbnQxNkFycmF5KG0pOm0sdj1bMyw0LDUsNiw3LDgsOSwxMCwxMSwxMywxNSwxNywxOSwyMywyNywzMSwzNSw0Myw1MSw1OSw2Nyw4Myw5OSwxMTUsMTMxLDE2MywxOTUsMjI3LDI1OCwyNTgsMjU4XSx5PXM/bmV3IFVpbnQxNkFycmF5KHYpOnYseD1bMCwwLDAsMCwwLDAsMCwwLDEsMSwxLDEsMiwyLDIsMiwzLDMsMywzLDQsNCw0LDQsNSw1LDUsNSwwLDAsMF0sYj1zP25ldyBVaW50OEFycmF5KHgpOngsdz1bMSwyLDMsNCw1LDcsOSwxMywxNywyNSwzMyw0OSw2NSw5NywxMjksMTkzLDI1NywzODUsNTEzLDc2OSwxMDI1LDE1MzcsMjA0OSwzMDczLDQwOTcsNjE0NSw4MTkzLDEyMjg5LDE2Mzg1LDI0NTc3XSxfPXM/bmV3IFVpbnQxNkFycmF5KHcpOncsTT1bMCwwLDAsMCwxLDEsMiwyLDMsMyw0LDQsNSw1LDYsNiw3LDcsOCw4LDksOSwxMCwxMCwxMSwxMSwxMiwxMiwxMywxM10sUz1zP25ldyBVaW50OEFycmF5KE0pOk0sVD1uZXcocz9VaW50OEFycmF5OkFycmF5KSgyODgpO2ZvcihwPTAsZj1ULmxlbmd0aDtwPGY7KytwKVRbcF09MTQzPj1wPzg6MjU1Pj1wPzk6Mjc5Pj1wPzc6ODt2YXIgRSxBLEw9YyhUKSxSPW5ldyhzP1VpbnQ4QXJyYXk6QXJyYXkpKDMwKTtmb3IoRT0wLEE9Ui5sZW5ndGg7RTxBOysrRSlSW0VdPTU7dmFyIFA9YyhSKTtmdW5jdGlvbiBDKHQsZSl7Zm9yKHZhciBuLHI9dC5mLGk9dC5kLG89dC5pbnB1dCxhPXQuYSxzPW8ubGVuZ3RoO2k8ZTspe2lmKGE+PXMpdGhyb3cgRXJyb3IoXCJpbnB1dCBidWZmZXIgaXMgYnJva2VuXCIpO3J8PW9bYSsrXTw8aSxpKz04fXJldHVybiBuPXImKDE8PGUpLTEsdC5mPXI+Pj5lLHQuZD1pLWUsdC5hPWEsbn1mdW5jdGlvbiBJKHQsZSl7Zm9yKHZhciBuLHIsaT10LmYsbz10LmQsYT10LmlucHV0LHM9dC5hLGM9YS5sZW5ndGgsbD1lWzBdLHU9ZVsxXTtvPHUmJiEocz49Yyk7KWl8PWFbcysrXTw8byxvKz04O2lmKChyPShuPWxbaSYoMTw8dSktMV0pPj4+MTYpPm8pdGhyb3cgRXJyb3IoXCJpbnZhbGlkIGNvZGUgbGVuZ3RoOiBcIityKTtyZXR1cm4gdC5mPWk+PnIsdC5kPW8tcix0LmE9cyw2NTUzNSZufWZ1bmN0aW9uIE8odCxlKXt2YXIgbixyO3N3aXRjaCh0aGlzLmlucHV0PXQsdGhpcy5hPTAsIWUmJihlPXt9KXx8KGUuaW5kZXgmJih0aGlzLmE9ZS5pbmRleCksZS52ZXJpZnkmJih0aGlzLkE9ZS52ZXJpZnkpKSxuPXRbdGhpcy5hKytdLHI9dFt0aGlzLmErK10sMTUmbil7Y2FzZSBOOnRoaXMubWV0aG9kPU47YnJlYWs7ZGVmYXVsdDp0aHJvdyBFcnJvcihcInVuc3VwcG9ydGVkIGNvbXByZXNzaW9uIG1ldGhvZFwiKX1pZigwIT0oKG48PDgpK3IpJTMxKXRocm93IEVycm9yKFwiaW52YWxpZCBmY2hlY2sgZmxhZzpcIisoKG48PDgpK3IpJTMxKTtpZigzMiZyKXRocm93IEVycm9yKFwiZmRpY3QgZmxhZyBpcyBub3Qgc3VwcG9ydGVkXCIpO3RoaXMucT1uZXcgbCh0LHtpbmRleDp0aGlzLmEsYnVmZmVyU2l6ZTplLmJ1ZmZlclNpemUsYnVmZmVyVHlwZTplLmJ1ZmZlclR5cGUscmVzaXplOmUucmVzaXplfSl9bC5wcm90b3R5cGUuaj1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuYyxyPXRoaXMuYjt0aGlzLm89dDtmb3IodmFyIGksbyxhLHMsYz1uLmxlbmd0aC0yNTg7MjU2IT09KGk9SSh0aGlzLHQpKTspaWYoMjU2Pmkpcj49YyYmKHRoaXMuYj1yLG49dGhpcy5lKCkscj10aGlzLmIpLG5bcisrXT1pO2Vsc2UgZm9yKHM9eVtvPWktMjU3XSwwPGJbb10mJihzKz1DKHRoaXMsYltvXSkpLGk9SSh0aGlzLGUpLGE9X1tpXSwwPFNbaV0mJihhKz1DKHRoaXMsU1tpXSkpLHI+PWMmJih0aGlzLmI9cixuPXRoaXMuZSgpLHI9dGhpcy5iKTtzLS07KW5bcl09bltyKystYV07Zm9yKDs4PD10aGlzLmQ7KXRoaXMuZC09OCx0aGlzLmEtLTt0aGlzLmI9cn0sbC5wcm90b3R5cGUudz1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuYyxyPXRoaXMuYjt0aGlzLm89dDtmb3IodmFyIGksbyxhLHMsYz1uLmxlbmd0aDsyNTYhPT0oaT1JKHRoaXMsdCkpOylpZigyNTY+aSlyPj1jJiYoYz0obj10aGlzLmUoKSkubGVuZ3RoKSxuW3IrK109aTtlbHNlIGZvcihzPXlbbz1pLTI1N10sMDxiW29dJiYocys9Qyh0aGlzLGJbb10pKSxpPUkodGhpcyxlKSxhPV9baV0sMDxTW2ldJiYoYSs9Qyh0aGlzLFNbaV0pKSxyK3M+YyYmKGM9KG49dGhpcy5lKCkpLmxlbmd0aCk7cy0tOyluW3JdPW5bcisrLWFdO2Zvcig7ODw9dGhpcy5kOyl0aGlzLmQtPTgsdGhpcy5hLS07dGhpcy5iPXJ9LGwucHJvdG90eXBlLmU9ZnVuY3Rpb24oKXt2YXIgdCxlLG49bmV3KHM/VWludDhBcnJheTpBcnJheSkodGhpcy5iLTMyNzY4KSxyPXRoaXMuYi0zMjc2OCxpPXRoaXMuYztpZihzKW4uc2V0KGkuc3ViYXJyYXkoMzI3Njgsbi5sZW5ndGgpKTtlbHNlIGZvcih0PTAsZT1uLmxlbmd0aDt0PGU7Kyt0KW5bdF09aVt0KzMyNzY4XTtpZih0aGlzLmcucHVzaChuKSx0aGlzLmwrPW4ubGVuZ3RoLHMpaS5zZXQoaS5zdWJhcnJheShyLHIrMzI3NjgpKTtlbHNlIGZvcih0PTA7MzI3Njg+dDsrK3QpaVt0XT1pW3IrdF07cmV0dXJuIHRoaXMuYj0zMjc2OCxpfSxsLnByb3RvdHlwZS56PWZ1bmN0aW9uKHQpe3ZhciBlLG4scixpPXRoaXMuaW5wdXQubGVuZ3RoL3RoaXMuYSsxfDAsbz10aGlzLmlucHV0LGE9dGhpcy5jO3JldHVybiB0JiYoXCJudW1iZXJcIj09dHlwZW9mIHQucCYmKGk9dC5wKSxcIm51bWJlclwiPT10eXBlb2YgdC51JiYoaSs9dC51KSksMj5pP249KHI9KG8ubGVuZ3RoLXRoaXMuYSkvdGhpcy5vWzJdLzIqMjU4fDApPGEubGVuZ3RoP2EubGVuZ3RoK3I6YS5sZW5ndGg8PDE6bj1hLmxlbmd0aCppLHM/KGU9bmV3IFVpbnQ4QXJyYXkobikpLnNldChhKTplPWEsdGhpcy5jPWV9LGwucHJvdG90eXBlLm49ZnVuY3Rpb24oKXt2YXIgdCxlLG4scixpLG89MCxhPXRoaXMuYyxjPXRoaXMuZyxsPW5ldyhzP1VpbnQ4QXJyYXk6QXJyYXkpKHRoaXMubCsodGhpcy5iLTMyNzY4KSk7aWYoMD09PWMubGVuZ3RoKXJldHVybiBzP3RoaXMuYy5zdWJhcnJheSgzMjc2OCx0aGlzLmIpOnRoaXMuYy5zbGljZSgzMjc2OCx0aGlzLmIpO2ZvcihlPTAsbj1jLmxlbmd0aDtlPG47KytlKWZvcihyPTAsaT0odD1jW2VdKS5sZW5ndGg7cjxpOysrcilsW28rK109dFtyXTtmb3IoZT0zMjc2OCxuPXRoaXMuYjtlPG47KytlKWxbbysrXT1hW2VdO3JldHVybiB0aGlzLmc9W10sdGhpcy5idWZmZXI9bH0sbC5wcm90b3R5cGUudj1mdW5jdGlvbigpe3ZhciB0LGU9dGhpcy5iO3JldHVybiBzP3RoaXMucj8odD1uZXcgVWludDhBcnJheShlKSkuc2V0KHRoaXMuYy5zdWJhcnJheSgwLGUpKTp0PXRoaXMuYy5zdWJhcnJheSgwLGUpOih0aGlzLmMubGVuZ3RoPmUmJih0aGlzLmMubGVuZ3RoPWUpLHQ9dGhpcy5jKSx0aGlzLmJ1ZmZlcj10fSxPLnByb3RvdHlwZS5rPWZ1bmN0aW9uKCl7dmFyIHQsZSxuPXRoaXMuaW5wdXQ7aWYodD10aGlzLnEuaygpLHRoaXMuYT10aGlzLnEuYSx0aGlzLkEpe2U9KG5bdGhpcy5hKytdPDwyNHxuW3RoaXMuYSsrXTw8MTZ8blt0aGlzLmErK108PDh8blt0aGlzLmErK10pPj4+MDt2YXIgcj10O2lmKFwic3RyaW5nXCI9PXR5cGVvZiByKXt2YXIgaSxvLGE9ci5zcGxpdChcIlwiKTtmb3IoaT0wLG89YS5sZW5ndGg7aTxvO2krKylhW2ldPSgyNTUmYVtpXS5jaGFyQ29kZUF0KDApKT4+PjA7cj1hfWZvcih2YXIgcyxjPTEsbD0wLHU9ci5sZW5ndGgsaD0wOzA8dTspe3UtPXM9MTAyNDx1PzEwMjQ6dTtkb3tsKz1jKz1yW2grK119d2hpbGUoLS1zKTtjJT02NTUyMSxsJT02NTUyMX1pZihlIT09KGw8PDE2fGMpPj4+MCl0aHJvdyBFcnJvcihcImludmFsaWQgYWRsZXItMzIgY2hlY2tzdW1cIil9cmV0dXJuIHR9O3ZhciBOPTg7YShcIlpsaWIuSW5mbGF0ZVwiLE8pLGEoXCJabGliLkluZmxhdGUucHJvdG90eXBlLmRlY29tcHJlc3NcIixPLnByb3RvdHlwZS5rKTt2YXIgRCxCLEYsVSx6PXtBREFQVElWRTpkLnMsQkxPQ0s6ZC50fTtpZihPYmplY3Qua2V5cylEPU9iamVjdC5rZXlzKHopO2Vsc2UgZm9yKEIgaW4gRD1bXSxGPTAseilEW0YrK109Qjtmb3IoRj0wLFU9RC5sZW5ndGg7RjxVOysrRilhKFwiWmxpYi5JbmZsYXRlLkJ1ZmZlclR5cGUuXCIrKEI9RFtGXSkseltCXSk7dmFyIEc9aS5abGliLkluZmxhdGUsSD17ZmluZFNwYW46ZnVuY3Rpb24odCxlLG4pe3ZhciByPW4ubGVuZ3RoLXQtMTtpZihlPj1uW3JdKXJldHVybiByLTE7aWYoZTw9blt0XSlyZXR1cm4gdDtmb3IodmFyIGk9dCxvPXIsYT1NYXRoLmZsb29yKChpK28pLzIpO2U8blthXXx8ZT49blthKzFdOyllPG5bYV0/bz1hOmk9YSxhPU1hdGguZmxvb3IoKGkrbykvMik7cmV0dXJuIGF9LGNhbGNCYXNpc0Z1bmN0aW9uczpmdW5jdGlvbih0LGUsbixyKXt2YXIgaT1bXSxvPVtdLGE9W107aVswXT0xO2Zvcih2YXIgcz0xO3M8PW47KytzKXtvW3NdPWUtclt0KzEtc10sYVtzXT1yW3Qrc10tZTtmb3IodmFyIGM9MCxsPTA7bDxzOysrbCl7dmFyIHU9YVtsKzFdLGg9b1tzLWxdLGQ9aVtsXS8odStoKTtpW2xdPWMrdSpkLGM9aCpkfWlbc109Y31yZXR1cm4gaX0sY2FsY0JTcGxpbmVQb2ludDpmdW5jdGlvbih0LGUsbixpKXtmb3IodmFyIG89dGhpcy5maW5kU3Bhbih0LGksZSksYT10aGlzLmNhbGNCYXNpc0Z1bmN0aW9ucyhvLGksdCxlKSxzPW5ldyByLlZlY3RvcjQoMCwwLDAsMCksYz0wO2M8PXQ7KytjKXt2YXIgbD1uW28tdCtjXSx1PWFbY10saD1sLncqdTtzLngrPWwueCpoLHMueSs9bC55Kmgscy56Kz1sLnoqaCxzLncrPWwudyp1fXJldHVybiBzfSxjYWxjQmFzaXNGdW5jdGlvbkRlcml2YXRpdmVzOmZ1bmN0aW9uKHQsZSxuLHIsaSl7Zm9yKHZhciBvPVtdLGE9MDthPD1uOysrYSlvW2FdPTA7dmFyIHM9W107Zm9yKGE9MDthPD1yOysrYSlzW2FdPW8uc2xpY2UoMCk7dmFyIGM9W107Zm9yKGE9MDthPD1uOysrYSljW2FdPW8uc2xpY2UoMCk7Y1swXVswXT0xO2Zvcih2YXIgbD1vLnNsaWNlKDApLHU9by5zbGljZSgwKSxoPTE7aDw9bjsrK2gpe2xbaF09ZS1pW3QrMS1oXSx1W2hdPWlbdCtoXS1lO2Zvcih2YXIgZD0wLHA9MDtwPGg7KytwKXt2YXIgZj11W3ArMV0sbT1sW2gtcF07Y1toXVtwXT1mK207dmFyIGc9Y1twXVtoLTFdL2NbaF1bcF07Y1twXVtoXT1kK2YqZyxkPW0qZ31jW2hdW2hdPWR9Zm9yKGg9MDtoPD1uOysraClzWzBdW2hdPWNbaF1bbl07Zm9yKHA9MDtwPD1uOysrcCl7dmFyIHY9MCx5PTEseD1bXTtmb3IoYT0wO2E8PW47KythKXhbYV09by5zbGljZSgwKTt4WzBdWzBdPTE7Zm9yKHZhciBiPTE7Yjw9cjsrK2Ipe3ZhciB3PTAsXz1wLWIsTT1uLWI7cD49YiYmKHhbeV1bMF09eFt2XVswXS9jW00rMV1bX10sdz14W3ldWzBdKmNbX11bTV0pO3ZhciBTPXAtMTw9TT9iLTE6bi1wO2ZvcihoPV8+PS0xPzE6LV87aDw9UzsrK2gpeFt5XVtoXT0oeFt2XVtoXS14W3ZdW2gtMV0pL2NbTSsxXVtfK2hdLHcrPXhbeV1baF0qY1tfK2hdW01dO3A8PU0mJih4W3ldW2JdPS14W3ZdW2ItMV0vY1tNKzFdW3BdLHcrPXhbeV1bYl0qY1twXVtNXSksc1tiXVtwXT13O2g9djt2PXkseT1ofX1mb3IocD1uLGI9MTtiPD1yOysrYil7Zm9yKGg9MDtoPD1uOysraClzW2JdW2hdKj1wO3AqPW4tYn1yZXR1cm4gc30sY2FsY0JTcGxpbmVEZXJpdmF0aXZlczpmdW5jdGlvbih0LGUsbixpLG8pe2Zvcih2YXIgYT1vPHQ/bzp0LHM9W10sYz10aGlzLmZpbmRTcGFuKHQsaSxlKSxsPXRoaXMuY2FsY0Jhc2lzRnVuY3Rpb25EZXJpdmF0aXZlcyhjLGksdCxhLGUpLHU9W10saD0wO2g8bi5sZW5ndGg7KytoKXt2YXIgZD0oZj1uW2hdLmNsb25lKCkpLnc7Zi54Kj1kLGYueSo9ZCxmLnoqPWQsdVtoXT1mfWZvcih2YXIgcD0wO3A8PWE7KytwKXtmb3IodmFyIGY9dVtjLXRdLmNsb25lKCkubXVsdGlwbHlTY2FsYXIobFtwXVswXSksbT0xO208PXQ7KyttKWYuYWRkKHVbYy10K21dLmNsb25lKCkubXVsdGlwbHlTY2FsYXIobFtwXVttXSkpO3NbcF09Zn1mb3IocD1hKzE7cDw9bysxOysrcClzW3BdPW5ldyByLlZlY3RvcjQoMCwwLDApO3JldHVybiBzfSxjYWxjS292ZXJJOmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPTEscj0yO3I8PXQ7KytyKW4qPXI7dmFyIGk9MTtmb3Iocj0yO3I8PWU7KytyKWkqPXI7Zm9yKHI9MjtyPD10LWU7KytyKWkqPXI7cmV0dXJuIG4vaX0sY2FsY1JhdGlvbmFsQ3VydmVEZXJpdmF0aXZlczpmdW5jdGlvbih0KXtmb3IodmFyIGU9dC5sZW5ndGgsbj1bXSxpPVtdLG89MDtvPGU7KytvKXt2YXIgYT10W29dO25bb109bmV3IHIuVmVjdG9yMyhhLngsYS55LGEueiksaVtvXT1hLnd9Zm9yKHZhciBzPVtdLGM9MDtjPGU7KytjKXt2YXIgbD1uW2NdLmNsb25lKCk7Zm9yKG89MTtvPD1jOysrbylsLnN1YihzW2Mtb10uY2xvbmUoKS5tdWx0aXBseVNjYWxhcih0aGlzLmNhbGNLb3ZlckkoYyxvKSppW29dKSk7c1tjXT1sLmRpdmlkZVNjYWxhcihpWzBdKX1yZXR1cm4gc30sY2FsY05VUkJTRGVyaXZhdGl2ZXM6ZnVuY3Rpb24odCxlLG4scixpKXt2YXIgbz10aGlzLmNhbGNCU3BsaW5lRGVyaXZhdGl2ZXModCxlLG4scixpKTtyZXR1cm4gdGhpcy5jYWxjUmF0aW9uYWxDdXJ2ZURlcml2YXRpdmVzKG8pfSxjYWxjU3VyZmFjZVBvaW50OmZ1bmN0aW9uKHQsZSxuLGksbyxhLHMsYyl7Zm9yKHZhciBsPXRoaXMuZmluZFNwYW4odCxhLG4pLHU9dGhpcy5maW5kU3BhbihlLHMsaSksaD10aGlzLmNhbGNCYXNpc0Z1bmN0aW9ucyhsLGEsdCxuKSxkPXRoaXMuY2FsY0Jhc2lzRnVuY3Rpb25zKHUscyxlLGkpLHA9W10sZj0wO2Y8PWU7KytmKXtwW2ZdPW5ldyByLlZlY3RvcjQoMCwwLDAsMCk7Zm9yKHZhciBtPTA7bTw9dDsrK20pe3ZhciBnPW9bbC10K21dW3UtZStmXS5jbG9uZSgpLHY9Zy53O2cueCo9dixnLnkqPXYsZy56Kj12LHBbZl0uYWRkKGcubXVsdGlwbHlTY2FsYXIoaFttXSkpfX12YXIgeT1uZXcgci5WZWN0b3I0KDAsMCwwLDApO2ZvcihmPTA7Zjw9ZTsrK2YpeS5hZGQocFtmXS5tdWx0aXBseVNjYWxhcihkW2ZdKSk7eS5kaXZpZGVTY2FsYXIoeS53KSxjLnNldCh5LngseS55LHkueil9fSxrPWZ1bmN0aW9uKHQsZSxuLGksbyl7ci5DdXJ2ZS5jYWxsKHRoaXMpLHRoaXMuZGVncmVlPXQsdGhpcy5rbm90cz1lLHRoaXMuY29udHJvbFBvaW50cz1bXSx0aGlzLnN0YXJ0S25vdD1pfHwwLHRoaXMuZW5kS25vdD1vfHx0aGlzLmtub3RzLmxlbmd0aC0xO2Zvcih2YXIgYT0wO2E8bi5sZW5ndGg7KythKXt2YXIgcz1uW2FdO3RoaXMuY29udHJvbFBvaW50c1thXT1uZXcgci5WZWN0b3I0KHMueCxzLnkscy56LHMudyl9fTsoay5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShyLkN1cnZlLnByb3RvdHlwZSkpLmNvbnN0cnVjdG9yPWssay5wcm90b3R5cGUuZ2V0UG9pbnQ9ZnVuY3Rpb24odCxlKXt2YXIgbj1lfHxuZXcgci5WZWN0b3IzLGk9dGhpcy5rbm90c1t0aGlzLnN0YXJ0S25vdF0rdCoodGhpcy5rbm90c1t0aGlzLmVuZEtub3RdLXRoaXMua25vdHNbdGhpcy5zdGFydEtub3RdKSxvPUguY2FsY0JTcGxpbmVQb2ludCh0aGlzLmRlZ3JlZSx0aGlzLmtub3RzLHRoaXMuY29udHJvbFBvaW50cyxpKTtyZXR1cm4gMSE9by53JiZvLmRpdmlkZVNjYWxhcihvLncpLG4uc2V0KG8ueCxvLnksby56KX0say5wcm90b3R5cGUuZ2V0VGFuZ2VudD1mdW5jdGlvbih0LGUpe3ZhciBuPWV8fG5ldyByLlZlY3RvcjMsaT10aGlzLmtub3RzWzBdK3QqKHRoaXMua25vdHNbdGhpcy5rbm90cy5sZW5ndGgtMV0tdGhpcy5rbm90c1swXSksbz1ILmNhbGNOVVJCU0Rlcml2YXRpdmVzKHRoaXMuZGVncmVlLHRoaXMua25vdHMsdGhpcy5jb250cm9sUG9pbnRzLGksMSk7cmV0dXJuIG4uY29weShvWzFdKS5ub3JtYWxpemUoKSxufTt2YXIgVj1mdW5jdGlvbigpe3ZhciB0LGUsbjtmdW5jdGlvbiBpKHQpe3IuTG9hZGVyLmNhbGwodGhpcyx0KX1mdW5jdGlvbiBvKHQsZSl7dGhpcy50ZXh0dXJlTG9hZGVyPXQsdGhpcy5tYW5hZ2VyPWV9ZnVuY3Rpb24gYSgpe31mdW5jdGlvbiBzKCl7fWZ1bmN0aW9uIGMoKXt9ZnVuY3Rpb24gbCgpe31mdW5jdGlvbiB1KHQsZSl7dGhpcy5kdj1uZXcgRGF0YVZpZXcodCksdGhpcy5vZmZzZXQ9MCx0aGlzLmxpdHRsZUVuZGlhbj12b2lkIDA9PT1lfHxlfWZ1bmN0aW9uIGgoKXt9ZnVuY3Rpb24gZCh0KXt2YXIgZT10Lm1hdGNoKC9GQlhWZXJzaW9uOiAoXFxkKykvKTtpZihlKXJldHVybiBwYXJzZUludChlWzFdKTt0aHJvdyBuZXcgRXJyb3IoXCJUSFJFRS5GQlhMb2FkZXI6IENhbm5vdCBmaW5kIHRoZSB2ZXJzaW9uIG51bWJlciBmb3IgdGhlIGZpbGUgZ2l2ZW4uXCIpfWZ1bmN0aW9uIHAodCl7cmV0dXJuIHQvNDYxODYxNThlM31pLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoci5Mb2FkZXIucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6aSxsb2FkOmZ1bmN0aW9uKHQsZSxuLGkpe3ZhciBvPXRoaXMsYT1cIlwiPT09by5wYXRoP3IuTG9hZGVyVXRpbHMuZXh0cmFjdFVybEJhc2UodCk6by5wYXRoLHM9bmV3IHIuRmlsZUxvYWRlcih0aGlzLm1hbmFnZXIpO3Muc2V0UGF0aChvLnBhdGgpLHMuc2V0UmVzcG9uc2VUeXBlKFwiYXJyYXlidWZmZXJcIikscy5zZXRSZXF1ZXN0SGVhZGVyKG8ucmVxdWVzdEhlYWRlcikscy5zZXRXaXRoQ3JlZGVudGlhbHMoby53aXRoQ3JlZGVudGlhbHMpLHMubG9hZCh0LChmdW5jdGlvbihuKXt0cnl7ZShvLnBhcnNlKG4sYSkpfWNhdGNoKGUpe2k/aShlKTpjb25zb2xlLmVycm9yKGUpLG8ubWFuYWdlci5pdGVtRXJyb3IodCl9fSksbixpKX0scGFyc2U6ZnVuY3Rpb24oZSxuKXtpZihzPVwiS2F5ZGFyYSBGQlggQmluYXJ5ICBcXDBcIiwoYT1lKS5ieXRlTGVuZ3RoPj1zLmxlbmd0aCYmcz09PXcoYSwwLHMubGVuZ3RoKSl0PShuZXcgbCkucGFyc2UoZSk7ZWxzZXt2YXIgaT13KGUpO2lmKCFmdW5jdGlvbih0KXt2YXIgZT1bXCJLXCIsXCJhXCIsXCJ5XCIsXCJkXCIsXCJhXCIsXCJyXCIsXCJhXCIsXCJcXFxcXCIsXCJGXCIsXCJCXCIsXCJYXCIsXCJcXFxcXCIsXCJCXCIsXCJpXCIsXCJuXCIsXCJhXCIsXCJyXCIsXCJ5XCIsXCJcXFxcXCIsXCJcXFxcXCJdLG49MDtmb3IodmFyIHI9MDtyPGUubGVuZ3RoOysrcil7aWYoKG89dm9pZCAwLG89dFsoaT0xKS0xXSx0PXQuc2xpY2UobitpKSxuKyssbyk9PT1lW3JdKXJldHVybiExfXZhciBpLG87cmV0dXJuITB9KGkpKXRocm93IG5ldyBFcnJvcihcIlRIUkVFLkZCWExvYWRlcjogVW5rbm93biBmb3JtYXQuXCIpO2lmKGQoaSk8N2UzKXRocm93IG5ldyBFcnJvcihcIlRIUkVFLkZCWExvYWRlcjogRkJYIHZlcnNpb24gbm90IHN1cHBvcnRlZCwgRmlsZVZlcnNpb246IFwiK2QoaSkpO3Q9KG5ldyBjKS5wYXJzZShpKX12YXIgYSxzO3JldHVybiBuZXcgbyhuZXcgci5UZXh0dXJlTG9hZGVyKHRoaXMubWFuYWdlcikuc2V0UGF0aCh0aGlzLnJlc291cmNlUGF0aHx8bikuc2V0Q3Jvc3NPcmlnaW4odGhpcy5jcm9zc09yaWdpbiksdGhpcy5tYW5hZ2VyKS5wYXJzZSh0KX19KSxvLnByb3RvdHlwZT17Y29uc3RydWN0b3I6byxwYXJzZTpmdW5jdGlvbigpe2U9dGhpcy5wYXJzZUNvbm5lY3Rpb25zKCk7dmFyIHQ9dGhpcy5wYXJzZUltYWdlcygpLHI9dGhpcy5wYXJzZVRleHR1cmVzKHQpLGk9dGhpcy5wYXJzZU1hdGVyaWFscyhyKSxvPXRoaXMucGFyc2VEZWZvcm1lcnMoKSxzPShuZXcgYSkucGFyc2Uobyk7cmV0dXJuIHRoaXMucGFyc2VTY2VuZShvLHMsaSksbn0scGFyc2VDb25uZWN0aW9uczpmdW5jdGlvbigpe3ZhciBlPW5ldyBNYXA7XCJDb25uZWN0aW9uc1wiaW4gdCYmdC5Db25uZWN0aW9ucy5jb25uZWN0aW9ucy5mb3JFYWNoKChmdW5jdGlvbih0KXt2YXIgbj10WzBdLHI9dFsxXSxpPXRbMl07ZS5oYXMobil8fGUuc2V0KG4se3BhcmVudHM6W10sY2hpbGRyZW46W119KTt2YXIgbz17SUQ6cixyZWxhdGlvbnNoaXA6aX07ZS5nZXQobikucGFyZW50cy5wdXNoKG8pLGUuaGFzKHIpfHxlLnNldChyLHtwYXJlbnRzOltdLGNoaWxkcmVuOltdfSk7dmFyIGE9e0lEOm4scmVsYXRpb25zaGlwOml9O2UuZ2V0KHIpLmNoaWxkcmVuLnB1c2goYSl9KSk7cmV0dXJuIGV9LHBhcnNlSW1hZ2VzOmZ1bmN0aW9uKCl7dmFyIGU9e30sbj17fTtpZihcIlZpZGVvXCJpbiB0Lk9iamVjdHMpe3ZhciByPXQuT2JqZWN0cy5WaWRlbztmb3IodmFyIGkgaW4gcil7dmFyIG89cltpXTtpZihlW2w9cGFyc2VJbnQoaSldPW8uUmVsYXRpdmVGaWxlbmFtZXx8by5GaWxlbmFtZSxcIkNvbnRlbnRcImluIG8pe3ZhciBhPW8uQ29udGVudCBpbnN0YW5jZW9mIEFycmF5QnVmZmVyJiZvLkNvbnRlbnQuYnl0ZUxlbmd0aD4wLHM9XCJzdHJpbmdcIj09dHlwZW9mIG8uQ29udGVudCYmXCJcIiE9PW8uQ29udGVudDtpZihhfHxzKXt2YXIgYz10aGlzLnBhcnNlSW1hZ2UocltpXSk7bltvLlJlbGF0aXZlRmlsZW5hbWV8fG8uRmlsZW5hbWVdPWN9fX19Zm9yKHZhciBsIGluIGUpe3ZhciB1PWVbbF07dm9pZCAwIT09blt1XT9lW2xdPW5bdV06ZVtsXT1lW2xdLnNwbGl0KFwiXFxcXFwiKS5wb3AoKX1yZXR1cm4gZX0scGFyc2VJbWFnZTpmdW5jdGlvbih0KXt2YXIgZSxuPXQuQ29udGVudCxyPXQuUmVsYXRpdmVGaWxlbmFtZXx8dC5GaWxlbmFtZSxpPXIuc2xpY2Uoci5sYXN0SW5kZXhPZihcIi5cIikrMSkudG9Mb3dlckNhc2UoKTtzd2l0Y2goaSl7Y2FzZVwiYm1wXCI6ZT1cImltYWdlL2JtcFwiO2JyZWFrO2Nhc2VcImpwZ1wiOmNhc2VcImpwZWdcIjplPVwiaW1hZ2UvanBlZ1wiO2JyZWFrO2Nhc2VcInBuZ1wiOmU9XCJpbWFnZS9wbmdcIjticmVhaztjYXNlXCJ0aWZcIjplPVwiaW1hZ2UvdGlmZlwiO2JyZWFrO2Nhc2VcInRnYVwiOm51bGw9PT10aGlzLm1hbmFnZXIuZ2V0SGFuZGxlcihcIi50Z2FcIikmJmNvbnNvbGUud2FybihcIkZCWExvYWRlcjogVEdBIGxvYWRlciBub3QgZm91bmQsIHNraXBwaW5nIFwiLHIpLGU9XCJpbWFnZS90Z2FcIjticmVhaztkZWZhdWx0OnJldHVybiB2b2lkIGNvbnNvbGUud2FybignRkJYTG9hZGVyOiBJbWFnZSB0eXBlIFwiJytpKydcIiBpcyBub3Qgc3VwcG9ydGVkLicpfWlmKFwic3RyaW5nXCI9PXR5cGVvZiBuKXJldHVyblwiZGF0YTpcIitlK1wiO2Jhc2U2NCxcIituO3ZhciBvPW5ldyBVaW50OEFycmF5KG4pO3JldHVybiB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChuZXcgQmxvYihbb10se3R5cGU6ZX0pKX0scGFyc2VUZXh0dXJlczpmdW5jdGlvbihlKXt2YXIgbj1uZXcgTWFwO2lmKFwiVGV4dHVyZVwiaW4gdC5PYmplY3RzKXt2YXIgcj10Lk9iamVjdHMuVGV4dHVyZTtmb3IodmFyIGkgaW4gcil7dmFyIG89dGhpcy5wYXJzZVRleHR1cmUocltpXSxlKTtuLnNldChwYXJzZUludChpKSxvKX19cmV0dXJuIG59LHBhcnNlVGV4dHVyZTpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMubG9hZFRleHR1cmUodCxlKTtuLklEPXQuaWQsbi5uYW1lPXQuYXR0ck5hbWU7dmFyIGk9dC5XcmFwTW9kZVUsbz10LldyYXBNb2RlVixhPXZvaWQgMCE9PWk/aS52YWx1ZTowLHM9dm9pZCAwIT09bz9vLnZhbHVlOjA7aWYobi53cmFwUz0wPT09YT9yLlJlcGVhdFdyYXBwaW5nOnIuQ2xhbXBUb0VkZ2VXcmFwcGluZyxuLndyYXBUPTA9PT1zP3IuUmVwZWF0V3JhcHBpbmc6ci5DbGFtcFRvRWRnZVdyYXBwaW5nLFwiU2NhbGluZ1wiaW4gdCl7dmFyIGM9dC5TY2FsaW5nLnZhbHVlO24ucmVwZWF0Lng9Y1swXSxuLnJlcGVhdC55PWNbMV19cmV0dXJuIG59LGxvYWRUZXh0dXJlOmZ1bmN0aW9uKHQsbil7dmFyIGksbyxhPXRoaXMudGV4dHVyZUxvYWRlci5wYXRoLHM9ZS5nZXQodC5pZCkuY2hpbGRyZW47dm9pZCAwIT09cyYmcy5sZW5ndGg+MCYmdm9pZCAwIT09bltzWzBdLklEXSYmKDAhPT0oaT1uW3NbMF0uSURdKS5pbmRleE9mKFwiYmxvYjpcIikmJjAhPT1pLmluZGV4T2YoXCJkYXRhOlwiKXx8dGhpcy50ZXh0dXJlTG9hZGVyLnNldFBhdGgodm9pZCAwKSk7dmFyIGM9dC5GaWxlTmFtZS5zbGljZSgtMykudG9Mb3dlckNhc2UoKTtpZihcInRnYVwiPT09Yyl7dmFyIGw9dGhpcy5tYW5hZ2VyLmdldEhhbmRsZXIoXCIudGdhXCIpO251bGw9PT1sPyhjb25zb2xlLndhcm4oXCJGQlhMb2FkZXI6IFRHQSBsb2FkZXIgbm90IGZvdW5kLCBjcmVhdGluZyBwbGFjZWhvbGRlciB0ZXh0dXJlIGZvclwiLHQuUmVsYXRpdmVGaWxlbmFtZSksbz1uZXcgci5UZXh0dXJlKTpvPWwubG9hZChpKX1lbHNlXCJwc2RcIj09PWM/KGNvbnNvbGUud2FybihcIkZCWExvYWRlcjogUFNEIHRleHR1cmVzIGFyZSBub3Qgc3VwcG9ydGVkLCBjcmVhdGluZyBwbGFjZWhvbGRlciB0ZXh0dXJlIGZvclwiLHQuUmVsYXRpdmVGaWxlbmFtZSksbz1uZXcgci5UZXh0dXJlKTpvPXRoaXMudGV4dHVyZUxvYWRlci5sb2FkKGkpO3JldHVybiB0aGlzLnRleHR1cmVMb2FkZXIuc2V0UGF0aChhKSxvfSxwYXJzZU1hdGVyaWFsczpmdW5jdGlvbihlKXt2YXIgbj1uZXcgTWFwO2lmKFwiTWF0ZXJpYWxcImluIHQuT2JqZWN0cyl7dmFyIHI9dC5PYmplY3RzLk1hdGVyaWFsO2Zvcih2YXIgaSBpbiByKXt2YXIgbz10aGlzLnBhcnNlTWF0ZXJpYWwocltpXSxlKTtudWxsIT09byYmbi5zZXQocGFyc2VJbnQoaSksbyl9fXJldHVybiBufSxwYXJzZU1hdGVyaWFsOmZ1bmN0aW9uKHQsbil7dmFyIGk9dC5pZCxvPXQuYXR0ck5hbWUsYT10LlNoYWRpbmdNb2RlbDtpZihcIm9iamVjdFwiPT10eXBlb2YgYSYmKGE9YS52YWx1ZSksIWUuaGFzKGkpKXJldHVybiBudWxsO3ZhciBzLGM9dGhpcy5wYXJzZVBhcmFtZXRlcnModCxuLGkpO3N3aXRjaChhLnRvTG93ZXJDYXNlKCkpe2Nhc2VcInBob25nXCI6cz1uZXcgci5NZXNoUGhvbmdNYXRlcmlhbDticmVhaztjYXNlXCJsYW1iZXJ0XCI6cz1uZXcgci5NZXNoTGFtYmVydE1hdGVyaWFsO2JyZWFrO2RlZmF1bHQ6Y29uc29sZS53YXJuKCdUSFJFRS5GQlhMb2FkZXI6IHVua25vd24gbWF0ZXJpYWwgdHlwZSBcIiVzXCIuIERlZmF1bHRpbmcgdG8gTWVzaFBob25nTWF0ZXJpYWwuJyxhKSxzPW5ldyByLk1lc2hQaG9uZ01hdGVyaWFsfXJldHVybiBzLnNldFZhbHVlcyhjKSxzLm5hbWU9byxzfSxwYXJzZVBhcmFtZXRlcnM6ZnVuY3Rpb24odCxuLGkpe3ZhciBvPXt9O3QuQnVtcEZhY3RvciYmKG8uYnVtcFNjYWxlPXQuQnVtcEZhY3Rvci52YWx1ZSksdC5EaWZmdXNlP28uY29sb3I9KG5ldyByLkNvbG9yKS5mcm9tQXJyYXkodC5EaWZmdXNlLnZhbHVlKTohdC5EaWZmdXNlQ29sb3J8fFwiQ29sb3JcIiE9PXQuRGlmZnVzZUNvbG9yLnR5cGUmJlwiQ29sb3JSR0JcIiE9PXQuRGlmZnVzZUNvbG9yLnR5cGV8fChvLmNvbG9yPShuZXcgci5Db2xvcikuZnJvbUFycmF5KHQuRGlmZnVzZUNvbG9yLnZhbHVlKSksdC5EaXNwbGFjZW1lbnRGYWN0b3ImJihvLmRpc3BsYWNlbWVudFNjYWxlPXQuRGlzcGxhY2VtZW50RmFjdG9yLnZhbHVlKSx0LkVtaXNzaXZlP28uZW1pc3NpdmU9KG5ldyByLkNvbG9yKS5mcm9tQXJyYXkodC5FbWlzc2l2ZS52YWx1ZSk6IXQuRW1pc3NpdmVDb2xvcnx8XCJDb2xvclwiIT09dC5FbWlzc2l2ZUNvbG9yLnR5cGUmJlwiQ29sb3JSR0JcIiE9PXQuRW1pc3NpdmVDb2xvci50eXBlfHwoby5lbWlzc2l2ZT0obmV3IHIuQ29sb3IpLmZyb21BcnJheSh0LkVtaXNzaXZlQ29sb3IudmFsdWUpKSx0LkVtaXNzaXZlRmFjdG9yJiYoby5lbWlzc2l2ZUludGVuc2l0eT1wYXJzZUZsb2F0KHQuRW1pc3NpdmVGYWN0b3IudmFsdWUpKSx0Lk9wYWNpdHkmJihvLm9wYWNpdHk9cGFyc2VGbG9hdCh0Lk9wYWNpdHkudmFsdWUpKSxvLm9wYWNpdHk8MSYmKG8udHJhbnNwYXJlbnQ9ITApLHQuUmVmbGVjdGlvbkZhY3RvciYmKG8ucmVmbGVjdGl2aXR5PXQuUmVmbGVjdGlvbkZhY3Rvci52YWx1ZSksdC5TaGluaW5lc3MmJihvLnNoaW5pbmVzcz10LlNoaW5pbmVzcy52YWx1ZSksdC5TcGVjdWxhcj9vLnNwZWN1bGFyPShuZXcgci5Db2xvcikuZnJvbUFycmF5KHQuU3BlY3VsYXIudmFsdWUpOnQuU3BlY3VsYXJDb2xvciYmXCJDb2xvclwiPT09dC5TcGVjdWxhckNvbG9yLnR5cGUmJihvLnNwZWN1bGFyPShuZXcgci5Db2xvcikuZnJvbUFycmF5KHQuU3BlY3VsYXJDb2xvci52YWx1ZSkpO3ZhciBhPXRoaXM7cmV0dXJuIGUuZ2V0KGkpLmNoaWxkcmVuLmZvckVhY2goKGZ1bmN0aW9uKHQpe3ZhciBlPXQucmVsYXRpb25zaGlwO3N3aXRjaChlKXtjYXNlXCJCdW1wXCI6by5idW1wTWFwPWEuZ2V0VGV4dHVyZShuLHQuSUQpO2JyZWFrO2Nhc2VcIk1heWF8VEVYX2FvX21hcFwiOm8uYW9NYXA9YS5nZXRUZXh0dXJlKG4sdC5JRCk7YnJlYWs7Y2FzZVwiRGlmZnVzZUNvbG9yXCI6Y2FzZVwiTWF5YXxURVhfY29sb3JfbWFwXCI6by5tYXA9YS5nZXRUZXh0dXJlKG4sdC5JRCksby5tYXAuZW5jb2Rpbmc9ci5zUkdCRW5jb2Rpbmc7YnJlYWs7Y2FzZVwiRGlzcGxhY2VtZW50Q29sb3JcIjpvLmRpc3BsYWNlbWVudE1hcD1hLmdldFRleHR1cmUobix0LklEKTticmVhaztjYXNlXCJFbWlzc2l2ZUNvbG9yXCI6by5lbWlzc2l2ZU1hcD1hLmdldFRleHR1cmUobix0LklEKSxvLmVtaXNzaXZlTWFwLmVuY29kaW5nPXIuc1JHQkVuY29kaW5nO2JyZWFrO2Nhc2VcIk5vcm1hbE1hcFwiOmNhc2VcIk1heWF8VEVYX25vcm1hbF9tYXBcIjpvLm5vcm1hbE1hcD1hLmdldFRleHR1cmUobix0LklEKTticmVhaztjYXNlXCJSZWZsZWN0aW9uQ29sb3JcIjpvLmVudk1hcD1hLmdldFRleHR1cmUobix0LklEKSxvLmVudk1hcC5tYXBwaW5nPXIuRXF1aXJlY3Rhbmd1bGFyUmVmbGVjdGlvbk1hcHBpbmcsby5lbnZNYXAuZW5jb2Rpbmc9ci5zUkdCRW5jb2Rpbmc7YnJlYWs7Y2FzZVwiU3BlY3VsYXJDb2xvclwiOm8uc3BlY3VsYXJNYXA9YS5nZXRUZXh0dXJlKG4sdC5JRCksby5zcGVjdWxhck1hcC5lbmNvZGluZz1yLnNSR0JFbmNvZGluZzticmVhaztjYXNlXCJUcmFuc3BhcmVudENvbG9yXCI6Y2FzZVwiVHJhbnNwYXJlbmN5RmFjdG9yXCI6by5hbHBoYU1hcD1hLmdldFRleHR1cmUobix0LklEKSxvLnRyYW5zcGFyZW50PSEwO2JyZWFrO2Nhc2VcIkFtYmllbnRDb2xvclwiOmNhc2VcIlNoaW5pbmVzc0V4cG9uZW50XCI6Y2FzZVwiU3BlY3VsYXJGYWN0b3JcIjpjYXNlXCJWZWN0b3JEaXNwbGFjZW1lbnRDb2xvclwiOmRlZmF1bHQ6Y29uc29sZS53YXJuKFwiVEhSRUUuRkJYTG9hZGVyOiAlcyBtYXAgaXMgbm90IHN1cHBvcnRlZCBpbiB0aHJlZS5qcywgc2tpcHBpbmcgdGV4dHVyZS5cIixlKX19KSksb30sZ2V0VGV4dHVyZTpmdW5jdGlvbihuLHIpe3JldHVyblwiTGF5ZXJlZFRleHR1cmVcImluIHQuT2JqZWN0cyYmciBpbiB0Lk9iamVjdHMuTGF5ZXJlZFRleHR1cmUmJihjb25zb2xlLndhcm4oXCJUSFJFRS5GQlhMb2FkZXI6IGxheWVyZWQgdGV4dHVyZXMgYXJlIG5vdCBzdXBwb3J0ZWQgaW4gdGhyZWUuanMuIERpc2NhcmRpbmcgYWxsIGJ1dCBmaXJzdCBsYXllci5cIikscj1lLmdldChyKS5jaGlsZHJlblswXS5JRCksbi5nZXQocil9LHBhcnNlRGVmb3JtZXJzOmZ1bmN0aW9uKCl7dmFyIG49e30scj17fTtpZihcIkRlZm9ybWVyXCJpbiB0Lk9iamVjdHMpe3ZhciBpPXQuT2JqZWN0cy5EZWZvcm1lcjtmb3IodmFyIG8gaW4gaSl7dmFyIGE9aVtvXSxzPWUuZ2V0KHBhcnNlSW50KG8pKTtpZihcIlNraW5cIj09PWEuYXR0clR5cGUpe3ZhciBjPXRoaXMucGFyc2VTa2VsZXRvbihzLGkpO2MuSUQ9byxzLnBhcmVudHMubGVuZ3RoPjEmJmNvbnNvbGUud2FybihcIlRIUkVFLkZCWExvYWRlcjogc2tlbGV0b24gYXR0YWNoZWQgdG8gbW9yZSB0aGFuIG9uZSBnZW9tZXRyeSBpcyBub3Qgc3VwcG9ydGVkLlwiKSxjLmdlb21ldHJ5SUQ9cy5wYXJlbnRzWzBdLklELG5bb109Y31lbHNlIGlmKFwiQmxlbmRTaGFwZVwiPT09YS5hdHRyVHlwZSl7dmFyIGw9e2lkOm99O2wucmF3VGFyZ2V0cz10aGlzLnBhcnNlTW9ycGhUYXJnZXRzKHMsaSksbC5pZD1vLHMucGFyZW50cy5sZW5ndGg+MSYmY29uc29sZS53YXJuKFwiVEhSRUUuRkJYTG9hZGVyOiBtb3JwaCB0YXJnZXQgYXR0YWNoZWQgdG8gbW9yZSB0aGFuIG9uZSBnZW9tZXRyeSBpcyBub3Qgc3VwcG9ydGVkLlwiKSxyW29dPWx9fX1yZXR1cm57c2tlbGV0b25zOm4sbW9ycGhUYXJnZXRzOnJ9fSxwYXJzZVNrZWxldG9uOmZ1bmN0aW9uKHQsZSl7dmFyIG49W107cmV0dXJuIHQuY2hpbGRyZW4uZm9yRWFjaCgoZnVuY3Rpb24odCl7dmFyIGk9ZVt0LklEXTtpZihcIkNsdXN0ZXJcIj09PWkuYXR0clR5cGUpe3ZhciBvPXtJRDp0LklELGluZGljZXM6W10sd2VpZ2h0czpbXSx0cmFuc2Zvcm1MaW5rOihuZXcgci5NYXRyaXg0KS5mcm9tQXJyYXkoaS5UcmFuc2Zvcm1MaW5rLmEpfTtcIkluZGV4ZXNcImluIGkmJihvLmluZGljZXM9aS5JbmRleGVzLmEsby53ZWlnaHRzPWkuV2VpZ2h0cy5hKSxuLnB1c2gobyl9fSkpLHtyYXdCb25lczpuLGJvbmVzOltdfX0scGFyc2VNb3JwaFRhcmdldHM6ZnVuY3Rpb24odCxuKXtmb3IodmFyIHI9W10saT0wO2k8dC5jaGlsZHJlbi5sZW5ndGg7aSsrKXt2YXIgbz10LmNoaWxkcmVuW2ldLGE9bltvLklEXSxzPXtuYW1lOmEuYXR0ck5hbWUsaW5pdGlhbFdlaWdodDphLkRlZm9ybVBlcmNlbnQsaWQ6YS5pZCxmdWxsV2VpZ2h0czphLkZ1bGxXZWlnaHRzLmF9O2lmKFwiQmxlbmRTaGFwZUNoYW5uZWxcIiE9PWEuYXR0clR5cGUpcmV0dXJuO3MuZ2VvSUQ9ZS5nZXQocGFyc2VJbnQoby5JRCkpLmNoaWxkcmVuLmZpbHRlcigoZnVuY3Rpb24odCl7cmV0dXJuIHZvaWQgMD09PXQucmVsYXRpb25zaGlwfSkpWzBdLklELHIucHVzaChzKX1yZXR1cm4gcn0scGFyc2VTY2VuZTpmdW5jdGlvbihpLG8sYSl7bj1uZXcgci5Hcm91cDt2YXIgYz10aGlzLnBhcnNlTW9kZWxzKGkuc2tlbGV0b25zLG8sYSksbD10Lk9iamVjdHMuTW9kZWwsdT10aGlzO2MuZm9yRWFjaCgoZnVuY3Rpb24odCl7dmFyIHI9bFt0LklEXTt1LnNldExvb2tBdFByb3BlcnRpZXModCxyKSxlLmdldCh0LklEKS5wYXJlbnRzLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciBuPWMuZ2V0KGUuSUQpO3ZvaWQgMCE9PW4mJm4uYWRkKHQpfSkpLG51bGw9PT10LnBhcmVudCYmbi5hZGQodCl9KSksdGhpcy5iaW5kU2tlbGV0b24oaS5za2VsZXRvbnMsbyxjKSx0aGlzLmNyZWF0ZUFtYmllbnRMaWdodCgpLHRoaXMuc2V0dXBNb3JwaE1hdGVyaWFscygpLG4udHJhdmVyc2UoKGZ1bmN0aW9uKHQpe2lmKHQudXNlckRhdGEudHJhbnNmb3JtRGF0YSl7dC5wYXJlbnQmJih0LnVzZXJEYXRhLnRyYW5zZm9ybURhdGEucGFyZW50TWF0cml4V29ybGQ9dC5wYXJlbnQubWF0cml4KTt2YXIgZT15KHQudXNlckRhdGEudHJhbnNmb3JtRGF0YSk7dC5hcHBseU1hdHJpeDQoZSl9fSkpO3ZhciBoPShuZXcgcykucGFyc2UoKTsxPT09bi5jaGlsZHJlbi5sZW5ndGgmJm4uY2hpbGRyZW5bMF0uaXNHcm91cCYmKG4uY2hpbGRyZW5bMF0uYW5pbWF0aW9ucz1oLG49bi5jaGlsZHJlblswXSksbi5hbmltYXRpb25zPWh9LHBhcnNlTW9kZWxzOmZ1bmN0aW9uKG4saSxvKXt2YXIgYT1uZXcgTWFwLHM9dC5PYmplY3RzLk1vZGVsO2Zvcih2YXIgYyBpbiBzKXt2YXIgbD1wYXJzZUludChjKSx1PXNbY10saD1lLmdldChsKSxkPXRoaXMuYnVpbGRTa2VsZXRvbihoLG4sbCx1LmF0dHJOYW1lKTtpZighZCl7c3dpdGNoKHUuYXR0clR5cGUpe2Nhc2VcIkNhbWVyYVwiOmQ9dGhpcy5jcmVhdGVDYW1lcmEoaCk7YnJlYWs7Y2FzZVwiTGlnaHRcIjpkPXRoaXMuY3JlYXRlTGlnaHQoaCk7YnJlYWs7Y2FzZVwiTWVzaFwiOmQ9dGhpcy5jcmVhdGVNZXNoKGgsaSxvKTticmVhaztjYXNlXCJOdXJic0N1cnZlXCI6ZD10aGlzLmNyZWF0ZUN1cnZlKGgsaSk7YnJlYWs7Y2FzZVwiTGltYk5vZGVcIjpjYXNlXCJSb290XCI6ZD1uZXcgci5Cb25lO2JyZWFrO2Nhc2VcIk51bGxcIjpkZWZhdWx0OmQ9bmV3IHIuR3JvdXB9ZC5uYW1lPXUuYXR0ck5hbWU/ci5Qcm9wZXJ0eUJpbmRpbmcuc2FuaXRpemVOb2RlTmFtZSh1LmF0dHJOYW1lKTpcIlwiLGQuSUQ9bH10aGlzLmdldFRyYW5zZm9ybURhdGEoZCx1KSxhLnNldChsLGQpfXJldHVybiBhfSxidWlsZFNrZWxldG9uOmZ1bmN0aW9uKHQsZSxuLGkpe3ZhciBvPW51bGw7cmV0dXJuIHQucGFyZW50cy5mb3JFYWNoKChmdW5jdGlvbih0KXtmb3IodmFyIGEgaW4gZSl7dmFyIHM9ZVthXTtzLnJhd0JvbmVzLmZvckVhY2goKGZ1bmN0aW9uKGUsYSl7aWYoZS5JRD09PXQuSUQpe3ZhciBjPW87KG89bmV3IHIuQm9uZSkubWF0cml4V29ybGQuY29weShlLnRyYW5zZm9ybUxpbmspLG8ubmFtZT1pP3IuUHJvcGVydHlCaW5kaW5nLnNhbml0aXplTm9kZU5hbWUoaSk6XCJcIixvLklEPW4scy5ib25lc1thXT1vLG51bGwhPT1jJiZvLmFkZChjKX19KSl9fSkpLG99LGNyZWF0ZUNhbWVyYTpmdW5jdGlvbihlKXt2YXIgbixpO2lmKGUuY2hpbGRyZW4uZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG49dC5PYmplY3RzLk5vZGVBdHRyaWJ1dGVbZS5JRF07dm9pZCAwIT09biYmKGk9bil9KSksdm9pZCAwPT09aSluPW5ldyByLk9iamVjdDNEO2Vsc2V7dmFyIG89MDt2b2lkIDAhPT1pLkNhbWVyYVByb2plY3Rpb25UeXBlJiYxPT09aS5DYW1lcmFQcm9qZWN0aW9uVHlwZS52YWx1ZSYmKG89MSk7dmFyIGE9MTt2b2lkIDAhPT1pLk5lYXJQbGFuZSYmKGE9aS5OZWFyUGxhbmUudmFsdWUvMWUzKTt2YXIgcz0xZTM7dm9pZCAwIT09aS5GYXJQbGFuZSYmKHM9aS5GYXJQbGFuZS52YWx1ZS8xZTMpO3ZhciBjPXdpbmRvdy5pbm5lcldpZHRoLGw9d2luZG93LmlubmVySGVpZ2h0O3ZvaWQgMCE9PWkuQXNwZWN0V2lkdGgmJnZvaWQgMCE9PWkuQXNwZWN0SGVpZ2h0JiYoYz1pLkFzcGVjdFdpZHRoLnZhbHVlLGw9aS5Bc3BlY3RIZWlnaHQudmFsdWUpO3ZhciB1PWMvbCxoPTQ1O3ZvaWQgMCE9PWkuRmllbGRPZlZpZXcmJihoPWkuRmllbGRPZlZpZXcudmFsdWUpO3ZhciBkPWkuRm9jYWxMZW5ndGg/aS5Gb2NhbExlbmd0aC52YWx1ZTpudWxsO3N3aXRjaChvKXtjYXNlIDA6bj1uZXcgci5QZXJzcGVjdGl2ZUNhbWVyYShoLHUsYSxzKSxudWxsIT09ZCYmbi5zZXRGb2NhbExlbmd0aChkKTticmVhaztjYXNlIDE6bj1uZXcgci5PcnRob2dyYXBoaWNDYW1lcmEoLWMvMixjLzIsbC8yLC1sLzIsYSxzKTticmVhaztkZWZhdWx0OmNvbnNvbGUud2FybihcIlRIUkVFLkZCWExvYWRlcjogVW5rbm93biBjYW1lcmEgdHlwZSBcIitvK1wiLlwiKSxuPW5ldyByLk9iamVjdDNEfX1yZXR1cm4gbn0sY3JlYXRlTGlnaHQ6ZnVuY3Rpb24oZSl7dmFyIG4saTtpZihlLmNoaWxkcmVuLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciBuPXQuT2JqZWN0cy5Ob2RlQXR0cmlidXRlW2UuSURdO3ZvaWQgMCE9PW4mJihpPW4pfSkpLHZvaWQgMD09PWkpbj1uZXcgci5PYmplY3QzRDtlbHNle3ZhciBvO289dm9pZCAwPT09aS5MaWdodFR5cGU/MDppLkxpZ2h0VHlwZS52YWx1ZTt2YXIgYT0xNjc3NzIxNTt2b2lkIDAhPT1pLkNvbG9yJiYoYT0obmV3IHIuQ29sb3IpLmZyb21BcnJheShpLkNvbG9yLnZhbHVlKSk7dmFyIHM9dm9pZCAwPT09aS5JbnRlbnNpdHk/MTppLkludGVuc2l0eS52YWx1ZS8xMDA7dm9pZCAwIT09aS5DYXN0TGlnaHRPbk9iamVjdCYmMD09PWkuQ2FzdExpZ2h0T25PYmplY3QudmFsdWUmJihzPTApO3ZhciBjPTA7dm9pZCAwIT09aS5GYXJBdHRlbnVhdGlvbkVuZCYmKGM9dm9pZCAwIT09aS5FbmFibGVGYXJBdHRlbnVhdGlvbiYmMD09PWkuRW5hYmxlRmFyQXR0ZW51YXRpb24udmFsdWU/MDppLkZhckF0dGVudWF0aW9uRW5kLnZhbHVlKTtzd2l0Y2gobyl7Y2FzZSAwOm49bmV3IHIuUG9pbnRMaWdodChhLHMsYywxKTticmVhaztjYXNlIDE6bj1uZXcgci5EaXJlY3Rpb25hbExpZ2h0KGEscyk7YnJlYWs7Y2FzZSAyOnZhciBsPU1hdGguUEkvMzt2b2lkIDAhPT1pLklubmVyQW5nbGUmJihsPXIuTWF0aFV0aWxzLmRlZ1RvUmFkKGkuSW5uZXJBbmdsZS52YWx1ZSkpO3ZhciB1PTA7dm9pZCAwIT09aS5PdXRlckFuZ2xlJiYodT1yLk1hdGhVdGlscy5kZWdUb1JhZChpLk91dGVyQW5nbGUudmFsdWUpLHU9TWF0aC5tYXgodSwxKSksbj1uZXcgci5TcG90TGlnaHQoYSxzLGMsbCx1LDEpO2JyZWFrO2RlZmF1bHQ6Y29uc29sZS53YXJuKFwiVEhSRUUuRkJYTG9hZGVyOiBVbmtub3duIGxpZ2h0IHR5cGUgXCIraS5MaWdodFR5cGUudmFsdWUrXCIsIGRlZmF1bHRpbmcgdG8gYSBQb2ludExpZ2h0LlwiKSxuPW5ldyByLlBvaW50TGlnaHQoYSxzKX12b2lkIDAhPT1pLkNhc3RTaGFkb3dzJiYxPT09aS5DYXN0U2hhZG93cy52YWx1ZSYmKG4uY2FzdFNoYWRvdz0hMCl9cmV0dXJuIG59LGNyZWF0ZU1lc2g6ZnVuY3Rpb24odCxlLG4pe3ZhciBpLG89bnVsbCxhPW51bGwscz1bXTtyZXR1cm4gdC5jaGlsZHJlbi5mb3JFYWNoKChmdW5jdGlvbih0KXtlLmhhcyh0LklEKSYmKG89ZS5nZXQodC5JRCkpLG4uaGFzKHQuSUQpJiZzLnB1c2gobi5nZXQodC5JRCkpfSkpLHMubGVuZ3RoPjE/YT1zOnMubGVuZ3RoPjA/YT1zWzBdOihhPW5ldyByLk1lc2hQaG9uZ01hdGVyaWFsKHtjb2xvcjoxMzQyMTc3Mn0pLHMucHVzaChhKSksXCJjb2xvclwiaW4gby5hdHRyaWJ1dGVzJiZzLmZvckVhY2goKGZ1bmN0aW9uKHQpe3QudmVydGV4Q29sb3JzPSEwfSkpLG8uRkJYX0RlZm9ybWVyPyhzLmZvckVhY2goKGZ1bmN0aW9uKHQpe3Quc2tpbm5pbmc9ITB9KSksKGk9bmV3IHIuU2tpbm5lZE1lc2gobyxhKSkubm9ybWFsaXplU2tpbldlaWdodHMoKSk6aT1uZXcgci5NZXNoKG8sYSksaX0sY3JlYXRlQ3VydmU6ZnVuY3Rpb24odCxlKXt2YXIgbj10LmNoaWxkcmVuLnJlZHVjZSgoZnVuY3Rpb24odCxuKXtyZXR1cm4gZS5oYXMobi5JRCkmJih0PWUuZ2V0KG4uSUQpKSx0fSksbnVsbCksaT1uZXcgci5MaW5lQmFzaWNNYXRlcmlhbCh7Y29sb3I6MzM0MjU5MSxsaW5ld2lkdGg6MX0pO3JldHVybiBuZXcgci5MaW5lKG4saSl9LGdldFRyYW5zZm9ybURhdGE6ZnVuY3Rpb24odCxlKXt2YXIgbj17fTtcIkluaGVyaXRUeXBlXCJpbiBlJiYobi5pbmhlcml0VHlwZT1wYXJzZUludChlLkluaGVyaXRUeXBlLnZhbHVlKSksbi5ldWxlck9yZGVyPVwiUm90YXRpb25PcmRlclwiaW4gZT94KGUuUm90YXRpb25PcmRlci52YWx1ZSk6XCJaWVhcIixcIkxjbF9UcmFuc2xhdGlvblwiaW4gZSYmKG4udHJhbnNsYXRpb249ZS5MY2xfVHJhbnNsYXRpb24udmFsdWUpLFwiUHJlUm90YXRpb25cImluIGUmJihuLnByZVJvdGF0aW9uPWUuUHJlUm90YXRpb24udmFsdWUpLFwiTGNsX1JvdGF0aW9uXCJpbiBlJiYobi5yb3RhdGlvbj1lLkxjbF9Sb3RhdGlvbi52YWx1ZSksXCJQb3N0Um90YXRpb25cImluIGUmJihuLnBvc3RSb3RhdGlvbj1lLlBvc3RSb3RhdGlvbi52YWx1ZSksXCJMY2xfU2NhbGluZ1wiaW4gZSYmKG4uc2NhbGU9ZS5MY2xfU2NhbGluZy52YWx1ZSksXCJTY2FsaW5nT2Zmc2V0XCJpbiBlJiYobi5zY2FsaW5nT2Zmc2V0PWUuU2NhbGluZ09mZnNldC52YWx1ZSksXCJTY2FsaW5nUGl2b3RcImluIGUmJihuLnNjYWxpbmdQaXZvdD1lLlNjYWxpbmdQaXZvdC52YWx1ZSksXCJSb3RhdGlvbk9mZnNldFwiaW4gZSYmKG4ucm90YXRpb25PZmZzZXQ9ZS5Sb3RhdGlvbk9mZnNldC52YWx1ZSksXCJSb3RhdGlvblBpdm90XCJpbiBlJiYobi5yb3RhdGlvblBpdm90PWUuUm90YXRpb25QaXZvdC52YWx1ZSksdC51c2VyRGF0YS50cmFuc2Zvcm1EYXRhPW59LHNldExvb2tBdFByb3BlcnRpZXM6ZnVuY3Rpb24oaSxvKXtcIkxvb2tBdFByb3BlcnR5XCJpbiBvJiZlLmdldChpLklEKS5jaGlsZHJlbi5mb3JFYWNoKChmdW5jdGlvbihlKXtpZihcIkxvb2tBdFByb3BlcnR5XCI9PT1lLnJlbGF0aW9uc2hpcCl7dmFyIG89dC5PYmplY3RzLk1vZGVsW2UuSURdO2lmKFwiTGNsX1RyYW5zbGF0aW9uXCJpbiBvKXt2YXIgYT1vLkxjbF9UcmFuc2xhdGlvbi52YWx1ZTt2b2lkIDAhPT1pLnRhcmdldD8oaS50YXJnZXQucG9zaXRpb24uZnJvbUFycmF5KGEpLG4uYWRkKGkudGFyZ2V0KSk6aS5sb29rQXQoKG5ldyByLlZlY3RvcjMpLmZyb21BcnJheShhKSl9fX0pKX0sYmluZFNrZWxldG9uOmZ1bmN0aW9uKHQsbixpKXt2YXIgbz10aGlzLnBhcnNlUG9zZU5vZGVzKCk7Zm9yKHZhciBhIGluIHQpe3ZhciBzPXRbYV07ZS5nZXQocGFyc2VJbnQocy5JRCkpLnBhcmVudHMuZm9yRWFjaCgoZnVuY3Rpb24odCl7aWYobi5oYXModC5JRCkpe3ZhciBhPXQuSUQ7ZS5nZXQoYSkucGFyZW50cy5mb3JFYWNoKChmdW5jdGlvbih0KXtpLmhhcyh0LklEKSYmaS5nZXQodC5JRCkuYmluZChuZXcgci5Ta2VsZXRvbihzLmJvbmVzKSxvW3QuSURdKX0pKX19KSl9fSxwYXJzZVBvc2VOb2RlczpmdW5jdGlvbigpe3ZhciBlPXt9O2lmKFwiUG9zZVwiaW4gdC5PYmplY3RzKXt2YXIgbj10Lk9iamVjdHMuUG9zZTtmb3IodmFyIGkgaW4gbilpZihcIkJpbmRQb3NlXCI9PT1uW2ldLmF0dHJUeXBlKXt2YXIgbz1uW2ldLlBvc2VOb2RlO0FycmF5LmlzQXJyYXkobyk/by5mb3JFYWNoKChmdW5jdGlvbih0KXtlW3QuTm9kZV09KG5ldyByLk1hdHJpeDQpLmZyb21BcnJheSh0Lk1hdHJpeC5hKX0pKTplW28uTm9kZV09KG5ldyByLk1hdHJpeDQpLmZyb21BcnJheShvLk1hdHJpeC5hKX19cmV0dXJuIGV9LGNyZWF0ZUFtYmllbnRMaWdodDpmdW5jdGlvbigpe2lmKFwiR2xvYmFsU2V0dGluZ3NcImluIHQmJlwiQW1iaWVudENvbG9yXCJpbiB0Lkdsb2JhbFNldHRpbmdzKXt2YXIgZT10Lkdsb2JhbFNldHRpbmdzLkFtYmllbnRDb2xvci52YWx1ZSxpPWVbMF0sbz1lWzFdLGE9ZVsyXTtpZigwIT09aXx8MCE9PW98fDAhPT1hKXt2YXIgcz1uZXcgci5Db2xvcihpLG8sYSk7bi5hZGQobmV3IHIuQW1iaWVudExpZ2h0KHMsMSkpfX19LHNldHVwTW9ycGhNYXRlcmlhbHM6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO24udHJhdmVyc2UoKGZ1bmN0aW9uKGUpe2UuaXNNZXNoJiZlLmdlb21ldHJ5Lm1vcnBoQXR0cmlidXRlcy5wb3NpdGlvbiYmZS5nZW9tZXRyeS5tb3JwaEF0dHJpYnV0ZXMucG9zaXRpb24ubGVuZ3RoJiYoQXJyYXkuaXNBcnJheShlLm1hdGVyaWFsKT9lLm1hdGVyaWFsLmZvckVhY2goKGZ1bmN0aW9uKG4scil7dC5zZXR1cE1vcnBoTWF0ZXJpYWwoZSxuLHIpfSkpOnQuc2V0dXBNb3JwaE1hdGVyaWFsKGUsZS5tYXRlcmlhbCkpfSkpfSxzZXR1cE1vcnBoTWF0ZXJpYWw6ZnVuY3Rpb24odCxlLHIpe3ZhciBpPXQudXVpZCxvPWUudXVpZCxhPSExO2lmKG4udHJhdmVyc2UoKGZ1bmN0aW9uKHQpe3QuaXNNZXNoJiYoQXJyYXkuaXNBcnJheSh0Lm1hdGVyaWFsKT90Lm1hdGVyaWFsLmZvckVhY2goKGZ1bmN0aW9uKGUpe2UudXVpZD09PW8mJnQudXVpZCE9PWkmJihhPSEwKX0pKTp0Lm1hdGVyaWFsLnV1aWQ9PT1vJiZ0LnV1aWQhPT1pJiYoYT0hMCkpfSkpLCEwPT09YSl7dmFyIHM9ZS5jbG9uZSgpO3MubW9ycGhUYXJnZXRzPSEwLHZvaWQgMD09PXI/dC5tYXRlcmlhbD1zOnQubWF0ZXJpYWxbcl09c31lbHNlIGUubW9ycGhUYXJnZXRzPSEwfX0sYS5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOmEscGFyc2U6ZnVuY3Rpb24obil7dmFyIHI9bmV3IE1hcDtpZihcIkdlb21ldHJ5XCJpbiB0Lk9iamVjdHMpe3ZhciBpPXQuT2JqZWN0cy5HZW9tZXRyeTtmb3IodmFyIG8gaW4gaSl7dmFyIGE9ZS5nZXQocGFyc2VJbnQobykpLHM9dGhpcy5wYXJzZUdlb21ldHJ5KGEsaVtvXSxuKTtyLnNldChwYXJzZUludChvKSxzKX19cmV0dXJuIHJ9LHBhcnNlR2VvbWV0cnk6ZnVuY3Rpb24odCxlLG4pe3N3aXRjaChlLmF0dHJUeXBlKXtjYXNlXCJNZXNoXCI6cmV0dXJuIHRoaXMucGFyc2VNZXNoR2VvbWV0cnkodCxlLG4pO2Nhc2VcIk51cmJzQ3VydmVcIjpyZXR1cm4gdGhpcy5wYXJzZU51cmJzR2VvbWV0cnkoZSl9fSxwYXJzZU1lc2hHZW9tZXRyeTpmdW5jdGlvbihlLG4scil7dmFyIGk9ci5za2VsZXRvbnMsbz1bXSxhPWUucGFyZW50cy5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiB0Lk9iamVjdHMuTW9kZWxbZS5JRF19KSk7aWYoMCE9PWEubGVuZ3RoKXt2YXIgcz1lLmNoaWxkcmVuLnJlZHVjZSgoZnVuY3Rpb24odCxlKXtyZXR1cm4gdm9pZCAwIT09aVtlLklEXSYmKHQ9aVtlLklEXSksdH0pLG51bGwpO2UuY2hpbGRyZW4uZm9yRWFjaCgoZnVuY3Rpb24odCl7dm9pZCAwIT09ci5tb3JwaFRhcmdldHNbdC5JRF0mJm8ucHVzaChyLm1vcnBoVGFyZ2V0c1t0LklEXSl9KSk7dmFyIGM9YVswXSxsPXt9O1wiUm90YXRpb25PcmRlclwiaW4gYyYmKGwuZXVsZXJPcmRlcj14KGMuUm90YXRpb25PcmRlci52YWx1ZSkpLFwiSW5oZXJpdFR5cGVcImluIGMmJihsLmluaGVyaXRUeXBlPXBhcnNlSW50KGMuSW5oZXJpdFR5cGUudmFsdWUpKSxcIkdlb21ldHJpY1RyYW5zbGF0aW9uXCJpbiBjJiYobC50cmFuc2xhdGlvbj1jLkdlb21ldHJpY1RyYW5zbGF0aW9uLnZhbHVlKSxcIkdlb21ldHJpY1JvdGF0aW9uXCJpbiBjJiYobC5yb3RhdGlvbj1jLkdlb21ldHJpY1JvdGF0aW9uLnZhbHVlKSxcIkdlb21ldHJpY1NjYWxpbmdcImluIGMmJihsLnNjYWxlPWMuR2VvbWV0cmljU2NhbGluZy52YWx1ZSk7dmFyIHU9eShsKTtyZXR1cm4gdGhpcy5nZW5HZW9tZXRyeShuLHMsbyx1KX19LGdlbkdlb21ldHJ5OmZ1bmN0aW9uKHQsZSxuLGkpe3ZhciBvPW5ldyByLkJ1ZmZlckdlb21ldHJ5O3QuYXR0ck5hbWUmJihvLm5hbWU9dC5hdHRyTmFtZSk7dmFyIGE9dGhpcy5wYXJzZUdlb05vZGUodCxlKSxzPXRoaXMuZ2VuQnVmZmVycyhhKSxjPW5ldyByLkZsb2F0MzJCdWZmZXJBdHRyaWJ1dGUocy52ZXJ0ZXgsMyk7aWYoYy5hcHBseU1hdHJpeDQoaSksby5zZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLGMpLHMuY29sb3JzLmxlbmd0aD4wJiZvLnNldEF0dHJpYnV0ZShcImNvbG9yXCIsbmV3IHIuRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZShzLmNvbG9ycywzKSksZSYmKG8uc2V0QXR0cmlidXRlKFwic2tpbkluZGV4XCIsbmV3IHIuVWludDE2QnVmZmVyQXR0cmlidXRlKHMud2VpZ2h0c0luZGljZXMsNCkpLG8uc2V0QXR0cmlidXRlKFwic2tpbldlaWdodFwiLG5ldyByLkZsb2F0MzJCdWZmZXJBdHRyaWJ1dGUocy52ZXJ0ZXhXZWlnaHRzLDQpKSxvLkZCWF9EZWZvcm1lcj1lKSxzLm5vcm1hbC5sZW5ndGg+MCl7dmFyIGw9KG5ldyByLk1hdHJpeDMpLmdldE5vcm1hbE1hdHJpeChpKSx1PW5ldyByLkZsb2F0MzJCdWZmZXJBdHRyaWJ1dGUocy5ub3JtYWwsMyk7dS5hcHBseU5vcm1hbE1hdHJpeChsKSxvLnNldEF0dHJpYnV0ZShcIm5vcm1hbFwiLHUpfWlmKHMudXZzLmZvckVhY2goKGZ1bmN0aW9uKHQsZSl7dmFyIG49XCJ1dlwiKyhlKzEpLnRvU3RyaW5nKCk7MD09PWUmJihuPVwidXZcIiksby5zZXRBdHRyaWJ1dGUobixuZXcgci5GbG9hdDMyQnVmZmVyQXR0cmlidXRlKHMudXZzW2VdLDIpKX0pKSxhLm1hdGVyaWFsJiZcIkFsbFNhbWVcIiE9PWEubWF0ZXJpYWwubWFwcGluZ1R5cGUpe3ZhciBoPXMubWF0ZXJpYWxJbmRleFswXSxkPTA7aWYocy5tYXRlcmlhbEluZGV4LmZvckVhY2goKGZ1bmN0aW9uKHQsZSl7dCE9PWgmJihvLmFkZEdyb3VwKGQsZS1kLGgpLGg9dCxkPWUpfSkpLG8uZ3JvdXBzLmxlbmd0aD4wKXt2YXIgcD1vLmdyb3Vwc1tvLmdyb3Vwcy5sZW5ndGgtMV0sZj1wLnN0YXJ0K3AuY291bnQ7ZiE9PXMubWF0ZXJpYWxJbmRleC5sZW5ndGgmJm8uYWRkR3JvdXAoZixzLm1hdGVyaWFsSW5kZXgubGVuZ3RoLWYsaCl9MD09PW8uZ3JvdXBzLmxlbmd0aCYmby5hZGRHcm91cCgwLHMubWF0ZXJpYWxJbmRleC5sZW5ndGgscy5tYXRlcmlhbEluZGV4WzBdKX1yZXR1cm4gdGhpcy5hZGRNb3JwaFRhcmdldHMobyx0LG4saSksb30scGFyc2VHZW9Ob2RlOmZ1bmN0aW9uKHQsZSl7dmFyIG49e307aWYobi52ZXJ0ZXhQb3NpdGlvbnM9dm9pZCAwIT09dC5WZXJ0aWNlcz90LlZlcnRpY2VzLmE6W10sbi52ZXJ0ZXhJbmRpY2VzPXZvaWQgMCE9PXQuUG9seWdvblZlcnRleEluZGV4P3QuUG9seWdvblZlcnRleEluZGV4LmE6W10sdC5MYXllckVsZW1lbnRDb2xvciYmKG4uY29sb3I9dGhpcy5wYXJzZVZlcnRleENvbG9ycyh0LkxheWVyRWxlbWVudENvbG9yWzBdKSksdC5MYXllckVsZW1lbnRNYXRlcmlhbCYmKG4ubWF0ZXJpYWw9dGhpcy5wYXJzZU1hdGVyaWFsSW5kaWNlcyh0LkxheWVyRWxlbWVudE1hdGVyaWFsWzBdKSksdC5MYXllckVsZW1lbnROb3JtYWwmJihuLm5vcm1hbD10aGlzLnBhcnNlTm9ybWFscyh0LkxheWVyRWxlbWVudE5vcm1hbFswXSkpLHQuTGF5ZXJFbGVtZW50VVYpe24udXY9W107Zm9yKHZhciByPTA7dC5MYXllckVsZW1lbnRVVltyXTspdC5MYXllckVsZW1lbnRVVltyXS5VViYmbi51di5wdXNoKHRoaXMucGFyc2VVVnModC5MYXllckVsZW1lbnRVVltyXSkpLHIrK31yZXR1cm4gbi53ZWlnaHRUYWJsZT17fSxudWxsIT09ZSYmKG4uc2tlbGV0b249ZSxlLnJhd0JvbmVzLmZvckVhY2goKGZ1bmN0aW9uKHQsZSl7dC5pbmRpY2VzLmZvckVhY2goKGZ1bmN0aW9uKHIsaSl7dm9pZCAwPT09bi53ZWlnaHRUYWJsZVtyXSYmKG4ud2VpZ2h0VGFibGVbcl09W10pLG4ud2VpZ2h0VGFibGVbcl0ucHVzaCh7aWQ6ZSx3ZWlnaHQ6dC53ZWlnaHRzW2ldfSl9KSl9KSkpLG59LGdlbkJ1ZmZlcnM6ZnVuY3Rpb24odCl7dmFyIGU9e3ZlcnRleDpbXSxub3JtYWw6W10sY29sb3JzOltdLHV2czpbXSxtYXRlcmlhbEluZGV4OltdLHZlcnRleFdlaWdodHM6W10sd2VpZ2h0c0luZGljZXM6W119LG49MCxyPTAsaT0hMSxvPVtdLGE9W10scz1bXSxjPVtdLGw9W10sdT1bXSxoPXRoaXM7cmV0dXJuIHQudmVydGV4SW5kaWNlcy5mb3JFYWNoKChmdW5jdGlvbihkLHApe3ZhciBmPSExO2Q8MCYmKGRePS0xLGY9ITApO3ZhciBnPVtdLHY9W107aWYoby5wdXNoKDMqZCwzKmQrMSwzKmQrMiksdC5jb2xvcil7dmFyIHk9bShwLG4sZCx0LmNvbG9yKTtzLnB1c2goeVswXSx5WzFdLHlbMl0pfWlmKHQuc2tlbGV0b24pe2lmKHZvaWQgMCE9PXQud2VpZ2h0VGFibGVbZF0mJnQud2VpZ2h0VGFibGVbZF0uZm9yRWFjaCgoZnVuY3Rpb24odCl7di5wdXNoKHQud2VpZ2h0KSxnLnB1c2godC5pZCl9KSksdi5sZW5ndGg+NCl7aXx8KGNvbnNvbGUud2FybihcIlRIUkVFLkZCWExvYWRlcjogVmVydGV4IGhhcyBtb3JlIHRoYW4gNCBza2lubmluZyB3ZWlnaHRzIGFzc2lnbmVkIHRvIHZlcnRleC4gRGVsZXRpbmcgYWRkaXRpb25hbCB3ZWlnaHRzLlwiKSxpPSEwKTt2YXIgeD1bMCwwLDAsMF0sYj1bMCwwLDAsMF07di5mb3JFYWNoKChmdW5jdGlvbih0LGUpe3ZhciBuPXQscj1nW2VdO2IuZm9yRWFjaCgoZnVuY3Rpb24odCxlLGkpe2lmKG4+dCl7aVtlXT1uLG49dDt2YXIgbz14W2VdO3hbZV09cixyPW99fSkpfSkpLGc9eCx2PWJ9Zm9yKDt2Lmxlbmd0aDw0Oyl2LnB1c2goMCksZy5wdXNoKDApO2Zvcih2YXIgdz0wO3c8NDsrK3cpbC5wdXNoKHZbd10pLHUucHVzaChnW3ddKX1pZih0Lm5vcm1hbCl7eT1tKHAsbixkLHQubm9ybWFsKTthLnB1c2goeVswXSx5WzFdLHlbMl0pfWlmKHQubWF0ZXJpYWwmJlwiQWxsU2FtZVwiIT09dC5tYXRlcmlhbC5tYXBwaW5nVHlwZSl2YXIgXz1tKHAsbixkLHQubWF0ZXJpYWwpWzBdO3QudXYmJnQudXYuZm9yRWFjaCgoZnVuY3Rpb24odCxlKXt2YXIgcj1tKHAsbixkLHQpO3ZvaWQgMD09PWNbZV0mJihjW2VdPVtdKSxjW2VdLnB1c2goclswXSksY1tlXS5wdXNoKHJbMV0pfSkpLHIrKyxmJiYoaC5nZW5GYWNlKGUsdCxvLF8sYSxzLGMsbCx1LHIpLG4rKyxyPTAsbz1bXSxhPVtdLHM9W10sYz1bXSxsPVtdLHU9W10pfSkpLGV9LGdlbkZhY2U6ZnVuY3Rpb24odCxlLG4scixpLG8sYSxzLGMsbCl7Zm9yKHZhciB1PTI7dTxsO3UrKyl0LnZlcnRleC5wdXNoKGUudmVydGV4UG9zaXRpb25zW25bMF1dKSx0LnZlcnRleC5wdXNoKGUudmVydGV4UG9zaXRpb25zW25bMV1dKSx0LnZlcnRleC5wdXNoKGUudmVydGV4UG9zaXRpb25zW25bMl1dKSx0LnZlcnRleC5wdXNoKGUudmVydGV4UG9zaXRpb25zW25bMyoodS0xKV1dKSx0LnZlcnRleC5wdXNoKGUudmVydGV4UG9zaXRpb25zW25bMyoodS0xKSsxXV0pLHQudmVydGV4LnB1c2goZS52ZXJ0ZXhQb3NpdGlvbnNbblszKih1LTEpKzJdXSksdC52ZXJ0ZXgucHVzaChlLnZlcnRleFBvc2l0aW9uc1tuWzMqdV1dKSx0LnZlcnRleC5wdXNoKGUudmVydGV4UG9zaXRpb25zW25bMyp1KzFdXSksdC52ZXJ0ZXgucHVzaChlLnZlcnRleFBvc2l0aW9uc1tuWzMqdSsyXV0pLGUuc2tlbGV0b24mJih0LnZlcnRleFdlaWdodHMucHVzaChzWzBdKSx0LnZlcnRleFdlaWdodHMucHVzaChzWzFdKSx0LnZlcnRleFdlaWdodHMucHVzaChzWzJdKSx0LnZlcnRleFdlaWdodHMucHVzaChzWzNdKSx0LnZlcnRleFdlaWdodHMucHVzaChzWzQqKHUtMSldKSx0LnZlcnRleFdlaWdodHMucHVzaChzWzQqKHUtMSkrMV0pLHQudmVydGV4V2VpZ2h0cy5wdXNoKHNbNCoodS0xKSsyXSksdC52ZXJ0ZXhXZWlnaHRzLnB1c2goc1s0Kih1LTEpKzNdKSx0LnZlcnRleFdlaWdodHMucHVzaChzWzQqdV0pLHQudmVydGV4V2VpZ2h0cy5wdXNoKHNbNCp1KzFdKSx0LnZlcnRleFdlaWdodHMucHVzaChzWzQqdSsyXSksdC52ZXJ0ZXhXZWlnaHRzLnB1c2goc1s0KnUrM10pLHQud2VpZ2h0c0luZGljZXMucHVzaChjWzBdKSx0LndlaWdodHNJbmRpY2VzLnB1c2goY1sxXSksdC53ZWlnaHRzSW5kaWNlcy5wdXNoKGNbMl0pLHQud2VpZ2h0c0luZGljZXMucHVzaChjWzNdKSx0LndlaWdodHNJbmRpY2VzLnB1c2goY1s0Kih1LTEpXSksdC53ZWlnaHRzSW5kaWNlcy5wdXNoKGNbNCoodS0xKSsxXSksdC53ZWlnaHRzSW5kaWNlcy5wdXNoKGNbNCoodS0xKSsyXSksdC53ZWlnaHRzSW5kaWNlcy5wdXNoKGNbNCoodS0xKSszXSksdC53ZWlnaHRzSW5kaWNlcy5wdXNoKGNbNCp1XSksdC53ZWlnaHRzSW5kaWNlcy5wdXNoKGNbNCp1KzFdKSx0LndlaWdodHNJbmRpY2VzLnB1c2goY1s0KnUrMl0pLHQud2VpZ2h0c0luZGljZXMucHVzaChjWzQqdSszXSkpLGUuY29sb3ImJih0LmNvbG9ycy5wdXNoKG9bMF0pLHQuY29sb3JzLnB1c2gob1sxXSksdC5jb2xvcnMucHVzaChvWzJdKSx0LmNvbG9ycy5wdXNoKG9bMyoodS0xKV0pLHQuY29sb3JzLnB1c2gob1szKih1LTEpKzFdKSx0LmNvbG9ycy5wdXNoKG9bMyoodS0xKSsyXSksdC5jb2xvcnMucHVzaChvWzMqdV0pLHQuY29sb3JzLnB1c2gob1szKnUrMV0pLHQuY29sb3JzLnB1c2gob1szKnUrMl0pKSxlLm1hdGVyaWFsJiZcIkFsbFNhbWVcIiE9PWUubWF0ZXJpYWwubWFwcGluZ1R5cGUmJih0Lm1hdGVyaWFsSW5kZXgucHVzaChyKSx0Lm1hdGVyaWFsSW5kZXgucHVzaChyKSx0Lm1hdGVyaWFsSW5kZXgucHVzaChyKSksZS5ub3JtYWwmJih0Lm5vcm1hbC5wdXNoKGlbMF0pLHQubm9ybWFsLnB1c2goaVsxXSksdC5ub3JtYWwucHVzaChpWzJdKSx0Lm5vcm1hbC5wdXNoKGlbMyoodS0xKV0pLHQubm9ybWFsLnB1c2goaVszKih1LTEpKzFdKSx0Lm5vcm1hbC5wdXNoKGlbMyoodS0xKSsyXSksdC5ub3JtYWwucHVzaChpWzMqdV0pLHQubm9ybWFsLnB1c2goaVszKnUrMV0pLHQubm9ybWFsLnB1c2goaVszKnUrMl0pKSxlLnV2JiZlLnV2LmZvckVhY2goKGZ1bmN0aW9uKGUsbil7dm9pZCAwPT09dC51dnNbbl0mJih0LnV2c1tuXT1bXSksdC51dnNbbl0ucHVzaChhW25dWzBdKSx0LnV2c1tuXS5wdXNoKGFbbl1bMV0pLHQudXZzW25dLnB1c2goYVtuXVsyKih1LTEpXSksdC51dnNbbl0ucHVzaChhW25dWzIqKHUtMSkrMV0pLHQudXZzW25dLnB1c2goYVtuXVsyKnVdKSx0LnV2c1tuXS5wdXNoKGFbbl1bMip1KzFdKX0pKX0sYWRkTW9ycGhUYXJnZXRzOmZ1bmN0aW9uKGUsbixyLGkpe2lmKDAhPT1yLmxlbmd0aCl7ZS5tb3JwaFRhcmdldHNSZWxhdGl2ZT0hMCxlLm1vcnBoQXR0cmlidXRlcy5wb3NpdGlvbj1bXTt2YXIgbz10aGlzO3IuZm9yRWFjaCgoZnVuY3Rpb24ocil7ci5yYXdUYXJnZXRzLmZvckVhY2goKGZ1bmN0aW9uKHIpe3ZhciBhPXQuT2JqZWN0cy5HZW9tZXRyeVtyLmdlb0lEXTt2b2lkIDAhPT1hJiZvLmdlbk1vcnBoR2VvbWV0cnkoZSxuLGEsaSxyLm5hbWUpfSkpfSkpfX0sZ2VuTW9ycGhHZW9tZXRyeTpmdW5jdGlvbih0LGUsbixpLG8pe2Zvcih2YXIgYT12b2lkIDAhPT1lLlBvbHlnb25WZXJ0ZXhJbmRleD9lLlBvbHlnb25WZXJ0ZXhJbmRleC5hOltdLHM9dm9pZCAwIT09bi5WZXJ0aWNlcz9uLlZlcnRpY2VzLmE6W10sYz12b2lkIDAhPT1uLkluZGV4ZXM/bi5JbmRleGVzLmE6W10sbD0zKnQuYXR0cmlidXRlcy5wb3NpdGlvbi5jb3VudCx1PW5ldyBGbG9hdDMyQXJyYXkobCksaD0wO2g8Yy5sZW5ndGg7aCsrKXt2YXIgZD0zKmNbaF07dVtkXT1zWzMqaF0sdVtkKzFdPXNbMypoKzFdLHVbZCsyXT1zWzMqaCsyXX12YXIgcD17dmVydGV4SW5kaWNlczphLHZlcnRleFBvc2l0aW9uczp1fSxmPXRoaXMuZ2VuQnVmZmVycyhwKSxtPW5ldyByLkZsb2F0MzJCdWZmZXJBdHRyaWJ1dGUoZi52ZXJ0ZXgsMyk7bS5uYW1lPW98fG4uYXR0ck5hbWUsbS5hcHBseU1hdHJpeDQoaSksdC5tb3JwaEF0dHJpYnV0ZXMucG9zaXRpb24ucHVzaChtKX0scGFyc2VOb3JtYWxzOmZ1bmN0aW9uKHQpe3ZhciBlPXQuTWFwcGluZ0luZm9ybWF0aW9uVHlwZSxuPXQuUmVmZXJlbmNlSW5mb3JtYXRpb25UeXBlLHI9dC5Ob3JtYWxzLmEsaT1bXTtyZXR1cm5cIkluZGV4VG9EaXJlY3RcIj09PW4mJihcIk5vcm1hbEluZGV4XCJpbiB0P2k9dC5Ob3JtYWxJbmRleC5hOlwiTm9ybWFsc0luZGV4XCJpbiB0JiYoaT10Lk5vcm1hbHNJbmRleC5hKSkse2RhdGFTaXplOjMsYnVmZmVyOnIsaW5kaWNlczppLG1hcHBpbmdUeXBlOmUscmVmZXJlbmNlVHlwZTpufX0scGFyc2VVVnM6ZnVuY3Rpb24odCl7dmFyIGU9dC5NYXBwaW5nSW5mb3JtYXRpb25UeXBlLG49dC5SZWZlcmVuY2VJbmZvcm1hdGlvblR5cGUscj10LlVWLmEsaT1bXTtyZXR1cm5cIkluZGV4VG9EaXJlY3RcIj09PW4mJihpPXQuVVZJbmRleC5hKSx7ZGF0YVNpemU6MixidWZmZXI6cixpbmRpY2VzOmksbWFwcGluZ1R5cGU6ZSxyZWZlcmVuY2VUeXBlOm59fSxwYXJzZVZlcnRleENvbG9yczpmdW5jdGlvbih0KXt2YXIgZT10Lk1hcHBpbmdJbmZvcm1hdGlvblR5cGUsbj10LlJlZmVyZW5jZUluZm9ybWF0aW9uVHlwZSxyPXQuQ29sb3JzLmEsaT1bXTtyZXR1cm5cIkluZGV4VG9EaXJlY3RcIj09PW4mJihpPXQuQ29sb3JJbmRleC5hKSx7ZGF0YVNpemU6NCxidWZmZXI6cixpbmRpY2VzOmksbWFwcGluZ1R5cGU6ZSxyZWZlcmVuY2VUeXBlOm59fSxwYXJzZU1hdGVyaWFsSW5kaWNlczpmdW5jdGlvbih0KXt2YXIgZT10Lk1hcHBpbmdJbmZvcm1hdGlvblR5cGUsbj10LlJlZmVyZW5jZUluZm9ybWF0aW9uVHlwZTtpZihcIk5vTWFwcGluZ0luZm9ybWF0aW9uXCI9PT1lKXJldHVybntkYXRhU2l6ZToxLGJ1ZmZlcjpbMF0saW5kaWNlczpbMF0sbWFwcGluZ1R5cGU6XCJBbGxTYW1lXCIscmVmZXJlbmNlVHlwZTpufTtmb3IodmFyIHI9dC5NYXRlcmlhbHMuYSxpPVtdLG89MDtvPHIubGVuZ3RoOysrbylpLnB1c2gobyk7cmV0dXJue2RhdGFTaXplOjEsYnVmZmVyOnIsaW5kaWNlczppLG1hcHBpbmdUeXBlOmUscmVmZXJlbmNlVHlwZTpufX0scGFyc2VOdXJic0dlb21ldHJ5OmZ1bmN0aW9uKHQpe2lmKHZvaWQgMD09PWspcmV0dXJuIGNvbnNvbGUuZXJyb3IoXCJUSFJFRS5GQlhMb2FkZXI6IFRoZSBsb2FkZXIgcmVsaWVzIG9uIE5VUkJTQ3VydmUgZm9yIGFueSBudXJicyBwcmVzZW50IGluIHRoZSBtb2RlbC4gTnVyYnMgd2lsbCBzaG93IHVwIGFzIGVtcHR5IGdlb21ldHJ5LlwiKSxuZXcgci5CdWZmZXJHZW9tZXRyeTt2YXIgZT1wYXJzZUludCh0Lk9yZGVyKTtpZihpc05hTihlKSlyZXR1cm4gY29uc29sZS5lcnJvcihcIlRIUkVFLkZCWExvYWRlcjogSW52YWxpZCBPcmRlciAlcyBnaXZlbiBmb3IgZ2VvbWV0cnkgSUQ6ICVzXCIsdC5PcmRlcix0LmlkKSxuZXcgci5CdWZmZXJHZW9tZXRyeTtmb3IodmFyIG4saSxvPWUtMSxhPXQuS25vdFZlY3Rvci5hLHM9W10sYz10LlBvaW50cy5hLGw9MCx1PWMubGVuZ3RoO2w8dTtsKz00KXMucHVzaCgobmV3IHIuVmVjdG9yNCkuZnJvbUFycmF5KGMsbCkpO2lmKFwiQ2xvc2VkXCI9PT10LkZvcm0pcy5wdXNoKHNbMF0pO2Vsc2UgaWYoXCJQZXJpb2RpY1wiPT09dC5Gb3JtKXtuPW8saT1hLmxlbmd0aC0xLW47Zm9yKGw9MDtsPG87KytsKXMucHVzaChzW2xdKX12YXIgaD1uZXcgayhvLGEscyxuLGkpLmdldFBvaW50cyg3KnMubGVuZ3RoKSxkPW5ldyBGbG9hdDMyQXJyYXkoMypoLmxlbmd0aCk7aC5mb3JFYWNoKChmdW5jdGlvbih0LGUpe3QudG9BcnJheShkLDMqZSl9KSk7dmFyIHA9bmV3IHIuQnVmZmVyR2VvbWV0cnk7cmV0dXJuIHAuc2V0QXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgci5CdWZmZXJBdHRyaWJ1dGUoZCwzKSkscH19LHMucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpzLHBhcnNlOmZ1bmN0aW9uKCl7dmFyIHQ9W10sZT10aGlzLnBhcnNlQ2xpcHMoKTtpZih2b2lkIDAhPT1lKWZvcih2YXIgbiBpbiBlKXt2YXIgcj1lW25dLGk9dGhpcy5hZGRDbGlwKHIpO3QucHVzaChpKX1yZXR1cm4gdH0scGFyc2VDbGlwczpmdW5jdGlvbigpe2lmKHZvaWQgMCE9PXQuT2JqZWN0cy5BbmltYXRpb25DdXJ2ZSl7dmFyIGU9dGhpcy5wYXJzZUFuaW1hdGlvbkN1cnZlTm9kZXMoKTt0aGlzLnBhcnNlQW5pbWF0aW9uQ3VydmVzKGUpO3ZhciBuPXRoaXMucGFyc2VBbmltYXRpb25MYXllcnMoZSk7cmV0dXJuIHRoaXMucGFyc2VBbmltU3RhY2tzKG4pfX0scGFyc2VBbmltYXRpb25DdXJ2ZU5vZGVzOmZ1bmN0aW9uKCl7dmFyIGU9dC5PYmplY3RzLkFuaW1hdGlvbkN1cnZlTm9kZSxuPW5ldyBNYXA7Zm9yKHZhciByIGluIGUpe3ZhciBpPWVbcl07aWYobnVsbCE9PWkuYXR0ck5hbWUubWF0Y2goL1N8UnxUfERlZm9ybVBlcmNlbnQvKSl7dmFyIG89e2lkOmkuaWQsYXR0cjppLmF0dHJOYW1lLGN1cnZlczp7fX07bi5zZXQoby5pZCxvKX19cmV0dXJuIG59LHBhcnNlQW5pbWF0aW9uQ3VydmVzOmZ1bmN0aW9uKG4pe3ZhciByPXQuT2JqZWN0cy5BbmltYXRpb25DdXJ2ZTtmb3IodmFyIGkgaW4gcil7dmFyIG89e2lkOnJbaV0uaWQsdGltZXM6cltpXS5LZXlUaW1lLmEubWFwKHApLHZhbHVlczpyW2ldLktleVZhbHVlRmxvYXQuYX0sYT1lLmdldChvLmlkKTtpZih2b2lkIDAhPT1hKXt2YXIgcz1hLnBhcmVudHNbMF0uSUQsYz1hLnBhcmVudHNbMF0ucmVsYXRpb25zaGlwO2MubWF0Y2goL1gvKT9uLmdldChzKS5jdXJ2ZXMueD1vOmMubWF0Y2goL1kvKT9uLmdldChzKS5jdXJ2ZXMueT1vOmMubWF0Y2goL1ovKT9uLmdldChzKS5jdXJ2ZXMuej1vOmMubWF0Y2goL2R8RGVmb3JtUGVyY2VudC8pJiZuLmhhcyhzKSYmKG4uZ2V0KHMpLmN1cnZlcy5tb3JwaD1vKX19fSxwYXJzZUFuaW1hdGlvbkxheWVyczpmdW5jdGlvbihpKXt2YXIgbz10Lk9iamVjdHMuQW5pbWF0aW9uTGF5ZXIsYT1uZXcgTWFwO2Zvcih2YXIgcyBpbiBvKXt2YXIgYz1bXSxsPWUuZ2V0KHBhcnNlSW50KHMpKTtpZih2b2lkIDAhPT1sKWwuY2hpbGRyZW4uZm9yRWFjaCgoZnVuY3Rpb24obyxhKXtpZihpLmhhcyhvLklEKSl7dmFyIHM9aS5nZXQoby5JRCk7aWYodm9pZCAwIT09cy5jdXJ2ZXMueHx8dm9pZCAwIT09cy5jdXJ2ZXMueXx8dm9pZCAwIT09cy5jdXJ2ZXMueil7aWYodm9pZCAwPT09Y1thXSlpZih2b2lkIDAhPT0oZj1lLmdldChvLklEKS5wYXJlbnRzLmZpbHRlcigoZnVuY3Rpb24odCl7cmV0dXJuIHZvaWQgMCE9PXQucmVsYXRpb25zaGlwfSkpWzBdLklEKSl7aWYodm9pZCAwPT09KHU9dC5PYmplY3RzLk1vZGVsW2YudG9TdHJpbmcoKV0pKXJldHVybiB2b2lkIGNvbnNvbGUud2FybihcIlRIUkVFLkZCWExvYWRlcjogRW5jb3VudGVyZWQgYSB1bnVzZWQgY3VydmUuXCIsbyk7dmFyIGw9e21vZGVsTmFtZTp1LmF0dHJOYW1lP3IuUHJvcGVydHlCaW5kaW5nLnNhbml0aXplTm9kZU5hbWUodS5hdHRyTmFtZSk6XCJcIixJRDp1LmlkLGluaXRpYWxQb3NpdGlvbjpbMCwwLDBdLGluaXRpYWxSb3RhdGlvbjpbMCwwLDBdLGluaXRpYWxTY2FsZTpbMSwxLDFdfTtuLnRyYXZlcnNlKChmdW5jdGlvbih0KXt0LklEPT09dS5pZCYmKGwudHJhbnNmb3JtPXQubWF0cml4LHQudXNlckRhdGEudHJhbnNmb3JtRGF0YSYmKGwuZXVsZXJPcmRlcj10LnVzZXJEYXRhLnRyYW5zZm9ybURhdGEuZXVsZXJPcmRlcikpfSkpLGwudHJhbnNmb3JtfHwobC50cmFuc2Zvcm09bmV3IHIuTWF0cml4NCksXCJQcmVSb3RhdGlvblwiaW4gdSYmKGwucHJlUm90YXRpb249dS5QcmVSb3RhdGlvbi52YWx1ZSksXCJQb3N0Um90YXRpb25cImluIHUmJihsLnBvc3RSb3RhdGlvbj11LlBvc3RSb3RhdGlvbi52YWx1ZSksY1thXT1sfWNbYV0mJihjW2FdW3MuYXR0cl09cyl9ZWxzZSBpZih2b2lkIDAhPT1zLmN1cnZlcy5tb3JwaCl7aWYodm9pZCAwPT09Y1thXSl7dmFyIHUsaD1lLmdldChvLklEKS5wYXJlbnRzLmZpbHRlcigoZnVuY3Rpb24odCl7cmV0dXJuIHZvaWQgMCE9PXQucmVsYXRpb25zaGlwfSkpWzBdLklELGQ9ZS5nZXQoaCkucGFyZW50c1swXS5JRCxwPWUuZ2V0KGQpLnBhcmVudHNbMF0uSUQsZj1lLmdldChwKS5wYXJlbnRzWzBdLklEO2w9e21vZGVsTmFtZToodT10Lk9iamVjdHMuTW9kZWxbZl0pLmF0dHJOYW1lP3IuUHJvcGVydHlCaW5kaW5nLnNhbml0aXplTm9kZU5hbWUodS5hdHRyTmFtZSk6XCJcIixtb3JwaE5hbWU6dC5PYmplY3RzLkRlZm9ybWVyW2hdLmF0dHJOYW1lfTtjW2FdPWx9Y1thXVtzLmF0dHJdPXN9fX0pKSxhLnNldChwYXJzZUludChzKSxjKX1yZXR1cm4gYX0scGFyc2VBbmltU3RhY2tzOmZ1bmN0aW9uKG4pe3ZhciByPXQuT2JqZWN0cy5BbmltYXRpb25TdGFjayxpPXt9O2Zvcih2YXIgbyBpbiByKXt2YXIgYT1lLmdldChwYXJzZUludChvKSkuY2hpbGRyZW47YS5sZW5ndGg+MSYmY29uc29sZS53YXJuKFwiVEhSRUUuRkJYTG9hZGVyOiBFbmNvdW50ZXJlZCBhbiBhbmltYXRpb24gc3RhY2sgd2l0aCBtdWx0aXBsZSBsYXllcnMsIHRoaXMgaXMgY3VycmVudGx5IG5vdCBzdXBwb3J0ZWQuIElnbm9yaW5nIHN1YnNlcXVlbnQgbGF5ZXJzLlwiKTt2YXIgcz1uLmdldChhWzBdLklEKTtpW29dPXtuYW1lOnJbb10uYXR0ck5hbWUsbGF5ZXI6c319cmV0dXJuIGl9LGFkZENsaXA6ZnVuY3Rpb24odCl7dmFyIGU9W10sbj10aGlzO3JldHVybiB0LmxheWVyLmZvckVhY2goKGZ1bmN0aW9uKHQpe2U9ZS5jb25jYXQobi5nZW5lcmF0ZVRyYWNrcyh0KSl9KSksbmV3IHIuQW5pbWF0aW9uQ2xpcCh0Lm5hbWUsLTEsZSl9LGdlbmVyYXRlVHJhY2tzOmZ1bmN0aW9uKHQpe3ZhciBlPVtdLG49bmV3IHIuVmVjdG9yMyxpPW5ldyByLlF1YXRlcm5pb24sbz1uZXcgci5WZWN0b3IzO2lmKHQudHJhbnNmb3JtJiZ0LnRyYW5zZm9ybS5kZWNvbXBvc2UobixpLG8pLG49bi50b0FycmF5KCksaT0obmV3IHIuRXVsZXIpLnNldEZyb21RdWF0ZXJuaW9uKGksdC5ldWxlck9yZGVyKS50b0FycmF5KCksbz1vLnRvQXJyYXkoKSx2b2lkIDAhPT10LlQmJk9iamVjdC5rZXlzKHQuVC5jdXJ2ZXMpLmxlbmd0aD4wKXt2YXIgYT10aGlzLmdlbmVyYXRlVmVjdG9yVHJhY2sodC5tb2RlbE5hbWUsdC5ULmN1cnZlcyxuLFwicG9zaXRpb25cIik7dm9pZCAwIT09YSYmZS5wdXNoKGEpfWlmKHZvaWQgMCE9PXQuUiYmT2JqZWN0LmtleXModC5SLmN1cnZlcykubGVuZ3RoPjApe3ZhciBzPXRoaXMuZ2VuZXJhdGVSb3RhdGlvblRyYWNrKHQubW9kZWxOYW1lLHQuUi5jdXJ2ZXMsaSx0LnByZVJvdGF0aW9uLHQucG9zdFJvdGF0aW9uLHQuZXVsZXJPcmRlcik7dm9pZCAwIT09cyYmZS5wdXNoKHMpfWlmKHZvaWQgMCE9PXQuUyYmT2JqZWN0LmtleXModC5TLmN1cnZlcykubGVuZ3RoPjApe3ZhciBjPXRoaXMuZ2VuZXJhdGVWZWN0b3JUcmFjayh0Lm1vZGVsTmFtZSx0LlMuY3VydmVzLG8sXCJzY2FsZVwiKTt2b2lkIDAhPT1jJiZlLnB1c2goYyl9aWYodm9pZCAwIT09dC5EZWZvcm1QZXJjZW50KXt2YXIgbD10aGlzLmdlbmVyYXRlTW9ycGhUcmFjayh0KTt2b2lkIDAhPT1sJiZlLnB1c2gobCl9cmV0dXJuIGV9LGdlbmVyYXRlVmVjdG9yVHJhY2s6ZnVuY3Rpb24odCxlLG4saSl7dmFyIG89dGhpcy5nZXRUaW1lc0ZvckFsbEF4ZXMoZSksYT10aGlzLmdldEtleWZyYW1lVHJhY2tWYWx1ZXMobyxlLG4pO3JldHVybiBuZXcgci5WZWN0b3JLZXlmcmFtZVRyYWNrKHQrXCIuXCIraSxvLGEpfSxnZW5lcmF0ZVJvdGF0aW9uVHJhY2s6ZnVuY3Rpb24odCxlLG4saSxvLGEpe3ZvaWQgMCE9PWUueCYmKHRoaXMuaW50ZXJwb2xhdGVSb3RhdGlvbnMoZS54KSxlLngudmFsdWVzPWUueC52YWx1ZXMubWFwKHIuTWF0aFV0aWxzLmRlZ1RvUmFkKSksdm9pZCAwIT09ZS55JiYodGhpcy5pbnRlcnBvbGF0ZVJvdGF0aW9ucyhlLnkpLGUueS52YWx1ZXM9ZS55LnZhbHVlcy5tYXAoci5NYXRoVXRpbHMuZGVnVG9SYWQpKSx2b2lkIDAhPT1lLnomJih0aGlzLmludGVycG9sYXRlUm90YXRpb25zKGUueiksZS56LnZhbHVlcz1lLnoudmFsdWVzLm1hcChyLk1hdGhVdGlscy5kZWdUb1JhZCkpO3ZhciBzPXRoaXMuZ2V0VGltZXNGb3JBbGxBeGVzKGUpLGM9dGhpcy5nZXRLZXlmcmFtZVRyYWNrVmFsdWVzKHMsZSxuKTt2b2lkIDAhPT1pJiYoKGk9aS5tYXAoci5NYXRoVXRpbHMuZGVnVG9SYWQpKS5wdXNoKGEpLGk9KG5ldyByLkV1bGVyKS5mcm9tQXJyYXkoaSksaT0obmV3IHIuUXVhdGVybmlvbikuc2V0RnJvbUV1bGVyKGkpKSx2b2lkIDAhPT1vJiYoKG89by5tYXAoci5NYXRoVXRpbHMuZGVnVG9SYWQpKS5wdXNoKGEpLG89KG5ldyByLkV1bGVyKS5mcm9tQXJyYXkobyksbz0obmV3IHIuUXVhdGVybmlvbikuc2V0RnJvbUV1bGVyKG8pLmludmVydCgpKTtmb3IodmFyIGw9bmV3IHIuUXVhdGVybmlvbix1PW5ldyByLkV1bGVyLGg9W10sZD0wO2Q8Yy5sZW5ndGg7ZCs9Myl1LnNldChjW2RdLGNbZCsxXSxjW2QrMl0sYSksbC5zZXRGcm9tRXVsZXIodSksdm9pZCAwIT09aSYmbC5wcmVtdWx0aXBseShpKSx2b2lkIDAhPT1vJiZsLm11bHRpcGx5KG8pLGwudG9BcnJheShoLGQvMyo0KTtyZXR1cm4gbmV3IHIuUXVhdGVybmlvbktleWZyYW1lVHJhY2sodCtcIi5xdWF0ZXJuaW9uXCIscyxoKX0sZ2VuZXJhdGVNb3JwaFRyYWNrOmZ1bmN0aW9uKHQpe3ZhciBlPXQuRGVmb3JtUGVyY2VudC5jdXJ2ZXMubW9ycGgsaT1lLnZhbHVlcy5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiB0LzEwMH0pKSxvPW4uZ2V0T2JqZWN0QnlOYW1lKHQubW9kZWxOYW1lKS5tb3JwaFRhcmdldERpY3Rpb25hcnlbdC5tb3JwaE5hbWVdO3JldHVybiBuZXcgci5OdW1iZXJLZXlmcmFtZVRyYWNrKHQubW9kZWxOYW1lK1wiLm1vcnBoVGFyZ2V0SW5mbHVlbmNlc1tcIitvK1wiXVwiLGUudGltZXMsaSl9LGdldFRpbWVzRm9yQWxsQXhlczpmdW5jdGlvbih0KXt2YXIgZT1bXTtyZXR1cm4gdm9pZCAwIT09dC54JiYoZT1lLmNvbmNhdCh0LngudGltZXMpKSx2b2lkIDAhPT10LnkmJihlPWUuY29uY2F0KHQueS50aW1lcykpLHZvaWQgMCE9PXQueiYmKGU9ZS5jb25jYXQodC56LnRpbWVzKSksZT1lLnNvcnQoKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQtZX0pKS5maWx0ZXIoKGZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gbi5pbmRleE9mKHQpPT1lfSkpfSxnZXRLZXlmcmFtZVRyYWNrVmFsdWVzOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uLGk9W10sbz0tMSxhPS0xLHM9LTE7cmV0dXJuIHQuZm9yRWFjaCgoZnVuY3Rpb24odCl7aWYoZS54JiYobz1lLngudGltZXMuaW5kZXhPZih0KSksZS55JiYoYT1lLnkudGltZXMuaW5kZXhPZih0KSksZS56JiYocz1lLnoudGltZXMuaW5kZXhPZih0KSksLTEhPT1vKXt2YXIgbj1lLngudmFsdWVzW29dO2kucHVzaChuKSxyWzBdPW59ZWxzZSBpLnB1c2goclswXSk7aWYoLTEhPT1hKXt2YXIgYz1lLnkudmFsdWVzW2FdO2kucHVzaChjKSxyWzFdPWN9ZWxzZSBpLnB1c2goclsxXSk7aWYoLTEhPT1zKXt2YXIgbD1lLnoudmFsdWVzW3NdO2kucHVzaChsKSxyWzJdPWx9ZWxzZSBpLnB1c2goclsyXSl9KSksaX0saW50ZXJwb2xhdGVSb3RhdGlvbnM6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTE7ZTx0LnZhbHVlcy5sZW5ndGg7ZSsrKXt2YXIgbj10LnZhbHVlc1tlLTFdLHI9dC52YWx1ZXNbZV0tbixpPU1hdGguYWJzKHIpO2lmKGk+PTE4MCl7Zm9yKHZhciBvPWkvMTgwLGE9ci9vLHM9bithLGM9dC50aW1lc1tlLTFdLGw9KHQudGltZXNbZV0tYykvbyx1PWMrbCxoPVtdLGQ9W107dTx0LnRpbWVzW2VdOyloLnB1c2godSksdSs9bCxkLnB1c2gocykscys9YTt0LnRpbWVzPV8odC50aW1lcyxlLGgpLHQudmFsdWVzPV8odC52YWx1ZXMsZSxkKX19fX0sYy5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOmMsZ2V0UHJldk5vZGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ub2RlU3RhY2tbdGhpcy5jdXJyZW50SW5kZW50LTJdfSxnZXRDdXJyZW50Tm9kZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGVTdGFja1t0aGlzLmN1cnJlbnRJbmRlbnQtMV19LGdldEN1cnJlbnRQcm9wOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY3VycmVudFByb3B9LHB1c2hTdGFjazpmdW5jdGlvbih0KXt0aGlzLm5vZGVTdGFjay5wdXNoKHQpLHRoaXMuY3VycmVudEluZGVudCs9MX0scG9wU3RhY2s6ZnVuY3Rpb24oKXt0aGlzLm5vZGVTdGFjay5wb3AoKSx0aGlzLmN1cnJlbnRJbmRlbnQtPTF9LHNldEN1cnJlbnRQcm9wOmZ1bmN0aW9uKHQsZSl7dGhpcy5jdXJyZW50UHJvcD10LHRoaXMuY3VycmVudFByb3BOYW1lPWV9LHBhcnNlOmZ1bmN0aW9uKHQpe3RoaXMuY3VycmVudEluZGVudD0wLHRoaXMuYWxsTm9kZXM9bmV3IGgsdGhpcy5ub2RlU3RhY2s9W10sdGhpcy5jdXJyZW50UHJvcD1bXSx0aGlzLmN1cnJlbnRQcm9wTmFtZT1cIlwiO3ZhciBlPXRoaXMsbj10LnNwbGl0KC9bXFxyXFxuXSsvKTtyZXR1cm4gbi5mb3JFYWNoKChmdW5jdGlvbih0LHIpe3ZhciBpPXQubWF0Y2goL15bXFxzXFx0XSo7Lyksbz10Lm1hdGNoKC9eW1xcc1xcdF0qJC8pO2lmKCFpJiYhbyl7dmFyIGE9dC5tYXRjaChcIl5cXFxcdHtcIitlLmN1cnJlbnRJbmRlbnQrXCJ9KFxcXFx3Kyk6KC4qKXtcIixcIlwiKSxzPXQubWF0Y2goXCJeXFxcXHR7XCIrZS5jdXJyZW50SW5kZW50K1wifShcXFxcdyspOltcXFxcc1xcXFx0XFxcXHJcXFxcbl0oLiopXCIpLGM9dC5tYXRjaChcIl5cXFxcdHtcIisoZS5jdXJyZW50SW5kZW50LTEpK1wifX1cIik7YT9lLnBhcnNlTm9kZUJlZ2luKHQsYSk6cz9lLnBhcnNlTm9kZVByb3BlcnR5KHQscyxuWysrcl0pOmM/ZS5wb3BTdGFjaygpOnQubWF0Y2goL15bXlxcc1xcdH1dLykmJmUucGFyc2VOb2RlUHJvcGVydHlDb250aW51ZWQodCl9fSkpLHRoaXMuYWxsTm9kZXN9LHBhcnNlTm9kZUJlZ2luOmZ1bmN0aW9uKHQsZSl7dmFyIG49ZVsxXS50cmltKCkucmVwbGFjZSgvXlwiLyxcIlwiKS5yZXBsYWNlKC9cIiQvLFwiXCIpLHI9ZVsyXS5zcGxpdChcIixcIikubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gdC50cmltKCkucmVwbGFjZSgvXlwiLyxcIlwiKS5yZXBsYWNlKC9cIiQvLFwiXCIpfSkpLGk9e25hbWU6bn0sbz10aGlzLnBhcnNlTm9kZUF0dHIociksYT10aGlzLmdldEN1cnJlbnROb2RlKCk7MD09PXRoaXMuY3VycmVudEluZGVudD90aGlzLmFsbE5vZGVzLmFkZChuLGkpOm4gaW4gYT8oXCJQb3NlTm9kZVwiPT09bj9hLlBvc2VOb2RlLnB1c2goaSk6dm9pZCAwIT09YVtuXS5pZCYmKGFbbl09e30sYVtuXVthW25dLmlkXT1hW25dKSxcIlwiIT09by5pZCYmKGFbbl1bby5pZF09aSkpOlwibnVtYmVyXCI9PXR5cGVvZiBvLmlkPyhhW25dPXt9LGFbbl1bby5pZF09aSk6XCJQcm9wZXJ0aWVzNzBcIiE9PW4mJihhW25dPVwiUG9zZU5vZGVcIj09PW4/W2ldOmkpLFwibnVtYmVyXCI9PXR5cGVvZiBvLmlkJiYoaS5pZD1vLmlkKSxcIlwiIT09by5uYW1lJiYoaS5hdHRyTmFtZT1vLm5hbWUpLFwiXCIhPT1vLnR5cGUmJihpLmF0dHJUeXBlPW8udHlwZSksdGhpcy5wdXNoU3RhY2soaSl9LHBhcnNlTm9kZUF0dHI6ZnVuY3Rpb24odCl7dmFyIGU9dFswXTtcIlwiIT09dFswXSYmKGU9cGFyc2VJbnQodFswXSksaXNOYU4oZSkmJihlPXRbMF0pKTt2YXIgbj1cIlwiLHI9XCJcIjtyZXR1cm4gdC5sZW5ndGg+MSYmKG49dFsxXS5yZXBsYWNlKC9eKFxcdyspOjovLFwiXCIpLHI9dFsyXSkse2lkOmUsbmFtZTpuLHR5cGU6cn19LHBhcnNlTm9kZVByb3BlcnR5OmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1lWzFdLnJlcGxhY2UoL15cIi8sXCJcIikucmVwbGFjZSgvXCIkLyxcIlwiKS50cmltKCksaT1lWzJdLnJlcGxhY2UoL15cIi8sXCJcIikucmVwbGFjZSgvXCIkLyxcIlwiKS50cmltKCk7XCJDb250ZW50XCI9PT1yJiZcIixcIj09PWkmJihpPW4ucmVwbGFjZSgvXCIvZyxcIlwiKS5yZXBsYWNlKC8sJC8sXCJcIikudHJpbSgpKTt2YXIgbz10aGlzLmdldEN1cnJlbnROb2RlKCk7aWYoXCJQcm9wZXJ0aWVzNzBcIiE9PW8ubmFtZSl7aWYoXCJDXCI9PT1yKXt2YXIgYT1pLnNwbGl0KFwiLFwiKS5zbGljZSgxKSxzPXBhcnNlSW50KGFbMF0pLGM9cGFyc2VJbnQoYVsxXSksbD1pLnNwbGl0KFwiLFwiKS5zbGljZSgzKTtyPVwiY29ubmVjdGlvbnNcIixmdW5jdGlvbih0LGUpe2Zvcih2YXIgbj0wLHI9dC5sZW5ndGgsaT1lLmxlbmd0aDtuPGk7bisrLHIrKyl0W3JdPWVbbl19KGk9W3MsY10sbD1sLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIHQudHJpbSgpLnJlcGxhY2UoL15cIi8sXCJcIil9KSkpLHZvaWQgMD09PW9bcl0mJihvW3JdPVtdKX1cIk5vZGVcIj09PXImJihvLmlkPWkpLHIgaW4gbyYmQXJyYXkuaXNBcnJheShvW3JdKT9vW3JdLnB1c2goaSk6XCJhXCIhPT1yP29bcl09aTpvLmE9aSx0aGlzLnNldEN1cnJlbnRQcm9wKG8sciksXCJhXCI9PT1yJiZcIixcIiE9PWkuc2xpY2UoLTEpJiYoby5hPWIoaSkpfWVsc2UgdGhpcy5wYXJzZU5vZGVTcGVjaWFsUHJvcGVydHkodCxyLGkpfSxwYXJzZU5vZGVQcm9wZXJ0eUNvbnRpbnVlZDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmdldEN1cnJlbnROb2RlKCk7ZS5hKz10LFwiLFwiIT09dC5zbGljZSgtMSkmJihlLmE9YihlLmEpKX0scGFyc2VOb2RlU3BlY2lhbFByb3BlcnR5OmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uLnNwbGl0KCdcIiwnKS5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiB0LnRyaW0oKS5yZXBsYWNlKC9eXFxcIi8sXCJcIikucmVwbGFjZSgvXFxzLyxcIl9cIil9KSksaT1yWzBdLG89clsxXSxhPXJbMl0scz1yWzNdLGM9cls0XTtzd2l0Y2gobyl7Y2FzZVwiaW50XCI6Y2FzZVwiZW51bVwiOmNhc2VcImJvb2xcIjpjYXNlXCJVTG9uZ0xvbmdcIjpjYXNlXCJkb3VibGVcIjpjYXNlXCJOdW1iZXJcIjpjYXNlXCJGaWVsZE9mVmlld1wiOmM9cGFyc2VGbG9hdChjKTticmVhaztjYXNlXCJDb2xvclwiOmNhc2VcIkNvbG9yUkdCXCI6Y2FzZVwiVmVjdG9yM0RcIjpjYXNlXCJMY2xfVHJhbnNsYXRpb25cIjpjYXNlXCJMY2xfUm90YXRpb25cIjpjYXNlXCJMY2xfU2NhbGluZ1wiOmM9YihjKX10aGlzLmdldFByZXZOb2RlKClbaV09e3R5cGU6byx0eXBlMjphLGZsYWc6cyx2YWx1ZTpjfSx0aGlzLnNldEN1cnJlbnRQcm9wKHRoaXMuZ2V0UHJldk5vZGUoKSxpKX19LGwucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpsLHBhcnNlOmZ1bmN0aW9uKHQpe3ZhciBlPW5ldyB1KHQpO2Uuc2tpcCgyMyk7dmFyIG49ZS5nZXRVaW50MzIoKTtpZihuPDY0MDApdGhyb3cgbmV3IEVycm9yKFwiVEhSRUUuRkJYTG9hZGVyOiBGQlggdmVyc2lvbiBub3Qgc3VwcG9ydGVkLCBGaWxlVmVyc2lvbjogXCIrbik7Zm9yKHZhciByPW5ldyBoOyF0aGlzLmVuZE9mQ29udGVudChlKTspe3ZhciBpPXRoaXMucGFyc2VOb2RlKGUsbik7bnVsbCE9PWkmJnIuYWRkKGkubmFtZSxpKX1yZXR1cm4gcn0sZW5kT2ZDb250ZW50OmZ1bmN0aW9uKHQpe3JldHVybiB0LnNpemUoKSUxNj09MD8odC5nZXRPZmZzZXQoKSsxNjArMTYmLTE2KT49dC5zaXplKCk6dC5nZXRPZmZzZXQoKSsxNjArMTY+PXQuc2l6ZSgpfSxwYXJzZU5vZGU6ZnVuY3Rpb24odCxlKXt2YXIgbj17fSxyPWU+PTc1MDA/dC5nZXRVaW50NjQoKTp0LmdldFVpbnQzMigpLGk9ZT49NzUwMD90LmdldFVpbnQ2NCgpOnQuZ2V0VWludDMyKCk7ZT49NzUwMD90LmdldFVpbnQ2NCgpOnQuZ2V0VWludDMyKCk7dmFyIG89dC5nZXRVaW50OCgpLGE9dC5nZXRTdHJpbmcobyk7aWYoMD09PXIpcmV0dXJuIG51bGw7Zm9yKHZhciBzPVtdLGM9MDtjPGk7YysrKXMucHVzaCh0aGlzLnBhcnNlUHJvcGVydHkodCkpO3ZhciBsPXMubGVuZ3RoPjA/c1swXTpcIlwiLHU9cy5sZW5ndGg+MT9zWzFdOlwiXCIsaD1zLmxlbmd0aD4yP3NbMl06XCJcIjtmb3Iobi5zaW5nbGVQcm9wZXJ0eT0xPT09aSYmdC5nZXRPZmZzZXQoKT09PXI7cj50LmdldE9mZnNldCgpOyl7dmFyIGQ9dGhpcy5wYXJzZU5vZGUodCxlKTtudWxsIT09ZCYmdGhpcy5wYXJzZVN1Yk5vZGUoYSxuLGQpfXJldHVybiBuLnByb3BlcnR5TGlzdD1zLFwibnVtYmVyXCI9PXR5cGVvZiBsJiYobi5pZD1sKSxcIlwiIT09dSYmKG4uYXR0ck5hbWU9dSksXCJcIiE9PWgmJihuLmF0dHJUeXBlPWgpLFwiXCIhPT1hJiYobi5uYW1lPWEpLG59LHBhcnNlU3ViTm9kZTpmdW5jdGlvbih0LGUsbil7aWYoITA9PT1uLnNpbmdsZVByb3BlcnR5KXt2YXIgcj1uLnByb3BlcnR5TGlzdFswXTtBcnJheS5pc0FycmF5KHIpPyhlW24ubmFtZV09bixuLmE9cik6ZVtuLm5hbWVdPXJ9ZWxzZSBpZihcIkNvbm5lY3Rpb25zXCI9PT10JiZcIkNcIj09PW4ubmFtZSl7dmFyIGk9W107bi5wcm9wZXJ0eUxpc3QuZm9yRWFjaCgoZnVuY3Rpb24odCxlKXswIT09ZSYmaS5wdXNoKHQpfSkpLHZvaWQgMD09PWUuY29ubmVjdGlvbnMmJihlLmNvbm5lY3Rpb25zPVtdKSxlLmNvbm5lY3Rpb25zLnB1c2goaSl9ZWxzZSBpZihcIlByb3BlcnRpZXM3MFwiPT09bi5uYW1lKXtPYmplY3Qua2V5cyhuKS5mb3JFYWNoKChmdW5jdGlvbih0KXtlW3RdPW5bdF19KSl9ZWxzZSBpZihcIlByb3BlcnRpZXM3MFwiPT09dCYmXCJQXCI9PT1uLm5hbWUpe3ZhciBvLGE9bi5wcm9wZXJ0eUxpc3RbMF0scz1uLnByb3BlcnR5TGlzdFsxXSxjPW4ucHJvcGVydHlMaXN0WzJdLGw9bi5wcm9wZXJ0eUxpc3RbM107MD09PWEuaW5kZXhPZihcIkxjbCBcIikmJihhPWEucmVwbGFjZShcIkxjbCBcIixcIkxjbF9cIikpLDA9PT1zLmluZGV4T2YoXCJMY2wgXCIpJiYocz1zLnJlcGxhY2UoXCJMY2wgXCIsXCJMY2xfXCIpKSxvPVwiQ29sb3JcIj09PXN8fFwiQ29sb3JSR0JcIj09PXN8fFwiVmVjdG9yXCI9PT1zfHxcIlZlY3RvcjNEXCI9PT1zfHwwPT09cy5pbmRleE9mKFwiTGNsX1wiKT9bbi5wcm9wZXJ0eUxpc3RbNF0sbi5wcm9wZXJ0eUxpc3RbNV0sbi5wcm9wZXJ0eUxpc3RbNl1dOm4ucHJvcGVydHlMaXN0WzRdLGVbYV09e3R5cGU6cyx0eXBlMjpjLGZsYWc6bCx2YWx1ZTpvfX1lbHNlIHZvaWQgMD09PWVbbi5uYW1lXT9cIm51bWJlclwiPT10eXBlb2Ygbi5pZD8oZVtuLm5hbWVdPXt9LGVbbi5uYW1lXVtuLmlkXT1uKTplW24ubmFtZV09bjpcIlBvc2VOb2RlXCI9PT1uLm5hbWU/KEFycmF5LmlzQXJyYXkoZVtuLm5hbWVdKXx8KGVbbi5uYW1lXT1bZVtuLm5hbWVdXSksZVtuLm5hbWVdLnB1c2gobikpOnZvaWQgMD09PWVbbi5uYW1lXVtuLmlkXSYmKGVbbi5uYW1lXVtuLmlkXT1uKX0scGFyc2VQcm9wZXJ0eTpmdW5jdGlvbih0KXt2YXIgZT10LmdldFN0cmluZygxKTtzd2l0Y2goZSl7Y2FzZVwiQ1wiOnJldHVybiB0LmdldEJvb2xlYW4oKTtjYXNlXCJEXCI6cmV0dXJuIHQuZ2V0RmxvYXQ2NCgpO2Nhc2VcIkZcIjpyZXR1cm4gdC5nZXRGbG9hdDMyKCk7Y2FzZVwiSVwiOnJldHVybiB0LmdldEludDMyKCk7Y2FzZVwiTFwiOnJldHVybiB0LmdldEludDY0KCk7Y2FzZVwiUlwiOnZhciBuPXQuZ2V0VWludDMyKCk7cmV0dXJuIHQuZ2V0QXJyYXlCdWZmZXIobik7Y2FzZVwiU1wiOm49dC5nZXRVaW50MzIoKTtyZXR1cm4gdC5nZXRTdHJpbmcobik7Y2FzZVwiWVwiOnJldHVybiB0LmdldEludDE2KCk7Y2FzZVwiYlwiOmNhc2VcImNcIjpjYXNlXCJkXCI6Y2FzZVwiZlwiOmNhc2VcImlcIjpjYXNlXCJsXCI6dmFyIHI9dC5nZXRVaW50MzIoKSxpPXQuZ2V0VWludDMyKCksbz10LmdldFVpbnQzMigpO2lmKDA9PT1pKXN3aXRjaChlKXtjYXNlXCJiXCI6Y2FzZVwiY1wiOnJldHVybiB0LmdldEJvb2xlYW5BcnJheShyKTtjYXNlXCJkXCI6cmV0dXJuIHQuZ2V0RmxvYXQ2NEFycmF5KHIpO2Nhc2VcImZcIjpyZXR1cm4gdC5nZXRGbG9hdDMyQXJyYXkocik7Y2FzZVwiaVwiOnJldHVybiB0LmdldEludDMyQXJyYXkocik7Y2FzZVwibFwiOnJldHVybiB0LmdldEludDY0QXJyYXkocil9dm9pZCAwPT09RyYmY29uc29sZS5lcnJvcihcIlRIUkVFLkZCWExvYWRlcjogRXh0ZXJuYWwgbGlicmFyeSBJbmZsYXRlLm1pbi5qcyByZXF1aXJlZCwgb2J0YWluIG9yIGltcG9ydCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9pbWF5YS96bGliLmpzXCIpO3ZhciBhPW5ldyB1KG5ldyBHKG5ldyBVaW50OEFycmF5KHQuZ2V0QXJyYXlCdWZmZXIobykpKS5kZWNvbXByZXNzKCkuYnVmZmVyKTtzd2l0Y2goZSl7Y2FzZVwiYlwiOmNhc2VcImNcIjpyZXR1cm4gYS5nZXRCb29sZWFuQXJyYXkocik7Y2FzZVwiZFwiOnJldHVybiBhLmdldEZsb2F0NjRBcnJheShyKTtjYXNlXCJmXCI6cmV0dXJuIGEuZ2V0RmxvYXQzMkFycmF5KHIpO2Nhc2VcImlcIjpyZXR1cm4gYS5nZXRJbnQzMkFycmF5KHIpO2Nhc2VcImxcIjpyZXR1cm4gYS5nZXRJbnQ2NEFycmF5KHIpfWRlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKFwiVEhSRUUuRkJYTG9hZGVyOiBVbmtub3duIHByb3BlcnR5IHR5cGUgXCIrZSl9fX0sdS5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOnUsZ2V0T2Zmc2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub2Zmc2V0fSxzaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZHYuYnVmZmVyLmJ5dGVMZW5ndGh9LHNraXA6ZnVuY3Rpb24odCl7dGhpcy5vZmZzZXQrPXR9LGdldEJvb2xlYW46ZnVuY3Rpb24oKXtyZXR1cm4gMT09KDEmdGhpcy5nZXRVaW50OCgpKX0sZ2V0Qm9vbGVhbkFycmF5OmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXSxuPTA7bjx0O24rKyllLnB1c2godGhpcy5nZXRCb29sZWFuKCkpO3JldHVybiBlfSxnZXRVaW50ODpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZHYuZ2V0VWludDgodGhpcy5vZmZzZXQpO3JldHVybiB0aGlzLm9mZnNldCs9MSx0fSxnZXRJbnQxNjpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZHYuZ2V0SW50MTYodGhpcy5vZmZzZXQsdGhpcy5saXR0bGVFbmRpYW4pO3JldHVybiB0aGlzLm9mZnNldCs9Mix0fSxnZXRJbnQzMjpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZHYuZ2V0SW50MzIodGhpcy5vZmZzZXQsdGhpcy5saXR0bGVFbmRpYW4pO3JldHVybiB0aGlzLm9mZnNldCs9NCx0fSxnZXRJbnQzMkFycmF5OmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXSxuPTA7bjx0O24rKyllLnB1c2godGhpcy5nZXRJbnQzMigpKTtyZXR1cm4gZX0sZ2V0VWludDMyOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5kdi5nZXRVaW50MzIodGhpcy5vZmZzZXQsdGhpcy5saXR0bGVFbmRpYW4pO3JldHVybiB0aGlzLm9mZnNldCs9NCx0fSxnZXRJbnQ2NDpmdW5jdGlvbigpe3ZhciB0LGU7cmV0dXJuIHRoaXMubGl0dGxlRW5kaWFuPyh0PXRoaXMuZ2V0VWludDMyKCksZT10aGlzLmdldFVpbnQzMigpKTooZT10aGlzLmdldFVpbnQzMigpLHQ9dGhpcy5nZXRVaW50MzIoKSksMjE0NzQ4MzY0OCZlPyhlPTQyOTQ5NjcyOTUmfmUsNDI5NDk2NzI5NT09PSh0PTQyOTQ5NjcyOTUmfnQpJiYoZT1lKzEmNDI5NDk2NzI5NSksLSg0Mjk0OTY3Mjk2KmUrKHQ9dCsxJjQyOTQ5NjcyOTUpKSk6NDI5NDk2NzI5NiplK3R9LGdldEludDY0QXJyYXk6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPVtdLG49MDtuPHQ7bisrKWUucHVzaCh0aGlzLmdldEludDY0KCkpO3JldHVybiBlfSxnZXRVaW50NjQ6ZnVuY3Rpb24oKXt2YXIgdCxlO3JldHVybiB0aGlzLmxpdHRsZUVuZGlhbj8odD10aGlzLmdldFVpbnQzMigpLGU9dGhpcy5nZXRVaW50MzIoKSk6KGU9dGhpcy5nZXRVaW50MzIoKSx0PXRoaXMuZ2V0VWludDMyKCkpLDQyOTQ5NjcyOTYqZSt0fSxnZXRGbG9hdDMyOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5kdi5nZXRGbG9hdDMyKHRoaXMub2Zmc2V0LHRoaXMubGl0dGxlRW5kaWFuKTtyZXR1cm4gdGhpcy5vZmZzZXQrPTQsdH0sZ2V0RmxvYXQzMkFycmF5OmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXSxuPTA7bjx0O24rKyllLnB1c2godGhpcy5nZXRGbG9hdDMyKCkpO3JldHVybiBlfSxnZXRGbG9hdDY0OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5kdi5nZXRGbG9hdDY0KHRoaXMub2Zmc2V0LHRoaXMubGl0dGxlRW5kaWFuKTtyZXR1cm4gdGhpcy5vZmZzZXQrPTgsdH0sZ2V0RmxvYXQ2NEFycmF5OmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXSxuPTA7bjx0O24rKyllLnB1c2godGhpcy5nZXRGbG9hdDY0KCkpO3JldHVybiBlfSxnZXRBcnJheUJ1ZmZlcjpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmR2LmJ1ZmZlci5zbGljZSh0aGlzLm9mZnNldCx0aGlzLm9mZnNldCt0KTtyZXR1cm4gdGhpcy5vZmZzZXQrPXQsZX0sZ2V0U3RyaW5nOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXSxuPTA7bjx0O24rKyllW25dPXRoaXMuZ2V0VWludDgoKTt2YXIgaT1lLmluZGV4T2YoMCk7cmV0dXJuIGk+PTAmJihlPWUuc2xpY2UoMCxpKSksci5Mb2FkZXJVdGlscy5kZWNvZGVUZXh0KG5ldyBVaW50OEFycmF5KGUpKX19LGgucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpoLGFkZDpmdW5jdGlvbih0LGUpe3RoaXNbdF09ZX19O3ZhciBmPVtdO2Z1bmN0aW9uIG0odCxlLG4scil7dmFyIGk7c3dpdGNoKHIubWFwcGluZ1R5cGUpe2Nhc2VcIkJ5UG9seWdvblZlcnRleFwiOmk9dDticmVhaztjYXNlXCJCeVBvbHlnb25cIjppPWU7YnJlYWs7Y2FzZVwiQnlWZXJ0aWNlXCI6aT1uO2JyZWFrO2Nhc2VcIkFsbFNhbWVcIjppPXIuaW5kaWNlc1swXTticmVhaztkZWZhdWx0OmNvbnNvbGUud2FybihcIlRIUkVFLkZCWExvYWRlcjogdW5rbm93biBhdHRyaWJ1dGUgbWFwcGluZyB0eXBlIFwiK3IubWFwcGluZ1R5cGUpfVwiSW5kZXhUb0RpcmVjdFwiPT09ci5yZWZlcmVuY2VUeXBlJiYoaT1yLmluZGljZXNbaV0pO3ZhciBvPWkqci5kYXRhU2l6ZSxhPW8rci5kYXRhU2l6ZTtyZXR1cm4gZnVuY3Rpb24odCxlLG4scil7Zm9yKHZhciBpPW4sbz0wO2k8cjtpKyssbysrKXRbb109ZVtpXTtyZXR1cm4gdH0oZixyLmJ1ZmZlcixvLGEpfXZhciBnPW5ldyByLkV1bGVyLHY9bmV3IHIuVmVjdG9yMztmdW5jdGlvbiB5KHQpe3ZhciBlLG49bmV3IHIuTWF0cml4NCxpPW5ldyByLk1hdHJpeDQsbz1uZXcgci5NYXRyaXg0LGE9bmV3IHIuTWF0cml4NCxzPW5ldyByLk1hdHJpeDQsYz1uZXcgci5NYXRyaXg0LGw9bmV3IHIuTWF0cml4NCx1PW5ldyByLk1hdHJpeDQsaD1uZXcgci5NYXRyaXg0LGQ9bmV3IHIuTWF0cml4NCxwPW5ldyByLk1hdHJpeDQsZj10LmluaGVyaXRUeXBlP3QuaW5oZXJpdFR5cGU6MDsodC50cmFuc2xhdGlvbiYmbi5zZXRQb3NpdGlvbih2LmZyb21BcnJheSh0LnRyYW5zbGF0aW9uKSksdC5wcmVSb3RhdGlvbikmJigoZT10LnByZVJvdGF0aW9uLm1hcChyLk1hdGhVdGlscy5kZWdUb1JhZCkpLnB1c2godC5ldWxlck9yZGVyKSxpLm1ha2VSb3RhdGlvbkZyb21FdWxlcihnLmZyb21BcnJheShlKSkpO3Qucm90YXRpb24mJigoZT10LnJvdGF0aW9uLm1hcChyLk1hdGhVdGlscy5kZWdUb1JhZCkpLnB1c2godC5ldWxlck9yZGVyKSxvLm1ha2VSb3RhdGlvbkZyb21FdWxlcihnLmZyb21BcnJheShlKSkpO3QucG9zdFJvdGF0aW9uJiYoKGU9dC5wb3N0Um90YXRpb24ubWFwKHIuTWF0aFV0aWxzLmRlZ1RvUmFkKSkucHVzaCh0LmV1bGVyT3JkZXIpLGEubWFrZVJvdGF0aW9uRnJvbUV1bGVyKGcuZnJvbUFycmF5KGUpKSk7dC5zY2FsZSYmcy5zY2FsZSh2LmZyb21BcnJheSh0LnNjYWxlKSksdC5zY2FsaW5nT2Zmc2V0JiZsLnNldFBvc2l0aW9uKHYuZnJvbUFycmF5KHQuc2NhbGluZ09mZnNldCkpLHQuc2NhbGluZ1Bpdm90JiZjLnNldFBvc2l0aW9uKHYuZnJvbUFycmF5KHQuc2NhbGluZ1Bpdm90KSksdC5yb3RhdGlvbk9mZnNldCYmdS5zZXRQb3NpdGlvbih2LmZyb21BcnJheSh0LnJvdGF0aW9uT2Zmc2V0KSksdC5yb3RhdGlvblBpdm90JiZoLnNldFBvc2l0aW9uKHYuZnJvbUFycmF5KHQucm90YXRpb25QaXZvdCkpLHQucGFyZW50TWF0cml4V29ybGQmJihkPXQucGFyZW50TWF0cml4V29ybGQpO3ZhciBtPWkubXVsdGlwbHkobykubXVsdGlwbHkoYSkseT1uZXcgci5NYXRyaXg0O2QuZXh0cmFjdFJvdGF0aW9uKHkpLChuZXcgci5NYXRyaXg0KS5jb3B5UG9zaXRpb24oZCk7dmFyIHg9bmV3IHIuTWF0cml4NDt4LmNvcHkoeSkuaW52ZXJ0KCkubXVsdGlwbHkoZCk7dmFyIGI9bmV3IHIuTWF0cml4NDtpZigwPT09ZiliLmNvcHkoeSkubXVsdGlwbHkobSkubXVsdGlwbHkoeCkubXVsdGlwbHkocyk7ZWxzZSBpZigxPT09ZiliLmNvcHkoeSkubXVsdGlwbHkoeCkubXVsdGlwbHkobSkubXVsdGlwbHkocyk7ZWxzZXt2YXIgdz1uZXcgci5NYXRyaXg0O3cuY29weShzKS5pbnZlcnQoKTt2YXIgXz0obmV3IHIuTWF0cml4NCkubXVsdGlwbHkoeCkubXVsdGlwbHkodyk7Yi5jb3B5KHkpLm11bHRpcGx5KG0pLm11bHRpcGx5KF8pLm11bHRpcGx5KHMpfXZhciBNPW5ldyByLk1hdHJpeDQ7TS5jb3B5KGgpLmludmVydCgpO3ZhciBTPW5ldyByLk1hdHJpeDQ7Uy5jb3B5KGMpLmludmVydCgpO3ZhciBUPW5ldyByLk1hdHJpeDQ7VC5jb3B5KG4pLm11bHRpcGx5KHUpLm11bHRpcGx5KGgpLm11bHRpcGx5KGkpLm11bHRpcGx5KG8pLm11bHRpcGx5KGEpLm11bHRpcGx5KE0pLm11bHRpcGx5KGwpLm11bHRpcGx5KGMpLm11bHRpcGx5KHMpLm11bHRpcGx5KFMpO3ZhciBFPShuZXcgci5NYXRyaXg0KS5jb3B5UG9zaXRpb24oVCksQT0obmV3IHIuTWF0cml4NCkuY29weShkKS5tdWx0aXBseShFKTtyZXR1cm4gcC5jb3B5UG9zaXRpb24oQSksVD0obmV3IHIuTWF0cml4NCkubXVsdGlwbHkocCkubXVsdGlwbHkoYil9ZnVuY3Rpb24geCh0KXt2YXIgZT1bXCJaWVhcIixcIllaWFwiLFwiWFpZXCIsXCJaWFlcIixcIllYWlwiLFwiWFlaXCJdO3JldHVybiA2PT09KHQ9dHx8MCk/KGNvbnNvbGUud2FybihcIlRIUkVFLkZCWExvYWRlcjogdW5zdXBwb3J0ZWQgRXVsZXIgT3JkZXI6IFNwaGVyaWNhbCBYWVouIEFuaW1hdGlvbnMgYW5kIHJvdGF0aW9ucyBtYXkgYmUgaW5jb3JyZWN0LlwiKSxlWzBdKTplW3RdfWZ1bmN0aW9uIGIodCl7cmV0dXJuIHQuc3BsaXQoXCIsXCIpLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIHBhcnNlRmxvYXQodCl9KSl9ZnVuY3Rpb24gdyh0LGUsbil7cmV0dXJuIHZvaWQgMD09PWUmJihlPTApLHZvaWQgMD09PW4mJihuPXQuYnl0ZUxlbmd0aCksci5Mb2FkZXJVdGlscy5kZWNvZGVUZXh0KG5ldyBVaW50OEFycmF5KHQsZSxuKSl9ZnVuY3Rpb24gXyh0LGUsbil7cmV0dXJuIHQuc2xpY2UoMCxlKS5jb25jYXQobikuY29uY2F0KHQuc2xpY2UoZSkpfXJldHVybiBpfSgpfSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7bi5yKGUpLG4uZChlLFwiV2F0ZXJcIiwoZnVuY3Rpb24oKXtyZXR1cm4gYX0pKTt2YXIgcj1uKDApLGk9ZnVuY3Rpb24odCxlKXtyLk1lc2guY2FsbCh0aGlzLHQpLHRoaXMudHlwZT1cIlJlZmxlY3RvclwiO3ZhciBuPXRoaXMsbz12b2lkIDAhPT0oZT1lfHx7fSkuY29sb3I/bmV3IHIuQ29sb3IoZS5jb2xvcik6bmV3IHIuQ29sb3IoODM1NTcxMSksYT1lLnRleHR1cmVXaWR0aHx8NTEyLHM9ZS50ZXh0dXJlSGVpZ2h0fHw1MTIsYz1lLmNsaXBCaWFzfHwwLGw9ZS5zaGFkZXJ8fGkuUmVmbGVjdG9yU2hhZGVyLHU9bmV3IHIuUGxhbmUsaD1uZXcgci5WZWN0b3IzLGQ9bmV3IHIuVmVjdG9yMyxwPW5ldyByLlZlY3RvcjMsZj1uZXcgci5NYXRyaXg0LG09bmV3IHIuVmVjdG9yMygwLDAsLTEpLGc9bmV3IHIuVmVjdG9yNCx2PW5ldyByLlZlY3RvcjMseT1uZXcgci5WZWN0b3IzLHg9bmV3IHIuVmVjdG9yNCxiPW5ldyByLk1hdHJpeDQsdz1uZXcgci5QZXJzcGVjdGl2ZUNhbWVyYSxfPXttaW5GaWx0ZXI6ci5MaW5lYXJGaWx0ZXIsbWFnRmlsdGVyOnIuTGluZWFyRmlsdGVyLGZvcm1hdDpyLlJHQkZvcm1hdH0sTT1uZXcgci5XZWJHTFJlbmRlclRhcmdldChhLHMsXyk7ci5NYXRoVXRpbHMuaXNQb3dlck9mVHdvKGEpJiZyLk1hdGhVdGlscy5pc1Bvd2VyT2ZUd28ocyl8fChNLnRleHR1cmUuZ2VuZXJhdGVNaXBtYXBzPSExKTt2YXIgUz1uZXcgci5TaGFkZXJNYXRlcmlhbCh7dW5pZm9ybXM6ci5Vbmlmb3Jtc1V0aWxzLmNsb25lKGwudW5pZm9ybXMpLGZyYWdtZW50U2hhZGVyOmwuZnJhZ21lbnRTaGFkZXIsdmVydGV4U2hhZGVyOmwudmVydGV4U2hhZGVyfSk7Uy51bmlmb3Jtcy50RGlmZnVzZS52YWx1ZT1NLnRleHR1cmUsUy51bmlmb3Jtcy5jb2xvci52YWx1ZT1vLFMudW5pZm9ybXMudGV4dHVyZU1hdHJpeC52YWx1ZT1iLHRoaXMubWF0ZXJpYWw9Uyx0aGlzLm9uQmVmb3JlUmVuZGVyPWZ1bmN0aW9uKHQsZSxyKXtpZihkLnNldEZyb21NYXRyaXhQb3NpdGlvbihuLm1hdHJpeFdvcmxkKSxwLnNldEZyb21NYXRyaXhQb3NpdGlvbihyLm1hdHJpeFdvcmxkKSxmLmV4dHJhY3RSb3RhdGlvbihuLm1hdHJpeFdvcmxkKSxoLnNldCgwLDAsMSksaC5hcHBseU1hdHJpeDQoZiksdi5zdWJWZWN0b3JzKGQscCksISh2LmRvdChoKT4wKSl7di5yZWZsZWN0KGgpLm5lZ2F0ZSgpLHYuYWRkKGQpLGYuZXh0cmFjdFJvdGF0aW9uKHIubWF0cml4V29ybGQpLG0uc2V0KDAsMCwtMSksbS5hcHBseU1hdHJpeDQoZiksbS5hZGQocCkseS5zdWJWZWN0b3JzKGQsbSkseS5yZWZsZWN0KGgpLm5lZ2F0ZSgpLHkuYWRkKGQpLHcucG9zaXRpb24uY29weSh2KSx3LnVwLnNldCgwLDEsMCksdy51cC5hcHBseU1hdHJpeDQoZiksdy51cC5yZWZsZWN0KGgpLHcubG9va0F0KHkpLHcuZmFyPXIuZmFyLHcudXBkYXRlTWF0cml4V29ybGQoKSx3LnByb2plY3Rpb25NYXRyaXguY29weShyLnByb2plY3Rpb25NYXRyaXgpLGIuc2V0KC41LDAsMCwuNSwwLC41LDAsLjUsMCwwLC41LC41LDAsMCwwLDEpLGIubXVsdGlwbHkody5wcm9qZWN0aW9uTWF0cml4KSxiLm11bHRpcGx5KHcubWF0cml4V29ybGRJbnZlcnNlKSxiLm11bHRpcGx5KG4ubWF0cml4V29ybGQpLHUuc2V0RnJvbU5vcm1hbEFuZENvcGxhbmFyUG9pbnQoaCxkKSx1LmFwcGx5TWF0cml4NCh3Lm1hdHJpeFdvcmxkSW52ZXJzZSksZy5zZXQodS5ub3JtYWwueCx1Lm5vcm1hbC55LHUubm9ybWFsLnosdS5jb25zdGFudCk7dmFyIGk9dy5wcm9qZWN0aW9uTWF0cml4O3gueD0oTWF0aC5zaWduKGcueCkraS5lbGVtZW50c1s4XSkvaS5lbGVtZW50c1swXSx4Lnk9KE1hdGguc2lnbihnLnkpK2kuZWxlbWVudHNbOV0pL2kuZWxlbWVudHNbNV0seC56PS0xLHgudz0oMStpLmVsZW1lbnRzWzEwXSkvaS5lbGVtZW50c1sxNF0sZy5tdWx0aXBseVNjYWxhcigyL2cuZG90KHgpKSxpLmVsZW1lbnRzWzJdPWcueCxpLmVsZW1lbnRzWzZdPWcueSxpLmVsZW1lbnRzWzEwXT1nLnorMS1jLGkuZWxlbWVudHNbMTRdPWcudyxNLnRleHR1cmUuZW5jb2Rpbmc9dC5vdXRwdXRFbmNvZGluZyxuLnZpc2libGU9ITE7dmFyIG89dC5nZXRSZW5kZXJUYXJnZXQoKSxhPXQueHIuZW5hYmxlZCxzPXQuc2hhZG93TWFwLmF1dG9VcGRhdGU7dC54ci5lbmFibGVkPSExLHQuc2hhZG93TWFwLmF1dG9VcGRhdGU9ITEsdC5zZXRSZW5kZXJUYXJnZXQoTSksdC5zdGF0ZS5idWZmZXJzLmRlcHRoLnNldE1hc2soITApLCExPT09dC5hdXRvQ2xlYXImJnQuY2xlYXIoKSx0LnJlbmRlcihlLHcpLHQueHIuZW5hYmxlZD1hLHQuc2hhZG93TWFwLmF1dG9VcGRhdGU9cyx0LnNldFJlbmRlclRhcmdldChvKTt2YXIgbD1yLnZpZXdwb3J0O3ZvaWQgMCE9PWwmJnQuc3RhdGUudmlld3BvcnQobCksbi52aXNpYmxlPSEwfX0sdGhpcy5nZXRSZW5kZXJUYXJnZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gTX19O2kucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoci5NZXNoLnByb3RvdHlwZSksaS5wcm90b3R5cGUuY29uc3RydWN0b3I9aSxpLlJlZmxlY3RvclNoYWRlcj17dW5pZm9ybXM6e2NvbG9yOnt2YWx1ZTpudWxsfSx0RGlmZnVzZTp7dmFsdWU6bnVsbH0sdGV4dHVyZU1hdHJpeDp7dmFsdWU6bnVsbH19LHZlcnRleFNoYWRlcjpbXCJ1bmlmb3JtIG1hdDQgdGV4dHVyZU1hdHJpeDtcIixcInZhcnlpbmcgdmVjNCB2VXY7XCIsXCJ2b2lkIG1haW4oKSB7XCIsXCJcXHR2VXYgPSB0ZXh0dXJlTWF0cml4ICogdmVjNCggcG9zaXRpb24sIDEuMCApO1wiLFwiXFx0Z2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogbW9kZWxWaWV3TWF0cml4ICogdmVjNCggcG9zaXRpb24sIDEuMCApO1wiLFwifVwiXS5qb2luKFwiXFxuXCIpLGZyYWdtZW50U2hhZGVyOltcInVuaWZvcm0gdmVjMyBjb2xvcjtcIixcInVuaWZvcm0gc2FtcGxlcjJEIHREaWZmdXNlO1wiLFwidmFyeWluZyB2ZWM0IHZVdjtcIixcImZsb2F0IGJsZW5kT3ZlcmxheSggZmxvYXQgYmFzZSwgZmxvYXQgYmxlbmQgKSB7XCIsXCJcXHRyZXR1cm4oIGJhc2UgPCAwLjUgPyAoIDIuMCAqIGJhc2UgKiBibGVuZCApIDogKCAxLjAgLSAyLjAgKiAoIDEuMCAtIGJhc2UgKSAqICggMS4wIC0gYmxlbmQgKSApICk7XCIsXCJ9XCIsXCJ2ZWMzIGJsZW5kT3ZlcmxheSggdmVjMyBiYXNlLCB2ZWMzIGJsZW5kICkge1wiLFwiXFx0cmV0dXJuIHZlYzMoIGJsZW5kT3ZlcmxheSggYmFzZS5yLCBibGVuZC5yICksIGJsZW5kT3ZlcmxheSggYmFzZS5nLCBibGVuZC5nICksIGJsZW5kT3ZlcmxheSggYmFzZS5iLCBibGVuZC5iICkgKTtcIixcIn1cIixcInZvaWQgbWFpbigpIHtcIixcIlxcdHZlYzQgYmFzZSA9IHRleHR1cmUyRFByb2ooIHREaWZmdXNlLCB2VXYgKTtcIixcIlxcdGdsX0ZyYWdDb2xvciA9IHZlYzQoIGJsZW5kT3ZlcmxheSggYmFzZS5yZ2IsIGNvbG9yICksIDEuMCApO1wiLFwifVwiXS5qb2luKFwiXFxuXCIpfTt2YXIgbz1mdW5jdGlvbih0LGUpe3IuTWVzaC5jYWxsKHRoaXMsdCksdGhpcy50eXBlPVwiUmVmcmFjdG9yXCI7dmFyIG49dGhpcyxpPXZvaWQgMCE9PShlPWV8fHt9KS5jb2xvcj9uZXcgci5Db2xvcihlLmNvbG9yKTpuZXcgci5Db2xvcig4MzU1NzExKSxhPWUudGV4dHVyZVdpZHRofHw1MTIscz1lLnRleHR1cmVIZWlnaHR8fDUxMixjPWUuY2xpcEJpYXN8fDAsbD1lLnNoYWRlcnx8by5SZWZyYWN0b3JTaGFkZXIsdT1uZXcgci5QZXJzcGVjdGl2ZUNhbWVyYTt1Lm1hdHJpeEF1dG9VcGRhdGU9ITEsdS51c2VyRGF0YS5yZWZyYWN0b3I9ITA7dmFyIGg9bmV3IHIuUGxhbmUsZD1uZXcgci5NYXRyaXg0LHA9e21pbkZpbHRlcjpyLkxpbmVhckZpbHRlcixtYWdGaWx0ZXI6ci5MaW5lYXJGaWx0ZXIsZm9ybWF0OnIuUkdCRm9ybWF0fSxmPW5ldyByLldlYkdMUmVuZGVyVGFyZ2V0KGEscyxwKTtyLk1hdGhVdGlscy5pc1Bvd2VyT2ZUd28oYSkmJnIuTWF0aFV0aWxzLmlzUG93ZXJPZlR3byhzKXx8KGYudGV4dHVyZS5nZW5lcmF0ZU1pcG1hcHM9ITEpLHRoaXMubWF0ZXJpYWw9bmV3IHIuU2hhZGVyTWF0ZXJpYWwoe3VuaWZvcm1zOnIuVW5pZm9ybXNVdGlscy5jbG9uZShsLnVuaWZvcm1zKSx2ZXJ0ZXhTaGFkZXI6bC52ZXJ0ZXhTaGFkZXIsZnJhZ21lbnRTaGFkZXI6bC5mcmFnbWVudFNoYWRlcix0cmFuc3BhcmVudDohMH0pLHRoaXMubWF0ZXJpYWwudW5pZm9ybXMuY29sb3IudmFsdWU9aSx0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLnREaWZmdXNlLnZhbHVlPWYudGV4dHVyZSx0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLnRleHR1cmVNYXRyaXgudmFsdWU9ZDt2YXIgbSxnLHYseSx4LGIsdyxfLE09KG09bmV3IHIuVmVjdG9yMyxnPW5ldyByLlZlY3RvcjMsdj1uZXcgci5NYXRyaXg0LHk9bmV3IHIuVmVjdG9yMyx4PW5ldyByLlZlY3RvcjMsZnVuY3Rpb24odCl7cmV0dXJuIG0uc2V0RnJvbU1hdHJpeFBvc2l0aW9uKG4ubWF0cml4V29ybGQpLGcuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKHQubWF0cml4V29ybGQpLHkuc3ViVmVjdG9ycyhtLGcpLHYuZXh0cmFjdFJvdGF0aW9uKG4ubWF0cml4V29ybGQpLHguc2V0KDAsMCwxKSx4LmFwcGx5TWF0cml4NCh2KSx5LmRvdCh4KTwwfSksUz1mdW5jdGlvbigpe3ZhciB0PW5ldyByLlZlY3RvcjMsZT1uZXcgci5WZWN0b3IzLGk9bmV3IHIuUXVhdGVybmlvbixvPW5ldyByLlZlY3RvcjM7cmV0dXJuIGZ1bmN0aW9uKCl7bi5tYXRyaXhXb3JsZC5kZWNvbXBvc2UoZSxpLG8pLHQuc2V0KDAsMCwxKS5hcHBseVF1YXRlcm5pb24oaSkubm9ybWFsaXplKCksdC5uZWdhdGUoKSxoLnNldEZyb21Ob3JtYWxBbmRDb3BsYW5hclBvaW50KHQsZSl9fSgpLFQ9KGI9bmV3IHIuUGxhbmUsdz1uZXcgci5WZWN0b3I0LF89bmV3IHIuVmVjdG9yNCxmdW5jdGlvbih0KXt1Lm1hdHJpeFdvcmxkLmNvcHkodC5tYXRyaXhXb3JsZCksdS5tYXRyaXhXb3JsZEludmVyc2UuY29weSh1Lm1hdHJpeFdvcmxkKS5pbnZlcnQoKSx1LnByb2plY3Rpb25NYXRyaXguY29weSh0LnByb2plY3Rpb25NYXRyaXgpLHUuZmFyPXQuZmFyLGIuY29weShoKSxiLmFwcGx5TWF0cml4NCh1Lm1hdHJpeFdvcmxkSW52ZXJzZSksdy5zZXQoYi5ub3JtYWwueCxiLm5vcm1hbC55LGIubm9ybWFsLnosYi5jb25zdGFudCk7dmFyIGU9dS5wcm9qZWN0aW9uTWF0cml4O18ueD0oTWF0aC5zaWduKHcueCkrZS5lbGVtZW50c1s4XSkvZS5lbGVtZW50c1swXSxfLnk9KE1hdGguc2lnbih3LnkpK2UuZWxlbWVudHNbOV0pL2UuZWxlbWVudHNbNV0sXy56PS0xLF8udz0oMStlLmVsZW1lbnRzWzEwXSkvZS5lbGVtZW50c1sxNF0sdy5tdWx0aXBseVNjYWxhcigyL3cuZG90KF8pKSxlLmVsZW1lbnRzWzJdPXcueCxlLmVsZW1lbnRzWzZdPXcueSxlLmVsZW1lbnRzWzEwXT13LnorMS1jLGUuZWxlbWVudHNbMTRdPXcud30pO3RoaXMub25CZWZvcmVSZW5kZXI9ZnVuY3Rpb24odCxlLHIpe2YudGV4dHVyZS5lbmNvZGluZz10Lm91dHB1dEVuY29kaW5nLCEwIT09ci51c2VyRGF0YS5yZWZyYWN0b3ImJiEwIT0hTShyKSYmKFMoKSxmdW5jdGlvbih0KXtkLnNldCguNSwwLDAsLjUsMCwuNSwwLC41LDAsMCwuNSwuNSwwLDAsMCwxKSxkLm11bHRpcGx5KHQucHJvamVjdGlvbk1hdHJpeCksZC5tdWx0aXBseSh0Lm1hdHJpeFdvcmxkSW52ZXJzZSksZC5tdWx0aXBseShuLm1hdHJpeFdvcmxkKX0ociksVChyKSxmdW5jdGlvbih0LGUscil7bi52aXNpYmxlPSExO3ZhciBpPXQuZ2V0UmVuZGVyVGFyZ2V0KCksbz10LnhyLmVuYWJsZWQsYT10LnNoYWRvd01hcC5hdXRvVXBkYXRlO3QueHIuZW5hYmxlZD0hMSx0LnNoYWRvd01hcC5hdXRvVXBkYXRlPSExLHQuc2V0UmVuZGVyVGFyZ2V0KGYpLCExPT09dC5hdXRvQ2xlYXImJnQuY2xlYXIoKSx0LnJlbmRlcihlLHUpLHQueHIuZW5hYmxlZD1vLHQuc2hhZG93TWFwLmF1dG9VcGRhdGU9YSx0LnNldFJlbmRlclRhcmdldChpKTt2YXIgcz1yLnZpZXdwb3J0O3ZvaWQgMCE9PXMmJnQuc3RhdGUudmlld3BvcnQocyksbi52aXNpYmxlPSEwfSh0LGUscikpfSx0aGlzLmdldFJlbmRlclRhcmdldD1mdW5jdGlvbigpe3JldHVybiBmfX07by5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShyLk1lc2gucHJvdG90eXBlKSxvLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1vLG8uUmVmcmFjdG9yU2hhZGVyPXt1bmlmb3Jtczp7Y29sb3I6e3ZhbHVlOm51bGx9LHREaWZmdXNlOnt2YWx1ZTpudWxsfSx0ZXh0dXJlTWF0cml4Ont2YWx1ZTpudWxsfX0sdmVydGV4U2hhZGVyOltcInVuaWZvcm0gbWF0NCB0ZXh0dXJlTWF0cml4O1wiLFwidmFyeWluZyB2ZWM0IHZVdjtcIixcInZvaWQgbWFpbigpIHtcIixcIlxcdHZVdiA9IHRleHR1cmVNYXRyaXggKiB2ZWM0KCBwb3NpdGlvbiwgMS4wICk7XCIsXCJcXHRnbF9Qb3NpdGlvbiA9IHByb2plY3Rpb25NYXRyaXggKiBtb2RlbFZpZXdNYXRyaXggKiB2ZWM0KCBwb3NpdGlvbiwgMS4wICk7XCIsXCJ9XCJdLmpvaW4oXCJcXG5cIiksZnJhZ21lbnRTaGFkZXI6W1widW5pZm9ybSB2ZWMzIGNvbG9yO1wiLFwidW5pZm9ybSBzYW1wbGVyMkQgdERpZmZ1c2U7XCIsXCJ2YXJ5aW5nIHZlYzQgdlV2O1wiLFwiZmxvYXQgYmxlbmRPdmVybGF5KCBmbG9hdCBiYXNlLCBmbG9hdCBibGVuZCApIHtcIixcIlxcdHJldHVybiggYmFzZSA8IDAuNSA/ICggMi4wICogYmFzZSAqIGJsZW5kICkgOiAoIDEuMCAtIDIuMCAqICggMS4wIC0gYmFzZSApICogKCAxLjAgLSBibGVuZCApICkgKTtcIixcIn1cIixcInZlYzMgYmxlbmRPdmVybGF5KCB2ZWMzIGJhc2UsIHZlYzMgYmxlbmQgKSB7XCIsXCJcXHRyZXR1cm4gdmVjMyggYmxlbmRPdmVybGF5KCBiYXNlLnIsIGJsZW5kLnIgKSwgYmxlbmRPdmVybGF5KCBiYXNlLmcsIGJsZW5kLmcgKSwgYmxlbmRPdmVybGF5KCBiYXNlLmIsIGJsZW5kLmIgKSApO1wiLFwifVwiLFwidm9pZCBtYWluKCkge1wiLFwiXFx0dmVjNCBiYXNlID0gdGV4dHVyZTJEUHJvaiggdERpZmZ1c2UsIHZVdiApO1wiLFwiXFx0Z2xfRnJhZ0NvbG9yID0gdmVjNCggYmxlbmRPdmVybGF5KCBiYXNlLnJnYiwgY29sb3IgKSwgMS4wICk7XCIsXCJ9XCJdLmpvaW4oXCJcXG5cIil9O3ZhciBhPWZ1bmN0aW9uKHQsZSl7ci5NZXNoLmNhbGwodGhpcyx0KSx0aGlzLnR5cGU9XCJXYXRlclwiO3ZhciBuPXRoaXMscz12b2lkIDAhPT0oZT1lfHx7fSkuY29sb3I/bmV3IHIuQ29sb3IoZS5jb2xvcik6bmV3IHIuQ29sb3IoMTY3NzcyMTUpLGM9ZS50ZXh0dXJlV2lkdGh8fDUxMixsPWUudGV4dHVyZUhlaWdodHx8NTEyLHU9ZS5jbGlwQmlhc3x8MCxoPWUuZmxvd0RpcmVjdGlvbnx8bmV3IHIuVmVjdG9yMigxLDApLGQ9ZS5mbG93U3BlZWR8fC4wMyxwPWUucmVmbGVjdGl2aXR5fHwuMDIsZj1lLnNjYWxlfHwxLG09ZS5zaGFkZXJ8fGEuV2F0ZXJTaGFkZXIsZz12b2lkIDAhPT1lLmVuY29kaW5nP2UuZW5jb2Rpbmc6ci5MaW5lYXJFbmNvZGluZyx2PW5ldyByLlRleHR1cmVMb2FkZXIseT1lLmZsb3dNYXB8fHZvaWQgMCx4PWUubm9ybWFsTWFwMHx8di5sb2FkKFwidGV4dHVyZXMvd2F0ZXIvV2F0ZXJfMV9NX05vcm1hbC5qcGdcIiksYj1lLm5vcm1hbE1hcDF8fHYubG9hZChcInRleHR1cmVzL3dhdGVyL1dhdGVyXzJfTV9Ob3JtYWwuanBnXCIpLHc9bmV3IHIuTWF0cml4NCxfPW5ldyByLkNsb2NrO2lmKHZvaWQgMCE9PWkpaWYodm9pZCAwIT09byl7dmFyIE09bmV3IGkodCx7dGV4dHVyZVdpZHRoOmMsdGV4dHVyZUhlaWdodDpsLGNsaXBCaWFzOnUsZW5jb2Rpbmc6Z30pLFM9bmV3IG8odCx7dGV4dHVyZVdpZHRoOmMsdGV4dHVyZUhlaWdodDpsLGNsaXBCaWFzOnUsZW5jb2Rpbmc6Z30pO00ubWF0cml4QXV0b1VwZGF0ZT0hMSxTLm1hdHJpeEF1dG9VcGRhdGU9ITEsdGhpcy5tYXRlcmlhbD1uZXcgci5TaGFkZXJNYXRlcmlhbCh7dW5pZm9ybXM6ci5Vbmlmb3Jtc1V0aWxzLm1lcmdlKFtyLlVuaWZvcm1zTGliLmZvZyxtLnVuaWZvcm1zXSksdmVydGV4U2hhZGVyOm0udmVydGV4U2hhZGVyLGZyYWdtZW50U2hhZGVyOm0uZnJhZ21lbnRTaGFkZXIsdHJhbnNwYXJlbnQ6ITAsZm9nOiEwfSksdm9pZCAwIT09eT8odGhpcy5tYXRlcmlhbC5kZWZpbmVzLlVTRV9GTE9XTUFQPVwiXCIsdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy50Rmxvd01hcD17dHlwZTpcInRcIix2YWx1ZTp5fSk6dGhpcy5tYXRlcmlhbC51bmlmb3Jtcy5mbG93RGlyZWN0aW9uPXt0eXBlOlwidjJcIix2YWx1ZTpofSx4LndyYXBTPXgud3JhcFQ9ci5SZXBlYXRXcmFwcGluZyxiLndyYXBTPWIud3JhcFQ9ci5SZXBlYXRXcmFwcGluZyx0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLnRSZWZsZWN0aW9uTWFwLnZhbHVlPU0uZ2V0UmVuZGVyVGFyZ2V0KCkudGV4dHVyZSx0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLnRSZWZyYWN0aW9uTWFwLnZhbHVlPVMuZ2V0UmVuZGVyVGFyZ2V0KCkudGV4dHVyZSx0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLnROb3JtYWxNYXAwLnZhbHVlPXgsdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy50Tm9ybWFsTWFwMS52YWx1ZT1iLHRoaXMubWF0ZXJpYWwudW5pZm9ybXMuY29sb3IudmFsdWU9cyx0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLnJlZmxlY3Rpdml0eS52YWx1ZT1wLHRoaXMubWF0ZXJpYWwudW5pZm9ybXMudGV4dHVyZU1hdHJpeC52YWx1ZT13LHRoaXMubWF0ZXJpYWwudW5pZm9ybXMuY29uZmlnLnZhbHVlLng9MCx0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLmNvbmZpZy52YWx1ZS55PS4wNzUsdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy5jb25maWcudmFsdWUuej0uMDc1LHRoaXMubWF0ZXJpYWwudW5pZm9ybXMuY29uZmlnLnZhbHVlLnc9Zix0aGlzLm9uQmVmb3JlUmVuZGVyPWZ1bmN0aW9uKHQsZSxyKXt2YXIgaSxvOyFmdW5jdGlvbih0KXt3LnNldCguNSwwLDAsLjUsMCwuNSwwLC41LDAsMCwuNSwuNSwwLDAsMCwxKSx3Lm11bHRpcGx5KHQucHJvamVjdGlvbk1hdHJpeCksdy5tdWx0aXBseSh0Lm1hdHJpeFdvcmxkSW52ZXJzZSksdy5tdWx0aXBseShuLm1hdHJpeFdvcmxkKX0ociksaT1fLmdldERlbHRhKCksKG89bi5tYXRlcmlhbC51bmlmb3Jtcy5jb25maWcpLnZhbHVlLngrPWQqaSxvLnZhbHVlLnk9by52YWx1ZS54Ky4wNzUsby52YWx1ZS54Pj0uMTU/KG8udmFsdWUueD0wLG8udmFsdWUueT0uMDc1KTpvLnZhbHVlLnk+PS4xNSYmKG8udmFsdWUueT1vLnZhbHVlLnktLjE1KSxuLnZpc2libGU9ITEsTS5tYXRyaXhXb3JsZC5jb3B5KG4ubWF0cml4V29ybGQpLFMubWF0cml4V29ybGQuY29weShuLm1hdHJpeFdvcmxkKSxNLm9uQmVmb3JlUmVuZGVyKHQsZSxyKSxTLm9uQmVmb3JlUmVuZGVyKHQsZSxyKSxuLnZpc2libGU9ITB9fWVsc2UgY29uc29sZS5lcnJvcihcIlRIUkVFLldhdGVyOiBSZXF1aXJlZCBjb21wb25lbnQgUmVmcmFjdG9yIG5vdCBmb3VuZC5cIik7ZWxzZSBjb25zb2xlLmVycm9yKFwiVEhSRUUuV2F0ZXI6IFJlcXVpcmVkIGNvbXBvbmVudCBSZWZsZWN0b3Igbm90IGZvdW5kLlwiKX07YS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShyLk1lc2gucHJvdG90eXBlKSxhLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1hLGEuV2F0ZXJTaGFkZXI9e3VuaWZvcm1zOntjb2xvcjp7dHlwZTpcImNcIix2YWx1ZTpudWxsfSxyZWZsZWN0aXZpdHk6e3R5cGU6XCJmXCIsdmFsdWU6MH0sdFJlZmxlY3Rpb25NYXA6e3R5cGU6XCJ0XCIsdmFsdWU6bnVsbH0sdFJlZnJhY3Rpb25NYXA6e3R5cGU6XCJ0XCIsdmFsdWU6bnVsbH0sdE5vcm1hbE1hcDA6e3R5cGU6XCJ0XCIsdmFsdWU6bnVsbH0sdE5vcm1hbE1hcDE6e3R5cGU6XCJ0XCIsdmFsdWU6bnVsbH0sdGV4dHVyZU1hdHJpeDp7dHlwZTpcIm00XCIsdmFsdWU6bnVsbH0sY29uZmlnOnt0eXBlOlwidjRcIix2YWx1ZTpuZXcgci5WZWN0b3I0fX0sdmVydGV4U2hhZGVyOltcIiNpbmNsdWRlIDxjb21tb24+XCIsXCIjaW5jbHVkZSA8Zm9nX3BhcnNfdmVydGV4PlwiLFwiI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfdmVydGV4PlwiLFwidW5pZm9ybSBtYXQ0IHRleHR1cmVNYXRyaXg7XCIsXCJ2YXJ5aW5nIHZlYzQgdkNvb3JkO1wiLFwidmFyeWluZyB2ZWMyIHZVdjtcIixcInZhcnlpbmcgdmVjMyB2VG9FeWU7XCIsXCJ2b2lkIG1haW4oKSB7XCIsXCJcXHR2VXYgPSB1djtcIixcIlxcdHZDb29yZCA9IHRleHR1cmVNYXRyaXggKiB2ZWM0KCBwb3NpdGlvbiwgMS4wICk7XCIsXCJcXHR2ZWM0IHdvcmxkUG9zaXRpb24gPSBtb2RlbE1hdHJpeCAqIHZlYzQoIHBvc2l0aW9uLCAxLjAgKTtcIixcIlxcdHZUb0V5ZSA9IGNhbWVyYVBvc2l0aW9uIC0gd29ybGRQb3NpdGlvbi54eXo7XCIsXCJcXHR2ZWM0IG12UG9zaXRpb24gPSAgdmlld01hdHJpeCAqIHdvcmxkUG9zaXRpb247XCIsXCJcXHRnbF9Qb3NpdGlvbiA9IHByb2plY3Rpb25NYXRyaXggKiBtdlBvc2l0aW9uO1wiLFwiXFx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3ZlcnRleD5cIixcIlxcdCNpbmNsdWRlIDxmb2dfdmVydGV4PlwiLFwifVwiXS5qb2luKFwiXFxuXCIpLGZyYWdtZW50U2hhZGVyOltcIiNpbmNsdWRlIDxjb21tb24+XCIsXCIjaW5jbHVkZSA8Zm9nX3BhcnNfZnJhZ21lbnQ+XCIsXCIjaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc19mcmFnbWVudD5cIixcInVuaWZvcm0gc2FtcGxlcjJEIHRSZWZsZWN0aW9uTWFwO1wiLFwidW5pZm9ybSBzYW1wbGVyMkQgdFJlZnJhY3Rpb25NYXA7XCIsXCJ1bmlmb3JtIHNhbXBsZXIyRCB0Tm9ybWFsTWFwMDtcIixcInVuaWZvcm0gc2FtcGxlcjJEIHROb3JtYWxNYXAxO1wiLFwiI2lmZGVmIFVTRV9GTE9XTUFQXCIsXCJcXHR1bmlmb3JtIHNhbXBsZXIyRCB0Rmxvd01hcDtcIixcIiNlbHNlXCIsXCJcXHR1bmlmb3JtIHZlYzIgZmxvd0RpcmVjdGlvbjtcIixcIiNlbmRpZlwiLFwidW5pZm9ybSB2ZWMzIGNvbG9yO1wiLFwidW5pZm9ybSBmbG9hdCByZWZsZWN0aXZpdHk7XCIsXCJ1bmlmb3JtIHZlYzQgY29uZmlnO1wiLFwidmFyeWluZyB2ZWM0IHZDb29yZDtcIixcInZhcnlpbmcgdmVjMiB2VXY7XCIsXCJ2YXJ5aW5nIHZlYzMgdlRvRXllO1wiLFwidm9pZCBtYWluKCkge1wiLFwiXFx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX2ZyYWdtZW50PlwiLFwiXFx0ZmxvYXQgZmxvd01hcE9mZnNldDAgPSBjb25maWcueDtcIixcIlxcdGZsb2F0IGZsb3dNYXBPZmZzZXQxID0gY29uZmlnLnk7XCIsXCJcXHRmbG9hdCBoYWxmQ3ljbGUgPSBjb25maWcuejtcIixcIlxcdGZsb2F0IHNjYWxlID0gY29uZmlnLnc7XCIsXCJcXHR2ZWMzIHRvRXllID0gbm9ybWFsaXplKCB2VG9FeWUgKTtcIixcIlxcdHZlYzIgZmxvdztcIixcIlxcdCNpZmRlZiBVU0VfRkxPV01BUFwiLFwiXFx0XFx0ZmxvdyA9IHRleHR1cmUyRCggdEZsb3dNYXAsIHZVdiApLnJnICogMi4wIC0gMS4wO1wiLFwiXFx0I2Vsc2VcIixcIlxcdFxcdGZsb3cgPSBmbG93RGlyZWN0aW9uO1wiLFwiXFx0I2VuZGlmXCIsXCJcXHRmbG93LnggKj0gLSAxLjA7XCIsXCJcXHR2ZWM0IG5vcm1hbENvbG9yMCA9IHRleHR1cmUyRCggdE5vcm1hbE1hcDAsICggdlV2ICogc2NhbGUgKSArIGZsb3cgKiBmbG93TWFwT2Zmc2V0MCApO1wiLFwiXFx0dmVjNCBub3JtYWxDb2xvcjEgPSB0ZXh0dXJlMkQoIHROb3JtYWxNYXAxLCAoIHZVdiAqIHNjYWxlICkgKyBmbG93ICogZmxvd01hcE9mZnNldDEgKTtcIixcIlxcdGZsb2F0IGZsb3dMZXJwID0gYWJzKCBoYWxmQ3ljbGUgLSBmbG93TWFwT2Zmc2V0MCApIC8gaGFsZkN5Y2xlO1wiLFwiXFx0dmVjNCBub3JtYWxDb2xvciA9IG1peCggbm9ybWFsQ29sb3IwLCBub3JtYWxDb2xvcjEsIGZsb3dMZXJwICk7XCIsXCJcXHR2ZWMzIG5vcm1hbCA9IG5vcm1hbGl6ZSggdmVjMyggbm9ybWFsQ29sb3IuciAqIDIuMCAtIDEuMCwgbm9ybWFsQ29sb3IuYiwgIG5vcm1hbENvbG9yLmcgKiAyLjAgLSAxLjAgKSApO1wiLFwiXFx0ZmxvYXQgdGhldGEgPSBtYXgoIGRvdCggdG9FeWUsIG5vcm1hbCApLCAwLjAgKTtcIixcIlxcdGZsb2F0IHJlZmxlY3RhbmNlID0gcmVmbGVjdGl2aXR5ICsgKCAxLjAgLSByZWZsZWN0aXZpdHkgKSAqIHBvdyggKCAxLjAgLSB0aGV0YSApLCA1LjAgKTtcIixcIlxcdHZlYzMgY29vcmQgPSB2Q29vcmQueHl6IC8gdkNvb3JkLnc7XCIsXCJcXHR2ZWMyIHV2ID0gY29vcmQueHkgKyBjb29yZC56ICogbm9ybWFsLnh6ICogMC4wNTtcIixcIlxcdHZlYzQgcmVmbGVjdENvbG9yID0gdGV4dHVyZTJEKCB0UmVmbGVjdGlvbk1hcCwgdmVjMiggMS4wIC0gdXYueCwgdXYueSApICk7XCIsXCJcXHR2ZWM0IHJlZnJhY3RDb2xvciA9IHRleHR1cmUyRCggdFJlZnJhY3Rpb25NYXAsIHV2ICk7XCIsXCJcXHRnbF9GcmFnQ29sb3IgPSB2ZWM0KCBjb2xvciwgMS4wICkgKiBtaXgoIHJlZnJhY3RDb2xvciwgcmVmbGVjdENvbG9yLCByZWZsZWN0YW5jZSApO1wiLFwiXFx0I2luY2x1ZGUgPHRvbmVtYXBwaW5nX2ZyYWdtZW50PlwiLFwiXFx0I2luY2x1ZGUgPGVuY29kaW5nc19mcmFnbWVudD5cIixcIlxcdCNpbmNsdWRlIDxmb2dfZnJhZ21lbnQ+XCIsXCJ9XCJdLmpvaW4oXCJcXG5cIil9fSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7bi5yKGUpLG4uZChlLFwiRWZmZWN0Q29tcG9zZXJcIiwoZnVuY3Rpb24oKXtyZXR1cm4gbH0pKSxuLmQoZSxcIlBhc3NcIiwoZnVuY3Rpb24oKXtyZXR1cm4gcH0pKTt2YXIgcj1uKDApLGk9e3VuaWZvcm1zOnt0RGlmZnVzZTp7dmFsdWU6bnVsbH0sb3BhY2l0eTp7dmFsdWU6MX19LHZlcnRleFNoYWRlcjpbXCJ2YXJ5aW5nIHZlYzIgdlV2O1wiLFwidm9pZCBtYWluKCkge1wiLFwiXFx0dlV2ID0gdXY7XCIsXCJcXHRnbF9Qb3NpdGlvbiA9IHByb2plY3Rpb25NYXRyaXggKiBtb2RlbFZpZXdNYXRyaXggKiB2ZWM0KCBwb3NpdGlvbiwgMS4wICk7XCIsXCJ9XCJdLmpvaW4oXCJcXG5cIiksZnJhZ21lbnRTaGFkZXI6W1widW5pZm9ybSBmbG9hdCBvcGFjaXR5O1wiLFwidW5pZm9ybSBzYW1wbGVyMkQgdERpZmZ1c2U7XCIsXCJ2YXJ5aW5nIHZlYzIgdlV2O1wiLFwidm9pZCBtYWluKCkge1wiLFwiXFx0dmVjNCB0ZXhlbCA9IHRleHR1cmUyRCggdERpZmZ1c2UsIHZVdiApO1wiLFwiXFx0Z2xfRnJhZ0NvbG9yID0gb3BhY2l0eSAqIHRleGVsO1wiLFwifVwiXS5qb2luKFwiXFxuXCIpfSxvPW4oMiksYT1uKDEpLHM9ZnVuY3Rpb24odCxlKXthLmEuY2FsbCh0aGlzKSx0aGlzLnNjZW5lPXQsdGhpcy5jYW1lcmE9ZSx0aGlzLmNsZWFyPSEwLHRoaXMubmVlZHNTd2FwPSExLHRoaXMuaW52ZXJzZT0hMX07cy5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKGEuYS5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpzLHJlbmRlcjpmdW5jdGlvbih0LGUsbil7dmFyIHIsaSxvPXQuZ2V0Q29udGV4dCgpLGE9dC5zdGF0ZTthLmJ1ZmZlcnMuY29sb3Iuc2V0TWFzayghMSksYS5idWZmZXJzLmRlcHRoLnNldE1hc2soITEpLGEuYnVmZmVycy5jb2xvci5zZXRMb2NrZWQoITApLGEuYnVmZmVycy5kZXB0aC5zZXRMb2NrZWQoITApLHRoaXMuaW52ZXJzZT8ocj0wLGk9MSk6KHI9MSxpPTApLGEuYnVmZmVycy5zdGVuY2lsLnNldFRlc3QoITApLGEuYnVmZmVycy5zdGVuY2lsLnNldE9wKG8uUkVQTEFDRSxvLlJFUExBQ0Usby5SRVBMQUNFKSxhLmJ1ZmZlcnMuc3RlbmNpbC5zZXRGdW5jKG8uQUxXQVlTLHIsNDI5NDk2NzI5NSksYS5idWZmZXJzLnN0ZW5jaWwuc2V0Q2xlYXIoaSksYS5idWZmZXJzLnN0ZW5jaWwuc2V0TG9ja2VkKCEwKSx0LnNldFJlbmRlclRhcmdldChuKSx0aGlzLmNsZWFyJiZ0LmNsZWFyKCksdC5yZW5kZXIodGhpcy5zY2VuZSx0aGlzLmNhbWVyYSksdC5zZXRSZW5kZXJUYXJnZXQoZSksdGhpcy5jbGVhciYmdC5jbGVhcigpLHQucmVuZGVyKHRoaXMuc2NlbmUsdGhpcy5jYW1lcmEpLGEuYnVmZmVycy5jb2xvci5zZXRMb2NrZWQoITEpLGEuYnVmZmVycy5kZXB0aC5zZXRMb2NrZWQoITEpLGEuYnVmZmVycy5zdGVuY2lsLnNldExvY2tlZCghMSksYS5idWZmZXJzLnN0ZW5jaWwuc2V0RnVuYyhvLkVRVUFMLDEsNDI5NDk2NzI5NSksYS5idWZmZXJzLnN0ZW5jaWwuc2V0T3Aoby5LRUVQLG8uS0VFUCxvLktFRVApLGEuYnVmZmVycy5zdGVuY2lsLnNldExvY2tlZCghMCl9fSk7dmFyIGM9ZnVuY3Rpb24oKXthLmEuY2FsbCh0aGlzKSx0aGlzLm5lZWRzU3dhcD0hMX07Yy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShhLmEucHJvdG90eXBlKSxPYmplY3QuYXNzaWduKGMucHJvdG90eXBlLHtyZW5kZXI6ZnVuY3Rpb24odCl7dC5zdGF0ZS5idWZmZXJzLnN0ZW5jaWwuc2V0TG9ja2VkKCExKSx0LnN0YXRlLmJ1ZmZlcnMuc3RlbmNpbC5zZXRUZXN0KCExKX19KTt2YXIgbD1mdW5jdGlvbih0LGUpe2lmKHRoaXMucmVuZGVyZXI9dCx2b2lkIDA9PT1lKXt2YXIgbj17bWluRmlsdGVyOnIuTGluZWFyRmlsdGVyLG1hZ0ZpbHRlcjpyLkxpbmVhckZpbHRlcixmb3JtYXQ6ci5SR0JBRm9ybWF0fSxhPXQuZ2V0U2l6ZShuZXcgci5WZWN0b3IyKTt0aGlzLl9waXhlbFJhdGlvPXQuZ2V0UGl4ZWxSYXRpbygpLHRoaXMuX3dpZHRoPWEud2lkdGgsdGhpcy5faGVpZ2h0PWEuaGVpZ2h0LChlPW5ldyByLldlYkdMUmVuZGVyVGFyZ2V0KHRoaXMuX3dpZHRoKnRoaXMuX3BpeGVsUmF0aW8sdGhpcy5faGVpZ2h0KnRoaXMuX3BpeGVsUmF0aW8sbikpLnRleHR1cmUubmFtZT1cIkVmZmVjdENvbXBvc2VyLnJ0MVwifWVsc2UgdGhpcy5fcGl4ZWxSYXRpbz0xLHRoaXMuX3dpZHRoPWUud2lkdGgsdGhpcy5faGVpZ2h0PWUuaGVpZ2h0O3RoaXMucmVuZGVyVGFyZ2V0MT1lLHRoaXMucmVuZGVyVGFyZ2V0Mj1lLmNsb25lKCksdGhpcy5yZW5kZXJUYXJnZXQyLnRleHR1cmUubmFtZT1cIkVmZmVjdENvbXBvc2VyLnJ0MlwiLHRoaXMud3JpdGVCdWZmZXI9dGhpcy5yZW5kZXJUYXJnZXQxLHRoaXMucmVhZEJ1ZmZlcj10aGlzLnJlbmRlclRhcmdldDIsdGhpcy5yZW5kZXJUb1NjcmVlbj0hMCx0aGlzLnBhc3Nlcz1bXSx2b2lkIDA9PT1pJiZjb25zb2xlLmVycm9yKFwiVEhSRUUuRWZmZWN0Q29tcG9zZXIgcmVsaWVzIG9uIENvcHlTaGFkZXJcIiksdm9pZCAwPT09by5TaGFkZXJQYXNzJiZjb25zb2xlLmVycm9yKFwiVEhSRUUuRWZmZWN0Q29tcG9zZXIgcmVsaWVzIG9uIFNoYWRlclBhc3NcIiksdGhpcy5jb3B5UGFzcz1uZXcgby5TaGFkZXJQYXNzKGkpLHRoaXMuY2xvY2s9bmV3IHIuQ2xvY2t9O09iamVjdC5hc3NpZ24obC5wcm90b3R5cGUse3N3YXBCdWZmZXJzOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5yZWFkQnVmZmVyO3RoaXMucmVhZEJ1ZmZlcj10aGlzLndyaXRlQnVmZmVyLHRoaXMud3JpdGVCdWZmZXI9dH0sYWRkUGFzczpmdW5jdGlvbih0KXt0aGlzLnBhc3Nlcy5wdXNoKHQpLHQuc2V0U2l6ZSh0aGlzLl93aWR0aCp0aGlzLl9waXhlbFJhdGlvLHRoaXMuX2hlaWdodCp0aGlzLl9waXhlbFJhdGlvKX0saW5zZXJ0UGFzczpmdW5jdGlvbih0LGUpe3RoaXMucGFzc2VzLnNwbGljZShlLDAsdCksdC5zZXRTaXplKHRoaXMuX3dpZHRoKnRoaXMuX3BpeGVsUmF0aW8sdGhpcy5faGVpZ2h0KnRoaXMuX3BpeGVsUmF0aW8pfSxyZW1vdmVQYXNzOmZ1bmN0aW9uKHQpe2NvbnN0IGU9dGhpcy5wYXNzZXMuaW5kZXhPZih0KTstMSE9PWUmJnRoaXMucGFzc2VzLnNwbGljZShlLDEpfSxpc0xhc3RFbmFibGVkUGFzczpmdW5jdGlvbih0KXtmb3IodmFyIGU9dCsxO2U8dGhpcy5wYXNzZXMubGVuZ3RoO2UrKylpZih0aGlzLnBhc3Nlc1tlXS5lbmFibGVkKXJldHVybiExO3JldHVybiEwfSxyZW5kZXI6ZnVuY3Rpb24odCl7dm9pZCAwPT09dCYmKHQ9dGhpcy5jbG9jay5nZXREZWx0YSgpKTt2YXIgZSxuLHI9dGhpcy5yZW5kZXJlci5nZXRSZW5kZXJUYXJnZXQoKSxpPSExLG89dGhpcy5wYXNzZXMubGVuZ3RoO2ZvcihuPTA7bjxvO24rKylpZighMSE9PShlPXRoaXMucGFzc2VzW25dKS5lbmFibGVkKXtpZihlLnJlbmRlclRvU2NyZWVuPXRoaXMucmVuZGVyVG9TY3JlZW4mJnRoaXMuaXNMYXN0RW5hYmxlZFBhc3MobiksZS5yZW5kZXIodGhpcy5yZW5kZXJlcix0aGlzLndyaXRlQnVmZmVyLHRoaXMucmVhZEJ1ZmZlcix0LGkpLGUubmVlZHNTd2FwKXtpZihpKXt2YXIgYT10aGlzLnJlbmRlcmVyLmdldENvbnRleHQoKSxsPXRoaXMucmVuZGVyZXIuc3RhdGUuYnVmZmVycy5zdGVuY2lsO2wuc2V0RnVuYyhhLk5PVEVRVUFMLDEsNDI5NDk2NzI5NSksdGhpcy5jb3B5UGFzcy5yZW5kZXIodGhpcy5yZW5kZXJlcix0aGlzLndyaXRlQnVmZmVyLHRoaXMucmVhZEJ1ZmZlcix0KSxsLnNldEZ1bmMoYS5FUVVBTCwxLDQyOTQ5NjcyOTUpfXRoaXMuc3dhcEJ1ZmZlcnMoKX12b2lkIDAhPT1zJiYoZSBpbnN0YW5jZW9mIHM/aT0hMDplIGluc3RhbmNlb2YgYyYmKGk9ITEpKX10aGlzLnJlbmRlcmVyLnNldFJlbmRlclRhcmdldChyKX0scmVzZXQ6ZnVuY3Rpb24odCl7aWYodm9pZCAwPT09dCl7dmFyIGU9dGhpcy5yZW5kZXJlci5nZXRTaXplKG5ldyByLlZlY3RvcjIpO3RoaXMuX3BpeGVsUmF0aW89dGhpcy5yZW5kZXJlci5nZXRQaXhlbFJhdGlvKCksdGhpcy5fd2lkdGg9ZS53aWR0aCx0aGlzLl9oZWlnaHQ9ZS5oZWlnaHQsKHQ9dGhpcy5yZW5kZXJUYXJnZXQxLmNsb25lKCkpLnNldFNpemUodGhpcy5fd2lkdGgqdGhpcy5fcGl4ZWxSYXRpbyx0aGlzLl9oZWlnaHQqdGhpcy5fcGl4ZWxSYXRpbyl9dGhpcy5yZW5kZXJUYXJnZXQxLmRpc3Bvc2UoKSx0aGlzLnJlbmRlclRhcmdldDIuZGlzcG9zZSgpLHRoaXMucmVuZGVyVGFyZ2V0MT10LHRoaXMucmVuZGVyVGFyZ2V0Mj10LmNsb25lKCksdGhpcy53cml0ZUJ1ZmZlcj10aGlzLnJlbmRlclRhcmdldDEsdGhpcy5yZWFkQnVmZmVyPXRoaXMucmVuZGVyVGFyZ2V0Mn0sc2V0U2l6ZTpmdW5jdGlvbih0LGUpe3RoaXMuX3dpZHRoPXQsdGhpcy5faGVpZ2h0PWU7dmFyIG49dGhpcy5fd2lkdGgqdGhpcy5fcGl4ZWxSYXRpbyxyPXRoaXMuX2hlaWdodCp0aGlzLl9waXhlbFJhdGlvO3RoaXMucmVuZGVyVGFyZ2V0MS5zZXRTaXplKG4sciksdGhpcy5yZW5kZXJUYXJnZXQyLnNldFNpemUobixyKTtmb3IodmFyIGk9MDtpPHRoaXMucGFzc2VzLmxlbmd0aDtpKyspdGhpcy5wYXNzZXNbaV0uc2V0U2l6ZShuLHIpfSxzZXRQaXhlbFJhdGlvOmZ1bmN0aW9uKHQpe3RoaXMuX3BpeGVsUmF0aW89dCx0aGlzLnNldFNpemUodGhpcy5fd2lkdGgsdGhpcy5faGVpZ2h0KX19KTt2YXIgdSxoLGQscD1mdW5jdGlvbigpe3RoaXMuZW5hYmxlZD0hMCx0aGlzLm5lZWRzU3dhcD0hMCx0aGlzLmNsZWFyPSExLHRoaXMucmVuZGVyVG9TY3JlZW49ITF9O09iamVjdC5hc3NpZ24ocC5wcm90b3R5cGUse3NldFNpemU6ZnVuY3Rpb24oKXt9LHJlbmRlcjpmdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5QYXNzOiAucmVuZGVyKCkgbXVzdCBiZSBpbXBsZW1lbnRlZCBpbiBkZXJpdmVkIHBhc3MuXCIpfX0pLHAuRnVsbFNjcmVlblF1YWQ9KHU9bmV3IHIuT3J0aG9ncmFwaGljQ2FtZXJhKC0xLDEsMSwtMSwwLDEpLGg9bmV3IHIuUGxhbmVCdWZmZXJHZW9tZXRyeSgyLDIpLGQ9ZnVuY3Rpb24odCl7dGhpcy5fbWVzaD1uZXcgci5NZXNoKGgsdCl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShkLnByb3RvdHlwZSxcIm1hdGVyaWFsXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tZXNoLm1hdGVyaWFsfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbWVzaC5tYXRlcmlhbD10fX0pLE9iamVjdC5hc3NpZ24oZC5wcm90b3R5cGUse2Rpc3Bvc2U6ZnVuY3Rpb24oKXt0aGlzLl9tZXNoLmdlb21ldHJ5LmRpc3Bvc2UoKX0scmVuZGVyOmZ1bmN0aW9uKHQpe3QucmVuZGVyKHRoaXMuX21lc2gsdSl9fSksZCl9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtuLnIoZSksbi5kKGUsXCJDb252ZXhHZW9tZXRyeVwiLChmdW5jdGlvbigpe3JldHVybiBvfSkpLG4uZChlLFwiQ29udmV4QnVmZmVyR2VvbWV0cnlcIiwoZnVuY3Rpb24oKXtyZXR1cm4gYX0pKTt2YXIgcj1uKDApLGk9ZnVuY3Rpb24oKXt2YXIgdCxlLG4saSxvPW5ldyByLlZlY3RvcjM7ZnVuY3Rpb24gYSgpe3RoaXMudG9sZXJhbmNlPS0xLHRoaXMuZmFjZXM9W10sdGhpcy5uZXdGYWNlcz1bXSx0aGlzLmFzc2lnbmVkPW5ldyB1LHRoaXMudW5hc3NpZ25lZD1uZXcgdSx0aGlzLnZlcnRpY2VzPVtdfWZ1bmN0aW9uIHMoKXt0aGlzLm5vcm1hbD1uZXcgci5WZWN0b3IzLHRoaXMubWlkcG9pbnQ9bmV3IHIuVmVjdG9yMyx0aGlzLmFyZWE9MCx0aGlzLmNvbnN0YW50PTAsdGhpcy5vdXRzaWRlPW51bGwsdGhpcy5tYXJrPTAsdGhpcy5lZGdlPW51bGx9ZnVuY3Rpb24gYyh0LGUpe3RoaXMudmVydGV4PXQsdGhpcy5wcmV2PW51bGwsdGhpcy5uZXh0PW51bGwsdGhpcy50d2luPW51bGwsdGhpcy5mYWNlPWV9ZnVuY3Rpb24gbCh0KXt0aGlzLnBvaW50PXQsdGhpcy5wcmV2PW51bGwsdGhpcy5uZXh0PW51bGwsdGhpcy5mYWNlPW51bGx9ZnVuY3Rpb24gdSgpe3RoaXMuaGVhZD1udWxsLHRoaXMudGFpbD1udWxsfXJldHVybiBPYmplY3QuYXNzaWduKGEucHJvdG90eXBlLHtzZXRGcm9tUG9pbnRzOmZ1bmN0aW9uKHQpeyEwIT09QXJyYXkuaXNBcnJheSh0KSYmY29uc29sZS5lcnJvcihcIlRIUkVFLkNvbnZleEh1bGw6IFBvaW50cyBwYXJhbWV0ZXIgaXMgbm90IGFuIGFycmF5LlwiKSx0Lmxlbmd0aDw0JiZjb25zb2xlLmVycm9yKFwiVEhSRUUuQ29udmV4SHVsbDogVGhlIGFsZ29yaXRobSBuZWVkcyBhdCBsZWFzdCBmb3VyIHBvaW50cy5cIiksdGhpcy5tYWtlRW1wdHkoKTtmb3IodmFyIGU9MCxuPXQubGVuZ3RoO2U8bjtlKyspdGhpcy52ZXJ0aWNlcy5wdXNoKG5ldyBsKHRbZV0pKTtyZXR1cm4gdGhpcy5jb21wdXRlKCksdGhpc30sc2V0RnJvbU9iamVjdDpmdW5jdGlvbih0KXt2YXIgZT1bXTtyZXR1cm4gdC51cGRhdGVNYXRyaXhXb3JsZCghMCksdC50cmF2ZXJzZSgoZnVuY3Rpb24odCl7dmFyIG4saSxvLGE9dC5nZW9tZXRyeTtpZih2b2lkIDAhPT1hKWlmKGEuaXNHZW9tZXRyeSl7dmFyIHM9YS52ZXJ0aWNlcztmb3Iobj0wLGk9cy5sZW5ndGg7bjxpO24rKykobz1zW25dLmNsb25lKCkpLmFwcGx5TWF0cml4NCh0Lm1hdHJpeFdvcmxkKSxlLnB1c2gobyl9ZWxzZSBpZihhLmlzQnVmZmVyR2VvbWV0cnkpe3ZhciBjPWEuYXR0cmlidXRlcy5wb3NpdGlvbjtpZih2b2lkIDAhPT1jKWZvcihuPTAsaT1jLmNvdW50O248aTtuKyspKG89bmV3IHIuVmVjdG9yMykuZnJvbUJ1ZmZlckF0dHJpYnV0ZShjLG4pLmFwcGx5TWF0cml4NCh0Lm1hdHJpeFdvcmxkKSxlLnB1c2gobyl9fSkpLHRoaXMuc2V0RnJvbVBvaW50cyhlKX0sY29udGFpbnNQb2ludDpmdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy5mYWNlcyxuPTAscj1lLmxlbmd0aDtuPHI7bisrKXtpZihlW25dLmRpc3RhbmNlVG9Qb2ludCh0KT50aGlzLnRvbGVyYW5jZSlyZXR1cm4hMX1yZXR1cm4hMH0saW50ZXJzZWN0UmF5OmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPXRoaXMuZmFjZXMscj0tMS8wLGk9MS8wLG89MCxhPW4ubGVuZ3RoO288YTtvKyspe3ZhciBzPW5bb10sYz1zLmRpc3RhbmNlVG9Qb2ludCh0Lm9yaWdpbiksbD1zLm5vcm1hbC5kb3QodC5kaXJlY3Rpb24pO2lmKGM+MCYmbD49MClyZXR1cm4gbnVsbDt2YXIgdT0wIT09bD8tYy9sOjA7aWYoISh1PD0wKSYmKGw+MD9pPU1hdGgubWluKHUsaSk6cj1NYXRoLm1heCh1LHIpLHI+aSkpcmV0dXJuIG51bGx9cmV0dXJuIHIhPT0tMS8wP3QuYXQocixlKTp0LmF0KGksZSksZX0saW50ZXJzZWN0c1JheTpmdW5jdGlvbih0KXtyZXR1cm4gbnVsbCE9PXRoaXMuaW50ZXJzZWN0UmF5KHQsbyl9LG1ha2VFbXB0eTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmZhY2VzPVtdLHRoaXMudmVydGljZXM9W10sdGhpc30sYWRkVmVydGV4VG9GYWNlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQuZmFjZT1lLG51bGw9PT1lLm91dHNpZGU/dGhpcy5hc3NpZ25lZC5hcHBlbmQodCk6dGhpcy5hc3NpZ25lZC5pbnNlcnRCZWZvcmUoZS5vdXRzaWRlLHQpLGUub3V0c2lkZT10LHRoaXN9LHJlbW92ZVZlcnRleEZyb21GYWNlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ9PT1lLm91dHNpZGUmJihudWxsIT09dC5uZXh0JiZ0Lm5leHQuZmFjZT09PWU/ZS5vdXRzaWRlPXQubmV4dDplLm91dHNpZGU9bnVsbCksdGhpcy5hc3NpZ25lZC5yZW1vdmUodCksdGhpc30scmVtb3ZlQWxsVmVydGljZXNGcm9tRmFjZTpmdW5jdGlvbih0KXtpZihudWxsIT09dC5vdXRzaWRlKXtmb3IodmFyIGU9dC5vdXRzaWRlLG49dC5vdXRzaWRlO251bGwhPT1uLm5leHQmJm4ubmV4dC5mYWNlPT09dDspbj1uLm5leHQ7cmV0dXJuIHRoaXMuYXNzaWduZWQucmVtb3ZlU3ViTGlzdChlLG4pLGUucHJldj1uLm5leHQ9bnVsbCx0Lm91dHNpZGU9bnVsbCxlfX0sZGVsZXRlRmFjZVZlcnRpY2VzOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5yZW1vdmVBbGxWZXJ0aWNlc0Zyb21GYWNlKHQpO2lmKHZvaWQgMCE9PW4paWYodm9pZCAwPT09ZSl0aGlzLnVuYXNzaWduZWQuYXBwZW5kQ2hhaW4obik7ZWxzZXt2YXIgcj1uO2Rve3ZhciBpPXIubmV4dDtlLmRpc3RhbmNlVG9Qb2ludChyLnBvaW50KT50aGlzLnRvbGVyYW5jZT90aGlzLmFkZFZlcnRleFRvRmFjZShyLGUpOnRoaXMudW5hc3NpZ25lZC5hcHBlbmQocikscj1pfXdoaWxlKG51bGwhPT1yKX1yZXR1cm4gdGhpc30scmVzb2x2ZVVuYXNzaWduZWRQb2ludHM6ZnVuY3Rpb24odCl7aWYoITE9PT10aGlzLnVuYXNzaWduZWQuaXNFbXB0eSgpKXt2YXIgZT10aGlzLnVuYXNzaWduZWQuZmlyc3QoKTtkb3tmb3IodmFyIG49ZS5uZXh0LHI9dGhpcy50b2xlcmFuY2UsaT1udWxsLG89MDtvPHQubGVuZ3RoO28rKyl7dmFyIGE9dFtvXTtpZigwPT09YS5tYXJrKXt2YXIgcz1hLmRpc3RhbmNlVG9Qb2ludChlLnBvaW50KTtpZihzPnImJihyPXMsaT1hKSxyPjFlMyp0aGlzLnRvbGVyYW5jZSlicmVha319bnVsbCE9PWkmJnRoaXMuYWRkVmVydGV4VG9GYWNlKGUsaSksZT1ufXdoaWxlKG51bGwhPT1lKX1yZXR1cm4gdGhpc30sY29tcHV0ZUV4dHJlbWVzOmZ1bmN0aW9uKCl7dmFyIHQsZSxuLGk9bmV3IHIuVmVjdG9yMyxvPW5ldyByLlZlY3RvcjMsYT1bXSxzPVtdO2Zvcih0PTA7dDwzO3QrKylhW3RdPXNbdF09dGhpcy52ZXJ0aWNlc1swXTtmb3IoaS5jb3B5KHRoaXMudmVydGljZXNbMF0ucG9pbnQpLG8uY29weSh0aGlzLnZlcnRpY2VzWzBdLnBvaW50KSx0PTAsZT10aGlzLnZlcnRpY2VzLmxlbmd0aDt0PGU7dCsrKXt2YXIgYz10aGlzLnZlcnRpY2VzW3RdLGw9Yy5wb2ludDtmb3Iobj0wO248MztuKyspbC5nZXRDb21wb25lbnQobik8aS5nZXRDb21wb25lbnQobikmJihpLnNldENvbXBvbmVudChuLGwuZ2V0Q29tcG9uZW50KG4pKSxhW25dPWMpO2ZvcihuPTA7bjwzO24rKylsLmdldENvbXBvbmVudChuKT5vLmdldENvbXBvbmVudChuKSYmKG8uc2V0Q29tcG9uZW50KG4sbC5nZXRDb21wb25lbnQobikpLHNbbl09Yyl9cmV0dXJuIHRoaXMudG9sZXJhbmNlPTMqTnVtYmVyLkVQU0lMT04qKE1hdGgubWF4KE1hdGguYWJzKGkueCksTWF0aC5hYnMoby54KSkrTWF0aC5tYXgoTWF0aC5hYnMoaS55KSxNYXRoLmFicyhvLnkpKStNYXRoLm1heChNYXRoLmFicyhpLnopLE1hdGguYWJzKG8ueikpKSx7bWluOmEsbWF4OnN9fSxjb21wdXRlSW5pdGlhbEh1bGw6ZnVuY3Rpb24oKXt2b2lkIDA9PT10JiYodD1uZXcgci5MaW5lMyxlPW5ldyByLlBsYW5lLG49bmV3IHIuVmVjdG9yMyk7dmFyIGksbyxhLGMsbCx1LGgsZCxwLGY9dGhpcy52ZXJ0aWNlcyxtPXRoaXMuY29tcHV0ZUV4dHJlbWVzKCksZz1tLm1pbix2PW0ubWF4LHk9MCx4PTA7Zm9yKHU9MDt1PDM7dSsrKShwPXZbdV0ucG9pbnQuZ2V0Q29tcG9uZW50KHUpLWdbdV0ucG9pbnQuZ2V0Q29tcG9uZW50KHUpKT55JiYoeT1wLHg9dSk7Zm9yKG89Z1t4XSxhPXZbeF0seT0wLHQuc2V0KG8ucG9pbnQsYS5wb2ludCksdT0wLGg9dGhpcy52ZXJ0aWNlcy5sZW5ndGg7dTxoO3UrKykoaT1mW3VdKSE9PW8mJmkhPT1hJiYodC5jbG9zZXN0UG9pbnRUb1BvaW50KGkucG9pbnQsITAsbiksKHA9bi5kaXN0YW5jZVRvU3F1YXJlZChpLnBvaW50KSk+eSYmKHk9cCxjPWkpKTtmb3IoeT0tMSxlLnNldEZyb21Db3BsYW5hclBvaW50cyhvLnBvaW50LGEucG9pbnQsYy5wb2ludCksdT0wLGg9dGhpcy52ZXJ0aWNlcy5sZW5ndGg7dTxoO3UrKykoaT1mW3VdKSE9PW8mJmkhPT1hJiZpIT09YyYmKHA9TWF0aC5hYnMoZS5kaXN0YW5jZVRvUG9pbnQoaS5wb2ludCkpKT55JiYoeT1wLGw9aSk7dmFyIGI9W107aWYoZS5kaXN0YW5jZVRvUG9pbnQobC5wb2ludCk8MClmb3IoYi5wdXNoKHMuY3JlYXRlKG8sYSxjKSxzLmNyZWF0ZShsLGEsbykscy5jcmVhdGUobCxjLGEpLHMuY3JlYXRlKGwsbyxjKSksdT0wO3U8Mzt1KyspZD0odSsxKSUzLGJbdSsxXS5nZXRFZGdlKDIpLnNldFR3aW4oYlswXS5nZXRFZGdlKGQpKSxiW3UrMV0uZ2V0RWRnZSgxKS5zZXRUd2luKGJbZCsxXS5nZXRFZGdlKDApKTtlbHNlIGZvcihiLnB1c2gocy5jcmVhdGUobyxjLGEpLHMuY3JlYXRlKGwsbyxhKSxzLmNyZWF0ZShsLGEsYykscy5jcmVhdGUobCxjLG8pKSx1PTA7dTwzO3UrKylkPSh1KzEpJTMsYlt1KzFdLmdldEVkZ2UoMikuc2V0VHdpbihiWzBdLmdldEVkZ2UoKDMtdSklMykpLGJbdSsxXS5nZXRFZGdlKDApLnNldFR3aW4oYltkKzFdLmdldEVkZ2UoMSkpO2Zvcih1PTA7dTw0O3UrKyl0aGlzLmZhY2VzLnB1c2goYlt1XSk7Zm9yKHU9MCxoPWYubGVuZ3RoO3U8aDt1KyspaWYoKGk9Zlt1XSkhPT1vJiZpIT09YSYmaSE9PWMmJmkhPT1sKXt5PXRoaXMudG9sZXJhbmNlO3ZhciB3PW51bGw7Zm9yKGQ9MDtkPDQ7ZCsrKShwPXRoaXMuZmFjZXNbZF0uZGlzdGFuY2VUb1BvaW50KGkucG9pbnQpKT55JiYoeT1wLHc9dGhpcy5mYWNlc1tkXSk7bnVsbCE9PXcmJnRoaXMuYWRkVmVydGV4VG9GYWNlKGksdyl9cmV0dXJuIHRoaXN9LHJlaW5kZXhGYWNlczpmdW5jdGlvbigpe2Zvcih2YXIgdD1bXSxlPTA7ZTx0aGlzLmZhY2VzLmxlbmd0aDtlKyspe3ZhciBuPXRoaXMuZmFjZXNbZV07MD09PW4ubWFyayYmdC5wdXNoKG4pfXJldHVybiB0aGlzLmZhY2VzPXQsdGhpc30sbmV4dFZlcnRleFRvQWRkOmZ1bmN0aW9uKCl7aWYoITE9PT10aGlzLmFzc2lnbmVkLmlzRW1wdHkoKSl7dmFyIHQsZT0wLG49dGhpcy5hc3NpZ25lZC5maXJzdCgpLmZhY2Uscj1uLm91dHNpZGU7ZG97dmFyIGk9bi5kaXN0YW5jZVRvUG9pbnQoci5wb2ludCk7aT5lJiYoZT1pLHQ9cikscj1yLm5leHR9d2hpbGUobnVsbCE9PXImJnIuZmFjZT09PW4pO3JldHVybiB0fX0sY29tcHV0ZUhvcml6b246ZnVuY3Rpb24odCxlLG4scil7dmFyIGk7dGhpcy5kZWxldGVGYWNlVmVydGljZXMobiksbi5tYXJrPTEsaT1udWxsPT09ZT9lPW4uZ2V0RWRnZSgwKTplLm5leHQ7ZG97dmFyIG89aS50d2luLGE9by5mYWNlOzA9PT1hLm1hcmsmJihhLmRpc3RhbmNlVG9Qb2ludCh0KT50aGlzLnRvbGVyYW5jZT90aGlzLmNvbXB1dGVIb3Jpem9uKHQsbyxhLHIpOnIucHVzaChpKSksaT1pLm5leHR9d2hpbGUoaSE9PWUpO3JldHVybiB0aGlzfSxhZGRBZGpvaW5pbmdGYWNlOmZ1bmN0aW9uKHQsZSl7dmFyIG49cy5jcmVhdGUodCxlLnRhaWwoKSxlLmhlYWQoKSk7cmV0dXJuIHRoaXMuZmFjZXMucHVzaChuKSxuLmdldEVkZ2UoLTEpLnNldFR3aW4oZS50d2luKSxuLmdldEVkZ2UoMCl9LGFkZE5ld0ZhY2VzOmZ1bmN0aW9uKHQsZSl7dGhpcy5uZXdGYWNlcz1bXTtmb3IodmFyIG49bnVsbCxyPW51bGwsaT0wO2k8ZS5sZW5ndGg7aSsrKXt2YXIgbz1lW2ldLGE9dGhpcy5hZGRBZGpvaW5pbmdGYWNlKHQsbyk7bnVsbD09PW4/bj1hOmEubmV4dC5zZXRUd2luKHIpLHRoaXMubmV3RmFjZXMucHVzaChhLmZhY2UpLHI9YX1yZXR1cm4gbi5uZXh0LnNldFR3aW4ociksdGhpc30sYWRkVmVydGV4VG9IdWxsOmZ1bmN0aW9uKHQpe3ZhciBlPVtdO3JldHVybiB0aGlzLnVuYXNzaWduZWQuY2xlYXIoKSx0aGlzLnJlbW92ZVZlcnRleEZyb21GYWNlKHQsdC5mYWNlKSx0aGlzLmNvbXB1dGVIb3Jpem9uKHQucG9pbnQsbnVsbCx0LmZhY2UsZSksdGhpcy5hZGROZXdGYWNlcyh0LGUpLHRoaXMucmVzb2x2ZVVuYXNzaWduZWRQb2ludHModGhpcy5uZXdGYWNlcyksdGhpc30sY2xlYW51cDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmFzc2lnbmVkLmNsZWFyKCksdGhpcy51bmFzc2lnbmVkLmNsZWFyKCksdGhpcy5uZXdGYWNlcz1bXSx0aGlzfSxjb21wdXRlOmZ1bmN0aW9uKCl7dmFyIHQ7Zm9yKHRoaXMuY29tcHV0ZUluaXRpYWxIdWxsKCk7dm9pZCAwIT09KHQ9dGhpcy5uZXh0VmVydGV4VG9BZGQoKSk7KXRoaXMuYWRkVmVydGV4VG9IdWxsKHQpO3JldHVybiB0aGlzLnJlaW5kZXhGYWNlcygpLHRoaXMuY2xlYW51cCgpLHRoaXN9fSksT2JqZWN0LmFzc2lnbihzLHtjcmVhdGU6ZnVuY3Rpb24odCxlLG4pe3ZhciByPW5ldyBzLGk9bmV3IGModCxyKSxvPW5ldyBjKGUsciksYT1uZXcgYyhuLHIpO3JldHVybiBpLm5leHQ9YS5wcmV2PW8sby5uZXh0PWkucHJldj1hLGEubmV4dD1vLnByZXY9aSxyLmVkZ2U9aSxyLmNvbXB1dGUoKX19KSxPYmplY3QuYXNzaWduKHMucHJvdG90eXBlLHtnZXRFZGdlOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLmVkZ2U7dD4wOyllPWUubmV4dCx0LS07Zm9yKDt0PDA7KWU9ZS5wcmV2LHQrKztyZXR1cm4gZX0sY29tcHV0ZTpmdW5jdGlvbigpe3ZvaWQgMD09PWkmJihpPW5ldyByLlRyaWFuZ2xlKTt2YXIgdD10aGlzLmVkZ2UudGFpbCgpLGU9dGhpcy5lZGdlLmhlYWQoKSxuPXRoaXMuZWRnZS5uZXh0LmhlYWQoKTtyZXR1cm4gaS5zZXQodC5wb2ludCxlLnBvaW50LG4ucG9pbnQpLGkuZ2V0Tm9ybWFsKHRoaXMubm9ybWFsKSxpLmdldE1pZHBvaW50KHRoaXMubWlkcG9pbnQpLHRoaXMuYXJlYT1pLmdldEFyZWEoKSx0aGlzLmNvbnN0YW50PXRoaXMubm9ybWFsLmRvdCh0aGlzLm1pZHBvaW50KSx0aGlzfSxkaXN0YW5jZVRvUG9pbnQ6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMubm9ybWFsLmRvdCh0KS10aGlzLmNvbnN0YW50fX0pLE9iamVjdC5hc3NpZ24oYy5wcm90b3R5cGUse2hlYWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52ZXJ0ZXh9LHRhaWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcmV2P3RoaXMucHJldi52ZXJ0ZXg6bnVsbH0sbGVuZ3RoOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5oZWFkKCksZT10aGlzLnRhaWwoKTtyZXR1cm4gbnVsbCE9PWU/ZS5wb2ludC5kaXN0YW5jZVRvKHQucG9pbnQpOi0xfSxsZW5ndGhTcXVhcmVkOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5oZWFkKCksZT10aGlzLnRhaWwoKTtyZXR1cm4gbnVsbCE9PWU/ZS5wb2ludC5kaXN0YW5jZVRvU3F1YXJlZCh0LnBvaW50KTotMX0sc2V0VHdpbjpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy50d2luPXQsdC50d2luPXRoaXMsdGhpc319KSxPYmplY3QuYXNzaWduKHUucHJvdG90eXBlLHtmaXJzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmhlYWR9LGxhc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50YWlsfSxjbGVhcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmhlYWQ9dGhpcy50YWlsPW51bGwsdGhpc30saW5zZXJ0QmVmb3JlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUucHJldj10LnByZXYsZS5uZXh0PXQsbnVsbD09PWUucHJldj90aGlzLmhlYWQ9ZTplLnByZXYubmV4dD1lLHQucHJldj1lLHRoaXN9LGluc2VydEFmdGVyOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUucHJldj10LGUubmV4dD10Lm5leHQsbnVsbD09PWUubmV4dD90aGlzLnRhaWw9ZTplLm5leHQucHJldj1lLHQubmV4dD1lLHRoaXN9LGFwcGVuZDpmdW5jdGlvbih0KXtyZXR1cm4gbnVsbD09PXRoaXMuaGVhZD90aGlzLmhlYWQ9dDp0aGlzLnRhaWwubmV4dD10LHQucHJldj10aGlzLnRhaWwsdC5uZXh0PW51bGwsdGhpcy50YWlsPXQsdGhpc30sYXBwZW5kQ2hhaW46ZnVuY3Rpb24odCl7Zm9yKG51bGw9PT10aGlzLmhlYWQ/dGhpcy5oZWFkPXQ6dGhpcy50YWlsLm5leHQ9dCx0LnByZXY9dGhpcy50YWlsO251bGwhPT10Lm5leHQ7KXQ9dC5uZXh0O3JldHVybiB0aGlzLnRhaWw9dCx0aGlzfSxyZW1vdmU6ZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PT10LnByZXY/dGhpcy5oZWFkPXQubmV4dDp0LnByZXYubmV4dD10Lm5leHQsbnVsbD09PXQubmV4dD90aGlzLnRhaWw9dC5wcmV2OnQubmV4dC5wcmV2PXQucHJldix0aGlzfSxyZW1vdmVTdWJMaXN0OmZ1bmN0aW9uKHQsZSl7cmV0dXJuIG51bGw9PT10LnByZXY/dGhpcy5oZWFkPWUubmV4dDp0LnByZXYubmV4dD1lLm5leHQsbnVsbD09PWUubmV4dD90aGlzLnRhaWw9dC5wcmV2OmUubmV4dC5wcmV2PXQucHJldix0aGlzfSxpc0VtcHR5OmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PT10aGlzLmhlYWR9fSksYX0oKSxvPWZ1bmN0aW9uKHQpe3IuR2VvbWV0cnkuY2FsbCh0aGlzKSx0aGlzLmZyb21CdWZmZXJHZW9tZXRyeShuZXcgYSh0KSksdGhpcy5tZXJnZVZlcnRpY2VzKCl9O28ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoci5HZW9tZXRyeS5wcm90b3R5cGUpLG8ucHJvdG90eXBlLmNvbnN0cnVjdG9yPW87dmFyIGE9ZnVuY3Rpb24odCl7ci5CdWZmZXJHZW9tZXRyeS5jYWxsKHRoaXMpO3ZhciBlPVtdLG49W107dm9pZCAwPT09aSYmY29uc29sZS5lcnJvcihcIlRIUkVFLkNvbnZleEJ1ZmZlckdlb21ldHJ5OiBDb252ZXhCdWZmZXJHZW9tZXRyeSByZWxpZXMgb24gQ29udmV4SHVsbFwiKTtmb3IodmFyIG89KG5ldyBpKS5zZXRGcm9tUG9pbnRzKHQpLmZhY2VzLGE9MDthPG8ubGVuZ3RoO2ErKyl7dmFyIHM9b1thXSxjPXMuZWRnZTtkb3t2YXIgbD1jLmhlYWQoKS5wb2ludDtlLnB1c2gobC54LGwueSxsLnopLG4ucHVzaChzLm5vcm1hbC54LHMubm9ybWFsLnkscy5ub3JtYWwueiksYz1jLm5leHR9d2hpbGUoYyE9PXMuZWRnZSl9dGhpcy5zZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyByLkZsb2F0MzJCdWZmZXJBdHRyaWJ1dGUoZSwzKSksdGhpcy5zZXRBdHRyaWJ1dGUoXCJub3JtYWxcIixuZXcgci5GbG9hdDMyQnVmZmVyQXR0cmlidXRlKG4sMykpfTthLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHIuQnVmZmVyR2VvbWV0cnkucHJvdG90eXBlKSxhLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1hfSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7bi5yKGUpLG4uZChlLFwiWFJDb250cm9sbGVyTW9kZWxGYWN0b3J5XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGZ9KSk7dmFyIHI9bigwKSxpPW4oMyk7Y29uc3Qgbz17SGFuZGVkbmVzczpPYmplY3QuZnJlZXplKHtOT05FOlwibm9uZVwiLExFRlQ6XCJsZWZ0XCIsUklHSFQ6XCJyaWdodFwifSksQ29tcG9uZW50U3RhdGU6T2JqZWN0LmZyZWV6ZSh7REVGQVVMVDpcImRlZmF1bHRcIixUT1VDSEVEOlwidG91Y2hlZFwiLFBSRVNTRUQ6XCJwcmVzc2VkXCJ9KSxDb21wb25lbnRQcm9wZXJ0eTpPYmplY3QuZnJlZXplKHtCVVRUT046XCJidXR0b25cIixYX0FYSVM6XCJ4QXhpc1wiLFlfQVhJUzpcInlBeGlzXCIsU1RBVEU6XCJzdGF0ZVwifSksQ29tcG9uZW50VHlwZTpPYmplY3QuZnJlZXplKHtUUklHR0VSOlwidHJpZ2dlclwiLFNRVUVFWkU6XCJzcXVlZXplXCIsVE9VQ0hQQUQ6XCJ0b3VjaHBhZFwiLFRIVU1CU1RJQ0s6XCJ0aHVtYnN0aWNrXCIsQlVUVE9OOlwiYnV0dG9uXCJ9KSxCdXR0b25Ub3VjaFRocmVzaG9sZDouMDUsQXhpc1RvdWNoVGhyZXNob2xkOi4xLFZpc3VhbFJlc3BvbnNlUHJvcGVydHk6T2JqZWN0LmZyZWV6ZSh7VFJBTlNGT1JNOlwidHJhbnNmb3JtXCIsVklTSUJJTElUWTpcInZpc2liaWxpdHlcIn0pfTthc3luYyBmdW5jdGlvbiBhKHQpe2NvbnN0IGU9YXdhaXQgZmV0Y2godCk7aWYoZS5vaylyZXR1cm4gZS5qc29uKCk7dGhyb3cgbmV3IEVycm9yKGUuc3RhdHVzVGV4dCl9YXN5bmMgZnVuY3Rpb24gcyh0LGUsbj1udWxsLHI9ITApe2lmKCF0KXRocm93IG5ldyBFcnJvcihcIk5vIHhySW5wdXRTb3VyY2Ugc3VwcGxpZWRcIik7aWYoIWUpdGhyb3cgbmV3IEVycm9yKFwiTm8gYmFzZVBhdGggc3VwcGxpZWRcIik7Y29uc3QgaT1hd2FpdCBhc3luYyBmdW5jdGlvbih0KXtpZighdCl0aHJvdyBuZXcgRXJyb3IoXCJObyBiYXNlUGF0aCBzdXBwbGllZFwiKTtyZXR1cm4gYXdhaXQgYSh0K1wiL3Byb2ZpbGVzTGlzdC5qc29uXCIpfShlKTtsZXQgbztpZih0LnByb2ZpbGVzLnNvbWUodD0+e2NvbnN0IG49aVt0XTtyZXR1cm4gbiYmKG89e3Byb2ZpbGVJZDp0LHByb2ZpbGVQYXRoOmAke2V9LyR7bi5wYXRofWAsZGVwcmVjYXRlZDohIW4uZGVwcmVjYXRlZH0pLCEhb30pLCFvKXtpZighbil0aHJvdyBuZXcgRXJyb3IoXCJObyBtYXRjaGluZyBwcm9maWxlIG5hbWUgZm91bmRcIik7Y29uc3QgdD1pW25dO2lmKCF0KXRocm93IG5ldyBFcnJvcihgTm8gbWF0Y2hpbmcgcHJvZmlsZSBuYW1lIGZvdW5kIGFuZCBkZWZhdWx0IHByb2ZpbGUgXCIke259XCIgbWlzc2luZy5gKTtvPXtwcm9maWxlSWQ6bixwcm9maWxlUGF0aDpgJHtlfS8ke3QucGF0aH1gLGRlcHJlY2F0ZWQ6ISF0LmRlcHJlY2F0ZWR9fWNvbnN0IHM9YXdhaXQgYShvLnByb2ZpbGVQYXRoKTtsZXQgYztpZihyKXtsZXQgZTtpZihlPVwiYW55XCI9PT10LmhhbmRlZG5lc3M/cy5sYXlvdXRzW09iamVjdC5rZXlzKHMubGF5b3V0cylbMF1dOnMubGF5b3V0c1t0LmhhbmRlZG5lc3NdLCFlKXRocm93IG5ldyBFcnJvcihgTm8gbWF0Y2hpbmcgaGFuZGVkbmVzcywgJHt0LmhhbmRlZG5lc3N9LCBpbiBwcm9maWxlICR7by5wcm9maWxlSWR9YCk7ZS5hc3NldFBhdGgmJihjPW8ucHJvZmlsZVBhdGgucmVwbGFjZShcInByb2ZpbGUuanNvblwiLGUuYXNzZXRQYXRoKSl9cmV0dXJue3Byb2ZpbGU6cyxhc3NldFBhdGg6Y319Y29uc3QgYz17eEF4aXM6MCx5QXhpczowLGJ1dHRvbjowLHN0YXRlOm8uQ29tcG9uZW50U3RhdGUuREVGQVVMVH07Y2xhc3MgbHtjb25zdHJ1Y3Rvcih0KXt0aGlzLmNvbXBvbmVudFByb3BlcnR5PXQuY29tcG9uZW50UHJvcGVydHksdGhpcy5zdGF0ZXM9dC5zdGF0ZXMsdGhpcy52YWx1ZU5vZGVOYW1lPXQudmFsdWVOb2RlTmFtZSx0aGlzLnZhbHVlTm9kZVByb3BlcnR5PXQudmFsdWVOb2RlUHJvcGVydHksdGhpcy52YWx1ZU5vZGVQcm9wZXJ0eT09PW8uVmlzdWFsUmVzcG9uc2VQcm9wZXJ0eS5UUkFOU0ZPUk0mJih0aGlzLm1pbk5vZGVOYW1lPXQubWluTm9kZU5hbWUsdGhpcy5tYXhOb2RlTmFtZT10Lm1heE5vZGVOYW1lKSx0aGlzLnZhbHVlPTAsdGhpcy51cGRhdGVGcm9tQ29tcG9uZW50KGMpfXVwZGF0ZUZyb21Db21wb25lbnQoe3hBeGlzOnQseUF4aXM6ZSxidXR0b246bixzdGF0ZTpyfSl7Y29uc3R7bm9ybWFsaXplZFhBeGlzOmksbm9ybWFsaXplZFlBeGlzOmF9PWZ1bmN0aW9uKHQ9MCxlPTApe2xldCBuPXQscj1lO2lmKE1hdGguc3FydCh0KnQrZSplKT4xKXtjb25zdCBpPU1hdGguYXRhbjIoZSx0KTtuPU1hdGguY29zKGkpLHI9TWF0aC5zaW4oaSl9cmV0dXJue25vcm1hbGl6ZWRYQXhpczouNSpuKy41LG5vcm1hbGl6ZWRZQXhpczouNSpyKy41fX0odCxlKTtzd2l0Y2godGhpcy5jb21wb25lbnRQcm9wZXJ0eSl7Y2FzZSBvLkNvbXBvbmVudFByb3BlcnR5LlhfQVhJUzp0aGlzLnZhbHVlPXRoaXMuc3RhdGVzLmluY2x1ZGVzKHIpP2k6LjU7YnJlYWs7Y2FzZSBvLkNvbXBvbmVudFByb3BlcnR5LllfQVhJUzp0aGlzLnZhbHVlPXRoaXMuc3RhdGVzLmluY2x1ZGVzKHIpP2E6LjU7YnJlYWs7Y2FzZSBvLkNvbXBvbmVudFByb3BlcnR5LkJVVFRPTjp0aGlzLnZhbHVlPXRoaXMuc3RhdGVzLmluY2x1ZGVzKHIpP246MDticmVhaztjYXNlIG8uQ29tcG9uZW50UHJvcGVydHkuU1RBVEU6dGhpcy52YWx1ZU5vZGVQcm9wZXJ0eT09PW8uVmlzdWFsUmVzcG9uc2VQcm9wZXJ0eS5WSVNJQklMSVRZP3RoaXMudmFsdWU9dGhpcy5zdGF0ZXMuaW5jbHVkZXMocik6dGhpcy52YWx1ZT10aGlzLnN0YXRlcy5pbmNsdWRlcyhyKT8xOjA7YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoXCJVbmV4cGVjdGVkIHZpc3VhbFJlc3BvbnNlIGNvbXBvbmVudFByb3BlcnR5IFwiK3RoaXMuY29tcG9uZW50UHJvcGVydHkpfX19Y2xhc3MgdXtjb25zdHJ1Y3Rvcih0LGUpe2lmKCEodCYmZSYmZS52aXN1YWxSZXNwb25zZXMmJmUuZ2FtZXBhZEluZGljZXMmJjAhPT1PYmplY3Qua2V5cyhlLmdhbWVwYWRJbmRpY2VzKS5sZW5ndGgpKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgYXJndW1lbnRzIHN1cHBsaWVkXCIpO3RoaXMuaWQ9dCx0aGlzLnR5cGU9ZS50eXBlLHRoaXMucm9vdE5vZGVOYW1lPWUucm9vdE5vZGVOYW1lLHRoaXMudG91Y2hQb2ludE5vZGVOYW1lPWUudG91Y2hQb2ludE5vZGVOYW1lLHRoaXMudmlzdWFsUmVzcG9uc2VzPXt9LE9iamVjdC5rZXlzKGUudmlzdWFsUmVzcG9uc2VzKS5mb3JFYWNoKHQ9Pntjb25zdCBuPW5ldyBsKGUudmlzdWFsUmVzcG9uc2VzW3RdKTt0aGlzLnZpc3VhbFJlc3BvbnNlc1t0XT1ufSksdGhpcy5nYW1lcGFkSW5kaWNlcz1PYmplY3QuYXNzaWduKHt9LGUuZ2FtZXBhZEluZGljZXMpLHRoaXMudmFsdWVzPXtzdGF0ZTpvLkNvbXBvbmVudFN0YXRlLkRFRkFVTFQsYnV0dG9uOnZvaWQgMCE9PXRoaXMuZ2FtZXBhZEluZGljZXMuYnV0dG9uPzA6dm9pZCAwLHhBeGlzOnZvaWQgMCE9PXRoaXMuZ2FtZXBhZEluZGljZXMueEF4aXM/MDp2b2lkIDAseUF4aXM6dm9pZCAwIT09dGhpcy5nYW1lcGFkSW5kaWNlcy55QXhpcz8wOnZvaWQgMH19Z2V0IGRhdGEoKXtyZXR1cm57aWQ6dGhpcy5pZCwuLi50aGlzLnZhbHVlc319dXBkYXRlRnJvbUdhbWVwYWQodCl7aWYodGhpcy52YWx1ZXMuc3RhdGU9by5Db21wb25lbnRTdGF0ZS5ERUZBVUxULHZvaWQgMCE9PXRoaXMuZ2FtZXBhZEluZGljZXMuYnV0dG9uJiZ0LmJ1dHRvbnMubGVuZ3RoPnRoaXMuZ2FtZXBhZEluZGljZXMuYnV0dG9uKXtjb25zdCBlPXQuYnV0dG9uc1t0aGlzLmdhbWVwYWRJbmRpY2VzLmJ1dHRvbl07dGhpcy52YWx1ZXMuYnV0dG9uPWUudmFsdWUsdGhpcy52YWx1ZXMuYnV0dG9uPXRoaXMudmFsdWVzLmJ1dHRvbjwwPzA6dGhpcy52YWx1ZXMuYnV0dG9uLHRoaXMudmFsdWVzLmJ1dHRvbj10aGlzLnZhbHVlcy5idXR0b24+MT8xOnRoaXMudmFsdWVzLmJ1dHRvbixlLnByZXNzZWR8fDE9PT10aGlzLnZhbHVlcy5idXR0b24/dGhpcy52YWx1ZXMuc3RhdGU9by5Db21wb25lbnRTdGF0ZS5QUkVTU0VEOihlLnRvdWNoZWR8fHRoaXMudmFsdWVzLmJ1dHRvbj5vLkJ1dHRvblRvdWNoVGhyZXNob2xkKSYmKHRoaXMudmFsdWVzLnN0YXRlPW8uQ29tcG9uZW50U3RhdGUuVE9VQ0hFRCl9dm9pZCAwIT09dGhpcy5nYW1lcGFkSW5kaWNlcy54QXhpcyYmdC5heGVzLmxlbmd0aD50aGlzLmdhbWVwYWRJbmRpY2VzLnhBeGlzJiYodGhpcy52YWx1ZXMueEF4aXM9dC5heGVzW3RoaXMuZ2FtZXBhZEluZGljZXMueEF4aXNdLHRoaXMudmFsdWVzLnhBeGlzPXRoaXMudmFsdWVzLnhBeGlzPC0xPy0xOnRoaXMudmFsdWVzLnhBeGlzLHRoaXMudmFsdWVzLnhBeGlzPXRoaXMudmFsdWVzLnhBeGlzPjE/MTp0aGlzLnZhbHVlcy54QXhpcyx0aGlzLnZhbHVlcy5zdGF0ZT09PW8uQ29tcG9uZW50U3RhdGUuREVGQVVMVCYmTWF0aC5hYnModGhpcy52YWx1ZXMueEF4aXMpPm8uQXhpc1RvdWNoVGhyZXNob2xkJiYodGhpcy52YWx1ZXMuc3RhdGU9by5Db21wb25lbnRTdGF0ZS5UT1VDSEVEKSksdm9pZCAwIT09dGhpcy5nYW1lcGFkSW5kaWNlcy55QXhpcyYmdC5heGVzLmxlbmd0aD50aGlzLmdhbWVwYWRJbmRpY2VzLnlBeGlzJiYodGhpcy52YWx1ZXMueUF4aXM9dC5heGVzW3RoaXMuZ2FtZXBhZEluZGljZXMueUF4aXNdLHRoaXMudmFsdWVzLnlBeGlzPXRoaXMudmFsdWVzLnlBeGlzPC0xPy0xOnRoaXMudmFsdWVzLnlBeGlzLHRoaXMudmFsdWVzLnlBeGlzPXRoaXMudmFsdWVzLnlBeGlzPjE/MTp0aGlzLnZhbHVlcy55QXhpcyx0aGlzLnZhbHVlcy5zdGF0ZT09PW8uQ29tcG9uZW50U3RhdGUuREVGQVVMVCYmTWF0aC5hYnModGhpcy52YWx1ZXMueUF4aXMpPm8uQXhpc1RvdWNoVGhyZXNob2xkJiYodGhpcy52YWx1ZXMuc3RhdGU9by5Db21wb25lbnRTdGF0ZS5UT1VDSEVEKSksT2JqZWN0LnZhbHVlcyh0aGlzLnZpc3VhbFJlc3BvbnNlcykuZm9yRWFjaCh0PT57dC51cGRhdGVGcm9tQ29tcG9uZW50KHRoaXMudmFsdWVzKX0pfX1jbGFzcyBoe2NvbnN0cnVjdG9yKHQsZSxuKXtpZighdCl0aHJvdyBuZXcgRXJyb3IoXCJObyB4cklucHV0U291cmNlIHN1cHBsaWVkXCIpO2lmKCFlKXRocm93IG5ldyBFcnJvcihcIk5vIHByb2ZpbGUgc3VwcGxpZWRcIik7dGhpcy54cklucHV0U291cmNlPXQsdGhpcy5hc3NldFVybD1uLHRoaXMuaWQ9ZS5wcm9maWxlSWQsdGhpcy5sYXlvdXREZXNjcmlwdGlvbj1lLmxheW91dHNbdC5oYW5kZWRuZXNzXSx0aGlzLmNvbXBvbmVudHM9e30sT2JqZWN0LmtleXModGhpcy5sYXlvdXREZXNjcmlwdGlvbi5jb21wb25lbnRzKS5mb3JFYWNoKHQ9Pntjb25zdCBlPXRoaXMubGF5b3V0RGVzY3JpcHRpb24uY29tcG9uZW50c1t0XTt0aGlzLmNvbXBvbmVudHNbdF09bmV3IHUodCxlKX0pLHRoaXMudXBkYXRlRnJvbUdhbWVwYWQoKX1nZXQgZ3JpcFNwYWNlKCl7cmV0dXJuIHRoaXMueHJJbnB1dFNvdXJjZS5ncmlwU3BhY2V9Z2V0IHRhcmdldFJheVNwYWNlKCl7cmV0dXJuIHRoaXMueHJJbnB1dFNvdXJjZS50YXJnZXRSYXlTcGFjZX1nZXQgZGF0YSgpe2NvbnN0IHQ9W107cmV0dXJuIE9iamVjdC52YWx1ZXModGhpcy5jb21wb25lbnRzKS5mb3JFYWNoKGU9Pnt0LnB1c2goZS5kYXRhKX0pLHR9dXBkYXRlRnJvbUdhbWVwYWQoKXtPYmplY3QudmFsdWVzKHRoaXMuY29tcG9uZW50cykuZm9yRWFjaCh0PT57dC51cGRhdGVGcm9tR2FtZXBhZCh0aGlzLnhySW5wdXRTb3VyY2UuZ2FtZXBhZCl9KX19ZnVuY3Rpb24gZCgpe3IuT2JqZWN0M0QuY2FsbCh0aGlzKSx0aGlzLm1vdGlvbkNvbnRyb2xsZXI9bnVsbCx0aGlzLmVudk1hcD1udWxsfWZ1bmN0aW9uIHAodCxlKXshZnVuY3Rpb24odCxlKXtPYmplY3QudmFsdWVzKHQuY29tcG9uZW50cykuZm9yRWFjaCh0PT57Y29uc3R7dHlwZTpuLHRvdWNoUG9pbnROb2RlTmFtZTppLHZpc3VhbFJlc3BvbnNlczphfT10O2lmKG49PT1vLkNvbXBvbmVudFR5cGUuVE9VQ0hQQUQpaWYodC50b3VjaFBvaW50Tm9kZT1lLmdldE9iamVjdEJ5TmFtZShpKSx0LnRvdWNoUG9pbnROb2RlKXtjb25zdCBlPW5ldyByLlNwaGVyZUJ1ZmZlckdlb21ldHJ5KC4wMDEpLG49bmV3IHIuTWVzaEJhc2ljTWF0ZXJpYWwoe2NvbG9yOjI1NX0pLGk9bmV3IHIuTWVzaChlLG4pO3QudG91Y2hQb2ludE5vZGUuYWRkKGkpfWVsc2UgY29uc29sZS53YXJuKGBDb3VsZCBub3QgZmluZCB0b3VjaCBkb3QsICR7dC50b3VjaFBvaW50Tm9kZU5hbWV9LCBpbiB0b3VjaHBhZCBjb21wb25lbnQgJHt0LmlkfWApO09iamVjdC52YWx1ZXMoYSkuZm9yRWFjaCh0PT57Y29uc3R7dmFsdWVOb2RlTmFtZTpuLG1pbk5vZGVOYW1lOnIsbWF4Tm9kZU5hbWU6aSx2YWx1ZU5vZGVQcm9wZXJ0eTphfT10O2lmKGE9PT1vLlZpc3VhbFJlc3BvbnNlUHJvcGVydHkuVFJBTlNGT1JNKXtpZih0Lm1pbk5vZGU9ZS5nZXRPYmplY3RCeU5hbWUociksdC5tYXhOb2RlPWUuZ2V0T2JqZWN0QnlOYW1lKGkpLCF0Lm1pbk5vZGUpcmV0dXJuIHZvaWQgY29uc29sZS53YXJuKGBDb3VsZCBub3QgZmluZCAke3J9IGluIHRoZSBtb2RlbGApO2lmKCF0Lm1heE5vZGUpcmV0dXJuIHZvaWQgY29uc29sZS53YXJuKGBDb3VsZCBub3QgZmluZCAke2l9IGluIHRoZSBtb2RlbGApfXQudmFsdWVOb2RlPWUuZ2V0T2JqZWN0QnlOYW1lKG4pLHQudmFsdWVOb2RlfHxjb25zb2xlLndhcm4oYENvdWxkIG5vdCBmaW5kICR7bn0gaW4gdGhlIG1vZGVsYCl9KX0pfSh0Lm1vdGlvbkNvbnRyb2xsZXIsZSksdC5lbnZNYXAmJmUudHJhdmVyc2UoZT0+e2UuaXNNZXNoJiYoZS5tYXRlcmlhbC5lbnZNYXA9dC5lbnZNYXAsZS5tYXRlcmlhbC5uZWVkc1VwZGF0ZT0hMCl9KSx0LmFkZChlKX1kLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoci5PYmplY3QzRC5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpkLHNldEVudmlyb25tZW50TWFwOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmVudk1hcD09dHx8KHRoaXMuZW52TWFwPXQsdGhpcy50cmF2ZXJzZSh0PT57dC5pc01lc2gmJih0Lm1hdGVyaWFsLmVudk1hcD10aGlzLmVudk1hcCx0Lm1hdGVyaWFsLm5lZWRzVXBkYXRlPSEwKX0pKSx0aGlzfSx1cGRhdGVNYXRyaXhXb3JsZDpmdW5jdGlvbih0KXtyLk9iamVjdDNELnByb3RvdHlwZS51cGRhdGVNYXRyaXhXb3JsZC5jYWxsKHRoaXMsdCksdGhpcy5tb3Rpb25Db250cm9sbGVyJiYodGhpcy5tb3Rpb25Db250cm9sbGVyLnVwZGF0ZUZyb21HYW1lcGFkKCksT2JqZWN0LnZhbHVlcyh0aGlzLm1vdGlvbkNvbnRyb2xsZXIuY29tcG9uZW50cykuZm9yRWFjaCh0PT57T2JqZWN0LnZhbHVlcyh0LnZpc3VhbFJlc3BvbnNlcykuZm9yRWFjaCh0PT57Y29uc3R7dmFsdWVOb2RlOmUsbWluTm9kZTpuLG1heE5vZGU6aSx2YWx1ZTphLHZhbHVlTm9kZVByb3BlcnR5OnN9PXQ7ZSYmKHM9PT1vLlZpc3VhbFJlc3BvbnNlUHJvcGVydHkuVklTSUJJTElUWT9lLnZpc2libGU9YTpzPT09by5WaXN1YWxSZXNwb25zZVByb3BlcnR5LlRSQU5TRk9STSYmKHIuUXVhdGVybmlvbi5zbGVycChuLnF1YXRlcm5pb24saS5xdWF0ZXJuaW9uLGUucXVhdGVybmlvbixhKSxlLnBvc2l0aW9uLmxlcnBWZWN0b3JzKG4ucG9zaXRpb24saS5wb3NpdGlvbixhKSkpfSl9KSl9fSk7dmFyIGY9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQ9bnVsbCl7dGhpcy5nbHRmTG9hZGVyPXQsdGhpcy5wYXRoPVwiaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L25wbS9Ad2VieHItaW5wdXQtcHJvZmlsZXMvYXNzZXRzQDEuMC9kaXN0L3Byb2ZpbGVzXCIsdGhpcy5fYXNzZXRDYWNoZT17fSx0aGlzLmdsdGZMb2FkZXJ8fCh0aGlzLmdsdGZMb2FkZXI9bmV3IGkuR0xURkxvYWRlcil9cmV0dXJuIHQucHJvdG90eXBlPXtjb25zdHJ1Y3Rvcjp0LGNyZWF0ZUNvbnRyb2xsZXJNb2RlbDpmdW5jdGlvbih0KXtjb25zdCBlPW5ldyBkO2xldCBuPW51bGw7cmV0dXJuIHQuYWRkRXZlbnRMaXN0ZW5lcihcImNvbm5lY3RlZFwiLHQ9Pntjb25zdCByPXQuZGF0YTtcInRyYWNrZWQtcG9pbnRlclwiPT09ci50YXJnZXRSYXlNb2RlJiZyLmdhbWVwYWQmJnMocix0aGlzLnBhdGgsXCJnZW5lcmljLXRyaWdnZXJcIikudGhlbigoe3Byb2ZpbGU6dCxhc3NldFBhdGg6aX0pPT57ZS5tb3Rpb25Db250cm9sbGVyPW5ldyBoKHIsdCxpKTtjb25zdCBvPXRoaXMuX2Fzc2V0Q2FjaGVbZS5tb3Rpb25Db250cm9sbGVyLmFzc2V0VXJsXTtpZihvKW49by5zY2VuZS5jbG9uZSgpLHAoZSxuKTtlbHNle2lmKCF0aGlzLmdsdGZMb2FkZXIpdGhyb3cgbmV3IEVycm9yKFwiR0xURkxvYWRlciBub3Qgc2V0LlwiKTt0aGlzLmdsdGZMb2FkZXIuc2V0UGF0aChcIlwiKSx0aGlzLmdsdGZMb2FkZXIubG9hZChlLm1vdGlvbkNvbnRyb2xsZXIuYXNzZXRVcmwsdD0+e3RoaXMuX2Fzc2V0Q2FjaGVbZS5tb3Rpb25Db250cm9sbGVyLmFzc2V0VXJsXT10LG49dC5zY2VuZS5jbG9uZSgpLHAoZSxuKX0sbnVsbCwoKT0+e3Rocm93IG5ldyBFcnJvcihgQXNzZXQgJHtlLm1vdGlvbkNvbnRyb2xsZXIuYXNzZXRVcmx9IG1pc3Npbmcgb3IgbWFsZm9ybWVkLmApfSl9fSkuY2F0Y2godD0+e2NvbnNvbGUud2Fybih0KX0pfSksdC5hZGRFdmVudExpc3RlbmVyKFwiZGlzY29ubmVjdGVkXCIsKCk9PntlLm1vdGlvbkNvbnRyb2xsZXI9bnVsbCxlLnJlbW92ZShuKSxuPW51bGx9KSxlfX0sdH0oKX0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO24ucihlKSxuLmQoZSxcIkFuaW1hdGlvbkFjdGlvblwiLChmdW5jdGlvbigpe3JldHVybiByfSkpO2NsYXNzIHJ7Y29uc3RydWN0b3IodCxlLG49bnVsbCxyPWUuYmxlbmRNb2RlKXt0aGlzLl9taXhlcj10LHRoaXMuX2NsaXA9ZSx0aGlzLl9sb2NhbFJvb3Q9bix0aGlzLmJsZW5kTW9kZT1yO2NvbnN0IGk9ZS50cmFja3Msbz1pLmxlbmd0aCxhPW5ldyBBcnJheShvKSxzPXtlbmRpbmdTdGFydDoyNDAwLGVuZGluZ0VuZDoyNDAwfTtmb3IobGV0IHQ9MDt0IT09bzsrK3Qpe2NvbnN0IGU9aVt0XS5jcmVhdGVJbnRlcnBvbGFudChudWxsKTthW3RdPWUsZS5zZXR0aW5ncz1zfXRoaXMuX2ludGVycG9sYW50U2V0dGluZ3M9cyx0aGlzLl9pbnRlcnBvbGFudHM9YSx0aGlzLl9wcm9wZXJ0eUJpbmRpbmdzPW5ldyBBcnJheShvKSx0aGlzLl9jYWNoZUluZGV4PW51bGwsdGhpcy5fYnlDbGlwQ2FjaGVJbmRleD1udWxsLHRoaXMuX3RpbWVTY2FsZUludGVycG9sYW50PW51bGwsdGhpcy5fd2VpZ2h0SW50ZXJwb2xhbnQ9bnVsbCx0aGlzLmxvb3A9MjIwMSx0aGlzLl9sb29wQ291bnQ9LTEsdGhpcy5fc3RhcnRUaW1lPW51bGwsdGhpcy50aW1lPTAsdGhpcy50aW1lU2NhbGU9MSx0aGlzLl9lZmZlY3RpdmVUaW1lU2NhbGU9MSx0aGlzLndlaWdodD0xLHRoaXMuX2VmZmVjdGl2ZVdlaWdodD0xLHRoaXMucmVwZXRpdGlvbnM9MS8wLHRoaXMucGF1c2VkPSExLHRoaXMuZW5hYmxlZD0hMCx0aGlzLmNsYW1wV2hlbkZpbmlzaGVkPSExLHRoaXMuemVyb1Nsb3BlQXRTdGFydD0hMCx0aGlzLnplcm9TbG9wZUF0RW5kPSEwfXBsYXkoKXtyZXR1cm4gdGhpcy5fbWl4ZXIuX2FjdGl2YXRlQWN0aW9uKHRoaXMpLHRoaXN9c3RvcCgpe3JldHVybiB0aGlzLl9taXhlci5fZGVhY3RpdmF0ZUFjdGlvbih0aGlzKSx0aGlzLnJlc2V0KCl9cmVzZXQoKXtyZXR1cm4gdGhpcy5wYXVzZWQ9ITEsdGhpcy5lbmFibGVkPSEwLHRoaXMudGltZT0wLHRoaXMuX2xvb3BDb3VudD0tMSx0aGlzLl9zdGFydFRpbWU9bnVsbCx0aGlzLnN0b3BGYWRpbmcoKS5zdG9wV2FycGluZygpfWlzUnVubmluZygpe3JldHVybiB0aGlzLmVuYWJsZWQmJiF0aGlzLnBhdXNlZCYmMCE9PXRoaXMudGltZVNjYWxlJiZudWxsPT09dGhpcy5fc3RhcnRUaW1lJiZ0aGlzLl9taXhlci5faXNBY3RpdmVBY3Rpb24odGhpcyl9aXNTY2hlZHVsZWQoKXtyZXR1cm4gdGhpcy5fbWl4ZXIuX2lzQWN0aXZlQWN0aW9uKHRoaXMpfXN0YXJ0QXQodCl7cmV0dXJuIHRoaXMuX3N0YXJ0VGltZT10LHRoaXN9c2V0TG9vcCh0LGUpe3JldHVybiB0aGlzLmxvb3A9dCx0aGlzLnJlcGV0aXRpb25zPWUsdGhpc31zZXRFZmZlY3RpdmVXZWlnaHQodCl7cmV0dXJuIHRoaXMud2VpZ2h0PXQsdGhpcy5fZWZmZWN0aXZlV2VpZ2h0PXRoaXMuZW5hYmxlZD90OjAsdGhpcy5zdG9wRmFkaW5nKCl9Z2V0RWZmZWN0aXZlV2VpZ2h0KCl7cmV0dXJuIHRoaXMuX2VmZmVjdGl2ZVdlaWdodH1mYWRlSW4odCl7cmV0dXJuIHRoaXMuX3NjaGVkdWxlRmFkaW5nKHQsMCwxKX1mYWRlT3V0KHQpe3JldHVybiB0aGlzLl9zY2hlZHVsZUZhZGluZyh0LDEsMCl9Y3Jvc3NGYWRlRnJvbSh0LGUsbil7aWYodC5mYWRlT3V0KGUpLHRoaXMuZmFkZUluKGUpLG4pe2NvbnN0IG49dGhpcy5fY2xpcC5kdXJhdGlvbixyPXQuX2NsaXAuZHVyYXRpb24saT1yL24sbz1uL3I7dC53YXJwKDEsaSxlKSx0aGlzLndhcnAobywxLGUpfXJldHVybiB0aGlzfWNyb3NzRmFkZVRvKHQsZSxuKXtyZXR1cm4gdC5jcm9zc0ZhZGVGcm9tKHRoaXMsZSxuKX1zdG9wRmFkaW5nKCl7Y29uc3QgdD10aGlzLl93ZWlnaHRJbnRlcnBvbGFudDtyZXR1cm4gbnVsbCE9PXQmJih0aGlzLl93ZWlnaHRJbnRlcnBvbGFudD1udWxsLHRoaXMuX21peGVyLl90YWtlQmFja0NvbnRyb2xJbnRlcnBvbGFudCh0KSksdGhpc31zZXRFZmZlY3RpdmVUaW1lU2NhbGUodCl7cmV0dXJuIHRoaXMudGltZVNjYWxlPXQsdGhpcy5fZWZmZWN0aXZlVGltZVNjYWxlPXRoaXMucGF1c2VkPzA6dCx0aGlzLnN0b3BXYXJwaW5nKCl9Z2V0RWZmZWN0aXZlVGltZVNjYWxlKCl7cmV0dXJuIHRoaXMuX2VmZmVjdGl2ZVRpbWVTY2FsZX1zZXREdXJhdGlvbih0KXtyZXR1cm4gdGhpcy50aW1lU2NhbGU9dGhpcy5fY2xpcC5kdXJhdGlvbi90LHRoaXMuc3RvcFdhcnBpbmcoKX1zeW5jV2l0aCh0KXtyZXR1cm4gdGhpcy50aW1lPXQudGltZSx0aGlzLnRpbWVTY2FsZT10LnRpbWVTY2FsZSx0aGlzLnN0b3BXYXJwaW5nKCl9aGFsdCh0KXtyZXR1cm4gdGhpcy53YXJwKHRoaXMuX2VmZmVjdGl2ZVRpbWVTY2FsZSwwLHQpfXdhcnAodCxlLG4pe2NvbnN0IHI9dGhpcy5fbWl4ZXIsaT1yLnRpbWUsbz10aGlzLnRpbWVTY2FsZTtsZXQgYT10aGlzLl90aW1lU2NhbGVJbnRlcnBvbGFudDtudWxsPT09YSYmKGE9ci5fbGVuZENvbnRyb2xJbnRlcnBvbGFudCgpLHRoaXMuX3RpbWVTY2FsZUludGVycG9sYW50PWEpO2NvbnN0IHM9YS5wYXJhbWV0ZXJQb3NpdGlvbnMsYz1hLnNhbXBsZVZhbHVlcztyZXR1cm4gc1swXT1pLHNbMV09aStuLGNbMF09dC9vLGNbMV09ZS9vLHRoaXN9c3RvcFdhcnBpbmcoKXtjb25zdCB0PXRoaXMuX3RpbWVTY2FsZUludGVycG9sYW50O3JldHVybiBudWxsIT09dCYmKHRoaXMuX3RpbWVTY2FsZUludGVycG9sYW50PW51bGwsdGhpcy5fbWl4ZXIuX3Rha2VCYWNrQ29udHJvbEludGVycG9sYW50KHQpKSx0aGlzfWdldE1peGVyKCl7cmV0dXJuIHRoaXMuX21peGVyfWdldENsaXAoKXtyZXR1cm4gdGhpcy5fY2xpcH1nZXRSb290KCl7cmV0dXJuIHRoaXMuX2xvY2FsUm9vdHx8dGhpcy5fbWl4ZXIuX3Jvb3R9X3VwZGF0ZSh0LGUsbixyKXtpZighdGhpcy5lbmFibGVkKXJldHVybiB2b2lkIHRoaXMuX3VwZGF0ZVdlaWdodCh0KTtjb25zdCBpPXRoaXMuX3N0YXJ0VGltZTtpZihudWxsIT09aSl7Y29uc3Qgcj0odC1pKSpuO2lmKHI8MHx8MD09PW4pcmV0dXJuO3RoaXMuX3N0YXJ0VGltZT1udWxsLGU9bipyfWUqPXRoaXMuX3VwZGF0ZVRpbWVTY2FsZSh0KTtjb25zdCBvPXRoaXMuX3VwZGF0ZVRpbWUoZSksYT10aGlzLl91cGRhdGVXZWlnaHQodCk7aWYoYT4wKXtjb25zdCB0PXRoaXMuX2ludGVycG9sYW50cyxlPXRoaXMuX3Byb3BlcnR5QmluZGluZ3M7c3dpdGNoKHRoaXMuYmxlbmRNb2RlKXtjYXNlIDI1MDE6Zm9yKGxldCBuPTAscj10Lmxlbmd0aDtuIT09cjsrK24pdFtuXS5ldmFsdWF0ZShvKSxlW25dLmFjY3VtdWxhdGVBZGRpdGl2ZShhKTticmVhaztjYXNlIDI1MDA6ZGVmYXVsdDpmb3IobGV0IG49MCxpPXQubGVuZ3RoO24hPT1pOysrbil0W25dLmV2YWx1YXRlKG8pLGVbbl0uYWNjdW11bGF0ZShyLGEpfX19X3VwZGF0ZVdlaWdodCh0KXtsZXQgZT0wO2lmKHRoaXMuZW5hYmxlZCl7ZT10aGlzLndlaWdodDtjb25zdCBuPXRoaXMuX3dlaWdodEludGVycG9sYW50O2lmKG51bGwhPT1uKXtjb25zdCByPW4uZXZhbHVhdGUodClbMF07ZSo9cix0Pm4ucGFyYW1ldGVyUG9zaXRpb25zWzFdJiYodGhpcy5zdG9wRmFkaW5nKCksMD09PXImJih0aGlzLmVuYWJsZWQ9ITEpKX19cmV0dXJuIHRoaXMuX2VmZmVjdGl2ZVdlaWdodD1lLGV9X3VwZGF0ZVRpbWVTY2FsZSh0KXtsZXQgZT0wO2lmKCF0aGlzLnBhdXNlZCl7ZT10aGlzLnRpbWVTY2FsZTtjb25zdCBuPXRoaXMuX3RpbWVTY2FsZUludGVycG9sYW50O2lmKG51bGwhPT1uKXtlKj1uLmV2YWx1YXRlKHQpWzBdLHQ+bi5wYXJhbWV0ZXJQb3NpdGlvbnNbMV0mJih0aGlzLnN0b3BXYXJwaW5nKCksMD09PWU/dGhpcy5wYXVzZWQ9ITA6dGhpcy50aW1lU2NhbGU9ZSl9fXJldHVybiB0aGlzLl9lZmZlY3RpdmVUaW1lU2NhbGU9ZSxlfV91cGRhdGVUaW1lKHQpe2NvbnN0IGU9dGhpcy5fY2xpcC5kdXJhdGlvbixuPXRoaXMubG9vcDtsZXQgcj10aGlzLnRpbWUrdCxpPXRoaXMuX2xvb3BDb3VudDtjb25zdCBvPTIyMDI9PT1uO2lmKDA9PT10KXJldHVybi0xPT09aT9yOm8mJjE9PSgxJmkpP2UtcjpyO2lmKDIyMDA9PT1uKXstMT09PWkmJih0aGlzLl9sb29wQ291bnQ9MCx0aGlzLl9zZXRFbmRpbmdzKCEwLCEwLCExKSk7dDp7aWYocj49ZSlyPWU7ZWxzZXtpZighKHI8MCkpe3RoaXMudGltZT1yO2JyZWFrIHR9cj0wfXRoaXMuY2xhbXBXaGVuRmluaXNoZWQ/dGhpcy5wYXVzZWQ9ITA6dGhpcy5lbmFibGVkPSExLHRoaXMudGltZT1yLHRoaXMuX21peGVyLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJmaW5pc2hlZFwiLGFjdGlvbjp0aGlzLGRpcmVjdGlvbjp0PDA/LTE6MX0pfX1lbHNle2lmKC0xPT09aSYmKHQ+PTA/KGk9MCx0aGlzLl9zZXRFbmRpbmdzKCEwLDA9PT10aGlzLnJlcGV0aXRpb25zLG8pKTp0aGlzLl9zZXRFbmRpbmdzKDA9PT10aGlzLnJlcGV0aXRpb25zLCEwLG8pKSxyPj1lfHxyPDApe2NvbnN0IG49TWF0aC5mbG9vcihyL2UpO3ItPWUqbixpKz1NYXRoLmFicyhuKTtjb25zdCBhPXRoaXMucmVwZXRpdGlvbnMtaTtpZihhPD0wKXRoaXMuY2xhbXBXaGVuRmluaXNoZWQ/dGhpcy5wYXVzZWQ9ITA6dGhpcy5lbmFibGVkPSExLHI9dD4wP2U6MCx0aGlzLnRpbWU9cix0aGlzLl9taXhlci5kaXNwYXRjaEV2ZW50KHt0eXBlOlwiZmluaXNoZWRcIixhY3Rpb246dGhpcyxkaXJlY3Rpb246dD4wPzE6LTF9KTtlbHNle2lmKDE9PT1hKXtjb25zdCBlPXQ8MDt0aGlzLl9zZXRFbmRpbmdzKGUsIWUsbyl9ZWxzZSB0aGlzLl9zZXRFbmRpbmdzKCExLCExLG8pO3RoaXMuX2xvb3BDb3VudD1pLHRoaXMudGltZT1yLHRoaXMuX21peGVyLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJsb29wXCIsYWN0aW9uOnRoaXMsbG9vcERlbHRhOm59KX19ZWxzZSB0aGlzLnRpbWU9cjtpZihvJiYxPT0oMSZpKSlyZXR1cm4gZS1yfXJldHVybiByfV9zZXRFbmRpbmdzKHQsZSxuKXtjb25zdCByPXRoaXMuX2ludGVycG9sYW50U2V0dGluZ3M7bj8oci5lbmRpbmdTdGFydD0yNDAxLHIuZW5kaW5nRW5kPTI0MDEpOihyLmVuZGluZ1N0YXJ0PXQ/dGhpcy56ZXJvU2xvcGVBdFN0YXJ0PzI0MDE6MjQwMDoyNDAyLHIuZW5kaW5nRW5kPWU/dGhpcy56ZXJvU2xvcGVBdEVuZD8yNDAxOjI0MDA6MjQwMil9X3NjaGVkdWxlRmFkaW5nKHQsZSxuKXtjb25zdCByPXRoaXMuX21peGVyLGk9ci50aW1lO2xldCBvPXRoaXMuX3dlaWdodEludGVycG9sYW50O251bGw9PT1vJiYobz1yLl9sZW5kQ29udHJvbEludGVycG9sYW50KCksdGhpcy5fd2VpZ2h0SW50ZXJwb2xhbnQ9byk7Y29uc3QgYT1vLnBhcmFtZXRlclBvc2l0aW9ucyxzPW8uc2FtcGxlVmFsdWVzO3JldHVybiBhWzBdPWksc1swXT1lLGFbMV09aSt0LHNbMV09bix0aGlzfX19LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtuLnIoZSksbi5kKGUsXCJHbGl0Y2hQYXNzXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGF9KSk7dmFyIHI9bigwKSxpPW4oMSksbz17dW5pZm9ybXM6e3REaWZmdXNlOnt2YWx1ZTpudWxsfSx0RGlzcDp7dmFsdWU6bnVsbH0sYnlwOnt2YWx1ZTowfSxhbW91bnQ6e3ZhbHVlOi4wOH0sYW5nbGU6e3ZhbHVlOi4wMn0sc2VlZDp7dmFsdWU6LjAyfSxzZWVkX3g6e3ZhbHVlOi4wMn0sc2VlZF95Ont2YWx1ZTouMDJ9LGRpc3RvcnRpb25feDp7dmFsdWU6LjV9LGRpc3RvcnRpb25feTp7dmFsdWU6LjZ9LGNvbF9zOnt2YWx1ZTouMDV9fSx2ZXJ0ZXhTaGFkZXI6W1widmFyeWluZyB2ZWMyIHZVdjtcIixcInZvaWQgbWFpbigpIHtcIixcIlxcdHZVdiA9IHV2O1wiLFwiXFx0Z2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogbW9kZWxWaWV3TWF0cml4ICogdmVjNCggcG9zaXRpb24sIDEuMCApO1wiLFwifVwiXS5qb2luKFwiXFxuXCIpLGZyYWdtZW50U2hhZGVyOltcInVuaWZvcm0gaW50IGJ5cDtcIixcInVuaWZvcm0gc2FtcGxlcjJEIHREaWZmdXNlO1wiLFwidW5pZm9ybSBzYW1wbGVyMkQgdERpc3A7XCIsXCJ1bmlmb3JtIGZsb2F0IGFtb3VudDtcIixcInVuaWZvcm0gZmxvYXQgYW5nbGU7XCIsXCJ1bmlmb3JtIGZsb2F0IHNlZWQ7XCIsXCJ1bmlmb3JtIGZsb2F0IHNlZWRfeDtcIixcInVuaWZvcm0gZmxvYXQgc2VlZF95O1wiLFwidW5pZm9ybSBmbG9hdCBkaXN0b3J0aW9uX3g7XCIsXCJ1bmlmb3JtIGZsb2F0IGRpc3RvcnRpb25feTtcIixcInVuaWZvcm0gZmxvYXQgY29sX3M7XCIsXCJ2YXJ5aW5nIHZlYzIgdlV2O1wiLFwiZmxvYXQgcmFuZCh2ZWMyIGNvKXtcIixcIlxcdHJldHVybiBmcmFjdChzaW4oZG90KGNvLnh5ICx2ZWMyKDEyLjk4OTgsNzguMjMzKSkpICogNDM3NTguNTQ1Myk7XCIsXCJ9XCIsXCJ2b2lkIG1haW4oKSB7XCIsXCJcXHRpZihieXA8MSkge1wiLFwiXFx0XFx0dmVjMiBwID0gdlV2O1wiLFwiXFx0XFx0ZmxvYXQgeHMgPSBmbG9vcihnbF9GcmFnQ29vcmQueCAvIDAuNSk7XCIsXCJcXHRcXHRmbG9hdCB5cyA9IGZsb29yKGdsX0ZyYWdDb29yZC55IC8gMC41KTtcIixcIlxcdFxcdHZlYzQgbm9ybWFsID0gdGV4dHVyZTJEICh0RGlzcCwgcCpzZWVkKnNlZWQpO1wiLFwiXFx0XFx0aWYocC55PGRpc3RvcnRpb25feCtjb2xfcyAmJiBwLnk+ZGlzdG9ydGlvbl94LWNvbF9zKnNlZWQpIHtcIixcIlxcdFxcdFxcdGlmKHNlZWRfeD4wLil7XCIsXCJcXHRcXHRcXHRcXHRwLnkgPSAxLiAtIChwLnkgKyBkaXN0b3J0aW9uX3kpO1wiLFwiXFx0XFx0XFx0fVwiLFwiXFx0XFx0XFx0ZWxzZSB7XCIsXCJcXHRcXHRcXHRcXHRwLnkgPSBkaXN0b3J0aW9uX3k7XCIsXCJcXHRcXHRcXHR9XCIsXCJcXHRcXHR9XCIsXCJcXHRcXHRpZihwLng8ZGlzdG9ydGlvbl95K2NvbF9zICYmIHAueD5kaXN0b3J0aW9uX3ktY29sX3Mqc2VlZCkge1wiLFwiXFx0XFx0XFx0aWYoc2VlZF95PjAuKXtcIixcIlxcdFxcdFxcdFxcdHAueD1kaXN0b3J0aW9uX3g7XCIsXCJcXHRcXHRcXHR9XCIsXCJcXHRcXHRcXHRlbHNlIHtcIixcIlxcdFxcdFxcdFxcdHAueCA9IDEuIC0gKHAueCArIGRpc3RvcnRpb25feCk7XCIsXCJcXHRcXHRcXHR9XCIsXCJcXHRcXHR9XCIsXCJcXHRcXHRwLngrPW5vcm1hbC54KnNlZWRfeCooc2VlZC81Lik7XCIsXCJcXHRcXHRwLnkrPW5vcm1hbC55KnNlZWRfeSooc2VlZC81Lik7XCIsXCJcXHRcXHR2ZWMyIG9mZnNldCA9IGFtb3VudCAqIHZlYzIoIGNvcyhhbmdsZSksIHNpbihhbmdsZSkpO1wiLFwiXFx0XFx0dmVjNCBjciA9IHRleHR1cmUyRCh0RGlmZnVzZSwgcCArIG9mZnNldCk7XCIsXCJcXHRcXHR2ZWM0IGNnYSA9IHRleHR1cmUyRCh0RGlmZnVzZSwgcCk7XCIsXCJcXHRcXHR2ZWM0IGNiID0gdGV4dHVyZTJEKHREaWZmdXNlLCBwIC0gb2Zmc2V0KTtcIixcIlxcdFxcdGdsX0ZyYWdDb2xvciA9IHZlYzQoY3IuciwgY2dhLmcsIGNiLmIsIGNnYS5hKTtcIixcIlxcdFxcdHZlYzQgc25vdyA9IDIwMC4qYW1vdW50KnZlYzQocmFuZCh2ZWMyKHhzICogc2VlZCx5cyAqIHNlZWQqNTAuKSkqMC4yKTtcIixcIlxcdFxcdGdsX0ZyYWdDb2xvciA9IGdsX0ZyYWdDb2xvcisgc25vdztcIixcIlxcdH1cIixcIlxcdGVsc2Uge1wiLFwiXFx0XFx0Z2xfRnJhZ0NvbG9yPXRleHR1cmUyRCAodERpZmZ1c2UsIHZVdik7XCIsXCJcXHR9XCIsXCJ9XCJdLmpvaW4oXCJcXG5cIil9LGE9ZnVuY3Rpb24odCl7aS5hLmNhbGwodGhpcyksdm9pZCAwPT09byYmY29uc29sZS5lcnJvcihcIkdsaXRjaFBhc3MgcmVsaWVzIG9uIERpZ2l0YWxHbGl0Y2hcIik7dmFyIGU9bzt0aGlzLnVuaWZvcm1zPXIuVW5pZm9ybXNVdGlscy5jbG9uZShlLnVuaWZvcm1zKSxudWxsPT10JiYodD02NCksdGhpcy51bmlmb3Jtcy50RGlzcC52YWx1ZT10aGlzLmdlbmVyYXRlSGVpZ2h0bWFwKHQpLHRoaXMubWF0ZXJpYWw9bmV3IHIuU2hhZGVyTWF0ZXJpYWwoe3VuaWZvcm1zOnRoaXMudW5pZm9ybXMsdmVydGV4U2hhZGVyOmUudmVydGV4U2hhZGVyLGZyYWdtZW50U2hhZGVyOmUuZnJhZ21lbnRTaGFkZXJ9KSx0aGlzLmZzUXVhZD1uZXcgaS5hLkZ1bGxTY3JlZW5RdWFkKHRoaXMubWF0ZXJpYWwpLHRoaXMuZ29XaWxkPSExLHRoaXMuY3VyRj0wLHRoaXMuZ2VuZXJhdGVUcmlnZ2VyKCl9O2EucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShpLmEucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6YSxyZW5kZXI6ZnVuY3Rpb24odCxlLG4pe3RoaXMudW5pZm9ybXMudERpZmZ1c2UudmFsdWU9bi50ZXh0dXJlLHRoaXMudW5pZm9ybXMuc2VlZC52YWx1ZT1NYXRoLnJhbmRvbSgpLHRoaXMudW5pZm9ybXMuYnlwLnZhbHVlPTAsdGhpcy5jdXJGJXRoaXMucmFuZFg9PTB8fDE9PXRoaXMuZ29XaWxkPyh0aGlzLnVuaWZvcm1zLmFtb3VudC52YWx1ZT1NYXRoLnJhbmRvbSgpLzMwLHRoaXMudW5pZm9ybXMuYW5nbGUudmFsdWU9ci5NYXRoVXRpbHMucmFuZEZsb2F0KC1NYXRoLlBJLE1hdGguUEkpLHRoaXMudW5pZm9ybXMuc2VlZF94LnZhbHVlPXIuTWF0aFV0aWxzLnJhbmRGbG9hdCgtMSwxKSx0aGlzLnVuaWZvcm1zLnNlZWRfeS52YWx1ZT1yLk1hdGhVdGlscy5yYW5kRmxvYXQoLTEsMSksdGhpcy51bmlmb3Jtcy5kaXN0b3J0aW9uX3gudmFsdWU9ci5NYXRoVXRpbHMucmFuZEZsb2F0KDAsMSksdGhpcy51bmlmb3Jtcy5kaXN0b3J0aW9uX3kudmFsdWU9ci5NYXRoVXRpbHMucmFuZEZsb2F0KDAsMSksdGhpcy5jdXJGPTAsdGhpcy5nZW5lcmF0ZVRyaWdnZXIoKSk6dGhpcy5jdXJGJXRoaXMucmFuZFg8dGhpcy5yYW5kWC81Pyh0aGlzLnVuaWZvcm1zLmFtb3VudC52YWx1ZT1NYXRoLnJhbmRvbSgpLzkwLHRoaXMudW5pZm9ybXMuYW5nbGUudmFsdWU9ci5NYXRoVXRpbHMucmFuZEZsb2F0KC1NYXRoLlBJLE1hdGguUEkpLHRoaXMudW5pZm9ybXMuZGlzdG9ydGlvbl94LnZhbHVlPXIuTWF0aFV0aWxzLnJhbmRGbG9hdCgwLDEpLHRoaXMudW5pZm9ybXMuZGlzdG9ydGlvbl95LnZhbHVlPXIuTWF0aFV0aWxzLnJhbmRGbG9hdCgwLDEpLHRoaXMudW5pZm9ybXMuc2VlZF94LnZhbHVlPXIuTWF0aFV0aWxzLnJhbmRGbG9hdCgtLjMsLjMpLHRoaXMudW5pZm9ybXMuc2VlZF95LnZhbHVlPXIuTWF0aFV0aWxzLnJhbmRGbG9hdCgtLjMsLjMpKTowPT10aGlzLmdvV2lsZCYmKHRoaXMudW5pZm9ybXMuYnlwLnZhbHVlPTEpLHRoaXMuY3VyRisrLHRoaXMucmVuZGVyVG9TY3JlZW4/KHQuc2V0UmVuZGVyVGFyZ2V0KG51bGwpLHRoaXMuZnNRdWFkLnJlbmRlcih0KSk6KHQuc2V0UmVuZGVyVGFyZ2V0KGUpLHRoaXMuY2xlYXImJnQuY2xlYXIoKSx0aGlzLmZzUXVhZC5yZW5kZXIodCkpfSxnZW5lcmF0ZVRyaWdnZXI6ZnVuY3Rpb24oKXt0aGlzLnJhbmRYPXIuTWF0aFV0aWxzLnJhbmRJbnQoMTIwLDI0MCl9LGdlbmVyYXRlSGVpZ2h0bWFwOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1uZXcgRmxvYXQzMkFycmF5KHQqdCozKSxuPXQqdCxpPTA7aTxuO2krKyl7dmFyIG89ci5NYXRoVXRpbHMucmFuZEZsb2F0KDAsMSk7ZVszKmkrMF09byxlWzMqaSsxXT1vLGVbMyppKzJdPW99cmV0dXJuIG5ldyByLkRhdGFUZXh0dXJlKGUsdCx0LHIuUkdCRm9ybWF0LHIuRmxvYXRUeXBlKX19KX1dKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiLCJtb2R1bGUuZXhwb3J0cyA9ICgoKSA9PiB7XG4gIGlmICh0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHJldHVybiBzZWxmO1xuICB9IGVsc2UgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICByZXR1cm4gd2luZG93O1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCk7XG4gIH1cbn0pKCk7XG4iLCJjb25zdCBTb2NrZXQgPSByZXF1aXJlKFwiLi9zb2NrZXRcIik7XG5cbm1vZHVsZS5leHBvcnRzID0gKHVyaSwgb3B0cykgPT4gbmV3IFNvY2tldCh1cmksIG9wdHMpO1xuXG4vKipcbiAqIEV4cG9zZSBkZXBzIGZvciBsZWdhY3kgY29tcGF0aWJpbGl0eVxuICogYW5kIHN0YW5kYWxvbmUgYnJvd3NlciBhY2Nlc3MuXG4gKi9cblxubW9kdWxlLmV4cG9ydHMuU29ja2V0ID0gU29ja2V0O1xubW9kdWxlLmV4cG9ydHMucHJvdG9jb2wgPSBTb2NrZXQucHJvdG9jb2w7IC8vIHRoaXMgaXMgYW4gaW50XG5tb2R1bGUuZXhwb3J0cy5UcmFuc3BvcnQgPSByZXF1aXJlKFwiLi90cmFuc3BvcnRcIik7XG5tb2R1bGUuZXhwb3J0cy50cmFuc3BvcnRzID0gcmVxdWlyZShcIi4vdHJhbnNwb3J0cy9pbmRleFwiKTtcbm1vZHVsZS5leHBvcnRzLnBhcnNlciA9IHJlcXVpcmUoXCJlbmdpbmUuaW8tcGFyc2VyXCIpO1xuIiwiY29uc3QgdHJhbnNwb3J0cyA9IHJlcXVpcmUoXCIuL3RyYW5zcG9ydHMvaW5kZXhcIik7XG5jb25zdCBFbWl0dGVyID0gcmVxdWlyZShcImNvbXBvbmVudC1lbWl0dGVyXCIpO1xuY29uc3QgZGVidWcgPSByZXF1aXJlKFwiZGVidWdcIikoXCJlbmdpbmUuaW8tY2xpZW50OnNvY2tldFwiKTtcbmNvbnN0IHBhcnNlciA9IHJlcXVpcmUoXCJlbmdpbmUuaW8tcGFyc2VyXCIpO1xuY29uc3QgcGFyc2V1cmkgPSByZXF1aXJlKFwicGFyc2V1cmlcIik7XG5jb25zdCBwYXJzZXFzID0gcmVxdWlyZShcInBhcnNlcXNcIik7XG5cbmNsYXNzIFNvY2tldCBleHRlbmRzIEVtaXR0ZXIge1xuICAvKipcbiAgICogU29ja2V0IGNvbnN0cnVjdG9yLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ3xPYmplY3R9IHVyaSBvciBvcHRpb25zXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih1cmksIG9wdHMgPSB7fSkge1xuICAgIHN1cGVyKCk7XG5cbiAgICBpZiAodXJpICYmIFwib2JqZWN0XCIgPT09IHR5cGVvZiB1cmkpIHtcbiAgICAgIG9wdHMgPSB1cmk7XG4gICAgICB1cmkgPSBudWxsO1xuICAgIH1cblxuICAgIGlmICh1cmkpIHtcbiAgICAgIHVyaSA9IHBhcnNldXJpKHVyaSk7XG4gICAgICBvcHRzLmhvc3RuYW1lID0gdXJpLmhvc3Q7XG4gICAgICBvcHRzLnNlY3VyZSA9IHVyaS5wcm90b2NvbCA9PT0gXCJodHRwc1wiIHx8IHVyaS5wcm90b2NvbCA9PT0gXCJ3c3NcIjtcbiAgICAgIG9wdHMucG9ydCA9IHVyaS5wb3J0O1xuICAgICAgaWYgKHVyaS5xdWVyeSkgb3B0cy5xdWVyeSA9IHVyaS5xdWVyeTtcbiAgICB9IGVsc2UgaWYgKG9wdHMuaG9zdCkge1xuICAgICAgb3B0cy5ob3N0bmFtZSA9IHBhcnNldXJpKG9wdHMuaG9zdCkuaG9zdDtcbiAgICB9XG5cbiAgICB0aGlzLnNlY3VyZSA9XG4gICAgICBudWxsICE9IG9wdHMuc2VjdXJlXG4gICAgICAgID8gb3B0cy5zZWN1cmVcbiAgICAgICAgOiB0eXBlb2YgbG9jYXRpb24gIT09IFwidW5kZWZpbmVkXCIgJiYgXCJodHRwczpcIiA9PT0gbG9jYXRpb24ucHJvdG9jb2w7XG5cbiAgICBpZiAob3B0cy5ob3N0bmFtZSAmJiAhb3B0cy5wb3J0KSB7XG4gICAgICAvLyBpZiBubyBwb3J0IGlzIHNwZWNpZmllZCBtYW51YWxseSwgdXNlIHRoZSBwcm90b2NvbCBkZWZhdWx0XG4gICAgICBvcHRzLnBvcnQgPSB0aGlzLnNlY3VyZSA/IFwiNDQzXCIgOiBcIjgwXCI7XG4gICAgfVxuXG4gICAgdGhpcy5ob3N0bmFtZSA9XG4gICAgICBvcHRzLmhvc3RuYW1lIHx8XG4gICAgICAodHlwZW9mIGxvY2F0aW9uICE9PSBcInVuZGVmaW5lZFwiID8gbG9jYXRpb24uaG9zdG5hbWUgOiBcImxvY2FsaG9zdFwiKTtcbiAgICB0aGlzLnBvcnQgPVxuICAgICAgb3B0cy5wb3J0IHx8XG4gICAgICAodHlwZW9mIGxvY2F0aW9uICE9PSBcInVuZGVmaW5lZFwiICYmIGxvY2F0aW9uLnBvcnRcbiAgICAgICAgPyBsb2NhdGlvbi5wb3J0XG4gICAgICAgIDogdGhpcy5zZWN1cmVcbiAgICAgICAgPyA0NDNcbiAgICAgICAgOiA4MCk7XG5cbiAgICB0aGlzLnRyYW5zcG9ydHMgPSBvcHRzLnRyYW5zcG9ydHMgfHwgW1wicG9sbGluZ1wiLCBcIndlYnNvY2tldFwiXTtcbiAgICB0aGlzLnJlYWR5U3RhdGUgPSBcIlwiO1xuICAgIHRoaXMud3JpdGVCdWZmZXIgPSBbXTtcbiAgICB0aGlzLnByZXZCdWZmZXJMZW4gPSAwO1xuXG4gICAgdGhpcy5vcHRzID0gT2JqZWN0LmFzc2lnbihcbiAgICAgIHtcbiAgICAgICAgcGF0aDogXCIvZW5naW5lLmlvXCIsXG4gICAgICAgIGFnZW50OiBmYWxzZSxcbiAgICAgICAgd2l0aENyZWRlbnRpYWxzOiBmYWxzZSxcbiAgICAgICAgdXBncmFkZTogdHJ1ZSxcbiAgICAgICAganNvbnA6IHRydWUsXG4gICAgICAgIHRpbWVzdGFtcFBhcmFtOiBcInRcIixcbiAgICAgICAgcmVtZW1iZXJVcGdyYWRlOiBmYWxzZSxcbiAgICAgICAgcmVqZWN0VW5hdXRob3JpemVkOiB0cnVlLFxuICAgICAgICBwZXJNZXNzYWdlRGVmbGF0ZToge1xuICAgICAgICAgIHRocmVzaG9sZDogMTAyNFxuICAgICAgICB9LFxuICAgICAgICB0cmFuc3BvcnRPcHRpb25zOiB7fSxcbiAgICAgICAgY2xvc2VPbkJlZm9yZXVubG9hZDogdHJ1ZVxuICAgICAgfSxcbiAgICAgIG9wdHNcbiAgICApO1xuXG4gICAgdGhpcy5vcHRzLnBhdGggPSB0aGlzLm9wdHMucGF0aC5yZXBsYWNlKC9cXC8kLywgXCJcIikgKyBcIi9cIjtcblxuICAgIGlmICh0eXBlb2YgdGhpcy5vcHRzLnF1ZXJ5ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICB0aGlzLm9wdHMucXVlcnkgPSBwYXJzZXFzLmRlY29kZSh0aGlzLm9wdHMucXVlcnkpO1xuICAgIH1cblxuICAgIC8vIHNldCBvbiBoYW5kc2hha2VcbiAgICB0aGlzLmlkID0gbnVsbDtcbiAgICB0aGlzLnVwZ3JhZGVzID0gbnVsbDtcbiAgICB0aGlzLnBpbmdJbnRlcnZhbCA9IG51bGw7XG4gICAgdGhpcy5waW5nVGltZW91dCA9IG51bGw7XG5cbiAgICAvLyBzZXQgb24gaGVhcnRiZWF0XG4gICAgdGhpcy5waW5nVGltZW91dFRpbWVyID0gbnVsbDtcblxuICAgIGlmICh0eXBlb2YgYWRkRXZlbnRMaXN0ZW5lciA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICBpZiAodGhpcy5vcHRzLmNsb3NlT25CZWZvcmV1bmxvYWQpIHtcbiAgICAgICAgLy8gRmlyZWZveCBjbG9zZXMgdGhlIGNvbm5lY3Rpb24gd2hlbiB0aGUgXCJiZWZvcmV1bmxvYWRcIiBldmVudCBpcyBlbWl0dGVkIGJ1dCBub3QgQ2hyb21lLiBUaGlzIGV2ZW50IGxpc3RlbmVyXG4gICAgICAgIC8vIGVuc3VyZXMgZXZlcnkgYnJvd3NlciBiZWhhdmVzIHRoZSBzYW1lIChubyBcImRpc2Nvbm5lY3RcIiBldmVudCBhdCB0aGUgU29ja2V0LklPIGxldmVsIHdoZW4gdGhlIHBhZ2UgaXNcbiAgICAgICAgLy8gY2xvc2VkL3JlbG9hZGVkKVxuICAgICAgICBhZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgIFwiYmVmb3JldW5sb2FkXCIsXG4gICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMudHJhbnNwb3J0KSB7XG4gICAgICAgICAgICAgIC8vIHNpbGVudGx5IGNsb3NlIHRoZSB0cmFuc3BvcnRcbiAgICAgICAgICAgICAgdGhpcy50cmFuc3BvcnQucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG4gICAgICAgICAgICAgIHRoaXMudHJhbnNwb3J0LmNsb3NlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBmYWxzZVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuaG9zdG5hbWUgIT09IFwibG9jYWxob3N0XCIpIHtcbiAgICAgICAgdGhpcy5vZmZsaW5lRXZlbnRMaXN0ZW5lciA9ICgpID0+IHtcbiAgICAgICAgICB0aGlzLm9uQ2xvc2UoXCJ0cmFuc3BvcnQgY2xvc2VcIik7XG4gICAgICAgIH07XG4gICAgICAgIGFkZEV2ZW50TGlzdGVuZXIoXCJvZmZsaW5lXCIsIHRoaXMub2ZmbGluZUV2ZW50TGlzdGVuZXIsIGZhbHNlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLm9wZW4oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIHRyYW5zcG9ydCBvZiB0aGUgZ2l2ZW4gdHlwZS5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHRyYW5zcG9ydCBuYW1lXG4gICAqIEByZXR1cm4ge1RyYW5zcG9ydH1cbiAgICogQGFwaSBwcml2YXRlXG4gICAqL1xuICBjcmVhdGVUcmFuc3BvcnQobmFtZSkge1xuICAgIGRlYnVnKCdjcmVhdGluZyB0cmFuc3BvcnQgXCIlc1wiJywgbmFtZSk7XG4gICAgY29uc3QgcXVlcnkgPSBjbG9uZSh0aGlzLm9wdHMucXVlcnkpO1xuXG4gICAgLy8gYXBwZW5kIGVuZ2luZS5pbyBwcm90b2NvbCBpZGVudGlmaWVyXG4gICAgcXVlcnkuRUlPID0gcGFyc2VyLnByb3RvY29sO1xuXG4gICAgLy8gdHJhbnNwb3J0IG5hbWVcbiAgICBxdWVyeS50cmFuc3BvcnQgPSBuYW1lO1xuXG4gICAgLy8gc2Vzc2lvbiBpZCBpZiB3ZSBhbHJlYWR5IGhhdmUgb25lXG4gICAgaWYgKHRoaXMuaWQpIHF1ZXJ5LnNpZCA9IHRoaXMuaWQ7XG5cbiAgICBjb25zdCBvcHRzID0gT2JqZWN0LmFzc2lnbihcbiAgICAgIHt9LFxuICAgICAgdGhpcy5vcHRzLnRyYW5zcG9ydE9wdGlvbnNbbmFtZV0sXG4gICAgICB0aGlzLm9wdHMsXG4gICAgICB7XG4gICAgICAgIHF1ZXJ5LFxuICAgICAgICBzb2NrZXQ6IHRoaXMsXG4gICAgICAgIGhvc3RuYW1lOiB0aGlzLmhvc3RuYW1lLFxuICAgICAgICBzZWN1cmU6IHRoaXMuc2VjdXJlLFxuICAgICAgICBwb3J0OiB0aGlzLnBvcnRcbiAgICAgIH1cbiAgICApO1xuXG4gICAgZGVidWcoXCJvcHRpb25zOiAlalwiLCBvcHRzKTtcblxuICAgIHJldHVybiBuZXcgdHJhbnNwb3J0c1tuYW1lXShvcHRzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplcyB0cmFuc3BvcnQgdG8gdXNlIGFuZCBzdGFydHMgcHJvYmUuXG4gICAqXG4gICAqIEBhcGkgcHJpdmF0ZVxuICAgKi9cbiAgb3BlbigpIHtcbiAgICBsZXQgdHJhbnNwb3J0O1xuICAgIGlmIChcbiAgICAgIHRoaXMub3B0cy5yZW1lbWJlclVwZ3JhZGUgJiZcbiAgICAgIFNvY2tldC5wcmlvcldlYnNvY2tldFN1Y2Nlc3MgJiZcbiAgICAgIHRoaXMudHJhbnNwb3J0cy5pbmRleE9mKFwid2Vic29ja2V0XCIpICE9PSAtMVxuICAgICkge1xuICAgICAgdHJhbnNwb3J0ID0gXCJ3ZWJzb2NrZXRcIjtcbiAgICB9IGVsc2UgaWYgKDAgPT09IHRoaXMudHJhbnNwb3J0cy5sZW5ndGgpIHtcbiAgICAgIC8vIEVtaXQgZXJyb3Igb24gbmV4dCB0aWNrIHNvIGl0IGNhbiBiZSBsaXN0ZW5lZCB0b1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRoaXMuZW1pdChcImVycm9yXCIsIFwiTm8gdHJhbnNwb3J0cyBhdmFpbGFibGVcIik7XG4gICAgICB9LCAwKTtcbiAgICAgIHJldHVybjtcbiAgICB9IGVsc2Uge1xuICAgICAgdHJhbnNwb3J0ID0gdGhpcy50cmFuc3BvcnRzWzBdO1xuICAgIH1cbiAgICB0aGlzLnJlYWR5U3RhdGUgPSBcIm9wZW5pbmdcIjtcblxuICAgIC8vIFJldHJ5IHdpdGggdGhlIG5leHQgdHJhbnNwb3J0IGlmIHRoZSB0cmFuc3BvcnQgaXMgZGlzYWJsZWQgKGpzb25wOiBmYWxzZSlcbiAgICB0cnkge1xuICAgICAgdHJhbnNwb3J0ID0gdGhpcy5jcmVhdGVUcmFuc3BvcnQodHJhbnNwb3J0KTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBkZWJ1ZyhcImVycm9yIHdoaWxlIGNyZWF0aW5nIHRyYW5zcG9ydDogJXNcIiwgZSk7XG4gICAgICB0aGlzLnRyYW5zcG9ydHMuc2hpZnQoKTtcbiAgICAgIHRoaXMub3BlbigpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRyYW5zcG9ydC5vcGVuKCk7XG4gICAgdGhpcy5zZXRUcmFuc3BvcnQodHJhbnNwb3J0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBjdXJyZW50IHRyYW5zcG9ydC4gRGlzYWJsZXMgdGhlIGV4aXN0aW5nIG9uZSAoaWYgYW55KS5cbiAgICpcbiAgICogQGFwaSBwcml2YXRlXG4gICAqL1xuICBzZXRUcmFuc3BvcnQodHJhbnNwb3J0KSB7XG4gICAgZGVidWcoXCJzZXR0aW5nIHRyYW5zcG9ydCAlc1wiLCB0cmFuc3BvcnQubmFtZSk7XG5cbiAgICBpZiAodGhpcy50cmFuc3BvcnQpIHtcbiAgICAgIGRlYnVnKFwiY2xlYXJpbmcgZXhpc3RpbmcgdHJhbnNwb3J0ICVzXCIsIHRoaXMudHJhbnNwb3J0Lm5hbWUpO1xuICAgICAgdGhpcy50cmFuc3BvcnQucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG4gICAgfVxuXG4gICAgLy8gc2V0IHVwIHRyYW5zcG9ydFxuICAgIHRoaXMudHJhbnNwb3J0ID0gdHJhbnNwb3J0O1xuXG4gICAgLy8gc2V0IHVwIHRyYW5zcG9ydCBsaXN0ZW5lcnNcbiAgICB0cmFuc3BvcnRcbiAgICAgIC5vbihcImRyYWluXCIsIHRoaXMub25EcmFpbi5iaW5kKHRoaXMpKVxuICAgICAgLm9uKFwicGFja2V0XCIsIHRoaXMub25QYWNrZXQuYmluZCh0aGlzKSlcbiAgICAgIC5vbihcImVycm9yXCIsIHRoaXMub25FcnJvci5iaW5kKHRoaXMpKVxuICAgICAgLm9uKFwiY2xvc2VcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLm9uQ2xvc2UoXCJ0cmFuc3BvcnQgY2xvc2VcIik7XG4gICAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQcm9iZXMgYSB0cmFuc3BvcnQuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0cmFuc3BvcnQgbmFtZVxuICAgKiBAYXBpIHByaXZhdGVcbiAgICovXG4gIHByb2JlKG5hbWUpIHtcbiAgICBkZWJ1ZygncHJvYmluZyB0cmFuc3BvcnQgXCIlc1wiJywgbmFtZSk7XG4gICAgbGV0IHRyYW5zcG9ydCA9IHRoaXMuY3JlYXRlVHJhbnNwb3J0KG5hbWUsIHsgcHJvYmU6IDEgfSk7XG4gICAgbGV0IGZhaWxlZCA9IGZhbHNlO1xuXG4gICAgU29ja2V0LnByaW9yV2Vic29ja2V0U3VjY2VzcyA9IGZhbHNlO1xuXG4gICAgY29uc3Qgb25UcmFuc3BvcnRPcGVuID0gKCkgPT4ge1xuICAgICAgaWYgKGZhaWxlZCkgcmV0dXJuO1xuXG4gICAgICBkZWJ1ZygncHJvYmUgdHJhbnNwb3J0IFwiJXNcIiBvcGVuZWQnLCBuYW1lKTtcbiAgICAgIHRyYW5zcG9ydC5zZW5kKFt7IHR5cGU6IFwicGluZ1wiLCBkYXRhOiBcInByb2JlXCIgfV0pO1xuICAgICAgdHJhbnNwb3J0Lm9uY2UoXCJwYWNrZXRcIiwgbXNnID0+IHtcbiAgICAgICAgaWYgKGZhaWxlZCkgcmV0dXJuO1xuICAgICAgICBpZiAoXCJwb25nXCIgPT09IG1zZy50eXBlICYmIFwicHJvYmVcIiA9PT0gbXNnLmRhdGEpIHtcbiAgICAgICAgICBkZWJ1ZygncHJvYmUgdHJhbnNwb3J0IFwiJXNcIiBwb25nJywgbmFtZSk7XG4gICAgICAgICAgdGhpcy51cGdyYWRpbmcgPSB0cnVlO1xuICAgICAgICAgIHRoaXMuZW1pdChcInVwZ3JhZGluZ1wiLCB0cmFuc3BvcnQpO1xuICAgICAgICAgIGlmICghdHJhbnNwb3J0KSByZXR1cm47XG4gICAgICAgICAgU29ja2V0LnByaW9yV2Vic29ja2V0U3VjY2VzcyA9IFwid2Vic29ja2V0XCIgPT09IHRyYW5zcG9ydC5uYW1lO1xuXG4gICAgICAgICAgZGVidWcoJ3BhdXNpbmcgY3VycmVudCB0cmFuc3BvcnQgXCIlc1wiJywgdGhpcy50cmFuc3BvcnQubmFtZSk7XG4gICAgICAgICAgdGhpcy50cmFuc3BvcnQucGF1c2UoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKGZhaWxlZCkgcmV0dXJuO1xuICAgICAgICAgICAgaWYgKFwiY2xvc2VkXCIgPT09IHRoaXMucmVhZHlTdGF0ZSkgcmV0dXJuO1xuICAgICAgICAgICAgZGVidWcoXCJjaGFuZ2luZyB0cmFuc3BvcnQgYW5kIHNlbmRpbmcgdXBncmFkZSBwYWNrZXRcIik7XG5cbiAgICAgICAgICAgIGNsZWFudXAoKTtcblxuICAgICAgICAgICAgdGhpcy5zZXRUcmFuc3BvcnQodHJhbnNwb3J0KTtcbiAgICAgICAgICAgIHRyYW5zcG9ydC5zZW5kKFt7IHR5cGU6IFwidXBncmFkZVwiIH1dKTtcbiAgICAgICAgICAgIHRoaXMuZW1pdChcInVwZ3JhZGVcIiwgdHJhbnNwb3J0KTtcbiAgICAgICAgICAgIHRyYW5zcG9ydCA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLnVwZ3JhZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5mbHVzaCgpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRlYnVnKCdwcm9iZSB0cmFuc3BvcnQgXCIlc1wiIGZhaWxlZCcsIG5hbWUpO1xuICAgICAgICAgIGNvbnN0IGVyciA9IG5ldyBFcnJvcihcInByb2JlIGVycm9yXCIpO1xuICAgICAgICAgIGVyci50cmFuc3BvcnQgPSB0cmFuc3BvcnQubmFtZTtcbiAgICAgICAgICB0aGlzLmVtaXQoXCJ1cGdyYWRlRXJyb3JcIiwgZXJyKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGZyZWV6ZVRyYW5zcG9ydCgpIHtcbiAgICAgIGlmIChmYWlsZWQpIHJldHVybjtcblxuICAgICAgLy8gQW55IGNhbGxiYWNrIGNhbGxlZCBieSB0cmFuc3BvcnQgc2hvdWxkIGJlIGlnbm9yZWQgc2luY2Ugbm93XG4gICAgICBmYWlsZWQgPSB0cnVlO1xuXG4gICAgICBjbGVhbnVwKCk7XG5cbiAgICAgIHRyYW5zcG9ydC5jbG9zZSgpO1xuICAgICAgdHJhbnNwb3J0ID0gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgYW55IGVycm9yIHRoYXQgaGFwcGVucyB3aGlsZSBwcm9iaW5nXG4gICAgY29uc3Qgb25lcnJvciA9IGVyciA9PiB7XG4gICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcihcInByb2JlIGVycm9yOiBcIiArIGVycik7XG4gICAgICBlcnJvci50cmFuc3BvcnQgPSB0cmFuc3BvcnQubmFtZTtcblxuICAgICAgZnJlZXplVHJhbnNwb3J0KCk7XG5cbiAgICAgIGRlYnVnKCdwcm9iZSB0cmFuc3BvcnQgXCIlc1wiIGZhaWxlZCBiZWNhdXNlIG9mIGVycm9yOiAlcycsIG5hbWUsIGVycik7XG5cbiAgICAgIHRoaXMuZW1pdChcInVwZ3JhZGVFcnJvclwiLCBlcnJvcik7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIG9uVHJhbnNwb3J0Q2xvc2UoKSB7XG4gICAgICBvbmVycm9yKFwidHJhbnNwb3J0IGNsb3NlZFwiKTtcbiAgICB9XG5cbiAgICAvLyBXaGVuIHRoZSBzb2NrZXQgaXMgY2xvc2VkIHdoaWxlIHdlJ3JlIHByb2JpbmdcbiAgICBmdW5jdGlvbiBvbmNsb3NlKCkge1xuICAgICAgb25lcnJvcihcInNvY2tldCBjbG9zZWRcIik7XG4gICAgfVxuXG4gICAgLy8gV2hlbiB0aGUgc29ja2V0IGlzIHVwZ3JhZGVkIHdoaWxlIHdlJ3JlIHByb2JpbmdcbiAgICBmdW5jdGlvbiBvbnVwZ3JhZGUodG8pIHtcbiAgICAgIGlmICh0cmFuc3BvcnQgJiYgdG8ubmFtZSAhPT0gdHJhbnNwb3J0Lm5hbWUpIHtcbiAgICAgICAgZGVidWcoJ1wiJXNcIiB3b3JrcyAtIGFib3J0aW5nIFwiJXNcIicsIHRvLm5hbWUsIHRyYW5zcG9ydC5uYW1lKTtcbiAgICAgICAgZnJlZXplVHJhbnNwb3J0KCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gUmVtb3ZlIGFsbCBsaXN0ZW5lcnMgb24gdGhlIHRyYW5zcG9ydCBhbmQgb24gc2VsZlxuICAgIGNvbnN0IGNsZWFudXAgPSAoKSA9PiB7XG4gICAgICB0cmFuc3BvcnQucmVtb3ZlTGlzdGVuZXIoXCJvcGVuXCIsIG9uVHJhbnNwb3J0T3Blbik7XG4gICAgICB0cmFuc3BvcnQucmVtb3ZlTGlzdGVuZXIoXCJlcnJvclwiLCBvbmVycm9yKTtcbiAgICAgIHRyYW5zcG9ydC5yZW1vdmVMaXN0ZW5lcihcImNsb3NlXCIsIG9uVHJhbnNwb3J0Q2xvc2UpO1xuICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcihcImNsb3NlXCIsIG9uY2xvc2UpO1xuICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcihcInVwZ3JhZGluZ1wiLCBvbnVwZ3JhZGUpO1xuICAgIH07XG5cbiAgICB0cmFuc3BvcnQub25jZShcIm9wZW5cIiwgb25UcmFuc3BvcnRPcGVuKTtcbiAgICB0cmFuc3BvcnQub25jZShcImVycm9yXCIsIG9uZXJyb3IpO1xuICAgIHRyYW5zcG9ydC5vbmNlKFwiY2xvc2VcIiwgb25UcmFuc3BvcnRDbG9zZSk7XG5cbiAgICB0aGlzLm9uY2UoXCJjbG9zZVwiLCBvbmNsb3NlKTtcbiAgICB0aGlzLm9uY2UoXCJ1cGdyYWRpbmdcIiwgb251cGdyYWRlKTtcblxuICAgIHRyYW5zcG9ydC5vcGVuKCk7XG4gIH1cblxuICAvKipcbiAgICogQ2FsbGVkIHdoZW4gY29ubmVjdGlvbiBpcyBkZWVtZWQgb3Blbi5cbiAgICpcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG4gIG9uT3BlbigpIHtcbiAgICBkZWJ1ZyhcInNvY2tldCBvcGVuXCIpO1xuICAgIHRoaXMucmVhZHlTdGF0ZSA9IFwib3BlblwiO1xuICAgIFNvY2tldC5wcmlvcldlYnNvY2tldFN1Y2Nlc3MgPSBcIndlYnNvY2tldFwiID09PSB0aGlzLnRyYW5zcG9ydC5uYW1lO1xuICAgIHRoaXMuZW1pdChcIm9wZW5cIik7XG4gICAgdGhpcy5mbHVzaCgpO1xuXG4gICAgLy8gd2UgY2hlY2sgZm9yIGByZWFkeVN0YXRlYCBpbiBjYXNlIGFuIGBvcGVuYFxuICAgIC8vIGxpc3RlbmVyIGFscmVhZHkgY2xvc2VkIHRoZSBzb2NrZXRcbiAgICBpZiAoXG4gICAgICBcIm9wZW5cIiA9PT0gdGhpcy5yZWFkeVN0YXRlICYmXG4gICAgICB0aGlzLm9wdHMudXBncmFkZSAmJlxuICAgICAgdGhpcy50cmFuc3BvcnQucGF1c2VcbiAgICApIHtcbiAgICAgIGRlYnVnKFwic3RhcnRpbmcgdXBncmFkZSBwcm9iZXNcIik7XG4gICAgICBsZXQgaSA9IDA7XG4gICAgICBjb25zdCBsID0gdGhpcy51cGdyYWRlcy5sZW5ndGg7XG4gICAgICBmb3IgKDsgaSA8IGw7IGkrKykge1xuICAgICAgICB0aGlzLnByb2JlKHRoaXMudXBncmFkZXNbaV0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIGEgcGFja2V0LlxuICAgKlxuICAgKiBAYXBpIHByaXZhdGVcbiAgICovXG4gIG9uUGFja2V0KHBhY2tldCkge1xuICAgIGlmIChcbiAgICAgIFwib3BlbmluZ1wiID09PSB0aGlzLnJlYWR5U3RhdGUgfHxcbiAgICAgIFwib3BlblwiID09PSB0aGlzLnJlYWR5U3RhdGUgfHxcbiAgICAgIFwiY2xvc2luZ1wiID09PSB0aGlzLnJlYWR5U3RhdGVcbiAgICApIHtcbiAgICAgIGRlYnVnKCdzb2NrZXQgcmVjZWl2ZTogdHlwZSBcIiVzXCIsIGRhdGEgXCIlc1wiJywgcGFja2V0LnR5cGUsIHBhY2tldC5kYXRhKTtcblxuICAgICAgdGhpcy5lbWl0KFwicGFja2V0XCIsIHBhY2tldCk7XG5cbiAgICAgIC8vIFNvY2tldCBpcyBsaXZlIC0gYW55IHBhY2tldCBjb3VudHNcbiAgICAgIHRoaXMuZW1pdChcImhlYXJ0YmVhdFwiKTtcblxuICAgICAgc3dpdGNoIChwYWNrZXQudHlwZSkge1xuICAgICAgICBjYXNlIFwib3BlblwiOlxuICAgICAgICAgIHRoaXMub25IYW5kc2hha2UoSlNPTi5wYXJzZShwYWNrZXQuZGF0YSkpO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgXCJwaW5nXCI6XG4gICAgICAgICAgdGhpcy5yZXNldFBpbmdUaW1lb3V0KCk7XG4gICAgICAgICAgdGhpcy5zZW5kUGFja2V0KFwicG9uZ1wiKTtcbiAgICAgICAgICB0aGlzLmVtaXQoXCJwb25nXCIpO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgXCJlcnJvclwiOlxuICAgICAgICAgIGNvbnN0IGVyciA9IG5ldyBFcnJvcihcInNlcnZlciBlcnJvclwiKTtcbiAgICAgICAgICBlcnIuY29kZSA9IHBhY2tldC5kYXRhO1xuICAgICAgICAgIHRoaXMub25FcnJvcihlcnIpO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgXCJtZXNzYWdlXCI6XG4gICAgICAgICAgdGhpcy5lbWl0KFwiZGF0YVwiLCBwYWNrZXQuZGF0YSk7XG4gICAgICAgICAgdGhpcy5lbWl0KFwibWVzc2FnZVwiLCBwYWNrZXQuZGF0YSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGRlYnVnKCdwYWNrZXQgcmVjZWl2ZWQgd2l0aCBzb2NrZXQgcmVhZHlTdGF0ZSBcIiVzXCInLCB0aGlzLnJlYWR5U3RhdGUpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsZWQgdXBvbiBoYW5kc2hha2UgY29tcGxldGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IGhhbmRzaGFrZSBvYmpcbiAgICogQGFwaSBwcml2YXRlXG4gICAqL1xuICBvbkhhbmRzaGFrZShkYXRhKSB7XG4gICAgdGhpcy5lbWl0KFwiaGFuZHNoYWtlXCIsIGRhdGEpO1xuICAgIHRoaXMuaWQgPSBkYXRhLnNpZDtcbiAgICB0aGlzLnRyYW5zcG9ydC5xdWVyeS5zaWQgPSBkYXRhLnNpZDtcbiAgICB0aGlzLnVwZ3JhZGVzID0gdGhpcy5maWx0ZXJVcGdyYWRlcyhkYXRhLnVwZ3JhZGVzKTtcbiAgICB0aGlzLnBpbmdJbnRlcnZhbCA9IGRhdGEucGluZ0ludGVydmFsO1xuICAgIHRoaXMucGluZ1RpbWVvdXQgPSBkYXRhLnBpbmdUaW1lb3V0O1xuICAgIHRoaXMub25PcGVuKCk7XG4gICAgLy8gSW4gY2FzZSBvcGVuIGhhbmRsZXIgY2xvc2VzIHNvY2tldFxuICAgIGlmIChcImNsb3NlZFwiID09PSB0aGlzLnJlYWR5U3RhdGUpIHJldHVybjtcbiAgICB0aGlzLnJlc2V0UGluZ1RpbWVvdXQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIGFuZCByZXNldHMgcGluZyB0aW1lb3V0IHRpbWVyIGJhc2VkIG9uIHNlcnZlciBwaW5ncy5cbiAgICpcbiAgICogQGFwaSBwcml2YXRlXG4gICAqL1xuICByZXNldFBpbmdUaW1lb3V0KCkge1xuICAgIGNsZWFyVGltZW91dCh0aGlzLnBpbmdUaW1lb3V0VGltZXIpO1xuICAgIHRoaXMucGluZ1RpbWVvdXRUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5vbkNsb3NlKFwicGluZyB0aW1lb3V0XCIpO1xuICAgIH0sIHRoaXMucGluZ0ludGVydmFsICsgdGhpcy5waW5nVGltZW91dCk7XG4gICAgaWYgKHRoaXMub3B0cy5hdXRvVW5yZWYpIHtcbiAgICAgIHRoaXMucGluZ1RpbWVvdXRUaW1lci51bnJlZigpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsZWQgb24gYGRyYWluYCBldmVudFxuICAgKlxuICAgKiBAYXBpIHByaXZhdGVcbiAgICovXG4gIG9uRHJhaW4oKSB7XG4gICAgdGhpcy53cml0ZUJ1ZmZlci5zcGxpY2UoMCwgdGhpcy5wcmV2QnVmZmVyTGVuKTtcblxuICAgIC8vIHNldHRpbmcgcHJldkJ1ZmZlckxlbiA9IDAgaXMgdmVyeSBpbXBvcnRhbnRcbiAgICAvLyBmb3IgZXhhbXBsZSwgd2hlbiB1cGdyYWRpbmcsIHVwZ3JhZGUgcGFja2V0IGlzIHNlbnQgb3ZlcixcbiAgICAvLyBhbmQgYSBub256ZXJvIHByZXZCdWZmZXJMZW4gY291bGQgY2F1c2UgcHJvYmxlbXMgb24gYGRyYWluYFxuICAgIHRoaXMucHJldkJ1ZmZlckxlbiA9IDA7XG5cbiAgICBpZiAoMCA9PT0gdGhpcy53cml0ZUJ1ZmZlci5sZW5ndGgpIHtcbiAgICAgIHRoaXMuZW1pdChcImRyYWluXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmZsdXNoKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEZsdXNoIHdyaXRlIGJ1ZmZlcnMuXG4gICAqXG4gICAqIEBhcGkgcHJpdmF0ZVxuICAgKi9cbiAgZmx1c2goKSB7XG4gICAgaWYgKFxuICAgICAgXCJjbG9zZWRcIiAhPT0gdGhpcy5yZWFkeVN0YXRlICYmXG4gICAgICB0aGlzLnRyYW5zcG9ydC53cml0YWJsZSAmJlxuICAgICAgIXRoaXMudXBncmFkaW5nICYmXG4gICAgICB0aGlzLndyaXRlQnVmZmVyLmxlbmd0aFxuICAgICkge1xuICAgICAgZGVidWcoXCJmbHVzaGluZyAlZCBwYWNrZXRzIGluIHNvY2tldFwiLCB0aGlzLndyaXRlQnVmZmVyLmxlbmd0aCk7XG4gICAgICB0aGlzLnRyYW5zcG9ydC5zZW5kKHRoaXMud3JpdGVCdWZmZXIpO1xuICAgICAgLy8ga2VlcCB0cmFjayBvZiBjdXJyZW50IGxlbmd0aCBvZiB3cml0ZUJ1ZmZlclxuICAgICAgLy8gc3BsaWNlIHdyaXRlQnVmZmVyIGFuZCBjYWxsYmFja0J1ZmZlciBvbiBgZHJhaW5gXG4gICAgICB0aGlzLnByZXZCdWZmZXJMZW4gPSB0aGlzLndyaXRlQnVmZmVyLmxlbmd0aDtcbiAgICAgIHRoaXMuZW1pdChcImZsdXNoXCIpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZW5kcyBhIG1lc3NhZ2UuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBmdW5jdGlvbi5cbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMuXG4gICAqIEByZXR1cm4ge1NvY2tldH0gZm9yIGNoYWluaW5nLlxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cbiAgd3JpdGUobXNnLCBvcHRpb25zLCBmbikge1xuICAgIHRoaXMuc2VuZFBhY2tldChcIm1lc3NhZ2VcIiwgbXNnLCBvcHRpb25zLCBmbik7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBzZW5kKG1zZywgb3B0aW9ucywgZm4pIHtcbiAgICB0aGlzLnNlbmRQYWNrZXQoXCJtZXNzYWdlXCIsIG1zZywgb3B0aW9ucywgZm4pO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIFNlbmRzIGEgcGFja2V0LlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gcGFja2V0IHR5cGUuXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBkYXRhLlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucy5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgZnVuY3Rpb24uXG4gICAqIEBhcGkgcHJpdmF0ZVxuICAgKi9cbiAgc2VuZFBhY2tldCh0eXBlLCBkYXRhLCBvcHRpb25zLCBmbikge1xuICAgIGlmIChcImZ1bmN0aW9uXCIgPT09IHR5cGVvZiBkYXRhKSB7XG4gICAgICBmbiA9IGRhdGE7XG4gICAgICBkYXRhID0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGlmIChcImZ1bmN0aW9uXCIgPT09IHR5cGVvZiBvcHRpb25zKSB7XG4gICAgICBmbiA9IG9wdGlvbnM7XG4gICAgICBvcHRpb25zID0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAoXCJjbG9zaW5nXCIgPT09IHRoaXMucmVhZHlTdGF0ZSB8fCBcImNsb3NlZFwiID09PSB0aGlzLnJlYWR5U3RhdGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICBvcHRpb25zLmNvbXByZXNzID0gZmFsc2UgIT09IG9wdGlvbnMuY29tcHJlc3M7XG5cbiAgICBjb25zdCBwYWNrZXQgPSB7XG4gICAgICB0eXBlOiB0eXBlLFxuICAgICAgZGF0YTogZGF0YSxcbiAgICAgIG9wdGlvbnM6IG9wdGlvbnNcbiAgICB9O1xuICAgIHRoaXMuZW1pdChcInBhY2tldENyZWF0ZVwiLCBwYWNrZXQpO1xuICAgIHRoaXMud3JpdGVCdWZmZXIucHVzaChwYWNrZXQpO1xuICAgIGlmIChmbikgdGhpcy5vbmNlKFwiZmx1c2hcIiwgZm4pO1xuICAgIHRoaXMuZmx1c2goKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbG9zZXMgdGhlIGNvbm5lY3Rpb24uXG4gICAqXG4gICAqIEBhcGkgcHJpdmF0ZVxuICAgKi9cbiAgY2xvc2UoKSB7XG4gICAgY29uc3QgY2xvc2UgPSAoKSA9PiB7XG4gICAgICB0aGlzLm9uQ2xvc2UoXCJmb3JjZWQgY2xvc2VcIik7XG4gICAgICBkZWJ1ZyhcInNvY2tldCBjbG9zaW5nIC0gdGVsbGluZyB0cmFuc3BvcnQgdG8gY2xvc2VcIik7XG4gICAgICB0aGlzLnRyYW5zcG9ydC5jbG9zZSgpO1xuICAgIH07XG5cbiAgICBjb25zdCBjbGVhbnVwQW5kQ2xvc2UgPSAoKSA9PiB7XG4gICAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKFwidXBncmFkZVwiLCBjbGVhbnVwQW5kQ2xvc2UpO1xuICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcihcInVwZ3JhZGVFcnJvclwiLCBjbGVhbnVwQW5kQ2xvc2UpO1xuICAgICAgY2xvc2UoKTtcbiAgICB9O1xuXG4gICAgY29uc3Qgd2FpdEZvclVwZ3JhZGUgPSAoKSA9PiB7XG4gICAgICAvLyB3YWl0IGZvciB1cGdyYWRlIHRvIGZpbmlzaCBzaW5jZSB3ZSBjYW4ndCBzZW5kIHBhY2tldHMgd2hpbGUgcGF1c2luZyBhIHRyYW5zcG9ydFxuICAgICAgdGhpcy5vbmNlKFwidXBncmFkZVwiLCBjbGVhbnVwQW5kQ2xvc2UpO1xuICAgICAgdGhpcy5vbmNlKFwidXBncmFkZUVycm9yXCIsIGNsZWFudXBBbmRDbG9zZSk7XG4gICAgfTtcblxuICAgIGlmIChcIm9wZW5pbmdcIiA9PT0gdGhpcy5yZWFkeVN0YXRlIHx8IFwib3BlblwiID09PSB0aGlzLnJlYWR5U3RhdGUpIHtcbiAgICAgIHRoaXMucmVhZHlTdGF0ZSA9IFwiY2xvc2luZ1wiO1xuXG4gICAgICBpZiAodGhpcy53cml0ZUJ1ZmZlci5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5vbmNlKFwiZHJhaW5cIiwgKCkgPT4ge1xuICAgICAgICAgIGlmICh0aGlzLnVwZ3JhZGluZykge1xuICAgICAgICAgICAgd2FpdEZvclVwZ3JhZGUoKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2xvc2UoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLnVwZ3JhZGluZykge1xuICAgICAgICB3YWl0Rm9yVXBncmFkZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsZWQgdXBvbiB0cmFuc3BvcnQgZXJyb3JcbiAgICpcbiAgICogQGFwaSBwcml2YXRlXG4gICAqL1xuICBvbkVycm9yKGVycikge1xuICAgIGRlYnVnKFwic29ja2V0IGVycm9yICVqXCIsIGVycik7XG4gICAgU29ja2V0LnByaW9yV2Vic29ja2V0U3VjY2VzcyA9IGZhbHNlO1xuICAgIHRoaXMuZW1pdChcImVycm9yXCIsIGVycik7XG4gICAgdGhpcy5vbkNsb3NlKFwidHJhbnNwb3J0IGVycm9yXCIsIGVycik7XG4gIH1cblxuICAvKipcbiAgICogQ2FsbGVkIHVwb24gdHJhbnNwb3J0IGNsb3NlLlxuICAgKlxuICAgKiBAYXBpIHByaXZhdGVcbiAgICovXG4gIG9uQ2xvc2UocmVhc29uLCBkZXNjKSB7XG4gICAgaWYgKFxuICAgICAgXCJvcGVuaW5nXCIgPT09IHRoaXMucmVhZHlTdGF0ZSB8fFxuICAgICAgXCJvcGVuXCIgPT09IHRoaXMucmVhZHlTdGF0ZSB8fFxuICAgICAgXCJjbG9zaW5nXCIgPT09IHRoaXMucmVhZHlTdGF0ZVxuICAgICkge1xuICAgICAgZGVidWcoJ3NvY2tldCBjbG9zZSB3aXRoIHJlYXNvbjogXCIlc1wiJywgcmVhc29uKTtcblxuICAgICAgLy8gY2xlYXIgdGltZXJzXG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5waW5nSW50ZXJ2YWxUaW1lcik7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5waW5nVGltZW91dFRpbWVyKTtcblxuICAgICAgLy8gc3RvcCBldmVudCBmcm9tIGZpcmluZyBhZ2FpbiBmb3IgdHJhbnNwb3J0XG4gICAgICB0aGlzLnRyYW5zcG9ydC5yZW1vdmVBbGxMaXN0ZW5lcnMoXCJjbG9zZVwiKTtcblxuICAgICAgLy8gZW5zdXJlIHRyYW5zcG9ydCB3b24ndCBzdGF5IG9wZW5cbiAgICAgIHRoaXMudHJhbnNwb3J0LmNsb3NlKCk7XG5cbiAgICAgIC8vIGlnbm9yZSBmdXJ0aGVyIHRyYW5zcG9ydCBjb21tdW5pY2F0aW9uXG4gICAgICB0aGlzLnRyYW5zcG9ydC5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcblxuICAgICAgaWYgKHR5cGVvZiByZW1vdmVFdmVudExpc3RlbmVyID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm9mZmxpbmVcIiwgdGhpcy5vZmZsaW5lRXZlbnRMaXN0ZW5lciwgZmFsc2UpO1xuICAgICAgfVxuXG4gICAgICAvLyBzZXQgcmVhZHkgc3RhdGVcbiAgICAgIHRoaXMucmVhZHlTdGF0ZSA9IFwiY2xvc2VkXCI7XG5cbiAgICAgIC8vIGNsZWFyIHNlc3Npb24gaWRcbiAgICAgIHRoaXMuaWQgPSBudWxsO1xuXG4gICAgICAvLyBlbWl0IGNsb3NlIGV2ZW50XG4gICAgICB0aGlzLmVtaXQoXCJjbG9zZVwiLCByZWFzb24sIGRlc2MpO1xuXG4gICAgICAvLyBjbGVhbiBidWZmZXJzIGFmdGVyLCBzbyB1c2VycyBjYW4gc3RpbGxcbiAgICAgIC8vIGdyYWIgdGhlIGJ1ZmZlcnMgb24gYGNsb3NlYCBldmVudFxuICAgICAgdGhpcy53cml0ZUJ1ZmZlciA9IFtdO1xuICAgICAgdGhpcy5wcmV2QnVmZmVyTGVuID0gMDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRmlsdGVycyB1cGdyYWRlcywgcmV0dXJuaW5nIG9ubHkgdGhvc2UgbWF0Y2hpbmcgY2xpZW50IHRyYW5zcG9ydHMuXG4gICAqXG4gICAqIEBwYXJhbSB7QXJyYXl9IHNlcnZlciB1cGdyYWRlc1xuICAgKiBAYXBpIHByaXZhdGVcbiAgICpcbiAgICovXG4gIGZpbHRlclVwZ3JhZGVzKHVwZ3JhZGVzKSB7XG4gICAgY29uc3QgZmlsdGVyZWRVcGdyYWRlcyA9IFtdO1xuICAgIGxldCBpID0gMDtcbiAgICBjb25zdCBqID0gdXBncmFkZXMubGVuZ3RoO1xuICAgIGZvciAoOyBpIDwgajsgaSsrKSB7XG4gICAgICBpZiAofnRoaXMudHJhbnNwb3J0cy5pbmRleE9mKHVwZ3JhZGVzW2ldKSlcbiAgICAgICAgZmlsdGVyZWRVcGdyYWRlcy5wdXNoKHVwZ3JhZGVzW2ldKTtcbiAgICB9XG4gICAgcmV0dXJuIGZpbHRlcmVkVXBncmFkZXM7XG4gIH1cbn1cblxuU29ja2V0LnByaW9yV2Vic29ja2V0U3VjY2VzcyA9IGZhbHNlO1xuXG4vKipcbiAqIFByb3RvY29sIHZlcnNpb24uXG4gKlxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5Tb2NrZXQucHJvdG9jb2wgPSBwYXJzZXIucHJvdG9jb2w7IC8vIHRoaXMgaXMgYW4gaW50XG5cbmZ1bmN0aW9uIGNsb25lKG9iaikge1xuICBjb25zdCBvID0ge307XG4gIGZvciAobGV0IGkgaW4gb2JqKSB7XG4gICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShpKSkge1xuICAgICAgb1tpXSA9IG9ialtpXTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG87XG59XG5cbm1vZHVsZS5leHBvcnRzID0gU29ja2V0O1xuIiwiY29uc3QgcGFyc2VyID0gcmVxdWlyZShcImVuZ2luZS5pby1wYXJzZXJcIik7XG5jb25zdCBFbWl0dGVyID0gcmVxdWlyZShcImNvbXBvbmVudC1lbWl0dGVyXCIpO1xuY29uc3QgZGVidWcgPSByZXF1aXJlKFwiZGVidWdcIikoXCJlbmdpbmUuaW8tY2xpZW50OnRyYW5zcG9ydFwiKTtcblxuY2xhc3MgVHJhbnNwb3J0IGV4dGVuZHMgRW1pdHRlciB7XG4gIC8qKlxuICAgKiBUcmFuc3BvcnQgYWJzdHJhY3QgY29uc3RydWN0b3IuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zLlxuICAgKiBAYXBpIHByaXZhdGVcbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdHMpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgdGhpcy5vcHRzID0gb3B0cztcbiAgICB0aGlzLnF1ZXJ5ID0gb3B0cy5xdWVyeTtcbiAgICB0aGlzLnJlYWR5U3RhdGUgPSBcIlwiO1xuICAgIHRoaXMuc29ja2V0ID0gb3B0cy5zb2NrZXQ7XG4gIH1cblxuICAvKipcbiAgICogRW1pdHMgYW4gZXJyb3IuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAgICogQHJldHVybiB7VHJhbnNwb3J0fSBmb3IgY2hhaW5pbmdcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG4gIG9uRXJyb3IobXNnLCBkZXNjKSB7XG4gICAgY29uc3QgZXJyID0gbmV3IEVycm9yKG1zZyk7XG4gICAgZXJyLnR5cGUgPSBcIlRyYW5zcG9ydEVycm9yXCI7XG4gICAgZXJyLmRlc2NyaXB0aW9uID0gZGVzYztcbiAgICB0aGlzLmVtaXQoXCJlcnJvclwiLCBlcnIpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIE9wZW5zIHRoZSB0cmFuc3BvcnQuXG4gICAqXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuICBvcGVuKCkge1xuICAgIGlmIChcImNsb3NlZFwiID09PSB0aGlzLnJlYWR5U3RhdGUgfHwgXCJcIiA9PT0gdGhpcy5yZWFkeVN0YXRlKSB7XG4gICAgICB0aGlzLnJlYWR5U3RhdGUgPSBcIm9wZW5pbmdcIjtcbiAgICAgIHRoaXMuZG9PcGVuKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogQ2xvc2VzIHRoZSB0cmFuc3BvcnQuXG4gICAqXG4gICAqIEBhcGkgcHJpdmF0ZVxuICAgKi9cbiAgY2xvc2UoKSB7XG4gICAgaWYgKFwib3BlbmluZ1wiID09PSB0aGlzLnJlYWR5U3RhdGUgfHwgXCJvcGVuXCIgPT09IHRoaXMucmVhZHlTdGF0ZSkge1xuICAgICAgdGhpcy5kb0Nsb3NlKCk7XG4gICAgICB0aGlzLm9uQ2xvc2UoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBTZW5kcyBtdWx0aXBsZSBwYWNrZXRzLlxuICAgKlxuICAgKiBAcGFyYW0ge0FycmF5fSBwYWNrZXRzXG4gICAqIEBhcGkgcHJpdmF0ZVxuICAgKi9cbiAgc2VuZChwYWNrZXRzKSB7XG4gICAgaWYgKFwib3BlblwiID09PSB0aGlzLnJlYWR5U3RhdGUpIHtcbiAgICAgIHRoaXMud3JpdGUocGFja2V0cyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHRoaXMgbWlnaHQgaGFwcGVuIGlmIHRoZSB0cmFuc3BvcnQgd2FzIHNpbGVudGx5IGNsb3NlZCBpbiB0aGUgYmVmb3JldW5sb2FkIGV2ZW50IGhhbmRsZXJcbiAgICAgIGRlYnVnKFwidHJhbnNwb3J0IGlzIG5vdCBvcGVuLCBkaXNjYXJkaW5nIHBhY2tldHNcIik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENhbGxlZCB1cG9uIG9wZW5cbiAgICpcbiAgICogQGFwaSBwcml2YXRlXG4gICAqL1xuICBvbk9wZW4oKSB7XG4gICAgdGhpcy5yZWFkeVN0YXRlID0gXCJvcGVuXCI7XG4gICAgdGhpcy53cml0YWJsZSA9IHRydWU7XG4gICAgdGhpcy5lbWl0KFwib3BlblwiKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsZWQgd2l0aCBkYXRhLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gZGF0YVxuICAgKiBAYXBpIHByaXZhdGVcbiAgICovXG4gIG9uRGF0YShkYXRhKSB7XG4gICAgY29uc3QgcGFja2V0ID0gcGFyc2VyLmRlY29kZVBhY2tldChkYXRhLCB0aGlzLnNvY2tldC5iaW5hcnlUeXBlKTtcbiAgICB0aGlzLm9uUGFja2V0KHBhY2tldCk7XG4gIH1cblxuICAvKipcbiAgICogQ2FsbGVkIHdpdGggYSBkZWNvZGVkIHBhY2tldC5cbiAgICovXG4gIG9uUGFja2V0KHBhY2tldCkge1xuICAgIHRoaXMuZW1pdChcInBhY2tldFwiLCBwYWNrZXQpO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGxlZCB1cG9uIGNsb3NlLlxuICAgKlxuICAgKiBAYXBpIHByaXZhdGVcbiAgICovXG4gIG9uQ2xvc2UoKSB7XG4gICAgdGhpcy5yZWFkeVN0YXRlID0gXCJjbG9zZWRcIjtcbiAgICB0aGlzLmVtaXQoXCJjbG9zZVwiKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFRyYW5zcG9ydDtcbiIsImNvbnN0IFhNTEh0dHBSZXF1ZXN0ID0gcmVxdWlyZShcIi4uLy4uL2NvbnRyaWIveG1saHR0cHJlcXVlc3Qtc3NsL1hNTEh0dHBSZXF1ZXN0XCIpO1xuY29uc3QgWEhSID0gcmVxdWlyZShcIi4vcG9sbGluZy14aHJcIik7XG5jb25zdCBKU09OUCA9IHJlcXVpcmUoXCIuL3BvbGxpbmctanNvbnBcIik7XG5jb25zdCB3ZWJzb2NrZXQgPSByZXF1aXJlKFwiLi93ZWJzb2NrZXRcIik7XG5cbmV4cG9ydHMucG9sbGluZyA9IHBvbGxpbmc7XG5leHBvcnRzLndlYnNvY2tldCA9IHdlYnNvY2tldDtcblxuLyoqXG4gKiBQb2xsaW5nIHRyYW5zcG9ydCBwb2x5bW9ycGhpYyBjb25zdHJ1Y3Rvci5cbiAqIERlY2lkZXMgb24geGhyIHZzIGpzb25wIGJhc2VkIG9uIGZlYXR1cmUgZGV0ZWN0aW9uLlxuICpcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIHBvbGxpbmcob3B0cykge1xuICBsZXQgeGhyO1xuICBsZXQgeGQgPSBmYWxzZTtcbiAgbGV0IHhzID0gZmFsc2U7XG4gIGNvbnN0IGpzb25wID0gZmFsc2UgIT09IG9wdHMuanNvbnA7XG5cbiAgaWYgKHR5cGVvZiBsb2NhdGlvbiAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgIGNvbnN0IGlzU1NMID0gXCJodHRwczpcIiA9PT0gbG9jYXRpb24ucHJvdG9jb2w7XG4gICAgbGV0IHBvcnQgPSBsb2NhdGlvbi5wb3J0O1xuXG4gICAgLy8gc29tZSB1c2VyIGFnZW50cyBoYXZlIGVtcHR5IGBsb2NhdGlvbi5wb3J0YFxuICAgIGlmICghcG9ydCkge1xuICAgICAgcG9ydCA9IGlzU1NMID8gNDQzIDogODA7XG4gICAgfVxuXG4gICAgeGQgPSBvcHRzLmhvc3RuYW1lICE9PSBsb2NhdGlvbi5ob3N0bmFtZSB8fCBwb3J0ICE9PSBvcHRzLnBvcnQ7XG4gICAgeHMgPSBvcHRzLnNlY3VyZSAhPT0gaXNTU0w7XG4gIH1cblxuICBvcHRzLnhkb21haW4gPSB4ZDtcbiAgb3B0cy54c2NoZW1lID0geHM7XG4gIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdChvcHRzKTtcblxuICBpZiAoXCJvcGVuXCIgaW4geGhyICYmICFvcHRzLmZvcmNlSlNPTlApIHtcbiAgICByZXR1cm4gbmV3IFhIUihvcHRzKTtcbiAgfSBlbHNlIHtcbiAgICBpZiAoIWpzb25wKSB0aHJvdyBuZXcgRXJyb3IoXCJKU09OUCBkaXNhYmxlZFwiKTtcbiAgICByZXR1cm4gbmV3IEpTT05QKG9wdHMpO1xuICB9XG59XG4iLCJjb25zdCBQb2xsaW5nID0gcmVxdWlyZShcIi4vcG9sbGluZ1wiKTtcbmNvbnN0IGdsb2JhbFRoaXMgPSByZXF1aXJlKFwiLi4vZ2xvYmFsVGhpc1wiKTtcblxuY29uc3Qgck5ld2xpbmUgPSAvXFxuL2c7XG5jb25zdCByRXNjYXBlZE5ld2xpbmUgPSAvXFxcXG4vZztcblxuLyoqXG4gKiBHbG9iYWwgSlNPTlAgY2FsbGJhY2tzLlxuICovXG5cbmxldCBjYWxsYmFja3M7XG5cbmNsYXNzIEpTT05QUG9sbGluZyBleHRlbmRzIFBvbGxpbmcge1xuICAvKipcbiAgICogSlNPTlAgUG9sbGluZyBjb25zdHJ1Y3Rvci5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMuXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuICBjb25zdHJ1Y3RvcihvcHRzKSB7XG4gICAgc3VwZXIob3B0cyk7XG5cbiAgICB0aGlzLnF1ZXJ5ID0gdGhpcy5xdWVyeSB8fCB7fTtcblxuICAgIC8vIGRlZmluZSBnbG9iYWwgY2FsbGJhY2tzIGFycmF5IGlmIG5vdCBwcmVzZW50XG4gICAgLy8gd2UgZG8gdGhpcyBoZXJlIChsYXppbHkpIHRvIGF2b2lkIHVubmVlZGVkIGdsb2JhbCBwb2xsdXRpb25cbiAgICBpZiAoIWNhbGxiYWNrcykge1xuICAgICAgLy8gd2UgbmVlZCB0byBjb25zaWRlciBtdWx0aXBsZSBlbmdpbmVzIGluIHRoZSBzYW1lIHBhZ2VcbiAgICAgIGNhbGxiYWNrcyA9IGdsb2JhbFRoaXMuX19fZWlvID0gZ2xvYmFsVGhpcy5fX19laW8gfHwgW107XG4gICAgfVxuXG4gICAgLy8gY2FsbGJhY2sgaWRlbnRpZmllclxuICAgIHRoaXMuaW5kZXggPSBjYWxsYmFja3MubGVuZ3RoO1xuXG4gICAgLy8gYWRkIGNhbGxiYWNrIHRvIGpzb25wIGdsb2JhbFxuICAgIGNhbGxiYWNrcy5wdXNoKHRoaXMub25EYXRhLmJpbmQodGhpcykpO1xuXG4gICAgLy8gYXBwZW5kIHRvIHF1ZXJ5IHN0cmluZ1xuICAgIHRoaXMucXVlcnkuaiA9IHRoaXMuaW5kZXg7XG4gIH1cblxuICAvKipcbiAgICogSlNPTlAgb25seSBzdXBwb3J0cyBiaW5hcnkgYXMgYmFzZTY0IGVuY29kZWQgc3RyaW5nc1xuICAgKi9cbiAgZ2V0IHN1cHBvcnRzQmluYXJ5KCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbG9zZXMgdGhlIHNvY2tldC5cbiAgICpcbiAgICogQGFwaSBwcml2YXRlXG4gICAqL1xuICBkb0Nsb3NlKCkge1xuICAgIGlmICh0aGlzLnNjcmlwdCkge1xuICAgICAgLy8gcHJldmVudCBzcHVyaW91cyBlcnJvcnMgZnJvbSBiZWluZyBlbWl0dGVkIHdoZW4gdGhlIHdpbmRvdyBpcyB1bmxvYWRlZFxuICAgICAgdGhpcy5zY3JpcHQub25lcnJvciA9ICgpID0+IHt9O1xuICAgICAgdGhpcy5zY3JpcHQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLnNjcmlwdCk7XG4gICAgICB0aGlzLnNjcmlwdCA9IG51bGw7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZm9ybSkge1xuICAgICAgdGhpcy5mb3JtLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5mb3JtKTtcbiAgICAgIHRoaXMuZm9ybSA9IG51bGw7XG4gICAgICB0aGlzLmlmcmFtZSA9IG51bGw7XG4gICAgfVxuXG4gICAgc3VwZXIuZG9DbG9zZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0YXJ0cyBhIHBvbGwgY3ljbGUuXG4gICAqXG4gICAqIEBhcGkgcHJpdmF0ZVxuICAgKi9cbiAgZG9Qb2xsKCkge1xuICAgIGNvbnN0IHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7XG5cbiAgICBpZiAodGhpcy5zY3JpcHQpIHtcbiAgICAgIHRoaXMuc2NyaXB0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5zY3JpcHQpO1xuICAgICAgdGhpcy5zY3JpcHQgPSBudWxsO1xuICAgIH1cblxuICAgIHNjcmlwdC5hc3luYyA9IHRydWU7XG4gICAgc2NyaXB0LnNyYyA9IHRoaXMudXJpKCk7XG4gICAgc2NyaXB0Lm9uZXJyb3IgPSBlID0+IHtcbiAgICAgIHRoaXMub25FcnJvcihcImpzb25wIHBvbGwgZXJyb3JcIiwgZSk7XG4gICAgfTtcblxuICAgIGNvbnN0IGluc2VydEF0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzY3JpcHRcIilbMF07XG4gICAgaWYgKGluc2VydEF0KSB7XG4gICAgICBpbnNlcnRBdC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShzY3JpcHQsIGluc2VydEF0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgKGRvY3VtZW50LmhlYWQgfHwgZG9jdW1lbnQuYm9keSkuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcbiAgICB9XG4gICAgdGhpcy5zY3JpcHQgPSBzY3JpcHQ7XG5cbiAgICBjb25zdCBpc1VBZ2Vja28gPVxuICAgICAgXCJ1bmRlZmluZWRcIiAhPT0gdHlwZW9mIG5hdmlnYXRvciAmJiAvZ2Vja28vaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xuXG4gICAgaWYgKGlzVUFnZWNrbykge1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgY29uc3QgaWZyYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlmcmFtZVwiKTtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChpZnJhbWUpO1xuICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGlmcmFtZSk7XG4gICAgICB9LCAxMDApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBXcml0ZXMgd2l0aCBhIGhpZGRlbiBpZnJhbWUuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBkYXRhIHRvIHNlbmRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGVkIHVwb24gZmx1c2guXG4gICAqIEBhcGkgcHJpdmF0ZVxuICAgKi9cbiAgZG9Xcml0ZShkYXRhLCBmbikge1xuICAgIGxldCBpZnJhbWU7XG5cbiAgICBpZiAoIXRoaXMuZm9ybSkge1xuICAgICAgY29uc3QgZm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJmb3JtXCIpO1xuICAgICAgY29uc3QgYXJlYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZXh0YXJlYVwiKTtcbiAgICAgIGNvbnN0IGlkID0gKHRoaXMuaWZyYW1lSWQgPSBcImVpb19pZnJhbWVfXCIgKyB0aGlzLmluZGV4KTtcblxuICAgICAgZm9ybS5jbGFzc05hbWUgPSBcInNvY2tldGlvXCI7XG4gICAgICBmb3JtLnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xuICAgICAgZm9ybS5zdHlsZS50b3AgPSBcIi0xMDAwcHhcIjtcbiAgICAgIGZvcm0uc3R5bGUubGVmdCA9IFwiLTEwMDBweFwiO1xuICAgICAgZm9ybS50YXJnZXQgPSBpZDtcbiAgICAgIGZvcm0ubWV0aG9kID0gXCJQT1NUXCI7XG4gICAgICBmb3JtLnNldEF0dHJpYnV0ZShcImFjY2VwdC1jaGFyc2V0XCIsIFwidXRmLThcIik7XG4gICAgICBhcmVhLm5hbWUgPSBcImRcIjtcbiAgICAgIGZvcm0uYXBwZW5kQ2hpbGQoYXJlYSk7XG4gICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGZvcm0pO1xuXG4gICAgICB0aGlzLmZvcm0gPSBmb3JtO1xuICAgICAgdGhpcy5hcmVhID0gYXJlYTtcbiAgICB9XG5cbiAgICB0aGlzLmZvcm0uYWN0aW9uID0gdGhpcy51cmkoKTtcblxuICAgIGZ1bmN0aW9uIGNvbXBsZXRlKCkge1xuICAgICAgaW5pdElmcmFtZSgpO1xuICAgICAgZm4oKTtcbiAgICB9XG5cbiAgICBjb25zdCBpbml0SWZyYW1lID0gKCkgPT4ge1xuICAgICAgaWYgKHRoaXMuaWZyYW1lKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgdGhpcy5mb3JtLnJlbW92ZUNoaWxkKHRoaXMuaWZyYW1lKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIHRoaXMub25FcnJvcihcImpzb25wIHBvbGxpbmcgaWZyYW1lIHJlbW92YWwgZXJyb3JcIiwgZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gaWU2IGR5bmFtaWMgaWZyYW1lcyB3aXRoIHRhcmdldD1cIlwiIHN1cHBvcnQgKHRoYW5rcyBDaHJpcyBMYW1iYWNoZXIpXG4gICAgICAgIGNvbnN0IGh0bWwgPSAnPGlmcmFtZSBzcmM9XCJqYXZhc2NyaXB0OjBcIiBuYW1lPVwiJyArIHRoaXMuaWZyYW1lSWQgKyAnXCI+JztcbiAgICAgICAgaWZyYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChodG1sKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgaWZyYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlmcmFtZVwiKTtcbiAgICAgICAgaWZyYW1lLm5hbWUgPSB0aGlzLmlmcmFtZUlkO1xuICAgICAgICBpZnJhbWUuc3JjID0gXCJqYXZhc2NyaXB0OjBcIjtcbiAgICAgIH1cblxuICAgICAgaWZyYW1lLmlkID0gdGhpcy5pZnJhbWVJZDtcblxuICAgICAgdGhpcy5mb3JtLmFwcGVuZENoaWxkKGlmcmFtZSk7XG4gICAgICB0aGlzLmlmcmFtZSA9IGlmcmFtZTtcbiAgICB9O1xuXG4gICAgaW5pdElmcmFtZSgpO1xuXG4gICAgLy8gZXNjYXBlIFxcbiB0byBwcmV2ZW50IGl0IGZyb20gYmVpbmcgY29udmVydGVkIGludG8gXFxyXFxuIGJ5IHNvbWUgVUFzXG4gICAgLy8gZG91YmxlIGVzY2FwaW5nIGlzIHJlcXVpcmVkIGZvciBlc2NhcGVkIG5ldyBsaW5lcyBiZWNhdXNlIHVuZXNjYXBpbmcgb2YgbmV3IGxpbmVzIGNhbiBiZSBkb25lIHNhZmVseSBvbiBzZXJ2ZXItc2lkZVxuICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UockVzY2FwZWROZXdsaW5lLCBcIlxcXFxcXG5cIik7XG4gICAgdGhpcy5hcmVhLnZhbHVlID0gZGF0YS5yZXBsYWNlKHJOZXdsaW5lLCBcIlxcXFxuXCIpO1xuXG4gICAgdHJ5IHtcbiAgICAgIHRoaXMuZm9ybS5zdWJtaXQoKTtcbiAgICB9IGNhdGNoIChlKSB7fVxuXG4gICAgaWYgKHRoaXMuaWZyYW1lLmF0dGFjaEV2ZW50KSB7XG4gICAgICB0aGlzLmlmcmFtZS5vbnJlYWR5c3RhdGVjaGFuZ2UgPSAoKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLmlmcmFtZS5yZWFkeVN0YXRlID09PSBcImNvbXBsZXRlXCIpIHtcbiAgICAgICAgICBjb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmlmcmFtZS5vbmxvYWQgPSBjb21wbGV0ZTtcbiAgICB9XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBKU09OUFBvbGxpbmc7XG4iLCIvKiBnbG9iYWwgYXR0YWNoRXZlbnQgKi9cblxuY29uc3QgWE1MSHR0cFJlcXVlc3QgPSByZXF1aXJlKFwiLi4vLi4vY29udHJpYi94bWxodHRwcmVxdWVzdC1zc2wvWE1MSHR0cFJlcXVlc3RcIik7XG5jb25zdCBQb2xsaW5nID0gcmVxdWlyZShcIi4vcG9sbGluZ1wiKTtcbmNvbnN0IEVtaXR0ZXIgPSByZXF1aXJlKFwiY29tcG9uZW50LWVtaXR0ZXJcIik7XG5jb25zdCB7IHBpY2sgfSA9IHJlcXVpcmUoXCIuLi91dGlsXCIpO1xuY29uc3QgZ2xvYmFsVGhpcyA9IHJlcXVpcmUoXCIuLi9nbG9iYWxUaGlzXCIpO1xuXG5jb25zdCBkZWJ1ZyA9IHJlcXVpcmUoXCJkZWJ1Z1wiKShcImVuZ2luZS5pby1jbGllbnQ6cG9sbGluZy14aHJcIik7XG5cbi8qKlxuICogRW1wdHkgZnVuY3Rpb25cbiAqL1xuXG5mdW5jdGlvbiBlbXB0eSgpIHt9XG5cbmNvbnN0IGhhc1hIUjIgPSAoZnVuY3Rpb24oKSB7XG4gIGNvbnN0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCh7IHhkb21haW46IGZhbHNlIH0pO1xuICByZXR1cm4gbnVsbCAhPSB4aHIucmVzcG9uc2VUeXBlO1xufSkoKTtcblxuY2xhc3MgWEhSIGV4dGVuZHMgUG9sbGluZyB7XG4gIC8qKlxuICAgKiBYSFIgUG9sbGluZyBjb25zdHJ1Y3Rvci5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHNcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdHMpIHtcbiAgICBzdXBlcihvcHRzKTtcblxuICAgIGlmICh0eXBlb2YgbG9jYXRpb24gIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIGNvbnN0IGlzU1NMID0gXCJodHRwczpcIiA9PT0gbG9jYXRpb24ucHJvdG9jb2w7XG4gICAgICBsZXQgcG9ydCA9IGxvY2F0aW9uLnBvcnQ7XG5cbiAgICAgIC8vIHNvbWUgdXNlciBhZ2VudHMgaGF2ZSBlbXB0eSBgbG9jYXRpb24ucG9ydGBcbiAgICAgIGlmICghcG9ydCkge1xuICAgICAgICBwb3J0ID0gaXNTU0wgPyA0NDMgOiA4MDtcbiAgICAgIH1cblxuICAgICAgdGhpcy54ZCA9XG4gICAgICAgICh0eXBlb2YgbG9jYXRpb24gIT09IFwidW5kZWZpbmVkXCIgJiZcbiAgICAgICAgICBvcHRzLmhvc3RuYW1lICE9PSBsb2NhdGlvbi5ob3N0bmFtZSkgfHxcbiAgICAgICAgcG9ydCAhPT0gb3B0cy5wb3J0O1xuICAgICAgdGhpcy54cyA9IG9wdHMuc2VjdXJlICE9PSBpc1NTTDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogWEhSIHN1cHBvcnRzIGJpbmFyeVxuICAgICAqL1xuICAgIGNvbnN0IGZvcmNlQmFzZTY0ID0gb3B0cyAmJiBvcHRzLmZvcmNlQmFzZTY0O1xuICAgIHRoaXMuc3VwcG9ydHNCaW5hcnkgPSBoYXNYSFIyICYmICFmb3JjZUJhc2U2NDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgcmVxdWVzdC5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1ldGhvZFxuICAgKiBAYXBpIHByaXZhdGVcbiAgICovXG4gIHJlcXVlc3Qob3B0cyA9IHt9KSB7XG4gICAgT2JqZWN0LmFzc2lnbihvcHRzLCB7IHhkOiB0aGlzLnhkLCB4czogdGhpcy54cyB9LCB0aGlzLm9wdHMpO1xuICAgIHJldHVybiBuZXcgUmVxdWVzdCh0aGlzLnVyaSgpLCBvcHRzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZW5kcyBkYXRhLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gZGF0YSB0byBzZW5kLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsZWQgdXBvbiBmbHVzaC5cbiAgICogQGFwaSBwcml2YXRlXG4gICAqL1xuICBkb1dyaXRlKGRhdGEsIGZuKSB7XG4gICAgY29uc3QgcmVxID0gdGhpcy5yZXF1ZXN0KHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBkYXRhOiBkYXRhXG4gICAgfSk7XG4gICAgcmVxLm9uKFwic3VjY2Vzc1wiLCBmbik7XG4gICAgcmVxLm9uKFwiZXJyb3JcIiwgZXJyID0+IHtcbiAgICAgIHRoaXMub25FcnJvcihcInhociBwb3N0IGVycm9yXCIsIGVycik7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogU3RhcnRzIGEgcG9sbCBjeWNsZS5cbiAgICpcbiAgICogQGFwaSBwcml2YXRlXG4gICAqL1xuICBkb1BvbGwoKSB7XG4gICAgZGVidWcoXCJ4aHIgcG9sbFwiKTtcbiAgICBjb25zdCByZXEgPSB0aGlzLnJlcXVlc3QoKTtcbiAgICByZXEub24oXCJkYXRhXCIsIHRoaXMub25EYXRhLmJpbmQodGhpcykpO1xuICAgIHJlcS5vbihcImVycm9yXCIsIGVyciA9PiB7XG4gICAgICB0aGlzLm9uRXJyb3IoXCJ4aHIgcG9sbCBlcnJvclwiLCBlcnIpO1xuICAgIH0pO1xuICAgIHRoaXMucG9sbFhociA9IHJlcTtcbiAgfVxufVxuXG5jbGFzcyBSZXF1ZXN0IGV4dGVuZHMgRW1pdHRlciB7XG4gIC8qKlxuICAgKiBSZXF1ZXN0IGNvbnN0cnVjdG9yXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih1cmksIG9wdHMpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMub3B0cyA9IG9wdHM7XG5cbiAgICB0aGlzLm1ldGhvZCA9IG9wdHMubWV0aG9kIHx8IFwiR0VUXCI7XG4gICAgdGhpcy51cmkgPSB1cmk7XG4gICAgdGhpcy5hc3luYyA9IGZhbHNlICE9PSBvcHRzLmFzeW5jO1xuICAgIHRoaXMuZGF0YSA9IHVuZGVmaW5lZCAhPT0gb3B0cy5kYXRhID8gb3B0cy5kYXRhIDogbnVsbDtcblxuICAgIHRoaXMuY3JlYXRlKCk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyB0aGUgWEhSIG9iamVjdCBhbmQgc2VuZHMgdGhlIHJlcXVlc3QuXG4gICAqXG4gICAqIEBhcGkgcHJpdmF0ZVxuICAgKi9cbiAgY3JlYXRlKCkge1xuICAgIGNvbnN0IG9wdHMgPSBwaWNrKFxuICAgICAgdGhpcy5vcHRzLFxuICAgICAgXCJhZ2VudFwiLFxuICAgICAgXCJlbmFibGVzWERSXCIsXG4gICAgICBcInBmeFwiLFxuICAgICAgXCJrZXlcIixcbiAgICAgIFwicGFzc3BocmFzZVwiLFxuICAgICAgXCJjZXJ0XCIsXG4gICAgICBcImNhXCIsXG4gICAgICBcImNpcGhlcnNcIixcbiAgICAgIFwicmVqZWN0VW5hdXRob3JpemVkXCIsXG4gICAgICBcImF1dG9VbnJlZlwiXG4gICAgKTtcbiAgICBvcHRzLnhkb21haW4gPSAhIXRoaXMub3B0cy54ZDtcbiAgICBvcHRzLnhzY2hlbWUgPSAhIXRoaXMub3B0cy54cztcblxuICAgIGNvbnN0IHhociA9ICh0aGlzLnhociA9IG5ldyBYTUxIdHRwUmVxdWVzdChvcHRzKSk7XG5cbiAgICB0cnkge1xuICAgICAgZGVidWcoXCJ4aHIgb3BlbiAlczogJXNcIiwgdGhpcy5tZXRob2QsIHRoaXMudXJpKTtcbiAgICAgIHhoci5vcGVuKHRoaXMubWV0aG9kLCB0aGlzLnVyaSwgdGhpcy5hc3luYyk7XG4gICAgICB0cnkge1xuICAgICAgICBpZiAodGhpcy5vcHRzLmV4dHJhSGVhZGVycykge1xuICAgICAgICAgIHhoci5zZXREaXNhYmxlSGVhZGVyQ2hlY2sgJiYgeGhyLnNldERpc2FibGVIZWFkZXJDaGVjayh0cnVlKTtcbiAgICAgICAgICBmb3IgKGxldCBpIGluIHRoaXMub3B0cy5leHRyYUhlYWRlcnMpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdHMuZXh0cmFIZWFkZXJzLmhhc093blByb3BlcnR5KGkpKSB7XG4gICAgICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKGksIHRoaXMub3B0cy5leHRyYUhlYWRlcnNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge31cblxuICAgICAgaWYgKFwiUE9TVFwiID09PSB0aGlzLm1ldGhvZCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC10eXBlXCIsIFwidGV4dC9wbGFpbjtjaGFyc2V0PVVURi04XCIpO1xuICAgICAgICB9IGNhdGNoIChlKSB7fVxuICAgICAgfVxuXG4gICAgICB0cnkge1xuICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihcIkFjY2VwdFwiLCBcIiovKlwiKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHt9XG5cbiAgICAgIC8vIGllNiBjaGVja1xuICAgICAgaWYgKFwid2l0aENyZWRlbnRpYWxzXCIgaW4geGhyKSB7XG4gICAgICAgIHhoci53aXRoQ3JlZGVudGlhbHMgPSB0aGlzLm9wdHMud2l0aENyZWRlbnRpYWxzO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5vcHRzLnJlcXVlc3RUaW1lb3V0KSB7XG4gICAgICAgIHhoci50aW1lb3V0ID0gdGhpcy5vcHRzLnJlcXVlc3RUaW1lb3V0O1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5oYXNYRFIoKSkge1xuICAgICAgICB4aHIub25sb2FkID0gKCkgPT4ge1xuICAgICAgICAgIHRoaXMub25Mb2FkKCk7XG4gICAgICAgIH07XG4gICAgICAgIHhoci5vbmVycm9yID0gKCkgPT4ge1xuICAgICAgICAgIHRoaXMub25FcnJvcih4aHIucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSAoKSA9PiB7XG4gICAgICAgICAgaWYgKDQgIT09IHhoci5yZWFkeVN0YXRlKSByZXR1cm47XG4gICAgICAgICAgaWYgKDIwMCA9PT0geGhyLnN0YXR1cyB8fCAxMjIzID09PSB4aHIuc3RhdHVzKSB7XG4gICAgICAgICAgICB0aGlzLm9uTG9hZCgpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBtYWtlIHN1cmUgdGhlIGBlcnJvcmAgZXZlbnQgaGFuZGxlciB0aGF0J3MgdXNlci1zZXRcbiAgICAgICAgICAgIC8vIGRvZXMgbm90IHRocm93IGluIHRoZSBzYW1lIHRpY2sgYW5kIGdldHMgY2F1Z2h0IGhlcmVcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICB0aGlzLm9uRXJyb3IodHlwZW9mIHhoci5zdGF0dXMgPT09IFwibnVtYmVyXCIgPyB4aHIuc3RhdHVzIDogMCk7XG4gICAgICAgICAgICB9LCAwKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGRlYnVnKFwieGhyIGRhdGEgJXNcIiwgdGhpcy5kYXRhKTtcbiAgICAgIHhoci5zZW5kKHRoaXMuZGF0YSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLy8gTmVlZCB0byBkZWZlciBzaW5jZSAuY3JlYXRlKCkgaXMgY2FsbGVkIGRpcmVjdGx5IGZyb20gdGhlIGNvbnN0cnVjdG9yXG4gICAgICAvLyBhbmQgdGh1cyB0aGUgJ2Vycm9yJyBldmVudCBjYW4gb25seSBiZSBvbmx5IGJvdW5kICphZnRlciogdGhpcyBleGNlcHRpb25cbiAgICAgIC8vIG9jY3Vycy4gIFRoZXJlZm9yZSwgYWxzbywgd2UgY2Fubm90IHRocm93IGhlcmUgYXQgYWxsLlxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRoaXMub25FcnJvcihlKTtcbiAgICAgIH0sIDApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgZG9jdW1lbnQgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIHRoaXMuaW5kZXggPSBSZXF1ZXN0LnJlcXVlc3RzQ291bnQrKztcbiAgICAgIFJlcXVlc3QucmVxdWVzdHNbdGhpcy5pbmRleF0gPSB0aGlzO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsZWQgdXBvbiBzdWNjZXNzZnVsIHJlc3BvbnNlLlxuICAgKlxuICAgKiBAYXBpIHByaXZhdGVcbiAgICovXG4gIG9uU3VjY2VzcygpIHtcbiAgICB0aGlzLmVtaXQoXCJzdWNjZXNzXCIpO1xuICAgIHRoaXMuY2xlYW51cCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGxlZCBpZiB3ZSBoYXZlIGRhdGEuXG4gICAqXG4gICAqIEBhcGkgcHJpdmF0ZVxuICAgKi9cbiAgb25EYXRhKGRhdGEpIHtcbiAgICB0aGlzLmVtaXQoXCJkYXRhXCIsIGRhdGEpO1xuICAgIHRoaXMub25TdWNjZXNzKCk7XG4gIH1cblxuICAvKipcbiAgICogQ2FsbGVkIHVwb24gZXJyb3IuXG4gICAqXG4gICAqIEBhcGkgcHJpdmF0ZVxuICAgKi9cbiAgb25FcnJvcihlcnIpIHtcbiAgICB0aGlzLmVtaXQoXCJlcnJvclwiLCBlcnIpO1xuICAgIHRoaXMuY2xlYW51cCh0cnVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhbnMgdXAgaG91c2UuXG4gICAqXG4gICAqIEBhcGkgcHJpdmF0ZVxuICAgKi9cbiAgY2xlYW51cChmcm9tRXJyb3IpIHtcbiAgICBpZiAoXCJ1bmRlZmluZWRcIiA9PT0gdHlwZW9mIHRoaXMueGhyIHx8IG51bGwgPT09IHRoaXMueGhyKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIHhtbGh0dHByZXF1ZXN0XG4gICAgaWYgKHRoaXMuaGFzWERSKCkpIHtcbiAgICAgIHRoaXMueGhyLm9ubG9hZCA9IHRoaXMueGhyLm9uZXJyb3IgPSBlbXB0eTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy54aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZW1wdHk7XG4gICAgfVxuXG4gICAgaWYgKGZyb21FcnJvcikge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdGhpcy54aHIuYWJvcnQoKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBkb2N1bWVudCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgZGVsZXRlIFJlcXVlc3QucmVxdWVzdHNbdGhpcy5pbmRleF07XG4gICAgfVxuXG4gICAgdGhpcy54aHIgPSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGxlZCB1cG9uIGxvYWQuXG4gICAqXG4gICAqIEBhcGkgcHJpdmF0ZVxuICAgKi9cbiAgb25Mb2FkKCkge1xuICAgIGNvbnN0IGRhdGEgPSB0aGlzLnhoci5yZXNwb25zZVRleHQ7XG4gICAgaWYgKGRhdGEgIT09IG51bGwpIHtcbiAgICAgIHRoaXMub25EYXRhKGRhdGEpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBpdCBoYXMgWERvbWFpblJlcXVlc3QuXG4gICAqXG4gICAqIEBhcGkgcHJpdmF0ZVxuICAgKi9cbiAgaGFzWERSKCkge1xuICAgIHJldHVybiB0eXBlb2YgWERvbWFpblJlcXVlc3QgIT09IFwidW5kZWZpbmVkXCIgJiYgIXRoaXMueHMgJiYgdGhpcy5lbmFibGVzWERSO1xuICB9XG5cbiAgLyoqXG4gICAqIEFib3J0cyB0aGUgcmVxdWVzdC5cbiAgICpcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG4gIGFib3J0KCkge1xuICAgIHRoaXMuY2xlYW51cCgpO1xuICB9XG59XG5cbi8qKlxuICogQWJvcnRzIHBlbmRpbmcgcmVxdWVzdHMgd2hlbiB1bmxvYWRpbmcgdGhlIHdpbmRvdy4gVGhpcyBpcyBuZWVkZWQgdG8gcHJldmVudFxuICogbWVtb3J5IGxlYWtzIChlLmcuIHdoZW4gdXNpbmcgSUUpIGFuZCB0byBlbnN1cmUgdGhhdCBubyBzcHVyaW91cyBlcnJvciBpc1xuICogZW1pdHRlZC5cbiAqL1xuXG5SZXF1ZXN0LnJlcXVlc3RzQ291bnQgPSAwO1xuUmVxdWVzdC5yZXF1ZXN0cyA9IHt9O1xuXG5pZiAodHlwZW9mIGRvY3VtZW50ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gIGlmICh0eXBlb2YgYXR0YWNoRXZlbnQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgIGF0dGFjaEV2ZW50KFwib251bmxvYWRcIiwgdW5sb2FkSGFuZGxlcik7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGFkZEV2ZW50TGlzdGVuZXIgPT09IFwiZnVuY3Rpb25cIikge1xuICAgIGNvbnN0IHRlcm1pbmF0aW9uRXZlbnQgPSBcIm9ucGFnZWhpZGVcIiBpbiBnbG9iYWxUaGlzID8gXCJwYWdlaGlkZVwiIDogXCJ1bmxvYWRcIjtcbiAgICBhZGRFdmVudExpc3RlbmVyKHRlcm1pbmF0aW9uRXZlbnQsIHVubG9hZEhhbmRsZXIsIGZhbHNlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiB1bmxvYWRIYW5kbGVyKCkge1xuICBmb3IgKGxldCBpIGluIFJlcXVlc3QucmVxdWVzdHMpIHtcbiAgICBpZiAoUmVxdWVzdC5yZXF1ZXN0cy5oYXNPd25Qcm9wZXJ0eShpKSkge1xuICAgICAgUmVxdWVzdC5yZXF1ZXN0c1tpXS5hYm9ydCgpO1xuICAgIH1cbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFhIUjtcbm1vZHVsZS5leHBvcnRzLlJlcXVlc3QgPSBSZXF1ZXN0O1xuIiwiY29uc3QgVHJhbnNwb3J0ID0gcmVxdWlyZShcIi4uL3RyYW5zcG9ydFwiKTtcbmNvbnN0IHBhcnNlcXMgPSByZXF1aXJlKFwicGFyc2Vxc1wiKTtcbmNvbnN0IHBhcnNlciA9IHJlcXVpcmUoXCJlbmdpbmUuaW8tcGFyc2VyXCIpO1xuY29uc3QgeWVhc3QgPSByZXF1aXJlKFwieWVhc3RcIik7XG5cbmNvbnN0IGRlYnVnID0gcmVxdWlyZShcImRlYnVnXCIpKFwiZW5naW5lLmlvLWNsaWVudDpwb2xsaW5nXCIpO1xuXG5jbGFzcyBQb2xsaW5nIGV4dGVuZHMgVHJhbnNwb3J0IHtcbiAgLyoqXG4gICAqIFRyYW5zcG9ydCBuYW1lLlxuICAgKi9cbiAgZ2V0IG5hbWUoKSB7XG4gICAgcmV0dXJuIFwicG9sbGluZ1wiO1xuICB9XG5cbiAgLyoqXG4gICAqIE9wZW5zIHRoZSBzb2NrZXQgKHRyaWdnZXJzIHBvbGxpbmcpLiBXZSB3cml0ZSBhIFBJTkcgbWVzc2FnZSB0byBkZXRlcm1pbmVcbiAgICogd2hlbiB0aGUgdHJhbnNwb3J0IGlzIG9wZW4uXG4gICAqXG4gICAqIEBhcGkgcHJpdmF0ZVxuICAgKi9cbiAgZG9PcGVuKCkge1xuICAgIHRoaXMucG9sbCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFBhdXNlcyBwb2xsaW5nLlxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayB1cG9uIGJ1ZmZlcnMgYXJlIGZsdXNoZWQgYW5kIHRyYW5zcG9ydCBpcyBwYXVzZWRcbiAgICogQGFwaSBwcml2YXRlXG4gICAqL1xuICBwYXVzZShvblBhdXNlKSB7XG4gICAgdGhpcy5yZWFkeVN0YXRlID0gXCJwYXVzaW5nXCI7XG5cbiAgICBjb25zdCBwYXVzZSA9ICgpID0+IHtcbiAgICAgIGRlYnVnKFwicGF1c2VkXCIpO1xuICAgICAgdGhpcy5yZWFkeVN0YXRlID0gXCJwYXVzZWRcIjtcbiAgICAgIG9uUGF1c2UoKTtcbiAgICB9O1xuXG4gICAgaWYgKHRoaXMucG9sbGluZyB8fCAhdGhpcy53cml0YWJsZSkge1xuICAgICAgbGV0IHRvdGFsID0gMDtcblxuICAgICAgaWYgKHRoaXMucG9sbGluZykge1xuICAgICAgICBkZWJ1ZyhcIndlIGFyZSBjdXJyZW50bHkgcG9sbGluZyAtIHdhaXRpbmcgdG8gcGF1c2VcIik7XG4gICAgICAgIHRvdGFsKys7XG4gICAgICAgIHRoaXMub25jZShcInBvbGxDb21wbGV0ZVwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBkZWJ1ZyhcInByZS1wYXVzZSBwb2xsaW5nIGNvbXBsZXRlXCIpO1xuICAgICAgICAgIC0tdG90YWwgfHwgcGF1c2UoKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGlmICghdGhpcy53cml0YWJsZSkge1xuICAgICAgICBkZWJ1ZyhcIndlIGFyZSBjdXJyZW50bHkgd3JpdGluZyAtIHdhaXRpbmcgdG8gcGF1c2VcIik7XG4gICAgICAgIHRvdGFsKys7XG4gICAgICAgIHRoaXMub25jZShcImRyYWluXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGRlYnVnKFwicHJlLXBhdXNlIHdyaXRpbmcgY29tcGxldGVcIik7XG4gICAgICAgICAgLS10b3RhbCB8fCBwYXVzZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcGF1c2UoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU3RhcnRzIHBvbGxpbmcgY3ljbGUuXG4gICAqXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuICBwb2xsKCkge1xuICAgIGRlYnVnKFwicG9sbGluZ1wiKTtcbiAgICB0aGlzLnBvbGxpbmcgPSB0cnVlO1xuICAgIHRoaXMuZG9Qb2xsKCk7XG4gICAgdGhpcy5lbWl0KFwicG9sbFwiKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBPdmVybG9hZHMgb25EYXRhIHRvIGRldGVjdCBwYXlsb2Fkcy5cbiAgICpcbiAgICogQGFwaSBwcml2YXRlXG4gICAqL1xuICBvbkRhdGEoZGF0YSkge1xuICAgIGRlYnVnKFwicG9sbGluZyBnb3QgZGF0YSAlc1wiLCBkYXRhKTtcbiAgICBjb25zdCBjYWxsYmFjayA9IHBhY2tldCA9PiB7XG4gICAgICAvLyBpZiBpdHMgdGhlIGZpcnN0IG1lc3NhZ2Ugd2UgY29uc2lkZXIgdGhlIHRyYW5zcG9ydCBvcGVuXG4gICAgICBpZiAoXCJvcGVuaW5nXCIgPT09IHRoaXMucmVhZHlTdGF0ZSAmJiBwYWNrZXQudHlwZSA9PT0gXCJvcGVuXCIpIHtcbiAgICAgICAgdGhpcy5vbk9wZW4oKTtcbiAgICAgIH1cblxuICAgICAgLy8gaWYgaXRzIGEgY2xvc2UgcGFja2V0LCB3ZSBjbG9zZSB0aGUgb25nb2luZyByZXF1ZXN0c1xuICAgICAgaWYgKFwiY2xvc2VcIiA9PT0gcGFja2V0LnR5cGUpIHtcbiAgICAgICAgdGhpcy5vbkNsb3NlKCk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgLy8gb3RoZXJ3aXNlIGJ5cGFzcyBvbkRhdGEgYW5kIGhhbmRsZSB0aGUgbWVzc2FnZVxuICAgICAgdGhpcy5vblBhY2tldChwYWNrZXQpO1xuICAgIH07XG5cbiAgICAvLyBkZWNvZGUgcGF5bG9hZFxuICAgIHBhcnNlci5kZWNvZGVQYXlsb2FkKGRhdGEsIHRoaXMuc29ja2V0LmJpbmFyeVR5cGUpLmZvckVhY2goY2FsbGJhY2spO1xuXG4gICAgLy8gaWYgYW4gZXZlbnQgZGlkIG5vdCB0cmlnZ2VyIGNsb3NpbmdcbiAgICBpZiAoXCJjbG9zZWRcIiAhPT0gdGhpcy5yZWFkeVN0YXRlKSB7XG4gICAgICAvLyBpZiB3ZSBnb3QgZGF0YSB3ZSdyZSBub3QgcG9sbGluZ1xuICAgICAgdGhpcy5wb2xsaW5nID0gZmFsc2U7XG4gICAgICB0aGlzLmVtaXQoXCJwb2xsQ29tcGxldGVcIik7XG5cbiAgICAgIGlmIChcIm9wZW5cIiA9PT0gdGhpcy5yZWFkeVN0YXRlKSB7XG4gICAgICAgIHRoaXMucG9sbCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGVidWcoJ2lnbm9yaW5nIHBvbGwgLSB0cmFuc3BvcnQgc3RhdGUgXCIlc1wiJywgdGhpcy5yZWFkeVN0YXRlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRm9yIHBvbGxpbmcsIHNlbmQgYSBjbG9zZSBwYWNrZXQuXG4gICAqXG4gICAqIEBhcGkgcHJpdmF0ZVxuICAgKi9cbiAgZG9DbG9zZSgpIHtcbiAgICBjb25zdCBjbG9zZSA9ICgpID0+IHtcbiAgICAgIGRlYnVnKFwid3JpdGluZyBjbG9zZSBwYWNrZXRcIik7XG4gICAgICB0aGlzLndyaXRlKFt7IHR5cGU6IFwiY2xvc2VcIiB9XSk7XG4gICAgfTtcblxuICAgIGlmIChcIm9wZW5cIiA9PT0gdGhpcy5yZWFkeVN0YXRlKSB7XG4gICAgICBkZWJ1ZyhcInRyYW5zcG9ydCBvcGVuIC0gY2xvc2luZ1wiKTtcbiAgICAgIGNsb3NlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGluIGNhc2Ugd2UncmUgdHJ5aW5nIHRvIGNsb3NlIHdoaWxlXG4gICAgICAvLyBoYW5kc2hha2luZyBpcyBpbiBwcm9ncmVzcyAoR0gtMTY0KVxuICAgICAgZGVidWcoXCJ0cmFuc3BvcnQgbm90IG9wZW4gLSBkZWZlcnJpbmcgY2xvc2VcIik7XG4gICAgICB0aGlzLm9uY2UoXCJvcGVuXCIsIGNsb3NlKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogV3JpdGVzIGEgcGFja2V0cyBwYXlsb2FkLlxuICAgKlxuICAgKiBAcGFyYW0ge0FycmF5fSBkYXRhIHBhY2tldHNcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZHJhaW4gY2FsbGJhY2tcbiAgICogQGFwaSBwcml2YXRlXG4gICAqL1xuICB3cml0ZShwYWNrZXRzKSB7XG4gICAgdGhpcy53cml0YWJsZSA9IGZhbHNlO1xuXG4gICAgcGFyc2VyLmVuY29kZVBheWxvYWQocGFja2V0cywgZGF0YSA9PiB7XG4gICAgICB0aGlzLmRvV3JpdGUoZGF0YSwgKCkgPT4ge1xuICAgICAgICB0aGlzLndyaXRhYmxlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5lbWl0KFwiZHJhaW5cIik7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZXMgdXJpIGZvciBjb25uZWN0aW9uLlxuICAgKlxuICAgKiBAYXBpIHByaXZhdGVcbiAgICovXG4gIHVyaSgpIHtcbiAgICBsZXQgcXVlcnkgPSB0aGlzLnF1ZXJ5IHx8IHt9O1xuICAgIGNvbnN0IHNjaGVtYSA9IHRoaXMub3B0cy5zZWN1cmUgPyBcImh0dHBzXCIgOiBcImh0dHBcIjtcbiAgICBsZXQgcG9ydCA9IFwiXCI7XG5cbiAgICAvLyBjYWNoZSBidXN0aW5nIGlzIGZvcmNlZFxuICAgIGlmIChmYWxzZSAhPT0gdGhpcy5vcHRzLnRpbWVzdGFtcFJlcXVlc3RzKSB7XG4gICAgICBxdWVyeVt0aGlzLm9wdHMudGltZXN0YW1wUGFyYW1dID0geWVhc3QoKTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuc3VwcG9ydHNCaW5hcnkgJiYgIXF1ZXJ5LnNpZCkge1xuICAgICAgcXVlcnkuYjY0ID0gMTtcbiAgICB9XG5cbiAgICBxdWVyeSA9IHBhcnNlcXMuZW5jb2RlKHF1ZXJ5KTtcblxuICAgIC8vIGF2b2lkIHBvcnQgaWYgZGVmYXVsdCBmb3Igc2NoZW1hXG4gICAgaWYgKFxuICAgICAgdGhpcy5vcHRzLnBvcnQgJiZcbiAgICAgICgoXCJodHRwc1wiID09PSBzY2hlbWEgJiYgTnVtYmVyKHRoaXMub3B0cy5wb3J0KSAhPT0gNDQzKSB8fFxuICAgICAgICAoXCJodHRwXCIgPT09IHNjaGVtYSAmJiBOdW1iZXIodGhpcy5vcHRzLnBvcnQpICE9PSA4MCkpXG4gICAgKSB7XG4gICAgICBwb3J0ID0gXCI6XCIgKyB0aGlzLm9wdHMucG9ydDtcbiAgICB9XG5cbiAgICAvLyBwcmVwZW5kID8gdG8gcXVlcnlcbiAgICBpZiAocXVlcnkubGVuZ3RoKSB7XG4gICAgICBxdWVyeSA9IFwiP1wiICsgcXVlcnk7XG4gICAgfVxuXG4gICAgY29uc3QgaXB2NiA9IHRoaXMub3B0cy5ob3N0bmFtZS5pbmRleE9mKFwiOlwiKSAhPT0gLTE7XG4gICAgcmV0dXJuIChcbiAgICAgIHNjaGVtYSArXG4gICAgICBcIjovL1wiICtcbiAgICAgIChpcHY2ID8gXCJbXCIgKyB0aGlzLm9wdHMuaG9zdG5hbWUgKyBcIl1cIiA6IHRoaXMub3B0cy5ob3N0bmFtZSkgK1xuICAgICAgcG9ydCArXG4gICAgICB0aGlzLm9wdHMucGF0aCArXG4gICAgICBxdWVyeVxuICAgICk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBQb2xsaW5nO1xuIiwiY29uc3QgZ2xvYmFsVGhpcyA9IHJlcXVpcmUoXCIuLi9nbG9iYWxUaGlzXCIpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgV2ViU29ja2V0OiBnbG9iYWxUaGlzLldlYlNvY2tldCB8fCBnbG9iYWxUaGlzLk1veldlYlNvY2tldCxcbiAgdXNpbmdCcm93c2VyV2ViU29ja2V0OiB0cnVlLFxuICBkZWZhdWx0QmluYXJ5VHlwZTogXCJhcnJheWJ1ZmZlclwiXG59O1xuIiwiY29uc3QgVHJhbnNwb3J0ID0gcmVxdWlyZShcIi4uL3RyYW5zcG9ydFwiKTtcbmNvbnN0IHBhcnNlciA9IHJlcXVpcmUoXCJlbmdpbmUuaW8tcGFyc2VyXCIpO1xuY29uc3QgcGFyc2VxcyA9IHJlcXVpcmUoXCJwYXJzZXFzXCIpO1xuY29uc3QgeWVhc3QgPSByZXF1aXJlKFwieWVhc3RcIik7XG5jb25zdCB7IHBpY2sgfSA9IHJlcXVpcmUoXCIuLi91dGlsXCIpO1xuY29uc3Qge1xuICBXZWJTb2NrZXQsXG4gIHVzaW5nQnJvd3NlcldlYlNvY2tldCxcbiAgZGVmYXVsdEJpbmFyeVR5cGVcbn0gPSByZXF1aXJlKFwiLi93ZWJzb2NrZXQtY29uc3RydWN0b3JcIik7XG5cbmNvbnN0IGRlYnVnID0gcmVxdWlyZShcImRlYnVnXCIpKFwiZW5naW5lLmlvLWNsaWVudDp3ZWJzb2NrZXRcIik7XG5cbi8vIGRldGVjdCBSZWFjdE5hdGl2ZSBlbnZpcm9ubWVudFxuY29uc3QgaXNSZWFjdE5hdGl2ZSA9XG4gIHR5cGVvZiBuYXZpZ2F0b3IgIT09IFwidW5kZWZpbmVkXCIgJiZcbiAgdHlwZW9mIG5hdmlnYXRvci5wcm9kdWN0ID09PSBcInN0cmluZ1wiICYmXG4gIG5hdmlnYXRvci5wcm9kdWN0LnRvTG93ZXJDYXNlKCkgPT09IFwicmVhY3RuYXRpdmVcIjtcblxuY2xhc3MgV1MgZXh0ZW5kcyBUcmFuc3BvcnQge1xuICAvKipcbiAgICogV2ViU29ja2V0IHRyYW5zcG9ydCBjb25zdHJ1Y3Rvci5cbiAgICpcbiAgICogQGFwaSB7T2JqZWN0fSBjb25uZWN0aW9uIG9wdGlvbnNcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdHMpIHtcbiAgICBzdXBlcihvcHRzKTtcblxuICAgIHRoaXMuc3VwcG9ydHNCaW5hcnkgPSAhb3B0cy5mb3JjZUJhc2U2NDtcbiAgfVxuXG4gIC8qKlxuICAgKiBUcmFuc3BvcnQgbmFtZS5cbiAgICpcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG4gIGdldCBuYW1lKCkge1xuICAgIHJldHVybiBcIndlYnNvY2tldFwiO1xuICB9XG5cbiAgLyoqXG4gICAqIE9wZW5zIHNvY2tldC5cbiAgICpcbiAgICogQGFwaSBwcml2YXRlXG4gICAqL1xuICBkb09wZW4oKSB7XG4gICAgaWYgKCF0aGlzLmNoZWNrKCkpIHtcbiAgICAgIC8vIGxldCBwcm9iZSB0aW1lb3V0XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgdXJpID0gdGhpcy51cmkoKTtcbiAgICBjb25zdCBwcm90b2NvbHMgPSB0aGlzLm9wdHMucHJvdG9jb2xzO1xuXG4gICAgLy8gUmVhY3QgTmF0aXZlIG9ubHkgc3VwcG9ydHMgdGhlICdoZWFkZXJzJyBvcHRpb24sIGFuZCB3aWxsIHByaW50IGEgd2FybmluZyBpZiBhbnl0aGluZyBlbHNlIGlzIHBhc3NlZFxuICAgIGNvbnN0IG9wdHMgPSBpc1JlYWN0TmF0aXZlXG4gICAgICA/IHt9XG4gICAgICA6IHBpY2soXG4gICAgICAgICAgdGhpcy5vcHRzLFxuICAgICAgICAgIFwiYWdlbnRcIixcbiAgICAgICAgICBcInBlck1lc3NhZ2VEZWZsYXRlXCIsXG4gICAgICAgICAgXCJwZnhcIixcbiAgICAgICAgICBcImtleVwiLFxuICAgICAgICAgIFwicGFzc3BocmFzZVwiLFxuICAgICAgICAgIFwiY2VydFwiLFxuICAgICAgICAgIFwiY2FcIixcbiAgICAgICAgICBcImNpcGhlcnNcIixcbiAgICAgICAgICBcInJlamVjdFVuYXV0aG9yaXplZFwiLFxuICAgICAgICAgIFwibG9jYWxBZGRyZXNzXCIsXG4gICAgICAgICAgXCJwcm90b2NvbFZlcnNpb25cIixcbiAgICAgICAgICBcIm9yaWdpblwiLFxuICAgICAgICAgIFwibWF4UGF5bG9hZFwiLFxuICAgICAgICAgIFwiZmFtaWx5XCIsXG4gICAgICAgICAgXCJjaGVja1NlcnZlcklkZW50aXR5XCJcbiAgICAgICAgKTtcblxuICAgIGlmICh0aGlzLm9wdHMuZXh0cmFIZWFkZXJzKSB7XG4gICAgICBvcHRzLmhlYWRlcnMgPSB0aGlzLm9wdHMuZXh0cmFIZWFkZXJzO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICB0aGlzLndzID1cbiAgICAgICAgdXNpbmdCcm93c2VyV2ViU29ja2V0ICYmICFpc1JlYWN0TmF0aXZlXG4gICAgICAgICAgPyBwcm90b2NvbHNcbiAgICAgICAgICAgID8gbmV3IFdlYlNvY2tldCh1cmksIHByb3RvY29scylcbiAgICAgICAgICAgIDogbmV3IFdlYlNvY2tldCh1cmkpXG4gICAgICAgICAgOiBuZXcgV2ViU29ja2V0KHVyaSwgcHJvdG9jb2xzLCBvcHRzKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHJldHVybiB0aGlzLmVtaXQoXCJlcnJvclwiLCBlcnIpO1xuICAgIH1cblxuICAgIHRoaXMud3MuYmluYXJ5VHlwZSA9IHRoaXMuc29ja2V0LmJpbmFyeVR5cGUgfHwgZGVmYXVsdEJpbmFyeVR5cGU7XG5cbiAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBldmVudCBsaXN0ZW5lcnMgdG8gdGhlIHNvY2tldFxuICAgKlxuICAgKiBAYXBpIHByaXZhdGVcbiAgICovXG4gIGFkZEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMud3Mub25vcGVuID0gKCkgPT4ge1xuICAgICAgaWYgKHRoaXMub3B0cy5hdXRvVW5yZWYpIHtcbiAgICAgICAgdGhpcy53cy5fc29ja2V0LnVucmVmKCk7XG4gICAgICB9XG4gICAgICB0aGlzLm9uT3BlbigpO1xuICAgIH07XG4gICAgdGhpcy53cy5vbmNsb3NlID0gdGhpcy5vbkNsb3NlLmJpbmQodGhpcyk7XG4gICAgdGhpcy53cy5vbm1lc3NhZ2UgPSBldiA9PiB0aGlzLm9uRGF0YShldi5kYXRhKTtcbiAgICB0aGlzLndzLm9uZXJyb3IgPSBlID0+IHRoaXMub25FcnJvcihcIndlYnNvY2tldCBlcnJvclwiLCBlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBXcml0ZXMgZGF0YSB0byBzb2NrZXQuXG4gICAqXG4gICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IG9mIHBhY2tldHMuXG4gICAqIEBhcGkgcHJpdmF0ZVxuICAgKi9cbiAgd3JpdGUocGFja2V0cykge1xuICAgIHRoaXMud3JpdGFibGUgPSBmYWxzZTtcblxuICAgIC8vIGVuY29kZVBhY2tldCBlZmZpY2llbnQgYXMgaXQgdXNlcyBXUyBmcmFtaW5nXG4gICAgLy8gbm8gbmVlZCBmb3IgZW5jb2RlUGF5bG9hZFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFja2V0cy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgcGFja2V0ID0gcGFja2V0c1tpXTtcbiAgICAgIGNvbnN0IGxhc3RQYWNrZXQgPSBpID09PSBwYWNrZXRzLmxlbmd0aCAtIDE7XG5cbiAgICAgIHBhcnNlci5lbmNvZGVQYWNrZXQocGFja2V0LCB0aGlzLnN1cHBvcnRzQmluYXJ5LCBkYXRhID0+IHtcbiAgICAgICAgLy8gYWx3YXlzIGNyZWF0ZSBhIG5ldyBvYmplY3QgKEdILTQzNylcbiAgICAgICAgY29uc3Qgb3B0cyA9IHt9O1xuICAgICAgICBpZiAoIXVzaW5nQnJvd3NlcldlYlNvY2tldCkge1xuICAgICAgICAgIGlmIChwYWNrZXQub3B0aW9ucykge1xuICAgICAgICAgICAgb3B0cy5jb21wcmVzcyA9IHBhY2tldC5vcHRpb25zLmNvbXByZXNzO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICh0aGlzLm9wdHMucGVyTWVzc2FnZURlZmxhdGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGxlbiA9XG4gICAgICAgICAgICAgIFwic3RyaW5nXCIgPT09IHR5cGVvZiBkYXRhID8gQnVmZmVyLmJ5dGVMZW5ndGgoZGF0YSkgOiBkYXRhLmxlbmd0aDtcbiAgICAgICAgICAgIGlmIChsZW4gPCB0aGlzLm9wdHMucGVyTWVzc2FnZURlZmxhdGUudGhyZXNob2xkKSB7XG4gICAgICAgICAgICAgIG9wdHMuY29tcHJlc3MgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTb21ldGltZXMgdGhlIHdlYnNvY2tldCBoYXMgYWxyZWFkeSBiZWVuIGNsb3NlZCBidXQgdGhlIGJyb3dzZXIgZGlkbid0XG4gICAgICAgIC8vIGhhdmUgYSBjaGFuY2Ugb2YgaW5mb3JtaW5nIHVzIGFib3V0IGl0IHlldCwgaW4gdGhhdCBjYXNlIHNlbmQgd2lsbFxuICAgICAgICAvLyB0aHJvdyBhbiBlcnJvclxuICAgICAgICB0cnkge1xuICAgICAgICAgIGlmICh1c2luZ0Jyb3dzZXJXZWJTb2NrZXQpIHtcbiAgICAgICAgICAgIC8vIFR5cGVFcnJvciBpcyB0aHJvd24gd2hlbiBwYXNzaW5nIHRoZSBzZWNvbmQgYXJndW1lbnQgb24gU2FmYXJpXG4gICAgICAgICAgICB0aGlzLndzLnNlbmQoZGF0YSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMud3Muc2VuZChkYXRhLCBvcHRzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBkZWJ1ZyhcIndlYnNvY2tldCBjbG9zZWQgYmVmb3JlIG9uY2xvc2UgZXZlbnRcIik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobGFzdFBhY2tldCkge1xuICAgICAgICAgIC8vIGZha2UgZHJhaW5cbiAgICAgICAgICAvLyBkZWZlciB0byBuZXh0IHRpY2sgdG8gYWxsb3cgU29ja2V0IHRvIGNsZWFyIHdyaXRlQnVmZmVyXG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLndyaXRhYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuZW1pdChcImRyYWluXCIpO1xuICAgICAgICAgIH0sIDApO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2FsbGVkIHVwb24gY2xvc2VcbiAgICpcbiAgICogQGFwaSBwcml2YXRlXG4gICAqL1xuICBvbkNsb3NlKCkge1xuICAgIFRyYW5zcG9ydC5wcm90b3R5cGUub25DbG9zZS5jYWxsKHRoaXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIENsb3NlcyBzb2NrZXQuXG4gICAqXG4gICAqIEBhcGkgcHJpdmF0ZVxuICAgKi9cbiAgZG9DbG9zZSgpIHtcbiAgICBpZiAodHlwZW9mIHRoaXMud3MgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIHRoaXMud3MuY2xvc2UoKTtcbiAgICAgIHRoaXMud3MgPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZXMgdXJpIGZvciBjb25uZWN0aW9uLlxuICAgKlxuICAgKiBAYXBpIHByaXZhdGVcbiAgICovXG4gIHVyaSgpIHtcbiAgICBsZXQgcXVlcnkgPSB0aGlzLnF1ZXJ5IHx8IHt9O1xuICAgIGNvbnN0IHNjaGVtYSA9IHRoaXMub3B0cy5zZWN1cmUgPyBcIndzc1wiIDogXCJ3c1wiO1xuICAgIGxldCBwb3J0ID0gXCJcIjtcblxuICAgIC8vIGF2b2lkIHBvcnQgaWYgZGVmYXVsdCBmb3Igc2NoZW1hXG4gICAgaWYgKFxuICAgICAgdGhpcy5vcHRzLnBvcnQgJiZcbiAgICAgICgoXCJ3c3NcIiA9PT0gc2NoZW1hICYmIE51bWJlcih0aGlzLm9wdHMucG9ydCkgIT09IDQ0MykgfHxcbiAgICAgICAgKFwid3NcIiA9PT0gc2NoZW1hICYmIE51bWJlcih0aGlzLm9wdHMucG9ydCkgIT09IDgwKSlcbiAgICApIHtcbiAgICAgIHBvcnQgPSBcIjpcIiArIHRoaXMub3B0cy5wb3J0O1xuICAgIH1cblxuICAgIC8vIGFwcGVuZCB0aW1lc3RhbXAgdG8gVVJJXG4gICAgaWYgKHRoaXMub3B0cy50aW1lc3RhbXBSZXF1ZXN0cykge1xuICAgICAgcXVlcnlbdGhpcy5vcHRzLnRpbWVzdGFtcFBhcmFtXSA9IHllYXN0KCk7XG4gICAgfVxuXG4gICAgLy8gY29tbXVuaWNhdGUgYmluYXJ5IHN1cHBvcnQgY2FwYWJpbGl0aWVzXG4gICAgaWYgKCF0aGlzLnN1cHBvcnRzQmluYXJ5KSB7XG4gICAgICBxdWVyeS5iNjQgPSAxO1xuICAgIH1cblxuICAgIHF1ZXJ5ID0gcGFyc2Vxcy5lbmNvZGUocXVlcnkpO1xuXG4gICAgLy8gcHJlcGVuZCA/IHRvIHF1ZXJ5XG4gICAgaWYgKHF1ZXJ5Lmxlbmd0aCkge1xuICAgICAgcXVlcnkgPSBcIj9cIiArIHF1ZXJ5O1xuICAgIH1cblxuICAgIGNvbnN0IGlwdjYgPSB0aGlzLm9wdHMuaG9zdG5hbWUuaW5kZXhPZihcIjpcIikgIT09IC0xO1xuICAgIHJldHVybiAoXG4gICAgICBzY2hlbWEgK1xuICAgICAgXCI6Ly9cIiArXG4gICAgICAoaXB2NiA/IFwiW1wiICsgdGhpcy5vcHRzLmhvc3RuYW1lICsgXCJdXCIgOiB0aGlzLm9wdHMuaG9zdG5hbWUpICtcbiAgICAgIHBvcnQgK1xuICAgICAgdGhpcy5vcHRzLnBhdGggK1xuICAgICAgcXVlcnlcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEZlYXR1cmUgZGV0ZWN0aW9uIGZvciBXZWJTb2NrZXQuXG4gICAqXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59IHdoZXRoZXIgdGhpcyB0cmFuc3BvcnQgaXMgYXZhaWxhYmxlLlxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cbiAgY2hlY2soKSB7XG4gICAgcmV0dXJuIChcbiAgICAgICEhV2ViU29ja2V0ICYmXG4gICAgICAhKFwiX19pbml0aWFsaXplXCIgaW4gV2ViU29ja2V0ICYmIHRoaXMubmFtZSA9PT0gV1MucHJvdG90eXBlLm5hbWUpXG4gICAgKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFdTO1xuIiwibW9kdWxlLmV4cG9ydHMucGljayA9IChvYmosIC4uLmF0dHIpID0+IHtcbiAgcmV0dXJuIGF0dHIucmVkdWNlKChhY2MsIGspID0+IHtcbiAgICBpZiAob2JqLmhhc093blByb3BlcnR5KGspKSB7XG4gICAgICBhY2Nba10gPSBvYmpba107XG4gICAgfVxuICAgIHJldHVybiBhY2M7XG4gIH0sIHt9KTtcbn07XG4iLCIvLyBicm93c2VyIHNoaW0gZm9yIHhtbGh0dHByZXF1ZXN0IG1vZHVsZVxuXG5jb25zdCBoYXNDT1JTID0gcmVxdWlyZShcImhhcy1jb3JzXCIpO1xuY29uc3QgZ2xvYmFsVGhpcyA9IHJlcXVpcmUoXCIuL2dsb2JhbFRoaXNcIik7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ob3B0cykge1xuICBjb25zdCB4ZG9tYWluID0gb3B0cy54ZG9tYWluO1xuXG4gIC8vIHNjaGVtZSBtdXN0IGJlIHNhbWUgd2hlbiB1c2lnbiBYRG9tYWluUmVxdWVzdFxuICAvLyBodHRwOi8vYmxvZ3MubXNkbi5jb20vYi9pZWludGVybmFscy9hcmNoaXZlLzIwMTAvMDUvMTMveGRvbWFpbnJlcXVlc3QtcmVzdHJpY3Rpb25zLWxpbWl0YXRpb25zLWFuZC13b3JrYXJvdW5kcy5hc3B4XG4gIGNvbnN0IHhzY2hlbWUgPSBvcHRzLnhzY2hlbWU7XG5cbiAgLy8gWERvbWFpblJlcXVlc3QgaGFzIGEgZmxvdyBvZiBub3Qgc2VuZGluZyBjb29raWUsIHRoZXJlZm9yZSBpdCBzaG91bGQgYmUgZGlzYWJsZWQgYXMgYSBkZWZhdWx0LlxuICAvLyBodHRwczovL2dpdGh1Yi5jb20vQXV0b21hdHRpYy9lbmdpbmUuaW8tY2xpZW50L3B1bGwvMjE3XG4gIGNvbnN0IGVuYWJsZXNYRFIgPSBvcHRzLmVuYWJsZXNYRFI7XG5cbiAgLy8gWE1MSHR0cFJlcXVlc3QgY2FuIGJlIGRpc2FibGVkIG9uIElFXG4gIHRyeSB7XG4gICAgaWYgKFwidW5kZWZpbmVkXCIgIT09IHR5cGVvZiBYTUxIdHRwUmVxdWVzdCAmJiAoIXhkb21haW4gfHwgaGFzQ09SUykpIHtcbiAgICAgIHJldHVybiBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHt9XG5cbiAgLy8gVXNlIFhEb21haW5SZXF1ZXN0IGZvciBJRTggaWYgZW5hYmxlc1hEUiBpcyB0cnVlXG4gIC8vIGJlY2F1c2UgbG9hZGluZyBiYXIga2VlcHMgZmxhc2hpbmcgd2hlbiB1c2luZyBqc29ucC1wb2xsaW5nXG4gIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS95dWppb3Nha2Evc29ja2UuaW8taWU4LWxvYWRpbmctZXhhbXBsZVxuICB0cnkge1xuICAgIGlmIChcInVuZGVmaW5lZFwiICE9PSB0eXBlb2YgWERvbWFpblJlcXVlc3QgJiYgIXhzY2hlbWUgJiYgZW5hYmxlc1hEUikge1xuICAgICAgcmV0dXJuIG5ldyBYRG9tYWluUmVxdWVzdCgpO1xuICAgIH1cbiAgfSBjYXRjaCAoZSkge31cblxuICBpZiAoIXhkb21haW4pIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIG5ldyBnbG9iYWxUaGlzW1tcIkFjdGl2ZVwiXS5jb25jYXQoXCJPYmplY3RcIikuam9pbihcIlhcIildKFxuICAgICAgICBcIk1pY3Jvc29mdC5YTUxIVFRQXCJcbiAgICAgICk7XG4gICAgfSBjYXRjaCAoZSkge31cbiAgfVxufTtcbiIsIi8qIGVzbGludC1lbnYgYnJvd3NlciAqL1xuXG4vKipcbiAqIFRoaXMgaXMgdGhlIHdlYiBicm93c2VyIGltcGxlbWVudGF0aW9uIG9mIGBkZWJ1ZygpYC5cbiAqL1xuXG5leHBvcnRzLmZvcm1hdEFyZ3MgPSBmb3JtYXRBcmdzO1xuZXhwb3J0cy5zYXZlID0gc2F2ZTtcbmV4cG9ydHMubG9hZCA9IGxvYWQ7XG5leHBvcnRzLnVzZUNvbG9ycyA9IHVzZUNvbG9ycztcbmV4cG9ydHMuc3RvcmFnZSA9IGxvY2Fsc3RvcmFnZSgpO1xuZXhwb3J0cy5kZXN0cm95ID0gKCgpID0+IHtcblx0bGV0IHdhcm5lZCA9IGZhbHNlO1xuXG5cdHJldHVybiAoKSA9PiB7XG5cdFx0aWYgKCF3YXJuZWQpIHtcblx0XHRcdHdhcm5lZCA9IHRydWU7XG5cdFx0XHRjb25zb2xlLndhcm4oJ0luc3RhbmNlIG1ldGhvZCBgZGVidWcuZGVzdHJveSgpYCBpcyBkZXByZWNhdGVkIGFuZCBubyBsb25nZXIgZG9lcyBhbnl0aGluZy4gSXQgd2lsbCBiZSByZW1vdmVkIGluIHRoZSBuZXh0IG1ham9yIHZlcnNpb24gb2YgYGRlYnVnYC4nKTtcblx0XHR9XG5cdH07XG59KSgpO1xuXG4vKipcbiAqIENvbG9ycy5cbiAqL1xuXG5leHBvcnRzLmNvbG9ycyA9IFtcblx0JyMwMDAwQ0MnLFxuXHQnIzAwMDBGRicsXG5cdCcjMDAzM0NDJyxcblx0JyMwMDMzRkYnLFxuXHQnIzAwNjZDQycsXG5cdCcjMDA2NkZGJyxcblx0JyMwMDk5Q0MnLFxuXHQnIzAwOTlGRicsXG5cdCcjMDBDQzAwJyxcblx0JyMwMENDMzMnLFxuXHQnIzAwQ0M2NicsXG5cdCcjMDBDQzk5Jyxcblx0JyMwMENDQ0MnLFxuXHQnIzAwQ0NGRicsXG5cdCcjMzMwMENDJyxcblx0JyMzMzAwRkYnLFxuXHQnIzMzMzNDQycsXG5cdCcjMzMzM0ZGJyxcblx0JyMzMzY2Q0MnLFxuXHQnIzMzNjZGRicsXG5cdCcjMzM5OUNDJyxcblx0JyMzMzk5RkYnLFxuXHQnIzMzQ0MwMCcsXG5cdCcjMzNDQzMzJyxcblx0JyMzM0NDNjYnLFxuXHQnIzMzQ0M5OScsXG5cdCcjMzNDQ0NDJyxcblx0JyMzM0NDRkYnLFxuXHQnIzY2MDBDQycsXG5cdCcjNjYwMEZGJyxcblx0JyM2NjMzQ0MnLFxuXHQnIzY2MzNGRicsXG5cdCcjNjZDQzAwJyxcblx0JyM2NkNDMzMnLFxuXHQnIzk5MDBDQycsXG5cdCcjOTkwMEZGJyxcblx0JyM5OTMzQ0MnLFxuXHQnIzk5MzNGRicsXG5cdCcjOTlDQzAwJyxcblx0JyM5OUNDMzMnLFxuXHQnI0NDMDAwMCcsXG5cdCcjQ0MwMDMzJyxcblx0JyNDQzAwNjYnLFxuXHQnI0NDMDA5OScsXG5cdCcjQ0MwMENDJyxcblx0JyNDQzAwRkYnLFxuXHQnI0NDMzMwMCcsXG5cdCcjQ0MzMzMzJyxcblx0JyNDQzMzNjYnLFxuXHQnI0NDMzM5OScsXG5cdCcjQ0MzM0NDJyxcblx0JyNDQzMzRkYnLFxuXHQnI0NDNjYwMCcsXG5cdCcjQ0M2NjMzJyxcblx0JyNDQzk5MDAnLFxuXHQnI0NDOTkzMycsXG5cdCcjQ0NDQzAwJyxcblx0JyNDQ0NDMzMnLFxuXHQnI0ZGMDAwMCcsXG5cdCcjRkYwMDMzJyxcblx0JyNGRjAwNjYnLFxuXHQnI0ZGMDA5OScsXG5cdCcjRkYwMENDJyxcblx0JyNGRjAwRkYnLFxuXHQnI0ZGMzMwMCcsXG5cdCcjRkYzMzMzJyxcblx0JyNGRjMzNjYnLFxuXHQnI0ZGMzM5OScsXG5cdCcjRkYzM0NDJyxcblx0JyNGRjMzRkYnLFxuXHQnI0ZGNjYwMCcsXG5cdCcjRkY2NjMzJyxcblx0JyNGRjk5MDAnLFxuXHQnI0ZGOTkzMycsXG5cdCcjRkZDQzAwJyxcblx0JyNGRkNDMzMnXG5dO1xuXG4vKipcbiAqIEN1cnJlbnRseSBvbmx5IFdlYktpdC1iYXNlZCBXZWIgSW5zcGVjdG9ycywgRmlyZWZveCA+PSB2MzEsXG4gKiBhbmQgdGhlIEZpcmVidWcgZXh0ZW5zaW9uIChhbnkgRmlyZWZveCB2ZXJzaW9uKSBhcmUga25vd25cbiAqIHRvIHN1cHBvcnQgXCIlY1wiIENTUyBjdXN0b21pemF0aW9ucy5cbiAqXG4gKiBUT0RPOiBhZGQgYSBgbG9jYWxTdG9yYWdlYCB2YXJpYWJsZSB0byBleHBsaWNpdGx5IGVuYWJsZS9kaXNhYmxlIGNvbG9yc1xuICovXG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjb21wbGV4aXR5XG5mdW5jdGlvbiB1c2VDb2xvcnMoKSB7XG5cdC8vIE5COiBJbiBhbiBFbGVjdHJvbiBwcmVsb2FkIHNjcmlwdCwgZG9jdW1lbnQgd2lsbCBiZSBkZWZpbmVkIGJ1dCBub3QgZnVsbHlcblx0Ly8gaW5pdGlhbGl6ZWQuIFNpbmNlIHdlIGtub3cgd2UncmUgaW4gQ2hyb21lLCB3ZSdsbCBqdXN0IGRldGVjdCB0aGlzIGNhc2Vcblx0Ly8gZXhwbGljaXRseVxuXHRpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LnByb2Nlc3MgJiYgKHdpbmRvdy5wcm9jZXNzLnR5cGUgPT09ICdyZW5kZXJlcicgfHwgd2luZG93LnByb2Nlc3MuX19ud2pzKSkge1xuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cblx0Ly8gSW50ZXJuZXQgRXhwbG9yZXIgYW5kIEVkZ2UgZG8gbm90IHN1cHBvcnQgY29sb3JzLlxuXHRpZiAodHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudCAmJiBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkubWF0Y2goLyhlZGdlfHRyaWRlbnQpXFwvKFxcZCspLykpIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHQvLyBJcyB3ZWJraXQ/IGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzE2NDU5NjA2LzM3Njc3M1xuXHQvLyBkb2N1bWVudCBpcyB1bmRlZmluZWQgaW4gcmVhY3QtbmF0aXZlOiBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVhY3QtbmF0aXZlL3B1bGwvMTYzMlxuXHRyZXR1cm4gKHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50ICYmIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZSAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUuV2Via2l0QXBwZWFyYW5jZSkgfHxcblx0XHQvLyBJcyBmaXJlYnVnPyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8zOTgxMjAvMzc2NzczXG5cdFx0KHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5jb25zb2xlICYmICh3aW5kb3cuY29uc29sZS5maXJlYnVnIHx8ICh3aW5kb3cuY29uc29sZS5leGNlcHRpb24gJiYgd2luZG93LmNvbnNvbGUudGFibGUpKSkgfHxcblx0XHQvLyBJcyBmaXJlZm94ID49IHYzMT9cblx0XHQvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1Rvb2xzL1dlYl9Db25zb2xlI1N0eWxpbmdfbWVzc2FnZXNcblx0XHQodHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudCAmJiBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkubWF0Y2goL2ZpcmVmb3hcXC8oXFxkKykvKSAmJiBwYXJzZUludChSZWdFeHAuJDEsIDEwKSA+PSAzMSkgfHxcblx0XHQvLyBEb3VibGUgY2hlY2sgd2Via2l0IGluIHVzZXJBZ2VudCBqdXN0IGluIGNhc2Ugd2UgYXJlIGluIGEgd29ya2VyXG5cdFx0KHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmIG5hdmlnYXRvci51c2VyQWdlbnQgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLm1hdGNoKC9hcHBsZXdlYmtpdFxcLyhcXGQrKS8pKTtcbn1cblxuLyoqXG4gKiBDb2xvcml6ZSBsb2cgYXJndW1lbnRzIGlmIGVuYWJsZWQuXG4gKlxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5mdW5jdGlvbiBmb3JtYXRBcmdzKGFyZ3MpIHtcblx0YXJnc1swXSA9ICh0aGlzLnVzZUNvbG9ycyA/ICclYycgOiAnJykgK1xuXHRcdHRoaXMubmFtZXNwYWNlICtcblx0XHQodGhpcy51c2VDb2xvcnMgPyAnICVjJyA6ICcgJykgK1xuXHRcdGFyZ3NbMF0gK1xuXHRcdCh0aGlzLnVzZUNvbG9ycyA/ICclYyAnIDogJyAnKSArXG5cdFx0JysnICsgbW9kdWxlLmV4cG9ydHMuaHVtYW5pemUodGhpcy5kaWZmKTtcblxuXHRpZiAoIXRoaXMudXNlQ29sb3JzKSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0Y29uc3QgYyA9ICdjb2xvcjogJyArIHRoaXMuY29sb3I7XG5cdGFyZ3Muc3BsaWNlKDEsIDAsIGMsICdjb2xvcjogaW5oZXJpdCcpO1xuXG5cdC8vIFRoZSBmaW5hbCBcIiVjXCIgaXMgc29tZXdoYXQgdHJpY2t5LCBiZWNhdXNlIHRoZXJlIGNvdWxkIGJlIG90aGVyXG5cdC8vIGFyZ3VtZW50cyBwYXNzZWQgZWl0aGVyIGJlZm9yZSBvciBhZnRlciB0aGUgJWMsIHNvIHdlIG5lZWQgdG9cblx0Ly8gZmlndXJlIG91dCB0aGUgY29ycmVjdCBpbmRleCB0byBpbnNlcnQgdGhlIENTUyBpbnRvXG5cdGxldCBpbmRleCA9IDA7XG5cdGxldCBsYXN0QyA9IDA7XG5cdGFyZ3NbMF0ucmVwbGFjZSgvJVthLXpBLVolXS9nLCBtYXRjaCA9PiB7XG5cdFx0aWYgKG1hdGNoID09PSAnJSUnKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdGluZGV4Kys7XG5cdFx0aWYgKG1hdGNoID09PSAnJWMnKSB7XG5cdFx0XHQvLyBXZSBvbmx5IGFyZSBpbnRlcmVzdGVkIGluIHRoZSAqbGFzdCogJWNcblx0XHRcdC8vICh0aGUgdXNlciBtYXkgaGF2ZSBwcm92aWRlZCB0aGVpciBvd24pXG5cdFx0XHRsYXN0QyA9IGluZGV4O1xuXHRcdH1cblx0fSk7XG5cblx0YXJncy5zcGxpY2UobGFzdEMsIDAsIGMpO1xufVxuXG4vKipcbiAqIEludm9rZXMgYGNvbnNvbGUuZGVidWcoKWAgd2hlbiBhdmFpbGFibGUuXG4gKiBOby1vcCB3aGVuIGBjb25zb2xlLmRlYnVnYCBpcyBub3QgYSBcImZ1bmN0aW9uXCIuXG4gKiBJZiBgY29uc29sZS5kZWJ1Z2AgaXMgbm90IGF2YWlsYWJsZSwgZmFsbHMgYmFja1xuICogdG8gYGNvbnNvbGUubG9nYC5cbiAqXG4gKiBAYXBpIHB1YmxpY1xuICovXG5leHBvcnRzLmxvZyA9IGNvbnNvbGUuZGVidWcgfHwgY29uc29sZS5sb2cgfHwgKCgpID0+IHt9KTtcblxuLyoqXG4gKiBTYXZlIGBuYW1lc3BhY2VzYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZXNwYWNlc1xuICogQGFwaSBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHNhdmUobmFtZXNwYWNlcykge1xuXHR0cnkge1xuXHRcdGlmIChuYW1lc3BhY2VzKSB7XG5cdFx0XHRleHBvcnRzLnN0b3JhZ2Uuc2V0SXRlbSgnZGVidWcnLCBuYW1lc3BhY2VzKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0ZXhwb3J0cy5zdG9yYWdlLnJlbW92ZUl0ZW0oJ2RlYnVnJyk7XG5cdFx0fVxuXHR9IGNhdGNoIChlcnJvcikge1xuXHRcdC8vIFN3YWxsb3dcblx0XHQvLyBYWFggKEBRaXgtKSBzaG91bGQgd2UgYmUgbG9nZ2luZyB0aGVzZT9cblx0fVxufVxuXG4vKipcbiAqIExvYWQgYG5hbWVzcGFjZXNgLlxuICpcbiAqIEByZXR1cm4ge1N0cmluZ30gcmV0dXJucyB0aGUgcHJldmlvdXNseSBwZXJzaXN0ZWQgZGVidWcgbW9kZXNcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBsb2FkKCkge1xuXHRsZXQgcjtcblx0dHJ5IHtcblx0XHRyID0gZXhwb3J0cy5zdG9yYWdlLmdldEl0ZW0oJ2RlYnVnJyk7XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0Ly8gU3dhbGxvd1xuXHRcdC8vIFhYWCAoQFFpeC0pIHNob3VsZCB3ZSBiZSBsb2dnaW5nIHRoZXNlP1xuXHR9XG5cblx0Ly8gSWYgZGVidWcgaXNuJ3Qgc2V0IGluIExTLCBhbmQgd2UncmUgaW4gRWxlY3Ryb24sIHRyeSB0byBsb2FkICRERUJVR1xuXHRpZiAoIXIgJiYgdHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmICdlbnYnIGluIHByb2Nlc3MpIHtcblx0XHRyID0gcHJvY2Vzcy5lbnYuREVCVUc7XG5cdH1cblxuXHRyZXR1cm4gcjtcbn1cblxuLyoqXG4gKiBMb2NhbHN0b3JhZ2UgYXR0ZW1wdHMgdG8gcmV0dXJuIHRoZSBsb2NhbHN0b3JhZ2UuXG4gKlxuICogVGhpcyBpcyBuZWNlc3NhcnkgYmVjYXVzZSBzYWZhcmkgdGhyb3dzXG4gKiB3aGVuIGEgdXNlciBkaXNhYmxlcyBjb29raWVzL2xvY2Fsc3RvcmFnZVxuICogYW5kIHlvdSBhdHRlbXB0IHRvIGFjY2VzcyBpdC5cbiAqXG4gKiBAcmV0dXJuIHtMb2NhbFN0b3JhZ2V9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBsb2NhbHN0b3JhZ2UoKSB7XG5cdHRyeSB7XG5cdFx0Ly8gVFZNTEtpdCAoQXBwbGUgVFYgSlMgUnVudGltZSkgZG9lcyBub3QgaGF2ZSBhIHdpbmRvdyBvYmplY3QsIGp1c3QgbG9jYWxTdG9yYWdlIGluIHRoZSBnbG9iYWwgY29udGV4dFxuXHRcdC8vIFRoZSBCcm93c2VyIGFsc28gaGFzIGxvY2FsU3RvcmFnZSBpbiB0aGUgZ2xvYmFsIGNvbnRleHQuXG5cdFx0cmV0dXJuIGxvY2FsU3RvcmFnZTtcblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHQvLyBTd2FsbG93XG5cdFx0Ly8gWFhYIChAUWl4LSkgc2hvdWxkIHdlIGJlIGxvZ2dpbmcgdGhlc2U/XG5cdH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2NvbW1vbicpKGV4cG9ydHMpO1xuXG5jb25zdCB7Zm9ybWF0dGVyc30gPSBtb2R1bGUuZXhwb3J0cztcblxuLyoqXG4gKiBNYXAgJWogdG8gYEpTT04uc3RyaW5naWZ5KClgLCBzaW5jZSBubyBXZWIgSW5zcGVjdG9ycyBkbyB0aGF0IGJ5IGRlZmF1bHQuXG4gKi9cblxuZm9ybWF0dGVycy5qID0gZnVuY3Rpb24gKHYpIHtcblx0dHJ5IHtcblx0XHRyZXR1cm4gSlNPTi5zdHJpbmdpZnkodik7XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0cmV0dXJuICdbVW5leHBlY3RlZEpTT05QYXJzZUVycm9yXTogJyArIGVycm9yLm1lc3NhZ2U7XG5cdH1cbn07XG4iLCJcbi8qKlxuICogVGhpcyBpcyB0aGUgY29tbW9uIGxvZ2ljIGZvciBib3RoIHRoZSBOb2RlLmpzIGFuZCB3ZWIgYnJvd3NlclxuICogaW1wbGVtZW50YXRpb25zIG9mIGBkZWJ1ZygpYC5cbiAqL1xuXG5mdW5jdGlvbiBzZXR1cChlbnYpIHtcblx0Y3JlYXRlRGVidWcuZGVidWcgPSBjcmVhdGVEZWJ1Zztcblx0Y3JlYXRlRGVidWcuZGVmYXVsdCA9IGNyZWF0ZURlYnVnO1xuXHRjcmVhdGVEZWJ1Zy5jb2VyY2UgPSBjb2VyY2U7XG5cdGNyZWF0ZURlYnVnLmRpc2FibGUgPSBkaXNhYmxlO1xuXHRjcmVhdGVEZWJ1Zy5lbmFibGUgPSBlbmFibGU7XG5cdGNyZWF0ZURlYnVnLmVuYWJsZWQgPSBlbmFibGVkO1xuXHRjcmVhdGVEZWJ1Zy5odW1hbml6ZSA9IHJlcXVpcmUoJ21zJyk7XG5cdGNyZWF0ZURlYnVnLmRlc3Ryb3kgPSBkZXN0cm95O1xuXG5cdE9iamVjdC5rZXlzKGVudikuZm9yRWFjaChrZXkgPT4ge1xuXHRcdGNyZWF0ZURlYnVnW2tleV0gPSBlbnZba2V5XTtcblx0fSk7XG5cblx0LyoqXG5cdCogVGhlIGN1cnJlbnRseSBhY3RpdmUgZGVidWcgbW9kZSBuYW1lcywgYW5kIG5hbWVzIHRvIHNraXAuXG5cdCovXG5cblx0Y3JlYXRlRGVidWcubmFtZXMgPSBbXTtcblx0Y3JlYXRlRGVidWcuc2tpcHMgPSBbXTtcblxuXHQvKipcblx0KiBNYXAgb2Ygc3BlY2lhbCBcIiVuXCIgaGFuZGxpbmcgZnVuY3Rpb25zLCBmb3IgdGhlIGRlYnVnIFwiZm9ybWF0XCIgYXJndW1lbnQuXG5cdCpcblx0KiBWYWxpZCBrZXkgbmFtZXMgYXJlIGEgc2luZ2xlLCBsb3dlciBvciB1cHBlci1jYXNlIGxldHRlciwgaS5lLiBcIm5cIiBhbmQgXCJOXCIuXG5cdCovXG5cdGNyZWF0ZURlYnVnLmZvcm1hdHRlcnMgPSB7fTtcblxuXHQvKipcblx0KiBTZWxlY3RzIGEgY29sb3IgZm9yIGEgZGVidWcgbmFtZXNwYWNlXG5cdCogQHBhcmFtIHtTdHJpbmd9IG5hbWVzcGFjZSBUaGUgbmFtZXNwYWNlIHN0cmluZyBmb3IgdGhlIGZvciB0aGUgZGVidWcgaW5zdGFuY2UgdG8gYmUgY29sb3JlZFxuXHQqIEByZXR1cm4ge051bWJlcnxTdHJpbmd9IEFuIEFOU0kgY29sb3IgY29kZSBmb3IgdGhlIGdpdmVuIG5hbWVzcGFjZVxuXHQqIEBhcGkgcHJpdmF0ZVxuXHQqL1xuXHRmdW5jdGlvbiBzZWxlY3RDb2xvcihuYW1lc3BhY2UpIHtcblx0XHRsZXQgaGFzaCA9IDA7XG5cblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IG5hbWVzcGFjZS5sZW5ndGg7IGkrKykge1xuXHRcdFx0aGFzaCA9ICgoaGFzaCA8PCA1KSAtIGhhc2gpICsgbmFtZXNwYWNlLmNoYXJDb2RlQXQoaSk7XG5cdFx0XHRoYXNoIHw9IDA7IC8vIENvbnZlcnQgdG8gMzJiaXQgaW50ZWdlclxuXHRcdH1cblxuXHRcdHJldHVybiBjcmVhdGVEZWJ1Zy5jb2xvcnNbTWF0aC5hYnMoaGFzaCkgJSBjcmVhdGVEZWJ1Zy5jb2xvcnMubGVuZ3RoXTtcblx0fVxuXHRjcmVhdGVEZWJ1Zy5zZWxlY3RDb2xvciA9IHNlbGVjdENvbG9yO1xuXG5cdC8qKlxuXHQqIENyZWF0ZSBhIGRlYnVnZ2VyIHdpdGggdGhlIGdpdmVuIGBuYW1lc3BhY2VgLlxuXHQqXG5cdCogQHBhcmFtIHtTdHJpbmd9IG5hbWVzcGFjZVxuXHQqIEByZXR1cm4ge0Z1bmN0aW9ufVxuXHQqIEBhcGkgcHVibGljXG5cdCovXG5cdGZ1bmN0aW9uIGNyZWF0ZURlYnVnKG5hbWVzcGFjZSkge1xuXHRcdGxldCBwcmV2VGltZTtcblx0XHRsZXQgZW5hYmxlT3ZlcnJpZGUgPSBudWxsO1xuXG5cdFx0ZnVuY3Rpb24gZGVidWcoLi4uYXJncykge1xuXHRcdFx0Ly8gRGlzYWJsZWQ/XG5cdFx0XHRpZiAoIWRlYnVnLmVuYWJsZWQpIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHRjb25zdCBzZWxmID0gZGVidWc7XG5cblx0XHRcdC8vIFNldCBgZGlmZmAgdGltZXN0YW1wXG5cdFx0XHRjb25zdCBjdXJyID0gTnVtYmVyKG5ldyBEYXRlKCkpO1xuXHRcdFx0Y29uc3QgbXMgPSBjdXJyIC0gKHByZXZUaW1lIHx8IGN1cnIpO1xuXHRcdFx0c2VsZi5kaWZmID0gbXM7XG5cdFx0XHRzZWxmLnByZXYgPSBwcmV2VGltZTtcblx0XHRcdHNlbGYuY3VyciA9IGN1cnI7XG5cdFx0XHRwcmV2VGltZSA9IGN1cnI7XG5cblx0XHRcdGFyZ3NbMF0gPSBjcmVhdGVEZWJ1Zy5jb2VyY2UoYXJnc1swXSk7XG5cblx0XHRcdGlmICh0eXBlb2YgYXJnc1swXSAhPT0gJ3N0cmluZycpIHtcblx0XHRcdFx0Ly8gQW55dGhpbmcgZWxzZSBsZXQncyBpbnNwZWN0IHdpdGggJU9cblx0XHRcdFx0YXJncy51bnNoaWZ0KCclTycpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBBcHBseSBhbnkgYGZvcm1hdHRlcnNgIHRyYW5zZm9ybWF0aW9uc1xuXHRcdFx0bGV0IGluZGV4ID0gMDtcblx0XHRcdGFyZ3NbMF0gPSBhcmdzWzBdLnJlcGxhY2UoLyUoW2EtekEtWiVdKS9nLCAobWF0Y2gsIGZvcm1hdCkgPT4ge1xuXHRcdFx0XHQvLyBJZiB3ZSBlbmNvdW50ZXIgYW4gZXNjYXBlZCAlIHRoZW4gZG9uJ3QgaW5jcmVhc2UgdGhlIGFycmF5IGluZGV4XG5cdFx0XHRcdGlmIChtYXRjaCA9PT0gJyUlJykge1xuXHRcdFx0XHRcdHJldHVybiAnJSc7XG5cdFx0XHRcdH1cblx0XHRcdFx0aW5kZXgrKztcblx0XHRcdFx0Y29uc3QgZm9ybWF0dGVyID0gY3JlYXRlRGVidWcuZm9ybWF0dGVyc1tmb3JtYXRdO1xuXHRcdFx0XHRpZiAodHlwZW9mIGZvcm1hdHRlciA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0XHRcdGNvbnN0IHZhbCA9IGFyZ3NbaW5kZXhdO1xuXHRcdFx0XHRcdG1hdGNoID0gZm9ybWF0dGVyLmNhbGwoc2VsZiwgdmFsKTtcblxuXHRcdFx0XHRcdC8vIE5vdyB3ZSBuZWVkIHRvIHJlbW92ZSBgYXJnc1tpbmRleF1gIHNpbmNlIGl0J3MgaW5saW5lZCBpbiB0aGUgYGZvcm1hdGBcblx0XHRcdFx0XHRhcmdzLnNwbGljZShpbmRleCwgMSk7XG5cdFx0XHRcdFx0aW5kZXgtLTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gbWF0Y2g7XG5cdFx0XHR9KTtcblxuXHRcdFx0Ly8gQXBwbHkgZW52LXNwZWNpZmljIGZvcm1hdHRpbmcgKGNvbG9ycywgZXRjLilcblx0XHRcdGNyZWF0ZURlYnVnLmZvcm1hdEFyZ3MuY2FsbChzZWxmLCBhcmdzKTtcblxuXHRcdFx0Y29uc3QgbG9nRm4gPSBzZWxmLmxvZyB8fCBjcmVhdGVEZWJ1Zy5sb2c7XG5cdFx0XHRsb2dGbi5hcHBseShzZWxmLCBhcmdzKTtcblx0XHR9XG5cblx0XHRkZWJ1Zy5uYW1lc3BhY2UgPSBuYW1lc3BhY2U7XG5cdFx0ZGVidWcudXNlQ29sb3JzID0gY3JlYXRlRGVidWcudXNlQ29sb3JzKCk7XG5cdFx0ZGVidWcuY29sb3IgPSBjcmVhdGVEZWJ1Zy5zZWxlY3RDb2xvcihuYW1lc3BhY2UpO1xuXHRcdGRlYnVnLmV4dGVuZCA9IGV4dGVuZDtcblx0XHRkZWJ1Zy5kZXN0cm95ID0gY3JlYXRlRGVidWcuZGVzdHJveTsgLy8gWFhYIFRlbXBvcmFyeS4gV2lsbCBiZSByZW1vdmVkIGluIHRoZSBuZXh0IG1ham9yIHJlbGVhc2UuXG5cblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZGVidWcsICdlbmFibGVkJywge1xuXHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcblx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG5cdFx0XHRnZXQ6ICgpID0+IGVuYWJsZU92ZXJyaWRlID09PSBudWxsID8gY3JlYXRlRGVidWcuZW5hYmxlZChuYW1lc3BhY2UpIDogZW5hYmxlT3ZlcnJpZGUsXG5cdFx0XHRzZXQ6IHYgPT4ge1xuXHRcdFx0XHRlbmFibGVPdmVycmlkZSA9IHY7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQvLyBFbnYtc3BlY2lmaWMgaW5pdGlhbGl6YXRpb24gbG9naWMgZm9yIGRlYnVnIGluc3RhbmNlc1xuXHRcdGlmICh0eXBlb2YgY3JlYXRlRGVidWcuaW5pdCA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0Y3JlYXRlRGVidWcuaW5pdChkZWJ1Zyk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGRlYnVnO1xuXHR9XG5cblx0ZnVuY3Rpb24gZXh0ZW5kKG5hbWVzcGFjZSwgZGVsaW1pdGVyKSB7XG5cdFx0Y29uc3QgbmV3RGVidWcgPSBjcmVhdGVEZWJ1Zyh0aGlzLm5hbWVzcGFjZSArICh0eXBlb2YgZGVsaW1pdGVyID09PSAndW5kZWZpbmVkJyA/ICc6JyA6IGRlbGltaXRlcikgKyBuYW1lc3BhY2UpO1xuXHRcdG5ld0RlYnVnLmxvZyA9IHRoaXMubG9nO1xuXHRcdHJldHVybiBuZXdEZWJ1Zztcblx0fVxuXG5cdC8qKlxuXHQqIEVuYWJsZXMgYSBkZWJ1ZyBtb2RlIGJ5IG5hbWVzcGFjZXMuIFRoaXMgY2FuIGluY2x1ZGUgbW9kZXNcblx0KiBzZXBhcmF0ZWQgYnkgYSBjb2xvbiBhbmQgd2lsZGNhcmRzLlxuXHQqXG5cdCogQHBhcmFtIHtTdHJpbmd9IG5hbWVzcGFjZXNcblx0KiBAYXBpIHB1YmxpY1xuXHQqL1xuXHRmdW5jdGlvbiBlbmFibGUobmFtZXNwYWNlcykge1xuXHRcdGNyZWF0ZURlYnVnLnNhdmUobmFtZXNwYWNlcyk7XG5cblx0XHRjcmVhdGVEZWJ1Zy5uYW1lcyA9IFtdO1xuXHRcdGNyZWF0ZURlYnVnLnNraXBzID0gW107XG5cblx0XHRsZXQgaTtcblx0XHRjb25zdCBzcGxpdCA9ICh0eXBlb2YgbmFtZXNwYWNlcyA9PT0gJ3N0cmluZycgPyBuYW1lc3BhY2VzIDogJycpLnNwbGl0KC9bXFxzLF0rLyk7XG5cdFx0Y29uc3QgbGVuID0gc3BsaXQubGVuZ3RoO1xuXG5cdFx0Zm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG5cdFx0XHRpZiAoIXNwbGl0W2ldKSB7XG5cdFx0XHRcdC8vIGlnbm9yZSBlbXB0eSBzdHJpbmdzXG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXG5cdFx0XHRuYW1lc3BhY2VzID0gc3BsaXRbaV0ucmVwbGFjZSgvXFwqL2csICcuKj8nKTtcblxuXHRcdFx0aWYgKG5hbWVzcGFjZXNbMF0gPT09ICctJykge1xuXHRcdFx0XHRjcmVhdGVEZWJ1Zy5za2lwcy5wdXNoKG5ldyBSZWdFeHAoJ14nICsgbmFtZXNwYWNlcy5zdWJzdHIoMSkgKyAnJCcpKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNyZWF0ZURlYnVnLm5hbWVzLnB1c2gobmV3IFJlZ0V4cCgnXicgKyBuYW1lc3BhY2VzICsgJyQnKSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCogRGlzYWJsZSBkZWJ1ZyBvdXRwdXQuXG5cdCpcblx0KiBAcmV0dXJuIHtTdHJpbmd9IG5hbWVzcGFjZXNcblx0KiBAYXBpIHB1YmxpY1xuXHQqL1xuXHRmdW5jdGlvbiBkaXNhYmxlKCkge1xuXHRcdGNvbnN0IG5hbWVzcGFjZXMgPSBbXG5cdFx0XHQuLi5jcmVhdGVEZWJ1Zy5uYW1lcy5tYXAodG9OYW1lc3BhY2UpLFxuXHRcdFx0Li4uY3JlYXRlRGVidWcuc2tpcHMubWFwKHRvTmFtZXNwYWNlKS5tYXAobmFtZXNwYWNlID0+ICctJyArIG5hbWVzcGFjZSlcblx0XHRdLmpvaW4oJywnKTtcblx0XHRjcmVhdGVEZWJ1Zy5lbmFibGUoJycpO1xuXHRcdHJldHVybiBuYW1lc3BhY2VzO1xuXHR9XG5cblx0LyoqXG5cdCogUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiBtb2RlIG5hbWUgaXMgZW5hYmxlZCwgZmFsc2Ugb3RoZXJ3aXNlLlxuXHQqXG5cdCogQHBhcmFtIHtTdHJpbmd9IG5hbWVcblx0KiBAcmV0dXJuIHtCb29sZWFufVxuXHQqIEBhcGkgcHVibGljXG5cdCovXG5cdGZ1bmN0aW9uIGVuYWJsZWQobmFtZSkge1xuXHRcdGlmIChuYW1lW25hbWUubGVuZ3RoIC0gMV0gPT09ICcqJykge1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXG5cdFx0bGV0IGk7XG5cdFx0bGV0IGxlbjtcblxuXHRcdGZvciAoaSA9IDAsIGxlbiA9IGNyZWF0ZURlYnVnLnNraXBzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG5cdFx0XHRpZiAoY3JlYXRlRGVidWcuc2tpcHNbaV0udGVzdChuYW1lKSkge1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Zm9yIChpID0gMCwgbGVuID0gY3JlYXRlRGVidWcubmFtZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcblx0XHRcdGlmIChjcmVhdGVEZWJ1Zy5uYW1lc1tpXS50ZXN0KG5hbWUpKSB7XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdC8qKlxuXHQqIENvbnZlcnQgcmVnZXhwIHRvIG5hbWVzcGFjZVxuXHQqXG5cdCogQHBhcmFtIHtSZWdFeHB9IHJlZ3hlcFxuXHQqIEByZXR1cm4ge1N0cmluZ30gbmFtZXNwYWNlXG5cdCogQGFwaSBwcml2YXRlXG5cdCovXG5cdGZ1bmN0aW9uIHRvTmFtZXNwYWNlKHJlZ2V4cCkge1xuXHRcdHJldHVybiByZWdleHAudG9TdHJpbmcoKVxuXHRcdFx0LnN1YnN0cmluZygyLCByZWdleHAudG9TdHJpbmcoKS5sZW5ndGggLSAyKVxuXHRcdFx0LnJlcGxhY2UoL1xcLlxcKlxcPyQvLCAnKicpO1xuXHR9XG5cblx0LyoqXG5cdCogQ29lcmNlIGB2YWxgLlxuXHQqXG5cdCogQHBhcmFtIHtNaXhlZH0gdmFsXG5cdCogQHJldHVybiB7TWl4ZWR9XG5cdCogQGFwaSBwcml2YXRlXG5cdCovXG5cdGZ1bmN0aW9uIGNvZXJjZSh2YWwpIHtcblx0XHRpZiAodmFsIGluc3RhbmNlb2YgRXJyb3IpIHtcblx0XHRcdHJldHVybiB2YWwuc3RhY2sgfHwgdmFsLm1lc3NhZ2U7XG5cdFx0fVxuXHRcdHJldHVybiB2YWw7XG5cdH1cblxuXHQvKipcblx0KiBYWFggRE8gTk9UIFVTRS4gVGhpcyBpcyBhIHRlbXBvcmFyeSBzdHViIGZ1bmN0aW9uLlxuXHQqIFhYWCBJdCBXSUxMIGJlIHJlbW92ZWQgaW4gdGhlIG5leHQgbWFqb3IgcmVsZWFzZS5cblx0Ki9cblx0ZnVuY3Rpb24gZGVzdHJveSgpIHtcblx0XHRjb25zb2xlLndhcm4oJ0luc3RhbmNlIG1ldGhvZCBgZGVidWcuZGVzdHJveSgpYCBpcyBkZXByZWNhdGVkIGFuZCBubyBsb25nZXIgZG9lcyBhbnl0aGluZy4gSXQgd2lsbCBiZSByZW1vdmVkIGluIHRoZSBuZXh0IG1ham9yIHZlcnNpb24gb2YgYGRlYnVnYC4nKTtcblx0fVxuXG5cdGNyZWF0ZURlYnVnLmVuYWJsZShjcmVhdGVEZWJ1Zy5sb2FkKCkpO1xuXG5cdHJldHVybiBjcmVhdGVEZWJ1Zztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzZXR1cDtcbiIsIi8qKlxuICogSGVscGVycy5cbiAqL1xuXG52YXIgcyA9IDEwMDA7XG52YXIgbSA9IHMgKiA2MDtcbnZhciBoID0gbSAqIDYwO1xudmFyIGQgPSBoICogMjQ7XG52YXIgdyA9IGQgKiA3O1xudmFyIHkgPSBkICogMzY1LjI1O1xuXG4vKipcbiAqIFBhcnNlIG9yIGZvcm1hdCB0aGUgZ2l2ZW4gYHZhbGAuXG4gKlxuICogT3B0aW9uczpcbiAqXG4gKiAgLSBgbG9uZ2AgdmVyYm9zZSBmb3JtYXR0aW5nIFtmYWxzZV1cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ3xOdW1iZXJ9IHZhbFxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICogQHRocm93cyB7RXJyb3J9IHRocm93IGFuIGVycm9yIGlmIHZhbCBpcyBub3QgYSBub24tZW1wdHkgc3RyaW5nIG9yIGEgbnVtYmVyXG4gKiBAcmV0dXJuIHtTdHJpbmd8TnVtYmVyfVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHZhbCwgb3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsO1xuICBpZiAodHlwZSA9PT0gJ3N0cmluZycgJiYgdmFsLmxlbmd0aCA+IDApIHtcbiAgICByZXR1cm4gcGFyc2UodmFsKTtcbiAgfSBlbHNlIGlmICh0eXBlID09PSAnbnVtYmVyJyAmJiBpc0Zpbml0ZSh2YWwpKSB7XG4gICAgcmV0dXJuIG9wdGlvbnMubG9uZyA/IGZtdExvbmcodmFsKSA6IGZtdFNob3J0KHZhbCk7XG4gIH1cbiAgdGhyb3cgbmV3IEVycm9yKFxuICAgICd2YWwgaXMgbm90IGEgbm9uLWVtcHR5IHN0cmluZyBvciBhIHZhbGlkIG51bWJlci4gdmFsPScgK1xuICAgICAgSlNPTi5zdHJpbmdpZnkodmFsKVxuICApO1xufTtcblxuLyoqXG4gKiBQYXJzZSB0aGUgZ2l2ZW4gYHN0cmAgYW5kIHJldHVybiBtaWxsaXNlY29uZHMuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHJldHVybiB7TnVtYmVyfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gcGFyc2Uoc3RyKSB7XG4gIHN0ciA9IFN0cmluZyhzdHIpO1xuICBpZiAoc3RyLmxlbmd0aCA+IDEwMCkge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgbWF0Y2ggPSAvXigtPyg/OlxcZCspP1xcLj9cXGQrKSAqKG1pbGxpc2Vjb25kcz98bXNlY3M/fG1zfHNlY29uZHM/fHNlY3M/fHN8bWludXRlcz98bWlucz98bXxob3Vycz98aHJzP3xofGRheXM/fGR8d2Vla3M/fHd8eWVhcnM/fHlycz98eSk/JC9pLmV4ZWMoXG4gICAgc3RyXG4gICk7XG4gIGlmICghbWF0Y2gpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIG4gPSBwYXJzZUZsb2F0KG1hdGNoWzFdKTtcbiAgdmFyIHR5cGUgPSAobWF0Y2hbMl0gfHwgJ21zJykudG9Mb3dlckNhc2UoKTtcbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSAneWVhcnMnOlxuICAgIGNhc2UgJ3llYXInOlxuICAgIGNhc2UgJ3lycyc6XG4gICAgY2FzZSAneXInOlxuICAgIGNhc2UgJ3knOlxuICAgICAgcmV0dXJuIG4gKiB5O1xuICAgIGNhc2UgJ3dlZWtzJzpcbiAgICBjYXNlICd3ZWVrJzpcbiAgICBjYXNlICd3JzpcbiAgICAgIHJldHVybiBuICogdztcbiAgICBjYXNlICdkYXlzJzpcbiAgICBjYXNlICdkYXknOlxuICAgIGNhc2UgJ2QnOlxuICAgICAgcmV0dXJuIG4gKiBkO1xuICAgIGNhc2UgJ2hvdXJzJzpcbiAgICBjYXNlICdob3VyJzpcbiAgICBjYXNlICdocnMnOlxuICAgIGNhc2UgJ2hyJzpcbiAgICBjYXNlICdoJzpcbiAgICAgIHJldHVybiBuICogaDtcbiAgICBjYXNlICdtaW51dGVzJzpcbiAgICBjYXNlICdtaW51dGUnOlxuICAgIGNhc2UgJ21pbnMnOlxuICAgIGNhc2UgJ21pbic6XG4gICAgY2FzZSAnbSc6XG4gICAgICByZXR1cm4gbiAqIG07XG4gICAgY2FzZSAnc2Vjb25kcyc6XG4gICAgY2FzZSAnc2Vjb25kJzpcbiAgICBjYXNlICdzZWNzJzpcbiAgICBjYXNlICdzZWMnOlxuICAgIGNhc2UgJ3MnOlxuICAgICAgcmV0dXJuIG4gKiBzO1xuICAgIGNhc2UgJ21pbGxpc2Vjb25kcyc6XG4gICAgY2FzZSAnbWlsbGlzZWNvbmQnOlxuICAgIGNhc2UgJ21zZWNzJzpcbiAgICBjYXNlICdtc2VjJzpcbiAgICBjYXNlICdtcyc6XG4gICAgICByZXR1cm4gbjtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxufVxuXG4vKipcbiAqIFNob3J0IGZvcm1hdCBmb3IgYG1zYC5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gbXNcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIGZtdFNob3J0KG1zKSB7XG4gIHZhciBtc0FicyA9IE1hdGguYWJzKG1zKTtcbiAgaWYgKG1zQWJzID49IGQpIHtcbiAgICByZXR1cm4gTWF0aC5yb3VuZChtcyAvIGQpICsgJ2QnO1xuICB9XG4gIGlmIChtc0FicyA+PSBoKSB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQobXMgLyBoKSArICdoJztcbiAgfVxuICBpZiAobXNBYnMgPj0gbSkge1xuICAgIHJldHVybiBNYXRoLnJvdW5kKG1zIC8gbSkgKyAnbSc7XG4gIH1cbiAgaWYgKG1zQWJzID49IHMpIHtcbiAgICByZXR1cm4gTWF0aC5yb3VuZChtcyAvIHMpICsgJ3MnO1xuICB9XG4gIHJldHVybiBtcyArICdtcyc7XG59XG5cbi8qKlxuICogTG9uZyBmb3JtYXQgZm9yIGBtc2AuXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IG1zXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBmbXRMb25nKG1zKSB7XG4gIHZhciBtc0FicyA9IE1hdGguYWJzKG1zKTtcbiAgaWYgKG1zQWJzID49IGQpIHtcbiAgICByZXR1cm4gcGx1cmFsKG1zLCBtc0FicywgZCwgJ2RheScpO1xuICB9XG4gIGlmIChtc0FicyA+PSBoKSB7XG4gICAgcmV0dXJuIHBsdXJhbChtcywgbXNBYnMsIGgsICdob3VyJyk7XG4gIH1cbiAgaWYgKG1zQWJzID49IG0pIHtcbiAgICByZXR1cm4gcGx1cmFsKG1zLCBtc0FicywgbSwgJ21pbnV0ZScpO1xuICB9XG4gIGlmIChtc0FicyA+PSBzKSB7XG4gICAgcmV0dXJuIHBsdXJhbChtcywgbXNBYnMsIHMsICdzZWNvbmQnKTtcbiAgfVxuICByZXR1cm4gbXMgKyAnIG1zJztcbn1cblxuLyoqXG4gKiBQbHVyYWxpemF0aW9uIGhlbHBlci5cbiAqL1xuXG5mdW5jdGlvbiBwbHVyYWwobXMsIG1zQWJzLCBuLCBuYW1lKSB7XG4gIHZhciBpc1BsdXJhbCA9IG1zQWJzID49IG4gKiAxLjU7XG4gIHJldHVybiBNYXRoLnJvdW5kKG1zIC8gbikgKyAnICcgKyBuYW1lICsgKGlzUGx1cmFsID8gJ3MnIDogJycpO1xufVxuIiwiY29uc3QgUEFDS0VUX1RZUEVTID0gT2JqZWN0LmNyZWF0ZShudWxsKTsgLy8gbm8gTWFwID0gbm8gcG9seWZpbGxcblBBQ0tFVF9UWVBFU1tcIm9wZW5cIl0gPSBcIjBcIjtcblBBQ0tFVF9UWVBFU1tcImNsb3NlXCJdID0gXCIxXCI7XG5QQUNLRVRfVFlQRVNbXCJwaW5nXCJdID0gXCIyXCI7XG5QQUNLRVRfVFlQRVNbXCJwb25nXCJdID0gXCIzXCI7XG5QQUNLRVRfVFlQRVNbXCJtZXNzYWdlXCJdID0gXCI0XCI7XG5QQUNLRVRfVFlQRVNbXCJ1cGdyYWRlXCJdID0gXCI1XCI7XG5QQUNLRVRfVFlQRVNbXCJub29wXCJdID0gXCI2XCI7XG5cbmNvbnN0IFBBQ0tFVF9UWVBFU19SRVZFUlNFID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbk9iamVjdC5rZXlzKFBBQ0tFVF9UWVBFUykuZm9yRWFjaChrZXkgPT4ge1xuICBQQUNLRVRfVFlQRVNfUkVWRVJTRVtQQUNLRVRfVFlQRVNba2V5XV0gPSBrZXk7XG59KTtcblxuY29uc3QgRVJST1JfUEFDS0VUID0geyB0eXBlOiBcImVycm9yXCIsIGRhdGE6IFwicGFyc2VyIGVycm9yXCIgfTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIFBBQ0tFVF9UWVBFUyxcbiAgUEFDS0VUX1RZUEVTX1JFVkVSU0UsXG4gIEVSUk9SX1BBQ0tFVFxufTtcbiIsImNvbnN0IHsgUEFDS0VUX1RZUEVTX1JFVkVSU0UsIEVSUk9SX1BBQ0tFVCB9ID0gcmVxdWlyZShcIi4vY29tbW9uc1wiKTtcblxuY29uc3Qgd2l0aE5hdGl2ZUFycmF5QnVmZmVyID0gdHlwZW9mIEFycmF5QnVmZmVyID09PSBcImZ1bmN0aW9uXCI7XG5cbmxldCBiYXNlNjRkZWNvZGVyO1xuaWYgKHdpdGhOYXRpdmVBcnJheUJ1ZmZlcikge1xuICBiYXNlNjRkZWNvZGVyID0gcmVxdWlyZShcImJhc2U2NC1hcnJheWJ1ZmZlclwiKTtcbn1cblxuY29uc3QgZGVjb2RlUGFja2V0ID0gKGVuY29kZWRQYWNrZXQsIGJpbmFyeVR5cGUpID0+IHtcbiAgaWYgKHR5cGVvZiBlbmNvZGVkUGFja2V0ICE9PSBcInN0cmluZ1wiKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6IFwibWVzc2FnZVwiLFxuICAgICAgZGF0YTogbWFwQmluYXJ5KGVuY29kZWRQYWNrZXQsIGJpbmFyeVR5cGUpXG4gICAgfTtcbiAgfVxuICBjb25zdCB0eXBlID0gZW5jb2RlZFBhY2tldC5jaGFyQXQoMCk7XG4gIGlmICh0eXBlID09PSBcImJcIikge1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiBcIm1lc3NhZ2VcIixcbiAgICAgIGRhdGE6IGRlY29kZUJhc2U2NFBhY2tldChlbmNvZGVkUGFja2V0LnN1YnN0cmluZygxKSwgYmluYXJ5VHlwZSlcbiAgICB9O1xuICB9XG4gIGNvbnN0IHBhY2tldFR5cGUgPSBQQUNLRVRfVFlQRVNfUkVWRVJTRVt0eXBlXTtcbiAgaWYgKCFwYWNrZXRUeXBlKSB7XG4gICAgcmV0dXJuIEVSUk9SX1BBQ0tFVDtcbiAgfVxuICByZXR1cm4gZW5jb2RlZFBhY2tldC5sZW5ndGggPiAxXG4gICAgPyB7XG4gICAgICAgIHR5cGU6IFBBQ0tFVF9UWVBFU19SRVZFUlNFW3R5cGVdLFxuICAgICAgICBkYXRhOiBlbmNvZGVkUGFja2V0LnN1YnN0cmluZygxKVxuICAgICAgfVxuICAgIDoge1xuICAgICAgICB0eXBlOiBQQUNLRVRfVFlQRVNfUkVWRVJTRVt0eXBlXVxuICAgICAgfTtcbn07XG5cbmNvbnN0IGRlY29kZUJhc2U2NFBhY2tldCA9IChkYXRhLCBiaW5hcnlUeXBlKSA9PiB7XG4gIGlmIChiYXNlNjRkZWNvZGVyKSB7XG4gICAgY29uc3QgZGVjb2RlZCA9IGJhc2U2NGRlY29kZXIuZGVjb2RlKGRhdGEpO1xuICAgIHJldHVybiBtYXBCaW5hcnkoZGVjb2RlZCwgYmluYXJ5VHlwZSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHsgYmFzZTY0OiB0cnVlLCBkYXRhIH07IC8vIGZhbGxiYWNrIGZvciBvbGQgYnJvd3NlcnNcbiAgfVxufTtcblxuY29uc3QgbWFwQmluYXJ5ID0gKGRhdGEsIGJpbmFyeVR5cGUpID0+IHtcbiAgc3dpdGNoIChiaW5hcnlUeXBlKSB7XG4gICAgY2FzZSBcImJsb2JcIjpcbiAgICAgIHJldHVybiBkYXRhIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIgPyBuZXcgQmxvYihbZGF0YV0pIDogZGF0YTtcbiAgICBjYXNlIFwiYXJyYXlidWZmZXJcIjpcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIGRhdGE7IC8vIGFzc3VtaW5nIHRoZSBkYXRhIGlzIGFscmVhZHkgYW4gQXJyYXlCdWZmZXJcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBkZWNvZGVQYWNrZXQ7XG4iLCJjb25zdCB7IFBBQ0tFVF9UWVBFUyB9ID0gcmVxdWlyZShcIi4vY29tbW9uc1wiKTtcblxuY29uc3Qgd2l0aE5hdGl2ZUJsb2IgPVxuICB0eXBlb2YgQmxvYiA9PT0gXCJmdW5jdGlvblwiIHx8XG4gICh0eXBlb2YgQmxvYiAhPT0gXCJ1bmRlZmluZWRcIiAmJlxuICAgIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChCbG9iKSA9PT0gXCJbb2JqZWN0IEJsb2JDb25zdHJ1Y3Rvcl1cIik7XG5jb25zdCB3aXRoTmF0aXZlQXJyYXlCdWZmZXIgPSB0eXBlb2YgQXJyYXlCdWZmZXIgPT09IFwiZnVuY3Rpb25cIjtcblxuLy8gQXJyYXlCdWZmZXIuaXNWaWV3IG1ldGhvZCBpcyBub3QgZGVmaW5lZCBpbiBJRTEwXG5jb25zdCBpc1ZpZXcgPSBvYmogPT4ge1xuICByZXR1cm4gdHlwZW9mIEFycmF5QnVmZmVyLmlzVmlldyA9PT0gXCJmdW5jdGlvblwiXG4gICAgPyBBcnJheUJ1ZmZlci5pc1ZpZXcob2JqKVxuICAgIDogb2JqICYmIG9iai5idWZmZXIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcjtcbn07XG5cbmNvbnN0IGVuY29kZVBhY2tldCA9ICh7IHR5cGUsIGRhdGEgfSwgc3VwcG9ydHNCaW5hcnksIGNhbGxiYWNrKSA9PiB7XG4gIGlmICh3aXRoTmF0aXZlQmxvYiAmJiBkYXRhIGluc3RhbmNlb2YgQmxvYikge1xuICAgIGlmIChzdXBwb3J0c0JpbmFyeSkge1xuICAgICAgcmV0dXJuIGNhbGxiYWNrKGRhdGEpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZW5jb2RlQmxvYkFzQmFzZTY0KGRhdGEsIGNhbGxiYWNrKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoXG4gICAgd2l0aE5hdGl2ZUFycmF5QnVmZmVyICYmXG4gICAgKGRhdGEgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlciB8fCBpc1ZpZXcoZGF0YSkpXG4gICkge1xuICAgIGlmIChzdXBwb3J0c0JpbmFyeSkge1xuICAgICAgcmV0dXJuIGNhbGxiYWNrKGRhdGEgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlciA/IGRhdGEgOiBkYXRhLmJ1ZmZlcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBlbmNvZGVCbG9iQXNCYXNlNjQobmV3IEJsb2IoW2RhdGFdKSwgY2FsbGJhY2spO1xuICAgIH1cbiAgfVxuICAvLyBwbGFpbiBzdHJpbmdcbiAgcmV0dXJuIGNhbGxiYWNrKFBBQ0tFVF9UWVBFU1t0eXBlXSArIChkYXRhIHx8IFwiXCIpKTtcbn07XG5cbmNvbnN0IGVuY29kZUJsb2JBc0Jhc2U2NCA9IChkYXRhLCBjYWxsYmFjaykgPT4ge1xuICBjb25zdCBmaWxlUmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgZmlsZVJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICBjb25zdCBjb250ZW50ID0gZmlsZVJlYWRlci5yZXN1bHQuc3BsaXQoXCIsXCIpWzFdO1xuICAgIGNhbGxiYWNrKFwiYlwiICsgY29udGVudCk7XG4gIH07XG4gIHJldHVybiBmaWxlUmVhZGVyLnJlYWRBc0RhdGFVUkwoZGF0YSk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGVuY29kZVBhY2tldDtcbiIsImNvbnN0IGVuY29kZVBhY2tldCA9IHJlcXVpcmUoXCIuL2VuY29kZVBhY2tldFwiKTtcbmNvbnN0IGRlY29kZVBhY2tldCA9IHJlcXVpcmUoXCIuL2RlY29kZVBhY2tldFwiKTtcblxuY29uc3QgU0VQQVJBVE9SID0gU3RyaW5nLmZyb21DaGFyQ29kZSgzMCk7IC8vIHNlZSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9EZWxpbWl0ZXIjQVNDSUlfZGVsaW1pdGVkX3RleHRcblxuY29uc3QgZW5jb2RlUGF5bG9hZCA9IChwYWNrZXRzLCBjYWxsYmFjaykgPT4ge1xuICAvLyBzb21lIHBhY2tldHMgbWF5IGJlIGFkZGVkIHRvIHRoZSBhcnJheSB3aGlsZSBlbmNvZGluZywgc28gdGhlIGluaXRpYWwgbGVuZ3RoIG11c3QgYmUgc2F2ZWRcbiAgY29uc3QgbGVuZ3RoID0gcGFja2V0cy5sZW5ndGg7XG4gIGNvbnN0IGVuY29kZWRQYWNrZXRzID0gbmV3IEFycmF5KGxlbmd0aCk7XG4gIGxldCBjb3VudCA9IDA7XG5cbiAgcGFja2V0cy5mb3JFYWNoKChwYWNrZXQsIGkpID0+IHtcbiAgICAvLyBmb3JjZSBiYXNlNjQgZW5jb2RpbmcgZm9yIGJpbmFyeSBwYWNrZXRzXG4gICAgZW5jb2RlUGFja2V0KHBhY2tldCwgZmFsc2UsIGVuY29kZWRQYWNrZXQgPT4ge1xuICAgICAgZW5jb2RlZFBhY2tldHNbaV0gPSBlbmNvZGVkUGFja2V0O1xuICAgICAgaWYgKCsrY291bnQgPT09IGxlbmd0aCkge1xuICAgICAgICBjYWxsYmFjayhlbmNvZGVkUGFja2V0cy5qb2luKFNFUEFSQVRPUikpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbn07XG5cbmNvbnN0IGRlY29kZVBheWxvYWQgPSAoZW5jb2RlZFBheWxvYWQsIGJpbmFyeVR5cGUpID0+IHtcbiAgY29uc3QgZW5jb2RlZFBhY2tldHMgPSBlbmNvZGVkUGF5bG9hZC5zcGxpdChTRVBBUkFUT1IpO1xuICBjb25zdCBwYWNrZXRzID0gW107XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgZW5jb2RlZFBhY2tldHMubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBkZWNvZGVkUGFja2V0ID0gZGVjb2RlUGFja2V0KGVuY29kZWRQYWNrZXRzW2ldLCBiaW5hcnlUeXBlKTtcbiAgICBwYWNrZXRzLnB1c2goZGVjb2RlZFBhY2tldCk7XG4gICAgaWYgKGRlY29kZWRQYWNrZXQudHlwZSA9PT0gXCJlcnJvclwiKSB7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHBhY2tldHM7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgcHJvdG9jb2w6IDQsXG4gIGVuY29kZVBhY2tldCxcbiAgZW5jb2RlUGF5bG9hZCxcbiAgZGVjb2RlUGFja2V0LFxuICBkZWNvZGVQYXlsb2FkXG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgaGFzID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eVxuICAsIHByZWZpeCA9ICd+JztcblxuLyoqXG4gKiBDb25zdHJ1Y3RvciB0byBjcmVhdGUgYSBzdG9yYWdlIGZvciBvdXIgYEVFYCBvYmplY3RzLlxuICogQW4gYEV2ZW50c2AgaW5zdGFuY2UgaXMgYSBwbGFpbiBvYmplY3Qgd2hvc2UgcHJvcGVydGllcyBhcmUgZXZlbnQgbmFtZXMuXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBFdmVudHMoKSB7fVxuXG4vL1xuLy8gV2UgdHJ5IHRvIG5vdCBpbmhlcml0IGZyb20gYE9iamVjdC5wcm90b3R5cGVgLiBJbiBzb21lIGVuZ2luZXMgY3JlYXRpbmcgYW5cbi8vIGluc3RhbmNlIGluIHRoaXMgd2F5IGlzIGZhc3RlciB0aGFuIGNhbGxpbmcgYE9iamVjdC5jcmVhdGUobnVsbClgIGRpcmVjdGx5LlxuLy8gSWYgYE9iamVjdC5jcmVhdGUobnVsbClgIGlzIG5vdCBzdXBwb3J0ZWQgd2UgcHJlZml4IHRoZSBldmVudCBuYW1lcyB3aXRoIGFcbi8vIGNoYXJhY3RlciB0byBtYWtlIHN1cmUgdGhhdCB0aGUgYnVpbHQtaW4gb2JqZWN0IHByb3BlcnRpZXMgYXJlIG5vdFxuLy8gb3ZlcnJpZGRlbiBvciB1c2VkIGFzIGFuIGF0dGFjayB2ZWN0b3IuXG4vL1xuaWYgKE9iamVjdC5jcmVhdGUpIHtcbiAgRXZlbnRzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbiAgLy9cbiAgLy8gVGhpcyBoYWNrIGlzIG5lZWRlZCBiZWNhdXNlIHRoZSBgX19wcm90b19fYCBwcm9wZXJ0eSBpcyBzdGlsbCBpbmhlcml0ZWQgaW5cbiAgLy8gc29tZSBvbGQgYnJvd3NlcnMgbGlrZSBBbmRyb2lkIDQsIGlQaG9uZSA1LjEsIE9wZXJhIDExIGFuZCBTYWZhcmkgNS5cbiAgLy9cbiAgaWYgKCFuZXcgRXZlbnRzKCkuX19wcm90b19fKSBwcmVmaXggPSBmYWxzZTtcbn1cblxuLyoqXG4gKiBSZXByZXNlbnRhdGlvbiBvZiBhIHNpbmdsZSBldmVudCBsaXN0ZW5lci5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgbGlzdGVuZXIgZnVuY3Rpb24uXG4gKiBAcGFyYW0geyp9IGNvbnRleHQgVGhlIGNvbnRleHQgdG8gaW52b2tlIHRoZSBsaXN0ZW5lciB3aXRoLlxuICogQHBhcmFtIHtCb29sZWFufSBbb25jZT1mYWxzZV0gU3BlY2lmeSBpZiB0aGUgbGlzdGVuZXIgaXMgYSBvbmUtdGltZSBsaXN0ZW5lci5cbiAqIEBjb25zdHJ1Y3RvclxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gRUUoZm4sIGNvbnRleHQsIG9uY2UpIHtcbiAgdGhpcy5mbiA9IGZuO1xuICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICB0aGlzLm9uY2UgPSBvbmNlIHx8IGZhbHNlO1xufVxuXG4vKipcbiAqIEFkZCBhIGxpc3RlbmVyIGZvciBhIGdpdmVuIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7RXZlbnRFbWl0dGVyfSBlbWl0dGVyIFJlZmVyZW5jZSB0byB0aGUgYEV2ZW50RW1pdHRlcmAgaW5zdGFuY2UuXG4gKiBAcGFyYW0geyhTdHJpbmd8U3ltYm9sKX0gZXZlbnQgVGhlIGV2ZW50IG5hbWUuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgbGlzdGVuZXIgZnVuY3Rpb24uXG4gKiBAcGFyYW0geyp9IGNvbnRleHQgVGhlIGNvbnRleHQgdG8gaW52b2tlIHRoZSBsaXN0ZW5lciB3aXRoLlxuICogQHBhcmFtIHtCb29sZWFufSBvbmNlIFNwZWNpZnkgaWYgdGhlIGxpc3RlbmVyIGlzIGEgb25lLXRpbWUgbGlzdGVuZXIuXG4gKiBAcmV0dXJucyB7RXZlbnRFbWl0dGVyfVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gYWRkTGlzdGVuZXIoZW1pdHRlciwgZXZlbnQsIGZuLCBjb250ZXh0LCBvbmNlKSB7XG4gIGlmICh0eXBlb2YgZm4gIT09ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgbGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG4gIH1cblxuICB2YXIgbGlzdGVuZXIgPSBuZXcgRUUoZm4sIGNvbnRleHQgfHwgZW1pdHRlciwgb25jZSlcbiAgICAsIGV2dCA9IHByZWZpeCA/IHByZWZpeCArIGV2ZW50IDogZXZlbnQ7XG5cbiAgaWYgKCFlbWl0dGVyLl9ldmVudHNbZXZ0XSkgZW1pdHRlci5fZXZlbnRzW2V2dF0gPSBsaXN0ZW5lciwgZW1pdHRlci5fZXZlbnRzQ291bnQrKztcbiAgZWxzZSBpZiAoIWVtaXR0ZXIuX2V2ZW50c1tldnRdLmZuKSBlbWl0dGVyLl9ldmVudHNbZXZ0XS5wdXNoKGxpc3RlbmVyKTtcbiAgZWxzZSBlbWl0dGVyLl9ldmVudHNbZXZ0XSA9IFtlbWl0dGVyLl9ldmVudHNbZXZ0XSwgbGlzdGVuZXJdO1xuXG4gIHJldHVybiBlbWl0dGVyO1xufVxuXG4vKipcbiAqIENsZWFyIGV2ZW50IGJ5IG5hbWUuXG4gKlxuICogQHBhcmFtIHtFdmVudEVtaXR0ZXJ9IGVtaXR0ZXIgUmVmZXJlbmNlIHRvIHRoZSBgRXZlbnRFbWl0dGVyYCBpbnN0YW5jZS5cbiAqIEBwYXJhbSB7KFN0cmluZ3xTeW1ib2wpfSBldnQgVGhlIEV2ZW50IG5hbWUuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBjbGVhckV2ZW50KGVtaXR0ZXIsIGV2dCkge1xuICBpZiAoLS1lbWl0dGVyLl9ldmVudHNDb3VudCA9PT0gMCkgZW1pdHRlci5fZXZlbnRzID0gbmV3IEV2ZW50cygpO1xuICBlbHNlIGRlbGV0ZSBlbWl0dGVyLl9ldmVudHNbZXZ0XTtcbn1cblxuLyoqXG4gKiBNaW5pbWFsIGBFdmVudEVtaXR0ZXJgIGludGVyZmFjZSB0aGF0IGlzIG1vbGRlZCBhZ2FpbnN0IHRoZSBOb2RlLmpzXG4gKiBgRXZlbnRFbWl0dGVyYCBpbnRlcmZhY2UuXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAcHVibGljXG4gKi9cbmZ1bmN0aW9uIEV2ZW50RW1pdHRlcigpIHtcbiAgdGhpcy5fZXZlbnRzID0gbmV3IEV2ZW50cygpO1xuICB0aGlzLl9ldmVudHNDb3VudCA9IDA7XG59XG5cbi8qKlxuICogUmV0dXJuIGFuIGFycmF5IGxpc3RpbmcgdGhlIGV2ZW50cyBmb3Igd2hpY2ggdGhlIGVtaXR0ZXIgaGFzIHJlZ2lzdGVyZWRcbiAqIGxpc3RlbmVycy5cbiAqXG4gKiBAcmV0dXJucyB7QXJyYXl9XG4gKiBAcHVibGljXG4gKi9cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuZXZlbnROYW1lcyA9IGZ1bmN0aW9uIGV2ZW50TmFtZXMoKSB7XG4gIHZhciBuYW1lcyA9IFtdXG4gICAgLCBldmVudHNcbiAgICAsIG5hbWU7XG5cbiAgaWYgKHRoaXMuX2V2ZW50c0NvdW50ID09PSAwKSByZXR1cm4gbmFtZXM7XG5cbiAgZm9yIChuYW1lIGluIChldmVudHMgPSB0aGlzLl9ldmVudHMpKSB7XG4gICAgaWYgKGhhcy5jYWxsKGV2ZW50cywgbmFtZSkpIG5hbWVzLnB1c2gocHJlZml4ID8gbmFtZS5zbGljZSgxKSA6IG5hbWUpO1xuICB9XG5cbiAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHtcbiAgICByZXR1cm4gbmFtZXMuY29uY2F0KE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZXZlbnRzKSk7XG4gIH1cblxuICByZXR1cm4gbmFtZXM7XG59O1xuXG4vKipcbiAqIFJldHVybiB0aGUgbGlzdGVuZXJzIHJlZ2lzdGVyZWQgZm9yIGEgZ2l2ZW4gZXZlbnQuXG4gKlxuICogQHBhcmFtIHsoU3RyaW5nfFN5bWJvbCl9IGV2ZW50IFRoZSBldmVudCBuYW1lLlxuICogQHJldHVybnMge0FycmF5fSBUaGUgcmVnaXN0ZXJlZCBsaXN0ZW5lcnMuXG4gKiBAcHVibGljXG4gKi9cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJzID0gZnVuY3Rpb24gbGlzdGVuZXJzKGV2ZW50KSB7XG4gIHZhciBldnQgPSBwcmVmaXggPyBwcmVmaXggKyBldmVudCA6IGV2ZW50XG4gICAgLCBoYW5kbGVycyA9IHRoaXMuX2V2ZW50c1tldnRdO1xuXG4gIGlmICghaGFuZGxlcnMpIHJldHVybiBbXTtcbiAgaWYgKGhhbmRsZXJzLmZuKSByZXR1cm4gW2hhbmRsZXJzLmZuXTtcblxuICBmb3IgKHZhciBpID0gMCwgbCA9IGhhbmRsZXJzLmxlbmd0aCwgZWUgPSBuZXcgQXJyYXkobCk7IGkgPCBsOyBpKyspIHtcbiAgICBlZVtpXSA9IGhhbmRsZXJzW2ldLmZuO1xuICB9XG5cbiAgcmV0dXJuIGVlO1xufTtcblxuLyoqXG4gKiBSZXR1cm4gdGhlIG51bWJlciBvZiBsaXN0ZW5lcnMgbGlzdGVuaW5nIHRvIGEgZ2l2ZW4gZXZlbnQuXG4gKlxuICogQHBhcmFtIHsoU3RyaW5nfFN5bWJvbCl9IGV2ZW50IFRoZSBldmVudCBuYW1lLlxuICogQHJldHVybnMge051bWJlcn0gVGhlIG51bWJlciBvZiBsaXN0ZW5lcnMuXG4gKiBAcHVibGljXG4gKi9cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJDb3VudCA9IGZ1bmN0aW9uIGxpc3RlbmVyQ291bnQoZXZlbnQpIHtcbiAgdmFyIGV2dCA9IHByZWZpeCA/IHByZWZpeCArIGV2ZW50IDogZXZlbnRcbiAgICAsIGxpc3RlbmVycyA9IHRoaXMuX2V2ZW50c1tldnRdO1xuXG4gIGlmICghbGlzdGVuZXJzKSByZXR1cm4gMDtcbiAgaWYgKGxpc3RlbmVycy5mbikgcmV0dXJuIDE7XG4gIHJldHVybiBsaXN0ZW5lcnMubGVuZ3RoO1xufTtcblxuLyoqXG4gKiBDYWxscyBlYWNoIG9mIHRoZSBsaXN0ZW5lcnMgcmVnaXN0ZXJlZCBmb3IgYSBnaXZlbiBldmVudC5cbiAqXG4gKiBAcGFyYW0geyhTdHJpbmd8U3ltYm9sKX0gZXZlbnQgVGhlIGV2ZW50IG5hbWUuXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gYHRydWVgIGlmIHRoZSBldmVudCBoYWQgbGlzdGVuZXJzLCBlbHNlIGBmYWxzZWAuXG4gKiBAcHVibGljXG4gKi9cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuZW1pdCA9IGZ1bmN0aW9uIGVtaXQoZXZlbnQsIGExLCBhMiwgYTMsIGE0LCBhNSkge1xuICB2YXIgZXZ0ID0gcHJlZml4ID8gcHJlZml4ICsgZXZlbnQgOiBldmVudDtcblxuICBpZiAoIXRoaXMuX2V2ZW50c1tldnRdKSByZXR1cm4gZmFsc2U7XG5cbiAgdmFyIGxpc3RlbmVycyA9IHRoaXMuX2V2ZW50c1tldnRdXG4gICAgLCBsZW4gPSBhcmd1bWVudHMubGVuZ3RoXG4gICAgLCBhcmdzXG4gICAgLCBpO1xuXG4gIGlmIChsaXN0ZW5lcnMuZm4pIHtcbiAgICBpZiAobGlzdGVuZXJzLm9uY2UpIHRoaXMucmVtb3ZlTGlzdGVuZXIoZXZlbnQsIGxpc3RlbmVycy5mbiwgdW5kZWZpbmVkLCB0cnVlKTtcblxuICAgIHN3aXRjaCAobGVuKSB7XG4gICAgICBjYXNlIDE6IHJldHVybiBsaXN0ZW5lcnMuZm4uY2FsbChsaXN0ZW5lcnMuY29udGV4dCksIHRydWU7XG4gICAgICBjYXNlIDI6IHJldHVybiBsaXN0ZW5lcnMuZm4uY2FsbChsaXN0ZW5lcnMuY29udGV4dCwgYTEpLCB0cnVlO1xuICAgICAgY2FzZSAzOiByZXR1cm4gbGlzdGVuZXJzLmZuLmNhbGwobGlzdGVuZXJzLmNvbnRleHQsIGExLCBhMiksIHRydWU7XG4gICAgICBjYXNlIDQ6IHJldHVybiBsaXN0ZW5lcnMuZm4uY2FsbChsaXN0ZW5lcnMuY29udGV4dCwgYTEsIGEyLCBhMyksIHRydWU7XG4gICAgICBjYXNlIDU6IHJldHVybiBsaXN0ZW5lcnMuZm4uY2FsbChsaXN0ZW5lcnMuY29udGV4dCwgYTEsIGEyLCBhMywgYTQpLCB0cnVlO1xuICAgICAgY2FzZSA2OiByZXR1cm4gbGlzdGVuZXJzLmZuLmNhbGwobGlzdGVuZXJzLmNvbnRleHQsIGExLCBhMiwgYTMsIGE0LCBhNSksIHRydWU7XG4gICAgfVxuXG4gICAgZm9yIChpID0gMSwgYXJncyA9IG5ldyBBcnJheShsZW4gLTEpOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuICAgIH1cblxuICAgIGxpc3RlbmVycy5mbi5hcHBseShsaXN0ZW5lcnMuY29udGV4dCwgYXJncyk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGxlbmd0aCA9IGxpc3RlbmVycy5sZW5ndGhcbiAgICAgICwgajtcblxuICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGxpc3RlbmVyc1tpXS5vbmNlKSB0aGlzLnJlbW92ZUxpc3RlbmVyKGV2ZW50LCBsaXN0ZW5lcnNbaV0uZm4sIHVuZGVmaW5lZCwgdHJ1ZSk7XG5cbiAgICAgIHN3aXRjaCAobGVuKSB7XG4gICAgICAgIGNhc2UgMTogbGlzdGVuZXJzW2ldLmZuLmNhbGwobGlzdGVuZXJzW2ldLmNvbnRleHQpOyBicmVhaztcbiAgICAgICAgY2FzZSAyOiBsaXN0ZW5lcnNbaV0uZm4uY2FsbChsaXN0ZW5lcnNbaV0uY29udGV4dCwgYTEpOyBicmVhaztcbiAgICAgICAgY2FzZSAzOiBsaXN0ZW5lcnNbaV0uZm4uY2FsbChsaXN0ZW5lcnNbaV0uY29udGV4dCwgYTEsIGEyKTsgYnJlYWs7XG4gICAgICAgIGNhc2UgNDogbGlzdGVuZXJzW2ldLmZuLmNhbGwobGlzdGVuZXJzW2ldLmNvbnRleHQsIGExLCBhMiwgYTMpOyBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBpZiAoIWFyZ3MpIGZvciAoaiA9IDEsIGFyZ3MgPSBuZXcgQXJyYXkobGVuIC0xKTsgaiA8IGxlbjsgaisrKSB7XG4gICAgICAgICAgICBhcmdzW2ogLSAxXSA9IGFyZ3VtZW50c1tqXTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBsaXN0ZW5lcnNbaV0uZm4uYXBwbHkobGlzdGVuZXJzW2ldLmNvbnRleHQsIGFyZ3MpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufTtcblxuLyoqXG4gKiBBZGQgYSBsaXN0ZW5lciBmb3IgYSBnaXZlbiBldmVudC5cbiAqXG4gKiBAcGFyYW0geyhTdHJpbmd8U3ltYm9sKX0gZXZlbnQgVGhlIGV2ZW50IG5hbWUuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgbGlzdGVuZXIgZnVuY3Rpb24uXG4gKiBAcGFyYW0geyp9IFtjb250ZXh0PXRoaXNdIFRoZSBjb250ZXh0IHRvIGludm9rZSB0aGUgbGlzdGVuZXIgd2l0aC5cbiAqIEByZXR1cm5zIHtFdmVudEVtaXR0ZXJ9IGB0aGlzYC5cbiAqIEBwdWJsaWNcbiAqL1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uIG9uKGV2ZW50LCBmbiwgY29udGV4dCkge1xuICByZXR1cm4gYWRkTGlzdGVuZXIodGhpcywgZXZlbnQsIGZuLCBjb250ZXh0LCBmYWxzZSk7XG59O1xuXG4vKipcbiAqIEFkZCBhIG9uZS10aW1lIGxpc3RlbmVyIGZvciBhIGdpdmVuIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7KFN0cmluZ3xTeW1ib2wpfSBldmVudCBUaGUgZXZlbnQgbmFtZS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBsaXN0ZW5lciBmdW5jdGlvbi5cbiAqIEBwYXJhbSB7Kn0gW2NvbnRleHQ9dGhpc10gVGhlIGNvbnRleHQgdG8gaW52b2tlIHRoZSBsaXN0ZW5lciB3aXRoLlxuICogQHJldHVybnMge0V2ZW50RW1pdHRlcn0gYHRoaXNgLlxuICogQHB1YmxpY1xuICovXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uY2UgPSBmdW5jdGlvbiBvbmNlKGV2ZW50LCBmbiwgY29udGV4dCkge1xuICByZXR1cm4gYWRkTGlzdGVuZXIodGhpcywgZXZlbnQsIGZuLCBjb250ZXh0LCB0cnVlKTtcbn07XG5cbi8qKlxuICogUmVtb3ZlIHRoZSBsaXN0ZW5lcnMgb2YgYSBnaXZlbiBldmVudC5cbiAqXG4gKiBAcGFyYW0geyhTdHJpbmd8U3ltYm9sKX0gZXZlbnQgVGhlIGV2ZW50IG5hbWUuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBPbmx5IHJlbW92ZSB0aGUgbGlzdGVuZXJzIHRoYXQgbWF0Y2ggdGhpcyBmdW5jdGlvbi5cbiAqIEBwYXJhbSB7Kn0gY29udGV4dCBPbmx5IHJlbW92ZSB0aGUgbGlzdGVuZXJzIHRoYXQgaGF2ZSB0aGlzIGNvbnRleHQuXG4gKiBAcGFyYW0ge0Jvb2xlYW59IG9uY2UgT25seSByZW1vdmUgb25lLXRpbWUgbGlzdGVuZXJzLlxuICogQHJldHVybnMge0V2ZW50RW1pdHRlcn0gYHRoaXNgLlxuICogQHB1YmxpY1xuICovXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyID0gZnVuY3Rpb24gcmVtb3ZlTGlzdGVuZXIoZXZlbnQsIGZuLCBjb250ZXh0LCBvbmNlKSB7XG4gIHZhciBldnQgPSBwcmVmaXggPyBwcmVmaXggKyBldmVudCA6IGV2ZW50O1xuXG4gIGlmICghdGhpcy5fZXZlbnRzW2V2dF0pIHJldHVybiB0aGlzO1xuICBpZiAoIWZuKSB7XG4gICAgY2xlYXJFdmVudCh0aGlzLCBldnQpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgdmFyIGxpc3RlbmVycyA9IHRoaXMuX2V2ZW50c1tldnRdO1xuXG4gIGlmIChsaXN0ZW5lcnMuZm4pIHtcbiAgICBpZiAoXG4gICAgICBsaXN0ZW5lcnMuZm4gPT09IGZuICYmXG4gICAgICAoIW9uY2UgfHwgbGlzdGVuZXJzLm9uY2UpICYmXG4gICAgICAoIWNvbnRleHQgfHwgbGlzdGVuZXJzLmNvbnRleHQgPT09IGNvbnRleHQpXG4gICAgKSB7XG4gICAgICBjbGVhckV2ZW50KHRoaXMsIGV2dCk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGZvciAodmFyIGkgPSAwLCBldmVudHMgPSBbXSwgbGVuZ3RoID0gbGlzdGVuZXJzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoXG4gICAgICAgIGxpc3RlbmVyc1tpXS5mbiAhPT0gZm4gfHxcbiAgICAgICAgKG9uY2UgJiYgIWxpc3RlbmVyc1tpXS5vbmNlKSB8fFxuICAgICAgICAoY29udGV4dCAmJiBsaXN0ZW5lcnNbaV0uY29udGV4dCAhPT0gY29udGV4dClcbiAgICAgICkge1xuICAgICAgICBldmVudHMucHVzaChsaXN0ZW5lcnNbaV0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vXG4gICAgLy8gUmVzZXQgdGhlIGFycmF5LCBvciByZW1vdmUgaXQgY29tcGxldGVseSBpZiB3ZSBoYXZlIG5vIG1vcmUgbGlzdGVuZXJzLlxuICAgIC8vXG4gICAgaWYgKGV2ZW50cy5sZW5ndGgpIHRoaXMuX2V2ZW50c1tldnRdID0gZXZlbnRzLmxlbmd0aCA9PT0gMSA/IGV2ZW50c1swXSA6IGV2ZW50cztcbiAgICBlbHNlIGNsZWFyRXZlbnQodGhpcywgZXZ0KTtcbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBSZW1vdmUgYWxsIGxpc3RlbmVycywgb3IgdGhvc2Ugb2YgdGhlIHNwZWNpZmllZCBldmVudC5cbiAqXG4gKiBAcGFyYW0geyhTdHJpbmd8U3ltYm9sKX0gW2V2ZW50XSBUaGUgZXZlbnQgbmFtZS5cbiAqIEByZXR1cm5zIHtFdmVudEVtaXR0ZXJ9IGB0aGlzYC5cbiAqIEBwdWJsaWNcbiAqL1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBmdW5jdGlvbiByZW1vdmVBbGxMaXN0ZW5lcnMoZXZlbnQpIHtcbiAgdmFyIGV2dDtcblxuICBpZiAoZXZlbnQpIHtcbiAgICBldnQgPSBwcmVmaXggPyBwcmVmaXggKyBldmVudCA6IGV2ZW50O1xuICAgIGlmICh0aGlzLl9ldmVudHNbZXZ0XSkgY2xlYXJFdmVudCh0aGlzLCBldnQpO1xuICB9IGVsc2Uge1xuICAgIHRoaXMuX2V2ZW50cyA9IG5ldyBFdmVudHMoKTtcbiAgICB0aGlzLl9ldmVudHNDb3VudCA9IDA7XG4gIH1cblxuICByZXR1cm4gdGhpcztcbn07XG5cbi8vXG4vLyBBbGlhcyBtZXRob2RzIG5hbWVzIGJlY2F1c2UgcGVvcGxlIHJvbGwgbGlrZSB0aGF0LlxuLy9cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub2ZmID0gRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lcjtcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuYWRkTGlzdGVuZXIgPSBFdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uO1xuXG4vL1xuLy8gRXhwb3NlIHRoZSBwcmVmaXguXG4vL1xuRXZlbnRFbWl0dGVyLnByZWZpeGVkID0gcHJlZml4O1xuXG4vL1xuLy8gQWxsb3cgYEV2ZW50RW1pdHRlcmAgdG8gYmUgaW1wb3J0ZWQgYXMgbW9kdWxlIG5hbWVzcGFjZS5cbi8vXG5FdmVudEVtaXR0ZXIuRXZlbnRFbWl0dGVyID0gRXZlbnRFbWl0dGVyO1xuXG4vL1xuLy8gRXhwb3NlIHRoZSBtb2R1bGUuXG4vL1xuaWYgKCd1bmRlZmluZWQnICE9PSB0eXBlb2YgbW9kdWxlKSB7XG4gIG1vZHVsZS5leHBvcnRzID0gRXZlbnRFbWl0dGVyO1xufVxuIiwiXG4vKipcbiAqIE1vZHVsZSBleHBvcnRzLlxuICpcbiAqIExvZ2ljIGJvcnJvd2VkIGZyb20gTW9kZXJuaXpyOlxuICpcbiAqICAgLSBodHRwczovL2dpdGh1Yi5jb20vTW9kZXJuaXpyL01vZGVybml6ci9ibG9iL21hc3Rlci9mZWF0dXJlLWRldGVjdHMvY29ycy5qc1xuICovXG5cbnRyeSB7XG4gIG1vZHVsZS5leHBvcnRzID0gdHlwZW9mIFhNTEh0dHBSZXF1ZXN0ICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICd3aXRoQ3JlZGVudGlhbHMnIGluIG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xufSBjYXRjaCAoZXJyKSB7XG4gIC8vIGlmIFhNTEh0dHAgc3VwcG9ydCBpcyBkaXNhYmxlZCBpbiBJRSB0aGVuIGl0IHdpbGwgdGhyb3dcbiAgLy8gd2hlbiB0cnlpbmcgdG8gY3JlYXRlXG4gIG1vZHVsZS5leHBvcnRzID0gZmFsc2U7XG59XG4iLCIvKipcbiAqIENvbXBpbGVzIGEgcXVlcnlzdHJpbmdcbiAqIFJldHVybnMgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBvYmplY3RcbiAqXG4gKiBAcGFyYW0ge09iamVjdH1cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmV4cG9ydHMuZW5jb2RlID0gZnVuY3Rpb24gKG9iaikge1xuICB2YXIgc3RyID0gJyc7XG5cbiAgZm9yICh2YXIgaSBpbiBvYmopIHtcbiAgICBpZiAob2JqLmhhc093blByb3BlcnR5KGkpKSB7XG4gICAgICBpZiAoc3RyLmxlbmd0aCkgc3RyICs9ICcmJztcbiAgICAgIHN0ciArPSBlbmNvZGVVUklDb21wb25lbnQoaSkgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQob2JqW2ldKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gc3RyO1xufTtcblxuLyoqXG4gKiBQYXJzZXMgYSBzaW1wbGUgcXVlcnlzdHJpbmcgaW50byBhbiBvYmplY3RcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gcXNcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmV4cG9ydHMuZGVjb2RlID0gZnVuY3Rpb24ocXMpe1xuICB2YXIgcXJ5ID0ge307XG4gIHZhciBwYWlycyA9IHFzLnNwbGl0KCcmJyk7XG4gIGZvciAodmFyIGkgPSAwLCBsID0gcGFpcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgdmFyIHBhaXIgPSBwYWlyc1tpXS5zcGxpdCgnPScpO1xuICAgIHFyeVtkZWNvZGVVUklDb21wb25lbnQocGFpclswXSldID0gZGVjb2RlVVJJQ29tcG9uZW50KHBhaXJbMV0pO1xuICB9XG4gIHJldHVybiBxcnk7XG59O1xuIiwiLyoqXG4gKiBQYXJzZXMgYW4gVVJJXG4gKlxuICogQGF1dGhvciBTdGV2ZW4gTGV2aXRoYW4gPHN0ZXZlbmxldml0aGFuLmNvbT4gKE1JVCBsaWNlbnNlKVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxudmFyIHJlID0gL14oPzooPyFbXjpAXSs6W146QFxcL10qQCkoaHR0cHxodHRwc3x3c3x3c3MpOlxcL1xcLyk/KCg/OigoW146QF0qKSg/OjooW146QF0qKSk/KT9AKT8oKD86W2EtZjAtOV17MCw0fTopezIsN31bYS1mMC05XXswLDR9fFteOlxcLz8jXSopKD86OihcXGQqKSk/KSgoKFxcLyg/OltePyNdKD8hW14/I1xcL10qXFwuW14/I1xcLy5dKyg/Ols/I118JCkpKSpcXC8/KT8oW14/I1xcL10qKSkoPzpcXD8oW14jXSopKT8oPzojKC4qKSk/KS87XG5cbnZhciBwYXJ0cyA9IFtcbiAgICAnc291cmNlJywgJ3Byb3RvY29sJywgJ2F1dGhvcml0eScsICd1c2VySW5mbycsICd1c2VyJywgJ3Bhc3N3b3JkJywgJ2hvc3QnLCAncG9ydCcsICdyZWxhdGl2ZScsICdwYXRoJywgJ2RpcmVjdG9yeScsICdmaWxlJywgJ3F1ZXJ5JywgJ2FuY2hvcidcbl07XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gcGFyc2V1cmkoc3RyKSB7XG4gICAgdmFyIHNyYyA9IHN0cixcbiAgICAgICAgYiA9IHN0ci5pbmRleE9mKCdbJyksXG4gICAgICAgIGUgPSBzdHIuaW5kZXhPZignXScpO1xuXG4gICAgaWYgKGIgIT0gLTEgJiYgZSAhPSAtMSkge1xuICAgICAgICBzdHIgPSBzdHIuc3Vic3RyaW5nKDAsIGIpICsgc3RyLnN1YnN0cmluZyhiLCBlKS5yZXBsYWNlKC86L2csICc7JykgKyBzdHIuc3Vic3RyaW5nKGUsIHN0ci5sZW5ndGgpO1xuICAgIH1cblxuICAgIHZhciBtID0gcmUuZXhlYyhzdHIgfHwgJycpLFxuICAgICAgICB1cmkgPSB7fSxcbiAgICAgICAgaSA9IDE0O1xuXG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgICB1cmlbcGFydHNbaV1dID0gbVtpXSB8fCAnJztcbiAgICB9XG5cbiAgICBpZiAoYiAhPSAtMSAmJiBlICE9IC0xKSB7XG4gICAgICAgIHVyaS5zb3VyY2UgPSBzcmM7XG4gICAgICAgIHVyaS5ob3N0ID0gdXJpLmhvc3Quc3Vic3RyaW5nKDEsIHVyaS5ob3N0Lmxlbmd0aCAtIDEpLnJlcGxhY2UoLzsvZywgJzonKTtcbiAgICAgICAgdXJpLmF1dGhvcml0eSA9IHVyaS5hdXRob3JpdHkucmVwbGFjZSgnWycsICcnKS5yZXBsYWNlKCddJywgJycpLnJlcGxhY2UoLzsvZywgJzonKTtcbiAgICAgICAgdXJpLmlwdjZ1cmkgPSB0cnVlO1xuICAgIH1cblxuICAgIHVyaS5wYXRoTmFtZXMgPSBwYXRoTmFtZXModXJpLCB1cmlbJ3BhdGgnXSk7XG4gICAgdXJpLnF1ZXJ5S2V5ID0gcXVlcnlLZXkodXJpLCB1cmlbJ3F1ZXJ5J10pO1xuXG4gICAgcmV0dXJuIHVyaTtcbn07XG5cbmZ1bmN0aW9uIHBhdGhOYW1lcyhvYmosIHBhdGgpIHtcbiAgICB2YXIgcmVneCA9IC9cXC97Miw5fS9nLFxuICAgICAgICBuYW1lcyA9IHBhdGgucmVwbGFjZShyZWd4LCBcIi9cIikuc3BsaXQoXCIvXCIpO1xuXG4gICAgaWYgKHBhdGguc3Vic3RyKDAsIDEpID09ICcvJyB8fCBwYXRoLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBuYW1lcy5zcGxpY2UoMCwgMSk7XG4gICAgfVxuICAgIGlmIChwYXRoLnN1YnN0cihwYXRoLmxlbmd0aCAtIDEsIDEpID09ICcvJykge1xuICAgICAgICBuYW1lcy5zcGxpY2UobmFtZXMubGVuZ3RoIC0gMSwgMSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5hbWVzO1xufVxuXG5mdW5jdGlvbiBxdWVyeUtleSh1cmksIHF1ZXJ5KSB7XG4gICAgdmFyIGRhdGEgPSB7fTtcblxuICAgIHF1ZXJ5LnJlcGxhY2UoLyg/Ol58JikoW14mPV0qKT0/KFteJl0qKS9nLCBmdW5jdGlvbiAoJDAsICQxLCAkMikge1xuICAgICAgICBpZiAoJDEpIHtcbiAgICAgICAgICAgIGRhdGFbJDFdID0gJDI7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiBkYXRhO1xufVxuIiwicGFyY2VsUmVxdWlyZT1mdW5jdGlvbihlLHIsdCxuKXt2YXIgaSxvPVwiZnVuY3Rpb25cIj09dHlwZW9mIHBhcmNlbFJlcXVpcmUmJnBhcmNlbFJlcXVpcmUsdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2Z1bmN0aW9uIGYodCxuKXtpZighclt0XSl7aWYoIWVbdF0pe3ZhciBpPVwiZnVuY3Rpb25cIj09dHlwZW9mIHBhcmNlbFJlcXVpcmUmJnBhcmNlbFJlcXVpcmU7aWYoIW4mJmkpcmV0dXJuIGkodCwhMCk7aWYobylyZXR1cm4gbyh0LCEwKTtpZih1JiZcInN0cmluZ1wiPT10eXBlb2YgdClyZXR1cm4gdSh0KTt2YXIgYz1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK3QrXCInXCIpO3Rocm93IGMuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixjfXAucmVzb2x2ZT1mdW5jdGlvbihyKXtyZXR1cm4gZVt0XVsxXVtyXXx8cn0scC5jYWNoZT17fTt2YXIgbD1yW3RdPW5ldyBmLk1vZHVsZSh0KTtlW3RdWzBdLmNhbGwobC5leHBvcnRzLHAsbCxsLmV4cG9ydHMsdGhpcyl9cmV0dXJuIHJbdF0uZXhwb3J0cztmdW5jdGlvbiBwKGUpe3JldHVybiBmKHAucmVzb2x2ZShlKSl9fWYuaXNQYXJjZWxSZXF1aXJlPSEwLGYuTW9kdWxlPWZ1bmN0aW9uKGUpe3RoaXMuaWQ9ZSx0aGlzLmJ1bmRsZT1mLHRoaXMuZXhwb3J0cz17fX0sZi5tb2R1bGVzPWUsZi5jYWNoZT1yLGYucGFyZW50PW8sZi5yZWdpc3Rlcj1mdW5jdGlvbihyLHQpe2Vbcl09W2Z1bmN0aW9uKGUscil7ci5leHBvcnRzPXR9LHt9XX07Zm9yKHZhciBjPTA7Yzx0Lmxlbmd0aDtjKyspdHJ5e2YodFtjXSl9Y2F0Y2goZSl7aXx8KGk9ZSl9aWYodC5sZW5ndGgpe3ZhciBsPWYodFt0Lmxlbmd0aC0xXSk7XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHMmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBtb2R1bGU/bW9kdWxlLmV4cG9ydHM9bDpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKGZ1bmN0aW9uKCl7cmV0dXJuIGx9KTpuJiYodGhpc1tuXT1sKX1pZihwYXJjZWxSZXF1aXJlPWYsaSl0aHJvdyBpO3JldHVybiBmfSh7XCJFZ0JoXCI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpIHtcbnZhciBlPXt9O2UudXNlQmxvYkJ1aWxkZXI9ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIG5ldyBCbG9iKFtdKSwhMX1jYXRjaChlKXtyZXR1cm4hMH19KCksZS51c2VBcnJheUJ1ZmZlclZpZXc9IWUudXNlQmxvYkJ1aWxkZXImJmZ1bmN0aW9uKCl7dHJ5e3JldHVybiAwPT09bmV3IEJsb2IoW25ldyBVaW50OEFycmF5KFtdKV0pLnNpemV9Y2F0Y2goZSl7cmV0dXJuITB9fSgpLG1vZHVsZS5leHBvcnRzLmJpbmFyeUZlYXR1cmVzPWU7dmFyIHI9bW9kdWxlLmV4cG9ydHMuQmxvYkJ1aWxkZXI7ZnVuY3Rpb24gdCgpe3RoaXMuX3BpZWNlcz1bXSx0aGlzLl9wYXJ0cz1bXX1cInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93JiYocj1tb2R1bGUuZXhwb3J0cy5CbG9iQnVpbGRlcj13aW5kb3cuV2ViS2l0QmxvYkJ1aWxkZXJ8fHdpbmRvdy5Nb3pCbG9iQnVpbGRlcnx8d2luZG93Lk1TQmxvYkJ1aWxkZXJ8fHdpbmRvdy5CbG9iQnVpbGRlciksdC5wcm90b3R5cGUuYXBwZW5kPWZ1bmN0aW9uKGUpe1wibnVtYmVyXCI9PXR5cGVvZiBlP3RoaXMuX3BpZWNlcy5wdXNoKGUpOih0aGlzLmZsdXNoKCksdGhpcy5fcGFydHMucHVzaChlKSl9LHQucHJvdG90eXBlLmZsdXNoPWZ1bmN0aW9uKCl7aWYodGhpcy5fcGllY2VzLmxlbmd0aD4wKXt2YXIgcj1uZXcgVWludDhBcnJheSh0aGlzLl9waWVjZXMpO2UudXNlQXJyYXlCdWZmZXJWaWV3fHwocj1yLmJ1ZmZlciksdGhpcy5fcGFydHMucHVzaChyKSx0aGlzLl9waWVjZXM9W119fSx0LnByb3RvdHlwZS5nZXRCdWZmZXI9ZnVuY3Rpb24oKXtpZih0aGlzLmZsdXNoKCksZS51c2VCbG9iQnVpbGRlcil7Zm9yKHZhciB0PW5ldyByLGk9MCx1PXRoaXMuX3BhcnRzLmxlbmd0aDtpPHU7aSsrKXQuYXBwZW5kKHRoaXMuX3BhcnRzW2ldKTtyZXR1cm4gdC5nZXRCbG9iKCl9cmV0dXJuIG5ldyBCbG9iKHRoaXMuX3BhcnRzKX0sbW9kdWxlLmV4cG9ydHMuQnVmZmVyQnVpbGRlcj10O1xufSx7fV0sXCJrZFBwXCI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpIHtcbnZhciB0PXJlcXVpcmUoXCIuL2J1ZmZlcmJ1aWxkZXJcIikuQnVmZmVyQnVpbGRlcixlPXJlcXVpcmUoXCIuL2J1ZmZlcmJ1aWxkZXJcIikuYmluYXJ5RmVhdHVyZXMsaT17dW5wYWNrOmZ1bmN0aW9uKHQpe3JldHVybiBuZXcgcih0KS51bnBhY2soKX0scGFjazpmdW5jdGlvbih0KXt2YXIgZT1uZXcgbjtyZXR1cm4gZS5wYWNrKHQpLGUuZ2V0QnVmZmVyKCl9fTtmdW5jdGlvbiByKHQpe3RoaXMuaW5kZXg9MCx0aGlzLmRhdGFCdWZmZXI9dCx0aGlzLmRhdGFWaWV3PW5ldyBVaW50OEFycmF5KHRoaXMuZGF0YUJ1ZmZlciksdGhpcy5sZW5ndGg9dGhpcy5kYXRhQnVmZmVyLmJ5dGVMZW5ndGh9ZnVuY3Rpb24gbigpe3RoaXMuYnVmZmVyQnVpbGRlcj1uZXcgdH1mdW5jdGlvbiB1KHQpe3ZhciBlPXQuY2hhckNvZGVBdCgwKTtyZXR1cm4gZTw9MjA0Nz9cIjAwXCI6ZTw9NjU1MzU/XCIwMDBcIjplPD0yMDk3MTUxP1wiMDAwMFwiOmU8PTY3MTA4ODYzP1wiMDAwMDBcIjpcIjAwMDAwMFwifWZ1bmN0aW9uIGEodCl7cmV0dXJuIHQubGVuZ3RoPjYwMD9uZXcgQmxvYihbdF0pLnNpemU6dC5yZXBsYWNlKC9bXlxcdTAwMDAtXFx1MDA3Rl0vZyx1KS5sZW5ndGh9bW9kdWxlLmV4cG9ydHM9aSxyLnByb3RvdHlwZS51bnBhY2s9ZnVuY3Rpb24oKXt2YXIgdCxlPXRoaXMudW5wYWNrX3VpbnQ4KCk7aWYoZTwxMjgpcmV0dXJuIGU7aWYoKDIyNF5lKTwzMilyZXR1cm4oMjI0XmUpLTMyO2lmKCh0PTE2MF5lKTw9MTUpcmV0dXJuIHRoaXMudW5wYWNrX3Jhdyh0KTtpZigodD0xNzZeZSk8PTE1KXJldHVybiB0aGlzLnVucGFja19zdHJpbmcodCk7aWYoKHQ9MTQ0XmUpPD0xNSlyZXR1cm4gdGhpcy51bnBhY2tfYXJyYXkodCk7aWYoKHQ9MTI4XmUpPD0xNSlyZXR1cm4gdGhpcy51bnBhY2tfbWFwKHQpO3N3aXRjaChlKXtjYXNlIDE5MjpyZXR1cm4gbnVsbDtjYXNlIDE5MzpyZXR1cm47Y2FzZSAxOTQ6cmV0dXJuITE7Y2FzZSAxOTU6cmV0dXJuITA7Y2FzZSAyMDI6cmV0dXJuIHRoaXMudW5wYWNrX2Zsb2F0KCk7Y2FzZSAyMDM6cmV0dXJuIHRoaXMudW5wYWNrX2RvdWJsZSgpO2Nhc2UgMjA0OnJldHVybiB0aGlzLnVucGFja191aW50OCgpO2Nhc2UgMjA1OnJldHVybiB0aGlzLnVucGFja191aW50MTYoKTtjYXNlIDIwNjpyZXR1cm4gdGhpcy51bnBhY2tfdWludDMyKCk7Y2FzZSAyMDc6cmV0dXJuIHRoaXMudW5wYWNrX3VpbnQ2NCgpO2Nhc2UgMjA4OnJldHVybiB0aGlzLnVucGFja19pbnQ4KCk7Y2FzZSAyMDk6cmV0dXJuIHRoaXMudW5wYWNrX2ludDE2KCk7Y2FzZSAyMTA6cmV0dXJuIHRoaXMudW5wYWNrX2ludDMyKCk7Y2FzZSAyMTE6cmV0dXJuIHRoaXMudW5wYWNrX2ludDY0KCk7Y2FzZSAyMTI6Y2FzZSAyMTM6Y2FzZSAyMTQ6Y2FzZSAyMTU6cmV0dXJuO2Nhc2UgMjE2OnJldHVybiB0PXRoaXMudW5wYWNrX3VpbnQxNigpLHRoaXMudW5wYWNrX3N0cmluZyh0KTtjYXNlIDIxNzpyZXR1cm4gdD10aGlzLnVucGFja191aW50MzIoKSx0aGlzLnVucGFja19zdHJpbmcodCk7Y2FzZSAyMTg6cmV0dXJuIHQ9dGhpcy51bnBhY2tfdWludDE2KCksdGhpcy51bnBhY2tfcmF3KHQpO2Nhc2UgMjE5OnJldHVybiB0PXRoaXMudW5wYWNrX3VpbnQzMigpLHRoaXMudW5wYWNrX3Jhdyh0KTtjYXNlIDIyMDpyZXR1cm4gdD10aGlzLnVucGFja191aW50MTYoKSx0aGlzLnVucGFja19hcnJheSh0KTtjYXNlIDIyMTpyZXR1cm4gdD10aGlzLnVucGFja191aW50MzIoKSx0aGlzLnVucGFja19hcnJheSh0KTtjYXNlIDIyMjpyZXR1cm4gdD10aGlzLnVucGFja191aW50MTYoKSx0aGlzLnVucGFja19tYXAodCk7Y2FzZSAyMjM6cmV0dXJuIHQ9dGhpcy51bnBhY2tfdWludDMyKCksdGhpcy51bnBhY2tfbWFwKHQpfX0sci5wcm90b3R5cGUudW5wYWNrX3VpbnQ4PWZ1bmN0aW9uKCl7dmFyIHQ9MjU1JnRoaXMuZGF0YVZpZXdbdGhpcy5pbmRleF07cmV0dXJuIHRoaXMuaW5kZXgrKyx0fSxyLnByb3RvdHlwZS51bnBhY2tfdWludDE2PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5yZWFkKDIpLGU9MjU2KigyNTUmdFswXSkrKDI1NSZ0WzFdKTtyZXR1cm4gdGhpcy5pbmRleCs9MixlfSxyLnByb3RvdHlwZS51bnBhY2tfdWludDMyPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5yZWFkKDQpLGU9MjU2KigyNTYqKDI1Nip0WzBdK3RbMV0pK3RbMl0pK3RbM107cmV0dXJuIHRoaXMuaW5kZXgrPTQsZX0sci5wcm90b3R5cGUudW5wYWNrX3VpbnQ2ND1mdW5jdGlvbigpe3ZhciB0PXRoaXMucmVhZCg4KSxlPTI1NiooMjU2KigyNTYqKDI1NiooMjU2KigyNTYqKDI1Nip0WzBdK3RbMV0pK3RbMl0pK3RbM10pK3RbNF0pK3RbNV0pK3RbNl0pK3RbN107cmV0dXJuIHRoaXMuaW5kZXgrPTgsZX0sci5wcm90b3R5cGUudW5wYWNrX2ludDg9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnVucGFja191aW50OCgpO3JldHVybiB0PDEyOD90OnQtMjU2fSxyLnByb3RvdHlwZS51bnBhY2tfaW50MTY9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnVucGFja191aW50MTYoKTtyZXR1cm4gdDwzMjc2OD90OnQtNjU1MzZ9LHIucHJvdG90eXBlLnVucGFja19pbnQzMj1mdW5jdGlvbigpe3ZhciB0PXRoaXMudW5wYWNrX3VpbnQzMigpO3JldHVybiB0PE1hdGgucG93KDIsMzEpP3Q6dC1NYXRoLnBvdygyLDMyKX0sci5wcm90b3R5cGUudW5wYWNrX2ludDY0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy51bnBhY2tfdWludDY0KCk7cmV0dXJuIHQ8TWF0aC5wb3coMiw2Myk/dDp0LU1hdGgucG93KDIsNjQpfSxyLnByb3RvdHlwZS51bnBhY2tfcmF3PWZ1bmN0aW9uKHQpe2lmKHRoaXMubGVuZ3RoPHRoaXMuaW5kZXgrdCl0aHJvdyBuZXcgRXJyb3IoXCJCaW5hcnlQYWNrRmFpbHVyZTogaW5kZXggaXMgb3V0IG9mIHJhbmdlIFwiK3RoaXMuaW5kZXgrXCIgXCIrdCtcIiBcIit0aGlzLmxlbmd0aCk7dmFyIGU9dGhpcy5kYXRhQnVmZmVyLnNsaWNlKHRoaXMuaW5kZXgsdGhpcy5pbmRleCt0KTtyZXR1cm4gdGhpcy5pbmRleCs9dCxlfSxyLnByb3RvdHlwZS51bnBhY2tfc3RyaW5nPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxpLHI9dGhpcy5yZWFkKHQpLG49MCx1PVwiXCI7bjx0OykoZT1yW25dKTwxMjg/KHUrPVN0cmluZy5mcm9tQ2hhckNvZGUoZSksbisrKTooMTkyXmUpPDMyPyhpPSgxOTJeZSk8PDZ8NjMmcltuKzFdLHUrPVN0cmluZy5mcm9tQ2hhckNvZGUoaSksbis9Mik6KGk9KDE1JmUpPDwxMnwoNjMmcltuKzFdKTw8Nnw2MyZyW24rMl0sdSs9U3RyaW5nLmZyb21DaGFyQ29kZShpKSxuKz0zKTtyZXR1cm4gdGhpcy5pbmRleCs9dCx1fSxyLnByb3RvdHlwZS51bnBhY2tfYXJyYXk9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPW5ldyBBcnJheSh0KSxpPTA7aTx0O2krKyllW2ldPXRoaXMudW5wYWNrKCk7cmV0dXJuIGV9LHIucHJvdG90eXBlLnVucGFja19tYXA9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXt9LGk9MDtpPHQ7aSsrKXt2YXIgcj10aGlzLnVucGFjaygpLG49dGhpcy51bnBhY2soKTtlW3JdPW59cmV0dXJuIGV9LHIucHJvdG90eXBlLnVucGFja19mbG9hdD1mdW5jdGlvbigpe3ZhciB0PXRoaXMudW5wYWNrX3VpbnQzMigpLGU9KHQ+PjIzJjI1NSktMTI3O3JldHVybigwPT09dD4+MzE/MTotMSkqKDgzODg2MDcmdHw4Mzg4NjA4KSpNYXRoLnBvdygyLGUtMjMpfSxyLnByb3RvdHlwZS51bnBhY2tfZG91YmxlPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy51bnBhY2tfdWludDMyKCksZT10aGlzLnVucGFja191aW50MzIoKSxpPSh0Pj4yMCYyMDQ3KS0xMDIzO3JldHVybigwPT09dD4+MzE/MTotMSkqKCgxMDQ4NTc1JnR8MTA0ODU3NikqTWF0aC5wb3coMixpLTIwKStlKk1hdGgucG93KDIsaS01MikpfSxyLnByb3RvdHlwZS5yZWFkPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuaW5kZXg7aWYoZSt0PD10aGlzLmxlbmd0aClyZXR1cm4gdGhpcy5kYXRhVmlldy5zdWJhcnJheShlLGUrdCk7dGhyb3cgbmV3IEVycm9yKFwiQmluYXJ5UGFja0ZhaWx1cmU6IHJlYWQgaW5kZXggb3V0IG9mIHJhbmdlXCIpfSxuLnByb3RvdHlwZS5nZXRCdWZmZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5idWZmZXJCdWlsZGVyLmdldEJ1ZmZlcigpfSxuLnByb3RvdHlwZS5wYWNrPWZ1bmN0aW9uKHQpe3ZhciBpPXR5cGVvZiB0O2lmKFwic3RyaW5nXCI9PT1pKXRoaXMucGFja19zdHJpbmcodCk7ZWxzZSBpZihcIm51bWJlclwiPT09aSlNYXRoLmZsb29yKHQpPT09dD90aGlzLnBhY2tfaW50ZWdlcih0KTp0aGlzLnBhY2tfZG91YmxlKHQpO2Vsc2UgaWYoXCJib29sZWFuXCI9PT1pKSEwPT09dD90aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKDE5NSk6ITE9PT10JiZ0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKDE5NCk7ZWxzZSBpZihcInVuZGVmaW5lZFwiPT09aSl0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKDE5Mik7ZWxzZXtpZihcIm9iamVjdFwiIT09aSl0aHJvdyBuZXcgRXJyb3IoJ1R5cGUgXCInK2krJ1wiIG5vdCB5ZXQgc3VwcG9ydGVkJyk7aWYobnVsbD09PXQpdGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgxOTIpO2Vsc2V7dmFyIHI9dC5jb25zdHJ1Y3RvcjtpZihyPT1BcnJheSl0aGlzLnBhY2tfYXJyYXkodCk7ZWxzZSBpZihyPT1CbG9ifHxyPT1GaWxlfHx0IGluc3RhbmNlb2YgQmxvYnx8dCBpbnN0YW5jZW9mIEZpbGUpdGhpcy5wYWNrX2Jpbih0KTtlbHNlIGlmKHI9PUFycmF5QnVmZmVyKWUudXNlQXJyYXlCdWZmZXJWaWV3P3RoaXMucGFja19iaW4obmV3IFVpbnQ4QXJyYXkodCkpOnRoaXMucGFja19iaW4odCk7ZWxzZSBpZihcIkJZVEVTX1BFUl9FTEVNRU5UXCJpbiB0KWUudXNlQXJyYXlCdWZmZXJWaWV3P3RoaXMucGFja19iaW4obmV3IFVpbnQ4QXJyYXkodC5idWZmZXIpKTp0aGlzLnBhY2tfYmluKHQuYnVmZmVyKTtlbHNlIGlmKHI9PU9iamVjdHx8ci50b1N0cmluZygpLnN0YXJ0c1dpdGgoXCJjbGFzc1wiKSl0aGlzLnBhY2tfb2JqZWN0KHQpO2Vsc2UgaWYocj09RGF0ZSl0aGlzLnBhY2tfc3RyaW5nKHQudG9TdHJpbmcoKSk7ZWxzZXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0LnRvQmluYXJ5UGFjayl0aHJvdyBuZXcgRXJyb3IoJ1R5cGUgXCInK3IudG9TdHJpbmcoKSsnXCIgbm90IHlldCBzdXBwb3J0ZWQnKTt0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKHQudG9CaW5hcnlQYWNrKCkpfX19dGhpcy5idWZmZXJCdWlsZGVyLmZsdXNoKCl9LG4ucHJvdG90eXBlLnBhY2tfYmluPWZ1bmN0aW9uKHQpe3ZhciBlPXQubGVuZ3RofHx0LmJ5dGVMZW5ndGh8fHQuc2l6ZTtpZihlPD0xNSl0aGlzLnBhY2tfdWludDgoMTYwK2UpO2Vsc2UgaWYoZTw9NjU1MzUpdGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgyMTgpLHRoaXMucGFja191aW50MTYoZSk7ZWxzZXtpZighKGU8PTQyOTQ5NjcyOTUpKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgbGVuZ3RoXCIpO3RoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoMjE5KSx0aGlzLnBhY2tfdWludDMyKGUpfXRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQodCl9LG4ucHJvdG90eXBlLnBhY2tfc3RyaW5nPWZ1bmN0aW9uKHQpe3ZhciBlPWEodCk7aWYoZTw9MTUpdGhpcy5wYWNrX3VpbnQ4KDE3NitlKTtlbHNlIGlmKGU8PTY1NTM1KXRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoMjE2KSx0aGlzLnBhY2tfdWludDE2KGUpO2Vsc2V7aWYoIShlPD00Mjk0OTY3Mjk1KSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGxlbmd0aFwiKTt0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKDIxNyksdGhpcy5wYWNrX3VpbnQzMihlKX10aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKHQpfSxuLnByb3RvdHlwZS5wYWNrX2FycmF5PWZ1bmN0aW9uKHQpe3ZhciBlPXQubGVuZ3RoO2lmKGU8PTE1KXRoaXMucGFja191aW50OCgxNDQrZSk7ZWxzZSBpZihlPD02NTUzNSl0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKDIyMCksdGhpcy5wYWNrX3VpbnQxNihlKTtlbHNle2lmKCEoZTw9NDI5NDk2NzI5NSkpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBsZW5ndGhcIik7dGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgyMjEpLHRoaXMucGFja191aW50MzIoZSl9Zm9yKHZhciBpPTA7aTxlO2krKyl0aGlzLnBhY2sodFtpXSl9LG4ucHJvdG90eXBlLnBhY2tfaW50ZWdlcj1mdW5jdGlvbih0KXtpZih0Pj0tMzImJnQ8PTEyNyl0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKDI1NSZ0KTtlbHNlIGlmKHQ+PTAmJnQ8PTI1NSl0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKDIwNCksdGhpcy5wYWNrX3VpbnQ4KHQpO2Vsc2UgaWYodD49LTEyOCYmdDw9MTI3KXRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoMjA4KSx0aGlzLnBhY2tfaW50OCh0KTtlbHNlIGlmKHQ+PTAmJnQ8PTY1NTM1KXRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoMjA1KSx0aGlzLnBhY2tfdWludDE2KHQpO2Vsc2UgaWYodD49LTMyNzY4JiZ0PD0zMjc2Nyl0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKDIwOSksdGhpcy5wYWNrX2ludDE2KHQpO2Vsc2UgaWYodD49MCYmdDw9NDI5NDk2NzI5NSl0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKDIwNiksdGhpcy5wYWNrX3VpbnQzMih0KTtlbHNlIGlmKHQ+PS0yMTQ3NDgzNjQ4JiZ0PD0yMTQ3NDgzNjQ3KXRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoMjEwKSx0aGlzLnBhY2tfaW50MzIodCk7ZWxzZSBpZih0Pj0tMHg4MDAwMDAwMDAwMDAwMDAwJiZ0PD0weDgwMDAwMDAwMDAwMDAwMDApdGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgyMTEpLHRoaXMucGFja19pbnQ2NCh0KTtlbHNle2lmKCEodD49MCYmdDw9MHgxMDAwMDAwMDAwMDAwMDAwMCkpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBpbnRlZ2VyXCIpO3RoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoMjA3KSx0aGlzLnBhY2tfdWludDY0KHQpfX0sbi5wcm90b3R5cGUucGFja19kb3VibGU9ZnVuY3Rpb24odCl7dmFyIGU9MDt0PDAmJihlPTEsdD0tdCk7dmFyIGk9TWF0aC5mbG9vcihNYXRoLmxvZyh0KS9NYXRoLkxOMikscj10L01hdGgucG93KDIsaSktMSxuPU1hdGguZmxvb3IocipNYXRoLnBvdygyLDUyKSksdT1NYXRoLnBvdygyLDMyKSxhPWU8PDMxfGkrMTAyMzw8MjB8bi91JjEwNDg1NzUscD1uJXU7dGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgyMDMpLHRoaXMucGFja19pbnQzMihhKSx0aGlzLnBhY2tfaW50MzIocCl9LG4ucHJvdG90eXBlLnBhY2tfb2JqZWN0PWZ1bmN0aW9uKHQpe3ZhciBlPU9iamVjdC5rZXlzKHQpLmxlbmd0aDtpZihlPD0xNSl0aGlzLnBhY2tfdWludDgoMTI4K2UpO2Vsc2UgaWYoZTw9NjU1MzUpdGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgyMjIpLHRoaXMucGFja191aW50MTYoZSk7ZWxzZXtpZighKGU8PTQyOTQ5NjcyOTUpKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgbGVuZ3RoXCIpO3RoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoMjIzKSx0aGlzLnBhY2tfdWludDMyKGUpfWZvcih2YXIgaSBpbiB0KXQuaGFzT3duUHJvcGVydHkoaSkmJih0aGlzLnBhY2soaSksdGhpcy5wYWNrKHRbaV0pKX0sbi5wcm90b3R5cGUucGFja191aW50OD1mdW5jdGlvbih0KXt0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKHQpfSxuLnByb3RvdHlwZS5wYWNrX3VpbnQxNj1mdW5jdGlvbih0KXt0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKHQ+PjgpLHRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoMjU1JnQpfSxuLnByb3RvdHlwZS5wYWNrX3VpbnQzMj1mdW5jdGlvbih0KXt2YXIgZT00Mjk0OTY3Mjk1JnQ7dGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgoNDI3ODE5MDA4MCZlKT4+PjI0KSx0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKCgxNjcxMTY4MCZlKT4+PjE2KSx0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKCg2NTI4MCZlKT4+PjgpLHRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoMjU1JmUpfSxuLnByb3RvdHlwZS5wYWNrX3VpbnQ2ND1mdW5jdGlvbih0KXt2YXIgZT10L01hdGgucG93KDIsMzIpLGk9dCVNYXRoLnBvdygyLDMyKTt0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKCg0Mjc4MTkwMDgwJmUpPj4+MjQpLHRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoKDE2NzExNjgwJmUpPj4+MTYpLHRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoKDY1MjgwJmUpPj4+OCksdGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgyNTUmZSksdGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgoNDI3ODE5MDA4MCZpKT4+PjI0KSx0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKCgxNjcxMTY4MCZpKT4+PjE2KSx0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKCg2NTI4MCZpKT4+PjgpLHRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoMjU1JmkpfSxuLnByb3RvdHlwZS5wYWNrX2ludDg9ZnVuY3Rpb24odCl7dGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgyNTUmdCl9LG4ucHJvdG90eXBlLnBhY2tfaW50MTY9ZnVuY3Rpb24odCl7dGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgoNjUyODAmdCk+PjgpLHRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoMjU1JnQpfSxuLnByb3RvdHlwZS5wYWNrX2ludDMyPWZ1bmN0aW9uKHQpe3RoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQodD4+PjI0JjI1NSksdGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgoMTY3MTE2ODAmdCk+Pj4xNiksdGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgoNjUyODAmdCk+Pj44KSx0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKDI1NSZ0KX0sbi5wcm90b3R5cGUucGFja19pbnQ2ND1mdW5jdGlvbih0KXt2YXIgZT1NYXRoLmZsb29yKHQvTWF0aC5wb3coMiwzMikpLGk9dCVNYXRoLnBvdygyLDMyKTt0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKCg0Mjc4MTkwMDgwJmUpPj4+MjQpLHRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoKDE2NzExNjgwJmUpPj4+MTYpLHRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoKDY1MjgwJmUpPj4+OCksdGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgyNTUmZSksdGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgoNDI3ODE5MDA4MCZpKT4+PjI0KSx0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKCgxNjcxMTY4MCZpKT4+PjE2KSx0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKCg2NTI4MCZpKT4+PjgpLHRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoMjU1JmkpfTtcbn0se1wiLi9idWZmZXJidWlsZGVyXCI6XCJFZ0JoXCJ9XSxcImlTeENcIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cykge1xuXCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZShlLHQsbil7cmV0dXJuIHQgaW4gZT9PYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0LHt2YWx1ZTpuLGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwfSk6ZVt0XT1uLGV9ZnVuY3Rpb24gdChlKXtyZXR1cm4odD1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlwic3ltYm9sXCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24oZSl7cmV0dXJuIHR5cGVvZiBlfTpmdW5jdGlvbihlKXtyZXR1cm4gZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZlLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZlIT09U3ltYm9sLnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiBlfSkoZSl9T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5leHRyYWN0VmVyc2lvbj1vLGV4cG9ydHMud3JhcFBlZXJDb25uZWN0aW9uRXZlbnQ9aSxleHBvcnRzLmRpc2FibGVMb2c9cyxleHBvcnRzLmRpc2FibGVXYXJuaW5ncz1hLGV4cG9ydHMubG9nPXAsZXhwb3J0cy5kZXByZWNhdGVkPXUsZXhwb3J0cy5kZXRlY3RCcm93c2VyPWMsZXhwb3J0cy5jb21wYWN0T2JqZWN0PWYsZXhwb3J0cy53YWxrU3RhdHM9bCxleHBvcnRzLmZpbHRlclN0YXRzPXY7dmFyIG49ITAscj0hMDtmdW5jdGlvbiBvKGUsdCxuKXt2YXIgcj1lLm1hdGNoKHQpO3JldHVybiByJiZyLmxlbmd0aD49biYmcGFyc2VJbnQocltuXSwxMCl9ZnVuY3Rpb24gaShlLHQsbil7aWYoZS5SVENQZWVyQ29ubmVjdGlvbil7dmFyIHI9ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUsbz1yLmFkZEV2ZW50TGlzdGVuZXI7ci5hZGRFdmVudExpc3RlbmVyPWZ1bmN0aW9uKGUscil7aWYoZSE9PXQpcmV0dXJuIG8uYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciBpPWZ1bmN0aW9uKGUpe3ZhciB0PW4oZSk7dCYmKHIuaGFuZGxlRXZlbnQ/ci5oYW5kbGVFdmVudCh0KTpyKHQpKX07cmV0dXJuIHRoaXMuX2V2ZW50TWFwPXRoaXMuX2V2ZW50TWFwfHx7fSx0aGlzLl9ldmVudE1hcFt0XXx8KHRoaXMuX2V2ZW50TWFwW3RdPW5ldyBNYXApLHRoaXMuX2V2ZW50TWFwW3RdLnNldChyLGkpLG8uYXBwbHkodGhpcyxbZSxpXSl9O3ZhciBpPXIucmVtb3ZlRXZlbnRMaXN0ZW5lcjtyLnJlbW92ZUV2ZW50TGlzdGVuZXI9ZnVuY3Rpb24oZSxuKXtpZihlIT09dHx8IXRoaXMuX2V2ZW50TWFwfHwhdGhpcy5fZXZlbnRNYXBbdF0pcmV0dXJuIGkuYXBwbHkodGhpcyxhcmd1bWVudHMpO2lmKCF0aGlzLl9ldmVudE1hcFt0XS5oYXMobikpcmV0dXJuIGkuYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciByPXRoaXMuX2V2ZW50TWFwW3RdLmdldChuKTtyZXR1cm4gdGhpcy5fZXZlbnRNYXBbdF0uZGVsZXRlKG4pLDA9PT10aGlzLl9ldmVudE1hcFt0XS5zaXplJiZkZWxldGUgdGhpcy5fZXZlbnRNYXBbdF0sMD09PU9iamVjdC5rZXlzKHRoaXMuX2V2ZW50TWFwKS5sZW5ndGgmJmRlbGV0ZSB0aGlzLl9ldmVudE1hcCxpLmFwcGx5KHRoaXMsW2Uscl0pfSxPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIm9uXCIrdCx7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXNbXCJfb25cIit0XX0sc2V0OmZ1bmN0aW9uKGUpe3RoaXNbXCJfb25cIit0XSYmKHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcih0LHRoaXNbXCJfb25cIit0XSksZGVsZXRlIHRoaXNbXCJfb25cIit0XSksZSYmdGhpcy5hZGRFdmVudExpc3RlbmVyKHQsdGhpc1tcIl9vblwiK3RdPWUpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pfX1mdW5jdGlvbiBzKGUpe3JldHVyblwiYm9vbGVhblwiIT10eXBlb2YgZT9uZXcgRXJyb3IoXCJBcmd1bWVudCB0eXBlOiBcIit0KGUpK1wiLiBQbGVhc2UgdXNlIGEgYm9vbGVhbi5cIik6KG49ZSxlP1wiYWRhcHRlci5qcyBsb2dnaW5nIGRpc2FibGVkXCI6XCJhZGFwdGVyLmpzIGxvZ2dpbmcgZW5hYmxlZFwiKX1mdW5jdGlvbiBhKGUpe3JldHVyblwiYm9vbGVhblwiIT10eXBlb2YgZT9uZXcgRXJyb3IoXCJBcmd1bWVudCB0eXBlOiBcIit0KGUpK1wiLiBQbGVhc2UgdXNlIGEgYm9vbGVhbi5cIik6KHI9IWUsXCJhZGFwdGVyLmpzIGRlcHJlY2F0aW9uIHdhcm5pbmdzIFwiKyhlP1wiZGlzYWJsZWRcIjpcImVuYWJsZWRcIikpfWZ1bmN0aW9uIHAoKXtpZihcIm9iamVjdFwiPT09KFwidW5kZWZpbmVkXCI9PXR5cGVvZiB3aW5kb3c/XCJ1bmRlZmluZWRcIjp0KHdpbmRvdykpKXtpZihuKXJldHVybjtcInVuZGVmaW5lZFwiIT10eXBlb2YgY29uc29sZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgY29uc29sZS5sb2cmJmNvbnNvbGUubG9nLmFwcGx5KGNvbnNvbGUsYXJndW1lbnRzKX19ZnVuY3Rpb24gdShlLHQpe3ImJmNvbnNvbGUud2FybihlK1wiIGlzIGRlcHJlY2F0ZWQsIHBsZWFzZSB1c2UgXCIrdCtcIiBpbnN0ZWFkLlwiKX1mdW5jdGlvbiBjKGUpe3ZhciB0PXticm93c2VyOm51bGwsdmVyc2lvbjpudWxsfTtpZih2b2lkIDA9PT1lfHwhZS5uYXZpZ2F0b3IpcmV0dXJuIHQuYnJvd3Nlcj1cIk5vdCBhIGJyb3dzZXIuXCIsdDt2YXJ7bmF2aWdhdG9yOm59PWU7aWYobi5tb3pHZXRVc2VyTWVkaWEpdC5icm93c2VyPVwiZmlyZWZveFwiLHQudmVyc2lvbj1vKG4udXNlckFnZW50LC9GaXJlZm94XFwvKFxcZCspXFwuLywxKTtlbHNlIGlmKG4ud2Via2l0R2V0VXNlck1lZGlhfHwhMT09PWUuaXNTZWN1cmVDb250ZXh0JiZlLndlYmtpdFJUQ1BlZXJDb25uZWN0aW9uJiYhZS5SVENJY2VHYXRoZXJlcil0LmJyb3dzZXI9XCJjaHJvbWVcIix0LnZlcnNpb249byhuLnVzZXJBZ2VudCwvQ2hyb20oZXxpdW0pXFwvKFxcZCspXFwuLywyKTtlbHNlIGlmKG4ubWVkaWFEZXZpY2VzJiZuLnVzZXJBZ2VudC5tYXRjaCgvRWRnZVxcLyhcXGQrKS4oXFxkKykkLykpdC5icm93c2VyPVwiZWRnZVwiLHQudmVyc2lvbj1vKG4udXNlckFnZW50LC9FZGdlXFwvKFxcZCspLihcXGQrKSQvLDIpO2Vsc2V7aWYoIWUuUlRDUGVlckNvbm5lY3Rpb258fCFuLnVzZXJBZ2VudC5tYXRjaCgvQXBwbGVXZWJLaXRcXC8oXFxkKylcXC4vKSlyZXR1cm4gdC5icm93c2VyPVwiTm90IGEgc3VwcG9ydGVkIGJyb3dzZXIuXCIsdDt0LmJyb3dzZXI9XCJzYWZhcmlcIix0LnZlcnNpb249byhuLnVzZXJBZ2VudCwvQXBwbGVXZWJLaXRcXC8oXFxkKylcXC4vLDEpLHQuc3VwcG9ydHNVbmlmaWVkUGxhbj1lLlJUQ1J0cFRyYW5zY2VpdmVyJiZcImN1cnJlbnREaXJlY3Rpb25cImluIGUuUlRDUnRwVHJhbnNjZWl2ZXIucHJvdG90eXBlfXJldHVybiB0fWZ1bmN0aW9uIGQoZSl7cmV0dXJuXCJbb2JqZWN0IE9iamVjdF1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKX1mdW5jdGlvbiBmKHQpe3JldHVybiBkKHQpP09iamVjdC5rZXlzKHQpLnJlZHVjZShmdW5jdGlvbihuLHIpe3ZhciBvPWQodFtyXSksaT1vP2YodFtyXSk6dFtyXSxzPW8mJiFPYmplY3Qua2V5cyhpKS5sZW5ndGg7cmV0dXJuIHZvaWQgMD09PWl8fHM/bjpPYmplY3QuYXNzaWduKG4sZSh7fSxyLGkpKX0se30pOnR9ZnVuY3Rpb24gbChlLHQsbil7dCYmIW4uaGFzKHQuaWQpJiYobi5zZXQodC5pZCx0KSxPYmplY3Qua2V5cyh0KS5mb3JFYWNoKGZ1bmN0aW9uKHIpe3IuZW5kc1dpdGgoXCJJZFwiKT9sKGUsZS5nZXQodFtyXSksbik6ci5lbmRzV2l0aChcIklkc1wiKSYmdFtyXS5mb3JFYWNoKGZ1bmN0aW9uKHQpe2woZSxlLmdldCh0KSxuKX0pfSkpfWZ1bmN0aW9uIHYoZSx0LG4pe3ZhciByPW4/XCJvdXRib3VuZC1ydHBcIjpcImluYm91bmQtcnRwXCIsbz1uZXcgTWFwO2lmKG51bGw9PT10KXJldHVybiBvO3ZhciBpPVtdO3JldHVybiBlLmZvckVhY2goZnVuY3Rpb24oZSl7XCJ0cmFja1wiPT09ZS50eXBlJiZlLnRyYWNrSWRlbnRpZmllcj09PXQuaWQmJmkucHVzaChlKX0pLGkuZm9yRWFjaChmdW5jdGlvbih0KXtlLmZvckVhY2goZnVuY3Rpb24obil7bi50eXBlPT09ciYmbi50cmFja0lkPT09dC5pZCYmbChlLG4sbyl9KX0pLG99XG59LHt9XSxcInM2U05cIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cykge1xuXCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5zaGltR2V0VXNlck1lZGlhPWk7dmFyIGU9dChyZXF1aXJlKFwiLi4vdXRpbHMuanNcIikpO2Z1bmN0aW9uIHIoKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBXZWFrTWFwKXJldHVybiBudWxsO3ZhciBlPW5ldyBXZWFrTWFwO3JldHVybiByPWZ1bmN0aW9uKCl7cmV0dXJuIGV9LGV9ZnVuY3Rpb24gdChlKXtpZihlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7aWYobnVsbD09PWV8fFwib2JqZWN0XCIhPXR5cGVvZiBlJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlKXJldHVybntkZWZhdWx0OmV9O3ZhciB0PXIoKTtpZih0JiZ0LmhhcyhlKSlyZXR1cm4gdC5nZXQoZSk7dmFyIG89e30sbj1PYmplY3QuZGVmaW5lUHJvcGVydHkmJk9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7Zm9yKHZhciBpIGluIGUpaWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsaSkpe3ZhciBhPW4/T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLGkpOm51bGw7YSYmKGEuZ2V0fHxhLnNldCk/T2JqZWN0LmRlZmluZVByb3BlcnR5KG8saSxhKTpvW2ldPWVbaV19cmV0dXJuIG8uZGVmYXVsdD1lLHQmJnQuc2V0KGUsbyksb31mdW5jdGlvbiBvKGUpe3JldHVybihvPVwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmXCJzeW1ib2xcIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbihlKXtyZXR1cm4gdHlwZW9mIGV9OmZ1bmN0aW9uKGUpe3JldHVybiBlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJmUuY29uc3RydWN0b3I9PT1TeW1ib2wmJmUhPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIGV9KShlKX12YXIgbj1lLmxvZztmdW5jdGlvbiBpKGUscil7dmFyIHQ9ZSYmZS5uYXZpZ2F0b3I7aWYodC5tZWRpYURldmljZXMpe3ZhciBpPWZ1bmN0aW9uKGUpe2lmKFwib2JqZWN0XCIhPT1vKGUpfHxlLm1hbmRhdG9yeXx8ZS5vcHRpb25hbClyZXR1cm4gZTt2YXIgcj17fTtyZXR1cm4gT2JqZWN0LmtleXMoZSkuZm9yRWFjaChmdW5jdGlvbih0KXtpZihcInJlcXVpcmVcIiE9PXQmJlwiYWR2YW5jZWRcIiE9PXQmJlwibWVkaWFTb3VyY2VcIiE9PXQpe3ZhciBuPVwib2JqZWN0XCI9PT1vKGVbdF0pP2VbdF06e2lkZWFsOmVbdF19O3ZvaWQgMCE9PW4uZXhhY3QmJlwibnVtYmVyXCI9PXR5cGVvZiBuLmV4YWN0JiYobi5taW49bi5tYXg9bi5leGFjdCk7dmFyIGk9ZnVuY3Rpb24oZSxyKXtyZXR1cm4gZT9lK3IuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrci5zbGljZSgxKTpcImRldmljZUlkXCI9PT1yP1wic291cmNlSWRcIjpyfTtpZih2b2lkIDAhPT1uLmlkZWFsKXtyLm9wdGlvbmFsPXIub3B0aW9uYWx8fFtdO3ZhciBhPXt9O1wibnVtYmVyXCI9PXR5cGVvZiBuLmlkZWFsPyhhW2koXCJtaW5cIix0KV09bi5pZGVhbCxyLm9wdGlvbmFsLnB1c2goYSksKGE9e30pW2koXCJtYXhcIix0KV09bi5pZGVhbCxyLm9wdGlvbmFsLnB1c2goYSkpOihhW2koXCJcIix0KV09bi5pZGVhbCxyLm9wdGlvbmFsLnB1c2goYSkpfXZvaWQgMCE9PW4uZXhhY3QmJlwibnVtYmVyXCIhPXR5cGVvZiBuLmV4YWN0PyhyLm1hbmRhdG9yeT1yLm1hbmRhdG9yeXx8e30sci5tYW5kYXRvcnlbaShcIlwiLHQpXT1uLmV4YWN0KTpbXCJtaW5cIixcIm1heFwiXS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZvaWQgMCE9PW5bZV0mJihyLm1hbmRhdG9yeT1yLm1hbmRhdG9yeXx8e30sci5tYW5kYXRvcnlbaShlLHQpXT1uW2VdKX0pfX0pLGUuYWR2YW5jZWQmJihyLm9wdGlvbmFsPShyLm9wdGlvbmFsfHxbXSkuY29uY2F0KGUuYWR2YW5jZWQpKSxyfSxhPWZ1bmN0aW9uKGUsYSl7aWYoci52ZXJzaW9uPj02MSlyZXR1cm4gYShlKTtpZigoZT1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGUpKSkmJlwib2JqZWN0XCI9PT1vKGUuYXVkaW8pKXt2YXIgYz1mdW5jdGlvbihlLHIsdCl7ciBpbiBlJiYhKHQgaW4gZSkmJihlW3RdPWVbcl0sZGVsZXRlIGVbcl0pfTtjKChlPUpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZSkpKS5hdWRpbyxcImF1dG9HYWluQ29udHJvbFwiLFwiZ29vZ0F1dG9HYWluQ29udHJvbFwiKSxjKGUuYXVkaW8sXCJub2lzZVN1cHByZXNzaW9uXCIsXCJnb29nTm9pc2VTdXBwcmVzc2lvblwiKSxlLmF1ZGlvPWkoZS5hdWRpbyl9aWYoZSYmXCJvYmplY3RcIj09PW8oZS52aWRlbykpe3ZhciBkPWUudmlkZW8uZmFjaW5nTW9kZTtkPWQmJihcIm9iamVjdFwiPT09byhkKT9kOntpZGVhbDpkfSk7dmFyIHUscz1yLnZlcnNpb248NjY7aWYoZCYmKFwidXNlclwiPT09ZC5leGFjdHx8XCJlbnZpcm9ubWVudFwiPT09ZC5leGFjdHx8XCJ1c2VyXCI9PT1kLmlkZWFsfHxcImVudmlyb25tZW50XCI9PT1kLmlkZWFsKSYmKCF0Lm1lZGlhRGV2aWNlcy5nZXRTdXBwb3J0ZWRDb25zdHJhaW50c3x8IXQubWVkaWFEZXZpY2VzLmdldFN1cHBvcnRlZENvbnN0cmFpbnRzKCkuZmFjaW5nTW9kZXx8cykpaWYoZGVsZXRlIGUudmlkZW8uZmFjaW5nTW9kZSxcImVudmlyb25tZW50XCI9PT1kLmV4YWN0fHxcImVudmlyb25tZW50XCI9PT1kLmlkZWFsP3U9W1wiYmFja1wiLFwicmVhclwiXTpcInVzZXJcIiE9PWQuZXhhY3QmJlwidXNlclwiIT09ZC5pZGVhbHx8KHU9W1wiZnJvbnRcIl0pLHUpcmV0dXJuIHQubWVkaWFEZXZpY2VzLmVudW1lcmF0ZURldmljZXMoKS50aGVuKGZ1bmN0aW9uKHIpe3ZhciB0PShyPXIuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVyblwidmlkZW9pbnB1dFwiPT09ZS5raW5kfSkpLmZpbmQoZnVuY3Rpb24oZSl7cmV0dXJuIHUuc29tZShmdW5jdGlvbihyKXtyZXR1cm4gZS5sYWJlbC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHIpfSl9KTtyZXR1cm4hdCYmci5sZW5ndGgmJnUuaW5jbHVkZXMoXCJiYWNrXCIpJiYodD1yW3IubGVuZ3RoLTFdKSx0JiYoZS52aWRlby5kZXZpY2VJZD1kLmV4YWN0P3tleGFjdDp0LmRldmljZUlkfTp7aWRlYWw6dC5kZXZpY2VJZH0pLGUudmlkZW89aShlLnZpZGVvKSxuKFwiY2hyb21lOiBcIitKU09OLnN0cmluZ2lmeShlKSksYShlKX0pO2UudmlkZW89aShlLnZpZGVvKX1yZXR1cm4gbihcImNocm9tZTogXCIrSlNPTi5zdHJpbmdpZnkoZSkpLGEoZSl9LGM9ZnVuY3Rpb24oZSl7cmV0dXJuIHIudmVyc2lvbj49NjQ/ZTp7bmFtZTp7UGVybWlzc2lvbkRlbmllZEVycm9yOlwiTm90QWxsb3dlZEVycm9yXCIsUGVybWlzc2lvbkRpc21pc3NlZEVycm9yOlwiTm90QWxsb3dlZEVycm9yXCIsSW52YWxpZFN0YXRlRXJyb3I6XCJOb3RBbGxvd2VkRXJyb3JcIixEZXZpY2VzTm90Rm91bmRFcnJvcjpcIk5vdEZvdW5kRXJyb3JcIixDb25zdHJhaW50Tm90U2F0aXNmaWVkRXJyb3I6XCJPdmVyY29uc3RyYWluZWRFcnJvclwiLFRyYWNrU3RhcnRFcnJvcjpcIk5vdFJlYWRhYmxlRXJyb3JcIixNZWRpYURldmljZUZhaWxlZER1ZVRvU2h1dGRvd246XCJOb3RBbGxvd2VkRXJyb3JcIixNZWRpYURldmljZUtpbGxTd2l0Y2hPbjpcIk5vdEFsbG93ZWRFcnJvclwiLFRhYkNhcHR1cmVFcnJvcjpcIkFib3J0RXJyb3JcIixTY3JlZW5DYXB0dXJlRXJyb3I6XCJBYm9ydEVycm9yXCIsRGV2aWNlQ2FwdHVyZUVycm9yOlwiQWJvcnRFcnJvclwifVtlLm5hbWVdfHxlLm5hbWUsbWVzc2FnZTplLm1lc3NhZ2UsY29uc3RyYWludDplLmNvbnN0cmFpbnR8fGUuY29uc3RyYWludE5hbWUsdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5uYW1lKyh0aGlzLm1lc3NhZ2UmJlwiOiBcIikrdGhpcy5tZXNzYWdlfX19O2lmKHQuZ2V0VXNlck1lZGlhPWZ1bmN0aW9uKGUscixvKXthKGUsZnVuY3Rpb24oZSl7dC53ZWJraXRHZXRVc2VyTWVkaWEoZSxyLGZ1bmN0aW9uKGUpe28mJm8oYyhlKSl9KX0pfS5iaW5kKHQpLHQubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSl7dmFyIGQ9dC5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhLmJpbmQodC5tZWRpYURldmljZXMpO3QubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYT1mdW5jdGlvbihlKXtyZXR1cm4gYShlLGZ1bmN0aW9uKGUpe3JldHVybiBkKGUpLnRoZW4oZnVuY3Rpb24ocil7aWYoZS5hdWRpbyYmIXIuZ2V0QXVkaW9UcmFja3MoKS5sZW5ndGh8fGUudmlkZW8mJiFyLmdldFZpZGVvVHJhY2tzKCkubGVuZ3RoKXRocm93IHIuZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbihlKXtlLnN0b3AoKX0pLG5ldyBET01FeGNlcHRpb24oXCJcIixcIk5vdEZvdW5kRXJyb3JcIik7cmV0dXJuIHJ9LGZ1bmN0aW9uKGUpe3JldHVybiBQcm9taXNlLnJlamVjdChjKGUpKX0pfSl9fX19XG59LHtcIi4uL3V0aWxzLmpzXCI6XCJpU3hDXCJ9XSxcIlZIYThcIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cykge1xuXCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZShlLGkpe2UubmF2aWdhdG9yLm1lZGlhRGV2aWNlcyYmXCJnZXREaXNwbGF5TWVkaWFcImluIGUubmF2aWdhdG9yLm1lZGlhRGV2aWNlc3x8ZS5uYXZpZ2F0b3IubWVkaWFEZXZpY2VzJiYoXCJmdW5jdGlvblwiPT10eXBlb2YgaT9lLm5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0RGlzcGxheU1lZGlhPWZ1bmN0aW9uKGEpe3JldHVybiBpKGEpLnRoZW4oZnVuY3Rpb24oaSl7dmFyIHQ9YS52aWRlbyYmYS52aWRlby53aWR0aCxvPWEudmlkZW8mJmEudmlkZW8uaGVpZ2h0LGQ9YS52aWRlbyYmYS52aWRlby5mcmFtZVJhdGU7cmV0dXJuIGEudmlkZW89e21hbmRhdG9yeTp7Y2hyb21lTWVkaWFTb3VyY2U6XCJkZXNrdG9wXCIsY2hyb21lTWVkaWFTb3VyY2VJZDppLG1heEZyYW1lUmF0ZTpkfHwzfX0sdCYmKGEudmlkZW8ubWFuZGF0b3J5Lm1heFdpZHRoPXQpLG8mJihhLnZpZGVvLm1hbmRhdG9yeS5tYXhIZWlnaHQ9byksZS5uYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYShhKX0pfTpjb25zb2xlLmVycm9yKFwic2hpbUdldERpc3BsYXlNZWRpYTogZ2V0U291cmNlSWQgYXJndW1lbnQgaXMgbm90IGEgZnVuY3Rpb25cIikpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGV4cG9ydHMuc2hpbUdldERpc3BsYXlNZWRpYT1lO1xufSx7fV0sXCJ1STVYXCI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpIHtcblwidXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGV4cG9ydHMuc2hpbU1lZGlhU3RyZWFtPWEsZXhwb3J0cy5zaGltT25UcmFjaz1jLGV4cG9ydHMuc2hpbUdldFNlbmRlcnNXaXRoRHRtZj1wLGV4cG9ydHMuc2hpbUdldFN0YXRzPWQsZXhwb3J0cy5zaGltU2VuZGVyUmVjZWl2ZXJHZXRTdGF0cz1oLGV4cG9ydHMuc2hpbUFkZFRyYWNrUmVtb3ZlVHJhY2tXaXRoTmF0aXZlPWYsZXhwb3J0cy5zaGltQWRkVHJhY2tSZW1vdmVUcmFjaz1tLGV4cG9ydHMuc2hpbVBlZXJDb25uZWN0aW9uPXUsZXhwb3J0cy5maXhOZWdvdGlhdGlvbk5lZWRlZD1sLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwic2hpbUdldFVzZXJNZWRpYVwiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiB0LnNoaW1HZXRVc2VyTWVkaWF9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJzaGltR2V0RGlzcGxheU1lZGlhXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHIuc2hpbUdldERpc3BsYXlNZWRpYX19KTt2YXIgZT1pKHJlcXVpcmUoXCIuLi91dGlscy5qc1wiKSksdD1yZXF1aXJlKFwiLi9nZXR1c2VybWVkaWFcIikscj1yZXF1aXJlKFwiLi9nZXRkaXNwbGF5bWVkaWFcIik7ZnVuY3Rpb24gbigpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIFdlYWtNYXApcmV0dXJuIG51bGw7dmFyIGU9bmV3IFdlYWtNYXA7cmV0dXJuIG49ZnVuY3Rpb24oKXtyZXR1cm4gZX0sZX1mdW5jdGlvbiBpKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTtpZihudWxsPT09ZXx8XCJvYmplY3RcIiE9dHlwZW9mIGUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGUpcmV0dXJue2RlZmF1bHQ6ZX07dmFyIHQ9bigpO2lmKHQmJnQuaGFzKGUpKXJldHVybiB0LmdldChlKTt2YXIgcj17fSxpPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSYmT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjtmb3IodmFyIG8gaW4gZSlpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxvKSl7dmFyIHM9aT9PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsbyk6bnVsbDtzJiYocy5nZXR8fHMuc2V0KT9PYmplY3QuZGVmaW5lUHJvcGVydHkocixvLHMpOnJbb109ZVtvXX1yZXR1cm4gci5kZWZhdWx0PWUsdCYmdC5zZXQoZSxyKSxyfWZ1bmN0aW9uIG8oZSx0LHIpe3JldHVybiB0IGluIGU/T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCx7dmFsdWU6cixlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMH0pOmVbdF09cixlfWZ1bmN0aW9uIHMoZSl7cmV0dXJuKHM9XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZcInN5bWJvbFwiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKGUpe3JldHVybiB0eXBlb2YgZX06ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmZS5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmZSE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2YgZX0pKGUpfWZ1bmN0aW9uIGEoZSl7ZS5NZWRpYVN0cmVhbT1lLk1lZGlhU3RyZWFtfHxlLndlYmtpdE1lZGlhU3RyZWFtfWZ1bmN0aW9uIGModCl7aWYoXCJvYmplY3RcIiE9PXModCl8fCF0LlJUQ1BlZXJDb25uZWN0aW9ufHxcIm9udHJhY2tcImluIHQuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlKWUud3JhcFBlZXJDb25uZWN0aW9uRXZlbnQodCxcInRyYWNrXCIsZnVuY3Rpb24oZSl7cmV0dXJuIGUudHJhbnNjZWl2ZXJ8fE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwidHJhbnNjZWl2ZXJcIix7dmFsdWU6e3JlY2VpdmVyOmUucmVjZWl2ZXJ9fSksZX0pO2Vsc2V7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLFwib250cmFja1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb250cmFja30sc2V0OmZ1bmN0aW9uKGUpe3RoaXMuX29udHJhY2smJnRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRyYWNrXCIsdGhpcy5fb250cmFjayksdGhpcy5hZGRFdmVudExpc3RlbmVyKFwidHJhY2tcIix0aGlzLl9vbnRyYWNrPWUpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pO3ZhciByPXQuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnNldFJlbW90ZURlc2NyaXB0aW9uO3QuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnNldFJlbW90ZURlc2NyaXB0aW9uPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gdGhpcy5fb250cmFja3BvbHl8fCh0aGlzLl9vbnRyYWNrcG9seT1mdW5jdGlvbihyKXtyLnN0cmVhbS5hZGRFdmVudExpc3RlbmVyKFwiYWRkdHJhY2tcIixmdW5jdGlvbihuKXt2YXIgaTtpPXQuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFJlY2VpdmVycz9lLmdldFJlY2VpdmVycygpLmZpbmQoZnVuY3Rpb24oZSl7cmV0dXJuIGUudHJhY2smJmUudHJhY2suaWQ9PT1uLnRyYWNrLmlkfSk6e3RyYWNrOm4udHJhY2t9O3ZhciBvPW5ldyBFdmVudChcInRyYWNrXCIpO28udHJhY2s9bi50cmFjayxvLnJlY2VpdmVyPWksby50cmFuc2NlaXZlcj17cmVjZWl2ZXI6aX0sby5zdHJlYW1zPVtyLnN0cmVhbV0sZS5kaXNwYXRjaEV2ZW50KG8pfSksci5zdHJlYW0uZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbihuKXt2YXIgaTtpPXQuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFJlY2VpdmVycz9lLmdldFJlY2VpdmVycygpLmZpbmQoZnVuY3Rpb24oZSl7cmV0dXJuIGUudHJhY2smJmUudHJhY2suaWQ9PT1uLmlkfSk6e3RyYWNrOm59O3ZhciBvPW5ldyBFdmVudChcInRyYWNrXCIpO28udHJhY2s9bixvLnJlY2VpdmVyPWksby50cmFuc2NlaXZlcj17cmVjZWl2ZXI6aX0sby5zdHJlYW1zPVtyLnN0cmVhbV0sZS5kaXNwYXRjaEV2ZW50KG8pfSl9LHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcImFkZHN0cmVhbVwiLHRoaXMuX29udHJhY2twb2x5KSksci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fX1mdW5jdGlvbiBwKGUpe2lmKFwib2JqZWN0XCI9PT1zKGUpJiZlLlJUQ1BlZXJDb25uZWN0aW9uJiYhKFwiZ2V0U2VuZGVyc1wiaW4gZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUpJiZcImNyZWF0ZURUTUZTZW5kZXJcImluIGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlKXt2YXIgdD1mdW5jdGlvbihlLHQpe3JldHVybnt0cmFjazp0LGdldCBkdG1mKCl7cmV0dXJuIHZvaWQgMD09PXRoaXMuX2R0bWYmJihcImF1ZGlvXCI9PT10LmtpbmQ/dGhpcy5fZHRtZj1lLmNyZWF0ZURUTUZTZW5kZXIodCk6dGhpcy5fZHRtZj1udWxsKSx0aGlzLl9kdG1mfSxfcGM6ZX19O2lmKCFlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTZW5kZXJzKXtlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTZW5kZXJzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NlbmRlcnM9dGhpcy5fc2VuZGVyc3x8W10sdGhpcy5fc2VuZGVycy5zbGljZSgpfTt2YXIgcj1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRUcmFjaztlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRUcmFjaz1mdW5jdGlvbihlLG4pe3ZhciBpPXIuYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybiBpfHwoaT10KHRoaXMsZSksdGhpcy5fc2VuZGVycy5wdXNoKGkpKSxpfTt2YXIgbj1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVUcmFjaztlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVUcmFjaz1mdW5jdGlvbihlKXtuLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgdD10aGlzLl9zZW5kZXJzLmluZGV4T2YoZSk7LTEhPT10JiZ0aGlzLl9zZW5kZXJzLnNwbGljZSh0LDEpfX12YXIgaT1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRTdHJlYW07ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkU3RyZWFtPWZ1bmN0aW9uKGUpe3ZhciByPXRoaXM7dGhpcy5fc2VuZGVycz10aGlzLl9zZW5kZXJzfHxbXSxpLmFwcGx5KHRoaXMsW2VdKSxlLmdldFRyYWNrcygpLmZvckVhY2goZnVuY3Rpb24oZSl7ci5fc2VuZGVycy5wdXNoKHQocixlKSl9KX07dmFyIG89ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlU3RyZWFtO2UuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnJlbW92ZVN0cmVhbT1mdW5jdGlvbihlKXt2YXIgdD10aGlzO3RoaXMuX3NlbmRlcnM9dGhpcy5fc2VuZGVyc3x8W10sby5hcHBseSh0aGlzLFtlXSksZS5nZXRUcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciByPXQuX3NlbmRlcnMuZmluZChmdW5jdGlvbih0KXtyZXR1cm4gdC50cmFjaz09PWV9KTtyJiZ0Ll9zZW5kZXJzLnNwbGljZSh0Ll9zZW5kZXJzLmluZGV4T2YociksMSl9KX19ZWxzZSBpZihcIm9iamVjdFwiPT09cyhlKSYmZS5SVENQZWVyQ29ubmVjdGlvbiYmXCJnZXRTZW5kZXJzXCJpbiBlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSYmXCJjcmVhdGVEVE1GU2VuZGVyXCJpbiBlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSYmZS5SVENSdHBTZW5kZXImJiEoXCJkdG1mXCJpbiBlLlJUQ1J0cFNlbmRlci5wcm90b3R5cGUpKXt2YXIgYT1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTZW5kZXJzO2UuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFNlbmRlcnM9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9YS5hcHBseSh0aGlzLFtdKTtyZXR1cm4gdC5mb3JFYWNoKGZ1bmN0aW9uKHQpe3JldHVybiB0Ll9wYz1lfSksdH0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGUuUlRDUnRwU2VuZGVyLnByb3RvdHlwZSxcImR0bWZcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHZvaWQgMD09PXRoaXMuX2R0bWYmJihcImF1ZGlvXCI9PT10aGlzLnRyYWNrLmtpbmQ/dGhpcy5fZHRtZj10aGlzLl9wYy5jcmVhdGVEVE1GU2VuZGVyKHRoaXMudHJhY2spOnRoaXMuX2R0bWY9bnVsbCksdGhpcy5fZHRtZn19KX19ZnVuY3Rpb24gZChlKXtpZihlLlJUQ1BlZXJDb25uZWN0aW9uKXt2YXIgdD1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTdGF0cztlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTdGF0cz1mdW5jdGlvbigpe3ZhciBlPXRoaXMsW3IsbixpXT1hcmd1bWVudHM7aWYoYXJndW1lbnRzLmxlbmd0aD4wJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiByKXJldHVybiB0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpZigwPT09dC5sZW5ndGgmJigwPT09YXJndW1lbnRzLmxlbmd0aHx8XCJmdW5jdGlvblwiIT10eXBlb2YgcikpcmV0dXJuIHQuYXBwbHkodGhpcyxbXSk7dmFyIG89ZnVuY3Rpb24oZSl7dmFyIHQ9e307cmV0dXJuIGUucmVzdWx0KCkuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgcj17aWQ6ZS5pZCx0aW1lc3RhbXA6ZS50aW1lc3RhbXAsdHlwZTp7bG9jYWxjYW5kaWRhdGU6XCJsb2NhbC1jYW5kaWRhdGVcIixyZW1vdGVjYW5kaWRhdGU6XCJyZW1vdGUtY2FuZGlkYXRlXCJ9W2UudHlwZV18fGUudHlwZX07ZS5uYW1lcygpLmZvckVhY2goZnVuY3Rpb24odCl7clt0XT1lLnN0YXQodCl9KSx0W3IuaWRdPXJ9KSx0fSxzPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgTWFwKE9iamVjdC5rZXlzKGUpLm1hcChmdW5jdGlvbih0KXtyZXR1cm5bdCxlW3RdXX0pKX07aWYoYXJndW1lbnRzLmxlbmd0aD49Mil7cmV0dXJuIHQuYXBwbHkodGhpcyxbZnVuY3Rpb24oZSl7bihzKG8oZSkpKX0scl0pfXJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyLG4pe3QuYXBwbHkoZSxbZnVuY3Rpb24oZSl7cihzKG8oZSkpKX0sbl0pfSkudGhlbihuLGkpfX19ZnVuY3Rpb24gaCh0KXtpZihcIm9iamVjdFwiPT09cyh0KSYmdC5SVENQZWVyQ29ubmVjdGlvbiYmdC5SVENSdHBTZW5kZXImJnQuUlRDUnRwUmVjZWl2ZXIpe2lmKCEoXCJnZXRTdGF0c1wiaW4gdC5SVENSdHBTZW5kZXIucHJvdG90eXBlKSl7dmFyIHI9dC5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U2VuZGVycztyJiYodC5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U2VuZGVycz1mdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1yLmFwcGx5KHRoaXMsW10pO3JldHVybiB0LmZvckVhY2goZnVuY3Rpb24odCl7cmV0dXJuIHQuX3BjPWV9KSx0fSk7dmFyIG49dC5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhY2s7biYmKHQuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYWNrPWZ1bmN0aW9uKCl7dmFyIGU9bi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIGUuX3BjPXRoaXMsZX0pLHQuUlRDUnRwU2VuZGVyLnByb3RvdHlwZS5nZXRTdGF0cz1mdW5jdGlvbigpe3ZhciB0PXRoaXM7cmV0dXJuIHRoaXMuX3BjLmdldFN0YXRzKCkudGhlbihmdW5jdGlvbihyKXtyZXR1cm4gZS5maWx0ZXJTdGF0cyhyLHQudHJhY2ssITApfSl9fWlmKCEoXCJnZXRTdGF0c1wiaW4gdC5SVENSdHBSZWNlaXZlci5wcm90b3R5cGUpKXt2YXIgaT10LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRSZWNlaXZlcnM7aSYmKHQuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFJlY2VpdmVycz1mdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1pLmFwcGx5KHRoaXMsW10pO3JldHVybiB0LmZvckVhY2goZnVuY3Rpb24odCl7cmV0dXJuIHQuX3BjPWV9KSx0fSksZS53cmFwUGVlckNvbm5lY3Rpb25FdmVudCh0LFwidHJhY2tcIixmdW5jdGlvbihlKXtyZXR1cm4gZS5yZWNlaXZlci5fcGM9ZS5zcmNFbGVtZW50LGV9KSx0LlJUQ1J0cFJlY2VpdmVyLnByb3RvdHlwZS5nZXRTdGF0cz1mdW5jdGlvbigpe3ZhciB0PXRoaXM7cmV0dXJuIHRoaXMuX3BjLmdldFN0YXRzKCkudGhlbihmdW5jdGlvbihyKXtyZXR1cm4gZS5maWx0ZXJTdGF0cyhyLHQudHJhY2ssITEpfSl9fWlmKFwiZ2V0U3RhdHNcImluIHQuUlRDUnRwU2VuZGVyLnByb3RvdHlwZSYmXCJnZXRTdGF0c1wiaW4gdC5SVENSdHBSZWNlaXZlci5wcm90b3R5cGUpe3ZhciBvPXQuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFN0YXRzO3QuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFN0YXRzPWZ1bmN0aW9uKCl7aWYoYXJndW1lbnRzLmxlbmd0aD4wJiZhcmd1bWVudHNbMF1pbnN0YW5jZW9mIHQuTWVkaWFTdHJlYW1UcmFjayl7dmFyIGUscixuLGk9YXJndW1lbnRzWzBdO3JldHVybiB0aGlzLmdldFNlbmRlcnMoKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3QudHJhY2s9PT1pJiYoZT9uPSEwOmU9dCl9KSx0aGlzLmdldFJlY2VpdmVycygpLmZvckVhY2goZnVuY3Rpb24oZSl7cmV0dXJuIGUudHJhY2s9PT1pJiYocj9uPSEwOnI9ZSksZS50cmFjaz09PWl9KSxufHxlJiZyP1Byb21pc2UucmVqZWN0KG5ldyBET01FeGNlcHRpb24oXCJUaGVyZSBhcmUgbW9yZSB0aGFuIG9uZSBzZW5kZXIgb3IgcmVjZWl2ZXIgZm9yIHRoZSB0cmFjay5cIixcIkludmFsaWRBY2Nlc3NFcnJvclwiKSk6ZT9lLmdldFN0YXRzKCk6cj9yLmdldFN0YXRzKCk6UHJvbWlzZS5yZWplY3QobmV3IERPTUV4Y2VwdGlvbihcIlRoZXJlIGlzIG5vIHNlbmRlciBvciByZWNlaXZlciBmb3IgdGhlIHRyYWNrLlwiLFwiSW52YWxpZEFjY2Vzc0Vycm9yXCIpKX1yZXR1cm4gby5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fX19ZnVuY3Rpb24gZihlKXtlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRMb2NhbFN0cmVhbXM9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiB0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zPXRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXN8fHt9LE9iamVjdC5rZXlzKHRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXMpLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gZS5fc2hpbW1lZExvY2FsU3RyZWFtc1t0XVswXX0pfTt2YXIgdD1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRUcmFjaztlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRUcmFjaz1mdW5jdGlvbihlLHIpe2lmKCFyKXJldHVybiB0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zPXRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXN8fHt9O3ZhciBuPXQuYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybiB0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zW3IuaWRdPy0xPT09dGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtc1tyLmlkXS5pbmRleE9mKG4pJiZ0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zW3IuaWRdLnB1c2gobik6dGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtc1tyLmlkXT1bcixuXSxufTt2YXIgcj1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRTdHJlYW07ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkU3RyZWFtPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtcz10aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zfHx7fSxlLmdldFRyYWNrcygpLmZvckVhY2goZnVuY3Rpb24oZSl7aWYodC5nZXRTZW5kZXJzKCkuZmluZChmdW5jdGlvbih0KXtyZXR1cm4gdC50cmFjaz09PWV9KSl0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKFwiVHJhY2sgYWxyZWFkeSBleGlzdHMuXCIsXCJJbnZhbGlkQWNjZXNzRXJyb3JcIil9KTt2YXIgbj10aGlzLmdldFNlbmRlcnMoKTtyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgaT10aGlzLmdldFNlbmRlcnMoKS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuLTE9PT1uLmluZGV4T2YoZSl9KTt0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zW2UuaWRdPVtlXS5jb25jYXQoaSl9O3ZhciBuPWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnJlbW92ZVN0cmVhbTtlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVTdHJlYW09ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXM9dGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtc3x8e30sZGVsZXRlIHRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXNbZS5pZF0sbi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O3ZhciBpPWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnJlbW92ZVRyYWNrO2UuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnJlbW92ZVRyYWNrPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIHRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXM9dGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtc3x8e30sZSYmT2JqZWN0LmtleXModGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtcykuZm9yRWFjaChmdW5jdGlvbihyKXt2YXIgbj10Ll9zaGltbWVkTG9jYWxTdHJlYW1zW3JdLmluZGV4T2YoZSk7LTEhPT1uJiZ0Ll9zaGltbWVkTG9jYWxTdHJlYW1zW3JdLnNwbGljZShuLDEpLDE9PT10Ll9zaGltbWVkTG9jYWxTdHJlYW1zW3JdLmxlbmd0aCYmZGVsZXRlIHQuX3NoaW1tZWRMb2NhbFN0cmVhbXNbcl19KSxpLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19ZnVuY3Rpb24gbShlLHQpe2lmKGUuUlRDUGVlckNvbm5lY3Rpb24pe2lmKGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYWNrJiZ0LnZlcnNpb24+PTY1KXJldHVybiBmKGUpO3ZhciByPWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldExvY2FsU3RyZWFtcztlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRMb2NhbFN0cmVhbXM9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ci5hcHBseSh0aGlzKTtyZXR1cm4gdGhpcy5fcmV2ZXJzZVN0cmVhbXM9dGhpcy5fcmV2ZXJzZVN0cmVhbXN8fHt9LHQubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBlLl9yZXZlcnNlU3RyZWFtc1t0LmlkXX0pfTt2YXIgbj1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRTdHJlYW07ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkU3RyZWFtPWZ1bmN0aW9uKHQpe3ZhciByPXRoaXM7aWYodGhpcy5fc3RyZWFtcz10aGlzLl9zdHJlYW1zfHx7fSx0aGlzLl9yZXZlcnNlU3RyZWFtcz10aGlzLl9yZXZlcnNlU3RyZWFtc3x8e30sdC5nZXRUcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2lmKHIuZ2V0U2VuZGVycygpLmZpbmQoZnVuY3Rpb24odCl7cmV0dXJuIHQudHJhY2s9PT1lfSkpdGhyb3cgbmV3IERPTUV4Y2VwdGlvbihcIlRyYWNrIGFscmVhZHkgZXhpc3RzLlwiLFwiSW52YWxpZEFjY2Vzc0Vycm9yXCIpfSksIXRoaXMuX3JldmVyc2VTdHJlYW1zW3QuaWRdKXt2YXIgaT1uZXcgZS5NZWRpYVN0cmVhbSh0LmdldFRyYWNrcygpKTt0aGlzLl9zdHJlYW1zW3QuaWRdPWksdGhpcy5fcmV2ZXJzZVN0cmVhbXNbaS5pZF09dCx0PWl9bi5hcHBseSh0aGlzLFt0XSl9O3ZhciBpPWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnJlbW92ZVN0cmVhbTtlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVTdHJlYW09ZnVuY3Rpb24oZSl7dGhpcy5fc3RyZWFtcz10aGlzLl9zdHJlYW1zfHx7fSx0aGlzLl9yZXZlcnNlU3RyZWFtcz10aGlzLl9yZXZlcnNlU3RyZWFtc3x8e30saS5hcHBseSh0aGlzLFt0aGlzLl9zdHJlYW1zW2UuaWRdfHxlXSksZGVsZXRlIHRoaXMuX3JldmVyc2VTdHJlYW1zW3RoaXMuX3N0cmVhbXNbZS5pZF0/dGhpcy5fc3RyZWFtc1tlLmlkXS5pZDplLmlkXSxkZWxldGUgdGhpcy5fc3RyZWFtc1tlLmlkXX0sZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhY2s9ZnVuY3Rpb24odCxyKXt2YXIgbj10aGlzO2lmKFwiY2xvc2VkXCI9PT10aGlzLnNpZ25hbGluZ1N0YXRlKXRocm93IG5ldyBET01FeGNlcHRpb24oXCJUaGUgUlRDUGVlckNvbm5lY3Rpb24ncyBzaWduYWxpbmdTdGF0ZSBpcyAnY2xvc2VkJy5cIixcIkludmFsaWRTdGF0ZUVycm9yXCIpO3ZhciBpPVtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO2lmKDEhPT1pLmxlbmd0aHx8IWlbMF0uZ2V0VHJhY2tzKCkuZmluZChmdW5jdGlvbihlKXtyZXR1cm4gZT09PXR9KSl0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKFwiVGhlIGFkYXB0ZXIuanMgYWRkVHJhY2sgcG9seWZpbGwgb25seSBzdXBwb3J0cyBhIHNpbmdsZSAgc3RyZWFtIHdoaWNoIGlzIGFzc29jaWF0ZWQgd2l0aCB0aGUgc3BlY2lmaWVkIHRyYWNrLlwiLFwiTm90U3VwcG9ydGVkRXJyb3JcIik7aWYodGhpcy5nZXRTZW5kZXJzKCkuZmluZChmdW5jdGlvbihlKXtyZXR1cm4gZS50cmFjaz09PXR9KSl0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKFwiVHJhY2sgYWxyZWFkeSBleGlzdHMuXCIsXCJJbnZhbGlkQWNjZXNzRXJyb3JcIik7dGhpcy5fc3RyZWFtcz10aGlzLl9zdHJlYW1zfHx7fSx0aGlzLl9yZXZlcnNlU3RyZWFtcz10aGlzLl9yZXZlcnNlU3RyZWFtc3x8e307dmFyIG89dGhpcy5fc3RyZWFtc1tyLmlkXTtpZihvKW8uYWRkVHJhY2sodCksUHJvbWlzZS5yZXNvbHZlKCkudGhlbihmdW5jdGlvbigpe24uZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJuZWdvdGlhdGlvbm5lZWRlZFwiKSl9KTtlbHNle3ZhciBzPW5ldyBlLk1lZGlhU3RyZWFtKFt0XSk7dGhpcy5fc3RyZWFtc1tyLmlkXT1zLHRoaXMuX3JldmVyc2VTdHJlYW1zW3MuaWRdPXIsdGhpcy5hZGRTdHJlYW0ocyl9cmV0dXJuIHRoaXMuZ2V0U2VuZGVycygpLmZpbmQoZnVuY3Rpb24oZSl7cmV0dXJuIGUudHJhY2s9PT10fSl9LFtcImNyZWF0ZU9mZmVyXCIsXCJjcmVhdGVBbnN3ZXJcIl0uZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgcj1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVt0XSxuPW8oe30sdCxmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1hcmd1bWVudHM7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGgmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGFyZ3VtZW50c1swXT9yLmFwcGx5KHRoaXMsW2Z1bmN0aW9uKHIpe3ZhciBuPWMoZSxyKTt0WzBdLmFwcGx5KG51bGwsW25dKX0sZnVuY3Rpb24oZSl7dFsxXSYmdFsxXS5hcHBseShudWxsLGUpfSxhcmd1bWVudHNbMl1dKTpyLmFwcGx5KHRoaXMsYXJndW1lbnRzKS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiBjKGUsdCl9KX0pO2UuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlW3RdPW5bdF19KTt2YXIgcz1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5zZXRMb2NhbERlc2NyaXB0aW9uO2UuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnNldExvY2FsRGVzY3JpcHRpb249ZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aCYmYXJndW1lbnRzWzBdLnR5cGU/KGFyZ3VtZW50c1swXT0oZT10aGlzLHQ9YXJndW1lbnRzWzBdLHI9dC5zZHAsT2JqZWN0LmtleXMoZS5fcmV2ZXJzZVN0cmVhbXN8fFtdKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBuPWUuX3JldmVyc2VTdHJlYW1zW3RdLGk9ZS5fc3RyZWFtc1tuLmlkXTtyPXIucmVwbGFjZShuZXcgUmVnRXhwKG4uaWQsXCJnXCIpLGkuaWQpfSksbmV3IFJUQ1Nlc3Npb25EZXNjcmlwdGlvbih7dHlwZTp0LnR5cGUsc2RwOnJ9KSkscy5hcHBseSh0aGlzLGFyZ3VtZW50cykpOnMuYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciBlLHQscn07dmFyIGE9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSxcImxvY2FsRGVzY3JpcHRpb25cIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLFwibG9jYWxEZXNjcmlwdGlvblwiLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgZT1hLmdldC5hcHBseSh0aGlzKTtyZXR1cm5cIlwiPT09ZS50eXBlP2U6Yyh0aGlzLGUpfX0pLGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnJlbW92ZVRyYWNrPWZ1bmN0aW9uKGUpe3ZhciB0LHI9dGhpcztpZihcImNsb3NlZFwiPT09dGhpcy5zaWduYWxpbmdTdGF0ZSl0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKFwiVGhlIFJUQ1BlZXJDb25uZWN0aW9uJ3Mgc2lnbmFsaW5nU3RhdGUgaXMgJ2Nsb3NlZCcuXCIsXCJJbnZhbGlkU3RhdGVFcnJvclwiKTtpZighZS5fcGMpdGhyb3cgbmV3IERPTUV4Y2VwdGlvbihcIkFyZ3VtZW50IDEgb2YgUlRDUGVlckNvbm5lY3Rpb24ucmVtb3ZlVHJhY2sgZG9lcyBub3QgaW1wbGVtZW50IGludGVyZmFjZSBSVENSdHBTZW5kZXIuXCIsXCJUeXBlRXJyb3JcIik7aWYoIShlLl9wYz09PXRoaXMpKXRocm93IG5ldyBET01FeGNlcHRpb24oXCJTZW5kZXIgd2FzIG5vdCBjcmVhdGVkIGJ5IHRoaXMgY29ubmVjdGlvbi5cIixcIkludmFsaWRBY2Nlc3NFcnJvclwiKTt0aGlzLl9zdHJlYW1zPXRoaXMuX3N0cmVhbXN8fHt9LE9iamVjdC5rZXlzKHRoaXMuX3N0cmVhbXMpLmZvckVhY2goZnVuY3Rpb24obil7ci5fc3RyZWFtc1tuXS5nZXRUcmFja3MoKS5maW5kKGZ1bmN0aW9uKHQpe3JldHVybiBlLnRyYWNrPT09dH0pJiYodD1yLl9zdHJlYW1zW25dKX0pLHQmJigxPT09dC5nZXRUcmFja3MoKS5sZW5ndGg/dGhpcy5yZW1vdmVTdHJlYW0odGhpcy5fcmV2ZXJzZVN0cmVhbXNbdC5pZF0pOnQucmVtb3ZlVHJhY2soZS50cmFjayksdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcIm5lZ290aWF0aW9ubmVlZGVkXCIpKSl9fWZ1bmN0aW9uIGMoZSx0KXt2YXIgcj10LnNkcDtyZXR1cm4gT2JqZWN0LmtleXMoZS5fcmV2ZXJzZVN0cmVhbXN8fFtdKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBuPWUuX3JldmVyc2VTdHJlYW1zW3RdLGk9ZS5fc3RyZWFtc1tuLmlkXTtyPXIucmVwbGFjZShuZXcgUmVnRXhwKGkuaWQsXCJnXCIpLG4uaWQpfSksbmV3IFJUQ1Nlc3Npb25EZXNjcmlwdGlvbih7dHlwZTp0LnR5cGUsc2RwOnJ9KX19ZnVuY3Rpb24gdShlLHQpeyFlLlJUQ1BlZXJDb25uZWN0aW9uJiZlLndlYmtpdFJUQ1BlZXJDb25uZWN0aW9uJiYoZS5SVENQZWVyQ29ubmVjdGlvbj1lLndlYmtpdFJUQ1BlZXJDb25uZWN0aW9uKSxlLlJUQ1BlZXJDb25uZWN0aW9uJiZ0LnZlcnNpb248NTMmJltcInNldExvY2FsRGVzY3JpcHRpb25cIixcInNldFJlbW90ZURlc2NyaXB0aW9uXCIsXCJhZGRJY2VDYW5kaWRhdGVcIl0uZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgcj1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVt0XSxuPW8oe30sdCxmdW5jdGlvbigpe3JldHVybiBhcmd1bWVudHNbMF09bmV3KFwiYWRkSWNlQ2FuZGlkYXRlXCI9PT10P2UuUlRDSWNlQ2FuZGlkYXRlOmUuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKShhcmd1bWVudHNbMF0pLHIuYXBwbHkodGhpcyxhcmd1bWVudHMpfSk7ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVbdF09blt0XX0pfWZ1bmN0aW9uIGwodCxyKXtlLndyYXBQZWVyQ29ubmVjdGlvbkV2ZW50KHQsXCJuZWdvdGlhdGlvbm5lZWRlZFwiLGZ1bmN0aW9uKGUpe3ZhciB0PWUudGFyZ2V0O2lmKCEoci52ZXJzaW9uPDcyfHx0LmdldENvbmZpZ3VyYXRpb24mJlwicGxhbi1iXCI9PT10LmdldENvbmZpZ3VyYXRpb24oKS5zZHBTZW1hbnRpY3MpfHxcInN0YWJsZVwiPT09dC5zaWduYWxpbmdTdGF0ZSlyZXR1cm4gZX0pfVxufSx7XCIuLi91dGlscy5qc1wiOlwiaVN4Q1wiLFwiLi9nZXR1c2VybWVkaWFcIjpcInM2U05cIixcIi4vZ2V0ZGlzcGxheW1lZGlhXCI6XCJWSGE4XCJ9XSxcIk5aMUNcIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cykge1xuXCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5maWx0ZXJJY2VTZXJ2ZXJzPW47dmFyIHI9dChyZXF1aXJlKFwiLi4vdXRpbHNcIikpO2Z1bmN0aW9uIGUoKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBXZWFrTWFwKXJldHVybiBudWxsO3ZhciByPW5ldyBXZWFrTWFwO3JldHVybiBlPWZ1bmN0aW9uKCl7cmV0dXJuIHJ9LHJ9ZnVuY3Rpb24gdChyKXtpZihyJiZyLl9fZXNNb2R1bGUpcmV0dXJuIHI7aWYobnVsbD09PXJ8fFwib2JqZWN0XCIhPXR5cGVvZiByJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiByKXJldHVybntkZWZhdWx0OnJ9O3ZhciB0PWUoKTtpZih0JiZ0LmhhcyhyKSlyZXR1cm4gdC5nZXQocik7dmFyIG49e30sdT1PYmplY3QuZGVmaW5lUHJvcGVydHkmJk9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7Zm9yKHZhciBpIGluIHIpaWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHIsaSkpe3ZhciBmPXU/T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihyLGkpOm51bGw7ZiYmKGYuZ2V0fHxmLnNldCk/T2JqZWN0LmRlZmluZVByb3BlcnR5KG4saSxmKTpuW2ldPXJbaV19cmV0dXJuIG4uZGVmYXVsdD1yLHQmJnQuc2V0KHIsbiksbn1mdW5jdGlvbiBuKGUsdCl7dmFyIG49ITE7cmV0dXJuKGU9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShlKSkpLmZpbHRlcihmdW5jdGlvbihlKXtpZihlJiYoZS51cmxzfHxlLnVybCkpe3ZhciB0PWUudXJsc3x8ZS51cmw7ZS51cmwmJiFlLnVybHMmJnIuZGVwcmVjYXRlZChcIlJUQ0ljZVNlcnZlci51cmxcIixcIlJUQ0ljZVNlcnZlci51cmxzXCIpO3ZhciB1PVwic3RyaW5nXCI9PXR5cGVvZiB0O3JldHVybiB1JiYodD1bdF0pLHQ9dC5maWx0ZXIoZnVuY3Rpb24ocil7aWYoMD09PXIuaW5kZXhPZihcInN0dW46XCIpKXJldHVybiExO3ZhciBlPXIuc3RhcnRzV2l0aChcInR1cm5cIikmJiFyLnN0YXJ0c1dpdGgoXCJ0dXJuOltcIikmJnIuaW5jbHVkZXMoXCJ0cmFuc3BvcnQ9dWRwXCIpO3JldHVybiBlJiYhbj8obj0hMCwhMCk6ZSYmIW59KSxkZWxldGUgZS51cmwsZS51cmxzPXU/dFswXTp0LCEhdC5sZW5ndGh9fSl9XG59LHtcIi4uL3V0aWxzXCI6XCJpU3hDXCJ9XSxcIllIdmhcIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cykge1xuXCJ1c2Ugc3RyaWN0XCI7dmFyIHI9e2dlbmVyYXRlSWRlbnRpZmllcjpmdW5jdGlvbigpe3JldHVybiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwxMCl9fTtyLmxvY2FsQ05hbWU9ci5nZW5lcmF0ZUlkZW50aWZpZXIoKSxyLnNwbGl0TGluZXM9ZnVuY3Rpb24ocil7cmV0dXJuIHIudHJpbSgpLnNwbGl0KFwiXFxuXCIpLm1hcChmdW5jdGlvbihyKXtyZXR1cm4gci50cmltKCl9KX0sci5zcGxpdFNlY3Rpb25zPWZ1bmN0aW9uKHIpe3JldHVybiByLnNwbGl0KFwiXFxubT1cIikubWFwKGZ1bmN0aW9uKHIsZSl7cmV0dXJuKGU+MD9cIm09XCIrcjpyKS50cmltKCkrXCJcXHJcXG5cIn0pfSxyLmdldERlc2NyaXB0aW9uPWZ1bmN0aW9uKGUpe3ZhciB0PXIuc3BsaXRTZWN0aW9ucyhlKTtyZXR1cm4gdCYmdFswXX0sci5nZXRNZWRpYVNlY3Rpb25zPWZ1bmN0aW9uKGUpe3ZhciB0PXIuc3BsaXRTZWN0aW9ucyhlKTtyZXR1cm4gdC5zaGlmdCgpLHR9LHIubWF0Y2hQcmVmaXg9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gci5zcGxpdExpbmVzKGUpLmZpbHRlcihmdW5jdGlvbihyKXtyZXR1cm4gMD09PXIuaW5kZXhPZih0KX0pfSxyLnBhcnNlQ2FuZGlkYXRlPWZ1bmN0aW9uKHIpe2Zvcih2YXIgZSx0PXtmb3VuZGF0aW9uOihlPTA9PT1yLmluZGV4T2YoXCJhPWNhbmRpZGF0ZTpcIik/ci5zdWJzdHJpbmcoMTIpLnNwbGl0KFwiIFwiKTpyLnN1YnN0cmluZygxMCkuc3BsaXQoXCIgXCIpKVswXSxjb21wb25lbnQ6cGFyc2VJbnQoZVsxXSwxMCkscHJvdG9jb2w6ZVsyXS50b0xvd2VyQ2FzZSgpLHByaW9yaXR5OnBhcnNlSW50KGVbM10sMTApLGlwOmVbNF0sYWRkcmVzczplWzRdLHBvcnQ6cGFyc2VJbnQoZVs1XSwxMCksdHlwZTplWzddfSxhPTg7YTxlLmxlbmd0aDthKz0yKXN3aXRjaChlW2FdKXtjYXNlXCJyYWRkclwiOnQucmVsYXRlZEFkZHJlc3M9ZVthKzFdO2JyZWFrO2Nhc2VcInJwb3J0XCI6dC5yZWxhdGVkUG9ydD1wYXJzZUludChlW2ErMV0sMTApO2JyZWFrO2Nhc2VcInRjcHR5cGVcIjp0LnRjcFR5cGU9ZVthKzFdO2JyZWFrO2Nhc2VcInVmcmFnXCI6dC51ZnJhZz1lW2ErMV0sdC51c2VybmFtZUZyYWdtZW50PWVbYSsxXTticmVhaztkZWZhdWx0OnRbZVthXV09ZVthKzFdfXJldHVybiB0fSxyLndyaXRlQ2FuZGlkYXRlPWZ1bmN0aW9uKHIpe3ZhciBlPVtdO2UucHVzaChyLmZvdW5kYXRpb24pLGUucHVzaChyLmNvbXBvbmVudCksZS5wdXNoKHIucHJvdG9jb2wudG9VcHBlckNhc2UoKSksZS5wdXNoKHIucHJpb3JpdHkpLGUucHVzaChyLmFkZHJlc3N8fHIuaXApLGUucHVzaChyLnBvcnQpO3ZhciB0PXIudHlwZTtyZXR1cm4gZS5wdXNoKFwidHlwXCIpLGUucHVzaCh0KSxcImhvc3RcIiE9PXQmJnIucmVsYXRlZEFkZHJlc3MmJnIucmVsYXRlZFBvcnQmJihlLnB1c2goXCJyYWRkclwiKSxlLnB1c2goci5yZWxhdGVkQWRkcmVzcyksZS5wdXNoKFwicnBvcnRcIiksZS5wdXNoKHIucmVsYXRlZFBvcnQpKSxyLnRjcFR5cGUmJlwidGNwXCI9PT1yLnByb3RvY29sLnRvTG93ZXJDYXNlKCkmJihlLnB1c2goXCJ0Y3B0eXBlXCIpLGUucHVzaChyLnRjcFR5cGUpKSwoci51c2VybmFtZUZyYWdtZW50fHxyLnVmcmFnKSYmKGUucHVzaChcInVmcmFnXCIpLGUucHVzaChyLnVzZXJuYW1lRnJhZ21lbnR8fHIudWZyYWcpKSxcImNhbmRpZGF0ZTpcIitlLmpvaW4oXCIgXCIpfSxyLnBhcnNlSWNlT3B0aW9ucz1mdW5jdGlvbihyKXtyZXR1cm4gci5zdWJzdHIoMTQpLnNwbGl0KFwiIFwiKX0sci5wYXJzZVJ0cE1hcD1mdW5jdGlvbihyKXt2YXIgZT1yLnN1YnN0cig5KS5zcGxpdChcIiBcIiksdD17cGF5bG9hZFR5cGU6cGFyc2VJbnQoZS5zaGlmdCgpLDEwKX07cmV0dXJuIGU9ZVswXS5zcGxpdChcIi9cIiksdC5uYW1lPWVbMF0sdC5jbG9ja1JhdGU9cGFyc2VJbnQoZVsxXSwxMCksdC5jaGFubmVscz0zPT09ZS5sZW5ndGg/cGFyc2VJbnQoZVsyXSwxMCk6MSx0Lm51bUNoYW5uZWxzPXQuY2hhbm5lbHMsdH0sci53cml0ZVJ0cE1hcD1mdW5jdGlvbihyKXt2YXIgZT1yLnBheWxvYWRUeXBlO3ZvaWQgMCE9PXIucHJlZmVycmVkUGF5bG9hZFR5cGUmJihlPXIucHJlZmVycmVkUGF5bG9hZFR5cGUpO3ZhciB0PXIuY2hhbm5lbHN8fHIubnVtQ2hhbm5lbHN8fDE7cmV0dXJuXCJhPXJ0cG1hcDpcIitlK1wiIFwiK3IubmFtZStcIi9cIityLmNsb2NrUmF0ZSsoMSE9PXQ/XCIvXCIrdDpcIlwiKStcIlxcclxcblwifSxyLnBhcnNlRXh0bWFwPWZ1bmN0aW9uKHIpe3ZhciBlPXIuc3Vic3RyKDkpLnNwbGl0KFwiIFwiKTtyZXR1cm57aWQ6cGFyc2VJbnQoZVswXSwxMCksZGlyZWN0aW9uOmVbMF0uaW5kZXhPZihcIi9cIik+MD9lWzBdLnNwbGl0KFwiL1wiKVsxXTpcInNlbmRyZWN2XCIsdXJpOmVbMV19fSxyLndyaXRlRXh0bWFwPWZ1bmN0aW9uKHIpe3JldHVyblwiYT1leHRtYXA6XCIrKHIuaWR8fHIucHJlZmVycmVkSWQpKyhyLmRpcmVjdGlvbiYmXCJzZW5kcmVjdlwiIT09ci5kaXJlY3Rpb24/XCIvXCIrci5kaXJlY3Rpb246XCJcIikrXCIgXCIrci51cmkrXCJcXHJcXG5cIn0sci5wYXJzZUZtdHA9ZnVuY3Rpb24ocil7Zm9yKHZhciBlLHQ9e30sYT1yLnN1YnN0cihyLmluZGV4T2YoXCIgXCIpKzEpLnNwbGl0KFwiO1wiKSxuPTA7bjxhLmxlbmd0aDtuKyspdFsoZT1hW25dLnRyaW0oKS5zcGxpdChcIj1cIikpWzBdLnRyaW0oKV09ZVsxXTtyZXR1cm4gdH0sci53cml0ZUZtdHA9ZnVuY3Rpb24ocil7dmFyIGU9XCJcIix0PXIucGF5bG9hZFR5cGU7aWYodm9pZCAwIT09ci5wcmVmZXJyZWRQYXlsb2FkVHlwZSYmKHQ9ci5wcmVmZXJyZWRQYXlsb2FkVHlwZSksci5wYXJhbWV0ZXJzJiZPYmplY3Qua2V5cyhyLnBhcmFtZXRlcnMpLmxlbmd0aCl7dmFyIGE9W107T2JqZWN0LmtleXMoci5wYXJhbWV0ZXJzKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3IucGFyYW1ldGVyc1tlXT9hLnB1c2goZStcIj1cIityLnBhcmFtZXRlcnNbZV0pOmEucHVzaChlKX0pLGUrPVwiYT1mbXRwOlwiK3QrXCIgXCIrYS5qb2luKFwiO1wiKStcIlxcclxcblwifXJldHVybiBlfSxyLnBhcnNlUnRjcEZiPWZ1bmN0aW9uKHIpe3ZhciBlPXIuc3Vic3RyKHIuaW5kZXhPZihcIiBcIikrMSkuc3BsaXQoXCIgXCIpO3JldHVybnt0eXBlOmUuc2hpZnQoKSxwYXJhbWV0ZXI6ZS5qb2luKFwiIFwiKX19LHIud3JpdGVSdGNwRmI9ZnVuY3Rpb24ocil7dmFyIGU9XCJcIix0PXIucGF5bG9hZFR5cGU7cmV0dXJuIHZvaWQgMCE9PXIucHJlZmVycmVkUGF5bG9hZFR5cGUmJih0PXIucHJlZmVycmVkUGF5bG9hZFR5cGUpLHIucnRjcEZlZWRiYWNrJiZyLnJ0Y3BGZWVkYmFjay5sZW5ndGgmJnIucnRjcEZlZWRiYWNrLmZvckVhY2goZnVuY3Rpb24ocil7ZSs9XCJhPXJ0Y3AtZmI6XCIrdCtcIiBcIityLnR5cGUrKHIucGFyYW1ldGVyJiZyLnBhcmFtZXRlci5sZW5ndGg/XCIgXCIrci5wYXJhbWV0ZXI6XCJcIikrXCJcXHJcXG5cIn0pLGV9LHIucGFyc2VTc3JjTWVkaWE9ZnVuY3Rpb24ocil7dmFyIGU9ci5pbmRleE9mKFwiIFwiKSx0PXtzc3JjOnBhcnNlSW50KHIuc3Vic3RyKDcsZS03KSwxMCl9LGE9ci5pbmRleE9mKFwiOlwiLGUpO3JldHVybiBhPi0xPyh0LmF0dHJpYnV0ZT1yLnN1YnN0cihlKzEsYS1lLTEpLHQudmFsdWU9ci5zdWJzdHIoYSsxKSk6dC5hdHRyaWJ1dGU9ci5zdWJzdHIoZSsxKSx0fSxyLnBhcnNlU3NyY0dyb3VwPWZ1bmN0aW9uKHIpe3ZhciBlPXIuc3Vic3RyKDEzKS5zcGxpdChcIiBcIik7cmV0dXJue3NlbWFudGljczplLnNoaWZ0KCksc3NyY3M6ZS5tYXAoZnVuY3Rpb24ocil7cmV0dXJuIHBhcnNlSW50KHIsMTApfSl9fSxyLmdldE1pZD1mdW5jdGlvbihlKXt2YXIgdD1yLm1hdGNoUHJlZml4KGUsXCJhPW1pZDpcIilbMF07aWYodClyZXR1cm4gdC5zdWJzdHIoNil9LHIucGFyc2VGaW5nZXJwcmludD1mdW5jdGlvbihyKXt2YXIgZT1yLnN1YnN0cigxNCkuc3BsaXQoXCIgXCIpO3JldHVybnthbGdvcml0aG06ZVswXS50b0xvd2VyQ2FzZSgpLHZhbHVlOmVbMV19fSxyLmdldER0bHNQYXJhbWV0ZXJzPWZ1bmN0aW9uKGUsdCl7cmV0dXJue3JvbGU6XCJhdXRvXCIsZmluZ2VycHJpbnRzOnIubWF0Y2hQcmVmaXgoZSt0LFwiYT1maW5nZXJwcmludDpcIikubWFwKHIucGFyc2VGaW5nZXJwcmludCl9fSxyLndyaXRlRHRsc1BhcmFtZXRlcnM9ZnVuY3Rpb24ocixlKXt2YXIgdD1cImE9c2V0dXA6XCIrZStcIlxcclxcblwiO3JldHVybiByLmZpbmdlcnByaW50cy5mb3JFYWNoKGZ1bmN0aW9uKHIpe3QrPVwiYT1maW5nZXJwcmludDpcIityLmFsZ29yaXRobStcIiBcIityLnZhbHVlK1wiXFxyXFxuXCJ9KSx0fSxyLnBhcnNlQ3J5cHRvTGluZT1mdW5jdGlvbihyKXt2YXIgZT1yLnN1YnN0cig5KS5zcGxpdChcIiBcIik7cmV0dXJue3RhZzpwYXJzZUludChlWzBdLDEwKSxjcnlwdG9TdWl0ZTplWzFdLGtleVBhcmFtczplWzJdLHNlc3Npb25QYXJhbXM6ZS5zbGljZSgzKX19LHIud3JpdGVDcnlwdG9MaW5lPWZ1bmN0aW9uKGUpe3JldHVyblwiYT1jcnlwdG86XCIrZS50YWcrXCIgXCIrZS5jcnlwdG9TdWl0ZStcIiBcIisoXCJvYmplY3RcIj09dHlwZW9mIGUua2V5UGFyYW1zP3Iud3JpdGVDcnlwdG9LZXlQYXJhbXMoZS5rZXlQYXJhbXMpOmUua2V5UGFyYW1zKSsoZS5zZXNzaW9uUGFyYW1zP1wiIFwiK2Uuc2Vzc2lvblBhcmFtcy5qb2luKFwiIFwiKTpcIlwiKStcIlxcclxcblwifSxyLnBhcnNlQ3J5cHRvS2V5UGFyYW1zPWZ1bmN0aW9uKHIpe2lmKDAhPT1yLmluZGV4T2YoXCJpbmxpbmU6XCIpKXJldHVybiBudWxsO3ZhciBlPXIuc3Vic3RyKDcpLnNwbGl0KFwifFwiKTtyZXR1cm57a2V5TWV0aG9kOlwiaW5saW5lXCIsa2V5U2FsdDplWzBdLGxpZmVUaW1lOmVbMV0sbWtpVmFsdWU6ZVsyXT9lWzJdLnNwbGl0KFwiOlwiKVswXTp2b2lkIDAsbWtpTGVuZ3RoOmVbMl0/ZVsyXS5zcGxpdChcIjpcIilbMV06dm9pZCAwfX0sci53cml0ZUNyeXB0b0tleVBhcmFtcz1mdW5jdGlvbihyKXtyZXR1cm4gci5rZXlNZXRob2QrXCI6XCIrci5rZXlTYWx0KyhyLmxpZmVUaW1lP1wifFwiK3IubGlmZVRpbWU6XCJcIikrKHIubWtpVmFsdWUmJnIubWtpTGVuZ3RoP1wifFwiK3IubWtpVmFsdWUrXCI6XCIrci5ta2lMZW5ndGg6XCJcIil9LHIuZ2V0Q3J5cHRvUGFyYW1ldGVycz1mdW5jdGlvbihlLHQpe3JldHVybiByLm1hdGNoUHJlZml4KGUrdCxcImE9Y3J5cHRvOlwiKS5tYXAoci5wYXJzZUNyeXB0b0xpbmUpfSxyLmdldEljZVBhcmFtZXRlcnM9ZnVuY3Rpb24oZSx0KXt2YXIgYT1yLm1hdGNoUHJlZml4KGUrdCxcImE9aWNlLXVmcmFnOlwiKVswXSxuPXIubWF0Y2hQcmVmaXgoZSt0LFwiYT1pY2UtcHdkOlwiKVswXTtyZXR1cm4gYSYmbj97dXNlcm5hbWVGcmFnbWVudDphLnN1YnN0cigxMikscGFzc3dvcmQ6bi5zdWJzdHIoMTApfTpudWxsfSxyLndyaXRlSWNlUGFyYW1ldGVycz1mdW5jdGlvbihyKXtyZXR1cm5cImE9aWNlLXVmcmFnOlwiK3IudXNlcm5hbWVGcmFnbWVudCtcIlxcclxcbmE9aWNlLXB3ZDpcIityLnBhc3N3b3JkK1wiXFxyXFxuXCJ9LHIucGFyc2VSdHBQYXJhbWV0ZXJzPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD17Y29kZWNzOltdLGhlYWRlckV4dGVuc2lvbnM6W10sZmVjTWVjaGFuaXNtczpbXSxydGNwOltdfSxhPXIuc3BsaXRMaW5lcyhlKVswXS5zcGxpdChcIiBcIiksbj0zO248YS5sZW5ndGg7bisrKXt2YXIgcz1hW25dLGk9ci5tYXRjaFByZWZpeChlLFwiYT1ydHBtYXA6XCIrcytcIiBcIilbMF07aWYoaSl7dmFyIHA9ci5wYXJzZVJ0cE1hcChpKSxjPXIubWF0Y2hQcmVmaXgoZSxcImE9Zm10cDpcIitzK1wiIFwiKTtzd2l0Y2gocC5wYXJhbWV0ZXJzPWMubGVuZ3RoP3IucGFyc2VGbXRwKGNbMF0pOnt9LHAucnRjcEZlZWRiYWNrPXIubWF0Y2hQcmVmaXgoZSxcImE9cnRjcC1mYjpcIitzK1wiIFwiKS5tYXAoci5wYXJzZVJ0Y3BGYiksdC5jb2RlY3MucHVzaChwKSxwLm5hbWUudG9VcHBlckNhc2UoKSl7Y2FzZVwiUkVEXCI6Y2FzZVwiVUxQRkVDXCI6dC5mZWNNZWNoYW5pc21zLnB1c2gocC5uYW1lLnRvVXBwZXJDYXNlKCkpfX19cmV0dXJuIHIubWF0Y2hQcmVmaXgoZSxcImE9ZXh0bWFwOlwiKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3QuaGVhZGVyRXh0ZW5zaW9ucy5wdXNoKHIucGFyc2VFeHRtYXAoZSkpfSksdH0sci53cml0ZVJ0cERlc2NyaXB0aW9uPWZ1bmN0aW9uKGUsdCl7dmFyIGE9XCJcIjthKz1cIm09XCIrZStcIiBcIixhKz10LmNvZGVjcy5sZW5ndGg+MD9cIjlcIjpcIjBcIixhKz1cIiBVRFAvVExTL1JUUC9TQVZQRiBcIixhKz10LmNvZGVjcy5tYXAoZnVuY3Rpb24ocil7cmV0dXJuIHZvaWQgMCE9PXIucHJlZmVycmVkUGF5bG9hZFR5cGU/ci5wcmVmZXJyZWRQYXlsb2FkVHlwZTpyLnBheWxvYWRUeXBlfSkuam9pbihcIiBcIikrXCJcXHJcXG5cIixhKz1cImM9SU4gSVA0IDAuMC4wLjBcXHJcXG5cIixhKz1cImE9cnRjcDo5IElOIElQNCAwLjAuMC4wXFxyXFxuXCIsdC5jb2RlY3MuZm9yRWFjaChmdW5jdGlvbihlKXthKz1yLndyaXRlUnRwTWFwKGUpLGErPXIud3JpdGVGbXRwKGUpLGErPXIud3JpdGVSdGNwRmIoZSl9KTt2YXIgbj0wO3JldHVybiB0LmNvZGVjcy5mb3JFYWNoKGZ1bmN0aW9uKHIpe3IubWF4cHRpbWU+biYmKG49ci5tYXhwdGltZSl9KSxuPjAmJihhKz1cImE9bWF4cHRpbWU6XCIrbitcIlxcclxcblwiKSxhKz1cImE9cnRjcC1tdXhcXHJcXG5cIix0LmhlYWRlckV4dGVuc2lvbnMmJnQuaGVhZGVyRXh0ZW5zaW9ucy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2ErPXIud3JpdGVFeHRtYXAoZSl9KSxhfSxyLnBhcnNlUnRwRW5jb2RpbmdQYXJhbWV0ZXJzPWZ1bmN0aW9uKGUpe3ZhciB0LGE9W10sbj1yLnBhcnNlUnRwUGFyYW1ldGVycyhlKSxzPS0xIT09bi5mZWNNZWNoYW5pc21zLmluZGV4T2YoXCJSRURcIiksaT0tMSE9PW4uZmVjTWVjaGFuaXNtcy5pbmRleE9mKFwiVUxQRkVDXCIpLHA9ci5tYXRjaFByZWZpeChlLFwiYT1zc3JjOlwiKS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIHIucGFyc2VTc3JjTWVkaWEoZSl9KS5maWx0ZXIoZnVuY3Rpb24ocil7cmV0dXJuXCJjbmFtZVwiPT09ci5hdHRyaWJ1dGV9KSxjPXAubGVuZ3RoPjAmJnBbMF0uc3NyYyxvPXIubWF0Y2hQcmVmaXgoZSxcImE9c3NyYy1ncm91cDpGSURcIikubWFwKGZ1bmN0aW9uKHIpe3JldHVybiByLnN1YnN0cigxNykuc3BsaXQoXCIgXCIpLm1hcChmdW5jdGlvbihyKXtyZXR1cm4gcGFyc2VJbnQociwxMCl9KX0pO28ubGVuZ3RoPjAmJm9bMF0ubGVuZ3RoPjEmJm9bMF1bMF09PT1jJiYodD1vWzBdWzFdKSxuLmNvZGVjcy5mb3JFYWNoKGZ1bmN0aW9uKHIpe2lmKFwiUlRYXCI9PT1yLm5hbWUudG9VcHBlckNhc2UoKSYmci5wYXJhbWV0ZXJzLmFwdCl7dmFyIGU9e3NzcmM6Yyxjb2RlY1BheWxvYWRUeXBlOnBhcnNlSW50KHIucGFyYW1ldGVycy5hcHQsMTApfTtjJiZ0JiYoZS5ydHg9e3NzcmM6dH0pLGEucHVzaChlKSxzJiYoKGU9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShlKSkpLmZlYz17c3NyYzpjLG1lY2hhbmlzbTppP1wicmVkK3VscGZlY1wiOlwicmVkXCJ9LGEucHVzaChlKSl9fSksMD09PWEubGVuZ3RoJiZjJiZhLnB1c2goe3NzcmM6Y30pO3ZhciB1PXIubWF0Y2hQcmVmaXgoZSxcImI9XCIpO3JldHVybiB1Lmxlbmd0aCYmKHU9MD09PXVbMF0uaW5kZXhPZihcImI9VElBUzpcIik/cGFyc2VJbnQodVswXS5zdWJzdHIoNyksMTApOjA9PT11WzBdLmluZGV4T2YoXCJiPUFTOlwiKT8xZTMqcGFyc2VJbnQodVswXS5zdWJzdHIoNSksMTApKi45NS0xNmUzOnZvaWQgMCxhLmZvckVhY2goZnVuY3Rpb24ocil7ci5tYXhCaXRyYXRlPXV9KSksYX0sci5wYXJzZVJ0Y3BQYXJhbWV0ZXJzPWZ1bmN0aW9uKGUpe3ZhciB0PXt9LGE9ci5tYXRjaFByZWZpeChlLFwiYT1zc3JjOlwiKS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIHIucGFyc2VTc3JjTWVkaWEoZSl9KS5maWx0ZXIoZnVuY3Rpb24ocil7cmV0dXJuXCJjbmFtZVwiPT09ci5hdHRyaWJ1dGV9KVswXTthJiYodC5jbmFtZT1hLnZhbHVlLHQuc3NyYz1hLnNzcmMpO3ZhciBuPXIubWF0Y2hQcmVmaXgoZSxcImE9cnRjcC1yc2l6ZVwiKTt0LnJlZHVjZWRTaXplPW4ubGVuZ3RoPjAsdC5jb21wb3VuZD0wPT09bi5sZW5ndGg7dmFyIHM9ci5tYXRjaFByZWZpeChlLFwiYT1ydGNwLW11eFwiKTtyZXR1cm4gdC5tdXg9cy5sZW5ndGg+MCx0fSxyLnBhcnNlTXNpZD1mdW5jdGlvbihlKXt2YXIgdCxhPXIubWF0Y2hQcmVmaXgoZSxcImE9bXNpZDpcIik7aWYoMT09PWEubGVuZ3RoKXJldHVybntzdHJlYW06KHQ9YVswXS5zdWJzdHIoNykuc3BsaXQoXCIgXCIpKVswXSx0cmFjazp0WzFdfTt2YXIgbj1yLm1hdGNoUHJlZml4KGUsXCJhPXNzcmM6XCIpLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gci5wYXJzZVNzcmNNZWRpYShlKX0pLmZpbHRlcihmdW5jdGlvbihyKXtyZXR1cm5cIm1zaWRcIj09PXIuYXR0cmlidXRlfSk7cmV0dXJuIG4ubGVuZ3RoPjA/e3N0cmVhbToodD1uWzBdLnZhbHVlLnNwbGl0KFwiIFwiKSlbMF0sdHJhY2s6dFsxXX06dm9pZCAwfSxyLnBhcnNlU2N0cERlc2NyaXB0aW9uPWZ1bmN0aW9uKGUpe3ZhciB0LGE9ci5wYXJzZU1MaW5lKGUpLG49ci5tYXRjaFByZWZpeChlLFwiYT1tYXgtbWVzc2FnZS1zaXplOlwiKTtuLmxlbmd0aD4wJiYodD1wYXJzZUludChuWzBdLnN1YnN0cigxOSksMTApKSxpc05hTih0KSYmKHQ9NjU1MzYpO3ZhciBzPXIubWF0Y2hQcmVmaXgoZSxcImE9c2N0cC1wb3J0OlwiKTtpZihzLmxlbmd0aD4wKXJldHVybntwb3J0OnBhcnNlSW50KHNbMF0uc3Vic3RyKDEyKSwxMCkscHJvdG9jb2w6YS5mbXQsbWF4TWVzc2FnZVNpemU6dH07aWYoci5tYXRjaFByZWZpeChlLFwiYT1zY3RwbWFwOlwiKS5sZW5ndGg+MCl7dmFyIGk9ci5tYXRjaFByZWZpeChlLFwiYT1zY3RwbWFwOlwiKVswXS5zdWJzdHIoMTApLnNwbGl0KFwiIFwiKTtyZXR1cm57cG9ydDpwYXJzZUludChpWzBdLDEwKSxwcm90b2NvbDppWzFdLG1heE1lc3NhZ2VTaXplOnR9fX0sci53cml0ZVNjdHBEZXNjcmlwdGlvbj1mdW5jdGlvbihyLGUpe3ZhciB0PVtdO3JldHVybiB0PVwiRFRMUy9TQ1RQXCIhPT1yLnByb3RvY29sP1tcIm09XCIrci5raW5kK1wiIDkgXCIrci5wcm90b2NvbCtcIiBcIitlLnByb3RvY29sK1wiXFxyXFxuXCIsXCJjPUlOIElQNCAwLjAuMC4wXFxyXFxuXCIsXCJhPXNjdHAtcG9ydDpcIitlLnBvcnQrXCJcXHJcXG5cIl06W1wibT1cIityLmtpbmQrXCIgOSBcIityLnByb3RvY29sK1wiIFwiK2UucG9ydCtcIlxcclxcblwiLFwiYz1JTiBJUDQgMC4wLjAuMFxcclxcblwiLFwiYT1zY3RwbWFwOlwiK2UucG9ydCtcIiBcIitlLnByb3RvY29sK1wiIDY1NTM1XFxyXFxuXCJdLHZvaWQgMCE9PWUubWF4TWVzc2FnZVNpemUmJnQucHVzaChcImE9bWF4LW1lc3NhZ2Utc2l6ZTpcIitlLm1heE1lc3NhZ2VTaXplK1wiXFxyXFxuXCIpLHQuam9pbihcIlwiKX0sci5nZW5lcmF0ZVNlc3Npb25JZD1mdW5jdGlvbigpe3JldHVybiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKCkuc3Vic3RyKDIsMjEpfSxyLndyaXRlU2Vzc2lvbkJvaWxlcnBsYXRlPWZ1bmN0aW9uKGUsdCxhKXt2YXIgbj12b2lkIDAhPT10P3Q6MjtyZXR1cm5cInY9MFxcclxcbm89XCIrKGF8fFwidGhpc2lzYWRhcHRlcm9ydGNcIikrXCIgXCIrKGV8fHIuZ2VuZXJhdGVTZXNzaW9uSWQoKSkrXCIgXCIrbitcIiBJTiBJUDQgMTI3LjAuMC4xXFxyXFxucz0tXFxyXFxudD0wIDBcXHJcXG5cIn0sci53cml0ZU1lZGlhU2VjdGlvbj1mdW5jdGlvbihlLHQsYSxuKXt2YXIgcz1yLndyaXRlUnRwRGVzY3JpcHRpb24oZS5raW5kLHQpO2lmKHMrPXIud3JpdGVJY2VQYXJhbWV0ZXJzKGUuaWNlR2F0aGVyZXIuZ2V0TG9jYWxQYXJhbWV0ZXJzKCkpLHMrPXIud3JpdGVEdGxzUGFyYW1ldGVycyhlLmR0bHNUcmFuc3BvcnQuZ2V0TG9jYWxQYXJhbWV0ZXJzKCksXCJvZmZlclwiPT09YT9cImFjdHBhc3NcIjpcImFjdGl2ZVwiKSxzKz1cImE9bWlkOlwiK2UubWlkK1wiXFxyXFxuXCIsZS5kaXJlY3Rpb24/cys9XCJhPVwiK2UuZGlyZWN0aW9uK1wiXFxyXFxuXCI6ZS5ydHBTZW5kZXImJmUucnRwUmVjZWl2ZXI/cys9XCJhPXNlbmRyZWN2XFxyXFxuXCI6ZS5ydHBTZW5kZXI/cys9XCJhPXNlbmRvbmx5XFxyXFxuXCI6ZS5ydHBSZWNlaXZlcj9zKz1cImE9cmVjdm9ubHlcXHJcXG5cIjpzKz1cImE9aW5hY3RpdmVcXHJcXG5cIixlLnJ0cFNlbmRlcil7dmFyIGk9XCJtc2lkOlwiK24uaWQrXCIgXCIrZS5ydHBTZW5kZXIudHJhY2suaWQrXCJcXHJcXG5cIjtzKz1cImE9XCIraSxzKz1cImE9c3NyYzpcIitlLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0uc3NyYytcIiBcIitpLGUuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHgmJihzKz1cImE9c3NyYzpcIitlLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4LnNzcmMrXCIgXCIraSxzKz1cImE9c3NyYy1ncm91cDpGSUQgXCIrZS5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnNzcmMrXCIgXCIrZS5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eC5zc3JjK1wiXFxyXFxuXCIpfXJldHVybiBzKz1cImE9c3NyYzpcIitlLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0uc3NyYytcIiBjbmFtZTpcIityLmxvY2FsQ05hbWUrXCJcXHJcXG5cIixlLnJ0cFNlbmRlciYmZS5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eCYmKHMrPVwiYT1zc3JjOlwiK2Uuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHguc3NyYytcIiBjbmFtZTpcIityLmxvY2FsQ05hbWUrXCJcXHJcXG5cIiksc30sci5nZXREaXJlY3Rpb249ZnVuY3Rpb24oZSx0KXtmb3IodmFyIGE9ci5zcGxpdExpbmVzKGUpLG49MDtuPGEubGVuZ3RoO24rKylzd2l0Y2goYVtuXSl7Y2FzZVwiYT1zZW5kcmVjdlwiOmNhc2VcImE9c2VuZG9ubHlcIjpjYXNlXCJhPXJlY3Zvbmx5XCI6Y2FzZVwiYT1pbmFjdGl2ZVwiOnJldHVybiBhW25dLnN1YnN0cigyKX1yZXR1cm4gdD9yLmdldERpcmVjdGlvbih0KTpcInNlbmRyZWN2XCJ9LHIuZ2V0S2luZD1mdW5jdGlvbihlKXtyZXR1cm4gci5zcGxpdExpbmVzKGUpWzBdLnNwbGl0KFwiIFwiKVswXS5zdWJzdHIoMil9LHIuaXNSZWplY3RlZD1mdW5jdGlvbihyKXtyZXR1cm5cIjBcIj09PXIuc3BsaXQoXCIgXCIsMilbMV19LHIucGFyc2VNTGluZT1mdW5jdGlvbihlKXt2YXIgdD1yLnNwbGl0TGluZXMoZSlbMF0uc3Vic3RyKDIpLnNwbGl0KFwiIFwiKTtyZXR1cm57a2luZDp0WzBdLHBvcnQ6cGFyc2VJbnQodFsxXSwxMCkscHJvdG9jb2w6dFsyXSxmbXQ6dC5zbGljZSgzKS5qb2luKFwiIFwiKX19LHIucGFyc2VPTGluZT1mdW5jdGlvbihlKXt2YXIgdD1yLm1hdGNoUHJlZml4KGUsXCJvPVwiKVswXS5zdWJzdHIoMikuc3BsaXQoXCIgXCIpO3JldHVybnt1c2VybmFtZTp0WzBdLHNlc3Npb25JZDp0WzFdLHNlc3Npb25WZXJzaW9uOnBhcnNlSW50KHRbMl0sMTApLG5ldFR5cGU6dFszXSxhZGRyZXNzVHlwZTp0WzRdLGFkZHJlc3M6dFs1XX19LHIuaXNWYWxpZFNEUD1mdW5jdGlvbihlKXtpZihcInN0cmluZ1wiIT10eXBlb2YgZXx8MD09PWUubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgdD1yLnNwbGl0TGluZXMoZSksYT0wO2E8dC5sZW5ndGg7YSsrKWlmKHRbYV0ubGVuZ3RoPDJ8fFwiPVwiIT09dFthXS5jaGFyQXQoMSkpcmV0dXJuITE7cmV0dXJuITB9LFwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUmJihtb2R1bGUuZXhwb3J0cz1yKTtcbn0se31dLFwiTkoydVwiOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKSB7XG5cInVzZSBzdHJpY3RcIjt2YXIgZT1yZXF1aXJlKFwic2RwXCIpO2Z1bmN0aW9uIHQoZSl7cmV0dXJue2luYm91bmRydHA6XCJpbmJvdW5kLXJ0cFwiLG91dGJvdW5kcnRwOlwib3V0Ym91bmQtcnRwXCIsY2FuZGlkYXRlcGFpcjpcImNhbmRpZGF0ZS1wYWlyXCIsbG9jYWxjYW5kaWRhdGU6XCJsb2NhbC1jYW5kaWRhdGVcIixyZW1vdGVjYW5kaWRhdGU6XCJyZW1vdGUtY2FuZGlkYXRlXCJ9W2UudHlwZV18fGUudHlwZX1mdW5jdGlvbiByKHQscixuLGEsaSl7dmFyIHM9ZS53cml0ZVJ0cERlc2NyaXB0aW9uKHQua2luZCxyKTtpZihzKz1lLndyaXRlSWNlUGFyYW1ldGVycyh0LmljZUdhdGhlcmVyLmdldExvY2FsUGFyYW1ldGVycygpKSxzKz1lLndyaXRlRHRsc1BhcmFtZXRlcnModC5kdGxzVHJhbnNwb3J0LmdldExvY2FsUGFyYW1ldGVycygpLFwib2ZmZXJcIj09PW4/XCJhY3RwYXNzXCI6aXx8XCJhY3RpdmVcIikscys9XCJhPW1pZDpcIit0Lm1pZCtcIlxcclxcblwiLHQucnRwU2VuZGVyJiZ0LnJ0cFJlY2VpdmVyP3MrPVwiYT1zZW5kcmVjdlxcclxcblwiOnQucnRwU2VuZGVyP3MrPVwiYT1zZW5kb25seVxcclxcblwiOnQucnRwUmVjZWl2ZXI/cys9XCJhPXJlY3Zvbmx5XFxyXFxuXCI6cys9XCJhPWluYWN0aXZlXFxyXFxuXCIsdC5ydHBTZW5kZXIpe3ZhciBvPXQucnRwU2VuZGVyLl9pbml0aWFsVHJhY2tJZHx8dC5ydHBTZW5kZXIudHJhY2suaWQ7dC5ydHBTZW5kZXIuX2luaXRpYWxUcmFja0lkPW87dmFyIGM9XCJtc2lkOlwiKyhhP2EuaWQ6XCItXCIpK1wiIFwiK28rXCJcXHJcXG5cIjtzKz1cImE9XCIrYyxzKz1cImE9c3NyYzpcIit0LnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0uc3NyYytcIiBcIitjLHQuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHgmJihzKz1cImE9c3NyYzpcIit0LnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4LnNzcmMrXCIgXCIrYyxzKz1cImE9c3NyYy1ncm91cDpGSUQgXCIrdC5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnNzcmMrXCIgXCIrdC5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eC5zc3JjK1wiXFxyXFxuXCIpfXJldHVybiBzKz1cImE9c3NyYzpcIit0LnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0uc3NyYytcIiBjbmFtZTpcIitlLmxvY2FsQ05hbWUrXCJcXHJcXG5cIix0LnJ0cFNlbmRlciYmdC5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eCYmKHMrPVwiYT1zc3JjOlwiK3Quc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHguc3NyYytcIiBjbmFtZTpcIitlLmxvY2FsQ05hbWUrXCJcXHJcXG5cIiksc31mdW5jdGlvbiBuKGUsdCl7dmFyIHI9ITE7cmV0dXJuKGU9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShlKSkpLmZpbHRlcihmdW5jdGlvbihlKXtpZihlJiYoZS51cmxzfHxlLnVybCkpe3ZhciBuPWUudXJsc3x8ZS51cmw7ZS51cmwmJiFlLnVybHMmJmNvbnNvbGUud2FybihcIlJUQ0ljZVNlcnZlci51cmwgaXMgZGVwcmVjYXRlZCEgVXNlIHVybHMgaW5zdGVhZC5cIik7dmFyIGE9XCJzdHJpbmdcIj09dHlwZW9mIG47cmV0dXJuIGEmJihuPVtuXSksbj1uLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gMD09PWUuaW5kZXhPZihcInR1cm46XCIpJiYtMSE9PWUuaW5kZXhPZihcInRyYW5zcG9ydD11ZHBcIikmJi0xPT09ZS5pbmRleE9mKFwidHVybjpbXCIpJiYhcj8ocj0hMCwhMCk6MD09PWUuaW5kZXhPZihcInN0dW46XCIpJiZ0Pj0xNDM5MyYmLTE9PT1lLmluZGV4T2YoXCI/dHJhbnNwb3J0PXVkcFwiKX0pLGRlbGV0ZSBlLnVybCxlLnVybHM9YT9uWzBdOm4sISFuLmxlbmd0aH19KX1mdW5jdGlvbiBhKGUsdCl7dmFyIHI9e2NvZGVjczpbXSxoZWFkZXJFeHRlbnNpb25zOltdLGZlY01lY2hhbmlzbXM6W119LG49ZnVuY3Rpb24oZSx0KXtlPXBhcnNlSW50KGUsMTApO2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKWlmKHRbcl0ucGF5bG9hZFR5cGU9PT1lfHx0W3JdLnByZWZlcnJlZFBheWxvYWRUeXBlPT09ZSlyZXR1cm4gdFtyXX0sYT1mdW5jdGlvbihlLHQscixhKXt2YXIgaT1uKGUucGFyYW1ldGVycy5hcHQscikscz1uKHQucGFyYW1ldGVycy5hcHQsYSk7cmV0dXJuIGkmJnMmJmkubmFtZS50b0xvd2VyQ2FzZSgpPT09cy5uYW1lLnRvTG93ZXJDYXNlKCl9O3JldHVybiBlLmNvZGVjcy5mb3JFYWNoKGZ1bmN0aW9uKG4pe2Zvcih2YXIgaT0wO2k8dC5jb2RlY3MubGVuZ3RoO2krKyl7dmFyIHM9dC5jb2RlY3NbaV07aWYobi5uYW1lLnRvTG93ZXJDYXNlKCk9PT1zLm5hbWUudG9Mb3dlckNhc2UoKSYmbi5jbG9ja1JhdGU9PT1zLmNsb2NrUmF0ZSl7aWYoXCJydHhcIj09PW4ubmFtZS50b0xvd2VyQ2FzZSgpJiZuLnBhcmFtZXRlcnMmJnMucGFyYW1ldGVycy5hcHQmJiFhKG4scyxlLmNvZGVjcyx0LmNvZGVjcykpY29udGludWU7KHM9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShzKSkpLm51bUNoYW5uZWxzPU1hdGgubWluKG4ubnVtQ2hhbm5lbHMscy5udW1DaGFubmVscyksci5jb2RlY3MucHVzaChzKSxzLnJ0Y3BGZWVkYmFjaz1zLnJ0Y3BGZWVkYmFjay5maWx0ZXIoZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTA7dDxuLnJ0Y3BGZWVkYmFjay5sZW5ndGg7dCsrKWlmKG4ucnRjcEZlZWRiYWNrW3RdLnR5cGU9PT1lLnR5cGUmJm4ucnRjcEZlZWRiYWNrW3RdLnBhcmFtZXRlcj09PWUucGFyYW1ldGVyKXJldHVybiEwO3JldHVybiExfSk7YnJlYWt9fX0pLGUuaGVhZGVyRXh0ZW5zaW9ucy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2Zvcih2YXIgbj0wO248dC5oZWFkZXJFeHRlbnNpb25zLmxlbmd0aDtuKyspe3ZhciBhPXQuaGVhZGVyRXh0ZW5zaW9uc1tuXTtpZihlLnVyaT09PWEudXJpKXtyLmhlYWRlckV4dGVuc2lvbnMucHVzaChhKTticmVha319fSkscn1mdW5jdGlvbiBpKGUsdCxyKXtyZXR1cm4tMSE9PXtvZmZlcjp7c2V0TG9jYWxEZXNjcmlwdGlvbjpbXCJzdGFibGVcIixcImhhdmUtbG9jYWwtb2ZmZXJcIl0sc2V0UmVtb3RlRGVzY3JpcHRpb246W1wic3RhYmxlXCIsXCJoYXZlLXJlbW90ZS1vZmZlclwiXX0sYW5zd2VyOntzZXRMb2NhbERlc2NyaXB0aW9uOltcImhhdmUtcmVtb3RlLW9mZmVyXCIsXCJoYXZlLWxvY2FsLXByYW5zd2VyXCJdLHNldFJlbW90ZURlc2NyaXB0aW9uOltcImhhdmUtbG9jYWwtb2ZmZXJcIixcImhhdmUtcmVtb3RlLXByYW5zd2VyXCJdfX1bdF1bZV0uaW5kZXhPZihyKX1mdW5jdGlvbiBzKGUsdCl7dmFyIHI9ZS5nZXRSZW1vdGVDYW5kaWRhdGVzKCkuZmluZChmdW5jdGlvbihlKXtyZXR1cm4gdC5mb3VuZGF0aW9uPT09ZS5mb3VuZGF0aW9uJiZ0LmlwPT09ZS5pcCYmdC5wb3J0PT09ZS5wb3J0JiZ0LnByaW9yaXR5PT09ZS5wcmlvcml0eSYmdC5wcm90b2NvbD09PWUucHJvdG9jb2wmJnQudHlwZT09PWUudHlwZX0pO3JldHVybiByfHxlLmFkZFJlbW90ZUNhbmRpZGF0ZSh0KSwhcn1mdW5jdGlvbiBvKGUsdCl7dmFyIHI9bmV3IEVycm9yKHQpO3JldHVybiByLm5hbWU9ZSxyLmNvZGU9e05vdFN1cHBvcnRlZEVycm9yOjksSW52YWxpZFN0YXRlRXJyb3I6MTEsSW52YWxpZEFjY2Vzc0Vycm9yOjE1LFR5cGVFcnJvcjp2b2lkIDAsT3BlcmF0aW9uRXJyb3I6dm9pZCAwfVtlXSxyfW1vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKGMsZCl7ZnVuY3Rpb24gcChlLHQpe3QuYWRkVHJhY2soZSksdC5kaXNwYXRjaEV2ZW50KG5ldyBjLk1lZGlhU3RyZWFtVHJhY2tFdmVudChcImFkZHRyYWNrXCIse3RyYWNrOmV9KSl9ZnVuY3Rpb24gbChlLHQscixuKXt2YXIgYT1uZXcgRXZlbnQoXCJ0cmFja1wiKTthLnRyYWNrPXQsYS5yZWNlaXZlcj1yLGEudHJhbnNjZWl2ZXI9e3JlY2VpdmVyOnJ9LGEuc3RyZWFtcz1uLGMuc2V0VGltZW91dChmdW5jdGlvbigpe2UuX2Rpc3BhdGNoRXZlbnQoXCJ0cmFja1wiLGEpfSl9dmFyIGY9ZnVuY3Rpb24odCl7dmFyIHI9dGhpcyxhPWRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtpZihbXCJhZGRFdmVudExpc3RlbmVyXCIsXCJyZW1vdmVFdmVudExpc3RlbmVyXCIsXCJkaXNwYXRjaEV2ZW50XCJdLmZvckVhY2goZnVuY3Rpb24oZSl7cltlXT1hW2VdLmJpbmQoYSl9KSx0aGlzLmNhblRyaWNrbGVJY2VDYW5kaWRhdGVzPW51bGwsdGhpcy5uZWVkTmVnb3RpYXRpb249ITEsdGhpcy5sb2NhbFN0cmVhbXM9W10sdGhpcy5yZW1vdGVTdHJlYW1zPVtdLHRoaXMuX2xvY2FsRGVzY3JpcHRpb249bnVsbCx0aGlzLl9yZW1vdGVEZXNjcmlwdGlvbj1udWxsLHRoaXMuc2lnbmFsaW5nU3RhdGU9XCJzdGFibGVcIix0aGlzLmljZUNvbm5lY3Rpb25TdGF0ZT1cIm5ld1wiLHRoaXMuY29ubmVjdGlvblN0YXRlPVwibmV3XCIsdGhpcy5pY2VHYXRoZXJpbmdTdGF0ZT1cIm5ld1wiLHQ9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0fHx7fSkpLHRoaXMudXNpbmdCdW5kbGU9XCJtYXgtYnVuZGxlXCI9PT10LmJ1bmRsZVBvbGljeSxcIm5lZ290aWF0ZVwiPT09dC5ydGNwTXV4UG9saWN5KXRocm93IG8oXCJOb3RTdXBwb3J0ZWRFcnJvclwiLFwicnRjcE11eFBvbGljeSAnbmVnb3RpYXRlJyBpcyBub3Qgc3VwcG9ydGVkXCIpO3N3aXRjaCh0LnJ0Y3BNdXhQb2xpY3l8fCh0LnJ0Y3BNdXhQb2xpY3k9XCJyZXF1aXJlXCIpLHQuaWNlVHJhbnNwb3J0UG9saWN5KXtjYXNlXCJhbGxcIjpjYXNlXCJyZWxheVwiOmJyZWFrO2RlZmF1bHQ6dC5pY2VUcmFuc3BvcnRQb2xpY3k9XCJhbGxcIn1zd2l0Y2godC5idW5kbGVQb2xpY3kpe2Nhc2VcImJhbGFuY2VkXCI6Y2FzZVwibWF4LWNvbXBhdFwiOmNhc2VcIm1heC1idW5kbGVcIjpicmVhaztkZWZhdWx0OnQuYnVuZGxlUG9saWN5PVwiYmFsYW5jZWRcIn1pZih0LmljZVNlcnZlcnM9bih0LmljZVNlcnZlcnN8fFtdLGQpLHRoaXMuX2ljZUdhdGhlcmVycz1bXSx0LmljZUNhbmRpZGF0ZVBvb2xTaXplKWZvcih2YXIgaT10LmljZUNhbmRpZGF0ZVBvb2xTaXplO2k+MDtpLS0pdGhpcy5faWNlR2F0aGVyZXJzLnB1c2gobmV3IGMuUlRDSWNlR2F0aGVyZXIoe2ljZVNlcnZlcnM6dC5pY2VTZXJ2ZXJzLGdhdGhlclBvbGljeTp0LmljZVRyYW5zcG9ydFBvbGljeX0pKTtlbHNlIHQuaWNlQ2FuZGlkYXRlUG9vbFNpemU9MDt0aGlzLl9jb25maWc9dCx0aGlzLnRyYW5zY2VpdmVycz1bXSx0aGlzLl9zZHBTZXNzaW9uSWQ9ZS5nZW5lcmF0ZVNlc3Npb25JZCgpLHRoaXMuX3NkcFNlc3Npb25WZXJzaW9uPTAsdGhpcy5fZHRsc1JvbGU9dm9pZCAwLHRoaXMuX2lzQ2xvc2VkPSExfTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZi5wcm90b3R5cGUsXCJsb2NhbERlc2NyaXB0aW9uXCIse2NvbmZpZ3VyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbG9jYWxEZXNjcmlwdGlvbn19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZi5wcm90b3R5cGUsXCJyZW1vdGVEZXNjcmlwdGlvblwiLHtjb25maWd1cmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JlbW90ZURlc2NyaXB0aW9ufX0pLGYucHJvdG90eXBlLm9uaWNlY2FuZGlkYXRlPW51bGwsZi5wcm90b3R5cGUub25hZGRzdHJlYW09bnVsbCxmLnByb3RvdHlwZS5vbnRyYWNrPW51bGwsZi5wcm90b3R5cGUub25yZW1vdmVzdHJlYW09bnVsbCxmLnByb3RvdHlwZS5vbnNpZ25hbGluZ3N0YXRlY2hhbmdlPW51bGwsZi5wcm90b3R5cGUub25pY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2U9bnVsbCxmLnByb3RvdHlwZS5vbmNvbm5lY3Rpb25zdGF0ZWNoYW5nZT1udWxsLGYucHJvdG90eXBlLm9uaWNlZ2F0aGVyaW5nc3RhdGVjaGFuZ2U9bnVsbCxmLnByb3RvdHlwZS5vbm5lZ290aWF0aW9ubmVlZGVkPW51bGwsZi5wcm90b3R5cGUub25kYXRhY2hhbm5lbD1udWxsLGYucHJvdG90eXBlLl9kaXNwYXRjaEV2ZW50PWZ1bmN0aW9uKGUsdCl7dGhpcy5faXNDbG9zZWR8fCh0aGlzLmRpc3BhdGNoRXZlbnQodCksXCJmdW5jdGlvblwiPT10eXBlb2YgdGhpc1tcIm9uXCIrZV0mJnRoaXNbXCJvblwiK2VdKHQpKX0sZi5wcm90b3R5cGUuX2VtaXRHYXRoZXJpbmdTdGF0ZUNoYW5nZT1mdW5jdGlvbigpe3ZhciBlPW5ldyBFdmVudChcImljZWdhdGhlcmluZ3N0YXRlY2hhbmdlXCIpO3RoaXMuX2Rpc3BhdGNoRXZlbnQoXCJpY2VnYXRoZXJpbmdzdGF0ZWNoYW5nZVwiLGUpfSxmLnByb3RvdHlwZS5nZXRDb25maWd1cmF0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbmZpZ30sZi5wcm90b3R5cGUuZ2V0TG9jYWxTdHJlYW1zPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubG9jYWxTdHJlYW1zfSxmLnByb3RvdHlwZS5nZXRSZW1vdGVTdHJlYW1zPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVtb3RlU3RyZWFtc30sZi5wcm90b3R5cGUuX2NyZWF0ZVRyYW5zY2VpdmVyPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy50cmFuc2NlaXZlcnMubGVuZ3RoPjAsbj17dHJhY2s6bnVsbCxpY2VHYXRoZXJlcjpudWxsLGljZVRyYW5zcG9ydDpudWxsLGR0bHNUcmFuc3BvcnQ6bnVsbCxsb2NhbENhcGFiaWxpdGllczpudWxsLHJlbW90ZUNhcGFiaWxpdGllczpudWxsLHJ0cFNlbmRlcjpudWxsLHJ0cFJlY2VpdmVyOm51bGwsa2luZDplLG1pZDpudWxsLHNlbmRFbmNvZGluZ1BhcmFtZXRlcnM6bnVsbCxyZWN2RW5jb2RpbmdQYXJhbWV0ZXJzOm51bGwsc3RyZWFtOm51bGwsYXNzb2NpYXRlZFJlbW90ZU1lZGlhU3RyZWFtczpbXSx3YW50UmVjZWl2ZTohMH07aWYodGhpcy51c2luZ0J1bmRsZSYmciluLmljZVRyYW5zcG9ydD10aGlzLnRyYW5zY2VpdmVyc1swXS5pY2VUcmFuc3BvcnQsbi5kdGxzVHJhbnNwb3J0PXRoaXMudHJhbnNjZWl2ZXJzWzBdLmR0bHNUcmFuc3BvcnQ7ZWxzZXt2YXIgYT10aGlzLl9jcmVhdGVJY2VBbmREdGxzVHJhbnNwb3J0cygpO24uaWNlVHJhbnNwb3J0PWEuaWNlVHJhbnNwb3J0LG4uZHRsc1RyYW5zcG9ydD1hLmR0bHNUcmFuc3BvcnR9cmV0dXJuIHR8fHRoaXMudHJhbnNjZWl2ZXJzLnB1c2gobiksbn0sZi5wcm90b3R5cGUuYWRkVHJhY2s9ZnVuY3Rpb24oZSx0KXtpZih0aGlzLl9pc0Nsb3NlZCl0aHJvdyBvKFwiSW52YWxpZFN0YXRlRXJyb3JcIixcIkF0dGVtcHRlZCB0byBjYWxsIGFkZFRyYWNrIG9uIGEgY2xvc2VkIHBlZXJjb25uZWN0aW9uLlwiKTt2YXIgcjtpZih0aGlzLnRyYW5zY2VpdmVycy5maW5kKGZ1bmN0aW9uKHQpe3JldHVybiB0LnRyYWNrPT09ZX0pKXRocm93IG8oXCJJbnZhbGlkQWNjZXNzRXJyb3JcIixcIlRyYWNrIGFscmVhZHkgZXhpc3RzLlwiKTtmb3IodmFyIG49MDtuPHRoaXMudHJhbnNjZWl2ZXJzLmxlbmd0aDtuKyspdGhpcy50cmFuc2NlaXZlcnNbbl0udHJhY2t8fHRoaXMudHJhbnNjZWl2ZXJzW25dLmtpbmQhPT1lLmtpbmR8fChyPXRoaXMudHJhbnNjZWl2ZXJzW25dKTtyZXR1cm4gcnx8KHI9dGhpcy5fY3JlYXRlVHJhbnNjZWl2ZXIoZS5raW5kKSksdGhpcy5fbWF5YmVGaXJlTmVnb3RpYXRpb25OZWVkZWQoKSwtMT09PXRoaXMubG9jYWxTdHJlYW1zLmluZGV4T2YodCkmJnRoaXMubG9jYWxTdHJlYW1zLnB1c2godCksci50cmFjaz1lLHIuc3RyZWFtPXQsci5ydHBTZW5kZXI9bmV3IGMuUlRDUnRwU2VuZGVyKGUsci5kdGxzVHJhbnNwb3J0KSxyLnJ0cFNlbmRlcn0sZi5wcm90b3R5cGUuYWRkU3RyZWFtPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYoZD49MTUwMjUpZS5nZXRUcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uKHIpe3QuYWRkVHJhY2socixlKX0pO2Vsc2V7dmFyIHI9ZS5jbG9uZSgpO2UuZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbihlLHQpe3ZhciBuPXIuZ2V0VHJhY2tzKClbdF07ZS5hZGRFdmVudExpc3RlbmVyKFwiZW5hYmxlZFwiLGZ1bmN0aW9uKGUpe24uZW5hYmxlZD1lLmVuYWJsZWR9KX0pLHIuZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbihlKXt0LmFkZFRyYWNrKGUscil9KX19LGYucHJvdG90eXBlLnJlbW92ZVRyYWNrPWZ1bmN0aW9uKGUpe2lmKHRoaXMuX2lzQ2xvc2VkKXRocm93IG8oXCJJbnZhbGlkU3RhdGVFcnJvclwiLFwiQXR0ZW1wdGVkIHRvIGNhbGwgcmVtb3ZlVHJhY2sgb24gYSBjbG9zZWQgcGVlcmNvbm5lY3Rpb24uXCIpO2lmKCEoZSBpbnN0YW5jZW9mIGMuUlRDUnRwU2VuZGVyKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQXJndW1lbnQgMSBvZiBSVENQZWVyQ29ubmVjdGlvbi5yZW1vdmVUcmFjayBkb2VzIG5vdCBpbXBsZW1lbnQgaW50ZXJmYWNlIFJUQ1J0cFNlbmRlci5cIik7dmFyIHQ9dGhpcy50cmFuc2NlaXZlcnMuZmluZChmdW5jdGlvbih0KXtyZXR1cm4gdC5ydHBTZW5kZXI9PT1lfSk7aWYoIXQpdGhyb3cgbyhcIkludmFsaWRBY2Nlc3NFcnJvclwiLFwiU2VuZGVyIHdhcyBub3QgY3JlYXRlZCBieSB0aGlzIGNvbm5lY3Rpb24uXCIpO3ZhciByPXQuc3RyZWFtO3QucnRwU2VuZGVyLnN0b3AoKSx0LnJ0cFNlbmRlcj1udWxsLHQudHJhY2s9bnVsbCx0LnN0cmVhbT1udWxsLC0xPT09dGhpcy50cmFuc2NlaXZlcnMubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlLnN0cmVhbX0pLmluZGV4T2YocikmJnRoaXMubG9jYWxTdHJlYW1zLmluZGV4T2Yocik+LTEmJnRoaXMubG9jYWxTdHJlYW1zLnNwbGljZSh0aGlzLmxvY2FsU3RyZWFtcy5pbmRleE9mKHIpLDEpLHRoaXMuX21heWJlRmlyZU5lZ290aWF0aW9uTmVlZGVkKCl9LGYucHJvdG90eXBlLnJlbW92ZVN0cmVhbT1mdW5jdGlvbihlKXt2YXIgdD10aGlzO2UuZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgcj10LmdldFNlbmRlcnMoKS5maW5kKGZ1bmN0aW9uKHQpe3JldHVybiB0LnRyYWNrPT09ZX0pO3ImJnQucmVtb3ZlVHJhY2socil9KX0sZi5wcm90b3R5cGUuZ2V0U2VuZGVycz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRyYW5zY2VpdmVycy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuISFlLnJ0cFNlbmRlcn0pLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS5ydHBTZW5kZXJ9KX0sZi5wcm90b3R5cGUuZ2V0UmVjZWl2ZXJzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHJhbnNjZWl2ZXJzLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4hIWUucnRwUmVjZWl2ZXJ9KS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUucnRwUmVjZWl2ZXJ9KX0sZi5wcm90b3R5cGUuX2NyZWF0ZUljZUdhdGhlcmVyPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztpZih0JiZlPjApcmV0dXJuIHRoaXMudHJhbnNjZWl2ZXJzWzBdLmljZUdhdGhlcmVyO2lmKHRoaXMuX2ljZUdhdGhlcmVycy5sZW5ndGgpcmV0dXJuIHRoaXMuX2ljZUdhdGhlcmVycy5zaGlmdCgpO3ZhciBuPW5ldyBjLlJUQ0ljZUdhdGhlcmVyKHtpY2VTZXJ2ZXJzOnRoaXMuX2NvbmZpZy5pY2VTZXJ2ZXJzLGdhdGhlclBvbGljeTp0aGlzLl9jb25maWcuaWNlVHJhbnNwb3J0UG9saWN5fSk7cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuLFwic3RhdGVcIix7dmFsdWU6XCJuZXdcIix3cml0YWJsZTohMH0pLHRoaXMudHJhbnNjZWl2ZXJzW2VdLmJ1ZmZlcmVkQ2FuZGlkYXRlRXZlbnRzPVtdLHRoaXMudHJhbnNjZWl2ZXJzW2VdLmJ1ZmZlckNhbmRpZGF0ZXM9ZnVuY3Rpb24odCl7dmFyIGE9IXQuY2FuZGlkYXRlfHwwPT09T2JqZWN0LmtleXModC5jYW5kaWRhdGUpLmxlbmd0aDtuLnN0YXRlPWE/XCJjb21wbGV0ZWRcIjpcImdhdGhlcmluZ1wiLG51bGwhPT1yLnRyYW5zY2VpdmVyc1tlXS5idWZmZXJlZENhbmRpZGF0ZUV2ZW50cyYmci50cmFuc2NlaXZlcnNbZV0uYnVmZmVyZWRDYW5kaWRhdGVFdmVudHMucHVzaCh0KX0sbi5hZGRFdmVudExpc3RlbmVyKFwibG9jYWxjYW5kaWRhdGVcIix0aGlzLnRyYW5zY2VpdmVyc1tlXS5idWZmZXJDYW5kaWRhdGVzKSxufSxmLnByb3RvdHlwZS5fZ2F0aGVyPWZ1bmN0aW9uKHQscil7dmFyIG49dGhpcyxhPXRoaXMudHJhbnNjZWl2ZXJzW3JdLmljZUdhdGhlcmVyO2lmKCFhLm9ubG9jYWxjYW5kaWRhdGUpe3ZhciBpPXRoaXMudHJhbnNjZWl2ZXJzW3JdLmJ1ZmZlcmVkQ2FuZGlkYXRlRXZlbnRzO3RoaXMudHJhbnNjZWl2ZXJzW3JdLmJ1ZmZlcmVkQ2FuZGlkYXRlRXZlbnRzPW51bGwsYS5yZW1vdmVFdmVudExpc3RlbmVyKFwibG9jYWxjYW5kaWRhdGVcIix0aGlzLnRyYW5zY2VpdmVyc1tyXS5idWZmZXJDYW5kaWRhdGVzKSxhLm9ubG9jYWxjYW5kaWRhdGU9ZnVuY3Rpb24oaSl7aWYoIShuLnVzaW5nQnVuZGxlJiZyPjApKXt2YXIgcz1uZXcgRXZlbnQoXCJpY2VjYW5kaWRhdGVcIik7cy5jYW5kaWRhdGU9e3NkcE1pZDp0LHNkcE1MaW5lSW5kZXg6cn07dmFyIG89aS5jYW5kaWRhdGUsYz0hb3x8MD09PU9iamVjdC5rZXlzKG8pLmxlbmd0aDtpZihjKVwibmV3XCIhPT1hLnN0YXRlJiZcImdhdGhlcmluZ1wiIT09YS5zdGF0ZXx8KGEuc3RhdGU9XCJjb21wbGV0ZWRcIik7ZWxzZXtcIm5ld1wiPT09YS5zdGF0ZSYmKGEuc3RhdGU9XCJnYXRoZXJpbmdcIiksby5jb21wb25lbnQ9MSxvLnVmcmFnPWEuZ2V0TG9jYWxQYXJhbWV0ZXJzKCkudXNlcm5hbWVGcmFnbWVudDt2YXIgZD1lLndyaXRlQ2FuZGlkYXRlKG8pO3MuY2FuZGlkYXRlPU9iamVjdC5hc3NpZ24ocy5jYW5kaWRhdGUsZS5wYXJzZUNhbmRpZGF0ZShkKSkscy5jYW5kaWRhdGUuY2FuZGlkYXRlPWQscy5jYW5kaWRhdGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJue2NhbmRpZGF0ZTpzLmNhbmRpZGF0ZS5jYW5kaWRhdGUsc2RwTWlkOnMuY2FuZGlkYXRlLnNkcE1pZCxzZHBNTGluZUluZGV4OnMuY2FuZGlkYXRlLnNkcE1MaW5lSW5kZXgsdXNlcm5hbWVGcmFnbWVudDpzLmNhbmRpZGF0ZS51c2VybmFtZUZyYWdtZW50fX19dmFyIHA9ZS5nZXRNZWRpYVNlY3Rpb25zKG4uX2xvY2FsRGVzY3JpcHRpb24uc2RwKTtwW3MuY2FuZGlkYXRlLnNkcE1MaW5lSW5kZXhdKz1jP1wiYT1lbmQtb2YtY2FuZGlkYXRlc1xcclxcblwiOlwiYT1cIitzLmNhbmRpZGF0ZS5jYW5kaWRhdGUrXCJcXHJcXG5cIixuLl9sb2NhbERlc2NyaXB0aW9uLnNkcD1lLmdldERlc2NyaXB0aW9uKG4uX2xvY2FsRGVzY3JpcHRpb24uc2RwKStwLmpvaW4oXCJcIik7dmFyIGw9bi50cmFuc2NlaXZlcnMuZXZlcnkoZnVuY3Rpb24oZSl7cmV0dXJuIGUuaWNlR2F0aGVyZXImJlwiY29tcGxldGVkXCI9PT1lLmljZUdhdGhlcmVyLnN0YXRlfSk7XCJnYXRoZXJpbmdcIiE9PW4uaWNlR2F0aGVyaW5nU3RhdGUmJihuLmljZUdhdGhlcmluZ1N0YXRlPVwiZ2F0aGVyaW5nXCIsbi5fZW1pdEdhdGhlcmluZ1N0YXRlQ2hhbmdlKCkpLGN8fG4uX2Rpc3BhdGNoRXZlbnQoXCJpY2VjYW5kaWRhdGVcIixzKSxsJiYobi5fZGlzcGF0Y2hFdmVudChcImljZWNhbmRpZGF0ZVwiLG5ldyBFdmVudChcImljZWNhbmRpZGF0ZVwiKSksbi5pY2VHYXRoZXJpbmdTdGF0ZT1cImNvbXBsZXRlXCIsbi5fZW1pdEdhdGhlcmluZ1N0YXRlQ2hhbmdlKCkpfX0sYy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2Eub25sb2NhbGNhbmRpZGF0ZShlKX0pfSwwKX19LGYucHJvdG90eXBlLl9jcmVhdGVJY2VBbmREdGxzVHJhbnNwb3J0cz1mdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1uZXcgYy5SVENJY2VUcmFuc3BvcnQobnVsbCk7dC5vbmljZXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7ZS5fdXBkYXRlSWNlQ29ubmVjdGlvblN0YXRlKCksZS5fdXBkYXRlQ29ubmVjdGlvblN0YXRlKCl9O3ZhciByPW5ldyBjLlJUQ0R0bHNUcmFuc3BvcnQodCk7cmV0dXJuIHIub25kdGxzc3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXtlLl91cGRhdGVDb25uZWN0aW9uU3RhdGUoKX0sci5vbmVycm9yPWZ1bmN0aW9uKCl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJzdGF0ZVwiLHt2YWx1ZTpcImZhaWxlZFwiLHdyaXRhYmxlOiEwfSksZS5fdXBkYXRlQ29ubmVjdGlvblN0YXRlKCl9LHtpY2VUcmFuc3BvcnQ6dCxkdGxzVHJhbnNwb3J0OnJ9fSxmLnByb3RvdHlwZS5fZGlzcG9zZUljZUFuZER0bHNUcmFuc3BvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMudHJhbnNjZWl2ZXJzW2VdLmljZUdhdGhlcmVyO3QmJihkZWxldGUgdC5vbmxvY2FsY2FuZGlkYXRlLGRlbGV0ZSB0aGlzLnRyYW5zY2VpdmVyc1tlXS5pY2VHYXRoZXJlcik7dmFyIHI9dGhpcy50cmFuc2NlaXZlcnNbZV0uaWNlVHJhbnNwb3J0O3ImJihkZWxldGUgci5vbmljZXN0YXRlY2hhbmdlLGRlbGV0ZSB0aGlzLnRyYW5zY2VpdmVyc1tlXS5pY2VUcmFuc3BvcnQpO3ZhciBuPXRoaXMudHJhbnNjZWl2ZXJzW2VdLmR0bHNUcmFuc3BvcnQ7biYmKGRlbGV0ZSBuLm9uZHRsc3N0YXRlY2hhbmdlLGRlbGV0ZSBuLm9uZXJyb3IsZGVsZXRlIHRoaXMudHJhbnNjZWl2ZXJzW2VdLmR0bHNUcmFuc3BvcnQpfSxmLnByb3RvdHlwZS5fdHJhbnNjZWl2ZT1mdW5jdGlvbih0LHIsbil7dmFyIGk9YSh0LmxvY2FsQ2FwYWJpbGl0aWVzLHQucmVtb3RlQ2FwYWJpbGl0aWVzKTtyJiZ0LnJ0cFNlbmRlciYmKGkuZW5jb2RpbmdzPXQuc2VuZEVuY29kaW5nUGFyYW1ldGVycyxpLnJ0Y3A9e2NuYW1lOmUubG9jYWxDTmFtZSxjb21wb3VuZDp0LnJ0Y3BQYXJhbWV0ZXJzLmNvbXBvdW5kfSx0LnJlY3ZFbmNvZGluZ1BhcmFtZXRlcnMubGVuZ3RoJiYoaS5ydGNwLnNzcmM9dC5yZWN2RW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnNzcmMpLHQucnRwU2VuZGVyLnNlbmQoaSkpLG4mJnQucnRwUmVjZWl2ZXImJmkuY29kZWNzLmxlbmd0aD4wJiYoXCJ2aWRlb1wiPT09dC5raW5kJiZ0LnJlY3ZFbmNvZGluZ1BhcmFtZXRlcnMmJmQ8MTUwMTkmJnQucmVjdkVuY29kaW5nUGFyYW1ldGVycy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2RlbGV0ZSBlLnJ0eH0pLHQucmVjdkVuY29kaW5nUGFyYW1ldGVycy5sZW5ndGg/aS5lbmNvZGluZ3M9dC5yZWN2RW5jb2RpbmdQYXJhbWV0ZXJzOmkuZW5jb2RpbmdzPVt7fV0saS5ydGNwPXtjb21wb3VuZDp0LnJ0Y3BQYXJhbWV0ZXJzLmNvbXBvdW5kfSx0LnJ0Y3BQYXJhbWV0ZXJzLmNuYW1lJiYoaS5ydGNwLmNuYW1lPXQucnRjcFBhcmFtZXRlcnMuY25hbWUpLHQuc2VuZEVuY29kaW5nUGFyYW1ldGVycy5sZW5ndGgmJihpLnJ0Y3Auc3NyYz10LnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0uc3NyYyksdC5ydHBSZWNlaXZlci5yZWNlaXZlKGkpKX0sZi5wcm90b3R5cGUuc2V0TG9jYWxEZXNjcmlwdGlvbj1mdW5jdGlvbih0KXt2YXIgcixuLHM9dGhpcztpZigtMT09PVtcIm9mZmVyXCIsXCJhbnN3ZXJcIl0uaW5kZXhPZih0LnR5cGUpKXJldHVybiBQcm9taXNlLnJlamVjdChvKFwiVHlwZUVycm9yXCIsJ1Vuc3VwcG9ydGVkIHR5cGUgXCInK3QudHlwZSsnXCInKSk7aWYoIWkoXCJzZXRMb2NhbERlc2NyaXB0aW9uXCIsdC50eXBlLHMuc2lnbmFsaW5nU3RhdGUpfHxzLl9pc0Nsb3NlZClyZXR1cm4gUHJvbWlzZS5yZWplY3QobyhcIkludmFsaWRTdGF0ZUVycm9yXCIsXCJDYW4gbm90IHNldCBsb2NhbCBcIit0LnR5cGUrXCIgaW4gc3RhdGUgXCIrcy5zaWduYWxpbmdTdGF0ZSkpO2lmKFwib2ZmZXJcIj09PXQudHlwZSlyPWUuc3BsaXRTZWN0aW9ucyh0LnNkcCksbj1yLnNoaWZ0KCksci5mb3JFYWNoKGZ1bmN0aW9uKHQscil7dmFyIG49ZS5wYXJzZVJ0cFBhcmFtZXRlcnModCk7cy50cmFuc2NlaXZlcnNbcl0ubG9jYWxDYXBhYmlsaXRpZXM9bn0pLHMudHJhbnNjZWl2ZXJzLmZvckVhY2goZnVuY3Rpb24oZSx0KXtzLl9nYXRoZXIoZS5taWQsdCl9KTtlbHNlIGlmKFwiYW5zd2VyXCI9PT10LnR5cGUpe3I9ZS5zcGxpdFNlY3Rpb25zKHMuX3JlbW90ZURlc2NyaXB0aW9uLnNkcCksbj1yLnNoaWZ0KCk7dmFyIGM9ZS5tYXRjaFByZWZpeChuLFwiYT1pY2UtbGl0ZVwiKS5sZW5ndGg+MDtyLmZvckVhY2goZnVuY3Rpb24odCxyKXt2YXIgaT1zLnRyYW5zY2VpdmVyc1tyXSxvPWkuaWNlR2F0aGVyZXIsZD1pLmljZVRyYW5zcG9ydCxwPWkuZHRsc1RyYW5zcG9ydCxsPWkubG9jYWxDYXBhYmlsaXRpZXMsZj1pLnJlbW90ZUNhcGFiaWxpdGllcztpZighKGUuaXNSZWplY3RlZCh0KSYmMD09PWUubWF0Y2hQcmVmaXgodCxcImE9YnVuZGxlLW9ubHlcIikubGVuZ3RoKSYmIWkucmVqZWN0ZWQpe3ZhciB1PWUuZ2V0SWNlUGFyYW1ldGVycyh0LG4pLHY9ZS5nZXREdGxzUGFyYW1ldGVycyh0LG4pO2MmJih2LnJvbGU9XCJzZXJ2ZXJcIikscy51c2luZ0J1bmRsZSYmMCE9PXJ8fChzLl9nYXRoZXIoaS5taWQsciksXCJuZXdcIj09PWQuc3RhdGUmJmQuc3RhcnQobyx1LGM/XCJjb250cm9sbGluZ1wiOlwiY29udHJvbGxlZFwiKSxcIm5ld1wiPT09cC5zdGF0ZSYmcC5zdGFydCh2KSk7dmFyIGg9YShsLGYpO3MuX3RyYW5zY2VpdmUoaSxoLmNvZGVjcy5sZW5ndGg+MCwhMSl9fSl9cmV0dXJuIHMuX2xvY2FsRGVzY3JpcHRpb249e3R5cGU6dC50eXBlLHNkcDp0LnNkcH0sXCJvZmZlclwiPT09dC50eXBlP3MuX3VwZGF0ZVNpZ25hbGluZ1N0YXRlKFwiaGF2ZS1sb2NhbC1vZmZlclwiKTpzLl91cGRhdGVTaWduYWxpbmdTdGF0ZShcInN0YWJsZVwiKSxQcm9taXNlLnJlc29sdmUoKX0sZi5wcm90b3R5cGUuc2V0UmVtb3RlRGVzY3JpcHRpb249ZnVuY3Rpb24odCl7dmFyIHI9dGhpcztpZigtMT09PVtcIm9mZmVyXCIsXCJhbnN3ZXJcIl0uaW5kZXhPZih0LnR5cGUpKXJldHVybiBQcm9taXNlLnJlamVjdChvKFwiVHlwZUVycm9yXCIsJ1Vuc3VwcG9ydGVkIHR5cGUgXCInK3QudHlwZSsnXCInKSk7aWYoIWkoXCJzZXRSZW1vdGVEZXNjcmlwdGlvblwiLHQudHlwZSxyLnNpZ25hbGluZ1N0YXRlKXx8ci5faXNDbG9zZWQpcmV0dXJuIFByb21pc2UucmVqZWN0KG8oXCJJbnZhbGlkU3RhdGVFcnJvclwiLFwiQ2FuIG5vdCBzZXQgcmVtb3RlIFwiK3QudHlwZStcIiBpbiBzdGF0ZSBcIityLnNpZ25hbGluZ1N0YXRlKSk7dmFyIG49e307ci5yZW1vdGVTdHJlYW1zLmZvckVhY2goZnVuY3Rpb24oZSl7bltlLmlkXT1lfSk7dmFyIGY9W10sdT1lLnNwbGl0U2VjdGlvbnModC5zZHApLHY9dS5zaGlmdCgpLGg9ZS5tYXRjaFByZWZpeCh2LFwiYT1pY2UtbGl0ZVwiKS5sZW5ndGg+MCxtPWUubWF0Y2hQcmVmaXgodixcImE9Z3JvdXA6QlVORExFIFwiKS5sZW5ndGg+MDtyLnVzaW5nQnVuZGxlPW07dmFyIGc9ZS5tYXRjaFByZWZpeCh2LFwiYT1pY2Utb3B0aW9uczpcIilbMF07cmV0dXJuIHIuY2FuVHJpY2tsZUljZUNhbmRpZGF0ZXM9ISFnJiZnLnN1YnN0cigxNCkuc3BsaXQoXCIgXCIpLmluZGV4T2YoXCJ0cmlja2xlXCIpPj0wLHUuZm9yRWFjaChmdW5jdGlvbihpLG8pe3ZhciBsPWUuc3BsaXRMaW5lcyhpKSx1PWUuZ2V0S2luZChpKSxnPWUuaXNSZWplY3RlZChpKSYmMD09PWUubWF0Y2hQcmVmaXgoaSxcImE9YnVuZGxlLW9ubHlcIikubGVuZ3RoLHk9bFswXS5zdWJzdHIoMikuc3BsaXQoXCIgXCIpWzJdLFM9ZS5nZXREaXJlY3Rpb24oaSx2KSxUPWUucGFyc2VNc2lkKGkpLEU9ZS5nZXRNaWQoaSl8fGUuZ2VuZXJhdGVJZGVudGlmaWVyKCk7aWYoZ3x8XCJhcHBsaWNhdGlvblwiPT09dSYmKFwiRFRMUy9TQ1RQXCI9PT15fHxcIlVEUC9EVExTL1NDVFBcIj09PXkpKXIudHJhbnNjZWl2ZXJzW29dPXttaWQ6RSxraW5kOnUscHJvdG9jb2w6eSxyZWplY3RlZDohMH07ZWxzZXt2YXIgQyxQLHcsUixfLGssYix4LEQ7IWcmJnIudHJhbnNjZWl2ZXJzW29dJiZyLnRyYW5zY2VpdmVyc1tvXS5yZWplY3RlZCYmKHIudHJhbnNjZWl2ZXJzW29dPXIuX2NyZWF0ZVRyYW5zY2VpdmVyKHUsITApKTt2YXIgSSxMLE09ZS5wYXJzZVJ0cFBhcmFtZXRlcnMoaSk7Z3x8KEk9ZS5nZXRJY2VQYXJhbWV0ZXJzKGksdiksKEw9ZS5nZXREdGxzUGFyYW1ldGVycyhpLHYpKS5yb2xlPVwiY2xpZW50XCIpLGI9ZS5wYXJzZVJ0cEVuY29kaW5nUGFyYW1ldGVycyhpKTt2YXIgTz1lLnBhcnNlUnRjcFBhcmFtZXRlcnMoaSksRz1lLm1hdGNoUHJlZml4KGksXCJhPWVuZC1vZi1jYW5kaWRhdGVzXCIsdikubGVuZ3RoPjAsaj1lLm1hdGNoUHJlZml4KGksXCJhPWNhbmRpZGF0ZTpcIikubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBlLnBhcnNlQ2FuZGlkYXRlKHQpfSkuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiAxPT09ZS5jb21wb25lbnR9KTtpZigoXCJvZmZlclwiPT09dC50eXBlfHxcImFuc3dlclwiPT09dC50eXBlKSYmIWcmJm0mJm8+MCYmci50cmFuc2NlaXZlcnNbb10mJihyLl9kaXNwb3NlSWNlQW5kRHRsc1RyYW5zcG9ydHMobyksci50cmFuc2NlaXZlcnNbb10uaWNlR2F0aGVyZXI9ci50cmFuc2NlaXZlcnNbMF0uaWNlR2F0aGVyZXIsci50cmFuc2NlaXZlcnNbb10uaWNlVHJhbnNwb3J0PXIudHJhbnNjZWl2ZXJzWzBdLmljZVRyYW5zcG9ydCxyLnRyYW5zY2VpdmVyc1tvXS5kdGxzVHJhbnNwb3J0PXIudHJhbnNjZWl2ZXJzWzBdLmR0bHNUcmFuc3BvcnQsci50cmFuc2NlaXZlcnNbb10ucnRwU2VuZGVyJiZyLnRyYW5zY2VpdmVyc1tvXS5ydHBTZW5kZXIuc2V0VHJhbnNwb3J0KHIudHJhbnNjZWl2ZXJzWzBdLmR0bHNUcmFuc3BvcnQpLHIudHJhbnNjZWl2ZXJzW29dLnJ0cFJlY2VpdmVyJiZyLnRyYW5zY2VpdmVyc1tvXS5ydHBSZWNlaXZlci5zZXRUcmFuc3BvcnQoci50cmFuc2NlaXZlcnNbMF0uZHRsc1RyYW5zcG9ydCkpLFwib2ZmZXJcIiE9PXQudHlwZXx8Zyl7aWYoXCJhbnN3ZXJcIj09PXQudHlwZSYmIWcpe1A9KEM9ci50cmFuc2NlaXZlcnNbb10pLmljZUdhdGhlcmVyLHc9Qy5pY2VUcmFuc3BvcnQsUj1DLmR0bHNUcmFuc3BvcnQsXz1DLnJ0cFJlY2VpdmVyLGs9Qy5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzLHg9Qy5sb2NhbENhcGFiaWxpdGllcyxyLnRyYW5zY2VpdmVyc1tvXS5yZWN2RW5jb2RpbmdQYXJhbWV0ZXJzPWIsci50cmFuc2NlaXZlcnNbb10ucmVtb3RlQ2FwYWJpbGl0aWVzPU0sci50cmFuc2NlaXZlcnNbb10ucnRjcFBhcmFtZXRlcnM9TyxqLmxlbmd0aCYmXCJuZXdcIj09PXcuc3RhdGUmJighaCYmIUd8fG0mJjAhPT1vP2ouZm9yRWFjaChmdW5jdGlvbihlKXtzKEMuaWNlVHJhbnNwb3J0LGUpfSk6dy5zZXRSZW1vdGVDYW5kaWRhdGVzKGopKSxtJiYwIT09b3x8KFwibmV3XCI9PT13LnN0YXRlJiZ3LnN0YXJ0KFAsSSxcImNvbnRyb2xsaW5nXCIpLFwibmV3XCI9PT1SLnN0YXRlJiZSLnN0YXJ0KEwpKSwhYShDLmxvY2FsQ2FwYWJpbGl0aWVzLEMucmVtb3RlQ2FwYWJpbGl0aWVzKS5jb2RlY3MuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVyblwicnR4XCI9PT1lLm5hbWUudG9Mb3dlckNhc2UoKX0pLmxlbmd0aCYmQy5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eCYmZGVsZXRlIEMuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHgsci5fdHJhbnNjZWl2ZShDLFwic2VuZHJlY3ZcIj09PVN8fFwicmVjdm9ubHlcIj09PVMsXCJzZW5kcmVjdlwiPT09U3x8XCJzZW5kb25seVwiPT09UyksIV98fFwic2VuZHJlY3ZcIiE9PVMmJlwic2VuZG9ubHlcIiE9PVM/ZGVsZXRlIEMucnRwUmVjZWl2ZXI6KEQ9Xy50cmFjayxUPyhuW1Quc3RyZWFtXXx8KG5bVC5zdHJlYW1dPW5ldyBjLk1lZGlhU3RyZWFtKSxwKEQsbltULnN0cmVhbV0pLGYucHVzaChbRCxfLG5bVC5zdHJlYW1dXSkpOihuLmRlZmF1bHR8fChuLmRlZmF1bHQ9bmV3IGMuTWVkaWFTdHJlYW0pLHAoRCxuLmRlZmF1bHQpLGYucHVzaChbRCxfLG4uZGVmYXVsdF0pKSl9fWVsc2V7KEM9ci50cmFuc2NlaXZlcnNbb118fHIuX2NyZWF0ZVRyYW5zY2VpdmVyKHUpKS5taWQ9RSxDLmljZUdhdGhlcmVyfHwoQy5pY2VHYXRoZXJlcj1yLl9jcmVhdGVJY2VHYXRoZXJlcihvLG0pKSxqLmxlbmd0aCYmXCJuZXdcIj09PUMuaWNlVHJhbnNwb3J0LnN0YXRlJiYoIUd8fG0mJjAhPT1vP2ouZm9yRWFjaChmdW5jdGlvbihlKXtzKEMuaWNlVHJhbnNwb3J0LGUpfSk6Qy5pY2VUcmFuc3BvcnQuc2V0UmVtb3RlQ2FuZGlkYXRlcyhqKSkseD1jLlJUQ1J0cFJlY2VpdmVyLmdldENhcGFiaWxpdGllcyh1KSxkPDE1MDE5JiYoeC5jb2RlY3M9eC5jb2RlY3MuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVyblwicnR4XCIhPT1lLm5hbWV9KSksaz1DLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnN8fFt7c3NyYzoxMDAxKigyKm8rMil9XTt2YXIgTixBPSExO2lmKFwic2VuZHJlY3ZcIj09PVN8fFwic2VuZG9ubHlcIj09PVMpe2lmKEE9IUMucnRwUmVjZWl2ZXIsXz1DLnJ0cFJlY2VpdmVyfHxuZXcgYy5SVENSdHBSZWNlaXZlcihDLmR0bHNUcmFuc3BvcnQsdSksQSlEPV8udHJhY2ssVCYmXCItXCI9PT1ULnN0cmVhbXx8KFQ/KG5bVC5zdHJlYW1dfHwobltULnN0cmVhbV09bmV3IGMuTWVkaWFTdHJlYW0sT2JqZWN0LmRlZmluZVByb3BlcnR5KG5bVC5zdHJlYW1dLFwiaWRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFQuc3RyZWFtfX0pKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoRCxcImlkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiBULnRyYWNrfX0pLE49bltULnN0cmVhbV0pOihuLmRlZmF1bHR8fChuLmRlZmF1bHQ9bmV3IGMuTWVkaWFTdHJlYW0pLE49bi5kZWZhdWx0KSksTiYmKHAoRCxOKSxDLmFzc29jaWF0ZWRSZW1vdGVNZWRpYVN0cmVhbXMucHVzaChOKSksZi5wdXNoKFtELF8sTl0pfWVsc2UgQy5ydHBSZWNlaXZlciYmQy5ydHBSZWNlaXZlci50cmFjayYmKEMuYXNzb2NpYXRlZFJlbW90ZU1lZGlhU3RyZWFtcy5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciB0LHIsbj1lLmdldFRyYWNrcygpLmZpbmQoZnVuY3Rpb24oZSl7cmV0dXJuIGUuaWQ9PT1DLnJ0cFJlY2VpdmVyLnRyYWNrLmlkfSk7biYmKHQ9biwocj1lKS5yZW1vdmVUcmFjayh0KSxyLmRpc3BhdGNoRXZlbnQobmV3IGMuTWVkaWFTdHJlYW1UcmFja0V2ZW50KFwicmVtb3ZldHJhY2tcIix7dHJhY2s6dH0pKSl9KSxDLmFzc29jaWF0ZWRSZW1vdGVNZWRpYVN0cmVhbXM9W10pO0MubG9jYWxDYXBhYmlsaXRpZXM9eCxDLnJlbW90ZUNhcGFiaWxpdGllcz1NLEMucnRwUmVjZWl2ZXI9XyxDLnJ0Y3BQYXJhbWV0ZXJzPU8sQy5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzPWssQy5yZWN2RW5jb2RpbmdQYXJhbWV0ZXJzPWIsci5fdHJhbnNjZWl2ZShyLnRyYW5zY2VpdmVyc1tvXSwhMSxBKX19fSksdm9pZCAwPT09ci5fZHRsc1JvbGUmJihyLl9kdGxzUm9sZT1cIm9mZmVyXCI9PT10LnR5cGU/XCJhY3RpdmVcIjpcInBhc3NpdmVcIiksci5fcmVtb3RlRGVzY3JpcHRpb249e3R5cGU6dC50eXBlLHNkcDp0LnNkcH0sXCJvZmZlclwiPT09dC50eXBlP3IuX3VwZGF0ZVNpZ25hbGluZ1N0YXRlKFwiaGF2ZS1yZW1vdGUtb2ZmZXJcIik6ci5fdXBkYXRlU2lnbmFsaW5nU3RhdGUoXCJzdGFibGVcIiksT2JqZWN0LmtleXMobikuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgdD1uW2VdO2lmKHQuZ2V0VHJhY2tzKCkubGVuZ3RoKXtpZigtMT09PXIucmVtb3RlU3RyZWFtcy5pbmRleE9mKHQpKXtyLnJlbW90ZVN0cmVhbXMucHVzaCh0KTt2YXIgYT1uZXcgRXZlbnQoXCJhZGRzdHJlYW1cIik7YS5zdHJlYW09dCxjLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtyLl9kaXNwYXRjaEV2ZW50KFwiYWRkc3RyZWFtXCIsYSl9KX1mLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIG49ZVswXSxhPWVbMV07dC5pZD09PWVbMl0uaWQmJmwocixuLGEsW3RdKX0pfX0pLGYuZm9yRWFjaChmdW5jdGlvbihlKXtlWzJdfHxsKHIsZVswXSxlWzFdLFtdKX0pLGMuc2V0VGltZW91dChmdW5jdGlvbigpe3ImJnIudHJhbnNjZWl2ZXJzJiZyLnRyYW5zY2VpdmVycy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UuaWNlVHJhbnNwb3J0JiZcIm5ld1wiPT09ZS5pY2VUcmFuc3BvcnQuc3RhdGUmJmUuaWNlVHJhbnNwb3J0LmdldFJlbW90ZUNhbmRpZGF0ZXMoKS5sZW5ndGg+MCYmKGNvbnNvbGUud2FybihcIlRpbWVvdXQgZm9yIGFkZFJlbW90ZUNhbmRpZGF0ZS4gQ29uc2lkZXIgc2VuZGluZyBhbiBlbmQtb2YtY2FuZGlkYXRlcyBub3RpZmljYXRpb25cIiksZS5pY2VUcmFuc3BvcnQuYWRkUmVtb3RlQ2FuZGlkYXRlKHt9KSl9KX0sNGUzKSxQcm9taXNlLnJlc29sdmUoKX0sZi5wcm90b3R5cGUuY2xvc2U9ZnVuY3Rpb24oKXt0aGlzLnRyYW5zY2VpdmVycy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UuaWNlVHJhbnNwb3J0JiZlLmljZVRyYW5zcG9ydC5zdG9wKCksZS5kdGxzVHJhbnNwb3J0JiZlLmR0bHNUcmFuc3BvcnQuc3RvcCgpLGUucnRwU2VuZGVyJiZlLnJ0cFNlbmRlci5zdG9wKCksZS5ydHBSZWNlaXZlciYmZS5ydHBSZWNlaXZlci5zdG9wKCl9KSx0aGlzLl9pc0Nsb3NlZD0hMCx0aGlzLl91cGRhdGVTaWduYWxpbmdTdGF0ZShcImNsb3NlZFwiKX0sZi5wcm90b3R5cGUuX3VwZGF0ZVNpZ25hbGluZ1N0YXRlPWZ1bmN0aW9uKGUpe3RoaXMuc2lnbmFsaW5nU3RhdGU9ZTt2YXIgdD1uZXcgRXZlbnQoXCJzaWduYWxpbmdzdGF0ZWNoYW5nZVwiKTt0aGlzLl9kaXNwYXRjaEV2ZW50KFwic2lnbmFsaW5nc3RhdGVjaGFuZ2VcIix0KX0sZi5wcm90b3R5cGUuX21heWJlRmlyZU5lZ290aWF0aW9uTmVlZGVkPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztcInN0YWJsZVwiPT09dGhpcy5zaWduYWxpbmdTdGF0ZSYmITAhPT10aGlzLm5lZWROZWdvdGlhdGlvbiYmKHRoaXMubmVlZE5lZ290aWF0aW9uPSEwLGMuc2V0VGltZW91dChmdW5jdGlvbigpe2lmKGUubmVlZE5lZ290aWF0aW9uKXtlLm5lZWROZWdvdGlhdGlvbj0hMTt2YXIgdD1uZXcgRXZlbnQoXCJuZWdvdGlhdGlvbm5lZWRlZFwiKTtlLl9kaXNwYXRjaEV2ZW50KFwibmVnb3RpYXRpb25uZWVkZWRcIix0KX19LDApKX0sZi5wcm90b3R5cGUuX3VwZGF0ZUljZUNvbm5lY3Rpb25TdGF0ZT1mdW5jdGlvbigpe3ZhciBlLHQ9e25ldzowLGNsb3NlZDowLGNoZWNraW5nOjAsY29ubmVjdGVkOjAsY29tcGxldGVkOjAsZGlzY29ubmVjdGVkOjAsZmFpbGVkOjB9O2lmKHRoaXMudHJhbnNjZWl2ZXJzLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5pY2VUcmFuc3BvcnQmJiFlLnJlamVjdGVkJiZ0W2UuaWNlVHJhbnNwb3J0LnN0YXRlXSsrfSksZT1cIm5ld1wiLHQuZmFpbGVkPjA/ZT1cImZhaWxlZFwiOnQuY2hlY2tpbmc+MD9lPVwiY2hlY2tpbmdcIjp0LmRpc2Nvbm5lY3RlZD4wP2U9XCJkaXNjb25uZWN0ZWRcIjp0Lm5ldz4wP2U9XCJuZXdcIjp0LmNvbm5lY3RlZD4wP2U9XCJjb25uZWN0ZWRcIjp0LmNvbXBsZXRlZD4wJiYoZT1cImNvbXBsZXRlZFwiKSxlIT09dGhpcy5pY2VDb25uZWN0aW9uU3RhdGUpe3RoaXMuaWNlQ29ubmVjdGlvblN0YXRlPWU7dmFyIHI9bmV3IEV2ZW50KFwiaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlXCIpO3RoaXMuX2Rpc3BhdGNoRXZlbnQoXCJpY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2VcIixyKX19LGYucHJvdG90eXBlLl91cGRhdGVDb25uZWN0aW9uU3RhdGU9ZnVuY3Rpb24oKXt2YXIgZSx0PXtuZXc6MCxjbG9zZWQ6MCxjb25uZWN0aW5nOjAsY29ubmVjdGVkOjAsY29tcGxldGVkOjAsZGlzY29ubmVjdGVkOjAsZmFpbGVkOjB9O2lmKHRoaXMudHJhbnNjZWl2ZXJzLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5pY2VUcmFuc3BvcnQmJmUuZHRsc1RyYW5zcG9ydCYmIWUucmVqZWN0ZWQmJih0W2UuaWNlVHJhbnNwb3J0LnN0YXRlXSsrLHRbZS5kdGxzVHJhbnNwb3J0LnN0YXRlXSsrKX0pLHQuY29ubmVjdGVkKz10LmNvbXBsZXRlZCxlPVwibmV3XCIsdC5mYWlsZWQ+MD9lPVwiZmFpbGVkXCI6dC5jb25uZWN0aW5nPjA/ZT1cImNvbm5lY3RpbmdcIjp0LmRpc2Nvbm5lY3RlZD4wP2U9XCJkaXNjb25uZWN0ZWRcIjp0Lm5ldz4wP2U9XCJuZXdcIjp0LmNvbm5lY3RlZD4wJiYoZT1cImNvbm5lY3RlZFwiKSxlIT09dGhpcy5jb25uZWN0aW9uU3RhdGUpe3RoaXMuY29ubmVjdGlvblN0YXRlPWU7dmFyIHI9bmV3IEV2ZW50KFwiY29ubmVjdGlvbnN0YXRlY2hhbmdlXCIpO3RoaXMuX2Rpc3BhdGNoRXZlbnQoXCJjb25uZWN0aW9uc3RhdGVjaGFuZ2VcIixyKX19LGYucHJvdG90eXBlLmNyZWF0ZU9mZmVyPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztpZih0Ll9pc0Nsb3NlZClyZXR1cm4gUHJvbWlzZS5yZWplY3QobyhcIkludmFsaWRTdGF0ZUVycm9yXCIsXCJDYW4gbm90IGNhbGwgY3JlYXRlT2ZmZXIgYWZ0ZXIgY2xvc2VcIikpO3ZhciBuPXQudHJhbnNjZWl2ZXJzLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm5cImF1ZGlvXCI9PT1lLmtpbmR9KS5sZW5ndGgsYT10LnRyYW5zY2VpdmVycy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuXCJ2aWRlb1wiPT09ZS5raW5kfSkubGVuZ3RoLGk9YXJndW1lbnRzWzBdO2lmKGkpe2lmKGkubWFuZGF0b3J5fHxpLm9wdGlvbmFsKXRocm93IG5ldyBUeXBlRXJyb3IoXCJMZWdhY3kgbWFuZGF0b3J5L29wdGlvbmFsIGNvbnN0cmFpbnRzIG5vdCBzdXBwb3J0ZWQuXCIpO3ZvaWQgMCE9PWkub2ZmZXJUb1JlY2VpdmVBdWRpbyYmKG49ITA9PT1pLm9mZmVyVG9SZWNlaXZlQXVkaW8/MTohMT09PWkub2ZmZXJUb1JlY2VpdmVBdWRpbz8wOmkub2ZmZXJUb1JlY2VpdmVBdWRpbyksdm9pZCAwIT09aS5vZmZlclRvUmVjZWl2ZVZpZGVvJiYoYT0hMD09PWkub2ZmZXJUb1JlY2VpdmVWaWRlbz8xOiExPT09aS5vZmZlclRvUmVjZWl2ZVZpZGVvPzA6aS5vZmZlclRvUmVjZWl2ZVZpZGVvKX1mb3IodC50cmFuc2NlaXZlcnMuZm9yRWFjaChmdW5jdGlvbihlKXtcImF1ZGlvXCI9PT1lLmtpbmQ/LS1uPDAmJihlLndhbnRSZWNlaXZlPSExKTpcInZpZGVvXCI9PT1lLmtpbmQmJi0tYTwwJiYoZS53YW50UmVjZWl2ZT0hMSl9KTtuPjB8fGE+MDspbj4wJiYodC5fY3JlYXRlVHJhbnNjZWl2ZXIoXCJhdWRpb1wiKSxuLS0pLGE+MCYmKHQuX2NyZWF0ZVRyYW5zY2VpdmVyKFwidmlkZW9cIiksYS0tKTt2YXIgcz1lLndyaXRlU2Vzc2lvbkJvaWxlcnBsYXRlKHQuX3NkcFNlc3Npb25JZCx0Ll9zZHBTZXNzaW9uVmVyc2lvbisrKTt0LnRyYW5zY2VpdmVycy5mb3JFYWNoKGZ1bmN0aW9uKHIsbil7dmFyIGE9ci50cmFjayxpPXIua2luZCxzPXIubWlkfHxlLmdlbmVyYXRlSWRlbnRpZmllcigpO3IubWlkPXMsci5pY2VHYXRoZXJlcnx8KHIuaWNlR2F0aGVyZXI9dC5fY3JlYXRlSWNlR2F0aGVyZXIobix0LnVzaW5nQnVuZGxlKSk7dmFyIG89Yy5SVENSdHBTZW5kZXIuZ2V0Q2FwYWJpbGl0aWVzKGkpO2Q8MTUwMTkmJihvLmNvZGVjcz1vLmNvZGVjcy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuXCJydHhcIiE9PWUubmFtZX0pKSxvLmNvZGVjcy5mb3JFYWNoKGZ1bmN0aW9uKGUpe1wiSDI2NFwiPT09ZS5uYW1lJiZ2b2lkIDA9PT1lLnBhcmFtZXRlcnNbXCJsZXZlbC1hc3ltbWV0cnktYWxsb3dlZFwiXSYmKGUucGFyYW1ldGVyc1tcImxldmVsLWFzeW1tZXRyeS1hbGxvd2VkXCJdPVwiMVwiKSxyLnJlbW90ZUNhcGFiaWxpdGllcyYmci5yZW1vdGVDYXBhYmlsaXRpZXMuY29kZWNzJiZyLnJlbW90ZUNhcGFiaWxpdGllcy5jb2RlY3MuZm9yRWFjaChmdW5jdGlvbih0KXtlLm5hbWUudG9Mb3dlckNhc2UoKT09PXQubmFtZS50b0xvd2VyQ2FzZSgpJiZlLmNsb2NrUmF0ZT09PXQuY2xvY2tSYXRlJiYoZS5wcmVmZXJyZWRQYXlsb2FkVHlwZT10LnBheWxvYWRUeXBlKX0pfSksby5oZWFkZXJFeHRlbnNpb25zLmZvckVhY2goZnVuY3Rpb24oZSl7KHIucmVtb3RlQ2FwYWJpbGl0aWVzJiZyLnJlbW90ZUNhcGFiaWxpdGllcy5oZWFkZXJFeHRlbnNpb25zfHxbXSkuZm9yRWFjaChmdW5jdGlvbih0KXtlLnVyaT09PXQudXJpJiYoZS5pZD10LmlkKX0pfSk7dmFyIHA9ci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzfHxbe3NzcmM6MTAwMSooMipuKzEpfV07YSYmZD49MTUwMTkmJlwidmlkZW9cIj09PWkmJiFwWzBdLnJ0eCYmKHBbMF0ucnR4PXtzc3JjOnBbMF0uc3NyYysxfSksci53YW50UmVjZWl2ZSYmKHIucnRwUmVjZWl2ZXI9bmV3IGMuUlRDUnRwUmVjZWl2ZXIoci5kdGxzVHJhbnNwb3J0LGkpKSxyLmxvY2FsQ2FwYWJpbGl0aWVzPW8sci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzPXB9KSxcIm1heC1jb21wYXRcIiE9PXQuX2NvbmZpZy5idW5kbGVQb2xpY3kmJihzKz1cImE9Z3JvdXA6QlVORExFIFwiK3QudHJhbnNjZWl2ZXJzLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS5taWR9KS5qb2luKFwiIFwiKStcIlxcclxcblwiKSxzKz1cImE9aWNlLW9wdGlvbnM6dHJpY2tsZVxcclxcblwiLHQudHJhbnNjZWl2ZXJzLmZvckVhY2goZnVuY3Rpb24obixhKXtzKz1yKG4sbi5sb2NhbENhcGFiaWxpdGllcyxcIm9mZmVyXCIsbi5zdHJlYW0sdC5fZHRsc1JvbGUpLHMrPVwiYT1ydGNwLXJzaXplXFxyXFxuXCIsIW4uaWNlR2F0aGVyZXJ8fFwibmV3XCI9PT10LmljZUdhdGhlcmluZ1N0YXRlfHwwIT09YSYmdC51c2luZ0J1bmRsZXx8KG4uaWNlR2F0aGVyZXIuZ2V0TG9jYWxDYW5kaWRhdGVzKCkuZm9yRWFjaChmdW5jdGlvbih0KXt0LmNvbXBvbmVudD0xLHMrPVwiYT1cIitlLndyaXRlQ2FuZGlkYXRlKHQpK1wiXFxyXFxuXCJ9KSxcImNvbXBsZXRlZFwiPT09bi5pY2VHYXRoZXJlci5zdGF0ZSYmKHMrPVwiYT1lbmQtb2YtY2FuZGlkYXRlc1xcclxcblwiKSl9KTt2YXIgcD1uZXcgYy5SVENTZXNzaW9uRGVzY3JpcHRpb24oe3R5cGU6XCJvZmZlclwiLHNkcDpzfSk7cmV0dXJuIFByb21pc2UucmVzb2x2ZShwKX0sZi5wcm90b3R5cGUuY3JlYXRlQW5zd2VyPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztpZih0Ll9pc0Nsb3NlZClyZXR1cm4gUHJvbWlzZS5yZWplY3QobyhcIkludmFsaWRTdGF0ZUVycm9yXCIsXCJDYW4gbm90IGNhbGwgY3JlYXRlQW5zd2VyIGFmdGVyIGNsb3NlXCIpKTtpZihcImhhdmUtcmVtb3RlLW9mZmVyXCIhPT10LnNpZ25hbGluZ1N0YXRlJiZcImhhdmUtbG9jYWwtcHJhbnN3ZXJcIiE9PXQuc2lnbmFsaW5nU3RhdGUpcmV0dXJuIFByb21pc2UucmVqZWN0KG8oXCJJbnZhbGlkU3RhdGVFcnJvclwiLFwiQ2FuIG5vdCBjYWxsIGNyZWF0ZUFuc3dlciBpbiBzaWduYWxpbmdTdGF0ZSBcIit0LnNpZ25hbGluZ1N0YXRlKSk7dmFyIG49ZS53cml0ZVNlc3Npb25Cb2lsZXJwbGF0ZSh0Ll9zZHBTZXNzaW9uSWQsdC5fc2RwU2Vzc2lvblZlcnNpb24rKyk7dC51c2luZ0J1bmRsZSYmKG4rPVwiYT1ncm91cDpCVU5ETEUgXCIrdC50cmFuc2NlaXZlcnMubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlLm1pZH0pLmpvaW4oXCIgXCIpK1wiXFxyXFxuXCIpLG4rPVwiYT1pY2Utb3B0aW9uczp0cmlja2xlXFxyXFxuXCI7dmFyIGk9ZS5nZXRNZWRpYVNlY3Rpb25zKHQuX3JlbW90ZURlc2NyaXB0aW9uLnNkcCkubGVuZ3RoO3QudHJhbnNjZWl2ZXJzLmZvckVhY2goZnVuY3Rpb24oZSxzKXtpZighKHMrMT5pKSl7aWYoZS5yZWplY3RlZClyZXR1cm5cImFwcGxpY2F0aW9uXCI9PT1lLmtpbmQ/XCJEVExTL1NDVFBcIj09PWUucHJvdG9jb2w/bis9XCJtPWFwcGxpY2F0aW9uIDAgRFRMUy9TQ1RQIDUwMDBcXHJcXG5cIjpuKz1cIm09YXBwbGljYXRpb24gMCBcIitlLnByb3RvY29sK1wiIHdlYnJ0Yy1kYXRhY2hhbm5lbFxcclxcblwiOlwiYXVkaW9cIj09PWUua2luZD9uKz1cIm09YXVkaW8gMCBVRFAvVExTL1JUUC9TQVZQRiAwXFxyXFxuYT1ydHBtYXA6MCBQQ01VLzgwMDBcXHJcXG5cIjpcInZpZGVvXCI9PT1lLmtpbmQmJihuKz1cIm09dmlkZW8gMCBVRFAvVExTL1JUUC9TQVZQRiAxMjBcXHJcXG5hPXJ0cG1hcDoxMjAgVlA4LzkwMDAwXFxyXFxuXCIpLHZvaWQobis9XCJjPUlOIElQNCAwLjAuMC4wXFxyXFxuYT1pbmFjdGl2ZVxcclxcbmE9bWlkOlwiK2UubWlkK1wiXFxyXFxuXCIpO3ZhciBvO2lmKGUuc3RyZWFtKVwiYXVkaW9cIj09PWUua2luZD9vPWUuc3RyZWFtLmdldEF1ZGlvVHJhY2tzKClbMF06XCJ2aWRlb1wiPT09ZS5raW5kJiYobz1lLnN0cmVhbS5nZXRWaWRlb1RyYWNrcygpWzBdKSxvJiZkPj0xNTAxOSYmXCJ2aWRlb1wiPT09ZS5raW5kJiYhZS5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eCYmKGUuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHg9e3NzcmM6ZS5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnNzcmMrMX0pO3ZhciBjPWEoZS5sb2NhbENhcGFiaWxpdGllcyxlLnJlbW90ZUNhcGFiaWxpdGllcyk7IWMuY29kZWNzLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm5cInJ0eFwiPT09ZS5uYW1lLnRvTG93ZXJDYXNlKCl9KS5sZW5ndGgmJmUuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHgmJmRlbGV0ZSBlLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4LG4rPXIoZSxjLFwiYW5zd2VyXCIsZS5zdHJlYW0sdC5fZHRsc1JvbGUpLGUucnRjcFBhcmFtZXRlcnMmJmUucnRjcFBhcmFtZXRlcnMucmVkdWNlZFNpemUmJihuKz1cImE9cnRjcC1yc2l6ZVxcclxcblwiKX19KTt2YXIgcz1uZXcgYy5SVENTZXNzaW9uRGVzY3JpcHRpb24oe3R5cGU6XCJhbnN3ZXJcIixzZHA6bn0pO3JldHVybiBQcm9taXNlLnJlc29sdmUocyl9LGYucHJvdG90eXBlLmFkZEljZUNhbmRpZGF0ZT1mdW5jdGlvbih0KXt2YXIgcixuPXRoaXM7cmV0dXJuIHQmJnZvaWQgMD09PXQuc2RwTUxpbmVJbmRleCYmIXQuc2RwTWlkP1Byb21pc2UucmVqZWN0KG5ldyBUeXBlRXJyb3IoXCJzZHBNTGluZUluZGV4IG9yIHNkcE1pZCByZXF1aXJlZFwiKSk6bmV3IFByb21pc2UoZnVuY3Rpb24oYSxpKXtpZighbi5fcmVtb3RlRGVzY3JpcHRpb24pcmV0dXJuIGkobyhcIkludmFsaWRTdGF0ZUVycm9yXCIsXCJDYW4gbm90IGFkZCBJQ0UgY2FuZGlkYXRlIHdpdGhvdXQgYSByZW1vdGUgZGVzY3JpcHRpb25cIikpO2lmKHQmJlwiXCIhPT10LmNhbmRpZGF0ZSl7dmFyIGM9dC5zZHBNTGluZUluZGV4O2lmKHQuc2RwTWlkKWZvcih2YXIgZD0wO2Q8bi50cmFuc2NlaXZlcnMubGVuZ3RoO2QrKylpZihuLnRyYW5zY2VpdmVyc1tkXS5taWQ9PT10LnNkcE1pZCl7Yz1kO2JyZWFrfXZhciBwPW4udHJhbnNjZWl2ZXJzW2NdO2lmKCFwKXJldHVybiBpKG8oXCJPcGVyYXRpb25FcnJvclwiLFwiQ2FuIG5vdCBhZGQgSUNFIGNhbmRpZGF0ZVwiKSk7aWYocC5yZWplY3RlZClyZXR1cm4gYSgpO3ZhciBsPU9iamVjdC5rZXlzKHQuY2FuZGlkYXRlKS5sZW5ndGg+MD9lLnBhcnNlQ2FuZGlkYXRlKHQuY2FuZGlkYXRlKTp7fTtpZihcInRjcFwiPT09bC5wcm90b2NvbCYmKDA9PT1sLnBvcnR8fDk9PT1sLnBvcnQpKXJldHVybiBhKCk7aWYobC5jb21wb25lbnQmJjEhPT1sLmNvbXBvbmVudClyZXR1cm4gYSgpO2lmKCgwPT09Y3x8Yz4wJiZwLmljZVRyYW5zcG9ydCE9PW4udHJhbnNjZWl2ZXJzWzBdLmljZVRyYW5zcG9ydCkmJiFzKHAuaWNlVHJhbnNwb3J0LGwpKXJldHVybiBpKG8oXCJPcGVyYXRpb25FcnJvclwiLFwiQ2FuIG5vdCBhZGQgSUNFIGNhbmRpZGF0ZVwiKSk7dmFyIGY9dC5jYW5kaWRhdGUudHJpbSgpOzA9PT1mLmluZGV4T2YoXCJhPVwiKSYmKGY9Zi5zdWJzdHIoMikpLChyPWUuZ2V0TWVkaWFTZWN0aW9ucyhuLl9yZW1vdGVEZXNjcmlwdGlvbi5zZHApKVtjXSs9XCJhPVwiKyhsLnR5cGU/ZjpcImVuZC1vZi1jYW5kaWRhdGVzXCIpK1wiXFxyXFxuXCIsbi5fcmVtb3RlRGVzY3JpcHRpb24uc2RwPWUuZ2V0RGVzY3JpcHRpb24obi5fcmVtb3RlRGVzY3JpcHRpb24uc2RwKStyLmpvaW4oXCJcIil9ZWxzZSBmb3IodmFyIHU9MDt1PG4udHJhbnNjZWl2ZXJzLmxlbmd0aCYmKG4udHJhbnNjZWl2ZXJzW3VdLnJlamVjdGVkfHwobi50cmFuc2NlaXZlcnNbdV0uaWNlVHJhbnNwb3J0LmFkZFJlbW90ZUNhbmRpZGF0ZSh7fSksKHI9ZS5nZXRNZWRpYVNlY3Rpb25zKG4uX3JlbW90ZURlc2NyaXB0aW9uLnNkcCkpW3VdKz1cImE9ZW5kLW9mLWNhbmRpZGF0ZXNcXHJcXG5cIixuLl9yZW1vdGVEZXNjcmlwdGlvbi5zZHA9ZS5nZXREZXNjcmlwdGlvbihuLl9yZW1vdGVEZXNjcmlwdGlvbi5zZHApK3Iuam9pbihcIlwiKSwhbi51c2luZ0J1bmRsZSkpO3UrKyk7YSgpfSl9LGYucHJvdG90eXBlLmdldFN0YXRzPWZ1bmN0aW9uKGUpe2lmKGUmJmUgaW5zdGFuY2VvZiBjLk1lZGlhU3RyZWFtVHJhY2spe3ZhciB0PW51bGw7aWYodGhpcy50cmFuc2NlaXZlcnMuZm9yRWFjaChmdW5jdGlvbihyKXtyLnJ0cFNlbmRlciYmci5ydHBTZW5kZXIudHJhY2s9PT1lP3Q9ci5ydHBTZW5kZXI6ci5ydHBSZWNlaXZlciYmci5ydHBSZWNlaXZlci50cmFjaz09PWUmJih0PXIucnRwUmVjZWl2ZXIpfSksIXQpdGhyb3cgbyhcIkludmFsaWRBY2Nlc3NFcnJvclwiLFwiSW52YWxpZCBzZWxlY3Rvci5cIik7cmV0dXJuIHQuZ2V0U3RhdHMoKX12YXIgcj1bXTtyZXR1cm4gdGhpcy50cmFuc2NlaXZlcnMuZm9yRWFjaChmdW5jdGlvbihlKXtbXCJydHBTZW5kZXJcIixcInJ0cFJlY2VpdmVyXCIsXCJpY2VHYXRoZXJlclwiLFwiaWNlVHJhbnNwb3J0XCIsXCJkdGxzVHJhbnNwb3J0XCJdLmZvckVhY2goZnVuY3Rpb24odCl7ZVt0XSYmci5wdXNoKGVbdF0uZ2V0U3RhdHMoKSl9KX0pLFByb21pc2UuYWxsKHIpLnRoZW4oZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IE1hcDtyZXR1cm4gZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UuZm9yRWFjaChmdW5jdGlvbihlKXt0LnNldChlLmlkLGUpfSl9KSx0fSl9O1tcIlJUQ1J0cFNlbmRlclwiLFwiUlRDUnRwUmVjZWl2ZXJcIixcIlJUQ0ljZUdhdGhlcmVyXCIsXCJSVENJY2VUcmFuc3BvcnRcIixcIlJUQ0R0bHNUcmFuc3BvcnRcIl0uZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgcj1jW2VdO2lmKHImJnIucHJvdG90eXBlJiZyLnByb3RvdHlwZS5nZXRTdGF0cyl7dmFyIG49ci5wcm90b3R5cGUuZ2V0U3RhdHM7ci5wcm90b3R5cGUuZ2V0U3RhdHM9ZnVuY3Rpb24oKXtyZXR1cm4gbi5hcHBseSh0aGlzKS50aGVuKGZ1bmN0aW9uKGUpe3ZhciByPW5ldyBNYXA7cmV0dXJuIE9iamVjdC5rZXlzKGUpLmZvckVhY2goZnVuY3Rpb24obil7ZVtuXS50eXBlPXQoZVtuXSksci5zZXQobixlW25dKX0pLHJ9KX19fSk7dmFyIHU9W1wiY3JlYXRlT2ZmZXJcIixcImNyZWF0ZUFuc3dlclwiXTtyZXR1cm4gdS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciB0PWYucHJvdG90eXBlW2VdO2YucHJvdG90eXBlW2VdPWZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzO3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIGVbMF18fFwiZnVuY3Rpb25cIj09dHlwZW9mIGVbMV0/dC5hcHBseSh0aGlzLFthcmd1bWVudHNbMl1dKS50aGVuKGZ1bmN0aW9uKHQpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGVbMF0mJmVbMF0uYXBwbHkobnVsbCxbdF0pfSxmdW5jdGlvbih0KXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBlWzFdJiZlWzFdLmFwcGx5KG51bGwsW3RdKX0pOnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfX0pLCh1PVtcInNldExvY2FsRGVzY3JpcHRpb25cIixcInNldFJlbW90ZURlc2NyaXB0aW9uXCIsXCJhZGRJY2VDYW5kaWRhdGVcIl0pLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHQ9Zi5wcm90b3R5cGVbZV07Zi5wcm90b3R5cGVbZV09ZnVuY3Rpb24oKXt2YXIgZT1hcmd1bWVudHM7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgZVsxXXx8XCJmdW5jdGlvblwiPT10eXBlb2YgZVsyXT90LmFwcGx5KHRoaXMsYXJndW1lbnRzKS50aGVuKGZ1bmN0aW9uKCl7XCJmdW5jdGlvblwiPT10eXBlb2YgZVsxXSYmZVsxXS5hcHBseShudWxsKX0sZnVuY3Rpb24odCl7XCJmdW5jdGlvblwiPT10eXBlb2YgZVsyXSYmZVsyXS5hcHBseShudWxsLFt0XSl9KTp0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX19KSxbXCJnZXRTdGF0c1wiXS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciB0PWYucHJvdG90eXBlW2VdO2YucHJvdG90eXBlW2VdPWZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzO3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIGVbMV0/dC5hcHBseSh0aGlzLGFyZ3VtZW50cykudGhlbihmdW5jdGlvbigpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGVbMV0mJmVbMV0uYXBwbHkobnVsbCl9KTp0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX19KSxmfTtcbn0se1wic2RwXCI6XCJZSHZoXCJ9XSxcIllkS3hcIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cykge1xuXCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZShlKXt2YXIgcj1lJiZlLm5hdmlnYXRvcix0PXIubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYS5iaW5kKHIubWVkaWFEZXZpY2VzKTtyLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWE9ZnVuY3Rpb24oZSl7cmV0dXJuIHQoZSkuY2F0Y2goZnVuY3Rpb24oZSl7cmV0dXJuIFByb21pc2UucmVqZWN0KGZ1bmN0aW9uKGUpe3JldHVybntuYW1lOntQZXJtaXNzaW9uRGVuaWVkRXJyb3I6XCJOb3RBbGxvd2VkRXJyb3JcIn1bZS5uYW1lXXx8ZS5uYW1lLG1lc3NhZ2U6ZS5tZXNzYWdlLGNvbnN0cmFpbnQ6ZS5jb25zdHJhaW50LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubmFtZX19fShlKSl9KX19T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5zaGltR2V0VXNlck1lZGlhPWU7XG59LHt9XSxcIlAzYlZcIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cykge1xuXCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZShlKXtcImdldERpc3BsYXlNZWRpYVwiaW4gZS5uYXZpZ2F0b3ImJmUubmF2aWdhdG9yLm1lZGlhRGV2aWNlcyYmKGUubmF2aWdhdG9yLm1lZGlhRGV2aWNlcyYmXCJnZXREaXNwbGF5TWVkaWFcImluIGUubmF2aWdhdG9yLm1lZGlhRGV2aWNlc3x8KGUubmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXREaXNwbGF5TWVkaWE9ZS5uYXZpZ2F0b3IuZ2V0RGlzcGxheU1lZGlhLmJpbmQoZS5uYXZpZ2F0b3IpKSl9T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5zaGltR2V0RGlzcGxheU1lZGlhPWU7XG59LHt9XSxcIlhSaWNcIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cykge1xuXCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5zaGltUGVlckNvbm5lY3Rpb249cCxleHBvcnRzLnNoaW1SZXBsYWNlVHJhY2s9YSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcInNoaW1HZXRVc2VyTWVkaWFcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbi5zaGltR2V0VXNlck1lZGlhfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwic2hpbUdldERpc3BsYXlNZWRpYVwiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBpLnNoaW1HZXREaXNwbGF5TWVkaWF9fSk7dmFyIGU9cyhyZXF1aXJlKFwiLi4vdXRpbHNcIikpLHQ9cmVxdWlyZShcIi4vZmlsdGVyaWNlc2VydmVyc1wiKSxyPW8ocmVxdWlyZShcInJ0Y3BlZXJjb25uZWN0aW9uLXNoaW1cIikpLG49cmVxdWlyZShcIi4vZ2V0dXNlcm1lZGlhXCIpLGk9cmVxdWlyZShcIi4vZ2V0ZGlzcGxheW1lZGlhXCIpO2Z1bmN0aW9uIG8oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fWZ1bmN0aW9uIGMoKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBXZWFrTWFwKXJldHVybiBudWxsO3ZhciBlPW5ldyBXZWFrTWFwO3JldHVybiBjPWZ1bmN0aW9uKCl7cmV0dXJuIGV9LGV9ZnVuY3Rpb24gcyhlKXtpZihlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7aWYobnVsbD09PWV8fFwib2JqZWN0XCIhPXR5cGVvZiBlJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlKXJldHVybntkZWZhdWx0OmV9O3ZhciB0PWMoKTtpZih0JiZ0LmhhcyhlKSlyZXR1cm4gdC5nZXQoZSk7dmFyIHI9e30sbj1PYmplY3QuZGVmaW5lUHJvcGVydHkmJk9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7Zm9yKHZhciBpIGluIGUpaWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsaSkpe3ZhciBvPW4/T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLGkpOm51bGw7byYmKG8uZ2V0fHxvLnNldCk/T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsaSxvKTpyW2ldPWVbaV19cmV0dXJuIHIuZGVmYXVsdD1lLHQmJnQuc2V0KGUscikscn1mdW5jdGlvbiBwKG4saSl7aWYobi5SVENJY2VHYXRoZXJlciYmKG4uUlRDSWNlQ2FuZGlkYXRlfHwobi5SVENJY2VDYW5kaWRhdGU9ZnVuY3Rpb24oZSl7cmV0dXJuIGV9KSxuLlJUQ1Nlc3Npb25EZXNjcmlwdGlvbnx8KG4uUlRDU2Vzc2lvbkRlc2NyaXB0aW9uPWZ1bmN0aW9uKGUpe3JldHVybiBlfSksaS52ZXJzaW9uPDE1MDI1KSl7dmFyIG89T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihuLk1lZGlhU3RyZWFtVHJhY2sucHJvdG90eXBlLFwiZW5hYmxlZFwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkobi5NZWRpYVN0cmVhbVRyYWNrLnByb3RvdHlwZSxcImVuYWJsZWRcIix7c2V0OmZ1bmN0aW9uKGUpe28uc2V0LmNhbGwodGhpcyxlKTt2YXIgdD1uZXcgRXZlbnQoXCJlbmFibGVkXCIpO3QuZW5hYmxlZD1lLHRoaXMuZGlzcGF0Y2hFdmVudCh0KX19KX0hbi5SVENSdHBTZW5kZXJ8fFwiZHRtZlwiaW4gbi5SVENSdHBTZW5kZXIucHJvdG90eXBlfHxPYmplY3QuZGVmaW5lUHJvcGVydHkobi5SVENSdHBTZW5kZXIucHJvdG90eXBlLFwiZHRtZlwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdm9pZCAwPT09dGhpcy5fZHRtZiYmKFwiYXVkaW9cIj09PXRoaXMudHJhY2sua2luZD90aGlzLl9kdG1mPW5ldyBuLlJUQ0R0bWZTZW5kZXIodGhpcyk6XCJ2aWRlb1wiPT09dGhpcy50cmFjay5raW5kJiYodGhpcy5fZHRtZj1udWxsKSksdGhpcy5fZHRtZn19KSxuLlJUQ0R0bWZTZW5kZXImJiFuLlJUQ0RUTUZTZW5kZXImJihuLlJUQ0RUTUZTZW5kZXI9bi5SVENEdG1mU2VuZGVyKTt2YXIgYz0oMCxyLmRlZmF1bHQpKG4saS52ZXJzaW9uKTtuLlJUQ1BlZXJDb25uZWN0aW9uPWZ1bmN0aW9uKHIpe3JldHVybiByJiZyLmljZVNlcnZlcnMmJihyLmljZVNlcnZlcnM9KDAsdC5maWx0ZXJJY2VTZXJ2ZXJzKShyLmljZVNlcnZlcnMsaS52ZXJzaW9uKSxlLmxvZyhcIklDRSBzZXJ2ZXJzIGFmdGVyIGZpbHRlcmluZzpcIixyLmljZVNlcnZlcnMpKSxuZXcgYyhyKX0sbi5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGU9Yy5wcm90b3R5cGV9ZnVuY3Rpb24gYShlKXshZS5SVENSdHBTZW5kZXJ8fFwicmVwbGFjZVRyYWNrXCJpbiBlLlJUQ1J0cFNlbmRlci5wcm90b3R5cGV8fChlLlJUQ1J0cFNlbmRlci5wcm90b3R5cGUucmVwbGFjZVRyYWNrPWUuUlRDUnRwU2VuZGVyLnByb3RvdHlwZS5zZXRUcmFjayl9XG59LHtcIi4uL3V0aWxzXCI6XCJpU3hDXCIsXCIuL2ZpbHRlcmljZXNlcnZlcnNcIjpcIk5aMUNcIixcInJ0Y3BlZXJjb25uZWN0aW9uLXNoaW1cIjpcIk5KMnVcIixcIi4vZ2V0dXNlcm1lZGlhXCI6XCJZZEt4XCIsXCIuL2dldGRpc3BsYXltZWRpYVwiOlwiUDNiVlwifV0sXCJHelN2XCI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpIHtcblwidXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGV4cG9ydHMuc2hpbUdldFVzZXJNZWRpYT1uO3ZhciBlPW8ocmVxdWlyZShcIi4uL3V0aWxzXCIpKTtmdW5jdGlvbiB0KCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgV2Vha01hcClyZXR1cm4gbnVsbDt2YXIgZT1uZXcgV2Vha01hcDtyZXR1cm4gdD1mdW5jdGlvbigpe3JldHVybiBlfSxlfWZ1bmN0aW9uIG8oZSl7aWYoZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO2lmKG51bGw9PT1lfHxcIm9iamVjdFwiIT10eXBlb2YgZSYmXCJmdW5jdGlvblwiIT10eXBlb2YgZSlyZXR1cm57ZGVmYXVsdDplfTt2YXIgbz10KCk7aWYobyYmby5oYXMoZSkpcmV0dXJuIG8uZ2V0KGUpO3ZhciByPXt9LG49T2JqZWN0LmRlZmluZVByb3BlcnR5JiZPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO2Zvcih2YXIgaSBpbiBlKWlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLGkpKXt2YXIgYT1uP09iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSxpKTpudWxsO2EmJihhLmdldHx8YS5zZXQpP09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLGksYSk6cltpXT1lW2ldfXJldHVybiByLmRlZmF1bHQ9ZSxvJiZvLnNldChlLHIpLHJ9ZnVuY3Rpb24gcihlKXtyZXR1cm4ocj1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlwic3ltYm9sXCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24oZSl7cmV0dXJuIHR5cGVvZiBlfTpmdW5jdGlvbihlKXtyZXR1cm4gZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZlLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZlIT09U3ltYm9sLnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiBlfSkoZSl9ZnVuY3Rpb24gbih0LG8pe3ZhciBuPXQmJnQubmF2aWdhdG9yLGk9dCYmdC5NZWRpYVN0cmVhbVRyYWNrO2lmKG4uZ2V0VXNlck1lZGlhPWZ1bmN0aW9uKHQsbyxyKXtlLmRlcHJlY2F0ZWQoXCJuYXZpZ2F0b3IuZ2V0VXNlck1lZGlhXCIsXCJuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYVwiKSxuLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEodCkudGhlbihvLHIpfSwhKG8udmVyc2lvbj41NSYmXCJhdXRvR2FpbkNvbnRyb2xcImluIG4ubWVkaWFEZXZpY2VzLmdldFN1cHBvcnRlZENvbnN0cmFpbnRzKCkpKXt2YXIgYT1mdW5jdGlvbihlLHQsbyl7dCBpbiBlJiYhKG8gaW4gZSkmJihlW29dPWVbdF0sZGVsZXRlIGVbdF0pfSxzPW4ubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYS5iaW5kKG4ubWVkaWFEZXZpY2VzKTtpZihuLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWE9ZnVuY3Rpb24oZSl7cmV0dXJuXCJvYmplY3RcIj09PXIoZSkmJlwib2JqZWN0XCI9PT1yKGUuYXVkaW8pJiYoZT1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGUpKSxhKGUuYXVkaW8sXCJhdXRvR2FpbkNvbnRyb2xcIixcIm1vekF1dG9HYWluQ29udHJvbFwiKSxhKGUuYXVkaW8sXCJub2lzZVN1cHByZXNzaW9uXCIsXCJtb3pOb2lzZVN1cHByZXNzaW9uXCIpKSxzKGUpfSxpJiZpLnByb3RvdHlwZS5nZXRTZXR0aW5ncyl7dmFyIHA9aS5wcm90b3R5cGUuZ2V0U2V0dGluZ3M7aS5wcm90b3R5cGUuZ2V0U2V0dGluZ3M9ZnVuY3Rpb24oKXt2YXIgZT1wLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gYShlLFwibW96QXV0b0dhaW5Db250cm9sXCIsXCJhdXRvR2FpbkNvbnRyb2xcIiksYShlLFwibW96Tm9pc2VTdXBwcmVzc2lvblwiLFwibm9pc2VTdXBwcmVzc2lvblwiKSxlfX1pZihpJiZpLnByb3RvdHlwZS5hcHBseUNvbnN0cmFpbnRzKXt2YXIgdT1pLnByb3RvdHlwZS5hcHBseUNvbnN0cmFpbnRzO2kucHJvdG90eXBlLmFwcGx5Q29uc3RyYWludHM9ZnVuY3Rpb24oZSl7cmV0dXJuXCJhdWRpb1wiPT09dGhpcy5raW5kJiZcIm9iamVjdFwiPT09cihlKSYmKGU9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShlKSksYShlLFwiYXV0b0dhaW5Db250cm9sXCIsXCJtb3pBdXRvR2FpbkNvbnRyb2xcIiksYShlLFwibm9pc2VTdXBwcmVzc2lvblwiLFwibW96Tm9pc2VTdXBwcmVzc2lvblwiKSksdS5hcHBseSh0aGlzLFtlXSl9fX19XG59LHtcIi4uL3V0aWxzXCI6XCJpU3hDXCJ9XSxcIlV1R1VcIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cykge1xuXCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZShlLGkpe2UubmF2aWdhdG9yLm1lZGlhRGV2aWNlcyYmXCJnZXREaXNwbGF5TWVkaWFcImluIGUubmF2aWdhdG9yLm1lZGlhRGV2aWNlc3x8ZS5uYXZpZ2F0b3IubWVkaWFEZXZpY2VzJiYoZS5uYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldERpc3BsYXlNZWRpYT1mdW5jdGlvbihhKXtpZighYXx8IWEudmlkZW8pe3ZhciB0PW5ldyBET01FeGNlcHRpb24oXCJnZXREaXNwbGF5TWVkaWEgd2l0aG91dCB2aWRlbyBjb25zdHJhaW50cyBpcyB1bmRlZmluZWRcIik7cmV0dXJuIHQubmFtZT1cIk5vdEZvdW5kRXJyb3JcIix0LmNvZGU9OCxQcm9taXNlLnJlamVjdCh0KX1yZXR1cm4hMD09PWEudmlkZW8/YS52aWRlbz17bWVkaWFTb3VyY2U6aX06YS52aWRlby5tZWRpYVNvdXJjZT1pLGUubmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoYSl9KX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLnNoaW1HZXREaXNwbGF5TWVkaWE9ZTtcbn0se31dLFwiRnpkclwiOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKSB7XG5cInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLnNoaW1PblRyYWNrPXMsZXhwb3J0cy5zaGltUGVlckNvbm5lY3Rpb249YyxleHBvcnRzLnNoaW1TZW5kZXJHZXRTdGF0cz1wLGV4cG9ydHMuc2hpbVJlY2VpdmVyR2V0U3RhdHM9dSxleHBvcnRzLnNoaW1SZW1vdmVTdHJlYW09ZixleHBvcnRzLnNoaW1SVENEYXRhQ2hhbm5lbD1kLGV4cG9ydHMuc2hpbUFkZFRyYW5zY2VpdmVyPUMsZXhwb3J0cy5zaGltR2V0UGFyYW1ldGVycz15LGV4cG9ydHMuc2hpbUNyZWF0ZU9mZmVyPWwsZXhwb3J0cy5zaGltQ3JlYXRlQW5zd2VyPW0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJzaGltR2V0VXNlck1lZGlhXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHQuc2hpbUdldFVzZXJNZWRpYX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcInNoaW1HZXREaXNwbGF5TWVkaWFcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbi5zaGltR2V0RGlzcGxheU1lZGlhfX0pO3ZhciBlPW8ocmVxdWlyZShcIi4uL3V0aWxzXCIpKSx0PXJlcXVpcmUoXCIuL2dldHVzZXJtZWRpYVwiKSxuPXJlcXVpcmUoXCIuL2dldGRpc3BsYXltZWRpYVwiKTtmdW5jdGlvbiByKCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgV2Vha01hcClyZXR1cm4gbnVsbDt2YXIgZT1uZXcgV2Vha01hcDtyZXR1cm4gcj1mdW5jdGlvbigpe3JldHVybiBlfSxlfWZ1bmN0aW9uIG8oZSl7aWYoZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO2lmKG51bGw9PT1lfHxcIm9iamVjdFwiIT10eXBlb2YgZSYmXCJmdW5jdGlvblwiIT10eXBlb2YgZSlyZXR1cm57ZGVmYXVsdDplfTt2YXIgdD1yKCk7aWYodCYmdC5oYXMoZSkpcmV0dXJuIHQuZ2V0KGUpO3ZhciBuPXt9LG89T2JqZWN0LmRlZmluZVByb3BlcnR5JiZPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO2Zvcih2YXIgaSBpbiBlKWlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLGkpKXt2YXIgYT1vP09iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSxpKTpudWxsO2EmJihhLmdldHx8YS5zZXQpP09iamVjdC5kZWZpbmVQcm9wZXJ0eShuLGksYSk6bltpXT1lW2ldfXJldHVybiBuLmRlZmF1bHQ9ZSx0JiZ0LnNldChlLG4pLG59ZnVuY3Rpb24gaShlLHQsbil7cmV0dXJuIHQgaW4gZT9PYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0LHt2YWx1ZTpuLGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwfSk6ZVt0XT1uLGV9ZnVuY3Rpb24gYShlKXtyZXR1cm4oYT1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlwic3ltYm9sXCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24oZSl7cmV0dXJuIHR5cGVvZiBlfTpmdW5jdGlvbihlKXtyZXR1cm4gZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZlLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZlIT09U3ltYm9sLnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiBlfSkoZSl9ZnVuY3Rpb24gcyhlKXtcIm9iamVjdFwiPT09YShlKSYmZS5SVENUcmFja0V2ZW50JiZcInJlY2VpdmVyXCJpbiBlLlJUQ1RyYWNrRXZlbnQucHJvdG90eXBlJiYhKFwidHJhbnNjZWl2ZXJcImluIGUuUlRDVHJhY2tFdmVudC5wcm90b3R5cGUpJiZPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5SVENUcmFja0V2ZW50LnByb3RvdHlwZSxcInRyYW5zY2VpdmVyXCIse2dldDpmdW5jdGlvbigpe3JldHVybntyZWNlaXZlcjp0aGlzLnJlY2VpdmVyfX19KX1mdW5jdGlvbiBjKGUsdCl7aWYoXCJvYmplY3RcIj09PWEoZSkmJihlLlJUQ1BlZXJDb25uZWN0aW9ufHxlLm1velJUQ1BlZXJDb25uZWN0aW9uKSl7IWUuUlRDUGVlckNvbm5lY3Rpb24mJmUubW96UlRDUGVlckNvbm5lY3Rpb24mJihlLlJUQ1BlZXJDb25uZWN0aW9uPWUubW96UlRDUGVlckNvbm5lY3Rpb24pLHQudmVyc2lvbjw1MyYmW1wic2V0TG9jYWxEZXNjcmlwdGlvblwiLFwic2V0UmVtb3RlRGVzY3JpcHRpb25cIixcImFkZEljZUNhbmRpZGF0ZVwiXS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBuPWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlW3RdLHI9aSh7fSx0LGZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50c1swXT1uZXcoXCJhZGRJY2VDYW5kaWRhdGVcIj09PXQ/ZS5SVENJY2VDYW5kaWRhdGU6ZS5SVENTZXNzaW9uRGVzY3JpcHRpb24pKGFyZ3VtZW50c1swXSksbi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KTtlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVt0XT1yW3RdfSk7dmFyIG49e2luYm91bmRydHA6XCJpbmJvdW5kLXJ0cFwiLG91dGJvdW5kcnRwOlwib3V0Ym91bmQtcnRwXCIsY2FuZGlkYXRlcGFpcjpcImNhbmRpZGF0ZS1wYWlyXCIsbG9jYWxjYW5kaWRhdGU6XCJsb2NhbC1jYW5kaWRhdGVcIixyZW1vdGVjYW5kaWRhdGU6XCJyZW1vdGUtY2FuZGlkYXRlXCJ9LHI9ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U3RhdHM7ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U3RhdHM9ZnVuY3Rpb24oKXt2YXJbZSxvLGldPWFyZ3VtZW50cztyZXR1cm4gci5hcHBseSh0aGlzLFtlfHxudWxsXSkudGhlbihmdW5jdGlvbihlKXtpZih0LnZlcnNpb248NTMmJiFvKXRyeXtlLmZvckVhY2goZnVuY3Rpb24oZSl7ZS50eXBlPW5bZS50eXBlXXx8ZS50eXBlfSl9Y2F0Y2gocil7aWYoXCJUeXBlRXJyb3JcIiE9PXIubmFtZSl0aHJvdyByO2UuZm9yRWFjaChmdW5jdGlvbih0LHIpe2Uuc2V0KHIsT2JqZWN0LmFzc2lnbih7fSx0LHt0eXBlOm5bdC50eXBlXXx8dC50eXBlfSkpfSl9cmV0dXJuIGV9KS50aGVuKG8saSl9fX1mdW5jdGlvbiBwKGUpe2lmKFwib2JqZWN0XCI9PT1hKGUpJiZlLlJUQ1BlZXJDb25uZWN0aW9uJiZlLlJUQ1J0cFNlbmRlciYmIShlLlJUQ1J0cFNlbmRlciYmXCJnZXRTdGF0c1wiaW4gZS5SVENSdHBTZW5kZXIucHJvdG90eXBlKSl7dmFyIHQ9ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U2VuZGVyczt0JiYoZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U2VuZGVycz1mdW5jdGlvbigpe3ZhciBlPXRoaXMsbj10LmFwcGx5KHRoaXMsW10pO3JldHVybiBuLmZvckVhY2goZnVuY3Rpb24odCl7cmV0dXJuIHQuX3BjPWV9KSxufSk7dmFyIG49ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhY2s7biYmKGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYWNrPWZ1bmN0aW9uKCl7dmFyIGU9bi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIGUuX3BjPXRoaXMsZX0pLGUuUlRDUnRwU2VuZGVyLnByb3RvdHlwZS5nZXRTdGF0cz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRyYWNrP3RoaXMuX3BjLmdldFN0YXRzKHRoaXMudHJhY2spOlByb21pc2UucmVzb2x2ZShuZXcgTWFwKX19fWZ1bmN0aW9uIHUodCl7aWYoXCJvYmplY3RcIj09PWEodCkmJnQuUlRDUGVlckNvbm5lY3Rpb24mJnQuUlRDUnRwU2VuZGVyJiYhKHQuUlRDUnRwU2VuZGVyJiZcImdldFN0YXRzXCJpbiB0LlJUQ1J0cFJlY2VpdmVyLnByb3RvdHlwZSkpe3ZhciBuPXQuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFJlY2VpdmVycztuJiYodC5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0UmVjZWl2ZXJzPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PW4uYXBwbHkodGhpcyxbXSk7cmV0dXJuIHQuZm9yRWFjaChmdW5jdGlvbih0KXtyZXR1cm4gdC5fcGM9ZX0pLHR9KSxlLndyYXBQZWVyQ29ubmVjdGlvbkV2ZW50KHQsXCJ0cmFja1wiLGZ1bmN0aW9uKGUpe3JldHVybiBlLnJlY2VpdmVyLl9wYz1lLnNyY0VsZW1lbnQsZX0pLHQuUlRDUnRwUmVjZWl2ZXIucHJvdG90eXBlLmdldFN0YXRzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BjLmdldFN0YXRzKHRoaXMudHJhY2spfX19ZnVuY3Rpb24gZih0KXshdC5SVENQZWVyQ29ubmVjdGlvbnx8XCJyZW1vdmVTdHJlYW1cImluIHQuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlfHwodC5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlU3RyZWFtPWZ1bmN0aW9uKHQpe3ZhciBuPXRoaXM7ZS5kZXByZWNhdGVkKFwicmVtb3ZlU3RyZWFtXCIsXCJyZW1vdmVUcmFja1wiKSx0aGlzLmdldFNlbmRlcnMoKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UudHJhY2smJnQuZ2V0VHJhY2tzKCkuaW5jbHVkZXMoZS50cmFjaykmJm4ucmVtb3ZlVHJhY2soZSl9KX0pfWZ1bmN0aW9uIGQoZSl7ZS5EYXRhQ2hhbm5lbCYmIWUuUlRDRGF0YUNoYW5uZWwmJihlLlJUQ0RhdGFDaGFubmVsPWUuRGF0YUNoYW5uZWwpfWZ1bmN0aW9uIEMoZSl7aWYoXCJvYmplY3RcIj09PWEoZSkmJmUuUlRDUGVlckNvbm5lY3Rpb24pe3ZhciB0PWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYW5zY2VpdmVyO3QmJihlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRUcmFuc2NlaXZlcj1mdW5jdGlvbigpe3RoaXMuc2V0UGFyYW1ldGVyc1Byb21pc2VzPVtdO3ZhciBlPWFyZ3VtZW50c1sxXSxuPWUmJlwic2VuZEVuY29kaW5nc1wiaW4gZTtuJiZlLnNlbmRFbmNvZGluZ3MuZm9yRWFjaChmdW5jdGlvbihlKXtpZihcInJpZFwiaW4gZSl7aWYoIS9eW2EtejAtOV17MCwxNn0kL2kudGVzdChlLnJpZCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgUklEIHZhbHVlIHByb3ZpZGVkLlwiKX1pZihcInNjYWxlUmVzb2x1dGlvbkRvd25CeVwiaW4gZSYmIShwYXJzZUZsb2F0KGUuc2NhbGVSZXNvbHV0aW9uRG93bkJ5KT49MSkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJzY2FsZV9yZXNvbHV0aW9uX2Rvd25fYnkgbXVzdCBiZSA+PSAxLjBcIik7aWYoXCJtYXhGcmFtZXJhdGVcImluIGUmJiEocGFyc2VGbG9hdChlLm1heEZyYW1lcmF0ZSk+PTApKXRocm93IG5ldyBSYW5nZUVycm9yKFwibWF4X2ZyYW1lcmF0ZSBtdXN0IGJlID49IDAuMFwiKX0pO3ZhciByPXQuYXBwbHkodGhpcyxhcmd1bWVudHMpO2lmKG4pe3ZhcntzZW5kZXI6b309cixpPW8uZ2V0UGFyYW1ldGVycygpO1wiZW5jb2RpbmdzXCJpbiBpJiYoMSE9PWkuZW5jb2RpbmdzLmxlbmd0aHx8MCE9PU9iamVjdC5rZXlzKGkuZW5jb2RpbmdzWzBdKS5sZW5ndGgpfHwoaS5lbmNvZGluZ3M9ZS5zZW5kRW5jb2RpbmdzLG8uc2VuZEVuY29kaW5ncz1lLnNlbmRFbmNvZGluZ3MsdGhpcy5zZXRQYXJhbWV0ZXJzUHJvbWlzZXMucHVzaChvLnNldFBhcmFtZXRlcnMoaSkudGhlbihmdW5jdGlvbigpe2RlbGV0ZSBvLnNlbmRFbmNvZGluZ3N9KS5jYXRjaChmdW5jdGlvbigpe2RlbGV0ZSBvLnNlbmRFbmNvZGluZ3N9KSkpfXJldHVybiByfSl9fWZ1bmN0aW9uIHkoZSl7aWYoXCJvYmplY3RcIj09PWEoZSkmJmUuUlRDUnRwU2VuZGVyKXt2YXIgdD1lLlJUQ1J0cFNlbmRlci5wcm90b3R5cGUuZ2V0UGFyYW1ldGVyczt0JiYoZS5SVENSdHBTZW5kZXIucHJvdG90eXBlLmdldFBhcmFtZXRlcnM9ZnVuY3Rpb24oKXt2YXIgZT10LmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm5cImVuY29kaW5nc1wiaW4gZXx8KGUuZW5jb2RpbmdzPVtdLmNvbmNhdCh0aGlzLnNlbmRFbmNvZGluZ3N8fFt7fV0pKSxlfSl9fWZ1bmN0aW9uIGwoZSl7aWYoXCJvYmplY3RcIj09PWEoZSkmJmUuUlRDUGVlckNvbm5lY3Rpb24pe3ZhciB0PWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmNyZWF0ZU9mZmVyO2UuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmNyZWF0ZU9mZmVyPWZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzLG49dGhpcztyZXR1cm4gdGhpcy5zZXRQYXJhbWV0ZXJzUHJvbWlzZXMmJnRoaXMuc2V0UGFyYW1ldGVyc1Byb21pc2VzLmxlbmd0aD9Qcm9taXNlLmFsbCh0aGlzLnNldFBhcmFtZXRlcnNQcm9taXNlcykudGhlbihmdW5jdGlvbigpe3JldHVybiB0LmFwcGx5KG4sZSl9KS5maW5hbGx5KGZ1bmN0aW9uKCl7bi5zZXRQYXJhbWV0ZXJzUHJvbWlzZXM9W119KTp0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX19fWZ1bmN0aW9uIG0oZSl7aWYoXCJvYmplY3RcIj09PWEoZSkmJmUuUlRDUGVlckNvbm5lY3Rpb24pe3ZhciB0PWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmNyZWF0ZUFuc3dlcjtlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5jcmVhdGVBbnN3ZXI9ZnVuY3Rpb24oKXt2YXIgZT1hcmd1bWVudHMsbj10aGlzO3JldHVybiB0aGlzLnNldFBhcmFtZXRlcnNQcm9taXNlcyYmdGhpcy5zZXRQYXJhbWV0ZXJzUHJvbWlzZXMubGVuZ3RoP1Byb21pc2UuYWxsKHRoaXMuc2V0UGFyYW1ldGVyc1Byb21pc2VzKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIHQuYXBwbHkobixlKX0pLmZpbmFsbHkoZnVuY3Rpb24oKXtuLnNldFBhcmFtZXRlcnNQcm9taXNlcz1bXX0pOnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfX19XG59LHtcIi4uL3V0aWxzXCI6XCJpU3hDXCIsXCIuL2dldHVzZXJtZWRpYVwiOlwiR3pTdlwiLFwiLi9nZXRkaXNwbGF5bWVkaWFcIjpcIlV1R1VcIn1dLFwidDFsTFwiOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKSB7XG5cInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLnNoaW1Mb2NhbFN0cmVhbXNBUEk9bixleHBvcnRzLnNoaW1SZW1vdGVTdHJlYW1zQVBJPWksZXhwb3J0cy5zaGltQ2FsbGJhY2tzQVBJPWEsZXhwb3J0cy5zaGltR2V0VXNlck1lZGlhPWMsZXhwb3J0cy5zaGltQ29uc3RyYWludHM9cyxleHBvcnRzLnNoaW1SVENJY2VTZXJ2ZXJVcmxzPWQsZXhwb3J0cy5zaGltVHJhY2tFdmVudFRyYW5zY2VpdmVyPWYsZXhwb3J0cy5zaGltQ3JlYXRlT2ZmZXJMZWdhY3k9cCxleHBvcnRzLnNoaW1BdWRpb0NvbnRleHQ9dTt2YXIgZT1yKHJlcXVpcmUoXCIuLi91dGlsc1wiKSk7ZnVuY3Rpb24gdCgpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIFdlYWtNYXApcmV0dXJuIG51bGw7dmFyIGU9bmV3IFdlYWtNYXA7cmV0dXJuIHQ9ZnVuY3Rpb24oKXtyZXR1cm4gZX0sZX1mdW5jdGlvbiByKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTtpZihudWxsPT09ZXx8XCJvYmplY3RcIiE9dHlwZW9mIGUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGUpcmV0dXJue2RlZmF1bHQ6ZX07dmFyIHI9dCgpO2lmKHImJnIuaGFzKGUpKXJldHVybiByLmdldChlKTt2YXIgbz17fSxuPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSYmT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjtmb3IodmFyIGkgaW4gZSlpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxpKSl7dmFyIGE9bj9PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsaSk6bnVsbDthJiYoYS5nZXR8fGEuc2V0KT9PYmplY3QuZGVmaW5lUHJvcGVydHkobyxpLGEpOm9baV09ZVtpXX1yZXR1cm4gby5kZWZhdWx0PWUsciYmci5zZXQoZSxvKSxvfWZ1bmN0aW9uIG8oZSl7cmV0dXJuKG89XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZcInN5bWJvbFwiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKGUpe3JldHVybiB0eXBlb2YgZX06ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmZS5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmZSE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2YgZX0pKGUpfWZ1bmN0aW9uIG4oZSl7aWYoXCJvYmplY3RcIj09PW8oZSkmJmUuUlRDUGVlckNvbm5lY3Rpb24pe2lmKFwiZ2V0TG9jYWxTdHJlYW1zXCJpbiBlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZXx8KGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldExvY2FsU3RyZWFtcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9sb2NhbFN0cmVhbXN8fCh0aGlzLl9sb2NhbFN0cmVhbXM9W10pLHRoaXMuX2xvY2FsU3RyZWFtc30pLCEoXCJhZGRTdHJlYW1cImluIGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlKSl7dmFyIHQ9ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhY2s7ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkU3RyZWFtPWZ1bmN0aW9uKGUpe3ZhciByPXRoaXM7dGhpcy5fbG9jYWxTdHJlYW1zfHwodGhpcy5fbG9jYWxTdHJlYW1zPVtdKSx0aGlzLl9sb2NhbFN0cmVhbXMuaW5jbHVkZXMoZSl8fHRoaXMuX2xvY2FsU3RyZWFtcy5wdXNoKGUpLGUuZ2V0QXVkaW9UcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uKG8pe3JldHVybiB0LmNhbGwocixvLGUpfSksZS5nZXRWaWRlb1RyYWNrcygpLmZvckVhY2goZnVuY3Rpb24obyl7cmV0dXJuIHQuY2FsbChyLG8sZSl9KX0sZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhY2s9ZnVuY3Rpb24oZSl7Zm9yKHZhciByPXRoaXMsbz1hcmd1bWVudHMubGVuZ3RoLG49bmV3IEFycmF5KG8+MT9vLTE6MCksaT0xO2k8bztpKyspbltpLTFdPWFyZ3VtZW50c1tpXTtyZXR1cm4gbiYmbi5mb3JFYWNoKGZ1bmN0aW9uKGUpe3IuX2xvY2FsU3RyZWFtcz9yLl9sb2NhbFN0cmVhbXMuaW5jbHVkZXMoZSl8fHIuX2xvY2FsU3RyZWFtcy5wdXNoKGUpOnIuX2xvY2FsU3RyZWFtcz1bZV19KSx0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX19XCJyZW1vdmVTdHJlYW1cImluIGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlfHwoZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlU3RyZWFtPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dGhpcy5fbG9jYWxTdHJlYW1zfHwodGhpcy5fbG9jYWxTdHJlYW1zPVtdKTt2YXIgcj10aGlzLl9sb2NhbFN0cmVhbXMuaW5kZXhPZihlKTtpZigtMSE9PXIpe3RoaXMuX2xvY2FsU3RyZWFtcy5zcGxpY2UociwxKTt2YXIgbz1lLmdldFRyYWNrcygpO3RoaXMuZ2V0U2VuZGVycygpLmZvckVhY2goZnVuY3Rpb24oZSl7by5pbmNsdWRlcyhlLnRyYWNrKSYmdC5yZW1vdmVUcmFjayhlKX0pfX0pfX1mdW5jdGlvbiBpKGUpe2lmKFwib2JqZWN0XCI9PT1vKGUpJiZlLlJUQ1BlZXJDb25uZWN0aW9uJiYoXCJnZXRSZW1vdGVTdHJlYW1zXCJpbiBlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZXx8KGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFJlbW90ZVN0cmVhbXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmVtb3RlU3RyZWFtcz90aGlzLl9yZW1vdGVTdHJlYW1zOltdfSksIShcIm9uYWRkc3RyZWFtXCJpbiBlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSkpKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUsXCJvbmFkZHN0cmVhbVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25hZGRzdHJlYW19LHNldDpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3RoaXMuX29uYWRkc3RyZWFtJiYodGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKFwiYWRkc3RyZWFtXCIsdGhpcy5fb25hZGRzdHJlYW0pLHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRyYWNrXCIsdGhpcy5fb25hZGRzdHJlYW1wb2x5KSksdGhpcy5hZGRFdmVudExpc3RlbmVyKFwiYWRkc3RyZWFtXCIsdGhpcy5fb25hZGRzdHJlYW09ZSksdGhpcy5hZGRFdmVudExpc3RlbmVyKFwidHJhY2tcIix0aGlzLl9vbmFkZHN0cmVhbXBvbHk9ZnVuY3Rpb24oZSl7ZS5zdHJlYW1zLmZvckVhY2goZnVuY3Rpb24oZSl7aWYodC5fcmVtb3RlU3RyZWFtc3x8KHQuX3JlbW90ZVN0cmVhbXM9W10pLCF0Ll9yZW1vdGVTdHJlYW1zLmluY2x1ZGVzKGUpKXt0Ll9yZW1vdGVTdHJlYW1zLnB1c2goZSk7dmFyIHI9bmV3IEV2ZW50KFwiYWRkc3RyZWFtXCIpO3Iuc3RyZWFtPWUsdC5kaXNwYXRjaEV2ZW50KHIpfX0pfSl9fSk7dmFyIHQ9ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuc2V0UmVtb3RlRGVzY3JpcHRpb247ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuc2V0UmVtb3RlRGVzY3JpcHRpb249ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiB0aGlzLl9vbmFkZHN0cmVhbXBvbHl8fHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcInRyYWNrXCIsdGhpcy5fb25hZGRzdHJlYW1wb2x5PWZ1bmN0aW9uKHQpe3Quc3RyZWFtcy5mb3JFYWNoKGZ1bmN0aW9uKHQpe2lmKGUuX3JlbW90ZVN0cmVhbXN8fChlLl9yZW1vdGVTdHJlYW1zPVtdKSwhKGUuX3JlbW90ZVN0cmVhbXMuaW5kZXhPZih0KT49MCkpe2UuX3JlbW90ZVN0cmVhbXMucHVzaCh0KTt2YXIgcj1uZXcgRXZlbnQoXCJhZGRzdHJlYW1cIik7ci5zdHJlYW09dCxlLmRpc3BhdGNoRXZlbnQocil9fSl9KSx0LmFwcGx5KGUsYXJndW1lbnRzKX19fWZ1bmN0aW9uIGEoZSl7aWYoXCJvYmplY3RcIj09PW8oZSkmJmUuUlRDUGVlckNvbm5lY3Rpb24pe3ZhciB0PWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLHI9dC5jcmVhdGVPZmZlcixuPXQuY3JlYXRlQW5zd2VyLGk9dC5zZXRMb2NhbERlc2NyaXB0aW9uLGE9dC5zZXRSZW1vdGVEZXNjcmlwdGlvbixjPXQuYWRkSWNlQ2FuZGlkYXRlO3QuY3JlYXRlT2ZmZXI9ZnVuY3Rpb24oZSx0KXt2YXIgbz1hcmd1bWVudHMubGVuZ3RoPj0yP2FyZ3VtZW50c1syXTphcmd1bWVudHNbMF0sbj1yLmFwcGx5KHRoaXMsW29dKTtyZXR1cm4gdD8obi50aGVuKGUsdCksUHJvbWlzZS5yZXNvbHZlKCkpOm59LHQuY3JlYXRlQW5zd2VyPWZ1bmN0aW9uKGUsdCl7dmFyIHI9YXJndW1lbnRzLmxlbmd0aD49Mj9hcmd1bWVudHNbMl06YXJndW1lbnRzWzBdLG89bi5hcHBseSh0aGlzLFtyXSk7cmV0dXJuIHQ/KG8udGhlbihlLHQpLFByb21pc2UucmVzb2x2ZSgpKTpvfTt2YXIgcz1mdW5jdGlvbihlLHQscil7dmFyIG89aS5hcHBseSh0aGlzLFtlXSk7cmV0dXJuIHI/KG8udGhlbih0LHIpLFByb21pc2UucmVzb2x2ZSgpKTpvfTt0LnNldExvY2FsRGVzY3JpcHRpb249cyxzPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbz1hLmFwcGx5KHRoaXMsW2VdKTtyZXR1cm4gcj8oby50aGVuKHQsciksUHJvbWlzZS5yZXNvbHZlKCkpOm99LHQuc2V0UmVtb3RlRGVzY3JpcHRpb249cyxzPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbz1jLmFwcGx5KHRoaXMsW2VdKTtyZXR1cm4gcj8oby50aGVuKHQsciksUHJvbWlzZS5yZXNvbHZlKCkpOm99LHQuYWRkSWNlQ2FuZGlkYXRlPXN9fWZ1bmN0aW9uIGMoZSl7dmFyIHQ9ZSYmZS5uYXZpZ2F0b3I7aWYodC5tZWRpYURldmljZXMmJnQubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSl7dmFyIHI9dC5tZWRpYURldmljZXMsbz1yLmdldFVzZXJNZWRpYS5iaW5kKHIpO3QubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYT1mdW5jdGlvbihlKXtyZXR1cm4gbyhzKGUpKX19IXQuZ2V0VXNlck1lZGlhJiZ0Lm1lZGlhRGV2aWNlcyYmdC5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhJiYodC5nZXRVc2VyTWVkaWE9ZnVuY3Rpb24oZSxyLG8pe3QubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYShlKS50aGVuKHIsbyl9LmJpbmQodCkpfWZ1bmN0aW9uIHModCl7cmV0dXJuIHQmJnZvaWQgMCE9PXQudmlkZW8/T2JqZWN0LmFzc2lnbih7fSx0LHt2aWRlbzplLmNvbXBhY3RPYmplY3QodC52aWRlbyl9KTp0fWZ1bmN0aW9uIGQodCl7aWYodC5SVENQZWVyQ29ubmVjdGlvbil7dmFyIHI9dC5SVENQZWVyQ29ubmVjdGlvbjt0LlJUQ1BlZXJDb25uZWN0aW9uPWZ1bmN0aW9uKHQsbyl7aWYodCYmdC5pY2VTZXJ2ZXJzKXtmb3IodmFyIG49W10saT0wO2k8dC5pY2VTZXJ2ZXJzLmxlbmd0aDtpKyspe3ZhciBhPXQuaWNlU2VydmVyc1tpXTshYS5oYXNPd25Qcm9wZXJ0eShcInVybHNcIikmJmEuaGFzT3duUHJvcGVydHkoXCJ1cmxcIik/KGUuZGVwcmVjYXRlZChcIlJUQ0ljZVNlcnZlci51cmxcIixcIlJUQ0ljZVNlcnZlci51cmxzXCIpLChhPUpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoYSkpKS51cmxzPWEudXJsLGRlbGV0ZSBhLnVybCxuLnB1c2goYSkpOm4ucHVzaCh0LmljZVNlcnZlcnNbaV0pfXQuaWNlU2VydmVycz1ufXJldHVybiBuZXcgcih0LG8pfSx0LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZT1yLnByb3RvdHlwZSxcImdlbmVyYXRlQ2VydGlmaWNhdGVcImluIHImJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlJUQ1BlZXJDb25uZWN0aW9uLFwiZ2VuZXJhdGVDZXJ0aWZpY2F0ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gci5nZW5lcmF0ZUNlcnRpZmljYXRlfX0pfX1mdW5jdGlvbiBmKGUpe1wib2JqZWN0XCI9PT1vKGUpJiZlLlJUQ1RyYWNrRXZlbnQmJlwicmVjZWl2ZXJcImluIGUuUlRDVHJhY2tFdmVudC5wcm90b3R5cGUmJiEoXCJ0cmFuc2NlaXZlclwiaW4gZS5SVENUcmFja0V2ZW50LnByb3RvdHlwZSkmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLlJUQ1RyYWNrRXZlbnQucHJvdG90eXBlLFwidHJhbnNjZWl2ZXJcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJue3JlY2VpdmVyOnRoaXMucmVjZWl2ZXJ9fX0pfWZ1bmN0aW9uIHAoZSl7dmFyIHQ9ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuY3JlYXRlT2ZmZXI7ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuY3JlYXRlT2ZmZXI9ZnVuY3Rpb24oZSl7aWYoZSl7dm9pZCAwIT09ZS5vZmZlclRvUmVjZWl2ZUF1ZGlvJiYoZS5vZmZlclRvUmVjZWl2ZUF1ZGlvPSEhZS5vZmZlclRvUmVjZWl2ZUF1ZGlvKTt2YXIgcj10aGlzLmdldFRyYW5zY2VpdmVycygpLmZpbmQoZnVuY3Rpb24oZSl7cmV0dXJuXCJhdWRpb1wiPT09ZS5yZWNlaXZlci50cmFjay5raW5kfSk7ITE9PT1lLm9mZmVyVG9SZWNlaXZlQXVkaW8mJnI/XCJzZW5kcmVjdlwiPT09ci5kaXJlY3Rpb24/ci5zZXREaXJlY3Rpb24/ci5zZXREaXJlY3Rpb24oXCJzZW5kb25seVwiKTpyLmRpcmVjdGlvbj1cInNlbmRvbmx5XCI6XCJyZWN2b25seVwiPT09ci5kaXJlY3Rpb24mJihyLnNldERpcmVjdGlvbj9yLnNldERpcmVjdGlvbihcImluYWN0aXZlXCIpOnIuZGlyZWN0aW9uPVwiaW5hY3RpdmVcIik6ITAhPT1lLm9mZmVyVG9SZWNlaXZlQXVkaW98fHJ8fHRoaXMuYWRkVHJhbnNjZWl2ZXIoXCJhdWRpb1wiKSx2b2lkIDAhPT1lLm9mZmVyVG9SZWNlaXZlVmlkZW8mJihlLm9mZmVyVG9SZWNlaXZlVmlkZW89ISFlLm9mZmVyVG9SZWNlaXZlVmlkZW8pO3ZhciBvPXRoaXMuZ2V0VHJhbnNjZWl2ZXJzKCkuZmluZChmdW5jdGlvbihlKXtyZXR1cm5cInZpZGVvXCI9PT1lLnJlY2VpdmVyLnRyYWNrLmtpbmR9KTshMT09PWUub2ZmZXJUb1JlY2VpdmVWaWRlbyYmbz9cInNlbmRyZWN2XCI9PT1vLmRpcmVjdGlvbj9vLnNldERpcmVjdGlvbj9vLnNldERpcmVjdGlvbihcInNlbmRvbmx5XCIpOm8uZGlyZWN0aW9uPVwic2VuZG9ubHlcIjpcInJlY3Zvbmx5XCI9PT1vLmRpcmVjdGlvbiYmKG8uc2V0RGlyZWN0aW9uP28uc2V0RGlyZWN0aW9uKFwiaW5hY3RpdmVcIik6by5kaXJlY3Rpb249XCJpbmFjdGl2ZVwiKTohMCE9PWUub2ZmZXJUb1JlY2VpdmVWaWRlb3x8b3x8dGhpcy5hZGRUcmFuc2NlaXZlcihcInZpZGVvXCIpfXJldHVybiB0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX19ZnVuY3Rpb24gdShlKXtcIm9iamVjdFwiIT09byhlKXx8ZS5BdWRpb0NvbnRleHR8fChlLkF1ZGlvQ29udGV4dD1lLndlYmtpdEF1ZGlvQ29udGV4dCl9XG59LHtcIi4uL3V0aWxzXCI6XCJpU3hDXCJ9XSxcIkdPUUtcIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cykge1xuXCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5zaGltUlRDSWNlQ2FuZGlkYXRlPWEsZXhwb3J0cy5zaGltTWF4TWVzc2FnZVNpemU9YyxleHBvcnRzLnNoaW1TZW5kVGhyb3dUeXBlRXJyb3I9cyxleHBvcnRzLnNoaW1Db25uZWN0aW9uU3RhdGU9cCxleHBvcnRzLnJlbW92ZUV4dG1hcEFsbG93TWl4ZWQ9ZCxleHBvcnRzLnNoaW1BZGRJY2VDYW5kaWRhdGVOdWxsT3JFbXB0eT11O3ZhciBlPXIocmVxdWlyZShcInNkcFwiKSksdD1vKHJlcXVpcmUoXCIuL3V0aWxzXCIpKTtmdW5jdGlvbiBuKCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgV2Vha01hcClyZXR1cm4gbnVsbDt2YXIgZT1uZXcgV2Vha01hcDtyZXR1cm4gbj1mdW5jdGlvbigpe3JldHVybiBlfSxlfWZ1bmN0aW9uIG8oZSl7aWYoZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO2lmKG51bGw9PT1lfHxcIm9iamVjdFwiIT10eXBlb2YgZSYmXCJmdW5jdGlvblwiIT10eXBlb2YgZSlyZXR1cm57ZGVmYXVsdDplfTt2YXIgdD1uKCk7aWYodCYmdC5oYXMoZSkpcmV0dXJuIHQuZ2V0KGUpO3ZhciBvPXt9LHI9T2JqZWN0LmRlZmluZVByb3BlcnR5JiZPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO2Zvcih2YXIgaSBpbiBlKWlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLGkpKXt2YXIgYT1yP09iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSxpKTpudWxsO2EmJihhLmdldHx8YS5zZXQpP09iamVjdC5kZWZpbmVQcm9wZXJ0eShvLGksYSk6b1tpXT1lW2ldfXJldHVybiBvLmRlZmF1bHQ9ZSx0JiZ0LnNldChlLG8pLG99ZnVuY3Rpb24gcihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19ZnVuY3Rpb24gaShlKXtyZXR1cm4oaT1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlwic3ltYm9sXCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24oZSl7cmV0dXJuIHR5cGVvZiBlfTpmdW5jdGlvbihlKXtyZXR1cm4gZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZlLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZlIT09U3ltYm9sLnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiBlfSkoZSl9ZnVuY3Rpb24gYShuKXtpZihuLlJUQ0ljZUNhbmRpZGF0ZSYmIShuLlJUQ0ljZUNhbmRpZGF0ZSYmXCJmb3VuZGF0aW9uXCJpbiBuLlJUQ0ljZUNhbmRpZGF0ZS5wcm90b3R5cGUpKXt2YXIgbz1uLlJUQ0ljZUNhbmRpZGF0ZTtuLlJUQ0ljZUNhbmRpZGF0ZT1mdW5jdGlvbih0KXtpZihcIm9iamVjdFwiPT09aSh0KSYmdC5jYW5kaWRhdGUmJjA9PT10LmNhbmRpZGF0ZS5pbmRleE9mKFwiYT1cIikmJigodD1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHQpKSkuY2FuZGlkYXRlPXQuY2FuZGlkYXRlLnN1YnN0cigyKSksdC5jYW5kaWRhdGUmJnQuY2FuZGlkYXRlLmxlbmd0aCl7dmFyIG49bmV3IG8odCkscj1lLmRlZmF1bHQucGFyc2VDYW5kaWRhdGUodC5jYW5kaWRhdGUpLGE9T2JqZWN0LmFzc2lnbihuLHIpO3JldHVybiBhLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybntjYW5kaWRhdGU6YS5jYW5kaWRhdGUsc2RwTWlkOmEuc2RwTWlkLHNkcE1MaW5lSW5kZXg6YS5zZHBNTGluZUluZGV4LHVzZXJuYW1lRnJhZ21lbnQ6YS51c2VybmFtZUZyYWdtZW50fX0sYX1yZXR1cm4gbmV3IG8odCl9LG4uUlRDSWNlQ2FuZGlkYXRlLnByb3RvdHlwZT1vLnByb3RvdHlwZSx0LndyYXBQZWVyQ29ubmVjdGlvbkV2ZW50KG4sXCJpY2VjYW5kaWRhdGVcIixmdW5jdGlvbihlKXtyZXR1cm4gZS5jYW5kaWRhdGUmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiY2FuZGlkYXRlXCIse3ZhbHVlOm5ldyBuLlJUQ0ljZUNhbmRpZGF0ZShlLmNhbmRpZGF0ZSksd3JpdGFibGU6XCJmYWxzZVwifSksZX0pfX1mdW5jdGlvbiBjKHQsbil7aWYodC5SVENQZWVyQ29ubmVjdGlvbil7XCJzY3RwXCJpbiB0LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZXx8T2JqZWN0LmRlZmluZVByb3BlcnR5KHQuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLFwic2N0cFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdm9pZCAwPT09dGhpcy5fc2N0cD9udWxsOnRoaXMuX3NjdHB9fSk7dmFyIG89dC5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuc2V0UmVtb3RlRGVzY3JpcHRpb247dC5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuc2V0UmVtb3RlRGVzY3JpcHRpb249ZnVuY3Rpb24oKXtpZih0aGlzLl9zY3RwPW51bGwsXCJjaHJvbWVcIj09PW4uYnJvd3NlciYmbi52ZXJzaW9uPj03Nil7dmFye3NkcFNlbWFudGljczp0fT10aGlzLmdldENvbmZpZ3VyYXRpb24oKTtcInBsYW4tYlwiPT09dCYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJzY3RwXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB2b2lkIDA9PT10aGlzLl9zY3RwP251bGw6dGhpcy5fc2N0cH0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KX1pZihmdW5jdGlvbih0KXtpZighdHx8IXQuc2RwKXJldHVybiExO3ZhciBuPWUuZGVmYXVsdC5zcGxpdFNlY3Rpb25zKHQuc2RwKTtyZXR1cm4gbi5zaGlmdCgpLG4uc29tZShmdW5jdGlvbih0KXt2YXIgbj1lLmRlZmF1bHQucGFyc2VNTGluZSh0KTtyZXR1cm4gbiYmXCJhcHBsaWNhdGlvblwiPT09bi5raW5kJiYtMSE9PW4ucHJvdG9jb2wuaW5kZXhPZihcIlNDVFBcIil9KX0oYXJndW1lbnRzWzBdKSl7dmFyIHIsaT1mdW5jdGlvbihlKXt2YXIgdD1lLnNkcC5tYXRjaCgvbW96aWxsYS4uLlRISVNfSVNfU0RQQVJUQS0oXFxkKykvKTtpZihudWxsPT09dHx8dC5sZW5ndGg8MilyZXR1cm4tMTt2YXIgbj1wYXJzZUludCh0WzFdLDEwKTtyZXR1cm4gbiE9bj8tMTpufShhcmd1bWVudHNbMF0pLGE9KHA9aSxkPTY1NTM2LFwiZmlyZWZveFwiPT09bi5icm93c2VyJiYoZD1uLnZlcnNpb248NTc/LTE9PT1wPzE2Mzg0OjIxNDc0ODM2Mzc6bi52ZXJzaW9uPDYwPzU3PT09bi52ZXJzaW9uPzY1NTM1OjY1NTM2OjIxNDc0ODM2MzcpLGQpLGM9ZnVuY3Rpb24odCxvKXt2YXIgcj02NTUzNjtcImZpcmVmb3hcIj09PW4uYnJvd3NlciYmNTc9PT1uLnZlcnNpb24mJihyPTY1NTM1KTt2YXIgaT1lLmRlZmF1bHQubWF0Y2hQcmVmaXgodC5zZHAsXCJhPW1heC1tZXNzYWdlLXNpemU6XCIpO3JldHVybiBpLmxlbmd0aD4wP3I9cGFyc2VJbnQoaVswXS5zdWJzdHIoMTkpLDEwKTpcImZpcmVmb3hcIj09PW4uYnJvd3NlciYmLTEhPT1vJiYocj0yMTQ3NDgzNjM3KSxyfShhcmd1bWVudHNbMF0saSk7cj0wPT09YSYmMD09PWM/TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZOjA9PT1hfHwwPT09Yz9NYXRoLm1heChhLGMpOk1hdGgubWluKGEsYyk7dmFyIHM9e307T2JqZWN0LmRlZmluZVByb3BlcnR5KHMsXCJtYXhNZXNzYWdlU2l6ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gcn19KSx0aGlzLl9zY3RwPXN9dmFyIHAsZDtyZXR1cm4gby5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fX1mdW5jdGlvbiBzKGUpe2lmKGUuUlRDUGVlckNvbm5lY3Rpb24mJlwiY3JlYXRlRGF0YUNoYW5uZWxcImluIGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlKXt2YXIgbj1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5jcmVhdGVEYXRhQ2hhbm5lbDtlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5jcmVhdGVEYXRhQ2hhbm5lbD1mdW5jdGlvbigpe3ZhciBlPW4uYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybiBvKGUsdGhpcyksZX0sdC53cmFwUGVlckNvbm5lY3Rpb25FdmVudChlLFwiZGF0YWNoYW5uZWxcIixmdW5jdGlvbihlKXtyZXR1cm4gbyhlLmNoYW5uZWwsZS50YXJnZXQpLGV9KX1mdW5jdGlvbiBvKGUsdCl7dmFyIG49ZS5zZW5kO2Uuc2VuZD1mdW5jdGlvbigpe3ZhciBvPWFyZ3VtZW50c1swXSxyPW8ubGVuZ3RofHxvLnNpemV8fG8uYnl0ZUxlbmd0aDtpZihcIm9wZW5cIj09PWUucmVhZHlTdGF0ZSYmdC5zY3RwJiZyPnQuc2N0cC5tYXhNZXNzYWdlU2l6ZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiTWVzc2FnZSB0b28gbGFyZ2UgKGNhbiBzZW5kIGEgbWF4aW11bSBvZiBcIit0LnNjdHAubWF4TWVzc2FnZVNpemUrXCIgYnl0ZXMpXCIpO3JldHVybiBuLmFwcGx5KGUsYXJndW1lbnRzKX19fWZ1bmN0aW9uIHAoZSl7aWYoZS5SVENQZWVyQ29ubmVjdGlvbiYmIShcImNvbm5lY3Rpb25TdGF0ZVwiaW4gZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUpKXt2YXIgdD1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcImNvbm5lY3Rpb25TdGF0ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm57Y29tcGxldGVkOlwiY29ubmVjdGVkXCIsY2hlY2tpbmc6XCJjb25uZWN0aW5nXCJ9W3RoaXMuaWNlQ29ubmVjdGlvblN0YXRlXXx8dGhpcy5pY2VDb25uZWN0aW9uU3RhdGV9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJvbmNvbm5lY3Rpb25zdGF0ZWNoYW5nZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25jb25uZWN0aW9uc3RhdGVjaGFuZ2V8fG51bGx9LHNldDpmdW5jdGlvbihlKXt0aGlzLl9vbmNvbm5lY3Rpb25zdGF0ZWNoYW5nZSYmKHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNvbm5lY3Rpb25zdGF0ZWNoYW5nZVwiLHRoaXMuX29uY29ubmVjdGlvbnN0YXRlY2hhbmdlKSxkZWxldGUgdGhpcy5fb25jb25uZWN0aW9uc3RhdGVjaGFuZ2UpLGUmJnRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcImNvbm5lY3Rpb25zdGF0ZWNoYW5nZVwiLHRoaXMuX29uY29ubmVjdGlvbnN0YXRlY2hhbmdlPWUpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLFtcInNldExvY2FsRGVzY3JpcHRpb25cIixcInNldFJlbW90ZURlc2NyaXB0aW9uXCJdLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIG49dFtlXTt0W2VdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Nvbm5lY3Rpb25zdGF0ZWNoYW5nZXBvbHl8fCh0aGlzLl9jb25uZWN0aW9uc3RhdGVjaGFuZ2Vwb2x5PWZ1bmN0aW9uKGUpe3ZhciB0PWUudGFyZ2V0O2lmKHQuX2xhc3RDb25uZWN0aW9uU3RhdGUhPT10LmNvbm5lY3Rpb25TdGF0ZSl7dC5fbGFzdENvbm5lY3Rpb25TdGF0ZT10LmNvbm5lY3Rpb25TdGF0ZTt2YXIgbj1uZXcgRXZlbnQoXCJjb25uZWN0aW9uc3RhdGVjaGFuZ2VcIixlKTt0LmRpc3BhdGNoRXZlbnQobil9cmV0dXJuIGV9LHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcImljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZVwiLHRoaXMuX2Nvbm5lY3Rpb25zdGF0ZWNoYW5nZXBvbHkpKSxuLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19KX19ZnVuY3Rpb24gZChlLHQpe2lmKGUuUlRDUGVlckNvbm5lY3Rpb24mJiEoXCJjaHJvbWVcIj09PXQuYnJvd3NlciYmdC52ZXJzaW9uPj03MXx8XCJzYWZhcmlcIj09PXQuYnJvd3NlciYmdC52ZXJzaW9uPj02MDUpKXt2YXIgbj1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5zZXRSZW1vdGVEZXNjcmlwdGlvbjtlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5zZXRSZW1vdGVEZXNjcmlwdGlvbj1mdW5jdGlvbih0KXtpZih0JiZ0LnNkcCYmLTEhPT10LnNkcC5pbmRleE9mKFwiXFxuYT1leHRtYXAtYWxsb3ctbWl4ZWRcIikpe3ZhciBvPXQuc2RwLnNwbGl0KFwiXFxuXCIpLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm5cImE9ZXh0bWFwLWFsbG93LW1peGVkXCIhPT1lLnRyaW0oKX0pLmpvaW4oXCJcXG5cIik7ZS5SVENTZXNzaW9uRGVzY3JpcHRpb24mJnQgaW5zdGFuY2VvZiBlLlJUQ1Nlc3Npb25EZXNjcmlwdGlvbj9hcmd1bWVudHNbMF09bmV3IGUuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKHt0eXBlOnQudHlwZSxzZHA6b30pOnQuc2RwPW99cmV0dXJuIG4uYXBwbHkodGhpcyxhcmd1bWVudHMpfX19ZnVuY3Rpb24gdShlLHQpe2lmKGUuUlRDUGVlckNvbm5lY3Rpb24mJmUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlKXt2YXIgbj1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRJY2VDYW5kaWRhdGU7biYmMCE9PW4ubGVuZ3RoJiYoZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkSWNlQ2FuZGlkYXRlPWZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50c1swXT8oXCJjaHJvbWVcIj09PXQuYnJvd3NlciYmdC52ZXJzaW9uPDc4fHxcImZpcmVmb3hcIj09PXQuYnJvd3NlciYmdC52ZXJzaW9uPDY4fHxcInNhZmFyaVwiPT09dC5icm93c2VyKSYmYXJndW1lbnRzWzBdJiZcIlwiPT09YXJndW1lbnRzWzBdLmNhbmRpZGF0ZT9Qcm9taXNlLnJlc29sdmUoKTpuLmFwcGx5KHRoaXMsYXJndW1lbnRzKTooYXJndW1lbnRzWzFdJiZhcmd1bWVudHNbMV0uYXBwbHkobnVsbCksUHJvbWlzZS5yZXNvbHZlKCkpfSl9fVxufSx7XCJzZHBcIjpcIllIdmhcIixcIi4vdXRpbHNcIjpcImlTeENcIn1dLFwiS3RsR1wiOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKSB7XG5cInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLmFkYXB0ZXJGYWN0b3J5PW87dmFyIGU9bShyZXF1aXJlKFwiLi91dGlsc1wiKSksaT1tKHJlcXVpcmUoXCIuL2Nocm9tZS9jaHJvbWVfc2hpbVwiKSkscj1tKHJlcXVpcmUoXCIuL2VkZ2UvZWRnZV9zaGltXCIpKSxzPW0ocmVxdWlyZShcIi4vZmlyZWZveC9maXJlZm94X3NoaW1cIikpLHQ9bShyZXF1aXJlKFwiLi9zYWZhcmkvc2FmYXJpX3NoaW1cIikpLGE9bShyZXF1aXJlKFwiLi9jb21tb25fc2hpbVwiKSk7ZnVuY3Rpb24gbigpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIFdlYWtNYXApcmV0dXJuIG51bGw7dmFyIGU9bmV3IFdlYWtNYXA7cmV0dXJuIG49ZnVuY3Rpb24oKXtyZXR1cm4gZX0sZX1mdW5jdGlvbiBtKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTtpZihudWxsPT09ZXx8XCJvYmplY3RcIiE9dHlwZW9mIGUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGUpcmV0dXJue2RlZmF1bHQ6ZX07dmFyIGk9bigpO2lmKGkmJmkuaGFzKGUpKXJldHVybiBpLmdldChlKTt2YXIgcj17fSxzPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSYmT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjtmb3IodmFyIHQgaW4gZSlpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSx0KSl7dmFyIGE9cz9PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsdCk6bnVsbDthJiYoYS5nZXR8fGEuc2V0KT9PYmplY3QuZGVmaW5lUHJvcGVydHkocix0LGEpOnJbdF09ZVt0XX1yZXR1cm4gci5kZWZhdWx0PWUsaSYmaS5zZXQoZSxyKSxyfWZ1bmN0aW9uIG8oKXt2YXJ7d2luZG93Om59PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxtPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7c2hpbUNocm9tZTohMCxzaGltRmlyZWZveDohMCxzaGltRWRnZTohMCxzaGltU2FmYXJpOiEwfSxvPWUubG9nLGg9ZS5kZXRlY3RCcm93c2VyKG4pLGQ9e2Jyb3dzZXJEZXRhaWxzOmgsY29tbW9uU2hpbTphLGV4dHJhY3RWZXJzaW9uOmUuZXh0cmFjdFZlcnNpb24sZGlzYWJsZUxvZzplLmRpc2FibGVMb2csZGlzYWJsZVdhcm5pbmdzOmUuZGlzYWJsZVdhcm5pbmdzfTtzd2l0Y2goaC5icm93c2VyKXtjYXNlXCJjaHJvbWVcIjppZighaXx8IWkuc2hpbVBlZXJDb25uZWN0aW9ufHwhbS5zaGltQ2hyb21lKXJldHVybiBvKFwiQ2hyb21lIHNoaW0gaXMgbm90IGluY2x1ZGVkIGluIHRoaXMgYWRhcHRlciByZWxlYXNlLlwiKSxkO2lmKG51bGw9PT1oLnZlcnNpb24pcmV0dXJuIG8oXCJDaHJvbWUgc2hpbSBjYW4gbm90IGRldGVybWluZSB2ZXJzaW9uLCBub3Qgc2hpbW1pbmcuXCIpLGQ7byhcImFkYXB0ZXIuanMgc2hpbW1pbmcgY2hyb21lLlwiKSxkLmJyb3dzZXJTaGltPWksYS5zaGltQWRkSWNlQ2FuZGlkYXRlTnVsbE9yRW1wdHkobixoKSxpLnNoaW1HZXRVc2VyTWVkaWEobixoKSxpLnNoaW1NZWRpYVN0cmVhbShuLGgpLGkuc2hpbVBlZXJDb25uZWN0aW9uKG4saCksaS5zaGltT25UcmFjayhuLGgpLGkuc2hpbUFkZFRyYWNrUmVtb3ZlVHJhY2sobixoKSxpLnNoaW1HZXRTZW5kZXJzV2l0aER0bWYobixoKSxpLnNoaW1HZXRTdGF0cyhuLGgpLGkuc2hpbVNlbmRlclJlY2VpdmVyR2V0U3RhdHMobixoKSxpLmZpeE5lZ290aWF0aW9uTmVlZGVkKG4saCksYS5zaGltUlRDSWNlQ2FuZGlkYXRlKG4saCksYS5zaGltQ29ubmVjdGlvblN0YXRlKG4saCksYS5zaGltTWF4TWVzc2FnZVNpemUobixoKSxhLnNoaW1TZW5kVGhyb3dUeXBlRXJyb3IobixoKSxhLnJlbW92ZUV4dG1hcEFsbG93TWl4ZWQobixoKTticmVhaztjYXNlXCJmaXJlZm94XCI6aWYoIXN8fCFzLnNoaW1QZWVyQ29ubmVjdGlvbnx8IW0uc2hpbUZpcmVmb3gpcmV0dXJuIG8oXCJGaXJlZm94IHNoaW0gaXMgbm90IGluY2x1ZGVkIGluIHRoaXMgYWRhcHRlciByZWxlYXNlLlwiKSxkO28oXCJhZGFwdGVyLmpzIHNoaW1taW5nIGZpcmVmb3guXCIpLGQuYnJvd3NlclNoaW09cyxhLnNoaW1BZGRJY2VDYW5kaWRhdGVOdWxsT3JFbXB0eShuLGgpLHMuc2hpbUdldFVzZXJNZWRpYShuLGgpLHMuc2hpbVBlZXJDb25uZWN0aW9uKG4saCkscy5zaGltT25UcmFjayhuLGgpLHMuc2hpbVJlbW92ZVN0cmVhbShuLGgpLHMuc2hpbVNlbmRlckdldFN0YXRzKG4saCkscy5zaGltUmVjZWl2ZXJHZXRTdGF0cyhuLGgpLHMuc2hpbVJUQ0RhdGFDaGFubmVsKG4saCkscy5zaGltQWRkVHJhbnNjZWl2ZXIobixoKSxzLnNoaW1HZXRQYXJhbWV0ZXJzKG4saCkscy5zaGltQ3JlYXRlT2ZmZXIobixoKSxzLnNoaW1DcmVhdGVBbnN3ZXIobixoKSxhLnNoaW1SVENJY2VDYW5kaWRhdGUobixoKSxhLnNoaW1Db25uZWN0aW9uU3RhdGUobixoKSxhLnNoaW1NYXhNZXNzYWdlU2l6ZShuLGgpLGEuc2hpbVNlbmRUaHJvd1R5cGVFcnJvcihuLGgpO2JyZWFrO2Nhc2VcImVkZ2VcIjppZighcnx8IXIuc2hpbVBlZXJDb25uZWN0aW9ufHwhbS5zaGltRWRnZSlyZXR1cm4gbyhcIk1TIGVkZ2Ugc2hpbSBpcyBub3QgaW5jbHVkZWQgaW4gdGhpcyBhZGFwdGVyIHJlbGVhc2UuXCIpLGQ7byhcImFkYXB0ZXIuanMgc2hpbW1pbmcgZWRnZS5cIiksZC5icm93c2VyU2hpbT1yLHIuc2hpbUdldFVzZXJNZWRpYShuLGgpLHIuc2hpbUdldERpc3BsYXlNZWRpYShuLGgpLHIuc2hpbVBlZXJDb25uZWN0aW9uKG4saCksci5zaGltUmVwbGFjZVRyYWNrKG4saCksYS5zaGltTWF4TWVzc2FnZVNpemUobixoKSxhLnNoaW1TZW5kVGhyb3dUeXBlRXJyb3IobixoKTticmVhaztjYXNlXCJzYWZhcmlcIjppZighdHx8IW0uc2hpbVNhZmFyaSlyZXR1cm4gbyhcIlNhZmFyaSBzaGltIGlzIG5vdCBpbmNsdWRlZCBpbiB0aGlzIGFkYXB0ZXIgcmVsZWFzZS5cIiksZDtvKFwiYWRhcHRlci5qcyBzaGltbWluZyBzYWZhcmkuXCIpLGQuYnJvd3NlclNoaW09dCxhLnNoaW1BZGRJY2VDYW5kaWRhdGVOdWxsT3JFbXB0eShuLGgpLHQuc2hpbVJUQ0ljZVNlcnZlclVybHMobixoKSx0LnNoaW1DcmVhdGVPZmZlckxlZ2FjeShuLGgpLHQuc2hpbUNhbGxiYWNrc0FQSShuLGgpLHQuc2hpbUxvY2FsU3RyZWFtc0FQSShuLGgpLHQuc2hpbVJlbW90ZVN0cmVhbXNBUEkobixoKSx0LnNoaW1UcmFja0V2ZW50VHJhbnNjZWl2ZXIobixoKSx0LnNoaW1HZXRVc2VyTWVkaWEobixoKSx0LnNoaW1BdWRpb0NvbnRleHQobixoKSxhLnNoaW1SVENJY2VDYW5kaWRhdGUobixoKSxhLnNoaW1NYXhNZXNzYWdlU2l6ZShuLGgpLGEuc2hpbVNlbmRUaHJvd1R5cGVFcnJvcihuLGgpLGEucmVtb3ZlRXh0bWFwQWxsb3dNaXhlZChuLGgpO2JyZWFrO2RlZmF1bHQ6byhcIlVuc3VwcG9ydGVkIGJyb3dzZXIhXCIpfXJldHVybiBkfVxufSx7XCIuL3V0aWxzXCI6XCJpU3hDXCIsXCIuL2Nocm9tZS9jaHJvbWVfc2hpbVwiOlwidUk1WFwiLFwiLi9lZGdlL2VkZ2Vfc2hpbVwiOlwiWFJpY1wiLFwiLi9maXJlZm94L2ZpcmVmb3hfc2hpbVwiOlwiRnpkclwiLFwiLi9zYWZhcmkvc2FmYXJpX3NoaW1cIjpcInQxbExcIixcIi4vY29tbW9uX3NoaW1cIjpcIkdPUUtcIn1dLFwidEkxWFwiOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKSB7XG5cInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLmRlZmF1bHQ9dm9pZCAwO3ZhciBlPXJlcXVpcmUoXCIuL2FkYXB0ZXJfZmFjdG9yeS5qc1wiKSx0PSgwLGUuYWRhcHRlckZhY3RvcnkpKHt3aW5kb3c6XCJ1bmRlZmluZWRcIj09dHlwZW9mIHdpbmRvdz92b2lkIDA6d2luZG93fSksZD10O2V4cG9ydHMuZGVmYXVsdD1kO1xufSx7XCIuL2FkYXB0ZXJfZmFjdG9yeS5qc1wiOlwiS3RsR1wifV0sXCJzWHRWXCI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpIHtcblwidXNlIHN0cmljdFwiO3ZhciBlPXRoaXMmJnRoaXMuX19pbXBvcnREZWZhdWx0fHxmdW5jdGlvbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19O09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGV4cG9ydHMud2ViUlRDQWRhcHRlcj12b2lkIDA7dmFyIHQ9ZShyZXF1aXJlKFwid2VicnRjLWFkYXB0ZXJcIikpO2V4cG9ydHMud2ViUlRDQWRhcHRlcj10LmRlZmF1bHQ7XG59LHtcIndlYnJ0Yy1hZGFwdGVyXCI6XCJ0STFYXCJ9XSxcIkkzMWZcIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cykge1xuXCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5TdXBwb3J0cz12b2lkIDA7dmFyIHI9cmVxdWlyZShcIi4vYWRhcHRlclwiKTtleHBvcnRzLlN1cHBvcnRzPW5ldyhmdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLmlzSU9TPVtcImlQYWRcIixcImlQaG9uZVwiLFwiaVBvZFwiXS5pbmNsdWRlcyhuYXZpZ2F0b3IucGxhdGZvcm0pLHRoaXMuc3VwcG9ydGVkQnJvd3NlcnM9W1wiZmlyZWZveFwiLFwiY2hyb21lXCIsXCJzYWZhcmlcIl0sdGhpcy5taW5GaXJlZm94VmVyc2lvbj01OSx0aGlzLm1pbkNocm9tZVZlcnNpb249NzIsdGhpcy5taW5TYWZhcmlWZXJzaW9uPTYwNX1yZXR1cm4gZS5wcm90b3R5cGUuaXNXZWJSVENTdXBwb3J0ZWQ9ZnVuY3Rpb24oKXtyZXR1cm5cInVuZGVmaW5lZFwiIT10eXBlb2YgUlRDUGVlckNvbm5lY3Rpb259LGUucHJvdG90eXBlLmlzQnJvd3NlclN1cHBvcnRlZD1mdW5jdGlvbigpe3ZhciByPXRoaXMuZ2V0QnJvd3NlcigpLGU9dGhpcy5nZXRWZXJzaW9uKCk7cmV0dXJuISF0aGlzLnN1cHBvcnRlZEJyb3dzZXJzLmluY2x1ZGVzKHIpJiYoXCJjaHJvbWVcIj09PXI/ZT49dGhpcy5taW5DaHJvbWVWZXJzaW9uOlwiZmlyZWZveFwiPT09cj9lPj10aGlzLm1pbkZpcmVmb3hWZXJzaW9uOlwic2FmYXJpXCI9PT1yJiYoIXRoaXMuaXNJT1MmJmU+PXRoaXMubWluU2FmYXJpVmVyc2lvbikpfSxlLnByb3RvdHlwZS5nZXRCcm93c2VyPWZ1bmN0aW9uKCl7cmV0dXJuIHIud2ViUlRDQWRhcHRlci5icm93c2VyRGV0YWlscy5icm93c2VyfSxlLnByb3RvdHlwZS5nZXRWZXJzaW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHIud2ViUlRDQWRhcHRlci5icm93c2VyRGV0YWlscy52ZXJzaW9ufHwwfSxlLnByb3RvdHlwZS5pc1VuaWZpZWRQbGFuU3VwcG9ydGVkPWZ1bmN0aW9uKCl7dmFyIGUsaT10aGlzLmdldEJyb3dzZXIoKSx0PXIud2ViUlRDQWRhcHRlci5icm93c2VyRGV0YWlscy52ZXJzaW9ufHwwO2lmKFwiY2hyb21lXCI9PT1pJiZ0PDcyKXJldHVybiExO2lmKFwiZmlyZWZveFwiPT09aSYmdD49NTkpcmV0dXJuITA7aWYoISh3aW5kb3cuUlRDUnRwVHJhbnNjZWl2ZXImJlwiY3VycmVudERpcmVjdGlvblwiaW4gUlRDUnRwVHJhbnNjZWl2ZXIucHJvdG90eXBlKSlyZXR1cm4hMTt2YXIgbz0hMTt0cnl7KGU9bmV3IFJUQ1BlZXJDb25uZWN0aW9uKS5hZGRUcmFuc2NlaXZlcihcImF1ZGlvXCIpLG89ITB9Y2F0Y2gocyl7fWZpbmFsbHl7ZSYmZS5jbG9zZSgpfXJldHVybiBvfSxlLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVyblwiU3VwcG9ydHM6IFxcbiAgICBicm93c2VyOlwiK3RoaXMuZ2V0QnJvd3NlcigpK1wiIFxcbiAgICB2ZXJzaW9uOlwiK3RoaXMuZ2V0VmVyc2lvbigpK1wiIFxcbiAgICBpc0lPUzpcIit0aGlzLmlzSU9TK1wiIFxcbiAgICBpc1dlYlJUQ1N1cHBvcnRlZDpcIit0aGlzLmlzV2ViUlRDU3VwcG9ydGVkKCkrXCIgXFxuICAgIGlzQnJvd3NlclN1cHBvcnRlZDpcIit0aGlzLmlzQnJvd3NlclN1cHBvcnRlZCgpK1wiIFxcbiAgICBpc1VuaWZpZWRQbGFuU3VwcG9ydGVkOlwiK3RoaXMuaXNVbmlmaWVkUGxhblN1cHBvcnRlZCgpfSxlfSgpKTtcbn0se1wiLi9hZGFwdGVyXCI6XCJzWHRWXCJ9XSxcIkJIWGZcIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cykge1xuXCJ1c2Ugc3RyaWN0XCI7dmFyIGU9dGhpcyYmdGhpcy5fX2NyZWF0ZUJpbmRpbmd8fChPYmplY3QuY3JlYXRlP2Z1bmN0aW9uKGUsdCxyLG8pe3ZvaWQgMD09PW8mJihvPXIpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLG8se2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRbcl19fSl9OmZ1bmN0aW9uKGUsdCxyLG8pe3ZvaWQgMD09PW8mJihvPXIpLGVbb109dFtyXX0pLHQ9dGhpcyYmdGhpcy5fX3NldE1vZHVsZURlZmF1bHR8fChPYmplY3QuY3JlYXRlP2Z1bmN0aW9uKGUsdCl7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJkZWZhdWx0XCIse2VudW1lcmFibGU6ITAsdmFsdWU6dH0pfTpmdW5jdGlvbihlLHQpe2UuZGVmYXVsdD10fSkscj10aGlzJiZ0aGlzLl9faW1wb3J0U3Rhcnx8ZnVuY3Rpb24ocil7aWYociYmci5fX2VzTW9kdWxlKXJldHVybiByO3ZhciBvPXt9O2lmKG51bGwhPXIpZm9yKHZhciBuIGluIHIpXCJkZWZhdWx0XCIhPT1uJiZPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocixuKSYmZShvLHIsbik7cmV0dXJuIHQobyxyKSxvfTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLnV0aWw9dm9pZCAwO3ZhciBvPXIocmVxdWlyZShcInBlZXJqcy1qcy1iaW5hcnlwYWNrXCIpKSxuPXJlcXVpcmUoXCIuL3N1cHBvcnRzXCIpLGk9e2ljZVNlcnZlcnM6W3t1cmxzOlwic3R1bjpzdHVuLmwuZ29vZ2xlLmNvbToxOTMwMlwifSx7dXJsczpcInR1cm46MC5wZWVyanMuY29tOjM0NzhcIix1c2VybmFtZTpcInBlZXJqc1wiLGNyZWRlbnRpYWw6XCJwZWVyanNwXCJ9XSxzZHBTZW1hbnRpY3M6XCJ1bmlmaWVkLXBsYW5cIn07ZXhwb3J0cy51dGlsPW5ldyhmdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLkNMT1VEX0hPU1Q9XCIwLnBlZXJqcy5jb21cIix0aGlzLkNMT1VEX1BPUlQ9NDQzLHRoaXMuY2h1bmtlZEJyb3dzZXJzPXtDaHJvbWU6MSxjaHJvbWU6MX0sdGhpcy5jaHVua2VkTVRVPTE2MzAwLHRoaXMuZGVmYXVsdENvbmZpZz1pLHRoaXMuYnJvd3Nlcj1uLlN1cHBvcnRzLmdldEJyb3dzZXIoKSx0aGlzLmJyb3dzZXJWZXJzaW9uPW4uU3VwcG9ydHMuZ2V0VmVyc2lvbigpLHRoaXMuc3VwcG9ydHM9ZnVuY3Rpb24oKXt2YXIgZSx0PXticm93c2VyOm4uU3VwcG9ydHMuaXNCcm93c2VyU3VwcG9ydGVkKCksd2ViUlRDOm4uU3VwcG9ydHMuaXNXZWJSVENTdXBwb3J0ZWQoKSxhdWRpb1ZpZGVvOiExLGRhdGE6ITEsYmluYXJ5QmxvYjohMSxyZWxpYWJsZTohMX07aWYoIXQud2ViUlRDKXJldHVybiB0O3RyeXtlPW5ldyBSVENQZWVyQ29ubmVjdGlvbihpKSx0LmF1ZGlvVmlkZW89ITA7dmFyIHI9dm9pZCAwO3RyeXtyPWUuY3JlYXRlRGF0YUNoYW5uZWwoXCJfUEVFUkpTVEVTVFwiLHtvcmRlcmVkOiEwfSksdC5kYXRhPSEwLHQucmVsaWFibGU9ISFyLm9yZGVyZWQ7dHJ5e3IuYmluYXJ5VHlwZT1cImJsb2JcIix0LmJpbmFyeUJsb2I9IW4uU3VwcG9ydHMuaXNJT1N9Y2F0Y2gobyl7fX1jYXRjaChvKXt9ZmluYWxseXtyJiZyLmNsb3NlKCl9fWNhdGNoKG8pe31maW5hbGx5e2UmJmUuY2xvc2UoKX1yZXR1cm4gdH0oKSx0aGlzLnBhY2s9by5wYWNrLHRoaXMudW5wYWNrPW8udW5wYWNrLHRoaXMuX2RhdGFDb3VudD0xfXJldHVybiBlLnByb3RvdHlwZS5ub29wPWZ1bmN0aW9uKCl7fSxlLnByb3RvdHlwZS52YWxpZGF0ZUlkPWZ1bmN0aW9uKGUpe3JldHVybiFlfHwvXltBLVphLXowLTldKyg/OlsgXy1dW0EtWmEtejAtOV0rKSokLy50ZXN0KGUpfSxlLnByb3RvdHlwZS5jaHVuaz1mdW5jdGlvbihlKXtmb3IodmFyIHQ9W10scj1lLnNpemUsbz1NYXRoLmNlaWwoci9leHBvcnRzLnV0aWwuY2h1bmtlZE1UVSksbj0wLGk9MDtpPHI7KXt2YXIgYT1NYXRoLm1pbihyLGkrZXhwb3J0cy51dGlsLmNodW5rZWRNVFUpLHU9ZS5zbGljZShpLGEpLHM9e19fcGVlckRhdGE6dGhpcy5fZGF0YUNvdW50LG46bixkYXRhOnUsdG90YWw6b307dC5wdXNoKHMpLGk9YSxuKyt9cmV0dXJuIHRoaXMuX2RhdGFDb3VudCsrLHR9LGUucHJvdG90eXBlLmJsb2JUb0FycmF5QnVmZmVyPWZ1bmN0aW9uKGUsdCl7dmFyIHI9bmV3IEZpbGVSZWFkZXI7cmV0dXJuIHIub25sb2FkPWZ1bmN0aW9uKGUpe2UudGFyZ2V0JiZ0KGUudGFyZ2V0LnJlc3VsdCl9LHIucmVhZEFzQXJyYXlCdWZmZXIoZSkscn0sZS5wcm90b3R5cGUuYmluYXJ5U3RyaW5nVG9BcnJheUJ1ZmZlcj1mdW5jdGlvbihlKXtmb3IodmFyIHQ9bmV3IFVpbnQ4QXJyYXkoZS5sZW5ndGgpLHI9MDtyPGUubGVuZ3RoO3IrKyl0W3JdPTI1NSZlLmNoYXJDb2RlQXQocik7cmV0dXJuIHQuYnVmZmVyfSxlLnByb3RvdHlwZS5yYW5kb21Ub2tlbj1mdW5jdGlvbigpe3JldHVybiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMil9LGUucHJvdG90eXBlLmlzU2VjdXJlPWZ1bmN0aW9uKCl7cmV0dXJuXCJodHRwczpcIj09PWxvY2F0aW9uLnByb3RvY29sfSxlfSgpKTtcbn0se1wicGVlcmpzLWpzLWJpbmFyeXBhY2tcIjpcImtkUHBcIixcIi4vc3VwcG9ydHNcIjpcIkkzMWZcIn1dLFwiSkpsU1wiOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKSB7XG5cInVzZSBzdHJpY3RcIjt2YXIgZT1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LHQ9XCJ+XCI7ZnVuY3Rpb24gbigpe31mdW5jdGlvbiByKGUsdCxuKXt0aGlzLmZuPWUsdGhpcy5jb250ZXh0PXQsdGhpcy5vbmNlPW58fCExfWZ1bmN0aW9uIG8oZSxuLG8scyxpKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBvKXRocm93IG5ldyBUeXBlRXJyb3IoXCJUaGUgbGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uXCIpO3ZhciBjPW5ldyByKG8sc3x8ZSxpKSxmPXQ/dCtuOm47cmV0dXJuIGUuX2V2ZW50c1tmXT9lLl9ldmVudHNbZl0uZm4/ZS5fZXZlbnRzW2ZdPVtlLl9ldmVudHNbZl0sY106ZS5fZXZlbnRzW2ZdLnB1c2goYyk6KGUuX2V2ZW50c1tmXT1jLGUuX2V2ZW50c0NvdW50KyspLGV9ZnVuY3Rpb24gcyhlLHQpezA9PS0tZS5fZXZlbnRzQ291bnQ/ZS5fZXZlbnRzPW5ldyBuOmRlbGV0ZSBlLl9ldmVudHNbdF19ZnVuY3Rpb24gaSgpe3RoaXMuX2V2ZW50cz1uZXcgbix0aGlzLl9ldmVudHNDb3VudD0wfU9iamVjdC5jcmVhdGUmJihuLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG51bGwpLChuZXcgbikuX19wcm90b19ffHwodD0hMSkpLGkucHJvdG90eXBlLmV2ZW50TmFtZXM9ZnVuY3Rpb24oKXt2YXIgbixyLG89W107aWYoMD09PXRoaXMuX2V2ZW50c0NvdW50KXJldHVybiBvO2ZvcihyIGluIG49dGhpcy5fZXZlbnRzKWUuY2FsbChuLHIpJiZvLnB1c2godD9yLnNsaWNlKDEpOnIpO3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzP28uY29uY2F0KE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMobikpOm99LGkucHJvdG90eXBlLmxpc3RlbmVycz1mdW5jdGlvbihlKXt2YXIgbj10P3QrZTplLHI9dGhpcy5fZXZlbnRzW25dO2lmKCFyKXJldHVybltdO2lmKHIuZm4pcmV0dXJuW3IuZm5dO2Zvcih2YXIgbz0wLHM9ci5sZW5ndGgsaT1uZXcgQXJyYXkocyk7bzxzO28rKylpW29dPXJbb10uZm47cmV0dXJuIGl9LGkucHJvdG90eXBlLmxpc3RlbmVyQ291bnQ9ZnVuY3Rpb24oZSl7dmFyIG49dD90K2U6ZSxyPXRoaXMuX2V2ZW50c1tuXTtyZXR1cm4gcj9yLmZuPzE6ci5sZW5ndGg6MH0saS5wcm90b3R5cGUuZW1pdD1mdW5jdGlvbihlLG4scixvLHMsaSl7dmFyIGM9dD90K2U6ZTtpZighdGhpcy5fZXZlbnRzW2NdKXJldHVybiExO3ZhciBmLHUsYT10aGlzLl9ldmVudHNbY10sbD1hcmd1bWVudHMubGVuZ3RoO2lmKGEuZm4pe3N3aXRjaChhLm9uY2UmJnRoaXMucmVtb3ZlTGlzdGVuZXIoZSxhLmZuLHZvaWQgMCwhMCksbCl7Y2FzZSAxOnJldHVybiBhLmZuLmNhbGwoYS5jb250ZXh0KSwhMDtjYXNlIDI6cmV0dXJuIGEuZm4uY2FsbChhLmNvbnRleHQsbiksITA7Y2FzZSAzOnJldHVybiBhLmZuLmNhbGwoYS5jb250ZXh0LG4sciksITA7Y2FzZSA0OnJldHVybiBhLmZuLmNhbGwoYS5jb250ZXh0LG4scixvKSwhMDtjYXNlIDU6cmV0dXJuIGEuZm4uY2FsbChhLmNvbnRleHQsbixyLG8scyksITA7Y2FzZSA2OnJldHVybiBhLmZuLmNhbGwoYS5jb250ZXh0LG4scixvLHMsaSksITB9Zm9yKHU9MSxmPW5ldyBBcnJheShsLTEpO3U8bDt1KyspZlt1LTFdPWFyZ3VtZW50c1t1XTthLmZuLmFwcGx5KGEuY29udGV4dCxmKX1lbHNle3ZhciB2LGg9YS5sZW5ndGg7Zm9yKHU9MDt1PGg7dSsrKXN3aXRjaChhW3VdLm9uY2UmJnRoaXMucmVtb3ZlTGlzdGVuZXIoZSxhW3VdLmZuLHZvaWQgMCwhMCksbCl7Y2FzZSAxOmFbdV0uZm4uY2FsbChhW3VdLmNvbnRleHQpO2JyZWFrO2Nhc2UgMjphW3VdLmZuLmNhbGwoYVt1XS5jb250ZXh0LG4pO2JyZWFrO2Nhc2UgMzphW3VdLmZuLmNhbGwoYVt1XS5jb250ZXh0LG4scik7YnJlYWs7Y2FzZSA0OmFbdV0uZm4uY2FsbChhW3VdLmNvbnRleHQsbixyLG8pO2JyZWFrO2RlZmF1bHQ6aWYoIWYpZm9yKHY9MSxmPW5ldyBBcnJheShsLTEpO3Y8bDt2KyspZlt2LTFdPWFyZ3VtZW50c1t2XTthW3VdLmZuLmFwcGx5KGFbdV0uY29udGV4dCxmKX19cmV0dXJuITB9LGkucHJvdG90eXBlLm9uPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gbyh0aGlzLGUsdCxuLCExKX0saS5wcm90b3R5cGUub25jZT1mdW5jdGlvbihlLHQsbil7cmV0dXJuIG8odGhpcyxlLHQsbiwhMCl9LGkucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyPWZ1bmN0aW9uKGUsbixyLG8pe3ZhciBpPXQ/dCtlOmU7aWYoIXRoaXMuX2V2ZW50c1tpXSlyZXR1cm4gdGhpcztpZighbilyZXR1cm4gcyh0aGlzLGkpLHRoaXM7dmFyIGM9dGhpcy5fZXZlbnRzW2ldO2lmKGMuZm4pYy5mbiE9PW58fG8mJiFjLm9uY2V8fHImJmMuY29udGV4dCE9PXJ8fHModGhpcyxpKTtlbHNle2Zvcih2YXIgZj0wLHU9W10sYT1jLmxlbmd0aDtmPGE7ZisrKShjW2ZdLmZuIT09bnx8byYmIWNbZl0ub25jZXx8ciYmY1tmXS5jb250ZXh0IT09cikmJnUucHVzaChjW2ZdKTt1Lmxlbmd0aD90aGlzLl9ldmVudHNbaV09MT09PXUubGVuZ3RoP3VbMF06dTpzKHRoaXMsaSl9cmV0dXJuIHRoaXN9LGkucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycz1mdW5jdGlvbihlKXt2YXIgcjtyZXR1cm4gZT8ocj10P3QrZTplLHRoaXMuX2V2ZW50c1tyXSYmcyh0aGlzLHIpKToodGhpcy5fZXZlbnRzPW5ldyBuLHRoaXMuX2V2ZW50c0NvdW50PTApLHRoaXN9LGkucHJvdG90eXBlLm9mZj1pLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lcixpLnByb3RvdHlwZS5hZGRMaXN0ZW5lcj1pLnByb3RvdHlwZS5vbixpLnByZWZpeGVkPXQsaS5FdmVudEVtaXR0ZXI9aSxcInVuZGVmaW5lZFwiIT10eXBlb2YgbW9kdWxlJiYobW9kdWxlLmV4cG9ydHM9aSk7XG59LHt9XSxcIldPczlcIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cykge1xuXCJ1c2Ugc3RyaWN0XCI7dmFyIHI9dGhpcyYmdGhpcy5fX3JlYWR8fGZ1bmN0aW9uKHIsZSl7dmFyIG89XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZyW1N5bWJvbC5pdGVyYXRvcl07aWYoIW8pcmV0dXJuIHI7dmFyIHQsbixsPW8uY2FsbChyKSxpPVtdO3RyeXtmb3IoOyh2b2lkIDA9PT1lfHxlLS0gPjApJiYhKHQ9bC5uZXh0KCkpLmRvbmU7KWkucHVzaCh0LnZhbHVlKX1jYXRjaChzKXtuPXtlcnJvcjpzfX1maW5hbGx5e3RyeXt0JiYhdC5kb25lJiYobz1sLnJldHVybikmJm8uY2FsbChsKX1maW5hbGx5e2lmKG4pdGhyb3cgbi5lcnJvcn19cmV0dXJuIGl9LGU9dGhpcyYmdGhpcy5fX3NwcmVhZEFycmF5fHxmdW5jdGlvbihyLGUpe2Zvcih2YXIgbz0wLHQ9ZS5sZW5ndGgsbj1yLmxlbmd0aDtvPHQ7bysrLG4rKylyW25dPWVbb107cmV0dXJuIHJ9O09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGV4cG9ydHMuTG9nTGV2ZWw9dm9pZCAwO3ZhciBvLHQ9XCJQZWVySlM6IFwiOyFmdW5jdGlvbihyKXtyW3IuRGlzYWJsZWQ9MF09XCJEaXNhYmxlZFwiLHJbci5FcnJvcnM9MV09XCJFcnJvcnNcIixyW3IuV2FybmluZ3M9Ml09XCJXYXJuaW5nc1wiLHJbci5BbGw9M109XCJBbGxcIn0obz1leHBvcnRzLkxvZ0xldmVsfHwoZXhwb3J0cy5Mb2dMZXZlbD17fSkpO3ZhciBuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gbigpe3RoaXMuX2xvZ0xldmVsPW8uRGlzYWJsZWR9cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuLnByb3RvdHlwZSxcImxvZ0xldmVsXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sb2dMZXZlbH0sc2V0OmZ1bmN0aW9uKHIpe3RoaXMuX2xvZ0xldmVsPXJ9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksbi5wcm90b3R5cGUubG9nPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PVtdLG49MDtuPGFyZ3VtZW50cy5sZW5ndGg7bisrKXRbbl09YXJndW1lbnRzW25dO3RoaXMuX2xvZ0xldmVsPj1vLkFsbCYmdGhpcy5fcHJpbnQuYXBwbHkodGhpcyxlKFtvLkFsbF0scih0KSkpfSxuLnByb3RvdHlwZS53YXJuPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PVtdLG49MDtuPGFyZ3VtZW50cy5sZW5ndGg7bisrKXRbbl09YXJndW1lbnRzW25dO3RoaXMuX2xvZ0xldmVsPj1vLldhcm5pbmdzJiZ0aGlzLl9wcmludC5hcHBseSh0aGlzLGUoW28uV2FybmluZ3NdLHIodCkpKX0sbi5wcm90b3R5cGUuZXJyb3I9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9W10sbj0wO248YXJndW1lbnRzLmxlbmd0aDtuKyspdFtuXT1hcmd1bWVudHNbbl07dGhpcy5fbG9nTGV2ZWw+PW8uRXJyb3JzJiZ0aGlzLl9wcmludC5hcHBseSh0aGlzLGUoW28uRXJyb3JzXSxyKHQpKSl9LG4ucHJvdG90eXBlLnNldExvZ0Z1bmN0aW9uPWZ1bmN0aW9uKHIpe3RoaXMuX3ByaW50PXJ9LG4ucHJvdG90eXBlLl9wcmludD1mdW5jdGlvbihuKXtmb3IodmFyIGw9W10saT0xO2k8YXJndW1lbnRzLmxlbmd0aDtpKyspbFtpLTFdPWFyZ3VtZW50c1tpXTt2YXIgcz1lKFt0XSxyKGwpKTtmb3IodmFyIGEgaW4gcylzW2FdaW5zdGFuY2VvZiBFcnJvciYmKHNbYV09XCIoXCIrc1thXS5uYW1lK1wiKSBcIitzW2FdLm1lc3NhZ2UpO24+PW8uQWxsP2NvbnNvbGUubG9nLmFwcGx5KGNvbnNvbGUsZShbXSxyKHMpKSk6bj49by5XYXJuaW5ncz9jb25zb2xlLndhcm4uYXBwbHkoY29uc29sZSxlKFtcIldBUk5JTkdcIl0scihzKSkpOm4+PW8uRXJyb3JzJiZjb25zb2xlLmVycm9yLmFwcGx5KGNvbnNvbGUsZShbXCJFUlJPUlwiXSxyKHMpKSl9LG59KCk7ZXhwb3J0cy5kZWZhdWx0PW5ldyBuO1xufSx7fV0sXCJaUllmXCI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpIHtcblwidXNlIHN0cmljdFwiO3ZhciBlLHIsbyxuLHQsYSxpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGV4cG9ydHMuU2VydmVyTWVzc2FnZVR5cGU9ZXhwb3J0cy5Tb2NrZXRFdmVudFR5cGU9ZXhwb3J0cy5TZXJpYWxpemF0aW9uVHlwZT1leHBvcnRzLlBlZXJFcnJvclR5cGU9ZXhwb3J0cy5QZWVyRXZlbnRUeXBlPWV4cG9ydHMuQ29ubmVjdGlvblR5cGU9ZXhwb3J0cy5Db25uZWN0aW9uRXZlbnRUeXBlPXZvaWQgMCxmdW5jdGlvbihlKXtlLk9wZW49XCJvcGVuXCIsZS5TdHJlYW09XCJzdHJlYW1cIixlLkRhdGE9XCJkYXRhXCIsZS5DbG9zZT1cImNsb3NlXCIsZS5FcnJvcj1cImVycm9yXCIsZS5JY2VTdGF0ZUNoYW5nZWQ9XCJpY2VTdGF0ZUNoYW5nZWRcIn0oZT1leHBvcnRzLkNvbm5lY3Rpb25FdmVudFR5cGV8fChleHBvcnRzLkNvbm5lY3Rpb25FdmVudFR5cGU9e30pKSxmdW5jdGlvbihlKXtlLkRhdGE9XCJkYXRhXCIsZS5NZWRpYT1cIm1lZGlhXCJ9KHI9ZXhwb3J0cy5Db25uZWN0aW9uVHlwZXx8KGV4cG9ydHMuQ29ubmVjdGlvblR5cGU9e30pKSxmdW5jdGlvbihlKXtlLk9wZW49XCJvcGVuXCIsZS5DbG9zZT1cImNsb3NlXCIsZS5Db25uZWN0aW9uPVwiY29ubmVjdGlvblwiLGUuQ2FsbD1cImNhbGxcIixlLkRpc2Nvbm5lY3RlZD1cImRpc2Nvbm5lY3RlZFwiLGUuRXJyb3I9XCJlcnJvclwifShvPWV4cG9ydHMuUGVlckV2ZW50VHlwZXx8KGV4cG9ydHMuUGVlckV2ZW50VHlwZT17fSkpLGZ1bmN0aW9uKGUpe2UuQnJvd3NlckluY29tcGF0aWJsZT1cImJyb3dzZXItaW5jb21wYXRpYmxlXCIsZS5EaXNjb25uZWN0ZWQ9XCJkaXNjb25uZWN0ZWRcIixlLkludmFsaWRJRD1cImludmFsaWQtaWRcIixlLkludmFsaWRLZXk9XCJpbnZhbGlkLWtleVwiLGUuTmV0d29yaz1cIm5ldHdvcmtcIixlLlBlZXJVbmF2YWlsYWJsZT1cInBlZXItdW5hdmFpbGFibGVcIixlLlNzbFVuYXZhaWxhYmxlPVwic3NsLXVuYXZhaWxhYmxlXCIsZS5TZXJ2ZXJFcnJvcj1cInNlcnZlci1lcnJvclwiLGUuU29ja2V0RXJyb3I9XCJzb2NrZXQtZXJyb3JcIixlLlNvY2tldENsb3NlZD1cInNvY2tldC1jbG9zZWRcIixlLlVuYXZhaWxhYmxlSUQ9XCJ1bmF2YWlsYWJsZS1pZFwiLGUuV2ViUlRDPVwid2VicnRjXCJ9KG49ZXhwb3J0cy5QZWVyRXJyb3JUeXBlfHwoZXhwb3J0cy5QZWVyRXJyb3JUeXBlPXt9KSksZnVuY3Rpb24oZSl7ZS5CaW5hcnk9XCJiaW5hcnlcIixlLkJpbmFyeVVURjg9XCJiaW5hcnktdXRmOFwiLGUuSlNPTj1cImpzb25cIn0odD1leHBvcnRzLlNlcmlhbGl6YXRpb25UeXBlfHwoZXhwb3J0cy5TZXJpYWxpemF0aW9uVHlwZT17fSkpLGZ1bmN0aW9uKGUpe2UuTWVzc2FnZT1cIm1lc3NhZ2VcIixlLkRpc2Nvbm5lY3RlZD1cImRpc2Nvbm5lY3RlZFwiLGUuRXJyb3I9XCJlcnJvclwiLGUuQ2xvc2U9XCJjbG9zZVwifShhPWV4cG9ydHMuU29ja2V0RXZlbnRUeXBlfHwoZXhwb3J0cy5Tb2NrZXRFdmVudFR5cGU9e30pKSxmdW5jdGlvbihlKXtlLkhlYXJ0YmVhdD1cIkhFQVJUQkVBVFwiLGUuQ2FuZGlkYXRlPVwiQ0FORElEQVRFXCIsZS5PZmZlcj1cIk9GRkVSXCIsZS5BbnN3ZXI9XCJBTlNXRVJcIixlLk9wZW49XCJPUEVOXCIsZS5FcnJvcj1cIkVSUk9SXCIsZS5JZFRha2VuPVwiSUQtVEFLRU5cIixlLkludmFsaWRLZXk9XCJJTlZBTElELUtFWVwiLGUuTGVhdmU9XCJMRUFWRVwiLGUuRXhwaXJlPVwiRVhQSVJFXCJ9KGk9ZXhwb3J0cy5TZXJ2ZXJNZXNzYWdlVHlwZXx8KGV4cG9ydHMuU2VydmVyTWVzc2FnZVR5cGU9e30pKTtcbn0se31dLFwid0psdlwiOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKSB7XG5cInVzZSBzdHJpY3RcIjt2YXIgZT10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgZT1mdW5jdGlvbih0LG4pe3JldHVybihlPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgbiBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LG4pJiYoZVtuXT10W25dKX0pKHQsbil9O3JldHVybiBmdW5jdGlvbih0LG4pe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIG4mJm51bGwhPT1uKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiK1N0cmluZyhuKStcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO2Z1bmN0aW9uIG8oKXt0aGlzLmNvbnN0cnVjdG9yPXR9ZSh0LG4pLHQucHJvdG90eXBlPW51bGw9PT1uP09iamVjdC5jcmVhdGUobik6KG8ucHJvdG90eXBlPW4ucHJvdG90eXBlLG5ldyBvKX19KCksdD10aGlzJiZ0aGlzLl9fcmVhZHx8ZnVuY3Rpb24oZSx0KXt2YXIgbj1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJmVbU3ltYm9sLml0ZXJhdG9yXTtpZighbilyZXR1cm4gZTt2YXIgbyxzLHI9bi5jYWxsKGUpLGk9W107dHJ5e2Zvcig7KHZvaWQgMD09PXR8fHQtLSA+MCkmJiEobz1yLm5leHQoKSkuZG9uZTspaS5wdXNoKG8udmFsdWUpfWNhdGNoKGMpe3M9e2Vycm9yOmN9fWZpbmFsbHl7dHJ5e28mJiFvLmRvbmUmJihuPXIucmV0dXJuKSYmbi5jYWxsKHIpfWZpbmFsbHl7aWYocyl0aHJvdyBzLmVycm9yfX1yZXR1cm4gaX0sbj10aGlzJiZ0aGlzLl9fc3ByZWFkQXJyYXl8fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPTAsbz10Lmxlbmd0aCxzPWUubGVuZ3RoO248bztuKysscysrKWVbc109dFtuXTtyZXR1cm4gZX0sbz10aGlzJiZ0aGlzLl9fdmFsdWVzfHxmdW5jdGlvbihlKXt2YXIgdD1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlN5bWJvbC5pdGVyYXRvcixuPXQmJmVbdF0sbz0wO2lmKG4pcmV0dXJuIG4uY2FsbChlKTtpZihlJiZcIm51bWJlclwiPT10eXBlb2YgZS5sZW5ndGgpcmV0dXJue25leHQ6ZnVuY3Rpb24oKXtyZXR1cm4gZSYmbz49ZS5sZW5ndGgmJihlPXZvaWQgMCkse3ZhbHVlOmUmJmVbbysrXSxkb25lOiFlfX19O3Rocm93IG5ldyBUeXBlRXJyb3IodD9cIk9iamVjdCBpcyBub3QgaXRlcmFibGUuXCI6XCJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpfSxzPXRoaXMmJnRoaXMuX19pbXBvcnREZWZhdWx0fHxmdW5jdGlvbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19O09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGV4cG9ydHMuU29ja2V0PXZvaWQgMDt2YXIgcj1yZXF1aXJlKFwiZXZlbnRlbWl0dGVyM1wiKSxpPXMocmVxdWlyZShcIi4vbG9nZ2VyXCIpKSxjPXJlcXVpcmUoXCIuL2VudW1zXCIpLGE9ZnVuY3Rpb24ocyl7ZnVuY3Rpb24gcihlLHQsbixvLHIsaSl7dm9pZCAwPT09aSYmKGk9NWUzKTt2YXIgYz1zLmNhbGwodGhpcyl8fHRoaXM7Yy5waW5nSW50ZXJ2YWw9aSxjLl9kaXNjb25uZWN0ZWQ9ITAsYy5fbWVzc2FnZXNRdWV1ZT1bXTt2YXIgYT1lP1wid3NzOi8vXCI6XCJ3czovL1wiO3JldHVybiBjLl9iYXNlVXJsPWErdCtcIjpcIituK28rXCJwZWVyanM/a2V5PVwiK3IsY31yZXR1cm4gZShyLHMpLHIucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpczt0aGlzLl9pZD1lO3ZhciBvPXRoaXMuX2Jhc2VVcmwrXCImaWQ9XCIrZStcIiZ0b2tlbj1cIit0OyF0aGlzLl9zb2NrZXQmJnRoaXMuX2Rpc2Nvbm5lY3RlZCYmKHRoaXMuX3NvY2tldD1uZXcgV2ViU29ja2V0KG8pLHRoaXMuX2Rpc2Nvbm5lY3RlZD0hMSx0aGlzLl9zb2NrZXQub25tZXNzYWdlPWZ1bmN0aW9uKGUpe3ZhciB0O3RyeXt0PUpTT04ucGFyc2UoZS5kYXRhKSxpLmRlZmF1bHQubG9nKFwiU2VydmVyIG1lc3NhZ2UgcmVjZWl2ZWQ6XCIsdCl9Y2F0Y2gobyl7cmV0dXJuIHZvaWQgaS5kZWZhdWx0LmxvZyhcIkludmFsaWQgc2VydmVyIG1lc3NhZ2VcIixlLmRhdGEpfW4uZW1pdChjLlNvY2tldEV2ZW50VHlwZS5NZXNzYWdlLHQpfSx0aGlzLl9zb2NrZXQub25jbG9zZT1mdW5jdGlvbihlKXtuLl9kaXNjb25uZWN0ZWR8fChpLmRlZmF1bHQubG9nKFwiU29ja2V0IGNsb3NlZC5cIixlKSxuLl9jbGVhbnVwKCksbi5fZGlzY29ubmVjdGVkPSEwLG4uZW1pdChjLlNvY2tldEV2ZW50VHlwZS5EaXNjb25uZWN0ZWQpKX0sdGhpcy5fc29ja2V0Lm9ub3Blbj1mdW5jdGlvbigpe24uX2Rpc2Nvbm5lY3RlZHx8KG4uX3NlbmRRdWV1ZWRNZXNzYWdlcygpLGkuZGVmYXVsdC5sb2coXCJTb2NrZXQgb3BlblwiKSxuLl9zY2hlZHVsZUhlYXJ0YmVhdCgpKX0pfSxyLnByb3RvdHlwZS5fc2NoZWR1bGVIZWFydGJlYXQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMuX3dzUGluZ1RpbWVyPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtlLl9zZW5kSGVhcnRiZWF0KCl9LHRoaXMucGluZ0ludGVydmFsKX0sci5wcm90b3R5cGUuX3NlbmRIZWFydGJlYXQ9ZnVuY3Rpb24oKXtpZih0aGlzLl93c09wZW4oKSl7dmFyIGU9SlNPTi5zdHJpbmdpZnkoe3R5cGU6Yy5TZXJ2ZXJNZXNzYWdlVHlwZS5IZWFydGJlYXR9KTt0aGlzLl9zb2NrZXQuc2VuZChlKSx0aGlzLl9zY2hlZHVsZUhlYXJ0YmVhdCgpfWVsc2UgaS5kZWZhdWx0LmxvZyhcIkNhbm5vdCBzZW5kIGhlYXJ0YmVhdCwgYmVjYXVzZSBzb2NrZXQgY2xvc2VkXCIpfSxyLnByb3RvdHlwZS5fd3NPcGVuPWZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLl9zb2NrZXQmJjE9PT10aGlzLl9zb2NrZXQucmVhZHlTdGF0ZX0sci5wcm90b3R5cGUuX3NlbmRRdWV1ZWRNZXNzYWdlcz1mdW5jdGlvbigpe3ZhciBlLHMscj1uKFtdLHQodGhpcy5fbWVzc2FnZXNRdWV1ZSkpO3RoaXMuX21lc3NhZ2VzUXVldWU9W107dHJ5e2Zvcih2YXIgaT1vKHIpLGM9aS5uZXh0KCk7IWMuZG9uZTtjPWkubmV4dCgpKXt2YXIgYT1jLnZhbHVlO3RoaXMuc2VuZChhKX19Y2F0Y2godSl7ZT17ZXJyb3I6dX19ZmluYWxseXt0cnl7YyYmIWMuZG9uZSYmKHM9aS5yZXR1cm4pJiZzLmNhbGwoaSl9ZmluYWxseXtpZihlKXRocm93IGUuZXJyb3J9fX0sci5wcm90b3R5cGUuc2VuZD1mdW5jdGlvbihlKXtpZighdGhpcy5fZGlzY29ubmVjdGVkKWlmKHRoaXMuX2lkKWlmKGUudHlwZSl7aWYodGhpcy5fd3NPcGVuKCkpe3ZhciB0PUpTT04uc3RyaW5naWZ5KGUpO3RoaXMuX3NvY2tldC5zZW5kKHQpfX1lbHNlIHRoaXMuZW1pdChjLlNvY2tldEV2ZW50VHlwZS5FcnJvcixcIkludmFsaWQgbWVzc2FnZVwiKTtlbHNlIHRoaXMuX21lc3NhZ2VzUXVldWUucHVzaChlKX0sci5wcm90b3R5cGUuY2xvc2U9ZnVuY3Rpb24oKXt0aGlzLl9kaXNjb25uZWN0ZWR8fCh0aGlzLl9jbGVhbnVwKCksdGhpcy5fZGlzY29ubmVjdGVkPSEwKX0sci5wcm90b3R5cGUuX2NsZWFudXA9ZnVuY3Rpb24oKXt0aGlzLl9zb2NrZXQmJih0aGlzLl9zb2NrZXQub25vcGVuPXRoaXMuX3NvY2tldC5vbm1lc3NhZ2U9dGhpcy5fc29ja2V0Lm9uY2xvc2U9bnVsbCx0aGlzLl9zb2NrZXQuY2xvc2UoKSx0aGlzLl9zb2NrZXQ9dm9pZCAwKSxjbGVhclRpbWVvdXQodGhpcy5fd3NQaW5nVGltZXIpfSxyfShyLkV2ZW50RW1pdHRlcik7ZXhwb3J0cy5Tb2NrZXQ9YTtcbn0se1wiZXZlbnRlbWl0dGVyM1wiOlwiSkpsU1wiLFwiLi9sb2dnZXJcIjpcIldPczlcIixcIi4vZW51bXNcIjpcIlpSWWZcIn1dLFwiSENkWFwiOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKSB7XG5cInVzZSBzdHJpY3RcIjt2YXIgZT10aGlzJiZ0aGlzLl9fYXNzaWdufHxmdW5jdGlvbigpe3JldHVybihlPU9iamVjdC5hc3NpZ258fGZ1bmN0aW9uKGUpe2Zvcih2YXIgbix0PTEsbz1hcmd1bWVudHMubGVuZ3RoO3Q8bzt0KyspZm9yKHZhciBpIGluIG49YXJndW1lbnRzW3RdKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChuLGkpJiYoZVtpXT1uW2ldKTtyZXR1cm4gZX0pLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sbj10aGlzJiZ0aGlzLl9fYXdhaXRlcnx8ZnVuY3Rpb24oZSxuLHQsbyl7cmV0dXJuIG5ldyh0fHwodD1Qcm9taXNlKSkoZnVuY3Rpb24oaSxyKXtmdW5jdGlvbiBjKGUpe3RyeXtzKG8ubmV4dChlKSl9Y2F0Y2gobil7cihuKX19ZnVuY3Rpb24gYShlKXt0cnl7cyhvLnRocm93KGUpKX1jYXRjaChuKXtyKG4pfX1mdW5jdGlvbiBzKGUpe3ZhciBuO2UuZG9uZT9pKGUudmFsdWUpOihuPWUudmFsdWUsbiBpbnN0YW5jZW9mIHQ/bjpuZXcgdChmdW5jdGlvbihlKXtlKG4pfSkpLnRoZW4oYyxhKX1zKChvPW8uYXBwbHkoZSxufHxbXSkpLm5leHQoKSl9KX0sdD10aGlzJiZ0aGlzLl9fZ2VuZXJhdG9yfHxmdW5jdGlvbihlLG4pe3ZhciB0LG8saSxyLGM9e2xhYmVsOjAsc2VudDpmdW5jdGlvbigpe2lmKDEmaVswXSl0aHJvdyBpWzFdO3JldHVybiBpWzFdfSx0cnlzOltdLG9wczpbXX07cmV0dXJuIHI9e25leHQ6YSgwKSx0aHJvdzphKDEpLHJldHVybjphKDIpfSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJihyW1N5bWJvbC5pdGVyYXRvcl09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pLHI7ZnVuY3Rpb24gYShyKXtyZXR1cm4gZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKHIpe2lmKHQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7Zm9yKDtjOyl0cnl7aWYodD0xLG8mJihpPTImclswXT9vLnJldHVybjpyWzBdP28udGhyb3d8fCgoaT1vLnJldHVybikmJmkuY2FsbChvKSwwKTpvLm5leHQpJiYhKGk9aS5jYWxsKG8sclsxXSkpLmRvbmUpcmV0dXJuIGk7c3dpdGNoKG89MCxpJiYocj1bMiZyWzBdLGkudmFsdWVdKSxyWzBdKXtjYXNlIDA6Y2FzZSAxOmk9cjticmVhaztjYXNlIDQ6cmV0dXJuIGMubGFiZWwrKyx7dmFsdWU6clsxXSxkb25lOiExfTtjYXNlIDU6Yy5sYWJlbCsrLG89clsxXSxyPVswXTtjb250aW51ZTtjYXNlIDc6cj1jLm9wcy5wb3AoKSxjLnRyeXMucG9wKCk7Y29udGludWU7ZGVmYXVsdDppZighKGk9KGk9Yy50cnlzKS5sZW5ndGg+MCYmaVtpLmxlbmd0aC0xXSkmJig2PT09clswXXx8Mj09PXJbMF0pKXtjPTA7Y29udGludWV9aWYoMz09PXJbMF0mJighaXx8clsxXT5pWzBdJiZyWzFdPGlbM10pKXtjLmxhYmVsPXJbMV07YnJlYWt9aWYoNj09PXJbMF0mJmMubGFiZWw8aVsxXSl7Yy5sYWJlbD1pWzFdLGk9cjticmVha31pZihpJiZjLmxhYmVsPGlbMl0pe2MubGFiZWw9aVsyXSxjLm9wcy5wdXNoKHIpO2JyZWFrfWlbMl0mJmMub3BzLnBvcCgpLGMudHJ5cy5wb3AoKTtjb250aW51ZX1yPW4uY2FsbChlLGMpfWNhdGNoKGEpe3I9WzYsYV0sbz0wfWZpbmFsbHl7dD1pPTB9aWYoNSZyWzBdKXRocm93IHJbMV07cmV0dXJue3ZhbHVlOnJbMF0/clsxXTp2b2lkIDAsZG9uZTohMH19KFtyLGFdKX19fSxvPXRoaXMmJnRoaXMuX19pbXBvcnREZWZhdWx0fHxmdW5jdGlvbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19O09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGV4cG9ydHMuTmVnb3RpYXRvcj12b2lkIDA7dmFyIGk9cmVxdWlyZShcIi4vdXRpbFwiKSxyPW8ocmVxdWlyZShcIi4vbG9nZ2VyXCIpKSxjPXJlcXVpcmUoXCIuL2VudW1zXCIpLGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBvKGUpe3RoaXMuY29ubmVjdGlvbj1lfXJldHVybiBvLnByb3RvdHlwZS5zdGFydENvbm5lY3Rpb249ZnVuY3Rpb24oZSl7dmFyIG49dGhpcy5fc3RhcnRQZWVyQ29ubmVjdGlvbigpO2lmKHRoaXMuY29ubmVjdGlvbi5wZWVyQ29ubmVjdGlvbj1uLHRoaXMuY29ubmVjdGlvbi50eXBlPT09Yy5Db25uZWN0aW9uVHlwZS5NZWRpYSYmZS5fc3RyZWFtJiZ0aGlzLl9hZGRUcmFja3NUb0Nvbm5lY3Rpb24oZS5fc3RyZWFtLG4pLGUub3JpZ2luYXRvcil7aWYodGhpcy5jb25uZWN0aW9uLnR5cGU9PT1jLkNvbm5lY3Rpb25UeXBlLkRhdGEpe3ZhciB0PXRoaXMuY29ubmVjdGlvbixvPXtvcmRlcmVkOiEhZS5yZWxpYWJsZX0saT1uLmNyZWF0ZURhdGFDaGFubmVsKHQubGFiZWwsbyk7dC5pbml0aWFsaXplKGkpfXRoaXMuX21ha2VPZmZlcigpfWVsc2UgdGhpcy5oYW5kbGVTRFAoXCJPRkZFUlwiLGUuc2RwKX0sby5wcm90b3R5cGUuX3N0YXJ0UGVlckNvbm5lY3Rpb249ZnVuY3Rpb24oKXtyLmRlZmF1bHQubG9nKFwiQ3JlYXRpbmcgUlRDUGVlckNvbm5lY3Rpb24uXCIpO3ZhciBlPW5ldyBSVENQZWVyQ29ubmVjdGlvbih0aGlzLmNvbm5lY3Rpb24ucHJvdmlkZXIub3B0aW9ucy5jb25maWcpO3JldHVybiB0aGlzLl9zZXR1cExpc3RlbmVycyhlKSxlfSxvLnByb3RvdHlwZS5fc2V0dXBMaXN0ZW5lcnM9ZnVuY3Rpb24oZSl7dmFyIG49dGhpcyx0PXRoaXMuY29ubmVjdGlvbi5wZWVyLG89dGhpcy5jb25uZWN0aW9uLmNvbm5lY3Rpb25JZCxhPXRoaXMuY29ubmVjdGlvbi50eXBlLHM9dGhpcy5jb25uZWN0aW9uLnByb3ZpZGVyO3IuZGVmYXVsdC5sb2coXCJMaXN0ZW5pbmcgZm9yIElDRSBjYW5kaWRhdGVzLlwiKSxlLm9uaWNlY2FuZGlkYXRlPWZ1bmN0aW9uKGUpe2UuY2FuZGlkYXRlJiZlLmNhbmRpZGF0ZS5jYW5kaWRhdGUmJihyLmRlZmF1bHQubG9nKFwiUmVjZWl2ZWQgSUNFIGNhbmRpZGF0ZXMgZm9yIFwiK3QrXCI6XCIsZS5jYW5kaWRhdGUpLHMuc29ja2V0LnNlbmQoe3R5cGU6Yy5TZXJ2ZXJNZXNzYWdlVHlwZS5DYW5kaWRhdGUscGF5bG9hZDp7Y2FuZGlkYXRlOmUuY2FuZGlkYXRlLHR5cGU6YSxjb25uZWN0aW9uSWQ6b30sZHN0OnR9KSl9LGUub25pY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXtzd2l0Y2goZS5pY2VDb25uZWN0aW9uU3RhdGUpe2Nhc2VcImZhaWxlZFwiOnIuZGVmYXVsdC5sb2coXCJpY2VDb25uZWN0aW9uU3RhdGUgaXMgZmFpbGVkLCBjbG9zaW5nIGNvbm5lY3Rpb25zIHRvIFwiK3QpLG4uY29ubmVjdGlvbi5lbWl0KGMuQ29ubmVjdGlvbkV2ZW50VHlwZS5FcnJvcixuZXcgRXJyb3IoXCJOZWdvdGlhdGlvbiBvZiBjb25uZWN0aW9uIHRvIFwiK3QrXCIgZmFpbGVkLlwiKSksbi5jb25uZWN0aW9uLmNsb3NlKCk7YnJlYWs7Y2FzZVwiY2xvc2VkXCI6ci5kZWZhdWx0LmxvZyhcImljZUNvbm5lY3Rpb25TdGF0ZSBpcyBjbG9zZWQsIGNsb3NpbmcgY29ubmVjdGlvbnMgdG8gXCIrdCksbi5jb25uZWN0aW9uLmVtaXQoYy5Db25uZWN0aW9uRXZlbnRUeXBlLkVycm9yLG5ldyBFcnJvcihcIkNvbm5lY3Rpb24gdG8gXCIrdCtcIiBjbG9zZWQuXCIpKSxuLmNvbm5lY3Rpb24uY2xvc2UoKTticmVhaztjYXNlXCJkaXNjb25uZWN0ZWRcIjpyLmRlZmF1bHQubG9nKFwiaWNlQ29ubmVjdGlvblN0YXRlIGNoYW5nZWQgdG8gZGlzY29ubmVjdGVkIG9uIHRoZSBjb25uZWN0aW9uIHdpdGggXCIrdCk7YnJlYWs7Y2FzZVwiY29tcGxldGVkXCI6ZS5vbmljZWNhbmRpZGF0ZT1pLnV0aWwubm9vcH1uLmNvbm5lY3Rpb24uZW1pdChjLkNvbm5lY3Rpb25FdmVudFR5cGUuSWNlU3RhdGVDaGFuZ2VkLGUuaWNlQ29ubmVjdGlvblN0YXRlKX0sci5kZWZhdWx0LmxvZyhcIkxpc3RlbmluZyBmb3IgZGF0YSBjaGFubmVsXCIpLGUub25kYXRhY2hhbm5lbD1mdW5jdGlvbihlKXtyLmRlZmF1bHQubG9nKFwiUmVjZWl2ZWQgZGF0YSBjaGFubmVsXCIpO3ZhciBuPWUuY2hhbm5lbDtzLmdldENvbm5lY3Rpb24odCxvKS5pbml0aWFsaXplKG4pfSxyLmRlZmF1bHQubG9nKFwiTGlzdGVuaW5nIGZvciByZW1vdGUgc3RyZWFtXCIpLGUub250cmFjaz1mdW5jdGlvbihlKXtyLmRlZmF1bHQubG9nKFwiUmVjZWl2ZWQgcmVtb3RlIHN0cmVhbVwiKTt2YXIgaT1lLnN0cmVhbXNbMF0sYT1zLmdldENvbm5lY3Rpb24odCxvKTtpZihhLnR5cGU9PT1jLkNvbm5lY3Rpb25UeXBlLk1lZGlhKXt2YXIgZD1hO24uX2FkZFN0cmVhbVRvTWVkaWFDb25uZWN0aW9uKGksZCl9fX0sby5wcm90b3R5cGUuY2xlYW51cD1mdW5jdGlvbigpe3IuZGVmYXVsdC5sb2coXCJDbGVhbmluZyB1cCBQZWVyQ29ubmVjdGlvbiB0byBcIit0aGlzLmNvbm5lY3Rpb24ucGVlcik7dmFyIGU9dGhpcy5jb25uZWN0aW9uLnBlZXJDb25uZWN0aW9uO2lmKGUpe3RoaXMuY29ubmVjdGlvbi5wZWVyQ29ubmVjdGlvbj1udWxsLGUub25pY2VjYW5kaWRhdGU9ZS5vbmljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZT1lLm9uZGF0YWNoYW5uZWw9ZS5vbnRyYWNrPWZ1bmN0aW9uKCl7fTt2YXIgbj1cImNsb3NlZFwiIT09ZS5zaWduYWxpbmdTdGF0ZSx0PSExO2lmKHRoaXMuY29ubmVjdGlvbi50eXBlPT09Yy5Db25uZWN0aW9uVHlwZS5EYXRhKXt2YXIgbz10aGlzLmNvbm5lY3Rpb24uZGF0YUNoYW5uZWw7byYmKHQ9ISFvLnJlYWR5U3RhdGUmJlwiY2xvc2VkXCIhPT1vLnJlYWR5U3RhdGUpfShufHx0KSYmZS5jbG9zZSgpfX0sby5wcm90b3R5cGUuX21ha2VPZmZlcj1mdW5jdGlvbigpe3JldHVybiBuKHRoaXMsdm9pZCAwLFByb21pc2UsZnVuY3Rpb24oKXt2YXIgbixvLGEscyxkLGwsdTtyZXR1cm4gdCh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6bj10aGlzLmNvbm5lY3Rpb24ucGVlckNvbm5lY3Rpb24sbz10aGlzLmNvbm5lY3Rpb24ucHJvdmlkZXIsdC5sYWJlbD0xO2Nhc2UgMTpyZXR1cm4gdC50cnlzLnB1c2goWzEsNywsOF0pLFs0LG4uY3JlYXRlT2ZmZXIodGhpcy5jb25uZWN0aW9uLm9wdGlvbnMuY29uc3RyYWludHMpXTtjYXNlIDI6YT10LnNlbnQoKSxyLmRlZmF1bHQubG9nKFwiQ3JlYXRlZCBvZmZlci5cIiksdGhpcy5jb25uZWN0aW9uLm9wdGlvbnMuc2RwVHJhbnNmb3JtJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB0aGlzLmNvbm5lY3Rpb24ub3B0aW9ucy5zZHBUcmFuc2Zvcm0mJihhLnNkcD10aGlzLmNvbm5lY3Rpb24ub3B0aW9ucy5zZHBUcmFuc2Zvcm0oYS5zZHApfHxhLnNkcCksdC5sYWJlbD0zO2Nhc2UgMzpyZXR1cm4gdC50cnlzLnB1c2goWzMsNSwsNl0pLFs0LG4uc2V0TG9jYWxEZXNjcmlwdGlvbihhKV07Y2FzZSA0OnJldHVybiB0LnNlbnQoKSxyLmRlZmF1bHQubG9nKFwiU2V0IGxvY2FsRGVzY3JpcHRpb246XCIsYSxcImZvcjpcIit0aGlzLmNvbm5lY3Rpb24ucGVlcikscz17c2RwOmEsdHlwZTp0aGlzLmNvbm5lY3Rpb24udHlwZSxjb25uZWN0aW9uSWQ6dGhpcy5jb25uZWN0aW9uLmNvbm5lY3Rpb25JZCxtZXRhZGF0YTp0aGlzLmNvbm5lY3Rpb24ubWV0YWRhdGEsYnJvd3NlcjppLnV0aWwuYnJvd3Nlcn0sdGhpcy5jb25uZWN0aW9uLnR5cGU9PT1jLkNvbm5lY3Rpb25UeXBlLkRhdGEmJihkPXRoaXMuY29ubmVjdGlvbixzPWUoZSh7fSxzKSx7bGFiZWw6ZC5sYWJlbCxyZWxpYWJsZTpkLnJlbGlhYmxlLHNlcmlhbGl6YXRpb246ZC5zZXJpYWxpemF0aW9ufSkpLG8uc29ja2V0LnNlbmQoe3R5cGU6Yy5TZXJ2ZXJNZXNzYWdlVHlwZS5PZmZlcixwYXlsb2FkOnMsZHN0OnRoaXMuY29ubmVjdGlvbi5wZWVyfSksWzMsNl07Y2FzZSA1OnJldHVyblwiT3BlcmF0aW9uRXJyb3I6IEZhaWxlZCB0byBzZXQgbG9jYWwgb2ZmZXIgc2RwOiBDYWxsZWQgaW4gd3Jvbmcgc3RhdGU6IGtIYXZlUmVtb3RlT2ZmZXJcIiE9KGw9dC5zZW50KCkpJiYoby5lbWl0RXJyb3IoYy5QZWVyRXJyb3JUeXBlLldlYlJUQyxsKSxyLmRlZmF1bHQubG9nKFwiRmFpbGVkIHRvIHNldExvY2FsRGVzY3JpcHRpb24sIFwiLGwpKSxbMyw2XTtjYXNlIDY6cmV0dXJuWzMsOF07Y2FzZSA3OnJldHVybiB1PXQuc2VudCgpLG8uZW1pdEVycm9yKGMuUGVlckVycm9yVHlwZS5XZWJSVEMsdSksci5kZWZhdWx0LmxvZyhcIkZhaWxlZCB0byBjcmVhdGVPZmZlciwgXCIsdSksWzMsOF07Y2FzZSA4OnJldHVyblsyXX19KX0pfSxvLnByb3RvdHlwZS5fbWFrZUFuc3dlcj1mdW5jdGlvbigpe3JldHVybiBuKHRoaXMsdm9pZCAwLFByb21pc2UsZnVuY3Rpb24oKXt2YXIgZSxuLG8sYSxzO3JldHVybiB0KHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDplPXRoaXMuY29ubmVjdGlvbi5wZWVyQ29ubmVjdGlvbixuPXRoaXMuY29ubmVjdGlvbi5wcm92aWRlcix0LmxhYmVsPTE7Y2FzZSAxOnJldHVybiB0LnRyeXMucHVzaChbMSw3LCw4XSksWzQsZS5jcmVhdGVBbnN3ZXIoKV07Y2FzZSAyOm89dC5zZW50KCksci5kZWZhdWx0LmxvZyhcIkNyZWF0ZWQgYW5zd2VyLlwiKSx0aGlzLmNvbm5lY3Rpb24ub3B0aW9ucy5zZHBUcmFuc2Zvcm0mJlwiZnVuY3Rpb25cIj09dHlwZW9mIHRoaXMuY29ubmVjdGlvbi5vcHRpb25zLnNkcFRyYW5zZm9ybSYmKG8uc2RwPXRoaXMuY29ubmVjdGlvbi5vcHRpb25zLnNkcFRyYW5zZm9ybShvLnNkcCl8fG8uc2RwKSx0LmxhYmVsPTM7Y2FzZSAzOnJldHVybiB0LnRyeXMucHVzaChbMyw1LCw2XSksWzQsZS5zZXRMb2NhbERlc2NyaXB0aW9uKG8pXTtjYXNlIDQ6cmV0dXJuIHQuc2VudCgpLHIuZGVmYXVsdC5sb2coXCJTZXQgbG9jYWxEZXNjcmlwdGlvbjpcIixvLFwiZm9yOlwiK3RoaXMuY29ubmVjdGlvbi5wZWVyKSxuLnNvY2tldC5zZW5kKHt0eXBlOmMuU2VydmVyTWVzc2FnZVR5cGUuQW5zd2VyLHBheWxvYWQ6e3NkcDpvLHR5cGU6dGhpcy5jb25uZWN0aW9uLnR5cGUsY29ubmVjdGlvbklkOnRoaXMuY29ubmVjdGlvbi5jb25uZWN0aW9uSWQsYnJvd3NlcjppLnV0aWwuYnJvd3Nlcn0sZHN0OnRoaXMuY29ubmVjdGlvbi5wZWVyfSksWzMsNl07Y2FzZSA1OnJldHVybiBhPXQuc2VudCgpLG4uZW1pdEVycm9yKGMuUGVlckVycm9yVHlwZS5XZWJSVEMsYSksci5kZWZhdWx0LmxvZyhcIkZhaWxlZCB0byBzZXRMb2NhbERlc2NyaXB0aW9uLCBcIixhKSxbMyw2XTtjYXNlIDY6cmV0dXJuWzMsOF07Y2FzZSA3OnJldHVybiBzPXQuc2VudCgpLG4uZW1pdEVycm9yKGMuUGVlckVycm9yVHlwZS5XZWJSVEMscyksci5kZWZhdWx0LmxvZyhcIkZhaWxlZCB0byBjcmVhdGUgYW5zd2VyLCBcIixzKSxbMyw4XTtjYXNlIDg6cmV0dXJuWzJdfX0pfSl9LG8ucHJvdG90eXBlLmhhbmRsZVNEUD1mdW5jdGlvbihlLG8pe3JldHVybiBuKHRoaXMsdm9pZCAwLFByb21pc2UsZnVuY3Rpb24oKXt2YXIgbixpLGEscztyZXR1cm4gdCh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6bz1uZXcgUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKG8pLG49dGhpcy5jb25uZWN0aW9uLnBlZXJDb25uZWN0aW9uLGk9dGhpcy5jb25uZWN0aW9uLnByb3ZpZGVyLHIuZGVmYXVsdC5sb2coXCJTZXR0aW5nIHJlbW90ZSBkZXNjcmlwdGlvblwiLG8pLGE9dGhpcyx0LmxhYmVsPTE7Y2FzZSAxOnJldHVybiB0LnRyeXMucHVzaChbMSw1LCw2XSksWzQsbi5zZXRSZW1vdGVEZXNjcmlwdGlvbihvKV07Y2FzZSAyOnJldHVybiB0LnNlbnQoKSxyLmRlZmF1bHQubG9nKFwiU2V0IHJlbW90ZURlc2NyaXB0aW9uOlwiK2UrXCIgZm9yOlwiK3RoaXMuY29ubmVjdGlvbi5wZWVyKSxcIk9GRkVSXCIhPT1lP1szLDRdOls0LGEuX21ha2VBbnN3ZXIoKV07Y2FzZSAzOnQuc2VudCgpLHQubGFiZWw9NDtjYXNlIDQ6cmV0dXJuWzMsNl07Y2FzZSA1OnJldHVybiBzPXQuc2VudCgpLGkuZW1pdEVycm9yKGMuUGVlckVycm9yVHlwZS5XZWJSVEMscyksci5kZWZhdWx0LmxvZyhcIkZhaWxlZCB0byBzZXRSZW1vdGVEZXNjcmlwdGlvbiwgXCIscyksWzMsNl07Y2FzZSA2OnJldHVyblsyXX19KX0pfSxvLnByb3RvdHlwZS5oYW5kbGVDYW5kaWRhdGU9ZnVuY3Rpb24oZSl7cmV0dXJuIG4odGhpcyx2b2lkIDAsUHJvbWlzZSxmdW5jdGlvbigpe3ZhciBuLG8saSxhLHMsZDtyZXR1cm4gdCh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6ci5kZWZhdWx0LmxvZyhcImhhbmRsZUNhbmRpZGF0ZTpcIixlKSxuPWUuY2FuZGlkYXRlLG89ZS5zZHBNTGluZUluZGV4LGk9ZS5zZHBNaWQsYT10aGlzLmNvbm5lY3Rpb24ucGVlckNvbm5lY3Rpb24scz10aGlzLmNvbm5lY3Rpb24ucHJvdmlkZXIsdC5sYWJlbD0xO2Nhc2UgMTpyZXR1cm4gdC50cnlzLnB1c2goWzEsMywsNF0pLFs0LGEuYWRkSWNlQ2FuZGlkYXRlKG5ldyBSVENJY2VDYW5kaWRhdGUoe3NkcE1pZDppLHNkcE1MaW5lSW5kZXg6byxjYW5kaWRhdGU6bn0pKV07Y2FzZSAyOnJldHVybiB0LnNlbnQoKSxyLmRlZmF1bHQubG9nKFwiQWRkZWQgSUNFIGNhbmRpZGF0ZSBmb3I6XCIrdGhpcy5jb25uZWN0aW9uLnBlZXIpLFszLDRdO2Nhc2UgMzpyZXR1cm4gZD10LnNlbnQoKSxzLmVtaXRFcnJvcihjLlBlZXJFcnJvclR5cGUuV2ViUlRDLGQpLHIuZGVmYXVsdC5sb2coXCJGYWlsZWQgdG8gaGFuZGxlQ2FuZGlkYXRlLCBcIixkKSxbMyw0XTtjYXNlIDQ6cmV0dXJuWzJdfX0pfSl9LG8ucHJvdG90eXBlLl9hZGRUcmFja3NUb0Nvbm5lY3Rpb249ZnVuY3Rpb24oZSxuKXtpZihyLmRlZmF1bHQubG9nKFwiYWRkIHRyYWNrcyBmcm9tIHN0cmVhbSBcIitlLmlkK1wiIHRvIHBlZXIgY29ubmVjdGlvblwiKSwhbi5hZGRUcmFjaylyZXR1cm4gci5kZWZhdWx0LmVycm9yKFwiWW91ciBicm93c2VyIGRvZXMndCBzdXBwb3J0IFJUQ1BlZXJDb25uZWN0aW9uI2FkZFRyYWNrLiBJZ25vcmVkLlwiKTtlLmdldFRyYWNrcygpLmZvckVhY2goZnVuY3Rpb24odCl7bi5hZGRUcmFjayh0LGUpfSl9LG8ucHJvdG90eXBlLl9hZGRTdHJlYW1Ub01lZGlhQ29ubmVjdGlvbj1mdW5jdGlvbihlLG4pe3IuZGVmYXVsdC5sb2coXCJhZGQgc3RyZWFtIFwiK2UuaWQrXCIgdG8gbWVkaWEgY29ubmVjdGlvbiBcIituLmNvbm5lY3Rpb25JZCksbi5hZGRTdHJlYW0oZSl9LG99KCk7ZXhwb3J0cy5OZWdvdGlhdG9yPWE7XG59LHtcIi4vdXRpbFwiOlwiQkhYZlwiLFwiLi9sb2dnZXJcIjpcIldPczlcIixcIi4vZW51bXNcIjpcIlpSWWZcIn1dLFwidFFGS1wiOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKSB7XG5cInVzZSBzdHJpY3RcIjt2YXIgdD10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgdD1mdW5jdGlvbihlLG4pe3JldHVybih0PU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbih0LGUpe3QuX19wcm90b19fPWV9fHxmdW5jdGlvbih0LGUpe2Zvcih2YXIgbiBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLG4pJiYodFtuXT1lW25dKX0pKGUsbil9O3JldHVybiBmdW5jdGlvbihlLG4pe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIG4mJm51bGwhPT1uKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiK1N0cmluZyhuKStcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO2Z1bmN0aW9uIG8oKXt0aGlzLmNvbnN0cnVjdG9yPWV9dChlLG4pLGUucHJvdG90eXBlPW51bGw9PT1uP09iamVjdC5jcmVhdGUobik6KG8ucHJvdG90eXBlPW4ucHJvdG90eXBlLG5ldyBvKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5CYXNlQ29ubmVjdGlvbj12b2lkIDA7dmFyIGU9cmVxdWlyZShcImV2ZW50ZW1pdHRlcjNcIiksbj1mdW5jdGlvbihlKXtmdW5jdGlvbiBuKHQsbixvKXt2YXIgcj1lLmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIHIucGVlcj10LHIucHJvdmlkZXI9bixyLm9wdGlvbnM9byxyLl9vcGVuPSExLHIubWV0YWRhdGE9by5tZXRhZGF0YSxyfXJldHVybiB0KG4sZSksT2JqZWN0LmRlZmluZVByb3BlcnR5KG4ucHJvdG90eXBlLFwib3BlblwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3Blbn0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxufShlLkV2ZW50RW1pdHRlcik7ZXhwb3J0cy5CYXNlQ29ubmVjdGlvbj1uO1xufSx7XCJldmVudGVtaXR0ZXIzXCI6XCJKSmxTXCJ9XSxcImRiSFBcIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cykge1xuXCJ1c2Ugc3RyaWN0XCI7dmFyIGU9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIGU9ZnVuY3Rpb24odCxvKXtyZXR1cm4oZT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG8gaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxvKSYmKGVbb109dFtvXSl9KSh0LG8pfTtyZXR1cm4gZnVuY3Rpb24odCxvKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBvJiZudWxsIT09byl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIitTdHJpbmcobykrXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj10fWUodCxvKSx0LnByb3RvdHlwZT1udWxsPT09bz9PYmplY3QuY3JlYXRlKG8pOihyLnByb3RvdHlwZT1vLnByb3RvdHlwZSxuZXcgcil9fSgpLHQ9dGhpcyYmdGhpcy5fX2Fzc2lnbnx8ZnVuY3Rpb24oKXtyZXR1cm4odD1PYmplY3QuYXNzaWdufHxmdW5jdGlvbihlKXtmb3IodmFyIHQsbz0xLHI9YXJndW1lbnRzLmxlbmd0aDtvPHI7bysrKWZvcih2YXIgbiBpbiB0PWFyZ3VtZW50c1tvXSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxuKSYmKGVbbl09dFtuXSk7cmV0dXJuIGV9KS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LG89dGhpcyYmdGhpcy5fX3ZhbHVlc3x8ZnVuY3Rpb24oZSl7dmFyIHQ9XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZTeW1ib2wuaXRlcmF0b3Isbz10JiZlW3RdLHI9MDtpZihvKXJldHVybiBvLmNhbGwoZSk7aWYoZSYmXCJudW1iZXJcIj09dHlwZW9mIGUubGVuZ3RoKXJldHVybntuZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIGUmJnI+PWUubGVuZ3RoJiYoZT12b2lkIDApLHt2YWx1ZTplJiZlW3IrK10sZG9uZTohZX19fTt0aHJvdyBuZXcgVHlwZUVycm9yKHQ/XCJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLlwiOlwiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKX0scj10aGlzJiZ0aGlzLl9faW1wb3J0RGVmYXVsdHx8ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLk1lZGlhQ29ubmVjdGlvbj12b2lkIDA7dmFyIG49cmVxdWlyZShcIi4vdXRpbFwiKSxpPXIocmVxdWlyZShcIi4vbG9nZ2VyXCIpKSxhPXJlcXVpcmUoXCIuL25lZ290aWF0b3JcIikscz1yZXF1aXJlKFwiLi9lbnVtc1wiKSxsPXJlcXVpcmUoXCIuL2Jhc2Vjb25uZWN0aW9uXCIpLGM9ZnVuY3Rpb24ocil7ZnVuY3Rpb24gbChlLHQsbyl7dmFyIGk9ci5jYWxsKHRoaXMsZSx0LG8pfHx0aGlzO3JldHVybiBpLl9sb2NhbFN0cmVhbT1pLm9wdGlvbnMuX3N0cmVhbSxpLmNvbm5lY3Rpb25JZD1pLm9wdGlvbnMuY29ubmVjdGlvbklkfHxsLklEX1BSRUZJWCtuLnV0aWwucmFuZG9tVG9rZW4oKSxpLl9uZWdvdGlhdG9yPW5ldyBhLk5lZ290aWF0b3IoaSksaS5fbG9jYWxTdHJlYW0mJmkuX25lZ290aWF0b3Iuc3RhcnRDb25uZWN0aW9uKHtfc3RyZWFtOmkuX2xvY2FsU3RyZWFtLG9yaWdpbmF0b3I6ITB9KSxpfXJldHVybiBlKGwsciksT2JqZWN0LmRlZmluZVByb3BlcnR5KGwucHJvdG90eXBlLFwidHlwZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gcy5Db25uZWN0aW9uVHlwZS5NZWRpYX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkobC5wcm90b3R5cGUsXCJsb2NhbFN0cmVhbVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbG9jYWxTdHJlYW19LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGwucHJvdG90eXBlLFwicmVtb3RlU3RyZWFtXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZW1vdGVTdHJlYW19LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksbC5wcm90b3R5cGUuYWRkU3RyZWFtPWZ1bmN0aW9uKGUpe2kuZGVmYXVsdC5sb2coXCJSZWNlaXZpbmcgc3RyZWFtXCIsZSksdGhpcy5fcmVtb3RlU3RyZWFtPWUsci5wcm90b3R5cGUuZW1pdC5jYWxsKHRoaXMscy5Db25uZWN0aW9uRXZlbnRUeXBlLlN0cmVhbSxlKX0sbC5wcm90b3R5cGUuaGFuZGxlTWVzc2FnZT1mdW5jdGlvbihlKXt2YXIgdD1lLnR5cGUsbz1lLnBheWxvYWQ7c3dpdGNoKGUudHlwZSl7Y2FzZSBzLlNlcnZlck1lc3NhZ2VUeXBlLkFuc3dlcjp0aGlzLl9uZWdvdGlhdG9yLmhhbmRsZVNEUCh0LG8uc2RwKSx0aGlzLl9vcGVuPSEwO2JyZWFrO2Nhc2Ugcy5TZXJ2ZXJNZXNzYWdlVHlwZS5DYW5kaWRhdGU6dGhpcy5fbmVnb3RpYXRvci5oYW5kbGVDYW5kaWRhdGUoby5jYW5kaWRhdGUpO2JyZWFrO2RlZmF1bHQ6aS5kZWZhdWx0Lndhcm4oXCJVbnJlY29nbml6ZWQgbWVzc2FnZSB0eXBlOlwiK3QrXCIgZnJvbSBwZWVyOlwiK3RoaXMucGVlcil9fSxsLnByb3RvdHlwZS5hbnN3ZXI9ZnVuY3Rpb24oZSxyKXt2YXIgbixhO2lmKHZvaWQgMD09PXImJihyPXt9KSx0aGlzLl9sb2NhbFN0cmVhbSlpLmRlZmF1bHQud2FybihcIkxvY2FsIHN0cmVhbSBhbHJlYWR5IGV4aXN0cyBvbiB0aGlzIE1lZGlhQ29ubmVjdGlvbi4gQXJlIHlvdSBhbnN3ZXJpbmcgYSBjYWxsIHR3aWNlP1wiKTtlbHNle3RoaXMuX2xvY2FsU3RyZWFtPWUsciYmci5zZHBUcmFuc2Zvcm0mJih0aGlzLm9wdGlvbnMuc2RwVHJhbnNmb3JtPXIuc2RwVHJhbnNmb3JtKSx0aGlzLl9uZWdvdGlhdG9yLnN0YXJ0Q29ubmVjdGlvbih0KHQoe30sdGhpcy5vcHRpb25zLl9wYXlsb2FkKSx7X3N0cmVhbTplfSkpO3ZhciBzPXRoaXMucHJvdmlkZXIuX2dldE1lc3NhZ2VzKHRoaXMuY29ubmVjdGlvbklkKTt0cnl7Zm9yKHZhciBsPW8ocyksYz1sLm5leHQoKTshYy5kb25lO2M9bC5uZXh0KCkpe3ZhciBwPWMudmFsdWU7dGhpcy5oYW5kbGVNZXNzYWdlKHApfX1jYXRjaCh1KXtuPXtlcnJvcjp1fX1maW5hbGx5e3RyeXtjJiYhYy5kb25lJiYoYT1sLnJldHVybikmJmEuY2FsbChsKX1maW5hbGx5e2lmKG4pdGhyb3cgbi5lcnJvcn19dGhpcy5fb3Blbj0hMH19LGwucHJvdG90eXBlLmNsb3NlPWZ1bmN0aW9uKCl7dGhpcy5fbmVnb3RpYXRvciYmKHRoaXMuX25lZ290aWF0b3IuY2xlYW51cCgpLHRoaXMuX25lZ290aWF0b3I9bnVsbCksdGhpcy5fbG9jYWxTdHJlYW09bnVsbCx0aGlzLl9yZW1vdGVTdHJlYW09bnVsbCx0aGlzLnByb3ZpZGVyJiYodGhpcy5wcm92aWRlci5fcmVtb3ZlQ29ubmVjdGlvbih0aGlzKSx0aGlzLnByb3ZpZGVyPW51bGwpLHRoaXMub3B0aW9ucyYmdGhpcy5vcHRpb25zLl9zdHJlYW0mJih0aGlzLm9wdGlvbnMuX3N0cmVhbT1udWxsKSx0aGlzLm9wZW4mJih0aGlzLl9vcGVuPSExLHIucHJvdG90eXBlLmVtaXQuY2FsbCh0aGlzLHMuQ29ubmVjdGlvbkV2ZW50VHlwZS5DbG9zZSkpfSxsLklEX1BSRUZJWD1cIm1jX1wiLGx9KGwuQmFzZUNvbm5lY3Rpb24pO2V4cG9ydHMuTWVkaWFDb25uZWN0aW9uPWM7XG59LHtcIi4vdXRpbFwiOlwiQkhYZlwiLFwiLi9sb2dnZXJcIjpcIldPczlcIixcIi4vbmVnb3RpYXRvclwiOlwiSENkWFwiLFwiLi9lbnVtc1wiOlwiWlJZZlwiLFwiLi9iYXNlY29ubmVjdGlvblwiOlwidFFGS1wifV0sXCJHR3A2XCI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpIHtcblwidXNlIHN0cmljdFwiO3ZhciBlPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBlPWZ1bmN0aW9uKHQscil7cmV0dXJuKGU9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQscikmJihlW3JdPXRbcl0pfSkodCxyKX07cmV0dXJuIGZ1bmN0aW9uKHQscil7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgciYmbnVsbCE9PXIpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIrU3RyaW5nKHIpK1wiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7ZnVuY3Rpb24gbygpe3RoaXMuY29uc3RydWN0b3I9dH1lKHQsciksdC5wcm90b3R5cGU9bnVsbD09PXI/T2JqZWN0LmNyZWF0ZShyKTooby5wcm90b3R5cGU9ci5wcm90b3R5cGUsbmV3IG8pfX0oKSx0PXRoaXMmJnRoaXMuX19pbXBvcnREZWZhdWx0fHxmdW5jdGlvbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19O09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGV4cG9ydHMuRW5jb2RpbmdRdWV1ZT12b2lkIDA7dmFyIHI9cmVxdWlyZShcImV2ZW50ZW1pdHRlcjNcIiksbz10KHJlcXVpcmUoXCIuL2xvZ2dlclwiKSksbj1mdW5jdGlvbih0KXtmdW5jdGlvbiByKCl7dmFyIGU9dC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBlLmZpbGVSZWFkZXI9bmV3IEZpbGVSZWFkZXIsZS5fcXVldWU9W10sZS5fcHJvY2Vzc2luZz0hMSxlLmZpbGVSZWFkZXIub25sb2FkPWZ1bmN0aW9uKHQpe2UuX3Byb2Nlc3Npbmc9ITEsdC50YXJnZXQmJmUuZW1pdChcImRvbmVcIix0LnRhcmdldC5yZXN1bHQpLGUuZG9OZXh0VGFzaygpfSxlLmZpbGVSZWFkZXIub25lcnJvcj1mdW5jdGlvbih0KXtvLmRlZmF1bHQuZXJyb3IoXCJFbmNvZGluZ1F1ZXVlIGVycm9yOlwiLHQpLGUuX3Byb2Nlc3Npbmc9ITEsZS5kZXN0cm95KCksZS5lbWl0KFwiZXJyb3JcIix0KX0sZX1yZXR1cm4gZShyLHQpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLnByb3RvdHlwZSxcInF1ZXVlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9xdWV1ZX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoci5wcm90b3R5cGUsXCJzaXplXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnF1ZXVlLmxlbmd0aH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoci5wcm90b3R5cGUsXCJwcm9jZXNzaW5nXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wcm9jZXNzaW5nfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLHIucHJvdG90eXBlLmVucXVlPWZ1bmN0aW9uKGUpe3RoaXMucXVldWUucHVzaChlKSx0aGlzLnByb2Nlc3Npbmd8fHRoaXMuZG9OZXh0VGFzaygpfSxyLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dGhpcy5maWxlUmVhZGVyLmFib3J0KCksdGhpcy5fcXVldWU9W119LHIucHJvdG90eXBlLmRvTmV4dFRhc2s9ZnVuY3Rpb24oKXswIT09dGhpcy5zaXplJiYodGhpcy5wcm9jZXNzaW5nfHwodGhpcy5fcHJvY2Vzc2luZz0hMCx0aGlzLmZpbGVSZWFkZXIucmVhZEFzQXJyYXlCdWZmZXIodGhpcy5xdWV1ZS5zaGlmdCgpKSkpfSxyfShyLkV2ZW50RW1pdHRlcik7ZXhwb3J0cy5FbmNvZGluZ1F1ZXVlPW47XG59LHtcImV2ZW50ZW1pdHRlcjNcIjpcIkpKbFNcIixcIi4vbG9nZ2VyXCI6XCJXT3M5XCJ9XSxcIkdCVFFcIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cykge1xuXCJ1c2Ugc3RyaWN0XCI7dmFyIGU9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIGU9ZnVuY3Rpb24odCxuKXtyZXR1cm4oZT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG4gaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxuKSYmKGVbbl09dFtuXSl9KSh0LG4pfTtyZXR1cm4gZnVuY3Rpb24odCxuKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBuJiZudWxsIT09bil0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIitTdHJpbmcobikrXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtmdW5jdGlvbiBpKCl7dGhpcy5jb25zdHJ1Y3Rvcj10fWUodCxuKSx0LnByb3RvdHlwZT1udWxsPT09bj9PYmplY3QuY3JlYXRlKG4pOihpLnByb3RvdHlwZT1uLnByb3RvdHlwZSxuZXcgaSl9fSgpLHQ9dGhpcyYmdGhpcy5fX3ZhbHVlc3x8ZnVuY3Rpb24oZSl7dmFyIHQ9XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZTeW1ib2wuaXRlcmF0b3Isbj10JiZlW3RdLGk9MDtpZihuKXJldHVybiBuLmNhbGwoZSk7aWYoZSYmXCJudW1iZXJcIj09dHlwZW9mIGUubGVuZ3RoKXJldHVybntuZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIGUmJmk+PWUubGVuZ3RoJiYoZT12b2lkIDApLHt2YWx1ZTplJiZlW2krK10sZG9uZTohZX19fTt0aHJvdyBuZXcgVHlwZUVycm9yKHQ/XCJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLlwiOlwiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKX0sbj10aGlzJiZ0aGlzLl9faW1wb3J0RGVmYXVsdHx8ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLkRhdGFDb25uZWN0aW9uPXZvaWQgMDt2YXIgaT1yZXF1aXJlKFwiLi91dGlsXCIpLG89bihyZXF1aXJlKFwiLi9sb2dnZXJcIikpLHI9cmVxdWlyZShcIi4vbmVnb3RpYXRvclwiKSxhPXJlcXVpcmUoXCIuL2VudW1zXCIpLHM9cmVxdWlyZShcIi4vYmFzZWNvbm5lY3Rpb25cIiksdT1yZXF1aXJlKFwiLi9lbmNvZGluZ1F1ZXVlXCIpLGw9ZnVuY3Rpb24obil7ZnVuY3Rpb24gcyhlLHQsbCl7dmFyIGY9bi5jYWxsKHRoaXMsZSx0LGwpfHx0aGlzO3JldHVybiBmLnN0cmluZ2lmeT1KU09OLnN0cmluZ2lmeSxmLnBhcnNlPUpTT04ucGFyc2UsZi5fYnVmZmVyPVtdLGYuX2J1ZmZlclNpemU9MCxmLl9idWZmZXJpbmc9ITEsZi5fY2h1bmtlZERhdGE9e30sZi5fZW5jb2RpbmdRdWV1ZT1uZXcgdS5FbmNvZGluZ1F1ZXVlLGYuY29ubmVjdGlvbklkPWYub3B0aW9ucy5jb25uZWN0aW9uSWR8fHMuSURfUFJFRklYK2kudXRpbC5yYW5kb21Ub2tlbigpLGYubGFiZWw9Zi5vcHRpb25zLmxhYmVsfHxmLmNvbm5lY3Rpb25JZCxmLnNlcmlhbGl6YXRpb249Zi5vcHRpb25zLnNlcmlhbGl6YXRpb258fGEuU2VyaWFsaXphdGlvblR5cGUuQmluYXJ5LGYucmVsaWFibGU9ISFmLm9wdGlvbnMucmVsaWFibGUsZi5fZW5jb2RpbmdRdWV1ZS5vbihcImRvbmVcIixmdW5jdGlvbihlKXtmLl9idWZmZXJlZFNlbmQoZSl9KSxmLl9lbmNvZGluZ1F1ZXVlLm9uKFwiZXJyb3JcIixmdW5jdGlvbigpe28uZGVmYXVsdC5lcnJvcihcIkRDI1wiK2YuY29ubmVjdGlvbklkK1wiOiBFcnJvciBvY2N1cmVkIGluIGVuY29kaW5nIGZyb20gYmxvYiB0byBhcnJheWJ1ZmZlciwgY2xvc2UgRENcIiksZi5jbG9zZSgpfSksZi5fbmVnb3RpYXRvcj1uZXcgci5OZWdvdGlhdG9yKGYpLGYuX25lZ290aWF0b3Iuc3RhcnRDb25uZWN0aW9uKGYub3B0aW9ucy5fcGF5bG9hZHx8e29yaWdpbmF0b3I6ITB9KSxmfXJldHVybiBlKHMsbiksT2JqZWN0LmRlZmluZVByb3BlcnR5KHMucHJvdG90eXBlLFwidHlwZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gYS5Db25uZWN0aW9uVHlwZS5EYXRhfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLnByb3RvdHlwZSxcImRhdGFDaGFubmVsXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kY30sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5wcm90b3R5cGUsXCJidWZmZXJTaXplXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9idWZmZXJTaXplfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLHMucHJvdG90eXBlLmluaXRpYWxpemU9ZnVuY3Rpb24oZSl7dGhpcy5fZGM9ZSx0aGlzLl9jb25maWd1cmVEYXRhQ2hhbm5lbCgpfSxzLnByb3RvdHlwZS5fY29uZmlndXJlRGF0YUNoYW5uZWw9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2kudXRpbC5zdXBwb3J0cy5iaW5hcnlCbG9iJiYhaS51dGlsLnN1cHBvcnRzLnJlbGlhYmxlfHwodGhpcy5kYXRhQ2hhbm5lbC5iaW5hcnlUeXBlPVwiYXJyYXlidWZmZXJcIiksdGhpcy5kYXRhQ2hhbm5lbC5vbm9wZW49ZnVuY3Rpb24oKXtvLmRlZmF1bHQubG9nKFwiREMjXCIrZS5jb25uZWN0aW9uSWQrXCIgZGMgY29ubmVjdGlvbiBzdWNjZXNzXCIpLGUuX29wZW49ITAsZS5lbWl0KGEuQ29ubmVjdGlvbkV2ZW50VHlwZS5PcGVuKX0sdGhpcy5kYXRhQ2hhbm5lbC5vbm1lc3NhZ2U9ZnVuY3Rpb24odCl7by5kZWZhdWx0LmxvZyhcIkRDI1wiK2UuY29ubmVjdGlvbklkK1wiIGRjIG9ubWVzc2FnZTpcIix0LmRhdGEpLGUuX2hhbmRsZURhdGFNZXNzYWdlKHQpfSx0aGlzLmRhdGFDaGFubmVsLm9uY2xvc2U9ZnVuY3Rpb24oKXtvLmRlZmF1bHQubG9nKFwiREMjXCIrZS5jb25uZWN0aW9uSWQrXCIgZGMgY2xvc2VkIGZvcjpcIixlLnBlZXIpLGUuY2xvc2UoKX19LHMucHJvdG90eXBlLl9oYW5kbGVEYXRhTWVzc2FnZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLG89ZS5kYXRhLHI9by5jb25zdHJ1Y3RvcixzPW87aWYodGhpcy5zZXJpYWxpemF0aW9uPT09YS5TZXJpYWxpemF0aW9uVHlwZS5CaW5hcnl8fHRoaXMuc2VyaWFsaXphdGlvbj09PWEuU2VyaWFsaXphdGlvblR5cGUuQmluYXJ5VVRGOCl7aWYocj09PUJsb2IpcmV0dXJuIHZvaWQgaS51dGlsLmJsb2JUb0FycmF5QnVmZmVyKG8sZnVuY3Rpb24oZSl7dmFyIG49aS51dGlsLnVucGFjayhlKTt0LmVtaXQoYS5Db25uZWN0aW9uRXZlbnRUeXBlLkRhdGEsbil9KTtpZihyPT09QXJyYXlCdWZmZXIpcz1pLnV0aWwudW5wYWNrKG8pO2Vsc2UgaWYocj09PVN0cmluZyl7dmFyIHU9aS51dGlsLmJpbmFyeVN0cmluZ1RvQXJyYXlCdWZmZXIobyk7cz1pLnV0aWwudW5wYWNrKHUpfX1lbHNlIHRoaXMuc2VyaWFsaXphdGlvbj09PWEuU2VyaWFsaXphdGlvblR5cGUuSlNPTiYmKHM9dGhpcy5wYXJzZShvKSk7cy5fX3BlZXJEYXRhP3RoaXMuX2hhbmRsZUNodW5rKHMpOm4ucHJvdG90eXBlLmVtaXQuY2FsbCh0aGlzLGEuQ29ubmVjdGlvbkV2ZW50VHlwZS5EYXRhLHMpfSxzLnByb3RvdHlwZS5faGFuZGxlQ2h1bms9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5fX3BlZXJEYXRhLG49dGhpcy5fY2h1bmtlZERhdGFbdF18fHtkYXRhOltdLGNvdW50OjAsdG90YWw6ZS50b3RhbH07aWYobi5kYXRhW2Uubl09ZS5kYXRhLG4uY291bnQrKyx0aGlzLl9jaHVua2VkRGF0YVt0XT1uLG4udG90YWw9PT1uLmNvdW50KXtkZWxldGUgdGhpcy5fY2h1bmtlZERhdGFbdF07dmFyIGk9bmV3IEJsb2Iobi5kYXRhKTt0aGlzLl9oYW5kbGVEYXRhTWVzc2FnZSh7ZGF0YTppfSl9fSxzLnByb3RvdHlwZS5jbG9zZT1mdW5jdGlvbigpe3RoaXMuX2J1ZmZlcj1bXSx0aGlzLl9idWZmZXJTaXplPTAsdGhpcy5fY2h1bmtlZERhdGE9e30sdGhpcy5fbmVnb3RpYXRvciYmKHRoaXMuX25lZ290aWF0b3IuY2xlYW51cCgpLHRoaXMuX25lZ290aWF0b3I9bnVsbCksdGhpcy5wcm92aWRlciYmKHRoaXMucHJvdmlkZXIuX3JlbW92ZUNvbm5lY3Rpb24odGhpcyksdGhpcy5wcm92aWRlcj1udWxsKSx0aGlzLmRhdGFDaGFubmVsJiYodGhpcy5kYXRhQ2hhbm5lbC5vbm9wZW49bnVsbCx0aGlzLmRhdGFDaGFubmVsLm9ubWVzc2FnZT1udWxsLHRoaXMuZGF0YUNoYW5uZWwub25jbG9zZT1udWxsLHRoaXMuX2RjPW51bGwpLHRoaXMuX2VuY29kaW5nUXVldWUmJih0aGlzLl9lbmNvZGluZ1F1ZXVlLmRlc3Ryb3koKSx0aGlzLl9lbmNvZGluZ1F1ZXVlLnJlbW92ZUFsbExpc3RlbmVycygpLHRoaXMuX2VuY29kaW5nUXVldWU9bnVsbCksdGhpcy5vcGVuJiYodGhpcy5fb3Blbj0hMSxuLnByb3RvdHlwZS5lbWl0LmNhbGwodGhpcyxhLkNvbm5lY3Rpb25FdmVudFR5cGUuQ2xvc2UpKX0scy5wcm90b3R5cGUuc2VuZD1mdW5jdGlvbihlLHQpe2lmKHRoaXMub3BlbilpZih0aGlzLnNlcmlhbGl6YXRpb249PT1hLlNlcmlhbGl6YXRpb25UeXBlLkpTT04pdGhpcy5fYnVmZmVyZWRTZW5kKHRoaXMuc3RyaW5naWZ5KGUpKTtlbHNlIGlmKHRoaXMuc2VyaWFsaXphdGlvbj09PWEuU2VyaWFsaXphdGlvblR5cGUuQmluYXJ5fHx0aGlzLnNlcmlhbGl6YXRpb249PT1hLlNlcmlhbGl6YXRpb25UeXBlLkJpbmFyeVVURjgpe3ZhciBvPWkudXRpbC5wYWNrKGUpO2lmKCF0JiZvLnNpemU+aS51dGlsLmNodW5rZWRNVFUpcmV0dXJuIHZvaWQgdGhpcy5fc2VuZENodW5rcyhvKTtpLnV0aWwuc3VwcG9ydHMuYmluYXJ5QmxvYj90aGlzLl9idWZmZXJlZFNlbmQobyk6dGhpcy5fZW5jb2RpbmdRdWV1ZS5lbnF1ZShvKX1lbHNlIHRoaXMuX2J1ZmZlcmVkU2VuZChlKTtlbHNlIG4ucHJvdG90eXBlLmVtaXQuY2FsbCh0aGlzLGEuQ29ubmVjdGlvbkV2ZW50VHlwZS5FcnJvcixuZXcgRXJyb3IoXCJDb25uZWN0aW9uIGlzIG5vdCBvcGVuLiBZb3Ugc2hvdWxkIGxpc3RlbiBmb3IgdGhlIGBvcGVuYCBldmVudCBiZWZvcmUgc2VuZGluZyBtZXNzYWdlcy5cIikpfSxzLnByb3RvdHlwZS5fYnVmZmVyZWRTZW5kPWZ1bmN0aW9uKGUpeyF0aGlzLl9idWZmZXJpbmcmJnRoaXMuX3RyeVNlbmQoZSl8fCh0aGlzLl9idWZmZXIucHVzaChlKSx0aGlzLl9idWZmZXJTaXplPXRoaXMuX2J1ZmZlci5sZW5ndGgpfSxzLnByb3RvdHlwZS5fdHJ5U2VuZD1mdW5jdGlvbihlKXt2YXIgdD10aGlzO2lmKCF0aGlzLm9wZW4pcmV0dXJuITE7aWYodGhpcy5kYXRhQ2hhbm5lbC5idWZmZXJlZEFtb3VudD5zLk1BWF9CVUZGRVJFRF9BTU9VTlQpcmV0dXJuIHRoaXMuX2J1ZmZlcmluZz0hMCxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC5fYnVmZmVyaW5nPSExLHQuX3RyeUJ1ZmZlcigpfSw1MCksITE7dHJ5e3RoaXMuZGF0YUNoYW5uZWwuc2VuZChlKX1jYXRjaChuKXtyZXR1cm4gby5kZWZhdWx0LmVycm9yKFwiREMjOlwiK3RoaXMuY29ubmVjdGlvbklkK1wiIEVycm9yIHdoZW4gc2VuZGluZzpcIixuKSx0aGlzLl9idWZmZXJpbmc9ITAsdGhpcy5jbG9zZSgpLCExfXJldHVybiEwfSxzLnByb3RvdHlwZS5fdHJ5QnVmZmVyPWZ1bmN0aW9uKCl7aWYodGhpcy5vcGVuJiYwIT09dGhpcy5fYnVmZmVyLmxlbmd0aCl7dmFyIGU9dGhpcy5fYnVmZmVyWzBdO3RoaXMuX3RyeVNlbmQoZSkmJih0aGlzLl9idWZmZXIuc2hpZnQoKSx0aGlzLl9idWZmZXJTaXplPXRoaXMuX2J1ZmZlci5sZW5ndGgsdGhpcy5fdHJ5QnVmZmVyKCkpfX0scy5wcm90b3R5cGUuX3NlbmRDaHVua3M9ZnVuY3Rpb24oZSl7dmFyIG4scixhPWkudXRpbC5jaHVuayhlKTtvLmRlZmF1bHQubG9nKFwiREMjXCIrdGhpcy5jb25uZWN0aW9uSWQrXCIgVHJ5IHRvIHNlbmQgXCIrYS5sZW5ndGgrXCIgY2h1bmtzLi4uXCIpO3RyeXtmb3IodmFyIHM9dChhKSx1PXMubmV4dCgpOyF1LmRvbmU7dT1zLm5leHQoKSl7dmFyIGw9dS52YWx1ZTt0aGlzLnNlbmQobCwhMCl9fWNhdGNoKGYpe249e2Vycm9yOmZ9fWZpbmFsbHl7dHJ5e3UmJiF1LmRvbmUmJihyPXMucmV0dXJuKSYmci5jYWxsKHMpfWZpbmFsbHl7aWYobil0aHJvdyBuLmVycm9yfX19LHMucHJvdG90eXBlLmhhbmRsZU1lc3NhZ2U9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5wYXlsb2FkO3N3aXRjaChlLnR5cGUpe2Nhc2UgYS5TZXJ2ZXJNZXNzYWdlVHlwZS5BbnN3ZXI6dGhpcy5fbmVnb3RpYXRvci5oYW5kbGVTRFAoZS50eXBlLHQuc2RwKTticmVhaztjYXNlIGEuU2VydmVyTWVzc2FnZVR5cGUuQ2FuZGlkYXRlOnRoaXMuX25lZ290aWF0b3IuaGFuZGxlQ2FuZGlkYXRlKHQuY2FuZGlkYXRlKTticmVhaztkZWZhdWx0Om8uZGVmYXVsdC53YXJuKFwiVW5yZWNvZ25pemVkIG1lc3NhZ2UgdHlwZTpcIixlLnR5cGUsXCJmcm9tIHBlZXI6XCIsdGhpcy5wZWVyKX19LHMuSURfUFJFRklYPVwiZGNfXCIscy5NQVhfQlVGRkVSRURfQU1PVU5UPTgzODg2MDgsc30ocy5CYXNlQ29ubmVjdGlvbik7ZXhwb3J0cy5EYXRhQ29ubmVjdGlvbj1sO1xufSx7XCIuL3V0aWxcIjpcIkJIWGZcIixcIi4vbG9nZ2VyXCI6XCJXT3M5XCIsXCIuL25lZ290aWF0b3JcIjpcIkhDZFhcIixcIi4vZW51bXNcIjpcIlpSWWZcIixcIi4vYmFzZWNvbm5lY3Rpb25cIjpcInRRRktcIixcIi4vZW5jb2RpbmdRdWV1ZVwiOlwiR0dwNlwifV0sXCJpbjdMXCI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpIHtcblwidXNlIHN0cmljdFwiO3ZhciB0PXRoaXMmJnRoaXMuX19hd2FpdGVyfHxmdW5jdGlvbih0LGUscixvKXtyZXR1cm4gbmV3KHJ8fChyPVByb21pc2UpKShmdW5jdGlvbihuLHMpe2Z1bmN0aW9uIGkodCl7dHJ5e2Eoby5uZXh0KHQpKX1jYXRjaChlKXtzKGUpfX1mdW5jdGlvbiB1KHQpe3RyeXthKG8udGhyb3codCkpfWNhdGNoKGUpe3MoZSl9fWZ1bmN0aW9uIGEodCl7dmFyIGU7dC5kb25lP24odC52YWx1ZSk6KGU9dC52YWx1ZSxlIGluc3RhbmNlb2Ygcj9lOm5ldyByKGZ1bmN0aW9uKHQpe3QoZSl9KSkudGhlbihpLHUpfWEoKG89by5hcHBseSh0LGV8fFtdKSkubmV4dCgpKX0pfSxlPXRoaXMmJnRoaXMuX19nZW5lcmF0b3J8fGZ1bmN0aW9uKHQsZSl7dmFyIHIsbyxuLHMsaT17bGFiZWw6MCxzZW50OmZ1bmN0aW9uKCl7aWYoMSZuWzBdKXRocm93IG5bMV07cmV0dXJuIG5bMV19LHRyeXM6W10sb3BzOltdfTtyZXR1cm4gcz17bmV4dDp1KDApLHRocm93OnUoMSkscmV0dXJuOnUoMil9LFwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmKHNbU3ltYm9sLml0ZXJhdG9yXT1mdW5jdGlvbigpe3JldHVybiB0aGlzfSkscztmdW5jdGlvbiB1KHMpe3JldHVybiBmdW5jdGlvbih1KXtyZXR1cm4gZnVuY3Rpb24ocyl7aWYocil0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtmb3IoO2k7KXRyeXtpZihyPTEsbyYmKG49MiZzWzBdP28ucmV0dXJuOnNbMF0/by50aHJvd3x8KChuPW8ucmV0dXJuKSYmbi5jYWxsKG8pLDApOm8ubmV4dCkmJiEobj1uLmNhbGwobyxzWzFdKSkuZG9uZSlyZXR1cm4gbjtzd2l0Y2gobz0wLG4mJihzPVsyJnNbMF0sbi52YWx1ZV0pLHNbMF0pe2Nhc2UgMDpjYXNlIDE6bj1zO2JyZWFrO2Nhc2UgNDpyZXR1cm4gaS5sYWJlbCsrLHt2YWx1ZTpzWzFdLGRvbmU6ITF9O2Nhc2UgNTppLmxhYmVsKyssbz1zWzFdLHM9WzBdO2NvbnRpbnVlO2Nhc2UgNzpzPWkub3BzLnBvcCgpLGkudHJ5cy5wb3AoKTtjb250aW51ZTtkZWZhdWx0OmlmKCEobj0obj1pLnRyeXMpLmxlbmd0aD4wJiZuW24ubGVuZ3RoLTFdKSYmKDY9PT1zWzBdfHwyPT09c1swXSkpe2k9MDtjb250aW51ZX1pZigzPT09c1swXSYmKCFufHxzWzFdPm5bMF0mJnNbMV08blszXSkpe2kubGFiZWw9c1sxXTticmVha31pZig2PT09c1swXSYmaS5sYWJlbDxuWzFdKXtpLmxhYmVsPW5bMV0sbj1zO2JyZWFrfWlmKG4mJmkubGFiZWw8blsyXSl7aS5sYWJlbD1uWzJdLGkub3BzLnB1c2gocyk7YnJlYWt9blsyXSYmaS5vcHMucG9wKCksaS50cnlzLnBvcCgpO2NvbnRpbnVlfXM9ZS5jYWxsKHQsaSl9Y2F0Y2godSl7cz1bNix1XSxvPTB9ZmluYWxseXtyPW49MH1pZig1JnNbMF0pdGhyb3cgc1sxXTtyZXR1cm57dmFsdWU6c1swXT9zWzFdOnZvaWQgMCxkb25lOiEwfX0oW3MsdV0pfX19LHI9dGhpcyYmdGhpcy5fX2ltcG9ydERlZmF1bHR8fGZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX07T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5BUEk9dm9pZCAwO3ZhciBvPXJlcXVpcmUoXCIuL3V0aWxcIiksbj1yKHJlcXVpcmUoXCIuL2xvZ2dlclwiKSkscz1mdW5jdGlvbigpe2Z1bmN0aW9uIHIodCl7dGhpcy5fb3B0aW9ucz10fXJldHVybiByLnByb3RvdHlwZS5fYnVpbGRVcmw9ZnVuY3Rpb24odCl7dmFyIGU9KHRoaXMuX29wdGlvbnMuc2VjdXJlP1wiaHR0cHM6Ly9cIjpcImh0dHA6Ly9cIikrdGhpcy5fb3B0aW9ucy5ob3N0K1wiOlwiK3RoaXMuX29wdGlvbnMucG9ydCt0aGlzLl9vcHRpb25zLnBhdGgrdGhpcy5fb3B0aW9ucy5rZXkrXCIvXCIrdDtyZXR1cm4gZSs9XCI/dHM9XCIrKG5ldyBEYXRlKS5nZXRUaW1lKCkrTWF0aC5yYW5kb20oKX0sci5wcm90b3R5cGUucmV0cmlldmVJZD1mdW5jdGlvbigpe3JldHVybiB0KHRoaXMsdm9pZCAwLFByb21pc2UsZnVuY3Rpb24oKXt2YXIgdCxyLHMsaTtyZXR1cm4gZSh0aGlzLGZ1bmN0aW9uKGUpe3N3aXRjaChlLmxhYmVsKXtjYXNlIDA6dD10aGlzLl9idWlsZFVybChcImlkXCIpLGUubGFiZWw9MTtjYXNlIDE6cmV0dXJuIGUudHJ5cy5wdXNoKFsxLDMsLDRdKSxbNCxmZXRjaCh0KV07Y2FzZSAyOmlmKDIwMCE9PShyPWUuc2VudCgpKS5zdGF0dXMpdGhyb3cgbmV3IEVycm9yKFwiRXJyb3IuIFN0YXR1czpcIityLnN0YXR1cyk7cmV0dXJuWzIsci50ZXh0KCldO2Nhc2UgMzp0aHJvdyBzPWUuc2VudCgpLG4uZGVmYXVsdC5lcnJvcihcIkVycm9yIHJldHJpZXZpbmcgSURcIixzKSxpPVwiXCIsXCIvXCI9PT10aGlzLl9vcHRpb25zLnBhdGgmJnRoaXMuX29wdGlvbnMuaG9zdCE9PW8udXRpbC5DTE9VRF9IT1NUJiYoaT1cIiBJZiB5b3UgcGFzc2VkIGluIGEgYHBhdGhgIHRvIHlvdXIgc2VsZi1ob3N0ZWQgUGVlclNlcnZlciwgeW91J2xsIGFsc28gbmVlZCB0byBwYXNzIGluIHRoYXQgc2FtZSBwYXRoIHdoZW4gY3JlYXRpbmcgYSBuZXcgUGVlci5cIiksbmV3IEVycm9yKFwiQ291bGQgbm90IGdldCBhbiBJRCBmcm9tIHRoZSBzZXJ2ZXIuXCIraSk7Y2FzZSA0OnJldHVyblsyXX19KX0pfSxyLnByb3RvdHlwZS5saXN0QWxsUGVlcnM9ZnVuY3Rpb24oKXtyZXR1cm4gdCh0aGlzLHZvaWQgMCxQcm9taXNlLGZ1bmN0aW9uKCl7dmFyIHQscixzLGk7cmV0dXJuIGUodGhpcyxmdW5jdGlvbihlKXtzd2l0Y2goZS5sYWJlbCl7Y2FzZSAwOnQ9dGhpcy5fYnVpbGRVcmwoXCJwZWVyc1wiKSxlLmxhYmVsPTE7Y2FzZSAxOnJldHVybiBlLnRyeXMucHVzaChbMSwzLCw0XSksWzQsZmV0Y2godCldO2Nhc2UgMjppZigyMDAhPT0ocj1lLnNlbnQoKSkuc3RhdHVzKXtpZig0MDE9PT1yLnN0YXR1cyl0aHJvdyBzPVwiXCIscz10aGlzLl9vcHRpb25zLmhvc3Q9PT1vLnV0aWwuQ0xPVURfSE9TVD9cIkl0IGxvb2tzIGxpa2UgeW91J3JlIHVzaW5nIHRoZSBjbG91ZCBzZXJ2ZXIuIFlvdSBjYW4gZW1haWwgdGVhbUBwZWVyanMuY29tIHRvIGVuYWJsZSBwZWVyIGxpc3RpbmcgZm9yIHlvdXIgQVBJIGtleS5cIjpcIllvdSBuZWVkIHRvIGVuYWJsZSBgYWxsb3dfZGlzY292ZXJ5YCBvbiB5b3VyIHNlbGYtaG9zdGVkIFBlZXJTZXJ2ZXIgdG8gdXNlIHRoaXMgZmVhdHVyZS5cIixuZXcgRXJyb3IoXCJJdCBkb2Vzbid0IGxvb2sgbGlrZSB5b3UgaGF2ZSBwZXJtaXNzaW9uIHRvIGxpc3QgcGVlcnMgSURzLiBcIitzKTt0aHJvdyBuZXcgRXJyb3IoXCJFcnJvci4gU3RhdHVzOlwiK3Iuc3RhdHVzKX1yZXR1cm5bMixyLmpzb24oKV07Y2FzZSAzOnRocm93IGk9ZS5zZW50KCksbi5kZWZhdWx0LmVycm9yKFwiRXJyb3IgcmV0cmlldmluZyBsaXN0IHBlZXJzXCIsaSksbmV3IEVycm9yKFwiQ291bGQgbm90IGdldCBsaXN0IHBlZXJzIGZyb20gdGhlIHNlcnZlci5cIitpKTtjYXNlIDQ6cmV0dXJuWzJdfX0pfSl9LHJ9KCk7ZXhwb3J0cy5BUEk9cztcbn0se1wiLi91dGlsXCI6XCJCSFhmXCIsXCIuL2xvZ2dlclwiOlwiV09zOVwifV0sXCJIeHBkXCI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpIHtcblwidXNlIHN0cmljdFwiO3ZhciBlPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBlPWZ1bmN0aW9uKHQsbil7cmV0dXJuKGU9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsbikmJihlW25dPXRbbl0pfSkodCxuKX07cmV0dXJuIGZ1bmN0aW9uKHQsbil7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgbiYmbnVsbCE9PW4pdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIrU3RyaW5nKG4pK1wiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9dH1lKHQsbiksdC5wcm90b3R5cGU9bnVsbD09PW4/T2JqZWN0LmNyZWF0ZShuKTooci5wcm90b3R5cGU9bi5wcm90b3R5cGUsbmV3IHIpfX0oKSx0PXRoaXMmJnRoaXMuX19hc3NpZ258fGZ1bmN0aW9uKCl7cmV0dXJuKHQ9T2JqZWN0LmFzc2lnbnx8ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LG49MSxyPWFyZ3VtZW50cy5sZW5ndGg7bjxyO24rKylmb3IodmFyIG8gaW4gdD1hcmd1bWVudHNbbl0pT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsbykmJihlW29dPXRbb10pO3JldHVybiBlfSkuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxuPXRoaXMmJnRoaXMuX192YWx1ZXN8fGZ1bmN0aW9uKGUpe3ZhciB0PVwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmU3ltYm9sLml0ZXJhdG9yLG49dCYmZVt0XSxyPTA7aWYobilyZXR1cm4gbi5jYWxsKGUpO2lmKGUmJlwibnVtYmVyXCI9PXR5cGVvZiBlLmxlbmd0aClyZXR1cm57bmV4dDpmdW5jdGlvbigpe3JldHVybiBlJiZyPj1lLmxlbmd0aCYmKGU9dm9pZCAwKSx7dmFsdWU6ZSYmZVtyKytdLGRvbmU6IWV9fX07dGhyb3cgbmV3IFR5cGVFcnJvcih0P1wiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS5cIjpcIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIil9LHI9dGhpcyYmdGhpcy5fX3JlYWR8fGZ1bmN0aW9uKGUsdCl7dmFyIG49XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZlW1N5bWJvbC5pdGVyYXRvcl07aWYoIW4pcmV0dXJuIGU7dmFyIHIsbyxpPW4uY2FsbChlKSxzPVtdO3RyeXtmb3IoOyh2b2lkIDA9PT10fHx0LS0gPjApJiYhKHI9aS5uZXh0KCkpLmRvbmU7KXMucHVzaChyLnZhbHVlKX1jYXRjaChhKXtvPXtlcnJvcjphfX1maW5hbGx5e3RyeXtyJiYhci5kb25lJiYobj1pLnJldHVybikmJm4uY2FsbChpKX1maW5hbGx5e2lmKG8pdGhyb3cgby5lcnJvcn19cmV0dXJuIHN9LG89dGhpcyYmdGhpcy5fX2ltcG9ydERlZmF1bHR8fGZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX07T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5QZWVyPXZvaWQgMDt2YXIgaT1yZXF1aXJlKFwiZXZlbnRlbWl0dGVyM1wiKSxzPXJlcXVpcmUoXCIuL3V0aWxcIiksYT1vKHJlcXVpcmUoXCIuL2xvZ2dlclwiKSksYz1yZXF1aXJlKFwiLi9zb2NrZXRcIiksbD1yZXF1aXJlKFwiLi9tZWRpYWNvbm5lY3Rpb25cIiksdT1yZXF1aXJlKFwiLi9kYXRhY29ubmVjdGlvblwiKSxkPXJlcXVpcmUoXCIuL2VudW1zXCIpLHA9cmVxdWlyZShcIi4vYXBpXCIpLGg9ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oKXt9fSgpLGY9ZnVuY3Rpb24obyl7ZnVuY3Rpb24gaShlLG4pe3ZhciByLGM9by5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBjLl9pZD1udWxsLGMuX2xhc3RTZXJ2ZXJJZD1udWxsLGMuX2Rlc3Ryb3llZD0hMSxjLl9kaXNjb25uZWN0ZWQ9ITEsYy5fb3Blbj0hMSxjLl9jb25uZWN0aW9ucz1uZXcgTWFwLGMuX2xvc3RNZXNzYWdlcz1uZXcgTWFwLGUmJmUuY29uc3RydWN0b3I9PU9iamVjdD9uPWU6ZSYmKHI9ZS50b1N0cmluZygpKSxuPXQoe2RlYnVnOjAsaG9zdDpzLnV0aWwuQ0xPVURfSE9TVCxwb3J0OnMudXRpbC5DTE9VRF9QT1JULHBhdGg6XCIvXCIsa2V5OmkuREVGQVVMVF9LRVksdG9rZW46cy51dGlsLnJhbmRvbVRva2VuKCksY29uZmlnOnMudXRpbC5kZWZhdWx0Q29uZmlnfSxuKSxjLl9vcHRpb25zPW4sXCIvXCI9PT1jLl9vcHRpb25zLmhvc3QmJihjLl9vcHRpb25zLmhvc3Q9d2luZG93LmxvY2F0aW9uLmhvc3RuYW1lKSxjLl9vcHRpb25zLnBhdGgmJihcIi9cIiE9PWMuX29wdGlvbnMucGF0aFswXSYmKGMuX29wdGlvbnMucGF0aD1cIi9cIitjLl9vcHRpb25zLnBhdGgpLFwiL1wiIT09Yy5fb3B0aW9ucy5wYXRoW2MuX29wdGlvbnMucGF0aC5sZW5ndGgtMV0mJihjLl9vcHRpb25zLnBhdGgrPVwiL1wiKSksdm9pZCAwPT09Yy5fb3B0aW9ucy5zZWN1cmUmJmMuX29wdGlvbnMuaG9zdCE9PXMudXRpbC5DTE9VRF9IT1NUP2MuX29wdGlvbnMuc2VjdXJlPXMudXRpbC5pc1NlY3VyZSgpOmMuX29wdGlvbnMuaG9zdD09cy51dGlsLkNMT1VEX0hPU1QmJihjLl9vcHRpb25zLnNlY3VyZT0hMCksYy5fb3B0aW9ucy5sb2dGdW5jdGlvbiYmYS5kZWZhdWx0LnNldExvZ0Z1bmN0aW9uKGMuX29wdGlvbnMubG9nRnVuY3Rpb24pLGEuZGVmYXVsdC5sb2dMZXZlbD1jLl9vcHRpb25zLmRlYnVnfHwwLGMuX2FwaT1uZXcgcC5BUEkobiksYy5fc29ja2V0PWMuX2NyZWF0ZVNlcnZlckNvbm5lY3Rpb24oKSxzLnV0aWwuc3VwcG9ydHMuYXVkaW9WaWRlb3x8cy51dGlsLnN1cHBvcnRzLmRhdGE/ciYmIXMudXRpbC52YWxpZGF0ZUlkKHIpPyhjLl9kZWxheWVkQWJvcnQoZC5QZWVyRXJyb3JUeXBlLkludmFsaWRJRCwnSUQgXCInK3IrJ1wiIGlzIGludmFsaWQnKSxjKToocj9jLl9pbml0aWFsaXplKHIpOmMuX2FwaS5yZXRyaWV2ZUlkKCkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gYy5faW5pdGlhbGl6ZShlKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe3JldHVybiBjLl9hYm9ydChkLlBlZXJFcnJvclR5cGUuU2VydmVyRXJyb3IsZSl9KSxjKTooYy5fZGVsYXllZEFib3J0KGQuUGVlckVycm9yVHlwZS5Ccm93c2VySW5jb21wYXRpYmxlLFwiVGhlIGN1cnJlbnQgYnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IFdlYlJUQ1wiKSxjKX1yZXR1cm4gZShpLG8pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpLnByb3RvdHlwZSxcImlkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pZH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoaS5wcm90b3R5cGUsXCJvcHRpb25zXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vcHRpb25zfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpLnByb3RvdHlwZSxcIm9wZW5cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29wZW59LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGkucHJvdG90eXBlLFwic29ja2V0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zb2NrZXR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGkucHJvdG90eXBlLFwiY29ubmVjdGlvbnNcIix7Z2V0OmZ1bmN0aW9uKCl7dmFyIGUsdCxvPU9iamVjdC5jcmVhdGUobnVsbCk7dHJ5e2Zvcih2YXIgaT1uKHRoaXMuX2Nvbm5lY3Rpb25zKSxzPWkubmV4dCgpOyFzLmRvbmU7cz1pLm5leHQoKSl7dmFyIGE9cihzLnZhbHVlLDIpLGM9YVswXSxsPWFbMV07b1tjXT1sfX1jYXRjaCh1KXtlPXtlcnJvcjp1fX1maW5hbGx5e3RyeXtzJiYhcy5kb25lJiYodD1pLnJldHVybikmJnQuY2FsbChpKX1maW5hbGx5e2lmKGUpdGhyb3cgZS5lcnJvcn19cmV0dXJuIG99LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGkucHJvdG90eXBlLFwiZGVzdHJveWVkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kZXN0cm95ZWR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGkucHJvdG90eXBlLFwiZGlzY29ubmVjdGVkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kaXNjb25uZWN0ZWR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksaS5wcm90b3R5cGUuX2NyZWF0ZVNlcnZlckNvbm5lY3Rpb249ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9bmV3IGMuU29ja2V0KHRoaXMuX29wdGlvbnMuc2VjdXJlLHRoaXMuX29wdGlvbnMuaG9zdCx0aGlzLl9vcHRpb25zLnBvcnQsdGhpcy5fb3B0aW9ucy5wYXRoLHRoaXMuX29wdGlvbnMua2V5LHRoaXMuX29wdGlvbnMucGluZ0ludGVydmFsKTtyZXR1cm4gdC5vbihkLlNvY2tldEV2ZW50VHlwZS5NZXNzYWdlLGZ1bmN0aW9uKHQpe2UuX2hhbmRsZU1lc3NhZ2UodCl9KSx0Lm9uKGQuU29ja2V0RXZlbnRUeXBlLkVycm9yLGZ1bmN0aW9uKHQpe2UuX2Fib3J0KGQuUGVlckVycm9yVHlwZS5Tb2NrZXRFcnJvcix0KX0pLHQub24oZC5Tb2NrZXRFdmVudFR5cGUuRGlzY29ubmVjdGVkLGZ1bmN0aW9uKCl7ZS5kaXNjb25uZWN0ZWR8fChlLmVtaXRFcnJvcihkLlBlZXJFcnJvclR5cGUuTmV0d29yayxcIkxvc3QgY29ubmVjdGlvbiB0byBzZXJ2ZXIuXCIpLGUuZGlzY29ubmVjdCgpKX0pLHQub24oZC5Tb2NrZXRFdmVudFR5cGUuQ2xvc2UsZnVuY3Rpb24oKXtlLmRpc2Nvbm5lY3RlZHx8ZS5fYWJvcnQoZC5QZWVyRXJyb3JUeXBlLlNvY2tldENsb3NlZCxcIlVuZGVybHlpbmcgc29ja2V0IGlzIGFscmVhZHkgY2xvc2VkLlwiKX0pLHR9LGkucHJvdG90eXBlLl9pbml0aWFsaXplPWZ1bmN0aW9uKGUpe3RoaXMuX2lkPWUsdGhpcy5zb2NrZXQuc3RhcnQoZSx0aGlzLl9vcHRpb25zLnRva2VuKX0saS5wcm90b3R5cGUuX2hhbmRsZU1lc3NhZ2U9ZnVuY3Rpb24oZSl7dmFyIHQscixvPWUudHlwZSxpPWUucGF5bG9hZCxzPWUuc3JjO3N3aXRjaChvKXtjYXNlIGQuU2VydmVyTWVzc2FnZVR5cGUuT3Blbjp0aGlzLl9sYXN0U2VydmVySWQ9dGhpcy5pZCx0aGlzLl9vcGVuPSEwLHRoaXMuZW1pdChkLlBlZXJFdmVudFR5cGUuT3Blbix0aGlzLmlkKTticmVhaztjYXNlIGQuU2VydmVyTWVzc2FnZVR5cGUuRXJyb3I6dGhpcy5fYWJvcnQoZC5QZWVyRXJyb3JUeXBlLlNlcnZlckVycm9yLGkubXNnKTticmVhaztjYXNlIGQuU2VydmVyTWVzc2FnZVR5cGUuSWRUYWtlbjp0aGlzLl9hYm9ydChkLlBlZXJFcnJvclR5cGUuVW5hdmFpbGFibGVJRCwnSUQgXCInK3RoaXMuaWQrJ1wiIGlzIHRha2VuJyk7YnJlYWs7Y2FzZSBkLlNlcnZlck1lc3NhZ2VUeXBlLkludmFsaWRLZXk6dGhpcy5fYWJvcnQoZC5QZWVyRXJyb3JUeXBlLkludmFsaWRLZXksJ0FQSSBLRVkgXCInK3RoaXMuX29wdGlvbnMua2V5KydcIiBpcyBpbnZhbGlkJyk7YnJlYWs7Y2FzZSBkLlNlcnZlck1lc3NhZ2VUeXBlLkxlYXZlOmEuZGVmYXVsdC5sb2coXCJSZWNlaXZlZCBsZWF2ZSBtZXNzYWdlIGZyb20gXCIrcyksdGhpcy5fY2xlYW51cFBlZXIocyksdGhpcy5fY29ubmVjdGlvbnMuZGVsZXRlKHMpO2JyZWFrO2Nhc2UgZC5TZXJ2ZXJNZXNzYWdlVHlwZS5FeHBpcmU6dGhpcy5lbWl0RXJyb3IoZC5QZWVyRXJyb3JUeXBlLlBlZXJVbmF2YWlsYWJsZSxcIkNvdWxkIG5vdCBjb25uZWN0IHRvIHBlZXIgXCIrcyk7YnJlYWs7Y2FzZSBkLlNlcnZlck1lc3NhZ2VUeXBlLk9mZmVyOnZhciBjPWkuY29ubmVjdGlvbklkO2lmKChfPXRoaXMuZ2V0Q29ubmVjdGlvbihzLGMpKSYmKF8uY2xvc2UoKSxhLmRlZmF1bHQud2FybihcIk9mZmVyIHJlY2VpdmVkIGZvciBleGlzdGluZyBDb25uZWN0aW9uIElEOlwiK2MpKSxpLnR5cGU9PT1kLkNvbm5lY3Rpb25UeXBlLk1lZGlhKV89bmV3IGwuTWVkaWFDb25uZWN0aW9uKHMsdGhpcyx7Y29ubmVjdGlvbklkOmMsX3BheWxvYWQ6aSxtZXRhZGF0YTppLm1ldGFkYXRhfSksdGhpcy5fYWRkQ29ubmVjdGlvbihzLF8pLHRoaXMuZW1pdChkLlBlZXJFdmVudFR5cGUuQ2FsbCxfKTtlbHNle2lmKGkudHlwZSE9PWQuQ29ubmVjdGlvblR5cGUuRGF0YSlyZXR1cm4gdm9pZCBhLmRlZmF1bHQud2FybihcIlJlY2VpdmVkIG1hbGZvcm1lZCBjb25uZWN0aW9uIHR5cGU6XCIraS50eXBlKTtfPW5ldyB1LkRhdGFDb25uZWN0aW9uKHMsdGhpcyx7Y29ubmVjdGlvbklkOmMsX3BheWxvYWQ6aSxtZXRhZGF0YTppLm1ldGFkYXRhLGxhYmVsOmkubGFiZWwsc2VyaWFsaXphdGlvbjppLnNlcmlhbGl6YXRpb24scmVsaWFibGU6aS5yZWxpYWJsZX0pLHRoaXMuX2FkZENvbm5lY3Rpb24ocyxfKSx0aGlzLmVtaXQoZC5QZWVyRXZlbnRUeXBlLkNvbm5lY3Rpb24sXyl9dmFyIHA9dGhpcy5fZ2V0TWVzc2FnZXMoYyk7dHJ5e2Zvcih2YXIgaD1uKHApLGY9aC5uZXh0KCk7IWYuZG9uZTtmPWgubmV4dCgpKXt2YXIgeT1mLnZhbHVlO18uaGFuZGxlTWVzc2FnZSh5KX19Y2F0Y2godil7dD17ZXJyb3I6dn19ZmluYWxseXt0cnl7ZiYmIWYuZG9uZSYmKHI9aC5yZXR1cm4pJiZyLmNhbGwoaCl9ZmluYWxseXtpZih0KXRocm93IHQuZXJyb3J9fWJyZWFrO2RlZmF1bHQ6aWYoIWkpcmV0dXJuIHZvaWQgYS5kZWZhdWx0Lndhcm4oXCJZb3UgcmVjZWl2ZWQgYSBtYWxmb3JtZWQgbWVzc2FnZSBmcm9tIFwiK3MrXCIgb2YgdHlwZSBcIitvKTt2YXIgXztjPWkuY29ubmVjdGlvbklkOyhfPXRoaXMuZ2V0Q29ubmVjdGlvbihzLGMpKSYmXy5wZWVyQ29ubmVjdGlvbj9fLmhhbmRsZU1lc3NhZ2UoZSk6Yz90aGlzLl9zdG9yZU1lc3NhZ2UoYyxlKTphLmRlZmF1bHQud2FybihcIllvdSByZWNlaXZlZCBhbiB1bnJlY29nbml6ZWQgbWVzc2FnZTpcIixlKX19LGkucHJvdG90eXBlLl9zdG9yZU1lc3NhZ2U9ZnVuY3Rpb24oZSx0KXt0aGlzLl9sb3N0TWVzc2FnZXMuaGFzKGUpfHx0aGlzLl9sb3N0TWVzc2FnZXMuc2V0KGUsW10pLHRoaXMuX2xvc3RNZXNzYWdlcy5nZXQoZSkucHVzaCh0KX0saS5wcm90b3R5cGUuX2dldE1lc3NhZ2VzPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2xvc3RNZXNzYWdlcy5nZXQoZSk7cmV0dXJuIHQ/KHRoaXMuX2xvc3RNZXNzYWdlcy5kZWxldGUoZSksdCk6W119LGkucHJvdG90eXBlLmNvbm5lY3Q9ZnVuY3Rpb24oZSx0KXtpZih2b2lkIDA9PT10JiYodD17fSksdGhpcy5kaXNjb25uZWN0ZWQpcmV0dXJuIGEuZGVmYXVsdC53YXJuKFwiWW91IGNhbm5vdCBjb25uZWN0IHRvIGEgbmV3IFBlZXIgYmVjYXVzZSB5b3UgY2FsbGVkIC5kaXNjb25uZWN0KCkgb24gdGhpcyBQZWVyIGFuZCBlbmRlZCB5b3VyIGNvbm5lY3Rpb24gd2l0aCB0aGUgc2VydmVyLiBZb3UgY2FuIGNyZWF0ZSBhIG5ldyBQZWVyIHRvIHJlY29ubmVjdCwgb3IgY2FsbCByZWNvbm5lY3Qgb24gdGhpcyBwZWVyIGlmIHlvdSBiZWxpZXZlIGl0cyBJRCB0byBzdGlsbCBiZSBhdmFpbGFibGUuXCIpLHZvaWQgdGhpcy5lbWl0RXJyb3IoZC5QZWVyRXJyb3JUeXBlLkRpc2Nvbm5lY3RlZCxcIkNhbm5vdCBjb25uZWN0IHRvIG5ldyBQZWVyIGFmdGVyIGRpc2Nvbm5lY3RpbmcgZnJvbSBzZXJ2ZXIuXCIpO3ZhciBuPW5ldyB1LkRhdGFDb25uZWN0aW9uKGUsdGhpcyx0KTtyZXR1cm4gdGhpcy5fYWRkQ29ubmVjdGlvbihlLG4pLG59LGkucHJvdG90eXBlLmNhbGw9ZnVuY3Rpb24oZSx0LG4pe2lmKHZvaWQgMD09PW4mJihuPXt9KSx0aGlzLmRpc2Nvbm5lY3RlZClyZXR1cm4gYS5kZWZhdWx0Lndhcm4oXCJZb3UgY2Fubm90IGNvbm5lY3QgdG8gYSBuZXcgUGVlciBiZWNhdXNlIHlvdSBjYWxsZWQgLmRpc2Nvbm5lY3QoKSBvbiB0aGlzIFBlZXIgYW5kIGVuZGVkIHlvdXIgY29ubmVjdGlvbiB3aXRoIHRoZSBzZXJ2ZXIuIFlvdSBjYW4gY3JlYXRlIGEgbmV3IFBlZXIgdG8gcmVjb25uZWN0LlwiKSx2b2lkIHRoaXMuZW1pdEVycm9yKGQuUGVlckVycm9yVHlwZS5EaXNjb25uZWN0ZWQsXCJDYW5ub3QgY29ubmVjdCB0byBuZXcgUGVlciBhZnRlciBkaXNjb25uZWN0aW5nIGZyb20gc2VydmVyLlwiKTtpZih0KXtuLl9zdHJlYW09dDt2YXIgcj1uZXcgbC5NZWRpYUNvbm5lY3Rpb24oZSx0aGlzLG4pO3JldHVybiB0aGlzLl9hZGRDb25uZWN0aW9uKGUscikscn1hLmRlZmF1bHQuZXJyb3IoXCJUbyBjYWxsIGEgcGVlciwgeW91IG11c3QgcHJvdmlkZSBhIHN0cmVhbSBmcm9tIHlvdXIgYnJvd3NlcidzIGBnZXRVc2VyTWVkaWFgLlwiKX0saS5wcm90b3R5cGUuX2FkZENvbm5lY3Rpb249ZnVuY3Rpb24oZSx0KXthLmRlZmF1bHQubG9nKFwiYWRkIGNvbm5lY3Rpb24gXCIrdC50eXBlK1wiOlwiK3QuY29ubmVjdGlvbklkK1wiIHRvIHBlZXJJZDpcIitlKSx0aGlzLl9jb25uZWN0aW9ucy5oYXMoZSl8fHRoaXMuX2Nvbm5lY3Rpb25zLnNldChlLFtdKSx0aGlzLl9jb25uZWN0aW9ucy5nZXQoZSkucHVzaCh0KX0saS5wcm90b3R5cGUuX3JlbW92ZUNvbm5lY3Rpb249ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fY29ubmVjdGlvbnMuZ2V0KGUucGVlcik7aWYodCl7dmFyIG49dC5pbmRleE9mKGUpOy0xIT09biYmdC5zcGxpY2UobiwxKX10aGlzLl9sb3N0TWVzc2FnZXMuZGVsZXRlKGUuY29ubmVjdGlvbklkKX0saS5wcm90b3R5cGUuZ2V0Q29ubmVjdGlvbj1mdW5jdGlvbihlLHQpe3ZhciByLG8saT10aGlzLl9jb25uZWN0aW9ucy5nZXQoZSk7aWYoIWkpcmV0dXJuIG51bGw7dHJ5e2Zvcih2YXIgcz1uKGkpLGE9cy5uZXh0KCk7IWEuZG9uZTthPXMubmV4dCgpKXt2YXIgYz1hLnZhbHVlO2lmKGMuY29ubmVjdGlvbklkPT09dClyZXR1cm4gY319Y2F0Y2gobCl7cj17ZXJyb3I6bH19ZmluYWxseXt0cnl7YSYmIWEuZG9uZSYmKG89cy5yZXR1cm4pJiZvLmNhbGwocyl9ZmluYWxseXtpZihyKXRocm93IHIuZXJyb3J9fXJldHVybiBudWxsfSxpLnByb3RvdHlwZS5fZGVsYXllZEFib3J0PWZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcztzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bi5fYWJvcnQoZSx0KX0sMCl9LGkucHJvdG90eXBlLl9hYm9ydD1mdW5jdGlvbihlLHQpe2EuZGVmYXVsdC5lcnJvcihcIkFib3J0aW5nIVwiKSx0aGlzLmVtaXRFcnJvcihlLHQpLHRoaXMuX2xhc3RTZXJ2ZXJJZD90aGlzLmRpc2Nvbm5lY3QoKTp0aGlzLmRlc3Ryb3koKX0saS5wcm90b3R5cGUuZW1pdEVycm9yPWZ1bmN0aW9uKGUsdCl7dmFyIG47YS5kZWZhdWx0LmVycm9yKFwiRXJyb3I6XCIsdCksKG49XCJzdHJpbmdcIj09dHlwZW9mIHQ/bmV3IEVycm9yKHQpOnQpLnR5cGU9ZSx0aGlzLmVtaXQoZC5QZWVyRXZlbnRUeXBlLkVycm9yLG4pfSxpLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dGhpcy5kZXN0cm95ZWR8fChhLmRlZmF1bHQubG9nKFwiRGVzdHJveSBwZWVyIHdpdGggSUQ6XCIrdGhpcy5pZCksdGhpcy5kaXNjb25uZWN0KCksdGhpcy5fY2xlYW51cCgpLHRoaXMuX2Rlc3Ryb3llZD0hMCx0aGlzLmVtaXQoZC5QZWVyRXZlbnRUeXBlLkNsb3NlKSl9LGkucHJvdG90eXBlLl9jbGVhbnVwPWZ1bmN0aW9uKCl7dmFyIGUsdDt0cnl7Zm9yKHZhciByPW4odGhpcy5fY29ubmVjdGlvbnMua2V5cygpKSxvPXIubmV4dCgpOyFvLmRvbmU7bz1yLm5leHQoKSl7dmFyIGk9by52YWx1ZTt0aGlzLl9jbGVhbnVwUGVlcihpKSx0aGlzLl9jb25uZWN0aW9ucy5kZWxldGUoaSl9fWNhdGNoKHMpe2U9e2Vycm9yOnN9fWZpbmFsbHl7dHJ5e28mJiFvLmRvbmUmJih0PXIucmV0dXJuKSYmdC5jYWxsKHIpfWZpbmFsbHl7aWYoZSl0aHJvdyBlLmVycm9yfX10aGlzLnNvY2tldC5yZW1vdmVBbGxMaXN0ZW5lcnMoKX0saS5wcm90b3R5cGUuX2NsZWFudXBQZWVyPWZ1bmN0aW9uKGUpe3ZhciB0LHIsbz10aGlzLl9jb25uZWN0aW9ucy5nZXQoZSk7aWYobyl0cnl7Zm9yKHZhciBpPW4obykscz1pLm5leHQoKTshcy5kb25lO3M9aS5uZXh0KCkpe3MudmFsdWUuY2xvc2UoKX19Y2F0Y2goYSl7dD17ZXJyb3I6YX19ZmluYWxseXt0cnl7cyYmIXMuZG9uZSYmKHI9aS5yZXR1cm4pJiZyLmNhbGwoaSl9ZmluYWxseXtpZih0KXRocm93IHQuZXJyb3J9fX0saS5wcm90b3R5cGUuZGlzY29ubmVjdD1mdW5jdGlvbigpe2lmKCF0aGlzLmRpc2Nvbm5lY3RlZCl7dmFyIGU9dGhpcy5pZDthLmRlZmF1bHQubG9nKFwiRGlzY29ubmVjdCBwZWVyIHdpdGggSUQ6XCIrZSksdGhpcy5fZGlzY29ubmVjdGVkPSEwLHRoaXMuX29wZW49ITEsdGhpcy5zb2NrZXQuY2xvc2UoKSx0aGlzLl9sYXN0U2VydmVySWQ9ZSx0aGlzLl9pZD1udWxsLHRoaXMuZW1pdChkLlBlZXJFdmVudFR5cGUuRGlzY29ubmVjdGVkLGUpfX0saS5wcm90b3R5cGUucmVjb25uZWN0PWZ1bmN0aW9uKCl7aWYodGhpcy5kaXNjb25uZWN0ZWQmJiF0aGlzLmRlc3Ryb3llZClhLmRlZmF1bHQubG9nKFwiQXR0ZW1wdGluZyByZWNvbm5lY3Rpb24gdG8gc2VydmVyIHdpdGggSUQgXCIrdGhpcy5fbGFzdFNlcnZlcklkKSx0aGlzLl9kaXNjb25uZWN0ZWQ9ITEsdGhpcy5faW5pdGlhbGl6ZSh0aGlzLl9sYXN0U2VydmVySWQpO2Vsc2V7aWYodGhpcy5kZXN0cm95ZWQpdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBwZWVyIGNhbm5vdCByZWNvbm5lY3QgdG8gdGhlIHNlcnZlci4gSXQgaGFzIGFscmVhZHkgYmVlbiBkZXN0cm95ZWQuXCIpO2lmKHRoaXMuZGlzY29ubmVjdGVkfHx0aGlzLm9wZW4pdGhyb3cgbmV3IEVycm9yKFwiUGVlciBcIit0aGlzLmlkK1wiIGNhbm5vdCByZWNvbm5lY3QgYmVjYXVzZSBpdCBpcyBub3QgZGlzY29ubmVjdGVkIGZyb20gdGhlIHNlcnZlciFcIik7YS5kZWZhdWx0LmVycm9yKFwiSW4gYSBodXJyeT8gV2UncmUgc3RpbGwgdHJ5aW5nIHRvIG1ha2UgdGhlIGluaXRpYWwgY29ubmVjdGlvbiFcIil9fSxpLnByb3RvdHlwZS5saXN0QWxsUGVlcnM9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt2b2lkIDA9PT1lJiYoZT1mdW5jdGlvbihlKXt9KSx0aGlzLl9hcGkubGlzdEFsbFBlZXJzKCkudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gZSh0KX0pLmNhdGNoKGZ1bmN0aW9uKGUpe3JldHVybiB0Ll9hYm9ydChkLlBlZXJFcnJvclR5cGUuU2VydmVyRXJyb3IsZSl9KX0saS5ERUZBVUxUX0tFWT1cInBlZXJqc1wiLGl9KGkuRXZlbnRFbWl0dGVyKTtleHBvcnRzLlBlZXI9Zjtcbn0se1wiZXZlbnRlbWl0dGVyM1wiOlwiSkpsU1wiLFwiLi91dGlsXCI6XCJCSFhmXCIsXCIuL2xvZ2dlclwiOlwiV09zOVwiLFwiLi9zb2NrZXRcIjpcIndKbHZcIixcIi4vbWVkaWFjb25uZWN0aW9uXCI6XCJkYkhQXCIsXCIuL2RhdGFjb25uZWN0aW9uXCI6XCJHQlRRXCIsXCIuL2VudW1zXCI6XCJaUllmXCIsXCIuL2FwaVwiOlwiaW43TFwifV0sXCJpVEs2XCI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpIHtcblwidXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGV4cG9ydHMucGVlcmpzPXZvaWQgMDt2YXIgZT1yZXF1aXJlKFwiLi91dGlsXCIpLHI9cmVxdWlyZShcIi4vcGVlclwiKTtleHBvcnRzLnBlZXJqcz17UGVlcjpyLlBlZXIsdXRpbDplLnV0aWx9LGV4cG9ydHMuZGVmYXVsdD1yLlBlZXIsd2luZG93LnBlZXJqcz1leHBvcnRzLnBlZXJqcyx3aW5kb3cuUGVlcj1yLlBlZXI7XG59LHtcIi4vdXRpbFwiOlwiQkhYZlwiLFwiLi9wZWVyXCI6XCJIeHBkXCJ9XX0se30sW1wiaVRLNlwiXSwgbnVsbClcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPS9wZWVyanMubWluLmpzLm1hcCIsImZ1bmN0aW9uIHdlYnBhY2tFbXB0eUNvbnRleHQocmVxKSB7XG5cdHZhciBlID0gbmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIiArIHJlcSArIFwiJ1wiKTtcblx0ZS5jb2RlID0gJ01PRFVMRV9OT1RfRk9VTkQnO1xuXHR0aHJvdyBlO1xufVxud2VicGFja0VtcHR5Q29udGV4dC5rZXlzID0gKCkgPT4gKFtdKTtcbndlYnBhY2tFbXB0eUNvbnRleHQucmVzb2x2ZSA9IHdlYnBhY2tFbXB0eUNvbnRleHQ7XG53ZWJwYWNrRW1wdHlDb250ZXh0LmlkID0gXCIuL25vZGVfbW9kdWxlcy9wZWVyanMvZGlzdCBzeW5jIHJlY3Vyc2l2ZVwiO1xubW9kdWxlLmV4cG9ydHMgPSB3ZWJwYWNrRW1wdHlDb250ZXh0OyIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5pbyA9IGV4cG9ydHMuU29ja2V0ID0gZXhwb3J0cy5NYW5hZ2VyID0gZXhwb3J0cy5wcm90b2NvbCA9IHZvaWQgMDtcbmNvbnN0IHVybF8xID0gcmVxdWlyZShcIi4vdXJsXCIpO1xuY29uc3QgbWFuYWdlcl8xID0gcmVxdWlyZShcIi4vbWFuYWdlclwiKTtcbmNvbnN0IGRlYnVnID0gcmVxdWlyZShcImRlYnVnXCIpKFwic29ja2V0LmlvLWNsaWVudFwiKTtcbi8qKlxuICogTW9kdWxlIGV4cG9ydHMuXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0cyA9IGxvb2t1cDtcbi8qKlxuICogTWFuYWdlcnMgY2FjaGUuXG4gKi9cbmNvbnN0IGNhY2hlID0gKGV4cG9ydHMubWFuYWdlcnMgPSB7fSk7XG5mdW5jdGlvbiBsb29rdXAodXJpLCBvcHRzKSB7XG4gICAgaWYgKHR5cGVvZiB1cmkgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgb3B0cyA9IHVyaTtcbiAgICAgICAgdXJpID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBvcHRzID0gb3B0cyB8fCB7fTtcbiAgICBjb25zdCBwYXJzZWQgPSB1cmxfMS51cmwodXJpLCBvcHRzLnBhdGggfHwgXCIvc29ja2V0LmlvXCIpO1xuICAgIGNvbnN0IHNvdXJjZSA9IHBhcnNlZC5zb3VyY2U7XG4gICAgY29uc3QgaWQgPSBwYXJzZWQuaWQ7XG4gICAgY29uc3QgcGF0aCA9IHBhcnNlZC5wYXRoO1xuICAgIGNvbnN0IHNhbWVOYW1lc3BhY2UgPSBjYWNoZVtpZF0gJiYgcGF0aCBpbiBjYWNoZVtpZF1bXCJuc3BzXCJdO1xuICAgIGNvbnN0IG5ld0Nvbm5lY3Rpb24gPSBvcHRzLmZvcmNlTmV3IHx8XG4gICAgICAgIG9wdHNbXCJmb3JjZSBuZXcgY29ubmVjdGlvblwiXSB8fFxuICAgICAgICBmYWxzZSA9PT0gb3B0cy5tdWx0aXBsZXggfHxcbiAgICAgICAgc2FtZU5hbWVzcGFjZTtcbiAgICBsZXQgaW87XG4gICAgaWYgKG5ld0Nvbm5lY3Rpb24pIHtcbiAgICAgICAgZGVidWcoXCJpZ25vcmluZyBzb2NrZXQgY2FjaGUgZm9yICVzXCIsIHNvdXJjZSk7XG4gICAgICAgIGlvID0gbmV3IG1hbmFnZXJfMS5NYW5hZ2VyKHNvdXJjZSwgb3B0cyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAoIWNhY2hlW2lkXSkge1xuICAgICAgICAgICAgZGVidWcoXCJuZXcgaW8gaW5zdGFuY2UgZm9yICVzXCIsIHNvdXJjZSk7XG4gICAgICAgICAgICBjYWNoZVtpZF0gPSBuZXcgbWFuYWdlcl8xLk1hbmFnZXIoc291cmNlLCBvcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpbyA9IGNhY2hlW2lkXTtcbiAgICB9XG4gICAgaWYgKHBhcnNlZC5xdWVyeSAmJiAhb3B0cy5xdWVyeSkge1xuICAgICAgICBvcHRzLnF1ZXJ5ID0gcGFyc2VkLnF1ZXJ5S2V5O1xuICAgIH1cbiAgICByZXR1cm4gaW8uc29ja2V0KHBhcnNlZC5wYXRoLCBvcHRzKTtcbn1cbmV4cG9ydHMuaW8gPSBsb29rdXA7XG4vKipcbiAqIFByb3RvY29sIHZlcnNpb24uXG4gKlxuICogQHB1YmxpY1xuICovXG52YXIgc29ja2V0X2lvX3BhcnNlcl8xID0gcmVxdWlyZShcInNvY2tldC5pby1wYXJzZXJcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJwcm90b2NvbFwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gc29ja2V0X2lvX3BhcnNlcl8xLnByb3RvY29sOyB9IH0pO1xuLyoqXG4gKiBgY29ubmVjdGAuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHVyaVxuICogQHB1YmxpY1xuICovXG5leHBvcnRzLmNvbm5lY3QgPSBsb29rdXA7XG4vKipcbiAqIEV4cG9zZSBjb25zdHJ1Y3RvcnMgZm9yIHN0YW5kYWxvbmUgYnVpbGQuXG4gKlxuICogQHB1YmxpY1xuICovXG52YXIgbWFuYWdlcl8yID0gcmVxdWlyZShcIi4vbWFuYWdlclwiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIk1hbmFnZXJcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG1hbmFnZXJfMi5NYW5hZ2VyOyB9IH0pO1xudmFyIHNvY2tldF8xID0gcmVxdWlyZShcIi4vc29ja2V0XCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiU29ja2V0XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBzb2NrZXRfMS5Tb2NrZXQ7IH0gfSk7XG5leHBvcnRzLmRlZmF1bHQgPSBsb29rdXA7XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuTWFuYWdlciA9IHZvaWQgMDtcbmNvbnN0IGVpbyA9IHJlcXVpcmUoXCJlbmdpbmUuaW8tY2xpZW50XCIpO1xuY29uc3Qgc29ja2V0XzEgPSByZXF1aXJlKFwiLi9zb2NrZXRcIik7XG5jb25zdCBwYXJzZXIgPSByZXF1aXJlKFwic29ja2V0LmlvLXBhcnNlclwiKTtcbmNvbnN0IG9uXzEgPSByZXF1aXJlKFwiLi9vblwiKTtcbmNvbnN0IEJhY2tvZmYgPSByZXF1aXJlKFwiYmFja28yXCIpO1xuY29uc3QgdHlwZWRfZXZlbnRzXzEgPSByZXF1aXJlKFwiLi90eXBlZC1ldmVudHNcIik7XG5jb25zdCBkZWJ1ZyA9IHJlcXVpcmUoXCJkZWJ1Z1wiKShcInNvY2tldC5pby1jbGllbnQ6bWFuYWdlclwiKTtcbmNsYXNzIE1hbmFnZXIgZXh0ZW5kcyB0eXBlZF9ldmVudHNfMS5TdHJpY3RFdmVudEVtaXR0ZXIge1xuICAgIGNvbnN0cnVjdG9yKHVyaSwgb3B0cykge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLm5zcHMgPSB7fTtcbiAgICAgICAgdGhpcy5zdWJzID0gW107XG4gICAgICAgIGlmICh1cmkgJiYgXCJvYmplY3RcIiA9PT0gdHlwZW9mIHVyaSkge1xuICAgICAgICAgICAgb3B0cyA9IHVyaTtcbiAgICAgICAgICAgIHVyaSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBvcHRzID0gb3B0cyB8fCB7fTtcbiAgICAgICAgb3B0cy5wYXRoID0gb3B0cy5wYXRoIHx8IFwiL3NvY2tldC5pb1wiO1xuICAgICAgICB0aGlzLm9wdHMgPSBvcHRzO1xuICAgICAgICB0aGlzLnJlY29ubmVjdGlvbihvcHRzLnJlY29ubmVjdGlvbiAhPT0gZmFsc2UpO1xuICAgICAgICB0aGlzLnJlY29ubmVjdGlvbkF0dGVtcHRzKG9wdHMucmVjb25uZWN0aW9uQXR0ZW1wdHMgfHwgSW5maW5pdHkpO1xuICAgICAgICB0aGlzLnJlY29ubmVjdGlvbkRlbGF5KG9wdHMucmVjb25uZWN0aW9uRGVsYXkgfHwgMTAwMCk7XG4gICAgICAgIHRoaXMucmVjb25uZWN0aW9uRGVsYXlNYXgob3B0cy5yZWNvbm5lY3Rpb25EZWxheU1heCB8fCA1MDAwKTtcbiAgICAgICAgdGhpcy5yYW5kb21pemF0aW9uRmFjdG9yKG9wdHMucmFuZG9taXphdGlvbkZhY3RvciB8fCAwLjUpO1xuICAgICAgICB0aGlzLmJhY2tvZmYgPSBuZXcgQmFja29mZih7XG4gICAgICAgICAgICBtaW46IHRoaXMucmVjb25uZWN0aW9uRGVsYXkoKSxcbiAgICAgICAgICAgIG1heDogdGhpcy5yZWNvbm5lY3Rpb25EZWxheU1heCgpLFxuICAgICAgICAgICAgaml0dGVyOiB0aGlzLnJhbmRvbWl6YXRpb25GYWN0b3IoKSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMudGltZW91dChudWxsID09IG9wdHMudGltZW91dCA/IDIwMDAwIDogb3B0cy50aW1lb3V0KTtcbiAgICAgICAgdGhpcy5fcmVhZHlTdGF0ZSA9IFwiY2xvc2VkXCI7XG4gICAgICAgIHRoaXMudXJpID0gdXJpO1xuICAgICAgICBjb25zdCBfcGFyc2VyID0gb3B0cy5wYXJzZXIgfHwgcGFyc2VyO1xuICAgICAgICB0aGlzLmVuY29kZXIgPSBuZXcgX3BhcnNlci5FbmNvZGVyKCk7XG4gICAgICAgIHRoaXMuZGVjb2RlciA9IG5ldyBfcGFyc2VyLkRlY29kZXIoKTtcbiAgICAgICAgdGhpcy5fYXV0b0Nvbm5lY3QgPSBvcHRzLmF1dG9Db25uZWN0ICE9PSBmYWxzZTtcbiAgICAgICAgaWYgKHRoaXMuX2F1dG9Db25uZWN0KVxuICAgICAgICAgICAgdGhpcy5vcGVuKCk7XG4gICAgfVxuICAgIHJlY29ubmVjdGlvbih2KSB7XG4gICAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZWNvbm5lY3Rpb247XG4gICAgICAgIHRoaXMuX3JlY29ubmVjdGlvbiA9ICEhdjtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHJlY29ubmVjdGlvbkF0dGVtcHRzKHYpIHtcbiAgICAgICAgaWYgKHYgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZWNvbm5lY3Rpb25BdHRlbXB0cztcbiAgICAgICAgdGhpcy5fcmVjb25uZWN0aW9uQXR0ZW1wdHMgPSB2O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgcmVjb25uZWN0aW9uRGVsYXkodikge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGlmICh2ID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVjb25uZWN0aW9uRGVsYXk7XG4gICAgICAgIHRoaXMuX3JlY29ubmVjdGlvbkRlbGF5ID0gdjtcbiAgICAgICAgKF9hID0gdGhpcy5iYWNrb2ZmKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Euc2V0TWluKHYpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgcmFuZG9taXphdGlvbkZhY3Rvcih2KSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgaWYgKHYgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9yYW5kb21pemF0aW9uRmFjdG9yO1xuICAgICAgICB0aGlzLl9yYW5kb21pemF0aW9uRmFjdG9yID0gdjtcbiAgICAgICAgKF9hID0gdGhpcy5iYWNrb2ZmKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Euc2V0Sml0dGVyKHYpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgcmVjb25uZWN0aW9uRGVsYXlNYXgodikge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGlmICh2ID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVjb25uZWN0aW9uRGVsYXlNYXg7XG4gICAgICAgIHRoaXMuX3JlY29ubmVjdGlvbkRlbGF5TWF4ID0gdjtcbiAgICAgICAgKF9hID0gdGhpcy5iYWNrb2ZmKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Euc2V0TWF4KHYpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgdGltZW91dCh2KSB7XG4gICAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl90aW1lb3V0O1xuICAgICAgICB0aGlzLl90aW1lb3V0ID0gdjtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0YXJ0cyB0cnlpbmcgdG8gcmVjb25uZWN0IGlmIHJlY29ubmVjdGlvbiBpcyBlbmFibGVkIGFuZCB3ZSBoYXZlIG5vdFxuICAgICAqIHN0YXJ0ZWQgcmVjb25uZWN0aW5nIHlldFxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBtYXliZVJlY29ubmVjdE9uT3BlbigpIHtcbiAgICAgICAgLy8gT25seSB0cnkgdG8gcmVjb25uZWN0IGlmIGl0J3MgdGhlIGZpcnN0IHRpbWUgd2UncmUgY29ubmVjdGluZ1xuICAgICAgICBpZiAoIXRoaXMuX3JlY29ubmVjdGluZyAmJlxuICAgICAgICAgICAgdGhpcy5fcmVjb25uZWN0aW9uICYmXG4gICAgICAgICAgICB0aGlzLmJhY2tvZmYuYXR0ZW1wdHMgPT09IDApIHtcbiAgICAgICAgICAgIC8vIGtlZXBzIHJlY29ubmVjdGlvbiBmcm9tIGZpcmluZyB0d2ljZSBmb3IgdGhlIHNhbWUgcmVjb25uZWN0aW9uIGxvb3BcbiAgICAgICAgICAgIHRoaXMucmVjb25uZWN0KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgY3VycmVudCB0cmFuc3BvcnQgYHNvY2tldGAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiAtIG9wdGlvbmFsLCBjYWxsYmFja1xuICAgICAqIEByZXR1cm4gc2VsZlxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBvcGVuKGZuKSB7XG4gICAgICAgIGRlYnVnKFwicmVhZHlTdGF0ZSAlc1wiLCB0aGlzLl9yZWFkeVN0YXRlKTtcbiAgICAgICAgaWYgKH50aGlzLl9yZWFkeVN0YXRlLmluZGV4T2YoXCJvcGVuXCIpKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIGRlYnVnKFwib3BlbmluZyAlc1wiLCB0aGlzLnVyaSk7XG4gICAgICAgIHRoaXMuZW5naW5lID0gZWlvKHRoaXMudXJpLCB0aGlzLm9wdHMpO1xuICAgICAgICBjb25zdCBzb2NrZXQgPSB0aGlzLmVuZ2luZTtcbiAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgICAgIHRoaXMuX3JlYWR5U3RhdGUgPSBcIm9wZW5pbmdcIjtcbiAgICAgICAgdGhpcy5za2lwUmVjb25uZWN0ID0gZmFsc2U7XG4gICAgICAgIC8vIGVtaXQgYG9wZW5gXG4gICAgICAgIGNvbnN0IG9wZW5TdWJEZXN0cm95ID0gb25fMS5vbihzb2NrZXQsIFwib3BlblwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzZWxmLm9ub3BlbigpO1xuICAgICAgICAgICAgZm4gJiYgZm4oKTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIGVtaXQgYGVycm9yYFxuICAgICAgICBjb25zdCBlcnJvclN1YiA9IG9uXzEub24oc29ja2V0LCBcImVycm9yXCIsIChlcnIpID0+IHtcbiAgICAgICAgICAgIGRlYnVnKFwiZXJyb3JcIik7XG4gICAgICAgICAgICBzZWxmLmNsZWFudXAoKTtcbiAgICAgICAgICAgIHNlbGYuX3JlYWR5U3RhdGUgPSBcImNsb3NlZFwiO1xuICAgICAgICAgICAgdGhpcy5lbWl0UmVzZXJ2ZWQoXCJlcnJvclwiLCBlcnIpO1xuICAgICAgICAgICAgaWYgKGZuKSB7XG4gICAgICAgICAgICAgICAgZm4oZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIE9ubHkgZG8gdGhpcyBpZiB0aGVyZSBpcyBubyBmbiB0byBoYW5kbGUgdGhlIGVycm9yXG4gICAgICAgICAgICAgICAgc2VsZi5tYXliZVJlY29ubmVjdE9uT3BlbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGZhbHNlICE9PSB0aGlzLl90aW1lb3V0KSB7XG4gICAgICAgICAgICBjb25zdCB0aW1lb3V0ID0gdGhpcy5fdGltZW91dDtcbiAgICAgICAgICAgIGRlYnVnKFwiY29ubmVjdCBhdHRlbXB0IHdpbGwgdGltZW91dCBhZnRlciAlZFwiLCB0aW1lb3V0KTtcbiAgICAgICAgICAgIGlmICh0aW1lb3V0ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgb3BlblN1YkRlc3Ryb3koKTsgLy8gcHJldmVudHMgYSByYWNlIGNvbmRpdGlvbiB3aXRoIHRoZSAnb3BlbicgZXZlbnRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHNldCB0aW1lclxuICAgICAgICAgICAgY29uc3QgdGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICBkZWJ1ZyhcImNvbm5lY3QgYXR0ZW1wdCB0aW1lZCBvdXQgYWZ0ZXIgJWRcIiwgdGltZW91dCk7XG4gICAgICAgICAgICAgICAgb3BlblN1YkRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICBzb2NrZXQuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICBzb2NrZXQuZW1pdChcImVycm9yXCIsIG5ldyBFcnJvcihcInRpbWVvdXRcIikpO1xuICAgICAgICAgICAgfSwgdGltZW91dCk7XG4gICAgICAgICAgICBpZiAodGhpcy5vcHRzLmF1dG9VbnJlZikge1xuICAgICAgICAgICAgICAgIHRpbWVyLnVucmVmKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnN1YnMucHVzaChmdW5jdGlvbiBzdWJEZXN0cm95KCkge1xuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN1YnMucHVzaChvcGVuU3ViRGVzdHJveSk7XG4gICAgICAgIHRoaXMuc3Vicy5wdXNoKGVycm9yU3ViKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFsaWFzIGZvciBvcGVuKClcbiAgICAgKlxuICAgICAqIEByZXR1cm4gc2VsZlxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBjb25uZWN0KGZuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9wZW4oZm4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgdXBvbiB0cmFuc3BvcnQgb3Blbi5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgb25vcGVuKCkge1xuICAgICAgICBkZWJ1ZyhcIm9wZW5cIik7XG4gICAgICAgIC8vIGNsZWFyIG9sZCBzdWJzXG4gICAgICAgIHRoaXMuY2xlYW51cCgpO1xuICAgICAgICAvLyBtYXJrIGFzIG9wZW5cbiAgICAgICAgdGhpcy5fcmVhZHlTdGF0ZSA9IFwib3BlblwiO1xuICAgICAgICB0aGlzLmVtaXRSZXNlcnZlZChcIm9wZW5cIik7XG4gICAgICAgIC8vIGFkZCBuZXcgc3Vic1xuICAgICAgICBjb25zdCBzb2NrZXQgPSB0aGlzLmVuZ2luZTtcbiAgICAgICAgdGhpcy5zdWJzLnB1c2gob25fMS5vbihzb2NrZXQsIFwicGluZ1wiLCB0aGlzLm9ucGluZy5iaW5kKHRoaXMpKSwgb25fMS5vbihzb2NrZXQsIFwiZGF0YVwiLCB0aGlzLm9uZGF0YS5iaW5kKHRoaXMpKSwgb25fMS5vbihzb2NrZXQsIFwiZXJyb3JcIiwgdGhpcy5vbmVycm9yLmJpbmQodGhpcykpLCBvbl8xLm9uKHNvY2tldCwgXCJjbG9zZVwiLCB0aGlzLm9uY2xvc2UuYmluZCh0aGlzKSksIG9uXzEub24odGhpcy5kZWNvZGVyLCBcImRlY29kZWRcIiwgdGhpcy5vbmRlY29kZWQuYmluZCh0aGlzKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgdXBvbiBhIHBpbmcuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIG9ucGluZygpIHtcbiAgICAgICAgdGhpcy5lbWl0UmVzZXJ2ZWQoXCJwaW5nXCIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgd2l0aCBkYXRhLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBvbmRhdGEoZGF0YSkge1xuICAgICAgICB0aGlzLmRlY29kZXIuYWRkKGRhdGEpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgd2hlbiBwYXJzZXIgZnVsbHkgZGVjb2RlcyBhIHBhY2tldC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgb25kZWNvZGVkKHBhY2tldCkge1xuICAgICAgICB0aGlzLmVtaXRSZXNlcnZlZChcInBhY2tldFwiLCBwYWNrZXQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgdXBvbiBzb2NrZXQgZXJyb3IuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIG9uZXJyb3IoZXJyKSB7XG4gICAgICAgIGRlYnVnKFwiZXJyb3JcIiwgZXJyKTtcbiAgICAgICAgdGhpcy5lbWl0UmVzZXJ2ZWQoXCJlcnJvclwiLCBlcnIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHNvY2tldCBmb3IgdGhlIGdpdmVuIGBuc3BgLlxuICAgICAqXG4gICAgICogQHJldHVybiB7U29ja2V0fVxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBzb2NrZXQobnNwLCBvcHRzKSB7XG4gICAgICAgIGxldCBzb2NrZXQgPSB0aGlzLm5zcHNbbnNwXTtcbiAgICAgICAgaWYgKCFzb2NrZXQpIHtcbiAgICAgICAgICAgIHNvY2tldCA9IG5ldyBzb2NrZXRfMS5Tb2NrZXQodGhpcywgbnNwLCBvcHRzKTtcbiAgICAgICAgICAgIHRoaXMubnNwc1tuc3BdID0gc29ja2V0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzb2NrZXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGxlZCB1cG9uIGEgc29ja2V0IGNsb3NlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHNvY2tldFxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX2Rlc3Ryb3koc29ja2V0KSB7XG4gICAgICAgIGNvbnN0IG5zcHMgPSBPYmplY3Qua2V5cyh0aGlzLm5zcHMpO1xuICAgICAgICBmb3IgKGNvbnN0IG5zcCBvZiBuc3BzKSB7XG4gICAgICAgICAgICBjb25zdCBzb2NrZXQgPSB0aGlzLm5zcHNbbnNwXTtcbiAgICAgICAgICAgIGlmIChzb2NrZXQuYWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgZGVidWcoXCJzb2NrZXQgJXMgaXMgc3RpbGwgYWN0aXZlLCBza2lwcGluZyBjbG9zZVwiLCBuc3ApO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9jbG9zZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXcml0ZXMgYSBwYWNrZXQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGFja2V0XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfcGFja2V0KHBhY2tldCkge1xuICAgICAgICBkZWJ1ZyhcIndyaXRpbmcgcGFja2V0ICVqXCIsIHBhY2tldCk7XG4gICAgICAgIGNvbnN0IGVuY29kZWRQYWNrZXRzID0gdGhpcy5lbmNvZGVyLmVuY29kZShwYWNrZXQpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVuY29kZWRQYWNrZXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLmVuZ2luZS53cml0ZShlbmNvZGVkUGFja2V0c1tpXSwgcGFja2V0Lm9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsZWFuIHVwIHRyYW5zcG9ydCBzdWJzY3JpcHRpb25zIGFuZCBwYWNrZXQgYnVmZmVyLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBjbGVhbnVwKCkge1xuICAgICAgICBkZWJ1ZyhcImNsZWFudXBcIik7XG4gICAgICAgIHRoaXMuc3Vicy5mb3JFYWNoKChzdWJEZXN0cm95KSA9PiBzdWJEZXN0cm95KCkpO1xuICAgICAgICB0aGlzLnN1YnMubGVuZ3RoID0gMDtcbiAgICAgICAgdGhpcy5kZWNvZGVyLmRlc3Ryb3koKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xvc2UgdGhlIGN1cnJlbnQgc29ja2V0LlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfY2xvc2UoKSB7XG4gICAgICAgIGRlYnVnKFwiZGlzY29ubmVjdFwiKTtcbiAgICAgICAgdGhpcy5za2lwUmVjb25uZWN0ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fcmVjb25uZWN0aW5nID0gZmFsc2U7XG4gICAgICAgIGlmIChcIm9wZW5pbmdcIiA9PT0gdGhpcy5fcmVhZHlTdGF0ZSkge1xuICAgICAgICAgICAgLy8gYG9uY2xvc2VgIHdpbGwgbm90IGZpcmUgYmVjYXVzZVxuICAgICAgICAgICAgLy8gYW4gb3BlbiBldmVudCBuZXZlciBoYXBwZW5lZFxuICAgICAgICAgICAgdGhpcy5jbGVhbnVwKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5iYWNrb2ZmLnJlc2V0KCk7XG4gICAgICAgIHRoaXMuX3JlYWR5U3RhdGUgPSBcImNsb3NlZFwiO1xuICAgICAgICBpZiAodGhpcy5lbmdpbmUpXG4gICAgICAgICAgICB0aGlzLmVuZ2luZS5jbG9zZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBbGlhcyBmb3IgY2xvc2UoKVxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBkaXNjb25uZWN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2xvc2UoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbGVkIHVwb24gZW5naW5lIGNsb3NlLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBvbmNsb3NlKHJlYXNvbikge1xuICAgICAgICBkZWJ1ZyhcIm9uY2xvc2VcIik7XG4gICAgICAgIHRoaXMuY2xlYW51cCgpO1xuICAgICAgICB0aGlzLmJhY2tvZmYucmVzZXQoKTtcbiAgICAgICAgdGhpcy5fcmVhZHlTdGF0ZSA9IFwiY2xvc2VkXCI7XG4gICAgICAgIHRoaXMuZW1pdFJlc2VydmVkKFwiY2xvc2VcIiwgcmVhc29uKTtcbiAgICAgICAgaWYgKHRoaXMuX3JlY29ubmVjdGlvbiAmJiAhdGhpcy5za2lwUmVjb25uZWN0KSB7XG4gICAgICAgICAgICB0aGlzLnJlY29ubmVjdCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEF0dGVtcHQgYSByZWNvbm5lY3Rpb24uXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHJlY29ubmVjdCgpIHtcbiAgICAgICAgaWYgKHRoaXMuX3JlY29ubmVjdGluZyB8fCB0aGlzLnNraXBSZWNvbm5lY3QpXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgICAgIGlmICh0aGlzLmJhY2tvZmYuYXR0ZW1wdHMgPj0gdGhpcy5fcmVjb25uZWN0aW9uQXR0ZW1wdHMpIHtcbiAgICAgICAgICAgIGRlYnVnKFwicmVjb25uZWN0IGZhaWxlZFwiKTtcbiAgICAgICAgICAgIHRoaXMuYmFja29mZi5yZXNldCgpO1xuICAgICAgICAgICAgdGhpcy5lbWl0UmVzZXJ2ZWQoXCJyZWNvbm5lY3RfZmFpbGVkXCIpO1xuICAgICAgICAgICAgdGhpcy5fcmVjb25uZWN0aW5nID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBkZWxheSA9IHRoaXMuYmFja29mZi5kdXJhdGlvbigpO1xuICAgICAgICAgICAgZGVidWcoXCJ3aWxsIHdhaXQgJWRtcyBiZWZvcmUgcmVjb25uZWN0IGF0dGVtcHRcIiwgZGVsYXkpO1xuICAgICAgICAgICAgdGhpcy5fcmVjb25uZWN0aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIGNvbnN0IHRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHNlbGYuc2tpcFJlY29ubmVjdClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGRlYnVnKFwiYXR0ZW1wdGluZyByZWNvbm5lY3RcIik7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0UmVzZXJ2ZWQoXCJyZWNvbm5lY3RfYXR0ZW1wdFwiLCBzZWxmLmJhY2tvZmYuYXR0ZW1wdHMpO1xuICAgICAgICAgICAgICAgIC8vIGNoZWNrIGFnYWluIGZvciB0aGUgY2FzZSBzb2NrZXQgY2xvc2VkIGluIGFib3ZlIGV2ZW50c1xuICAgICAgICAgICAgICAgIGlmIChzZWxmLnNraXBSZWNvbm5lY3QpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICBzZWxmLm9wZW4oKGVycikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWJ1ZyhcInJlY29ubmVjdCBhdHRlbXB0IGVycm9yXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fcmVjb25uZWN0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnJlY29ubmVjdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0UmVzZXJ2ZWQoXCJyZWNvbm5lY3RfZXJyb3JcIiwgZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnKFwicmVjb25uZWN0IHN1Y2Nlc3NcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm9ucmVjb25uZWN0KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sIGRlbGF5KTtcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdHMuYXV0b1VucmVmKSB7XG4gICAgICAgICAgICAgICAgdGltZXIudW5yZWYoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc3Vicy5wdXNoKGZ1bmN0aW9uIHN1YkRlc3Ryb3koKSB7XG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGxlZCB1cG9uIHN1Y2Nlc3NmdWwgcmVjb25uZWN0LlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBvbnJlY29ubmVjdCgpIHtcbiAgICAgICAgY29uc3QgYXR0ZW1wdCA9IHRoaXMuYmFja29mZi5hdHRlbXB0cztcbiAgICAgICAgdGhpcy5fcmVjb25uZWN0aW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMuYmFja29mZi5yZXNldCgpO1xuICAgICAgICB0aGlzLmVtaXRSZXNlcnZlZChcInJlY29ubmVjdFwiLCBhdHRlbXB0KTtcbiAgICB9XG59XG5leHBvcnRzLk1hbmFnZXIgPSBNYW5hZ2VyO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLm9uID0gdm9pZCAwO1xuZnVuY3Rpb24gb24ob2JqLCBldiwgZm4pIHtcbiAgICBvYmoub24oZXYsIGZuKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gc3ViRGVzdHJveSgpIHtcbiAgICAgICAgb2JqLm9mZihldiwgZm4pO1xuICAgIH07XG59XG5leHBvcnRzLm9uID0gb247XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuU29ja2V0ID0gdm9pZCAwO1xuY29uc3Qgc29ja2V0X2lvX3BhcnNlcl8xID0gcmVxdWlyZShcInNvY2tldC5pby1wYXJzZXJcIik7XG5jb25zdCBvbl8xID0gcmVxdWlyZShcIi4vb25cIik7XG5jb25zdCB0eXBlZF9ldmVudHNfMSA9IHJlcXVpcmUoXCIuL3R5cGVkLWV2ZW50c1wiKTtcbmNvbnN0IGRlYnVnID0gcmVxdWlyZShcImRlYnVnXCIpKFwic29ja2V0LmlvLWNsaWVudDpzb2NrZXRcIik7XG4vKipcbiAqIEludGVybmFsIGV2ZW50cy5cbiAqIFRoZXNlIGV2ZW50cyBjYW4ndCBiZSBlbWl0dGVkIGJ5IHRoZSB1c2VyLlxuICovXG5jb25zdCBSRVNFUlZFRF9FVkVOVFMgPSBPYmplY3QuZnJlZXplKHtcbiAgICBjb25uZWN0OiAxLFxuICAgIGNvbm5lY3RfZXJyb3I6IDEsXG4gICAgZGlzY29ubmVjdDogMSxcbiAgICBkaXNjb25uZWN0aW5nOiAxLFxuICAgIC8vIEV2ZW50RW1pdHRlciByZXNlcnZlZCBldmVudHM6IGh0dHBzOi8vbm9kZWpzLm9yZy9hcGkvZXZlbnRzLmh0bWwjZXZlbnRzX2V2ZW50X25ld2xpc3RlbmVyXG4gICAgbmV3TGlzdGVuZXI6IDEsXG4gICAgcmVtb3ZlTGlzdGVuZXI6IDEsXG59KTtcbmNsYXNzIFNvY2tldCBleHRlbmRzIHR5cGVkX2V2ZW50c18xLlN0cmljdEV2ZW50RW1pdHRlciB7XG4gICAgLyoqXG4gICAgICogYFNvY2tldGAgY29uc3RydWN0b3IuXG4gICAgICpcbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoaW8sIG5zcCwgb3B0cykge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnJlY2VpdmVCdWZmZXIgPSBbXTtcbiAgICAgICAgdGhpcy5zZW5kQnVmZmVyID0gW107XG4gICAgICAgIHRoaXMuaWRzID0gMDtcbiAgICAgICAgdGhpcy5hY2tzID0ge307XG4gICAgICAgIHRoaXMuZmxhZ3MgPSB7fTtcbiAgICAgICAgdGhpcy5pbyA9IGlvO1xuICAgICAgICB0aGlzLm5zcCA9IG5zcDtcbiAgICAgICAgdGhpcy5pZHMgPSAwO1xuICAgICAgICB0aGlzLmFja3MgPSB7fTtcbiAgICAgICAgdGhpcy5yZWNlaXZlQnVmZmVyID0gW107XG4gICAgICAgIHRoaXMuc2VuZEJ1ZmZlciA9IFtdO1xuICAgICAgICB0aGlzLmNvbm5lY3RlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmRpc2Nvbm5lY3RlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuZmxhZ3MgPSB7fTtcbiAgICAgICAgaWYgKG9wdHMgJiYgb3B0cy5hdXRoKSB7XG4gICAgICAgICAgICB0aGlzLmF1dGggPSBvcHRzLmF1dGg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaW8uX2F1dG9Db25uZWN0KVxuICAgICAgICAgICAgdGhpcy5vcGVuKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN1YnNjcmliZSB0byBvcGVuLCBjbG9zZSBhbmQgcGFja2V0IGV2ZW50c1xuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBzdWJFdmVudHMoKSB7XG4gICAgICAgIGlmICh0aGlzLnN1YnMpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IGlvID0gdGhpcy5pbztcbiAgICAgICAgdGhpcy5zdWJzID0gW1xuICAgICAgICAgICAgb25fMS5vbihpbywgXCJvcGVuXCIsIHRoaXMub25vcGVuLmJpbmQodGhpcykpLFxuICAgICAgICAgICAgb25fMS5vbihpbywgXCJwYWNrZXRcIiwgdGhpcy5vbnBhY2tldC5iaW5kKHRoaXMpKSxcbiAgICAgICAgICAgIG9uXzEub24oaW8sIFwiZXJyb3JcIiwgdGhpcy5vbmVycm9yLmJpbmQodGhpcykpLFxuICAgICAgICAgICAgb25fMS5vbihpbywgXCJjbG9zZVwiLCB0aGlzLm9uY2xvc2UuYmluZCh0aGlzKSksXG4gICAgICAgIF07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdGhlIFNvY2tldCB3aWxsIHRyeSB0byByZWNvbm5lY3Qgd2hlbiBpdHMgTWFuYWdlciBjb25uZWN0cyBvciByZWNvbm5lY3RzXG4gICAgICovXG4gICAgZ2V0IGFjdGl2ZSgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5zdWJzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBcIk9wZW5zXCIgdGhlIHNvY2tldC5cbiAgICAgKlxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBjb25uZWN0KCkge1xuICAgICAgICBpZiAodGhpcy5jb25uZWN0ZWQpXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgdGhpcy5zdWJFdmVudHMoKTtcbiAgICAgICAgaWYgKCF0aGlzLmlvW1wiX3JlY29ubmVjdGluZ1wiXSlcbiAgICAgICAgICAgIHRoaXMuaW8ub3BlbigpOyAvLyBlbnN1cmUgb3BlblxuICAgICAgICBpZiAoXCJvcGVuXCIgPT09IHRoaXMuaW8uX3JlYWR5U3RhdGUpXG4gICAgICAgICAgICB0aGlzLm9ub3BlbigpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWxpYXMgZm9yIGNvbm5lY3QoKVxuICAgICAqL1xuICAgIG9wZW4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbm5lY3QoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZHMgYSBgbWVzc2FnZWAgZXZlbnQuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHNlbGZcbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgc2VuZCguLi5hcmdzKSB7XG4gICAgICAgIGFyZ3MudW5zaGlmdChcIm1lc3NhZ2VcIik7XG4gICAgICAgIHRoaXMuZW1pdC5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE92ZXJyaWRlIGBlbWl0YC5cbiAgICAgKiBJZiB0aGUgZXZlbnQgaXMgaW4gYGV2ZW50c2AsIGl0J3MgZW1pdHRlZCBub3JtYWxseS5cbiAgICAgKlxuICAgICAqIEByZXR1cm4gc2VsZlxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBlbWl0KGV2LCAuLi5hcmdzKSB7XG4gICAgICAgIGlmIChSRVNFUlZFRF9FVkVOVFMuaGFzT3duUHJvcGVydHkoZXYpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1wiJyArIGV2ICsgJ1wiIGlzIGEgcmVzZXJ2ZWQgZXZlbnQgbmFtZScpO1xuICAgICAgICB9XG4gICAgICAgIGFyZ3MudW5zaGlmdChldik7XG4gICAgICAgIGNvbnN0IHBhY2tldCA9IHtcbiAgICAgICAgICAgIHR5cGU6IHNvY2tldF9pb19wYXJzZXJfMS5QYWNrZXRUeXBlLkVWRU5ULFxuICAgICAgICAgICAgZGF0YTogYXJncyxcbiAgICAgICAgfTtcbiAgICAgICAgcGFja2V0Lm9wdGlvbnMgPSB7fTtcbiAgICAgICAgcGFja2V0Lm9wdGlvbnMuY29tcHJlc3MgPSB0aGlzLmZsYWdzLmNvbXByZXNzICE9PSBmYWxzZTtcbiAgICAgICAgLy8gZXZlbnQgYWNrIGNhbGxiYWNrXG4gICAgICAgIGlmIChcImZ1bmN0aW9uXCIgPT09IHR5cGVvZiBhcmdzW2FyZ3MubGVuZ3RoIC0gMV0pIHtcbiAgICAgICAgICAgIGRlYnVnKFwiZW1pdHRpbmcgcGFja2V0IHdpdGggYWNrIGlkICVkXCIsIHRoaXMuaWRzKTtcbiAgICAgICAgICAgIHRoaXMuYWNrc1t0aGlzLmlkc10gPSBhcmdzLnBvcCgpO1xuICAgICAgICAgICAgcGFja2V0LmlkID0gdGhpcy5pZHMrKztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpc1RyYW5zcG9ydFdyaXRhYmxlID0gdGhpcy5pby5lbmdpbmUgJiZcbiAgICAgICAgICAgIHRoaXMuaW8uZW5naW5lLnRyYW5zcG9ydCAmJlxuICAgICAgICAgICAgdGhpcy5pby5lbmdpbmUudHJhbnNwb3J0LndyaXRhYmxlO1xuICAgICAgICBjb25zdCBkaXNjYXJkUGFja2V0ID0gdGhpcy5mbGFncy52b2xhdGlsZSAmJiAoIWlzVHJhbnNwb3J0V3JpdGFibGUgfHwgIXRoaXMuY29ubmVjdGVkKTtcbiAgICAgICAgaWYgKGRpc2NhcmRQYWNrZXQpIHtcbiAgICAgICAgICAgIGRlYnVnKFwiZGlzY2FyZCBwYWNrZXQgYXMgdGhlIHRyYW5zcG9ydCBpcyBub3QgY3VycmVudGx5IHdyaXRhYmxlXCIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuY29ubmVjdGVkKSB7XG4gICAgICAgICAgICB0aGlzLnBhY2tldChwYWNrZXQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zZW5kQnVmZmVyLnB1c2gocGFja2V0KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZsYWdzID0ge307XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kcyBhIHBhY2tldC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBwYWNrZXRcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHBhY2tldChwYWNrZXQpIHtcbiAgICAgICAgcGFja2V0Lm5zcCA9IHRoaXMubnNwO1xuICAgICAgICB0aGlzLmlvLl9wYWNrZXQocGFja2V0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbGVkIHVwb24gZW5naW5lIGBvcGVuYC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgb25vcGVuKCkge1xuICAgICAgICBkZWJ1ZyhcInRyYW5zcG9ydCBpcyBvcGVuIC0gY29ubmVjdGluZ1wiKTtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmF1dGggPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICB0aGlzLmF1dGgoKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhY2tldCh7IHR5cGU6IHNvY2tldF9pb19wYXJzZXJfMS5QYWNrZXRUeXBlLkNPTk5FQ1QsIGRhdGEgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucGFja2V0KHsgdHlwZTogc29ja2V0X2lvX3BhcnNlcl8xLlBhY2tldFR5cGUuQ09OTkVDVCwgZGF0YTogdGhpcy5hdXRoIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGxlZCB1cG9uIGVuZ2luZSBvciBtYW5hZ2VyIGBlcnJvcmAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZXJyXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBvbmVycm9yKGVycikge1xuICAgICAgICBpZiAoIXRoaXMuY29ubmVjdGVkKSB7XG4gICAgICAgICAgICB0aGlzLmVtaXRSZXNlcnZlZChcImNvbm5lY3RfZXJyb3JcIiwgZXJyKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgdXBvbiBlbmdpbmUgYGNsb3NlYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSByZWFzb25cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIG9uY2xvc2UocmVhc29uKSB7XG4gICAgICAgIGRlYnVnKFwiY2xvc2UgKCVzKVwiLCByZWFzb24pO1xuICAgICAgICB0aGlzLmNvbm5lY3RlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmRpc2Nvbm5lY3RlZCA9IHRydWU7XG4gICAgICAgIGRlbGV0ZSB0aGlzLmlkO1xuICAgICAgICB0aGlzLmVtaXRSZXNlcnZlZChcImRpc2Nvbm5lY3RcIiwgcmVhc29uKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbGVkIHdpdGggc29ja2V0IHBhY2tldC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBwYWNrZXRcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIG9ucGFja2V0KHBhY2tldCkge1xuICAgICAgICBjb25zdCBzYW1lTmFtZXNwYWNlID0gcGFja2V0Lm5zcCA9PT0gdGhpcy5uc3A7XG4gICAgICAgIGlmICghc2FtZU5hbWVzcGFjZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgc3dpdGNoIChwYWNrZXQudHlwZSkge1xuICAgICAgICAgICAgY2FzZSBzb2NrZXRfaW9fcGFyc2VyXzEuUGFja2V0VHlwZS5DT05ORUNUOlxuICAgICAgICAgICAgICAgIGlmIChwYWNrZXQuZGF0YSAmJiBwYWNrZXQuZGF0YS5zaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaWQgPSBwYWNrZXQuZGF0YS5zaWQ7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25jb25uZWN0KGlkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdFJlc2VydmVkKFwiY29ubmVjdF9lcnJvclwiLCBuZXcgRXJyb3IoXCJJdCBzZWVtcyB5b3UgYXJlIHRyeWluZyB0byByZWFjaCBhIFNvY2tldC5JTyBzZXJ2ZXIgaW4gdjIueCB3aXRoIGEgdjMueCBjbGllbnQsIGJ1dCB0aGV5IGFyZSBub3QgY29tcGF0aWJsZSAobW9yZSBpbmZvcm1hdGlvbiBoZXJlOiBodHRwczovL3NvY2tldC5pby9kb2NzL3YzL21pZ3JhdGluZy1mcm9tLTIteC10by0zLTAvKVwiKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBzb2NrZXRfaW9fcGFyc2VyXzEuUGFja2V0VHlwZS5FVkVOVDpcbiAgICAgICAgICAgICAgICB0aGlzLm9uZXZlbnQocGFja2V0KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2Ugc29ja2V0X2lvX3BhcnNlcl8xLlBhY2tldFR5cGUuQklOQVJZX0VWRU5UOlxuICAgICAgICAgICAgICAgIHRoaXMub25ldmVudChwYWNrZXQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBzb2NrZXRfaW9fcGFyc2VyXzEuUGFja2V0VHlwZS5BQ0s6XG4gICAgICAgICAgICAgICAgdGhpcy5vbmFjayhwYWNrZXQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBzb2NrZXRfaW9fcGFyc2VyXzEuUGFja2V0VHlwZS5CSU5BUllfQUNLOlxuICAgICAgICAgICAgICAgIHRoaXMub25hY2socGFja2V0KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2Ugc29ja2V0X2lvX3BhcnNlcl8xLlBhY2tldFR5cGUuRElTQ09OTkVDVDpcbiAgICAgICAgICAgICAgICB0aGlzLm9uZGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBzb2NrZXRfaW9fcGFyc2VyXzEuUGFja2V0VHlwZS5DT05ORUNUX0VSUk9SOlxuICAgICAgICAgICAgICAgIGNvbnN0IGVyciA9IG5ldyBFcnJvcihwYWNrZXQuZGF0YS5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICAgICAgZXJyLmRhdGEgPSBwYWNrZXQuZGF0YS5kYXRhO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdFJlc2VydmVkKFwiY29ubmVjdF9lcnJvclwiLCBlcnIpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGxlZCB1cG9uIGEgc2VydmVyIGV2ZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHBhY2tldFxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgb25ldmVudChwYWNrZXQpIHtcbiAgICAgICAgY29uc3QgYXJncyA9IHBhY2tldC5kYXRhIHx8IFtdO1xuICAgICAgICBkZWJ1ZyhcImVtaXR0aW5nIGV2ZW50ICVqXCIsIGFyZ3MpO1xuICAgICAgICBpZiAobnVsbCAhPSBwYWNrZXQuaWQpIHtcbiAgICAgICAgICAgIGRlYnVnKFwiYXR0YWNoaW5nIGFjayBjYWxsYmFjayB0byBldmVudFwiKTtcbiAgICAgICAgICAgIGFyZ3MucHVzaCh0aGlzLmFjayhwYWNrZXQuaWQpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5jb25uZWN0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuZW1pdEV2ZW50KGFyZ3MpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5yZWNlaXZlQnVmZmVyLnB1c2goT2JqZWN0LmZyZWV6ZShhcmdzKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZW1pdEV2ZW50KGFyZ3MpIHtcbiAgICAgICAgaWYgKHRoaXMuX2FueUxpc3RlbmVycyAmJiB0aGlzLl9hbnlMaXN0ZW5lcnMubGVuZ3RoKSB7XG4gICAgICAgICAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLl9hbnlMaXN0ZW5lcnMuc2xpY2UoKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgbGlzdGVuZXIgb2YgbGlzdGVuZXJzKSB7XG4gICAgICAgICAgICAgICAgbGlzdGVuZXIuYXBwbHkodGhpcywgYXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIuZW1pdC5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJvZHVjZXMgYW4gYWNrIGNhbGxiYWNrIHRvIGVtaXQgd2l0aCBhbiBldmVudC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgYWNrKGlkKSB7XG4gICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgICAgICBsZXQgc2VudCA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgICAgICAgIC8vIHByZXZlbnQgZG91YmxlIGNhbGxiYWNrc1xuICAgICAgICAgICAgaWYgKHNlbnQpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgc2VudCA9IHRydWU7XG4gICAgICAgICAgICBkZWJ1ZyhcInNlbmRpbmcgYWNrICVqXCIsIGFyZ3MpO1xuICAgICAgICAgICAgc2VsZi5wYWNrZXQoe1xuICAgICAgICAgICAgICAgIHR5cGU6IHNvY2tldF9pb19wYXJzZXJfMS5QYWNrZXRUeXBlLkFDSyxcbiAgICAgICAgICAgICAgICBpZDogaWQsXG4gICAgICAgICAgICAgICAgZGF0YTogYXJncyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgdXBvbiBhIHNlcnZlciBhY2tub3dsZWdlbWVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBwYWNrZXRcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIG9uYWNrKHBhY2tldCkge1xuICAgICAgICBjb25zdCBhY2sgPSB0aGlzLmFja3NbcGFja2V0LmlkXTtcbiAgICAgICAgaWYgKFwiZnVuY3Rpb25cIiA9PT0gdHlwZW9mIGFjaykge1xuICAgICAgICAgICAgZGVidWcoXCJjYWxsaW5nIGFjayAlcyB3aXRoICVqXCIsIHBhY2tldC5pZCwgcGFja2V0LmRhdGEpO1xuICAgICAgICAgICAgYWNrLmFwcGx5KHRoaXMsIHBhY2tldC5kYXRhKTtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmFja3NbcGFja2V0LmlkXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGRlYnVnKFwiYmFkIGFjayAlc1wiLCBwYWNrZXQuaWQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGxlZCB1cG9uIHNlcnZlciBjb25uZWN0LlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBvbmNvbm5lY3QoaWQpIHtcbiAgICAgICAgZGVidWcoXCJzb2NrZXQgY29ubmVjdGVkIHdpdGggaWQgJXNcIiwgaWQpO1xuICAgICAgICB0aGlzLmlkID0gaWQ7XG4gICAgICAgIHRoaXMuY29ubmVjdGVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5kaXNjb25uZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5lbWl0QnVmZmVyZWQoKTtcbiAgICAgICAgdGhpcy5lbWl0UmVzZXJ2ZWQoXCJjb25uZWN0XCIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFbWl0IGJ1ZmZlcmVkIGV2ZW50cyAocmVjZWl2ZWQgYW5kIGVtaXR0ZWQpLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBlbWl0QnVmZmVyZWQoKSB7XG4gICAgICAgIHRoaXMucmVjZWl2ZUJ1ZmZlci5mb3JFYWNoKChhcmdzKSA9PiB0aGlzLmVtaXRFdmVudChhcmdzKSk7XG4gICAgICAgIHRoaXMucmVjZWl2ZUJ1ZmZlciA9IFtdO1xuICAgICAgICB0aGlzLnNlbmRCdWZmZXIuZm9yRWFjaCgocGFja2V0KSA9PiB0aGlzLnBhY2tldChwYWNrZXQpKTtcbiAgICAgICAgdGhpcy5zZW5kQnVmZmVyID0gW107XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGxlZCB1cG9uIHNlcnZlciBkaXNjb25uZWN0LlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBvbmRpc2Nvbm5lY3QoKSB7XG4gICAgICAgIGRlYnVnKFwic2VydmVyIGRpc2Nvbm5lY3QgKCVzKVwiLCB0aGlzLm5zcCk7XG4gICAgICAgIHRoaXMuZGVzdHJveSgpO1xuICAgICAgICB0aGlzLm9uY2xvc2UoXCJpbyBzZXJ2ZXIgZGlzY29ubmVjdFwiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbGVkIHVwb24gZm9yY2VkIGNsaWVudC9zZXJ2ZXIgc2lkZSBkaXNjb25uZWN0aW9ucyxcbiAgICAgKiB0aGlzIG1ldGhvZCBlbnN1cmVzIHRoZSBtYW5hZ2VyIHN0b3BzIHRyYWNraW5nIHVzIGFuZFxuICAgICAqIHRoYXQgcmVjb25uZWN0aW9ucyBkb24ndCBnZXQgdHJpZ2dlcmVkIGZvciB0aGlzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBkZXN0cm95KCkge1xuICAgICAgICBpZiAodGhpcy5zdWJzKSB7XG4gICAgICAgICAgICAvLyBjbGVhbiBzdWJzY3JpcHRpb25zIHRvIGF2b2lkIHJlY29ubmVjdGlvbnNcbiAgICAgICAgICAgIHRoaXMuc3Vicy5mb3JFYWNoKChzdWJEZXN0cm95KSA9PiBzdWJEZXN0cm95KCkpO1xuICAgICAgICAgICAgdGhpcy5zdWJzID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaW9bXCJfZGVzdHJveVwiXSh0aGlzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGlzY29ubmVjdHMgdGhlIHNvY2tldCBtYW51YWxseS5cbiAgICAgKlxuICAgICAqIEByZXR1cm4gc2VsZlxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBkaXNjb25uZWN0KCkge1xuICAgICAgICBpZiAodGhpcy5jb25uZWN0ZWQpIHtcbiAgICAgICAgICAgIGRlYnVnKFwicGVyZm9ybWluZyBkaXNjb25uZWN0ICglcylcIiwgdGhpcy5uc3ApO1xuICAgICAgICAgICAgdGhpcy5wYWNrZXQoeyB0eXBlOiBzb2NrZXRfaW9fcGFyc2VyXzEuUGFja2V0VHlwZS5ESVNDT05ORUNUIH0pO1xuICAgICAgICB9XG4gICAgICAgIC8vIHJlbW92ZSBzb2NrZXQgZnJvbSBwb29sXG4gICAgICAgIHRoaXMuZGVzdHJveSgpO1xuICAgICAgICBpZiAodGhpcy5jb25uZWN0ZWQpIHtcbiAgICAgICAgICAgIC8vIGZpcmUgZXZlbnRzXG4gICAgICAgICAgICB0aGlzLm9uY2xvc2UoXCJpbyBjbGllbnQgZGlzY29ubmVjdFwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWxpYXMgZm9yIGRpc2Nvbm5lY3QoKVxuICAgICAqXG4gICAgICogQHJldHVybiBzZWxmXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGNsb3NlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kaXNjb25uZWN0KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGNvbXByZXNzIGZsYWcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY29tcHJlc3MgLSBpZiBgdHJ1ZWAsIGNvbXByZXNzZXMgdGhlIHNlbmRpbmcgZGF0YVxuICAgICAqIEByZXR1cm4gc2VsZlxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBjb21wcmVzcyhjb21wcmVzcykge1xuICAgICAgICB0aGlzLmZsYWdzLmNvbXByZXNzID0gY29tcHJlc3M7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIGEgbW9kaWZpZXIgZm9yIGEgc3Vic2VxdWVudCBldmVudCBlbWlzc2lvbiB0aGF0IHRoZSBldmVudCBtZXNzYWdlIHdpbGwgYmUgZHJvcHBlZCB3aGVuIHRoaXMgc29ja2V0IGlzIG5vdFxuICAgICAqIHJlYWR5IHRvIHNlbmQgbWVzc2FnZXMuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBzZWxmXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGdldCB2b2xhdGlsZSgpIHtcbiAgICAgICAgdGhpcy5mbGFncy52b2xhdGlsZSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgbGlzdGVuZXIgdGhhdCB3aWxsIGJlIGZpcmVkIHdoZW4gYW55IGV2ZW50IGlzIGVtaXR0ZWQuIFRoZSBldmVudCBuYW1lIGlzIHBhc3NlZCBhcyB0aGUgZmlyc3QgYXJndW1lbnQgdG8gdGhlXG4gICAgICogY2FsbGJhY2suXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbGlzdGVuZXJcbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgb25BbnkobGlzdGVuZXIpIHtcbiAgICAgICAgdGhpcy5fYW55TGlzdGVuZXJzID0gdGhpcy5fYW55TGlzdGVuZXJzIHx8IFtdO1xuICAgICAgICB0aGlzLl9hbnlMaXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgbGlzdGVuZXIgdGhhdCB3aWxsIGJlIGZpcmVkIHdoZW4gYW55IGV2ZW50IGlzIGVtaXR0ZWQuIFRoZSBldmVudCBuYW1lIGlzIHBhc3NlZCBhcyB0aGUgZmlyc3QgYXJndW1lbnQgdG8gdGhlXG4gICAgICogY2FsbGJhY2suIFRoZSBsaXN0ZW5lciBpcyBhZGRlZCB0byB0aGUgYmVnaW5uaW5nIG9mIHRoZSBsaXN0ZW5lcnMgYXJyYXkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbGlzdGVuZXJcbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgcHJlcGVuZEFueShsaXN0ZW5lcikge1xuICAgICAgICB0aGlzLl9hbnlMaXN0ZW5lcnMgPSB0aGlzLl9hbnlMaXN0ZW5lcnMgfHwgW107XG4gICAgICAgIHRoaXMuX2FueUxpc3RlbmVycy51bnNoaWZ0KGxpc3RlbmVyKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgdGhlIGxpc3RlbmVyIHRoYXQgd2lsbCBiZSBmaXJlZCB3aGVuIGFueSBldmVudCBpcyBlbWl0dGVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIGxpc3RlbmVyXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIG9mZkFueShsaXN0ZW5lcikge1xuICAgICAgICBpZiAoIXRoaXMuX2FueUxpc3RlbmVycykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxpc3RlbmVyKSB7XG4gICAgICAgICAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLl9hbnlMaXN0ZW5lcnM7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpc3RlbmVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChsaXN0ZW5lciA9PT0gbGlzdGVuZXJzW2ldKSB7XG4gICAgICAgICAgICAgICAgICAgIGxpc3RlbmVycy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2FueUxpc3RlbmVycyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFuIGFycmF5IG9mIGxpc3RlbmVycyB0aGF0IGFyZSBsaXN0ZW5pbmcgZm9yIGFueSBldmVudCB0aGF0IGlzIHNwZWNpZmllZC4gVGhpcyBhcnJheSBjYW4gYmUgbWFuaXB1bGF0ZWQsXG4gICAgICogZS5nLiB0byByZW1vdmUgbGlzdGVuZXJzLlxuICAgICAqXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGxpc3RlbmVyc0FueSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FueUxpc3RlbmVycyB8fCBbXTtcbiAgICB9XG59XG5leHBvcnRzLlNvY2tldCA9IFNvY2tldDtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5TdHJpY3RFdmVudEVtaXR0ZXIgPSB2b2lkIDA7XG5jb25zdCBFbWl0dGVyID0gcmVxdWlyZShcImNvbXBvbmVudC1lbWl0dGVyXCIpO1xuLyoqXG4gKiBTdHJpY3RseSB0eXBlZCB2ZXJzaW9uIG9mIGFuIGBFdmVudEVtaXR0ZXJgLiBBIGBUeXBlZEV2ZW50RW1pdHRlcmAgdGFrZXMgdHlwZVxuICogcGFyYW1ldGVycyBmb3IgbWFwcGluZ3Mgb2YgZXZlbnQgbmFtZXMgdG8gZXZlbnQgZGF0YSB0eXBlcywgYW5kIHN0cmljdGx5XG4gKiB0eXBlcyBtZXRob2QgY2FsbHMgdG8gdGhlIGBFdmVudEVtaXR0ZXJgIGFjY29yZGluZyB0byB0aGVzZSBldmVudCBtYXBzLlxuICpcbiAqIEB0eXBlUGFyYW0gTGlzdGVuRXZlbnRzIC0gYEV2ZW50c01hcGAgb2YgdXNlci1kZWZpbmVkIGV2ZW50cyB0aGF0IGNhbiBiZVxuICogbGlzdGVuZWQgdG8gd2l0aCBgb25gIG9yIGBvbmNlYFxuICogQHR5cGVQYXJhbSBFbWl0RXZlbnRzIC0gYEV2ZW50c01hcGAgb2YgdXNlci1kZWZpbmVkIGV2ZW50cyB0aGF0IGNhbiBiZVxuICogZW1pdHRlZCB3aXRoIGBlbWl0YFxuICogQHR5cGVQYXJhbSBSZXNlcnZlZEV2ZW50cyAtIGBFdmVudHNNYXBgIG9mIHJlc2VydmVkIGV2ZW50cywgdGhhdCBjYW4gYmVcbiAqIGVtaXR0ZWQgYnkgc29ja2V0LmlvIHdpdGggYGVtaXRSZXNlcnZlZGAsIGFuZCBjYW4gYmUgbGlzdGVuZWQgdG8gd2l0aFxuICogYGxpc3RlbmAuXG4gKi9cbmNsYXNzIFN0cmljdEV2ZW50RW1pdHRlciBleHRlbmRzIEVtaXR0ZXIge1xuICAgIC8qKlxuICAgICAqIEFkZHMgdGhlIGBsaXN0ZW5lcmAgZnVuY3Rpb24gYXMgYW4gZXZlbnQgbGlzdGVuZXIgZm9yIGBldmAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZXYgTmFtZSBvZiB0aGUgZXZlbnRcbiAgICAgKiBAcGFyYW0gbGlzdGVuZXIgQ2FsbGJhY2sgZnVuY3Rpb25cbiAgICAgKi9cbiAgICBvbihldiwgbGlzdGVuZXIpIHtcbiAgICAgICAgc3VwZXIub24oZXYsIGxpc3RlbmVyKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgYSBvbmUtdGltZSBgbGlzdGVuZXJgIGZ1bmN0aW9uIGFzIGFuIGV2ZW50IGxpc3RlbmVyIGZvciBgZXZgLlxuICAgICAqXG4gICAgICogQHBhcmFtIGV2IE5hbWUgb2YgdGhlIGV2ZW50XG4gICAgICogQHBhcmFtIGxpc3RlbmVyIENhbGxiYWNrIGZ1bmN0aW9uXG4gICAgICovXG4gICAgb25jZShldiwgbGlzdGVuZXIpIHtcbiAgICAgICAgc3VwZXIub25jZShldiwgbGlzdGVuZXIpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogRW1pdHMgYW4gZXZlbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZXYgTmFtZSBvZiB0aGUgZXZlbnRcbiAgICAgKiBAcGFyYW0gYXJncyBWYWx1ZXMgdG8gc2VuZCB0byBsaXN0ZW5lcnMgb2YgdGhpcyBldmVudFxuICAgICAqL1xuICAgIGVtaXQoZXYsIC4uLmFyZ3MpIHtcbiAgICAgICAgc3VwZXIuZW1pdChldiwgLi4uYXJncyk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFbWl0cyBhIHJlc2VydmVkIGV2ZW50LlxuICAgICAqXG4gICAgICogVGhpcyBtZXRob2QgaXMgYHByb3RlY3RlZGAsIHNvIHRoYXQgb25seSBhIGNsYXNzIGV4dGVuZGluZ1xuICAgICAqIGBTdHJpY3RFdmVudEVtaXR0ZXJgIGNhbiBlbWl0IGl0cyBvd24gcmVzZXJ2ZWQgZXZlbnRzLlxuICAgICAqXG4gICAgICogQHBhcmFtIGV2IFJlc2VydmVkIGV2ZW50IG5hbWVcbiAgICAgKiBAcGFyYW0gYXJncyBBcmd1bWVudHMgdG8gZW1pdCBhbG9uZyB3aXRoIHRoZSBldmVudFxuICAgICAqL1xuICAgIGVtaXRSZXNlcnZlZChldiwgLi4uYXJncykge1xuICAgICAgICBzdXBlci5lbWl0KGV2LCAuLi5hcmdzKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGxpc3RlbmVycyBsaXN0ZW5pbmcgdG8gYW4gZXZlbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZXZlbnQgRXZlbnQgbmFtZVxuICAgICAqIEByZXR1cm5zIEFycmF5IG9mIGxpc3RlbmVycyBzdWJzY3JpYmVkIHRvIGBldmVudGBcbiAgICAgKi9cbiAgICBsaXN0ZW5lcnMoZXZlbnQpIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLmxpc3RlbmVycyhldmVudCk7XG4gICAgfVxufVxuZXhwb3J0cy5TdHJpY3RFdmVudEVtaXR0ZXIgPSBTdHJpY3RFdmVudEVtaXR0ZXI7XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMudXJsID0gdm9pZCAwO1xuY29uc3QgcGFyc2V1cmkgPSByZXF1aXJlKFwicGFyc2V1cmlcIik7XG5jb25zdCBkZWJ1ZyA9IHJlcXVpcmUoXCJkZWJ1Z1wiKShcInNvY2tldC5pby1jbGllbnQ6dXJsXCIpO1xuLyoqXG4gKiBVUkwgcGFyc2VyLlxuICpcbiAqIEBwYXJhbSB1cmkgLSB1cmxcbiAqIEBwYXJhbSBwYXRoIC0gdGhlIHJlcXVlc3QgcGF0aCBvZiB0aGUgY29ubmVjdGlvblxuICogQHBhcmFtIGxvYyAtIEFuIG9iamVjdCBtZWFudCB0byBtaW1pYyB3aW5kb3cubG9jYXRpb24uXG4gKiAgICAgICAgRGVmYXVsdHMgdG8gd2luZG93LmxvY2F0aW9uLlxuICogQHB1YmxpY1xuICovXG5mdW5jdGlvbiB1cmwodXJpLCBwYXRoID0gXCJcIiwgbG9jKSB7XG4gICAgbGV0IG9iaiA9IHVyaTtcbiAgICAvLyBkZWZhdWx0IHRvIHdpbmRvdy5sb2NhdGlvblxuICAgIGxvYyA9IGxvYyB8fCAodHlwZW9mIGxvY2F0aW9uICE9PSBcInVuZGVmaW5lZFwiICYmIGxvY2F0aW9uKTtcbiAgICBpZiAobnVsbCA9PSB1cmkpXG4gICAgICAgIHVyaSA9IGxvYy5wcm90b2NvbCArIFwiLy9cIiArIGxvYy5ob3N0O1xuICAgIC8vIHJlbGF0aXZlIHBhdGggc3VwcG9ydFxuICAgIGlmICh0eXBlb2YgdXJpID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIGlmIChcIi9cIiA9PT0gdXJpLmNoYXJBdCgwKSkge1xuICAgICAgICAgICAgaWYgKFwiL1wiID09PSB1cmkuY2hhckF0KDEpKSB7XG4gICAgICAgICAgICAgICAgdXJpID0gbG9jLnByb3RvY29sICsgdXJpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdXJpID0gbG9jLmhvc3QgKyB1cmk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEvXihodHRwcz98d3NzPyk6XFwvXFwvLy50ZXN0KHVyaSkpIHtcbiAgICAgICAgICAgIGRlYnVnKFwicHJvdG9jb2wtbGVzcyB1cmwgJXNcIiwgdXJpKTtcbiAgICAgICAgICAgIGlmIChcInVuZGVmaW5lZFwiICE9PSB0eXBlb2YgbG9jKSB7XG4gICAgICAgICAgICAgICAgdXJpID0gbG9jLnByb3RvY29sICsgXCIvL1wiICsgdXJpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdXJpID0gXCJodHRwczovL1wiICsgdXJpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIHBhcnNlXG4gICAgICAgIGRlYnVnKFwicGFyc2UgJXNcIiwgdXJpKTtcbiAgICAgICAgb2JqID0gcGFyc2V1cmkodXJpKTtcbiAgICB9XG4gICAgLy8gbWFrZSBzdXJlIHdlIHRyZWF0IGBsb2NhbGhvc3Q6ODBgIGFuZCBgbG9jYWxob3N0YCBlcXVhbGx5XG4gICAgaWYgKCFvYmoucG9ydCkge1xuICAgICAgICBpZiAoL14oaHR0cHx3cykkLy50ZXN0KG9iai5wcm90b2NvbCkpIHtcbiAgICAgICAgICAgIG9iai5wb3J0ID0gXCI4MFwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKC9eKGh0dHB8d3MpcyQvLnRlc3Qob2JqLnByb3RvY29sKSkge1xuICAgICAgICAgICAgb2JqLnBvcnQgPSBcIjQ0M1wiO1xuICAgICAgICB9XG4gICAgfVxuICAgIG9iai5wYXRoID0gb2JqLnBhdGggfHwgXCIvXCI7XG4gICAgY29uc3QgaXB2NiA9IG9iai5ob3N0LmluZGV4T2YoXCI6XCIpICE9PSAtMTtcbiAgICBjb25zdCBob3N0ID0gaXB2NiA/IFwiW1wiICsgb2JqLmhvc3QgKyBcIl1cIiA6IG9iai5ob3N0O1xuICAgIC8vIGRlZmluZSB1bmlxdWUgaWRcbiAgICBvYmouaWQgPSBvYmoucHJvdG9jb2wgKyBcIjovL1wiICsgaG9zdCArIFwiOlwiICsgb2JqLnBvcnQgKyBwYXRoO1xuICAgIC8vIGRlZmluZSBocmVmXG4gICAgb2JqLmhyZWYgPVxuICAgICAgICBvYmoucHJvdG9jb2wgK1xuICAgICAgICAgICAgXCI6Ly9cIiArXG4gICAgICAgICAgICBob3N0ICtcbiAgICAgICAgICAgIChsb2MgJiYgbG9jLnBvcnQgPT09IG9iai5wb3J0ID8gXCJcIiA6IFwiOlwiICsgb2JqLnBvcnQpO1xuICAgIHJldHVybiBvYmo7XG59XG5leHBvcnRzLnVybCA9IHVybDtcbiIsIi8qIGVzbGludC1lbnYgYnJvd3NlciAqL1xuXG4vKipcbiAqIFRoaXMgaXMgdGhlIHdlYiBicm93c2VyIGltcGxlbWVudGF0aW9uIG9mIGBkZWJ1ZygpYC5cbiAqL1xuXG5leHBvcnRzLmZvcm1hdEFyZ3MgPSBmb3JtYXRBcmdzO1xuZXhwb3J0cy5zYXZlID0gc2F2ZTtcbmV4cG9ydHMubG9hZCA9IGxvYWQ7XG5leHBvcnRzLnVzZUNvbG9ycyA9IHVzZUNvbG9ycztcbmV4cG9ydHMuc3RvcmFnZSA9IGxvY2Fsc3RvcmFnZSgpO1xuZXhwb3J0cy5kZXN0cm95ID0gKCgpID0+IHtcblx0bGV0IHdhcm5lZCA9IGZhbHNlO1xuXG5cdHJldHVybiAoKSA9PiB7XG5cdFx0aWYgKCF3YXJuZWQpIHtcblx0XHRcdHdhcm5lZCA9IHRydWU7XG5cdFx0XHRjb25zb2xlLndhcm4oJ0luc3RhbmNlIG1ldGhvZCBgZGVidWcuZGVzdHJveSgpYCBpcyBkZXByZWNhdGVkIGFuZCBubyBsb25nZXIgZG9lcyBhbnl0aGluZy4gSXQgd2lsbCBiZSByZW1vdmVkIGluIHRoZSBuZXh0IG1ham9yIHZlcnNpb24gb2YgYGRlYnVnYC4nKTtcblx0XHR9XG5cdH07XG59KSgpO1xuXG4vKipcbiAqIENvbG9ycy5cbiAqL1xuXG5leHBvcnRzLmNvbG9ycyA9IFtcblx0JyMwMDAwQ0MnLFxuXHQnIzAwMDBGRicsXG5cdCcjMDAzM0NDJyxcblx0JyMwMDMzRkYnLFxuXHQnIzAwNjZDQycsXG5cdCcjMDA2NkZGJyxcblx0JyMwMDk5Q0MnLFxuXHQnIzAwOTlGRicsXG5cdCcjMDBDQzAwJyxcblx0JyMwMENDMzMnLFxuXHQnIzAwQ0M2NicsXG5cdCcjMDBDQzk5Jyxcblx0JyMwMENDQ0MnLFxuXHQnIzAwQ0NGRicsXG5cdCcjMzMwMENDJyxcblx0JyMzMzAwRkYnLFxuXHQnIzMzMzNDQycsXG5cdCcjMzMzM0ZGJyxcblx0JyMzMzY2Q0MnLFxuXHQnIzMzNjZGRicsXG5cdCcjMzM5OUNDJyxcblx0JyMzMzk5RkYnLFxuXHQnIzMzQ0MwMCcsXG5cdCcjMzNDQzMzJyxcblx0JyMzM0NDNjYnLFxuXHQnIzMzQ0M5OScsXG5cdCcjMzNDQ0NDJyxcblx0JyMzM0NDRkYnLFxuXHQnIzY2MDBDQycsXG5cdCcjNjYwMEZGJyxcblx0JyM2NjMzQ0MnLFxuXHQnIzY2MzNGRicsXG5cdCcjNjZDQzAwJyxcblx0JyM2NkNDMzMnLFxuXHQnIzk5MDBDQycsXG5cdCcjOTkwMEZGJyxcblx0JyM5OTMzQ0MnLFxuXHQnIzk5MzNGRicsXG5cdCcjOTlDQzAwJyxcblx0JyM5OUNDMzMnLFxuXHQnI0NDMDAwMCcsXG5cdCcjQ0MwMDMzJyxcblx0JyNDQzAwNjYnLFxuXHQnI0NDMDA5OScsXG5cdCcjQ0MwMENDJyxcblx0JyNDQzAwRkYnLFxuXHQnI0NDMzMwMCcsXG5cdCcjQ0MzMzMzJyxcblx0JyNDQzMzNjYnLFxuXHQnI0NDMzM5OScsXG5cdCcjQ0MzM0NDJyxcblx0JyNDQzMzRkYnLFxuXHQnI0NDNjYwMCcsXG5cdCcjQ0M2NjMzJyxcblx0JyNDQzk5MDAnLFxuXHQnI0NDOTkzMycsXG5cdCcjQ0NDQzAwJyxcblx0JyNDQ0NDMzMnLFxuXHQnI0ZGMDAwMCcsXG5cdCcjRkYwMDMzJyxcblx0JyNGRjAwNjYnLFxuXHQnI0ZGMDA5OScsXG5cdCcjRkYwMENDJyxcblx0JyNGRjAwRkYnLFxuXHQnI0ZGMzMwMCcsXG5cdCcjRkYzMzMzJyxcblx0JyNGRjMzNjYnLFxuXHQnI0ZGMzM5OScsXG5cdCcjRkYzM0NDJyxcblx0JyNGRjMzRkYnLFxuXHQnI0ZGNjYwMCcsXG5cdCcjRkY2NjMzJyxcblx0JyNGRjk5MDAnLFxuXHQnI0ZGOTkzMycsXG5cdCcjRkZDQzAwJyxcblx0JyNGRkNDMzMnXG5dO1xuXG4vKipcbiAqIEN1cnJlbnRseSBvbmx5IFdlYktpdC1iYXNlZCBXZWIgSW5zcGVjdG9ycywgRmlyZWZveCA+PSB2MzEsXG4gKiBhbmQgdGhlIEZpcmVidWcgZXh0ZW5zaW9uIChhbnkgRmlyZWZveCB2ZXJzaW9uKSBhcmUga25vd25cbiAqIHRvIHN1cHBvcnQgXCIlY1wiIENTUyBjdXN0b21pemF0aW9ucy5cbiAqXG4gKiBUT0RPOiBhZGQgYSBgbG9jYWxTdG9yYWdlYCB2YXJpYWJsZSB0byBleHBsaWNpdGx5IGVuYWJsZS9kaXNhYmxlIGNvbG9yc1xuICovXG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjb21wbGV4aXR5XG5mdW5jdGlvbiB1c2VDb2xvcnMoKSB7XG5cdC8vIE5COiBJbiBhbiBFbGVjdHJvbiBwcmVsb2FkIHNjcmlwdCwgZG9jdW1lbnQgd2lsbCBiZSBkZWZpbmVkIGJ1dCBub3QgZnVsbHlcblx0Ly8gaW5pdGlhbGl6ZWQuIFNpbmNlIHdlIGtub3cgd2UncmUgaW4gQ2hyb21lLCB3ZSdsbCBqdXN0IGRldGVjdCB0aGlzIGNhc2Vcblx0Ly8gZXhwbGljaXRseVxuXHRpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LnByb2Nlc3MgJiYgKHdpbmRvdy5wcm9jZXNzLnR5cGUgPT09ICdyZW5kZXJlcicgfHwgd2luZG93LnByb2Nlc3MuX19ud2pzKSkge1xuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cblx0Ly8gSW50ZXJuZXQgRXhwbG9yZXIgYW5kIEVkZ2UgZG8gbm90IHN1cHBvcnQgY29sb3JzLlxuXHRpZiAodHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudCAmJiBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkubWF0Y2goLyhlZGdlfHRyaWRlbnQpXFwvKFxcZCspLykpIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHQvLyBJcyB3ZWJraXQ/IGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzE2NDU5NjA2LzM3Njc3M1xuXHQvLyBkb2N1bWVudCBpcyB1bmRlZmluZWQgaW4gcmVhY3QtbmF0aXZlOiBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVhY3QtbmF0aXZlL3B1bGwvMTYzMlxuXHRyZXR1cm4gKHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50ICYmIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZSAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUuV2Via2l0QXBwZWFyYW5jZSkgfHxcblx0XHQvLyBJcyBmaXJlYnVnPyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8zOTgxMjAvMzc2NzczXG5cdFx0KHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5jb25zb2xlICYmICh3aW5kb3cuY29uc29sZS5maXJlYnVnIHx8ICh3aW5kb3cuY29uc29sZS5leGNlcHRpb24gJiYgd2luZG93LmNvbnNvbGUudGFibGUpKSkgfHxcblx0XHQvLyBJcyBmaXJlZm94ID49IHYzMT9cblx0XHQvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1Rvb2xzL1dlYl9Db25zb2xlI1N0eWxpbmdfbWVzc2FnZXNcblx0XHQodHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudCAmJiBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkubWF0Y2goL2ZpcmVmb3hcXC8oXFxkKykvKSAmJiBwYXJzZUludChSZWdFeHAuJDEsIDEwKSA+PSAzMSkgfHxcblx0XHQvLyBEb3VibGUgY2hlY2sgd2Via2l0IGluIHVzZXJBZ2VudCBqdXN0IGluIGNhc2Ugd2UgYXJlIGluIGEgd29ya2VyXG5cdFx0KHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmIG5hdmlnYXRvci51c2VyQWdlbnQgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLm1hdGNoKC9hcHBsZXdlYmtpdFxcLyhcXGQrKS8pKTtcbn1cblxuLyoqXG4gKiBDb2xvcml6ZSBsb2cgYXJndW1lbnRzIGlmIGVuYWJsZWQuXG4gKlxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5mdW5jdGlvbiBmb3JtYXRBcmdzKGFyZ3MpIHtcblx0YXJnc1swXSA9ICh0aGlzLnVzZUNvbG9ycyA/ICclYycgOiAnJykgK1xuXHRcdHRoaXMubmFtZXNwYWNlICtcblx0XHQodGhpcy51c2VDb2xvcnMgPyAnICVjJyA6ICcgJykgK1xuXHRcdGFyZ3NbMF0gK1xuXHRcdCh0aGlzLnVzZUNvbG9ycyA/ICclYyAnIDogJyAnKSArXG5cdFx0JysnICsgbW9kdWxlLmV4cG9ydHMuaHVtYW5pemUodGhpcy5kaWZmKTtcblxuXHRpZiAoIXRoaXMudXNlQ29sb3JzKSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0Y29uc3QgYyA9ICdjb2xvcjogJyArIHRoaXMuY29sb3I7XG5cdGFyZ3Muc3BsaWNlKDEsIDAsIGMsICdjb2xvcjogaW5oZXJpdCcpO1xuXG5cdC8vIFRoZSBmaW5hbCBcIiVjXCIgaXMgc29tZXdoYXQgdHJpY2t5LCBiZWNhdXNlIHRoZXJlIGNvdWxkIGJlIG90aGVyXG5cdC8vIGFyZ3VtZW50cyBwYXNzZWQgZWl0aGVyIGJlZm9yZSBvciBhZnRlciB0aGUgJWMsIHNvIHdlIG5lZWQgdG9cblx0Ly8gZmlndXJlIG91dCB0aGUgY29ycmVjdCBpbmRleCB0byBpbnNlcnQgdGhlIENTUyBpbnRvXG5cdGxldCBpbmRleCA9IDA7XG5cdGxldCBsYXN0QyA9IDA7XG5cdGFyZ3NbMF0ucmVwbGFjZSgvJVthLXpBLVolXS9nLCBtYXRjaCA9PiB7XG5cdFx0aWYgKG1hdGNoID09PSAnJSUnKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdGluZGV4Kys7XG5cdFx0aWYgKG1hdGNoID09PSAnJWMnKSB7XG5cdFx0XHQvLyBXZSBvbmx5IGFyZSBpbnRlcmVzdGVkIGluIHRoZSAqbGFzdCogJWNcblx0XHRcdC8vICh0aGUgdXNlciBtYXkgaGF2ZSBwcm92aWRlZCB0aGVpciBvd24pXG5cdFx0XHRsYXN0QyA9IGluZGV4O1xuXHRcdH1cblx0fSk7XG5cblx0YXJncy5zcGxpY2UobGFzdEMsIDAsIGMpO1xufVxuXG4vKipcbiAqIEludm9rZXMgYGNvbnNvbGUuZGVidWcoKWAgd2hlbiBhdmFpbGFibGUuXG4gKiBOby1vcCB3aGVuIGBjb25zb2xlLmRlYnVnYCBpcyBub3QgYSBcImZ1bmN0aW9uXCIuXG4gKiBJZiBgY29uc29sZS5kZWJ1Z2AgaXMgbm90IGF2YWlsYWJsZSwgZmFsbHMgYmFja1xuICogdG8gYGNvbnNvbGUubG9nYC5cbiAqXG4gKiBAYXBpIHB1YmxpY1xuICovXG5leHBvcnRzLmxvZyA9IGNvbnNvbGUuZGVidWcgfHwgY29uc29sZS5sb2cgfHwgKCgpID0+IHt9KTtcblxuLyoqXG4gKiBTYXZlIGBuYW1lc3BhY2VzYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZXNwYWNlc1xuICogQGFwaSBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHNhdmUobmFtZXNwYWNlcykge1xuXHR0cnkge1xuXHRcdGlmIChuYW1lc3BhY2VzKSB7XG5cdFx0XHRleHBvcnRzLnN0b3JhZ2Uuc2V0SXRlbSgnZGVidWcnLCBuYW1lc3BhY2VzKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0ZXhwb3J0cy5zdG9yYWdlLnJlbW92ZUl0ZW0oJ2RlYnVnJyk7XG5cdFx0fVxuXHR9IGNhdGNoIChlcnJvcikge1xuXHRcdC8vIFN3YWxsb3dcblx0XHQvLyBYWFggKEBRaXgtKSBzaG91bGQgd2UgYmUgbG9nZ2luZyB0aGVzZT9cblx0fVxufVxuXG4vKipcbiAqIExvYWQgYG5hbWVzcGFjZXNgLlxuICpcbiAqIEByZXR1cm4ge1N0cmluZ30gcmV0dXJucyB0aGUgcHJldmlvdXNseSBwZXJzaXN0ZWQgZGVidWcgbW9kZXNcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBsb2FkKCkge1xuXHRsZXQgcjtcblx0dHJ5IHtcblx0XHRyID0gZXhwb3J0cy5zdG9yYWdlLmdldEl0ZW0oJ2RlYnVnJyk7XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0Ly8gU3dhbGxvd1xuXHRcdC8vIFhYWCAoQFFpeC0pIHNob3VsZCB3ZSBiZSBsb2dnaW5nIHRoZXNlP1xuXHR9XG5cblx0Ly8gSWYgZGVidWcgaXNuJ3Qgc2V0IGluIExTLCBhbmQgd2UncmUgaW4gRWxlY3Ryb24sIHRyeSB0byBsb2FkICRERUJVR1xuXHRpZiAoIXIgJiYgdHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmICdlbnYnIGluIHByb2Nlc3MpIHtcblx0XHRyID0gcHJvY2Vzcy5lbnYuREVCVUc7XG5cdH1cblxuXHRyZXR1cm4gcjtcbn1cblxuLyoqXG4gKiBMb2NhbHN0b3JhZ2UgYXR0ZW1wdHMgdG8gcmV0dXJuIHRoZSBsb2NhbHN0b3JhZ2UuXG4gKlxuICogVGhpcyBpcyBuZWNlc3NhcnkgYmVjYXVzZSBzYWZhcmkgdGhyb3dzXG4gKiB3aGVuIGEgdXNlciBkaXNhYmxlcyBjb29raWVzL2xvY2Fsc3RvcmFnZVxuICogYW5kIHlvdSBhdHRlbXB0IHRvIGFjY2VzcyBpdC5cbiAqXG4gKiBAcmV0dXJuIHtMb2NhbFN0b3JhZ2V9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBsb2NhbHN0b3JhZ2UoKSB7XG5cdHRyeSB7XG5cdFx0Ly8gVFZNTEtpdCAoQXBwbGUgVFYgSlMgUnVudGltZSkgZG9lcyBub3QgaGF2ZSBhIHdpbmRvdyBvYmplY3QsIGp1c3QgbG9jYWxTdG9yYWdlIGluIHRoZSBnbG9iYWwgY29udGV4dFxuXHRcdC8vIFRoZSBCcm93c2VyIGFsc28gaGFzIGxvY2FsU3RvcmFnZSBpbiB0aGUgZ2xvYmFsIGNvbnRleHQuXG5cdFx0cmV0dXJuIGxvY2FsU3RvcmFnZTtcblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHQvLyBTd2FsbG93XG5cdFx0Ly8gWFhYIChAUWl4LSkgc2hvdWxkIHdlIGJlIGxvZ2dpbmcgdGhlc2U/XG5cdH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2NvbW1vbicpKGV4cG9ydHMpO1xuXG5jb25zdCB7Zm9ybWF0dGVyc30gPSBtb2R1bGUuZXhwb3J0cztcblxuLyoqXG4gKiBNYXAgJWogdG8gYEpTT04uc3RyaW5naWZ5KClgLCBzaW5jZSBubyBXZWIgSW5zcGVjdG9ycyBkbyB0aGF0IGJ5IGRlZmF1bHQuXG4gKi9cblxuZm9ybWF0dGVycy5qID0gZnVuY3Rpb24gKHYpIHtcblx0dHJ5IHtcblx0XHRyZXR1cm4gSlNPTi5zdHJpbmdpZnkodik7XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0cmV0dXJuICdbVW5leHBlY3RlZEpTT05QYXJzZUVycm9yXTogJyArIGVycm9yLm1lc3NhZ2U7XG5cdH1cbn07XG4iLCJcbi8qKlxuICogVGhpcyBpcyB0aGUgY29tbW9uIGxvZ2ljIGZvciBib3RoIHRoZSBOb2RlLmpzIGFuZCB3ZWIgYnJvd3NlclxuICogaW1wbGVtZW50YXRpb25zIG9mIGBkZWJ1ZygpYC5cbiAqL1xuXG5mdW5jdGlvbiBzZXR1cChlbnYpIHtcblx0Y3JlYXRlRGVidWcuZGVidWcgPSBjcmVhdGVEZWJ1Zztcblx0Y3JlYXRlRGVidWcuZGVmYXVsdCA9IGNyZWF0ZURlYnVnO1xuXHRjcmVhdGVEZWJ1Zy5jb2VyY2UgPSBjb2VyY2U7XG5cdGNyZWF0ZURlYnVnLmRpc2FibGUgPSBkaXNhYmxlO1xuXHRjcmVhdGVEZWJ1Zy5lbmFibGUgPSBlbmFibGU7XG5cdGNyZWF0ZURlYnVnLmVuYWJsZWQgPSBlbmFibGVkO1xuXHRjcmVhdGVEZWJ1Zy5odW1hbml6ZSA9IHJlcXVpcmUoJ21zJyk7XG5cdGNyZWF0ZURlYnVnLmRlc3Ryb3kgPSBkZXN0cm95O1xuXG5cdE9iamVjdC5rZXlzKGVudikuZm9yRWFjaChrZXkgPT4ge1xuXHRcdGNyZWF0ZURlYnVnW2tleV0gPSBlbnZba2V5XTtcblx0fSk7XG5cblx0LyoqXG5cdCogVGhlIGN1cnJlbnRseSBhY3RpdmUgZGVidWcgbW9kZSBuYW1lcywgYW5kIG5hbWVzIHRvIHNraXAuXG5cdCovXG5cblx0Y3JlYXRlRGVidWcubmFtZXMgPSBbXTtcblx0Y3JlYXRlRGVidWcuc2tpcHMgPSBbXTtcblxuXHQvKipcblx0KiBNYXAgb2Ygc3BlY2lhbCBcIiVuXCIgaGFuZGxpbmcgZnVuY3Rpb25zLCBmb3IgdGhlIGRlYnVnIFwiZm9ybWF0XCIgYXJndW1lbnQuXG5cdCpcblx0KiBWYWxpZCBrZXkgbmFtZXMgYXJlIGEgc2luZ2xlLCBsb3dlciBvciB1cHBlci1jYXNlIGxldHRlciwgaS5lLiBcIm5cIiBhbmQgXCJOXCIuXG5cdCovXG5cdGNyZWF0ZURlYnVnLmZvcm1hdHRlcnMgPSB7fTtcblxuXHQvKipcblx0KiBTZWxlY3RzIGEgY29sb3IgZm9yIGEgZGVidWcgbmFtZXNwYWNlXG5cdCogQHBhcmFtIHtTdHJpbmd9IG5hbWVzcGFjZSBUaGUgbmFtZXNwYWNlIHN0cmluZyBmb3IgdGhlIGZvciB0aGUgZGVidWcgaW5zdGFuY2UgdG8gYmUgY29sb3JlZFxuXHQqIEByZXR1cm4ge051bWJlcnxTdHJpbmd9IEFuIEFOU0kgY29sb3IgY29kZSBmb3IgdGhlIGdpdmVuIG5hbWVzcGFjZVxuXHQqIEBhcGkgcHJpdmF0ZVxuXHQqL1xuXHRmdW5jdGlvbiBzZWxlY3RDb2xvcihuYW1lc3BhY2UpIHtcblx0XHRsZXQgaGFzaCA9IDA7XG5cblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IG5hbWVzcGFjZS5sZW5ndGg7IGkrKykge1xuXHRcdFx0aGFzaCA9ICgoaGFzaCA8PCA1KSAtIGhhc2gpICsgbmFtZXNwYWNlLmNoYXJDb2RlQXQoaSk7XG5cdFx0XHRoYXNoIHw9IDA7IC8vIENvbnZlcnQgdG8gMzJiaXQgaW50ZWdlclxuXHRcdH1cblxuXHRcdHJldHVybiBjcmVhdGVEZWJ1Zy5jb2xvcnNbTWF0aC5hYnMoaGFzaCkgJSBjcmVhdGVEZWJ1Zy5jb2xvcnMubGVuZ3RoXTtcblx0fVxuXHRjcmVhdGVEZWJ1Zy5zZWxlY3RDb2xvciA9IHNlbGVjdENvbG9yO1xuXG5cdC8qKlxuXHQqIENyZWF0ZSBhIGRlYnVnZ2VyIHdpdGggdGhlIGdpdmVuIGBuYW1lc3BhY2VgLlxuXHQqXG5cdCogQHBhcmFtIHtTdHJpbmd9IG5hbWVzcGFjZVxuXHQqIEByZXR1cm4ge0Z1bmN0aW9ufVxuXHQqIEBhcGkgcHVibGljXG5cdCovXG5cdGZ1bmN0aW9uIGNyZWF0ZURlYnVnKG5hbWVzcGFjZSkge1xuXHRcdGxldCBwcmV2VGltZTtcblx0XHRsZXQgZW5hYmxlT3ZlcnJpZGUgPSBudWxsO1xuXG5cdFx0ZnVuY3Rpb24gZGVidWcoLi4uYXJncykge1xuXHRcdFx0Ly8gRGlzYWJsZWQ/XG5cdFx0XHRpZiAoIWRlYnVnLmVuYWJsZWQpIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHRjb25zdCBzZWxmID0gZGVidWc7XG5cblx0XHRcdC8vIFNldCBgZGlmZmAgdGltZXN0YW1wXG5cdFx0XHRjb25zdCBjdXJyID0gTnVtYmVyKG5ldyBEYXRlKCkpO1xuXHRcdFx0Y29uc3QgbXMgPSBjdXJyIC0gKHByZXZUaW1lIHx8IGN1cnIpO1xuXHRcdFx0c2VsZi5kaWZmID0gbXM7XG5cdFx0XHRzZWxmLnByZXYgPSBwcmV2VGltZTtcblx0XHRcdHNlbGYuY3VyciA9IGN1cnI7XG5cdFx0XHRwcmV2VGltZSA9IGN1cnI7XG5cblx0XHRcdGFyZ3NbMF0gPSBjcmVhdGVEZWJ1Zy5jb2VyY2UoYXJnc1swXSk7XG5cblx0XHRcdGlmICh0eXBlb2YgYXJnc1swXSAhPT0gJ3N0cmluZycpIHtcblx0XHRcdFx0Ly8gQW55dGhpbmcgZWxzZSBsZXQncyBpbnNwZWN0IHdpdGggJU9cblx0XHRcdFx0YXJncy51bnNoaWZ0KCclTycpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBBcHBseSBhbnkgYGZvcm1hdHRlcnNgIHRyYW5zZm9ybWF0aW9uc1xuXHRcdFx0bGV0IGluZGV4ID0gMDtcblx0XHRcdGFyZ3NbMF0gPSBhcmdzWzBdLnJlcGxhY2UoLyUoW2EtekEtWiVdKS9nLCAobWF0Y2gsIGZvcm1hdCkgPT4ge1xuXHRcdFx0XHQvLyBJZiB3ZSBlbmNvdW50ZXIgYW4gZXNjYXBlZCAlIHRoZW4gZG9uJ3QgaW5jcmVhc2UgdGhlIGFycmF5IGluZGV4XG5cdFx0XHRcdGlmIChtYXRjaCA9PT0gJyUlJykge1xuXHRcdFx0XHRcdHJldHVybiAnJSc7XG5cdFx0XHRcdH1cblx0XHRcdFx0aW5kZXgrKztcblx0XHRcdFx0Y29uc3QgZm9ybWF0dGVyID0gY3JlYXRlRGVidWcuZm9ybWF0dGVyc1tmb3JtYXRdO1xuXHRcdFx0XHRpZiAodHlwZW9mIGZvcm1hdHRlciA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0XHRcdGNvbnN0IHZhbCA9IGFyZ3NbaW5kZXhdO1xuXHRcdFx0XHRcdG1hdGNoID0gZm9ybWF0dGVyLmNhbGwoc2VsZiwgdmFsKTtcblxuXHRcdFx0XHRcdC8vIE5vdyB3ZSBuZWVkIHRvIHJlbW92ZSBgYXJnc1tpbmRleF1gIHNpbmNlIGl0J3MgaW5saW5lZCBpbiB0aGUgYGZvcm1hdGBcblx0XHRcdFx0XHRhcmdzLnNwbGljZShpbmRleCwgMSk7XG5cdFx0XHRcdFx0aW5kZXgtLTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gbWF0Y2g7XG5cdFx0XHR9KTtcblxuXHRcdFx0Ly8gQXBwbHkgZW52LXNwZWNpZmljIGZvcm1hdHRpbmcgKGNvbG9ycywgZXRjLilcblx0XHRcdGNyZWF0ZURlYnVnLmZvcm1hdEFyZ3MuY2FsbChzZWxmLCBhcmdzKTtcblxuXHRcdFx0Y29uc3QgbG9nRm4gPSBzZWxmLmxvZyB8fCBjcmVhdGVEZWJ1Zy5sb2c7XG5cdFx0XHRsb2dGbi5hcHBseShzZWxmLCBhcmdzKTtcblx0XHR9XG5cblx0XHRkZWJ1Zy5uYW1lc3BhY2UgPSBuYW1lc3BhY2U7XG5cdFx0ZGVidWcudXNlQ29sb3JzID0gY3JlYXRlRGVidWcudXNlQ29sb3JzKCk7XG5cdFx0ZGVidWcuY29sb3IgPSBjcmVhdGVEZWJ1Zy5zZWxlY3RDb2xvcihuYW1lc3BhY2UpO1xuXHRcdGRlYnVnLmV4dGVuZCA9IGV4dGVuZDtcblx0XHRkZWJ1Zy5kZXN0cm95ID0gY3JlYXRlRGVidWcuZGVzdHJveTsgLy8gWFhYIFRlbXBvcmFyeS4gV2lsbCBiZSByZW1vdmVkIGluIHRoZSBuZXh0IG1ham9yIHJlbGVhc2UuXG5cblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZGVidWcsICdlbmFibGVkJywge1xuXHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcblx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG5cdFx0XHRnZXQ6ICgpID0+IGVuYWJsZU92ZXJyaWRlID09PSBudWxsID8gY3JlYXRlRGVidWcuZW5hYmxlZChuYW1lc3BhY2UpIDogZW5hYmxlT3ZlcnJpZGUsXG5cdFx0XHRzZXQ6IHYgPT4ge1xuXHRcdFx0XHRlbmFibGVPdmVycmlkZSA9IHY7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQvLyBFbnYtc3BlY2lmaWMgaW5pdGlhbGl6YXRpb24gbG9naWMgZm9yIGRlYnVnIGluc3RhbmNlc1xuXHRcdGlmICh0eXBlb2YgY3JlYXRlRGVidWcuaW5pdCA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0Y3JlYXRlRGVidWcuaW5pdChkZWJ1Zyk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGRlYnVnO1xuXHR9XG5cblx0ZnVuY3Rpb24gZXh0ZW5kKG5hbWVzcGFjZSwgZGVsaW1pdGVyKSB7XG5cdFx0Y29uc3QgbmV3RGVidWcgPSBjcmVhdGVEZWJ1Zyh0aGlzLm5hbWVzcGFjZSArICh0eXBlb2YgZGVsaW1pdGVyID09PSAndW5kZWZpbmVkJyA/ICc6JyA6IGRlbGltaXRlcikgKyBuYW1lc3BhY2UpO1xuXHRcdG5ld0RlYnVnLmxvZyA9IHRoaXMubG9nO1xuXHRcdHJldHVybiBuZXdEZWJ1Zztcblx0fVxuXG5cdC8qKlxuXHQqIEVuYWJsZXMgYSBkZWJ1ZyBtb2RlIGJ5IG5hbWVzcGFjZXMuIFRoaXMgY2FuIGluY2x1ZGUgbW9kZXNcblx0KiBzZXBhcmF0ZWQgYnkgYSBjb2xvbiBhbmQgd2lsZGNhcmRzLlxuXHQqXG5cdCogQHBhcmFtIHtTdHJpbmd9IG5hbWVzcGFjZXNcblx0KiBAYXBpIHB1YmxpY1xuXHQqL1xuXHRmdW5jdGlvbiBlbmFibGUobmFtZXNwYWNlcykge1xuXHRcdGNyZWF0ZURlYnVnLnNhdmUobmFtZXNwYWNlcyk7XG5cblx0XHRjcmVhdGVEZWJ1Zy5uYW1lcyA9IFtdO1xuXHRcdGNyZWF0ZURlYnVnLnNraXBzID0gW107XG5cblx0XHRsZXQgaTtcblx0XHRjb25zdCBzcGxpdCA9ICh0eXBlb2YgbmFtZXNwYWNlcyA9PT0gJ3N0cmluZycgPyBuYW1lc3BhY2VzIDogJycpLnNwbGl0KC9bXFxzLF0rLyk7XG5cdFx0Y29uc3QgbGVuID0gc3BsaXQubGVuZ3RoO1xuXG5cdFx0Zm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG5cdFx0XHRpZiAoIXNwbGl0W2ldKSB7XG5cdFx0XHRcdC8vIGlnbm9yZSBlbXB0eSBzdHJpbmdzXG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXG5cdFx0XHRuYW1lc3BhY2VzID0gc3BsaXRbaV0ucmVwbGFjZSgvXFwqL2csICcuKj8nKTtcblxuXHRcdFx0aWYgKG5hbWVzcGFjZXNbMF0gPT09ICctJykge1xuXHRcdFx0XHRjcmVhdGVEZWJ1Zy5za2lwcy5wdXNoKG5ldyBSZWdFeHAoJ14nICsgbmFtZXNwYWNlcy5zdWJzdHIoMSkgKyAnJCcpKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNyZWF0ZURlYnVnLm5hbWVzLnB1c2gobmV3IFJlZ0V4cCgnXicgKyBuYW1lc3BhY2VzICsgJyQnKSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCogRGlzYWJsZSBkZWJ1ZyBvdXRwdXQuXG5cdCpcblx0KiBAcmV0dXJuIHtTdHJpbmd9IG5hbWVzcGFjZXNcblx0KiBAYXBpIHB1YmxpY1xuXHQqL1xuXHRmdW5jdGlvbiBkaXNhYmxlKCkge1xuXHRcdGNvbnN0IG5hbWVzcGFjZXMgPSBbXG5cdFx0XHQuLi5jcmVhdGVEZWJ1Zy5uYW1lcy5tYXAodG9OYW1lc3BhY2UpLFxuXHRcdFx0Li4uY3JlYXRlRGVidWcuc2tpcHMubWFwKHRvTmFtZXNwYWNlKS5tYXAobmFtZXNwYWNlID0+ICctJyArIG5hbWVzcGFjZSlcblx0XHRdLmpvaW4oJywnKTtcblx0XHRjcmVhdGVEZWJ1Zy5lbmFibGUoJycpO1xuXHRcdHJldHVybiBuYW1lc3BhY2VzO1xuXHR9XG5cblx0LyoqXG5cdCogUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiBtb2RlIG5hbWUgaXMgZW5hYmxlZCwgZmFsc2Ugb3RoZXJ3aXNlLlxuXHQqXG5cdCogQHBhcmFtIHtTdHJpbmd9IG5hbWVcblx0KiBAcmV0dXJuIHtCb29sZWFufVxuXHQqIEBhcGkgcHVibGljXG5cdCovXG5cdGZ1bmN0aW9uIGVuYWJsZWQobmFtZSkge1xuXHRcdGlmIChuYW1lW25hbWUubGVuZ3RoIC0gMV0gPT09ICcqJykge1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXG5cdFx0bGV0IGk7XG5cdFx0bGV0IGxlbjtcblxuXHRcdGZvciAoaSA9IDAsIGxlbiA9IGNyZWF0ZURlYnVnLnNraXBzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG5cdFx0XHRpZiAoY3JlYXRlRGVidWcuc2tpcHNbaV0udGVzdChuYW1lKSkge1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Zm9yIChpID0gMCwgbGVuID0gY3JlYXRlRGVidWcubmFtZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcblx0XHRcdGlmIChjcmVhdGVEZWJ1Zy5uYW1lc1tpXS50ZXN0KG5hbWUpKSB7XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdC8qKlxuXHQqIENvbnZlcnQgcmVnZXhwIHRvIG5hbWVzcGFjZVxuXHQqXG5cdCogQHBhcmFtIHtSZWdFeHB9IHJlZ3hlcFxuXHQqIEByZXR1cm4ge1N0cmluZ30gbmFtZXNwYWNlXG5cdCogQGFwaSBwcml2YXRlXG5cdCovXG5cdGZ1bmN0aW9uIHRvTmFtZXNwYWNlKHJlZ2V4cCkge1xuXHRcdHJldHVybiByZWdleHAudG9TdHJpbmcoKVxuXHRcdFx0LnN1YnN0cmluZygyLCByZWdleHAudG9TdHJpbmcoKS5sZW5ndGggLSAyKVxuXHRcdFx0LnJlcGxhY2UoL1xcLlxcKlxcPyQvLCAnKicpO1xuXHR9XG5cblx0LyoqXG5cdCogQ29lcmNlIGB2YWxgLlxuXHQqXG5cdCogQHBhcmFtIHtNaXhlZH0gdmFsXG5cdCogQHJldHVybiB7TWl4ZWR9XG5cdCogQGFwaSBwcml2YXRlXG5cdCovXG5cdGZ1bmN0aW9uIGNvZXJjZSh2YWwpIHtcblx0XHRpZiAodmFsIGluc3RhbmNlb2YgRXJyb3IpIHtcblx0XHRcdHJldHVybiB2YWwuc3RhY2sgfHwgdmFsLm1lc3NhZ2U7XG5cdFx0fVxuXHRcdHJldHVybiB2YWw7XG5cdH1cblxuXHQvKipcblx0KiBYWFggRE8gTk9UIFVTRS4gVGhpcyBpcyBhIHRlbXBvcmFyeSBzdHViIGZ1bmN0aW9uLlxuXHQqIFhYWCBJdCBXSUxMIGJlIHJlbW92ZWQgaW4gdGhlIG5leHQgbWFqb3IgcmVsZWFzZS5cblx0Ki9cblx0ZnVuY3Rpb24gZGVzdHJveSgpIHtcblx0XHRjb25zb2xlLndhcm4oJ0luc3RhbmNlIG1ldGhvZCBgZGVidWcuZGVzdHJveSgpYCBpcyBkZXByZWNhdGVkIGFuZCBubyBsb25nZXIgZG9lcyBhbnl0aGluZy4gSXQgd2lsbCBiZSByZW1vdmVkIGluIHRoZSBuZXh0IG1ham9yIHZlcnNpb24gb2YgYGRlYnVnYC4nKTtcblx0fVxuXG5cdGNyZWF0ZURlYnVnLmVuYWJsZShjcmVhdGVEZWJ1Zy5sb2FkKCkpO1xuXG5cdHJldHVybiBjcmVhdGVEZWJ1Zztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzZXR1cDtcbiIsIi8qKlxuICogSGVscGVycy5cbiAqL1xuXG52YXIgcyA9IDEwMDA7XG52YXIgbSA9IHMgKiA2MDtcbnZhciBoID0gbSAqIDYwO1xudmFyIGQgPSBoICogMjQ7XG52YXIgdyA9IGQgKiA3O1xudmFyIHkgPSBkICogMzY1LjI1O1xuXG4vKipcbiAqIFBhcnNlIG9yIGZvcm1hdCB0aGUgZ2l2ZW4gYHZhbGAuXG4gKlxuICogT3B0aW9uczpcbiAqXG4gKiAgLSBgbG9uZ2AgdmVyYm9zZSBmb3JtYXR0aW5nIFtmYWxzZV1cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ3xOdW1iZXJ9IHZhbFxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICogQHRocm93cyB7RXJyb3J9IHRocm93IGFuIGVycm9yIGlmIHZhbCBpcyBub3QgYSBub24tZW1wdHkgc3RyaW5nIG9yIGEgbnVtYmVyXG4gKiBAcmV0dXJuIHtTdHJpbmd8TnVtYmVyfVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHZhbCwgb3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsO1xuICBpZiAodHlwZSA9PT0gJ3N0cmluZycgJiYgdmFsLmxlbmd0aCA+IDApIHtcbiAgICByZXR1cm4gcGFyc2UodmFsKTtcbiAgfSBlbHNlIGlmICh0eXBlID09PSAnbnVtYmVyJyAmJiBpc0Zpbml0ZSh2YWwpKSB7XG4gICAgcmV0dXJuIG9wdGlvbnMubG9uZyA/IGZtdExvbmcodmFsKSA6IGZtdFNob3J0KHZhbCk7XG4gIH1cbiAgdGhyb3cgbmV3IEVycm9yKFxuICAgICd2YWwgaXMgbm90IGEgbm9uLWVtcHR5IHN0cmluZyBvciBhIHZhbGlkIG51bWJlci4gdmFsPScgK1xuICAgICAgSlNPTi5zdHJpbmdpZnkodmFsKVxuICApO1xufTtcblxuLyoqXG4gKiBQYXJzZSB0aGUgZ2l2ZW4gYHN0cmAgYW5kIHJldHVybiBtaWxsaXNlY29uZHMuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHJldHVybiB7TnVtYmVyfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gcGFyc2Uoc3RyKSB7XG4gIHN0ciA9IFN0cmluZyhzdHIpO1xuICBpZiAoc3RyLmxlbmd0aCA+IDEwMCkge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgbWF0Y2ggPSAvXigtPyg/OlxcZCspP1xcLj9cXGQrKSAqKG1pbGxpc2Vjb25kcz98bXNlY3M/fG1zfHNlY29uZHM/fHNlY3M/fHN8bWludXRlcz98bWlucz98bXxob3Vycz98aHJzP3xofGRheXM/fGR8d2Vla3M/fHd8eWVhcnM/fHlycz98eSk/JC9pLmV4ZWMoXG4gICAgc3RyXG4gICk7XG4gIGlmICghbWF0Y2gpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIG4gPSBwYXJzZUZsb2F0KG1hdGNoWzFdKTtcbiAgdmFyIHR5cGUgPSAobWF0Y2hbMl0gfHwgJ21zJykudG9Mb3dlckNhc2UoKTtcbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSAneWVhcnMnOlxuICAgIGNhc2UgJ3llYXInOlxuICAgIGNhc2UgJ3lycyc6XG4gICAgY2FzZSAneXInOlxuICAgIGNhc2UgJ3knOlxuICAgICAgcmV0dXJuIG4gKiB5O1xuICAgIGNhc2UgJ3dlZWtzJzpcbiAgICBjYXNlICd3ZWVrJzpcbiAgICBjYXNlICd3JzpcbiAgICAgIHJldHVybiBuICogdztcbiAgICBjYXNlICdkYXlzJzpcbiAgICBjYXNlICdkYXknOlxuICAgIGNhc2UgJ2QnOlxuICAgICAgcmV0dXJuIG4gKiBkO1xuICAgIGNhc2UgJ2hvdXJzJzpcbiAgICBjYXNlICdob3VyJzpcbiAgICBjYXNlICdocnMnOlxuICAgIGNhc2UgJ2hyJzpcbiAgICBjYXNlICdoJzpcbiAgICAgIHJldHVybiBuICogaDtcbiAgICBjYXNlICdtaW51dGVzJzpcbiAgICBjYXNlICdtaW51dGUnOlxuICAgIGNhc2UgJ21pbnMnOlxuICAgIGNhc2UgJ21pbic6XG4gICAgY2FzZSAnbSc6XG4gICAgICByZXR1cm4gbiAqIG07XG4gICAgY2FzZSAnc2Vjb25kcyc6XG4gICAgY2FzZSAnc2Vjb25kJzpcbiAgICBjYXNlICdzZWNzJzpcbiAgICBjYXNlICdzZWMnOlxuICAgIGNhc2UgJ3MnOlxuICAgICAgcmV0dXJuIG4gKiBzO1xuICAgIGNhc2UgJ21pbGxpc2Vjb25kcyc6XG4gICAgY2FzZSAnbWlsbGlzZWNvbmQnOlxuICAgIGNhc2UgJ21zZWNzJzpcbiAgICBjYXNlICdtc2VjJzpcbiAgICBjYXNlICdtcyc6XG4gICAgICByZXR1cm4gbjtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxufVxuXG4vKipcbiAqIFNob3J0IGZvcm1hdCBmb3IgYG1zYC5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gbXNcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIGZtdFNob3J0KG1zKSB7XG4gIHZhciBtc0FicyA9IE1hdGguYWJzKG1zKTtcbiAgaWYgKG1zQWJzID49IGQpIHtcbiAgICByZXR1cm4gTWF0aC5yb3VuZChtcyAvIGQpICsgJ2QnO1xuICB9XG4gIGlmIChtc0FicyA+PSBoKSB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQobXMgLyBoKSArICdoJztcbiAgfVxuICBpZiAobXNBYnMgPj0gbSkge1xuICAgIHJldHVybiBNYXRoLnJvdW5kKG1zIC8gbSkgKyAnbSc7XG4gIH1cbiAgaWYgKG1zQWJzID49IHMpIHtcbiAgICByZXR1cm4gTWF0aC5yb3VuZChtcyAvIHMpICsgJ3MnO1xuICB9XG4gIHJldHVybiBtcyArICdtcyc7XG59XG5cbi8qKlxuICogTG9uZyBmb3JtYXQgZm9yIGBtc2AuXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IG1zXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBmbXRMb25nKG1zKSB7XG4gIHZhciBtc0FicyA9IE1hdGguYWJzKG1zKTtcbiAgaWYgKG1zQWJzID49IGQpIHtcbiAgICByZXR1cm4gcGx1cmFsKG1zLCBtc0FicywgZCwgJ2RheScpO1xuICB9XG4gIGlmIChtc0FicyA+PSBoKSB7XG4gICAgcmV0dXJuIHBsdXJhbChtcywgbXNBYnMsIGgsICdob3VyJyk7XG4gIH1cbiAgaWYgKG1zQWJzID49IG0pIHtcbiAgICByZXR1cm4gcGx1cmFsKG1zLCBtc0FicywgbSwgJ21pbnV0ZScpO1xuICB9XG4gIGlmIChtc0FicyA+PSBzKSB7XG4gICAgcmV0dXJuIHBsdXJhbChtcywgbXNBYnMsIHMsICdzZWNvbmQnKTtcbiAgfVxuICByZXR1cm4gbXMgKyAnIG1zJztcbn1cblxuLyoqXG4gKiBQbHVyYWxpemF0aW9uIGhlbHBlci5cbiAqL1xuXG5mdW5jdGlvbiBwbHVyYWwobXMsIG1zQWJzLCBuLCBuYW1lKSB7XG4gIHZhciBpc1BsdXJhbCA9IG1zQWJzID49IG4gKiAxLjU7XG4gIHJldHVybiBNYXRoLnJvdW5kKG1zIC8gbikgKyAnICcgKyBuYW1lICsgKGlzUGx1cmFsID8gJ3MnIDogJycpO1xufVxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnJlY29uc3RydWN0UGFja2V0ID0gZXhwb3J0cy5kZWNvbnN0cnVjdFBhY2tldCA9IHZvaWQgMDtcbmNvbnN0IGlzX2JpbmFyeV8xID0gcmVxdWlyZShcIi4vaXMtYmluYXJ5XCIpO1xuLyoqXG4gKiBSZXBsYWNlcyBldmVyeSBCdWZmZXIgfCBBcnJheUJ1ZmZlciB8IEJsb2IgfCBGaWxlIGluIHBhY2tldCB3aXRoIGEgbnVtYmVyZWQgcGxhY2Vob2xkZXIuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHBhY2tldCAtIHNvY2tldC5pbyBldmVudCBwYWNrZXRcbiAqIEByZXR1cm4ge09iamVjdH0gd2l0aCBkZWNvbnN0cnVjdGVkIHBhY2tldCBhbmQgbGlzdCBvZiBidWZmZXJzXG4gKiBAcHVibGljXG4gKi9cbmZ1bmN0aW9uIGRlY29uc3RydWN0UGFja2V0KHBhY2tldCkge1xuICAgIGNvbnN0IGJ1ZmZlcnMgPSBbXTtcbiAgICBjb25zdCBwYWNrZXREYXRhID0gcGFja2V0LmRhdGE7XG4gICAgY29uc3QgcGFjayA9IHBhY2tldDtcbiAgICBwYWNrLmRhdGEgPSBfZGVjb25zdHJ1Y3RQYWNrZXQocGFja2V0RGF0YSwgYnVmZmVycyk7XG4gICAgcGFjay5hdHRhY2htZW50cyA9IGJ1ZmZlcnMubGVuZ3RoOyAvLyBudW1iZXIgb2YgYmluYXJ5ICdhdHRhY2htZW50cydcbiAgICByZXR1cm4geyBwYWNrZXQ6IHBhY2ssIGJ1ZmZlcnM6IGJ1ZmZlcnMgfTtcbn1cbmV4cG9ydHMuZGVjb25zdHJ1Y3RQYWNrZXQgPSBkZWNvbnN0cnVjdFBhY2tldDtcbmZ1bmN0aW9uIF9kZWNvbnN0cnVjdFBhY2tldChkYXRhLCBidWZmZXJzKSB7XG4gICAgaWYgKCFkYXRhKVxuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICBpZiAoaXNfYmluYXJ5XzEuaXNCaW5hcnkoZGF0YSkpIHtcbiAgICAgICAgY29uc3QgcGxhY2Vob2xkZXIgPSB7IF9wbGFjZWhvbGRlcjogdHJ1ZSwgbnVtOiBidWZmZXJzLmxlbmd0aCB9O1xuICAgICAgICBidWZmZXJzLnB1c2goZGF0YSk7XG4gICAgICAgIHJldHVybiBwbGFjZWhvbGRlcjtcbiAgICB9XG4gICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShkYXRhKSkge1xuICAgICAgICBjb25zdCBuZXdEYXRhID0gbmV3IEFycmF5KGRhdGEubGVuZ3RoKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBuZXdEYXRhW2ldID0gX2RlY29uc3RydWN0UGFja2V0KGRhdGFbaV0sIGJ1ZmZlcnMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXdEYXRhO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgZGF0YSA9PT0gXCJvYmplY3RcIiAmJiAhKGRhdGEgaW5zdGFuY2VvZiBEYXRlKSkge1xuICAgICAgICBjb25zdCBuZXdEYXRhID0ge307XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIGRhdGEpIHtcbiAgICAgICAgICAgIGlmIChkYXRhLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgICAgICBuZXdEYXRhW2tleV0gPSBfZGVjb25zdHJ1Y3RQYWNrZXQoZGF0YVtrZXldLCBidWZmZXJzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3RGF0YTtcbiAgICB9XG4gICAgcmV0dXJuIGRhdGE7XG59XG4vKipcbiAqIFJlY29uc3RydWN0cyBhIGJpbmFyeSBwYWNrZXQgZnJvbSBpdHMgcGxhY2Vob2xkZXIgcGFja2V0IGFuZCBidWZmZXJzXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHBhY2tldCAtIGV2ZW50IHBhY2tldCB3aXRoIHBsYWNlaG9sZGVyc1xuICogQHBhcmFtIHtBcnJheX0gYnVmZmVycyAtIGJpbmFyeSBidWZmZXJzIHRvIHB1dCBpbiBwbGFjZWhvbGRlciBwb3NpdGlvbnNcbiAqIEByZXR1cm4ge09iamVjdH0gcmVjb25zdHJ1Y3RlZCBwYWNrZXRcbiAqIEBwdWJsaWNcbiAqL1xuZnVuY3Rpb24gcmVjb25zdHJ1Y3RQYWNrZXQocGFja2V0LCBidWZmZXJzKSB7XG4gICAgcGFja2V0LmRhdGEgPSBfcmVjb25zdHJ1Y3RQYWNrZXQocGFja2V0LmRhdGEsIGJ1ZmZlcnMpO1xuICAgIHBhY2tldC5hdHRhY2htZW50cyA9IHVuZGVmaW5lZDsgLy8gbm8gbG9uZ2VyIHVzZWZ1bFxuICAgIHJldHVybiBwYWNrZXQ7XG59XG5leHBvcnRzLnJlY29uc3RydWN0UGFja2V0ID0gcmVjb25zdHJ1Y3RQYWNrZXQ7XG5mdW5jdGlvbiBfcmVjb25zdHJ1Y3RQYWNrZXQoZGF0YSwgYnVmZmVycykge1xuICAgIGlmICghZGF0YSlcbiAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgaWYgKGRhdGEgJiYgZGF0YS5fcGxhY2Vob2xkZXIpIHtcbiAgICAgICAgcmV0dXJuIGJ1ZmZlcnNbZGF0YS5udW1dOyAvLyBhcHByb3ByaWF0ZSBidWZmZXIgKHNob3VsZCBiZSBuYXR1cmFsIG9yZGVyIGFueXdheSlcbiAgICB9XG4gICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShkYXRhKSkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGRhdGFbaV0gPSBfcmVjb25zdHJ1Y3RQYWNrZXQoZGF0YVtpXSwgYnVmZmVycyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIGRhdGEgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gZGF0YSkge1xuICAgICAgICAgICAgaWYgKGRhdGEuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgICAgIGRhdGFba2V5XSA9IF9yZWNvbnN0cnVjdFBhY2tldChkYXRhW2tleV0sIGJ1ZmZlcnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBkYXRhO1xufVxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkRlY29kZXIgPSBleHBvcnRzLkVuY29kZXIgPSBleHBvcnRzLlBhY2tldFR5cGUgPSBleHBvcnRzLnByb3RvY29sID0gdm9pZCAwO1xuY29uc3QgRW1pdHRlciA9IHJlcXVpcmUoXCJjb21wb25lbnQtZW1pdHRlclwiKTtcbmNvbnN0IGJpbmFyeV8xID0gcmVxdWlyZShcIi4vYmluYXJ5XCIpO1xuY29uc3QgaXNfYmluYXJ5XzEgPSByZXF1aXJlKFwiLi9pcy1iaW5hcnlcIik7XG5jb25zdCBkZWJ1ZyA9IHJlcXVpcmUoXCJkZWJ1Z1wiKShcInNvY2tldC5pby1wYXJzZXJcIik7XG4vKipcbiAqIFByb3RvY29sIHZlcnNpb24uXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnRzLnByb3RvY29sID0gNTtcbnZhciBQYWNrZXRUeXBlO1xuKGZ1bmN0aW9uIChQYWNrZXRUeXBlKSB7XG4gICAgUGFja2V0VHlwZVtQYWNrZXRUeXBlW1wiQ09OTkVDVFwiXSA9IDBdID0gXCJDT05ORUNUXCI7XG4gICAgUGFja2V0VHlwZVtQYWNrZXRUeXBlW1wiRElTQ09OTkVDVFwiXSA9IDFdID0gXCJESVNDT05ORUNUXCI7XG4gICAgUGFja2V0VHlwZVtQYWNrZXRUeXBlW1wiRVZFTlRcIl0gPSAyXSA9IFwiRVZFTlRcIjtcbiAgICBQYWNrZXRUeXBlW1BhY2tldFR5cGVbXCJBQ0tcIl0gPSAzXSA9IFwiQUNLXCI7XG4gICAgUGFja2V0VHlwZVtQYWNrZXRUeXBlW1wiQ09OTkVDVF9FUlJPUlwiXSA9IDRdID0gXCJDT05ORUNUX0VSUk9SXCI7XG4gICAgUGFja2V0VHlwZVtQYWNrZXRUeXBlW1wiQklOQVJZX0VWRU5UXCJdID0gNV0gPSBcIkJJTkFSWV9FVkVOVFwiO1xuICAgIFBhY2tldFR5cGVbUGFja2V0VHlwZVtcIkJJTkFSWV9BQ0tcIl0gPSA2XSA9IFwiQklOQVJZX0FDS1wiO1xufSkoUGFja2V0VHlwZSA9IGV4cG9ydHMuUGFja2V0VHlwZSB8fCAoZXhwb3J0cy5QYWNrZXRUeXBlID0ge30pKTtcbi8qKlxuICogQSBzb2NrZXQuaW8gRW5jb2RlciBpbnN0YW5jZVxuICovXG5jbGFzcyBFbmNvZGVyIHtcbiAgICAvKipcbiAgICAgKiBFbmNvZGUgYSBwYWNrZXQgYXMgYSBzaW5nbGUgc3RyaW5nIGlmIG5vbi1iaW5hcnksIG9yIGFzIGFcbiAgICAgKiBidWZmZXIgc2VxdWVuY2UsIGRlcGVuZGluZyBvbiBwYWNrZXQgdHlwZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmogLSBwYWNrZXQgb2JqZWN0XG4gICAgICovXG4gICAgZW5jb2RlKG9iaikge1xuICAgICAgICBkZWJ1ZyhcImVuY29kaW5nIHBhY2tldCAlalwiLCBvYmopO1xuICAgICAgICBpZiAob2JqLnR5cGUgPT09IFBhY2tldFR5cGUuRVZFTlQgfHwgb2JqLnR5cGUgPT09IFBhY2tldFR5cGUuQUNLKSB7XG4gICAgICAgICAgICBpZiAoaXNfYmluYXJ5XzEuaGFzQmluYXJ5KG9iaikpIHtcbiAgICAgICAgICAgICAgICBvYmoudHlwZSA9XG4gICAgICAgICAgICAgICAgICAgIG9iai50eXBlID09PSBQYWNrZXRUeXBlLkVWRU5UXG4gICAgICAgICAgICAgICAgICAgICAgICA/IFBhY2tldFR5cGUuQklOQVJZX0VWRU5UXG4gICAgICAgICAgICAgICAgICAgICAgICA6IFBhY2tldFR5cGUuQklOQVJZX0FDSztcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGVBc0JpbmFyeShvYmopO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbdGhpcy5lbmNvZGVBc1N0cmluZyhvYmopXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRW5jb2RlIHBhY2tldCBhcyBzdHJpbmcuXG4gICAgICovXG4gICAgZW5jb2RlQXNTdHJpbmcob2JqKSB7XG4gICAgICAgIC8vIGZpcnN0IGlzIHR5cGVcbiAgICAgICAgbGV0IHN0ciA9IFwiXCIgKyBvYmoudHlwZTtcbiAgICAgICAgLy8gYXR0YWNobWVudHMgaWYgd2UgaGF2ZSB0aGVtXG4gICAgICAgIGlmIChvYmoudHlwZSA9PT0gUGFja2V0VHlwZS5CSU5BUllfRVZFTlQgfHxcbiAgICAgICAgICAgIG9iai50eXBlID09PSBQYWNrZXRUeXBlLkJJTkFSWV9BQ0spIHtcbiAgICAgICAgICAgIHN0ciArPSBvYmouYXR0YWNobWVudHMgKyBcIi1cIjtcbiAgICAgICAgfVxuICAgICAgICAvLyBpZiB3ZSBoYXZlIGEgbmFtZXNwYWNlIG90aGVyIHRoYW4gYC9gXG4gICAgICAgIC8vIHdlIGFwcGVuZCBpdCBmb2xsb3dlZCBieSBhIGNvbW1hIGAsYFxuICAgICAgICBpZiAob2JqLm5zcCAmJiBcIi9cIiAhPT0gb2JqLm5zcCkge1xuICAgICAgICAgICAgc3RyICs9IG9iai5uc3AgKyBcIixcIjtcbiAgICAgICAgfVxuICAgICAgICAvLyBpbW1lZGlhdGVseSBmb2xsb3dlZCBieSB0aGUgaWRcbiAgICAgICAgaWYgKG51bGwgIT0gb2JqLmlkKSB7XG4gICAgICAgICAgICBzdHIgKz0gb2JqLmlkO1xuICAgICAgICB9XG4gICAgICAgIC8vIGpzb24gZGF0YVxuICAgICAgICBpZiAobnVsbCAhPSBvYmouZGF0YSkge1xuICAgICAgICAgICAgc3RyICs9IEpTT04uc3RyaW5naWZ5KG9iai5kYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBkZWJ1ZyhcImVuY29kZWQgJWogYXMgJXNcIiwgb2JqLCBzdHIpO1xuICAgICAgICByZXR1cm4gc3RyO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFbmNvZGUgcGFja2V0IGFzICdidWZmZXIgc2VxdWVuY2UnIGJ5IHJlbW92aW5nIGJsb2JzLCBhbmRcbiAgICAgKiBkZWNvbnN0cnVjdGluZyBwYWNrZXQgaW50byBvYmplY3Qgd2l0aCBwbGFjZWhvbGRlcnMgYW5kXG4gICAgICogYSBsaXN0IG9mIGJ1ZmZlcnMuXG4gICAgICovXG4gICAgZW5jb2RlQXNCaW5hcnkob2JqKSB7XG4gICAgICAgIGNvbnN0IGRlY29uc3RydWN0aW9uID0gYmluYXJ5XzEuZGVjb25zdHJ1Y3RQYWNrZXQob2JqKTtcbiAgICAgICAgY29uc3QgcGFjayA9IHRoaXMuZW5jb2RlQXNTdHJpbmcoZGVjb25zdHJ1Y3Rpb24ucGFja2V0KTtcbiAgICAgICAgY29uc3QgYnVmZmVycyA9IGRlY29uc3RydWN0aW9uLmJ1ZmZlcnM7XG4gICAgICAgIGJ1ZmZlcnMudW5zaGlmdChwYWNrKTsgLy8gYWRkIHBhY2tldCBpbmZvIHRvIGJlZ2lubmluZyBvZiBkYXRhIGxpc3RcbiAgICAgICAgcmV0dXJuIGJ1ZmZlcnM7IC8vIHdyaXRlIGFsbCB0aGUgYnVmZmVyc1xuICAgIH1cbn1cbmV4cG9ydHMuRW5jb2RlciA9IEVuY29kZXI7XG4vKipcbiAqIEEgc29ja2V0LmlvIERlY29kZXIgaW5zdGFuY2VcbiAqXG4gKiBAcmV0dXJuIHtPYmplY3R9IGRlY29kZXJcbiAqL1xuY2xhc3MgRGVjb2RlciBleHRlbmRzIEVtaXR0ZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWNvZGVzIGFuIGVuY29kZWQgcGFja2V0IHN0cmluZyBpbnRvIHBhY2tldCBKU09OLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG9iaiAtIGVuY29kZWQgcGFja2V0XG4gICAgICovXG4gICAgYWRkKG9iaikge1xuICAgICAgICBsZXQgcGFja2V0O1xuICAgICAgICBpZiAodHlwZW9mIG9iaiA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgcGFja2V0ID0gdGhpcy5kZWNvZGVTdHJpbmcob2JqKTtcbiAgICAgICAgICAgIGlmIChwYWNrZXQudHlwZSA9PT0gUGFja2V0VHlwZS5CSU5BUllfRVZFTlQgfHxcbiAgICAgICAgICAgICAgICBwYWNrZXQudHlwZSA9PT0gUGFja2V0VHlwZS5CSU5BUllfQUNLKSB7XG4gICAgICAgICAgICAgICAgLy8gYmluYXJ5IHBhY2tldCdzIGpzb25cbiAgICAgICAgICAgICAgICB0aGlzLnJlY29uc3RydWN0b3IgPSBuZXcgQmluYXJ5UmVjb25zdHJ1Y3RvcihwYWNrZXQpO1xuICAgICAgICAgICAgICAgIC8vIG5vIGF0dGFjaG1lbnRzLCBsYWJlbGVkIGJpbmFyeSBidXQgbm8gYmluYXJ5IGRhdGEgdG8gZm9sbG93XG4gICAgICAgICAgICAgICAgaWYgKHBhY2tldC5hdHRhY2htZW50cyA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBzdXBlci5lbWl0KFwiZGVjb2RlZFwiLCBwYWNrZXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIG5vbi1iaW5hcnkgZnVsbCBwYWNrZXRcbiAgICAgICAgICAgICAgICBzdXBlci5lbWl0KFwiZGVjb2RlZFwiLCBwYWNrZXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzX2JpbmFyeV8xLmlzQmluYXJ5KG9iaikgfHwgb2JqLmJhc2U2NCkge1xuICAgICAgICAgICAgLy8gcmF3IGJpbmFyeSBkYXRhXG4gICAgICAgICAgICBpZiAoIXRoaXMucmVjb25zdHJ1Y3Rvcikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcImdvdCBiaW5hcnkgZGF0YSB3aGVuIG5vdCByZWNvbnN0cnVjdGluZyBhIHBhY2tldFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHBhY2tldCA9IHRoaXMucmVjb25zdHJ1Y3Rvci50YWtlQmluYXJ5RGF0YShvYmopO1xuICAgICAgICAgICAgICAgIGlmIChwYWNrZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVjZWl2ZWQgZmluYWwgYnVmZmVyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVjb25zdHJ1Y3RvciA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIHN1cGVyLmVtaXQoXCJkZWNvZGVkXCIsIHBhY2tldCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5rbm93biB0eXBlOiBcIiArIG9iaik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVjb2RlIGEgcGFja2V0IFN0cmluZyAoSlNPTiBkYXRhKVxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICAgICAqIEByZXR1cm4ge09iamVjdH0gcGFja2V0XG4gICAgICovXG4gICAgZGVjb2RlU3RyaW5nKHN0cikge1xuICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgIC8vIGxvb2sgdXAgdHlwZVxuICAgICAgICBjb25zdCBwID0ge1xuICAgICAgICAgICAgdHlwZTogTnVtYmVyKHN0ci5jaGFyQXQoMCkpLFxuICAgICAgICB9O1xuICAgICAgICBpZiAoUGFja2V0VHlwZVtwLnR5cGVdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcInVua25vd24gcGFja2V0IHR5cGUgXCIgKyBwLnR5cGUpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGxvb2sgdXAgYXR0YWNobWVudHMgaWYgdHlwZSBiaW5hcnlcbiAgICAgICAgaWYgKHAudHlwZSA9PT0gUGFja2V0VHlwZS5CSU5BUllfRVZFTlQgfHxcbiAgICAgICAgICAgIHAudHlwZSA9PT0gUGFja2V0VHlwZS5CSU5BUllfQUNLKSB7XG4gICAgICAgICAgICBjb25zdCBzdGFydCA9IGkgKyAxO1xuICAgICAgICAgICAgd2hpbGUgKHN0ci5jaGFyQXQoKytpKSAhPT0gXCItXCIgJiYgaSAhPSBzdHIubGVuZ3RoKSB7IH1cbiAgICAgICAgICAgIGNvbnN0IGJ1ZiA9IHN0ci5zdWJzdHJpbmcoc3RhcnQsIGkpO1xuICAgICAgICAgICAgaWYgKGJ1ZiAhPSBOdW1iZXIoYnVmKSB8fCBzdHIuY2hhckF0KGkpICE9PSBcIi1cIikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIklsbGVnYWwgYXR0YWNobWVudHNcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwLmF0dGFjaG1lbnRzID0gTnVtYmVyKGJ1Zik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gbG9vayB1cCBuYW1lc3BhY2UgKGlmIGFueSlcbiAgICAgICAgaWYgKFwiL1wiID09PSBzdHIuY2hhckF0KGkgKyAxKSkge1xuICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSBpICsgMTtcbiAgICAgICAgICAgIHdoaWxlICgrK2kpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjID0gc3RyLmNoYXJBdChpKTtcbiAgICAgICAgICAgICAgICBpZiAoXCIsXCIgPT09IGMpXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGlmIChpID09PSBzdHIubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHAubnNwID0gc3RyLnN1YnN0cmluZyhzdGFydCwgaSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBwLm5zcCA9IFwiL1wiO1xuICAgICAgICB9XG4gICAgICAgIC8vIGxvb2sgdXAgaWRcbiAgICAgICAgY29uc3QgbmV4dCA9IHN0ci5jaGFyQXQoaSArIDEpO1xuICAgICAgICBpZiAoXCJcIiAhPT0gbmV4dCAmJiBOdW1iZXIobmV4dCkgPT0gbmV4dCkge1xuICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSBpICsgMTtcbiAgICAgICAgICAgIHdoaWxlICgrK2kpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjID0gc3RyLmNoYXJBdChpKTtcbiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSBjIHx8IE51bWJlcihjKSAhPSBjKSB7XG4gICAgICAgICAgICAgICAgICAgIC0taTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChpID09PSBzdHIubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHAuaWQgPSBOdW1iZXIoc3RyLnN1YnN0cmluZyhzdGFydCwgaSArIDEpKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBsb29rIHVwIGpzb24gZGF0YVxuICAgICAgICBpZiAoc3RyLmNoYXJBdCgrK2kpKSB7XG4gICAgICAgICAgICBjb25zdCBwYXlsb2FkID0gdHJ5UGFyc2Uoc3RyLnN1YnN0cihpKSk7XG4gICAgICAgICAgICBpZiAoRGVjb2Rlci5pc1BheWxvYWRWYWxpZChwLnR5cGUsIHBheWxvYWQpKSB7XG4gICAgICAgICAgICAgICAgcC5kYXRhID0gcGF5bG9hZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcImludmFsaWQgcGF5bG9hZFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBkZWJ1ZyhcImRlY29kZWQgJXMgYXMgJWpcIiwgc3RyLCBwKTtcbiAgICAgICAgcmV0dXJuIHA7XG4gICAgfVxuICAgIHN0YXRpYyBpc1BheWxvYWRWYWxpZCh0eXBlLCBwYXlsb2FkKSB7XG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgY2FzZSBQYWNrZXRUeXBlLkNPTk5FQ1Q6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBwYXlsb2FkID09PSBcIm9iamVjdFwiO1xuICAgICAgICAgICAgY2FzZSBQYWNrZXRUeXBlLkRJU0NPTk5FQ1Q6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBheWxvYWQgPT09IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGNhc2UgUGFja2V0VHlwZS5DT05ORUNUX0VSUk9SOlxuICAgICAgICAgICAgICAgIHJldHVybiB0eXBlb2YgcGF5bG9hZCA9PT0gXCJzdHJpbmdcIiB8fCB0eXBlb2YgcGF5bG9hZCA9PT0gXCJvYmplY3RcIjtcbiAgICAgICAgICAgIGNhc2UgUGFja2V0VHlwZS5FVkVOVDpcbiAgICAgICAgICAgIGNhc2UgUGFja2V0VHlwZS5CSU5BUllfRVZFTlQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkocGF5bG9hZCkgJiYgcGF5bG9hZC5sZW5ndGggPiAwO1xuICAgICAgICAgICAgY2FzZSBQYWNrZXRUeXBlLkFDSzpcbiAgICAgICAgICAgIGNhc2UgUGFja2V0VHlwZS5CSU5BUllfQUNLOlxuICAgICAgICAgICAgICAgIHJldHVybiBBcnJheS5pc0FycmF5KHBheWxvYWQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlYWxsb2NhdGVzIGEgcGFyc2VyJ3MgcmVzb3VyY2VzXG4gICAgICovXG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgaWYgKHRoaXMucmVjb25zdHJ1Y3Rvcikge1xuICAgICAgICAgICAgdGhpcy5yZWNvbnN0cnVjdG9yLmZpbmlzaGVkUmVjb25zdHJ1Y3Rpb24oKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydHMuRGVjb2RlciA9IERlY29kZXI7XG5mdW5jdGlvbiB0cnlQYXJzZShzdHIpIHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShzdHIpO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuLyoqXG4gKiBBIG1hbmFnZXIgb2YgYSBiaW5hcnkgZXZlbnQncyAnYnVmZmVyIHNlcXVlbmNlJy4gU2hvdWxkXG4gKiBiZSBjb25zdHJ1Y3RlZCB3aGVuZXZlciBhIHBhY2tldCBvZiB0eXBlIEJJTkFSWV9FVkVOVCBpc1xuICogZGVjb2RlZC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcGFja2V0XG4gKiBAcmV0dXJuIHtCaW5hcnlSZWNvbnN0cnVjdG9yfSBpbml0aWFsaXplZCByZWNvbnN0cnVjdG9yXG4gKi9cbmNsYXNzIEJpbmFyeVJlY29uc3RydWN0b3Ige1xuICAgIGNvbnN0cnVjdG9yKHBhY2tldCkge1xuICAgICAgICB0aGlzLnBhY2tldCA9IHBhY2tldDtcbiAgICAgICAgdGhpcy5idWZmZXJzID0gW107XG4gICAgICAgIHRoaXMucmVjb25QYWNrID0gcGFja2V0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNZXRob2QgdG8gYmUgY2FsbGVkIHdoZW4gYmluYXJ5IGRhdGEgcmVjZWl2ZWQgZnJvbSBjb25uZWN0aW9uXG4gICAgICogYWZ0ZXIgYSBCSU5BUllfRVZFTlQgcGFja2V0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtCdWZmZXIgfCBBcnJheUJ1ZmZlcn0gYmluRGF0YSAtIHRoZSByYXcgYmluYXJ5IGRhdGEgcmVjZWl2ZWRcbiAgICAgKiBAcmV0dXJuIHtudWxsIHwgT2JqZWN0fSByZXR1cm5zIG51bGwgaWYgbW9yZSBiaW5hcnkgZGF0YSBpcyBleHBlY3RlZCBvclxuICAgICAqICAgYSByZWNvbnN0cnVjdGVkIHBhY2tldCBvYmplY3QgaWYgYWxsIGJ1ZmZlcnMgaGF2ZSBiZWVuIHJlY2VpdmVkLlxuICAgICAqL1xuICAgIHRha2VCaW5hcnlEYXRhKGJpbkRhdGEpIHtcbiAgICAgICAgdGhpcy5idWZmZXJzLnB1c2goYmluRGF0YSk7XG4gICAgICAgIGlmICh0aGlzLmJ1ZmZlcnMubGVuZ3RoID09PSB0aGlzLnJlY29uUGFjay5hdHRhY2htZW50cykge1xuICAgICAgICAgICAgLy8gZG9uZSB3aXRoIGJ1ZmZlciBsaXN0XG4gICAgICAgICAgICBjb25zdCBwYWNrZXQgPSBiaW5hcnlfMS5yZWNvbnN0cnVjdFBhY2tldCh0aGlzLnJlY29uUGFjaywgdGhpcy5idWZmZXJzKTtcbiAgICAgICAgICAgIHRoaXMuZmluaXNoZWRSZWNvbnN0cnVjdGlvbigpO1xuICAgICAgICAgICAgcmV0dXJuIHBhY2tldDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xlYW5zIHVwIGJpbmFyeSBwYWNrZXQgcmVjb25zdHJ1Y3Rpb24gdmFyaWFibGVzLlxuICAgICAqL1xuICAgIGZpbmlzaGVkUmVjb25zdHJ1Y3Rpb24oKSB7XG4gICAgICAgIHRoaXMucmVjb25QYWNrID0gbnVsbDtcbiAgICAgICAgdGhpcy5idWZmZXJzID0gW107XG4gICAgfVxufVxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmhhc0JpbmFyeSA9IGV4cG9ydHMuaXNCaW5hcnkgPSB2b2lkIDA7XG5jb25zdCB3aXRoTmF0aXZlQXJyYXlCdWZmZXIgPSB0eXBlb2YgQXJyYXlCdWZmZXIgPT09IFwiZnVuY3Rpb25cIjtcbmNvbnN0IGlzVmlldyA9IChvYmopID0+IHtcbiAgICByZXR1cm4gdHlwZW9mIEFycmF5QnVmZmVyLmlzVmlldyA9PT0gXCJmdW5jdGlvblwiXG4gICAgICAgID8gQXJyYXlCdWZmZXIuaXNWaWV3KG9iailcbiAgICAgICAgOiBvYmouYnVmZmVyIGluc3RhbmNlb2YgQXJyYXlCdWZmZXI7XG59O1xuY29uc3QgdG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuY29uc3Qgd2l0aE5hdGl2ZUJsb2IgPSB0eXBlb2YgQmxvYiA9PT0gXCJmdW5jdGlvblwiIHx8XG4gICAgKHR5cGVvZiBCbG9iICE9PSBcInVuZGVmaW5lZFwiICYmXG4gICAgICAgIHRvU3RyaW5nLmNhbGwoQmxvYikgPT09IFwiW29iamVjdCBCbG9iQ29uc3RydWN0b3JdXCIpO1xuY29uc3Qgd2l0aE5hdGl2ZUZpbGUgPSB0eXBlb2YgRmlsZSA9PT0gXCJmdW5jdGlvblwiIHx8XG4gICAgKHR5cGVvZiBGaWxlICE9PSBcInVuZGVmaW5lZFwiICYmXG4gICAgICAgIHRvU3RyaW5nLmNhbGwoRmlsZSkgPT09IFwiW29iamVjdCBGaWxlQ29uc3RydWN0b3JdXCIpO1xuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgb2JqIGlzIGEgQnVmZmVyLCBhbiBBcnJheUJ1ZmZlciwgYSBCbG9iIG9yIGEgRmlsZS5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBpc0JpbmFyeShvYmopIHtcbiAgICByZXR1cm4gKCh3aXRoTmF0aXZlQXJyYXlCdWZmZXIgJiYgKG9iaiBpbnN0YW5jZW9mIEFycmF5QnVmZmVyIHx8IGlzVmlldyhvYmopKSkgfHxcbiAgICAgICAgKHdpdGhOYXRpdmVCbG9iICYmIG9iaiBpbnN0YW5jZW9mIEJsb2IpIHx8XG4gICAgICAgICh3aXRoTmF0aXZlRmlsZSAmJiBvYmogaW5zdGFuY2VvZiBGaWxlKSk7XG59XG5leHBvcnRzLmlzQmluYXJ5ID0gaXNCaW5hcnk7XG5mdW5jdGlvbiBoYXNCaW5hcnkob2JqLCB0b0pTT04pIHtcbiAgICBpZiAoIW9iaiB8fCB0eXBlb2Ygb2JqICE9PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKEFycmF5LmlzQXJyYXkob2JqKSkge1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgbCA9IG9iai5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChoYXNCaW5hcnkob2JqW2ldKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKGlzQmluYXJ5KG9iaikpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmIChvYmoudG9KU09OICYmXG4gICAgICAgIHR5cGVvZiBvYmoudG9KU09OID09PSBcImZ1bmN0aW9uXCIgJiZcbiAgICAgICAgYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICByZXR1cm4gaGFzQmluYXJ5KG9iai50b0pTT04oKSwgdHJ1ZSk7XG4gICAgfVxuICAgIGZvciAoY29uc3Qga2V5IGluIG9iaikge1xuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSAmJiBoYXNCaW5hcnkob2JqW2tleV0pKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5leHBvcnRzLmhhc0JpbmFyeSA9IGhhc0JpbmFyeTtcbiIsIi8qIGVzbGludC1lbnYgYnJvd3NlciAqL1xuXG4vKipcbiAqIFRoaXMgaXMgdGhlIHdlYiBicm93c2VyIGltcGxlbWVudGF0aW9uIG9mIGBkZWJ1ZygpYC5cbiAqL1xuXG5leHBvcnRzLmZvcm1hdEFyZ3MgPSBmb3JtYXRBcmdzO1xuZXhwb3J0cy5zYXZlID0gc2F2ZTtcbmV4cG9ydHMubG9hZCA9IGxvYWQ7XG5leHBvcnRzLnVzZUNvbG9ycyA9IHVzZUNvbG9ycztcbmV4cG9ydHMuc3RvcmFnZSA9IGxvY2Fsc3RvcmFnZSgpO1xuZXhwb3J0cy5kZXN0cm95ID0gKCgpID0+IHtcblx0bGV0IHdhcm5lZCA9IGZhbHNlO1xuXG5cdHJldHVybiAoKSA9PiB7XG5cdFx0aWYgKCF3YXJuZWQpIHtcblx0XHRcdHdhcm5lZCA9IHRydWU7XG5cdFx0XHRjb25zb2xlLndhcm4oJ0luc3RhbmNlIG1ldGhvZCBgZGVidWcuZGVzdHJveSgpYCBpcyBkZXByZWNhdGVkIGFuZCBubyBsb25nZXIgZG9lcyBhbnl0aGluZy4gSXQgd2lsbCBiZSByZW1vdmVkIGluIHRoZSBuZXh0IG1ham9yIHZlcnNpb24gb2YgYGRlYnVnYC4nKTtcblx0XHR9XG5cdH07XG59KSgpO1xuXG4vKipcbiAqIENvbG9ycy5cbiAqL1xuXG5leHBvcnRzLmNvbG9ycyA9IFtcblx0JyMwMDAwQ0MnLFxuXHQnIzAwMDBGRicsXG5cdCcjMDAzM0NDJyxcblx0JyMwMDMzRkYnLFxuXHQnIzAwNjZDQycsXG5cdCcjMDA2NkZGJyxcblx0JyMwMDk5Q0MnLFxuXHQnIzAwOTlGRicsXG5cdCcjMDBDQzAwJyxcblx0JyMwMENDMzMnLFxuXHQnIzAwQ0M2NicsXG5cdCcjMDBDQzk5Jyxcblx0JyMwMENDQ0MnLFxuXHQnIzAwQ0NGRicsXG5cdCcjMzMwMENDJyxcblx0JyMzMzAwRkYnLFxuXHQnIzMzMzNDQycsXG5cdCcjMzMzM0ZGJyxcblx0JyMzMzY2Q0MnLFxuXHQnIzMzNjZGRicsXG5cdCcjMzM5OUNDJyxcblx0JyMzMzk5RkYnLFxuXHQnIzMzQ0MwMCcsXG5cdCcjMzNDQzMzJyxcblx0JyMzM0NDNjYnLFxuXHQnIzMzQ0M5OScsXG5cdCcjMzNDQ0NDJyxcblx0JyMzM0NDRkYnLFxuXHQnIzY2MDBDQycsXG5cdCcjNjYwMEZGJyxcblx0JyM2NjMzQ0MnLFxuXHQnIzY2MzNGRicsXG5cdCcjNjZDQzAwJyxcblx0JyM2NkNDMzMnLFxuXHQnIzk5MDBDQycsXG5cdCcjOTkwMEZGJyxcblx0JyM5OTMzQ0MnLFxuXHQnIzk5MzNGRicsXG5cdCcjOTlDQzAwJyxcblx0JyM5OUNDMzMnLFxuXHQnI0NDMDAwMCcsXG5cdCcjQ0MwMDMzJyxcblx0JyNDQzAwNjYnLFxuXHQnI0NDMDA5OScsXG5cdCcjQ0MwMENDJyxcblx0JyNDQzAwRkYnLFxuXHQnI0NDMzMwMCcsXG5cdCcjQ0MzMzMzJyxcblx0JyNDQzMzNjYnLFxuXHQnI0NDMzM5OScsXG5cdCcjQ0MzM0NDJyxcblx0JyNDQzMzRkYnLFxuXHQnI0NDNjYwMCcsXG5cdCcjQ0M2NjMzJyxcblx0JyNDQzk5MDAnLFxuXHQnI0NDOTkzMycsXG5cdCcjQ0NDQzAwJyxcblx0JyNDQ0NDMzMnLFxuXHQnI0ZGMDAwMCcsXG5cdCcjRkYwMDMzJyxcblx0JyNGRjAwNjYnLFxuXHQnI0ZGMDA5OScsXG5cdCcjRkYwMENDJyxcblx0JyNGRjAwRkYnLFxuXHQnI0ZGMzMwMCcsXG5cdCcjRkYzMzMzJyxcblx0JyNGRjMzNjYnLFxuXHQnI0ZGMzM5OScsXG5cdCcjRkYzM0NDJyxcblx0JyNGRjMzRkYnLFxuXHQnI0ZGNjYwMCcsXG5cdCcjRkY2NjMzJyxcblx0JyNGRjk5MDAnLFxuXHQnI0ZGOTkzMycsXG5cdCcjRkZDQzAwJyxcblx0JyNGRkNDMzMnXG5dO1xuXG4vKipcbiAqIEN1cnJlbnRseSBvbmx5IFdlYktpdC1iYXNlZCBXZWIgSW5zcGVjdG9ycywgRmlyZWZveCA+PSB2MzEsXG4gKiBhbmQgdGhlIEZpcmVidWcgZXh0ZW5zaW9uIChhbnkgRmlyZWZveCB2ZXJzaW9uKSBhcmUga25vd25cbiAqIHRvIHN1cHBvcnQgXCIlY1wiIENTUyBjdXN0b21pemF0aW9ucy5cbiAqXG4gKiBUT0RPOiBhZGQgYSBgbG9jYWxTdG9yYWdlYCB2YXJpYWJsZSB0byBleHBsaWNpdGx5IGVuYWJsZS9kaXNhYmxlIGNvbG9yc1xuICovXG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjb21wbGV4aXR5XG5mdW5jdGlvbiB1c2VDb2xvcnMoKSB7XG5cdC8vIE5COiBJbiBhbiBFbGVjdHJvbiBwcmVsb2FkIHNjcmlwdCwgZG9jdW1lbnQgd2lsbCBiZSBkZWZpbmVkIGJ1dCBub3QgZnVsbHlcblx0Ly8gaW5pdGlhbGl6ZWQuIFNpbmNlIHdlIGtub3cgd2UncmUgaW4gQ2hyb21lLCB3ZSdsbCBqdXN0IGRldGVjdCB0aGlzIGNhc2Vcblx0Ly8gZXhwbGljaXRseVxuXHRpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LnByb2Nlc3MgJiYgKHdpbmRvdy5wcm9jZXNzLnR5cGUgPT09ICdyZW5kZXJlcicgfHwgd2luZG93LnByb2Nlc3MuX19ud2pzKSkge1xuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cblx0Ly8gSW50ZXJuZXQgRXhwbG9yZXIgYW5kIEVkZ2UgZG8gbm90IHN1cHBvcnQgY29sb3JzLlxuXHRpZiAodHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudCAmJiBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkubWF0Y2goLyhlZGdlfHRyaWRlbnQpXFwvKFxcZCspLykpIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHQvLyBJcyB3ZWJraXQ/IGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzE2NDU5NjA2LzM3Njc3M1xuXHQvLyBkb2N1bWVudCBpcyB1bmRlZmluZWQgaW4gcmVhY3QtbmF0aXZlOiBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVhY3QtbmF0aXZlL3B1bGwvMTYzMlxuXHRyZXR1cm4gKHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50ICYmIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZSAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUuV2Via2l0QXBwZWFyYW5jZSkgfHxcblx0XHQvLyBJcyBmaXJlYnVnPyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8zOTgxMjAvMzc2NzczXG5cdFx0KHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5jb25zb2xlICYmICh3aW5kb3cuY29uc29sZS5maXJlYnVnIHx8ICh3aW5kb3cuY29uc29sZS5leGNlcHRpb24gJiYgd2luZG93LmNvbnNvbGUudGFibGUpKSkgfHxcblx0XHQvLyBJcyBmaXJlZm94ID49IHYzMT9cblx0XHQvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1Rvb2xzL1dlYl9Db25zb2xlI1N0eWxpbmdfbWVzc2FnZXNcblx0XHQodHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudCAmJiBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkubWF0Y2goL2ZpcmVmb3hcXC8oXFxkKykvKSAmJiBwYXJzZUludChSZWdFeHAuJDEsIDEwKSA+PSAzMSkgfHxcblx0XHQvLyBEb3VibGUgY2hlY2sgd2Via2l0IGluIHVzZXJBZ2VudCBqdXN0IGluIGNhc2Ugd2UgYXJlIGluIGEgd29ya2VyXG5cdFx0KHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmIG5hdmlnYXRvci51c2VyQWdlbnQgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLm1hdGNoKC9hcHBsZXdlYmtpdFxcLyhcXGQrKS8pKTtcbn1cblxuLyoqXG4gKiBDb2xvcml6ZSBsb2cgYXJndW1lbnRzIGlmIGVuYWJsZWQuXG4gKlxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5mdW5jdGlvbiBmb3JtYXRBcmdzKGFyZ3MpIHtcblx0YXJnc1swXSA9ICh0aGlzLnVzZUNvbG9ycyA/ICclYycgOiAnJykgK1xuXHRcdHRoaXMubmFtZXNwYWNlICtcblx0XHQodGhpcy51c2VDb2xvcnMgPyAnICVjJyA6ICcgJykgK1xuXHRcdGFyZ3NbMF0gK1xuXHRcdCh0aGlzLnVzZUNvbG9ycyA/ICclYyAnIDogJyAnKSArXG5cdFx0JysnICsgbW9kdWxlLmV4cG9ydHMuaHVtYW5pemUodGhpcy5kaWZmKTtcblxuXHRpZiAoIXRoaXMudXNlQ29sb3JzKSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0Y29uc3QgYyA9ICdjb2xvcjogJyArIHRoaXMuY29sb3I7XG5cdGFyZ3Muc3BsaWNlKDEsIDAsIGMsICdjb2xvcjogaW5oZXJpdCcpO1xuXG5cdC8vIFRoZSBmaW5hbCBcIiVjXCIgaXMgc29tZXdoYXQgdHJpY2t5LCBiZWNhdXNlIHRoZXJlIGNvdWxkIGJlIG90aGVyXG5cdC8vIGFyZ3VtZW50cyBwYXNzZWQgZWl0aGVyIGJlZm9yZSBvciBhZnRlciB0aGUgJWMsIHNvIHdlIG5lZWQgdG9cblx0Ly8gZmlndXJlIG91dCB0aGUgY29ycmVjdCBpbmRleCB0byBpbnNlcnQgdGhlIENTUyBpbnRvXG5cdGxldCBpbmRleCA9IDA7XG5cdGxldCBsYXN0QyA9IDA7XG5cdGFyZ3NbMF0ucmVwbGFjZSgvJVthLXpBLVolXS9nLCBtYXRjaCA9PiB7XG5cdFx0aWYgKG1hdGNoID09PSAnJSUnKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdGluZGV4Kys7XG5cdFx0aWYgKG1hdGNoID09PSAnJWMnKSB7XG5cdFx0XHQvLyBXZSBvbmx5IGFyZSBpbnRlcmVzdGVkIGluIHRoZSAqbGFzdCogJWNcblx0XHRcdC8vICh0aGUgdXNlciBtYXkgaGF2ZSBwcm92aWRlZCB0aGVpciBvd24pXG5cdFx0XHRsYXN0QyA9IGluZGV4O1xuXHRcdH1cblx0fSk7XG5cblx0YXJncy5zcGxpY2UobGFzdEMsIDAsIGMpO1xufVxuXG4vKipcbiAqIEludm9rZXMgYGNvbnNvbGUuZGVidWcoKWAgd2hlbiBhdmFpbGFibGUuXG4gKiBOby1vcCB3aGVuIGBjb25zb2xlLmRlYnVnYCBpcyBub3QgYSBcImZ1bmN0aW9uXCIuXG4gKiBJZiBgY29uc29sZS5kZWJ1Z2AgaXMgbm90IGF2YWlsYWJsZSwgZmFsbHMgYmFja1xuICogdG8gYGNvbnNvbGUubG9nYC5cbiAqXG4gKiBAYXBpIHB1YmxpY1xuICovXG5leHBvcnRzLmxvZyA9IGNvbnNvbGUuZGVidWcgfHwgY29uc29sZS5sb2cgfHwgKCgpID0+IHt9KTtcblxuLyoqXG4gKiBTYXZlIGBuYW1lc3BhY2VzYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZXNwYWNlc1xuICogQGFwaSBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHNhdmUobmFtZXNwYWNlcykge1xuXHR0cnkge1xuXHRcdGlmIChuYW1lc3BhY2VzKSB7XG5cdFx0XHRleHBvcnRzLnN0b3JhZ2Uuc2V0SXRlbSgnZGVidWcnLCBuYW1lc3BhY2VzKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0ZXhwb3J0cy5zdG9yYWdlLnJlbW92ZUl0ZW0oJ2RlYnVnJyk7XG5cdFx0fVxuXHR9IGNhdGNoIChlcnJvcikge1xuXHRcdC8vIFN3YWxsb3dcblx0XHQvLyBYWFggKEBRaXgtKSBzaG91bGQgd2UgYmUgbG9nZ2luZyB0aGVzZT9cblx0fVxufVxuXG4vKipcbiAqIExvYWQgYG5hbWVzcGFjZXNgLlxuICpcbiAqIEByZXR1cm4ge1N0cmluZ30gcmV0dXJucyB0aGUgcHJldmlvdXNseSBwZXJzaXN0ZWQgZGVidWcgbW9kZXNcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBsb2FkKCkge1xuXHRsZXQgcjtcblx0dHJ5IHtcblx0XHRyID0gZXhwb3J0cy5zdG9yYWdlLmdldEl0ZW0oJ2RlYnVnJyk7XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0Ly8gU3dhbGxvd1xuXHRcdC8vIFhYWCAoQFFpeC0pIHNob3VsZCB3ZSBiZSBsb2dnaW5nIHRoZXNlP1xuXHR9XG5cblx0Ly8gSWYgZGVidWcgaXNuJ3Qgc2V0IGluIExTLCBhbmQgd2UncmUgaW4gRWxlY3Ryb24sIHRyeSB0byBsb2FkICRERUJVR1xuXHRpZiAoIXIgJiYgdHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmICdlbnYnIGluIHByb2Nlc3MpIHtcblx0XHRyID0gcHJvY2Vzcy5lbnYuREVCVUc7XG5cdH1cblxuXHRyZXR1cm4gcjtcbn1cblxuLyoqXG4gKiBMb2NhbHN0b3JhZ2UgYXR0ZW1wdHMgdG8gcmV0dXJuIHRoZSBsb2NhbHN0b3JhZ2UuXG4gKlxuICogVGhpcyBpcyBuZWNlc3NhcnkgYmVjYXVzZSBzYWZhcmkgdGhyb3dzXG4gKiB3aGVuIGEgdXNlciBkaXNhYmxlcyBjb29raWVzL2xvY2Fsc3RvcmFnZVxuICogYW5kIHlvdSBhdHRlbXB0IHRvIGFjY2VzcyBpdC5cbiAqXG4gKiBAcmV0dXJuIHtMb2NhbFN0b3JhZ2V9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBsb2NhbHN0b3JhZ2UoKSB7XG5cdHRyeSB7XG5cdFx0Ly8gVFZNTEtpdCAoQXBwbGUgVFYgSlMgUnVudGltZSkgZG9lcyBub3QgaGF2ZSBhIHdpbmRvdyBvYmplY3QsIGp1c3QgbG9jYWxTdG9yYWdlIGluIHRoZSBnbG9iYWwgY29udGV4dFxuXHRcdC8vIFRoZSBCcm93c2VyIGFsc28gaGFzIGxvY2FsU3RvcmFnZSBpbiB0aGUgZ2xvYmFsIGNvbnRleHQuXG5cdFx0cmV0dXJuIGxvY2FsU3RvcmFnZTtcblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHQvLyBTd2FsbG93XG5cdFx0Ly8gWFhYIChAUWl4LSkgc2hvdWxkIHdlIGJlIGxvZ2dpbmcgdGhlc2U/XG5cdH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2NvbW1vbicpKGV4cG9ydHMpO1xuXG5jb25zdCB7Zm9ybWF0dGVyc30gPSBtb2R1bGUuZXhwb3J0cztcblxuLyoqXG4gKiBNYXAgJWogdG8gYEpTT04uc3RyaW5naWZ5KClgLCBzaW5jZSBubyBXZWIgSW5zcGVjdG9ycyBkbyB0aGF0IGJ5IGRlZmF1bHQuXG4gKi9cblxuZm9ybWF0dGVycy5qID0gZnVuY3Rpb24gKHYpIHtcblx0dHJ5IHtcblx0XHRyZXR1cm4gSlNPTi5zdHJpbmdpZnkodik7XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0cmV0dXJuICdbVW5leHBlY3RlZEpTT05QYXJzZUVycm9yXTogJyArIGVycm9yLm1lc3NhZ2U7XG5cdH1cbn07XG4iLCJcbi8qKlxuICogVGhpcyBpcyB0aGUgY29tbW9uIGxvZ2ljIGZvciBib3RoIHRoZSBOb2RlLmpzIGFuZCB3ZWIgYnJvd3NlclxuICogaW1wbGVtZW50YXRpb25zIG9mIGBkZWJ1ZygpYC5cbiAqL1xuXG5mdW5jdGlvbiBzZXR1cChlbnYpIHtcblx0Y3JlYXRlRGVidWcuZGVidWcgPSBjcmVhdGVEZWJ1Zztcblx0Y3JlYXRlRGVidWcuZGVmYXVsdCA9IGNyZWF0ZURlYnVnO1xuXHRjcmVhdGVEZWJ1Zy5jb2VyY2UgPSBjb2VyY2U7XG5cdGNyZWF0ZURlYnVnLmRpc2FibGUgPSBkaXNhYmxlO1xuXHRjcmVhdGVEZWJ1Zy5lbmFibGUgPSBlbmFibGU7XG5cdGNyZWF0ZURlYnVnLmVuYWJsZWQgPSBlbmFibGVkO1xuXHRjcmVhdGVEZWJ1Zy5odW1hbml6ZSA9IHJlcXVpcmUoJ21zJyk7XG5cdGNyZWF0ZURlYnVnLmRlc3Ryb3kgPSBkZXN0cm95O1xuXG5cdE9iamVjdC5rZXlzKGVudikuZm9yRWFjaChrZXkgPT4ge1xuXHRcdGNyZWF0ZURlYnVnW2tleV0gPSBlbnZba2V5XTtcblx0fSk7XG5cblx0LyoqXG5cdCogVGhlIGN1cnJlbnRseSBhY3RpdmUgZGVidWcgbW9kZSBuYW1lcywgYW5kIG5hbWVzIHRvIHNraXAuXG5cdCovXG5cblx0Y3JlYXRlRGVidWcubmFtZXMgPSBbXTtcblx0Y3JlYXRlRGVidWcuc2tpcHMgPSBbXTtcblxuXHQvKipcblx0KiBNYXAgb2Ygc3BlY2lhbCBcIiVuXCIgaGFuZGxpbmcgZnVuY3Rpb25zLCBmb3IgdGhlIGRlYnVnIFwiZm9ybWF0XCIgYXJndW1lbnQuXG5cdCpcblx0KiBWYWxpZCBrZXkgbmFtZXMgYXJlIGEgc2luZ2xlLCBsb3dlciBvciB1cHBlci1jYXNlIGxldHRlciwgaS5lLiBcIm5cIiBhbmQgXCJOXCIuXG5cdCovXG5cdGNyZWF0ZURlYnVnLmZvcm1hdHRlcnMgPSB7fTtcblxuXHQvKipcblx0KiBTZWxlY3RzIGEgY29sb3IgZm9yIGEgZGVidWcgbmFtZXNwYWNlXG5cdCogQHBhcmFtIHtTdHJpbmd9IG5hbWVzcGFjZSBUaGUgbmFtZXNwYWNlIHN0cmluZyBmb3IgdGhlIGZvciB0aGUgZGVidWcgaW5zdGFuY2UgdG8gYmUgY29sb3JlZFxuXHQqIEByZXR1cm4ge051bWJlcnxTdHJpbmd9IEFuIEFOU0kgY29sb3IgY29kZSBmb3IgdGhlIGdpdmVuIG5hbWVzcGFjZVxuXHQqIEBhcGkgcHJpdmF0ZVxuXHQqL1xuXHRmdW5jdGlvbiBzZWxlY3RDb2xvcihuYW1lc3BhY2UpIHtcblx0XHRsZXQgaGFzaCA9IDA7XG5cblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IG5hbWVzcGFjZS5sZW5ndGg7IGkrKykge1xuXHRcdFx0aGFzaCA9ICgoaGFzaCA8PCA1KSAtIGhhc2gpICsgbmFtZXNwYWNlLmNoYXJDb2RlQXQoaSk7XG5cdFx0XHRoYXNoIHw9IDA7IC8vIENvbnZlcnQgdG8gMzJiaXQgaW50ZWdlclxuXHRcdH1cblxuXHRcdHJldHVybiBjcmVhdGVEZWJ1Zy5jb2xvcnNbTWF0aC5hYnMoaGFzaCkgJSBjcmVhdGVEZWJ1Zy5jb2xvcnMubGVuZ3RoXTtcblx0fVxuXHRjcmVhdGVEZWJ1Zy5zZWxlY3RDb2xvciA9IHNlbGVjdENvbG9yO1xuXG5cdC8qKlxuXHQqIENyZWF0ZSBhIGRlYnVnZ2VyIHdpdGggdGhlIGdpdmVuIGBuYW1lc3BhY2VgLlxuXHQqXG5cdCogQHBhcmFtIHtTdHJpbmd9IG5hbWVzcGFjZVxuXHQqIEByZXR1cm4ge0Z1bmN0aW9ufVxuXHQqIEBhcGkgcHVibGljXG5cdCovXG5cdGZ1bmN0aW9uIGNyZWF0ZURlYnVnKG5hbWVzcGFjZSkge1xuXHRcdGxldCBwcmV2VGltZTtcblx0XHRsZXQgZW5hYmxlT3ZlcnJpZGUgPSBudWxsO1xuXG5cdFx0ZnVuY3Rpb24gZGVidWcoLi4uYXJncykge1xuXHRcdFx0Ly8gRGlzYWJsZWQ/XG5cdFx0XHRpZiAoIWRlYnVnLmVuYWJsZWQpIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHRjb25zdCBzZWxmID0gZGVidWc7XG5cblx0XHRcdC8vIFNldCBgZGlmZmAgdGltZXN0YW1wXG5cdFx0XHRjb25zdCBjdXJyID0gTnVtYmVyKG5ldyBEYXRlKCkpO1xuXHRcdFx0Y29uc3QgbXMgPSBjdXJyIC0gKHByZXZUaW1lIHx8IGN1cnIpO1xuXHRcdFx0c2VsZi5kaWZmID0gbXM7XG5cdFx0XHRzZWxmLnByZXYgPSBwcmV2VGltZTtcblx0XHRcdHNlbGYuY3VyciA9IGN1cnI7XG5cdFx0XHRwcmV2VGltZSA9IGN1cnI7XG5cblx0XHRcdGFyZ3NbMF0gPSBjcmVhdGVEZWJ1Zy5jb2VyY2UoYXJnc1swXSk7XG5cblx0XHRcdGlmICh0eXBlb2YgYXJnc1swXSAhPT0gJ3N0cmluZycpIHtcblx0XHRcdFx0Ly8gQW55dGhpbmcgZWxzZSBsZXQncyBpbnNwZWN0IHdpdGggJU9cblx0XHRcdFx0YXJncy51bnNoaWZ0KCclTycpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBBcHBseSBhbnkgYGZvcm1hdHRlcnNgIHRyYW5zZm9ybWF0aW9uc1xuXHRcdFx0bGV0IGluZGV4ID0gMDtcblx0XHRcdGFyZ3NbMF0gPSBhcmdzWzBdLnJlcGxhY2UoLyUoW2EtekEtWiVdKS9nLCAobWF0Y2gsIGZvcm1hdCkgPT4ge1xuXHRcdFx0XHQvLyBJZiB3ZSBlbmNvdW50ZXIgYW4gZXNjYXBlZCAlIHRoZW4gZG9uJ3QgaW5jcmVhc2UgdGhlIGFycmF5IGluZGV4XG5cdFx0XHRcdGlmIChtYXRjaCA9PT0gJyUlJykge1xuXHRcdFx0XHRcdHJldHVybiAnJSc7XG5cdFx0XHRcdH1cblx0XHRcdFx0aW5kZXgrKztcblx0XHRcdFx0Y29uc3QgZm9ybWF0dGVyID0gY3JlYXRlRGVidWcuZm9ybWF0dGVyc1tmb3JtYXRdO1xuXHRcdFx0XHRpZiAodHlwZW9mIGZvcm1hdHRlciA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0XHRcdGNvbnN0IHZhbCA9IGFyZ3NbaW5kZXhdO1xuXHRcdFx0XHRcdG1hdGNoID0gZm9ybWF0dGVyLmNhbGwoc2VsZiwgdmFsKTtcblxuXHRcdFx0XHRcdC8vIE5vdyB3ZSBuZWVkIHRvIHJlbW92ZSBgYXJnc1tpbmRleF1gIHNpbmNlIGl0J3MgaW5saW5lZCBpbiB0aGUgYGZvcm1hdGBcblx0XHRcdFx0XHRhcmdzLnNwbGljZShpbmRleCwgMSk7XG5cdFx0XHRcdFx0aW5kZXgtLTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gbWF0Y2g7XG5cdFx0XHR9KTtcblxuXHRcdFx0Ly8gQXBwbHkgZW52LXNwZWNpZmljIGZvcm1hdHRpbmcgKGNvbG9ycywgZXRjLilcblx0XHRcdGNyZWF0ZURlYnVnLmZvcm1hdEFyZ3MuY2FsbChzZWxmLCBhcmdzKTtcblxuXHRcdFx0Y29uc3QgbG9nRm4gPSBzZWxmLmxvZyB8fCBjcmVhdGVEZWJ1Zy5sb2c7XG5cdFx0XHRsb2dGbi5hcHBseShzZWxmLCBhcmdzKTtcblx0XHR9XG5cblx0XHRkZWJ1Zy5uYW1lc3BhY2UgPSBuYW1lc3BhY2U7XG5cdFx0ZGVidWcudXNlQ29sb3JzID0gY3JlYXRlRGVidWcudXNlQ29sb3JzKCk7XG5cdFx0ZGVidWcuY29sb3IgPSBjcmVhdGVEZWJ1Zy5zZWxlY3RDb2xvcihuYW1lc3BhY2UpO1xuXHRcdGRlYnVnLmV4dGVuZCA9IGV4dGVuZDtcblx0XHRkZWJ1Zy5kZXN0cm95ID0gY3JlYXRlRGVidWcuZGVzdHJveTsgLy8gWFhYIFRlbXBvcmFyeS4gV2lsbCBiZSByZW1vdmVkIGluIHRoZSBuZXh0IG1ham9yIHJlbGVhc2UuXG5cblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZGVidWcsICdlbmFibGVkJywge1xuXHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcblx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG5cdFx0XHRnZXQ6ICgpID0+IGVuYWJsZU92ZXJyaWRlID09PSBudWxsID8gY3JlYXRlRGVidWcuZW5hYmxlZChuYW1lc3BhY2UpIDogZW5hYmxlT3ZlcnJpZGUsXG5cdFx0XHRzZXQ6IHYgPT4ge1xuXHRcdFx0XHRlbmFibGVPdmVycmlkZSA9IHY7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQvLyBFbnYtc3BlY2lmaWMgaW5pdGlhbGl6YXRpb24gbG9naWMgZm9yIGRlYnVnIGluc3RhbmNlc1xuXHRcdGlmICh0eXBlb2YgY3JlYXRlRGVidWcuaW5pdCA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0Y3JlYXRlRGVidWcuaW5pdChkZWJ1Zyk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGRlYnVnO1xuXHR9XG5cblx0ZnVuY3Rpb24gZXh0ZW5kKG5hbWVzcGFjZSwgZGVsaW1pdGVyKSB7XG5cdFx0Y29uc3QgbmV3RGVidWcgPSBjcmVhdGVEZWJ1Zyh0aGlzLm5hbWVzcGFjZSArICh0eXBlb2YgZGVsaW1pdGVyID09PSAndW5kZWZpbmVkJyA/ICc6JyA6IGRlbGltaXRlcikgKyBuYW1lc3BhY2UpO1xuXHRcdG5ld0RlYnVnLmxvZyA9IHRoaXMubG9nO1xuXHRcdHJldHVybiBuZXdEZWJ1Zztcblx0fVxuXG5cdC8qKlxuXHQqIEVuYWJsZXMgYSBkZWJ1ZyBtb2RlIGJ5IG5hbWVzcGFjZXMuIFRoaXMgY2FuIGluY2x1ZGUgbW9kZXNcblx0KiBzZXBhcmF0ZWQgYnkgYSBjb2xvbiBhbmQgd2lsZGNhcmRzLlxuXHQqXG5cdCogQHBhcmFtIHtTdHJpbmd9IG5hbWVzcGFjZXNcblx0KiBAYXBpIHB1YmxpY1xuXHQqL1xuXHRmdW5jdGlvbiBlbmFibGUobmFtZXNwYWNlcykge1xuXHRcdGNyZWF0ZURlYnVnLnNhdmUobmFtZXNwYWNlcyk7XG5cblx0XHRjcmVhdGVEZWJ1Zy5uYW1lcyA9IFtdO1xuXHRcdGNyZWF0ZURlYnVnLnNraXBzID0gW107XG5cblx0XHRsZXQgaTtcblx0XHRjb25zdCBzcGxpdCA9ICh0eXBlb2YgbmFtZXNwYWNlcyA9PT0gJ3N0cmluZycgPyBuYW1lc3BhY2VzIDogJycpLnNwbGl0KC9bXFxzLF0rLyk7XG5cdFx0Y29uc3QgbGVuID0gc3BsaXQubGVuZ3RoO1xuXG5cdFx0Zm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG5cdFx0XHRpZiAoIXNwbGl0W2ldKSB7XG5cdFx0XHRcdC8vIGlnbm9yZSBlbXB0eSBzdHJpbmdzXG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXG5cdFx0XHRuYW1lc3BhY2VzID0gc3BsaXRbaV0ucmVwbGFjZSgvXFwqL2csICcuKj8nKTtcblxuXHRcdFx0aWYgKG5hbWVzcGFjZXNbMF0gPT09ICctJykge1xuXHRcdFx0XHRjcmVhdGVEZWJ1Zy5za2lwcy5wdXNoKG5ldyBSZWdFeHAoJ14nICsgbmFtZXNwYWNlcy5zdWJzdHIoMSkgKyAnJCcpKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNyZWF0ZURlYnVnLm5hbWVzLnB1c2gobmV3IFJlZ0V4cCgnXicgKyBuYW1lc3BhY2VzICsgJyQnKSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCogRGlzYWJsZSBkZWJ1ZyBvdXRwdXQuXG5cdCpcblx0KiBAcmV0dXJuIHtTdHJpbmd9IG5hbWVzcGFjZXNcblx0KiBAYXBpIHB1YmxpY1xuXHQqL1xuXHRmdW5jdGlvbiBkaXNhYmxlKCkge1xuXHRcdGNvbnN0IG5hbWVzcGFjZXMgPSBbXG5cdFx0XHQuLi5jcmVhdGVEZWJ1Zy5uYW1lcy5tYXAodG9OYW1lc3BhY2UpLFxuXHRcdFx0Li4uY3JlYXRlRGVidWcuc2tpcHMubWFwKHRvTmFtZXNwYWNlKS5tYXAobmFtZXNwYWNlID0+ICctJyArIG5hbWVzcGFjZSlcblx0XHRdLmpvaW4oJywnKTtcblx0XHRjcmVhdGVEZWJ1Zy5lbmFibGUoJycpO1xuXHRcdHJldHVybiBuYW1lc3BhY2VzO1xuXHR9XG5cblx0LyoqXG5cdCogUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiBtb2RlIG5hbWUgaXMgZW5hYmxlZCwgZmFsc2Ugb3RoZXJ3aXNlLlxuXHQqXG5cdCogQHBhcmFtIHtTdHJpbmd9IG5hbWVcblx0KiBAcmV0dXJuIHtCb29sZWFufVxuXHQqIEBhcGkgcHVibGljXG5cdCovXG5cdGZ1bmN0aW9uIGVuYWJsZWQobmFtZSkge1xuXHRcdGlmIChuYW1lW25hbWUubGVuZ3RoIC0gMV0gPT09ICcqJykge1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXG5cdFx0bGV0IGk7XG5cdFx0bGV0IGxlbjtcblxuXHRcdGZvciAoaSA9IDAsIGxlbiA9IGNyZWF0ZURlYnVnLnNraXBzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG5cdFx0XHRpZiAoY3JlYXRlRGVidWcuc2tpcHNbaV0udGVzdChuYW1lKSkge1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Zm9yIChpID0gMCwgbGVuID0gY3JlYXRlRGVidWcubmFtZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcblx0XHRcdGlmIChjcmVhdGVEZWJ1Zy5uYW1lc1tpXS50ZXN0KG5hbWUpKSB7XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdC8qKlxuXHQqIENvbnZlcnQgcmVnZXhwIHRvIG5hbWVzcGFjZVxuXHQqXG5cdCogQHBhcmFtIHtSZWdFeHB9IHJlZ3hlcFxuXHQqIEByZXR1cm4ge1N0cmluZ30gbmFtZXNwYWNlXG5cdCogQGFwaSBwcml2YXRlXG5cdCovXG5cdGZ1bmN0aW9uIHRvTmFtZXNwYWNlKHJlZ2V4cCkge1xuXHRcdHJldHVybiByZWdleHAudG9TdHJpbmcoKVxuXHRcdFx0LnN1YnN0cmluZygyLCByZWdleHAudG9TdHJpbmcoKS5sZW5ndGggLSAyKVxuXHRcdFx0LnJlcGxhY2UoL1xcLlxcKlxcPyQvLCAnKicpO1xuXHR9XG5cblx0LyoqXG5cdCogQ29lcmNlIGB2YWxgLlxuXHQqXG5cdCogQHBhcmFtIHtNaXhlZH0gdmFsXG5cdCogQHJldHVybiB7TWl4ZWR9XG5cdCogQGFwaSBwcml2YXRlXG5cdCovXG5cdGZ1bmN0aW9uIGNvZXJjZSh2YWwpIHtcblx0XHRpZiAodmFsIGluc3RhbmNlb2YgRXJyb3IpIHtcblx0XHRcdHJldHVybiB2YWwuc3RhY2sgfHwgdmFsLm1lc3NhZ2U7XG5cdFx0fVxuXHRcdHJldHVybiB2YWw7XG5cdH1cblxuXHQvKipcblx0KiBYWFggRE8gTk9UIFVTRS4gVGhpcyBpcyBhIHRlbXBvcmFyeSBzdHViIGZ1bmN0aW9uLlxuXHQqIFhYWCBJdCBXSUxMIGJlIHJlbW92ZWQgaW4gdGhlIG5leHQgbWFqb3IgcmVsZWFzZS5cblx0Ki9cblx0ZnVuY3Rpb24gZGVzdHJveSgpIHtcblx0XHRjb25zb2xlLndhcm4oJ0luc3RhbmNlIG1ldGhvZCBgZGVidWcuZGVzdHJveSgpYCBpcyBkZXByZWNhdGVkIGFuZCBubyBsb25nZXIgZG9lcyBhbnl0aGluZy4gSXQgd2lsbCBiZSByZW1vdmVkIGluIHRoZSBuZXh0IG1ham9yIHZlcnNpb24gb2YgYGRlYnVnYC4nKTtcblx0fVxuXG5cdGNyZWF0ZURlYnVnLmVuYWJsZShjcmVhdGVEZWJ1Zy5sb2FkKCkpO1xuXG5cdHJldHVybiBjcmVhdGVEZWJ1Zztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzZXR1cDtcbiIsIi8qKlxuICogSGVscGVycy5cbiAqL1xuXG52YXIgcyA9IDEwMDA7XG52YXIgbSA9IHMgKiA2MDtcbnZhciBoID0gbSAqIDYwO1xudmFyIGQgPSBoICogMjQ7XG52YXIgdyA9IGQgKiA3O1xudmFyIHkgPSBkICogMzY1LjI1O1xuXG4vKipcbiAqIFBhcnNlIG9yIGZvcm1hdCB0aGUgZ2l2ZW4gYHZhbGAuXG4gKlxuICogT3B0aW9uczpcbiAqXG4gKiAgLSBgbG9uZ2AgdmVyYm9zZSBmb3JtYXR0aW5nIFtmYWxzZV1cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ3xOdW1iZXJ9IHZhbFxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICogQHRocm93cyB7RXJyb3J9IHRocm93IGFuIGVycm9yIGlmIHZhbCBpcyBub3QgYSBub24tZW1wdHkgc3RyaW5nIG9yIGEgbnVtYmVyXG4gKiBAcmV0dXJuIHtTdHJpbmd8TnVtYmVyfVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHZhbCwgb3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsO1xuICBpZiAodHlwZSA9PT0gJ3N0cmluZycgJiYgdmFsLmxlbmd0aCA+IDApIHtcbiAgICByZXR1cm4gcGFyc2UodmFsKTtcbiAgfSBlbHNlIGlmICh0eXBlID09PSAnbnVtYmVyJyAmJiBpc0Zpbml0ZSh2YWwpKSB7XG4gICAgcmV0dXJuIG9wdGlvbnMubG9uZyA/IGZtdExvbmcodmFsKSA6IGZtdFNob3J0KHZhbCk7XG4gIH1cbiAgdGhyb3cgbmV3IEVycm9yKFxuICAgICd2YWwgaXMgbm90IGEgbm9uLWVtcHR5IHN0cmluZyBvciBhIHZhbGlkIG51bWJlci4gdmFsPScgK1xuICAgICAgSlNPTi5zdHJpbmdpZnkodmFsKVxuICApO1xufTtcblxuLyoqXG4gKiBQYXJzZSB0aGUgZ2l2ZW4gYHN0cmAgYW5kIHJldHVybiBtaWxsaXNlY29uZHMuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHJldHVybiB7TnVtYmVyfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gcGFyc2Uoc3RyKSB7XG4gIHN0ciA9IFN0cmluZyhzdHIpO1xuICBpZiAoc3RyLmxlbmd0aCA+IDEwMCkge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgbWF0Y2ggPSAvXigtPyg/OlxcZCspP1xcLj9cXGQrKSAqKG1pbGxpc2Vjb25kcz98bXNlY3M/fG1zfHNlY29uZHM/fHNlY3M/fHN8bWludXRlcz98bWlucz98bXxob3Vycz98aHJzP3xofGRheXM/fGR8d2Vla3M/fHd8eWVhcnM/fHlycz98eSk/JC9pLmV4ZWMoXG4gICAgc3RyXG4gICk7XG4gIGlmICghbWF0Y2gpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIG4gPSBwYXJzZUZsb2F0KG1hdGNoWzFdKTtcbiAgdmFyIHR5cGUgPSAobWF0Y2hbMl0gfHwgJ21zJykudG9Mb3dlckNhc2UoKTtcbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSAneWVhcnMnOlxuICAgIGNhc2UgJ3llYXInOlxuICAgIGNhc2UgJ3lycyc6XG4gICAgY2FzZSAneXInOlxuICAgIGNhc2UgJ3knOlxuICAgICAgcmV0dXJuIG4gKiB5O1xuICAgIGNhc2UgJ3dlZWtzJzpcbiAgICBjYXNlICd3ZWVrJzpcbiAgICBjYXNlICd3JzpcbiAgICAgIHJldHVybiBuICogdztcbiAgICBjYXNlICdkYXlzJzpcbiAgICBjYXNlICdkYXknOlxuICAgIGNhc2UgJ2QnOlxuICAgICAgcmV0dXJuIG4gKiBkO1xuICAgIGNhc2UgJ2hvdXJzJzpcbiAgICBjYXNlICdob3VyJzpcbiAgICBjYXNlICdocnMnOlxuICAgIGNhc2UgJ2hyJzpcbiAgICBjYXNlICdoJzpcbiAgICAgIHJldHVybiBuICogaDtcbiAgICBjYXNlICdtaW51dGVzJzpcbiAgICBjYXNlICdtaW51dGUnOlxuICAgIGNhc2UgJ21pbnMnOlxuICAgIGNhc2UgJ21pbic6XG4gICAgY2FzZSAnbSc6XG4gICAgICByZXR1cm4gbiAqIG07XG4gICAgY2FzZSAnc2Vjb25kcyc6XG4gICAgY2FzZSAnc2Vjb25kJzpcbiAgICBjYXNlICdzZWNzJzpcbiAgICBjYXNlICdzZWMnOlxuICAgIGNhc2UgJ3MnOlxuICAgICAgcmV0dXJuIG4gKiBzO1xuICAgIGNhc2UgJ21pbGxpc2Vjb25kcyc6XG4gICAgY2FzZSAnbWlsbGlzZWNvbmQnOlxuICAgIGNhc2UgJ21zZWNzJzpcbiAgICBjYXNlICdtc2VjJzpcbiAgICBjYXNlICdtcyc6XG4gICAgICByZXR1cm4gbjtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxufVxuXG4vKipcbiAqIFNob3J0IGZvcm1hdCBmb3IgYG1zYC5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gbXNcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIGZtdFNob3J0KG1zKSB7XG4gIHZhciBtc0FicyA9IE1hdGguYWJzKG1zKTtcbiAgaWYgKG1zQWJzID49IGQpIHtcbiAgICByZXR1cm4gTWF0aC5yb3VuZChtcyAvIGQpICsgJ2QnO1xuICB9XG4gIGlmIChtc0FicyA+PSBoKSB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQobXMgLyBoKSArICdoJztcbiAgfVxuICBpZiAobXNBYnMgPj0gbSkge1xuICAgIHJldHVybiBNYXRoLnJvdW5kKG1zIC8gbSkgKyAnbSc7XG4gIH1cbiAgaWYgKG1zQWJzID49IHMpIHtcbiAgICByZXR1cm4gTWF0aC5yb3VuZChtcyAvIHMpICsgJ3MnO1xuICB9XG4gIHJldHVybiBtcyArICdtcyc7XG59XG5cbi8qKlxuICogTG9uZyBmb3JtYXQgZm9yIGBtc2AuXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IG1zXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBmbXRMb25nKG1zKSB7XG4gIHZhciBtc0FicyA9IE1hdGguYWJzKG1zKTtcbiAgaWYgKG1zQWJzID49IGQpIHtcbiAgICByZXR1cm4gcGx1cmFsKG1zLCBtc0FicywgZCwgJ2RheScpO1xuICB9XG4gIGlmIChtc0FicyA+PSBoKSB7XG4gICAgcmV0dXJuIHBsdXJhbChtcywgbXNBYnMsIGgsICdob3VyJyk7XG4gIH1cbiAgaWYgKG1zQWJzID49IG0pIHtcbiAgICByZXR1cm4gcGx1cmFsKG1zLCBtc0FicywgbSwgJ21pbnV0ZScpO1xuICB9XG4gIGlmIChtc0FicyA+PSBzKSB7XG4gICAgcmV0dXJuIHBsdXJhbChtcywgbXNBYnMsIHMsICdzZWNvbmQnKTtcbiAgfVxuICByZXR1cm4gbXMgKyAnIG1zJztcbn1cblxuLyoqXG4gKiBQbHVyYWxpemF0aW9uIGhlbHBlci5cbiAqL1xuXG5mdW5jdGlvbiBwbHVyYWwobXMsIG1zQWJzLCBuLCBuYW1lKSB7XG4gIHZhciBpc1BsdXJhbCA9IG1zQWJzID49IG4gKiAxLjU7XG4gIHJldHVybiBNYXRoLnJvdW5kKG1zIC8gbikgKyAnICcgKyBuYW1lICsgKGlzUGx1cmFsID8gJ3MnIDogJycpO1xufVxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLk1haW5TY2VuZSA9IGV4cG9ydHMubWFpbkNoYXJhY3RlcmluaXRpYWxQb3NpdGlvbiA9IGV4cG9ydHMuaXNUb3VjaERldmljZSA9IHZvaWQgMDtcclxuY29uc3QgZW5hYmxlM2RfMSA9IHJlcXVpcmUoXCJlbmFibGUzZFwiKTtcclxuY29uc3QgQ2hhaXJfMSA9IHJlcXVpcmUoXCIuL21vZHVsZXMvQ2hhaXJcIik7XHJcbmNvbnN0IENoYXJhY3Rlcl8xID0gcmVxdWlyZShcIi4vbW9kdWxlcy9DaGFyYWN0ZXJcIik7XHJcbmNvbnN0IENoYXJhY3RlckNvbnRyb2xsZXJfMSA9IHJlcXVpcmUoXCIuL21vZHVsZXMvQ2hhcmFjdGVyQ29udHJvbGxlclwiKTtcclxuY29uc3QgQ2xhc3Nyb29tM0RfMSA9IHJlcXVpcmUoXCIuL21vZHVsZXMvQ2xhc3Nyb29tM0RcIik7XHJcbmNvbnN0IENsYXNzcm9vbU1hbmFnZXJfMSA9IHJlcXVpcmUoXCIuL21vZHVsZXMvQ2xhc3Nyb29tTWFuYWdlclwiKTtcclxuY29uc3QgZGF0YV8xID0gcmVxdWlyZShcIi4vbW9kdWxlcy9kYXRhXCIpO1xyXG4vKipcclxuKiBJcyB0b3VjaCBkZXZpY2U/XHJcbiovXHJcbmV4cG9ydHMuaXNUb3VjaERldmljZSA9ICdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdztcclxuZXhwb3J0cy5tYWluQ2hhcmFjdGVyaW5pdGlhbFBvc2l0aW9uID0gbmV3IGVuYWJsZTNkXzEuVEhSRUUuVmVjdG9yMygtNiArIE1hdGgucmFuZG9tKCkgKiAzLCAwLCAzICsgTWF0aC5yYW5kb20oKSAqIDIpO1xyXG5jb25zdCBNQVhJTVVNX0FVRElCTEVfRElTVEFOQ0UgPSAxMDtcclxuY2xhc3MgTWFpblNjZW5lIGV4dGVuZHMgZW5hYmxlM2RfMS5TY2VuZTNEIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKHsga2V5OiBcIk1haW5TY2VuZVwiIH0pO1xyXG4gICAgICAgIHRoaXMuc3ViQ2hhcmFjdGVycyA9IHt9O1xyXG4gICAgICAgIHRoaXMuY2hhaXJzID0gW107XHJcbiAgICAgICAgdGhpcy5jbGFzc3Jvb20gPSBuZXcgQ2xhc3Nyb29tTWFuYWdlcl8xLkNsYXNzcm9vbU1hbmFnZXIodGhpcyk7XHJcbiAgICB9XHJcbiAgICBpbml0KCkge1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIuc2V0UGl4ZWxSYXRpbyhNYXRoLm1heCgxLCB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyAvIDIpKTtcclxuICAgIH1cclxuICAgIHByZWxvYWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICAgICAgeWllbGQgUHJvbWlzZS5hbGwoW1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkLnByZWxvYWQoJ21hbicsICcuL3Jlc291cmNlcy9tb2RlbHMvYm94X21hbi9ib3hfbWFuLmdsYicpLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkLnByZWxvYWQoJ2JnMScsICcuL3Jlc291cmNlcy90ZXh0dXJlcy93b3JsZC9wb3N4LmpwZycpLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkLnByZWxvYWQoJ2JnMicsICcuL3Jlc291cmNlcy90ZXh0dXJlcy93b3JsZC9uZWd4LmpwZycpLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkLnByZWxvYWQoJ2JnMycsICcuL3Jlc291cmNlcy90ZXh0dXJlcy93b3JsZC9wb3N5LmpwZycpLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkLnByZWxvYWQoJ2JnNCcsICcuL3Jlc291cmNlcy90ZXh0dXJlcy93b3JsZC9uZWd5LmpwZycpLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkLnByZWxvYWQoJ2JnNScsICcuL3Jlc291cmNlcy90ZXh0dXJlcy93b3JsZC9wb3N6LmpwZycpLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkLnByZWxvYWQoJ2JnNicsICcuL3Jlc291cmNlcy90ZXh0dXJlcy93b3JsZC9uZWd6LmpwZycpLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkLnByZWxvYWQoJ3dvb2QnLCAnLi9yZXNvdXJjZXMvdGV4dHVyZXMvd29vZC5qcGcnKSxcclxuICAgICAgICAgICAgICAgIHRoaXMubG9hZC5wcmVsb2FkKCdmbG9vcicsICcuL3Jlc291cmNlcy90ZXh0dXJlcy9mbG9vci5qcGcnKSxcclxuICAgICAgICAgICAgICAgIHRoaXMubG9hZC5wcmVsb2FkKCdmbG9vcicsICcuL3Jlc291cmNlcy90ZXh0dXJlcy9ib2FyZC5qcGcnKVxyXG4gICAgICAgICAgICBdKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGNyZWF0ZSgpIHtcclxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgICAgICB5aWVsZCB0aGlzLndhcnBTcGVlZCgnLWdyb3VuZCcsICctb3JiaXRDb250cm9scycsICctbGlnaHQnLCAnLXNreScpO1xyXG4gICAgICAgICAgICAvLyB0aGlzLnBoeXNpY3MuZGVidWcuZW5hYmxlKClcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICogU2V0dXAgTGlnaHRzXHJcbiAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIHRoaXMuc2V0dXBMaWdodHMoKTtcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIFNldCB1cCBFbnZpb3JubWVudFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgdGhpcy5zZXR1cEVudmlvcm5tZW50KCk7XHJcbiAgICAgICAgICAgIC8vIEFkZCBDaGFyYWN0ZXJcclxuICAgICAgICAgICAgdGhpcy5hZGRNYWluQ2hhcmFjdGVyKGV4cG9ydHMubWFpbkNoYXJhY3RlcmluaXRpYWxQb3NpdGlvbik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBzZXR1cEVudmlvcm5tZW50KCkge1xyXG4gICAgICAgIGNvbnN0IGxvYWRlciA9IG5ldyBlbmFibGUzZF8xLlRIUkVFLkN1YmVUZXh0dXJlTG9hZGVyKCk7XHJcbiAgICAgICAgY29uc3QgdGVycmFpblRleHR1cmUgPSBsb2FkZXIubG9hZChbXHJcbiAgICAgICAgICAgICcuL3Jlc291cmNlcy90ZXh0dXJlcy93b3JsZC9wb3N4LmpwZycsXHJcbiAgICAgICAgICAgICcuL3Jlc291cmNlcy90ZXh0dXJlcy93b3JsZC9uZWd4LmpwZycsXHJcbiAgICAgICAgICAgICcuL3Jlc291cmNlcy90ZXh0dXJlcy93b3JsZC9wb3N5LmpwZycsXHJcbiAgICAgICAgICAgICcuL3Jlc291cmNlcy90ZXh0dXJlcy93b3JsZC9uZWd5LmpwZycsXHJcbiAgICAgICAgICAgICcuL3Jlc291cmNlcy90ZXh0dXJlcy93b3JsZC9wb3N6LmpwZycsXHJcbiAgICAgICAgICAgICcuL3Jlc291cmNlcy90ZXh0dXJlcy93b3JsZC9uZWd6LmpwZycsXHJcbiAgICAgICAgXSk7XHJcbiAgICAgICAgdGVycmFpblRleHR1cmUuZW5jb2RpbmcgPSBlbmFibGUzZF8xLlRIUkVFLnNSR0JFbmNvZGluZztcclxuICAgICAgICB0aGlzLnNjZW5lLmJhY2tncm91bmQgPSB0ZXJyYWluVGV4dHVyZTtcclxuICAgICAgICB0aGlzLmFkZENsYXNzcm9vbSgpO1xyXG4gICAgICAgIGZvciAobGV0IGkgb2YgZGF0YV8xLmNoYWlyUG9zaXRpb25zKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNoYWlyMSA9IG5ldyBDaGFpcl8xLkNoYWlyKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNoYWlyMiA9IG5ldyBDaGFpcl8xLkNoYWlyKCk7XHJcbiAgICAgICAgICAgIGNoYWlyMS5wb3NpdGlvbi5zZXQoaVswXSwgMCwgaVsxXSAtIDAuMzUpO1xyXG4gICAgICAgICAgICBjaGFpcjIucG9zaXRpb24uc2V0KGlbMF0sIDAsIGlbMV0gKyAwLjM1KTtcclxuICAgICAgICAgICAgY2hhaXIxLmFkZFRvV29ybGQodGhpcyk7XHJcbiAgICAgICAgICAgIGNoYWlyMi5hZGRUb1dvcmxkKHRoaXMpO1xyXG4gICAgICAgICAgICB0aGlzLmNoYWlycy5wdXNoKGNoYWlyMSk7XHJcbiAgICAgICAgICAgIHRoaXMuY2hhaXJzLnB1c2goY2hhaXIyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBhZGRDbGFzc3Jvb20oKSB7XHJcbiAgICAgICAgQ2xhc3Nyb29tM0RfMS5hZGRDbGFzc3Jvb21Ub1NjZW5lKHRoaXMpO1xyXG4gICAgfVxyXG4gICAgc2V0dXBMaWdodHMoKSB7XHJcbiAgICAgICAgY29uc3QgZGlyZWN0aW9uYWxMaWdodCA9IG5ldyBlbmFibGUzZF8xLlRIUkVFLkRpcmVjdGlvbmFsTGlnaHQoMHhGRkZGRkYsIDAuNik7XHJcbiAgICAgICAgZGlyZWN0aW9uYWxMaWdodC5wb3NpdGlvbi5zZXQoLTQwLCAzMCwgLTQwKTtcclxuICAgICAgICBkaXJlY3Rpb25hbExpZ2h0LnRhcmdldC5wb3NpdGlvbi5zZXQoMCwgMCwgMCk7XHJcbiAgICAgICAgZGlyZWN0aW9uYWxMaWdodC5jYXN0U2hhZG93ID0gdHJ1ZTtcclxuICAgICAgICBkaXJlY3Rpb25hbExpZ2h0LnNoYWRvdy5iaWFzID0gLTAuMDAxO1xyXG4gICAgICAgIGRpcmVjdGlvbmFsTGlnaHQuc2hhZG93Lm1hcFNpemUud2lkdGggPSA0MDk2O1xyXG4gICAgICAgIGRpcmVjdGlvbmFsTGlnaHQuc2hhZG93Lm1hcFNpemUuaGVpZ2h0ID0gNDA5NjtcclxuICAgICAgICBkaXJlY3Rpb25hbExpZ2h0LnNoYWRvdy5jYW1lcmEubmVhciA9IDAuMTtcclxuICAgICAgICBkaXJlY3Rpb25hbExpZ2h0LnNoYWRvdy5jYW1lcmEuZmFyID0gNTAwLjA7XHJcbiAgICAgICAgZGlyZWN0aW9uYWxMaWdodC5zaGFkb3cuY2FtZXJhLmxlZnQgPSA1MDtcclxuICAgICAgICBkaXJlY3Rpb25hbExpZ2h0LnNoYWRvdy5jYW1lcmEucmlnaHQgPSAtNTA7XHJcbiAgICAgICAgZGlyZWN0aW9uYWxMaWdodC5zaGFkb3cuY2FtZXJhLnRvcCA9IDUwO1xyXG4gICAgICAgIGRpcmVjdGlvbmFsTGlnaHQuc2hhZG93LmNhbWVyYS5ib3R0b20gPSAtNTA7XHJcbiAgICAgICAgdGhpcy5zY2VuZS5hZGQoZGlyZWN0aW9uYWxMaWdodCk7XHJcbiAgICAgICAgY29uc3QgYW1iaWVudExpZ2h0ID0gbmV3IGVuYWJsZTNkXzEuVEhSRUUuQW1iaWVudExpZ2h0KDB4RkZGRkZGLCAxKTtcclxuICAgICAgICB0aGlzLnNjZW5lLmFkZChhbWJpZW50TGlnaHQpO1xyXG4gICAgfVxyXG4gICAgYWRkTWFpbkNoYXJhY3Rlcihpbml0aWFsUG9zaXRpb24gPSB1bmRlZmluZWQpIHtcclxuICAgICAgICB0aGlzLm1haW5DaGFyYWN0ZXIgPSBuZXcgQ2hhcmFjdGVyXzEuQ2hhcmFjdGVyKHtcclxuICAgICAgICAgICAgc2NlbmU6IHRoaXMsXHJcbiAgICAgICAgICAgIGluaXRpYWxQb3NpdGlvbjogZXhwb3J0cy5tYWluQ2hhcmFjdGVyaW5pdGlhbFBvc2l0aW9uLFxyXG4gICAgICAgICAgICBuYW1lOiB0aGlzLmNsYXNzcm9vbS51c2VybmFtZSxcclxuICAgICAgICAgICAgb25SZWFkeTogKGNoYXJhY3RlcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGFyYWN0ZXJDb250cm9sbGVyID0gbmV3IENoYXJhY3RlckNvbnRyb2xsZXJfMS5DaGFyYWN0ZXJDb250cm9sbGVyKHtcclxuICAgICAgICAgICAgICAgICAgICBjaGFyYWN0ZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgY2FtZXJhOiB0aGlzLmNhbWVyYSxcclxuICAgICAgICAgICAgICAgICAgICBzY2VuZTogdGhpcyxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBzZXRNYWluQ2hhcmFjdGVyQ29sb3JGcm9tU3RyaW5nKGNvbG9yKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIChfYSA9IHRoaXMubWFpbkNoYXJhY3RlcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnNldENvbG9yKG5ldyBlbmFibGUzZF8xLlRIUkVFLkNvbG9yKGNvbG9yKSk7XHJcbiAgICB9XHJcbiAgICBhZGRTdWJDaGFyYWN0ZXIoY2hhcmFjdGVyKSB7XHJcbiAgICAgICAgaWYgKCFPYmplY3Qua2V5cyh0aGlzLnN1YkNoYXJhY3RlcnMpLmluY2x1ZGVzKCd1dWlkJykpIHtcclxuICAgICAgICAgICAgY29uc3QgaW5pdGlhbFBvc2l0aW9uID0gbmV3IGVuYWJsZTNkXzEuVEhSRUUuVmVjdG9yMyhjaGFyYWN0ZXIucG9zaXRpb24ueCwgY2hhcmFjdGVyLnBvc2l0aW9uLnksIGNoYXJhY3Rlci5wb3NpdGlvbi56KTtcclxuICAgICAgICAgICAgY29uc3QgbmV3Q2hhcmFjdGVyID0gbmV3IENoYXJhY3Rlcl8xLkNoYXJhY3Rlcih7IHNjZW5lOiB0aGlzLCBjb2xvcjogbmV3IGVuYWJsZTNkXzEuVEhSRUUuQ29sb3IoY2hhcmFjdGVyLmNvbG9yKSwgaW5pdGlhbFBvc2l0aW9uLCBuYW1lOiBjaGFyYWN0ZXIudXNlcm5hbWUgfSk7XHJcbiAgICAgICAgICAgIG5ld0NoYXJhY3Rlci5sb29raW5nQXQuc2V0KC4uLmNoYXJhY3Rlci5sb29raW5nQXQpO1xyXG4gICAgICAgICAgICBuZXdDaGFyYWN0ZXIuaXNTaXR0aW5nID0gY2hhcmFjdGVyLmlzU2l0dGluZztcclxuICAgICAgICAgICAgbmV3Q2hhcmFjdGVyLmFkZE5hbWVMYWJlbChjaGFyYWN0ZXIudXNlcm5hbWUpO1xyXG4gICAgICAgICAgICB0aGlzLnN1YkNoYXJhY3RlcnNbY2hhcmFjdGVyLnV1aWRdID0gbmV3Q2hhcmFjdGVyO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIk5ldyBjaGFyYWN0ZXIgYWRkZWRcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgdXBkYXRlKHRpbWUsIGRlbHRhKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIChfYSA9IHRoaXMuY2hhcmFjdGVyQ29udHJvbGxlcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnVwZGF0ZSh0aW1lLCBkZWx0YSk7XHJcbiAgICAgICAgT2JqZWN0LmtleXModGhpcy5zdWJDaGFyYWN0ZXJzKS5mb3JFYWNoKHV1aWQgPT4ge1xyXG4gICAgICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgICAgIGNvbnN0IGNoYXJhY3RlciA9IHRoaXMuc3ViQ2hhcmFjdGVyc1t1dWlkXTtcclxuICAgICAgICAgICAgY2hhcmFjdGVyLnVwZGF0ZSh0aW1lLCBkZWx0YSk7XHJcbiAgICAgICAgICAgIGlmICgoKF9hID0gdGhpcy5tYWluQ2hhcmFjdGVyKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EudGFyZ2V0KSAmJiBjaGFyYWN0ZXIudGFyZ2V0ICYmIHRoaXMuY2xhc3Nyb29tLmF1ZGlvc1t1dWlkXSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGlzdGFuY2UgPSB0aGlzLm1haW5DaGFyYWN0ZXIudGFyZ2V0LnBvc2l0aW9uLmRpc3RhbmNlVG8oY2hhcmFjdGVyLnRhcmdldC5wb3NpdGlvbik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsYXNzcm9vbS5hdWRpb3NbdXVpZF0udm9sdW1lID0gTWF0aC5tYXgoKE1BWElNVU1fQVVESUJMRV9ESVNUQU5DRSAtIGRpc3RhbmNlKSAvIE1BWElNVU1fQVVESUJMRV9ESVNUQU5DRSwgMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5leHBvcnRzLk1haW5TY2VuZSA9IE1haW5TY2VuZTtcclxuaWYgKHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCAhPSAnaHR0cHM6JyAmJiBsb2NhdGlvbi5ob3N0bmFtZSAhPT0gXCJsb2NhbGhvc3RcIikge1xyXG4gICAgbG9jYXRpb24uaHJlZiA9IGxvY2F0aW9uLmhyZWYucmVwbGFjZShcImh0dHA6Ly9cIiwgXCJodHRwczovL1wiKTtcclxufVxyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsICgpID0+IHtcclxuICAgIGVuYWJsZTNkXzEuUGh5c2ljc0xvYWRlcignYW1tbycsICgpID0+IHtcclxuICAgICAgICBjb25zdCBwcm9qZWN0ID0gbmV3IGVuYWJsZTNkXzEuUHJvamVjdCh7IGFudGlhbGlhczogdHJ1ZSwgbWF4U3ViU3RlcHM6IDEwLCBncmF2aXR5OiB7IHg6IDAsIHk6IC05LjgxLCB6OiAwIH0sIGZpeGVkVGltZVN0ZXA6IDEgLyAxMjAsIHNjZW5lczogW01haW5TY2VuZV0gfSk7XHJcbiAgICAgICAgcHJvamVjdC5jYW52YXMuc3R5bGUubWFyZ2luVG9wID0gJzBweCAhaW1wb3J0YW50JztcclxuICAgICAgICBjb25zdCBodG1sQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NsYXNzcm9vbScpO1xyXG4gICAgICAgIGlmICghaHRtbENvbnRhaW5lcilcclxuICAgICAgICAgICAgdGhyb3cgKFwiQ2FuJ3QgZmluZCBhbiBodG1sIGVsZW1lbnQgd2l0aCBpZCBjbGFzc3Jvb21cIik7XHJcbiAgICAgICAgaHRtbENvbnRhaW5lci5hcHBlbmRDaGlsZChwcm9qZWN0LmNhbnZhcyk7XHJcbiAgICAgICAgcHJvamVjdC5jYW52YXMuc3R5bGUubWFyZ2luVG9wID0gJzBweCAhaW1wb3J0YW50JztcclxuICAgICAgICBjb25zdCByZXNpemUgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5ld1dpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XHJcbiAgICAgICAgICAgIGNvbnN0IG5ld0hlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcclxuICAgICAgICAgICAgaHRtbENvbnRhaW5lci5zdHlsZS53aWR0aCA9IGAke25ld1dpZHRofXB4YDtcclxuICAgICAgICAgICAgaHRtbENvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSBgJHtuZXdIZWlnaHR9cHhgO1xyXG4gICAgICAgICAgICBwcm9qZWN0LnJlbmRlcmVyLnNldFNpemUobmV3V2lkdGgsIG5ld0hlaWdodCk7XHJcbiAgICAgICAgICAgIGlmICgnYXNwZWN0JyBpbiBwcm9qZWN0LmNhbWVyYSlcclxuICAgICAgICAgICAgICAgIHByb2plY3QuY2FtZXJhLmFzcGVjdCA9IG5ld1dpZHRoIC8gbmV3SGVpZ2h0O1xyXG4gICAgICAgICAgICBwcm9qZWN0LmNhbWVyYS51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB3aW5kb3cub25yZXNpemUgPSByZXNpemU7XHJcbiAgICAgICAgcmVzaXplKCk7XHJcbiAgICB9KTtcclxufSk7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuQ2hhaXIgPSB2b2lkIDA7XHJcbmNvbnN0IGVuYWJsZTNkXzEgPSByZXF1aXJlKFwiZW5hYmxlM2RcIik7XHJcbmNvbnN0IGxvYWRlciA9IG5ldyBlbmFibGUzZF8xLlRIUkVFLlRleHR1cmVMb2FkZXIoKTtcclxuY2xhc3MgQ2hhaXIgZXh0ZW5kcyBlbmFibGUzZF8xLkV4dGVuZGVkT2JqZWN0M0Qge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICBjb25zdCBncm91cCA9IG5ldyBlbmFibGUzZF8xLlRIUkVFLkdyb3VwKCk7XHJcbiAgICAgICAgY29uc3QgbWF0ZXJpYWwgPSBuZXcgZW5hYmxlM2RfMS5USFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7XHJcbiAgICAgICAgICAgIGNvbG9yOiAweEZGODg0NCxcclxuICAgICAgICAgICAgbWFwOiBsb2FkZXIubG9hZCgnLi9yZXNvdXJjZXMvdGV4dHVyZXMvd29vZC5qcGcnKSxcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmFkZChuZXcgZW5hYmxlM2RfMS5USFJFRS5NZXNoKG5ldyBlbmFibGUzZF8xLlRIUkVFLkJveEdlb21ldHJ5KDAuMSwgMSwgMC4xKS50cmFuc2xhdGUoMC40NSwgMC41LCAwLjQ1KSkpOyAvLyBMZWcgMVxyXG4gICAgICAgIHRoaXMuYWRkKG5ldyBlbmFibGUzZF8xLlRIUkVFLk1lc2gobmV3IGVuYWJsZTNkXzEuVEhSRUUuQm94R2VvbWV0cnkoMC4xLCAxLCAwLjEpLnRyYW5zbGF0ZSgwLjQ1LCAwLjUsIC0wLjQ1KSkpOyAvLyBMZWcgMlxyXG4gICAgICAgIHRoaXMuYWRkKG5ldyBlbmFibGUzZF8xLlRIUkVFLk1lc2gobmV3IGVuYWJsZTNkXzEuVEhSRUUuQm94R2VvbWV0cnkoMC4xLCAxLCAwLjEpLnRyYW5zbGF0ZSgtMC40NSwgMC41LCAwLjQ1KSkpOyAvLyBMZWcgM1xyXG4gICAgICAgIHRoaXMuYWRkKG5ldyBlbmFibGUzZF8xLlRIUkVFLk1lc2gobmV3IGVuYWJsZTNkXzEuVEhSRUUuQm94R2VvbWV0cnkoMC4xLCAxLCAwLjEpLnRyYW5zbGF0ZSgtMC40NSwgMC41LCAtMC40NSkpKTsgLy8gTGVnIDRcclxuICAgICAgICB0aGlzLmFkZChuZXcgZW5hYmxlM2RfMS5USFJFRS5NZXNoKG5ldyBlbmFibGUzZF8xLlRIUkVFLkJveEdlb21ldHJ5KDEsIDAuMTEsIDEpLnRyYW5zbGF0ZSgwLCAxLCAwKSkpOyAvLyBTZWF0XHJcbiAgICAgICAgdGhpcy5hZGQobmV3IGVuYWJsZTNkXzEuVEhSRUUuTWVzaChuZXcgZW5hYmxlM2RfMS5USFJFRS5Cb3hHZW9tZXRyeSgwLjEsIDEuMywgMSkudHJhbnNsYXRlKDAuNSwgMS42LCAwKSkpOyAvLyBTaWRlXHJcbiAgICAgICAgdGhpcy50cmF2ZXJzZSgoY2hpbGQpID0+IHtcclxuICAgICAgICAgICAgaWYgKGNoaWxkLmlzTWVzaCkge1xyXG4gICAgICAgICAgICAgICAgY2hpbGQuY2FzdFNoYWRvdyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBjaGlsZC5yZWNlaXZlU2hhZG93ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGNoaWxkLm1hdGVyaWFsID0gbWF0ZXJpYWw7XHJcbiAgICAgICAgICAgICAgICBjaGlsZC5tYXRlcmlhbC5yb3VnaG5lc3MgPSAwLjU7XHJcbiAgICAgICAgICAgICAgICBjaGlsZC5tYXRlcmlhbC5tZXRhbG5lc3MgPSAwLjU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnNjYWxlLnNldFNjYWxhcigwLjQzKTtcclxuICAgIH1cclxuICAgIGFkZFRvV29ybGQoc2NlbmUpIHtcclxuICAgICAgICBzY2VuZS5hZGQuZXhpc3RpbmcodGhpcyk7XHJcbiAgICAgICAgc2NlbmUucGh5c2ljcy5hZGQuZXhpc3RpbmcodGhpcywge1xyXG4gICAgICAgICAgICBzaGFwZTogJ2JveCcsXHJcbiAgICAgICAgICAgIHdpZHRoOiAwLjUsXHJcbiAgICAgICAgICAgIGhlaWdodDogMSxcclxuICAgICAgICAgICAgb2Zmc2V0OiB7IHk6IC0wLjI1IH0sXHJcbiAgICAgICAgICAgIG1hc3M6IDEwMDAwMFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuYm9keS5zZXRGcmljdGlvbigxMDApO1xyXG4gICAgICAgIHRoaXMuYm9keS5zZXRDb2xsaXNpb25GbGFncygwKTtcclxuICAgICAgICB0aGlzLmJvZHkuc2V0QW5ndWxhckZhY3RvcigwLCAwLCAwKTtcclxuICAgICAgICAvLyBodHRwczovL2RvY3MucGFuZGEzZC5vcmcvMS4xMC9weXRob24vcHJvZ3JhbW1pbmcvcGh5c2ljcy9idWxsZXQvY2NkXHJcbiAgICAgICAgdGhpcy5ib2R5LnNldENjZE1vdGlvblRocmVzaG9sZCgxZS03KTtcclxuICAgICAgICB0aGlzLmJvZHkuc2V0Q2NkU3dlcHRTcGhlcmVSYWRpdXMoMC4yNSk7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0cy5DaGFpciA9IENoYWlyO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59O1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuQ2hhcmFjdGVyID0gdm9pZCAwO1xyXG5jb25zdCBlbmFibGUzZF8xID0gcmVxdWlyZShcImVuYWJsZTNkXCIpO1xyXG5jb25zdCBfXzEgPSByZXF1aXJlKFwiLi5cIik7XHJcbmNvbnN0IERFRkFVTFRfVkVDVE9SXzMgPSBuZXcgZW5hYmxlM2RfMS5USFJFRS5WZWN0b3IzKCk7XHJcbmNvbnN0IE1PVkVNRU5UX1NQRUVEID0gMy41O1xyXG5jbGFzcyBDaGFyYWN0ZXIge1xyXG4gICAgY29uc3RydWN0b3IocGFyYW1zKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIHRoaXMubG9va2luZ0F0ID0gbmV3IGVuYWJsZTNkXzEuVEhSRUUuVmVjdG9yMygpO1xyXG4gICAgICAgIHRoaXMuaXNNb3ZpbmdGb3J3YXJkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5pc1NpdHRpbmcgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnBhcmFtcyA9IHBhcmFtcztcclxuICAgICAgICB0aGlzLmNvbG9yID0gKF9hID0gcGFyYW1zLmNvbG9yKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBuZXcgZW5hYmxlM2RfMS5USFJFRS5Db2xvcigweEZGRkZGRik7XHJcbiAgICAgICAgdGhpcy5sb2FkQ2hhcmFjdGVyKCk7XHJcbiAgICB9XHJcbiAgICBsb2FkQ2hhcmFjdGVyKCkge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgICAgICBjb25zdCBvYmplY3QgPSB5aWVsZCB0aGlzLnBhcmFtcy5zY2VuZS5sb2FkLmdsdGYoJ21hbicpO1xyXG4gICAgICAgICAgICBjb25zdCBtYW4gPSBvYmplY3Quc2NlbmUuY2hpbGRyZW5bMF07XHJcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0ID0gbmV3IGVuYWJsZTNkXzEuRXh0ZW5kZWRPYmplY3QzRCgpO1xyXG4gICAgICAgICAgICB0aGlzLnRhcmdldC5uYW1lID0gJ2NoYXJhY3Rlcic7XHJcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0LnJvdGF0ZVkoTWF0aC5QSSArIDAuMSk7IC8vIGEgaGFja1xyXG4gICAgICAgICAgICB0aGlzLnRhcmdldC5hZGQobWFuKTtcclxuICAgICAgICAgICAgdGhpcy50YXJnZXQucm90YXRpb24uc2V0KDAsIE1hdGguUEkgKiAxLjUsIDApO1xyXG4gICAgICAgICAgICBjb25zdCBpbml0aWFsUG9zaXRpb24gPSAoX2EgPSB0aGlzLnBhcmFtcy5pbml0aWFsUG9zaXRpb24pICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IG5ldyBlbmFibGUzZF8xLlRIUkVFLlZlY3RvcjMoKTtcclxuICAgICAgICAgICAgaW5pdGlhbFBvc2l0aW9uLnNldFkoaW5pdGlhbFBvc2l0aW9uLnkpO1xyXG4gICAgICAgICAgICB0aGlzLnRhcmdldC5wb3NpdGlvbi5zZXQoLi4uaW5pdGlhbFBvc2l0aW9uLnRvQXJyYXkoKSk7XHJcbiAgICAgICAgICAgIC8vIEFkZCBzaGFkb3cgYW5kIENvbG9yXHJcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0LnRyYXZlcnNlKChjaGlsZCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNoaWxkLmlzTWVzaCAmJiBjaGlsZC5uYW1lICE9ICduYW1lLWxhYmVsJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkLmNhc3RTaGFkb3cgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkLnJlY2VpdmVTaGFkb3cgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkLm1hdGVyaWFsLmNvbG9yLnNldCh0aGlzLmNvbG9yKTtcclxuICAgICAgICAgICAgICAgICAgICBjaGlsZC5tYXRlcmlhbC5yb3VnaG5lc3MgPSAwLjU7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hpbGQubWF0ZXJpYWwubWV0YWxuZXNzID0gMC41O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICogQW5pbWF0aW9uc1xyXG4gICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICAvLyBhZCB0aGUgYm94IG1hbidzIGFuaW1hdGlvbiBtaXhlciB0byB0aGUgYW5pbWF0aW9uTWl4ZXJzIGFycmF5IChmb3IgYXV0byB1cGRhdGVzKVxyXG4gICAgICAgICAgICB0aGlzLnBhcmFtcy5zY2VuZS5hbmltYXRpb25NaXhlcnMuYWRkKHRoaXMudGFyZ2V0LmFuaW1hdGlvbi5taXhlcik7XHJcbiAgICAgICAgICAgIG9iamVjdC5hbmltYXRpb25zLmZvckVhY2goYW5pbWF0aW9uID0+IHtcclxuICAgICAgICAgICAgICAgIHZhciBfYTtcclxuICAgICAgICAgICAgICAgIGlmIChhbmltYXRpb24ubmFtZSlcclxuICAgICAgICAgICAgICAgICAgICAoX2EgPSB0aGlzLnRhcmdldCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmFuaW1hdGlvbi5hZGQoYW5pbWF0aW9uLm5hbWUsIGFuaW1hdGlvbik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLnRhcmdldC5hbmltYXRpb24ucGxheSgnaWRsZScpO1xyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgKiBBZGQgdGhlIHBsYXllciB0byB0aGUgc2NlbmUgd2l0aCBhIGJvZHlcclxuICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgdGhpcy5wYXJhbXMuc2NlbmUuYWRkLmV4aXN0aW5nKHRoaXMudGFyZ2V0KTtcclxuICAgICAgICAgICAgdGhpcy5hZGRQaHlzaWNzKCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmFtcy5vblJlYWR5KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmFtcy5vblJlYWR5KHRoaXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBzZXRDb2xvcihjb2xvcikge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICB0aGlzLmNvbG9yID0gY29sb3I7XHJcbiAgICAgICAgKF9hID0gdGhpcy50YXJnZXQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS50cmF2ZXJzZSgoY2hpbGQpID0+IHtcclxuICAgICAgICAgICAgaWYgKGNoaWxkLmlzTWVzaCAmJiBjaGlsZC5uYW1lICE9ICduYW1lLWxhYmVsJykge1xyXG4gICAgICAgICAgICAgICAgY2hpbGQubWF0ZXJpYWwuY29sb3Iuc2V0KHRoaXMuY29sb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBhZGROYW1lTGFiZWwobmFtZSkge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICBpZiAodGhpcy5uYW1lTGFiZWwpIHtcclxuICAgICAgICAgICAgKF9hID0gdGhpcy50YXJnZXQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5yZW1vdmUodGhpcy5uYW1lTGFiZWwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XHJcbiAgICAgICAgdmFyIGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XHJcbiAgICAgICAgaWYgKGN0eCkge1xyXG4gICAgICAgICAgICBjdHguY2FudmFzLmhlaWdodCA9IDMwMDtcclxuICAgICAgICAgICAgY3R4LmNhbnZhcy5oZWlnaHQgPSA0MDtcclxuICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IFwicmdiYSgyNTUsMjU1LDI1NSwxKVwiO1xyXG4gICAgICAgICAgICBjdHguZm9udCA9IFwiMjVweCBBcmlhbFwiO1xyXG4gICAgICAgICAgICBjdHgudGV4dEFsaWduID0gJ2NlbnRlcic7XHJcbiAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICcjMDAwMDAwJztcclxuICAgICAgICAgICAgY3R4LmxpbmVXaWR0aCA9IDg7XHJcbiAgICAgICAgICAgIGN0eC5zdHJva2VUZXh0KG5hbWUsIDE1MCwgMjcuNSk7XHJcbiAgICAgICAgICAgIGN0eC5maWxsVGV4dChuYW1lLCAxNTAsIDI3LjUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgdGV4dHVyZSA9IG5ldyBlbmFibGUzZF8xLlRIUkVFLlRleHR1cmUoY2FudmFzKTtcclxuICAgICAgICB0ZXh0dXJlLm5lZWRzVXBkYXRlID0gdHJ1ZTtcclxuICAgICAgICBjb25zdCBuYW1lTGFiZWwgPSBuZXcgZW5hYmxlM2RfMS5USFJFRS5NZXNoKG5ldyBlbmFibGUzZF8xLlRIUkVFLlBsYW5lR2VvbWV0cnkoMSwgMC4xNSksIG5ldyBlbmFibGUzZF8xLlRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHsgbWFwOiB0ZXh0dXJlLCBzaWRlOiBlbmFibGUzZF8xLlRIUkVFLkRvdWJsZVNpZGUsIHRyYW5zcGFyZW50OiB0cnVlIH0pKTtcclxuICAgICAgICBuYW1lTGFiZWwubmFtZSA9ICduYW1lLWxhYmVsJztcclxuICAgICAgICBuYW1lTGFiZWwucG9zaXRpb24uc2V0WSgxLjI1KTtcclxuICAgICAgICB0aGlzLm5hbWVMYWJlbCA9IG5hbWVMYWJlbDtcclxuICAgICAgICBjb25zdCBhdHRhdGNoVG9UYXJnZXQgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnRhcmdldClcclxuICAgICAgICAgICAgICAgIHRoaXMudGFyZ2V0LmFkZChuYW1lTGFiZWwpO1xyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoYXR0YXRjaFRvVGFyZ2V0LCAxMDAwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgYXR0YXRjaFRvVGFyZ2V0KCk7XHJcbiAgICB9XHJcbiAgICB1cGRhdGUodGltZSwgZGVsdGEpIHtcclxuICAgICAgICB2YXIgX2EsIF9iO1xyXG4gICAgICAgIGlmICghKChfYSA9IHRoaXMudGFyZ2V0KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuYm9keSkpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICBjb25zdCByb3RhdGlvbiA9IHRoaXMuaXNTaXR0aW5nID09IGZhbHNlID8gdGhpcy5sb29raW5nQXQgOiBuZXcgZW5hYmxlM2RfMS5USFJFRS5WZWN0b3IzKC0xMDAwMDAwLCAwLCAwKTtcclxuICAgICAgICBjb25zdCB0aGV0YSA9IE1hdGguYXRhbjIocm90YXRpb24ueCwgcm90YXRpb24ueik7XHJcbiAgICAgICAgdGhpcy50YXJnZXQuYm9keS5zZXRBbmd1bGFyVmVsb2NpdHlZKDApO1xyXG4gICAgICAgIGNvbnN0IHJvdGF0aW9uTWFuID0gdGhpcy50YXJnZXQuZ2V0V29ybGREaXJlY3Rpb24oREVGQVVMVF9WRUNUT1JfMyk7XHJcbiAgICAgICAgY29uc3QgdGhldGFNYW4gPSBNYXRoLmF0YW4yKHJvdGF0aW9uTWFuLngsIHJvdGF0aW9uTWFuLnopO1xyXG4gICAgICAgIGNvbnN0IGwgPSBNYXRoLmFicyh0aGV0YSAtIHRoZXRhTWFuKTtcclxuICAgICAgICBsZXQgcm90YXRpb25TcGVlZCA9IF9fMS5pc1RvdWNoRGV2aWNlID8gMiA6IDQ7XHJcbiAgICAgICAgbGV0IGQgPSBNYXRoLlBJIC8gMjQ7XHJcbiAgICAgICAgaWYgKGwgPiBkKSB7XHJcbiAgICAgICAgICAgIGlmIChsID4gTWF0aC5QSSAtIGQpXHJcbiAgICAgICAgICAgICAgICByb3RhdGlvblNwZWVkICo9IC0xO1xyXG4gICAgICAgICAgICBpZiAodGhldGEgPCB0aGV0YU1hbilcclxuICAgICAgICAgICAgICAgIHJvdGF0aW9uU3BlZWQgKj0gLTE7XHJcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0LmJvZHkuc2V0QW5ndWxhclZlbG9jaXR5WShyb3RhdGlvblNwZWVkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc3dpdGNoICh0aGlzLnRhcmdldC5hbmltYXRpb24uY3VycmVudCkge1xyXG4gICAgICAgICAgICBjYXNlICdpZGxlJzpcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzTW92aW5nRm9yd2FyZCA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YXJnZXQuYW5pbWF0aW9uLnBsYXkoJ3J1bicpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNTaXR0aW5nID09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRhcmdldC5hbmltYXRpb24ucGxheSgnc2l0X2Rvd25fcmlnaHQnLCB1bmRlZmluZWQsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRhcmdldC5ib2R5LnNldFZlbG9jaXR5WSgzLjIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4geyB2YXIgX2E7IHJldHVybiAoX2EgPSB0aGlzLnRhcmdldCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmJvZHkuc2V0VmVsb2NpdHlYKDEpOyB9LCAxMDApO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3J1bic6XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc01vdmluZ0ZvcndhcmQgPT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRhcmdldC5hbmltYXRpb24ucGxheSgnaWRsZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVNb3ZlbWVudCh0aGV0YSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnc2l0X2Rvd25fcmlnaHQnOlxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNTaXR0aW5nID09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YXJnZXQuYm9keS5zZXRWZWxvY2l0eSgtMSwgMiwgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YXJnZXQuYW5pbWF0aW9uLnBsYXkoJ2lkbGUnKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUGxheWVyIExhYmVsIFVwZGF0ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIChfYiA9IHRoaXMubmFtZUxhYmVsKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IubG9va0F0KHRoaXMucGFyYW1zLnNjZW5lLmNhbWVyYS5wb3NpdGlvbik7XHJcbiAgICB9XHJcbiAgICB1cGRhdGVNb3ZlbWVudCh0aGV0YSkge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICBpZiAoISgoX2EgPSB0aGlzLnRhcmdldCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmJvZHkpKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgY29uc3QgeCA9IE1hdGguc2luKHRoZXRhKSAqIE1PVkVNRU5UX1NQRUVELCB5ID0gdGhpcy50YXJnZXQuYm9keS52ZWxvY2l0eS55LCB6ID0gTWF0aC5jb3ModGhldGEpICogTU9WRU1FTlRfU1BFRUQ7XHJcbiAgICAgICAgdGhpcy50YXJnZXQuYm9keS5zZXRWZWxvY2l0eSh4LCB5LCB6KTtcclxuICAgIH1cclxuICAgIGNvcnJlY3RQb3NpdGlvbihuZXdQb3NpdGlvbiwgbG9va2luZ0F0KSB7XHJcbiAgICAgICAgaWYgKHRoaXMudGFyZ2V0KSB7XHJcbiAgICAgICAgICAgIC8vIHRoaXMuXHJcbiAgICAgICAgICAgIC8vIHRoaXMudGFyZ2V0LmJvZHkuc2V0UG9zaXRpb24oLi4ubmV3UG9zaXRpb24udG9BcnJheSgpKTtcclxuICAgICAgICAgICAgLy8gdGhpcy50YXJnZXQuYm9keS5uZWVkVXBkYXRlID0gdHJ1ZTtcclxuICAgICAgICAgICAgLy8gdGhpcy50YXJnZXQuYm9keS5yZWZyZXNoKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgYWRkUGh5c2ljcygpIHtcclxuICAgICAgICBpZiAodGhpcy50YXJnZXQpIHtcclxuICAgICAgICAgICAgdGhpcy5wYXJhbXMuc2NlbmUucGh5c2ljcy5hZGQuZXhpc3RpbmcodGhpcy50YXJnZXQsIHtcclxuICAgICAgICAgICAgICAgIHNoYXBlOiAnc3BoZXJlJyxcclxuICAgICAgICAgICAgICAgIHJhZGl1czogMC4yNSxcclxuICAgICAgICAgICAgICAgIHdpZHRoOiAwLjUsXHJcbiAgICAgICAgICAgICAgICBvZmZzZXQ6IHsgeTogLTAuMjUgfSxcclxuICAgICAgICAgICAgICAgIG1hc3M6IDEwMFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy50YXJnZXQuYm9keS5zZXRGcmljdGlvbigxMDApO1xyXG4gICAgICAgICAgICB0aGlzLnRhcmdldC5ib2R5LnNldEFuZ3VsYXJGYWN0b3IoMCwgMCwgMCk7XHJcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0LmJvZHkuc2V0Q29sbGlzaW9uRmxhZ3MoMCk7XHJcbiAgICAgICAgICAgIC8vIGh0dHBzOi8vZG9jcy5wYW5kYTNkLm9yZy8xLjEwL3B5dGhvbi9wcm9ncmFtbWluZy9waHlzaWNzL2J1bGxldC9jY2RcclxuICAgICAgICAgICAgdGhpcy50YXJnZXQuYm9keS5zZXRDY2RNb3Rpb25UaHJlc2hvbGQoMWUtNyk7XHJcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0LmJvZHkuc2V0Q2NkU3dlcHRTcGhlcmVSYWRpdXMoMC4yNSk7XHJcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0LmJvZHkubmVlZFVwZGF0ZSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZGVsZXRlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnRhcmdldClcclxuICAgICAgICAgICAgdGhpcy5wYXJhbXMuc2NlbmUuc2NlbmUucmVtb3ZlKHRoaXMudGFyZ2V0KTtcclxuICAgIH1cclxufVxyXG5leHBvcnRzLkNoYXJhY3RlciA9IENoYXJhY3RlcjtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5DaGFyYWN0ZXJDb250cm9sbGVyID0gdm9pZCAwO1xyXG5jb25zdCBlbmFibGUzZF8xID0gcmVxdWlyZShcImVuYWJsZTNkXCIpO1xyXG5jb25zdCBfXzEgPSByZXF1aXJlKFwiLi5cIik7XHJcbmNvbnN0IERFRkFVTFRfVkVDVE9SXzMgPSBuZXcgZW5hYmxlM2RfMS5USFJFRS5WZWN0b3IzKCk7XHJcbmNvbnN0IE1PVVNFX1NFTlNJVElWSVRZID0gMC4yNTtcclxuY2xhc3MgQ2hhcmFjdGVyQ29udHJvbGxlciB7XHJcbiAgICBjb25zdHJ1Y3RvcihwYXJhbXMpIHtcclxuICAgICAgICB0aGlzLmtleXMgPSB7XHJcbiAgICAgICAgICAgIHc6IHsgaXNEb3duOiBmYWxzZSB9LFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5tb3VzZU1vdmVtZW50WCA9IDA7XHJcbiAgICAgICAgdGhpcy5tb3VzZU1vdmVtZW50WSA9IDA7XHJcbiAgICAgICAgdGhpcy5wYXJhbXMgPSBwYXJhbXM7XHJcbiAgICAgICAgdGhpcy5jaGFyYWN0ZXIgPSBwYXJhbXMuY2hhcmFjdGVyO1xyXG4gICAgICAgIHRoaXMuY29udHJvbHMgPSBuZXcgZW5hYmxlM2RfMS5UaGlyZFBlcnNvbkNvbnRyb2xzKHRoaXMucGFyYW1zLmNhbWVyYSwgdGhpcy5jaGFyYWN0ZXIudGFyZ2V0LCB7XHJcbiAgICAgICAgICAgIG9mZnNldDogbmV3IGVuYWJsZTNkXzEuVEhSRUUuVmVjdG9yMygwLCAxLCAwKSxcclxuICAgICAgICAgICAgdGFyZ2V0UmFkaXVzOiAzLFxyXG4gICAgICAgICAgICB0aGV0YTogMzAwXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gTWFwIElucHV0XHJcbiAgICAgICAgY29uc3QgcHJlc3MgPSAoZSwgaXNEb3duKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmFtcy5zY2VuZS5jbGFzc3Jvb20uaXNQbGF5aW5nICE9IHRydWUpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgc3dpdGNoIChlLmtleUNvZGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgODc6IC8vIHdcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmtleXMudy5pc0Rvd24gPSBpc0Rvd247XHJcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA2NzogLy8gY1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0Rvd24gPT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b2dnbGVTaXREb3duKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnN5bmNNb3ZlbWVudCgpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGUgPT4gcHJlc3MoZSwgdHJ1ZSkpO1xyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgZSA9PiBwcmVzcyhlLCBmYWxzZSkpO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICogQWRkIFBvaW50ZXIgTG9jayBhbmQgUG9pbnRlciBEcmFnXHJcbiAgICAgICAgKi9cclxuICAgICAgICBpZiAoIV9fMS5pc1RvdWNoRGV2aWNlKSB7XHJcbiAgICAgICAgICAgIGxldCBwbCA9IG5ldyBlbmFibGUzZF8xLlBvaW50ZXJMb2NrKHRoaXMucGFyYW1zLnNjZW5lLmNhbnZhcyk7XHJcbiAgICAgICAgICAgIGxldCBwZCA9IG5ldyBlbmFibGUzZF8xLlBvaW50ZXJEcmFnKHRoaXMucGFyYW1zLnNjZW5lLmNhbnZhcyk7XHJcbiAgICAgICAgICAgIHBkLm9uTW92ZShkZWx0YSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAocGwuaXNMb2NrZWQoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubW91c2VNb3ZlbWVudFkgPSAtZGVsdGEueSAqIE1PVVNFX1NFTlNJVElWSVRZO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubW91c2VNb3ZlbWVudFggPSBkZWx0YS54ICogTU9VU0VfU0VOU0lUSVZJVFk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHRvZ2dsZVNpdERvd24oKSB7XHJcbiAgICAgICAgdmFyIF9hLCBfYjtcclxuICAgICAgICAvLyBGaW5kIE5lYXJieSBDaGFpclxyXG4gICAgICAgIGlmICghdGhpcy5jaGFyYWN0ZXIudGFyZ2V0KVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgaWYgKHRoaXMuY2hhcmFjdGVyLmlzU2l0dGluZyA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2hhcmFjdGVyLmlzU2l0dGluZyA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgeCA9IChfYiA9IChfYSA9IHRoaXMuY2hhcmFjdGVyKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EudGFyZ2V0KSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IucG9zaXRpb247XHJcbiAgICAgICAgICAgIGxldCBkaXN0YW5jZSA9IDEwMDAwMDA7XHJcbiAgICAgICAgICAgIGxldCBjaGFpciA9IHRoaXMucGFyYW1zLnNjZW5lLmNoYWlyc1swXTtcclxuICAgICAgICAgICAgdGhpcy5wYXJhbXMuc2NlbmUuY2hhaXJzLmZvckVhY2goYyA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYy5wb3NpdGlvbi5kaXN0YW5jZVRvKHgpIDwgZGlzdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBkaXN0YW5jZSA9IGMucG9zaXRpb24uZGlzdGFuY2VUbyh4KTtcclxuICAgICAgICAgICAgICAgICAgICBjaGFpciA9IGM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAoZGlzdGFuY2UgPCAxKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoYXJhY3Rlci5pc1NpdHRpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucGFyYW1zLnNjZW5lLmNsYXNzcm9vbS5oYW5kbGVNeVNpdERvd24odGhpcy5jaGFyYWN0ZXIuaXNTaXR0aW5nKTtcclxuICAgIH1cclxuICAgIHN5bmNNb3ZlbWVudCgpIHtcclxuICAgICAgICB2YXIgX2EsIF9iLCBfYztcclxuICAgICAgICB0aGlzLnBhcmFtcy5zY2VuZS5jbGFzc3Jvb20uaGFuZGxlTXlNb3ZlbWVudCh0aGlzLmtleXMudy5pc0Rvd24sIHtcclxuICAgICAgICAgICAgeDogKF9hID0gdGhpcy5jaGFyYWN0ZXIudGFyZ2V0KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucG9zaXRpb24ueCxcclxuICAgICAgICAgICAgeTogKF9iID0gdGhpcy5jaGFyYWN0ZXIudGFyZ2V0KSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IucG9zaXRpb24ueSxcclxuICAgICAgICAgICAgejogKF9jID0gdGhpcy5jaGFyYWN0ZXIudGFyZ2V0KSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2MucG9zaXRpb24ueixcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHN5bmNMb29raW5nQXQoKSB7XHJcbiAgICAgICAgdGhpcy5wYXJhbXMuc2NlbmUuY2xhc3Nyb29tLnN5bmNNeUxvb2tpbmdBdCh0aGlzLmNoYXJhY3Rlci5sb29raW5nQXQudG9BcnJheSgpKTtcclxuICAgIH1cclxuICAgIHVwZGF0ZSh0aW1lLCBkZWx0YSkge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICB0aGlzLmNoYXJhY3Rlci51cGRhdGUodGltZSwgZGVsdGEpO1xyXG4gICAgICAgIGlmICgoX2EgPSB0aGlzLmNoYXJhY3Rlci50YXJnZXQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5ib2R5KSB7XHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAqIFVwZGF0ZSBDb250cm9sc1xyXG4gICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRyb2xzLnVwZGF0ZSh0aGlzLm1vdXNlTW92ZW1lbnRYICogMywgLXRoaXMubW91c2VNb3ZlbWVudFkgKiAzKTtcclxuICAgICAgICAgICAgaWYgKCFfXzEuaXNUb3VjaERldmljZSlcclxuICAgICAgICAgICAgICAgIHRoaXMubW91c2VNb3ZlbWVudFggPSB0aGlzLm1vdXNlTW92ZW1lbnRZID0gMDtcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICogUGxheWVyIFR1cm5cclxuICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgY29uc3Qgb2xkTG9va0F0ID0gdGhpcy5jaGFyYWN0ZXIubG9va2luZ0F0LmNsb25lKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2hhcmFjdGVyLmxvb2tpbmdBdCA9IHRoaXMucGFyYW1zLmNhbWVyYS5nZXRXb3JsZERpcmVjdGlvbihERUZBVUxUX1ZFQ1RPUl8zKTtcclxuICAgICAgICAgICAgaWYgKCFvbGRMb29rQXQuZXF1YWxzKHRoaXMuY2hhcmFjdGVyLmxvb2tpbmdBdCkpXHJcbiAgICAgICAgICAgICAgICB0aGlzLnN5bmNMb29raW5nQXQoKTsgLy8gU3luYyBMb29rYXRcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICogUGxheWVyIE1vdmVcclxuICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgdGhpcy5jaGFyYWN0ZXIuaXNNb3ZpbmdGb3J3YXJkID0gdGhpcy5rZXlzLncuaXNEb3duO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5leHBvcnRzLkNoYXJhY3RlckNvbnRyb2xsZXIgPSBDaGFyYWN0ZXJDb250cm9sbGVyO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLmFkZENsYXNzcm9vbVRvU2NlbmUgPSBleHBvcnRzLkRFRkFVTFRfQk9BUkRfTUFURVJJQUwgPSBleHBvcnRzLnRleHR1cmVMb2FkZXIgPSB2b2lkIDA7XHJcbmNvbnN0IGVuYWJsZTNkXzEgPSByZXF1aXJlKFwiZW5hYmxlM2RcIik7XHJcbmV4cG9ydHMudGV4dHVyZUxvYWRlciA9IG5ldyBlbmFibGUzZF8xLlRIUkVFLlRleHR1cmVMb2FkZXIoKTtcclxuZXhwb3J0cy5ERUZBVUxUX0JPQVJEX01BVEVSSUFMID0gZXhwb3J0cy50ZXh0dXJlTG9hZGVyLmxvYWQoJy4vcmVzb3VyY2VzL3RleHR1cmVzL2JvYXJkLmpwZycpO1xyXG5mdW5jdGlvbiBhZGRDbGFzc3Jvb21Ub1NjZW5lKHNjZW5lKSB7XHJcbiAgICAvLyBGbG9vclxyXG4gICAgY29uc3QgZmxvb3JUZXh0dXJlID0gZXhwb3J0cy50ZXh0dXJlTG9hZGVyLmxvYWQoJy4vcmVzb3VyY2VzL3RleHR1cmVzL2Zsb29yLmpwZycpO1xyXG4gICAgZmxvb3JUZXh0dXJlLndyYXBTID0gZmxvb3JUZXh0dXJlLndyYXBUID0gZW5hYmxlM2RfMS5USFJFRS5SZXBlYXRXcmFwcGluZztcclxuICAgIGZsb29yVGV4dHVyZS5yZXBlYXQuc2V0KDgsIDgpO1xyXG4gICAgY29uc3QgZmxvb3JNYXRlcmlhbCA9IG5ldyBlbmFibGUzZF8xLlRIUkVFLk1lc2hTdGFuZGFyZE1hdGVyaWFsKHtcclxuICAgICAgICBjb2xvcjogMHhDMUMxQzEsXHJcbiAgICAgICAgbWFwOiBmbG9vclRleHR1cmVcclxuICAgIH0pO1xyXG4gICAgZmxvb3JNYXRlcmlhbC5yb3VnaG5lc3MgPSAxO1xyXG4gICAgZmxvb3JNYXRlcmlhbC5tZXRhbG5lc3MgPSAwO1xyXG4gICAgY29uc3QgcGxhbmUgPSBzY2VuZS5waHlzaWNzLmFkZC5ib3goeyB3aWR0aDogMTgsIGhlaWdodDogMC4zLCBkZXB0aDogMTQsIG1hc3M6IDAgfSk7XHJcbiAgICBwbGFuZS5tYXRlcmlhbCA9IGZsb29yTWF0ZXJpYWw7XHJcbiAgICBwbGFuZS5ib2R5LnNldEdyYXZpdHkoMCwgMTAsIDApO1xyXG4gICAgcGxhbmUuYm9keS5zZXRGcmljdGlvbigxKTtcclxuICAgIHBsYW5lLnJvdGF0aW9uLnNldChNYXRoLlBJIC8gMiwgMCwgMCk7XHJcbiAgICBwbGFuZS5yZWNlaXZlU2hhZG93ID0gdHJ1ZTtcclxuICAgIC8vIFdhbGxzXHJcbiAgICBjb25zdCB3YWxsVGV4dHVyZSA9IGV4cG9ydHMudGV4dHVyZUxvYWRlci5sb2FkKCcuL3Jlc291cmNlcy90ZXh0dXJlcy93YWxsLmpwZycpO1xyXG4gICAgd2FsbFRleHR1cmUud3JhcFMgPSB3YWxsVGV4dHVyZS53cmFwVCA9IGVuYWJsZTNkXzEuVEhSRUUuUmVwZWF0V3JhcHBpbmc7XHJcbiAgICB3YWxsVGV4dHVyZS5yZXBlYXQuc2V0KDQsIDIpO1xyXG4gICAgY29uc3Qgd2FsbE1hdGVyaWFsID0gbmV3IGVuYWJsZTNkXzEuVEhSRUUuTWVzaFN0YW5kYXJkTWF0ZXJpYWwoe1xyXG4gICAgICAgIGNvbG9yOiAweEMxQzFDMSxcclxuICAgICAgICBtYXA6IHdhbGxUZXh0dXJlXHJcbiAgICB9KTtcclxuICAgIHdhbGxNYXRlcmlhbC5yb3VnaG5lc3MgPSAxO1xyXG4gICAgd2FsbE1hdGVyaWFsLm1ldGFsbmVzcyA9IDA7XHJcbiAgICBjb25zdCB3YWxscyA9IFtcclxuICAgICAgICBzY2VuZS5waHlzaWNzLmFkZC5ib3goeyB3aWR0aDogMC4zLCBoZWlnaHQ6IDUsIGRlcHRoOiAxNCwgbWFzczogMCwgeDogOSwgeTogMiB9KSxcclxuICAgICAgICBzY2VuZS5waHlzaWNzLmFkZC5ib3goeyB3aWR0aDogMC4zLCBoZWlnaHQ6IDUsIGRlcHRoOiAxNCwgbWFzczogMCwgeDogLTksIHk6IDIgfSksXHJcbiAgICAgICAgc2NlbmUucGh5c2ljcy5hZGQuYm94KHsgd2lkdGg6IDE4LCBoZWlnaHQ6IDUsIGRlcHRoOiAwLjMsIG1hc3M6IDAsIHo6IDcsIHk6IDIgfSksXHJcbiAgICAgICAgc2NlbmUucGh5c2ljcy5hZGQuYm94KHsgd2lkdGg6IDE4LCBoZWlnaHQ6IDUsIGRlcHRoOiAwLjMsIG1hc3M6IDAsIHo6IC03LCB5OiAyIH0pLFxyXG4gICAgXTtcclxuICAgIHdhbGxzLmZvckVhY2god2FsbCA9PiB7XHJcbiAgICAgICAgd2FsbC5ib2R5LnNldEZyaWN0aW9uKDApO1xyXG4gICAgICAgIHdhbGwubWF0ZXJpYWwgPSB3YWxsTWF0ZXJpYWw7XHJcbiAgICAgICAgd2FsbC5yZWNlaXZlU2hhZG93ID0gdHJ1ZTtcclxuICAgICAgICB3YWxsLmNhc3RTaGFkb3cgPSBmYWxzZTtcclxuICAgIH0pO1xyXG4gICAgY29uc3Qgcm9vZiA9IHNjZW5lLnBoeXNpY3MuYWRkLmJveCh7IHdpZHRoOiAxOCwgaGVpZ2h0OiAwLjMsIGRlcHRoOiAxNCwgbWFzczogMCwgeTogNC41IH0pO1xyXG4gICAgcm9vZi5jYXN0U2hhZG93ID0gZmFsc2U7XHJcbiAgICByb29mLnJlY2VpdmVTaGFkb3cgPSBmYWxzZTtcclxuICAgIHJvb2YubWF0ZXJpYWwgPSBmbG9vck1hdGVyaWFsO1xyXG4gICAgLy8gV2hpdGUgQm9hcmRcclxuICAgIGNvbnN0IGJvYXJkQm9yZGVyID0gbmV3IGVuYWJsZTNkXzEuVEhSRUUuTWVzaChuZXcgZW5hYmxlM2RfMS5USFJFRS5Cb3hHZW9tZXRyeSgwLjEsIDMuMSwgNi4xKSwgbmV3IGVuYWJsZTNkXzEuVEhSRUUuTWVzaFN0YW5kYXJkTWF0ZXJpYWwoeyBjb2xvcjogMHhBQUFBMDAgfSkpO1xyXG4gICAgYm9hcmRCb3JkZXIucmVjZWl2ZVNoYWRvdyA9IHRydWU7XHJcbiAgICBib2FyZEJvcmRlci5wb3NpdGlvbi5zZXQoLTguODYsIDIuNSwgMCk7XHJcbiAgICBzY2VuZS5hZGQuZXhpc3RpbmcoYm9hcmRCb3JkZXIpO1xyXG4gICAgY29uc3QgYm9hcmQgPSBuZXcgZW5hYmxlM2RfMS5USFJFRS5NZXNoKG5ldyBlbmFibGUzZF8xLlRIUkVFLkJveEdlb21ldHJ5KDAuMSwgMywgNiksIG5ldyBlbmFibGUzZF8xLlRIUkVFLk1lc2hTdGFuZGFyZE1hdGVyaWFsKHsgY29sb3I6IDB4RkZGRkZGLCByb3VnaG5lc3M6IDEgfSkpO1xyXG4gICAgYm9hcmQucmVjZWl2ZVNoYWRvdyA9IHRydWU7XHJcbiAgICBib2FyZC5tYXRlcmlhbC5tYXAgPSBleHBvcnRzLkRFRkFVTFRfQk9BUkRfTUFURVJJQUw7XHJcbiAgICBib2FyZC5wb3NpdGlvbi5zZXQoLTguODUsIDIuNSwgMCk7XHJcbiAgICBzY2VuZS5hZGQuZXhpc3RpbmcoYm9hcmQpO1xyXG4gICAgc2NlbmUucHJvamVjdGlvblNjcmVlbiA9IGJvYXJkO1xyXG59XHJcbmV4cG9ydHMuYWRkQ2xhc3Nyb29tVG9TY2VuZSA9IGFkZENsYXNzcm9vbVRvU2NlbmU7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcclxuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xyXG59O1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuQ2xhc3Nyb29tTWFuYWdlciA9IHZvaWQgMDtcclxuY29uc3Qgc29ja2V0X2lvX2NsaWVudF8xID0gcmVxdWlyZShcInNvY2tldC5pby1jbGllbnRcIik7XHJcbmNvbnN0IGVuYWJsZTNkXzEgPSByZXF1aXJlKFwiZW5hYmxlM2RcIik7XHJcbmNvbnN0IF9fMSA9IHJlcXVpcmUoXCIuLlwiKTtcclxuY29uc3QgcGVlcmpzXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcInBlZXJqc1wiKSk7XHJcbmNvbnN0IENsYXNzcm9vbTNEXzEgPSByZXF1aXJlKFwiLi9DbGFzc3Jvb20zRFwiKTtcclxuY29uc3QgU09DS0VUX0FERFJFU1MgPSBcIndzOi8vbG9jYWxob3N0OjM1MDBcIjtcclxuY29uc3QgUEVFUl9DT05GSUcgPSB7XHJcbiAgICBkZWJ1ZzogMyxcclxuICAgIGNvbmZpZzoge1xyXG4gICAgICAgIGljZVRyYW5zcG9ydFBvbGljeTogXCJyZWxheVwiLFxyXG4gICAgICAgICdpY2VTZXJ2ZXJzJzogW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAvLyBpY2VUcmFuc3BvcnRQb2xpY3k6XCJyZWxheVwiLFxyXG4gICAgICAgICAgICAgICAgdXJsczogJ3N0dW46c3R1bjEubC5nb29nbGUuY29tOjE5MzAyJ1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAvLyBpY2VUcmFuc3BvcnRQb2xpY3k6XCJyZWxheVwiLFxyXG4gICAgICAgICAgICAgICAgdXJsczogJ3R1cm46MjAuMTk4LjYuMTA3OjM0Nzg/dHJhbnNwb3J0PXRjcCcsXHJcbiAgICAgICAgICAgICAgICBjcmVkZW50aWFsOiAnMTIzNCcsXHJcbiAgICAgICAgICAgICAgICB1c2VybmFtZTogJ2NhbGV1bSdcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIF1cclxuICAgIH1cclxufTtcclxuY2xhc3MgQ2xhc3Nyb29tTWFuYWdlciB7XHJcbiAgICBjb25zdHJ1Y3RvcihzY2VuZSkge1xyXG4gICAgICAgIHRoaXMuaXNQbGF5aW5nID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5lbWl0SGlzdG9yeSA9IHt9O1xyXG4gICAgICAgIHRoaXMubXlNZWRpYVN0cmVhbSA9IG5ldyBNZWRpYVN0cmVhbSgpO1xyXG4gICAgICAgIHRoaXMucGVlcnMgPSB7fTtcclxuICAgICAgICB0aGlzLmF1ZGlvcyA9IHt9O1xyXG4gICAgICAgIHRoaXMuaXNTb2NrZXRSZWFkeSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuaXNBdWRpb1JlYWR5ID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5pc1N0YXJ0QnV0dG9uTG9ja2VkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5saW5rcyA9IFtdO1xyXG4gICAgICAgIHRoaXMuYWN0aXZlTGluayA9IDA7XHJcbiAgICAgICAgdGhpcy5zY2VuZSA9IHNjZW5lO1xyXG4gICAgICAgIGNvbnN0IGpvaW5CdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnV0dG9uJyk7XHJcbiAgICAgICAgdGhpcy5teUF1ZGlvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYXVkaW8nKTtcclxuICAgICAgICB0aGlzLm15QXVkaW8ubXV0ZWQgPSB0cnVlO1xyXG4gICAgICAgIC8vIFBlZXIgSlMgQ29ubmVjdGlvblxyXG4gICAgICAgIHRoaXMubG9nRXZlbnQoXCJDb25uZWN0aW5nIHRvIHZvaWNlIGNoYXQgbWFuYWdlci4uLlwiKTtcclxuICAgICAgICB0aGlzLm15UGVlciA9IG5ldyBwZWVyanNfMS5kZWZhdWx0KHVuZGVmaW5lZCwgUEVFUl9DT05GSUcpO1xyXG4gICAgICAgIHRoaXMubXlQZWVyLm9uKCdlcnJvcicsIChlKSA9PiB7IHRoaXMubG9nRXZlbnQoXCJDb3VsZCd0IGNvbm5lY3QgdG8gdm9pY2UgY2hhdCBtYW5hZ2VyXCIsIFwiZXJyb3JcIik7IH0pO1xyXG4gICAgICAgIC8vIE1pY3JvcGhvbmUgUGVybWlzc2lvblxyXG4gICAgICAgIHRoaXMubG9nRXZlbnQoJ1dhaXRpbmcgZm9yIHlvdXIgcGVybWlzc2lvbiBmb3IgbWljcm9waG9uZS4uLicpO1xyXG4gICAgICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKHtcclxuICAgICAgICAgICAgdmlkZW86IGZhbHNlLFxyXG4gICAgICAgICAgICBhdWRpbzogdHJ1ZVxyXG4gICAgICAgIH0pLnRoZW4oc3RyZWFtID0+IHtcclxuICAgICAgICAgICAgdGhpcy5sb2dFdmVudCgnTWljcm9waG9uZSBwZXJtaXNzaW9uIGdyYW50ZWQnLCAnc3VjY2VzcycpO1xyXG4gICAgICAgICAgICB0aGlzLm15TWVkaWFTdHJlYW0gPSBzdHJlYW07XHJcbiAgICAgICAgfSkuY2F0Y2goKGUpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5sb2dFdmVudChcIlJldm9rZWQgTWljcm9waG9uZSBQZXJtaXNzaW9uLiBVc2VycyB3b24ndCBoZWFyIHlvdVwiLCAnZXJyb3InKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBQZWVyIEpTIENvbm5lY3Rpb25cclxuICAgICAgICB0aGlzLm15UGVlci5vbignb3BlbicsICgpID0+IHtcclxuICAgICAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlBlZXIgSlMgY29ubmVjdGVkXCIpO1xyXG4gICAgICAgICAgICB0aGlzLmxvZ0V2ZW50KFwiQ29ubmVjdGVkIHRvIHZvaWNlIGNoYXQgbWFuYWdlclwiLCBcInN1Y2Nlc3NcIik7XHJcbiAgICAgICAgICAgIGpvaW5CdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgKF9hID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJidXR0b25cIikpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5vblN1Ym1pdElucHV0KCkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXByZXNzJywgKGUpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVLZXlFdmVudHMoZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBvblN1Ym1pdElucHV0KCkge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJ1dHRvblwiKS5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgICAgY29uc3QgbmFtZSA9IChfYSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidXNlcm5hbWVcIikpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS52YWx1ZTtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB0aGlzLnRyeVZhbGlkYXRlSW5wdXQobmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYnV0dG9uXCIpLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy51c2VybmFtZSA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5zdGFydENvbm5lY3Rpb25zKCk7XHJcbiAgICB9XHJcbiAgICBzdGFydENvbm5lY3Rpb25zKCkge1xyXG4gICAgICAgIC8vIGNvbnN0IHNvY2tldCA9IHRoaXMuc29ja2V0ID0gaW8oU09DS0VUX0FERFJFU1MpO1xyXG4gICAgICAgIGNvbnN0IHNvY2tldCA9IHRoaXMuc29ja2V0ID0gc29ja2V0X2lvX2NsaWVudF8xLmlvKCk7XHJcbiAgICAgICAgdGhpcy5sb2dFdmVudChcIkNvbm5lY3Rpbmcgd2l0aCBzZXJ2ZXJcIik7XHJcbiAgICAgICAgc29ja2V0Lm9uKCdjb25uZWN0JywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmxvZ0V2ZW50KFwiU2VuZGluZyBkYXRhIHRvIHNlcnZlclwiKTtcclxuICAgICAgICAgICAgc29ja2V0LmVtaXQoJ2luaXQnLCB7IHV1aWQ6IHRoaXMubXlQZWVyLmlkLCB1c2VybmFtZTogdGhpcy51c2VybmFtZSwgaW5pdGlhbFBvc2l0aW9uOiBfXzEubWFpbkNoYXJhY3RlcmluaXRpYWxQb3NpdGlvbi50b0FycmF5KCkgfSwgKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlSW5pdFJlc3BvbnNlKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5mYWRlT3V0TWVudSgpLnRoZW4oKCkgPT4gdGhpcy5zdGFydENsYXNzcm9vbSgpKTtcclxuICAgICAgICAgICAgICAgIHRoaXMubG9nRXZlbnQoXCJDb25uZWN0ZWRcIiwgXCJzdWNjZXNzXCIpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gdGhpcy5hdXRvQ29ycmVjdFN0YXRlT25JbnRlcnZhbHMoKTtcclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVyU29ja2V0RXZlbnRzKHNvY2tldCk7XHJcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlQ2FsbHMoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHRyeVZhbGlkYXRlSW5wdXQobmFtZSkge1xyXG4gICAgICAgIGlmICghbmFtZSlcclxuICAgICAgICAgICAgdGhyb3cgKFwiQ2FuJ3QgZmluZCBlbGVtZW50IHdpdGggaWQgYHVzZXJuYW1lYFwiKTtcclxuICAgICAgICBpZiAobmFtZS5sZW5ndGggPCAzKSB7XHJcbiAgICAgICAgICAgIGFsZXJ0KFwiTmFtZSB0b28gc2hvcnRcIik7XHJcbiAgICAgICAgICAgIHRocm93ICgnRXJyb3InKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBmYWRlT3V0TWVudShEVVJBVElPTiA9IDMwMCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1lbnVVSSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWVudVwiKTtcclxuICAgICAgICAgICAgY29uc3QgTlVNQkVSX09GX0ZSQU1FUyA9IDIwO1xyXG4gICAgICAgICAgICBjb25zdCB4ID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbmV3T3BhY2l0eSA9IE51bWJlcih3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShtZW51VUkpLmdldFByb3BlcnR5VmFsdWUoXCJvcGFjaXR5XCIpKSAtIDEgLyBOVU1CRVJfT0ZfRlJBTUVTO1xyXG4gICAgICAgICAgICAgICAgbWVudVVJLnN0eWxlLm9wYWNpdHkgPSBuZXdPcGFjaXR5LnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAobmV3T3BhY2l0eSA8PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShudWxsKTtcclxuICAgICAgICAgICAgICAgICAgICBtZW51VUkuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoeCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIERVUkFUSU9OIC8gTlVNQkVSX09GX0ZSQU1FUyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBzdGFydENsYXNzcm9vbSgpIHtcclxuICAgICAgICB0aGlzLmlzUGxheWluZyA9IHRydWU7XHJcbiAgICB9XHJcbiAgICBoYW5kbGVLZXlFdmVudHMoZSkge1xyXG4gICAgICAgIHZhciBfYSwgX2I7XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzUGxheWluZylcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIHN3aXRjaCAoZS5rZXkpIHtcclxuICAgICAgICAgICAgY2FzZSAncCc6XHJcbiAgICAgICAgICAgIGNhc2UgJ1AnOlxyXG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xpbmtzJykuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVsbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsaW5rc1RleHRhcmVhJykuZm9jdXMoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdbJzpcclxuICAgICAgICAgICAgY2FzZSAneyc6XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5hY3RpdmVMaW5rID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIChfYSA9IHRoaXMuc29ja2V0KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZW1pdCgndXBkYXRlLWFjdGl2ZS1saW5rJywgdGhpcy5hY3RpdmVMaW5rIC0gMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dFdmVudCgnU3dpdGNoaW5nIHRvIHByZXZpb3VzIHNsaWRlJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ0V2ZW50KCdDdXJyZW50IHNsaWRlIGlzIHRoZSBmaXJzdCBvbmUnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICddJzpcclxuICAgICAgICAgICAgY2FzZSAnfSc6XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5hY3RpdmVMaW5rIDwgdGhpcy5saW5rcy5sZW5ndGggLSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgKF9iID0gdGhpcy5zb2NrZXQpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5lbWl0KCd1cGRhdGUtYWN0aXZlLWxpbmsnLCB0aGlzLmFjdGl2ZUxpbmsgKyAxKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ0V2ZW50KCdTd2l0Y2hpbmcgdG8gbmV4dCBzbGlkZScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dFdmVudCgnQ3VycmVudCBzbGlkZSBpcyB0aGUgbGFzdCBvbmUnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdvJzpcclxuICAgICAgICAgICAgY2FzZSAnTyc6XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5saW5rcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNjcmVlbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzY3JlZW4nKTtcclxuICAgICAgICAgICAgICAgICAgICBzY3JlZW4uc3R5bGUuZGlzcGxheSA9IHNjcmVlbi5zdHlsZS5kaXNwbGF5ID09ICdibG9jaycgPyAnbm9uZScgOiAnYmxvY2snO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dFdmVudCgnTm8gQWN0aXZlIFNsaWRlJywgJ2Vycm9yJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnRW50ZXInOlxyXG4gICAgICAgICAgICAgICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGlua3NUZXh0YXJlYScpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGlucHV0ID09IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXJ2ZU1lZGlhTGlua3MoaW5wdXQudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsaW5rcycpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2NhbnZhcycpWzBdLmZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBhdXRvQ29ycmVjdFN0YXRlT25JbnRlcnZhbHMoKSB7XHJcbiAgICAgICAgY29uc3QgeCA9IHNldEludGVydmFsKCgpID0+IHtcclxuICAgICAgICAgICAgdmFyIF9hLCBfYiwgX2M7XHJcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IChfYSA9IHRoaXMuc2NlbmUubWFpbkNoYXJhY3RlcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnRhcmdldDtcclxuICAgICAgICAgICAgaWYgKHRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCgoX2IgPSB0aGlzLnNjZW5lLm1haW5DaGFyYWN0ZXIpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5pc01vdmluZ0ZvcndhcmQpID09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgKF9jID0gdGhpcy5zb2NrZXQpID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYy5lbWl0KCdzdGF0ZS1jb3JyZWN0aW9uJywgdGFyZ2V0LnBvc2l0aW9uLnRvQXJyYXkoKSwgdGhpcy5zY2VuZS5tYWluQ2hhcmFjdGVyLmxvb2tpbmdBdC50b0FycmF5KCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgMTAwMCk7XHJcbiAgICB9XHJcbiAgICBoYW5kbGVJbml0UmVzcG9uc2UoZGF0YSkge1xyXG4gICAgICAgIHRoaXMuc2NlbmUuc2V0TWFpbkNoYXJhY3RlckNvbG9yRnJvbVN0cmluZyhkYXRhLmNvbG9yKTtcclxuICAgICAgICBkYXRhLm90aGVyVXNlcnMuZm9yRWFjaCh1c2VyID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zY2VuZS5hZGRTdWJDaGFyYWN0ZXIodXNlcik7XHJcbiAgICAgICAgICAgIC8vIFZvaWNlIENoYXRcclxuICAgICAgICAgICAgdGhpcy5jYWxsTmV3VXNlcih1c2VyLnV1aWQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgaGFuZGxlclNvY2tldEV2ZW50cyhzb2NrZXQpIHtcclxuICAgICAgICBzb2NrZXQub24oJ25ldy11c2VyJywgKG5ld1VzZXIpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5sb2dFdmVudChgTmV3IFVzZXIgJHtuZXdVc2VyLnVzZXJuYW1lfSBKb2luZWRgKTtcclxuICAgICAgICAgICAgdGhpcy5zY2VuZS5hZGRTdWJDaGFyYWN0ZXIobmV3VXNlcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgc29ja2V0Lm9uKCdtb3ZlbWVudCcsICh1dWlkLCBpc01vdmluZ0ZvcndhcmQpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY2hhcmFjdGVyID0gdGhpcy5zY2VuZS5zdWJDaGFyYWN0ZXJzW3V1aWRdO1xyXG4gICAgICAgICAgICBpZiAoY2hhcmFjdGVyKSB7XHJcbiAgICAgICAgICAgICAgICBjaGFyYWN0ZXIuaXNNb3ZpbmdGb3J3YXJkID0gaXNNb3ZpbmdGb3J3YXJkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgTW92ZW1lbnQgZmFpbGVkIDogJHt1dWlkfSBpcyBub3QgaW4gdGhlIGNoYXJhY3RlciBsaXN0IGApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgc29ja2V0Lm9uKCdsb29raW5nQXQnLCAodXVpZCwgbG9va2luZ0F0KSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNjZW5lLnN1YkNoYXJhY3RlcnNbdXVpZF0pXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjZW5lLnN1YkNoYXJhY3RlcnNbdXVpZF0ubG9va2luZ0F0LnNldCguLi5sb29raW5nQXQpO1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBMb29pbmdBdCBmYWlsZWQgOiAke3V1aWR9IGlzIG5vdCBpbiB0aGUgY2hhcmFjdGVyIGxpc3QgYCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgc29ja2V0Lm9uKCdpc1NpdHRpbmcnLCAodXVpZCwgaXNTaXR0aW5nKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNjZW5lLnN1YkNoYXJhY3RlcnNbdXVpZF0pXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjZW5lLnN1YkNoYXJhY3RlcnNbdXVpZF0uaXNTaXR0aW5nID0gaXNTaXR0aW5nO1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBpc1NpdHRpbmcgZmFpbGVkIDogJHt1dWlkfSBpcyBub3QgaW4gdGhlIGNoYXJhY3RlciBsaXN0IGApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHNvY2tldC5vbignc3RhdGUtY29ycmVjdGlvbicsICh1dWlkLCBwb3NpdGlvbiwgbG9va2luZ0F0KSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNjZW5lLnN1YkNoYXJhY3RlcnNbdXVpZF0pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2NlbmUuc3ViQ2hhcmFjdGVyc1t1dWlkXS5jb3JyZWN0UG9zaXRpb24obmV3IGVuYWJsZTNkXzEuVEhSRUUuVmVjdG9yMyguLi5wb3NpdGlvbiksIG5ldyBlbmFibGUzZF8xLlRIUkVFLlZlY3RvcjMoLi4ubG9va2luZ0F0KSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgU3RhdGUgQ29ycmVjdGlvbiBmYWlsZWQgOiAke3V1aWR9IGlzIG5vdCBpbiB0aGUgY2hhcmFjdGVyIGxpc3QgYCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgc29ja2V0Lm9uKCd1cGRhdGUtbGlua3MnLCAobGlua3MpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5hY3RpdmVMaW5rID0gMDtcclxuICAgICAgICAgICAgbGlua3MgPSBsaW5rcy50cmltKCk7XHJcbiAgICAgICAgICAgIHRoaXMubGlua3MgPSBsaW5rcy5zcGxpdCgnXFxuJyk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNjZW5lLnByb2plY3Rpb25TY3JlZW4pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubG9nRXZlbnQoXCJTbGlkZXMgVXBkYXRlZFwiKTtcclxuICAgICAgICAgICAgICAgIGlmIChsaW5rcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zY2VuZS5wcm9qZWN0aW9uU2NyZWVuLm1hdGVyaWFsLm1hcCA9IENsYXNzcm9vbTNEXzEudGV4dHVyZUxvYWRlci5sb2FkKHRoaXMubGlua3NbMF0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzY3JlZW4nKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NjcmVlbicpLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJHt0aGlzLmxpbmtzWzBdfWA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNjZW5lLnByb2plY3Rpb25TY3JlZW4ubWF0ZXJpYWwubWFwID0gQ2xhc3Nyb29tM0RfMS5ERUZBVUxUX0JPQVJEX01BVEVSSUFMO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgc29ja2V0Lm9uKCd1cGRhdGUtYWN0aXZlLWxpbmsnLCAoYWN0aXZlTGluaykgPT4ge1xyXG4gICAgICAgICAgICBpZiAoMCA8PSBhY3RpdmVMaW5rICYmIGFjdGl2ZUxpbmsgPCB0aGlzLmxpbmtzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2NlbmUucHJvamVjdGlvblNjcmVlbikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlTGluayA9IGFjdGl2ZUxpbms7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zY2VuZS5wcm9qZWN0aW9uU2NyZWVuLm1hdGVyaWFsLm1hcCA9IENsYXNzcm9vbTNEXzEudGV4dHVyZUxvYWRlci5sb2FkKHRoaXMubGlua3NbYWN0aXZlTGlua10pO1xyXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzY3JlZW4nKS5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKCR7dGhpcy5saW5rc1thY3RpdmVMaW5rXX1gO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgc29ja2V0Lm9uKCd1c2VyLWV4aXQnLCAodXVpZCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjaGFyYWN0ZXIgPSB0aGlzLnNjZW5lLnN1YkNoYXJhY3RlcnNbdXVpZF07XHJcbiAgICAgICAgICAgIGlmIChjaGFyYWN0ZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubG9nRXZlbnQoYCR7Y2hhcmFjdGVyLnBhcmFtcy5uYW1lfSBleGl0ZWRgKTtcclxuICAgICAgICAgICAgICAgIGNoYXJhY3Rlci5kZWxldGUoKTtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnNjZW5lLnN1YkNoYXJhY3RlcnNbdXVpZF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBVc2VyIGV4aXQgZmFpbGVkIDogJHt1dWlkfSBpcyBub3QgaW4gdGhlIGNoYXJhY3RlciBsaXN0IGApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnBlZXJzW3V1aWRdKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBlZXJzW3V1aWRdLmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5wZWVyc1t1dWlkXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICA7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgc29ja2V0Lm9uKCdkaXNjb25uZWN0JywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmxvZ0V2ZW50KFwiQ29ubmVjdGlvbiB0byBzZXJ2ZXIgaXMgbG9zdFwiLCAnZXJyb3InKTtcclxuICAgICAgICAgICAgY29uc3QgVElNRV9MSU1JVF9TRUNPTkRTID0gMTA7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSBUSU1FX0xJTUlUX1NFQ09ORFM7IGkgPiAwOyBpLS0pIHtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5sb2dFdmVudChgUmVsb2FkaW5nIGluICR7aX0gc2Vjb25kc2AsICdlcnJvcicpLCAoVElNRV9MSU1JVF9TRUNPTkRTIC0gaSkgKiAxMDAwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMubG9nRXZlbnQoYFJlbG9hZGluZy4uLmAsICdlcnJvcicpO1xyXG4gICAgICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgIH0sIFRJTUVfTElNSVRfU0VDT05EUyAqIDEwMDApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgaGFuZGxlTXlNb3ZlbWVudChpc01vdmluZ0ZvcndhcmQsIHBvc2l0aW9uKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGlmICh0aGlzLmVtaXRIaXN0b3J5Wydpc01vdmluZ0ZvcndhcmQnXSAmJiB0aGlzLmVtaXRIaXN0b3J5Wydpc01vdmluZ0ZvcndhcmQnXS5kYXRhID09IGlzTW92aW5nRm9yd2FyZCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5lbWl0SGlzdG9yeVsnaXNNb3ZpbmdGb3J3YXJkJ10uc2FtZURhdGFDb3VudGVyKysgIT0gMTApXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIDtcclxuICAgICAgICB0aGlzLmVtaXRIaXN0b3J5Wydpc01vdmluZ0ZvcndhcmQnXSA9IHtcclxuICAgICAgICAgICAgc2FtZURhdGFDb3VudGVyOiAwLFxyXG4gICAgICAgICAgICBkYXRhOiBpc01vdmluZ0ZvcndhcmRcclxuICAgICAgICB9O1xyXG4gICAgICAgIChfYSA9IHRoaXMuc29ja2V0KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZW1pdCgnbW92ZW1lbnQnLCBpc01vdmluZ0ZvcndhcmQsIHBvc2l0aW9uKTtcclxuICAgIH1cclxuICAgIHN5bmNNeUxvb2tpbmdBdChsb29raW5nQXQpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgLy8gaWYodGhpcy5lbWl0SGlzdG9yeVsnbG9va2luZ0F0J10pe1xyXG4gICAgICAgIC8vIFx0aWYoSlNPTi5zdHJpbmdpZnkodGhpcy5lbWl0SGlzdG9yeVsnbG9va2luZ0F0J10uZGF0YSkgPT0gSlNPTi5zdHJpbmdpZnkobG9va2luZ0F0KSl7XHJcbiAgICAgICAgLy8gXHRcdHRoaXMuZW1pdEhpc3RvcnlbJ2xvb2tpbmdBdCddLnNhbWVEYXRhQ291bnRlciA9IDA7XHJcbiAgICAgICAgLy8gXHRcdHJldHVybjtcclxuICAgICAgICAvLyBcdH1cclxuICAgICAgICAvLyBcdGVsc2V7XHJcbiAgICAgICAgLy8gXHRcdGlmKHRoaXMuZW1pdEhpc3RvcnlbJ2xvb2tpbmdBdCddLnNhbWVEYXRhQ291bnRlcisrICE9IDApIHJldHVybjtcclxuICAgICAgICAvLyBcdH1cclxuICAgICAgICAvLyB9O1xyXG4gICAgICAgIHRoaXMuZW1pdEhpc3RvcnlbJ2xvb2tpbmdBdCddID0ge1xyXG4gICAgICAgICAgICBzYW1lRGF0YUNvdW50ZXI6IDAsXHJcbiAgICAgICAgICAgIGRhdGE6IGxvb2tpbmdBdFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgKF9hID0gdGhpcy5zb2NrZXQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5lbWl0KCdsb29raW5nQXQnLCBsb29raW5nQXQpO1xyXG4gICAgfVxyXG4gICAgaGFuZGxlTXlTaXREb3duKGlzU2l0dGluZykge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICAoX2EgPSB0aGlzLnNvY2tldCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmVtaXQoJ2lzU2l0dGluZycsIGlzU2l0dGluZyk7XHJcbiAgICB9XHJcbiAgICBzZXJ2ZU1lZGlhTGlua3MobGlua3MpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgKF9hID0gdGhpcy5zb2NrZXQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5lbWl0KCd1cGRhdGUtbGlua3MnLCBsaW5rcyk7XHJcbiAgICAgICAgdGhpcy5sb2dFdmVudChcIlVwZGF0aW5nIFNsaWRlc1wiKTtcclxuICAgIH1cclxuICAgIC8vIFZvaWNlIENoYXRcclxuICAgIGhhbmRsZUNhbGxzKCkge1xyXG4gICAgICAgIHRoaXMubXlQZWVyLm9uKCdjYWxsJywgY2FsbCA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBOZXcgQ2FsbCBmcm9tICR7Y2FsbC5wZWVyfWApO1xyXG4gICAgICAgICAgICBjYWxsLmFuc3dlcih0aGlzLm15TWVkaWFTdHJlYW0pO1xyXG4gICAgICAgICAgICBjb25zdCBhdWRpbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2F1ZGlvJyk7XHJcbiAgICAgICAgICAgIGNhbGwub24oJ3N0cmVhbScsIHVzZXJBdWRpb1N0cmVhbSA9PiB0aGlzLmFkZEF1ZGlvU3RyZWFtKGNhbGwucGVlciwgYXVkaW8sIHVzZXJBdWRpb1N0cmVhbSkpO1xyXG4gICAgICAgICAgICBjYWxsLm9uKCdjbG9zZScsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGF1ZGlvLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYXVkaW9zW2NhbGwucGVlcl0pXHJcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuYXVkaW9zW2NhbGwucGVlcl07XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgY2FsbE5ld1VzZXIodXVpZCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGBDYWxsaW5nIFVzZXIgJHt1dWlkfWApO1xyXG4gICAgICAgIGNvbnN0IGNhbGwgPSB0aGlzLm15UGVlci5jYWxsKHV1aWQsIHRoaXMubXlNZWRpYVN0cmVhbSk7XHJcbiAgICAgICAgY29uc3QgYXVkaW8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhdWRpbycpO1xyXG4gICAgICAgIGNhbGwub24oJ3N0cmVhbScsIHVzZXJBdWRpb1N0cmVhbSA9PiB7IHRoaXMuYWRkQXVkaW9TdHJlYW0odXVpZCwgYXVkaW8sIHVzZXJBdWRpb1N0cmVhbSk7IH0pO1xyXG4gICAgICAgIGNhbGwub24oJ2Nsb3NlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBhdWRpby5yZW1vdmUoKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuYXVkaW9zW3V1aWRdKVxyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuYXVkaW9zW3V1aWRdO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMucGVlcnNbdXVpZF0gPSBjYWxsO1xyXG4gICAgfVxyXG4gICAgYWRkQXVkaW9TdHJlYW0odXVpZCwgYXVkaW8sIHN0cmVhbSkge1xyXG4gICAgICAgIGF1ZGlvLnNyY09iamVjdCA9IHN0cmVhbTtcclxuICAgICAgICBhdWRpby5hZGRFdmVudExpc3RlbmVyKCdsb2FkZWRtZXRhZGF0YScsICgpID0+IHsgYXVkaW8ucGxheSgpOyB9KTtcclxuICAgICAgICB0aGlzLmF1ZGlvc1t1dWlkXSA9IGF1ZGlvO1xyXG4gICAgfVxyXG4gICAgLy8gTG9nZ2luZ1xyXG4gICAgbG9nRXZlbnQodGV4dCwgdHlwZSA9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIGNvbnN0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpXCIpO1xyXG4gICAgICAgIGlmICh0eXBlID09ICdlcnJvcicpXHJcbiAgICAgICAgICAgIHRleHQgPSBcIkVSUk9SOiBcIiArIHRleHQ7XHJcbiAgICAgICAgbGkuaW5uZXJIVE1MID0gdGV4dDtcclxuICAgICAgICBpZiAodHlwZSlcclxuICAgICAgICAgICAgbGkuY2xhc3NOYW1lID0gXCJsb2ctXCIgKyB0eXBlO1xyXG4gICAgICAgIGNvbnN0IGNvbnNvbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbnNvbGVcIik7XHJcbiAgICAgICAgY29uc29sZS5hcHBlbmRDaGlsZChsaSk7XHJcbiAgICAgICAgY29uc29sZS5zY3JvbGxUb3AgPSBjb25zb2xlLnNjcm9sbEhlaWdodDtcclxuICAgIH1cclxufVxyXG5leHBvcnRzLkNsYXNzcm9vbU1hbmFnZXIgPSBDbGFzc3Jvb21NYW5hZ2VyO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLmNoYWlyUG9zaXRpb25zID0gdm9pZCAwO1xyXG5leHBvcnRzLmNoYWlyUG9zaXRpb25zID0gW1xyXG4gICAgWy0yLCAtM10sIFswLCAtM10sIFsyLCAtM10sIFs0LCAtM10sIFs2LCAtM10sXHJcbiAgICBbLTIsIC0xXSwgWzAsIC0xXSwgWzIsIC0xXSwgWzQsIC0xXSwgWzYsIC0xXSxcclxuICAgIFstMiwgMV0sIFswLCAxXSwgWzIsIDFdLCBbNCwgMV0sIFs2LCAxXSxcclxuICAgIFstMiwgM10sIFswLCAzXSwgWzIsIDNdLCBbNCwgM10sIFs2LCAzXSxcclxuXTtcclxuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgYWxwaGFiZXQgPSAnMDEyMzQ1Njc4OUFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXotXycuc3BsaXQoJycpXG4gICwgbGVuZ3RoID0gNjRcbiAgLCBtYXAgPSB7fVxuICAsIHNlZWQgPSAwXG4gICwgaSA9IDBcbiAgLCBwcmV2O1xuXG4vKipcbiAqIFJldHVybiBhIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIHNwZWNpZmllZCBudW1iZXIuXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IG51bSBUaGUgbnVtYmVyIHRvIGNvbnZlcnQuXG4gKiBAcmV0dXJucyB7U3RyaW5nfSBUaGUgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBudW1iZXIuXG4gKiBAYXBpIHB1YmxpY1xuICovXG5mdW5jdGlvbiBlbmNvZGUobnVtKSB7XG4gIHZhciBlbmNvZGVkID0gJyc7XG5cbiAgZG8ge1xuICAgIGVuY29kZWQgPSBhbHBoYWJldFtudW0gJSBsZW5ndGhdICsgZW5jb2RlZDtcbiAgICBudW0gPSBNYXRoLmZsb29yKG51bSAvIGxlbmd0aCk7XG4gIH0gd2hpbGUgKG51bSA+IDApO1xuXG4gIHJldHVybiBlbmNvZGVkO1xufVxuXG4vKipcbiAqIFJldHVybiB0aGUgaW50ZWdlciB2YWx1ZSBzcGVjaWZpZWQgYnkgdGhlIGdpdmVuIHN0cmluZy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyIFRoZSBzdHJpbmcgdG8gY29udmVydC5cbiAqIEByZXR1cm5zIHtOdW1iZXJ9IFRoZSBpbnRlZ2VyIHZhbHVlIHJlcHJlc2VudGVkIGJ5IHRoZSBzdHJpbmcuXG4gKiBAYXBpIHB1YmxpY1xuICovXG5mdW5jdGlvbiBkZWNvZGUoc3RyKSB7XG4gIHZhciBkZWNvZGVkID0gMDtcblxuICBmb3IgKGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XG4gICAgZGVjb2RlZCA9IGRlY29kZWQgKiBsZW5ndGggKyBtYXBbc3RyLmNoYXJBdChpKV07XG4gIH1cblxuICByZXR1cm4gZGVjb2RlZDtcbn1cblxuLyoqXG4gKiBZZWFzdDogQSB0aW55IGdyb3dpbmcgaWQgZ2VuZXJhdG9yLlxuICpcbiAqIEByZXR1cm5zIHtTdHJpbmd9IEEgdW5pcXVlIGlkLlxuICogQGFwaSBwdWJsaWNcbiAqL1xuZnVuY3Rpb24geWVhc3QoKSB7XG4gIHZhciBub3cgPSBlbmNvZGUoK25ldyBEYXRlKCkpO1xuXG4gIGlmIChub3cgIT09IHByZXYpIHJldHVybiBzZWVkID0gMCwgcHJldiA9IG5vdztcbiAgcmV0dXJuIG5vdyArJy4nKyBlbmNvZGUoc2VlZCsrKTtcbn1cblxuLy9cbi8vIE1hcCBlYWNoIGNoYXJhY3RlciB0byBpdHMgaW5kZXguXG4vL1xuZm9yICg7IGkgPCBsZW5ndGg7IGkrKykgbWFwW2FscGhhYmV0W2ldXSA9IGk7XG5cbi8vXG4vLyBFeHBvc2UgdGhlIGB5ZWFzdGAsIGBlbmNvZGVgIGFuZCBgZGVjb2RlYCBmdW5jdGlvbnMuXG4vL1xueWVhc3QuZW5jb2RlID0gZW5jb2RlO1xueWVhc3QuZGVjb2RlID0gZGVjb2RlO1xubW9kdWxlLmV4cG9ydHMgPSB5ZWFzdDtcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vLyBUaGlzIGVudHJ5IG1vZHVsZSBpcyByZWZlcmVuY2VkIGJ5IG90aGVyIG1vZHVsZXMgc28gaXQgY2FuJ3QgYmUgaW5saW5lZFxudmFyIF9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9zcmMvaW5kZXgudHNcIik7XG4iXSwic291cmNlUm9vdCI6IiJ9